const _0x33b6b2=_0x4de3;(function(_0x57fff6,_0x55bce1){const _0x2364f3=_0x4de3,_0x21347a=_0x57fff6();while(!![]){try{const _0x3d9ade=parseInt(_0x2364f3(0x235))/0x1+parseInt(_0x2364f3(0x1aa))/0x2+-parseInt(_0x2364f3(0xfe))/0x3*(parseInt(_0x2364f3(0x1c9))/0x4)+-parseInt(_0x2364f3(0x1db))/0x5*(parseInt(_0x2364f3(0x23a))/0x6)+-parseInt(_0x2364f3(0x225))/0x7+parseInt(_0x2364f3(0xd5))/0x8*(-parseInt(_0x2364f3(0x1d0))/0x9)+-parseInt(_0x2364f3(0x1de))/0xa*(-parseInt(_0x2364f3(0x23e))/0xb);if(_0x3d9ade===_0x55bce1)break;else _0x21347a['push'](_0x21347a['shift']());}catch(_0x2100c7){_0x21347a['push'](_0x21347a['shift']());}}}(_0x5549,0xe43a7));const _0x2270c0=function(){let _0x3c3a12=!![];return function(_0x2612fa,_0x5044b8){const _0xde2803=_0x3c3a12?function(){const _0x5faa5a=_0x4de3;if(_0x5044b8){const _0x212e64=_0x5044b8[_0x5faa5a(0x1e4)](_0x2612fa,arguments);return _0x5044b8=null,_0x212e64;}}:function(){};return _0x3c3a12=![],_0xde2803;};}(),_0x475483=_0x2270c0(this,function(){const _0x5919f2=_0x4de3;return _0x475483[_0x5919f2(0x244)]()[_0x5919f2(0x205)](_0x5919f2(0xec))['toString']()[_0x5919f2(0xf7)](_0x475483)[_0x5919f2(0x205)]('(((.+)+)+)+$');});_0x475483();'use strict';const ccxt=require('ccxt'),low=require(_0x33b6b2(0x1c7)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x33b6b2(0x14d))[_0x33b6b2(0xc0)],util=require(_0x33b6b2(0x14f)),argv=require('yargs/yargs')(process['argv'][_0x33b6b2(0x15b)](0x2))[_0x33b6b2(0x1fc)],path=require(_0x33b6b2(0x19f));let exchange;global[_0x33b6b2(0x1b3)]={},global['change']={};const usdBasecoins=[_0x33b6b2(0x20d),_0x33b6b2(0x1ca),_0x33b6b2(0x1a5),'USDT',_0x33b6b2(0x141),_0x33b6b2(0x23c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x33b6b2(0xe2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x33b6b2(0x11b)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x33b6b2(0x19a)+pauseBotInterval/0xea60+_0x33b6b2(0x148),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x33b6b2(0x12c))[_0x33b6b2(0x184)],botID=process[_0x33b6b2(0x1fc)][0x2]||_0x33b6b2(0x129),pattern=/^[0-9]{3}$/;!pattern[_0x33b6b2(0xd2)](botID)&&(console[_0x33b6b2(0x1cb)]('Error:\x20Invalid\x20argument\x20'+botID+_0x33b6b2(0x229)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x33b6b2(0x1ae)+userID+'/':_0x33b6b2(0x1ae),logspath=userID?_0x33b6b2(0x1cd)+userID+'/':'./logs/',loggerfile=fs[_0x33b6b2(0x197)](logspath+_0x33b6b2(0x10f),{'flags':'a'});!fs[_0x33b6b2(0x1fb)](configpath)&&fs[_0x33b6b2(0xe6)](configpath);!fs[_0x33b6b2(0x1fb)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x33b6b2(0xc7),logfile=configpath+_0x33b6b2(0x118)+botID+'-events.json',performancefile=configpath+_0x33b6b2(0x118)+botID+_0x33b6b2(0x1ed),coinresultsfile=configpath+_0x33b6b2(0x118)+botID+_0x33b6b2(0x253),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x33b6b2(0x216),configbackuppath=configpath+_0x33b6b2(0x1b5),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x33b6b2(0xe8)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x33b6b2(0xc6)]({'data':[],'version':serverversion})[_0x33b6b2(0xe8)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x4de3(_0x1d040c,_0xa3d6b0){const _0x448805=_0x5549();return _0x4de3=function(_0x475483,_0x2270c0){_0x475483=_0x475483-0xba;let _0x554932=_0x448805[_0x475483];return _0x554932;},_0x4de3(_0x1d040c,_0xa3d6b0);}dbConfig[_0x33b6b2(0xc6)]({'bot':[],'version':serverversion})[_0x33b6b2(0xe8)]();function _0x5549(){const _0x1ace78=['buy','USD','closed','function','watchTrades','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','amountToPrecision','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','startprice','Bitget','bb-secure.json','event','Pausing\x20for\x20','loadSymbols()','bid','has','getSeconds','none','red_yellow_blue','cloneDeep','currency','Invalid\x20quantity','round','Cex','toLowerCase','12902372nDpdVB','uncaughtException','restart','exchange',',\x20must\x20be\x20a\x203\x20digit\x20number','sell','unlinkSync','event-history','args','Reset\x20|\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','watchTransactions()','Bybit','limits','market','apiKey','1211996CbZrzz','EUR','resetHistory','message','map','18MkVoee','orderstatus','USDP','bots','11GGceuQ','added','concat','trade','floor','-events.json','toString','removed','InvalidOrder','no\x20open\x20orders','2\x20-\x20Validate\x20orders:\x20','remove','error','%\x20(','push','getPortfolio(1)','split','toFixed','filled','initTickers()','ongoing','-results.json','performance','recreate','deleteHistoryAlerts','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','must\x20be\x20greater\x20than\x20minimum\x20amount','ORDERS.LOCKED','remainingSymbols','Crypt','\x20:\x20','stringify','max','Invalid\x20API\x20key\x20or\x20secret\x20entered','colorscheme','defaults','-config.json','cancelOrders()','request-time','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','threshold','shift','amount','buys','recovery','getPortfolio','ordertype','test','bot','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','1332568seAfnN','Portfolio\x20change\x20detected:\x20','timeout','\x20closed\x20the\x20connection','cooldown','Invalid\x20symbol:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','2\x20-\x20handling\x20FILLED\x20order:\x20','placeOrder()','Market','date','loadMarkets','Fee\x20discount\x20refund\x20detected:\x20','freeze','splice','fetchOpenOrders','orderId','mkdirSync','\x20/\x20','write','yyyy/MM/dd','liquidity','************','(((.+)+)+)+$','getFullYear','changes','type','milliseconds','apiSecret','total','sendPortfolioTelegram','autoliquidity','valid','configuration','constructor','datetime','openOrders','</pre>','secure','showname','Resetting\x20bot\x20history','21yQLVDv','getOpenOrders()','running','sha256','OrderNotFound','timestamp','2\x20-\x20Orders\x20unlocked','delta','net-basecoin','exchanges','BTC','spot','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','BNB','usd','\x20rejected\x20your\x20API\x20request','/output-000.log','order','Cryptocom','realized','decrypt','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','substring','\x20|\x20highest\x20fee:\x20','watchOrders','bot-','Failed\x20to\x20load\x20coin\x20data\x20for\x20','page','UNLOCKED','ORDERS.UNLOCKED','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','fetchTickers','startdate','Saving\x20configuration','canceled','send','pro','assign','\x20>\x20[DEBUG]\x20','recent20','KC-API-TIMESTAMP\x20Invalid','1\x20-\x20Unlock\x20orders','001','fetchBalance',':\x20Bot\x20','./version.json','1\x20-\x20Validate\x20orders:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','excluded','Exception\x20thrown\x20in\x20','<b>','fiat','storeHeadless','InsufficientFunds','target','exec','getHours','DDoSProtection','NetworkError','startnumber','yyyy-MM-dd\x27T\x27HH:mm:ss','coins','filter','API-key\x20format\x20invalid','abs','net-fiat','USDC','\x20orders\x20in\x20less\x20than\x20','number','No\x20more\x20open\x20orders\x20-\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getAllOrders()','\x20minutes','BNB/','PAXG','findIndex','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','hybrid-crypto-js','getCoins()','util','getPortfolio(2)','initclient','kill','emojibuy','fee','limit','value','USDT','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','includes',':\x20timer\x20>','slice','Exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Loading\x20completed','.json','limit-high','1\x20-\x20FILLED\x20known\x20order:\x20','storeFiat','storeConfiguration','Huobi','change','change24h','\x20metrics:</b>\x20\x0a\x0a','success','\x20API\x20key\x20is\x20invalid','fromCodePoint','MIN_NOTIONAL','apiPassword','balances','\x20|\x20','botname','Trigger:\x20','getPortfolio(0)','time','join','padEnd','sort','format','last','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20|\x20lock\x20orders:\x20','entries','Limit\x20(low-margin)','leftTxt','\x20has\x20a\x2024h\x20drop\x20of\x20','set','password','replace','status','stopExchange()','progress','version','cancelOrder','\x20minutes\x20-\x20','createOrder','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','Unfilled\x20order(s)\x20canceled\x20after\x20','parse','limit-low','enabled','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','timeshift','loading-canceled','cancel','RSA-OAEP','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Binance','sendMetricsTelegram','final','AuthenticationError','createWriteStream','headless','-------------------------------\x0a','\x20-\x20pausing\x20bot\x20for\x20','/USD','\x20value','getTime','breakeven','path','padStart','Transaction\x20detection\x20unblocked','cost','Insufficient\x20funds\x20to\x20execute\x20order:\x20','initial','TUSD','UNLOCKING','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20>\x20','open','2344216AKTZpc','find','LOCKED','showConfig','./config/','\x20|\x20Custom\x20ID:\x20','onepagemode','\x20not\x20available','min','ticker','balancing\x20resumes\x20when\x20cooldown\x20ends','/backup/','Huobipro','Initializing\x20coin\x20results','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','<pre>','warning','get','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchTicker','***','sortBy','getDate','settings','\x20order:\x20','full','sells','Resetting\x20coin\x20results:\x20','invalid\x20Request-Time','lowdb','\x20-\x20bot\x20not\x20started','401620dkAvnu','BUSD','log','logs','./logs/','Net\x20effect','coin','54TilZtI','average','starting-balance-','offset','reverse','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','ExchangeError','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Unknown\x20error\x20occured','netoffset','ExchangeNotAvailable','2634325IcUztm','getMinutes','\x20network\x20error','36767710VVxIww','forEach','privateKey','fetchClosedOrders','parseISO','price','apply','distribution','2.6.0','\x20not\x20responding','Bot\x20','close','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Waited\x20','Error\x20details:','-performance.json','\x20portfolio:</b>\x20\x0a\x0a','watchOrders()','getMonth','<b>Bot\x20','configuration-stored','getCoinNumber()','emojisell','string','length','exchange\x20not\x20reloaded','portfolio','\x20exchange','highest','existsSync','argv','ETH','basecoin','isEqual','basecoinvalue','eur','rightTxt','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','side','search','starting-balances','PermissionDenied','ask','data','symbol','debug'];_0x5549=function(){return _0x1ace78;};return _0x5549();}const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x33b6b2(0xc6)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x33b6b2(0x101),'rsaStandard':_0x33b6b2(0x191)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x27fbb8=>{const _0xa312f5=_0x33b6b2;console[_0xa312f5(0x1cb)](_0x27fbb8);},'simple':_0x55422b=>{const _0x2b4d3c=_0x33b6b2;console[_0x2b4d3c(0x1cb)](_0x55422b),loggerfile['write'](util[_0x2b4d3c(0x176)](_0x55422b)+'\x0a');},'full':async(_0x320295,_0x4bbbb3='')=>{const _0x4604e2=_0x33b6b2;let _0x4aa564;if(config[_0x4604e2(0xfc)])_0x4aa564=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x320295;else _0x4aa564=getTimeStamp()+':\x20Bot\x20'+botID+_0x4604e2(0x1a8)+_0x320295;console[_0x4604e2(0x1cb)](_0x4aa564),loggerfile['write'](util['format'](_0x4aa564)+'\x0a'),_0x4bbbb3&&(console[_0x4604e2(0x1cb)](_0x4bbbb3),loggerfile[_0x4604e2(0xe8)](util['format'](_0x4bbbb3)+'\x0a'));},'debug':async(_0x4bbf1f,_0x3a7ffa='')=>{const _0x370c99=_0x33b6b2;let _0x32c124;if(config['showname'])_0x32c124=getTimeStamp()+':\x20'+config['botname']+_0x370c99(0x125)+_0x4bbf1f;else _0x32c124=getTimeStamp()+_0x370c99(0x12b)+botID+_0x370c99(0x125)+_0x4bbf1f;if(debugging)console[_0x370c99(0x1cb)](_0x32c124);loggerfile[_0x370c99(0xe8)](util[_0x370c99(0x176)](_0x32c124)+'\x0a');if(_0x3a7ffa){if(debugging)console[_0x370c99(0x1cb)](_0x3a7ffa);loggerfile['write'](util[_0x370c99(0x176)](_0x3a7ffa)+'\x0a');}}};process['on']('uncaughtException',function(_0x5b8bdd){const _0x5649c0=_0x33b6b2;handleError(_0x5b8bdd,_0x5649c0(0x226));});settings[_0x33b6b2(0x18e)]!=config['timeshift']&&updateTimeshift(settings[_0x33b6b2(0x18e)]);settings['onepagemode']!=config[_0x33b6b2(0x1b0)]&&updateOnepagemode(settings[_0x33b6b2(0x1b0)]);process[_0x33b6b2(0x122)]({'started':_0x33b6b2(0x100)},_0x192421=>{}),initializeProcessListeners();function proxyEmit(_0x596483,_0x39e1d6=null){const _0x303fb4=_0x33b6b2;process[_0x303fb4(0x122)]({'function':_0x596483,'args':_0x39e1d6},_0x45895c=>{});}function initializeProcessListeners(){const _0x1d65d3=_0x33b6b2;process['on'](_0x1d65d3(0x238),_0x4335fe=>{const _0x3130bb=_0x1d65d3;switch(Object['keys'](_0x4335fe)[0x0]){case _0x3130bb(0x18e):_0x4335fe[_0x3130bb(0x18e)]!=undefined&&(settings[_0x3130bb(0x18e)]=_0x4335fe['timeshift'],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x4335fe['onepagemode']!=undefined&&(settings['onepagemode']=_0x4335fe['onepagemode'],updateOnepagemode(settings[_0x3130bb(0x1b0)]));break;case _0x3130bb(0x23d):_0x4335fe['bots']!=undefined&&(bots=JSON['parse'](_0x4335fe[_0x3130bb(0x23d)]),proxyEmit(_0x3130bb(0x23d),bots));break;case _0x3130bb(0x20f):switch(_0x4335fe[_0x3130bb(0x20f)]){case _0x3130bb(0x151):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x4335fe[_0x3130bb(0x22d)]);break;case _0x3130bb(0xbb):deleteHistoryAlerts(_0x4335fe[_0x3130bb(0x22d)]);break;case _0x3130bb(0xd0):getPortfolio(_0x4335fe['args']);break;case _0x3130bb(0x163):storeConfiguration(_0x4335fe[_0x3130bb(0x22d)]);break;case _0x3130bb(0x133):storeHeadless(_0x4335fe['args']);break;case _0x3130bb(0x162):storeFiat(_0x4335fe['args']);break;case _0x3130bb(0x237):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4335fe[_0x3130bb(0x22d)]);break;case'cancelLoading':cancelLoading();break;case _0x3130bb(0x1ad):showConfig();break;case _0x3130bb(0x194):sendMetricsTelegram();break;case _0x3130bb(0xf3):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x18a8a9=![]){const _0x38c3bd=_0x33b6b2;logger[_0x38c3bd(0x20b)](_0x38c3bd(0x22e)+(_0x18a8a9?'exchange\x20reloaded':_0x38c3bd(0x1f7))+'\x20|\x20exchange:\x20'+config[_0x38c3bd(0x228)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x18a8a9)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x38c3bd(0x234)]!=_0x38c3bd(0x1be)){loadingProgress=0x0;if(_0x18a8a9){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x103856){handleErrorNoStop(_0x103856,_0x38c3bd(0x219));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x5dbdc2=await getCoins();[currentCoins,currentCoinsAll]=_0x5dbdc2,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x38c3bd(0x20b)](_0x38c3bd(0x15e)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x38c3bd(0x1f6)]==0x0&&allOpenOrders[_0x38c3bd(0x1f6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x26baf6=_0x33b6b2;exchangeStopped=!![];try{await exchange[_0x26baf6(0x1e9)]();}catch(_0x2df6d7){await handleError(_0x2df6d7,_0x26baf6(0x182));}}async function reloadExchange(){const _0x46bfcf=_0x33b6b2;while(lockOrders!=ORDERS[_0x46bfcf(0x11b)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x46bfcf(0x20b)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x132fc1=config[_0x33b6b2(0x228)],_0x9f40f5=config[_0x33b6b2(0x234)],_0x3c0df2=config['apiSecret'],_0x1048ab=config['apiPassword']){const _0x3a8a34=_0x33b6b2;exchange&&await stopExchange();!supportedExchanges()[_0x3a8a34(0x159)](_0x132fc1)&&(logHistory('error',_0x3a8a34(0x11d)+_0x132fc1+_0x3a8a34(0x1f9)),killBot());const _0x40ab56=ccxt['pro'][_0x132fc1[_0x3a8a34(0x224)]()];exchange=new _0x40ab56({'apiKey':_0x9f40f5,'secret':_0x3c0df2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3a8a34(0x109),'watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}});if(_0x1048ab)exchange[_0x3a8a34(0x17f)]=_0x1048ab;}function setStableCoins(){const _0x45bbda=_0x33b6b2;let _0x3b424e=config[_0x45bbda(0x1fe)]=='ETH'?'ETH':config[_0x45bbda(0x1fe)]==_0x45bbda(0x14a)?'PAXG':_0x45bbda(0x108),_0x355ab1=!allSymbols['includes'](_0x3b424e+_0x45bbda(0x19b))?_0x45bbda(0x157):_0x45bbda(0x20d),_0x3a20d6=!allSymbols[_0x45bbda(0x159)](_0x3b424e+'/EUR')?_0x355ab1:_0x45bbda(0x236);stablecoins={'eur':{'coin':''+_0x3b424e+_0x3a20d6,'symbol':_0x3b424e+'/'+_0x3a20d6},'usd':{'coin':''+_0x3b424e+_0x355ab1,'symbol':_0x3b424e+'/'+_0x355ab1}};}async function initwsCcxt(){const _0x361c8e=_0x33b6b2;initCycle++;const _0x20dfd8=initCycle;let _0x2692ea=[];config[_0x361c8e(0x1f8)][_0x361c8e(0x1df)](_0x3c93c7=>{const _0x122274=_0x361c8e;if(!_0x3c93c7[_0x122274(0x12f)]&&_0x3c93c7[_0x122274(0x1cf)]!=config['basecoin'])_0x2692ea[_0x122274(0x24c)](_0x3c93c7['symbol']);});if(!_0x2692ea['includes'](stablecoins[_0x361c8e(0x201)]['symbol']))_0x2692ea[_0x361c8e(0x24c)](stablecoins[_0x361c8e(0x201)][_0x361c8e(0x20a)]);if(!_0x2692ea[_0x361c8e(0x159)](stablecoins[_0x361c8e(0x10d)]['symbol']))_0x2692ea[_0x361c8e(0x24c)](stablecoins[_0x361c8e(0x10d)][_0x361c8e(0x20a)]);if(config[_0x361c8e(0x228)]['startsWith'](_0x361c8e(0x193))&&config['basecoin']!='PAXG'){if(!_0x2692ea['includes'](_0x361c8e(0x149)+config[_0x361c8e(0x1fe)]))_0x2692ea['push'](_0x361c8e(0x149)+config[_0x361c8e(0x1fe)]);}loadCoins(_0x2692ea),_0x2692ea=validateSymbols(_0x2692ea);const _0x454eff=async _0x5e003c=>{const _0x5be8a6=_0x361c8e;let _0xdf8d40;try{const _0x138660=await getTickers(_0x5e003c);Object[_0x5be8a6(0x17a)](_0x138660)[_0x5be8a6(0x1df)](_0x38634e=>{const _0x24e701=_0x5be8a6;_0xdf8d40=_0x38634e[0x1][_0x24e701(0x20a)],global[_0x24e701(0x1b3)][noslash(_0xdf8d40)]=_0x38634e[0x1][_0x24e701(0x177)],global[_0x24e701(0x165)][_0xdf8d40]=_0x38634e[0x1]['percentage'];});}catch(_0x23f389){await handleError(_0x23f389,_0x5be8a6(0x251),_0xdf8d40);}},_0x22bf8b=async _0x3e21cd=>{const _0x2eff22=_0x361c8e;while(initCycle==_0x20dfd8){if(!botPaused)try{const _0x471c87=await exchange[_0x2eff22(0x210)](_0x3e21cd);global[_0x2eff22(0x1b3)][noslash(_0x471c87[0x0][_0x2eff22(0x20a)])]=_0x471c87[0x0][_0x2eff22(0x1e3)],await sleep(0x3e8);}catch(_0x544f1a){if(!exchangeStopped)await handleError(_0x544f1a,'watchTrades()',_0x3e21cd);}else await sleep(0x64);}},_0xc1d649=async _0x6342d5=>{const _0x451b19=_0x361c8e;while(initCycle==_0x20dfd8){if(!botPaused){let _0x46adc7;try{await sleep(0x3c*0x3e8);const _0x2dc5a8=await getTickers(_0x6342d5);Object[_0x451b19(0x17a)](_0x2dc5a8)[_0x451b19(0x1df)](_0x5be525=>{const _0x5edaf8=_0x451b19;_0x46adc7=_0x5be525[0x1][_0x5edaf8(0x20a)],global['change'][_0x46adc7]=_0x5be525[0x1]['percentage'];});}catch(_0x1e89bb){if(!exchangeStopped)await handleError(_0x1e89bb,'fetchTickers()',_0x46adc7);}}else await sleep(0x64);}},_0x4e0688=async _0x3920d9=>{const _0x1957ea=_0x361c8e;while(initCycle==_0x20dfd8){if(!botPaused)try{const _0x1ebc6f=await exchange[_0x1957ea(0x117)](_0x3920d9);initCycle==_0x20dfd8&&_0x1ebc6f[_0x1957ea(0x1df)](_0x53fcc3=>{updateNumberCoinsCcxt(_0x53fcc3);});}catch(_0x5ce624){if(!exchangeStopped)await handleError(_0x5ce624,_0x1957ea(0x1ef));}else await sleep(0x64);}};_0x454eff(_0x2692ea),_0xc1d649(_0x2692ea),_0x2692ea[_0x361c8e(0x1df)](_0x1b34fd=>{_0x22bf8b(_0x1b34fd),_0x4e0688(_0x1b34fd);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x735d1a){const _0x22034a=_0x33b6b2;let _0x8eaba6={};try{if(config[_0x22034a(0x228)]!=_0x22034a(0x111))_0x8eaba6=await exchange['fetchTickers'](_0x735d1a);else for(const _0x1870c0 of _0x735d1a){const _0x3d139b=await exchange[_0x22034a(0x1bd)](_0x1870c0);_0x8eaba6[_0x1870c0]=_0x3d139b;}return _0x8eaba6;}catch(_0x1ffba6){throw _0x1ffba6;}}async function watchTransactions(){const _0xfbe1cb=_0x33b6b2;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x414b31=await getCoins(),[_0x1d740f,_0x5506fe]=_0x414b31;let _0x53c7b0=[];currentCoins[_0xfbe1cb(0x1df)](_0x5df295=>{const _0xd1798d=_0xfbe1cb,_0x4227fb=_0x1d740f['find'](_0x361ed3=>_0x361ed3[_0xd1798d(0x1cf)]==_0x5df295[_0xd1798d(0x1cf)]);if(_0x4227fb){if(_0x5df295[_0xd1798d(0x143)]!=_0x4227fb[_0xd1798d(0x143)]){let _0x37e7f0;if(_0x5df295[_0xd1798d(0x1cf)]!=config[_0xd1798d(0x1fe)]){const _0x25e480=global[_0xd1798d(0x1b3)][noslash(_0x5df295[_0xd1798d(0x20a)])];_0x37e7f0=_0x5df295[_0xd1798d(0x1d4)]?0x1/_0x25e480:_0x25e480;}else _0x37e7f0=0x1;_0x53c7b0[_0xd1798d(0x24c)]({'coin':_0x5df295[_0xd1798d(0x1cf)],'symbol':_0x5df295['symbol'],'price':_0x37e7f0,'number':Number(formatResult(_0x4227fb[_0xd1798d(0x143)]-_0x5df295[_0xd1798d(0x143)],0x8)),'basecoinvalue':_0x37e7f0*(_0x4227fb[_0xd1798d(0x143)]-_0x5df295[_0xd1798d(0x143)])});}}});if(_0x53c7b0[_0xfbe1cb(0x1f6)]==0x1&&!blockTransactionDetection){if(config[_0xfbe1cb(0xf4)]){logger[_0xfbe1cb(0x20b)](_0xfbe1cb(0x203)+_0x53c7b0[0x0]['basecoinvalue']+_0xfbe1cb(0x116)+lastFees[_0xfbe1cb(0x1fa)]);if(lastFees[_0xfbe1cb(0x1fa)]==0x0||Math['abs'](_0x53c7b0[0x0][_0xfbe1cb(0x200)])>lastFees[_0xfbe1cb(0x1fa)]){delete _0x53c7b0[0x0][_0xfbe1cb(0x20a)],delete _0x53c7b0[0x0]['basecoinvalue'];let _0x3663b7=[],_0x1a10d8=[...config[_0xfbe1cb(0xea)]]||[],_0x1e8b30=config[_0xfbe1cb(0xea)];_0x1a10d8[_0xfbe1cb(0x175)]((_0x1a565c,_0xb78385)=>_0x1a565c['date']>_0xb78385[_0xfbe1cb(0xdf)]?-0x1:_0xb78385['date']>_0x1a565c[_0xfbe1cb(0xdf)]?0x1:0x0);const _0x4e6fd7=getDate();if(_0x1a10d8[0x0]){const _0xd094d6=fns[_0xfbe1cb(0x18a)](_0x1a10d8[0x0][_0xfbe1cb(0xdf)],_0xfbe1cb(0xe9),new Date()),_0x251850=fns[_0xfbe1cb(0x18a)](_0x4e6fd7,_0xfbe1cb(0xe9),new Date());if(fns[_0xfbe1cb(0x1ff)](_0xd094d6,_0x251850)){_0x3663b7=_0x1a10d8[0x0][_0xfbe1cb(0xee)];const _0x50cb09=_0x3663b7[_0xfbe1cb(0x1ab)](_0x159587=>_0x159587[_0xfbe1cb(0x1cf)]==_0x53c7b0[0x0][_0xfbe1cb(0x1cf)]);_0x50cb09?(_0x50cb09[_0xfbe1cb(0x143)]+=_0x53c7b0[0x0][_0xfbe1cb(0x143)],_0x50cb09['number']==0x0&&(_0x3663b7=_0x3663b7[_0xfbe1cb(0x13d)](_0x376818=>{const _0x2e618d=_0xfbe1cb;return _0x376818['coin']!=_0x53c7b0[0x0][_0x2e618d(0x1cf)];}))):_0x3663b7['push'](_0x53c7b0[0x0]);const _0x38a0c2=_0x1e8b30[_0xfbe1cb(0x1ab)](_0x10e008=>_0x10e008['date']==_0x4e6fd7);_0x38a0c2['changes']=_0x3663b7;}else _0x1e8b30[_0xfbe1cb(0x24c)]({'date':_0x4e6fd7,'changes':[_0x53c7b0[0x0]]});}const _0x396722=_0x1e8b30[_0xfbe1cb(0x1ab)](_0x410aa9=>_0x410aa9[_0xfbe1cb(0xdf)]==_0x4e6fd7);if(_0x396722){let _0x2bd85e=!![];_0x396722[_0xfbe1cb(0xee)][_0xfbe1cb(0x1df)](_0x3bd38a=>{const _0x11c29d=_0xfbe1cb;if(_0x3bd38a[_0x11c29d(0x143)]!=0x0)_0x2bd85e=![];}),_0x2bd85e&&(_0x1e8b30=_0x1e8b30[_0xfbe1cb(0x13d)](_0x29f19a=>{const _0x4a2fbf=_0xfbe1cb;return _0x29f19a[_0x4a2fbf(0xdf)]!=_0x4e6fd7;}));}let _0x44ae45=dbConfig[_0xfbe1cb(0x1bb)](_0xfbe1cb(0xd3))[_0xfbe1cb(0x1ab)]({'botID':botID})[_0xfbe1cb(0x156)]();_0x44ae45&&(dbConfig[_0xfbe1cb(0x1bb)](_0xfbe1cb(0xd3))[_0xfbe1cb(0x1ab)]({'botID':botID})[_0xfbe1cb(0x124)]({'liquidity':_0x1e8b30})[_0xfbe1cb(0xe8)](),config[_0xfbe1cb(0xea)]=_0x1e8b30),logHistory(_0xfbe1cb(0x168),_0xfbe1cb(0xd6)+Math[_0xfbe1cb(0x13f)](_0x53c7b0[0x0]['number'])+'\x20'+_0x53c7b0[0x0]['coin']+'\x20'+(_0x53c7b0[0x0][_0xfbe1cb(0x143)]>0x0?_0xfbe1cb(0x23f):'removed')+_0xfbe1cb(0x1d5)),proxyEmit(_0xfbe1cb(0xf6),emittedConfiguration());}else logger[_0xfbe1cb(0x20b)](_0xfbe1cb(0xe1)+Math[_0xfbe1cb(0x13f)](_0x53c7b0[0x0][_0xfbe1cb(0x143)])+'\x20'+_0x53c7b0[0x0][_0xfbe1cb(0x1cf)]+'\x20'+(_0x53c7b0[0x0][_0xfbe1cb(0x143)]>0x0?_0xfbe1cb(0x23f):_0xfbe1cb(0x245)));transactionDetected=!![];}else logger[_0xfbe1cb(0x20b)](_0xfbe1cb(0xd6)+Math[_0xfbe1cb(0x13f)](_0x53c7b0[0x0][_0xfbe1cb(0x143)])+'\x20'+_0x53c7b0[0x0][_0xfbe1cb(0x1cf)]+'\x20'+(_0x53c7b0[0x0][_0xfbe1cb(0x143)]>0x0?_0xfbe1cb(0x23f):_0xfbe1cb(0x245))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x1d740f,currentCoinsAll=_0x5506fe,await sleep(watchTransactionsInterval);}catch(_0x2f8f06){if(!exchangeStopped)await handleError(_0x2f8f06,_0xfbe1cb(0x230));}else await sleep(0x64);}}async function loadSymbols(){const _0x32fb8b=_0x33b6b2;try{markets=await exchange[_0x32fb8b(0xe0)](),allSymbols=[],Object[_0x32fb8b(0x17a)](markets)[_0x32fb8b(0x1df)](_0x23808b=>{const _0x1d6c86=_0x32fb8b;_0x23808b[0x1]['active']&&_0x23808b[0x1][_0x1d6c86(0x109)]&&allSymbols[_0x1d6c86(0x24c)](_0x23808b[0x0]);});}catch(_0x1cd9e5){throw _0x1cd9e5;}}function validateSymbols(_0x4bb137){const _0x30c2cd=_0x33b6b2;let _0x20b4ce=[];return _0x4bb137[_0x30c2cd(0x1df)](_0x4e59af=>{const _0x59213b=_0x30c2cd;!allSymbols[_0x59213b(0x159)](_0x4e59af)?logHistory('error',_0x59213b(0xda)+_0x4e59af+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x20b4ce['push'](_0x4e59af);}),_0x20b4ce;}async function initclient(){const _0x6155d9=_0x33b6b2;proxyEmit(_0x6155d9(0xf6),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x6155d9(0x16d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x41608f=getNormalizedPerformance();emitPerformance(_0x41608f),getStartingBalances(_0x41608f);}async function toggleBotMode(){const _0xffd861=_0x33b6b2;let _0x29e051=dbConfig[_0xffd861(0x1bb)](_0xffd861(0xd3))['find']({'botID':botID})['value']();if(_0x29e051){const _0x184900=!_0x29e051[_0xffd861(0x198)];dbConfig[_0xffd861(0x1bb)](_0xffd861(0xd3))['find']({'botID':botID})['assign']({'headless':_0x184900})['write'](),config[_0xffd861(0x198)]=_0x184900,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3efcf4=_0x33b6b2;process[_0x3efcf4(0x122)]({'updatebotmanager':!![]},_0x2ad966=>{}),logger['debug']('Headless:\x20'+config[_0x3efcf4(0x198)]);}async function loadCoins(_0x5ca67e){const _0x46e636=_0x33b6b2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3460a1,_0x50c530=0x0,_0x16bc21=0x0;_0x5ca67e[_0x46e636(0x1df)](_0xa0b360=>{const _0x23f8cb=_0x46e636;loading['remainingSymbols'][_0x23f8cb(0x24c)](_0xa0b360);}),loadingCanceled=![];let _0x4f130c=![];while(_0x3460a1!=_0x5ca67e[_0x46e636(0x1f6)]+maxLoadingProgress){_0x3460a1=loadingProgress,_0x5ca67e[_0x46e636(0x1df)](_0x3c2e98=>{const _0x2b60a9=_0x46e636;if(global['ticker'][noslash(_0x3c2e98)]){loading[_0x2b60a9(0xbf)]=loading[_0x2b60a9(0xbf)][_0x2b60a9(0x13d)](_0x15e18d=>_0x15e18d!=_0x3c2e98);if(!watchedSymbols[_0x2b60a9(0x159)](_0x3c2e98))watchedSymbols[_0x2b60a9(0x24c)](_0x3c2e98);_0x3460a1++;}}),loading[_0x46e636(0x183)]=Math[_0x46e636(0x222)](_0x3460a1/(_0x5ca67e[_0x46e636(0x1f6)]+maxLoadingProgress)*0x64);loading[_0x46e636(0x183)]!=0x64&&(_0x16bc21>0x1e*0x5&&(loading[_0x46e636(0xd7)]=!![],emitLoadingProgress()),_0x16bc21>0x78*0x5&&!_0x4f130c&&(_0x4f130c=!![],logHistory('error',_0x46e636(0x119)+loading['remainingSymbols'][_0x46e636(0x173)](',\x20')+_0x46e636(0x1c8)),logHistory(_0x46e636(0x24a),_0x46e636(0x218)+loadCoinsRetryInterval/0xea60+_0x46e636(0x14c)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x4d5b95=_0x46e636;process[_0x4d5b95(0x122)]({'stop':_0x4d5b95(0x227)},_0x479146=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x46e636(0x190)]=!![],emitLoadingProgress();break;}else _0x50c530!=loading[_0x46e636(0x183)]&&(_0x50c530=loading['progress'],emitLoadingProgress()),_0x16bc21++,await sleep(0xc8);}_0x3460a1==_0x5ca67e[_0x46e636(0x1f6)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x46e636(0x18c),'live':_0x46e636(0x100)},_0x3ce7da=>{}),_0x4f130c&&logHistory('success',_0x46e636(0x178)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5bf32b=_0x33b6b2;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x5bf32b(0x18f)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x22c2b9=_0x33b6b2;let _0x4ed564=global[_0x22c2b9(0x1b3)][stablecoins[_0x22c2b9(0x201)]['coin']],_0x1f64c2=global['ticker'][stablecoins[_0x22c2b9(0x10d)][_0x22c2b9(0x1cf)]];return{'eur':Number(_0x4ed564),'usd':Number(_0x1f64c2)};}function capitalize(_0x9c3602){const _0x56f9c7=_0x33b6b2;return _0x9c3602[_0x56f9c7(0x115)](0x0,0x1)['toUpperCase']()+_0x9c3602[_0x56f9c7(0x115)](0x1);}function supportedExchanges(){const _0x341794=_0x33b6b2,_0x3457b5=['ws',_0x341794(0x11e),'fetchTicker',_0x341794(0x210),'watchOrders',_0x341794(0x185),'createOrder',_0x341794(0xe4),'fetchClosedOrders',_0x341794(0x12a)];let _0x1ff9d5=[],_0x5d0c4a=[],_0xb3b482=ccxt['pro'][_0x341794(0x107)];_0xb3b482[_0x341794(0x1df)](_0x9610df=>{try{const _0x3f206b=new ccxt['pro'][_0x9610df]();_0x5d0c4a['push'](_0x3f206b);}catch(_0x34200b){}}),_0x5d0c4a[_0x341794(0x1df)](_0x1c6358=>{const _0x3f6553=_0x341794;let _0x1d918e=0x0;_0x3457b5[_0x3f6553(0x1df)](_0x2947a9=>{_0x2947a9 in _0x1c6358['has']&&_0x1c6358['has'][_0x2947a9]&&_0x1d918e++;}),_0x1d918e==_0x3457b5['length']&&_0x1ff9d5['push'](capitalize(_0x1c6358['id']));});let _0x55e5fc=[];return _0xb3b482[_0x341794(0x1df)](_0x38bf19=>{const _0x5a7bb4=_0x341794;_0x38bf19=capitalize(_0x38bf19);if(!_0x1ff9d5[_0x5a7bb4(0x159)](_0x38bf19))_0x55e5fc[_0x5a7bb4(0x24c)](_0x38bf19);}),_0x1ff9d5;}function setStartDatePerformance(){const _0x161d49=_0x33b6b2;if(config&&config[_0x161d49(0xea)][0x0][_0x161d49(0xee)]['length']!=0x0){const _0x1803ad=config[_0x161d49(0xea)][0x0][_0x161d49(0xee)];dbPerformance[_0x161d49(0x1bb)]('data')['find']({'date':config[_0x161d49(0x11f)]})[_0x161d49(0x124)]({'coins':_0x1803ad})[_0x161d49(0xe8)]();}}async function recreateCoinResults(){const _0xf8ae2a=_0x33b6b2;let _0x2a24cd,_0x36068=[];try{const _0x46b8a6=fns[_0xf8ae2a(0x176)](fns[_0xf8ae2a(0x1e2)](config[_0xf8ae2a(0x11f)][_0xf8ae2a(0x180)](/\//g,'-')),_0xf8ae2a(0x13b));for(const _0x5f3743 of currentCoins){if(_0x5f3743[_0xf8ae2a(0x1cf)]!=config[_0xf8ae2a(0x1fe)]){let _0x3201dc=0x0,_0x3f51f4,_0x279435;_0x2a24cd=await getAllEventOrders(_0x5f3743[_0xf8ae2a(0x20a)]);if(_0x2a24cd[_0xf8ae2a(0x1f6)]>0x0)_0x2a24cd[_0xf8ae2a(0x1df)](_0x2abf94=>{const _0x7bf1dd=_0xf8ae2a,_0x19ad30=_0x5f3743[_0x7bf1dd(0x20a)]['includes'](config[_0x7bf1dd(0x1fe)]+'/');_0x36068['push']({'datetime':_0x2abf94[_0x7bf1dd(0xf8)],'coin':_0x5f3743[_0x7bf1dd(0x1cf)],'symbol':_0x5f3743[_0x7bf1dd(0x20a)],'side':_0x2abf94[_0x7bf1dd(0x204)],'reverse':_0x19ad30,'amount':formatResult(_0x2abf94[_0x7bf1dd(0x250)],0x8),'filled':formatResult(_0x2abf94[_0x7bf1dd(0x250)],0x8),'price':formatResult(_0x2abf94[_0x7bf1dd(0x1e3)],0x8)}),_0x3201dc=_0x2abf94[_0x7bf1dd(0x204)]=='buy'?_0x3201dc+_0x2abf94[_0x7bf1dd(0x250)]:_0x3201dc-_0x2abf94[_0x7bf1dd(0x250)];if(!_0x279435)_0x279435=_0x2abf94[_0x7bf1dd(0x1e3)];});_0x3f51f4=_0x5f3743[_0xf8ae2a(0x143)]-_0x3201dc;let _0x3f1ed6;config[_0xf8ae2a(0xea)][_0xf8ae2a(0x1df)](_0x5739c4=>{const _0x3195be=_0xf8ae2a;!_0x3f1ed6&&(_0x3f1ed6=_0x5739c4['changes'][_0x3195be(0x1ab)](_0x35137b=>_0x35137b[_0x3195be(0x1cf)]==_0x5f3743[_0x3195be(0x1cf)]),_0x3f1ed6&&(_0x3f51f4=_0x3f1ed6['number'],_0x279435=_0x3f1ed6[_0x3195be(0x1e3)]));});let _0x4122c5=dbCoinResults[_0xf8ae2a(0x1bb)](_0xf8ae2a(0x13c))[_0xf8ae2a(0x1ab)]({'coin':_0x5f3743['coin']})[_0xf8ae2a(0x156)]();_0x4122c5={'coin':_0x5f3743[_0xf8ae2a(0x1cf)],'number':_0x3f51f4,'breakeven':_0x279435,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xf8ae2a(0x1bb)]('coins')[_0xf8ae2a(0x1ab)]({'coin':_0x5f3743[_0xf8ae2a(0x1cf)]})[_0xf8ae2a(0x124)](_0x4122c5)[_0xf8ae2a(0xe8)]();}}_0x36068[_0xf8ae2a(0x175)]((_0x3de86f,_0x32dab3)=>_0x3de86f[_0xf8ae2a(0xf8)]>_0x32dab3['datetime']?0x1:_0x32dab3['datetime']>_0x3de86f[_0xf8ae2a(0xf8)]?-0x1:0x0);let _0x40797a=0x0;for(let _0x306c6e of _0x36068){await updateCoinResults(_0x306c6e,!![]);}}catch(_0x337843){await handleError(_0x337843,'recreateCoinResults()');}}async function getAllEventOrders(_0x489615){const _0x2c7d9d=_0x33b6b2;let _0x55e27e=[],_0x42f741=dbLogs[_0x2c7d9d(0x1bb)]('logs')['filter'](_0x393226=>{const _0x5ea03f=_0x2c7d9d,_0x52e225=_0x393226[_0x5ea03f(0x217)]['toLowerCase']();return _0x52e225[_0x5ea03f(0x159)](_0x489615[_0x5ea03f(0x224)]())&&(_0x52e225[_0x5ea03f(0x159)]('market')&&_0x52e225[_0x5ea03f(0x159)](_0x5ea03f(0x110))||_0x52e225[_0x5ea03f(0x159)]('filled')&&_0x52e225[_0x5ea03f(0x159)]('order'));})[_0x2c7d9d(0x1bf)](_0x2c7d9d(0x172))[_0x2c7d9d(0x156)]();return _0x42f741['forEach'](_0x23f9b7=>{const _0x1fe166=_0x2c7d9d,_0x469400=_0x23f9b7[_0x1fe166(0x217)][_0x1fe166(0x159)](_0x1fe166(0x22a))?_0x1fe166(0x22a):'buy',_0x558e88=/#([0-9]|\.)+\s/i,_0x49d422=Number(_0x558e88[_0x1fe166(0x136)](_0x23f9b7['event'])[0x0][_0x1fe166(0x15b)](0x1)),_0x7bc7e9=/@([0-9]|\.)+$/i,_0x42c229=Number(_0x7bc7e9[_0x1fe166(0x136)](_0x23f9b7[_0x1fe166(0x217)])[0x0][_0x1fe166(0x15b)](0x1));_0x55e27e['push']({'datetime':_0x23f9b7[_0x1fe166(0x172)],'coin':symbolToCoin(_0x489615),'symbol':_0x489615,'side':_0x469400,'amount':_0x49d422,'filled':_0x49d422,'price':_0x42c229});}),_0x55e27e;}async function getAllOrders(_0x24af6e,_0x4090bc){const _0x278358=_0x33b6b2;let _0xff9d1e=[];while(_0x4090bc<exchange[_0x278358(0xf0)]()){const _0x2115b0=0x1f4;try{const _0x4e0751=await exchange[_0x278358(0x1e1)](_0x24af6e,_0x4090bc,_0x2115b0);if(_0x4e0751['length'])_0x4090bc=_0x4e0751[_0x4e0751['length']-0x1]['timestamp']+0x1,_0xff9d1e=_0xff9d1e[_0x278358(0x240)](_0x4e0751);else break;}catch(_0x4ef705){await handleError(_0x4ef705,_0x278358(0x147),_0x24af6e);}}return _0xff9d1e;}async function validate24hChanges(){const _0x50b906=_0x33b6b2;for(const _0x5adc78 of currentCoins){if(_0x5adc78['coin']!=config[_0x50b906(0x1fe)]){let _0xb22eda;_0x5adc78['reverse']?_0xb22eda=formatResult((0x1/(global['change'][noslash(_0x5adc78[_0x50b906(0x20a)])]/0x64+0x1)-0x1)*0x64,0x3):_0xb22eda=global[_0x50b906(0x165)][noslash(_0x5adc78[_0x50b906(0x20a)])],_0xb22eda<config[_0x50b906(0x166)]&&(logHistory(_0x50b906(0x24a),_0x5adc78[_0x50b906(0x1cf)]+_0x50b906(0x17d)+_0xb22eda+'%'),logHistory(_0x50b906(0x24a),_0x50b906(0x22f)),logHistory(_0x50b906(0x24a),_0x50b906(0xdb)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x36374e,_0x2b0eed){const _0x462fee=_0x33b6b2;if(!_0x36374e)return!![];const _0x45a96b=_0x2b0eed[_0x462fee(0x24e)]('.'),_0x3018d5=_0x36374e[_0x462fee(0x24e)]('.');for(var _0x51d4d7=0x0;_0x51d4d7<_0x3018d5['length'];_0x51d4d7++){const _0x10164b=~~_0x3018d5[_0x51d4d7],_0x1d7391=~~_0x45a96b[_0x51d4d7];if(_0x10164b<_0x1d7391)return!![];if(_0x10164b>_0x1d7391)return![];}return![];}async function oneTimeMigration(){const _0x590697=_0x33b6b2;let _0x2641f7=dbLogs[_0x590697(0x1bb)](_0x590697(0x184))[_0x590697(0x156)]();if(isOlderVersion(_0x2641f7,'2.3.5')){let _0x540e36=[];const _0x27e3a8=dbLogs[_0x590697(0x1bb)](_0x590697(0x1cc))[_0x590697(0x156)]();_0x27e3a8[_0x590697(0x1df)](_0x12d1a1=>{const _0x508f7b=_0x590697;_0x540e36[_0x508f7b(0x24c)]({'time':_0x12d1a1[_0x508f7b(0x172)],'type':_0x12d1a1[_0x508f7b(0xef)],'event':_0x12d1a1[_0x508f7b(0x217)]});}),dbLogs[_0x590697(0x1bb)]('logs')[_0x590697(0x124)](_0x540e36)[_0x590697(0xe8)]();}let _0x1f7d71=dbConfig[_0x590697(0x1bb)](_0x590697(0x184))[_0x590697(0x156)]();if(isOlderVersion(_0x1f7d71,'2.3.5')){let _0x3d6329=dbConfig[_0x590697(0x1bb)](_0x590697(0xd3))[_0x590697(0x1ab)]({'botID':botID})['value']();if(_0x3d6329){let _0x2655b4=[];_0x3d6329['portfolio'][_0x590697(0x1df)](_0x1d5a95=>{const _0x4543b2=_0x590697;_0x2655b4[_0x4543b2(0x24c)]({'coin':_0x1d5a95[_0x4543b2(0x1cf)],'number':_0x1d5a95['startnumber'],'price':_0x1d5a95[_0x4543b2(0x214)]}),delete _0x1d5a95[_0x4543b2(0x13a)],delete _0x1d5a95[_0x4543b2(0x214)];});if(_0x2655b4[_0x590697(0x1f6)]!==0x0)fs['writeFile'](configbackuppath+(_0x590697(0x1d2)+botID+_0x590697(0x15f)),JSON[_0x590697(0xc2)](_0x2655b4,null,0x4),function(_0x4c6cd6){if(_0x4c6cd6){}});const _0x1e02cb=(_0x5084b3,_0x1f4df3)=>{const _0x4a82a2=_0x590697;let _0x196c13=[];_0x1f4df3[_0x4a82a2(0x1df)](_0x596bd1=>{const _0x51df54=_0x4a82a2,_0x54a612=_0x5084b3[_0x51df54(0x1ab)](_0x10bce3=>_0x10bce3[_0x51df54(0x1cf)]==_0x596bd1[_0x51df54(0x1cf)]);if(!_0x54a612)_0x196c13[_0x51df54(0x24c)](_0x596bd1);});let _0x222fac=[];return _0x5084b3[_0x4a82a2(0x1df)](_0xafd5d1=>{const _0x173370=_0x4a82a2,_0x1d92d1=_0x1f4df3[_0x173370(0x1ab)](_0x198006=>_0x198006[_0x173370(0x1cf)]==_0xafd5d1[_0x173370(0x1cf)]);if(!_0x1d92d1||_0x1d92d1[_0x173370(0x143)]==0x0&&_0xafd5d1[_0x173370(0x143)]!=0x0)_0x222fac['push'](_0xafd5d1);}),{'missingDay1':_0x196c13,'notInDay2':_0x222fac};},_0x403c7f=dbPerformance[_0x590697(0x1bb)]('data')[_0x590697(0x21f)]()[_0x590697(0x156)]();if(_0x403c7f['length']>0x1){const {missingDay1:_0xdf80aa,notInDay2:_0x46c900}=_0x1e02cb(_0x2655b4,_0x403c7f[0x1][_0x590697(0x13c)]);_0x2655b4=[..._0x2655b4,..._0xdf80aa],_0x46c900[_0x590697(0x1df)](_0x5f2f89=>{const _0x34f4ab=_0x590697;let _0x2164ed=_0x2655b4[_0x34f4ab(0x14b)](_0x20920e=>_0x20920e[_0x34f4ab(0x1cf)]==_0x5f2f89['coin']);_0x2164ed!=-0x1&&_0x2655b4[_0x34f4ab(0xe3)](_0x2164ed,0x1);});}_0x2655b4[_0x590697(0x175)]((_0x4c1188,_0x54a552)=>_0x4c1188[_0x590697(0x1cf)]>_0x54a552[_0x590697(0x1cf)]?0x1:_0x54a552[_0x590697(0x1cf)]>_0x4c1188[_0x590697(0x1cf)]?-0x1:0x0);let _0x3c4a94=[{'date':_0x3d6329['startdate'],'changes':_0x2655b4}];_0x403c7f[_0x590697(0x1f6)]>0x2&&_0x403c7f[_0x590697(0x1df)]((_0x366631,_0x21e4e1)=>{const _0x7e3164=_0x590697;if(_0x21e4e1>0x0&&_0x21e4e1<_0x403c7f[_0x7e3164(0x1f6)]-0x1){const {missingDay1:_0x2a1ff0,notInDay2:_0x447e35}=_0x1e02cb(_0x403c7f[_0x21e4e1]['coins'],_0x403c7f[_0x21e4e1+0x1]['coins']);_0x2655b4=[],(_0x2a1ff0['length']!=0x0||_0x447e35[_0x7e3164(0x1f6)]!=0x0)&&(_0x2a1ff0['length']!=0x0&&_0x2655b4[_0x7e3164(0x24c)](..._0x2a1ff0),_0x447e35['length']!=0x0&&(_0x447e35[_0x7e3164(0x1df)](_0x57ca07=>{const _0x41f5b9=_0x7e3164;_0x57ca07['number']=-_0x57ca07[_0x41f5b9(0x143)];}),_0x2655b4['push'](..._0x447e35)),_0x2655b4['sort']((_0x3847ff,_0x3cca0d)=>_0x3847ff[_0x7e3164(0x1cf)]>_0x3cca0d[_0x7e3164(0x1cf)]?0x1:_0x3cca0d[_0x7e3164(0x1cf)]>_0x3847ff[_0x7e3164(0x1cf)]?-0x1:0x0),_0x3c4a94[_0x7e3164(0x24c)]({'date':_0x403c7f[_0x21e4e1+0x1][_0x7e3164(0xdf)],'changes':_0x2655b4}));}}),dbConfig['get'](_0x590697(0xd3))['find']({'botID':botID})[_0x590697(0x124)]({..._0x3d6329,'liquidity':_0x3c4a94})[_0x590697(0xe8)]();}}if(isOlderVersion(_0x1f7d71,_0x590697(0x1e6))){let _0xa4e0fd=dbConfig[_0x590697(0x1bb)]('bot')[_0x590697(0x1ab)]({'botID':botID})[_0x590697(0x156)]();if(_0xa4e0fd){const _0x3c8a18=_0xa4e0fd[_0x590697(0x228)],_0x3df326=_0x3c8a18?capitalize(_0x3c8a18):_0x590697(0x193);dbConfig[_0x590697(0x1bb)]('bot')[_0x590697(0x1ab)]({'botID':botID})[_0x590697(0x124)]({'exchange':_0x3df326})[_0x590697(0xe8)]();}}let _0x345094=dbPerformance[_0x590697(0x1bb)](_0x590697(0x184))[_0x590697(0x156)]();isOlderVersion(_0x345094,'2.3.5')&&setStartDatePerformance();let _0x2aeaa5=dbCoinResults[_0x590697(0x1bb)]('version')[_0x590697(0x156)]();if(isOlderVersion(_0x2aeaa5,'2.5.0')){let _0xa4b48d=dbCoinResults[_0x590697(0x1bb)]('coins')[_0x590697(0x156)]();if(_0xa4b48d[_0x590697(0x1f6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x45af46=_0x33b6b2;dbConfig[_0x45af46(0x17e)](_0x45af46(0x184),serverversion)['write'](),dbPerformance[_0x45af46(0x17e)](_0x45af46(0x184),serverversion)[_0x45af46(0xe8)](),dbLogs['set']('version',serverversion)['write'](),dbCoinResults['set']('version',serverversion)[_0x45af46(0xe8)]();}function getConfiguration(_0x54f4eb){const _0x247d3c=_0x33b6b2;let _0x97c4ec=dbConfig[_0x247d3c(0x1bb)]('bot')[_0x247d3c(0x1ab)]({'botID':_0x54f4eb})[_0x247d3c(0x156)]();if(_0x97c4ec){let _0x325642=![];typeof _0x97c4ec[_0x247d3c(0xcb)]==_0x247d3c(0x1f5)&&(_0x97c4ec={..._0x97c4ec,'threshold':Number(_0x97c4ec['threshold'])},_0x325642=!![]),_0x97c4ec[_0x247d3c(0x166)]==undefined&&(_0x97c4ec={..._0x97c4ec,'change24h':-0x14},_0x325642=!![]),_0x97c4ec[_0x247d3c(0x132)]==undefined&&(_0x97c4ec={..._0x97c4ec,'fiat':_0x247d3c(0x20d)},_0x325642=!![]),_0x97c4ec[_0x247d3c(0x1b0)]==undefined&&(_0x97c4ec={..._0x97c4ec,'onepagemode':settings['onepagemode']},_0x325642=!![]),_0x97c4ec[_0x247d3c(0xc5)]==undefined&&(_0x97c4ec={..._0x97c4ec,'colorscheme':_0x247d3c(0x21e)},_0x325642=!![]),_0x97c4ec[_0x247d3c(0xf4)]==undefined&&(_0x97c4ec={..._0x97c4ec,'autoliquidity':!![]},_0x325642=!![]),_0x325642&&(_0x97c4ec={'botID':_0x97c4ec['botID'],'exchange':_0x97c4ec[_0x247d3c(0x228)],'apiKey':_0x97c4ec['apiKey'],'apiSecret':_0x97c4ec[_0x247d3c(0xf1)],'apiPassword':_0x97c4ec[_0x247d3c(0x16c)],'basecoin':_0x97c4ec[_0x247d3c(0x1fe)],'botname':_0x97c4ec[_0x247d3c(0x16f)],'showname':_0x97c4ec[_0x247d3c(0xfc)],'threshold':_0x97c4ec[_0x247d3c(0xcb)],'ordertype':_0x97c4ec[_0x247d3c(0xd1)],'timeout':_0x97c4ec[_0x247d3c(0xd7)],'fiat':_0x97c4ec[_0x247d3c(0x132)],'startdate':_0x97c4ec[_0x247d3c(0x11f)],'recreate':_0x97c4ec[_0x247d3c(0xba)],'timeshift':_0x97c4ec['timeshift'],'onepagemode':_0x97c4ec[_0x247d3c(0x1b0)],'headless':_0x97c4ec[_0x247d3c(0x198)],'cooldown':_0x97c4ec['cooldown'],'change24h':_0x97c4ec[_0x247d3c(0x166)],'emojibuy':_0x97c4ec[_0x247d3c(0x153)],'emojisell':_0x97c4ec['emojisell'],'colorscheme':_0x97c4ec[_0x247d3c(0xc5)],'portfolio':_0x97c4ec[_0x247d3c(0x1f8)],'autoliquidity':_0x97c4ec[_0x247d3c(0xf4)],'liquidity':_0x97c4ec[_0x247d3c(0xea)],'openOrders':_0x97c4ec[_0x247d3c(0xf9)]},dbConfig['get'](_0x247d3c(0xd3))[_0x247d3c(0x249)]()[_0x247d3c(0xe8)](),dbConfig[_0x247d3c(0x1bb)](_0x247d3c(0xd3))[_0x247d3c(0x24c)](_0x97c4ec)[_0x247d3c(0xe8)]());}else _0x97c4ec={'botID':_0x54f4eb,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x247d3c(0x1e8)+_0x54f4eb,'showname':![],'threshold':0x3,'ordertype':_0x247d3c(0x233),'timeout':0x14,'fiat':_0x247d3c(0x20d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x247d3c(0x18e)],'onepagemode':settings[_0x247d3c(0x1b0)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x247d3c(0x21e),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x97c4ec;}function emittedConfiguration(){const _0x2ab78e=_0x33b6b2;let _0x11dc34;if(config[_0x2ab78e(0x234)]=='')_0x11dc34={...config,'configstate':_0x2ab78e(0x1a4)};else config[_0x2ab78e(0x234)]==_0x2ab78e(0x1be)?_0x11dc34={...config,'configstate':_0x2ab78e(0xcf)}:(_0x11dc34={...config,'apiKey':'************','apiSecret':_0x2ab78e(0xeb)},config[_0x2ab78e(0x16c)]&&(_0x11dc34[_0x2ab78e(0x16c)]=_0x2ab78e(0xeb)));return _0x11dc34;}function getSettings(){const _0x3c7c0f=_0x33b6b2;return dbSettings[_0x3c7c0f(0x1bb)](_0x3c7c0f(0x1c1))[_0x3c7c0f(0x156)]();}function getSecure(){const _0x5bcdf8=_0x33b6b2;return dbSecure[_0x5bcdf8(0x1bb)](_0x5bcdf8(0xfb))[_0x5bcdf8(0x156)]()||{};}function updateTimeshift(_0x90208c){const _0x4b28e9=_0x33b6b2;let _0x163443=dbConfig[_0x4b28e9(0x1bb)](_0x4b28e9(0xd3))[_0x4b28e9(0x1ab)]({'botID':botID})[_0x4b28e9(0x156)]();_0x163443&&dbConfig[_0x4b28e9(0x1bb)](_0x4b28e9(0xd3))[_0x4b28e9(0x1ab)]({'botID':botID})['assign']({'timeshift':_0x90208c})['write'](),config[_0x4b28e9(0x18e)]=_0x90208c,proxyEmit(_0x4b28e9(0xf6),emittedConfiguration());}function updateOnepagemode(_0x3114eb){const _0xcf9fbf=_0x33b6b2;let _0x2b83dd=dbConfig[_0xcf9fbf(0x1bb)]('bot')[_0xcf9fbf(0x1ab)]({'botID':botID})[_0xcf9fbf(0x156)]();_0x2b83dd&&dbConfig['get'](_0xcf9fbf(0xd3))[_0xcf9fbf(0x1ab)]({'botID':botID})[_0xcf9fbf(0x124)]({'onepagemode':_0x3114eb})[_0xcf9fbf(0xe8)](),config[_0xcf9fbf(0x1b0)]=_0x3114eb,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x29fcbb){const _0x16eba0=_0x33b6b2;logger['debug'](_0x16eba0(0x120));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x16eba0(0x20b)]('Transaction\x20detection\x20blocked');let _0x902023=![],_0x1754d1=![],_0x207f50=[];_0x29fcbb[_0x16eba0(0x1f8)][_0x16eba0(0x1df)](_0x42f78b=>{const _0x434064=_0x16eba0;if(!_0x42f78b['excluded']&&_0x42f78b[_0x434064(0x1cf)]!=_0x29fcbb['basecoin'])_0x207f50['push'](_0x42f78b[_0x434064(0x20a)]);}),_0x207f50[_0x16eba0(0x1df)](_0x4b4f4e=>{const _0x535d58=currentCoins['find'](_0x2345e0=>_0x2345e0['symbol']==_0x4b4f4e);!_0x535d58&&(_0x902023=!![]);}),currentCoins['forEach'](_0x1100b5=>{const _0x3f0b5d=_0x16eba0;if(_0x1100b5['coin']!=config[_0x3f0b5d(0x1fe)]){const _0x48e0b3=_0x207f50['find'](_0x57a84e=>_0x57a84e==_0x1100b5[_0x3f0b5d(0x20a)]);!_0x48e0b3&&(_0x902023=!![]);}}),_0x29fcbb[_0x16eba0(0x1f8)][_0x16eba0(0x1df)](_0x360848=>{const _0x4d9a89=_0x16eba0,_0x3d70be=config[_0x4d9a89(0x1f8)]['find'](_0x4b03ab=>_0x4b03ab[_0x4d9a89(0x1cf)]==_0x360848[_0x4d9a89(0x1cf)]);if(_0x3d70be&&_0x360848[_0x4d9a89(0x1d3)]!=_0x3d70be[_0x4d9a89(0x1d3)])_0x1754d1=!![];});let _0x57370a=dbConfig[_0x16eba0(0x1bb)](_0x16eba0(0xd3))['find']({'botID':botID})[_0x16eba0(0x156)]();_0x29fcbb={..._0x29fcbb,'apiKey':crypt['decrypt'](secure['privateKey'],_0x29fcbb['apiKey'])['message'],'apiSecret':crypt['decrypt'](secure[_0x16eba0(0x1e0)],_0x29fcbb[_0x16eba0(0xf1)])[_0x16eba0(0x238)]};_0x29fcbb[_0x16eba0(0x16c)]&&(_0x29fcbb[_0x16eba0(0x16c)]=crypt[_0x16eba0(0x113)](secure[_0x16eba0(0x1e0)],_0x29fcbb[_0x16eba0(0x16c)])[_0x16eba0(0x238)]);let _0x1ecd06=![];if(_0x57370a){_0x29fcbb[_0x16eba0(0x234)]==_0x16eba0(0xeb)?_0x29fcbb[_0x16eba0(0x234)]=config['apiKey']:_0x1ecd06=!![];_0x29fcbb[_0x16eba0(0xf1)]=='************'?_0x29fcbb[_0x16eba0(0xf1)]=config['apiSecret']:_0x1ecd06=!![];if(_0x29fcbb[_0x16eba0(0x16c)]==_0x16eba0(0xeb))_0x29fcbb[_0x16eba0(0x16c)]=config[_0x16eba0(0x16c)];else{if(_0x29fcbb[_0x16eba0(0x16c)])_0x1ecd06=!![];}dbConfig[_0x16eba0(0x1bb)](_0x16eba0(0xd3))[_0x16eba0(0x1ab)]({'botID':botID})[_0x16eba0(0x124)](_0x29fcbb)['write']();}else dbConfig['get']('bot')[_0x16eba0(0x24c)](_0x29fcbb)[_0x16eba0(0xe8)](),_0x1ecd06=!![],process[_0x16eba0(0x122)]({'status':'enabled','live':'running'},_0x49f8cd=>{});process[_0x16eba0(0x122)]({'botname':_0x29fcbb['botname']},_0x5e603a=>{}),config={..._0x29fcbb},updateBotManager(),proxyEmit(_0x16eba0(0x1f2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1ecd06)await reset(!![]);else _0x902023||_0x1754d1?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x16eba0(0x20b)](_0x16eba0(0x1a1));}async function storeHeadless(_0x4321cd){const _0x425781=_0x33b6b2,_0x7f94c5={...config,'headless':_0x4321cd[_0x425781(0x198)]};let _0x4d1a0a=dbConfig[_0x425781(0x1bb)](_0x425781(0xd3))[_0x425781(0x1ab)]({'botID':botID})[_0x425781(0x156)]();_0x4d1a0a&&dbConfig['get']('bot')[_0x425781(0x1ab)]({'botID':botID})[_0x425781(0x124)](_0x7f94c5)[_0x425781(0xe8)](),config={..._0x7f94c5},updateBotManager(),proxyEmit(_0x425781(0xf6),emittedConfiguration());}async function storeFiat(_0x1494e3){const _0x56212d=_0x33b6b2,_0x37b748={...config,'fiat':_0x1494e3};let _0x2a0843=dbConfig['get']('bot')['find']({'botID':botID})[_0x56212d(0x156)]();_0x2a0843&&dbConfig['get']('bot')[_0x56212d(0x1ab)]({'botID':botID})['assign'](_0x37b748)['write'](),config={..._0x37b748},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x13977b=_0x33b6b2;logger[_0x13977b(0x1c3)](_0x13977b(0xfd));try{if(fs['existsSync'](path['join'](configpath,_0x13977b(0x118)+botID+_0x13977b(0x243))))fs[_0x13977b(0x22b)](path[_0x13977b(0x173)](configpath,_0x13977b(0x118)+botID+_0x13977b(0x243)));if(fs[_0x13977b(0x1fb)](path[_0x13977b(0x173)](configpath,_0x13977b(0x118)+botID+'-performance.json')))fs[_0x13977b(0x22b)](path['join'](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x13977b(0x1fb)](path['join'](configpath,_0x13977b(0x118)+botID+_0x13977b(0x253))))fs[_0x13977b(0x22b)](path[_0x13977b(0x173)](configpath,_0x13977b(0x118)+botID+'-results.json'));}catch(_0x3e236f){if(_0x3e236f)logger[_0x13977b(0x1c3)]('Error\x20while\x20deleting\x20files:\x20',_0x3e236f);}const _0x4b1736=getDate();let _0x2ca2fa=[];currentCoins[_0x13977b(0x1df)](_0x12df3f=>{const _0x5c7f15=_0x13977b;_0x2ca2fa[_0x5c7f15(0x24c)]({'coin':_0x12df3f[_0x5c7f15(0x1cf)],'number':_0x12df3f[_0x5c7f15(0x143)],'price':_0x12df3f['last']});});let _0x46c091=dbConfig[_0x13977b(0x1bb)](_0x13977b(0xd3))[_0x13977b(0x1ab)]({'botID':botID})[_0x13977b(0x156)]();_0x46c091&&(dbConfig['get']('bot')[_0x13977b(0x1ab)]({'botID':botID})[_0x13977b(0x124)]({'liquidity':[{'date':_0x4b1736,'changes':_0x2ca2fa}]})[_0x13977b(0xe8)](),config[_0x13977b(0xea)]=[]),process[_0x13977b(0x122)]({'stop':'restart'},_0x439a6f=>{});}function noslash(_0x4ac13c){const _0x1898e8=_0x33b6b2;return _0x4ac13c[_0x1898e8(0x180)]('/','');}function updateHighestFee(_0x50ee10){const _0x51107e=_0x33b6b2;if(_0x50ee10[_0x51107e(0x1d4)]){let _0x3bd58b={'filled':_0x50ee10[_0x51107e(0x250)]*_0x50ee10[_0x51107e(0x1e3)],'amount':_0x50ee10[_0x51107e(0x250)]*_0x50ee10[_0x51107e(0x1e3)],'side':_0x50ee10['side']=='sell'?'buy':'sell','price':0x1/_0x50ee10['price']};_0x50ee10={..._0x50ee10,..._0x3bd58b};}const _0x3cd1ce=defaultFee*_0x50ee10[_0x51107e(0x250)]*_0x50ee10[_0x51107e(0x1e3)];lastFees['recent20'][_0x51107e(0x1f6)]===0x14&&lastFees['recent20'][_0x51107e(0xcc)](),lastFees[_0x51107e(0x126)]['push'](_0x3cd1ce),lastFees[_0x51107e(0x1fa)]=Math[_0x51107e(0xc3)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x456a99){const _0x33aee7=_0x33b6b2;logger[_0x33aee7(0x20b)]('0\x20-\x20EXECUTION:\x20'+_0x456a99[_0x33aee7(0x20a)]+_0x33aee7(0x16e)+_0x456a99[_0x33aee7(0x181)]+_0x33aee7(0x16e)+_0x456a99['filled']+_0x33aee7(0xe7)+_0x456a99[_0x33aee7(0xcd)]+_0x33aee7(0x16e)+_0x456a99['id']);let _0x19f8df=_0x456a99[_0x33aee7(0x181)],_0x2e46d7=![];currentCoins[_0x33aee7(0x1df)](_0x99f451=>{const _0x44424c=_0x33aee7;_0x99f451['symbol']==_0x456a99[_0x44424c(0x20a)]&&(_0x2e46d7=!![]);});if(!_0x2e46d7)return;const _0x46dd13=currentCoins[_0x33aee7(0x1ab)](_0x555520=>_0x555520['symbol']==_0x456a99[_0x33aee7(0x20a)]),_0x4fb114=_0x26f8b1=>{const _0x31aacb=_0x33aee7;if(_0x46dd13)_0x46dd13[_0x31aacb(0x23b)]=_0x26f8b1;};if(_0x19f8df==_0x33aee7(0x1a9))_0x4fb114('open');else{if(_0x19f8df==_0x33aee7(0x121)){_0x4fb114(_0x33aee7(0x121));const _0x5eff45=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5eff45,await getOpenOrders(),handleOpenOrders();}else{if(_0x19f8df==_0x33aee7(0x20e)){let _0x409713=![];if(lastOrders)for(const _0x2ecf3e of lastOrders){const _0x36a242=0xc8,_0x15ab20=0x1388;let _0x195704=0x0;while(!_0x2ecf3e[_0x33aee7(0xe5)]&&_0x195704*_0x36a242<_0x15ab20){_0x195704++,await sleep(_0x36a242);}if(_0x195704>0x0)logger[_0x33aee7(0x20b)](_0x33aee7(0x1eb)+_0x195704*_0x36a242/0x3e8+_0x33aee7(0x1b8));if(_0x2ecf3e[_0x33aee7(0xe5)]==_0x456a99['id']){logger[_0x33aee7(0x20b)](_0x33aee7(0x161)+_0x456a99['id']),_0x409713=!![];if(_0x2ecf3e[_0x33aee7(0x250)]==0x0){logger['debug'](_0x33aee7(0xdc)+_0x456a99['id']);if(_0x456a99[_0x33aee7(0x1d1)])_0x2ecf3e[_0x33aee7(0x1e3)]=_0x456a99[_0x33aee7(0x1d1)];else{if(_0x456a99[_0x33aee7(0x1e3)])_0x2ecf3e[_0x33aee7(0x1e3)]=_0x456a99[_0x33aee7(0x1e3)];else{}}_0x2ecf3e['filled']=_0x456a99[_0x33aee7(0x250)],updateHighestFee(_0x2ecf3e),_0x4fb114(_0x33aee7(0x250)),await validateOrders();if(lockOrders==ORDERS[_0x33aee7(0x1ac)]){const _0x27bebc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x27bebc;}_0x2ecf3e[_0x33aee7(0x154)]={'currency':_0x456a99[_0x33aee7(0x154)]?_0x456a99['fee'][_0x33aee7(0x220)]:null,'cost':_0x456a99[_0x33aee7(0x154)]?_0x456a99[_0x33aee7(0x154)][_0x33aee7(0x1a2)]:0x0},await updateCoinResults(_0x2ecf3e);}}}if(!_0x409713){logger[_0x33aee7(0x20b)](_0x33aee7(0x1a7)+_0x456a99['id']),_0x4fb114(_0x33aee7(0x250));const _0x2cfac3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2cfac3,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x8a62fa=JSON['parse'](lastBalances[_0x33aee7(0x1f8)]);const _0xedc15=_0x8a62fa[_0x33aee7(0x1ab)](_0xfb848d=>_0xfb848d[_0x33aee7(0x20a)]==_0x456a99[_0x33aee7(0x20a)]);if(_0xedc15){if(_0x19f8df==_0x33aee7(0x1a9))_0xedc15[_0x33aee7(0x23b)]=_0xedc15[_0x33aee7(0x23b)]==_0x33aee7(0x250)?_0x33aee7(0x250):_0x33aee7(0x1a9);else{if(_0x19f8df==_0x33aee7(0x121))_0xedc15[_0x33aee7(0x23b)]=_0xedc15[_0x33aee7(0x23b)]==_0x33aee7(0x250)?_0x33aee7(0x250):_0x33aee7(0x121);else _0x19f8df==_0x33aee7(0x20e)&&(_0xedc15['orderstatus']=_0x33aee7(0x250));}}lastBalances={...lastBalances,'portfolio':JSON[_0x33aee7(0xc2)](_0x8a62fa)},proxyEmit(_0x33aee7(0x16d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x42fe36=_0x33b6b2;await getOpenOrders();let _0x5cf4c3=![];currentCoins[_0x42fe36(0x1df)](_0x1c3072=>{const _0x599441=_0x42fe36;_0x5cf4c3=allOpenOrders[_0x599441(0x1ab)](_0x23738b=>_0x23738b[_0x599441(0x20a)]==_0x1c3072[_0x599441(0x20a)]),_0x1c3072['orderstatus']=_0x5cf4c3?_0x599441(0x1a9):_0x599441(0x21d);});}async function getCoins(_0x48f689=0x0,_0xb97b1d=!![],_0x2e9917=config[_0x33b6b2(0x1fe)]){const _0x5a32ac=_0x33b6b2;let _0xa22578,_0x3d6014=[],_0x4145b5=[],_0x387989=[];if(_0x48f689)await sleep(_0x48f689);if(botPaused)return[currentCoins,currentCoinsAll];try{_0xa22578=await exchange[_0x5a32ac(0x12a)](),mybalances=_0xa22578['total'];for(const [_0x5685db,_0x1ff44d]of Object[_0x5a32ac(0x17a)](mybalances)){_0x387989[_0x5a32ac(0x24c)](_0x5685db);}config[_0x5a32ac(0x1f8)]['forEach'](_0x478650=>{const _0x5f03c9=_0x5a32ac;!_0x387989[_0x5f03c9(0x159)](_0x478650[_0x5f03c9(0x1cf)])&&(mybalances[_0x478650[_0x5f03c9(0x1cf)]]=0x0);});if(_0x2e9917=='')for(const [_0x49a4bd,_0x8835c7]of Object['entries'](mybalances)){_0x8835c7!=0x0&&_0x3d6014['push']({'coin':_0x49a4bd});}else{let _0x3729cb=![];for(const [_0x4a6dd6,_0x4336f0]of Object[_0x5a32ac(0x17a)](mybalances)){const _0x420fa2=config['portfolio'][_0x5a32ac(0x1ab)](_0xca3ba1=>_0xca3ba1['coin']==_0x4a6dd6),_0x4104a7=_0x4a6dd6+'/'+_0x2e9917,_0x30c923=_0x2e9917+'/'+_0x4a6dd6,_0xb42fbc=currentCoins[_0x5a32ac(0x1ab)](_0x1ca4f8=>_0x1ca4f8[_0x5a32ac(0x1cf)]==_0x4a6dd6);_0x3729cb=![];if((_0x4336f0!=0x0||_0x420fa2)&&(allSymbols[_0x5a32ac(0x159)](_0x4104a7)||_0x4a6dd6==_0x2e9917))_0x3d6014[_0x5a32ac(0x24c)]({'coin':_0x4a6dd6,'symbol':_0x4104a7,'reverse':![],'number':Math[_0x5a32ac(0xc3)](_0x4336f0+(_0x420fa2&&_0x420fa2[_0x5a32ac(0x1d3)]||0x0),0x0),'orderstatus':_0xb42fbc?_0xb42fbc[_0x5a32ac(0x23b)]:_0x5a32ac(0x21d)});else{if((_0x4336f0!=0x0||_0x420fa2)&&allSymbols['includes'](_0x30c923))_0x3d6014[_0x5a32ac(0x24c)]({'coin':_0x4a6dd6,'symbol':_0x30c923,'reverse':!![],'number':Math[_0x5a32ac(0xc3)](_0x4336f0+(_0x420fa2&&_0x420fa2[_0x5a32ac(0x1d3)]||0x0),0x0),'orderstatus':_0xb42fbc?_0xb42fbc[_0x5a32ac(0x23b)]:_0x5a32ac(0x21d)});else _0x420fa2&&_0x3d6014[_0x5a32ac(0x24c)]({'coin':_0x420fa2[_0x5a32ac(0x1cf)],'symbol':_0x420fa2[_0x5a32ac(0x20a)],'reverse':_0x420fa2[_0x5a32ac(0x1d4)],'number':0x0,'orderstatus':_0x5a32ac(0x21d)});}}}}catch(_0xfc934a){if(!_0xb97b1d)handleErrorNoStop(_0xfc934a,_0x5a32ac(0x14e));else await handleError(_0xfc934a,_0x5a32ac(0x14e));}return _0x4145b5=cloneDeep(_0x3d6014),_0x3d6014=_0x3d6014[_0x5a32ac(0x13d)](_0x8149f5=>{const _0x395630=_0x5a32ac,_0x14ffec=config[_0x395630(0x1f8)][_0x395630(0x1ab)](_0x5b6124=>_0x5b6124[_0x395630(0x1cf)]==_0x8149f5['coin']);return _0x14ffec&&!_0x14ffec[_0x395630(0x12f)];}),[_0x3d6014,_0x4145b5];}async function getCoinNumber(_0x2cfa61){const _0x3265c5=_0x33b6b2;let _0x15b5fb;try{const _0x593b44=await exchange['fetchBalance']();_0x15b5fb=_0x593b44[_0x3265c5(0xf2)][_0x2cfa61];}catch(_0xf5c121){await handleError(_0xf5c121,_0x3265c5(0x1f3));}return _0x15b5fb;}async function getOpenOrders(){const _0x13af2b=_0x33b6b2;let _0x5283d9;allOpenOrders=[];try{for(const _0x5edec7 of config[_0x13af2b(0x1f8)]){!_0x5edec7[_0x13af2b(0x12f)]&&_0x5edec7[_0x13af2b(0x1cf)]!=config['basecoin']&&(_0x5283d9=await exchange[_0x13af2b(0xe4)](_0x5edec7[_0x13af2b(0x20a)]),_0x5283d9['length']>0x0&&allOpenOrders['push'](_0x5283d9[0x0]));}}catch(_0xf7bab9){await handleError(_0xf7bab9,_0x13af2b(0xff));}}async function handleOpenOrders(_0x404e92=0x0){const _0x150228=_0x33b6b2;allOpenOrders[_0x150228(0x1f6)]==0x0&&lockOrders==ORDERS[_0x150228(0x1ac)]&&allOrdersPlaced&&(_0x404e92==0x0?(logger[_0x150228(0x20b)]('1\x20-\x20Handle\x20open\x20orders'),_0x404e92++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x150228(0x247))));}async function testAPI(_0x371f48){const _0x53f313=_0x33b6b2,_0x5c8674=ccxt[_0x53f313(0x123)][_0x371f48['exchange'][_0x53f313(0x224)]()],_0x1f1408=new _0x5c8674({'apiKey':_0x371f48[_0x53f313(0x234)],'secret':_0x371f48[_0x53f313(0xf1)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x53f313(0x109)}});if(_0x371f48[_0x53f313(0x16c)])_0x1f1408[_0x53f313(0x17f)]=_0x371f48[_0x53f313(0x16c)];try{await _0x1f1408['loadMarkets']();}catch(_0x16f84e){throw _0x16f84e;}}function cloneDeep(_0x3a4f62){const _0x4e05b6=_0x33b6b2;return JSON[_0x4e05b6(0x18a)](JSON[_0x4e05b6(0xc2)](_0x3a4f62));}async function getPortfolio(_0x15cac2){const _0x295e12=_0x33b6b2;let _0x39ac29=[],_0x2dd60c=[],_0x5974df=[],_0x19e3f7;if(_0x15cac2[_0x295e12(0x234)]!==_0x295e12(0xeb)||_0x15cac2['apiSecret']!==_0x295e12(0xeb)||_0x15cac2[_0x295e12(0x16c)]&&_0x15cac2[_0x295e12(0x16c)]!==_0x295e12(0xeb)){if(config[_0x295e12(0x228)]){if(_0x15cac2[_0x295e12(0x234)]=='************')_0x15cac2[_0x295e12(0x234)]=config[_0x295e12(0x234)];if(_0x15cac2[_0x295e12(0xf1)]==_0x295e12(0xeb))_0x15cac2['apiSecret']=config[_0x295e12(0xf1)];if(_0x15cac2[_0x295e12(0x16c)]=='************')_0x15cac2[_0x295e12(0x16c)]=config[_0x295e12(0x16c)];try{await testAPI(_0x15cac2);}catch(_0x27c00f){if(_0x27c00f[_0x295e12(0x244)]()[_0x295e12(0x159)](_0x295e12(0x196))){logger[_0x295e12(0x20b)](_0x295e12(0xc4)),proxyEmit('portfolio',![]);return;}else{handleError(_0x27c00f,_0x295e12(0x171));return;}}}await initExchange(_0x15cac2[_0x295e12(0x228)],_0x15cac2[_0x295e12(0x234)],_0x15cac2[_0x295e12(0xf1)],_0x15cac2[_0x295e12(0x16c)]);try{await loadSymbols();}catch(_0x536b6f){if(_0x536b6f[_0x295e12(0x244)]()['includes'](_0x295e12(0x196))){proxyEmit(_0x295e12(0x1f8),![]);return;}else{handleError(_0x536b6f,_0x295e12(0x24d));return;}}const _0x5cd3b3=await getCoins(0x0,![],_0x15cac2[_0x295e12(0x1fe)]);_0x5974df=cloneDeep(_0x5cd3b3[0x1]);}else{const _0x52b5e1=await getCoins();_0x5974df=cloneDeep(_0x52b5e1[0x1]);}if(_0x15cac2[_0x295e12(0x1fe)]=='')proxyEmit(_0x295e12(0x1f8),_0x5974df);else{_0x5974df[_0x295e12(0x1df)](_0x25a824=>{const _0x4e47fb=_0x295e12;if(_0x25a824[_0x4e47fb(0x1cf)]!=_0x15cac2[_0x4e47fb(0x1fe)]&&allSymbols['includes'](_0x25a824[_0x4e47fb(0x20a)]))_0x39ac29[_0x4e47fb(0x24c)](_0x25a824[_0x4e47fb(0x20a)]);});if(_0x39ac29[_0x295e12(0x1f6)]==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x2dd60c=await getTickers(_0x39ac29);}catch(_0x1c71be){if(_0x1c71be[_0x295e12(0x244)]()['includes'](_0x295e12(0x196))){proxyEmit('portfolio',![]);return;}else handleError(_0x1c71be,_0x295e12(0x150));}_0x5974df[_0x295e12(0x1df)](_0x488564=>{const _0x7cb9b8=_0x295e12;_0x488564['coin']!=_0x15cac2[_0x7cb9b8(0x1fe)]?_0x2dd60c[_0x488564[_0x7cb9b8(0x20a)]]?_0x19e3f7=_0x488564[_0x7cb9b8(0x1d4)]?0x1/_0x2dd60c[_0x488564[_0x7cb9b8(0x20a)]][_0x7cb9b8(0x177)]:_0x2dd60c[_0x488564[_0x7cb9b8(0x20a)]][_0x7cb9b8(0x177)]:_0x19e3f7=0x0:_0x19e3f7=0x1,_0x488564[_0x7cb9b8(0x1e3)]=formatResult(_0x19e3f7,0x8);}),proxyEmit(_0x295e12(0x1f8),_0x5974df);}}}function truncateTradeAmount(_0x4f1cd2,_0x3f2947){const _0x33669e=_0x33b6b2;let _0x4a6fab=0x0;try{_0x4a6fab=exchange[_0x33669e(0x212)](_0x4f1cd2,_0x3f2947);}catch(_0x4a714d){}return _0x4a6fab;}function checkMinimums(_0x49b68c){const _0x9f3090=_0x33b6b2;let _0x3f0a29=!![];const _0x5dfe42=!_0x49b68c[_0x9f3090(0x1d4)]?markets[_0x49b68c[_0x9f3090(0x20a)]][_0x9f3090(0x232)][_0x9f3090(0xcd)][_0x9f3090(0x1b2)]:markets[_0x49b68c[_0x9f3090(0x20a)]]['limits']['cost'][_0x9f3090(0x1b2)],_0x20a056=!_0x49b68c[_0x9f3090(0x1d4)]?markets[_0x49b68c[_0x9f3090(0x20a)]]['limits'][_0x9f3090(0x1a2)][_0x9f3090(0x1b2)]:markets[_0x49b68c[_0x9f3090(0x20a)]][_0x9f3090(0x232)][_0x9f3090(0xcd)][_0x9f3090(0x1b2)],_0x4095e0=truncateTradeAmount(_0x49b68c['symbol'],_0x49b68c['trade']);_0x49b68c[_0x9f3090(0x241)]=_0x4095e0;if(Math[_0x9f3090(0x13f)](_0x4095e0)<_0x5dfe42)_0x3f0a29=![];if(Math[_0x9f3090(0x13f)](_0x4095e0)*_0x49b68c['last']<_0x20a056)_0x3f0a29=![];if(_0x49b68c[_0x9f3090(0x204)]==_0x9f3090(0x22a)){let _0x339097=config[_0x9f3090(0x1f8)][_0x9f3090(0x1ab)](_0x9c26fa=>_0x9c26fa[_0x9f3090(0x1cf)]==_0x49b68c[_0x9f3090(0x1cf)]);if(_0x339097[_0x9f3090(0x1d3)]>0x0){if(Math['abs'](_0x4095e0)>_0x49b68c[_0x9f3090(0x143)]-_0x339097[_0x9f3090(0x1d3)])_0x3f0a29=![];}else{if(Math[_0x9f3090(0x13f)](_0x4095e0)>_0x49b68c[_0x9f3090(0x143)])_0x3f0a29=![];}}if(_0x49b68c[_0x9f3090(0x204)]==_0x9f3090(0x20c)){let _0xbc5af7=config['portfolio'][_0x9f3090(0x1ab)](_0x57376b=>_0x57376b['coin']==config[_0x9f3090(0x1fe)]),_0x5592b3=currentCoins[_0x9f3090(0x1ab)](_0xa00646=>_0xa00646[_0x9f3090(0x1cf)]==config[_0x9f3090(0x1fe)]);if(_0xbc5af7[_0x9f3090(0x1d3)]>0x0){if(Math['abs'](_0x4095e0)*_0x49b68c[_0x9f3090(0x177)]>_0x5592b3[_0x9f3090(0x143)]-_0xbc5af7[_0x9f3090(0x1d3)])_0x3f0a29=![];}else{if(Math[_0x9f3090(0x13f)](_0x4095e0)*_0x49b68c[_0x9f3090(0x177)]>_0x5592b3[_0x9f3090(0x143)])_0x3f0a29=![];}}return _0x3f0a29;}async function getBalances(_0x1ae37b=!![]){const _0xa4920=_0x33b6b2;let _0x5b3de4=0x0,_0xdbbe8f;const _0x114e13=config[_0xa4920(0xcb)];if(config[_0xa4920(0x198)]&&config[_0xa4920(0x166)]<0x0)await validate24hChanges();currentCoins[_0xa4920(0x1df)](_0x494cbf=>{const _0x1471b8=_0xa4920;if(_0x494cbf[_0x1471b8(0x1cf)]!=config['basecoin']){let _0x5930b7=global['ticker'][noslash(_0x494cbf['symbol'])];_0xdbbe8f=_0x494cbf[_0x1471b8(0x1d4)]?0x1/_0x5930b7:_0x5930b7;}else _0xdbbe8f=0x1;let _0x3f67e7=_0x494cbf[_0x1471b8(0x143)]*_0xdbbe8f;_0x5b3de4+=_0x3f67e7,_0x494cbf['last']=formatResult(Number(_0xdbbe8f),0x8),_0x494cbf[_0x1471b8(0x156)]=_0x3f67e7;}),currentCoins[_0xa4920(0x1df)](_0x272b9c=>{const _0x31114a=_0xa4920;let _0x4e65dc=config[_0x31114a(0x1f8)]['find'](_0x1fe010=>_0x1fe010[_0x31114a(0x1cf)]==_0x272b9c[_0x31114a(0x1cf)]),_0x58e54c=Number(_0x4e65dc['distribution']),_0x1e533e=_0x272b9c['value']/_0x5b3de4*0x64,_0x4778a4=_0x58e54c*_0x5b3de4/0x64/_0x272b9c['last']-_0x272b9c['number'];_0x272b9c[_0x31114a(0x1e5)]=formatResult(_0x1e533e,0x3),_0x272b9c[_0x31114a(0x135)]=formatResult(_0x58e54c,0x3),_0x272b9c['trade']=formatResult(_0x4778a4,0x8),_0x272b9c[_0x31114a(0x204)]='',_0x272b9c[_0x31114a(0xf5)]=![];if(_0x272b9c[_0x31114a(0x1cf)]!=config['basecoin']){if(_0x272b9c['distribution']>_0x58e54c)_0x272b9c[_0x31114a(0x204)]=_0x31114a(0x22a),_0x272b9c['valid']=checkMinimums(_0x272b9c);else _0x272b9c[_0x31114a(0x1e5)]<_0x58e54c&&(_0x272b9c[_0x31114a(0x204)]=_0x31114a(0x20c),_0x272b9c[_0x31114a(0xf5)]=checkMinimums(_0x272b9c));}_0x272b9c[_0x31114a(0x105)]=_0x272b9c[_0x31114a(0x1e5)]/_0x272b9c[_0x31114a(0x135)]-0x1;if(_0x272b9c[_0x31114a(0x23b)]=='filled'||_0x272b9c[_0x31114a(0x23b)]=='canceled')_0x272b9c['orderstatus']='none';}),currentCoins['sort']((_0x7c59c9,_0x451f7b)=>_0x7c59c9[_0xa4920(0x105)]<_0x451f7b[_0xa4920(0x105)]?0x1:_0x451f7b['delta']<_0x7c59c9[_0xa4920(0x105)]?-0x1:0x0);const _0x4205ef=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4205ef[_0xa4920(0x201)],'usd':_0x4205ef[_0xa4920(0x10d)],'portfolio':JSON[_0xa4920(0xc2)](currentCoins),'threshold':_0x114e13},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x1ae37b){if(config[_0xa4920(0x198)])headlessMode({'portfolio':currentCoins,'threshold':_0x114e13});else{if(lockOrders==ORDERS[_0xa4920(0x11b)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x114e13});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1af89a=getNormalizedPerformance();getStartingBalances(_0x1af89a),emitPerformance(_0x1af89a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5f4c1a=getNormalizedPerformance();emitPerformance(_0x5f4c1a),getStartingBalances(_0x5f4c1a),logger[_0xa4920(0x20b)](_0xa4920(0x1ea));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3ecdec=_0x33b6b2;if(!lastBalances)return;let _0x309ba2=[],_0x3d5d6a,_0x3b062e=JSON['parse'](lastBalances[_0x3ecdec(0x1f8)]);_0x3b062e[_0x3ecdec(0x175)]((_0x5cfb0c,_0x191e13)=>_0x5cfb0c['coin']>_0x191e13[_0x3ecdec(0x1cf)]?0x1:_0x191e13['coin']>_0x5cfb0c[_0x3ecdec(0x1cf)]?-0x1:0x0),_0x3b062e[_0x3ecdec(0x1df)](_0x4b7e6c=>{const _0x50e90a=_0x3ecdec;let _0x464134={'coin':_0x4b7e6c[_0x50e90a(0x1cf)],'number':_0x4b7e6c['number'],'price':_0x4b7e6c['last']};_0x309ba2[_0x50e90a(0x24c)](_0x464134);});const _0x12211a=await getFiat();_0x3d5d6a={'date':lastBalances[_0x3ecdec(0x172)][_0x3ecdec(0x24e)]('\x20')[0x0],'eur':_0x12211a[_0x3ecdec(0x201)],'usd':_0x12211a['usd'],'coins':_0x309ba2};let _0x284104=dbPerformance[_0x3ecdec(0x1bb)](_0x3ecdec(0x209))[_0x3ecdec(0x1ab)]({'date':_0x3d5d6a[_0x3ecdec(0xdf)]})['value']();_0x284104?_0x3d5d6a['date']!=config[_0x3ecdec(0x11f)]&&dbPerformance['get'](_0x3ecdec(0x209))[_0x3ecdec(0x1ab)]({'date':_0x3d5d6a[_0x3ecdec(0xdf)]})[_0x3ecdec(0x124)](_0x3d5d6a)[_0x3ecdec(0xe8)]():dbPerformance[_0x3ecdec(0x1bb)](_0x3ecdec(0x209))['push'](_0x3d5d6a)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x9f1a3f=_0x33b6b2;let _0x4c3aca=[];if(dbPerformance[_0x9f1a3f(0x21b)](_0x9f1a3f(0x209))['value']()){let _0x302801=dbPerformance['get']('data')[_0x9f1a3f(0x21f)]()[_0x9f1a3f(0x13d)](_0x1dc9cb=>{if(_0x1dc9cb['coins']['length']==0x0)return![];else return!![];})['sortBy']('date')[_0x9f1a3f(0x156)](),_0x577b03=[...config[_0x9f1a3f(0xea)]];_0x577b03[_0x9f1a3f(0x175)]((_0x557f64,_0x41d07f)=>_0x557f64[_0x9f1a3f(0xdf)]>_0x41d07f[_0x9f1a3f(0xdf)]?-0x1:_0x41d07f[_0x9f1a3f(0xdf)]>_0x557f64[_0x9f1a3f(0xdf)]?0x1:0x0);let _0x138894=0x1,_0x4b2c45=[],_0x353820=0x0;_0x302801[_0x9f1a3f(0x15b)]()[_0x9f1a3f(0x1d4)]()[_0x9f1a3f(0x1df)]((_0x163fd0,_0xd73023)=>{const _0x8ed4b7=_0x9f1a3f;if(_0x577b03[_0x353820]){if(_0x302801[_0x302801[_0x8ed4b7(0x1f6)]-_0xd73023]&&_0x577b03[_0x353820][_0x8ed4b7(0xdf)]==_0x302801[_0x302801[_0x8ed4b7(0x1f6)]-_0xd73023][_0x8ed4b7(0xdf)]){if(_0xd73023<_0x302801['length']){let _0x282268=0x0,_0x4793d5=0x0;_0x302801[_0x302801[_0x8ed4b7(0x1f6)]-_0xd73023][_0x8ed4b7(0x13c)]['forEach'](_0x197b43=>{const _0x87b824=_0x8ed4b7;_0x4793d5+=_0x197b43[_0x87b824(0x143)]*_0x197b43['price'];}),_0x577b03[_0x353820][_0x8ed4b7(0xee)][_0x8ed4b7(0x1df)](_0x2522d1=>{const _0x372889=_0x8ed4b7;_0x282268+=_0x2522d1[_0x372889(0x143)]*_0x2522d1[_0x372889(0x1e3)];}),_0x138894*=_0x282268/(_0x4793d5-_0x282268)+0x1;}_0x353820++;}}let _0x598ae2=0x0;_0x163fd0[_0x8ed4b7(0x13c)][_0x8ed4b7(0x1df)](_0x3a6067=>{const _0x312875=_0x8ed4b7;_0x598ae2+=_0x3a6067[_0x312875(0x143)]*_0x3a6067[_0x312875(0x1e3)];}),_0x4b2c45[_0x302801[_0x8ed4b7(0x1f6)]-_0xd73023-0x1]=_0x598ae2*(_0x138894-0x1);});let _0x3be6c=[];_0x577b03=[...config[_0x9f1a3f(0xea)]]||[];let _0x449359=0x0;_0x353820=0x0,_0x302801[_0x9f1a3f(0x1df)]((_0x6923d1,_0x184717)=>{const _0x3b4dd0=_0x9f1a3f;if(_0x577b03[_0x353820]){const _0x50a706=fns[_0x3b4dd0(0x18a)](_0x577b03[_0x353820]['date'],_0x3b4dd0(0xe9),new Date()),_0x5c00ef=fns[_0x3b4dd0(0x18a)](_0x6923d1[_0x3b4dd0(0xdf)],_0x3b4dd0(0xe9),new Date());if(fns[_0x3b4dd0(0x1ff)](_0x50a706,_0x5c00ef)){let _0x57f5ee=0x0;_0x577b03[_0x353820]['changes']['forEach'](_0x4d168c=>{const _0x565642=_0x3b4dd0;!_0x3be6c[_0x4d168c['coin']]?_0x3be6c[_0x4d168c[_0x565642(0x1cf)]]=_0x4d168c[_0x565642(0x143)]:(_0x57f5ee=_0x3be6c[_0x4d168c[_0x565642(0x1cf)]],_0x3be6c[_0x4d168c['coin']]+=_0x4d168c[_0x565642(0x143)]);const _0x338a40=_0x6923d1[_0x565642(0x13c)]['find'](_0x18d87c=>_0x18d87c[_0x565642(0x1cf)]==_0x4d168c[_0x565642(0x1cf)]);(!_0x338a40||_0x338a40[_0x565642(0x143)]==0x0)&&(_0x449359+=(-_0x4d168c[_0x565642(0x143)]-_0x57f5ee)*_0x4d168c[_0x565642(0x1e3)]);}),_0x353820++;}}_0x6923d1[_0x3b4dd0(0x13c)][_0x3b4dd0(0x1df)]((_0x341b2e,_0x4e2e47)=>{const _0x561989=_0x3b4dd0;_0x3be6c[_0x341b2e[_0x561989(0x1cf)]]&&(_0x341b2e['initial']=_0x3be6c[_0x341b2e['coin']]);}),_0x4c3aca['push']({'date':_0x6923d1[_0x3b4dd0(0xdf)],'eur':_0x6923d1[_0x3b4dd0(0x201)],'usd':_0x6923d1[_0x3b4dd0(0x10d)],'offset':_0x4b2c45[_0x184717],'netoffset':_0x449359,'coins':_0x6923d1['coins']});});}return _0x4c3aca;}function emitPerformance(_0x535b48){const _0x589f6a=_0x33b6b2;_0x535b48['length']!==0x0?(proxyEmit(_0x589f6a(0x254),_0x535b48),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x190f52,_0x325f03){const _0x1202f1=_0x33b6b2;let _0x2084d1=0x0,_0x3b185d=0x0,_0x333661=0x0;_0x190f52[_0x1202f1(0x13c)]['forEach'](_0x3f09f2=>{const _0x57d803=_0x1202f1;_0x2084d1+=_0x3f09f2[_0x57d803(0x143)]*_0x3f09f2[_0x57d803(0x1e3)];});_0x325f03&&(_0x2084d1+=_0x190f52[_0x1202f1(0x1d3)]);if(config[_0x1202f1(0x1fe)]===_0x1202f1(0x108)||config[_0x1202f1(0x1fe)]===_0x1202f1(0x1fd)||config[_0x1202f1(0x1fe)]===_0x1202f1(0x14a))_0x3b185d=_0x2084d1*_0x190f52[_0x1202f1(0x201)],_0x333661=_0x2084d1*_0x190f52[_0x1202f1(0x10d)];else{if(usdBasecoins[_0x1202f1(0x159)](config[_0x1202f1(0x1fe)]))_0x3b185d=_0x2084d1*_0x190f52['eur']/_0x190f52[_0x1202f1(0x10d)],_0x333661=_0x2084d1;else config['basecoin']===_0x1202f1(0x236)&&(_0x3b185d=_0x2084d1,_0x333661=_0x2084d1*_0x190f52['usd']/_0x190f52['eur']);}return[_0x2084d1,_0x3b185d,_0x333661];}function getKPIs(_0x1f633b,_0x19f9f6='EUR'){const _0x309865=_0x33b6b2,_0x383b36=config[_0x309865(0x1fe)],_0x2daed3=lastBalances,_0x532e4e=currentCoins,_0x2da8be=getNormalizedPerformance(),_0xc4f114=_0x1f633b===_0x309865(0x1fe)?_0x383b36:_0x1f633b===_0x309865(0x132)||_0x1f633b===_0x309865(0x140)?_0x19f9f6:'Net\x20'+_0x383b36,_0x157801=_0x1f633b===_0x309865(0x106)?'Net\x20effect':_0x1f633b===_0x309865(0x140)?_0x309865(0x1ce):_0xc4f114+_0x309865(0x19c),_0x5483d8=_0x1f633b===_0x309865(0x106)||_0x1f633b===_0x309865(0x140)?_0x309865(0x1ce):_0xc4f114+'\x20change';let _0x2a086f=0x0;_0x532e4e[_0x309865(0x1df)](_0xc9fcb6=>{const _0x1c7db0=_0x309865;_0x2a086f+=_0xc9fcb6['number']*_0xc9fcb6[_0x1c7db0(0x177)];});if(_0x1f633b===_0x309865(0x132)||_0x1f633b===_0x309865(0x140)){if(_0x383b36===_0x309865(0x108)||_0x383b36===_0x309865(0x1fd)||_0x383b36===_0x309865(0x14a))_0x2a086f=_0x2a086f*(_0x19f9f6===_0x309865(0x236)?_0x2daed3[_0x309865(0x201)]:_0x2daed3['usd']);else{if(usdBasecoins['includes'](_0x383b36))_0x2a086f=_0x2a086f*(_0x19f9f6===_0x309865(0x236)?_0x2daed3[_0x309865(0x201)]/_0x2daed3[_0x309865(0x10d)]:0x1);else _0x383b36===_0x309865(0x236)&&(_0x2a086f=_0x2a086f*(_0x19f9f6===_0x309865(0x236)?0x1:_0x2daed3[_0x309865(0x10d)]/_0x2daed3[_0x309865(0x201)]));}}let _0x269cba;if(_0x2a086f!==0x0){if(_0x1f633b===_0x309865(0x1fe))_0x269cba=(_0x2a086f/startingBalances['basecoin']-0x1)*0x64;else{if(_0x19f9f6===_0x309865(0x236))_0x269cba=(_0x2a086f/startingBalances[_0x309865(0x201)]-0x1)*0x64;else _0x269cba=(_0x2a086f/startingBalances[_0x309865(0x10d)]-0x1)*0x64;}let _0x480187=0x0;if(startingBalances['coins'])_0x532e4e[_0x309865(0x1df)](_0x5d6265=>{const _0x577623=_0x309865;let _0x19577c=startingBalances[_0x577623(0x13c)][_0x577623(0x1ab)](_0x6aa79a=>_0x6aa79a['coin']===_0x5d6265[_0x577623(0x1cf)]);if(_0x19577c&&_0x19577c['coin']&&_0x5d6265[_0x577623(0x143)]!==0x0)_0x480187+=_0x19577c[_0x577623(0x143)]*_0x5d6265['last'];});let _0x4c3712=0x0;if(_0x2da8be['length']!==0x0){let _0x1a3140=_0x2da8be[_0x2da8be[_0x309865(0x1f6)]-0x1];_0x4c3712=_0x1a3140[_0x309865(0x1d9)];}_0x480187-=_0x4c3712;_0x1f633b==='net-basecoin'&&(_0x269cba=(_0x2a086f-_0x480187)/startingBalances[_0x309865(0x1fe)]*0x64,_0x2a086f=_0x2a086f-_0x480187);if(_0x1f633b===_0x309865(0x140)){let _0x30f125=_0x19f9f6==='EUR'?startingBalances['eur']:startingBalances[_0x309865(0x10d)];if(_0x383b36==='BTC'||_0x383b36===_0x309865(0x1fd)||_0x383b36==='PAXG')_0x480187=_0x19f9f6===_0x309865(0x236)?_0x480187*_0x2daed3['eur']:_0x480187*_0x2daed3[_0x309865(0x10d)];else{if(usdBasecoins[_0x309865(0x159)](_0x383b36))_0x480187=_0x19f9f6===_0x309865(0x236)?_0x480187*_0x2daed3[_0x309865(0x201)]/_0x2daed3['usd']:_0x480187;else _0x383b36==='EUR'&&(_0x480187=_0x19f9f6==='EUR'?_0x480187:_0x480187*_0x2daed3['usd']/_0x2daed3['eur']);}_0x269cba=(_0x2a086f-_0x480187)/_0x30f125*0x64,_0x2a086f=_0x2a086f-_0x480187;}if(_0x269cba){if(_0x269cba<0x64)_0x269cba=_0x269cba[_0x309865(0x24f)](0x2);else{if(_0x269cba<0x3e8)_0x269cba=_0x269cba[_0x309865(0x24f)](0x1);else _0x269cba=_0x269cba[_0x309865(0x24f)](0x0);}}else _0x269cba=Number('0')['toFixed'](0x2);if(_0x2a086f){if(Math[_0x309865(0x13f)](_0x2a086f)<0.000001)_0x2a086f=_0x2a086f[_0x309865(0x24f)](0x2);else{if(Math[_0x309865(0x13f)](_0x2a086f)<0.1)_0x2a086f=_0x2a086f[_0x309865(0x24f)](0x6);else{if(Math[_0x309865(0x13f)](_0x2a086f)<0x1)_0x2a086f=_0x2a086f[_0x309865(0x24f)](0x5);else{if(Math['abs'](_0x2a086f)<0xa)_0x2a086f=_0x2a086f['toFixed'](0x4);else{if(Math[_0x309865(0x13f)](_0x2a086f)<0x64)_0x2a086f=_0x2a086f['toFixed'](0x3);else{if(Math[_0x309865(0x13f)](_0x2a086f)<0x3e8)_0x2a086f=_0x2a086f['toFixed'](0x2);else _0x2a086f=_0x2a086f[_0x309865(0x24f)](0x2);}}}}}}else _0x2a086f=Number('0')[_0x309865(0x24f)](0x2);}else _0x269cba=Number('0')['toFixed'](0x2);return{'value':_0x2a086f,'change':_0x269cba,'leftTxt':_0x157801,'rightTxt':_0x5483d8};}async function getStartingBalances(_0x4f0f55,_0x408d8=!![]){const _0x497f3f=_0x33b6b2;if(_0x4f0f55[_0x497f3f(0x1f6)]!==0x0){const [_0x2f9550,_0x316f73,_0x3f3b32]=getPerf(_0x4f0f55[0x0],!![]);let _0x500f5c=[];config[_0x497f3f(0x1f8)][_0x497f3f(0x1df)](_0x1453bf=>{const _0x5e636e=_0x497f3f;let _0x1ac662=0x0,_0x146d7c;config[_0x5e636e(0xea)][_0x5e636e(0x1df)](_0x1f0196=>{const _0x141dd8=_0x5e636e;let _0x1af385=_0x1f0196[_0x141dd8(0xee)][_0x141dd8(0x1ab)](_0x1a5be8=>_0x1a5be8[_0x141dd8(0x1cf)]==_0x1453bf['coin']);if(_0x1af385){_0x1ac662+=_0x1af385[_0x141dd8(0x143)];if(!_0x146d7c)_0x146d7c=_0x1af385['price'];}}),_0x500f5c[_0x5e636e(0x24c)]({'coin':_0x1453bf['coin'],'number':_0x1ac662,'initialprice':_0x146d7c});});const _0x26bb9c={'basecoin':_0x2f9550,'eur':_0x316f73,'usd':_0x3f3b32,'coins':_0x500f5c};if(_0x408d8)proxyEmit(_0x497f3f(0x206),_0x26bb9c);startingBalances=_0x26bb9c;}}function headlessMode(_0x373bf7){const _0x5566b7=_0x33b6b2;let _0x3852e6=_0x373bf7['portfolio'],_0x177b43=_0x373bf7[_0x5566b7(0xcb)],_0x13137d=[];for(let _0x29c5c5 of _0x3852e6){if(_0x29c5c5[_0x5566b7(0x1cf)]!=config[_0x5566b7(0x1fe)]){if(_0x29c5c5[_0x5566b7(0x105)]>=_0x177b43/0x64){if(_0x29c5c5['valid'])_0x13137d['push'](_0x29c5c5);}else{if(_0x29c5c5[_0x5566b7(0x105)]<=-_0x177b43/0x64){if(_0x29c5c5[_0x5566b7(0xf5)])_0x13137d[_0x5566b7(0x24c)](_0x29c5c5);}}}}_0x13137d[_0x5566b7(0x1f6)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x13137d['forEach'](_0x38fc96=>{const _0x3dacae=_0x5566b7;logger[_0x3dacae(0x20b)](_0x3dacae(0x170)+_0x38fc96['coin']+'\x20'+_0x38fc96[_0x3dacae(0x143)]+'\x20'+_0x38fc96[_0x3dacae(0x177)]+'\x20'+_0x38fc96[_0x3dacae(0x1e5)]+'%\x20'+_0x38fc96[_0x3dacae(0x135)]+'%\x20'+(0x64*_0x38fc96[_0x3dacae(0x105)])[_0x3dacae(0x24f)](0x2)+_0x3dacae(0x24b)+_0x177b43[_0x3dacae(0x24f)](0x2)+'%)');}),placeOrder(_0x13137d));}function notifyBalance(_0x49808d){const _0x31f3a5=_0x33b6b2;let _0x3de944=_0x49808d[_0x31f3a5(0x1f8)],_0x24f8ee=_0x49808d[_0x31f3a5(0xcb)],_0x25b2c9=[];for(let _0x146258 of _0x3de944){if(_0x146258['coin']!=config[_0x31f3a5(0x1fe)]){if(_0x146258[_0x31f3a5(0x105)]>=_0x24f8ee/0x64){if(_0x146258[_0x31f3a5(0xf5)])_0x25b2c9[_0x31f3a5(0x24c)](_0x146258);}else{if(_0x146258['delta']<=-_0x24f8ee/0x64){if(_0x146258[_0x31f3a5(0xf5)])_0x25b2c9[_0x31f3a5(0x24c)](_0x146258);}}}}if(_0x25b2c9['length']>0x0){let _0x31715e=_0x25b2c9[_0x31f3a5(0x239)](_0x205259=>_0x205259['coin']);_0x31715e[_0x31f3a5(0x175)]();let _0x18b404=_0x31715e[_0x31f3a5(0x173)](',\x20');if(!lastCoinsToBalance)logHistory(_0x31f3a5(0x1ba),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x18b404;}}function symbolToCoin(_0x45d734){const _0x750e66=_0x33b6b2;let _0x4a3d57;if(_0x45d734[_0x750e66(0x159)]('/'+config['basecoin']))_0x4a3d57=_0x45d734['replace']('/'+config[_0x750e66(0x1fe)],'');if(_0x45d734[_0x750e66(0x159)](config['basecoin']+'/'))_0x4a3d57=_0x45d734[_0x750e66(0x180)](config[_0x750e66(0x1fe)]+'/','');return _0x4a3d57;}async function unlockOrders(){const _0x2a3b18=_0x33b6b2;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x2a3b18(0x20b)](_0x2a3b18(0x128)),lockOrders=ORDERS[_0x2a3b18(0x1a6)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5d6a8b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5d6a8b,validateOrdersState=_0x2a3b18(0x1a4),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x2a3b18(0x104));}}async function validateOrders(_0x540e43){const _0x150ee8=_0x33b6b2;if(_0x540e43)validateOrdersState=_0x540e43;logger[_0x150ee8(0x20b)](_0x150ee8(0x12d)+validateOrdersState+_0x150ee8(0x179)+(lockOrders==0x1?_0x150ee8(0xbe):lockOrders==0x2?'ORDERS.UNLOCKING':_0x150ee8(0x11c)));let _0x2601f6=[],_0x249a26=config[_0x150ee8(0xd1)]==_0x150ee8(0x233)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x150ee8(0xd7)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x150ee8(0x1ac)])return;logger['debug'](_0x150ee8(0x248)+validateOrdersState),lastOrders[_0x150ee8(0x1df)](_0x178db6=>{const _0x53cca4=_0x150ee8;let _0x50eb35=![];_0x178db6[_0x53cca4(0x250)]>0x0&&(_0x50eb35=!![]),_0x2601f6[_0x53cca4(0x24c)](_0x50eb35),_0x50eb35&&config['ordertype']!='market'&&logHistory(_0x53cca4(0x110),'Order\x20filled:\x20'+_0x178db6['symbol']+'\x20'+_0x178db6[_0x53cca4(0x204)]+'\x20#'+formatResult(_0x178db6[_0x53cca4(0x250)],0x8)+'\x20@'+formatResult(_0x178db6[_0x53cca4(0x1e3)],0x8));}),_0x2601f6[_0x150ee8(0x1df)]((_0x3faefb,_0x40a798)=>{if(_0x3faefb)lastOrders['splice'](_0x40a798,0x1);}),persistOpenOrders(lastOrders);const _0xb97f03=coolingDown?_0x150ee8(0x1b4):'balancing\x20resumed';if(validateOrdersState==_0x150ee8(0x1a4)){validateOrdersState=_0x150ee8(0x252);if(_0x2601f6[_0x150ee8(0x159)](![])){if(config[_0x150ee8(0xd1)]==_0x150ee8(0x233)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x150ee8(0x252)){if(_0x2601f6[_0x150ee8(0x159)](![])){}else{if(allOrdersPlaced){if(config[_0x150ee8(0xd1)]==_0x150ee8(0x233)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x150ee8(0x195))_0x2601f6[_0x150ee8(0x159)](![])&&(config[_0x150ee8(0xd1)]=='market'?logHistory(_0x150ee8(0x168),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x150ee8(0x222)](_0x249a26*validateOrderInterval/0xea60)+_0x150ee8(0x186)+_0xb97f03):(await cancelOrders(),logHistory(_0x150ee8(0x168),_0x150ee8(0x189)+Math['round'](_0x249a26*validateOrderInterval/0xea60)+_0x150ee8(0x186)+_0xb97f03))),await unlockOrders();else{if(validateOrdersState==_0x150ee8(0x247)){if(config[_0x150ee8(0xd1)]!=_0x150ee8(0x233))logHistory(_0x150ee8(0x168),_0x150ee8(0x144)+_0xb97f03);await unlockOrders();}}}}}async function cancelOrders(){const _0x2718ea=_0x33b6b2;lastOrders[_0x2718ea(0x1df)](async _0x1b994b=>{const _0x297655=_0x2718ea;try{const _0x2a1e7a=await exchange[_0x297655(0x185)](_0x1b994b[_0x297655(0xe5)],_0x1b994b['symbol']);}catch(_0x105ea8){if(_0x105ea8[_0x297655(0x244)]()[_0x297655(0x159)](_0x297655(0x102))){}else await handleError(_0x105ea8,_0x297655(0xc8));}});}async function initCoinResults(_0x4fc807){const _0x1bdd20=_0x33b6b2;_0x4fc807?logger[_0x1bdd20(0x20b)](_0x1bdd20(0x1c5)+_0x4fc807):logger[_0x1bdd20(0x20b)](_0x1bdd20(0x1b7)),config[_0x1bdd20(0x1f8)][_0x1bdd20(0x1df)](_0x3d982d=>{const _0x43c775=_0x1bdd20;if(!_0x3d982d[_0x43c775(0x12f)]&&_0x3d982d['coin']!=config[_0x43c775(0x1fe)]){const _0x24750a=currentCoins[_0x43c775(0x1ab)](_0x270029=>_0x270029[_0x43c775(0x1cf)]==_0x3d982d[_0x43c775(0x1cf)]),_0x699722=global['ticker'][noslash(_0x3d982d[_0x43c775(0x20a)])];let _0x39e7e3=_0x24750a?_0x24750a[_0x43c775(0x143)]:null,_0x53bbe0=_0x3d982d[_0x43c775(0x1d4)]?0x1/_0x699722:_0x699722,_0x4f80d2;config['liquidity'][_0x43c775(0x1df)](_0x59568a=>{const _0x5a25ee=_0x43c775;!_0x4f80d2&&(_0x4f80d2=_0x59568a[_0x5a25ee(0xee)]['find'](_0x558ee9=>_0x558ee9[_0x5a25ee(0x1cf)]==_0x3d982d[_0x5a25ee(0x1cf)]),_0x4f80d2&&(_0x39e7e3=_0x4f80d2[_0x5a25ee(0x143)],_0x53bbe0=_0x4f80d2[_0x5a25ee(0x1e3)]));});let _0x516b8c=dbCoinResults[_0x43c775(0x1bb)]('coins')['find']({'coin':_0x3d982d[_0x43c775(0x1cf)]})[_0x43c775(0x156)]();if(!_0x516b8c){const _0x3fe57e={'coin':_0x3d982d[_0x43c775(0x1cf)],'number':_0x39e7e3,'breakeven':_0x53bbe0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x43c775(0x1bb)](_0x43c775(0x13c))[_0x43c775(0x24c)](_0x3fe57e)[_0x43c775(0xe8)]();}else{if(_0x4fc807&&_0x3d982d['coin']==_0x4fc807){const _0x2c255c={'coin':_0x3d982d[_0x43c775(0x1cf)],'number':_0x39e7e3,'breakeven':_0x53bbe0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x43c775(0x1ab)]({'coin':_0x3d982d[_0x43c775(0x1cf)]})[_0x43c775(0x124)](_0x2c255c)['write']();}}}});}async function updateCoinResults(_0xd14b9e,_0x5a5070=![]){const _0x69d7da=_0x33b6b2;let _0x211731,_0x336e64,_0x3b647a,_0x1bf290,_0x1574c7,_0x38c1c0,_0x374247=dbCoinResults['get'](_0x69d7da(0x13c))[_0x69d7da(0x1ab)]({'coin':_0xd14b9e[_0x69d7da(0x1cf)]})['value'](),_0x2ad94f=![];_0x374247&&Object[_0x69d7da(0x17a)](_0x374247)[_0x69d7da(0x1df)](([_0x3ddb01,_0x347cca])=>{if(_0x347cca==null)_0x2ad94f=!![];});(!_0x374247||_0x2ad94f)&&(await initCoinResults(_0xd14b9e[_0x69d7da(0x1cf)]),_0x374247=dbCoinResults[_0x69d7da(0x1bb)](_0x69d7da(0x13c))[_0x69d7da(0x1ab)]({'coin':_0xd14b9e[_0x69d7da(0x1cf)]})[_0x69d7da(0x156)]());_0xd14b9e[_0x69d7da(0x1d4)]&&(_0x38c1c0={'filled':_0xd14b9e[_0x69d7da(0x250)]*_0xd14b9e['price'],'amount':_0xd14b9e['filled']*_0xd14b9e[_0x69d7da(0x1e3)],'side':_0xd14b9e[_0x69d7da(0x204)]=='sell'?_0x69d7da(0x20c):_0x69d7da(0x22a),'price':0x1/_0xd14b9e[_0x69d7da(0x1e3)]},_0xd14b9e={..._0xd14b9e,..._0x38c1c0});_0x5a5070?_0x336e64=_0xd14b9e[_0x69d7da(0x204)]=='buy'?_0x374247['number']+_0xd14b9e[_0x69d7da(0x250)]:_0x374247[_0x69d7da(0x143)]-_0xd14b9e[_0x69d7da(0x250)]:_0x336e64=await getCoinNumber(_0xd14b9e[_0x69d7da(0x1cf)]);if(_0xd14b9e[_0x69d7da(0x154)]&&_0xd14b9e[_0x69d7da(0x154)]['currency']==config[_0x69d7da(0x1fe)])_0x211731=_0xd14b9e[_0x69d7da(0x154)][_0x69d7da(0x1a2)];else{if(_0xd14b9e['fee']&&_0xd14b9e['fee']['currency']==_0x69d7da(0x10c)&&!_0x5a5070&&config['basecoin']!=_0x69d7da(0x14a))_0x211731=_0xd14b9e[_0x69d7da(0x154)][_0x69d7da(0x1a2)]*global[_0x69d7da(0x1b3)][_0x69d7da(0x10c)+config[_0x69d7da(0x1fe)]];else _0x211731=defaultFee*_0xd14b9e['filled']*_0xd14b9e[_0x69d7da(0x1e3)];}_0xd14b9e[_0x69d7da(0x204)]==_0x69d7da(0x20c)?(_0x3b647a=_0x336e64!=0x0?(_0x374247[_0x69d7da(0x19e)]*_0x374247[_0x69d7da(0x143)]+_0xd14b9e[_0x69d7da(0x1e3)]*(_0x336e64-_0x374247[_0x69d7da(0x143)])+_0x211731)/_0x336e64:0x0,_0x1bf290=_0x374247[_0x69d7da(0x112)]):(_0x3b647a=_0x336e64!=0x0?(_0x374247['breakeven']*_0x374247[_0x69d7da(0x143)]-_0xd14b9e['price']*(_0x374247[_0x69d7da(0x143)]-_0x336e64)+_0x211731)/_0x336e64:0x0,_0x1bf290=_0x374247['realized']+(_0xd14b9e[_0x69d7da(0x1e3)]-_0x374247[_0x69d7da(0x19e)])*_0xd14b9e['filled']);_0x1574c7=(_0xd14b9e[_0x69d7da(0x1e3)]-_0x3b647a-_0x211731/_0xd14b9e[_0x69d7da(0x250)])*_0x336e64;let _0x2b46d0={'coin':_0xd14b9e[_0x69d7da(0x1cf)],'number':_0x336e64,'breakeven':formatResult(_0x3b647a,0x8),'realized':formatResult(_0x1bf290,0x8),'unrealized':formatResult(_0x1574c7,0x8),'fees':formatResult(_0x374247['fees']+_0x211731,0x8),'sells':_0xd14b9e[_0x69d7da(0x204)]==_0x69d7da(0x22a)?_0x374247[_0x69d7da(0x1c4)]+0x1:_0x374247[_0x69d7da(0x1c4)],'buys':_0xd14b9e[_0x69d7da(0x204)]==_0x69d7da(0x20c)?_0x374247[_0x69d7da(0xce)]+0x1:_0x374247['buys']};dbCoinResults[_0x69d7da(0x1bb)](_0x69d7da(0x13c))[_0x69d7da(0x1ab)]({'coin':_0xd14b9e[_0x69d7da(0x1cf)]})[_0x69d7da(0x124)](_0x2b46d0)[_0x69d7da(0xe8)]();if(!_0x5a5070){if(_0xd14b9e['fee']&&_0xd14b9e[_0x69d7da(0x154)][_0x69d7da(0x220)]==_0x69d7da(0x10c)){const _0x5e85de=currentCoins[_0x69d7da(0x1ab)](_0xae2aac=>_0xae2aac[_0x69d7da(0x1cf)]==_0x69d7da(0x10c));if(_0x5e85de){let _0x58d95e=dbCoinResults[_0x69d7da(0x1bb)](_0x69d7da(0x13c))[_0x69d7da(0x1ab)]({'coin':_0x69d7da(0x10c)})[_0x69d7da(0x156)]();_0x2b46d0={..._0x58d95e,'number':_0x5e85de[_0x69d7da(0x143)]},dbCoinResults[_0x69d7da(0x1bb)]('coins')[_0x69d7da(0x1ab)]({'coin':_0x69d7da(0x10c)})['assign'](_0x2b46d0)['write']();}}}}async function placeOrder(_0x23fe96){const _0x2fecf8=_0x33b6b2,_0x361d4b=config[_0x2fecf8(0xd1)]=='market'?'market':_0x2fecf8(0x155);if(lockOrders==ORDERS[_0x2fecf8(0x11b)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x2e58d8=![];lastOrders=[];for(const _0xdfa76e of _0x23fe96){let _0x4d6d74,_0x52f555,_0x1b387a,_0xb791fa,_0x54fd11,_0x5632de=_0xdfa76e[_0x2fecf8(0x20a)];try{const _0x5c576d=await exchange[_0x2fecf8(0x1bd)](_0x5632de);_0x4d6d74=_0xdfa76e[_0x2fecf8(0x1d4)]?0x1/_0xdfa76e[_0x2fecf8(0x177)]:_0xdfa76e[_0x2fecf8(0x177)],_0x52f555=_0x5c576d[_0x2fecf8(0x21a)],_0x1b387a=_0x5c576d[_0x2fecf8(0x208)];_0xdfa76e[_0x2fecf8(0x1d4)]?(_0xb791fa=_0xdfa76e[_0x2fecf8(0x204)]==_0x2fecf8(0x20c)?_0x2fecf8(0x22a):_0x2fecf8(0x20c),_0x54fd11=Math[_0x2fecf8(0x13f)](_0xdfa76e[_0x2fecf8(0x241)])/_0x4d6d74):(_0xb791fa=_0xdfa76e[_0x2fecf8(0x204)],_0x54fd11=Math[_0x2fecf8(0x13f)](_0xdfa76e['trade']));_0x361d4b==_0x2fecf8(0x155)&&(config[_0x2fecf8(0xd1)]==_0x2fecf8(0x160)&&(_0x4d6d74=_0xb791fa==_0x2fecf8(0x20c)?_0x52f555:_0x1b387a),config['ordertype']==_0x2fecf8(0x18b)&&(_0x4d6d74=_0xb791fa==_0x2fecf8(0x20c)?_0x1b387a:_0x52f555));_0x54fd11=formatResult(_0x54fd11,0x8),_0x4d6d74=formatResult(_0x4d6d74,0x8);const _0x9c62c9=_0xb791fa==_0x2fecf8(0x22a)?config[_0x2fecf8(0x1f4)]?String['fromCodePoint']('0x'+config[_0x2fecf8(0x1f4)])+'\x20':'':config[_0x2fecf8(0x153)]?String[_0x2fecf8(0x16a)]('0x'+config[_0x2fecf8(0x153)])+'\x20':'',_0x5c1cc5=_0x361d4b==_0x2fecf8(0x233)?_0x2fecf8(0xde):config['ordertype']==_0x2fecf8(0x160)?'Limit\x20(high-margin)':_0x2fecf8(0x17b),_0x5275aa=(Math[_0x2fecf8(0x242)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x2fecf8(0x244)]();lastOrders[_0x2fecf8(0x24c)]({'customId':_0x5275aa,'symbol':_0x5632de,'coin':_0xdfa76e[_0x2fecf8(0x1cf)],'amount':_0x54fd11,'price':_0x4d6d74,'side':_0xb791fa,'reverse':_0xdfa76e[_0x2fecf8(0x1d4)],'filled':0x0});if(_0x361d4b==_0x2fecf8(0x233))logHistory(_0x2fecf8(0x110),''+_0x9c62c9+_0x5c1cc5+_0x2fecf8(0x1c2)+_0x5632de+'\x20'+_0xb791fa+'\x20#'+formatResult(_0x54fd11,0x8)+'\x20@'+formatResult(_0x4d6d74,0x8));else logHistory(_0x2fecf8(0x110),''+_0x9c62c9+_0x5c1cc5+_0x2fecf8(0x1c2)+_0x5632de+'\x20'+_0xb791fa+'\x20#'+formatResult(_0x54fd11,0x8)+'\x20@'+formatResult(_0x4d6d74,0x8));let _0x5824c4;_0x361d4b==_0x2fecf8(0x233)?_0xb791fa==_0x2fecf8(0x20c)&&[_0x2fecf8(0x231),_0x2fecf8(0x215),_0x2fecf8(0x223),_0x2fecf8(0x164),_0x2fecf8(0x1b6)][_0x2fecf8(0x159)](config[_0x2fecf8(0x228)])?_0x5824c4=await exchange[_0x2fecf8(0x187)](_0x5632de,_0x361d4b,_0xb791fa,_0x54fd11,_0x4d6d74):_0x5824c4=await exchange[_0x2fecf8(0x187)](_0x5632de,_0x361d4b,_0xb791fa,_0x54fd11,undefined):_0x5824c4=await exchange[_0x2fecf8(0x187)](_0x5632de,_0x361d4b,_0xb791fa,_0x54fd11,_0x4d6d74);logger[_0x2fecf8(0x20b)]('ID:\x20'+_0x5824c4['id']+_0x2fecf8(0x1af)+_0x5275aa);const _0x50f256=lastOrders['length']-0x1;if(_0x50f256>=0x0&&lastOrders[_0x50f256]['customId']==_0x5275aa){lastOrders[_0x50f256][_0x2fecf8(0xe5)]=_0x5824c4['id'];if(_0x5824c4[_0x2fecf8(0xcd)])lastOrders[_0x50f256][_0x2fecf8(0xcd)]=_0x5824c4[_0x2fecf8(0xcd)];if(_0x5824c4['price'])lastOrders[_0x50f256][_0x2fecf8(0x1e3)]=_0x5824c4[_0x2fecf8(0x1e3)];lastOrders[_0x50f256]['fee']=_0x5824c4[_0x2fecf8(0x154)];}if(config[_0x2fecf8(0xd9)]!=0x0){let _0x25f123=null;if(cooldownTracker[_0x2fecf8(0x1f6)]==config[_0x2fecf8(0xd9)]-0x1)_0x25f123=cooldownTracker[_0x2fecf8(0xcc)]();const _0x4a38ae=getTimeStamp();cooldownTracker[_0x2fecf8(0x24c)](_0x4a38ae);if(_0x25f123){const _0x53910b=fns['differenceInSeconds'](new Date(_0x4a38ae),new Date(_0x25f123));if(_0x53910b<cooldownInterval){logHistory('error','Executed\x20'+config[_0x2fecf8(0xd9)]+_0x2fecf8(0x142)+cooldownInterval/0x3c+_0x2fecf8(0x12e)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x59d729){if(_0x59d729[_0x2fecf8(0x244)]()[_0x2fecf8(0x159)](_0x2fecf8(0x16b)))lastOrders=lastOrders[_0x2fecf8(0x13d)](_0x1868b6=>_0x1868b6[_0x2fecf8(0x20a)]!=_0x5632de),logHistory(_0x2fecf8(0x24a),_0x2fecf8(0x114)+_0x5632de),_0x2e58d8=!![];else{if(_0x59d729[_0x2fecf8(0x244)]()['includes'](_0x2fecf8(0x221)))lastOrders=lastOrders[_0x2fecf8(0x13d)](_0x2fdf36=>_0x2fdf36[_0x2fecf8(0x20a)]!=_0x5632de),logHistory(_0x2fecf8(0x24a),'Order\x20amount\x20is\x20invalid:\x20'+_0x5632de),_0x2e58d8=!![];else{if(_0x59d729[_0x2fecf8(0x244)]()[_0x2fecf8(0x159)](_0x2fecf8(0x246)))lastOrders=lastOrders[_0x2fecf8(0x13d)](_0x374d76=>_0x374d76[_0x2fecf8(0x20a)]!=_0x5632de),logHistory(_0x2fecf8(0x24a),'Order\x20is\x20invalid:\x20'+_0x5632de),logger[_0x2fecf8(0x20b)](_0x59d729),_0x2e58d8=!![];else _0x59d729[_0x2fecf8(0x244)]()[_0x2fecf8(0x159)](_0x2fecf8(0xbd))?(lastOrders=lastOrders[_0x2fecf8(0x13d)](_0x54945e=>_0x54945e[_0x2fecf8(0x20a)]!=_0x5632de),logHistory(_0x2fecf8(0x24a),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5632de),_0x2e58d8=!![]):(lastOrders=lastOrders['filter'](_0x3bdbc8=>_0x3bdbc8[_0x2fecf8(0x20a)]!=_0x5632de),await handleError(_0x59d729,_0x2fecf8(0xdd),_0x5632de));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x38a46c=config['ordertype']==_0x2fecf8(0x233)?validateOrderTimeout*0x3c*0x3e8:config[_0x2fecf8(0xd7)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x394161=_0x2fecf8;validateOrders(_0x394161(0x195));},_0x38a46c);}else unlockOrders();_0x2e58d8&&config[_0x2fecf8(0x198)]&&(logHistory(_0x2fecf8(0x24a),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2fecf8(0x168),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x2fecf8(0x198)]&&logHistory(_0x2fecf8(0x24a),_0x2fecf8(0x158));else lockOrders!=ORDERS[_0x2fecf8(0x11b)]&&(!config[_0x2fecf8(0x198)]&&(config[_0x2fecf8(0xd1)]=='market'?logHistory(_0x2fecf8(0x24a),_0x2fecf8(0x15d)):logHistory(_0x2fecf8(0x24a),_0x2fecf8(0xca))));}}function persistOpenOrders(_0x5e8c2f){const _0x2e5257=_0x33b6b2,_0x43da2a={...config,'openOrders':_0x5e8c2f};let _0x550f8b=dbConfig[_0x2e5257(0x1bb)](_0x2e5257(0xd3))[_0x2e5257(0x1ab)]({'botID':botID})['value']();_0x550f8b&&dbConfig[_0x2e5257(0x1bb)]('bot')[_0x2e5257(0x1ab)]({'botID':botID})[_0x2e5257(0x124)](_0x43da2a)[_0x2e5257(0xe8)]();}function restoreOrders(){const _0x4e4940=_0x33b6b2;let _0x5c3cae;config[_0x4e4940(0xf9)]&&allOpenOrders[_0x4e4940(0x1df)](_0x1e8f15=>{const _0x5272ed=_0x4e4940,_0xd7eed0=config[_0x5272ed(0xf9)]['find'](_0xf3ef35=>_0xf3ef35[_0x5272ed(0xe5)]==_0x1e8f15['id']);_0xd7eed0&&(lastOrders[_0x5272ed(0x24c)](_0xd7eed0),_0x5c3cae=_0x1e8f15[_0x5272ed(0x103)]);});if(lastOrders[_0x4e4940(0x1f6)]>0x0){lockOrders=ORDERS[_0x4e4940(0x1ac)],validateOrdersState=_0x4e4940(0x252),allOrdersPlaced=!![];const _0x2b4c70=new Date()['getTime'](),_0x3418c6=config[_0x4e4940(0xd1)]==_0x4e4940(0x233)?validateOrderTimeout*0x3c*0x3e8:config[_0x4e4940(0xd7)]*0x3c*0x3e8;if(_0x5c3cae+_0x3418c6>_0x2b4c70){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5c3cae+_0x3418c6-_0x2b4c70);}else validateOrders(_0x4e4940(0x195));}}async function sendMetricsTelegram(){const _0x5a6736=_0x33b6b2;if(!coinsLoaded){process[_0x5a6736(0x122)]({'telegrammsg':_0x5a6736(0x192)},_0x273213=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x182f7a='';if(config[_0x5a6736(0xfc)])_0x182f7a=_0x5a6736(0x131)+config[_0x5a6736(0x16f)]+_0x5a6736(0x167);else _0x182f7a=_0x5a6736(0x1f1)+botID+_0x5a6736(0x167);const _0x3fb2d7=getKPIs(_0x5a6736(0x1fe)),_0xd6d84c=getKPIs(_0x5a6736(0x132),config[_0x5a6736(0x132)]),_0x1445b0=getKPIs(_0x5a6736(0x106)),_0x8f2168=getKPIs(_0x5a6736(0x140),config[_0x5a6736(0x132)]);_0x182f7a+=_0x5a6736(0x1b9),_0x182f7a+=_0x3fb2d7[_0x5a6736(0x17c)]+'\x20:\x20'+_0x3fb2d7[_0x5a6736(0x156)]+'\x0a',_0x182f7a+=_0x3fb2d7[_0x5a6736(0x202)]+':\x20'+_0x3fb2d7[_0x5a6736(0x165)]+'%\x0a',_0x182f7a+=_0xd6d84c[_0x5a6736(0x17c)]+_0x5a6736(0xc1)+_0xd6d84c[_0x5a6736(0x156)]+'\x0a',_0x182f7a+=_0xd6d84c[_0x5a6736(0x202)]+':\x20'+_0xd6d84c[_0x5a6736(0x165)]+'%\x0a',_0x182f7a+=_0x1445b0[_0x5a6736(0x17c)]+':\x20'+_0x1445b0['value']+'\x20('+config['basecoin']+')\x0a',_0x182f7a+=_0x1445b0[_0x5a6736(0x202)]+':\x20'+_0x1445b0[_0x5a6736(0x165)]+'%\x20('+config['basecoin']+')\x0a',_0x182f7a+=_0x8f2168[_0x5a6736(0x17c)]+':\x20'+_0x8f2168[_0x5a6736(0x156)]+'\x20('+config['fiat']+')\x0a',_0x182f7a+=_0x8f2168[_0x5a6736(0x202)]+':\x20'+_0x8f2168[_0x5a6736(0x165)]+_0x5a6736(0x24b)+config[_0x5a6736(0x132)]+')\x0a',_0x182f7a+=_0x5a6736(0xfa),process[_0x5a6736(0x122)]({'telegrammsg':_0x182f7a},_0x1a9bb3=>{});}async function sendPortfolioTelegram(){const _0xb15abe=_0x33b6b2;if(!coinsLoaded){process[_0xb15abe(0x122)]({'telegrammsg':_0xb15abe(0x192)},_0x576494=>{});return;}let _0x11494f='';if(config[_0xb15abe(0xfc)])_0x11494f='<b>'+config['botname']+_0xb15abe(0x1ee);else _0x11494f=_0xb15abe(0x1f1)+botID+_0xb15abe(0x1ee);_0x11494f+=_0xb15abe(0x1b9),_0x11494f+=_0xb15abe(0x199),_0x11494f+=_0xb15abe(0x18d),_0x11494f+=_0xb15abe(0x199),currentCoins[_0xb15abe(0x1df)](_0xe5fc6c=>{const _0x4a5840=_0xb15abe;_0x11494f+=_0xe5fc6c[_0x4a5840(0x1cf)][_0x4a5840(0x174)](0x7)+'|\x20'+formatPad(_0xe5fc6c['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xe5fc6c[_0x4a5840(0x135)],0x2,0x6)+'|\x20'+formatPad(_0xe5fc6c[_0x4a5840(0x105)]*0x64,0x2,0x6)+'\x0a';}),_0x11494f+=_0xb15abe(0xfa),process[_0xb15abe(0x122)]({'telegrammsg':_0x11494f},_0x4987a9=>{});}function formatPad(_0x2a687b,_0x3ed2bc,_0x18b3c7){const _0x14d0c2=_0x33b6b2,_0x498dab=formatResultString(_0x2a687b,_0x3ed2bc);return _0x498dab?_0x498dab[_0x14d0c2(0x1a0)](_0x18b3c7):''[_0x14d0c2(0x1a0)](_0x18b3c7);}function logHistory(_0x2531e6,_0x439cc0,_0x127126=''){const _0x4e7245=_0x33b6b2;logger[_0x4e7245(0x1c3)](''+_0x439cc0);let _0xfd4d64={'time':getTimeStamp(),'type':_0x2531e6,'event':_0x439cc0};dbLogs[_0x4e7245(0x1bb)](_0x4e7245(0x1cc))[_0x4e7245(0x24c)](_0xfd4d64)[_0x4e7245(0xe8)]();if(_0x127126=='')_0x127126=_0x439cc0;proxyEmit(_0x4e7245(0x217),{'log':_0xfd4d64,'summary':_0x127126}),process[_0x4e7245(0x122)]({'telegram':{..._0xfd4d64,'botname':config[_0x4e7245(0x16f)],'showname':config[_0x4e7245(0xfc)]}},_0xff25fa=>{});}function emitHistory(_0x923a64={}){const _0x52cad5=_0x33b6b2;Object['keys'](_0x923a64)[_0x52cad5(0x1f6)]==0x0&&(_0x923a64={'type':[_0x52cad5(0x110),'event'],'event':'','page':0x1});if(_0x923a64[_0x52cad5(0xef)][_0x52cad5(0x159)](_0x52cad5(0x217)))_0x923a64[_0x52cad5(0xef)][_0x52cad5(0xe3)](_0x923a64[_0x52cad5(0xef)]['indexOf'](_0x52cad5(0x217)),0x1,_0x52cad5(0x24a),_0x52cad5(0x1ba),'success');if(dbLogs[_0x52cad5(0x21b)](_0x52cad5(0x1cc))[_0x52cad5(0x156)]()){let _0x347b3f=dbLogs[_0x52cad5(0x1bb)](_0x52cad5(0x1cc))[_0x52cad5(0x13d)](_0x387dea=>{const _0x25f0f4=_0x52cad5;if(_0x923a64[_0x25f0f4(0xef)][_0x25f0f4(0x1f6)]==0x0)return![];else return _0x923a64['type'][_0x25f0f4(0x159)](_0x387dea[_0x25f0f4(0xef)]);})[_0x52cad5(0x13d)](_0x4a7dbb=>{const _0x2866f9=_0x52cad5;if(_0x923a64['event']=='')return!![];else return _0x4a7dbb[_0x2866f9(0x217)]['toLowerCase']()[_0x2866f9(0x159)](_0x923a64[_0x2866f9(0x217)][_0x2866f9(0x224)]());})['sortBy'](_0x52cad5(0x172)),_0x87d277=_0x347b3f[_0x52cad5(0x156)]()[_0x52cad5(0x1f6)];_0x347b3f=_0x347b3f['reverse']()[_0x52cad5(0x15b)]((_0x923a64[_0x52cad5(0x11a)]-0x1)*logPageSize,_0x923a64[_0x52cad5(0x11a)]*logPageSize-0x1)[_0x52cad5(0x1d4)]()['value'](),proxyEmit(_0x52cad5(0x22c),{'logs':_0x347b3f,'total':_0x87d277});}else proxyEmit(_0x52cad5(0x22c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x13f6e7){const _0x55e99d=_0x33b6b2;if(dbLogs[_0x55e99d(0x21b)](_0x55e99d(0x1cc))[_0x55e99d(0x156)]()){const _0x14f4c7=dbLogs[_0x55e99d(0x1bb)](_0x55e99d(0x1cc))['sortBy']('time')[_0x55e99d(0x13d)](_0x35e1cc=>{const _0x57256e=_0x55e99d;return _0x35e1cc['type']==_0x57256e(0x110);})[_0x55e99d(0x156)]();dbLogs[_0x55e99d(0x1bb)](_0x55e99d(0x1cc))['remove']()[_0x55e99d(0xe8)](),dbLogs[_0x55e99d(0x1bb)](_0x55e99d(0x1cc))[_0x55e99d(0x124)](_0x14f4c7)[_0x55e99d(0xe8)](),emitHistory(_0x13f6e7);}}async function pauseBot(_0x370ac1=pauseBotInterval){const _0x2f7b80=_0x33b6b2,_0x48da3c=new Date()[_0x2f7b80(0x19d)]();if(!lastErrorShown||_0x48da3c-lastErrorShown>=_0x370ac1){lastErrorShown=_0x48da3c;!lastBotPause?(lastBotPause=_0x48da3c,consecutivePauses=0x1):(_0x48da3c-lastBotPause-_0x370ac1<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2f7b80(0x122)]({'stop':_0x2f7b80(0x227)},_0x30a2f7=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2f7b80(0x19d)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x370ac1),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1b3a93=_0x33b6b2;botPaused=!![],await sleep(0x3e8),process[_0x1b3a93(0x122)]({'stop':_0x1b3a93(0x152)},_0x3cee88=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xed4e3c,_0x2f178c){const _0xb547db=_0x33b6b2;if(botPaused)return;const _0x34a3f9=config[_0xb547db(0x228)]||_0xb547db(0x15c);if(_0x2f178c)logger[_0xb547db(0x20b)](_0xb547db(0x130)+_0x2f178c);const _0x377aaf=()=>{const _0x3ecc53=_0xb547db;loading[_0x3ecc53(0x24a)]=!![],emitLoadingProgress();};if(_0xed4e3c[_0xb547db(0x244)]()[_0xb547db(0x159)](_0xb547db(0x13e)))logHistory('error',_0x34a3f9+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x377aaf();else{if(_0xed4e3c[_0xb547db(0x244)]()[_0xb547db(0x159)](_0xb547db(0x211)))logHistory(_0xb547db(0x24a),_0x34a3f9+_0xb547db(0x1d7)),_0x377aaf();else _0xed4e3c[_0xb547db(0x244)]()[_0xb547db(0x159)]('AuthenticationError')?(logHistory(_0xb547db(0x24a),_0x34a3f9+_0xb547db(0xd4)),logHistory(_0xb547db(0x24a),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x377aaf()):await handleError(_0xed4e3c,null);}}async function handleError(_0x29a406,_0x46eae1,_0x1dbb17=''){const _0x383e0a=_0x33b6b2;if(botPaused)return;const _0x11839c=config[_0x383e0a(0x228)]||_0x383e0a(0x15c);if(_0x46eae1)logger[_0x383e0a(0x20b)]('Exception\x20thrown\x20in\x20'+_0x46eae1);if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)](_0x383e0a(0x138)))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0xbc)+pauseBotMsg),logger['debug'](_0x383e0a(0x1ec),_0x29a406),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)]('RateLimitExceeded'))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0x10a)+pauseBotMsg),logger[_0x383e0a(0x20b)](_0x383e0a(0x1ec),_0x29a406),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()['includes'](_0x383e0a(0x1da))||_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)]('OnMaintenance'))logHistory('error',_0x11839c+_0x383e0a(0x1b1)+pauseBotMsg),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)]('RequestTimeout'))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0x1e7)+pauseBotMsg),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)](_0x383e0a(0x145)))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0xd8)+pauseBotMsg),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x224)]()[_0x383e0a(0x159)](_0x383e0a(0x103))||_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x224)]()[_0x383e0a(0x159)](_0x383e0a(0xc9))){const _0x12b5cc=_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x224)]();let _0x7522df=![];if((config['exchange']==_0x383e0a(0x193)||config[_0x383e0a(0x228)]=='Binanceus')&&(_0x12b5cc['includes'](_0x383e0a(0x188)[_0x383e0a(0x224)]())||_0x12b5cc['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time'[_0x383e0a(0x224)]())))_0x7522df=!![];if(config[_0x383e0a(0x228)]=='Kucoin'&&_0x12b5cc[_0x383e0a(0x159)](_0x383e0a(0x127)['toLowerCase']()))_0x7522df=!![];if(config['exchange']=='Bybit'&&_0x12b5cc[_0x383e0a(0x159)]('invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param'[_0x383e0a(0x224)]()))_0x7522df=!![];if(config[_0x383e0a(0x228)]=='Bitget'&&_0x12b5cc[_0x383e0a(0x159)]('Invalid\x20ACCESS_TIMESTAMP'['toLowerCase']()))_0x7522df=!![];if((config[_0x383e0a(0x228)]=='Mexc'||config[_0x383e0a(0x228)]=='Mexc3')&&_0x12b5cc[_0x383e0a(0x159)](_0x383e0a(0x1c6)[_0x383e0a(0x224)]()))_0x7522df=!![];_0x7522df?logHistory(_0x383e0a(0x24a),_0x383e0a(0x213)+pauseBotMsg):logHistory(_0x383e0a(0x24a),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains'+pauseBotMsg),logger[_0x383e0a(0x20b)](_0x383e0a(0x1ec),_0x29a406[_0x383e0a(0x244)]()),await pauseBot();}else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)]('InvalidNonce'))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0x10e)+pauseBotMsg),logger[_0x383e0a(0x20b)]('Error\x20details:',_0x29a406),await pauseBot();else{if(_0x29a406 instanceof ccxt[_0x383e0a(0x139)])logHistory('error',_0x11839c+_0x383e0a(0x1dd)+pauseBotMsg),logger['debug'](_0x383e0a(0x1ec),_0x29a406),await pauseBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)](_0x383e0a(0x13e)))logHistory(_0x383e0a(0x24a),_0x11839c+_0x383e0a(0x169)),logHistory('error',_0x383e0a(0x1bc)),await killBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)](_0x383e0a(0x211)))logHistory('error',_0x11839c+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x383e0a(0x1bc)),await killBot();else{if(_0x29a406[_0x383e0a(0x244)]()['includes']('AuthenticationError'))logHistory('error',_0x11839c+_0x383e0a(0x146)),logHistory(_0x383e0a(0x24a),_0x383e0a(0x1bc)),await killBot();else{if(_0x29a406['toString']()['includes'](_0x383e0a(0x207)))logHistory('error',_0x11839c+_0x383e0a(0x10b)),logHistory(_0x383e0a(0x24a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x29a406[_0x383e0a(0x244)]()[_0x383e0a(0x159)](_0x383e0a(0x134)))logHistory(_0x383e0a(0x24a),_0x383e0a(0x1a3)+_0x1dbb17);else _0x29a406 instanceof ccxt[_0x383e0a(0x1d6)]?(logHistory(_0x383e0a(0x24a),_0x11839c+'\x20exchange\x20error'),logger[_0x383e0a(0x20b)](_0x383e0a(0x1ec),_0x29a406)):(logHistory(_0x383e0a(0x24a),_0x383e0a(0x1d8)+pauseBotMsg),logger[_0x383e0a(0x20b)]('Error\x20details:',_0x29a406),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x355004,_0x30dad2){return parseFloat(_0x355004['toFixed'](_0x30dad2));}function formatResultTruncate(_0x182d0a,_0x23e52d){const _0x213102=_0x33b6b2;let _0x1296c8=formatResultString(_0x182d0a,0xa),_0x22b14d=_0x1296c8['indexOf']('.');return _0x22b14d!=-0x1&&(_0x1296c8=_0x1296c8[_0x213102(0x15b)](0x0,_0x22b14d+_0x23e52d+0x1)),Number(_0x1296c8);}function formatResultString(_0x240fdb,_0x466f25){const _0x3d71c4=_0x33b6b2;let _0x134e03;if(!(''+_0x240fdb)[_0x3d71c4(0x159)]('e'))_0x134e03=+(Math[_0x3d71c4(0x222)](_0x240fdb+'e+'+_0x466f25)+'e-'+_0x466f25);else{let _0x34aef9=(''+_0x240fdb)[_0x3d71c4(0x24e)]('e'),_0x46200b='';+_0x34aef9[0x1]+_0x466f25>0x0&&(_0x46200b='+'),_0x134e03=+(Math[_0x3d71c4(0x222)](+_0x34aef9[0x0]+'e'+_0x46200b+(+_0x34aef9[0x1]+_0x466f25))+'e-'+_0x466f25);}return Number(_0x134e03)[_0x3d71c4(0x24f)](_0x466f25);}function getServerTime(){const _0x3c04d6=_0x33b6b2,_0x5e08ea=new Date();return _0x5e08ea[_0x3c04d6(0xed)]()+'/'+(_0x5e08ea[_0x3c04d6(0x1f0)]()+0x1)[_0x3c04d6(0x244)]()[_0x3c04d6(0x1a0)](0x2,'0')+'/'+_0x5e08ea[_0x3c04d6(0x1c0)]()['toString']()[_0x3c04d6(0x1a0)](0x2,'0')+'\x20'+_0x5e08ea[_0x3c04d6(0x137)]()[_0x3c04d6(0x244)]()[_0x3c04d6(0x1a0)](0x2,'0')+':'+_0x5e08ea[_0x3c04d6(0x1dc)]()[_0x3c04d6(0x244)]()[_0x3c04d6(0x1a0)](0x2,'0')+':'+_0x5e08ea['getSeconds']()[_0x3c04d6(0x244)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1cb354=_0x33b6b2,_0x3e24e4=shiftedTime();return _0x3e24e4[_0x1cb354(0xed)]()+'/'+(_0x3e24e4[_0x1cb354(0x1f0)]()+0x1)[_0x1cb354(0x244)]()[_0x1cb354(0x1a0)](0x2,'0')+'/'+_0x3e24e4[_0x1cb354(0x1c0)]()[_0x1cb354(0x244)]()[_0x1cb354(0x1a0)](0x2,'0')+'\x20'+_0x3e24e4[_0x1cb354(0x137)]()[_0x1cb354(0x244)]()[_0x1cb354(0x1a0)](0x2,'0')+':'+_0x3e24e4[_0x1cb354(0x1dc)]()[_0x1cb354(0x244)]()[_0x1cb354(0x1a0)](0x2,'0')+':'+_0x3e24e4[_0x1cb354(0x21c)]()[_0x1cb354(0x244)]()[_0x1cb354(0x1a0)](0x2,'0');}function getDate(){const _0xd62f33=_0x33b6b2,_0x71f9=shiftedTime();return _0x71f9[_0xd62f33(0xed)]()+'/'+(_0x71f9[_0xd62f33(0x1f0)]()+0x1)[_0xd62f33(0x244)]()[_0xd62f33(0x1a0)](0x2,'0')+'/'+_0x71f9[_0xd62f33(0x1c0)]()[_0xd62f33(0x244)]()['padStart'](0x2,'0');}function getHour(){const _0x78c9d5=_0x33b6b2,_0x62e486=shiftedTime();return _0x62e486[_0x78c9d5(0x137)]()[_0x78c9d5(0x244)]()[_0x78c9d5(0x1a0)](0x2,'0');}function sleep(_0x1d4cde){return new Promise(_0x3f7c22=>setTimeout(_0x3f7c22,_0x1d4cde));}function shiftedTime(){const _0x370b0b=_0x33b6b2,_0x15f286=new Date();let _0x586dcc=_0x15f286;if(config&&config['timeshift']!==0x0)_0x586dcc=fns['add'](_0x15f286,{'hours':config[_0x370b0b(0x18e)]});return _0x586dcc;}function timer(_0x2401e8){const _0x36296f=_0x33b6b2,_0x5beb8f=new Date();!lasttime?console[_0x36296f(0x1cb)](getTimeStamp()+_0x36296f(0x15a),_0x2401e8,_0x5beb8f):console['log'](getTimeStamp()+_0x36296f(0x15a),_0x2401e8,(_0x5beb8f-lasttime)/0x3e8),lasttime=_0x5beb8f;}