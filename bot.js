const _0x56398e=_0x2913;(function(_0x401c2d,_0x3685b6){const _0x22a73e=_0x2913,_0x237775=_0x401c2d();while(!![]){try{const _0x539b7c=-parseInt(_0x22a73e(0x2f5))/0x1+-parseInt(_0x22a73e(0x232))/0x2+parseInt(_0x22a73e(0x28e))/0x3+parseInt(_0x22a73e(0x2f7))/0x4*(parseInt(_0x22a73e(0x1fc))/0x5)+parseInt(_0x22a73e(0x256))/0x6*(parseInt(_0x22a73e(0x309))/0x7)+parseInt(_0x22a73e(0x2f3))/0x8+-parseInt(_0x22a73e(0x2a1))/0x9;if(_0x539b7c===_0x3685b6)break;else _0x237775['push'](_0x237775['shift']());}catch(_0x4a353b){_0x237775['push'](_0x237775['shift']());}}}(_0x4a69,0x22157));const _0x4dbade=function(){let _0x1ed36f=!![];return function(_0x15cc3e,_0x706c99){const _0xc71063=_0x1ed36f?function(){const _0x62f809=_0x2913;if(_0x706c99){const _0x222329=_0x706c99[_0x62f809(0x2a9)](_0x15cc3e,arguments);return _0x706c99=null,_0x222329;}}:function(){};return _0x1ed36f=![],_0xc71063;};}(),_0x4a3420=_0x4dbade(this,function(){const _0x4e4346=_0x2913;return _0x4a3420[_0x4e4346(0x1cd)]()[_0x4e4346(0x2ed)](_0x4e4346(0x2b2))[_0x4e4346(0x1cd)]()[_0x4e4346(0x24e)](_0x4a3420)[_0x4e4346(0x2ed)]('(((.+)+)+)+$');});_0x4a3420();'use strict';const ccxt=require(_0x56398e(0x21c))[_0x56398e(0x1c1)],low=require(_0x56398e(0x265)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x56398e(0x319)),Crypt=require(_0x56398e(0x221))[_0x56398e(0x2f1)],util=require('util'),argv=require('yargs/yargs')(process[_0x56398e(0x26a)][_0x56398e(0x227)](0x2))[_0x56398e(0x26a)];let exchange;global[_0x56398e(0x320)]={},global['change']={};const exceptions={'binance':[_0x56398e(0x307),_0x56398e(0x242),_0x56398e(0x1e7),_0x56398e(0x324),_0x56398e(0x217)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x56398e(0x1da)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x56398e(0x279))[_0x56398e(0x246)],botID=process['argv'][0x2]||_0x56398e(0x2dc),pattern=/^[0-9]{3}$/;!pattern[_0x56398e(0x261)](botID)&&(console['log'](_0x56398e(0x2e3)+botID+_0x56398e(0x25f)),killBot());const userID=process[_0x56398e(0x26a)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x56398e(0x1fa),logspath=userID?_0x56398e(0x295)+userID+'/':_0x56398e(0x295),loggerfile=fs[_0x56398e(0x1d9)](logspath+_0x56398e(0x2c6),{'flags':'a'});!fs[_0x56398e(0x2d5)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x56398e(0x2d5)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x56398e(0x1eb)+botID+_0x56398e(0x200),logfile=configpath+'bot-'+botID+_0x56398e(0x2d3),performancefile=configpath+_0x56398e(0x1eb)+botID+_0x56398e(0x1cc),coinresultsfile=configpath+_0x56398e(0x1eb)+botID+_0x56398e(0x21d),settingsfile=configpath+_0x56398e(0x285),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x56398e(0x2ce)]({'logs':[],'version':serverversion})[_0x56398e(0x289)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x56398e(0x289)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x56398e(0x2ce)]({'bot':[],'version':serverversion})[_0x56398e(0x289)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x56398e(0x268),'rsaStandard':_0x56398e(0x312)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x18e5db=>{const _0x474d6d=_0x56398e;console[_0x474d6d(0x275)](_0x18e5db);},'simple':_0x3158aa=>{const _0x46b4d7=_0x56398e;console[_0x46b4d7(0x275)](_0x3158aa),loggerfile[_0x46b4d7(0x289)](util[_0x46b4d7(0x230)](_0x3158aa)+'\x0a');},'full':async(_0x404624,_0x23e708='')=>{const _0x477173=_0x56398e;let _0x5e20f1;if(config[_0x477173(0x2b9)])_0x5e20f1=getTimeStamp()+':\x20'+config['botname']+_0x477173(0x1cb)+_0x404624;else _0x5e20f1=getTimeStamp()+_0x477173(0x2fa)+botID+_0x477173(0x1cb)+_0x404624;console[_0x477173(0x275)](_0x5e20f1),loggerfile[_0x477173(0x289)](util[_0x477173(0x230)](_0x5e20f1)+'\x0a'),_0x23e708&&(console[_0x477173(0x275)](_0x23e708),loggerfile[_0x477173(0x289)](util[_0x477173(0x230)](_0x23e708)+'\x0a'));},'debug':async(_0x2f070c,_0x2d8218='')=>{const _0xb4b62f=_0x56398e;let _0x2e1173;if(config[_0xb4b62f(0x2b9)])_0x2e1173=getTimeStamp()+':\x20'+config[_0xb4b62f(0x1f0)]+'\x20>\x20[DEBUG]\x20'+_0x2f070c;else _0x2e1173=getTimeStamp()+_0xb4b62f(0x2fa)+botID+_0xb4b62f(0x2c7)+_0x2f070c;if(debugging)console[_0xb4b62f(0x275)](_0x2e1173);loggerfile[_0xb4b62f(0x289)](util['format'](_0x2e1173)+'\x0a');if(_0x2d8218){if(debugging)console['log'](_0x2d8218);loggerfile[_0xb4b62f(0x289)](util[_0xb4b62f(0x230)](_0x2d8218)+'\x0a');}}};process['on'](_0x56398e(0x206),function(_0x127af4){const _0x2630cf=_0x56398e;logger[_0x2630cf(0x1e9)](_0x127af4);});settings['timeshift']!=config[_0x56398e(0x325)]&&updateTimeshift(settings[_0x56398e(0x325)]);process[_0x56398e(0x2cd)]({'started':_0x56398e(0x1f2)},_0xe50199=>{}),initializeProcessListeners();function proxyEmit(_0x2b90f1,_0x46a02f=null){const _0x48bfde=_0x56398e;process[_0x48bfde(0x2cd)]({'function':_0x2b90f1,'args':_0x46a02f},_0x454094=>{});}function initializeProcessListeners(){const _0x454fb5=_0x56398e;process['on'](_0x454fb5(0x1f1),_0x29b298=>{const _0x415e27=_0x454fb5;switch(Object[_0x415e27(0x310)](_0x29b298)[0x0]){case _0x415e27(0x325):_0x29b298[_0x415e27(0x325)]!=undefined&&(settings[_0x415e27(0x325)]=_0x29b298['timeshift'],updateTimeshift(settings[_0x415e27(0x325)]));break;case'function':switch(_0x29b298[_0x415e27(0x222)]){case'initclient':initclient();break;case _0x415e27(0x241):toggleBotMode();break;case'emitHistory':emitHistory(_0x29b298[_0x415e27(0x300)]);break;case _0x415e27(0x263):deleteHistoryAlerts(_0x29b298[_0x415e27(0x300)]);break;case'getPortfolio':getPortfolio(_0x29b298[_0x415e27(0x300)]);break;case _0x415e27(0x215):storeConfiguration(_0x29b298[_0x415e27(0x300)]);break;case _0x415e27(0x24b):storeHeadless(_0x29b298['args']);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x415e27(0x2b8):placeOrder(_0x29b298['args']);break;case _0x415e27(0x298):cancelLoading();break;case _0x415e27(0x283):showConfig();break;case _0x415e27(0x2bf):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x2b66c4=null,_0x19ee89=![]){const _0xcfcd80=_0x56398e;logger[_0xcfcd80(0x1f4)](_0xcfcd80(0x311)+(_0x2b66c4!=null)+_0xcfcd80(0x2cb)+_0x19ee89);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x19ee89)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0xcfcd80(0x314)]!=''&&config[_0xcfcd80(0x314)]!=_0xcfcd80(0x27d)){await initExchange();let _0x148a41=![];_0x148a41=await loadSymbols();if(_0x148a41){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x2b66c4),exchangeStopped=![];if(lastOrders['length']==0x0&&allOpenOrders[_0xcfcd80(0x237)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x2e9b38=_0x56398e;exchangeStopped=!![],await exchange[_0x2e9b38(0x1c7)]();}async function reloadExchange(){const _0x41f17b=_0x56398e;logger[_0x41f17b(0x1f4)](_0x41f17b(0x2c1));while(lockOrders!=ORDERS[_0x41f17b(0x1da)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x41f17b(0x1f4)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xab2d92=config[_0x56398e(0x322)],_0x25d34f=config[_0x56398e(0x314)],_0xce8432=config['apiSecret']){const _0x161c62=_0x56398e;exchange&&await stopExchange();!supportedExchanges()['includes'](_0xab2d92)&&(logger['full'](_0x161c62(0x2a0)+_0xab2d92+'\x20exchange'),killBot());const _0x3ea0b3=ccxt[_0xab2d92['toLowerCase']()];exchange=new _0x3ea0b3({'apiKey':_0x25d34f,'secret':_0xce8432,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x55caaa=_0x56398e;let _0x3d0405=config[_0x55caaa(0x328)]==_0x55caaa(0x1fe)?_0x55caaa(0x1fe):_0x55caaa(0x1e3),_0x114bd9=!allSymbols[_0x55caaa(0x29a)](_0x3d0405+_0x55caaa(0x1c4))?_0x55caaa(0x1db):'USD',_0x3ae09d=!allSymbols['includes'](_0x3d0405+_0x55caaa(0x22c))?_0x114bd9:'EUR';stablecoins={'eur':{'coin':''+_0x3d0405+_0x3ae09d,'symbol':_0x3d0405+'/'+_0x3ae09d},'usd':{'coin':''+_0x3d0405+_0x114bd9,'symbol':_0x3d0405+'/'+_0x114bd9}};}async function initwsCcxt(_0x4b462b){const _0x2f9523=_0x56398e;_0x4b462b==null&&(_0x4b462b=[],currentCoins[_0x2f9523(0x229)](_0x36ea6d=>{const _0x26b192=_0x2f9523;if(_0x36ea6d[_0x26b192(0x2cf)]!=config[_0x26b192(0x328)])_0x4b462b[_0x26b192(0x231)](_0x36ea6d[_0x26b192(0x1ca)]);}));if(!_0x4b462b[_0x2f9523(0x29a)](stablecoins[_0x2f9523(0x278)][_0x2f9523(0x1ca)]))_0x4b462b[_0x2f9523(0x231)](stablecoins[_0x2f9523(0x278)][_0x2f9523(0x1ca)]);if(!_0x4b462b[_0x2f9523(0x29a)](stablecoins[_0x2f9523(0x24a)][_0x2f9523(0x1ca)]))_0x4b462b[_0x2f9523(0x231)](stablecoins[_0x2f9523(0x24a)][_0x2f9523(0x1ca)]);if(!_0x4b462b['includes'](_0x2f9523(0x25b)+config[_0x2f9523(0x328)]))_0x4b462b[_0x2f9523(0x231)](_0x2f9523(0x25b)+config[_0x2f9523(0x328)]);loadCoins(_0x4b462b);const _0x428218=async _0x436d59=>{const _0x182ece=_0x2f9523,_0x146e56=await exchange[_0x182ece(0x262)](_0x436d59);global[_0x182ece(0x320)][noslash(_0x146e56['symbol'])]=_0x146e56['last'];while(!![]){if(!botPaused)try{const _0xd52100=await exchange[_0x182ece(0x1d5)](_0x436d59);global[_0x182ece(0x320)][noslash(_0xd52100[0x0][_0x182ece(0x1ca)])]=_0xd52100[0x0][_0x182ece(0x20c)],await sleep(0x3e8);}catch(_0x218e36){if(!exchangeStopped)await handleError(_0x218e36,_0x182ece(0x1d5),_0x436d59);}else await sleep(0x3e8);}},_0x14f4c9=async _0x123269=>{const _0x566841=_0x2f9523;while(!![]){if(!botPaused)try{const _0x5d9fed=await exchange['fetchTicker'](_0x123269);global[_0x566841(0x29e)][_0x5d9fed[_0x566841(0x1ca)]]=_0x5d9fed[_0x566841(0x1c6)],await sleep(0x2710);}catch(_0x241fd2){if(!exchangeStopped)await handleError(_0x241fd2,'fetchTickers',_0x123269);}else await sleep(0x3e8);}},_0x4cf791=async()=>{const _0x14ec2f=_0x2f9523;while(!![]){if(!botPaused)try{const _0x5e5f4c=await exchange[_0x14ec2f(0x233)]();_0x5e5f4c[_0x14ec2f(0x229)](_0x2f99d6=>{updateNumberCoinsCcxt(_0x2f99d6);});}catch(_0x1658df){if(!exchangeStopped)await handleError(_0x1658df,'watchOrders');}else await sleep(0x3e8);}};_0x4b462b[_0x2f9523(0x229)](async _0x4f9aca=>{_0x428218(_0x4f9aca),_0x14f4c9(_0x4f9aca);}),!wsEventsSet&&(wsEventsSet=!![],_0x4cf791());}async function loadSymbols(_0x9b81b2=config[_0x56398e(0x322)]){const _0x4636d4=_0x56398e;if(allSymbols)return!![];let _0x1de88f=![];try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x4636d4(0x1ec)][_0x4636d4(0x2aa)](_0x4a2848=>{const _0x3936c7=_0x4636d4;let _0xf9d431=![];const _0xd07ab7=exceptions[_0x9b81b2['toLowerCase']()]||[];return _0xd07ab7[_0x3936c7(0x229)](_0x11acd0=>{const _0x348a07=_0x3936c7;if(_0x4a2848[_0x348a07(0x29a)](_0x11acd0))_0xf9d431=!![];}),!_0xf9d431;}),_0x1de88f=!![];}catch(_0x21f2d6){_0x1de88f=![],handleError(_0x21f2d6,_0x4636d4(0x273));}return _0x1de88f;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x113b28=_0x56398e;proxyEmit(_0x113b28(0x21e),emittedConfiguration()),proxyEmit(_0x113b28(0x29f),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x113b28(0x294),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1803f0=getNormalizedPerformance();emitPerformance(_0x1803f0),await getStartingBalances(_0x1803f0);}async function toggleBotMode(){const _0x4cba67=_0x56398e;let _0x1d042d=dbConfig['get'](_0x4cba67(0x323))['find']({'botID':botID})['value']();if(_0x1d042d){const _0x55147a=!_0x1d042d[_0x4cba67(0x1ef)];dbConfig[_0x4cba67(0x26f)]('bot')[_0x4cba67(0x1c2)]({'botID':botID})[_0x4cba67(0x253)]({'headless':_0x55147a})[_0x4cba67(0x289)](),config[_0x4cba67(0x1ef)]=_0x55147a,proxyEmit(_0x4cba67(0x21e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x326098=_0x56398e;process[_0x326098(0x2cd)]({'updatebotmanager':!![]},_0x3b024a=>{});}async function loadCoins(_0x53653c){const _0x3a4c58=_0x56398e;let _0x1a08f6,_0x1a136e=0x0;loading[_0x3a4c58(0x327)]=[];let _0x1d1637=0x0;_0x53653c[_0x3a4c58(0x229)](_0x52c85f=>{const _0x393c65=_0x3a4c58;loading[_0x393c65(0x327)]['push'](_0x52c85f);}),loadingCanceled=![];let _0x49f21e=![];while(_0x1a08f6!=_0x53653c[_0x3a4c58(0x237)]){_0x1a08f6=0x0,_0x53653c['forEach'](_0x1fcc88=>{const _0x369460=_0x3a4c58;global[_0x369460(0x320)][noslash(_0x1fcc88)]&&(loading[_0x369460(0x327)]=loading[_0x369460(0x327)][_0x369460(0x2aa)](_0xfe140c=>_0xfe140c!=_0x1fcc88),_0x1a08f6++);}),loading[_0x3a4c58(0x305)]=Math[_0x3a4c58(0x1ea)](_0x1a08f6/_0x53653c[_0x3a4c58(0x237)]*0x64);loading[_0x3a4c58(0x305)]!=0x64&&(_0x1d1637>0x1e*0x5&&(loading[_0x3a4c58(0x2da)]=!![],emitLoadingProgress()),_0x1d1637>0x78*0x5&&!_0x49f21e&&(loading['cancel']=!![],emitLoadingProgress(),_0x49f21e=!![],logHistory(_0x3a4c58(0x321),_0x3a4c58(0x2ac)+loading[_0x3a4c58(0x327)][_0x3a4c58(0x22f)](',\x20')+_0x3a4c58(0x223)),logHistory('error',_0x3a4c58(0x27f)+loadCoinsRetryInterval/0xea60+_0x3a4c58(0x28d)),pidCoinReloading=setTimeout(()=>{const _0xa9e67a=_0x3a4c58;process['send']({'stop':_0xa9e67a(0x24f)},_0x1485f0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3a4c58(0x2fd)]=!![],emitLoadingProgress();break;}else _0x1a08f6!=_0x1a136e&&(_0x1a136e=_0x1a08f6,emitLoadingProgress()),_0x1d1637++,await sleep(0xc8);}_0x1a08f6==_0x53653c['length']&&(coinsLoaded=!![],_0x49f21e&&logHistory(_0x3a4c58(0x308),_0x3a4c58(0x1f8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1d58d5=_0x56398e;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x1d58d5(0x205)});}function emitLoadingProgress(){const _0x3dfecb=_0x56398e;proxyEmit(_0x3dfecb(0x274),loading);}async function getFiat(){const _0x5a0719=_0x56398e;let _0x5b2877=global[_0x5a0719(0x320)][stablecoins[_0x5a0719(0x278)][_0x5a0719(0x2cf)]],_0x17f4a4=global['ticker'][stablecoins[_0x5a0719(0x24a)][_0x5a0719(0x2cf)]];return{'eur':Number(_0x5b2877),'usd':Number(_0x17f4a4)};}function capitalize(_0x3b7dc5){const _0x3a2c18=_0x56398e;return _0x3b7dc5[_0x3a2c18(0x212)](0x0,0x1)[_0x3a2c18(0x25c)]()+_0x3b7dc5[_0x3a2c18(0x212)](0x1);}function supportedExchanges(){const _0x53068d=_0x56398e,_0x1cc1e7=[_0x53068d(0x291),_0x53068d(0x287),'Binancecoinm','Binanceus',_0x53068d(0x2e2),_0x53068d(0x2f8),'Bitget',_0x53068d(0x1e6),_0x53068d(0x20d),_0x53068d(0x271),_0x53068d(0x27e),_0x53068d(0x272),_0x53068d(0x2e9),_0x53068d(0x2b5),_0x53068d(0x211),_0x53068d(0x1e2),_0x53068d(0x260),_0x53068d(0x23c),'Gateio',_0x53068d(0x1ce),'Huobi',_0x53068d(0x2bc),_0x53068d(0x244),_0x53068d(0x26e),'Kucoin',_0x53068d(0x2d1),_0x53068d(0x1c5),'Okex',_0x53068d(0x257),_0x53068d(0x1ee)];return _0x1cc1e7;}function setStartDatePerformance(){const _0x28c7da=_0x56398e;if(config&&config[_0x28c7da(0x2ec)][0x0][_0x28c7da(0x22a)]['length']!=0x0){const _0x27ba3f=config['liquidity'][0x0][_0x28c7da(0x22a)];dbPerformance['get'](_0x28c7da(0x226))['find']({'date':config['startdate']})['assign']({'coins':_0x27ba3f})[_0x28c7da(0x289)]();}}async function recreateCoinResults(){const _0xf204f5=_0x56398e;let _0x3e1e8d,_0x224e22=[];try{const _0x405524=fns['format'](fns[_0xf204f5(0x276)](config[_0xf204f5(0x2e8)][_0xf204f5(0x26b)](/\//g,'-')),_0xf204f5(0x1d6));for(const _0x56779c of currentCoins){if(_0x56779c[_0xf204f5(0x2cf)]!=config[_0xf204f5(0x328)]){let _0x404666=0x0,_0x33f961,_0x553773;_0x3e1e8d=await getAllEventOrders(_0x56779c[_0xf204f5(0x1ca)]);if(_0x3e1e8d[_0xf204f5(0x237)]>0x0)_0x3e1e8d['forEach'](_0x281c41=>{const _0x10f057=_0xf204f5,_0x49468a=_0x56779c[_0x10f057(0x1ca)][_0x10f057(0x29a)](config['basecoin']+'/');_0x224e22[_0x10f057(0x231)]({'datetime':_0x281c41['datetime'],'coin':_0x56779c[_0x10f057(0x2cf)],'symbol':_0x56779c[_0x10f057(0x1ca)],'side':_0x281c41[_0x10f057(0x228)],'reverse':_0x49468a,'amount':formatResult(_0x281c41[_0x10f057(0x31e)],0x8),'filled':formatResult(_0x281c41['filled'],0x8),'price':formatResult(_0x281c41[_0x10f057(0x20c)],0x8)}),_0x404666=_0x281c41[_0x10f057(0x228)]==_0x10f057(0x1e4)?_0x404666+_0x281c41['filled']:_0x404666-_0x281c41[_0x10f057(0x31e)];if(!_0x553773)_0x553773=_0x281c41['price'];});_0x33f961=_0x56779c[_0xf204f5(0x2d0)]-_0x404666;let _0x4a5e21;config[_0xf204f5(0x2ec)][_0xf204f5(0x229)](_0x468540=>{const _0x450b79=_0xf204f5;!_0x4a5e21&&(_0x4a5e21=_0x468540['changes'][_0x450b79(0x1c2)](_0x114c11=>_0x114c11['coin']==_0x56779c[_0x450b79(0x2cf)]),_0x4a5e21&&(_0x33f961=_0x4a5e21[_0x450b79(0x2d0)],_0x553773=_0x4a5e21[_0x450b79(0x20c)]));});let _0x191fe6=dbCoinResults[_0xf204f5(0x26f)](_0xf204f5(0x2a4))[_0xf204f5(0x1c2)]({'coin':_0x56779c[_0xf204f5(0x2cf)]})[_0xf204f5(0x251)]();_0x191fe6={'coin':_0x56779c['coin'],'number':_0x33f961,'breakeven':_0x553773,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xf204f5(0x26f)](_0xf204f5(0x2a4))['find']({'coin':_0x56779c[_0xf204f5(0x2cf)]})['assign'](_0x191fe6)['write']();}}_0x224e22['sort']((_0x23befd,_0x202263)=>_0x23befd[_0xf204f5(0x22b)]>_0x202263[_0xf204f5(0x22b)]?0x1:_0x202263['datetime']>_0x23befd[_0xf204f5(0x22b)]?-0x1:0x0);let _0x55231e=0x0;for(let _0xc5152b of _0x224e22){await updateCoinResults(_0xc5152b,!![]);}}catch(_0x5b8355){await handleError(_0x5b8355,_0xf204f5(0x32a));}}async function getAllEventOrders(_0x320113){const _0x4c9a2b=_0x56398e;let _0x2c2bc4=[],_0x327147=dbLogs[_0x4c9a2b(0x26f)](_0x4c9a2b(0x225))[_0x4c9a2b(0x2aa)](_0x224ca7=>{const _0x17b736=_0x4c9a2b,_0x1ebf14=_0x224ca7[_0x17b736(0x207)][_0x17b736(0x21a)]();return _0x1ebf14['includes'](_0x320113[_0x17b736(0x21a)]())&&(_0x1ebf14[_0x17b736(0x29a)](_0x17b736(0x30e))&&_0x1ebf14[_0x17b736(0x29a)](_0x17b736(0x26c))||_0x1ebf14[_0x17b736(0x29a)](_0x17b736(0x31e))&&_0x1ebf14[_0x17b736(0x29a)](_0x17b736(0x26c)));})[_0x4c9a2b(0x290)](_0x4c9a2b(0x292))[_0x4c9a2b(0x251)]();return _0x327147[_0x4c9a2b(0x229)](_0x3a0ff3=>{const _0x34caa8=_0x4c9a2b,_0xaac3a4=_0x3a0ff3['event'][_0x34caa8(0x29a)](_0x34caa8(0x2e6))?_0x34caa8(0x2e6):_0x34caa8(0x1e4),_0x2761c6=/#([0-9]|\.)+\s/i,_0x440f7c=Number(_0x2761c6[_0x34caa8(0x208)](_0x3a0ff3[_0x34caa8(0x207)])[0x0][_0x34caa8(0x227)](0x1)),_0x35ae12=/@([0-9]|\.)+$/i,_0x142684=Number(_0x35ae12[_0x34caa8(0x208)](_0x3a0ff3[_0x34caa8(0x207)])[0x0][_0x34caa8(0x227)](0x1));_0x2c2bc4['push']({'datetime':_0x3a0ff3[_0x34caa8(0x292)],'coin':symbolToCoin(_0x320113),'symbol':_0x320113,'side':_0xaac3a4,'amount':_0x440f7c,'filled':_0x440f7c,'price':_0x142684});}),_0x2c2bc4;}async function getAllOrders(_0x61ee79,_0x2fe3ff){const _0xdad99d=_0x56398e;let _0x3ac891=[];while(_0x2fe3ff<exchange['milliseconds']()){const _0x28044a=0x1f4,_0x388094=await exchange[_0xdad99d(0x1d1)](_0x61ee79,_0x2fe3ff,_0x28044a);if(_0x388094['length'])_0x2fe3ff=_0x388094[_0x388094[_0xdad99d(0x237)]-0x1][_0xdad99d(0x23e)]+0x1,_0x3ac891=_0x3ac891['concat'](_0x388094);else break;}return _0x3ac891;}async function validate24hChanges(){const _0xcc27fd=_0x56398e;for(const _0x18af5b of currentCoins){if(_0x18af5b['coin']!=config[_0xcc27fd(0x328)]){let _0x30b630;_0x18af5b['reverse']?_0x30b630=formatResult((0x1/(global[_0xcc27fd(0x29e)][noslash(_0x18af5b['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x30b630=global['change'][noslash(_0x18af5b['symbol'])],_0x30b630<config[_0xcc27fd(0x20b)]&&(logHistory(_0xcc27fd(0x321),_0x18af5b[_0xcc27fd(0x2cf)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x30b630+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0xcc27fd(0x321),_0xcc27fd(0x258)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1164c6,_0x5e2743){const _0x430cab=_0x56398e;if(!_0x1164c6)return!![];const _0x298f9d=_0x5e2743['split']('.'),_0x482eda=_0x1164c6[_0x430cab(0x2d9)]('.');for(var _0x448ea7=0x0;_0x448ea7<_0x482eda[_0x430cab(0x237)];_0x448ea7++){const _0x4fd438=~~_0x482eda[_0x448ea7],_0x4b79bd=~~_0x298f9d[_0x448ea7];if(_0x4fd438<_0x4b79bd)return!![];if(_0x4fd438>_0x4b79bd)return![];}return![];}async function oneTimeMigration(){const _0x9c3bf9=_0x56398e;let _0x2bfd8c=dbLogs['get'](_0x9c3bf9(0x246))[_0x9c3bf9(0x251)]();if(isOlderVersion(_0x2bfd8c,_0x9c3bf9(0x31b))){let _0x6c75=[];const _0x2bd041=dbLogs[_0x9c3bf9(0x26f)](_0x9c3bf9(0x225))[_0x9c3bf9(0x251)]();_0x2bd041[_0x9c3bf9(0x229)](_0x2af447=>{const _0x47aae6=_0x9c3bf9;_0x6c75[_0x47aae6(0x231)]({'time':_0x2af447[_0x47aae6(0x292)],'type':_0x2af447['type'],'event':_0x2af447[_0x47aae6(0x207)]});}),dbLogs['get']('logs')['assign'](_0x6c75)[_0x9c3bf9(0x289)]();}let _0x3a328a=dbConfig[_0x9c3bf9(0x26f)](_0x9c3bf9(0x246))[_0x9c3bf9(0x251)]();if(isOlderVersion(_0x3a328a,_0x9c3bf9(0x31b))){let _0x418714=dbConfig[_0x9c3bf9(0x26f)](_0x9c3bf9(0x323))[_0x9c3bf9(0x1c2)]({'botID':botID})[_0x9c3bf9(0x251)]();if(_0x418714){let _0xdd8020=[];_0x418714['portfolio']['forEach'](_0x585ba3=>{const _0x5b2e91=_0x9c3bf9;_0xdd8020[_0x5b2e91(0x231)]({'coin':_0x585ba3[_0x5b2e91(0x2cf)],'number':_0x585ba3[_0x5b2e91(0x2ba)],'price':_0x585ba3[_0x5b2e91(0x250)]}),delete _0x585ba3['startnumber'],delete _0x585ba3[_0x5b2e91(0x250)];});if(_0xdd8020[_0x9c3bf9(0x237)]!==0x0)fs['writeFile'](configbackuppath+(_0x9c3bf9(0x2d6)+botID+'.json'),JSON[_0x9c3bf9(0x1e1)](_0xdd8020,null,0x4),function(_0x16b24a){if(_0x16b24a){}});const _0x30dc9b=(_0x269fa5,_0x3fba99)=>{const _0x49a132=_0x9c3bf9;let _0x16926c=[];_0x3fba99['forEach'](_0x11eb41=>{const _0x161685=_0x2913,_0x1a7888=_0x269fa5[_0x161685(0x1c2)](_0x3c0e16=>_0x3c0e16['coin']==_0x11eb41['coin']);if(!_0x1a7888)_0x16926c[_0x161685(0x231)](_0x11eb41);});let _0x3cddf5=[];return _0x269fa5[_0x49a132(0x229)](_0x20e335=>{const _0x216e66=_0x49a132,_0x3d5001=_0x3fba99[_0x216e66(0x1c2)](_0x819861=>_0x819861[_0x216e66(0x2cf)]==_0x20e335[_0x216e66(0x2cf)]);if(!_0x3d5001||_0x3d5001[_0x216e66(0x2d0)]==0x0&&_0x20e335[_0x216e66(0x2d0)]!=0x0)_0x3cddf5[_0x216e66(0x231)](_0x20e335);}),{'missingDay1':_0x16926c,'notInDay2':_0x3cddf5};},_0x36131f=dbPerformance[_0x9c3bf9(0x26f)](_0x9c3bf9(0x226))['cloneDeep']()['value']();if(_0x36131f[_0x9c3bf9(0x237)]>0x1){const {missingDay1:_0x460395,notInDay2:_0x4b0ba1}=_0x30dc9b(_0xdd8020,_0x36131f[0x1][_0x9c3bf9(0x2a4)]);_0xdd8020=[..._0xdd8020,..._0x460395],_0x4b0ba1[_0x9c3bf9(0x229)](_0x32376a=>{const _0x598f6d=_0x9c3bf9;let _0x58161b=_0xdd8020['findIndex'](_0x4eadbe=>_0x4eadbe['coin']==_0x32376a[_0x598f6d(0x2cf)]);_0x58161b!=-0x1&&_0xdd8020['splice'](_0x58161b,0x1);});}_0xdd8020[_0x9c3bf9(0x2d7)]((_0x43f8e3,_0x1a9613)=>_0x43f8e3[_0x9c3bf9(0x2cf)]>_0x1a9613[_0x9c3bf9(0x2cf)]?0x1:_0x1a9613[_0x9c3bf9(0x2cf)]>_0x43f8e3[_0x9c3bf9(0x2cf)]?-0x1:0x0);let _0x17c1ec=[{'date':_0x418714[_0x9c3bf9(0x2e8)],'changes':_0xdd8020}];_0x36131f[_0x9c3bf9(0x237)]>0x2&&_0x36131f[_0x9c3bf9(0x229)]((_0x1e4526,_0x2f24e2)=>{const _0x46fbbc=_0x9c3bf9;if(_0x2f24e2>0x0&&_0x2f24e2<_0x36131f[_0x46fbbc(0x237)]-0x1){const {missingDay1:_0x4313c7,notInDay2:_0xc352fb}=_0x30dc9b(_0x36131f[_0x2f24e2]['coins'],_0x36131f[_0x2f24e2+0x1][_0x46fbbc(0x2a4)]);_0xdd8020=[],(_0x4313c7[_0x46fbbc(0x237)]!=0x0||_0xc352fb[_0x46fbbc(0x237)]!=0x0)&&(_0x4313c7[_0x46fbbc(0x237)]!=0x0&&_0xdd8020[_0x46fbbc(0x231)](..._0x4313c7),_0xc352fb['length']!=0x0&&(_0xc352fb['forEach'](_0x2045ad=>{const _0x1f234a=_0x46fbbc;_0x2045ad[_0x1f234a(0x2d0)]=-_0x2045ad[_0x1f234a(0x2d0)];}),_0xdd8020['push'](..._0xc352fb)),_0xdd8020[_0x46fbbc(0x2d7)]((_0x3261f0,_0x59e720)=>_0x3261f0['coin']>_0x59e720[_0x46fbbc(0x2cf)]?0x1:_0x59e720['coin']>_0x3261f0[_0x46fbbc(0x2cf)]?-0x1:0x0),_0x17c1ec[_0x46fbbc(0x231)]({'date':_0x36131f[_0x2f24e2+0x1][_0x46fbbc(0x29d)],'changes':_0xdd8020}));}}),dbConfig[_0x9c3bf9(0x26f)](_0x9c3bf9(0x323))[_0x9c3bf9(0x1c2)]({'botID':botID})['assign']({..._0x418714,'liquidity':_0x17c1ec})[_0x9c3bf9(0x289)]();}}if(isOlderVersion(_0x3a328a,_0x9c3bf9(0x22d))){let _0x89341a=dbConfig[_0x9c3bf9(0x26f)](_0x9c3bf9(0x323))[_0x9c3bf9(0x1c2)]({'botID':botID})[_0x9c3bf9(0x251)]();if(_0x89341a){const _0x20b7fa=_0x89341a[_0x9c3bf9(0x322)],_0x1190df=_0x20b7fa?capitalize(_0x20b7fa):_0x9c3bf9(0x287);dbConfig['get']('bot')['find']({'botID':botID})[_0x9c3bf9(0x253)]({'exchange':_0x1190df})['write']();}}config=getConfiguration(botID);let _0x2bfc68=dbPerformance[_0x9c3bf9(0x26f)](_0x9c3bf9(0x246))['value']();isOlderVersion(_0x2bfc68,_0x9c3bf9(0x31b))&&setStartDatePerformance();let _0x16ccb8=dbCoinResults[_0x9c3bf9(0x26f)]('version')['value']();if(isOlderVersion(_0x16ccb8,_0x9c3bf9(0x243))){let _0x28f5ab=dbCoinResults['get'](_0x9c3bf9(0x2a4))['value']();if(_0x28f5ab[_0x9c3bf9(0x237)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1c7fd0=_0x56398e;dbConfig[_0x1c7fd0(0x1c8)]('version',serverversion)[_0x1c7fd0(0x289)](),dbPerformance[_0x1c7fd0(0x1c8)](_0x1c7fd0(0x246),serverversion)[_0x1c7fd0(0x289)](),dbLogs[_0x1c7fd0(0x1c8)](_0x1c7fd0(0x246),serverversion)[_0x1c7fd0(0x289)](),dbCoinResults[_0x1c7fd0(0x1c8)](_0x1c7fd0(0x246),serverversion)[_0x1c7fd0(0x289)]();}function getConfiguration(_0x565937){const _0xa36f6c=_0x56398e;let _0x5424d6=dbConfig['get'](_0xa36f6c(0x323))[_0xa36f6c(0x1c2)]({'botID':_0x565937})[_0xa36f6c(0x251)]();if(_0x5424d6){let _0x322d29=![];typeof _0x5424d6['threshold']==_0xa36f6c(0x1f3)&&(_0x5424d6={..._0x5424d6,'threshold':Number(_0x5424d6[_0xa36f6c(0x1d8)])},_0x322d29=!![]),_0x5424d6['change24h']==null&&(_0x5424d6={..._0x5424d6,'change24h':-0x14},_0x322d29=!![]),_0x322d29&&(_0x5424d6={'botID':_0x5424d6['botID'],'exchange':_0x5424d6[_0xa36f6c(0x322)],'apiKey':_0x5424d6[_0xa36f6c(0x314)],'apiSecret':_0x5424d6[_0xa36f6c(0x282)],'basecoin':_0x5424d6['basecoin'],'botname':_0x5424d6[_0xa36f6c(0x1f0)],'showname':_0x5424d6[_0xa36f6c(0x2b9)],'threshold':_0x5424d6[_0xa36f6c(0x1d8)],'ordertype':_0x5424d6[_0xa36f6c(0x30a)],'timeout':_0x5424d6[_0xa36f6c(0x2da)],'startdate':_0x5424d6[_0xa36f6c(0x2e8)],'recreate':_0x5424d6[_0xa36f6c(0x2c3)],'timeshift':_0x5424d6[_0xa36f6c(0x325)],'headless':_0x5424d6[_0xa36f6c(0x1ef)],'cooldown':_0x5424d6[_0xa36f6c(0x2af)],'change24h':_0x5424d6['change24h'],'emojibuy':_0x5424d6[_0xa36f6c(0x2b4)],'emojisell':_0x5424d6[_0xa36f6c(0x23b)],'portfolio':_0x5424d6[_0xa36f6c(0x2a5)],'liquidity':_0x5424d6[_0xa36f6c(0x2ec)]},dbConfig[_0xa36f6c(0x26f)](_0xa36f6c(0x323))[_0xa36f6c(0x2d8)]()['write'](),dbConfig[_0xa36f6c(0x26f)]('bot')[_0xa36f6c(0x231)](_0x5424d6)[_0xa36f6c(0x289)]());}else _0x5424d6={'botID':_0x565937,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0xa36f6c(0x2c4)+_0x565937,'showname':![],'threshold':0x3,'ordertype':_0xa36f6c(0x30e),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xa36f6c(0x325)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x5424d6;}function emittedConfiguration(){const _0xef83dd=_0x56398e;let _0x5ae10e;if(config[_0xef83dd(0x314)]=='')_0x5ae10e={...config,'configstate':_0xef83dd(0x2ea)};else config['apiKey']==_0xef83dd(0x27d)?_0x5ae10e={...config,'configstate':'recovery'}:_0x5ae10e={...config,'apiKey':_0xef83dd(0x1bf),'apiSecret':'************'};return _0x5ae10e;}function getSettings(){const _0x35759=_0x56398e;return dbSettings['get'](_0x35759(0x31f))[_0x35759(0x251)]();}function getSecure(){const _0x3cdd9c=_0x56398e;return dbSecure[_0x3cdd9c(0x26f)]('secure')[_0x3cdd9c(0x251)]()||{};}function updateTimeshift(_0x37ee91){const _0x770e47=_0x56398e;let _0x4128cc=dbConfig[_0x770e47(0x26f)]('bot')['find']({'botID':botID})[_0x770e47(0x251)]();_0x4128cc&&dbConfig[_0x770e47(0x26f)](_0x770e47(0x323))['find']({'botID':botID})[_0x770e47(0x253)]({'timeshift':_0x37ee91})[_0x770e47(0x289)](),config[_0x770e47(0x325)]=_0x37ee91,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x25367d){const _0x4061a1=_0x56398e;let _0x437dc5=[],_0x2c846a=[];_0x25367d['portfolio']['forEach'](_0x1a29ce=>{const _0x5a5b25=_0x2913;if(!_0x1a29ce[_0x5a5b25(0x249)]&&_0x1a29ce[_0x5a5b25(0x2cf)]!=_0x25367d['basecoin'])_0x2c846a[_0x5a5b25(0x231)](_0x1a29ce[_0x5a5b25(0x1ca)]);});currentCoins[_0x4061a1(0x237)]==0x0?_0x437dc5=_0x2c846a:_0x2c846a[_0x4061a1(0x229)](_0x4190ef=>{const _0x441dd8=_0x4061a1,_0x162d63=currentCoins[_0x441dd8(0x1c2)](_0x1a5414=>_0x1a5414[_0x441dd8(0x1ca)]==_0x4190ef);!_0x162d63&&_0x437dc5[_0x441dd8(0x231)](_0x4190ef);});let _0x4393c4=dbConfig[_0x4061a1(0x26f)](_0x4061a1(0x323))[_0x4061a1(0x1c2)]({'botID':botID})[_0x4061a1(0x251)]();_0x25367d={..._0x25367d,'apiKey':crypt[_0x4061a1(0x2a7)](secure[_0x4061a1(0x281)],_0x25367d[_0x4061a1(0x314)])[_0x4061a1(0x1f1)],'apiSecret':crypt[_0x4061a1(0x2a7)](secure[_0x4061a1(0x281)],_0x25367d['apiSecret'])['message']};if(_0x4393c4){if(_0x25367d['apiKey']==_0x4061a1(0x1bf))_0x25367d[_0x4061a1(0x314)]=config[_0x4061a1(0x314)];if(_0x25367d[_0x4061a1(0x282)]==_0x4061a1(0x1bf))_0x25367d[_0x4061a1(0x282)]=config[_0x4061a1(0x282)];dbConfig[_0x4061a1(0x26f)](_0x4061a1(0x323))[_0x4061a1(0x1c2)]({'botID':botID})[_0x4061a1(0x253)](_0x25367d)[_0x4061a1(0x289)]();}else dbConfig[_0x4061a1(0x26f)](_0x4061a1(0x323))[_0x4061a1(0x231)](_0x25367d)['write'](),process[_0x4061a1(0x2cd)]({'status':'enabled','live':_0x4061a1(0x1f2)},_0x13cb8a=>{});config={..._0x25367d},setStartDatePerformance(),process['send']({'botname':_0x25367d[_0x4061a1(0x1f0)]},_0x365d5d=>{}),updateBotManager();const _0x2d38a4=getNormalizedPerformance();getStartingBalances(_0x2d38a4),emitPerformance(_0x2d38a4),proxyEmit(_0x4061a1(0x2d2)),await initCoinResults(),reset(_0x437dc5);}async function storeHeadless(_0x30c0eb){const _0x2d5e9d=_0x56398e,_0x27ea3d={...config,'headless':_0x30c0eb['headless']};let _0x53d3b0=dbConfig['get'](_0x2d5e9d(0x323))['find']({'botID':botID})['value']();_0x53d3b0&&dbConfig[_0x2d5e9d(0x26f)](_0x2d5e9d(0x323))[_0x2d5e9d(0x1c2)]({'botID':botID})[_0x2d5e9d(0x253)](_0x27ea3d)[_0x2d5e9d(0x289)](),config={..._0x27ea3d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x5b29dd){const _0x282d46=_0x56398e;return _0x5b29dd[_0x282d46(0x26b)]('/','');}async function updateNumberCoinsCcxt(_0x42a1e7){const _0x4ba340=_0x56398e;logger['debug'](_0x4ba340(0x2ff)+_0x42a1e7[_0x4ba340(0x1ca)]+_0x4ba340(0x2cb)+_0x42a1e7[_0x4ba340(0x2db)]+_0x4ba340(0x2cb)+_0x42a1e7['id']+_0x4ba340(0x2cb)+_0x42a1e7[_0x4ba340(0x280)]);let _0x4867f8=_0x42a1e7[_0x4ba340(0x2db)],_0x293e=![];currentCoins[_0x4ba340(0x229)](_0x307e41=>{const _0x367fff=_0x4ba340;_0x307e41[_0x367fff(0x1ca)]==_0x42a1e7['symbol']&&(_0x293e=!![]);});if(!_0x293e)return;const _0x1eee66=currentCoins[_0x4ba340(0x1c2)](_0x1086cb=>_0x1086cb['symbol']==_0x42a1e7[_0x4ba340(0x1ca)]),_0x157773=_0x5d143a=>{const _0x1b874c=_0x4ba340;if(_0x1eee66)_0x1eee66[_0x1b874c(0x30d)]=_0x5d143a;};if(_0x4867f8=='open')_0x157773('open');else{if(_0x4867f8==_0x4ba340(0x316))_0x157773(_0x4ba340(0x316)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x4867f8==_0x4ba340(0x27b)){logger['debug'](_0x4ba340(0x1c9)+_0x42a1e7[_0x4ba340(0x1ca)]+_0x4ba340(0x2cb)+_0x42a1e7['filled']+_0x4ba340(0x2cb)+_0x42a1e7['id']+_0x4ba340(0x2cb)+_0x42a1e7[_0x4ba340(0x280)]);let _0x224043=![];if(lastOrders)lastOrders[_0x4ba340(0x229)](async _0x3b6add=>{const _0x43f627=_0x4ba340;if(_0x3b6add[_0x43f627(0x2fc)]==_0x42a1e7[_0x43f627(0x280)]){logger[_0x43f627(0x1f4)](_0x43f627(0x1dc)+_0x42a1e7[_0x43f627(0x280)]),_0x224043=!![];if(_0x3b6add[_0x43f627(0x31e)]==0x0){logger[_0x43f627(0x1f4)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x42a1e7[_0x43f627(0x280)]),_0x3b6add[_0x43f627(0x20c)]=_0x42a1e7[_0x43f627(0x304)],_0x3b6add[_0x43f627(0x31e)]=_0x42a1e7['filled'],_0x3b6add['fee']={'cost':_0x42a1e7[_0x43f627(0x31a)][_0x43f627(0x2e4)],'currency':_0x42a1e7['fee'][_0x43f627(0x2f2)]},_0x157773('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x3b6add);}}});!_0x224043&&(logger[_0x4ba340(0x1f4)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x42a1e7['id']),_0x157773(_0x4ba340(0x31e)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x1f9164=JSON['parse'](lastBalances['portfolio']);const _0x28cb17=_0x1f9164[_0x4ba340(0x1c2)](_0x17ee10=>_0x17ee10[_0x4ba340(0x1ca)]==_0x42a1e7[_0x4ba340(0x1ca)]);if(_0x28cb17){if(_0x4867f8==_0x4ba340(0x239))_0x28cb17[_0x4ba340(0x30d)]=_0x28cb17[_0x4ba340(0x30d)]==_0x4ba340(0x31e)?_0x4ba340(0x31e):_0x4ba340(0x239);else{if(_0x4867f8==_0x4ba340(0x316))_0x28cb17[_0x4ba340(0x30d)]=_0x28cb17[_0x4ba340(0x30d)]=='filled'?_0x4ba340(0x31e):_0x4ba340(0x316);else _0x4867f8==_0x4ba340(0x27b)&&(_0x28cb17[_0x4ba340(0x30d)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x4ba340(0x1e1)](_0x1f9164)},proxyEmit(_0x4ba340(0x294),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x45a297=![],_0x46b5f5=!![],_0x63bea6=config['basecoin']){const _0x42308d=_0x56398e;let _0x5ed13f,_0xd1920f=[],_0x1462d7=[],_0x466c51=[];try{_0x5ed13f=await exchange['fetchBalance'](),mybalances=_0x5ed13f['total'];if(!_0x46b5f5)for(const [_0x5bab14,_0x5a93fb]of Object[_0x42308d(0x267)](mybalances)){_0x466c51[_0x42308d(0x231)](_0x5bab14);}else config[_0x42308d(0x2a5)][_0x42308d(0x229)](_0x51f71f=>{const _0x47b691=_0x42308d;if(!_0x51f71f[_0x47b691(0x249)])_0x466c51[_0x47b691(0x231)](_0x51f71f['coin']);});if(_0x63bea6=='')for(const [_0x52aeb6,_0x1808d9]of Object[_0x42308d(0x267)](mybalances)){_0x1808d9[_0x42308d(0x1cd)]()!=0x0&&_0x1462d7[_0x42308d(0x231)]({'coin':_0x52aeb6});}else{if(_0x45a297)await getOpenOrders();let _0x541134=![];for(const [_0x449b21,_0x5145df]of Object[_0x42308d(0x267)](mybalances)){if(_0x466c51[_0x42308d(0x29a)](_0x449b21)){const _0x5e7e06=config[_0x42308d(0x2a5)][_0x42308d(0x1c2)](_0x771c32=>_0x771c32[_0x42308d(0x2cf)]==_0x449b21),_0xaf48e7=_0x449b21+'/'+_0x63bea6,_0x1a0da9=_0x63bea6+'/'+_0x449b21,_0x97cbaf=currentCoins[_0x42308d(0x1c2)](_0xbd2b68=>_0xbd2b68[_0x42308d(0x2cf)]==_0x449b21);_0x541134=![];_0x45a297&&(_0x541134=allOpenOrders[_0x42308d(0x1c2)](_0x53579e=>_0x53579e[_0x42308d(0x1ca)]==_0x5e7e06[_0x42308d(0x1ca)]));if((_0x5145df[_0x42308d(0x1cd)]()!=0x0||_0x5e7e06)&&(allSymbols['includes'](_0xaf48e7)||_0x449b21==_0x63bea6))_0x449b21!=_0x63bea6&&_0xd1920f['push'](_0xaf48e7),_0x1462d7['push']({'coin':_0x449b21,'symbol':_0xaf48e7,'reverse':![],'number':Math[_0x42308d(0x2fe)](_0x5145df+(_0x5e7e06&&_0x5e7e06['offset']||0x0),0x0),'orderstatus':_0x45a297?_0x541134?_0x42308d(0x239):'none':_0x97cbaf?_0x97cbaf[_0x42308d(0x30d)]:_0x42308d(0x1f5)});else(_0x5145df[_0x42308d(0x1cd)]()!=0x0||_0x5e7e06)&&allSymbols[_0x42308d(0x29a)](_0x1a0da9)&&(_0x449b21!=_0x63bea6&&_0xd1920f[_0x42308d(0x231)](_0x1a0da9),_0x1462d7[_0x42308d(0x231)]({'coin':_0x449b21,'symbol':_0x1a0da9,'reverse':!![],'number':Math['max'](_0x5145df+(_0x5e7e06&&_0x5e7e06[_0x42308d(0x245)]||0x0),0x0),'orderstatus':_0x45a297?_0x541134?_0x42308d(0x239):'none':_0x97cbaf?_0x97cbaf[_0x42308d(0x30d)]:_0x42308d(0x1f5)}));}}}}catch(_0x1eb1bf){if(!_0x46b5f5)handleErrorNoStop(_0x1eb1bf,_0x42308d(0x247));else await handleError(_0x1eb1bf,_0x42308d(0x247));}return _0x1462d7;}async function getCoinNumber(_0x4941c8){const _0x916874=_0x56398e;let _0x2aef17;try{const _0x568358=await exchange['fetchBalance']();_0x2aef17=_0x568358[_0x916874(0x2bb)][_0x4941c8];}catch(_0x5379be){await handleError(_0x5379be,'getCoinNumber()');}return _0x2aef17;}async function getOpenOrders(){const _0x309c52=_0x56398e;let _0x10c7af;allOpenOrders=[];try{for(const _0x4e621d of config[_0x309c52(0x2a5)]){!_0x4e621d[_0x309c52(0x249)]&&_0x4e621d[_0x309c52(0x2cf)]!=config['basecoin']&&(_0x10c7af=await exchange['fetchOpenOrders'](_0x4e621d[_0x309c52(0x1ca)]),_0x10c7af['length']>0x0&&allOpenOrders[_0x309c52(0x231)](_0x10c7af[0x0]));}}catch(_0x4876c5){await handleError(_0x4876c5,'getOpenOrders()');}}async function handleOpenOrders(_0x4ae697=0x0){const _0x1f7ec6=_0x56398e;allOpenOrders[_0x1f7ec6(0x237)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x4ae697==0x0?(logger[_0x1f7ec6(0x1f4)](_0x1f7ec6(0x317)),_0x4ae697++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function getPortfolio(_0x2db1d1){const _0x38a873=_0x56398e;let _0x2731e7=[],_0xcd0938=[],_0xd25083,_0x1095dc=[],_0x265b11=![];if(_0x2db1d1['apiKey']==='************'||_0x2db1d1['apiSecret']===_0x38a873(0x1bf))_0x265b11=!![];else{await initExchange(_0x2db1d1['exchange'],_0x2db1d1[_0x38a873(0x314)],_0x2db1d1['apiSecret']);try{_0x265b11=await loadSymbols(_0x2db1d1['exchange']);}catch(_0x1b9dea){_0x265b11=![],handleErrorNoStop(_0x1b9dea,_0x38a873(0x273));}}if(_0x265b11){_0x1095dc=await getCoins(![],![],_0x2db1d1[_0x38a873(0x328)]);if(_0x1095dc===![])proxyEmit(_0x38a873(0x2a5),![]);else{if(_0x2db1d1[_0x38a873(0x328)]=='')proxyEmit(_0x38a873(0x2a5),_0x1095dc);else{_0x1095dc[_0x38a873(0x229)](_0x100703=>{const _0x5d7959=_0x38a873;if(_0x100703[_0x5d7959(0x2cf)]!=_0x2db1d1['basecoin'])_0x2731e7['push'](_0x100703[_0x5d7959(0x1ca)]);});try{_0xcd0938=await exchange[_0x38a873(0x1d4)](_0x2731e7);}catch(_0x5bdddc){await handleError(_0x5bdddc,'getPortfolio()');}_0x1095dc['forEach'](_0x13669d=>{const _0x53f120=_0x38a873;_0x13669d[_0x53f120(0x2cf)]!=_0x2db1d1[_0x53f120(0x328)]?_0xd25083=_0x13669d[_0x53f120(0x2f6)]?0x1/_0xcd0938[_0x13669d[_0x53f120(0x1ca)]][_0x53f120(0x28c)]:_0xcd0938[_0x13669d[_0x53f120(0x1ca)]][_0x53f120(0x28c)]:_0xd25083=0x1,_0x13669d['price']=formatResult(_0xd25083,0x8);}),proxyEmit(_0x38a873(0x2a5),_0x1095dc);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x4cb7f3){const _0x3af26c=_0x56398e;let _0x365cab=!![];const _0x4c25b8=!_0x4cb7f3[_0x3af26c(0x2f6)]?markets[_0x4cb7f3['symbol']]['limits'][_0x3af26c(0x252)][_0x3af26c(0x1d2)]:markets[_0x4cb7f3[_0x3af26c(0x1ca)]][_0x3af26c(0x2f0)][_0x3af26c(0x2e4)][_0x3af26c(0x1d2)],_0x3d0cb4=!_0x4cb7f3[_0x3af26c(0x2f6)]?markets[_0x4cb7f3[_0x3af26c(0x1ca)]][_0x3af26c(0x2f0)][_0x3af26c(0x2e4)]['min']:markets[_0x4cb7f3[_0x3af26c(0x1ca)]]['limits']['amount'][_0x3af26c(0x1d2)],_0x1bf8c7=markets[_0x4cb7f3[_0x3af26c(0x1ca)]][_0x3af26c(0x2ab)][_0x3af26c(0x252)];_0x4cb7f3[_0x3af26c(0x20a)]=formatResultTruncate(_0x4cb7f3[_0x3af26c(0x20a)],_0x1bf8c7);if(Math[_0x3af26c(0x23d)](_0x4cb7f3['trade'])<_0x4c25b8)_0x365cab=![];if(Math['abs'](_0x4cb7f3['trade'])*_0x4cb7f3['last']<_0x3d0cb4)_0x365cab=![];if(_0x4cb7f3[_0x3af26c(0x228)]=='sell'){let _0x557062=config[_0x3af26c(0x2a5)][_0x3af26c(0x1c2)](_0x1c1f25=>_0x1c1f25[_0x3af26c(0x2cf)]==_0x4cb7f3['coin']);if(_0x557062[_0x3af26c(0x245)]>0x0){if(Math['abs'](_0x4cb7f3[_0x3af26c(0x20a)])>_0x4cb7f3[_0x3af26c(0x2d0)]-_0x557062[_0x3af26c(0x245)])_0x365cab=![];}else{if(Math[_0x3af26c(0x23d)](_0x4cb7f3[_0x3af26c(0x20a)])>_0x4cb7f3[_0x3af26c(0x2d0)])_0x365cab=![];}}if(_0x4cb7f3[_0x3af26c(0x228)]==_0x3af26c(0x1e4)){let _0xf9d2a8=config[_0x3af26c(0x2a5)][_0x3af26c(0x1c2)](_0x41ce96=>_0x41ce96[_0x3af26c(0x2cf)]==config[_0x3af26c(0x328)]),_0x6b7bb0=currentCoins[_0x3af26c(0x1c2)](_0x3d02b5=>_0x3d02b5[_0x3af26c(0x2cf)]==config['basecoin']);if(_0xf9d2a8[_0x3af26c(0x245)]>0x0){if(Math['abs'](_0x4cb7f3[_0x3af26c(0x20a)])*_0x4cb7f3[_0x3af26c(0x28c)]>_0x6b7bb0[_0x3af26c(0x2d0)]-_0xf9d2a8['offset'])_0x365cab=![];}else{if(Math[_0x3af26c(0x23d)](_0x4cb7f3[_0x3af26c(0x20a)])*_0x4cb7f3['last']>_0x6b7bb0['number'])_0x365cab=![];}}return _0x365cab;}async function getBalances(){const _0x548522=_0x56398e;let _0x170b92=0x0,_0x3dc77e;const _0x59a72d=config[_0x548522(0x1d8)];if(config[_0x548522(0x1ef)]&&config[_0x548522(0x20b)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2c9f9c=>{const _0x1a0428=_0x548522;if(_0x2c9f9c[_0x1a0428(0x2cf)]!=config[_0x1a0428(0x328)]){let _0x32fb1e=global[_0x1a0428(0x320)][noslash(_0x2c9f9c[_0x1a0428(0x1ca)])];_0x3dc77e=_0x2c9f9c[_0x1a0428(0x2f6)]?0x1/_0x32fb1e:_0x32fb1e;}else _0x3dc77e=0x1;let _0x2894aa=_0x2c9f9c[_0x1a0428(0x2d0)]*_0x3dc77e;_0x170b92+=_0x2894aa,_0x2c9f9c[_0x1a0428(0x28c)]=formatResult(Number(_0x3dc77e),0x8),_0x2c9f9c[_0x1a0428(0x251)]=_0x2894aa;}),currentCoins[_0x548522(0x229)](_0x938b33=>{const _0x4569f0=_0x548522;let _0x987fae=config['portfolio'][_0x4569f0(0x1c2)](_0x28d6cd=>_0x28d6cd['coin']==_0x938b33[_0x4569f0(0x2cf)]),_0x47d795=Number(_0x987fae[_0x4569f0(0x2c8)]),_0x5a6653=_0x938b33[_0x4569f0(0x251)]/_0x170b92*0x64,_0xd0fe54=_0x47d795*_0x170b92/0x64/_0x938b33[_0x4569f0(0x28c)]-_0x938b33[_0x4569f0(0x2d0)];_0x938b33[_0x4569f0(0x2c8)]=formatResult(_0x5a6653,0x3),_0x938b33[_0x4569f0(0x284)]=formatResult(_0x47d795,0x3),_0x938b33[_0x4569f0(0x20a)]=formatResult(_0xd0fe54,0x8),_0x938b33[_0x4569f0(0x228)]='',_0x938b33['valid']=![];if(_0x938b33['coin']!=config[_0x4569f0(0x328)]){if(_0x938b33[_0x4569f0(0x2c8)]>_0x47d795)_0x938b33['side']=_0x4569f0(0x2e6),_0x938b33[_0x4569f0(0x1d3)]=checkMinimums(_0x938b33);else _0x938b33[_0x4569f0(0x2c8)]<_0x47d795&&(_0x938b33['side']=_0x4569f0(0x1e4),_0x938b33[_0x4569f0(0x1d3)]=checkMinimums(_0x938b33));}_0x938b33[_0x4569f0(0x1e8)]=_0x938b33['distribution']/_0x938b33['target']-0x1;if(_0x938b33[_0x4569f0(0x30d)]=='filled'||_0x938b33[_0x4569f0(0x30d)]==_0x4569f0(0x316))_0x938b33[_0x4569f0(0x30d)]=_0x4569f0(0x1f5);}),currentCoins[_0x548522(0x2d7)]((_0x48cd39,_0x801638)=>_0x48cd39['delta']<_0x801638[_0x548522(0x1e8)]?0x1:_0x801638[_0x548522(0x1e8)]<_0x48cd39[_0x548522(0x1e8)]?-0x1:0x0);const _0x3c3825=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3c3825[_0x548522(0x278)],'usd':_0x3c3825[_0x548522(0x24a)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x59a72d},proxyEmit(_0x548522(0x294),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x548522(0x1ef)])headlessMode({'portfolio':currentCoins,'threshold':_0x59a72d});else{if(lockOrders==ORDERS[_0x548522(0x1da)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x59a72d});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3fede5=_0x56398e;if(!lastBalances)return;let _0x55f34d=[],_0x4c94f3,_0x5bc023=JSON[_0x3fede5(0x1d0)](lastBalances[_0x3fede5(0x2a5)]);_0x5bc023[_0x3fede5(0x2d7)]((_0xb2db43,_0x468480)=>_0xb2db43[_0x3fede5(0x2cf)]>_0x468480[_0x3fede5(0x2cf)]?0x1:_0x468480[_0x3fede5(0x2cf)]>_0xb2db43[_0x3fede5(0x2cf)]?-0x1:0x0),_0x5bc023[_0x3fede5(0x229)](_0x2c63a6=>{const _0xe3d1e1=_0x3fede5;let _0x236c20={'coin':_0x2c63a6['coin'],'number':_0x2c63a6[_0xe3d1e1(0x2d0)],'price':_0x2c63a6[_0xe3d1e1(0x28c)]};_0x55f34d[_0xe3d1e1(0x231)](_0x236c20);});const _0x396e85=await getFiat();_0x4c94f3={'date':lastBalances['time'][_0x3fede5(0x2d9)]('\x20')[0x0],'eur':_0x396e85['eur'],'usd':_0x396e85[_0x3fede5(0x24a)],'coins':_0x55f34d};let _0x31f3eb=dbPerformance[_0x3fede5(0x26f)]('data')['find']({'date':_0x4c94f3[_0x3fede5(0x29d)]})['value']();_0x31f3eb?_0x4c94f3[_0x3fede5(0x29d)]!=config[_0x3fede5(0x2e8)]&&dbPerformance[_0x3fede5(0x26f)](_0x3fede5(0x226))[_0x3fede5(0x1c2)]({'date':_0x4c94f3[_0x3fede5(0x29d)]})[_0x3fede5(0x253)](_0x4c94f3)[_0x3fede5(0x289)]():dbPerformance[_0x3fede5(0x26f)](_0x3fede5(0x226))[_0x3fede5(0x231)](_0x4c94f3)[_0x3fede5(0x289)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xeefa2d=_0x56398e;let _0x2d598a=[];if(dbPerformance[_0xeefa2d(0x201)](_0xeefa2d(0x226))['value']()){let _0x1c9235=dbPerformance[_0xeefa2d(0x26f)](_0xeefa2d(0x226))['cloneDeep']()[_0xeefa2d(0x290)](_0xeefa2d(0x29d))[_0xeefa2d(0x251)](),_0x3444b8=[...config[_0xeefa2d(0x2ec)]];_0x3444b8[_0xeefa2d(0x2d7)]((_0xf6caa2,_0x309ba6)=>_0xf6caa2[_0xeefa2d(0x29d)]>_0x309ba6[_0xeefa2d(0x29d)]?-0x1:_0x309ba6[_0xeefa2d(0x29d)]>_0xf6caa2[_0xeefa2d(0x29d)]?0x1:0x0);let _0x397229=0x1,_0x684c55=[],_0x1d582a=0x0;_0x1c9235['slice']()[_0xeefa2d(0x2f6)]()[_0xeefa2d(0x229)]((_0x377426,_0x2d1e46)=>{const _0x34e175=_0xeefa2d;if(_0x3444b8[_0x1d582a]){if(_0x1c9235[_0x1c9235[_0x34e175(0x237)]-_0x2d1e46]&&_0x3444b8[_0x1d582a][_0x34e175(0x29d)]==_0x1c9235[_0x1c9235[_0x34e175(0x237)]-_0x2d1e46][_0x34e175(0x29d)]){if(_0x2d1e46<_0x1c9235['length']){let _0x2bb8f5=0x0,_0x1e7f3e=0x0;_0x1c9235[_0x1c9235[_0x34e175(0x237)]-_0x2d1e46][_0x34e175(0x2a4)]['forEach'](_0x4ce307=>{const _0x5a4eb2=_0x34e175;_0x1e7f3e+=_0x4ce307['number']*_0x4ce307[_0x5a4eb2(0x20c)];}),_0x3444b8[_0x1d582a][_0x34e175(0x22a)]['forEach'](_0x29a60b=>{const _0x4195a0=_0x34e175;_0x2bb8f5+=_0x29a60b['number']*_0x29a60b[_0x4195a0(0x20c)];}),_0x397229*=_0x2bb8f5/(_0x1e7f3e-_0x2bb8f5)+0x1;}_0x1d582a++;}}let _0x272d8f=0x0;_0x377426[_0x34e175(0x2a4)][_0x34e175(0x229)](_0xcf932d=>{_0x272d8f+=_0xcf932d['number']*_0xcf932d['price'];}),_0x684c55[_0x1c9235[_0x34e175(0x237)]-_0x2d1e46-0x1]=_0x272d8f*(_0x397229-0x1);});let _0x97351b=[];_0x3444b8=[...config[_0xeefa2d(0x2ec)]]||[];let _0x28b778=0x0;_0x1d582a=0x0,_0x1c9235[_0xeefa2d(0x229)]((_0x194503,_0x2ba475)=>{const _0xa11e30=_0xeefa2d;if(_0x3444b8[_0x1d582a]){const _0x1ca6f8=fns[_0xa11e30(0x1d0)](_0x3444b8[_0x1d582a][_0xa11e30(0x29d)],'yyyy/MM/dd',new Date()),_0x3964bf=fns[_0xa11e30(0x1d0)](_0x194503[_0xa11e30(0x29d)],_0xa11e30(0x270),new Date());if(fns[_0xa11e30(0x1be)](_0x1ca6f8,_0x3964bf)){let _0x4549ed=0x0;_0x3444b8[_0x1d582a][_0xa11e30(0x22a)]['forEach'](_0x1ccd7e=>{const _0x119add=_0xa11e30;!_0x97351b[_0x1ccd7e['coin']]?_0x97351b[_0x1ccd7e[_0x119add(0x2cf)]]=_0x1ccd7e[_0x119add(0x2d0)]:(_0x4549ed=_0x97351b[_0x1ccd7e['coin']],_0x97351b[_0x1ccd7e[_0x119add(0x2cf)]]+=_0x1ccd7e['number']);const _0x13a95e=_0x194503[_0x119add(0x2a4)][_0x119add(0x1c2)](_0x1cfbe1=>_0x1cfbe1[_0x119add(0x2cf)]==_0x1ccd7e['coin']);(!_0x13a95e||_0x13a95e[_0x119add(0x2d0)]==0x0)&&(_0x28b778+=(-_0x1ccd7e['number']-_0x4549ed)*_0x1ccd7e['price']);}),_0x1d582a++;}}_0x194503[_0xa11e30(0x2a4)][_0xa11e30(0x229)]((_0x396965,_0x3fa5c3)=>{const _0xdc6f39=_0xa11e30;_0x97351b[_0x396965[_0xdc6f39(0x2cf)]]&&(_0x396965={..._0x396965,'initial':_0x97351b[_0x396965['coin']]}),_0x194503[_0xdc6f39(0x2a4)][_0x3fa5c3]=_0x396965;}),_0x2d598a[_0xa11e30(0x231)]({'date':_0x194503[_0xa11e30(0x29d)],'eur':_0x194503[_0xa11e30(0x278)],'usd':_0x194503['usd'],'offset':_0x684c55[_0x2ba475],'netoffset':_0x28b778,'coins':_0x194503[_0xa11e30(0x2a4)]});});}return _0x2d598a;}function emitPerformance(_0x1ef331){const _0x10e0f7=_0x56398e;_0x1ef331[_0x10e0f7(0x237)]!==0x0?(proxyEmit(_0x10e0f7(0x2a8),_0x1ef331),lastPerformanceEmitted=getDate()):proxyEmit(_0x10e0f7(0x2a8),[]);}function getPerf(_0x196816,_0xd4050a){const _0x5bda0d=_0x56398e;let _0x35d19c=0x0,_0x229ccf=0x0,_0x20049e=0x0;_0x196816['coins'][_0x5bda0d(0x229)](_0xdb500c=>{const _0x31f51d=_0x5bda0d;_0x35d19c+=_0xdb500c[_0x31f51d(0x2d0)]*_0xdb500c[_0x31f51d(0x20c)];});_0xd4050a&&(_0x35d19c+=_0x196816[_0x5bda0d(0x245)]);if(config[_0x5bda0d(0x328)]==='BTC'||config[_0x5bda0d(0x328)]===_0x5bda0d(0x1fe))_0x229ccf=_0x35d19c*_0x196816[_0x5bda0d(0x278)],_0x20049e=_0x35d19c*_0x196816[_0x5bda0d(0x24a)];else{if(config[_0x5bda0d(0x328)]==='BUSD'||config[_0x5bda0d(0x328)]===_0x5bda0d(0x1db)||config[_0x5bda0d(0x328)]==='USD')_0x229ccf=_0x35d19c*_0x196816[_0x5bda0d(0x278)]/_0x196816[_0x5bda0d(0x24a)],_0x20049e=_0x35d19c;else config['basecoin']===_0x5bda0d(0x204)&&(_0x229ccf=_0x35d19c,_0x20049e=_0x35d19c*_0x196816['usd']/_0x196816[_0x5bda0d(0x278)]);}return[_0x35d19c,_0x229ccf,_0x20049e];}function getKPIs(_0x39d726,_0x2b680f=_0x56398e(0x204)){const _0xf8431=_0x56398e,_0x152c8e=config[_0xf8431(0x328)],_0x12c696=config[_0xf8431(0x294)],_0x3c77c5=currentCoins,_0x4958e9=getNormalizedPerformance(),_0x32ac38=_0x39d726===_0xf8431(0x328)?_0x152c8e:_0x39d726==='fiat'||_0x39d726===_0xf8431(0x1c0)?_0x2b680f:_0xf8431(0x2eb)+_0x152c8e,_0x332c56=_0x39d726===_0xf8431(0x2a6)?'Net\x20effect':_0x39d726===_0xf8431(0x1c0)?_0xf8431(0x2dd)+_0x32ac38+')':_0x32ac38+_0xf8431(0x302),_0x40ba92=_0x39d726===_0xf8431(0x2a6)||_0x39d726===_0xf8431(0x1c0)?'Net\x20effect':_0x32ac38+'\x20change';let _0x5d7913=0x0;_0x3c77c5[_0xf8431(0x229)](_0x2f672f=>{const _0x4eb3c6=_0xf8431;_0x5d7913+=_0x2f672f[_0x4eb3c6(0x2d0)]*_0x2f672f[_0x4eb3c6(0x28c)];});if(_0x39d726==='fiat'||_0x39d726===_0xf8431(0x1c0)){if(_0x152c8e===_0xf8431(0x1e3)||_0x152c8e===_0xf8431(0x1fe))_0x5d7913=_0x5d7913*(_0x2b680f===_0xf8431(0x204)?_0x12c696['eur']:_0x12c696['usd']);else{if(_0x152c8e===_0xf8431(0x218)||_0x152c8e===_0xf8431(0x1db)||_0x152c8e===_0xf8431(0x202))_0x5d7913=_0x5d7913*(_0x2b680f===_0xf8431(0x204)?_0x12c696['eur']/_0x12c696['usd']:0x1);else _0x152c8e===_0xf8431(0x204)&&(_0x5d7913=_0x5d7913*(_0x2b680f===_0xf8431(0x204)?0x1:_0x12c696[_0xf8431(0x24a)]/_0x12c696['eur']));}}let _0x14b62f;if(_0x5d7913!==0x0){if(_0x39d726===_0xf8431(0x328))_0x14b62f=(_0x5d7913/startingBalances['basecoin']-0x1)*0x64;else{if(_0x2b680f==='EUR')_0x14b62f=(_0x5d7913/startingBalances[_0xf8431(0x278)]-0x1)*0x64;else _0x14b62f=(_0x5d7913/startingBalances[_0xf8431(0x24a)]-0x1)*0x64;}let _0x39d516=0x0;if(startingBalances['coins'])_0x3c77c5[_0xf8431(0x229)](_0x595a44=>{const _0x56dc3c=_0xf8431;let _0x26f5d5=startingBalances[_0x56dc3c(0x2a4)]['find'](_0x59521d=>_0x59521d['coin']===_0x595a44[_0x56dc3c(0x2cf)]);if(_0x26f5d5&&_0x26f5d5[_0x56dc3c(0x2cf)]&&_0x595a44[_0x56dc3c(0x2d0)]!==0x0)_0x39d516+=_0x26f5d5[_0x56dc3c(0x2d0)]*_0x595a44['last'];});let _0x1e3033=0x0;if(_0x4958e9['length']!==0x0){let _0x46e64c=_0x4958e9[_0x4958e9['length']-0x1];_0x1e3033=_0x46e64c[_0xf8431(0x2b7)];}_0x39d516-=_0x1e3033;_0x39d726===_0xf8431(0x2a6)&&(_0x14b62f=(_0x5d7913-_0x39d516)/startingBalances[_0xf8431(0x328)]*0x64,_0x5d7913=_0x5d7913-_0x39d516);if(_0x39d726===_0xf8431(0x1c0)){let _0x539807=_0x2b680f===_0xf8431(0x204)?startingBalances['eur']:startingBalances[_0xf8431(0x24a)];if(_0x152c8e===_0xf8431(0x1e3)||_0x152c8e===_0xf8431(0x1fe))_0x39d516=_0x2b680f===_0xf8431(0x204)?_0x39d516*_0x12c696[_0xf8431(0x278)]:_0x39d516*_0x12c696[_0xf8431(0x24a)];else{if(_0x152c8e===_0xf8431(0x218)||_0x152c8e===_0xf8431(0x1db)||_0x152c8e===_0xf8431(0x202))_0x39d516=_0x2b680f==='EUR'?_0x39d516*_0x12c696[_0xf8431(0x278)]/_0x12c696[_0xf8431(0x24a)]:_0x39d516;else _0x152c8e===_0xf8431(0x204)&&(_0x39d516=_0x2b680f===_0xf8431(0x204)?_0x39d516:_0x39d516*_0x12c696[_0xf8431(0x24a)]/_0x12c696[_0xf8431(0x278)]);}_0x14b62f=(_0x5d7913-_0x39d516)/_0x539807*0x64,_0x5d7913=_0x5d7913-_0x39d516;}if(_0x14b62f){if(_0x14b62f<0x64)_0x14b62f=_0x14b62f[_0xf8431(0x214)](0x2);else{if(_0x14b62f<0x3e8)_0x14b62f=_0x14b62f[_0xf8431(0x214)](0x1);else _0x14b62f=_0x14b62f[_0xf8431(0x214)](0x0);}}else _0x14b62f=Number('0')[_0xf8431(0x214)](0x2);if(_0x5d7913){if(Math['abs'](_0x5d7913)<0.000001)_0x5d7913=_0x5d7913[_0xf8431(0x214)](0x2);else{if(Math[_0xf8431(0x23d)](_0x5d7913)<0.1)_0x5d7913=_0x5d7913['toFixed'](0x6);else{if(Math[_0xf8431(0x23d)](_0x5d7913)<0x1)_0x5d7913=_0x5d7913[_0xf8431(0x214)](0x5);else{if(Math[_0xf8431(0x23d)](_0x5d7913)<0xa)_0x5d7913=_0x5d7913[_0xf8431(0x214)](0x4);else{if(Math[_0xf8431(0x23d)](_0x5d7913)<0x64)_0x5d7913=_0x5d7913[_0xf8431(0x214)](0x3);else{if(Math[_0xf8431(0x23d)](_0x5d7913)<0x3e8)_0x5d7913=_0x5d7913[_0xf8431(0x214)](0x2);else _0x5d7913=_0x5d7913[_0xf8431(0x214)](0x2);}}}}}}else _0x5d7913=Number('0')['toFixed'](0x2);}else _0x14b62f=Number('0')[_0xf8431(0x214)](0x2);return{'value':_0x5d7913,'change':_0x14b62f,'leftTxt':_0x332c56,'rightTxt':_0x40ba92};}async function getStartingBalances(_0x561a11,_0x205107=!![]){const _0x22de8f=_0x56398e;if(_0x561a11[_0x22de8f(0x237)]!==0x0){const [_0x3b5d8d,_0x7679b6,_0x592ab0]=getPerf(_0x561a11[0x0],!![]);let _0x43d0e1=[];config[_0x22de8f(0x2a5)]['forEach'](_0x16144a=>{const _0x5d83fc=_0x22de8f;let _0x5a4498=0x0,_0x3fec69;config['liquidity'][_0x5d83fc(0x229)](_0x648e46=>{const _0x58c7f3=_0x5d83fc;let _0x526eb8=_0x648e46['changes'][_0x58c7f3(0x1c2)](_0x123940=>_0x123940[_0x58c7f3(0x2cf)]==_0x16144a[_0x58c7f3(0x2cf)]);if(_0x526eb8){_0x5a4498+=_0x526eb8[_0x58c7f3(0x2d0)];if(!_0x3fec69)_0x3fec69=_0x526eb8[_0x58c7f3(0x20c)];}}),_0x43d0e1['push']({'coin':_0x16144a['coin'],'number':_0x5a4498,'initialprice':_0x3fec69});});const _0x402966={'basecoin':_0x3b5d8d,'eur':_0x7679b6,'usd':_0x592ab0,'coins':_0x43d0e1};if(_0x205107)proxyEmit(_0x22de8f(0x1e0),_0x402966);startingBalances=_0x402966;}}function _0x4a69(){const _0xe23811=['initial','Net\x20','liquidity','search','cancelOrders()','kill','limits','Crypt','currency','1699656waCBzT','bid','220625zPOiem','reverse','464GIzisl','Bitfinex2','OrderNotFound',':\x20Bot\x20','timer:','customId','cancel','max','0\x20-\x20EXECUTION:\x20','args','createOrder','\x20value','<b>Bot\x20','average','progress','balancing\x20resumes\x20when\x20cooldown\x20ends','DAI/','success','182yIVKTu','ordertype','fromCodePoint','API-key\x20format\x20invalid','orderstatus','market','DDoSProtection','keys','Reset\x20|\x20','RSA-OAEP','Order\x20amount\x20is\x20invalid:\x20','apiKey','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','canceled','1\x20-\x20Handle\x20open\x20orders','</pre>','date-fns','fee','2.3.5','event-history','ExchangeNotAvailable','filled','settings','ticker','error','exchange','bot','NANO/','timeshift','warning','remainingSymbols','basecoin','Limit\x20(high-margin)','recreateCoinResults()','isEqual','************','net-fiat','pro','find','\x20not\x20available','/USD','Okcoin','percentage','close','set','1\x20-\x20FILLED:\x20','symbol','\x20>\x20','-performance.json','toString','Hollaex','\x20API\x20key\x20is\x20invalid','parse','fetchClosedOrders','min','valid','fetchTickers','watchTrades','yyyy-MM-dd\x27T\x27HH:mm:ss','splice','threshold','createWriteStream','UNLOCKED','USDT','2\x20-\x20FILLED\x20known\x20order:\x20','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','shift','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','starting-balances','stringify','Cryptocom','BTC','buy','Manual\x20balancing\x20required','Bitmart','XEM/BUSD','delta','simple','round','bot-','symbols','no\x20open\x20orders','Whitebit','headless','botname','message','running','string','debug','none','-------------------------------\x0a','rightTxt','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','./config/','type','3375DMkuFA','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','ETH','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','-config.json','has','USD','padEnd','EUR','loading-canceled','uncaughtException','event','exec','MIN_NOTIONAL','trade','change24h','price','Bitmex','getMonth','2\x20-\x20Orders\x20unlocked','breakeven','Coinex','substring','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','toFixed','storeConfiguration','map','YOYOW/','BUSD','getFullYear','toLowerCase','balancing\x20resumed','ccxt','-results.json','configuration','getDate','\x20order:\x20','hybrid-crypto-js','function','\x20-\x20bot\x20not\x20started','\x20:\x20','logs','data','slice','side','forEach','changes','datetime','/EUR','2.6.0','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','join','format','push','190446HyRvNa','watchOrders','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20hour','1\x20-\x20Validate\x20orders:\x20','length','getMinutes','open','Invalid\x20quantity','emojisell','Gate','abs','timestamp','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit-high','toggleBotMode','HOT/BTC','2.5.0','Idex','offset','version','getCoins()','\x20portfolio:</b>\x20\x0a\x0a','excluded','usd','storeHeadless','ongoing','\x20minutes','constructor','restart','startprice','value','amount','assign','Order(s)\x20not\x20validated\x20after\x20','\x20minutes\x20-\x20','6546TdSpSX','Okx','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','final','page','BNB/','toUpperCase','ask','cancelOrder',',\x20must\x20be\x20a\x203\x20digit\x20number','Deribit','test','fetchTicker','deleteHistoryAlerts','\x20|\x20Error\x20details:\x20','lowdb','getSeconds','entries','sha256','fees','argv','replace','order','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Kraken','get','yyyy/MM/dd','Bittrex','Cex','loadSymbols()','coin-loading-progress','log','parseISO','\x20API\x20secret\x20is\x20invalid','eur','./version.json','indexOf','closed','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','***','Bybit','Pausing\x20for\x20','clientOrderId','privateKey','apiSecret','showConfig','target','bb-settings.json','orderId','Binance','Unfilled\x20order(s)\x20canceled\x20after\x20','write','getHours','realized','last','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','450924IODXLs','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','sortBy','Ascendex','time','\x20|\x20lock\x20orders:\x20','balances','./logs/','AuthenticationError','ORDERS.UNLOCKED','cancelLoading','sells','includes','RequestTimeout','BNB','date','change','exchanges','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','125784SkSklr','openOrders','Order\x20filled:\x20','coins','portfolio','net-basecoin','decrypt','performance','apply','filter','precision','Failed\x20to\x20load\x20coin\x20data\x20for\x20','1\x20-\x20Unlock\x20orders','InvalidNonce','cooldown','%\x20\x0a','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','(((.+)+)+)+$','padStart','emojibuy','Coinbasepro','Executed\x20','netoffset','placeOrder','showname','startnumber','total','Huobipro','full','Unknown\x20error\x20occured','sendPortfolioTelegram','differenceInSeconds','Initiating\x20exchange\x20reload','placeOrder()','recreate','Bot\x20','LOCKED','/output-000.log','\x20>\x20[DEBUG]\x20','distribution','getTime','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20|\x20','\x20API\x20blocked\x20(DDoS\x20protection)','send','defaults','coin','number','Mexc','configuration-stored','-events.json','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','existsSync','starting-balance-','sort','remove','split','timeout','status','001','Net\x20effect\x20(','ORDERS.UNLOCKING','<b>','leftTxt','<pre>','Binanceusdm','Error:\x20Invalid\x20argument\x20','cost','limit','sell','buys','startdate','Coinbaseprime'];_0x4a69=function(){return _0xe23811;};return _0x4a69();}function headlessMode(_0x293883){const _0x1d29d2=_0x56398e;let _0x5b834d=_0x293883[_0x1d29d2(0x2a5)],_0x348643=_0x293883[_0x1d29d2(0x1d8)],_0x2efa50=[];for(let _0x34a3e3 of _0x5b834d){if(_0x34a3e3[_0x1d29d2(0x2cf)]!=config[_0x1d29d2(0x328)]){if(_0x34a3e3[_0x1d29d2(0x1e8)]>=_0x348643/0x64){if(_0x34a3e3[_0x1d29d2(0x1d3)])_0x2efa50['push'](_0x34a3e3);}else{if(_0x34a3e3['delta']<=-_0x348643/0x64){if(_0x34a3e3[_0x1d29d2(0x1d3)])_0x2efa50[_0x1d29d2(0x231)](_0x34a3e3);}}}}_0x2efa50[_0x1d29d2(0x237)]>0x0&&placeOrder(_0x2efa50);}function notifyBalance(_0x41adf3){const _0x10b9f8=_0x56398e;let _0x2f9d89=_0x41adf3[_0x10b9f8(0x2a5)],_0x3fbf38=_0x41adf3['threshold'],_0x330c08=[];for(let _0x59c4d8 of _0x2f9d89){if(_0x59c4d8[_0x10b9f8(0x2cf)]!=config['basecoin']){if(_0x59c4d8['delta']>=_0x3fbf38/0x64){if(_0x59c4d8['valid'])_0x330c08[_0x10b9f8(0x231)](_0x59c4d8);}else{if(_0x59c4d8[_0x10b9f8(0x1e8)]<=-_0x3fbf38/0x64){if(_0x59c4d8[_0x10b9f8(0x1d3)])_0x330c08[_0x10b9f8(0x231)](_0x59c4d8);}}}}if(_0x330c08[_0x10b9f8(0x237)]>0x0){let _0x4e7752=_0x330c08[_0x10b9f8(0x216)](_0x4c951e=>_0x4c951e['coin']);_0x4e7752[_0x10b9f8(0x2d7)]();let _0x22ae77=_0x4e7752[_0x10b9f8(0x22f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x10b9f8(0x326),_0x10b9f8(0x1e5));lastCoinsToBalance=_0x22ae77;}}function symbolToCoin(_0x19c7d4){const _0x546d23=_0x56398e;let _0x5d98ff;if(_0x19c7d4[_0x546d23(0x29a)]('/'+config[_0x546d23(0x328)]))_0x5d98ff=_0x19c7d4[_0x546d23(0x26b)]('/'+config[_0x546d23(0x328)],'');if(_0x19c7d4[_0x546d23(0x29a)](config[_0x546d23(0x328)]+'/'))_0x5d98ff=_0x19c7d4[_0x546d23(0x26b)](config[_0x546d23(0x328)]+'/','');return _0x5d98ff;}async function unlockOrders(){const _0x2d0238=_0x56398e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2d0238(0x2c5)]){logger['debug'](_0x2d0238(0x2ad)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x2d0238(0x2ea),persistOpenOrders([]),lockOrders=ORDERS[_0x2d0238(0x1da)],logger['debug'](_0x2d0238(0x20f));}}async function validateOrders(_0x5d58ae){const _0x24d9ed=_0x56398e;if(_0x5d58ae)validateOrdersState=_0x5d58ae;logger[_0x24d9ed(0x1f4)](_0x24d9ed(0x236)+validateOrdersState+_0x24d9ed(0x293)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x24d9ed(0x2de):_0x24d9ed(0x297)));let _0x5d472c=[],_0x2caa18=config[_0x24d9ed(0x30a)]==_0x24d9ed(0x30e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x24d9ed(0x2da)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x24d9ed(0x2c5)])return;logger[_0x24d9ed(0x1f4)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x24d9ed(0x229)](_0x38fbd8=>{const _0x3bf3ec=_0x24d9ed;let _0x23a5ec=![];_0x38fbd8['filled']>0x0&&(_0x23a5ec=!![]),_0x5d472c['push'](_0x23a5ec),_0x23a5ec&&config[_0x3bf3ec(0x30a)]!=_0x3bf3ec(0x30e)&&logHistory(_0x3bf3ec(0x26c),_0x3bf3ec(0x2a3)+_0x38fbd8[_0x3bf3ec(0x1ca)]+'\x20'+_0x38fbd8[_0x3bf3ec(0x228)]+'\x20#'+formatResult(_0x38fbd8[_0x3bf3ec(0x31e)],0x8)+'\x20@'+formatResult(_0x38fbd8['price'],0x8));}),_0x5d472c['forEach']((_0x88267d,_0x5bdfac)=>{const _0x3707c8=_0x24d9ed;if(_0x88267d)lastOrders[_0x3707c8(0x1d7)](_0x5bdfac,0x1);}),persistOpenOrders(lastOrders);const _0x5ebd6f=coolingDown?_0x24d9ed(0x306):_0x24d9ed(0x21b);if(validateOrdersState=='initial')validateOrdersState=_0x24d9ed(0x24c),_0x5d472c['includes'](![])?config[_0x24d9ed(0x30a)]==_0x24d9ed(0x30e)?logHistory('warning',_0x24d9ed(0x315)):logHistory(_0x24d9ed(0x326),_0x24d9ed(0x1f9)):await unlockOrders();else{if(validateOrdersState==_0x24d9ed(0x24c)){if(_0x5d472c['includes'](![])){}else allOrdersPlaced&&(config[_0x24d9ed(0x30a)]==_0x24d9ed(0x30e)?logHistory(_0x24d9ed(0x308),'Order(s)\x20validated\x20-\x20'+_0x5ebd6f):logHistory(_0x24d9ed(0x308),'Order(s)\x20filled\x20-\x20'+_0x5ebd6f),await unlockOrders());}else{if(validateOrdersState=='final')_0x5d472c[_0x24d9ed(0x29a)](![])&&(config[_0x24d9ed(0x30a)]==_0x24d9ed(0x30e)?logHistory(_0x24d9ed(0x308),_0x24d9ed(0x254)+Math[_0x24d9ed(0x1ea)](_0x2caa18*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5ebd6f):(await cancelOrders(),logHistory(_0x24d9ed(0x308),_0x24d9ed(0x288)+Math[_0x24d9ed(0x1ea)](_0x2caa18*validateOrderInterval/0xea60)+_0x24d9ed(0x255)+_0x5ebd6f))),await unlockOrders();else{if(validateOrdersState==_0x24d9ed(0x1ed)){if(config[_0x24d9ed(0x30a)]!=_0x24d9ed(0x30e))logHistory(_0x24d9ed(0x308),'No\x20more\x20open\x20orders\x20-\x20'+_0x5ebd6f);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x221cfe=>{const _0x2f3437=_0x2913;try{const _0x324e25=await exchange[_0x2f3437(0x25e)](_0x221cfe['orderId'],_0x221cfe[_0x2f3437(0x1ca)]);}catch(_0x358428){if(_0x358428['toString']()['includes'](_0x2f3437(0x2f9))){}else await handleError(_0x358428,_0x2f3437(0x2ee));}});}async function initCoinResults(){const _0x4a3882=_0x56398e;let _0x293600=[];config[_0x4a3882(0x2a5)][_0x4a3882(0x229)](_0x1b300d=>{const _0x338ead=_0x4a3882;if(!_0x1b300d['excluded']&&_0x1b300d[_0x338ead(0x2cf)]!=config[_0x338ead(0x328)]){let _0x137ad7=dbCoinResults[_0x338ead(0x26f)](_0x338ead(0x2a4))[_0x338ead(0x1c2)]({'coin':_0x1b300d[_0x338ead(0x2cf)]})[_0x338ead(0x251)]();if(!_0x137ad7){const _0x2b6d02=currentCoins['find'](_0x584c33=>_0x584c33[_0x338ead(0x2cf)]==_0x1b300d[_0x338ead(0x2cf)]),_0x134cb1=global['ticker'][noslash(_0x1b300d[_0x338ead(0x1ca)])];let _0x1232ee=_0x2b6d02?_0x2b6d02[_0x338ead(0x2d0)]:null,_0x34c2d8=_0x1b300d[_0x338ead(0x2f6)]?0x1/_0x134cb1:_0x134cb1,_0x2fd813;config[_0x338ead(0x2ec)][_0x338ead(0x229)](_0x5ddbd7=>{const _0x34ba91=_0x338ead;!_0x2fd813&&(_0x2fd813=_0x5ddbd7['changes'][_0x34ba91(0x1c2)](_0x360d65=>_0x360d65[_0x34ba91(0x2cf)]==_0x1b300d[_0x34ba91(0x2cf)]),_0x2fd813&&(_0x1232ee=_0x2fd813['number'],_0x34c2d8=_0x2fd813[_0x34ba91(0x20c)]));}),_0x293600[_0x338ead(0x231)]({'coin':_0x1b300d['coin'],'number':_0x1232ee,'price':_0x34c2d8});}}}),_0x293600[_0x4a3882(0x229)](_0x4213b6=>{const _0x28f819=_0x4a3882,_0x1168ef={'coin':_0x4213b6[_0x28f819(0x2cf)],'number':_0x4213b6[_0x28f819(0x2d0)],'breakeven':_0x4213b6['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x28f819(0x26f)](_0x28f819(0x2a4))[_0x28f819(0x231)](_0x1168ef)['write']();});}async function updateCoinResults(_0x4c2033,_0x56866f=![]){const _0x53ad17=_0x56398e;let _0x461c4b,_0x1a3360,_0x5615fe,_0x296bc0,_0x3d4ca9,_0x2277fb,_0x2017e7=dbCoinResults['get'](_0x53ad17(0x2a4))['find']({'coin':_0x4c2033[_0x53ad17(0x2cf)]})[_0x53ad17(0x251)]();!_0x2017e7&&await initCoinResults();_0x4c2033[_0x53ad17(0x2f6)]&&(_0x2277fb={'filled':_0x4c2033[_0x53ad17(0x31e)]*_0x4c2033['price'],'amount':_0x4c2033[_0x53ad17(0x31e)]*_0x4c2033[_0x53ad17(0x20c)],'side':_0x4c2033['side']=='sell'?_0x53ad17(0x1e4):_0x53ad17(0x2e6),'price':0x1/_0x4c2033[_0x53ad17(0x20c)]},_0x4c2033={..._0x4c2033,..._0x2277fb});_0x56866f?_0x1a3360=_0x4c2033[_0x53ad17(0x228)]==_0x53ad17(0x1e4)?_0x2017e7[_0x53ad17(0x2d0)]+_0x4c2033[_0x53ad17(0x31e)]:_0x2017e7[_0x53ad17(0x2d0)]-_0x4c2033['filled']:_0x1a3360=await getCoinNumber(_0x4c2033[_0x53ad17(0x2cf)]);if(_0x4c2033[_0x53ad17(0x31a)]&&_0x4c2033[_0x53ad17(0x31a)][_0x53ad17(0x2f2)]==config[_0x53ad17(0x328)])_0x461c4b=_0x4c2033[_0x53ad17(0x31a)][_0x53ad17(0x2e4)];else{if(_0x4c2033[_0x53ad17(0x31a)]&&_0x4c2033[_0x53ad17(0x31a)][_0x53ad17(0x2f2)]==_0x53ad17(0x29c)&&!_0x56866f)_0x461c4b=_0x4c2033['fee'][_0x53ad17(0x2e4)]*global['ticker']['BNB'+config[_0x53ad17(0x328)]];else _0x461c4b=defaultFee*_0x4c2033['filled']*_0x4c2033[_0x53ad17(0x20c)];}_0x4c2033[_0x53ad17(0x228)]==_0x53ad17(0x1e4)?(_0x5615fe=_0x1a3360!=0x0?(_0x2017e7[_0x53ad17(0x210)]*_0x2017e7[_0x53ad17(0x2d0)]+_0x4c2033[_0x53ad17(0x20c)]*(_0x1a3360-_0x2017e7[_0x53ad17(0x2d0)])+_0x461c4b)/_0x1a3360:0x0,_0x296bc0=_0x2017e7[_0x53ad17(0x28b)]):(_0x5615fe=_0x1a3360!=0x0?(_0x2017e7['breakeven']*_0x2017e7[_0x53ad17(0x2d0)]-_0x4c2033[_0x53ad17(0x20c)]*(_0x2017e7['number']-_0x1a3360)+_0x461c4b)/_0x1a3360:0x0,_0x296bc0=_0x2017e7[_0x53ad17(0x28b)]+(_0x4c2033[_0x53ad17(0x20c)]-_0x2017e7[_0x53ad17(0x210)])*_0x4c2033['filled']);_0x3d4ca9=(_0x4c2033[_0x53ad17(0x20c)]-_0x5615fe-_0x461c4b/_0x4c2033[_0x53ad17(0x31e)])*_0x1a3360;let _0x5d2100={'coin':_0x4c2033[_0x53ad17(0x2cf)],'number':_0x1a3360,'breakeven':formatResult(_0x5615fe,0x8),'realized':formatResult(_0x296bc0,0x8),'unrealized':formatResult(_0x3d4ca9,0x8),'fees':formatResult(_0x2017e7[_0x53ad17(0x269)]+_0x461c4b,0x8),'sells':_0x4c2033['side']=='sell'?_0x2017e7[_0x53ad17(0x299)]+0x1:_0x2017e7[_0x53ad17(0x299)],'buys':_0x4c2033[_0x53ad17(0x228)]=='buy'?_0x2017e7[_0x53ad17(0x2e7)]+0x1:_0x2017e7[_0x53ad17(0x2e7)]};dbCoinResults[_0x53ad17(0x26f)](_0x53ad17(0x2a4))[_0x53ad17(0x1c2)]({'coin':_0x4c2033[_0x53ad17(0x2cf)]})['assign'](_0x5d2100)['write']();if(!_0x56866f){if(_0x4c2033[_0x53ad17(0x31a)]&&_0x4c2033['fee'][_0x53ad17(0x2f2)]==_0x53ad17(0x29c)){const _0x394b36=currentCoins[_0x53ad17(0x1c2)](_0x174b4d=>_0x174b4d[_0x53ad17(0x2cf)]=='BNB');if(_0x394b36){let _0x19d12e=dbCoinResults[_0x53ad17(0x26f)](_0x53ad17(0x2a4))['find']({'coin':'BNB'})[_0x53ad17(0x251)]();_0x5d2100={..._0x19d12e,'number':_0x394b36[_0x53ad17(0x2d0)]},dbCoinResults[_0x53ad17(0x26f)](_0x53ad17(0x2a4))[_0x53ad17(0x1c2)]({'coin':_0x53ad17(0x29c)})['assign'](_0x5d2100)['write']();}}}}async function placeOrder(_0x3a8e0c){const _0x5737c6=_0x56398e,_0x821501=config['ordertype']=='market'?'market':_0x5737c6(0x2e5);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x5737c6(0x2c5)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x124218 of _0x3a8e0c){let _0x3bc53a,_0x55544d,_0x7e2175,_0x359892,_0x9967dc,_0x229371=_0x124218[_0x5737c6(0x1ca)];try{const _0x2051bb=await exchange['fetchTicker'](_0x229371);_0x3bc53a=_0x124218['reverse']?0x1/_0x124218['last']:_0x124218[_0x5737c6(0x28c)],_0x55544d=_0x2051bb[_0x5737c6(0x2f4)],_0x7e2175=_0x2051bb[_0x5737c6(0x25d)];_0x124218[_0x5737c6(0x2f6)]?(_0x359892=_0x124218[_0x5737c6(0x228)]==_0x5737c6(0x1e4)?_0x5737c6(0x2e6):_0x5737c6(0x1e4),_0x9967dc=Math['abs'](_0x124218[_0x5737c6(0x20a)])/_0x3bc53a):(_0x359892=_0x124218[_0x5737c6(0x228)],_0x9967dc=Math[_0x5737c6(0x23d)](_0x124218[_0x5737c6(0x20a)]));_0x821501==_0x5737c6(0x2e5)&&(config[_0x5737c6(0x30a)]==_0x5737c6(0x240)&&(_0x3bc53a=_0x359892==_0x5737c6(0x1e4)?_0x55544d:_0x7e2175),config[_0x5737c6(0x30a)]=='limit-low'&&(_0x3bc53a=_0x359892==_0x5737c6(0x1e4)?_0x7e2175:_0x55544d));_0x9967dc=formatResult(_0x9967dc,0x8),_0x3bc53a=formatResult(_0x3bc53a,0x8);const _0x51b38b=_0x359892==_0x5737c6(0x2e6)?config[_0x5737c6(0x23b)]?String[_0x5737c6(0x30b)]('0x'+config[_0x5737c6(0x23b)])+'\x20':'':config[_0x5737c6(0x2b4)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x14ebf7=_0x821501=='market'?'Market':config[_0x5737c6(0x30a)]==_0x5737c6(0x240)?_0x5737c6(0x329):'Limit\x20(low-margin)',_0x2e95c8=new Date()[_0x5737c6(0x2c9)]()[_0x5737c6(0x1cd)]()[_0x5737c6(0x227)](-0x6)+'-'+Math['random']()[_0x5737c6(0x1cd)]()['slice'](-0x6);lastOrders[_0x5737c6(0x231)]({'customId':_0x2e95c8,'symbol':_0x229371,'coin':_0x124218['coin'],'side':_0x359892,'reverse':_0x124218[_0x5737c6(0x2f6)],'filled':0x0});if(_0x821501==_0x5737c6(0x30e))logHistory(_0x5737c6(0x26c),''+_0x51b38b+_0x14ebf7+_0x5737c6(0x220)+_0x229371+'\x20'+_0x359892+'\x20#'+formatResult(_0x9967dc,0x8)+'\x20@'+formatResult(_0x3bc53a,0x8));else logHistory(_0x5737c6(0x26c),''+_0x51b38b+_0x14ebf7+'\x20order:\x20'+_0x229371+'\x20'+_0x359892+'\x20#'+formatResult(_0x9967dc,0x8)+'\x20@'+formatResult(_0x3bc53a,0x8));const _0x302e4a=await exchange[_0x5737c6(0x301)](_0x229371,_0x821501,_0x359892,_0x9967dc,_0x3bc53a,{'clientOrderId':_0x2e95c8}),_0x39746e=lastOrders[_0x5737c6(0x237)]-0x1;_0x39746e>=0x0&&lastOrders[_0x39746e][_0x5737c6(0x2fc)]==_0x2e95c8&&(lastOrders[_0x39746e]={...lastOrders[_0x39746e],'orderId':_0x302e4a['id'],'amount':_0x302e4a[_0x5737c6(0x252)],'price':_0x302e4a[_0x5737c6(0x20c)],'fee':_0x302e4a[_0x5737c6(0x31a)]});if(config[_0x5737c6(0x2af)]!=0x0){let _0x8d4ae3=null;if(cooldownTracker[_0x5737c6(0x237)]==config[_0x5737c6(0x2af)]-0x1)_0x8d4ae3=cooldownTracker[_0x5737c6(0x1de)]();const _0x1d2557=getTimeStamp();cooldownTracker[_0x5737c6(0x231)](_0x1d2557);if(_0x8d4ae3){const _0x3bfd01=fns[_0x5737c6(0x2c0)](new Date(_0x1d2557),new Date(_0x8d4ae3));if(_0x3bfd01<cooldownInterval){logHistory('error',_0x5737c6(0x2b6)+config[_0x5737c6(0x2af)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x5737c6(0x1ff)+cooldownPeriod/(0xe10*0x3e8)+_0x5737c6(0x235)),coolingDown=!![];break;}}}}catch(_0x27089e){if(_0x27089e[_0x5737c6(0x1cd)]()[_0x5737c6(0x29a)](_0x5737c6(0x209)))lastOrders=lastOrders[_0x5737c6(0x2aa)](_0x4b0672=>_0x4b0672[_0x5737c6(0x1ca)]!=_0x229371),logHistory(_0x5737c6(0x321),_0x5737c6(0x28f)+_0x229371);else _0x27089e['toString']()[_0x5737c6(0x29a)](_0x5737c6(0x23a))?(lastOrders=lastOrders['filter'](_0x482c2c=>_0x482c2c[_0x5737c6(0x1ca)]!=_0x229371),logHistory(_0x5737c6(0x321),_0x5737c6(0x313)+_0x229371)):(lastOrders=lastOrders[_0x5737c6(0x2aa)](_0x1b5c16=>_0x1b5c16[_0x5737c6(0x1ca)]!=_0x229371),await handleError(_0x27089e,_0x5737c6(0x2c2),_0x229371));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5737c6(0x237)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4ddfb2=config[_0x5737c6(0x30a)]==_0x5737c6(0x30e)?validateOrderTimeout*0x3c*0x3e8:config[_0x5737c6(0x2da)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x41efed=_0x5737c6;validateOrders(_0x41efed(0x259));},_0x4ddfb2);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5737c6(0x308),_0x5737c6(0x234)));}else{if(coolingDown)!config['headless']&&logHistory(_0x5737c6(0x321),_0x5737c6(0x2d4));else lockOrders!=ORDERS[_0x5737c6(0x1da)]&&(!config['headless']&&(config['ordertype']=='market'?logHistory(_0x5737c6(0x321),_0x5737c6(0x2ca)):logHistory(_0x5737c6(0x321),_0x5737c6(0x26d))));}}function persistOpenOrders(_0x5ed81e){const _0x2d618c=_0x56398e,_0x15776e={...config,'openOrders':_0x5ed81e};let _0xab9b7a=dbConfig[_0x2d618c(0x26f)](_0x2d618c(0x323))['find']({'botID':botID})[_0x2d618c(0x251)]();_0xab9b7a&&dbConfig[_0x2d618c(0x26f)](_0x2d618c(0x323))[_0x2d618c(0x1c2)]({'botID':botID})[_0x2d618c(0x253)](_0x15776e)[_0x2d618c(0x289)]();}function restoreOrders(){const _0x1df1e0=_0x56398e;let _0x438fb2;config[_0x1df1e0(0x2a2)]&&allOpenOrders['forEach'](_0x14e35f=>{const _0x2068fb=_0x1df1e0,_0x5e4d93=config['openOrders'][_0x2068fb(0x1c2)](_0x4cc43c=>_0x4cc43c[_0x2068fb(0x286)]==_0x14e35f['id']);_0x5e4d93&&(lastOrders[_0x2068fb(0x231)](_0x5e4d93),_0x438fb2=_0x14e35f[_0x2068fb(0x23e)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x1df1e0(0x2c5)],validateOrdersState=_0x1df1e0(0x24c),allOrdersPlaced=!![];const _0x3356a0=new Date()[_0x1df1e0(0x2c9)](),_0x449384=config[_0x1df1e0(0x30a)]==_0x1df1e0(0x30e)?validateOrderTimeout*0x3c*0x3e8:config[_0x1df1e0(0x2da)]*0x3c*0x3e8;if(_0x438fb2+_0x449384>_0x3356a0){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x339bd4=_0x1df1e0;validateOrders(_0x339bd4(0x259));},_0x438fb2+_0x449384-_0x3356a0);}else validateOrders(_0x1df1e0(0x259));}}async function sendPortfolioTelegram(){const _0x52184f=_0x56398e;if(!coinsLoaded){process[_0x52184f(0x2cd)]({'telegrammsg':_0x52184f(0x1dd)},_0x318d0f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x389046=[_0x52184f(0x204),_0x52184f(0x202),_0x52184f(0x218),_0x52184f(0x1db)],_0x21cc8d=_0x389046[_0x52184f(0x29a)](config[_0x52184f(0x328)])?0x2:0x8;let _0x375fc4='';if(config['showname'])_0x375fc4=_0x52184f(0x2df)+config[_0x52184f(0x1f0)]+_0x52184f(0x248);else _0x375fc4=_0x52184f(0x303)+botID+_0x52184f(0x248);const _0x47d894=getKPIs('basecoin'),_0x281d4d=getKPIs('net-basecoin');_0x375fc4+=_0x52184f(0x2e1),_0x375fc4+=_0x47d894[_0x52184f(0x2e0)]+_0x52184f(0x224)+_0x47d894[_0x52184f(0x251)]+'\x20\x0a',_0x375fc4+=_0x47d894['rightTxt']+':\x20'+_0x47d894['change']+_0x52184f(0x2b0),_0x375fc4+=_0x281d4d[_0x52184f(0x2e0)]+':\x20'+_0x281d4d[_0x52184f(0x251)]+'\x20'+config[_0x52184f(0x328)]+'\x0a',_0x375fc4+=_0x281d4d[_0x52184f(0x1f7)]+':\x20'+_0x281d4d['change']+_0x52184f(0x2b0),_0x375fc4+='\x0a',_0x375fc4+=_0x52184f(0x1f6),_0x375fc4+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x375fc4+=_0x52184f(0x1f6),currentCoins[_0x52184f(0x229)](_0x5b7b50=>{const _0x1c528a=_0x52184f;_0x375fc4+=_0x5b7b50[_0x1c528a(0x2cf)][_0x1c528a(0x203)](0x7)+'|\x20'+formatPad(_0x5b7b50['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5b7b50[_0x1c528a(0x284)],0x2,0x6)+'|\x20'+formatPad(_0x5b7b50[_0x1c528a(0x1e8)]*0x64,0x2,0x6)+'\x0a';}),_0x375fc4+=_0x52184f(0x318),process['send']({'telegrammsg':_0x375fc4},_0x2be101=>{});}function formatPad(_0x1fa879,_0x2c7d39,_0x2eb48d){const _0x1f3329=_0x56398e,_0x5acb0b=formatResultString(_0x1fa879,_0x2c7d39);return _0x5acb0b?_0x5acb0b[_0x1f3329(0x2b3)](_0x2eb48d):''[_0x1f3329(0x2b3)](_0x2eb48d);}function logHistory(_0x42822c,_0x1b8fae,_0x2fdb01=''){const _0x14ce98=_0x56398e;let _0x9769f7={'time':getTimeStamp(),'type':_0x42822c,'event':_0x1b8fae};dbLogs[_0x14ce98(0x26f)](_0x14ce98(0x225))[_0x14ce98(0x231)](_0x9769f7)[_0x14ce98(0x289)]();if(_0x2fdb01=='')_0x2fdb01=_0x1b8fae;proxyEmit(_0x14ce98(0x207),{'log':_0x9769f7,'summary':_0x2fdb01}),process[_0x14ce98(0x2cd)]({'telegram':{..._0x9769f7,'botname':config['botname'],'showname':config[_0x14ce98(0x2b9)]}},_0x51d09c=>{}),logger['full'](''+_0x9769f7[_0x14ce98(0x207)]);}function _0x2913(_0x4707f5,_0x21c292){const _0x426155=_0x4a69();return _0x2913=function(_0x4a3420,_0x4dbade){_0x4a3420=_0x4a3420-0x1be;let _0x4a6983=_0x426155[_0x4a3420];return _0x4a6983;},_0x2913(_0x4707f5,_0x21c292);}function emitHistory(_0x356a2b={}){const _0x12d3f2=_0x56398e;Object['keys'](_0x356a2b)['length']==0x0&&(_0x356a2b={'type':['order',_0x12d3f2(0x207)],'event':'','page':0x1});if(_0x356a2b[_0x12d3f2(0x1fb)][_0x12d3f2(0x29a)](_0x12d3f2(0x207)))_0x356a2b[_0x12d3f2(0x1fb)][_0x12d3f2(0x1d7)](_0x356a2b[_0x12d3f2(0x1fb)][_0x12d3f2(0x27a)](_0x12d3f2(0x207)),0x1,'error',_0x12d3f2(0x308));if(dbLogs[_0x12d3f2(0x201)](_0x12d3f2(0x225))[_0x12d3f2(0x251)]()){let _0x16f08b=dbLogs[_0x12d3f2(0x26f)]('logs')[_0x12d3f2(0x2aa)](_0x1ce74d=>{const _0x4dad6d=_0x12d3f2;if(_0x356a2b['type'][_0x4dad6d(0x237)]==0x0)return![];else return _0x356a2b[_0x4dad6d(0x1fb)][_0x4dad6d(0x29a)](_0x1ce74d[_0x4dad6d(0x1fb)]);})[_0x12d3f2(0x2aa)](_0x4109df=>{const _0x5a674a=_0x12d3f2;if(_0x356a2b['event']=='')return!![];else return _0x4109df[_0x5a674a(0x207)][_0x5a674a(0x21a)]()['includes'](_0x356a2b[_0x5a674a(0x207)][_0x5a674a(0x21a)]());})['sortBy'](_0x12d3f2(0x292)),_0x3f5bba=_0x16f08b['value']()['length'];_0x16f08b=_0x16f08b[_0x12d3f2(0x2f6)]()[_0x12d3f2(0x227)]((_0x356a2b[_0x12d3f2(0x25a)]-0x1)*logPageSize,_0x356a2b['page']*logPageSize-0x1)['reverse']()[_0x12d3f2(0x251)](),proxyEmit('event-history',{'logs':_0x16f08b,'total':_0x3f5bba});}else proxyEmit(_0x12d3f2(0x31c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2bd871){const _0x168b82=_0x56398e;if(dbLogs[_0x168b82(0x201)]('logs')[_0x168b82(0x251)]()){const _0x297061=dbLogs[_0x168b82(0x26f)]('logs')[_0x168b82(0x290)](_0x168b82(0x292))['filter'](_0x562c4a=>{const _0x4e2db2=_0x168b82;return _0x562c4a[_0x4e2db2(0x1fb)]=='order';})['value']();dbLogs['get'](_0x168b82(0x225))[_0x168b82(0x2d8)]()[_0x168b82(0x289)](),dbLogs['get']('logs')[_0x168b82(0x253)](_0x297061)[_0x168b82(0x289)](),emitHistory(_0x2bd871);}}async function pauseBot(_0x380038=''){const _0x381c66=_0x56398e,_0x2a6c3=new Date()[_0x381c66(0x2c9)]();if(!lastErrorShown||_0x2a6c3-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2a6c3;!lastBotPause?(lastBotPause=_0x2a6c3,consecutivePauses=0x1):(_0x2a6c3-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x381c66(0x2cd)]({'stop':_0x381c66(0x24f)},_0x5f45ff=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x381c66(0x2c9)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x380038)_0x380038+=_0x381c66(0x2cb);logHistory(_0x381c66(0x321),_0x380038+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x381c66(0x24d)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x10f0f2=_0x56398e;process[_0x10f0f2(0x2cd)]({'stop':_0x10f0f2(0x2ef)},_0x1ec055=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x10a3c8,_0x20a1a7){const _0x434365=_0x56398e;if(_0x10a3c8['toString']()[_0x434365(0x29a)](_0x434365(0x30c)))return logHistory(_0x434365(0x321),config['exchange']+_0x434365(0x1cf)),![];else{if(_0x10a3c8['toString']()[_0x434365(0x29a)](_0x434365(0x2b1)))return logHistory(_0x434365(0x321),config[_0x434365(0x322)]+_0x434365(0x277)),![];else{if(_0x10a3c8['toString']()[_0x434365(0x29a)](_0x434365(0x296)))return logHistory(_0x434365(0x321),config['exchange']+_0x434365(0x27c)+config[_0x434365(0x322)]),![];else await handleError(_0x10a3c8,_0x20a1a7);}}}async function handleError(_0x3e68d8,_0xb8b631,_0x47b399=''){const _0x1b4272=_0x56398e;if(_0x3e68d8['toString']()[_0x1b4272(0x29a)](_0x1b4272(0x30f)))await pauseBot(config[_0x1b4272(0x322)]+_0x1b4272(0x2cc));else{if(_0x3e68d8[_0x1b4272(0x1cd)]()['includes'](_0x1b4272(0x31d)))await pauseBot(config['exchange']+_0x1b4272(0x1c3));else{if(_0x3e68d8[_0x1b4272(0x1cd)]()[_0x1b4272(0x29a)](_0x1b4272(0x29b)))await pauseBot(config['exchange']+'\x20not\x20responding');else{if(_0x3e68d8[_0x1b4272(0x1cd)]()[_0x1b4272(0x29a)](_0x1b4272(0x22e)))logHistory(_0x1b4272(0x321),_0xb8b631+_0x1b4272(0x1df)),logHistory(_0x1b4272(0x321),_0x1b4272(0x213)),await killBot();else{if(_0x3e68d8[_0x1b4272(0x1cd)]()['includes'](_0x1b4272(0x2ae)))logHistory(_0x1b4272(0x321),_0xb8b631+_0x1b4272(0x23f)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3e68d8[_0x1b4272(0x1cd)]()[_0x1b4272(0x29a)](_0x1b4272(0x30c)))logHistory(_0x1b4272(0x321),_0xb8b631+_0x1b4272(0x2cb)+config[_0x1b4272(0x322)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1b4272(0x321),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3e68d8[_0x1b4272(0x1cd)]()[_0x1b4272(0x29a)](_0x1b4272(0x2b1)))logHistory(_0x1b4272(0x321),_0xb8b631+'\x20|\x20'+config[_0x1b4272(0x322)]+_0x1b4272(0x277)),logHistory(_0x1b4272(0x321),_0x1b4272(0x213)),await killBot();else{if(_0x3e68d8[_0x1b4272(0x1cd)]()['includes'](_0x1b4272(0x296)))logHistory(_0x1b4272(0x321),_0xb8b631+_0x1b4272(0x2cb)+config[_0x1b4272(0x322)]+_0x1b4272(0x1fd)+config[_0x1b4272(0x322)]),logHistory(_0x1b4272(0x321),_0x1b4272(0x213)),await killBot();else _0x3e68d8[_0x1b4272(0x1cd)]()[_0x1b4272(0x29a)]('InsufficientFunds')?logHistory(_0x1b4272(0x321),_0xb8b631+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x47b399):(logger[_0x1b4272(0x2bd)](_0xb8b631+_0x1b4272(0x264),_0x3e68d8),await pauseBot(_0x1b4272(0x2be)));}}}}}}}}function formatResult(_0x416704,_0x524497){return parseFloat(_0x416704['toFixed'](_0x524497));}function formatResultTruncate(_0xe109d3,_0x20d2ef){const _0x42ed1c=_0x56398e;let _0x1b2816=formatResultString(_0xe109d3,0xa),_0x2f463e=_0x1b2816[_0x42ed1c(0x27a)]('.');return _0x2f463e!=-0x1&&(_0x1b2816=_0x1b2816[_0x42ed1c(0x227)](0x0,_0x2f463e+_0x20d2ef+0x1)),Number(_0x1b2816);}function formatResultString(_0x4ee24e,_0x1d63bb){const _0x52ed9f=_0x56398e;let _0x314c67;if(!(''+_0x4ee24e)[_0x52ed9f(0x29a)]('e'))_0x314c67=+(Math['round'](_0x4ee24e+'e+'+_0x1d63bb)+'e-'+_0x1d63bb);else{let _0x1e5cd7=(''+_0x4ee24e)[_0x52ed9f(0x2d9)]('e'),_0x1af1a7='';+_0x1e5cd7[0x1]+_0x1d63bb>0x0&&(_0x1af1a7='+'),_0x314c67=+(Math['round'](+_0x1e5cd7[0x0]+'e'+_0x1af1a7+(+_0x1e5cd7[0x1]+_0x1d63bb))+'e-'+_0x1d63bb);}return Number(_0x314c67)[_0x52ed9f(0x214)](_0x1d63bb);}function getServerTime(){const _0x2ef926=_0x56398e,_0x16d4ff=new Date();return _0x16d4ff[_0x2ef926(0x219)]()+'/'+(_0x16d4ff[_0x2ef926(0x20e)]()+0x1)[_0x2ef926(0x1cd)]()[_0x2ef926(0x2b3)](0x2,'0')+'/'+_0x16d4ff['getDate']()[_0x2ef926(0x1cd)]()[_0x2ef926(0x2b3)](0x2,'0')+'\x20'+_0x16d4ff['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x16d4ff[_0x2ef926(0x238)]()['toString']()['padStart'](0x2,'0')+':'+_0x16d4ff['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5eeabc=_0x56398e,_0x2cf529=shiftedTime();return _0x2cf529['getFullYear']()+'/'+(_0x2cf529[_0x5eeabc(0x20e)]()+0x1)['toString']()[_0x5eeabc(0x2b3)](0x2,'0')+'/'+_0x2cf529[_0x5eeabc(0x21f)]()[_0x5eeabc(0x1cd)]()[_0x5eeabc(0x2b3)](0x2,'0')+'\x20'+_0x2cf529['getHours']()[_0x5eeabc(0x1cd)]()[_0x5eeabc(0x2b3)](0x2,'0')+':'+_0x2cf529[_0x5eeabc(0x238)]()['toString']()[_0x5eeabc(0x2b3)](0x2,'0')+':'+_0x2cf529[_0x5eeabc(0x266)]()[_0x5eeabc(0x1cd)]()[_0x5eeabc(0x2b3)](0x2,'0');}function getDate(){const _0x3a18ec=_0x56398e,_0x279f53=shiftedTime();return _0x279f53[_0x3a18ec(0x219)]()+'/'+(_0x279f53[_0x3a18ec(0x20e)]()+0x1)[_0x3a18ec(0x1cd)]()['padStart'](0x2,'0')+'/'+_0x279f53[_0x3a18ec(0x21f)]()[_0x3a18ec(0x1cd)]()['padStart'](0x2,'0');}function getHour(){const _0x4bf7e8=_0x56398e,_0x5f28f6=shiftedTime();return _0x5f28f6[_0x4bf7e8(0x28a)]()[_0x4bf7e8(0x1cd)]()['padStart'](0x2,'0');}function sleep(_0x1ba715){return new Promise(_0x2cec62=>setTimeout(_0x2cec62,_0x1ba715));}function shiftedTime(){const _0x3a738f=_0x56398e,_0x306fb2=new Date();let _0x3b3fdf=_0x306fb2;if(config&&config['timeshift']!==0x0)_0x3b3fdf=fns['add'](_0x306fb2,{'hours':config[_0x3a738f(0x325)]});return _0x3b3fdf;}function timer(_0x13a532){const _0xc2ed1c=_0x56398e,_0x286dbe=new Date();!lasttime?console[_0xc2ed1c(0x275)](_0xc2ed1c(0x2fb),_0x13a532,_0x286dbe):console[_0xc2ed1c(0x275)](_0xc2ed1c(0x2fb),_0x13a532,(_0x286dbe-lasttime)/0x3e8),lasttime=_0x286dbe;}