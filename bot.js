const _0x4b3878=_0x4354;(function(_0x107788,_0x4edbe1){const _0x42992e=_0x4354,_0x148f01=_0x107788();while(!![]){try{const _0x4eeeda=parseInt(_0x42992e(0x122))/0x1+parseInt(_0x42992e(0x1ba))/0x2+-parseInt(_0x42992e(0x1f1))/0x3*(-parseInt(_0x42992e(0x17d))/0x4)+-parseInt(_0x42992e(0x1cd))/0x5+-parseInt(_0x42992e(0x224))/0x6+parseInt(_0x42992e(0x1e4))/0x7+parseInt(_0x42992e(0x18c))/0x8*(-parseInt(_0x42992e(0x234))/0x9);if(_0x4eeeda===_0x4edbe1)break;else _0x148f01['push'](_0x148f01['shift']());}catch(_0x461f85){_0x148f01['push'](_0x148f01['shift']());}}}(_0x3134,0x6f4e4));const _0xe58d6a=function(){let _0x4a4c78=!![];return function(_0x3870bd,_0x5f340a){const _0x9be7f7=_0x4a4c78?function(){const _0x448626=_0x4354;if(_0x5f340a){const _0x3b30e1=_0x5f340a[_0x448626(0x210)](_0x3870bd,arguments);return _0x5f340a=null,_0x3b30e1;}}:function(){};return _0x4a4c78=![],_0x9be7f7;};}(),_0x38a277=_0xe58d6a(this,function(){const _0x37ff4c=_0x4354;return _0x38a277[_0x37ff4c(0x1d2)]()[_0x37ff4c(0x135)](_0x37ff4c(0x226))[_0x37ff4c(0x1d2)]()[_0x37ff4c(0x1c8)](_0x38a277)[_0x37ff4c(0x135)](_0x37ff4c(0x226));});_0x38a277();'use strict';const ccxt=require(_0x4b3878(0x1d6)),low=require(_0x4b3878(0x18b)),FileSync=require(_0x4b3878(0x18e)),fs=require('fs'),fns=require(_0x4b3878(0x209)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x4b3878(0x158)),Crypt=require(_0x4b3878(0x10f))[_0x4b3878(0x179)];let exchange,wsClient;global['ticker']={},global[_0x4b3878(0x12b)]={};let ws1=[],ws2=null,ws3=[];const exceptions=['DAI/','HOT/BTC',_0x4b3878(0x232),_0x4b3878(0x145),_0x4b3878(0x11e),_0x4b3878(0x1ac)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};function _0x3134(){const _0x21782a=['Bot\x20','limit-high','recreateCoinResults()','timeout','milliseconds','remove','\x20-\x20bot\x20not\x20started','kline','starting-balances','no\x20open\x20orders','NANO/','getHours','emojibuy','loadMarkets','229784ekqdTK','length','filter','date','log','emojisell','push','argv','event-history','change',',\x20must\x20be\x20a\x203\x20digit\x20number','symbol','function','restart','cancelOrders()','getDate','InsufficientFunds','sort','exit','search','page','limits','enabled','ExchangeNotAvailable','apiKey','-results.json','\x20portfolio:\x20\x0a\x0a','writeFile','/USDT','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','stringify','kill','symbols','remainingSymbols','\x20hour','XEM/BUSD','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','</pre>','existsSync','RSA-OAEP','2.5.0','cancelLoading','\x20order:\x20','deleteHistoryAlerts','Order\x20filled:\x20','\x20|\x20Error\x20details:\x20','apiSecret','breakeven','min','\x20orders\x20in\x20less\x20than\x20','fetchClosedOrders','portfolio','format','************','binance','cooldown','changes','startdate','keys','abs','configuration-stored','AuthenticationError','coin','ETH','write','cost','ordertype','\x20-\x20','order','exchange','timeshift','value','placeOrder()','trade','<pre>','BTC','parse','parseISO','cancelOrder','bid','Error:\x20Invalid\x20argument\x20','defaults','toLowerCase','add','getTime','outboundAccountPosition','get','Crypt','total','precision','currency','196oFWLAu','ask','loadSymbols()','reconnected','getFiat()','botname','padStart','OrderNotFound','wss://stream.binance.com:9443','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Binance\x20API\x20key\x20is\x20invalid','MIN_NOTIONAL','fetchOpenOrders','number','lowdb','665192bwBcQH','\x20minutes\x20-\x20','lowdb/adapters/FileSync','-events.json','send','initial','isEqual','error','Order(s)\x20filled\x20-\x20','valid','storeHeadless','sha256','includes','bb-secure.json','fee','close','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','fees','Failed\x20to\x20load\x20coin\x20data\x20for\x20','orderId','entries','\x20|\x20Binance\x20API\x20key\x20invalid','./config/','exec','bot-','bb-settings.json','success','realized','limit','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20>\x20','offset','YOYOW/','Limit\x20(high-margin)','mkdirSync','spot','target','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','datetime','ongoing','has','performance','coins','side','toggleBotMode','-------------------------------\x0a','1360358nAYaJU','delta','API\x20or\x20clock\x20sync\x20issue','configuration','splice','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','eventType','Binance\x20not\x20available\x20(2)','\x20|\x20','buys','getFullYear','-config.json','map','Binance\x20API\x20blocked','constructor','subscribeSymbol24hrTicker','Invalid\x20quantity','test','find','778445tNJdkA','Order\x20amount\x20is\x20invalid:\x20','ticker','headless','yyyy/MM/dd','toString','EUR','getMinutes','Binance\x20API\x20secret\x20is\x20invalid','ccxt','usd','subscribeSpotUserDataStream','args','2.3.5','liquidity','shift','accumulatedQuantity','threshold','logs',')\x20|\x20Error\x20details:\x20','filled','BNB/','\x20minutes','2896845CTGOXX','startnumber','event','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','RequestTimeout','padEnd','toFixed','sell','getPortfolio()','set','-performance.json','44913YGNFuO','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','priceChangePercent','wsKey','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','amount','Manual\x20balancing\x20required:\x20','market','BUSD','limit-low','recreate','progress','Market','distribution','001','BNB','fromCodePoint','cancel','fetchTickers','sells','.json','WebSockets(','settings','InvalidNonce','date-fns','sortBy','excluded','max','privateKey','commissionAsset','cumulativeQuoteAssetTransactedQty','apply','Binance\x20not\x20available\x20(1)','split','balancing\x20resumes\x20when\x20cooldown\x20ends','concat','userData','last','eur','commission','secure','round','slice','timestamp','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','getSeconds','storeConfiguration','type','botID','version','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','3186846TWdAOn','getStartingBalances','(((.+)+)+)+$','showname','price','bot','balances','reverse','running','time','/backup/','eventTime','replace','wss://stream.binance.us:9443','HOT/EUR','getMonth','99ydZUIg','final','binanceus','change24h','forEach','basecoin','initws()','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','isArray','emitHistory','startprice','buy','./version.json','indexOf','string','assign','createOrder','data','hybrid-crypto-js','USDT','join','message','balancing\x20resumed'];_0x3134=function(){return _0x21782a;};return _0x3134();}const serverversion=require(_0x4b3878(0x109))[_0x4b3878(0x222)],botID=process[_0x4b3878(0x129)][0x2]||_0x4b3878(0x1ff),pattern=/^[0-9]{3}$/;!pattern[_0x4b3878(0x1cb)](botID)&&(console['log'](_0x4b3878(0x172)+botID+_0x4b3878(0x12c)),process[_0x4b3878(0x134)](0x1));const userID=process['argv'][0x3]||'',configpath=userID?_0x4b3878(0x1a2)+userID+'/':_0x4b3878(0x1a2);!fs[_0x4b3878(0x148)](configpath)&&fs[_0x4b3878(0x1ae)](configpath);const configfile=configpath+'bot-'+botID+_0x4b3878(0x1c5),logfile=configpath+_0x4b3878(0x1a4)+botID+_0x4b3878(0x18f),performancefile=configpath+_0x4b3878(0x1a4)+botID+_0x4b3878(0x1f0),coinresultsfile=configpath+_0x4b3878(0x1a4)+botID+_0x4b3878(0x13b),settingsfile=configpath+_0x4b3878(0x1a5),securefile=configpath+_0x4b3878(0x199),configbackuppath=configpath+_0x4b3878(0x22e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4b3878(0x173)]({'logs':[]})[_0x4b3878(0x162)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4b3878(0x173)]({'data':[]})[_0x4b3878(0x162)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x4b3878(0x162)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4b3878(0x173)]({'coins':[]})[_0x4b3878(0x162)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x33c1e6)=>{},'debug':(..._0x58febb)=>{},'notice':(..._0x42ca41)=>{},'info':(..._0x17c9cc)=>{},'warning':(..._0x3e068a)=>{},'error':async function(..._0x6e2d02){const _0x55cdb4=_0x4b3878,_0x4060af=new Date()[_0x55cdb4(0x176)]();if(!lastErrorShown||_0x4060af-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x55cdb4(0x176)]();let _0x5717fb='';if(_0x6e2d02[0x0])_0x5717fb+=_0x6e2d02[0x0];if(_0x6e2d02[0x1]&&_0x6e2d02[0x1][_0x55cdb4(0x193)]&&_0x6e2d02[0x1][_0x55cdb4(0x193)][_0x55cdb4(0x112)])_0x5717fb+=_0x55cdb4(0x165)+_0x6e2d02[0x1][_0x55cdb4(0x193)][_0x55cdb4(0x112)];logging(_0x55cdb4(0x206)+consecutivePauses+_0x55cdb4(0x1e0),''+_0x5717fb),await pauseBot(_0x55cdb4(0x211));}}},crypt=new Crypt({'md':_0x4b3878(0x197),'rsaStandard':_0x4b3878(0x149)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x4b3878(0x168)]!=config[_0x4b3878(0x168)]&&updateTimeshift(settings[_0x4b3878(0x168)]);process['send']({'started':_0x4b3878(0x22c)},_0x264b08=>{}),initializeProcessListeners();function proxyEmit(_0x3a5894,_0x3faffa=null){const _0x1b7f52=_0x4b3878;process[_0x1b7f52(0x190)]({'function':_0x3a5894,'args':_0x3faffa},_0x1c410e=>{});}function initializeProcessListeners(){process['on']('message',_0x347b7a=>{const _0x7c94ce=_0x4354;switch(Object[_0x7c94ce(0x15c)](_0x347b7a)[0x0]){case _0x7c94ce(0x168):_0x347b7a[_0x7c94ce(0x168)]!=undefined&&(settings[_0x7c94ce(0x168)]=_0x347b7a[_0x7c94ce(0x168)],updateTimeshift(settings[_0x7c94ce(0x168)]));break;case _0x7c94ce(0x12e):switch(_0x347b7a[_0x7c94ce(0x12e)]){case'initclient':initclient();break;case _0x7c94ce(0x1b8):toggleBotMode();break;case _0x7c94ce(0x106):emitHistory(_0x347b7a['args']);break;case _0x7c94ce(0x14d):deleteHistoryAlerts(_0x347b7a[_0x7c94ce(0x1d9)]);break;case'getPortfolio':getPortfolio(_0x347b7a[_0x7c94ce(0x1d9)]);break;case _0x7c94ce(0x21f):storeConfiguration(_0x347b7a['args']);break;case _0x7c94ce(0x196):storeHeadless(_0x347b7a['args']);break;case _0x7c94ce(0x225):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x347b7a[_0x7c94ce(0x1d9)]);break;case _0x7c94ce(0x14b):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xc4969=_0x4b3878;if(pidBalances)clearTimeout(pidBalances);if(config[_0xc4969(0x13a)]!=''){await initExchange(config[_0xc4969(0x13a)],config['apiSecret']);let _0x32314a=await loadSymbols();if(_0x32314a){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x150e25,_0x37455b){const _0x30dffa=_0x4b3878,_0x3c0b9f=ccxt[config[_0x30dffa(0x167)]];let _0x55e54c;switch(config[_0x30dffa(0x167)]){case _0x30dffa(0x158):_0x55e54c=_0x30dffa(0x185);break;case _0x30dffa(0x236):_0x55e54c=_0x30dffa(0x231);break;default:_0x55e54c=_0x30dffa(0x185);}exchange=new _0x3c0b9f({'apiKey':_0x150e25,'secret':_0x37455b,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x150e25,'api_secret':_0x37455b,'beautify':!![],'wsUrl':_0x55e54c},logger);!wstriggersset&&(wstriggersset=!![],wsClient['on']('formattedMessage',_0x3f1e2d=>{const _0x1ecfad=_0x30dffa;if(isWsFormattedKline(_0x3f1e2d)){global[_0x1ecfad(0x1cf)][_0x3f1e2d[_0x1ecfad(0x11b)][_0x1ecfad(0x12d)]]=_0x3f1e2d[_0x1ecfad(0x11b)][_0x1ecfad(0x19b)];return;}else{if(isWsFormatted24hrTicker(_0x3f1e2d)){global['change'][_0x3f1e2d[_0x1ecfad(0x12d)]]=_0x3f1e2d[_0x1ecfad(0x1f3)];return;}else{if(!Array[_0x1ecfad(0x105)](_0x3f1e2d)&&_0x3f1e2d[_0x1ecfad(0x1f4)]['includes'](_0x1ecfad(0x215))){if(_0x3f1e2d['wsMarket'][_0x1ecfad(0x198)](_0x1ecfad(0x1af))){updateNumberCoins(_0x3f1e2d);return;}}}}}),wsClient['on'](_0x30dffa(0x180),async _0x172a1c=>{if(!botPaused)currentCoins=await getCoins(!![]);}));let _0x4966e6=config[_0x30dffa(0x167)]=='binanceus'?_0x30dffa(0x110):_0x30dffa(0x1d3),_0x9a32a3=config[_0x30dffa(0x239)]=='ETH'?_0x30dffa(0x161):_0x30dffa(0x16d);stablecoins={'eur':{'coin':''+_0x9a32a3+_0x4966e6,'symbol':_0x9a32a3+'/'+_0x4966e6},'usd':{'coin':_0x9a32a3+'USDT','symbol':_0x9a32a3+_0x30dffa(0x13e)}};}async function loadSymbols(){const _0x3fd2e3=_0x4b3878;let _0x4c3c7e;try{markets=await exchange[_0x3fd2e3(0x121)](),allSymbols=exchange[_0x3fd2e3(0x142)][_0x3fd2e3(0x124)](_0x1b4d35=>{const _0x489234=_0x3fd2e3;let _0x281088=![];return exceptions[_0x489234(0x238)](_0x1fd0d8=>{const _0x39833c=_0x489234;if(_0x1b4d35[_0x39833c(0x198)](_0x1fd0d8))_0x281088=!![];}),!_0x281088;}),_0x4c3c7e=!![];}catch(_0x330f1c){await handleError(_0x330f1c,_0x3fd2e3(0x17f)),_0x4c3c7e=![];}return _0x4c3c7e;}function _0x4354(_0xd2bce0,_0x1054c9){const _0x397567=_0x3134();return _0x4354=function(_0x38a277,_0xe58d6a){_0x38a277=_0x38a277-0x105;let _0x3134df=_0x397567[_0x38a277];return _0x3134df;},_0x4354(_0xd2bce0,_0x1054c9);}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1aa0ec=getNormalizedPerformance();emitPerformance(_0x1aa0ec),await getStartingBalances(_0x1aa0ec);}async function toggleBotMode(){const _0x24df6a=_0x4b3878;let _0x10e770=dbConfig[_0x24df6a(0x178)](_0x24df6a(0x229))[_0x24df6a(0x1cc)]({'botID':botID})[_0x24df6a(0x169)]();if(_0x10e770){const _0x427650=!_0x10e770['headless'];dbConfig[_0x24df6a(0x178)]('bot')[_0x24df6a(0x1cc)]({'botID':botID})[_0x24df6a(0x10c)]({'headless':_0x427650})[_0x24df6a(0x162)](),config[_0x24df6a(0x1d0)]=_0x427650,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x301979=_0x4b3878;process[_0x301979(0x190)]({'updatebotmanager':!![]},_0x3898b2=>{});}function cleanws(){const _0x17872b=_0x4b3878;wsinitialized=![];ws1&&(ws1[_0x17872b(0x238)](_0x52b94d=>{const _0x306c67=_0x17872b;try{wsClient[_0x306c67(0x19b)](_0x52b94d);}catch(_0x1e4866){}}),ws1=[]);if(ws2){try{wsClient[_0x17872b(0x19b)](ws2);}catch(_0x550f14){}ws2=null;}ws3&&(ws3[_0x17872b(0x238)](_0x3fa85e=>{const _0x41cea6=_0x17872b;try{wsClient[_0x41cea6(0x19b)](_0x3fa85e);}catch(_0x4227fd){}}),ws3=[]);}async function initws(){const _0x582e35=_0x4b3878;cleanws();let _0x16c48b=[];currentCoins[_0x582e35(0x238)](_0x392db0=>{const _0x163031=_0x582e35;if(_0x392db0[_0x163031(0x160)]!=config[_0x163031(0x239)])_0x16c48b[_0x163031(0x128)](_0x392db0[_0x163031(0x12d)]);});if(!_0x16c48b[_0x582e35(0x198)](stablecoins[_0x582e35(0x217)][_0x582e35(0x12d)]))_0x16c48b['push'](stablecoins[_0x582e35(0x217)][_0x582e35(0x12d)]);if(!_0x16c48b['includes'](stablecoins[_0x582e35(0x1d7)][_0x582e35(0x12d)]))_0x16c48b[_0x582e35(0x128)](stablecoins[_0x582e35(0x1d7)][_0x582e35(0x12d)]);if(!_0x16c48b[_0x582e35(0x198)](_0x582e35(0x1e2)+config[_0x582e35(0x239)]))_0x16c48b['push'](_0x582e35(0x1e2)+config[_0x582e35(0x239)]);try{_0x16c48b[_0x582e35(0x238)]((_0x4a5215,_0x35c325)=>{const _0x2f9d37=_0x582e35;ws1[_0x35c325]=wsClient['subscribeSpotKline'](noslash(_0x4a5215),'1m'),ws3[_0x35c325]=wsClient[_0x2f9d37(0x1c9)](noslash(_0x4a5215),'spot');}),ws2=wsClient[_0x582e35(0x1d8)]();}catch(_0x1c99f9){await handleError(_0x1c99f9,_0x582e35(0x23a));}let _0xad7893,_0x855371=0x0;loading['remainingSymbols']=[];let _0x2bd5dc=0x0;_0x16c48b[_0x582e35(0x238)](_0x2f0e87=>{const _0x47da05=_0x582e35;loading[_0x47da05(0x143)]['push'](_0x2f0e87);}),loadingCanceled=![];let _0xc1cd2d=![];while(_0xad7893!=_0x16c48b[_0x582e35(0x123)]){_0xad7893=0x0,_0x16c48b[_0x582e35(0x238)](_0x213a02=>{const _0x296d8c=_0x582e35;global[_0x296d8c(0x1cf)][noslash(_0x213a02)]&&(loading[_0x296d8c(0x143)]=loading[_0x296d8c(0x143)]['filter'](_0x5273b7=>_0x5273b7!=_0x213a02),_0xad7893++);}),loading[_0x582e35(0x1fc)]=Math['round'](_0xad7893/_0x16c48b[_0x582e35(0x123)]*0x64);loading[_0x582e35(0x1fc)]!=0x64&&(_0x2bd5dc>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2bd5dc>0x3c*0x5&&!_0xc1cd2d&&(_0xc1cd2d=!![],logHistory('error',_0x582e35(0x19e)+loading[_0x582e35(0x143)]+_0x582e35(0x11a))));if(loadingCanceled){loading[_0x582e35(0x202)]=!![],emitLoadingProgress();break;}else _0xad7893!=_0x855371&&(_0x855371=_0xad7893,emitLoadingProgress()),_0x2bd5dc++,await sleep(0xc8);}_0xc1cd2d&&logHistory('success',_0x582e35(0x1bf));if(_0xad7893==_0x16c48b[_0x582e35(0x123)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x24fdc9=_0x4b3878;let _0x3079de=0x0,_0x58f1aa=0x0;try{_0x3079de=global[_0x24fdc9(0x1cf)][stablecoins[_0x24fdc9(0x217)][_0x24fdc9(0x160)]],_0x58f1aa=global[_0x24fdc9(0x1cf)][stablecoins[_0x24fdc9(0x1d7)][_0x24fdc9(0x160)]];}catch(_0x5e620a){await handleError(_0x5e620a,_0x24fdc9(0x181));}return{'eur':Number(_0x3079de),'usd':Number(_0x58f1aa)};}function setStartDatePerformance(){const _0x2f7be6=_0x4b3878;if(config&&config[_0x2f7be6(0x1db)][0x0][_0x2f7be6(0x15a)][_0x2f7be6(0x123)]!=0x0){const _0x5ef09b=config[_0x2f7be6(0x1db)][0x0][_0x2f7be6(0x15a)];dbPerformance[_0x2f7be6(0x178)]('data')[_0x2f7be6(0x1cc)]({'date':config['startdate']})['assign']({'coins':_0x5ef09b})[_0x2f7be6(0x162)]();}}async function recreateCoinResults(){const _0x446ffc=_0x4b3878;let _0x379970,_0x1fef98=[];try{const _0x15c290=fns[_0x446ffc(0x156)](fns[_0x446ffc(0x16f)](config['startdate'][_0x446ffc(0x230)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x2175a0 of currentCoins){if(_0x2175a0[_0x446ffc(0x160)]!=config['basecoin']){let _0x18b5ec=0x0,_0x5358e5,_0x34e98f;_0x379970=await getAllEventOrders(_0x2175a0[_0x446ffc(0x12d)]);if(_0x379970[_0x446ffc(0x123)]>0x0)_0x379970['forEach'](_0x374098=>{const _0x5ce116=_0x446ffc,_0x164b08=_0x2175a0[_0x5ce116(0x12d)][_0x5ce116(0x198)](config[_0x5ce116(0x239)]+'/');_0x1fef98[_0x5ce116(0x128)]({'datetime':_0x374098[_0x5ce116(0x1b2)],'coin':_0x2175a0['coin'],'symbol':_0x2175a0[_0x5ce116(0x12d)],'side':_0x374098[_0x5ce116(0x1b7)],'reverse':_0x164b08,'amount':formatResult(_0x374098[_0x5ce116(0x1e1)],0x8),'filled':formatResult(_0x374098[_0x5ce116(0x1e1)],0x8),'price':formatResult(_0x374098[_0x5ce116(0x228)],0x8)}),_0x18b5ec=_0x374098[_0x5ce116(0x1b7)]==_0x5ce116(0x108)?_0x18b5ec+_0x374098['filled']:_0x18b5ec-_0x374098[_0x5ce116(0x1e1)];if(!_0x34e98f)_0x34e98f=_0x374098[_0x5ce116(0x228)];});_0x5358e5=_0x2175a0[_0x446ffc(0x18a)]-_0x18b5ec;let _0x5bf11c;config[_0x446ffc(0x1db)][_0x446ffc(0x238)](_0x17054c=>{const _0x23caf5=_0x446ffc;!_0x5bf11c&&(_0x5bf11c=_0x17054c['changes'][_0x23caf5(0x1cc)](_0x27eeaf=>_0x27eeaf[_0x23caf5(0x160)]==_0x2175a0['coin']),_0x5bf11c&&(_0x5358e5=_0x5bf11c[_0x23caf5(0x18a)],_0x34e98f=_0x5bf11c['price']));});let _0x1a8021=dbCoinResults[_0x446ffc(0x178)]('coins')[_0x446ffc(0x1cc)]({'coin':_0x2175a0['coin']})[_0x446ffc(0x169)]();_0x1a8021={'coin':_0x2175a0['coin'],'number':_0x5358e5,'breakeven':_0x34e98f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x446ffc(0x178)](_0x446ffc(0x1b6))[_0x446ffc(0x1cc)]({'coin':_0x2175a0['coin']})[_0x446ffc(0x10c)](_0x1a8021)[_0x446ffc(0x162)]();}}_0x1fef98[_0x446ffc(0x133)]((_0x19b265,_0x5072d5)=>_0x19b265[_0x446ffc(0x1b2)]>_0x5072d5[_0x446ffc(0x1b2)]?0x1:_0x5072d5[_0x446ffc(0x1b2)]>_0x19b265[_0x446ffc(0x1b2)]?-0x1:0x0);let _0x6b996f=0x0;for(let _0x4221f7 of _0x1fef98){await updateCoinResults(_0x4221f7,!![]);}}catch(_0x58da33){await handleError(_0x58da33,_0x446ffc(0x116));}}async function getAllEventOrders(_0x25a03e){const _0x1f2ff4=_0x4b3878;let _0x21e8ec=[],_0x16aa71=dbLogs[_0x1f2ff4(0x178)](_0x1f2ff4(0x1df))[_0x1f2ff4(0x124)](_0x328a6d=>{const _0x3da70f=_0x1f2ff4,_0x6da6eb=_0x328a6d[_0x3da70f(0x1e6)][_0x3da70f(0x174)]();return _0x6da6eb[_0x3da70f(0x198)](_0x25a03e[_0x3da70f(0x174)]())&&(_0x6da6eb[_0x3da70f(0x198)]('market')&&_0x6da6eb[_0x3da70f(0x198)](_0x3da70f(0x166))||_0x6da6eb[_0x3da70f(0x198)](_0x3da70f(0x1e1))&&_0x6da6eb[_0x3da70f(0x198)](_0x3da70f(0x166)));})[_0x1f2ff4(0x20a)](_0x1f2ff4(0x22d))[_0x1f2ff4(0x169)]();return _0x16aa71['forEach'](_0x41bb6d=>{const _0x49c2b5=_0x1f2ff4,_0x1cb571=_0x41bb6d[_0x49c2b5(0x1e6)][_0x49c2b5(0x198)]('sell')?'sell':_0x49c2b5(0x108),_0x21ff50=/#([0-9]|\.)+\s/i,_0x406c77=Number(_0x21ff50['exec'](_0x41bb6d['event'])[0x0]['slice'](0x1)),_0x4cf5be=/@([0-9]|\.)+$/i,_0x51ddb0=Number(_0x4cf5be[_0x49c2b5(0x1a3)](_0x41bb6d[_0x49c2b5(0x1e6)])[0x0][_0x49c2b5(0x21b)](0x1));_0x21e8ec[_0x49c2b5(0x128)]({'datetime':_0x41bb6d[_0x49c2b5(0x22d)],'coin':symbolToCoin(_0x25a03e),'symbol':_0x25a03e,'side':_0x1cb571,'amount':_0x406c77,'filled':_0x406c77,'price':_0x51ddb0});}),_0x21e8ec;}async function getAllOrders(_0x1f0561,_0x36f981){const _0x5e51f1=_0x4b3878;let _0x56cb4e=[];while(_0x36f981<exchange[_0x5e51f1(0x118)]()){const _0x53c4a7=0x1f4,_0x4af103=await exchange[_0x5e51f1(0x154)](_0x1f0561,_0x36f981,_0x53c4a7);if(_0x4af103[_0x5e51f1(0x123)])_0x36f981=_0x4af103[_0x4af103['length']-0x1][_0x5e51f1(0x21c)]+0x1,_0x56cb4e=_0x56cb4e[_0x5e51f1(0x214)](_0x4af103);else break;}return _0x56cb4e;}async function validate24hChanges(){const _0x121e03=_0x4b3878;let _0x296628;for(const _0x3a1e74 of currentCoins){if(_0x3a1e74[_0x121e03(0x160)]!=config[_0x121e03(0x239)]){let _0x1a225c;_0x3a1e74[_0x121e03(0x22b)]?_0x1a225c=formatResult((0x1/(global[_0x121e03(0x12b)][noslash(_0x3a1e74['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1a225c=global[_0x121e03(0x12b)][noslash(_0x3a1e74['symbol'])],_0x1a225c<config[_0x121e03(0x237)]&&(logHistory(_0x121e03(0x193),_0x3a1e74[_0x121e03(0x160)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1a225c+'%'),logHistory(_0x121e03(0x193),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x121e03(0x193),_0x121e03(0x146)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x5cc3a4=_0x4b3878;let _0x11b214=dbLogs[_0x5cc3a4(0x178)](_0x5cc3a4(0x222))['value']();if(_0x11b214!=_0x5cc3a4(0x1da)){dbLogs[_0x5cc3a4(0x1ef)](_0x5cc3a4(0x222),_0x5cc3a4(0x1da))[_0x5cc3a4(0x162)]();let _0x37cb57=[];const _0x933bb7=dbLogs[_0x5cc3a4(0x178)]('logs')[_0x5cc3a4(0x169)]();_0x933bb7['forEach'](_0xce1054=>{const _0x63c9d0=_0x5cc3a4;_0x37cb57[_0x63c9d0(0x128)]({'time':_0xce1054[_0x63c9d0(0x22d)],'type':_0xce1054['type'],'event':_0xce1054[_0x63c9d0(0x1e6)]});}),dbLogs['get'](_0x5cc3a4(0x1df))['assign'](_0x37cb57)[_0x5cc3a4(0x162)]();}let _0x2e5160=dbConfig['get'](_0x5cc3a4(0x222))[_0x5cc3a4(0x169)]();if(_0x2e5160!=_0x5cc3a4(0x1da)){dbConfig['set'](_0x5cc3a4(0x222),'2.3.5')[_0x5cc3a4(0x162)]();let _0xcf59c2=dbConfig[_0x5cc3a4(0x178)](_0x5cc3a4(0x229))[_0x5cc3a4(0x1cc)]({'botID':botID})[_0x5cc3a4(0x169)]();if(_0xcf59c2){let _0x1a88d3=[];_0xcf59c2[_0x5cc3a4(0x155)][_0x5cc3a4(0x238)](_0x40df11=>{const _0x48ec80=_0x5cc3a4;_0x1a88d3[_0x48ec80(0x128)]({'coin':_0x40df11[_0x48ec80(0x160)],'number':_0x40df11[_0x48ec80(0x1e5)],'price':_0x40df11[_0x48ec80(0x107)]}),delete _0x40df11[_0x48ec80(0x1e5)],delete _0x40df11[_0x48ec80(0x107)];});if(_0x1a88d3[_0x5cc3a4(0x123)]!==0x0)fs[_0x5cc3a4(0x13d)](configbackuppath+('starting-balance-'+botID+_0x5cc3a4(0x205)),JSON[_0x5cc3a4(0x140)](_0x1a88d3,null,0x4),function(_0x3e4253){if(_0x3e4253){}});const _0xb0d09f=(_0x2edde8,_0x567f88)=>{const _0x2e017d=_0x5cc3a4;let _0x53a315=[];_0x567f88['forEach'](_0x381aa3=>{const _0x52bad3=_0x4354,_0x5bbaf2=_0x2edde8[_0x52bad3(0x1cc)](_0x20397f=>_0x20397f['coin']==_0x381aa3['coin']);if(!_0x5bbaf2)_0x53a315['push'](_0x381aa3);});let _0x4db074=[];return _0x2edde8[_0x2e017d(0x238)](_0x1bf2f0=>{const _0x28b72c=_0x2e017d,_0x4f11d7=_0x567f88[_0x28b72c(0x1cc)](_0x5cf6e5=>_0x5cf6e5[_0x28b72c(0x160)]==_0x1bf2f0[_0x28b72c(0x160)]);if(!_0x4f11d7||_0x4f11d7[_0x28b72c(0x18a)]==0x0&&_0x1bf2f0['number']!=0x0)_0x4db074[_0x28b72c(0x128)](_0x1bf2f0);}),{'missingDay1':_0x53a315,'notInDay2':_0x4db074};},_0x19af7a=dbPerformance[_0x5cc3a4(0x178)]('data')['cloneDeep']()[_0x5cc3a4(0x169)]();if(_0x19af7a[_0x5cc3a4(0x123)]>0x1){const {missingDay1:_0x26a712,notInDay2:_0x5e0ab9}=_0xb0d09f(_0x1a88d3,_0x19af7a[0x1][_0x5cc3a4(0x1b6)]);_0x1a88d3=[..._0x1a88d3,..._0x26a712],_0x5e0ab9[_0x5cc3a4(0x238)](_0x2a8124=>{const _0x42c3c1=_0x5cc3a4;let _0x5b98a8=_0x1a88d3['findIndex'](_0x3106e4=>_0x3106e4[_0x42c3c1(0x160)]==_0x2a8124['coin']);_0x5b98a8!=-0x1&&_0x1a88d3[_0x42c3c1(0x1be)](_0x5b98a8,0x1);});}_0x1a88d3[_0x5cc3a4(0x133)]((_0x6b5092,_0x5e4835)=>_0x6b5092[_0x5cc3a4(0x160)]>_0x5e4835['coin']?0x1:_0x5e4835[_0x5cc3a4(0x160)]>_0x6b5092[_0x5cc3a4(0x160)]?-0x1:0x0);let _0x41cca9=[{'date':_0xcf59c2[_0x5cc3a4(0x15b)],'changes':_0x1a88d3}];_0x19af7a[_0x5cc3a4(0x123)]>0x2&&_0x19af7a[_0x5cc3a4(0x238)]((_0x18abc5,_0x1c1fc7)=>{const _0x252ae2=_0x5cc3a4;if(_0x1c1fc7>0x0&&_0x1c1fc7<_0x19af7a['length']-0x1){const {missingDay1:_0xc6cf1e,notInDay2:_0x1f65aa}=_0xb0d09f(_0x19af7a[_0x1c1fc7][_0x252ae2(0x1b6)],_0x19af7a[_0x1c1fc7+0x1]['coins']);_0x1a88d3=[],(_0xc6cf1e[_0x252ae2(0x123)]!=0x0||_0x1f65aa[_0x252ae2(0x123)]!=0x0)&&(_0xc6cf1e[_0x252ae2(0x123)]!=0x0&&_0x1a88d3['push'](..._0xc6cf1e),_0x1f65aa['length']!=0x0&&(_0x1f65aa[_0x252ae2(0x238)](_0x50fb12=>{const _0x1d9943=_0x252ae2;_0x50fb12[_0x1d9943(0x18a)]=-_0x50fb12[_0x1d9943(0x18a)];}),_0x1a88d3[_0x252ae2(0x128)](..._0x1f65aa)),_0x1a88d3[_0x252ae2(0x133)]((_0x1c3f8a,_0x338e25)=>_0x1c3f8a['coin']>_0x338e25['coin']?0x1:_0x338e25[_0x252ae2(0x160)]>_0x1c3f8a[_0x252ae2(0x160)]?-0x1:0x0),_0x41cca9[_0x252ae2(0x128)]({'date':_0x19af7a[_0x1c1fc7+0x1]['date'],'changes':_0x1a88d3}));}}),dbConfig[_0x5cc3a4(0x178)](_0x5cc3a4(0x229))[_0x5cc3a4(0x1cc)]({'botID':botID})['assign']({..._0xcf59c2,'liquidity':_0x41cca9})[_0x5cc3a4(0x162)]();}}config=getConfiguration(botID);let _0x314418=dbPerformance[_0x5cc3a4(0x178)]('version')[_0x5cc3a4(0x169)]();_0x314418!=_0x5cc3a4(0x1da)&&(dbPerformance[_0x5cc3a4(0x1ef)](_0x5cc3a4(0x222),_0x5cc3a4(0x1da))[_0x5cc3a4(0x162)](),setStartDatePerformance());let _0x5031e1=dbCoinResults[_0x5cc3a4(0x178)](_0x5cc3a4(0x222))['value']();if(_0x5031e1!=_0x5cc3a4(0x14a)){dbCoinResults[_0x5cc3a4(0x1ef)](_0x5cc3a4(0x222),_0x5cc3a4(0x14a))[_0x5cc3a4(0x162)]();let _0x2fd149=dbCoinResults[_0x5cc3a4(0x178)](_0x5cc3a4(0x1b6))[_0x5cc3a4(0x169)]();if(_0x2fd149[_0x5cc3a4(0x123)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x9decdf){const _0x5fafc3=_0x4b3878;let _0x3a040d=dbConfig[_0x5fafc3(0x178)]('bot')[_0x5fafc3(0x1cc)]({'botID':_0x9decdf})[_0x5fafc3(0x169)]();if(_0x3a040d){let _0xac2ba2=![];typeof _0x3a040d[_0x5fafc3(0x1de)]==_0x5fafc3(0x10b)&&(_0x3a040d={..._0x3a040d,'threshold':Number(_0x3a040d[_0x5fafc3(0x1de)])},_0xac2ba2=!![]),_0x3a040d[_0x5fafc3(0x237)]==null&&(_0x3a040d={..._0x3a040d,'change24h':-0x14},_0xac2ba2=!![]),_0xac2ba2&&(_0x3a040d={'botID':_0x3a040d[_0x5fafc3(0x221)],'exchange':_0x3a040d[_0x5fafc3(0x167)],'apiKey':_0x3a040d[_0x5fafc3(0x13a)],'apiSecret':_0x3a040d[_0x5fafc3(0x150)],'basecoin':_0x3a040d[_0x5fafc3(0x239)],'botname':_0x3a040d[_0x5fafc3(0x182)],'showname':_0x3a040d[_0x5fafc3(0x227)],'threshold':_0x3a040d[_0x5fafc3(0x1de)],'ordertype':_0x3a040d[_0x5fafc3(0x164)],'timeout':_0x3a040d['timeout'],'startdate':_0x3a040d[_0x5fafc3(0x15b)],'recreate':_0x3a040d[_0x5fafc3(0x1fb)],'timeshift':_0x3a040d[_0x5fafc3(0x168)],'headless':_0x3a040d[_0x5fafc3(0x1d0)],'cooldown':_0x3a040d['cooldown'],'change24h':_0x3a040d['change24h'],'emojibuy':_0x3a040d[_0x5fafc3(0x120)],'emojisell':_0x3a040d['emojisell'],'portfolio':_0x3a040d[_0x5fafc3(0x155)],'liquidity':_0x3a040d['liquidity']},dbConfig[_0x5fafc3(0x178)]('bot')['remove']()[_0x5fafc3(0x162)](),dbConfig[_0x5fafc3(0x178)](_0x5fafc3(0x229))[_0x5fafc3(0x128)](_0x3a040d)[_0x5fafc3(0x162)]());}else _0x3a040d={'botID':_0x9decdf,'exchange':_0x5fafc3(0x158),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x5fafc3(0x114)+_0x9decdf,'showname':![],'threshold':0x3,'ordertype':_0x5fafc3(0x1f8),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5fafc3(0x168)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x3a040d;}function emittedConfiguration(){const _0x4bcb58=_0x4b3878;let _0x79eff1;return config['apiKey']==''?_0x79eff1=config:_0x79eff1={...config,'apiKey':_0x4bcb58(0x157),'apiSecret':'************'},_0x79eff1;}function getSettings(){const _0x58c25a=_0x4b3878;return dbSettings[_0x58c25a(0x178)](_0x58c25a(0x207))['value']();}function getSecure(){const _0xfc058a=_0x4b3878;return dbSecure[_0xfc058a(0x178)](_0xfc058a(0x219))[_0xfc058a(0x169)]()||{};}function updateTimeshift(_0x5e0279){const _0x3a21d4=_0x4b3878;let _0x6d02c2=dbConfig[_0x3a21d4(0x178)](_0x3a21d4(0x229))[_0x3a21d4(0x1cc)]({'botID':botID})[_0x3a21d4(0x169)]();_0x6d02c2&&dbConfig[_0x3a21d4(0x178)](_0x3a21d4(0x229))[_0x3a21d4(0x1cc)]({'botID':botID})[_0x3a21d4(0x10c)]({'timeshift':_0x5e0279})[_0x3a21d4(0x162)](),config[_0x3a21d4(0x168)]=_0x5e0279,proxyEmit(_0x3a21d4(0x1bd),emittedConfiguration());}async function storeConfiguration(_0x532078){const _0x1b4e10=_0x4b3878;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x41152b=dbConfig[_0x1b4e10(0x178)](_0x1b4e10(0x229))['find']({'botID':botID})['value']();_0x532078={..._0x532078,'apiKey':crypt['decrypt'](secure[_0x1b4e10(0x20d)],_0x532078[_0x1b4e10(0x13a)])[_0x1b4e10(0x112)],'apiSecret':crypt['decrypt'](secure[_0x1b4e10(0x20d)],_0x532078[_0x1b4e10(0x150)])['message']};if(_0x41152b){if(_0x532078[_0x1b4e10(0x13a)]==_0x1b4e10(0x157))_0x532078[_0x1b4e10(0x13a)]=config[_0x1b4e10(0x13a)];if(_0x532078[_0x1b4e10(0x150)]==_0x1b4e10(0x157))_0x532078[_0x1b4e10(0x150)]=config['apiSecret'];dbConfig[_0x1b4e10(0x178)]('bot')[_0x1b4e10(0x1cc)]({'botID':botID})['assign'](_0x532078)[_0x1b4e10(0x162)]();}else dbConfig['get'](_0x1b4e10(0x229))[_0x1b4e10(0x128)](_0x532078)[_0x1b4e10(0x162)](),process[_0x1b4e10(0x190)]({'status':_0x1b4e10(0x138),'live':_0x1b4e10(0x22c)},_0x1c1459=>{});config={..._0x532078},setStartDatePerformance(),process[_0x1b4e10(0x190)]({'botname':_0x532078[_0x1b4e10(0x182)]},_0x67766f=>{}),updateBotManager();const _0x247d3d=getNormalizedPerformance();getStartingBalances(_0x247d3d),emitPerformance(_0x247d3d),proxyEmit(_0x1b4e10(0x15e)),await initCoinResults(),reset();}async function storeHeadless(_0x57ae2a){const _0x2cc851=_0x4b3878,_0x10a7a6={...config,'headless':_0x57ae2a[_0x2cc851(0x1d0)]};let _0x5f4631=dbConfig[_0x2cc851(0x178)](_0x2cc851(0x229))[_0x2cc851(0x1cc)]({'botID':botID})[_0x2cc851(0x169)]();_0x5f4631&&dbConfig[_0x2cc851(0x178)](_0x2cc851(0x229))[_0x2cc851(0x1cc)]({'botID':botID})[_0x2cc851(0x10c)](_0x10a7a6)['write'](),config={..._0x10a7a6},updateBotManager(),proxyEmit(_0x2cc851(0x1bd),emittedConfiguration());}function noslash(_0xb4dd4){const _0x480ed2=_0x4b3878;return _0xb4dd4[_0x480ed2(0x230)]('/','');}async function updateNumberCoins(_0x12d7dc){const _0xd1d545=_0x4b3878;console['log'](_0x12d7dc);if(_0x12d7dc[_0xd1d545(0x1c0)]&&_0x12d7dc[_0xd1d545(0x1c0)]==_0xd1d545(0x177)){if(_0x12d7dc[_0xd1d545(0x22f)]!=lastOutboundEventTime){lastOutboundEventTime=_0x12d7dc[_0xd1d545(0x22f)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x35d663=JSON[_0xd1d545(0x16e)](lastBalances[_0xd1d545(0x155)]);_0x35d663['forEach'](_0x4d64be=>{const _0x4315d2=_0xd1d545,_0xd6fc4b=currentCoins[_0x4315d2(0x1cc)](_0x415d0d=>_0x415d0d[_0x4315d2(0x160)]==_0x4d64be['coin']);if(_0xd6fc4b[_0x4315d2(0x166)])_0x4d64be[_0x4315d2(0x166)]=_0xd6fc4b[_0x4315d2(0x166)];}),lastBalances={...lastBalances,'portfolio':JSON[_0xd1d545(0x140)](_0x35d663)},proxyEmit(_0xd1d545(0x22a),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x12d7dc['eventType']&&_0x12d7dc['eventType']=='executionReport'){if(_0x12d7dc['orderStatus']=='FILLED'){if(lastOrders)lastOrders['forEach'](async _0x36e759=>{const _0x4bd379=_0xd1d545;_0x36e759['orderId']==_0x12d7dc[_0x4bd379(0x19f)]&&_0x36e759[_0x4bd379(0x1e1)]==0x0&&(_0x36e759['price']=_0x12d7dc[_0x4bd379(0x20f)]/_0x12d7dc[_0x4bd379(0x1dd)],_0x36e759['filled']=_0x12d7dc[_0x4bd379(0x1dd)],_0x36e759[_0x4bd379(0x19a)]={'cost':_0x12d7dc[_0x4bd379(0x218)],'currency':_0x12d7dc[_0x4bd379(0x20e)]},await validateOrders(),await updateCoinResults(_0x36e759));});}}}async function getCoins(_0x3b1db7=![],_0x4f905d=!![],_0x508327=config[_0x4b3878(0x239)]){const _0x396217=_0x4b3878;let _0x1947c9,_0x4e3ede=[],_0x2994c7=[],_0x52ebae=[];try{_0x1947c9=await exchange['fetchBalance'](),mybalances=_0x1947c9[_0x396217(0x17a)];if(!_0x4f905d)for(const [_0x448a60,_0x534d42]of Object[_0x396217(0x1a0)](mybalances)){_0x52ebae[_0x396217(0x128)](_0x448a60);}else config[_0x396217(0x155)][_0x396217(0x238)](_0x4efd01=>{if(!_0x4efd01['excluded'])_0x52ebae['push'](_0x4efd01['coin']);});if(_0x508327=='')for(const [_0x13bb9d,_0x2eaeda]of Object['entries'](mybalances)){_0x2eaeda[_0x396217(0x1d2)]()!=0x0&&_0x2994c7[_0x396217(0x128)]({'coin':_0x13bb9d});}else{let _0x14df37=![],_0x1e3c5a;allOpenOrders=[];for(const [_0x1d4c2a,_0x89fda2]of Object[_0x396217(0x1a0)](mybalances)){if(_0x52ebae['includes'](_0x1d4c2a)){const _0x457c75=config[_0x396217(0x155)]['find'](_0x1ed50f=>_0x1ed50f['coin']==_0x1d4c2a),_0x1775b4=_0x1d4c2a+'/'+_0x508327,_0x345831=_0x508327+'/'+_0x1d4c2a;_0x14df37=![];if((_0x89fda2[_0x396217(0x1d2)]()!=0x0||_0x457c75)&&(allSymbols['includes'](_0x1775b4)||_0x1d4c2a==_0x508327))_0x1d4c2a!=_0x508327&&(_0x4e3ede['push'](_0x1775b4),_0x3b1db7&&(_0x1e3c5a=await exchange[_0x396217(0x189)](_0x1775b4),_0x1e3c5a[_0x396217(0x123)]>0x0&&(_0x14df37=!![]))),_0x2994c7[_0x396217(0x128)]({'coin':_0x1d4c2a,'symbol':_0x1775b4,'reverse':![],'number':Math['max'](_0x89fda2+(_0x457c75&&_0x457c75[_0x396217(0x1ab)]||0x0),0x0),'order':_0x14df37});else(_0x89fda2[_0x396217(0x1d2)]()!=0x0||_0x457c75)&&allSymbols[_0x396217(0x198)](_0x345831)&&(_0x1d4c2a!=_0x508327&&(_0x4e3ede[_0x396217(0x128)](_0x345831),_0x3b1db7&&(_0x1e3c5a=await exchange[_0x396217(0x189)](_0x345831),_0x1e3c5a[_0x396217(0x123)]>0x0&&(_0x14df37=!![]))),_0x2994c7[_0x396217(0x128)]({'coin':_0x1d4c2a,'symbol':_0x345831,'reverse':!![],'number':Math[_0x396217(0x20c)](_0x89fda2+(_0x457c75&&_0x457c75[_0x396217(0x1ab)]||0x0),0x0),'order':_0x14df37}));}_0x14df37&&allOpenOrders[_0x396217(0x128)](_0x1e3c5a[0x0]);}_0x3b1db7&&allOpenOrders[_0x396217(0x123)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x396217(0x11d))));}}catch(_0xa72eba){if(!_0x4f905d){if(_0xa72eba['toString']()[_0x396217(0x198)]('API-key\x20format\x20invalid'))return logHistory('error',_0x396217(0x187)),![];else{if(_0xa72eba[_0x396217(0x1d2)]()[_0x396217(0x198)]('AuthenticationError'))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0xa72eba[_0x396217(0x1d2)]()[_0x396217(0x198)](_0x396217(0x1e7)))return logHistory(_0x396217(0x193),_0x396217(0x1d5)),![];else await handleError(_0xa72eba,'getCoins()');}}}else await handleError(_0xa72eba,'getCoins()');}return _0x2994c7;}async function getPortfolio(_0x59090b){const _0x160ad2=_0x4b3878;let _0xaa5f2d=[],_0x4b2fbb=[],_0x1a823e,_0x2d6ad5=[],_0xc1c8a,_0xf67745;_0x59090b[_0x160ad2(0x13a)]===_0x160ad2(0x157)||_0x59090b[_0x160ad2(0x150)]===_0x160ad2(0x157)?(_0xc1c8a=config[_0x160ad2(0x13a)],_0xf67745=config[_0x160ad2(0x150)]):(_0xc1c8a=_0x59090b['apiKey'],_0xf67745=_0x59090b[_0x160ad2(0x150)]);await initExchange(_0xc1c8a,_0xf67745);let _0x1aa917=await loadSymbols();if(_0x1aa917){_0x2d6ad5=await getCoins(![],![],_0x59090b[_0x160ad2(0x239)]);if(_0x2d6ad5===![])proxyEmit(_0x160ad2(0x155),![]);else{if(_0x59090b['basecoin']=='')proxyEmit('portfolio',_0x2d6ad5);else{_0x2d6ad5[_0x160ad2(0x238)](_0x343a70=>{const _0x4ac7d8=_0x160ad2;if(_0x343a70[_0x4ac7d8(0x160)]!=_0x59090b[_0x4ac7d8(0x239)])_0xaa5f2d[_0x4ac7d8(0x128)](_0x343a70[_0x4ac7d8(0x12d)]);});try{_0x4b2fbb=await exchange['fetchTickers'](_0xaa5f2d);}catch(_0x324898){await handleError(_0x324898,_0x160ad2(0x1ee));}_0x2d6ad5[_0x160ad2(0x238)](_0x5834d9=>{const _0x28120f=_0x160ad2;_0x5834d9[_0x28120f(0x160)]!=_0x59090b[_0x28120f(0x239)]?_0x1a823e=_0x5834d9['reverse']?0x1/_0x4b2fbb[_0x5834d9['symbol']][_0x28120f(0x216)]:_0x4b2fbb[_0x5834d9[_0x28120f(0x12d)]][_0x28120f(0x216)]:_0x1a823e=0x1,_0x5834d9[_0x28120f(0x228)]=formatResult(_0x1a823e,0x8);}),proxyEmit(_0x160ad2(0x155),_0x2d6ad5);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0xed6bd1){const _0x15b058=_0x4b3878;let _0xab5124=!![];const _0x3ad1fa=!_0xed6bd1[_0x15b058(0x22b)]?markets[_0xed6bd1['symbol']][_0x15b058(0x137)][_0x15b058(0x1f6)]['min']:markets[_0xed6bd1[_0x15b058(0x12d)]][_0x15b058(0x137)][_0x15b058(0x163)][_0x15b058(0x152)],_0x7eb0ae=!_0xed6bd1[_0x15b058(0x22b)]?markets[_0xed6bd1[_0x15b058(0x12d)]][_0x15b058(0x137)][_0x15b058(0x163)][_0x15b058(0x152)]:markets[_0xed6bd1[_0x15b058(0x12d)]][_0x15b058(0x137)][_0x15b058(0x1f6)][_0x15b058(0x152)],_0x68d4df=markets[_0xed6bd1[_0x15b058(0x12d)]][_0x15b058(0x17b)][_0x15b058(0x1f6)];_0xed6bd1['trade']=formatResultTruncate(_0xed6bd1['trade'],_0x68d4df);if(Math['abs'](_0xed6bd1['trade'])<_0x3ad1fa)_0xab5124=![];if(Math[_0x15b058(0x15d)](_0xed6bd1[_0x15b058(0x16b)])*_0xed6bd1['last']<_0x7eb0ae)_0xab5124=![];if(_0xed6bd1[_0x15b058(0x1b7)]==_0x15b058(0x1ed)){let _0x25e97f=config['portfolio'][_0x15b058(0x1cc)](_0x29bbcb=>_0x29bbcb['coin']==_0xed6bd1[_0x15b058(0x160)]);if(_0x25e97f[_0x15b058(0x1ab)]>0x0){if(Math['abs'](_0xed6bd1[_0x15b058(0x16b)])>_0xed6bd1[_0x15b058(0x18a)]-_0x25e97f[_0x15b058(0x1ab)])_0xab5124=![];}else{if(Math[_0x15b058(0x15d)](_0xed6bd1[_0x15b058(0x16b)])>_0xed6bd1[_0x15b058(0x18a)])_0xab5124=![];}}if(_0xed6bd1[_0x15b058(0x1b7)]==_0x15b058(0x108)){let _0x4f2063=config['portfolio'][_0x15b058(0x1cc)](_0x3ba285=>_0x3ba285['coin']==config[_0x15b058(0x239)]),_0x4e7448=currentCoins[_0x15b058(0x1cc)](_0x1f3897=>_0x1f3897['coin']==config[_0x15b058(0x239)]);if(_0x4f2063[_0x15b058(0x1ab)]>0x0){if(Math[_0x15b058(0x15d)](_0xed6bd1['trade'])*_0xed6bd1[_0x15b058(0x216)]>_0x4e7448['number']-_0x4f2063[_0x15b058(0x1ab)])_0xab5124=![];}else{if(Math[_0x15b058(0x15d)](_0xed6bd1[_0x15b058(0x16b)])*_0xed6bd1[_0x15b058(0x216)]>_0x4e7448['number'])_0xab5124=![];}}return _0xab5124;}async function getBalances(){const _0x217675=_0x4b3878;let _0x1ee288=0x0,_0x14659c;const _0x33cff3=config['threshold'];if(config[_0x217675(0x1d0)]&&config[_0x217675(0x237)]<0x0)await validate24hChanges();currentCoins[_0x217675(0x238)](_0x2e231d=>{const _0x1e26ba=_0x217675;if(_0x2e231d[_0x1e26ba(0x160)]!=config['basecoin']){let _0x9faea8=global[_0x1e26ba(0x1cf)][noslash(_0x2e231d[_0x1e26ba(0x12d)])];_0x14659c=_0x2e231d[_0x1e26ba(0x22b)]?0x1/_0x9faea8:_0x9faea8;}else _0x14659c=0x1;let _0x354fe4=_0x2e231d[_0x1e26ba(0x18a)]*_0x14659c;_0x1ee288+=_0x354fe4,_0x2e231d[_0x1e26ba(0x216)]=formatResult(Number(_0x14659c),0x8),_0x2e231d[_0x1e26ba(0x169)]=_0x354fe4;}),currentCoins[_0x217675(0x238)](_0xcac3ef=>{const _0x4091ed=_0x217675;let _0x4a918b=config[_0x4091ed(0x155)][_0x4091ed(0x1cc)](_0x198511=>_0x198511['coin']==_0xcac3ef['coin']),_0x4a2271=Number(_0x4a918b[_0x4091ed(0x1fe)]),_0x1e70f4=_0xcac3ef['value']/_0x1ee288*0x64,_0x2e9694=_0x4a2271*_0x1ee288/0x64/_0xcac3ef[_0x4091ed(0x216)]-_0xcac3ef[_0x4091ed(0x18a)];_0xcac3ef[_0x4091ed(0x1fe)]=formatResult(_0x1e70f4,0x3),_0xcac3ef['target']=formatResult(_0x4a2271,0x3),_0xcac3ef[_0x4091ed(0x16b)]=formatResult(_0x2e9694,0x8),_0xcac3ef[_0x4091ed(0x1b7)]='',_0xcac3ef[_0x4091ed(0x195)]=![];if(_0xcac3ef[_0x4091ed(0x160)]!=config[_0x4091ed(0x239)]){if(_0xcac3ef[_0x4091ed(0x1fe)]>_0x4a2271)_0xcac3ef[_0x4091ed(0x1b7)]=_0x4091ed(0x1ed),_0xcac3ef['valid']=checkMinimums(_0xcac3ef);else _0xcac3ef[_0x4091ed(0x1fe)]<_0x4a2271&&(_0xcac3ef[_0x4091ed(0x1b7)]='buy',_0xcac3ef[_0x4091ed(0x195)]=checkMinimums(_0xcac3ef));}_0xcac3ef[_0x4091ed(0x1bb)]=_0xcac3ef[_0x4091ed(0x1fe)]/_0xcac3ef['target']-0x1;}),currentCoins[_0x217675(0x133)]((_0x52c5bf,_0x4f8979)=>_0x52c5bf[_0x217675(0x1bb)]<_0x4f8979[_0x217675(0x1bb)]?0x1:_0x4f8979[_0x217675(0x1bb)]<_0x52c5bf[_0x217675(0x1bb)]?-0x1:0x0);const _0x3c0778=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3c0778[_0x217675(0x217)],'usd':_0x3c0778['usd'],'portfolio':JSON[_0x217675(0x140)](currentCoins),'threshold':_0x33cff3},proxyEmit(_0x217675(0x22a),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x33cff3});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x33cff3});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x387f97=_0x4b3878;if(!lastBalances)return;let _0x5d7b13=[],_0x42d138,_0x3b155a=JSON['parse'](lastBalances['portfolio']);_0x3b155a[_0x387f97(0x133)]((_0x343b27,_0x53c2b9)=>_0x343b27[_0x387f97(0x160)]>_0x53c2b9[_0x387f97(0x160)]?0x1:_0x53c2b9[_0x387f97(0x160)]>_0x343b27[_0x387f97(0x160)]?-0x1:0x0),_0x3b155a[_0x387f97(0x238)](_0x53a2d0=>{const _0x510fb8=_0x387f97;let _0x517ffe={'coin':_0x53a2d0[_0x510fb8(0x160)],'number':_0x53a2d0[_0x510fb8(0x18a)],'price':_0x53a2d0[_0x510fb8(0x216)]};_0x5d7b13[_0x510fb8(0x128)](_0x517ffe);});const _0x35c9b6=await getFiat();_0x42d138={'date':lastBalances[_0x387f97(0x22d)][_0x387f97(0x212)]('\x20')[0x0],'eur':_0x35c9b6[_0x387f97(0x217)],'usd':_0x35c9b6['usd'],'coins':_0x5d7b13};let _0x302a22=dbPerformance[_0x387f97(0x178)](_0x387f97(0x10e))[_0x387f97(0x1cc)]({'date':_0x42d138[_0x387f97(0x125)]})[_0x387f97(0x169)]();_0x302a22?_0x42d138[_0x387f97(0x125)]!=config[_0x387f97(0x15b)]&&dbPerformance[_0x387f97(0x178)](_0x387f97(0x10e))['find']({'date':_0x42d138[_0x387f97(0x125)]})[_0x387f97(0x10c)](_0x42d138)[_0x387f97(0x162)]():dbPerformance[_0x387f97(0x178)](_0x387f97(0x10e))[_0x387f97(0x128)](_0x42d138)[_0x387f97(0x162)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1d3e02=_0x4b3878;let _0x25dafd=[];if(dbPerformance[_0x1d3e02(0x1b4)](_0x1d3e02(0x10e))[_0x1d3e02(0x169)]()){let _0x320e58=dbPerformance[_0x1d3e02(0x178)](_0x1d3e02(0x10e))['cloneDeep']()[_0x1d3e02(0x20a)]('date')['value'](),_0x41f863=[...config[_0x1d3e02(0x1db)]];_0x41f863[_0x1d3e02(0x133)]((_0x5042fd,_0x57b396)=>_0x5042fd[_0x1d3e02(0x125)]>_0x57b396[_0x1d3e02(0x125)]?-0x1:_0x57b396[_0x1d3e02(0x125)]>_0x5042fd[_0x1d3e02(0x125)]?0x1:0x0);let _0x5527fd=0x1,_0x407785=[],_0x2ea36e=0x0;_0x320e58[_0x1d3e02(0x21b)]()[_0x1d3e02(0x22b)]()[_0x1d3e02(0x238)]((_0x749087,_0xebc4d)=>{const _0x50f7e9=_0x1d3e02;if(_0x41f863[_0x2ea36e]){if(_0x320e58[_0x320e58[_0x50f7e9(0x123)]-_0xebc4d]&&_0x41f863[_0x2ea36e][_0x50f7e9(0x125)]==_0x320e58[_0x320e58[_0x50f7e9(0x123)]-_0xebc4d]['date']){if(_0xebc4d<_0x320e58[_0x50f7e9(0x123)]){let _0x28c2e2=0x0,_0x507a75=0x0;_0x320e58[_0x320e58[_0x50f7e9(0x123)]-_0xebc4d][_0x50f7e9(0x1b6)][_0x50f7e9(0x238)](_0x3687d4=>{const _0x3c3504=_0x50f7e9;_0x507a75+=_0x3687d4[_0x3c3504(0x18a)]*_0x3687d4['price'];}),_0x41f863[_0x2ea36e][_0x50f7e9(0x15a)]['forEach'](_0x1fb0c3=>{const _0x87a17=_0x50f7e9;_0x28c2e2+=_0x1fb0c3[_0x87a17(0x18a)]*_0x1fb0c3[_0x87a17(0x228)];}),_0x5527fd*=_0x28c2e2/(_0x507a75-_0x28c2e2)+0x1;}_0x2ea36e++;}}let _0x182987=0x0;_0x749087['coins'][_0x50f7e9(0x238)](_0x115573=>{const _0xdb2120=_0x50f7e9;_0x182987+=_0x115573[_0xdb2120(0x18a)]*_0x115573['price'];}),_0x407785[_0x320e58[_0x50f7e9(0x123)]-_0xebc4d-0x1]=_0x182987*(_0x5527fd-0x1);});let _0xeb1fc4=[];_0x41f863=[...config['liquidity']]||[];let _0x19f993=0x0;_0x2ea36e=0x0,_0x320e58[_0x1d3e02(0x238)]((_0x319290,_0x559d9b)=>{const _0x106906=_0x1d3e02;if(_0x41f863[_0x2ea36e]){const _0x39c705=fns[_0x106906(0x16e)](_0x41f863[_0x2ea36e]['date'],_0x106906(0x1d1),new Date()),_0x5eabfa=fns['parse'](_0x319290[_0x106906(0x125)],'yyyy/MM/dd',new Date());if(fns[_0x106906(0x192)](_0x39c705,_0x5eabfa)){let _0x429c12=0x0;_0x41f863[_0x2ea36e][_0x106906(0x15a)][_0x106906(0x238)](_0x2dea7c=>{const _0x4364b9=_0x106906;!_0xeb1fc4[_0x2dea7c[_0x4364b9(0x160)]]?_0xeb1fc4[_0x2dea7c[_0x4364b9(0x160)]]=_0x2dea7c['number']:(_0x429c12=_0xeb1fc4[_0x2dea7c[_0x4364b9(0x160)]],_0xeb1fc4[_0x2dea7c[_0x4364b9(0x160)]]+=_0x2dea7c[_0x4364b9(0x18a)]);const _0x89ba1a=_0x319290['coins'][_0x4364b9(0x1cc)](_0x2f9cc4=>_0x2f9cc4[_0x4364b9(0x160)]==_0x2dea7c[_0x4364b9(0x160)]);(!_0x89ba1a||_0x89ba1a[_0x4364b9(0x18a)]==0x0)&&(_0x19f993+=(-_0x2dea7c[_0x4364b9(0x18a)]-_0x429c12)*_0x2dea7c[_0x4364b9(0x228)]);}),_0x2ea36e++;}}_0x319290[_0x106906(0x1b6)][_0x106906(0x238)]((_0x129582,_0x169c52)=>{const _0x47dfd0=_0x106906;_0xeb1fc4[_0x129582['coin']]&&(_0x129582={..._0x129582,'initial':_0xeb1fc4[_0x129582[_0x47dfd0(0x160)]]}),_0x319290[_0x47dfd0(0x1b6)][_0x169c52]=_0x129582;}),_0x25dafd['push']({'date':_0x319290[_0x106906(0x125)],'eur':_0x319290[_0x106906(0x217)],'usd':_0x319290[_0x106906(0x1d7)],'offset':_0x407785[_0x559d9b],'netoffset':_0x19f993,'coins':_0x319290[_0x106906(0x1b6)]});});}return _0x25dafd;}function emitPerformance(_0x21e02f){const _0x4a85e4=_0x4b3878;_0x21e02f['length']!==0x0?(proxyEmit(_0x4a85e4(0x1b5),_0x21e02f),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5b4f40,_0x1bae90){const _0x31d056=_0x4b3878;let _0x4a2914=0x0,_0x105090=0x0,_0x18fed1=0x0;_0x5b4f40[_0x31d056(0x1b6)]['forEach'](_0x3cabc6=>{const _0x53488c=_0x31d056;_0x4a2914+=_0x3cabc6[_0x53488c(0x18a)]*_0x3cabc6[_0x53488c(0x228)];});_0x1bae90&&(_0x4a2914+=_0x5b4f40[_0x31d056(0x1ab)]);if(config['basecoin']===_0x31d056(0x16d)||config['basecoin']===_0x31d056(0x161))_0x105090=_0x4a2914*_0x5b4f40[_0x31d056(0x217)],_0x18fed1=_0x4a2914*_0x5b4f40['usd'];else{if(config['basecoin']===_0x31d056(0x1f9)||config[_0x31d056(0x239)]==='USDT')_0x105090=_0x4a2914*_0x5b4f40['eur']/_0x5b4f40[_0x31d056(0x1d7)],_0x18fed1=_0x4a2914;else config[_0x31d056(0x239)]===_0x31d056(0x1d3)&&(_0x105090=_0x4a2914,_0x18fed1=_0x4a2914*_0x5b4f40[_0x31d056(0x1d7)]/_0x5b4f40[_0x31d056(0x217)]);}return[_0x4a2914,_0x105090,_0x18fed1];}async function getStartingBalances(_0x86f8e8,_0x5e33ce=!![]){const _0x49256a=_0x4b3878;if(_0x86f8e8[_0x49256a(0x123)]!==0x0){const [_0x1df59e,_0x10c451,_0xddef89]=getPerf(_0x86f8e8[0x0],!![]);let _0x552544=[];config[_0x49256a(0x155)][_0x49256a(0x238)](_0x4d8c6f=>{const _0x500d37=_0x49256a;let _0x2b8c7e=0x0,_0x1076cc;config[_0x500d37(0x1db)][_0x500d37(0x238)](_0x39e500=>{const _0x16b289=_0x500d37;let _0x3b48ee=_0x39e500['changes'][_0x16b289(0x1cc)](_0x224a72=>_0x224a72['coin']==_0x4d8c6f[_0x16b289(0x160)]);if(_0x3b48ee){_0x2b8c7e+=_0x3b48ee[_0x16b289(0x18a)];if(!_0x1076cc)_0x1076cc=_0x3b48ee[_0x16b289(0x228)];}}),_0x552544[_0x500d37(0x128)]({'coin':_0x4d8c6f['coin'],'number':_0x2b8c7e,'initialprice':_0x1076cc});});const _0x5f3217={'basecoin':_0x1df59e,'eur':_0x10c451,'usd':_0xddef89,'coins':_0x552544};if(_0x5e33ce)proxyEmit(_0x49256a(0x11c),_0x5f3217);return _0x5f3217;}}function headlessMode(_0xa6644){const _0x203bbe=_0x4b3878;let _0x222250=_0xa6644[_0x203bbe(0x155)],_0x292693=_0xa6644['threshold'],_0x32a795=[];for(let _0x16ab35 of _0x222250){if(_0x16ab35[_0x203bbe(0x160)]!=config[_0x203bbe(0x239)]){if(_0x16ab35[_0x203bbe(0x1bb)]>=_0x292693/0x64){if(_0x16ab35['valid'])_0x32a795[_0x203bbe(0x128)](_0x16ab35);}else{if(_0x16ab35[_0x203bbe(0x1bb)]<=-_0x292693/0x64){if(_0x16ab35['valid'])_0x32a795[_0x203bbe(0x128)](_0x16ab35);}}}}_0x32a795['length']>0x0&&(allOrdersPlaced=![],placeOrder(_0x32a795));}function notifyBalance(_0x5589d6){const _0x184d33=_0x4b3878;let _0xacb2b6=_0x5589d6['portfolio'],_0x10c248=_0x5589d6[_0x184d33(0x1de)],_0x583ba3=[];for(let _0x3ff50e of _0xacb2b6){if(_0x3ff50e[_0x184d33(0x160)]!=config[_0x184d33(0x239)]){if(_0x3ff50e[_0x184d33(0x1bb)]>=_0x10c248/0x64){if(_0x3ff50e[_0x184d33(0x195)])_0x583ba3[_0x184d33(0x128)](_0x3ff50e);}else{if(_0x3ff50e['delta']<=-_0x10c248/0x64){if(_0x3ff50e['valid'])_0x583ba3[_0x184d33(0x128)](_0x3ff50e);}}}}if(_0x583ba3[_0x184d33(0x123)]>0x0){let _0x3e1c33=_0x583ba3[_0x184d33(0x1c6)](_0x47d221=>_0x47d221[_0x184d33(0x160)]);_0x3e1c33[_0x184d33(0x133)]();let _0x4021d7=_0x3e1c33[_0x184d33(0x111)](',\x20');if(lastCoinsToBalance!==_0x4021d7)logHistory('success',_0x184d33(0x1f7)+_0x4021d7);lastCoinsToBalance=_0x4021d7;}}function symbolToCoin(_0x31c1b7){const _0x263b33=_0x4b3878;let _0x2d520e;if(_0x31c1b7['includes']('/'+config[_0x263b33(0x239)]))_0x2d520e=_0x31c1b7[_0x263b33(0x230)]('/'+config['basecoin'],'');if(_0x31c1b7[_0x263b33(0x198)](config[_0x263b33(0x239)]+'/'))_0x2d520e=_0x31c1b7[_0x263b33(0x230)](config[_0x263b33(0x239)]+'/','');return _0x2d520e;}async function unlockOrders(){const _0x50bcda=_0x4b3878;currentCoins=await getCoins(),validateOrdersState=_0x50bcda(0x191);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x5a8eba){const _0x9c5277=_0x4b3878;if(_0x5a8eba)validateOrdersState=_0x5a8eba;let _0x4fd4ac=[],_0x470aab=config[_0x9c5277(0x164)]==_0x9c5277(0x1f8)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x9c5277(0x117)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+_0x9c5277(0x165)+_0x5a8eba),lastOrders[_0x9c5277(0x238)](_0x5b5d7d=>{const _0x16b403=_0x9c5277;let _0x4d096e=![];_0x5b5d7d[_0x16b403(0x1e1)]>0x0&&(_0x4d096e=!![]),_0x4fd4ac[_0x16b403(0x128)](_0x4d096e),_0x4d096e&&config[_0x16b403(0x164)]!=_0x16b403(0x1f8)&&logHistory(_0x16b403(0x166),_0x16b403(0x14e)+_0x5b5d7d[_0x16b403(0x12d)]+'\x20'+_0x5b5d7d[_0x16b403(0x1b7)]+'\x20#'+formatResult(_0x5b5d7d[_0x16b403(0x1e1)],0x8)+'\x20@'+formatResult(_0x5b5d7d[_0x16b403(0x228)],0x8));}),_0x4fd4ac[_0x9c5277(0x238)]((_0x91247d,_0x331853)=>{const _0x55b113=_0x9c5277;if(_0x91247d)lastOrders[_0x55b113(0x1be)](_0x331853,0x1);});const _0x8f2d3b=coolingDown?_0x9c5277(0x213):_0x9c5277(0x113);if(validateOrdersState==_0x9c5277(0x191))validateOrdersState=_0x9c5277(0x1b3),_0x4fd4ac[_0x9c5277(0x198)](![])?config[_0x9c5277(0x164)]==_0x9c5277(0x1f8)?logHistory('error',_0x9c5277(0x1e8)):logHistory(_0x9c5277(0x193),_0x9c5277(0x186)):await unlockOrders();else{if(validateOrdersState==_0x9c5277(0x1b3)){if(_0x4fd4ac[_0x9c5277(0x198)](![])){}else config[_0x9c5277(0x164)]==_0x9c5277(0x1f8)?logHistory(_0x9c5277(0x1a6),'Order(s)\x20validated\x20-\x20'+_0x8f2d3b):logHistory(_0x9c5277(0x1a6),_0x9c5277(0x194)+_0x8f2d3b),await unlockOrders();}else{if(validateOrdersState==_0x9c5277(0x235))_0x4fd4ac[_0x9c5277(0x198)](![])?config[_0x9c5277(0x164)]==_0x9c5277(0x1f8)?logHistory(_0x9c5277(0x1a6),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x9c5277(0x21a)](_0x470aab*validateOrderInterval/0xea60)+_0x9c5277(0x18d)+_0x8f2d3b):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x9c5277(0x21a)](_0x470aab*validateOrderInterval/0xea60)+_0x9c5277(0x18d)+_0x8f2d3b)):logHistory(_0x9c5277(0x1a6),'No\x20more\x20open\x20orders\x20-\x20'+_0x8f2d3b),await unlockOrders();else{if(validateOrdersState==_0x9c5277(0x11d)){if(config[_0x9c5277(0x164)]!=_0x9c5277(0x1f8))logHistory(_0x9c5277(0x1a6),'No\x20more\x20open\x20orders\x20-\x20'+_0x8f2d3b);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x45bb64=>{const _0x2c4f2b=_0x4354;try{const _0x4c6473=await exchange[_0x2c4f2b(0x170)](_0x45bb64[_0x2c4f2b(0x19f)],_0x45bb64['symbol']);}catch(_0x9cb0f5){if(_0x9cb0f5[_0x2c4f2b(0x1d2)]()[_0x2c4f2b(0x198)](_0x2c4f2b(0x184))){}else await handleError(_0x9cb0f5,_0x2c4f2b(0x130));}});}async function initCoinResults(){const _0x588534=_0x4b3878;let _0x1c0f2a=[];config[_0x588534(0x155)][_0x588534(0x238)](_0x3e2f96=>{const _0x2630c3=_0x588534;if(!_0x3e2f96[_0x2630c3(0x20b)]&&_0x3e2f96[_0x2630c3(0x160)]!=config['basecoin']){let _0x6e952c=dbCoinResults[_0x2630c3(0x178)]('coins')['find']({'coin':_0x3e2f96[_0x2630c3(0x160)]})[_0x2630c3(0x169)]();if(!_0x6e952c){const _0x391dfd=currentCoins[_0x2630c3(0x1cc)](_0x58bca5=>_0x58bca5[_0x2630c3(0x160)]==_0x3e2f96[_0x2630c3(0x160)]),_0x2de15e=global['ticker'][noslash(_0x3e2f96['symbol'])];let _0x4dae3f=_0x391dfd?_0x391dfd[_0x2630c3(0x18a)]:null,_0x11ecfc=_0x3e2f96['reverse']?0x1/_0x2de15e:_0x2de15e,_0x484897;config[_0x2630c3(0x1db)]['forEach'](_0x45eab1=>{const _0x349843=_0x2630c3;!_0x484897&&(_0x484897=_0x45eab1['changes'][_0x349843(0x1cc)](_0x319b19=>_0x319b19[_0x349843(0x160)]==_0x3e2f96[_0x349843(0x160)]),_0x484897&&(_0x4dae3f=_0x484897[_0x349843(0x18a)],_0x11ecfc=_0x484897[_0x349843(0x228)]));}),_0x1c0f2a[_0x2630c3(0x128)]({'coin':_0x3e2f96['coin'],'number':_0x4dae3f,'price':_0x11ecfc});}}}),_0x1c0f2a[_0x588534(0x238)](_0x618ad=>{const _0x5d61cf=_0x588534,_0x254683={'coin':_0x618ad[_0x5d61cf(0x160)],'number':_0x618ad[_0x5d61cf(0x18a)],'breakeven':_0x618ad[_0x5d61cf(0x228)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5d61cf(0x178)]('coins')[_0x5d61cf(0x128)](_0x254683)[_0x5d61cf(0x162)]();});}async function updateCoinResults(_0x163832,_0x4b286b=![]){const _0x157aed=_0x4b3878;let _0xb6fde7,_0x2a5c80,_0x273f2f,_0x866a1c,_0x1ddd0f,_0x361ee9,_0x5de433=dbCoinResults[_0x157aed(0x178)](_0x157aed(0x1b6))[_0x157aed(0x1cc)]({'coin':_0x163832['coin']})['value']();!_0x5de433&&await initCoinResults();_0x163832['reverse']&&(_0x361ee9={'filled':_0x163832['filled']*_0x163832['price'],'amount':_0x163832[_0x157aed(0x1e1)]*_0x163832['price'],'side':_0x163832[_0x157aed(0x1b7)]==_0x157aed(0x1ed)?_0x157aed(0x108):_0x157aed(0x1ed),'price':0x1/_0x163832[_0x157aed(0x228)]},_0x163832={..._0x163832,..._0x361ee9});if(_0x4b286b)_0x2a5c80=_0x163832['side']=='buy'?_0x5de433[_0x157aed(0x18a)]+_0x163832[_0x157aed(0x1e1)]:_0x5de433[_0x157aed(0x18a)]-_0x163832[_0x157aed(0x1e1)];else{const _0x4faf71=currentCoins['find'](_0x2a30aa=>_0x2a30aa[_0x157aed(0x160)]==_0x163832[_0x157aed(0x160)]);_0x2a5c80=_0x4faf71[_0x157aed(0x18a)];}if(_0x163832['fee']&&_0x163832['fee'][_0x157aed(0x17c)]==config['basecoin'])_0xb6fde7=_0x163832['fee']['cost'];else{if(_0x163832['fee']&&_0x163832[_0x157aed(0x19a)][_0x157aed(0x17c)]=='BNB'&&!_0x4b286b)_0xb6fde7=_0x163832['fee'][_0x157aed(0x163)]*global['ticker']['BNB'+config[_0x157aed(0x239)]];else _0xb6fde7=defaultFee*_0x163832[_0x157aed(0x1e1)]*_0x163832[_0x157aed(0x228)];}_0x163832[_0x157aed(0x1b7)]==_0x157aed(0x108)?(_0x273f2f=_0x2a5c80!=0x0?(_0x5de433[_0x157aed(0x151)]*_0x5de433[_0x157aed(0x18a)]+_0x163832['price']*(_0x2a5c80-_0x5de433[_0x157aed(0x18a)])+_0xb6fde7)/_0x2a5c80:0x0,_0x866a1c=_0x5de433[_0x157aed(0x1a7)]):(_0x273f2f=_0x2a5c80!=0x0?(_0x5de433[_0x157aed(0x151)]*_0x5de433[_0x157aed(0x18a)]-_0x163832[_0x157aed(0x228)]*(_0x5de433['number']-_0x2a5c80)+_0xb6fde7)/_0x2a5c80:0x0,_0x866a1c=_0x5de433[_0x157aed(0x1a7)]+(_0x163832['price']-_0x5de433[_0x157aed(0x151)])*_0x163832[_0x157aed(0x1e1)]);_0x1ddd0f=(_0x163832['price']-_0x273f2f-_0xb6fde7/_0x163832['filled'])*_0x2a5c80;let _0x5cbb95={'coin':_0x163832['coin'],'number':_0x2a5c80,'breakeven':formatResult(_0x273f2f,0x8),'realized':formatResult(_0x866a1c,0x8),'unrealized':formatResult(_0x1ddd0f,0x8),'fees':formatResult(_0x5de433[_0x157aed(0x19d)]+_0xb6fde7,0x8),'sells':_0x163832[_0x157aed(0x1b7)]==_0x157aed(0x1ed)?_0x5de433[_0x157aed(0x204)]+0x1:_0x5de433[_0x157aed(0x204)],'buys':_0x163832[_0x157aed(0x1b7)]==_0x157aed(0x108)?_0x5de433[_0x157aed(0x1c3)]+0x1:_0x5de433[_0x157aed(0x1c3)]};dbCoinResults[_0x157aed(0x178)](_0x157aed(0x1b6))[_0x157aed(0x1cc)]({'coin':_0x163832[_0x157aed(0x160)]})[_0x157aed(0x10c)](_0x5cbb95)[_0x157aed(0x162)]();if(!_0x4b286b){if(_0x163832[_0x157aed(0x19a)]&&_0x163832[_0x157aed(0x19a)]['currency']==_0x157aed(0x200)){const _0x5b9222=currentCoins[_0x157aed(0x1cc)](_0x5b076f=>_0x5b076f[_0x157aed(0x160)]==_0x157aed(0x200));if(_0x5b9222){let _0x2a91af=dbCoinResults['get'](_0x157aed(0x1b6))[_0x157aed(0x1cc)]({'coin':_0x157aed(0x200)})[_0x157aed(0x169)]();_0x5cbb95={..._0x2a91af,'number':_0x5b9222['number']},dbCoinResults[_0x157aed(0x178)](_0x157aed(0x1b6))[_0x157aed(0x1cc)]({'coin':_0x157aed(0x200)})[_0x157aed(0x10c)](_0x5cbb95)[_0x157aed(0x162)]();}}}}async function placeOrder(_0x46d326){const _0x38d45f=_0x4b3878,_0x168ac1=config[_0x38d45f(0x164)]==_0x38d45f(0x1f8)?_0x38d45f(0x1f8):_0x38d45f(0x1a8);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x3a0fe4 of _0x46d326){let _0x1bef3b,_0x50b1bf,_0x338406,_0x2d2ded,_0x5c4f24,_0x748612=_0x3a0fe4['symbol'];try{const _0x2c6e6f=await exchange[_0x38d45f(0x203)]([_0x748612]),_0x28a144=_0x2c6e6f[_0x748612];_0x1bef3b=_0x3a0fe4[_0x38d45f(0x22b)]?0x1/_0x3a0fe4['last']:_0x3a0fe4[_0x38d45f(0x216)],_0x50b1bf=_0x28a144[_0x38d45f(0x171)],_0x338406=_0x28a144[_0x38d45f(0x17e)];_0x3a0fe4[_0x38d45f(0x22b)]?(_0x2d2ded=_0x3a0fe4[_0x38d45f(0x1b7)]=='buy'?_0x38d45f(0x1ed):_0x38d45f(0x108),_0x5c4f24=Math[_0x38d45f(0x15d)](_0x3a0fe4[_0x38d45f(0x16b)])/_0x1bef3b):(_0x2d2ded=_0x3a0fe4[_0x38d45f(0x1b7)],_0x5c4f24=Math[_0x38d45f(0x15d)](_0x3a0fe4[_0x38d45f(0x16b)]));_0x168ac1==_0x38d45f(0x1a8)&&(config[_0x38d45f(0x164)]==_0x38d45f(0x115)&&(_0x1bef3b=_0x2d2ded==_0x38d45f(0x108)?_0x50b1bf:_0x338406),config[_0x38d45f(0x164)]==_0x38d45f(0x1fa)&&(_0x1bef3b=_0x2d2ded=='buy'?_0x338406:_0x50b1bf));_0x5c4f24=formatResult(_0x5c4f24,0x8),_0x1bef3b=formatResult(_0x1bef3b,0x8);const _0x197f04=await exchange[_0x38d45f(0x10d)](_0x748612,_0x168ac1,_0x2d2ded,_0x5c4f24,_0x1bef3b);lastOrders[_0x38d45f(0x128)]({'orderId':_0x197f04['id'],'symbol':_0x748612,'coin':_0x3a0fe4['coin'],'side':_0x2d2ded,'reverse':_0x3a0fe4[_0x38d45f(0x22b)],'amount':_0x197f04[_0x38d45f(0x1f6)],'filled':0x0,'price':_0x197f04[_0x38d45f(0x228)],'fee':_0x197f04[_0x38d45f(0x19a)]});const _0x43eca0=_0x2d2ded=='sell'?config[_0x38d45f(0x127)]?String[_0x38d45f(0x201)]('0x'+config['emojisell'])+'\x20':'':config[_0x38d45f(0x120)]?String[_0x38d45f(0x201)]('0x'+config[_0x38d45f(0x120)])+'\x20':'',_0x2ff965=_0x168ac1==_0x38d45f(0x1f8)?_0x38d45f(0x1fd):config[_0x38d45f(0x164)]==_0x38d45f(0x115)?_0x38d45f(0x1ad):'Limit\x20(low-margin)';if(_0x168ac1==_0x38d45f(0x1f8))logHistory('order',''+_0x43eca0+_0x2ff965+_0x38d45f(0x14c)+_0x748612+'\x20'+_0x2d2ded+'\x20#'+formatResult(_0x197f04[_0x38d45f(0x1e1)],0x8)+'\x20@'+formatResult(_0x197f04[_0x38d45f(0x228)],0x8));else logHistory('order',''+_0x43eca0+_0x2ff965+_0x38d45f(0x14c)+_0x748612+'\x20'+_0x2d2ded+'\x20#'+formatResult(_0x197f04['amount'],0x8)+'\x20@'+formatResult(_0x197f04[_0x38d45f(0x228)],0x8));let _0x3d470e=currentCoins[_0x38d45f(0x1cc)](_0x2963c5=>_0x2963c5[_0x38d45f(0x160)]==_0x3a0fe4[_0x38d45f(0x160)]);_0x3d470e[_0x38d45f(0x166)]=!![];if(config[_0x38d45f(0x159)]!=0x0){let _0x10c171=null;if(cooldownTracker[_0x38d45f(0x123)]==config['cooldown']-0x1)_0x10c171=cooldownTracker[_0x38d45f(0x1dc)]();const _0x388895=getTimeStamp();cooldownTracker[_0x38d45f(0x128)](_0x388895);if(_0x10c171){const _0x539a19=fns['differenceInSeconds'](new Date(_0x388895),new Date(_0x10c171));if(_0x539a19<cooldownInterval){logHistory('error','Executed\x20'+config[_0x38d45f(0x159)]+_0x38d45f(0x153)+cooldownInterval/0x3c+_0x38d45f(0x1e9)+cooldownPeriod/(0xe10*0x3e8)+_0x38d45f(0x144)),coolingDown=!![];break;}}}}catch(_0x3c7c31){if(_0x3c7c31[_0x38d45f(0x1d2)]()[_0x38d45f(0x198)](_0x38d45f(0x188)))logHistory('error',_0x38d45f(0x13f)+_0x748612);else{if(_0x3c7c31[_0x38d45f(0x1d2)]()[_0x38d45f(0x198)](_0x38d45f(0x1ca)))logHistory('error',_0x38d45f(0x1ce)+_0x748612);else await handleError(_0x3c7c31,_0x38d45f(0x16a),_0x748612);}}}allOrdersPlaced=!![];if(lastOrders['length']!=0x0){lockOrders=!![],validateOrdersState=_0x38d45f(0x191),setTimeout(function(){validateOrders();},0x1388);const _0x5efdd7=config[_0x38d45f(0x164)]==_0x38d45f(0x1f8)?validateOrderTimeout*0x3c*0x3e8:config[_0x38d45f(0x117)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x54f485=_0x38d45f;validateOrders(_0x54f485(0x235));},_0x5efdd7);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x38d45f(0x1a6),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x38d45f(0x1d0)]&&logHistory(_0x38d45f(0x193),_0x38d45f(0x1a9));else lockOrders&&(!config['headless']&&(config[_0x38d45f(0x164)]=='market'?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x38d45f(0x193),_0x38d45f(0x23b))));}}function restoreOrders(){const _0x366c93=_0x4b3878;let _0x33ad7d;lockOrders=!![],validateOrdersState=_0x366c93(0x1b3),currentCoins[_0x366c93(0x238)](_0x4330de=>{const _0xc82d8a=_0x366c93,_0x14b290=allOpenOrders[_0xc82d8a(0x1cc)](_0x1aa4dc=>_0x1aa4dc[_0xc82d8a(0x12d)]==_0x4330de['symbol']);_0x14b290&&(lastOrders[_0xc82d8a(0x128)]({'orderId':_0x14b290['id'],'symbol':_0x4330de[_0xc82d8a(0x12d)],'coin':_0x4330de[_0xc82d8a(0x160)],'side':_0x14b290[_0xc82d8a(0x1b7)],'reverse':_0x4330de[_0xc82d8a(0x22b)],'amount':_0x14b290['amount'],'filled':0x0,'price':_0x14b290[_0xc82d8a(0x228)],'fee':_0x14b290['fee']}),_0x4330de[_0xc82d8a(0x166)]=!![],_0x33ad7d=_0x14b290[_0xc82d8a(0x21c)]);});const _0x51d1d0=new Date()[_0x366c93(0x176)](),_0x36972e=config['ordertype']==_0x366c93(0x1f8)?validateOrderTimeout*0x3c*0x3e8:config[_0x366c93(0x117)]*0x3c*0x3e8;if(_0x33ad7d+_0x36972e>_0x51d1d0){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x33ad7d+_0x36972e-_0x51d1d0);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x317198=_0x4b3878,_0x15087b=[_0x317198(0x1d3),'BUSD','USDT'],_0x30d020=_0x15087b[_0x317198(0x198)](config[_0x317198(0x239)])?0x2:0x8;let _0x165328='';if(config['showname'])_0x165328=config['botname']+_0x317198(0x13c);else _0x165328='Bot\x20'+botID+_0x317198(0x13c);_0x165328+=_0x317198(0x16c),_0x165328+=_0x317198(0x19c),_0x165328+=_0x317198(0x1b9),currentCoins[_0x317198(0x238)](_0x46db77=>{const _0x150157=_0x317198;_0x165328+=_0x46db77['coin'][_0x150157(0x1eb)](0x7)+'|\x20'+formatPad(_0x46db77[_0x150157(0x1fe)],0x2,0x6)+'|\x20'+formatPad(_0x46db77[_0x150157(0x1b0)],0x2,0x6)+'|\x20'+formatPad(_0x46db77['delta']*0x64,0x2,0x6)+'\x0a';}),_0x165328+=_0x317198(0x147),process[_0x317198(0x190)]({'telegrammsg':_0x165328},_0x172059=>{});}function formatPad(_0x9fc3db,_0x4bad46,_0x5ec46f){const _0x5c4f6a=_0x4b3878,_0x181e25=formatResultString(_0x9fc3db,_0x4bad46);return _0x181e25?_0x181e25[_0x5c4f6a(0x183)](_0x5ec46f):''[_0x5c4f6a(0x183)](_0x5ec46f);}function logHistory(_0x3d7579,_0x4a912c,_0x4c712d=''){const _0x4c898e=_0x4b3878;let _0x352d6e={'time':getTimeStamp(),'type':_0x3d7579,'event':_0x4a912c};dbLogs[_0x4c898e(0x178)](_0x4c898e(0x1df))['push'](_0x352d6e)['write']();if(_0x4c712d=='')_0x4c712d=_0x4a912c;proxyEmit(_0x4c898e(0x1e6),{'log':_0x352d6e,'summary':_0x4c712d}),process['send']({'telegram':{..._0x352d6e,'botname':config['botname'],'showname':config[_0x4c898e(0x227)]}},_0x4501f3=>{}),logging(''+_0x352d6e[_0x4c898e(0x1e6)]);}function emitHistory(_0x3db652={}){const _0xcd0cf7=_0x4b3878;Object['keys'](_0x3db652)[_0xcd0cf7(0x123)]==0x0&&(_0x3db652={'type':[_0xcd0cf7(0x166),_0xcd0cf7(0x1e6)],'event':'','page':0x1});if(_0x3db652[_0xcd0cf7(0x220)]['includes']('event'))_0x3db652[_0xcd0cf7(0x220)][_0xcd0cf7(0x1be)](_0x3db652[_0xcd0cf7(0x220)]['indexOf'](_0xcd0cf7(0x1e6)),0x1,_0xcd0cf7(0x193),_0xcd0cf7(0x1a6));if(dbLogs['has']('logs')[_0xcd0cf7(0x169)]()){let _0x32a093=dbLogs[_0xcd0cf7(0x178)](_0xcd0cf7(0x1df))[_0xcd0cf7(0x124)](_0x15d810=>{const _0x51daa6=_0xcd0cf7;if(_0x3db652[_0x51daa6(0x220)][_0x51daa6(0x123)]==0x0)return![];else return _0x3db652['type'][_0x51daa6(0x198)](_0x15d810[_0x51daa6(0x220)]);})[_0xcd0cf7(0x124)](_0xec39ba=>{const _0x280d1a=_0xcd0cf7;if(_0x3db652[_0x280d1a(0x1e6)]=='')return!![];else return _0xec39ba['event'][_0x280d1a(0x174)]()['includes'](_0x3db652[_0x280d1a(0x1e6)][_0x280d1a(0x174)]());})[_0xcd0cf7(0x20a)](_0xcd0cf7(0x22d)),_0x4810b2=_0x32a093['value']()[_0xcd0cf7(0x123)];_0x32a093=_0x32a093[_0xcd0cf7(0x22b)]()['slice']((_0x3db652[_0xcd0cf7(0x136)]-0x1)*logPageSize,_0x3db652[_0xcd0cf7(0x136)]*logPageSize-0x1)[_0xcd0cf7(0x22b)]()[_0xcd0cf7(0x169)](),proxyEmit(_0xcd0cf7(0x12a),{'logs':_0x32a093,'total':_0x4810b2});}else proxyEmit(_0xcd0cf7(0x12a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5b8696){const _0x118d9b=_0x4b3878;if(dbLogs[_0x118d9b(0x1b4)](_0x118d9b(0x1df))[_0x118d9b(0x169)]()){const _0x59eba3=dbLogs[_0x118d9b(0x178)]('logs')[_0x118d9b(0x20a)](_0x118d9b(0x22d))[_0x118d9b(0x124)](_0x50635c=>{const _0xd859ab=_0x118d9b;return _0x50635c[_0xd859ab(0x220)]==_0xd859ab(0x166);})[_0x118d9b(0x169)]();dbLogs[_0x118d9b(0x178)](_0x118d9b(0x1df))[_0x118d9b(0x119)]()[_0x118d9b(0x162)](),dbLogs[_0x118d9b(0x178)](_0x118d9b(0x1df))[_0x118d9b(0x10c)](_0x59eba3)['write'](),emitHistory(_0x5b8696);}}async function pauseBot(_0xbc1fa0=''){const _0x48331c=_0x4b3878,_0x194fea=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x48331c(0x176)](),consecutivePauses=0x1;else{if(_0x194fea-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x48331c(0x190)]({'stop':_0x48331c(0x12f)},_0x44b14f=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x48331c(0x176)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0xbc1fa0)_0xbc1fa0+=_0x48331c(0x1c2);logHistory(_0x48331c(0x193),_0xbc1fa0+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x48331c(0x1e3)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x27c0be=_0x4b3878;process[_0x27c0be(0x190)]({'stop':_0x27c0be(0x141)},_0xdea9c3=>{}),await sleep(0x7d0);}async function handleError(_0x4e320b,_0x4d63ed,_0x32f13a=''){const _0x348d3e=_0x4b3878;if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)]('DDoSProtection'))await pauseBot(_0x348d3e(0x1c7));else{if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)](_0x348d3e(0x139)))await pauseBot(_0x348d3e(0x1c1));else{if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)](_0x348d3e(0x1ea)))await pauseBot('Binance\x20not\x20responding');else{if(_0x4e320b['toString']()[_0x348d3e(0x198)]('API-key\x20format\x20invalid'))logHistory(_0x348d3e(0x193),_0x4d63ed+_0x348d3e(0x1a1)),logHistory(_0x348d3e(0x193),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)](_0x348d3e(0x15f)))logHistory(_0x348d3e(0x193),_0x4d63ed+_0x348d3e(0x1b1)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x348d3e(0x193),_0x4d63ed+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x348d3e(0x193),_0x348d3e(0x1f2)),await killBot();else{if(_0x4e320b[_0x348d3e(0x1d2)]()[_0x348d3e(0x198)](_0x348d3e(0x223)))logHistory(_0x348d3e(0x193),_0x4d63ed+_0x348d3e(0x1f5)),logHistory(_0x348d3e(0x193),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4e320b['toString']()[_0x348d3e(0x198)](_0x348d3e(0x208)))await pauseBot(_0x348d3e(0x1bc)),process[_0x348d3e(0x190)]({'stop':_0x348d3e(0x12f)},_0x590744=>{});else _0x4e320b[_0x348d3e(0x1d2)]()['includes'](_0x348d3e(0x132))?logHistory(_0x348d3e(0x193),_0x4d63ed+_0x348d3e(0x21d)+_0x32f13a):(logging(_0x4d63ed+_0x348d3e(0x14f),_0x4e320b),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x572860,_0x2ccfb7){return parseFloat(_0x572860['toFixed'](_0x2ccfb7));}function formatResultTruncate(_0x25142a,_0x19ac93){const _0x56a693=_0x4b3878;let _0xd15406=formatResultString(_0x25142a,0xa),_0x1f8ac9=_0xd15406[_0x56a693(0x10a)]('.');return _0x1f8ac9!=-0x1&&(_0xd15406=_0xd15406[_0x56a693(0x21b)](0x0,_0x1f8ac9+_0x19ac93+0x1)),Number(_0xd15406);}function formatResultString(_0x4b3f0e,_0x3f0046){const _0x38788c=_0x4b3878;let _0x20a84c;if(!(''+_0x4b3f0e)[_0x38788c(0x198)]('e'))_0x20a84c=+(Math['round'](_0x4b3f0e+'e+'+_0x3f0046)+'e-'+_0x3f0046);else{let _0xbc62a8=(''+_0x4b3f0e)[_0x38788c(0x212)]('e'),_0x70f034='';+_0xbc62a8[0x1]+_0x3f0046>0x0&&(_0x70f034='+'),_0x20a84c=+(Math[_0x38788c(0x21a)](+_0xbc62a8[0x0]+'e'+_0x70f034+(+_0xbc62a8[0x1]+_0x3f0046))+'e-'+_0x3f0046);}return Number(_0x20a84c)[_0x38788c(0x1ec)](_0x3f0046);}function logging(_0x1cf7ca,_0x1328f3=''){const _0x5c29ab=_0x4b3878;if(config[_0x5c29ab(0x227)])console['log'](getTimeStamp()+':\x20'+config[_0x5c29ab(0x182)]+_0x5c29ab(0x1aa)+_0x1cf7ca,_0x1328f3);else console[_0x5c29ab(0x126)](getTimeStamp()+':\x20Bot\x20'+botID+_0x5c29ab(0x1aa)+_0x1cf7ca,_0x1328f3);}function getServerTime(){const _0x387f6e=_0x4b3878,_0x22ade6=new Date();return _0x22ade6[_0x387f6e(0x1c4)]()+'/'+(_0x22ade6[_0x387f6e(0x233)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x22ade6[_0x387f6e(0x131)]()[_0x387f6e(0x1d2)]()[_0x387f6e(0x183)](0x2,'0')+'\x20'+_0x22ade6[_0x387f6e(0x11f)]()[_0x387f6e(0x1d2)]()['padStart'](0x2,'0')+':'+_0x22ade6[_0x387f6e(0x1d4)]()[_0x387f6e(0x1d2)]()[_0x387f6e(0x183)](0x2,'0')+':'+_0x22ade6[_0x387f6e(0x21e)]()[_0x387f6e(0x1d2)]()[_0x387f6e(0x183)](0x2,'0');}function getTimeStamp(){const _0x469f32=_0x4b3878,_0x2a80bf=shiftedTime();return _0x2a80bf[_0x469f32(0x1c4)]()+'/'+(_0x2a80bf[_0x469f32(0x233)]()+0x1)[_0x469f32(0x1d2)]()[_0x469f32(0x183)](0x2,'0')+'/'+_0x2a80bf[_0x469f32(0x131)]()[_0x469f32(0x1d2)]()['padStart'](0x2,'0')+'\x20'+_0x2a80bf['getHours']()[_0x469f32(0x1d2)]()[_0x469f32(0x183)](0x2,'0')+':'+_0x2a80bf['getMinutes']()['toString']()[_0x469f32(0x183)](0x2,'0')+':'+_0x2a80bf['getSeconds']()['toString']()[_0x469f32(0x183)](0x2,'0');}function getDate(){const _0x1a6690=_0x4b3878,_0x171d54=shiftedTime();return _0x171d54['getFullYear']()+'/'+(_0x171d54[_0x1a6690(0x233)]()+0x1)[_0x1a6690(0x1d2)]()['padStart'](0x2,'0')+'/'+_0x171d54[_0x1a6690(0x131)]()['toString']()[_0x1a6690(0x183)](0x2,'0');}function getHour(){const _0xa2d387=_0x4b3878,_0x3fa32a=shiftedTime();return _0x3fa32a['getHours']()[_0xa2d387(0x1d2)]()[_0xa2d387(0x183)](0x2,'0');}function sleep(_0x1bc855){return new Promise(_0x558b46=>setTimeout(_0x558b46,_0x1bc855));}function shiftedTime(){const _0x3f05e3=_0x4b3878,_0x1d4621=new Date();let _0x1ead92=_0x1d4621;if(config&&config['timeshift']!==0x0)_0x1ead92=fns[_0x3f05e3(0x175)](_0x1d4621,{'hours':config['timeshift']});return _0x1ead92;}