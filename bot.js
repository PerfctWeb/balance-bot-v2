const _0x113277=_0x8009;(function(_0xe3f549,_0x1da9a2){const _0x2b53d3=_0x8009,_0x473fad=_0xe3f549();while(!![]){try{const _0x5a9db6=parseInt(_0x2b53d3(0x134))/0x1*(parseInt(_0x2b53d3(0x127))/0x2)+-parseInt(_0x2b53d3(0x189))/0x3+parseInt(_0x2b53d3(0x14d))/0x4+parseInt(_0x2b53d3(0x1be))/0x5*(parseInt(_0x2b53d3(0x122))/0x6)+parseInt(_0x2b53d3(0x1a4))/0x7*(-parseInt(_0x2b53d3(0x172))/0x8)+-parseInt(_0x2b53d3(0xd0))/0x9+parseInt(_0x2b53d3(0x15e))/0xa;if(_0x5a9db6===_0x1da9a2)break;else _0x473fad['push'](_0x473fad['shift']());}catch(_0xda0800){_0x473fad['push'](_0x473fad['shift']());}}}(_0x2cb9,0xf0d89));const _0x3deddf=function(){let _0x1817d3=!![];return function(_0x58631d,_0x14b390){const _0x920e60=_0x1817d3?function(){if(_0x14b390){const _0x4dc7b2=_0x14b390['apply'](_0x58631d,arguments);return _0x14b390=null,_0x4dc7b2;}}:function(){};return _0x1817d3=![],_0x920e60;};}(),_0x3805f4=_0x3deddf(this,function(){const _0x223509=_0x8009;return _0x3805f4['toString']()[_0x223509(0x137)](_0x223509(0x142))['toString']()[_0x223509(0xf0)](_0x3805f4)[_0x223509(0x137)](_0x223509(0x142));});_0x3805f4();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x113277(0x165)),fs=require('fs'),fns=require(_0x113277(0xdc)),{WebsocketClient,DefaultLogger}=require(_0x113277(0xf1)),Crypt=require(_0x113277(0x133))['Crypt'];let exchange,wsClient;global[_0x113277(0x1b4)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x113277(0x174))['version'],botID=process[_0x113277(0x10d)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x113277(0x187)](botID))return console[_0x113277(0xe6)](_0x113277(0x176)+botID+_0x113277(0x19e)),process[_0x113277(0x150)](0x1);const configpath='./config/';!fs[_0x113277(0xf7)](configpath)&&fs[_0x113277(0x193)](configpath);const configfile=configpath+_0x113277(0xe3)+botID+_0x113277(0x11c),logfile=configpath+'bot-'+botID+_0x113277(0x192),performancefile=configpath+_0x113277(0xe3)+botID+_0x113277(0x109),coinresultsfile=configpath+'bot-'+botID+_0x113277(0x13f),settingsfile=configpath+_0x113277(0x16e),securefile=configpath+_0x113277(0x1a2),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x113277(0x138)]({'logs':[]})[_0x113277(0x126)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x113277(0x138)]({'data':[]})[_0x113277(0x126)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x113277(0x138)]({'bot':[]})[_0x113277(0x126)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x113277(0x138)]({'coins':[]})[_0x113277(0x126)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x113277(0x160)},'usd':{'coin':_0x113277(0x128),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3bc53f)=>{},'debug':(..._0x1a76e6)=>{},'notice':(..._0x11c7f7)=>{},'info':(..._0x5697b1)=>{},'warning':(..._0x25c5c7)=>{},'error':async function(..._0x5c776e){const _0x1bbd22=_0x113277,_0x59bd39=new Date()[_0x1bbd22(0x154)]();if(!lastErrorShown||_0x59bd39-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1bbd22(0x154)](),logHistory('error',_0x1bbd22(0x118)+consecutivePauses+_0x1bbd22(0x167));let _0x46f0f5='';if(_0x5c776e[0x0])_0x46f0f5+=_0x5c776e[0x0];if(_0x5c776e[0x1]&&_0x5c776e[0x1][_0x1bbd22(0x1b1)]&&_0x5c776e[0x1][_0x1bbd22(0x1b1)][_0x1bbd22(0x153)])_0x46f0f5+='\x20-\x20'+_0x5c776e[0x1]['error'][_0x1bbd22(0x153)];logging(_0x1bbd22(0x118)+consecutivePauses+_0x1bbd22(0x190),''+_0x46f0f5),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x113277(0x103),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x113277(0x130)]!=config[_0x113277(0x130)]&&updateTimeshift(settings[_0x113277(0x130)]);process[_0x113277(0x15d)]({'started':_0x113277(0x15f)}),initializeProcessListeners();function _0x2cb9(){const _0x55f4b8=['reduce','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','6590804OBrsFE','Limit\x20(high-margin)','cancelOrder()','exit','coins','realized','message','getTime','slice','Limit\x20(low-margin)','limits','storeHeadless','has','Binance\x20API\x20secret\x20is\x20invalid','timeout','breakeven','send','15531760ioUTCA','running','BTC/EUR','recreate','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','getDate','lowdb/adapters/FileSync','sells',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','getPortfolio()','initclient','buy','placeOrder','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','InvalidNonce','bb-settings.json','\x20order:\x20','\x20|\x20Error\x20details:\x20','USDT','16GUaAKd','closeWs','./version.json','getFullYear','Error:\x20Invalid\x20argument\x20','time','data','type','ExchangeNotAvailable','EUR','filter','sort','getMinutes','page','AuthenticationError','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','botname','forEach','yyyy/MM/dd','LIMIT','bot','test','shift','3780084OvesGX','recreateHistory()','distribution','loadSymbols()','splice','coin-loading-progress','emitHistory',')\x20|\x20Error\x20details:\x20','close','-events.json','mkdirSync','botID','currency','side','Performance\x20recreation\x20completed\x20successfully','toFixed','BNB','valid','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','parseISO','enabled',',\x20must\x20be\x20a\x203\x20digit\x20number','amount','target','getCoins()','bb-secure.json','loadMarkets','620914npaHBv','differenceInCalendarDays','exchange','portfolio','OrderNotFound','orderId','BTC','formattedMessage','logs','subscribeSpotUserDataStream','isArray','round','price','error','BUSD','basecoin','ticker','BTC/BUSD','cancelOrder','total','startnumber','DDoSProtection','args','Order\x20filled:\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','fetchBalance','492680nanynJ','userData','configuration-stored','Bot\x20','buys','entries','delta','limit-high','format','stringify','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','fees','wsMarket','assign','spot','keys','ordertype','decrypt','value','trade','market','datetime','14414409tKkRLq','parse','last','Binance\x20API\x20key\x20is\x20invalid','fee','sortBy','orderStatus','order','restart','DAI/','excluded','limit','date-fns','apiKey','storeConfiguration','kline','apiSecret','symbols','InsufficientFunds','bot-','BTCBUSD','fetchOHLCV','log','\x20minutes\x20-\x20balancing\x20resumed','headless','reverse','success','settings','milliseconds','Order(s)\x20filled\x20-\x20balancing\x20resumed','cost','get','constructor','binance','sell','filled','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','cooldown','reconnected','existsSync','abs','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(1)\x20-\x20please\x20sync\x20clock','threshold','replace','FILLED','event-history','event','\x20>\x20','Order(s)\x20not\x20validated\x20after\x20','number','privateKey','sha256','function','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Order(s)\x20validated\x20-\x20balancing\x20resumed','includes','-performance.json','getMonth','balances','outboundAccountPosition','argv','createOrder','date','symbol','startdate','remove','add',':\x20Bot\x20','min','RequestTimeout','getCloses()','WebSockets(','wsKey','yyyy-MM-dd\x27T\x27HH:mm:ss','accumulatedQuantity','-config.json','padStart','Executed\x20','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','usd','wss://stream.binance.com:9443','12KrnCQN','timestamp','getPortfolio','eventType','write','1102UutgvX','BTCUSDT','startprice','getSeconds','coinamount','\x20hour','Unfilled\x20order(s)\x20canceled\x20after\x20','binanceus','fetchTickers','timeshift','indexOf','secure','hybrid-crypto-js','1139gmJRxc','availableBalance','************','search','defaults','kill','configuration','coin','performance','toString','eur','-results.json','find','toLowerCase','(((.+)+)+)+$','push','MIN_NOTIONAL','yyyy/MM/dd\x20HH:mm:ss','initws()','API-key\x20format\x20invalid','getHours','fetchOrders','length'];_0x2cb9=function(){return _0x55f4b8;};return _0x2cb9();}function proxyEmit(_0x30a413,_0x152e01=null){const _0x4ad32b=_0x113277;process[_0x4ad32b(0x15d)]({'function':_0x30a413,'args':_0x152e01});}function initializeProcessListeners(){process['on']('message',_0x91e872=>{const _0x26759e=_0x8009;switch(Object[_0x26759e(0xc9)](_0x91e872)[0x0]){case _0x26759e(0x130):_0x91e872[_0x26759e(0x130)]!=undefined&&(settings[_0x26759e(0x130)]=_0x91e872[_0x26759e(0x130)],updateTimeshift(settings[_0x26759e(0x130)]));break;case _0x26759e(0x104):switch(_0x91e872[_0x26759e(0x104)]){case _0x26759e(0x169):initclient();break;case _0x26759e(0x18f):emitHistory(_0x91e872['args']);break;case _0x26759e(0x124):getPortfolio(_0x91e872[_0x26759e(0x1ba)]);break;case _0x26759e(0xde):storeConfiguration(_0x91e872[_0x26759e(0x1ba)]);break;case _0x26759e(0x158):storeHeadless(_0x91e872[_0x26759e(0x1ba)]);break;case'getStartingBalances':getStartingBalances();break;case _0x26759e(0x16b):placeOrder(_0x91e872[_0x26759e(0x1ba)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x5828d6=_0x113277;if(pidBalances)clearTimeout(pidBalances);if(config[_0x5828d6(0xdd)]!=''){await initExchange(config['apiKey'],config[_0x5828d6(0xe0)]);let _0x43c5b7=await loadSymbols();_0x43c5b7&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x376d0f,_0x1b393f){const _0x57c9b3=_0x113277,_0x198308=ccxt[config[_0x57c9b3(0x1a6)]];let _0x543afd;switch(config[_0x57c9b3(0x1a6)]){case _0x57c9b3(0xf1):_0x543afd=_0x57c9b3(0x121);break;case _0x57c9b3(0x12e):_0x543afd='wss://stream.binance.us:9443';break;default:_0x543afd='wss://stream.binance.com:9443';}exchange=new _0x198308({'apiKey':_0x376d0f,'secret':_0x1b393f,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x376d0f,'api_secret':_0x1b393f,'beautify':!![],'wsUrl':_0x543afd},logger),config[_0x57c9b3(0x1a6)]==_0x57c9b3(0x12e)&&(stablecoins={'eur':{'coin':_0x57c9b3(0xe4),'symbol':_0x57c9b3(0x1b5)},'usd':{'coin':_0x57c9b3(0x128),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0xa94b12=_0x113277;let _0x53c340;try{markets=await exchange[_0xa94b12(0x1a3)](),allSymbols=exchange[_0xa94b12(0xe1)][_0xa94b12(0x17c)](_0x1bbd58=>{const _0xdffb7d=_0xa94b12;return!_0x1bbd58[_0xdffb7d(0x108)](_0xdffb7d(0xd9));}),_0x53c340=!![];}catch(_0x5b3354){await handleError(_0x5b3354,_0xa94b12(0x18c)),_0x53c340=![];}return _0x53c340;}async function initbot(){const _0x587970=_0x113277;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0xbecf6c=dbCoinResults[_0x587970(0xef)](_0x587970(0x151))['value']();if(_0xbecf6c['length']==0x0)await resetCoinResults();}async function initclient(){const _0x1d3981=_0x113277;proxyEmit(_0x1d3981(0x13a),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4a1b89=_0x113277;wsinitialized=![];ws1&&(ws1[_0x4a1b89(0x183)](_0x286725=>{const _0xc842a3=_0x4a1b89;try{wsClient[_0xc842a3(0x173)](_0x286725);}catch(_0x46ecc2){}}),ws1=[]);if(ws2){try{wsClient[_0x4a1b89(0x173)](ws2);}catch(_0x1401c2){}ws2=null;}}async function initws(){const _0x287e21=_0x113277;cleanws();let _0x604f61=[];currentCoins['forEach'](_0x4dd2cb=>{const _0x1e540a=_0x8009;if(_0x4dd2cb[_0x1e540a(0x13b)]!=config['basecoin'])_0x604f61[_0x1e540a(0x143)](noslash(_0x4dd2cb[_0x1e540a(0x110)]));});if(!_0x604f61[_0x287e21(0x108)](stablecoins[_0x287e21(0x13e)][_0x287e21(0x13b)]))_0x604f61[_0x287e21(0x143)](stablecoins[_0x287e21(0x13e)][_0x287e21(0x13b)]);if(!_0x604f61[_0x287e21(0x108)](stablecoins['usd'][_0x287e21(0x13b)]))_0x604f61[_0x287e21(0x143)](stablecoins[_0x287e21(0x120)]['coin']);if(!_0x604f61['includes'](_0x287e21(0x199)+config[_0x287e21(0x1b3)]))_0x604f61[_0x287e21(0x143)](_0x287e21(0x199)+config['basecoin']);try{_0x604f61[_0x287e21(0x183)]((_0x3e13d7,_0x55a3e4)=>{ws1[_0x55a3e4]=wsClient['subscribeSpotKline'](_0x3e13d7,'1m');}),ws2=wsClient[_0x287e21(0x1ad)](),wsClient['on'](_0x287e21(0x1ab),_0x3041d8=>{const _0x43eff7=_0x287e21;if(!Array[_0x43eff7(0x1ae)](_0x3041d8)&&!_0x3041d8['wsKey'][_0x43eff7(0x108)]('userData')){if(_0x3041d8['eventType']===_0x43eff7(0xdf)){global[_0x43eff7(0x1b4)][_0x3041d8[_0x43eff7(0xdf)][_0x43eff7(0x110)]]=_0x3041d8['kline'][_0x43eff7(0x191)];return;}}else{if(!Array[_0x43eff7(0x1ae)](_0x3041d8)&&_0x3041d8[_0x43eff7(0x119)][_0x43eff7(0x108)](_0x43eff7(0x1bf))){if(_0x3041d8[_0x43eff7(0x1ca)]['includes'](_0x43eff7(0xc8))){updateNumberCoins(_0x3041d8);return;}}}}),wsClient['on'](_0x287e21(0xf6),async _0x26dfa0=>{currentCoins=await getCoins();});}catch(_0x27493d){await handleError(_0x27493d,_0x287e21(0x146));}let _0x43e7a4;while(_0x43e7a4!=currentCoins[_0x287e21(0x14a)]-0x1){_0x43e7a4=0x0,currentCoins[_0x287e21(0x183)](_0x6d8f81=>{const _0x392843=_0x287e21;if(_0x6d8f81[_0x392843(0x13b)]!=config[_0x392843(0x1b3)]&&global[_0x392843(0x1b4)][noslash(_0x6d8f81[_0x392843(0x110)])])_0x43e7a4++;});let _0x42da2e=Math[_0x287e21(0x1af)](_0x43e7a4/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x287e21(0x18e),_0x42da2e),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x1abbe0=_0x113277;let _0x4ced60=0x0,_0x216865=0x0;try{_0x4ced60=global['ticker'][stablecoins[_0x1abbe0(0x13e)][_0x1abbe0(0x13b)]],_0x216865=global[_0x1abbe0(0x1b4)][stablecoins[_0x1abbe0(0x120)][_0x1abbe0(0x13b)]];}catch(_0x1c5812){await handleError(_0x1c5812,'getFiat()');}return{'eur':Number(_0x4ced60),'usd':Number(_0x216865)};}async function setStartDatePerformance(_0x40ccd3){const _0x208ef3=_0x113277,_0x35c7be=fns[_0x208ef3(0x1c6)](new Date(_0x40ccd3[_0x208ef3(0x111)]),_0x208ef3(0x184));let _0x434b44=[];_0x434b44[stablecoins[_0x208ef3(0x13e)][_0x208ef3(0x13b)]]=await getCloses(stablecoins[_0x208ef3(0x13e)][_0x208ef3(0x110)],new Date(_0x40ccd3[_0x208ef3(0x111)]),0x1),_0x434b44[stablecoins[_0x208ef3(0x120)]['coin']]=await getCloses(stablecoins[_0x208ef3(0x120)][_0x208ef3(0x110)],new Date(_0x40ccd3['startdate']),0x1);let _0x495a74,_0x1ed828=[];_0x40ccd3[_0x208ef3(0x1a7)][_0x208ef3(0x183)](_0x195181=>{const _0xa79218=_0x208ef3;!_0x195181['excluded']&&_0x1ed828[_0xa79218(0x143)]({'coin':_0x195181['coin'],'number':_0x195181[_0xa79218(0x1b8)],'price':_0x195181[_0xa79218(0x129)]});}),_0x495a74={'date':_0x35c7be,'eur':_0x434b44[stablecoins[_0x208ef3(0x13e)][_0x208ef3(0x13b)]][0x0],'usd':_0x434b44[stablecoins[_0x208ef3(0x120)][_0x208ef3(0x13b)]][0x0],'coins':_0x1ed828};let _0x5dcf2e=dbPerformance[_0x208ef3(0xef)](_0x208ef3(0x178))[_0x208ef3(0x140)]({'date':_0x35c7be})['value']();_0x5dcf2e?dbPerformance[_0x208ef3(0xef)]('data')[_0x208ef3(0x140)]({'date':_0x35c7be})[_0x208ef3(0xc7)](_0x495a74)[_0x208ef3(0x126)]():dbPerformance[_0x208ef3(0xef)]('data')[_0x208ef3(0x143)](_0x495a74)[_0x208ef3(0x126)](),_0x5dcf2e=dbPerformance[_0x208ef3(0xef)]('data')[_0x208ef3(0xd5)](_0x208ef3(0x10f))[_0x208ef3(0xcc)](),_0x5dcf2e[_0x208ef3(0x183)](_0x4d813c=>{const _0x497ebf=_0x208ef3;_0x4d813c[_0x497ebf(0x10f)]<_0x35c7be&&dbPerformance[_0x497ebf(0xef)](_0x497ebf(0x178))[_0x497ebf(0x112)]({'date':_0x4d813c['date']})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0xab44a6){const _0x5b724d=_0x113277;let _0x5f1865,_0x17b9c3=[];logHistory(_0x5b724d(0xea),_0x5b724d(0x14c)),_0xab44a6[_0x5b724d(0x1a7)][_0x5b724d(0x183)](_0x4577b8=>{const _0x2546d7=_0x5b724d;if(_0x4577b8[_0x2546d7(0x13b)]!=config['basecoin']&&!_0x4577b8[_0x2546d7(0xda)])_0x17b9c3[_0x2546d7(0x143)]({'coin':_0x4577b8[_0x2546d7(0x13b)],'symbol':_0x4577b8['symbol']});});let _0x22faa1=[];try{const _0x42b2d4=fns[_0x5b724d(0x1c6)](fns['parseISO'](_0xab44a6[_0x5b724d(0x111)][_0x5b724d(0xfb)](/\//g,'-')),_0x5b724d(0x11a));for(const _0x52616b of _0x17b9c3){if(_0x52616b[_0x5b724d(0x13b)]!=config[_0x5b724d(0x1b3)])_0x5f1865=await exchange[_0x5b724d(0x149)](_0x52616b[_0x5b724d(0x110)],Date[_0x5b724d(0xd1)](_0x42b2d4));_0x5f1865[_0x5b724d(0x183)](_0x4707ce=>{const _0x3f1578=_0x5b724d,_0x1093b4=_0x52616b[_0x3f1578(0x110)][_0x3f1578(0x108)](config[_0x3f1578(0x1b3)]+'/'),_0x12319b=fns[_0x3f1578(0x1c6)](fns[_0x3f1578(0x19c)](_0x4707ce[_0x3f1578(0xcf)]),_0x3f1578(0x145)),_0x35c5b7=fns[_0x3f1578(0x1c6)](fns[_0x3f1578(0x19c)](_0x4707ce[_0x3f1578(0xcf)]),_0x3f1578(0x184));let _0x3a60d5;if(_0x4707ce['side']=='buy'&&_0x1093b4==![])_0x3a60d5=_0x4707ce[_0x3f1578(0x19f)];if(_0x4707ce[_0x3f1578(0x196)]==_0x3f1578(0x16a)&&_0x1093b4==!![])_0x3a60d5=-_0x4707ce['amount']*_0x4707ce[_0x3f1578(0x1b0)];if(_0x4707ce[_0x3f1578(0x196)]==_0x3f1578(0xf2)&&_0x1093b4==![])_0x3a60d5=-_0x4707ce[_0x3f1578(0x19f)];if(_0x4707ce['side']=='sell'&&_0x1093b4==!![])_0x3a60d5=_0x4707ce[_0x3f1578(0x19f)]*_0x4707ce[_0x3f1578(0x1b0)];_0x22faa1['push']({'timestamp':_0x12319b,'date':_0x35c5b7,'coin':_0x52616b[_0x3f1578(0x13b)],'symbol':_0x52616b[_0x3f1578(0x110)],'type':_0x4707ce[_0x3f1578(0x179)],'side':_0x4707ce['side'],'reverse':_0x1093b4,'amount':formatResult(_0x4707ce[_0x3f1578(0xf3)],0x8),'filled':formatResult(_0x4707ce[_0x3f1578(0xf3)],0x8),'coinamount':formatResult(_0x3a60d5,0x8),'price':formatResult(_0x4707ce[_0x3f1578(0x1b0)],0x8)});let _0xffdbef;if(_0x4707ce[_0x3f1578(0x196)]=='buy'&&_0x1093b4==![])_0xffdbef=-_0x4707ce[_0x3f1578(0x19f)]*_0x4707ce[_0x3f1578(0x1b0)];if(_0x4707ce[_0x3f1578(0x196)]==_0x3f1578(0x16a)&&_0x1093b4==!![])_0xffdbef=_0x4707ce[_0x3f1578(0x19f)];if(_0x4707ce[_0x3f1578(0x196)]==_0x3f1578(0xf2)&&_0x1093b4==![])_0xffdbef=_0x4707ce[_0x3f1578(0x19f)]*_0x4707ce['price'];if(_0x4707ce[_0x3f1578(0x196)]==_0x3f1578(0xf2)&&_0x1093b4==!![])_0xffdbef=-_0x4707ce[_0x3f1578(0x19f)];_0x22faa1[_0x3f1578(0x143)]({'date':_0x35c5b7,'coin':config[_0x3f1578(0x1b3)],'coinamount':formatResult(_0xffdbef,0x8)});});}_0x22faa1[_0x5b724d(0x17d)]((_0x5ebbd2,_0x3ef2a9)=>_0x5ebbd2[_0x5b724d(0x123)]>_0x3ef2a9['timestamp']?0x1:_0x3ef2a9[_0x5b724d(0x123)]>_0x5ebbd2[_0x5b724d(0x123)]?-0x1:0x0),dbLogs[_0x5b724d(0xef)](_0x5b724d(0x1ac))[_0x5b724d(0x112)]()['write'](),_0x22faa1[_0x5b724d(0x183)](_0x6c5918=>{const _0x4178b3=_0x5b724d;let _0x1afd4a;_0x6c5918['coin']!=config['basecoin']&&(_0x1afd4a={'time':_0x6c5918[_0x4178b3(0x123)],'type':'order','event':'Order:\x20'+_0x6c5918['symbol']+'\x20'+_0x6c5918[_0x4178b3(0x196)]+'\x20#'+_0x6c5918[_0x4178b3(0x19f)]+'\x20@'+_0x6c5918[_0x4178b3(0x1b0)]},dbLogs['get'](_0x4178b3(0x1ac))[_0x4178b3(0x143)](_0x1afd4a)[_0x4178b3(0x126)]());});const _0x31dcc4=fns['eachDayOfInterval']({'start':new Date(_0xab44a6[_0x5b724d(0x111)]),'end':new Date()})['map'](_0x16822b=>fns[_0x5b724d(0x1c6)](_0x16822b,_0x5b724d(0x184)));let _0x30e0ae=[];_0xab44a6[_0x5b724d(0x1a7)][_0x5b724d(0x183)](_0x56138d=>{const _0x3f853c=_0x5b724d;if(!_0x56138d['excluded']){_0x30e0ae[_0x56138d[_0x3f853c(0x13b)]]=[];let _0x5c9d78=_0x56138d[_0x3f853c(0x1b8)];_0x31dcc4[_0x3f853c(0x183)]((_0x162e7c,_0x143dc9)=>{const _0x59a3bc=_0x3f853c;let _0xa1aef9=_0x22faa1[_0x59a3bc(0x17c)](_0x4bcaad=>_0x4bcaad[_0x59a3bc(0x13b)]==_0x56138d['coin']&&_0x4bcaad['date']==_0x162e7c);if(_0xa1aef9[_0x59a3bc(0x14a)]!=0x0){let _0x1b0ac4=_0xa1aef9[_0x59a3bc(0x14b)]((_0x42eb48,_0x586ccd)=>{const _0xf502fc=_0x59a3bc;return _0x42eb48+=_0x586ccd[_0xf502fc(0x12b)],_0x42eb48;},0x0);_0x5c9d78+=_0x1b0ac4;}_0x30e0ae[_0x56138d[_0x59a3bc(0x13b)]][_0x162e7c]=_0x5c9d78;});}});const _0x4ef759=[..._0x17b9c3];_0x4ef759[_0x5b724d(0x143)]({'coin':stablecoins['eur'][_0x5b724d(0x13b)],'symbol':stablecoins['eur']['symbol']}),_0x4ef759[_0x5b724d(0x143)]({'coin':stablecoins[_0x5b724d(0x120)]['coin'],'symbol':stablecoins[_0x5b724d(0x120)][_0x5b724d(0x110)]});let _0x3573b2=[];for(const _0x3e1e0b of _0x4ef759){_0x3573b2[_0x3e1e0b[_0x5b724d(0x13b)]]=await getCloses(_0x3e1e0b['symbol'],new Date(_0xab44a6[_0x5b724d(0x111)]));}dbPerformance[_0x5b724d(0xef)](_0x5b724d(0x178))[_0x5b724d(0x112)]()[_0x5b724d(0x126)](),_0x31dcc4[_0x5b724d(0x183)]((_0xe6de78,_0x4b8b94)=>{const _0x51ce56=_0x5b724d;let _0x58ff55,_0xdb3f23=[];_0x4b8b94==0x0?(_0xab44a6['portfolio'][_0x51ce56(0x183)](_0x40714e=>{const _0x1138d5=_0x51ce56;!_0x40714e['excluded']&&_0xdb3f23[_0x1138d5(0x143)]({'coin':_0x40714e[_0x1138d5(0x13b)],'number':_0x40714e[_0x1138d5(0x1b8)],'price':_0x40714e['startprice']});}),_0x58ff55={'date':_0xe6de78,'eur':_0x3573b2[stablecoins['eur']['coin']][_0x4b8b94],'usd':_0x3573b2[stablecoins[_0x51ce56(0x120)]['coin']][_0x4b8b94],'coins':_0xdb3f23}):(_0xab44a6[_0x51ce56(0x1a7)][_0x51ce56(0x183)](_0x1a8a16=>{const _0x3d6125=_0x51ce56;!_0x1a8a16[_0x3d6125(0xda)]&&_0xdb3f23['push']({'coin':_0x1a8a16[_0x3d6125(0x13b)],'number':_0x30e0ae[_0x1a8a16[_0x3d6125(0x13b)]][_0xe6de78],'price':_0x1a8a16[_0x3d6125(0x13b)]==config['basecoin']?0x1:_0x3573b2[_0x1a8a16['coin']][_0x4b8b94]});}),_0x58ff55={'date':_0xe6de78,'eur':_0x3573b2[stablecoins[_0x51ce56(0x13e)][_0x51ce56(0x13b)]][_0x4b8b94],'usd':_0x3573b2[stablecoins[_0x51ce56(0x120)][_0x51ce56(0x13b)]][_0x4b8b94],'coins':_0xdb3f23}),dbPerformance['get'](_0x51ce56(0x178))[_0x51ce56(0x143)](_0x58ff55)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x57fbbd of _0x22faa1){_0x57fbbd[_0x5b724d(0x13b)]!=config[_0x5b724d(0x1b3)]&&await updateCoinResults(_0x57fbbd);}logHistory(_0x5b724d(0xea),_0x5b724d(0x197));}catch(_0x39406e){await handleError(_0x39406e,_0x5b724d(0x18a));}}async function getCloses(_0x394509,_0x10bb01,_0x24812a=undefined){const _0x2c8d26=_0x113277,_0x3c58dd='1d';let _0xe84f97,_0x5f4144;const _0x407bf0=fns[_0x2c8d26(0x1a5)](new Date(),_0x10bb01)+0x1;try{const _0x246247=exchange[_0x2c8d26(0xec)]()-_0x407bf0*0x18*0xe10*0x3e8;_0xe84f97=await exchange[_0x2c8d26(0xe5)](_0x394509,_0x3c58dd,_0x246247,_0x24812a),_0x5f4144=await exchange['fetchTickers'](_0x394509);}catch(_0x238bef){await handleError(_0x238bef,_0x2c8d26(0x117));}let _0xe085d9=ohlcvToCloses(_0xe84f97);return _0xe085d9['push'](_0x5f4144[_0x394509][_0x2c8d26(0xd2)]),_0xe085d9;}function ohlcvToCloses(_0x544ac3){let _0x532e27=[];return _0x544ac3['forEach'](function(_0x34fcea){const _0x153040=_0x8009;_0x532e27[_0x153040(0x143)](_0x34fcea[0x4]);}),_0x532e27;}function getConfiguration(_0x105503){const _0x1f6222=_0x113277;let _0x1b27f0=dbConfig[_0x1f6222(0xef)](_0x1f6222(0x186))[_0x1f6222(0x140)]({'botID':_0x105503})[_0x1f6222(0xcc)]();if(_0x1b27f0){let _0x9d2d3f=![];!_0x1b27f0[_0x1f6222(0x1a6)]&&(_0x1b27f0={..._0x1b27f0,'exchange':_0x1f6222(0xf1)},_0x9d2d3f=!![]),!_0x1b27f0[_0x1f6222(0x1b3)]&&(_0x1b27f0={..._0x1b27f0,'basecoin':_0x1f6222(0x1aa)},_0x9d2d3f=!![]),!_0x1b27f0[_0x1f6222(0xca)]&&(_0x1b27f0={..._0x1b27f0,'ordertype':_0x1f6222(0xce)},_0x9d2d3f=!![]),!_0x1b27f0[_0x1f6222(0x15b)]&&(_0x1b27f0={..._0x1b27f0,'timeout':0x14},_0x9d2d3f=!![]),_0x9d2d3f&&(_0x1b27f0={'botID':_0x1b27f0[_0x1f6222(0x194)],'exchange':_0x1b27f0['exchange'],'apiKey':_0x1b27f0[_0x1f6222(0xdd)],'apiSecret':_0x1b27f0[_0x1f6222(0xe0)],'basecoin':_0x1b27f0['basecoin'],'botname':_0x1b27f0[_0x1f6222(0x182)],'threshold':_0x1b27f0[_0x1f6222(0xfa)],'ordertype':_0x1b27f0[_0x1f6222(0xca)],'timeout':_0x1b27f0[_0x1f6222(0x15b)],'startdate':_0x1b27f0[_0x1f6222(0x111)],'recreate':_0x1b27f0[_0x1f6222(0x161)],'timeshift':_0x1b27f0[_0x1f6222(0x130)],'headless':_0x1b27f0[_0x1f6222(0xe8)],'cooldown':_0x1b27f0[_0x1f6222(0xf5)],'portfolio':_0x1b27f0['portfolio']},dbConfig['get'](_0x1f6222(0x186))[_0x1f6222(0x112)]()[_0x1f6222(0x126)](),dbConfig['get'](_0x1f6222(0x186))['push'](_0x1b27f0)[_0x1f6222(0x126)]());}else _0x1b27f0={'botID':_0x105503,'exchange':_0x1f6222(0xf1),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1f6222(0x1c1)+_0x105503,'threshold':'3','ordertype':_0x1f6222(0xce),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x1b27f0;}function emittedConfiguration(){const _0x11a0bd=_0x113277;let _0x25af82;return config['apiKey']==''?_0x25af82=config:_0x25af82={...config,'apiKey':_0x11a0bd(0x136),'apiSecret':'************'},_0x25af82;}function getSettings(){const _0x47447d=_0x113277;return dbSettings[_0x47447d(0xef)](_0x47447d(0xeb))[_0x47447d(0xcc)]();}function getSecure(){const _0x1cf3fb=_0x113277;return dbSecure[_0x1cf3fb(0xef)](_0x1cf3fb(0x132))[_0x1cf3fb(0xcc)]()||{};}function updateTimeshift(_0x510a36){const _0x37d8f5=_0x113277;let _0x34f2d7=dbConfig[_0x37d8f5(0xef)](_0x37d8f5(0x186))[_0x37d8f5(0x140)]({'botID':botID})[_0x37d8f5(0xcc)]();_0x34f2d7&&dbConfig['get']('bot')[_0x37d8f5(0x140)]({'botID':botID})[_0x37d8f5(0xc7)]({'timeshift':_0x510a36})[_0x37d8f5(0x126)](),config[_0x37d8f5(0x130)]=_0x510a36,proxyEmit(_0x37d8f5(0x13a),emittedConfiguration());}async function storeConfiguration(_0x2479ee){const _0x7970cf=_0x113277;let _0x2116b2=dbConfig[_0x7970cf(0xef)](_0x7970cf(0x186))[_0x7970cf(0x140)]({'botID':botID})[_0x7970cf(0xcc)]();_0x2479ee={..._0x2479ee,'apiKey':crypt[_0x7970cf(0xcb)](secure[_0x7970cf(0x102)],_0x2479ee[_0x7970cf(0xdd)])[_0x7970cf(0x153)],'apiSecret':crypt[_0x7970cf(0xcb)](secure['privateKey'],_0x2479ee[_0x7970cf(0xe0)])[_0x7970cf(0x153)]};if(_0x2116b2){if(_0x2479ee[_0x7970cf(0xdd)]==_0x7970cf(0x136))_0x2479ee['apiKey']=config['apiKey'];if(_0x2479ee[_0x7970cf(0xe0)]==_0x7970cf(0x136))_0x2479ee[_0x7970cf(0xe0)]=config[_0x7970cf(0xe0)];dbConfig['get'](_0x7970cf(0x186))[_0x7970cf(0x140)]({'botID':botID})[_0x7970cf(0xc7)](_0x2479ee)[_0x7970cf(0x126)]();}else dbConfig['get'](_0x7970cf(0x186))[_0x7970cf(0x143)](_0x2479ee)[_0x7970cf(0x126)](),process[_0x7970cf(0x15d)]({'status':_0x7970cf(0x19d),'live':_0x7970cf(0x15f)});config={..._0x2479ee};if(config[_0x7970cf(0x161)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x2479ee[_0x7970cf(0x182)]}),proxyEmit(_0x7970cf(0x1c0)),reset();}async function storeHeadless(_0x48c73b){const _0x571b31=_0x113277,_0x3254e2={...config,'headless':_0x48c73b[_0x571b31(0xe8)]};let _0x572a51=dbConfig['get'](_0x571b31(0x186))['find']({'botID':botID})[_0x571b31(0xcc)]();_0x572a51&&dbConfig['get'](_0x571b31(0x186))[_0x571b31(0x140)]({'botID':botID})[_0x571b31(0xc7)](_0x3254e2)[_0x571b31(0x126)](),config={..._0x3254e2},proxyEmit(_0x571b31(0x13a),emittedConfiguration());}function noslash(_0x100e92){const _0xade83b=_0x113277;return _0x100e92[_0xade83b(0xfb)]('/','');}function updateNumberCoins(_0x3f728b){const _0x229045=_0x113277;_0x3f728b[_0x229045(0x125)]&&_0x3f728b[_0x229045(0x125)]==_0x229045(0x10c)&&_0x3f728b[_0x229045(0x10b)]['forEach'](_0x3ea196=>{const _0x1070c6=_0x229045;let _0x37b80c=currentCoins[_0x1070c6(0x140)](_0x4ae8bc=>_0x4ae8bc[_0x1070c6(0x13b)]==_0x3ea196['asset']);if(_0x37b80c)_0x37b80c[_0x1070c6(0x101)]=Number(_0x3ea196[_0x1070c6(0x135)]);}),_0x3f728b[_0x229045(0x125)]&&_0x3f728b[_0x229045(0x125)]=='executionReport'&&(_0x3f728b['orderType']==_0x229045(0x185)&&_0x3f728b[_0x229045(0xd6)]==_0x229045(0xfc)&&lastOrders[_0x229045(0x183)](_0xaf93a3=>{const _0x1e7740=_0x229045;if(_0xaf93a3[_0x1e7740(0x1a9)]==_0x3f728b[_0x1e7740(0x1a9)]){if(_0xaf93a3[_0x1e7740(0xe9)])_0xaf93a3['filled']=_0x3f728b[_0x1e7740(0x11b)]*_0xaf93a3[_0x1e7740(0x1b0)];else _0xaf93a3[_0x1e7740(0xf3)]=_0x3f728b[_0x1e7740(0x11b)];}}));}async function getCoins(_0xa47c51=!![],_0x9472b9=config[_0x113277(0x1b3)]){const _0xb90289=_0x113277;let _0x277b67,_0x46ca45=[],_0x2a8b88=[],_0xca7a0d=[];try{_0x277b67=await exchange[_0xb90289(0x1bd)](),mybalances=_0x277b67[_0xb90289(0x1b7)];if(!_0xa47c51)for(const [_0x7ea84b,_0x5b3068]of Object[_0xb90289(0x1c3)](mybalances)){_0xca7a0d['push'](_0x7ea84b);}else config['portfolio'][_0xb90289(0x183)](_0x471c4c=>{const _0x29fc57=_0xb90289;if(!_0x471c4c[_0x29fc57(0xda)])_0xca7a0d[_0x29fc57(0x143)](_0x471c4c[_0x29fc57(0x13b)]);});if(_0x9472b9=='')for(const [_0x18ddf6,_0x5ca474]of Object[_0xb90289(0x1c3)](mybalances)){_0x5ca474[_0xb90289(0x13d)]()!=0x0&&_0x2a8b88[_0xb90289(0x143)]({'coin':_0x18ddf6});}else for(const [_0x2fda4b,_0x29616d]of Object[_0xb90289(0x1c3)](mybalances)){if(_0xca7a0d[_0xb90289(0x108)](_0x2fda4b)){if((_0x29616d[_0xb90289(0x13d)]()!=0x0||config[_0xb90289(0x1a7)][_0xb90289(0x140)](_0x31baf5=>_0x31baf5[_0xb90289(0x13b)]==_0x2fda4b))&&(allSymbols[_0xb90289(0x108)](_0x2fda4b+'/'+_0x9472b9)||_0x2fda4b==_0x9472b9))_0x2a8b88['push']({'coin':_0x2fda4b,'symbol':_0x2fda4b+'/'+_0x9472b9,'reverse':![],'number':_0x29616d}),_0x2fda4b!=_0x9472b9&&_0x46ca45[_0xb90289(0x143)](_0x2fda4b+'/'+_0x9472b9);else(_0x29616d[_0xb90289(0x13d)]()!=0x0||config[_0xb90289(0x1a7)][_0xb90289(0x140)](_0x3300e1=>_0x3300e1['coin']==_0x2fda4b))&&allSymbols[_0xb90289(0x108)](_0x9472b9+'/'+_0x2fda4b)&&(_0x2a8b88[_0xb90289(0x143)]({'coin':_0x2fda4b,'symbol':_0x9472b9+'/'+_0x2fda4b,'reverse':!![],'number':_0x29616d}),_0x2fda4b!=_0x9472b9&&_0x46ca45['push'](_0x9472b9+'/'+_0x2fda4b));}}}catch(_0xcdeca9){if(!_0xa47c51){if(_0xcdeca9[_0xb90289(0x13d)]()[_0xb90289(0x108)](_0xb90289(0x147)))return logHistory('error',_0xb90289(0xd3)),![];else{if(_0xcdeca9['toString']()[_0xb90289(0x108)](_0xb90289(0x180)))return logHistory('error',_0xb90289(0x16c)),![];else{if(_0xcdeca9[_0xb90289(0x13d)]()[_0xb90289(0x108)](_0xb90289(0x162)))return logHistory(_0xb90289(0x1b1),_0xb90289(0x15a)),![];else await handleError(_0xcdeca9,'getCoins()');}}}else await handleError(_0xcdeca9,_0xb90289(0x1a1));}return _0x2a8b88;}async function getPortfolio(_0x274bb3){const _0x56cb5d=_0x113277;let _0x347cfd=[],_0x2af47d=[],_0x57a515,_0x11638d=[],_0x42273b,_0xde00cc;_0x274bb3[_0x56cb5d(0xdd)]===_0x56cb5d(0x136)||_0x274bb3['apiSecret']===_0x56cb5d(0x136)?(_0x42273b=config[_0x56cb5d(0xdd)],_0xde00cc=config['apiSecret']):(_0x42273b=_0x274bb3[_0x56cb5d(0xdd)],_0xde00cc=_0x274bb3[_0x56cb5d(0xe0)]);await initExchange(_0x42273b,_0xde00cc);let _0x12e5ba=await loadSymbols();if(_0x12e5ba){_0x11638d=await getCoins(![],_0x274bb3[_0x56cb5d(0x1b3)]);if(_0x11638d===![])proxyEmit('portfolio',![]);else{if(_0x274bb3[_0x56cb5d(0x1b3)]=='')proxyEmit('portfolio',_0x11638d);else{_0x11638d[_0x56cb5d(0x183)](_0x3de565=>{const _0x883746=_0x56cb5d;_0x347cfd[_0x883746(0x143)](_0x3de565[_0x883746(0x110)]);});try{_0x2af47d=await exchange['fetchTickers'](_0x347cfd);}catch(_0x165991){await handleError(_0x165991,_0x56cb5d(0x168));}_0x11638d[_0x56cb5d(0x183)](_0x29f700=>{const _0x43e585=_0x56cb5d;_0x29f700[_0x43e585(0x13b)]!=_0x274bb3['basecoin']?_0x57a515=_0x29f700[_0x43e585(0xe9)]?0x1/_0x2af47d[_0x29f700['symbol']][_0x43e585(0xd2)]:_0x2af47d[_0x29f700['symbol']][_0x43e585(0xd2)]:_0x57a515=0x1,_0x29f700[_0x43e585(0x1b0)]=formatResult(_0x57a515,0x8);}),proxyEmit('portfolio',_0x11638d);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x2e9962){const _0x1c4b45=_0x113277;let _0x47e15f=!![];const _0x5dbc1a=!_0x2e9962[_0x1c4b45(0xe9)]?markets[_0x2e9962[_0x1c4b45(0x110)]][_0x1c4b45(0x157)]['amount'][_0x1c4b45(0x115)]:markets[_0x2e9962[_0x1c4b45(0x110)]][_0x1c4b45(0x157)]['cost'][_0x1c4b45(0x115)],_0x52ce08=!_0x2e9962[_0x1c4b45(0xe9)]?markets[_0x2e9962['symbol']][_0x1c4b45(0x157)][_0x1c4b45(0xee)][_0x1c4b45(0x115)]:markets[_0x2e9962[_0x1c4b45(0x110)]][_0x1c4b45(0x157)]['amount']['min'];if(Math[_0x1c4b45(0xf8)](_0x2e9962[_0x1c4b45(0xcd)])<_0x5dbc1a)_0x47e15f=![];if(Math[_0x1c4b45(0xf8)](_0x2e9962[_0x1c4b45(0xcd)])*_0x2e9962[_0x1c4b45(0xd2)]<_0x52ce08)_0x47e15f=![];return _0x47e15f;}async function getBalances(){const _0x5d9343=_0x113277;let _0x51aafa=0x0,_0x1c3646;const _0x589c6b=config[_0x5d9343(0xfa)];currentCoins['forEach'](_0x130001=>{const _0x5ec4ff=_0x5d9343;if(_0x130001['coin']!=config[_0x5ec4ff(0x1b3)]){let _0x42eaae=global['ticker'][noslash(_0x130001['symbol'])];_0x1c3646=_0x130001[_0x5ec4ff(0xe9)]?0x1/_0x42eaae:_0x42eaae;}else _0x1c3646=0x1;let _0x55288c=_0x130001[_0x5ec4ff(0x101)]*_0x1c3646;_0x51aafa+=_0x55288c,_0x130001[_0x5ec4ff(0xd2)]=formatResult(Number(_0x1c3646),0x8),_0x130001[_0x5ec4ff(0xcc)]=_0x55288c;}),currentCoins['forEach'](_0x53a82f=>{const _0x1dc694=_0x5d9343;let _0x12ab5e=config[_0x1dc694(0x1a7)][_0x1dc694(0x140)](_0x5ad062=>_0x5ad062['coin']==_0x53a82f['coin']),_0xd7672f=Number(_0x12ab5e['distribution']),_0x32ecb9=_0x53a82f[_0x1dc694(0xcc)]/_0x51aafa*0x64,_0x13b2ab=_0xd7672f*_0x51aafa/0x64/_0x53a82f[_0x1dc694(0xd2)]-_0x53a82f['number'];_0x53a82f[_0x1dc694(0x18b)]=formatResult(_0x32ecb9,0x3),_0x53a82f[_0x1dc694(0x1a0)]=formatResult(_0xd7672f,0x3),_0x53a82f[_0x1dc694(0xcd)]=formatResult(_0x13b2ab,0x8),_0x53a82f[_0x1dc694(0x196)]='',_0x53a82f[_0x1dc694(0x19a)]='';if(_0x53a82f[_0x1dc694(0x13b)]!=config[_0x1dc694(0x1b3)]){if(_0x53a82f['distribution']>_0xd7672f)_0x53a82f[_0x1dc694(0x196)]='sell',_0x53a82f[_0x1dc694(0x19a)]=checkMinimums(_0x53a82f);else _0x53a82f['distribution']<_0xd7672f&&(_0x53a82f[_0x1dc694(0x196)]='buy',_0x53a82f[_0x1dc694(0x19a)]=checkMinimums(_0x53a82f));}_0x53a82f['delta']=_0x53a82f[_0x1dc694(0x18b)]/_0x53a82f['target']-0x1;}),currentCoins[_0x5d9343(0x17d)]((_0x58b670,_0x235111)=>_0x58b670['delta']<_0x235111[_0x5d9343(0x1c4)]?0x1:_0x235111[_0x5d9343(0x1c4)]<_0x58b670[_0x5d9343(0x1c4)]?-0x1:0x0);const _0xe6e3a1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xe6e3a1[_0x5d9343(0x13e)],'usd':_0xe6e3a1[_0x5d9343(0x120)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x589c6b},proxyEmit(_0x5d9343(0x10b),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5d9343(0xe8)])headlessMode({'portfolio':currentCoins,'threshold':_0x589c6b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4196b3=_0x113277;if(!lastBalances)return;let _0x13b78d=await getStartingBalances(![]),_0x579c22=[],_0x5f1fc3=[],_0x35b852;JSON[_0x4196b3(0xd1)](lastBalances[_0x4196b3(0x1a7)])[_0x4196b3(0x183)](_0x2bc3dd=>{const _0x278111=_0x4196b3;let _0x5a4869={'coin':_0x2bc3dd[_0x278111(0x13b)],'number':_0x2bc3dd[_0x278111(0x101)],'price':_0x2bc3dd[_0x278111(0xd2)]};_0x579c22[_0x278111(0x143)](_0x5a4869);if(!_0x13b78d[_0x278111(0x151)]||!_0x13b78d[_0x278111(0x151)]['find'](_0x1cb226=>_0x1cb226['coin']==_0x2bc3dd[_0x278111(0x13b)]&&_0x1cb226['number']!=0x0))_0x5f1fc3[_0x278111(0x143)](_0x5a4869);});const _0x368298=await getFiat();_0x35b852={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x368298[_0x4196b3(0x13e)],'usd':_0x368298['usd'],'coins':_0x579c22};let _0x3b7cf9=dbPerformance[_0x4196b3(0xef)](_0x4196b3(0x178))['find']({'date':_0x35b852[_0x4196b3(0x10f)]})[_0x4196b3(0xcc)]();_0x3b7cf9?dbPerformance[_0x4196b3(0xef)](_0x4196b3(0x178))[_0x4196b3(0x140)]({'date':_0x35b852[_0x4196b3(0x10f)]})[_0x4196b3(0xc7)](_0x35b852)[_0x4196b3(0x126)]():dbPerformance[_0x4196b3(0xef)](_0x4196b3(0x178))[_0x4196b3(0x143)](_0x35b852)[_0x4196b3(0x126)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x1d75cc=_0x113277;if(dbPerformance['has']('data')[_0x1d75cc(0xcc)]()){let _0x16ccde=dbPerformance[_0x1d75cc(0xef)](_0x1d75cc(0x178))[_0x1d75cc(0xd5)](_0x1d75cc(0x10f))['value']();proxyEmit(_0x1d75cc(0x13c),_0x16ccde),lastPerformanceEmitted=getDate();}else proxyEmit(_0x1d75cc(0x13c),[]);}async function getStartingBalances(_0x4e72f2=!![]){const _0x2bea2c=_0x113277;let _0x46acff=dbPerformance[_0x2bea2c(0xef)]('data')[_0x2bea2c(0x140)]({'date':config[_0x2bea2c(0x111)]})[_0x2bea2c(0xcc)]();config[_0x2bea2c(0xdd)]!=''&&!_0x46acff&&(await setStartDatePerformance(config),_0x46acff=dbPerformance['get']('data')[_0x2bea2c(0x140)]({'date':config[_0x2bea2c(0x111)]})[_0x2bea2c(0xcc)]());if(config[_0x2bea2c(0xdd)]==''||!_0x46acff)return{};let _0x22abee=0x0,_0x151463=0x0,_0x41e2d6=0x0,_0x14b15b=[],_0x39e143=0x0;config['portfolio'][_0x2bea2c(0x183)](_0x28277c=>{const _0x338226=_0x2bea2c;if(!_0x28277c['excluded']){_0x14b15b[_0x39e143]={'coin':_0x28277c[_0x338226(0x13b)],'symbol':_0x28277c['symbol'],'number':_0x28277c[_0x338226(0x1b8)],'price':_0x28277c[_0x338226(0x129)]},_0x22abee+=_0x28277c['startprice']*_0x28277c['startnumber'];if(config[_0x338226(0x1b3)]==_0x338226(0x1aa))_0x151463+=_0x28277c['startprice']*_0x28277c['startnumber']*_0x46acff['eur'],_0x41e2d6+=_0x28277c[_0x338226(0x129)]*_0x28277c[_0x338226(0x1b8)]*_0x46acff[_0x338226(0x120)];else{if(config['basecoin']==_0x338226(0x1b2)||config[_0x338226(0x1b3)]==_0x338226(0x171)||config['basecoin']=='USDC')_0x151463+=_0x28277c['startprice']*_0x28277c[_0x338226(0x1b8)]*_0x46acff[_0x338226(0x13e)]/_0x46acff[_0x338226(0x120)],_0x41e2d6+=_0x28277c[_0x338226(0x129)]*_0x28277c[_0x338226(0x1b8)];else config['basecoin']==_0x338226(0x17b)&&(_0x151463+=_0x28277c[_0x338226(0x129)]*_0x28277c[_0x338226(0x1b8)],_0x41e2d6+=_0x28277c[_0x338226(0x129)]*_0x28277c['startnumber']*_0x46acff['usd']/_0x46acff[_0x338226(0x13e)]);}_0x39e143++;}});let _0x1da0ac={'basecoin':_0x22abee,'eur':_0x151463,'usd':_0x41e2d6,'coins':_0x14b15b};if(_0x4e72f2)proxyEmit('starting-balances',_0x1da0ac);return _0x1da0ac;}function headlessMode(_0x11784a){const _0xdf85b5=_0x113277;let _0x2cf2e7=_0x11784a[_0xdf85b5(0x1a7)],_0x516a23=_0x11784a['threshold'],_0x1af6f4=[];for(let _0x24b71d of _0x2cf2e7){if(_0x24b71d[_0xdf85b5(0x13b)]!=config[_0xdf85b5(0x1b3)]){if(_0x24b71d[_0xdf85b5(0x18b)]/_0x24b71d['target']-0x1>=_0x516a23/0x64){if(_0x24b71d[_0xdf85b5(0x19a)])_0x1af6f4[_0xdf85b5(0x143)](_0x24b71d);}else{if(_0x24b71d[_0xdf85b5(0x18b)]/_0x24b71d[_0xdf85b5(0x1a0)]-0x1<=-_0x516a23/0x64){if(_0x24b71d[_0xdf85b5(0x19a)])_0x1af6f4['push'](_0x24b71d);}}}}_0x1af6f4[_0xdf85b5(0x14a)]>0x0&&placeOrder(_0x1af6f4);}function symbolToCoin(_0x1cab8d){const _0x58152a=_0x113277;let _0x37c31d;if(_0x1cab8d[_0x58152a(0x108)]('/'+config[_0x58152a(0x1b3)]))_0x37c31d=_0x1cab8d[_0x58152a(0xfb)]('/'+config['basecoin'],'');if(_0x1cab8d[_0x58152a(0x108)](config['basecoin']+'/'))_0x37c31d=_0x1cab8d[_0x58152a(0xfb)](config[_0x58152a(0x1b3)]+'/','');return _0x37c31d;}async function validateOrders(_0x206481=0x0){const _0x25d84e=_0x113277;let _0x27841a=[],_0x55c8a8=config['ordertype']==_0x25d84e(0xce)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x25d84e(0x15b)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x25d84e(0x183)](_0x5b7a86=>{const _0x912848=_0x25d84e;let _0x9e1fe8=previousCoins['find'](_0x5c647e=>_0x5c647e[_0x912848(0x13b)]==symbolToCoin(_0x5b7a86[_0x912848(0x110)])),_0x26f348=currentCoins['find'](_0x5db15a=>_0x5db15a[_0x912848(0x13b)]==symbolToCoin(_0x5b7a86[_0x912848(0x110)])),_0x496fa4,_0x2db5a3;_0x5b7a86['side']=='buy'&&!_0x5b7a86['reverse']||_0x5b7a86[_0x912848(0x196)]==_0x912848(0xf2)&&_0x5b7a86[_0x912848(0xe9)]?(_0x496fa4=_0x9e1fe8[_0x912848(0x101)]+0.9*_0x5b7a86[_0x912848(0xf3)],_0x2db5a3=_0x9e1fe8['number']+1.1*_0x5b7a86[_0x912848(0xf3)]):(_0x496fa4=_0x9e1fe8[_0x912848(0x101)]-1.1*_0x5b7a86[_0x912848(0xf3)],_0x2db5a3=_0x9e1fe8[_0x912848(0x101)]-0.9*_0x5b7a86[_0x912848(0xf3)]);const _0x30c738=_0x5b7a86[_0x912848(0xf3)]!=0x0&&_0x26f348['number']>=_0x496fa4&&_0x26f348[_0x912848(0x101)]<=_0x2db5a3;_0x27841a[_0x912848(0x143)](_0x30c738);if(_0x30c738&&config[_0x912848(0xca)]!=_0x912848(0xce)){if(_0x5b7a86[_0x912848(0xe9)])logHistory('order',_0x912848(0x1bb)+_0x5b7a86['symbol']+'\x20'+_0x5b7a86[_0x912848(0x196)]+'\x20#'+formatResult(_0x5b7a86[_0x912848(0xf3)]/_0x5b7a86['price'],0x8)+'\x20@'+formatResult(_0x5b7a86[_0x912848(0x1b0)],0x8));else logHistory(_0x912848(0xd7),'Order\x20filled:\x20'+_0x5b7a86['symbol']+'\x20'+_0x5b7a86[_0x912848(0x196)]+'\x20#'+formatResult(_0x5b7a86['filled'],0x8)+'\x20@'+formatResult(_0x5b7a86['price'],0x8));}}),_0x27841a[_0x25d84e(0x183)]((_0x573586,_0x4a36c3)=>{const _0x2ac40d=_0x25d84e;if(_0x573586)lastOrders[_0x2ac40d(0x18d)](_0x4a36c3,0x1);});if(_0x206481<_0x55c8a8&&_0x27841a[_0x25d84e(0x108)](![])){if(_0x206481==0x0){config[_0x25d84e(0xca)]==_0x25d84e(0xce)?logHistory('error',_0x25d84e(0x163)):logHistory(_0x25d84e(0x1b1),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x206481);},0xa*0x3e8);}else{(_0x206481==0x1||_0x206481==Math[_0x25d84e(0x1af)](_0x55c8a8/0x2)||_0x206481==_0x55c8a8-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x206481);},validateOrderInterval);}}else{lockOrders=![];if(_0x206481>0x0&&!_0x27841a['includes'](![]))config[_0x25d84e(0xca)]==_0x25d84e(0xce)?logHistory(_0x25d84e(0xea),_0x25d84e(0x107)):logHistory(_0x25d84e(0xea),_0x25d84e(0xed));else _0x206481>0x0&&_0x27841a['includes'](![])&&(config[_0x25d84e(0xca)]==_0x25d84e(0xce)?logHistory(_0x25d84e(0xea),_0x25d84e(0x100)+Math['round'](_0x55c8a8*validateOrderInterval/0xea60)+_0x25d84e(0xe7)):(lastOrders[_0x25d84e(0x183)](async _0x3a0da0=>{const _0x231470=_0x25d84e;try{const _0x186bff=await exchange[_0x231470(0x1b6)](_0x3a0da0['orderId'],_0x3a0da0[_0x231470(0x110)]);}catch(_0x2ac3f6){if(_0x2ac3f6[_0x231470(0x13d)]()[_0x231470(0x108)](_0x231470(0x1a8))){}else await handleError(_0x2ac3f6,_0x231470(0x14f));}}),logHistory('success',_0x25d84e(0x12d)+Math['round'](_0x55c8a8*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x27a702=_0x113277;dbCoinResults['get'](_0x27a702(0x151))[_0x27a702(0x112)]()[_0x27a702(0x126)]();let _0x4fbcea=await getStartingBalances(![]);_0x4fbcea[_0x27a702(0x151)]['forEach'](_0x26f5a9=>{const _0x470de7=_0x27a702,_0x56c735=_0x26f5a9['symbol'][_0x470de7(0x108)](config['basecoin']+'/');if(_0x26f5a9['coin']!=config['basecoin']){let _0x498cef={'coin':_0x26f5a9['coin'],'number':_0x26f5a9['number'],'breakeven':_0x26f5a9[_0x470de7(0x1b0)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x470de7(0xef)](_0x470de7(0x151))[_0x470de7(0x143)](_0x498cef)[_0x470de7(0x126)]();}});}async function updateCoinResults(_0x223369){const _0x445a96=_0x113277;let _0x2ecb78,_0x5e76ea,_0x4c5234,_0x4f0f92,_0x1612c2,_0x37a65b,_0x12ee03=dbCoinResults[_0x445a96(0xef)](_0x445a96(0x151))[_0x445a96(0x140)]({'coin':_0x223369[_0x445a96(0x13b)]})[_0x445a96(0xcc)]();if(!_0x12ee03)return;if(_0x223369[_0x445a96(0xd4)]&&_0x223369[_0x445a96(0xd4)]['currency']==config['basecoin'])_0x2ecb78=_0x223369[_0x445a96(0xd4)][_0x445a96(0xee)];else{if(_0x223369[_0x445a96(0xd4)]&&_0x223369[_0x445a96(0xd4)][_0x445a96(0x195)]==_0x445a96(0x199))_0x2ecb78=_0x223369[_0x445a96(0xd4)][_0x445a96(0xee)]*global['ticker'][_0x445a96(0x199)+config[_0x445a96(0x1b3)]];else _0x2ecb78=0.001*_0x223369[_0x445a96(0xf3)];}const _0xe0812=_0x223369[_0x445a96(0x110)][_0x445a96(0x108)](config['basecoin']+'/');_0xe0812&&(_0x37a65b={'coin':_0x223369['coin'],'symbol':_0x223369[_0x445a96(0x110)],'filled':_0x223369[_0x445a96(0xf3)]*_0x223369[_0x445a96(0x1b0)],'side':_0x223369[_0x445a96(0x196)]=='sell'?'buy':_0x445a96(0xf2),'price':0x1/_0x223369[_0x445a96(0x1b0)]},_0x223369={..._0x37a65b});_0x223369[_0x445a96(0x196)]==_0x445a96(0x16a)?_0x4c5234=(_0x12ee03[_0x445a96(0x15c)]*_0x12ee03['number']+_0x223369[_0x445a96(0x1b0)]*_0x223369[_0x445a96(0xf3)])/(_0x12ee03[_0x445a96(0x101)]+_0x223369[_0x445a96(0xf3)]):_0x4c5234=(_0x12ee03['breakeven']*_0x12ee03[_0x445a96(0x101)]-_0x223369[_0x445a96(0x1b0)]*_0x223369[_0x445a96(0xf3)])/(_0x12ee03[_0x445a96(0x101)]-_0x223369[_0x445a96(0xf3)]);_0x223369['side']=='buy'?_0x4f0f92=_0x12ee03[_0x445a96(0x152)]:_0x4f0f92=_0x12ee03[_0x445a96(0x152)]+(_0x223369['price']-_0x12ee03[_0x445a96(0x15c)])*_0x223369['filled'];_0x5e76ea=_0x223369[_0x445a96(0x196)]==_0x445a96(0xf2)?_0x12ee03[_0x445a96(0x101)]-_0x223369['filled']:_0x12ee03[_0x445a96(0x101)]+_0x223369[_0x445a96(0xf3)],_0x1612c2=(_0x223369[_0x445a96(0x1b0)]-_0x4c5234)*_0x5e76ea;let _0x24b679={'coin':_0x223369['coin'],'number':_0x5e76ea,'breakeven':formatResult(_0x4c5234,0x8),'realized':formatResult(_0x4f0f92,0x8),'unrealized':formatResult(_0x1612c2,0x8),'fees':formatResult(_0x12ee03[_0x445a96(0x1c9)]+_0x2ecb78,0x8),'sells':_0x223369[_0x445a96(0x196)]==_0x445a96(0xf2)?_0x12ee03[_0x445a96(0x166)]+0x1:_0x12ee03[_0x445a96(0x166)],'buys':_0x223369[_0x445a96(0x196)]==_0x445a96(0x16a)?_0x12ee03['buys']+0x1:_0x12ee03[_0x445a96(0x1c2)]};dbCoinResults[_0x445a96(0xef)](_0x445a96(0x151))['find']({'coin':_0x223369[_0x445a96(0x13b)]})['assign'](_0x24b679)['write']();}async function placeOrder(_0x28efca){const _0x324f7a=_0x113277,_0x5cfaa7=config[_0x324f7a(0xca)]==_0x324f7a(0xce)?_0x324f7a(0xce):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x324f7a(0xd1)](JSON[_0x324f7a(0x1c7)](currentCoins));for(const _0x290990 of _0x28efca){let _0x1b1fd4,_0xee9fde,_0x2c5dd3,_0x2ac07f,_0x552952,_0x1c8f4e=_0x290990['symbol'];try{const _0x584a5d=await exchange[_0x324f7a(0x12f)](_0x1c8f4e),_0x18e2ac=_0x584a5d[_0x1c8f4e];_0x1b1fd4=_0x18e2ac[_0x324f7a(0xd2)],_0xee9fde=_0x18e2ac['bid'],_0x2c5dd3=_0x18e2ac['ask'];_0x290990[_0x324f7a(0xe9)]?(_0x2ac07f=_0x290990[_0x324f7a(0x196)]=='buy'?_0x324f7a(0xf2):_0x324f7a(0x16a),_0x552952=Math[_0x324f7a(0xf8)](_0x290990['trade'])/_0x1b1fd4):(_0x2ac07f=_0x290990[_0x324f7a(0x196)],_0x552952=Math[_0x324f7a(0xf8)](_0x290990[_0x324f7a(0xcd)]));_0x5cfaa7==_0x324f7a(0xdb)&&(config['ordertype']==_0x324f7a(0x1c5)&&(_0x1b1fd4=_0x2ac07f==_0x324f7a(0x16a)?_0xee9fde:_0x2c5dd3),config[_0x324f7a(0xca)]=='limit-low'&&(_0x1b1fd4=_0x2ac07f==_0x324f7a(0x16a)?_0x2c5dd3:_0xee9fde));_0x552952=formatResult(_0x552952,0x8),_0x1b1fd4=formatResult(_0x1b1fd4,0x8);const _0x4cb7b6=await exchange[_0x324f7a(0x10e)](_0x1c8f4e,_0x5cfaa7,_0x2ac07f,_0x552952,_0x1b1fd4);lastOrders[_0x324f7a(0x143)]({'orderId':_0x4cb7b6['id'],'symbol':_0x1c8f4e,'side':_0x2ac07f,'reverse':_0x290990[_0x324f7a(0xe9)],'amount':_0x290990['reverse']?_0x4cb7b6['amount']*_0x4cb7b6[_0x324f7a(0x1b0)]:_0x4cb7b6[_0x324f7a(0x19f)],'filled':_0x290990['reverse']?_0x4cb7b6[_0x324f7a(0xf3)]*_0x4cb7b6['price']:_0x4cb7b6[_0x324f7a(0xf3)],'price':_0x4cb7b6['price']});const _0x39cabf=_0x5cfaa7==_0x324f7a(0xce)?'Market':config[_0x324f7a(0xca)]=='limit-high'?_0x324f7a(0x14e):_0x324f7a(0x156);if(_0x5cfaa7==_0x324f7a(0xce))logHistory(_0x324f7a(0xd7),_0x39cabf+_0x324f7a(0x16f)+_0x1c8f4e+'\x20'+_0x2ac07f+'\x20#'+formatResult(_0x4cb7b6[_0x324f7a(0xf3)],0x8)+'\x20@'+formatResult(_0x4cb7b6['price'],0x8));else logHistory(_0x324f7a(0xd7),_0x39cabf+_0x324f7a(0x16f)+_0x1c8f4e+'\x20'+_0x2ac07f+'\x20#'+formatResult(_0x4cb7b6[_0x324f7a(0x19f)],0x8)+'\x20@'+formatResult(_0x4cb7b6[_0x324f7a(0x1b0)],0x8));_0x4cb7b6[_0x324f7a(0x13b)]=_0x290990[_0x324f7a(0x13b)],await updateCoinResults(_0x4cb7b6);if(config[_0x324f7a(0xf5)]!=0x0){let _0x400415=null;if(cooldownTracker[_0x324f7a(0x14a)]==config[_0x324f7a(0xf5)]-0x1)_0x400415=cooldownTracker[_0x324f7a(0x188)]();const _0x2c6a90=getTimeStamp();cooldownTracker[_0x324f7a(0x143)](_0x2c6a90);if(_0x400415){const _0xd88149=fns['differenceInSeconds'](new Date(_0x2c6a90),new Date(_0x400415));_0xd88149<cooldownInterval&&(logHistory(_0x324f7a(0x1b1),_0x324f7a(0x11e)+config[_0x324f7a(0xf5)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x324f7a(0x12c)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x3804e8){if(_0x3804e8['toString']()[_0x324f7a(0x108)](_0x324f7a(0x144)))logHistory(_0x324f7a(0x1b1),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1c8f4e);else{if(_0x3804e8[_0x324f7a(0x13d)]()[_0x324f7a(0x108)]('Invalid\x20quantity'))logHistory(_0x324f7a(0x1b1),'Order\x20amount\x20is\x20invalid:\x20'+_0x1c8f4e);else await handleError(_0x3804e8,'placeOrder()');}}}if(lastOrders[_0x324f7a(0x14a)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x324f7a(0xca)]=='market'?logHistory(_0x324f7a(0x1b1),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x324f7a(0x1b1),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x324f7a(0xe8)]&&logHistory(_0x324f7a(0x1b1),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x352f29,_0x3bcf2f,_0x4d1c30=''){const _0x81d149=_0x113277;let _0x4840df={'time':getTimeStamp(),'type':_0x352f29,'event':_0x3bcf2f};dbLogs[_0x81d149(0xef)]('logs')[_0x81d149(0x143)](_0x4840df)['write']();if(_0x4d1c30=='')_0x4d1c30=_0x3bcf2f;proxyEmit(_0x81d149(0xfe),{'log':_0x4840df,'summary':_0x4d1c30}),process[_0x81d149(0x15d)]({'telegram':_0x4840df}),logging(''+_0x4840df[_0x81d149(0xfe)]);}function emitHistory(_0x592f33={}){const _0x110166=_0x113277;Object[_0x110166(0xc9)](_0x592f33)[_0x110166(0x14a)]==0x0&&(_0x592f33={'type':[_0x110166(0xd7),_0x110166(0xfe)],'event':'','page':0x1});if(_0x592f33[_0x110166(0x179)]['includes']('event'))_0x592f33['type'][_0x110166(0x18d)](_0x592f33[_0x110166(0x179)][_0x110166(0x131)](_0x110166(0xfe)),0x1,_0x110166(0x1b1),_0x110166(0xea));if(dbLogs[_0x110166(0x159)]('logs')['value']()){let _0x494129=dbLogs[_0x110166(0xef)](_0x110166(0x1ac))[_0x110166(0x17c)](_0x1ef9be=>{const _0x25ad8d=_0x110166;if(_0x592f33['type'][_0x25ad8d(0x14a)]==0x0)return![];else return _0x592f33[_0x25ad8d(0x179)][_0x25ad8d(0x108)](_0x1ef9be[_0x25ad8d(0x179)]);})[_0x110166(0x17c)](_0x1d837c=>{const _0x2b0644=_0x110166;if(_0x592f33[_0x2b0644(0xfe)]=='')return!![];else return _0x1d837c[_0x2b0644(0xfe)]['toLowerCase']()[_0x2b0644(0x108)](_0x592f33[_0x2b0644(0xfe)][_0x2b0644(0x141)]());})[_0x110166(0xd5)](_0x110166(0x177)),_0x24b3c1=_0x494129[_0x110166(0xcc)]()['length'];_0x494129=_0x494129[_0x110166(0xe9)]()[_0x110166(0x155)]((_0x592f33['page']-0x1)*logPageSize,_0x592f33[_0x110166(0x17f)]*logPageSize-0x1)[_0x110166(0xe9)]()['value'](),proxyEmit(_0x110166(0xfd),{'logs':_0x494129,'total':_0x24b3c1});}else proxyEmit(_0x110166(0xfd),{'logs':[],'total':0x0});}async function pauseBot(_0x1ddec8){const _0x11a97c=_0x113277,_0x3c4f64=new Date()[_0x11a97c(0x154)]();if(!lastBotPause)lastBotPause=new Date()[_0x11a97c(0x154)](),consecutivePauses=0x1;else{if(_0x3c4f64-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x11a97c(0x15d)]({'stop':_0x11a97c(0xd8)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x11a97c(0x154)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x1ddec8),botPaused=![],reset();}}async function handleError(_0xd01276,_0x251c7a,_0x128a56=''){const _0x5675b2=_0x113277;if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)](_0x5675b2(0x1b9)))logHistory('error',_0x251c7a+_0x5675b2(0x181)),await pauseBot(pauseBotInterval);else{if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)](_0x5675b2(0x17a)))logHistory(_0x5675b2(0x1b1),_0x251c7a+_0x5675b2(0x19b)),await pauseBot(pauseBotInterval);else{if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)](_0x5675b2(0x116)))logHistory('error',_0x251c7a+_0x5675b2(0xf4)),await pauseBot(pauseBotInterval);else{if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)](_0x5675b2(0x147)))logHistory(_0x5675b2(0x1b1),_0x251c7a+_0x5675b2(0x105)),logHistory(_0x5675b2(0x1b1),_0x5675b2(0x11f)),process[_0x5675b2(0x15d)]({'stop':_0x5675b2(0x139)});else{if(_0xd01276['toString']()[_0x5675b2(0x108)]('AuthenticationError'))logHistory(_0x5675b2(0x1b1),_0x251c7a+_0x5675b2(0x106)),logHistory(_0x5675b2(0x1b1),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5675b2(0x15d)]({'stop':_0x5675b2(0x139)});else{if(_0xd01276['toString']()[_0x5675b2(0x108)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x251c7a+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x5675b2(0x1b1),_0x5675b2(0x11f)),process[_0x5675b2(0x15d)]({'stop':_0x5675b2(0x139)});else{if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x251c7a+_0x5675b2(0xf9)),logHistory('error','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5675b2(0x15d)]({'stop':_0x5675b2(0x139)});else{if(_0xd01276[_0x5675b2(0x13d)]()[_0x5675b2(0x108)](_0x5675b2(0x16d)))logHistory(_0x5675b2(0x1b1),_0x251c7a+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(2)\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x5675b2(0x11f)),process['send']({'stop':_0x5675b2(0x139)});else _0xd01276['toString']()['includes'](_0x5675b2(0xe2))?logHistory(_0x5675b2(0x1b1),_0x251c7a+_0x5675b2(0x1bc)):(logHistory(_0x5675b2(0x1b1),_0x251c7a+_0x5675b2(0x1c8)),logging(_0x251c7a+_0x5675b2(0x170),_0xd01276),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x38f232,_0x5a6a52){const _0x387bb9=_0x113277;return parseFloat(_0x38f232[_0x387bb9(0x198)](_0x5a6a52));}function logging(_0x47e36a,_0x1bc274=''){const _0x31a0b1=_0x113277;console['log'](getTimeStamp()+_0x31a0b1(0x114)+botID+_0x31a0b1(0xff)+_0x47e36a,_0x1bc274);}function getServerTime(){const _0x57f16b=_0x113277,_0x16daee=new Date();return _0x16daee[_0x57f16b(0x175)]()+'/'+(_0x16daee[_0x57f16b(0x10a)]()+0x1)[_0x57f16b(0x13d)]()['padStart'](0x2,'0')+'/'+_0x16daee['getDate']()[_0x57f16b(0x13d)]()[_0x57f16b(0x11d)](0x2,'0')+'\x20'+_0x16daee['getHours']()[_0x57f16b(0x13d)]()[_0x57f16b(0x11d)](0x2,'0')+':'+_0x16daee[_0x57f16b(0x17e)]()[_0x57f16b(0x13d)]()[_0x57f16b(0x11d)](0x2,'0')+':'+_0x16daee['getSeconds']()[_0x57f16b(0x13d)]()[_0x57f16b(0x11d)](0x2,'0');}function _0x8009(_0x251b06,_0x410a7c){const _0x5a2345=_0x2cb9();return _0x8009=function(_0x3805f4,_0x3deddf){_0x3805f4=_0x3805f4-0xc7;let _0x2cb96e=_0x5a2345[_0x3805f4];return _0x2cb96e;},_0x8009(_0x251b06,_0x410a7c);}function getTimeStamp(){const _0x4c7dae=_0x113277,_0x163a28=shiftedTime();return _0x163a28[_0x4c7dae(0x175)]()+'/'+(_0x163a28['getMonth']()+0x1)[_0x4c7dae(0x13d)]()['padStart'](0x2,'0')+'/'+_0x163a28[_0x4c7dae(0x164)]()[_0x4c7dae(0x13d)]()[_0x4c7dae(0x11d)](0x2,'0')+'\x20'+_0x163a28['getHours']()[_0x4c7dae(0x13d)]()['padStart'](0x2,'0')+':'+_0x163a28[_0x4c7dae(0x17e)]()[_0x4c7dae(0x13d)]()[_0x4c7dae(0x11d)](0x2,'0')+':'+_0x163a28[_0x4c7dae(0x12a)]()[_0x4c7dae(0x13d)]()['padStart'](0x2,'0');}function getDate(){const _0x39f340=_0x113277,_0x22d76f=shiftedTime();return _0x22d76f[_0x39f340(0x175)]()+'/'+(_0x22d76f[_0x39f340(0x10a)]()+0x1)['toString']()[_0x39f340(0x11d)](0x2,'0')+'/'+_0x22d76f['getDate']()[_0x39f340(0x13d)]()[_0x39f340(0x11d)](0x2,'0');}function getHour(){const _0x21ff0c=_0x113277,_0x39a997=shiftedTime();return _0x39a997[_0x21ff0c(0x148)]()['toString']()[_0x21ff0c(0x11d)](0x2,'0');}function sleep(_0x4924f8){return new Promise(_0x11d008=>setTimeout(_0x11d008,_0x4924f8));}function shiftedTime(){const _0x4d8573=_0x113277,_0x3ff14a=new Date();let _0x200e54=_0x3ff14a;if(config&&config[_0x4d8573(0x130)]!==0x0)_0x200e54=fns[_0x4d8573(0x113)](_0x3ff14a,{'hours':config['timeshift']});return _0x200e54;}