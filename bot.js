const _0x478fd0=_0x4cc8;(function(_0x53e024,_0x46bf60){const _0x37d0a1=_0x4cc8,_0x1c7251=_0x53e024();while(!![]){try{const _0x2780db=-parseInt(_0x37d0a1(0x190))/0x1*(-parseInt(_0x37d0a1(0x197))/0x2)+-parseInt(_0x37d0a1(0x222))/0x3*(parseInt(_0x37d0a1(0x1ab))/0x4)+-parseInt(_0x37d0a1(0x322))/0x5*(parseInt(_0x37d0a1(0x23a))/0x6)+-parseInt(_0x37d0a1(0x33a))/0x7*(-parseInt(_0x37d0a1(0x2be))/0x8)+parseInt(_0x37d0a1(0x1e0))/0x9+-parseInt(_0x37d0a1(0x260))/0xa+parseInt(_0x37d0a1(0x1a4))/0xb*(parseInt(_0x37d0a1(0x22e))/0xc);if(_0x2780db===_0x46bf60)break;else _0x1c7251['push'](_0x1c7251['shift']());}catch(_0x1db713){_0x1c7251['push'](_0x1c7251['shift']());}}}(_0x37b4,0xea136));const _0x9b3e7a=function(){let _0x5672ae=!![];return function(_0x4af502,_0x171cde){const _0x33ae91=_0x5672ae?function(){const _0x58cc58=_0x4cc8;if(_0x171cde){const _0xc94561=_0x171cde[_0x58cc58(0x2eb)](_0x4af502,arguments);return _0x171cde=null,_0xc94561;}}:function(){};return _0x5672ae=![],_0x33ae91;};}(),_0x4362f4=_0x9b3e7a(this,function(){const _0x5a7fa2=_0x4cc8;return _0x4362f4[_0x5a7fa2(0x2ed)]()['search'](_0x5a7fa2(0x1a7))[_0x5a7fa2(0x2ed)]()[_0x5a7fa2(0x2b6)](_0x4362f4)['search'](_0x5a7fa2(0x1a7));});_0x4362f4();'use strict';const ccxt=require('ccxt'),low=require(_0x478fd0(0x315)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x478fd0(0x215)),forge=require(_0x478fd0(0x1d6)),util=require(_0x478fd0(0x2e2)),argv=require(_0x478fd0(0x25b))(process[_0x478fd0(0x32c)]['slice'](0x2))[_0x478fd0(0x32c)],path=require(_0x478fd0(0x250)),axios=require(_0x478fd0(0x1b4));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x478fd0(0x2f6),_0x478fd0(0x266),_0x478fd0(0x274),_0x478fd0(0x195),'USDC',_0x478fd0(0x32e)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x478fd0(0x28f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x478fd0(0x300)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x478fd0(0x1d5)+pauseBotInterval/0xea60+_0x478fd0(0x25f),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x7d0;let enableFiatToggle,prevAmountAtOrder={};const serverversion=require(_0x478fd0(0x27c))[_0x478fd0(0x1ac)],environment=require('./version.json')[_0x478fd0(0x2e3)]||'production',botID=process['argv'][0x2]||_0x478fd0(0x2ab),pattern=/^[0-9]{3}$/;!pattern[_0x478fd0(0x2e4)](botID)&&(console[_0x478fd0(0x332)](_0x478fd0(0x2c1)+botID+_0x478fd0(0x338)),killBot());const userID=process[_0x478fd0(0x32c)][0x3]||'',configpath=userID?_0x478fd0(0x26e)+userID+'/':_0x478fd0(0x26e),logspath=userID?'./logs/'+userID+'/':_0x478fd0(0x203),loggerfile=fs['createWriteStream'](logspath+_0x478fd0(0x18a),{'flags':'a'});!fs[_0x478fd0(0x319)](configpath)&&fs[_0x478fd0(0x1a0)](configpath);!fs[_0x478fd0(0x319)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x478fd0(0x269),logfile=configpath+_0x478fd0(0x297)+botID+_0x478fd0(0x347),performancefile=configpath+_0x478fd0(0x297)+botID+_0x478fd0(0x189),coinresultsfile=configpath+_0x478fd0(0x297)+botID+_0x478fd0(0x1f9),settingsfile=configpath+_0x478fd0(0x31c),securefile=configpath+_0x478fd0(0x2c3),configbackuppath=configpath+_0x478fd0(0x258),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x478fd0(0x2f2)]({'logs':[],'version':serverversion})[_0x478fd0(0x21c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x478fd0(0x2f2)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x37b4(){const _0x47e819=['\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','mkdirSync','valid','max','Failed\x20to\x20load\x20coin\x20data\x20for\x20','22bYjBzB','logs','<b>Bot\x20','(((.+)+)+)+$','must\x20be\x20greater\x20than\x20minimum\x20amount','initial','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','832vflqPe','version','InsufficientFunds','/USDT','\x20API\x20key\x20is\x20invalid','Initializing\x20exchange','trade','fetchOpenOrders','Market','axios','ordertype','watchTrades','datetime','orderId','/USD','headless','added','Exchange','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','basecoinvalue','configuration','status','breakeven','\x20MB','format','toUpperCase','startnumber','event-history','substring','no\x20exchange\x20reloaded','quote','sort','AuthenticationError','Error\x20while\x20deleting\x20files:\x20','sendMetricsTelegram','pro','\x20metrics:</b>\x20\x0a\x0a','Order\x20amount\x20is\x20invalid:\x20','sells','push','botID','limit','\x20>\x20pausing\x20bot\x20for\x20','node-forge','secure','kill','restart','Avoiding\x20continuous\x20order\x20attempts','buys','changes','full','password',')\x20|\x20exchange:\x20','3726810NsQLwP','time','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','pki','API-key\x20format\x20invalid','\x20|\x20','PermissionDenied','PAXG','request-time','Net\x20effect','detectLiquidityChange()','<pre>','getFullYear','sha256','showConfig','get','Executed\x20','</pre>','total','process\x20','balancing\x20resumed','Fee\x20discount\x20refund\x20detected:\x20','round','timeshift','Limit\x20(low-margin)','-results.json','isEqual','getMonth','Exception\x20thrown\x20in\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','order','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','yyyy/MM/dd','debug','initTickers()','./logs/','stringify','privateKey','unlinkSync','includes','remainingSymbols','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','starting-balance-','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','marketcapApi','cancelOrders()','error','forEach','************','fetchTicker','2\x20-\x20handling\x20FILLED\x20order:\x20','InvalidOrder','net-basecoin','date-fns','createOrder','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','loadMarkets','delta','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','ETH','write','startprice','openOrders','portfolio1','ExchangeError','Network\x20error\x20details:','4305wElQdS','find','Initializing\x20coin\x20results','getCoins()','Invalid\x20trigger:\x20','closed','toggleBotMode','writeFile','Waited\x20','fiat','\x20has\x20a\x2024h\x20drop\x20of\x20','switch-manual','2646708zDpUvh','bot','emojisell','Invalid\x20symbol:\x20','success','getCoinNumber()','eur','target','fetchTickers','2.3.5','\x20>\x20[DEBUG]\x20','getHours','480tAtWhI','apiSecret','timeout','event','token\x20is\x20expired','active','2.5.0','Valid\x20trigger:\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','Bybit','padStart','send','BTC','value','\x20-\x20bot\x20not\x20started','NetworkError','staging','Error\x20in\x20testAPI():\x20','BNB','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20value','Cryptocom','path','apiPassword','balances','sendPortfolioTelegram','storeHeadless','red_yellow_blue','filled','exchange','/backup/','No\x20more\x20open\x20orders\x20-\x20','excluded','yargs/yargs','Insufficient\x20funds\x20to\x20execute\x20order:\x20','spot','amount','\x20minutes','3390370UWyCXs','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20order:\x20','Huobi','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','BUSD','initclient','random','-config.json','percentage','cost','differenceInSeconds','\x20uses\x20','./config/','\x20portfolio:</b>\x20\x0a\x0a','2.6.22','indexOf','final','number','TUSD','Invalid\x20quantity','DDoSProtection','data','status\x20code\x20401','sqrt','\x20attempts','toLowerCase','./version.json','market','EUR','Order\x20filled:\x20','recent20','resetHistory','toFixed','running','getTime','Saving\x20configuration','replace','BNB/','exec','deleteHistoryAlerts','Initiating\x20bot\x20restart','\x20network\x20error:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','currency','0\x20-\x20EXECUTION:\x20','freeze','1\x20-\x20Unlock\x20orders','args','Bot\x20','heapUsed','symbol','getSeconds','last','bot-','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','portfolio2','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Exchange\x20error\x20details:','change','bid','\x20-\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','reverse','fetchBalance','Unknown\x20error\x20-\x20check\x20logs','cancelOrder','OnMaintenance','performance','2\x20-\x20Orders\x20unlocked','none','%\x20(','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','001','Headless:\x20','liquidity','\x20|\x20Custom\x20ID:\x20','1\x20-\x20Validate\x20orders:\x20','leftTxt','realized','\x20>\x20','fee','storeFiat','watchTrades()','constructor','limits','limit-low','decrypt','emitHistory','net-fiat','emojibuy','market_cap','8FldnOV','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','ask','Error:\x20Invalid\x20argument\x20','startsWith','bb-secure.json','getDate','sell','sortBy','onepagemode','price','ORDERS.UNLOCKING','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ExchangeNotAvailable','length','cloneDeep','filter','page','parse','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','getMinutes','exchange\x20reload','progress','\x20|\x20lock\x20orders:\x20','map','recreate','join','\x20>\x20details:','1\x20-\x20FILLED\x20known\x20order:\x20','starting-balances','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Pausing\x20for\x20','slice','Reset\x20|\x20','usd','colorscheme','util','environment','test','date','marketcapsqrt','Symbol(s):\x20','\x20exchange\x20error:\x20','buy','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','apply','2.6.23','toString','assign','apiKey','.json','complete','defaults','***','set','recreateCoinResults()','USD','loading-canceled','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','cancelLoading','threshold','placeOrder()','LOCKED','basecoin','portfolio','slider','UNLOCKED','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','side','create','startdate','ongoing','Order(s)\x20not\x20validated\x20after\x20','-------------------------------\x0a','type','timestamp','change24h','canceled','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','function','update-liquidity','bots','marketcapEnabled','showname','fetchTickers()',':\x20timer\x20>','removed','lowdb','RETRY\x20-\x20Error\x20in\x20','min','abs','existsSync','cancel','memoryUsage','bb-settings.json','exchanges','Binance','\x20exchange','add','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','29375aaJLXk','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','InvalidNonce','configuration-stored','open','watchTradesForSymbols()','RateLimitExceeded','distribution','string','remove','argv','\x20API\x20secret\x20is\x20invalid','USDP','Error\x20details:','offset','code','log','decode64','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','autoliquidity','\x20:\x20','rightTxt',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20minutes\x20-\x20','8244313AnvdkN','has','marketcap','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20is\x20invalid:\x20','orderstatus','warning','watchTradesForSymbols','split','entries','Cooldown\x20ended\x20-\x20balancing\x20resumed','placeOrder','splice','-events.json','getOpenOrders()','coin','balancing\x20resumes\x20when\x20cooldown\x20ends','storeConfiguration','padEnd','customId','-performance.json','/output-000.log','botname','no\x20open\x20orders','Loading\x20completed','highest','RSA-OAEP','3OWjQxL','Portfolio\x20change\x20detected:\x20','findIndex','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','<b>','USDT','\x20hour','22216eaDEDZ','Resetting\x20coin\x20results:\x20','cooldown','Loading\x20symbols','Manual\x20balancing\x20required','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Error\x20details\x20(1):','coins'];_0x37b4=function(){return _0x47e819;};return _0x37b4();}dbConfig['defaults']({'bot':[],'version':serverversion})[_0x478fd0(0x21c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x478fd0(0x2f2)]({'coins':[],'version':serverversion})[_0x478fd0(0x21c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x30155d=>{const _0x5bbcdb=_0x478fd0;console[_0x5bbcdb(0x332)](_0x30155d);},'simple':_0x4caa42=>{const _0x1fa89e=_0x478fd0;console[_0x1fa89e(0x332)](_0x4caa42),loggerfile[_0x1fa89e(0x21c)](util[_0x1fa89e(0x1c3)](_0x4caa42)+'\x0a');},'full':async(_0x5a54d5,_0x1f834c='')=>{const _0x115340=_0x478fd0;let _0x4578fb;if(config[_0x115340(0x311)])_0x4578fb=getTimeStamp()+':\x20'+config[_0x115340(0x18b)]+_0x115340(0x2b2)+_0x5a54d5;else _0x4578fb=getTimeStamp()+':\x20Bot\x20'+botID+_0x115340(0x2b2)+_0x5a54d5;console['log'](_0x4578fb),loggerfile[_0x115340(0x21c)](util[_0x115340(0x1c3)](_0x4578fb)+'\x0a'),_0x1f834c&&(console[_0x115340(0x332)](_0x1f834c),loggerfile[_0x115340(0x21c)](util['format'](_0x1f834c)+'\x0a'));},'debug':async(_0x285203,_0x31cb54='')=>{const _0x2ba96a=_0x478fd0;let _0x4a5949;if(config['showname'])_0x4a5949=getTimeStamp()+':\x20'+config[_0x2ba96a(0x18b)]+_0x2ba96a(0x238)+_0x285203;else _0x4a5949=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x285203;if(debugging)console['log'](_0x4a5949);loggerfile['write'](util['format'](_0x4a5949)+'\x0a');if(_0x31cb54){if(debugging)console['log'](_0x31cb54);loggerfile[_0x2ba96a(0x21c)](util[_0x2ba96a(0x1c3)](_0x31cb54)+'\x0a');}}};process['on']('uncaughtException',function(_0x593f01){handleError(_0x593f01,'uncaughtException');});settings['timeshift']!=config[_0x478fd0(0x1f7)]&&updateTimeshift(settings[_0x478fd0(0x1f7)]);settings[_0x478fd0(0x2c7)]!=config[_0x478fd0(0x2c7)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x478fd0(0x20c)]&&!config['marketcapApi']||!settings[_0x478fd0(0x20c)]&&config[_0x478fd0(0x20c)])&&updateMarketcapApi(settings[_0x478fd0(0x20c)]);process[_0x478fd0(0x245)]({'started':'running'},_0x2827ae=>{}),initializeProcessListeners();function proxyEmit(_0x1f8f56,_0x32ba6a=null){const _0x4fbd1c=_0x478fd0;process[_0x4fbd1c(0x245)]({'function':_0x1f8f56,'args':_0x32ba6a},_0x53bfa2=>{});}function initializeProcessListeners(){process['on']('message',_0x193493=>{const _0x64fd93=_0x4cc8;switch(Object['keys'](_0x193493)[0x0]){case _0x64fd93(0x1f7):_0x193493[_0x64fd93(0x1f7)]!=undefined&&(settings[_0x64fd93(0x1f7)]=_0x193493[_0x64fd93(0x1f7)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x193493[_0x64fd93(0x2c7)]!=undefined&&(settings[_0x64fd93(0x2c7)]=_0x193493[_0x64fd93(0x2c7)],updateOnepagemode(settings['onepagemode']));break;case _0x64fd93(0x20c):_0x193493['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x193493[_0x64fd93(0x20c)],updateMarketcapApi(settings['marketcapApi']));break;case _0x64fd93(0x30f):_0x193493[_0x64fd93(0x30f)]!=undefined&&(bots=JSON[_0x64fd93(0x2d0)](_0x193493[_0x64fd93(0x30f)]),proxyEmit('bots',bots));break;case _0x64fd93(0x30d):switch(_0x193493['function']){case _0x64fd93(0x267):initclient();break;case _0x64fd93(0x228):toggleBotMode();break;case _0x64fd93(0x2ba):emitHistory(_0x193493['args']);break;case _0x64fd93(0x289):deleteHistoryAlerts(_0x193493[_0x64fd93(0x291)]);break;case'getPortfolio':getPortfolio(_0x193493['args']);break;case _0x64fd93(0x34b):storeConfiguration(_0x193493[_0x64fd93(0x291)]);break;case _0x64fd93(0x254):storeHeadless(_0x193493[_0x64fd93(0x291)]);break;case _0x64fd93(0x2b4):storeFiat(_0x193493[_0x64fd93(0x291)]);break;case _0x64fd93(0x281):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x64fd93(0x345):placeOrder(_0x193493[_0x64fd93(0x291)]);break;case _0x64fd93(0x2f9):cancelLoading();break;case _0x64fd93(0x1ee):showConfig();break;case _0x64fd93(0x1cd):sendMetricsTelegram();break;case _0x64fd93(0x253):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x53279b=![]){const _0x2d5cea=_0x478fd0;logger[_0x2d5cea(0x201)](_0x2d5cea(0x2df)+(_0x53279b?_0x2d5cea(0x2d3):_0x2d5cea(0x1c8))+'\x20|\x20exchange:\x20'+config[_0x2d5cea(0x257)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x53279b)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!='***'){loadingProgress=0x0;_0x53279b&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x2d5cea(0x1bf),emittedConfiguration()),initialPerformanceStored=![]);const _0x2c8aa3=await getCoins();[currentCoins,currentCoinsAll]=_0x2c8aa3,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x2d5cea(0x201)](_0x2d5cea(0x18d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2d5cea(0x2cc)]==0x0&&allOpenOrders[_0x2d5cea(0x2cc)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3123b7=![]){const _0x10d4af=_0x478fd0;logger[_0x10d4af(0x201)]('Resuming\x20('+(_0x3123b7?'quick':_0x10d4af(0x2f1))+_0x10d4af(0x1df)+config[_0x10d4af(0x257)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3123b7){getBalances();return;}coinsLoaded=![];if(config[_0x10d4af(0x2ef)]!=''&&config['apiKey']!=_0x10d4af(0x2f3)){loadingProgress=0x1;const _0x28034d=await getCoins();[currentCoins,currentCoinsAll]=_0x28034d,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x10d4af(0x18d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x10d4af(0x2cc)]==0x0&&allOpenOrders[_0x10d4af(0x2cc)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x487ead){const _0x594def=_0x478fd0;let _0x810aaa=![];if(_0x487ead)_0x810aaa=!![];let _0x382135;_0x810aaa?_0x382135=_0x487ead[_0x594def(0x2d6)](_0x5ade56=>_0x5ade56[_0x594def(0x349)]):_0x382135=currentCoinsAll[_0x594def(0x2d6)](_0x7899c3=>_0x7899c3[_0x594def(0x349)]);if(!config[_0x594def(0x20c)]||!_0x810aaa&&!config[_0x594def(0x310)]||_0x382135[_0x594def(0x2cc)]==0x0)return;let _0x327cfb=null;try{_0x327cfb=await axios[_0x594def(0x1ef)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x382135[_0x594def(0x2ed)]()}});}catch(_0x440d47){_0x327cfb=null,_0x440d47['toString']()[_0x594def(0x207)](_0x594def(0x278))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x594def(0x1bf),emittedConfiguration()),logHistory(_0x594def(0x20e),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x594def(0x20e),_0x594def(0x1aa)+schedulerInterval/(0x3c*0x3e8)+_0x594def(0x25f)),logger[_0x594def(0x201)](_0x594def(0x32f),_0x440d47[_0x594def(0x2ed)]()+_0x594def(0x29f)+_0x440d47[_0x594def(0x331)]));}if(_0x327cfb){let _0x1162f2=0x0;const _0x348744=_0x327cfb[_0x594def(0x277)];_0x382135[_0x594def(0x20f)](_0x1f444d=>{const _0x388ec2=_0x594def;if(_0x348744[_0x388ec2(0x277)][_0x1f444d][0x0])_0x1162f2+=_0x348744[_0x388ec2(0x277)][_0x1f444d][0x0][_0x388ec2(0x1c9)]['USD'][_0x388ec2(0x2bd)];}),_0x382135['forEach'](_0x3f1e68=>{const _0x57dd33=_0x594def,_0x818936=_0x348744['data'][_0x3f1e68][0x0]?_0x348744[_0x57dd33(0x277)][_0x3f1e68][0x0]['quote'][_0x57dd33(0x2f6)]['market_cap']:0x0;if(_0x810aaa){const _0x445f9b=_0x487ead[_0x57dd33(0x223)](_0x427f98=>_0x427f98[_0x57dd33(0x349)]==_0x3f1e68);_0x445f9b&&(_0x445f9b[_0x57dd33(0x33c)]=_0x818936);}else{const _0xa8081d=currentCoins[_0x57dd33(0x223)](_0x3ffc00=>_0x3ffc00['coin']==_0x3f1e68);_0xa8081d&&(_0xa8081d[_0x57dd33(0x33c)]=_0x818936);const _0xeca042=currentCoinsAll['find'](_0x32ed16=>_0x32ed16['coin']==_0x3f1e68);_0xeca042&&(_0xeca042[_0x57dd33(0x33c)]=_0x818936);}}),!_0x810aaa&&updateTargetDistribution();}}function updateTargetDistribution(){const _0xd5bc30=_0x478fd0,_0x3cd148=0x2;let _0x2bbcd4=0x0,_0x3b2702=0x0,_0x17a999=0x0,_0x3311c1=0x0,_0x18b3f7=0x0;config[_0xd5bc30(0x2fe)][_0xd5bc30(0x20f)](_0x3807d3=>{const _0x54e320=_0xd5bc30;if(!_0x3807d3[_0x54e320(0x25a)]){_0x17a999++,_0x2bbcd4+=_0x3807d3[_0x54e320(0x2ff)];if(_0x3807d3['slider']===-0x1){_0x2bbcd4++;const _0x1c2bae=currentCoinsAll['find'](_0xabea42=>_0xabea42[_0x54e320(0x349)]==_0x3807d3[_0x54e320(0x349)]);_0x1c2bae&&(_0x3311c1+=_0x1c2bae[_0x54e320(0x33c)],_0x18b3f7+=Math[_0x54e320(0x279)](_0x1c2bae[_0x54e320(0x33c)]));}if(_0x3807d3[_0x54e320(0x2ff)]!==-0x1)_0x3b2702++;}});let _0x1b7ae0;const _0x2aab76=0x64-_0x2bbcd4,_0x921a8e=_0x17a999-_0x3b2702;_0x1b7ae0=_0x921a8e===0x0?_0x2bbcd4:Math[_0xd5bc30(0x1a2)](0x64,_0x2bbcd4),config[_0xd5bc30(0x2fe)][_0xd5bc30(0x20f)](_0x4faad4=>{const _0x31b7b1=_0xd5bc30,_0x33b575=currentCoinsAll[_0x31b7b1(0x223)](_0x434161=>_0x434161[_0x31b7b1(0x349)]==_0x4faad4['coin']);_0x33b575&&(_0x4faad4['marketcap']=_0x33b575[_0x31b7b1(0x33c)]);if(!_0x4faad4['excluded']){if(_0x1b7ae0<=0x64){if(_0x4faad4[_0x31b7b1(0x2ff)]===-0x1){if(_0x3311c1!==0x0&&config[_0x31b7b1(0x310)]){if(_0x33b575){if(config[_0x31b7b1(0x310)]==_0x31b7b1(0x33c))_0x4faad4['distribution']=(_0x2aab76/(_0x3311c1/_0x33b575['marketcap']))[_0x31b7b1(0x282)](_0x3cd148);else config[_0x31b7b1(0x310)]==_0x31b7b1(0x2e6)&&(_0x4faad4[_0x31b7b1(0x329)]=(_0x2aab76/(_0x18b3f7/Math[_0x31b7b1(0x279)](_0x33b575[_0x31b7b1(0x33c)])))['toFixed'](_0x3cd148));}}}}}}),updateConfig();}function updateConfig(){const _0x26d463=_0x478fd0;let _0x3b0c88=dbConfig[_0x26d463(0x1ef)](_0x26d463(0x22f))['find']({'botID':botID})['value']();_0x3b0c88&&dbConfig[_0x26d463(0x1ef)](_0x26d463(0x22f))[_0x26d463(0x223)]({'botID':botID})[_0x26d463(0x2ee)](config)[_0x26d463(0x21c)]();}function logMemory(){const _0x2626f0=_0x478fd0;if(environment!=_0x2626f0(0x24a))return;const _0x4341ce=process[_0x2626f0(0x31b)]()[_0x2626f0(0x293)]/0x400/0x400;logger['debug'](_0x2626f0(0x1f3)+process['pid']+_0x2626f0(0x26d)+formatResult(_0x4341ce,0x1)+_0x2626f0(0x1c2));}async function startScheduler(){const _0x2623ab=_0x478fd0,_0x4b0611=shiftedTime()[_0x2623ab(0x239)]();getMarketCap(),_0x4b0611==0x1&&logMemory(),(_0x4b0611==0x2||_0x4b0611==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5f2af0=![]){const _0x1172bc=_0x478fd0;logger[_0x1172bc(0x201)](_0x1172bc(0x28a));if(!_0x5f2af0)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x1172bc(0x245)]({'stop':_0x1172bc(0x1d9)},_0x2934e2=>{});}async function initExchange(_0xd9568=config[_0x478fd0(0x257)],_0xf569c0=config[_0x478fd0(0x2ef)],_0x4445bb=config[_0x478fd0(0x23b)],_0x2fd69c=config['apiPassword']){const _0xa7173a=_0x478fd0;if(exchange){logger[_0xa7173a(0x201)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0xa7173a(0x201)](_0xa7173a(0x1b0));!supportedExchanges()[_0xa7173a(0x207)](_0xd9568)&&(logHistory(_0xa7173a(0x20e),_0xa7173a(0x20b)+_0xd9568+_0xa7173a(0x31f)),killBot());const _0x1d039c=ccxt[_0xa7173a(0x1ce)][_0xd9568[_0xa7173a(0x27b)]()];exchange=new _0x1d039c({'apiKey':_0xf569c0,'secret':_0x4445bb,'options':{'defaultType':_0xa7173a(0x25d)}});if(_0x2fd69c)exchange[_0xa7173a(0x1de)]=_0x2fd69c;}function updateExchange(_0x5c1110,_0x2ab9fa,_0x173189=null){const _0x4afedf=_0x478fd0;exchange[_0x4afedf(0x2ef)]=_0x5c1110,exchange[_0x4afedf(0x23b)]=_0x2ab9fa,exchange[_0x4afedf(0x251)]=_0x173189,logger[_0x4afedf(0x201)](_0x4afedf(0x1e2));}function setStableCoins(){const _0x2e523e=_0x478fd0;let _0x2ef2dc=config['basecoin']==_0x2e523e(0x21b)?'ETH':config[_0x2e523e(0x2fd)]=='PAXG'?'PAXG':_0x2e523e(0x246),_0x39faa7=allSymbols[_0x2e523e(0x207)](_0x2ef2dc+_0x2e523e(0x1b9))?'USD':allSymbols['includes'](_0x2ef2dc+_0x2e523e(0x1ae))?_0x2e523e(0x195):_0x2e523e(0x27e),_0x5183a2=allSymbols[_0x2e523e(0x207)](_0x2ef2dc+'/EUR')?_0x2e523e(0x27e):_0x39faa7;enableFiatToggle=!![],_0x39faa7==_0x2e523e(0x27e)&&(enableFiatToggle=![],storeFiat(_0x2e523e(0x27e))),_0x5183a2!=_0x2e523e(0x27e)&&(enableFiatToggle=![],storeFiat(_0x2e523e(0x2f6))),stablecoins={'eur':{'coin':''+_0x2ef2dc+_0x5183a2,'symbol':_0x2ef2dc+'/'+_0x5183a2},'usd':{'coin':''+_0x2ef2dc+_0x39faa7,'symbol':_0x2ef2dc+'/'+_0x39faa7}};}async function initwsCcxt(){const _0x3ea502=_0x478fd0;initCycle++;const _0x5b5153=initCycle;let _0x50762e=[];config[_0x3ea502(0x2fe)][_0x3ea502(0x20f)](_0x45cab5=>{const _0x47d958=_0x3ea502;if(!_0x45cab5[_0x47d958(0x25a)]&&_0x45cab5[_0x47d958(0x349)]!=config[_0x47d958(0x2fd)])_0x50762e[_0x47d958(0x1d2)](_0x45cab5['symbol']);});if(!_0x50762e[_0x3ea502(0x207)](stablecoins[_0x3ea502(0x234)]['symbol']))_0x50762e[_0x3ea502(0x1d2)](stablecoins['eur'][_0x3ea502(0x294)]);if(!_0x50762e[_0x3ea502(0x207)](stablecoins[_0x3ea502(0x2e0)][_0x3ea502(0x294)]))_0x50762e[_0x3ea502(0x1d2)](stablecoins[_0x3ea502(0x2e0)][_0x3ea502(0x294)]);if(config[_0x3ea502(0x257)][_0x3ea502(0x2c2)](_0x3ea502(0x31e))&&config[_0x3ea502(0x2fd)]!=_0x3ea502(0x1e7)){if(!_0x50762e[_0x3ea502(0x207)]('BNB/'+config[_0x3ea502(0x2fd)]))_0x50762e['push'](_0x3ea502(0x287)+config[_0x3ea502(0x2fd)]);}loadCoins(_0x50762e),_0x50762e=validateSymbols(_0x50762e);const _0x3668d1=async _0x543283=>{const _0x354ab6=_0x3ea502;let _0x5d8298;try{const _0x109ac8=await getTickers(_0x543283);Object[_0x354ab6(0x343)](_0x109ac8)[_0x354ab6(0x20f)](_0x27d170=>{const _0xf63bf0=_0x354ab6;_0x5d8298=_0x27d170[0x1][_0xf63bf0(0x294)],gTicker[noslash(_0x5d8298)]=_0x27d170[0x1][_0xf63bf0(0x296)],gChange[_0x5d8298]=_0x27d170[0x1][_0xf63bf0(0x26a)];});}catch(_0x5d9abc){await handleError(_0x5d9abc,_0x354ab6(0x202),_0x5d8298);}},_0x5e07cd=async _0x3fb6ff=>{const _0x3681f1=_0x3ea502;while(initCycle==_0x5b5153){if(!botPaused)try{const _0x2a4563=await exchange['watchTrades'](_0x3fb6ff);gTicker[noslash(_0x2a4563[0x0][_0x3681f1(0x294)])]=_0x2a4563[0x0]['price'];}catch(_0x3b45c7){if(!exchangeStopped)await handleError(_0x3b45c7,_0x3681f1(0x2b5),_0x3fb6ff);}else await sleep(0x64);}},_0x29c926=async _0x48224d=>{const _0x44413f=_0x3ea502;while(initCycle==_0x5b5153){if(!botPaused)try{const _0x234359=await exchange['watchTradesForSymbols'](_0x48224d),_0x3239f9=_0x234359['pop']();gTicker[noslash(_0x3239f9['symbol'])]=_0x3239f9[_0x44413f(0x2c8)];}catch(_0x4971b4){if(!exchangeStopped)await handleError(_0x4971b4,_0x44413f(0x327),_0x48224d[_0x44413f(0x2ed)]());}else await sleep(0x64);}},_0x43a833=async _0xbba243=>{const _0x100c0f=_0x3ea502;while(initCycle==_0x5b5153){if(!botPaused){let _0x3937fe;try{await sleep(0x3c*0x3e8);const _0x780302=await getTickers(_0xbba243);Object['entries'](_0x780302)[_0x100c0f(0x20f)](_0x22302f=>{const _0xfb36c4=_0x100c0f;_0x3937fe=_0x22302f[0x1][_0xfb36c4(0x294)],gChange[_0x3937fe]=_0x22302f[0x1][_0xfb36c4(0x26a)];});}catch(_0x197132){if(!exchangeStopped)await handleError(_0x197132,_0x100c0f(0x312),_0x3937fe);}}else await sleep(0x64);}},_0x121bea=async _0x531cf6=>{while(initCycle==_0x5b5153){if(!botPaused)try{const _0x662547=await exchange['watchOrders'](_0x531cf6);initCycle==_0x5b5153&&_0x662547['forEach'](_0x5f2153=>{updateNumberCoinsCcxt(_0x5f2153);});}catch(_0xaacd1f){if(!exchangeStopped)await handleError(_0xaacd1f,'watchOrders()');}else await sleep(0x64);}};_0x3668d1(_0x50762e),_0x43a833(_0x50762e),exchange[_0x3ea502(0x33b)][_0x3ea502(0x341)]&&!(config[_0x3ea502(0x257)]==_0x3ea502(0x243)&&_0x50762e[_0x3ea502(0x2cc)]>0xa)?_0x29c926(_0x50762e):_0x50762e[_0x3ea502(0x20f)](_0x48007b=>{_0x5e07cd(_0x48007b);}),_0x50762e[_0x3ea502(0x20f)](_0x1c4be2=>{_0x121bea(_0x1c4be2);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x3e62ee){const _0x1fcb96=_0x478fd0;let _0x28aa83={};try{if(config[_0x1fcb96(0x257)]!=_0x1fcb96(0x24f))_0x28aa83=await exchange[_0x1fcb96(0x236)](_0x3e62ee);else for(const _0x39fdb5 of _0x3e62ee){const _0x1e7a12=await exchange[_0x1fcb96(0x211)](_0x39fdb5);_0x28aa83[_0x39fdb5]=_0x1e7a12;}return _0x28aa83;}catch(_0x1b39a9){throw _0x1b39a9;}}function setBlockTransactionDetection(_0x12541f){blockTransactionDetection=_0x12541f,logger['debug']('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x2c5d7f=0x0){const _0x1fb2be=_0x478fd0;transactionDetectionOngoing=!![];try{const _0x1ac37a=await getCoins(_0x2c5d7f),[_0x38d3ed,_0x3a4189]=_0x1ac37a;let _0x54b263=[];currentCoins[_0x1fb2be(0x20f)](_0x2a27e8=>{const _0x53ae76=_0x1fb2be,_0xa232a0=_0x38d3ed[_0x53ae76(0x223)](_0x15af82=>_0x15af82[_0x53ae76(0x349)]==_0x2a27e8[_0x53ae76(0x349)]);if(_0xa232a0){if(_0x2a27e8[_0x53ae76(0x273)]!=_0xa232a0[_0x53ae76(0x273)]){let _0x1022b2;if(_0x2a27e8[_0x53ae76(0x349)]!=config['basecoin']){const _0x30c31f=gTicker[noslash(_0x2a27e8[_0x53ae76(0x294)])];_0x1022b2=_0x2a27e8[_0x53ae76(0x2a1)]?0x1/_0x30c31f:_0x30c31f;}else _0x1022b2=0x1;_0x54b263[_0x53ae76(0x1d2)]({'coin':_0x2a27e8['coin'],'symbol':_0x2a27e8['symbol'],'price':_0x1022b2,'number':Number(formatResult(_0xa232a0[_0x53ae76(0x273)]-_0x2a27e8[_0x53ae76(0x273)],0x8)),'basecoinvalue':_0x1022b2*(_0xa232a0[_0x53ae76(0x273)]-_0x2a27e8[_0x53ae76(0x273)])});}}});if(_0x54b263[_0x1fb2be(0x2cc)]>0x0&&!blockTransactionDetection)for(const _0xb62dde of _0x54b263){if(config[_0x1fb2be(0x335)]){logger[_0x1fb2be(0x201)](_0x1fb2be(0x19c)+_0xb62dde[_0x1fb2be(0x1be)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x1fb2be(0x18e)]);if(lastFees[_0x1fb2be(0x18e)]==0x0||Math[_0x1fb2be(0x318)](_0xb62dde['basecoinvalue'])>lastFees[_0x1fb2be(0x18e)]*0x3){if(config[_0x1fb2be(0x335)]=='update-liquidity'){delete _0xb62dde[_0x1fb2be(0x294)],delete _0xb62dde['basecoinvalue'];let _0x1841b6=[],_0xdd70f8=[...config[_0x1fb2be(0x2ad)]]||[],_0x388598=config[_0x1fb2be(0x2ad)];_0xdd70f8[_0x1fb2be(0x1ca)]((_0x5bb30b,_0x4250c7)=>_0x5bb30b[_0x1fb2be(0x2e5)]>_0x4250c7[_0x1fb2be(0x2e5)]?-0x1:_0x4250c7[_0x1fb2be(0x2e5)]>_0x5bb30b[_0x1fb2be(0x2e5)]?0x1:0x0);const _0x3696af=getDate();if(_0xdd70f8[0x0]){const _0x2ebf5c=fns['parse'](_0xdd70f8[0x0][_0x1fb2be(0x2e5)],_0x1fb2be(0x200),new Date()),_0x593a6e=fns[_0x1fb2be(0x2d0)](_0x3696af,_0x1fb2be(0x200),new Date());if(fns[_0x1fb2be(0x1fa)](_0x2ebf5c,_0x593a6e)){_0x1841b6=_0xdd70f8[0x0][_0x1fb2be(0x1dc)];const _0x28acce=_0x1841b6[_0x1fb2be(0x223)](_0x2b21bf=>_0x2b21bf['coin']==_0xb62dde[_0x1fb2be(0x349)]);_0x28acce?(_0x28acce[_0x1fb2be(0x273)]+=_0xb62dde[_0x1fb2be(0x273)],_0x28acce['number']==0x0&&(_0x1841b6=_0x1841b6['filter'](_0x3390a6=>{const _0x4fdf68=_0x1fb2be;return _0x3390a6[_0x4fdf68(0x349)]!=_0xb62dde[_0x4fdf68(0x349)];}))):_0x1841b6['push'](_0xb62dde);const _0x41f870=_0x388598[_0x1fb2be(0x223)](_0x15bb4c=>_0x15bb4c[_0x1fb2be(0x2e5)]==_0x3696af);_0x41f870[_0x1fb2be(0x1dc)]=_0x1841b6;}else _0x388598[_0x1fb2be(0x1d2)]({'date':_0x3696af,'changes':[_0xb62dde]});}const _0x1857d9=_0x388598[_0x1fb2be(0x223)](_0x49600d=>_0x49600d[_0x1fb2be(0x2e5)]==_0x3696af);if(_0x1857d9){let _0x24c804=!![];_0x1857d9[_0x1fb2be(0x1dc)][_0x1fb2be(0x20f)](_0x5952eb=>{const _0x146c1e=_0x1fb2be;if(_0x5952eb[_0x146c1e(0x273)]!=0x0)_0x24c804=![];}),_0x24c804&&(_0x388598=_0x388598[_0x1fb2be(0x2ce)](_0x2235ce=>{return _0x2235ce['date']!=_0x3696af;}));}let _0x5b8fd5=dbConfig['get'](_0x1fb2be(0x22f))[_0x1fb2be(0x223)]({'botID':botID})[_0x1fb2be(0x247)]();_0x5b8fd5&&(dbConfig['get'](_0x1fb2be(0x22f))[_0x1fb2be(0x223)]({'botID':botID})['assign']({'liquidity':_0x388598})[_0x1fb2be(0x21c)](),config['liquidity']=_0x388598);logHistory(_0x1fb2be(0x232),'Portfolio\x20change\x20detected:\x20'+Math[_0x1fb2be(0x318)](_0xb62dde[_0x1fb2be(0x273)])+'\x20'+_0xb62dde[_0x1fb2be(0x349)]+'\x20'+(_0xb62dde['number']>0x0?'added':_0x1fb2be(0x314))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());const _0x212a04=getNormalizedPerformance();emitPerformance(_0x212a04),getStartingBalances(_0x212a04),logger[_0x1fb2be(0x201)](_0x1fb2be(0x2dc));}else config[_0x1fb2be(0x335)]==_0x1fb2be(0x22d)&&(config[_0x1fb2be(0x1ba)]?(await storeHeadless({'headless':![]}),logHistory(_0x1fb2be(0x232),_0x1fb2be(0x191)+Math['abs'](_0xb62dde[_0x1fb2be(0x273)])+'\x20'+_0xb62dde[_0x1fb2be(0x349)]+'\x20'+(_0xb62dde[_0x1fb2be(0x273)]>0x0?_0x1fb2be(0x1bb):'removed')+_0x1fb2be(0x24d))):logger['debug'](_0x1fb2be(0x191)+Math[_0x1fb2be(0x318)](_0xb62dde['number'])+'\x20'+_0xb62dde[_0x1fb2be(0x349)]+'\x20'+(_0xb62dde[_0x1fb2be(0x273)]>0x0?'added':'removed')+_0x1fb2be(0x2f8)));}else logger[_0x1fb2be(0x201)](_0x1fb2be(0x1f5)+Math[_0x1fb2be(0x318)](_0xb62dde[_0x1fb2be(0x273)])+'\x20'+_0xb62dde[_0x1fb2be(0x349)]+'\x20'+(_0xb62dde[_0x1fb2be(0x273)]>0x0?_0x1fb2be(0x1bb):_0x1fb2be(0x314)));}else logger[_0x1fb2be(0x201)](_0x1fb2be(0x191)+Math[_0x1fb2be(0x318)](_0xb62dde[_0x1fb2be(0x273)])+'\x20'+_0xb62dde[_0x1fb2be(0x349)]+'\x20'+(_0xb62dde[_0x1fb2be(0x273)]>0x0?_0x1fb2be(0x1bb):_0x1fb2be(0x314))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x38d3ed,currentCoinsAll=_0x3a4189;}catch(_0x3fd2aa){if(!exchangeStopped)await handleError(_0x3fd2aa,_0x1fb2be(0x1ea));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x3f76c3=_0x478fd0;logger[_0x3f76c3(0x201)](_0x3f76c3(0x19a));try{markets=await exchange[_0x3f76c3(0x218)]();}catch(_0xaaa154){logger[_0x3f76c3(0x201)]('Error\x20in\x20loadSymbols():\x20'+_0xaaa154[_0x3f76c3(0x2ed)]());if(markets){}else logHistory('error',_0x3f76c3(0x323)),logHistory(_0x3f76c3(0x20e),_0x3f76c3(0x2dd)+loadCoinsRetryInterval/0xea60+_0x3f76c3(0x21a)),logger[_0x3f76c3(0x201)]('Error\x20details:',_0xaaa154),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x3f76c3(0x343)](markets)['forEach'](_0x260bb0=>{const _0x518cdb=_0x3f76c3;_0x260bb0[0x1][_0x518cdb(0x23f)]&&_0x260bb0[0x1][_0x518cdb(0x25d)]&&allSymbols['push'](_0x260bb0[0x0]);});}function validateSymbols(_0x160842){const _0x5a6d9e=_0x478fd0;let _0x3b5c91=[];return _0x160842[_0x5a6d9e(0x20f)](_0x56beb7=>{const _0x46dbb1=_0x5a6d9e;!allSymbols[_0x46dbb1(0x207)](_0x56beb7)?logHistory(_0x46dbb1(0x20e),_0x46dbb1(0x231)+_0x56beb7+_0x46dbb1(0x301)):_0x3b5c91['push'](_0x56beb7);}),_0x3b5c91;}async function initclient(){const _0x141cee=_0x478fd0;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x141cee(0x31d),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x141cee(0x252),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x8b9dfd=getNormalizedPerformance();emitPerformance(_0x8b9dfd),getStartingBalances(_0x8b9dfd);}async function toggleBotMode(){const _0x3db6f7=_0x478fd0;let _0x4da1a6=dbConfig['get'](_0x3db6f7(0x22f))[_0x3db6f7(0x223)]({'botID':botID})['value']();if(_0x4da1a6){const _0x490ee2=!_0x4da1a6[_0x3db6f7(0x1ba)];dbConfig[_0x3db6f7(0x1ef)](_0x3db6f7(0x22f))['find']({'botID':botID})[_0x3db6f7(0x2ee)]({'headless':_0x490ee2})[_0x3db6f7(0x21c)](),config[_0x3db6f7(0x1ba)]=_0x490ee2,proxyEmit(_0x3db6f7(0x1bf),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x303a48=_0x478fd0;process['send']({'updatebotmanager':!![]},_0x5b7b43=>{}),logger[_0x303a48(0x201)](_0x303a48(0x2ac)+config[_0x303a48(0x1ba)]);}async function loadCoins(_0x435ee5){const _0x57925d=_0x478fd0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x424007,_0x2b1c03=0x0,_0x4483c4=0x0;_0x435ee5[_0x57925d(0x20f)](_0x2eceb9=>{const _0x5963a0=_0x57925d;loading['remainingSymbols'][_0x5963a0(0x1d2)](_0x2eceb9);}),loadingCanceled=![];let _0x522cee=![];while(_0x424007!=_0x435ee5[_0x57925d(0x2cc)]+maxLoadingProgress){_0x424007=loadingProgress,_0x435ee5[_0x57925d(0x20f)](_0x50ac94=>{const _0x2aba5b=_0x57925d;if(gTicker[noslash(_0x50ac94)]){loading[_0x2aba5b(0x208)]=loading[_0x2aba5b(0x208)][_0x2aba5b(0x2ce)](_0x4e93eb=>_0x4e93eb!=_0x50ac94);if(!watchedSymbols[_0x2aba5b(0x207)](_0x50ac94))watchedSymbols['push'](_0x50ac94);_0x424007++;}}),loading[_0x57925d(0x2d4)]=Math['round'](_0x424007/(_0x435ee5[_0x57925d(0x2cc)]+maxLoadingProgress)*0x64);loading[_0x57925d(0x2d4)]!=0x64&&(_0x4483c4>0x1e*0x5&&(loading[_0x57925d(0x23c)]=!![],emitLoadingProgress()),_0x4483c4>0x78*0x5&&!_0x522cee&&(_0x522cee=!![],logHistory(_0x57925d(0x20e),_0x57925d(0x1a3)+loading[_0x57925d(0x208)][_0x57925d(0x2d8)](',\x20')+_0x57925d(0x248)),logHistory(_0x57925d(0x20e),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x57925d(0x21a)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x57925d(0x31a)]=!![],emitLoadingProgress();break;}else _0x2b1c03!=loading['progress']&&(_0x2b1c03=loading[_0x57925d(0x2d4)],emitLoadingProgress()),_0x4483c4++,await sleep(0xc8);}_0x424007==_0x435ee5[_0x57925d(0x2cc)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x57925d(0x245)]({'status':'enabled','live':_0x57925d(0x283)},_0x168b61=>{}),_0x522cee&&logHistory(_0x57925d(0x232),_0x57925d(0x262)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x31c166=_0x478fd0;proxyEmit(_0x31c166(0x1bf),{...emittedConfiguration(),'configstate':_0x31c166(0x2f7)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5e3eba=_0x478fd0;let _0x329d36=gTicker[stablecoins[_0x5e3eba(0x234)][_0x5e3eba(0x349)]],_0x37a3ca=gTicker[stablecoins[_0x5e3eba(0x2e0)][_0x5e3eba(0x349)]];return{'eur':Number(_0x329d36),'usd':Number(_0x37a3ca)};}function capitalize(_0x48233a){const _0x40f300=_0x478fd0;return _0x48233a[_0x40f300(0x1c7)](0x0,0x1)[_0x40f300(0x1c4)]()+_0x48233a[_0x40f300(0x1c7)](0x1);}function supportedExchanges(){const _0x4df2be=_0x478fd0,_0x540e9c=['ws','fetchTickers',_0x4df2be(0x211),_0x4df2be(0x1b6),'watchOrders',_0x4df2be(0x2a4),_0x4df2be(0x216),_0x4df2be(0x1b2),_0x4df2be(0x2a2)];let _0x2e8f1e=[],_0x1f96db=[],_0x4969f0=ccxt[_0x4df2be(0x1ce)][_0x4df2be(0x31d)];_0x4969f0['forEach'](_0x39e941=>{const _0x36f0d4=_0x4df2be;try{const _0x539958=new ccxt[(_0x36f0d4(0x1ce))][_0x39e941]();_0x1f96db[_0x36f0d4(0x1d2)](_0x539958);}catch(_0x1869fa){}}),_0x1f96db[_0x4df2be(0x20f)](_0x5549d3=>{const _0x11f6ac=_0x4df2be;let _0x1f49dc=0x0;_0x540e9c['forEach'](_0x3d2a4a=>{const _0x384e1a=_0x4cc8;_0x3d2a4a in _0x5549d3[_0x384e1a(0x33b)]&&_0x5549d3[_0x384e1a(0x33b)][_0x3d2a4a]&&_0x1f49dc++;}),_0x1f49dc==_0x540e9c[_0x11f6ac(0x2cc)]&&_0x2e8f1e[_0x11f6ac(0x1d2)](capitalize(_0x5549d3['id']));});let _0x12adf9=[];return _0x4969f0[_0x4df2be(0x20f)](_0x51c8bf=>{const _0x32c2a4=_0x4df2be;_0x51c8bf=capitalize(_0x51c8bf);if(!_0x2e8f1e[_0x32c2a4(0x207)](_0x51c8bf))_0x12adf9[_0x32c2a4(0x1d2)](_0x51c8bf);}),_0x2e8f1e;}function setStartDatePerformance(){const _0x4e7a2d=_0x478fd0;if(config&&config[_0x4e7a2d(0x2ad)][0x0]['changes'][_0x4e7a2d(0x2cc)]!=0x0){const _0x126d69=config['liquidity'][0x0][_0x4e7a2d(0x1dc)];dbPerformance['get'](_0x4e7a2d(0x277))[_0x4e7a2d(0x223)]({'date':config[_0x4e7a2d(0x304)]})[_0x4e7a2d(0x2ee)]({'coins':_0x126d69})[_0x4e7a2d(0x21c)]();}}async function recreateCoinResults(){const _0x2ccec9=_0x478fd0;recreationNeeded=![];let _0x494b52,_0x1a1900=[];try{for(const _0x185516 of currentCoins){if(_0x185516[_0x2ccec9(0x349)]!=config[_0x2ccec9(0x2fd)]){let _0x391deb=0x0,_0x508591,_0xf8c534;_0x494b52=await getAllEventOrders(_0x185516[_0x2ccec9(0x294)]);if(_0x494b52[_0x2ccec9(0x2cc)]>0x0)_0x494b52[_0x2ccec9(0x20f)](_0x20bc84=>{const _0x18578e=_0x2ccec9,_0x371882=_0x185516[_0x18578e(0x294)][_0x18578e(0x207)](config[_0x18578e(0x2fd)]+'/');_0x1a1900['push']({'datetime':_0x20bc84['datetime'],'coin':_0x185516[_0x18578e(0x349)],'symbol':_0x185516[_0x18578e(0x294)],'side':_0x20bc84[_0x18578e(0x302)],'reverse':_0x371882,'amount':formatResult(_0x20bc84[_0x18578e(0x256)],0x8),'filled':formatResult(_0x20bc84[_0x18578e(0x256)],0x8),'price':formatResult(_0x20bc84[_0x18578e(0x2c8)],0x8)}),_0x391deb=_0x20bc84['side']==_0x18578e(0x2e9)?_0x391deb+_0x20bc84[_0x18578e(0x256)]:_0x391deb-_0x20bc84[_0x18578e(0x256)];if(!_0xf8c534)_0xf8c534=_0x20bc84[_0x18578e(0x2c8)];});_0x508591=_0x185516['number']-_0x391deb;let _0x30c3da;config[_0x2ccec9(0x2ad)][_0x2ccec9(0x20f)](_0x182536=>{const _0x125fca=_0x2ccec9;!_0x30c3da&&(_0x30c3da=_0x182536[_0x125fca(0x1dc)][_0x125fca(0x223)](_0x115d49=>_0x115d49[_0x125fca(0x349)]==_0x185516[_0x125fca(0x349)]),_0x30c3da&&(_0x508591=_0x30c3da['number'],_0xf8c534=_0x30c3da['price']));});let _0x5d1c46=dbCoinResults[_0x2ccec9(0x1ef)](_0x2ccec9(0x19e))[_0x2ccec9(0x223)]({'coin':_0x185516[_0x2ccec9(0x349)]})['value']();_0x5d1c46={'coin':_0x185516[_0x2ccec9(0x349)],'number':_0x508591,'breakeven':_0xf8c534,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2ccec9(0x1ef)](_0x2ccec9(0x19e))[_0x2ccec9(0x223)]({'coin':_0x185516['coin']})['assign'](_0x5d1c46)[_0x2ccec9(0x21c)]();}}_0x1a1900[_0x2ccec9(0x1ca)]((_0x275e65,_0x4e044b)=>_0x275e65[_0x2ccec9(0x1b7)]>_0x4e044b[_0x2ccec9(0x1b7)]?0x1:_0x4e044b[_0x2ccec9(0x1b7)]>_0x275e65['datetime']?-0x1:0x0);let _0x56da68=0x0;for(let _0x43ec75 of _0x1a1900){await updateCoinResults(_0x43ec75,!![]);}}catch(_0x3219c5){await handleError(_0x3219c5,_0x2ccec9(0x2f5));}}async function getAllEventOrders(_0x5d6663){const _0x3ac4b5=_0x478fd0;let _0x538541=[],_0x169c16=dbLogs[_0x3ac4b5(0x1ef)](_0x3ac4b5(0x1a5))[_0x3ac4b5(0x2ce)](_0x4df238=>{const _0x5485aa=_0x3ac4b5,_0xfe5457=_0x4df238[_0x5485aa(0x23d)][_0x5485aa(0x27b)]();return _0xfe5457[_0x5485aa(0x207)](_0x5d6663[_0x5485aa(0x27b)]())&&(_0xfe5457[_0x5485aa(0x207)](_0x5485aa(0x27d))&&_0xfe5457[_0x5485aa(0x207)]('order')||_0xfe5457['includes']('filled')&&_0xfe5457[_0x5485aa(0x207)](_0x5485aa(0x1fe)));})[_0x3ac4b5(0x2c6)]('time')[_0x3ac4b5(0x247)]();return _0x169c16['forEach'](_0x55d8bd=>{const _0x5a92fc=_0x3ac4b5,_0x382e53=_0x55d8bd[_0x5a92fc(0x23d)][_0x5a92fc(0x207)](_0x5a92fc(0x2c5))?_0x5a92fc(0x2c5):_0x5a92fc(0x2e9),_0x1bc2fa=/#([0-9]|\.)+\s/i,_0x5c1f80=Number(_0x1bc2fa[_0x5a92fc(0x288)](_0x55d8bd[_0x5a92fc(0x23d)])[0x0][_0x5a92fc(0x2de)](0x1)),_0x5d10ef=/@([0-9]|\.)+$/i,_0x58024f=Number(_0x5d10ef[_0x5a92fc(0x288)](_0x55d8bd[_0x5a92fc(0x23d)])[0x0]['slice'](0x1));_0x538541[_0x5a92fc(0x1d2)]({'datetime':_0x55d8bd[_0x5a92fc(0x1e1)],'coin':symbolToCoin(_0x5d6663),'symbol':_0x5d6663,'side':_0x382e53,'amount':_0x5c1f80,'filled':_0x5c1f80,'price':_0x58024f});}),_0x538541;}async function validate24hChanges(){const _0x192125=_0x478fd0;for(const _0xa37fe9 of currentCoins){if(_0xa37fe9[_0x192125(0x349)]!=config[_0x192125(0x2fd)]){let _0x40238c;_0xa37fe9[_0x192125(0x2a1)]?_0x40238c=formatResult((0x1/(gChange[_0xa37fe9[_0x192125(0x294)]]/0x64+0x1)-0x1)*0x64,0x3):_0x40238c=gChange[_0xa37fe9[_0x192125(0x294)]],_0x40238c<config[_0x192125(0x30a)]&&(logHistory(_0x192125(0x20e),_0xa37fe9['coin']+_0x192125(0x22c)+_0x40238c+'%'),logHistory(_0x192125(0x20e),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x192125(0x321)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x387ec6,_0x4de713){const _0x950191=_0x478fd0;if(!_0x387ec6)return!![];const _0x40bd40=_0x4de713[_0x950191(0x342)]('.'),_0x44993c=_0x387ec6[_0x950191(0x342)]('.');for(var _0x204c21=0x0;_0x204c21<_0x44993c[_0x950191(0x2cc)];_0x204c21++){const _0x560812=~~_0x44993c[_0x204c21],_0xd49580=~~_0x40bd40[_0x204c21];if(_0x560812<_0xd49580)return!![];if(_0x560812>_0xd49580)return![];}return![];}async function oneTimeMigration(){const _0x590a60=_0x478fd0;let _0x201f31=dbLogs['get'](_0x590a60(0x1ac))[_0x590a60(0x247)]();if(isOlderVersion(_0x201f31,_0x590a60(0x237))){let _0xacecdb=[];const _0x4e2f0f=dbLogs['get'](_0x590a60(0x1a5))[_0x590a60(0x247)]();_0x4e2f0f[_0x590a60(0x20f)](_0x1ac0f5=>{const _0x5b7399=_0x590a60;_0xacecdb['push']({'time':_0x1ac0f5['time'],'type':_0x1ac0f5['type'],'event':_0x1ac0f5[_0x5b7399(0x23d)]});}),dbLogs[_0x590a60(0x1ef)]('logs')['assign'](_0xacecdb)[_0x590a60(0x21c)]();}let _0x2f39f2=dbConfig['get']('version')['value']();if(isOlderVersion(_0x2f39f2,_0x590a60(0x237))){let _0x4cdf19=dbConfig['get'](_0x590a60(0x22f))[_0x590a60(0x223)]({'botID':botID})['value']();if(_0x4cdf19){let _0xdd84a7=[];_0x4cdf19['portfolio'][_0x590a60(0x20f)](_0x13b71f=>{const _0x5b5ca3=_0x590a60;_0xdd84a7[_0x5b5ca3(0x1d2)]({'coin':_0x13b71f[_0x5b5ca3(0x349)],'number':_0x13b71f[_0x5b5ca3(0x1c5)],'price':_0x13b71f[_0x5b5ca3(0x21d)]}),delete _0x13b71f[_0x5b5ca3(0x1c5)],delete _0x13b71f[_0x5b5ca3(0x21d)];});if(_0xdd84a7[_0x590a60(0x2cc)]!==0x0)fs[_0x590a60(0x229)](configbackuppath+(_0x590a60(0x20a)+botID+_0x590a60(0x2f0)),JSON[_0x590a60(0x204)](_0xdd84a7,null,0x4),function(_0x3276c2){if(_0x3276c2){}});const _0x5beba2=(_0x3bab88,_0x2c24b4)=>{const _0x31286d=_0x590a60;let _0x2bcd39=[];_0x2c24b4[_0x31286d(0x20f)](_0x194cc8=>{const _0x5b197c=_0x31286d,_0x1b16d8=_0x3bab88['find'](_0x47f1c2=>_0x47f1c2[_0x5b197c(0x349)]==_0x194cc8[_0x5b197c(0x349)]);if(!_0x1b16d8)_0x2bcd39['push'](_0x194cc8);});let _0x46ecd0=[];return _0x3bab88[_0x31286d(0x20f)](_0xcc0b7d=>{const _0x200f66=_0x31286d,_0x25981e=_0x2c24b4[_0x200f66(0x223)](_0x22ec98=>_0x22ec98['coin']==_0xcc0b7d[_0x200f66(0x349)]);if(!_0x25981e||_0x25981e['number']==0x0&&_0xcc0b7d['number']!=0x0)_0x46ecd0[_0x200f66(0x1d2)](_0xcc0b7d);}),{'missingDay1':_0x2bcd39,'notInDay2':_0x46ecd0};},_0x3f5939=dbPerformance['get'](_0x590a60(0x277))[_0x590a60(0x2cd)]()['value']();if(_0x3f5939['length']>0x1){const {missingDay1:_0x3d9b1c,notInDay2:_0x1e7dc7}=_0x5beba2(_0xdd84a7,_0x3f5939[0x1][_0x590a60(0x19e)]);_0xdd84a7=[..._0xdd84a7,..._0x3d9b1c],_0x1e7dc7[_0x590a60(0x20f)](_0x512900=>{const _0x21f607=_0x590a60;let _0x1ac2f0=_0xdd84a7[_0x21f607(0x192)](_0x1da0b0=>_0x1da0b0[_0x21f607(0x349)]==_0x512900[_0x21f607(0x349)]);_0x1ac2f0!=-0x1&&_0xdd84a7['splice'](_0x1ac2f0,0x1);});}_0xdd84a7['sort']((_0x4ec762,_0x542aab)=>_0x4ec762[_0x590a60(0x349)]>_0x542aab['coin']?0x1:_0x542aab[_0x590a60(0x349)]>_0x4ec762['coin']?-0x1:0x0);let _0x1d1a22=[{'date':_0x4cdf19[_0x590a60(0x304)],'changes':_0xdd84a7}];_0x3f5939['length']>0x2&&_0x3f5939[_0x590a60(0x20f)]((_0x1f5410,_0x38be67)=>{const _0x32ce05=_0x590a60;if(_0x38be67>0x0&&_0x38be67<_0x3f5939[_0x32ce05(0x2cc)]-0x1){const {missingDay1:_0x34312e,notInDay2:_0x227354}=_0x5beba2(_0x3f5939[_0x38be67][_0x32ce05(0x19e)],_0x3f5939[_0x38be67+0x1]['coins']);_0xdd84a7=[],(_0x34312e[_0x32ce05(0x2cc)]!=0x0||_0x227354['length']!=0x0)&&(_0x34312e[_0x32ce05(0x2cc)]!=0x0&&_0xdd84a7[_0x32ce05(0x1d2)](..._0x34312e),_0x227354['length']!=0x0&&(_0x227354['forEach'](_0x33e78c=>{const _0x46ce26=_0x32ce05;_0x33e78c[_0x46ce26(0x273)]=-_0x33e78c[_0x46ce26(0x273)];}),_0xdd84a7[_0x32ce05(0x1d2)](..._0x227354)),_0xdd84a7[_0x32ce05(0x1ca)]((_0x191ddd,_0x1cee36)=>_0x191ddd['coin']>_0x1cee36[_0x32ce05(0x349)]?0x1:_0x1cee36[_0x32ce05(0x349)]>_0x191ddd[_0x32ce05(0x349)]?-0x1:0x0),_0x1d1a22[_0x32ce05(0x1d2)]({'date':_0x3f5939[_0x38be67+0x1][_0x32ce05(0x2e5)],'changes':_0xdd84a7}));}}),dbConfig[_0x590a60(0x1ef)](_0x590a60(0x22f))['find']({'botID':botID})[_0x590a60(0x2ee)]({..._0x4cdf19,'liquidity':_0x1d1a22})[_0x590a60(0x21c)]();}}if(isOlderVersion(_0x2f39f2,'2.6.0')){let _0x249855=dbConfig[_0x590a60(0x1ef)](_0x590a60(0x22f))[_0x590a60(0x223)]({'botID':botID})[_0x590a60(0x247)]();if(_0x249855){const _0x358c09=_0x249855[_0x590a60(0x257)],_0x2bc848=_0x358c09?capitalize(_0x358c09):'Binance';dbConfig['get'](_0x590a60(0x22f))[_0x590a60(0x223)]({'botID':botID})[_0x590a60(0x2ee)]({'exchange':_0x2bc848})[_0x590a60(0x21c)]();}}if(isOlderVersion(_0x2f39f2,_0x590a60(0x270))){let _0x45f3e2=dbConfig['get']('bot')['find']({'botID':botID})[_0x590a60(0x247)]();if(_0x45f3e2){const _0x35862f=_0x45f3e2[_0x590a60(0x310)],_0x31a602=_0x35862f?_0x590a60(0x33c):![];dbConfig['get'](_0x590a60(0x22f))[_0x590a60(0x223)]({'botID':botID})[_0x590a60(0x2ee)]({'marketcapEnabled':_0x31a602})[_0x590a60(0x21c)]();}}if(isOlderVersion(_0x2f39f2,_0x590a60(0x2ec))){let _0x404736=dbConfig[_0x590a60(0x1ef)]('bot')[_0x590a60(0x223)]({'botID':botID})['value']();if(_0x404736){const _0x1f5d83=_0x404736[_0x590a60(0x335)],_0xc08af0=_0x1f5d83?_0x590a60(0x30e):![];dbConfig[_0x590a60(0x1ef)](_0x590a60(0x22f))[_0x590a60(0x223)]({'botID':botID})[_0x590a60(0x2ee)]({'autoliquidity':_0xc08af0})[_0x590a60(0x21c)]();}}let _0x20fe6d=dbPerformance[_0x590a60(0x1ef)](_0x590a60(0x1ac))[_0x590a60(0x247)]();isOlderVersion(_0x20fe6d,_0x590a60(0x237))&&setStartDatePerformance();let _0x4e4d10=dbCoinResults['get'](_0x590a60(0x1ac))['value']();if(isOlderVersion(_0x4e4d10,_0x590a60(0x240))){let _0x266d87=dbCoinResults[_0x590a60(0x1ef)](_0x590a60(0x19e))['value']();if(_0x266d87[_0x590a60(0x2cc)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x14b65b=_0x478fd0;dbConfig[_0x14b65b(0x2f4)]('version',serverversion)[_0x14b65b(0x21c)](),dbPerformance[_0x14b65b(0x2f4)](_0x14b65b(0x1ac),serverversion)['write'](),dbLogs[_0x14b65b(0x2f4)](_0x14b65b(0x1ac),serverversion)[_0x14b65b(0x21c)](),dbCoinResults[_0x14b65b(0x2f4)](_0x14b65b(0x1ac),serverversion)['write']();}function getConfiguration(_0xf9de77){const _0x129e89=_0x478fd0;let _0x216206=dbConfig[_0x129e89(0x1ef)](_0x129e89(0x22f))[_0x129e89(0x223)]({'botID':_0xf9de77})[_0x129e89(0x247)]();if(_0x216206){let _0x14751a=![];typeof _0x216206[_0x129e89(0x2fa)]==_0x129e89(0x32a)&&(_0x216206={..._0x216206,'threshold':Number(_0x216206['threshold'])},_0x14751a=!![]),_0x216206[_0x129e89(0x30a)]==undefined&&(_0x216206={..._0x216206,'change24h':-0x14},_0x14751a=!![]),_0x216206[_0x129e89(0x22b)]==undefined&&(_0x216206={..._0x216206,'fiat':_0x129e89(0x2f6)},_0x14751a=!![]),_0x216206[_0x129e89(0x2c7)]==undefined&&(_0x216206={..._0x216206,'onepagemode':settings[_0x129e89(0x2c7)]},_0x14751a=!![]),_0x216206['colorscheme']==undefined&&(_0x216206={..._0x216206,'colorscheme':'red_yellow_blue'},_0x14751a=!![]),_0x216206[_0x129e89(0x335)]==undefined&&(_0x216206={..._0x216206,'autoliquidity':_0x129e89(0x30e)},_0x14751a=!![]),_0x216206['marketcapApi']==undefined&&(_0x216206={..._0x216206,'marketcapApi':settings[_0x129e89(0x20c)]?!![]:![]},_0x14751a=!![]),_0x216206[_0x129e89(0x310)]==undefined&&(_0x216206={..._0x216206,'marketcapEnabled':![]},_0x14751a=!![]),_0x14751a&&(_0x216206={'botID':_0x216206[_0x129e89(0x1d3)],'exchange':_0x216206[_0x129e89(0x257)],'apiKey':_0x216206[_0x129e89(0x2ef)],'apiSecret':_0x216206[_0x129e89(0x23b)],'apiPassword':_0x216206[_0x129e89(0x251)],'basecoin':_0x216206[_0x129e89(0x2fd)],'botname':_0x216206[_0x129e89(0x18b)],'showname':_0x216206[_0x129e89(0x311)],'threshold':_0x216206[_0x129e89(0x2fa)],'ordertype':_0x216206[_0x129e89(0x1b5)],'timeout':_0x216206['timeout'],'fiat':_0x216206['fiat'],'startdate':_0x216206[_0x129e89(0x304)],'recreate':_0x216206[_0x129e89(0x2d7)],'timeshift':_0x216206[_0x129e89(0x1f7)],'onepagemode':_0x216206['onepagemode'],'headless':_0x216206[_0x129e89(0x1ba)],'cooldown':_0x216206['cooldown'],'change24h':_0x216206[_0x129e89(0x30a)],'emojibuy':_0x216206[_0x129e89(0x2bc)],'emojisell':_0x216206['emojisell'],'colorscheme':_0x216206[_0x129e89(0x2e1)],'marketcapApi':_0x216206[_0x129e89(0x20c)],'marketcapEnabled':_0x216206[_0x129e89(0x310)],'portfolio':_0x216206[_0x129e89(0x2fe)],'autoliquidity':_0x216206[_0x129e89(0x335)],'liquidity':_0x216206['liquidity'],'openOrders':_0x216206['openOrders']},dbConfig[_0x129e89(0x1ef)](_0x129e89(0x22f))['remove']()[_0x129e89(0x21c)](),dbConfig[_0x129e89(0x1ef)](_0x129e89(0x22f))[_0x129e89(0x1d2)](_0x216206)['write']());}else _0x216206={'botID':_0xf9de77,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x129e89(0x292)+_0xf9de77,'showname':![],'threshold':0x3,'ordertype':_0x129e89(0x27d),'timeout':0x14,'fiat':_0x129e89(0x2f6),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x129e89(0x255),'marketcapApi':settings[_0x129e89(0x20c)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x129e89(0x30e),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x216206;}function emittedConfiguration(){const _0x430de7=_0x478fd0;let _0x4aba53;if(config[_0x430de7(0x2ef)]=='')_0x4aba53={...config,'configstate':_0x430de7(0x1a9)};else config[_0x430de7(0x2ef)]==_0x430de7(0x2f3)?_0x4aba53={...config,'configstate':'recovery'}:(_0x4aba53={...config,'apiKey':_0x430de7(0x210),'apiSecret':_0x430de7(0x210)},config[_0x430de7(0x251)]&&(_0x4aba53[_0x430de7(0x251)]=_0x430de7(0x210)));return _0x4aba53['enableFiatToggle']=enableFiatToggle,_0x4aba53;}function getSettings(){const _0x2fd13f=_0x478fd0;return dbSettings[_0x2fd13f(0x1ef)]('settings')['value']();}function getSecure(){const _0x37d675=_0x478fd0;return dbSecure[_0x37d675(0x1ef)](_0x37d675(0x1d7))[_0x37d675(0x247)]()||{};}function updateTimeshift(_0x1760d8){const _0x580264=_0x478fd0;let _0x157d50=dbConfig[_0x580264(0x1ef)]('bot')[_0x580264(0x223)]({'botID':botID})[_0x580264(0x247)]();_0x157d50&&dbConfig[_0x580264(0x1ef)](_0x580264(0x22f))[_0x580264(0x223)]({'botID':botID})[_0x580264(0x2ee)]({'timeshift':_0x1760d8})[_0x580264(0x21c)](),config[_0x580264(0x1f7)]=_0x1760d8,proxyEmit(_0x580264(0x1bf),emittedConfiguration());}function updateOnepagemode(_0x29e228){const _0xc06b52=_0x478fd0;let _0x3511ca=dbConfig[_0xc06b52(0x1ef)](_0xc06b52(0x22f))['find']({'botID':botID})[_0xc06b52(0x247)]();_0x3511ca&&dbConfig['get'](_0xc06b52(0x22f))[_0xc06b52(0x223)]({'botID':botID})[_0xc06b52(0x2ee)]({'onepagemode':_0x29e228})['write'](),config['onepagemode']=_0x29e228,proxyEmit(_0xc06b52(0x1bf),emittedConfiguration());}function updateMarketcapApi(_0x5d7ea9){const _0x28fbe9=_0x478fd0,_0x4f18e6=_0x5d7ea9?!![]:![];let _0x277e0e=dbConfig[_0x28fbe9(0x1ef)](_0x28fbe9(0x22f))[_0x28fbe9(0x223)]({'botID':botID})['value']();_0x277e0e&&dbConfig['get'](_0x28fbe9(0x22f))[_0x28fbe9(0x223)]({'botID':botID})[_0x28fbe9(0x2ee)]({'marketcapApi':_0x4f18e6})['write'](),config[_0x28fbe9(0x20c)]=_0x4f18e6,getMarketCap(),proxyEmit(_0x28fbe9(0x1bf),emittedConfiguration());}async function storeConfiguration(_0x496e5b){const _0x11002a=_0x478fd0;logger['debug'](_0x11002a(0x285));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4e98ae=![],_0x3e7910=![],_0x5c7a04=[];_0x496e5b[_0x11002a(0x2fe)][_0x11002a(0x20f)](_0x2d2c00=>{const _0x229ab4=_0x11002a;if(!_0x2d2c00[_0x229ab4(0x25a)]&&_0x2d2c00[_0x229ab4(0x349)]!=_0x496e5b['basecoin'])_0x5c7a04[_0x229ab4(0x1d2)](_0x2d2c00['symbol']);}),_0x5c7a04['forEach'](_0x3e1261=>{const _0x36ce53=_0x11002a,_0x440a8d=currentCoins[_0x36ce53(0x223)](_0x869aa8=>_0x869aa8[_0x36ce53(0x294)]==_0x3e1261);!_0x440a8d&&(_0x4e98ae=!![]);}),currentCoins['forEach'](_0x2b2294=>{const _0x5e3065=_0x11002a;if(_0x2b2294['coin']!=config[_0x5e3065(0x2fd)]){const _0x5b28bb=_0x5c7a04[_0x5e3065(0x223)](_0x53f2e8=>_0x53f2e8==_0x2b2294[_0x5e3065(0x294)]);!_0x5b28bb&&(_0x4e98ae=!![]);}}),_0x496e5b[_0x11002a(0x2fe)]['forEach'](_0x3cb880=>{const _0x36a3bf=_0x11002a,_0x395efd=config['portfolio'][_0x36a3bf(0x223)](_0x48255b=>_0x48255b[_0x36a3bf(0x349)]==_0x3cb880[_0x36a3bf(0x349)]);if(_0x395efd&&_0x3cb880[_0x36a3bf(0x330)]!=_0x395efd[_0x36a3bf(0x330)])_0x3e7910=!![];});let _0x5d01f6=dbConfig['get'](_0x11002a(0x22f))[_0x11002a(0x223)]({'botID':botID})['value']();_0x496e5b={..._0x496e5b,'apiKey':decryptRSA(secure[_0x11002a(0x205)],_0x496e5b[_0x11002a(0x2ef)]),'apiSecret':decryptRSA(secure[_0x11002a(0x205)],_0x496e5b['apiSecret'])};_0x496e5b[_0x11002a(0x251)]&&(_0x496e5b['apiPassword']=decryptRSA(secure[_0x11002a(0x205)],_0x496e5b[_0x11002a(0x251)]));let _0x48e657=![];if(_0x5d01f6){_0x496e5b[_0x11002a(0x2ef)]=='************'?_0x496e5b['apiKey']=config[_0x11002a(0x2ef)]:_0x48e657=!![];_0x496e5b['apiSecret']=='************'?_0x496e5b[_0x11002a(0x23b)]=config[_0x11002a(0x23b)]:_0x48e657=!![];if(_0x496e5b[_0x11002a(0x251)]==_0x11002a(0x210))_0x496e5b[_0x11002a(0x251)]=config['apiPassword'];else{if(_0x496e5b['apiPassword'])_0x48e657=!![];}dbConfig[_0x11002a(0x1ef)]('bot')[_0x11002a(0x223)]({'botID':botID})['assign'](_0x496e5b)[_0x11002a(0x21c)]();}else dbConfig[_0x11002a(0x1ef)](_0x11002a(0x22f))['push'](_0x496e5b)[_0x11002a(0x21c)](),_0x48e657=!![],process['send']({'status':'enabled','live':_0x11002a(0x283)},_0x1c8e20=>{});process[_0x11002a(0x245)]({'botname':_0x496e5b[_0x11002a(0x18b)]},_0x46f6d7=>{}),config={..._0x496e5b},updateBotManager(),proxyEmit(_0x11002a(0x325)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x48e657)!_0x5d01f6?await reset(!![]):getBalances();else _0x4e98ae||_0x3e7910?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x56bb08){const _0x274f28=_0x478fd0,_0x396821={...config,'headless':_0x56bb08['headless']};let _0x2b23ff=dbConfig[_0x274f28(0x1ef)](_0x274f28(0x22f))['find']({'botID':botID})[_0x274f28(0x247)]();_0x2b23ff&&dbConfig[_0x274f28(0x1ef)]('bot')['find']({'botID':botID})[_0x274f28(0x2ee)](_0x396821)[_0x274f28(0x21c)](),config={..._0x396821},updateBotManager(),proxyEmit(_0x274f28(0x1bf),emittedConfiguration());}async function storeFiat(_0x22bff9){const _0x1f53be=_0x478fd0,_0x6adc97={...config,'fiat':_0x22bff9};let _0x352ef6=dbConfig[_0x1f53be(0x1ef)](_0x1f53be(0x22f))[_0x1f53be(0x223)]({'botID':botID})[_0x1f53be(0x247)]();_0x352ef6&&dbConfig[_0x1f53be(0x1ef)]('bot')[_0x1f53be(0x223)]({'botID':botID})[_0x1f53be(0x2ee)](_0x6adc97)[_0x1f53be(0x21c)](),config={..._0x6adc97},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x2e5680=_0x478fd0;logger[_0x2e5680(0x1dd)]('Resetting\x20bot\x20history');try{if(fs[_0x2e5680(0x319)](path['join'](configpath,_0x2e5680(0x297)+botID+_0x2e5680(0x347))))fs[_0x2e5680(0x206)](path[_0x2e5680(0x2d8)](configpath,_0x2e5680(0x297)+botID+'-events.json'));if(fs[_0x2e5680(0x319)](path[_0x2e5680(0x2d8)](configpath,'bot-'+botID+_0x2e5680(0x189))))fs[_0x2e5680(0x206)](path[_0x2e5680(0x2d8)](configpath,_0x2e5680(0x297)+botID+'-performance.json'));if(fs[_0x2e5680(0x319)](path['join'](configpath,_0x2e5680(0x297)+botID+_0x2e5680(0x1f9))))fs[_0x2e5680(0x206)](path[_0x2e5680(0x2d8)](configpath,_0x2e5680(0x297)+botID+_0x2e5680(0x1f9)));}catch(_0x508295){if(_0x508295)logger['full'](_0x2e5680(0x1cc),_0x508295);}const _0x304b08=getDate();let _0x49842b=[];currentCoins[_0x2e5680(0x20f)](_0x471f25=>{const _0x4c2985=_0x2e5680;_0x49842b[_0x4c2985(0x1d2)]({'coin':_0x471f25[_0x4c2985(0x349)],'number':_0x471f25[_0x4c2985(0x273)],'price':_0x471f25['last']});});let _0x32567d=dbConfig[_0x2e5680(0x1ef)](_0x2e5680(0x22f))[_0x2e5680(0x223)]({'botID':botID})[_0x2e5680(0x247)]();_0x32567d&&(dbConfig[_0x2e5680(0x1ef)]('bot')[_0x2e5680(0x223)]({'botID':botID})[_0x2e5680(0x2ee)]({'liquidity':[{'date':_0x304b08,'changes':_0x49842b}]})[_0x2e5680(0x21c)](),config[_0x2e5680(0x2ad)]=[]),restartBot(!![]);}function noslash(_0x8a629){return _0x8a629['replace']('/','');}function updateHighestFee(_0x219624){const _0x15007f=_0x478fd0;if(_0x219624[_0x15007f(0x2a1)]){let _0x23321e={'filled':_0x219624[_0x15007f(0x256)]*_0x219624[_0x15007f(0x2c8)],'amount':_0x219624['filled']*_0x219624[_0x15007f(0x2c8)],'side':_0x219624[_0x15007f(0x302)]==_0x15007f(0x2c5)?_0x15007f(0x2e9):'sell','price':0x1/_0x219624['price']};_0x219624={..._0x219624,..._0x23321e};}const _0x1b3666=defaultFee*_0x219624['filled']*_0x219624[_0x15007f(0x2c8)];lastFees[_0x15007f(0x280)][_0x15007f(0x2cc)]===0x14&&lastFees[_0x15007f(0x280)]['shift'](),lastFees[_0x15007f(0x280)][_0x15007f(0x1d2)](_0x1b3666),lastFees[_0x15007f(0x18e)]=Math['max'](...lastFees[_0x15007f(0x280)]);}async function updateNumberCoinsCcxt(_0x303d55){const _0x3f024a=_0x478fd0;logger[_0x3f024a(0x201)](_0x3f024a(0x28e)+_0x303d55[_0x3f024a(0x294)]+_0x3f024a(0x1e5)+_0x303d55[_0x3f024a(0x1c0)]+_0x3f024a(0x1e5)+_0x303d55['filled']+'\x20/\x20'+_0x303d55[_0x3f024a(0x25e)]+'\x20|\x20'+_0x303d55['id']);let _0x34e44d=_0x303d55[_0x3f024a(0x1c0)],_0x73541e=![];currentCoins[_0x3f024a(0x20f)](_0x497b90=>{const _0x4749e2=_0x3f024a;_0x497b90[_0x4749e2(0x294)]==_0x303d55[_0x4749e2(0x294)]&&(_0x73541e=!![]);});if(!_0x73541e)return;const _0x361e56=currentCoins['find'](_0x173bd6=>_0x173bd6['symbol']==_0x303d55[_0x3f024a(0x294)]),_0x5ae30b=_0x2d232c=>{const _0x24468a=_0x3f024a;if(_0x361e56)_0x361e56[_0x24468a(0x33f)]=_0x2d232c;};let _0xbd174d=![];for(const _0x12fe26 of lastOrders){const _0xf962e0=0x64,_0x1f6057=0x1388;let _0x310abc=0x0;while(!_0x12fe26[_0x3f024a(0x1b8)]&&_0x310abc*_0xf962e0<_0x1f6057){_0x310abc++,await sleep(_0xf962e0);}if(_0x310abc>0x0)logger[_0x3f024a(0x201)](_0x3f024a(0x22a)+_0x310abc*_0xf962e0/0x3e8+_0x3f024a(0x30c));_0x12fe26[_0x3f024a(0x1b8)]==_0x303d55['id']&&(_0xbd174d=!![]);}if(_0x34e44d==_0x3f024a(0x326)){_0x5ae30b(_0x3f024a(0x326));if(_0x303d55['filled']>0x0){if(_0xbd174d){setBlockTransactionDetection(!![]),logger[_0x3f024a(0x201)]('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x303d55['id']);const _0x173256=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x173256,setBlockTransactionDetection(![]);}else logger[_0x3f024a(0x201)]('1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20'+_0x303d55['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x34e44d=='canceled'){_0x5ae30b(_0x3f024a(0x30b));const _0x3a48b9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3a48b9,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x34e44d==_0x3f024a(0x227)){if(lastOrders)for(const _0x4e32a5 of lastOrders){if(_0x4e32a5[_0x3f024a(0x1b8)]==_0x303d55['id']){logger[_0x3f024a(0x201)](_0x3f024a(0x2da)+_0x303d55['id']),_0xbd174d=!![];if(_0x4e32a5['filled']==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x3f024a(0x212)+_0x303d55['id']);if(_0x303d55['average'])_0x4e32a5['price']=_0x303d55['average'];else{if(_0x303d55[_0x3f024a(0x2c8)])_0x4e32a5['price']=_0x303d55['price'];else{}}_0x4e32a5[_0x3f024a(0x256)]=_0x303d55[_0x3f024a(0x256)],updateHighestFee(_0x4e32a5),_0x5ae30b(_0x3f024a(0x256)),await validateOrders();if(lockOrders==ORDERS[_0x3f024a(0x2fc)]){const _0xedf630=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xedf630,setBlockTransactionDetection(![]);}_0x4e32a5[_0x3f024a(0x2b3)]={'currency':_0x303d55[_0x3f024a(0x2b3)]?_0x303d55[_0x3f024a(0x2b3)]['currency']:null,'cost':_0x303d55[_0x3f024a(0x2b3)]?_0x303d55[_0x3f024a(0x2b3)]['cost']:0x0},await updateCoinResults(_0x4e32a5);}}}!_0xbd174d&&(logger[_0x3f024a(0x201)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x303d55['id']),_0x5ae30b(_0x3f024a(0x256)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xd133b2=JSON['parse'](lastBalances['portfolio']);const _0x2dc6e1=_0xd133b2[_0x3f024a(0x223)](_0x4b84d7=>_0x4b84d7[_0x3f024a(0x294)]==_0x303d55[_0x3f024a(0x294)]);if(_0x2dc6e1){if(_0x34e44d==_0x3f024a(0x326))_0x2dc6e1[_0x3f024a(0x33f)]=_0x2dc6e1[_0x3f024a(0x33f)]==_0x3f024a(0x256)?_0x3f024a(0x256):'open';else{if(_0x34e44d==_0x3f024a(0x30b))_0x2dc6e1[_0x3f024a(0x33f)]=_0x2dc6e1[_0x3f024a(0x33f)]==_0x3f024a(0x256)?_0x3f024a(0x256):_0x3f024a(0x30b);else _0x34e44d==_0x3f024a(0x227)&&(_0x2dc6e1[_0x3f024a(0x33f)]=_0x3f024a(0x256));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xd133b2)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x3b5735=![];currentCoins['forEach'](_0x532300=>{const _0x590c6c=_0x4cc8;_0x3b5735=allOpenOrders[_0x590c6c(0x223)](_0x150a8c=>_0x150a8c[_0x590c6c(0x294)]==_0x532300[_0x590c6c(0x294)]),_0x532300[_0x590c6c(0x33f)]=_0x3b5735?_0x590c6c(0x326):_0x590c6c(0x2a8);});}async function getCoins(_0x260c2d=0x0,_0x3d095d=!![],_0x516d2c=config['basecoin']){const _0x5b8541=_0x478fd0;let _0x1e0fd7,_0x418f91=[],_0x5a0178=[],_0x2b1616=[];if(_0x260c2d)await sleep(_0x260c2d);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1e0fd7=await exchange[_0x5b8541(0x2a2)](),mybalances=_0x1e0fd7[_0x5b8541(0x1f2)];for(const [_0x32ed6c,_0x57c324]of Object[_0x5b8541(0x343)](mybalances)){_0x2b1616[_0x5b8541(0x1d2)](_0x32ed6c);}config['portfolio'][_0x5b8541(0x20f)](_0x16d5b5=>{const _0x3d9644=_0x5b8541;!_0x2b1616['includes'](_0x16d5b5[_0x3d9644(0x349)])&&(mybalances[_0x16d5b5[_0x3d9644(0x349)]]=0x0);});if(_0x516d2c=='')for(const [_0x51c71a,_0x109fe2]of Object[_0x5b8541(0x343)](mybalances)){_0x109fe2!=0x0&&_0x418f91['push']({'coin':_0x51c71a});}else for(const [_0x2b5d09,_0x5f3c81]of Object['entries'](mybalances)){const _0x294a13=config['portfolio'][_0x5b8541(0x223)](_0x3dab89=>_0x3dab89[_0x5b8541(0x349)]==_0x2b5d09),_0x3dbe4e=_0x2b5d09+'/'+_0x516d2c,_0x4b60e3=_0x516d2c+'/'+_0x2b5d09,_0x3220da=currentCoins['find'](_0x21c56e=>_0x21c56e['coin']==_0x2b5d09);if((_0x5f3c81!=0x0||_0x294a13)&&(allSymbols['includes'](_0x3dbe4e)||_0x2b5d09==_0x516d2c))_0x3220da?_0x418f91['push']({..._0x3220da,'number':Math[_0x5b8541(0x1a2)](_0x5f3c81+(_0x294a13&&_0x294a13[_0x5b8541(0x330)]||0x0),0x0)}):_0x418f91[_0x5b8541(0x1d2)]({'coin':_0x2b5d09,'symbol':_0x3dbe4e,'reverse':![],'number':Math[_0x5b8541(0x1a2)](_0x5f3c81+(_0x294a13&&_0x294a13['offset']||0x0),0x0),'orderstatus':_0x5b8541(0x2a8)});else{if((_0x5f3c81!=0x0||_0x294a13)&&allSymbols[_0x5b8541(0x207)](_0x4b60e3))_0x3220da?_0x418f91[_0x5b8541(0x1d2)]({..._0x3220da,'number':Math['max'](_0x5f3c81+(_0x294a13&&_0x294a13['offset']||0x0),0x0)}):_0x418f91[_0x5b8541(0x1d2)]({'coin':_0x2b5d09,'symbol':_0x4b60e3,'reverse':!![],'number':Math[_0x5b8541(0x1a2)](_0x5f3c81+(_0x294a13&&_0x294a13['offset']||0x0),0x0),'orderstatus':'none'});else _0x294a13&&_0x418f91[_0x5b8541(0x1d2)]({'coin':_0x294a13[_0x5b8541(0x349)],'symbol':_0x294a13[_0x5b8541(0x294)],'reverse':_0x294a13[_0x5b8541(0x2a1)],'number':0x0,'orderstatus':_0x5b8541(0x2a8)});}}}catch(_0x3d32d2){if(!_0x3d095d)handleErrorNoStop(_0x3d32d2,'getCoins()');else await handleError(_0x3d32d2,_0x5b8541(0x225));}return _0x418f91['sort']((_0x37be00,_0x219884)=>_0x37be00[_0x5b8541(0x219)]<_0x219884[_0x5b8541(0x219)]?0x1:_0x219884['delta']<_0x37be00[_0x5b8541(0x219)]?-0x1:0x0),_0x5a0178=cloneDeep(_0x418f91),_0x418f91=_0x418f91[_0x5b8541(0x2ce)](_0x1e6e35=>{const _0x5af7a9=_0x5b8541,_0x4512a2=config[_0x5af7a9(0x2fe)][_0x5af7a9(0x223)](_0x1e1f4b=>_0x1e1f4b[_0x5af7a9(0x349)]==_0x1e6e35[_0x5af7a9(0x349)]);return _0x4512a2&&!_0x4512a2['excluded'];}),[_0x418f91,_0x5a0178];}async function getCoinNumber(_0x26cf2e){const _0x2d4850=_0x478fd0;let _0x6d028b;try{const _0x1f5809=await exchange[_0x2d4850(0x2a2)]();_0x6d028b=_0x1f5809[_0x2d4850(0x1f2)][_0x26cf2e];}catch(_0x18a109){await handleError(_0x18a109,_0x2d4850(0x233));}return _0x6d028b;}async function getOpenOrders(){const _0x278291=_0x478fd0;let _0x986017;allOpenOrders=[];try{for(const _0x384d05 of config[_0x278291(0x2fe)]){!_0x384d05[_0x278291(0x25a)]&&_0x384d05[_0x278291(0x349)]!=config[_0x278291(0x2fd)]&&(_0x986017=await exchange[_0x278291(0x1b2)](_0x384d05['symbol']),_0x986017[_0x278291(0x2cc)]>0x0&&allOpenOrders['push'](_0x986017[0x0]));}}catch(_0x4d2320){await handleError(_0x4d2320,_0x278291(0x348));}}async function handleOpenOrders(_0x6b46de=0x0){const _0x497ed8=_0x478fd0;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x497ed8(0x2fc)]&&allOrdersPlaced&&(_0x6b46de==0x0?(logger[_0x497ed8(0x201)]('1\x20-\x20Handle\x20open\x20orders'),_0x6b46de++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x497ed8(0x201)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x497ed8(0x18c))));}async function testAPI(_0xb804d1){const _0x615886=_0x478fd0,_0x349855=ccxt['pro'][_0xb804d1[_0x615886(0x257)]['toLowerCase']()],_0x2c2ac9=new _0x349855({'apiKey':_0xb804d1[_0x615886(0x2ef)],'secret':_0xb804d1[_0x615886(0x23b)],'options':{'defaultType':_0x615886(0x25d)}});if(_0xb804d1['apiPassword'])_0x2c2ac9[_0x615886(0x1de)]=_0xb804d1[_0x615886(0x251)];try{await _0x2c2ac9[_0x615886(0x2a2)]();}catch(_0x46653d){logger[_0x615886(0x201)](_0x615886(0x24b)+_0x46653d[_0x615886(0x2ed)]());throw _0x46653d;}}function cloneDeep(_0x531f05){const _0x2e9eb2=_0x478fd0;return JSON[_0x2e9eb2(0x2d0)](JSON['stringify'](_0x531f05));}async function getPortfolio(_0x40292e){const _0x470456=_0x478fd0;let _0x4967a2=[],_0x376bb4=[],_0x1a1c03=[],_0x271d3a;_0x40292e[_0x470456(0x2ef)]=decryptRSA(secure['privateKey'],_0x40292e[_0x470456(0x2ef)]),_0x40292e[_0x470456(0x23b)]=decryptRSA(secure[_0x470456(0x205)],_0x40292e[_0x470456(0x23b)]);if(_0x40292e[_0x470456(0x251)])_0x40292e[_0x470456(0x251)]=decryptRSA(secure[_0x470456(0x205)],_0x40292e[_0x470456(0x251)]);if(_0x40292e['apiKey']!=='************'||_0x40292e['apiSecret']!==_0x470456(0x210)||_0x40292e[_0x470456(0x251)]&&_0x40292e[_0x470456(0x251)]!=='************'){if(config['exchange']){if(_0x40292e[_0x470456(0x2ef)]==_0x470456(0x210))_0x40292e[_0x470456(0x2ef)]=config[_0x470456(0x2ef)];if(_0x40292e['apiSecret']==_0x470456(0x210))_0x40292e[_0x470456(0x23b)]=config[_0x470456(0x23b)];if(_0x40292e[_0x470456(0x251)]==_0x470456(0x210))_0x40292e[_0x470456(0x251)]=config['apiPassword'];}try{await testAPI(_0x40292e);}catch(_0x11347f){if(_0x11347f[_0x470456(0x2ed)]()[_0x470456(0x207)](_0x470456(0x1cb))){logHistory(_0x470456(0x20e),_0x470456(0x2a0)),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x470456(0x20e),_0x470456(0x2a3)),logger[_0x470456(0x201)]('Error\x20details\x20(0):',_0x11347f),proxyEmit(_0x470456(0x21f),![]);return;}}exchange?updateExchange(_0x40292e[_0x470456(0x2ef)],_0x40292e[_0x470456(0x23b)],_0x40292e[_0x470456(0x251)]):await initExchange(_0x40292e[_0x470456(0x257)],_0x40292e[_0x470456(0x2ef)],_0x40292e[_0x470456(0x23b)],_0x40292e['apiPassword']);await loadSymbols();const _0x18c131=await getCoins(0x0,![],_0x40292e[_0x470456(0x2fd)]);_0x1a1c03=cloneDeep(_0x18c131[0x1]);}else{const _0x99dfda=await getCoins();_0x1a1c03=cloneDeep(_0x99dfda[0x1]);}if(_0x40292e[_0x470456(0x2fd)]=='')proxyEmit(_0x470456(0x21f),!![]),proxyEmit(_0x470456(0x299),_0x1a1c03);else{_0x1a1c03[_0x470456(0x20f)](_0x1ae08f=>{const _0x3771a1=_0x470456;if(_0x1ae08f[_0x3771a1(0x349)]!=_0x40292e[_0x3771a1(0x2fd)]&&allSymbols[_0x3771a1(0x207)](_0x1ae08f[_0x3771a1(0x294)]))_0x4967a2[_0x3771a1(0x1d2)](_0x1ae08f[_0x3771a1(0x294)]);});if(_0x4967a2[_0x470456(0x2cc)]==0x0)logHistory(_0x470456(0x20e),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x376bb4=await getTickers(_0x4967a2);}catch(_0x5006b0){logHistory(_0x470456(0x20e),_0x470456(0x2a3)),logger['debug'](_0x470456(0x19d),_0x5006b0),proxyEmit(_0x470456(0x21f),![]);return;}_0x1a1c03[_0x470456(0x20f)](_0x334514=>{const _0x263268=_0x470456;_0x334514[_0x263268(0x349)]!=_0x40292e['basecoin']?_0x376bb4[_0x334514['symbol']]?_0x271d3a=_0x334514[_0x263268(0x2a1)]?0x1/_0x376bb4[_0x334514[_0x263268(0x294)]]['last']:_0x376bb4[_0x334514[_0x263268(0x294)]][_0x263268(0x296)]:_0x271d3a=0x0:_0x271d3a=0x1,_0x334514[_0x263268(0x2c8)]=formatResult(_0x271d3a,0x8);}),await getMarketCap(_0x1a1c03),proxyEmit('portfolio1',!![]),proxyEmit(_0x470456(0x299),_0x1a1c03);}}}function truncateTradeAmount(_0x129b8c,_0x1b7a0b){let _0x1e5107=0x0;try{_0x1e5107=exchange['amountToPrecision'](_0x129b8c,_0x1b7a0b);}catch(_0x3d0a6c){}return _0x1e5107;}function checkMinimums(_0x5a6c54){const _0x156dc5=_0x478fd0;let _0x3c6ea3=!![];const _0xa472c8=!_0x5a6c54[_0x156dc5(0x2a1)]?markets[_0x5a6c54['symbol']]['limits'][_0x156dc5(0x25e)][_0x156dc5(0x317)]:markets[_0x5a6c54[_0x156dc5(0x294)]]['limits'][_0x156dc5(0x26b)]['min'],_0x446b06=!_0x5a6c54[_0x156dc5(0x2a1)]?markets[_0x5a6c54[_0x156dc5(0x294)]]['limits'][_0x156dc5(0x26b)][_0x156dc5(0x317)]:markets[_0x5a6c54[_0x156dc5(0x294)]][_0x156dc5(0x2b7)][_0x156dc5(0x25e)][_0x156dc5(0x317)],_0x3e6549=truncateTradeAmount(_0x5a6c54[_0x156dc5(0x294)],_0x5a6c54[_0x156dc5(0x1b1)]);_0x5a6c54[_0x156dc5(0x1b1)]=_0x3e6549;if(Math[_0x156dc5(0x318)](_0x3e6549)<_0xa472c8)_0x3c6ea3=![];if(Math['abs'](_0x3e6549)*_0x5a6c54[_0x156dc5(0x296)]<_0x446b06)_0x3c6ea3=![];if(_0x5a6c54['side']==_0x156dc5(0x2c5)){let _0x53632c=config[_0x156dc5(0x2fe)]['find'](_0x337752=>_0x337752[_0x156dc5(0x349)]==_0x5a6c54['coin']);if(_0x53632c[_0x156dc5(0x330)]>0x0){if(Math[_0x156dc5(0x318)](_0x3e6549)>_0x5a6c54[_0x156dc5(0x273)]-_0x53632c[_0x156dc5(0x330)])_0x3c6ea3=![];}else{if(Math[_0x156dc5(0x318)](_0x3e6549)>_0x5a6c54[_0x156dc5(0x273)])_0x3c6ea3=![];}}if(_0x5a6c54['side']==_0x156dc5(0x2e9)){let _0x3faee2=config[_0x156dc5(0x2fe)][_0x156dc5(0x223)](_0x22c128=>_0x22c128[_0x156dc5(0x349)]==config[_0x156dc5(0x2fd)]),_0xf7821a=currentCoins[_0x156dc5(0x223)](_0x4a6380=>_0x4a6380[_0x156dc5(0x349)]==config['basecoin']);if(_0x3faee2[_0x156dc5(0x330)]>0x0){if(Math[_0x156dc5(0x318)](_0x3e6549)*_0x5a6c54[_0x156dc5(0x296)]>_0xf7821a['number']-_0x3faee2[_0x156dc5(0x330)])_0x3c6ea3=![];}else{if(Math[_0x156dc5(0x318)](_0x3e6549)*_0x5a6c54['last']>_0xf7821a[_0x156dc5(0x273)])_0x3c6ea3=![];}}return _0x3c6ea3;}async function getBalances(_0x173abd=!![]){const _0x14f1b3=_0x478fd0;let _0x222c1f=0x0,_0x2b785c;const _0x5f11f5=config[_0x14f1b3(0x2fa)];if(config[_0x14f1b3(0x1ba)]&&config[_0x14f1b3(0x30a)]<0x0)await validate24hChanges();currentCoins[_0x14f1b3(0x20f)](_0x2c2faa=>{const _0x54ba51=_0x14f1b3;if(_0x2c2faa[_0x54ba51(0x349)]!=config['basecoin']){let _0x583a8a=gTicker[noslash(_0x2c2faa[_0x54ba51(0x294)])];_0x2b785c=_0x2c2faa['reverse']?0x1/_0x583a8a:_0x583a8a;}else _0x2b785c=0x1;let _0x352f6c=_0x2c2faa[_0x54ba51(0x273)]*_0x2b785c;_0x222c1f+=_0x352f6c,_0x2c2faa['last']=formatResult(Number(_0x2b785c),0x8),_0x2c2faa['value']=_0x352f6c;}),currentCoins[_0x14f1b3(0x20f)](_0xe158a2=>{const _0x251c70=_0x14f1b3;let _0x54dd1f=config[_0x251c70(0x2fe)][_0x251c70(0x223)](_0x4245d3=>_0x4245d3[_0x251c70(0x349)]==_0xe158a2[_0x251c70(0x349)]),_0x4a3e25=Number(_0x54dd1f[_0x251c70(0x329)]),_0x54dbd1=_0xe158a2['value']/_0x222c1f*0x64,_0x283221=_0x4a3e25*_0x222c1f/0x64/_0xe158a2[_0x251c70(0x296)]-_0xe158a2['number'];_0xe158a2[_0x251c70(0x329)]=formatResult(_0x54dbd1,0x3),_0xe158a2[_0x251c70(0x235)]=formatResult(_0x4a3e25,0x3),_0xe158a2['trade']=formatResult(_0x283221,0x8),_0xe158a2[_0x251c70(0x302)]='',_0xe158a2[_0x251c70(0x1a1)]=![];if(_0xe158a2[_0x251c70(0x349)]!=config[_0x251c70(0x2fd)]){if(_0xe158a2['distribution']>_0x4a3e25)_0xe158a2[_0x251c70(0x302)]=_0x251c70(0x2c5),_0xe158a2[_0x251c70(0x1a1)]=checkMinimums(_0xe158a2);else _0xe158a2['distribution']<_0x4a3e25&&(_0xe158a2[_0x251c70(0x302)]=_0x251c70(0x2e9),_0xe158a2[_0x251c70(0x1a1)]=checkMinimums(_0xe158a2));}_0xe158a2['delta']=_0xe158a2['distribution']/_0xe158a2['target']-0x1;if(_0xe158a2['orderstatus']=='filled'||_0xe158a2[_0x251c70(0x33f)]==_0x251c70(0x30b))_0xe158a2['orderstatus']='none';}),currentCoins[_0x14f1b3(0x1ca)]((_0x2bcad1,_0x451706)=>_0x2bcad1[_0x14f1b3(0x219)]<_0x451706[_0x14f1b3(0x219)]?0x1:_0x451706[_0x14f1b3(0x219)]<_0x2bcad1[_0x14f1b3(0x219)]?-0x1:0x0);const _0x4cfbd5=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4cfbd5['eur'],'usd':_0x4cfbd5['usd'],'portfolio':JSON[_0x14f1b3(0x204)](currentCoins),'threshold':_0x5f11f5},proxyEmit(_0x14f1b3(0x252),{'serverversion':serverversion,'balances':lastBalances});if(_0x173abd){if(config[_0x14f1b3(0x1ba)])headlessMode({'portfolio':currentCoins,'threshold':_0x5f11f5});else{if(lockOrders==ORDERS[_0x14f1b3(0x300)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5f11f5});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x301f2a=getNormalizedPerformance();getStartingBalances(_0x301f2a),emitPerformance(_0x301f2a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3388b5=_0x478fd0;if(!lastBalances)return;let _0x451cb5=[],_0x3339a3,_0x3801e0=JSON[_0x3388b5(0x2d0)](lastBalances[_0x3388b5(0x2fe)]);_0x3801e0[_0x3388b5(0x1ca)]((_0xd25422,_0x5af885)=>_0xd25422['coin']>_0x5af885[_0x3388b5(0x349)]?0x1:_0x5af885[_0x3388b5(0x349)]>_0xd25422[_0x3388b5(0x349)]?-0x1:0x0),_0x3801e0[_0x3388b5(0x20f)](_0x861aed=>{const _0x9b6d6d=_0x3388b5;let _0x4b4082={'coin':_0x861aed['coin'],'number':_0x861aed['number'],'price':_0x861aed[_0x9b6d6d(0x296)]};_0x451cb5['push'](_0x4b4082);});const _0x228251=await getFiat();_0x3339a3={'date':lastBalances['time'][_0x3388b5(0x342)]('\x20')[0x0],'eur':_0x228251['eur'],'usd':_0x228251[_0x3388b5(0x2e0)],'coins':_0x451cb5};let _0x2aaab4=dbPerformance['get']('data')[_0x3388b5(0x223)]({'date':_0x3339a3[_0x3388b5(0x2e5)]})[_0x3388b5(0x247)]();_0x2aaab4?_0x3339a3[_0x3388b5(0x2e5)]!=config[_0x3388b5(0x304)]&&dbPerformance[_0x3388b5(0x1ef)](_0x3388b5(0x277))[_0x3388b5(0x223)]({'date':_0x3339a3['date']})[_0x3388b5(0x2ee)](_0x3339a3)[_0x3388b5(0x21c)]():dbPerformance[_0x3388b5(0x1ef)](_0x3388b5(0x277))['push'](_0x3339a3)[_0x3388b5(0x21c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x48cfac=_0x478fd0;let _0x2c2c3d=[];if(dbPerformance[_0x48cfac(0x33b)](_0x48cfac(0x277))[_0x48cfac(0x247)]()){let _0x47a0d5=dbPerformance[_0x48cfac(0x1ef)](_0x48cfac(0x277))[_0x48cfac(0x2cd)]()[_0x48cfac(0x2ce)](_0x41338b=>{const _0x108df1=_0x48cfac;if(_0x41338b[_0x108df1(0x19e)]['length']==0x0)return![];else return!![];})[_0x48cfac(0x2c6)](_0x48cfac(0x2e5))['value'](),_0x2ea744=[...config['liquidity']];_0x2ea744[_0x48cfac(0x1ca)]((_0x170a55,_0x2f3b76)=>_0x170a55[_0x48cfac(0x2e5)]>_0x2f3b76[_0x48cfac(0x2e5)]?-0x1:_0x2f3b76[_0x48cfac(0x2e5)]>_0x170a55[_0x48cfac(0x2e5)]?0x1:0x0);let _0x4f28c2=0x1,_0x4ce0d1=[],_0x1b3333=0x0;_0x47a0d5[_0x48cfac(0x2de)]()['reverse']()['forEach']((_0x254a5a,_0x2aae00)=>{const _0x4e8728=_0x48cfac;if(_0x2ea744[_0x1b3333]){if(_0x47a0d5[_0x47a0d5[_0x4e8728(0x2cc)]-_0x2aae00]&&_0x2ea744[_0x1b3333][_0x4e8728(0x2e5)]==_0x47a0d5[_0x47a0d5[_0x4e8728(0x2cc)]-_0x2aae00]['date']){if(_0x2aae00<_0x47a0d5[_0x4e8728(0x2cc)]){let _0x50c53e=0x0,_0x36b649=0x0;_0x47a0d5[_0x47a0d5['length']-_0x2aae00]['coins']['forEach'](_0x46716d=>{const _0x1311c6=_0x4e8728;_0x36b649+=_0x46716d[_0x1311c6(0x273)]*_0x46716d[_0x1311c6(0x2c8)];}),_0x2ea744[_0x1b3333][_0x4e8728(0x1dc)][_0x4e8728(0x20f)](_0x20aff5=>{const _0x5bd3cc=_0x4e8728;_0x50c53e+=_0x20aff5[_0x5bd3cc(0x273)]*_0x20aff5[_0x5bd3cc(0x2c8)];}),_0x4f28c2*=_0x50c53e/(_0x36b649-_0x50c53e)+0x1;}_0x1b3333++;}}let _0xfc0f76=0x0;_0x254a5a[_0x4e8728(0x19e)][_0x4e8728(0x20f)](_0x51cb26=>{const _0x1f0c1d=_0x4e8728;_0xfc0f76+=_0x51cb26[_0x1f0c1d(0x273)]*_0x51cb26['price'];}),_0x4ce0d1[_0x47a0d5[_0x4e8728(0x2cc)]-_0x2aae00-0x1]=_0xfc0f76*(_0x4f28c2-0x1);});let _0x3664f1=[];_0x2ea744=[...config[_0x48cfac(0x2ad)]]||[];let _0x1fcf1f=0x0;_0x1b3333=0x0,_0x47a0d5['forEach']((_0x273084,_0x37f33d)=>{const _0x44a0ba=_0x48cfac;if(_0x2ea744[_0x1b3333]){const _0x59d327=fns['parse'](_0x2ea744[_0x1b3333][_0x44a0ba(0x2e5)],_0x44a0ba(0x200),new Date()),_0x2bd98e=fns['parse'](_0x273084[_0x44a0ba(0x2e5)],'yyyy/MM/dd',new Date());if(fns[_0x44a0ba(0x1fa)](_0x59d327,_0x2bd98e)){let _0x3d1ff1=0x0;_0x2ea744[_0x1b3333][_0x44a0ba(0x1dc)][_0x44a0ba(0x20f)](_0x4ff1e9=>{const _0x5c0785=_0x44a0ba;!_0x3664f1[_0x4ff1e9[_0x5c0785(0x349)]]?_0x3664f1[_0x4ff1e9[_0x5c0785(0x349)]]=_0x4ff1e9[_0x5c0785(0x273)]:(_0x3d1ff1=_0x3664f1[_0x4ff1e9[_0x5c0785(0x349)]],_0x3664f1[_0x4ff1e9[_0x5c0785(0x349)]]+=_0x4ff1e9[_0x5c0785(0x273)]);const _0x3c5f35=_0x273084['coins'][_0x5c0785(0x223)](_0x231f05=>_0x231f05['coin']==_0x4ff1e9[_0x5c0785(0x349)]);(!_0x3c5f35||_0x3c5f35[_0x5c0785(0x273)]==0x0)&&(_0x1fcf1f+=(-_0x4ff1e9[_0x5c0785(0x273)]-_0x3d1ff1)*_0x4ff1e9['price']);}),_0x1b3333++;}}_0x273084[_0x44a0ba(0x19e)][_0x44a0ba(0x20f)]((_0x2baf70,_0x4796aa)=>{const _0x52cb45=_0x44a0ba;_0x3664f1[_0x2baf70['coin']]&&(_0x2baf70[_0x52cb45(0x1a9)]=_0x3664f1[_0x2baf70[_0x52cb45(0x349)]]);}),_0x2c2c3d['push']({'date':_0x273084['date'],'eur':_0x273084[_0x44a0ba(0x234)],'usd':_0x273084['usd'],'offset':_0x4ce0d1[_0x37f33d],'netoffset':_0x1fcf1f,'coins':_0x273084[_0x44a0ba(0x19e)]});});}return _0x2c2c3d;}function emitPerformance(_0xe20dbd){const _0x275244=_0x478fd0;_0xe20dbd[_0x275244(0x2cc)]!==0x0?(proxyEmit(_0x275244(0x2a6),_0xe20dbd),lastPerformanceEmitted=getDate()):proxyEmit(_0x275244(0x2a6),[]);}function getPerf(_0x214eb5,_0x114b1c){const _0x3ccba9=_0x478fd0;let _0x203f20=0x0,_0x174355=0x0,_0xeb0cba=0x0;_0x214eb5[_0x3ccba9(0x19e)][_0x3ccba9(0x20f)](_0x2eccb9=>{const _0x90fc39=_0x3ccba9;_0x203f20+=_0x2eccb9[_0x90fc39(0x273)]*_0x2eccb9['price'];});_0x114b1c&&(_0x203f20+=_0x214eb5[_0x3ccba9(0x330)]);if(config[_0x3ccba9(0x2fd)]===_0x3ccba9(0x246)||config['basecoin']===_0x3ccba9(0x21b)||config[_0x3ccba9(0x2fd)]==='PAXG')_0x174355=_0x203f20*_0x214eb5[_0x3ccba9(0x234)],_0xeb0cba=_0x203f20*_0x214eb5[_0x3ccba9(0x2e0)];else{if(usdBasecoins[_0x3ccba9(0x207)](config[_0x3ccba9(0x2fd)]))_0x174355=_0x203f20*_0x214eb5[_0x3ccba9(0x234)]/_0x214eb5['usd'],_0xeb0cba=_0x203f20;else config['basecoin']==='EUR'&&(_0x174355=_0x203f20,_0xeb0cba=_0x203f20*_0x214eb5[_0x3ccba9(0x2e0)]/_0x214eb5[_0x3ccba9(0x234)]);}return[_0x203f20,_0x174355,_0xeb0cba];}function getKPIs(_0x367a51,_0x472c33=_0x478fd0(0x27e)){const _0x3b409f=_0x478fd0,_0x492062=config['basecoin'],_0x169984=lastBalances,_0x11428e=currentCoins,_0x19a1e5=getNormalizedPerformance(),_0x539fbb=_0x367a51===_0x3b409f(0x2fd)?_0x492062:_0x367a51==='fiat'||_0x367a51===_0x3b409f(0x2bb)?_0x472c33:'Net\x20'+_0x492062,_0x427d30=_0x367a51==='net-basecoin'?_0x3b409f(0x1e9):_0x367a51===_0x3b409f(0x2bb)?'Net\x20effect':_0x539fbb+_0x3b409f(0x24e),_0x11de15=_0x367a51===_0x3b409f(0x214)||_0x367a51===_0x3b409f(0x2bb)?'Net\x20effect':_0x539fbb+'\x20change';let _0x596cbf=0x0;_0x11428e[_0x3b409f(0x20f)](_0x2a4ca9=>{const _0x371254=_0x3b409f;_0x596cbf+=_0x2a4ca9['number']*_0x2a4ca9[_0x371254(0x296)];});if(_0x367a51===_0x3b409f(0x22b)||_0x367a51===_0x3b409f(0x2bb)){if(_0x492062===_0x3b409f(0x246)||_0x492062==='ETH'||_0x492062===_0x3b409f(0x1e7))_0x596cbf=_0x596cbf*(_0x472c33===_0x3b409f(0x27e)?_0x169984[_0x3b409f(0x234)]:_0x169984[_0x3b409f(0x2e0)]);else{if(usdBasecoins[_0x3b409f(0x207)](_0x492062))_0x596cbf=_0x596cbf*(_0x472c33===_0x3b409f(0x27e)?_0x169984[_0x3b409f(0x234)]/_0x169984[_0x3b409f(0x2e0)]:0x1);else _0x492062===_0x3b409f(0x27e)&&(_0x596cbf=_0x596cbf*(_0x472c33===_0x3b409f(0x27e)?0x1:_0x169984['usd']/_0x169984[_0x3b409f(0x234)]));}}let _0xe96824;if(_0x596cbf!==0x0){if(_0x367a51===_0x3b409f(0x2fd))_0xe96824=(_0x596cbf/startingBalances[_0x3b409f(0x2fd)]-0x1)*0x64;else{if(_0x472c33===_0x3b409f(0x27e))_0xe96824=(_0x596cbf/startingBalances[_0x3b409f(0x234)]-0x1)*0x64;else _0xe96824=(_0x596cbf/startingBalances[_0x3b409f(0x2e0)]-0x1)*0x64;}let _0x37f4d8=0x0;if(startingBalances[_0x3b409f(0x19e)])_0x11428e['forEach'](_0x47372c=>{const _0x14fe92=_0x3b409f;let _0x1476b2=startingBalances[_0x14fe92(0x19e)][_0x14fe92(0x223)](_0x23621b=>_0x23621b[_0x14fe92(0x349)]===_0x47372c[_0x14fe92(0x349)]);if(_0x1476b2&&_0x1476b2[_0x14fe92(0x349)]&&_0x47372c[_0x14fe92(0x273)]!==0x0)_0x37f4d8+=_0x1476b2['number']*_0x47372c['last'];});let _0xb31dee=0x0;if(_0x19a1e5[_0x3b409f(0x2cc)]!==0x0){let _0x4f5c78=_0x19a1e5[_0x19a1e5[_0x3b409f(0x2cc)]-0x1];_0xb31dee=_0x4f5c78['netoffset'];}_0x37f4d8-=_0xb31dee;_0x367a51===_0x3b409f(0x214)&&(_0xe96824=(_0x596cbf-_0x37f4d8)/startingBalances['basecoin']*0x64,_0x596cbf=_0x596cbf-_0x37f4d8);if(_0x367a51===_0x3b409f(0x2bb)){let _0x342d2b=_0x472c33===_0x3b409f(0x27e)?startingBalances['eur']:startingBalances[_0x3b409f(0x2e0)];if(_0x492062==='BTC'||_0x492062===_0x3b409f(0x21b)||_0x492062===_0x3b409f(0x1e7))_0x37f4d8=_0x472c33==='EUR'?_0x37f4d8*_0x169984[_0x3b409f(0x234)]:_0x37f4d8*_0x169984['usd'];else{if(usdBasecoins['includes'](_0x492062))_0x37f4d8=_0x472c33==='EUR'?_0x37f4d8*_0x169984[_0x3b409f(0x234)]/_0x169984['usd']:_0x37f4d8;else _0x492062==='EUR'&&(_0x37f4d8=_0x472c33===_0x3b409f(0x27e)?_0x37f4d8:_0x37f4d8*_0x169984[_0x3b409f(0x2e0)]/_0x169984[_0x3b409f(0x234)]);}_0xe96824=(_0x596cbf-_0x37f4d8)/_0x342d2b*0x64,_0x596cbf=_0x596cbf-_0x37f4d8;}if(_0xe96824){if(_0xe96824<0x64)_0xe96824=_0xe96824[_0x3b409f(0x282)](0x2);else{if(_0xe96824<0x3e8)_0xe96824=_0xe96824[_0x3b409f(0x282)](0x1);else _0xe96824=_0xe96824[_0x3b409f(0x282)](0x0);}}else _0xe96824=Number('0')[_0x3b409f(0x282)](0x2);if(_0x596cbf){if(Math[_0x3b409f(0x318)](_0x596cbf)<0.000001)_0x596cbf=_0x596cbf['toFixed'](0x2);else{if(Math['abs'](_0x596cbf)<0.1)_0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x6);else{if(Math['abs'](_0x596cbf)<0x1)_0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x5);else{if(Math[_0x3b409f(0x318)](_0x596cbf)<0xa)_0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x4);else{if(Math[_0x3b409f(0x318)](_0x596cbf)<0x64)_0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x3);else{if(Math[_0x3b409f(0x318)](_0x596cbf)<0x3e8)_0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x2);else _0x596cbf=_0x596cbf[_0x3b409f(0x282)](0x2);}}}}}}else _0x596cbf=Number('0')[_0x3b409f(0x282)](0x2);}else _0xe96824=Number('0')[_0x3b409f(0x282)](0x2);return{'value':_0x596cbf,'change':_0xe96824,'leftTxt':_0x427d30,'rightTxt':_0x11de15};}async function getStartingBalances(_0x443d9d,_0x4af335=!![]){const _0x5304e5=_0x478fd0;if(_0x443d9d['length']!==0x0){const [_0x20cc69,_0x481581,_0x4c2e67]=getPerf(_0x443d9d[0x0],!![]);let _0x2bf5b8=[];config[_0x5304e5(0x2fe)][_0x5304e5(0x20f)](_0xe1125=>{const _0x12a63c=_0x5304e5;let _0x223dae=0x0,_0x177698;config[_0x12a63c(0x2ad)][_0x12a63c(0x20f)](_0x43020b=>{const _0x284fbe=_0x12a63c;let _0x3bc0fb=_0x43020b[_0x284fbe(0x1dc)][_0x284fbe(0x223)](_0x5a0ba8=>_0x5a0ba8['coin']==_0xe1125['coin']);if(_0x3bc0fb){_0x223dae+=_0x3bc0fb['number'];if(!_0x177698)_0x177698=_0x3bc0fb[_0x284fbe(0x2c8)];}}),_0x2bf5b8[_0x12a63c(0x1d2)]({'coin':_0xe1125[_0x12a63c(0x349)],'number':_0x223dae,'initialprice':_0x177698});});const _0x26d276={'basecoin':_0x20cc69,'eur':_0x481581,'usd':_0x4c2e67,'coins':_0x2bf5b8};if(_0x4af335)proxyEmit(_0x5304e5(0x2db),_0x26d276);startingBalances=_0x26d276;}}async function headlessMode(_0x3ad9a6){const _0x1981aa=_0x478fd0;let _0xf26f2=_0x3ad9a6[_0x1981aa(0x2fe)],_0x739661=_0x3ad9a6[_0x1981aa(0x2fa)],_0x370d17=[];for(let _0x1de01f of _0xf26f2){if(_0x1de01f[_0x1981aa(0x349)]!=config['basecoin']){if(_0x1de01f[_0x1981aa(0x219)]>=_0x739661/0x64){if(_0x1de01f[_0x1981aa(0x1a1)])_0x370d17[_0x1981aa(0x1d2)](_0x1de01f);}else{if(_0x1de01f[_0x1981aa(0x219)]<=-_0x739661/0x64){if(_0x1de01f['valid'])_0x370d17[_0x1981aa(0x1d2)](_0x1de01f);}}}}let _0x678759=!![];if(_0x370d17[_0x1981aa(0x2cc)]>0x0){lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x370d17[_0x1981aa(0x20f)](_0x3a8a49=>{const _0x1d8da5=_0x1981aa;_0x3a8a49[_0x1d8da5(0x273)]!=prevAmountAtOrder[_0x3a8a49[_0x1d8da5(0x349)]]?logger[_0x1d8da5(0x201)](_0x1d8da5(0x241)+_0x3a8a49[_0x1d8da5(0x349)]+'\x20'+_0x3a8a49[_0x1d8da5(0x273)]+'\x20'+_0x3a8a49[_0x1d8da5(0x296)]+'\x20'+_0x3a8a49[_0x1d8da5(0x329)]+'%\x20'+_0x3a8a49[_0x1d8da5(0x235)]+'%\x20'+(0x64*_0x3a8a49[_0x1d8da5(0x219)])[_0x1d8da5(0x282)](0x2)+_0x1d8da5(0x2a9)+_0x739661[_0x1d8da5(0x282)](0x2)+'%)'):(logger[_0x1d8da5(0x201)](_0x1d8da5(0x226)+_0x3a8a49[_0x1d8da5(0x349)]+'\x20'+_0x3a8a49[_0x1d8da5(0x273)]+'\x20'+_0x3a8a49[_0x1d8da5(0x296)]+'\x20'+_0x3a8a49['distribution']+'%\x20'+_0x3a8a49[_0x1d8da5(0x235)]+'%\x20'+(0x64*_0x3a8a49['delta'])['toFixed'](0x2)+_0x1d8da5(0x2a9)+_0x739661[_0x1d8da5(0x282)](0x2)+'%)'),logger['debug']('Previous\x20amount\x20at\x20order\x20for\x20'+_0x3a8a49['coin']+':',prevAmountAtOrder[_0x3a8a49[_0x1d8da5(0x349)]]),_0x678759=![]);});if(_0x678759)placeOrder(_0x370d17);else{const _0x31fd1f=await getCoins();[currentCoins,currentCoinsAll]=_0x31fd1f;}}}function notifyBalance(_0x4f4542){const _0x142827=_0x478fd0;let _0x17ca8b=_0x4f4542[_0x142827(0x2fe)],_0x4868d1=_0x4f4542[_0x142827(0x2fa)],_0x166596=[];for(let _0x4c253b of _0x17ca8b){if(_0x4c253b['coin']!=config['basecoin']){if(_0x4c253b['delta']>=_0x4868d1/0x64){if(_0x4c253b['valid'])_0x166596[_0x142827(0x1d2)](_0x4c253b);}else{if(_0x4c253b['delta']<=-_0x4868d1/0x64){if(_0x4c253b['valid'])_0x166596['push'](_0x4c253b);}}}}if(_0x166596['length']>0x0){let _0x16a1f8=_0x166596[_0x142827(0x2d6)](_0x2cbaca=>_0x2cbaca[_0x142827(0x349)]);_0x16a1f8[_0x142827(0x1ca)]();let _0x15e2af=_0x16a1f8['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x142827(0x340),_0x142827(0x19b));lastCoinsToBalance=_0x15e2af;}}function symbolToCoin(_0x3df926){const _0x576cb8=_0x478fd0;let _0x4f3d83;if(_0x3df926[_0x576cb8(0x207)]('/'+config['basecoin']))_0x4f3d83=_0x3df926[_0x576cb8(0x286)]('/'+config[_0x576cb8(0x2fd)],'');if(_0x3df926[_0x576cb8(0x207)](config[_0x576cb8(0x2fd)]+'/'))_0x4f3d83=_0x3df926['replace'](config[_0x576cb8(0x2fd)]+'/','');return _0x4f3d83;}async function unlockOrders(){const _0x463744=_0x478fd0;if(allOrdersPlaced&&lockOrders==ORDERS[_0x463744(0x2fc)]){logger['debug'](_0x463744(0x290)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2a4035=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2a4035,setBlockTransactionDetection(![]),validateOrdersState=_0x463744(0x1a9),persistOpenOrders([]),lockOrders=ORDERS[_0x463744(0x300)],logger[_0x463744(0x201)](_0x463744(0x2a7));}}async function validateOrders(_0x3a054b){const _0x267d98=_0x478fd0;if(_0x3a054b)validateOrdersState=_0x3a054b;logger['debug'](_0x267d98(0x2af)+validateOrdersState+_0x267d98(0x2d5)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x267d98(0x2c9):'ORDERS.UNLOCKED'));let _0x39aa9f=[],_0xd92d6d=config[_0x267d98(0x1b5)]==_0x267d98(0x27d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x267d98(0x23c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x267d98(0x201)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x4ca5dd=>{const _0x1f1c4a=_0x267d98;let _0x185a47=![];_0x4ca5dd[_0x1f1c4a(0x256)]>0x0&&(_0x185a47=!![]),_0x39aa9f[_0x1f1c4a(0x1d2)](_0x185a47),_0x185a47&&config[_0x1f1c4a(0x1b5)]!='market'&&logHistory(_0x1f1c4a(0x1fe),_0x1f1c4a(0x27f)+_0x4ca5dd[_0x1f1c4a(0x294)]+'\x20'+_0x4ca5dd['side']+'\x20#'+formatResult(_0x4ca5dd[_0x1f1c4a(0x256)],0x8)+'\x20@'+formatResult(_0x4ca5dd['price'],0x8));}),_0x39aa9f[_0x267d98(0x20f)]((_0x2eca70,_0xfa2361)=>{if(_0x2eca70)lastOrders['splice'](_0xfa2361,0x1);}),persistOpenOrders(lastOrders);const _0x37ee19=coolingDown?_0x267d98(0x34a):_0x267d98(0x1f4);if(validateOrdersState==_0x267d98(0x1a9)){validateOrdersState=_0x267d98(0x305);if(_0x39aa9f['includes'](![])){if(config['ordertype']==_0x267d98(0x27d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x267d98(0x305)){if(_0x39aa9f[_0x267d98(0x207)](![])){}else{if(allOrdersPlaced){if(config[_0x267d98(0x1b5)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x267d98(0x272))_0x39aa9f[_0x267d98(0x207)](![])&&(config[_0x267d98(0x1b5)]==_0x267d98(0x27d)?logHistory(_0x267d98(0x232),_0x267d98(0x306)+Math[_0x267d98(0x1f6)](_0xd92d6d*validateOrderInterval/0xea60)+_0x267d98(0x339)+_0x37ee19):(await cancelOrders(),logHistory(_0x267d98(0x232),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0xd92d6d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x37ee19))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x267d98(0x1b5)]!=_0x267d98(0x27d))logHistory(_0x267d98(0x232),_0x267d98(0x259)+_0x37ee19);await unlockOrders();}}}}}async function cancelOrders(){const _0x47614f=_0x478fd0;lastOrders[_0x47614f(0x20f)](async _0x3403ac=>{const _0x50b563=_0x47614f;try{const _0x10423a=await exchange[_0x50b563(0x2a4)](_0x3403ac[_0x50b563(0x1b8)],_0x3403ac[_0x50b563(0x294)]);}catch(_0x56e283){if(_0x56e283[_0x50b563(0x2ed)]()[_0x50b563(0x207)]('OrderNotFound')){}else await handleError(_0x56e283,_0x50b563(0x20d));}});}async function initCoinResults(_0x6a8377){const _0x237543=_0x478fd0;_0x6a8377?logger[_0x237543(0x201)](_0x237543(0x198)+_0x6a8377):logger[_0x237543(0x201)](_0x237543(0x224)),config[_0x237543(0x2fe)][_0x237543(0x20f)](_0x4e67d0=>{const _0x50b4ff=_0x237543;if(!_0x4e67d0['excluded']&&_0x4e67d0[_0x50b4ff(0x349)]!=config[_0x50b4ff(0x2fd)]){const _0x3c0bd9=currentCoins[_0x50b4ff(0x223)](_0x4e93e2=>_0x4e93e2['coin']==_0x4e67d0[_0x50b4ff(0x349)]),_0x258f72=gTicker[noslash(_0x4e67d0[_0x50b4ff(0x294)])];let _0x46ed25=_0x3c0bd9?_0x3c0bd9['number']:null,_0x2f11ac=_0x4e67d0[_0x50b4ff(0x2a1)]?0x1/_0x258f72:_0x258f72,_0x21a730;config['liquidity'][_0x50b4ff(0x20f)](_0x2fcf7f=>{const _0x20aed3=_0x50b4ff;!_0x21a730&&(_0x21a730=_0x2fcf7f[_0x20aed3(0x1dc)][_0x20aed3(0x223)](_0x319316=>_0x319316[_0x20aed3(0x349)]==_0x4e67d0[_0x20aed3(0x349)]),_0x21a730&&(_0x46ed25=_0x21a730['number'],_0x2f11ac=_0x21a730['price']));});let _0xc4430c=dbCoinResults[_0x50b4ff(0x1ef)]('coins')[_0x50b4ff(0x223)]({'coin':_0x4e67d0[_0x50b4ff(0x349)]})[_0x50b4ff(0x247)]();if(!_0xc4430c){const _0x24b6e2={'coin':_0x4e67d0[_0x50b4ff(0x349)],'number':_0x46ed25,'breakeven':_0x2f11ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x50b4ff(0x19e))['push'](_0x24b6e2)['write']();}else{if(_0x6a8377&&_0x4e67d0[_0x50b4ff(0x349)]==_0x6a8377){const _0x4170f6={'coin':_0x4e67d0['coin'],'number':_0x46ed25,'breakeven':_0x2f11ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x50b4ff(0x1ef)](_0x50b4ff(0x19e))['find']({'coin':_0x4e67d0['coin']})[_0x50b4ff(0x2ee)](_0x4170f6)[_0x50b4ff(0x21c)]();}}}});}async function updateCoinResults(_0x2270ce,_0x43641c=![]){const _0x8af405=_0x478fd0;let _0x520886,_0x38b245,_0xfa9171,_0x4d48cb,_0x97e42a,_0x20d5be,_0x11eb7e=dbCoinResults[_0x8af405(0x1ef)](_0x8af405(0x19e))['find']({'coin':_0x2270ce[_0x8af405(0x349)]})[_0x8af405(0x247)](),_0x191d15=![];_0x11eb7e&&Object[_0x8af405(0x343)](_0x11eb7e)[_0x8af405(0x20f)](([_0x50fc0c,_0x9ce2a0])=>{if(_0x9ce2a0==null)_0x191d15=!![];});(!_0x11eb7e||_0x191d15)&&(await initCoinResults(_0x2270ce[_0x8af405(0x349)]),_0x11eb7e=dbCoinResults[_0x8af405(0x1ef)](_0x8af405(0x19e))[_0x8af405(0x223)]({'coin':_0x2270ce[_0x8af405(0x349)]})[_0x8af405(0x247)]());_0x2270ce[_0x8af405(0x2a1)]&&(_0x20d5be={'filled':_0x2270ce[_0x8af405(0x256)]*_0x2270ce['price'],'amount':_0x2270ce[_0x8af405(0x256)]*_0x2270ce[_0x8af405(0x2c8)],'side':_0x2270ce[_0x8af405(0x302)]==_0x8af405(0x2c5)?_0x8af405(0x2e9):'sell','price':0x1/_0x2270ce['price']},_0x2270ce={..._0x2270ce,..._0x20d5be});_0x43641c?_0x38b245=_0x2270ce[_0x8af405(0x302)]==_0x8af405(0x2e9)?_0x11eb7e['number']+_0x2270ce['filled']:_0x11eb7e[_0x8af405(0x273)]-_0x2270ce[_0x8af405(0x256)]:_0x38b245=await getCoinNumber(_0x2270ce['coin']);if(_0x2270ce[_0x8af405(0x2b3)]&&_0x2270ce[_0x8af405(0x2b3)]['currency']==config[_0x8af405(0x2fd)])_0x520886=Number(_0x2270ce[_0x8af405(0x2b3)][_0x8af405(0x26b)]);else{if(_0x2270ce[_0x8af405(0x2b3)]&&_0x2270ce[_0x8af405(0x2b3)][_0x8af405(0x28d)]=='BNB'&&!_0x43641c&&config['basecoin']!=_0x8af405(0x1e7))_0x520886=Number(_0x2270ce['fee'][_0x8af405(0x26b)])*gTicker['BNB'+config['basecoin']];else _0x520886=defaultFee*_0x2270ce[_0x8af405(0x256)]*_0x2270ce[_0x8af405(0x2c8)];}_0x2270ce['side']==_0x8af405(0x2e9)?(_0xfa9171=_0x38b245!=0x0?(_0x11eb7e[_0x8af405(0x1c1)]*_0x11eb7e[_0x8af405(0x273)]+_0x2270ce[_0x8af405(0x2c8)]*(_0x38b245-_0x11eb7e[_0x8af405(0x273)])+_0x520886)/_0x38b245:0x0,_0x4d48cb=_0x11eb7e['realized']):(_0xfa9171=_0x38b245!=0x0?(_0x11eb7e['breakeven']*_0x11eb7e[_0x8af405(0x273)]-_0x2270ce['price']*(_0x11eb7e[_0x8af405(0x273)]-_0x38b245)+_0x520886)/_0x38b245:0x0,_0x4d48cb=_0x11eb7e[_0x8af405(0x2b1)]+(_0x2270ce[_0x8af405(0x2c8)]-_0x11eb7e[_0x8af405(0x1c1)])*_0x2270ce[_0x8af405(0x256)]);_0x97e42a=(_0x2270ce[_0x8af405(0x2c8)]-_0xfa9171-_0x520886/_0x2270ce[_0x8af405(0x256)])*_0x38b245;let _0x5d9c0e={'coin':_0x2270ce[_0x8af405(0x349)],'number':_0x38b245,'breakeven':formatResult(_0xfa9171,0x8),'realized':formatResult(_0x4d48cb,0x8),'unrealized':formatResult(_0x97e42a,0x8),'fees':formatResult(_0x11eb7e['fees']+_0x520886,0x8),'sells':_0x2270ce['side']==_0x8af405(0x2c5)?_0x11eb7e[_0x8af405(0x1d1)]+0x1:_0x11eb7e[_0x8af405(0x1d1)],'buys':_0x2270ce[_0x8af405(0x302)]==_0x8af405(0x2e9)?_0x11eb7e[_0x8af405(0x1db)]+0x1:_0x11eb7e['buys']};dbCoinResults[_0x8af405(0x1ef)](_0x8af405(0x19e))['find']({'coin':_0x2270ce['coin']})['assign'](_0x5d9c0e)[_0x8af405(0x21c)]();if(!_0x43641c){if(_0x2270ce[_0x8af405(0x2b3)]&&_0x2270ce[_0x8af405(0x2b3)][_0x8af405(0x28d)]==_0x8af405(0x24c)){const _0x4f25ea=currentCoins[_0x8af405(0x223)](_0x230bff=>_0x230bff['coin']==_0x8af405(0x24c));if(_0x4f25ea){let _0x308b4a=dbCoinResults[_0x8af405(0x1ef)](_0x8af405(0x19e))[_0x8af405(0x223)]({'coin':_0x8af405(0x24c)})[_0x8af405(0x247)]();_0x5d9c0e={..._0x308b4a,'number':_0x4f25ea[_0x8af405(0x273)]},dbCoinResults[_0x8af405(0x1ef)](_0x8af405(0x19e))['find']({'coin':_0x8af405(0x24c)})[_0x8af405(0x2ee)](_0x5d9c0e)[_0x8af405(0x21c)]();}}}}async function placeOrder(_0x5ded45){const _0x26fef7=_0x478fd0,_0xb8fd54=config[_0x26fef7(0x1b5)]==_0x26fef7(0x27d)?_0x26fef7(0x27d):_0x26fef7(0x1d4);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x26fef7(0x1a9);let _0x1a0c03=![];lastOrders=[];for(const _0x6a1d51 of _0x5ded45){let _0x50f654,_0x1b7a91,_0x2a6771,_0x4934cc,_0x5cb482,_0x142a39=_0x6a1d51['symbol'];try{const _0x646205=await exchange[_0x26fef7(0x211)](_0x142a39);_0x50f654=_0x6a1d51['reverse']?0x1/_0x6a1d51[_0x26fef7(0x296)]:_0x6a1d51[_0x26fef7(0x296)],_0x1b7a91=_0x646205[_0x26fef7(0x29e)],_0x2a6771=_0x646205[_0x26fef7(0x2c0)];_0x6a1d51[_0x26fef7(0x2a1)]?(_0x4934cc=_0x6a1d51['side']==_0x26fef7(0x2e9)?'sell':_0x26fef7(0x2e9),_0x5cb482=Math[_0x26fef7(0x318)](_0x6a1d51['trade'])/_0x50f654):(_0x4934cc=_0x6a1d51[_0x26fef7(0x302)],_0x5cb482=Math[_0x26fef7(0x318)](_0x6a1d51[_0x26fef7(0x1b1)]));_0xb8fd54==_0x26fef7(0x1d4)&&(config[_0x26fef7(0x1b5)]=='limit-high'&&(_0x50f654=_0x4934cc==_0x26fef7(0x2e9)?_0x1b7a91:_0x2a6771),config[_0x26fef7(0x1b5)]==_0x26fef7(0x2b8)&&(_0x50f654=_0x4934cc==_0x26fef7(0x2e9)?_0x2a6771:_0x1b7a91));_0x5cb482=formatResult(_0x5cb482,0x8),_0x50f654=formatResult(_0x50f654,0x8);const _0x36a99e=_0x4934cc=='sell'?config[_0x26fef7(0x230)]?String['fromCodePoint']('0x'+config[_0x26fef7(0x230)])+'\x20':'':config[_0x26fef7(0x2bc)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0xe2664f=_0xb8fd54==_0x26fef7(0x27d)?_0x26fef7(0x1b3):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x26fef7(0x1f8),_0x5b8873=(Math['floor'](Math[_0x26fef7(0x268)]()*0x35a4e900)+0x5f5e100)[_0x26fef7(0x2ed)]();lastOrders[_0x26fef7(0x1d2)]({'customId':_0x5b8873,'symbol':_0x142a39,'coin':_0x6a1d51[_0x26fef7(0x349)],'amount':_0x5cb482,'price':_0x50f654,'side':_0x4934cc,'reverse':_0x6a1d51[_0x26fef7(0x2a1)],'filled':0x0});if(_0xb8fd54==_0x26fef7(0x27d))logHistory('order',''+_0x36a99e+_0xe2664f+'\x20order:\x20'+_0x142a39+'\x20'+_0x4934cc+'\x20#'+formatResult(_0x5cb482,0x8)+'\x20@'+formatResult(_0x50f654,0x8));else logHistory('order',''+_0x36a99e+_0xe2664f+_0x26fef7(0x263)+_0x142a39+'\x20'+_0x4934cc+'\x20#'+formatResult(_0x5cb482,0x8)+'\x20@'+formatResult(_0x50f654,0x8));let _0x2eb807;_0xb8fd54==_0x26fef7(0x27d)?_0x4934cc==_0x26fef7(0x2e9)&&[_0x26fef7(0x243),'Bitget','Cex',_0x26fef7(0x264),'Huobipro']['includes'](config['exchange'])?_0x2eb807=await exchange['createOrder'](_0x142a39,_0xb8fd54,_0x4934cc,_0x5cb482,_0x50f654):_0x2eb807=await exchange[_0x26fef7(0x216)](_0x142a39,_0xb8fd54,_0x4934cc,_0x5cb482,undefined):_0x2eb807=await exchange[_0x26fef7(0x216)](_0x142a39,_0xb8fd54,_0x4934cc,_0x5cb482,_0x50f654);prevAmountAtOrder[_0x6a1d51[_0x26fef7(0x349)]]=_0x6a1d51[_0x26fef7(0x273)],logger['debug']('ID:\x20'+_0x2eb807['id']+_0x26fef7(0x2ae)+_0x5b8873);const _0x44d01e=lastOrders[_0x26fef7(0x2cc)]-0x1;if(_0x44d01e>=0x0&&lastOrders[_0x44d01e][_0x26fef7(0x188)]==_0x5b8873){lastOrders[_0x44d01e]['orderId']=_0x2eb807['id'];if(_0x2eb807[_0x26fef7(0x25e)])lastOrders[_0x44d01e][_0x26fef7(0x25e)]=_0x2eb807[_0x26fef7(0x25e)];if(_0x2eb807[_0x26fef7(0x2c8)])lastOrders[_0x44d01e]['price']=_0x2eb807['price'];lastOrders[_0x44d01e][_0x26fef7(0x2b3)]=_0x2eb807[_0x26fef7(0x2b3)];}if(config[_0x26fef7(0x199)]!=0x0){let _0x1955f2=null;if(cooldownTracker[_0x26fef7(0x2cc)]==config['cooldown']-0x1)_0x1955f2=cooldownTracker['shift']();const _0x23efd6=getTimeStamp();cooldownTracker[_0x26fef7(0x1d2)](_0x23efd6);if(_0x1955f2){const _0x368958=fns[_0x26fef7(0x26c)](new Date(_0x23efd6),new Date(_0x1955f2));if(_0x368958<cooldownInterval){logHistory('error',_0x26fef7(0x1f0)+config[_0x26fef7(0x199)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x26fef7(0x1bd)+cooldownPeriod/(0xe10*0x3e8)+_0x26fef7(0x196)),coolingDown=!![];break;}}}}catch(_0x1100e1){if(_0x1100e1['toString']()[_0x26fef7(0x207)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x26fef7(0x2ce)](_0x20ed92=>_0x20ed92[_0x26fef7(0x294)]!=_0x142a39),logHistory(_0x26fef7(0x20e),_0x26fef7(0x298)+_0x142a39),_0x1a0c03=!![];else{if(_0x1100e1[_0x26fef7(0x2ed)]()[_0x26fef7(0x207)](_0x26fef7(0x275)))lastOrders=lastOrders[_0x26fef7(0x2ce)](_0x4f702e=>_0x4f702e[_0x26fef7(0x294)]!=_0x142a39),logHistory(_0x26fef7(0x20e),_0x26fef7(0x1d0)+_0x142a39),_0x1a0c03=!![];else{if(_0x1100e1[_0x26fef7(0x2ed)]()[_0x26fef7(0x207)](_0x26fef7(0x213)))lastOrders=lastOrders[_0x26fef7(0x2ce)](_0x5b21b7=>_0x5b21b7[_0x26fef7(0x294)]!=_0x142a39),logHistory(_0x26fef7(0x20e),_0x26fef7(0x33e)+_0x142a39),logger[_0x26fef7(0x201)](_0x1100e1),_0x1a0c03=!![];else _0x1100e1[_0x26fef7(0x2ed)]()[_0x26fef7(0x207)](_0x26fef7(0x1a8))?(lastOrders=lastOrders[_0x26fef7(0x2ce)](_0x43d9d3=>_0x43d9d3['symbol']!=_0x142a39),logHistory(_0x26fef7(0x20e),_0x26fef7(0x298)+_0x142a39),_0x1a0c03=!![]):(lastOrders=lastOrders[_0x26fef7(0x2ce)](_0x4be444=>_0x4be444['symbol']!=_0x142a39),await handleError(_0x1100e1,_0x26fef7(0x2fb),_0x142a39));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x544eda=config[_0x26fef7(0x1b5)]==_0x26fef7(0x27d)?validateOrderTimeout*0x3c*0x3e8:config[_0x26fef7(0x23c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xbeef9d=_0x26fef7;validateOrders(_0xbeef9d(0x272));},_0x544eda);}else unlockOrders();_0x1a0c03&&config[_0x26fef7(0x1ba)]&&(logHistory(_0x26fef7(0x20e),_0x26fef7(0x1da)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x26fef7(0x344)));}else{if(coolingDown)!config[_0x26fef7(0x1ba)]&&logHistory('error',_0x26fef7(0x261));else lockOrders!=ORDERS[_0x26fef7(0x300)]&&(!config[_0x26fef7(0x1ba)]&&(config['ordertype']==_0x26fef7(0x27d)?logHistory('error',_0x26fef7(0x334)):logHistory(_0x26fef7(0x20e),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x59aeec){const _0x164238=_0x478fd0,_0x378c89={...config,'openOrders':_0x59aeec};let _0x5fe8fa=dbConfig[_0x164238(0x1ef)](_0x164238(0x22f))[_0x164238(0x223)]({'botID':botID})[_0x164238(0x247)]();_0x5fe8fa&&dbConfig[_0x164238(0x1ef)](_0x164238(0x22f))[_0x164238(0x223)]({'botID':botID})[_0x164238(0x2ee)](_0x378c89)[_0x164238(0x21c)]();}function restoreOrders(){const _0x4297ab=_0x478fd0;let _0x893cd3;config[_0x4297ab(0x21e)]&&allOpenOrders[_0x4297ab(0x20f)](_0x19b691=>{const _0x11ce9e=_0x4297ab,_0x2d17e7=config['openOrders'][_0x11ce9e(0x223)](_0xbdfcf5=>_0xbdfcf5[_0x11ce9e(0x1b8)]==_0x19b691['id']);_0x2d17e7&&(lastOrders[_0x11ce9e(0x1d2)](_0x2d17e7),_0x893cd3=_0x19b691[_0x11ce9e(0x309)]);});if(lastOrders[_0x4297ab(0x2cc)]>0x0){lockOrders=ORDERS[_0x4297ab(0x2fc)],validateOrdersState=_0x4297ab(0x305),allOrdersPlaced=!![];const _0x462b1c=new Date()[_0x4297ab(0x284)](),_0x15cd8b=config[_0x4297ab(0x1b5)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x893cd3+_0x15cd8b>_0x462b1c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x45fd02=_0x4297ab;validateOrders(_0x45fd02(0x272));},_0x893cd3+_0x15cd8b-_0x462b1c);}else validateOrders(_0x4297ab(0x272));}}async function sendMetricsTelegram(){const _0x497205=_0x478fd0;if(!coinsLoaded){process[_0x497205(0x245)]({'telegrammsg':_0x497205(0x2ea)},_0x1e955a=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4dde1f='';if(config[_0x497205(0x311)])_0x4dde1f='<b>'+config['botname']+_0x497205(0x1cf);else _0x4dde1f=_0x497205(0x1a6)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4e27e2=getKPIs(_0x497205(0x2fd)),_0x97247f=getKPIs(_0x497205(0x22b),config['fiat']),_0x13ed55=getKPIs('net-basecoin'),_0x55d431=getKPIs(_0x497205(0x2bb),config[_0x497205(0x22b)]);_0x4dde1f+='<pre>',_0x4dde1f+=_0x4e27e2[_0x497205(0x2b0)]+_0x497205(0x336)+_0x4e27e2[_0x497205(0x247)]+'\x0a',_0x4dde1f+=_0x4e27e2[_0x497205(0x337)]+':\x20'+_0x4e27e2[_0x497205(0x29d)]+'%\x0a',_0x4dde1f+=_0x97247f[_0x497205(0x2b0)]+_0x497205(0x336)+_0x97247f[_0x497205(0x247)]+'\x0a',_0x4dde1f+=_0x97247f[_0x497205(0x337)]+':\x20'+_0x97247f[_0x497205(0x29d)]+'%\x0a',_0x4dde1f+=_0x13ed55[_0x497205(0x2b0)]+':\x20'+_0x13ed55[_0x497205(0x247)]+'\x20('+config['basecoin']+')\x0a',_0x4dde1f+=_0x13ed55[_0x497205(0x337)]+':\x20'+_0x13ed55[_0x497205(0x29d)]+_0x497205(0x2a9)+config[_0x497205(0x2fd)]+')\x0a',_0x4dde1f+=_0x55d431['leftTxt']+':\x20'+_0x55d431[_0x497205(0x247)]+'\x20('+config[_0x497205(0x22b)]+')\x0a',_0x4dde1f+=_0x55d431['rightTxt']+':\x20'+_0x55d431['change']+'%\x20('+config[_0x497205(0x22b)]+')\x0a',_0x4dde1f+='</pre>',process[_0x497205(0x245)]({'telegrammsg':_0x4dde1f},_0x260537=>{});}async function sendPortfolioTelegram(){const _0x3af122=_0x478fd0;if(!coinsLoaded||!currentCoins[0x0][_0x3af122(0x329)]){process[_0x3af122(0x245)]({'telegrammsg':_0x3af122(0x2ea)},_0x23bded=>{});return;}let _0x516759='';if(config['showname'])_0x516759=_0x3af122(0x194)+config[_0x3af122(0x18b)]+_0x3af122(0x26f);else _0x516759=_0x3af122(0x1a6)+botID+_0x3af122(0x26f);_0x516759+=_0x3af122(0x1eb),_0x516759+=_0x3af122(0x307),_0x516759+=_0x3af122(0x28c),_0x516759+=_0x3af122(0x307),currentCoins[_0x3af122(0x20f)](_0x5e4f69=>{const _0x296335=_0x3af122;_0x516759+=_0x5e4f69[_0x296335(0x349)][_0x296335(0x187)](0x7)+'|\x20'+formatPad(_0x5e4f69[_0x296335(0x329)],0x2,0x6)+'|\x20'+formatPad(_0x5e4f69[_0x296335(0x235)],0x2,0x6)+'|\x20'+formatPad(_0x5e4f69[_0x296335(0x219)]*0x64,0x2,0x6)+'\x0a';}),_0x516759+=_0x3af122(0x1f1),process[_0x3af122(0x245)]({'telegrammsg':_0x516759},_0x3afe49=>{});}function formatPad(_0x2aa84f,_0x1ce879,_0x1ec2cd){const _0x2a36aa=_0x478fd0,_0x381a59=formatResultString(_0x2aa84f,_0x1ce879);return _0x381a59?_0x381a59['padStart'](_0x1ec2cd):''[_0x2a36aa(0x244)](_0x1ec2cd);}function logHistory(_0x1caa24,_0x40ed43,_0x163ebc=''){const _0x388bb7=_0x478fd0;logger[_0x388bb7(0x1dd)](''+_0x40ed43);let _0x5d51c7={'time':getTimeStamp(),'type':_0x1caa24,'event':_0x40ed43};dbLogs[_0x388bb7(0x1ef)](_0x388bb7(0x1a5))['push'](_0x5d51c7)[_0x388bb7(0x21c)]();if(_0x163ebc=='')_0x163ebc=_0x40ed43;proxyEmit('event',{'log':_0x5d51c7,'summary':_0x163ebc}),process['send']({'telegram':{..._0x5d51c7,'botname':config['botname'],'showname':config[_0x388bb7(0x311)]}},_0x85140f=>{});}function emitHistory(_0x4a49f2={}){const _0x19947d=_0x478fd0;Object['keys'](_0x4a49f2)[_0x19947d(0x2cc)]==0x0&&(_0x4a49f2={'type':[_0x19947d(0x1fe),_0x19947d(0x23d)],'event':'','page':0x1});if(_0x4a49f2[_0x19947d(0x308)]['includes']('event'))_0x4a49f2['type'][_0x19947d(0x346)](_0x4a49f2[_0x19947d(0x308)]['indexOf']('event'),0x1,_0x19947d(0x20e),_0x19947d(0x340),_0x19947d(0x232));if(dbLogs[_0x19947d(0x33b)](_0x19947d(0x1a5))['value']()){let _0x484268=dbLogs[_0x19947d(0x1ef)](_0x19947d(0x1a5))[_0x19947d(0x2ce)](_0x356a4e=>{const _0x487c83=_0x19947d;if(_0x4a49f2[_0x487c83(0x308)][_0x487c83(0x2cc)]==0x0)return![];else return _0x4a49f2[_0x487c83(0x308)]['includes'](_0x356a4e[_0x487c83(0x308)]);})[_0x19947d(0x2ce)](_0x271ffb=>{const _0x91eab3=_0x19947d;if(_0x4a49f2[_0x91eab3(0x23d)]=='')return!![];else return _0x271ffb[_0x91eab3(0x23d)][_0x91eab3(0x27b)]()[_0x91eab3(0x207)](_0x4a49f2[_0x91eab3(0x23d)][_0x91eab3(0x27b)]());})[_0x19947d(0x2c6)](_0x19947d(0x1e1)),_0x173fde=_0x484268[_0x19947d(0x247)]()['length'];_0x484268=_0x484268['reverse']()[_0x19947d(0x2de)]((_0x4a49f2['page']-0x1)*logPageSize,_0x4a49f2[_0x19947d(0x2cf)]*logPageSize-0x1)[_0x19947d(0x2a1)]()[_0x19947d(0x247)](),proxyEmit(_0x19947d(0x1c6),{'logs':_0x484268,'total':_0x173fde});}else proxyEmit(_0x19947d(0x1c6),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x494523){const _0x759dc5=_0x478fd0;if(dbLogs[_0x759dc5(0x33b)]('logs')[_0x759dc5(0x247)]()){const _0x26b541=dbLogs[_0x759dc5(0x1ef)](_0x759dc5(0x1a5))[_0x759dc5(0x2c6)](_0x759dc5(0x1e1))[_0x759dc5(0x2ce)](_0x51e67b=>{const _0x532045=_0x759dc5;return _0x51e67b['type']==_0x532045(0x1fe);})[_0x759dc5(0x247)]();dbLogs[_0x759dc5(0x1ef)](_0x759dc5(0x1a5))[_0x759dc5(0x32b)]()['write'](),dbLogs['get'](_0x759dc5(0x1a5))[_0x759dc5(0x2ee)](_0x26b541)[_0x759dc5(0x21c)](),emitHistory(_0x494523);}}async function pauseBot(_0x31c721=pauseBotIntervalShort,_0x49f31a,_0x4159ed,_0x1bf1f5=![]){const _0xd9e59=_0x478fd0,_0x277e77=new Date()[_0xd9e59(0x284)]();if(!lastErrorShown||_0x277e77-lastErrorShown>=_0x31c721){lastErrorShown=_0x277e77;if(!lastBotPause)lastBotPause=_0x277e77,consecutivePauses=0x1;else{if(_0x277e77-lastBotPause-_0x31c721<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1bf1f5){logHistory('error',_0x49f31a+_0xd9e59(0x19f)),await killBot();return;}else logHistory(_0xd9e59(0x20e),_0x49f31a+pauseBotMsg),_0x31c721=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x277e77;}_0x4159ed?logger[_0xd9e59(0x201)]('('+consecutivePauses+')\x20'+_0x49f31a+_0xd9e59(0x2d9),_0x4159ed):logger[_0xd9e59(0x201)]('('+consecutivePauses+')\x20'+_0x49f31a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x31c721),botPaused=![],_0x31c721==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x32dec6=_0x478fd0;botPaused=!![],await sleep(0x3e8),process[_0x32dec6(0x245)]({'stop':_0x32dec6(0x1d8)},_0x4f0331=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xe39891,_0x191f5d){const _0x5c7492=_0x478fd0;if(botPaused)return;const _0x1d6bd5=config[_0x5c7492(0x257)]||_0x5c7492(0x1bc);if(_0x191f5d)logger[_0x5c7492(0x201)]('Exception\x20thrown\x20in\x20'+_0x191f5d);const _0x189d8a=()=>{const _0x4b134c=_0x5c7492;loading[_0x4b134c(0x20e)]=!![],emitLoadingProgress();};if(_0xe39891[_0x5c7492(0x2ed)]()[_0x5c7492(0x207)](_0x5c7492(0x1e4)))logHistory('error',_0x1d6bd5+_0x5c7492(0x2d1)),_0x189d8a();else{if(_0xe39891['toString']()[_0x5c7492(0x207)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5c7492(0x20e),_0x1d6bd5+_0x5c7492(0x29a)),_0x189d8a();else _0xe39891[_0x5c7492(0x2ed)]()['includes'](_0x5c7492(0x1cb))?(logHistory(_0x5c7492(0x20e),_0x1d6bd5+_0x5c7492(0x2aa)),logHistory('error',_0x5c7492(0x193)),_0x189d8a()):await handleError(_0xe39891,null);}}async function handleError(_0xdf8e2e,_0x2608cb,_0x2af286=''){const _0x129396=_0x478fd0;if(botPaused)return;let _0x3abe0a;const _0x436d55=config['exchange']||_0x129396(0x1bc);if(_0x2608cb)logger['debug'](_0x129396(0x1fc)+_0x2608cb);if(_0xdf8e2e['toString']()[_0x129396(0x207)](_0x129396(0x276)))_0x3abe0a=_0x436d55+_0x129396(0x209),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e);else{if(_0xdf8e2e['toString']()[_0x129396(0x207)](_0x129396(0x328)))_0x3abe0a=_0x436d55+_0x129396(0x217),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e);else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x2cb))||_0xdf8e2e[_0x129396(0x2ed)]()['includes'](_0x129396(0x2a5)))_0x3abe0a=_0x436d55+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x3abe0a,_0xdf8e2e['toString']());else{if(_0xdf8e2e[_0x129396(0x2ed)]()['includes']('RequestTimeout'))_0x3abe0a=_0x436d55+_0x129396(0x29b),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e[_0x129396(0x2ed)]());else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x2bf)))_0x3abe0a=_0x436d55+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x3abe0a,_0xdf8e2e[_0x129396(0x2ed)]());else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x27b)]()[_0x129396(0x207)](_0x129396(0x309))||_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x27b)]()[_0x129396(0x207)](_0x129396(0x1e8)))_0x3abe0a=_0x129396(0x1fd),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e[_0x129396(0x2ed)]());else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x324)))_0x3abe0a=_0x436d55+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x3abe0a,_0xdf8e2e[_0x129396(0x2ed)]());else{if(_0xdf8e2e instanceof ccxt[_0x129396(0x249)])_0x3abe0a=_0x436d55+_0x129396(0x28b)+_0xdf8e2e['toString'](),logger[_0x129396(0x201)](_0x129396(0x221),_0xdf8e2e),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e);else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)]('API-key\x20format\x20invalid'))logHistory(_0x129396(0x20e),_0x436d55+_0x129396(0x1af)),logHistory(_0x129396(0x20e),_0x129396(0x33d)),await killBot();else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x129396(0x20e),_0x436d55+_0x129396(0x32d)),logHistory(_0x129396(0x20e),_0x129396(0x33d)),await killBot();else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x1cb))&&_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x23e)))_0x3abe0a=_0x436d55+_0x129396(0x1ff),await pauseBot(undefined,_0x3abe0a,_0xdf8e2e,!![]);else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)]('AuthenticationError'))config[_0x129396(0x251)]?_0x3abe0a=_0x436d55+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x3abe0a=_0x436d55+_0x129396(0x2ca),logHistory(_0x129396(0x20e),_0x3abe0a),logHistory('error',_0x129396(0x33d)),await killBot();else{if(_0xdf8e2e[_0x129396(0x2ed)]()['includes'](_0x129396(0x1e6)))logHistory(_0x129396(0x20e),_0x436d55+_0x129396(0x265)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0xdf8e2e[_0x129396(0x2ed)]()[_0x129396(0x207)](_0x129396(0x1ad)))logHistory(_0x129396(0x20e),_0x129396(0x25c)+_0x2af286);else{if(_0xdf8e2e instanceof ccxt[_0x129396(0x220)]){_0x3abe0a=_0x436d55+_0x129396(0x2e8)+_0xdf8e2e[_0x129396(0x2ed)](),logHistory(_0x129396(0x20e),_0x3abe0a),logger[_0x129396(0x201)](_0x129396(0x29c),_0xdf8e2e);if(_0x2af286)logger[_0x129396(0x201)]('Symbol(s):\x20'+_0x2af286);await pauseBot(undefined,_0x3abe0a,_0xdf8e2e);}else{_0x3abe0a='Unknown\x20error:\x20'+_0xdf8e2e['toString'](),logHistory(_0x129396(0x20e),_0x3abe0a),logger[_0x129396(0x201)](_0x3abe0a+_0x129396(0x2d9),_0xdf8e2e);if(_0x2af286)logger['debug'](_0x129396(0x2e7)+_0x2af286);await pauseBot(undefined,_0x3abe0a);}}}}}}}}}}}}}}}}function decryptRSA(_0x1c7bfc,_0x46b249){const _0x1b773f=_0x478fd0,_0x35bb30=forge[_0x1b773f(0x1e3)]['privateKeyFromPem'](_0x1c7bfc),_0x14b791=_0x35bb30[_0x1b773f(0x2b9)](forge[_0x1b773f(0x2e2)][_0x1b773f(0x333)](_0x46b249),_0x1b773f(0x18f),{'md':forge['md'][_0x1b773f(0x1ed)]['create'](),'mgf1':{'md':forge['md']['sha256'][_0x1b773f(0x303)]()}});return _0x14b791;}async function withRetry(_0x106d46,_0x5b9511){const _0x44a13d=_0x478fd0;let _0x1dd202=![],_0x54b85c=0x0,_0x3d5159,_0x51fbce;while(_0x54b85c<maxRetries){try{_0x3d5159=await _0x5b9511();break;}catch(_0xd47254){_0x51fbce=_0xd47254,!_0x1dd202?(_0x1dd202=!![],logger[_0x44a13d(0x201)](_0x44a13d(0x316)+_0x106d46+':',_0xd47254['toString']())):await sleep(retryInterval);}_0x54b85c++;}if(_0x54b85c==0x0)return _0x3d5159;if(_0x54b85c>=maxRetries)throw _0x51fbce;else return logger['debug'](_0x44a13d(0x242)+_0x54b85c+_0x44a13d(0x27a)),_0x3d5159;}function formatResult(_0x3cc009,_0x9e6c5d){const _0x3b57bd=_0x478fd0;return parseFloat(_0x3cc009[_0x3b57bd(0x282)](_0x9e6c5d));}function formatResultTruncate(_0x1d73d4,_0x1df2bc){const _0x2eb8a7=_0x478fd0;let _0x5440a0=formatResultString(_0x1d73d4,0xa),_0x352870=_0x5440a0[_0x2eb8a7(0x271)]('.');return _0x352870!=-0x1&&(_0x5440a0=_0x5440a0[_0x2eb8a7(0x2de)](0x0,_0x352870+_0x1df2bc+0x1)),Number(_0x5440a0);}function formatResultString(_0x7f135,_0x5f8b0d){const _0x2ce447=_0x478fd0;let _0x1c6bbb;if(!(''+_0x7f135)[_0x2ce447(0x207)]('e'))_0x1c6bbb=+(Math['round'](_0x7f135+'e+'+_0x5f8b0d)+'e-'+_0x5f8b0d);else{let _0x5415eb=(''+_0x7f135)[_0x2ce447(0x342)]('e'),_0x223d19='';+_0x5415eb[0x1]+_0x5f8b0d>0x0&&(_0x223d19='+'),_0x1c6bbb=+(Math[_0x2ce447(0x1f6)](+_0x5415eb[0x0]+'e'+_0x223d19+(+_0x5415eb[0x1]+_0x5f8b0d))+'e-'+_0x5f8b0d);}return Number(_0x1c6bbb)[_0x2ce447(0x282)](_0x5f8b0d);}function _0x4cc8(_0x11e952,_0x8e5706){const _0xe8451b=_0x37b4();return _0x4cc8=function(_0x4362f4,_0x9b3e7a){_0x4362f4=_0x4362f4-0x187;let _0x37b4f5=_0xe8451b[_0x4362f4];return _0x37b4f5;},_0x4cc8(_0x11e952,_0x8e5706);}function getServerTime(){const _0xcce1d=_0x478fd0,_0x42673d=new Date();return _0x42673d[_0xcce1d(0x1ec)]()+'/'+(_0x42673d[_0xcce1d(0x1fb)]()+0x1)[_0xcce1d(0x2ed)]()['padStart'](0x2,'0')+'/'+_0x42673d[_0xcce1d(0x2c4)]()['toString']()[_0xcce1d(0x244)](0x2,'0')+'\x20'+_0x42673d[_0xcce1d(0x239)]()[_0xcce1d(0x2ed)]()[_0xcce1d(0x244)](0x2,'0')+':'+_0x42673d[_0xcce1d(0x2d2)]()[_0xcce1d(0x2ed)]()['padStart'](0x2,'0')+':'+_0x42673d[_0xcce1d(0x295)]()[_0xcce1d(0x2ed)]()[_0xcce1d(0x244)](0x2,'0');}function getTimeStamp(){const _0x3e3ebd=_0x478fd0,_0x39c162=shiftedTime();return _0x39c162[_0x3e3ebd(0x1ec)]()+'/'+(_0x39c162['getMonth']()+0x1)[_0x3e3ebd(0x2ed)]()['padStart'](0x2,'0')+'/'+_0x39c162[_0x3e3ebd(0x2c4)]()[_0x3e3ebd(0x2ed)]()['padStart'](0x2,'0')+'\x20'+_0x39c162[_0x3e3ebd(0x239)]()[_0x3e3ebd(0x2ed)]()['padStart'](0x2,'0')+':'+_0x39c162[_0x3e3ebd(0x2d2)]()[_0x3e3ebd(0x2ed)]()[_0x3e3ebd(0x244)](0x2,'0')+':'+_0x39c162['getSeconds']()[_0x3e3ebd(0x2ed)]()[_0x3e3ebd(0x244)](0x2,'0');}function getDate(){const _0x1e343d=_0x478fd0,_0x1be765=shiftedTime();return _0x1be765[_0x1e343d(0x1ec)]()+'/'+(_0x1be765[_0x1e343d(0x1fb)]()+0x1)[_0x1e343d(0x2ed)]()['padStart'](0x2,'0')+'/'+_0x1be765['getDate']()[_0x1e343d(0x2ed)]()[_0x1e343d(0x244)](0x2,'0');}function getHour(){const _0x1baa20=_0x478fd0,_0x477e81=shiftedTime();return _0x477e81['getHours']()['toString']()[_0x1baa20(0x244)](0x2,'0');}function sleep(_0x22e918){return new Promise(_0x557663=>setTimeout(_0x557663,_0x22e918));}function shiftedTime(){const _0x315f30=_0x478fd0,_0x4030b3=new Date();let _0x487387=_0x4030b3;if(config&&config[_0x315f30(0x1f7)]!==0x0)_0x487387=fns[_0x315f30(0x320)](_0x4030b3,{'hours':config[_0x315f30(0x1f7)]});return _0x487387;}function timer(_0x5943b3){const _0x175356=_0x478fd0,_0x5a35c3=new Date();!lasttime?console[_0x175356(0x332)](getTimeStamp()+':\x20timer\x20>',_0x5943b3,_0x5a35c3):console[_0x175356(0x332)](getTimeStamp()+_0x175356(0x313),_0x5943b3,(_0x5a35c3-lasttime)/0x3e8),lasttime=_0x5a35c3;}