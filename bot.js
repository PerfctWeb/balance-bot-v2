const _0x22b3bf=_0x5006;(function(_0x58d7ce,_0x537105){const _0x49d1cf=_0x5006,_0x51a248=_0x58d7ce();while(!![]){try{const _0x319b14=parseInt(_0x49d1cf(0x163))/0x1+-parseInt(_0x49d1cf(0x1a1))/0x2*(parseInt(_0x49d1cf(0x23e))/0x3)+parseInt(_0x49d1cf(0x223))/0x4*(-parseInt(_0x49d1cf(0x1a9))/0x5)+-parseInt(_0x49d1cf(0x245))/0x6*(parseInt(_0x49d1cf(0x176))/0x7)+parseInt(_0x49d1cf(0x153))/0x8*(parseInt(_0x49d1cf(0x2ef))/0x9)+-parseInt(_0x49d1cf(0x309))/0xa+-parseInt(_0x49d1cf(0x2ed))/0xb*(-parseInt(_0x49d1cf(0x150))/0xc);if(_0x319b14===_0x537105)break;else _0x51a248['push'](_0x51a248['shift']());}catch(_0x51fec6){_0x51a248['push'](_0x51a248['shift']());}}}(_0x1ed9,0xb45e5));const _0x3a24d1=function(){let _0x5387a0=!![];return function(_0x547816,_0x547d22){const _0x44ba5d=_0x5387a0?function(){const _0x22b4ea=_0x5006;if(_0x547d22){const _0x1f7119=_0x547d22[_0x22b4ea(0x27d)](_0x547816,arguments);return _0x547d22=null,_0x1f7119;}}:function(){};return _0x5387a0=![],_0x44ba5d;};}(),_0x491f19=_0x3a24d1(this,function(){const _0x316e96=_0x5006;return _0x491f19[_0x316e96(0x2f6)]()[_0x316e96(0x294)]('(((.+)+)+)+$')[_0x316e96(0x2f6)]()[_0x316e96(0x17f)](_0x491f19)[_0x316e96(0x294)]('(((.+)+)+)+$');});_0x491f19();'use strict';const ccxt=require(_0x22b3bf(0x2ec)),low=require('lowdb'),FileSync=require(_0x22b3bf(0x2cf)),fs=require('fs'),fns=require(_0x22b3bf(0x142)),forge=require(_0x22b3bf(0x16d)),util=require(_0x22b3bf(0x152)),argv=require(_0x22b3bf(0x1c6))(process[_0x22b3bf(0x157)][_0x22b3bf(0x184)](0x2))[_0x22b3bf(0x157)],path=require(_0x22b3bf(0x239)),axios=require(_0x22b3bf(0x275));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x22b3bf(0x2e5),'TUSD',_0x22b3bf(0x279),_0x22b3bf(0x2e6),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x22b3bf(0x156)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x22b3bf(0x2c2)+pauseBotInterval/0xea60+_0x22b3bf(0x16c),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x4;let enableFiatToggle;const serverversion=require(_0x22b3bf(0x1fd))[_0x22b3bf(0x197)],environment=require(_0x22b3bf(0x1fd))[_0x22b3bf(0x307)]||_0x22b3bf(0x2e2),botID=process[_0x22b3bf(0x157)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x22b3bf(0x2d6)](botID)&&(console[_0x22b3bf(0x219)](_0x22b3bf(0x276)+botID+_0x22b3bf(0x196)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x22b3bf(0x2bd)+userID+'/':_0x22b3bf(0x2bd),logspath=userID?_0x22b3bf(0x2ba)+userID+'/':_0x22b3bf(0x2ba),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0x22b3bf(0x1af)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x22b3bf(0x1af)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x22b3bf(0x291)+botID+_0x22b3bf(0x199),logfile=configpath+'bot-'+botID+_0x22b3bf(0x26b),performancefile=configpath+_0x22b3bf(0x291)+botID+_0x22b3bf(0x1e7),coinresultsfile=configpath+_0x22b3bf(0x291)+botID+_0x22b3bf(0x2f1),settingsfile=configpath+_0x22b3bf(0x180),securefile=configpath+_0x22b3bf(0x2ce),configbackuppath=configpath+_0x22b3bf(0x1b2),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x22b3bf(0x2c9)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x22b3bf(0x2c9)]({'data':[],'version':serverversion})[_0x22b3bf(0x1da)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x22b3bf(0x2c9)]({'bot':[],'version':serverversion})[_0x22b3bf(0x1da)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x22b3bf(0x2c9)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1b4a87=>{const _0x4e1b40=_0x22b3bf;console[_0x4e1b40(0x219)](_0x1b4a87);},'simple':_0x5225cc=>{const _0x288444=_0x22b3bf;console[_0x288444(0x219)](_0x5225cc),loggerfile['write'](util[_0x288444(0x1d5)](_0x5225cc)+'\x0a');},'full':async(_0x3434d5,_0x975b06='')=>{const _0x19f677=_0x22b3bf;let _0x149b29;if(config[_0x19f677(0x14f)])_0x149b29=getTimeStamp()+':\x20'+config[_0x19f677(0x1cc)]+_0x19f677(0x25d)+_0x3434d5;else _0x149b29=getTimeStamp()+_0x19f677(0x159)+botID+'\x20>\x20'+_0x3434d5;console[_0x19f677(0x219)](_0x149b29),loggerfile[_0x19f677(0x1da)](util[_0x19f677(0x1d5)](_0x149b29)+'\x0a'),_0x975b06&&(console[_0x19f677(0x219)](_0x975b06),loggerfile[_0x19f677(0x1da)](util['format'](_0x975b06)+'\x0a'));},'debug':async(_0x56be29,_0x432b1c='')=>{const _0x110cfd=_0x22b3bf;let _0x281583;if(config[_0x110cfd(0x14f)])_0x281583=getTimeStamp()+':\x20'+config['botname']+_0x110cfd(0x2be)+_0x56be29;else _0x281583=getTimeStamp()+':\x20Bot\x20'+botID+_0x110cfd(0x2be)+_0x56be29;if(debugging)console[_0x110cfd(0x219)](_0x281583);loggerfile[_0x110cfd(0x1da)](util['format'](_0x281583)+'\x0a');if(_0x432b1c){if(debugging)console['log'](_0x432b1c);loggerfile[_0x110cfd(0x1da)](util[_0x110cfd(0x1d5)](_0x432b1c)+'\x0a');}}};process['on'](_0x22b3bf(0x28b),function(_0x5bcf0e){const _0x36bde2=_0x22b3bf;handleError(_0x5bcf0e,_0x36bde2(0x28b));});settings[_0x22b3bf(0x2a6)]!=config[_0x22b3bf(0x2a6)]&&updateTimeshift(settings[_0x22b3bf(0x2a6)]);settings['onepagemode']!=config[_0x22b3bf(0x280)]&&updateOnepagemode(settings[_0x22b3bf(0x280)]);(settings[_0x22b3bf(0x2e1)]&&!config[_0x22b3bf(0x2e1)]||!settings[_0x22b3bf(0x2e1)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x22b3bf(0x2e1)]);process[_0x22b3bf(0x22d)]({'started':_0x22b3bf(0x1e1)},_0x1613d8=>{}),initializeProcessListeners();function proxyEmit(_0x22b29a,_0x251eef=null){const _0x12eb5d=_0x22b3bf;process[_0x12eb5d(0x22d)]({'function':_0x22b29a,'args':_0x251eef},_0x53c6e1=>{});}function initializeProcessListeners(){const _0x1b5115=_0x22b3bf;process['on'](_0x1b5115(0x25f),_0x4508b6=>{const _0x2c2d0f=_0x1b5115;switch(Object[_0x2c2d0f(0x13b)](_0x4508b6)[0x0]){case'timeshift':_0x4508b6[_0x2c2d0f(0x2a6)]!=undefined&&(settings[_0x2c2d0f(0x2a6)]=_0x4508b6[_0x2c2d0f(0x2a6)],updateTimeshift(settings[_0x2c2d0f(0x2a6)]));break;case _0x2c2d0f(0x280):_0x4508b6['onepagemode']!=undefined&&(settings['onepagemode']=_0x4508b6['onepagemode'],updateOnepagemode(settings[_0x2c2d0f(0x280)]));break;case'marketcapApi':_0x4508b6[_0x2c2d0f(0x2e1)]!=undefined&&(settings[_0x2c2d0f(0x2e1)]=_0x4508b6[_0x2c2d0f(0x2e1)],updateMarketcapApi(settings['marketcapApi']));break;case _0x2c2d0f(0x296):_0x4508b6[_0x2c2d0f(0x296)]!=undefined&&(bots=JSON[_0x2c2d0f(0x28d)](_0x4508b6[_0x2c2d0f(0x296)]),proxyEmit(_0x2c2d0f(0x296),bots));break;case'function':switch(_0x4508b6[_0x2c2d0f(0x18f)]){case _0x2c2d0f(0x22a):initclient();break;case _0x2c2d0f(0x1f8):toggleBotMode();break;case'emitHistory':emitHistory(_0x4508b6[_0x2c2d0f(0x17d)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4508b6[_0x2c2d0f(0x17d)]);break;case _0x2c2d0f(0x2d3):getPortfolio(_0x4508b6[_0x2c2d0f(0x17d)]);break;case _0x2c2d0f(0x1eb):storeConfiguration(_0x4508b6[_0x2c2d0f(0x17d)]);break;case'storeHeadless':storeHeadless(_0x4508b6[_0x2c2d0f(0x17d)]);break;case _0x2c2d0f(0x2b9):storeFiat(_0x4508b6[_0x2c2d0f(0x17d)]);break;case _0x2c2d0f(0x2ad):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x2c2d0f(0x1a6):placeOrder(_0x4508b6[_0x2c2d0f(0x17d)]);break;case _0x2c2d0f(0x1ee):cancelLoading();break;case _0x2c2d0f(0x193):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2c2d0f(0x149):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2d66d7=![]){const _0x4cfa87=_0x22b3bf;logger[_0x4cfa87(0x2cc)](_0x4cfa87(0x21a)+(_0x2d66d7?'exchange\x20reload':_0x4cfa87(0x1a4))+_0x4cfa87(0x2ca)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2d66d7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4cfa87(0x1c9)]!=''&&config[_0x4cfa87(0x1c9)]!=_0x4cfa87(0x17a)){loadingProgress=0x0;_0x2d66d7&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x550ebe=await getCoins();[currentCoins,currentCoinsAll]=_0x550ebe,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4cfa87(0x2cc)](_0x4cfa87(0x271)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4cfa87(0x227)]==0x0&&allOpenOrders[_0x4cfa87(0x227)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3ba82d=![]){const _0x3f99c4=_0x22b3bf;logger[_0x3f99c4(0x2cc)](_0x3f99c4(0x220)+(_0x3ba82d?_0x3f99c4(0x15b):_0x3f99c4(0x25b))+_0x3f99c4(0x2c0)+config[_0x3f99c4(0x179)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3ba82d){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x3f99c4(0x17a)){loadingProgress=0x1;const _0x304c30=await getCoins();[currentCoins,currentCoinsAll]=_0x304c30,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3f99c4(0x2cc)](_0x3f99c4(0x271)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x37f895){const _0x1acf43=_0x22b3bf;let _0x5d3637=![];if(_0x37f895)_0x5d3637=!![];let _0xf39119;_0x5d3637?_0xf39119=_0x37f895[_0x1acf43(0x2f0)](_0x540a55=>_0x540a55['coin']):_0xf39119=currentCoinsAll[_0x1acf43(0x2f0)](_0x4c37a2=>_0x4c37a2[_0x1acf43(0x2f5)]);if(!config[_0x1acf43(0x2e1)]||!_0x5d3637&&!config['marketcapEnabled']||_0xf39119[_0x1acf43(0x227)]==0x0)return;let _0x131dd0=null;try{_0x131dd0=await axios[_0x1acf43(0x16e)](_0x1acf43(0x29a),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1acf43(0x2e1)]},'params':{'symbol':_0xf39119['toString']()}});}catch(_0x2ac7f2){_0x131dd0=null,_0x2ac7f2['toString']()[_0x1acf43(0x1fb)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x1acf43(0x27b),emittedConfiguration()),logHistory(_0x1acf43(0x18d),_0x1acf43(0x1d8))):(logHistory('error','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x1acf43(0x16c)),logger['debug'](_0x1acf43(0x274),_0x2ac7f2[_0x1acf43(0x2f6)]()+_0x1acf43(0x290)+_0x2ac7f2[_0x1acf43(0x1d0)]));}if(_0x131dd0){let _0x5210ad=0x0;const _0x4489bc=_0x131dd0[_0x1acf43(0x1cf)];_0xf39119[_0x1acf43(0x254)](_0x302586=>{const _0x352041=_0x1acf43;if(_0x4489bc[_0x352041(0x1cf)][_0x302586][0x0])_0x5210ad+=_0x4489bc['data'][_0x302586][0x0]['quote'][_0x352041(0x286)][_0x352041(0x2d2)];}),_0xf39119[_0x1acf43(0x254)](_0x4fd1f1=>{const _0x2fc81c=_0x1acf43,_0x5aea8f=_0x4489bc[_0x2fc81c(0x1cf)][_0x4fd1f1][0x0]?_0x4489bc['data'][_0x4fd1f1][0x0][_0x2fc81c(0x188)]['USD']['market_cap']:0x0;if(_0x5d3637){const _0x11f039=_0x37f895[_0x2fc81c(0x25c)](_0x286888=>_0x286888['coin']==_0x4fd1f1);_0x11f039&&(_0x11f039[_0x2fc81c(0x2ea)]=_0x5aea8f);}else{const _0x1714f4=currentCoins[_0x2fc81c(0x25c)](_0x45ddb9=>_0x45ddb9[_0x2fc81c(0x2f5)]==_0x4fd1f1);_0x1714f4&&(_0x1714f4[_0x2fc81c(0x2ea)]=_0x5aea8f);const _0x232571=currentCoinsAll['find'](_0x525e8d=>_0x525e8d['coin']==_0x4fd1f1);_0x232571&&(_0x232571[_0x2fc81c(0x2ea)]=_0x5aea8f);}}),!_0x5d3637&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1c2ede=_0x22b3bf,_0x4fecec=0x2;let _0x580a33=0x0,_0x16d74b=0x0,_0x14d3f6=0x0,_0x5aae87=0x0,_0x16a647=0x0;config['portfolio']['forEach'](_0xba7a36=>{const _0x4caa37=_0x5006;if(!_0xba7a36[_0x4caa37(0x206)]){_0x14d3f6++,_0x580a33+=_0xba7a36[_0x4caa37(0x268)];if(_0xba7a36['slider']===-0x1){_0x580a33++;const _0xc75950=currentCoinsAll['find'](_0x45d1e6=>_0x45d1e6[_0x4caa37(0x2f5)]==_0xba7a36[_0x4caa37(0x2f5)]);_0xc75950&&(_0x5aae87+=_0xc75950[_0x4caa37(0x2ea)],_0x16a647+=Math[_0x4caa37(0x295)](_0xc75950[_0x4caa37(0x2ea)]));}if(_0xba7a36['slider']!==-0x1)_0x16d74b++;}});let _0x1fcf0b;const _0x16d14d=0x64-_0x580a33,_0x32f67a=_0x14d3f6-_0x16d74b;_0x1fcf0b=_0x32f67a===0x0?_0x580a33:Math['max'](0x64,_0x580a33),config[_0x1c2ede(0x2da)]['forEach'](_0x591141=>{const _0x254f61=_0x1c2ede,_0x419bb7=currentCoinsAll[_0x254f61(0x25c)](_0xf7bfe3=>_0xf7bfe3['coin']==_0x591141[_0x254f61(0x2f5)]);_0x419bb7&&(_0x591141['marketcap']=_0x419bb7['marketcap']);if(!_0x591141['excluded']){if(_0x1fcf0b<=0x64){if(_0x591141[_0x254f61(0x268)]===-0x1){if(_0x5aae87!==0x0&&config[_0x254f61(0x28c)]){if(_0x419bb7){if(config[_0x254f61(0x28c)]==_0x254f61(0x2ea))_0x591141['distribution']=(_0x16d14d/(_0x5aae87/_0x419bb7['marketcap']))[_0x254f61(0x1ec)](_0x4fecec);else config['marketcapEnabled']==_0x254f61(0x14a)&&(_0x591141[_0x254f61(0x1df)]=(_0x16d14d/(_0x16a647/Math[_0x254f61(0x295)](_0x419bb7[_0x254f61(0x2ea)])))[_0x254f61(0x1ec)](_0x4fecec));}}}}}}),updateConfig();}function updateConfig(){const _0x294037=_0x22b3bf;let _0x165a85=dbConfig[_0x294037(0x16e)](_0x294037(0x27a))[_0x294037(0x25c)]({'botID':botID})[_0x294037(0x264)]();_0x165a85&&dbConfig[_0x294037(0x16e)]('bot')['find']({'botID':botID})[_0x294037(0x28f)](config)['write']();}function logMemory(){const _0x45642a=_0x22b3bf;if(environment!=_0x45642a(0x17c))return;const _0x382684=process[_0x45642a(0x2cd)]()[_0x45642a(0x224)]/0x400/0x400;logger[_0x45642a(0x2cc)](_0x45642a(0x2b8)+process[_0x45642a(0x200)]+'\x20uses\x20'+formatResult(_0x382684,0x1)+_0x45642a(0x266));}async function startScheduler(){const _0x5c9a0b=_0x22b3bf,_0x312f1f=shiftedTime()[_0x5c9a0b(0x24d)]();getMarketCap(),_0x312f1f==0x1&&logMemory(),(_0x312f1f==0x2||_0x312f1f==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3cb9b7=![]){const _0x253d9f=_0x22b3bf;logger['debug']('Initiating\x20bot\x20restart');if(!_0x3cb9b7)while(lockOrders!=ORDERS[_0x253d9f(0x17b)]||coolingDown){await sleep(0x3e8);}process[_0x253d9f(0x22d)]({'stop':_0x253d9f(0x194)},_0x1c7bac=>{});}async function initExchange(_0x36c96d=config[_0x22b3bf(0x179)],_0x4bb720=config[_0x22b3bf(0x1c9)],_0x52cc4d=config[_0x22b3bf(0x174)],_0x26be1e=config['apiPassword']){const _0x39b663=_0x22b3bf;if(exchange){logger[_0x39b663(0x2cc)](_0x39b663(0x1d2));return;}logger[_0x39b663(0x2cc)](_0x39b663(0x18e));!supportedExchanges()[_0x39b663(0x1fb)](_0x36c96d)&&(logHistory(_0x39b663(0x18d),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x36c96d+_0x39b663(0x18a)),killBot());const _0x428aad=ccxt[_0x39b663(0x167)][_0x36c96d['toLowerCase']()];exchange=new _0x428aad({'apiKey':_0x4bb720,'secret':_0x52cc4d,'options':{'defaultType':'spot'}});if(_0x26be1e)exchange[_0x39b663(0x298)]=_0x26be1e;}function updateExchange(_0x4d6ddd,_0x4583db,_0x12e4bb=null){const _0x3d2c63=_0x22b3bf;exchange['apiKey']=_0x4d6ddd,exchange[_0x3d2c63(0x174)]=_0x4583db,exchange[_0x3d2c63(0x1f7)]=_0x12e4bb,logger[_0x3d2c63(0x2cc)](_0x3d2c63(0x230));}function setStableCoins(){const _0x3ee182=_0x22b3bf;let _0x12926f=config['basecoin']==_0x3ee182(0x222)?_0x3ee182(0x222):config[_0x3ee182(0x226)]=='PAXG'?_0x3ee182(0x237):_0x3ee182(0x2a5),_0x53f05e=allSymbols[_0x3ee182(0x1fb)](_0x12926f+_0x3ee182(0x20c))?_0x3ee182(0x286):allSymbols['includes'](_0x12926f+_0x3ee182(0x1b7))?_0x3ee182(0x279):_0x3ee182(0x19c),_0x4ba532=allSymbols[_0x3ee182(0x1fb)](_0x12926f+_0x3ee182(0x2b6))?_0x3ee182(0x19c):_0x53f05e;enableFiatToggle=!![],_0x53f05e=='EUR'&&(enableFiatToggle=![],storeFiat(_0x3ee182(0x19c))),_0x4ba532!=_0x3ee182(0x19c)&&(enableFiatToggle=![],storeFiat(_0x3ee182(0x286))),stablecoins={'eur':{'coin':''+_0x12926f+_0x4ba532,'symbol':_0x12926f+'/'+_0x4ba532},'usd':{'coin':''+_0x12926f+_0x53f05e,'symbol':_0x12926f+'/'+_0x53f05e}};}async function initwsCcxt(){const _0x4e599d=_0x22b3bf;initCycle++;const _0x13f0f4=initCycle;let _0x4fdb9e=[];config[_0x4e599d(0x2da)][_0x4e599d(0x254)](_0x4b019d=>{const _0x13091f=_0x4e599d;if(!_0x4b019d[_0x13091f(0x206)]&&_0x4b019d['coin']!=config['basecoin'])_0x4fdb9e['push'](_0x4b019d['symbol']);});if(!_0x4fdb9e[_0x4e599d(0x1fb)](stablecoins[_0x4e599d(0x1d7)][_0x4e599d(0x195)]))_0x4fdb9e[_0x4e599d(0x282)](stablecoins[_0x4e599d(0x1d7)]['symbol']);if(!_0x4fdb9e[_0x4e599d(0x1fb)](stablecoins['usd'][_0x4e599d(0x195)]))_0x4fdb9e[_0x4e599d(0x282)](stablecoins['usd']['symbol']);if(config[_0x4e599d(0x179)][_0x4e599d(0x22c)](_0x4e599d(0x183))&&config[_0x4e599d(0x226)]!=_0x4e599d(0x237)){if(!_0x4fdb9e['includes'](_0x4e599d(0x2fb)+config['basecoin']))_0x4fdb9e[_0x4e599d(0x282)](_0x4e599d(0x2fb)+config[_0x4e599d(0x226)]);}loadCoins(_0x4fdb9e),_0x4fdb9e=validateSymbols(_0x4fdb9e);const _0x5e2ceb=async _0x1d46c9=>{const _0x375efb=_0x4e599d;let _0x45762c;try{const _0x741f47=await getTickers(_0x1d46c9);Object[_0x375efb(0x2bf)](_0x741f47)['forEach'](_0x2454a0=>{const _0x458660=_0x375efb;_0x45762c=_0x2454a0[0x1][_0x458660(0x195)],gTicker[noslash(_0x45762c)]=_0x2454a0[0x1][_0x458660(0x1b8)],gChange[_0x45762c]=_0x2454a0[0x1][_0x458660(0x147)];});}catch(_0x20f46c){await handleError(_0x20f46c,_0x375efb(0x181),_0x45762c);}},_0x159250=async _0x3396cb=>{const _0x1e8cc8=_0x4e599d;while(initCycle==_0x13f0f4){if(!botPaused)try{const _0x1e2adc=await exchange['watchTrades'](_0x3396cb);gTicker[noslash(_0x1e2adc[0x0][_0x1e8cc8(0x195)])]=_0x1e2adc[0x0][_0x1e8cc8(0x1bb)];}catch(_0x3ec2d6){if(!exchangeStopped)await handleError(_0x3ec2d6,_0x1e8cc8(0x146),_0x3396cb);}else await sleep(0x64);}},_0x45f6b4=async _0x35323f=>{const _0x44838b=_0x4e599d;while(initCycle==_0x13f0f4){if(!botPaused)try{const _0x372fd0=await exchange[_0x44838b(0x151)](_0x35323f),_0x3c0135=_0x372fd0[_0x44838b(0x2f3)]();gTicker[noslash(_0x3c0135['symbol'])]=_0x3c0135[_0x44838b(0x1bb)];}catch(_0x48a89d){if(!exchangeStopped)await handleError(_0x48a89d,_0x44838b(0x1fa),_0x35323f[_0x44838b(0x2f6)]());}else await sleep(0x64);}},_0x11779e=async _0x2145b8=>{const _0x14989e=_0x4e599d;while(initCycle==_0x13f0f4){if(!botPaused){let _0x269f7e;try{await sleep(0x3c*0x3e8);const _0x48fda0=await getTickers(_0x2145b8);Object[_0x14989e(0x2bf)](_0x48fda0)[_0x14989e(0x254)](_0x18106e=>{const _0x261a70=_0x14989e;_0x269f7e=_0x18106e[0x1]['symbol'],gChange[_0x269f7e]=_0x18106e[0x1][_0x261a70(0x147)];});}catch(_0xcda9b8){if(!exchangeStopped)await handleError(_0xcda9b8,_0x14989e(0x241),_0x269f7e);}}else await sleep(0x64);}},_0x2c3b45=async _0x353178=>{const _0x4e7dff=_0x4e599d;while(initCycle==_0x13f0f4){if(!botPaused)try{const _0x107f87=await exchange[_0x4e7dff(0x1ff)](_0x353178);initCycle==_0x13f0f4&&_0x107f87[_0x4e7dff(0x254)](_0x1b17fc=>{updateNumberCoinsCcxt(_0x1b17fc);});}catch(_0x491675){if(!exchangeStopped)await handleError(_0x491675,_0x4e7dff(0x14c));}else await sleep(0x64);}};_0x5e2ceb(_0x4fdb9e),_0x11779e(_0x4fdb9e),exchange[_0x4e599d(0x2a7)][_0x4e599d(0x151)]&&!(config[_0x4e599d(0x179)]=='Bybit'&&_0x4fdb9e[_0x4e599d(0x227)]>0xa)?_0x45f6b4(_0x4fdb9e):_0x4fdb9e[_0x4e599d(0x254)](_0x353e68=>{_0x159250(_0x353e68);}),_0x4fdb9e[_0x4e599d(0x254)](_0x1da79e=>{_0x2c3b45(_0x1da79e);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1bcc82){const _0x527986=_0x22b3bf;let _0x154329={};try{if(config[_0x527986(0x179)]!=_0x527986(0x208))_0x154329=await exchange['fetchTickers'](_0x1bcc82);else for(const _0x1adf59 of _0x1bcc82){const _0x740c95=await exchange[_0x527986(0x204)](_0x1adf59);_0x154329[_0x1adf59]=_0x740c95;}return _0x154329;}catch(_0x20f10d){throw _0x20f10d;}}function setBlockTransactionDetection(_0x1fb3c6){const _0x120374=_0x22b3bf;blockTransactionDetection=_0x1fb3c6,logger[_0x120374(0x2cc)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x387345=0x0){const _0x4736e1=_0x22b3bf;transactionDetectionOngoing=!![];try{const _0x31a6d8=await getCoins(_0x387345),[_0x230195,_0x1a6af4]=_0x31a6d8;let _0x1502a5=[];currentCoins[_0x4736e1(0x254)](_0xcad16=>{const _0x21089f=_0x4736e1,_0x41df73=_0x230195[_0x21089f(0x25c)](_0x5e98ec=>_0x5e98ec[_0x21089f(0x2f5)]==_0xcad16['coin']);if(_0x41df73){if(_0xcad16[_0x21089f(0x261)]!=_0x41df73[_0x21089f(0x261)]){let _0x2c859e;if(_0xcad16[_0x21089f(0x2f5)]!=config['basecoin']){const _0x3f762f=gTicker[noslash(_0xcad16['symbol'])];_0x2c859e=_0xcad16[_0x21089f(0x1f2)]?0x1/_0x3f762f:_0x3f762f;}else _0x2c859e=0x1;_0x1502a5[_0x21089f(0x282)]({'coin':_0xcad16[_0x21089f(0x2f5)],'symbol':_0xcad16[_0x21089f(0x195)],'price':_0x2c859e,'number':Number(formatResult(_0x41df73[_0x21089f(0x261)]-_0xcad16[_0x21089f(0x261)],0x8)),'basecoinvalue':_0x2c859e*(_0x41df73[_0x21089f(0x261)]-_0xcad16[_0x21089f(0x261)])});}}});if(_0x1502a5['length']>0x0&&!blockTransactionDetection)for(const _0x42cec2 of _0x1502a5){if(config[_0x4736e1(0x13c)]){logger[_0x4736e1(0x2cc)](_0x4736e1(0x24c)+_0x42cec2[_0x4736e1(0x284)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x4736e1(0x1bd)]);if(lastFees[_0x4736e1(0x1bd)]==0x0||Math[_0x4736e1(0x27c)](_0x42cec2['basecoinvalue'])>lastFees['highest']*0x3){if(config[_0x4736e1(0x13c)]=='update-liquidity'){delete _0x42cec2[_0x4736e1(0x195)],delete _0x42cec2[_0x4736e1(0x284)];let _0x9fe07f=[],_0xbd537c=[...config[_0x4736e1(0x1fe)]]||[],_0x58e561=config[_0x4736e1(0x1fe)];_0xbd537c['sort']((_0x1cc39b,_0x26003)=>_0x1cc39b['date']>_0x26003[_0x4736e1(0x13e)]?-0x1:_0x26003[_0x4736e1(0x13e)]>_0x1cc39b['date']?0x1:0x0);const _0x32ba5f=getDate();if(_0xbd537c[0x0]){const _0x35a39a=fns['parse'](_0xbd537c[0x0]['date'],_0x4736e1(0x2c1),new Date()),_0x5184b1=fns[_0x4736e1(0x28d)](_0x32ba5f,_0x4736e1(0x2c1),new Date());if(fns[_0x4736e1(0x1c7)](_0x35a39a,_0x5184b1)){_0x9fe07f=_0xbd537c[0x0][_0x4736e1(0x1ce)];const _0x21cfdd=_0x9fe07f['find'](_0x3b92ef=>_0x3b92ef[_0x4736e1(0x2f5)]==_0x42cec2[_0x4736e1(0x2f5)]);_0x21cfdd?(_0x21cfdd[_0x4736e1(0x261)]+=_0x42cec2[_0x4736e1(0x261)],_0x21cfdd[_0x4736e1(0x261)]==0x0&&(_0x9fe07f=_0x9fe07f[_0x4736e1(0x287)](_0x18838a=>{const _0x2e4533=_0x4736e1;return _0x18838a['coin']!=_0x42cec2[_0x2e4533(0x2f5)];}))):_0x9fe07f[_0x4736e1(0x282)](_0x42cec2);const _0x370344=_0x58e561[_0x4736e1(0x25c)](_0x411188=>_0x411188[_0x4736e1(0x13e)]==_0x32ba5f);_0x370344[_0x4736e1(0x1ce)]=_0x9fe07f;}else _0x58e561[_0x4736e1(0x282)]({'date':_0x32ba5f,'changes':[_0x42cec2]});}const _0x269233=_0x58e561[_0x4736e1(0x25c)](_0xb3199a=>_0xb3199a[_0x4736e1(0x13e)]==_0x32ba5f);if(_0x269233){let _0x22a7c0=!![];_0x269233[_0x4736e1(0x1ce)]['forEach'](_0x385409=>{const _0x3eeb67=_0x4736e1;if(_0x385409[_0x3eeb67(0x261)]!=0x0)_0x22a7c0=![];}),_0x22a7c0&&(_0x58e561=_0x58e561[_0x4736e1(0x287)](_0x3c11e1=>{const _0x243850=_0x4736e1;return _0x3c11e1[_0x243850(0x13e)]!=_0x32ba5f;}));}let _0xd50e67=dbConfig[_0x4736e1(0x16e)](_0x4736e1(0x27a))[_0x4736e1(0x25c)]({'botID':botID})[_0x4736e1(0x264)]();_0xd50e67&&(dbConfig[_0x4736e1(0x16e)](_0x4736e1(0x27a))[_0x4736e1(0x25c)]({'botID':botID})[_0x4736e1(0x28f)]({'liquidity':_0x58e561})[_0x4736e1(0x1da)](),config[_0x4736e1(0x1fe)]=_0x58e561);logHistory(_0x4736e1(0x308),'Portfolio\x20change\x20detected:\x20'+Math[_0x4736e1(0x27c)](_0x42cec2['number'])+'\x20'+_0x42cec2['coin']+'\x20'+(_0x42cec2[_0x4736e1(0x261)]>0x0?_0x4736e1(0x251):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x4736e1(0x27b),emittedConfiguration());const _0x63f002=getNormalizedPerformance();emitPerformance(_0x63f002),getStartingBalances(_0x63f002),logger['debug'](_0x4736e1(0x21b));}else config[_0x4736e1(0x13c)]==_0x4736e1(0x165)&&(config[_0x4736e1(0x2ff)]?(await storeHeadless({'headless':![]}),logHistory(_0x4736e1(0x308),_0x4736e1(0x158)+Math[_0x4736e1(0x27c)](_0x42cec2[_0x4736e1(0x261)])+'\x20'+_0x42cec2[_0x4736e1(0x2f5)]+'\x20'+(_0x42cec2['number']>0x0?_0x4736e1(0x251):_0x4736e1(0x259))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0x4736e1(0x158)+Math[_0x4736e1(0x27c)](_0x42cec2['number'])+'\x20'+_0x42cec2[_0x4736e1(0x2f5)]+'\x20'+(_0x42cec2[_0x4736e1(0x261)]>0x0?'added':_0x4736e1(0x259))+_0x4736e1(0x1e4)));}else logger[_0x4736e1(0x2cc)](_0x4736e1(0x297)+Math[_0x4736e1(0x27c)](_0x42cec2[_0x4736e1(0x261)])+'\x20'+_0x42cec2[_0x4736e1(0x2f5)]+'\x20'+(_0x42cec2['number']>0x0?_0x4736e1(0x251):'removed'));}else logger[_0x4736e1(0x2cc)]('Portfolio\x20change\x20detected:\x20'+Math[_0x4736e1(0x27c)](_0x42cec2[_0x4736e1(0x261)])+'\x20'+_0x42cec2[_0x4736e1(0x2f5)]+'\x20'+(_0x42cec2[_0x4736e1(0x261)]>0x0?_0x4736e1(0x251):_0x4736e1(0x259))+_0x4736e1(0x1ea));}currentCoins=_0x230195,currentCoinsAll=_0x1a6af4;}catch(_0x1310ec){if(!exchangeStopped)await handleError(_0x1310ec,_0x4736e1(0x262));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x50154b=_0x22b3bf;logger[_0x50154b(0x2cc)](_0x50154b(0x281));try{markets=await exchange[_0x50154b(0x1d9)]();}catch(_0x5b4f80){logger[_0x50154b(0x2cc)](_0x50154b(0x238)+_0x5b4f80['toString']());if(markets){}else(_0x5b4f80[_0x50154b(0x2f6)]()['toLowerCase']()[_0x50154b(0x1fb)](_0x50154b(0x21c))||_0x5b4f80[_0x50154b(0x2f6)]()[_0x50154b(0x246)]()[_0x50154b(0x1fb)](_0x50154b(0x17e)))&&logHistory(_0x50154b(0x18d),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),logHistory(_0x50154b(0x18d),_0x50154b(0x2cb)),logHistory(_0x50154b(0x18d),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x50154b(0x178)),logger[_0x50154b(0x2cc)]('Error\x20details:',_0x5b4f80),loading[_0x50154b(0x21d)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x50154b(0x2bf)](markets)[_0x50154b(0x254)](_0x33187f=>{const _0x2ac717=_0x50154b;_0x33187f[0x1]['active']&&_0x33187f[0x1][_0x2ac717(0x16a)]&&allSymbols[_0x2ac717(0x282)](_0x33187f[0x0]);});}function validateSymbols(_0xb8555c){let _0xb52a4f=[];return _0xb8555c['forEach'](_0x35538e=>{const _0xadf0a7=_0x5006;!allSymbols['includes'](_0x35538e)?logHistory('error',_0xadf0a7(0x20f)+_0x35538e+_0xadf0a7(0x155)):_0xb52a4f['push'](_0x35538e);}),_0xb52a4f;}async function initclient(){const _0x51998c=_0x22b3bf;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x51998c(0x265),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x210e92=getNormalizedPerformance();emitPerformance(_0x210e92),getStartingBalances(_0x210e92);}async function toggleBotMode(){const _0x5ed8a4=_0x22b3bf;let _0x28efe8=dbConfig['get'](_0x5ed8a4(0x27a))[_0x5ed8a4(0x25c)]({'botID':botID})[_0x5ed8a4(0x264)]();if(_0x28efe8){const _0x8f4c19=!_0x28efe8[_0x5ed8a4(0x2ff)];dbConfig[_0x5ed8a4(0x16e)]('bot')[_0x5ed8a4(0x25c)]({'botID':botID})[_0x5ed8a4(0x28f)]({'headless':_0x8f4c19})[_0x5ed8a4(0x1da)](),config[_0x5ed8a4(0x2ff)]=_0x8f4c19,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5af1a7=_0x22b3bf;process[_0x5af1a7(0x22d)]({'updatebotmanager':!![]},_0x4ae562=>{}),logger[_0x5af1a7(0x2cc)](_0x5af1a7(0x2b1)+config['headless']);}async function loadCoins(_0xbd213f){const _0x368fe6=_0x22b3bf;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5637b0,_0x2ae066=0x0,_0x48584d=0x0;_0xbd213f[_0x368fe6(0x254)](_0x3d8511=>{const _0x52c085=_0x368fe6;loading[_0x52c085(0x2b4)][_0x52c085(0x282)](_0x3d8511);}),loadingCanceled=![];let _0x50436=![];while(_0x5637b0!=_0xbd213f[_0x368fe6(0x227)]+maxLoadingProgress){_0x5637b0=loadingProgress,_0xbd213f[_0x368fe6(0x254)](_0x235a5d=>{const _0x515a2c=_0x368fe6;if(gTicker[noslash(_0x235a5d)]){loading[_0x515a2c(0x2b4)]=loading[_0x515a2c(0x2b4)][_0x515a2c(0x287)](_0x46c6be=>_0x46c6be!=_0x235a5d);if(!watchedSymbols[_0x515a2c(0x1fb)](_0x235a5d))watchedSymbols['push'](_0x235a5d);_0x5637b0++;}}),loading[_0x368fe6(0x14b)]=Math[_0x368fe6(0x1c3)](_0x5637b0/(_0xbd213f['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x48584d>0x1e*0x5&&(loading[_0x368fe6(0x256)]=!![],emitLoadingProgress()),_0x48584d>0x78*0x5&&!_0x50436&&(_0x50436=!![],logHistory(_0x368fe6(0x18d),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x368fe6(0x2b4)]['join'](',\x20')+_0x368fe6(0x1d4)),logHistory(_0x368fe6(0x18d),_0x368fe6(0x20a)+loadCoinsRetryInterval/0xea60+_0x368fe6(0x178)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x368fe6(0x21d)]=!![],emitLoadingProgress();break;}else _0x2ae066!=loading[_0x368fe6(0x14b)]&&(_0x2ae066=loading[_0x368fe6(0x14b)],emitLoadingProgress()),_0x48584d++,await sleep(0xc8);}_0x5637b0==_0xbd213f[_0x368fe6(0x227)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x368fe6(0x22d)]({'status':_0x368fe6(0x1e6),'live':_0x368fe6(0x1e1)},_0x4be2a2=>{}),_0x50436&&logHistory(_0x368fe6(0x308),_0x368fe6(0x1c2)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1e9cb3=_0x22b3bf;proxyEmit(_0x1e9cb3(0x27b),{...emittedConfiguration(),'configstate':_0x1e9cb3(0x248)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x20fc2c=_0x22b3bf;let _0x548102=gTicker[stablecoins[_0x20fc2c(0x1d7)]['coin']],_0x39a852=gTicker[stablecoins['usd'][_0x20fc2c(0x2f5)]];return{'eur':Number(_0x548102),'usd':Number(_0x39a852)};}function capitalize(_0x4324cc){const _0xeb6929=_0x22b3bf;return _0x4324cc[_0xeb6929(0x232)](0x0,0x1)['toUpperCase']()+_0x4324cc[_0xeb6929(0x232)](0x1);}function supportedExchanges(){const _0x172bec=_0x22b3bf,_0x5abded=['ws',_0x172bec(0x212),_0x172bec(0x204),_0x172bec(0x13d),_0x172bec(0x1ff),_0x172bec(0x203),_0x172bec(0x299),_0x172bec(0x1c1),'fetchBalance'];let _0x5dbb30=[],_0x15b658=[],_0x48b570=ccxt[_0x172bec(0x167)]['exchanges'];_0x48b570[_0x172bec(0x254)](_0x427be3=>{const _0x1e2c40=_0x172bec;try{const _0x326126=new ccxt[(_0x1e2c40(0x167))][_0x427be3]();_0x15b658[_0x1e2c40(0x282)](_0x326126);}catch(_0x2a1a4d){}}),_0x15b658[_0x172bec(0x254)](_0x4dac0a=>{const _0x211580=_0x172bec;let _0x38391f=0x0;_0x5abded[_0x211580(0x254)](_0x5c9da1=>{const _0x51842a=_0x211580;_0x5c9da1 in _0x4dac0a[_0x51842a(0x2a7)]&&_0x4dac0a[_0x51842a(0x2a7)][_0x5c9da1]&&_0x38391f++;}),_0x38391f==_0x5abded[_0x211580(0x227)]&&_0x5dbb30[_0x211580(0x282)](capitalize(_0x4dac0a['id']));});let _0x2cb94a=[];return _0x48b570[_0x172bec(0x254)](_0x20faa5=>{const _0x230393=_0x172bec;_0x20faa5=capitalize(_0x20faa5);if(!_0x5dbb30[_0x230393(0x1fb)](_0x20faa5))_0x2cb94a[_0x230393(0x282)](_0x20faa5);}),_0x5dbb30;}function setStartDatePerformance(){const _0x5b3261=_0x22b3bf;if(config&&config[_0x5b3261(0x1fe)][0x0][_0x5b3261(0x1ce)][_0x5b3261(0x227)]!=0x0){const _0x3b3418=config[_0x5b3261(0x1fe)][0x0][_0x5b3261(0x1ce)];dbPerformance[_0x5b3261(0x16e)](_0x5b3261(0x1cf))[_0x5b3261(0x25c)]({'date':config[_0x5b3261(0x26e)]})[_0x5b3261(0x28f)]({'coins':_0x3b3418})['write']();}}async function recreateCoinResults(){const _0x361756=_0x22b3bf;recreationNeeded=![];let _0x2b0734,_0x2cb7a7=[];try{for(const _0x1a8df1 of currentCoins){if(_0x1a8df1['coin']!=config[_0x361756(0x226)]){let _0x52447f=0x0,_0x377ed0,_0x3d0023;_0x2b0734=await getAllEventOrders(_0x1a8df1[_0x361756(0x195)]);if(_0x2b0734['length']>0x0)_0x2b0734['forEach'](_0x2ac606=>{const _0x5bd6a0=_0x361756,_0x27ad54=_0x1a8df1['symbol'][_0x5bd6a0(0x1fb)](config[_0x5bd6a0(0x226)]+'/');_0x2cb7a7[_0x5bd6a0(0x282)]({'datetime':_0x2ac606['datetime'],'coin':_0x1a8df1[_0x5bd6a0(0x2f5)],'symbol':_0x1a8df1['symbol'],'side':_0x2ac606[_0x5bd6a0(0x303)],'reverse':_0x27ad54,'amount':formatResult(_0x2ac606['filled'],0x8),'filled':formatResult(_0x2ac606['filled'],0x8),'price':formatResult(_0x2ac606[_0x5bd6a0(0x1bb)],0x8)}),_0x52447f=_0x2ac606[_0x5bd6a0(0x303)]==_0x5bd6a0(0x198)?_0x52447f+_0x2ac606['filled']:_0x52447f-_0x2ac606['filled'];if(!_0x3d0023)_0x3d0023=_0x2ac606[_0x5bd6a0(0x1bb)];});_0x377ed0=_0x1a8df1[_0x361756(0x261)]-_0x52447f;let _0x104627;config['liquidity']['forEach'](_0x33afad=>{const _0xeb215e=_0x361756;!_0x104627&&(_0x104627=_0x33afad[_0xeb215e(0x1ce)]['find'](_0xea8b74=>_0xea8b74[_0xeb215e(0x2f5)]==_0x1a8df1[_0xeb215e(0x2f5)]),_0x104627&&(_0x377ed0=_0x104627[_0xeb215e(0x261)],_0x3d0023=_0x104627[_0xeb215e(0x1bb)]));});let _0x278863=dbCoinResults[_0x361756(0x16e)](_0x361756(0x1c8))[_0x361756(0x25c)]({'coin':_0x1a8df1['coin']})['value']();_0x278863={'coin':_0x1a8df1[_0x361756(0x2f5)],'number':_0x377ed0,'breakeven':_0x3d0023,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x361756(0x16e)](_0x361756(0x1c8))['find']({'coin':_0x1a8df1[_0x361756(0x2f5)]})[_0x361756(0x28f)](_0x278863)[_0x361756(0x1da)]();}}_0x2cb7a7[_0x361756(0x19d)]((_0xb22b38,_0x377321)=>_0xb22b38['datetime']>_0x377321[_0x361756(0x2a9)]?0x1:_0x377321[_0x361756(0x2a9)]>_0xb22b38['datetime']?-0x1:0x0);let _0x146c2d=0x0;for(let _0x297ed3 of _0x2cb7a7){await updateCoinResults(_0x297ed3,!![]);}}catch(_0x4a61d9){await handleError(_0x4a61d9,_0x361756(0x1f9));}}async function getAllEventOrders(_0x1a67a8){const _0x5df3a4=_0x22b3bf;let _0x4a7376=[],_0x59b84a=dbLogs[_0x5df3a4(0x16e)](_0x5df3a4(0x2c8))[_0x5df3a4(0x287)](_0x255580=>{const _0x16c509=_0x5df3a4,_0x4cdded=_0x255580[_0x16c509(0x257)][_0x16c509(0x246)]();return _0x4cdded[_0x16c509(0x1fb)](_0x1a67a8[_0x16c509(0x246)]())&&(_0x4cdded['includes'](_0x16c509(0x177))&&_0x4cdded[_0x16c509(0x1fb)](_0x16c509(0x26f))||_0x4cdded[_0x16c509(0x1fb)](_0x16c509(0x172))&&_0x4cdded[_0x16c509(0x1fb)](_0x16c509(0x26f)));})[_0x5df3a4(0x202)](_0x5df3a4(0x2e4))[_0x5df3a4(0x264)]();return _0x59b84a[_0x5df3a4(0x254)](_0x50451e=>{const _0x3afe24=_0x5df3a4,_0x56e464=_0x50451e[_0x3afe24(0x257)][_0x3afe24(0x1fb)]('sell')?_0x3afe24(0x244):_0x3afe24(0x198),_0x1c53e8=/#([0-9]|\.)+\s/i,_0x3f5133=Number(_0x1c53e8[_0x3afe24(0x21e)](_0x50451e[_0x3afe24(0x257)])[0x0][_0x3afe24(0x184)](0x1)),_0x409a94=/@([0-9]|\.)+$/i,_0x5d9ed5=Number(_0x409a94['exec'](_0x50451e[_0x3afe24(0x257)])[0x0]['slice'](0x1));_0x4a7376['push']({'datetime':_0x50451e[_0x3afe24(0x2e4)],'coin':symbolToCoin(_0x1a67a8),'symbol':_0x1a67a8,'side':_0x56e464,'amount':_0x3f5133,'filled':_0x3f5133,'price':_0x5d9ed5});}),_0x4a7376;}async function validate24hChanges(){const _0x330308=_0x22b3bf;for(const _0x1bc5b8 of currentCoins){if(_0x1bc5b8['coin']!=config[_0x330308(0x226)]){let _0x535d72;_0x1bc5b8['reverse']?_0x535d72=formatResult((0x1/(gChange[_0x1bc5b8[_0x330308(0x195)]]/0x64+0x1)-0x1)*0x64,0x3):_0x535d72=gChange[_0x1bc5b8[_0x330308(0x195)]],_0x535d72<config[_0x330308(0x2dd)]&&(logHistory('error',_0x1bc5b8[_0x330308(0x2f5)]+_0x330308(0x300)+_0x535d72+'%'),logHistory(_0x330308(0x18d),_0x330308(0x23a)),logHistory(_0x330308(0x18d),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4d2795,_0x6624cd){const _0x2591dd=_0x22b3bf;if(!_0x4d2795)return!![];const _0x1f561f=_0x6624cd[_0x2591dd(0x221)]('.'),_0x5e62e7=_0x4d2795[_0x2591dd(0x221)]('.');for(var _0x540ffa=0x0;_0x540ffa<_0x5e62e7[_0x2591dd(0x227)];_0x540ffa++){const _0x226901=~~_0x5e62e7[_0x540ffa],_0x3232e7=~~_0x1f561f[_0x540ffa];if(_0x226901<_0x3232e7)return!![];if(_0x226901>_0x3232e7)return![];}return![];}async function oneTimeMigration(){const _0x46520b=_0x22b3bf;let _0x225ad4=dbLogs[_0x46520b(0x16e)](_0x46520b(0x197))[_0x46520b(0x264)]();if(isOlderVersion(_0x225ad4,_0x46520b(0x2bc))){let _0x454c8f=[];const _0x1c9d3c=dbLogs[_0x46520b(0x16e)]('logs')['value']();_0x1c9d3c[_0x46520b(0x254)](_0xbd12c6=>{const _0x838e9f=_0x46520b;_0x454c8f[_0x838e9f(0x282)]({'time':_0xbd12c6['time'],'type':_0xbd12c6['type'],'event':_0xbd12c6[_0x838e9f(0x257)]});}),dbLogs[_0x46520b(0x16e)](_0x46520b(0x2c8))['assign'](_0x454c8f)[_0x46520b(0x1da)]();}let _0x29a960=dbConfig[_0x46520b(0x16e)](_0x46520b(0x197))[_0x46520b(0x264)]();if(isOlderVersion(_0x29a960,'2.3.5')){let _0x296638=dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))[_0x46520b(0x25c)]({'botID':botID})['value']();if(_0x296638){let _0x1b9fc8=[];_0x296638[_0x46520b(0x2da)][_0x46520b(0x254)](_0x32981e=>{const _0x486ea5=_0x46520b;_0x1b9fc8[_0x486ea5(0x282)]({'coin':_0x32981e[_0x486ea5(0x2f5)],'number':_0x32981e['startnumber'],'price':_0x32981e['startprice']}),delete _0x32981e[_0x486ea5(0x15e)],delete _0x32981e[_0x486ea5(0x1ba)];});if(_0x1b9fc8['length']!==0x0)fs[_0x46520b(0x161)](configbackuppath+(_0x46520b(0x1a7)+botID+_0x46520b(0x1dd)),JSON[_0x46520b(0x1db)](_0x1b9fc8,null,0x4),function(_0x4b5436){if(_0x4b5436){}});const _0x2ca1b3=(_0x3947ac,_0x3dd4ea)=>{const _0xf5643f=_0x46520b;let _0x14705b=[];_0x3dd4ea[_0xf5643f(0x254)](_0x513523=>{const _0x590df4=_0xf5643f,_0x50b096=_0x3947ac[_0x590df4(0x25c)](_0x516232=>_0x516232['coin']==_0x513523[_0x590df4(0x2f5)]);if(!_0x50b096)_0x14705b[_0x590df4(0x282)](_0x513523);});let _0x524188=[];return _0x3947ac[_0xf5643f(0x254)](_0x4b6e7b=>{const _0x3e2e21=_0xf5643f,_0x400236=_0x3dd4ea[_0x3e2e21(0x25c)](_0xc42b84=>_0xc42b84['coin']==_0x4b6e7b[_0x3e2e21(0x2f5)]);if(!_0x400236||_0x400236[_0x3e2e21(0x261)]==0x0&&_0x4b6e7b['number']!=0x0)_0x524188[_0x3e2e21(0x282)](_0x4b6e7b);}),{'missingDay1':_0x14705b,'notInDay2':_0x524188};},_0xf94d42=dbPerformance[_0x46520b(0x16e)](_0x46520b(0x1cf))[_0x46520b(0x229)]()[_0x46520b(0x264)]();if(_0xf94d42[_0x46520b(0x227)]>0x1){const {missingDay1:_0x13bcdc,notInDay2:_0x269b1e}=_0x2ca1b3(_0x1b9fc8,_0xf94d42[0x1][_0x46520b(0x1c8)]);_0x1b9fc8=[..._0x1b9fc8,..._0x13bcdc],_0x269b1e[_0x46520b(0x254)](_0x533660=>{const _0x3c7ac7=_0x46520b;let _0x47b3e4=_0x1b9fc8[_0x3c7ac7(0x2a4)](_0x4bc65f=>_0x4bc65f[_0x3c7ac7(0x2f5)]==_0x533660[_0x3c7ac7(0x2f5)]);_0x47b3e4!=-0x1&&_0x1b9fc8[_0x3c7ac7(0x160)](_0x47b3e4,0x1);});}_0x1b9fc8['sort']((_0x32b144,_0x32d53e)=>_0x32b144[_0x46520b(0x2f5)]>_0x32d53e[_0x46520b(0x2f5)]?0x1:_0x32d53e[_0x46520b(0x2f5)]>_0x32b144['coin']?-0x1:0x0);let _0x45e008=[{'date':_0x296638[_0x46520b(0x26e)],'changes':_0x1b9fc8}];_0xf94d42['length']>0x2&&_0xf94d42['forEach']((_0x148e3b,_0x45d64d)=>{const _0x31654a=_0x46520b;if(_0x45d64d>0x0&&_0x45d64d<_0xf94d42['length']-0x1){const {missingDay1:_0x538991,notInDay2:_0x30b5e2}=_0x2ca1b3(_0xf94d42[_0x45d64d]['coins'],_0xf94d42[_0x45d64d+0x1][_0x31654a(0x1c8)]);_0x1b9fc8=[],(_0x538991[_0x31654a(0x227)]!=0x0||_0x30b5e2['length']!=0x0)&&(_0x538991[_0x31654a(0x227)]!=0x0&&_0x1b9fc8[_0x31654a(0x282)](..._0x538991),_0x30b5e2[_0x31654a(0x227)]!=0x0&&(_0x30b5e2[_0x31654a(0x254)](_0x279190=>{const _0x1baa76=_0x31654a;_0x279190['number']=-_0x279190[_0x1baa76(0x261)];}),_0x1b9fc8['push'](..._0x30b5e2)),_0x1b9fc8[_0x31654a(0x19d)]((_0x116917,_0x357e2b)=>_0x116917['coin']>_0x357e2b['coin']?0x1:_0x357e2b[_0x31654a(0x2f5)]>_0x116917[_0x31654a(0x2f5)]?-0x1:0x0),_0x45e008[_0x31654a(0x282)]({'date':_0xf94d42[_0x45d64d+0x1]['date'],'changes':_0x1b9fc8}));}}),dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))['find']({'botID':botID})[_0x46520b(0x28f)]({..._0x296638,'liquidity':_0x45e008})['write']();}}if(isOlderVersion(_0x29a960,_0x46520b(0x272))){let _0x1729a1=dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))[_0x46520b(0x25c)]({'botID':botID})[_0x46520b(0x264)]();if(_0x1729a1){const _0xa66647=_0x1729a1['exchange'],_0x37dc60=_0xa66647?capitalize(_0xa66647):_0x46520b(0x183);dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))[_0x46520b(0x25c)]({'botID':botID})[_0x46520b(0x28f)]({'exchange':_0x37dc60})['write']();}}if(isOlderVersion(_0x29a960,_0x46520b(0x270))){let _0x23a75f=dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))['find']({'botID':botID})[_0x46520b(0x264)]();if(_0x23a75f){const _0x5da7a3=_0x23a75f['marketcapEnabled'],_0x28e55c=_0x5da7a3?_0x46520b(0x2ea):![];dbConfig['get']('bot')[_0x46520b(0x25c)]({'botID':botID})[_0x46520b(0x28f)]({'marketcapEnabled':_0x28e55c})['write']();}}if(isOlderVersion(_0x29a960,_0x46520b(0x187))){let _0x3dea90=dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))[_0x46520b(0x25c)]({'botID':botID})[_0x46520b(0x264)]();if(_0x3dea90){const _0x3dcc99=_0x3dea90[_0x46520b(0x13c)],_0x41ad2e=_0x3dcc99?'update-liquidity':![];dbConfig[_0x46520b(0x16e)](_0x46520b(0x27a))[_0x46520b(0x25c)]({'botID':botID})[_0x46520b(0x28f)]({'autoliquidity':_0x41ad2e})[_0x46520b(0x1da)]();}}let _0x4a91ea=dbPerformance[_0x46520b(0x16e)](_0x46520b(0x197))[_0x46520b(0x264)]();isOlderVersion(_0x4a91ea,'2.3.5')&&setStartDatePerformance();let _0x480fde=dbCoinResults[_0x46520b(0x16e)](_0x46520b(0x197))[_0x46520b(0x264)]();if(isOlderVersion(_0x480fde,_0x46520b(0x25e))){let _0x28782d=dbCoinResults[_0x46520b(0x16e)](_0x46520b(0x1c8))[_0x46520b(0x264)]();if(_0x28782d[_0x46520b(0x227)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x15730f=_0x22b3bf;dbConfig[_0x15730f(0x23c)](_0x15730f(0x197),serverversion)[_0x15730f(0x1da)](),dbPerformance[_0x15730f(0x23c)]('version',serverversion)[_0x15730f(0x1da)](),dbLogs[_0x15730f(0x23c)](_0x15730f(0x197),serverversion)[_0x15730f(0x1da)](),dbCoinResults[_0x15730f(0x23c)](_0x15730f(0x197),serverversion)[_0x15730f(0x1da)]();}function getConfiguration(_0x41b0fe){const _0x2a7197=_0x22b3bf;let _0x50b4ca=dbConfig['get']('bot')[_0x2a7197(0x25c)]({'botID':_0x41b0fe})[_0x2a7197(0x264)]();if(_0x50b4ca){let _0x2c6900=![];typeof _0x50b4ca[_0x2a7197(0x20d)]==_0x2a7197(0x175)&&(_0x50b4ca={..._0x50b4ca,'threshold':Number(_0x50b4ca['threshold'])},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x2dd)]==undefined&&(_0x50b4ca={..._0x50b4ca,'change24h':-0x14},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x1dc)]==undefined&&(_0x50b4ca={..._0x50b4ca,'fiat':_0x2a7197(0x286)},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x280)]==undefined&&(_0x50b4ca={..._0x50b4ca,'onepagemode':settings[_0x2a7197(0x280)]},_0x2c6900=!![]),_0x50b4ca['colorscheme']==undefined&&(_0x50b4ca={..._0x50b4ca,'colorscheme':_0x2a7197(0x306)},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x13c)]==undefined&&(_0x50b4ca={..._0x50b4ca,'autoliquidity':'update-liquidity'},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x2e1)]==undefined&&(_0x50b4ca={..._0x50b4ca,'marketcapApi':settings[_0x2a7197(0x2e1)]?!![]:![]},_0x2c6900=!![]),_0x50b4ca[_0x2a7197(0x28c)]==undefined&&(_0x50b4ca={..._0x50b4ca,'marketcapEnabled':![]},_0x2c6900=!![]),_0x2c6900&&(_0x50b4ca={'botID':_0x50b4ca['botID'],'exchange':_0x50b4ca[_0x2a7197(0x179)],'apiKey':_0x50b4ca[_0x2a7197(0x1c9)],'apiSecret':_0x50b4ca[_0x2a7197(0x174)],'apiPassword':_0x50b4ca[_0x2a7197(0x1f7)],'basecoin':_0x50b4ca[_0x2a7197(0x226)],'botname':_0x50b4ca[_0x2a7197(0x1cc)],'showname':_0x50b4ca[_0x2a7197(0x14f)],'threshold':_0x50b4ca[_0x2a7197(0x20d)],'ordertype':_0x50b4ca[_0x2a7197(0x26d)],'timeout':_0x50b4ca[_0x2a7197(0x256)],'fiat':_0x50b4ca[_0x2a7197(0x1dc)],'startdate':_0x50b4ca[_0x2a7197(0x26e)],'recreate':_0x50b4ca['recreate'],'timeshift':_0x50b4ca[_0x2a7197(0x2a6)],'onepagemode':_0x50b4ca[_0x2a7197(0x280)],'headless':_0x50b4ca[_0x2a7197(0x2ff)],'cooldown':_0x50b4ca['cooldown'],'change24h':_0x50b4ca[_0x2a7197(0x2dd)],'emojibuy':_0x50b4ca['emojibuy'],'emojisell':_0x50b4ca[_0x2a7197(0x2a3)],'colorscheme':_0x50b4ca[_0x2a7197(0x14e)],'marketcapApi':_0x50b4ca[_0x2a7197(0x2e1)],'marketcapEnabled':_0x50b4ca[_0x2a7197(0x28c)],'portfolio':_0x50b4ca[_0x2a7197(0x2da)],'autoliquidity':_0x50b4ca[_0x2a7197(0x13c)],'liquidity':_0x50b4ca[_0x2a7197(0x1fe)],'openOrders':_0x50b4ca[_0x2a7197(0x168)]},dbConfig['get'](_0x2a7197(0x27a))[_0x2a7197(0x1e5)]()[_0x2a7197(0x1da)](),dbConfig[_0x2a7197(0x16e)](_0x2a7197(0x27a))['push'](_0x50b4ca)[_0x2a7197(0x1da)]());}else _0x50b4ca={'botID':_0x41b0fe,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2a7197(0x240)+_0x41b0fe,'showname':![],'threshold':0x3,'ordertype':_0x2a7197(0x177),'timeout':0x14,'fiat':_0x2a7197(0x286),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2a7197(0x2a6)],'onepagemode':settings[_0x2a7197(0x280)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2a7197(0x306),'marketcapApi':settings[_0x2a7197(0x2e1)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x2a7197(0x1a8),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x50b4ca;}function emittedConfiguration(){const _0x2b544c=_0x22b3bf;let _0x2d45f1;if(config['apiKey']=='')_0x2d45f1={...config,'configstate':_0x2b544c(0x2c7)};else config[_0x2b544c(0x1c9)]==_0x2b544c(0x17a)?_0x2d45f1={...config,'configstate':_0x2b544c(0x169)}:(_0x2d45f1={...config,'apiKey':_0x2b544c(0x15d),'apiSecret':'************'},config[_0x2b544c(0x1f7)]&&(_0x2d45f1['apiPassword']='************'));return _0x2d45f1[_0x2b544c(0x1aa)]=enableFiatToggle,_0x2d45f1;}function getSettings(){const _0x36d2d7=_0x22b3bf;return dbSettings['get'](_0x36d2d7(0x16b))[_0x36d2d7(0x264)]();}function getSecure(){const _0x49cdcb=_0x22b3bf;return dbSecure[_0x49cdcb(0x16e)](_0x49cdcb(0x2b7))[_0x49cdcb(0x264)]()||{};}function updateTimeshift(_0x5c6352){const _0x4bf52b=_0x22b3bf;let _0x48fec9=dbConfig[_0x4bf52b(0x16e)](_0x4bf52b(0x27a))['find']({'botID':botID})[_0x4bf52b(0x264)]();_0x48fec9&&dbConfig[_0x4bf52b(0x16e)](_0x4bf52b(0x27a))[_0x4bf52b(0x25c)]({'botID':botID})[_0x4bf52b(0x28f)]({'timeshift':_0x5c6352})['write'](),config[_0x4bf52b(0x2a6)]=_0x5c6352,proxyEmit(_0x4bf52b(0x27b),emittedConfiguration());}function updateOnepagemode(_0x476d37){const _0x42e71a=_0x22b3bf;let _0x3a3897=dbConfig[_0x42e71a(0x16e)](_0x42e71a(0x27a))[_0x42e71a(0x25c)]({'botID':botID})['value']();_0x3a3897&&dbConfig[_0x42e71a(0x16e)](_0x42e71a(0x27a))['find']({'botID':botID})[_0x42e71a(0x28f)]({'onepagemode':_0x476d37})[_0x42e71a(0x1da)](),config['onepagemode']=_0x476d37,proxyEmit(_0x42e71a(0x27b),emittedConfiguration());}function updateMarketcapApi(_0x134c82){const _0x204b4f=_0x22b3bf,_0x377a81=_0x134c82?!![]:![];let _0x3c29d7=dbConfig[_0x204b4f(0x16e)](_0x204b4f(0x27a))[_0x204b4f(0x25c)]({'botID':botID})[_0x204b4f(0x264)]();_0x3c29d7&&dbConfig[_0x204b4f(0x16e)](_0x204b4f(0x27a))['find']({'botID':botID})[_0x204b4f(0x28f)]({'marketcapApi':_0x377a81})[_0x204b4f(0x1da)](),config[_0x204b4f(0x2e1)]=_0x377a81,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x356f84){const _0x37c0fa=_0x22b3bf;logger[_0x37c0fa(0x2cc)](_0x37c0fa(0x253));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x538166=![],_0x53bf03=![],_0xac5751=[];_0x356f84['portfolio']['forEach'](_0x414391=>{const _0x175d16=_0x37c0fa;if(!_0x414391[_0x175d16(0x206)]&&_0x414391[_0x175d16(0x2f5)]!=_0x356f84[_0x175d16(0x226)])_0xac5751[_0x175d16(0x282)](_0x414391[_0x175d16(0x195)]);}),_0xac5751[_0x37c0fa(0x254)](_0x383680=>{const _0x4e66a3=_0x37c0fa,_0x48e7ba=currentCoins[_0x4e66a3(0x25c)](_0x599663=>_0x599663[_0x4e66a3(0x195)]==_0x383680);!_0x48e7ba&&(_0x538166=!![]);}),currentCoins['forEach'](_0x8043f8=>{const _0x55beca=_0x37c0fa;if(_0x8043f8['coin']!=config['basecoin']){const _0x5839e0=_0xac5751[_0x55beca(0x25c)](_0x383fac=>_0x383fac==_0x8043f8[_0x55beca(0x195)]);!_0x5839e0&&(_0x538166=!![]);}}),_0x356f84[_0x37c0fa(0x2da)][_0x37c0fa(0x254)](_0x4b7bf3=>{const _0x30e092=_0x37c0fa,_0x4c5390=config[_0x30e092(0x2da)][_0x30e092(0x25c)](_0x18ddda=>_0x18ddda[_0x30e092(0x2f5)]==_0x4b7bf3[_0x30e092(0x2f5)]);if(_0x4c5390&&_0x4b7bf3[_0x30e092(0x2f2)]!=_0x4c5390[_0x30e092(0x2f2)])_0x53bf03=!![];});let _0x110433=dbConfig[_0x37c0fa(0x16e)](_0x37c0fa(0x27a))[_0x37c0fa(0x25c)]({'botID':botID})[_0x37c0fa(0x264)]();_0x356f84={..._0x356f84,'apiKey':decryptRSA(secure[_0x37c0fa(0x2ab)],_0x356f84['apiKey']),'apiSecret':decryptRSA(secure[_0x37c0fa(0x2ab)],_0x356f84['apiSecret'])};_0x356f84[_0x37c0fa(0x1f7)]&&(_0x356f84[_0x37c0fa(0x1f7)]=decryptRSA(secure[_0x37c0fa(0x2ab)],_0x356f84['apiPassword']));let _0x149e46=![];if(_0x110433){_0x356f84[_0x37c0fa(0x1c9)]==_0x37c0fa(0x15d)?_0x356f84[_0x37c0fa(0x1c9)]=config[_0x37c0fa(0x1c9)]:_0x149e46=!![];_0x356f84['apiSecret']==_0x37c0fa(0x15d)?_0x356f84[_0x37c0fa(0x174)]=config[_0x37c0fa(0x174)]:_0x149e46=!![];if(_0x356f84[_0x37c0fa(0x1f7)]=='************')_0x356f84[_0x37c0fa(0x1f7)]=config[_0x37c0fa(0x1f7)];else{if(_0x356f84[_0x37c0fa(0x1f7)])_0x149e46=!![];}dbConfig[_0x37c0fa(0x16e)]('bot')[_0x37c0fa(0x25c)]({'botID':botID})['assign'](_0x356f84)[_0x37c0fa(0x1da)]();}else dbConfig['get'](_0x37c0fa(0x27a))[_0x37c0fa(0x282)](_0x356f84)[_0x37c0fa(0x1da)](),_0x149e46=!![],process[_0x37c0fa(0x22d)]({'status':_0x37c0fa(0x1e6),'live':'running'},_0x2d7ecb=>{});process['send']({'botname':_0x356f84[_0x37c0fa(0x1cc)]},_0x1e91b8=>{}),config={..._0x356f84},updateBotManager(),proxyEmit(_0x37c0fa(0x1c4)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x149e46)!_0x110433?await reset(!![]):getBalances();else _0x538166||_0x53bf03?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x517c55){const _0x5bf092=_0x22b3bf,_0x3622a8={...config,'headless':_0x517c55[_0x5bf092(0x2ff)]};let _0x25fb4c=dbConfig[_0x5bf092(0x16e)]('bot')[_0x5bf092(0x25c)]({'botID':botID})[_0x5bf092(0x264)]();_0x25fb4c&&dbConfig['get'](_0x5bf092(0x27a))[_0x5bf092(0x25c)]({'botID':botID})[_0x5bf092(0x28f)](_0x3622a8)[_0x5bf092(0x1da)](),config={..._0x3622a8},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x15d91e){const _0x109d8e=_0x22b3bf,_0xe3648f={...config,'fiat':_0x15d91e};let _0x94a173=dbConfig[_0x109d8e(0x16e)](_0x109d8e(0x27a))[_0x109d8e(0x25c)]({'botID':botID})[_0x109d8e(0x264)]();_0x94a173&&dbConfig[_0x109d8e(0x16e)](_0x109d8e(0x27a))[_0x109d8e(0x25c)]({'botID':botID})[_0x109d8e(0x28f)](_0xe3648f)[_0x109d8e(0x1da)](),config={..._0xe3648f},proxyEmit(_0x109d8e(0x27b),emittedConfiguration());}function resetHistory(){const _0x32c811=_0x22b3bf;logger[_0x32c811(0x145)]('Resetting\x20bot\x20history');try{if(fs[_0x32c811(0x1af)](path[_0x32c811(0x2c6)](configpath,'bot-'+botID+_0x32c811(0x26b))))fs[_0x32c811(0x2e3)](path['join'](configpath,_0x32c811(0x291)+botID+_0x32c811(0x26b)));if(fs[_0x32c811(0x1af)](path[_0x32c811(0x2c6)](configpath,_0x32c811(0x291)+botID+_0x32c811(0x1e7))))fs[_0x32c811(0x2e3)](path[_0x32c811(0x2c6)](configpath,_0x32c811(0x291)+botID+_0x32c811(0x1e7)));if(fs['existsSync'](path['join'](configpath,_0x32c811(0x291)+botID+_0x32c811(0x2f1))))fs['unlinkSync'](path['join'](configpath,_0x32c811(0x291)+botID+_0x32c811(0x2f1)));}catch(_0x2263eb){if(_0x2263eb)logger[_0x32c811(0x145)](_0x32c811(0x24e),_0x2263eb);}const _0x59e708=getDate();let _0x497d29=[];currentCoins[_0x32c811(0x254)](_0x1208bc=>{const _0x513673=_0x32c811;_0x497d29[_0x513673(0x282)]({'coin':_0x1208bc[_0x513673(0x2f5)],'number':_0x1208bc['number'],'price':_0x1208bc[_0x513673(0x1b8)]});});let _0x2e0a25=dbConfig[_0x32c811(0x16e)](_0x32c811(0x27a))[_0x32c811(0x25c)]({'botID':botID})['value']();_0x2e0a25&&(dbConfig[_0x32c811(0x16e)](_0x32c811(0x27a))['find']({'botID':botID})[_0x32c811(0x28f)]({'liquidity':[{'date':_0x59e708,'changes':_0x497d29}]})[_0x32c811(0x1da)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x2d6917){return _0x2d6917['replace']('/','');}function updateHighestFee(_0x2bb304){const _0x12b2d1=_0x22b3bf;if(_0x2bb304[_0x12b2d1(0x1f2)]){let _0x46fc32={'filled':_0x2bb304['filled']*_0x2bb304[_0x12b2d1(0x1bb)],'amount':_0x2bb304[_0x12b2d1(0x172)]*_0x2bb304[_0x12b2d1(0x1bb)],'side':_0x2bb304[_0x12b2d1(0x303)]==_0x12b2d1(0x244)?_0x12b2d1(0x198):_0x12b2d1(0x244),'price':0x1/_0x2bb304['price']};_0x2bb304={..._0x2bb304,..._0x46fc32};}const _0x2e2fae=defaultFee*_0x2bb304['filled']*_0x2bb304['price'];lastFees[_0x12b2d1(0x209)]['length']===0x14&&lastFees[_0x12b2d1(0x209)][_0x12b2d1(0x23b)](),lastFees['recent20']['push'](_0x2e2fae),lastFees[_0x12b2d1(0x1bd)]=Math[_0x12b2d1(0x1e8)](...lastFees[_0x12b2d1(0x209)]);}async function updateNumberCoinsCcxt(_0x48c4f2){const _0x25e2b3=_0x22b3bf;logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x249)+_0x48c4f2[_0x25e2b3(0x195)]+_0x25e2b3(0x2c5)+_0x48c4f2[_0x25e2b3(0x258)]+_0x25e2b3(0x2c5)+_0x48c4f2[_0x25e2b3(0x172)]+_0x25e2b3(0x277)+_0x48c4f2[_0x25e2b3(0x278)]+_0x25e2b3(0x2c5)+_0x48c4f2['id']);let _0x26d048=_0x48c4f2['status'],_0x554cd7=![];currentCoins[_0x25e2b3(0x254)](_0x59a686=>{const _0x40f1d9=_0x25e2b3;_0x59a686[_0x40f1d9(0x195)]==_0x48c4f2['symbol']&&(_0x554cd7=!![]);});if(!_0x554cd7)return;let _0x37a0bd;const _0x13248c=_0x4ae67d=>{const _0x415174=_0x25e2b3;_0x37a0bd=currentCoins[_0x415174(0x25c)](_0x3fcd4f=>_0x3fcd4f['symbol']==_0x48c4f2[_0x415174(0x195)]);if(_0x37a0bd)_0x37a0bd[_0x415174(0x214)]=_0x4ae67d;};let _0x3a6f16=![];for(const _0x2f54b2 of lastOrders){const _0x478d52=0x64,_0x3a5e1c=0x1388;let _0x56bebe=0x0;while(!_0x2f54b2[_0x25e2b3(0x2a8)]&&_0x56bebe*_0x478d52<_0x3a5e1c){_0x56bebe++,await sleep(_0x478d52);}if(_0x56bebe>0x0)logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x1b0)+_0x56bebe*_0x478d52/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x2f54b2['orderId']==_0x48c4f2['id']&&(_0x3a6f16=!![]);}if(_0x26d048==_0x25e2b3(0x1bf)){_0x13248c(_0x25e2b3(0x1bf));if(_0x48c4f2[_0x25e2b3(0x172)]>0x0){if(_0x3a6f16){setBlockTransactionDetection(!![]),logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x171)+_0x48c4f2['id']);const _0x47e120=await getCoins(balanceUpdateDelay,undefined,undefined,_0x37a0bd);[currentCoins,currentCoinsAll]=_0x47e120,setBlockTransactionDetection(![]);}else logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x1ad)+_0x48c4f2['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x26d048=='canceled'){_0x13248c(_0x25e2b3(0x1e3));const _0x4556cc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4556cc,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x26d048==_0x25e2b3(0x233)){if(lastOrders)for(const _0x5ca668 of lastOrders){if(_0x5ca668[_0x25e2b3(0x2a8)]==_0x48c4f2['id']){logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x2d8)+_0x48c4f2['id']),_0x3a6f16=!![];if(_0x5ca668[_0x25e2b3(0x172)]==0x0){setBlockTransactionDetection(!![]),logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x2d4)+_0x48c4f2['id']);if(_0x48c4f2[_0x25e2b3(0x27e)])_0x5ca668[_0x25e2b3(0x1bb)]=_0x48c4f2[_0x25e2b3(0x27e)];else{if(_0x48c4f2[_0x25e2b3(0x1bb)])_0x5ca668[_0x25e2b3(0x1bb)]=_0x48c4f2[_0x25e2b3(0x1bb)];else{}}_0x5ca668['filled']=_0x48c4f2[_0x25e2b3(0x172)],updateHighestFee(_0x5ca668);const _0x21875d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x37a0bd);[currentCoins,currentCoinsAll]=_0x21875d,setBlockTransactionDetection(![]),await validateOrders(),_0x13248c(_0x25e2b3(0x172)),_0x5ca668[_0x25e2b3(0x1f1)]={'currency':_0x48c4f2[_0x25e2b3(0x1f1)]?_0x48c4f2['fee'][_0x25e2b3(0x16f)]:null,'cost':_0x48c4f2[_0x25e2b3(0x1f1)]?_0x48c4f2['fee'][_0x25e2b3(0x289)]:0x0},await updateCoinResults(_0x5ca668);}}}!_0x3a6f16&&(logger[_0x25e2b3(0x2cc)](_0x25e2b3(0x23f)+_0x48c4f2['id']),_0x13248c('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1c18d3=JSON[_0x25e2b3(0x28d)](lastBalances[_0x25e2b3(0x2da)]);const _0xdfe33b=_0x1c18d3[_0x25e2b3(0x25c)](_0x2e5931=>_0x2e5931[_0x25e2b3(0x195)]==_0x48c4f2['symbol']);if(_0xdfe33b){if(_0x26d048=='open')_0xdfe33b[_0x25e2b3(0x214)]=_0xdfe33b[_0x25e2b3(0x214)]==_0x25e2b3(0x172)?_0x25e2b3(0x172):_0x25e2b3(0x1bf);else{if(_0x26d048=='canceled')_0xdfe33b['orderstatus']=_0xdfe33b[_0x25e2b3(0x214)]==_0x25e2b3(0x172)?'filled':'canceled';else _0x26d048==_0x25e2b3(0x233)&&(_0xdfe33b[_0x25e2b3(0x214)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x25e2b3(0x1db)](_0x1c18d3)},proxyEmit(_0x25e2b3(0x265),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x3bbfae=![];currentCoins['forEach'](_0x5835c0=>{const _0x5859fd=_0x5006;_0x3bbfae=allOpenOrders[_0x5859fd(0x25c)](_0xad0ec9=>_0xad0ec9[_0x5859fd(0x195)]==_0x5835c0[_0x5859fd(0x195)]),_0x5835c0[_0x5859fd(0x214)]=_0x3bbfae?_0x5859fd(0x1bf):_0x5859fd(0x19a);});}async function fetchBalance(_0x5c9b90=!![]){const _0x24ac8b=_0x22b3bf;let _0x24d9d7;try{return _0x24d9d7=await exchange[_0x24ac8b(0x166)](),mybalances=_0x24d9d7[_0x24ac8b(0x217)],!![];}catch(_0x1e90d9){return!_0x5c9b90?handleErrorNoStop(_0x1e90d9,_0x24ac8b(0x2af)):await handleError(_0x1e90d9,_0x24ac8b(0x2af)),![];}}async function getCoins(_0x2baf05=0x0,_0x394edc=!![],_0x283975=config[_0x22b3bf(0x226)],_0x2ef5e0){const _0xfee355=_0x22b3bf;let _0x275930=[],_0x3b0e8d=[],_0x2717a8=[];if(_0x2baf05)await sleep(_0x2baf05);if(botPaused)return[currentCoins,currentCoinsAll];let _0x1f5f13=![],_0x2c32ab=0x0,_0x5cdf4f,_0x125ca9;_0x2ef5e0&&(_0x5cdf4f=currentCoins[_0xfee355(0x25c)](_0x132700=>_0x132700[_0xfee355(0x2f5)]==_0x2ef5e0['coin']),_0x125ca9=_0x5cdf4f[_0xfee355(0x261)]);while(!_0x1f5f13){const _0x3270a4=await fetchBalance(_0x394edc);if(_0x3270a4){if(_0x2ef5e0){if(mybalances[_0x2ef5e0['coin']]!=_0x125ca9)logger[_0xfee355(0x2cc)](_0xfee355(0x2fd)+_0x2ef5e0[_0xfee355(0x2f5)]+':\x20'+mybalances[_0x2ef5e0['coin']]+'\x20('+_0x125ca9+')'),_0x1f5f13=!![];else{logger[_0xfee355(0x2cc)](_0xfee355(0x1f0)+_0x2ef5e0[_0xfee355(0x2f5)]+':\x20'+mybalances[_0x2ef5e0[_0xfee355(0x2f5)]]+'\x20('+_0x125ca9+')'),_0x2c32ab++;if(_0x2c32ab<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0xfee355(0x2cc)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x2c32ab+_0xfee355(0x2bb));break;}}}else break;}}for(const [_0x18c819,_0x59ecf3]of Object['entries'](mybalances)){_0x2717a8[_0xfee355(0x282)](_0x18c819);}config[_0xfee355(0x2da)][_0xfee355(0x254)](_0x259288=>{const _0x29dd93=_0xfee355;!_0x2717a8[_0x29dd93(0x1fb)](_0x259288[_0x29dd93(0x2f5)])&&(mybalances[_0x259288[_0x29dd93(0x2f5)]]=0x0);});if(_0x283975=='')for(const [_0xbabf26,_0x3bd26f]of Object[_0xfee355(0x2bf)](mybalances)){_0x3bd26f!=0x0&&_0x275930[_0xfee355(0x282)]({'coin':_0xbabf26});}else for(const [_0xdd8e42,_0x1c0e61]of Object[_0xfee355(0x2bf)](mybalances)){const _0x51bc0a=config[_0xfee355(0x2da)][_0xfee355(0x25c)](_0x3c07db=>_0x3c07db[_0xfee355(0x2f5)]==_0xdd8e42),_0x549bac=_0xdd8e42+'/'+_0x283975,_0x13d373=_0x283975+'/'+_0xdd8e42,_0x481fca=currentCoins[_0xfee355(0x25c)](_0x2a14c7=>_0x2a14c7[_0xfee355(0x2f5)]==_0xdd8e42);if((_0x1c0e61!=0x0||_0x51bc0a)&&(allSymbols[_0xfee355(0x1fb)](_0x549bac)||_0xdd8e42==_0x283975))_0x481fca?_0x275930['push']({..._0x481fca,'number':Math[_0xfee355(0x1e8)](_0x1c0e61+(_0x51bc0a&&_0x51bc0a['offset']||0x0),0x0)}):_0x275930['push']({'coin':_0xdd8e42,'symbol':_0x549bac,'reverse':![],'number':Math[_0xfee355(0x1e8)](_0x1c0e61+(_0x51bc0a&&_0x51bc0a[_0xfee355(0x2f2)]||0x0),0x0),'orderstatus':_0xfee355(0x19a)});else{if((_0x1c0e61!=0x0||_0x51bc0a)&&allSymbols[_0xfee355(0x1fb)](_0x13d373))_0x481fca?_0x275930['push']({..._0x481fca,'number':Math['max'](_0x1c0e61+(_0x51bc0a&&_0x51bc0a[_0xfee355(0x2f2)]||0x0),0x0)}):_0x275930[_0xfee355(0x282)]({'coin':_0xdd8e42,'symbol':_0x13d373,'reverse':!![],'number':Math[_0xfee355(0x1e8)](_0x1c0e61+(_0x51bc0a&&_0x51bc0a[_0xfee355(0x2f2)]||0x0),0x0),'orderstatus':_0xfee355(0x19a)});else _0x51bc0a&&_0x275930[_0xfee355(0x282)]({'coin':_0x51bc0a[_0xfee355(0x2f5)],'symbol':_0x51bc0a['symbol'],'reverse':_0x51bc0a['reverse'],'number':0x0,'orderstatus':'none'});}}return _0x275930[_0xfee355(0x19d)]((_0x1eb25e,_0x55fb80)=>_0x1eb25e[_0xfee355(0x1b4)]<_0x55fb80[_0xfee355(0x1b4)]?0x1:_0x55fb80[_0xfee355(0x1b4)]<_0x1eb25e['delta']?-0x1:0x0),_0x3b0e8d=cloneDeep(_0x275930),_0x275930=_0x275930[_0xfee355(0x287)](_0x218949=>{const _0x9c1751=_0xfee355,_0x5f4a56=config[_0x9c1751(0x2da)][_0x9c1751(0x25c)](_0x58302d=>_0x58302d['coin']==_0x218949[_0x9c1751(0x2f5)]);return _0x5f4a56&&!_0x5f4a56[_0x9c1751(0x206)];}),[_0x275930,_0x3b0e8d];}async function getCoinNumber(_0x521686){const _0x27fcca=_0x22b3bf;let _0x7ab685;try{const _0x52c320=await exchange['fetchBalance']();_0x7ab685=_0x52c320[_0x27fcca(0x217)][_0x521686];}catch(_0x143eb2){await handleError(_0x143eb2,_0x27fcca(0x2f8));}return _0x7ab685;}async function getOpenOrders(){const _0x36967d=_0x22b3bf;let _0x4a1ef9;allOpenOrders=[];try{for(const _0x4766c3 of config['portfolio']){!_0x4766c3['excluded']&&_0x4766c3[_0x36967d(0x2f5)]!=config['basecoin']&&(_0x4a1ef9=await exchange[_0x36967d(0x1c1)](_0x4766c3[_0x36967d(0x195)]),_0x4a1ef9[_0x36967d(0x227)]>0x0&&allOpenOrders[_0x36967d(0x282)](_0x4a1ef9[0x0]));}}catch(_0x56d8a7){await handleError(_0x56d8a7,_0x36967d(0x2ae));}}async function handleOpenOrders(_0x11fecb=0x0){const _0x5dec43=_0x22b3bf;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x5dec43(0x1bc)]&&allOrdersPlaced&&(_0x11fecb==0x0?(logger[_0x5dec43(0x2cc)](_0x5dec43(0x2a2)),_0x11fecb++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5dec43(0x2cc)](_0x5dec43(0x182)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x6912a9){const _0x568daf=_0x22b3bf,_0x1dfbb3=ccxt['pro'][_0x6912a9['exchange'][_0x568daf(0x246)]()],_0x3922f1=new _0x1dfbb3({'apiKey':_0x6912a9[_0x568daf(0x1c9)],'secret':_0x6912a9[_0x568daf(0x174)],'options':{'defaultType':_0x568daf(0x16a)}});if(_0x6912a9[_0x568daf(0x1f7)])_0x3922f1['password']=_0x6912a9[_0x568daf(0x1f7)];try{await _0x3922f1[_0x568daf(0x166)]();}catch(_0x322696){logger[_0x568daf(0x2cc)](_0x568daf(0x15f)+_0x322696[_0x568daf(0x2f6)]());throw _0x322696;}}function cloneDeep(_0x3adfe5){const _0x601b3c=_0x22b3bf;return JSON[_0x601b3c(0x28d)](JSON['stringify'](_0x3adfe5));}async function getPortfolio(_0x258860){const _0x1dd626=_0x22b3bf;let _0x32258c=[],_0x1c31a8=[],_0x384625=[],_0x3c4054;_0x258860['apiKey']=decryptRSA(secure[_0x1dd626(0x2ab)],_0x258860['apiKey']),_0x258860[_0x1dd626(0x174)]=decryptRSA(secure[_0x1dd626(0x2ab)],_0x258860['apiSecret']);if(_0x258860[_0x1dd626(0x1f7)])_0x258860[_0x1dd626(0x1f7)]=decryptRSA(secure[_0x1dd626(0x2ab)],_0x258860['apiPassword']);if(_0x258860[_0x1dd626(0x1c9)]!==_0x1dd626(0x15d)||_0x258860[_0x1dd626(0x174)]!==_0x1dd626(0x15d)||_0x258860['apiPassword']&&_0x258860[_0x1dd626(0x1f7)]!=='************'){if(config['exchange']){if(_0x258860['apiKey']==_0x1dd626(0x15d))_0x258860[_0x1dd626(0x1c9)]=config[_0x1dd626(0x1c9)];if(_0x258860[_0x1dd626(0x174)]=='************')_0x258860[_0x1dd626(0x174)]=config[_0x1dd626(0x174)];if(_0x258860[_0x1dd626(0x1f7)]==_0x1dd626(0x15d))_0x258860[_0x1dd626(0x1f7)]=config['apiPassword'];}try{await testAPI(_0x258860);}catch(_0xeec11b){if(_0xeec11b[_0x1dd626(0x2f6)]()[_0x1dd626(0x1fb)](_0x1dd626(0x2b2))){logHistory(_0x1dd626(0x18d),_0x1dd626(0x2fe)),proxyEmit(_0x1dd626(0x191),![]);return;}else{logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger[_0x1dd626(0x2cc)](_0x1dd626(0x1ca),_0xeec11b),proxyEmit(_0x1dd626(0x191),![]);return;}}exchange?updateExchange(_0x258860['apiKey'],_0x258860[_0x1dd626(0x174)],_0x258860[_0x1dd626(0x1f7)]):await initExchange(_0x258860[_0x1dd626(0x179)],_0x258860[_0x1dd626(0x1c9)],_0x258860[_0x1dd626(0x174)],_0x258860[_0x1dd626(0x1f7)]);await loadSymbols();const _0x113009=await getCoins(0x0,![],_0x258860[_0x1dd626(0x226)]);_0x384625=cloneDeep(_0x113009[0x1]);}else{const _0x247818=await getCoins();_0x384625=cloneDeep(_0x247818[0x1]);}if(_0x258860[_0x1dd626(0x226)]=='')proxyEmit(_0x1dd626(0x191),!![]),proxyEmit(_0x1dd626(0x304),_0x384625);else{_0x384625[_0x1dd626(0x254)](_0x47866f=>{const _0x3e2c59=_0x1dd626;if(_0x47866f[_0x3e2c59(0x2f5)]!=_0x258860['basecoin']&&allSymbols[_0x3e2c59(0x1fb)](_0x47866f[_0x3e2c59(0x195)]))_0x32258c['push'](_0x47866f[_0x3e2c59(0x195)]);});if(_0x32258c['length']==0x0)logHistory('error',_0x1dd626(0x2db));else{try{_0x1c31a8=await getTickers(_0x32258c);}catch(_0x4c0662){logHistory(_0x1dd626(0x18d),_0x1dd626(0x269)),logger[_0x1dd626(0x2cc)](_0x1dd626(0x2aa),_0x4c0662),proxyEmit(_0x1dd626(0x191),![]);return;}_0x384625[_0x1dd626(0x254)](_0x2d7fcf=>{const _0x397328=_0x1dd626;_0x2d7fcf[_0x397328(0x2f5)]!=_0x258860[_0x397328(0x226)]?_0x1c31a8[_0x2d7fcf[_0x397328(0x195)]]?_0x3c4054=_0x2d7fcf[_0x397328(0x1f2)]?0x1/_0x1c31a8[_0x2d7fcf[_0x397328(0x195)]][_0x397328(0x1b8)]:_0x1c31a8[_0x2d7fcf[_0x397328(0x195)]][_0x397328(0x1b8)]:_0x3c4054=0x0:_0x3c4054=0x1,_0x2d7fcf[_0x397328(0x1bb)]=formatResult(_0x3c4054,0x8);}),await getMarketCap(_0x384625),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x384625);}}}function truncateTradeAmount(_0x91f2f0,_0x16f918){let _0x4fcbf3=0x0;try{_0x4fcbf3=exchange['amountToPrecision'](_0x91f2f0,_0x16f918);}catch(_0x1f04f0){}return _0x4fcbf3;}function checkMinimums(_0x45a411){const _0x1b2d47=_0x22b3bf;let _0x412b33=!![];const _0x1af92a=!_0x45a411[_0x1b2d47(0x1f2)]?markets[_0x45a411[_0x1b2d47(0x195)]][_0x1b2d47(0x234)][_0x1b2d47(0x278)][_0x1b2d47(0x1a3)]:markets[_0x45a411['symbol']]['limits'][_0x1b2d47(0x289)]['min'],_0x328251=!_0x45a411[_0x1b2d47(0x1f2)]?markets[_0x45a411[_0x1b2d47(0x195)]][_0x1b2d47(0x234)][_0x1b2d47(0x289)][_0x1b2d47(0x1a3)]:markets[_0x45a411['symbol']]['limits'][_0x1b2d47(0x278)][_0x1b2d47(0x1a3)],_0x4368cb=truncateTradeAmount(_0x45a411[_0x1b2d47(0x195)],_0x45a411[_0x1b2d47(0x2d7)]);_0x45a411[_0x1b2d47(0x2d7)]=_0x4368cb;if(Math['abs'](_0x4368cb)<_0x1af92a)_0x412b33=![];if(Math[_0x1b2d47(0x27c)](_0x4368cb)*_0x45a411[_0x1b2d47(0x1b8)]<_0x328251)_0x412b33=![];if(_0x45a411[_0x1b2d47(0x303)]==_0x1b2d47(0x244)){let _0x1fb90b=config['portfolio'][_0x1b2d47(0x25c)](_0x1dc064=>_0x1dc064[_0x1b2d47(0x2f5)]==_0x45a411[_0x1b2d47(0x2f5)]);if(_0x1fb90b[_0x1b2d47(0x2f2)]>0x0){if(Math['abs'](_0x4368cb)>_0x45a411[_0x1b2d47(0x261)]-_0x1fb90b[_0x1b2d47(0x2f2)])_0x412b33=![];}else{if(Math[_0x1b2d47(0x27c)](_0x4368cb)>_0x45a411['number'])_0x412b33=![];}}if(_0x45a411['side']==_0x1b2d47(0x198)){let _0x3c916c=config[_0x1b2d47(0x2da)][_0x1b2d47(0x25c)](_0x4435ef=>_0x4435ef[_0x1b2d47(0x2f5)]==config['basecoin']),_0x2fa126=currentCoins['find'](_0x1a03c8=>_0x1a03c8[_0x1b2d47(0x2f5)]==config['basecoin']);if(_0x3c916c[_0x1b2d47(0x2f2)]>0x0){if(Math[_0x1b2d47(0x27c)](_0x4368cb)*_0x45a411[_0x1b2d47(0x1b8)]>_0x2fa126[_0x1b2d47(0x261)]-_0x3c916c[_0x1b2d47(0x2f2)])_0x412b33=![];}else{if(Math[_0x1b2d47(0x27c)](_0x4368cb)*_0x45a411[_0x1b2d47(0x1b8)]>_0x2fa126[_0x1b2d47(0x261)])_0x412b33=![];}}return _0x412b33;}async function getBalances(_0x5d776a=!![]){const _0x2bc4bf=_0x22b3bf;let _0x34f065=0x0,_0x314550;const _0x49ad2d=config['threshold'];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2bc4bf(0x254)](_0x2f8022=>{const _0x9973c9=_0x2bc4bf;if(_0x2f8022[_0x9973c9(0x2f5)]!=config['basecoin']){let _0x3dbf2f=gTicker[noslash(_0x2f8022['symbol'])];_0x314550=_0x2f8022[_0x9973c9(0x1f2)]?0x1/_0x3dbf2f:_0x3dbf2f;}else _0x314550=0x1;let _0x4635bd=_0x2f8022['number']*_0x314550;_0x34f065+=_0x4635bd,_0x2f8022['last']=formatResult(Number(_0x314550),0x8),_0x2f8022[_0x9973c9(0x264)]=_0x4635bd;}),currentCoins[_0x2bc4bf(0x254)](_0x4533ef=>{const _0xe70356=_0x2bc4bf;let _0x19c983=config['portfolio'][_0xe70356(0x25c)](_0x46df39=>_0x46df39[_0xe70356(0x2f5)]==_0x4533ef[_0xe70356(0x2f5)]),_0x314711=Number(_0x19c983['distribution']),_0x5e133a=_0x4533ef[_0xe70356(0x264)]/_0x34f065*0x64,_0x1cb5b3=_0x314711*_0x34f065/0x64/_0x4533ef[_0xe70356(0x1b8)]-_0x4533ef[_0xe70356(0x261)];_0x4533ef[_0xe70356(0x1df)]=formatResult(_0x5e133a,0x3),_0x4533ef['target']=formatResult(_0x314711,0x3),_0x4533ef[_0xe70356(0x2d7)]=formatResult(_0x1cb5b3,0x8),_0x4533ef[_0xe70356(0x303)]='',_0x4533ef[_0xe70356(0x19e)]=![];if(_0x4533ef[_0xe70356(0x2f5)]!=config[_0xe70356(0x226)]){if(_0x4533ef[_0xe70356(0x1df)]>_0x314711)_0x4533ef[_0xe70356(0x303)]=_0xe70356(0x244),_0x4533ef[_0xe70356(0x19e)]=checkMinimums(_0x4533ef);else _0x4533ef[_0xe70356(0x1df)]<_0x314711&&(_0x4533ef['side']='buy',_0x4533ef[_0xe70356(0x19e)]=checkMinimums(_0x4533ef));}_0x4533ef[_0xe70356(0x1b4)]=_0x4533ef['distribution']/_0x4533ef[_0xe70356(0x1e0)]-0x1;if(_0x4533ef['orderstatus']==_0xe70356(0x172)||_0x4533ef[_0xe70356(0x214)]==_0xe70356(0x1e3))_0x4533ef[_0xe70356(0x214)]='none';}),currentCoins['sort']((_0x171ea7,_0x1a2759)=>_0x171ea7[_0x2bc4bf(0x1b4)]<_0x1a2759[_0x2bc4bf(0x1b4)]?0x1:_0x1a2759[_0x2bc4bf(0x1b4)]<_0x171ea7['delta']?-0x1:0x0);const _0x242dcd=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x242dcd[_0x2bc4bf(0x1d7)],'usd':_0x242dcd[_0x2bc4bf(0x185)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x49ad2d},proxyEmit(_0x2bc4bf(0x265),{'serverversion':serverversion,'balances':lastBalances});if(_0x5d776a){if(config[_0x2bc4bf(0x2ff)])headlessMode({'portfolio':currentCoins,'threshold':_0x49ad2d});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x49ad2d});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x47120b=getNormalizedPerformance();getStartingBalances(_0x47120b),emitPerformance(_0x47120b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x22c746=_0x22b3bf;if(!lastBalances)return;let _0x320ba4=[],_0x25231d,_0x250a15=JSON[_0x22c746(0x28d)](lastBalances[_0x22c746(0x2da)]);_0x250a15[_0x22c746(0x19d)]((_0x50bd6a,_0x128c3f)=>_0x50bd6a['coin']>_0x128c3f['coin']?0x1:_0x128c3f[_0x22c746(0x2f5)]>_0x50bd6a[_0x22c746(0x2f5)]?-0x1:0x0),_0x250a15[_0x22c746(0x254)](_0x296f36=>{const _0x55661b=_0x22c746;let _0x4fd000={'coin':_0x296f36['coin'],'number':_0x296f36[_0x55661b(0x261)],'price':_0x296f36[_0x55661b(0x1b8)]};_0x320ba4[_0x55661b(0x282)](_0x4fd000);});const _0x2ed26a=await getFiat();_0x25231d={'date':lastBalances[_0x22c746(0x2e4)][_0x22c746(0x221)]('\x20')[0x0],'eur':_0x2ed26a[_0x22c746(0x1d7)],'usd':_0x2ed26a[_0x22c746(0x185)],'coins':_0x320ba4};let _0x4e4a6d=dbPerformance['get']('data')[_0x22c746(0x25c)]({'date':_0x25231d['date']})[_0x22c746(0x264)]();_0x4e4a6d?_0x25231d[_0x22c746(0x13e)]!=config['startdate']&&dbPerformance[_0x22c746(0x16e)](_0x22c746(0x1cf))[_0x22c746(0x25c)]({'date':_0x25231d['date']})[_0x22c746(0x28f)](_0x25231d)[_0x22c746(0x1da)]():dbPerformance[_0x22c746(0x16e)](_0x22c746(0x1cf))[_0x22c746(0x282)](_0x25231d)[_0x22c746(0x1da)](),lastPerformanceStored=getHour();}function _0x1ed9(){const _0x19ec91=['USD','filter','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','cost','Bitget','uncaughtException','marketcapEnabled','parse','ongoing','assign','\x20-\x20','bot-','limit-low','InsufficientFunds','search','sqrt','bots','Fee\x20discount\x20refund\x20detected:\x20','password','createOrder','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','2\x20-\x20Validate\x20orders:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','buys','%\x20(','\x20value','fromCodePoint','bid','1\x20-\x20Handle\x20open\x20orders','emojisell','findIndex','BTC','timeshift','has','orderId','datetime','Error\x20details\x20(1):','privateKey','ORDERS.UNLOCKING','resetHistory','getOpenOrders()','fetchBalance()','starting-balances','Headless:\x20','AuthenticationError','indexOf','remainingSymbols','UNLOCKING','/EUR','secure','process\x20','storeFiat','./logs/','\x20attempts','2.3.5','./config/','\x20>\x20[DEBUG]\x20','entries',')\x20|\x20exchange:\x20','yyyy/MM/dd','\x20>\x20pausing\x20bot\x20for\x20','Limit\x20(high-margin)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20|\x20','join','initial','logs','defaults','\x20|\x20exchange:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','debug','memoryUsage','bb-secure.json','lowdb/adapters/FileSync','sells','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','market_cap','getPortfolio','2\x20-\x20handling\x20FILLED\x20order:\x20','final','test','trade','1\x20-\x20FILLED\x20known\x20order:\x20','\x20|\x20lock\x20orders:\x20','portfolio','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','balancing\x20resumed','change24h','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','floor','Bybit','marketcapApi','production','unlinkSync','time','BUSD','USDC','Net\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','marketcap','\x20metrics:</b>\x20\x0a\x0a','ccxt','1540hIMqDD','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','126OpkOAi','map','-results.json','offset','pop','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','coin','toString','\x20exchange\x20error:\x20','getCoinNumber()','ExchangeNotAvailable','API-key\x20format\x20invalid','BNB/','page','Valid\x20balance\x20for\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','headless','\x20has\x20a\x2024h\x20drop\x20of\x20','performance','<b>Bot\x20','side','portfolio2','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','red_yellow_blue','environment','success','1834970JMeZOw','keys','autoliquidity','watchTrades','date','getSeconds','InvalidNonce','<pre>','date-fns','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20order:\x20','full','watchTrades()','percentage','cancelOrders()','sendPortfolioTelegram','marketcapsqrt','progress','watchOrders()','Executed\x20','colorscheme','showname','260484yOsmHE','watchTradesForSymbols','util','498456wNuJiA','Network\x20error\x20details:','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','freeze','argv','Portfolio\x20change\x20detected:\x20',':\x20Bot\x20','InvalidOrder','quick','-------------------------------\x0a','************','startnumber','Error\x20in\x20testAPI():\x20','splice','writeFile','Unfilled\x20order(s)\x20canceled\x20after\x20','341851ovLiZj','Avoiding\x20continuous\x20order\x20attempts','switch-manual','fetchBalance','pro','openOrders','recovery','spot','settings','\x20minutes','node-forge','get','currency','random','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','filled','ORDERS.UNLOCKED','apiSecret','string','3178ckjjAV','market','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','exchange','***','UNLOCKED','staging','args','request-time','constructor','bb-settings.json','initTickers()','2\x20-\x20Handled\x20open\x20orders','Binance','slice','usd','cooldown','2.6.23','quote','Trigger:\x20','\x20exchange','Symbol(s):\x20','\x20:\x20','error','Initializing\x20exchange','function','emojibuy','portfolio1','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','showConfig','restart','symbol',',\x20must\x20be\x20a\x203\x20digit\x20number','version','buy','-config.json','none','Cooldown\x20ended\x20-\x20balancing\x20resumed','EUR','sort','valid',':\x20timer\x20>','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','1419590yYMblI','Huobipro','min','no\x20exchange\x20reloaded','getFullYear','placeOrder','starting-balance-','update-liquidity','3770035KoIkBz','enableFiatToggle','netoffset','Net\x20effect','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','\x20API\x20secret\x20is\x20invalid','existsSync','Waited\x20','\x20network\x20error:\x20','/backup/','net-fiat','delta','sha256','2\x20-\x20Orders\x20unlocked','/USDT','last','\x20API\x20key\x20is\x20invalid','startprice','price','LOCKED','highest','Unknown\x20error:\x20','open','Insufficient\x20funds\x20to\x20execute\x20order:\x20','fetchOpenOrders','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','round','configuration-stored','warning','yargs/yargs','isEqual','coins','apiKey','Error\x20details\x20(0):','MIN_NOTIONAL','botname','event-history','changes','data','code','net-basecoin','Initializing\x20exchange:\x20already\x20done','type','\x20-\x20bot\x20not\x20started','format','change','eur','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','loadMarkets','write','stringify','fiat','.json','Exchange','distribution','target','running','\x20>\x20details:','canceled','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','remove','enabled','-performance.json','max','getMinutes','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','storeConfiguration','toFixed','add','cancelLoading','\x20minutes\x20-\x20','Invalid\x20balance\x20for\x20','fee','reverse','pki','getMonth','padEnd','Exchange\x20error\x20details:','apiPassword','toggleBotMode','recreateCoinResults()','watchTradesForSymbols()','includes','RETRY\x20-\x20Problem\x20resolved\x20after\x20','./version.json','liquidity','watchOrders','pid','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','sortBy','cancelOrder','fetchTicker','Order\x20filled:\x20','excluded','</pre>','Cryptocom','recent20','Pausing\x20for\x20','RequestTimeout','/USD','threshold','Order\x20amount\x20is\x20invalid:\x20','Invalid\x20symbol:\x20','OrderNotFound','customId','fetchTickers','\x20orders\x20in\x20less\x20than\x20','orderstatus','Huobi','No\x20more\x20open\x20orders\x20-\x20','total','ID:\x20','log','Reset\x20|\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','timestamp','cancel','exec','privateKeyFromPem','Resuming\x20(','split','ETH','4RgnNCr','heapUsed','Exception\x20thrown\x20in\x20','basecoin','length','1\x20-\x20Unlocking\x20orders','cloneDeep','initclient','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','startsWith','send','Order\x20is\x20invalid:\x20','breakeven','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','getDate','substring','closed','limits','BNB','decode64','PAXG','Error\x20in\x20loadSymbols():\x20','path','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','shift','set','differenceInSeconds','6UlooiR','1\x20-\x20FILLED\x20unknown\x20order:\x20','Bot\x20','fetchTickers()','padStart','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','sell','15294RoBzjy','toLowerCase','limit','loading-canceled','0\x20-\x20EXECUTION:\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','leftTxt','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','getHours','Error\x20while\x20deleting\x20files:\x20','kill','Cex','added','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Saving\x20configuration','forEach','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','timeout','event','status','removed','Resetting\x20coin\x20results:\x20','complete','find','\x20>\x20','2.5.0','message','rightTxt','number','detectLiquidityChange()','create','value','balances','\x20MB','\x20portfolio:</b>\x20\x0a\x0a','slider','Unknown\x20error\x20-\x20check\x20logs','\x20hour','-events.json','replace','ordertype','startdate','order','2.6.22','Loading\x20completed','2.6.0','fees','Error\x20details:','axios','Error:\x20Invalid\x20argument\x20','\x20/\x20','amount','USDT','bot','configuration','abs','apply','average','\x20change','onepagemode','Loading\x20symbols','push','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','basecoinvalue','\x20|\x20Custom\x20ID:\x20'];_0x1ed9=function(){return _0x19ec91;};return _0x1ed9();}function getNormalizedPerformance(){const _0x538f46=_0x22b3bf;let _0x38d40c=[];if(dbPerformance['has'](_0x538f46(0x1cf))[_0x538f46(0x264)]()){let _0x100152=dbPerformance[_0x538f46(0x16e)](_0x538f46(0x1cf))[_0x538f46(0x229)]()[_0x538f46(0x287)](_0x128b1f=>{const _0x166d5b=_0x538f46;if(_0x128b1f['coins'][_0x166d5b(0x227)]==0x0)return![];else return!![];})[_0x538f46(0x202)]('date')[_0x538f46(0x264)](),_0x31d548=[...config['liquidity']];_0x31d548[_0x538f46(0x19d)]((_0x257265,_0x2724e8)=>_0x257265[_0x538f46(0x13e)]>_0x2724e8['date']?-0x1:_0x2724e8['date']>_0x257265[_0x538f46(0x13e)]?0x1:0x0);let _0xe51380=0x1,_0x54cd67=[],_0x5b3349=0x0;_0x100152['slice']()[_0x538f46(0x1f2)]()[_0x538f46(0x254)]((_0x53ea87,_0x1043d4)=>{const _0x498f80=_0x538f46;if(_0x31d548[_0x5b3349]){if(_0x100152[_0x100152['length']-_0x1043d4]&&_0x31d548[_0x5b3349]['date']==_0x100152[_0x100152[_0x498f80(0x227)]-_0x1043d4][_0x498f80(0x13e)]){if(_0x1043d4<_0x100152[_0x498f80(0x227)]){let _0x4a4229=0x0,_0x407f4f=0x0;_0x100152[_0x100152[_0x498f80(0x227)]-_0x1043d4]['coins'][_0x498f80(0x254)](_0x1a37d5=>{const _0x5069b6=_0x498f80;_0x407f4f+=_0x1a37d5[_0x5069b6(0x261)]*_0x1a37d5['price'];}),_0x31d548[_0x5b3349][_0x498f80(0x1ce)][_0x498f80(0x254)](_0x3bb049=>{const _0x1930ed=_0x498f80;_0x4a4229+=_0x3bb049[_0x1930ed(0x261)]*_0x3bb049['price'];}),_0xe51380*=_0x4a4229/(_0x407f4f-_0x4a4229)+0x1;}_0x5b3349++;}}let _0x572fc5=0x0;_0x53ea87[_0x498f80(0x1c8)][_0x498f80(0x254)](_0x16ac03=>{const _0x4a598c=_0x498f80;_0x572fc5+=_0x16ac03[_0x4a598c(0x261)]*_0x16ac03[_0x4a598c(0x1bb)];}),_0x54cd67[_0x100152[_0x498f80(0x227)]-_0x1043d4-0x1]=_0x572fc5*(_0xe51380-0x1);});let _0x24f706=[];_0x31d548=[...config['liquidity']]||[];let _0x330c01=0x0;_0x5b3349=0x0,_0x100152[_0x538f46(0x254)]((_0x2901f2,_0x1c41f5)=>{const _0x5f7fa2=_0x538f46;if(_0x31d548[_0x5b3349]){const _0x5e81ae=fns[_0x5f7fa2(0x28d)](_0x31d548[_0x5b3349][_0x5f7fa2(0x13e)],_0x5f7fa2(0x2c1),new Date()),_0x39ae59=fns['parse'](_0x2901f2[_0x5f7fa2(0x13e)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x5e81ae,_0x39ae59)){let _0x2be6ed=0x0;_0x31d548[_0x5b3349][_0x5f7fa2(0x1ce)][_0x5f7fa2(0x254)](_0x29c5ba=>{const _0x17a3d0=_0x5f7fa2;!_0x24f706[_0x29c5ba[_0x17a3d0(0x2f5)]]?_0x24f706[_0x29c5ba[_0x17a3d0(0x2f5)]]=_0x29c5ba['number']:(_0x2be6ed=_0x24f706[_0x29c5ba[_0x17a3d0(0x2f5)]],_0x24f706[_0x29c5ba[_0x17a3d0(0x2f5)]]+=_0x29c5ba[_0x17a3d0(0x261)]);const _0x420de8=_0x2901f2[_0x17a3d0(0x1c8)][_0x17a3d0(0x25c)](_0xe11502=>_0xe11502[_0x17a3d0(0x2f5)]==_0x29c5ba[_0x17a3d0(0x2f5)]);(!_0x420de8||_0x420de8[_0x17a3d0(0x261)]==0x0)&&(_0x330c01+=(-_0x29c5ba['number']-_0x2be6ed)*_0x29c5ba[_0x17a3d0(0x1bb)]);}),_0x5b3349++;}}_0x2901f2[_0x5f7fa2(0x1c8)]['forEach']((_0x1ea9d9,_0x31b94f)=>{const _0x21a6fa=_0x5f7fa2;_0x24f706[_0x1ea9d9['coin']]&&(_0x1ea9d9[_0x21a6fa(0x2c7)]=_0x24f706[_0x1ea9d9[_0x21a6fa(0x2f5)]]);}),_0x38d40c[_0x5f7fa2(0x282)]({'date':_0x2901f2['date'],'eur':_0x2901f2[_0x5f7fa2(0x1d7)],'usd':_0x2901f2[_0x5f7fa2(0x185)],'offset':_0x54cd67[_0x1c41f5],'netoffset':_0x330c01,'coins':_0x2901f2[_0x5f7fa2(0x1c8)]});});}return _0x38d40c;}function emitPerformance(_0x44cfc1){const _0x32abc0=_0x22b3bf;_0x44cfc1[_0x32abc0(0x227)]!==0x0?(proxyEmit(_0x32abc0(0x301),_0x44cfc1),lastPerformanceEmitted=getDate()):proxyEmit(_0x32abc0(0x301),[]);}function getPerf(_0x3fb2da,_0x240210){const _0x67802b=_0x22b3bf;let _0x4ebf8e=0x0,_0x3ad9b2=0x0,_0x2d6b50=0x0;_0x3fb2da['coins'][_0x67802b(0x254)](_0x5c093f=>{const _0x201816=_0x67802b;_0x4ebf8e+=_0x5c093f[_0x201816(0x261)]*_0x5c093f[_0x201816(0x1bb)];});_0x240210&&(_0x4ebf8e+=_0x3fb2da[_0x67802b(0x2f2)]);if(config['basecoin']===_0x67802b(0x2a5)||config['basecoin']===_0x67802b(0x222)||config[_0x67802b(0x226)]==='PAXG')_0x3ad9b2=_0x4ebf8e*_0x3fb2da['eur'],_0x2d6b50=_0x4ebf8e*_0x3fb2da[_0x67802b(0x185)];else{if(usdBasecoins[_0x67802b(0x1fb)](config[_0x67802b(0x226)]))_0x3ad9b2=_0x4ebf8e*_0x3fb2da['eur']/_0x3fb2da[_0x67802b(0x185)],_0x2d6b50=_0x4ebf8e;else config[_0x67802b(0x226)]===_0x67802b(0x19c)&&(_0x3ad9b2=_0x4ebf8e,_0x2d6b50=_0x4ebf8e*_0x3fb2da[_0x67802b(0x185)]/_0x3fb2da[_0x67802b(0x1d7)]);}return[_0x4ebf8e,_0x3ad9b2,_0x2d6b50];}function getKPIs(_0x227cff,_0x1cd992=_0x22b3bf(0x19c)){const _0x36204e=_0x22b3bf,_0x567cdd=config['basecoin'],_0x26e4c5=lastBalances,_0x31139f=currentCoins,_0x248750=getNormalizedPerformance(),_0x1c4fcc=_0x227cff===_0x36204e(0x226)?_0x567cdd:_0x227cff==='fiat'||_0x227cff==='net-fiat'?_0x1cd992:_0x36204e(0x2e7)+_0x567cdd,_0xd240d7=_0x227cff==='net-basecoin'?_0x36204e(0x1ac):_0x227cff==='net-fiat'?_0x36204e(0x1ac):_0x1c4fcc+_0x36204e(0x29f),_0x2d7b57=_0x227cff==='net-basecoin'||_0x227cff==='net-fiat'?_0x36204e(0x1ac):_0x1c4fcc+_0x36204e(0x27f);let _0x44a972=0x0;_0x31139f['forEach'](_0x748e02=>{const _0x11ccdd=_0x36204e;_0x44a972+=_0x748e02[_0x11ccdd(0x261)]*_0x748e02[_0x11ccdd(0x1b8)];});if(_0x227cff===_0x36204e(0x1dc)||_0x227cff===_0x36204e(0x1b3)){if(_0x567cdd===_0x36204e(0x2a5)||_0x567cdd===_0x36204e(0x222)||_0x567cdd===_0x36204e(0x237))_0x44a972=_0x44a972*(_0x1cd992===_0x36204e(0x19c)?_0x26e4c5[_0x36204e(0x1d7)]:_0x26e4c5['usd']);else{if(usdBasecoins[_0x36204e(0x1fb)](_0x567cdd))_0x44a972=_0x44a972*(_0x1cd992===_0x36204e(0x19c)?_0x26e4c5[_0x36204e(0x1d7)]/_0x26e4c5[_0x36204e(0x185)]:0x1);else _0x567cdd===_0x36204e(0x19c)&&(_0x44a972=_0x44a972*(_0x1cd992===_0x36204e(0x19c)?0x1:_0x26e4c5[_0x36204e(0x185)]/_0x26e4c5['eur']));}}let _0x4370c9;if(_0x44a972!==0x0){if(_0x227cff===_0x36204e(0x226))_0x4370c9=(_0x44a972/startingBalances[_0x36204e(0x226)]-0x1)*0x64;else{if(_0x1cd992==='EUR')_0x4370c9=(_0x44a972/startingBalances[_0x36204e(0x1d7)]-0x1)*0x64;else _0x4370c9=(_0x44a972/startingBalances[_0x36204e(0x185)]-0x1)*0x64;}let _0x595116=0x0;if(startingBalances['coins'])_0x31139f[_0x36204e(0x254)](_0x1dc74d=>{const _0x46cecd=_0x36204e;let _0x3b09fd=startingBalances[_0x46cecd(0x1c8)][_0x46cecd(0x25c)](_0x324ab1=>_0x324ab1['coin']===_0x1dc74d[_0x46cecd(0x2f5)]);if(_0x3b09fd&&_0x3b09fd[_0x46cecd(0x2f5)]&&_0x1dc74d[_0x46cecd(0x261)]!==0x0)_0x595116+=_0x3b09fd[_0x46cecd(0x261)]*_0x1dc74d[_0x46cecd(0x1b8)];});let _0x65c359=0x0;if(_0x248750[_0x36204e(0x227)]!==0x0){let _0x485388=_0x248750[_0x248750['length']-0x1];_0x65c359=_0x485388[_0x36204e(0x1ab)];}_0x595116-=_0x65c359;_0x227cff===_0x36204e(0x1d1)&&(_0x4370c9=(_0x44a972-_0x595116)/startingBalances[_0x36204e(0x226)]*0x64,_0x44a972=_0x44a972-_0x595116);if(_0x227cff==='net-fiat'){let _0x3be915=_0x1cd992==='EUR'?startingBalances[_0x36204e(0x1d7)]:startingBalances['usd'];if(_0x567cdd===_0x36204e(0x2a5)||_0x567cdd===_0x36204e(0x222)||_0x567cdd===_0x36204e(0x237))_0x595116=_0x1cd992==='EUR'?_0x595116*_0x26e4c5[_0x36204e(0x1d7)]:_0x595116*_0x26e4c5[_0x36204e(0x185)];else{if(usdBasecoins[_0x36204e(0x1fb)](_0x567cdd))_0x595116=_0x1cd992==='EUR'?_0x595116*_0x26e4c5[_0x36204e(0x1d7)]/_0x26e4c5[_0x36204e(0x185)]:_0x595116;else _0x567cdd===_0x36204e(0x19c)&&(_0x595116=_0x1cd992===_0x36204e(0x19c)?_0x595116:_0x595116*_0x26e4c5['usd']/_0x26e4c5[_0x36204e(0x1d7)]);}_0x4370c9=(_0x44a972-_0x595116)/_0x3be915*0x64,_0x44a972=_0x44a972-_0x595116;}if(_0x4370c9){if(_0x4370c9<0x64)_0x4370c9=_0x4370c9[_0x36204e(0x1ec)](0x2);else{if(_0x4370c9<0x3e8)_0x4370c9=_0x4370c9[_0x36204e(0x1ec)](0x1);else _0x4370c9=_0x4370c9[_0x36204e(0x1ec)](0x0);}}else _0x4370c9=Number('0')['toFixed'](0x2);if(_0x44a972){if(Math[_0x36204e(0x27c)](_0x44a972)<0.000001)_0x44a972=_0x44a972['toFixed'](0x2);else{if(Math[_0x36204e(0x27c)](_0x44a972)<0.1)_0x44a972=_0x44a972['toFixed'](0x6);else{if(Math[_0x36204e(0x27c)](_0x44a972)<0x1)_0x44a972=_0x44a972[_0x36204e(0x1ec)](0x5);else{if(Math[_0x36204e(0x27c)](_0x44a972)<0xa)_0x44a972=_0x44a972[_0x36204e(0x1ec)](0x4);else{if(Math[_0x36204e(0x27c)](_0x44a972)<0x64)_0x44a972=_0x44a972['toFixed'](0x3);else{if(Math[_0x36204e(0x27c)](_0x44a972)<0x3e8)_0x44a972=_0x44a972[_0x36204e(0x1ec)](0x2);else _0x44a972=_0x44a972[_0x36204e(0x1ec)](0x2);}}}}}}else _0x44a972=Number('0')[_0x36204e(0x1ec)](0x2);}else _0x4370c9=Number('0')[_0x36204e(0x1ec)](0x2);return{'value':_0x44a972,'change':_0x4370c9,'leftTxt':_0xd240d7,'rightTxt':_0x2d7b57};}async function getStartingBalances(_0x57ea07,_0x27e906=!![]){const _0x55f8dd=_0x22b3bf;if(_0x57ea07['length']!==0x0){const [_0x883aa3,_0x10bf52,_0x35320f]=getPerf(_0x57ea07[0x0],!![]);let _0x431c89=[];config[_0x55f8dd(0x2da)][_0x55f8dd(0x254)](_0x37d46f=>{const _0x449d11=_0x55f8dd;let _0x200543=0x0,_0x18f846;config[_0x449d11(0x1fe)][_0x449d11(0x254)](_0x12af49=>{const _0x355cae=_0x449d11;let _0x4fd297=_0x12af49[_0x355cae(0x1ce)][_0x355cae(0x25c)](_0x4504f7=>_0x4504f7[_0x355cae(0x2f5)]==_0x37d46f['coin']);if(_0x4fd297){_0x200543+=_0x4fd297['number'];if(!_0x18f846)_0x18f846=_0x4fd297[_0x355cae(0x1bb)];}}),_0x431c89[_0x449d11(0x282)]({'coin':_0x37d46f[_0x449d11(0x2f5)],'number':_0x200543,'initialprice':_0x18f846});});const _0xec4c71={'basecoin':_0x883aa3,'eur':_0x10bf52,'usd':_0x35320f,'coins':_0x431c89};if(_0x27e906)proxyEmit(_0x55f8dd(0x2b0),_0xec4c71);startingBalances=_0xec4c71;}}function headlessMode(_0x1a5922){const _0x11fe9c=_0x22b3bf;let _0x1ad773=_0x1a5922['portfolio'],_0x4ec3db=_0x1a5922[_0x11fe9c(0x20d)],_0x35f893=[];for(let _0x23852a of _0x1ad773){if(_0x23852a[_0x11fe9c(0x2f5)]!=config[_0x11fe9c(0x226)]){if(_0x23852a[_0x11fe9c(0x1b4)]>=_0x4ec3db/0x64){if(_0x23852a['valid'])_0x35f893[_0x11fe9c(0x282)](_0x23852a);}else{if(_0x23852a[_0x11fe9c(0x1b4)]<=-_0x4ec3db/0x64){if(_0x23852a[_0x11fe9c(0x19e)])_0x35f893['push'](_0x23852a);}}}}_0x35f893[_0x11fe9c(0x227)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x35f893[_0x11fe9c(0x254)](_0x548d3a=>{const _0x3b1e75=_0x11fe9c;logger[_0x3b1e75(0x2cc)](_0x3b1e75(0x189)+_0x548d3a['coin']+'\x20'+_0x548d3a[_0x3b1e75(0x261)]+'\x20'+_0x548d3a[_0x3b1e75(0x1b8)]+'\x20'+_0x548d3a[_0x3b1e75(0x1df)]+'%\x20'+_0x548d3a[_0x3b1e75(0x1e0)]+'%\x20'+(0x64*_0x548d3a[_0x3b1e75(0x1b4)])[_0x3b1e75(0x1ec)](0x2)+'%\x20('+_0x4ec3db['toFixed'](0x2)+'%)');}),placeOrder(_0x35f893));}function notifyBalance(_0x32cdd9){const _0x35f5ee=_0x22b3bf;let _0x150e08=_0x32cdd9[_0x35f5ee(0x2da)],_0x432a1e=_0x32cdd9[_0x35f5ee(0x20d)],_0x21d88d=[];for(let _0x51ee48 of _0x150e08){if(_0x51ee48[_0x35f5ee(0x2f5)]!=config[_0x35f5ee(0x226)]){if(_0x51ee48[_0x35f5ee(0x1b4)]>=_0x432a1e/0x64){if(_0x51ee48['valid'])_0x21d88d['push'](_0x51ee48);}else{if(_0x51ee48[_0x35f5ee(0x1b4)]<=-_0x432a1e/0x64){if(_0x51ee48['valid'])_0x21d88d[_0x35f5ee(0x282)](_0x51ee48);}}}}if(_0x21d88d[_0x35f5ee(0x227)]>0x0){let _0x46ee38=_0x21d88d[_0x35f5ee(0x2f0)](_0x341443=>_0x341443[_0x35f5ee(0x2f5)]);_0x46ee38[_0x35f5ee(0x19d)]();let _0x1be9e6=_0x46ee38['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x1be9e6;}}function symbolToCoin(_0x242113){const _0x5bbb3b=_0x22b3bf;let _0x4f81b2;if(_0x242113[_0x5bbb3b(0x1fb)]('/'+config[_0x5bbb3b(0x226)]))_0x4f81b2=_0x242113[_0x5bbb3b(0x26c)]('/'+config[_0x5bbb3b(0x226)],'');if(_0x242113[_0x5bbb3b(0x1fb)](config['basecoin']+'/'))_0x4f81b2=_0x242113[_0x5bbb3b(0x26c)](config[_0x5bbb3b(0x226)]+'/','');return _0x4f81b2;}async function unlockOrders(_0x573ce4=![]){const _0x57699e=_0x22b3bf;if(allOrdersPlaced&&lockOrders==ORDERS[_0x57699e(0x1bc)]){logger[_0x57699e(0x2cc)](_0x57699e(0x228)),lockOrders=ORDERS[_0x57699e(0x2b5)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x573ce4){const _0xc9e6ea=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xc9e6ea,setBlockTransactionDetection(![]);}validateOrdersState=_0x57699e(0x2c7),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x57699e(0x1b6));}}async function validateOrders(_0x3b3ace){const _0x4873af=_0x22b3bf;if(_0x3b3ace)validateOrdersState=_0x3b3ace;logger[_0x4873af(0x2cc)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x4873af(0x2d9)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x4873af(0x2ac):_0x4873af(0x173)));let _0x5dc090=[],_0x8813e8=config['ordertype']==_0x4873af(0x177)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4873af(0x256)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4873af(0x1bc)])return;logger[_0x4873af(0x2cc)](_0x4873af(0x29b)+validateOrdersState),lastOrders[_0x4873af(0x254)](_0x58a228=>{const _0x48087c=_0x4873af;let _0x407205=![];_0x58a228[_0x48087c(0x172)]>0x0&&(_0x407205=!![]),_0x5dc090[_0x48087c(0x282)](_0x407205),_0x407205&&config[_0x48087c(0x26d)]!=_0x48087c(0x177)&&logHistory(_0x48087c(0x26f),_0x48087c(0x205)+_0x58a228[_0x48087c(0x195)]+'\x20'+_0x58a228['side']+'\x20#'+formatResult(_0x58a228[_0x48087c(0x172)],0x8)+'\x20@'+formatResult(_0x58a228[_0x48087c(0x1bb)],0x8));}),_0x5dc090[_0x4873af(0x254)]((_0x5d6c3f,_0x22b9ef)=>{if(_0x5d6c3f)lastOrders['splice'](_0x22b9ef,0x1);}),persistOpenOrders(lastOrders);const _0x1f917c=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4873af(0x2dc);if(validateOrdersState==_0x4873af(0x2c7)){validateOrdersState=_0x4873af(0x28e);if(_0x5dc090['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4873af(0x28e)){if(_0x5dc090[_0x4873af(0x1fb)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x4873af(0x2d5))_0x5dc090[_0x4873af(0x1fb)](![])&&(config[_0x4873af(0x26d)]==_0x4873af(0x177)?logHistory(_0x4873af(0x308),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4873af(0x1c3)](_0x8813e8*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1f917c):(await cancelOrders(),logHistory('success',_0x4873af(0x162)+Math[_0x4873af(0x1c3)](_0x8813e8*validateOrderInterval/0xea60)+_0x4873af(0x1ef)+_0x1f917c))),await unlockOrders(!![]);else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x4873af(0x26d)]!='market')logHistory(_0x4873af(0x308),_0x4873af(0x216)+_0x1f917c);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x56a795=_0x22b3bf;lastOrders[_0x56a795(0x254)](async _0x13c61c=>{const _0x57bbd2=_0x56a795;try{const _0x51e94d=await exchange[_0x57bbd2(0x203)](_0x13c61c['orderId'],_0x13c61c[_0x57bbd2(0x195)]);}catch(_0x31e30a){if(_0x31e30a[_0x57bbd2(0x2f6)]()[_0x57bbd2(0x1fb)](_0x57bbd2(0x210))){}else await handleError(_0x31e30a,_0x57bbd2(0x148));}});}async function initCoinResults(_0x224ac5){const _0x8be37d=_0x22b3bf;_0x224ac5?logger[_0x8be37d(0x2cc)](_0x8be37d(0x25a)+_0x224ac5):logger[_0x8be37d(0x2cc)]('Initializing\x20coin\x20results'),config[_0x8be37d(0x2da)]['forEach'](_0x2d3bae=>{const _0x3cf929=_0x8be37d;if(!_0x2d3bae[_0x3cf929(0x206)]&&_0x2d3bae[_0x3cf929(0x2f5)]!=config['basecoin']){const _0x1c1498=currentCoins['find'](_0x1f9ead=>_0x1f9ead['coin']==_0x2d3bae[_0x3cf929(0x2f5)]),_0x51de5e=gTicker[noslash(_0x2d3bae[_0x3cf929(0x195)])];let _0x175556=_0x1c1498?_0x1c1498[_0x3cf929(0x261)]:null,_0x3d83c6=_0x2d3bae[_0x3cf929(0x1f2)]?0x1/_0x51de5e:_0x51de5e,_0x152233;config[_0x3cf929(0x1fe)][_0x3cf929(0x254)](_0x239cb4=>{const _0x41231f=_0x3cf929;!_0x152233&&(_0x152233=_0x239cb4['changes'][_0x41231f(0x25c)](_0x2e5828=>_0x2e5828[_0x41231f(0x2f5)]==_0x2d3bae[_0x41231f(0x2f5)]),_0x152233&&(_0x175556=_0x152233[_0x41231f(0x261)],_0x3d83c6=_0x152233[_0x41231f(0x1bb)]));});let _0x1f7ebc=dbCoinResults[_0x3cf929(0x16e)](_0x3cf929(0x1c8))[_0x3cf929(0x25c)]({'coin':_0x2d3bae[_0x3cf929(0x2f5)]})[_0x3cf929(0x264)]();if(!_0x1f7ebc){const _0x3e7189={'coin':_0x2d3bae[_0x3cf929(0x2f5)],'number':_0x175556,'breakeven':_0x3d83c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x3cf929(0x282)](_0x3e7189)[_0x3cf929(0x1da)]();}else{if(_0x224ac5&&_0x2d3bae[_0x3cf929(0x2f5)]==_0x224ac5){const _0x17180d={'coin':_0x2d3bae[_0x3cf929(0x2f5)],'number':_0x175556,'breakeven':_0x3d83c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3cf929(0x1c8))['find']({'coin':_0x2d3bae['coin']})[_0x3cf929(0x28f)](_0x17180d)[_0x3cf929(0x1da)]();}}}});}async function updateCoinResults(_0x2c7878,_0x394c1e=![]){const _0x58db2c=_0x22b3bf;let _0x5236c7,_0x11ee4d,_0x3f018b,_0x5d6303,_0x485a19,_0x5c15e5,_0x361326=dbCoinResults[_0x58db2c(0x16e)](_0x58db2c(0x1c8))[_0x58db2c(0x25c)]({'coin':_0x2c7878[_0x58db2c(0x2f5)]})[_0x58db2c(0x264)](),_0x5376b8=![];_0x361326&&Object[_0x58db2c(0x2bf)](_0x361326)[_0x58db2c(0x254)](([_0xf6f8e2,_0x2a60ae])=>{if(_0x2a60ae==null)_0x5376b8=!![];});(!_0x361326||_0x5376b8)&&(await initCoinResults(_0x2c7878['coin']),_0x361326=dbCoinResults['get'](_0x58db2c(0x1c8))['find']({'coin':_0x2c7878[_0x58db2c(0x2f5)]})[_0x58db2c(0x264)]());_0x2c7878[_0x58db2c(0x1f2)]&&(_0x5c15e5={'filled':_0x2c7878[_0x58db2c(0x172)]*_0x2c7878[_0x58db2c(0x1bb)],'amount':_0x2c7878[_0x58db2c(0x172)]*_0x2c7878[_0x58db2c(0x1bb)],'side':_0x2c7878[_0x58db2c(0x303)]=='sell'?_0x58db2c(0x198):_0x58db2c(0x244),'price':0x1/_0x2c7878[_0x58db2c(0x1bb)]},_0x2c7878={..._0x2c7878,..._0x5c15e5});_0x394c1e?_0x11ee4d=_0x2c7878[_0x58db2c(0x303)]==_0x58db2c(0x198)?_0x361326[_0x58db2c(0x261)]+_0x2c7878[_0x58db2c(0x172)]:_0x361326[_0x58db2c(0x261)]-_0x2c7878[_0x58db2c(0x172)]:_0x11ee4d=await getCoinNumber(_0x2c7878[_0x58db2c(0x2f5)]);if(_0x2c7878['fee']&&_0x2c7878[_0x58db2c(0x1f1)][_0x58db2c(0x16f)]==config[_0x58db2c(0x226)])_0x5236c7=Number(_0x2c7878[_0x58db2c(0x1f1)][_0x58db2c(0x289)]);else{if(_0x2c7878[_0x58db2c(0x1f1)]&&_0x2c7878[_0x58db2c(0x1f1)][_0x58db2c(0x16f)]==_0x58db2c(0x235)&&!_0x394c1e&&config[_0x58db2c(0x226)]!=_0x58db2c(0x237))_0x5236c7=Number(_0x2c7878[_0x58db2c(0x1f1)][_0x58db2c(0x289)])*gTicker['BNB'+config['basecoin']];else _0x5236c7=defaultFee*_0x2c7878[_0x58db2c(0x172)]*_0x2c7878[_0x58db2c(0x1bb)];}_0x2c7878[_0x58db2c(0x303)]==_0x58db2c(0x198)?(_0x3f018b=_0x11ee4d!=0x0?(_0x361326[_0x58db2c(0x22f)]*_0x361326[_0x58db2c(0x261)]+_0x2c7878[_0x58db2c(0x1bb)]*(_0x11ee4d-_0x361326[_0x58db2c(0x261)])+_0x5236c7)/_0x11ee4d:0x0,_0x5d6303=_0x361326['realized']):(_0x3f018b=_0x11ee4d!=0x0?(_0x361326['breakeven']*_0x361326[_0x58db2c(0x261)]-_0x2c7878[_0x58db2c(0x1bb)]*(_0x361326[_0x58db2c(0x261)]-_0x11ee4d)+_0x5236c7)/_0x11ee4d:0x0,_0x5d6303=_0x361326['realized']+(_0x2c7878[_0x58db2c(0x1bb)]-_0x361326[_0x58db2c(0x22f)])*_0x2c7878[_0x58db2c(0x172)]);_0x485a19=(_0x2c7878[_0x58db2c(0x1bb)]-_0x3f018b-_0x5236c7/_0x2c7878['filled'])*_0x11ee4d;let _0x580d78={'coin':_0x2c7878['coin'],'number':_0x11ee4d,'breakeven':formatResult(_0x3f018b,0x8),'realized':formatResult(_0x5d6303,0x8),'unrealized':formatResult(_0x485a19,0x8),'fees':formatResult(_0x361326[_0x58db2c(0x273)]+_0x5236c7,0x8),'sells':_0x2c7878['side']=='sell'?_0x361326[_0x58db2c(0x2d0)]+0x1:_0x361326['sells'],'buys':_0x2c7878[_0x58db2c(0x303)]==_0x58db2c(0x198)?_0x361326[_0x58db2c(0x29d)]+0x1:_0x361326[_0x58db2c(0x29d)]};dbCoinResults[_0x58db2c(0x16e)](_0x58db2c(0x1c8))[_0x58db2c(0x25c)]({'coin':_0x2c7878[_0x58db2c(0x2f5)]})[_0x58db2c(0x28f)](_0x580d78)[_0x58db2c(0x1da)]();if(!_0x394c1e){if(_0x2c7878[_0x58db2c(0x1f1)]&&_0x2c7878[_0x58db2c(0x1f1)][_0x58db2c(0x16f)]==_0x58db2c(0x235)){const _0x227fe6=currentCoins[_0x58db2c(0x25c)](_0x3a6510=>_0x3a6510[_0x58db2c(0x2f5)]==_0x58db2c(0x235));if(_0x227fe6){let _0x4376d3=dbCoinResults[_0x58db2c(0x16e)](_0x58db2c(0x1c8))[_0x58db2c(0x25c)]({'coin':_0x58db2c(0x235)})[_0x58db2c(0x264)]();_0x580d78={..._0x4376d3,'number':_0x227fe6[_0x58db2c(0x261)]},dbCoinResults['get'](_0x58db2c(0x1c8))[_0x58db2c(0x25c)]({'coin':_0x58db2c(0x235)})[_0x58db2c(0x28f)](_0x580d78)[_0x58db2c(0x1da)]();}}}}async function placeOrder(_0x594d9a){const _0x564115=_0x22b3bf,_0x231a5d=config[_0x564115(0x26d)]=='market'?'market':_0x564115(0x247);if(lockOrders==ORDERS[_0x564115(0x17b)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x564115(0x1bc)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x564115(0x2c7);let _0x31f0c8=![];lastOrders=[];for(const _0x4b9c9f of _0x594d9a){let _0x5ca527,_0x5706c6,_0x127aad,_0x345b1d,_0x2ec63d,_0x4808b9=_0x4b9c9f[_0x564115(0x195)];try{const _0x2a04d3=await exchange['fetchTicker'](_0x4808b9);_0x5ca527=_0x4b9c9f[_0x564115(0x1f2)]?0x1/_0x4b9c9f[_0x564115(0x1b8)]:_0x4b9c9f[_0x564115(0x1b8)],_0x5706c6=_0x2a04d3[_0x564115(0x2a1)],_0x127aad=_0x2a04d3['ask'];_0x4b9c9f[_0x564115(0x1f2)]?(_0x345b1d=_0x4b9c9f[_0x564115(0x303)]==_0x564115(0x198)?_0x564115(0x244):_0x564115(0x198),_0x2ec63d=Math[_0x564115(0x27c)](_0x4b9c9f[_0x564115(0x2d7)])/_0x5ca527):(_0x345b1d=_0x4b9c9f[_0x564115(0x303)],_0x2ec63d=Math[_0x564115(0x27c)](_0x4b9c9f['trade']));_0x231a5d==_0x564115(0x247)&&(config[_0x564115(0x26d)]=='limit-high'&&(_0x5ca527=_0x345b1d==_0x564115(0x198)?_0x5706c6:_0x127aad),config[_0x564115(0x26d)]==_0x564115(0x292)&&(_0x5ca527=_0x345b1d==_0x564115(0x198)?_0x127aad:_0x5706c6));_0x2ec63d=formatResult(_0x2ec63d,0x8),_0x5ca527=formatResult(_0x5ca527,0x8);const _0x2529f1=_0x345b1d==_0x564115(0x244)?config[_0x564115(0x2a3)]?String[_0x564115(0x2a0)]('0x'+config[_0x564115(0x2a3)])+'\x20':'':config[_0x564115(0x190)]?String[_0x564115(0x2a0)]('0x'+config[_0x564115(0x190)])+'\x20':'',_0x27d4e7=_0x231a5d==_0x564115(0x177)?'Market':config[_0x564115(0x26d)]=='limit-high'?_0x564115(0x2c3):'Limit\x20(low-margin)',_0x3d6119=(Math[_0x564115(0x2df)](Math[_0x564115(0x170)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x564115(0x282)]({'customId':_0x3d6119,'symbol':_0x4808b9,'coin':_0x4b9c9f['coin'],'amount':_0x2ec63d,'price':_0x5ca527,'side':_0x345b1d,'reverse':_0x4b9c9f[_0x564115(0x1f2)],'filled':0x0});if(_0x231a5d==_0x564115(0x177))logHistory('order',''+_0x2529f1+_0x27d4e7+_0x564115(0x144)+_0x4808b9+'\x20'+_0x345b1d+'\x20#'+formatResult(_0x2ec63d,0x8)+'\x20@'+formatResult(_0x5ca527,0x8));else logHistory(_0x564115(0x26f),''+_0x2529f1+_0x27d4e7+_0x564115(0x144)+_0x4808b9+'\x20'+_0x345b1d+'\x20#'+formatResult(_0x2ec63d,0x8)+'\x20@'+formatResult(_0x5ca527,0x8));let _0x27ecf1;_0x231a5d==_0x564115(0x177)?_0x345b1d==_0x564115(0x198)&&[_0x564115(0x2e0),_0x564115(0x28a),_0x564115(0x250),_0x564115(0x215),_0x564115(0x1a2)][_0x564115(0x1fb)](config[_0x564115(0x179)])?_0x27ecf1=await exchange[_0x564115(0x299)](_0x4808b9,_0x231a5d,_0x345b1d,_0x2ec63d,_0x5ca527):_0x27ecf1=await exchange[_0x564115(0x299)](_0x4808b9,_0x231a5d,_0x345b1d,_0x2ec63d,undefined):_0x27ecf1=await exchange['createOrder'](_0x4808b9,_0x231a5d,_0x345b1d,_0x2ec63d,_0x5ca527);logger[_0x564115(0x2cc)](_0x564115(0x218)+_0x27ecf1['id']+_0x564115(0x285)+_0x3d6119);const _0x84dc8d=lastOrders[_0x564115(0x227)]-0x1;if(_0x84dc8d>=0x0&&lastOrders[_0x84dc8d][_0x564115(0x211)]==_0x3d6119){lastOrders[_0x84dc8d][_0x564115(0x2a8)]=_0x27ecf1['id'];if(_0x27ecf1[_0x564115(0x278)])lastOrders[_0x84dc8d][_0x564115(0x278)]=_0x27ecf1['amount'];if(_0x27ecf1[_0x564115(0x1bb)])lastOrders[_0x84dc8d][_0x564115(0x1bb)]=_0x27ecf1['price'];lastOrders[_0x84dc8d][_0x564115(0x1f1)]=_0x27ecf1[_0x564115(0x1f1)];}if(config[_0x564115(0x186)]!=0x0){let _0x3bddf2=null;if(cooldownTracker[_0x564115(0x227)]==config[_0x564115(0x186)]-0x1)_0x3bddf2=cooldownTracker[_0x564115(0x23b)]();const _0x224dc0=getTimeStamp();cooldownTracker[_0x564115(0x282)](_0x224dc0);if(_0x3bddf2){const _0x382f5b=fns[_0x564115(0x23d)](new Date(_0x224dc0),new Date(_0x3bddf2));if(_0x382f5b<cooldownInterval){logHistory(_0x564115(0x18d),_0x564115(0x14d)+config[_0x564115(0x186)]+_0x564115(0x213)+cooldownInterval/0x3c+_0x564115(0x2e9)+cooldownPeriod/(0xe10*0x3e8)+_0x564115(0x26a)),coolingDown=!![];break;}}}}catch(_0xeca3e5){if(_0xeca3e5['toString']()[_0x564115(0x1fb)](_0x564115(0x1cb)))lastOrders=lastOrders['filter'](_0x14c358=>_0x14c358[_0x564115(0x195)]!=_0x4808b9),logHistory(_0x564115(0x18d),_0x564115(0x2c4)+_0x4808b9),_0x31f0c8=!![];else{if(_0xeca3e5['toString']()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x564115(0x287)](_0x3ebf9b=>_0x3ebf9b[_0x564115(0x195)]!=_0x4808b9),logHistory(_0x564115(0x18d),_0x564115(0x20e)+_0x4808b9),_0x31f0c8=!![];else{if(_0xeca3e5['toString']()[_0x564115(0x1fb)](_0x564115(0x15a)))lastOrders=lastOrders[_0x564115(0x287)](_0x4fc0af=>_0x4fc0af[_0x564115(0x195)]!=_0x4808b9),logHistory(_0x564115(0x18d),_0x564115(0x22e)+_0x4808b9),logger[_0x564115(0x2cc)](_0xeca3e5),_0x31f0c8=!![];else _0xeca3e5[_0x564115(0x2f6)]()[_0x564115(0x1fb)](_0x564115(0x2e8))?(lastOrders=lastOrders['filter'](_0x46d485=>_0x46d485[_0x564115(0x195)]!=_0x4808b9),logHistory(_0x564115(0x18d),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4808b9),_0x31f0c8=!![]):(lastOrders=lastOrders[_0x564115(0x287)](_0x26f642=>_0x26f642[_0x564115(0x195)]!=_0x4808b9),await handleError(_0xeca3e5,'placeOrder()',_0x4808b9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x564115(0x227)]>0x0){const _0x3810d4=config[_0x564115(0x26d)]==_0x564115(0x177)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x585a94=_0x564115;validateOrders(_0x585a94(0x2d5));},_0x3810d4);}else unlockOrders();_0x31f0c8&&config[_0x564115(0x2ff)]&&(logHistory('error',_0x564115(0x164)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x564115(0x308),_0x564115(0x19b)));}else{if(coolingDown)!config[_0x564115(0x2ff)]&&logHistory(_0x564115(0x18d),_0x564115(0x305));else lockOrders!=ORDERS[_0x564115(0x17b)]&&(!config['headless']&&(config[_0x564115(0x26d)]==_0x564115(0x177)?logHistory('error',_0x564115(0x29c)):logHistory(_0x564115(0x18d),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x479f10){const _0x8715e8=_0x22b3bf,_0x1320d7={...config,'openOrders':_0x479f10};let _0x566c2e=dbConfig[_0x8715e8(0x16e)](_0x8715e8(0x27a))[_0x8715e8(0x25c)]({'botID':botID})[_0x8715e8(0x264)]();_0x566c2e&&dbConfig['get'](_0x8715e8(0x27a))[_0x8715e8(0x25c)]({'botID':botID})[_0x8715e8(0x28f)](_0x1320d7)[_0x8715e8(0x1da)]();}function restoreOrders(){const _0x124bbc=_0x22b3bf;let _0xf888bb;config['openOrders']&&allOpenOrders[_0x124bbc(0x254)](_0x5a730c=>{const _0x5c94f4=_0x124bbc,_0x385289=config[_0x5c94f4(0x168)][_0x5c94f4(0x25c)](_0xa111ff=>_0xa111ff[_0x5c94f4(0x2a8)]==_0x5a730c['id']);_0x385289&&(lastOrders[_0x5c94f4(0x282)](_0x385289),_0xf888bb=_0x5a730c['timestamp']);});if(lastOrders[_0x124bbc(0x227)]>0x0){lockOrders=ORDERS[_0x124bbc(0x1bc)],validateOrdersState=_0x124bbc(0x28e),allOrdersPlaced=!![];const _0x22ab88=new Date()['getTime'](),_0x309676=config[_0x124bbc(0x26d)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x124bbc(0x256)]*0x3c*0x3e8;if(_0xf888bb+_0x309676>_0x22ab88){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x415def=_0x124bbc;validateOrders(_0x415def(0x2d5));},_0xf888bb+_0x309676-_0x22ab88);}else validateOrders(_0x124bbc(0x2d5));}}async function sendMetricsTelegram(){const _0x4849cc=_0x22b3bf;if(!coinsLoaded){process[_0x4849cc(0x22d)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2fef2f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x24cdd5='';if(config[_0x4849cc(0x14f)])_0x24cdd5='<b>'+config[_0x4849cc(0x1cc)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x24cdd5=_0x4849cc(0x302)+botID+_0x4849cc(0x2eb);const _0x77e233=getKPIs(_0x4849cc(0x226)),_0x4ad937=getKPIs('fiat',config['fiat']),_0x3fc3fa=getKPIs(_0x4849cc(0x1d1)),_0x3bf057=getKPIs(_0x4849cc(0x1b3),config['fiat']);_0x24cdd5+=_0x4849cc(0x141),_0x24cdd5+=_0x77e233['leftTxt']+_0x4849cc(0x18c)+_0x77e233[_0x4849cc(0x264)]+'\x0a',_0x24cdd5+=_0x77e233[_0x4849cc(0x260)]+':\x20'+_0x77e233[_0x4849cc(0x1d6)]+'%\x0a',_0x24cdd5+=_0x4ad937[_0x4849cc(0x24b)]+_0x4849cc(0x18c)+_0x4ad937['value']+'\x0a',_0x24cdd5+=_0x4ad937[_0x4849cc(0x260)]+':\x20'+_0x4ad937[_0x4849cc(0x1d6)]+'%\x0a',_0x24cdd5+=_0x3fc3fa['leftTxt']+':\x20'+_0x3fc3fa[_0x4849cc(0x264)]+'\x20('+config[_0x4849cc(0x226)]+')\x0a',_0x24cdd5+=_0x3fc3fa[_0x4849cc(0x260)]+':\x20'+_0x3fc3fa[_0x4849cc(0x1d6)]+'%\x20('+config[_0x4849cc(0x226)]+')\x0a',_0x24cdd5+=_0x3bf057[_0x4849cc(0x24b)]+':\x20'+_0x3bf057[_0x4849cc(0x264)]+'\x20('+config['fiat']+')\x0a',_0x24cdd5+=_0x3bf057[_0x4849cc(0x260)]+':\x20'+_0x3bf057[_0x4849cc(0x1d6)]+_0x4849cc(0x29e)+config[_0x4849cc(0x1dc)]+')\x0a',_0x24cdd5+='</pre>',process[_0x4849cc(0x22d)]({'telegrammsg':_0x24cdd5},_0x37b55f=>{});}async function sendPortfolioTelegram(){const _0x582862=_0x22b3bf;if(!coinsLoaded||!currentCoins[0x0][_0x582862(0x1df)]){process['send']({'telegrammsg':_0x582862(0x201)},_0x404aee=>{});return;}let _0x303526='';if(config[_0x582862(0x14f)])_0x303526='<b>'+config[_0x582862(0x1cc)]+_0x582862(0x267);else _0x303526='<b>Bot\x20'+botID+_0x582862(0x267);_0x303526+=_0x582862(0x141),_0x303526+=_0x582862(0x15c),_0x303526+=_0x582862(0x2de),_0x303526+=_0x582862(0x15c),currentCoins[_0x582862(0x254)](_0x261036=>{const _0x2fd4db=_0x582862;_0x303526+=_0x261036[_0x2fd4db(0x2f5)][_0x2fd4db(0x1f5)](0x7)+'|\x20'+formatPad(_0x261036[_0x2fd4db(0x1df)],0x2,0x6)+'|\x20'+formatPad(_0x261036[_0x2fd4db(0x1e0)],0x2,0x6)+'|\x20'+formatPad(_0x261036[_0x2fd4db(0x1b4)]*0x64,0x2,0x6)+'\x0a';}),_0x303526+=_0x582862(0x207),process['send']({'telegrammsg':_0x303526},_0x2572e5=>{});}function formatPad(_0x112dc4,_0x2e6d89,_0x3d6e2e){const _0xdb0611=_0x22b3bf,_0x5b6de9=formatResultString(_0x112dc4,_0x2e6d89);return _0x5b6de9?_0x5b6de9[_0xdb0611(0x242)](_0x3d6e2e):''[_0xdb0611(0x242)](_0x3d6e2e);}function logHistory(_0x23b76c,_0x3affe2,_0x3770ef=''){const _0x335653=_0x22b3bf;logger[_0x335653(0x145)](''+_0x3affe2);let _0xa7350={'time':getTimeStamp(),'type':_0x23b76c,'event':_0x3affe2};dbLogs['get'](_0x335653(0x2c8))[_0x335653(0x282)](_0xa7350)[_0x335653(0x1da)]();if(_0x3770ef=='')_0x3770ef=_0x3affe2;proxyEmit(_0x335653(0x257),{'log':_0xa7350,'summary':_0x3770ef}),process['send']({'telegram':{..._0xa7350,'botname':config[_0x335653(0x1cc)],'showname':config['showname']}},_0xcce15e=>{});}function emitHistory(_0x3b1908={}){const _0x7eb82=_0x22b3bf;Object['keys'](_0x3b1908)[_0x7eb82(0x227)]==0x0&&(_0x3b1908={'type':[_0x7eb82(0x26f),_0x7eb82(0x257)],'event':'','page':0x1});if(_0x3b1908[_0x7eb82(0x1d3)]['includes']('event'))_0x3b1908[_0x7eb82(0x1d3)][_0x7eb82(0x160)](_0x3b1908[_0x7eb82(0x1d3)][_0x7eb82(0x2b3)](_0x7eb82(0x257)),0x1,_0x7eb82(0x18d),_0x7eb82(0x1c5),'success');if(dbLogs[_0x7eb82(0x2a7)](_0x7eb82(0x2c8))[_0x7eb82(0x264)]()){let _0x549d8c=dbLogs[_0x7eb82(0x16e)](_0x7eb82(0x2c8))[_0x7eb82(0x287)](_0x564d03=>{const _0xb61242=_0x7eb82;if(_0x3b1908[_0xb61242(0x1d3)][_0xb61242(0x227)]==0x0)return![];else return _0x3b1908[_0xb61242(0x1d3)]['includes'](_0x564d03[_0xb61242(0x1d3)]);})['filter'](_0x5007f1=>{const _0x1e02cc=_0x7eb82;if(_0x3b1908[_0x1e02cc(0x257)]=='')return!![];else return _0x5007f1['event'][_0x1e02cc(0x246)]()[_0x1e02cc(0x1fb)](_0x3b1908[_0x1e02cc(0x257)][_0x1e02cc(0x246)]());})[_0x7eb82(0x202)](_0x7eb82(0x2e4)),_0x158ca8=_0x549d8c['value']()[_0x7eb82(0x227)];_0x549d8c=_0x549d8c[_0x7eb82(0x1f2)]()['slice']((_0x3b1908[_0x7eb82(0x2fc)]-0x1)*logPageSize,_0x3b1908[_0x7eb82(0x2fc)]*logPageSize-0x1)[_0x7eb82(0x1f2)]()[_0x7eb82(0x264)](),proxyEmit(_0x7eb82(0x1cd),{'logs':_0x549d8c,'total':_0x158ca8});}else proxyEmit(_0x7eb82(0x1cd),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x418d70){const _0x5dae5f=_0x22b3bf;if(dbLogs['has']('logs')[_0x5dae5f(0x264)]()){const _0x5c6f81=dbLogs['get'](_0x5dae5f(0x2c8))[_0x5dae5f(0x202)](_0x5dae5f(0x2e4))[_0x5dae5f(0x287)](_0x1f9144=>{const _0x13d569=_0x5dae5f;return _0x1f9144[_0x13d569(0x1d3)]=='order';})['value']();dbLogs['get'](_0x5dae5f(0x2c8))[_0x5dae5f(0x1e5)]()[_0x5dae5f(0x1da)](),dbLogs[_0x5dae5f(0x16e)](_0x5dae5f(0x2c8))[_0x5dae5f(0x28f)](_0x5c6f81)['write'](),emitHistory(_0x418d70);}}async function pauseBot(_0x2efbfc=pauseBotIntervalShort,_0x5f3b98,_0x176946,_0xeffffb=![]){const _0x37d480=_0x22b3bf,_0x2e46d7=new Date()['getTime']();if(!lastErrorShown||_0x2e46d7-lastErrorShown>=_0x2efbfc){lastErrorShown=_0x2e46d7;if(!lastBotPause)lastBotPause=_0x2e46d7,consecutivePauses=0x1;else{if(_0x2e46d7-lastBotPause-_0x2efbfc<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0xeffffb){logHistory(_0x37d480(0x18d),_0x5f3b98+_0x37d480(0x192)),await killBot();return;}else logHistory('error',_0x5f3b98+pauseBotMsg),_0x2efbfc=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2e46d7;}_0x176946?logger[_0x37d480(0x2cc)]('('+consecutivePauses+')\x20'+_0x5f3b98+'\x20>\x20details:',_0x176946):logger[_0x37d480(0x2cc)]('('+consecutivePauses+')\x20'+_0x5f3b98);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x2efbfc),botPaused=![],_0x2efbfc==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x517ce2=_0x22b3bf;botPaused=!![],await sleep(0x3e8),process[_0x517ce2(0x22d)]({'stop':_0x517ce2(0x24f)},_0x4d6f8b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x409ab6,_0x465789){const _0x26458c=_0x22b3bf;if(botPaused)return;const _0x498f99=config[_0x26458c(0x179)]||_0x26458c(0x1de);if(_0x465789)logger[_0x26458c(0x2cc)](_0x26458c(0x225)+_0x465789);const _0x3ebd74=()=>{const _0x58ec15=_0x26458c;loading[_0x58ec15(0x18d)]=!![],emitLoadingProgress();};if(_0x409ab6[_0x26458c(0x2f6)]()['includes'](_0x26458c(0x2fa)))logHistory(_0x26458c(0x18d),_0x498f99+_0x26458c(0x288)),_0x3ebd74();else{if(_0x409ab6['toString']()['includes'](_0x26458c(0x283)))logHistory('error',_0x498f99+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3ebd74();else _0x409ab6['toString']()[_0x26458c(0x1fb)](_0x26458c(0x2b2))?(logHistory(_0x26458c(0x18d),_0x498f99+_0x26458c(0x24a)),logHistory(_0x26458c(0x18d),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3ebd74()):await handleError(_0x409ab6,null);}}async function handleError(_0x24a4c2,_0x2b08c0,_0x50c72a=''){const _0x149d4c=_0x22b3bf;if(botPaused)return;let _0xd277a7;const _0x2cfa35=config[_0x149d4c(0x179)]||_0x149d4c(0x1de);if(_0x2b08c0)logger[_0x149d4c(0x2cc)]('Exception\x20thrown\x20in\x20'+_0x2b08c0);if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('DDoSProtection'))_0xd277a7=_0x2cfa35+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0xd277a7,_0x24a4c2);else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('RateLimitExceeded'))_0xd277a7=_0x2cfa35+_0x149d4c(0x1a0),await pauseBot(undefined,_0xd277a7,_0x24a4c2);else{if(_0x24a4c2[_0x149d4c(0x2f6)]()['includes'](_0x149d4c(0x2f9))||_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('OnMaintenance'))_0xd277a7=_0x2cfa35+_0x149d4c(0x143),await pauseBot(undefined,_0xd277a7,_0x24a4c2[_0x149d4c(0x2f6)]());else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)](_0x149d4c(0x20b)))_0xd277a7=_0x2cfa35+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0xd277a7,_0x24a4c2[_0x149d4c(0x2f6)]());else{if(_0x24a4c2['toString']()[_0x149d4c(0x1fb)](_0x149d4c(0x255)))_0xd277a7=_0x2cfa35+_0x149d4c(0x22b),await pauseBot(undefined,_0xd277a7,_0x24a4c2['toString']());else{if(_0x24a4c2['toString']()[_0x149d4c(0x246)]()[_0x149d4c(0x1fb)](_0x149d4c(0x21c))||_0x24a4c2['toString']()['toLowerCase']()['includes'](_0x149d4c(0x17e)))_0xd277a7=_0x149d4c(0x243),await pauseBot(undefined,_0xd277a7,_0x24a4c2[_0x149d4c(0x2f6)]());else{if(_0x24a4c2[_0x149d4c(0x2f6)]()['includes'](_0x149d4c(0x140)))_0xd277a7=_0x2cfa35+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0xd277a7,_0x24a4c2[_0x149d4c(0x2f6)]());else{if(_0x24a4c2 instanceof ccxt['NetworkError'])_0xd277a7=_0x2cfa35+_0x149d4c(0x1b1)+_0x24a4c2[_0x149d4c(0x2f6)](),logger['debug'](_0x149d4c(0x154),_0x24a4c2),await pauseBot(undefined,_0xd277a7,_0x24a4c2);else{if(_0x24a4c2[_0x149d4c(0x2f6)]()['includes'](_0x149d4c(0x2fa)))logHistory(_0x149d4c(0x18d),_0x2cfa35+_0x149d4c(0x1b9)),logHistory(_0x149d4c(0x18d),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x149d4c(0x18d),_0x2cfa35+_0x149d4c(0x1ae)),logHistory(_0x149d4c(0x18d),_0x149d4c(0x252)),await killBot();else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)](_0x149d4c(0x2b2))&&_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('token\x20is\x20expired'))_0xd277a7=_0x2cfa35+_0x149d4c(0x2f4),await pauseBot(undefined,_0xd277a7,_0x24a4c2,!![]);else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)]('AuthenticationError'))config[_0x149d4c(0x1f7)]?_0xd277a7=_0x2cfa35+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0xd277a7=_0x2cfa35+_0x149d4c(0x2d1),logHistory('error',_0xd277a7),logHistory(_0x149d4c(0x18d),_0x149d4c(0x252)),await killBot();else{if(_0x24a4c2['toString']()[_0x149d4c(0x1fb)]('PermissionDenied'))logHistory('error',_0x2cfa35+_0x149d4c(0x2ee)),logHistory(_0x149d4c(0x18d),_0x149d4c(0x252)),await killBot();else{if(_0x24a4c2[_0x149d4c(0x2f6)]()[_0x149d4c(0x1fb)](_0x149d4c(0x293)))logHistory(_0x149d4c(0x18d),_0x149d4c(0x1c0)+_0x50c72a);else{if(_0x24a4c2 instanceof ccxt['ExchangeError']){_0xd277a7=_0x2cfa35+_0x149d4c(0x2f7)+_0x24a4c2[_0x149d4c(0x2f6)](),logHistory(_0x149d4c(0x18d),_0xd277a7),logger[_0x149d4c(0x2cc)](_0x149d4c(0x1f6),_0x24a4c2);if(_0x50c72a)logger[_0x149d4c(0x2cc)](_0x149d4c(0x18b)+_0x50c72a);await pauseBot(undefined,_0xd277a7,_0x24a4c2);}else{_0xd277a7=_0x149d4c(0x1be)+_0x24a4c2[_0x149d4c(0x2f6)](),logHistory('error',_0xd277a7),logger['debug'](_0xd277a7+_0x149d4c(0x1e2),_0x24a4c2);if(_0x50c72a)logger['debug'](_0x149d4c(0x18b)+_0x50c72a);await pauseBot(undefined,_0xd277a7);}}}}}}}}}}}}}}}}function decryptRSA(_0x2a5df2,_0x3540d5){const _0x4a083d=_0x22b3bf,_0x367516=forge[_0x4a083d(0x1f3)][_0x4a083d(0x21f)](_0x2a5df2),_0x32add2=_0x367516['decrypt'](forge[_0x4a083d(0x152)][_0x4a083d(0x236)](_0x3540d5),'RSA-OAEP',{'md':forge['md']['sha256'][_0x4a083d(0x263)](),'mgf1':{'md':forge['md'][_0x4a083d(0x1b5)]['create']()}});return _0x32add2;}async function withRetry(_0x5c7052,_0x165419){const _0x56e654=_0x22b3bf;let _0x2eb6ef=![],_0x27f725=0x0,_0x14ce90,_0x29cee0;while(_0x27f725<maxRetries){try{_0x14ce90=await _0x165419();break;}catch(_0x5e25f2){_0x29cee0=_0x5e25f2,!_0x2eb6ef?(_0x2eb6ef=!![],logger['debug']('RETRY\x20-\x20Error\x20in\x20'+_0x5c7052+':',_0x5e25f2['toString']())):await sleep(retryInterval);}_0x27f725++;}if(_0x27f725==0x0)return _0x14ce90;if(_0x27f725>=maxRetries)throw _0x29cee0;else return logger[_0x56e654(0x2cc)](_0x56e654(0x1fc)+_0x27f725+'\x20attempts'),_0x14ce90;}function formatResult(_0x24d89d,_0x48e94d){const _0x5ddc80=_0x22b3bf;return parseFloat(_0x24d89d[_0x5ddc80(0x1ec)](_0x48e94d));}function formatResultTruncate(_0x327bc3,_0x4173d3){const _0x5158ab=_0x22b3bf;let _0x3c5afd=formatResultString(_0x327bc3,0xa),_0x2b0747=_0x3c5afd[_0x5158ab(0x2b3)]('.');return _0x2b0747!=-0x1&&(_0x3c5afd=_0x3c5afd['slice'](0x0,_0x2b0747+_0x4173d3+0x1)),Number(_0x3c5afd);}function formatResultString(_0x31ca6c,_0x4bb649){const _0x3aa994=_0x22b3bf;let _0x11bcd7;if(!(''+_0x31ca6c)[_0x3aa994(0x1fb)]('e'))_0x11bcd7=+(Math['round'](_0x31ca6c+'e+'+_0x4bb649)+'e-'+_0x4bb649);else{let _0x59e369=(''+_0x31ca6c)[_0x3aa994(0x221)]('e'),_0x2e59b1='';+_0x59e369[0x1]+_0x4bb649>0x0&&(_0x2e59b1='+'),_0x11bcd7=+(Math[_0x3aa994(0x1c3)](+_0x59e369[0x0]+'e'+_0x2e59b1+(+_0x59e369[0x1]+_0x4bb649))+'e-'+_0x4bb649);}return Number(_0x11bcd7)[_0x3aa994(0x1ec)](_0x4bb649);}function getServerTime(){const _0x3eba34=_0x22b3bf,_0x431a35=new Date();return _0x431a35[_0x3eba34(0x1a5)]()+'/'+(_0x431a35[_0x3eba34(0x1f4)]()+0x1)[_0x3eba34(0x2f6)]()['padStart'](0x2,'0')+'/'+_0x431a35[_0x3eba34(0x231)]()[_0x3eba34(0x2f6)]()[_0x3eba34(0x242)](0x2,'0')+'\x20'+_0x431a35[_0x3eba34(0x24d)]()[_0x3eba34(0x2f6)]()[_0x3eba34(0x242)](0x2,'0')+':'+_0x431a35[_0x3eba34(0x1e9)]()[_0x3eba34(0x2f6)]()[_0x3eba34(0x242)](0x2,'0')+':'+_0x431a35[_0x3eba34(0x13f)]()[_0x3eba34(0x2f6)]()[_0x3eba34(0x242)](0x2,'0');}function getTimeStamp(){const _0x58b6b2=_0x22b3bf,_0x26c259=shiftedTime();return _0x26c259['getFullYear']()+'/'+(_0x26c259[_0x58b6b2(0x1f4)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x26c259[_0x58b6b2(0x231)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x26c259[_0x58b6b2(0x24d)]()[_0x58b6b2(0x2f6)]()[_0x58b6b2(0x242)](0x2,'0')+':'+_0x26c259[_0x58b6b2(0x1e9)]()[_0x58b6b2(0x2f6)]()[_0x58b6b2(0x242)](0x2,'0')+':'+_0x26c259[_0x58b6b2(0x13f)]()[_0x58b6b2(0x2f6)]()[_0x58b6b2(0x242)](0x2,'0');}function _0x5006(_0x41ab4d,_0x3c9dd5){const _0x3f119f=_0x1ed9();return _0x5006=function(_0x491f19,_0x3a24d1){_0x491f19=_0x491f19-0x13b;let _0x1ed958=_0x3f119f[_0x491f19];return _0x1ed958;},_0x5006(_0x41ab4d,_0x3c9dd5);}function getDate(){const _0x268f8d=_0x22b3bf,_0x11889d=shiftedTime();return _0x11889d[_0x268f8d(0x1a5)]()+'/'+(_0x11889d['getMonth']()+0x1)[_0x268f8d(0x2f6)]()[_0x268f8d(0x242)](0x2,'0')+'/'+_0x11889d[_0x268f8d(0x231)]()['toString']()[_0x268f8d(0x242)](0x2,'0');}function getHour(){const _0x164099=_0x22b3bf,_0x1c3d6e=shiftedTime();return _0x1c3d6e[_0x164099(0x24d)]()[_0x164099(0x2f6)]()[_0x164099(0x242)](0x2,'0');}function sleep(_0x45f65f){return new Promise(_0x25d743=>setTimeout(_0x25d743,_0x45f65f));}function shiftedTime(){const _0x5cc54e=_0x22b3bf,_0x1793ce=new Date();let _0x1ed247=_0x1793ce;if(config&&config[_0x5cc54e(0x2a6)]!==0x0)_0x1ed247=fns[_0x5cc54e(0x1ed)](_0x1793ce,{'hours':config[_0x5cc54e(0x2a6)]});return _0x1ed247;}function timer(_0x806fed){const _0x3063a1=_0x22b3bf,_0x40ebd5=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x806fed,_0x40ebd5):console[_0x3063a1(0x219)](getTimeStamp()+_0x3063a1(0x19f),_0x806fed,(_0x40ebd5-lasttime)/0x3e8),lasttime=_0x40ebd5;}