const _0x403665=_0x2890;(function(_0x2448a6,_0x30bf29){const _0x2e2051=_0x2890,_0x4e8a7b=_0x2448a6();while(!![]){try{const _0x32aa9f=-parseInt(_0x2e2051(0x2f1))/0x1+-parseInt(_0x2e2051(0x2ca))/0x2+-parseInt(_0x2e2051(0x175))/0x3+parseInt(_0x2e2051(0x1b6))/0x4+parseInt(_0x2e2051(0x297))/0x5+-parseInt(_0x2e2051(0x293))/0x6+parseInt(_0x2e2051(0x261))/0x7;if(_0x32aa9f===_0x30bf29)break;else _0x4e8a7b['push'](_0x4e8a7b['shift']());}catch(_0x5e8f2a){_0x4e8a7b['push'](_0x4e8a7b['shift']());}}}(_0x526a,0x6c75e));const _0x265dc0=function(){let _0x91c04a=!![];return function(_0x1d3495,_0x183a20){const _0x2e1ebf=_0x91c04a?function(){const _0x36a6cf=_0x2890;if(_0x183a20){const _0x16a1e7=_0x183a20[_0x36a6cf(0x251)](_0x1d3495,arguments);return _0x183a20=null,_0x16a1e7;}}:function(){};return _0x91c04a=![],_0x2e1ebf;};}(),_0x204324=_0x265dc0(this,function(){const _0x1eed68=_0x2890;return _0x204324['toString']()[_0x1eed68(0x1f5)](_0x1eed68(0x24b))['toString']()[_0x1eed68(0x1da)](_0x204324)['search']('(((.+)+)+)+$');});_0x204324();'use strict';const ccxt=require(_0x403665(0x1b0)),low=require('lowdb'),FileSync=require(_0x403665(0x2b0)),fs=require('fs'),fns=require(_0x403665(0x303)),forge=require(_0x403665(0x308)),util=require(_0x403665(0x2ef)),argv=require(_0x403665(0x2fc))(process[_0x403665(0x16a)][_0x403665(0x275)](0x2))[_0x403665(0x16a)],path=require(_0x403665(0x1b2)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x403665(0x2fe),_0x403665(0x1d6),_0x403665(0x1ea),'USDT',_0x403665(0x182),_0x403665(0x2cd)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x403665(0x24f)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x403665(0x168)+pauseBotInterval/0xea60+_0x403665(0x321),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x7d0;let enableFiatToggle,prevAmountAtOrder={};const serverversion=require('./version.json')[_0x403665(0x192)],environment=require('./version.json')[_0x403665(0x28d)]||_0x403665(0x238),botID=process['argv'][0x2]||_0x403665(0x196),pattern=/^[0-9]{3}$/;!pattern[_0x403665(0x19d)](botID)&&(console[_0x403665(0x294)](_0x403665(0x30c)+botID+_0x403665(0x184)),killBot());const userID=process[_0x403665(0x16a)][0x3]||'',configpath=userID?_0x403665(0x1d4)+userID+'/':'./config/',logspath=userID?_0x403665(0x26f)+userID+'/':'./logs/',loggerfile=fs[_0x403665(0x25c)](logspath+_0x403665(0x220),{'flags':'a'});!fs[_0x403665(0x2df)](configpath)&&fs[_0x403665(0x206)](configpath);!fs[_0x403665(0x2df)](logspath)&&fs[_0x403665(0x206)](logspath);const configfile=configpath+_0x403665(0x2db)+botID+_0x403665(0x280),logfile=configpath+_0x403665(0x2db)+botID+_0x403665(0x187),performancefile=configpath+_0x403665(0x2db)+botID+_0x403665(0x26e),coinresultsfile=configpath+_0x403665(0x2db)+botID+_0x403665(0x19b),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x403665(0x18f),configbackuppath=configpath+_0x403665(0x21c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x403665(0x2d3)]({'logs':[],'version':serverversion})[_0x403665(0x19f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x403665(0x2d3)]({'data':[],'version':serverversion})[_0x403665(0x19f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x403665(0x2d3)]({'coins':[],'version':serverversion})[_0x403665(0x19f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xa3bafc=>{const _0x27bf11=_0x403665;console[_0x27bf11(0x294)](_0xa3bafc);},'simple':_0x18fd50=>{const _0x9493c9=_0x403665;console['log'](_0x18fd50),loggerfile['write'](util[_0x9493c9(0x2d6)](_0x18fd50)+'\x0a');},'full':async(_0x147c8e,_0x2d751e='')=>{const _0x295664=_0x403665;let _0x470f3e;if(config[_0x295664(0x310)])_0x470f3e=getTimeStamp()+':\x20'+config[_0x295664(0x1ed)]+_0x295664(0x1ae)+_0x147c8e;else _0x470f3e=getTimeStamp()+_0x295664(0x1b7)+botID+'\x20>\x20'+_0x147c8e;console[_0x295664(0x294)](_0x470f3e),loggerfile['write'](util[_0x295664(0x2d6)](_0x470f3e)+'\x0a'),_0x2d751e&&(console[_0x295664(0x294)](_0x2d751e),loggerfile[_0x295664(0x19f)](util[_0x295664(0x2d6)](_0x2d751e)+'\x0a'));},'debug':async(_0x16bbe1,_0x5dd8f0='')=>{const _0x23295d=_0x403665;let _0x1f7888;if(config[_0x23295d(0x310)])_0x1f7888=getTimeStamp()+':\x20'+config['botname']+_0x23295d(0x23a)+_0x16bbe1;else _0x1f7888=getTimeStamp()+':\x20Bot\x20'+botID+_0x23295d(0x23a)+_0x16bbe1;if(debugging)console[_0x23295d(0x294)](_0x1f7888);loggerfile[_0x23295d(0x19f)](util['format'](_0x1f7888)+'\x0a');if(_0x5dd8f0){if(debugging)console[_0x23295d(0x294)](_0x5dd8f0);loggerfile[_0x23295d(0x19f)](util[_0x23295d(0x2d6)](_0x5dd8f0)+'\x0a');}}};process['on'](_0x403665(0x1d9),function(_0x1fac05){const _0x2efe3a=_0x403665;handleError(_0x1fac05,_0x2efe3a(0x1d9));});settings[_0x403665(0x28e)]!=config[_0x403665(0x28e)]&&updateTimeshift(settings[_0x403665(0x28e)]);settings[_0x403665(0x1d5)]!=config[_0x403665(0x1d5)]&&updateOnepagemode(settings['onepagemode']);(settings['marketcapApi']&&!config[_0x403665(0x189)]||!settings[_0x403665(0x189)]&&config[_0x403665(0x189)])&&updateMarketcapApi(settings[_0x403665(0x189)]);process[_0x403665(0x2cf)]({'started':_0x403665(0x199)},_0x2629d=>{}),initializeProcessListeners();function proxyEmit(_0x3fa25f,_0xddb989=null){const _0x338b5f=_0x403665;process[_0x338b5f(0x2cf)]({'function':_0x3fa25f,'args':_0xddb989},_0x553f91=>{});}function initializeProcessListeners(){const _0xb7fc3=_0x403665;process['on'](_0xb7fc3(0x315),_0x3b2f6b=>{const _0x1c06e5=_0xb7fc3;switch(Object[_0x1c06e5(0x170)](_0x3b2f6b)[0x0]){case _0x1c06e5(0x28e):_0x3b2f6b['timeshift']!=undefined&&(settings[_0x1c06e5(0x28e)]=_0x3b2f6b[_0x1c06e5(0x28e)],updateTimeshift(settings[_0x1c06e5(0x28e)]));break;case'onepagemode':_0x3b2f6b[_0x1c06e5(0x1d5)]!=undefined&&(settings[_0x1c06e5(0x1d5)]=_0x3b2f6b[_0x1c06e5(0x1d5)],updateOnepagemode(settings[_0x1c06e5(0x1d5)]));break;case'marketcapApi':_0x3b2f6b[_0x1c06e5(0x189)]!=undefined&&(settings[_0x1c06e5(0x189)]=_0x3b2f6b['marketcapApi'],updateMarketcapApi(settings[_0x1c06e5(0x189)]));break;case'bots':_0x3b2f6b['bots']!=undefined&&(bots=JSON[_0x1c06e5(0x2a8)](_0x3b2f6b[_0x1c06e5(0x26a)]),proxyEmit(_0x1c06e5(0x26a),bots));break;case _0x1c06e5(0x241):switch(_0x3b2f6b[_0x1c06e5(0x241)]){case _0x1c06e5(0x186):initclient();break;case _0x1c06e5(0x204):toggleBotMode();break;case _0x1c06e5(0x1a6):emitHistory(_0x3b2f6b[_0x1c06e5(0x229)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x3b2f6b[_0x1c06e5(0x229)]);break;case _0x1c06e5(0x24e):getPortfolio(_0x3b2f6b['args']);break;case _0x1c06e5(0x1a7):storeConfiguration(_0x3b2f6b[_0x1c06e5(0x229)]);break;case _0x1c06e5(0x2fa):storeHeadless(_0x3b2f6b[_0x1c06e5(0x229)]);break;case _0x1c06e5(0x201):storeFiat(_0x3b2f6b['args']);break;case _0x1c06e5(0x307):resetHistory();break;case _0x1c06e5(0x2a1):getStartingBalances(getNormalizedPerformance());break;case _0x1c06e5(0x1ce):placeOrder(_0x3b2f6b[_0x1c06e5(0x229)]);break;case _0x1c06e5(0x202):cancelLoading();break;case _0x1c06e5(0x203):showConfig();break;case _0x1c06e5(0x1f7):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3284ed=![]){const _0x20d570=_0x403665;logger[_0x20d570(0x1e9)]('Reset\x20|\x20'+(_0x3284ed?'exchange\x20reload':_0x20d570(0x254))+_0x20d570(0x1e2)+config[_0x20d570(0x2f6)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3284ed)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x20d570(0x1cd)]!=''&&config['apiKey']!=_0x20d570(0x2f7)){loadingProgress=0x0;_0x3284ed&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x20d570(0x2dd),emittedConfiguration()),initialPerformanceStored=![]);const _0x1161a7=await getCoins();[currentCoins,currentCoinsAll]=_0x1161a7,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x20d570(0x1e9)](_0x20d570(0x264)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1723b=![]){const _0x374055=_0x403665;logger['debug'](_0x374055(0x239)+(_0x1723b?_0x374055(0x276):'complete')+_0x374055(0x2e3)+config[_0x374055(0x2f6)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1723b){getBalances();return;}coinsLoaded=![];if(config[_0x374055(0x1cd)]!=''&&config[_0x374055(0x1cd)]!=_0x374055(0x2f7)){loadingProgress=0x1;const _0x4e94f8=await getCoins();[currentCoins,currentCoinsAll]=_0x4e94f8,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x374055(0x1e9)](_0x374055(0x264)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x374055(0x1ff)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x56d82f){const _0x2a324c=_0x403665;let _0x320f9a=![];if(_0x56d82f)_0x320f9a=!![];let _0x2d0f99;_0x320f9a?_0x2d0f99=_0x56d82f[_0x2a324c(0x1fd)](_0x2b1bc7=>_0x2b1bc7[_0x2a324c(0x217)]):_0x2d0f99=currentCoinsAll[_0x2a324c(0x1fd)](_0x33e83d=>_0x33e83d[_0x2a324c(0x217)]);if(!config['marketcapApi']||!_0x320f9a&&!config[_0x2a324c(0x27f)]||_0x2d0f99[_0x2a324c(0x1ff)]==0x0)return;let _0x10e808=null;try{_0x10e808=await axios[_0x2a324c(0x224)](_0x2a324c(0x2e2),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2a324c(0x189)]},'params':{'symbol':_0x2d0f99[_0x2a324c(0x20d)]()}});}catch(_0x2039f3){_0x10e808=null,_0x2039f3[_0x2a324c(0x20d)]()[_0x2a324c(0x1d7)](_0x2a324c(0x19a))?(config[_0x2a324c(0x189)]=![],updateConfig(),proxyEmit(_0x2a324c(0x2dd),emittedConfiguration()),logHistory('error',_0x2a324c(0x316))):(logHistory('error',_0x2a324c(0x2c1)+schedulerInterval/(0x3c*0x3e8)+_0x2a324c(0x321)),logger['debug'](_0x2a324c(0x272),_0x2039f3[_0x2a324c(0x20d)]()+_0x2a324c(0x225)+_0x2039f3[_0x2a324c(0x31b)]));}if(_0x10e808){let _0x2a4195=0x0;const _0x291000=_0x10e808['data'];_0x2d0f99[_0x2a324c(0x2de)](_0x212945=>{const _0x84064=_0x2a324c;if(_0x291000[_0x84064(0x1b9)][_0x212945][0x0])_0x2a4195+=_0x291000['data'][_0x212945][0x0][_0x84064(0x16b)][_0x84064(0x2fe)][_0x84064(0x20e)];}),_0x2d0f99['forEach'](_0x516638=>{const _0x40a38a=_0x2a324c,_0x5b8f14=_0x291000['data'][_0x516638][0x0]?_0x291000[_0x40a38a(0x1b9)][_0x516638][0x0][_0x40a38a(0x16b)][_0x40a38a(0x2fe)][_0x40a38a(0x20e)]:0x0;if(_0x320f9a){const _0x30368=_0x56d82f['find'](_0x578095=>_0x578095[_0x40a38a(0x217)]==_0x516638);_0x30368&&(_0x30368[_0x40a38a(0x207)]=_0x5b8f14);}else{const _0x2deeb7=currentCoins[_0x40a38a(0x1e5)](_0x3d45d6=>_0x3d45d6[_0x40a38a(0x217)]==_0x516638);_0x2deeb7&&(_0x2deeb7['marketcap']=_0x5b8f14);const _0x573bb5=currentCoinsAll[_0x40a38a(0x1e5)](_0x4e08f8=>_0x4e08f8[_0x40a38a(0x217)]==_0x516638);_0x573bb5&&(_0x573bb5[_0x40a38a(0x207)]=_0x5b8f14);}}),!_0x320f9a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x2cf907=_0x403665,_0x1930b3=0x2;let _0x2ac3d8=0x0,_0x4d5679=0x0,_0x5af735=0x0,_0x459108=0x0,_0x5422b6=0x0;config['portfolio'][_0x2cf907(0x2de)](_0x138c15=>{const _0x1c0215=_0x2cf907;if(!_0x138c15[_0x1c0215(0x27a)]){_0x5af735++,_0x2ac3d8+=_0x138c15[_0x1c0215(0x1f9)];if(_0x138c15[_0x1c0215(0x1f9)]===-0x1){_0x2ac3d8++;const _0xf7812e=currentCoinsAll[_0x1c0215(0x1e5)](_0x5e9cdf=>_0x5e9cdf[_0x1c0215(0x217)]==_0x138c15['coin']);_0xf7812e&&(_0x459108+=_0xf7812e[_0x1c0215(0x207)],_0x5422b6+=Math[_0x1c0215(0x1ef)](_0xf7812e['marketcap']));}if(_0x138c15['slider']!==-0x1)_0x4d5679++;}});let _0x231fd0;const _0x64e1a1=0x64-_0x2ac3d8,_0x33277a=_0x5af735-_0x4d5679;_0x231fd0=_0x33277a===0x0?_0x2ac3d8:Math['max'](0x64,_0x2ac3d8),config['portfolio'][_0x2cf907(0x2de)](_0x6d0710=>{const _0x25d2b7=_0x2cf907,_0x21cf52=currentCoinsAll['find'](_0x3c3eb0=>_0x3c3eb0[_0x25d2b7(0x217)]==_0x6d0710[_0x25d2b7(0x217)]);_0x21cf52&&(_0x6d0710['marketcap']=_0x21cf52[_0x25d2b7(0x207)]);if(!_0x6d0710[_0x25d2b7(0x27a)]){if(_0x231fd0<=0x64){if(_0x6d0710[_0x25d2b7(0x1f9)]===-0x1){if(_0x459108!==0x0&&config[_0x25d2b7(0x27f)]){if(_0x21cf52){if(config[_0x25d2b7(0x27f)]==_0x25d2b7(0x207))_0x6d0710[_0x25d2b7(0x1a9)]=(_0x64e1a1/(_0x459108/_0x21cf52['marketcap']))[_0x25d2b7(0x16d)](_0x1930b3);else config[_0x25d2b7(0x27f)]=='marketcapsqrt'&&(_0x6d0710[_0x25d2b7(0x1a9)]=(_0x64e1a1/(_0x5422b6/Math['sqrt'](_0x21cf52[_0x25d2b7(0x207)])))['toFixed'](_0x1930b3));}}}}}}),updateConfig();}function updateConfig(){const _0x2c83ab=_0x403665;let _0x42d5c2=dbConfig[_0x2c83ab(0x224)]('bot')['find']({'botID':botID})[_0x2c83ab(0x2c2)]();_0x42d5c2&&dbConfig['get']('bot')[_0x2c83ab(0x1e5)]({'botID':botID})[_0x2c83ab(0x235)](config)[_0x2c83ab(0x19f)]();}function logMemory(){const _0x37a30b=_0x403665;if(environment!=_0x37a30b(0x180))return;const _0x1de9bf=process[_0x37a30b(0x1e8)]()[_0x37a30b(0x200)]/0x400/0x400;logger[_0x37a30b(0x1e9)](_0x37a30b(0x19e)+process[_0x37a30b(0x299)]+_0x37a30b(0x244)+formatResult(_0x1de9bf,0x1)+_0x37a30b(0x278));}async function startScheduler(){const _0x23876a=_0x403665,_0x5ebdf6=shiftedTime()[_0x23876a(0x1dd)]();getMarketCap(),_0x5ebdf6==0x1&&logMemory(),(_0x5ebdf6==0x2||_0x5ebdf6==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1a27c5=![]){const _0x2a40f8=_0x403665;logger['debug'](_0x2a40f8(0x259));if(!_0x1a27c5)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x2a40f8(0x1e7)},_0x1a6557=>{});}async function initExchange(_0x5022c2=config[_0x403665(0x2f6)],_0x5a6e8d=config['apiKey'],_0x5e3ae5=config['apiSecret'],_0x1faad4=config['apiPassword']){const _0x210dfc=_0x403665;if(exchange){logger[_0x210dfc(0x1e9)]('Initializing\x20exchange:\x20already\x20done');return;}logger['debug'](_0x210dfc(0x29f));!supportedExchanges()[_0x210dfc(0x1d7)](_0x5022c2)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x5022c2+'\x20exchange'),killBot());const _0x4af070=ccxt[_0x210dfc(0x209)][_0x5022c2[_0x210dfc(0x237)]()];exchange=new _0x4af070({'apiKey':_0x5a6e8d,'secret':_0x5e3ae5,'options':{'defaultType':_0x210dfc(0x173)}});if(_0x1faad4)exchange[_0x210dfc(0x298)]=_0x1faad4;}function updateExchange(_0x49e0dc,_0x409f21,_0x5a120b=null){const _0x4dec7d=_0x403665;exchange[_0x4dec7d(0x1cd)]=_0x49e0dc,exchange[_0x4dec7d(0x1b5)]=_0x409f21,exchange[_0x4dec7d(0x329)]=_0x5a120b,logger[_0x4dec7d(0x1e9)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0xa4360b=_0x403665;let _0x24efad=config[_0xa4360b(0x1e0)]==_0xa4360b(0x273)?_0xa4360b(0x273):config[_0xa4360b(0x1e0)]=='PAXG'?_0xa4360b(0x16c):_0xa4360b(0x1c0),_0x4b6d47=allSymbols[_0xa4360b(0x1d7)](_0x24efad+_0xa4360b(0x1eb))?_0xa4360b(0x2fe):allSymbols[_0xa4360b(0x1d7)](_0x24efad+_0xa4360b(0x22e))?'USDT':_0xa4360b(0x2d5),_0x50fa01=allSymbols[_0xa4360b(0x1d7)](_0x24efad+_0xa4360b(0x22c))?_0xa4360b(0x2d5):_0x4b6d47;enableFiatToggle=!![],_0x4b6d47==_0xa4360b(0x2d5)&&(enableFiatToggle=![],storeFiat(_0xa4360b(0x2d5))),_0x50fa01!='EUR'&&(enableFiatToggle=![],storeFiat(_0xa4360b(0x2fe))),stablecoins={'eur':{'coin':''+_0x24efad+_0x50fa01,'symbol':_0x24efad+'/'+_0x50fa01},'usd':{'coin':''+_0x24efad+_0x4b6d47,'symbol':_0x24efad+'/'+_0x4b6d47}};}async function initwsCcxt(){const _0x1fac76=_0x403665;initCycle++;const _0x371b55=initCycle;let _0x142e5e=[];config[_0x1fac76(0x324)][_0x1fac76(0x2de)](_0x81d960=>{const _0x37de85=_0x1fac76;if(!_0x81d960[_0x37de85(0x27a)]&&_0x81d960[_0x37de85(0x217)]!=config[_0x37de85(0x1e0)])_0x142e5e[_0x37de85(0x25b)](_0x81d960[_0x37de85(0x213)]);});if(!_0x142e5e[_0x1fac76(0x1d7)](stablecoins['eur'][_0x1fac76(0x213)]))_0x142e5e['push'](stablecoins[_0x1fac76(0x21d)]['symbol']);if(!_0x142e5e[_0x1fac76(0x1d7)](stablecoins[_0x1fac76(0x195)][_0x1fac76(0x213)]))_0x142e5e[_0x1fac76(0x25b)](stablecoins['usd'][_0x1fac76(0x213)]);if(config[_0x1fac76(0x2f6)][_0x1fac76(0x1ac)](_0x1fac76(0x214))&&config[_0x1fac76(0x1e0)]!=_0x1fac76(0x16c)){if(!_0x142e5e[_0x1fac76(0x1d7)]('BNB/'+config[_0x1fac76(0x1e0)]))_0x142e5e[_0x1fac76(0x25b)](_0x1fac76(0x1e3)+config['basecoin']);}loadCoins(_0x142e5e),_0x142e5e=validateSymbols(_0x142e5e);const _0x26d2ce=async _0x11be62=>{const _0x4e97df=_0x1fac76;let _0x28f94b;try{const _0xb87661=await getTickers(_0x11be62);Object[_0x4e97df(0x1b3)](_0xb87661)['forEach'](_0x3ea16b=>{const _0x571e5d=_0x4e97df;_0x28f94b=_0x3ea16b[0x1]['symbol'],gTicker[noslash(_0x28f94b)]=_0x3ea16b[0x1][_0x571e5d(0x20b)],gChange[_0x28f94b]=_0x3ea16b[0x1]['percentage'];});}catch(_0x1fa897){await handleError(_0x1fa897,_0x4e97df(0x24a),_0x28f94b);}},_0x1b0dfb=async _0x5abe5a=>{const _0x3d8120=_0x1fac76;while(initCycle==_0x371b55){if(!botPaused)try{const _0xbd3e46=await exchange['watchTrades'](_0x5abe5a);gTicker[noslash(_0xbd3e46[0x0][_0x3d8120(0x213)])]=_0xbd3e46[0x0]['price'];}catch(_0x4c5030){if(!exchangeStopped)await handleError(_0x4c5030,_0x3d8120(0x2a5),_0x5abe5a);}else await sleep(0x64);}},_0x54b939=async _0x5d739b=>{const _0x845d2d=_0x1fac76;while(initCycle==_0x371b55){if(!botPaused)try{const _0x28e72c=await exchange[_0x845d2d(0x1e4)](_0x5d739b),_0x286e8e=_0x28e72c[_0x845d2d(0x240)]();gTicker[noslash(_0x286e8e['symbol'])]=_0x286e8e['price'];}catch(_0x5175bc){if(!exchangeStopped)await handleError(_0x5175bc,_0x845d2d(0x1f0),_0x5d739b[_0x845d2d(0x20d)]());}else await sleep(0x64);}},_0x44b67c=async _0x49fb9d=>{const _0xae4301=_0x1fac76;while(initCycle==_0x371b55){if(!botPaused){let _0x4bf2c6;try{await sleep(0x3c*0x3e8);const _0x4ecc5d=await getTickers(_0x49fb9d);Object[_0xae4301(0x1b3)](_0x4ecc5d)[_0xae4301(0x2de)](_0x406eb4=>{const _0x535118=_0xae4301;_0x4bf2c6=_0x406eb4[0x1][_0x535118(0x213)],gChange[_0x4bf2c6]=_0x406eb4[0x1][_0x535118(0x2e7)];});}catch(_0x419838){if(!exchangeStopped)await handleError(_0x419838,'fetchTickers()',_0x4bf2c6);}}else await sleep(0x64);}},_0x40ad1a=async _0x7ddd50=>{const _0x24938c=_0x1fac76;while(initCycle==_0x371b55){if(!botPaused)try{const _0x5799c1=await exchange[_0x24938c(0x288)](_0x7ddd50);initCycle==_0x371b55&&_0x5799c1[_0x24938c(0x2de)](_0x193907=>{updateNumberCoinsCcxt(_0x193907);});}catch(_0x3fb21d){if(!exchangeStopped)await handleError(_0x3fb21d,_0x24938c(0x2ff));}else await sleep(0x64);}};_0x26d2ce(_0x142e5e),_0x44b67c(_0x142e5e),exchange[_0x1fac76(0x1a0)][_0x1fac76(0x1e4)]&&!(config['exchange']==_0x1fac76(0x233)&&_0x142e5e[_0x1fac76(0x1ff)]>0xa)?_0x54b939(_0x142e5e):_0x142e5e[_0x1fac76(0x2de)](_0x35bad9=>{_0x1b0dfb(_0x35bad9);}),_0x142e5e[_0x1fac76(0x2de)](_0x4a6a19=>{_0x40ad1a(_0x4a6a19);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2c06f2){const _0x5de9d1=_0x403665;let _0x5ceeaa={};try{if(config['exchange']!=_0x5de9d1(0x188))_0x5ceeaa=await exchange[_0x5de9d1(0x302)](_0x2c06f2);else for(const _0x5dae12 of _0x2c06f2){const _0x439465=await exchange[_0x5de9d1(0x190)](_0x5dae12);_0x5ceeaa[_0x5dae12]=_0x439465;}return _0x5ceeaa;}catch(_0x155e07){throw _0x155e07;}}function setBlockTransactionDetection(_0x42bce){const _0x2a5f17=_0x403665;blockTransactionDetection=_0x42bce,logger['debug'](_0x2a5f17(0x16f)+blockTransactionDetection);}async function detectLiquidityChange(_0x4f19a3=0x0){const _0x2c77d=_0x403665;transactionDetectionOngoing=!![];try{const _0x2583fe=await getCoins(_0x4f19a3),[_0x4f5f8a,_0x5ad7ee]=_0x2583fe;let _0x2da769=[];currentCoins[_0x2c77d(0x2de)](_0x11c413=>{const _0xf7f595=_0x2c77d,_0xaa7823=_0x4f5f8a[_0xf7f595(0x1e5)](_0x197b04=>_0x197b04[_0xf7f595(0x217)]==_0x11c413['coin']);if(_0xaa7823){if(_0x11c413[_0xf7f595(0x165)]!=_0xaa7823[_0xf7f595(0x165)]){let _0x2e215e;if(_0x11c413[_0xf7f595(0x217)]!=config[_0xf7f595(0x1e0)]){const _0x22ba8f=gTicker[noslash(_0x11c413[_0xf7f595(0x213)])];_0x2e215e=_0x11c413[_0xf7f595(0x1f2)]?0x1/_0x22ba8f:_0x22ba8f;}else _0x2e215e=0x1;_0x2da769[_0xf7f595(0x25b)]({'coin':_0x11c413['coin'],'symbol':_0x11c413[_0xf7f595(0x213)],'price':_0x2e215e,'number':Number(formatResult(_0xaa7823['number']-_0x11c413[_0xf7f595(0x165)],0x8)),'basecoinvalue':_0x2e215e*(_0xaa7823['number']-_0x11c413['number'])});}}});if(_0x2da769[_0x2c77d(0x1ff)]>0x0&&!blockTransactionDetection)for(const _0x3ad4c8 of _0x2da769){if(config[_0x2c77d(0x30b)]){logger[_0x2c77d(0x1e9)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x3ad4c8[_0x2c77d(0x2b9)]+_0x2c77d(0x2f2)+lastFees[_0x2c77d(0x2f9)]);if(lastFees[_0x2c77d(0x2f9)]==0x0||Math[_0x2c77d(0x2b7)](_0x3ad4c8[_0x2c77d(0x2b9)])>lastFees[_0x2c77d(0x2f9)]*0x3){if(config[_0x2c77d(0x30b)]==_0x2c77d(0x1e6)){delete _0x3ad4c8[_0x2c77d(0x213)],delete _0x3ad4c8['basecoinvalue'];let _0x50bbcd=[],_0x4f165f=[...config['liquidity']]||[],_0x1048fd=config['liquidity'];_0x4f165f[_0x2c77d(0x2f4)]((_0xd096b7,_0x3c8451)=>_0xd096b7[_0x2c77d(0x252)]>_0x3c8451[_0x2c77d(0x252)]?-0x1:_0x3c8451['date']>_0xd096b7['date']?0x1:0x0);const _0x111b15=getDate();if(_0x4f165f[0x0]){const _0x47fed7=fns['parse'](_0x4f165f[0x0][_0x2c77d(0x252)],_0x2c77d(0x197),new Date()),_0x53c1c1=fns['parse'](_0x111b15,_0x2c77d(0x197),new Date());if(fns[_0x2c77d(0x269)](_0x47fed7,_0x53c1c1)){_0x50bbcd=_0x4f165f[0x0]['changes'];const _0x397d41=_0x50bbcd[_0x2c77d(0x1e5)](_0x5351c1=>_0x5351c1[_0x2c77d(0x217)]==_0x3ad4c8[_0x2c77d(0x217)]);_0x397d41?(_0x397d41['number']+=_0x3ad4c8['number'],_0x397d41[_0x2c77d(0x165)]==0x0&&(_0x50bbcd=_0x50bbcd[_0x2c77d(0x29e)](_0x2877c2=>{const _0xcdcc18=_0x2c77d;return _0x2877c2[_0xcdcc18(0x217)]!=_0x3ad4c8[_0xcdcc18(0x217)];}))):_0x50bbcd[_0x2c77d(0x25b)](_0x3ad4c8);const _0x25d539=_0x1048fd[_0x2c77d(0x1e5)](_0x382e34=>_0x382e34[_0x2c77d(0x252)]==_0x111b15);_0x25d539[_0x2c77d(0x164)]=_0x50bbcd;}else _0x1048fd[_0x2c77d(0x25b)]({'date':_0x111b15,'changes':[_0x3ad4c8]});}const _0x20e2f7=_0x1048fd['find'](_0x344757=>_0x344757[_0x2c77d(0x252)]==_0x111b15);if(_0x20e2f7){let _0x3e489d=!![];_0x20e2f7[_0x2c77d(0x164)]['forEach'](_0x1bb782=>{if(_0x1bb782['number']!=0x0)_0x3e489d=![];}),_0x3e489d&&(_0x1048fd=_0x1048fd['filter'](_0x11d613=>{const _0x51d2a4=_0x2c77d;return _0x11d613[_0x51d2a4(0x252)]!=_0x111b15;}));}let _0x397cf4=dbConfig[_0x2c77d(0x224)]('bot')['find']({'botID':botID})['value']();_0x397cf4&&(dbConfig['get'](_0x2c77d(0x2dc))['find']({'botID':botID})[_0x2c77d(0x235)]({'liquidity':_0x1048fd})['write'](),config['liquidity']=_0x1048fd);logHistory(_0x2c77d(0x29a),_0x2c77d(0x1a3)+Math[_0x2c77d(0x2b7)](_0x3ad4c8[_0x2c77d(0x165)])+'\x20'+_0x3ad4c8[_0x2c77d(0x217)]+'\x20'+(_0x3ad4c8[_0x2c77d(0x165)]>0x0?_0x2c77d(0x326):_0x2c77d(0x1c1))+_0x2c77d(0x20c)),proxyEmit(_0x2c77d(0x2dd),emittedConfiguration());const _0x280665=getNormalizedPerformance();emitPerformance(_0x280665),getStartingBalances(_0x280665),logger['debug'](_0x2c77d(0x1be));}else config[_0x2c77d(0x30b)]==_0x2c77d(0x285)&&(config[_0x2c77d(0x250)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x2c77d(0x1a3)+Math[_0x2c77d(0x2b7)](_0x3ad4c8[_0x2c77d(0x165)])+'\x20'+_0x3ad4c8[_0x2c77d(0x217)]+'\x20'+(_0x3ad4c8[_0x2c77d(0x165)]>0x0?_0x2c77d(0x326):_0x2c77d(0x1c1))+_0x2c77d(0x2ae))):logger['debug'](_0x2c77d(0x1a3)+Math[_0x2c77d(0x2b7)](_0x3ad4c8[_0x2c77d(0x165)])+'\x20'+_0x3ad4c8[_0x2c77d(0x217)]+'\x20'+(_0x3ad4c8[_0x2c77d(0x165)]>0x0?_0x2c77d(0x326):_0x2c77d(0x1c1))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger['debug'](_0x2c77d(0x1cb)+Math['abs'](_0x3ad4c8[_0x2c77d(0x165)])+'\x20'+_0x3ad4c8[_0x2c77d(0x217)]+'\x20'+(_0x3ad4c8[_0x2c77d(0x165)]>0x0?_0x2c77d(0x326):_0x2c77d(0x1c1)));}else logger[_0x2c77d(0x1e9)](_0x2c77d(0x1a3)+Math[_0x2c77d(0x2b7)](_0x3ad4c8[_0x2c77d(0x165)])+'\x20'+_0x3ad4c8[_0x2c77d(0x217)]+'\x20'+(_0x3ad4c8[_0x2c77d(0x165)]>0x0?_0x2c77d(0x326):'removed')+_0x2c77d(0x26d));}currentCoins=_0x4f5f8a,currentCoinsAll=_0x5ad7ee;}catch(_0x2575d2){if(!exchangeStopped)await handleError(_0x2575d2,_0x2c77d(0x1de));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x264a06=_0x403665;logger[_0x264a06(0x1e9)]('Loading\x20symbols');try{markets=await exchange[_0x264a06(0x2be)]();}catch(_0x173410){logger[_0x264a06(0x1e9)]('Error\x20in\x20loadSymbols():\x20'+_0x173410['toString']());if(markets){}else logHistory(_0x264a06(0x262),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x264a06(0x262),_0x264a06(0x281)+loadCoinsRetryInterval/0xea60+_0x264a06(0x24c)),logger[_0x264a06(0x1e9)](_0x264a06(0x272),_0x173410),loading[_0x264a06(0x2b5)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x264a06(0x1b3)](markets)[_0x264a06(0x2de)](_0x2ae143=>{const _0x460a3a=_0x264a06;_0x2ae143[0x1][_0x460a3a(0x246)]&&_0x2ae143[0x1][_0x460a3a(0x173)]&&allSymbols[_0x460a3a(0x25b)](_0x2ae143[0x0]);});}function validateSymbols(_0x3e069d){const _0x3a57e6=_0x403665;let _0x2528a8=[];return _0x3e069d[_0x3a57e6(0x2de)](_0x3efb45=>{const _0x1891d6=_0x3a57e6;!allSymbols[_0x1891d6(0x1d7)](_0x3efb45)?logHistory(_0x1891d6(0x262),_0x1891d6(0x291)+_0x3efb45+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x2528a8[_0x1891d6(0x25b)](_0x3efb45);}),_0x2528a8;}async function initclient(){const _0x4f84db=_0x403665;proxyEmit(_0x4f84db(0x2dd),emittedConfiguration()),proxyEmit(_0x4f84db(0x212),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4f84db(0x30e),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5cb6f6=getNormalizedPerformance();emitPerformance(_0x5cb6f6),getStartingBalances(_0x5cb6f6);}async function toggleBotMode(){const _0x108f1b=_0x403665;let _0x3e9020=dbConfig[_0x108f1b(0x224)](_0x108f1b(0x2dc))[_0x108f1b(0x1e5)]({'botID':botID})[_0x108f1b(0x2c2)]();if(_0x3e9020){const _0x5e6c30=!_0x3e9020[_0x108f1b(0x250)];dbConfig[_0x108f1b(0x224)](_0x108f1b(0x2dc))[_0x108f1b(0x1e5)]({'botID':botID})[_0x108f1b(0x235)]({'headless':_0x5e6c30})[_0x108f1b(0x19f)](),config[_0x108f1b(0x250)]=_0x5e6c30,proxyEmit(_0x108f1b(0x2dd),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2cca14=_0x403665;process[_0x2cca14(0x2cf)]({'updatebotmanager':!![]},_0x29c110=>{}),logger['debug'](_0x2cca14(0x292)+config['headless']);}async function loadCoins(_0x2c9b0c){const _0x18a8e0=_0x403665;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x244497,_0x38f05c=0x0,_0x421f27=0x0;_0x2c9b0c[_0x18a8e0(0x2de)](_0xf1c275=>{const _0x4333a2=_0x18a8e0;loading[_0x4333a2(0x2e6)][_0x4333a2(0x25b)](_0xf1c275);}),loadingCanceled=![];let _0x39b5ef=![];while(_0x244497!=_0x2c9b0c[_0x18a8e0(0x1ff)]+maxLoadingProgress){_0x244497=loadingProgress,_0x2c9b0c['forEach'](_0x720a8f=>{const _0x1c2ee3=_0x18a8e0;if(gTicker[noslash(_0x720a8f)]){loading['remainingSymbols']=loading[_0x1c2ee3(0x2e6)][_0x1c2ee3(0x29e)](_0x204fa6=>_0x204fa6!=_0x720a8f);if(!watchedSymbols[_0x1c2ee3(0x1d7)](_0x720a8f))watchedSymbols['push'](_0x720a8f);_0x244497++;}}),loading[_0x18a8e0(0x245)]=Math[_0x18a8e0(0x2ea)](_0x244497/(_0x2c9b0c[_0x18a8e0(0x1ff)]+maxLoadingProgress)*0x64);loading[_0x18a8e0(0x245)]!=0x64&&(_0x421f27>0x1e*0x5&&(loading[_0x18a8e0(0x21a)]=!![],emitLoadingProgress()),_0x421f27>0x78*0x5&&!_0x39b5ef&&(_0x39b5ef=!![],logHistory(_0x18a8e0(0x262),_0x18a8e0(0x25d)+loading[_0x18a8e0(0x2e6)][_0x18a8e0(0x198)](',\x20')+_0x18a8e0(0x211)),logHistory(_0x18a8e0(0x262),_0x18a8e0(0x281)+loadCoinsRetryInterval/0xea60+_0x18a8e0(0x24c)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x18a8e0(0x2b5)]=!![],emitLoadingProgress();break;}else _0x38f05c!=loading[_0x18a8e0(0x245)]&&(_0x38f05c=loading[_0x18a8e0(0x245)],emitLoadingProgress()),_0x421f27++,await sleep(0xc8);}_0x244497==_0x2c9b0c['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x18a8e0(0x2cf)]({'status':_0x18a8e0(0x2d4),'live':'running'},_0x180177=>{}),_0x39b5ef&&logHistory(_0x18a8e0(0x29a),_0x18a8e0(0x18b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x320ad5=_0x403665;proxyEmit(_0x320ad5(0x2dd),{...emittedConfiguration(),'configstate':_0x320ad5(0x177)});}function emitLoadingProgress(){const _0x5a4eb4=_0x403665;proxyEmit(_0x5a4eb4(0x216),loading);}async function getFiat(){const _0x391b97=_0x403665;let _0x2689fb=gTicker[stablecoins[_0x391b97(0x21d)][_0x391b97(0x217)]],_0x402f85=gTicker[stablecoins[_0x391b97(0x195)]['coin']];return{'eur':Number(_0x2689fb),'usd':Number(_0x402f85)};}function capitalize(_0x32f4dc){return _0x32f4dc['substring'](0x0,0x1)['toUpperCase']()+_0x32f4dc['substring'](0x1);}function supportedExchanges(){const _0x59890e=_0x403665,_0x2a0fd9=['ws',_0x59890e(0x302),_0x59890e(0x190),'watchTrades',_0x59890e(0x288),_0x59890e(0x23e),_0x59890e(0x20a),_0x59890e(0x257),_0x59890e(0x2fd)];let _0x2b4569=[],_0x16a09b=[],_0xac234e=ccxt[_0x59890e(0x209)][_0x59890e(0x212)];_0xac234e[_0x59890e(0x2de)](_0x37a33a=>{const _0xc53c2a=_0x59890e;try{const _0x5d4f00=new ccxt['pro'][_0x37a33a]();_0x16a09b[_0xc53c2a(0x25b)](_0x5d4f00);}catch(_0x1b2ae9){}}),_0x16a09b[_0x59890e(0x2de)](_0x469611=>{const _0x5ae05e=_0x59890e;let _0x23411f=0x0;_0x2a0fd9[_0x5ae05e(0x2de)](_0x9e7d74=>{const _0x4537fe=_0x5ae05e;_0x9e7d74 in _0x469611[_0x4537fe(0x1a0)]&&_0x469611[_0x4537fe(0x1a0)][_0x9e7d74]&&_0x23411f++;}),_0x23411f==_0x2a0fd9[_0x5ae05e(0x1ff)]&&_0x2b4569[_0x5ae05e(0x25b)](capitalize(_0x469611['id']));});let _0x188fc9=[];return _0xac234e[_0x59890e(0x2de)](_0x121b44=>{const _0x269ec4=_0x59890e;_0x121b44=capitalize(_0x121b44);if(!_0x2b4569[_0x269ec4(0x1d7)](_0x121b44))_0x188fc9['push'](_0x121b44);}),_0x2b4569;}function setStartDatePerformance(){const _0x263565=_0x403665;if(config&&config['liquidity'][0x0][_0x263565(0x164)]['length']!=0x0){const _0x278a59=config['liquidity'][0x0][_0x263565(0x164)];dbPerformance[_0x263565(0x224)](_0x263565(0x1b9))[_0x263565(0x1e5)]({'date':config['startdate']})['assign']({'coins':_0x278a59})['write']();}}async function recreateCoinResults(){const _0x40da77=_0x403665;recreationNeeded=![];let _0x369262,_0x572597=[];try{for(const _0x4853a6 of currentCoins){if(_0x4853a6[_0x40da77(0x217)]!=config[_0x40da77(0x1e0)]){let _0xc8c656=0x0,_0x3b75ec,_0x28f2d0;_0x369262=await getAllEventOrders(_0x4853a6[_0x40da77(0x213)]);if(_0x369262[_0x40da77(0x1ff)]>0x0)_0x369262['forEach'](_0x1f3ad3=>{const _0x2a34f0=_0x40da77,_0x21c2d8=_0x4853a6[_0x2a34f0(0x213)][_0x2a34f0(0x1d7)](config[_0x2a34f0(0x1e0)]+'/');_0x572597[_0x2a34f0(0x25b)]({'datetime':_0x1f3ad3[_0x2a34f0(0x27c)],'coin':_0x4853a6['coin'],'symbol':_0x4853a6[_0x2a34f0(0x213)],'side':_0x1f3ad3[_0x2a34f0(0x29c)],'reverse':_0x21c2d8,'amount':formatResult(_0x1f3ad3[_0x2a34f0(0x2d1)],0x8),'filled':formatResult(_0x1f3ad3[_0x2a34f0(0x2d1)],0x8),'price':formatResult(_0x1f3ad3[_0x2a34f0(0x2da)],0x8)}),_0xc8c656=_0x1f3ad3[_0x2a34f0(0x29c)]=='buy'?_0xc8c656+_0x1f3ad3[_0x2a34f0(0x2d1)]:_0xc8c656-_0x1f3ad3[_0x2a34f0(0x2d1)];if(!_0x28f2d0)_0x28f2d0=_0x1f3ad3[_0x2a34f0(0x2da)];});_0x3b75ec=_0x4853a6[_0x40da77(0x165)]-_0xc8c656;let _0x5244f9;config[_0x40da77(0x306)][_0x40da77(0x2de)](_0x2c5f4e=>{const _0x4fd100=_0x40da77;!_0x5244f9&&(_0x5244f9=_0x2c5f4e['changes']['find'](_0x211e3e=>_0x211e3e[_0x4fd100(0x217)]==_0x4853a6[_0x4fd100(0x217)]),_0x5244f9&&(_0x3b75ec=_0x5244f9['number'],_0x28f2d0=_0x5244f9['price']));});let _0xd68364=dbCoinResults['get'](_0x40da77(0x1bd))[_0x40da77(0x1e5)]({'coin':_0x4853a6[_0x40da77(0x217)]})[_0x40da77(0x2c2)]();_0xd68364={'coin':_0x4853a6[_0x40da77(0x217)],'number':_0x3b75ec,'breakeven':_0x28f2d0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x40da77(0x224)](_0x40da77(0x1bd))[_0x40da77(0x1e5)]({'coin':_0x4853a6['coin']})[_0x40da77(0x235)](_0xd68364)[_0x40da77(0x19f)]();}}_0x572597['sort']((_0x127752,_0x322801)=>_0x127752[_0x40da77(0x27c)]>_0x322801['datetime']?0x1:_0x322801[_0x40da77(0x27c)]>_0x127752[_0x40da77(0x27c)]?-0x1:0x0);let _0x1aaeea=0x0;for(let _0x4041f6 of _0x572597){await updateCoinResults(_0x4041f6,!![]);}}catch(_0x1c88e5){await handleError(_0x1c88e5,_0x40da77(0x2c4));}}async function getAllEventOrders(_0xd78048){const _0x1c41f2=_0x403665;let _0x2cc6a0=[],_0x5ee2f8=dbLogs['get'](_0x1c41f2(0x18c))['filter'](_0x449c4b=>{const _0x3bca44=_0x1c41f2,_0x32dc23=_0x449c4b['event'][_0x3bca44(0x237)]();return _0x32dc23['includes'](_0xd78048[_0x3bca44(0x237)]())&&(_0x32dc23[_0x3bca44(0x1d7)](_0x3bca44(0x21e))&&_0x32dc23[_0x3bca44(0x1d7)](_0x3bca44(0x2b2))||_0x32dc23[_0x3bca44(0x1d7)](_0x3bca44(0x2d1))&&_0x32dc23[_0x3bca44(0x1d7)]('order'));})[_0x1c41f2(0x210)](_0x1c41f2(0x1e1))[_0x1c41f2(0x2c2)]();return _0x5ee2f8[_0x1c41f2(0x2de)](_0x54b864=>{const _0x2351fa=_0x1c41f2,_0x6399ef=_0x54b864[_0x2351fa(0x242)][_0x2351fa(0x1d7)](_0x2351fa(0x1fc))?_0x2351fa(0x1fc):_0x2351fa(0x30d),_0x4d483b=/#([0-9]|\.)+\s/i,_0x2d53f8=Number(_0x4d483b[_0x2351fa(0x183)](_0x54b864[_0x2351fa(0x242)])[0x0][_0x2351fa(0x275)](0x1)),_0x5bb31f=/@([0-9]|\.)+$/i,_0x52c0be=Number(_0x5bb31f['exec'](_0x54b864['event'])[0x0][_0x2351fa(0x275)](0x1));_0x2cc6a0[_0x2351fa(0x25b)]({'datetime':_0x54b864[_0x2351fa(0x1e1)],'coin':symbolToCoin(_0xd78048),'symbol':_0xd78048,'side':_0x6399ef,'amount':_0x2d53f8,'filled':_0x2d53f8,'price':_0x52c0be});}),_0x2cc6a0;}async function validate24hChanges(){const _0x44fea4=_0x403665;for(const _0x5dc4cf of currentCoins){if(_0x5dc4cf[_0x44fea4(0x217)]!=config[_0x44fea4(0x1e0)]){let _0x42778e;_0x5dc4cf[_0x44fea4(0x1f2)]?_0x42778e=formatResult((0x1/(gChange[_0x5dc4cf[_0x44fea4(0x213)]]/0x64+0x1)-0x1)*0x64,0x3):_0x42778e=gChange[_0x5dc4cf[_0x44fea4(0x213)]],_0x42778e<config[_0x44fea4(0x22f)]&&(logHistory('error',_0x5dc4cf[_0x44fea4(0x217)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x42778e+'%'),logHistory(_0x44fea4(0x262),_0x44fea4(0x23f)),logHistory(_0x44fea4(0x262),_0x44fea4(0x21f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x384261,_0x2eea80){const _0x350e12=_0x403665;if(!_0x384261)return!![];const _0x408352=_0x2eea80[_0x350e12(0x2e9)]('.'),_0x4bee4f=_0x384261[_0x350e12(0x2e9)]('.');for(var _0x1c0d9b=0x0;_0x1c0d9b<_0x4bee4f[_0x350e12(0x1ff)];_0x1c0d9b++){const _0xf8968d=~~_0x4bee4f[_0x1c0d9b],_0xab16dd=~~_0x408352[_0x1c0d9b];if(_0xf8968d<_0xab16dd)return!![];if(_0xf8968d>_0xab16dd)return![];}return![];}async function oneTimeMigration(){const _0x162588=_0x403665;let _0x473804=dbLogs[_0x162588(0x224)](_0x162588(0x192))['value']();if(isOlderVersion(_0x473804,_0x162588(0x1ab))){let _0x4509d9=[];const _0x386d6b=dbLogs[_0x162588(0x224)](_0x162588(0x18c))[_0x162588(0x2c2)]();_0x386d6b[_0x162588(0x2de)](_0x39b17b=>{const _0x3cc5b3=_0x162588;_0x4509d9['push']({'time':_0x39b17b[_0x3cc5b3(0x1e1)],'type':_0x39b17b[_0x3cc5b3(0x25a)],'event':_0x39b17b['event']});}),dbLogs[_0x162588(0x224)]('logs')[_0x162588(0x235)](_0x4509d9)[_0x162588(0x19f)]();}let _0x8a89ec=dbConfig[_0x162588(0x224)]('version')[_0x162588(0x2c2)]();if(isOlderVersion(_0x8a89ec,_0x162588(0x1ab))){let _0x7f5262=dbConfig[_0x162588(0x224)]('bot')[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x2c2)]();if(_0x7f5262){let _0x5a8001=[];_0x7f5262[_0x162588(0x324)][_0x162588(0x2de)](_0x4dffa0=>{const _0x11d408=_0x162588;_0x5a8001['push']({'coin':_0x4dffa0[_0x11d408(0x217)],'number':_0x4dffa0[_0x11d408(0x247)],'price':_0x4dffa0[_0x11d408(0x2e4)]}),delete _0x4dffa0[_0x11d408(0x247)],delete _0x4dffa0[_0x11d408(0x2e4)];});if(_0x5a8001[_0x162588(0x1ff)]!==0x0)fs[_0x162588(0x1d0)](configbackuppath+(_0x162588(0x193)+botID+_0x162588(0x25e)),JSON['stringify'](_0x5a8001,null,0x4),function(_0xa7dc0f){if(_0xa7dc0f){}});const _0x1b0260=(_0x2dffc4,_0x38606f)=>{const _0x2d5a76=_0x162588;let _0x572d03=[];_0x38606f[_0x2d5a76(0x2de)](_0x56d89d=>{const _0x2de612=_0x2d5a76,_0x433505=_0x2dffc4[_0x2de612(0x1e5)](_0x775c2c=>_0x775c2c[_0x2de612(0x217)]==_0x56d89d['coin']);if(!_0x433505)_0x572d03[_0x2de612(0x25b)](_0x56d89d);});let _0x24f681=[];return _0x2dffc4[_0x2d5a76(0x2de)](_0x3ef2b3=>{const _0x439822=_0x2d5a76,_0x5fb7da=_0x38606f[_0x439822(0x1e5)](_0x4967e6=>_0x4967e6[_0x439822(0x217)]==_0x3ef2b3[_0x439822(0x217)]);if(!_0x5fb7da||_0x5fb7da[_0x439822(0x165)]==0x0&&_0x3ef2b3[_0x439822(0x165)]!=0x0)_0x24f681['push'](_0x3ef2b3);}),{'missingDay1':_0x572d03,'notInDay2':_0x24f681};},_0x40cd67=dbPerformance[_0x162588(0x224)](_0x162588(0x1b9))[_0x162588(0x17c)]()['value']();if(_0x40cd67['length']>0x1){const {missingDay1:_0x5b86bb,notInDay2:_0x4feff7}=_0x1b0260(_0x5a8001,_0x40cd67[0x1][_0x162588(0x1bd)]);_0x5a8001=[..._0x5a8001,..._0x5b86bb],_0x4feff7[_0x162588(0x2de)](_0x1e494e=>{const _0x5a6823=_0x162588;let _0x3e9fed=_0x5a8001[_0x5a6823(0x163)](_0x355e2e=>_0x355e2e['coin']==_0x1e494e[_0x5a6823(0x217)]);_0x3e9fed!=-0x1&&_0x5a8001[_0x5a6823(0x2c6)](_0x3e9fed,0x1);});}_0x5a8001['sort']((_0x17980f,_0x5e54d6)=>_0x17980f[_0x162588(0x217)]>_0x5e54d6[_0x162588(0x217)]?0x1:_0x5e54d6['coin']>_0x17980f[_0x162588(0x217)]?-0x1:0x0);let _0x2f37b2=[{'date':_0x7f5262[_0x162588(0x179)],'changes':_0x5a8001}];_0x40cd67[_0x162588(0x1ff)]>0x2&&_0x40cd67[_0x162588(0x2de)]((_0xb7d1d2,_0x596314)=>{const _0x34aa66=_0x162588;if(_0x596314>0x0&&_0x596314<_0x40cd67[_0x34aa66(0x1ff)]-0x1){const {missingDay1:_0x5f4e98,notInDay2:_0x4fcc0f}=_0x1b0260(_0x40cd67[_0x596314][_0x34aa66(0x1bd)],_0x40cd67[_0x596314+0x1][_0x34aa66(0x1bd)]);_0x5a8001=[],(_0x5f4e98[_0x34aa66(0x1ff)]!=0x0||_0x4fcc0f['length']!=0x0)&&(_0x5f4e98['length']!=0x0&&_0x5a8001['push'](..._0x5f4e98),_0x4fcc0f['length']!=0x0&&(_0x4fcc0f['forEach'](_0x336e31=>{const _0x576b3e=_0x34aa66;_0x336e31[_0x576b3e(0x165)]=-_0x336e31[_0x576b3e(0x165)];}),_0x5a8001[_0x34aa66(0x25b)](..._0x4fcc0f)),_0x5a8001['sort']((_0xbf362c,_0x553b2f)=>_0xbf362c[_0x34aa66(0x217)]>_0x553b2f[_0x34aa66(0x217)]?0x1:_0x553b2f[_0x34aa66(0x217)]>_0xbf362c[_0x34aa66(0x217)]?-0x1:0x0),_0x2f37b2[_0x34aa66(0x25b)]({'date':_0x40cd67[_0x596314+0x1][_0x34aa66(0x252)],'changes':_0x5a8001}));}}),dbConfig[_0x162588(0x224)](_0x162588(0x2dc))[_0x162588(0x1e5)]({'botID':botID})['assign']({..._0x7f5262,'liquidity':_0x2f37b2})[_0x162588(0x19f)]();}}if(isOlderVersion(_0x8a89ec,_0x162588(0x282))){let _0x5cf731=dbConfig[_0x162588(0x224)](_0x162588(0x2dc))[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x2c2)]();if(_0x5cf731){const _0x595972=_0x5cf731[_0x162588(0x2f6)],_0xab984a=_0x595972?capitalize(_0x595972):_0x162588(0x214);dbConfig[_0x162588(0x224)]('bot')[_0x162588(0x1e5)]({'botID':botID})['assign']({'exchange':_0xab984a})[_0x162588(0x19f)]();}}if(isOlderVersion(_0x8a89ec,_0x162588(0x1b4))){let _0x5935f8=dbConfig[_0x162588(0x224)](_0x162588(0x2dc))[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x2c2)]();if(_0x5935f8){const _0x52c9fa=_0x5935f8['marketcapEnabled'],_0x246ed0=_0x52c9fa?_0x162588(0x207):![];dbConfig[_0x162588(0x224)](_0x162588(0x2dc))[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x235)]({'marketcapEnabled':_0x246ed0})[_0x162588(0x19f)]();}}if(isOlderVersion(_0x8a89ec,_0x162588(0x1a1))){let _0x3960b1=dbConfig['get']('bot')[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x2c2)]();if(_0x3960b1){const _0x18083c=_0x3960b1['autoliquidity'],_0x1f6d31=_0x18083c?'update-liquidity':![];dbConfig[_0x162588(0x224)](_0x162588(0x2dc))[_0x162588(0x1e5)]({'botID':botID})[_0x162588(0x235)]({'autoliquidity':_0x1f6d31})[_0x162588(0x19f)]();}}let _0x430176=dbPerformance[_0x162588(0x224)](_0x162588(0x192))[_0x162588(0x2c2)]();isOlderVersion(_0x430176,_0x162588(0x1ab))&&setStartDatePerformance();let _0x5b1479=dbCoinResults[_0x162588(0x224)](_0x162588(0x192))[_0x162588(0x2c2)]();if(isOlderVersion(_0x5b1479,_0x162588(0x265))){let _0x5d2ab2=dbCoinResults[_0x162588(0x224)](_0x162588(0x1bd))[_0x162588(0x2c2)]();if(_0x5d2ab2['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x58e8f9=_0x403665;dbConfig['set'](_0x58e8f9(0x192),serverversion)[_0x58e8f9(0x19f)](),dbPerformance[_0x58e8f9(0x2bb)](_0x58e8f9(0x192),serverversion)['write'](),dbLogs[_0x58e8f9(0x2bb)](_0x58e8f9(0x192),serverversion)[_0x58e8f9(0x19f)](),dbCoinResults[_0x58e8f9(0x2bb)](_0x58e8f9(0x192),serverversion)[_0x58e8f9(0x19f)]();}function getConfiguration(_0x2e5f38){const _0x1220ad=_0x403665;let _0xe71d6a=dbConfig['get']('bot')['find']({'botID':_0x2e5f38})[_0x1220ad(0x2c2)]();if(_0xe71d6a){let _0xdb247c=![];typeof _0xe71d6a[_0x1220ad(0x2b6)]=='string'&&(_0xe71d6a={..._0xe71d6a,'threshold':Number(_0xe71d6a['threshold'])},_0xdb247c=!![]),_0xe71d6a[_0x1220ad(0x22f)]==undefined&&(_0xe71d6a={..._0xe71d6a,'change24h':-0x14},_0xdb247c=!![]),_0xe71d6a[_0x1220ad(0x27b)]==undefined&&(_0xe71d6a={..._0xe71d6a,'fiat':_0x1220ad(0x2fe)},_0xdb247c=!![]),_0xe71d6a[_0x1220ad(0x1d5)]==undefined&&(_0xe71d6a={..._0xe71d6a,'onepagemode':settings[_0x1220ad(0x1d5)]},_0xdb247c=!![]),_0xe71d6a[_0x1220ad(0x24d)]==undefined&&(_0xe71d6a={..._0xe71d6a,'colorscheme':_0x1220ad(0x249)},_0xdb247c=!![]),_0xe71d6a['autoliquidity']==undefined&&(_0xe71d6a={..._0xe71d6a,'autoliquidity':_0x1220ad(0x1e6)},_0xdb247c=!![]),_0xe71d6a['marketcapApi']==undefined&&(_0xe71d6a={..._0xe71d6a,'marketcapApi':settings[_0x1220ad(0x189)]?!![]:![]},_0xdb247c=!![]),_0xe71d6a[_0x1220ad(0x27f)]==undefined&&(_0xe71d6a={..._0xe71d6a,'marketcapEnabled':![]},_0xdb247c=!![]),_0xdb247c&&(_0xe71d6a={'botID':_0xe71d6a[_0x1220ad(0x313)],'exchange':_0xe71d6a[_0x1220ad(0x2f6)],'apiKey':_0xe71d6a[_0x1220ad(0x1cd)],'apiSecret':_0xe71d6a[_0x1220ad(0x1b5)],'apiPassword':_0xe71d6a['apiPassword'],'basecoin':_0xe71d6a['basecoin'],'botname':_0xe71d6a[_0x1220ad(0x1ed)],'showname':_0xe71d6a[_0x1220ad(0x310)],'threshold':_0xe71d6a[_0x1220ad(0x2b6)],'ordertype':_0xe71d6a[_0x1220ad(0x1fa)],'timeout':_0xe71d6a[_0x1220ad(0x21a)],'fiat':_0xe71d6a[_0x1220ad(0x27b)],'startdate':_0xe71d6a[_0x1220ad(0x179)],'recreate':_0xe71d6a['recreate'],'timeshift':_0xe71d6a[_0x1220ad(0x28e)],'onepagemode':_0xe71d6a[_0x1220ad(0x1d5)],'headless':_0xe71d6a[_0x1220ad(0x250)],'cooldown':_0xe71d6a[_0x1220ad(0x176)],'change24h':_0xe71d6a['change24h'],'emojibuy':_0xe71d6a[_0x1220ad(0x17f)],'emojisell':_0xe71d6a[_0x1220ad(0x271)],'colorscheme':_0xe71d6a[_0x1220ad(0x24d)],'marketcapApi':_0xe71d6a[_0x1220ad(0x189)],'marketcapEnabled':_0xe71d6a[_0x1220ad(0x27f)],'portfolio':_0xe71d6a[_0x1220ad(0x324)],'autoliquidity':_0xe71d6a[_0x1220ad(0x30b)],'liquidity':_0xe71d6a[_0x1220ad(0x306)],'openOrders':_0xe71d6a[_0x1220ad(0x1bc)]},dbConfig[_0x1220ad(0x224)]('bot')[_0x1220ad(0x18d)]()[_0x1220ad(0x19f)](),dbConfig[_0x1220ad(0x224)](_0x1220ad(0x2dc))[_0x1220ad(0x25b)](_0xe71d6a)[_0x1220ad(0x19f)]());}else _0xe71d6a={'botID':_0x2e5f38,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x2e5f38,'showname':![],'threshold':0x3,'ordertype':_0x1220ad(0x21e),'timeout':0x14,'fiat':_0x1220ad(0x2fe),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1220ad(0x28e)],'onepagemode':settings[_0x1220ad(0x1d5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1220ad(0x249),'marketcapApi':settings[_0x1220ad(0x189)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x1220ad(0x1e6),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xe71d6a;}function emittedConfiguration(){const _0x436130=_0x403665;let _0x466f8b;if(config[_0x436130(0x1cd)]=='')_0x466f8b={...config,'configstate':'initial'};else config[_0x436130(0x1cd)]=='***'?_0x466f8b={...config,'configstate':_0x436130(0x304)}:(_0x466f8b={...config,'apiKey':'************','apiSecret':'************'},config[_0x436130(0x329)]&&(_0x466f8b['apiPassword']='************'));return _0x466f8b[_0x436130(0x172)]=enableFiatToggle,_0x466f8b;}function getSettings(){return dbSettings['get']('settings')['value']();}function getSecure(){const _0x52b980=_0x403665;return dbSecure[_0x52b980(0x224)]('secure')[_0x52b980(0x2c2)]()||{};}function updateTimeshift(_0x11cf46){const _0xf84135=_0x403665;let _0x15c982=dbConfig[_0xf84135(0x224)](_0xf84135(0x2dc))[_0xf84135(0x1e5)]({'botID':botID})[_0xf84135(0x2c2)]();_0x15c982&&dbConfig[_0xf84135(0x224)]('bot')[_0xf84135(0x1e5)]({'botID':botID})[_0xf84135(0x235)]({'timeshift':_0x11cf46})['write'](),config[_0xf84135(0x28e)]=_0x11cf46,proxyEmit(_0xf84135(0x2dd),emittedConfiguration());}function updateOnepagemode(_0x382844){const _0x54951e=_0x403665;let _0x4f62ad=dbConfig[_0x54951e(0x224)]('bot')[_0x54951e(0x1e5)]({'botID':botID})[_0x54951e(0x2c2)]();_0x4f62ad&&dbConfig[_0x54951e(0x224)]('bot')[_0x54951e(0x1e5)]({'botID':botID})[_0x54951e(0x235)]({'onepagemode':_0x382844})[_0x54951e(0x19f)](),config[_0x54951e(0x1d5)]=_0x382844,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x558cd0){const _0x2efe9e=_0x403665,_0x812ae8=_0x558cd0?!![]:![];let _0x3db1c2=dbConfig[_0x2efe9e(0x224)](_0x2efe9e(0x2dc))['find']({'botID':botID})['value']();_0x3db1c2&&dbConfig[_0x2efe9e(0x224)]('bot')[_0x2efe9e(0x1e5)]({'botID':botID})[_0x2efe9e(0x235)]({'marketcapApi':_0x812ae8})[_0x2efe9e(0x19f)](),config[_0x2efe9e(0x189)]=_0x812ae8,getMarketCap(),proxyEmit(_0x2efe9e(0x2dd),emittedConfiguration());}async function storeConfiguration(_0xc59830){const _0x5c924a=_0x403665;logger[_0x5c924a(0x1e9)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x32e6cf=![],_0x33f54f=![],_0x39dc5d=[];_0xc59830['portfolio'][_0x5c924a(0x2de)](_0x309e6b=>{const _0xc172d8=_0x5c924a;if(!_0x309e6b['excluded']&&_0x309e6b['coin']!=_0xc59830[_0xc172d8(0x1e0)])_0x39dc5d['push'](_0x309e6b[_0xc172d8(0x213)]);}),_0x39dc5d['forEach'](_0x57ab83=>{const _0x25e905=_0x5c924a,_0x357a81=currentCoins[_0x25e905(0x1e5)](_0x53695c=>_0x53695c['symbol']==_0x57ab83);!_0x357a81&&(_0x32e6cf=!![]);}),currentCoins[_0x5c924a(0x2de)](_0x9af559=>{const _0x4dd380=_0x5c924a;if(_0x9af559[_0x4dd380(0x217)]!=config[_0x4dd380(0x1e0)]){const _0x507270=_0x39dc5d['find'](_0x49a7ba=>_0x49a7ba==_0x9af559[_0x4dd380(0x213)]);!_0x507270&&(_0x32e6cf=!![]);}}),_0xc59830[_0x5c924a(0x324)][_0x5c924a(0x2de)](_0x43bb4f=>{const _0x5b7699=_0x5c924a,_0x342de6=config[_0x5b7699(0x324)][_0x5b7699(0x1e5)](_0x527e32=>_0x527e32['coin']==_0x43bb4f[_0x5b7699(0x217)]);if(_0x342de6&&_0x43bb4f[_0x5b7699(0x1c8)]!=_0x342de6[_0x5b7699(0x1c8)])_0x33f54f=!![];});let _0x4e2a40=dbConfig[_0x5c924a(0x224)]('bot')[_0x5c924a(0x1e5)]({'botID':botID})['value']();_0xc59830={..._0xc59830,'apiKey':decryptRSA(secure[_0x5c924a(0x2a4)],_0xc59830[_0x5c924a(0x1cd)]),'apiSecret':decryptRSA(secure[_0x5c924a(0x2a4)],_0xc59830[_0x5c924a(0x1b5)])};_0xc59830[_0x5c924a(0x329)]&&(_0xc59830['apiPassword']=decryptRSA(secure[_0x5c924a(0x2a4)],_0xc59830[_0x5c924a(0x329)]));let _0x3cd960=![];if(_0x4e2a40){_0xc59830['apiKey']=='************'?_0xc59830[_0x5c924a(0x1cd)]=config[_0x5c924a(0x1cd)]:_0x3cd960=!![];_0xc59830[_0x5c924a(0x1b5)]=='************'?_0xc59830[_0x5c924a(0x1b5)]=config[_0x5c924a(0x1b5)]:_0x3cd960=!![];if(_0xc59830[_0x5c924a(0x329)]==_0x5c924a(0x28a))_0xc59830[_0x5c924a(0x329)]=config[_0x5c924a(0x329)];else{if(_0xc59830['apiPassword'])_0x3cd960=!![];}dbConfig[_0x5c924a(0x224)]('bot')['find']({'botID':botID})[_0x5c924a(0x235)](_0xc59830)[_0x5c924a(0x19f)]();}else dbConfig[_0x5c924a(0x224)]('bot')['push'](_0xc59830)[_0x5c924a(0x19f)](),_0x3cd960=!![],process[_0x5c924a(0x2cf)]({'status':_0x5c924a(0x2d4),'live':_0x5c924a(0x199)},_0x3adf0a=>{});process['send']({'botname':_0xc59830['botname']},_0x36d004=>{}),config={..._0xc59830},updateBotManager(),proxyEmit(_0x5c924a(0x166)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3cd960)!_0x4e2a40?await reset(!![]):getBalances();else _0x32e6cf||_0x33f54f?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4c4f99){const _0x721f7=_0x403665,_0x1f4c27={...config,'headless':_0x4c4f99[_0x721f7(0x250)]};let _0x527136=dbConfig[_0x721f7(0x224)](_0x721f7(0x2dc))[_0x721f7(0x1e5)]({'botID':botID})[_0x721f7(0x2c2)]();_0x527136&&dbConfig[_0x721f7(0x224)](_0x721f7(0x2dc))[_0x721f7(0x1e5)]({'botID':botID})[_0x721f7(0x235)](_0x1f4c27)[_0x721f7(0x19f)](),config={..._0x1f4c27},updateBotManager(),proxyEmit(_0x721f7(0x2dd),emittedConfiguration());}async function storeFiat(_0x48c20b){const _0x2a4102=_0x403665,_0x4f3b68={...config,'fiat':_0x48c20b};let _0x3a71bb=dbConfig['get'](_0x2a4102(0x2dc))['find']({'botID':botID})['value']();_0x3a71bb&&dbConfig[_0x2a4102(0x224)](_0x2a4102(0x2dc))[_0x2a4102(0x1e5)]({'botID':botID})[_0x2a4102(0x235)](_0x4f3b68)['write'](),config={..._0x4f3b68},proxyEmit(_0x2a4102(0x2dd),emittedConfiguration());}function resetHistory(){const _0x581bc1=_0x403665;logger[_0x581bc1(0x248)](_0x581bc1(0x253));try{if(fs[_0x581bc1(0x2df)](path[_0x581bc1(0x198)](configpath,_0x581bc1(0x2db)+botID+_0x581bc1(0x187))))fs[_0x581bc1(0x1b8)](path['join'](configpath,'bot-'+botID+_0x581bc1(0x187)));if(fs['existsSync'](path[_0x581bc1(0x198)](configpath,_0x581bc1(0x2db)+botID+'-performance.json')))fs[_0x581bc1(0x1b8)](path[_0x581bc1(0x198)](configpath,_0x581bc1(0x2db)+botID+_0x581bc1(0x26e)));if(fs[_0x581bc1(0x2df)](path['join'](configpath,_0x581bc1(0x2db)+botID+_0x581bc1(0x19b))))fs[_0x581bc1(0x1b8)](path[_0x581bc1(0x198)](configpath,_0x581bc1(0x2db)+botID+_0x581bc1(0x19b)));}catch(_0xbf08d){if(_0xbf08d)logger['full'](_0x581bc1(0x1b1),_0xbf08d);}const _0x4ccd9b=getDate();let _0x2b323e=[];currentCoins[_0x581bc1(0x2de)](_0x5076a5=>{const _0x17513b=_0x581bc1;_0x2b323e[_0x17513b(0x25b)]({'coin':_0x5076a5[_0x17513b(0x217)],'number':_0x5076a5[_0x17513b(0x165)],'price':_0x5076a5['last']});});let _0xba964d=dbConfig['get'](_0x581bc1(0x2dc))['find']({'botID':botID})[_0x581bc1(0x2c2)]();_0xba964d&&(dbConfig[_0x581bc1(0x224)](_0x581bc1(0x2dc))['find']({'botID':botID})[_0x581bc1(0x235)]({'liquidity':[{'date':_0x4ccd9b,'changes':_0x2b323e}]})[_0x581bc1(0x19f)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x58fae1){const _0x16ab23=_0x403665;return _0x58fae1[_0x16ab23(0x223)]('/','');}function updateHighestFee(_0x43f562){const _0x514d48=_0x403665;if(_0x43f562[_0x514d48(0x1f2)]){let _0x282eeb={'filled':_0x43f562[_0x514d48(0x2d1)]*_0x43f562['price'],'amount':_0x43f562[_0x514d48(0x2d1)]*_0x43f562[_0x514d48(0x2da)],'side':_0x43f562[_0x514d48(0x29c)]=='sell'?'buy':'sell','price':0x1/_0x43f562['price']};_0x43f562={..._0x43f562,..._0x282eeb};}const _0x43c258=defaultFee*_0x43f562['filled']*_0x43f562[_0x514d48(0x2da)];lastFees[_0x514d48(0x2a3)][_0x514d48(0x1ff)]===0x14&&lastFees[_0x514d48(0x2a3)][_0x514d48(0x1af)](),lastFees[_0x514d48(0x2a3)][_0x514d48(0x25b)](_0x43c258),lastFees[_0x514d48(0x2f9)]=Math[_0x514d48(0x301)](...lastFees[_0x514d48(0x2a3)]);}async function updateNumberCoinsCcxt(_0x171470){const _0x26f413=_0x403665;logger[_0x26f413(0x1e9)](_0x26f413(0x2f3)+_0x171470[_0x26f413(0x213)]+_0x26f413(0x1f6)+_0x171470[_0x26f413(0x1d8)]+_0x26f413(0x1f6)+_0x171470[_0x26f413(0x2d1)]+_0x26f413(0x266)+_0x171470[_0x26f413(0x1c3)]+_0x26f413(0x1f6)+_0x171470['id']);let _0x664d82=_0x171470[_0x26f413(0x1d8)],_0x58d37a=![];currentCoins['forEach'](_0x1c395f=>{const _0x4ef966=_0x26f413;_0x1c395f[_0x4ef966(0x213)]==_0x171470[_0x4ef966(0x213)]&&(_0x58d37a=!![]);});if(!_0x58d37a)return;const _0x2a3e85=currentCoins[_0x26f413(0x1e5)](_0x3aed1f=>_0x3aed1f[_0x26f413(0x213)]==_0x171470[_0x26f413(0x213)]),_0x2dd3f5=_0x5b5877=>{const _0x542831=_0x26f413;if(_0x2a3e85)_0x2a3e85[_0x542831(0x309)]=_0x5b5877;};let _0x3e0282=![];for(const _0xa80b50 of lastOrders){const _0x1329a9=0x64,_0x30b864=0x1388;let _0x229c23=0x0;while(!_0xa80b50[_0x26f413(0x286)]&&_0x229c23*_0x1329a9<_0x30b864){_0x229c23++,await sleep(_0x1329a9);}if(_0x229c23>0x0)logger[_0x26f413(0x1e9)](_0x26f413(0x31c)+_0x229c23*_0x1329a9/0x3e8+_0x26f413(0x174));_0xa80b50[_0x26f413(0x286)]==_0x171470['id']&&(_0x3e0282=!![]);}if(_0x664d82==_0x26f413(0x16e)){_0x2dd3f5(_0x26f413(0x16e));if(_0x171470[_0x26f413(0x2d1)]>0x0){if(_0x3e0282){setBlockTransactionDetection(!![]),logger[_0x26f413(0x1e9)](_0x26f413(0x31d)+_0x171470['id']);const _0x27a9b4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x27a9b4,setBlockTransactionDetection(![]);}else logger[_0x26f413(0x1e9)](_0x26f413(0x2b1)+_0x171470['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x664d82==_0x26f413(0x22b)){_0x2dd3f5(_0x26f413(0x22b));const _0x263711=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x263711,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x664d82==_0x26f413(0x255)){if(lastOrders)for(const _0x5022ff of lastOrders){if(_0x5022ff[_0x26f413(0x286)]==_0x171470['id']){logger[_0x26f413(0x1e9)](_0x26f413(0x1bb)+_0x171470['id']),_0x3e0282=!![];if(_0x5022ff[_0x26f413(0x2d1)]==0x0){setBlockTransactionDetection(!![]),logger[_0x26f413(0x1e9)](_0x26f413(0x2ec)+_0x171470['id']);if(_0x171470[_0x26f413(0x284)])_0x5022ff[_0x26f413(0x2da)]=_0x171470[_0x26f413(0x284)];else{if(_0x171470[_0x26f413(0x2da)])_0x5022ff[_0x26f413(0x2da)]=_0x171470[_0x26f413(0x2da)];else{}}_0x5022ff[_0x26f413(0x2d1)]=_0x171470['filled'],updateHighestFee(_0x5022ff),_0x2dd3f5(_0x26f413(0x2d1)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x5ecc27=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5ecc27,setBlockTransactionDetection(![]);}_0x5022ff[_0x26f413(0x1cc)]={'currency':_0x171470[_0x26f413(0x1cc)]?_0x171470[_0x26f413(0x1cc)][_0x26f413(0x2ce)]:null,'cost':_0x171470[_0x26f413(0x1cc)]?_0x171470[_0x26f413(0x1cc)][_0x26f413(0x17e)]:0x0},await updateCoinResults(_0x5022ff);}}}!_0x3e0282&&(logger[_0x26f413(0x1e9)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x171470['id']),_0x2dd3f5(_0x26f413(0x2d1)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4690e3=JSON[_0x26f413(0x2a8)](lastBalances['portfolio']);const _0x35feea=_0x4690e3[_0x26f413(0x1e5)](_0x221ba5=>_0x221ba5[_0x26f413(0x213)]==_0x171470[_0x26f413(0x213)]);if(_0x35feea){if(_0x664d82=='open')_0x35feea['orderstatus']=_0x35feea['orderstatus']==_0x26f413(0x2d1)?_0x26f413(0x2d1):_0x26f413(0x16e);else{if(_0x664d82==_0x26f413(0x22b))_0x35feea[_0x26f413(0x309)]=_0x35feea[_0x26f413(0x309)]==_0x26f413(0x2d1)?_0x26f413(0x2d1):_0x26f413(0x22b);else _0x664d82==_0x26f413(0x255)&&(_0x35feea[_0x26f413(0x309)]=_0x26f413(0x2d1));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x4690e3)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x48e56f=_0x403665;await getOpenOrders();let _0x3a1ee3=![];currentCoins[_0x48e56f(0x2de)](_0x42eb0f=>{const _0x330996=_0x48e56f;_0x3a1ee3=allOpenOrders['find'](_0x591ca0=>_0x591ca0['symbol']==_0x42eb0f['symbol']),_0x42eb0f[_0x330996(0x309)]=_0x3a1ee3?_0x330996(0x16e):_0x330996(0x17d);});}async function getCoins(_0x2d6607=0x0,_0x357240=!![],_0x127d3c=config[_0x403665(0x1e0)]){const _0xf2c836=_0x403665;let _0x456234,_0x5c26c8=[],_0x617bd0=[],_0x5b325f=[];if(_0x2d6607)await sleep(_0x2d6607);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x456234=await exchange[_0xf2c836(0x2fd)](),mybalances=_0x456234['total'];for(const [_0x35559c,_0x3f61ec]of Object[_0xf2c836(0x1b3)](mybalances)){_0x5b325f[_0xf2c836(0x25b)](_0x35559c);}config[_0xf2c836(0x324)]['forEach'](_0x5580d8=>{const _0x40c221=_0xf2c836;!_0x5b325f[_0x40c221(0x1d7)](_0x5580d8[_0x40c221(0x217)])&&(mybalances[_0x5580d8[_0x40c221(0x217)]]=0x0);});if(_0x127d3c=='')for(const [_0x214bdb,_0x2f6935]of Object[_0xf2c836(0x1b3)](mybalances)){_0x2f6935!=0x0&&_0x5c26c8['push']({'coin':_0x214bdb});}else for(const [_0x632ec0,_0x41488e]of Object['entries'](mybalances)){const _0x459d3a=config[_0xf2c836(0x324)]['find'](_0x162f92=>_0x162f92[_0xf2c836(0x217)]==_0x632ec0),_0x33cf07=_0x632ec0+'/'+_0x127d3c,_0x1f2874=_0x127d3c+'/'+_0x632ec0,_0x523537=currentCoins[_0xf2c836(0x1e5)](_0x169935=>_0x169935[_0xf2c836(0x217)]==_0x632ec0);if((_0x41488e!=0x0||_0x459d3a)&&(allSymbols[_0xf2c836(0x1d7)](_0x33cf07)||_0x632ec0==_0x127d3c))_0x523537?_0x5c26c8['push']({..._0x523537,'number':Math[_0xf2c836(0x301)](_0x41488e+(_0x459d3a&&_0x459d3a['offset']||0x0),0x0)}):_0x5c26c8[_0xf2c836(0x25b)]({'coin':_0x632ec0,'symbol':_0x33cf07,'reverse':![],'number':Math[_0xf2c836(0x301)](_0x41488e+(_0x459d3a&&_0x459d3a[_0xf2c836(0x1c8)]||0x0),0x0),'orderstatus':'none'});else{if((_0x41488e!=0x0||_0x459d3a)&&allSymbols['includes'](_0x1f2874))_0x523537?_0x5c26c8[_0xf2c836(0x25b)]({..._0x523537,'number':Math[_0xf2c836(0x301)](_0x41488e+(_0x459d3a&&_0x459d3a[_0xf2c836(0x1c8)]||0x0),0x0)}):_0x5c26c8['push']({'coin':_0x632ec0,'symbol':_0x1f2874,'reverse':!![],'number':Math['max'](_0x41488e+(_0x459d3a&&_0x459d3a[_0xf2c836(0x1c8)]||0x0),0x0),'orderstatus':_0xf2c836(0x17d)});else _0x459d3a&&_0x5c26c8['push']({'coin':_0x459d3a[_0xf2c836(0x217)],'symbol':_0x459d3a[_0xf2c836(0x213)],'reverse':_0x459d3a[_0xf2c836(0x1f2)],'number':0x0,'orderstatus':'none'});}}}catch(_0xeda321){if(!_0x357240)handleErrorNoStop(_0xeda321,'getCoins()');else await handleError(_0xeda321,_0xf2c836(0x295));}return _0x5c26c8[_0xf2c836(0x2f4)]((_0x4205c9,_0x130649)=>_0x4205c9[_0xf2c836(0x296)]<_0x130649[_0xf2c836(0x296)]?0x1:_0x130649[_0xf2c836(0x296)]<_0x4205c9['delta']?-0x1:0x0),_0x617bd0=cloneDeep(_0x5c26c8),_0x5c26c8=_0x5c26c8[_0xf2c836(0x29e)](_0x5b442c=>{const _0x5cb689=_0xf2c836,_0x5a7bb7=config['portfolio'][_0x5cb689(0x1e5)](_0x1b4961=>_0x1b4961[_0x5cb689(0x217)]==_0x5b442c[_0x5cb689(0x217)]);return _0x5a7bb7&&!_0x5a7bb7[_0x5cb689(0x27a)];}),[_0x5c26c8,_0x617bd0];}async function getCoinNumber(_0x5a4464){const _0x158d52=_0x403665;let _0x31d56e;try{const _0x5bc250=await exchange['fetchBalance']();_0x31d56e=_0x5bc250[_0x158d52(0x17b)][_0x5a4464];}catch(_0x57d89b){await handleError(_0x57d89b,_0x158d52(0x29b));}return _0x31d56e;}async function getOpenOrders(){const _0x5108a0=_0x403665;let _0x7a4c7f;allOpenOrders=[];try{for(const _0x40a44b of config['portfolio']){!_0x40a44b[_0x5108a0(0x27a)]&&_0x40a44b[_0x5108a0(0x217)]!=config[_0x5108a0(0x1e0)]&&(_0x7a4c7f=await exchange['fetchOpenOrders'](_0x40a44b[_0x5108a0(0x213)]),_0x7a4c7f[_0x5108a0(0x1ff)]>0x0&&allOpenOrders[_0x5108a0(0x25b)](_0x7a4c7f[0x0]));}}catch(_0x55d74e){await handleError(_0x55d74e,_0x5108a0(0x263));}}async function handleOpenOrders(_0x2118f6=0x0){const _0x2ad2c3=_0x403665;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x2ad2c3(0x1ca)]&&allOrdersPlaced&&(_0x2118f6==0x0?(logger['debug'](_0x2ad2c3(0x1c2)),_0x2118f6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2ad2c3(0x1e9)](_0x2ad2c3(0x2cb)),validateOrders(_0x2ad2c3(0x2d0))));}async function testAPI(_0x810523){const _0x5c5922=_0x403665,_0x43ac2e=ccxt[_0x5c5922(0x209)][_0x810523['exchange'][_0x5c5922(0x237)]()],_0x5a362b=new _0x43ac2e({'apiKey':_0x810523['apiKey'],'secret':_0x810523[_0x5c5922(0x1b5)],'options':{'defaultType':_0x5c5922(0x173)}});if(_0x810523['apiPassword'])_0x5a362b[_0x5c5922(0x298)]=_0x810523[_0x5c5922(0x329)];try{await _0x5a362b[_0x5c5922(0x2fd)]();}catch(_0x175fa9){logger[_0x5c5922(0x1e9)](_0x5c5922(0x25f)+_0x175fa9[_0x5c5922(0x20d)]());throw _0x175fa9;}}function cloneDeep(_0x471462){const _0x579866=_0x403665;return JSON['parse'](JSON[_0x579866(0x232)](_0x471462));}async function getPortfolio(_0x3da8e0){const _0x3e1974=_0x403665;let _0x3ffaa0=[],_0x286bc0=[],_0x150690=[],_0x20d816;_0x3da8e0[_0x3e1974(0x1cd)]=decryptRSA(secure[_0x3e1974(0x2a4)],_0x3da8e0[_0x3e1974(0x1cd)]),_0x3da8e0[_0x3e1974(0x1b5)]=decryptRSA(secure[_0x3e1974(0x2a4)],_0x3da8e0['apiSecret']);if(_0x3da8e0[_0x3e1974(0x329)])_0x3da8e0[_0x3e1974(0x329)]=decryptRSA(secure[_0x3e1974(0x2a4)],_0x3da8e0[_0x3e1974(0x329)]);if(_0x3da8e0[_0x3e1974(0x1cd)]!==_0x3e1974(0x28a)||_0x3da8e0[_0x3e1974(0x1b5)]!==_0x3e1974(0x28a)||_0x3da8e0[_0x3e1974(0x329)]&&_0x3da8e0[_0x3e1974(0x329)]!==_0x3e1974(0x28a)){if(config[_0x3e1974(0x2f6)]){if(_0x3da8e0[_0x3e1974(0x1cd)]=='************')_0x3da8e0[_0x3e1974(0x1cd)]=config[_0x3e1974(0x1cd)];if(_0x3da8e0[_0x3e1974(0x1b5)]==_0x3e1974(0x28a))_0x3da8e0[_0x3e1974(0x1b5)]=config[_0x3e1974(0x1b5)];if(_0x3da8e0[_0x3e1974(0x329)]==_0x3e1974(0x28a))_0x3da8e0[_0x3e1974(0x329)]=config[_0x3e1974(0x329)];}try{await testAPI(_0x3da8e0);}catch(_0x342133){if(_0x342133[_0x3e1974(0x20d)]()[_0x3e1974(0x1d7)]('AuthenticationError')){logHistory('error',_0x3e1974(0x21b)),proxyEmit(_0x3e1974(0x289),![]);return;}else{logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x3e1974(0x1fb),_0x342133),proxyEmit('portfolio1',![]);return;}}exchange?updateExchange(_0x3da8e0[_0x3e1974(0x1cd)],_0x3da8e0[_0x3e1974(0x1b5)],_0x3da8e0['apiPassword']):await initExchange(_0x3da8e0['exchange'],_0x3da8e0[_0x3e1974(0x1cd)],_0x3da8e0['apiSecret'],_0x3da8e0[_0x3e1974(0x329)]);await loadSymbols();const _0x503f11=await getCoins(0x0,![],_0x3da8e0[_0x3e1974(0x1e0)]);_0x150690=cloneDeep(_0x503f11[0x1]);}else{const _0x415c14=await getCoins();_0x150690=cloneDeep(_0x415c14[0x1]);}if(_0x3da8e0[_0x3e1974(0x1e0)]=='')proxyEmit(_0x3e1974(0x289),!![]),proxyEmit('portfolio2',_0x150690);else{_0x150690['forEach'](_0x2cb49c=>{const _0x1c814b=_0x3e1974;if(_0x2cb49c[_0x1c814b(0x217)]!=_0x3da8e0[_0x1c814b(0x1e0)]&&allSymbols['includes'](_0x2cb49c[_0x1c814b(0x213)]))_0x3ffaa0[_0x1c814b(0x25b)](_0x2cb49c['symbol']);});if(_0x3ffaa0[_0x3e1974(0x1ff)]==0x0)logHistory(_0x3e1974(0x262),_0x3e1974(0x274));else{try{_0x286bc0=await getTickers(_0x3ffaa0);}catch(_0x2b9cad){logHistory(_0x3e1974(0x262),_0x3e1974(0x231)),logger[_0x3e1974(0x1e9)](_0x3e1974(0x267),_0x2b9cad),proxyEmit(_0x3e1974(0x289),![]);return;}_0x150690[_0x3e1974(0x2de)](_0x1b91dd=>{const _0x4c46d9=_0x3e1974;_0x1b91dd['coin']!=_0x3da8e0[_0x4c46d9(0x1e0)]?_0x286bc0[_0x1b91dd[_0x4c46d9(0x213)]]?_0x20d816=_0x1b91dd[_0x4c46d9(0x1f2)]?0x1/_0x286bc0[_0x1b91dd['symbol']][_0x4c46d9(0x20b)]:_0x286bc0[_0x1b91dd[_0x4c46d9(0x213)]][_0x4c46d9(0x20b)]:_0x20d816=0x0:_0x20d816=0x1,_0x1b91dd[_0x4c46d9(0x2da)]=formatResult(_0x20d816,0x8);}),await getMarketCap(_0x150690),proxyEmit(_0x3e1974(0x289),!![]),proxyEmit(_0x3e1974(0x287),_0x150690);}}}function truncateTradeAmount(_0x4ad57e,_0x914db1){const _0x5973c3=_0x403665;let _0x275b66=0x0;try{_0x275b66=exchange[_0x5973c3(0x22d)](_0x4ad57e,_0x914db1);}catch(_0x34c4a2){}return _0x275b66;}function checkMinimums(_0x22cf4c){const _0x5f0f22=_0x403665;let _0x11caec=!![];const _0x599335=!_0x22cf4c[_0x5f0f22(0x1f2)]?markets[_0x22cf4c['symbol']]['limits'][_0x5f0f22(0x1c3)][_0x5f0f22(0x258)]:markets[_0x22cf4c[_0x5f0f22(0x213)]][_0x5f0f22(0x2d7)][_0x5f0f22(0x17e)][_0x5f0f22(0x258)],_0x5d4685=!_0x22cf4c[_0x5f0f22(0x1f2)]?markets[_0x22cf4c[_0x5f0f22(0x213)]][_0x5f0f22(0x2d7)][_0x5f0f22(0x17e)][_0x5f0f22(0x258)]:markets[_0x22cf4c['symbol']]['limits'][_0x5f0f22(0x1c3)][_0x5f0f22(0x258)],_0x15cb6e=truncateTradeAmount(_0x22cf4c[_0x5f0f22(0x213)],_0x22cf4c[_0x5f0f22(0x319)]);_0x22cf4c['trade']=_0x15cb6e;if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)<_0x599335)_0x11caec=![];if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)*_0x22cf4c['last']<_0x5d4685)_0x11caec=![];if(_0x22cf4c[_0x5f0f22(0x29c)]==_0x5f0f22(0x1fc)){let _0xd50756=config[_0x5f0f22(0x324)][_0x5f0f22(0x1e5)](_0xeabe0f=>_0xeabe0f[_0x5f0f22(0x217)]==_0x22cf4c[_0x5f0f22(0x217)]);if(_0xd50756[_0x5f0f22(0x1c8)]>0x0){if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)>_0x22cf4c['number']-_0xd50756[_0x5f0f22(0x1c8)])_0x11caec=![];}else{if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)>_0x22cf4c[_0x5f0f22(0x165)])_0x11caec=![];}}if(_0x22cf4c[_0x5f0f22(0x29c)]=='buy'){let _0x436a62=config[_0x5f0f22(0x324)][_0x5f0f22(0x1e5)](_0x94e0e2=>_0x94e0e2[_0x5f0f22(0x217)]==config['basecoin']),_0x1458e8=currentCoins['find'](_0x23e3cf=>_0x23e3cf[_0x5f0f22(0x217)]==config[_0x5f0f22(0x1e0)]);if(_0x436a62[_0x5f0f22(0x1c8)]>0x0){if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)*_0x22cf4c[_0x5f0f22(0x20b)]>_0x1458e8[_0x5f0f22(0x165)]-_0x436a62[_0x5f0f22(0x1c8)])_0x11caec=![];}else{if(Math[_0x5f0f22(0x2b7)](_0x15cb6e)*_0x22cf4c['last']>_0x1458e8[_0x5f0f22(0x165)])_0x11caec=![];}}return _0x11caec;}function _0x526a(){const _0x25634e=['Initializing\x20exchange','\x20attempts','getStartingBalances','timestamp','recent20','privateKey','watchTrades()','RequestTimeout','customId','parse','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','create','2\x20-\x20Orders\x20unlocked','BNB','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','ExchangeNotAvailable','lowdb/adapters/FileSync','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','order','ORDERS.LOCKED','1\x20-\x20Validate\x20orders:\x20','cancel','threshold','abs','RSA-OAEP','basecoinvalue','MIN_NOTIONAL','set','</pre>','Invalid\x20quantity','loadMarkets','\x20order:\x20','<pre>','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','value','limit-low','recreateCoinResults()','Net\x20','splice','kill','token\x20is\x20expired','change','562414KLReFe','2\x20-\x20Handled\x20open\x20orders','cancelOrders()','USDP','currency','send','no\x20open\x20orders','filled','bid','defaults','enabled','EUR','format','limits','%\x20(','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','price','bot-','bot','configuration','forEach','existsSync','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','leftTxt','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',')\x20|\x20exchange:\x20','startprice','\x20network\x20error:\x20','remainingSymbols','percentage','PermissionDenied','split','round','decode64','2\x20-\x20handling\x20FILLED\x20order:\x20','indexOf','Resetting\x20coin\x20results:\x20','util','\x20|\x20Custom\x20ID:\x20','96586anulfQ','\x20|\x20highest\x20fee:\x20','0\x20-\x20EXECUTION:\x20','sort','page','exchange','***','net-fiat','highest','storeHeadless',':\x20timer\x20>','yargs/yargs','fetchBalance','USD','watchOrders()','\x20hour','max','fetchTickers','date-fns','recovery','floor','liquidity','resetHistory','node-forge','orderstatus','PREV:','autoliquidity','Error:\x20Invalid\x20argument\x20','buy','balances','AuthenticationError','showname','getSeconds','\x20minutes\x20-\x20','botID','pki','message','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','sha256','trade','balancing\x20resumes\x20when\x20cooldown\x20ends','code','Waited\x20','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','limit-high','getMinutes','Exchange\x20error\x20details:','\x20minutes','Order\x20is\x20invalid:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','portfolio','UNLOCKING','added','must\x20be\x20greater\x20than\x20minimum\x20amount','fromCodePoint','apiPassword','getMonth','findIndex','changes','number','configuration-stored','NetworkError','\x20>\x20pausing\x20bot\x20for\x20','\x20value','argv','quote','PAXG','toFixed','open','Block\x20transaction\x20detection:\x20','keys','Limit\x20(low-margin)','enableFiatToggle','spot','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','181209EINrYe','cooldown','loading-canceled','\x20exchange\x20error:\x20','startdate','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','total','cloneDeep','none','cost','emojibuy','staging','getDate','USDC','exec',',\x20must\x20be\x20a\x203\x20digit\x20number','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','initclient','-events.json','Cryptocom','marketcapApi','limit','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','logs','remove','Avoiding\x20continuous\x20order\x20attempts','bb-secure.json','fetchTicker','padStart','version','starting-balance-','net-basecoin','usd','001','yyyy/MM/dd','join','running','status\x20code\x20401','-results.json','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','test','process\x20','write','has','2.6.23','\x20metrics:</b>\x20\x0a\x0a','Portfolio\x20change\x20detected:\x20','Cex','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','emitHistory','storeConfiguration','OnMaintenance','distribution','\x20portfolio:</b>\x20\x0a\x0a','2.3.5','startsWith','valid','\x20>\x20','shift','ccxt','Error\x20while\x20deleting\x20files:\x20','path','entries','2.6.22','apiSecret','3454860BeilDU',':\x20Bot\x20','unlinkSync','data','getFullYear','1\x20-\x20FILLED\x20known\x20order:\x20','openOrders','coins','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','RateLimitExceeded','BTC','removed','1\x20-\x20Handle\x20open\x20orders','amount','rightTxt','OrderNotFound','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Unknown\x20error:\x20','offset','realized','LOCKED','Fee\x20discount\x20refund\x20detected:\x20','fee','apiKey','placeOrder','Manual\x20balancing\x20required','writeFile','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','target','Order\x20filled:\x20','./config/','onepagemode','BUSD','includes','status','uncaughtException','constructor','Cooldown\x20ended\x20-\x20balancing\x20resumed','event-history','getHours','detectLiquidityChange()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','basecoin','time','\x20|\x20exchange:\x20','BNB/','watchTradesForSymbols','find','update-liquidity','restart','memoryUsage','debug','TUSD','/USD','API-key\x20format\x20invalid','botname','ORDERS.UNLOCKED','sqrt','watchTradesForSymbols()','warning','reverse','final','placeOrder()','search','\x20|\x20','sendMetricsTelegram','\x20:\x20','slider','ordertype','Error\x20details\x20(0):','sell','map','ongoing','length','heapUsed','storeFiat','cancelLoading','showConfig','toggleBotMode','RETRY\x20-\x20Error\x20in\x20','mkdirSync','marketcap','<b>','pro','createOrder','last','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','toString','market_cap','initial','sortBy','\x20-\x20bot\x20not\x20started','exchanges','symbol','Binance','decrypt','coin-loading-progress','coin','Huobi','\x20>\x20details:','timeout','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','/backup/','eur','market','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','/output-000.log','Exception\x20thrown\x20in\x20','getTime','replace','get','\x20-\x20','No\x20more\x20open\x20orders\x20-\x20','breakeven','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','args','Unfilled\x20order(s)\x20canceled\x20after\x20','canceled','/EUR','amountToPrecision','/USDT','change24h','<b>Bot\x20','Unknown\x20error\x20-\x20check\x20logs','stringify','Bybit','Huobipro','assign','Symbol(s):\x20','toLowerCase','production','Resuming\x20(','\x20>\x20[DEBUG]\x20','Exchange','Bitget','ID:\x20','cancelOrder','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','pop','function','event','-------------------------------\x0a','\x20uses\x20','progress','active','startnumber','full','red_yellow_blue','initTickers()','(((.+)+)+)+$','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','colorscheme','getPortfolio','UNLOCKED','headless','apply','date','Resetting\x20bot\x20history','no\x20exchange\x20reloaded','closed','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchOpenOrders','min','Initiating\x20bot\x20restart','type','push','createWriteStream','Failed\x20to\x20load\x20coin\x20data\x20for\x20','.json','Error\x20in\x20testAPI():\x20','2\x20-\x20Validate\x20orders:\x20','3096366DUDAVX','error','getOpenOrders()','Loading\x20completed','2.5.0','\x20/\x20','Error\x20details\x20(1):','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','isEqual','bots','differenceInSeconds','InvalidNonce','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','-performance.json','./logs/','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','emojisell','Error\x20details:','ETH','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','slice','quick','buys','\x20MB','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','excluded','fiat','datetime','performance','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','marketcapEnabled','-config.json','Pausing\x20for\x20','2.6.0','InvalidOrder','average','switch-manual','orderId','portfolio2','watchOrders','portfolio1','************','sells','Order\x20amount\x20is\x20invalid:\x20','environment','timeshift','Net\x20effect','\x20API\x20key\x20is\x20invalid','Invalid\x20symbol:\x20','Headless:\x20','3966294JtDjet','log','getCoins()','delta','1187230KvkLWS','password','pid','success','getCoinNumber()','side','ExchangeError','filter'];_0x526a=function(){return _0x25634e;};return _0x526a();}async function getBalances(_0xb53c67=!![]){const _0x412881=_0x403665;let _0x5aca05=0x0,_0x22bf87;const _0x16888b=config[_0x412881(0x2b6)];if(config['headless']&&config[_0x412881(0x22f)]<0x0)await validate24hChanges();currentCoins[_0x412881(0x2de)](_0x2fa742=>{const _0x3e41c8=_0x412881;if(_0x2fa742[_0x3e41c8(0x217)]!=config['basecoin']){let _0x211214=gTicker[noslash(_0x2fa742[_0x3e41c8(0x213)])];_0x22bf87=_0x2fa742[_0x3e41c8(0x1f2)]?0x1/_0x211214:_0x211214;}else _0x22bf87=0x1;let _0x5df714=_0x2fa742[_0x3e41c8(0x165)]*_0x22bf87;_0x5aca05+=_0x5df714,_0x2fa742[_0x3e41c8(0x20b)]=formatResult(Number(_0x22bf87),0x8),_0x2fa742[_0x3e41c8(0x2c2)]=_0x5df714;}),currentCoins[_0x412881(0x2de)](_0x2a7e92=>{const _0x4dc299=_0x412881;let _0x55c574=config[_0x4dc299(0x324)][_0x4dc299(0x1e5)](_0x1a6940=>_0x1a6940[_0x4dc299(0x217)]==_0x2a7e92['coin']),_0x355a51=Number(_0x55c574[_0x4dc299(0x1a9)]),_0x579d66=_0x2a7e92[_0x4dc299(0x2c2)]/_0x5aca05*0x64,_0x18867e=_0x355a51*_0x5aca05/0x64/_0x2a7e92['last']-_0x2a7e92[_0x4dc299(0x165)];_0x2a7e92['distribution']=formatResult(_0x579d66,0x3),_0x2a7e92['target']=formatResult(_0x355a51,0x3),_0x2a7e92[_0x4dc299(0x319)]=formatResult(_0x18867e,0x8),_0x2a7e92[_0x4dc299(0x29c)]='',_0x2a7e92[_0x4dc299(0x1ad)]=![];if(_0x2a7e92['coin']!=config[_0x4dc299(0x1e0)]){if(_0x2a7e92['distribution']>_0x355a51)_0x2a7e92[_0x4dc299(0x29c)]=_0x4dc299(0x1fc),_0x2a7e92[_0x4dc299(0x1ad)]=checkMinimums(_0x2a7e92);else _0x2a7e92['distribution']<_0x355a51&&(_0x2a7e92[_0x4dc299(0x29c)]=_0x4dc299(0x30d),_0x2a7e92[_0x4dc299(0x1ad)]=checkMinimums(_0x2a7e92));}_0x2a7e92[_0x4dc299(0x296)]=_0x2a7e92[_0x4dc299(0x1a9)]/_0x2a7e92['target']-0x1;if(_0x2a7e92['orderstatus']==_0x4dc299(0x2d1)||_0x2a7e92['orderstatus']==_0x4dc299(0x22b))_0x2a7e92['orderstatus']=_0x4dc299(0x17d);}),currentCoins[_0x412881(0x2f4)]((_0x296c9e,_0x433184)=>_0x296c9e[_0x412881(0x296)]<_0x433184[_0x412881(0x296)]?0x1:_0x433184[_0x412881(0x296)]<_0x296c9e['delta']?-0x1:0x0);const _0x1c401c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1c401c[_0x412881(0x21d)],'usd':_0x1c401c[_0x412881(0x195)],'portfolio':JSON[_0x412881(0x232)](currentCoins),'threshold':_0x16888b},proxyEmit(_0x412881(0x30e),{'serverversion':serverversion,'balances':lastBalances});if(_0xb53c67){if(config[_0x412881(0x250)])headlessMode({'portfolio':currentCoins,'threshold':_0x16888b});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x16888b});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1def02=getNormalizedPerformance();getStartingBalances(_0x1def02),emitPerformance(_0x1def02);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x251b69=_0x403665;if(!lastBalances)return;let _0x54f3f3=[],_0x478f67,_0x55f5bc=JSON[_0x251b69(0x2a8)](lastBalances[_0x251b69(0x324)]);_0x55f5bc[_0x251b69(0x2f4)]((_0x49be1a,_0x1894ab)=>_0x49be1a[_0x251b69(0x217)]>_0x1894ab[_0x251b69(0x217)]?0x1:_0x1894ab['coin']>_0x49be1a[_0x251b69(0x217)]?-0x1:0x0),_0x55f5bc['forEach'](_0x4e68d2=>{const _0x538b0b=_0x251b69;let _0x4cbae5={'coin':_0x4e68d2['coin'],'number':_0x4e68d2[_0x538b0b(0x165)],'price':_0x4e68d2[_0x538b0b(0x20b)]};_0x54f3f3[_0x538b0b(0x25b)](_0x4cbae5);});const _0x1e24e9=await getFiat();_0x478f67={'date':lastBalances[_0x251b69(0x1e1)][_0x251b69(0x2e9)]('\x20')[0x0],'eur':_0x1e24e9[_0x251b69(0x21d)],'usd':_0x1e24e9[_0x251b69(0x195)],'coins':_0x54f3f3};let _0x21b189=dbPerformance[_0x251b69(0x224)]('data')[_0x251b69(0x1e5)]({'date':_0x478f67['date']})['value']();_0x21b189?_0x478f67[_0x251b69(0x252)]!=config['startdate']&&dbPerformance[_0x251b69(0x224)](_0x251b69(0x1b9))[_0x251b69(0x1e5)]({'date':_0x478f67[_0x251b69(0x252)]})['assign'](_0x478f67)[_0x251b69(0x19f)]():dbPerformance[_0x251b69(0x224)](_0x251b69(0x1b9))[_0x251b69(0x25b)](_0x478f67)[_0x251b69(0x19f)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x6303ba=_0x403665;let _0x4e3ea9=[];if(dbPerformance[_0x6303ba(0x1a0)](_0x6303ba(0x1b9))[_0x6303ba(0x2c2)]()){let _0x5d5160=dbPerformance['get']('data')[_0x6303ba(0x17c)]()[_0x6303ba(0x29e)](_0x4ef818=>{const _0x21bf16=_0x6303ba;if(_0x4ef818['coins'][_0x21bf16(0x1ff)]==0x0)return![];else return!![];})[_0x6303ba(0x210)](_0x6303ba(0x252))[_0x6303ba(0x2c2)](),_0x3d0f7a=[...config[_0x6303ba(0x306)]];_0x3d0f7a[_0x6303ba(0x2f4)]((_0x240ca7,_0x2676c8)=>_0x240ca7['date']>_0x2676c8[_0x6303ba(0x252)]?-0x1:_0x2676c8[_0x6303ba(0x252)]>_0x240ca7[_0x6303ba(0x252)]?0x1:0x0);let _0x3120f4=0x1,_0x2095ba=[],_0xf1fec5=0x0;_0x5d5160[_0x6303ba(0x275)]()[_0x6303ba(0x1f2)]()[_0x6303ba(0x2de)]((_0x546b1f,_0x50287c)=>{const _0xc4be0a=_0x6303ba;if(_0x3d0f7a[_0xf1fec5]){if(_0x5d5160[_0x5d5160[_0xc4be0a(0x1ff)]-_0x50287c]&&_0x3d0f7a[_0xf1fec5]['date']==_0x5d5160[_0x5d5160[_0xc4be0a(0x1ff)]-_0x50287c]['date']){if(_0x50287c<_0x5d5160[_0xc4be0a(0x1ff)]){let _0x5b9541=0x0,_0x32b826=0x0;_0x5d5160[_0x5d5160[_0xc4be0a(0x1ff)]-_0x50287c][_0xc4be0a(0x1bd)]['forEach'](_0x3dca76=>{const _0x2401b5=_0xc4be0a;_0x32b826+=_0x3dca76['number']*_0x3dca76[_0x2401b5(0x2da)];}),_0x3d0f7a[_0xf1fec5][_0xc4be0a(0x164)][_0xc4be0a(0x2de)](_0x394402=>{const _0x49bbe2=_0xc4be0a;_0x5b9541+=_0x394402[_0x49bbe2(0x165)]*_0x394402[_0x49bbe2(0x2da)];}),_0x3120f4*=_0x5b9541/(_0x32b826-_0x5b9541)+0x1;}_0xf1fec5++;}}let _0x3998ba=0x0;_0x546b1f[_0xc4be0a(0x1bd)]['forEach'](_0x1893ac=>{const _0x4cf622=_0xc4be0a;_0x3998ba+=_0x1893ac[_0x4cf622(0x165)]*_0x1893ac[_0x4cf622(0x2da)];}),_0x2095ba[_0x5d5160[_0xc4be0a(0x1ff)]-_0x50287c-0x1]=_0x3998ba*(_0x3120f4-0x1);});let _0x3d6fbc=[];_0x3d0f7a=[...config[_0x6303ba(0x306)]]||[];let _0x28c890=0x0;_0xf1fec5=0x0,_0x5d5160[_0x6303ba(0x2de)]((_0x727679,_0x35d325)=>{const _0x3df6f6=_0x6303ba;if(_0x3d0f7a[_0xf1fec5]){const _0x5e2ac6=fns['parse'](_0x3d0f7a[_0xf1fec5][_0x3df6f6(0x252)],'yyyy/MM/dd',new Date()),_0x1a2a49=fns[_0x3df6f6(0x2a8)](_0x727679['date'],_0x3df6f6(0x197),new Date());if(fns[_0x3df6f6(0x269)](_0x5e2ac6,_0x1a2a49)){let _0x5140a1=0x0;_0x3d0f7a[_0xf1fec5]['changes'][_0x3df6f6(0x2de)](_0x345bc9=>{const _0x41669=_0x3df6f6;!_0x3d6fbc[_0x345bc9['coin']]?_0x3d6fbc[_0x345bc9[_0x41669(0x217)]]=_0x345bc9[_0x41669(0x165)]:(_0x5140a1=_0x3d6fbc[_0x345bc9['coin']],_0x3d6fbc[_0x345bc9[_0x41669(0x217)]]+=_0x345bc9[_0x41669(0x165)]);const _0x4cee3a=_0x727679[_0x41669(0x1bd)][_0x41669(0x1e5)](_0x96ce04=>_0x96ce04[_0x41669(0x217)]==_0x345bc9[_0x41669(0x217)]);(!_0x4cee3a||_0x4cee3a['number']==0x0)&&(_0x28c890+=(-_0x345bc9[_0x41669(0x165)]-_0x5140a1)*_0x345bc9['price']);}),_0xf1fec5++;}}_0x727679[_0x3df6f6(0x1bd)]['forEach']((_0x50e8b9,_0x9f5966)=>{const _0x738c25=_0x3df6f6;_0x3d6fbc[_0x50e8b9[_0x738c25(0x217)]]&&(_0x50e8b9['initial']=_0x3d6fbc[_0x50e8b9[_0x738c25(0x217)]]);}),_0x4e3ea9[_0x3df6f6(0x25b)]({'date':_0x727679[_0x3df6f6(0x252)],'eur':_0x727679['eur'],'usd':_0x727679[_0x3df6f6(0x195)],'offset':_0x2095ba[_0x35d325],'netoffset':_0x28c890,'coins':_0x727679['coins']});});}return _0x4e3ea9;}function emitPerformance(_0x5628c3){const _0x851f1e=_0x403665;_0x5628c3['length']!==0x0?(proxyEmit(_0x851f1e(0x27d),_0x5628c3),lastPerformanceEmitted=getDate()):proxyEmit(_0x851f1e(0x27d),[]);}function getPerf(_0x3e86e3,_0x566b03){const _0x2a90d3=_0x403665;let _0xa0cdfa=0x0,_0x4943a9=0x0,_0x482794=0x0;_0x3e86e3[_0x2a90d3(0x1bd)][_0x2a90d3(0x2de)](_0x118ffe=>{const _0x3295ea=_0x2a90d3;_0xa0cdfa+=_0x118ffe['number']*_0x118ffe[_0x3295ea(0x2da)];});_0x566b03&&(_0xa0cdfa+=_0x3e86e3['offset']);if(config[_0x2a90d3(0x1e0)]===_0x2a90d3(0x1c0)||config[_0x2a90d3(0x1e0)]===_0x2a90d3(0x273)||config[_0x2a90d3(0x1e0)]===_0x2a90d3(0x16c))_0x4943a9=_0xa0cdfa*_0x3e86e3[_0x2a90d3(0x21d)],_0x482794=_0xa0cdfa*_0x3e86e3[_0x2a90d3(0x195)];else{if(usdBasecoins[_0x2a90d3(0x1d7)](config['basecoin']))_0x4943a9=_0xa0cdfa*_0x3e86e3[_0x2a90d3(0x21d)]/_0x3e86e3[_0x2a90d3(0x195)],_0x482794=_0xa0cdfa;else config[_0x2a90d3(0x1e0)]===_0x2a90d3(0x2d5)&&(_0x4943a9=_0xa0cdfa,_0x482794=_0xa0cdfa*_0x3e86e3[_0x2a90d3(0x195)]/_0x3e86e3[_0x2a90d3(0x21d)]);}return[_0xa0cdfa,_0x4943a9,_0x482794];}function getKPIs(_0x5d792c,_0x1c1eb6='EUR'){const _0x1cc7e0=_0x403665,_0x5e4106=config[_0x1cc7e0(0x1e0)],_0x449cfa=lastBalances,_0x40bbe1=currentCoins,_0x292e6c=getNormalizedPerformance(),_0x354c55=_0x5d792c===_0x1cc7e0(0x1e0)?_0x5e4106:_0x5d792c==='fiat'||_0x5d792c===_0x1cc7e0(0x2f8)?_0x1c1eb6:_0x1cc7e0(0x2c5)+_0x5e4106,_0x83bdd2=_0x5d792c===_0x1cc7e0(0x194)?'Net\x20effect':_0x5d792c==='net-fiat'?_0x1cc7e0(0x28f):_0x354c55+_0x1cc7e0(0x169),_0x470ae9=_0x5d792c==='net-basecoin'||_0x5d792c===_0x1cc7e0(0x2f8)?'Net\x20effect':_0x354c55+'\x20change';let _0x41a3e8=0x0;_0x40bbe1[_0x1cc7e0(0x2de)](_0x829f09=>{const _0x2cecb5=_0x1cc7e0;_0x41a3e8+=_0x829f09[_0x2cecb5(0x165)]*_0x829f09['last'];});if(_0x5d792c===_0x1cc7e0(0x27b)||_0x5d792c==='net-fiat'){if(_0x5e4106==='BTC'||_0x5e4106===_0x1cc7e0(0x273)||_0x5e4106===_0x1cc7e0(0x16c))_0x41a3e8=_0x41a3e8*(_0x1c1eb6===_0x1cc7e0(0x2d5)?_0x449cfa['eur']:_0x449cfa[_0x1cc7e0(0x195)]);else{if(usdBasecoins[_0x1cc7e0(0x1d7)](_0x5e4106))_0x41a3e8=_0x41a3e8*(_0x1c1eb6===_0x1cc7e0(0x2d5)?_0x449cfa[_0x1cc7e0(0x21d)]/_0x449cfa[_0x1cc7e0(0x195)]:0x1);else _0x5e4106===_0x1cc7e0(0x2d5)&&(_0x41a3e8=_0x41a3e8*(_0x1c1eb6===_0x1cc7e0(0x2d5)?0x1:_0x449cfa[_0x1cc7e0(0x195)]/_0x449cfa[_0x1cc7e0(0x21d)]));}}let _0x4d1ef2;if(_0x41a3e8!==0x0){if(_0x5d792c===_0x1cc7e0(0x1e0))_0x4d1ef2=(_0x41a3e8/startingBalances['basecoin']-0x1)*0x64;else{if(_0x1c1eb6===_0x1cc7e0(0x2d5))_0x4d1ef2=(_0x41a3e8/startingBalances[_0x1cc7e0(0x21d)]-0x1)*0x64;else _0x4d1ef2=(_0x41a3e8/startingBalances[_0x1cc7e0(0x195)]-0x1)*0x64;}let _0x210f4a=0x0;if(startingBalances[_0x1cc7e0(0x1bd)])_0x40bbe1[_0x1cc7e0(0x2de)](_0x45fb5a=>{const _0x1dcf23=_0x1cc7e0;let _0x56fcaa=startingBalances['coins'][_0x1dcf23(0x1e5)](_0x330b6e=>_0x330b6e[_0x1dcf23(0x217)]===_0x45fb5a[_0x1dcf23(0x217)]);if(_0x56fcaa&&_0x56fcaa[_0x1dcf23(0x217)]&&_0x45fb5a[_0x1dcf23(0x165)]!==0x0)_0x210f4a+=_0x56fcaa[_0x1dcf23(0x165)]*_0x45fb5a[_0x1dcf23(0x20b)];});let _0x14c3fe=0x0;if(_0x292e6c[_0x1cc7e0(0x1ff)]!==0x0){let _0x426151=_0x292e6c[_0x292e6c['length']-0x1];_0x14c3fe=_0x426151['netoffset'];}_0x210f4a-=_0x14c3fe;_0x5d792c===_0x1cc7e0(0x194)&&(_0x4d1ef2=(_0x41a3e8-_0x210f4a)/startingBalances['basecoin']*0x64,_0x41a3e8=_0x41a3e8-_0x210f4a);if(_0x5d792c===_0x1cc7e0(0x2f8)){let _0x4e2c69=_0x1c1eb6===_0x1cc7e0(0x2d5)?startingBalances[_0x1cc7e0(0x21d)]:startingBalances['usd'];if(_0x5e4106==='BTC'||_0x5e4106===_0x1cc7e0(0x273)||_0x5e4106===_0x1cc7e0(0x16c))_0x210f4a=_0x1c1eb6==='EUR'?_0x210f4a*_0x449cfa['eur']:_0x210f4a*_0x449cfa[_0x1cc7e0(0x195)];else{if(usdBasecoins['includes'](_0x5e4106))_0x210f4a=_0x1c1eb6===_0x1cc7e0(0x2d5)?_0x210f4a*_0x449cfa[_0x1cc7e0(0x21d)]/_0x449cfa['usd']:_0x210f4a;else _0x5e4106===_0x1cc7e0(0x2d5)&&(_0x210f4a=_0x1c1eb6===_0x1cc7e0(0x2d5)?_0x210f4a:_0x210f4a*_0x449cfa[_0x1cc7e0(0x195)]/_0x449cfa[_0x1cc7e0(0x21d)]);}_0x4d1ef2=(_0x41a3e8-_0x210f4a)/_0x4e2c69*0x64,_0x41a3e8=_0x41a3e8-_0x210f4a;}if(_0x4d1ef2){if(_0x4d1ef2<0x64)_0x4d1ef2=_0x4d1ef2['toFixed'](0x2);else{if(_0x4d1ef2<0x3e8)_0x4d1ef2=_0x4d1ef2['toFixed'](0x1);else _0x4d1ef2=_0x4d1ef2[_0x1cc7e0(0x16d)](0x0);}}else _0x4d1ef2=Number('0')[_0x1cc7e0(0x16d)](0x2);if(_0x41a3e8){if(Math[_0x1cc7e0(0x2b7)](_0x41a3e8)<0.000001)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x2);else{if(Math[_0x1cc7e0(0x2b7)](_0x41a3e8)<0.1)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x6);else{if(Math['abs'](_0x41a3e8)<0x1)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x5);else{if(Math[_0x1cc7e0(0x2b7)](_0x41a3e8)<0xa)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x4);else{if(Math['abs'](_0x41a3e8)<0x64)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x3);else{if(Math['abs'](_0x41a3e8)<0x3e8)_0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x2);else _0x41a3e8=_0x41a3e8[_0x1cc7e0(0x16d)](0x2);}}}}}}else _0x41a3e8=Number('0')[_0x1cc7e0(0x16d)](0x2);}else _0x4d1ef2=Number('0')[_0x1cc7e0(0x16d)](0x2);return{'value':_0x41a3e8,'change':_0x4d1ef2,'leftTxt':_0x83bdd2,'rightTxt':_0x470ae9};}async function getStartingBalances(_0xad204,_0x2a9fce=!![]){const _0x27f82c=_0x403665;if(_0xad204[_0x27f82c(0x1ff)]!==0x0){const [_0x314ad8,_0x2f96bb,_0x31b79e]=getPerf(_0xad204[0x0],!![]);let _0x1c1dd0=[];config['portfolio'][_0x27f82c(0x2de)](_0x668ae5=>{const _0x197ecb=_0x27f82c;let _0x3d3a2a=0x0,_0x4140d1;config[_0x197ecb(0x306)][_0x197ecb(0x2de)](_0x180044=>{const _0x31605e=_0x197ecb;let _0x291a3d=_0x180044[_0x31605e(0x164)]['find'](_0x528959=>_0x528959['coin']==_0x668ae5[_0x31605e(0x217)]);if(_0x291a3d){_0x3d3a2a+=_0x291a3d[_0x31605e(0x165)];if(!_0x4140d1)_0x4140d1=_0x291a3d['price'];}}),_0x1c1dd0[_0x197ecb(0x25b)]({'coin':_0x668ae5[_0x197ecb(0x217)],'number':_0x3d3a2a,'initialprice':_0x4140d1});});const _0x4a2659={'basecoin':_0x314ad8,'eur':_0x2f96bb,'usd':_0x31b79e,'coins':_0x1c1dd0};if(_0x2a9fce)proxyEmit('starting-balances',_0x4a2659);startingBalances=_0x4a2659;}}async function headlessMode(_0x31198e){const _0x4d8dfd=_0x403665;let _0x553c7e=_0x31198e['portfolio'],_0x4c31f1=_0x31198e['threshold'],_0xdaca5d=[];for(let _0x5dcaf1 of _0x553c7e){if(_0x5dcaf1['coin']!=config[_0x4d8dfd(0x1e0)]){if(_0x5dcaf1['delta']>=_0x4c31f1/0x64){if(_0x5dcaf1['valid'])_0xdaca5d[_0x4d8dfd(0x25b)](_0x5dcaf1);}else{if(_0x5dcaf1[_0x4d8dfd(0x296)]<=-_0x4c31f1/0x64){if(_0x5dcaf1[_0x4d8dfd(0x1ad)])_0xdaca5d[_0x4d8dfd(0x25b)](_0x5dcaf1);}}}}let _0xb7b550=!![];if(_0xdaca5d[_0x4d8dfd(0x1ff)]>0x0){lockOrders==ORDERS[_0x4d8dfd(0x24f)]&&!coolingDown&&_0xdaca5d[_0x4d8dfd(0x2de)](_0xb1b475=>{const _0x4e0669=_0x4d8dfd;console[_0x4e0669(0x294)](_0x4e0669(0x30a),prevAmountAtOrder[_0xb1b475['coin']]),_0xb1b475['number']!=prevAmountAtOrder[_0xb1b475['coin']]?logger[_0x4e0669(0x1e9)]('Valid\x20trigger:\x20'+_0xb1b475[_0x4e0669(0x217)]+'\x20'+_0xb1b475[_0x4e0669(0x165)]+'\x20'+_0xb1b475[_0x4e0669(0x20b)]+'\x20'+_0xb1b475['distribution']+'%\x20'+_0xb1b475['target']+'%\x20'+(0x64*_0xb1b475['delta'])['toFixed'](0x2)+_0x4e0669(0x2d8)+_0x4c31f1['toFixed'](0x2)+'%)'):(logger[_0x4e0669(0x1e9)]('Invalid\x20trigger:\x20'+_0xb1b475[_0x4e0669(0x217)]+'\x20'+_0xb1b475[_0x4e0669(0x165)]+'\x20'+_0xb1b475[_0x4e0669(0x20b)]+'\x20'+_0xb1b475['distribution']+'%\x20'+_0xb1b475[_0x4e0669(0x1d2)]+'%\x20'+(0x64*_0xb1b475['delta'])['toFixed'](0x2)+_0x4e0669(0x2d8)+_0x4c31f1['toFixed'](0x2)+'%)'),_0xb7b550=![]);});if(_0xb7b550)placeOrder(_0xdaca5d);else{const _0x49fb47=await getCoins();[currentCoins,currentCoinsAll]=_0x49fb47;}}}function notifyBalance(_0x3c98dd){const _0x1a980a=_0x403665;let _0x124667=_0x3c98dd['portfolio'],_0x45f9a7=_0x3c98dd[_0x1a980a(0x2b6)],_0x1ee01=[];for(let _0x53131c of _0x124667){if(_0x53131c[_0x1a980a(0x217)]!=config[_0x1a980a(0x1e0)]){if(_0x53131c[_0x1a980a(0x296)]>=_0x45f9a7/0x64){if(_0x53131c['valid'])_0x1ee01['push'](_0x53131c);}else{if(_0x53131c[_0x1a980a(0x296)]<=-_0x45f9a7/0x64){if(_0x53131c['valid'])_0x1ee01[_0x1a980a(0x25b)](_0x53131c);}}}}if(_0x1ee01[_0x1a980a(0x1ff)]>0x0){let _0x49fa45=_0x1ee01[_0x1a980a(0x1fd)](_0x2e7708=>_0x2e7708[_0x1a980a(0x217)]);_0x49fa45[_0x1a980a(0x2f4)]();let _0x5eaab4=_0x49fa45['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x1a980a(0x1cf));lastCoinsToBalance=_0x5eaab4;}}function symbolToCoin(_0x1f8162){const _0x5791e3=_0x403665;let _0x2ebb40;if(_0x1f8162[_0x5791e3(0x1d7)]('/'+config['basecoin']))_0x2ebb40=_0x1f8162[_0x5791e3(0x223)]('/'+config['basecoin'],'');if(_0x1f8162[_0x5791e3(0x1d7)](config[_0x5791e3(0x1e0)]+'/'))_0x2ebb40=_0x1f8162[_0x5791e3(0x223)](config[_0x5791e3(0x1e0)]+'/','');return _0x2ebb40;}async function unlockOrders(){const _0xf1d2c8=_0x403665;if(allOrdersPlaced&&lockOrders==ORDERS[_0xf1d2c8(0x1ca)]){logger[_0xf1d2c8(0x1e9)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0xf1d2c8(0x325)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4be0ed=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4be0ed,setBlockTransactionDetection(![]),validateOrdersState=_0xf1d2c8(0x20f),persistOpenOrders([]),lockOrders=ORDERS[_0xf1d2c8(0x24f)],logger['debug'](_0xf1d2c8(0x2ac));}}async function validateOrders(_0x4f61fd){const _0x3d710f=_0x403665;if(_0x4f61fd)validateOrdersState=_0x4f61fd;logger['debug'](_0x3d710f(0x2b4)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x3d710f(0x2b3):lockOrders==0x2?'ORDERS.UNLOCKING':_0x3d710f(0x1ee)));let _0x3b2eb2=[],_0xb9926e=config[_0x3d710f(0x1fa)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3d710f(0x21a)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x3d710f(0x260)+validateOrdersState),lastOrders[_0x3d710f(0x2de)](_0x5d9bc1=>{const _0x954672=_0x3d710f;let _0x24750c=![];_0x5d9bc1[_0x954672(0x2d1)]>0x0&&(_0x24750c=!![]),_0x3b2eb2[_0x954672(0x25b)](_0x24750c),_0x24750c&&config[_0x954672(0x1fa)]!=_0x954672(0x21e)&&logHistory('order',_0x954672(0x1d3)+_0x5d9bc1[_0x954672(0x213)]+'\x20'+_0x5d9bc1['side']+'\x20#'+formatResult(_0x5d9bc1[_0x954672(0x2d1)],0x8)+'\x20@'+formatResult(_0x5d9bc1[_0x954672(0x2da)],0x8));}),_0x3b2eb2[_0x3d710f(0x2de)]((_0x563b2b,_0xfc1440)=>{if(_0x563b2b)lastOrders['splice'](_0xfc1440,0x1);}),persistOpenOrders(lastOrders);const _0x556a99=coolingDown?_0x3d710f(0x31a):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x3d710f(0x1fe);if(_0x3b2eb2[_0x3d710f(0x1d7)](![])){if(config[_0x3d710f(0x1fa)]==_0x3d710f(0x21e)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3d710f(0x1fe)){if(_0x3b2eb2['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x3d710f(0x21e)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x3b2eb2[_0x3d710f(0x1d7)](![])&&(config['ordertype']==_0x3d710f(0x21e)?logHistory(_0x3d710f(0x29a),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3d710f(0x2ea)](_0xb9926e*validateOrderInterval/0xea60)+_0x3d710f(0x312)+_0x556a99):(await cancelOrders(),logHistory(_0x3d710f(0x29a),_0x3d710f(0x22a)+Math[_0x3d710f(0x2ea)](_0xb9926e*validateOrderInterval/0xea60)+_0x3d710f(0x312)+_0x556a99))),await unlockOrders();else{if(validateOrdersState==_0x3d710f(0x2d0)){if(config[_0x3d710f(0x1fa)]!=_0x3d710f(0x21e))logHistory(_0x3d710f(0x29a),_0x3d710f(0x226)+_0x556a99);await unlockOrders();}}}}}async function cancelOrders(){const _0x2db8a7=_0x403665;lastOrders[_0x2db8a7(0x2de)](async _0x5d8373=>{const _0x544aec=_0x2db8a7;try{const _0x45b083=await exchange[_0x544aec(0x23e)](_0x5d8373[_0x544aec(0x286)],_0x5d8373[_0x544aec(0x213)]);}catch(_0x19627c){if(_0x19627c[_0x544aec(0x20d)]()[_0x544aec(0x1d7)](_0x544aec(0x1c5))){}else await handleError(_0x19627c,_0x544aec(0x2cc));}});}async function initCoinResults(_0x443ab3){const _0x2b244c=_0x403665;_0x443ab3?logger['debug'](_0x2b244c(0x2ee)+_0x443ab3):logger[_0x2b244c(0x1e9)]('Initializing\x20coin\x20results'),config[_0x2b244c(0x324)][_0x2b244c(0x2de)](_0x2c09fe=>{const _0x34d81e=_0x2b244c;if(!_0x2c09fe[_0x34d81e(0x27a)]&&_0x2c09fe[_0x34d81e(0x217)]!=config[_0x34d81e(0x1e0)]){const _0x34ddf7=currentCoins['find'](_0x76c391=>_0x76c391[_0x34d81e(0x217)]==_0x2c09fe[_0x34d81e(0x217)]),_0xa75b1c=gTicker[noslash(_0x2c09fe['symbol'])];let _0x507062=_0x34ddf7?_0x34ddf7[_0x34d81e(0x165)]:null,_0x46e4e8=_0x2c09fe[_0x34d81e(0x1f2)]?0x1/_0xa75b1c:_0xa75b1c,_0x4e0a63;config[_0x34d81e(0x306)][_0x34d81e(0x2de)](_0x2d113b=>{const _0x5166ce=_0x34d81e;!_0x4e0a63&&(_0x4e0a63=_0x2d113b[_0x5166ce(0x164)][_0x5166ce(0x1e5)](_0x59dea5=>_0x59dea5[_0x5166ce(0x217)]==_0x2c09fe['coin']),_0x4e0a63&&(_0x507062=_0x4e0a63[_0x5166ce(0x165)],_0x46e4e8=_0x4e0a63[_0x5166ce(0x2da)]));});let _0x24e650=dbCoinResults[_0x34d81e(0x224)](_0x34d81e(0x1bd))[_0x34d81e(0x1e5)]({'coin':_0x2c09fe[_0x34d81e(0x217)]})['value']();if(!_0x24e650){const _0x1a8c2c={'coin':_0x2c09fe[_0x34d81e(0x217)],'number':_0x507062,'breakeven':_0x46e4e8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x34d81e(0x1bd))[_0x34d81e(0x25b)](_0x1a8c2c)[_0x34d81e(0x19f)]();}else{if(_0x443ab3&&_0x2c09fe[_0x34d81e(0x217)]==_0x443ab3){const _0x24c3c9={'coin':_0x2c09fe[_0x34d81e(0x217)],'number':_0x507062,'breakeven':_0x46e4e8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x34d81e(0x224)](_0x34d81e(0x1bd))[_0x34d81e(0x1e5)]({'coin':_0x2c09fe['coin']})[_0x34d81e(0x235)](_0x24c3c9)[_0x34d81e(0x19f)]();}}}});}async function updateCoinResults(_0x3564ef,_0x2f80a2=![]){const _0x4f4454=_0x403665;let _0x5efb0e,_0x32ca3e,_0x10b578,_0x2c579c,_0x2b134c,_0x5c38c3,_0x361e17=dbCoinResults['get'](_0x4f4454(0x1bd))[_0x4f4454(0x1e5)]({'coin':_0x3564ef[_0x4f4454(0x217)]})[_0x4f4454(0x2c2)](),_0x296fe2=![];_0x361e17&&Object[_0x4f4454(0x1b3)](_0x361e17)[_0x4f4454(0x2de)](([_0x15ad34,_0x242138])=>{if(_0x242138==null)_0x296fe2=!![];});(!_0x361e17||_0x296fe2)&&(await initCoinResults(_0x3564ef[_0x4f4454(0x217)]),_0x361e17=dbCoinResults[_0x4f4454(0x224)](_0x4f4454(0x1bd))[_0x4f4454(0x1e5)]({'coin':_0x3564ef[_0x4f4454(0x217)]})[_0x4f4454(0x2c2)]());_0x3564ef[_0x4f4454(0x1f2)]&&(_0x5c38c3={'filled':_0x3564ef['filled']*_0x3564ef[_0x4f4454(0x2da)],'amount':_0x3564ef[_0x4f4454(0x2d1)]*_0x3564ef[_0x4f4454(0x2da)],'side':_0x3564ef['side']=='sell'?'buy':_0x4f4454(0x1fc),'price':0x1/_0x3564ef['price']},_0x3564ef={..._0x3564ef,..._0x5c38c3});_0x2f80a2?_0x32ca3e=_0x3564ef[_0x4f4454(0x29c)]==_0x4f4454(0x30d)?_0x361e17[_0x4f4454(0x165)]+_0x3564ef['filled']:_0x361e17[_0x4f4454(0x165)]-_0x3564ef[_0x4f4454(0x2d1)]:_0x32ca3e=await getCoinNumber(_0x3564ef[_0x4f4454(0x217)]);if(_0x3564ef[_0x4f4454(0x1cc)]&&_0x3564ef['fee'][_0x4f4454(0x2ce)]==config[_0x4f4454(0x1e0)])_0x5efb0e=Number(_0x3564ef[_0x4f4454(0x1cc)][_0x4f4454(0x17e)]);else{if(_0x3564ef[_0x4f4454(0x1cc)]&&_0x3564ef[_0x4f4454(0x1cc)]['currency']==_0x4f4454(0x2ad)&&!_0x2f80a2&&config[_0x4f4454(0x1e0)]!=_0x4f4454(0x16c))_0x5efb0e=Number(_0x3564ef[_0x4f4454(0x1cc)]['cost'])*gTicker['BNB'+config[_0x4f4454(0x1e0)]];else _0x5efb0e=defaultFee*_0x3564ef[_0x4f4454(0x2d1)]*_0x3564ef[_0x4f4454(0x2da)];}_0x3564ef[_0x4f4454(0x29c)]==_0x4f4454(0x30d)?(_0x10b578=_0x32ca3e!=0x0?(_0x361e17[_0x4f4454(0x227)]*_0x361e17['number']+_0x3564ef[_0x4f4454(0x2da)]*(_0x32ca3e-_0x361e17[_0x4f4454(0x165)])+_0x5efb0e)/_0x32ca3e:0x0,_0x2c579c=_0x361e17[_0x4f4454(0x1c9)]):(_0x10b578=_0x32ca3e!=0x0?(_0x361e17[_0x4f4454(0x227)]*_0x361e17[_0x4f4454(0x165)]-_0x3564ef[_0x4f4454(0x2da)]*(_0x361e17['number']-_0x32ca3e)+_0x5efb0e)/_0x32ca3e:0x0,_0x2c579c=_0x361e17[_0x4f4454(0x1c9)]+(_0x3564ef[_0x4f4454(0x2da)]-_0x361e17['breakeven'])*_0x3564ef[_0x4f4454(0x2d1)]);_0x2b134c=(_0x3564ef[_0x4f4454(0x2da)]-_0x10b578-_0x5efb0e/_0x3564ef[_0x4f4454(0x2d1)])*_0x32ca3e;let _0x2f3c4a={'coin':_0x3564ef['coin'],'number':_0x32ca3e,'breakeven':formatResult(_0x10b578,0x8),'realized':formatResult(_0x2c579c,0x8),'unrealized':formatResult(_0x2b134c,0x8),'fees':formatResult(_0x361e17['fees']+_0x5efb0e,0x8),'sells':_0x3564ef[_0x4f4454(0x29c)]=='sell'?_0x361e17['sells']+0x1:_0x361e17[_0x4f4454(0x28b)],'buys':_0x3564ef[_0x4f4454(0x29c)]==_0x4f4454(0x30d)?_0x361e17[_0x4f4454(0x277)]+0x1:_0x361e17[_0x4f4454(0x277)]};dbCoinResults[_0x4f4454(0x224)](_0x4f4454(0x1bd))[_0x4f4454(0x1e5)]({'coin':_0x3564ef[_0x4f4454(0x217)]})[_0x4f4454(0x235)](_0x2f3c4a)[_0x4f4454(0x19f)]();if(!_0x2f80a2){if(_0x3564ef[_0x4f4454(0x1cc)]&&_0x3564ef[_0x4f4454(0x1cc)][_0x4f4454(0x2ce)]==_0x4f4454(0x2ad)){const _0xfb4f40=currentCoins[_0x4f4454(0x1e5)](_0x59a164=>_0x59a164[_0x4f4454(0x217)]==_0x4f4454(0x2ad));if(_0xfb4f40){let _0xcd7e6c=dbCoinResults[_0x4f4454(0x224)]('coins')['find']({'coin':_0x4f4454(0x2ad)})['value']();_0x2f3c4a={..._0xcd7e6c,'number':_0xfb4f40['number']},dbCoinResults[_0x4f4454(0x224)]('coins')['find']({'coin':_0x4f4454(0x2ad)})[_0x4f4454(0x235)](_0x2f3c4a)[_0x4f4454(0x19f)]();}}}}async function placeOrder(_0x43864d){const _0x5de917=_0x403665,_0x5c27cd=config[_0x5de917(0x1fa)]==_0x5de917(0x21e)?_0x5de917(0x21e):_0x5de917(0x18a);if(lockOrders==ORDERS[_0x5de917(0x24f)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x5de917(0x1ca)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x515f49=![];lastOrders=[];for(const _0x309d33 of _0x43864d){let _0xe3043c,_0x1ed69a,_0x438fd0,_0x31e58d,_0xcae77f,_0x577978=_0x309d33['symbol'];try{const _0x537fbf=await exchange[_0x5de917(0x190)](_0x577978);_0xe3043c=_0x309d33[_0x5de917(0x1f2)]?0x1/_0x309d33[_0x5de917(0x20b)]:_0x309d33[_0x5de917(0x20b)],_0x1ed69a=_0x537fbf[_0x5de917(0x2d2)],_0x438fd0=_0x537fbf['ask'];_0x309d33[_0x5de917(0x1f2)]?(_0x31e58d=_0x309d33['side']==_0x5de917(0x30d)?_0x5de917(0x1fc):_0x5de917(0x30d),_0xcae77f=Math[_0x5de917(0x2b7)](_0x309d33[_0x5de917(0x319)])/_0xe3043c):(_0x31e58d=_0x309d33[_0x5de917(0x29c)],_0xcae77f=Math['abs'](_0x309d33['trade']));_0x5c27cd==_0x5de917(0x18a)&&(config[_0x5de917(0x1fa)]==_0x5de917(0x31e)&&(_0xe3043c=_0x31e58d==_0x5de917(0x30d)?_0x1ed69a:_0x438fd0),config[_0x5de917(0x1fa)]==_0x5de917(0x2c3)&&(_0xe3043c=_0x31e58d==_0x5de917(0x30d)?_0x438fd0:_0x1ed69a));_0xcae77f=formatResult(_0xcae77f,0x8),_0xe3043c=formatResult(_0xe3043c,0x8);const _0x18acff=_0x31e58d==_0x5de917(0x1fc)?config[_0x5de917(0x271)]?String[_0x5de917(0x328)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x5de917(0x328)]('0x'+config[_0x5de917(0x17f)])+'\x20':'',_0x51ba7d=_0x5c27cd==_0x5de917(0x21e)?'Market':config[_0x5de917(0x1fa)]==_0x5de917(0x31e)?'Limit\x20(high-margin)':_0x5de917(0x171),_0x11d648=(Math[_0x5de917(0x305)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x11d648,'symbol':_0x577978,'coin':_0x309d33[_0x5de917(0x217)],'amount':_0xcae77f,'price':_0xe3043c,'side':_0x31e58d,'reverse':_0x309d33['reverse'],'filled':0x0});if(_0x5c27cd==_0x5de917(0x21e))logHistory(_0x5de917(0x2b2),''+_0x18acff+_0x51ba7d+_0x5de917(0x2bf)+_0x577978+'\x20'+_0x31e58d+'\x20#'+formatResult(_0xcae77f,0x8)+'\x20@'+formatResult(_0xe3043c,0x8));else logHistory(_0x5de917(0x2b2),''+_0x18acff+_0x51ba7d+_0x5de917(0x2bf)+_0x577978+'\x20'+_0x31e58d+'\x20#'+formatResult(_0xcae77f,0x8)+'\x20@'+formatResult(_0xe3043c,0x8));let _0x3064b7;_0x5c27cd==_0x5de917(0x21e)?_0x31e58d==_0x5de917(0x30d)&&[_0x5de917(0x233),_0x5de917(0x23c),_0x5de917(0x1a4),_0x5de917(0x218),_0x5de917(0x234)][_0x5de917(0x1d7)](config['exchange'])?_0x3064b7=await exchange[_0x5de917(0x20a)](_0x577978,_0x5c27cd,_0x31e58d,_0xcae77f,_0xe3043c):_0x3064b7=await exchange['createOrder'](_0x577978,_0x5c27cd,_0x31e58d,_0xcae77f,undefined):_0x3064b7=await exchange[_0x5de917(0x20a)](_0x577978,_0x5c27cd,_0x31e58d,_0xcae77f,_0xe3043c);prevAmountAtOrder[_0x309d33[_0x5de917(0x217)]]=_0x309d33[_0x5de917(0x165)],logger[_0x5de917(0x1e9)](_0x5de917(0x23d)+_0x3064b7['id']+_0x5de917(0x2f0)+_0x11d648);const _0x2c7b28=lastOrders[_0x5de917(0x1ff)]-0x1;if(_0x2c7b28>=0x0&&lastOrders[_0x2c7b28][_0x5de917(0x2a7)]==_0x11d648){lastOrders[_0x2c7b28][_0x5de917(0x286)]=_0x3064b7['id'];if(_0x3064b7[_0x5de917(0x1c3)])lastOrders[_0x2c7b28]['amount']=_0x3064b7['amount'];if(_0x3064b7[_0x5de917(0x2da)])lastOrders[_0x2c7b28][_0x5de917(0x2da)]=_0x3064b7['price'];lastOrders[_0x2c7b28][_0x5de917(0x1cc)]=_0x3064b7[_0x5de917(0x1cc)];}if(config[_0x5de917(0x176)]!=0x0){let _0x29ae0e=null;if(cooldownTracker[_0x5de917(0x1ff)]==config[_0x5de917(0x176)]-0x1)_0x29ae0e=cooldownTracker[_0x5de917(0x1af)]();const _0xc8fc6b=getTimeStamp();cooldownTracker['push'](_0xc8fc6b);if(_0x29ae0e){const _0x868274=fns[_0x5de917(0x26b)](new Date(_0xc8fc6b),new Date(_0x29ae0e));if(_0x868274<cooldownInterval){logHistory(_0x5de917(0x262),'Executed\x20'+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5de917(0x300)),coolingDown=!![];break;}}}}catch(_0x18ab85){if(_0x18ab85[_0x5de917(0x20d)]()[_0x5de917(0x1d7)](_0x5de917(0x2ba)))lastOrders=lastOrders['filter'](_0x528cc8=>_0x528cc8[_0x5de917(0x213)]!=_0x577978),logHistory(_0x5de917(0x262),_0x5de917(0x2aa)+_0x577978),_0x515f49=!![];else{if(_0x18ab85['toString']()['includes'](_0x5de917(0x2bd)))lastOrders=lastOrders['filter'](_0x2ae598=>_0x2ae598[_0x5de917(0x213)]!=_0x577978),logHistory(_0x5de917(0x262),_0x5de917(0x28c)+_0x577978),_0x515f49=!![];else{if(_0x18ab85[_0x5de917(0x20d)]()[_0x5de917(0x1d7)](_0x5de917(0x283)))lastOrders=lastOrders['filter'](_0x2a2ec9=>_0x2a2ec9[_0x5de917(0x213)]!=_0x577978),logHistory('error',_0x5de917(0x322)+_0x577978),logger['debug'](_0x18ab85),_0x515f49=!![];else _0x18ab85[_0x5de917(0x20d)]()['includes'](_0x5de917(0x327))?(lastOrders=lastOrders[_0x5de917(0x29e)](_0xe0866e=>_0xe0866e['symbol']!=_0x577978),logHistory(_0x5de917(0x262),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x577978),_0x515f49=!![]):(lastOrders=lastOrders['filter'](_0x34878c=>_0x34878c[_0x5de917(0x213)]!=_0x577978),await handleError(_0x18ab85,_0x5de917(0x1f4),_0x577978));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5de917(0x1ff)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x510c11=config[_0x5de917(0x1fa)]==_0x5de917(0x21e)?validateOrderTimeout*0x3c*0x3e8:config[_0x5de917(0x21a)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5dcf24=_0x5de917;validateOrders(_0x5dcf24(0x1f3));},_0x510c11);}else unlockOrders();_0x515f49&&config[_0x5de917(0x250)]&&(logHistory('error',_0x5de917(0x18e)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x5de917(0x1db)));}else{if(coolingDown)!config[_0x5de917(0x250)]&&logHistory(_0x5de917(0x262),_0x5de917(0x1df));else lockOrders!=ORDERS[_0x5de917(0x24f)]&&(!config[_0x5de917(0x250)]&&(config['ordertype']==_0x5de917(0x21e)?logHistory(_0x5de917(0x262),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5de917(0x262),_0x5de917(0x2d9))));}}function persistOpenOrders(_0x11cd38){const _0x3db58c=_0x403665,_0x43438a={...config,'openOrders':_0x11cd38};let _0x5c4b9e=dbConfig[_0x3db58c(0x224)](_0x3db58c(0x2dc))[_0x3db58c(0x1e5)]({'botID':botID})[_0x3db58c(0x2c2)]();_0x5c4b9e&&dbConfig[_0x3db58c(0x224)]('bot')[_0x3db58c(0x1e5)]({'botID':botID})[_0x3db58c(0x235)](_0x43438a)[_0x3db58c(0x19f)]();}function restoreOrders(){const _0x130e1f=_0x403665;let _0x1dc5f2;config[_0x130e1f(0x1bc)]&&allOpenOrders[_0x130e1f(0x2de)](_0x318a52=>{const _0x328458=_0x130e1f,_0x22205d=config[_0x328458(0x1bc)][_0x328458(0x1e5)](_0xeb4823=>_0xeb4823[_0x328458(0x286)]==_0x318a52['id']);_0x22205d&&(lastOrders['push'](_0x22205d),_0x1dc5f2=_0x318a52[_0x328458(0x2a2)]);});if(lastOrders[_0x130e1f(0x1ff)]>0x0){lockOrders=ORDERS[_0x130e1f(0x1ca)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x113cdb=new Date()[_0x130e1f(0x222)](),_0x19fc73=config[_0x130e1f(0x1fa)]==_0x130e1f(0x21e)?validateOrderTimeout*0x3c*0x3e8:config[_0x130e1f(0x21a)]*0x3c*0x3e8;if(_0x1dc5f2+_0x19fc73>_0x113cdb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x45f907=_0x130e1f;validateOrders(_0x45f907(0x1f3));},_0x1dc5f2+_0x19fc73-_0x113cdb);}else validateOrders(_0x130e1f(0x1f3));}}async function sendMetricsTelegram(){const _0x2e0c2a=_0x403665;if(!coinsLoaded){process['send']({'telegrammsg':_0x2e0c2a(0x27e)},_0x56a278=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3c1943='';if(config['showname'])_0x3c1943=_0x2e0c2a(0x208)+config[_0x2e0c2a(0x1ed)]+_0x2e0c2a(0x1a2);else _0x3c1943=_0x2e0c2a(0x230)+botID+_0x2e0c2a(0x1a2);const _0x53e5b2=getKPIs(_0x2e0c2a(0x1e0)),_0x4babc2=getKPIs(_0x2e0c2a(0x27b),config[_0x2e0c2a(0x27b)]),_0x456357=getKPIs(_0x2e0c2a(0x194)),_0x41f082=getKPIs(_0x2e0c2a(0x2f8),config[_0x2e0c2a(0x27b)]);_0x3c1943+=_0x2e0c2a(0x2c0),_0x3c1943+=_0x53e5b2[_0x2e0c2a(0x2e1)]+'\x20:\x20'+_0x53e5b2[_0x2e0c2a(0x2c2)]+'\x0a',_0x3c1943+=_0x53e5b2['rightTxt']+':\x20'+_0x53e5b2['change']+'%\x0a',_0x3c1943+=_0x4babc2['leftTxt']+_0x2e0c2a(0x1f8)+_0x4babc2[_0x2e0c2a(0x2c2)]+'\x0a',_0x3c1943+=_0x4babc2[_0x2e0c2a(0x1c4)]+':\x20'+_0x4babc2[_0x2e0c2a(0x2c9)]+'%\x0a',_0x3c1943+=_0x456357[_0x2e0c2a(0x2e1)]+':\x20'+_0x456357[_0x2e0c2a(0x2c2)]+'\x20('+config[_0x2e0c2a(0x1e0)]+')\x0a',_0x3c1943+=_0x456357[_0x2e0c2a(0x1c4)]+':\x20'+_0x456357[_0x2e0c2a(0x2c9)]+_0x2e0c2a(0x2d8)+config[_0x2e0c2a(0x1e0)]+')\x0a',_0x3c1943+=_0x41f082['leftTxt']+':\x20'+_0x41f082[_0x2e0c2a(0x2c2)]+'\x20('+config[_0x2e0c2a(0x27b)]+')\x0a',_0x3c1943+=_0x41f082[_0x2e0c2a(0x1c4)]+':\x20'+_0x41f082[_0x2e0c2a(0x2c9)]+_0x2e0c2a(0x2d8)+config[_0x2e0c2a(0x27b)]+')\x0a',_0x3c1943+=_0x2e0c2a(0x2bc),process[_0x2e0c2a(0x2cf)]({'telegrammsg':_0x3c1943},_0x170663=>{});}async function sendPortfolioTelegram(){const _0x86aea8=_0x403665;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':_0x86aea8(0x27e)},_0x5646e4=>{});return;}let _0x52cb41='';if(config[_0x86aea8(0x310)])_0x52cb41=_0x86aea8(0x208)+config['botname']+_0x86aea8(0x1aa);else _0x52cb41=_0x86aea8(0x230)+botID+_0x86aea8(0x1aa);_0x52cb41+='<pre>',_0x52cb41+='-------------------------------\x0a',_0x52cb41+=_0x86aea8(0x228),_0x52cb41+=_0x86aea8(0x243),currentCoins['forEach'](_0x1bd471=>{const _0x21fe8e=_0x86aea8;_0x52cb41+=_0x1bd471[_0x21fe8e(0x217)]['padEnd'](0x7)+'|\x20'+formatPad(_0x1bd471[_0x21fe8e(0x1a9)],0x2,0x6)+'|\x20'+formatPad(_0x1bd471[_0x21fe8e(0x1d2)],0x2,0x6)+'|\x20'+formatPad(_0x1bd471[_0x21fe8e(0x296)]*0x64,0x2,0x6)+'\x0a';}),_0x52cb41+='</pre>',process[_0x86aea8(0x2cf)]({'telegrammsg':_0x52cb41},_0x425360=>{});}function formatPad(_0x53a252,_0x1a258f,_0x5f2127){const _0x43b811=_0x403665,_0x536a4b=formatResultString(_0x53a252,_0x1a258f);return _0x536a4b?_0x536a4b['padStart'](_0x5f2127):''[_0x43b811(0x191)](_0x5f2127);}function logHistory(_0x5198fd,_0x476d39,_0x1ae7a3=''){const _0x3ac215=_0x403665;logger[_0x3ac215(0x248)](''+_0x476d39);let _0x4e60e3={'time':getTimeStamp(),'type':_0x5198fd,'event':_0x476d39};dbLogs[_0x3ac215(0x224)]('logs')['push'](_0x4e60e3)[_0x3ac215(0x19f)]();if(_0x1ae7a3=='')_0x1ae7a3=_0x476d39;proxyEmit(_0x3ac215(0x242),{'log':_0x4e60e3,'summary':_0x1ae7a3}),process[_0x3ac215(0x2cf)]({'telegram':{..._0x4e60e3,'botname':config[_0x3ac215(0x1ed)],'showname':config[_0x3ac215(0x310)]}},_0x14039a=>{});}function emitHistory(_0x54b160={}){const _0x24db45=_0x403665;Object[_0x24db45(0x170)](_0x54b160)[_0x24db45(0x1ff)]==0x0&&(_0x54b160={'type':['order',_0x24db45(0x242)],'event':'','page':0x1});if(_0x54b160[_0x24db45(0x25a)]['includes'](_0x24db45(0x242)))_0x54b160['type'][_0x24db45(0x2c6)](_0x54b160[_0x24db45(0x25a)][_0x24db45(0x2ed)]('event'),0x1,'error',_0x24db45(0x1f1),_0x24db45(0x29a));if(dbLogs[_0x24db45(0x1a0)](_0x24db45(0x18c))[_0x24db45(0x2c2)]()){let _0x39687d=dbLogs[_0x24db45(0x224)](_0x24db45(0x18c))[_0x24db45(0x29e)](_0xf61e01=>{const _0x2d115c=_0x24db45;if(_0x54b160[_0x2d115c(0x25a)][_0x2d115c(0x1ff)]==0x0)return![];else return _0x54b160[_0x2d115c(0x25a)]['includes'](_0xf61e01[_0x2d115c(0x25a)]);})[_0x24db45(0x29e)](_0xa57214=>{const _0x1ca46b=_0x24db45;if(_0x54b160['event']=='')return!![];else return _0xa57214[_0x1ca46b(0x242)][_0x1ca46b(0x237)]()['includes'](_0x54b160[_0x1ca46b(0x242)][_0x1ca46b(0x237)]());})[_0x24db45(0x210)](_0x24db45(0x1e1)),_0xa94830=_0x39687d['value']()['length'];_0x39687d=_0x39687d[_0x24db45(0x1f2)]()[_0x24db45(0x275)]((_0x54b160[_0x24db45(0x2f5)]-0x1)*logPageSize,_0x54b160[_0x24db45(0x2f5)]*logPageSize-0x1)[_0x24db45(0x1f2)]()['value'](),proxyEmit(_0x24db45(0x1dc),{'logs':_0x39687d,'total':_0xa94830});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x50b493){const _0x2e43aa=_0x403665;if(dbLogs[_0x2e43aa(0x1a0)](_0x2e43aa(0x18c))[_0x2e43aa(0x2c2)]()){const _0x453a44=dbLogs[_0x2e43aa(0x224)]('logs')[_0x2e43aa(0x210)](_0x2e43aa(0x1e1))[_0x2e43aa(0x29e)](_0x1efaed=>{const _0x1bbc36=_0x2e43aa;return _0x1efaed[_0x1bbc36(0x25a)]==_0x1bbc36(0x2b2);})[_0x2e43aa(0x2c2)]();dbLogs['get'](_0x2e43aa(0x18c))[_0x2e43aa(0x18d)]()[_0x2e43aa(0x19f)](),dbLogs[_0x2e43aa(0x224)](_0x2e43aa(0x18c))[_0x2e43aa(0x235)](_0x453a44)[_0x2e43aa(0x19f)](),emitHistory(_0x50b493);}}async function pauseBot(_0x1ffc53=pauseBotIntervalShort,_0x464b57,_0x1ffc54,_0x12ee05=![]){const _0x5cb6ed=_0x403665,_0x268bf5=new Date()[_0x5cb6ed(0x222)]();if(!lastErrorShown||_0x268bf5-lastErrorShown>=_0x1ffc53){lastErrorShown=_0x268bf5;if(!lastBotPause)lastBotPause=_0x268bf5,consecutivePauses=0x1;else{if(_0x268bf5-lastBotPause-_0x1ffc53<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x12ee05){logHistory(_0x5cb6ed(0x262),_0x464b57+_0x5cb6ed(0x1c6)),await killBot();return;}else logHistory(_0x5cb6ed(0x262),_0x464b57+pauseBotMsg),_0x1ffc53=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x268bf5;}_0x1ffc54?logger[_0x5cb6ed(0x1e9)]('('+consecutivePauses+')\x20'+_0x464b57+_0x5cb6ed(0x219),_0x1ffc54):logger[_0x5cb6ed(0x1e9)]('('+consecutivePauses+')\x20'+_0x464b57);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1ffc53),botPaused=![],_0x1ffc53==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4b17e5=_0x403665;botPaused=!![],await sleep(0x3e8),process[_0x4b17e5(0x2cf)]({'stop':_0x4b17e5(0x2c7)},_0x577a6d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5ea0a0,_0x80223c){const _0x29e3ab=_0x403665;if(botPaused)return;const _0x51cf7c=config[_0x29e3ab(0x2f6)]||_0x29e3ab(0x23b);if(_0x80223c)logger[_0x29e3ab(0x1e9)](_0x29e3ab(0x221)+_0x80223c);const _0x46a0b7=()=>{const _0x432f92=_0x29e3ab;loading[_0x432f92(0x262)]=!![],emitLoadingProgress();};if(_0x5ea0a0[_0x29e3ab(0x20d)]()['includes'](_0x29e3ab(0x1ec)))logHistory('error',_0x51cf7c+_0x29e3ab(0x1d1)),_0x46a0b7();else{if(_0x5ea0a0[_0x29e3ab(0x20d)]()['includes'](_0x29e3ab(0x185)))logHistory(_0x29e3ab(0x262),_0x51cf7c+_0x29e3ab(0x2a9)),_0x46a0b7();else _0x5ea0a0[_0x29e3ab(0x20d)]()['includes'](_0x29e3ab(0x30f))?(logHistory(_0x29e3ab(0x262),_0x51cf7c+_0x29e3ab(0x270)),logHistory(_0x29e3ab(0x262),_0x29e3ab(0x1a5)),_0x46a0b7()):await handleError(_0x5ea0a0,null);}}async function handleError(_0x382c5f,_0x4d7e1b,_0x7bfba1=''){const _0x46193b=_0x403665;if(botPaused)return;let _0x439f7b;const _0x15560b=config[_0x46193b(0x2f6)]||_0x46193b(0x23b);if(_0x4d7e1b)logger[_0x46193b(0x1e9)](_0x46193b(0x221)+_0x4d7e1b);if(_0x382c5f['toString']()['includes']('DDoSProtection'))_0x439f7b=_0x15560b+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x439f7b,_0x382c5f);else{if(_0x382c5f[_0x46193b(0x20d)]()['includes'](_0x46193b(0x1bf)))_0x439f7b=_0x15560b+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x439f7b,_0x382c5f);else{if(_0x382c5f[_0x46193b(0x20d)]()['includes'](_0x46193b(0x2af))||_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x1a8)))_0x439f7b=_0x15560b+_0x46193b(0x279),await pauseBot(undefined,_0x439f7b,_0x382c5f[_0x46193b(0x20d)]());else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x2a6)))_0x439f7b=_0x15560b+_0x46193b(0x268),await pauseBot(undefined,_0x439f7b,_0x382c5f[_0x46193b(0x20d)]());else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x439f7b=_0x15560b+_0x46193b(0x317),await pauseBot(undefined,_0x439f7b,_0x382c5f[_0x46193b(0x20d)]());else{if(_0x382c5f['toString']()[_0x46193b(0x237)]()[_0x46193b(0x1d7)](_0x46193b(0x2a2))||_0x382c5f[_0x46193b(0x20d)]()['toLowerCase']()['includes']('request-time'))_0x439f7b='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x439f7b,_0x382c5f[_0x46193b(0x20d)]());else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x26c)))_0x439f7b=_0x15560b+_0x46193b(0x19c),await pauseBot(undefined,_0x439f7b,_0x382c5f[_0x46193b(0x20d)]());else{if(_0x382c5f instanceof ccxt[_0x46193b(0x167)])_0x439f7b=_0x15560b+_0x46193b(0x2e5)+_0x382c5f[_0x46193b(0x20d)](),logger[_0x46193b(0x1e9)]('Network\x20error\x20details:',_0x382c5f),await pauseBot(undefined,_0x439f7b,_0x382c5f);else{if(_0x382c5f['toString']()[_0x46193b(0x1d7)](_0x46193b(0x1ec)))logHistory(_0x46193b(0x262),_0x15560b+_0x46193b(0x290)),logHistory('error',_0x46193b(0x323)),await killBot();else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x185)))logHistory(_0x46193b(0x262),_0x15560b+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x46193b(0x262),_0x46193b(0x323)),await killBot();else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x30f))&&_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x2c8)))_0x439f7b=_0x15560b+_0x46193b(0x17a),await pauseBot(undefined,_0x439f7b,_0x382c5f,!![]);else{if(_0x382c5f['toString']()[_0x46193b(0x1d7)]('AuthenticationError'))config['apiPassword']?_0x439f7b=_0x15560b+_0x46193b(0x2e0):_0x439f7b=_0x15560b+_0x46193b(0x256),logHistory(_0x46193b(0x262),_0x439f7b),logHistory('error',_0x46193b(0x323)),await killBot();else{if(_0x382c5f[_0x46193b(0x20d)]()[_0x46193b(0x1d7)](_0x46193b(0x2e8)))logHistory('error',_0x15560b+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x46193b(0x262),_0x46193b(0x323)),await killBot();else{if(_0x382c5f[_0x46193b(0x20d)]()['includes']('InsufficientFunds'))logHistory(_0x46193b(0x262),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x7bfba1);else{if(_0x382c5f instanceof ccxt[_0x46193b(0x29d)]){_0x439f7b=_0x15560b+_0x46193b(0x178)+_0x382c5f['toString'](),logHistory(_0x46193b(0x262),_0x439f7b),logger[_0x46193b(0x1e9)](_0x46193b(0x320),_0x382c5f);if(_0x7bfba1)logger[_0x46193b(0x1e9)](_0x46193b(0x236)+_0x7bfba1);await pauseBot(undefined,_0x439f7b,_0x382c5f);}else{_0x439f7b=_0x46193b(0x1c7)+_0x382c5f[_0x46193b(0x20d)](),logHistory('error',_0x439f7b),logger['debug'](_0x439f7b+'\x20>\x20details:',_0x382c5f);if(_0x7bfba1)logger[_0x46193b(0x1e9)](_0x46193b(0x236)+_0x7bfba1);await pauseBot(undefined,_0x439f7b);}}}}}}}}}}}}}}}}function decryptRSA(_0x1d6685,_0x2c8c6e){const _0x53a08f=_0x403665,_0xe20e08=forge[_0x53a08f(0x314)]['privateKeyFromPem'](_0x1d6685),_0x2c8949=_0xe20e08[_0x53a08f(0x215)](forge[_0x53a08f(0x2ef)][_0x53a08f(0x2eb)](_0x2c8c6e),_0x53a08f(0x2b8),{'md':forge['md']['sha256'][_0x53a08f(0x2ab)](),'mgf1':{'md':forge['md'][_0x53a08f(0x318)]['create']()}});return _0x2c8949;}async function withRetry(_0x1287b4,_0x2091eb){const _0x3c7074=_0x403665;let _0x5add70=![],_0x29b066=0x0,_0x15d81e,_0x58ab52;while(_0x29b066<maxRetries){try{_0x15d81e=await _0x2091eb();break;}catch(_0x26d5d0){_0x58ab52=_0x26d5d0,!_0x5add70?(_0x5add70=!![],logger[_0x3c7074(0x1e9)](_0x3c7074(0x205)+_0x1287b4+':',_0x26d5d0['toString']())):await sleep(retryInterval);}_0x29b066++;}if(_0x29b066==0x0)return _0x15d81e;if(_0x29b066>=maxRetries)throw _0x58ab52;else return logger[_0x3c7074(0x1e9)]('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x29b066+_0x3c7074(0x2a0)),_0x15d81e;}function formatResult(_0x2d5135,_0x57ae36){const _0x513d56=_0x403665;return parseFloat(_0x2d5135[_0x513d56(0x16d)](_0x57ae36));}function formatResultTruncate(_0x9f51b4,_0x28de09){const _0x25e6a3=_0x403665;let _0x1e3b49=formatResultString(_0x9f51b4,0xa),_0x3bdd53=_0x1e3b49[_0x25e6a3(0x2ed)]('.');return _0x3bdd53!=-0x1&&(_0x1e3b49=_0x1e3b49[_0x25e6a3(0x275)](0x0,_0x3bdd53+_0x28de09+0x1)),Number(_0x1e3b49);}function formatResultString(_0x330c21,_0xc16a55){const _0x526ac5=_0x403665;let _0x3cdaf5;if(!(''+_0x330c21)[_0x526ac5(0x1d7)]('e'))_0x3cdaf5=+(Math[_0x526ac5(0x2ea)](_0x330c21+'e+'+_0xc16a55)+'e-'+_0xc16a55);else{let _0x317524=(''+_0x330c21)[_0x526ac5(0x2e9)]('e'),_0x3e9730='';+_0x317524[0x1]+_0xc16a55>0x0&&(_0x3e9730='+'),_0x3cdaf5=+(Math['round'](+_0x317524[0x0]+'e'+_0x3e9730+(+_0x317524[0x1]+_0xc16a55))+'e-'+_0xc16a55);}return Number(_0x3cdaf5)[_0x526ac5(0x16d)](_0xc16a55);}function getServerTime(){const _0x35baae=_0x403665,_0x356419=new Date();return _0x356419[_0x35baae(0x1ba)]()+'/'+(_0x356419[_0x35baae(0x162)]()+0x1)['toString']()[_0x35baae(0x191)](0x2,'0')+'/'+_0x356419[_0x35baae(0x181)]()[_0x35baae(0x20d)]()['padStart'](0x2,'0')+'\x20'+_0x356419['getHours']()['toString']()[_0x35baae(0x191)](0x2,'0')+':'+_0x356419[_0x35baae(0x31f)]()['toString']()['padStart'](0x2,'0')+':'+_0x356419[_0x35baae(0x311)]()[_0x35baae(0x20d)]()[_0x35baae(0x191)](0x2,'0');}function getTimeStamp(){const _0x43a541=_0x403665,_0x34eac0=shiftedTime();return _0x34eac0['getFullYear']()+'/'+(_0x34eac0[_0x43a541(0x162)]()+0x1)['toString']()[_0x43a541(0x191)](0x2,'0')+'/'+_0x34eac0['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x34eac0[_0x43a541(0x1dd)]()['toString']()[_0x43a541(0x191)](0x2,'0')+':'+_0x34eac0[_0x43a541(0x31f)]()[_0x43a541(0x20d)]()[_0x43a541(0x191)](0x2,'0')+':'+_0x34eac0[_0x43a541(0x311)]()['toString']()[_0x43a541(0x191)](0x2,'0');}function getDate(){const _0x7b8c7f=_0x403665,_0x522da6=shiftedTime();return _0x522da6[_0x7b8c7f(0x1ba)]()+'/'+(_0x522da6[_0x7b8c7f(0x162)]()+0x1)[_0x7b8c7f(0x20d)]()[_0x7b8c7f(0x191)](0x2,'0')+'/'+_0x522da6['getDate']()[_0x7b8c7f(0x20d)]()['padStart'](0x2,'0');}function getHour(){const _0x1a5b0b=_0x403665,_0x3ded6b=shiftedTime();return _0x3ded6b['getHours']()[_0x1a5b0b(0x20d)]()[_0x1a5b0b(0x191)](0x2,'0');}function _0x2890(_0x3637fd,_0x34c66f){const _0x57d25e=_0x526a();return _0x2890=function(_0x204324,_0x265dc0){_0x204324=_0x204324-0x162;let _0x526a69=_0x57d25e[_0x204324];return _0x526a69;},_0x2890(_0x3637fd,_0x34c66f);}function sleep(_0x24476a){return new Promise(_0x172d68=>setTimeout(_0x172d68,_0x24476a));}function shiftedTime(){const _0x5631c2=_0x403665,_0x429442=new Date();let _0x49b9c6=_0x429442;if(config&&config[_0x5631c2(0x28e)]!==0x0)_0x49b9c6=fns['add'](_0x429442,{'hours':config[_0x5631c2(0x28e)]});return _0x49b9c6;}function timer(_0x1aa972){const _0x3065ed=_0x403665,_0x3c2edf=new Date();!lasttime?console[_0x3065ed(0x294)](getTimeStamp()+_0x3065ed(0x2fb),_0x1aa972,_0x3c2edf):console[_0x3065ed(0x294)](getTimeStamp()+':\x20timer\x20>',_0x1aa972,(_0x3c2edf-lasttime)/0x3e8),lasttime=_0x3c2edf;}