const _0x1c93ed=_0x21a2;(function(_0x4f83a9,_0x31802f){const _0x3a2629=_0x21a2,_0x5aee95=_0x4f83a9();while(!![]){try{const _0x2e8902=-parseInt(_0x3a2629(0x27b))/0x1*(parseInt(_0x3a2629(0x244))/0x2)+parseInt(_0x3a2629(0x2b9))/0x3*(-parseInt(_0x3a2629(0x153))/0x4)+parseInt(_0x3a2629(0x203))/0x5*(parseInt(_0x3a2629(0x2b8))/0x6)+parseInt(_0x3a2629(0x1a0))/0x7*(parseInt(_0x3a2629(0x26a))/0x8)+parseInt(_0x3a2629(0x20a))/0x9*(parseInt(_0x3a2629(0x20e))/0xa)+-parseInt(_0x3a2629(0x14a))/0xb*(parseInt(_0x3a2629(0x1cb))/0xc)+parseInt(_0x3a2629(0x15c))/0xd;if(_0x2e8902===_0x31802f)break;else _0x5aee95['push'](_0x5aee95['shift']());}catch(_0xf1e919){_0x5aee95['push'](_0x5aee95['shift']());}}}(_0x103d,0x98dd2));const _0x2eb850=function(){let _0x3598d0=!![];return function(_0x2c0f43,_0x47d4b2){const _0x189e99=_0x3598d0?function(){const _0x48db03=_0x21a2;if(_0x47d4b2){const _0x314d72=_0x47d4b2[_0x48db03(0x172)](_0x2c0f43,arguments);return _0x47d4b2=null,_0x314d72;}}:function(){};return _0x3598d0=![],_0x189e99;};}(),_0x7b0cf=_0x2eb850(this,function(){const _0x2e7579=_0x21a2;return _0x7b0cf[_0x2e7579(0x187)]()[_0x2e7579(0x265)](_0x2e7579(0x2ab))[_0x2e7579(0x187)]()[_0x2e7579(0x173)](_0x7b0cf)['search'](_0x2e7579(0x2ab));});_0x7b0cf();'use strict';const ccxt=require('ccxt')[_0x1c93ed(0x1f0)],low=require(_0x1c93ed(0x21a)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1c93ed(0x155)),Crypt=require(_0x1c93ed(0x233))[_0x1c93ed(0x151)],util=require(_0x1c93ed(0x24e)),argv=require('yargs/yargs')(process[_0x1c93ed(0x282)][_0x1c93ed(0x144)](0x2))[_0x1c93ed(0x282)],path=require('path');let exchange;global[_0x1c93ed(0x17b)]={},global[_0x1c93ed(0x16e)]={};const usdBasecoins=[_0x1c93ed(0x21e),'BUSD',_0x1c93ed(0x15e),'USDT',_0x1c93ed(0x290),'USDP'],exceptions={'binance':[_0x1c93ed(0x25a),_0x1c93ed(0x22f),_0x1c93ed(0x228),'NANO/','YOYOW/']},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1c93ed(0x27c)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x1c93ed(0x1b5))[_0x1c93ed(0x2c4)],botID=process['argv'][0x2]||_0x1c93ed(0x1e3),pattern=/^[0-9]{3}$/;!pattern[_0x1c93ed(0x1e5)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x1c93ed(0x1fa)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x1c93ed(0x179)+userID+'/':_0x1c93ed(0x179),logspath=userID?'./logs/'+userID+'/':_0x1c93ed(0x28f),loggerfile=fs[_0x1c93ed(0x1c6)](logspath+_0x1c93ed(0x28b),{'flags':'a'});!fs[_0x1c93ed(0x2be)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1c93ed(0x2be)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x1c93ed(0x276)+botID+_0x1c93ed(0x2d5),logfile=configpath+'bot-'+botID+_0x1c93ed(0x2cf),performancefile=configpath+_0x1c93ed(0x276)+botID+'-performance.json',coinresultsfile=configpath+_0x1c93ed(0x276)+botID+'-results.json',settingsfile=configpath+_0x1c93ed(0x1de),securefile=configpath+_0x1c93ed(0x1af),configbackuppath=configpath+_0x1c93ed(0x1a2),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1c93ed(0x183)]({'logs':[],'version':serverversion})[_0x1c93ed(0x1f3)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1c93ed(0x183)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1c93ed(0x183)]({'bot':[],'version':serverversion})[_0x1c93ed(0x1f3)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1c93ed(0x183)]({'coins':[],'version':serverversion})[_0x1c93ed(0x1f3)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1c93ed(0x162),'rsaStandard':_0x1c93ed(0x17a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4e7a67=>{const _0x1bba78=_0x1c93ed;console[_0x1bba78(0x214)](_0x4e7a67);},'simple':_0x28499d=>{const _0x369ad2=_0x1c93ed;console['log'](_0x28499d),loggerfile[_0x369ad2(0x1f3)](util[_0x369ad2(0x18f)](_0x28499d)+'\x0a');},'full':async(_0x4eb26f,_0x51d77a='')=>{const _0x242186=_0x1c93ed;let _0x2f011b;if(config['showname'])_0x2f011b=getTimeStamp()+':\x20'+config[_0x242186(0x16f)]+'\x20>\x20'+_0x4eb26f;else _0x2f011b=getTimeStamp()+_0x242186(0x224)+botID+'\x20>\x20'+_0x4eb26f;console[_0x242186(0x214)](_0x2f011b),loggerfile[_0x242186(0x1f3)](util[_0x242186(0x18f)](_0x2f011b)+'\x0a'),_0x51d77a&&(console[_0x242186(0x214)](_0x51d77a),loggerfile['write'](util['format'](_0x51d77a)+'\x0a'));},'debug':async(_0x1672d9,_0x33b08d='')=>{const _0x5a865b=_0x1c93ed;let _0x2786a1;if(config[_0x5a865b(0x26f)])_0x2786a1=getTimeStamp()+':\x20'+config[_0x5a865b(0x16f)]+_0x5a865b(0x210)+_0x1672d9;else _0x2786a1=getTimeStamp()+_0x5a865b(0x224)+botID+_0x5a865b(0x210)+_0x1672d9;if(debugging)console[_0x5a865b(0x214)](_0x2786a1);loggerfile['write'](util[_0x5a865b(0x18f)](_0x2786a1)+'\x0a');if(_0x33b08d){if(debugging)console[_0x5a865b(0x214)](_0x33b08d);loggerfile[_0x5a865b(0x1f3)](util['format'](_0x33b08d)+'\x0a');}}};process['on'](_0x1c93ed(0x213),function(_0x2e59b5){const _0x43d16d=_0x1c93ed;logger[_0x43d16d(0x1ff)](_0x43d16d(0x292),_0x2e59b5);});settings['timeshift']!=config[_0x1c93ed(0x1a1)]&&updateTimeshift(settings[_0x1c93ed(0x1a1)]);settings['onepagemode']!=config[_0x1c93ed(0x29d)]&&updateOnepagemode(settings['onepagemode']);process[_0x1c93ed(0x295)]({'started':_0x1c93ed(0x2ac)},_0x253ffa=>{}),initializeProcessListeners();function proxyEmit(_0x3a865b,_0x136254=null){const _0x3ec0fd=_0x1c93ed;process[_0x3ec0fd(0x295)]({'function':_0x3a865b,'args':_0x136254},_0x16f564=>{});}function initializeProcessListeners(){const _0x21671f=_0x1c93ed;process['on'](_0x21671f(0x271),_0x5dbd33=>{const _0x4ec407=_0x21671f;switch(Object[_0x4ec407(0x15d)](_0x5dbd33)[0x0]){case'timeshift':_0x5dbd33[_0x4ec407(0x1a1)]!=undefined&&(settings['timeshift']=_0x5dbd33[_0x4ec407(0x1a1)],updateTimeshift(settings[_0x4ec407(0x1a1)]));break;case _0x4ec407(0x29d):_0x5dbd33[_0x4ec407(0x29d)]!=undefined&&(settings[_0x4ec407(0x29d)]=_0x5dbd33[_0x4ec407(0x29d)],updateOnepagemode(settings[_0x4ec407(0x29d)]));break;case'bots':_0x5dbd33[_0x4ec407(0x209)]!=undefined&&(bots=JSON[_0x4ec407(0x197)](_0x5dbd33['bots']),proxyEmit(_0x4ec407(0x209),bots));break;case'function':switch(_0x5dbd33[_0x4ec407(0x273)]){case _0x4ec407(0x2c8):initclient();break;case _0x4ec407(0x245):toggleBotMode();break;case _0x4ec407(0x1cd):emitHistory(_0x5dbd33[_0x4ec407(0x18d)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x5dbd33[_0x4ec407(0x18d)]);break;case _0x4ec407(0x185):getPortfolio(_0x5dbd33[_0x4ec407(0x18d)]);break;case _0x4ec407(0x246):storeConfiguration(_0x5dbd33[_0x4ec407(0x18d)]);break;case _0x4ec407(0x262):storeHeadless(_0x5dbd33[_0x4ec407(0x18d)]);break;case _0x4ec407(0x247):storeFiat(_0x5dbd33[_0x4ec407(0x18d)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x5dbd33[_0x4ec407(0x18d)]);break;case _0x4ec407(0x299):cancelLoading();break;case'showConfig':showConfig();break;case _0x4ec407(0x1c4):sendMetricsTelegram();break;case _0x4ec407(0x24c):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x21bb6c=null,_0x521d06=![]){const _0x1581f8=_0x1c93ed;logger[_0x1581f8(0x1ff)](_0x1581f8(0x225)+(_0x21bb6c&&_0x21bb6c['length']>0x0?_0x1581f8(0x1e9)+_0x21bb6c[_0x1581f8(0x15f)](','):_0x1581f8(0x222))+_0x1581f8(0x149)+(_0x521d06?_0x1581f8(0x152):'exchange\x20not\x20reloaded')+_0x1581f8(0x259)+config[_0x1581f8(0x2a9)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x521d06)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1581f8(0x28e)]!=''&&config[_0x1581f8(0x28e)]!=_0x1581f8(0x28c)){if(_0x521d06){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2b12f4){handleErrorNoStop(_0x2b12f4,_0x1581f8(0x237));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x21bb6c);const _0x17338f=await getCoins();[currentCoins,currentCoinsAll]=_0x17338f,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1581f8(0x18b)]==0x0&&allOpenOrders[_0x1581f8(0x18b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x5e81e6=_0x1c93ed;logger['debug'](_0x5e81e6(0x150));while(lockOrders!=ORDERS[_0x5e81e6(0x27c)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5e81e6(0x1ff)](_0x5e81e6(0x158)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5e0a84=config[_0x1c93ed(0x2a9)],_0x4a081e=config[_0x1c93ed(0x28e)],_0x441c5f=config['apiSecret'],_0x8f88c=config['apiPassword']){const _0x279d97=_0x1c93ed;exchange&&await stopExchange();!supportedExchanges()[_0x279d97(0x1b7)](_0x5e0a84)&&(logHistory(_0x279d97(0x275),_0x279d97(0x1f1)+_0x5e0a84+'\x20exchange'),killBot());const _0x4ba361=ccxt[_0x5e0a84[_0x279d97(0x15a)]()];exchange=new _0x4ba361({'apiKey':_0x4a081e,'secret':_0x441c5f,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x5e0a84=='Bybit'&&(exchange['options']={'defaultType':_0x279d97(0x226)});if(_0x8f88c)exchange[_0x279d97(0x206)]=_0x8f88c;}function setStableCoins(){const _0x1edd8e=_0x1c93ed;let _0x169da3=config[_0x1edd8e(0x279)]==_0x1edd8e(0x281)?_0x1edd8e(0x281):_0x1edd8e(0x1b3),_0x2a7c85=!allSymbols[_0x1edd8e(0x1b7)](_0x169da3+_0x1edd8e(0x148))?_0x1edd8e(0x1c5):'USD',_0x3db13c=!allSymbols[_0x1edd8e(0x1b7)](_0x169da3+_0x1edd8e(0x264))?_0x2a7c85:'EUR';stablecoins={'eur':{'coin':''+_0x169da3+_0x3db13c,'symbol':_0x169da3+'/'+_0x3db13c},'usd':{'coin':''+_0x169da3+_0x2a7c85,'symbol':_0x169da3+'/'+_0x2a7c85}};}async function initwsCcxt(_0x5943c0){const _0x1dd9ee=_0x1c93ed;_0x5943c0==null&&(_0x5943c0=[],config[_0x1dd9ee(0x21d)][_0x1dd9ee(0x221)](_0x1726d9=>{const _0x1eb7f1=_0x1dd9ee;if(!_0x1726d9[_0x1eb7f1(0x298)]&&_0x1726d9[_0x1eb7f1(0x1ca)]!=config[_0x1eb7f1(0x279)])_0x5943c0['push'](_0x1726d9['symbol']);}));if(!_0x5943c0[_0x1dd9ee(0x1b7)](stablecoins['eur']['symbol']))_0x5943c0[_0x1dd9ee(0x154)](stablecoins['eur']['symbol']);if(!_0x5943c0[_0x1dd9ee(0x1b7)](stablecoins[_0x1dd9ee(0x1eb)][_0x1dd9ee(0x14d)]))_0x5943c0[_0x1dd9ee(0x154)](stablecoins[_0x1dd9ee(0x1eb)][_0x1dd9ee(0x14d)]);if(config[_0x1dd9ee(0x2a9)][_0x1dd9ee(0x171)](_0x1dd9ee(0x26d))){if(!_0x5943c0[_0x1dd9ee(0x1b7)](_0x1dd9ee(0x2d8)+config[_0x1dd9ee(0x279)]))_0x5943c0[_0x1dd9ee(0x154)]('BNB/'+config['basecoin']);}loadCoins(_0x5943c0);const _0x4fb41a=async _0x14005a=>{const _0x2abae8=_0x1dd9ee,_0x4f2d0f=await exchange[_0x2abae8(0x2c5)](_0x14005a);global[_0x2abae8(0x17b)][noslash(_0x4f2d0f[_0x2abae8(0x14d)])]=_0x4f2d0f[_0x2abae8(0x1e4)];while(!![]){if(!botPaused)try{const _0x5f0695=await exchange['watchTrades'](_0x14005a);global[_0x2abae8(0x17b)][noslash(_0x5f0695[0x0][_0x2abae8(0x14d)])]=_0x5f0695[0x0][_0x2abae8(0x286)],await sleep(0x3e8);}catch(_0x574021){if(!exchangeStopped)await handleError(_0x574021,_0x2abae8(0x269),_0x14005a);}else await sleep(0x64);}},_0x26edcc=async _0x6434e5=>{const _0x71d3e9=_0x1dd9ee;while(!![]){if(!botPaused)try{const _0x2b8adf=await exchange[_0x71d3e9(0x2c5)](_0x6434e5);global[_0x71d3e9(0x16e)][_0x2b8adf['symbol']]=_0x2b8adf['percentage'],await sleep(0x3c*0x3e8);}catch(_0x4b548a){if(!exchangeStopped)await handleError(_0x4b548a,'fetchTickers',_0x6434e5);}else await sleep(0x64);}},_0x33eedf=async()=>{const _0x33d6c2=_0x1dd9ee;while(!![]){if(!botPaused)try{const _0x416f22=await exchange[_0x33d6c2(0x2a4)]();_0x416f22[_0x33d6c2(0x221)](_0x5af2c7=>{updateNumberCoinsCcxt(_0x5af2c7);});}catch(_0x240018){if(!exchangeStopped)await handleError(_0x240018,_0x33d6c2(0x2a4));}else await sleep(0x64);}};_0x5943c0[_0x1dd9ee(0x221)](_0x4020fd=>{_0x4fb41a(_0x4020fd),_0x26edcc(_0x4020fd);}),!wsEventsSet&&(wsEventsSet=!![],_0x33eedf(),watchTransactions());}async function watchTransactions(){const _0x52f1f7=_0x1c93ed;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x26df8c=await getCoins(),[_0x1f3311,_0x4e3139]=_0x26df8c;let _0xdc101d=[];currentCoins[_0x52f1f7(0x221)](_0x497ff2=>{const _0x5cf705=_0x52f1f7,_0x125872=_0x1f3311['find'](_0x3bb717=>_0x3bb717[_0x5cf705(0x1ca)]==_0x497ff2[_0x5cf705(0x1ca)]);_0x125872&&(_0x497ff2[_0x5cf705(0x1fe)]!=_0x125872['number']&&_0xdc101d[_0x5cf705(0x154)]({'coin':_0x497ff2[_0x5cf705(0x1ca)],'symbol':_0x497ff2[_0x5cf705(0x14d)],'number':Number(formatResult(_0x125872[_0x5cf705(0x1fe)]-_0x497ff2[_0x5cf705(0x1fe)],0x8))}));});if(_0xdc101d[_0x52f1f7(0x18b)]==0x1&&!blockTransactionDetection){if(config[_0x52f1f7(0x2bd)]){logger[_0x52f1f7(0x1ff)]('Fees\x20|\x20currency:\x20'+lastFees[_0x52f1f7(0x29f)]+_0x52f1f7(0x1fb)+lastFees[_0x52f1f7(0x2b7)]);if(!lastFees[_0x52f1f7(0x29f)]||_0xdc101d[0x0][_0x52f1f7(0x1ca)]!=lastFees[_0x52f1f7(0x29f)]||_0xdc101d[0x0][_0x52f1f7(0x1fe)]>lastFees[_0x52f1f7(0x2b7)]){let _0x57268b;if(_0xdc101d[0x0][_0x52f1f7(0x1ca)]!=config['basecoin']){let _0x647177=global['ticker'][noslash(_0xdc101d[0x0][_0x52f1f7(0x14d)])];_0x57268b=_0xdc101d[0x0]['reverse']?0x1/_0x647177:_0x647177;}else _0x57268b=0x1;_0xdc101d[0x0][_0x52f1f7(0x286)]=_0x57268b,delete _0xdc101d[0x0]['symbol'];let _0x4a7288=[],_0x23fbb2=[...config[_0x52f1f7(0x1f4)]]||[],_0x5c483c=config[_0x52f1f7(0x1f4)];_0x23fbb2[_0x52f1f7(0x2b4)]((_0x49f71b,_0x2910e6)=>_0x49f71b['date']>_0x2910e6[_0x52f1f7(0x20f)]?-0x1:_0x2910e6[_0x52f1f7(0x20f)]>_0x49f71b[_0x52f1f7(0x20f)]?0x1:0x0);const _0x3067da=getDate();if(_0x23fbb2[0x0]){const _0x49591b=fns[_0x52f1f7(0x197)](_0x23fbb2[0x0]['date'],'yyyy/MM/dd',new Date()),_0x27cfc7=fns['parse'](_0x3067da,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x49591b,_0x27cfc7)){_0x4a7288=_0x23fbb2[0x0][_0x52f1f7(0x1df)];const _0x33100f=_0x4a7288[_0x52f1f7(0x1bb)](_0x3132fa=>_0x3132fa[_0x52f1f7(0x1ca)]==_0xdc101d[0x0][_0x52f1f7(0x1ca)]);_0x33100f?(_0x33100f[_0x52f1f7(0x1fe)]+=_0xdc101d[0x0]['number'],_0x33100f['number']==0x0&&(_0x4a7288=_0x4a7288[_0x52f1f7(0x1ec)](_0x1732d1=>{const _0x81677=_0x52f1f7;return _0x1732d1[_0x81677(0x1ca)]!=_0xdc101d[0x0][_0x81677(0x1ca)];}))):_0x4a7288[_0x52f1f7(0x154)](_0xdc101d[0x0]);const _0x50a87a=_0x5c483c[_0x52f1f7(0x1bb)](_0x1b3d62=>_0x1b3d62[_0x52f1f7(0x20f)]==_0x3067da);_0x50a87a[_0x52f1f7(0x1df)]=_0x4a7288;}else _0x5c483c['push']({'date':_0x3067da,'changes':[_0xdc101d[0x0]]});}const _0x3f6afe=_0x5c483c[_0x52f1f7(0x1bb)](_0x328360=>_0x328360['date']==_0x3067da);if(_0x3f6afe){let _0xc9bf55=!![];_0x3f6afe[_0x52f1f7(0x1df)][_0x52f1f7(0x221)](_0x1abad9=>{if(_0x1abad9['number']!=0x0)_0xc9bf55=![];}),_0xc9bf55&&(_0x5c483c=_0x5c483c[_0x52f1f7(0x1ec)](_0x280a2f=>{return _0x280a2f['date']!=_0x3067da;}));}let _0x5891c9=dbConfig[_0x52f1f7(0x28a)](_0x52f1f7(0x217))[_0x52f1f7(0x1bb)]({'botID':botID})[_0x52f1f7(0x2cb)]();_0x5891c9&&(dbConfig['get']('bot')[_0x52f1f7(0x1bb)]({'botID':botID})['assign']({'liquidity':_0x5c483c})[_0x52f1f7(0x1f3)](),config[_0x52f1f7(0x1f4)]=_0x5c483c),logHistory(_0x52f1f7(0x239),'Portfolio\x20change\x20detected:\x20'+Math[_0x52f1f7(0x1db)](_0xdc101d[0x0][_0x52f1f7(0x1fe)])+'\x20'+_0xdc101d[0x0]['coin']+'\x20'+(_0xdc101d[0x0]['number']>0x0?_0x52f1f7(0x1f9):_0x52f1f7(0x2c2))+_0x52f1f7(0x254)),proxyEmit(_0x52f1f7(0x1ac),emittedConfiguration());}else logger[_0x52f1f7(0x1ff)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x52f1f7(0x1db)](_0xdc101d[0x0]['number'])+'\x20'+_0xdc101d[0x0][_0x52f1f7(0x1ca)]+'\x20'+(_0xdc101d[0x0]['number']>0x0?_0x52f1f7(0x1f9):_0x52f1f7(0x2c2)));transactionDetected=!![],currentCoins=_0x1f3311,currentCoinsAll=_0x4e3139;}else logger[_0x52f1f7(0x1ff)]('Portfolio\x20change\x20detected:\x20'+Math[_0x52f1f7(0x1db)](_0xdc101d[0x0][_0x52f1f7(0x1fe)])+'\x20'+_0xdc101d[0x0][_0x52f1f7(0x1ca)]+'\x20'+(_0xdc101d[0x0]['number']>0x0?_0x52f1f7(0x1f9):_0x52f1f7(0x2c2))+_0x52f1f7(0x1ce)),currentCoins=_0x1f3311,currentCoinsAll=_0x4e3139;}await sleep(watchTransactionsInterval);}catch(_0x24c848){if(!exchangeStopped)await handleError(_0x24c848,_0x52f1f7(0x1a7));}else await sleep(0x64);}}async function loadSymbols(_0x3ed639=config[_0x1c93ed(0x2a9)],_0x324417=![]){const _0x1ecbac=_0x1c93ed;if(allSymbols&&!_0x324417)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x1ecbac(0x19a)][_0x1ecbac(0x1ec)](_0x2cc51b=>{const _0x20b197=_0x1ecbac;let _0x58ef25=![];const _0x5b3e3e=exceptions[_0x3ed639[_0x20b197(0x15a)]()]||[];return _0x5b3e3e[_0x20b197(0x221)](_0x46048c=>{const _0x3c7851=_0x20b197;if(_0x2cc51b[_0x3c7851(0x1b7)](_0x46048c))_0x58ef25=!![];}),!_0x58ef25;});}catch(_0x1082ff){throw _0x1082ff;}}async function initclient(){const _0x5e2052=_0x1c93ed;emitLoadingProgress(),proxyEmit(_0x5e2052(0x1ac),emittedConfiguration()),proxyEmit(_0x5e2052(0x192),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5e2052(0x227),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x50e328=getNormalizedPerformance();emitPerformance(_0x50e328),getStartingBalances(_0x50e328);}async function toggleBotMode(){const _0x1a5e04=_0x1c93ed;let _0x2d04bd=dbConfig[_0x1a5e04(0x28a)]('bot')[_0x1a5e04(0x1bb)]({'botID':botID})[_0x1a5e04(0x2cb)]();if(_0x2d04bd){const _0x4d6235=!_0x2d04bd[_0x1a5e04(0x1d6)];dbConfig[_0x1a5e04(0x28a)](_0x1a5e04(0x217))[_0x1a5e04(0x1bb)]({'botID':botID})[_0x1a5e04(0x2a0)]({'headless':_0x4d6235})['write'](),config[_0x1a5e04(0x1d6)]=_0x4d6235,proxyEmit(_0x1a5e04(0x1ac),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1de9ca=_0x1c93ed;process[_0x1de9ca(0x295)]({'updatebotmanager':!![]},_0xdc4578=>{});}async function loadCoins(_0x15c5cc){const _0x668ad0=_0x1c93ed;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x51c513,_0x4504d1=0x0,_0x4c2ec3=0x0;_0x15c5cc[_0x668ad0(0x221)](_0x3eaf35=>{const _0x4a0d58=_0x668ad0;loading['remainingSymbols'][_0x4a0d58(0x154)](_0x3eaf35);}),loadingCanceled=![];let _0x340b93=![];while(_0x51c513!=_0x15c5cc[_0x668ad0(0x18b)]){_0x51c513=0x0,_0x15c5cc[_0x668ad0(0x221)](_0xae66df=>{const _0x536852=_0x668ad0;if(global['ticker'][noslash(_0xae66df)]){loading['remainingSymbols']=loading[_0x536852(0x16a)][_0x536852(0x1ec)](_0x5614f0=>_0x5614f0!=_0xae66df);if(!watchedSymbols['includes'](_0xae66df))watchedSymbols[_0x536852(0x154)](_0xae66df);_0x51c513++;}}),loading[_0x668ad0(0x1b9)]=Math[_0x668ad0(0x208)](_0x51c513/_0x15c5cc[_0x668ad0(0x18b)]*0x64);loading[_0x668ad0(0x1b9)]!=0x64&&(_0x4c2ec3>0x1e*0x5&&(loading[_0x668ad0(0x283)]=!![],emitLoadingProgress()),_0x4c2ec3>0x78*0x5&&!_0x340b93&&(loading[_0x668ad0(0x270)]=!![],emitLoadingProgress(),_0x340b93=!![],logHistory(_0x668ad0(0x275),_0x668ad0(0x157)+loading[_0x668ad0(0x16a)][_0x668ad0(0x15f)](',\x20')+_0x668ad0(0x1dd)),logHistory(_0x668ad0(0x275),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x668ad0(0x22c)),pidCoinReloading=setTimeout(()=>{const _0x33e205=_0x668ad0;process[_0x33e205(0x295)]({'stop':_0x33e205(0x263)},_0x4ca8f7=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x668ad0(0x270)]=!![],emitLoadingProgress();break;}else _0x51c513!=_0x4504d1&&(_0x4504d1=_0x51c513,emitLoadingProgress()),_0x4c2ec3++,await sleep(0xc8);}_0x51c513==_0x15c5cc[_0x668ad0(0x18b)]&&(coinsLoaded=!![],process['send']({'status':_0x668ad0(0x1d8),'live':_0x668ad0(0x2ac)},_0x5d2eb7=>{}),_0x340b93&&logHistory(_0x668ad0(0x239),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x31ac8c=_0x1c93ed;proxyEmit(_0x31ac8c(0x1ac),{...emittedConfiguration(),'configstate':_0x31ac8c(0x1ef)});}function emitLoadingProgress(){const _0x2b9e6f=_0x1c93ed;proxyEmit(_0x2b9e6f(0x294),loading);}async function getFiat(){const _0x1de724=_0x1c93ed;let _0x15dab7=global[_0x1de724(0x17b)][stablecoins[_0x1de724(0x260)][_0x1de724(0x1ca)]],_0x55aa00=global[_0x1de724(0x17b)][stablecoins[_0x1de724(0x1eb)][_0x1de724(0x1ca)]];return{'eur':Number(_0x15dab7),'usd':Number(_0x55aa00)};}function capitalize(_0x1f9aa0){const _0x1df257=_0x1c93ed;return _0x1f9aa0[_0x1df257(0x15b)](0x0,0x1)[_0x1df257(0x28d)]()+_0x1f9aa0['substring'](0x1);}function supportedExchanges(){const _0x3931ad=_0x1c93ed,_0x519ffb=['ws',_0x3931ad(0x2b6),'fetchTicker',_0x3931ad(0x269),_0x3931ad(0x2a4),_0x3931ad(0x2d1),'createOrder',_0x3931ad(0x1d9),'fetchClosedOrders',_0x3931ad(0x266)];let _0x41c131=[],_0x548638=[],_0x3d6deb=ccxt[_0x3931ad(0x192)];_0x3d6deb[_0x3931ad(0x221)](_0x44c1cd=>{const _0x194fd6=_0x3931ad;try{const _0x3d5985=new ccxt[_0x44c1cd]();if(_0x3d5985[_0x194fd6(0x23b)]['ws'])_0x548638['push'](_0x3d5985);}catch(_0x54d7a9){}}),_0x548638[_0x3931ad(0x221)](_0x4a6812=>{const _0xa1e25a=_0x3931ad;let _0x369c1d=0x0;_0x519ffb['forEach'](_0x22e14b=>{const _0x1d849c=_0x21a2;_0x22e14b in _0x4a6812[_0x1d849c(0x23b)]&&_0x4a6812['has'][_0x22e14b]&&_0x369c1d++;}),_0x369c1d==_0x519ffb[_0xa1e25a(0x18b)]&&_0x41c131[_0xa1e25a(0x154)](capitalize(_0x4a6812['id']));});let _0x1bc289=[];return _0x3d6deb[_0x3931ad(0x221)](_0x1396e3=>{const _0x40a334=_0x3931ad;_0x1396e3=capitalize(_0x1396e3);if(!_0x41c131[_0x40a334(0x1b7)](_0x1396e3))_0x1bc289[_0x40a334(0x154)](_0x1396e3);}),_0x41c131;}function setStartDatePerformance(){const _0x295642=_0x1c93ed;if(config&&config[_0x295642(0x1f4)][0x0][_0x295642(0x1df)]['length']!=0x0){const _0xa0809b=config['liquidity'][0x0][_0x295642(0x1df)];dbPerformance['get'](_0x295642(0x2a8))['find']({'date':config['startdate']})[_0x295642(0x2a0)]({'coins':_0xa0809b})['write']();}}async function recreateCoinResults(){const _0x3d2927=_0x1c93ed;let _0x4f9cde,_0x5ae94b=[];try{const _0x201e53=fns[_0x3d2927(0x18f)](fns[_0x3d2927(0x25e)](config[_0x3d2927(0x25f)]['replace'](/\//g,'-')),_0x3d2927(0x194));for(const _0x2d979e of currentCoins){if(_0x2d979e[_0x3d2927(0x1ca)]!=config[_0x3d2927(0x279)]){let _0x48d1c3=0x0,_0x44673c,_0x41b871;_0x4f9cde=await getAllEventOrders(_0x2d979e[_0x3d2927(0x14d)]);if(_0x4f9cde['length']>0x0)_0x4f9cde['forEach'](_0x1a2687=>{const _0x3e5abf=_0x3d2927,_0x464f74=_0x2d979e[_0x3e5abf(0x14d)][_0x3e5abf(0x1b7)](config['basecoin']+'/');_0x5ae94b[_0x3e5abf(0x154)]({'datetime':_0x1a2687[_0x3e5abf(0x2ba)],'coin':_0x2d979e[_0x3e5abf(0x1ca)],'symbol':_0x2d979e['symbol'],'side':_0x1a2687['side'],'reverse':_0x464f74,'amount':formatResult(_0x1a2687['filled'],0x8),'filled':formatResult(_0x1a2687[_0x3e5abf(0x1cc)],0x8),'price':formatResult(_0x1a2687[_0x3e5abf(0x286)],0x8)}),_0x48d1c3=_0x1a2687['side']==_0x3e5abf(0x190)?_0x48d1c3+_0x1a2687['filled']:_0x48d1c3-_0x1a2687[_0x3e5abf(0x1cc)];if(!_0x41b871)_0x41b871=_0x1a2687[_0x3e5abf(0x286)];});_0x44673c=_0x2d979e[_0x3d2927(0x1fe)]-_0x48d1c3;let _0x450f1e;config[_0x3d2927(0x1f4)]['forEach'](_0x1ba0f8=>{const _0x16e012=_0x3d2927;!_0x450f1e&&(_0x450f1e=_0x1ba0f8[_0x16e012(0x1df)][_0x16e012(0x1bb)](_0x5c9837=>_0x5c9837[_0x16e012(0x1ca)]==_0x2d979e[_0x16e012(0x1ca)]),_0x450f1e&&(_0x44673c=_0x450f1e[_0x16e012(0x1fe)],_0x41b871=_0x450f1e[_0x16e012(0x286)]));});let _0x6e095e=dbCoinResults[_0x3d2927(0x28a)](_0x3d2927(0x22e))[_0x3d2927(0x1bb)]({'coin':_0x2d979e[_0x3d2927(0x1ca)]})[_0x3d2927(0x2cb)]();_0x6e095e={'coin':_0x2d979e['coin'],'number':_0x44673c,'breakeven':_0x41b871,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x3d2927(0x22e))[_0x3d2927(0x1bb)]({'coin':_0x2d979e[_0x3d2927(0x1ca)]})[_0x3d2927(0x2a0)](_0x6e095e)[_0x3d2927(0x1f3)]();}}_0x5ae94b['sort']((_0x4c94e9,_0x4cc2c1)=>_0x4c94e9[_0x3d2927(0x2ba)]>_0x4cc2c1[_0x3d2927(0x2ba)]?0x1:_0x4cc2c1['datetime']>_0x4c94e9['datetime']?-0x1:0x0);let _0x2a3d58=0x0;for(let _0x20af82 of _0x5ae94b){await updateCoinResults(_0x20af82,!![]);}}catch(_0x3b6dfe){await handleError(_0x3b6dfe,_0x3d2927(0x195));}}async function getAllEventOrders(_0x284392){const _0x2853eb=_0x1c93ed;let _0x545864=[],_0x225858=dbLogs[_0x2853eb(0x28a)]('logs')[_0x2853eb(0x1ec)](_0x49d99b=>{const _0x3ca09d=_0x2853eb,_0x3e64d1=_0x49d99b['event'][_0x3ca09d(0x15a)]();return _0x3e64d1[_0x3ca09d(0x1b7)](_0x284392[_0x3ca09d(0x15a)]())&&(_0x3e64d1['includes'](_0x3ca09d(0x27a))&&_0x3e64d1[_0x3ca09d(0x1b7)]('order')||_0x3e64d1[_0x3ca09d(0x1b7)](_0x3ca09d(0x1cc))&&_0x3e64d1[_0x3ca09d(0x1b7)](_0x3ca09d(0x180)));})[_0x2853eb(0x159)]('time')[_0x2853eb(0x2cb)]();return _0x225858[_0x2853eb(0x221)](_0x2b06db=>{const _0x131389=_0x2853eb,_0x39df71=_0x2b06db[_0x131389(0x174)][_0x131389(0x1b7)](_0x131389(0x2a7))?_0x131389(0x2a7):_0x131389(0x190),_0x9e549f=/#([0-9]|\.)+\s/i,_0x365662=Number(_0x9e549f[_0x131389(0x19e)](_0x2b06db['event'])[0x0][_0x131389(0x144)](0x1)),_0x15080c=/@([0-9]|\.)+$/i,_0x30e9fe=Number(_0x15080c[_0x131389(0x19e)](_0x2b06db[_0x131389(0x174)])[0x0][_0x131389(0x144)](0x1));_0x545864[_0x131389(0x154)]({'datetime':_0x2b06db['time'],'coin':symbolToCoin(_0x284392),'symbol':_0x284392,'side':_0x39df71,'amount':_0x365662,'filled':_0x365662,'price':_0x30e9fe});}),_0x545864;}async function getAllOrders(_0x4882e9,_0x3510c4){const _0x2d4ac6=_0x1c93ed;let _0x5d414c=[];while(_0x3510c4<exchange[_0x2d4ac6(0x1ed)]()){const _0x18c07c=0x1f4,_0x4de4ed=await exchange['fetchClosedOrders'](_0x4882e9,_0x3510c4,_0x18c07c);if(_0x4de4ed[_0x2d4ac6(0x18b)])_0x3510c4=_0x4de4ed[_0x4de4ed[_0x2d4ac6(0x18b)]-0x1][_0x2d4ac6(0x1a9)]+0x1,_0x5d414c=_0x5d414c[_0x2d4ac6(0x216)](_0x4de4ed);else break;}return _0x5d414c;}async function validate24hChanges(){const _0x245a6d=_0x1c93ed;for(const _0xbf7174 of currentCoins){if(_0xbf7174[_0x245a6d(0x1ca)]!=config[_0x245a6d(0x279)]){let _0x3c56c6;_0xbf7174['reverse']?_0x3c56c6=formatResult((0x1/(global['change'][noslash(_0xbf7174[_0x245a6d(0x14d)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3c56c6=global[_0x245a6d(0x16e)][noslash(_0xbf7174['symbol'])],_0x3c56c6<config[_0x245a6d(0x202)]&&(logHistory(_0x245a6d(0x275),_0xbf7174['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x3c56c6+'%'),logHistory('error',_0x245a6d(0x2b1)),logHistory('error',_0x245a6d(0x2a5)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x43d488,_0x3fde80){const _0x4cfd43=_0x1c93ed;if(!_0x43d488)return!![];const _0x2b3c1d=_0x3fde80[_0x4cfd43(0x14f)]('.'),_0x564c5a=_0x43d488[_0x4cfd43(0x14f)]('.');for(var _0x149d5f=0x0;_0x149d5f<_0x564c5a['length'];_0x149d5f++){const _0x185df0=~~_0x564c5a[_0x149d5f],_0x53fd8a=~~_0x2b3c1d[_0x149d5f];if(_0x185df0<_0x53fd8a)return!![];if(_0x185df0>_0x53fd8a)return![];}return![];}async function oneTimeMigration(){const _0x3926b0=_0x1c93ed;let _0x357810=dbLogs[_0x3926b0(0x28a)](_0x3926b0(0x2c4))[_0x3926b0(0x2cb)]();if(isOlderVersion(_0x357810,_0x3926b0(0x2ad))){let _0xffe929=[];const _0x43ecd2=dbLogs[_0x3926b0(0x28a)](_0x3926b0(0x1c1))[_0x3926b0(0x2cb)]();_0x43ecd2[_0x3926b0(0x221)](_0x15a3a3=>{const _0x313b61=_0x3926b0;_0xffe929[_0x313b61(0x154)]({'time':_0x15a3a3[_0x313b61(0x14b)],'type':_0x15a3a3[_0x313b61(0x169)],'event':_0x15a3a3[_0x313b61(0x174)]});}),dbLogs['get'](_0x3926b0(0x1c1))[_0x3926b0(0x2a0)](_0xffe929)['write']();}let _0x19d012=dbConfig[_0x3926b0(0x28a)]('version')['value']();if(isOlderVersion(_0x19d012,_0x3926b0(0x2ad))){let _0x1ca2e0=dbConfig['get'](_0x3926b0(0x217))[_0x3926b0(0x1bb)]({'botID':botID})[_0x3926b0(0x2cb)]();if(_0x1ca2e0){let _0x1bcfcf=[];_0x1ca2e0[_0x3926b0(0x21d)][_0x3926b0(0x221)](_0xc879f7=>{const _0x5a2841=_0x3926b0;_0x1bcfcf['push']({'coin':_0xc879f7['coin'],'number':_0xc879f7[_0x5a2841(0x199)],'price':_0xc879f7[_0x5a2841(0x1fc)]}),delete _0xc879f7['startnumber'],delete _0xc879f7['startprice'];});if(_0x1bcfcf[_0x3926b0(0x18b)]!==0x0)fs[_0x3926b0(0x193)](configbackuppath+(_0x3926b0(0x24d)+botID+_0x3926b0(0x198)),JSON[_0x3926b0(0x18e)](_0x1bcfcf,null,0x4),function(_0x369ae4){if(_0x369ae4){}});const _0x33fff8=(_0x2cf70c,_0xa1bcc0)=>{let _0x5a6b2c=[];_0xa1bcc0['forEach'](_0x57dc00=>{const _0xf526a0=_0x21a2,_0x2bae19=_0x2cf70c[_0xf526a0(0x1bb)](_0x9f2f88=>_0x9f2f88[_0xf526a0(0x1ca)]==_0x57dc00[_0xf526a0(0x1ca)]);if(!_0x2bae19)_0x5a6b2c[_0xf526a0(0x154)](_0x57dc00);});let _0x57b2a0=[];return _0x2cf70c['forEach'](_0x4fe801=>{const _0x2399b8=_0x21a2,_0x100a55=_0xa1bcc0['find'](_0x1a1097=>_0x1a1097[_0x2399b8(0x1ca)]==_0x4fe801[_0x2399b8(0x1ca)]);if(!_0x100a55||_0x100a55['number']==0x0&&_0x4fe801[_0x2399b8(0x1fe)]!=0x0)_0x57b2a0[_0x2399b8(0x154)](_0x4fe801);}),{'missingDay1':_0x5a6b2c,'notInDay2':_0x57b2a0};},_0x3542a3=dbPerformance[_0x3926b0(0x28a)](_0x3926b0(0x2a8))[_0x3926b0(0x18c)]()['value']();if(_0x3542a3[_0x3926b0(0x18b)]>0x1){const {missingDay1:_0x297424,notInDay2:_0x43fcc8}=_0x33fff8(_0x1bcfcf,_0x3542a3[0x1][_0x3926b0(0x22e)]);_0x1bcfcf=[..._0x1bcfcf,..._0x297424],_0x43fcc8[_0x3926b0(0x221)](_0x7d9b20=>{const _0x305f2e=_0x3926b0;let _0x18c5e0=_0x1bcfcf[_0x305f2e(0x2a1)](_0x2736b8=>_0x2736b8[_0x305f2e(0x1ca)]==_0x7d9b20[_0x305f2e(0x1ca)]);_0x18c5e0!=-0x1&&_0x1bcfcf[_0x305f2e(0x2c9)](_0x18c5e0,0x1);});}_0x1bcfcf['sort']((_0x3a805e,_0x41f187)=>_0x3a805e[_0x3926b0(0x1ca)]>_0x41f187[_0x3926b0(0x1ca)]?0x1:_0x41f187['coin']>_0x3a805e[_0x3926b0(0x1ca)]?-0x1:0x0);let _0x5985da=[{'date':_0x1ca2e0[_0x3926b0(0x25f)],'changes':_0x1bcfcf}];_0x3542a3['length']>0x2&&_0x3542a3[_0x3926b0(0x221)]((_0x11ba67,_0x1cd17c)=>{const _0xc689b9=_0x3926b0;if(_0x1cd17c>0x0&&_0x1cd17c<_0x3542a3['length']-0x1){const {missingDay1:_0x36c590,notInDay2:_0x4b2715}=_0x33fff8(_0x3542a3[_0x1cd17c][_0xc689b9(0x22e)],_0x3542a3[_0x1cd17c+0x1]['coins']);_0x1bcfcf=[],(_0x36c590['length']!=0x0||_0x4b2715[_0xc689b9(0x18b)]!=0x0)&&(_0x36c590['length']!=0x0&&_0x1bcfcf['push'](..._0x36c590),_0x4b2715[_0xc689b9(0x18b)]!=0x0&&(_0x4b2715[_0xc689b9(0x221)](_0x5d7dc3=>{const _0xabc1d9=_0xc689b9;_0x5d7dc3['number']=-_0x5d7dc3[_0xabc1d9(0x1fe)];}),_0x1bcfcf[_0xc689b9(0x154)](..._0x4b2715)),_0x1bcfcf[_0xc689b9(0x2b4)]((_0x2f11ea,_0x1ee8a4)=>_0x2f11ea['coin']>_0x1ee8a4['coin']?0x1:_0x1ee8a4['coin']>_0x2f11ea[_0xc689b9(0x1ca)]?-0x1:0x0),_0x5985da[_0xc689b9(0x154)]({'date':_0x3542a3[_0x1cd17c+0x1][_0xc689b9(0x20f)],'changes':_0x1bcfcf}));}}),dbConfig['get']('bot')['find']({'botID':botID})['assign']({..._0x1ca2e0,'liquidity':_0x5985da})[_0x3926b0(0x1f3)]();}}if(isOlderVersion(_0x19d012,_0x3926b0(0x1e8))){let _0x29b80f=dbConfig[_0x3926b0(0x28a)](_0x3926b0(0x217))[_0x3926b0(0x1bb)]({'botID':botID})[_0x3926b0(0x2cb)]();if(_0x29b80f){const _0x5e68e8=_0x29b80f[_0x3926b0(0x2a9)],_0x1ad8fd=_0x5e68e8?capitalize(_0x5e68e8):_0x3926b0(0x26d);dbConfig[_0x3926b0(0x28a)](_0x3926b0(0x217))[_0x3926b0(0x1bb)]({'botID':botID})[_0x3926b0(0x2a0)]({'exchange':_0x1ad8fd})[_0x3926b0(0x1f3)]();}}let _0x554e20=dbPerformance[_0x3926b0(0x28a)]('version')['value']();isOlderVersion(_0x554e20,_0x3926b0(0x2ad))&&setStartDatePerformance();let _0x477613=dbCoinResults[_0x3926b0(0x28a)](_0x3926b0(0x2c4))[_0x3926b0(0x2cb)]();if(isOlderVersion(_0x477613,_0x3926b0(0x170))){let _0x2437f7=dbCoinResults[_0x3926b0(0x28a)](_0x3926b0(0x22e))[_0x3926b0(0x2cb)]();if(_0x2437f7[_0x3926b0(0x18b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x134955=_0x1c93ed;dbConfig[_0x134955(0x17d)](_0x134955(0x2c4),serverversion)['write'](),dbPerformance[_0x134955(0x17d)]('version',serverversion)['write'](),dbLogs[_0x134955(0x17d)](_0x134955(0x2c4),serverversion)[_0x134955(0x1f3)](),dbCoinResults[_0x134955(0x17d)](_0x134955(0x2c4),serverversion)[_0x134955(0x1f3)]();}function getConfiguration(_0x1f7039){const _0x21a952=_0x1c93ed;let _0x11f9fc=dbConfig[_0x21a952(0x28a)](_0x21a952(0x217))['find']({'botID':_0x1f7039})[_0x21a952(0x2cb)]();if(_0x11f9fc){let _0x57d4e9=![];typeof _0x11f9fc['threshold']==_0x21a952(0x2c3)&&(_0x11f9fc={..._0x11f9fc,'threshold':Number(_0x11f9fc[_0x21a952(0x2da)])},_0x57d4e9=!![]),_0x11f9fc['change24h']==null&&(_0x11f9fc={..._0x11f9fc,'change24h':-0x14},_0x57d4e9=!![]),!_0x11f9fc[_0x21a952(0x288)]&&(_0x11f9fc={..._0x11f9fc,'fiat':'USD'},_0x57d4e9=!![]),!_0x11f9fc[_0x21a952(0x29d)]&&(_0x11f9fc={..._0x11f9fc,'onepagemode':settings[_0x21a952(0x29d)]},_0x57d4e9=!![]),!_0x11f9fc[_0x21a952(0x218)]&&(_0x11f9fc={..._0x11f9fc,'colorscheme':'red_yellow_blue'},_0x57d4e9=!![]),!_0x11f9fc['autoliquidity']&&(_0x11f9fc={..._0x11f9fc,'autoliquidity':!![]},_0x57d4e9=!![]),_0x57d4e9&&(_0x11f9fc={'botID':_0x11f9fc['botID'],'exchange':_0x11f9fc[_0x21a952(0x2a9)],'apiKey':_0x11f9fc[_0x21a952(0x28e)],'apiSecret':_0x11f9fc[_0x21a952(0x223)],'apiPassword':_0x11f9fc[_0x21a952(0x2d2)],'basecoin':_0x11f9fc[_0x21a952(0x279)],'botname':_0x11f9fc[_0x21a952(0x16f)],'showname':_0x11f9fc[_0x21a952(0x26f)],'threshold':_0x11f9fc[_0x21a952(0x2da)],'ordertype':_0x11f9fc[_0x21a952(0x291)],'timeout':_0x11f9fc[_0x21a952(0x283)],'fiat':_0x11f9fc['fiat'],'startdate':_0x11f9fc[_0x21a952(0x25f)],'recreate':_0x11f9fc['recreate'],'timeshift':_0x11f9fc[_0x21a952(0x1a1)],'onepagemode':_0x11f9fc[_0x21a952(0x29d)],'headless':_0x11f9fc[_0x21a952(0x1d6)],'cooldown':_0x11f9fc[_0x21a952(0x1b1)],'change24h':_0x11f9fc[_0x21a952(0x202)],'emojibuy':_0x11f9fc['emojibuy'],'emojisell':_0x11f9fc['emojisell'],'colorscheme':_0x11f9fc[_0x21a952(0x218)],'portfolio':_0x11f9fc[_0x21a952(0x21d)],'autoliquidity':_0x11f9fc[_0x21a952(0x2bd)],'liquidity':_0x11f9fc[_0x21a952(0x1f4)],'openOrders':_0x11f9fc[_0x21a952(0x240)]},dbConfig[_0x21a952(0x28a)](_0x21a952(0x217))[_0x21a952(0x1be)]()[_0x21a952(0x1f3)](),dbConfig['get'](_0x21a952(0x217))[_0x21a952(0x154)](_0x11f9fc)[_0x21a952(0x1f3)]());}else _0x11f9fc={'botID':_0x1f7039,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x21a952(0x2cd)+_0x1f7039,'showname':![],'threshold':0x3,'ordertype':_0x21a952(0x27a),'timeout':0x14,'fiat':_0x21a952(0x21e),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x21a952(0x1a1)],'onepagemode':settings[_0x21a952(0x29d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x21a952(0x261),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x11f9fc;}function emittedConfiguration(){const _0x19b615=_0x1c93ed;let _0x44715b;if(config[_0x19b615(0x28e)]=='')_0x44715b={...config,'configstate':'initial'};else config[_0x19b615(0x28e)]==_0x19b615(0x28c)?_0x44715b={...config,'configstate':_0x19b615(0x1a5)}:(_0x44715b={...config,'apiKey':_0x19b615(0x146),'apiSecret':_0x19b615(0x146)},config[_0x19b615(0x2d2)]&&(_0x44715b[_0x19b615(0x2d2)]=_0x19b615(0x146)));return _0x44715b;}function getSettings(){const _0x364fba=_0x1c93ed;return dbSettings[_0x364fba(0x28a)](_0x364fba(0x2a6))[_0x364fba(0x2cb)]();}function getSecure(){const _0x599994=_0x1c93ed;return dbSecure[_0x599994(0x28a)](_0x599994(0x287))[_0x599994(0x2cb)]()||{};}function updateTimeshift(_0x5cba06){const _0x7d1a08=_0x1c93ed;let _0x321364=dbConfig[_0x7d1a08(0x28a)]('bot')[_0x7d1a08(0x1bb)]({'botID':botID})[_0x7d1a08(0x2cb)]();_0x321364&&dbConfig[_0x7d1a08(0x28a)]('bot')[_0x7d1a08(0x1bb)]({'botID':botID})[_0x7d1a08(0x2a0)]({'timeshift':_0x5cba06})[_0x7d1a08(0x1f3)](),config[_0x7d1a08(0x1a1)]=_0x5cba06,proxyEmit(_0x7d1a08(0x1ac),emittedConfiguration());}function updateOnepagemode(_0x308812){const _0x204294=_0x1c93ed;let _0x370427=dbConfig[_0x204294(0x28a)](_0x204294(0x217))[_0x204294(0x1bb)]({'botID':botID})[_0x204294(0x2cb)]();_0x370427&&dbConfig[_0x204294(0x28a)](_0x204294(0x217))[_0x204294(0x1bb)]({'botID':botID})[_0x204294(0x2a0)]({'onepagemode':_0x308812})[_0x204294(0x1f3)](),config[_0x204294(0x29d)]=_0x308812,proxyEmit(_0x204294(0x1ac),emittedConfiguration());}async function storeConfiguration(_0x4e63dc){const _0x38de27=_0x1c93ed;logger['debug'](_0x38de27(0x1c2));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x38de27(0x1ff)](_0x38de27(0x1f8));let _0x2c2067=[],_0x1d6d8b=![],_0x1e7ede=![],_0x1a9e3f=[];_0x4e63dc[_0x38de27(0x21d)][_0x38de27(0x221)](_0x172a23=>{const _0x286f77=_0x38de27;if(!_0x172a23[_0x286f77(0x298)]&&_0x172a23[_0x286f77(0x1ca)]!=_0x4e63dc[_0x286f77(0x279)])_0x1a9e3f[_0x286f77(0x154)](_0x172a23['symbol']);}),_0x1a9e3f['forEach'](_0xa43038=>{const _0x24904a=watchedSymbols['includes'](_0xa43038);!_0x24904a&&_0x2c2067['push'](_0xa43038);}),_0x1a9e3f[_0x38de27(0x221)](_0x4d9030=>{const _0x5ce82f=_0x38de27,_0x21b185=currentCoins[_0x5ce82f(0x1bb)](_0x4989fb=>_0x4989fb[_0x5ce82f(0x14d)]==_0x4d9030);!_0x21b185&&(_0x1d6d8b=!![]);}),currentCoins[_0x38de27(0x221)](_0x3b6eb4=>{const _0x36b627=_0x38de27;if(_0x3b6eb4[_0x36b627(0x1ca)]!=config[_0x36b627(0x279)]){const _0x4c6787=_0x1a9e3f[_0x36b627(0x1bb)](_0x8b6fdd=>_0x8b6fdd==_0x3b6eb4['symbol']);!_0x4c6787&&(_0x1d6d8b=!![]);}}),_0x4e63dc[_0x38de27(0x21d)]['forEach'](_0x5c356a=>{const _0x373be2=_0x38de27,_0x1ab974=config[_0x373be2(0x21d)][_0x373be2(0x1bb)](_0x55bbcd=>_0x55bbcd[_0x373be2(0x1ca)]==_0x5c356a[_0x373be2(0x1ca)]);if(_0x1ab974&&_0x5c356a['offset']!=_0x1ab974[_0x373be2(0x1b6)])_0x1e7ede=!![];});let _0x2f1b7c=dbConfig['get'](_0x38de27(0x217))[_0x38de27(0x1bb)]({'botID':botID})[_0x38de27(0x2cb)]();_0x4e63dc={..._0x4e63dc,'apiKey':crypt['decrypt'](secure[_0x38de27(0x1e0)],_0x4e63dc['apiKey'])['message'],'apiSecret':crypt[_0x38de27(0x1a6)](secure[_0x38de27(0x1e0)],_0x4e63dc[_0x38de27(0x223)])[_0x38de27(0x271)]};_0x4e63dc[_0x38de27(0x2d2)]&&(_0x4e63dc[_0x38de27(0x2d2)]=crypt[_0x38de27(0x1a6)](secure[_0x38de27(0x1e0)],_0x4e63dc['apiPassword'])[_0x38de27(0x271)]);let _0x544664=![];if(_0x2f1b7c){_0x4e63dc['apiKey']=='************'?_0x4e63dc[_0x38de27(0x28e)]=config[_0x38de27(0x28e)]:_0x544664=!![];_0x4e63dc[_0x38de27(0x223)]==_0x38de27(0x146)?_0x4e63dc['apiSecret']=config[_0x38de27(0x223)]:_0x544664=!![];if(_0x4e63dc[_0x38de27(0x2d2)]==_0x38de27(0x146))_0x4e63dc[_0x38de27(0x2d2)]=config[_0x38de27(0x2d2)];else{if(_0x4e63dc['apiPassword'])_0x544664=!![];}dbConfig[_0x38de27(0x28a)](_0x38de27(0x217))[_0x38de27(0x1bb)]({'botID':botID})['assign'](_0x4e63dc)[_0x38de27(0x1f3)]();}else dbConfig['get'](_0x38de27(0x217))[_0x38de27(0x154)](_0x4e63dc)['write'](),_0x544664=!![],process['send']({'status':_0x38de27(0x1d8),'live':_0x38de27(0x2ac)},_0x1c40cc=>{});process[_0x38de27(0x295)]({'botname':_0x4e63dc[_0x38de27(0x16f)]},_0xa513fd=>{}),updateBotManager(),config={..._0x4e63dc},proxyEmit(_0x38de27(0x267)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x544664)await reset(_0x2c2067,!![]);else _0x1d6d8b||_0x1e7ede?await reset(_0x2c2067,![]):getBalances();blockTransactionDetection=![],logger[_0x38de27(0x1ff)](_0x38de27(0x26e));}async function storeHeadless(_0x30c47d){const _0x40628a=_0x1c93ed,_0x5a2c0f={...config,'headless':_0x30c47d[_0x40628a(0x1d6)]};let _0x1251db=dbConfig[_0x40628a(0x28a)]('bot')[_0x40628a(0x1bb)]({'botID':botID})[_0x40628a(0x2cb)]();_0x1251db&&dbConfig[_0x40628a(0x28a)](_0x40628a(0x217))[_0x40628a(0x1bb)]({'botID':botID})['assign'](_0x5a2c0f)[_0x40628a(0x1f3)](),config={..._0x5a2c0f},updateBotManager(),proxyEmit(_0x40628a(0x1ac),emittedConfiguration());}async function storeFiat(_0x9585a9){const _0x5a8863=_0x1c93ed,_0x5999f3={...config,'fiat':_0x9585a9};let _0x1b5959=dbConfig['get'](_0x5a8863(0x217))[_0x5a8863(0x1bb)]({'botID':botID})[_0x5a8863(0x2cb)]();_0x1b5959&&dbConfig[_0x5a8863(0x28a)](_0x5a8863(0x217))[_0x5a8863(0x1bb)]({'botID':botID})[_0x5a8863(0x2a0)](_0x5999f3)['write'](),config={..._0x5999f3},proxyEmit(_0x5a8863(0x1ac),emittedConfiguration());}function resetHistory(){const _0x2aee62=_0x1c93ed;logger[_0x2aee62(0x1da)](_0x2aee62(0x2b2));try{if(fs[_0x2aee62(0x2be)](path[_0x2aee62(0x15f)](configpath,_0x2aee62(0x276)+botID+_0x2aee62(0x2cf))))fs[_0x2aee62(0x220)](path[_0x2aee62(0x15f)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x2aee62(0x2be)](path['join'](configpath,'bot-'+botID+_0x2aee62(0x215))))fs[_0x2aee62(0x220)](path[_0x2aee62(0x15f)](configpath,'bot-'+botID+_0x2aee62(0x215)));if(fs[_0x2aee62(0x2be)](path[_0x2aee62(0x15f)](configpath,_0x2aee62(0x276)+botID+_0x2aee62(0x2cc))))fs['unlinkSync'](path['join'](configpath,_0x2aee62(0x276)+botID+_0x2aee62(0x2cc)));}catch(_0x47024b){if(_0x47024b)logger[_0x2aee62(0x1da)]('Error\x20while\x20deleting\x20files:\x20',_0x47024b);}const _0x38dd93=getDate();let _0x587c9a=[];currentCoins['forEach'](_0x840ae0=>{const _0xb4b8ec=_0x2aee62;_0x587c9a[_0xb4b8ec(0x154)]({'coin':_0x840ae0['coin'],'number':_0x840ae0[_0xb4b8ec(0x1fe)],'price':_0x840ae0['last']});});let _0x24f971=dbConfig['get'](_0x2aee62(0x217))[_0x2aee62(0x1bb)]({'botID':botID})[_0x2aee62(0x2cb)]();_0x24f971&&(dbConfig['get'](_0x2aee62(0x217))[_0x2aee62(0x1bb)]({'botID':botID})[_0x2aee62(0x2a0)]({'liquidity':[{'date':_0x38dd93,'changes':_0x587c9a}]})[_0x2aee62(0x1f3)](),config[_0x2aee62(0x1f4)]=[]),process[_0x2aee62(0x295)]({'stop':_0x2aee62(0x263)},_0x5def34=>{});}function noslash(_0x37878e){return _0x37878e['replace']('/','');}function updateHighestFee(_0x5f199b,_0x3fe0d4){const _0x3bcc28=_0x1c93ed;lastFees[_0x3bcc28(0x29f)]=_0x5f199b,lastFees[_0x3bcc28(0x241)][_0x3bcc28(0x18b)]===0x14&&lastFees[_0x3bcc28(0x241)][_0x3bcc28(0x19b)](),lastFees[_0x3bcc28(0x241)][_0x3bcc28(0x154)](_0x3fe0d4),lastFees[_0x3bcc28(0x2b7)]=Math[_0x3bcc28(0x1bd)](...lastFees[_0x3bcc28(0x241)]);}async function updateNumberCoinsCcxt(_0x3ad95d){const _0x51545f=_0x1c93ed;logger['debug'](_0x51545f(0x175)+_0x3ad95d['symbol']+_0x51545f(0x149)+_0x3ad95d[_0x51545f(0x2ae)]+'\x20|\x20'+_0x3ad95d['id']);let _0x13200e=_0x3ad95d[_0x51545f(0x2ae)],_0x49c4c7=![];currentCoins[_0x51545f(0x221)](_0x4084c0=>{const _0x492d67=_0x51545f;_0x4084c0['symbol']==_0x3ad95d[_0x492d67(0x14d)]&&(_0x49c4c7=!![]);});if(!_0x49c4c7)return;const _0x5329ec=currentCoins[_0x51545f(0x1bb)](_0x14a2a2=>_0x14a2a2[_0x51545f(0x14d)]==_0x3ad95d[_0x51545f(0x14d)]),_0x33d704=_0x1ffd8e=>{if(_0x5329ec)_0x5329ec['orderstatus']=_0x1ffd8e;};if(_0x13200e=='open')_0x33d704(_0x51545f(0x25d));else{if(_0x13200e==_0x51545f(0x156)){_0x33d704(_0x51545f(0x156));const _0x343efd=await getCoins();[currentCoins,currentCoinsAll]=_0x343efd,await getOpenOrders(),handleOpenOrders();}else{if(_0x13200e==_0x51545f(0x1d5)){logger[_0x51545f(0x1ff)](_0x51545f(0x1ad)+_0x3ad95d[_0x51545f(0x14d)]+_0x51545f(0x149)+_0x3ad95d[_0x51545f(0x1cc)]+_0x51545f(0x149)+_0x3ad95d['id']);let _0x542712=![];if(lastOrders)for(const _0x49277d of lastOrders){const _0x5e7a15=0xc8,_0x3defa7=0x1388;let _0x379c2e=0x0;while(!_0x49277d[_0x51545f(0x1a4)]&&_0x379c2e*_0x5e7a15<_0x3defa7){_0x379c2e++,await sleep(_0x5e7a15);}if(_0x379c2e>0x0)logger[_0x51545f(0x1ff)](_0x51545f(0x1d4)+_0x379c2e*_0x5e7a15/0x3e8+_0x51545f(0x1a8));if(_0x49277d[_0x51545f(0x1a4)]==_0x3ad95d['id']){logger[_0x51545f(0x1ff)](_0x51545f(0x201)+_0x3ad95d['id']),_0x542712=!![];if(_0x49277d[_0x51545f(0x1cc)]==0x0){logger[_0x51545f(0x1ff)](_0x51545f(0x1ea)+_0x3ad95d['id']);if(_0x3ad95d[_0x51545f(0x22d)])_0x49277d['price']=_0x3ad95d[_0x51545f(0x22d)];else{if(_0x3ad95d[_0x51545f(0x286)])_0x49277d[_0x51545f(0x286)]=_0x3ad95d[_0x51545f(0x286)];else{}}_0x49277d['filled']=_0x3ad95d['filled'],_0x49277d[_0x51545f(0x196)]={'currency':_0x3ad95d[_0x51545f(0x196)]?_0x3ad95d[_0x51545f(0x196)][_0x51545f(0x29f)]:null,'cost':_0x3ad95d[_0x51545f(0x196)]?_0x3ad95d['fee'][_0x51545f(0x23c)]:0x0},updateHighestFee(_0x49277d[_0x51545f(0x196)][_0x51545f(0x29f)],_0x49277d[_0x51545f(0x196)][_0x51545f(0x23c)]),_0x33d704(_0x51545f(0x1cc)),await validateOrders();if(lockOrders==ORDERS[_0x51545f(0x19d)]){const _0x35924c=await getCoins();[currentCoins,currentCoinsAll]=_0x35924c;}await updateCoinResults(_0x49277d);}}}if(!_0x542712){logger['debug'](_0x51545f(0x29a)+_0x3ad95d['id']),_0x33d704(_0x51545f(0x1cc));const _0x2ca2e2=await getCoins();[currentCoins,currentCoinsAll]=_0x2ca2e2,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x37f418=JSON['parse'](lastBalances[_0x51545f(0x21d)]);const _0x254a08=_0x37f418[_0x51545f(0x1bb)](_0xc81ef8=>_0xc81ef8[_0x51545f(0x14d)]==_0x3ad95d['symbol']);if(_0x254a08){if(_0x13200e==_0x51545f(0x25d))_0x254a08['orderstatus']=_0x254a08[_0x51545f(0x231)]==_0x51545f(0x1cc)?_0x51545f(0x1cc):_0x51545f(0x25d);else{if(_0x13200e==_0x51545f(0x156))_0x254a08[_0x51545f(0x231)]=_0x254a08[_0x51545f(0x231)]=='filled'?_0x51545f(0x1cc):_0x51545f(0x156);else _0x13200e==_0x51545f(0x1d5)&&(_0x254a08['orderstatus']=_0x51545f(0x1cc));}}lastBalances={...lastBalances,'portfolio':JSON[_0x51545f(0x18e)](_0x37f418)},proxyEmit(_0x51545f(0x227),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x146096=_0x1c93ed;await getOpenOrders();let _0x36df7a=![];currentCoins[_0x146096(0x221)](_0x11598d=>{const _0x4b112c=_0x146096;_0x36df7a=allOpenOrders[_0x4b112c(0x1bb)](_0x152ad4=>_0x152ad4[_0x4b112c(0x14d)]==_0x11598d[_0x4b112c(0x14d)]),_0x11598d[_0x4b112c(0x231)]=_0x36df7a?_0x4b112c(0x25d):'none';});}async function getCoins(_0x22f939=!![],_0x884295=config[_0x1c93ed(0x279)]){const _0x41b593=_0x1c93ed;let _0x1c5431,_0xcb29b1=[],_0x931404=[],_0x48bdef=[],_0x2a157c=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1c5431=await exchange['fetchBalance'](),mybalances=_0x1c5431[_0x41b593(0x258)];for(const [_0x23ab9a,_0x15b7fc]of Object[_0x41b593(0x289)](mybalances)){_0x2a157c[_0x41b593(0x154)](_0x23ab9a);}if(_0x884295=='')for(const [_0x2e4d86,_0x3a6cfd]of Object[_0x41b593(0x289)](mybalances)){_0x3a6cfd!=0x0&&_0x931404[_0x41b593(0x154)]({'coin':_0x2e4d86});}else{let _0x102ef6=![];for(const [_0x1eb0ee,_0x46c321]of Object['entries'](mybalances)){if(_0x2a157c[_0x41b593(0x1b7)](_0x1eb0ee)){const _0x52fdc2=config[_0x41b593(0x21d)][_0x41b593(0x1bb)](_0x3c43da=>_0x3c43da['coin']==_0x1eb0ee),_0x1d98f7=_0x1eb0ee+'/'+_0x884295,_0x45c88c=_0x884295+'/'+_0x1eb0ee,_0x3c43a5=currentCoins['find'](_0x26a09b=>_0x26a09b[_0x41b593(0x1ca)]==_0x1eb0ee);_0x102ef6=![];if((_0x46c321!=0x0||_0x52fdc2)&&(allSymbols[_0x41b593(0x1b7)](_0x1d98f7)||_0x1eb0ee==_0x884295))_0x1eb0ee!=_0x884295&&_0xcb29b1[_0x41b593(0x154)](_0x1d98f7),_0x931404[_0x41b593(0x154)]({'coin':_0x1eb0ee,'symbol':_0x1d98f7,'reverse':![],'number':Math[_0x41b593(0x1bd)](_0x46c321+(_0x52fdc2&&_0x52fdc2[_0x41b593(0x1b6)]||0x0),0x0),'orderstatus':_0x3c43a5?_0x3c43a5[_0x41b593(0x231)]:_0x41b593(0x27d)});else(_0x46c321!=0x0||_0x52fdc2)&&allSymbols[_0x41b593(0x1b7)](_0x45c88c)&&(_0x1eb0ee!=_0x884295&&_0xcb29b1[_0x41b593(0x154)](_0x45c88c),_0x931404['push']({'coin':_0x1eb0ee,'symbol':_0x45c88c,'reverse':!![],'number':Math[_0x41b593(0x1bd)](_0x46c321+(_0x52fdc2&&_0x52fdc2['offset']||0x0),0x0),'orderstatus':_0x3c43a5?_0x3c43a5[_0x41b593(0x231)]:'none'}));}}}}catch(_0x252824){if(!_0x22f939)handleErrorNoStop(_0x252824,_0x41b593(0x16d));else await handleError(_0x252824,_0x41b593(0x16d));}return _0x48bdef=cloneDeep(_0x931404),_0x931404=_0x931404[_0x41b593(0x1ec)](_0xf0ed18=>{const _0x4f3c6e=_0x41b593,_0x5d5464=config[_0x4f3c6e(0x21d)][_0x4f3c6e(0x1bb)](_0x409533=>_0x409533[_0x4f3c6e(0x1ca)]==_0xf0ed18['coin']);return _0x5d5464&&!_0x5d5464[_0x4f3c6e(0x298)];}),[_0x931404,_0x48bdef];}async function getCoinNumber(_0x58edbb){const _0x42b326=_0x1c93ed;let _0x187e24;try{const _0xd6013e=await exchange[_0x42b326(0x266)]();_0x187e24=_0xd6013e['total'][_0x58edbb];}catch(_0x3f87c2){await handleError(_0x3f87c2,_0x42b326(0x1f7));}return _0x187e24;}async function getOpenOrders(){const _0x3a69bb=_0x1c93ed;let _0x3c1177;allOpenOrders=[];try{for(const _0x500539 of config[_0x3a69bb(0x21d)]){!_0x500539['excluded']&&_0x500539['coin']!=config[_0x3a69bb(0x279)]&&(_0x3c1177=await exchange[_0x3a69bb(0x1d9)](_0x500539[_0x3a69bb(0x14d)]),_0x3c1177[_0x3a69bb(0x18b)]>0x0&&allOpenOrders['push'](_0x3c1177[0x0]));}}catch(_0xa17e3c){await handleError(_0xa17e3c,_0x3a69bb(0x2d4));}}async function handleOpenOrders(_0x51e70e=0x0){const _0x5ee87f=_0x1c93ed;allOpenOrders[_0x5ee87f(0x18b)]==0x0&&lockOrders==ORDERS[_0x5ee87f(0x19d)]&&allOrdersPlaced&&(_0x51e70e==0x0?(logger[_0x5ee87f(0x1ff)]('1\x20-\x20Handle\x20open\x20orders'),_0x51e70e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5ee87f(0x1ff)](_0x5ee87f(0x29b)),validateOrders(_0x5ee87f(0x181))));}async function testAPI(_0x1f2c8d){const _0x2ae9ab=_0x1c93ed,_0x1311a2=ccxt[_0x1f2c8d[_0x2ae9ab(0x2a9)][_0x2ae9ab(0x15a)]()],_0x507111=new _0x1311a2({'apiKey':_0x1f2c8d[_0x2ae9ab(0x28e)],'secret':_0x1f2c8d['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x1f2c8d['exchange']==_0x2ae9ab(0x253)&&(_0x507111[_0x2ae9ab(0x278)]={'defaultType':'spot'});if(_0x1f2c8d[_0x2ae9ab(0x2d2)])_0x507111[_0x2ae9ab(0x206)]=_0x1f2c8d[_0x2ae9ab(0x2d2)];try{await _0x507111[_0x2ae9ab(0x277)]();}catch(_0x1ea972){throw _0x1ea972;}}function _0x21a2(_0x4f4a53,_0x174a8b){const _0x2b48c7=_0x103d();return _0x21a2=function(_0x7b0cf,_0x2eb850){_0x7b0cf=_0x7b0cf-0x144;let _0x103d5e=_0x2b48c7[_0x7b0cf];return _0x103d5e;},_0x21a2(_0x4f4a53,_0x174a8b);}function cloneDeep(_0x4e479b){const _0x1d77f0=_0x1c93ed;return JSON[_0x1d77f0(0x197)](JSON[_0x1d77f0(0x18e)](_0x4e479b));}async function getPortfolio(_0x3d9a5a){const _0x3e685e=_0x1c93ed;let _0x57e7ea=[],_0x113f52=[],_0x186ecd=[],_0x255f1e;if(_0x3d9a5a[_0x3e685e(0x28e)]!==_0x3e685e(0x146)||_0x3d9a5a[_0x3e685e(0x223)]!==_0x3e685e(0x146)||_0x3d9a5a[_0x3e685e(0x2d2)]&&_0x3d9a5a[_0x3e685e(0x2d2)]!==_0x3e685e(0x146)){if(config[_0x3e685e(0x2a9)]){if(_0x3d9a5a[_0x3e685e(0x28e)]==_0x3e685e(0x146))_0x3d9a5a[_0x3e685e(0x28e)]=config[_0x3e685e(0x28e)];if(_0x3d9a5a[_0x3e685e(0x223)]==_0x3e685e(0x146))_0x3d9a5a['apiSecret']=config[_0x3e685e(0x223)];if(_0x3d9a5a[_0x3e685e(0x2d2)]==_0x3e685e(0x146))_0x3d9a5a[_0x3e685e(0x2d2)]=config[_0x3e685e(0x2d2)];try{await testAPI(_0x3d9a5a);}catch(_0x22e4e9){if(_0x22e4e9['toString']()[_0x3e685e(0x1b7)](_0x3e685e(0x24f))){logger[_0x3e685e(0x1ff)](_0x3e685e(0x2d7)),proxyEmit(_0x3e685e(0x21d),![]);return;}else{handleError(_0x22e4e9,'getPortfolio(0)');return;}}}await initExchange(_0x3d9a5a['exchange'],_0x3d9a5a[_0x3e685e(0x28e)],_0x3d9a5a[_0x3e685e(0x223)],_0x3d9a5a[_0x3e685e(0x2d2)]);try{await loadSymbols(_0x3d9a5a[_0x3e685e(0x2a9)],!![]);}catch(_0x535b49){if(_0x535b49[_0x3e685e(0x187)]()['includes'](_0x3e685e(0x24f))){proxyEmit(_0x3e685e(0x21d),![]);return;}else{handleError(_0x535b49,_0x3e685e(0x1b8));return;}}const _0xf87bf3=await getCoins(![],_0x3d9a5a[_0x3e685e(0x279)]);_0x186ecd=cloneDeep(_0xf87bf3[0x1]);}else _0x186ecd=cloneDeep(currentCoinsAll);if(_0x3d9a5a[_0x3e685e(0x279)]=='')proxyEmit(_0x3e685e(0x21d),_0x186ecd);else{_0x186ecd[_0x3e685e(0x221)](_0xde6067=>{const _0x3eb381=_0x3e685e;if(_0xde6067[_0x3eb381(0x1ca)]!=_0x3d9a5a[_0x3eb381(0x279)])_0x57e7ea['push'](_0xde6067['symbol']);});try{_0x113f52=await exchange[_0x3e685e(0x2b6)](_0x57e7ea);}catch(_0x20ba69){if(_0x20ba69[_0x3e685e(0x187)]()[_0x3e685e(0x1b7)]('AuthenticationError')){proxyEmit(_0x3e685e(0x21d),![]);return;}else{handleError(_0x20ba69,_0x3e685e(0x177));return;}}_0x186ecd[_0x3e685e(0x221)](_0xa6fe2e=>{const _0x55f9fc=_0x3e685e;_0xa6fe2e[_0x55f9fc(0x1ca)]!=_0x3d9a5a[_0x55f9fc(0x279)]?_0x255f1e=_0xa6fe2e['reverse']?0x1/_0x113f52[_0xa6fe2e['symbol']][_0x55f9fc(0x1e4)]:_0x113f52[_0xa6fe2e[_0x55f9fc(0x14d)]][_0x55f9fc(0x1e4)]:_0x255f1e=0x1,_0xa6fe2e[_0x55f9fc(0x286)]=formatResult(_0x255f1e,0x8);}),proxyEmit(_0x3e685e(0x21d),_0x186ecd);}}function truncateTradeAmount(_0x3816ff,_0xde499b){const _0x4e7aa6=_0x1c93ed;let _0x7ea3b5=0x0;try{_0x7ea3b5=exchange[_0x4e7aa6(0x19c)](_0x3816ff,_0xde499b);}catch(_0x3d61d2){}return _0x7ea3b5;}function checkMinimums(_0x304d08){const _0x901cc2=_0x1c93ed;let _0x5d1b69=!![];const _0x4fcadd=!_0x304d08[_0x901cc2(0x178)]?markets[_0x304d08[_0x901cc2(0x14d)]][_0x901cc2(0x29c)]['amount'][_0x901cc2(0x23e)]:markets[_0x304d08['symbol']][_0x901cc2(0x29c)]['cost']['min'],_0x335dae=!_0x304d08[_0x901cc2(0x178)]?markets[_0x304d08[_0x901cc2(0x14d)]][_0x901cc2(0x29c)][_0x901cc2(0x23c)][_0x901cc2(0x23e)]:markets[_0x304d08[_0x901cc2(0x14d)]][_0x901cc2(0x29c)][_0x901cc2(0x1bf)][_0x901cc2(0x23e)],_0x31e0a6=truncateTradeAmount(_0x304d08[_0x901cc2(0x14d)],_0x304d08[_0x901cc2(0x1d0)]);_0x304d08[_0x901cc2(0x1d0)]=_0x31e0a6;if(Math[_0x901cc2(0x1db)](_0x31e0a6)<_0x4fcadd)_0x5d1b69=![];if(Math[_0x901cc2(0x1db)](_0x31e0a6)*_0x304d08[_0x901cc2(0x1e4)]<_0x335dae)_0x5d1b69=![];if(_0x304d08['side']=='sell'){let _0x3a1365=config['portfolio'][_0x901cc2(0x1bb)](_0x3c65a6=>_0x3c65a6[_0x901cc2(0x1ca)]==_0x304d08['coin']);if(_0x3a1365[_0x901cc2(0x1b6)]>0x0){if(Math['abs'](_0x31e0a6)>_0x304d08[_0x901cc2(0x1fe)]-_0x3a1365[_0x901cc2(0x1b6)])_0x5d1b69=![];}else{if(Math[_0x901cc2(0x1db)](_0x31e0a6)>_0x304d08[_0x901cc2(0x1fe)])_0x5d1b69=![];}}if(_0x304d08['side']==_0x901cc2(0x190)){let _0x4e4cb0=config['portfolio'][_0x901cc2(0x1bb)](_0x1ec1fc=>_0x1ec1fc[_0x901cc2(0x1ca)]==config['basecoin']),_0x102379=currentCoins['find'](_0x29d1bf=>_0x29d1bf['coin']==config['basecoin']);if(_0x4e4cb0[_0x901cc2(0x1b6)]>0x0){if(Math[_0x901cc2(0x1db)](_0x31e0a6)*_0x304d08['last']>_0x102379['number']-_0x4e4cb0[_0x901cc2(0x1b6)])_0x5d1b69=![];}else{if(Math['abs'](_0x31e0a6)*_0x304d08[_0x901cc2(0x1e4)]>_0x102379[_0x901cc2(0x1fe)])_0x5d1b69=![];}}return _0x5d1b69;}async function getBalances(_0xa4503e=!![]){const _0x40eaf3=_0x1c93ed;let _0x1ccd48=0x0,_0x177a32;const _0x3bd0b6=config['threshold'];if(config[_0x40eaf3(0x1d6)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x40eaf3(0x221)](_0x38c961=>{const _0x54813d=_0x40eaf3;if(_0x38c961['coin']!=config[_0x54813d(0x279)]){let _0x1a145c=global[_0x54813d(0x17b)][noslash(_0x38c961[_0x54813d(0x14d)])];_0x177a32=_0x38c961['reverse']?0x1/_0x1a145c:_0x1a145c;}else _0x177a32=0x1;let _0x57d354=_0x38c961[_0x54813d(0x1fe)]*_0x177a32;_0x1ccd48+=_0x57d354,_0x38c961[_0x54813d(0x1e4)]=formatResult(Number(_0x177a32),0x8),_0x38c961[_0x54813d(0x2cb)]=_0x57d354;}),currentCoins[_0x40eaf3(0x221)](_0x3ae478=>{const _0x3612ca=_0x40eaf3;let _0xb05479=config[_0x3612ca(0x21d)][_0x3612ca(0x1bb)](_0x295951=>_0x295951[_0x3612ca(0x1ca)]==_0x3ae478[_0x3612ca(0x1ca)]),_0x57a623=Number(_0xb05479[_0x3612ca(0x255)]),_0x1b2e81=_0x3ae478['value']/_0x1ccd48*0x64,_0x4ab227=_0x57a623*_0x1ccd48/0x64/_0x3ae478['last']-_0x3ae478[_0x3612ca(0x1fe)];_0x3ae478[_0x3612ca(0x255)]=formatResult(_0x1b2e81,0x3),_0x3ae478[_0x3612ca(0x16b)]=formatResult(_0x57a623,0x3),_0x3ae478['trade']=formatResult(_0x4ab227,0x8),_0x3ae478[_0x3612ca(0x2b3)]='',_0x3ae478[_0x3612ca(0x2d9)]=![];if(_0x3ae478[_0x3612ca(0x1ca)]!=config['basecoin']){if(_0x3ae478[_0x3612ca(0x255)]>_0x57a623)_0x3ae478[_0x3612ca(0x2b3)]=_0x3612ca(0x2a7),_0x3ae478[_0x3612ca(0x2d9)]=checkMinimums(_0x3ae478);else _0x3ae478[_0x3612ca(0x255)]<_0x57a623&&(_0x3ae478['side']=_0x3612ca(0x190),_0x3ae478[_0x3612ca(0x2d9)]=checkMinimums(_0x3ae478));}_0x3ae478['delta']=_0x3ae478['distribution']/_0x3ae478[_0x3612ca(0x16b)]-0x1;if(_0x3ae478[_0x3612ca(0x231)]==_0x3612ca(0x1cc)||_0x3ae478['orderstatus']=='canceled')_0x3ae478['orderstatus']=_0x3612ca(0x27d);}),currentCoins[_0x40eaf3(0x2b4)]((_0x2c96ec,_0x5f275d)=>_0x2c96ec[_0x40eaf3(0x2ca)]<_0x5f275d[_0x40eaf3(0x2ca)]?0x1:_0x5f275d[_0x40eaf3(0x2ca)]<_0x2c96ec[_0x40eaf3(0x2ca)]?-0x1:0x0);const _0x1db975=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1db975['eur'],'usd':_0x1db975[_0x40eaf3(0x1eb)],'portfolio':JSON[_0x40eaf3(0x18e)](currentCoins),'threshold':_0x3bd0b6},proxyEmit(_0x40eaf3(0x227),{'serverversion':serverversion,'balances':lastBalances});if(_0xa4503e){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x3bd0b6});else{if(lockOrders==ORDERS[_0x40eaf3(0x27c)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3bd0b6});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4706a2=getNormalizedPerformance();getStartingBalances(_0x4706a2),emitPerformance(_0x4706a2);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4a498a=getNormalizedPerformance();emitPerformance(_0x4a498a),getStartingBalances(_0x4a498a),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2f26f4=_0x1c93ed;if(!lastBalances)return;let _0xfd4cc1=[],_0x24e674,_0x4cb018=JSON['parse'](lastBalances[_0x2f26f4(0x21d)]);_0x4cb018[_0x2f26f4(0x2b4)]((_0x2b1a2a,_0x5470fb)=>_0x2b1a2a['coin']>_0x5470fb[_0x2f26f4(0x1ca)]?0x1:_0x5470fb['coin']>_0x2b1a2a[_0x2f26f4(0x1ca)]?-0x1:0x0),_0x4cb018[_0x2f26f4(0x221)](_0x3a7de7=>{const _0x3d4713=_0x2f26f4;let _0x3b0abd={'coin':_0x3a7de7[_0x3d4713(0x1ca)],'number':_0x3a7de7['number'],'price':_0x3a7de7[_0x3d4713(0x1e4)]};_0xfd4cc1[_0x3d4713(0x154)](_0x3b0abd);});const _0xe04c2b=await getFiat();_0x24e674={'date':lastBalances[_0x2f26f4(0x14b)]['split']('\x20')[0x0],'eur':_0xe04c2b['eur'],'usd':_0xe04c2b[_0x2f26f4(0x1eb)],'coins':_0xfd4cc1};let _0x4b2fb1=dbPerformance[_0x2f26f4(0x28a)]('data')[_0x2f26f4(0x1bb)]({'date':_0x24e674[_0x2f26f4(0x20f)]})['value']();_0x4b2fb1?_0x24e674['date']!=config[_0x2f26f4(0x25f)]&&dbPerformance[_0x2f26f4(0x28a)]('data')['find']({'date':_0x24e674[_0x2f26f4(0x20f)]})['assign'](_0x24e674)['write']():dbPerformance['get'](_0x2f26f4(0x2a8))[_0x2f26f4(0x154)](_0x24e674)[_0x2f26f4(0x1f3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3c3545=_0x1c93ed;let _0x782e11=[];if(dbPerformance[_0x3c3545(0x23b)](_0x3c3545(0x2a8))[_0x3c3545(0x2cb)]()){let _0x46c68a=dbPerformance[_0x3c3545(0x28a)](_0x3c3545(0x2a8))[_0x3c3545(0x18c)]()['filter'](_0x2e496f=>{const _0x32494=_0x3c3545;if(_0x2e496f[_0x32494(0x22e)]['length']==0x0)return![];else return!![];})[_0x3c3545(0x159)](_0x3c3545(0x20f))[_0x3c3545(0x2cb)](),_0x3fcaf7=[...config[_0x3c3545(0x1f4)]];_0x3fcaf7[_0x3c3545(0x2b4)]((_0x2c4771,_0x5f2a63)=>_0x2c4771[_0x3c3545(0x20f)]>_0x5f2a63[_0x3c3545(0x20f)]?-0x1:_0x5f2a63[_0x3c3545(0x20f)]>_0x2c4771['date']?0x1:0x0);let _0x384048=0x1,_0x118bff=[],_0x21f0e0=0x0;_0x46c68a[_0x3c3545(0x144)]()[_0x3c3545(0x178)]()['forEach']((_0x3bef38,_0x112e88)=>{const _0x135fbb=_0x3c3545;if(_0x3fcaf7[_0x21f0e0]){if(_0x46c68a[_0x46c68a['length']-_0x112e88]&&_0x3fcaf7[_0x21f0e0][_0x135fbb(0x20f)]==_0x46c68a[_0x46c68a['length']-_0x112e88][_0x135fbb(0x20f)]){if(_0x112e88<_0x46c68a[_0x135fbb(0x18b)]){let _0x2ee361=0x0,_0x2d664f=0x0;_0x46c68a[_0x46c68a[_0x135fbb(0x18b)]-_0x112e88][_0x135fbb(0x22e)]['forEach'](_0x1beb40=>{const _0x9d3c3a=_0x135fbb;_0x2d664f+=_0x1beb40[_0x9d3c3a(0x1fe)]*_0x1beb40[_0x9d3c3a(0x286)];}),_0x3fcaf7[_0x21f0e0]['changes'][_0x135fbb(0x221)](_0x35460b=>{const _0x4cf78b=_0x135fbb;_0x2ee361+=_0x35460b['number']*_0x35460b[_0x4cf78b(0x286)];}),_0x384048*=_0x2ee361/(_0x2d664f-_0x2ee361)+0x1;}_0x21f0e0++;}}let _0x2ea105=0x0;_0x3bef38[_0x135fbb(0x22e)][_0x135fbb(0x221)](_0x1adeb3=>{const _0x4c52ec=_0x135fbb;_0x2ea105+=_0x1adeb3[_0x4c52ec(0x1fe)]*_0x1adeb3[_0x4c52ec(0x286)];}),_0x118bff[_0x46c68a[_0x135fbb(0x18b)]-_0x112e88-0x1]=_0x2ea105*(_0x384048-0x1);});let _0x1b4d17=[];_0x3fcaf7=[...config[_0x3c3545(0x1f4)]]||[];let _0x2f4e12=0x0;_0x21f0e0=0x0,_0x46c68a[_0x3c3545(0x221)]((_0xa913e,_0x258a13)=>{const _0x48d961=_0x3c3545;if(_0x3fcaf7[_0x21f0e0]){const _0x6f95c3=fns['parse'](_0x3fcaf7[_0x21f0e0][_0x48d961(0x20f)],_0x48d961(0x1d7),new Date()),_0x10434c=fns[_0x48d961(0x197)](_0xa913e[_0x48d961(0x20f)],_0x48d961(0x1d7),new Date());if(fns[_0x48d961(0x182)](_0x6f95c3,_0x10434c)){let _0x14a78a=0x0;_0x3fcaf7[_0x21f0e0][_0x48d961(0x1df)]['forEach'](_0x58001a=>{const _0x5ec3c3=_0x48d961;!_0x1b4d17[_0x58001a[_0x5ec3c3(0x1ca)]]?_0x1b4d17[_0x58001a['coin']]=_0x58001a[_0x5ec3c3(0x1fe)]:(_0x14a78a=_0x1b4d17[_0x58001a[_0x5ec3c3(0x1ca)]],_0x1b4d17[_0x58001a[_0x5ec3c3(0x1ca)]]+=_0x58001a[_0x5ec3c3(0x1fe)]);const _0xbf7e9c=_0xa913e[_0x5ec3c3(0x22e)][_0x5ec3c3(0x1bb)](_0x21de66=>_0x21de66[_0x5ec3c3(0x1ca)]==_0x58001a['coin']);(!_0xbf7e9c||_0xbf7e9c[_0x5ec3c3(0x1fe)]==0x0)&&(_0x2f4e12+=(-_0x58001a['number']-_0x14a78a)*_0x58001a['price']);}),_0x21f0e0++;}}_0xa913e[_0x48d961(0x22e)][_0x48d961(0x221)]((_0x6e50da,_0x28d63e)=>{const _0x3f42d2=_0x48d961;_0x1b4d17[_0x6e50da['coin']]&&(_0x6e50da[_0x3f42d2(0x24a)]=_0x1b4d17[_0x6e50da[_0x3f42d2(0x1ca)]]);}),_0x782e11[_0x48d961(0x154)]({'date':_0xa913e[_0x48d961(0x20f)],'eur':_0xa913e[_0x48d961(0x260)],'usd':_0xa913e['usd'],'offset':_0x118bff[_0x258a13],'netoffset':_0x2f4e12,'coins':_0xa913e[_0x48d961(0x22e)]});});}return _0x782e11;}function emitPerformance(_0x5c5c68){const _0x56034d=_0x1c93ed;_0x5c5c68[_0x56034d(0x18b)]!==0x0?(proxyEmit(_0x56034d(0x1ae),_0x5c5c68),lastPerformanceEmitted=getDate()):proxyEmit(_0x56034d(0x1ae),[]);}function getPerf(_0x5f00ee,_0x810c08){const _0x3ada50=_0x1c93ed;let _0x1959d8=0x0,_0x4ea9c2=0x0,_0x37b4a3=0x0;_0x5f00ee[_0x3ada50(0x22e)][_0x3ada50(0x221)](_0x2f493c=>{const _0x591269=_0x3ada50;_0x1959d8+=_0x2f493c[_0x591269(0x1fe)]*_0x2f493c[_0x591269(0x286)];});_0x810c08&&(_0x1959d8+=_0x5f00ee['offset']);if(config[_0x3ada50(0x279)]===_0x3ada50(0x1b3)||config[_0x3ada50(0x279)]==='ETH')_0x4ea9c2=_0x1959d8*_0x5f00ee[_0x3ada50(0x260)],_0x37b4a3=_0x1959d8*_0x5f00ee['usd'];else{if(usdBasecoins[_0x3ada50(0x1b7)](config[_0x3ada50(0x279)]))_0x4ea9c2=_0x1959d8*_0x5f00ee[_0x3ada50(0x260)]/_0x5f00ee[_0x3ada50(0x1eb)],_0x37b4a3=_0x1959d8;else config[_0x3ada50(0x279)]===_0x3ada50(0x186)&&(_0x4ea9c2=_0x1959d8,_0x37b4a3=_0x1959d8*_0x5f00ee[_0x3ada50(0x1eb)]/_0x5f00ee['eur']);}return[_0x1959d8,_0x4ea9c2,_0x37b4a3];}function getKPIs(_0x1da90d,_0x5a1e42=_0x1c93ed(0x186)){const _0x56d2ae=_0x1c93ed,_0x2e109c=config[_0x56d2ae(0x279)],_0x2a9e07=lastBalances,_0x45b1af=currentCoins,_0x559d1f=getNormalizedPerformance(),_0x2cce66=_0x1da90d===_0x56d2ae(0x279)?_0x2e109c:_0x1da90d===_0x56d2ae(0x288)||_0x1da90d===_0x56d2ae(0x2c1)?_0x5a1e42:'Net\x20'+_0x2e109c,_0x2bea81=_0x1da90d===_0x56d2ae(0x200)?_0x56d2ae(0x1fd):_0x1da90d===_0x56d2ae(0x2c1)?_0x56d2ae(0x1fd):_0x2cce66+'\x20value',_0x29257e=_0x1da90d==='net-basecoin'||_0x1da90d===_0x56d2ae(0x2c1)?_0x56d2ae(0x1fd):_0x2cce66+'\x20change';let _0xc8423e=0x0;_0x45b1af['forEach'](_0x1128d4=>{const _0x11723d=_0x56d2ae;_0xc8423e+=_0x1128d4[_0x11723d(0x1fe)]*_0x1128d4[_0x11723d(0x1e4)];});if(_0x1da90d===_0x56d2ae(0x288)||_0x1da90d==='net-fiat'){if(_0x2e109c===_0x56d2ae(0x1b3)||_0x2e109c===_0x56d2ae(0x281))_0xc8423e=_0xc8423e*(_0x5a1e42===_0x56d2ae(0x186)?_0x2a9e07['eur']:_0x2a9e07['usd']);else{if(usdBasecoins[_0x56d2ae(0x1b7)](_0x2e109c))_0xc8423e=_0xc8423e*(_0x5a1e42===_0x56d2ae(0x186)?_0x2a9e07['eur']/_0x2a9e07['usd']:0x1);else _0x2e109c===_0x56d2ae(0x186)&&(_0xc8423e=_0xc8423e*(_0x5a1e42===_0x56d2ae(0x186)?0x1:_0x2a9e07[_0x56d2ae(0x1eb)]/_0x2a9e07[_0x56d2ae(0x260)]));}}let _0x48d06c;if(_0xc8423e!==0x0){if(_0x1da90d==='basecoin')_0x48d06c=(_0xc8423e/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5a1e42===_0x56d2ae(0x186))_0x48d06c=(_0xc8423e/startingBalances[_0x56d2ae(0x260)]-0x1)*0x64;else _0x48d06c=(_0xc8423e/startingBalances[_0x56d2ae(0x1eb)]-0x1)*0x64;}let _0x4715d8=0x0;if(startingBalances[_0x56d2ae(0x22e)])_0x45b1af[_0x56d2ae(0x221)](_0x375dbc=>{const _0x57bc00=_0x56d2ae;let _0x479e4f=startingBalances['coins'][_0x57bc00(0x1bb)](_0x43de4d=>_0x43de4d[_0x57bc00(0x1ca)]===_0x375dbc[_0x57bc00(0x1ca)]);if(_0x479e4f&&_0x479e4f['coin']&&_0x375dbc[_0x57bc00(0x1fe)]!==0x0)_0x4715d8+=_0x479e4f[_0x57bc00(0x1fe)]*_0x375dbc['last'];});let _0x2e2916=0x0;if(_0x559d1f['length']!==0x0){let _0x3167ab=_0x559d1f[_0x559d1f[_0x56d2ae(0x18b)]-0x1];_0x2e2916=_0x3167ab[_0x56d2ae(0x1c3)];}_0x4715d8-=_0x2e2916;_0x1da90d===_0x56d2ae(0x200)&&(_0x48d06c=(_0xc8423e-_0x4715d8)/startingBalances[_0x56d2ae(0x279)]*0x64,_0xc8423e=_0xc8423e-_0x4715d8);if(_0x1da90d===_0x56d2ae(0x2c1)){let _0x3a9118=_0x5a1e42===_0x56d2ae(0x186)?startingBalances[_0x56d2ae(0x260)]:startingBalances[_0x56d2ae(0x1eb)];if(_0x2e109c==='BTC'||_0x2e109c===_0x56d2ae(0x281))_0x4715d8=_0x5a1e42===_0x56d2ae(0x186)?_0x4715d8*_0x2a9e07[_0x56d2ae(0x260)]:_0x4715d8*_0x2a9e07[_0x56d2ae(0x1eb)];else{if(usdBasecoins[_0x56d2ae(0x1b7)](_0x2e109c))_0x4715d8=_0x5a1e42===_0x56d2ae(0x186)?_0x4715d8*_0x2a9e07[_0x56d2ae(0x260)]/_0x2a9e07[_0x56d2ae(0x1eb)]:_0x4715d8;else _0x2e109c===_0x56d2ae(0x186)&&(_0x4715d8=_0x5a1e42===_0x56d2ae(0x186)?_0x4715d8:_0x4715d8*_0x2a9e07[_0x56d2ae(0x1eb)]/_0x2a9e07['eur']);}_0x48d06c=(_0xc8423e-_0x4715d8)/_0x3a9118*0x64,_0xc8423e=_0xc8423e-_0x4715d8;}if(_0x48d06c){if(_0x48d06c<0x64)_0x48d06c=_0x48d06c['toFixed'](0x2);else{if(_0x48d06c<0x3e8)_0x48d06c=_0x48d06c[_0x56d2ae(0x27e)](0x1);else _0x48d06c=_0x48d06c[_0x56d2ae(0x27e)](0x0);}}else _0x48d06c=Number('0')['toFixed'](0x2);if(_0xc8423e){if(Math['abs'](_0xc8423e)<0.000001)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x2);else{if(Math['abs'](_0xc8423e)<0.1)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x6);else{if(Math[_0x56d2ae(0x1db)](_0xc8423e)<0x1)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x5);else{if(Math['abs'](_0xc8423e)<0xa)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x4);else{if(Math[_0x56d2ae(0x1db)](_0xc8423e)<0x64)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x3);else{if(Math[_0x56d2ae(0x1db)](_0xc8423e)<0x3e8)_0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x2);else _0xc8423e=_0xc8423e[_0x56d2ae(0x27e)](0x2);}}}}}}else _0xc8423e=Number('0')[_0x56d2ae(0x27e)](0x2);}else _0x48d06c=Number('0')[_0x56d2ae(0x27e)](0x2);return{'value':_0xc8423e,'change':_0x48d06c,'leftTxt':_0x2bea81,'rightTxt':_0x29257e};}async function getStartingBalances(_0x54ef30,_0x4cd3d0=!![]){const _0x4aeb63=_0x1c93ed;if(_0x54ef30[_0x4aeb63(0x18b)]!==0x0){const [_0x106e1d,_0x487868,_0x58ba90]=getPerf(_0x54ef30[0x0],!![]);let _0x288b63=[];config['portfolio']['forEach'](_0x2ee94e=>{const _0x30aa62=_0x4aeb63;let _0x5681bd=0x0,_0x226f20;config[_0x30aa62(0x1f4)]['forEach'](_0x59fb49=>{const _0x8edb6=_0x30aa62;let _0x22ac60=_0x59fb49[_0x8edb6(0x1df)][_0x8edb6(0x1bb)](_0x7fa1ec=>_0x7fa1ec[_0x8edb6(0x1ca)]==_0x2ee94e[_0x8edb6(0x1ca)]);if(_0x22ac60){_0x5681bd+=_0x22ac60[_0x8edb6(0x1fe)];if(!_0x226f20)_0x226f20=_0x22ac60['price'];}}),_0x288b63[_0x30aa62(0x154)]({'coin':_0x2ee94e[_0x30aa62(0x1ca)],'number':_0x5681bd,'initialprice':_0x226f20});});const _0x3616a4={'basecoin':_0x106e1d,'eur':_0x487868,'usd':_0x58ba90,'coins':_0x288b63};if(_0x4cd3d0)proxyEmit(_0x4aeb63(0x147),_0x3616a4);startingBalances=_0x3616a4;}}function headlessMode(_0x1cebfd){const _0x1a4c2d=_0x1c93ed;let _0x506c3b=_0x1cebfd[_0x1a4c2d(0x21d)],_0x5bd149=_0x1cebfd[_0x1a4c2d(0x2da)],_0x543bbb=[];for(let _0x16df1a of _0x506c3b){if(_0x16df1a[_0x1a4c2d(0x1ca)]!=config[_0x1a4c2d(0x279)]){if(_0x16df1a[_0x1a4c2d(0x2ca)]>=_0x5bd149/0x64){if(_0x16df1a[_0x1a4c2d(0x2d9)])_0x543bbb[_0x1a4c2d(0x154)](_0x16df1a);}else{if(_0x16df1a[_0x1a4c2d(0x2ca)]<=-_0x5bd149/0x64){if(_0x16df1a['valid'])_0x543bbb[_0x1a4c2d(0x154)](_0x16df1a);}}}}_0x543bbb[_0x1a4c2d(0x18b)]>0x0&&placeOrder(_0x543bbb);}function notifyBalance(_0x4f6bbe){const _0x26ca97=_0x1c93ed;let _0x4e6989=_0x4f6bbe[_0x26ca97(0x21d)],_0x2b444e=_0x4f6bbe['threshold'],_0xf1f9ba=[];for(let _0x27e996 of _0x4e6989){if(_0x27e996['coin']!=config[_0x26ca97(0x279)]){if(_0x27e996[_0x26ca97(0x2ca)]>=_0x2b444e/0x64){if(_0x27e996['valid'])_0xf1f9ba['push'](_0x27e996);}else{if(_0x27e996['delta']<=-_0x2b444e/0x64){if(_0x27e996[_0x26ca97(0x2d9)])_0xf1f9ba[_0x26ca97(0x154)](_0x27e996);}}}}if(_0xf1f9ba['length']>0x0){let _0x23d48a=_0xf1f9ba[_0x26ca97(0x27f)](_0x4c2d30=>_0x4c2d30[_0x26ca97(0x1ca)]);_0x23d48a[_0x26ca97(0x2b4)]();let _0x228adc=_0x23d48a['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x26ca97(0x2bb),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x228adc;}}function symbolToCoin(_0x128249){const _0x3ec37f=_0x1c93ed;let _0x263e73;if(_0x128249[_0x3ec37f(0x1b7)]('/'+config['basecoin']))_0x263e73=_0x128249[_0x3ec37f(0x1e6)]('/'+config[_0x3ec37f(0x279)],'');if(_0x128249['includes'](config[_0x3ec37f(0x279)]+'/'))_0x263e73=_0x128249[_0x3ec37f(0x1e6)](config[_0x3ec37f(0x279)]+'/','');return _0x263e73;}async function unlockOrders(){const _0x424a77=_0x1c93ed;if(allOrdersPlaced&&lockOrders==ORDERS[_0x424a77(0x19d)]){logger[_0x424a77(0x1ff)](_0x424a77(0x242)),lockOrders=ORDERS[_0x424a77(0x243)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x131837=await getCoins();[currentCoins,currentCoinsAll]=_0x131837,validateOrdersState=_0x424a77(0x24a),persistOpenOrders([]),lockOrders=ORDERS[_0x424a77(0x27c)],logger[_0x424a77(0x1ff)](_0x424a77(0x2d0));}}async function validateOrders(_0x5bc9c9){const _0x4dc52d=_0x1c93ed;if(_0x5bc9c9)validateOrdersState=_0x5bc9c9;logger['debug'](_0x4dc52d(0x188)+validateOrdersState+_0x4dc52d(0x2c7)+(lockOrders==0x1?_0x4dc52d(0x1d1):lockOrders==0x2?_0x4dc52d(0x1f6):_0x4dc52d(0x145)));let _0x24e080=[],_0x5e2b31=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4dc52d(0x283)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4dc52d(0x19d)])return;logger[_0x4dc52d(0x1ff)](_0x4dc52d(0x20c)+validateOrdersState),lastOrders['forEach'](_0x483040=>{const _0x580a83=_0x4dc52d;let _0x5940f7=![];_0x483040[_0x580a83(0x1cc)]>0x0&&(_0x5940f7=!![]),_0x24e080['push'](_0x5940f7),_0x5940f7&&config[_0x580a83(0x291)]!=_0x580a83(0x27a)&&logHistory(_0x580a83(0x180),_0x580a83(0x20b)+_0x483040[_0x580a83(0x14d)]+'\x20'+_0x483040[_0x580a83(0x2b3)]+'\x20#'+formatResult(_0x483040[_0x580a83(0x1cc)],0x8)+'\x20@'+formatResult(_0x483040[_0x580a83(0x286)],0x8));}),_0x24e080[_0x4dc52d(0x221)]((_0x3c3862,_0x427c9d)=>{if(_0x3c3862)lastOrders['splice'](_0x427c9d,0x1);}),persistOpenOrders(lastOrders);const _0x43f6cd=coolingDown?_0x4dc52d(0x272):'balancing\x20resumed';if(validateOrdersState==_0x4dc52d(0x24a)){validateOrdersState=_0x4dc52d(0x17e);if(_0x24e080[_0x4dc52d(0x1b7)](![])){if(config[_0x4dc52d(0x291)]==_0x4dc52d(0x27a)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4dc52d(0x17e)){if(_0x24e080[_0x4dc52d(0x1b7)](![])){}else{if(allOrdersPlaced){if(config[_0x4dc52d(0x291)]==_0x4dc52d(0x27a)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x24e080[_0x4dc52d(0x1b7)](![])&&(config[_0x4dc52d(0x291)]==_0x4dc52d(0x27a)?logHistory(_0x4dc52d(0x239),_0x4dc52d(0x257)+Math[_0x4dc52d(0x208)](_0x5e2b31*validateOrderInterval/0xea60)+_0x4dc52d(0x1c8)+_0x43f6cd):(await cancelOrders(),logHistory('success',_0x4dc52d(0x2a2)+Math[_0x4dc52d(0x208)](_0x5e2b31*validateOrderInterval/0xea60)+_0x4dc52d(0x1c8)+_0x43f6cd))),await unlockOrders();else{if(validateOrdersState==_0x4dc52d(0x181)){if(config[_0x4dc52d(0x291)]!=_0x4dc52d(0x27a))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x43f6cd);await unlockOrders();}}}}}async function cancelOrders(){const _0x3f4925=_0x1c93ed;lastOrders[_0x3f4925(0x221)](async _0x54a3d1=>{const _0x1fa149=_0x3f4925;try{const _0x57dd51=await exchange[_0x1fa149(0x2d1)](_0x54a3d1[_0x1fa149(0x1a4)],_0x54a3d1['symbol']);}catch(_0x5757fd){if(_0x5757fd[_0x1fa149(0x187)]()[_0x1fa149(0x1b7)](_0x1fa149(0x191))){}else await handleError(_0x5757fd,_0x1fa149(0x23d));}});}async function initCoinResults(_0x408d2d){const _0x184ec1=_0x1c93ed;_0x408d2d?logger[_0x184ec1(0x1ff)](_0x184ec1(0x1e7)+_0x408d2d):logger[_0x184ec1(0x1ff)](_0x184ec1(0x17c)),config['portfolio'][_0x184ec1(0x221)](_0x11a405=>{const _0x3c83af=_0x184ec1;if(!_0x11a405['excluded']&&_0x11a405[_0x3c83af(0x1ca)]!=config[_0x3c83af(0x279)]){const _0x23b8fa=currentCoins[_0x3c83af(0x1bb)](_0x95d47b=>_0x95d47b[_0x3c83af(0x1ca)]==_0x11a405[_0x3c83af(0x1ca)]),_0x35ad76=global['ticker'][noslash(_0x11a405[_0x3c83af(0x14d)])];let _0x1d6157=_0x23b8fa?_0x23b8fa['number']:null,_0x1a89dc=_0x11a405[_0x3c83af(0x178)]?0x1/_0x35ad76:_0x35ad76,_0x1cc172;config[_0x3c83af(0x1f4)][_0x3c83af(0x221)](_0x3fe37a=>{const _0x54e015=_0x3c83af;!_0x1cc172&&(_0x1cc172=_0x3fe37a[_0x54e015(0x1df)][_0x54e015(0x1bb)](_0x271c84=>_0x271c84[_0x54e015(0x1ca)]==_0x11a405['coin']),_0x1cc172&&(_0x1d6157=_0x1cc172[_0x54e015(0x1fe)],_0x1a89dc=_0x1cc172['price']));});let _0x5910a0=dbCoinResults[_0x3c83af(0x28a)](_0x3c83af(0x22e))[_0x3c83af(0x1bb)]({'coin':_0x11a405[_0x3c83af(0x1ca)]})['value']();if(!_0x5910a0){const _0xd2d663={'coin':_0x11a405[_0x3c83af(0x1ca)],'number':_0x1d6157,'breakeven':_0x1a89dc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3c83af(0x28a)](_0x3c83af(0x22e))['push'](_0xd2d663)[_0x3c83af(0x1f3)]();}else{if(_0x408d2d&&_0x11a405['coin']==_0x408d2d){const _0x1abdcf={'coin':_0x11a405[_0x3c83af(0x1ca)],'number':_0x1d6157,'breakeven':_0x1a89dc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3c83af(0x28a)](_0x3c83af(0x22e))[_0x3c83af(0x1bb)]({'coin':_0x11a405[_0x3c83af(0x1ca)]})[_0x3c83af(0x2a0)](_0x1abdcf)['write']();}}}});}async function updateCoinResults(_0x2f2047,_0x315419=![]){const _0x20439d=_0x1c93ed;let _0x381455,_0x217700,_0x53ab1d,_0xbe9827,_0x17df0a,_0x1b0991,_0x41fb43=dbCoinResults[_0x20439d(0x28a)](_0x20439d(0x22e))[_0x20439d(0x1bb)]({'coin':_0x2f2047[_0x20439d(0x1ca)]})[_0x20439d(0x2cb)](),_0x38aaeb=![];Object['entries'](_0x41fb43)[_0x20439d(0x221)](([_0x4430c7,_0x4a75a1])=>{if(_0x4a75a1==null)_0x38aaeb=!![];});(!_0x41fb43||_0x38aaeb)&&(await initCoinResults(_0x2f2047[_0x20439d(0x1ca)]),_0x41fb43=dbCoinResults['get'](_0x20439d(0x22e))[_0x20439d(0x1bb)]({'coin':_0x2f2047['coin']})[_0x20439d(0x2cb)]());_0x2f2047[_0x20439d(0x178)]&&(_0x1b0991={'filled':_0x2f2047[_0x20439d(0x1cc)]*_0x2f2047[_0x20439d(0x286)],'amount':_0x2f2047[_0x20439d(0x1cc)]*_0x2f2047['price'],'side':_0x2f2047[_0x20439d(0x2b3)]==_0x20439d(0x2a7)?_0x20439d(0x190):_0x20439d(0x2a7),'price':0x1/_0x2f2047[_0x20439d(0x286)]},_0x2f2047={..._0x2f2047,..._0x1b0991});_0x315419?_0x217700=_0x2f2047[_0x20439d(0x2b3)]=='buy'?_0x41fb43[_0x20439d(0x1fe)]+_0x2f2047[_0x20439d(0x1cc)]:_0x41fb43[_0x20439d(0x1fe)]-_0x2f2047['filled']:_0x217700=await getCoinNumber(_0x2f2047['coin']);if(_0x2f2047[_0x20439d(0x196)]&&_0x2f2047[_0x20439d(0x196)][_0x20439d(0x29f)]==config[_0x20439d(0x279)])_0x381455=_0x2f2047[_0x20439d(0x196)][_0x20439d(0x23c)];else{if(_0x2f2047[_0x20439d(0x196)]&&_0x2f2047[_0x20439d(0x196)][_0x20439d(0x29f)]==_0x20439d(0x293)&&!_0x315419)_0x381455=_0x2f2047['fee'][_0x20439d(0x23c)]*global[_0x20439d(0x17b)][_0x20439d(0x293)+config[_0x20439d(0x279)]];else _0x381455=defaultFee*_0x2f2047[_0x20439d(0x1cc)]*_0x2f2047[_0x20439d(0x286)];}_0x2f2047[_0x20439d(0x2b3)]==_0x20439d(0x190)?(_0x53ab1d=_0x217700!=0x0?(_0x41fb43[_0x20439d(0x212)]*_0x41fb43[_0x20439d(0x1fe)]+_0x2f2047[_0x20439d(0x286)]*(_0x217700-_0x41fb43[_0x20439d(0x1fe)])+_0x381455)/_0x217700:0x0,_0xbe9827=_0x41fb43[_0x20439d(0x274)]):(_0x53ab1d=_0x217700!=0x0?(_0x41fb43[_0x20439d(0x212)]*_0x41fb43[_0x20439d(0x1fe)]-_0x2f2047['price']*(_0x41fb43[_0x20439d(0x1fe)]-_0x217700)+_0x381455)/_0x217700:0x0,_0xbe9827=_0x41fb43[_0x20439d(0x274)]+(_0x2f2047['price']-_0x41fb43[_0x20439d(0x212)])*_0x2f2047['filled']);_0x17df0a=(_0x2f2047[_0x20439d(0x286)]-_0x53ab1d-_0x381455/_0x2f2047['filled'])*_0x217700;let _0x4f8092={'coin':_0x2f2047[_0x20439d(0x1ca)],'number':_0x217700,'breakeven':formatResult(_0x53ab1d,0x8),'realized':formatResult(_0xbe9827,0x8),'unrealized':formatResult(_0x17df0a,0x8),'fees':formatResult(_0x41fb43[_0x20439d(0x204)]+_0x381455,0x8),'sells':_0x2f2047['side']=='sell'?_0x41fb43['sells']+0x1:_0x41fb43['sells'],'buys':_0x2f2047['side']==_0x20439d(0x190)?_0x41fb43[_0x20439d(0x26c)]+0x1:_0x41fb43[_0x20439d(0x26c)]};dbCoinResults[_0x20439d(0x28a)](_0x20439d(0x22e))['find']({'coin':_0x2f2047[_0x20439d(0x1ca)]})[_0x20439d(0x2a0)](_0x4f8092)[_0x20439d(0x1f3)]();if(!_0x315419){if(_0x2f2047[_0x20439d(0x196)]&&_0x2f2047[_0x20439d(0x196)]['currency']==_0x20439d(0x293)){const _0x2c516b=currentCoins[_0x20439d(0x1bb)](_0x58c109=>_0x58c109['coin']==_0x20439d(0x293));if(_0x2c516b){let _0x37c59c=dbCoinResults['get'](_0x20439d(0x22e))['find']({'coin':_0x20439d(0x293)})[_0x20439d(0x2cb)]();_0x4f8092={..._0x37c59c,'number':_0x2c516b[_0x20439d(0x1fe)]},dbCoinResults[_0x20439d(0x28a)](_0x20439d(0x22e))[_0x20439d(0x1bb)]({'coin':_0x20439d(0x293)})['assign'](_0x4f8092)[_0x20439d(0x1f3)]();}}}}async function placeOrder(_0x247132){const _0x1f89eb=_0x1c93ed,_0x5a3bfb=config['ordertype']==_0x1f89eb(0x27a)?'market':_0x1f89eb(0x248);if(lockOrders==ORDERS[_0x1f89eb(0x27c)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1f89eb(0x19d)],allOrdersPlaced=![],validateOrdersState=_0x1f89eb(0x24a);let _0x4b22d9=![];lastOrders=[];for(const _0x3b28a4 of _0x247132){let _0x1dc5e8,_0x589a8a,_0xdd5476,_0x23c02,_0xa5b174,_0x18ec46=_0x3b28a4['symbol'];try{const _0x379dfd=await exchange[_0x1f89eb(0x2c5)](_0x18ec46);_0x1dc5e8=_0x3b28a4['reverse']?0x1/_0x3b28a4[_0x1f89eb(0x1e4)]:_0x3b28a4[_0x1f89eb(0x1e4)],_0x589a8a=_0x379dfd[_0x1f89eb(0x165)],_0xdd5476=_0x379dfd[_0x1f89eb(0x1e2)];_0x3b28a4[_0x1f89eb(0x178)]?(_0x23c02=_0x3b28a4['side']==_0x1f89eb(0x190)?_0x1f89eb(0x2a7):'buy',_0xa5b174=Math[_0x1f89eb(0x1db)](_0x3b28a4[_0x1f89eb(0x1d0)])/_0x1dc5e8):(_0x23c02=_0x3b28a4[_0x1f89eb(0x2b3)],_0xa5b174=Math[_0x1f89eb(0x1db)](_0x3b28a4['trade']));_0x5a3bfb==_0x1f89eb(0x248)&&(config['ordertype']==_0x1f89eb(0x2d3)&&(_0x1dc5e8=_0x23c02==_0x1f89eb(0x190)?_0x589a8a:_0xdd5476),config[_0x1f89eb(0x291)]=='limit-low'&&(_0x1dc5e8=_0x23c02==_0x1f89eb(0x190)?_0xdd5476:_0x589a8a));_0xa5b174=formatResult(_0xa5b174,0x8),_0x1dc5e8=formatResult(_0x1dc5e8,0x8);const _0x8bb513=_0x23c02==_0x1f89eb(0x2a7)?config[_0x1f89eb(0x25b)]?String[_0x1f89eb(0x14c)]('0x'+config[_0x1f89eb(0x25b)])+'\x20':'':config[_0x1f89eb(0x2c0)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x5cbd6d=_0x5a3bfb==_0x1f89eb(0x27a)?'Market':config['ordertype']==_0x1f89eb(0x2d3)?_0x1f89eb(0x285):_0x1f89eb(0x235),_0x5bd577=(Math[_0x1f89eb(0x1dc)](Math[_0x1f89eb(0x176)]()*0x35a4e900)+0x5f5e100)[_0x1f89eb(0x187)]();lastOrders[_0x1f89eb(0x154)]({'customId':_0x5bd577,'symbol':_0x18ec46,'coin':_0x3b28a4[_0x1f89eb(0x1ca)],'amount':_0xa5b174,'price':_0x1dc5e8,'side':_0x23c02,'reverse':_0x3b28a4[_0x1f89eb(0x178)],'filled':0x0});if(_0x5a3bfb==_0x1f89eb(0x27a))logHistory('order',''+_0x8bb513+_0x5cbd6d+_0x1f89eb(0x238)+_0x18ec46+'\x20'+_0x23c02+'\x20#'+formatResult(_0xa5b174,0x8)+'\x20@'+formatResult(_0x1dc5e8,0x8));else logHistory(_0x1f89eb(0x180),''+_0x8bb513+_0x5cbd6d+_0x1f89eb(0x238)+_0x18ec46+'\x20'+_0x23c02+'\x20#'+formatResult(_0xa5b174,0x8)+'\x20@'+formatResult(_0x1dc5e8,0x8));const _0x4fe00c=await exchange[_0x1f89eb(0x21c)](_0x18ec46,_0x5a3bfb,_0x23c02,_0xa5b174,_0x1dc5e8);logger[_0x1f89eb(0x1ff)]('ID:\x20'+_0x4fe00c['id']+_0x1f89eb(0x296)+_0x5bd577);const _0x31d52e=lastOrders[_0x1f89eb(0x18b)]-0x1;if(_0x31d52e>=0x0&&lastOrders[_0x31d52e][_0x1f89eb(0x1cf)]==_0x5bd577){lastOrders[_0x31d52e][_0x1f89eb(0x1a4)]=_0x4fe00c['id'];if(_0x4fe00c[_0x1f89eb(0x1bf)])lastOrders[_0x31d52e][_0x1f89eb(0x1bf)]=_0x4fe00c['amount'];if(_0x4fe00c[_0x1f89eb(0x286)])lastOrders[_0x31d52e]['price']=_0x4fe00c[_0x1f89eb(0x286)];lastOrders[_0x31d52e]['fee']=_0x4fe00c[_0x1f89eb(0x196)];}if(config['cooldown']!=0x0){let _0x5791c3=null;if(cooldownTracker[_0x1f89eb(0x18b)]==config[_0x1f89eb(0x1b1)]-0x1)_0x5791c3=cooldownTracker[_0x1f89eb(0x19b)]();const _0x5d07ec=getTimeStamp();cooldownTracker[_0x1f89eb(0x154)](_0x5d07ec);if(_0x5791c3){const _0x4deb05=fns[_0x1f89eb(0x164)](new Date(_0x5d07ec),new Date(_0x5791c3));if(_0x4deb05<cooldownInterval){logHistory(_0x1f89eb(0x275),_0x1f89eb(0x297)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x1f89eb(0x21b)+cooldownPeriod/(0xe10*0x3e8)+_0x1f89eb(0x207)),coolingDown=!![];break;}}}}catch(_0x448171){if(_0x448171[_0x1f89eb(0x187)]()['includes'](_0x1f89eb(0x2bf)))lastOrders=lastOrders[_0x1f89eb(0x1ec)](_0x4755b3=>_0x4755b3[_0x1f89eb(0x14d)]!=_0x18ec46),logHistory(_0x1f89eb(0x275),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x18ec46),_0x4b22d9=!![];else{if(_0x448171[_0x1f89eb(0x187)]()[_0x1f89eb(0x1b7)](_0x1f89eb(0x280)))lastOrders=lastOrders['filter'](_0x13950d=>_0x13950d[_0x1f89eb(0x14d)]!=_0x18ec46),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x18ec46),_0x4b22d9=!![];else{if(_0x448171[_0x1f89eb(0x187)]()[_0x1f89eb(0x1b7)](_0x1f89eb(0x26b)))lastOrders=lastOrders[_0x1f89eb(0x1ec)](_0x2a2029=>_0x2a2029['symbol']!=_0x18ec46),logHistory('error',_0x1f89eb(0x1e1)+_0x18ec46),_0x4b22d9=!![];else _0x448171[_0x1f89eb(0x187)]()[_0x1f89eb(0x1b7)](_0x1f89eb(0x22b))?(lastOrders=lastOrders[_0x1f89eb(0x1ec)](_0x33d3f6=>_0x33d3f6[_0x1f89eb(0x14d)]!=_0x18ec46),logHistory(_0x1f89eb(0x275),_0x1f89eb(0x1ab)+_0x18ec46),_0x4b22d9=!![]):(lastOrders=lastOrders[_0x1f89eb(0x1ec)](_0x216d41=>_0x216d41['symbol']!=_0x18ec46),await handleError(_0x448171,_0x1f89eb(0x1c9),_0x18ec46));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1f89eb(0x18b)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4583f2=config[_0x1f89eb(0x291)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x226308=_0x1f89eb;validateOrders(_0x226308(0x1d2));},_0x4583f2);}else unlockOrders();_0x4b22d9&&config['headless']&&await pauseBot(_0x1f89eb(0x252)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1f89eb(0x239),_0x1f89eb(0x2a3)));}else{if(coolingDown)!config[_0x1f89eb(0x1d6)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x1f89eb(0x27c)]&&(!config[_0x1f89eb(0x1d6)]&&(config[_0x1f89eb(0x291)]==_0x1f89eb(0x27a)?logHistory('error',_0x1f89eb(0x21f)):logHistory(_0x1f89eb(0x275),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x355ab4){const _0x5a0f07=_0x1c93ed,_0x253287={...config,'openOrders':_0x355ab4};let _0x2c4067=dbConfig[_0x5a0f07(0x28a)](_0x5a0f07(0x217))[_0x5a0f07(0x1bb)]({'botID':botID})[_0x5a0f07(0x2cb)]();_0x2c4067&&dbConfig[_0x5a0f07(0x28a)]('bot')['find']({'botID':botID})['assign'](_0x253287)[_0x5a0f07(0x1f3)]();}function restoreOrders(){const _0x3c41da=_0x1c93ed;let _0x26d0d5;config[_0x3c41da(0x240)]&&allOpenOrders[_0x3c41da(0x221)](_0xb0b135=>{const _0x20578c=_0x3c41da,_0x5e1361=config[_0x20578c(0x240)][_0x20578c(0x1bb)](_0x232040=>_0x232040[_0x20578c(0x1a4)]==_0xb0b135['id']);_0x5e1361&&(lastOrders[_0x20578c(0x154)](_0x5e1361),_0x26d0d5=_0xb0b135['timestamp']);});if(lastOrders[_0x3c41da(0x18b)]>0x0){lockOrders=ORDERS[_0x3c41da(0x19d)],validateOrdersState=_0x3c41da(0x17e),allOrdersPlaced=!![];const _0x3d7654=new Date()[_0x3c41da(0x256)](),_0x5d34aa=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3c41da(0x283)]*0x3c*0x3e8;if(_0x26d0d5+_0x5d34aa>_0x3d7654){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1d5cc3=_0x3c41da;validateOrders(_0x1d5cc3(0x1d2));},_0x26d0d5+_0x5d34aa-_0x3d7654);}else validateOrders(_0x3c41da(0x1d2));}}async function sendMetricsTelegram(){const _0x473bf0=_0x1c93ed;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x898231=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x220ae0='';if(config[_0x473bf0(0x26f)])_0x220ae0=_0x473bf0(0x23a)+config[_0x473bf0(0x16f)]+_0x473bf0(0x1b2);else _0x220ae0=_0x473bf0(0x205)+botID+_0x473bf0(0x1b2);const _0x5ac0b1=getKPIs(_0x473bf0(0x279)),_0x2305df=getKPIs(_0x473bf0(0x288),config[_0x473bf0(0x288)]),_0x5011ad=getKPIs('net-basecoin'),_0x43f16f=getKPIs(_0x473bf0(0x2c1),config[_0x473bf0(0x288)]);_0x220ae0+=_0x473bf0(0x219),_0x220ae0+=_0x5ac0b1[_0x473bf0(0x16c)]+_0x473bf0(0x250)+_0x5ac0b1[_0x473bf0(0x2cb)]+'\x0a',_0x220ae0+=_0x5ac0b1['rightTxt']+':\x20'+_0x5ac0b1[_0x473bf0(0x16e)]+'%\x0a',_0x220ae0+=_0x2305df[_0x473bf0(0x16c)]+_0x473bf0(0x250)+_0x2305df['value']+'\x0a',_0x220ae0+=_0x2305df[_0x473bf0(0x166)]+':\x20'+_0x2305df[_0x473bf0(0x16e)]+'%\x0a',_0x220ae0+=_0x5011ad['leftTxt']+':\x20'+_0x5011ad['value']+'\x20('+config['basecoin']+')\x0a',_0x220ae0+=_0x5011ad[_0x473bf0(0x166)]+':\x20'+_0x5011ad[_0x473bf0(0x16e)]+_0x473bf0(0x1d3)+config['basecoin']+')\x0a',_0x220ae0+=_0x43f16f['leftTxt']+':\x20'+_0x43f16f[_0x473bf0(0x2cb)]+'\x20('+config[_0x473bf0(0x288)]+')\x0a',_0x220ae0+=_0x43f16f['rightTxt']+':\x20'+_0x43f16f[_0x473bf0(0x16e)]+_0x473bf0(0x1d3)+config[_0x473bf0(0x288)]+')\x0a',_0x220ae0+=_0x473bf0(0x2d6),process['send']({'telegrammsg':_0x220ae0},_0x4d9831=>{});}async function sendPortfolioTelegram(){const _0x4522d9=_0x1c93ed;if(!coinsLoaded){process[_0x4522d9(0x295)]({'telegrammsg':_0x4522d9(0x17f)},_0x1935b7=>{});return;}let _0x4a42ba='';if(config[_0x4522d9(0x26f)])_0x4a42ba=_0x4522d9(0x23a)+config['botname']+_0x4522d9(0x20d);else _0x4a42ba=_0x4522d9(0x205)+botID+_0x4522d9(0x20d);_0x4a42ba+=_0x4522d9(0x219),_0x4a42ba+=_0x4522d9(0x161),_0x4a42ba+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4a42ba+='-------------------------------\x0a',currentCoins[_0x4522d9(0x221)](_0x2b36ed=>{const _0x4e4960=_0x4522d9;_0x4a42ba+=_0x2b36ed['coin'][_0x4e4960(0x1ee)](0x7)+'|\x20'+formatPad(_0x2b36ed[_0x4e4960(0x255)],0x2,0x6)+'|\x20'+formatPad(_0x2b36ed['target'],0x2,0x6)+'|\x20'+formatPad(_0x2b36ed[_0x4e4960(0x2ca)]*0x64,0x2,0x6)+'\x0a';}),_0x4a42ba+=_0x4522d9(0x2d6),process['send']({'telegrammsg':_0x4a42ba},_0x3b6d77=>{});}function formatPad(_0x42317d,_0x465f5f,_0x3942fd){const _0x40c135=_0x1c93ed,_0x2cc45d=formatResultString(_0x42317d,_0x465f5f);return _0x2cc45d?_0x2cc45d[_0x40c135(0x230)](_0x3942fd):''[_0x40c135(0x230)](_0x3942fd);}function logHistory(_0x5b405d,_0x5dff99,_0x26e161=''){const _0x3b30ce=_0x1c93ed;let _0x4067c5={'time':getTimeStamp(),'type':_0x5b405d,'event':_0x5dff99};dbLogs[_0x3b30ce(0x28a)]('logs')[_0x3b30ce(0x154)](_0x4067c5)[_0x3b30ce(0x1f3)]();if(_0x26e161=='')_0x26e161=_0x5dff99;proxyEmit(_0x3b30ce(0x174),{'log':_0x4067c5,'summary':_0x26e161}),process['send']({'telegram':{..._0x4067c5,'botname':config[_0x3b30ce(0x16f)],'showname':config[_0x3b30ce(0x26f)]}},_0x139919=>{}),logger[_0x3b30ce(0x1da)](''+_0x4067c5[_0x3b30ce(0x174)]);}function emitHistory(_0x107726={}){const _0x19210f=_0x1c93ed;Object[_0x19210f(0x15d)](_0x107726)[_0x19210f(0x18b)]==0x0&&(_0x107726={'type':[_0x19210f(0x180),_0x19210f(0x174)],'event':'','page':0x1});if(_0x107726['type'][_0x19210f(0x1b7)]('event'))_0x107726[_0x19210f(0x169)]['splice'](_0x107726['type']['indexOf'](_0x19210f(0x174)),0x1,'error',_0x19210f(0x2bb),'success');if(dbLogs[_0x19210f(0x23b)](_0x19210f(0x1c1))['value']()){let _0x2203f8=dbLogs[_0x19210f(0x28a)](_0x19210f(0x1c1))[_0x19210f(0x1ec)](_0x4a64f4=>{const _0x5bc6f0=_0x19210f;if(_0x107726['type'][_0x5bc6f0(0x18b)]==0x0)return![];else return _0x107726[_0x5bc6f0(0x169)]['includes'](_0x4a64f4[_0x5bc6f0(0x169)]);})[_0x19210f(0x1ec)](_0x22079c=>{const _0x141240=_0x19210f;if(_0x107726[_0x141240(0x174)]=='')return!![];else return _0x22079c['event'][_0x141240(0x15a)]()[_0x141240(0x1b7)](_0x107726[_0x141240(0x174)]['toLowerCase']());})['sortBy']('time'),_0x157160=_0x2203f8['value']()[_0x19210f(0x18b)];_0x2203f8=_0x2203f8[_0x19210f(0x178)]()[_0x19210f(0x144)]((_0x107726[_0x19210f(0x1c7)]-0x1)*logPageSize,_0x107726[_0x19210f(0x1c7)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x19210f(0x1f5),{'logs':_0x2203f8,'total':_0x157160});}else proxyEmit(_0x19210f(0x1f5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x11ac13){const _0x1d4292=_0x1c93ed;if(dbLogs[_0x1d4292(0x23b)](_0x1d4292(0x1c1))[_0x1d4292(0x2cb)]()){const _0x39e29f=dbLogs[_0x1d4292(0x28a)](_0x1d4292(0x1c1))['sortBy'](_0x1d4292(0x14b))['filter'](_0x1d8aca=>{return _0x1d8aca['type']=='order';})[_0x1d4292(0x2cb)]();dbLogs[_0x1d4292(0x28a)](_0x1d4292(0x1c1))[_0x1d4292(0x1be)]()[_0x1d4292(0x1f3)](),dbLogs[_0x1d4292(0x28a)](_0x1d4292(0x1c1))[_0x1d4292(0x2a0)](_0x39e29f)[_0x1d4292(0x1f3)](),emitHistory(_0x11ac13);}}async function pauseBot(_0x466fa8=''){const _0x558c9f=_0x1c93ed,_0x2733dd=new Date()[_0x558c9f(0x256)]();if(!lastErrorShown||_0x2733dd-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2733dd;!lastBotPause?(lastBotPause=_0x2733dd,consecutivePauses=0x1):(_0x2733dd-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x558c9f(0x295)]({'stop':_0x558c9f(0x263)},_0x580d93=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x558c9f(0x256)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x466fa8)_0x466fa8+='\x20|\x20';logHistory(_0x558c9f(0x275),_0x466fa8+_0x558c9f(0x1b0)+pauseBotInterval/0xea60+_0x558c9f(0x163)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0xed6963=_0x1c93ed;process[_0xed6963(0x295)]({'stop':_0xed6963(0x2aa)},_0x1c2a37=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4347b7,_0xe5e1ba){const _0x285aa3=_0x1c93ed;if(_0x4347b7[_0x285aa3(0x187)]()[_0x285aa3(0x1b7)](_0x285aa3(0x2b0)))return logHistory(_0x285aa3(0x275),config['exchange']+_0x285aa3(0x24b)),![];else{if(_0x4347b7[_0x285aa3(0x187)]()[_0x285aa3(0x1b7)](_0x285aa3(0x160)))return logHistory('error',config[_0x285aa3(0x2a9)]+_0x285aa3(0x2ce)),![];else{if(_0x4347b7['toString']()[_0x285aa3(0x1b7)](_0x285aa3(0x24f)))return logHistory(_0x285aa3(0x275),config[_0x285aa3(0x2a9)]+_0x285aa3(0x2b5)),logHistory('error',_0x285aa3(0x1f2)),![];else await handleError(_0x4347b7,_0xe5e1ba);}}}async function handleError(_0x1c9c2f,_0x4746dc,_0x4634ce=''){const _0x13ad01=_0x1c93ed,_0x49b5df=config['exchange']||_0x13ad01(0x1ba);if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)](_0x13ad01(0x2bc)))await pauseBot(config[_0x13ad01(0x2a9)]+_0x13ad01(0x229));else{if(_0x1c9c2f[_0x13ad01(0x187)]()['includes'](_0x13ad01(0x167)))await pauseBot(config['exchange']+_0x13ad01(0x25c));else{if(_0x1c9c2f['toString']()['includes'](_0x13ad01(0x168)))await pauseBot(config[_0x13ad01(0x2a9)]+_0x13ad01(0x14e));else{if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)](_0x13ad01(0x19f)))await pauseBot(config[_0x13ad01(0x2a9)]+_0x13ad01(0x211));else{if(_0x1c9c2f[_0x13ad01(0x187)]()['includes'](_0x13ad01(0x251)))logger[_0x13ad01(0x1ff)](_0x13ad01(0x1b4),_0x1c9c2f),await pauseBot(config['exchange']+'\x20connection\x20problem');else{if(_0x1c9c2f[_0x13ad01(0x187)]()['includes'](_0x13ad01(0x1a3)))logHistory(_0x13ad01(0x275),_0x4746dc+_0x13ad01(0x18a)),logHistory(_0x13ad01(0x275),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)]('InvalidNonce'))logHistory(_0x13ad01(0x275),_0x4746dc+_0x13ad01(0x189)),logHistory(_0x13ad01(0x275),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)](_0x13ad01(0x2b0)))logHistory(_0x13ad01(0x275),_0x4746dc+_0x13ad01(0x149)+config['exchange']+_0x13ad01(0x2c6)),logHistory(_0x13ad01(0x275),_0x13ad01(0x236)),await killBot();else{if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x13ad01(0x275),_0x4746dc+_0x13ad01(0x149)+config[_0x13ad01(0x2a9)]+_0x13ad01(0x29e)),logHistory(_0x13ad01(0x275),_0x13ad01(0x236)),await killBot();else{if(_0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)]('AuthenticationError'))logHistory(_0x13ad01(0x275),_0x4746dc+'\x20|\x20'+config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x1c9c2f[_0x13ad01(0x187)]()[_0x13ad01(0x1b7)](_0x13ad01(0x1bc))?logHistory(_0x13ad01(0x275),_0x4746dc+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x4634ce):(logger[_0x13ad01(0x1da)](_0x4746dc+_0x13ad01(0x268),_0x1c9c2f),await pauseBot(_0x13ad01(0x234)));}}}}}}}}}}function formatResult(_0x3b8700,_0x2dd8b4){return parseFloat(_0x3b8700['toFixed'](_0x2dd8b4));}function formatResultTruncate(_0x130ff7,_0x58808f){const _0x183bff=_0x1c93ed;let _0x1def93=formatResultString(_0x130ff7,0xa),_0x409912=_0x1def93[_0x183bff(0x1c0)]('.');return _0x409912!=-0x1&&(_0x1def93=_0x1def93['slice'](0x0,_0x409912+_0x58808f+0x1)),Number(_0x1def93);}function formatResultString(_0x64c8ca,_0x1fac71){const _0x40ab7c=_0x1c93ed;let _0x2e7e56;if(!(''+_0x64c8ca)[_0x40ab7c(0x1b7)]('e'))_0x2e7e56=+(Math['round'](_0x64c8ca+'e+'+_0x1fac71)+'e-'+_0x1fac71);else{let _0x412261=(''+_0x64c8ca)['split']('e'),_0x1abcef='';+_0x412261[0x1]+_0x1fac71>0x0&&(_0x1abcef='+'),_0x2e7e56=+(Math[_0x40ab7c(0x208)](+_0x412261[0x0]+'e'+_0x1abcef+(+_0x412261[0x1]+_0x1fac71))+'e-'+_0x1fac71);}return Number(_0x2e7e56)[_0x40ab7c(0x27e)](_0x1fac71);}function getServerTime(){const _0x342456=_0x1c93ed,_0x11e6b1=new Date();return _0x11e6b1[_0x342456(0x284)]()+'/'+(_0x11e6b1[_0x342456(0x1aa)]()+0x1)['toString']()[_0x342456(0x230)](0x2,'0')+'/'+_0x11e6b1[_0x342456(0x23f)]()[_0x342456(0x187)]()[_0x342456(0x230)](0x2,'0')+'\x20'+_0x11e6b1['getHours']()['toString']()[_0x342456(0x230)](0x2,'0')+':'+_0x11e6b1['getMinutes']()[_0x342456(0x187)]()[_0x342456(0x230)](0x2,'0')+':'+_0x11e6b1[_0x342456(0x249)]()[_0x342456(0x187)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x48a242=_0x1c93ed,_0x293e99=shiftedTime();return _0x293e99[_0x48a242(0x284)]()+'/'+(_0x293e99[_0x48a242(0x1aa)]()+0x1)['toString']()[_0x48a242(0x230)](0x2,'0')+'/'+_0x293e99[_0x48a242(0x23f)]()[_0x48a242(0x187)]()['padStart'](0x2,'0')+'\x20'+_0x293e99[_0x48a242(0x22a)]()[_0x48a242(0x187)]()['padStart'](0x2,'0')+':'+_0x293e99[_0x48a242(0x232)]()[_0x48a242(0x187)]()['padStart'](0x2,'0')+':'+_0x293e99[_0x48a242(0x249)]()[_0x48a242(0x187)]()[_0x48a242(0x230)](0x2,'0');}function getDate(){const _0x57604f=_0x1c93ed,_0x2bca1a=shiftedTime();return _0x2bca1a['getFullYear']()+'/'+(_0x2bca1a[_0x57604f(0x1aa)]()+0x1)[_0x57604f(0x187)]()[_0x57604f(0x230)](0x2,'0')+'/'+_0x2bca1a[_0x57604f(0x23f)]()[_0x57604f(0x187)]()[_0x57604f(0x230)](0x2,'0');}function getHour(){const _0x277b1f=_0x1c93ed,_0xdf8f24=shiftedTime();return _0xdf8f24[_0x277b1f(0x22a)]()['toString']()[_0x277b1f(0x230)](0x2,'0');}function sleep(_0x5401f0){return new Promise(_0x203370=>setTimeout(_0x203370,_0x5401f0));}function shiftedTime(){const _0xbe1fb=_0x1c93ed,_0x25b9a2=new Date();let _0x110498=_0x25b9a2;if(config&&config[_0xbe1fb(0x1a1)]!==0x0)_0x110498=fns[_0xbe1fb(0x2af)](_0x25b9a2,{'hours':config[_0xbe1fb(0x1a1)]});return _0x110498;}function _0x103d(){const _0x33bf6a=['toFixed','map','Invalid\x20quantity','ETH','argv','timeout','getFullYear','Limit\x20(high-margin)','price','secure','fiat','entries','get','/output-000.log','***','toUpperCase','apiKey','./logs/','USDC','ordertype','Uncaught\x20Exception:','BNB','coin-loading-progress','send','\x20|\x20Custom\x20ID:\x20','Executed\x20','excluded','cancelLoading','2\x20-\x20FILLED\x20unknown\x20order:\x20','2\x20-\x20Handled\x20open\x20orders','limits','onepagemode','\x20API\x20secret\x20is\x20invalid','currency','assign','findIndex','Unfilled\x20order(s)\x20canceled\x20after\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','watchOrders','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','settings','sell','data','exchange','kill','(((.+)+)+)+$','running','2.3.5','status','add','API-key\x20format\x20invalid','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Resetting\x20bot\x20history','side','sort','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','fetchTickers','highest','1056534mMqqwp','2337XtbEEt','datetime','warning','DDoSProtection','autoliquidity','existsSync','MIN_NOTIONAL','emojibuy','net-fiat','removed','string','version','fetchTicker','\x20API\x20key\x20is\x20invalid','\x20|\x20lock\x20orders:\x20','initclient','splice','delta','value','-results.json','Bot\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','-events.json','2\x20-\x20Orders\x20unlocked','cancelOrder','apiPassword','limit-high','getOpenOrders()','-config.json','</pre>','Invalid\x20API\x20key\x20or\x20secret\x20entered','BNB/','valid','threshold','slice','ORDERS.UNLOCKED','************','starting-balances','/USD','\x20|\x20','352RoPnRt','time','fromCodePoint','symbol','\x20not\x20responding','split','Initiating\x20exchange\x20reload','Crypt','exchange\x20reloaded','4432neZysN','push','date-fns','canceled','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Executing\x20exchange\x20reload','sortBy','toLowerCase','substring','13718484hXzSEF','keys','TUSD','join','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','-------------------------------\x0a','sha256','\x20minutes','differenceInSeconds','bid','rightTxt','ExchangeNotAvailable','RequestTimeout','type','remainingSymbols','target','leftTxt','getCoins()','change','botname','2.5.0','startsWith','apply','constructor','event','0\x20-\x20EXECUTION:\x20','random','getPortfolio(2)','reverse','./config/','RSA-OAEP','ticker','Initializing\x20coin\x20results','set','ongoing','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','order','no\x20open\x20orders','isEqual','defaults',':\x20timer\x20>','getPortfolio','EUR','toString','1\x20-\x20Validate\x20orders:\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','length','cloneDeep','args','stringify','format','buy','OrderNotFound','exchanges','writeFile','yyyy-MM-dd\x27T\x27HH:mm:ss','recreateCoinResults()','fee','parse','.json','startnumber','symbols','shift','amountToPrecision','LOCKED','exec','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','21dhXfxV','timeshift','/backup/','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','orderId','recovery','decrypt','watchTransactions','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','timestamp','getMonth','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','configuration','1\x20-\x20FILLED:\x20','performance','bb-secure.json','Pausing\x20for\x20','cooldown','\x20metrics:</b>\x20\x0a\x0a','BTC','Uncaught\x20NetworkError:','./version.json','offset','includes','getPortfolio(1)','progress','Exchange','find','InsufficientFunds','max','remove','amount','indexOf','logs','Saving\x20configuration','netoffset','sendMetricsTelegram','USDT','createWriteStream','page','\x20minutes\x20-\x20','placeOrder()','coin','11964LjHKTw','filled','emitHistory','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','customId','trade','ORDERS.LOCKED','final','%\x20(','Waited\x20','closed','headless','yyyy/MM/dd','enabled','fetchOpenOrders','full','abs','floor','\x20-\x20bot\x20not\x20started','bb-settings.json','changes','privateKey','Order\x20is\x20invalid:\x20','ask','001','last','test','replace','Resetting\x20coin\x20results:\x20','2.6.0','additional\x20symbols\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','usd','filter','milliseconds','padEnd','loading-canceled','pro','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','write','liquidity','event-history','ORDERS.UNLOCKING','getCoinNumber()','Transaction\x20detection\x20blocked','added',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20highest:\x20','startprice','Net\x20effect','number','debug','net-basecoin','2\x20-\x20FILLED\x20known\x20order:\x20','change24h','5LkuLeJ','fees','<b>Bot\x20','password','\x20hour','round','bots','9081gISDUm','Order\x20filled:\x20','2\x20-\x20Validate\x20orders:\x20','\x20portfolio:</b>\x20\x0a\x0a','4220UdKYnl','date','\x20>\x20[DEBUG]\x20','\x20closed\x20the\x20connection','breakeven','uncaughtException','log','-performance.json','concat','bot','colorscheme','<pre>','lowdb','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','createOrder','portfolio','USD','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','unlinkSync','forEach','no\x20additional\x20symbols','apiSecret',':\x20Bot\x20','Reset\x20|\x20','spot','balances','XEM/BUSD','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','getHours','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','average','coins','HOT/BTC','padStart','orderstatus','getMinutes','hybrid-crypto-js','Unknown\x20error\x20occured','Limit\x20(low-margin)','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','loadSymbols()','\x20order:\x20','success','<b>','has','cost','cancelOrders()','min','getDate','openOrders','recent20','1\x20-\x20Unlock\x20orders','UNLOCKING','2tjLDyx','toggleBotMode','storeConfiguration','storeFiat','limit','getSeconds','initial','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','sendPortfolioTelegram','starting-balance-','util','AuthenticationError','\x20:\x20','NetworkError','Avoiding\x20continuous\x20order\x20attempts','Bybit','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','distribution','getTime','Order(s)\x20not\x20validated\x20after\x20','total','\x20|\x20exchange:\x20','DAI/','emojisell','\x20not\x20available','open','parseISO','startdate','eur','red_yellow_blue','storeHeadless','restart','/EUR','search','fetchBalance','configuration-stored','\x20|\x20Error\x20details:\x20','watchTrades','1963712gICdwk','InvalidOrder','buys','Binance','Transaction\x20detection\x20unblocked','showname','cancel','message','balancing\x20resumes\x20when\x20cooldown\x20ends','function','realized','error','bot-','loadMarkets','options','basecoin','market','872381nemVgb','UNLOCKED','none'];_0x103d=function(){return _0x33bf6a;};return _0x103d();}function timer(_0x36378c){const _0x373d50=_0x1c93ed,_0x1d6d0e=new Date();!lasttime?console[_0x373d50(0x214)](getTimeStamp()+_0x373d50(0x184),_0x36378c,_0x1d6d0e):console[_0x373d50(0x214)](getTimeStamp()+_0x373d50(0x184),_0x36378c,(_0x1d6d0e-lasttime)/0x3e8),lasttime=_0x1d6d0e;}