const _0x1c2946=_0x4339;(function(_0x8a4e18,_0x53978e){const _0x16cf67=_0x4339,_0x55ba6d=_0x8a4e18();while(!![]){try{const _0x5d3483=parseInt(_0x16cf67(0x1ca))/0x1*(parseInt(_0x16cf67(0x1ce))/0x2)+parseInt(_0x16cf67(0x1d0))/0x3+-parseInt(_0x16cf67(0x2c0))/0x4*(parseInt(_0x16cf67(0x19d))/0x5)+-parseInt(_0x16cf67(0x1bc))/0x6*(-parseInt(_0x16cf67(0x222))/0x7)+-parseInt(_0x16cf67(0x239))/0x8*(-parseInt(_0x16cf67(0x252))/0x9)+-parseInt(_0x16cf67(0x228))/0xa*(-parseInt(_0x16cf67(0x2f0))/0xb)+parseInt(_0x16cf67(0x27f))/0xc*(-parseInt(_0x16cf67(0x1b0))/0xd);if(_0x5d3483===_0x53978e)break;else _0x55ba6d['push'](_0x55ba6d['shift']());}catch(_0x7a51c){_0x55ba6d['push'](_0x55ba6d['shift']());}}}(_0x1dc4,0xbc4b1));const _0x4b8ea2=function(){let _0x450b99=!![];return function(_0x6c118a,_0x121a33){const _0x95de69=_0x450b99?function(){const _0x832031=_0x4339;if(_0x121a33){const _0x3a712e=_0x121a33[_0x832031(0x2ab)](_0x6c118a,arguments);return _0x121a33=null,_0x3a712e;}}:function(){};return _0x450b99=![],_0x95de69;};}(),_0x448485=_0x4b8ea2(this,function(){const _0x147c9a=_0x4339;return _0x448485[_0x147c9a(0x236)]()[_0x147c9a(0x23a)](_0x147c9a(0x1cb))[_0x147c9a(0x236)]()['constructor'](_0x448485)[_0x147c9a(0x23a)](_0x147c9a(0x1cb));});_0x448485();'use strict';const ccxt=require('ccxt'),low=require(_0x1c2946(0x25f)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1c2946(0x232)),Crypt=require('hybrid-crypto-js')[_0x1c2946(0x250)],util=require(_0x1c2946(0x2f3)),argv=require('yargs/yargs')(process['argv']['slice'](0x2))[_0x1c2946(0x199)],path=require(_0x1c2946(0x23d));let exchange;global['ticker']={},global[_0x1c2946(0x227)]={};const usdBasecoins=['USD','BUSD',_0x1c2946(0x212),_0x1c2946(0x319),_0x1c2946(0x205),_0x1c2946(0x20d)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1c2946(0x1ee)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1c2946(0x2c2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x1c2946(0x1b9))['version'],botID=process['argv'][0x2]||_0x1c2946(0x218),pattern=/^[0-9]{3}$/;!pattern[_0x1c2946(0x2ad)](botID)&&(console[_0x1c2946(0x2c4)](_0x1c2946(0x30f)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x1c2946(0x199)][0x3]||'',configpath=userID?_0x1c2946(0x2a8)+userID+'/':_0x1c2946(0x2a8),logspath=userID?_0x1c2946(0x1b3)+userID+'/':_0x1c2946(0x1b3),loggerfile=fs[_0x1c2946(0x206)](logspath+_0x1c2946(0x290),{'flags':'a'});!fs[_0x1c2946(0x230)](configpath)&&fs[_0x1c2946(0x2db)](configpath);!fs['existsSync'](logspath)&&fs[_0x1c2946(0x2db)](logspath);const configfile=configpath+_0x1c2946(0x1d6)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x1c2946(0x28d),performancefile=configpath+'bot-'+botID+_0x1c2946(0x22c),coinresultsfile=configpath+'bot-'+botID+_0x1c2946(0x298),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1c2946(0x2b8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1c2946(0x19a)]({'logs':[],'version':serverversion})[_0x1c2946(0x1f6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1c2946(0x19a)]({'bot':[],'version':serverversion})[_0x1c2946(0x1f6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1c2946(0x19a)]({'coins':[],'version':serverversion})[_0x1c2946(0x1f6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1c2946(0x263),'rsaStandard':_0x1c2946(0x1cd)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x66fb1d=>{console['log'](_0x66fb1d);},'simple':_0x49cd01=>{const _0x57479c=_0x1c2946;console[_0x57479c(0x2c4)](_0x49cd01),loggerfile[_0x57479c(0x1f6)](util[_0x57479c(0x2a2)](_0x49cd01)+'\x0a');},'full':async(_0x402b95,_0x82eb0a='')=>{const _0x4014b7=_0x1c2946;let _0x51dadd;if(config['showname'])_0x51dadd=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x402b95;else _0x51dadd=getTimeStamp()+':\x20Bot\x20'+botID+_0x4014b7(0x281)+_0x402b95;console[_0x4014b7(0x2c4)](_0x51dadd),loggerfile[_0x4014b7(0x1f6)](util[_0x4014b7(0x2a2)](_0x51dadd)+'\x0a'),_0x82eb0a&&(console[_0x4014b7(0x2c4)](_0x82eb0a),loggerfile[_0x4014b7(0x1f6)](util[_0x4014b7(0x2a2)](_0x82eb0a)+'\x0a'));},'debug':async(_0x3a8b27,_0x966ae8='')=>{const _0x3c0f19=_0x1c2946;let _0x2da056;if(config['showname'])_0x2da056=getTimeStamp()+':\x20'+config[_0x3c0f19(0x322)]+_0x3c0f19(0x2a4)+_0x3a8b27;else _0x2da056=getTimeStamp()+':\x20Bot\x20'+botID+_0x3c0f19(0x2a4)+_0x3a8b27;if(debugging)console['log'](_0x2da056);loggerfile[_0x3c0f19(0x1f6)](util['format'](_0x2da056)+'\x0a');if(_0x966ae8){if(debugging)console[_0x3c0f19(0x2c4)](_0x966ae8);loggerfile[_0x3c0f19(0x1f6)](util[_0x3c0f19(0x2a2)](_0x966ae8)+'\x0a');}}};process['on'](_0x1c2946(0x2bd),function(_0xf66222){const _0x35c2a1=_0x1c2946;logHistory(_0x35c2a1(0x1db),_0x35c2a1(0x21c)),logger[_0x35c2a1(0x1a7)]('Uncaught\x20Exception:',_0xf66222);});settings[_0x1c2946(0x2d8)]!=config[_0x1c2946(0x2d8)]&&updateTimeshift(settings['timeshift']);settings[_0x1c2946(0x226)]!=config[_0x1c2946(0x226)]&&updateOnepagemode(settings['onepagemode']);process[_0x1c2946(0x303)]({'started':_0x1c2946(0x28f)},_0x5658d3=>{}),initializeProcessListeners();function proxyEmit(_0x2a3e76,_0x1d2cfd=null){const _0x1ad014=_0x1c2946;process[_0x1ad014(0x303)]({'function':_0x2a3e76,'args':_0x1d2cfd},_0x5d34ba=>{});}function initializeProcessListeners(){process['on']('message',_0x256b54=>{const _0x4e67a0=_0x4339;switch(Object[_0x4e67a0(0x2d2)](_0x256b54)[0x0]){case _0x4e67a0(0x2d8):_0x256b54[_0x4e67a0(0x2d8)]!=undefined&&(settings[_0x4e67a0(0x2d8)]=_0x256b54['timeshift'],updateTimeshift(settings[_0x4e67a0(0x2d8)]));break;case _0x4e67a0(0x226):_0x256b54[_0x4e67a0(0x226)]!=undefined&&(settings[_0x4e67a0(0x226)]=_0x256b54['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x4e67a0(0x1b8):_0x256b54[_0x4e67a0(0x1b8)]!=undefined&&(bots=JSON[_0x4e67a0(0x313)](_0x256b54['bots']),proxyEmit(_0x4e67a0(0x1b8),bots));break;case _0x4e67a0(0x311):switch(_0x256b54['function']){case _0x4e67a0(0x28e):initclient();break;case _0x4e67a0(0x2a7):toggleBotMode();break;case _0x4e67a0(0x242):emitHistory(_0x256b54[_0x4e67a0(0x1a9)]);break;case _0x4e67a0(0x1f4):deleteHistoryAlerts(_0x256b54[_0x4e67a0(0x1a9)]);break;case'getPortfolio':getPortfolio(_0x256b54[_0x4e67a0(0x1a9)]);break;case _0x4e67a0(0x1d4):storeConfiguration(_0x256b54['args']);break;case _0x4e67a0(0x1d5):storeHeadless(_0x256b54[_0x4e67a0(0x1a9)]);break;case _0x4e67a0(0x300):storeFiat(_0x256b54[_0x4e67a0(0x1a9)]);break;case _0x4e67a0(0x1df):resetHistory();break;case _0x4e67a0(0x2e7):getStartingBalances(getNormalizedPerformance());break;case _0x4e67a0(0x1b5):placeOrder(_0x256b54[_0x4e67a0(0x1a9)]);break;case _0x4e67a0(0x28a):cancelLoading();break;case _0x4e67a0(0x1f2):showConfig();break;case _0x4e67a0(0x2ee):sendMetricsTelegram();break;case _0x4e67a0(0x305):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x2d4969=null,_0x2905de=![]){const _0x533cd0=_0x1c2946;logger[_0x533cd0(0x1a7)](_0x533cd0(0x221)+(_0x2d4969&&_0x2d4969[_0x533cd0(0x1aa)]>0x0?_0x533cd0(0x245)+_0x2d4969[_0x533cd0(0x304)](','):_0x533cd0(0x2f1))+_0x533cd0(0x251)+(_0x2905de?'exchange\x20reloaded':_0x533cd0(0x1e9))+'\x20|\x20exchange:\x20'+config[_0x533cd0(0x1c9)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2905de)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x533cd0(0x296)]!=''&&config[_0x533cd0(0x296)]!=_0x533cd0(0x241)){if(_0x2905de){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4caf46){handleErrorNoStop(_0x4caf46,_0x533cd0(0x257));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x2d4969);const _0x3b022f=await getCoins();[currentCoins,currentCoinsAll]=_0x3b022f,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x533cd0(0x1aa)]==0x0&&allOpenOrders[_0x533cd0(0x1aa)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x100d51=_0x1c2946;logger['debug'](_0x100d51(0x2cf));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x100d51(0x25b)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4727d7=config[_0x1c2946(0x1c9)],_0x38831f=config[_0x1c2946(0x296)],_0x1e7ef1=config['apiSecret'],_0xda3543=config[_0x1c2946(0x278)]){const _0x4062c8=_0x1c2946;exchange&&await stopExchange();!supportedExchanges()[_0x4062c8(0x2eb)](_0x4727d7)&&(logHistory(_0x4062c8(0x1db),_0x4062c8(0x2ac)+_0x4727d7+_0x4062c8(0x1a8)),killBot());const _0x1bbbce=ccxt[_0x4062c8(0x225)][_0x4727d7['toLowerCase']()];exchange=new _0x1bbbce({'apiKey':_0x38831f,'secret':_0x1e7ef1,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4062c8(0x1ad)}});if(_0xda3543)exchange[_0x4062c8(0x2b0)]=_0xda3543;}function setStableCoins(){const _0x2e415c=_0x1c2946;let _0x378249=config[_0x2e415c(0x1f7)]=='ETH'?_0x2e415c(0x202):'BTC',_0x2c994c=!allSymbols[_0x2e415c(0x2eb)](_0x378249+_0x2e415c(0x2bb))?_0x2e415c(0x319):_0x2e415c(0x1ed),_0x407758=!allSymbols[_0x2e415c(0x2eb)](_0x378249+_0x2e415c(0x2bf))?_0x2c994c:_0x2e415c(0x1e0);stablecoins={'eur':{'coin':''+_0x378249+_0x407758,'symbol':_0x378249+'/'+_0x407758},'usd':{'coin':''+_0x378249+_0x2c994c,'symbol':_0x378249+'/'+_0x2c994c}};}async function initwsCcxt(_0x8acaf5){const _0x7d6513=_0x1c2946;_0x8acaf5==null&&(_0x8acaf5=[],config[_0x7d6513(0x2d3)][_0x7d6513(0x301)](_0x3d1526=>{const _0x1958a6=_0x7d6513;if(!_0x3d1526['excluded']&&_0x3d1526[_0x1958a6(0x1e4)]!=config[_0x1958a6(0x1f7)])_0x8acaf5['push'](_0x3d1526[_0x1958a6(0x258)]);}));if(!_0x8acaf5[_0x7d6513(0x2eb)](stablecoins['eur']['symbol']))_0x8acaf5[_0x7d6513(0x27c)](stablecoins[_0x7d6513(0x1d1)][_0x7d6513(0x258)]);if(!_0x8acaf5[_0x7d6513(0x2eb)](stablecoins[_0x7d6513(0x2d7)]['symbol']))_0x8acaf5[_0x7d6513(0x27c)](stablecoins['usd']['symbol']);if(config[_0x7d6513(0x1c9)][_0x7d6513(0x2ef)]('Binance')){if(!_0x8acaf5[_0x7d6513(0x2eb)]('BNB/'+config[_0x7d6513(0x1f7)]))_0x8acaf5[_0x7d6513(0x27c)](_0x7d6513(0x26a)+config['basecoin']);}loadCoins(_0x8acaf5);const _0xfbcb45=async _0x5de6f2=>{const _0x1dda56=_0x7d6513,_0x4c9c54=await exchange[_0x1dda56(0x23b)](_0x5de6f2);global['ticker'][noslash(_0x4c9c54[_0x1dda56(0x258)])]=_0x4c9c54[_0x1dda56(0x2d5)];while(!![]){if(!botPaused)try{const _0x556c81=await exchange[_0x1dda56(0x1bf)](_0x5de6f2);global[_0x1dda56(0x29f)][noslash(_0x556c81[0x0][_0x1dda56(0x258)])]=_0x556c81[0x0][_0x1dda56(0x229)],await sleep(0x3e8);}catch(_0xdcf0d1){if(!exchangeStopped)await handleError(_0xdcf0d1,_0x1dda56(0x1bf),_0x5de6f2);}else await sleep(0x64);}},_0x42edeb=async _0x5d93a3=>{const _0x15a1db=_0x7d6513;while(!![]){if(!botPaused)try{const _0x4d920f=await exchange[_0x15a1db(0x23b)](_0x5d93a3);global[_0x15a1db(0x227)][_0x4d920f[_0x15a1db(0x258)]]=_0x4d920f[_0x15a1db(0x24a)],await sleep(0x3c*0x3e8);}catch(_0x5cf910){if(!exchangeStopped)await handleError(_0x5cf910,_0x15a1db(0x2f5),_0x5d93a3);}else await sleep(0x64);}},_0x2ae177=async()=>{const _0x5f1ba5=_0x7d6513;while(!![]){if(!botPaused)try{const _0x5263af=await exchange[_0x5f1ba5(0x2fc)]();_0x5263af['forEach'](_0x31bfd6=>{updateNumberCoinsCcxt(_0x31bfd6);});}catch(_0x3d8473){if(!exchangeStopped)await handleError(_0x3d8473,'watchOrders');}else await sleep(0x64);}};_0x8acaf5[_0x7d6513(0x301)](_0x33e409=>{_0xfbcb45(_0x33e409),_0x42edeb(_0x33e409);}),!wsEventsSet&&(wsEventsSet=!![],_0x2ae177(),watchTransactions());}async function watchTransactions(){const _0x1f9779=_0x1c2946;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x11eb23=await getCoins(),[_0x11cb57,_0x29622d]=_0x11eb23;let _0x4c5d1b=[];currentCoins[_0x1f9779(0x301)](_0x3a3c98=>{const _0x5a2ff5=_0x1f9779,_0x1432ef=_0x11cb57[_0x5a2ff5(0x24c)](_0x30addb=>_0x30addb['coin']==_0x3a3c98[_0x5a2ff5(0x1e4)]);if(_0x1432ef){if(_0x3a3c98[_0x5a2ff5(0x31a)]!=_0x1432ef[_0x5a2ff5(0x31a)]){let _0x238f0b;if(_0x3a3c98[_0x5a2ff5(0x1e4)]!=config[_0x5a2ff5(0x1f7)]){const _0x16d86a=global[_0x5a2ff5(0x29f)][noslash(_0x3a3c98[_0x5a2ff5(0x258)])];_0x238f0b=_0x3a3c98['reverse']?0x1/_0x16d86a:_0x16d86a;}else _0x238f0b=0x1;_0x4c5d1b[_0x5a2ff5(0x27c)]({'coin':_0x3a3c98['coin'],'symbol':_0x3a3c98[_0x5a2ff5(0x258)],'price':_0x238f0b,'number':Number(formatResult(_0x1432ef[_0x5a2ff5(0x31a)]-_0x3a3c98[_0x5a2ff5(0x31a)],0x8)),'basecoinvalue':_0x238f0b*(_0x1432ef[_0x5a2ff5(0x31a)]-_0x3a3c98[_0x5a2ff5(0x31a)])});}}});if(_0x4c5d1b[_0x1f9779(0x1aa)]==0x1&&!blockTransactionDetection){if(config[_0x1f9779(0x200)]){logger[_0x1f9779(0x1a7)](_0x1f9779(0x26d)+_0x4c5d1b[0x0][_0x1f9779(0x208)]+_0x1f9779(0x29e)+lastFees[_0x1f9779(0x30a)]);if(lastFees[_0x1f9779(0x30a)]==0x0||Math[_0x1f9779(0x224)](_0x4c5d1b[0x0][_0x1f9779(0x208)])>lastFees[_0x1f9779(0x30a)]){delete _0x4c5d1b[0x0]['symbol'],delete _0x4c5d1b[0x0][_0x1f9779(0x208)];let _0x4d08d9=[],_0x5a7ee3=[...config[_0x1f9779(0x1c8)]]||[],_0x2d6f61=config[_0x1f9779(0x1c8)];_0x5a7ee3[_0x1f9779(0x314)]((_0x267f2c,_0x1927e3)=>_0x267f2c[_0x1f9779(0x285)]>_0x1927e3[_0x1f9779(0x285)]?-0x1:_0x1927e3[_0x1f9779(0x285)]>_0x267f2c[_0x1f9779(0x285)]?0x1:0x0);const _0x4b66ba=getDate();if(_0x5a7ee3[0x0]){const _0x127fc1=fns[_0x1f9779(0x313)](_0x5a7ee3[0x0][_0x1f9779(0x285)],_0x1f9779(0x1f5),new Date()),_0x34df62=fns[_0x1f9779(0x313)](_0x4b66ba,'yyyy/MM/dd',new Date());if(fns[_0x1f9779(0x23c)](_0x127fc1,_0x34df62)){_0x4d08d9=_0x5a7ee3[0x0][_0x1f9779(0x2da)];const _0x5eb775=_0x4d08d9[_0x1f9779(0x24c)](_0x583450=>_0x583450[_0x1f9779(0x1e4)]==_0x4c5d1b[0x0][_0x1f9779(0x1e4)]);_0x5eb775?(_0x5eb775['number']+=_0x4c5d1b[0x0][_0x1f9779(0x31a)],_0x5eb775[_0x1f9779(0x31a)]==0x0&&(_0x4d08d9=_0x4d08d9[_0x1f9779(0x261)](_0x30d29b=>{const _0x40e104=_0x1f9779;return _0x30d29b[_0x40e104(0x1e4)]!=_0x4c5d1b[0x0][_0x40e104(0x1e4)];}))):_0x4d08d9[_0x1f9779(0x27c)](_0x4c5d1b[0x0]);const _0x4d4412=_0x2d6f61['find'](_0x1bb456=>_0x1bb456[_0x1f9779(0x285)]==_0x4b66ba);_0x4d4412['changes']=_0x4d08d9;}else _0x2d6f61['push']({'date':_0x4b66ba,'changes':[_0x4c5d1b[0x0]]});}const _0xcca862=_0x2d6f61[_0x1f9779(0x24c)](_0x1a7002=>_0x1a7002[_0x1f9779(0x285)]==_0x4b66ba);if(_0xcca862){let _0x162328=!![];_0xcca862[_0x1f9779(0x2da)]['forEach'](_0x508a0c=>{if(_0x508a0c['number']!=0x0)_0x162328=![];}),_0x162328&&(_0x2d6f61=_0x2d6f61[_0x1f9779(0x261)](_0x268f5b=>{const _0x4d6f1e=_0x1f9779;return _0x268f5b[_0x4d6f1e(0x285)]!=_0x4b66ba;}));}let _0x2bb543=dbConfig['get'](_0x1f9779(0x25d))[_0x1f9779(0x24c)]({'botID':botID})['value']();_0x2bb543&&(dbConfig[_0x1f9779(0x2ca)](_0x1f9779(0x25d))[_0x1f9779(0x24c)]({'botID':botID})[_0x1f9779(0x25c)]({'liquidity':_0x2d6f61})[_0x1f9779(0x1f6)](),config[_0x1f9779(0x1c8)]=_0x2d6f61),logHistory('success',_0x1f9779(0x214)+Math[_0x1f9779(0x224)](_0x4c5d1b[0x0][_0x1f9779(0x31a)])+'\x20'+_0x4c5d1b[0x0]['coin']+'\x20'+(_0x4c5d1b[0x0]['number']>0x0?_0x1f9779(0x266):_0x1f9779(0x260))+_0x1f9779(0x1b6)),proxyEmit(_0x1f9779(0x2ea),emittedConfiguration());}else logger['debug'](_0x1f9779(0x2cd)+Math[_0x1f9779(0x224)](_0x4c5d1b[0x0]['number'])+'\x20'+_0x4c5d1b[0x0][_0x1f9779(0x1e4)]+'\x20'+(_0x4c5d1b[0x0]['number']>0x0?_0x1f9779(0x266):_0x1f9779(0x260)));transactionDetected=!![],currentCoins=_0x11cb57,currentCoinsAll=_0x29622d;}else logger[_0x1f9779(0x1a7)](_0x1f9779(0x214)+Math['abs'](_0x4c5d1b[0x0]['number'])+'\x20'+_0x4c5d1b[0x0][_0x1f9779(0x1e4)]+'\x20'+(_0x4c5d1b[0x0][_0x1f9779(0x31a)]>0x0?_0x1f9779(0x266):_0x1f9779(0x260))+_0x1f9779(0x231)),currentCoins=_0x11cb57,currentCoinsAll=_0x29622d;}await sleep(watchTransactionsInterval);}catch(_0x9def3a){if(!exchangeStopped)await handleError(_0x9def3a,_0x1f9779(0x26e));}else await sleep(0x64);}}async function loadSymbols(_0x234967=config['exchange'],_0xbbfce7=![]){const _0x4b9a50=_0x1c2946;if(allSymbols&&!_0xbbfce7)return;try{markets=await exchange[_0x4b9a50(0x2b1)](),allSymbols=[],Object['entries'](markets)[_0x4b9a50(0x301)](_0x532af7=>{const _0x1be186=_0x4b9a50;_0x532af7[0x1][_0x1be186(0x217)]&&_0x532af7[0x1][_0x1be186(0x1ad)]&&allSymbols[_0x1be186(0x27c)](_0x532af7[0x0]);});}catch(_0x3ad1b5){throw _0x3ad1b5;}}async function initclient(){const _0x3f79fd=_0x1c2946;emitLoadingProgress(),proxyEmit(_0x3f79fd(0x2ea),emittedConfiguration()),proxyEmit(_0x3f79fd(0x270),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4aef94=getNormalizedPerformance();emitPerformance(_0x4aef94),getStartingBalances(_0x4aef94);}async function toggleBotMode(){const _0x483d0c=_0x1c2946;let _0x3fea89=dbConfig[_0x483d0c(0x2ca)](_0x483d0c(0x25d))['find']({'botID':botID})[_0x483d0c(0x2be)]();if(_0x3fea89){const _0x3f1de1=!_0x3fea89[_0x483d0c(0x1fb)];dbConfig[_0x483d0c(0x2ca)](_0x483d0c(0x25d))[_0x483d0c(0x24c)]({'botID':botID})['assign']({'headless':_0x3f1de1})[_0x483d0c(0x1f6)](),config['headless']=_0x3f1de1,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1370ca=_0x1c2946;process[_0x1370ca(0x303)]({'updatebotmanager':!![]},_0x4f0f43=>{});}async function loadCoins(_0x224b8e){const _0x5ed80c=_0x1c2946;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3d99eb,_0xe5ee99=0x0,_0xe578f2=0x0;_0x224b8e[_0x5ed80c(0x301)](_0x444973=>{loading['remainingSymbols']['push'](_0x444973);}),loadingCanceled=![];let _0x4acee9=![];while(_0x3d99eb!=_0x224b8e[_0x5ed80c(0x1aa)]){_0x3d99eb=0x0,_0x224b8e[_0x5ed80c(0x301)](_0x23a264=>{const _0x3e651d=_0x5ed80c;if(global[_0x3e651d(0x29f)][noslash(_0x23a264)]){loading[_0x3e651d(0x2e8)]=loading['remainingSymbols']['filter'](_0x227bec=>_0x227bec!=_0x23a264);if(!watchedSymbols['includes'](_0x23a264))watchedSymbols['push'](_0x23a264);_0x3d99eb++;}}),loading[_0x5ed80c(0x213)]=Math['round'](_0x3d99eb/_0x224b8e[_0x5ed80c(0x1aa)]*0x64);loading['progress']!=0x64&&(_0xe578f2>0x1e*0x5&&(loading[_0x5ed80c(0x1ba)]=!![],emitLoadingProgress()),_0xe578f2>0x78*0x5&&!_0x4acee9&&(loading[_0x5ed80c(0x2e0)]=!![],emitLoadingProgress(),_0x4acee9=!![],logHistory('error',_0x5ed80c(0x312)+loading[_0x5ed80c(0x2e8)]['join'](',\x20')+_0x5ed80c(0x2ed)),logHistory(_0x5ed80c(0x1db),_0x5ed80c(0x316)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x59e05e=_0x5ed80c;process[_0x59e05e(0x303)]({'stop':_0x59e05e(0x267)},_0x25dc05=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5ed80c(0x2e0)]=!![],emitLoadingProgress();break;}else _0x3d99eb!=_0xe5ee99&&(_0xe5ee99=_0x3d99eb,emitLoadingProgress()),_0xe578f2++,await sleep(0xc8);}_0x3d99eb==_0x224b8e['length']&&(coinsLoaded=!![],process[_0x5ed80c(0x303)]({'status':'enabled','live':_0x5ed80c(0x28f)},_0x2e8ac9=>{}),_0x4acee9&&logHistory(_0x5ed80c(0x2c1),_0x5ed80c(0x310)));}function _0x4339(_0x5ca0f4,_0x19d73a){const _0x536af1=_0x1dc4();return _0x4339=function(_0x448485,_0x4b8ea2){_0x448485=_0x448485-0x198;let _0x1dc4c2=_0x536af1[_0x448485];return _0x1dc4c2;},_0x4339(_0x5ca0f4,_0x19d73a);}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4f1056=_0x1c2946;proxyEmit(_0x4f1056(0x2ea),{...emittedConfiguration(),'configstate':_0x4f1056(0x2a9)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x478eca=_0x1c2946;let _0x4d6098=global[_0x478eca(0x29f)][stablecoins['eur'][_0x478eca(0x1e4)]],_0x142231=global['ticker'][stablecoins[_0x478eca(0x2d7)]['coin']];return{'eur':Number(_0x4d6098),'usd':Number(_0x142231)};}function capitalize(_0x54555f){const _0xab3960=_0x1c2946;return _0x54555f[_0xab3960(0x1c5)](0x0,0x1)[_0xab3960(0x27a)]()+_0x54555f[_0xab3960(0x1c5)](0x1);}function supportedExchanges(){const _0x42c53a=_0x1c2946,_0x256d94=['ws',_0x42c53a(0x2f5),_0x42c53a(0x23b),'watchTrades',_0x42c53a(0x2fc),'cancelOrder','createOrder','fetchOpenOrders',_0x42c53a(0x2fa),_0x42c53a(0x2df)];let _0x5142f3=[],_0xf44fe=[],_0x3ad8a1=ccxt['pro'][_0x42c53a(0x270)];_0x3ad8a1[_0x42c53a(0x301)](_0x150d09=>{const _0x3a8eca=_0x42c53a;try{const _0x1caccf=new ccxt[(_0x3a8eca(0x225))][_0x150d09]();_0xf44fe[_0x3a8eca(0x27c)](_0x1caccf);}catch(_0x43d365){}}),_0xf44fe[_0x42c53a(0x301)](_0x12e22b=>{const _0x2d1ffb=_0x42c53a;let _0x2cee14=0x0;_0x256d94[_0x2d1ffb(0x301)](_0x1140ed=>{const _0xe4b6cd=_0x2d1ffb;_0x1140ed in _0x12e22b[_0xe4b6cd(0x269)]&&_0x12e22b[_0xe4b6cd(0x269)][_0x1140ed]&&_0x2cee14++;}),_0x2cee14==_0x256d94[_0x2d1ffb(0x1aa)]&&_0x5142f3[_0x2d1ffb(0x27c)](capitalize(_0x12e22b['id']));});let _0x370539=[];return _0x3ad8a1[_0x42c53a(0x301)](_0x4b1a54=>{const _0x52b2cb=_0x42c53a;_0x4b1a54=capitalize(_0x4b1a54);if(!_0x5142f3[_0x52b2cb(0x2eb)](_0x4b1a54))_0x370539['push'](_0x4b1a54);}),_0x5142f3;}function setStartDatePerformance(){const _0x29f395=_0x1c2946;if(config&&config[_0x29f395(0x1c8)][0x0]['changes'][_0x29f395(0x1aa)]!=0x0){const _0xd0a652=config['liquidity'][0x0][_0x29f395(0x2da)];dbPerformance[_0x29f395(0x2ca)](_0x29f395(0x287))[_0x29f395(0x24c)]({'date':config[_0x29f395(0x240)]})[_0x29f395(0x25c)]({'coins':_0xd0a652})[_0x29f395(0x1f6)]();}}async function recreateCoinResults(){const _0x52d1b2=_0x1c2946;let _0x195ecb,_0x41ebdd=[];try{const _0x2d60c4=fns[_0x52d1b2(0x2a2)](fns['parseISO'](config[_0x52d1b2(0x240)][_0x52d1b2(0x283)](/\//g,'-')),_0x52d1b2(0x2fd));for(const _0x26a85c of currentCoins){if(_0x26a85c[_0x52d1b2(0x1e4)]!=config[_0x52d1b2(0x1f7)]){let _0x4605b6=0x0,_0x1c53fe,_0xa1e955;_0x195ecb=await getAllEventOrders(_0x26a85c['symbol']);if(_0x195ecb[_0x52d1b2(0x1aa)]>0x0)_0x195ecb[_0x52d1b2(0x301)](_0x28da88=>{const _0x55a956=_0x52d1b2,_0x4de79f=_0x26a85c[_0x55a956(0x258)][_0x55a956(0x2eb)](config[_0x55a956(0x1f7)]+'/');_0x41ebdd['push']({'datetime':_0x28da88[_0x55a956(0x238)],'coin':_0x26a85c[_0x55a956(0x1e4)],'symbol':_0x26a85c[_0x55a956(0x258)],'side':_0x28da88[_0x55a956(0x209)],'reverse':_0x4de79f,'amount':formatResult(_0x28da88[_0x55a956(0x292)],0x8),'filled':formatResult(_0x28da88['filled'],0x8),'price':formatResult(_0x28da88[_0x55a956(0x229)],0x8)}),_0x4605b6=_0x28da88[_0x55a956(0x209)]==_0x55a956(0x1d7)?_0x4605b6+_0x28da88[_0x55a956(0x292)]:_0x4605b6-_0x28da88[_0x55a956(0x292)];if(!_0xa1e955)_0xa1e955=_0x28da88[_0x55a956(0x229)];});_0x1c53fe=_0x26a85c[_0x52d1b2(0x31a)]-_0x4605b6;let _0x13ed13;config[_0x52d1b2(0x1c8)][_0x52d1b2(0x301)](_0x58311f=>{const _0x3558c3=_0x52d1b2;!_0x13ed13&&(_0x13ed13=_0x58311f[_0x3558c3(0x2da)][_0x3558c3(0x24c)](_0x58f65b=>_0x58f65b[_0x3558c3(0x1e4)]==_0x26a85c[_0x3558c3(0x1e4)]),_0x13ed13&&(_0x1c53fe=_0x13ed13[_0x3558c3(0x31a)],_0xa1e955=_0x13ed13[_0x3558c3(0x229)]));});let _0x8698cb=dbCoinResults[_0x52d1b2(0x2ca)](_0x52d1b2(0x295))[_0x52d1b2(0x24c)]({'coin':_0x26a85c[_0x52d1b2(0x1e4)]})['value']();_0x8698cb={'coin':_0x26a85c[_0x52d1b2(0x1e4)],'number':_0x1c53fe,'breakeven':_0xa1e955,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x52d1b2(0x2ca)]('coins')[_0x52d1b2(0x24c)]({'coin':_0x26a85c[_0x52d1b2(0x1e4)]})[_0x52d1b2(0x25c)](_0x8698cb)[_0x52d1b2(0x1f6)]();}}_0x41ebdd[_0x52d1b2(0x314)]((_0x40c59a,_0x10a207)=>_0x40c59a[_0x52d1b2(0x238)]>_0x10a207[_0x52d1b2(0x238)]?0x1:_0x10a207['datetime']>_0x40c59a['datetime']?-0x1:0x0);let _0x217427=0x0;for(let _0x147f19 of _0x41ebdd){await updateCoinResults(_0x147f19,!![]);}}catch(_0xafdbb4){await handleError(_0xafdbb4,'recreateCoinResults()');}}async function getAllEventOrders(_0x58a33d){const _0x29926c=_0x1c2946;let _0x54952e=[],_0x40fc35=dbLogs[_0x29926c(0x2ca)](_0x29926c(0x1a6))[_0x29926c(0x261)](_0x4a9bff=>{const _0x5a132e=_0x29926c,_0x31890f=_0x4a9bff[_0x5a132e(0x1e2)][_0x5a132e(0x309)]();return _0x31890f[_0x5a132e(0x2eb)](_0x58a33d[_0x5a132e(0x309)]())&&(_0x31890f[_0x5a132e(0x2eb)](_0x5a132e(0x2d9))&&_0x31890f['includes'](_0x5a132e(0x2c7))||_0x31890f[_0x5a132e(0x2eb)](_0x5a132e(0x292))&&_0x31890f[_0x5a132e(0x2eb)](_0x5a132e(0x2c7)));})[_0x29926c(0x1fe)](_0x29926c(0x1ae))[_0x29926c(0x2be)]();return _0x40fc35[_0x29926c(0x301)](_0xa9f543=>{const _0x27dfd0=_0x29926c,_0x48aacf=_0xa9f543[_0x27dfd0(0x1e2)][_0x27dfd0(0x2eb)](_0x27dfd0(0x1dc))?'sell':_0x27dfd0(0x1d7),_0x617d51=/#([0-9]|\.)+\s/i,_0x48ff5=Number(_0x617d51[_0x27dfd0(0x22e)](_0xa9f543[_0x27dfd0(0x1e2)])[0x0][_0x27dfd0(0x1c6)](0x1)),_0x2ef288=/@([0-9]|\.)+$/i,_0xf88715=Number(_0x2ef288['exec'](_0xa9f543[_0x27dfd0(0x1e2)])[0x0]['slice'](0x1));_0x54952e[_0x27dfd0(0x27c)]({'datetime':_0xa9f543[_0x27dfd0(0x1ae)],'coin':symbolToCoin(_0x58a33d),'symbol':_0x58a33d,'side':_0x48aacf,'amount':_0x48ff5,'filled':_0x48ff5,'price':_0xf88715});}),_0x54952e;}async function getAllOrders(_0x3599bf,_0x5d4dce){const _0x15a27d=_0x1c2946;let _0x40f18f=[];while(_0x5d4dce<exchange['milliseconds']()){const _0x2a4909=0x1f4,_0xb11391=await exchange['fetchClosedOrders'](_0x3599bf,_0x5d4dce,_0x2a4909);if(_0xb11391[_0x15a27d(0x1aa)])_0x5d4dce=_0xb11391[_0xb11391[_0x15a27d(0x1aa)]-0x1][_0x15a27d(0x315)]+0x1,_0x40f18f=_0x40f18f[_0x15a27d(0x248)](_0xb11391);else break;}return _0x40f18f;}async function validate24hChanges(){const _0x3193bc=_0x1c2946;for(const _0x5ae332 of currentCoins){if(_0x5ae332[_0x3193bc(0x1e4)]!=config[_0x3193bc(0x1f7)]){let _0x19fd5c;_0x5ae332[_0x3193bc(0x259)]?_0x19fd5c=formatResult((0x1/(global[_0x3193bc(0x227)][noslash(_0x5ae332['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x19fd5c=global[_0x3193bc(0x227)][noslash(_0x5ae332[_0x3193bc(0x258)])],_0x19fd5c<config['change24h']&&(logHistory(_0x3193bc(0x1db),_0x5ae332[_0x3193bc(0x1e4)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x19fd5c+'%'),logHistory(_0x3193bc(0x1db),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x3193bc(0x1db),_0x3193bc(0x203)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x315e3a,_0x30f7ed){if(!_0x315e3a)return!![];const _0x25b06d=_0x30f7ed['split']('.'),_0x57051a=_0x315e3a['split']('.');for(var _0xab76dd=0x0;_0xab76dd<_0x57051a['length'];_0xab76dd++){const _0x4e25a6=~~_0x57051a[_0xab76dd],_0x31969e=~~_0x25b06d[_0xab76dd];if(_0x4e25a6<_0x31969e)return!![];if(_0x4e25a6>_0x31969e)return![];}return![];}async function oneTimeMigration(){const _0x304689=_0x1c2946;let _0x2ac447=dbLogs[_0x304689(0x2ca)]('version')[_0x304689(0x2be)]();if(isOlderVersion(_0x2ac447,_0x304689(0x2dc))){let _0x502c05=[];const _0x74cf4c=dbLogs[_0x304689(0x2ca)]('logs')[_0x304689(0x2be)]();_0x74cf4c[_0x304689(0x301)](_0xc2a403=>{const _0x3e1d04=_0x304689;_0x502c05['push']({'time':_0xc2a403[_0x3e1d04(0x1ae)],'type':_0xc2a403[_0x3e1d04(0x2cb)],'event':_0xc2a403[_0x3e1d04(0x1e2)]});}),dbLogs[_0x304689(0x2ca)](_0x304689(0x1a6))[_0x304689(0x25c)](_0x502c05)[_0x304689(0x1f6)]();}let _0x5d10b7=dbConfig[_0x304689(0x2ca)](_0x304689(0x21f))[_0x304689(0x2be)]();if(isOlderVersion(_0x5d10b7,_0x304689(0x2dc))){let _0x14bd1f=dbConfig[_0x304689(0x2ca)](_0x304689(0x25d))[_0x304689(0x24c)]({'botID':botID})['value']();if(_0x14bd1f){let _0x5925a0=[];_0x14bd1f[_0x304689(0x2d3)][_0x304689(0x301)](_0x5e6ce9=>{const _0x17c643=_0x304689;_0x5925a0[_0x17c643(0x27c)]({'coin':_0x5e6ce9[_0x17c643(0x1e4)],'number':_0x5e6ce9['startnumber'],'price':_0x5e6ce9[_0x17c643(0x2e9)]}),delete _0x5e6ce9['startnumber'],delete _0x5e6ce9['startprice'];});if(_0x5925a0[_0x304689(0x1aa)]!==0x0)fs[_0x304689(0x1b2)](configbackuppath+(_0x304689(0x216)+botID+_0x304689(0x1eb)),JSON[_0x304689(0x207)](_0x5925a0,null,0x4),function(_0x398c3a){if(_0x398c3a){}});const _0x5a14fc=(_0x3a9790,_0x479b22)=>{const _0x384a74=_0x304689;let _0x14fff4=[];_0x479b22['forEach'](_0x3ea5ec=>{const _0x33e510=_0x4339,_0x39ed0d=_0x3a9790[_0x33e510(0x24c)](_0x10cd79=>_0x10cd79[_0x33e510(0x1e4)]==_0x3ea5ec['coin']);if(!_0x39ed0d)_0x14fff4[_0x33e510(0x27c)](_0x3ea5ec);});let _0x5c2ea9=[];return _0x3a9790[_0x384a74(0x301)](_0x422e10=>{const _0x3dd319=_0x384a74,_0x3eb8d4=_0x479b22['find'](_0x1ca6e8=>_0x1ca6e8['coin']==_0x422e10[_0x3dd319(0x1e4)]);if(!_0x3eb8d4||_0x3eb8d4[_0x3dd319(0x31a)]==0x0&&_0x422e10['number']!=0x0)_0x5c2ea9[_0x3dd319(0x27c)](_0x422e10);}),{'missingDay1':_0x14fff4,'notInDay2':_0x5c2ea9};},_0x583c19=dbPerformance[_0x304689(0x2ca)]('data')[_0x304689(0x1d9)]()[_0x304689(0x2be)]();if(_0x583c19[_0x304689(0x1aa)]>0x1){const {missingDay1:_0x513cb9,notInDay2:_0x20b1d6}=_0x5a14fc(_0x5925a0,_0x583c19[0x1][_0x304689(0x295)]);_0x5925a0=[..._0x5925a0,..._0x513cb9],_0x20b1d6['forEach'](_0xd416e4=>{const _0x1f8ade=_0x304689;let _0x51ce38=_0x5925a0[_0x1f8ade(0x1e1)](_0x452266=>_0x452266[_0x1f8ade(0x1e4)]==_0xd416e4[_0x1f8ade(0x1e4)]);_0x51ce38!=-0x1&&_0x5925a0[_0x1f8ade(0x2c9)](_0x51ce38,0x1);});}_0x5925a0[_0x304689(0x314)]((_0x5560dc,_0x327689)=>_0x5560dc['coin']>_0x327689[_0x304689(0x1e4)]?0x1:_0x327689[_0x304689(0x1e4)]>_0x5560dc['coin']?-0x1:0x0);let _0x49ba47=[{'date':_0x14bd1f['startdate'],'changes':_0x5925a0}];_0x583c19['length']>0x2&&_0x583c19['forEach']((_0x15d5f1,_0x5bb58d)=>{const _0x583a63=_0x304689;if(_0x5bb58d>0x0&&_0x5bb58d<_0x583c19[_0x583a63(0x1aa)]-0x1){const {missingDay1:_0x52d554,notInDay2:_0x167f18}=_0x5a14fc(_0x583c19[_0x5bb58d][_0x583a63(0x295)],_0x583c19[_0x5bb58d+0x1][_0x583a63(0x295)]);_0x5925a0=[],(_0x52d554[_0x583a63(0x1aa)]!=0x0||_0x167f18[_0x583a63(0x1aa)]!=0x0)&&(_0x52d554[_0x583a63(0x1aa)]!=0x0&&_0x5925a0[_0x583a63(0x27c)](..._0x52d554),_0x167f18['length']!=0x0&&(_0x167f18['forEach'](_0x400f8a=>{const _0x153b8c=_0x583a63;_0x400f8a[_0x153b8c(0x31a)]=-_0x400f8a[_0x153b8c(0x31a)];}),_0x5925a0[_0x583a63(0x27c)](..._0x167f18)),_0x5925a0['sort']((_0x2eb628,_0xbbcd2c)=>_0x2eb628[_0x583a63(0x1e4)]>_0xbbcd2c[_0x583a63(0x1e4)]?0x1:_0xbbcd2c['coin']>_0x2eb628[_0x583a63(0x1e4)]?-0x1:0x0),_0x49ba47[_0x583a63(0x27c)]({'date':_0x583c19[_0x5bb58d+0x1][_0x583a63(0x285)],'changes':_0x5925a0}));}}),dbConfig[_0x304689(0x2ca)](_0x304689(0x25d))[_0x304689(0x24c)]({'botID':botID})[_0x304689(0x25c)]({..._0x14bd1f,'liquidity':_0x49ba47})[_0x304689(0x1f6)]();}}if(isOlderVersion(_0x5d10b7,_0x304689(0x1a1))){let _0x55ca87=dbConfig[_0x304689(0x2ca)]('bot')[_0x304689(0x24c)]({'botID':botID})[_0x304689(0x2be)]();if(_0x55ca87){const _0xc4bb=_0x55ca87[_0x304689(0x1c9)],_0x4961de=_0xc4bb?capitalize(_0xc4bb):_0x304689(0x1c1);dbConfig['get'](_0x304689(0x25d))['find']({'botID':botID})[_0x304689(0x25c)]({'exchange':_0x4961de})[_0x304689(0x1f6)]();}}let _0x27f866=dbPerformance[_0x304689(0x2ca)](_0x304689(0x21f))[_0x304689(0x2be)]();isOlderVersion(_0x27f866,_0x304689(0x2dc))&&setStartDatePerformance();let _0x368cc7=dbCoinResults[_0x304689(0x2ca)](_0x304689(0x21f))[_0x304689(0x2be)]();if(isOlderVersion(_0x368cc7,_0x304689(0x306))){let _0x2f118f=dbCoinResults[_0x304689(0x2ca)](_0x304689(0x295))[_0x304689(0x2be)]();if(_0x2f118f[_0x304689(0x1aa)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1262f4=_0x1c2946;dbConfig[_0x1262f4(0x31c)](_0x1262f4(0x21f),serverversion)[_0x1262f4(0x1f6)](),dbPerformance[_0x1262f4(0x31c)](_0x1262f4(0x21f),serverversion)[_0x1262f4(0x1f6)](),dbLogs[_0x1262f4(0x31c)](_0x1262f4(0x21f),serverversion)[_0x1262f4(0x1f6)](),dbCoinResults[_0x1262f4(0x31c)](_0x1262f4(0x21f),serverversion)['write']();}function getConfiguration(_0x4133c8){const _0x2434ea=_0x1c2946;let _0x1403e2=dbConfig[_0x2434ea(0x2ca)](_0x2434ea(0x25d))['find']({'botID':_0x4133c8})['value']();if(_0x1403e2){let _0x183cb8=![];typeof _0x1403e2[_0x2434ea(0x2cc)]==_0x2434ea(0x2b6)&&(_0x1403e2={..._0x1403e2,'threshold':Number(_0x1403e2[_0x2434ea(0x2cc)])},_0x183cb8=!![]),_0x1403e2['change24h']==undefined&&(_0x1403e2={..._0x1403e2,'change24h':-0x14},_0x183cb8=!![]),_0x1403e2['fiat']==undefined&&(_0x1403e2={..._0x1403e2,'fiat':'USD'},_0x183cb8=!![]),_0x1403e2[_0x2434ea(0x226)]==undefined&&(_0x1403e2={..._0x1403e2,'onepagemode':settings['onepagemode']},_0x183cb8=!![]),_0x1403e2[_0x2434ea(0x26c)]==undefined&&(_0x1403e2={..._0x1403e2,'colorscheme':_0x2434ea(0x2c8)},_0x183cb8=!![]),_0x1403e2['autoliquidity']==undefined&&(_0x1403e2={..._0x1403e2,'autoliquidity':!![]},_0x183cb8=!![]),_0x183cb8&&(_0x1403e2={'botID':_0x1403e2['botID'],'exchange':_0x1403e2['exchange'],'apiKey':_0x1403e2[_0x2434ea(0x296)],'apiSecret':_0x1403e2[_0x2434ea(0x244)],'apiPassword':_0x1403e2[_0x2434ea(0x278)],'basecoin':_0x1403e2[_0x2434ea(0x1f7)],'botname':_0x1403e2['botname'],'showname':_0x1403e2[_0x2434ea(0x2fe)],'threshold':_0x1403e2[_0x2434ea(0x2cc)],'ordertype':_0x1403e2[_0x2434ea(0x294)],'timeout':_0x1403e2[_0x2434ea(0x1ba)],'fiat':_0x1403e2['fiat'],'startdate':_0x1403e2[_0x2434ea(0x240)],'recreate':_0x1403e2[_0x2434ea(0x29a)],'timeshift':_0x1403e2[_0x2434ea(0x2d8)],'onepagemode':_0x1403e2[_0x2434ea(0x226)],'headless':_0x1403e2[_0x2434ea(0x1fb)],'cooldown':_0x1403e2['cooldown'],'change24h':_0x1403e2['change24h'],'emojibuy':_0x1403e2['emojibuy'],'emojisell':_0x1403e2[_0x2434ea(0x2b5)],'colorscheme':_0x1403e2[_0x2434ea(0x26c)],'portfolio':_0x1403e2['portfolio'],'autoliquidity':_0x1403e2[_0x2434ea(0x200)],'liquidity':_0x1403e2[_0x2434ea(0x1c8)],'openOrders':_0x1403e2[_0x2434ea(0x1f9)]},dbConfig[_0x2434ea(0x2ca)](_0x2434ea(0x25d))[_0x2434ea(0x262)]()['write'](),dbConfig[_0x2434ea(0x2ca)](_0x2434ea(0x25d))[_0x2434ea(0x27c)](_0x1403e2)[_0x2434ea(0x1f6)]());}else _0x1403e2={'botID':_0x4133c8,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x4133c8,'showname':![],'threshold':0x3,'ordertype':_0x2434ea(0x2d9),'timeout':0x14,'fiat':_0x2434ea(0x1ed),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2434ea(0x2d8)],'onepagemode':settings[_0x2434ea(0x226)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1403e2;}function emittedConfiguration(){const _0x2b7836=_0x1c2946;let _0x5bc12f;if(config[_0x2b7836(0x296)]=='')_0x5bc12f={...config,'configstate':_0x2b7836(0x273)};else config[_0x2b7836(0x296)]=='***'?_0x5bc12f={...config,'configstate':_0x2b7836(0x2ff)}:(_0x5bc12f={...config,'apiKey':_0x2b7836(0x289),'apiSecret':'************'},config[_0x2b7836(0x278)]&&(_0x5bc12f[_0x2b7836(0x278)]='************'));return _0x5bc12f;}function getSettings(){const _0x9683ed=_0x1c2946;return dbSettings[_0x9683ed(0x2ca)](_0x9683ed(0x28b))[_0x9683ed(0x2be)]();}function getSecure(){const _0x8caf97=_0x1c2946;return dbSecure['get'](_0x8caf97(0x1ea))['value']()||{};}function updateTimeshift(_0x3a0271){const _0x4c623b=_0x1c2946;let _0x2b0896=dbConfig[_0x4c623b(0x2ca)](_0x4c623b(0x25d))[_0x4c623b(0x24c)]({'botID':botID})[_0x4c623b(0x2be)]();_0x2b0896&&dbConfig[_0x4c623b(0x2ca)](_0x4c623b(0x25d))[_0x4c623b(0x24c)]({'botID':botID})[_0x4c623b(0x25c)]({'timeshift':_0x3a0271})[_0x4c623b(0x1f6)](),config[_0x4c623b(0x2d8)]=_0x3a0271,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x39c010){const _0x26cfcf=_0x1c2946;let _0x2103fe=dbConfig[_0x26cfcf(0x2ca)]('bot')[_0x26cfcf(0x24c)]({'botID':botID})[_0x26cfcf(0x2be)]();_0x2103fe&&dbConfig['get'](_0x26cfcf(0x25d))['find']({'botID':botID})[_0x26cfcf(0x25c)]({'onepagemode':_0x39c010})[_0x26cfcf(0x1f6)](),config[_0x26cfcf(0x226)]=_0x39c010,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x358f1b){const _0x5ead9d=_0x1c2946;logger[_0x5ead9d(0x1a7)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x5ead9d(0x24e));let _0x58db0a=[],_0x337f55=![],_0x2f7951=![],_0x1d6354=[];_0x358f1b[_0x5ead9d(0x2d3)]['forEach'](_0x13f8ee=>{const _0x176a48=_0x5ead9d;if(!_0x13f8ee[_0x176a48(0x1e5)]&&_0x13f8ee[_0x176a48(0x1e4)]!=_0x358f1b['basecoin'])_0x1d6354['push'](_0x13f8ee[_0x176a48(0x258)]);}),_0x1d6354[_0x5ead9d(0x301)](_0x59bf65=>{const _0x39ce62=_0x5ead9d,_0x58b1e5=watchedSymbols[_0x39ce62(0x2eb)](_0x59bf65);!_0x58b1e5&&_0x58db0a[_0x39ce62(0x27c)](_0x59bf65);}),_0x1d6354[_0x5ead9d(0x301)](_0x5c4d85=>{const _0x4863ef=_0x5ead9d,_0x5c3698=currentCoins['find'](_0x2ed2d6=>_0x2ed2d6[_0x4863ef(0x258)]==_0x5c4d85);!_0x5c3698&&(_0x337f55=!![]);}),currentCoins['forEach'](_0xb47470=>{const _0x417985=_0x5ead9d;if(_0xb47470[_0x417985(0x1e4)]!=config['basecoin']){const _0x45db45=_0x1d6354[_0x417985(0x24c)](_0x29f286=>_0x29f286==_0xb47470[_0x417985(0x258)]);!_0x45db45&&(_0x337f55=!![]);}}),_0x358f1b[_0x5ead9d(0x2d3)]['forEach'](_0x5e05eb=>{const _0x3c1a6d=_0x5ead9d,_0x15d34e=config['portfolio'][_0x3c1a6d(0x24c)](_0x2b7060=>_0x2b7060['coin']==_0x5e05eb['coin']);if(_0x15d34e&&_0x5e05eb[_0x3c1a6d(0x1dd)]!=_0x15d34e[_0x3c1a6d(0x1dd)])_0x2f7951=!![];});let _0x506305=dbConfig[_0x5ead9d(0x2ca)](_0x5ead9d(0x25d))[_0x5ead9d(0x24c)]({'botID':botID})[_0x5ead9d(0x2be)]();_0x358f1b={..._0x358f1b,'apiKey':crypt['decrypt'](secure[_0x5ead9d(0x277)],_0x358f1b[_0x5ead9d(0x296)])['message'],'apiSecret':crypt[_0x5ead9d(0x223)](secure[_0x5ead9d(0x277)],_0x358f1b[_0x5ead9d(0x244)])['message']};_0x358f1b[_0x5ead9d(0x278)]&&(_0x358f1b[_0x5ead9d(0x278)]=crypt['decrypt'](secure[_0x5ead9d(0x277)],_0x358f1b[_0x5ead9d(0x278)])[_0x5ead9d(0x284)]);let _0x5c33fb=![];if(_0x506305){_0x358f1b[_0x5ead9d(0x296)]==_0x5ead9d(0x289)?_0x358f1b[_0x5ead9d(0x296)]=config[_0x5ead9d(0x296)]:_0x5c33fb=!![];_0x358f1b[_0x5ead9d(0x244)]==_0x5ead9d(0x289)?_0x358f1b[_0x5ead9d(0x244)]=config['apiSecret']:_0x5c33fb=!![];if(_0x358f1b[_0x5ead9d(0x278)]==_0x5ead9d(0x289))_0x358f1b[_0x5ead9d(0x278)]=config[_0x5ead9d(0x278)];else{if(_0x358f1b[_0x5ead9d(0x278)])_0x5c33fb=!![];}dbConfig[_0x5ead9d(0x2ca)](_0x5ead9d(0x25d))[_0x5ead9d(0x24c)]({'botID':botID})[_0x5ead9d(0x25c)](_0x358f1b)[_0x5ead9d(0x1f6)]();}else dbConfig[_0x5ead9d(0x2ca)](_0x5ead9d(0x25d))['push'](_0x358f1b)[_0x5ead9d(0x1f6)](),_0x5c33fb=!![],process[_0x5ead9d(0x303)]({'status':_0x5ead9d(0x1f3),'live':_0x5ead9d(0x28f)},_0x77cea1=>{});process[_0x5ead9d(0x303)]({'botname':_0x358f1b['botname']},_0x51818f=>{}),updateBotManager(),config={..._0x358f1b},proxyEmit(_0x5ead9d(0x20e)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5c33fb)await reset(_0x58db0a,!![]);else _0x337f55||_0x2f7951?await reset(_0x58db0a,![]):getBalances();blockTransactionDetection=![],logger[_0x5ead9d(0x1a7)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x1aae2c){const _0x138e4e=_0x1c2946,_0x556180={...config,'headless':_0x1aae2c[_0x138e4e(0x1fb)]};let _0x2b4381=dbConfig[_0x138e4e(0x2ca)](_0x138e4e(0x25d))['find']({'botID':botID})[_0x138e4e(0x2be)]();_0x2b4381&&dbConfig[_0x138e4e(0x2ca)](_0x138e4e(0x25d))[_0x138e4e(0x24c)]({'botID':botID})['assign'](_0x556180)['write'](),config={..._0x556180},updateBotManager(),proxyEmit(_0x138e4e(0x2ea),emittedConfiguration());}async function storeFiat(_0x36db52){const _0x244f9f=_0x1c2946,_0x2d9dd2={...config,'fiat':_0x36db52};let _0x258c1c=dbConfig[_0x244f9f(0x2ca)](_0x244f9f(0x25d))['find']({'botID':botID})['value']();_0x258c1c&&dbConfig[_0x244f9f(0x2ca)](_0x244f9f(0x25d))['find']({'botID':botID})[_0x244f9f(0x25c)](_0x2d9dd2)[_0x244f9f(0x1f6)](),config={..._0x2d9dd2},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x510f0b=_0x1c2946;logger[_0x510f0b(0x318)](_0x510f0b(0x31f));try{if(fs[_0x510f0b(0x230)](path[_0x510f0b(0x304)](configpath,_0x510f0b(0x1d6)+botID+_0x510f0b(0x28d))))fs[_0x510f0b(0x2b3)](path[_0x510f0b(0x304)](configpath,_0x510f0b(0x1d6)+botID+_0x510f0b(0x28d)));if(fs['existsSync'](path['join'](configpath,_0x510f0b(0x1d6)+botID+_0x510f0b(0x22c))))fs[_0x510f0b(0x2b3)](path['join'](configpath,_0x510f0b(0x1d6)+botID+_0x510f0b(0x22c)));if(fs[_0x510f0b(0x230)](path['join'](configpath,_0x510f0b(0x1d6)+botID+'-results.json')))fs[_0x510f0b(0x2b3)](path['join'](configpath,'bot-'+botID+_0x510f0b(0x298)));}catch(_0x438b5f){if(_0x438b5f)logger[_0x510f0b(0x318)]('Error\x20while\x20deleting\x20files:\x20',_0x438b5f);}const _0x1dbb51=getDate();let _0xbcec16=[];currentCoins[_0x510f0b(0x301)](_0x4f7d86=>{const _0x414720=_0x510f0b;_0xbcec16['push']({'coin':_0x4f7d86[_0x414720(0x1e4)],'number':_0x4f7d86['number'],'price':_0x4f7d86[_0x414720(0x2d5)]});});let _0x4cbcfd=dbConfig[_0x510f0b(0x2ca)](_0x510f0b(0x25d))[_0x510f0b(0x24c)]({'botID':botID})[_0x510f0b(0x2be)]();_0x4cbcfd&&(dbConfig[_0x510f0b(0x2ca)](_0x510f0b(0x25d))[_0x510f0b(0x24c)]({'botID':botID})[_0x510f0b(0x25c)]({'liquidity':[{'date':_0x1dbb51,'changes':_0xbcec16}]})['write'](),config['liquidity']=[]),process[_0x510f0b(0x303)]({'stop':_0x510f0b(0x267)},_0x16e5af=>{});}function noslash(_0x3b70be){return _0x3b70be['replace']('/','');}function updateHighestFee(_0x51d7c5){const _0x1d1c19=_0x1c2946;if(_0x51d7c5[_0x1d1c19(0x259)]){let _0x151a7f={'filled':_0x51d7c5[_0x1d1c19(0x292)]*_0x51d7c5[_0x1d1c19(0x229)],'amount':_0x51d7c5[_0x1d1c19(0x292)]*_0x51d7c5[_0x1d1c19(0x229)],'side':_0x51d7c5[_0x1d1c19(0x209)]==_0x1d1c19(0x1dc)?_0x1d1c19(0x1d7):_0x1d1c19(0x1dc),'price':0x1/_0x51d7c5[_0x1d1c19(0x229)]};_0x51d7c5={..._0x51d7c5,..._0x151a7f};}const _0xd94b81=defaultFee*_0x51d7c5[_0x1d1c19(0x292)]*_0x51d7c5[_0x1d1c19(0x229)];lastFees[_0x1d1c19(0x2e5)][_0x1d1c19(0x1aa)]===0x14&&lastFees[_0x1d1c19(0x2e5)][_0x1d1c19(0x21a)](),lastFees['recent20'][_0x1d1c19(0x27c)](_0xd94b81),lastFees[_0x1d1c19(0x30a)]=Math[_0x1d1c19(0x1d2)](...lastFees['recent20']);}function _0x1dc4(){const _0x208357=['botname','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','argv','defaults','closed','map','45swVebG','\x20not\x20available','2\x20-\x20Orders\x20unlocked','getHours','2.6.0','\x20metrics:</b>\x20\x0a\x0a','starting-balances','fee','net-basecoin','logs','debug','\x20exchange','args','length','orderId','\x20API\x20secret\x20is\x20invalid','spot','time','InvalidOrder','36055357VZdkIA','canceled','writeFile','./logs/','Exchange','placeOrder','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20orders\x20in\x20less\x20than\x20','bots','./version.json','timeout','buys','30ZZUcbK','ORDERS.LOCKED','balancing\x20resumes\x20when\x20cooldown\x20ends','watchTrades','amountToPrecision','Binance','sells','AuthenticationError','padEnd','substring','slice','\x20closed\x20the\x20connection','liquidity','exchange','6385qXjrFg','(((.+)+)+)+$','amount','RSA-OAEP','278izXFsN','realized','4362264enPRCH','eur','max','getPortfolio(0)','storeConfiguration','storeHeadless','bot-','buy','OnMaintenance','cloneDeep','emojibuy','error','sell','offset','padStart','resetHistory','EUR','findIndex','event','<b>Bot\x20','coin','excluded','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20|\x20lock\x20orders:\x20','toFixed','exchange\x20not\x20reloaded','secure','.json','fetchOpenOrders','USD','freeze','differenceInSeconds','must\x20be\x20greater\x20than\x20minimum\x20amount','Order\x20amount\x20is\x20invalid:\x20','showConfig','enabled','deleteHistoryAlerts','yyyy/MM/dd','write','basecoin','BTC','openOrders','\x20network\x20error','headless','fees','warning','sortBy','2\x20-\x20FILLED\x20known\x20order:\x20','autoliquidity','none','ETH','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','BNB','USDC','createWriteStream','stringify','basecoinvalue','side','1\x20-\x20Validate\x20orders:\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','page','USDP','configuration-stored','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Waited\x20','RequestTimeout','TUSD','progress','Portfolio\x20change\x20detected:\x20','average','starting-balance-','active','001','getOpenOrders()','shift','target','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','<pre>','version','0\x20-\x20EXECUTION:\x20','Reset\x20|\x20','1952111HGRGII','decrypt','abs','pro','onepagemode','change','2383610sGvwBh','price','1\x20-\x20FILLED:\x20','cooldown','-performance.json','OrderNotFound','exec','\x20not\x20responding','existsSync','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','date-fns','-------------------------------\x0a','min','customId','toString','ORDERS.UNLOCKING','datetime','40ezNYxx','search','fetchTicker','isEqual','path','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','LOCKED','startdate','***','emitHistory','UNLOCKING','apiSecret','additional\x20symbols\x20','1\x20-\x20Handle\x20open\x20orders','ask','concat','\x20portfolio:</b>\x20\x0a\x0a','percentage','cancelOrder','find','\x20minutes\x20-\x20','Transaction\x20detection\x20blocked','Order(s)\x20not\x20validated\x20after\x20','Crypt','\x20|\x20','2628513toGSfX','entries','\x20order:\x20','\x20change','add','loadSymbols()','symbol','reverse','event-history','Executing\x20exchange\x20reload','assign','bot','\x20API\x20key\x20is\x20invalid','lowdb','removed','filter','remove','sha256','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','final','added','restart','No\x20more\x20open\x20orders\x20-\x20','has','BNB/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','colorscheme','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','watchTransactions','split','exchanges','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Uncaught\x20ExchangeError:','initial','getPortfolio(2)','leftTxt','\x20|\x20Custom\x20ID:\x20','privateKey','apiPassword','Unknown\x20error\x20occured','toUpperCase','breakeven','push','performance','fromCodePoint','24wdggFf','Order\x20filled:\x20','\x20>\x20','getMonth','replace','message','date','1\x20-\x20Unlock\x20orders','data','getSeconds','************','cancelLoading','settings','API-key\x20format\x20invalid','-events.json','initclient','running','/output-000.log','Market','filled','\x20minutes','ordertype','coins','apiKey','DDoSProtection','-results.json','netoffset','recreate','Resetting\x20coin\x20results:\x20',':\x20timer\x20>','limits','\x20|\x20highest\x20fee:\x20','ticker','\x20|\x20Error\x20details:\x20','rightTxt','format','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20>\x20[DEBUG]\x20','limit','no\x20open\x20orders','toggleBotMode','./config/','loading-canceled','2\x20-\x20Handled\x20open\x20orders','apply','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','test','delta','Invalid\x20API\x20key\x20or\x20secret\x20entered','password','loadMarkets','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','unlinkSync','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','emojisell','string','ongoing','/backup/','currency','getCoinNumber()','/USD','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','uncaughtException','value','/EUR','31036mBwjiS','success','UNLOCKED','Unfilled\x20order(s)\x20canceled\x20after\x20','log','total','getDate','order','red_yellow_blue','splice','get','type','threshold','Fee\x20discount\x20refund\x20detected:\x20','trade','Initiating\x20exchange\x20reload','balances','getFullYear','keys','portfolio','Avoiding\x20continuous\x20order\x20attempts','last','Initializing\x20coin\x20results','usd','timeshift','market','changes','mkdirSync','2.3.5','round','orderstatus','fetchBalance','cancel','MIN_NOTIONAL','indexOf','open','Net\x20effect','recent20','</pre>','getStartingBalances','remainingSymbols','startprice','configuration','includes','ID:\x20','\x20-\x20bot\x20not\x20started','sendMetricsTelegram','startsWith','55JmErij','no\x20additional\x20symbols','fiat','util','\x20hour','fetchTickers','getCoins()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','distribution','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fetchClosedOrders','Manual\x20balancing\x20required','watchOrders','yyyy-MM-dd\x27T\x27HH:mm:ss','showname','recovery','storeFiat','forEach','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','send','join','sendPortfolioTelegram','2.5.0','2\x20-\x20Validate\x20orders:\x20','getTime','toLowerCase','highest','valid','bid','cost','Order\x20is\x20invalid:\x20','Error:\x20Invalid\x20argument\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','function','Failed\x20to\x20load\x20coin\x20data\x20for\x20','parse','sort','timestamp','Pausing\x20for\x20','getMinutes','full','USDT','number','net-fiat','set','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','<b>','Resetting\x20bot\x20history','floor','Limit\x20(high-margin)'];_0x1dc4=function(){return _0x208357;};return _0x1dc4();}async function updateNumberCoinsCcxt(_0x5e3358){const _0x2b86a8=_0x1c2946;logger['debug'](_0x2b86a8(0x220)+_0x5e3358[_0x2b86a8(0x258)]+_0x2b86a8(0x251)+_0x5e3358['status']+'\x20|\x20'+_0x5e3358['id']);let _0x376e35=_0x5e3358['status'],_0xa1c652=![];currentCoins[_0x2b86a8(0x301)](_0x42b6a6=>{const _0x8c81bc=_0x2b86a8;_0x42b6a6['symbol']==_0x5e3358[_0x8c81bc(0x258)]&&(_0xa1c652=!![]);});if(!_0xa1c652)return;const _0x56783c=currentCoins[_0x2b86a8(0x24c)](_0x2b7960=>_0x2b7960['symbol']==_0x5e3358[_0x2b86a8(0x258)]),_0x3e7b41=_0x5cd1a3=>{const _0x257d38=_0x2b86a8;if(_0x56783c)_0x56783c[_0x257d38(0x2de)]=_0x5cd1a3;};if(_0x376e35=='open')_0x3e7b41(_0x2b86a8(0x2e3));else{if(_0x376e35=='canceled'){_0x3e7b41(_0x2b86a8(0x1b1));const _0x491f49=await getCoins();[currentCoins,currentCoinsAll]=_0x491f49,await getOpenOrders(),handleOpenOrders();}else{if(_0x376e35==_0x2b86a8(0x19b)){logger[_0x2b86a8(0x1a7)](_0x2b86a8(0x22a)+_0x5e3358[_0x2b86a8(0x258)]+'\x20|\x20'+_0x5e3358[_0x2b86a8(0x292)]+_0x2b86a8(0x251)+_0x5e3358['id']);let _0x27121f=![];if(lastOrders)for(const _0x5967c0 of lastOrders){const _0xb0ae17=0xc8,_0x44c461=0x1388;let _0x40e660=0x0;while(!_0x5967c0['orderId']&&_0x40e660*_0xb0ae17<_0x44c461){_0x40e660++,await sleep(_0xb0ae17);}if(_0x40e660>0x0)logger[_0x2b86a8(0x1a7)](_0x2b86a8(0x210)+_0x40e660*_0xb0ae17/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x5967c0[_0x2b86a8(0x1ab)]==_0x5e3358['id']){logger[_0x2b86a8(0x1a7)](_0x2b86a8(0x1ff)+_0x5e3358['id']),_0x27121f=!![];if(_0x5967c0[_0x2b86a8(0x292)]==0x0){logger[_0x2b86a8(0x1a7)](_0x2b86a8(0x20b)+_0x5e3358['id']);if(_0x5e3358[_0x2b86a8(0x215)])_0x5967c0[_0x2b86a8(0x229)]=_0x5e3358[_0x2b86a8(0x215)];else{if(_0x5e3358[_0x2b86a8(0x229)])_0x5967c0[_0x2b86a8(0x229)]=_0x5e3358[_0x2b86a8(0x229)];else{}}_0x5967c0[_0x2b86a8(0x292)]=_0x5e3358['filled'],updateHighestFee(_0x5967c0),_0x3e7b41(_0x2b86a8(0x292)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x20859a=await getCoins();[currentCoins,currentCoinsAll]=_0x20859a;}_0x5967c0[_0x2b86a8(0x1a4)]={'currency':_0x5e3358[_0x2b86a8(0x1a4)]?_0x5e3358['fee'][_0x2b86a8(0x2b9)]:null,'cost':_0x5e3358['fee']?_0x5e3358['fee'][_0x2b86a8(0x30d)]:0x0},await updateCoinResults(_0x5967c0);}}}if(!_0x27121f){logger[_0x2b86a8(0x1a7)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x5e3358['id']),_0x3e7b41(_0x2b86a8(0x292));const _0x3de06e=await getCoins();[currentCoins,currentCoinsAll]=_0x3de06e,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x373b7c=JSON['parse'](lastBalances['portfolio']);const _0x2b1145=_0x373b7c[_0x2b86a8(0x24c)](_0x42bc82=>_0x42bc82[_0x2b86a8(0x258)]==_0x5e3358[_0x2b86a8(0x258)]);if(_0x2b1145){if(_0x376e35==_0x2b86a8(0x2e3))_0x2b1145[_0x2b86a8(0x2de)]=_0x2b1145['orderstatus']==_0x2b86a8(0x292)?_0x2b86a8(0x292):'open';else{if(_0x376e35==_0x2b86a8(0x1b1))_0x2b1145['orderstatus']=_0x2b1145[_0x2b86a8(0x2de)]=='filled'?_0x2b86a8(0x292):_0x2b86a8(0x1b1);else _0x376e35==_0x2b86a8(0x19b)&&(_0x2b1145['orderstatus']=_0x2b86a8(0x292));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x373b7c)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x156cb0=_0x1c2946;await getOpenOrders();let _0x9402ea=![];currentCoins[_0x156cb0(0x301)](_0x6114c5=>{const _0x154462=_0x156cb0;_0x9402ea=allOpenOrders[_0x154462(0x24c)](_0x5afefe=>_0x5afefe['symbol']==_0x6114c5[_0x154462(0x258)]),_0x6114c5[_0x154462(0x2de)]=_0x9402ea?'open':'none';});}async function getCoins(_0x485794=!![],_0x50493e=config['basecoin']){const _0x4cc72d=_0x1c2946;let _0x2ada77,_0x4d1082=[],_0x1d4f07=[],_0x3db8e9=[],_0x4acd58=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2ada77=await exchange[_0x4cc72d(0x2df)](),mybalances=_0x2ada77['total'];for(const [_0x4bad7e,_0x1b5c41]of Object[_0x4cc72d(0x253)](mybalances)){_0x4acd58[_0x4cc72d(0x27c)](_0x4bad7e);}if(_0x50493e=='')for(const [_0x2c4027,_0x4abb3c]of Object[_0x4cc72d(0x253)](mybalances)){_0x4abb3c!=0x0&&_0x1d4f07[_0x4cc72d(0x27c)]({'coin':_0x2c4027});}else{let _0x25e147=![];for(const [_0x16b74b,_0x2c3c64]of Object[_0x4cc72d(0x253)](mybalances)){if(_0x4acd58['includes'](_0x16b74b)){const _0x40d0ec=config['portfolio']['find'](_0x42c090=>_0x42c090['coin']==_0x16b74b),_0x3dbc7c=_0x16b74b+'/'+_0x50493e,_0x50cd95=_0x50493e+'/'+_0x16b74b,_0x1e6c92=currentCoins['find'](_0x1ebb64=>_0x1ebb64['coin']==_0x16b74b);_0x25e147=![];if((_0x2c3c64!=0x0||_0x40d0ec)&&(allSymbols['includes'](_0x3dbc7c)||_0x16b74b==_0x50493e))_0x16b74b!=_0x50493e&&_0x4d1082[_0x4cc72d(0x27c)](_0x3dbc7c),_0x1d4f07[_0x4cc72d(0x27c)]({'coin':_0x16b74b,'symbol':_0x3dbc7c,'reverse':![],'number':Math[_0x4cc72d(0x1d2)](_0x2c3c64+(_0x40d0ec&&_0x40d0ec[_0x4cc72d(0x1dd)]||0x0),0x0),'orderstatus':_0x1e6c92?_0x1e6c92['orderstatus']:_0x4cc72d(0x201)});else(_0x2c3c64!=0x0||_0x40d0ec)&&allSymbols[_0x4cc72d(0x2eb)](_0x50cd95)&&(_0x16b74b!=_0x50493e&&_0x4d1082[_0x4cc72d(0x27c)](_0x50cd95),_0x1d4f07[_0x4cc72d(0x27c)]({'coin':_0x16b74b,'symbol':_0x50cd95,'reverse':!![],'number':Math[_0x4cc72d(0x1d2)](_0x2c3c64+(_0x40d0ec&&_0x40d0ec['offset']||0x0),0x0),'orderstatus':_0x1e6c92?_0x1e6c92[_0x4cc72d(0x2de)]:_0x4cc72d(0x201)}));}}}}catch(_0x3fd964){if(!_0x485794)handleErrorNoStop(_0x3fd964,_0x4cc72d(0x2f6));else await handleError(_0x3fd964,_0x4cc72d(0x2f6));}return _0x3db8e9=cloneDeep(_0x1d4f07),_0x1d4f07=_0x1d4f07[_0x4cc72d(0x261)](_0x4db716=>{const _0x4ac394=_0x4cc72d,_0x476c87=config[_0x4ac394(0x2d3)]['find'](_0x2af030=>_0x2af030[_0x4ac394(0x1e4)]==_0x4db716[_0x4ac394(0x1e4)]);return _0x476c87&&!_0x476c87[_0x4ac394(0x1e5)];}),[_0x1d4f07,_0x3db8e9];}async function getCoinNumber(_0x236588){const _0x24d7df=_0x1c2946;let _0x1bcb3c;try{const _0x1c444a=await exchange[_0x24d7df(0x2df)]();_0x1bcb3c=_0x1c444a[_0x24d7df(0x2c5)][_0x236588];}catch(_0x36bdc0){await handleError(_0x36bdc0,_0x24d7df(0x2ba));}return _0x1bcb3c;}async function getOpenOrders(){const _0x1d5206=_0x1c2946;let _0x329aa6;allOpenOrders=[];try{for(const _0x4e2091 of config[_0x1d5206(0x2d3)]){!_0x4e2091[_0x1d5206(0x1e5)]&&_0x4e2091[_0x1d5206(0x1e4)]!=config[_0x1d5206(0x1f7)]&&(_0x329aa6=await exchange[_0x1d5206(0x1ec)](_0x4e2091[_0x1d5206(0x258)]),_0x329aa6['length']>0x0&&allOpenOrders['push'](_0x329aa6[0x0]));}}catch(_0x3d5984){await handleError(_0x3d5984,_0x1d5206(0x219));}}async function handleOpenOrders(_0x42f668=0x0){const _0x23cbb8=_0x1c2946;allOpenOrders[_0x23cbb8(0x1aa)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x42f668==0x0?(logger[_0x23cbb8(0x1a7)](_0x23cbb8(0x246)),_0x42f668++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x23cbb8(0x1a7)](_0x23cbb8(0x2aa)),validateOrders(_0x23cbb8(0x2a6))));}async function testAPI(_0xc07a4a){const _0x8f6f62=_0x1c2946,_0x358131=ccxt[_0x8f6f62(0x225)][_0xc07a4a[_0x8f6f62(0x1c9)][_0x8f6f62(0x309)]()],_0x1d69df=new _0x358131({'apiKey':_0xc07a4a['apiKey'],'secret':_0xc07a4a[_0x8f6f62(0x244)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x8f6f62(0x1ad)}});if(_0xc07a4a[_0x8f6f62(0x278)])_0x1d69df[_0x8f6f62(0x2b0)]=_0xc07a4a[_0x8f6f62(0x278)];try{await _0x1d69df['loadMarkets']();}catch(_0x440994){throw _0x440994;}}function cloneDeep(_0x5b5b18){const _0x52fa0f=_0x1c2946;return JSON[_0x52fa0f(0x313)](JSON[_0x52fa0f(0x207)](_0x5b5b18));}async function getPortfolio(_0x2ab0aa){const _0x59cdf8=_0x1c2946;let _0x5590b2=[],_0x171b09=[],_0x44aea5=[],_0x1c47f2;if(_0x2ab0aa[_0x59cdf8(0x296)]!==_0x59cdf8(0x289)||_0x2ab0aa[_0x59cdf8(0x244)]!=='************'||_0x2ab0aa[_0x59cdf8(0x278)]&&_0x2ab0aa['apiPassword']!==_0x59cdf8(0x289)){if(config['exchange']){if(_0x2ab0aa[_0x59cdf8(0x296)]=='************')_0x2ab0aa[_0x59cdf8(0x296)]=config[_0x59cdf8(0x296)];if(_0x2ab0aa[_0x59cdf8(0x244)]==_0x59cdf8(0x289))_0x2ab0aa[_0x59cdf8(0x244)]=config[_0x59cdf8(0x244)];if(_0x2ab0aa[_0x59cdf8(0x278)]==_0x59cdf8(0x289))_0x2ab0aa[_0x59cdf8(0x278)]=config['apiPassword'];try{await testAPI(_0x2ab0aa);}catch(_0x246afe){if(_0x246afe[_0x59cdf8(0x236)]()['includes'](_0x59cdf8(0x1c3))){logger['debug'](_0x59cdf8(0x2af)),proxyEmit(_0x59cdf8(0x2d3),![]);return;}else{handleError(_0x246afe,_0x59cdf8(0x1d3));return;}}}await initExchange(_0x2ab0aa['exchange'],_0x2ab0aa[_0x59cdf8(0x296)],_0x2ab0aa[_0x59cdf8(0x244)],_0x2ab0aa[_0x59cdf8(0x278)]);try{await loadSymbols(_0x2ab0aa[_0x59cdf8(0x1c9)],!![]);}catch(_0x467888){if(_0x467888['toString']()[_0x59cdf8(0x2eb)]('AuthenticationError')){proxyEmit(_0x59cdf8(0x2d3),![]);return;}else{handleError(_0x467888,'getPortfolio(1)');return;}}const _0x670c8e=await getCoins(![],_0x2ab0aa[_0x59cdf8(0x1f7)]);_0x44aea5=cloneDeep(_0x670c8e[0x1]);}else _0x44aea5=cloneDeep(currentCoinsAll);if(_0x2ab0aa[_0x59cdf8(0x1f7)]=='')proxyEmit(_0x59cdf8(0x2d3),_0x44aea5);else{_0x44aea5[_0x59cdf8(0x301)](_0x2ad63d=>{const _0x28279e=_0x59cdf8;if(_0x2ad63d['coin']!=_0x2ab0aa['basecoin'])_0x5590b2[_0x28279e(0x27c)](_0x2ad63d['symbol']);});if(_0x5590b2[_0x59cdf8(0x1aa)]==0x0)logHistory(_0x59cdf8(0x1db),_0x59cdf8(0x31d));else{try{_0x171b09=await exchange[_0x59cdf8(0x2f5)](_0x5590b2);}catch(_0x4fc0fb){if(_0x4fc0fb[_0x59cdf8(0x236)]()['includes'](_0x59cdf8(0x1c3))){proxyEmit('portfolio',![]);return;}else{handleError(_0x4fc0fb,_0x59cdf8(0x274));return;}}_0x44aea5[_0x59cdf8(0x301)](_0x23b821=>{const _0x350db3=_0x59cdf8;_0x23b821[_0x350db3(0x1e4)]!=_0x2ab0aa[_0x350db3(0x1f7)]?_0x1c47f2=_0x23b821[_0x350db3(0x259)]?0x1/_0x171b09[_0x23b821['symbol']]['last']:_0x171b09[_0x23b821[_0x350db3(0x258)]]['last']:_0x1c47f2=0x1,_0x23b821[_0x350db3(0x229)]=formatResult(_0x1c47f2,0x8);}),proxyEmit(_0x59cdf8(0x2d3),_0x44aea5);}}}function truncateTradeAmount(_0x649bbd,_0x57334e){const _0x2a70a4=_0x1c2946;let _0x45587f=0x0;try{_0x45587f=exchange[_0x2a70a4(0x1c0)](_0x649bbd,_0x57334e);}catch(_0x124967){}return _0x45587f;}function checkMinimums(_0x5d4c58){const _0x4fe940=_0x1c2946;let _0xe3a204=!![];const _0x468ad2=!_0x5d4c58[_0x4fe940(0x259)]?markets[_0x5d4c58[_0x4fe940(0x258)]][_0x4fe940(0x29d)][_0x4fe940(0x1cc)][_0x4fe940(0x234)]:markets[_0x5d4c58[_0x4fe940(0x258)]][_0x4fe940(0x29d)][_0x4fe940(0x30d)][_0x4fe940(0x234)],_0x5263fd=!_0x5d4c58[_0x4fe940(0x259)]?markets[_0x5d4c58[_0x4fe940(0x258)]]['limits'][_0x4fe940(0x30d)][_0x4fe940(0x234)]:markets[_0x5d4c58['symbol']][_0x4fe940(0x29d)]['amount'][_0x4fe940(0x234)],_0x2c33db=truncateTradeAmount(_0x5d4c58[_0x4fe940(0x258)],_0x5d4c58[_0x4fe940(0x2ce)]);_0x5d4c58['trade']=_0x2c33db;if(Math[_0x4fe940(0x224)](_0x2c33db)<_0x468ad2)_0xe3a204=![];if(Math['abs'](_0x2c33db)*_0x5d4c58['last']<_0x5263fd)_0xe3a204=![];if(_0x5d4c58[_0x4fe940(0x209)]==_0x4fe940(0x1dc)){let _0x4e479c=config['portfolio'][_0x4fe940(0x24c)](_0x134c1e=>_0x134c1e[_0x4fe940(0x1e4)]==_0x5d4c58[_0x4fe940(0x1e4)]);if(_0x4e479c['offset']>0x0){if(Math[_0x4fe940(0x224)](_0x2c33db)>_0x5d4c58[_0x4fe940(0x31a)]-_0x4e479c['offset'])_0xe3a204=![];}else{if(Math['abs'](_0x2c33db)>_0x5d4c58[_0x4fe940(0x31a)])_0xe3a204=![];}}if(_0x5d4c58[_0x4fe940(0x209)]==_0x4fe940(0x1d7)){let _0x190a4e=config[_0x4fe940(0x2d3)][_0x4fe940(0x24c)](_0x15c1d6=>_0x15c1d6[_0x4fe940(0x1e4)]==config[_0x4fe940(0x1f7)]),_0x427fd7=currentCoins['find'](_0x203cdf=>_0x203cdf[_0x4fe940(0x1e4)]==config['basecoin']);if(_0x190a4e[_0x4fe940(0x1dd)]>0x0){if(Math[_0x4fe940(0x224)](_0x2c33db)*_0x5d4c58[_0x4fe940(0x2d5)]>_0x427fd7['number']-_0x190a4e[_0x4fe940(0x1dd)])_0xe3a204=![];}else{if(Math['abs'](_0x2c33db)*_0x5d4c58[_0x4fe940(0x2d5)]>_0x427fd7[_0x4fe940(0x31a)])_0xe3a204=![];}}return _0xe3a204;}async function getBalances(_0x599b27=!![]){const _0x1737bf=_0x1c2946;let _0x3b6461=0x0,_0x4dae30;const _0x500f55=config[_0x1737bf(0x2cc)];if(config[_0x1737bf(0x1fb)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x1737bf(0x301)](_0x2fd47f=>{const _0x1909dd=_0x1737bf;if(_0x2fd47f[_0x1909dd(0x1e4)]!=config[_0x1909dd(0x1f7)]){let _0xab78ea=global['ticker'][noslash(_0x2fd47f[_0x1909dd(0x258)])];_0x4dae30=_0x2fd47f[_0x1909dd(0x259)]?0x1/_0xab78ea:_0xab78ea;}else _0x4dae30=0x1;let _0x547747=_0x2fd47f[_0x1909dd(0x31a)]*_0x4dae30;_0x3b6461+=_0x547747,_0x2fd47f[_0x1909dd(0x2d5)]=formatResult(Number(_0x4dae30),0x8),_0x2fd47f[_0x1909dd(0x2be)]=_0x547747;}),currentCoins['forEach'](_0x350eff=>{const _0x32a04d=_0x1737bf;let _0x567b83=config[_0x32a04d(0x2d3)][_0x32a04d(0x24c)](_0x5a086a=>_0x5a086a[_0x32a04d(0x1e4)]==_0x350eff[_0x32a04d(0x1e4)]),_0xec0abc=Number(_0x567b83[_0x32a04d(0x2f8)]),_0x3b9f11=_0x350eff[_0x32a04d(0x2be)]/_0x3b6461*0x64,_0x218cc4=_0xec0abc*_0x3b6461/0x64/_0x350eff[_0x32a04d(0x2d5)]-_0x350eff['number'];_0x350eff['distribution']=formatResult(_0x3b9f11,0x3),_0x350eff[_0x32a04d(0x21b)]=formatResult(_0xec0abc,0x3),_0x350eff[_0x32a04d(0x2ce)]=formatResult(_0x218cc4,0x8),_0x350eff[_0x32a04d(0x209)]='',_0x350eff['valid']=![];if(_0x350eff[_0x32a04d(0x1e4)]!=config[_0x32a04d(0x1f7)]){if(_0x350eff[_0x32a04d(0x2f8)]>_0xec0abc)_0x350eff[_0x32a04d(0x209)]='sell',_0x350eff[_0x32a04d(0x30b)]=checkMinimums(_0x350eff);else _0x350eff[_0x32a04d(0x2f8)]<_0xec0abc&&(_0x350eff[_0x32a04d(0x209)]=_0x32a04d(0x1d7),_0x350eff[_0x32a04d(0x30b)]=checkMinimums(_0x350eff));}_0x350eff[_0x32a04d(0x2ae)]=_0x350eff['distribution']/_0x350eff[_0x32a04d(0x21b)]-0x1;if(_0x350eff[_0x32a04d(0x2de)]==_0x32a04d(0x292)||_0x350eff[_0x32a04d(0x2de)]==_0x32a04d(0x1b1))_0x350eff[_0x32a04d(0x2de)]='none';}),currentCoins['sort']((_0x433ae5,_0x57f733)=>_0x433ae5[_0x1737bf(0x2ae)]<_0x57f733[_0x1737bf(0x2ae)]?0x1:_0x57f733[_0x1737bf(0x2ae)]<_0x433ae5[_0x1737bf(0x2ae)]?-0x1:0x0);const _0x6c69ff=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x6c69ff[_0x1737bf(0x1d1)],'usd':_0x6c69ff[_0x1737bf(0x2d7)],'portfolio':JSON[_0x1737bf(0x207)](currentCoins),'threshold':_0x500f55},proxyEmit(_0x1737bf(0x2d0),{'serverversion':serverversion,'balances':lastBalances});if(_0x599b27){if(config[_0x1737bf(0x1fb)])headlessMode({'portfolio':currentCoins,'threshold':_0x500f55});else{if(lockOrders==ORDERS[_0x1737bf(0x2c2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x500f55});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3c1e11=getNormalizedPerformance();getStartingBalances(_0x3c1e11),emitPerformance(_0x3c1e11);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x13e0b8=getNormalizedPerformance();emitPerformance(_0x13e0b8),getStartingBalances(_0x13e0b8),logger['debug'](_0x1737bf(0x2bc));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x33f110=_0x1c2946;if(!lastBalances)return;let _0xb4e749=[],_0x2c325b,_0x5118db=JSON['parse'](lastBalances[_0x33f110(0x2d3)]);_0x5118db[_0x33f110(0x314)]((_0x272873,_0x1aaa36)=>_0x272873[_0x33f110(0x1e4)]>_0x1aaa36[_0x33f110(0x1e4)]?0x1:_0x1aaa36[_0x33f110(0x1e4)]>_0x272873['coin']?-0x1:0x0),_0x5118db[_0x33f110(0x301)](_0x1eef9d=>{const _0x5888d6=_0x33f110;let _0x31a21a={'coin':_0x1eef9d[_0x5888d6(0x1e4)],'number':_0x1eef9d['number'],'price':_0x1eef9d[_0x5888d6(0x2d5)]};_0xb4e749[_0x5888d6(0x27c)](_0x31a21a);});const _0xd6744a=await getFiat();_0x2c325b={'date':lastBalances['time'][_0x33f110(0x26f)]('\x20')[0x0],'eur':_0xd6744a[_0x33f110(0x1d1)],'usd':_0xd6744a['usd'],'coins':_0xb4e749};let _0x3faf99=dbPerformance[_0x33f110(0x2ca)](_0x33f110(0x287))[_0x33f110(0x24c)]({'date':_0x2c325b[_0x33f110(0x285)]})[_0x33f110(0x2be)]();_0x3faf99?_0x2c325b[_0x33f110(0x285)]!=config[_0x33f110(0x240)]&&dbPerformance[_0x33f110(0x2ca)](_0x33f110(0x287))[_0x33f110(0x24c)]({'date':_0x2c325b[_0x33f110(0x285)]})[_0x33f110(0x25c)](_0x2c325b)['write']():dbPerformance['get'](_0x33f110(0x287))['push'](_0x2c325b)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x116b59=_0x1c2946;let _0x11056d=[];if(dbPerformance[_0x116b59(0x269)](_0x116b59(0x287))['value']()){let _0x4ea10e=dbPerformance[_0x116b59(0x2ca)]('data')['cloneDeep']()['filter'](_0x458730=>{const _0x39ea0e=_0x116b59;if(_0x458730['coins'][_0x39ea0e(0x1aa)]==0x0)return![];else return!![];})[_0x116b59(0x1fe)](_0x116b59(0x285))['value'](),_0x1eb5fb=[...config[_0x116b59(0x1c8)]];_0x1eb5fb[_0x116b59(0x314)]((_0xce7de6,_0x31305e)=>_0xce7de6[_0x116b59(0x285)]>_0x31305e[_0x116b59(0x285)]?-0x1:_0x31305e[_0x116b59(0x285)]>_0xce7de6[_0x116b59(0x285)]?0x1:0x0);let _0x10f56a=0x1,_0xb33181=[],_0x13f2c4=0x0;_0x4ea10e[_0x116b59(0x1c6)]()['reverse']()[_0x116b59(0x301)]((_0x23eb9d,_0x5f3e00)=>{const _0x327fa8=_0x116b59;if(_0x1eb5fb[_0x13f2c4]){if(_0x4ea10e[_0x4ea10e[_0x327fa8(0x1aa)]-_0x5f3e00]&&_0x1eb5fb[_0x13f2c4][_0x327fa8(0x285)]==_0x4ea10e[_0x4ea10e[_0x327fa8(0x1aa)]-_0x5f3e00]['date']){if(_0x5f3e00<_0x4ea10e[_0x327fa8(0x1aa)]){let _0x5d9cee=0x0,_0x2f3add=0x0;_0x4ea10e[_0x4ea10e['length']-_0x5f3e00][_0x327fa8(0x295)]['forEach'](_0x4ffb9c=>{const _0x31a8e5=_0x327fa8;_0x2f3add+=_0x4ffb9c[_0x31a8e5(0x31a)]*_0x4ffb9c['price'];}),_0x1eb5fb[_0x13f2c4][_0x327fa8(0x2da)][_0x327fa8(0x301)](_0xa7981=>{const _0x2c96e8=_0x327fa8;_0x5d9cee+=_0xa7981[_0x2c96e8(0x31a)]*_0xa7981['price'];}),_0x10f56a*=_0x5d9cee/(_0x2f3add-_0x5d9cee)+0x1;}_0x13f2c4++;}}let _0x39b414=0x0;_0x23eb9d[_0x327fa8(0x295)][_0x327fa8(0x301)](_0x5d1306=>{const _0x869ef8=_0x327fa8;_0x39b414+=_0x5d1306[_0x869ef8(0x31a)]*_0x5d1306[_0x869ef8(0x229)];}),_0xb33181[_0x4ea10e[_0x327fa8(0x1aa)]-_0x5f3e00-0x1]=_0x39b414*(_0x10f56a-0x1);});let _0x175f54=[];_0x1eb5fb=[...config[_0x116b59(0x1c8)]]||[];let _0x385505=0x0;_0x13f2c4=0x0,_0x4ea10e['forEach']((_0x4c9755,_0x3fce76)=>{const _0x120132=_0x116b59;if(_0x1eb5fb[_0x13f2c4]){const _0x3113e3=fns[_0x120132(0x313)](_0x1eb5fb[_0x13f2c4][_0x120132(0x285)],_0x120132(0x1f5),new Date()),_0x187a49=fns[_0x120132(0x313)](_0x4c9755[_0x120132(0x285)],_0x120132(0x1f5),new Date());if(fns[_0x120132(0x23c)](_0x3113e3,_0x187a49)){let _0xef82aa=0x0;_0x1eb5fb[_0x13f2c4][_0x120132(0x2da)][_0x120132(0x301)](_0x3a7042=>{const _0x3b6973=_0x120132;!_0x175f54[_0x3a7042[_0x3b6973(0x1e4)]]?_0x175f54[_0x3a7042[_0x3b6973(0x1e4)]]=_0x3a7042[_0x3b6973(0x31a)]:(_0xef82aa=_0x175f54[_0x3a7042[_0x3b6973(0x1e4)]],_0x175f54[_0x3a7042[_0x3b6973(0x1e4)]]+=_0x3a7042[_0x3b6973(0x31a)]);const _0x47fe48=_0x4c9755[_0x3b6973(0x295)][_0x3b6973(0x24c)](_0x3853dc=>_0x3853dc[_0x3b6973(0x1e4)]==_0x3a7042[_0x3b6973(0x1e4)]);(!_0x47fe48||_0x47fe48[_0x3b6973(0x31a)]==0x0)&&(_0x385505+=(-_0x3a7042[_0x3b6973(0x31a)]-_0xef82aa)*_0x3a7042[_0x3b6973(0x229)]);}),_0x13f2c4++;}}_0x4c9755[_0x120132(0x295)][_0x120132(0x301)]((_0x558f4c,_0x2b08b2)=>{const _0x11b253=_0x120132;_0x175f54[_0x558f4c['coin']]&&(_0x558f4c[_0x11b253(0x273)]=_0x175f54[_0x558f4c[_0x11b253(0x1e4)]]);}),_0x11056d[_0x120132(0x27c)]({'date':_0x4c9755[_0x120132(0x285)],'eur':_0x4c9755[_0x120132(0x1d1)],'usd':_0x4c9755['usd'],'offset':_0xb33181[_0x3fce76],'netoffset':_0x385505,'coins':_0x4c9755['coins']});});}return _0x11056d;}function emitPerformance(_0xd89ad8){const _0x4c0545=_0x1c2946;_0xd89ad8[_0x4c0545(0x1aa)]!==0x0?(proxyEmit('performance',_0xd89ad8),lastPerformanceEmitted=getDate()):proxyEmit(_0x4c0545(0x27d),[]);}function getPerf(_0x41ff0b,_0x4130d3){const _0xd39d76=_0x1c2946;let _0x3cfad6=0x0,_0x31ac6e=0x0,_0x450af0=0x0;_0x41ff0b['coins'][_0xd39d76(0x301)](_0x5eed76=>{const _0x58599f=_0xd39d76;_0x3cfad6+=_0x5eed76[_0x58599f(0x31a)]*_0x5eed76[_0x58599f(0x229)];});_0x4130d3&&(_0x3cfad6+=_0x41ff0b[_0xd39d76(0x1dd)]);if(config[_0xd39d76(0x1f7)]===_0xd39d76(0x1f8)||config[_0xd39d76(0x1f7)]===_0xd39d76(0x202))_0x31ac6e=_0x3cfad6*_0x41ff0b['eur'],_0x450af0=_0x3cfad6*_0x41ff0b[_0xd39d76(0x2d7)];else{if(usdBasecoins[_0xd39d76(0x2eb)](config[_0xd39d76(0x1f7)]))_0x31ac6e=_0x3cfad6*_0x41ff0b[_0xd39d76(0x1d1)]/_0x41ff0b['usd'],_0x450af0=_0x3cfad6;else config[_0xd39d76(0x1f7)]==='EUR'&&(_0x31ac6e=_0x3cfad6,_0x450af0=_0x3cfad6*_0x41ff0b[_0xd39d76(0x2d7)]/_0x41ff0b[_0xd39d76(0x1d1)]);}return[_0x3cfad6,_0x31ac6e,_0x450af0];}function getKPIs(_0x383d3f,_0x300f4e=_0x1c2946(0x1e0)){const _0x2027c9=_0x1c2946,_0x3713e7=config[_0x2027c9(0x1f7)],_0x49fd72=lastBalances,_0x37f8a4=currentCoins,_0x2fa049=getNormalizedPerformance(),_0x165aee=_0x383d3f===_0x2027c9(0x1f7)?_0x3713e7:_0x383d3f==='fiat'||_0x383d3f===_0x2027c9(0x31b)?_0x300f4e:'Net\x20'+_0x3713e7,_0x32f103=_0x383d3f===_0x2027c9(0x1a5)?_0x2027c9(0x2e4):_0x383d3f==='net-fiat'?_0x2027c9(0x2e4):_0x165aee+'\x20value',_0x350657=_0x383d3f===_0x2027c9(0x1a5)||_0x383d3f===_0x2027c9(0x31b)?_0x2027c9(0x2e4):_0x165aee+_0x2027c9(0x255);let _0xda566e=0x0;_0x37f8a4[_0x2027c9(0x301)](_0x1b0a49=>{const _0x2a7ba4=_0x2027c9;_0xda566e+=_0x1b0a49[_0x2a7ba4(0x31a)]*_0x1b0a49[_0x2a7ba4(0x2d5)];});if(_0x383d3f===_0x2027c9(0x2f2)||_0x383d3f===_0x2027c9(0x31b)){if(_0x3713e7===_0x2027c9(0x1f8)||_0x3713e7===_0x2027c9(0x202))_0xda566e=_0xda566e*(_0x300f4e==='EUR'?_0x49fd72[_0x2027c9(0x1d1)]:_0x49fd72[_0x2027c9(0x2d7)]);else{if(usdBasecoins[_0x2027c9(0x2eb)](_0x3713e7))_0xda566e=_0xda566e*(_0x300f4e===_0x2027c9(0x1e0)?_0x49fd72['eur']/_0x49fd72[_0x2027c9(0x2d7)]:0x1);else _0x3713e7===_0x2027c9(0x1e0)&&(_0xda566e=_0xda566e*(_0x300f4e===_0x2027c9(0x1e0)?0x1:_0x49fd72['usd']/_0x49fd72[_0x2027c9(0x1d1)]));}}let _0x598262;if(_0xda566e!==0x0){if(_0x383d3f===_0x2027c9(0x1f7))_0x598262=(_0xda566e/startingBalances['basecoin']-0x1)*0x64;else{if(_0x300f4e==='EUR')_0x598262=(_0xda566e/startingBalances[_0x2027c9(0x1d1)]-0x1)*0x64;else _0x598262=(_0xda566e/startingBalances['usd']-0x1)*0x64;}let _0x12739b=0x0;if(startingBalances[_0x2027c9(0x295)])_0x37f8a4[_0x2027c9(0x301)](_0x2e5a52=>{const _0x545dc5=_0x2027c9;let _0x31eb64=startingBalances['coins'][_0x545dc5(0x24c)](_0x31726c=>_0x31726c[_0x545dc5(0x1e4)]===_0x2e5a52[_0x545dc5(0x1e4)]);if(_0x31eb64&&_0x31eb64[_0x545dc5(0x1e4)]&&_0x2e5a52['number']!==0x0)_0x12739b+=_0x31eb64['number']*_0x2e5a52[_0x545dc5(0x2d5)];});let _0x2a0c4c=0x0;if(_0x2fa049[_0x2027c9(0x1aa)]!==0x0){let _0x2ee691=_0x2fa049[_0x2fa049[_0x2027c9(0x1aa)]-0x1];_0x2a0c4c=_0x2ee691[_0x2027c9(0x299)];}_0x12739b-=_0x2a0c4c;_0x383d3f===_0x2027c9(0x1a5)&&(_0x598262=(_0xda566e-_0x12739b)/startingBalances[_0x2027c9(0x1f7)]*0x64,_0xda566e=_0xda566e-_0x12739b);if(_0x383d3f===_0x2027c9(0x31b)){let _0xe487b1=_0x300f4e===_0x2027c9(0x1e0)?startingBalances[_0x2027c9(0x1d1)]:startingBalances['usd'];if(_0x3713e7===_0x2027c9(0x1f8)||_0x3713e7===_0x2027c9(0x202))_0x12739b=_0x300f4e===_0x2027c9(0x1e0)?_0x12739b*_0x49fd72[_0x2027c9(0x1d1)]:_0x12739b*_0x49fd72['usd'];else{if(usdBasecoins[_0x2027c9(0x2eb)](_0x3713e7))_0x12739b=_0x300f4e===_0x2027c9(0x1e0)?_0x12739b*_0x49fd72[_0x2027c9(0x1d1)]/_0x49fd72[_0x2027c9(0x2d7)]:_0x12739b;else _0x3713e7===_0x2027c9(0x1e0)&&(_0x12739b=_0x300f4e===_0x2027c9(0x1e0)?_0x12739b:_0x12739b*_0x49fd72[_0x2027c9(0x2d7)]/_0x49fd72[_0x2027c9(0x1d1)]);}_0x598262=(_0xda566e-_0x12739b)/_0xe487b1*0x64,_0xda566e=_0xda566e-_0x12739b;}if(_0x598262){if(_0x598262<0x64)_0x598262=_0x598262[_0x2027c9(0x1e8)](0x2);else{if(_0x598262<0x3e8)_0x598262=_0x598262['toFixed'](0x1);else _0x598262=_0x598262[_0x2027c9(0x1e8)](0x0);}}else _0x598262=Number('0')[_0x2027c9(0x1e8)](0x2);if(_0xda566e){if(Math['abs'](_0xda566e)<0.000001)_0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x2);else{if(Math[_0x2027c9(0x224)](_0xda566e)<0.1)_0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x6);else{if(Math[_0x2027c9(0x224)](_0xda566e)<0x1)_0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x5);else{if(Math[_0x2027c9(0x224)](_0xda566e)<0xa)_0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x4);else{if(Math['abs'](_0xda566e)<0x64)_0xda566e=_0xda566e['toFixed'](0x3);else{if(Math[_0x2027c9(0x224)](_0xda566e)<0x3e8)_0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x2);else _0xda566e=_0xda566e[_0x2027c9(0x1e8)](0x2);}}}}}}else _0xda566e=Number('0')[_0x2027c9(0x1e8)](0x2);}else _0x598262=Number('0')[_0x2027c9(0x1e8)](0x2);return{'value':_0xda566e,'change':_0x598262,'leftTxt':_0x32f103,'rightTxt':_0x350657};}async function getStartingBalances(_0x33722d,_0x504228=!![]){const _0x5ab7cb=_0x1c2946;if(_0x33722d[_0x5ab7cb(0x1aa)]!==0x0){const [_0x1c5b63,_0x4dc25d,_0xf984ad]=getPerf(_0x33722d[0x0],!![]);let _0xa6ab9e=[];config[_0x5ab7cb(0x2d3)]['forEach'](_0x1e69ca=>{const _0x48eb62=_0x5ab7cb;let _0x423428=0x0,_0x3f55b8;config[_0x48eb62(0x1c8)]['forEach'](_0x332692=>{const _0x563166=_0x48eb62;let _0x4337b3=_0x332692['changes'][_0x563166(0x24c)](_0x1b1d98=>_0x1b1d98['coin']==_0x1e69ca[_0x563166(0x1e4)]);if(_0x4337b3){_0x423428+=_0x4337b3[_0x563166(0x31a)];if(!_0x3f55b8)_0x3f55b8=_0x4337b3['price'];}}),_0xa6ab9e['push']({'coin':_0x1e69ca[_0x48eb62(0x1e4)],'number':_0x423428,'initialprice':_0x3f55b8});});const _0x1a761e={'basecoin':_0x1c5b63,'eur':_0x4dc25d,'usd':_0xf984ad,'coins':_0xa6ab9e};if(_0x504228)proxyEmit(_0x5ab7cb(0x1a3),_0x1a761e);startingBalances=_0x1a761e;}}function headlessMode(_0x23da28){const _0x1aeeae=_0x1c2946;let _0x14899a=_0x23da28[_0x1aeeae(0x2d3)],_0xaa908f=_0x23da28['threshold'],_0x18e5bb=[];for(let _0x2d34f1 of _0x14899a){if(_0x2d34f1[_0x1aeeae(0x1e4)]!=config[_0x1aeeae(0x1f7)]){if(_0x2d34f1[_0x1aeeae(0x2ae)]>=_0xaa908f/0x64){if(_0x2d34f1[_0x1aeeae(0x30b)])_0x18e5bb[_0x1aeeae(0x27c)](_0x2d34f1);}else{if(_0x2d34f1['delta']<=-_0xaa908f/0x64){if(_0x2d34f1['valid'])_0x18e5bb['push'](_0x2d34f1);}}}}_0x18e5bb[_0x1aeeae(0x1aa)]>0x0&&placeOrder(_0x18e5bb);}function notifyBalance(_0x277ee5){const _0x78e01d=_0x1c2946;let _0x287f0e=_0x277ee5[_0x78e01d(0x2d3)],_0x5cc69c=_0x277ee5[_0x78e01d(0x2cc)],_0x5cabaa=[];for(let _0x1d7777 of _0x287f0e){if(_0x1d7777[_0x78e01d(0x1e4)]!=config['basecoin']){if(_0x1d7777[_0x78e01d(0x2ae)]>=_0x5cc69c/0x64){if(_0x1d7777[_0x78e01d(0x30b)])_0x5cabaa['push'](_0x1d7777);}else{if(_0x1d7777[_0x78e01d(0x2ae)]<=-_0x5cc69c/0x64){if(_0x1d7777['valid'])_0x5cabaa[_0x78e01d(0x27c)](_0x1d7777);}}}}if(_0x5cabaa[_0x78e01d(0x1aa)]>0x0){let _0x44b256=_0x5cabaa[_0x78e01d(0x19c)](_0x59b7c6=>_0x59b7c6[_0x78e01d(0x1e4)]);_0x44b256[_0x78e01d(0x314)]();let _0x29cd83=_0x44b256[_0x78e01d(0x304)](',\x20');if(!lastCoinsToBalance)logHistory(_0x78e01d(0x1fd),_0x78e01d(0x2fb));lastCoinsToBalance=_0x29cd83;}}function symbolToCoin(_0x4eb41b){const _0x545b8d=_0x1c2946;let _0x291d99;if(_0x4eb41b[_0x545b8d(0x2eb)]('/'+config[_0x545b8d(0x1f7)]))_0x291d99=_0x4eb41b[_0x545b8d(0x283)]('/'+config[_0x545b8d(0x1f7)],'');if(_0x4eb41b[_0x545b8d(0x2eb)](config['basecoin']+'/'))_0x291d99=_0x4eb41b[_0x545b8d(0x283)](config[_0x545b8d(0x1f7)]+'/','');return _0x291d99;}async function unlockOrders(){const _0x366b92=_0x1c2946;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x366b92(0x1a7)](_0x366b92(0x286)),lockOrders=ORDERS[_0x366b92(0x243)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5756b7=await getCoins();[currentCoins,currentCoinsAll]=_0x5756b7,validateOrdersState=_0x366b92(0x273),persistOpenOrders([]),lockOrders=ORDERS[_0x366b92(0x2c2)],logger[_0x366b92(0x1a7)](_0x366b92(0x19f));}}async function validateOrders(_0x907ce6){const _0x371fe0=_0x1c2946;if(_0x907ce6)validateOrdersState=_0x907ce6;logger[_0x371fe0(0x1a7)](_0x371fe0(0x20a)+validateOrdersState+_0x371fe0(0x1e7)+(lockOrders==0x1?_0x371fe0(0x1bd):lockOrders==0x2?_0x371fe0(0x237):'ORDERS.UNLOCKED'));let _0x1802e4=[],_0x346b12=config[_0x371fe0(0x294)]==_0x371fe0(0x2d9)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x371fe0(0x1ba)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x371fe0(0x23f)])return;logger['debug'](_0x371fe0(0x307)+validateOrdersState),lastOrders[_0x371fe0(0x301)](_0x2574ec=>{const _0x1e53a6=_0x371fe0;let _0x43fc7e=![];_0x2574ec[_0x1e53a6(0x292)]>0x0&&(_0x43fc7e=!![]),_0x1802e4[_0x1e53a6(0x27c)](_0x43fc7e),_0x43fc7e&&config[_0x1e53a6(0x294)]!=_0x1e53a6(0x2d9)&&logHistory(_0x1e53a6(0x2c7),_0x1e53a6(0x280)+_0x2574ec[_0x1e53a6(0x258)]+'\x20'+_0x2574ec[_0x1e53a6(0x209)]+'\x20#'+formatResult(_0x2574ec[_0x1e53a6(0x292)],0x8)+'\x20@'+formatResult(_0x2574ec['price'],0x8));}),_0x1802e4['forEach']((_0x1c7faa,_0x99e3a)=>{const _0x136acb=_0x371fe0;if(_0x1c7faa)lastOrders[_0x136acb(0x2c9)](_0x99e3a,0x1);}),persistOpenOrders(lastOrders);const _0x2fbd81=coolingDown?_0x371fe0(0x1be):'balancing\x20resumed';if(validateOrdersState==_0x371fe0(0x273)){validateOrdersState='ongoing';if(_0x1802e4[_0x371fe0(0x2eb)](![])){if(config[_0x371fe0(0x294)]==_0x371fe0(0x2d9)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x371fe0(0x2b7)){if(_0x1802e4['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x371fe0(0x294)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x371fe0(0x265))_0x1802e4[_0x371fe0(0x2eb)](![])&&(config['ordertype']==_0x371fe0(0x2d9)?logHistory(_0x371fe0(0x2c1),_0x371fe0(0x24f)+Math[_0x371fe0(0x2dd)](_0x346b12*validateOrderInterval/0xea60)+_0x371fe0(0x24d)+_0x2fbd81):(await cancelOrders(),logHistory(_0x371fe0(0x2c1),_0x371fe0(0x2c3)+Math['round'](_0x346b12*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2fbd81))),await unlockOrders();else{if(validateOrdersState==_0x371fe0(0x2a6)){if(config[_0x371fe0(0x294)]!=_0x371fe0(0x2d9))logHistory(_0x371fe0(0x2c1),_0x371fe0(0x268)+_0x2fbd81);await unlockOrders();}}}}}async function cancelOrders(){const _0x42182a=_0x1c2946;lastOrders[_0x42182a(0x301)](async _0x1e2846=>{const _0xa5e7e6=_0x42182a;try{const _0x4ce661=await exchange[_0xa5e7e6(0x24b)](_0x1e2846[_0xa5e7e6(0x1ab)],_0x1e2846[_0xa5e7e6(0x258)]);}catch(_0x59135c){if(_0x59135c[_0xa5e7e6(0x236)]()['includes'](_0xa5e7e6(0x22d))){}else await handleError(_0x59135c,'cancelOrders()');}});}async function initCoinResults(_0x54bdb1){const _0x536d7a=_0x1c2946;_0x54bdb1?logger[_0x536d7a(0x1a7)](_0x536d7a(0x29b)+_0x54bdb1):logger[_0x536d7a(0x1a7)](_0x536d7a(0x2d6)),config['portfolio']['forEach'](_0x168ae2=>{const _0x7c7959=_0x536d7a;if(!_0x168ae2[_0x7c7959(0x1e5)]&&_0x168ae2[_0x7c7959(0x1e4)]!=config[_0x7c7959(0x1f7)]){const _0x1c7bd3=currentCoins[_0x7c7959(0x24c)](_0x626306=>_0x626306[_0x7c7959(0x1e4)]==_0x168ae2[_0x7c7959(0x1e4)]),_0x482a07=global[_0x7c7959(0x29f)][noslash(_0x168ae2[_0x7c7959(0x258)])];let _0x2d3109=_0x1c7bd3?_0x1c7bd3['number']:null,_0x5ac1c6=_0x168ae2[_0x7c7959(0x259)]?0x1/_0x482a07:_0x482a07,_0x5e9e9a;config[_0x7c7959(0x1c8)][_0x7c7959(0x301)](_0x5f24dd=>{const _0x4f9542=_0x7c7959;!_0x5e9e9a&&(_0x5e9e9a=_0x5f24dd[_0x4f9542(0x2da)][_0x4f9542(0x24c)](_0x51d6f1=>_0x51d6f1['coin']==_0x168ae2[_0x4f9542(0x1e4)]),_0x5e9e9a&&(_0x2d3109=_0x5e9e9a[_0x4f9542(0x31a)],_0x5ac1c6=_0x5e9e9a[_0x4f9542(0x229)]));});let _0x34727e=dbCoinResults[_0x7c7959(0x2ca)](_0x7c7959(0x295))[_0x7c7959(0x24c)]({'coin':_0x168ae2[_0x7c7959(0x1e4)]})[_0x7c7959(0x2be)]();if(!_0x34727e){const _0x4a5095={'coin':_0x168ae2[_0x7c7959(0x1e4)],'number':_0x2d3109,'breakeven':_0x5ac1c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x7c7959(0x2ca)](_0x7c7959(0x295))['push'](_0x4a5095)['write']();}else{if(_0x54bdb1&&_0x168ae2[_0x7c7959(0x1e4)]==_0x54bdb1){const _0x26f96d={'coin':_0x168ae2[_0x7c7959(0x1e4)],'number':_0x2d3109,'breakeven':_0x5ac1c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x7c7959(0x2ca)](_0x7c7959(0x295))[_0x7c7959(0x24c)]({'coin':_0x168ae2[_0x7c7959(0x1e4)]})[_0x7c7959(0x25c)](_0x26f96d)[_0x7c7959(0x1f6)]();}}}});}async function updateCoinResults(_0x33658d,_0x34077b=![]){const _0x16f09c=_0x1c2946;let _0x40f3ab,_0x48d616,_0x203cf6,_0x249c33,_0x161217,_0x440e2b,_0x22685b=dbCoinResults[_0x16f09c(0x2ca)](_0x16f09c(0x295))['find']({'coin':_0x33658d[_0x16f09c(0x1e4)]})['value'](),_0x43714f=![];_0x22685b&&Object[_0x16f09c(0x253)](_0x22685b)[_0x16f09c(0x301)](([_0x311004,_0x46d45c])=>{if(_0x46d45c==null)_0x43714f=!![];});(!_0x22685b||_0x43714f)&&(await initCoinResults(_0x33658d[_0x16f09c(0x1e4)]),_0x22685b=dbCoinResults[_0x16f09c(0x2ca)](_0x16f09c(0x295))[_0x16f09c(0x24c)]({'coin':_0x33658d['coin']})[_0x16f09c(0x2be)]());_0x33658d[_0x16f09c(0x259)]&&(_0x440e2b={'filled':_0x33658d[_0x16f09c(0x292)]*_0x33658d[_0x16f09c(0x229)],'amount':_0x33658d[_0x16f09c(0x292)]*_0x33658d['price'],'side':_0x33658d[_0x16f09c(0x209)]==_0x16f09c(0x1dc)?_0x16f09c(0x1d7):_0x16f09c(0x1dc),'price':0x1/_0x33658d['price']},_0x33658d={..._0x33658d,..._0x440e2b});_0x34077b?_0x48d616=_0x33658d[_0x16f09c(0x209)]=='buy'?_0x22685b[_0x16f09c(0x31a)]+_0x33658d[_0x16f09c(0x292)]:_0x22685b[_0x16f09c(0x31a)]-_0x33658d[_0x16f09c(0x292)]:_0x48d616=await getCoinNumber(_0x33658d['coin']);if(_0x33658d['fee']&&_0x33658d[_0x16f09c(0x1a4)][_0x16f09c(0x2b9)]==config[_0x16f09c(0x1f7)])_0x40f3ab=_0x33658d[_0x16f09c(0x1a4)][_0x16f09c(0x30d)];else{if(_0x33658d[_0x16f09c(0x1a4)]&&_0x33658d[_0x16f09c(0x1a4)][_0x16f09c(0x2b9)]==_0x16f09c(0x204)&&!_0x34077b)_0x40f3ab=_0x33658d['fee'][_0x16f09c(0x30d)]*global[_0x16f09c(0x29f)]['BNB'+config['basecoin']];else _0x40f3ab=defaultFee*_0x33658d[_0x16f09c(0x292)]*_0x33658d['price'];}_0x33658d[_0x16f09c(0x209)]==_0x16f09c(0x1d7)?(_0x203cf6=_0x48d616!=0x0?(_0x22685b[_0x16f09c(0x27b)]*_0x22685b['number']+_0x33658d['price']*(_0x48d616-_0x22685b[_0x16f09c(0x31a)])+_0x40f3ab)/_0x48d616:0x0,_0x249c33=_0x22685b[_0x16f09c(0x1cf)]):(_0x203cf6=_0x48d616!=0x0?(_0x22685b[_0x16f09c(0x27b)]*_0x22685b[_0x16f09c(0x31a)]-_0x33658d['price']*(_0x22685b['number']-_0x48d616)+_0x40f3ab)/_0x48d616:0x0,_0x249c33=_0x22685b['realized']+(_0x33658d['price']-_0x22685b[_0x16f09c(0x27b)])*_0x33658d['filled']);_0x161217=(_0x33658d[_0x16f09c(0x229)]-_0x203cf6-_0x40f3ab/_0x33658d['filled'])*_0x48d616;let _0x1d7a3b={'coin':_0x33658d[_0x16f09c(0x1e4)],'number':_0x48d616,'breakeven':formatResult(_0x203cf6,0x8),'realized':formatResult(_0x249c33,0x8),'unrealized':formatResult(_0x161217,0x8),'fees':formatResult(_0x22685b[_0x16f09c(0x1fc)]+_0x40f3ab,0x8),'sells':_0x33658d[_0x16f09c(0x209)]==_0x16f09c(0x1dc)?_0x22685b[_0x16f09c(0x1c2)]+0x1:_0x22685b[_0x16f09c(0x1c2)],'buys':_0x33658d['side']=='buy'?_0x22685b['buys']+0x1:_0x22685b[_0x16f09c(0x1bb)]};dbCoinResults[_0x16f09c(0x2ca)](_0x16f09c(0x295))['find']({'coin':_0x33658d[_0x16f09c(0x1e4)]})[_0x16f09c(0x25c)](_0x1d7a3b)[_0x16f09c(0x1f6)]();if(!_0x34077b){if(_0x33658d['fee']&&_0x33658d[_0x16f09c(0x1a4)][_0x16f09c(0x2b9)]==_0x16f09c(0x204)){const _0x55810f=currentCoins['find'](_0x36b666=>_0x36b666[_0x16f09c(0x1e4)]==_0x16f09c(0x204));if(_0x55810f){let _0x189bfc=dbCoinResults[_0x16f09c(0x2ca)](_0x16f09c(0x295))[_0x16f09c(0x24c)]({'coin':_0x16f09c(0x204)})[_0x16f09c(0x2be)]();_0x1d7a3b={..._0x189bfc,'number':_0x55810f[_0x16f09c(0x31a)]},dbCoinResults[_0x16f09c(0x2ca)]('coins')[_0x16f09c(0x24c)]({'coin':_0x16f09c(0x204)})[_0x16f09c(0x25c)](_0x1d7a3b)[_0x16f09c(0x1f6)]();}}}}async function placeOrder(_0x551b56){const _0x3b385b=_0x1c2946,_0x259ee3=config[_0x3b385b(0x294)]==_0x3b385b(0x2d9)?_0x3b385b(0x2d9):_0x3b385b(0x2a5);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3b385b(0x23f)],allOrdersPlaced=![],validateOrdersState=_0x3b385b(0x273);let _0x4c271a=![];lastOrders=[];for(const _0x1d7899 of _0x551b56){let _0x4cc842,_0x83fb0b,_0x277497,_0x17780d,_0x546026,_0x5267d0=_0x1d7899[_0x3b385b(0x258)];try{const _0x10545b=await exchange['fetchTicker'](_0x5267d0);_0x4cc842=_0x1d7899[_0x3b385b(0x259)]?0x1/_0x1d7899[_0x3b385b(0x2d5)]:_0x1d7899[_0x3b385b(0x2d5)],_0x83fb0b=_0x10545b[_0x3b385b(0x30c)],_0x277497=_0x10545b[_0x3b385b(0x247)];_0x1d7899['reverse']?(_0x17780d=_0x1d7899['side']==_0x3b385b(0x1d7)?_0x3b385b(0x1dc):_0x3b385b(0x1d7),_0x546026=Math['abs'](_0x1d7899[_0x3b385b(0x2ce)])/_0x4cc842):(_0x17780d=_0x1d7899['side'],_0x546026=Math[_0x3b385b(0x224)](_0x1d7899[_0x3b385b(0x2ce)]));_0x259ee3=='limit'&&(config[_0x3b385b(0x294)]=='limit-high'&&(_0x4cc842=_0x17780d=='buy'?_0x83fb0b:_0x277497),config[_0x3b385b(0x294)]=='limit-low'&&(_0x4cc842=_0x17780d==_0x3b385b(0x1d7)?_0x277497:_0x83fb0b));_0x546026=formatResult(_0x546026,0x8),_0x4cc842=formatResult(_0x4cc842,0x8);const _0x448f8e=_0x17780d==_0x3b385b(0x1dc)?config[_0x3b385b(0x2b5)]?String[_0x3b385b(0x27e)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x3b385b(0x27e)]('0x'+config[_0x3b385b(0x1da)])+'\x20':'',_0xb7a57a=_0x259ee3==_0x3b385b(0x2d9)?_0x3b385b(0x291):config[_0x3b385b(0x294)]=='limit-high'?_0x3b385b(0x321):'Limit\x20(low-margin)',_0x235e49=(Math[_0x3b385b(0x320)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x3b385b(0x27c)]({'customId':_0x235e49,'symbol':_0x5267d0,'coin':_0x1d7899['coin'],'amount':_0x546026,'price':_0x4cc842,'side':_0x17780d,'reverse':_0x1d7899[_0x3b385b(0x259)],'filled':0x0});if(_0x259ee3=='market')logHistory(_0x3b385b(0x2c7),''+_0x448f8e+_0xb7a57a+_0x3b385b(0x254)+_0x5267d0+'\x20'+_0x17780d+'\x20#'+formatResult(_0x546026,0x8)+'\x20@'+formatResult(_0x4cc842,0x8));else logHistory('order',''+_0x448f8e+_0xb7a57a+_0x3b385b(0x254)+_0x5267d0+'\x20'+_0x17780d+'\x20#'+formatResult(_0x546026,0x8)+'\x20@'+formatResult(_0x4cc842,0x8));let _0x525eec;if(_0x259ee3==_0x3b385b(0x2d9))_0x525eec=await exchange['createOrder'](_0x5267d0,_0x259ee3,_0x17780d,_0x546026,undefined);else _0x525eec=await exchange['createOrder'](_0x5267d0,_0x259ee3,_0x17780d,_0x546026,_0x4cc842);logger[_0x3b385b(0x1a7)](_0x3b385b(0x2ec)+_0x525eec['id']+_0x3b385b(0x276)+_0x235e49);const _0x18546b=lastOrders[_0x3b385b(0x1aa)]-0x1;if(_0x18546b>=0x0&&lastOrders[_0x18546b][_0x3b385b(0x235)]==_0x235e49){lastOrders[_0x18546b]['orderId']=_0x525eec['id'];if(_0x525eec['amount'])lastOrders[_0x18546b]['amount']=_0x525eec[_0x3b385b(0x1cc)];if(_0x525eec[_0x3b385b(0x229)])lastOrders[_0x18546b]['price']=_0x525eec[_0x3b385b(0x229)];lastOrders[_0x18546b]['fee']=_0x525eec['fee'];}if(config[_0x3b385b(0x22b)]!=0x0){let _0x57d461=null;if(cooldownTracker[_0x3b385b(0x1aa)]==config[_0x3b385b(0x22b)]-0x1)_0x57d461=cooldownTracker[_0x3b385b(0x21a)]();const _0x2c6027=getTimeStamp();cooldownTracker[_0x3b385b(0x27c)](_0x2c6027);if(_0x57d461){const _0x1a44d4=fns[_0x3b385b(0x1ef)](new Date(_0x2c6027),new Date(_0x57d461));if(_0x1a44d4<cooldownInterval){logHistory(_0x3b385b(0x1db),'Executed\x20'+config['cooldown']+_0x3b385b(0x1b7)+cooldownInterval/0x3c+_0x3b385b(0x2b2)+cooldownPeriod/(0xe10*0x3e8)+_0x3b385b(0x2f4)),coolingDown=!![];break;}}}}catch(_0x692085){if(_0x692085[_0x3b385b(0x236)]()[_0x3b385b(0x2eb)](_0x3b385b(0x2e1)))lastOrders=lastOrders['filter'](_0x43539a=>_0x43539a[_0x3b385b(0x258)]!=_0x5267d0),logHistory(_0x3b385b(0x1db),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5267d0),_0x4c271a=!![];else{if(_0x692085[_0x3b385b(0x236)]()[_0x3b385b(0x2eb)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x16756f=>_0x16756f[_0x3b385b(0x258)]!=_0x5267d0),logHistory(_0x3b385b(0x1db),_0x3b385b(0x1f1)+_0x5267d0),_0x4c271a=!![];else{if(_0x692085['toString']()[_0x3b385b(0x2eb)](_0x3b385b(0x1af)))lastOrders=lastOrders[_0x3b385b(0x261)](_0x246ca3=>_0x246ca3[_0x3b385b(0x258)]!=_0x5267d0),logHistory(_0x3b385b(0x1db),_0x3b385b(0x30e)+_0x5267d0),_0x4c271a=!![];else _0x692085[_0x3b385b(0x236)]()[_0x3b385b(0x2eb)](_0x3b385b(0x1f0))?(lastOrders=lastOrders[_0x3b385b(0x261)](_0x250d83=>_0x250d83[_0x3b385b(0x258)]!=_0x5267d0),logHistory(_0x3b385b(0x1db),_0x3b385b(0x2f9)+_0x5267d0),_0x4c271a=!![]):(lastOrders=lastOrders['filter'](_0x548f9f=>_0x548f9f[_0x3b385b(0x258)]!=_0x5267d0),await handleError(_0x692085,'placeOrder()',_0x5267d0));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3b385b(0x1aa)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2f9a37=config[_0x3b385b(0x294)]==_0x3b385b(0x2d9)?validateOrderTimeout*0x3c*0x3e8:config[_0x3b385b(0x1ba)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x391794=_0x3b385b;validateOrders(_0x391794(0x265));},_0x2f9a37);}else unlockOrders();_0x4c271a&&config[_0x3b385b(0x1fb)]&&await pauseBot(_0x3b385b(0x2d4)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3b385b(0x2c1),_0x3b385b(0x323)));}else{if(coolingDown)!config['headless']&&logHistory(_0x3b385b(0x1db),_0x3b385b(0x23e));else lockOrders!=ORDERS[_0x3b385b(0x2c2)]&&(!config[_0x3b385b(0x1fb)]&&(config[_0x3b385b(0x294)]==_0x3b385b(0x2d9)?logHistory(_0x3b385b(0x1db),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3b385b(0x1db),_0x3b385b(0x26b))));}}function persistOpenOrders(_0x1068fb){const _0xc0d0f8=_0x1c2946,_0x2f351c={...config,'openOrders':_0x1068fb};let _0xb60b3a=dbConfig['get'](_0xc0d0f8(0x25d))[_0xc0d0f8(0x24c)]({'botID':botID})['value']();_0xb60b3a&&dbConfig[_0xc0d0f8(0x2ca)](_0xc0d0f8(0x25d))[_0xc0d0f8(0x24c)]({'botID':botID})[_0xc0d0f8(0x25c)](_0x2f351c)['write']();}function restoreOrders(){const _0x141e30=_0x1c2946;let _0x19a7f8;config['openOrders']&&allOpenOrders['forEach'](_0x4d9b74=>{const _0x5960b1=_0x4339,_0x2bccfe=config[_0x5960b1(0x1f9)][_0x5960b1(0x24c)](_0x2da332=>_0x2da332[_0x5960b1(0x1ab)]==_0x4d9b74['id']);_0x2bccfe&&(lastOrders['push'](_0x2bccfe),_0x19a7f8=_0x4d9b74['timestamp']);});if(lastOrders[_0x141e30(0x1aa)]>0x0){lockOrders=ORDERS[_0x141e30(0x23f)],validateOrdersState=_0x141e30(0x2b7),allOrdersPlaced=!![];const _0x4181c6=new Date()[_0x141e30(0x308)](),_0x282e2c=config[_0x141e30(0x294)]==_0x141e30(0x2d9)?validateOrderTimeout*0x3c*0x3e8:config[_0x141e30(0x1ba)]*0x3c*0x3e8;if(_0x19a7f8+_0x282e2c>_0x4181c6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x19a7f8+_0x282e2c-_0x4181c6);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x30002e=_0x1c2946;if(!coinsLoaded){process['send']({'telegrammsg':_0x30002e(0x264)},_0x2aeb56=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x25eb95='';if(config[_0x30002e(0x2fe)])_0x25eb95=_0x30002e(0x31e)+config[_0x30002e(0x322)]+_0x30002e(0x1a2);else _0x25eb95='<b>Bot\x20'+botID+_0x30002e(0x1a2);const _0x51fc0=getKPIs('basecoin'),_0x587bdc=getKPIs(_0x30002e(0x2f2),config['fiat']),_0x109fd8=getKPIs(_0x30002e(0x1a5)),_0x244d67=getKPIs(_0x30002e(0x31b),config[_0x30002e(0x2f2)]);_0x25eb95+=_0x30002e(0x21e),_0x25eb95+=_0x51fc0[_0x30002e(0x275)]+'\x20:\x20'+_0x51fc0[_0x30002e(0x2be)]+'\x0a',_0x25eb95+=_0x51fc0['rightTxt']+':\x20'+_0x51fc0[_0x30002e(0x227)]+'%\x0a',_0x25eb95+=_0x587bdc[_0x30002e(0x275)]+'\x20:\x20'+_0x587bdc[_0x30002e(0x2be)]+'\x0a',_0x25eb95+=_0x587bdc[_0x30002e(0x2a1)]+':\x20'+_0x587bdc['change']+'%\x0a',_0x25eb95+=_0x109fd8[_0x30002e(0x275)]+':\x20'+_0x109fd8[_0x30002e(0x2be)]+'\x20('+config[_0x30002e(0x1f7)]+')\x0a',_0x25eb95+=_0x109fd8[_0x30002e(0x2a1)]+':\x20'+_0x109fd8[_0x30002e(0x227)]+'%\x20('+config[_0x30002e(0x1f7)]+')\x0a',_0x25eb95+=_0x244d67[_0x30002e(0x275)]+':\x20'+_0x244d67['value']+'\x20('+config[_0x30002e(0x2f2)]+')\x0a',_0x25eb95+=_0x244d67[_0x30002e(0x2a1)]+':\x20'+_0x244d67[_0x30002e(0x227)]+'%\x20('+config[_0x30002e(0x2f2)]+')\x0a',_0x25eb95+=_0x30002e(0x2e6),process[_0x30002e(0x303)]({'telegrammsg':_0x25eb95},_0xb458e8=>{});}async function sendPortfolioTelegram(){const _0x3e595e=_0x1c2946;if(!coinsLoaded){process[_0x3e595e(0x303)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x208323=>{});return;}let _0x3f1cf5='';if(config[_0x3e595e(0x2fe)])_0x3f1cf5='<b>'+config[_0x3e595e(0x322)]+_0x3e595e(0x249);else _0x3f1cf5=_0x3e595e(0x1e3)+botID+_0x3e595e(0x249);_0x3f1cf5+=_0x3e595e(0x21e),_0x3f1cf5+='-------------------------------\x0a',_0x3f1cf5+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3f1cf5+=_0x3e595e(0x233),currentCoins[_0x3e595e(0x301)](_0x223897=>{const _0x28b413=_0x3e595e;_0x3f1cf5+=_0x223897[_0x28b413(0x1e4)][_0x28b413(0x1c4)](0x7)+'|\x20'+formatPad(_0x223897[_0x28b413(0x2f8)],0x2,0x6)+'|\x20'+formatPad(_0x223897[_0x28b413(0x21b)],0x2,0x6)+'|\x20'+formatPad(_0x223897[_0x28b413(0x2ae)]*0x64,0x2,0x6)+'\x0a';}),_0x3f1cf5+=_0x3e595e(0x2e6),process[_0x3e595e(0x303)]({'telegrammsg':_0x3f1cf5},_0x2abf6c=>{});}function formatPad(_0x334504,_0x25662f,_0x1d059a){const _0x29d8a0=_0x1c2946,_0x4c3aa2=formatResultString(_0x334504,_0x25662f);return _0x4c3aa2?_0x4c3aa2['padStart'](_0x1d059a):''[_0x29d8a0(0x1de)](_0x1d059a);}function logHistory(_0x2e502b,_0x4d8563,_0x4aae11=''){const _0x533c63=_0x1c2946;let _0x1e303d={'time':getTimeStamp(),'type':_0x2e502b,'event':_0x4d8563};dbLogs[_0x533c63(0x2ca)](_0x533c63(0x1a6))[_0x533c63(0x27c)](_0x1e303d)[_0x533c63(0x1f6)]();if(_0x4aae11=='')_0x4aae11=_0x4d8563;proxyEmit('event',{'log':_0x1e303d,'summary':_0x4aae11}),process[_0x533c63(0x303)]({'telegram':{..._0x1e303d,'botname':config[_0x533c63(0x322)],'showname':config[_0x533c63(0x2fe)]}},_0x29ba51=>{}),logger[_0x533c63(0x318)](''+_0x1e303d[_0x533c63(0x1e2)]);}function emitHistory(_0x216c21={}){const _0x1caa7c=_0x1c2946;Object['keys'](_0x216c21)[_0x1caa7c(0x1aa)]==0x0&&(_0x216c21={'type':[_0x1caa7c(0x2c7),_0x1caa7c(0x1e2)],'event':'','page':0x1});if(_0x216c21[_0x1caa7c(0x2cb)][_0x1caa7c(0x2eb)](_0x1caa7c(0x1e2)))_0x216c21['type'][_0x1caa7c(0x2c9)](_0x216c21['type'][_0x1caa7c(0x2e2)]('event'),0x1,_0x1caa7c(0x1db),_0x1caa7c(0x1fd),_0x1caa7c(0x2c1));if(dbLogs[_0x1caa7c(0x269)](_0x1caa7c(0x1a6))[_0x1caa7c(0x2be)]()){let _0x422388=dbLogs['get'](_0x1caa7c(0x1a6))[_0x1caa7c(0x261)](_0x39cb15=>{const _0x2fd120=_0x1caa7c;if(_0x216c21[_0x2fd120(0x2cb)][_0x2fd120(0x1aa)]==0x0)return![];else return _0x216c21[_0x2fd120(0x2cb)]['includes'](_0x39cb15[_0x2fd120(0x2cb)]);})[_0x1caa7c(0x261)](_0x4b378d=>{const _0x28a9c5=_0x1caa7c;if(_0x216c21[_0x28a9c5(0x1e2)]=='')return!![];else return _0x4b378d['event'][_0x28a9c5(0x309)]()['includes'](_0x216c21[_0x28a9c5(0x1e2)]['toLowerCase']());})['sortBy'](_0x1caa7c(0x1ae)),_0x24052e=_0x422388['value']()[_0x1caa7c(0x1aa)];_0x422388=_0x422388[_0x1caa7c(0x259)]()[_0x1caa7c(0x1c6)]((_0x216c21[_0x1caa7c(0x20c)]-0x1)*logPageSize,_0x216c21['page']*logPageSize-0x1)[_0x1caa7c(0x259)]()[_0x1caa7c(0x2be)](),proxyEmit(_0x1caa7c(0x25a),{'logs':_0x422388,'total':_0x24052e});}else proxyEmit(_0x1caa7c(0x25a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x20d131){const _0xb3ea33=_0x1c2946;if(dbLogs[_0xb3ea33(0x269)](_0xb3ea33(0x1a6))['value']()){const _0x10719a=dbLogs['get'](_0xb3ea33(0x1a6))['sortBy'](_0xb3ea33(0x1ae))[_0xb3ea33(0x261)](_0x22f70e=>{const _0xd7996e=_0xb3ea33;return _0x22f70e[_0xd7996e(0x2cb)]=='order';})['value']();dbLogs[_0xb3ea33(0x2ca)]('logs')[_0xb3ea33(0x262)]()[_0xb3ea33(0x1f6)](),dbLogs['get'](_0xb3ea33(0x1a6))['assign'](_0x10719a)[_0xb3ea33(0x1f6)](),emitHistory(_0x20d131);}}async function pauseBot(_0x5a5b43=''){const _0x34b0a0=_0x1c2946,_0x400508=new Date()['getTime']();if(!lastErrorShown||_0x400508-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x400508;!lastBotPause?(lastBotPause=_0x400508,consecutivePauses=0x1):(_0x400508-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x34b0a0(0x267)},_0x1c47fb=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x34b0a0(0x308)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x5a5b43)_0x5a5b43+='\x20|\x20';logHistory('error',_0x5a5b43+_0x34b0a0(0x316)+pauseBotInterval/0xea60+_0x34b0a0(0x293)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x51bd85=_0x1c2946;process[_0x51bd85(0x303)]({'stop':'kill'},_0x2d2902=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1567a6,_0x55b8bf){const _0x230c01=_0x1c2946;if(_0x1567a6[_0x230c01(0x236)]()[_0x230c01(0x2eb)]('API-key\x20format\x20invalid'))return logHistory(_0x230c01(0x1db),config[_0x230c01(0x1c9)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x1567a6['toString']()['includes'](_0x230c01(0x2a3)))return logHistory(_0x230c01(0x1db),config['exchange']+_0x230c01(0x271)),![];else{if(_0x1567a6['toString']()[_0x230c01(0x2eb)](_0x230c01(0x1c3)))return logHistory(_0x230c01(0x1db),config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x230c01(0x1db),_0x230c01(0x2f7)),![];else await handleError(_0x1567a6,_0x55b8bf);}}}async function handleError(_0x1f5506,_0x393909,_0x62dd56=''){const _0x5564bb=_0x1c2946,_0x5593e1=config[_0x5564bb(0x1c9)]||_0x5564bb(0x1b4);if(_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)](_0x5564bb(0x297))||_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)]('RateLimitExceeded'))await pauseBot(config['exchange']+_0x5564bb(0x198));else{if(_0x1f5506['toString']()[_0x5564bb(0x2eb)]('ExchangeNotAvailable')||_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)](_0x5564bb(0x1d8)))await pauseBot(config[_0x5564bb(0x1c9)]+_0x5564bb(0x19e));else{if(_0x1f5506[_0x5564bb(0x236)]()['includes'](_0x5564bb(0x211)))await pauseBot(config[_0x5564bb(0x1c9)]+_0x5564bb(0x22f));else{if(_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0x5564bb(0x1c7));else{if(_0x1f5506['toString']()[_0x5564bb(0x2eb)](_0x5564bb(0x1e6)))logHistory(_0x5564bb(0x1db),_0x393909+_0x5564bb(0x21d)),logHistory(_0x5564bb(0x1db),_0x5564bb(0x20f)),await killBot();else{if(_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)]('InvalidNonce'))logHistory(_0x5564bb(0x1db),_0x393909+_0x5564bb(0x302)),logHistory(_0x5564bb(0x1db),_0x5564bb(0x20f)),await killBot();else{if(_0x1f5506 instanceof ccxt['NetworkError'])logger[_0x5564bb(0x1a7)]('Uncaught\x20NetworkError:',_0x1f5506),await pauseBot(config[_0x5564bb(0x1c9)]+_0x5564bb(0x1fa));else{if(_0x1f5506['toString']()['includes'](_0x5564bb(0x28c)))logHistory('error',_0x393909+'\x20|\x20'+config[_0x5564bb(0x1c9)]+_0x5564bb(0x25e)),logHistory(_0x5564bb(0x1db),_0x5564bb(0x20f)),await killBot();else{if(_0x1f5506['toString']()[_0x5564bb(0x2eb)](_0x5564bb(0x2a3)))logHistory(_0x5564bb(0x1db),_0x393909+_0x5564bb(0x251)+config[_0x5564bb(0x1c9)]+_0x5564bb(0x1ac)),logHistory(_0x5564bb(0x1db),_0x5564bb(0x20f)),await killBot();else{if(_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)](_0x5564bb(0x1c3)))logHistory(_0x5564bb(0x1db),_0x393909+_0x5564bb(0x251)+config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x5564bb(0x1db),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1f5506[_0x5564bb(0x236)]()[_0x5564bb(0x2eb)]('InsufficientFunds'))logHistory('error',_0x393909+_0x5564bb(0x2b4)+_0x62dd56);else _0x1f5506 instanceof ccxt['ExchangeError']?(logger['debug'](_0x5564bb(0x272),_0x1f5506),logHistory(_0x5564bb(0x1db),_0x393909+_0x5564bb(0x251)+config[_0x5564bb(0x1c9)]+'\x20exchange\x20error')):(logger[_0x5564bb(0x318)](_0x393909+_0x5564bb(0x2a0),_0x1f5506),await pauseBot(_0x5564bb(0x279)));}}}}}}}}}}}function formatResult(_0x10ed6b,_0x12b006){return parseFloat(_0x10ed6b['toFixed'](_0x12b006));}function formatResultTruncate(_0x1dc9de,_0xa0ae71){const _0x144b53=_0x1c2946;let _0x333822=formatResultString(_0x1dc9de,0xa),_0x3f7dce=_0x333822['indexOf']('.');return _0x3f7dce!=-0x1&&(_0x333822=_0x333822[_0x144b53(0x1c6)](0x0,_0x3f7dce+_0xa0ae71+0x1)),Number(_0x333822);}function formatResultString(_0x37ec03,_0x29e157){const _0x2fafbb=_0x1c2946;let _0x1f9761;if(!(''+_0x37ec03)[_0x2fafbb(0x2eb)]('e'))_0x1f9761=+(Math[_0x2fafbb(0x2dd)](_0x37ec03+'e+'+_0x29e157)+'e-'+_0x29e157);else{let _0x1b93b0=(''+_0x37ec03)[_0x2fafbb(0x26f)]('e'),_0x5549e4='';+_0x1b93b0[0x1]+_0x29e157>0x0&&(_0x5549e4='+'),_0x1f9761=+(Math[_0x2fafbb(0x2dd)](+_0x1b93b0[0x0]+'e'+_0x5549e4+(+_0x1b93b0[0x1]+_0x29e157))+'e-'+_0x29e157);}return Number(_0x1f9761)['toFixed'](_0x29e157);}function getServerTime(){const _0x1291ee=_0x1c2946,_0x45313d=new Date();return _0x45313d[_0x1291ee(0x2d1)]()+'/'+(_0x45313d[_0x1291ee(0x282)]()+0x1)[_0x1291ee(0x236)]()['padStart'](0x2,'0')+'/'+_0x45313d[_0x1291ee(0x2c6)]()[_0x1291ee(0x236)]()[_0x1291ee(0x1de)](0x2,'0')+'\x20'+_0x45313d['getHours']()['toString']()[_0x1291ee(0x1de)](0x2,'0')+':'+_0x45313d['getMinutes']()[_0x1291ee(0x236)]()[_0x1291ee(0x1de)](0x2,'0')+':'+_0x45313d[_0x1291ee(0x288)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2ec86a=_0x1c2946,_0x43a56f=shiftedTime();return _0x43a56f[_0x2ec86a(0x2d1)]()+'/'+(_0x43a56f[_0x2ec86a(0x282)]()+0x1)[_0x2ec86a(0x236)]()[_0x2ec86a(0x1de)](0x2,'0')+'/'+_0x43a56f[_0x2ec86a(0x2c6)]()[_0x2ec86a(0x236)]()['padStart'](0x2,'0')+'\x20'+_0x43a56f[_0x2ec86a(0x1a0)]()[_0x2ec86a(0x236)]()[_0x2ec86a(0x1de)](0x2,'0')+':'+_0x43a56f[_0x2ec86a(0x317)]()[_0x2ec86a(0x236)]()['padStart'](0x2,'0')+':'+_0x43a56f['getSeconds']()[_0x2ec86a(0x236)]()[_0x2ec86a(0x1de)](0x2,'0');}function getDate(){const _0x2f7c08=_0x1c2946,_0x25675f=shiftedTime();return _0x25675f[_0x2f7c08(0x2d1)]()+'/'+(_0x25675f[_0x2f7c08(0x282)]()+0x1)[_0x2f7c08(0x236)]()[_0x2f7c08(0x1de)](0x2,'0')+'/'+_0x25675f[_0x2f7c08(0x2c6)]()[_0x2f7c08(0x236)]()[_0x2f7c08(0x1de)](0x2,'0');}function getHour(){const _0x4809c6=_0x1c2946,_0x34421f=shiftedTime();return _0x34421f[_0x4809c6(0x1a0)]()[_0x4809c6(0x236)]()[_0x4809c6(0x1de)](0x2,'0');}function sleep(_0x57f4b8){return new Promise(_0x5c7106=>setTimeout(_0x5c7106,_0x57f4b8));}function shiftedTime(){const _0x415b0c=_0x1c2946,_0x2e93cd=new Date();let _0xcfff83=_0x2e93cd;if(config&&config[_0x415b0c(0x2d8)]!==0x0)_0xcfff83=fns[_0x415b0c(0x256)](_0x2e93cd,{'hours':config[_0x415b0c(0x2d8)]});return _0xcfff83;}function timer(_0x38dd78){const _0x2375d8=_0x1c2946,_0x2942ef=new Date();!lasttime?console[_0x2375d8(0x2c4)](getTimeStamp()+_0x2375d8(0x29c),_0x38dd78,_0x2942ef):console['log'](getTimeStamp()+_0x2375d8(0x29c),_0x38dd78,(_0x2942ef-lasttime)/0x3e8),lasttime=_0x2942ef;}