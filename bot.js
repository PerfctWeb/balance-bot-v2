const _0x447c31=_0x2ceb;(function(_0x3b3e56,_0x139b01){const _0x238274=_0x2ceb,_0x49dcef=_0x3b3e56();while(!![]){try{const _0x58ef86=-parseInt(_0x238274(0x1c3))/0x1+parseInt(_0x238274(0x2e4))/0x2+parseInt(_0x238274(0x272))/0x3+-parseInt(_0x238274(0x159))/0x4+-parseInt(_0x238274(0x1d6))/0x5+parseInt(_0x238274(0x156))/0x6*(-parseInt(_0x238274(0x249))/0x7)+parseInt(_0x238274(0x1c6))/0x8;if(_0x58ef86===_0x139b01)break;else _0x49dcef['push'](_0x49dcef['shift']());}catch(_0x1d4404){_0x49dcef['push'](_0x49dcef['shift']());}}}(_0x3a83,0x7ad7e));const _0x1c3dda=function(){let _0x290eb5=!![];return function(_0x38b0d5,_0x563bed){const _0x32ccfc=_0x290eb5?function(){if(_0x563bed){const _0x58ae4f=_0x563bed['apply'](_0x38b0d5,arguments);return _0x563bed=null,_0x58ae4f;}}:function(){};return _0x290eb5=![],_0x32ccfc;};}(),_0xde65eb=_0x1c3dda(this,function(){const _0x27a554=_0x2ceb;return _0xde65eb[_0x27a554(0x2c5)]()['search'](_0x27a554(0x192))[_0x27a554(0x2c5)]()['constructor'](_0xde65eb)['search'](_0x27a554(0x192));});_0xde65eb();'use strict';const ccxt=require(_0x447c31(0x27a)),low=require('lowdb'),FileSync=require(_0x447c31(0x235)),fs=require('fs'),fns=require(_0x447c31(0x23e)),Crypt=require(_0x447c31(0x2c2))[_0x447c31(0x15e)],util=require(_0x447c31(0x225)),argv=require('yargs/yargs')(process[_0x447c31(0x171)][_0x447c31(0x1ba)](0x2))[_0x447c31(0x171)],path=require(_0x447c31(0x154));let exchange;global[_0x447c31(0x19d)]={},global['change']={};const usdBasecoins=[_0x447c31(0x1a2),_0x447c31(0x252),_0x447c31(0x2dd),_0x447c31(0x2ea),_0x447c31(0x258),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x447c31(0x2ae)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x447c31(0x2b9)+pauseBotIntervalLong/0xea60+_0x447c31(0x26d),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x447c31(0x1f2))[_0x447c31(0x22c)],botID=process[_0x447c31(0x171)][0x2]||_0x447c31(0x21f),pattern=/^[0-9]{3}$/;!pattern[_0x447c31(0x1a9)](botID)&&(console[_0x447c31(0x1b2)](_0x447c31(0x184)+botID+_0x447c31(0x22f)),killBot());const userID=process[_0x447c31(0x171)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x447c31(0x2bb),logspath=userID?_0x447c31(0x2af)+userID+'/':'./logs/',loggerfile=fs[_0x447c31(0x198)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x447c31(0x189)](configpath)&&fs[_0x447c31(0x157)](configpath);!fs['existsSync'](logspath)&&fs[_0x447c31(0x157)](logspath);function _0x2ceb(_0x23456b,_0x52b1f5){const _0x5c1a02=_0x3a83();return _0x2ceb=function(_0xde65eb,_0x1c3dda){_0xde65eb=_0xde65eb-0x152;let _0x3a83d0=_0x5c1a02[_0xde65eb];return _0x3a83d0;},_0x2ceb(_0x23456b,_0x52b1f5);}const configfile=configpath+_0x447c31(0x200)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x447c31(0x212),performancefile=configpath+_0x447c31(0x200)+botID+'-performance.json',coinresultsfile=configpath+_0x447c31(0x200)+botID+_0x447c31(0x185),settingsfile=configpath+_0x447c31(0x219),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x447c31(0x2ca),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x447c31(0x1a6)]({'logs':[],'version':serverversion})[_0x447c31(0x1d9)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x447c31(0x1d9)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x3a83(){const _0x43cd9d=['status','existsSync','delta','loading-canceled','getPortfolio(0)','exchanges','includes','splice','Pausing\x20for\x20','full','(((.+)+)+)+$','performance','cancelOrder','initclient','starting-balance-','configuration','createWriteStream','apiPassword','sortBy','Cryptocom','watchOrders','ticker','removed','************','RateLimitExceeded','symbol','USD','fetchTicker','max','toLowerCase','defaults','padStart','orderId','test','<b>Bot\x20','startnumber','usd','initial','amount','random','Order(s)\x20not\x20validated\x20after\x20','fetchOpenOrders','log','last','getCoins()','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20:\x20','showname','order','number','slice','\x20order:\x20','Error\x20details:','yyyy-MM-dd\x27T\x27HH:mm:ss',':\x20Bot\x20','\x20portfolio:</b>\x20\x0a\x0a','Saving\x20configuration','balancing\x20resumed','\x20change','386335sDMxuJ','Executing\x20exchange\x20reload','emitHistory','12879976otmNBm','starting-balances','time','ask','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','offset','emojibuy','.json','\x20|\x20Custom\x20ID:\x20','\x20exchange','getHours','buy','2\x20-\x20handling\x20FILLED\x20order:\x20','substring','botID','fetchBalance','5023650oXzyRF','\x20|\x20lock\x20orders:\x20','loadSymbols()','write','settings','leftTxt','sendMetricsTelegram','Loading\x20completed','startprice','configuration-stored','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','netoffset','rightTxt','exchange','Executed\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','amountToPrecision','ORDERS.LOCKED','round','assign','\x20>\x20[DEBUG]\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','cooldown','emojisell','get','progress','sort','./version.json','Bitget','Net\x20','MIN_NOTIONAL','padEnd','\x20not\x20available','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','isEqual','value','exec','Cooldown\x20ended\x20-\x20balancing\x20resumed','Fee\x20discount\x20refund\x20detected:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','bot-','placeOrder','\x20|\x20','coins','cancelLoading','watchOrders()','\x20orders\x20in\x20less\x20than\x20','remove','BNB/','basecoinvalue','Headless:\x20','recreateCoinResults()','split','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','change','getFullYear','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','milliseconds','-events.json','***','has','2.3.5','getPortfolio(1)','parse','entries','bb-settings.json','getCoinNumber()','\x20not\x20responding','No\x20more\x20open\x20orders\x20-\x20','openOrders','Resetting\x20bot\x20history','001','format','fee','basecoin','Binance','price','util','Invalid\x20API\x20key\x20or\x20secret\x20entered','push','limit','valid','DDoSProtection','sendPortfolioTelegram','version','autoliquidity','warning',',\x20must\x20be\x20a\x203\x20digit\x20number','must\x20be\x20greater\x20than\x20minimum\x20amount','restart','2\x20-\x20Orders\x20unlocked','ongoing','getPortfolio(2)','lowdb/adapters/FileSync','pro','recent20','currency','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','limits','botname','fetchClosedOrders','Invalid\x20symbol:\x20','date-fns','Manual\x20balancing\x20required','writeFile','fiat','/USD','\x20value','\x20blocked\x20your\x20API','\x20/\x20','2\x20-\x20Handled\x20open\x20orders','parseISO','logs','281701ZbygBU','ExchangeError','AuthenticationError','\x20|\x20exchange:\x20','decrypt','OnMaintenance','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','toggleBotMode','distribution','BUSD','Exchange','yyyy/MM/dd','findIndex','placeOrder()','average','USDC','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','debug','Limit\x20(high-margin)','stopExchange()','customId','startdate','Order\x20is\x20invalid:\x20','market','\x20|\x20highest\x20fee:\x20','timeshift','BTC','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Net\x20effect','loadMarkets','</pre>','reverse','getTime','recovery','BNB','\x20>\x20','\x20minutes','unlinkSync','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','colorscheme','bots','198063UOlaVa','getDate','kill','target',':\x20timer\x20>','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','watchTrades','createOrder','ccxt','%\x20(','event-history','close','change24h','-------------------------------\x0a','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','enabled','coin','toFixed','total','timeout','Unknown\x20error\x20occured','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','liquidity','buys','open','Portfolio\x20change\x20detected:\x20','eur','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','datetime','Transaction\x20detection\x20blocked','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.0','getPortfolio','1\x20-\x20FILLED\x20known\x20order:\x20','Order\x20amount\x20is\x20invalid:\x20','toUpperCase','InvalidOrder','type','getOpenOrders()','indexOf','sell','filter','Cex','side','Uncaught\x20Exception:','exchange\x20not\x20reloaded','set','cloneDeep','Reset\x20|\x20','net-basecoin','OrderNotFound','stringify','success','\x20closed\x20the\x20connection','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','exchange\x20reloaded','NetworkError','trade','threshold','1\x20-\x20FILLED\x20unknown\x20order:\x20','UNLOCKED','./logs/','spot','\x20minutes\x20-\x20','event','net-fiat','send','realized','replace','EUR','running','\x20-\x20pausing\x20bot\x20for\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','./config/','Order\x20filled:\x20','find','1\x20-\x20Handle\x20open\x20orders','filled','<pre>','ordertype','hybrid-crypto-js','\x20API\x20key\x20is\x20invalid','no\x20open\x20orders','toString','apiKey','shift','Bot\x20','1\x20-\x20Unlock\x20orders','/backup/','timestamp','uncaughtException','orderstatus','limit-high','none','cost','changes','final','ETH','fetchTickers','remainingSymbols','Avoiding\x20continuous\x20order\x20attempts','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','startsWith','privateKey','\x20metrics:</b>\x20\x0a\x0a','0\x20-\x20EXECUTION:\x20','string','TUSD','InsufficientFunds','API-key\x20format\x20invalid','1\x20-\x20Validate\x20orders:\x20','watchTransactions()','function','Unfilled\x20order(s)\x20canceled\x20after\x20','1930788ytRdri','password','length','bot','data','message','USDT','canceled','resetHistory','Initializing\x20coin\x20results','path','forEach','42ddmPCZ','mkdirSync','LOCKED','1861920xpAzNm','breakeven','/EUR','<b>','Limit\x20(low-margin)','Crypt','page','headless','percentage','added','onepagemode','portfolio','Huobipro','min','RequestTimeout','apiSecret','join','Transaction\x20detection\x20unblocked','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Error\x20while\x20deleting\x20files:\x20','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','error','sells','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','argv','-performance.json','balances','abs','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','map','Waited\x20','highest','getMonth','date','Resetting\x20coin\x20results:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getStartingBalances','excluded','ExchangeNotAvailable','red_yellow_blue','limit-low','concat','showConfig','Error:\x20Invalid\x20argument\x20','-results.json','getSeconds','args'];_0x3a83=function(){return _0x43cd9d;};return _0x3a83();}dbConfig[_0x447c31(0x1a6)]({'bot':[],'version':serverversion})[_0x447c31(0x1d9)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x447c31(0x1a6)]({'coins':[],'version':serverversion})[_0x447c31(0x1d9)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x223af5=>{const _0x16010e=_0x447c31;console[_0x16010e(0x1b2)](_0x223af5);},'simple':_0x1e87a9=>{const _0x21a094=_0x447c31;console[_0x21a094(0x1b2)](_0x1e87a9),loggerfile[_0x21a094(0x1d9)](util[_0x21a094(0x220)](_0x1e87a9)+'\x0a');},'full':async(_0x177826,_0x5e21d5='')=>{const _0x51532a=_0x447c31;let _0x21788b;if(config['showname'])_0x21788b=getTimeStamp()+':\x20'+config[_0x51532a(0x23b)]+_0x51532a(0x26c)+_0x177826;else _0x21788b=getTimeStamp()+':\x20Bot\x20'+botID+_0x51532a(0x26c)+_0x177826;console[_0x51532a(0x1b2)](_0x21788b),loggerfile[_0x51532a(0x1d9)](util['format'](_0x21788b)+'\x0a'),_0x5e21d5&&(console[_0x51532a(0x1b2)](_0x5e21d5),loggerfile[_0x51532a(0x1d9)](util[_0x51532a(0x220)](_0x5e21d5)+'\x0a'));},'debug':async(_0x318794,_0x14257d='')=>{const _0x3a509a=_0x447c31;let _0x527db2;if(config[_0x3a509a(0x1b7)])_0x527db2=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x318794;else _0x527db2=getTimeStamp()+_0x3a509a(0x1be)+botID+_0x3a509a(0x1ea)+_0x318794;if(debugging)console['log'](_0x527db2);loggerfile[_0x3a509a(0x1d9)](util['format'](_0x527db2)+'\x0a');if(_0x14257d){if(debugging)console[_0x3a509a(0x1b2)](_0x14257d);loggerfile[_0x3a509a(0x1d9)](util[_0x3a509a(0x220)](_0x14257d)+'\x0a');}}};process['on'](_0x447c31(0x2cc),function(_0x2d72be){const _0x22faa2=_0x447c31;logHistory('error',_0x22faa2(0x259)),logger[_0x22faa2(0x25a)](_0x22faa2(0x29e),_0x2d72be);});settings[_0x447c31(0x262)]!=config[_0x447c31(0x262)]&&updateTimeshift(settings[_0x447c31(0x262)]);settings[_0x447c31(0x163)]!=config[_0x447c31(0x163)]&&updateOnepagemode(settings[_0x447c31(0x163)]);process[_0x447c31(0x2b4)]({'started':'running'},_0x53ef73=>{}),initializeProcessListeners();function proxyEmit(_0x2d9da9,_0x4aa152=null){const _0x4e8444=_0x447c31;process[_0x4e8444(0x2b4)]({'function':_0x2d9da9,'args':_0x4aa152},_0x519a25=>{});}function initializeProcessListeners(){const _0x12ebec=_0x447c31;process['on'](_0x12ebec(0x2e9),_0x132093=>{const _0x305aca=_0x12ebec;switch(Object['keys'](_0x132093)[0x0]){case _0x305aca(0x262):_0x132093['timeshift']!=undefined&&(settings[_0x305aca(0x262)]=_0x132093[_0x305aca(0x262)],updateTimeshift(settings[_0x305aca(0x262)]));break;case _0x305aca(0x163):_0x132093[_0x305aca(0x163)]!=undefined&&(settings['onepagemode']=_0x132093[_0x305aca(0x163)],updateOnepagemode(settings[_0x305aca(0x163)]));break;case _0x305aca(0x271):_0x132093[_0x305aca(0x271)]!=undefined&&(bots=JSON[_0x305aca(0x217)](_0x132093['bots']),proxyEmit(_0x305aca(0x271),bots));break;case _0x305aca(0x2e2):switch(_0x132093['function']){case _0x305aca(0x195):initclient();break;case _0x305aca(0x250):toggleBotMode();break;case _0x305aca(0x1c5):emitHistory(_0x132093[_0x305aca(0x187)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x132093[_0x305aca(0x187)]);break;case _0x305aca(0x292):getPortfolio(_0x132093[_0x305aca(0x187)]);break;case'storeConfiguration':storeConfiguration(_0x132093[_0x305aca(0x187)]);break;case'storeHeadless':storeHeadless(_0x132093['args']);break;case'storeFiat':storeFiat(_0x132093['args']);break;case _0x305aca(0x152):resetHistory();break;case _0x305aca(0x17d):getStartingBalances(getNormalizedPerformance());break;case _0x305aca(0x201):placeOrder(_0x132093['args']);break;case _0x305aca(0x204):cancelLoading();break;case _0x305aca(0x183):showConfig();break;case _0x305aca(0x1dc):sendMetricsTelegram();break;case _0x305aca(0x22b):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2f9ca5=![]){const _0xad1ced=_0x447c31;logger['debug'](_0xad1ced(0x2a2)+(_0x2f9ca5?_0xad1ced(0x2a9):_0xad1ced(0x29f))+_0xad1ced(0x24c)+config[_0xad1ced(0x1e3)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2f9ca5)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0xad1ced(0x2c6)]!=_0xad1ced(0x213)){loadingProgress=0x0;if(_0x2f9ca5){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4ff6d6){handleErrorNoStop(_0x4ff6d6,_0xad1ced(0x1d8));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x2bcff8=await getCoins();[currentCoins,currentCoinsAll]=_0x2bcff8,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0xad1ced(0x1dd)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xad1ced(0x2e6)]==0x0&&allOpenOrders[_0xad1ced(0x2e6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xa44a45=_0x447c31;exchangeStopped=!![];try{await exchange[_0xa44a45(0x27d)]();}catch(_0x56a813){await handleError(_0x56a813,_0xa44a45(0x25c));}}async function reloadExchange(){const _0x5769fb=_0x447c31;while(lockOrders!=ORDERS[_0x5769fb(0x2ae)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x5769fb(0x1c4)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x342697=config[_0x447c31(0x1e3)],_0x35afe8=config[_0x447c31(0x2c6)],_0x37c787=config[_0x447c31(0x168)],_0x2cc50c=config['apiPassword']){const _0x259bc9=_0x447c31;exchange&&await stopExchange();!supportedExchanges()[_0x259bc9(0x18e)](_0x342697)&&(logHistory(_0x259bc9(0x16e),_0x259bc9(0x277)+_0x342697+_0x259bc9(0x1cf)),killBot());const _0x3fbb56=ccxt[_0x259bc9(0x236)][_0x342697[_0x259bc9(0x1a5)]()];exchange=new _0x3fbb56({'apiKey':_0x35afe8,'secret':_0x37c787,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x259bc9(0x2b0)}});if(_0x2cc50c)exchange[_0x259bc9(0x2e5)]=_0x2cc50c;}function setStableCoins(){const _0x2762f3=_0x447c31;let _0x597e7a=config[_0x2762f3(0x222)]==_0x2762f3(0x2d3)?_0x2762f3(0x2d3):'BTC',_0x36b9c3=!allSymbols[_0x2762f3(0x18e)](_0x597e7a+_0x2762f3(0x242))?_0x2762f3(0x2ea):_0x2762f3(0x1a2),_0x288927=!allSymbols[_0x2762f3(0x18e)](_0x597e7a+_0x2762f3(0x15b))?_0x36b9c3:_0x2762f3(0x2b7);stablecoins={'eur':{'coin':''+_0x597e7a+_0x288927,'symbol':_0x597e7a+'/'+_0x288927},'usd':{'coin':''+_0x597e7a+_0x36b9c3,'symbol':_0x597e7a+'/'+_0x36b9c3}};}async function initwsCcxt(){const _0x405883=_0x447c31;initCycle++;const _0x550958=initCycle;let _0x4d6213=[];config[_0x405883(0x164)][_0x405883(0x155)](_0x223ec1=>{const _0x596bed=_0x405883;if(!_0x223ec1[_0x596bed(0x17e)]&&_0x223ec1[_0x596bed(0x282)]!=config['basecoin'])_0x4d6213[_0x596bed(0x227)](_0x223ec1[_0x596bed(0x1a1)]);});if(!_0x4d6213[_0x405883(0x18e)](stablecoins[_0x405883(0x28c)][_0x405883(0x1a1)]))_0x4d6213[_0x405883(0x227)](stablecoins[_0x405883(0x28c)][_0x405883(0x1a1)]);if(!_0x4d6213['includes'](stablecoins[_0x405883(0x1ac)][_0x405883(0x1a1)]))_0x4d6213['push'](stablecoins[_0x405883(0x1ac)][_0x405883(0x1a1)]);if(config[_0x405883(0x1e3)][_0x405883(0x2d8)](_0x405883(0x223))){if(!_0x4d6213[_0x405883(0x18e)](_0x405883(0x208)+config[_0x405883(0x222)]))_0x4d6213[_0x405883(0x227)](_0x405883(0x208)+config[_0x405883(0x222)]);}loadCoins(_0x4d6213),_0x4d6213=validateSymbols(_0x4d6213);const _0x5a268d=async _0x367312=>{const _0x3ce0f5=_0x405883;let _0x1972e0;try{const _0x53f8a4=await getTickers(_0x367312);Object[_0x3ce0f5(0x218)](_0x53f8a4)[_0x3ce0f5(0x155)](_0x54a36=>{const _0x7f6f0e=_0x3ce0f5;_0x1972e0=_0x54a36[0x1]['symbol'],global[_0x7f6f0e(0x19d)][noslash(_0x1972e0)]=_0x54a36[0x1][_0x7f6f0e(0x1b3)],global['change'][_0x1972e0]=_0x54a36[0x1][_0x7f6f0e(0x161)];});}catch(_0x2c3056){await handleError(_0x2c3056,'initTickers()',_0x1972e0);}},_0x2c3026=async _0x4a9608=>{const _0x5eb7c2=_0x405883;while(initCycle==_0x550958){if(!botPaused)try{const _0x1bfc2e=await exchange[_0x5eb7c2(0x278)](_0x4a9608);global[_0x5eb7c2(0x19d)][noslash(_0x1bfc2e[0x0][_0x5eb7c2(0x1a1)])]=_0x1bfc2e[0x0][_0x5eb7c2(0x224)],await sleep(0x3e8);}catch(_0x2db203){if(!exchangeStopped)await handleError(_0x2db203,'watchTrades()',_0x4a9608);}else await sleep(0x64);}},_0x1a4bdd=async _0x196354=>{const _0x4352fa=_0x405883;while(initCycle==_0x550958){if(!botPaused){let _0xedc798;try{await sleep(0x3c*0x3e8);const _0x4d07c1=await getTickers(_0x196354);Object['entries'](_0x4d07c1)[_0x4352fa(0x155)](_0x3aa44f=>{const _0x10f7a8=_0x4352fa;_0xedc798=_0x3aa44f[0x1][_0x10f7a8(0x1a1)],global['change'][_0xedc798]=_0x3aa44f[0x1][_0x10f7a8(0x161)];});}catch(_0x523482){if(!exchangeStopped)await handleError(_0x523482,'fetchTickers()',_0xedc798);}}else await sleep(0x64);}},_0x164f37=async _0x45d591=>{const _0x1949bb=_0x405883;while(initCycle==_0x550958){if(!botPaused)try{const _0x40da45=await exchange[_0x1949bb(0x19c)](_0x45d591);initCycle==_0x550958&&_0x40da45['forEach'](_0x22b399=>{updateNumberCoinsCcxt(_0x22b399);});}catch(_0x23f1ce){if(!exchangeStopped)await handleError(_0x23f1ce,_0x1949bb(0x205));}else await sleep(0x64);}};_0x5a268d(_0x4d6213),_0x1a4bdd(_0x4d6213),_0x4d6213['forEach'](_0x153564=>{_0x2c3026(_0x153564),_0x164f37(_0x153564);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x189580){const _0x431b81=_0x447c31;let _0x13f550={};try{if(config[_0x431b81(0x1e3)]!=_0x431b81(0x19b))_0x13f550=await exchange[_0x431b81(0x2d4)](_0x189580);else for(const _0x39b57c of _0x189580){const _0x536bfa=await exchange['fetchTicker'](_0x39b57c);_0x13f550[_0x39b57c]=_0x536bfa;}return _0x13f550;}catch(_0x53d6e0){throw _0x53d6e0;}}async function watchTransactions(){const _0x334327=_0x447c31;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x30b7ac=await getCoins(),[_0x164450,_0x5e3709]=_0x30b7ac;let _0x16aa76=[];currentCoins[_0x334327(0x155)](_0x4d4520=>{const _0x57d2b8=_0x334327,_0x36beb5=_0x164450[_0x57d2b8(0x2bd)](_0x3736f4=>_0x3736f4[_0x57d2b8(0x282)]==_0x4d4520[_0x57d2b8(0x282)]);if(_0x36beb5){if(_0x4d4520['number']!=_0x36beb5['number']){let _0x1e2cb3;if(_0x4d4520[_0x57d2b8(0x282)]!=config[_0x57d2b8(0x222)]){const _0x422736=global['ticker'][noslash(_0x4d4520[_0x57d2b8(0x1a1)])];_0x1e2cb3=_0x4d4520['reverse']?0x1/_0x422736:_0x422736;}else _0x1e2cb3=0x1;_0x16aa76[_0x57d2b8(0x227)]({'coin':_0x4d4520[_0x57d2b8(0x282)],'symbol':_0x4d4520[_0x57d2b8(0x1a1)],'price':_0x1e2cb3,'number':Number(formatResult(_0x36beb5[_0x57d2b8(0x1b9)]-_0x4d4520[_0x57d2b8(0x1b9)],0x8)),'basecoinvalue':_0x1e2cb3*(_0x36beb5[_0x57d2b8(0x1b9)]-_0x4d4520[_0x57d2b8(0x1b9)])});}}});if(_0x16aa76[_0x334327(0x2e6)]==0x1&&!blockTransactionDetection){if(config[_0x334327(0x22d)]){logger[_0x334327(0x25a)](_0x334327(0x1f9)+_0x16aa76[0x0]['basecoinvalue']+_0x334327(0x261)+lastFees['highest']);if(lastFees[_0x334327(0x178)]==0x0||Math[_0x334327(0x174)](_0x16aa76[0x0][_0x334327(0x209)])>lastFees[_0x334327(0x178)]){delete _0x16aa76[0x0][_0x334327(0x1a1)],delete _0x16aa76[0x0][_0x334327(0x209)];let _0x2ec96e=[],_0x392d9f=[...config['liquidity']]||[],_0x37c178=config[_0x334327(0x288)];_0x392d9f[_0x334327(0x1f1)]((_0x341c9d,_0x2f87f5)=>_0x341c9d['date']>_0x2f87f5[_0x334327(0x17a)]?-0x1:_0x2f87f5['date']>_0x341c9d['date']?0x1:0x0);const _0x31481c=getDate();if(_0x392d9f[0x0]){const _0x735bb4=fns[_0x334327(0x217)](_0x392d9f[0x0][_0x334327(0x17a)],'yyyy/MM/dd',new Date()),_0x6f0feb=fns['parse'](_0x31481c,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x735bb4,_0x6f0feb)){_0x2ec96e=_0x392d9f[0x0][_0x334327(0x2d1)];const _0x10b316=_0x2ec96e[_0x334327(0x2bd)](_0xe68a17=>_0xe68a17[_0x334327(0x282)]==_0x16aa76[0x0][_0x334327(0x282)]);_0x10b316?(_0x10b316[_0x334327(0x1b9)]+=_0x16aa76[0x0][_0x334327(0x1b9)],_0x10b316[_0x334327(0x1b9)]==0x0&&(_0x2ec96e=_0x2ec96e[_0x334327(0x29b)](_0x2f4528=>{const _0x5a50de=_0x334327;return _0x2f4528[_0x5a50de(0x282)]!=_0x16aa76[0x0][_0x5a50de(0x282)];}))):_0x2ec96e[_0x334327(0x227)](_0x16aa76[0x0]);const _0x35e20b=_0x37c178[_0x334327(0x2bd)](_0xbf1b85=>_0xbf1b85[_0x334327(0x17a)]==_0x31481c);_0x35e20b['changes']=_0x2ec96e;}else _0x37c178[_0x334327(0x227)]({'date':_0x31481c,'changes':[_0x16aa76[0x0]]});}const _0x291d69=_0x37c178[_0x334327(0x2bd)](_0x46ca7e=>_0x46ca7e[_0x334327(0x17a)]==_0x31481c);if(_0x291d69){let _0x4c8a54=!![];_0x291d69[_0x334327(0x2d1)][_0x334327(0x155)](_0x5ae2c4=>{if(_0x5ae2c4['number']!=0x0)_0x4c8a54=![];}),_0x4c8a54&&(_0x37c178=_0x37c178['filter'](_0x2291a2=>{const _0x2cda18=_0x334327;return _0x2291a2[_0x2cda18(0x17a)]!=_0x31481c;}));}let _0x41331d=dbConfig[_0x334327(0x1ef)](_0x334327(0x2e7))[_0x334327(0x2bd)]({'botID':botID})[_0x334327(0x1fb)]();_0x41331d&&(dbConfig[_0x334327(0x1ef)](_0x334327(0x2e7))['find']({'botID':botID})[_0x334327(0x1e9)]({'liquidity':_0x37c178})[_0x334327(0x1d9)](),config['liquidity']=_0x37c178),logHistory(_0x334327(0x2a6),_0x334327(0x28b)+Math[_0x334327(0x174)](_0x16aa76[0x0]['number'])+'\x20'+_0x16aa76[0x0][_0x334327(0x282)]+'\x20'+(_0x16aa76[0x0]['number']>0x0?_0x334327(0x162):_0x334327(0x19e))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x334327(0x197),emittedConfiguration());}else logger[_0x334327(0x25a)](_0x334327(0x1fe)+Math[_0x334327(0x174)](_0x16aa76[0x0][_0x334327(0x1b9)])+'\x20'+_0x16aa76[0x0]['coin']+'\x20'+(_0x16aa76[0x0][_0x334327(0x1b9)]>0x0?'added':_0x334327(0x19e)));transactionDetected=!![];}else logger[_0x334327(0x25a)](_0x334327(0x28b)+Math['abs'](_0x16aa76[0x0][_0x334327(0x1b9)])+'\x20'+_0x16aa76[0x0][_0x334327(0x282)]+'\x20'+(_0x16aa76[0x0][_0x334327(0x1b9)]>0x0?_0x334327(0x162):_0x334327(0x19e))+_0x334327(0x1ec));}currentCoins=_0x164450,currentCoinsAll=_0x5e3709,await sleep(watchTransactionsInterval);}catch(_0x138c0e){if(!exchangeStopped)await handleError(_0x138c0e,_0x334327(0x2e1));}else await sleep(0x64);}}async function loadSymbols(){const _0x4f3f8e=_0x447c31;try{markets=await exchange[_0x4f3f8e(0x266)](),allSymbols=[],Object[_0x4f3f8e(0x218)](markets)['forEach'](_0x4e6ad6=>{const _0x389546=_0x4f3f8e;_0x4e6ad6[0x1]['active']&&_0x4e6ad6[0x1][_0x389546(0x2b0)]&&allSymbols[_0x389546(0x227)](_0x4e6ad6[0x0]);});}catch(_0x4cddbc){throw _0x4cddbc;}}function validateSymbols(_0x2e3fee){const _0x5107ee=_0x447c31;let _0x4029a2=[];return _0x2e3fee[_0x5107ee(0x155)](_0x45153d=>{const _0x37f114=_0x5107ee;!allSymbols[_0x37f114(0x18e)](_0x45153d)?logHistory('error',_0x37f114(0x23d)+_0x45153d+_0x37f114(0x280)):_0x4029a2[_0x37f114(0x227)](_0x45153d);}),_0x4029a2;}async function initclient(){const _0x1a6cd5=_0x447c31;proxyEmit(_0x1a6cd5(0x197),emittedConfiguration()),proxyEmit(_0x1a6cd5(0x18d),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1a6cd5(0x173),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x48f488=getNormalizedPerformance();emitPerformance(_0x48f488),getStartingBalances(_0x48f488);}async function toggleBotMode(){const _0x55936f=_0x447c31;let _0x330b3c=dbConfig['get'](_0x55936f(0x2e7))[_0x55936f(0x2bd)]({'botID':botID})[_0x55936f(0x1fb)]();if(_0x330b3c){const _0x5e493f=!_0x330b3c[_0x55936f(0x160)];dbConfig['get'](_0x55936f(0x2e7))[_0x55936f(0x2bd)]({'botID':botID})[_0x55936f(0x1e9)]({'headless':_0x5e493f})[_0x55936f(0x1d9)](),config[_0x55936f(0x160)]=_0x5e493f,proxyEmit(_0x55936f(0x197),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3fdd0e=_0x447c31;process[_0x3fdd0e(0x2b4)]({'updatebotmanager':!![]},_0x29f2e6=>{}),logger[_0x3fdd0e(0x25a)](_0x3fdd0e(0x20a)+config[_0x3fdd0e(0x160)]);}async function loadCoins(_0x40d9e1){const _0x295e2b=_0x447c31;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4c617d,_0x1f931b=0x0,_0x205e39=0x0;_0x40d9e1[_0x295e2b(0x155)](_0x36d41f=>{const _0x2b40eb=_0x295e2b;loading[_0x2b40eb(0x2d5)][_0x2b40eb(0x227)](_0x36d41f);}),loadingCanceled=![];let _0x2fb74c=![];while(_0x4c617d!=_0x40d9e1['length']+maxLoadingProgress){_0x4c617d=loadingProgress,_0x40d9e1[_0x295e2b(0x155)](_0x3a958c=>{const _0x527d48=_0x295e2b;if(global['ticker'][noslash(_0x3a958c)]){loading[_0x527d48(0x2d5)]=loading[_0x527d48(0x2d5)]['filter'](_0xdcbc15=>_0xdcbc15!=_0x3a958c);if(!watchedSymbols[_0x527d48(0x18e)](_0x3a958c))watchedSymbols[_0x527d48(0x227)](_0x3a958c);_0x4c617d++;}}),loading[_0x295e2b(0x1f0)]=Math[_0x295e2b(0x1e8)](_0x4c617d/(_0x40d9e1[_0x295e2b(0x2e6)]+maxLoadingProgress)*0x64);loading[_0x295e2b(0x1f0)]!=0x64&&(_0x205e39>0x1e*0x5&&(loading[_0x295e2b(0x285)]=!![],emitLoadingProgress()),_0x205e39>0x78*0x5&&!_0x2fb74c&&(_0x2fb74c=!![],logHistory(_0x295e2b(0x16e),_0x295e2b(0x264)+loading['remainingSymbols'][_0x295e2b(0x169)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x295e2b(0x16e),_0x295e2b(0x190)+loadCoinsRetryInterval/0xea60+_0x295e2b(0x28d)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x50d94e=_0x295e2b;process[_0x50d94e(0x2b4)]({'stop':_0x50d94e(0x231)},_0x5eb346=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1f931b!=loading['progress']&&(_0x1f931b=loading[_0x295e2b(0x1f0)],emitLoadingProgress()),_0x205e39++,await sleep(0xc8);}_0x4c617d==_0x40d9e1[_0x295e2b(0x2e6)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x295e2b(0x2b4)]({'status':_0x295e2b(0x281),'live':_0x295e2b(0x2b8)},_0x1a27bd=>{}),_0x2fb74c&&logHistory(_0x295e2b(0x2a6),_0x295e2b(0x290)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x8910a5=_0x447c31;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x8910a5(0x18b)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x41e41a=_0x447c31;let _0x3c1f22=global['ticker'][stablecoins[_0x41e41a(0x28c)][_0x41e41a(0x282)]],_0x2b8459=global[_0x41e41a(0x19d)][stablecoins['usd']['coin']];return{'eur':Number(_0x3c1f22),'usd':Number(_0x2b8459)};}function capitalize(_0x46401e){const _0x52a7e2=_0x447c31;return _0x46401e['substring'](0x0,0x1)[_0x52a7e2(0x295)]()+_0x46401e[_0x52a7e2(0x1d3)](0x1);}function supportedExchanges(){const _0x43485c=_0x447c31,_0x37d4d5=['ws',_0x43485c(0x2d4),_0x43485c(0x1a3),_0x43485c(0x278),_0x43485c(0x19c),_0x43485c(0x194),_0x43485c(0x279),_0x43485c(0x1b1),_0x43485c(0x23c),_0x43485c(0x1d5)];let _0x5a479f=[],_0x1c7509=[],_0x230f9c=ccxt[_0x43485c(0x236)][_0x43485c(0x18d)];_0x230f9c['forEach'](_0x58f081=>{const _0x3aebc9=_0x43485c;try{const _0x39758d=new ccxt[(_0x3aebc9(0x236))][_0x58f081]();_0x1c7509[_0x3aebc9(0x227)](_0x39758d);}catch(_0x380dee){}}),_0x1c7509[_0x43485c(0x155)](_0x32a8cc=>{let _0xfb4e9c=0x0;_0x37d4d5['forEach'](_0x5936c0=>{const _0x34abdf=_0x2ceb;_0x5936c0 in _0x32a8cc[_0x34abdf(0x214)]&&_0x32a8cc[_0x34abdf(0x214)][_0x5936c0]&&_0xfb4e9c++;}),_0xfb4e9c==_0x37d4d5['length']&&_0x5a479f['push'](capitalize(_0x32a8cc['id']));});let _0x1ff8b1=[];return _0x230f9c['forEach'](_0x4d9413=>{const _0x31afc2=_0x43485c;_0x4d9413=capitalize(_0x4d9413);if(!_0x5a479f['includes'](_0x4d9413))_0x1ff8b1[_0x31afc2(0x227)](_0x4d9413);}),_0x5a479f;}function setStartDatePerformance(){const _0x156ec5=_0x447c31;if(config&&config[_0x156ec5(0x288)][0x0][_0x156ec5(0x2d1)][_0x156ec5(0x2e6)]!=0x0){const _0x45f355=config[_0x156ec5(0x288)][0x0][_0x156ec5(0x2d1)];dbPerformance['get'](_0x156ec5(0x2e8))[_0x156ec5(0x2bd)]({'date':config[_0x156ec5(0x25e)]})['assign']({'coins':_0x45f355})['write']();}}async function recreateCoinResults(){const _0x5082db=_0x447c31;let _0x418727,_0x1d9b5e=[];try{const _0x3738ac=fns[_0x5082db(0x220)](fns[_0x5082db(0x247)](config[_0x5082db(0x25e)][_0x5082db(0x2b6)](/\//g,'-')),_0x5082db(0x1bd));for(const _0x359f1b of currentCoins){if(_0x359f1b[_0x5082db(0x282)]!=config[_0x5082db(0x222)]){let _0xda398=0x0,_0x9ee9cb,_0xa307eb;_0x418727=await getAllEventOrders(_0x359f1b['symbol']);if(_0x418727[_0x5082db(0x2e6)]>0x0)_0x418727[_0x5082db(0x155)](_0x3b8424=>{const _0xa7fed3=_0x5082db,_0x2cb93f=_0x359f1b[_0xa7fed3(0x1a1)][_0xa7fed3(0x18e)](config[_0xa7fed3(0x222)]+'/');_0x1d9b5e[_0xa7fed3(0x227)]({'datetime':_0x3b8424[_0xa7fed3(0x28e)],'coin':_0x359f1b[_0xa7fed3(0x282)],'symbol':_0x359f1b[_0xa7fed3(0x1a1)],'side':_0x3b8424[_0xa7fed3(0x29d)],'reverse':_0x2cb93f,'amount':formatResult(_0x3b8424['filled'],0x8),'filled':formatResult(_0x3b8424[_0xa7fed3(0x2bf)],0x8),'price':formatResult(_0x3b8424['price'],0x8)}),_0xda398=_0x3b8424['side']==_0xa7fed3(0x1d1)?_0xda398+_0x3b8424[_0xa7fed3(0x2bf)]:_0xda398-_0x3b8424[_0xa7fed3(0x2bf)];if(!_0xa307eb)_0xa307eb=_0x3b8424['price'];});_0x9ee9cb=_0x359f1b['number']-_0xda398;let _0x790e37;config[_0x5082db(0x288)]['forEach'](_0x16a530=>{const _0x22625c=_0x5082db;!_0x790e37&&(_0x790e37=_0x16a530[_0x22625c(0x2d1)][_0x22625c(0x2bd)](_0x3d10aa=>_0x3d10aa['coin']==_0x359f1b[_0x22625c(0x282)]),_0x790e37&&(_0x9ee9cb=_0x790e37[_0x22625c(0x1b9)],_0xa307eb=_0x790e37[_0x22625c(0x224)]));});let _0x547149=dbCoinResults[_0x5082db(0x1ef)]('coins')['find']({'coin':_0x359f1b[_0x5082db(0x282)]})[_0x5082db(0x1fb)]();_0x547149={'coin':_0x359f1b[_0x5082db(0x282)],'number':_0x9ee9cb,'breakeven':_0xa307eb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5082db(0x1ef)](_0x5082db(0x203))['find']({'coin':_0x359f1b[_0x5082db(0x282)]})[_0x5082db(0x1e9)](_0x547149)[_0x5082db(0x1d9)]();}}_0x1d9b5e[_0x5082db(0x1f1)]((_0x1244b1,_0x5eb207)=>_0x1244b1[_0x5082db(0x28e)]>_0x5eb207[_0x5082db(0x28e)]?0x1:_0x5eb207[_0x5082db(0x28e)]>_0x1244b1[_0x5082db(0x28e)]?-0x1:0x0);let _0x21c1d6=0x0;for(let _0x1e65de of _0x1d9b5e){await updateCoinResults(_0x1e65de,!![]);}}catch(_0x25e38e){await handleError(_0x25e38e,_0x5082db(0x20b));}}async function getAllEventOrders(_0x4e4afe){const _0x41c9e5=_0x447c31;let _0x1dd18b=[],_0x27c636=dbLogs[_0x41c9e5(0x1ef)](_0x41c9e5(0x248))['filter'](_0x2ffdc2=>{const _0x5242aa=_0x41c9e5,_0x4b22d0=_0x2ffdc2[_0x5242aa(0x2b2)][_0x5242aa(0x1a5)]();return _0x4b22d0[_0x5242aa(0x18e)](_0x4e4afe[_0x5242aa(0x1a5)]())&&(_0x4b22d0['includes'](_0x5242aa(0x260))&&_0x4b22d0[_0x5242aa(0x18e)](_0x5242aa(0x1b8))||_0x4b22d0[_0x5242aa(0x18e)](_0x5242aa(0x2bf))&&_0x4b22d0[_0x5242aa(0x18e)]('order'));})[_0x41c9e5(0x19a)]('time')[_0x41c9e5(0x1fb)]();return _0x27c636[_0x41c9e5(0x155)](_0x457123=>{const _0x137d55=_0x41c9e5,_0x3e1ca2=_0x457123[_0x137d55(0x2b2)][_0x137d55(0x18e)](_0x137d55(0x29a))?_0x137d55(0x29a):_0x137d55(0x1d1),_0x47c389=/#([0-9]|\.)+\s/i,_0x1ebf6c=Number(_0x47c389['exec'](_0x457123[_0x137d55(0x2b2)])[0x0]['slice'](0x1)),_0x2e96f2=/@([0-9]|\.)+$/i,_0x3fa7cc=Number(_0x2e96f2[_0x137d55(0x1fc)](_0x457123[_0x137d55(0x2b2)])[0x0][_0x137d55(0x1ba)](0x1));_0x1dd18b[_0x137d55(0x227)]({'datetime':_0x457123[_0x137d55(0x1c8)],'coin':symbolToCoin(_0x4e4afe),'symbol':_0x4e4afe,'side':_0x3e1ca2,'amount':_0x1ebf6c,'filled':_0x1ebf6c,'price':_0x3fa7cc});}),_0x1dd18b;}async function getAllOrders(_0x3f2208,_0x548373){const _0x17c397=_0x447c31;let _0x55b325=[];while(_0x548373<exchange[_0x17c397(0x211)]()){const _0x42faf6=0x1f4;try{const _0x1e5b9a=await exchange[_0x17c397(0x23c)](_0x3f2208,_0x548373,_0x42faf6);if(_0x1e5b9a[_0x17c397(0x2e6)])_0x548373=_0x1e5b9a[_0x1e5b9a[_0x17c397(0x2e6)]-0x1][_0x17c397(0x2cb)]+0x1,_0x55b325=_0x55b325[_0x17c397(0x182)](_0x1e5b9a);else break;}catch(_0x31a11e){await handleError(_0x31a11e,'getAllOrders()',_0x3f2208);}}return _0x55b325;}async function validate24hChanges(){const _0x43f081=_0x447c31;for(const _0xdf7248 of currentCoins){if(_0xdf7248['coin']!=config[_0x43f081(0x222)]){let _0x33af5a;_0xdf7248[_0x43f081(0x268)]?_0x33af5a=formatResult((0x1/(global[_0x43f081(0x20e)][noslash(_0xdf7248[_0x43f081(0x1a1)])]/0x64+0x1)-0x1)*0x64,0x3):_0x33af5a=global[_0x43f081(0x20e)][noslash(_0xdf7248[_0x43f081(0x1a1)])],_0x33af5a<config[_0x43f081(0x27e)]&&(logHistory(_0x43f081(0x16e),_0xdf7248[_0x43f081(0x282)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x33af5a+'%'),logHistory(_0x43f081(0x16e),_0x43f081(0x1f8)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x9d0b05,_0x33003f){const _0x36564f=_0x447c31;if(!_0x9d0b05)return!![];const _0xed031b=_0x33003f['split']('.'),_0x3d229d=_0x9d0b05[_0x36564f(0x20c)]('.');for(var _0x85abaa=0x0;_0x85abaa<_0x3d229d[_0x36564f(0x2e6)];_0x85abaa++){const _0x398b30=~~_0x3d229d[_0x85abaa],_0x58e9f7=~~_0xed031b[_0x85abaa];if(_0x398b30<_0x58e9f7)return!![];if(_0x398b30>_0x58e9f7)return![];}return![];}async function oneTimeMigration(){const _0x3e681c=_0x447c31;let _0x3ce383=dbLogs[_0x3e681c(0x1ef)](_0x3e681c(0x22c))[_0x3e681c(0x1fb)]();if(isOlderVersion(_0x3ce383,_0x3e681c(0x215))){let _0x21c41b=[];const _0x34917d=dbLogs[_0x3e681c(0x1ef)](_0x3e681c(0x248))[_0x3e681c(0x1fb)]();_0x34917d[_0x3e681c(0x155)](_0x5cecac=>{const _0x3bf464=_0x3e681c;_0x21c41b[_0x3bf464(0x227)]({'time':_0x5cecac[_0x3bf464(0x1c8)],'type':_0x5cecac[_0x3bf464(0x297)],'event':_0x5cecac[_0x3bf464(0x2b2)]});}),dbLogs['get'](_0x3e681c(0x248))[_0x3e681c(0x1e9)](_0x21c41b)[_0x3e681c(0x1d9)]();}let _0x2a2188=dbConfig[_0x3e681c(0x1ef)](_0x3e681c(0x22c))['value']();if(isOlderVersion(_0x2a2188,'2.3.5')){let _0x3e5ae3=dbConfig[_0x3e681c(0x1ef)](_0x3e681c(0x2e7))[_0x3e681c(0x2bd)]({'botID':botID})['value']();if(_0x3e5ae3){let _0x1d0770=[];_0x3e5ae3[_0x3e681c(0x164)]['forEach'](_0x42ba26=>{const _0x3e4744=_0x3e681c;_0x1d0770[_0x3e4744(0x227)]({'coin':_0x42ba26['coin'],'number':_0x42ba26[_0x3e4744(0x1ab)],'price':_0x42ba26[_0x3e4744(0x1de)]}),delete _0x42ba26[_0x3e4744(0x1ab)],delete _0x42ba26[_0x3e4744(0x1de)];});if(_0x1d0770['length']!==0x0)fs[_0x3e681c(0x240)](configbackuppath+(_0x3e681c(0x196)+botID+_0x3e681c(0x1cd)),JSON[_0x3e681c(0x2a5)](_0x1d0770,null,0x4),function(_0x11a196){if(_0x11a196){}});const _0x56c12e=(_0xe5cb7,_0x4bcfc8)=>{const _0x2bec5c=_0x3e681c;let _0x27a662=[];_0x4bcfc8['forEach'](_0x2bb8df=>{const _0x522bf6=_0x2ceb,_0x39c3c1=_0xe5cb7[_0x522bf6(0x2bd)](_0x31c1d7=>_0x31c1d7[_0x522bf6(0x282)]==_0x2bb8df[_0x522bf6(0x282)]);if(!_0x39c3c1)_0x27a662[_0x522bf6(0x227)](_0x2bb8df);});let _0x404c1b=[];return _0xe5cb7[_0x2bec5c(0x155)](_0xef017a=>{const _0x1f2220=_0x2bec5c,_0x40c323=_0x4bcfc8[_0x1f2220(0x2bd)](_0x339531=>_0x339531[_0x1f2220(0x282)]==_0xef017a['coin']);if(!_0x40c323||_0x40c323[_0x1f2220(0x1b9)]==0x0&&_0xef017a['number']!=0x0)_0x404c1b[_0x1f2220(0x227)](_0xef017a);}),{'missingDay1':_0x27a662,'notInDay2':_0x404c1b};},_0x4f2ea4=dbPerformance['get']('data')[_0x3e681c(0x2a1)]()[_0x3e681c(0x1fb)]();if(_0x4f2ea4['length']>0x1){const {missingDay1:_0x17b401,notInDay2:_0x2c36be}=_0x56c12e(_0x1d0770,_0x4f2ea4[0x1][_0x3e681c(0x203)]);_0x1d0770=[..._0x1d0770,..._0x17b401],_0x2c36be[_0x3e681c(0x155)](_0x3cb6da=>{const _0x2d48d1=_0x3e681c;let _0x54e030=_0x1d0770[_0x2d48d1(0x255)](_0x4c90aa=>_0x4c90aa[_0x2d48d1(0x282)]==_0x3cb6da[_0x2d48d1(0x282)]);_0x54e030!=-0x1&&_0x1d0770[_0x2d48d1(0x18f)](_0x54e030,0x1);});}_0x1d0770['sort']((_0x502c28,_0x3a3df9)=>_0x502c28['coin']>_0x3a3df9['coin']?0x1:_0x3a3df9[_0x3e681c(0x282)]>_0x502c28[_0x3e681c(0x282)]?-0x1:0x0);let _0x30aa49=[{'date':_0x3e5ae3['startdate'],'changes':_0x1d0770}];_0x4f2ea4['length']>0x2&&_0x4f2ea4[_0x3e681c(0x155)]((_0xff3ef8,_0x31bb70)=>{const _0x358f52=_0x3e681c;if(_0x31bb70>0x0&&_0x31bb70<_0x4f2ea4[_0x358f52(0x2e6)]-0x1){const {missingDay1:_0x403f95,notInDay2:_0x308c1d}=_0x56c12e(_0x4f2ea4[_0x31bb70][_0x358f52(0x203)],_0x4f2ea4[_0x31bb70+0x1][_0x358f52(0x203)]);_0x1d0770=[],(_0x403f95[_0x358f52(0x2e6)]!=0x0||_0x308c1d['length']!=0x0)&&(_0x403f95[_0x358f52(0x2e6)]!=0x0&&_0x1d0770[_0x358f52(0x227)](..._0x403f95),_0x308c1d[_0x358f52(0x2e6)]!=0x0&&(_0x308c1d[_0x358f52(0x155)](_0x3d091f=>{const _0x57e604=_0x358f52;_0x3d091f[_0x57e604(0x1b9)]=-_0x3d091f[_0x57e604(0x1b9)];}),_0x1d0770[_0x358f52(0x227)](..._0x308c1d)),_0x1d0770['sort']((_0x46397f,_0x958688)=>_0x46397f[_0x358f52(0x282)]>_0x958688['coin']?0x1:_0x958688[_0x358f52(0x282)]>_0x46397f[_0x358f52(0x282)]?-0x1:0x0),_0x30aa49[_0x358f52(0x227)]({'date':_0x4f2ea4[_0x31bb70+0x1][_0x358f52(0x17a)],'changes':_0x1d0770}));}}),dbConfig['get'](_0x3e681c(0x2e7))[_0x3e681c(0x2bd)]({'botID':botID})[_0x3e681c(0x1e9)]({..._0x3e5ae3,'liquidity':_0x30aa49})[_0x3e681c(0x1d9)]();}}if(isOlderVersion(_0x2a2188,_0x3e681c(0x291))){let _0x5c6df9=dbConfig[_0x3e681c(0x1ef)](_0x3e681c(0x2e7))[_0x3e681c(0x2bd)]({'botID':botID})[_0x3e681c(0x1fb)]();if(_0x5c6df9){const _0x514595=_0x5c6df9['exchange'],_0x365edc=_0x514595?capitalize(_0x514595):_0x3e681c(0x223);dbConfig[_0x3e681c(0x1ef)](_0x3e681c(0x2e7))[_0x3e681c(0x2bd)]({'botID':botID})[_0x3e681c(0x1e9)]({'exchange':_0x365edc})[_0x3e681c(0x1d9)]();}}let _0x440f80=dbPerformance[_0x3e681c(0x1ef)](_0x3e681c(0x22c))[_0x3e681c(0x1fb)]();isOlderVersion(_0x440f80,'2.3.5')&&setStartDatePerformance();let _0x45b47e=dbCoinResults['get'](_0x3e681c(0x22c))[_0x3e681c(0x1fb)]();if(isOlderVersion(_0x45b47e,'2.5.0')){let _0x2f507d=dbCoinResults['get'](_0x3e681c(0x203))['value']();if(_0x2f507d[_0x3e681c(0x2e6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x36acea=_0x447c31;dbConfig[_0x36acea(0x2a0)](_0x36acea(0x22c),serverversion)[_0x36acea(0x1d9)](),dbPerformance[_0x36acea(0x2a0)]('version',serverversion)[_0x36acea(0x1d9)](),dbLogs[_0x36acea(0x2a0)](_0x36acea(0x22c),serverversion)[_0x36acea(0x1d9)](),dbCoinResults[_0x36acea(0x2a0)](_0x36acea(0x22c),serverversion)[_0x36acea(0x1d9)]();}function getConfiguration(_0x26e85d){const _0x4586a8=_0x447c31;let _0x3c1e13=dbConfig[_0x4586a8(0x1ef)]('bot')[_0x4586a8(0x2bd)]({'botID':_0x26e85d})['value']();if(_0x3c1e13){let _0x223d66=![];typeof _0x3c1e13[_0x4586a8(0x2ac)]==_0x4586a8(0x2dc)&&(_0x3c1e13={..._0x3c1e13,'threshold':Number(_0x3c1e13[_0x4586a8(0x2ac)])},_0x223d66=!![]),_0x3c1e13[_0x4586a8(0x27e)]==undefined&&(_0x3c1e13={..._0x3c1e13,'change24h':-0x14},_0x223d66=!![]),_0x3c1e13[_0x4586a8(0x241)]==undefined&&(_0x3c1e13={..._0x3c1e13,'fiat':'USD'},_0x223d66=!![]),_0x3c1e13[_0x4586a8(0x163)]==undefined&&(_0x3c1e13={..._0x3c1e13,'onepagemode':settings['onepagemode']},_0x223d66=!![]),_0x3c1e13[_0x4586a8(0x270)]==undefined&&(_0x3c1e13={..._0x3c1e13,'colorscheme':_0x4586a8(0x180)},_0x223d66=!![]),_0x3c1e13['autoliquidity']==undefined&&(_0x3c1e13={..._0x3c1e13,'autoliquidity':!![]},_0x223d66=!![]),_0x223d66&&(_0x3c1e13={'botID':_0x3c1e13[_0x4586a8(0x1d4)],'exchange':_0x3c1e13[_0x4586a8(0x1e3)],'apiKey':_0x3c1e13[_0x4586a8(0x2c6)],'apiSecret':_0x3c1e13[_0x4586a8(0x168)],'apiPassword':_0x3c1e13[_0x4586a8(0x199)],'basecoin':_0x3c1e13['basecoin'],'botname':_0x3c1e13[_0x4586a8(0x23b)],'showname':_0x3c1e13[_0x4586a8(0x1b7)],'threshold':_0x3c1e13['threshold'],'ordertype':_0x3c1e13[_0x4586a8(0x2c1)],'timeout':_0x3c1e13[_0x4586a8(0x285)],'fiat':_0x3c1e13[_0x4586a8(0x241)],'startdate':_0x3c1e13[_0x4586a8(0x25e)],'recreate':_0x3c1e13['recreate'],'timeshift':_0x3c1e13[_0x4586a8(0x262)],'onepagemode':_0x3c1e13[_0x4586a8(0x163)],'headless':_0x3c1e13['headless'],'cooldown':_0x3c1e13[_0x4586a8(0x1ed)],'change24h':_0x3c1e13[_0x4586a8(0x27e)],'emojibuy':_0x3c1e13['emojibuy'],'emojisell':_0x3c1e13[_0x4586a8(0x1ee)],'colorscheme':_0x3c1e13[_0x4586a8(0x270)],'portfolio':_0x3c1e13[_0x4586a8(0x164)],'autoliquidity':_0x3c1e13[_0x4586a8(0x22d)],'liquidity':_0x3c1e13[_0x4586a8(0x288)],'openOrders':_0x3c1e13[_0x4586a8(0x21d)]},dbConfig['get'](_0x4586a8(0x2e7))[_0x4586a8(0x207)]()[_0x4586a8(0x1d9)](),dbConfig[_0x4586a8(0x1ef)](_0x4586a8(0x2e7))['push'](_0x3c1e13)[_0x4586a8(0x1d9)]());}else _0x3c1e13={'botID':_0x26e85d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4586a8(0x2c8)+_0x26e85d,'showname':![],'threshold':0x3,'ordertype':_0x4586a8(0x260),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x4586a8(0x163)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4586a8(0x180),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3c1e13;}function emittedConfiguration(){const _0x4fdc43=_0x447c31;let _0x545f7d;if(config['apiKey']=='')_0x545f7d={...config,'configstate':'initial'};else config[_0x4fdc43(0x2c6)]==_0x4fdc43(0x213)?_0x545f7d={...config,'configstate':_0x4fdc43(0x26a)}:(_0x545f7d={...config,'apiKey':'************','apiSecret':'************'},config[_0x4fdc43(0x199)]&&(_0x545f7d[_0x4fdc43(0x199)]=_0x4fdc43(0x19f)));return _0x545f7d;}function getSettings(){const _0x5f82f0=_0x447c31;return dbSettings['get'](_0x5f82f0(0x1da))[_0x5f82f0(0x1fb)]();}function getSecure(){const _0x166222=_0x447c31;return dbSecure[_0x166222(0x1ef)]('secure')[_0x166222(0x1fb)]()||{};}function updateTimeshift(_0x4e6f62){const _0x528b3d=_0x447c31;let _0x499881=dbConfig[_0x528b3d(0x1ef)](_0x528b3d(0x2e7))[_0x528b3d(0x2bd)]({'botID':botID})[_0x528b3d(0x1fb)]();_0x499881&&dbConfig[_0x528b3d(0x1ef)](_0x528b3d(0x2e7))[_0x528b3d(0x2bd)]({'botID':botID})[_0x528b3d(0x1e9)]({'timeshift':_0x4e6f62})[_0x528b3d(0x1d9)](),config[_0x528b3d(0x262)]=_0x4e6f62,proxyEmit(_0x528b3d(0x197),emittedConfiguration());}function updateOnepagemode(_0x1215d5){const _0x505a9c=_0x447c31;let _0xd32487=dbConfig['get'](_0x505a9c(0x2e7))[_0x505a9c(0x2bd)]({'botID':botID})[_0x505a9c(0x1fb)]();_0xd32487&&dbConfig['get'](_0x505a9c(0x2e7))[_0x505a9c(0x2bd)]({'botID':botID})[_0x505a9c(0x1e9)]({'onepagemode':_0x1215d5})[_0x505a9c(0x1d9)](),config[_0x505a9c(0x163)]=_0x1215d5,proxyEmit(_0x505a9c(0x197),emittedConfiguration());}async function storeConfiguration(_0x1beffd){const _0x25e29d=_0x447c31;logger[_0x25e29d(0x25a)](_0x25e29d(0x1c0));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x25e29d(0x25a)](_0x25e29d(0x28f));let _0x232780=![],_0x52e155=![],_0x4d71b9=[];_0x1beffd[_0x25e29d(0x164)][_0x25e29d(0x155)](_0x20c5d0=>{const _0xc6c763=_0x25e29d;if(!_0x20c5d0[_0xc6c763(0x17e)]&&_0x20c5d0['coin']!=_0x1beffd['basecoin'])_0x4d71b9['push'](_0x20c5d0['symbol']);}),_0x4d71b9[_0x25e29d(0x155)](_0x150292=>{const _0x1cda03=_0x25e29d,_0x2b73c1=currentCoins[_0x1cda03(0x2bd)](_0x7c2124=>_0x7c2124[_0x1cda03(0x1a1)]==_0x150292);!_0x2b73c1&&(_0x232780=!![]);}),currentCoins[_0x25e29d(0x155)](_0x4de7b1=>{const _0x5165ae=_0x25e29d;if(_0x4de7b1['coin']!=config[_0x5165ae(0x222)]){const _0x2b032d=_0x4d71b9[_0x5165ae(0x2bd)](_0x7db127=>_0x7db127==_0x4de7b1[_0x5165ae(0x1a1)]);!_0x2b032d&&(_0x232780=!![]);}}),_0x1beffd[_0x25e29d(0x164)][_0x25e29d(0x155)](_0x2f40bc=>{const _0x2006e9=_0x25e29d,_0x12bcd9=config['portfolio'][_0x2006e9(0x2bd)](_0x548124=>_0x548124[_0x2006e9(0x282)]==_0x2f40bc[_0x2006e9(0x282)]);if(_0x12bcd9&&_0x2f40bc['offset']!=_0x12bcd9[_0x2006e9(0x1cb)])_0x52e155=!![];});let _0x33359b=dbConfig[_0x25e29d(0x1ef)]('bot')[_0x25e29d(0x2bd)]({'botID':botID})[_0x25e29d(0x1fb)]();_0x1beffd={..._0x1beffd,'apiKey':crypt[_0x25e29d(0x24d)](secure['privateKey'],_0x1beffd[_0x25e29d(0x2c6)])['message'],'apiSecret':crypt[_0x25e29d(0x24d)](secure[_0x25e29d(0x2d9)],_0x1beffd[_0x25e29d(0x168)])[_0x25e29d(0x2e9)]};_0x1beffd[_0x25e29d(0x199)]&&(_0x1beffd[_0x25e29d(0x199)]=crypt[_0x25e29d(0x24d)](secure['privateKey'],_0x1beffd['apiPassword'])[_0x25e29d(0x2e9)]);let _0x4046de=![];if(_0x33359b){_0x1beffd[_0x25e29d(0x2c6)]==_0x25e29d(0x19f)?_0x1beffd[_0x25e29d(0x2c6)]=config['apiKey']:_0x4046de=!![];_0x1beffd[_0x25e29d(0x168)]==_0x25e29d(0x19f)?_0x1beffd[_0x25e29d(0x168)]=config[_0x25e29d(0x168)]:_0x4046de=!![];if(_0x1beffd[_0x25e29d(0x199)]=='************')_0x1beffd[_0x25e29d(0x199)]=config[_0x25e29d(0x199)];else{if(_0x1beffd['apiPassword'])_0x4046de=!![];}dbConfig[_0x25e29d(0x1ef)](_0x25e29d(0x2e7))[_0x25e29d(0x2bd)]({'botID':botID})[_0x25e29d(0x1e9)](_0x1beffd)[_0x25e29d(0x1d9)]();}else dbConfig['get'](_0x25e29d(0x2e7))[_0x25e29d(0x227)](_0x1beffd)[_0x25e29d(0x1d9)](),_0x4046de=!![],process['send']({'status':_0x25e29d(0x281),'live':_0x25e29d(0x2b8)},_0x1d7916=>{});process[_0x25e29d(0x2b4)]({'botname':_0x1beffd[_0x25e29d(0x23b)]},_0x3e38d2=>{}),config={..._0x1beffd},updateBotManager(),proxyEmit(_0x25e29d(0x1df)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4046de)await reset(!![]);else _0x232780||_0x52e155?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x25e29d(0x25a)](_0x25e29d(0x16a));}async function storeHeadless(_0x49140a){const _0x326fdc=_0x447c31,_0x164487={...config,'headless':_0x49140a['headless']};let _0x21f364=dbConfig[_0x326fdc(0x1ef)](_0x326fdc(0x2e7))['find']({'botID':botID})['value']();_0x21f364&&dbConfig['get']('bot')[_0x326fdc(0x2bd)]({'botID':botID})[_0x326fdc(0x1e9)](_0x164487)[_0x326fdc(0x1d9)](),config={..._0x164487},updateBotManager(),proxyEmit(_0x326fdc(0x197),emittedConfiguration());}async function storeFiat(_0x5d12cb){const _0x45fdc1=_0x447c31,_0x4dd2a5={...config,'fiat':_0x5d12cb};let _0x45b7bf=dbConfig[_0x45fdc1(0x1ef)](_0x45fdc1(0x2e7))[_0x45fdc1(0x2bd)]({'botID':botID})[_0x45fdc1(0x1fb)]();_0x45b7bf&&dbConfig[_0x45fdc1(0x1ef)]('bot')['find']({'botID':botID})[_0x45fdc1(0x1e9)](_0x4dd2a5)[_0x45fdc1(0x1d9)](),config={..._0x4dd2a5},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x15aea9=_0x447c31;logger[_0x15aea9(0x191)](_0x15aea9(0x21e));try{if(fs[_0x15aea9(0x189)](path['join'](configpath,'bot-'+botID+_0x15aea9(0x212))))fs[_0x15aea9(0x26e)](path[_0x15aea9(0x169)](configpath,_0x15aea9(0x200)+botID+_0x15aea9(0x212)));if(fs[_0x15aea9(0x189)](path[_0x15aea9(0x169)](configpath,'bot-'+botID+_0x15aea9(0x172))))fs[_0x15aea9(0x26e)](path[_0x15aea9(0x169)](configpath,_0x15aea9(0x200)+botID+'-performance.json'));if(fs[_0x15aea9(0x189)](path[_0x15aea9(0x169)](configpath,_0x15aea9(0x200)+botID+_0x15aea9(0x185))))fs[_0x15aea9(0x26e)](path[_0x15aea9(0x169)](configpath,_0x15aea9(0x200)+botID+_0x15aea9(0x185)));}catch(_0x11e580){if(_0x11e580)logger[_0x15aea9(0x191)](_0x15aea9(0x16c),_0x11e580);}const _0x3bad49=getDate();let _0x12d5fa=[];currentCoins['forEach'](_0x3f4e23=>{const _0x21ba9a=_0x15aea9;_0x12d5fa[_0x21ba9a(0x227)]({'coin':_0x3f4e23[_0x21ba9a(0x282)],'number':_0x3f4e23[_0x21ba9a(0x1b9)],'price':_0x3f4e23['last']});});let _0x56fe77=dbConfig[_0x15aea9(0x1ef)]('bot')[_0x15aea9(0x2bd)]({'botID':botID})[_0x15aea9(0x1fb)]();_0x56fe77&&(dbConfig[_0x15aea9(0x1ef)](_0x15aea9(0x2e7))[_0x15aea9(0x2bd)]({'botID':botID})[_0x15aea9(0x1e9)]({'liquidity':[{'date':_0x3bad49,'changes':_0x12d5fa}]})[_0x15aea9(0x1d9)](),config[_0x15aea9(0x288)]=[]),process[_0x15aea9(0x2b4)]({'stop':_0x15aea9(0x231)},_0x4ab0ac=>{});}function noslash(_0xd4f099){const _0x1383f9=_0x447c31;return _0xd4f099[_0x1383f9(0x2b6)]('/','');}function updateHighestFee(_0x403c4f){const _0x34f2d2=_0x447c31;if(_0x403c4f[_0x34f2d2(0x268)]){let _0xb630f={'filled':_0x403c4f[_0x34f2d2(0x2bf)]*_0x403c4f['price'],'amount':_0x403c4f[_0x34f2d2(0x2bf)]*_0x403c4f['price'],'side':_0x403c4f[_0x34f2d2(0x29d)]==_0x34f2d2(0x29a)?_0x34f2d2(0x1d1):_0x34f2d2(0x29a),'price':0x1/_0x403c4f['price']};_0x403c4f={..._0x403c4f,..._0xb630f};}const _0x21144b=defaultFee*_0x403c4f['filled']*_0x403c4f[_0x34f2d2(0x224)];lastFees[_0x34f2d2(0x237)]['length']===0x14&&lastFees['recent20'][_0x34f2d2(0x2c7)](),lastFees['recent20'][_0x34f2d2(0x227)](_0x21144b),lastFees[_0x34f2d2(0x178)]=Math['max'](...lastFees[_0x34f2d2(0x237)]);}async function updateNumberCoinsCcxt(_0x37b515){const _0x1d8cce=_0x447c31;logger[_0x1d8cce(0x25a)](_0x1d8cce(0x2db)+_0x37b515[_0x1d8cce(0x1a1)]+'\x20|\x20'+_0x37b515[_0x1d8cce(0x188)]+_0x1d8cce(0x202)+_0x37b515[_0x1d8cce(0x2bf)]+_0x1d8cce(0x245)+_0x37b515['amount']+_0x1d8cce(0x202)+_0x37b515['id']);let _0x4371cb=_0x37b515[_0x1d8cce(0x188)],_0x367dc2=![];currentCoins['forEach'](_0x391350=>{const _0x31a8f0=_0x1d8cce;_0x391350[_0x31a8f0(0x1a1)]==_0x37b515[_0x31a8f0(0x1a1)]&&(_0x367dc2=!![]);});if(!_0x367dc2)return;const _0x4ee8f3=currentCoins[_0x1d8cce(0x2bd)](_0x539e3b=>_0x539e3b[_0x1d8cce(0x1a1)]==_0x37b515[_0x1d8cce(0x1a1)]),_0x3642d3=_0x5ab15c=>{const _0x2587a6=_0x1d8cce;if(_0x4ee8f3)_0x4ee8f3[_0x2587a6(0x2cd)]=_0x5ab15c;};if(_0x4371cb=='open')_0x3642d3(_0x1d8cce(0x28a));else{if(_0x4371cb==_0x1d8cce(0x2eb)){_0x3642d3(_0x1d8cce(0x2eb));const _0x96ea47=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x96ea47,await getOpenOrders(),handleOpenOrders();}else{if(_0x4371cb=='closed'){let _0x4ef300=![];if(lastOrders)for(const _0x4b059a of lastOrders){const _0x4759cf=0xc8,_0x51950d=0x1388;let _0x1f96bf=0x0;while(!_0x4b059a['orderId']&&_0x1f96bf*_0x4759cf<_0x51950d){_0x1f96bf++,await sleep(_0x4759cf);}if(_0x1f96bf>0x0)logger['debug'](_0x1d8cce(0x177)+_0x1f96bf*_0x4759cf/0x3e8+_0x1d8cce(0x1e5));if(_0x4b059a[_0x1d8cce(0x1a8)]==_0x37b515['id']){logger['debug'](_0x1d8cce(0x293)+_0x37b515['id']),_0x4ef300=!![];if(_0x4b059a[_0x1d8cce(0x2bf)]==0x0){logger['debug'](_0x1d8cce(0x1d2)+_0x37b515['id']);if(_0x37b515[_0x1d8cce(0x257)])_0x4b059a[_0x1d8cce(0x224)]=_0x37b515['average'];else{if(_0x37b515[_0x1d8cce(0x224)])_0x4b059a[_0x1d8cce(0x224)]=_0x37b515['price'];else{}}_0x4b059a[_0x1d8cce(0x2bf)]=_0x37b515[_0x1d8cce(0x2bf)],updateHighestFee(_0x4b059a),_0x3642d3('filled'),await validateOrders();if(lockOrders==ORDERS[_0x1d8cce(0x158)]){const _0x457cca=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x457cca;}_0x4b059a[_0x1d8cce(0x221)]={'currency':_0x37b515[_0x1d8cce(0x221)]?_0x37b515['fee'][_0x1d8cce(0x238)]:null,'cost':_0x37b515[_0x1d8cce(0x221)]?_0x37b515['fee'][_0x1d8cce(0x2d0)]:0x0},await updateCoinResults(_0x4b059a);}}}if(!_0x4ef300){logger[_0x1d8cce(0x25a)](_0x1d8cce(0x2ad)+_0x37b515['id']),_0x3642d3(_0x1d8cce(0x2bf));const _0x41813a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x41813a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x11d856=JSON[_0x1d8cce(0x217)](lastBalances[_0x1d8cce(0x164)]);const _0x2eafbf=_0x11d856[_0x1d8cce(0x2bd)](_0x1d202a=>_0x1d202a[_0x1d8cce(0x1a1)]==_0x37b515['symbol']);if(_0x2eafbf){if(_0x4371cb==_0x1d8cce(0x28a))_0x2eafbf[_0x1d8cce(0x2cd)]=_0x2eafbf[_0x1d8cce(0x2cd)]==_0x1d8cce(0x2bf)?_0x1d8cce(0x2bf):_0x1d8cce(0x28a);else{if(_0x4371cb=='canceled')_0x2eafbf[_0x1d8cce(0x2cd)]=_0x2eafbf[_0x1d8cce(0x2cd)]==_0x1d8cce(0x2bf)?_0x1d8cce(0x2bf):_0x1d8cce(0x2eb);else _0x4371cb=='closed'&&(_0x2eafbf[_0x1d8cce(0x2cd)]=_0x1d8cce(0x2bf));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1d8cce(0x2a5)](_0x11d856)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x443384=_0x447c31;await getOpenOrders();let _0x5a7bc5=![];currentCoins[_0x443384(0x155)](_0x5b843c=>{const _0x189249=_0x443384;_0x5a7bc5=allOpenOrders[_0x189249(0x2bd)](_0x20ae8f=>_0x20ae8f[_0x189249(0x1a1)]==_0x5b843c['symbol']),_0x5b843c['orderstatus']=_0x5a7bc5?'open':_0x189249(0x2cf);});}async function getCoins(_0x137d2d=0x0,_0x40d755=!![],_0x3702ae=config[_0x447c31(0x222)]){const _0x56fa5f=_0x447c31;let _0x2d7b55,_0x170197=[],_0x303a87=[],_0x1366a4=[];if(_0x137d2d)await sleep(_0x137d2d);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2d7b55=await exchange[_0x56fa5f(0x1d5)](),mybalances=_0x2d7b55[_0x56fa5f(0x284)];for(const [_0x2a70ea,_0x296d37]of Object[_0x56fa5f(0x218)](mybalances)){_0x1366a4[_0x56fa5f(0x227)](_0x2a70ea);}config[_0x56fa5f(0x164)]['forEach'](_0x5f5060=>{const _0x551eb7=_0x56fa5f;!_0x1366a4[_0x551eb7(0x18e)](_0x5f5060[_0x551eb7(0x282)])&&(mybalances[_0x5f5060[_0x551eb7(0x282)]]=0x0);});if(_0x3702ae=='')for(const [_0x47fc1e,_0x207dea]of Object[_0x56fa5f(0x218)](mybalances)){_0x207dea!=0x0&&_0x170197[_0x56fa5f(0x227)]({'coin':_0x47fc1e});}else{let _0x15f53d=![];for(const [_0x41081d,_0x3713df]of Object[_0x56fa5f(0x218)](mybalances)){const _0x2dfe4d=config[_0x56fa5f(0x164)][_0x56fa5f(0x2bd)](_0x53521f=>_0x53521f[_0x56fa5f(0x282)]==_0x41081d),_0x2a3418=_0x41081d+'/'+_0x3702ae,_0x24020a=_0x3702ae+'/'+_0x41081d,_0x15524d=currentCoins[_0x56fa5f(0x2bd)](_0x34e8ac=>_0x34e8ac[_0x56fa5f(0x282)]==_0x41081d);_0x15f53d=![];if((_0x3713df!=0x0||_0x2dfe4d)&&(allSymbols[_0x56fa5f(0x18e)](_0x2a3418)||_0x41081d==_0x3702ae))_0x170197[_0x56fa5f(0x227)]({'coin':_0x41081d,'symbol':_0x2a3418,'reverse':![],'number':Math['max'](_0x3713df+(_0x2dfe4d&&_0x2dfe4d[_0x56fa5f(0x1cb)]||0x0),0x0),'orderstatus':_0x15524d?_0x15524d['orderstatus']:_0x56fa5f(0x2cf)});else{if((_0x3713df!=0x0||_0x2dfe4d)&&allSymbols[_0x56fa5f(0x18e)](_0x24020a))_0x170197[_0x56fa5f(0x227)]({'coin':_0x41081d,'symbol':_0x24020a,'reverse':!![],'number':Math[_0x56fa5f(0x1a4)](_0x3713df+(_0x2dfe4d&&_0x2dfe4d['offset']||0x0),0x0),'orderstatus':_0x15524d?_0x15524d[_0x56fa5f(0x2cd)]:_0x56fa5f(0x2cf)});else _0x2dfe4d&&_0x170197['push']({'coin':_0x2dfe4d[_0x56fa5f(0x282)],'symbol':_0x2dfe4d[_0x56fa5f(0x1a1)],'reverse':_0x2dfe4d['reverse'],'number':0x0,'orderstatus':_0x56fa5f(0x2cf)});}}}}catch(_0x178282){if(!_0x40d755)handleErrorNoStop(_0x178282,_0x56fa5f(0x1b4));else await handleError(_0x178282,'getCoins()');}return _0x303a87=cloneDeep(_0x170197),_0x170197=_0x170197['filter'](_0x2a9036=>{const _0x1cc8d3=_0x56fa5f,_0x5e02df=config['portfolio'][_0x1cc8d3(0x2bd)](_0x23a9f0=>_0x23a9f0['coin']==_0x2a9036['coin']);return _0x5e02df&&!_0x5e02df[_0x1cc8d3(0x17e)];}),[_0x170197,_0x303a87];}async function getCoinNumber(_0x2d91a6){const _0x5dc302=_0x447c31;let _0x5eac44;try{const _0x1028f1=await exchange[_0x5dc302(0x1d5)]();_0x5eac44=_0x1028f1[_0x5dc302(0x284)][_0x2d91a6];}catch(_0x468901){await handleError(_0x468901,_0x5dc302(0x21a));}return _0x5eac44;}async function getOpenOrders(){const _0x19f94d=_0x447c31;let _0x24832b;allOpenOrders=[];try{for(const _0xab69d9 of config[_0x19f94d(0x164)]){!_0xab69d9[_0x19f94d(0x17e)]&&_0xab69d9[_0x19f94d(0x282)]!=config[_0x19f94d(0x222)]&&(_0x24832b=await exchange[_0x19f94d(0x1b1)](_0xab69d9[_0x19f94d(0x1a1)]),_0x24832b['length']>0x0&&allOpenOrders['push'](_0x24832b[0x0]));}}catch(_0x4b2570){await handleError(_0x4b2570,_0x19f94d(0x298));}}async function handleOpenOrders(_0x1fa5f4=0x0){const _0x3d84f9=_0x447c31;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3d84f9(0x158)]&&allOrdersPlaced&&(_0x1fa5f4==0x0?(logger[_0x3d84f9(0x25a)](_0x3d84f9(0x2be)),_0x1fa5f4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3d84f9(0x25a)](_0x3d84f9(0x246)),validateOrders(_0x3d84f9(0x2c4))));}async function testAPI(_0x4ce3b5){const _0x213a9d=_0x447c31,_0x2a9dec=ccxt['pro'][_0x4ce3b5[_0x213a9d(0x1e3)]['toLowerCase']()],_0x1f01ae=new _0x2a9dec({'apiKey':_0x4ce3b5['apiKey'],'secret':_0x4ce3b5[_0x213a9d(0x168)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x213a9d(0x2b0)}});if(_0x4ce3b5[_0x213a9d(0x199)])_0x1f01ae['password']=_0x4ce3b5[_0x213a9d(0x199)];try{await _0x1f01ae[_0x213a9d(0x266)]();}catch(_0x88b69c){throw _0x88b69c;}}function cloneDeep(_0x54aff0){const _0xac06a4=_0x447c31;return JSON[_0xac06a4(0x217)](JSON['stringify'](_0x54aff0));}async function getPortfolio(_0x2cdd36){const _0x1e22a2=_0x447c31;let _0x5210b7=[],_0xb2d301=[],_0x1797d4=[],_0x5821c9;if(_0x2cdd36[_0x1e22a2(0x2c6)]!=='************'||_0x2cdd36[_0x1e22a2(0x168)]!==_0x1e22a2(0x19f)||_0x2cdd36[_0x1e22a2(0x199)]&&_0x2cdd36[_0x1e22a2(0x199)]!==_0x1e22a2(0x19f)){if(config[_0x1e22a2(0x1e3)]){if(_0x2cdd36['apiKey']=='************')_0x2cdd36[_0x1e22a2(0x2c6)]=config[_0x1e22a2(0x2c6)];if(_0x2cdd36[_0x1e22a2(0x168)]==_0x1e22a2(0x19f))_0x2cdd36[_0x1e22a2(0x168)]=config['apiSecret'];if(_0x2cdd36[_0x1e22a2(0x199)]==_0x1e22a2(0x19f))_0x2cdd36['apiPassword']=config[_0x1e22a2(0x199)];try{await testAPI(_0x2cdd36);}catch(_0x2736ac){if(_0x2736ac[_0x1e22a2(0x2c5)]()[_0x1e22a2(0x18e)](_0x1e22a2(0x24b))){logger[_0x1e22a2(0x25a)](_0x1e22a2(0x226)),proxyEmit(_0x1e22a2(0x164),![]);return;}else{handleError(_0x2736ac,_0x1e22a2(0x18c));return;}}}await initExchange(_0x2cdd36['exchange'],_0x2cdd36[_0x1e22a2(0x2c6)],_0x2cdd36['apiSecret'],_0x2cdd36[_0x1e22a2(0x199)]);try{await loadSymbols();}catch(_0x37c479){if(_0x37c479[_0x1e22a2(0x2c5)]()[_0x1e22a2(0x18e)](_0x1e22a2(0x24b))){proxyEmit(_0x1e22a2(0x164),![]);return;}else{handleError(_0x37c479,_0x1e22a2(0x216));return;}}const _0x4b0040=await getCoins(0x0,![],_0x2cdd36[_0x1e22a2(0x222)]);_0x1797d4=cloneDeep(_0x4b0040[0x1]);}else _0x1797d4=cloneDeep(currentCoinsAll);if(_0x2cdd36[_0x1e22a2(0x222)]=='')proxyEmit('portfolio',_0x1797d4);else{_0x1797d4[_0x1e22a2(0x155)](_0x10c96b=>{const _0x3cfa5e=_0x1e22a2;if(_0x10c96b['coin']!=_0x2cdd36['basecoin']&&allSymbols['includes'](_0x10c96b[_0x3cfa5e(0x1a1)]))_0x5210b7[_0x3cfa5e(0x227)](_0x10c96b[_0x3cfa5e(0x1a1)]);});if(_0x5210b7[_0x1e22a2(0x2e6)]==0x0)logHistory('error',_0x1e22a2(0x2ba));else{try{_0xb2d301=await getTickers(_0x5210b7);}catch(_0x3b434d){if(_0x3b434d['toString']()['includes'](_0x1e22a2(0x24b))){proxyEmit(_0x1e22a2(0x164),![]);return;}else handleError(_0x3b434d,_0x1e22a2(0x234));}_0x1797d4['forEach'](_0x51322c=>{const _0x3c0eba=_0x1e22a2;_0x51322c[_0x3c0eba(0x282)]!=_0x2cdd36[_0x3c0eba(0x222)]?_0xb2d301[_0x51322c[_0x3c0eba(0x1a1)]]?_0x5821c9=_0x51322c[_0x3c0eba(0x268)]?0x1/_0xb2d301[_0x51322c[_0x3c0eba(0x1a1)]][_0x3c0eba(0x1b3)]:_0xb2d301[_0x51322c['symbol']][_0x3c0eba(0x1b3)]:_0x5821c9=0x0:_0x5821c9=0x1,_0x51322c[_0x3c0eba(0x224)]=formatResult(_0x5821c9,0x8);}),proxyEmit(_0x1e22a2(0x164),_0x1797d4);}}}function truncateTradeAmount(_0x4ec895,_0x4d2dfa){const _0x3b37df=_0x447c31;let _0x364f43=0x0;try{_0x364f43=exchange[_0x3b37df(0x1e6)](_0x4ec895,_0x4d2dfa);}catch(_0x11716c){}return _0x364f43;}function checkMinimums(_0x53377b){const _0x4180ae=_0x447c31;let _0x5a23b8=!![];const _0x3b542b=!_0x53377b['reverse']?markets[_0x53377b[_0x4180ae(0x1a1)]]['limits'][_0x4180ae(0x1ae)][_0x4180ae(0x166)]:markets[_0x53377b[_0x4180ae(0x1a1)]][_0x4180ae(0x23a)][_0x4180ae(0x2d0)][_0x4180ae(0x166)],_0x23b1f9=!_0x53377b[_0x4180ae(0x268)]?markets[_0x53377b[_0x4180ae(0x1a1)]]['limits'][_0x4180ae(0x2d0)]['min']:markets[_0x53377b[_0x4180ae(0x1a1)]][_0x4180ae(0x23a)][_0x4180ae(0x1ae)]['min'],_0x2da27f=truncateTradeAmount(_0x53377b[_0x4180ae(0x1a1)],_0x53377b[_0x4180ae(0x2ab)]);_0x53377b['trade']=_0x2da27f;if(Math['abs'](_0x2da27f)<_0x3b542b)_0x5a23b8=![];if(Math[_0x4180ae(0x174)](_0x2da27f)*_0x53377b[_0x4180ae(0x1b3)]<_0x23b1f9)_0x5a23b8=![];if(_0x53377b[_0x4180ae(0x29d)]==_0x4180ae(0x29a)){let _0x555a08=config[_0x4180ae(0x164)][_0x4180ae(0x2bd)](_0x5e905f=>_0x5e905f[_0x4180ae(0x282)]==_0x53377b[_0x4180ae(0x282)]);if(_0x555a08[_0x4180ae(0x1cb)]>0x0){if(Math[_0x4180ae(0x174)](_0x2da27f)>_0x53377b[_0x4180ae(0x1b9)]-_0x555a08['offset'])_0x5a23b8=![];}else{if(Math[_0x4180ae(0x174)](_0x2da27f)>_0x53377b[_0x4180ae(0x1b9)])_0x5a23b8=![];}}if(_0x53377b[_0x4180ae(0x29d)]==_0x4180ae(0x1d1)){let _0x17c93c=config[_0x4180ae(0x164)]['find'](_0x4bcbd3=>_0x4bcbd3['coin']==config[_0x4180ae(0x222)]),_0x11d867=currentCoins['find'](_0x16f5c9=>_0x16f5c9['coin']==config['basecoin']);if(_0x17c93c[_0x4180ae(0x1cb)]>0x0){if(Math[_0x4180ae(0x174)](_0x2da27f)*_0x53377b[_0x4180ae(0x1b3)]>_0x11d867[_0x4180ae(0x1b9)]-_0x17c93c[_0x4180ae(0x1cb)])_0x5a23b8=![];}else{if(Math[_0x4180ae(0x174)](_0x2da27f)*_0x53377b[_0x4180ae(0x1b3)]>_0x11d867[_0x4180ae(0x1b9)])_0x5a23b8=![];}}return _0x5a23b8;}async function getBalances(_0x9b2d05=!![]){const _0x520b9c=_0x447c31;let _0x4fce4a=0x0,_0x32c428;const _0xf42cf0=config[_0x520b9c(0x2ac)];if(config['headless']&&config[_0x520b9c(0x27e)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x49f071=>{const _0x25d01a=_0x520b9c;if(_0x49f071[_0x25d01a(0x282)]!=config['basecoin']){let _0x4c48d9=global[_0x25d01a(0x19d)][noslash(_0x49f071[_0x25d01a(0x1a1)])];_0x32c428=_0x49f071[_0x25d01a(0x268)]?0x1/_0x4c48d9:_0x4c48d9;}else _0x32c428=0x1;let _0x4dc3f5=_0x49f071[_0x25d01a(0x1b9)]*_0x32c428;_0x4fce4a+=_0x4dc3f5,_0x49f071[_0x25d01a(0x1b3)]=formatResult(Number(_0x32c428),0x8),_0x49f071[_0x25d01a(0x1fb)]=_0x4dc3f5;}),currentCoins[_0x520b9c(0x155)](_0x56b3cf=>{const _0x112172=_0x520b9c;let _0x3d9fa8=config['portfolio']['find'](_0x56ae9e=>_0x56ae9e[_0x112172(0x282)]==_0x56b3cf[_0x112172(0x282)]),_0x54710a=Number(_0x3d9fa8[_0x112172(0x251)]),_0x260fd0=_0x56b3cf[_0x112172(0x1fb)]/_0x4fce4a*0x64,_0x3a75e3=_0x54710a*_0x4fce4a/0x64/_0x56b3cf[_0x112172(0x1b3)]-_0x56b3cf['number'];_0x56b3cf['distribution']=formatResult(_0x260fd0,0x3),_0x56b3cf[_0x112172(0x275)]=formatResult(_0x54710a,0x3),_0x56b3cf['trade']=formatResult(_0x3a75e3,0x8),_0x56b3cf[_0x112172(0x29d)]='',_0x56b3cf['valid']=![];if(_0x56b3cf['coin']!=config[_0x112172(0x222)]){if(_0x56b3cf['distribution']>_0x54710a)_0x56b3cf['side']=_0x112172(0x29a),_0x56b3cf[_0x112172(0x229)]=checkMinimums(_0x56b3cf);else _0x56b3cf[_0x112172(0x251)]<_0x54710a&&(_0x56b3cf['side']=_0x112172(0x1d1),_0x56b3cf['valid']=checkMinimums(_0x56b3cf));}_0x56b3cf[_0x112172(0x18a)]=_0x56b3cf[_0x112172(0x251)]/_0x56b3cf[_0x112172(0x275)]-0x1;if(_0x56b3cf['orderstatus']==_0x112172(0x2bf)||_0x56b3cf[_0x112172(0x2cd)]=='canceled')_0x56b3cf[_0x112172(0x2cd)]=_0x112172(0x2cf);}),currentCoins['sort']((_0x1f00f3,_0x5f36a7)=>_0x1f00f3[_0x520b9c(0x18a)]<_0x5f36a7['delta']?0x1:_0x5f36a7[_0x520b9c(0x18a)]<_0x1f00f3[_0x520b9c(0x18a)]?-0x1:0x0);const _0x4e55b2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4e55b2[_0x520b9c(0x28c)],'usd':_0x4e55b2[_0x520b9c(0x1ac)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0xf42cf0},proxyEmit(_0x520b9c(0x173),{'serverversion':serverversion,'balances':lastBalances});if(_0x9b2d05){if(config[_0x520b9c(0x160)])headlessMode({'portfolio':currentCoins,'threshold':_0xf42cf0});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xf42cf0});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x30f1dc=getNormalizedPerformance();getStartingBalances(_0x30f1dc),emitPerformance(_0x30f1dc);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x35eff9=getNormalizedPerformance();emitPerformance(_0x35eff9),getStartingBalances(_0x35eff9),logger['debug'](_0x520b9c(0x2a8));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x16fb23=_0x447c31;if(!lastBalances)return;let _0x1afe40=[],_0x491676,_0x4dcdca=JSON[_0x16fb23(0x217)](lastBalances[_0x16fb23(0x164)]);_0x4dcdca[_0x16fb23(0x1f1)]((_0x38e021,_0x158a55)=>_0x38e021[_0x16fb23(0x282)]>_0x158a55[_0x16fb23(0x282)]?0x1:_0x158a55[_0x16fb23(0x282)]>_0x38e021[_0x16fb23(0x282)]?-0x1:0x0),_0x4dcdca[_0x16fb23(0x155)](_0x548bd4=>{const _0x5a1c94=_0x16fb23;let _0x4f5689={'coin':_0x548bd4[_0x5a1c94(0x282)],'number':_0x548bd4[_0x5a1c94(0x1b9)],'price':_0x548bd4[_0x5a1c94(0x1b3)]};_0x1afe40[_0x5a1c94(0x227)](_0x4f5689);});const _0x8a141b=await getFiat();_0x491676={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x8a141b[_0x16fb23(0x28c)],'usd':_0x8a141b[_0x16fb23(0x1ac)],'coins':_0x1afe40};let _0x4cfad0=dbPerformance[_0x16fb23(0x1ef)](_0x16fb23(0x2e8))['find']({'date':_0x491676[_0x16fb23(0x17a)]})[_0x16fb23(0x1fb)]();_0x4cfad0?_0x491676[_0x16fb23(0x17a)]!=config[_0x16fb23(0x25e)]&&dbPerformance[_0x16fb23(0x1ef)](_0x16fb23(0x2e8))[_0x16fb23(0x2bd)]({'date':_0x491676['date']})[_0x16fb23(0x1e9)](_0x491676)['write']():dbPerformance[_0x16fb23(0x1ef)]('data')[_0x16fb23(0x227)](_0x491676)[_0x16fb23(0x1d9)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x59bc83=_0x447c31;let _0x35c449=[];if(dbPerformance[_0x59bc83(0x214)](_0x59bc83(0x2e8))[_0x59bc83(0x1fb)]()){let _0x5650b8=dbPerformance[_0x59bc83(0x1ef)](_0x59bc83(0x2e8))['cloneDeep']()[_0x59bc83(0x29b)](_0xd0b1ea=>{if(_0xd0b1ea['coins']['length']==0x0)return![];else return!![];})[_0x59bc83(0x19a)](_0x59bc83(0x17a))[_0x59bc83(0x1fb)](),_0x26ceef=[...config['liquidity']];_0x26ceef[_0x59bc83(0x1f1)]((_0x358330,_0x39d2b4)=>_0x358330[_0x59bc83(0x17a)]>_0x39d2b4[_0x59bc83(0x17a)]?-0x1:_0x39d2b4[_0x59bc83(0x17a)]>_0x358330['date']?0x1:0x0);let _0x2c78d2=0x1,_0x2a1afd=[],_0xa1ff68=0x0;_0x5650b8['slice']()[_0x59bc83(0x268)]()[_0x59bc83(0x155)]((_0x4b5304,_0x38342c)=>{const _0x5cfb5e=_0x59bc83;if(_0x26ceef[_0xa1ff68]){if(_0x5650b8[_0x5650b8['length']-_0x38342c]&&_0x26ceef[_0xa1ff68][_0x5cfb5e(0x17a)]==_0x5650b8[_0x5650b8['length']-_0x38342c][_0x5cfb5e(0x17a)]){if(_0x38342c<_0x5650b8[_0x5cfb5e(0x2e6)]){let _0x39a9ee=0x0,_0x91189e=0x0;_0x5650b8[_0x5650b8['length']-_0x38342c][_0x5cfb5e(0x203)][_0x5cfb5e(0x155)](_0x4a00dd=>{const _0x585cc6=_0x5cfb5e;_0x91189e+=_0x4a00dd[_0x585cc6(0x1b9)]*_0x4a00dd[_0x585cc6(0x224)];}),_0x26ceef[_0xa1ff68][_0x5cfb5e(0x2d1)][_0x5cfb5e(0x155)](_0x302696=>{const _0xca5e0c=_0x5cfb5e;_0x39a9ee+=_0x302696[_0xca5e0c(0x1b9)]*_0x302696[_0xca5e0c(0x224)];}),_0x2c78d2*=_0x39a9ee/(_0x91189e-_0x39a9ee)+0x1;}_0xa1ff68++;}}let _0x5f792e=0x0;_0x4b5304[_0x5cfb5e(0x203)][_0x5cfb5e(0x155)](_0x4fe87b=>{const _0x142ed4=_0x5cfb5e;_0x5f792e+=_0x4fe87b[_0x142ed4(0x1b9)]*_0x4fe87b[_0x142ed4(0x224)];}),_0x2a1afd[_0x5650b8[_0x5cfb5e(0x2e6)]-_0x38342c-0x1]=_0x5f792e*(_0x2c78d2-0x1);});let _0x5528ae=[];_0x26ceef=[...config[_0x59bc83(0x288)]]||[];let _0x43d808=0x0;_0xa1ff68=0x0,_0x5650b8['forEach']((_0x560d97,_0x35af19)=>{const _0x1fb9ff=_0x59bc83;if(_0x26ceef[_0xa1ff68]){const _0x5dd8a5=fns['parse'](_0x26ceef[_0xa1ff68][_0x1fb9ff(0x17a)],_0x1fb9ff(0x254),new Date()),_0x6c5e80=fns[_0x1fb9ff(0x217)](_0x560d97[_0x1fb9ff(0x17a)],_0x1fb9ff(0x254),new Date());if(fns[_0x1fb9ff(0x1fa)](_0x5dd8a5,_0x6c5e80)){let _0xcb95e8=0x0;_0x26ceef[_0xa1ff68][_0x1fb9ff(0x2d1)][_0x1fb9ff(0x155)](_0x50e34b=>{const _0x4fbdb6=_0x1fb9ff;!_0x5528ae[_0x50e34b[_0x4fbdb6(0x282)]]?_0x5528ae[_0x50e34b['coin']]=_0x50e34b[_0x4fbdb6(0x1b9)]:(_0xcb95e8=_0x5528ae[_0x50e34b[_0x4fbdb6(0x282)]],_0x5528ae[_0x50e34b[_0x4fbdb6(0x282)]]+=_0x50e34b['number']);const _0x2ecf53=_0x560d97[_0x4fbdb6(0x203)][_0x4fbdb6(0x2bd)](_0x488b7e=>_0x488b7e['coin']==_0x50e34b[_0x4fbdb6(0x282)]);(!_0x2ecf53||_0x2ecf53[_0x4fbdb6(0x1b9)]==0x0)&&(_0x43d808+=(-_0x50e34b[_0x4fbdb6(0x1b9)]-_0xcb95e8)*_0x50e34b['price']);}),_0xa1ff68++;}}_0x560d97[_0x1fb9ff(0x203)][_0x1fb9ff(0x155)]((_0x2c261b,_0x50fbb0)=>{const _0x3c3a6c=_0x1fb9ff;_0x5528ae[_0x2c261b[_0x3c3a6c(0x282)]]&&(_0x2c261b[_0x3c3a6c(0x1ad)]=_0x5528ae[_0x2c261b[_0x3c3a6c(0x282)]]);}),_0x35c449[_0x1fb9ff(0x227)]({'date':_0x560d97['date'],'eur':_0x560d97[_0x1fb9ff(0x28c)],'usd':_0x560d97['usd'],'offset':_0x2a1afd[_0x35af19],'netoffset':_0x43d808,'coins':_0x560d97[_0x1fb9ff(0x203)]});});}return _0x35c449;}function emitPerformance(_0x3ffd81){const _0x20a98a=_0x447c31;_0x3ffd81[_0x20a98a(0x2e6)]!==0x0?(proxyEmit(_0x20a98a(0x193),_0x3ffd81),lastPerformanceEmitted=getDate()):proxyEmit(_0x20a98a(0x193),[]);}function getPerf(_0x5e7a24,_0x1f9141){const _0x13cc6f=_0x447c31;let _0x12bda3=0x0,_0x394902=0x0,_0x4b23bb=0x0;_0x5e7a24['coins'][_0x13cc6f(0x155)](_0x3d9c8c=>{const _0x2fffb3=_0x13cc6f;_0x12bda3+=_0x3d9c8c['number']*_0x3d9c8c[_0x2fffb3(0x224)];});_0x1f9141&&(_0x12bda3+=_0x5e7a24[_0x13cc6f(0x1cb)]);if(config['basecoin']==='BTC'||config[_0x13cc6f(0x222)]===_0x13cc6f(0x2d3))_0x394902=_0x12bda3*_0x5e7a24[_0x13cc6f(0x28c)],_0x4b23bb=_0x12bda3*_0x5e7a24[_0x13cc6f(0x1ac)];else{if(usdBasecoins[_0x13cc6f(0x18e)](config[_0x13cc6f(0x222)]))_0x394902=_0x12bda3*_0x5e7a24['eur']/_0x5e7a24['usd'],_0x4b23bb=_0x12bda3;else config[_0x13cc6f(0x222)]===_0x13cc6f(0x2b7)&&(_0x394902=_0x12bda3,_0x4b23bb=_0x12bda3*_0x5e7a24[_0x13cc6f(0x1ac)]/_0x5e7a24[_0x13cc6f(0x28c)]);}return[_0x12bda3,_0x394902,_0x4b23bb];}function getKPIs(_0x4f6bfc,_0x36045e=_0x447c31(0x2b7)){const _0x394332=_0x447c31,_0x2ac7dc=config[_0x394332(0x222)],_0xe65779=lastBalances,_0x36ed50=currentCoins,_0x424979=getNormalizedPerformance(),_0x290097=_0x4f6bfc===_0x394332(0x222)?_0x2ac7dc:_0x4f6bfc===_0x394332(0x241)||_0x4f6bfc===_0x394332(0x2b3)?_0x36045e:_0x394332(0x1f4)+_0x2ac7dc,_0x479e89=_0x4f6bfc===_0x394332(0x2a3)?_0x394332(0x265):_0x4f6bfc===_0x394332(0x2b3)?_0x394332(0x265):_0x290097+_0x394332(0x243),_0x1348f3=_0x4f6bfc==='net-basecoin'||_0x4f6bfc===_0x394332(0x2b3)?_0x394332(0x265):_0x290097+_0x394332(0x1c2);let _0x543466=0x0;_0x36ed50[_0x394332(0x155)](_0x2fdf1f=>{const _0x43c69a=_0x394332;_0x543466+=_0x2fdf1f['number']*_0x2fdf1f[_0x43c69a(0x1b3)];});if(_0x4f6bfc===_0x394332(0x241)||_0x4f6bfc===_0x394332(0x2b3)){if(_0x2ac7dc===_0x394332(0x263)||_0x2ac7dc===_0x394332(0x2d3))_0x543466=_0x543466*(_0x36045e===_0x394332(0x2b7)?_0xe65779['eur']:_0xe65779[_0x394332(0x1ac)]);else{if(usdBasecoins['includes'](_0x2ac7dc))_0x543466=_0x543466*(_0x36045e===_0x394332(0x2b7)?_0xe65779[_0x394332(0x28c)]/_0xe65779['usd']:0x1);else _0x2ac7dc==='EUR'&&(_0x543466=_0x543466*(_0x36045e==='EUR'?0x1:_0xe65779[_0x394332(0x1ac)]/_0xe65779[_0x394332(0x28c)]));}}let _0x55851b;if(_0x543466!==0x0){if(_0x4f6bfc===_0x394332(0x222))_0x55851b=(_0x543466/startingBalances['basecoin']-0x1)*0x64;else{if(_0x36045e==='EUR')_0x55851b=(_0x543466/startingBalances[_0x394332(0x28c)]-0x1)*0x64;else _0x55851b=(_0x543466/startingBalances[_0x394332(0x1ac)]-0x1)*0x64;}let _0x29abe6=0x0;if(startingBalances['coins'])_0x36ed50['forEach'](_0x208da1=>{const _0x132458=_0x394332;let _0x21ed0d=startingBalances[_0x132458(0x203)][_0x132458(0x2bd)](_0xd327c9=>_0xd327c9[_0x132458(0x282)]===_0x208da1[_0x132458(0x282)]);if(_0x21ed0d&&_0x21ed0d[_0x132458(0x282)]&&_0x208da1['number']!==0x0)_0x29abe6+=_0x21ed0d[_0x132458(0x1b9)]*_0x208da1[_0x132458(0x1b3)];});let _0x33ac55=0x0;if(_0x424979[_0x394332(0x2e6)]!==0x0){let _0xc22201=_0x424979[_0x424979['length']-0x1];_0x33ac55=_0xc22201[_0x394332(0x1e1)];}_0x29abe6-=_0x33ac55;_0x4f6bfc===_0x394332(0x2a3)&&(_0x55851b=(_0x543466-_0x29abe6)/startingBalances[_0x394332(0x222)]*0x64,_0x543466=_0x543466-_0x29abe6);if(_0x4f6bfc===_0x394332(0x2b3)){let _0x22f51f=_0x36045e==='EUR'?startingBalances[_0x394332(0x28c)]:startingBalances[_0x394332(0x1ac)];if(_0x2ac7dc==='BTC'||_0x2ac7dc==='ETH')_0x29abe6=_0x36045e===_0x394332(0x2b7)?_0x29abe6*_0xe65779['eur']:_0x29abe6*_0xe65779[_0x394332(0x1ac)];else{if(usdBasecoins[_0x394332(0x18e)](_0x2ac7dc))_0x29abe6=_0x36045e===_0x394332(0x2b7)?_0x29abe6*_0xe65779[_0x394332(0x28c)]/_0xe65779[_0x394332(0x1ac)]:_0x29abe6;else _0x2ac7dc==='EUR'&&(_0x29abe6=_0x36045e===_0x394332(0x2b7)?_0x29abe6:_0x29abe6*_0xe65779[_0x394332(0x1ac)]/_0xe65779[_0x394332(0x28c)]);}_0x55851b=(_0x543466-_0x29abe6)/_0x22f51f*0x64,_0x543466=_0x543466-_0x29abe6;}if(_0x55851b){if(_0x55851b<0x64)_0x55851b=_0x55851b[_0x394332(0x283)](0x2);else{if(_0x55851b<0x3e8)_0x55851b=_0x55851b['toFixed'](0x1);else _0x55851b=_0x55851b['toFixed'](0x0);}}else _0x55851b=Number('0')[_0x394332(0x283)](0x2);if(_0x543466){if(Math[_0x394332(0x174)](_0x543466)<0.000001)_0x543466=_0x543466[_0x394332(0x283)](0x2);else{if(Math[_0x394332(0x174)](_0x543466)<0.1)_0x543466=_0x543466[_0x394332(0x283)](0x6);else{if(Math[_0x394332(0x174)](_0x543466)<0x1)_0x543466=_0x543466[_0x394332(0x283)](0x5);else{if(Math[_0x394332(0x174)](_0x543466)<0xa)_0x543466=_0x543466[_0x394332(0x283)](0x4);else{if(Math[_0x394332(0x174)](_0x543466)<0x64)_0x543466=_0x543466[_0x394332(0x283)](0x3);else{if(Math[_0x394332(0x174)](_0x543466)<0x3e8)_0x543466=_0x543466[_0x394332(0x283)](0x2);else _0x543466=_0x543466[_0x394332(0x283)](0x2);}}}}}}else _0x543466=Number('0')['toFixed'](0x2);}else _0x55851b=Number('0')[_0x394332(0x283)](0x2);return{'value':_0x543466,'change':_0x55851b,'leftTxt':_0x479e89,'rightTxt':_0x1348f3};}async function getStartingBalances(_0x2d4c63,_0x2f9c4a=!![]){const _0x4fc638=_0x447c31;if(_0x2d4c63[_0x4fc638(0x2e6)]!==0x0){const [_0x33e053,_0x30a2ef,_0x3dc630]=getPerf(_0x2d4c63[0x0],!![]);let _0x576641=[];config[_0x4fc638(0x164)][_0x4fc638(0x155)](_0x4b7630=>{const _0x4eebe7=_0x4fc638;let _0x42d643=0x0,_0x2294a8;config[_0x4eebe7(0x288)][_0x4eebe7(0x155)](_0x4e5533=>{const _0x2a5d3b=_0x4eebe7;let _0x16c797=_0x4e5533[_0x2a5d3b(0x2d1)]['find'](_0x2af883=>_0x2af883[_0x2a5d3b(0x282)]==_0x4b7630[_0x2a5d3b(0x282)]);if(_0x16c797){_0x42d643+=_0x16c797[_0x2a5d3b(0x1b9)];if(!_0x2294a8)_0x2294a8=_0x16c797[_0x2a5d3b(0x224)];}}),_0x576641[_0x4eebe7(0x227)]({'coin':_0x4b7630[_0x4eebe7(0x282)],'number':_0x42d643,'initialprice':_0x2294a8});});const _0x5c07b3={'basecoin':_0x33e053,'eur':_0x30a2ef,'usd':_0x3dc630,'coins':_0x576641};if(_0x2f9c4a)proxyEmit(_0x4fc638(0x1c7),_0x5c07b3);startingBalances=_0x5c07b3;}}function headlessMode(_0x1e1797){const _0x1ae04e=_0x447c31;let _0x4c2e65=_0x1e1797['portfolio'],_0x19feab=_0x1e1797[_0x1ae04e(0x2ac)],_0xb4281d=[];for(let _0x4a2798 of _0x4c2e65){if(_0x4a2798['coin']!=config[_0x1ae04e(0x222)]){if(_0x4a2798[_0x1ae04e(0x18a)]>=_0x19feab/0x64){if(_0x4a2798[_0x1ae04e(0x229)])_0xb4281d[_0x1ae04e(0x227)](_0x4a2798);}else{if(_0x4a2798[_0x1ae04e(0x18a)]<=-_0x19feab/0x64){if(_0x4a2798['valid'])_0xb4281d[_0x1ae04e(0x227)](_0x4a2798);}}}}_0xb4281d['length']>0x0&&(lockOrders==ORDERS[_0x1ae04e(0x2ae)]&&!coolingDown&&_0xb4281d[_0x1ae04e(0x155)](_0x43d84a=>{const _0x487f42=_0x1ae04e;logger['debug']('Trigger:\x20'+_0x43d84a[_0x487f42(0x282)]+'\x20'+_0x43d84a[_0x487f42(0x1b9)]+'\x20'+_0x43d84a[_0x487f42(0x1b3)]+'\x20'+_0x43d84a[_0x487f42(0x251)]+'%\x20'+_0x43d84a[_0x487f42(0x275)]+'%\x20'+(0x64*_0x43d84a[_0x487f42(0x18a)])[_0x487f42(0x283)](0x2)+'%\x20('+_0x19feab['toFixed'](0x2)+'%)');}),placeOrder(_0xb4281d));}function notifyBalance(_0x48f915){const _0x3ecbb8=_0x447c31;let _0x36fce3=_0x48f915[_0x3ecbb8(0x164)],_0x2bebe1=_0x48f915[_0x3ecbb8(0x2ac)],_0x1c1ecf=[];for(let _0x343a64 of _0x36fce3){if(_0x343a64['coin']!=config[_0x3ecbb8(0x222)]){if(_0x343a64[_0x3ecbb8(0x18a)]>=_0x2bebe1/0x64){if(_0x343a64[_0x3ecbb8(0x229)])_0x1c1ecf[_0x3ecbb8(0x227)](_0x343a64);}else{if(_0x343a64['delta']<=-_0x2bebe1/0x64){if(_0x343a64[_0x3ecbb8(0x229)])_0x1c1ecf[_0x3ecbb8(0x227)](_0x343a64);}}}}if(_0x1c1ecf['length']>0x0){let _0x122958=_0x1c1ecf[_0x3ecbb8(0x176)](_0x447cd2=>_0x447cd2[_0x3ecbb8(0x282)]);_0x122958[_0x3ecbb8(0x1f1)]();let _0x1f54ed=_0x122958['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x3ecbb8(0x22e),_0x3ecbb8(0x23f));lastCoinsToBalance=_0x1f54ed;}}function symbolToCoin(_0x12d640){const _0x30fe77=_0x447c31;let _0x28f1f2;if(_0x12d640[_0x30fe77(0x18e)]('/'+config[_0x30fe77(0x222)]))_0x28f1f2=_0x12d640[_0x30fe77(0x2b6)]('/'+config[_0x30fe77(0x222)],'');if(_0x12d640[_0x30fe77(0x18e)](config[_0x30fe77(0x222)]+'/'))_0x28f1f2=_0x12d640[_0x30fe77(0x2b6)](config[_0x30fe77(0x222)]+'/','');return _0x28f1f2;}async function unlockOrders(){const _0x22020c=_0x447c31;if(allOrdersPlaced&&lockOrders==ORDERS[_0x22020c(0x158)]){logger[_0x22020c(0x25a)](_0x22020c(0x2c9)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x53505e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x53505e,validateOrdersState=_0x22020c(0x1ad),persistOpenOrders([]),lockOrders=ORDERS[_0x22020c(0x2ae)],logger[_0x22020c(0x25a)](_0x22020c(0x232));}}async function validateOrders(_0x512c7b){const _0x586f11=_0x447c31;if(_0x512c7b)validateOrdersState=_0x512c7b;logger['debug'](_0x586f11(0x2e0)+validateOrdersState+_0x586f11(0x1d7)+(lockOrders==0x1?_0x586f11(0x1e7):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x582d9e=[],_0x164f64=config[_0x586f11(0x2c1)]==_0x586f11(0x260)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x586f11(0x285)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x586f11(0x158)])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x586f11(0x155)](_0x5846c4=>{const _0x34813e=_0x586f11;let _0xcf4f6d=![];_0x5846c4[_0x34813e(0x2bf)]>0x0&&(_0xcf4f6d=!![]),_0x582d9e[_0x34813e(0x227)](_0xcf4f6d),_0xcf4f6d&&config['ordertype']!='market'&&logHistory(_0x34813e(0x1b8),_0x34813e(0x2bc)+_0x5846c4[_0x34813e(0x1a1)]+'\x20'+_0x5846c4[_0x34813e(0x29d)]+'\x20#'+formatResult(_0x5846c4[_0x34813e(0x2bf)],0x8)+'\x20@'+formatResult(_0x5846c4['price'],0x8));}),_0x582d9e[_0x586f11(0x155)]((_0x3b48e4,_0x2dca39)=>{const _0x64a952=_0x586f11;if(_0x3b48e4)lastOrders[_0x64a952(0x18f)](_0x2dca39,0x1);}),persistOpenOrders(lastOrders);const _0x319ba4=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x586f11(0x1c1);if(validateOrdersState==_0x586f11(0x1ad)){validateOrdersState=_0x586f11(0x233);if(_0x582d9e['includes'](![])){if(config[_0x586f11(0x2c1)]==_0x586f11(0x260)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x586f11(0x233)){if(_0x582d9e[_0x586f11(0x18e)](![])){}else{if(allOrdersPlaced){if(config[_0x586f11(0x2c1)]==_0x586f11(0x260)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x582d9e[_0x586f11(0x18e)](![])&&(config[_0x586f11(0x2c1)]==_0x586f11(0x260)?logHistory(_0x586f11(0x2a6),_0x586f11(0x1b0)+Math[_0x586f11(0x1e8)](_0x164f64*validateOrderInterval/0xea60)+_0x586f11(0x2b1)+_0x319ba4):(await cancelOrders(),logHistory('success',_0x586f11(0x2e3)+Math[_0x586f11(0x1e8)](_0x164f64*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x319ba4))),await unlockOrders();else{if(validateOrdersState==_0x586f11(0x2c4)){if(config[_0x586f11(0x2c1)]!=_0x586f11(0x260))logHistory(_0x586f11(0x2a6),_0x586f11(0x21c)+_0x319ba4);await unlockOrders();}}}}}async function cancelOrders(){const _0x4f5719=_0x447c31;lastOrders[_0x4f5719(0x155)](async _0x2c006c=>{const _0x5425aa=_0x4f5719;try{const _0xfe85d9=await exchange[_0x5425aa(0x194)](_0x2c006c[_0x5425aa(0x1a8)],_0x2c006c[_0x5425aa(0x1a1)]);}catch(_0x9a75df){if(_0x9a75df['toString']()['includes'](_0x5425aa(0x2a4))){}else await handleError(_0x9a75df,'cancelOrders()');}});}async function initCoinResults(_0x59d7da){const _0x132d1c=_0x447c31;_0x59d7da?logger[_0x132d1c(0x25a)](_0x132d1c(0x17b)+_0x59d7da):logger['debug'](_0x132d1c(0x153)),config[_0x132d1c(0x164)]['forEach'](_0x5065d3=>{const _0x2ea6e5=_0x132d1c;if(!_0x5065d3['excluded']&&_0x5065d3['coin']!=config[_0x2ea6e5(0x222)]){const _0x38e51c=currentCoins[_0x2ea6e5(0x2bd)](_0x223e6d=>_0x223e6d[_0x2ea6e5(0x282)]==_0x5065d3[_0x2ea6e5(0x282)]),_0x264b20=global['ticker'][noslash(_0x5065d3['symbol'])];let _0x4c9ce2=_0x38e51c?_0x38e51c[_0x2ea6e5(0x1b9)]:null,_0x3a1156=_0x5065d3['reverse']?0x1/_0x264b20:_0x264b20,_0x4caff5;config[_0x2ea6e5(0x288)][_0x2ea6e5(0x155)](_0x46a286=>{const _0x31a924=_0x2ea6e5;!_0x4caff5&&(_0x4caff5=_0x46a286[_0x31a924(0x2d1)]['find'](_0x2ea04c=>_0x2ea04c[_0x31a924(0x282)]==_0x5065d3[_0x31a924(0x282)]),_0x4caff5&&(_0x4c9ce2=_0x4caff5[_0x31a924(0x1b9)],_0x3a1156=_0x4caff5[_0x31a924(0x224)]));});let _0x4c3501=dbCoinResults[_0x2ea6e5(0x1ef)](_0x2ea6e5(0x203))[_0x2ea6e5(0x2bd)]({'coin':_0x5065d3['coin']})['value']();if(!_0x4c3501){const _0x1de53e={'coin':_0x5065d3[_0x2ea6e5(0x282)],'number':_0x4c9ce2,'breakeven':_0x3a1156,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2ea6e5(0x1ef)](_0x2ea6e5(0x203))[_0x2ea6e5(0x227)](_0x1de53e)[_0x2ea6e5(0x1d9)]();}else{if(_0x59d7da&&_0x5065d3[_0x2ea6e5(0x282)]==_0x59d7da){const _0x32fbb0={'coin':_0x5065d3['coin'],'number':_0x4c9ce2,'breakeven':_0x3a1156,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x2ea6e5(0x203))['find']({'coin':_0x5065d3[_0x2ea6e5(0x282)]})[_0x2ea6e5(0x1e9)](_0x32fbb0)[_0x2ea6e5(0x1d9)]();}}}});}async function updateCoinResults(_0x322e78,_0x4b9383=![]){const _0x36f60f=_0x447c31;let _0x49fae6,_0x61085,_0x5b077a,_0x404677,_0x19c409,_0x8b14e1,_0x4cf34c=dbCoinResults[_0x36f60f(0x1ef)](_0x36f60f(0x203))['find']({'coin':_0x322e78[_0x36f60f(0x282)]})[_0x36f60f(0x1fb)](),_0x3dc320=![];_0x4cf34c&&Object[_0x36f60f(0x218)](_0x4cf34c)['forEach'](([_0x2d7138,_0x5d58d0])=>{if(_0x5d58d0==null)_0x3dc320=!![];});(!_0x4cf34c||_0x3dc320)&&(await initCoinResults(_0x322e78['coin']),_0x4cf34c=dbCoinResults[_0x36f60f(0x1ef)](_0x36f60f(0x203))[_0x36f60f(0x2bd)]({'coin':_0x322e78[_0x36f60f(0x282)]})[_0x36f60f(0x1fb)]());_0x322e78[_0x36f60f(0x268)]&&(_0x8b14e1={'filled':_0x322e78[_0x36f60f(0x2bf)]*_0x322e78[_0x36f60f(0x224)],'amount':_0x322e78['filled']*_0x322e78[_0x36f60f(0x224)],'side':_0x322e78[_0x36f60f(0x29d)]=='sell'?_0x36f60f(0x1d1):_0x36f60f(0x29a),'price':0x1/_0x322e78['price']},_0x322e78={..._0x322e78,..._0x8b14e1});_0x4b9383?_0x61085=_0x322e78[_0x36f60f(0x29d)]=='buy'?_0x4cf34c['number']+_0x322e78['filled']:_0x4cf34c['number']-_0x322e78['filled']:_0x61085=await getCoinNumber(_0x322e78[_0x36f60f(0x282)]);if(_0x322e78[_0x36f60f(0x221)]&&_0x322e78[_0x36f60f(0x221)][_0x36f60f(0x238)]==config[_0x36f60f(0x222)])_0x49fae6=_0x322e78[_0x36f60f(0x221)][_0x36f60f(0x2d0)];else{if(_0x322e78[_0x36f60f(0x221)]&&_0x322e78[_0x36f60f(0x221)][_0x36f60f(0x238)]==_0x36f60f(0x26b)&&!_0x4b9383)_0x49fae6=_0x322e78['fee'][_0x36f60f(0x2d0)]*global[_0x36f60f(0x19d)][_0x36f60f(0x26b)+config[_0x36f60f(0x222)]];else _0x49fae6=defaultFee*_0x322e78[_0x36f60f(0x2bf)]*_0x322e78[_0x36f60f(0x224)];}_0x322e78[_0x36f60f(0x29d)]==_0x36f60f(0x1d1)?(_0x5b077a=_0x61085!=0x0?(_0x4cf34c[_0x36f60f(0x15a)]*_0x4cf34c[_0x36f60f(0x1b9)]+_0x322e78[_0x36f60f(0x224)]*(_0x61085-_0x4cf34c[_0x36f60f(0x1b9)])+_0x49fae6)/_0x61085:0x0,_0x404677=_0x4cf34c[_0x36f60f(0x2b5)]):(_0x5b077a=_0x61085!=0x0?(_0x4cf34c[_0x36f60f(0x15a)]*_0x4cf34c['number']-_0x322e78[_0x36f60f(0x224)]*(_0x4cf34c[_0x36f60f(0x1b9)]-_0x61085)+_0x49fae6)/_0x61085:0x0,_0x404677=_0x4cf34c[_0x36f60f(0x2b5)]+(_0x322e78[_0x36f60f(0x224)]-_0x4cf34c[_0x36f60f(0x15a)])*_0x322e78[_0x36f60f(0x2bf)]);_0x19c409=(_0x322e78['price']-_0x5b077a-_0x49fae6/_0x322e78[_0x36f60f(0x2bf)])*_0x61085;let _0x36469c={'coin':_0x322e78[_0x36f60f(0x282)],'number':_0x61085,'breakeven':formatResult(_0x5b077a,0x8),'realized':formatResult(_0x404677,0x8),'unrealized':formatResult(_0x19c409,0x8),'fees':formatResult(_0x4cf34c['fees']+_0x49fae6,0x8),'sells':_0x322e78[_0x36f60f(0x29d)]==_0x36f60f(0x29a)?_0x4cf34c[_0x36f60f(0x16f)]+0x1:_0x4cf34c['sells'],'buys':_0x322e78[_0x36f60f(0x29d)]==_0x36f60f(0x1d1)?_0x4cf34c[_0x36f60f(0x289)]+0x1:_0x4cf34c[_0x36f60f(0x289)]};dbCoinResults[_0x36f60f(0x1ef)](_0x36f60f(0x203))['find']({'coin':_0x322e78[_0x36f60f(0x282)]})['assign'](_0x36469c)[_0x36f60f(0x1d9)]();if(!_0x4b9383){if(_0x322e78['fee']&&_0x322e78[_0x36f60f(0x221)][_0x36f60f(0x238)]==_0x36f60f(0x26b)){const _0x360b47=currentCoins['find'](_0xf5e2d4=>_0xf5e2d4[_0x36f60f(0x282)]==_0x36f60f(0x26b));if(_0x360b47){let _0x38293c=dbCoinResults[_0x36f60f(0x1ef)](_0x36f60f(0x203))['find']({'coin':'BNB'})[_0x36f60f(0x1fb)]();_0x36469c={..._0x38293c,'number':_0x360b47['number']},dbCoinResults[_0x36f60f(0x1ef)](_0x36f60f(0x203))['find']({'coin':_0x36f60f(0x26b)})[_0x36f60f(0x1e9)](_0x36469c)[_0x36f60f(0x1d9)]();}}}}async function placeOrder(_0x4cc74f){const _0x8780c0=_0x447c31,_0x4db180=config[_0x8780c0(0x2c1)]==_0x8780c0(0x260)?'market':_0x8780c0(0x228);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x8780c0(0x158)],allOrdersPlaced=![],validateOrdersState='initial';let _0x164b86=![];lastOrders=[];for(const _0x2787af of _0x4cc74f){let _0x298efc,_0x335ddc,_0x1d6f9f,_0x5cc7a9,_0x158c89,_0x2cb46a=_0x2787af[_0x8780c0(0x1a1)];try{const _0x58b83d=await exchange['fetchTicker'](_0x2cb46a);_0x298efc=_0x2787af[_0x8780c0(0x268)]?0x1/_0x2787af[_0x8780c0(0x1b3)]:_0x2787af[_0x8780c0(0x1b3)],_0x335ddc=_0x58b83d['bid'],_0x1d6f9f=_0x58b83d[_0x8780c0(0x1c9)];_0x2787af[_0x8780c0(0x268)]?(_0x5cc7a9=_0x2787af['side']=='buy'?_0x8780c0(0x29a):_0x8780c0(0x1d1),_0x158c89=Math['abs'](_0x2787af[_0x8780c0(0x2ab)])/_0x298efc):(_0x5cc7a9=_0x2787af[_0x8780c0(0x29d)],_0x158c89=Math[_0x8780c0(0x174)](_0x2787af[_0x8780c0(0x2ab)]));_0x4db180==_0x8780c0(0x228)&&(config[_0x8780c0(0x2c1)]==_0x8780c0(0x2ce)&&(_0x298efc=_0x5cc7a9==_0x8780c0(0x1d1)?_0x335ddc:_0x1d6f9f),config[_0x8780c0(0x2c1)]==_0x8780c0(0x181)&&(_0x298efc=_0x5cc7a9==_0x8780c0(0x1d1)?_0x1d6f9f:_0x335ddc));_0x158c89=formatResult(_0x158c89,0x8),_0x298efc=formatResult(_0x298efc,0x8);const _0xfae343=_0x5cc7a9==_0x8780c0(0x29a)?config[_0x8780c0(0x1ee)]?String['fromCodePoint']('0x'+config[_0x8780c0(0x1ee)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x8780c0(0x1cc)])+'\x20':'',_0x475d68=_0x4db180==_0x8780c0(0x260)?'Market':config['ordertype']==_0x8780c0(0x2ce)?_0x8780c0(0x25b):_0x8780c0(0x15d),_0x2ff813=(Math['floor'](Math[_0x8780c0(0x1af)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x8780c0(0x227)]({'customId':_0x2ff813,'symbol':_0x2cb46a,'coin':_0x2787af[_0x8780c0(0x282)],'amount':_0x158c89,'price':_0x298efc,'side':_0x5cc7a9,'reverse':_0x2787af['reverse'],'filled':0x0});if(_0x4db180==_0x8780c0(0x260))logHistory('order',''+_0xfae343+_0x475d68+'\x20order:\x20'+_0x2cb46a+'\x20'+_0x5cc7a9+'\x20#'+formatResult(_0x158c89,0x8)+'\x20@'+formatResult(_0x298efc,0x8));else logHistory(_0x8780c0(0x1b8),''+_0xfae343+_0x475d68+_0x8780c0(0x1bb)+_0x2cb46a+'\x20'+_0x5cc7a9+'\x20#'+formatResult(_0x158c89,0x8)+'\x20@'+formatResult(_0x298efc,0x8));let _0x4aebcb;_0x4db180=='market'?_0x5cc7a9==_0x8780c0(0x1d1)&&['Bybit',_0x8780c0(0x1f3),_0x8780c0(0x29c),'Huobi',_0x8780c0(0x165)][_0x8780c0(0x18e)](config['exchange'])?_0x4aebcb=await exchange[_0x8780c0(0x279)](_0x2cb46a,_0x4db180,_0x5cc7a9,_0x158c89,_0x298efc):_0x4aebcb=await exchange[_0x8780c0(0x279)](_0x2cb46a,_0x4db180,_0x5cc7a9,_0x158c89,undefined):_0x4aebcb=await exchange[_0x8780c0(0x279)](_0x2cb46a,_0x4db180,_0x5cc7a9,_0x158c89,_0x298efc);logger[_0x8780c0(0x25a)]('ID:\x20'+_0x4aebcb['id']+_0x8780c0(0x1ce)+_0x2ff813);const _0x4b5af9=lastOrders[_0x8780c0(0x2e6)]-0x1;if(_0x4b5af9>=0x0&&lastOrders[_0x4b5af9][_0x8780c0(0x25d)]==_0x2ff813){lastOrders[_0x4b5af9][_0x8780c0(0x1a8)]=_0x4aebcb['id'];if(_0x4aebcb[_0x8780c0(0x1ae)])lastOrders[_0x4b5af9][_0x8780c0(0x1ae)]=_0x4aebcb[_0x8780c0(0x1ae)];if(_0x4aebcb['price'])lastOrders[_0x4b5af9][_0x8780c0(0x224)]=_0x4aebcb[_0x8780c0(0x224)];lastOrders[_0x4b5af9][_0x8780c0(0x221)]=_0x4aebcb[_0x8780c0(0x221)];}if(config[_0x8780c0(0x1ed)]!=0x0){let _0x5c6a44=null;if(cooldownTracker[_0x8780c0(0x2e6)]==config[_0x8780c0(0x1ed)]-0x1)_0x5c6a44=cooldownTracker['shift']();const _0x336f9b=getTimeStamp();cooldownTracker[_0x8780c0(0x227)](_0x336f9b);if(_0x5c6a44){const _0x363135=fns['differenceInSeconds'](new Date(_0x336f9b),new Date(_0x5c6a44));if(_0x363135<cooldownInterval){logHistory(_0x8780c0(0x16e),_0x8780c0(0x1e4)+config[_0x8780c0(0x1ed)]+_0x8780c0(0x206)+cooldownInterval/0x3c+_0x8780c0(0x1ca)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x4ddeab){if(_0x4ddeab[_0x8780c0(0x2c5)]()[_0x8780c0(0x18e)](_0x8780c0(0x1f5)))lastOrders=lastOrders[_0x8780c0(0x29b)](_0x2553bc=>_0x2553bc[_0x8780c0(0x1a1)]!=_0x2cb46a),logHistory(_0x8780c0(0x16e),_0x8780c0(0x1b5)+_0x2cb46a),_0x164b86=!![];else{if(_0x4ddeab[_0x8780c0(0x2c5)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x8780c0(0x29b)](_0xbca561=>_0xbca561[_0x8780c0(0x1a1)]!=_0x2cb46a),logHistory(_0x8780c0(0x16e),_0x8780c0(0x294)+_0x2cb46a),_0x164b86=!![];else{if(_0x4ddeab[_0x8780c0(0x2c5)]()[_0x8780c0(0x18e)](_0x8780c0(0x296)))lastOrders=lastOrders[_0x8780c0(0x29b)](_0x2c46fd=>_0x2c46fd[_0x8780c0(0x1a1)]!=_0x2cb46a),logHistory(_0x8780c0(0x16e),_0x8780c0(0x25f)+_0x2cb46a),logger['debug'](_0x4ddeab),_0x164b86=!![];else _0x4ddeab['toString']()[_0x8780c0(0x18e)](_0x8780c0(0x230))?(lastOrders=lastOrders[_0x8780c0(0x29b)](_0x203dc3=>_0x203dc3[_0x8780c0(0x1a1)]!=_0x2cb46a),logHistory(_0x8780c0(0x16e),_0x8780c0(0x1b5)+_0x2cb46a),_0x164b86=!![]):(lastOrders=lastOrders[_0x8780c0(0x29b)](_0x318b10=>_0x318b10[_0x8780c0(0x1a1)]!=_0x2cb46a),await handleError(_0x4ddeab,_0x8780c0(0x256),_0x2cb46a));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x8780c0(0x2e6)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5a16ea=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3daf22=_0x8780c0;validateOrders(_0x3daf22(0x2d2));},_0x5a16ea);}else unlockOrders();_0x164b86&&config['headless']&&(logHistory(_0x8780c0(0x16e),_0x8780c0(0x2d6)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x8780c0(0x2a6),_0x8780c0(0x1fd)));}else{if(coolingDown)!config['headless']&&logHistory(_0x8780c0(0x16e),_0x8780c0(0x1e0));else lockOrders!=ORDERS[_0x8780c0(0x2ae)]&&(!config[_0x8780c0(0x160)]&&(config['ordertype']=='market'?logHistory(_0x8780c0(0x16e),_0x8780c0(0x2d7)):logHistory(_0x8780c0(0x16e),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x1a7cb3){const _0x54627b=_0x447c31,_0x1283a3={...config,'openOrders':_0x1a7cb3};let _0x454c4b=dbConfig[_0x54627b(0x1ef)](_0x54627b(0x2e7))['find']({'botID':botID})[_0x54627b(0x1fb)]();_0x454c4b&&dbConfig[_0x54627b(0x1ef)](_0x54627b(0x2e7))[_0x54627b(0x2bd)]({'botID':botID})['assign'](_0x1283a3)['write']();}function restoreOrders(){const _0x1444f4=_0x447c31;let _0x26ddc6;config[_0x1444f4(0x21d)]&&allOpenOrders['forEach'](_0x14f7bb=>{const _0x41d4c2=_0x1444f4,_0x4e5752=config[_0x41d4c2(0x21d)][_0x41d4c2(0x2bd)](_0x1a045e=>_0x1a045e[_0x41d4c2(0x1a8)]==_0x14f7bb['id']);_0x4e5752&&(lastOrders[_0x41d4c2(0x227)](_0x4e5752),_0x26ddc6=_0x14f7bb[_0x41d4c2(0x2cb)]);});if(lastOrders[_0x1444f4(0x2e6)]>0x0){lockOrders=ORDERS[_0x1444f4(0x158)],validateOrdersState=_0x1444f4(0x233),allOrdersPlaced=!![];const _0x533b2b=new Date()['getTime'](),_0x39e93c=config[_0x1444f4(0x2c1)]==_0x1444f4(0x260)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x26ddc6+_0x39e93c>_0x533b2b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4bda78=_0x1444f4;validateOrders(_0x4bda78(0x2d2));},_0x26ddc6+_0x39e93c-_0x533b2b);}else validateOrders(_0x1444f4(0x2d2));}}async function sendMetricsTelegram(){const _0x55f8ea=_0x447c31;if(!coinsLoaded){process[_0x55f8ea(0x2b4)]({'telegrammsg':_0x55f8ea(0x287)},_0x4f39ec=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4fa7a0='';if(config[_0x55f8ea(0x1b7)])_0x4fa7a0=_0x55f8ea(0x15c)+config[_0x55f8ea(0x23b)]+_0x55f8ea(0x2da);else _0x4fa7a0='<b>Bot\x20'+botID+_0x55f8ea(0x2da);const _0x9b32e=getKPIs(_0x55f8ea(0x222)),_0x4f2dbf=getKPIs(_0x55f8ea(0x241),config['fiat']),_0x5d7451=getKPIs(_0x55f8ea(0x2a3)),_0x4bbb63=getKPIs(_0x55f8ea(0x2b3),config[_0x55f8ea(0x241)]);_0x4fa7a0+=_0x55f8ea(0x2c0),_0x4fa7a0+=_0x9b32e[_0x55f8ea(0x1db)]+_0x55f8ea(0x1b6)+_0x9b32e[_0x55f8ea(0x1fb)]+'\x0a',_0x4fa7a0+=_0x9b32e[_0x55f8ea(0x1e2)]+':\x20'+_0x9b32e[_0x55f8ea(0x20e)]+'%\x0a',_0x4fa7a0+=_0x4f2dbf[_0x55f8ea(0x1db)]+_0x55f8ea(0x1b6)+_0x4f2dbf[_0x55f8ea(0x1fb)]+'\x0a',_0x4fa7a0+=_0x4f2dbf[_0x55f8ea(0x1e2)]+':\x20'+_0x4f2dbf['change']+'%\x0a',_0x4fa7a0+=_0x5d7451[_0x55f8ea(0x1db)]+':\x20'+_0x5d7451[_0x55f8ea(0x1fb)]+'\x20('+config[_0x55f8ea(0x222)]+')\x0a',_0x4fa7a0+=_0x5d7451[_0x55f8ea(0x1e2)]+':\x20'+_0x5d7451['change']+_0x55f8ea(0x27b)+config[_0x55f8ea(0x222)]+')\x0a',_0x4fa7a0+=_0x4bbb63[_0x55f8ea(0x1db)]+':\x20'+_0x4bbb63['value']+'\x20('+config[_0x55f8ea(0x241)]+')\x0a',_0x4fa7a0+=_0x4bbb63['rightTxt']+':\x20'+_0x4bbb63['change']+'%\x20('+config[_0x55f8ea(0x241)]+')\x0a',_0x4fa7a0+=_0x55f8ea(0x267),process['send']({'telegrammsg':_0x4fa7a0},_0x170a02=>{});}async function sendPortfolioTelegram(){const _0x1e14d9=_0x447c31;if(!coinsLoaded){process['send']({'telegrammsg':_0x1e14d9(0x287)},_0x3d74de=>{});return;}let _0x43d835='';if(config[_0x1e14d9(0x1b7)])_0x43d835='<b>'+config[_0x1e14d9(0x23b)]+_0x1e14d9(0x1bf);else _0x43d835=_0x1e14d9(0x1aa)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x43d835+=_0x1e14d9(0x2c0),_0x43d835+=_0x1e14d9(0x27f),_0x43d835+=_0x1e14d9(0x17c),_0x43d835+=_0x1e14d9(0x27f),currentCoins['forEach'](_0x2a8205=>{const _0x147f02=_0x1e14d9;_0x43d835+=_0x2a8205[_0x147f02(0x282)][_0x147f02(0x1f6)](0x7)+'|\x20'+formatPad(_0x2a8205[_0x147f02(0x251)],0x2,0x6)+'|\x20'+formatPad(_0x2a8205[_0x147f02(0x275)],0x2,0x6)+'|\x20'+formatPad(_0x2a8205[_0x147f02(0x18a)]*0x64,0x2,0x6)+'\x0a';}),_0x43d835+='</pre>',process[_0x1e14d9(0x2b4)]({'telegrammsg':_0x43d835},_0x22a733=>{});}function formatPad(_0x3ab583,_0x51a526,_0x2197c5){const _0x145d72=_0x447c31,_0x371535=formatResultString(_0x3ab583,_0x51a526);return _0x371535?_0x371535[_0x145d72(0x1a7)](_0x2197c5):''[_0x145d72(0x1a7)](_0x2197c5);}function logHistory(_0x4ca40f,_0x2368e2,_0x489652=''){const _0x3e8a85=_0x447c31;logger['full'](''+_0x2368e2);let _0x3a1950={'time':getTimeStamp(),'type':_0x4ca40f,'event':_0x2368e2};dbLogs['get']('logs')[_0x3e8a85(0x227)](_0x3a1950)['write']();if(_0x489652=='')_0x489652=_0x2368e2;proxyEmit(_0x3e8a85(0x2b2),{'log':_0x3a1950,'summary':_0x489652}),process['send']({'telegram':{..._0x3a1950,'botname':config[_0x3e8a85(0x23b)],'showname':config['showname']}},_0x484e51=>{});}function emitHistory(_0x135834={}){const _0x512d50=_0x447c31;Object['keys'](_0x135834)[_0x512d50(0x2e6)]==0x0&&(_0x135834={'type':[_0x512d50(0x1b8),_0x512d50(0x2b2)],'event':'','page':0x1});if(_0x135834[_0x512d50(0x297)][_0x512d50(0x18e)]('event'))_0x135834[_0x512d50(0x297)]['splice'](_0x135834['type'][_0x512d50(0x299)](_0x512d50(0x2b2)),0x1,_0x512d50(0x16e),_0x512d50(0x22e),_0x512d50(0x2a6));if(dbLogs[_0x512d50(0x214)](_0x512d50(0x248))[_0x512d50(0x1fb)]()){let _0x1db803=dbLogs[_0x512d50(0x1ef)](_0x512d50(0x248))['filter'](_0x1beed6=>{const _0x26a34d=_0x512d50;if(_0x135834[_0x26a34d(0x297)][_0x26a34d(0x2e6)]==0x0)return![];else return _0x135834[_0x26a34d(0x297)][_0x26a34d(0x18e)](_0x1beed6[_0x26a34d(0x297)]);})['filter'](_0x23b743=>{const _0x1a5710=_0x512d50;if(_0x135834[_0x1a5710(0x2b2)]=='')return!![];else return _0x23b743[_0x1a5710(0x2b2)][_0x1a5710(0x1a5)]()[_0x1a5710(0x18e)](_0x135834['event'][_0x1a5710(0x1a5)]());})[_0x512d50(0x19a)](_0x512d50(0x1c8)),_0x1caf6b=_0x1db803[_0x512d50(0x1fb)]()[_0x512d50(0x2e6)];_0x1db803=_0x1db803[_0x512d50(0x268)]()['slice']((_0x135834[_0x512d50(0x15f)]-0x1)*logPageSize,_0x135834[_0x512d50(0x15f)]*logPageSize-0x1)[_0x512d50(0x268)]()[_0x512d50(0x1fb)](),proxyEmit(_0x512d50(0x27c),{'logs':_0x1db803,'total':_0x1caf6b});}else proxyEmit(_0x512d50(0x27c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2a5897){const _0x2abc17=_0x447c31;if(dbLogs[_0x2abc17(0x214)]('logs')[_0x2abc17(0x1fb)]()){const _0x1cbc93=dbLogs[_0x2abc17(0x1ef)](_0x2abc17(0x248))[_0x2abc17(0x19a)](_0x2abc17(0x1c8))[_0x2abc17(0x29b)](_0x37a7c4=>{const _0x16f6bb=_0x2abc17;return _0x37a7c4[_0x16f6bb(0x297)]==_0x16f6bb(0x1b8);})[_0x2abc17(0x1fb)]();dbLogs[_0x2abc17(0x1ef)](_0x2abc17(0x248))[_0x2abc17(0x207)]()[_0x2abc17(0x1d9)](),dbLogs[_0x2abc17(0x1ef)](_0x2abc17(0x248))[_0x2abc17(0x1e9)](_0x1cbc93)[_0x2abc17(0x1d9)](),emitHistory(_0x2a5897);}}async function pauseBot(_0x1b6769=pauseBotInterval){const _0x25656c=_0x447c31,_0x21f39d=new Date()[_0x25656c(0x269)]();if(!lastErrorShown||_0x21f39d-lastErrorShown>=_0x1b6769){lastErrorShown=_0x21f39d;!lastBotPause?(lastBotPause=_0x21f39d,consecutivePauses=0x1):(_0x21f39d-lastBotPause-_0x1b6769<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x25656c(0x2b4)]({'stop':_0x25656c(0x231)},_0x138b29=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x25656c(0x269)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x1b6769),botPaused=![],reset(!![]);}}}async function killBot(){const _0x185b84=_0x447c31;botPaused=!![],await sleep(0x3e8),process[_0x185b84(0x2b4)]({'stop':_0x185b84(0x274)},_0x18703a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x205aca,_0x3e6300){const _0x4a1c73=_0x447c31;if(botPaused)return;const _0x224b36=config[_0x4a1c73(0x1e3)]||_0x4a1c73(0x253);if(_0x3e6300)logger['debug']('Exception\x20thrown\x20in\x20'+_0x3e6300);const _0x3d78b9=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x205aca[_0x4a1c73(0x2c5)]()[_0x4a1c73(0x18e)]('API-key\x20format\x20invalid'))logHistory(_0x4a1c73(0x16e),_0x224b36+_0x4a1c73(0x20d)),_0x3d78b9();else{if(_0x205aca['toString']()[_0x4a1c73(0x18e)](_0x4a1c73(0x16b)))logHistory(_0x4a1c73(0x16e),_0x224b36+_0x4a1c73(0x210)),_0x3d78b9();else _0x205aca[_0x4a1c73(0x2c5)]()[_0x4a1c73(0x18e)](_0x4a1c73(0x24b))?(logHistory(_0x4a1c73(0x16e),_0x224b36+_0x4a1c73(0x175)),logHistory('error',_0x4a1c73(0x26f)),_0x3d78b9()):await handleError(_0x205aca,null);}}async function handleError(_0x55c1d9,_0x25bf22,_0x1e32ff=''){const _0x28709a=_0x447c31;if(botPaused)return;const _0x5687f4=config['exchange']||'Exchange';if(_0x25bf22)logger[_0x28709a(0x25a)]('Exception\x20thrown\x20in\x20'+_0x25bf22);if(_0x55c1d9['toString']()[_0x28709a(0x18e)](_0x28709a(0x22a))||_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)](_0x28709a(0x1a0)))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x170)+pauseBotMsg),await pauseBot();else{if(_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)](_0x28709a(0x17f))||_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)](_0x28709a(0x24e)))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x1f7)+pauseBotMsg),await pauseBot();else{if(_0x55c1d9['toString']()['includes'](_0x28709a(0x167)))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x21b)+pauseBotMsg),await pauseBot();else{if(_0x55c1d9[_0x28709a(0x2c5)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x2a7)+pauseBotMsg),await pauseBot();else{if(_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)](_0x28709a(0x239)))logHistory(_0x28709a(0x16e),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x28709a(0x16e),_0x28709a(0x24f)),await killBot();else{if(_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)]('InvalidNonce'))logHistory('error',_0x5687f4+_0x28709a(0x244)+pauseBotMsgLong),logHistory('error',_0x28709a(0x16d)),await pauseBot(pauseBotIntervalLong);else{if(_0x55c1d9 instanceof ccxt[_0x28709a(0x2aa)])logHistory(_0x28709a(0x16e),_0x5687f4+'\x20network\x20error'+pauseBotMsg),logger[_0x28709a(0x25a)]('Error\x20details:',_0x55c1d9),await pauseBot();else{if(_0x55c1d9['toString']()[_0x28709a(0x18e)](_0x28709a(0x2df)))logHistory('error',_0x5687f4+_0x28709a(0x2c3)),logHistory('error',_0x28709a(0x24f)),await killBot();else{if(_0x55c1d9[_0x28709a(0x2c5)]()[_0x28709a(0x18e)](_0x28709a(0x16b)))logHistory(_0x28709a(0x16e),_0x5687f4+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x28709a(0x16e),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x55c1d9['toString']()[_0x28709a(0x18e)](_0x28709a(0x24b)))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x1ff)),logHistory(_0x28709a(0x16e),_0x28709a(0x24f)),await killBot();else{if(_0x55c1d9['toString']()[_0x28709a(0x18e)]('PermissionDenied'))logHistory(_0x28709a(0x16e),_0x5687f4+_0x28709a(0x1eb)),logHistory(_0x28709a(0x16e),_0x28709a(0x24f)),await killBot();else{if(_0x55c1d9['toString']()[_0x28709a(0x18e)](_0x28709a(0x2de)))logHistory(_0x28709a(0x16e),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x1e32ff);else _0x55c1d9 instanceof ccxt[_0x28709a(0x24a)]?(logHistory(_0x28709a(0x16e),_0x5687f4+'\x20exchange\x20error'),logger[_0x28709a(0x25a)]('Error\x20details:',_0x55c1d9)):(logHistory(_0x28709a(0x16e),_0x28709a(0x286)+pauseBotMsg),logger[_0x28709a(0x25a)](_0x28709a(0x1bc),_0x55c1d9),await pauseBot());}}}}}}}}}}}}function formatResult(_0x4f6fc7,_0x5109a3){const _0x50a63d=_0x447c31;return parseFloat(_0x4f6fc7[_0x50a63d(0x283)](_0x5109a3));}function formatResultTruncate(_0x517210,_0x441987){const _0x1c166e=_0x447c31;let _0x399f55=formatResultString(_0x517210,0xa),_0x64b459=_0x399f55[_0x1c166e(0x299)]('.');return _0x64b459!=-0x1&&(_0x399f55=_0x399f55['slice'](0x0,_0x64b459+_0x441987+0x1)),Number(_0x399f55);}function formatResultString(_0x24eaa1,_0x3fb1e9){const _0x87c994=_0x447c31;let _0x3afc42;if(!(''+_0x24eaa1)[_0x87c994(0x18e)]('e'))_0x3afc42=+(Math[_0x87c994(0x1e8)](_0x24eaa1+'e+'+_0x3fb1e9)+'e-'+_0x3fb1e9);else{let _0x5e4f7c=(''+_0x24eaa1)[_0x87c994(0x20c)]('e'),_0x2f78f5='';+_0x5e4f7c[0x1]+_0x3fb1e9>0x0&&(_0x2f78f5='+'),_0x3afc42=+(Math[_0x87c994(0x1e8)](+_0x5e4f7c[0x0]+'e'+_0x2f78f5+(+_0x5e4f7c[0x1]+_0x3fb1e9))+'e-'+_0x3fb1e9);}return Number(_0x3afc42)[_0x87c994(0x283)](_0x3fb1e9);}function getServerTime(){const _0x433b61=_0x447c31,_0x592c54=new Date();return _0x592c54[_0x433b61(0x20f)]()+'/'+(_0x592c54[_0x433b61(0x179)]()+0x1)[_0x433b61(0x2c5)]()[_0x433b61(0x1a7)](0x2,'0')+'/'+_0x592c54[_0x433b61(0x273)]()[_0x433b61(0x2c5)]()[_0x433b61(0x1a7)](0x2,'0')+'\x20'+_0x592c54[_0x433b61(0x1d0)]()[_0x433b61(0x2c5)]()[_0x433b61(0x1a7)](0x2,'0')+':'+_0x592c54['getMinutes']()[_0x433b61(0x2c5)]()[_0x433b61(0x1a7)](0x2,'0')+':'+_0x592c54[_0x433b61(0x186)]()[_0x433b61(0x2c5)]()[_0x433b61(0x1a7)](0x2,'0');}function getTimeStamp(){const _0xb3db4c=_0x447c31,_0x3d1d32=shiftedTime();return _0x3d1d32['getFullYear']()+'/'+(_0x3d1d32[_0xb3db4c(0x179)]()+0x1)[_0xb3db4c(0x2c5)]()[_0xb3db4c(0x1a7)](0x2,'0')+'/'+_0x3d1d32['getDate']()[_0xb3db4c(0x2c5)]()[_0xb3db4c(0x1a7)](0x2,'0')+'\x20'+_0x3d1d32['getHours']()[_0xb3db4c(0x2c5)]()[_0xb3db4c(0x1a7)](0x2,'0')+':'+_0x3d1d32['getMinutes']()['toString']()[_0xb3db4c(0x1a7)](0x2,'0')+':'+_0x3d1d32[_0xb3db4c(0x186)]()[_0xb3db4c(0x2c5)]()[_0xb3db4c(0x1a7)](0x2,'0');}function getDate(){const _0x3a9c72=_0x447c31,_0xef29ad=shiftedTime();return _0xef29ad[_0x3a9c72(0x20f)]()+'/'+(_0xef29ad[_0x3a9c72(0x179)]()+0x1)['toString']()[_0x3a9c72(0x1a7)](0x2,'0')+'/'+_0xef29ad[_0x3a9c72(0x273)]()[_0x3a9c72(0x2c5)]()[_0x3a9c72(0x1a7)](0x2,'0');}function getHour(){const _0x21911f=_0x447c31,_0x25e106=shiftedTime();return _0x25e106[_0x21911f(0x1d0)]()['toString']()[_0x21911f(0x1a7)](0x2,'0');}function sleep(_0x317bab){return new Promise(_0x500902=>setTimeout(_0x500902,_0x317bab));}function shiftedTime(){const _0x202c0f=new Date();let _0x1cec33=_0x202c0f;if(config&&config['timeshift']!==0x0)_0x1cec33=fns['add'](_0x202c0f,{'hours':config['timeshift']});return _0x1cec33;}function timer(_0x517e8d){const _0x5525cd=_0x447c31,_0x3acd2c=new Date();!lasttime?console[_0x5525cd(0x1b2)](getTimeStamp()+_0x5525cd(0x276),_0x517e8d,_0x3acd2c):console[_0x5525cd(0x1b2)](getTimeStamp()+_0x5525cd(0x276),_0x517e8d,(_0x3acd2c-lasttime)/0x3e8),lasttime=_0x3acd2c;}