const _0x22bc00=_0x4efc;(function(_0x1711de,_0x5a60f6){const _0x2f36bd=_0x4efc,_0x264aa3=_0x1711de();while(!![]){try{const _0x2383d4=-parseInt(_0x2f36bd(0x26c))/0x1*(-parseInt(_0x2f36bd(0x2d9))/0x2)+parseInt(_0x2f36bd(0x2d1))/0x3+-parseInt(_0x2f36bd(0x294))/0x4*(-parseInt(_0x2f36bd(0x309))/0x5)+parseInt(_0x2f36bd(0x231))/0x6*(parseInt(_0x2f36bd(0x2bf))/0x7)+-parseInt(_0x2f36bd(0x1f6))/0x8*(-parseInt(_0x2f36bd(0x229))/0x9)+-parseInt(_0x2f36bd(0x31b))/0xa+-parseInt(_0x2f36bd(0x236))/0xb;if(_0x2383d4===_0x5a60f6)break;else _0x264aa3['push'](_0x264aa3['shift']());}catch(_0x51c986){_0x264aa3['push'](_0x264aa3['shift']());}}}(_0x2bf1,0xd387e));const _0x55d248=function(){let _0x5130a5=!![];return function(_0x243670,_0x1e2666){const _0x193b16=_0x5130a5?function(){const _0x45a857=_0x4efc;if(_0x1e2666){const _0x405d0d=_0x1e2666[_0x45a857(0x2b5)](_0x243670,arguments);return _0x1e2666=null,_0x405d0d;}}:function(){};return _0x5130a5=![],_0x193b16;};}(),_0x515c6b=_0x55d248(this,function(){const _0x1ab49d=_0x4efc;return _0x515c6b[_0x1ab49d(0x1e3)]()['search'](_0x1ab49d(0x310))['toString']()[_0x1ab49d(0x333)](_0x515c6b)[_0x1ab49d(0x1f9)](_0x1ab49d(0x310));});_0x515c6b();'use strict';const ccxt=require('ccxt')[_0x22bc00(0x283)],low=require('lowdb'),FileSync=require(_0x22bc00(0x2c2)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x22bc00(0x1d6))[_0x22bc00(0x2b8)],util=require(_0x22bc00(0x30e)),argv=require(_0x22bc00(0x1e7))(process[_0x22bc00(0x26a)]['slice'](0x2))['argv'],path=require(_0x22bc00(0x2de));let exchange;function _0x2bf1(){const _0x399eea=['performance','splice','time','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getFullYear','eur','uncaughtException','slice','exchange','bot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','market','\x20has\x20a\x2024h\x20drop\x20of\x20','configuration-stored','total','customId','createWriteStream','getPortfolio(2)','Binance','event-history','-results.json','change','./config/','symbol','toLowerCase','fetchTickers','success','toUpperCase','settings','random','headless','cancelLoading','Unknown\x20error\x20occured','limit','error','UNLOCKED','Pausing\x20for\x20','28695zAQRpW','average','apiSecret','showConfig','join','util','threshold','(((.+)+)+)+$','***','-config.json','sell','balances','fees','ticker','Limit\x20(high-margin)','coins','liquidity','ongoing','726420rBELiB','last','startdate','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20|\x20','defaults','offset','Net\x20effect','2.3.5','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','replace','fetchOpenOrders','status','split','BNB','<pre>','privateKey','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','1\x20-\x20Unlock\x20orders','openOrders','Failed\x20to\x20load\x20coin\x20data\x20for\x20','has','recreate','AuthenticationError','constructor','enabled','page','get','fee','substring','differenceInSeconds','yyyy/MM/dd','no\x20additional\x20symbols','length','remove','Invalid\x20quantity','getMinutes','Order(s)\x20not\x20validated\x20after\x20','getCoins()','getOpenOrders()','\x20|\x20lock\x20orders:\x20','-------------------------------\x0a','none','final','getCoinNumber()','shift','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','hybrid-crypto-js','2\x20-\x20FILLED\x20known\x20order:\x20','string','exec','valid','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','portfolio','unlinkSync','sha256','running','limit-high','logs','Bot\x20','toString','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20Error\x20details:\x20','initial','yargs/yargs','2\x20-\x20Orders\x20unlocked','bots','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','exchange\x20reloaded','onepagemode','coin-loading-progress','cancelOrders()','2\x20-\x20Handled\x20open\x20orders','2\x20-\x20FILLED\x20unknown\x20order:\x20','getSeconds','bot-','canceled','fiat','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','304JCYRBB','timeout','1\x20-\x20FILLED:\x20','search','currency','************','\x20|\x20highest:\x20','function','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','getTime','\x20not\x20available','net-basecoin','showname','Transaction\x20detection\x20blocked','trade','order','value','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','limit-low','fetchTicker','ask','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','usd','sendPortfolioTelegram','args','ORDERS.UNLOCKED','LOCKED','no\x20open\x20orders','Error:\x20Invalid\x20argument\x20','min','<b>Bot\x20','orderstatus','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','storeHeadless','\x20hour','\x20value','kill','EUR','placeOrder','%\x20(','closed','parse','orderId','recovery','YOYOW/','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','No\x20more\x20open\x20orders\x20-\x20','buys','leftTxt','215676ayHRBt','max','resetHistory','./version.json','watchTrades','getMonth','\x20-\x20bot\x20not\x20started','log','138gtxkrs','cancelOrder','existsSync','InsufficientFunds','warning','47300803AfBUwR','0\x20-\x20EXECUTION:\x20','side','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Transaction\x20detection\x20unblocked','highest','USD','initclient','\x20portfolio:</b>\x20\x0a\x0a','full','\x20not\x20responding','BNB/','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','amount','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20>\x20[DEBUG]\x20','\x20>\x20','additional\x20symbols\x20','decrypt','bb-secure.json','limits','/USD','precision','cloneDeep','sells','timeshift','UNLOCKING','startprice','cooldown','send','getDate','open','emojisell','includes','ordertype','added','fromCodePoint','net-fiat','Initiating\x20exchange\x20reload','loadSymbols()','sendMetricsTelegram','Manual\x20balancing\x20required','\x20API\x20key\x20is\x20invalid','find','write','change24h','configuration','loading-canceled','</pre>','RequestTimeout','remainingSymbols','ExchangeNotAvailable','argv','API-key\x20format\x20invalid','15101BjWjrV','placeOrder()','removed','close','USDT','push','exchanges','filled','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','version','findIndex','getPortfolio(1)','cost','Reset\x20|\x20','watchOrders','filter','coin','event','Market','getPortfolio','changes','\x20order:\x20','startnumber','pro','watchTransactions','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','date','set','DDoSProtection','cancel','ETH','BTC','fetchBalance','timestamp','starting-balances','getHours','storeFiat','Order\x20filled:\x20','getPortfolio(0)','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','824fblpzn','distribution','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','breakeven','add','-performance.json','BUSD','excluded','forEach','datetime','clientOrderId','assign','./logs/','ORDERS.UNLOCKING','fetchClosedOrders','\x20metrics:</b>\x20\x0a\x0a','secure','emojibuy','progress','001','writeFile','type','.json','2.5.0','HOT/BTC',':\x20Bot\x20','sortBy','keys','stringify','entries',',\x20must\x20be\x20a\x203\x20digit\x20number','format','apply','toFixed','percentage','Crypt','XEM/BUSD','Cooldown\x20ended\x20-\x20balancing\x20resumed','sort','Executed\x20','delta','restart','375361EAkKMh','padStart','data','lowdb/adapters/FileSync','reverse','toggleBotMode','Exchange','Net\x20','basecoin','simple','Order\x20amount\x20is\x20invalid:\x20','price','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','buy','timer:','number','target','round','4425063oJHNbz','Limit\x20(low-margin)','isEqual','message','<b>','/output-000.log','botname','createOrder','58kuREjW','apiKey','Saving\x20configuration','mkdirSync','debug','path','\x20:\x20','bid','abs','Executing\x20exchange\x20reload','recent20'];_0x2bf1=function(){return _0x399eea;};return _0x2bf1();}global[_0x22bc00(0x316)]={},global[_0x22bc00(0x2f9)]={};const exceptions={'binance':['DAI/',_0x22bc00(0x2ad),_0x22bc00(0x2b9),'NANO/',_0x22bc00(0x224)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x22bc00(0x307)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x22bc00(0x22c))['version'],botID=process[_0x22bc00(0x26a)][0x2]||_0x22bc00(0x2a8),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x22bc00(0x214)+botID+_0x22bc00(0x2b3)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x22bc00(0x2fa)+userID+'/':_0x22bc00(0x2fa),logspath=userID?_0x22bc00(0x2a1)+userID+'/':_0x22bc00(0x2a1),loggerfile=fs[_0x22bc00(0x2f4)](logspath+_0x22bc00(0x2d6),{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x22bc00(0x2dc)](logspath);const configfile=configpath+_0x22bc00(0x1f2)+botID+_0x22bc00(0x312),logfile=configpath+_0x22bc00(0x1f2)+botID+'-events.json',performancefile=configpath+_0x22bc00(0x1f2)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x22bc00(0x249),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x22bc00(0x320)]({'logs':[],'version':serverversion})[_0x22bc00(0x262)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x22bc00(0x320)]({'data':[],'version':serverversion})[_0x22bc00(0x262)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x22bc00(0x320)]({'bot':[],'version':serverversion})[_0x22bc00(0x262)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x22bc00(0x320)]({'coins':[],'version':serverversion})[_0x22bc00(0x262)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x22bc00(0x1de),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x480e60=>{const _0x4d14d3=_0x22bc00;console[_0x4d14d3(0x230)](_0x480e60);},'simple':_0xa9ada9=>{const _0x45721d=_0x22bc00;console[_0x45721d(0x230)](_0xa9ada9),loggerfile[_0x45721d(0x262)](util[_0x45721d(0x2b4)](_0xa9ada9)+'\x0a');},'full':async(_0x143e20,_0x5afcab='')=>{const _0x40b9be=_0x22bc00;let _0x3a71f8;if(config[_0x40b9be(0x202)])_0x3a71f8=getTimeStamp()+':\x20'+config[_0x40b9be(0x2d7)]+_0x40b9be(0x246)+_0x143e20;else _0x3a71f8=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x143e20;console['log'](_0x3a71f8),loggerfile[_0x40b9be(0x262)](util['format'](_0x3a71f8)+'\x0a'),_0x5afcab&&(console[_0x40b9be(0x230)](_0x5afcab),loggerfile[_0x40b9be(0x262)](util[_0x40b9be(0x2b4)](_0x5afcab)+'\x0a'));},'debug':async(_0x1cdf7e,_0x29b9dc='')=>{const _0x155a58=_0x22bc00;let _0x54a80f;if(config[_0x155a58(0x202)])_0x54a80f=getTimeStamp()+':\x20'+config[_0x155a58(0x2d7)]+_0x155a58(0x245)+_0x1cdf7e;else _0x54a80f=getTimeStamp()+_0x155a58(0x2ae)+botID+'\x20>\x20[DEBUG]\x20'+_0x1cdf7e;if(debugging)console[_0x155a58(0x230)](_0x54a80f);loggerfile[_0x155a58(0x262)](util[_0x155a58(0x2b4)](_0x54a80f)+'\x0a');if(_0x29b9dc){if(debugging)console[_0x155a58(0x230)](_0x29b9dc);loggerfile[_0x155a58(0x262)](util[_0x155a58(0x2b4)](_0x29b9dc)+'\x0a');}}};process['on'](_0x22bc00(0x2ea),function(_0x572154){const _0x4c7bac=_0x22bc00;logger[_0x4c7bac(0x2c8)](_0x572154);});settings['timeshift']!=config[_0x22bc00(0x24f)]&&updateTimeshift(settings[_0x22bc00(0x24f)]);settings[_0x22bc00(0x1ec)]!=config['onepagemode']&&updateOnepagemode(settings[_0x22bc00(0x1ec)]);process['send']({'started':_0x22bc00(0x1df)},_0x4d2a61=>{}),initializeProcessListeners();function proxyEmit(_0x34b118,_0x300f19=null){const _0x3e275b=_0x22bc00;process[_0x3e275b(0x253)]({'function':_0x34b118,'args':_0x300f19},_0x58b66d=>{});}function initializeProcessListeners(){const _0x581fd4=_0x22bc00;process['on'](_0x581fd4(0x2d4),_0x27b785=>{const _0xf2bb02=_0x581fd4;switch(Object[_0xf2bb02(0x2b0)](_0x27b785)[0x0]){case _0xf2bb02(0x24f):_0x27b785[_0xf2bb02(0x24f)]!=undefined&&(settings[_0xf2bb02(0x24f)]=_0x27b785[_0xf2bb02(0x24f)],updateTimeshift(settings['timeshift']));break;case _0xf2bb02(0x1ec):_0x27b785[_0xf2bb02(0x1ec)]!=undefined&&(settings[_0xf2bb02(0x1ec)]=_0x27b785[_0xf2bb02(0x1ec)],updateOnepagemode(settings[_0xf2bb02(0x1ec)]));break;case'bots':_0x27b785[_0xf2bb02(0x1e9)]!=undefined&&(bots=JSON[_0xf2bb02(0x221)](_0x27b785[_0xf2bb02(0x1e9)]),proxyEmit(_0xf2bb02(0x1e9),bots));break;case'function':switch(_0x27b785[_0xf2bb02(0x1fd)]){case _0xf2bb02(0x23d):initclient();break;case _0xf2bb02(0x2c4):toggleBotMode();break;case'emitHistory':emitHistory(_0x27b785[_0xf2bb02(0x210)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x27b785['args']);break;case _0xf2bb02(0x27f):getPortfolio(_0x27b785[_0xf2bb02(0x210)]);break;case'storeConfiguration':storeConfiguration(_0x27b785['args']);break;case _0xf2bb02(0x219):storeHeadless(_0x27b785[_0xf2bb02(0x210)]);break;case _0xf2bb02(0x290):storeFiat(_0x27b785[_0xf2bb02(0x210)]);break;case _0xf2bb02(0x22b):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0xf2bb02(0x21e):placeOrder(_0x27b785[_0xf2bb02(0x210)]);break;case _0xf2bb02(0x303):cancelLoading();break;case _0xf2bb02(0x30c):showConfig();break;case _0xf2bb02(0x25e):sendMetricsTelegram();break;case _0xf2bb02(0x20f):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x59d5a6=null,_0x1a8217=![]){const _0x5f32b5=_0x22bc00;logger['debug'](_0x5f32b5(0x279)+(_0x59d5a6&&_0x59d5a6[_0x5f32b5(0x33c)]>0x0?_0x5f32b5(0x247)+_0x59d5a6['join'](','):_0x5f32b5(0x33b))+_0x5f32b5(0x31f)+(_0x1a8217?_0x5f32b5(0x1eb):'exchange\x20not\x20reloaded'));if(pidBalances)clearTimeout(pidBalances);if(!_0x1a8217)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x5f32b5(0x2da)]!=_0x5f32b5(0x311)){if(_0x1a8217){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xed8865){if(_0xed8865[_0x5f32b5(0x1e3)]()['includes'](_0x5f32b5(0x332))){handleErrorNoStop(_0xed8865,_0x5f32b5(0x25d));return;}else{handleError(_0xed8865,_0x5f32b5(0x25d));return;}}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x59d5a6);const _0x392958=await getCoins();[currentCoins,currentCoinsAll]=_0x392958,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders[_0x5f32b5(0x33c)]==0x0&&allOpenOrders[_0x5f32b5(0x33c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4c0789=_0x22bc00;exchangeStopped=!![],await exchange[_0x4c0789(0x26f)]();}async function reloadExchange(){const _0x3f6ac7=_0x22bc00;logger[_0x3f6ac7(0x2dd)](_0x3f6ac7(0x25c));while(lockOrders!=ORDERS[_0x3f6ac7(0x307)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3f6ac7(0x2dd)](_0x3f6ac7(0x2e2)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4ee2a6=config[_0x22bc00(0x2ec)],_0x279671=config[_0x22bc00(0x2da)],_0xbe9a09=config[_0x22bc00(0x30b)]){const _0x4f1195=_0x22bc00;exchange&&await stopExchange();!supportedExchanges()[_0x4f1195(0x257)](_0x4ee2a6)&&(logHistory(_0x4f1195(0x306),_0x4f1195(0x20d)+_0x4ee2a6+_0x4f1195(0x208)),killBot());const _0x2f6d86=ccxt[_0x4ee2a6[_0x4f1195(0x2fc)]()];exchange=new _0x2f6d86({'apiKey':_0x279671,'secret':_0xbe9a09,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x240370=_0x22bc00;let _0x2b22b8=config[_0x240370(0x2c7)]==_0x240370(0x28a)?'ETH':_0x240370(0x28b),_0x9f4d75=!allSymbols['includes'](_0x2b22b8+_0x240370(0x24b))?_0x240370(0x270):_0x240370(0x23c),_0x6f617c=!allSymbols[_0x240370(0x257)](_0x2b22b8+'/EUR')?_0x9f4d75:_0x240370(0x21d);stablecoins={'eur':{'coin':''+_0x2b22b8+_0x6f617c,'symbol':_0x2b22b8+'/'+_0x6f617c},'usd':{'coin':''+_0x2b22b8+_0x9f4d75,'symbol':_0x2b22b8+'/'+_0x9f4d75}};}async function initwsCcxt(_0x4e7f00){const _0x63c9f6=_0x22bc00;_0x4e7f00==null&&(_0x4e7f00=[],config['portfolio'][_0x63c9f6(0x29d)](_0x59ef47=>{const _0x28c229=_0x63c9f6;if(!_0x59ef47[_0x28c229(0x29c)]&&_0x59ef47[_0x28c229(0x27c)]!=config[_0x28c229(0x2c7)])_0x4e7f00[_0x28c229(0x271)](_0x59ef47[_0x28c229(0x2fb)]);}));if(!_0x4e7f00[_0x63c9f6(0x257)](stablecoins[_0x63c9f6(0x2e9)][_0x63c9f6(0x2fb)]))_0x4e7f00[_0x63c9f6(0x271)](stablecoins[_0x63c9f6(0x2e9)][_0x63c9f6(0x2fb)]);if(!_0x4e7f00[_0x63c9f6(0x257)](stablecoins[_0x63c9f6(0x20e)][_0x63c9f6(0x2fb)]))_0x4e7f00['push'](stablecoins[_0x63c9f6(0x20e)][_0x63c9f6(0x2fb)]);if(!_0x4e7f00[_0x63c9f6(0x257)](_0x63c9f6(0x241)+config['basecoin']))_0x4e7f00[_0x63c9f6(0x271)](_0x63c9f6(0x241)+config[_0x63c9f6(0x2c7)]);loadCoins(_0x4e7f00);const _0x5176d5=async _0x1e0ef9=>{const _0x4fb9ef=_0x63c9f6,_0x5b4fe6=await exchange[_0x4fb9ef(0x20b)](_0x1e0ef9);global[_0x4fb9ef(0x316)][noslash(_0x5b4fe6['symbol'])]=_0x5b4fe6[_0x4fb9ef(0x31c)];while(!![]){if(!botPaused)try{const _0x1063ac=await exchange[_0x4fb9ef(0x22d)](_0x1e0ef9);global[_0x4fb9ef(0x316)][noslash(_0x1063ac[0x0][_0x4fb9ef(0x2fb)])]=_0x1063ac[0x0][_0x4fb9ef(0x2ca)],await sleep(0x3e8);}catch(_0xc8cafb){if(!exchangeStopped)await handleError(_0xc8cafb,_0x4fb9ef(0x22d),_0x1e0ef9);}else await sleep(0x3e8);}},_0x2448c7=async _0x1a9c0b=>{const _0x387b56=_0x63c9f6;while(!![]){if(!botPaused)try{const _0x207f77=await exchange[_0x387b56(0x20b)](_0x1a9c0b);global[_0x387b56(0x2f9)][_0x207f77['symbol']]=_0x207f77[_0x387b56(0x2b7)],await sleep(0x3c*0x3e8);}catch(_0x56ef51){if(!exchangeStopped)await handleError(_0x56ef51,_0x387b56(0x2fd),_0x1a9c0b);}else await sleep(0x3e8);}},_0x53739f=async()=>{const _0x39e6bc=_0x63c9f6;while(!![]){if(!botPaused)try{const _0x18d724=await exchange[_0x39e6bc(0x27a)]();_0x18d724[_0x39e6bc(0x29d)](_0x22faeb=>{updateNumberCoinsCcxt(_0x22faeb);});}catch(_0x1738dc){if(!exchangeStopped)await handleError(_0x1738dc,_0x39e6bc(0x27a));}else await sleep(0x3e8);}};_0x4e7f00['forEach'](async _0x26e0d7=>{_0x5176d5(_0x26e0d7),_0x2448c7(_0x26e0d7);}),!wsEventsSet&&(wsEventsSet=!![],_0x53739f(),watchTransactions());}async function watchTransactions(){const _0x27a12f=_0x22bc00;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x22ac4d=await getCoins(),[_0x4832d6,_0x52418f]=_0x22ac4d;let _0x55f6f4=[];currentCoins[_0x27a12f(0x29d)](_0x20bc67=>{const _0x2c173f=_0x27a12f,_0x4d7e93=_0x4832d6[_0x2c173f(0x261)](_0x174f9d=>_0x174f9d[_0x2c173f(0x27c)]==_0x20bc67[_0x2c173f(0x27c)]);_0x4d7e93&&(_0x20bc67[_0x2c173f(0x2ce)]!=_0x4d7e93[_0x2c173f(0x2ce)]&&_0x55f6f4['push']({'coin':_0x20bc67[_0x2c173f(0x27c)],'symbol':_0x20bc67[_0x2c173f(0x2fb)],'number':Number(formatResult(_0x4d7e93[_0x2c173f(0x2ce)]-_0x20bc67['number'],0x8))}));});if(_0x55f6f4['length']==0x1&&!blockTransactionDetection){logger['debug']('Fees\x20|\x20currency:\x20'+lastFees[_0x27a12f(0x1fa)]+_0x27a12f(0x1fc)+lastFees[_0x27a12f(0x23b)]);if(!lastFees[_0x27a12f(0x1fa)]||_0x55f6f4[0x0][_0x27a12f(0x27c)]!=lastFees[_0x27a12f(0x1fa)]||_0x55f6f4[0x0][_0x27a12f(0x2ce)]>lastFees['highest']){let _0x565f71;if(_0x55f6f4[0x0][_0x27a12f(0x27c)]!=config[_0x27a12f(0x2c7)]){let _0x5d58c6=global[_0x27a12f(0x316)][noslash(_0x55f6f4[0x0]['symbol'])];_0x565f71=_0x55f6f4[0x0][_0x27a12f(0x2c3)]?0x1/_0x5d58c6:_0x5d58c6;}else _0x565f71=0x1;_0x55f6f4[0x0][_0x27a12f(0x2ca)]=_0x565f71,delete _0x55f6f4[0x0][_0x27a12f(0x2fb)];let _0x297e54=[],_0x3075e9=[...config[_0x27a12f(0x319)]]||[],_0x4837d3=config[_0x27a12f(0x319)];_0x3075e9[_0x27a12f(0x2bb)]((_0x3abc70,_0x56ca3d)=>_0x3abc70['date']>_0x56ca3d[_0x27a12f(0x286)]?-0x1:_0x56ca3d[_0x27a12f(0x286)]>_0x3abc70['date']?0x1:0x0);const _0x4b83d9=getDate();if(_0x3075e9[0x0]){const _0x3dd30b=fns[_0x27a12f(0x221)](_0x3075e9[0x0][_0x27a12f(0x286)],'yyyy/MM/dd',new Date()),_0x53d592=fns[_0x27a12f(0x221)](_0x4b83d9,_0x27a12f(0x33a),new Date());if(fns[_0x27a12f(0x2d3)](_0x3dd30b,_0x53d592)){_0x297e54=_0x3075e9[0x0][_0x27a12f(0x280)];const _0x52a8d7=_0x297e54['find'](_0x5f5a44=>_0x5f5a44[_0x27a12f(0x27c)]==_0x55f6f4[0x0][_0x27a12f(0x27c)]);_0x52a8d7?_0x52a8d7[_0x27a12f(0x2ce)]+=_0x55f6f4[0x0][_0x27a12f(0x2ce)]:_0x297e54[_0x27a12f(0x271)](_0x55f6f4[0x0]);const _0x4fd121=_0x4837d3['find'](_0x15783d=>_0x15783d[_0x27a12f(0x286)]==_0x4b83d9);_0x4fd121[_0x27a12f(0x280)]=_0x297e54;}else _0x4837d3['push']({'date':_0x4b83d9,'changes':[_0x55f6f4[0x0]]});}const _0x428f1f=_0x4837d3[_0x27a12f(0x261)](_0x4abfad=>_0x4abfad[_0x27a12f(0x286)]==_0x4b83d9);if(_0x428f1f){let _0x40de66=!![];_0x428f1f[_0x27a12f(0x280)][_0x27a12f(0x29d)](_0x19f43b=>{const _0x180686=_0x27a12f;if(_0x19f43b[_0x180686(0x2ce)]!=0x0)_0x40de66=![];}),_0x40de66&&(_0x4837d3=_0x4837d3[_0x27a12f(0x27b)](_0x5ad3d6=>{return _0x5ad3d6['date']!=_0x4b83d9;}));}let _0x39d2d1=dbConfig['get'](_0x27a12f(0x2ed))[_0x27a12f(0x261)]({'botID':botID})[_0x27a12f(0x206)]();_0x39d2d1&&(dbConfig[_0x27a12f(0x336)](_0x27a12f(0x2ed))[_0x27a12f(0x261)]({'botID':botID})[_0x27a12f(0x2a0)]({'liquidity':_0x4837d3})[_0x27a12f(0x262)](),config[_0x27a12f(0x319)]=_0x4837d3),logHistory(_0x27a12f(0x2fe),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x55f6f4[0x0][_0x27a12f(0x2ce)])+'\x20'+_0x55f6f4[0x0][_0x27a12f(0x27c)]+'\x20'+(_0x55f6f4[0x0][_0x27a12f(0x2ce)]>0x0?_0x27a12f(0x259):_0x27a12f(0x26e))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x27a12f(0x264),emittedConfiguration());}else logger[_0x27a12f(0x2dd)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x27a12f(0x2e1)](_0x55f6f4[0x0]['number'])+'\x20'+_0x55f6f4[0x0]['coin']+'\x20'+(_0x55f6f4[0x0]['number']>0x0?_0x27a12f(0x259):_0x27a12f(0x26e)));transactionDetected=!![],currentCoins=_0x4832d6,currentCoinsAll=_0x52418f;}await sleep(watchTransactionsInterval);}catch(_0x5ce00e){if(!exchangeStopped)await handleError(_0x5ce00e,_0x27a12f(0x284));}else await sleep(0x3e8);}}async function loadSymbols(_0x1a9419=config['exchange'],_0x359052=![]){const _0x169814=_0x22bc00;if(allSymbols&&!_0x359052)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange['symbols'][_0x169814(0x27b)](_0x5d4a47=>{const _0x3e4d08=_0x169814;let _0x3e2b77=![];const _0x57d92c=exceptions[_0x1a9419[_0x3e4d08(0x2fc)]()]||[];return _0x57d92c[_0x3e4d08(0x29d)](_0x283280=>{const _0x26cb45=_0x3e4d08;if(_0x5d4a47[_0x26cb45(0x257)](_0x283280))_0x3e2b77=!![];}),!_0x3e2b77;});}catch(_0x189f5d){throw _0x189f5d;}}async function initclient(){const _0x1793ba=_0x22bc00;emitLoadingProgress(),proxyEmit(_0x1793ba(0x264),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1793ba(0x314),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xfe8ee4=getNormalizedPerformance();emitPerformance(_0xfe8ee4),await getStartingBalances(_0xfe8ee4);}async function toggleBotMode(){const _0x55d71b=_0x22bc00;let _0x24c181=dbConfig['get'](_0x55d71b(0x2ed))[_0x55d71b(0x261)]({'botID':botID})[_0x55d71b(0x206)]();if(_0x24c181){const _0x12c5be=!_0x24c181[_0x55d71b(0x302)];dbConfig['get']('bot')[_0x55d71b(0x261)]({'botID':botID})[_0x55d71b(0x2a0)]({'headless':_0x12c5be})['write'](),config[_0x55d71b(0x302)]=_0x12c5be,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3f3dce=_0x22bc00;process[_0x3f3dce(0x253)]({'updatebotmanager':!![]},_0x37e694=>{});}async function loadCoins(_0x3b91c6){const _0x207249=_0x22bc00;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4612bc,_0x41ba7e=0x0,_0x984810=0x0;_0x3b91c6[_0x207249(0x29d)](_0x4e3f42=>{const _0x39bf35=_0x207249;loading[_0x39bf35(0x268)][_0x39bf35(0x271)](_0x4e3f42);}),loadingCanceled=![];let _0x2bc6ed=![];while(_0x4612bc!=_0x3b91c6['length']){_0x4612bc=0x0,_0x3b91c6[_0x207249(0x29d)](_0x3c47fb=>{const _0x4b21aa=_0x207249;if(global[_0x4b21aa(0x316)][noslash(_0x3c47fb)]){loading[_0x4b21aa(0x268)]=loading[_0x4b21aa(0x268)]['filter'](_0x3473b6=>_0x3473b6!=_0x3c47fb);if(!watchedSymbols['includes'](_0x3c47fb))watchedSymbols[_0x4b21aa(0x271)](_0x3c47fb);_0x4612bc++;}}),loading['progress']=Math[_0x207249(0x2d0)](_0x4612bc/_0x3b91c6['length']*0x64);loading[_0x207249(0x2a7)]!=0x64&&(_0x984810>0x1e*0x5&&(loading[_0x207249(0x1f7)]=!![],emitLoadingProgress()),_0x984810>0x78*0x5&&!_0x2bc6ed&&(loading[_0x207249(0x289)]=!![],emitLoadingProgress(),_0x2bc6ed=!![],logHistory(_0x207249(0x306),_0x207249(0x32f)+loading[_0x207249(0x268)][_0x207249(0x30d)](',\x20')+_0x207249(0x22f)),logHistory('error',_0x207249(0x308)+loadCoinsRetryInterval/0xea60+_0x207249(0x324)),pidCoinReloading=setTimeout(()=>{const _0x330c9e=_0x207249;process['send']({'stop':_0x330c9e(0x2be)},_0x2e485d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x207249(0x289)]=!![],emitLoadingProgress();break;}else _0x4612bc!=_0x41ba7e&&(_0x41ba7e=_0x4612bc,emitLoadingProgress()),_0x984810++,await sleep(0xc8);}_0x4612bc==_0x3b91c6[_0x207249(0x33c)]&&(coinsLoaded=!![],process[_0x207249(0x253)]({'status':'enabled','live':_0x207249(0x1df)},_0xdba1da=>{}),_0x2bc6ed&&logHistory('success',_0x207249(0x242)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x37c6b6=_0x22bc00;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x37c6b6(0x265)});}function emitLoadingProgress(){const _0x4d2a9d=_0x22bc00;proxyEmit(_0x4d2a9d(0x1ed),loading);}function _0x4efc(_0x17ba0e,_0x16328a){const _0x3f11fd=_0x2bf1();return _0x4efc=function(_0x515c6b,_0x55d248){_0x515c6b=_0x515c6b-0x1d1;let _0x2bf1c6=_0x3f11fd[_0x515c6b];return _0x2bf1c6;},_0x4efc(_0x17ba0e,_0x16328a);}async function getFiat(){const _0x1269f6=_0x22bc00;let _0x5aa16a=global[_0x1269f6(0x316)][stablecoins['eur'][_0x1269f6(0x27c)]],_0x522e3c=global['ticker'][stablecoins[_0x1269f6(0x20e)][_0x1269f6(0x27c)]];return{'eur':Number(_0x5aa16a),'usd':Number(_0x522e3c)};}function capitalize(_0x63923c){const _0x3e1696=_0x22bc00;return _0x63923c[_0x3e1696(0x338)](0x0,0x1)[_0x3e1696(0x2ff)]()+_0x63923c[_0x3e1696(0x338)](0x1);}function supportedExchanges(){const _0x20f9fb=_0x22bc00,_0x1d0419=['ws',_0x20f9fb(0x2fd),'fetchTicker',_0x20f9fb(0x22d),_0x20f9fb(0x27a),_0x20f9fb(0x232),_0x20f9fb(0x2d8),'fetchOpenOrders',_0x20f9fb(0x2a3),_0x20f9fb(0x28c)];let _0x5ac9cc=[],_0x4d4f31=[],_0x8bc821=ccxt[_0x20f9fb(0x272)];_0x8bc821[_0x20f9fb(0x29d)](_0x28d5f5=>{const _0x30cc9e=_0x20f9fb;try{const _0x14d9a8=new ccxt[_0x28d5f5]();if(_0x14d9a8[_0x30cc9e(0x330)]['ws'])_0x4d4f31[_0x30cc9e(0x271)](_0x14d9a8);}catch(_0x487c58){}}),_0x4d4f31[_0x20f9fb(0x29d)](_0x499931=>{const _0x59f37a=_0x20f9fb;let _0xdf47d4=0x0;_0x1d0419['forEach'](_0x58fd9c=>{const _0x4c6129=_0x4efc;_0x58fd9c in _0x499931[_0x4c6129(0x330)]&&_0x499931[_0x4c6129(0x330)][_0x58fd9c]&&_0xdf47d4++;}),_0xdf47d4==_0x1d0419[_0x59f37a(0x33c)]&&_0x5ac9cc[_0x59f37a(0x271)](capitalize(_0x499931['id']));});let _0x14f420=[];return _0x8bc821[_0x20f9fb(0x29d)](_0x2e0fb0=>{const _0x34e698=_0x20f9fb;_0x2e0fb0=capitalize(_0x2e0fb0);if(!_0x5ac9cc[_0x34e698(0x257)](_0x2e0fb0))_0x14f420[_0x34e698(0x271)](_0x2e0fb0);}),_0x5ac9cc;}function setStartDatePerformance(){const _0x9ad470=_0x22bc00;if(config&&config[_0x9ad470(0x319)][0x0]['changes'][_0x9ad470(0x33c)]!=0x0){const _0x498947=config['liquidity'][0x0][_0x9ad470(0x280)];dbPerformance[_0x9ad470(0x336)](_0x9ad470(0x2c1))[_0x9ad470(0x261)]({'date':config[_0x9ad470(0x31d)]})[_0x9ad470(0x2a0)]({'coins':_0x498947})['write']();}}async function recreateCoinResults(){const _0x49fbc5=_0x22bc00;let _0x4bc9cc,_0x37f246=[];try{const _0x57022a=fns[_0x49fbc5(0x2b4)](fns['parseISO'](config[_0x49fbc5(0x31d)][_0x49fbc5(0x325)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x1ee5f4 of currentCoins){if(_0x1ee5f4['coin']!=config['basecoin']){let _0x349b50=0x0,_0x5bb300,_0x36eeb9;_0x4bc9cc=await getAllEventOrders(_0x1ee5f4[_0x49fbc5(0x2fb)]);if(_0x4bc9cc[_0x49fbc5(0x33c)]>0x0)_0x4bc9cc[_0x49fbc5(0x29d)](_0x5d948e=>{const _0x2ff7ff=_0x49fbc5,_0x56ad5d=_0x1ee5f4[_0x2ff7ff(0x2fb)][_0x2ff7ff(0x257)](config[_0x2ff7ff(0x2c7)]+'/');_0x37f246[_0x2ff7ff(0x271)]({'datetime':_0x5d948e[_0x2ff7ff(0x29e)],'coin':_0x1ee5f4[_0x2ff7ff(0x27c)],'symbol':_0x1ee5f4[_0x2ff7ff(0x2fb)],'side':_0x5d948e[_0x2ff7ff(0x238)],'reverse':_0x56ad5d,'amount':formatResult(_0x5d948e['filled'],0x8),'filled':formatResult(_0x5d948e[_0x2ff7ff(0x273)],0x8),'price':formatResult(_0x5d948e[_0x2ff7ff(0x2ca)],0x8)}),_0x349b50=_0x5d948e[_0x2ff7ff(0x238)]==_0x2ff7ff(0x2cc)?_0x349b50+_0x5d948e[_0x2ff7ff(0x273)]:_0x349b50-_0x5d948e[_0x2ff7ff(0x273)];if(!_0x36eeb9)_0x36eeb9=_0x5d948e[_0x2ff7ff(0x2ca)];});_0x5bb300=_0x1ee5f4[_0x49fbc5(0x2ce)]-_0x349b50;let _0x574311;config[_0x49fbc5(0x319)]['forEach'](_0x8a3f7b=>{const _0x45c047=_0x49fbc5;!_0x574311&&(_0x574311=_0x8a3f7b[_0x45c047(0x280)]['find'](_0x10a908=>_0x10a908['coin']==_0x1ee5f4[_0x45c047(0x27c)]),_0x574311&&(_0x5bb300=_0x574311['number'],_0x36eeb9=_0x574311[_0x45c047(0x2ca)]));});let _0x218d1a=dbCoinResults[_0x49fbc5(0x336)](_0x49fbc5(0x318))[_0x49fbc5(0x261)]({'coin':_0x1ee5f4[_0x49fbc5(0x27c)]})[_0x49fbc5(0x206)]();_0x218d1a={'coin':_0x1ee5f4[_0x49fbc5(0x27c)],'number':_0x5bb300,'breakeven':_0x36eeb9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x49fbc5(0x336)]('coins')['find']({'coin':_0x1ee5f4[_0x49fbc5(0x27c)]})[_0x49fbc5(0x2a0)](_0x218d1a)[_0x49fbc5(0x262)]();}}_0x37f246[_0x49fbc5(0x2bb)]((_0x14e6b1,_0x192520)=>_0x14e6b1[_0x49fbc5(0x29e)]>_0x192520[_0x49fbc5(0x29e)]?0x1:_0x192520['datetime']>_0x14e6b1['datetime']?-0x1:0x0);let _0x10211d=0x0;for(let _0x39eb86 of _0x37f246){await updateCoinResults(_0x39eb86,!![]);}}catch(_0x5100b3){await handleError(_0x5100b3,'recreateCoinResults()');}}async function getAllEventOrders(_0x5e6fc6){const _0x5bede5=_0x22bc00;let _0x4dc2d8=[],_0x70338e=dbLogs[_0x5bede5(0x336)](_0x5bede5(0x1e1))[_0x5bede5(0x27b)](_0x455e21=>{const _0x11bc1a=_0x5bede5,_0x5c06c5=_0x455e21[_0x11bc1a(0x27d)][_0x11bc1a(0x2fc)]();return _0x5c06c5[_0x11bc1a(0x257)](_0x5e6fc6['toLowerCase']())&&(_0x5c06c5[_0x11bc1a(0x257)]('market')&&_0x5c06c5['includes'](_0x11bc1a(0x205))||_0x5c06c5['includes'](_0x11bc1a(0x273))&&_0x5c06c5[_0x11bc1a(0x257)](_0x11bc1a(0x205)));})[_0x5bede5(0x2af)](_0x5bede5(0x2e6))[_0x5bede5(0x206)]();return _0x70338e['forEach'](_0x3d3cb3=>{const _0x25c8da=_0x5bede5,_0x386396=_0x3d3cb3[_0x25c8da(0x27d)][_0x25c8da(0x257)](_0x25c8da(0x313))?'sell':'buy',_0xcb5c1e=/#([0-9]|\.)+\s/i,_0xdc58d6=Number(_0xcb5c1e[_0x25c8da(0x1d9)](_0x3d3cb3[_0x25c8da(0x27d)])[0x0]['slice'](0x1)),_0x17f456=/@([0-9]|\.)+$/i,_0x115612=Number(_0x17f456['exec'](_0x3d3cb3['event'])[0x0][_0x25c8da(0x2eb)](0x1));_0x4dc2d8['push']({'datetime':_0x3d3cb3[_0x25c8da(0x2e6)],'coin':symbolToCoin(_0x5e6fc6),'symbol':_0x5e6fc6,'side':_0x386396,'amount':_0xdc58d6,'filled':_0xdc58d6,'price':_0x115612});}),_0x4dc2d8;}async function getAllOrders(_0x18e322,_0x4ed6d1){const _0x59c2c5=_0x22bc00;let _0xe99a6a=[];while(_0x4ed6d1<exchange['milliseconds']()){const _0x35a356=0x1f4,_0x134867=await exchange[_0x59c2c5(0x2a3)](_0x18e322,_0x4ed6d1,_0x35a356);if(_0x134867[_0x59c2c5(0x33c)])_0x4ed6d1=_0x134867[_0x134867[_0x59c2c5(0x33c)]-0x1][_0x59c2c5(0x28d)]+0x1,_0xe99a6a=_0xe99a6a['concat'](_0x134867);else break;}return _0xe99a6a;}async function validate24hChanges(){const _0x534781=_0x22bc00;for(const _0x48fa62 of currentCoins){if(_0x48fa62['coin']!=config['basecoin']){let _0x543280;_0x48fa62[_0x534781(0x2c3)]?_0x543280=formatResult((0x1/(global[_0x534781(0x2f9)][noslash(_0x48fa62['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x543280=global[_0x534781(0x2f9)][noslash(_0x48fa62[_0x534781(0x2fb)])],_0x543280<config[_0x534781(0x263)]&&(logHistory(_0x534781(0x306),_0x48fa62[_0x534781(0x27c)]+_0x534781(0x2f0)+_0x543280+'%'),logHistory('error',_0x534781(0x1db)),logHistory(_0x534781(0x306),_0x534781(0x293)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5a66fa,_0x243ccd){const _0x44ac77=_0x22bc00;if(!_0x5a66fa)return!![];const _0x28c8d0=_0x243ccd[_0x44ac77(0x328)]('.'),_0x70e6f3=_0x5a66fa[_0x44ac77(0x328)]('.');for(var _0xa2c78b=0x0;_0xa2c78b<_0x70e6f3['length'];_0xa2c78b++){const _0x9a7278=~~_0x70e6f3[_0xa2c78b],_0x32d1eb=~~_0x28c8d0[_0xa2c78b];if(_0x9a7278<_0x32d1eb)return!![];if(_0x9a7278>_0x32d1eb)return![];}return![];}async function oneTimeMigration(){const _0xf61090=_0x22bc00;let _0xb134ce=dbLogs[_0xf61090(0x336)](_0xf61090(0x275))[_0xf61090(0x206)]();if(isOlderVersion(_0xb134ce,'2.3.5')){let _0x4efa83=[];const _0xcc7950=dbLogs['get'](_0xf61090(0x1e1))[_0xf61090(0x206)]();_0xcc7950[_0xf61090(0x29d)](_0x481f97=>{const _0x2f5674=_0xf61090;_0x4efa83[_0x2f5674(0x271)]({'time':_0x481f97[_0x2f5674(0x2e6)],'type':_0x481f97[_0x2f5674(0x2aa)],'event':_0x481f97['event']});}),dbLogs[_0xf61090(0x336)](_0xf61090(0x1e1))[_0xf61090(0x2a0)](_0x4efa83)['write']();}let _0x1fccdf=dbConfig[_0xf61090(0x336)](_0xf61090(0x275))['value']();if(isOlderVersion(_0x1fccdf,_0xf61090(0x323))){let _0x2f07ce=dbConfig[_0xf61090(0x336)]('bot')['find']({'botID':botID})[_0xf61090(0x206)]();if(_0x2f07ce){let _0xd0f94=[];_0x2f07ce[_0xf61090(0x1dc)]['forEach'](_0x2b91f5=>{const _0x349e7b=_0xf61090;_0xd0f94['push']({'coin':_0x2b91f5['coin'],'number':_0x2b91f5[_0x349e7b(0x282)],'price':_0x2b91f5[_0x349e7b(0x251)]}),delete _0x2b91f5[_0x349e7b(0x282)],delete _0x2b91f5[_0x349e7b(0x251)];});if(_0xd0f94[_0xf61090(0x33c)]!==0x0)fs[_0xf61090(0x2a9)](configbackuppath+('starting-balance-'+botID+_0xf61090(0x2ab)),JSON[_0xf61090(0x2b1)](_0xd0f94,null,0x4),function(_0x36c92a){if(_0x36c92a){}});const _0x2f40a9=(_0x482ac7,_0x59901e)=>{const _0x5af499=_0xf61090;let _0xf3d3fb=[];_0x59901e[_0x5af499(0x29d)](_0x5bea91=>{const _0x5ec788=_0x5af499,_0x10a6e=_0x482ac7['find'](_0x16500a=>_0x16500a['coin']==_0x5bea91[_0x5ec788(0x27c)]);if(!_0x10a6e)_0xf3d3fb['push'](_0x5bea91);});let _0x53875f=[];return _0x482ac7[_0x5af499(0x29d)](_0x3a2cfb=>{const _0x361969=_0x5af499,_0xbbe502=_0x59901e['find'](_0x363c94=>_0x363c94[_0x361969(0x27c)]==_0x3a2cfb[_0x361969(0x27c)]);if(!_0xbbe502||_0xbbe502[_0x361969(0x2ce)]==0x0&&_0x3a2cfb[_0x361969(0x2ce)]!=0x0)_0x53875f['push'](_0x3a2cfb);}),{'missingDay1':_0xf3d3fb,'notInDay2':_0x53875f};},_0x5a3e7c=dbPerformance[_0xf61090(0x336)](_0xf61090(0x2c1))[_0xf61090(0x24d)]()[_0xf61090(0x206)]();if(_0x5a3e7c[_0xf61090(0x33c)]>0x1){const {missingDay1:_0x5ca2a9,notInDay2:_0x257124}=_0x2f40a9(_0xd0f94,_0x5a3e7c[0x1][_0xf61090(0x318)]);_0xd0f94=[..._0xd0f94,..._0x5ca2a9],_0x257124[_0xf61090(0x29d)](_0x409294=>{const _0x3f18cc=_0xf61090;let _0x36a3bd=_0xd0f94[_0x3f18cc(0x276)](_0x362fbe=>_0x362fbe[_0x3f18cc(0x27c)]==_0x409294[_0x3f18cc(0x27c)]);_0x36a3bd!=-0x1&&_0xd0f94[_0x3f18cc(0x2e5)](_0x36a3bd,0x1);});}_0xd0f94[_0xf61090(0x2bb)]((_0x37410c,_0x476a1f)=>_0x37410c['coin']>_0x476a1f[_0xf61090(0x27c)]?0x1:_0x476a1f[_0xf61090(0x27c)]>_0x37410c[_0xf61090(0x27c)]?-0x1:0x0);let _0x6cc081=[{'date':_0x2f07ce['startdate'],'changes':_0xd0f94}];_0x5a3e7c[_0xf61090(0x33c)]>0x2&&_0x5a3e7c[_0xf61090(0x29d)]((_0x3b1782,_0x2d6287)=>{const _0x16e2f3=_0xf61090;if(_0x2d6287>0x0&&_0x2d6287<_0x5a3e7c[_0x16e2f3(0x33c)]-0x1){const {missingDay1:_0x2a21a0,notInDay2:_0x2e1b66}=_0x2f40a9(_0x5a3e7c[_0x2d6287][_0x16e2f3(0x318)],_0x5a3e7c[_0x2d6287+0x1][_0x16e2f3(0x318)]);_0xd0f94=[],(_0x2a21a0[_0x16e2f3(0x33c)]!=0x0||_0x2e1b66[_0x16e2f3(0x33c)]!=0x0)&&(_0x2a21a0[_0x16e2f3(0x33c)]!=0x0&&_0xd0f94[_0x16e2f3(0x271)](..._0x2a21a0),_0x2e1b66[_0x16e2f3(0x33c)]!=0x0&&(_0x2e1b66[_0x16e2f3(0x29d)](_0x5f481a=>{const _0x4b3d19=_0x16e2f3;_0x5f481a[_0x4b3d19(0x2ce)]=-_0x5f481a['number'];}),_0xd0f94[_0x16e2f3(0x271)](..._0x2e1b66)),_0xd0f94[_0x16e2f3(0x2bb)]((_0x1c2fd2,_0x59489e)=>_0x1c2fd2['coin']>_0x59489e[_0x16e2f3(0x27c)]?0x1:_0x59489e[_0x16e2f3(0x27c)]>_0x1c2fd2['coin']?-0x1:0x0),_0x6cc081[_0x16e2f3(0x271)]({'date':_0x5a3e7c[_0x2d6287+0x1][_0x16e2f3(0x286)],'changes':_0xd0f94}));}}),dbConfig[_0xf61090(0x336)]('bot')['find']({'botID':botID})[_0xf61090(0x2a0)]({..._0x2f07ce,'liquidity':_0x6cc081})[_0xf61090(0x262)]();}}if(isOlderVersion(_0x1fccdf,'2.6.0')){let _0x152ebb=dbConfig[_0xf61090(0x336)](_0xf61090(0x2ed))[_0xf61090(0x261)]({'botID':botID})[_0xf61090(0x206)]();if(_0x152ebb){const _0x236bf7=_0x152ebb[_0xf61090(0x2ec)],_0x32fbe5=_0x236bf7?capitalize(_0x236bf7):_0xf61090(0x2f6);dbConfig[_0xf61090(0x336)](_0xf61090(0x2ed))[_0xf61090(0x261)]({'botID':botID})[_0xf61090(0x2a0)]({'exchange':_0x32fbe5})[_0xf61090(0x262)]();}}let _0x41c710=dbPerformance[_0xf61090(0x336)](_0xf61090(0x275))[_0xf61090(0x206)]();isOlderVersion(_0x41c710,_0xf61090(0x323))&&setStartDatePerformance();let _0x3aec6b=dbCoinResults[_0xf61090(0x336)]('version')[_0xf61090(0x206)]();if(isOlderVersion(_0x3aec6b,_0xf61090(0x2ac))){let _0x9f1653=dbCoinResults['get'](_0xf61090(0x318))[_0xf61090(0x206)]();if(_0x9f1653['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x369834=_0x22bc00;dbConfig[_0x369834(0x287)](_0x369834(0x275),serverversion)[_0x369834(0x262)](),dbPerformance[_0x369834(0x287)](_0x369834(0x275),serverversion)[_0x369834(0x262)](),dbLogs['set'](_0x369834(0x275),serverversion)[_0x369834(0x262)](),dbCoinResults['set'](_0x369834(0x275),serverversion)[_0x369834(0x262)]();}function getConfiguration(_0x19055d){const _0xf21c5c=_0x22bc00;let _0x153fda=dbConfig[_0xf21c5c(0x336)](_0xf21c5c(0x2ed))['find']({'botID':_0x19055d})[_0xf21c5c(0x206)]();if(_0x153fda){let _0x3da9f8=![];typeof _0x153fda['threshold']==_0xf21c5c(0x1d8)&&(_0x153fda={..._0x153fda,'threshold':Number(_0x153fda[_0xf21c5c(0x30f)])},_0x3da9f8=!![]),_0x153fda['change24h']==null&&(_0x153fda={..._0x153fda,'change24h':-0x14},_0x3da9f8=!![]),!_0x153fda[_0xf21c5c(0x1f4)]&&(_0x153fda={..._0x153fda,'fiat':'USD'},_0x3da9f8=!![]),!_0x153fda[_0xf21c5c(0x1ec)]&&(_0x153fda={..._0x153fda,'onepagemode':settings[_0xf21c5c(0x1ec)]},_0x3da9f8=!![]),_0x3da9f8&&(_0x153fda={'botID':_0x153fda['botID'],'exchange':_0x153fda[_0xf21c5c(0x2ec)],'apiKey':_0x153fda['apiKey'],'apiSecret':_0x153fda[_0xf21c5c(0x30b)],'basecoin':_0x153fda['basecoin'],'botname':_0x153fda['botname'],'showname':_0x153fda[_0xf21c5c(0x202)],'threshold':_0x153fda[_0xf21c5c(0x30f)],'ordertype':_0x153fda['ordertype'],'timeout':_0x153fda['timeout'],'fiat':_0x153fda[_0xf21c5c(0x1f4)],'startdate':_0x153fda['startdate'],'recreate':_0x153fda[_0xf21c5c(0x331)],'timeshift':_0x153fda['timeshift'],'onepagemode':_0x153fda[_0xf21c5c(0x1ec)],'headless':_0x153fda[_0xf21c5c(0x302)],'cooldown':_0x153fda['cooldown'],'change24h':_0x153fda[_0xf21c5c(0x263)],'emojibuy':_0x153fda[_0xf21c5c(0x2a6)],'emojisell':_0x153fda[_0xf21c5c(0x256)],'portfolio':_0x153fda[_0xf21c5c(0x1dc)],'liquidity':_0x153fda[_0xf21c5c(0x319)],'openOrders':_0x153fda[_0xf21c5c(0x32e)]},dbConfig['get'](_0xf21c5c(0x2ed))[_0xf21c5c(0x33d)]()[_0xf21c5c(0x262)](),dbConfig['get']('bot')[_0xf21c5c(0x271)](_0x153fda)[_0xf21c5c(0x262)]());}else _0x153fda={'botID':_0x19055d,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0xf21c5c(0x1e2)+_0x19055d,'showname':![],'threshold':0x3,'ordertype':_0xf21c5c(0x2ef),'timeout':0x14,'fiat':_0xf21c5c(0x23c),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0xf21c5c(0x1ec)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x153fda;}function emittedConfiguration(){const _0x24c263=_0x22bc00;let _0x42bd6b;if(config['apiKey']=='')_0x42bd6b={...config,'configstate':_0x24c263(0x1e6)};else config[_0x24c263(0x2da)]==_0x24c263(0x311)?_0x42bd6b={...config,'configstate':_0x24c263(0x223)}:_0x42bd6b={...config,'apiKey':'************','apiSecret':'************'};return _0x42bd6b;}function getSettings(){const _0x29c3fa=_0x22bc00;return dbSettings['get'](_0x29c3fa(0x300))['value']();}function getSecure(){const _0x245989=_0x22bc00;return dbSecure['get'](_0x245989(0x2a5))[_0x245989(0x206)]()||{};}function updateTimeshift(_0x3426a5){const _0x175f0e=_0x22bc00;let _0x35a6a6=dbConfig[_0x175f0e(0x336)](_0x175f0e(0x2ed))[_0x175f0e(0x261)]({'botID':botID})['value']();_0x35a6a6&&dbConfig[_0x175f0e(0x336)](_0x175f0e(0x2ed))[_0x175f0e(0x261)]({'botID':botID})[_0x175f0e(0x2a0)]({'timeshift':_0x3426a5})[_0x175f0e(0x262)](),config[_0x175f0e(0x24f)]=_0x3426a5,proxyEmit(_0x175f0e(0x264),emittedConfiguration());}function updateOnepagemode(_0x557df8){const _0x423a0d=_0x22bc00;let _0x195e8b=dbConfig[_0x423a0d(0x336)](_0x423a0d(0x2ed))['find']({'botID':botID})[_0x423a0d(0x206)]();_0x195e8b&&dbConfig[_0x423a0d(0x336)](_0x423a0d(0x2ed))[_0x423a0d(0x261)]({'botID':botID})['assign']({'onepagemode':_0x557df8})['write'](),config[_0x423a0d(0x1ec)]=_0x557df8,proxyEmit(_0x423a0d(0x264),emittedConfiguration());}async function storeConfiguration(_0x118834){const _0x31f6c2=_0x22bc00;logger[_0x31f6c2(0x2dd)](_0x31f6c2(0x2db)),blockTransactionDetection=!![],logger['debug'](_0x31f6c2(0x203));let _0x47b365=[],_0x2597e3=![],_0x5629e6=[];_0x118834['portfolio']['forEach'](_0x1e2ee0=>{const _0x2f9f37=_0x31f6c2;if(!_0x1e2ee0[_0x2f9f37(0x29c)]&&_0x1e2ee0[_0x2f9f37(0x27c)]!=_0x118834[_0x2f9f37(0x2c7)])_0x5629e6[_0x2f9f37(0x271)](_0x1e2ee0[_0x2f9f37(0x2fb)]);}),_0x5629e6[_0x31f6c2(0x29d)](_0x1d7ff7=>{const _0x183772=_0x31f6c2,_0x3d2523=watchedSymbols[_0x183772(0x257)](_0x1d7ff7);!_0x3d2523&&_0x47b365[_0x183772(0x271)](_0x1d7ff7);}),console[_0x31f6c2(0x230)]({'additionalSymbols':_0x47b365}),console['log']({'watchedSymbols':watchedSymbols});_0x47b365[_0x31f6c2(0x33c)]>0x0?_0x2597e3=!![]:currentCoins['forEach'](_0xc99f45=>{const _0x5873db=_0x31f6c2;if(_0xc99f45[_0x5873db(0x27c)]!=config[_0x5873db(0x2c7)]){const _0x6db2d0=_0x5629e6[_0x5873db(0x261)](_0x1a110f=>_0x1a110f==_0xc99f45['symbol']);!_0x6db2d0&&(_0x2597e3=!![]);}});let _0x4cf886=dbConfig[_0x31f6c2(0x336)](_0x31f6c2(0x2ed))['find']({'botID':botID})['value']();_0x118834={..._0x118834,'apiKey':crypt[_0x31f6c2(0x248)](secure[_0x31f6c2(0x32b)],_0x118834[_0x31f6c2(0x2da)])[_0x31f6c2(0x2d4)],'apiSecret':crypt[_0x31f6c2(0x248)](secure[_0x31f6c2(0x32b)],_0x118834[_0x31f6c2(0x30b)])[_0x31f6c2(0x2d4)]};let _0xc4f05c=![];_0x4cf886?(_0x118834[_0x31f6c2(0x2da)]==_0x31f6c2(0x1fb)?_0x118834[_0x31f6c2(0x2da)]=config[_0x31f6c2(0x2da)]:_0xc4f05c=!![],_0x118834[_0x31f6c2(0x30b)]==_0x31f6c2(0x1fb)?_0x118834['apiSecret']=config[_0x31f6c2(0x30b)]:_0xc4f05c=!![],dbConfig[_0x31f6c2(0x336)](_0x31f6c2(0x2ed))['find']({'botID':botID})[_0x31f6c2(0x2a0)](_0x118834)[_0x31f6c2(0x262)]()):(dbConfig[_0x31f6c2(0x336)](_0x31f6c2(0x2ed))[_0x31f6c2(0x271)](_0x118834)[_0x31f6c2(0x262)](),_0xc4f05c=!![],process[_0x31f6c2(0x253)]({'status':_0x31f6c2(0x334),'live':_0x31f6c2(0x1df)},_0x3fb0a2=>{}));config={..._0x118834},setStartDatePerformance(),process['send']({'botname':_0x118834[_0x31f6c2(0x2d7)]},_0x57126a=>{}),updateBotManager();const _0x58513d=getNormalizedPerformance();getStartingBalances(_0x58513d),emitPerformance(_0x58513d),proxyEmit(_0x31f6c2(0x2f1)),await initCoinResults();if(_0xc4f05c)await reset(_0x47b365,!![]);else{if(_0x2597e3)await reset(_0x47b365,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger[_0x31f6c2(0x2dd)](_0x31f6c2(0x23a));}async function storeHeadless(_0x24e33d){const _0x1d1f1b=_0x22bc00,_0x426ccc={...config,'headless':_0x24e33d[_0x1d1f1b(0x302)]};let _0x4b8782=dbConfig[_0x1d1f1b(0x336)]('bot')[_0x1d1f1b(0x261)]({'botID':botID})[_0x1d1f1b(0x206)]();_0x4b8782&&dbConfig[_0x1d1f1b(0x336)]('bot')[_0x1d1f1b(0x261)]({'botID':botID})['assign'](_0x426ccc)['write'](),config={..._0x426ccc},updateBotManager(),proxyEmit(_0x1d1f1b(0x264),emittedConfiguration());}async function storeFiat(_0x2433ca){const _0x59d4d9=_0x22bc00,_0x22a90a={...config,'fiat':_0x2433ca};let _0x24e205=dbConfig['get']('bot')[_0x59d4d9(0x261)]({'botID':botID})[_0x59d4d9(0x206)]();_0x24e205&&dbConfig[_0x59d4d9(0x336)](_0x59d4d9(0x2ed))[_0x59d4d9(0x261)]({'botID':botID})[_0x59d4d9(0x2a0)](_0x22a90a)['write'](),config={..._0x22a90a},proxyEmit(_0x59d4d9(0x264),emittedConfiguration());}function resetHistory(){const _0x136718=_0x22bc00;logger[_0x136718(0x23f)]('Resetting\x20bot\x20history');try{if(fs[_0x136718(0x233)](path[_0x136718(0x30d)](configpath,'bot-'+botID+'-events.json')))fs[_0x136718(0x1dd)](path['join'](configpath,_0x136718(0x1f2)+botID+'-events.json'));if(fs[_0x136718(0x233)](path[_0x136718(0x30d)](configpath,_0x136718(0x1f2)+botID+_0x136718(0x29a))))fs[_0x136718(0x1dd)](path['join'](configpath,_0x136718(0x1f2)+botID+_0x136718(0x29a)));if(fs[_0x136718(0x233)](path[_0x136718(0x30d)](configpath,_0x136718(0x1f2)+botID+'-results.json')))fs[_0x136718(0x1dd)](path[_0x136718(0x30d)](configpath,_0x136718(0x1f2)+botID+_0x136718(0x2f8)));}catch(_0x3a58f1){if(_0x3a58f1)logger[_0x136718(0x23f)]('Error\x20while\x20deleting\x20files:\x20',_0x3a58f1);}const _0x376f85=getDate();let _0x2da00b=[];currentCoins[_0x136718(0x29d)](_0x532008=>{const _0x3b4385=_0x136718;_0x2da00b[_0x3b4385(0x271)]({'coin':_0x532008[_0x3b4385(0x27c)],'number':_0x532008[_0x3b4385(0x2ce)],'price':_0x532008[_0x3b4385(0x31c)]});});let _0x11ff85=dbConfig['get'](_0x136718(0x2ed))[_0x136718(0x261)]({'botID':botID})[_0x136718(0x206)]();_0x11ff85&&(dbConfig['get'](_0x136718(0x2ed))[_0x136718(0x261)]({'botID':botID})[_0x136718(0x2a0)]({'liquidity':[{'date':_0x376f85,'changes':_0x2da00b}]})['write'](),config[_0x136718(0x319)]=[]),process[_0x136718(0x253)]({'stop':_0x136718(0x2be)},_0x15dad0=>{});}function noslash(_0x54b318){const _0x22acc5=_0x22bc00;return _0x54b318[_0x22acc5(0x325)]('/','');}function updateHighestFee(_0x32818b,_0x122845){const _0x465952=_0x22bc00;lastFees[_0x465952(0x1fa)]=_0x32818b,lastFees['recent20'][_0x465952(0x33c)]===0x14&&lastFees[_0x465952(0x2e3)][_0x465952(0x1d3)](),lastFees['recent20'][_0x465952(0x271)](_0x122845),lastFees['highest']=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x2037f5){const _0x2df66e=_0x22bc00;logger[_0x2df66e(0x2dd)](_0x2df66e(0x237)+_0x2037f5[_0x2df66e(0x2fb)]+_0x2df66e(0x31f)+_0x2037f5[_0x2df66e(0x327)]+'\x20|\x20'+_0x2037f5['id']+'\x20|\x20'+_0x2037f5[_0x2df66e(0x29f)]);let _0x564a07=_0x2037f5[_0x2df66e(0x327)],_0x431610=![];currentCoins[_0x2df66e(0x29d)](_0x317034=>{const _0x41bff3=_0x2df66e;_0x317034[_0x41bff3(0x2fb)]==_0x2037f5[_0x41bff3(0x2fb)]&&(_0x431610=!![]);});if(!_0x431610)return;const _0x665b18=currentCoins[_0x2df66e(0x261)](_0x39ee44=>_0x39ee44[_0x2df66e(0x2fb)]==_0x2037f5[_0x2df66e(0x2fb)]),_0x56d2c6=_0x3f0386=>{const _0x3bb45c=_0x2df66e;if(_0x665b18)_0x665b18[_0x3bb45c(0x217)]=_0x3f0386;};if(_0x564a07==_0x2df66e(0x255))_0x56d2c6(_0x2df66e(0x255));else{if(_0x564a07==_0x2df66e(0x1f3)){_0x56d2c6(_0x2df66e(0x1f3));const _0x5611a0=await getCoins();[currentCoins,currentCoinsAll]=_0x5611a0,await getOpenOrders(),handleOpenOrders();}else{if(_0x564a07==_0x2df66e(0x220)){logger[_0x2df66e(0x2dd)](_0x2df66e(0x1f8)+_0x2037f5[_0x2df66e(0x2fb)]+_0x2df66e(0x31f)+_0x2037f5[_0x2df66e(0x273)]+_0x2df66e(0x31f)+_0x2037f5['id']+_0x2df66e(0x31f)+_0x2037f5['clientOrderId']);let _0x215866=![];if(lastOrders)lastOrders[_0x2df66e(0x29d)](async _0x31b1c3=>{const _0xb3a120=_0x2df66e;if(_0x31b1c3[_0xb3a120(0x2f3)]==_0x2037f5[_0xb3a120(0x29f)]){logger[_0xb3a120(0x2dd)](_0xb3a120(0x1d7)+_0x2037f5[_0xb3a120(0x29f)]),_0x215866=!![];if(_0x31b1c3[_0xb3a120(0x273)]==0x0){logger[_0xb3a120(0x2dd)](_0xb3a120(0x207)+_0x2037f5[_0xb3a120(0x29f)]),_0x31b1c3[_0xb3a120(0x2ca)]=_0x2037f5[_0xb3a120(0x30a)],_0x31b1c3[_0xb3a120(0x273)]=_0x2037f5['filled'],_0x31b1c3[_0xb3a120(0x337)]={'currency':_0x2037f5['fee']?_0x2037f5[_0xb3a120(0x337)][_0xb3a120(0x1fa)]:null,'cost':_0x2037f5[_0xb3a120(0x337)]?_0x2037f5['fee'][_0xb3a120(0x278)]:0x0},updateHighestFee(_0x31b1c3[_0xb3a120(0x337)][_0xb3a120(0x1fa)],_0x31b1c3[_0xb3a120(0x337)][_0xb3a120(0x278)]),_0x56d2c6(_0xb3a120(0x273)),await validateOrders();if(lockOrders==ORDERS[_0xb3a120(0x212)]){const _0x514295=await getCoins();[currentCoins,currentCoinsAll]=_0x514295;}await updateCoinResults(_0x31b1c3);}}});if(!_0x215866){logger[_0x2df66e(0x2dd)](_0x2df66e(0x1f0)+_0x2037f5['id']),_0x56d2c6(_0x2df66e(0x273));const _0x50397b=await getCoins();[currentCoins,currentCoinsAll]=_0x50397b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x5c718f=JSON[_0x2df66e(0x221)](lastBalances[_0x2df66e(0x1dc)]);const _0x18dc2b=_0x5c718f[_0x2df66e(0x261)](_0x531d50=>_0x531d50[_0x2df66e(0x2fb)]==_0x2037f5[_0x2df66e(0x2fb)]);if(_0x18dc2b){if(_0x564a07==_0x2df66e(0x255))_0x18dc2b[_0x2df66e(0x217)]=_0x18dc2b[_0x2df66e(0x217)]==_0x2df66e(0x273)?_0x2df66e(0x273):_0x2df66e(0x255);else{if(_0x564a07==_0x2df66e(0x1f3))_0x18dc2b[_0x2df66e(0x217)]=_0x18dc2b[_0x2df66e(0x217)]==_0x2df66e(0x273)?_0x2df66e(0x273):_0x2df66e(0x1f3);else _0x564a07=='closed'&&(_0x18dc2b['orderstatus']=_0x2df66e(0x273));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2df66e(0x2b1)](_0x5c718f)},proxyEmit(_0x2df66e(0x314),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x223281=_0x22bc00;await getOpenOrders();let _0x12aade=![];currentCoins[_0x223281(0x29d)](_0x1d5e1d=>{const _0x57ded7=_0x223281;_0x12aade=allOpenOrders['find'](_0x76a692=>_0x76a692[_0x57ded7(0x2fb)]==_0x1d5e1d[_0x57ded7(0x2fb)]),_0x1d5e1d[_0x57ded7(0x217)]=_0x12aade?'open':_0x57ded7(0x345);});}async function getCoins(_0x4fdb2a=!![],_0x24e9bc=config[_0x22bc00(0x2c7)]){const _0x35ecd3=_0x22bc00;let _0x4f2ed1,_0x1cd018=[],_0x108026=[],_0x24b969=[],_0x16fb14=[];try{_0x4f2ed1=await exchange[_0x35ecd3(0x28c)](),mybalances=_0x4f2ed1['total'];for(const [_0x277efb,_0x60f899]of Object[_0x35ecd3(0x2b2)](mybalances)){_0x16fb14[_0x35ecd3(0x271)](_0x277efb);}if(_0x24e9bc=='')for(const [_0x10602c,_0x2e4cc1]of Object[_0x35ecd3(0x2b2)](mybalances)){_0x2e4cc1[_0x35ecd3(0x1e3)]()!=0x0&&_0x108026['push']({'coin':_0x10602c});}else{let _0xc4b42b=![];for(const [_0x29885a,_0xfc4bfe]of Object['entries'](mybalances)){if(_0x16fb14['includes'](_0x29885a)){const _0x136ef7=config['portfolio'][_0x35ecd3(0x261)](_0x589b74=>_0x589b74[_0x35ecd3(0x27c)]==_0x29885a),_0x3bcd90=_0x29885a+'/'+_0x24e9bc,_0x37f783=_0x24e9bc+'/'+_0x29885a,_0x14d79e=currentCoins[_0x35ecd3(0x261)](_0x2d23dd=>_0x2d23dd[_0x35ecd3(0x27c)]==_0x29885a);_0xc4b42b=![];if((_0xfc4bfe[_0x35ecd3(0x1e3)]()!=0x0||_0x136ef7)&&(allSymbols['includes'](_0x3bcd90)||_0x29885a==_0x24e9bc))_0x29885a!=_0x24e9bc&&_0x1cd018[_0x35ecd3(0x271)](_0x3bcd90),_0x108026[_0x35ecd3(0x271)]({'coin':_0x29885a,'symbol':_0x3bcd90,'reverse':![],'number':Math[_0x35ecd3(0x22a)](_0xfc4bfe+(_0x136ef7&&_0x136ef7[_0x35ecd3(0x321)]||0x0),0x0),'orderstatus':_0x14d79e?_0x14d79e[_0x35ecd3(0x217)]:'none'});else(_0xfc4bfe[_0x35ecd3(0x1e3)]()!=0x0||_0x136ef7)&&allSymbols['includes'](_0x37f783)&&(_0x29885a!=_0x24e9bc&&_0x1cd018['push'](_0x37f783),_0x108026['push']({'coin':_0x29885a,'symbol':_0x37f783,'reverse':!![],'number':Math['max'](_0xfc4bfe+(_0x136ef7&&_0x136ef7[_0x35ecd3(0x321)]||0x0),0x0),'orderstatus':_0x14d79e?_0x14d79e['orderstatus']:_0x35ecd3(0x345)}));}}}}catch(_0x5cc511){if(!_0x4fdb2a)handleErrorNoStop(_0x5cc511,_0x35ecd3(0x341));else await handleError(_0x5cc511,_0x35ecd3(0x341));}return _0x24b969=cloneDeep(_0x108026),_0x108026=_0x108026['filter'](_0x46c6f1=>{const _0x2e421e=_0x35ecd3,_0x29f167=config[_0x2e421e(0x1dc)][_0x2e421e(0x261)](_0x139b72=>_0x139b72['coin']==_0x46c6f1[_0x2e421e(0x27c)]);return _0x29f167&&!_0x29f167[_0x2e421e(0x29c)];}),[_0x108026,_0x24b969];}async function getCoinNumber(_0x1dcf9e){const _0x31c9f6=_0x22bc00;let _0x2fcae0;try{const _0x3ab614=await exchange[_0x31c9f6(0x28c)]();_0x2fcae0=_0x3ab614[_0x31c9f6(0x2f2)][_0x1dcf9e];}catch(_0x268448){await handleError(_0x268448,_0x31c9f6(0x1d2));}return _0x2fcae0;}async function getOpenOrders(){const _0x467996=_0x22bc00;let _0x24eb07;allOpenOrders=[];try{for(const _0x738795 of config[_0x467996(0x1dc)]){!_0x738795[_0x467996(0x29c)]&&_0x738795[_0x467996(0x27c)]!=config[_0x467996(0x2c7)]&&(_0x24eb07=await exchange[_0x467996(0x326)](_0x738795[_0x467996(0x2fb)]),_0x24eb07[_0x467996(0x33c)]>0x0&&allOpenOrders[_0x467996(0x271)](_0x24eb07[0x0]));}}catch(_0x3c8e2f){await handleError(_0x3c8e2f,_0x467996(0x342));}}async function handleOpenOrders(_0x41c5b3=0x0){const _0xbb3d14=_0x22bc00;allOpenOrders[_0xbb3d14(0x33c)]==0x0&&lockOrders==ORDERS[_0xbb3d14(0x212)]&&allOrdersPlaced&&(_0x41c5b3==0x0?(logger[_0xbb3d14(0x2dd)]('1\x20-\x20Handle\x20open\x20orders'),_0x41c5b3++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xbb3d14(0x2dd)](_0xbb3d14(0x1ef)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x176746){const _0x20125a=_0x22bc00,_0x321c32=ccxt[_0x176746[_0x20125a(0x2ec)]['toLowerCase']()],_0x41e975=new _0x321c32({'apiKey':_0x176746[_0x20125a(0x2da)],'secret':_0x176746[_0x20125a(0x30b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});try{await _0x41e975['loadMarkets']();}catch(_0xdb6963){throw _0xdb6963;}}function cloneDeep(_0x5f94bf){const _0x3836a8=_0x22bc00;return JSON[_0x3836a8(0x221)](JSON[_0x3836a8(0x2b1)](_0x5f94bf));}async function getPortfolio(_0x40076a){const _0x2efa51=_0x22bc00;let _0x5ea4a0=[],_0x25ef65=[],_0x13b6fb=[],_0x248f79;if(_0x40076a[_0x2efa51(0x2da)]!=='************'||_0x40076a[_0x2efa51(0x30b)]!==_0x2efa51(0x1fb)){if(config['exchange']){if(_0x40076a['apiKey']==_0x2efa51(0x1fb))_0x40076a[_0x2efa51(0x2da)]=config[_0x2efa51(0x2da)];if(_0x40076a[_0x2efa51(0x30b)]=='************')_0x40076a[_0x2efa51(0x30b)]=config['apiSecret'];try{await testAPI(_0x40076a);}catch(_0x55909c){if(_0x55909c[_0x2efa51(0x1e3)]()[_0x2efa51(0x257)](_0x2efa51(0x332))){logger['debug']('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x2efa51(0x1dc),![]);return;}else{handleError(_0x55909c,_0x2efa51(0x292));return;}}}await initExchange(_0x40076a['exchange'],_0x40076a[_0x2efa51(0x2da)],_0x40076a[_0x2efa51(0x30b)]);try{await loadSymbols(_0x40076a['exchange'],!![]);}catch(_0x1c1cdd){if(_0x1c1cdd[_0x2efa51(0x1e3)]()[_0x2efa51(0x257)](_0x2efa51(0x332))){proxyEmit(_0x2efa51(0x1dc),![]);return;}else{handleError(_0x1c1cdd,_0x2efa51(0x277));return;}}const _0x1a99d0=await getCoins(![],_0x40076a[_0x2efa51(0x2c7)]);_0x13b6fb=cloneDeep(_0x1a99d0[0x1]);}else _0x13b6fb=cloneDeep(currentCoinsAll);if(_0x40076a[_0x2efa51(0x2c7)]=='')proxyEmit('portfolio',_0x13b6fb);else{_0x13b6fb[_0x2efa51(0x29d)](_0x4bf117=>{const _0x4a533f=_0x2efa51;if(_0x4bf117[_0x4a533f(0x27c)]!=_0x40076a[_0x4a533f(0x2c7)])_0x5ea4a0[_0x4a533f(0x271)](_0x4bf117['symbol']);});try{_0x25ef65=await exchange[_0x2efa51(0x2fd)](_0x5ea4a0);}catch(_0x2409a5){if(_0x2409a5[_0x2efa51(0x1e3)]()['includes'](_0x2efa51(0x332))){proxyEmit('portfolio',![]);return;}else{handleError(_0x2409a5,_0x2efa51(0x2f5));return;}}_0x13b6fb[_0x2efa51(0x29d)](_0x177ac0=>{const _0x1c8b79=_0x2efa51;_0x177ac0[_0x1c8b79(0x27c)]!=_0x40076a[_0x1c8b79(0x2c7)]?_0x248f79=_0x177ac0[_0x1c8b79(0x2c3)]?0x1/_0x25ef65[_0x177ac0[_0x1c8b79(0x2fb)]][_0x1c8b79(0x31c)]:_0x25ef65[_0x177ac0[_0x1c8b79(0x2fb)]][_0x1c8b79(0x31c)]:_0x248f79=0x1,_0x177ac0['price']=formatResult(_0x248f79,0x8);}),proxyEmit('portfolio',_0x13b6fb);}}function checkMinimums(_0x467bcd){const _0x4cc2b4=_0x22bc00;let _0x2cc0df=!![];const _0x37a837=!_0x467bcd['reverse']?markets[_0x467bcd[_0x4cc2b4(0x2fb)]][_0x4cc2b4(0x24a)]['amount'][_0x4cc2b4(0x215)]:markets[_0x467bcd[_0x4cc2b4(0x2fb)]][_0x4cc2b4(0x24a)][_0x4cc2b4(0x278)][_0x4cc2b4(0x215)],_0x1c4598=!_0x467bcd[_0x4cc2b4(0x2c3)]?markets[_0x467bcd[_0x4cc2b4(0x2fb)]][_0x4cc2b4(0x24a)][_0x4cc2b4(0x278)]['min']:markets[_0x467bcd['symbol']]['limits'][_0x4cc2b4(0x243)]['min'],_0x2453ad=markets[_0x467bcd['symbol']][_0x4cc2b4(0x24c)][_0x4cc2b4(0x243)];_0x467bcd[_0x4cc2b4(0x204)]=formatResultTruncate(_0x467bcd[_0x4cc2b4(0x204)],_0x2453ad);if(Math[_0x4cc2b4(0x2e1)](_0x467bcd[_0x4cc2b4(0x204)])<_0x37a837)_0x2cc0df=![];if(Math[_0x4cc2b4(0x2e1)](_0x467bcd['trade'])*_0x467bcd[_0x4cc2b4(0x31c)]<_0x1c4598)_0x2cc0df=![];if(_0x467bcd['side']=='sell'){let _0x5dbc1d=config[_0x4cc2b4(0x1dc)][_0x4cc2b4(0x261)](_0xca2d36=>_0xca2d36[_0x4cc2b4(0x27c)]==_0x467bcd[_0x4cc2b4(0x27c)]);if(_0x5dbc1d[_0x4cc2b4(0x321)]>0x0){if(Math[_0x4cc2b4(0x2e1)](_0x467bcd[_0x4cc2b4(0x204)])>_0x467bcd[_0x4cc2b4(0x2ce)]-_0x5dbc1d[_0x4cc2b4(0x321)])_0x2cc0df=![];}else{if(Math[_0x4cc2b4(0x2e1)](_0x467bcd[_0x4cc2b4(0x204)])>_0x467bcd[_0x4cc2b4(0x2ce)])_0x2cc0df=![];}}if(_0x467bcd[_0x4cc2b4(0x238)]==_0x4cc2b4(0x2cc)){let _0x575c50=config['portfolio']['find'](_0x353895=>_0x353895[_0x4cc2b4(0x27c)]==config[_0x4cc2b4(0x2c7)]),_0x2c2384=currentCoins[_0x4cc2b4(0x261)](_0x2aa279=>_0x2aa279[_0x4cc2b4(0x27c)]==config[_0x4cc2b4(0x2c7)]);if(_0x575c50[_0x4cc2b4(0x321)]>0x0){if(Math['abs'](_0x467bcd['trade'])*_0x467bcd[_0x4cc2b4(0x31c)]>_0x2c2384[_0x4cc2b4(0x2ce)]-_0x575c50[_0x4cc2b4(0x321)])_0x2cc0df=![];}else{if(Math[_0x4cc2b4(0x2e1)](_0x467bcd[_0x4cc2b4(0x204)])*_0x467bcd[_0x4cc2b4(0x31c)]>_0x2c2384[_0x4cc2b4(0x2ce)])_0x2cc0df=![];}}return _0x2cc0df;}async function getBalances(){const _0x425f7c=_0x22bc00;let _0x43133e=0x0,_0x3fe6e5;const _0x163bc5=config[_0x425f7c(0x30f)];if(config['headless']&&config[_0x425f7c(0x263)]<0x0)await validate24hChanges();currentCoins[_0x425f7c(0x29d)](_0x9b5db3=>{const _0x28f95d=_0x425f7c;if(_0x9b5db3[_0x28f95d(0x27c)]!=config[_0x28f95d(0x2c7)]){let _0x2aeb58=global[_0x28f95d(0x316)][noslash(_0x9b5db3[_0x28f95d(0x2fb)])];_0x3fe6e5=_0x9b5db3[_0x28f95d(0x2c3)]?0x1/_0x2aeb58:_0x2aeb58;}else _0x3fe6e5=0x1;let _0x1f4aa7=_0x9b5db3[_0x28f95d(0x2ce)]*_0x3fe6e5;_0x43133e+=_0x1f4aa7,_0x9b5db3[_0x28f95d(0x31c)]=formatResult(Number(_0x3fe6e5),0x8),_0x9b5db3[_0x28f95d(0x206)]=_0x1f4aa7;}),currentCoins[_0x425f7c(0x29d)](_0x48ab7a=>{const _0x5c3d55=_0x425f7c;let _0x14d00a=config['portfolio'][_0x5c3d55(0x261)](_0x12811a=>_0x12811a[_0x5c3d55(0x27c)]==_0x48ab7a[_0x5c3d55(0x27c)]),_0x502623=Number(_0x14d00a[_0x5c3d55(0x295)]),_0x534f4c=_0x48ab7a['value']/_0x43133e*0x64,_0x2d891b=_0x502623*_0x43133e/0x64/_0x48ab7a[_0x5c3d55(0x31c)]-_0x48ab7a[_0x5c3d55(0x2ce)];_0x48ab7a['distribution']=formatResult(_0x534f4c,0x3),_0x48ab7a[_0x5c3d55(0x2cf)]=formatResult(_0x502623,0x3),_0x48ab7a[_0x5c3d55(0x204)]=formatResult(_0x2d891b,0x8),_0x48ab7a[_0x5c3d55(0x238)]='',_0x48ab7a[_0x5c3d55(0x1da)]=![];if(_0x48ab7a[_0x5c3d55(0x27c)]!=config[_0x5c3d55(0x2c7)]){if(_0x48ab7a[_0x5c3d55(0x295)]>_0x502623)_0x48ab7a['side']=_0x5c3d55(0x313),_0x48ab7a[_0x5c3d55(0x1da)]=checkMinimums(_0x48ab7a);else _0x48ab7a[_0x5c3d55(0x295)]<_0x502623&&(_0x48ab7a['side']=_0x5c3d55(0x2cc),_0x48ab7a[_0x5c3d55(0x1da)]=checkMinimums(_0x48ab7a));}_0x48ab7a[_0x5c3d55(0x2bd)]=_0x48ab7a[_0x5c3d55(0x295)]/_0x48ab7a[_0x5c3d55(0x2cf)]-0x1;if(_0x48ab7a['orderstatus']==_0x5c3d55(0x273)||_0x48ab7a['orderstatus']==_0x5c3d55(0x1f3))_0x48ab7a[_0x5c3d55(0x217)]='none';}),currentCoins[_0x425f7c(0x2bb)]((_0x2b60b4,_0x4bc8b9)=>_0x2b60b4[_0x425f7c(0x2bd)]<_0x4bc8b9['delta']?0x1:_0x4bc8b9[_0x425f7c(0x2bd)]<_0x2b60b4[_0x425f7c(0x2bd)]?-0x1:0x0);const _0xa2e31e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xa2e31e['eur'],'usd':_0xa2e31e[_0x425f7c(0x20e)],'portfolio':JSON[_0x425f7c(0x2b1)](currentCoins),'threshold':_0x163bc5},proxyEmit(_0x425f7c(0x314),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x425f7c(0x302)])headlessMode({'portfolio':currentCoins,'threshold':_0x163bc5});else{if(lockOrders==ORDERS[_0x425f7c(0x307)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x163bc5});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x568b38=getNormalizedPerformance();emitPerformance(_0x568b38),getStartingBalances(_0x568b38),logger['debug'](_0x425f7c(0x31e));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1a00f9=_0x22bc00;if(!lastBalances)return;let _0x1f83ec=[],_0x142a95,_0x301e44=JSON[_0x1a00f9(0x221)](lastBalances['portfolio']);_0x301e44[_0x1a00f9(0x2bb)]((_0x383f30,_0x461800)=>_0x383f30[_0x1a00f9(0x27c)]>_0x461800[_0x1a00f9(0x27c)]?0x1:_0x461800['coin']>_0x383f30['coin']?-0x1:0x0),_0x301e44['forEach'](_0x19eefc=>{const _0x47e43b=_0x1a00f9;let _0x54b545={'coin':_0x19eefc['coin'],'number':_0x19eefc[_0x47e43b(0x2ce)],'price':_0x19eefc[_0x47e43b(0x31c)]};_0x1f83ec[_0x47e43b(0x271)](_0x54b545);});const _0x270ac4=await getFiat();_0x142a95={'date':lastBalances['time'][_0x1a00f9(0x328)]('\x20')[0x0],'eur':_0x270ac4[_0x1a00f9(0x2e9)],'usd':_0x270ac4['usd'],'coins':_0x1f83ec};let _0x5a5e4a=dbPerformance[_0x1a00f9(0x336)](_0x1a00f9(0x2c1))[_0x1a00f9(0x261)]({'date':_0x142a95[_0x1a00f9(0x286)]})[_0x1a00f9(0x206)]();_0x5a5e4a?_0x142a95[_0x1a00f9(0x286)]!=config[_0x1a00f9(0x31d)]&&dbPerformance['get'](_0x1a00f9(0x2c1))[_0x1a00f9(0x261)]({'date':_0x142a95[_0x1a00f9(0x286)]})['assign'](_0x142a95)['write']():dbPerformance[_0x1a00f9(0x336)](_0x1a00f9(0x2c1))['push'](_0x142a95)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3d8362=_0x22bc00;let _0x61bc0c=[];if(dbPerformance[_0x3d8362(0x330)](_0x3d8362(0x2c1))['value']()){let _0x5d859a=dbPerformance[_0x3d8362(0x336)](_0x3d8362(0x2c1))['cloneDeep']()[_0x3d8362(0x2af)](_0x3d8362(0x286))[_0x3d8362(0x206)](),_0xaa1994=[...config[_0x3d8362(0x319)]];_0xaa1994[_0x3d8362(0x2bb)]((_0x127310,_0x564616)=>_0x127310[_0x3d8362(0x286)]>_0x564616[_0x3d8362(0x286)]?-0x1:_0x564616['date']>_0x127310[_0x3d8362(0x286)]?0x1:0x0);let _0x44f824=0x1,_0x458493=[],_0x1b8c89=0x0;_0x5d859a['slice']()[_0x3d8362(0x2c3)]()['forEach']((_0x5810ad,_0x687bb8)=>{const _0x4c47ca=_0x3d8362;if(_0xaa1994[_0x1b8c89]){if(_0x5d859a[_0x5d859a[_0x4c47ca(0x33c)]-_0x687bb8]&&_0xaa1994[_0x1b8c89][_0x4c47ca(0x286)]==_0x5d859a[_0x5d859a[_0x4c47ca(0x33c)]-_0x687bb8][_0x4c47ca(0x286)]){if(_0x687bb8<_0x5d859a[_0x4c47ca(0x33c)]){let _0x34eefd=0x0,_0x248281=0x0;_0x5d859a[_0x5d859a[_0x4c47ca(0x33c)]-_0x687bb8][_0x4c47ca(0x318)][_0x4c47ca(0x29d)](_0x2a698c=>{const _0x648ad8=_0x4c47ca;_0x248281+=_0x2a698c[_0x648ad8(0x2ce)]*_0x2a698c[_0x648ad8(0x2ca)];}),_0xaa1994[_0x1b8c89][_0x4c47ca(0x280)]['forEach'](_0x33b8f0=>{const _0x5ac7ca=_0x4c47ca;_0x34eefd+=_0x33b8f0[_0x5ac7ca(0x2ce)]*_0x33b8f0[_0x5ac7ca(0x2ca)];}),_0x44f824*=_0x34eefd/(_0x248281-_0x34eefd)+0x1;}_0x1b8c89++;}}let _0x4572ff=0x0;_0x5810ad['coins'][_0x4c47ca(0x29d)](_0x152f95=>{const _0x2288e4=_0x4c47ca;_0x4572ff+=_0x152f95['number']*_0x152f95[_0x2288e4(0x2ca)];}),_0x458493[_0x5d859a['length']-_0x687bb8-0x1]=_0x4572ff*(_0x44f824-0x1);});let _0x1dfc3=[];_0xaa1994=[...config[_0x3d8362(0x319)]]||[];let _0x418d47=0x0;_0x1b8c89=0x0,_0x5d859a[_0x3d8362(0x29d)]((_0x31d14a,_0x32dce1)=>{const _0x6ffd47=_0x3d8362;if(_0xaa1994[_0x1b8c89]){const _0x41dc20=fns[_0x6ffd47(0x221)](_0xaa1994[_0x1b8c89][_0x6ffd47(0x286)],_0x6ffd47(0x33a),new Date()),_0x337e25=fns[_0x6ffd47(0x221)](_0x31d14a[_0x6ffd47(0x286)],_0x6ffd47(0x33a),new Date());if(fns['isEqual'](_0x41dc20,_0x337e25)){let _0xd4579a=0x0;_0xaa1994[_0x1b8c89][_0x6ffd47(0x280)][_0x6ffd47(0x29d)](_0x543fd4=>{const _0x29d616=_0x6ffd47;!_0x1dfc3[_0x543fd4[_0x29d616(0x27c)]]?_0x1dfc3[_0x543fd4[_0x29d616(0x27c)]]=_0x543fd4[_0x29d616(0x2ce)]:(_0xd4579a=_0x1dfc3[_0x543fd4[_0x29d616(0x27c)]],_0x1dfc3[_0x543fd4[_0x29d616(0x27c)]]+=_0x543fd4[_0x29d616(0x2ce)]);const _0x8abddc=_0x31d14a[_0x29d616(0x318)][_0x29d616(0x261)](_0x5b75aa=>_0x5b75aa[_0x29d616(0x27c)]==_0x543fd4[_0x29d616(0x27c)]);(!_0x8abddc||_0x8abddc[_0x29d616(0x2ce)]==0x0)&&(_0x418d47+=(-_0x543fd4[_0x29d616(0x2ce)]-_0xd4579a)*_0x543fd4['price']);}),_0x1b8c89++;}}_0x31d14a[_0x6ffd47(0x318)]['forEach']((_0x3f9649,_0x2008f2)=>{const _0x1e22b8=_0x6ffd47;_0x1dfc3[_0x3f9649[_0x1e22b8(0x27c)]]&&(_0x3f9649['initial']=_0x1dfc3[_0x3f9649[_0x1e22b8(0x27c)]]);}),_0x61bc0c['push']({'date':_0x31d14a[_0x6ffd47(0x286)],'eur':_0x31d14a[_0x6ffd47(0x2e9)],'usd':_0x31d14a[_0x6ffd47(0x20e)],'offset':_0x458493[_0x32dce1],'netoffset':_0x418d47,'coins':_0x31d14a['coins']});});}return _0x61bc0c;}function emitPerformance(_0xf17c36){const _0x4bd15e=_0x22bc00;_0xf17c36[_0x4bd15e(0x33c)]!==0x0?(proxyEmit(_0x4bd15e(0x2e4),_0xf17c36),lastPerformanceEmitted=getDate()):proxyEmit(_0x4bd15e(0x2e4),[]);}function getPerf(_0x5312f1,_0x4413f5){const _0x2a0b37=_0x22bc00;let _0x1efd28=0x0,_0x3bb517=0x0,_0x16250c=0x0;_0x5312f1['coins'][_0x2a0b37(0x29d)](_0x2d86bc=>{const _0x116347=_0x2a0b37;_0x1efd28+=_0x2d86bc[_0x116347(0x2ce)]*_0x2d86bc[_0x116347(0x2ca)];});_0x4413f5&&(_0x1efd28+=_0x5312f1[_0x2a0b37(0x321)]);if(config['basecoin']===_0x2a0b37(0x28b)||config[_0x2a0b37(0x2c7)]==='ETH')_0x3bb517=_0x1efd28*_0x5312f1['eur'],_0x16250c=_0x1efd28*_0x5312f1[_0x2a0b37(0x20e)];else{if(config[_0x2a0b37(0x2c7)]===_0x2a0b37(0x29b)||config[_0x2a0b37(0x2c7)]==='USDT'||config[_0x2a0b37(0x2c7)]===_0x2a0b37(0x23c))_0x3bb517=_0x1efd28*_0x5312f1['eur']/_0x5312f1[_0x2a0b37(0x20e)],_0x16250c=_0x1efd28;else config['basecoin']===_0x2a0b37(0x21d)&&(_0x3bb517=_0x1efd28,_0x16250c=_0x1efd28*_0x5312f1[_0x2a0b37(0x20e)]/_0x5312f1[_0x2a0b37(0x2e9)]);}return[_0x1efd28,_0x3bb517,_0x16250c];}function getKPIs(_0x22ddd6,_0x1132b3=_0x22bc00(0x21d)){const _0x5b0d59=_0x22bc00,_0x15e2e4=config[_0x5b0d59(0x2c7)],_0x267b3f=lastBalances,_0x4675f3=currentCoins,_0x54248d=getNormalizedPerformance(),_0xb739ed=_0x22ddd6===_0x5b0d59(0x2c7)?_0x15e2e4:_0x22ddd6===_0x5b0d59(0x1f4)||_0x22ddd6===_0x5b0d59(0x25b)?_0x1132b3:_0x5b0d59(0x2c6)+_0x15e2e4,_0x548778=_0x22ddd6===_0x5b0d59(0x201)?'Net\x20effect':_0x22ddd6==='net-fiat'?_0x5b0d59(0x322):_0xb739ed+_0x5b0d59(0x21b),_0x182d95=_0x22ddd6==='net-basecoin'||_0x22ddd6===_0x5b0d59(0x25b)?_0x5b0d59(0x322):_0xb739ed+'\x20change';let _0x41d3b8=0x0;_0x4675f3['forEach'](_0x5b08aa=>{const _0x3657c0=_0x5b0d59;_0x41d3b8+=_0x5b08aa[_0x3657c0(0x2ce)]*_0x5b08aa['last'];});if(_0x22ddd6===_0x5b0d59(0x1f4)||_0x22ddd6===_0x5b0d59(0x25b)){if(_0x15e2e4===_0x5b0d59(0x28b)||_0x15e2e4===_0x5b0d59(0x28a))_0x41d3b8=_0x41d3b8*(_0x1132b3===_0x5b0d59(0x21d)?_0x267b3f[_0x5b0d59(0x2e9)]:_0x267b3f[_0x5b0d59(0x20e)]);else{if(_0x15e2e4==='BUSD'||_0x15e2e4===_0x5b0d59(0x270)||_0x15e2e4===_0x5b0d59(0x23c))_0x41d3b8=_0x41d3b8*(_0x1132b3===_0x5b0d59(0x21d)?_0x267b3f['eur']/_0x267b3f['usd']:0x1);else _0x15e2e4===_0x5b0d59(0x21d)&&(_0x41d3b8=_0x41d3b8*(_0x1132b3===_0x5b0d59(0x21d)?0x1:_0x267b3f[_0x5b0d59(0x20e)]/_0x267b3f[_0x5b0d59(0x2e9)]));}}let _0x5904d5;if(_0x41d3b8!==0x0){if(_0x22ddd6===_0x5b0d59(0x2c7))_0x5904d5=(_0x41d3b8/startingBalances[_0x5b0d59(0x2c7)]-0x1)*0x64;else{if(_0x1132b3===_0x5b0d59(0x21d))_0x5904d5=(_0x41d3b8/startingBalances['eur']-0x1)*0x64;else _0x5904d5=(_0x41d3b8/startingBalances[_0x5b0d59(0x20e)]-0x1)*0x64;}let _0x2e299a=0x0;if(startingBalances[_0x5b0d59(0x318)])_0x4675f3[_0x5b0d59(0x29d)](_0x226a9d=>{const _0x8fab45=_0x5b0d59;let _0x14edd7=startingBalances[_0x8fab45(0x318)][_0x8fab45(0x261)](_0x52bb38=>_0x52bb38[_0x8fab45(0x27c)]===_0x226a9d[_0x8fab45(0x27c)]);if(_0x14edd7&&_0x14edd7[_0x8fab45(0x27c)]&&_0x226a9d[_0x8fab45(0x2ce)]!==0x0)_0x2e299a+=_0x14edd7[_0x8fab45(0x2ce)]*_0x226a9d[_0x8fab45(0x31c)];});let _0x3feaf1=0x0;if(_0x54248d[_0x5b0d59(0x33c)]!==0x0){let _0x30c364=_0x54248d[_0x54248d[_0x5b0d59(0x33c)]-0x1];_0x3feaf1=_0x30c364['netoffset'];}_0x2e299a-=_0x3feaf1;_0x22ddd6===_0x5b0d59(0x201)&&(_0x5904d5=(_0x41d3b8-_0x2e299a)/startingBalances[_0x5b0d59(0x2c7)]*0x64,_0x41d3b8=_0x41d3b8-_0x2e299a);if(_0x22ddd6==='net-fiat'){let _0x1792f2=_0x1132b3===_0x5b0d59(0x21d)?startingBalances[_0x5b0d59(0x2e9)]:startingBalances[_0x5b0d59(0x20e)];if(_0x15e2e4==='BTC'||_0x15e2e4===_0x5b0d59(0x28a))_0x2e299a=_0x1132b3===_0x5b0d59(0x21d)?_0x2e299a*_0x267b3f[_0x5b0d59(0x2e9)]:_0x2e299a*_0x267b3f[_0x5b0d59(0x20e)];else{if(_0x15e2e4===_0x5b0d59(0x29b)||_0x15e2e4==='USDT'||_0x15e2e4===_0x5b0d59(0x23c))_0x2e299a=_0x1132b3===_0x5b0d59(0x21d)?_0x2e299a*_0x267b3f[_0x5b0d59(0x2e9)]/_0x267b3f[_0x5b0d59(0x20e)]:_0x2e299a;else _0x15e2e4==='EUR'&&(_0x2e299a=_0x1132b3===_0x5b0d59(0x21d)?_0x2e299a:_0x2e299a*_0x267b3f[_0x5b0d59(0x20e)]/_0x267b3f[_0x5b0d59(0x2e9)]);}_0x5904d5=(_0x41d3b8-_0x2e299a)/_0x1792f2*0x64,_0x41d3b8=_0x41d3b8-_0x2e299a;}if(_0x5904d5){if(_0x5904d5<0x64)_0x5904d5=_0x5904d5[_0x5b0d59(0x2b6)](0x2);else{if(_0x5904d5<0x3e8)_0x5904d5=_0x5904d5['toFixed'](0x1);else _0x5904d5=_0x5904d5[_0x5b0d59(0x2b6)](0x0);}}else _0x5904d5=Number('0')[_0x5b0d59(0x2b6)](0x2);if(_0x41d3b8){if(Math[_0x5b0d59(0x2e1)](_0x41d3b8)<0.000001)_0x41d3b8=_0x41d3b8[_0x5b0d59(0x2b6)](0x2);else{if(Math[_0x5b0d59(0x2e1)](_0x41d3b8)<0.1)_0x41d3b8=_0x41d3b8[_0x5b0d59(0x2b6)](0x6);else{if(Math['abs'](_0x41d3b8)<0x1)_0x41d3b8=_0x41d3b8[_0x5b0d59(0x2b6)](0x5);else{if(Math[_0x5b0d59(0x2e1)](_0x41d3b8)<0xa)_0x41d3b8=_0x41d3b8['toFixed'](0x4);else{if(Math[_0x5b0d59(0x2e1)](_0x41d3b8)<0x64)_0x41d3b8=_0x41d3b8['toFixed'](0x3);else{if(Math[_0x5b0d59(0x2e1)](_0x41d3b8)<0x3e8)_0x41d3b8=_0x41d3b8[_0x5b0d59(0x2b6)](0x2);else _0x41d3b8=_0x41d3b8[_0x5b0d59(0x2b6)](0x2);}}}}}}else _0x41d3b8=Number('0')[_0x5b0d59(0x2b6)](0x2);}else _0x5904d5=Number('0')[_0x5b0d59(0x2b6)](0x2);return{'value':_0x41d3b8,'change':_0x5904d5,'leftTxt':_0x548778,'rightTxt':_0x182d95};}async function getStartingBalances(_0x2f7ab3,_0x25d39e=!![]){const _0x39c6f1=_0x22bc00;if(_0x2f7ab3[_0x39c6f1(0x33c)]!==0x0){const [_0x780a72,_0x307257,_0x31c519]=getPerf(_0x2f7ab3[0x0],!![]);let _0x207924=[];config[_0x39c6f1(0x1dc)][_0x39c6f1(0x29d)](_0x1ef297=>{const _0x55e09f=_0x39c6f1;let _0x2a5d12=0x0,_0x5ac9c8;config[_0x55e09f(0x319)]['forEach'](_0x4ca5aa=>{const _0x36a882=_0x55e09f;let _0x14cbf4=_0x4ca5aa[_0x36a882(0x280)]['find'](_0x268b49=>_0x268b49[_0x36a882(0x27c)]==_0x1ef297[_0x36a882(0x27c)]);if(_0x14cbf4){_0x2a5d12+=_0x14cbf4[_0x36a882(0x2ce)];if(!_0x5ac9c8)_0x5ac9c8=_0x14cbf4[_0x36a882(0x2ca)];}}),_0x207924[_0x55e09f(0x271)]({'coin':_0x1ef297['coin'],'number':_0x2a5d12,'initialprice':_0x5ac9c8});});const _0x602c6b={'basecoin':_0x780a72,'eur':_0x307257,'usd':_0x31c519,'coins':_0x207924};if(_0x25d39e)proxyEmit(_0x39c6f1(0x28e),_0x602c6b);startingBalances=_0x602c6b;}}function headlessMode(_0xc5a909){const _0x192063=_0x22bc00;let _0x319117=_0xc5a909[_0x192063(0x1dc)],_0x24cf1b=_0xc5a909['threshold'],_0x2f2ab8=[];for(let _0x65015 of _0x319117){if(_0x65015[_0x192063(0x27c)]!=config[_0x192063(0x2c7)]){if(_0x65015[_0x192063(0x2bd)]>=_0x24cf1b/0x64){if(_0x65015[_0x192063(0x1da)])_0x2f2ab8[_0x192063(0x271)](_0x65015);}else{if(_0x65015['delta']<=-_0x24cf1b/0x64){if(_0x65015[_0x192063(0x1da)])_0x2f2ab8['push'](_0x65015);}}}}_0x2f2ab8['length']>0x0&&placeOrder(_0x2f2ab8);}function notifyBalance(_0xa2f69f){const _0x5112fe=_0x22bc00;let _0x475902=_0xa2f69f[_0x5112fe(0x1dc)],_0x1446e1=_0xa2f69f[_0x5112fe(0x30f)],_0x1b4bc2=[];for(let _0x46993f of _0x475902){if(_0x46993f[_0x5112fe(0x27c)]!=config['basecoin']){if(_0x46993f[_0x5112fe(0x2bd)]>=_0x1446e1/0x64){if(_0x46993f['valid'])_0x1b4bc2[_0x5112fe(0x271)](_0x46993f);}else{if(_0x46993f[_0x5112fe(0x2bd)]<=-_0x1446e1/0x64){if(_0x46993f[_0x5112fe(0x1da)])_0x1b4bc2[_0x5112fe(0x271)](_0x46993f);}}}}if(_0x1b4bc2[_0x5112fe(0x33c)]>0x0){let _0x45ea7c=_0x1b4bc2['map'](_0x5796a8=>_0x5796a8['coin']);_0x45ea7c['sort']();let _0x3d7801=_0x45ea7c['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x5112fe(0x235),_0x5112fe(0x25f));lastCoinsToBalance=_0x3d7801;}}function symbolToCoin(_0x25f54c){const _0x3b872e=_0x22bc00;let _0x437b14;if(_0x25f54c[_0x3b872e(0x257)]('/'+config['basecoin']))_0x437b14=_0x25f54c[_0x3b872e(0x325)]('/'+config[_0x3b872e(0x2c7)],'');if(_0x25f54c[_0x3b872e(0x257)](config[_0x3b872e(0x2c7)]+'/'))_0x437b14=_0x25f54c[_0x3b872e(0x325)](config[_0x3b872e(0x2c7)]+'/','');return _0x437b14;}async function unlockOrders(){const _0x39a787=_0x22bc00;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x39a787(0x2dd)](_0x39a787(0x32d)),lockOrders=ORDERS[_0x39a787(0x250)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x546bb1=await getCoins();[currentCoins,currentCoinsAll]=_0x546bb1,validateOrdersState=_0x39a787(0x1e6),persistOpenOrders([]),lockOrders=ORDERS[_0x39a787(0x307)],logger[_0x39a787(0x2dd)](_0x39a787(0x1e8));}}async function validateOrders(_0xf0abc4){const _0x367aa2=_0x22bc00;if(_0xf0abc4)validateOrdersState=_0xf0abc4;logger[_0x367aa2(0x2dd)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x367aa2(0x343)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x367aa2(0x2a2):_0x367aa2(0x211)));let _0x5a0018=[],_0x82c604=config['ordertype']==_0x367aa2(0x2ef)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x367aa2(0x1f7)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x367aa2(0x212)])return;logger[_0x367aa2(0x2dd)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x367aa2(0x29d)](_0x41fd14=>{const _0x12b311=_0x367aa2;let _0x434b79=![];_0x41fd14['filled']>0x0&&(_0x434b79=!![]),_0x5a0018['push'](_0x434b79),_0x434b79&&config['ordertype']!='market'&&logHistory(_0x12b311(0x205),_0x12b311(0x291)+_0x41fd14[_0x12b311(0x2fb)]+'\x20'+_0x41fd14[_0x12b311(0x238)]+'\x20#'+formatResult(_0x41fd14[_0x12b311(0x273)],0x8)+'\x20@'+formatResult(_0x41fd14[_0x12b311(0x2ca)],0x8));}),_0x5a0018[_0x367aa2(0x29d)]((_0x115e3c,_0x2b4b4e)=>{const _0x9f802c=_0x367aa2;if(_0x115e3c)lastOrders[_0x9f802c(0x2e5)](_0x2b4b4e,0x1);}),persistOpenOrders(lastOrders);const _0x30fe72=coolingDown?_0x367aa2(0x1d5):'balancing\x20resumed';if(validateOrdersState==_0x367aa2(0x1e6)){validateOrdersState=_0x367aa2(0x31a);if(_0x5a0018[_0x367aa2(0x257)](![])){if(config[_0x367aa2(0x258)]==_0x367aa2(0x2ef)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x367aa2(0x31a)){if(_0x5a0018[_0x367aa2(0x257)](![])){}else{if(allOrdersPlaced){if(config[_0x367aa2(0x258)]==_0x367aa2(0x2ef)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x367aa2(0x1d1))_0x5a0018[_0x367aa2(0x257)](![])&&(config[_0x367aa2(0x258)]=='market'?logHistory('success',_0x367aa2(0x340)+Math[_0x367aa2(0x2d0)](_0x82c604*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x30fe72):(await cancelOrders(),logHistory(_0x367aa2(0x2fe),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x82c604*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x30fe72))),await unlockOrders();else{if(validateOrdersState==_0x367aa2(0x213)){if(config[_0x367aa2(0x258)]!=_0x367aa2(0x2ef))logHistory(_0x367aa2(0x2fe),_0x367aa2(0x226)+_0x30fe72);await unlockOrders();}}}}}async function cancelOrders(){const _0x2a3635=_0x22bc00;lastOrders[_0x2a3635(0x29d)](async _0x1847bc=>{const _0xab9892=_0x2a3635;try{const _0x1fcd04=await exchange[_0xab9892(0x232)](_0x1847bc[_0xab9892(0x222)],_0x1847bc['symbol']);}catch(_0x3778d2){if(_0x3778d2['toString']()[_0xab9892(0x257)]('OrderNotFound')){}else await handleError(_0x3778d2,_0xab9892(0x1ee));}});}async function initCoinResults(){const _0x37d941=_0x22bc00;let _0x3fafcd=[];config['portfolio'][_0x37d941(0x29d)](_0x121020=>{const _0x3755af=_0x37d941;if(!_0x121020[_0x3755af(0x29c)]&&_0x121020[_0x3755af(0x27c)]!=config[_0x3755af(0x2c7)]){let _0x14bf9d=dbCoinResults[_0x3755af(0x336)](_0x3755af(0x318))[_0x3755af(0x261)]({'coin':_0x121020['coin']})['value']();if(!_0x14bf9d){const _0x521928=currentCoins['find'](_0x15fea8=>_0x15fea8[_0x3755af(0x27c)]==_0x121020['coin']),_0x30c18c=global[_0x3755af(0x316)][noslash(_0x121020[_0x3755af(0x2fb)])];let _0x47aa7e=_0x521928?_0x521928[_0x3755af(0x2ce)]:null,_0x3aa820=_0x121020[_0x3755af(0x2c3)]?0x1/_0x30c18c:_0x30c18c,_0x596492;config[_0x3755af(0x319)][_0x3755af(0x29d)](_0x20c549=>{const _0x3a4085=_0x3755af;!_0x596492&&(_0x596492=_0x20c549['changes'][_0x3a4085(0x261)](_0x2bc121=>_0x2bc121[_0x3a4085(0x27c)]==_0x121020[_0x3a4085(0x27c)]),_0x596492&&(_0x47aa7e=_0x596492[_0x3a4085(0x2ce)],_0x3aa820=_0x596492['price']));}),_0x3fafcd[_0x3755af(0x271)]({'coin':_0x121020[_0x3755af(0x27c)],'number':_0x47aa7e,'price':_0x3aa820});}}}),_0x3fafcd[_0x37d941(0x29d)](_0x173c74=>{const _0x5fef26=_0x37d941,_0x4766d7={'coin':_0x173c74[_0x5fef26(0x27c)],'number':_0x173c74[_0x5fef26(0x2ce)],'breakeven':_0x173c74[_0x5fef26(0x2ca)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5fef26(0x336)]('coins')[_0x5fef26(0x271)](_0x4766d7)[_0x5fef26(0x262)]();});}async function updateCoinResults(_0x2c8c04,_0x5ee475=![]){const _0x24b9cc=_0x22bc00;let _0x5ef93c,_0xfe9a70,_0x262cdf,_0x534de1,_0x15a78a,_0x2a6372,_0x3965ce=dbCoinResults[_0x24b9cc(0x336)]('coins')[_0x24b9cc(0x261)]({'coin':_0x2c8c04[_0x24b9cc(0x27c)]})[_0x24b9cc(0x206)]();!_0x3965ce&&await initCoinResults();_0x2c8c04[_0x24b9cc(0x2c3)]&&(_0x2a6372={'filled':_0x2c8c04[_0x24b9cc(0x273)]*_0x2c8c04[_0x24b9cc(0x2ca)],'amount':_0x2c8c04[_0x24b9cc(0x273)]*_0x2c8c04[_0x24b9cc(0x2ca)],'side':_0x2c8c04[_0x24b9cc(0x238)]==_0x24b9cc(0x313)?'buy':_0x24b9cc(0x313),'price':0x1/_0x2c8c04[_0x24b9cc(0x2ca)]},_0x2c8c04={..._0x2c8c04,..._0x2a6372});_0x5ee475?_0xfe9a70=_0x2c8c04[_0x24b9cc(0x238)]==_0x24b9cc(0x2cc)?_0x3965ce[_0x24b9cc(0x2ce)]+_0x2c8c04['filled']:_0x3965ce[_0x24b9cc(0x2ce)]-_0x2c8c04[_0x24b9cc(0x273)]:_0xfe9a70=await getCoinNumber(_0x2c8c04[_0x24b9cc(0x27c)]);if(_0x2c8c04[_0x24b9cc(0x337)]&&_0x2c8c04[_0x24b9cc(0x337)]['currency']==config[_0x24b9cc(0x2c7)])_0x5ef93c=_0x2c8c04['fee'][_0x24b9cc(0x278)];else{if(_0x2c8c04[_0x24b9cc(0x337)]&&_0x2c8c04[_0x24b9cc(0x337)][_0x24b9cc(0x1fa)]==_0x24b9cc(0x329)&&!_0x5ee475)_0x5ef93c=_0x2c8c04['fee']['cost']*global[_0x24b9cc(0x316)]['BNB'+config[_0x24b9cc(0x2c7)]];else _0x5ef93c=defaultFee*_0x2c8c04[_0x24b9cc(0x273)]*_0x2c8c04['price'];}_0x2c8c04[_0x24b9cc(0x238)]==_0x24b9cc(0x2cc)?(_0x262cdf=_0xfe9a70!=0x0?(_0x3965ce['breakeven']*_0x3965ce['number']+_0x2c8c04[_0x24b9cc(0x2ca)]*(_0xfe9a70-_0x3965ce[_0x24b9cc(0x2ce)])+_0x5ef93c)/_0xfe9a70:0x0,_0x534de1=_0x3965ce['realized']):(_0x262cdf=_0xfe9a70!=0x0?(_0x3965ce[_0x24b9cc(0x298)]*_0x3965ce[_0x24b9cc(0x2ce)]-_0x2c8c04[_0x24b9cc(0x2ca)]*(_0x3965ce[_0x24b9cc(0x2ce)]-_0xfe9a70)+_0x5ef93c)/_0xfe9a70:0x0,_0x534de1=_0x3965ce['realized']+(_0x2c8c04['price']-_0x3965ce[_0x24b9cc(0x298)])*_0x2c8c04[_0x24b9cc(0x273)]);_0x15a78a=(_0x2c8c04[_0x24b9cc(0x2ca)]-_0x262cdf-_0x5ef93c/_0x2c8c04[_0x24b9cc(0x273)])*_0xfe9a70;let _0x6d402a={'coin':_0x2c8c04[_0x24b9cc(0x27c)],'number':_0xfe9a70,'breakeven':formatResult(_0x262cdf,0x8),'realized':formatResult(_0x534de1,0x8),'unrealized':formatResult(_0x15a78a,0x8),'fees':formatResult(_0x3965ce[_0x24b9cc(0x315)]+_0x5ef93c,0x8),'sells':_0x2c8c04[_0x24b9cc(0x238)]=='sell'?_0x3965ce['sells']+0x1:_0x3965ce[_0x24b9cc(0x24e)],'buys':_0x2c8c04['side']==_0x24b9cc(0x2cc)?_0x3965ce['buys']+0x1:_0x3965ce[_0x24b9cc(0x227)]};dbCoinResults['get'](_0x24b9cc(0x318))[_0x24b9cc(0x261)]({'coin':_0x2c8c04['coin']})[_0x24b9cc(0x2a0)](_0x6d402a)[_0x24b9cc(0x262)]();if(!_0x5ee475){if(_0x2c8c04[_0x24b9cc(0x337)]&&_0x2c8c04['fee'][_0x24b9cc(0x1fa)]==_0x24b9cc(0x329)){const _0x46f8a0=currentCoins[_0x24b9cc(0x261)](_0x1f2bd8=>_0x1f2bd8[_0x24b9cc(0x27c)]=='BNB');if(_0x46f8a0){let _0x499bf4=dbCoinResults[_0x24b9cc(0x336)](_0x24b9cc(0x318))[_0x24b9cc(0x261)]({'coin':'BNB'})[_0x24b9cc(0x206)]();_0x6d402a={..._0x499bf4,'number':_0x46f8a0[_0x24b9cc(0x2ce)]},dbCoinResults['get'](_0x24b9cc(0x318))[_0x24b9cc(0x261)]({'coin':_0x24b9cc(0x329)})[_0x24b9cc(0x2a0)](_0x6d402a)[_0x24b9cc(0x262)]();}}}}async function placeOrder(_0x533f3e){const _0xa4a1ec=_0x22bc00,_0xba98d=config[_0xa4a1ec(0x258)]==_0xa4a1ec(0x2ef)?_0xa4a1ec(0x2ef):_0xa4a1ec(0x305);if(lockOrders==ORDERS[_0xa4a1ec(0x307)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xa4a1ec(0x212)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x53ff4d of _0x533f3e){let _0x5482cc,_0x4b3f54,_0x3412cb,_0x48cc51,_0x5f51b1,_0x52b3b7=_0x53ff4d['symbol'];try{const _0x4e791c=await exchange[_0xa4a1ec(0x20b)](_0x52b3b7);_0x5482cc=_0x53ff4d['reverse']?0x1/_0x53ff4d[_0xa4a1ec(0x31c)]:_0x53ff4d['last'],_0x4b3f54=_0x4e791c[_0xa4a1ec(0x2e0)],_0x3412cb=_0x4e791c[_0xa4a1ec(0x20c)];_0x53ff4d[_0xa4a1ec(0x2c3)]?(_0x48cc51=_0x53ff4d[_0xa4a1ec(0x238)]=='buy'?_0xa4a1ec(0x313):_0xa4a1ec(0x2cc),_0x5f51b1=Math[_0xa4a1ec(0x2e1)](_0x53ff4d[_0xa4a1ec(0x204)])/_0x5482cc):(_0x48cc51=_0x53ff4d[_0xa4a1ec(0x238)],_0x5f51b1=Math['abs'](_0x53ff4d[_0xa4a1ec(0x204)]));_0xba98d==_0xa4a1ec(0x305)&&(config[_0xa4a1ec(0x258)]==_0xa4a1ec(0x1e0)&&(_0x5482cc=_0x48cc51=='buy'?_0x4b3f54:_0x3412cb),config[_0xa4a1ec(0x258)]==_0xa4a1ec(0x20a)&&(_0x5482cc=_0x48cc51==_0xa4a1ec(0x2cc)?_0x3412cb:_0x4b3f54));_0x5f51b1=formatResult(_0x5f51b1,0x8),_0x5482cc=formatResult(_0x5482cc,0x8);const _0x56f556=_0x48cc51==_0xa4a1ec(0x313)?config['emojisell']?String[_0xa4a1ec(0x25a)]('0x'+config[_0xa4a1ec(0x256)])+'\x20':'':config[_0xa4a1ec(0x2a6)]?String[_0xa4a1ec(0x25a)]('0x'+config[_0xa4a1ec(0x2a6)])+'\x20':'',_0x1b7812=_0xba98d==_0xa4a1ec(0x2ef)?_0xa4a1ec(0x27e):config[_0xa4a1ec(0x258)]=='limit-high'?_0xa4a1ec(0x317):_0xa4a1ec(0x2d2),_0x1b2cfd=new Date()[_0xa4a1ec(0x1ff)]()[_0xa4a1ec(0x1e3)]()[_0xa4a1ec(0x2eb)](-0x6)+'-'+Math[_0xa4a1ec(0x301)]()[_0xa4a1ec(0x1e3)]()[_0xa4a1ec(0x2eb)](-0x6);lastOrders[_0xa4a1ec(0x271)]({'customId':_0x1b2cfd,'symbol':_0x52b3b7,'coin':_0x53ff4d[_0xa4a1ec(0x27c)],'side':_0x48cc51,'reverse':_0x53ff4d[_0xa4a1ec(0x2c3)],'filled':0x0});if(_0xba98d==_0xa4a1ec(0x2ef))logHistory(_0xa4a1ec(0x205),''+_0x56f556+_0x1b7812+'\x20order:\x20'+_0x52b3b7+'\x20'+_0x48cc51+'\x20#'+formatResult(_0x5f51b1,0x8)+'\x20@'+formatResult(_0x5482cc,0x8));else logHistory(_0xa4a1ec(0x205),''+_0x56f556+_0x1b7812+_0xa4a1ec(0x281)+_0x52b3b7+'\x20'+_0x48cc51+'\x20#'+formatResult(_0x5f51b1,0x8)+'\x20@'+formatResult(_0x5482cc,0x8));const _0x3c8c8d=await exchange[_0xa4a1ec(0x2d8)](_0x52b3b7,_0xba98d,_0x48cc51,_0x5f51b1,_0x5482cc,{'clientOrderId':_0x1b2cfd}),_0x12e025=lastOrders['length']-0x1;_0x12e025>=0x0&&lastOrders[_0x12e025][_0xa4a1ec(0x2f3)]==_0x1b2cfd&&(lastOrders[_0x12e025]={...lastOrders[_0x12e025],'orderId':_0x3c8c8d['id'],'amount':_0x3c8c8d['amount'],'price':_0x3c8c8d[_0xa4a1ec(0x2ca)],'fee':_0x3c8c8d[_0xa4a1ec(0x337)]});if(config[_0xa4a1ec(0x252)]!=0x0){let _0x5204aa=null;if(cooldownTracker[_0xa4a1ec(0x33c)]==config['cooldown']-0x1)_0x5204aa=cooldownTracker[_0xa4a1ec(0x1d3)]();const _0x25ced1=getTimeStamp();cooldownTracker[_0xa4a1ec(0x271)](_0x25ced1);if(_0x5204aa){const _0x2be0b0=fns[_0xa4a1ec(0x339)](new Date(_0x25ced1),new Date(_0x5204aa));if(_0x2be0b0<cooldownInterval){logHistory('error',_0xa4a1ec(0x2bc)+config[_0xa4a1ec(0x252)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xa4a1ec(0x285)+cooldownPeriod/(0xe10*0x3e8)+_0xa4a1ec(0x21a)),coolingDown=!![];break;}}}}catch(_0x115923){if(_0x115923[_0xa4a1ec(0x1e3)]()[_0xa4a1ec(0x257)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0xa4a1ec(0x27b)](_0x23b6e5=>_0x23b6e5[_0xa4a1ec(0x2fb)]!=_0x52b3b7),await pauseBot(_0xa4a1ec(0x296)+_0x52b3b7);else _0x115923[_0xa4a1ec(0x1e3)]()['includes'](_0xa4a1ec(0x33e))?(lastOrders=lastOrders[_0xa4a1ec(0x27b)](_0x40a5de=>_0x40a5de[_0xa4a1ec(0x2fb)]!=_0x52b3b7),await pauseBot(_0xa4a1ec(0x2c9)+_0x52b3b7)):(lastOrders=lastOrders[_0xa4a1ec(0x27b)](_0x1f3791=>_0x1f3791['symbol']!=_0x52b3b7),await handleError(_0x115923,_0xa4a1ec(0x26d),_0x52b3b7));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xa4a1ec(0x33c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x123ea4=config[_0xa4a1ec(0x258)]==_0xa4a1ec(0x2ef)?validateOrderTimeout*0x3c*0x3e8:config[_0xa4a1ec(0x1f7)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x10a02a=_0xa4a1ec;validateOrders(_0x10a02a(0x1d1));},_0x123ea4);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xa4a1ec(0x2fe),_0xa4a1ec(0x2ba)));}else{if(coolingDown)!config[_0xa4a1ec(0x302)]&&logHistory('error',_0xa4a1ec(0x2e7));else lockOrders!=ORDERS[_0xa4a1ec(0x307)]&&(!config[_0xa4a1ec(0x302)]&&(config[_0xa4a1ec(0x258)]==_0xa4a1ec(0x2ef)?logHistory(_0xa4a1ec(0x306),_0xa4a1ec(0x2ee)):logHistory(_0xa4a1ec(0x306),_0xa4a1ec(0x209))));}}function persistOpenOrders(_0x104136){const _0x4e3095=_0x22bc00,_0x4ca385={...config,'openOrders':_0x104136};let _0x58473f=dbConfig[_0x4e3095(0x336)](_0x4e3095(0x2ed))['find']({'botID':botID})[_0x4e3095(0x206)]();_0x58473f&&dbConfig[_0x4e3095(0x336)](_0x4e3095(0x2ed))[_0x4e3095(0x261)]({'botID':botID})[_0x4e3095(0x2a0)](_0x4ca385)[_0x4e3095(0x262)]();}function restoreOrders(){const _0x1c4c4a=_0x22bc00;let _0x357b0f;config[_0x1c4c4a(0x32e)]&&allOpenOrders['forEach'](_0x5ac17e=>{const _0x3f09b4=_0x1c4c4a,_0x3b2731=config[_0x3f09b4(0x32e)][_0x3f09b4(0x261)](_0x516242=>_0x516242[_0x3f09b4(0x222)]==_0x5ac17e['id']);_0x3b2731&&(lastOrders[_0x3f09b4(0x271)](_0x3b2731),_0x357b0f=_0x5ac17e[_0x3f09b4(0x28d)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x1c4c4a(0x212)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5c736f=new Date()[_0x1c4c4a(0x1ff)](),_0x2aa7cd=config[_0x1c4c4a(0x258)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1c4c4a(0x1f7)]*0x3c*0x3e8;if(_0x357b0f+_0x2aa7cd>_0x5c736f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36a8e0=_0x1c4c4a;validateOrders(_0x36a8e0(0x1d1));},_0x357b0f+_0x2aa7cd-_0x5c736f);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x12f6a2=_0x22bc00;if(!coinsLoaded){process[_0x12f6a2(0x253)]({'telegrammsg':_0x12f6a2(0x225)},_0x2d2515=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xd0fa5a='';if(config[_0x12f6a2(0x202)])_0xd0fa5a=_0x12f6a2(0x2d5)+config[_0x12f6a2(0x2d7)]+_0x12f6a2(0x2a4);else _0xd0fa5a=_0x12f6a2(0x216)+botID+_0x12f6a2(0x2a4);const _0x131ce7=getKPIs(_0x12f6a2(0x2c7)),_0x50ffea=getKPIs(_0x12f6a2(0x1f4),config['fiat']),_0x41c410=getKPIs(_0x12f6a2(0x201)),_0x29a014=getKPIs('net-fiat',config[_0x12f6a2(0x1f4)]);_0xd0fa5a+=_0x12f6a2(0x32a),_0xd0fa5a+=_0x131ce7['leftTxt']+_0x12f6a2(0x2df)+_0x131ce7[_0x12f6a2(0x206)]+'\x0a',_0xd0fa5a+=_0x131ce7['rightTxt']+':\x20'+_0x131ce7[_0x12f6a2(0x2f9)]+'%\x0a',_0xd0fa5a+=_0x50ffea[_0x12f6a2(0x228)]+_0x12f6a2(0x2df)+_0x50ffea['value']+'\x0a',_0xd0fa5a+=_0x50ffea['rightTxt']+':\x20'+_0x50ffea[_0x12f6a2(0x2f9)]+'%\x0a',_0xd0fa5a+=_0x41c410[_0x12f6a2(0x228)]+':\x20'+_0x41c410[_0x12f6a2(0x206)]+'\x20('+config[_0x12f6a2(0x2c7)]+')\x0a',_0xd0fa5a+=_0x41c410['rightTxt']+':\x20'+_0x41c410['change']+'%\x20('+config[_0x12f6a2(0x2c7)]+')\x0a',_0xd0fa5a+=_0x29a014[_0x12f6a2(0x228)]+':\x20'+_0x29a014[_0x12f6a2(0x206)]+'\x20('+config[_0x12f6a2(0x1f4)]+')\x0a',_0xd0fa5a+=_0x29a014['rightTxt']+':\x20'+_0x29a014['change']+_0x12f6a2(0x21f)+config[_0x12f6a2(0x1f4)]+')\x0a',_0xd0fa5a+=_0x12f6a2(0x266),process[_0x12f6a2(0x253)]({'telegrammsg':_0xd0fa5a},_0xbd435b=>{});}async function sendPortfolioTelegram(){const _0x5ae94a=_0x22bc00;if(!coinsLoaded){process[_0x5ae94a(0x253)]({'telegrammsg':_0x5ae94a(0x225)},_0x3086df=>{});return;}let _0x202114='';if(config['showname'])_0x202114=_0x5ae94a(0x2d5)+config[_0x5ae94a(0x2d7)]+_0x5ae94a(0x23e);else _0x202114=_0x5ae94a(0x216)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x202114+=_0x5ae94a(0x32a),_0x202114+='-------------------------------\x0a',_0x202114+=_0x5ae94a(0x244),_0x202114+=_0x5ae94a(0x344),currentCoins['forEach'](_0x4d55d6=>{const _0x3aea32=_0x5ae94a;_0x202114+=_0x4d55d6[_0x3aea32(0x27c)]['padEnd'](0x7)+'|\x20'+formatPad(_0x4d55d6[_0x3aea32(0x295)],0x2,0x6)+'|\x20'+formatPad(_0x4d55d6[_0x3aea32(0x2cf)],0x2,0x6)+'|\x20'+formatPad(_0x4d55d6['delta']*0x64,0x2,0x6)+'\x0a';}),_0x202114+=_0x5ae94a(0x266),process['send']({'telegrammsg':_0x202114},_0x2e36d3=>{});}function formatPad(_0x7acd2c,_0x1acaf3,_0x1ef3d5){const _0x578adc=_0x22bc00,_0x5a6fd0=formatResultString(_0x7acd2c,_0x1acaf3);return _0x5a6fd0?_0x5a6fd0[_0x578adc(0x2c0)](_0x1ef3d5):''['padStart'](_0x1ef3d5);}function logHistory(_0xbf74d,_0x2ec1f4,_0x2fa3cc=''){const _0x20e83a=_0x22bc00;let _0x319089={'time':getTimeStamp(),'type':_0xbf74d,'event':_0x2ec1f4};dbLogs[_0x20e83a(0x336)](_0x20e83a(0x1e1))[_0x20e83a(0x271)](_0x319089)[_0x20e83a(0x262)]();if(_0x2fa3cc=='')_0x2fa3cc=_0x2ec1f4;proxyEmit('event',{'log':_0x319089,'summary':_0x2fa3cc}),process[_0x20e83a(0x253)]({'telegram':{..._0x319089,'botname':config[_0x20e83a(0x2d7)],'showname':config[_0x20e83a(0x202)]}},_0x35785f=>{}),logger[_0x20e83a(0x23f)](''+_0x319089['event']);}function emitHistory(_0x3647dd={}){const _0x2e63b8=_0x22bc00;Object[_0x2e63b8(0x2b0)](_0x3647dd)[_0x2e63b8(0x33c)]==0x0&&(_0x3647dd={'type':[_0x2e63b8(0x205),_0x2e63b8(0x27d)],'event':'','page':0x1});if(_0x3647dd[_0x2e63b8(0x2aa)][_0x2e63b8(0x257)](_0x2e63b8(0x27d)))_0x3647dd[_0x2e63b8(0x2aa)][_0x2e63b8(0x2e5)](_0x3647dd[_0x2e63b8(0x2aa)]['indexOf']('event'),0x1,_0x2e63b8(0x306),_0x2e63b8(0x235),_0x2e63b8(0x2fe));if(dbLogs[_0x2e63b8(0x330)](_0x2e63b8(0x1e1))['value']()){let _0x53af34=dbLogs['get'](_0x2e63b8(0x1e1))[_0x2e63b8(0x27b)](_0x2d5199=>{const _0x2610a3=_0x2e63b8;if(_0x3647dd[_0x2610a3(0x2aa)][_0x2610a3(0x33c)]==0x0)return![];else return _0x3647dd['type']['includes'](_0x2d5199[_0x2610a3(0x2aa)]);})[_0x2e63b8(0x27b)](_0x2bd32e=>{const _0x3aa375=_0x2e63b8;if(_0x3647dd['event']=='')return!![];else return _0x2bd32e[_0x3aa375(0x27d)][_0x3aa375(0x2fc)]()[_0x3aa375(0x257)](_0x3647dd['event'][_0x3aa375(0x2fc)]());})[_0x2e63b8(0x2af)](_0x2e63b8(0x2e6)),_0x372d10=_0x53af34[_0x2e63b8(0x206)]()[_0x2e63b8(0x33c)];_0x53af34=_0x53af34[_0x2e63b8(0x2c3)]()[_0x2e63b8(0x2eb)]((_0x3647dd[_0x2e63b8(0x335)]-0x1)*logPageSize,_0x3647dd['page']*logPageSize-0x1)[_0x2e63b8(0x2c3)]()['value'](),proxyEmit(_0x2e63b8(0x2f7),{'logs':_0x53af34,'total':_0x372d10});}else proxyEmit(_0x2e63b8(0x2f7),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4a1319){const _0x43efbb=_0x22bc00;if(dbLogs[_0x43efbb(0x330)](_0x43efbb(0x1e1))['value']()){const _0x43535d=dbLogs[_0x43efbb(0x336)](_0x43efbb(0x1e1))[_0x43efbb(0x2af)](_0x43efbb(0x2e6))[_0x43efbb(0x27b)](_0x271dae=>{const _0x3a9ded=_0x43efbb;return _0x271dae[_0x3a9ded(0x2aa)]==_0x3a9ded(0x205);})[_0x43efbb(0x206)]();dbLogs[_0x43efbb(0x336)](_0x43efbb(0x1e1))['remove']()[_0x43efbb(0x262)](),dbLogs[_0x43efbb(0x336)](_0x43efbb(0x1e1))[_0x43efbb(0x2a0)](_0x43535d)[_0x43efbb(0x262)](),emitHistory(_0x4a1319);}}async function pauseBot(_0x4609e6=''){const _0x2fb287=_0x22bc00,_0x43c3d5=new Date()['getTime']();if(!lastErrorShown||_0x43c3d5-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x43c3d5;!lastBotPause?(lastBotPause=_0x43c3d5,consecutivePauses=0x1):(_0x43c3d5-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2fb287(0x253)]({'stop':'restart'},_0x519760=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2fb287(0x1ff)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x4609e6)_0x4609e6+='\x20|\x20';logHistory(_0x2fb287(0x306),_0x4609e6+_0x2fb287(0x308)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4f31f6=_0x22bc00;process['send']({'stop':_0x4f31f6(0x21c)},_0x566a24=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1ee314,_0x5e1860){const _0x430147=_0x22bc00;if(_0x1ee314['toString']()[_0x430147(0x257)]('API-key\x20format\x20invalid'))return logHistory(_0x430147(0x306),config['exchange']+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x1ee314[_0x430147(0x1e3)]()[_0x430147(0x257)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x430147(0x306),config[_0x430147(0x2ec)]+_0x430147(0x274)),![];else{if(_0x1ee314['toString']()[_0x430147(0x257)]('AuthenticationError'))return logHistory(_0x430147(0x306),config[_0x430147(0x2ec)]+_0x430147(0x297)),logHistory(_0x430147(0x306),_0x430147(0x1e4)),![];else await handleError(_0x1ee314,_0x5e1860);}}}async function handleError(_0x80d5d2,_0x3fbb8e,_0x4b28dc=''){const _0x501682=_0x22bc00,_0x4dab4a=config[_0x501682(0x2ec)]||_0x501682(0x2c5);if(_0x80d5d2[_0x501682(0x1e3)]()[_0x501682(0x257)](_0x501682(0x288)))await pauseBot(config[_0x501682(0x2ec)]+_0x501682(0x239));else{if(_0x80d5d2[_0x501682(0x1e3)]()['includes'](_0x501682(0x269)))await pauseBot(config[_0x501682(0x2ec)]+_0x501682(0x200));else{if(_0x80d5d2['toString']()[_0x501682(0x257)](_0x501682(0x267)))await pauseBot(config[_0x501682(0x2ec)]+_0x501682(0x240));else{if(_0x80d5d2[_0x501682(0x1e3)]()[_0x501682(0x257)](_0x501682(0x1fe)))await pauseBot(config[_0x501682(0x2ec)]+'\x20closed\x20the\x20connection');else{if(_0x80d5d2[_0x501682(0x1e3)]()['includes'](_0x501682(0x2cb)))logHistory(_0x501682(0x306),_0x3fbb8e+_0x501682(0x1f5)),logHistory(_0x501682(0x306),_0x501682(0x32c)),await killBot();else{if(_0x80d5d2[_0x501682(0x1e3)]()[_0x501682(0x257)]('InvalidNonce'))logHistory(_0x501682(0x306),_0x3fbb8e+_0x501682(0x218)),logHistory(_0x501682(0x306),_0x501682(0x32c)),await killBot();else{if(_0x80d5d2['toString']()[_0x501682(0x257)](_0x501682(0x26b)))logHistory(_0x501682(0x306),_0x3fbb8e+'\x20|\x20'+config[_0x501682(0x2ec)]+_0x501682(0x260)),logHistory('error',_0x501682(0x32c)),await killBot();else{if(_0x80d5d2['toString']()[_0x501682(0x257)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x3fbb8e+_0x501682(0x31f)+config[_0x501682(0x2ec)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x501682(0x306),_0x501682(0x32c)),await killBot();else{if(_0x80d5d2[_0x501682(0x1e3)]()[_0x501682(0x257)]('AuthenticationError'))logHistory(_0x501682(0x306),_0x3fbb8e+'\x20|\x20'+config['exchange']+_0x501682(0x1ea)),logHistory('error',_0x501682(0x32c)),await killBot();else _0x80d5d2[_0x501682(0x1e3)]()[_0x501682(0x257)](_0x501682(0x234))?logHistory(_0x501682(0x306),_0x3fbb8e+_0x501682(0x1d4)+_0x4b28dc):(logger['full'](_0x3fbb8e+_0x501682(0x1e5),_0x80d5d2),await pauseBot(_0x501682(0x304)));}}}}}}}}}function formatResult(_0x482bcb,_0xf74839){const _0x32b971=_0x22bc00;return parseFloat(_0x482bcb[_0x32b971(0x2b6)](_0xf74839));}function formatResultTruncate(_0x20b6d0,_0x672152){let _0x2b52c7=formatResultString(_0x20b6d0,0xa),_0x452c47=_0x2b52c7['indexOf']('.');return _0x452c47!=-0x1&&(_0x2b52c7=_0x2b52c7['slice'](0x0,_0x452c47+_0x672152+0x1)),Number(_0x2b52c7);}function formatResultString(_0x4f8226,_0x8ea229){const _0x45d68d=_0x22bc00;let _0x4086fb;if(!(''+_0x4f8226)['includes']('e'))_0x4086fb=+(Math['round'](_0x4f8226+'e+'+_0x8ea229)+'e-'+_0x8ea229);else{let _0x20821d=(''+_0x4f8226)['split']('e'),_0x4792f1='';+_0x20821d[0x1]+_0x8ea229>0x0&&(_0x4792f1='+'),_0x4086fb=+(Math[_0x45d68d(0x2d0)](+_0x20821d[0x0]+'e'+_0x4792f1+(+_0x20821d[0x1]+_0x8ea229))+'e-'+_0x8ea229);}return Number(_0x4086fb)[_0x45d68d(0x2b6)](_0x8ea229);}function getServerTime(){const _0x14d623=_0x22bc00,_0xada88f=new Date();return _0xada88f[_0x14d623(0x2e8)]()+'/'+(_0xada88f['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0xada88f['getDate']()[_0x14d623(0x1e3)]()[_0x14d623(0x2c0)](0x2,'0')+'\x20'+_0xada88f['getHours']()[_0x14d623(0x1e3)]()[_0x14d623(0x2c0)](0x2,'0')+':'+_0xada88f[_0x14d623(0x33f)]()[_0x14d623(0x1e3)]()[_0x14d623(0x2c0)](0x2,'0')+':'+_0xada88f[_0x14d623(0x1f1)]()[_0x14d623(0x1e3)]()[_0x14d623(0x2c0)](0x2,'0');}function getTimeStamp(){const _0x5b2f72=_0x22bc00,_0x2df4a9=shiftedTime();return _0x2df4a9[_0x5b2f72(0x2e8)]()+'/'+(_0x2df4a9[_0x5b2f72(0x22e)]()+0x1)[_0x5b2f72(0x1e3)]()[_0x5b2f72(0x2c0)](0x2,'0')+'/'+_0x2df4a9[_0x5b2f72(0x254)]()[_0x5b2f72(0x1e3)]()[_0x5b2f72(0x2c0)](0x2,'0')+'\x20'+_0x2df4a9[_0x5b2f72(0x28f)]()[_0x5b2f72(0x1e3)]()['padStart'](0x2,'0')+':'+_0x2df4a9['getMinutes']()[_0x5b2f72(0x1e3)]()[_0x5b2f72(0x2c0)](0x2,'0')+':'+_0x2df4a9[_0x5b2f72(0x1f1)]()[_0x5b2f72(0x1e3)]()[_0x5b2f72(0x2c0)](0x2,'0');}function getDate(){const _0x866422=_0x22bc00,_0x108cc0=shiftedTime();return _0x108cc0['getFullYear']()+'/'+(_0x108cc0[_0x866422(0x22e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x108cc0[_0x866422(0x254)]()['toString']()[_0x866422(0x2c0)](0x2,'0');}function getHour(){const _0x2930fd=_0x22bc00,_0x49bce8=shiftedTime();return _0x49bce8[_0x2930fd(0x28f)]()[_0x2930fd(0x1e3)]()[_0x2930fd(0x2c0)](0x2,'0');}function sleep(_0x44fc94){return new Promise(_0x837e97=>setTimeout(_0x837e97,_0x44fc94));}function shiftedTime(){const _0x36ee44=_0x22bc00,_0x28432d=new Date();let _0x44edb6=_0x28432d;if(config&&config[_0x36ee44(0x24f)]!==0x0)_0x44edb6=fns[_0x36ee44(0x299)](_0x28432d,{'hours':config['timeshift']});return _0x44edb6;}function timer(_0x33ac24){const _0x2ce241=_0x22bc00,_0x38e943=new Date();!lasttime?console['log'](_0x2ce241(0x2cd),_0x33ac24,_0x38e943):console[_0x2ce241(0x230)](_0x2ce241(0x2cd),_0x33ac24,(_0x38e943-lasttime)/0x3e8),lasttime=_0x38e943;}