const _0x39baf0=_0x56e7;(function(_0xd5c207,_0x840b33){const _0x4a05df=_0x56e7,_0x58c3b4=_0xd5c207();while(!![]){try{const _0x22256f=-parseInt(_0x4a05df(0xf9))/0x1+-parseInt(_0x4a05df(0x152))/0x2+parseInt(_0x4a05df(0x23d))/0x3+parseInt(_0x4a05df(0x1ea))/0x4*(-parseInt(_0x4a05df(0x1a8))/0x5)+parseInt(_0x4a05df(0x272))/0x6*(-parseInt(_0x4a05df(0x1ab))/0x7)+-parseInt(_0x4a05df(0x207))/0x8*(parseInt(_0x4a05df(0x134))/0x9)+parseInt(_0x4a05df(0x199))/0xa*(parseInt(_0x4a05df(0x276))/0xb);if(_0x22256f===_0x840b33)break;else _0x58c3b4['push'](_0x58c3b4['shift']());}catch(_0xd4cb22){_0x58c3b4['push'](_0x58c3b4['shift']());}}}(_0x5589,0x52229));const _0x3a8067=function(){let _0x285058=!![];return function(_0x4f94f9,_0x46351e){const _0x5a7776=_0x285058?function(){const _0x219e7d=_0x56e7;if(_0x46351e){const _0x1648f4=_0x46351e[_0x219e7d(0x24a)](_0x4f94f9,arguments);return _0x46351e=null,_0x1648f4;}}:function(){};return _0x285058=![],_0x5a7776;};}(),_0x5ac0cd=_0x3a8067(this,function(){const _0x231e67=_0x56e7;return _0x5ac0cd['toString']()[_0x231e67(0x116)]('(((.+)+)+)+$')[_0x231e67(0x22b)]()[_0x231e67(0x163)](_0x5ac0cd)[_0x231e67(0x116)](_0x231e67(0x10e));});_0x5ac0cd();'use strict';const ccxt=require(_0x39baf0(0x106)),low=require(_0x39baf0(0x11c)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x39baf0(0xc8)),Crypt=require(_0x39baf0(0x18b))[_0x39baf0(0xeb)],util=require(_0x39baf0(0xd3)),argv=require('yargs/yargs')(process['argv'][_0x39baf0(0xb2)](0x2))[_0x39baf0(0x141)],path=require(_0x39baf0(0x13f)),axios=require(_0x39baf0(0xd4));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x39baf0(0x208),'USDT',_0x39baf0(0x120),_0x39baf0(0xc5)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x39baf0(0x1f1)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x39baf0(0x1d7),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8;let enableFiatToggle;function _0x5589(){const _0x189c92=['Error\x20details:','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','.json','getSeconds','./config/','initclient','\x20-\x20','\x20|\x20lock\x20orders:\x20','Resetting\x20coin\x20results:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','market_cap','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','emojibuy','Portfolio\x20change\x20detected:\x20','InvalidNonce','Exchange\x20error\x20details:','logs','RequestTimeout','\x20minutes','2.6.22','getCoinNumber()','fiat','\x20uses\x20','filter','timeout','001','coin-loading-progress','set','detectLiquidityChange()','\x20order:\x20','sell','1\x20-\x20FILLED\x20known\x20order:\x20','\x20>\x20details:','change','colorscheme','Loading\x20completed','fromCodePoint','4HuuPte','createWriteStream','marketcapEnabled','enabled','remove','success','usd','UNLOCKED','Headless:\x20','Order\x20filled:\x20','remainingSymbols',',\x20must\x20be\x20a\x203\x20digit\x20number','find','debug','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','OnMaintenance','***','exec','toFixed','BNB/',')\x20|\x20exchange:\x20','symbol','side','toggleBotMode','send','-performance.json','fee','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','-------------------------------\x0a','880ZPbxaF','TUSD','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','balances','ask','orderstatus','shift','price','\x20>\x20[DEBUG]\x20','emojisell','padStart','rightTxt','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','abs','Exception\x20thrown\x20in\x20','write','\x20has\x20a\x2024h\x20drop\x20of\x20','getMonth','get','map','kill','NetworkError','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','initial','version','basecoinvalue','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','liquidity','currency','watchOrders','recovery','timeshift','parse','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','delta','environment','toString','fetchBalance','bb-settings.json','random','closed','stringify','createOrder','toUpperCase','Executed\x20','existsSync','configuration-stored','Cooldown\x20ended\x20-\x20balancing\x20resumed','excluded','\x20minutes\x20-\x20','</pre>','\x20API\x20secret\x20is\x20invalid','showname','\x20|\x20','689346jMfKjy','token\x20is\x20expired','watchTrades()','Symbol(s):\x20','Block\x20transaction\x20detection:\x20','number','distribution','initTickers()','Reset\x20|\x20','percentage','timestamp','trade','headless','apply','data','marketcapApi','performance','Fee\x20discount\x20refund\x20detected:\x20','bb-secure.json','page','max','Order(s)\x20not\x20validated\x20after\x20','exchanges','getDate','-results.json','string','complete','MIN_NOTIONAL','Manual\x20balancing\x20required','sendPortfolioTelegram','datetime','\x20orders\x20in\x20less\x20than\x20','fetchTickers()','portfolio','switch-manual','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','highest','breakeven','autoliquidity','warning','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','reverse','Pausing\x20for\x20','<pre>','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','update-liquidity','filled','loading-canceled','-events.json','changes','progress','\x20|\x20exchange:\x20','EUR','14370EBHQFk','decrypt','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20exchange','70873juhANW','limit','defaults','sqrt','0\x20-\x20EXECUTION:\x20','Error\x20in\x20loadSymbols():\x20','substring','average','1\x20-\x20FILLED\x20unknown\x20order:\x20','slice','\x20change','basecoin','limit-high','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','AuthenticationError','net-fiat','startdate','recreate','watchTrades','bot','realized','portfolio2','cooldown','sells','marketcap','RateLimitExceeded','2.6.0','removed','USDP','valid','sha256','date-fns','ETH','Initializing\x20coin\x20results','2.5.0','\x20:\x20','Exchange','coins','getFullYear','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','last','fetchTickers','util','axios','watchOrders()','Net\x20effect','no\x20exchange\x20reloaded','pro','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','time','added','bot-','ID:\x20','slider','none','<b>','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','OrderNotFound','exchange\x20reload','event','round','keys','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','startnumber','Cryptocom','\x20hour','Crypt','getPortfolio','getOpenOrders()','active','watchTradesForSymbols','status','cancel','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20MB','InvalidOrder','./version.json','cancelOrders()','push','limits','430169UMDdLC','splice','password','customId','Resetting\x20bot\x20history','LOCKED','min','/EUR','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Huobipro','has','heapUsed','production','ccxt','2.3.5','getCoins()','open','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','marketcapsqrt','ExchangeError','\x20portfolio:</b>\x20\x0a\x0a','(((.+)+)+)+$','net-basecoin','value','sendMetricsTelegram','ORDERS.UNLOCKED','amountToPrecision','leftTxt','getStartingBalances','search','toLowerCase','PAXG','args','type','exchange','lowdb','\x20exchange\x20error:\x20','sort','Avoiding\x20continuous\x20order\x20attempts','USDC','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','/backup/','full','entries','unlinkSync','apiSecret','configuration','includes','openOrders','starting-balance-','bid',':\x20timer\x20>','Cex','bots','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','./logs/','Network\x20error\x20details:','pop','process\x20','3357EUhfLs','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','error','Order\x20amount\x20is\x20invalid:\x20','length','ExchangeNotAvailable','\x20value','eur','Invalid\x20quantity','cancelLoading','quote','path','loadMarkets','argv','restart','USD','order','USDT','test','ORDERS.UNLOCKING','Order\x20is\x20invalid:\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','recreateCoinResults()','No\x20more\x20open\x20orders\x20-\x20','spot','fetchTicker','recent20','Error\x20in\x20testAPI():\x20','1\x20-\x20Handle\x20open\x20orders','red_yellow_blue','329914CisbAu','getTime','total','function','/output-000.log','Bybit','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','privateKey','split','Limit\x20(low-margin)','ordertype','padEnd','buys','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','portfolio1','constructor','mkdirSync','event-history','Huobi','API-key\x20format\x20invalid','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','assign','BNB','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','change24h','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20-\x20bot\x20not\x20started','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','InsufficientFunds','getHours','fees','RETRY\x20-\x20Problem\x20resolved\x20after\x20','yyyy/MM/dd','Initializing\x20exchange:\x20already\x20done','staging','message','1\x20-\x20Unlock\x20orders','\x20>\x20','botname','coin','running','format','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','%\x20(','target','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','offset','netoffset','Unknown\x20error\x20-\x20check\x20logs','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','final','apiPassword','RETRY\x20-\x20Error\x20in\x20',':\x20Bot\x20','hybrid-crypto-js','replace','startprice','startsWith','sortBy','ongoing','forEach','2\x20-\x20handling\x20FILLED\x20order:\x20','canceled','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','join','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','placeOrder()','buy','1210GQguaU','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20metrics:</b>\x20\x0a\x0a','botID','market','cost','amount','balancing\x20resumed','pid','onepagemode','watchTradesForSymbols()','secure','date','code','showConfig','124145tXsNEJ','cancelOrder','fetchOpenOrders','35BmUtfX','uncaughtException','BTC','storeHeadless','\x20|\x20highest\x20fee:\x20','findIndex','Market','DDoSProtection','settings','Binance','getMinutes','Unknown\x20error:\x20','log','apiKey','\x20API\x20key\x20is\x20invalid','indexOf','floor','isEqual','Initiating\x20bot\x20restart','Bot\x20','threshold','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Error\x20details\x20(0):','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','************','orderId'];_0x5589=function(){return _0x189c92;};return _0x5589();}const serverversion=require(_0x39baf0(0xf5))[_0x39baf0(0x21f)],environment=require(_0x39baf0(0xf5))[_0x39baf0(0x22a)]||_0x39baf0(0x105),botID=process['argv'][0x2]||_0x39baf0(0x1de),pattern=/^[0-9]{3}$/;!pattern[_0x39baf0(0x146)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x39baf0(0x1f5)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x39baf0(0x1c9)+userID+'/':_0x39baf0(0x1c9),logspath=userID?_0x39baf0(0x130)+userID+'/':'./logs/',loggerfile=fs[_0x39baf0(0x1eb)](logspath+_0x39baf0(0x156),{'flags':'a'});!fs[_0x39baf0(0x234)](configpath)&&fs[_0x39baf0(0x164)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x39baf0(0xdc)+botID+'-config.json',logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x39baf0(0xdc)+botID+_0x39baf0(0x203),coinresultsfile=configpath+_0x39baf0(0xdc)+botID+_0x39baf0(0x255),settingsfile=configpath+_0x39baf0(0x22d),securefile=configpath+_0x39baf0(0x24f),configbackuppath=configpath+_0x39baf0(0x122),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x39baf0(0xab)]({'logs':[],'version':serverversion})[_0x39baf0(0x216)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x39baf0(0xab)]({'data':[],'version':serverversion})[_0x39baf0(0x216)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x39baf0(0x216)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x39baf0(0xc7),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x56311f=>{const _0x5216fb=_0x39baf0;console[_0x5216fb(0x1b7)](_0x56311f);},'simple':_0x70afff=>{const _0x57b0cd=_0x39baf0;console['log'](_0x70afff),loggerfile[_0x57b0cd(0x216)](util['format'](_0x70afff)+'\x0a');},'full':async(_0x548312,_0x4aa9fc='')=>{const _0x5c471c=_0x39baf0;let _0xe54b7e;if(config[_0x5c471c(0x23b)])_0xe54b7e=getTimeStamp()+':\x20'+config[_0x5c471c(0x17b)]+'\x20>\x20'+_0x548312;else _0xe54b7e=getTimeStamp()+_0x5c471c(0x18a)+botID+_0x5c471c(0x17a)+_0x548312;console[_0x5c471c(0x1b7)](_0xe54b7e),loggerfile['write'](util[_0x5c471c(0x17e)](_0xe54b7e)+'\x0a'),_0x4aa9fc&&(console['log'](_0x4aa9fc),loggerfile[_0x5c471c(0x216)](util[_0x5c471c(0x17e)](_0x4aa9fc)+'\x0a'));},'debug':async(_0x366824,_0xbb7938='')=>{const _0x126a02=_0x39baf0;let _0x2293ca;if(config[_0x126a02(0x23b)])_0x2293ca=getTimeStamp()+':\x20'+config[_0x126a02(0x17b)]+_0x126a02(0x20f)+_0x366824;else _0x2293ca=getTimeStamp()+_0x126a02(0x18a)+botID+_0x126a02(0x20f)+_0x366824;if(debugging)console[_0x126a02(0x1b7)](_0x2293ca);loggerfile['write'](util[_0x126a02(0x17e)](_0x2293ca)+'\x0a');if(_0xbb7938){if(debugging)console[_0x126a02(0x1b7)](_0xbb7938);loggerfile['write'](util['format'](_0xbb7938)+'\x0a');}}};process['on'](_0x39baf0(0x1ac),function(_0x40b2a0){handleError(_0x40b2a0,'uncaughtException');});settings[_0x39baf0(0x226)]!=config[_0x39baf0(0x226)]&&updateTimeshift(settings[_0x39baf0(0x226)]);settings[_0x39baf0(0x1a2)]!=config['onepagemode']&&updateOnepagemode(settings[_0x39baf0(0x1a2)]);(settings[_0x39baf0(0x24c)]&&!config[_0x39baf0(0x24c)]||!settings[_0x39baf0(0x24c)]&&config[_0x39baf0(0x24c)])&&updateMarketcapApi(settings[_0x39baf0(0x24c)]);process['send']({'started':'running'},_0x300d22=>{}),initializeProcessListeners();function proxyEmit(_0x16bc00,_0x18517c=null){const _0xf17e26=_0x39baf0;process[_0xf17e26(0x202)]({'function':_0x16bc00,'args':_0x18517c},_0x169bc0=>{});}function initializeProcessListeners(){const _0x5d6f3b=_0x39baf0;process['on'](_0x5d6f3b(0x178),_0x4f6a41=>{const _0x447f75=_0x5d6f3b;switch(Object[_0x447f75(0xe6)](_0x4f6a41)[0x0]){case _0x447f75(0x226):_0x4f6a41[_0x447f75(0x226)]!=undefined&&(settings[_0x447f75(0x226)]=_0x4f6a41[_0x447f75(0x226)],updateTimeshift(settings[_0x447f75(0x226)]));break;case'onepagemode':_0x4f6a41[_0x447f75(0x1a2)]!=undefined&&(settings[_0x447f75(0x1a2)]=_0x4f6a41[_0x447f75(0x1a2)],updateOnepagemode(settings[_0x447f75(0x1a2)]));break;case _0x447f75(0x24c):_0x4f6a41[_0x447f75(0x24c)]!=undefined&&(settings['marketcapApi']=_0x4f6a41[_0x447f75(0x24c)],updateMarketcapApi(settings[_0x447f75(0x24c)]));break;case _0x447f75(0x12e):_0x4f6a41[_0x447f75(0x12e)]!=undefined&&(bots=JSON[_0x447f75(0x227)](_0x4f6a41[_0x447f75(0x12e)]),proxyEmit(_0x447f75(0x12e),bots));break;case'function':switch(_0x4f6a41[_0x447f75(0x155)]){case _0x447f75(0x1ca):initclient();break;case _0x447f75(0x201):toggleBotMode();break;case'emitHistory':emitHistory(_0x4f6a41[_0x447f75(0x119)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4f6a41[_0x447f75(0x119)]);break;case _0x447f75(0xec):getPortfolio(_0x4f6a41['args']);break;case'storeConfiguration':storeConfiguration(_0x4f6a41[_0x447f75(0x119)]);break;case _0x447f75(0x1ae):storeHeadless(_0x4f6a41[_0x447f75(0x119)]);break;case'storeFiat':storeFiat(_0x4f6a41[_0x447f75(0x119)]);break;case'resetHistory':resetHistory();break;case _0x447f75(0x115):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4f6a41[_0x447f75(0x119)]);break;case _0x447f75(0x13d):cancelLoading();break;case _0x447f75(0x1a7):showConfig();break;case _0x447f75(0x111):sendMetricsTelegram();break;case _0x447f75(0x25a):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x1abeba=![]){const _0x26a4ce=_0x39baf0;logger['debug'](_0x26a4ce(0x245)+(_0x1abeba?_0x26a4ce(0xe3):_0x26a4ce(0xd7))+_0x26a4ce(0x270)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x1abeba)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x26a4ce(0x1b8)]!=''&&config[_0x26a4ce(0x1b8)]!=_0x26a4ce(0x1fa)){loadingProgress=0x0;_0x1abeba&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x26a4ce(0x127),emittedConfiguration()),initialPerformanceStored=![]);const _0x3f945c=await getCoins();[currentCoins,currentCoinsAll]=_0x3f945c,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x26a4ce(0x1f7)](_0x26a4ce(0x1e8)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x26a4ce(0x138)]==0x0&&allOpenOrders[_0x26a4ce(0x138)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3606af=![]){const _0x47adaf=_0x39baf0;logger[_0x47adaf(0x1f7)]('Resuming\x20('+(_0x3606af?'quick':_0x47adaf(0x257))+_0x47adaf(0x1fe)+config[_0x47adaf(0x11b)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3606af){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x47adaf(0x1b8)]!='***'){loadingProgress=0x1;const _0xc56a04=await getCoins();[currentCoins,currentCoinsAll]=_0xc56a04,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x47adaf(0x138)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x36a4a0){const _0x44cb53=_0x39baf0;let _0x5408fa=![];if(_0x36a4a0)_0x5408fa=!![];let _0x38bd80;_0x5408fa?_0x38bd80=_0x36a4a0[_0x44cb53(0x21a)](_0x54a178=>_0x54a178[_0x44cb53(0x17c)]):_0x38bd80=currentCoinsAll[_0x44cb53(0x21a)](_0x5eb084=>_0x5eb084[_0x44cb53(0x17c)]);if(!config['marketcapApi']||!_0x5408fa&&!config[_0x44cb53(0x1ec)]||_0x38bd80[_0x44cb53(0x138)]==0x0)return;let _0x18c772=null;try{_0x18c772=await axios['get'](_0x44cb53(0x205),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x38bd80[_0x44cb53(0x22b)]()}});}catch(_0x16b8b1){_0x18c772=null,_0x16b8b1[_0x44cb53(0x22b)]()[_0x44cb53(0x128)]('status\x20code\x20401')?(config[_0x44cb53(0x24c)]=![],updateConfig(),proxyEmit(_0x44cb53(0x127),emittedConfiguration()),logHistory(_0x44cb53(0x136),_0x44cb53(0x196))):(logHistory(_0x44cb53(0x136),_0x44cb53(0x1c0)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x44cb53(0x1f7)]('Error\x20details:',_0x16b8b1['toString']()+_0x44cb53(0x1cb)+_0x16b8b1[_0x44cb53(0x1a6)]));}if(_0x18c772){let _0x39c762=0x0;const _0x1df650=_0x18c772[_0x44cb53(0x24b)];_0x38bd80[_0x44cb53(0x191)](_0x59b912=>{const _0x16fbf0=_0x44cb53;if(_0x1df650['data'][_0x59b912][0x0])_0x39c762+=_0x1df650[_0x16fbf0(0x24b)][_0x59b912][0x0]['quote'][_0x16fbf0(0x143)][_0x16fbf0(0x1cf)];}),_0x38bd80[_0x44cb53(0x191)](_0x4e9604=>{const _0x2ba7e5=_0x44cb53,_0x245f9b=_0x1df650[_0x2ba7e5(0x24b)][_0x4e9604][0x0]?_0x1df650['data'][_0x4e9604][0x0][_0x2ba7e5(0x13e)][_0x2ba7e5(0x143)][_0x2ba7e5(0x1cf)]:0x0;if(_0x5408fa){const _0x426353=_0x36a4a0[_0x2ba7e5(0x1f6)](_0x3c3625=>_0x3c3625[_0x2ba7e5(0x17c)]==_0x4e9604);_0x426353&&(_0x426353[_0x2ba7e5(0xc1)]=_0x245f9b);}else{const _0xc64cf8=currentCoins['find'](_0x117af4=>_0x117af4[_0x2ba7e5(0x17c)]==_0x4e9604);_0xc64cf8&&(_0xc64cf8[_0x2ba7e5(0xc1)]=_0x245f9b);const _0x1a2609=currentCoinsAll[_0x2ba7e5(0x1f6)](_0x5d2cc3=>_0x5d2cc3[_0x2ba7e5(0x17c)]==_0x4e9604);_0x1a2609&&(_0x1a2609[_0x2ba7e5(0xc1)]=_0x245f9b);}}),!_0x5408fa&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x334bbd=_0x39baf0,_0x4b0acb=0x2;let _0x5e681a=0x0,_0x1125f7=0x0,_0x1b2713=0x0,_0x3e7235=0x0,_0x2d3373=0x0;config[_0x334bbd(0x25e)][_0x334bbd(0x191)](_0x4ab681=>{const _0x13b795=_0x334bbd;if(!_0x4ab681[_0x13b795(0x237)]){_0x1b2713++,_0x5e681a+=_0x4ab681[_0x13b795(0xde)];if(_0x4ab681['slider']===-0x1){_0x5e681a++;const _0x5d658a=currentCoinsAll[_0x13b795(0x1f6)](_0x1eef88=>_0x1eef88[_0x13b795(0x17c)]==_0x4ab681[_0x13b795(0x17c)]);_0x5d658a&&(_0x3e7235+=_0x5d658a['marketcap'],_0x2d3373+=Math['sqrt'](_0x5d658a['marketcap']));}if(_0x4ab681[_0x13b795(0xde)]!==-0x1)_0x1125f7++;}});let _0x2ffa0b;const _0x203131=0x64-_0x5e681a,_0x3e2b3f=_0x1b2713-_0x1125f7;_0x2ffa0b=_0x3e2b3f===0x0?_0x5e681a:Math[_0x334bbd(0x251)](0x64,_0x5e681a),config[_0x334bbd(0x25e)][_0x334bbd(0x191)](_0x1cedc1=>{const _0x4702d2=_0x334bbd,_0x1cfdf8=currentCoinsAll[_0x4702d2(0x1f6)](_0x80e361=>_0x80e361[_0x4702d2(0x17c)]==_0x1cedc1[_0x4702d2(0x17c)]);_0x1cfdf8&&(_0x1cedc1[_0x4702d2(0xc1)]=_0x1cfdf8[_0x4702d2(0xc1)]);if(!_0x1cedc1['excluded']){if(_0x2ffa0b<=0x64){if(_0x1cedc1['slider']===-0x1){if(_0x3e7235!==0x0&&config[_0x4702d2(0x1ec)]){if(_0x1cfdf8){if(config[_0x4702d2(0x1ec)]==_0x4702d2(0xc1))_0x1cedc1[_0x4702d2(0x243)]=(_0x203131/(_0x3e7235/_0x1cfdf8[_0x4702d2(0xc1)]))['toFixed'](_0x4b0acb);else config[_0x4702d2(0x1ec)]==_0x4702d2(0x10b)&&(_0x1cedc1['distribution']=(_0x203131/(_0x2d3373/Math[_0x4702d2(0xac)](_0x1cfdf8['marketcap'])))[_0x4702d2(0x1fc)](_0x4b0acb));}}}}}}),updateConfig();}function updateConfig(){const _0x197a1d=_0x39baf0;let _0x6b5bb=dbConfig[_0x197a1d(0x219)](_0x197a1d(0xbc))['find']({'botID':botID})[_0x197a1d(0x110)]();_0x6b5bb&&dbConfig[_0x197a1d(0x219)](_0x197a1d(0xbc))[_0x197a1d(0x1f6)]({'botID':botID})[_0x197a1d(0x169)](config)['write']();}function logMemory(){const _0x1a2b85=_0x39baf0;if(environment!=_0x1a2b85(0x177))return;const _0xc1b0c6=process['memoryUsage']()[_0x1a2b85(0x104)]/0x400/0x400;logger[_0x1a2b85(0x1f7)](_0x1a2b85(0x133)+process[_0x1a2b85(0x1a1)]+_0x1a2b85(0x1db)+formatResult(_0xc1b0c6,0x1)+_0x1a2b85(0xf3));}async function startScheduler(){const _0x9483f2=shiftedTime()['getHours']();getMarketCap(),_0x9483f2==0x1&&logMemory(),(_0x9483f2==0x2||_0x9483f2==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3fc1e6=![]){const _0xbd0b40=_0x39baf0;logger[_0xbd0b40(0x1f7)](_0xbd0b40(0x1bd));if(!_0x3fc1e6)while(lockOrders!=ORDERS[_0xbd0b40(0x1f1)]||coolingDown){await sleep(0x3e8);}process[_0xbd0b40(0x202)]({'stop':_0xbd0b40(0x142)},_0x90d533=>{});}async function initExchange(_0x72ead9=config['exchange'],_0x5d0387=config[_0x39baf0(0x1b8)],_0x1bf33e=config[_0x39baf0(0x126)],_0x1abd9c=config[_0x39baf0(0x188)]){const _0x178ae6=_0x39baf0;if(exchange){logger[_0x178ae6(0x1f7)](_0x178ae6(0x176));return;}logger[_0x178ae6(0x1f7)]('Initializing\x20exchange');!supportedExchanges()[_0x178ae6(0x128)](_0x72ead9)&&(logHistory('error',_0x178ae6(0x149)+_0x72ead9+_0x178ae6(0x275)),killBot());const _0x529068=ccxt['pro'][_0x72ead9[_0x178ae6(0x117)]()];exchange=new _0x529068({'apiKey':_0x5d0387,'secret':_0x1bf33e,'options':{'defaultType':_0x178ae6(0x14c)}});if(_0x1abd9c)exchange[_0x178ae6(0xfb)]=_0x1abd9c;}function updateExchange(_0x35c1b3,_0x1a107c,_0x4a537b=null){const _0x1759a8=_0x39baf0;exchange[_0x1759a8(0x1b8)]=_0x35c1b3,exchange[_0x1759a8(0x126)]=_0x1a107c,exchange[_0x1759a8(0x188)]=_0x4a537b,logger[_0x1759a8(0x1f7)](_0x1759a8(0x10a));}function setStableCoins(){const _0x5d34a2=_0x39baf0;let _0x29e6d2=config[_0x5d34a2(0xb4)]==_0x5d34a2(0xc9)?_0x5d34a2(0xc9):config[_0x5d34a2(0xb4)]==_0x5d34a2(0x118)?_0x5d34a2(0x118):_0x5d34a2(0x1ad),_0x5ed952=allSymbols[_0x5d34a2(0x128)](_0x29e6d2+'/USD')?_0x5d34a2(0x143):allSymbols['includes'](_0x29e6d2+'/USDT')?_0x5d34a2(0x145):_0x5d34a2(0x271),_0x3165cc=allSymbols[_0x5d34a2(0x128)](_0x29e6d2+_0x5d34a2(0x100))?_0x5d34a2(0x271):_0x5ed952;enableFiatToggle=!![],_0x5ed952==_0x5d34a2(0x271)&&(enableFiatToggle=![],storeFiat(_0x5d34a2(0x271))),_0x3165cc!=_0x5d34a2(0x271)&&(enableFiatToggle=![],storeFiat(_0x5d34a2(0x143))),stablecoins={'eur':{'coin':''+_0x29e6d2+_0x3165cc,'symbol':_0x29e6d2+'/'+_0x3165cc},'usd':{'coin':''+_0x29e6d2+_0x5ed952,'symbol':_0x29e6d2+'/'+_0x5ed952}};}async function initwsCcxt(){const _0x490dd5=_0x39baf0;initCycle++;const _0x4c01fc=initCycle;let _0xc03b0c=[];config[_0x490dd5(0x25e)][_0x490dd5(0x191)](_0x56b690=>{const _0x3f4a02=_0x490dd5;if(!_0x56b690[_0x3f4a02(0x237)]&&_0x56b690[_0x3f4a02(0x17c)]!=config[_0x3f4a02(0xb4)])_0xc03b0c[_0x3f4a02(0xf7)](_0x56b690[_0x3f4a02(0x1ff)]);});if(!_0xc03b0c['includes'](stablecoins[_0x490dd5(0x13b)][_0x490dd5(0x1ff)]))_0xc03b0c['push'](stablecoins[_0x490dd5(0x13b)][_0x490dd5(0x1ff)]);if(!_0xc03b0c['includes'](stablecoins[_0x490dd5(0x1f0)][_0x490dd5(0x1ff)]))_0xc03b0c[_0x490dd5(0xf7)](stablecoins[_0x490dd5(0x1f0)][_0x490dd5(0x1ff)]);if(config[_0x490dd5(0x11b)][_0x490dd5(0x18e)](_0x490dd5(0x1b4))&&config[_0x490dd5(0xb4)]!=_0x490dd5(0x118)){if(!_0xc03b0c[_0x490dd5(0x128)](_0x490dd5(0x1fd)+config[_0x490dd5(0xb4)]))_0xc03b0c[_0x490dd5(0xf7)](_0x490dd5(0x1fd)+config[_0x490dd5(0xb4)]);}loadCoins(_0xc03b0c),_0xc03b0c=validateSymbols(_0xc03b0c);const _0x122d32=async _0x5a43fe=>{const _0x49ebfa=_0x490dd5;let _0x3cefa0;try{const _0x42eeeb=await getTickers(_0x5a43fe);Object[_0x49ebfa(0x124)](_0x42eeeb)['forEach'](_0x29f8ea=>{const _0x186278=_0x49ebfa;_0x3cefa0=_0x29f8ea[0x1]['symbol'],gTicker[noslash(_0x3cefa0)]=_0x29f8ea[0x1][_0x186278(0xd1)],gChange[_0x3cefa0]=_0x29f8ea[0x1]['percentage'];});}catch(_0x2e3730){await handleError(_0x2e3730,_0x49ebfa(0x244),_0x3cefa0);}},_0x19123d=async _0x22928c=>{const _0x4490b2=_0x490dd5;while(initCycle==_0x4c01fc){if(!botPaused)try{const _0x50bb08=await exchange[_0x4490b2(0xbb)](_0x22928c);gTicker[noslash(_0x50bb08[0x0][_0x4490b2(0x1ff)])]=_0x50bb08[0x0][_0x4490b2(0x20e)];}catch(_0x3683bf){if(!exchangeStopped)await handleError(_0x3683bf,_0x4490b2(0x23f),_0x22928c);}else await sleep(0x64);}},_0x18e25d=async _0x4911df=>{const _0x58c1c5=_0x490dd5;while(initCycle==_0x4c01fc){if(!botPaused)try{const _0x171926=await exchange[_0x58c1c5(0xef)](_0x4911df),_0x4f1370=_0x171926[_0x58c1c5(0x132)]();gTicker[noslash(_0x4f1370[_0x58c1c5(0x1ff)])]=_0x4f1370['price'];}catch(_0x32cdb2){if(!exchangeStopped)await handleError(_0x32cdb2,_0x58c1c5(0x1a3),_0x4911df[_0x58c1c5(0x22b)]());}else await sleep(0x64);}},_0x48ddd4=async _0x51823e=>{const _0x515d36=_0x490dd5;while(initCycle==_0x4c01fc){if(!botPaused){let _0x4da4d7;try{await sleep(0x3c*0x3e8);const _0x3a634c=await getTickers(_0x51823e);Object[_0x515d36(0x124)](_0x3a634c)[_0x515d36(0x191)](_0x49a0db=>{const _0x3baf40=_0x515d36;_0x4da4d7=_0x49a0db[0x1][_0x3baf40(0x1ff)],gChange[_0x4da4d7]=_0x49a0db[0x1][_0x3baf40(0x246)];});}catch(_0x4f5f63){if(!exchangeStopped)await handleError(_0x4f5f63,_0x515d36(0x25d),_0x4da4d7);}}else await sleep(0x64);}},_0x51fd3b=async _0x24cdc0=>{const _0xb717b1=_0x490dd5;while(initCycle==_0x4c01fc){if(!botPaused)try{const _0x5e9e4f=await exchange['watchOrders'](_0x24cdc0);initCycle==_0x4c01fc&&_0x5e9e4f[_0xb717b1(0x191)](_0x3f7dce=>{updateNumberCoinsCcxt(_0x3f7dce);});}catch(_0x14e817){if(!exchangeStopped)await handleError(_0x14e817,_0xb717b1(0xd5));}else await sleep(0x64);}};_0x122d32(_0xc03b0c),_0x48ddd4(_0xc03b0c),exchange[_0x490dd5(0x103)][_0x490dd5(0xef)]&&!(config[_0x490dd5(0x11b)]==_0x490dd5(0x157)&&_0xc03b0c[_0x490dd5(0x138)]>0xa)?_0x18e25d(_0xc03b0c):_0xc03b0c[_0x490dd5(0x191)](_0x1b4f89=>{_0x19123d(_0x1b4f89);}),_0xc03b0c[_0x490dd5(0x191)](_0x367cf0=>{_0x51fd3b(_0x367cf0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1cb502){const _0x564d2b=_0x39baf0;let _0x4ad31b={};try{if(config[_0x564d2b(0x11b)]!=_0x564d2b(0xe9))_0x4ad31b=await exchange[_0x564d2b(0xd2)](_0x1cb502);else for(const _0x141668 of _0x1cb502){const _0x5e80cc=await exchange[_0x564d2b(0x14d)](_0x141668);_0x4ad31b[_0x141668]=_0x5e80cc;}return _0x4ad31b;}catch(_0x348d1b){throw _0x348d1b;}}function setBlockTransactionDetection(_0x36b84b){const _0x2341a2=_0x39baf0;blockTransactionDetection=_0x36b84b,logger[_0x2341a2(0x1f7)](_0x2341a2(0x241)+blockTransactionDetection);}async function detectLiquidityChange(_0x43aaa2=0x0){const _0x3a9e25=_0x39baf0;transactionDetectionOngoing=!![];try{const _0x5da468=await getCoins(_0x43aaa2),[_0x3c1a98,_0x2f097f]=_0x5da468;let _0x2ae41f=[];currentCoins['forEach'](_0x1f5fcc=>{const _0x569458=_0x56e7,_0x3bdeb4=_0x3c1a98[_0x569458(0x1f6)](_0x3ac1bd=>_0x3ac1bd[_0x569458(0x17c)]==_0x1f5fcc['coin']);if(_0x3bdeb4){if(_0x1f5fcc['number']!=_0x3bdeb4[_0x569458(0x242)]){let _0x249a48;if(_0x1f5fcc[_0x569458(0x17c)]!=config[_0x569458(0xb4)]){const _0x2c1b56=gTicker[noslash(_0x1f5fcc['symbol'])];_0x249a48=_0x1f5fcc[_0x569458(0x266)]?0x1/_0x2c1b56:_0x2c1b56;}else _0x249a48=0x1;_0x2ae41f[_0x569458(0xf7)]({'coin':_0x1f5fcc[_0x569458(0x17c)],'symbol':_0x1f5fcc[_0x569458(0x1ff)],'price':_0x249a48,'number':Number(formatResult(_0x3bdeb4['number']-_0x1f5fcc[_0x569458(0x242)],0x8)),'basecoinvalue':_0x249a48*(_0x3bdeb4['number']-_0x1f5fcc[_0x569458(0x242)])});}}});if(_0x2ae41f[_0x3a9e25(0x138)]>0x0&&!blockTransactionDetection)for(const _0x2b9915 of _0x2ae41f){if(config[_0x3a9e25(0x263)]){logger[_0x3a9e25(0x1f7)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x2b9915[_0x3a9e25(0x220)]+_0x3a9e25(0x1af)+lastFees[_0x3a9e25(0x261)]);if(lastFees['highest']==0x0||Math[_0x3a9e25(0x214)](_0x2b9915[_0x3a9e25(0x220)])>lastFees[_0x3a9e25(0x261)]*1.2){if(config['autoliquidity']=='update-liquidity'){delete _0x2b9915[_0x3a9e25(0x1ff)],delete _0x2b9915[_0x3a9e25(0x220)];let _0x4450e8=[],_0x40d049=[...config[_0x3a9e25(0x222)]]||[],_0x33ebbf=config[_0x3a9e25(0x222)];_0x40d049[_0x3a9e25(0x11e)]((_0x319b77,_0x14e390)=>_0x319b77[_0x3a9e25(0x1a5)]>_0x14e390[_0x3a9e25(0x1a5)]?-0x1:_0x14e390[_0x3a9e25(0x1a5)]>_0x319b77['date']?0x1:0x0);const _0x6e6c7f=getDate();if(_0x40d049[0x0]){const _0x135f40=fns[_0x3a9e25(0x227)](_0x40d049[0x0]['date'],_0x3a9e25(0x175),new Date()),_0x53f94=fns[_0x3a9e25(0x227)](_0x6e6c7f,_0x3a9e25(0x175),new Date());if(fns[_0x3a9e25(0x1bc)](_0x135f40,_0x53f94)){_0x4450e8=_0x40d049[0x0][_0x3a9e25(0x26e)];const _0x47abae=_0x4450e8['find'](_0xdb5569=>_0xdb5569[_0x3a9e25(0x17c)]==_0x2b9915[_0x3a9e25(0x17c)]);_0x47abae?(_0x47abae['number']+=_0x2b9915['number'],_0x47abae[_0x3a9e25(0x242)]==0x0&&(_0x4450e8=_0x4450e8['filter'](_0x4f5798=>{return _0x4f5798['coin']!=_0x2b9915['coin'];}))):_0x4450e8[_0x3a9e25(0xf7)](_0x2b9915);const _0x4539d5=_0x33ebbf[_0x3a9e25(0x1f6)](_0x47abc1=>_0x47abc1[_0x3a9e25(0x1a5)]==_0x6e6c7f);_0x4539d5['changes']=_0x4450e8;}else _0x33ebbf[_0x3a9e25(0xf7)]({'date':_0x6e6c7f,'changes':[_0x2b9915]});}const _0x408d5d=_0x33ebbf['find'](_0x5aff6d=>_0x5aff6d['date']==_0x6e6c7f);if(_0x408d5d){let _0x315733=!![];_0x408d5d[_0x3a9e25(0x26e)][_0x3a9e25(0x191)](_0x5eeeab=>{const _0x6251e=_0x3a9e25;if(_0x5eeeab[_0x6251e(0x242)]!=0x0)_0x315733=![];}),_0x315733&&(_0x33ebbf=_0x33ebbf[_0x3a9e25(0x1dc)](_0x80a221=>{return _0x80a221['date']!=_0x6e6c7f;}));}let _0x40d58b=dbConfig[_0x3a9e25(0x219)](_0x3a9e25(0xbc))[_0x3a9e25(0x1f6)]({'botID':botID})[_0x3a9e25(0x110)]();_0x40d58b&&(dbConfig[_0x3a9e25(0x219)]('bot')[_0x3a9e25(0x1f6)]({'botID':botID})[_0x3a9e25(0x169)]({'liquidity':_0x33ebbf})[_0x3a9e25(0x216)](),config[_0x3a9e25(0x222)]=_0x33ebbf);logHistory('success',_0x3a9e25(0x1d2)+Math['abs'](_0x2b9915[_0x3a9e25(0x242)])+'\x20'+_0x2b9915[_0x3a9e25(0x17c)]+'\x20'+(_0x2b9915[_0x3a9e25(0x242)]>0x0?_0x3a9e25(0xdb):_0x3a9e25(0xc4))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x3a9e25(0x127),emittedConfiguration());const _0x3afc06=getNormalizedPerformance();emitPerformance(_0x3afc06),getStartingBalances(_0x3afc06),logger[_0x3a9e25(0x1f7)](_0x3a9e25(0x209));}else config[_0x3a9e25(0x263)]==_0x3a9e25(0x25f)&&(config[_0x3a9e25(0x249)]?(await storeHeadless({'headless':![]}),logHistory(_0x3a9e25(0x1ef),_0x3a9e25(0x1d2)+Math['abs'](_0x2b9915[_0x3a9e25(0x242)])+'\x20'+_0x2b9915[_0x3a9e25(0x17c)]+'\x20'+(_0x2b9915['number']>0x0?_0x3a9e25(0xdb):_0x3a9e25(0xc4))+_0x3a9e25(0xd0))):logger[_0x3a9e25(0x1f7)](_0x3a9e25(0x1d2)+Math[_0x3a9e25(0x214)](_0x2b9915[_0x3a9e25(0x242)])+'\x20'+_0x2b9915[_0x3a9e25(0x17c)]+'\x20'+(_0x2b9915[_0x3a9e25(0x242)]>0x0?_0x3a9e25(0xdb):'removed')+_0x3a9e25(0x1c2)));}else logger[_0x3a9e25(0x1f7)](_0x3a9e25(0x24e)+Math[_0x3a9e25(0x214)](_0x2b9915[_0x3a9e25(0x242)])+'\x20'+_0x2b9915[_0x3a9e25(0x17c)]+'\x20'+(_0x2b9915[_0x3a9e25(0x242)]>0x0?_0x3a9e25(0xdb):_0x3a9e25(0xc4)));}else logger['debug'](_0x3a9e25(0x1d2)+Math[_0x3a9e25(0x214)](_0x2b9915[_0x3a9e25(0x242)])+'\x20'+_0x2b9915['coin']+'\x20'+(_0x2b9915[_0x3a9e25(0x242)]>0x0?_0x3a9e25(0xdb):_0x3a9e25(0xc4))+_0x3a9e25(0x161));}currentCoins=_0x3c1a98,currentCoinsAll=_0x2f097f;}catch(_0x11bdcf){if(!exchangeStopped)await handleError(_0x11bdcf,_0x3a9e25(0x1e1));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x19ef01=_0x39baf0;logger['debug']('Loading\x20symbols');try{markets=await exchange[_0x19ef01(0x140)]();}catch(_0x5552fa){logger[_0x19ef01(0x1f7)](_0x19ef01(0xae)+_0x5552fa['toString']());if(markets){}else logHistory('error',_0x19ef01(0x269)),logHistory('error',_0x19ef01(0x267)+loadCoinsRetryInterval/0xea60+_0x19ef01(0x17f)),logger['debug'](_0x19ef01(0x1c5),_0x5552fa),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x19ef01(0x124)](markets)[_0x19ef01(0x191)](_0x50927a=>{const _0x2a9329=_0x19ef01;_0x50927a[0x1][_0x2a9329(0xee)]&&_0x50927a[0x1]['spot']&&allSymbols['push'](_0x50927a[0x0]);});}function validateSymbols(_0x5f1dc6){let _0x4b4eee=[];return _0x5f1dc6['forEach'](_0x2e484c=>{const _0x56d268=_0x56e7;!allSymbols[_0x56d268(0x128)](_0x2e484c)?logHistory(_0x56d268(0x136),'Invalid\x20symbol:\x20'+_0x2e484c+_0x56d268(0x135)):_0x4b4eee[_0x56d268(0xf7)](_0x2e484c);}),_0x4b4eee;}async function initclient(){const _0x5a9fc6=_0x39baf0;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5a9fc6(0x253),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5a9fc6(0x20a),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3ed857=getNormalizedPerformance();emitPerformance(_0x3ed857),getStartingBalances(_0x3ed857);}async function toggleBotMode(){const _0x4e30a9=_0x39baf0;let _0x322bf4=dbConfig[_0x4e30a9(0x219)](_0x4e30a9(0xbc))[_0x4e30a9(0x1f6)]({'botID':botID})[_0x4e30a9(0x110)]();if(_0x322bf4){const _0x2f0d05=!_0x322bf4[_0x4e30a9(0x249)];dbConfig[_0x4e30a9(0x219)]('bot')[_0x4e30a9(0x1f6)]({'botID':botID})['assign']({'headless':_0x2f0d05})[_0x4e30a9(0x216)](),config['headless']=_0x2f0d05,proxyEmit(_0x4e30a9(0x127),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x32db7b=_0x39baf0;process[_0x32db7b(0x202)]({'updatebotmanager':!![]},_0xbb668e=>{}),logger['debug'](_0x32db7b(0x1f2)+config[_0x32db7b(0x249)]);}async function loadCoins(_0x30b364){const _0x75db59=_0x39baf0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x112293,_0x35d224=0x0,_0x541968=0x0;_0x30b364['forEach'](_0xc74618=>{const _0x11ff96=_0x56e7;loading[_0x11ff96(0x1f4)][_0x11ff96(0xf7)](_0xc74618);}),loadingCanceled=![];let _0x55d6be=![];while(_0x112293!=_0x30b364[_0x75db59(0x138)]+maxLoadingProgress){_0x112293=loadingProgress,_0x30b364[_0x75db59(0x191)](_0x3593cb=>{const _0x497240=_0x75db59;if(gTicker[noslash(_0x3593cb)]){loading[_0x497240(0x1f4)]=loading[_0x497240(0x1f4)][_0x497240(0x1dc)](_0x25adec=>_0x25adec!=_0x3593cb);if(!watchedSymbols[_0x497240(0x128)](_0x3593cb))watchedSymbols[_0x497240(0xf7)](_0x3593cb);_0x112293++;}}),loading[_0x75db59(0x26f)]=Math[_0x75db59(0xe5)](_0x112293/(_0x30b364[_0x75db59(0x138)]+maxLoadingProgress)*0x64);loading[_0x75db59(0x26f)]!=0x64&&(_0x541968>0x1e*0x5&&(loading[_0x75db59(0x1dd)]=!![],emitLoadingProgress()),_0x541968>0x78*0x5&&!_0x55d6be&&(_0x55d6be=!![],logHistory(_0x75db59(0x136),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x75db59(0x195)](',\x20')+_0x75db59(0x16e)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x75db59(0x17f)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x75db59(0xf1)]=!![],emitLoadingProgress();break;}else _0x35d224!=loading[_0x75db59(0x26f)]&&(_0x35d224=loading[_0x75db59(0x26f)],emitLoadingProgress()),_0x541968++,await sleep(0xc8);}_0x112293==_0x30b364[_0x75db59(0x138)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x75db59(0x202)]({'status':_0x75db59(0x1ed),'live':_0x75db59(0x17d)},_0x5a2e63=>{}),_0x55d6be&&logHistory(_0x75db59(0x1ef),_0x75db59(0x16b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x275e10=_0x39baf0;proxyEmit(_0x275e10(0x127),{...emittedConfiguration(),'configstate':_0x275e10(0x26c)});}function emitLoadingProgress(){const _0x2533e9=_0x39baf0;proxyEmit(_0x2533e9(0x1df),loading);}async function getFiat(){const _0x15c7eb=_0x39baf0;let _0x20c011=gTicker[stablecoins[_0x15c7eb(0x13b)][_0x15c7eb(0x17c)]],_0x58ae60=gTicker[stablecoins[_0x15c7eb(0x1f0)][_0x15c7eb(0x17c)]];return{'eur':Number(_0x20c011),'usd':Number(_0x58ae60)};}function capitalize(_0x35c30e){const _0xef234a=_0x39baf0;return _0x35c30e[_0xef234a(0xaf)](0x0,0x1)[_0xef234a(0x232)]()+_0x35c30e[_0xef234a(0xaf)](0x1);}function supportedExchanges(){const _0x2c63fa=_0x39baf0,_0xf92cf6=['ws',_0x2c63fa(0xd2),_0x2c63fa(0x14d),_0x2c63fa(0xbb),_0x2c63fa(0x224),_0x2c63fa(0x1a9),'createOrder','fetchOpenOrders',_0x2c63fa(0x22c)];let _0x23de9a=[],_0x51a76b=[],_0x3d45ec=ccxt[_0x2c63fa(0xd8)]['exchanges'];_0x3d45ec[_0x2c63fa(0x191)](_0x407c90=>{const _0x154b99=_0x2c63fa;try{const _0x2f8601=new ccxt[(_0x154b99(0xd8))][_0x407c90]();_0x51a76b[_0x154b99(0xf7)](_0x2f8601);}catch(_0x2d44f6){}}),_0x51a76b[_0x2c63fa(0x191)](_0x187fa0=>{const _0x20d826=_0x2c63fa;let _0x4c75f3=0x0;_0xf92cf6[_0x20d826(0x191)](_0xe1d4a2=>{const _0xc02459=_0x20d826;_0xe1d4a2 in _0x187fa0[_0xc02459(0x103)]&&_0x187fa0[_0xc02459(0x103)][_0xe1d4a2]&&_0x4c75f3++;}),_0x4c75f3==_0xf92cf6[_0x20d826(0x138)]&&_0x23de9a['push'](capitalize(_0x187fa0['id']));});let _0x11c080=[];return _0x3d45ec[_0x2c63fa(0x191)](_0x499898=>{const _0x12e545=_0x2c63fa;_0x499898=capitalize(_0x499898);if(!_0x23de9a['includes'](_0x499898))_0x11c080[_0x12e545(0xf7)](_0x499898);}),_0x23de9a;}function setStartDatePerformance(){const _0x5bb06b=_0x39baf0;if(config&&config[_0x5bb06b(0x222)][0x0][_0x5bb06b(0x26e)]['length']!=0x0){const _0x18342b=config[_0x5bb06b(0x222)][0x0][_0x5bb06b(0x26e)];dbPerformance[_0x5bb06b(0x219)](_0x5bb06b(0x24b))['find']({'date':config[_0x5bb06b(0xb9)]})[_0x5bb06b(0x169)]({'coins':_0x18342b})[_0x5bb06b(0x216)]();}}async function recreateCoinResults(){const _0x351bca=_0x39baf0;recreationNeeded=![];let _0x1b7b55,_0x56d239=[];try{for(const _0x3461a7 of currentCoins){if(_0x3461a7[_0x351bca(0x17c)]!=config[_0x351bca(0xb4)]){let _0x402564=0x0,_0x9a644f,_0x41f05e;_0x1b7b55=await getAllEventOrders(_0x3461a7[_0x351bca(0x1ff)]);if(_0x1b7b55[_0x351bca(0x138)]>0x0)_0x1b7b55[_0x351bca(0x191)](_0x357c12=>{const _0x4c1b55=_0x351bca,_0x47de19=_0x3461a7[_0x4c1b55(0x1ff)][_0x4c1b55(0x128)](config[_0x4c1b55(0xb4)]+'/');_0x56d239['push']({'datetime':_0x357c12[_0x4c1b55(0x25b)],'coin':_0x3461a7['coin'],'symbol':_0x3461a7['symbol'],'side':_0x357c12[_0x4c1b55(0x200)],'reverse':_0x47de19,'amount':formatResult(_0x357c12['filled'],0x8),'filled':formatResult(_0x357c12[_0x4c1b55(0x26b)],0x8),'price':formatResult(_0x357c12[_0x4c1b55(0x20e)],0x8)}),_0x402564=_0x357c12['side']=='buy'?_0x402564+_0x357c12[_0x4c1b55(0x26b)]:_0x402564-_0x357c12[_0x4c1b55(0x26b)];if(!_0x41f05e)_0x41f05e=_0x357c12[_0x4c1b55(0x20e)];});_0x9a644f=_0x3461a7[_0x351bca(0x242)]-_0x402564;let _0x160c3c;config['liquidity'][_0x351bca(0x191)](_0x1f3c8d=>{const _0x1e570b=_0x351bca;!_0x160c3c&&(_0x160c3c=_0x1f3c8d[_0x1e570b(0x26e)][_0x1e570b(0x1f6)](_0x368c2c=>_0x368c2c[_0x1e570b(0x17c)]==_0x3461a7['coin']),_0x160c3c&&(_0x9a644f=_0x160c3c[_0x1e570b(0x242)],_0x41f05e=_0x160c3c[_0x1e570b(0x20e)]));});let _0x54e148=dbCoinResults['get'](_0x351bca(0xce))[_0x351bca(0x1f6)]({'coin':_0x3461a7['coin']})[_0x351bca(0x110)]();_0x54e148={'coin':_0x3461a7[_0x351bca(0x17c)],'number':_0x9a644f,'breakeven':_0x41f05e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x351bca(0x219)](_0x351bca(0xce))[_0x351bca(0x1f6)]({'coin':_0x3461a7['coin']})[_0x351bca(0x169)](_0x54e148)[_0x351bca(0x216)]();}}_0x56d239['sort']((_0x3ba603,_0x260dc4)=>_0x3ba603[_0x351bca(0x25b)]>_0x260dc4[_0x351bca(0x25b)]?0x1:_0x260dc4[_0x351bca(0x25b)]>_0x3ba603[_0x351bca(0x25b)]?-0x1:0x0);let _0x3cea71=0x0;for(let _0x1fec0f of _0x56d239){await updateCoinResults(_0x1fec0f,!![]);}}catch(_0x8c0adb){await handleError(_0x8c0adb,_0x351bca(0x14a));}}async function getAllEventOrders(_0x2eadb7){const _0x356c23=_0x39baf0;let _0xf7ba1d=[],_0x2ef800=dbLogs[_0x356c23(0x219)]('logs')[_0x356c23(0x1dc)](_0x361fbc=>{const _0xe96040=_0x356c23,_0x549785=_0x361fbc[_0xe96040(0xe4)][_0xe96040(0x117)]();return _0x549785[_0xe96040(0x128)](_0x2eadb7[_0xe96040(0x117)]())&&(_0x549785[_0xe96040(0x128)](_0xe96040(0x19d))&&_0x549785[_0xe96040(0x128)](_0xe96040(0x144))||_0x549785['includes'](_0xe96040(0x26b))&&_0x549785[_0xe96040(0x128)](_0xe96040(0x144)));})['sortBy'](_0x356c23(0xda))[_0x356c23(0x110)]();return _0x2ef800['forEach'](_0x4a6da7=>{const _0x79257b=_0x356c23,_0x253b2a=_0x4a6da7[_0x79257b(0xe4)][_0x79257b(0x128)](_0x79257b(0x1e3))?_0x79257b(0x1e3):_0x79257b(0x198),_0x524ed5=/#([0-9]|\.)+\s/i,_0x33b2ee=Number(_0x524ed5[_0x79257b(0x1fb)](_0x4a6da7['event'])[0x0][_0x79257b(0xb2)](0x1)),_0x248d1a=/@([0-9]|\.)+$/i,_0x369319=Number(_0x248d1a['exec'](_0x4a6da7['event'])[0x0][_0x79257b(0xb2)](0x1));_0xf7ba1d[_0x79257b(0xf7)]({'datetime':_0x4a6da7[_0x79257b(0xda)],'coin':symbolToCoin(_0x2eadb7),'symbol':_0x2eadb7,'side':_0x253b2a,'amount':_0x33b2ee,'filled':_0x33b2ee,'price':_0x369319});}),_0xf7ba1d;}async function validate24hChanges(){const _0x5a6f37=_0x39baf0;for(const _0x1616e9 of currentCoins){if(_0x1616e9[_0x5a6f37(0x17c)]!=config[_0x5a6f37(0xb4)]){let _0x55f886;_0x1616e9[_0x5a6f37(0x266)]?_0x55f886=formatResult((0x1/(gChange[_0x1616e9[_0x5a6f37(0x1ff)]]/0x64+0x1)-0x1)*0x64,0x3):_0x55f886=gChange[_0x1616e9[_0x5a6f37(0x1ff)]],_0x55f886<config[_0x5a6f37(0x16c)]&&(logHistory(_0x5a6f37(0x136),_0x1616e9[_0x5a6f37(0x17c)]+_0x5a6f37(0x217)+_0x55f886+'%'),logHistory(_0x5a6f37(0x136),_0x5a6f37(0x182)),logHistory(_0x5a6f37(0x136),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2ee2e6,_0x44706e){const _0x49975a=_0x39baf0;if(!_0x2ee2e6)return!![];const _0x65b94b=_0x44706e[_0x49975a(0x15b)]('.'),_0x33c895=_0x2ee2e6[_0x49975a(0x15b)]('.');for(var _0x385d13=0x0;_0x385d13<_0x33c895[_0x49975a(0x138)];_0x385d13++){const _0x505bdf=~~_0x33c895[_0x385d13],_0x17b8ac=~~_0x65b94b[_0x385d13];if(_0x505bdf<_0x17b8ac)return!![];if(_0x505bdf>_0x17b8ac)return![];}return![];}async function oneTimeMigration(){const _0x211f7b=_0x39baf0;let _0x184125=dbLogs[_0x211f7b(0x219)]('version')[_0x211f7b(0x110)]();if(isOlderVersion(_0x184125,'2.3.5')){let _0x3a45ac=[];const _0x52d55e=dbLogs[_0x211f7b(0x219)](_0x211f7b(0x1d5))['value']();_0x52d55e[_0x211f7b(0x191)](_0x1afeb3=>{const _0x5e0421=_0x211f7b;_0x3a45ac[_0x5e0421(0xf7)]({'time':_0x1afeb3[_0x5e0421(0xda)],'type':_0x1afeb3[_0x5e0421(0x11a)],'event':_0x1afeb3[_0x5e0421(0xe4)]});}),dbLogs['get'](_0x211f7b(0x1d5))[_0x211f7b(0x169)](_0x3a45ac)['write']();}let _0x3ac2d8=dbConfig[_0x211f7b(0x219)]('version')[_0x211f7b(0x110)]();if(isOlderVersion(_0x3ac2d8,'2.3.5')){let _0x17f568=dbConfig[_0x211f7b(0x219)](_0x211f7b(0xbc))[_0x211f7b(0x1f6)]({'botID':botID})[_0x211f7b(0x110)]();if(_0x17f568){let _0x293b3c=[];_0x17f568[_0x211f7b(0x25e)]['forEach'](_0x3a05b9=>{const _0x518ea1=_0x211f7b;_0x293b3c[_0x518ea1(0xf7)]({'coin':_0x3a05b9[_0x518ea1(0x17c)],'number':_0x3a05b9[_0x518ea1(0xe8)],'price':_0x3a05b9[_0x518ea1(0x18d)]}),delete _0x3a05b9['startnumber'],delete _0x3a05b9['startprice'];});if(_0x293b3c[_0x211f7b(0x138)]!==0x0)fs['writeFile'](configbackuppath+(_0x211f7b(0x12a)+botID+_0x211f7b(0x1c7)),JSON['stringify'](_0x293b3c,null,0x4),function(_0x36884e){if(_0x36884e){}});const _0x3e3540=(_0x145669,_0xe22e83)=>{const _0x4c7a2f=_0x211f7b;let _0x1c8e53=[];_0xe22e83[_0x4c7a2f(0x191)](_0x145449=>{const _0x226d20=_0x4c7a2f,_0x377653=_0x145669[_0x226d20(0x1f6)](_0x1e9f53=>_0x1e9f53[_0x226d20(0x17c)]==_0x145449['coin']);if(!_0x377653)_0x1c8e53[_0x226d20(0xf7)](_0x145449);});let _0x174979=[];return _0x145669[_0x4c7a2f(0x191)](_0x32655b=>{const _0x24e5ef=_0x4c7a2f,_0x3f9c1a=_0xe22e83[_0x24e5ef(0x1f6)](_0x5690f1=>_0x5690f1[_0x24e5ef(0x17c)]==_0x32655b[_0x24e5ef(0x17c)]);if(!_0x3f9c1a||_0x3f9c1a[_0x24e5ef(0x242)]==0x0&&_0x32655b['number']!=0x0)_0x174979[_0x24e5ef(0xf7)](_0x32655b);}),{'missingDay1':_0x1c8e53,'notInDay2':_0x174979};},_0x3534b0=dbPerformance[_0x211f7b(0x219)]('data')['cloneDeep']()[_0x211f7b(0x110)]();if(_0x3534b0[_0x211f7b(0x138)]>0x1){const {missingDay1:_0x31644b,notInDay2:_0x128ea6}=_0x3e3540(_0x293b3c,_0x3534b0[0x1]['coins']);_0x293b3c=[..._0x293b3c,..._0x31644b],_0x128ea6[_0x211f7b(0x191)](_0x3fd4fb=>{const _0x56467e=_0x211f7b;let _0x48d9f0=_0x293b3c[_0x56467e(0x1b0)](_0x24d105=>_0x24d105[_0x56467e(0x17c)]==_0x3fd4fb[_0x56467e(0x17c)]);_0x48d9f0!=-0x1&&_0x293b3c['splice'](_0x48d9f0,0x1);});}_0x293b3c[_0x211f7b(0x11e)]((_0x48fcd0,_0x13d918)=>_0x48fcd0[_0x211f7b(0x17c)]>_0x13d918[_0x211f7b(0x17c)]?0x1:_0x13d918[_0x211f7b(0x17c)]>_0x48fcd0[_0x211f7b(0x17c)]?-0x1:0x0);let _0x1baf16=[{'date':_0x17f568[_0x211f7b(0xb9)],'changes':_0x293b3c}];_0x3534b0[_0x211f7b(0x138)]>0x2&&_0x3534b0[_0x211f7b(0x191)]((_0x195558,_0x3c1eba)=>{const _0x289c64=_0x211f7b;if(_0x3c1eba>0x0&&_0x3c1eba<_0x3534b0['length']-0x1){const {missingDay1:_0x5776bb,notInDay2:_0x541b85}=_0x3e3540(_0x3534b0[_0x3c1eba][_0x289c64(0xce)],_0x3534b0[_0x3c1eba+0x1]['coins']);_0x293b3c=[],(_0x5776bb['length']!=0x0||_0x541b85[_0x289c64(0x138)]!=0x0)&&(_0x5776bb[_0x289c64(0x138)]!=0x0&&_0x293b3c['push'](..._0x5776bb),_0x541b85[_0x289c64(0x138)]!=0x0&&(_0x541b85[_0x289c64(0x191)](_0x47b17c=>{const _0x47e0d8=_0x289c64;_0x47b17c['number']=-_0x47b17c[_0x47e0d8(0x242)];}),_0x293b3c[_0x289c64(0xf7)](..._0x541b85)),_0x293b3c[_0x289c64(0x11e)]((_0x2fd044,_0x4b5066)=>_0x2fd044['coin']>_0x4b5066[_0x289c64(0x17c)]?0x1:_0x4b5066[_0x289c64(0x17c)]>_0x2fd044[_0x289c64(0x17c)]?-0x1:0x0),_0x1baf16[_0x289c64(0xf7)]({'date':_0x3534b0[_0x3c1eba+0x1][_0x289c64(0x1a5)],'changes':_0x293b3c}));}}),dbConfig[_0x211f7b(0x219)]('bot')[_0x211f7b(0x1f6)]({'botID':botID})[_0x211f7b(0x169)]({..._0x17f568,'liquidity':_0x1baf16})['write']();}}if(isOlderVersion(_0x3ac2d8,_0x211f7b(0xc3))){let _0x2526c0=dbConfig[_0x211f7b(0x219)](_0x211f7b(0xbc))[_0x211f7b(0x1f6)]({'botID':botID})[_0x211f7b(0x110)]();if(_0x2526c0){const _0x42fb94=_0x2526c0[_0x211f7b(0x11b)],_0x3ee74d=_0x42fb94?capitalize(_0x42fb94):'Binance';dbConfig[_0x211f7b(0x219)](_0x211f7b(0xbc))['find']({'botID':botID})['assign']({'exchange':_0x3ee74d})[_0x211f7b(0x216)]();}}if(isOlderVersion(_0x3ac2d8,_0x211f7b(0x1d8))){let _0x547a2=dbConfig[_0x211f7b(0x219)](_0x211f7b(0xbc))[_0x211f7b(0x1f6)]({'botID':botID})[_0x211f7b(0x110)]();if(_0x547a2){const _0x47ec6b=_0x547a2[_0x211f7b(0x1ec)],_0x2c5029=_0x47ec6b?_0x211f7b(0xc1):![];dbConfig[_0x211f7b(0x219)]('bot')[_0x211f7b(0x1f6)]({'botID':botID})['assign']({'marketcapEnabled':_0x2c5029})[_0x211f7b(0x216)]();}}if(isOlderVersion(_0x3ac2d8,'2.6.23')){let _0x27e5db=dbConfig[_0x211f7b(0x219)]('bot')[_0x211f7b(0x1f6)]({'botID':botID})['value']();if(_0x27e5db){const _0x288e2a=_0x27e5db[_0x211f7b(0x263)],_0x49f390=_0x288e2a?_0x211f7b(0x26a):![];dbConfig[_0x211f7b(0x219)](_0x211f7b(0xbc))[_0x211f7b(0x1f6)]({'botID':botID})[_0x211f7b(0x169)]({'autoliquidity':_0x49f390})['write']();}}let _0x1fd40c=dbPerformance[_0x211f7b(0x219)](_0x211f7b(0x21f))[_0x211f7b(0x110)]();isOlderVersion(_0x1fd40c,_0x211f7b(0x107))&&setStartDatePerformance();let _0x313a10=dbCoinResults[_0x211f7b(0x219)](_0x211f7b(0x21f))['value']();if(isOlderVersion(_0x313a10,_0x211f7b(0xcb))){let _0x3ecd9a=dbCoinResults['get'](_0x211f7b(0xce))['value']();if(_0x3ecd9a[_0x211f7b(0x138)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x12a2c1=_0x39baf0;dbConfig['set'](_0x12a2c1(0x21f),serverversion)[_0x12a2c1(0x216)](),dbPerformance[_0x12a2c1(0x1e0)](_0x12a2c1(0x21f),serverversion)['write'](),dbLogs['set']('version',serverversion)[_0x12a2c1(0x216)](),dbCoinResults[_0x12a2c1(0x1e0)](_0x12a2c1(0x21f),serverversion)['write']();}function getConfiguration(_0x1e9a7e){const _0x288be8=_0x39baf0;let _0x4a956a=dbConfig['get']('bot')[_0x288be8(0x1f6)]({'botID':_0x1e9a7e})['value']();if(_0x4a956a){let _0xeb6f08=![];typeof _0x4a956a[_0x288be8(0x1bf)]==_0x288be8(0x256)&&(_0x4a956a={..._0x4a956a,'threshold':Number(_0x4a956a['threshold'])},_0xeb6f08=!![]),_0x4a956a[_0x288be8(0x16c)]==undefined&&(_0x4a956a={..._0x4a956a,'change24h':-0x14},_0xeb6f08=!![]),_0x4a956a['fiat']==undefined&&(_0x4a956a={..._0x4a956a,'fiat':_0x288be8(0x143)},_0xeb6f08=!![]),_0x4a956a[_0x288be8(0x1a2)]==undefined&&(_0x4a956a={..._0x4a956a,'onepagemode':settings[_0x288be8(0x1a2)]},_0xeb6f08=!![]),_0x4a956a[_0x288be8(0x1e7)]==undefined&&(_0x4a956a={..._0x4a956a,'colorscheme':_0x288be8(0x151)},_0xeb6f08=!![]),_0x4a956a[_0x288be8(0x263)]==undefined&&(_0x4a956a={..._0x4a956a,'autoliquidity':_0x288be8(0x26a)},_0xeb6f08=!![]),_0x4a956a['marketcapApi']==undefined&&(_0x4a956a={..._0x4a956a,'marketcapApi':settings['marketcapApi']?!![]:![]},_0xeb6f08=!![]),_0x4a956a[_0x288be8(0x1ec)]==undefined&&(_0x4a956a={..._0x4a956a,'marketcapEnabled':![]},_0xeb6f08=!![]),_0xeb6f08&&(_0x4a956a={'botID':_0x4a956a[_0x288be8(0x19c)],'exchange':_0x4a956a['exchange'],'apiKey':_0x4a956a[_0x288be8(0x1b8)],'apiSecret':_0x4a956a[_0x288be8(0x126)],'apiPassword':_0x4a956a[_0x288be8(0x188)],'basecoin':_0x4a956a['basecoin'],'botname':_0x4a956a['botname'],'showname':_0x4a956a[_0x288be8(0x23b)],'threshold':_0x4a956a[_0x288be8(0x1bf)],'ordertype':_0x4a956a['ordertype'],'timeout':_0x4a956a[_0x288be8(0x1dd)],'fiat':_0x4a956a['fiat'],'startdate':_0x4a956a[_0x288be8(0xb9)],'recreate':_0x4a956a[_0x288be8(0xba)],'timeshift':_0x4a956a[_0x288be8(0x226)],'onepagemode':_0x4a956a[_0x288be8(0x1a2)],'headless':_0x4a956a['headless'],'cooldown':_0x4a956a[_0x288be8(0xbf)],'change24h':_0x4a956a[_0x288be8(0x16c)],'emojibuy':_0x4a956a[_0x288be8(0x1d1)],'emojisell':_0x4a956a[_0x288be8(0x210)],'colorscheme':_0x4a956a[_0x288be8(0x1e7)],'marketcapApi':_0x4a956a['marketcapApi'],'marketcapEnabled':_0x4a956a[_0x288be8(0x1ec)],'portfolio':_0x4a956a[_0x288be8(0x25e)],'autoliquidity':_0x4a956a[_0x288be8(0x263)],'liquidity':_0x4a956a['liquidity'],'openOrders':_0x4a956a['openOrders']},dbConfig['get']('bot')[_0x288be8(0x1ee)]()[_0x288be8(0x216)](),dbConfig[_0x288be8(0x219)](_0x288be8(0xbc))[_0x288be8(0xf7)](_0x4a956a)[_0x288be8(0x216)]());}else _0x4a956a={'botID':_0x1e9a7e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x288be8(0x1be)+_0x1e9a7e,'showname':![],'threshold':0x3,'ordertype':_0x288be8(0x19d),'timeout':0x14,'fiat':_0x288be8(0x143),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x288be8(0x226)],'onepagemode':settings[_0x288be8(0x1a2)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x288be8(0x151),'marketcapApi':settings[_0x288be8(0x24c)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4a956a;}function emittedConfiguration(){const _0x1b1373=_0x39baf0;let _0x40182c;if(config[_0x1b1373(0x1b8)]=='')_0x40182c={...config,'configstate':_0x1b1373(0x21e)};else config[_0x1b1373(0x1b8)]==_0x1b1373(0x1fa)?_0x40182c={...config,'configstate':_0x1b1373(0x225)}:(_0x40182c={...config,'apiKey':_0x1b1373(0x1c3),'apiSecret':_0x1b1373(0x1c3)},config[_0x1b1373(0x188)]&&(_0x40182c[_0x1b1373(0x188)]='************'));return _0x40182c['enableFiatToggle']=enableFiatToggle,_0x40182c;}function getSettings(){const _0x41e973=_0x39baf0;return dbSettings['get'](_0x41e973(0x1b3))['value']();}function getSecure(){const _0x442fc6=_0x39baf0;return dbSecure[_0x442fc6(0x219)](_0x442fc6(0x1a4))[_0x442fc6(0x110)]()||{};}function updateTimeshift(_0x508d4d){const _0x158494=_0x39baf0;let _0x2e9b08=dbConfig[_0x158494(0x219)](_0x158494(0xbc))[_0x158494(0x1f6)]({'botID':botID})[_0x158494(0x110)]();_0x2e9b08&&dbConfig[_0x158494(0x219)](_0x158494(0xbc))['find']({'botID':botID})[_0x158494(0x169)]({'timeshift':_0x508d4d})['write'](),config[_0x158494(0x226)]=_0x508d4d,proxyEmit(_0x158494(0x127),emittedConfiguration());}function updateOnepagemode(_0x558309){const _0x59de7a=_0x39baf0;let _0x3fa3f5=dbConfig['get']('bot')[_0x59de7a(0x1f6)]({'botID':botID})[_0x59de7a(0x110)]();_0x3fa3f5&&dbConfig[_0x59de7a(0x219)]('bot')[_0x59de7a(0x1f6)]({'botID':botID})['assign']({'onepagemode':_0x558309})['write'](),config[_0x59de7a(0x1a2)]=_0x558309,proxyEmit(_0x59de7a(0x127),emittedConfiguration());}function updateMarketcapApi(_0x1f4eb7){const _0x5af249=_0x39baf0,_0xa20362=_0x1f4eb7?!![]:![];let _0x50999b=dbConfig[_0x5af249(0x219)]('bot')['find']({'botID':botID})[_0x5af249(0x110)]();_0x50999b&&dbConfig[_0x5af249(0x219)](_0x5af249(0xbc))[_0x5af249(0x1f6)]({'botID':botID})[_0x5af249(0x169)]({'marketcapApi':_0xa20362})[_0x5af249(0x216)](),config['marketcapApi']=_0xa20362,getMarketCap(),proxyEmit(_0x5af249(0x127),emittedConfiguration());}async function storeConfiguration(_0x2b790e){const _0x3e4b64=_0x39baf0;logger[_0x3e4b64(0x1f7)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4b7450=![],_0x2a8752=![],_0x1c84d3=[];_0x2b790e[_0x3e4b64(0x25e)]['forEach'](_0x5d99db=>{const _0xb91038=_0x3e4b64;if(!_0x5d99db['excluded']&&_0x5d99db[_0xb91038(0x17c)]!=_0x2b790e[_0xb91038(0xb4)])_0x1c84d3[_0xb91038(0xf7)](_0x5d99db['symbol']);}),_0x1c84d3['forEach'](_0xe22818=>{const _0x3d8f1c=_0x3e4b64,_0x2f34f1=currentCoins[_0x3d8f1c(0x1f6)](_0x8dac28=>_0x8dac28['symbol']==_0xe22818);!_0x2f34f1&&(_0x4b7450=!![]);}),currentCoins[_0x3e4b64(0x191)](_0x129fdb=>{const _0x192dc0=_0x3e4b64;if(_0x129fdb[_0x192dc0(0x17c)]!=config['basecoin']){const _0x1dcbdb=_0x1c84d3[_0x192dc0(0x1f6)](_0x388b26=>_0x388b26==_0x129fdb[_0x192dc0(0x1ff)]);!_0x1dcbdb&&(_0x4b7450=!![]);}}),_0x2b790e[_0x3e4b64(0x25e)][_0x3e4b64(0x191)](_0x4d7b1f=>{const _0x222585=_0x3e4b64,_0x34fc77=config[_0x222585(0x25e)][_0x222585(0x1f6)](_0x45fd37=>_0x45fd37[_0x222585(0x17c)]==_0x4d7b1f[_0x222585(0x17c)]);if(_0x34fc77&&_0x4d7b1f[_0x222585(0x183)]!=_0x34fc77[_0x222585(0x183)])_0x2a8752=!![];});let _0x3bec9e=dbConfig['get'](_0x3e4b64(0xbc))['find']({'botID':botID})[_0x3e4b64(0x110)]();_0x2b790e={..._0x2b790e,'apiKey':crypt[_0x3e4b64(0x273)](secure[_0x3e4b64(0x15a)],_0x2b790e[_0x3e4b64(0x1b8)])[_0x3e4b64(0x178)],'apiSecret':crypt[_0x3e4b64(0x273)](secure[_0x3e4b64(0x15a)],_0x2b790e['apiSecret'])[_0x3e4b64(0x178)]};_0x2b790e[_0x3e4b64(0x188)]&&(_0x2b790e[_0x3e4b64(0x188)]=crypt[_0x3e4b64(0x273)](secure[_0x3e4b64(0x15a)],_0x2b790e[_0x3e4b64(0x188)])[_0x3e4b64(0x178)]);let _0x39dc33=![];if(_0x3bec9e){_0x2b790e[_0x3e4b64(0x1b8)]==_0x3e4b64(0x1c3)?_0x2b790e[_0x3e4b64(0x1b8)]=config['apiKey']:_0x39dc33=!![];_0x2b790e[_0x3e4b64(0x126)]==_0x3e4b64(0x1c3)?_0x2b790e[_0x3e4b64(0x126)]=config[_0x3e4b64(0x126)]:_0x39dc33=!![];if(_0x2b790e['apiPassword']==_0x3e4b64(0x1c3))_0x2b790e[_0x3e4b64(0x188)]=config[_0x3e4b64(0x188)];else{if(_0x2b790e['apiPassword'])_0x39dc33=!![];}dbConfig[_0x3e4b64(0x219)](_0x3e4b64(0xbc))['find']({'botID':botID})[_0x3e4b64(0x169)](_0x2b790e)[_0x3e4b64(0x216)]();}else dbConfig[_0x3e4b64(0x219)](_0x3e4b64(0xbc))[_0x3e4b64(0xf7)](_0x2b790e)[_0x3e4b64(0x216)](),_0x39dc33=!![],process[_0x3e4b64(0x202)]({'status':'enabled','live':_0x3e4b64(0x17d)},_0x1f4444=>{});process['send']({'botname':_0x2b790e['botname']},_0x3ba976=>{}),config={..._0x2b790e},updateBotManager(),proxyEmit(_0x3e4b64(0x235)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x39dc33)!_0x3bec9e?await reset(!![]):getBalances();else _0x4b7450||_0x2a8752?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1bacf7){const _0x125efc=_0x39baf0,_0x32edd2={...config,'headless':_0x1bacf7[_0x125efc(0x249)]};let _0x32ad95=dbConfig[_0x125efc(0x219)]('bot')['find']({'botID':botID})[_0x125efc(0x110)]();_0x32ad95&&dbConfig[_0x125efc(0x219)]('bot')['find']({'botID':botID})[_0x125efc(0x169)](_0x32edd2)['write'](),config={..._0x32edd2},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4e415e){const _0x218d61=_0x39baf0,_0x4b6e7d={...config,'fiat':_0x4e415e};let _0x157fa3=dbConfig['get'](_0x218d61(0xbc))['find']({'botID':botID})['value']();_0x157fa3&&dbConfig[_0x218d61(0x219)](_0x218d61(0xbc))['find']({'botID':botID})['assign'](_0x4b6e7d)[_0x218d61(0x216)](),config={..._0x4b6e7d},proxyEmit(_0x218d61(0x127),emittedConfiguration());}function resetHistory(){const _0x403aea=_0x39baf0;logger['full'](_0x403aea(0xfd));try{if(fs[_0x403aea(0x234)](path[_0x403aea(0x195)](configpath,_0x403aea(0xdc)+botID+_0x403aea(0x26d))))fs[_0x403aea(0x125)](path[_0x403aea(0x195)](configpath,'bot-'+botID+_0x403aea(0x26d)));if(fs[_0x403aea(0x234)](path[_0x403aea(0x195)](configpath,'bot-'+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0x403aea(0xdc)+botID+_0x403aea(0x203)));if(fs['existsSync'](path['join'](configpath,_0x403aea(0xdc)+botID+_0x403aea(0x255))))fs['unlinkSync'](path[_0x403aea(0x195)](configpath,_0x403aea(0xdc)+botID+_0x403aea(0x255)));}catch(_0x2dd83e){if(_0x2dd83e)logger[_0x403aea(0x123)]('Error\x20while\x20deleting\x20files:\x20',_0x2dd83e);}const _0x227012=getDate();let _0x1cfcf7=[];currentCoins[_0x403aea(0x191)](_0x8bbc4f=>{const _0x291238=_0x403aea;_0x1cfcf7[_0x291238(0xf7)]({'coin':_0x8bbc4f[_0x291238(0x17c)],'number':_0x8bbc4f['number'],'price':_0x8bbc4f[_0x291238(0xd1)]});});let _0x8a82ee=dbConfig['get'](_0x403aea(0xbc))['find']({'botID':botID})['value']();_0x8a82ee&&(dbConfig[_0x403aea(0x219)]('bot')[_0x403aea(0x1f6)]({'botID':botID})[_0x403aea(0x169)]({'liquidity':[{'date':_0x227012,'changes':_0x1cfcf7}]})[_0x403aea(0x216)](),config[_0x403aea(0x222)]=[]),restartBot(!![]);}function noslash(_0x8ae3b3){const _0x3c235e=_0x39baf0;return _0x8ae3b3[_0x3c235e(0x18c)]('/','');}function updateHighestFee(_0x340544){const _0x4e2aba=_0x39baf0;if(_0x340544[_0x4e2aba(0x266)]){let _0x5a5517={'filled':_0x340544[_0x4e2aba(0x26b)]*_0x340544[_0x4e2aba(0x20e)],'amount':_0x340544[_0x4e2aba(0x26b)]*_0x340544[_0x4e2aba(0x20e)],'side':_0x340544[_0x4e2aba(0x200)]==_0x4e2aba(0x1e3)?_0x4e2aba(0x198):'sell','price':0x1/_0x340544['price']};_0x340544={..._0x340544,..._0x5a5517};}const _0x1a7597=defaultFee*_0x340544[_0x4e2aba(0x26b)]*_0x340544[_0x4e2aba(0x20e)];lastFees['recent20']['length']===0x14&&lastFees[_0x4e2aba(0x14e)]['shift'](),lastFees[_0x4e2aba(0x14e)][_0x4e2aba(0xf7)](_0x1a7597),lastFees[_0x4e2aba(0x261)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1e9a28){const _0xfcc2ae=_0x39baf0;logger[_0xfcc2ae(0x1f7)](_0xfcc2ae(0xad)+_0x1e9a28[_0xfcc2ae(0x1ff)]+_0xfcc2ae(0x23c)+_0x1e9a28[_0xfcc2ae(0xf0)]+'\x20|\x20'+_0x1e9a28[_0xfcc2ae(0x26b)]+'\x20/\x20'+_0x1e9a28[_0xfcc2ae(0x19f)]+'\x20|\x20'+_0x1e9a28['id']);let _0x24ee25=_0x1e9a28[_0xfcc2ae(0xf0)],_0x1cbba9=![];currentCoins[_0xfcc2ae(0x191)](_0x1effe0=>{const _0x291859=_0xfcc2ae;_0x1effe0[_0x291859(0x1ff)]==_0x1e9a28['symbol']&&(_0x1cbba9=!![]);});if(!_0x1cbba9)return;const _0xc73f75=currentCoins[_0xfcc2ae(0x1f6)](_0x42ddb3=>_0x42ddb3[_0xfcc2ae(0x1ff)]==_0x1e9a28['symbol']),_0x5abb0d=_0x28b99e=>{const _0x4bec02=_0xfcc2ae;if(_0xc73f75)_0xc73f75[_0x4bec02(0x20c)]=_0x28b99e;};let _0x3b147b=![];for(const _0x16282b of lastOrders){const _0x1a8f6a=0x64,_0x50fde4=0x1388;let _0x5637c6=0x0;while(!_0x16282b['orderId']&&_0x5637c6*_0x1a8f6a<_0x50fde4){_0x5637c6++,await sleep(_0x1a8f6a);}if(_0x5637c6>0x0)logger[_0xfcc2ae(0x1f7)]('Waited\x20'+_0x5637c6*_0x1a8f6a/0x3e8+_0xfcc2ae(0x19a));_0x16282b[_0xfcc2ae(0x1c4)]==_0x1e9a28['id']&&(_0x3b147b=!![]);}if(_0x24ee25==_0xfcc2ae(0x109)){_0x5abb0d(_0xfcc2ae(0x109));if(_0x1e9a28[_0xfcc2ae(0x26b)]>0x0){if(_0x3b147b){setBlockTransactionDetection(!![]),logger[_0xfcc2ae(0x1f7)](_0xfcc2ae(0x21d)+_0x1e9a28['id']);const _0x455a96=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x455a96,setBlockTransactionDetection(![]);}else logger[_0xfcc2ae(0x1f7)](_0xfcc2ae(0x168)+_0x1e9a28['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x24ee25==_0xfcc2ae(0x193)){_0x5abb0d('canceled');const _0x56511a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x56511a,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x24ee25==_0xfcc2ae(0x22f)){if(lastOrders)for(const _0x592f1f of lastOrders){if(_0x592f1f[_0xfcc2ae(0x1c4)]==_0x1e9a28['id']){logger['debug'](_0xfcc2ae(0x1e4)+_0x1e9a28['id']),_0x3b147b=!![];if(_0x592f1f[_0xfcc2ae(0x26b)]==0x0){setBlockTransactionDetection(!![]),logger[_0xfcc2ae(0x1f7)](_0xfcc2ae(0x192)+_0x1e9a28['id']);if(_0x1e9a28[_0xfcc2ae(0xb0)])_0x592f1f[_0xfcc2ae(0x20e)]=_0x1e9a28[_0xfcc2ae(0xb0)];else{if(_0x1e9a28[_0xfcc2ae(0x20e)])_0x592f1f[_0xfcc2ae(0x20e)]=_0x1e9a28[_0xfcc2ae(0x20e)];else{}}_0x592f1f[_0xfcc2ae(0x26b)]=_0x1e9a28['filled'],updateHighestFee(_0x592f1f),_0x5abb0d(_0xfcc2ae(0x26b)),await validateOrders();if(lockOrders==ORDERS[_0xfcc2ae(0xfe)]){const _0xa76c3d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xa76c3d,setBlockTransactionDetection(![]);}_0x592f1f[_0xfcc2ae(0x204)]={'currency':_0x1e9a28[_0xfcc2ae(0x204)]?_0x1e9a28[_0xfcc2ae(0x204)][_0xfcc2ae(0x223)]:null,'cost':_0x1e9a28[_0xfcc2ae(0x204)]?_0x1e9a28[_0xfcc2ae(0x204)][_0xfcc2ae(0x19e)]:0x0},await updateCoinResults(_0x592f1f);}}}!_0x3b147b&&(logger[_0xfcc2ae(0x1f7)](_0xfcc2ae(0xb1)+_0x1e9a28['id']),_0x5abb0d(_0xfcc2ae(0x26b)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5f39e1=JSON['parse'](lastBalances[_0xfcc2ae(0x25e)]);const _0x3b7c2c=_0x5f39e1['find'](_0x1c25f0=>_0x1c25f0[_0xfcc2ae(0x1ff)]==_0x1e9a28[_0xfcc2ae(0x1ff)]);if(_0x3b7c2c){if(_0x24ee25=='open')_0x3b7c2c[_0xfcc2ae(0x20c)]=_0x3b7c2c['orderstatus']==_0xfcc2ae(0x26b)?'filled':_0xfcc2ae(0x109);else{if(_0x24ee25==_0xfcc2ae(0x193))_0x3b7c2c['orderstatus']=_0x3b7c2c[_0xfcc2ae(0x20c)]==_0xfcc2ae(0x26b)?_0xfcc2ae(0x26b):_0xfcc2ae(0x193);else _0x24ee25==_0xfcc2ae(0x22f)&&(_0x3b7c2c[_0xfcc2ae(0x20c)]=_0xfcc2ae(0x26b));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x5f39e1)},proxyEmit(_0xfcc2ae(0x20a),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3ba67f=_0x39baf0;await getOpenOrders();let _0xb8c5e9=![];currentCoins[_0x3ba67f(0x191)](_0x41a170=>{const _0x423637=_0x3ba67f;_0xb8c5e9=allOpenOrders[_0x423637(0x1f6)](_0x5b3b0a=>_0x5b3b0a[_0x423637(0x1ff)]==_0x41a170[_0x423637(0x1ff)]),_0x41a170[_0x423637(0x20c)]=_0xb8c5e9?'open':'none';});}async function getCoins(_0x4864a2=0x0,_0x56aa4d=!![],_0x2b325f=config[_0x39baf0(0xb4)]){const _0x443550=_0x39baf0;let _0x598e6b,_0x404148=[],_0x19d28f=[],_0x94cdd6=[];if(_0x4864a2)await sleep(_0x4864a2);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x598e6b=await exchange[_0x443550(0x22c)](),mybalances=_0x598e6b[_0x443550(0x154)];for(const [_0x3f14bb,_0xb49c80]of Object[_0x443550(0x124)](mybalances)){_0x94cdd6[_0x443550(0xf7)](_0x3f14bb);}config[_0x443550(0x25e)][_0x443550(0x191)](_0x4a8512=>{!_0x94cdd6['includes'](_0x4a8512['coin'])&&(mybalances[_0x4a8512['coin']]=0x0);});if(_0x2b325f=='')for(const [_0x397c86,_0x4bc200]of Object['entries'](mybalances)){_0x4bc200!=0x0&&_0x404148['push']({'coin':_0x397c86});}else for(const [_0x480008,_0x2dc4b9]of Object[_0x443550(0x124)](mybalances)){const _0x538df7=config[_0x443550(0x25e)][_0x443550(0x1f6)](_0x1a3a89=>_0x1a3a89['coin']==_0x480008),_0x4dcf07=_0x480008+'/'+_0x2b325f,_0x288f62=_0x2b325f+'/'+_0x480008,_0x494ab7=currentCoins[_0x443550(0x1f6)](_0x39ff2a=>_0x39ff2a[_0x443550(0x17c)]==_0x480008);if((_0x2dc4b9!=0x0||_0x538df7)&&(allSymbols[_0x443550(0x128)](_0x4dcf07)||_0x480008==_0x2b325f))_0x494ab7?_0x404148[_0x443550(0xf7)]({..._0x494ab7,'number':Math[_0x443550(0x251)](_0x2dc4b9+(_0x538df7&&_0x538df7[_0x443550(0x183)]||0x0),0x0)}):_0x404148['push']({'coin':_0x480008,'symbol':_0x4dcf07,'reverse':![],'number':Math[_0x443550(0x251)](_0x2dc4b9+(_0x538df7&&_0x538df7[_0x443550(0x183)]||0x0),0x0),'orderstatus':_0x443550(0xdf)});else{if((_0x2dc4b9!=0x0||_0x538df7)&&allSymbols[_0x443550(0x128)](_0x288f62))_0x494ab7?_0x404148[_0x443550(0xf7)]({..._0x494ab7,'number':Math[_0x443550(0x251)](_0x2dc4b9+(_0x538df7&&_0x538df7[_0x443550(0x183)]||0x0),0x0)}):_0x404148['push']({'coin':_0x480008,'symbol':_0x288f62,'reverse':!![],'number':Math[_0x443550(0x251)](_0x2dc4b9+(_0x538df7&&_0x538df7[_0x443550(0x183)]||0x0),0x0),'orderstatus':'none'});else _0x538df7&&_0x404148['push']({'coin':_0x538df7[_0x443550(0x17c)],'symbol':_0x538df7[_0x443550(0x1ff)],'reverse':_0x538df7[_0x443550(0x266)],'number':0x0,'orderstatus':_0x443550(0xdf)});}}}catch(_0x567709){if(!_0x56aa4d)handleErrorNoStop(_0x567709,'getCoins()');else await handleError(_0x567709,_0x443550(0x108));}return _0x404148['sort']((_0x583b25,_0x444678)=>_0x583b25['delta']<_0x444678[_0x443550(0x229)]?0x1:_0x444678['delta']<_0x583b25[_0x443550(0x229)]?-0x1:0x0),_0x19d28f=cloneDeep(_0x404148),_0x404148=_0x404148[_0x443550(0x1dc)](_0x14181b=>{const _0x1a5222=_0x443550,_0x1270c0=config[_0x1a5222(0x25e)][_0x1a5222(0x1f6)](_0x1b63bc=>_0x1b63bc[_0x1a5222(0x17c)]==_0x14181b[_0x1a5222(0x17c)]);return _0x1270c0&&!_0x1270c0[_0x1a5222(0x237)];}),[_0x404148,_0x19d28f];}async function getCoinNumber(_0xc375a){const _0x36b84a=_0x39baf0;let _0x506518;try{const _0x30f701=await exchange[_0x36b84a(0x22c)]();_0x506518=_0x30f701[_0x36b84a(0x154)][_0xc375a];}catch(_0x1a855e){await handleError(_0x1a855e,_0x36b84a(0x1d9));}return _0x506518;}async function getOpenOrders(){const _0x286566=_0x39baf0;let _0x28f521;allOpenOrders=[];try{for(const _0x4f0fff of config[_0x286566(0x25e)]){!_0x4f0fff[_0x286566(0x237)]&&_0x4f0fff[_0x286566(0x17c)]!=config[_0x286566(0xb4)]&&(_0x28f521=await exchange[_0x286566(0x1aa)](_0x4f0fff[_0x286566(0x1ff)]),_0x28f521[_0x286566(0x138)]>0x0&&allOpenOrders[_0x286566(0xf7)](_0x28f521[0x0]));}}catch(_0x5ea514){await handleError(_0x5ea514,_0x286566(0xed));}}async function handleOpenOrders(_0xe1db10=0x0){const _0x2753aa=_0x39baf0;allOpenOrders[_0x2753aa(0x138)]==0x0&&lockOrders==ORDERS[_0x2753aa(0xfe)]&&allOrdersPlaced&&(_0xe1db10==0x0?(logger[_0x2753aa(0x1f7)](_0x2753aa(0x150)),_0xe1db10++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2753aa(0x1f7)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x18f4b5){const _0x42001e=_0x39baf0,_0x3460bd=ccxt[_0x42001e(0xd8)][_0x18f4b5[_0x42001e(0x11b)][_0x42001e(0x117)]()],_0x3d3397=new _0x3460bd({'apiKey':_0x18f4b5[_0x42001e(0x1b8)],'secret':_0x18f4b5[_0x42001e(0x126)],'options':{'defaultType':_0x42001e(0x14c)}});if(_0x18f4b5[_0x42001e(0x188)])_0x3d3397[_0x42001e(0xfb)]=_0x18f4b5[_0x42001e(0x188)];try{await _0x3d3397[_0x42001e(0x22c)]();}catch(_0x3ca50b){logger['debug'](_0x42001e(0x14f)+_0x3ca50b[_0x42001e(0x22b)]());throw _0x3ca50b;}}function cloneDeep(_0x28eba7){const _0xc91ea3=_0x39baf0;return JSON['parse'](JSON[_0xc91ea3(0x230)](_0x28eba7));}async function getPortfolio(_0x142edc){const _0x2b3aa9=_0x39baf0;let _0x567b21=[],_0x49ade1=[],_0x27d321=[],_0x308b0d;_0x142edc[_0x2b3aa9(0x1b8)]=crypt[_0x2b3aa9(0x273)](secure[_0x2b3aa9(0x15a)],_0x142edc['apiKey'])[_0x2b3aa9(0x178)],_0x142edc[_0x2b3aa9(0x126)]=crypt['decrypt'](secure[_0x2b3aa9(0x15a)],_0x142edc[_0x2b3aa9(0x126)])['message'],_0x142edc[_0x2b3aa9(0x188)]=crypt[_0x2b3aa9(0x273)](secure[_0x2b3aa9(0x15a)],_0x142edc[_0x2b3aa9(0x188)])[_0x2b3aa9(0x178)];if(_0x142edc[_0x2b3aa9(0x1b8)]!==_0x2b3aa9(0x1c3)||_0x142edc[_0x2b3aa9(0x126)]!==_0x2b3aa9(0x1c3)||_0x142edc['apiPassword']&&_0x142edc[_0x2b3aa9(0x188)]!==_0x2b3aa9(0x1c3)){if(config[_0x2b3aa9(0x11b)]){if(_0x142edc[_0x2b3aa9(0x1b8)]=='************')_0x142edc['apiKey']=config[_0x2b3aa9(0x1b8)];if(_0x142edc[_0x2b3aa9(0x126)]==_0x2b3aa9(0x1c3))_0x142edc[_0x2b3aa9(0x126)]=config['apiSecret'];if(_0x142edc[_0x2b3aa9(0x188)]==_0x2b3aa9(0x1c3))_0x142edc[_0x2b3aa9(0x188)]=config[_0x2b3aa9(0x188)];}try{await testAPI(_0x142edc);}catch(_0x710d71){if(_0x710d71[_0x2b3aa9(0x22b)]()['includes']('AuthenticationError')){logHistory(_0x2b3aa9(0x136),_0x2b3aa9(0x186)),proxyEmit(_0x2b3aa9(0x162),![]);return;}else{logHistory('error',_0x2b3aa9(0x185)),logger[_0x2b3aa9(0x1f7)](_0x2b3aa9(0x1c1),_0x710d71),proxyEmit(_0x2b3aa9(0x162),![]);return;}}exchange?updateExchange(_0x142edc['apiKey'],_0x142edc[_0x2b3aa9(0x126)],_0x142edc[_0x2b3aa9(0x188)]):await initExchange(_0x142edc[_0x2b3aa9(0x11b)],_0x142edc[_0x2b3aa9(0x1b8)],_0x142edc[_0x2b3aa9(0x126)],_0x142edc[_0x2b3aa9(0x188)]);await loadSymbols();const _0x3f7a2f=await getCoins(0x0,![],_0x142edc[_0x2b3aa9(0xb4)]);_0x27d321=cloneDeep(_0x3f7a2f[0x1]);}else{const _0x1a25c5=await getCoins();_0x27d321=cloneDeep(_0x1a25c5[0x1]);}if(_0x142edc[_0x2b3aa9(0xb4)]=='')proxyEmit(_0x2b3aa9(0x162),!![]),proxyEmit(_0x2b3aa9(0xbe),_0x27d321);else{_0x27d321[_0x2b3aa9(0x191)](_0x19f3e7=>{const _0x359260=_0x2b3aa9;if(_0x19f3e7[_0x359260(0x17c)]!=_0x142edc['basecoin']&&allSymbols[_0x359260(0x128)](_0x19f3e7['symbol']))_0x567b21[_0x359260(0xf7)](_0x19f3e7['symbol']);});if(_0x567b21[_0x2b3aa9(0x138)]==0x0)logHistory('error',_0x2b3aa9(0x159));else{try{_0x49ade1=await getTickers(_0x567b21);}catch(_0x559a81){logHistory(_0x2b3aa9(0x136),_0x2b3aa9(0x185)),logger['debug']('Error\x20details\x20(1):',_0x559a81),proxyEmit(_0x2b3aa9(0x162),![]);return;}_0x27d321[_0x2b3aa9(0x191)](_0x14455a=>{const _0x32b1c0=_0x2b3aa9;_0x14455a[_0x32b1c0(0x17c)]!=_0x142edc[_0x32b1c0(0xb4)]?_0x49ade1[_0x14455a[_0x32b1c0(0x1ff)]]?_0x308b0d=_0x14455a['reverse']?0x1/_0x49ade1[_0x14455a['symbol']]['last']:_0x49ade1[_0x14455a[_0x32b1c0(0x1ff)]][_0x32b1c0(0xd1)]:_0x308b0d=0x0:_0x308b0d=0x1,_0x14455a[_0x32b1c0(0x20e)]=formatResult(_0x308b0d,0x8);}),await getMarketCap(_0x27d321),proxyEmit(_0x2b3aa9(0x162),!![]),proxyEmit('portfolio2',_0x27d321);}}}function truncateTradeAmount(_0x1dca6e,_0x12ea60){const _0x2506bd=_0x39baf0;let _0x52e5a4=0x0;try{_0x52e5a4=exchange[_0x2506bd(0x113)](_0x1dca6e,_0x12ea60);}catch(_0x32f140){}return _0x52e5a4;}function checkMinimums(_0xc941dd){const _0x6ea669=_0x39baf0;let _0x25b28e=!![];const _0x4f0031=!_0xc941dd[_0x6ea669(0x266)]?markets[_0xc941dd[_0x6ea669(0x1ff)]][_0x6ea669(0xf8)][_0x6ea669(0x19f)][_0x6ea669(0xff)]:markets[_0xc941dd[_0x6ea669(0x1ff)]][_0x6ea669(0xf8)][_0x6ea669(0x19e)][_0x6ea669(0xff)],_0x5f501a=!_0xc941dd['reverse']?markets[_0xc941dd[_0x6ea669(0x1ff)]]['limits']['cost'][_0x6ea669(0xff)]:markets[_0xc941dd[_0x6ea669(0x1ff)]]['limits'][_0x6ea669(0x19f)][_0x6ea669(0xff)],_0x396b4f=truncateTradeAmount(_0xc941dd[_0x6ea669(0x1ff)],_0xc941dd[_0x6ea669(0x248)]);_0xc941dd['trade']=_0x396b4f;if(Math[_0x6ea669(0x214)](_0x396b4f)<_0x4f0031)_0x25b28e=![];if(Math[_0x6ea669(0x214)](_0x396b4f)*_0xc941dd[_0x6ea669(0xd1)]<_0x5f501a)_0x25b28e=![];if(_0xc941dd[_0x6ea669(0x200)]=='sell'){let _0x307321=config[_0x6ea669(0x25e)][_0x6ea669(0x1f6)](_0x539fd8=>_0x539fd8[_0x6ea669(0x17c)]==_0xc941dd[_0x6ea669(0x17c)]);if(_0x307321[_0x6ea669(0x183)]>0x0){if(Math[_0x6ea669(0x214)](_0x396b4f)>_0xc941dd[_0x6ea669(0x242)]-_0x307321['offset'])_0x25b28e=![];}else{if(Math['abs'](_0x396b4f)>_0xc941dd[_0x6ea669(0x242)])_0x25b28e=![];}}if(_0xc941dd['side']==_0x6ea669(0x198)){let _0x2bd54a=config[_0x6ea669(0x25e)][_0x6ea669(0x1f6)](_0x4abe42=>_0x4abe42[_0x6ea669(0x17c)]==config['basecoin']),_0x39475b=currentCoins['find'](_0x3c0944=>_0x3c0944[_0x6ea669(0x17c)]==config['basecoin']);if(_0x2bd54a[_0x6ea669(0x183)]>0x0){if(Math['abs'](_0x396b4f)*_0xc941dd[_0x6ea669(0xd1)]>_0x39475b[_0x6ea669(0x242)]-_0x2bd54a[_0x6ea669(0x183)])_0x25b28e=![];}else{if(Math[_0x6ea669(0x214)](_0x396b4f)*_0xc941dd[_0x6ea669(0xd1)]>_0x39475b[_0x6ea669(0x242)])_0x25b28e=![];}}return _0x25b28e;}async function getBalances(_0x403533=!![]){const _0x30bb3e=_0x39baf0;let _0x48a694=0x0,_0x2d9f09;const _0x1df634=config['threshold'];if(config['headless']&&config[_0x30bb3e(0x16c)]<0x0)await validate24hChanges();currentCoins[_0x30bb3e(0x191)](_0x3be59b=>{const _0x212c13=_0x30bb3e;if(_0x3be59b[_0x212c13(0x17c)]!=config[_0x212c13(0xb4)]){let _0x337e19=gTicker[noslash(_0x3be59b[_0x212c13(0x1ff)])];_0x2d9f09=_0x3be59b['reverse']?0x1/_0x337e19:_0x337e19;}else _0x2d9f09=0x1;let _0x571acc=_0x3be59b[_0x212c13(0x242)]*_0x2d9f09;_0x48a694+=_0x571acc,_0x3be59b[_0x212c13(0xd1)]=formatResult(Number(_0x2d9f09),0x8),_0x3be59b[_0x212c13(0x110)]=_0x571acc;}),currentCoins[_0x30bb3e(0x191)](_0x45d8b3=>{const _0x132a9a=_0x30bb3e;let _0x3b8a68=config[_0x132a9a(0x25e)][_0x132a9a(0x1f6)](_0x56d245=>_0x56d245[_0x132a9a(0x17c)]==_0x45d8b3[_0x132a9a(0x17c)]),_0x661ae9=Number(_0x3b8a68['distribution']),_0x2c3865=_0x45d8b3[_0x132a9a(0x110)]/_0x48a694*0x64,_0x3becc2=_0x661ae9*_0x48a694/0x64/_0x45d8b3[_0x132a9a(0xd1)]-_0x45d8b3[_0x132a9a(0x242)];_0x45d8b3[_0x132a9a(0x243)]=formatResult(_0x2c3865,0x3),_0x45d8b3[_0x132a9a(0x181)]=formatResult(_0x661ae9,0x3),_0x45d8b3[_0x132a9a(0x248)]=formatResult(_0x3becc2,0x8),_0x45d8b3[_0x132a9a(0x200)]='',_0x45d8b3[_0x132a9a(0xc6)]=![];if(_0x45d8b3[_0x132a9a(0x17c)]!=config['basecoin']){if(_0x45d8b3[_0x132a9a(0x243)]>_0x661ae9)_0x45d8b3[_0x132a9a(0x200)]=_0x132a9a(0x1e3),_0x45d8b3[_0x132a9a(0xc6)]=checkMinimums(_0x45d8b3);else _0x45d8b3[_0x132a9a(0x243)]<_0x661ae9&&(_0x45d8b3[_0x132a9a(0x200)]='buy',_0x45d8b3[_0x132a9a(0xc6)]=checkMinimums(_0x45d8b3));}_0x45d8b3[_0x132a9a(0x229)]=_0x45d8b3[_0x132a9a(0x243)]/_0x45d8b3[_0x132a9a(0x181)]-0x1;if(_0x45d8b3[_0x132a9a(0x20c)]==_0x132a9a(0x26b)||_0x45d8b3['orderstatus']==_0x132a9a(0x193))_0x45d8b3['orderstatus']=_0x132a9a(0xdf);}),currentCoins[_0x30bb3e(0x11e)]((_0x218c5c,_0x4ee86c)=>_0x218c5c[_0x30bb3e(0x229)]<_0x4ee86c[_0x30bb3e(0x229)]?0x1:_0x4ee86c['delta']<_0x218c5c[_0x30bb3e(0x229)]?-0x1:0x0);const _0x42f1d9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x42f1d9['eur'],'usd':_0x42f1d9[_0x30bb3e(0x1f0)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1df634},proxyEmit(_0x30bb3e(0x20a),{'serverversion':serverversion,'balances':lastBalances});if(_0x403533){if(config[_0x30bb3e(0x249)])headlessMode({'portfolio':currentCoins,'threshold':_0x1df634});else{if(lockOrders==ORDERS[_0x30bb3e(0x1f1)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1df634});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3567dd=getNormalizedPerformance();getStartingBalances(_0x3567dd),emitPerformance(_0x3567dd);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x44445e=_0x39baf0;if(!lastBalances)return;let _0x13cc56=[],_0x2a4bfa,_0x3c51ce=JSON[_0x44445e(0x227)](lastBalances[_0x44445e(0x25e)]);_0x3c51ce[_0x44445e(0x11e)]((_0x23876d,_0x34154d)=>_0x23876d[_0x44445e(0x17c)]>_0x34154d[_0x44445e(0x17c)]?0x1:_0x34154d[_0x44445e(0x17c)]>_0x23876d['coin']?-0x1:0x0),_0x3c51ce[_0x44445e(0x191)](_0x2db987=>{const _0x1a2062=_0x44445e;let _0x2c98ed={'coin':_0x2db987[_0x1a2062(0x17c)],'number':_0x2db987[_0x1a2062(0x242)],'price':_0x2db987['last']};_0x13cc56[_0x1a2062(0xf7)](_0x2c98ed);});const _0x1a94cf=await getFiat();_0x2a4bfa={'date':lastBalances[_0x44445e(0xda)][_0x44445e(0x15b)]('\x20')[0x0],'eur':_0x1a94cf['eur'],'usd':_0x1a94cf['usd'],'coins':_0x13cc56};let _0x59139a=dbPerformance[_0x44445e(0x219)](_0x44445e(0x24b))[_0x44445e(0x1f6)]({'date':_0x2a4bfa[_0x44445e(0x1a5)]})[_0x44445e(0x110)]();_0x59139a?_0x2a4bfa[_0x44445e(0x1a5)]!=config['startdate']&&dbPerformance[_0x44445e(0x219)](_0x44445e(0x24b))[_0x44445e(0x1f6)]({'date':_0x2a4bfa[_0x44445e(0x1a5)]})[_0x44445e(0x169)](_0x2a4bfa)[_0x44445e(0x216)]():dbPerformance['get']('data')['push'](_0x2a4bfa)['write'](),lastPerformanceStored=getHour();}function _0x56e7(_0x8f63b8,_0xff3d78){const _0x4b84c4=_0x5589();return _0x56e7=function(_0x5ac0cd,_0x3a8067){_0x5ac0cd=_0x5ac0cd-0xaa;let _0x5589a1=_0x4b84c4[_0x5ac0cd];return _0x5589a1;},_0x56e7(_0x8f63b8,_0xff3d78);}function getNormalizedPerformance(){const _0x1c59b0=_0x39baf0;let _0x525743=[];if(dbPerformance[_0x1c59b0(0x103)](_0x1c59b0(0x24b))[_0x1c59b0(0x110)]()){let _0x124e70=dbPerformance[_0x1c59b0(0x219)](_0x1c59b0(0x24b))['cloneDeep']()[_0x1c59b0(0x1dc)](_0x7c5096=>{const _0x1e3b00=_0x1c59b0;if(_0x7c5096['coins'][_0x1e3b00(0x138)]==0x0)return![];else return!![];})['sortBy'](_0x1c59b0(0x1a5))['value'](),_0x5016bc=[...config[_0x1c59b0(0x222)]];_0x5016bc['sort']((_0x6e5bce,_0x42d804)=>_0x6e5bce[_0x1c59b0(0x1a5)]>_0x42d804[_0x1c59b0(0x1a5)]?-0x1:_0x42d804[_0x1c59b0(0x1a5)]>_0x6e5bce[_0x1c59b0(0x1a5)]?0x1:0x0);let _0x205541=0x1,_0x1ee027=[],_0x395470=0x0;_0x124e70[_0x1c59b0(0xb2)]()[_0x1c59b0(0x266)]()['forEach']((_0x3aabc0,_0xbcf8d9)=>{const _0x248770=_0x1c59b0;if(_0x5016bc[_0x395470]){if(_0x124e70[_0x124e70['length']-_0xbcf8d9]&&_0x5016bc[_0x395470][_0x248770(0x1a5)]==_0x124e70[_0x124e70[_0x248770(0x138)]-_0xbcf8d9][_0x248770(0x1a5)]){if(_0xbcf8d9<_0x124e70[_0x248770(0x138)]){let _0x29aff8=0x0,_0x4e5818=0x0;_0x124e70[_0x124e70[_0x248770(0x138)]-_0xbcf8d9][_0x248770(0xce)][_0x248770(0x191)](_0xa49318=>{const _0xb3f45b=_0x248770;_0x4e5818+=_0xa49318[_0xb3f45b(0x242)]*_0xa49318['price'];}),_0x5016bc[_0x395470][_0x248770(0x26e)][_0x248770(0x191)](_0x19a437=>{const _0x2f306f=_0x248770;_0x29aff8+=_0x19a437[_0x2f306f(0x242)]*_0x19a437[_0x2f306f(0x20e)];}),_0x205541*=_0x29aff8/(_0x4e5818-_0x29aff8)+0x1;}_0x395470++;}}let _0x574431=0x0;_0x3aabc0[_0x248770(0xce)][_0x248770(0x191)](_0x183f71=>{const _0x4b1432=_0x248770;_0x574431+=_0x183f71[_0x4b1432(0x242)]*_0x183f71['price'];}),_0x1ee027[_0x124e70[_0x248770(0x138)]-_0xbcf8d9-0x1]=_0x574431*(_0x205541-0x1);});let _0x3d8998=[];_0x5016bc=[...config['liquidity']]||[];let _0x51ece2=0x0;_0x395470=0x0,_0x124e70['forEach']((_0x55846e,_0x3f71a1)=>{const _0x43408a=_0x1c59b0;if(_0x5016bc[_0x395470]){const _0xb2d936=fns[_0x43408a(0x227)](_0x5016bc[_0x395470][_0x43408a(0x1a5)],_0x43408a(0x175),new Date()),_0x19cb73=fns[_0x43408a(0x227)](_0x55846e[_0x43408a(0x1a5)],_0x43408a(0x175),new Date());if(fns['isEqual'](_0xb2d936,_0x19cb73)){let _0x3f88c9=0x0;_0x5016bc[_0x395470][_0x43408a(0x26e)][_0x43408a(0x191)](_0x34cb31=>{const _0x56490f=_0x43408a;!_0x3d8998[_0x34cb31[_0x56490f(0x17c)]]?_0x3d8998[_0x34cb31[_0x56490f(0x17c)]]=_0x34cb31[_0x56490f(0x242)]:(_0x3f88c9=_0x3d8998[_0x34cb31[_0x56490f(0x17c)]],_0x3d8998[_0x34cb31[_0x56490f(0x17c)]]+=_0x34cb31['number']);const _0x3485a0=_0x55846e[_0x56490f(0xce)]['find'](_0x4c75bc=>_0x4c75bc[_0x56490f(0x17c)]==_0x34cb31[_0x56490f(0x17c)]);(!_0x3485a0||_0x3485a0[_0x56490f(0x242)]==0x0)&&(_0x51ece2+=(-_0x34cb31[_0x56490f(0x242)]-_0x3f88c9)*_0x34cb31[_0x56490f(0x20e)]);}),_0x395470++;}}_0x55846e[_0x43408a(0xce)][_0x43408a(0x191)]((_0x3fb07c,_0x430db7)=>{const _0x326b74=_0x43408a;_0x3d8998[_0x3fb07c[_0x326b74(0x17c)]]&&(_0x3fb07c[_0x326b74(0x21e)]=_0x3d8998[_0x3fb07c[_0x326b74(0x17c)]]);}),_0x525743['push']({'date':_0x55846e[_0x43408a(0x1a5)],'eur':_0x55846e[_0x43408a(0x13b)],'usd':_0x55846e[_0x43408a(0x1f0)],'offset':_0x1ee027[_0x3f71a1],'netoffset':_0x51ece2,'coins':_0x55846e[_0x43408a(0xce)]});});}return _0x525743;}function emitPerformance(_0x118121){const _0x27e2cf=_0x39baf0;_0x118121['length']!==0x0?(proxyEmit('performance',_0x118121),lastPerformanceEmitted=getDate()):proxyEmit(_0x27e2cf(0x24d),[]);}function getPerf(_0x1c3b94,_0x8c9931){const _0x102343=_0x39baf0;let _0x1462c3=0x0,_0x231deb=0x0,_0x3bdbf5=0x0;_0x1c3b94['coins'][_0x102343(0x191)](_0x37c574=>{const _0x44bc7a=_0x102343;_0x1462c3+=_0x37c574[_0x44bc7a(0x242)]*_0x37c574['price'];});_0x8c9931&&(_0x1462c3+=_0x1c3b94[_0x102343(0x183)]);if(config['basecoin']===_0x102343(0x1ad)||config[_0x102343(0xb4)]===_0x102343(0xc9)||config[_0x102343(0xb4)]===_0x102343(0x118))_0x231deb=_0x1462c3*_0x1c3b94['eur'],_0x3bdbf5=_0x1462c3*_0x1c3b94[_0x102343(0x1f0)];else{if(usdBasecoins[_0x102343(0x128)](config[_0x102343(0xb4)]))_0x231deb=_0x1462c3*_0x1c3b94[_0x102343(0x13b)]/_0x1c3b94[_0x102343(0x1f0)],_0x3bdbf5=_0x1462c3;else config[_0x102343(0xb4)]==='EUR'&&(_0x231deb=_0x1462c3,_0x3bdbf5=_0x1462c3*_0x1c3b94[_0x102343(0x1f0)]/_0x1c3b94[_0x102343(0x13b)]);}return[_0x1462c3,_0x231deb,_0x3bdbf5];}function getKPIs(_0xd00e44,_0x5d1fb2=_0x39baf0(0x271)){const _0x234138=_0x39baf0,_0x5962f4=config[_0x234138(0xb4)],_0x130dbe=lastBalances,_0x5798a8=currentCoins,_0x1d20be=getNormalizedPerformance(),_0x438c23=_0xd00e44==='basecoin'?_0x5962f4:_0xd00e44==='fiat'||_0xd00e44==='net-fiat'?_0x5d1fb2:'Net\x20'+_0x5962f4,_0x4081cd=_0xd00e44==='net-basecoin'?_0x234138(0xd6):_0xd00e44===_0x234138(0xb8)?_0x234138(0xd6):_0x438c23+_0x234138(0x13a),_0x3798d9=_0xd00e44==='net-basecoin'||_0xd00e44==='net-fiat'?'Net\x20effect':_0x438c23+_0x234138(0xb3);let _0x581447=0x0;_0x5798a8[_0x234138(0x191)](_0x1cd9c8=>{const _0xa9ac7f=_0x234138;_0x581447+=_0x1cd9c8['number']*_0x1cd9c8[_0xa9ac7f(0xd1)];});if(_0xd00e44===_0x234138(0x1da)||_0xd00e44===_0x234138(0xb8)){if(_0x5962f4===_0x234138(0x1ad)||_0x5962f4===_0x234138(0xc9)||_0x5962f4===_0x234138(0x118))_0x581447=_0x581447*(_0x5d1fb2===_0x234138(0x271)?_0x130dbe[_0x234138(0x13b)]:_0x130dbe[_0x234138(0x1f0)]);else{if(usdBasecoins[_0x234138(0x128)](_0x5962f4))_0x581447=_0x581447*(_0x5d1fb2===_0x234138(0x271)?_0x130dbe['eur']/_0x130dbe[_0x234138(0x1f0)]:0x1);else _0x5962f4==='EUR'&&(_0x581447=_0x581447*(_0x5d1fb2===_0x234138(0x271)?0x1:_0x130dbe[_0x234138(0x1f0)]/_0x130dbe[_0x234138(0x13b)]));}}let _0x173c00;if(_0x581447!==0x0){if(_0xd00e44===_0x234138(0xb4))_0x173c00=(_0x581447/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5d1fb2===_0x234138(0x271))_0x173c00=(_0x581447/startingBalances['eur']-0x1)*0x64;else _0x173c00=(_0x581447/startingBalances[_0x234138(0x1f0)]-0x1)*0x64;}let _0x550833=0x0;if(startingBalances[_0x234138(0xce)])_0x5798a8[_0x234138(0x191)](_0x3e66c4=>{const _0x1f3f57=_0x234138;let _0x2d3b60=startingBalances[_0x1f3f57(0xce)]['find'](_0x5f45f6=>_0x5f45f6[_0x1f3f57(0x17c)]===_0x3e66c4[_0x1f3f57(0x17c)]);if(_0x2d3b60&&_0x2d3b60[_0x1f3f57(0x17c)]&&_0x3e66c4['number']!==0x0)_0x550833+=_0x2d3b60[_0x1f3f57(0x242)]*_0x3e66c4['last'];});let _0x2efe1c=0x0;if(_0x1d20be[_0x234138(0x138)]!==0x0){let _0x591af2=_0x1d20be[_0x1d20be[_0x234138(0x138)]-0x1];_0x2efe1c=_0x591af2[_0x234138(0x184)];}_0x550833-=_0x2efe1c;_0xd00e44===_0x234138(0x10f)&&(_0x173c00=(_0x581447-_0x550833)/startingBalances['basecoin']*0x64,_0x581447=_0x581447-_0x550833);if(_0xd00e44===_0x234138(0xb8)){let _0x46d2ac=_0x5d1fb2==='EUR'?startingBalances[_0x234138(0x13b)]:startingBalances[_0x234138(0x1f0)];if(_0x5962f4===_0x234138(0x1ad)||_0x5962f4===_0x234138(0xc9)||_0x5962f4===_0x234138(0x118))_0x550833=_0x5d1fb2===_0x234138(0x271)?_0x550833*_0x130dbe[_0x234138(0x13b)]:_0x550833*_0x130dbe[_0x234138(0x1f0)];else{if(usdBasecoins[_0x234138(0x128)](_0x5962f4))_0x550833=_0x5d1fb2==='EUR'?_0x550833*_0x130dbe[_0x234138(0x13b)]/_0x130dbe['usd']:_0x550833;else _0x5962f4===_0x234138(0x271)&&(_0x550833=_0x5d1fb2===_0x234138(0x271)?_0x550833:_0x550833*_0x130dbe[_0x234138(0x1f0)]/_0x130dbe[_0x234138(0x13b)]);}_0x173c00=(_0x581447-_0x550833)/_0x46d2ac*0x64,_0x581447=_0x581447-_0x550833;}if(_0x173c00){if(_0x173c00<0x64)_0x173c00=_0x173c00[_0x234138(0x1fc)](0x2);else{if(_0x173c00<0x3e8)_0x173c00=_0x173c00[_0x234138(0x1fc)](0x1);else _0x173c00=_0x173c00[_0x234138(0x1fc)](0x0);}}else _0x173c00=Number('0')[_0x234138(0x1fc)](0x2);if(_0x581447){if(Math[_0x234138(0x214)](_0x581447)<0.000001)_0x581447=_0x581447[_0x234138(0x1fc)](0x2);else{if(Math[_0x234138(0x214)](_0x581447)<0.1)_0x581447=_0x581447[_0x234138(0x1fc)](0x6);else{if(Math[_0x234138(0x214)](_0x581447)<0x1)_0x581447=_0x581447[_0x234138(0x1fc)](0x5);else{if(Math[_0x234138(0x214)](_0x581447)<0xa)_0x581447=_0x581447['toFixed'](0x4);else{if(Math['abs'](_0x581447)<0x64)_0x581447=_0x581447[_0x234138(0x1fc)](0x3);else{if(Math[_0x234138(0x214)](_0x581447)<0x3e8)_0x581447=_0x581447[_0x234138(0x1fc)](0x2);else _0x581447=_0x581447[_0x234138(0x1fc)](0x2);}}}}}}else _0x581447=Number('0')[_0x234138(0x1fc)](0x2);}else _0x173c00=Number('0')[_0x234138(0x1fc)](0x2);return{'value':_0x581447,'change':_0x173c00,'leftTxt':_0x4081cd,'rightTxt':_0x3798d9};}async function getStartingBalances(_0x509602,_0x24b6e3=!![]){const _0x5e3dd6=_0x39baf0;if(_0x509602['length']!==0x0){const [_0xee98d3,_0x5965c6,_0x2083ba]=getPerf(_0x509602[0x0],!![]);let _0xf57189=[];config[_0x5e3dd6(0x25e)][_0x5e3dd6(0x191)](_0x3e4b79=>{const _0x30ec5d=_0x5e3dd6;let _0x181c94=0x0,_0x2d066e;config[_0x30ec5d(0x222)][_0x30ec5d(0x191)](_0x3ae638=>{const _0x4bde49=_0x30ec5d;let _0x24dfc9=_0x3ae638[_0x4bde49(0x26e)][_0x4bde49(0x1f6)](_0x16d24f=>_0x16d24f['coin']==_0x3e4b79[_0x4bde49(0x17c)]);if(_0x24dfc9){_0x181c94+=_0x24dfc9[_0x4bde49(0x242)];if(!_0x2d066e)_0x2d066e=_0x24dfc9[_0x4bde49(0x20e)];}}),_0xf57189[_0x30ec5d(0xf7)]({'coin':_0x3e4b79[_0x30ec5d(0x17c)],'number':_0x181c94,'initialprice':_0x2d066e});});const _0x56c3b9={'basecoin':_0xee98d3,'eur':_0x5965c6,'usd':_0x2083ba,'coins':_0xf57189};if(_0x24b6e3)proxyEmit('starting-balances',_0x56c3b9);startingBalances=_0x56c3b9;}}function headlessMode(_0x5b561c){const _0x55b8e9=_0x39baf0;let _0x4675ba=_0x5b561c[_0x55b8e9(0x25e)],_0x2d032c=_0x5b561c[_0x55b8e9(0x1bf)],_0x57301d=[];for(let _0x349415 of _0x4675ba){if(_0x349415[_0x55b8e9(0x17c)]!=config['basecoin']){if(_0x349415['delta']>=_0x2d032c/0x64){if(_0x349415[_0x55b8e9(0xc6)])_0x57301d[_0x55b8e9(0xf7)](_0x349415);}else{if(_0x349415[_0x55b8e9(0x229)]<=-_0x2d032c/0x64){if(_0x349415['valid'])_0x57301d[_0x55b8e9(0xf7)](_0x349415);}}}}_0x57301d[_0x55b8e9(0x138)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x57301d['forEach'](_0x2ffe1f=>{const _0x5cb4db=_0x55b8e9;logger['debug']('Trigger:\x20'+_0x2ffe1f['coin']+'\x20'+_0x2ffe1f[_0x5cb4db(0x242)]+'\x20'+_0x2ffe1f['last']+'\x20'+_0x2ffe1f[_0x5cb4db(0x243)]+'%\x20'+_0x2ffe1f[_0x5cb4db(0x181)]+'%\x20'+(0x64*_0x2ffe1f[_0x5cb4db(0x229)])['toFixed'](0x2)+_0x5cb4db(0x180)+_0x2d032c['toFixed'](0x2)+'%)');}),placeOrder(_0x57301d));}function notifyBalance(_0x6f509e){const _0x192ba1=_0x39baf0;let _0x145ffe=_0x6f509e[_0x192ba1(0x25e)],_0x2547c6=_0x6f509e[_0x192ba1(0x1bf)],_0x24b042=[];for(let _0x195bed of _0x145ffe){if(_0x195bed[_0x192ba1(0x17c)]!=config[_0x192ba1(0xb4)]){if(_0x195bed[_0x192ba1(0x229)]>=_0x2547c6/0x64){if(_0x195bed[_0x192ba1(0xc6)])_0x24b042['push'](_0x195bed);}else{if(_0x195bed['delta']<=-_0x2547c6/0x64){if(_0x195bed['valid'])_0x24b042[_0x192ba1(0xf7)](_0x195bed);}}}}if(_0x24b042['length']>0x0){let _0x2adf84=_0x24b042[_0x192ba1(0x21a)](_0x4cfaf1=>_0x4cfaf1[_0x192ba1(0x17c)]);_0x2adf84[_0x192ba1(0x11e)]();let _0x314859=_0x2adf84[_0x192ba1(0x195)](',\x20');if(!lastCoinsToBalance)logHistory(_0x192ba1(0x264),_0x192ba1(0x259));lastCoinsToBalance=_0x314859;}}function symbolToCoin(_0xed204a){const _0x1e92e0=_0x39baf0;let _0x1f0340;if(_0xed204a['includes']('/'+config[_0x1e92e0(0xb4)]))_0x1f0340=_0xed204a['replace']('/'+config[_0x1e92e0(0xb4)],'');if(_0xed204a[_0x1e92e0(0x128)](config[_0x1e92e0(0xb4)]+'/'))_0x1f0340=_0xed204a[_0x1e92e0(0x18c)](config[_0x1e92e0(0xb4)]+'/','');return _0x1f0340;}async function unlockOrders(){const _0x17c490=_0x39baf0;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x17c490(0x1f7)](_0x17c490(0x179)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x418f03=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x418f03,setBlockTransactionDetection(![]),validateOrdersState=_0x17c490(0x21e),persistOpenOrders([]),lockOrders=ORDERS[_0x17c490(0x1f1)],logger['debug']('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x1f8291){const _0x23c59d=_0x39baf0;if(_0x1f8291)validateOrdersState=_0x1f8291;logger[_0x23c59d(0x1f7)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x23c59d(0x1cc)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x23c59d(0x147):_0x23c59d(0x112)));let _0x343627=[],_0x25ad5c=config[_0x23c59d(0x15d)]==_0x23c59d(0x19d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x23c59d(0x1dd)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x23c59d(0xfe)])return;logger[_0x23c59d(0x1f7)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x23c59d(0x191)](_0x24f6de=>{const _0x3d4f22=_0x23c59d;let _0xbfc24f=![];_0x24f6de['filled']>0x0&&(_0xbfc24f=!![]),_0x343627[_0x3d4f22(0xf7)](_0xbfc24f),_0xbfc24f&&config[_0x3d4f22(0x15d)]!=_0x3d4f22(0x19d)&&logHistory(_0x3d4f22(0x144),_0x3d4f22(0x1f3)+_0x24f6de[_0x3d4f22(0x1ff)]+'\x20'+_0x24f6de[_0x3d4f22(0x200)]+'\x20#'+formatResult(_0x24f6de[_0x3d4f22(0x26b)],0x8)+'\x20@'+formatResult(_0x24f6de[_0x3d4f22(0x20e)],0x8));}),_0x343627[_0x23c59d(0x191)]((_0x2c9bdc,_0x46d95c)=>{if(_0x2c9bdc)lastOrders['splice'](_0x46d95c,0x1);}),persistOpenOrders(lastOrders);const _0x42a47b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x23c59d(0x1a0);if(validateOrdersState==_0x23c59d(0x21e)){validateOrdersState=_0x23c59d(0x190);if(_0x343627[_0x23c59d(0x128)](![])){if(config['ordertype']==_0x23c59d(0x19d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x23c59d(0x190)){if(_0x343627['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x23c59d(0x15d)]==_0x23c59d(0x19d)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x343627[_0x23c59d(0x128)](![])&&(config['ordertype']==_0x23c59d(0x19d)?logHistory('success',_0x23c59d(0x252)+Math[_0x23c59d(0xe5)](_0x25ad5c*validateOrderInterval/0xea60)+_0x23c59d(0x238)+_0x42a47b):(await cancelOrders(),logHistory(_0x23c59d(0x1ef),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x23c59d(0xe5)](_0x25ad5c*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x42a47b))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x23c59d(0x15d)]!=_0x23c59d(0x19d))logHistory(_0x23c59d(0x1ef),_0x23c59d(0x14b)+_0x42a47b);await unlockOrders();}}}}}async function cancelOrders(){const _0x5b9ecb=_0x39baf0;lastOrders[_0x5b9ecb(0x191)](async _0x34dc56=>{const _0x12ecbc=_0x5b9ecb;try{const _0x42abd9=await exchange['cancelOrder'](_0x34dc56[_0x12ecbc(0x1c4)],_0x34dc56[_0x12ecbc(0x1ff)]);}catch(_0x3279cd){if(_0x3279cd[_0x12ecbc(0x22b)]()[_0x12ecbc(0x128)](_0x12ecbc(0xe2))){}else await handleError(_0x3279cd,_0x12ecbc(0xf6));}});}async function initCoinResults(_0x593cab){const _0x1e7aba=_0x39baf0;_0x593cab?logger['debug'](_0x1e7aba(0x1cd)+_0x593cab):logger[_0x1e7aba(0x1f7)](_0x1e7aba(0xca)),config[_0x1e7aba(0x25e)]['forEach'](_0x1521f7=>{const _0x11c98d=_0x1e7aba;if(!_0x1521f7[_0x11c98d(0x237)]&&_0x1521f7[_0x11c98d(0x17c)]!=config['basecoin']){const _0x576ce5=currentCoins['find'](_0x7fb3bb=>_0x7fb3bb[_0x11c98d(0x17c)]==_0x1521f7['coin']),_0x2660cb=gTicker[noslash(_0x1521f7['symbol'])];let _0x51fd4a=_0x576ce5?_0x576ce5[_0x11c98d(0x242)]:null,_0x5bb124=_0x1521f7['reverse']?0x1/_0x2660cb:_0x2660cb,_0x292e88;config[_0x11c98d(0x222)][_0x11c98d(0x191)](_0x107ae0=>{const _0x4d0a44=_0x11c98d;!_0x292e88&&(_0x292e88=_0x107ae0[_0x4d0a44(0x26e)]['find'](_0x4de5c5=>_0x4de5c5[_0x4d0a44(0x17c)]==_0x1521f7['coin']),_0x292e88&&(_0x51fd4a=_0x292e88[_0x4d0a44(0x242)],_0x5bb124=_0x292e88[_0x4d0a44(0x20e)]));});let _0x227e06=dbCoinResults[_0x11c98d(0x219)](_0x11c98d(0xce))[_0x11c98d(0x1f6)]({'coin':_0x1521f7[_0x11c98d(0x17c)]})[_0x11c98d(0x110)]();if(!_0x227e06){const _0x34b26c={'coin':_0x1521f7['coin'],'number':_0x51fd4a,'breakeven':_0x5bb124,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x11c98d(0xce))[_0x11c98d(0xf7)](_0x34b26c)[_0x11c98d(0x216)]();}else{if(_0x593cab&&_0x1521f7[_0x11c98d(0x17c)]==_0x593cab){const _0x20e1ca={'coin':_0x1521f7[_0x11c98d(0x17c)],'number':_0x51fd4a,'breakeven':_0x5bb124,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x11c98d(0xce))[_0x11c98d(0x1f6)]({'coin':_0x1521f7[_0x11c98d(0x17c)]})[_0x11c98d(0x169)](_0x20e1ca)[_0x11c98d(0x216)]();}}}});}async function updateCoinResults(_0x35978b,_0x16c293=![]){const _0x21e8a9=_0x39baf0;let _0x5483ac,_0x399b44,_0x38a006,_0x4235cd,_0x3e8b65,_0x1c3337,_0x1d823c=dbCoinResults['get'](_0x21e8a9(0xce))[_0x21e8a9(0x1f6)]({'coin':_0x35978b[_0x21e8a9(0x17c)]})[_0x21e8a9(0x110)](),_0x471fc9=![];_0x1d823c&&Object[_0x21e8a9(0x124)](_0x1d823c)[_0x21e8a9(0x191)](([_0x47134c,_0x1cbe9c])=>{if(_0x1cbe9c==null)_0x471fc9=!![];});(!_0x1d823c||_0x471fc9)&&(await initCoinResults(_0x35978b['coin']),_0x1d823c=dbCoinResults[_0x21e8a9(0x219)](_0x21e8a9(0xce))[_0x21e8a9(0x1f6)]({'coin':_0x35978b[_0x21e8a9(0x17c)]})[_0x21e8a9(0x110)]());_0x35978b[_0x21e8a9(0x266)]&&(_0x1c3337={'filled':_0x35978b[_0x21e8a9(0x26b)]*_0x35978b[_0x21e8a9(0x20e)],'amount':_0x35978b[_0x21e8a9(0x26b)]*_0x35978b[_0x21e8a9(0x20e)],'side':_0x35978b[_0x21e8a9(0x200)]=='sell'?'buy':_0x21e8a9(0x1e3),'price':0x1/_0x35978b[_0x21e8a9(0x20e)]},_0x35978b={..._0x35978b,..._0x1c3337});_0x16c293?_0x399b44=_0x35978b[_0x21e8a9(0x200)]==_0x21e8a9(0x198)?_0x1d823c[_0x21e8a9(0x242)]+_0x35978b[_0x21e8a9(0x26b)]:_0x1d823c[_0x21e8a9(0x242)]-_0x35978b[_0x21e8a9(0x26b)]:_0x399b44=await getCoinNumber(_0x35978b[_0x21e8a9(0x17c)]);if(_0x35978b[_0x21e8a9(0x204)]&&_0x35978b[_0x21e8a9(0x204)]['currency']==config['basecoin'])_0x5483ac=Number(_0x35978b[_0x21e8a9(0x204)][_0x21e8a9(0x19e)]);else{if(_0x35978b['fee']&&_0x35978b[_0x21e8a9(0x204)][_0x21e8a9(0x223)]=='BNB'&&!_0x16c293&&config[_0x21e8a9(0xb4)]!=_0x21e8a9(0x118))_0x5483ac=Number(_0x35978b[_0x21e8a9(0x204)][_0x21e8a9(0x19e)])*gTicker[_0x21e8a9(0x16a)+config[_0x21e8a9(0xb4)]];else _0x5483ac=defaultFee*_0x35978b[_0x21e8a9(0x26b)]*_0x35978b[_0x21e8a9(0x20e)];}_0x35978b[_0x21e8a9(0x200)]=='buy'?(_0x38a006=_0x399b44!=0x0?(_0x1d823c[_0x21e8a9(0x262)]*_0x1d823c[_0x21e8a9(0x242)]+_0x35978b['price']*(_0x399b44-_0x1d823c[_0x21e8a9(0x242)])+_0x5483ac)/_0x399b44:0x0,_0x4235cd=_0x1d823c['realized']):(_0x38a006=_0x399b44!=0x0?(_0x1d823c['breakeven']*_0x1d823c[_0x21e8a9(0x242)]-_0x35978b['price']*(_0x1d823c[_0x21e8a9(0x242)]-_0x399b44)+_0x5483ac)/_0x399b44:0x0,_0x4235cd=_0x1d823c[_0x21e8a9(0xbd)]+(_0x35978b[_0x21e8a9(0x20e)]-_0x1d823c['breakeven'])*_0x35978b[_0x21e8a9(0x26b)]);_0x3e8b65=(_0x35978b[_0x21e8a9(0x20e)]-_0x38a006-_0x5483ac/_0x35978b['filled'])*_0x399b44;let _0x4ef6e6={'coin':_0x35978b['coin'],'number':_0x399b44,'breakeven':formatResult(_0x38a006,0x8),'realized':formatResult(_0x4235cd,0x8),'unrealized':formatResult(_0x3e8b65,0x8),'fees':formatResult(_0x1d823c[_0x21e8a9(0x173)]+_0x5483ac,0x8),'sells':_0x35978b[_0x21e8a9(0x200)]==_0x21e8a9(0x1e3)?_0x1d823c[_0x21e8a9(0xc0)]+0x1:_0x1d823c[_0x21e8a9(0xc0)],'buys':_0x35978b['side']==_0x21e8a9(0x198)?_0x1d823c[_0x21e8a9(0x15f)]+0x1:_0x1d823c[_0x21e8a9(0x15f)]};dbCoinResults[_0x21e8a9(0x219)]('coins')[_0x21e8a9(0x1f6)]({'coin':_0x35978b[_0x21e8a9(0x17c)]})[_0x21e8a9(0x169)](_0x4ef6e6)[_0x21e8a9(0x216)]();if(!_0x16c293){if(_0x35978b[_0x21e8a9(0x204)]&&_0x35978b['fee'][_0x21e8a9(0x223)]=='BNB'){const _0x2ab269=currentCoins[_0x21e8a9(0x1f6)](_0x579ff8=>_0x579ff8[_0x21e8a9(0x17c)]==_0x21e8a9(0x16a));if(_0x2ab269){let _0x1dfb81=dbCoinResults[_0x21e8a9(0x219)](_0x21e8a9(0xce))[_0x21e8a9(0x1f6)]({'coin':'BNB'})[_0x21e8a9(0x110)]();_0x4ef6e6={..._0x1dfb81,'number':_0x2ab269[_0x21e8a9(0x242)]},dbCoinResults['get'](_0x21e8a9(0xce))['find']({'coin':_0x21e8a9(0x16a)})['assign'](_0x4ef6e6)[_0x21e8a9(0x216)]();}}}}async function placeOrder(_0x2e3729){const _0x207d1d=_0x39baf0,_0x17c532=config[_0x207d1d(0x15d)]==_0x207d1d(0x19d)?_0x207d1d(0x19d):_0x207d1d(0xaa);if(lockOrders==ORDERS[_0x207d1d(0x1f1)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x207d1d(0xfe)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x207d1d(0x21e);let _0x5effba=![];lastOrders=[];for(const _0x55e4de of _0x2e3729){let _0x53eae5,_0x1631cc,_0x356459,_0x5cb750,_0x1bc220,_0x46c190=_0x55e4de[_0x207d1d(0x1ff)];try{const _0x2887aa=await exchange['fetchTicker'](_0x46c190);_0x53eae5=_0x55e4de[_0x207d1d(0x266)]?0x1/_0x55e4de[_0x207d1d(0xd1)]:_0x55e4de[_0x207d1d(0xd1)],_0x1631cc=_0x2887aa[_0x207d1d(0x12b)],_0x356459=_0x2887aa[_0x207d1d(0x20b)];_0x55e4de['reverse']?(_0x5cb750=_0x55e4de[_0x207d1d(0x200)]=='buy'?_0x207d1d(0x1e3):_0x207d1d(0x198),_0x1bc220=Math['abs'](_0x55e4de[_0x207d1d(0x248)])/_0x53eae5):(_0x5cb750=_0x55e4de['side'],_0x1bc220=Math[_0x207d1d(0x214)](_0x55e4de[_0x207d1d(0x248)]));_0x17c532==_0x207d1d(0xaa)&&(config[_0x207d1d(0x15d)]==_0x207d1d(0xb5)&&(_0x53eae5=_0x5cb750==_0x207d1d(0x198)?_0x1631cc:_0x356459),config['ordertype']=='limit-low'&&(_0x53eae5=_0x5cb750==_0x207d1d(0x198)?_0x356459:_0x1631cc));_0x1bc220=formatResult(_0x1bc220,0x8),_0x53eae5=formatResult(_0x53eae5,0x8);const _0x193632=_0x5cb750==_0x207d1d(0x1e3)?config[_0x207d1d(0x210)]?String[_0x207d1d(0x1e9)]('0x'+config[_0x207d1d(0x210)])+'\x20':'':config['emojibuy']?String[_0x207d1d(0x1e9)]('0x'+config[_0x207d1d(0x1d1)])+'\x20':'',_0x5d6519=_0x17c532=='market'?_0x207d1d(0x1b1):config[_0x207d1d(0x15d)]==_0x207d1d(0xb5)?'Limit\x20(high-margin)':_0x207d1d(0x15c),_0x25b8a6=(Math[_0x207d1d(0x1bb)](Math[_0x207d1d(0x22e)]()*0x35a4e900)+0x5f5e100)[_0x207d1d(0x22b)]();lastOrders['push']({'customId':_0x25b8a6,'symbol':_0x46c190,'coin':_0x55e4de[_0x207d1d(0x17c)],'amount':_0x1bc220,'price':_0x53eae5,'side':_0x5cb750,'reverse':_0x55e4de[_0x207d1d(0x266)],'filled':0x0});if(_0x17c532=='market')logHistory(_0x207d1d(0x144),''+_0x193632+_0x5d6519+_0x207d1d(0x1e2)+_0x46c190+'\x20'+_0x5cb750+'\x20#'+formatResult(_0x1bc220,0x8)+'\x20@'+formatResult(_0x53eae5,0x8));else logHistory('order',''+_0x193632+_0x5d6519+_0x207d1d(0x1e2)+_0x46c190+'\x20'+_0x5cb750+'\x20#'+formatResult(_0x1bc220,0x8)+'\x20@'+formatResult(_0x53eae5,0x8));let _0x21d06d;_0x17c532==_0x207d1d(0x19d)?_0x5cb750==_0x207d1d(0x198)&&[_0x207d1d(0x157),'Bitget',_0x207d1d(0x12d),_0x207d1d(0x166),_0x207d1d(0x102)][_0x207d1d(0x128)](config[_0x207d1d(0x11b)])?_0x21d06d=await exchange[_0x207d1d(0x231)](_0x46c190,_0x17c532,_0x5cb750,_0x1bc220,_0x53eae5):_0x21d06d=await exchange['createOrder'](_0x46c190,_0x17c532,_0x5cb750,_0x1bc220,undefined):_0x21d06d=await exchange[_0x207d1d(0x231)](_0x46c190,_0x17c532,_0x5cb750,_0x1bc220,_0x53eae5);logger[_0x207d1d(0x1f7)](_0x207d1d(0xdd)+_0x21d06d['id']+'\x20|\x20Custom\x20ID:\x20'+_0x25b8a6);const _0x31ac4f=lastOrders[_0x207d1d(0x138)]-0x1;if(_0x31ac4f>=0x0&&lastOrders[_0x31ac4f][_0x207d1d(0xfc)]==_0x25b8a6){lastOrders[_0x31ac4f]['orderId']=_0x21d06d['id'];if(_0x21d06d[_0x207d1d(0x19f)])lastOrders[_0x31ac4f][_0x207d1d(0x19f)]=_0x21d06d[_0x207d1d(0x19f)];if(_0x21d06d['price'])lastOrders[_0x31ac4f]['price']=_0x21d06d['price'];lastOrders[_0x31ac4f]['fee']=_0x21d06d[_0x207d1d(0x204)];}if(config['cooldown']!=0x0){let _0x3d6d56=null;if(cooldownTracker['length']==config[_0x207d1d(0xbf)]-0x1)_0x3d6d56=cooldownTracker[_0x207d1d(0x20d)]();const _0x1b85db=getTimeStamp();cooldownTracker[_0x207d1d(0xf7)](_0x1b85db);if(_0x3d6d56){const _0x4b02cd=fns['differenceInSeconds'](new Date(_0x1b85db),new Date(_0x3d6d56));if(_0x4b02cd<cooldownInterval){logHistory('error',_0x207d1d(0x233)+config[_0x207d1d(0xbf)]+_0x207d1d(0x25c)+cooldownInterval/0x3c+_0x207d1d(0xd9)+cooldownPeriod/(0xe10*0x3e8)+_0x207d1d(0xea)),coolingDown=!![];break;}}}}catch(_0x3b66e7){if(_0x3b66e7[_0x207d1d(0x22b)]()[_0x207d1d(0x128)](_0x207d1d(0x258)))lastOrders=lastOrders[_0x207d1d(0x1dc)](_0x45f654=>_0x45f654[_0x207d1d(0x1ff)]!=_0x46c190),logHistory('error',_0x207d1d(0x1c6)+_0x46c190),_0x5effba=!![];else{if(_0x3b66e7['toString']()[_0x207d1d(0x128)](_0x207d1d(0x13c)))lastOrders=lastOrders['filter'](_0x50bfb3=>_0x50bfb3[_0x207d1d(0x1ff)]!=_0x46c190),logHistory(_0x207d1d(0x136),_0x207d1d(0x137)+_0x46c190),_0x5effba=!![];else{if(_0x3b66e7[_0x207d1d(0x22b)]()['includes'](_0x207d1d(0xf4)))lastOrders=lastOrders[_0x207d1d(0x1dc)](_0x7857e0=>_0x7857e0[_0x207d1d(0x1ff)]!=_0x46c190),logHistory(_0x207d1d(0x136),_0x207d1d(0x148)+_0x46c190),logger[_0x207d1d(0x1f7)](_0x3b66e7),_0x5effba=!![];else _0x3b66e7[_0x207d1d(0x22b)]()[_0x207d1d(0x128)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x207d1d(0x1dc)](_0x33d976=>_0x33d976[_0x207d1d(0x1ff)]!=_0x46c190),logHistory(_0x207d1d(0x136),_0x207d1d(0x1c6)+_0x46c190),_0x5effba=!![]):(lastOrders=lastOrders[_0x207d1d(0x1dc)](_0x2032b5=>_0x2032b5[_0x207d1d(0x1ff)]!=_0x46c190),await handleError(_0x3b66e7,_0x207d1d(0x197),_0x46c190));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x207d1d(0x138)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x852bc=config[_0x207d1d(0x15d)]==_0x207d1d(0x19d)?validateOrderTimeout*0x3c*0x3e8:config[_0x207d1d(0x1dd)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3f2fb5=_0x207d1d;validateOrders(_0x3f2fb5(0x187));},_0x852bc);}else unlockOrders();_0x5effba&&config['headless']&&(logHistory(_0x207d1d(0x136),_0x207d1d(0x11f)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x207d1d(0x236)));}else{if(coolingDown)!config[_0x207d1d(0x249)]&&logHistory(_0x207d1d(0x136),_0x207d1d(0x213));else lockOrders!=ORDERS[_0x207d1d(0x1f1)]&&(!config[_0x207d1d(0x249)]&&(config[_0x207d1d(0x15d)]=='market'?logHistory(_0x207d1d(0x136),_0x207d1d(0x121)):logHistory('error',_0x207d1d(0x194))));}}function persistOpenOrders(_0x40ee98){const _0x484c5e=_0x39baf0,_0x488f4f={...config,'openOrders':_0x40ee98};let _0xb952f0=dbConfig['get']('bot')[_0x484c5e(0x1f6)]({'botID':botID})[_0x484c5e(0x110)]();_0xb952f0&&dbConfig[_0x484c5e(0x219)](_0x484c5e(0xbc))['find']({'botID':botID})[_0x484c5e(0x169)](_0x488f4f)[_0x484c5e(0x216)]();}function restoreOrders(){const _0x56770f=_0x39baf0;let _0x943ddf;config[_0x56770f(0x129)]&&allOpenOrders['forEach'](_0x3efa43=>{const _0x4d5c6d=_0x56770f,_0x386c60=config[_0x4d5c6d(0x129)][_0x4d5c6d(0x1f6)](_0x27327e=>_0x27327e[_0x4d5c6d(0x1c4)]==_0x3efa43['id']);_0x386c60&&(lastOrders[_0x4d5c6d(0xf7)](_0x386c60),_0x943ddf=_0x3efa43[_0x4d5c6d(0x247)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x56770f(0xfe)],validateOrdersState=_0x56770f(0x190),allOrdersPlaced=!![];const _0xb37124=new Date()['getTime'](),_0x15b6ca=config[_0x56770f(0x15d)]==_0x56770f(0x19d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x943ddf+_0x15b6ca>_0xb37124){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x943ddf+_0x15b6ca-_0xb37124);}else validateOrders(_0x56770f(0x187));}}async function sendMetricsTelegram(){const _0x5f39ca=_0x39baf0;if(!coinsLoaded){process[_0x5f39ca(0x202)]({'telegrammsg':_0x5f39ca(0x274)},_0x47fd4c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xc6941c='';if(config[_0x5f39ca(0x23b)])_0xc6941c=_0x5f39ca(0xe0)+config[_0x5f39ca(0x17b)]+_0x5f39ca(0x19b);else _0xc6941c='<b>Bot\x20'+botID+_0x5f39ca(0x19b);const _0x1c2e4b=getKPIs(_0x5f39ca(0xb4)),_0x2c9705=getKPIs(_0x5f39ca(0x1da),config['fiat']),_0x5e794b=getKPIs(_0x5f39ca(0x10f)),_0x5de488=getKPIs('net-fiat',config[_0x5f39ca(0x1da)]);_0xc6941c+=_0x5f39ca(0x268),_0xc6941c+=_0x1c2e4b[_0x5f39ca(0x114)]+_0x5f39ca(0xcc)+_0x1c2e4b[_0x5f39ca(0x110)]+'\x0a',_0xc6941c+=_0x1c2e4b[_0x5f39ca(0x212)]+':\x20'+_0x1c2e4b[_0x5f39ca(0x1e6)]+'%\x0a',_0xc6941c+=_0x2c9705[_0x5f39ca(0x114)]+_0x5f39ca(0xcc)+_0x2c9705['value']+'\x0a',_0xc6941c+=_0x2c9705[_0x5f39ca(0x212)]+':\x20'+_0x2c9705[_0x5f39ca(0x1e6)]+'%\x0a',_0xc6941c+=_0x5e794b['leftTxt']+':\x20'+_0x5e794b[_0x5f39ca(0x110)]+'\x20('+config[_0x5f39ca(0xb4)]+')\x0a',_0xc6941c+=_0x5e794b[_0x5f39ca(0x212)]+':\x20'+_0x5e794b[_0x5f39ca(0x1e6)]+'%\x20('+config[_0x5f39ca(0xb4)]+')\x0a',_0xc6941c+=_0x5de488[_0x5f39ca(0x114)]+':\x20'+_0x5de488[_0x5f39ca(0x110)]+'\x20('+config['fiat']+')\x0a',_0xc6941c+=_0x5de488[_0x5f39ca(0x212)]+':\x20'+_0x5de488[_0x5f39ca(0x1e6)]+_0x5f39ca(0x180)+config['fiat']+')\x0a',_0xc6941c+=_0x5f39ca(0x239),process[_0x5f39ca(0x202)]({'telegrammsg':_0xc6941c},_0x13284d=>{});}async function sendPortfolioTelegram(){const _0x65d0dc=_0x39baf0;if(!coinsLoaded||!currentCoins[0x0][_0x65d0dc(0x243)]){process['send']({'telegrammsg':_0x65d0dc(0x274)},_0x570e05=>{});return;}let _0x40d4cb='';if(config[_0x65d0dc(0x23b)])_0x40d4cb=_0x65d0dc(0xe0)+config[_0x65d0dc(0x17b)]+_0x65d0dc(0x10d);else _0x40d4cb='<b>Bot\x20'+botID+_0x65d0dc(0x10d);_0x40d4cb+='<pre>',_0x40d4cb+=_0x65d0dc(0x206),_0x40d4cb+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x40d4cb+='-------------------------------\x0a',currentCoins['forEach'](_0x24ee81=>{const _0x2c2e28=_0x65d0dc;_0x40d4cb+=_0x24ee81[_0x2c2e28(0x17c)][_0x2c2e28(0x15e)](0x7)+'|\x20'+formatPad(_0x24ee81[_0x2c2e28(0x243)],0x2,0x6)+'|\x20'+formatPad(_0x24ee81['target'],0x2,0x6)+'|\x20'+formatPad(_0x24ee81[_0x2c2e28(0x229)]*0x64,0x2,0x6)+'\x0a';}),_0x40d4cb+=_0x65d0dc(0x239),process[_0x65d0dc(0x202)]({'telegrammsg':_0x40d4cb},_0xd9e5b=>{});}function formatPad(_0x59cf4f,_0x55826d,_0x344ac8){const _0x2e7389=_0x39baf0,_0x23fca0=formatResultString(_0x59cf4f,_0x55826d);return _0x23fca0?_0x23fca0['padStart'](_0x344ac8):''[_0x2e7389(0x211)](_0x344ac8);}function logHistory(_0x56cbbf,_0x5b8500,_0x3ea4c8=''){const _0x29a22f=_0x39baf0;logger['full'](''+_0x5b8500);let _0x4c5802={'time':getTimeStamp(),'type':_0x56cbbf,'event':_0x5b8500};dbLogs[_0x29a22f(0x219)](_0x29a22f(0x1d5))[_0x29a22f(0xf7)](_0x4c5802)[_0x29a22f(0x216)]();if(_0x3ea4c8=='')_0x3ea4c8=_0x5b8500;proxyEmit(_0x29a22f(0xe4),{'log':_0x4c5802,'summary':_0x3ea4c8}),process['send']({'telegram':{..._0x4c5802,'botname':config[_0x29a22f(0x17b)],'showname':config['showname']}},_0x3a8188=>{});}function emitHistory(_0x23e325={}){const _0x3dd88f=_0x39baf0;Object[_0x3dd88f(0xe6)](_0x23e325)[_0x3dd88f(0x138)]==0x0&&(_0x23e325={'type':['order',_0x3dd88f(0xe4)],'event':'','page':0x1});if(_0x23e325[_0x3dd88f(0x11a)]['includes'](_0x3dd88f(0xe4)))_0x23e325[_0x3dd88f(0x11a)][_0x3dd88f(0xfa)](_0x23e325[_0x3dd88f(0x11a)][_0x3dd88f(0x1ba)]('event'),0x1,_0x3dd88f(0x136),_0x3dd88f(0x264),_0x3dd88f(0x1ef));if(dbLogs[_0x3dd88f(0x103)](_0x3dd88f(0x1d5))[_0x3dd88f(0x110)]()){let _0x8850b3=dbLogs[_0x3dd88f(0x219)](_0x3dd88f(0x1d5))['filter'](_0x4fce31=>{const _0x3a8920=_0x3dd88f;if(_0x23e325[_0x3a8920(0x11a)]['length']==0x0)return![];else return _0x23e325[_0x3a8920(0x11a)]['includes'](_0x4fce31[_0x3a8920(0x11a)]);})['filter'](_0x58fbb0=>{const _0x21cba2=_0x3dd88f;if(_0x23e325[_0x21cba2(0xe4)]=='')return!![];else return _0x58fbb0[_0x21cba2(0xe4)][_0x21cba2(0x117)]()[_0x21cba2(0x128)](_0x23e325[_0x21cba2(0xe4)][_0x21cba2(0x117)]());})['sortBy'](_0x3dd88f(0xda)),_0x2d2827=_0x8850b3[_0x3dd88f(0x110)]()[_0x3dd88f(0x138)];_0x8850b3=_0x8850b3[_0x3dd88f(0x266)]()['slice']((_0x23e325[_0x3dd88f(0x250)]-0x1)*logPageSize,_0x23e325[_0x3dd88f(0x250)]*logPageSize-0x1)[_0x3dd88f(0x266)]()[_0x3dd88f(0x110)](),proxyEmit('event-history',{'logs':_0x8850b3,'total':_0x2d2827});}else proxyEmit(_0x3dd88f(0x165),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4e4379){const _0x37216a=_0x39baf0;if(dbLogs[_0x37216a(0x103)](_0x37216a(0x1d5))[_0x37216a(0x110)]()){const _0x1540f3=dbLogs['get'](_0x37216a(0x1d5))[_0x37216a(0x18f)](_0x37216a(0xda))['filter'](_0x43feb9=>{const _0x155e58=_0x37216a;return _0x43feb9[_0x155e58(0x11a)]==_0x155e58(0x144);})[_0x37216a(0x110)]();dbLogs['get'](_0x37216a(0x1d5))['remove']()[_0x37216a(0x216)](),dbLogs[_0x37216a(0x219)](_0x37216a(0x1d5))[_0x37216a(0x169)](_0x1540f3)[_0x37216a(0x216)](),emitHistory(_0x4e4379);}}async function pauseBot(_0x4b1991=pauseBotIntervalShort,_0x2cda71,_0xc7ead8,_0x1fbc27=![]){const _0x3575dd=_0x39baf0,_0x203704=new Date()[_0x3575dd(0x153)]();if(!lastErrorShown||_0x203704-lastErrorShown>=_0x4b1991){lastErrorShown=_0x203704;if(!lastBotPause)lastBotPause=_0x203704,consecutivePauses=0x1;else{if(_0x203704-lastBotPause-_0x4b1991<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1fbc27){logHistory(_0x3575dd(0x136),_0x2cda71+_0x3575dd(0x1f8)),await killBot();return;}else logHistory(_0x3575dd(0x136),_0x2cda71+pauseBotMsg),_0x4b1991=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x203704;}_0xc7ead8?logger[_0x3575dd(0x1f7)]('('+consecutivePauses+')\x20'+_0x2cda71+_0x3575dd(0x1e5),_0xc7ead8):logger['debug']('('+consecutivePauses+')\x20'+_0x2cda71);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4b1991),botPaused=![],_0x4b1991==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x302fe8=_0x39baf0;botPaused=!![],await sleep(0x3e8),process[_0x302fe8(0x202)]({'stop':_0x302fe8(0x21b)},_0x3ce838=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x23b982,_0x4e1011){const _0x5c2063=_0x39baf0;if(botPaused)return;const _0x2814f4=config['exchange']||'Exchange';if(_0x4e1011)logger[_0x5c2063(0x1f7)](_0x5c2063(0x215)+_0x4e1011);const _0x3a4758=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x23b982[_0x5c2063(0x22b)]()[_0x5c2063(0x128)](_0x5c2063(0x167)))logHistory(_0x5c2063(0x136),_0x2814f4+_0x5c2063(0x16f)),_0x3a4758();else{if(_0x23b982['toString']()['includes'](_0x5c2063(0x1ce)))logHistory(_0x5c2063(0x136),_0x2814f4+_0x5c2063(0x160)),_0x3a4758();else _0x23b982[_0x5c2063(0x22b)]()[_0x5c2063(0x128)](_0x5c2063(0xb7))?(logHistory(_0x5c2063(0x136),_0x2814f4+_0x5c2063(0x170)),logHistory(_0x5c2063(0x136),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3a4758()):await handleError(_0x23b982,null);}}async function handleError(_0x792183,_0x4d0e5f,_0xef7c02=''){const _0x37dc4c=_0x39baf0;if(botPaused)return;let _0x38effe;const _0x5f2530=config[_0x37dc4c(0x11b)]||_0x37dc4c(0xcd);if(_0x4d0e5f)logger[_0x37dc4c(0x1f7)](_0x37dc4c(0x215)+_0x4d0e5f);if(_0x792183[_0x37dc4c(0x22b)]()['includes'](_0x37dc4c(0x1b2)))_0x38effe=_0x5f2530+_0x37dc4c(0x16d),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()['includes'](_0x37dc4c(0xc2)))_0x38effe=_0x5f2530+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0x139))||_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0x1f9)))_0x38effe=_0x5f2530+_0x37dc4c(0xf2),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0x1d6)))_0x38effe=_0x5f2530+_0x37dc4c(0xb6),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0x221)))_0x38effe=_0x5f2530+_0x37dc4c(0x1d0),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x117)]()[_0x37dc4c(0x128)]('timestamp')||_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x117)]()[_0x37dc4c(0x128)]('request-time'))_0x38effe=_0x37dc4c(0xe1),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183[_0x37dc4c(0x22b)]()['includes'](_0x37dc4c(0x1d3)))_0x38effe=_0x5f2530+_0x37dc4c(0x158),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183 instanceof ccxt[_0x37dc4c(0x21c)])_0x38effe=_0x5f2530+'\x20network\x20error:\x20'+_0x792183[_0x37dc4c(0x22b)](),logger['debug'](_0x37dc4c(0x131),_0x792183),await pauseBot(undefined,_0x38effe,_0x792183);else{if(_0x792183['toString']()[_0x37dc4c(0x128)](_0x37dc4c(0x167)))logHistory(_0x37dc4c(0x136),_0x5f2530+_0x37dc4c(0x1b9)),logHistory(_0x37dc4c(0x136),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0x1ce)))logHistory(_0x37dc4c(0x136),_0x5f2530+_0x37dc4c(0x23a)),logHistory('error',_0x37dc4c(0xe7)),await killBot();else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0xb7))&&_0x792183[_0x37dc4c(0x22b)]()['includes'](_0x37dc4c(0x23e)))_0x38effe=_0x5f2530+_0x37dc4c(0x260),await pauseBot(undefined,_0x38effe,_0x792183,!![]);else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)](_0x37dc4c(0xb7)))config[_0x37dc4c(0x188)]?_0x38effe=_0x5f2530+_0x37dc4c(0x12f):_0x38effe=_0x5f2530+_0x37dc4c(0x228),logHistory(_0x37dc4c(0x136),_0x38effe),logHistory(_0x37dc4c(0x136),_0x37dc4c(0xe7)),await killBot();else{if(_0x792183[_0x37dc4c(0x22b)]()[_0x37dc4c(0x128)]('PermissionDenied'))logHistory(_0x37dc4c(0x136),_0x5f2530+_0x37dc4c(0x265)),logHistory(_0x37dc4c(0x136),_0x37dc4c(0xe7)),await killBot();else{if(_0x792183[_0x37dc4c(0x22b)]()['includes'](_0x37dc4c(0x171)))logHistory(_0x37dc4c(0x136),_0x37dc4c(0x101)+_0xef7c02);else{if(_0x792183 instanceof ccxt[_0x37dc4c(0x10c)]){_0x38effe=_0x5f2530+_0x37dc4c(0x11d)+_0x792183[_0x37dc4c(0x22b)](),logHistory(_0x37dc4c(0x136),_0x38effe),logger['debug'](_0x37dc4c(0x1d4),_0x792183);if(_0xef7c02)logger['debug']('Symbol(s):\x20'+_0xef7c02);await pauseBot(undefined,_0x38effe,_0x792183);}else{_0x38effe=_0x37dc4c(0x1b6)+_0x792183[_0x37dc4c(0x22b)](),logHistory('error',_0x38effe),logger[_0x37dc4c(0x1f7)](_0x38effe+'\x20>\x20details:',_0x792183);if(_0xef7c02)logger[_0x37dc4c(0x1f7)](_0x37dc4c(0x240)+_0xef7c02);await pauseBot(undefined,_0x38effe);}}}}}}}}}}}}}}}}async function withRetry(_0x475338,_0x5b8ef4){const _0x4ec77c=_0x39baf0;let _0x2c7f40=![],_0x9eda12=0x0,_0x77a45d,_0x1e2d41;while(_0x9eda12<maxRetries){try{_0x77a45d=await _0x5b8ef4();break;}catch(_0x590922){_0x1e2d41=_0x590922,!_0x2c7f40?(_0x2c7f40=!![],logger[_0x4ec77c(0x1f7)](_0x4ec77c(0x189)+_0x475338+':',_0x590922['toString']())):await sleep(retryInterval);}_0x9eda12++;}if(_0x9eda12==0x0)return _0x77a45d;if(_0x9eda12>=maxRetries)throw _0x1e2d41;else return logger['debug'](_0x4ec77c(0x174)+_0x9eda12+'\x20attempts'),_0x77a45d;}function formatResult(_0x5612a0,_0x42a82f){const _0x4609cf=_0x39baf0;return parseFloat(_0x5612a0[_0x4609cf(0x1fc)](_0x42a82f));}function formatResultTruncate(_0x1e761e,_0x559d8b){const _0x40e217=_0x39baf0;let _0x63b7c5=formatResultString(_0x1e761e,0xa),_0xa4d24=_0x63b7c5[_0x40e217(0x1ba)]('.');return _0xa4d24!=-0x1&&(_0x63b7c5=_0x63b7c5[_0x40e217(0xb2)](0x0,_0xa4d24+_0x559d8b+0x1)),Number(_0x63b7c5);}function formatResultString(_0x568e48,_0x574ec2){const _0x398ac2=_0x39baf0;let _0x11c1b7;if(!(''+_0x568e48)[_0x398ac2(0x128)]('e'))_0x11c1b7=+(Math[_0x398ac2(0xe5)](_0x568e48+'e+'+_0x574ec2)+'e-'+_0x574ec2);else{let _0x22482c=(''+_0x568e48)[_0x398ac2(0x15b)]('e'),_0x33e16b='';+_0x22482c[0x1]+_0x574ec2>0x0&&(_0x33e16b='+'),_0x11c1b7=+(Math['round'](+_0x22482c[0x0]+'e'+_0x33e16b+(+_0x22482c[0x1]+_0x574ec2))+'e-'+_0x574ec2);}return Number(_0x11c1b7)[_0x398ac2(0x1fc)](_0x574ec2);}function getServerTime(){const _0x920314=_0x39baf0,_0xaa174e=new Date();return _0xaa174e[_0x920314(0xcf)]()+'/'+(_0xaa174e['getMonth']()+0x1)[_0x920314(0x22b)]()[_0x920314(0x211)](0x2,'0')+'/'+_0xaa174e['getDate']()[_0x920314(0x22b)]()[_0x920314(0x211)](0x2,'0')+'\x20'+_0xaa174e[_0x920314(0x172)]()[_0x920314(0x22b)]()[_0x920314(0x211)](0x2,'0')+':'+_0xaa174e['getMinutes']()[_0x920314(0x22b)]()['padStart'](0x2,'0')+':'+_0xaa174e['getSeconds']()[_0x920314(0x22b)]()[_0x920314(0x211)](0x2,'0');}function getTimeStamp(){const _0x58f0f5=_0x39baf0,_0x15e39f=shiftedTime();return _0x15e39f[_0x58f0f5(0xcf)]()+'/'+(_0x15e39f[_0x58f0f5(0x218)]()+0x1)['toString']()[_0x58f0f5(0x211)](0x2,'0')+'/'+_0x15e39f[_0x58f0f5(0x254)]()[_0x58f0f5(0x22b)]()[_0x58f0f5(0x211)](0x2,'0')+'\x20'+_0x15e39f['getHours']()[_0x58f0f5(0x22b)]()[_0x58f0f5(0x211)](0x2,'0')+':'+_0x15e39f[_0x58f0f5(0x1b5)]()[_0x58f0f5(0x22b)]()[_0x58f0f5(0x211)](0x2,'0')+':'+_0x15e39f[_0x58f0f5(0x1c8)]()['toString']()[_0x58f0f5(0x211)](0x2,'0');}function getDate(){const _0x19db38=_0x39baf0,_0x5f3edf=shiftedTime();return _0x5f3edf[_0x19db38(0xcf)]()+'/'+(_0x5f3edf[_0x19db38(0x218)]()+0x1)['toString']()[_0x19db38(0x211)](0x2,'0')+'/'+_0x5f3edf[_0x19db38(0x254)]()[_0x19db38(0x22b)]()['padStart'](0x2,'0');}function getHour(){const _0x2efeda=_0x39baf0,_0x372ff4=shiftedTime();return _0x372ff4['getHours']()[_0x2efeda(0x22b)]()[_0x2efeda(0x211)](0x2,'0');}function sleep(_0x2448cb){return new Promise(_0x53a9a4=>setTimeout(_0x53a9a4,_0x2448cb));}function shiftedTime(){const _0x25f25a=_0x39baf0,_0x328156=new Date();let _0x157ea7=_0x328156;if(config&&config[_0x25f25a(0x226)]!==0x0)_0x157ea7=fns['add'](_0x328156,{'hours':config[_0x25f25a(0x226)]});return _0x157ea7;}function timer(_0x179879){const _0x1a5257=_0x39baf0,_0x4a3b4a=new Date();!lasttime?console['log'](getTimeStamp()+_0x1a5257(0x12c),_0x179879,_0x4a3b4a):console[_0x1a5257(0x1b7)](getTimeStamp()+':\x20timer\x20>',_0x179879,(_0x4a3b4a-lasttime)/0x3e8),lasttime=_0x4a3b4a;}