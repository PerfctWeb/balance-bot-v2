const _0x3d1ce2=_0x9ad2;(function(_0x15f879,_0x41f291){const _0xdc2c38=_0x9ad2,_0x285495=_0x15f879();while(!![]){try{const _0x1db754=-parseInt(_0xdc2c38(0x286))/0x1+-parseInt(_0xdc2c38(0x1e9))/0x2+parseInt(_0xdc2c38(0x1bf))/0x3+parseInt(_0xdc2c38(0x2a6))/0x4+-parseInt(_0xdc2c38(0x1e6))/0x5*(parseInt(_0xdc2c38(0x289))/0x6)+-parseInt(_0xdc2c38(0x1fa))/0x7+parseInt(_0xdc2c38(0x1dd))/0x8;if(_0x1db754===_0x41f291)break;else _0x285495['push'](_0x285495['shift']());}catch(_0x38428b){_0x285495['push'](_0x285495['shift']());}}}(_0x52e9,0xd341b));const _0x5e5aff=function(){let _0x381691=!![];return function(_0x54fbb8,_0x595393){const _0x419c6f=_0x381691?function(){const _0x54a259=_0x9ad2;if(_0x595393){const _0x49418b=_0x595393[_0x54a259(0x1de)](_0x54fbb8,arguments);return _0x595393=null,_0x49418b;}}:function(){};return _0x381691=![],_0x419c6f;};}(),_0x142c42=_0x5e5aff(this,function(){const _0x9808c4=_0x9ad2;return _0x142c42[_0x9808c4(0x250)]()[_0x9808c4(0x1bc)](_0x9808c4(0x1be))[_0x9808c4(0x250)]()[_0x9808c4(0x266)](_0x142c42)[_0x9808c4(0x1bc)](_0x9808c4(0x1be));});_0x142c42();'use strict';const ccxt=require(_0x3d1ce2(0x248)),low=require(_0x3d1ce2(0x249)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x3d1ce2(0x24f))[_0x3d1ce2(0x226)];let exchange,wsClient;global[_0x3d1ce2(0x254)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3d1ce2(0x251))['version'],botID=process['argv'][0x2]||_0x3d1ce2(0x1e5),pattern=/^[0-9]{3}$/;if(!pattern[_0x3d1ce2(0x237)](botID))return console['log'](_0x3d1ce2(0x21d)+botID+_0x3d1ce2(0x239)),process[_0x3d1ce2(0x1c5)](0x1);const userID=process[_0x3d1ce2(0x1cd)][0x3]||'',configpath=userID?_0x3d1ce2(0x1cf)+userID+'/':_0x3d1ce2(0x1cf);!fs[_0x3d1ce2(0x234)](configpath)&&fs[_0x3d1ce2(0x29d)](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x3d1ce2(0x210)+botID+'-events.json',performancefile=configpath+_0x3d1ce2(0x210)+botID+_0x3d1ce2(0x269),coinresultsfile=configpath+_0x3d1ce2(0x210)+botID+_0x3d1ce2(0x22a),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3d1ce2(0x288)]({'logs':[]})[_0x3d1ce2(0x25f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3d1ce2(0x288)]({'bot':[]})[_0x3d1ce2(0x25f)]();function _0x52e9(){const _0x153a4f=['ticker','date','\x20>\x20','length','padStart','InsufficientFunds','limits','balances','getMinutes','subscribeSpotKline','threshold','write','includes','remove','USDT','find','order','botID','constructor','symbol','initclient','-performance.json','reduce','AuthenticationError','performance','Order(s)\x20not\x20validated\x20after\x20','bot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','type','\x20order:\x20','differenceInCalendarDays','split','remainingSymbols','orderType','total','running','\x20|\x20Error\x20details:\x20','startdate','log','getTime','abs','orderStatus','number','amount','restart','outboundAccountPosition','BNB','wss://stream.binance.us:9443','ordertype','push','353116WotvJp','realized','defaults','2025090OgOmhh','progress','coinamount','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','logs','\x20|\x20Unknown\x20error\x20occured','Invalid\x20quantity','data','symbols','fetchTickers','wss://stream.binance.com:9443','limit-high','BTC/USDT','usd','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','filled','emojibuy','price','executionReport','target','mkdirSync','event','formattedMessage','exchange','FILLED','getFiat()','\x20orders\x20in\x20less\x20than\x20','get','coin-loading-progress','5363600ubPwVK','placeOrder','binance','getMonth','privateKey','stringify','sort','BTC/EUR','configuration-stored','\x20minutes\x20-\x20balancing\x20resumed','botname','forEach','cooldown','round','min','breakeven','availableBalance','headless','args','has','cost','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','format','fromCodePoint','toLowerCase','InvalidNonce','decrypt','error','message','Order(s)\x20filled\x20-\x20balancing\x20resumed','binanceus','search','slice','(((.+)+)+)+$','4358934alwrwY','wsKey','coins','valid','getPortfolio()','fees','exit','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','Executed\x20','side','showname','eventType','enabled','sortBy','argv','API-key\x20format\x20invalid','./config/','currency','apiSecret','************','ExchangeNotAvailable','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','close','event-history','entries','timeout','placeOrder()','sell','parse','buy','9554296YTyNZG','apply','Bot\x20','fetchOrders','secure','bid','differenceInSeconds',')\x20|\x20Error\x20details:\x20','001','25APSIZh','page','cancelOrder','271918bQPFzk','last','startprice','coin','send','startnumber','ask','userData','getSeconds','limit','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cancel','add','shift','LIMIT','emitHistory','settings','6623456VIPIOC','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getStartingBalances','excluded','reverse','emojisell','trade','closeWs','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','eur','getPortfolio','getHours','createOrder','limit-low','BTCEUR','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','time','function','Limit\x20(high-margin)','timestamp','Order(s)\x20validated\x20-\x20balancing\x20resumed','bot-','filter','orderId','Performance\x20recreation\x20completed\x20successfully','yyyy/MM/dd','BTC/BUSD','kill','indexOf',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','RequestTimeout','assign','value','Error:\x20Invalid\x20argument\x20','buys','BTCUSDT','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','DAI/','configuration','datetime','BTC','basecoin','Crypt','DDoSProtection','parseISO','getFullYear','-results.json','portfolio','apiKey','delta','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','cancelLoading','WebSockets(','cancelOrder()','map','recreate','existsSync','splice','accumulatedQuantity','test','keys',',\x20must\x20be\x20a\x203\x20digit\x20number','distribution','getDate','toFixed','getCoins()','kline','success','asset','recreateHistory()','initws()','HOT/BTC','fee','market','BTCBUSD','Order\x20amount\x20is\x20invalid:\x20','ccxt','lowdb','starting-balances','replace','Binance\x20API\x20key\x20is\x20invalid','EUR','isArray','hybrid-crypto-js','toString','./version.json','timeshift','Order:\x20'];_0x52e9=function(){return _0x153a4f;};return _0x52e9();}const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x3d1ce2(0x25f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x3d1ce2(0x209),'symbol':_0x3d1ce2(0x1a4)},'usd':{'coin':_0x3d1ce2(0x21f),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3d34ae)=>{},'debug':(..._0x4b1074)=>{},'notice':(..._0x3346be)=>{},'info':(..._0x1346d8)=>{},'warning':(..._0x17b7da)=>{},'error':async function(..._0x3c1fd4){const _0x177bac=_0x3d1ce2,_0x19e0cb=new Date()['getTime']();if(!lastErrorShown||_0x19e0cb-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x177bac(0x27b)](),logHistory(_0x177bac(0x1b8),_0x177bac(0x230)+consecutivePauses+_0x177bac(0x218));let _0x396fa7='';if(_0x3c1fd4[0x0])_0x396fa7+=_0x3c1fd4[0x0];if(_0x3c1fd4[0x1]&&_0x3c1fd4[0x1]['error']&&_0x3c1fd4[0x1][_0x177bac(0x1b8)][_0x177bac(0x1b9)])_0x396fa7+='\x20-\x20'+_0x3c1fd4[0x1][_0x177bac(0x1b8)][_0x177bac(0x1b9)];logging(_0x177bac(0x230)+consecutivePauses+_0x177bac(0x1e4),''+_0x396fa7),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x3d1ce2(0x252)]);process[_0x3d1ce2(0x1ed)]({'started':_0x3d1ce2(0x277)}),initializeProcessListeners();function proxyEmit(_0x14f9dd,_0xd168f1=null){const _0x588aa7=_0x3d1ce2;process[_0x588aa7(0x1ed)]({'function':_0x14f9dd,'args':_0xd168f1});}function initializeProcessListeners(){process['on']('message',_0x229c15=>{const _0x5c999d=_0x9ad2;switch(Object[_0x5c999d(0x238)](_0x229c15)[0x0]){case _0x5c999d(0x252):_0x229c15[_0x5c999d(0x252)]!=undefined&&(settings[_0x5c999d(0x252)]=_0x229c15[_0x5c999d(0x252)],updateTimeshift(settings['timeshift']));break;case _0x5c999d(0x20c):switch(_0x229c15[_0x5c999d(0x20c)]){case _0x5c999d(0x268):initclient();break;case _0x5c999d(0x1f8):emitHistory(_0x229c15[_0x5c999d(0x1af)]);break;case _0x5c999d(0x205):getPortfolio(_0x229c15[_0x5c999d(0x1af)]);break;case'storeConfiguration':storeConfiguration(_0x229c15[_0x5c999d(0x1af)]);break;case'storeHeadless':storeHeadless(_0x229c15[_0x5c999d(0x1af)]);break;case _0x5c999d(0x1fc):getStartingBalances();break;case _0x5c999d(0x19e):placeOrder(_0x229c15['args']);break;case _0x5c999d(0x22f):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x20381b=_0x3d1ce2;if(pidBalances)clearTimeout(pidBalances);if(config[_0x20381b(0x22c)]!=''){await initExchange(config[_0x20381b(0x22c)],config['apiSecret']);let _0x3b4a1c=await loadSymbols();_0x3b4a1c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x215f68,_0x48fd06){const _0x58c97e=_0x3d1ce2,_0x39cd65=ccxt[config[_0x58c97e(0x2a0)]];let _0x1d7b51;switch(config[_0x58c97e(0x2a0)]){case _0x58c97e(0x19f):_0x1d7b51=_0x58c97e(0x293);break;case _0x58c97e(0x1bb):_0x1d7b51=_0x58c97e(0x283);break;default:_0x1d7b51=_0x58c97e(0x293);}exchange=new _0x39cd65({'apiKey':_0x215f68,'secret':_0x48fd06,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x215f68,'api_secret':_0x48fd06,'beautify':!![],'wsUrl':_0x1d7b51},logger),config['exchange']==_0x58c97e(0x1bb)&&(stablecoins={'eur':{'coin':_0x58c97e(0x246),'symbol':_0x58c97e(0x215)},'usd':{'coin':_0x58c97e(0x21f),'symbol':_0x58c97e(0x295)}});}async function loadSymbols(){const _0xa8f24f=_0x3d1ce2;let _0x29cba5;try{markets=await exchange['loadMarkets']();const _0x56b24e=[_0xa8f24f(0x221),_0xa8f24f(0x243),'HOT/EUR'];allSymbols=exchange[_0xa8f24f(0x291)][_0xa8f24f(0x211)](_0x4dfd0c=>{const _0x5b9916=_0xa8f24f;let _0x1985c1=![];return _0x56b24e[_0x5b9916(0x1a8)](_0x565f40=>{const _0x13647d=_0x5b9916;if(_0x4dfd0c[_0x13647d(0x260)](_0x565f40))_0x1985c1=!![];}),!_0x1985c1;}),_0x29cba5=!![];}catch(_0x3480ad){await handleError(_0x3480ad,'loadSymbols()'),_0x29cba5=![];}return _0x29cba5;}async function initbot(){const _0x29b146=_0x3d1ce2;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2e1e69=dbCoinResults[_0x29b146(0x2a4)](_0x29b146(0x1c1))['value']();if(_0x2e1e69[_0x29b146(0x257)]==0x0)await resetCoinResults();}async function initclient(){const _0x114a4b=_0x3d1ce2;proxyEmit(_0x114a4b(0x222),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x114a4b(0x25b),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x2a1e2d=_0x3d1ce2;wsinitialized=![];ws1&&(ws1[_0x2a1e2d(0x1a8)](_0xf4b9c3=>{const _0x1d8044=_0x2a1e2d;try{wsClient[_0x1d8044(0x201)](_0xf4b9c3);}catch(_0x9235dc){}}),ws1=[]);if(ws2){try{wsClient[_0x2a1e2d(0x201)](ws2);}catch(_0x16f051){}ws2=null;}}async function initws(){const _0x3fa511=_0x3d1ce2;cleanws();let _0x1fe016=[];currentCoins[_0x3fa511(0x1a8)](_0x5b7438=>{const _0x1580cf=_0x3fa511;if(_0x5b7438[_0x1580cf(0x1ec)]!=config[_0x1580cf(0x225)])_0x1fe016[_0x1580cf(0x285)](noslash(_0x5b7438[_0x1580cf(0x267)]));});if(!_0x1fe016[_0x3fa511(0x260)](stablecoins['eur'][_0x3fa511(0x1ec)]))_0x1fe016[_0x3fa511(0x285)](stablecoins['eur'][_0x3fa511(0x1ec)]);if(!_0x1fe016[_0x3fa511(0x260)](stablecoins['usd']['coin']))_0x1fe016[_0x3fa511(0x285)](stablecoins[_0x3fa511(0x296)][_0x3fa511(0x1ec)]);if(!_0x1fe016[_0x3fa511(0x260)](_0x3fa511(0x282)+config[_0x3fa511(0x225)]))_0x1fe016[_0x3fa511(0x285)]('BNB'+config['basecoin']);try{_0x1fe016[_0x3fa511(0x1a8)]((_0xe4ff32,_0x55b44c)=>{const _0x49341f=_0x3fa511;ws1[_0x55b44c]=wsClient[_0x49341f(0x25d)](_0xe4ff32,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x3fa511(0x29f),_0x556870=>{const _0x130393=_0x3fa511;if(!Array[_0x130393(0x24e)](_0x556870)&&!_0x556870[_0x130393(0x1c0)][_0x130393(0x260)]('userData')){if(_0x556870[_0x130393(0x1ca)]===_0x130393(0x23e)){global['ticker'][_0x556870[_0x130393(0x23e)][_0x130393(0x267)]]=_0x556870[_0x130393(0x23e)][_0x130393(0x1d5)];return;}}else{if(!Array[_0x130393(0x24e)](_0x556870)&&_0x556870['wsKey'][_0x130393(0x260)](_0x130393(0x1f0))){if(_0x556870['wsMarket']['includes']('spot')){updateNumberCoins(_0x556870);return;}}}}),wsClient['on']('reconnected',async _0x14e530=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x7d0b44){await handleError(_0x7d0b44,_0x3fa511(0x242));}let _0x53688e,_0x52abe0=0x0;loading['remainingSymbols']=[];let _0x48db0b=0x0;currentCoins['forEach'](_0x524393=>{const _0x3f5a42=_0x3fa511;if(_0x524393['coin']!=config['basecoin'])loading[_0x3f5a42(0x274)]['push'](_0x524393[_0x3f5a42(0x267)]);}),loadingCanceled=![];while(_0x53688e!=currentCoins[_0x3fa511(0x257)]-0x1){_0x53688e=0x0,currentCoins[_0x3fa511(0x1a8)](_0x5303b6=>{const _0x5850d5=_0x3fa511;_0x5303b6[_0x5850d5(0x1ec)]!=config[_0x5850d5(0x225)]&&global[_0x5850d5(0x254)][noslash(_0x5303b6['symbol'])]&&(loading[_0x5850d5(0x274)]=loading['remainingSymbols'][_0x5850d5(0x211)](_0x330df0=>_0x330df0!=_0x5303b6[_0x5850d5(0x267)]),_0x53688e++);}),loading[_0x3fa511(0x28a)]=Math[_0x3fa511(0x1aa)](_0x53688e/(currentCoins[_0x3fa511(0x257)]-0x1)*0x64);_0x48db0b>0x1e*0x5&&(loading[_0x3fa511(0x1d8)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x3fa511(0x1f4)]=!![],emitLoadingProgress();break;}else _0x53688e!=_0x52abe0&&(_0x52abe0=_0x53688e,emitLoadingProgress()),_0x48db0b++,await sleep(0xc8);}if(_0x53688e==currentCoins['length']-0x1)wsinitialized=!![];}function _0x9ad2(_0x30f103,_0x5b3879){const _0xcb1827=_0x52e9();return _0x9ad2=function(_0x142c42,_0x5e5aff){_0x142c42=_0x142c42-0x19e;let _0x52e9ac=_0xcb1827[_0x142c42];return _0x52e9ac;},_0x9ad2(_0x30f103,_0x5b3879);}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x3b922f=_0x3d1ce2;proxyEmit(_0x3b922f(0x2a5),loading);}async function getFiat(){const _0x3f6673=_0x3d1ce2;let _0x174ed4=0x0,_0x3e283b=0x0;try{_0x174ed4=global[_0x3f6673(0x254)][stablecoins['eur'][_0x3f6673(0x1ec)]],_0x3e283b=global[_0x3f6673(0x254)][stablecoins[_0x3f6673(0x296)]['coin']];}catch(_0x28e064){await handleError(_0x28e064,_0x3f6673(0x2a2));}return{'eur':Number(_0x174ed4),'usd':Number(_0x3e283b)};}async function setStartDatePerformance(_0x340f5e){const _0x1e0164=_0x3d1ce2,_0x6ee9de=fns[_0x1e0164(0x1b3)](new Date(_0x340f5e['startdate']),_0x1e0164(0x214));let _0x135b53=[];_0x135b53[stablecoins['eur']['coin']]=await getCloses(stablecoins[_0x1e0164(0x204)][_0x1e0164(0x267)],new Date(_0x340f5e[_0x1e0164(0x279)]),0x1),_0x135b53[stablecoins[_0x1e0164(0x296)][_0x1e0164(0x1ec)]]=await getCloses(stablecoins[_0x1e0164(0x296)]['symbol'],new Date(_0x340f5e[_0x1e0164(0x279)]),0x1);let _0x292ca5,_0x33014c=[];_0x340f5e[_0x1e0164(0x22b)][_0x1e0164(0x1a8)](_0x2a6ed2=>{const _0x438ad3=_0x1e0164;!_0x2a6ed2[_0x438ad3(0x1fd)]&&_0x33014c['push']({'coin':_0x2a6ed2[_0x438ad3(0x1ec)],'number':_0x2a6ed2[_0x438ad3(0x1ee)],'price':_0x2a6ed2[_0x438ad3(0x1eb)]});}),_0x292ca5={'date':_0x6ee9de,'eur':_0x135b53[stablecoins['eur']['coin']][0x0],'usd':_0x135b53[stablecoins[_0x1e0164(0x296)][_0x1e0164(0x1ec)]][0x0],'coins':_0x33014c};let _0x44f751=dbPerformance[_0x1e0164(0x2a4)](_0x1e0164(0x290))['find']({'date':_0x6ee9de})[_0x1e0164(0x21c)]();_0x44f751?dbPerformance[_0x1e0164(0x2a4)](_0x1e0164(0x290))[_0x1e0164(0x263)]({'date':_0x6ee9de})[_0x1e0164(0x21b)](_0x292ca5)['write']():dbPerformance[_0x1e0164(0x2a4)](_0x1e0164(0x290))[_0x1e0164(0x285)](_0x292ca5)[_0x1e0164(0x25f)](),_0x44f751=dbPerformance[_0x1e0164(0x2a4)](_0x1e0164(0x290))[_0x1e0164(0x1cc)](_0x1e0164(0x255))[_0x1e0164(0x21c)](),_0x44f751[_0x1e0164(0x1a8)](_0xbf9cfd=>{const _0x2e33f6=_0x1e0164;_0xbf9cfd[_0x2e33f6(0x255)]<_0x6ee9de&&dbPerformance[_0x2e33f6(0x2a4)]('data')[_0x2e33f6(0x261)]({'date':_0xbf9cfd['date']})[_0x2e33f6(0x25f)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x645d8c){const _0x2fb849=_0x3d1ce2;let _0x4a6165,_0x3691e7=[];logHistory(_0x2fb849(0x23f),_0x2fb849(0x22e)),_0x645d8c[_0x2fb849(0x22b)][_0x2fb849(0x1a8)](_0x2129bb=>{const _0x27ae37=_0x2fb849;if(_0x2129bb[_0x27ae37(0x1ec)]!=config[_0x27ae37(0x225)]&&!_0x2129bb[_0x27ae37(0x1fd)])_0x3691e7[_0x27ae37(0x285)]({'coin':_0x2129bb['coin'],'symbol':_0x2129bb[_0x27ae37(0x267)]});});let _0x41fbdd=[];try{const _0x130f9c=fns[_0x2fb849(0x1b3)](fns['parseISO'](_0x645d8c[_0x2fb849(0x279)][_0x2fb849(0x24b)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x407e69 of _0x3691e7){if(_0x407e69[_0x2fb849(0x1ec)]!=config[_0x2fb849(0x225)])_0x4a6165=await exchange[_0x2fb849(0x1e0)](_0x407e69[_0x2fb849(0x267)],Date['parse'](_0x130f9c));_0x4a6165[_0x2fb849(0x1a8)](_0xf380e8=>{const _0x54657b=_0x2fb849,_0x149e9d=_0x407e69[_0x54657b(0x267)]['includes'](config[_0x54657b(0x225)]+'/'),_0x12a189=fns[_0x54657b(0x1b3)](fns[_0x54657b(0x228)](_0xf380e8[_0x54657b(0x223)]),'yyyy/MM/dd\x20HH:mm:ss'),_0xb99a7c=fns[_0x54657b(0x1b3)](fns[_0x54657b(0x228)](_0xf380e8['datetime']),'yyyy/MM/dd');let _0x295c5a;if(_0xf380e8[_0x54657b(0x1c8)]==_0x54657b(0x1dc)&&_0x149e9d==![])_0x295c5a=_0xf380e8['amount'];if(_0xf380e8['side']=='buy'&&_0x149e9d==!![])_0x295c5a=-_0xf380e8[_0x54657b(0x27f)]*_0xf380e8[_0x54657b(0x29a)];if(_0xf380e8[_0x54657b(0x1c8)]==_0x54657b(0x1da)&&_0x149e9d==![])_0x295c5a=-_0xf380e8[_0x54657b(0x27f)];if(_0xf380e8[_0x54657b(0x1c8)]=='sell'&&_0x149e9d==!![])_0x295c5a=_0xf380e8[_0x54657b(0x27f)]*_0xf380e8[_0x54657b(0x29a)];_0x41fbdd[_0x54657b(0x285)]({'timestamp':_0x12a189,'date':_0xb99a7c,'coin':_0x407e69['coin'],'symbol':_0x407e69['symbol'],'type':_0xf380e8[_0x54657b(0x270)],'side':_0xf380e8[_0x54657b(0x1c8)],'reverse':_0x149e9d,'amount':formatResult(_0xf380e8[_0x54657b(0x298)],0x8),'filled':formatResult(_0xf380e8['filled'],0x8),'coinamount':formatResult(_0x295c5a,0x8),'price':formatResult(_0xf380e8[_0x54657b(0x29a)],0x8)});let _0x268a76;if(_0xf380e8[_0x54657b(0x1c8)]=='buy'&&_0x149e9d==![])_0x268a76=-_0xf380e8[_0x54657b(0x27f)]*_0xf380e8[_0x54657b(0x29a)];if(_0xf380e8[_0x54657b(0x1c8)]==_0x54657b(0x1dc)&&_0x149e9d==!![])_0x268a76=_0xf380e8[_0x54657b(0x27f)];if(_0xf380e8[_0x54657b(0x1c8)]==_0x54657b(0x1da)&&_0x149e9d==![])_0x268a76=_0xf380e8[_0x54657b(0x27f)]*_0xf380e8[_0x54657b(0x29a)];if(_0xf380e8[_0x54657b(0x1c8)]==_0x54657b(0x1da)&&_0x149e9d==!![])_0x268a76=-_0xf380e8[_0x54657b(0x27f)];_0x41fbdd[_0x54657b(0x285)]({'date':_0xb99a7c,'coin':config[_0x54657b(0x225)],'coinamount':formatResult(_0x268a76,0x8)});});}_0x41fbdd[_0x2fb849(0x1a3)]((_0x628f3f,_0x2d146f)=>_0x628f3f[_0x2fb849(0x20e)]>_0x2d146f[_0x2fb849(0x20e)]?0x1:_0x2d146f['timestamp']>_0x628f3f[_0x2fb849(0x20e)]?-0x1:0x0),dbLogs[_0x2fb849(0x2a4)](_0x2fb849(0x28d))['remove']()[_0x2fb849(0x25f)](),_0x41fbdd['forEach'](_0x419590=>{const _0xe0f79c=_0x2fb849;let _0x4e517a;_0x419590[_0xe0f79c(0x1ec)]!=config['basecoin']&&(_0x4e517a={'time':_0x419590['timestamp'],'type':_0xe0f79c(0x264),'event':_0xe0f79c(0x253)+_0x419590[_0xe0f79c(0x267)]+'\x20'+_0x419590[_0xe0f79c(0x1c8)]+'\x20#'+_0x419590[_0xe0f79c(0x27f)]+'\x20@'+_0x419590[_0xe0f79c(0x29a)]},dbLogs[_0xe0f79c(0x2a4)](_0xe0f79c(0x28d))[_0xe0f79c(0x285)](_0x4e517a)[_0xe0f79c(0x25f)]());});const _0x38b5b5=fns['eachDayOfInterval']({'start':new Date(_0x645d8c[_0x2fb849(0x279)]),'end':new Date()})[_0x2fb849(0x232)](_0x2cbd04=>fns[_0x2fb849(0x1b3)](_0x2cbd04,_0x2fb849(0x214)));let _0x430145=[];_0x645d8c[_0x2fb849(0x22b)][_0x2fb849(0x1a8)](_0x4ac51d=>{const _0x12289e=_0x2fb849;if(!_0x4ac51d[_0x12289e(0x1fd)]){_0x430145[_0x4ac51d[_0x12289e(0x1ec)]]=[];let _0x299188=_0x4ac51d[_0x12289e(0x1ee)];_0x38b5b5[_0x12289e(0x1a8)]((_0x4ae8b1,_0x142f72)=>{const _0x1f1e1b=_0x12289e;let _0x229bbe=_0x41fbdd['filter'](_0x48bd59=>_0x48bd59[_0x1f1e1b(0x1ec)]==_0x4ac51d[_0x1f1e1b(0x1ec)]&&_0x48bd59[_0x1f1e1b(0x255)]==_0x4ae8b1);if(_0x229bbe[_0x1f1e1b(0x257)]!=0x0){let _0x2425f3=_0x229bbe[_0x1f1e1b(0x26a)]((_0x1305ea,_0x247d0e)=>{const _0x34fbd1=_0x1f1e1b;return _0x1305ea+=_0x247d0e[_0x34fbd1(0x28b)],_0x1305ea;},0x0);_0x299188+=_0x2425f3;}_0x430145[_0x4ac51d[_0x1f1e1b(0x1ec)]][_0x4ae8b1]=_0x299188;});}});const _0x308003=[..._0x3691e7];_0x308003['push']({'coin':stablecoins[_0x2fb849(0x204)]['coin'],'symbol':stablecoins[_0x2fb849(0x204)][_0x2fb849(0x267)]}),_0x308003[_0x2fb849(0x285)]({'coin':stablecoins[_0x2fb849(0x296)][_0x2fb849(0x1ec)],'symbol':stablecoins[_0x2fb849(0x296)][_0x2fb849(0x267)]});let _0x10ddef=[];for(const _0x5e8226 of _0x308003){_0x10ddef[_0x5e8226[_0x2fb849(0x1ec)]]=await getCloses(_0x5e8226[_0x2fb849(0x267)],new Date(_0x645d8c[_0x2fb849(0x279)]));}dbPerformance[_0x2fb849(0x2a4)](_0x2fb849(0x290))['remove']()[_0x2fb849(0x25f)](),_0x38b5b5[_0x2fb849(0x1a8)]((_0x4e83a1,_0x22022b)=>{const _0x3f2b78=_0x2fb849;let _0xd85c6a,_0x107470=[];_0x22022b==0x0?(_0x645d8c['portfolio'][_0x3f2b78(0x1a8)](_0x38bd35=>{const _0x9b1d20=_0x3f2b78;!_0x38bd35[_0x9b1d20(0x1fd)]&&_0x107470['push']({'coin':_0x38bd35[_0x9b1d20(0x1ec)],'number':_0x38bd35[_0x9b1d20(0x1ee)],'price':_0x38bd35[_0x9b1d20(0x1eb)]});}),_0xd85c6a={'date':_0x4e83a1,'eur':_0x10ddef[stablecoins[_0x3f2b78(0x204)][_0x3f2b78(0x1ec)]][_0x22022b],'usd':_0x10ddef[stablecoins['usd'][_0x3f2b78(0x1ec)]][_0x22022b],'coins':_0x107470}):(_0x645d8c['portfolio']['forEach'](_0x18e462=>{const _0x3e4975=_0x3f2b78;!_0x18e462[_0x3e4975(0x1fd)]&&_0x107470['push']({'coin':_0x18e462['coin'],'number':_0x430145[_0x18e462['coin']][_0x4e83a1],'price':_0x18e462['coin']==config['basecoin']?0x1:_0x10ddef[_0x18e462[_0x3e4975(0x1ec)]][_0x22022b]});}),_0xd85c6a={'date':_0x4e83a1,'eur':_0x10ddef[stablecoins[_0x3f2b78(0x204)]['coin']][_0x22022b],'usd':_0x10ddef[stablecoins[_0x3f2b78(0x296)][_0x3f2b78(0x1ec)]][_0x22022b],'coins':_0x107470}),dbPerformance[_0x3f2b78(0x2a4)](_0x3f2b78(0x290))['push'](_0xd85c6a)[_0x3f2b78(0x25f)]();}),emitPerformance(),await resetCoinResults();for(let _0x3753a1 of _0x41fbdd){_0x3753a1['coin']!=config['basecoin']&&await updateCoinResults(_0x3753a1);}logHistory(_0x2fb849(0x23f),_0x2fb849(0x213));}catch(_0x3a83b8){await handleError(_0x3a83b8,_0x2fb849(0x241));}}async function getCloses(_0x14a1cd,_0x3714f2,_0x16d02a=undefined){const _0x48104f=_0x3d1ce2,_0x5918f9='1d';let _0x51a70b,_0x1c30f4;const _0x4c62bd=fns[_0x48104f(0x272)](new Date(),_0x3714f2)+0x1;try{const _0x55fe7a=exchange['milliseconds']()-_0x4c62bd*0x18*0xe10*0x3e8;_0x51a70b=await exchange['fetchOHLCV'](_0x14a1cd,_0x5918f9,_0x55fe7a,_0x16d02a),_0x1c30f4=await exchange[_0x48104f(0x292)](_0x14a1cd);}catch(_0x440f24){await handleError(_0x440f24,'getCloses()');}let _0x1a2d84=ohlcvToCloses(_0x51a70b);return _0x1a2d84[_0x48104f(0x285)](_0x1c30f4[_0x14a1cd][_0x48104f(0x1ea)]),_0x1a2d84;}function ohlcvToCloses(_0x4b7753){const _0x54c936=_0x3d1ce2;let _0x4c69e1=[];return _0x4b7753[_0x54c936(0x1a8)](function(_0x405821){_0x4c69e1['push'](_0x405821[0x4]);}),_0x4c69e1;}function getConfiguration(_0x3cbd7c){const _0x7d9d2e=_0x3d1ce2;let _0x44e75e=dbConfig[_0x7d9d2e(0x2a4)]('bot')[_0x7d9d2e(0x263)]({'botID':_0x3cbd7c})[_0x7d9d2e(0x21c)]();if(_0x44e75e){let _0x42a68f=![];!_0x44e75e[_0x7d9d2e(0x2a0)]&&(_0x44e75e={..._0x44e75e,'exchange':_0x7d9d2e(0x19f)},_0x42a68f=!![]),!_0x44e75e[_0x7d9d2e(0x225)]&&(_0x44e75e={..._0x44e75e,'basecoin':_0x7d9d2e(0x224)},_0x42a68f=!![]),!_0x44e75e[_0x7d9d2e(0x284)]&&(_0x44e75e={..._0x44e75e,'ordertype':_0x7d9d2e(0x245)},_0x42a68f=!![]),!_0x44e75e[_0x7d9d2e(0x1d8)]&&(_0x44e75e={..._0x44e75e,'timeout':0x14},_0x42a68f=!![]),!_0x44e75e[_0x7d9d2e(0x299)]&&(_0x44e75e={..._0x44e75e,'emojibuy':''},_0x42a68f=!![]),!_0x44e75e[_0x7d9d2e(0x1ff)]&&(_0x44e75e={..._0x44e75e,'emojisell':''},_0x42a68f=!![]),!_0x44e75e['showname']&&(_0x44e75e={..._0x44e75e,'showname':![]},_0x42a68f=!![]),_0x42a68f&&(_0x44e75e={'botID':_0x44e75e[_0x7d9d2e(0x265)],'exchange':_0x44e75e[_0x7d9d2e(0x2a0)],'apiKey':_0x44e75e['apiKey'],'apiSecret':_0x44e75e[_0x7d9d2e(0x1d1)],'basecoin':_0x44e75e[_0x7d9d2e(0x225)],'botname':_0x44e75e['botname'],'showname':_0x44e75e[_0x7d9d2e(0x1c9)],'threshold':_0x44e75e['threshold'],'ordertype':_0x44e75e['ordertype'],'timeout':_0x44e75e[_0x7d9d2e(0x1d8)],'startdate':_0x44e75e['startdate'],'recreate':_0x44e75e[_0x7d9d2e(0x233)],'timeshift':_0x44e75e[_0x7d9d2e(0x252)],'headless':_0x44e75e[_0x7d9d2e(0x1ae)],'cooldown':_0x44e75e['cooldown'],'emojibuy':_0x44e75e[_0x7d9d2e(0x299)],'emojisell':_0x44e75e[_0x7d9d2e(0x1ff)],'portfolio':_0x44e75e[_0x7d9d2e(0x22b)]},dbConfig['get'](_0x7d9d2e(0x26e))[_0x7d9d2e(0x261)]()['write'](),dbConfig[_0x7d9d2e(0x2a4)](_0x7d9d2e(0x26e))[_0x7d9d2e(0x285)](_0x44e75e)['write']());}else _0x44e75e={'botID':_0x3cbd7c,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':_0x7d9d2e(0x1df)+_0x3cbd7c,'showname':![],'threshold':'3','ordertype':_0x7d9d2e(0x245),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x7d9d2e(0x252)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x44e75e;}function emittedConfiguration(){const _0x32b9b2=_0x3d1ce2;let _0x1f4e93;return config['apiKey']==''?_0x1f4e93=config:_0x1f4e93={...config,'apiKey':_0x32b9b2(0x1d2),'apiSecret':_0x32b9b2(0x1d2)},_0x1f4e93;}function getSettings(){const _0x225210=_0x3d1ce2;return dbSettings[_0x225210(0x2a4)](_0x225210(0x1f9))[_0x225210(0x21c)]();}function getSecure(){const _0x4724dc=_0x3d1ce2;return dbSecure['get'](_0x4724dc(0x1e1))['value']()||{};}function updateTimeshift(_0x396122){const _0x2e5096=_0x3d1ce2;let _0x28c139=dbConfig[_0x2e5096(0x2a4)](_0x2e5096(0x26e))[_0x2e5096(0x263)]({'botID':botID})[_0x2e5096(0x21c)]();_0x28c139&&dbConfig[_0x2e5096(0x2a4)]('bot')[_0x2e5096(0x263)]({'botID':botID})['assign']({'timeshift':_0x396122})[_0x2e5096(0x25f)](),config[_0x2e5096(0x252)]=_0x396122,proxyEmit(_0x2e5096(0x222),emittedConfiguration());}async function storeConfiguration(_0x266d95){const _0x4c88db=_0x3d1ce2;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x17f6aa=dbConfig[_0x4c88db(0x2a4)](_0x4c88db(0x26e))['find']({'botID':botID})[_0x4c88db(0x21c)]();_0x266d95={..._0x266d95,'apiKey':crypt[_0x4c88db(0x1b7)](secure[_0x4c88db(0x1a1)],_0x266d95[_0x4c88db(0x22c)])[_0x4c88db(0x1b9)],'apiSecret':crypt[_0x4c88db(0x1b7)](secure[_0x4c88db(0x1a1)],_0x266d95[_0x4c88db(0x1d1)])['message']};if(_0x17f6aa){if(_0x266d95[_0x4c88db(0x22c)]==_0x4c88db(0x1d2))_0x266d95[_0x4c88db(0x22c)]=config[_0x4c88db(0x22c)];if(_0x266d95[_0x4c88db(0x1d1)]==_0x4c88db(0x1d2))_0x266d95[_0x4c88db(0x1d1)]=config['apiSecret'];dbConfig[_0x4c88db(0x2a4)](_0x4c88db(0x26e))[_0x4c88db(0x263)]({'botID':botID})[_0x4c88db(0x21b)](_0x266d95)['write']();}else dbConfig[_0x4c88db(0x2a4)]('bot')[_0x4c88db(0x285)](_0x266d95)['write'](),process[_0x4c88db(0x1ed)]({'status':_0x4c88db(0x1cb),'live':_0x4c88db(0x277)});config={..._0x266d95};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x4c88db(0x1ed)]({'botname':_0x266d95['botname']}),proxyEmit(_0x4c88db(0x1a5)),reset();}async function storeHeadless(_0x183dfc){const _0xe45a71=_0x3d1ce2,_0xb0f7f7={...config,'headless':_0x183dfc[_0xe45a71(0x1ae)]};let _0x1d7777=dbConfig['get']('bot')[_0xe45a71(0x263)]({'botID':botID})['value']();_0x1d7777&&dbConfig[_0xe45a71(0x2a4)](_0xe45a71(0x26e))[_0xe45a71(0x263)]({'botID':botID})[_0xe45a71(0x21b)](_0xb0f7f7)[_0xe45a71(0x25f)](),config={..._0xb0f7f7},proxyEmit(_0xe45a71(0x222),emittedConfiguration());}function noslash(_0x50b7a4){const _0x503fe9=_0x3d1ce2;return _0x50b7a4[_0x503fe9(0x24b)]('/','');}function updateNumberCoins(_0x2777b8){const _0x9308fd=_0x3d1ce2;_0x2777b8[_0x9308fd(0x1ca)]&&_0x2777b8[_0x9308fd(0x1ca)]==_0x9308fd(0x281)&&_0x2777b8[_0x9308fd(0x25b)][_0x9308fd(0x1a8)](_0x4266d0=>{const _0x16bdb7=_0x9308fd;let _0x1fe21e=currentCoins[_0x16bdb7(0x263)](_0x1565d1=>_0x1565d1[_0x16bdb7(0x1ec)]==_0x4266d0[_0x16bdb7(0x240)]);if(_0x1fe21e)_0x1fe21e[_0x16bdb7(0x27e)]=Number(_0x4266d0[_0x16bdb7(0x1ad)]);});if(_0x2777b8[_0x9308fd(0x1ca)]&&_0x2777b8[_0x9308fd(0x1ca)]==_0x9308fd(0x29b)){if(_0x2777b8[_0x9308fd(0x275)]==_0x9308fd(0x1f7)&&_0x2777b8[_0x9308fd(0x27d)]==_0x9308fd(0x2a1)){if(lastOrders)lastOrders['forEach'](_0x2e43f8=>{const _0x45c327=_0x9308fd;if(_0x2e43f8[_0x45c327(0x212)]==_0x2777b8[_0x45c327(0x212)]){if(_0x2e43f8[_0x45c327(0x1fe)])_0x2e43f8[_0x45c327(0x298)]=_0x2777b8[_0x45c327(0x236)]*_0x2e43f8[_0x45c327(0x29a)];else _0x2e43f8['filled']=_0x2777b8[_0x45c327(0x236)];}});}}}async function getCoins(_0x4d4053=!![],_0x5df2fe=config[_0x3d1ce2(0x225)]){const _0x562827=_0x3d1ce2;let _0x4fe8b1,_0x14729c=[],_0x3afc7c=[],_0x6a6fe7=[];try{_0x4fe8b1=await exchange['fetchBalance'](),mybalances=_0x4fe8b1[_0x562827(0x276)];if(!_0x4d4053)for(const [_0x2474f8,_0x65c6ee]of Object['entries'](mybalances)){_0x6a6fe7[_0x562827(0x285)](_0x2474f8);}else config[_0x562827(0x22b)]['forEach'](_0x18284d=>{const _0x1b9f7d=_0x562827;if(!_0x18284d[_0x1b9f7d(0x1fd)])_0x6a6fe7[_0x1b9f7d(0x285)](_0x18284d[_0x1b9f7d(0x1ec)]);});if(_0x5df2fe=='')for(const [_0x544053,_0x22533]of Object['entries'](mybalances)){_0x22533[_0x562827(0x250)]()!=0x0&&_0x3afc7c[_0x562827(0x285)]({'coin':_0x544053});}else for(const [_0x13ac46,_0x27266d]of Object[_0x562827(0x1d7)](mybalances)){if(_0x6a6fe7[_0x562827(0x260)](_0x13ac46)){if((_0x27266d[_0x562827(0x250)]()!=0x0||config[_0x562827(0x22b)][_0x562827(0x263)](_0x2780ae=>_0x2780ae[_0x562827(0x1ec)]==_0x13ac46))&&(allSymbols[_0x562827(0x260)](_0x13ac46+'/'+_0x5df2fe)||_0x13ac46==_0x5df2fe))_0x3afc7c[_0x562827(0x285)]({'coin':_0x13ac46,'symbol':_0x13ac46+'/'+_0x5df2fe,'reverse':![],'number':_0x27266d}),_0x13ac46!=_0x5df2fe&&_0x14729c[_0x562827(0x285)](_0x13ac46+'/'+_0x5df2fe);else(_0x27266d['toString']()!=0x0||config[_0x562827(0x22b)]['find'](_0xb56542=>_0xb56542[_0x562827(0x1ec)]==_0x13ac46))&&allSymbols['includes'](_0x5df2fe+'/'+_0x13ac46)&&(_0x3afc7c[_0x562827(0x285)]({'coin':_0x13ac46,'symbol':_0x5df2fe+'/'+_0x13ac46,'reverse':!![],'number':_0x27266d}),_0x13ac46!=_0x5df2fe&&_0x14729c[_0x562827(0x285)](_0x5df2fe+'/'+_0x13ac46));}}}catch(_0x2f4dce){if(!_0x4d4053){if(_0x2f4dce['toString']()[_0x562827(0x260)](_0x562827(0x1ce)))return logHistory(_0x562827(0x1b8),_0x562827(0x24c)),![];else{if(_0x2f4dce[_0x562827(0x250)]()[_0x562827(0x260)](_0x562827(0x26b)))return logHistory(_0x562827(0x1b8),_0x562827(0x28c)),![];else{if(_0x2f4dce[_0x562827(0x250)]()['includes'](_0x562827(0x20a)))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x2f4dce,'getCoins()');}}}else await handleError(_0x2f4dce,_0x562827(0x23d));}return _0x3afc7c;}async function getPortfolio(_0x267fe6){const _0x45d3db=_0x3d1ce2;let _0x397382=[],_0x3d3019=[],_0x126a5c,_0x35f2de=[],_0x9ea09e,_0x50e971;_0x267fe6[_0x45d3db(0x22c)]===_0x45d3db(0x1d2)||_0x267fe6[_0x45d3db(0x1d1)]===_0x45d3db(0x1d2)?(_0x9ea09e=config['apiKey'],_0x50e971=config[_0x45d3db(0x1d1)]):(_0x9ea09e=_0x267fe6['apiKey'],_0x50e971=_0x267fe6[_0x45d3db(0x1d1)]);await initExchange(_0x9ea09e,_0x50e971);let _0xe12f8e=await loadSymbols();if(_0xe12f8e){_0x35f2de=await getCoins(![],_0x267fe6['basecoin']);if(_0x35f2de===![])proxyEmit(_0x45d3db(0x22b),![]);else{if(_0x267fe6[_0x45d3db(0x225)]=='')proxyEmit('portfolio',_0x35f2de);else{_0x35f2de['forEach'](_0x54a4fa=>{const _0x351f78=_0x45d3db;_0x397382[_0x351f78(0x285)](_0x54a4fa['symbol']);});try{_0x3d3019=await exchange[_0x45d3db(0x292)](_0x397382);}catch(_0x1f4c3d){await handleError(_0x1f4c3d,_0x45d3db(0x1c3));}_0x35f2de[_0x45d3db(0x1a8)](_0x2c9ccb=>{const _0x31a813=_0x45d3db;_0x2c9ccb[_0x31a813(0x1ec)]!=_0x267fe6[_0x31a813(0x225)]?_0x126a5c=_0x2c9ccb['reverse']?0x1/_0x3d3019[_0x2c9ccb['symbol']][_0x31a813(0x1ea)]:_0x3d3019[_0x2c9ccb[_0x31a813(0x267)]]['last']:_0x126a5c=0x1,_0x2c9ccb[_0x31a813(0x29a)]=formatResult(_0x126a5c,0x8);}),proxyEmit(_0x45d3db(0x22b),_0x35f2de);}}}else proxyEmit(_0x45d3db(0x22b),![]);}function checkMinimums(_0x3f36ea){const _0x239edf=_0x3d1ce2;let _0x348116=!![];const _0x4d59f2=!_0x3f36ea[_0x239edf(0x1fe)]?markets[_0x3f36ea['symbol']][_0x239edf(0x25a)][_0x239edf(0x27f)][_0x239edf(0x1ab)]:markets[_0x3f36ea[_0x239edf(0x267)]][_0x239edf(0x25a)]['cost'][_0x239edf(0x1ab)],_0x3de3fe=!_0x3f36ea['reverse']?markets[_0x3f36ea[_0x239edf(0x267)]][_0x239edf(0x25a)][_0x239edf(0x1b1)][_0x239edf(0x1ab)]:markets[_0x3f36ea['symbol']][_0x239edf(0x25a)]['amount']['min'];if(Math['abs'](_0x3f36ea[_0x239edf(0x200)])<_0x4d59f2)_0x348116=![];if(Math[_0x239edf(0x27c)](_0x3f36ea[_0x239edf(0x200)])*_0x3f36ea['last']<_0x3de3fe)_0x348116=![];return _0x348116;}async function getBalances(){const _0x244074=_0x3d1ce2;let _0x4dc9f4=0x0,_0x3ab712;const _0x5b3a4b=config[_0x244074(0x25e)];currentCoins[_0x244074(0x1a8)](_0x13ca96=>{const _0xddb646=_0x244074;if(_0x13ca96[_0xddb646(0x1ec)]!=config[_0xddb646(0x225)]){let _0xc73348=global[_0xddb646(0x254)][noslash(_0x13ca96[_0xddb646(0x267)])];_0x3ab712=_0x13ca96['reverse']?0x1/_0xc73348:_0xc73348;}else _0x3ab712=0x1;let _0x5432c7=_0x13ca96[_0xddb646(0x27e)]*_0x3ab712;_0x4dc9f4+=_0x5432c7,_0x13ca96[_0xddb646(0x1ea)]=formatResult(Number(_0x3ab712),0x8),_0x13ca96[_0xddb646(0x21c)]=_0x5432c7;}),currentCoins[_0x244074(0x1a8)](_0x330612=>{const _0x1492c0=_0x244074;let _0x15d127=config['portfolio'][_0x1492c0(0x263)](_0x5b7384=>_0x5b7384[_0x1492c0(0x1ec)]==_0x330612[_0x1492c0(0x1ec)]),_0x4a73a1=Number(_0x15d127[_0x1492c0(0x23a)]),_0x499d77=_0x330612[_0x1492c0(0x21c)]/_0x4dc9f4*0x64,_0x212b75=_0x4a73a1*_0x4dc9f4/0x64/_0x330612[_0x1492c0(0x1ea)]-_0x330612[_0x1492c0(0x27e)];_0x330612[_0x1492c0(0x23a)]=formatResult(_0x499d77,0x3),_0x330612[_0x1492c0(0x29c)]=formatResult(_0x4a73a1,0x3),_0x330612['trade']=formatResult(_0x212b75,0x8),_0x330612[_0x1492c0(0x1c8)]='',_0x330612[_0x1492c0(0x1c2)]='';if(_0x330612[_0x1492c0(0x1ec)]!=config[_0x1492c0(0x225)]){if(_0x330612[_0x1492c0(0x23a)]>_0x4a73a1)_0x330612[_0x1492c0(0x1c8)]=_0x1492c0(0x1da),_0x330612['valid']=checkMinimums(_0x330612);else _0x330612[_0x1492c0(0x23a)]<_0x4a73a1&&(_0x330612['side']=_0x1492c0(0x1dc),_0x330612['valid']=checkMinimums(_0x330612));}_0x330612[_0x1492c0(0x22d)]=_0x330612[_0x1492c0(0x23a)]/_0x330612[_0x1492c0(0x29c)]-0x1;}),currentCoins['sort']((_0x399ba7,_0x214994)=>_0x399ba7[_0x244074(0x22d)]<_0x214994[_0x244074(0x22d)]?0x1:_0x214994[_0x244074(0x22d)]<_0x399ba7[_0x244074(0x22d)]?-0x1:0x0);const _0x520048=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x520048[_0x244074(0x204)],'usd':_0x520048['usd'],'portfolio':JSON[_0x244074(0x1a2)](currentCoins),'threshold':_0x5b3a4b},proxyEmit(_0x244074(0x25b),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x244074(0x1ae)])headlessMode({'portfolio':currentCoins,'threshold':_0x5b3a4b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4ae2c9=_0x3d1ce2;if(!lastBalances)return;let _0x4e11ea=await getStartingBalances(![]),_0xc9e4e=[],_0x507083=[],_0x3bac65;JSON[_0x4ae2c9(0x1db)](lastBalances[_0x4ae2c9(0x22b)])['forEach'](_0x400a9e=>{const _0x53cb1f=_0x4ae2c9;let _0x43fb28={'coin':_0x400a9e[_0x53cb1f(0x1ec)],'number':_0x400a9e[_0x53cb1f(0x27e)],'price':_0x400a9e[_0x53cb1f(0x1ea)]};_0xc9e4e[_0x53cb1f(0x285)](_0x43fb28);if(!_0x4e11ea['coins']||!_0x4e11ea[_0x53cb1f(0x1c1)]['find'](_0x1226f0=>_0x1226f0['coin']==_0x400a9e[_0x53cb1f(0x1ec)]&&_0x1226f0[_0x53cb1f(0x27e)]!=0x0))_0x507083[_0x53cb1f(0x285)](_0x43fb28);});const _0x3f8252=await getFiat();_0x3bac65={'date':lastBalances[_0x4ae2c9(0x20b)][_0x4ae2c9(0x273)]('\x20')[0x0],'eur':_0x3f8252[_0x4ae2c9(0x204)],'usd':_0x3f8252['usd'],'coins':_0xc9e4e};let _0x4cde6b=dbPerformance[_0x4ae2c9(0x2a4)](_0x4ae2c9(0x290))[_0x4ae2c9(0x263)]({'date':_0x3bac65[_0x4ae2c9(0x255)]})[_0x4ae2c9(0x21c)]();_0x4cde6b?dbPerformance['get']('data')[_0x4ae2c9(0x263)]({'date':_0x3bac65[_0x4ae2c9(0x255)]})['assign'](_0x3bac65)[_0x4ae2c9(0x25f)]():dbPerformance[_0x4ae2c9(0x2a4)](_0x4ae2c9(0x290))['push'](_0x3bac65)[_0x4ae2c9(0x25f)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x762688=_0x3d1ce2;if(dbPerformance[_0x762688(0x1b0)]('data')['value']()){let _0x10564a=dbPerformance[_0x762688(0x2a4)]('data')[_0x762688(0x1cc)](_0x762688(0x255))[_0x762688(0x21c)]();proxyEmit(_0x762688(0x26c),_0x10564a),lastPerformanceEmitted=getDate();}else proxyEmit(_0x762688(0x26c),[]);}async function getStartingBalances(_0x44efbe=!![]){const _0x56f1f7=_0x3d1ce2;let _0x4b59da=dbPerformance[_0x56f1f7(0x2a4)](_0x56f1f7(0x290))[_0x56f1f7(0x263)]({'date':config[_0x56f1f7(0x279)]})[_0x56f1f7(0x21c)]();config[_0x56f1f7(0x22c)]!=''&&!_0x4b59da&&(await setStartDatePerformance(config),_0x4b59da=dbPerformance['get'](_0x56f1f7(0x290))[_0x56f1f7(0x263)]({'date':config['startdate']})[_0x56f1f7(0x21c)]());if(config['apiKey']==''||!_0x4b59da)return{};let _0x5095b6=0x0,_0x222f9a=0x0,_0x261a89=0x0,_0x38c07f=[],_0x328d9a=0x0;config[_0x56f1f7(0x22b)][_0x56f1f7(0x1a8)](_0x487be5=>{const _0x21fb72=_0x56f1f7;if(!_0x487be5[_0x21fb72(0x1fd)]){_0x38c07f[_0x328d9a]={'coin':_0x487be5['coin'],'symbol':_0x487be5[_0x21fb72(0x267)],'number':_0x487be5[_0x21fb72(0x1ee)],'price':_0x487be5['startprice']},_0x5095b6+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5[_0x21fb72(0x1ee)];if(config[_0x21fb72(0x225)]==_0x21fb72(0x224))_0x222f9a+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5[_0x21fb72(0x1ee)]*_0x4b59da[_0x21fb72(0x204)],_0x261a89+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5[_0x21fb72(0x1ee)]*_0x4b59da['usd'];else{if(config[_0x21fb72(0x225)]=='BUSD'||config[_0x21fb72(0x225)]==_0x21fb72(0x262)||config[_0x21fb72(0x225)]=='USDC')_0x222f9a+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5[_0x21fb72(0x1ee)]*_0x4b59da[_0x21fb72(0x204)]/_0x4b59da[_0x21fb72(0x296)],_0x261a89+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5[_0x21fb72(0x1ee)];else config[_0x21fb72(0x225)]==_0x21fb72(0x24d)&&(_0x222f9a+=_0x487be5[_0x21fb72(0x1eb)]*_0x487be5['startnumber'],_0x261a89+=_0x487be5['startprice']*_0x487be5[_0x21fb72(0x1ee)]*_0x4b59da[_0x21fb72(0x296)]/_0x4b59da[_0x21fb72(0x204)]);}_0x328d9a++;}});let _0x311fb9={'basecoin':_0x5095b6,'eur':_0x222f9a,'usd':_0x261a89,'coins':_0x38c07f};if(_0x44efbe)proxyEmit(_0x56f1f7(0x24a),_0x311fb9);return _0x311fb9;}function headlessMode(_0x45ef0b){const _0xeba740=_0x3d1ce2;let _0x5f581e=_0x45ef0b[_0xeba740(0x22b)],_0x104cdf=_0x45ef0b['threshold'],_0x41dbe1=[];for(let _0x257315 of _0x5f581e){if(_0x257315[_0xeba740(0x1ec)]!=config[_0xeba740(0x225)]){if(_0x257315['distribution']/_0x257315[_0xeba740(0x29c)]-0x1>=_0x104cdf/0x64){if(_0x257315['valid'])_0x41dbe1['push'](_0x257315);}else{if(_0x257315['distribution']/_0x257315[_0xeba740(0x29c)]-0x1<=-_0x104cdf/0x64){if(_0x257315[_0xeba740(0x1c2)])_0x41dbe1[_0xeba740(0x285)](_0x257315);}}}}_0x41dbe1[_0xeba740(0x257)]>0x0&&placeOrder(_0x41dbe1);}function symbolToCoin(_0x279e9d){const _0x64a9a6=_0x3d1ce2;let _0x2c37d7;if(_0x279e9d[_0x64a9a6(0x260)]('/'+config[_0x64a9a6(0x225)]))_0x2c37d7=_0x279e9d[_0x64a9a6(0x24b)]('/'+config['basecoin'],'');if(_0x279e9d[_0x64a9a6(0x260)](config[_0x64a9a6(0x225)]+'/'))_0x2c37d7=_0x279e9d[_0x64a9a6(0x24b)](config[_0x64a9a6(0x225)]+'/','');return _0x2c37d7;}async function validateOrders(_0x59aefa=0x0){const _0x6eb0d2=_0x3d1ce2;let _0x3df0c8=[],_0x230189=config[_0x6eb0d2(0x284)]==_0x6eb0d2(0x245)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x6eb0d2(0x1d8)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x5a3564=>{const _0x6c386=_0x6eb0d2;let _0x21ae41=previousCoins[_0x6c386(0x263)](_0x23eba5=>_0x23eba5[_0x6c386(0x1ec)]==symbolToCoin(_0x5a3564[_0x6c386(0x267)])),_0x363d9d=currentCoins[_0x6c386(0x263)](_0xc087d8=>_0xc087d8['coin']==symbolToCoin(_0x5a3564['symbol'])),_0x5615fa,_0x29215e;_0x5a3564[_0x6c386(0x1c8)]==_0x6c386(0x1dc)&&!_0x5a3564[_0x6c386(0x1fe)]||_0x5a3564[_0x6c386(0x1c8)]==_0x6c386(0x1da)&&_0x5a3564[_0x6c386(0x1fe)]?(_0x5615fa=_0x21ae41[_0x6c386(0x27e)]+0.9*_0x5a3564[_0x6c386(0x298)],_0x29215e=_0x21ae41[_0x6c386(0x27e)]+1.1*_0x5a3564['filled']):(_0x5615fa=_0x21ae41[_0x6c386(0x27e)]-1.1*_0x5a3564['filled'],_0x29215e=_0x21ae41[_0x6c386(0x27e)]-0.9*_0x5a3564['filled']);const _0x1029da=_0x5a3564['filled']!=0x0&&_0x363d9d[_0x6c386(0x27e)]>=_0x5615fa&&_0x363d9d[_0x6c386(0x27e)]<=_0x29215e;_0x3df0c8['push'](_0x1029da);if(_0x1029da&&config[_0x6c386(0x284)]!=_0x6c386(0x245)){if(_0x5a3564[_0x6c386(0x1fe)])logHistory(_0x6c386(0x264),'Order\x20filled:\x20'+_0x5a3564['symbol']+'\x20'+_0x5a3564[_0x6c386(0x1c8)]+'\x20#'+formatResult(_0x5a3564[_0x6c386(0x298)]/_0x5a3564[_0x6c386(0x29a)],0x8)+'\x20@'+formatResult(_0x5a3564[_0x6c386(0x29a)],0x8));else logHistory(_0x6c386(0x264),'Order\x20filled:\x20'+_0x5a3564['symbol']+'\x20'+_0x5a3564[_0x6c386(0x1c8)]+'\x20#'+formatResult(_0x5a3564[_0x6c386(0x298)],0x8)+'\x20@'+formatResult(_0x5a3564[_0x6c386(0x29a)],0x8));}}),_0x3df0c8[_0x6eb0d2(0x1a8)]((_0x48d7e2,_0x5ae763)=>{if(_0x48d7e2)lastOrders['splice'](_0x5ae763,0x1);});if(_0x59aefa<_0x230189&&_0x3df0c8[_0x6eb0d2(0x260)](![])){if(_0x59aefa==0x0){config['ordertype']==_0x6eb0d2(0x245)?logHistory(_0x6eb0d2(0x1b8),_0x6eb0d2(0x297)):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x59aefa);},0xa*0x3e8);}else{(_0x59aefa==0x1||_0x59aefa==Math[_0x6eb0d2(0x1aa)](_0x230189/0x2)||_0x59aefa==_0x230189-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x59aefa);},validateOrderInterval);}}else{lockOrders=![];if(_0x59aefa>0x0&&!_0x3df0c8[_0x6eb0d2(0x260)](![]))config[_0x6eb0d2(0x284)]=='market'?logHistory(_0x6eb0d2(0x23f),_0x6eb0d2(0x20f)):logHistory(_0x6eb0d2(0x23f),_0x6eb0d2(0x1ba));else _0x59aefa>0x0&&_0x3df0c8['includes'](![])&&(config[_0x6eb0d2(0x284)]==_0x6eb0d2(0x245)?logHistory(_0x6eb0d2(0x23f),_0x6eb0d2(0x26d)+Math[_0x6eb0d2(0x1aa)](_0x230189*validateOrderInterval/0xea60)+_0x6eb0d2(0x1a6)):(lastOrders[_0x6eb0d2(0x1a8)](async _0x3be0ef=>{const _0x2ef9ff=_0x6eb0d2;try{const _0x4f22ba=await exchange[_0x2ef9ff(0x1e8)](_0x3be0ef[_0x2ef9ff(0x212)],_0x3be0ef[_0x2ef9ff(0x267)]);}catch(_0x324bce){if(_0x324bce['toString']()[_0x2ef9ff(0x260)]('OrderNotFound')){}else await handleError(_0x324bce,_0x2ef9ff(0x231));}}),logHistory(_0x6eb0d2(0x23f),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x6eb0d2(0x1aa)](_0x230189*validateOrderInterval/0xea60)+_0x6eb0d2(0x1a6))));}}async function resetCoinResults(){const _0x319c0a=_0x3d1ce2;dbCoinResults['get']('coins')[_0x319c0a(0x261)]()[_0x319c0a(0x25f)]();let _0x3b15fe=await getStartingBalances(![]);_0x3b15fe['coins'][_0x319c0a(0x1a8)](_0x40629b=>{const _0x609305=_0x319c0a,_0x5b4150=_0x40629b['symbol']['includes'](config[_0x609305(0x225)]+'/');if(_0x40629b['coin']!=config['basecoin']){let _0x1252a6={'coin':_0x40629b[_0x609305(0x1ec)],'number':_0x40629b[_0x609305(0x27e)],'breakeven':_0x40629b[_0x609305(0x29a)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x609305(0x2a4)]('coins')[_0x609305(0x285)](_0x1252a6)[_0x609305(0x25f)]();}});}async function updateCoinResults(_0xc2b426){const _0x22cad3=_0x3d1ce2;let _0x57ad7b,_0x4607de,_0x6f255e,_0x4da5e3,_0x53a012,_0x97de74,_0x36d3e4=dbCoinResults[_0x22cad3(0x2a4)](_0x22cad3(0x1c1))[_0x22cad3(0x263)]({'coin':_0xc2b426['coin']})[_0x22cad3(0x21c)]();if(!_0x36d3e4)return;if(_0xc2b426['fee']&&_0xc2b426[_0x22cad3(0x244)][_0x22cad3(0x1d0)]==config[_0x22cad3(0x225)])_0x57ad7b=_0xc2b426['fee'][_0x22cad3(0x1b1)];else{if(_0xc2b426[_0x22cad3(0x244)]&&_0xc2b426[_0x22cad3(0x244)][_0x22cad3(0x1d0)]==_0x22cad3(0x282))_0x57ad7b=_0xc2b426[_0x22cad3(0x244)]['cost']*global['ticker'][_0x22cad3(0x282)+config[_0x22cad3(0x225)]];else _0x57ad7b=0.001*_0xc2b426['filled'];}const _0x3de19b=_0xc2b426['symbol']['includes'](config[_0x22cad3(0x225)]+'/');_0x3de19b&&(_0x97de74={'coin':_0xc2b426[_0x22cad3(0x1ec)],'symbol':_0xc2b426['symbol'],'filled':_0xc2b426['filled']*_0xc2b426[_0x22cad3(0x29a)],'side':_0xc2b426[_0x22cad3(0x1c8)]==_0x22cad3(0x1da)?_0x22cad3(0x1dc):_0x22cad3(0x1da),'price':0x1/_0xc2b426[_0x22cad3(0x29a)]},_0xc2b426={..._0x97de74});_0xc2b426[_0x22cad3(0x1c8)]==_0x22cad3(0x1dc)?_0x6f255e=(_0x36d3e4[_0x22cad3(0x1ac)]*_0x36d3e4[_0x22cad3(0x27e)]+_0xc2b426[_0x22cad3(0x29a)]*_0xc2b426[_0x22cad3(0x298)])/(_0x36d3e4[_0x22cad3(0x27e)]+_0xc2b426[_0x22cad3(0x298)]):_0x6f255e=(_0x36d3e4[_0x22cad3(0x1ac)]*_0x36d3e4['number']-_0xc2b426[_0x22cad3(0x29a)]*_0xc2b426['filled'])/(_0x36d3e4[_0x22cad3(0x27e)]-_0xc2b426[_0x22cad3(0x298)]);_0xc2b426['side']==_0x22cad3(0x1dc)?_0x4da5e3=_0x36d3e4[_0x22cad3(0x287)]:_0x4da5e3=_0x36d3e4['realized']+(_0xc2b426[_0x22cad3(0x29a)]-_0x36d3e4[_0x22cad3(0x1ac)])*_0xc2b426['filled'];_0x4607de=_0xc2b426[_0x22cad3(0x1c8)]=='sell'?_0x36d3e4[_0x22cad3(0x27e)]-_0xc2b426[_0x22cad3(0x298)]:_0x36d3e4['number']+_0xc2b426[_0x22cad3(0x298)],_0x53a012=(_0xc2b426[_0x22cad3(0x29a)]-_0x6f255e)*_0x4607de;let _0x1f4b13={'coin':_0xc2b426['coin'],'number':_0x4607de,'breakeven':formatResult(_0x6f255e,0x8),'realized':formatResult(_0x4da5e3,0x8),'unrealized':formatResult(_0x53a012,0x8),'fees':formatResult(_0x36d3e4[_0x22cad3(0x1c4)]+_0x57ad7b,0x8),'sells':_0xc2b426[_0x22cad3(0x1c8)]==_0x22cad3(0x1da)?_0x36d3e4['sells']+0x1:_0x36d3e4['sells'],'buys':_0xc2b426[_0x22cad3(0x1c8)]=='buy'?_0x36d3e4['buys']+0x1:_0x36d3e4[_0x22cad3(0x21e)]};dbCoinResults[_0x22cad3(0x2a4)](_0x22cad3(0x1c1))[_0x22cad3(0x263)]({'coin':_0xc2b426[_0x22cad3(0x1ec)]})[_0x22cad3(0x21b)](_0x1f4b13)['write']();}async function placeOrder(_0x1782be){const _0x438156=_0x3d1ce2,_0xa152ac=config[_0x438156(0x284)]==_0x438156(0x245)?'market':_0x438156(0x1f2);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x438156(0x1a2)](currentCoins));for(const _0x589957 of _0x1782be){let _0x126332,_0x391b2a,_0x42f8d8,_0x204c17,_0x175e0f,_0xcc0fb2=_0x589957[_0x438156(0x267)];try{const _0x5d0546=await exchange[_0x438156(0x292)](_0xcc0fb2),_0x3ab29a=_0x5d0546[_0xcc0fb2];_0x126332=_0x3ab29a[_0x438156(0x1ea)],_0x391b2a=_0x3ab29a[_0x438156(0x1e2)],_0x42f8d8=_0x3ab29a[_0x438156(0x1ef)];_0x589957[_0x438156(0x1fe)]?(_0x204c17=_0x589957[_0x438156(0x1c8)]==_0x438156(0x1dc)?_0x438156(0x1da):_0x438156(0x1dc),_0x175e0f=Math[_0x438156(0x27c)](_0x589957[_0x438156(0x200)])/_0x126332):(_0x204c17=_0x589957[_0x438156(0x1c8)],_0x175e0f=Math['abs'](_0x589957[_0x438156(0x200)]));_0xa152ac==_0x438156(0x1f2)&&(config['ordertype']=='limit-high'&&(_0x126332=_0x204c17==_0x438156(0x1dc)?_0x391b2a:_0x42f8d8),config[_0x438156(0x284)]==_0x438156(0x208)&&(_0x126332=_0x204c17=='buy'?_0x42f8d8:_0x391b2a));_0x175e0f=formatResult(_0x175e0f,0x8),_0x126332=formatResult(_0x126332,0x8);const _0x1e6728=await exchange[_0x438156(0x207)](_0xcc0fb2,_0xa152ac,_0x204c17,_0x175e0f,_0x126332);lastOrders[_0x438156(0x285)]({'orderId':_0x1e6728['id'],'symbol':_0xcc0fb2,'side':_0x204c17,'reverse':_0x589957[_0x438156(0x1fe)],'amount':_0x589957[_0x438156(0x1fe)]?_0x1e6728[_0x438156(0x27f)]*_0x1e6728['price']:_0x1e6728['amount'],'filled':_0x589957[_0x438156(0x1fe)]?_0x1e6728[_0x438156(0x298)]*_0x1e6728[_0x438156(0x29a)]:_0x1e6728[_0x438156(0x298)],'price':_0x1e6728['price']});const _0x507194=_0x204c17==_0x438156(0x1da)?config[_0x438156(0x1ff)]?String[_0x438156(0x1b4)]('0x'+config[_0x438156(0x1ff)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x438156(0x299)])+'\x20':'',_0x2e8465=_0xa152ac=='market'?'Market':config[_0x438156(0x284)]==_0x438156(0x294)?_0x438156(0x20d):'Limit\x20(low-margin)';if(_0xa152ac=='market')logHistory(_0x438156(0x264),''+_0x507194+_0x2e8465+_0x438156(0x271)+_0xcc0fb2+'\x20'+_0x204c17+'\x20#'+formatResult(_0x1e6728[_0x438156(0x298)],0x8)+'\x20@'+formatResult(_0x1e6728[_0x438156(0x29a)],0x8));else logHistory(_0x438156(0x264),''+_0x507194+_0x2e8465+_0x438156(0x271)+_0xcc0fb2+'\x20'+_0x204c17+'\x20#'+formatResult(_0x1e6728[_0x438156(0x27f)],0x8)+'\x20@'+formatResult(_0x1e6728['price'],0x8));_0x1e6728[_0x438156(0x1ec)]=_0x589957[_0x438156(0x1ec)],await updateCoinResults(_0x1e6728);if(config[_0x438156(0x1a9)]!=0x0){let _0x3b59f0=null;if(cooldownTracker[_0x438156(0x257)]==config[_0x438156(0x1a9)]-0x1)_0x3b59f0=cooldownTracker[_0x438156(0x1f6)]();const _0xc3f905=getTimeStamp();cooldownTracker[_0x438156(0x285)](_0xc3f905);if(_0x3b59f0){const _0x4078f6=fns[_0x438156(0x1e3)](new Date(_0xc3f905),new Date(_0x3b59f0));_0x4078f6<cooldownInterval&&(logHistory(_0x438156(0x1b8),_0x438156(0x1c7)+config[_0x438156(0x1a9)]+_0x438156(0x2a3)+cooldownInterval/0x3c+_0x438156(0x1b2)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x28c63a){if(_0x28c63a[_0x438156(0x250)]()[_0x438156(0x260)]('MIN_NOTIONAL'))logHistory(_0x438156(0x1b8),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0xcc0fb2);else{if(_0x28c63a[_0x438156(0x250)]()['includes'](_0x438156(0x28f)))logHistory(_0x438156(0x1b8),_0x438156(0x247)+_0xcc0fb2);else await handleError(_0x28c63a,_0x438156(0x1d9));}}}if(lastOrders[_0x438156(0x257)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config['ordertype']==_0x438156(0x245)?logHistory(_0x438156(0x1b8),_0x438156(0x203)):logHistory(_0x438156(0x1b8),_0x438156(0x26f)));else coolingDown&&(!config[_0x438156(0x1ae)]&&logHistory('error',_0x438156(0x219)));}}function logHistory(_0x310fe9,_0x3c79de,_0xebc30c=''){const _0x484aae=_0x3d1ce2;let _0x44b916={'time':getTimeStamp(),'type':_0x310fe9,'event':_0x3c79de,'botname':config[_0x484aae(0x1a7)],'showname':config['showname']};dbLogs['get'](_0x484aae(0x28d))[_0x484aae(0x285)](_0x44b916)[_0x484aae(0x25f)]();if(_0xebc30c=='')_0xebc30c=_0x3c79de;proxyEmit(_0x484aae(0x29e),{'log':_0x44b916,'summary':_0xebc30c}),process[_0x484aae(0x1ed)]({'telegram':_0x44b916}),logging(''+_0x44b916[_0x484aae(0x29e)]);}function emitHistory(_0x3435ec={}){const _0x56c29e=_0x3d1ce2;Object[_0x56c29e(0x238)](_0x3435ec)[_0x56c29e(0x257)]==0x0&&(_0x3435ec={'type':[_0x56c29e(0x264),_0x56c29e(0x29e)],'event':'','page':0x1});if(_0x3435ec[_0x56c29e(0x270)][_0x56c29e(0x260)](_0x56c29e(0x29e)))_0x3435ec[_0x56c29e(0x270)][_0x56c29e(0x235)](_0x3435ec[_0x56c29e(0x270)][_0x56c29e(0x217)]('event'),0x1,_0x56c29e(0x1b8),'success');if(dbLogs['has'](_0x56c29e(0x28d))[_0x56c29e(0x21c)]()){let _0x1f1857=dbLogs['get'](_0x56c29e(0x28d))[_0x56c29e(0x211)](_0x5730f6=>{const _0x38a579=_0x56c29e;if(_0x3435ec[_0x38a579(0x270)][_0x38a579(0x257)]==0x0)return![];else return _0x3435ec[_0x38a579(0x270)][_0x38a579(0x260)](_0x5730f6['type']);})[_0x56c29e(0x211)](_0x49f208=>{const _0xc2bfbd=_0x56c29e;if(_0x3435ec[_0xc2bfbd(0x29e)]=='')return!![];else return _0x49f208['event']['toLowerCase']()[_0xc2bfbd(0x260)](_0x3435ec['event'][_0xc2bfbd(0x1b5)]());})['sortBy']('time'),_0x16709a=_0x1f1857[_0x56c29e(0x21c)]()[_0x56c29e(0x257)];_0x1f1857=_0x1f1857['reverse']()[_0x56c29e(0x1bd)]((_0x3435ec[_0x56c29e(0x1e7)]-0x1)*logPageSize,_0x3435ec['page']*logPageSize-0x1)[_0x56c29e(0x1fe)]()[_0x56c29e(0x21c)](),proxyEmit('event-history',{'logs':_0x1f1857,'total':_0x16709a});}else proxyEmit(_0x56c29e(0x1d6),{'logs':[],'total':0x0});}async function pauseBot(_0x7861f2){const _0x46dbdc=_0x3d1ce2,_0xe7a5ee=new Date()[_0x46dbdc(0x27b)]();if(!lastBotPause)lastBotPause=new Date()[_0x46dbdc(0x27b)](),consecutivePauses=0x1;else{if(_0xe7a5ee-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x46dbdc(0x280)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x46dbdc(0x27b)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x46dbdc(0x1b8),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x7861f2),botPaused=![],reset();}}async function handleError(_0x49bf75,_0x503b32,_0x25a628=''){const _0x412f21=_0x3d1ce2;if(_0x49bf75['toString']()[_0x412f21(0x260)](_0x412f21(0x227)))logHistory('error',_0x503b32+_0x412f21(0x1c6)),await pauseBot(pauseBotInterval);else{if(_0x49bf75[_0x412f21(0x250)]()[_0x412f21(0x260)](_0x412f21(0x1d3)))logHistory(_0x412f21(0x1b8),_0x503b32+_0x412f21(0x1f3)),await pauseBot(pauseBotInterval);else{if(_0x49bf75[_0x412f21(0x250)]()[_0x412f21(0x260)](_0x412f21(0x21a)))logHistory(_0x412f21(0x1b8),_0x503b32+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x49bf75[_0x412f21(0x250)]()[_0x412f21(0x260)](_0x412f21(0x1ce)))logHistory(_0x412f21(0x1b8),_0x503b32+_0x412f21(0x202)),logHistory('error',_0x412f21(0x1d4)),process['send']({'stop':_0x412f21(0x216)});else{if(_0x49bf75['toString']()['includes']('AuthenticationError'))logHistory(_0x412f21(0x1b8),_0x503b32+_0x412f21(0x1fb)),logHistory(_0x412f21(0x1b8),_0x412f21(0x1d4)),process[_0x412f21(0x1ed)]({'stop':_0x412f21(0x216)});else{if(_0x49bf75[_0x412f21(0x250)]()['includes'](_0x412f21(0x20a)))logHistory(_0x412f21(0x1b8),_0x503b32+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x412f21(0x1b8),_0x412f21(0x1d4)),process[_0x412f21(0x1ed)]({'stop':_0x412f21(0x216)});else{if(_0x49bf75[_0x412f21(0x250)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x412f21(0x1b8),_0x503b32+_0x412f21(0x220)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x412f21(0x1ed)]({'stop':'kill'});else{if(_0x49bf75[_0x412f21(0x250)]()[_0x412f21(0x260)](_0x412f21(0x1b6)))logHistory(_0x412f21(0x1b8),_0x503b32+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process[_0x412f21(0x1ed)]({'stop':_0x412f21(0x280)});else _0x49bf75[_0x412f21(0x250)]()[_0x412f21(0x260)](_0x412f21(0x259))?logHistory(_0x412f21(0x1b8),_0x503b32+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x412f21(0x1b8),_0x503b32+_0x412f21(0x28e)),logging(_0x503b32+_0x412f21(0x278),_0x49bf75),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x41d26d,_0x33ade5){const _0x4702b8=_0x3d1ce2;return parseFloat(_0x41d26d[_0x4702b8(0x23c)](_0x33ade5));}function logging(_0x2b82e2,_0x5c08f5=''){const _0x5c8895=_0x3d1ce2;if(config[_0x5c8895(0x1c9)])console[_0x5c8895(0x27a)](getTimeStamp()+':\x20'+config[_0x5c8895(0x1a7)]+_0x5c8895(0x256)+_0x2b82e2,_0x5c08f5);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x5c8895(0x256)+_0x2b82e2,_0x5c08f5);}function getServerTime(){const _0x1b93f6=_0x3d1ce2,_0x1b82a7=new Date();return _0x1b82a7['getFullYear']()+'/'+(_0x1b82a7[_0x1b93f6(0x1a0)]()+0x1)[_0x1b93f6(0x250)]()['padStart'](0x2,'0')+'/'+_0x1b82a7[_0x1b93f6(0x23b)]()['toString']()[_0x1b93f6(0x258)](0x2,'0')+'\x20'+_0x1b82a7['getHours']()[_0x1b93f6(0x250)]()['padStart'](0x2,'0')+':'+_0x1b82a7['getMinutes']()['toString']()[_0x1b93f6(0x258)](0x2,'0')+':'+_0x1b82a7[_0x1b93f6(0x1f1)]()[_0x1b93f6(0x250)]()[_0x1b93f6(0x258)](0x2,'0');}function getTimeStamp(){const _0x3cf5a3=_0x3d1ce2,_0x28a9fb=shiftedTime();return _0x28a9fb[_0x3cf5a3(0x229)]()+'/'+(_0x28a9fb[_0x3cf5a3(0x1a0)]()+0x1)[_0x3cf5a3(0x250)]()['padStart'](0x2,'0')+'/'+_0x28a9fb[_0x3cf5a3(0x23b)]()[_0x3cf5a3(0x250)]()['padStart'](0x2,'0')+'\x20'+_0x28a9fb[_0x3cf5a3(0x206)]()[_0x3cf5a3(0x250)]()['padStart'](0x2,'0')+':'+_0x28a9fb[_0x3cf5a3(0x25c)]()['toString']()[_0x3cf5a3(0x258)](0x2,'0')+':'+_0x28a9fb[_0x3cf5a3(0x1f1)]()[_0x3cf5a3(0x250)]()[_0x3cf5a3(0x258)](0x2,'0');}function getDate(){const _0x11affb=_0x3d1ce2,_0x9a579d=shiftedTime();return _0x9a579d[_0x11affb(0x229)]()+'/'+(_0x9a579d[_0x11affb(0x1a0)]()+0x1)[_0x11affb(0x250)]()['padStart'](0x2,'0')+'/'+_0x9a579d['getDate']()[_0x11affb(0x250)]()['padStart'](0x2,'0');}function getHour(){const _0x1a13f5=_0x3d1ce2,_0x3a1a33=shiftedTime();return _0x3a1a33[_0x1a13f5(0x206)]()[_0x1a13f5(0x250)]()[_0x1a13f5(0x258)](0x2,'0');}function sleep(_0x268e2b){return new Promise(_0x59d652=>setTimeout(_0x59d652,_0x268e2b));}function shiftedTime(){const _0x3c0f18=_0x3d1ce2,_0x1c0ddf=new Date();let _0x278b38=_0x1c0ddf;if(config&&config[_0x3c0f18(0x252)]!==0x0)_0x278b38=fns[_0x3c0f18(0x1f5)](_0x1c0ddf,{'hours':config[_0x3c0f18(0x252)]});return _0x278b38;}