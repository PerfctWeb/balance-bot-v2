const _0xeb8276=_0x3cda;(function(_0x113827,_0x1a63f8){const _0x2b5081=_0x3cda,_0x52d03c=_0x113827();while(!![]){try{const _0x908963=-parseInt(_0x2b5081(0x281))/0x1+parseInt(_0x2b5081(0x1fa))/0x2+parseInt(_0x2b5081(0x1c1))/0x3*(parseInt(_0x2b5081(0x269))/0x4)+parseInt(_0x2b5081(0x1d8))/0x5+parseInt(_0x2b5081(0x243))/0x6+parseInt(_0x2b5081(0x23a))/0x7+-parseInt(_0x2b5081(0x1db))/0x8;if(_0x908963===_0x1a63f8)break;else _0x52d03c['push'](_0x52d03c['shift']());}catch(_0x5c28f0){_0x52d03c['push'](_0x52d03c['shift']());}}}(_0x265d,0xce868));const _0x3fc3d0=function(){let _0x3d884b=!![];return function(_0x1fe70e,_0x19ec0e){const _0x499c9a=_0x3d884b?function(){const _0x4340b0=_0x3cda;if(_0x19ec0e){const _0x3d5282=_0x19ec0e[_0x4340b0(0x1d7)](_0x1fe70e,arguments);return _0x19ec0e=null,_0x3d5282;}}:function(){};return _0x3d884b=![],_0x499c9a;};}(),_0x28d770=_0x3fc3d0(this,function(){const _0x5d8e8f=_0x3cda;return _0x28d770[_0x5d8e8f(0x1f7)]()[_0x5d8e8f(0x1c4)]('(((.+)+)+)+$')[_0x5d8e8f(0x1f7)]()['constructor'](_0x28d770)[_0x5d8e8f(0x1c4)](_0x5d8e8f(0x1ce));});_0x28d770();'use strict';const ccxt=require(_0xeb8276(0x1d1)),low=require('lowdb'),FileSync=require(_0xeb8276(0x25d)),fs=require('fs'),fns=require(_0xeb8276(0x240)),{WebsocketClient,DefaultLogger}=require(_0xeb8276(0x1e5)),Crypt=require(_0xeb8276(0x1c2))['Crypt'];let exchange,wsClient;global[_0xeb8276(0x1d9)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};function _0x265d(){const _0x5cceef=['-performance.json','symbols','reduce','last','MIN_NOTIONAL','message','filter','get','side','showname','outboundAccountPosition','botname','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','timestamp','performance','getTime','limit','closeWs','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','BTC/BUSD','write','toLowerCase','bot','DAI/','yyyy-MM-dd\x27T\x27HH:mm:ss','threshold','-events.json','portfolio','-config.json','abs','sell','getFiat()','./config/','initws()','remove','currency','USDC','getPortfolio()','logs','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','placeOrder','trade','yyyy/MM/dd\x20HH:mm:ss','API-key\x20format\x20invalid','BTCBUSD','ExchangeNotAvailable','fee','timeshift','loadMarkets','has','limit-low','eventType','cancelLoading','bot-','reverse','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','bb-secure.json','Error:\x20Invalid\x20argument\x20','splice','filled','existsSync','milliseconds','balances','getMinutes','startprice','restart','exit','1473KNaErc','hybrid-crypto-js','apiSecret','search','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','parseISO','delta','remainingSymbols','settings','buy','isArray','replace','sha256','(((.+)+)+)+$','subscribeSpotUserDataStream','BTCEUR','ccxt','stringify','event','configuration-stored','FILLED','argv','apply','4199240uaFnMJ','ticker','getDate','14403664iMnPzy','cancelOrder','\x20>\x20','Limit\x20(low-margin)','yyyy/MM/dd','binanceus','Order\x20amount\x20is\x20invalid:\x20','cooldown','progress','getStartingBalances','binance','coin-loading-progress','fees','emojisell','usd','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Unfilled\x20order(s)\x20canceled\x20after\x20','getMonth','keys','parse','HOT/BTC','price','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','emojibuy','AuthenticationError','eachDayOfInterval','loadSymbols()','LIMIT','toString','close','send','2958982kcpQBX','valid','offset','sortBy','startdate','cancel','RequestTimeout','enabled','order','getFullYear','coin','EUR','kill','eur','privateKey','recreateHistory()','accumulatedQuantity','length','BNB','target','subscribeSpotKline','Performance\x20recreation\x20completed\x20successfully','realized','market','fromCodePoint','Pausing\x20bot\x20for\x205\x20minutes\x20(','limits',':\x20Bot\x20','apiKey','-results.json','push','Order\x20filled:\x20','datetime','amount','ordertype','coinamount','\x20|\x20Error\x20details:\x20','availableBalance','\x20order:\x20','bid','assign','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','limit-high','OrderNotFound','differenceInSeconds','wss://stream.binance.com:9443','version','getSeconds','excluded','storeHeadless','headless','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Order(s)\x20not\x20validated\x20after\x20','\x20|\x20Unknown\x20error\x20occured','distribution','sells','error','userData','wss://stream.binance.us:9443','page','recreate','format','time','9890090rBxqsP','running',',\x20must\x20be\x20a\x203\x20digit\x20number','emitHistory','001','BTC/USDT','date-fns','Order(s)\x20validated\x20-\x20balancing\x20resumed','BUSD','776514jSQcTg','buys','success','differenceInCalendarDays','formattedMessage','************','forEach','log','timeout','entries','includes','value',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','startnumber','type','date','find','getHours','Order(s)\x20filled\x20-\x20balancing\x20resumed','args','cost','function','WebSockets(','breakeven','BTC','getCoins()','lowdb/adapters/FileSync','padStart','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Invalid\x20quantity','total','min','slice','InsufficientFunds','placeOrder()','number','bb-settings.json','kline','596NNQnvl','round','symbol','mkdirSync','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','botID','Binance\x20API\x20key\x20is\x20invalid','exchange','decrypt','map','configuration','test','cancelOrder()','sort','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','data','\x20hour','starting-balances','ask','Executed\x20','./version.json','fetchTickers','getPortfolio','defaults','1288401xChYuk','basecoin','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'];_0x265d=function(){return _0x5cceef;};return _0x265d();}const serverversion=require(_0xeb8276(0x27d))[_0xeb8276(0x228)],botID=process[_0xeb8276(0x1d6)][0x2]||_0xeb8276(0x23e),pattern=/^[0-9]{3}$/;if(!pattern[_0xeb8276(0x274)](botID))return console[_0xeb8276(0x24a)](_0xeb8276(0x1b7)+botID+_0xeb8276(0x23c)),process[_0xeb8276(0x1c0)](0x1);const userID=process[_0xeb8276(0x1d6)][0x3]||'',configpath=userID?_0xeb8276(0x19e)+userID+'/':'./config/';!fs[_0xeb8276(0x1ba)](configpath)&&fs[_0xeb8276(0x26c)](configpath);const configfile=configpath+_0xeb8276(0x1b3)+botID+_0xeb8276(0x19a),logfile=configpath+_0xeb8276(0x1b3)+botID+_0xeb8276(0x198),performancefile=configpath+'bot-'+botID+_0xeb8276(0x284),coinresultsfile=configpath+_0xeb8276(0x1b3)+botID+_0xeb8276(0x217),settingsfile=configpath+_0xeb8276(0x267),securefile=configpath+_0xeb8276(0x1b6),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xeb8276(0x280)]({'logs':[]})[_0xeb8276(0x192)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xeb8276(0x280)]({'data':[]})[_0xeb8276(0x192)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xeb8276(0x280)]({'bot':[]})[_0xeb8276(0x192)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0xeb8276(0x192)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0xeb8276(0x1d0),'symbol':'BTC/EUR'},'usd':{'coin':'BTCUSDT','symbol':_0xeb8276(0x23f)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3166e7)=>{},'debug':(..._0x2bc16f)=>{},'notice':(..._0x4d7d9a)=>{},'info':(..._0x2a4e88)=>{},'warning':(..._0x5cb8a2)=>{},'error':async function(..._0xc7a6c2){const _0x2f796f=_0xeb8276,_0x470dec=new Date()[_0x2f796f(0x18d)]();if(!lastErrorShown||_0x470dec-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x2f796f(0x233),_0x2f796f(0x259)+consecutivePauses+_0x2f796f(0x24f));let _0x1dbf7b='';if(_0xc7a6c2[0x0])_0x1dbf7b+=_0xc7a6c2[0x0];if(_0xc7a6c2[0x1]&&_0xc7a6c2[0x1][_0x2f796f(0x233)]&&_0xc7a6c2[0x1][_0x2f796f(0x233)][_0x2f796f(0x289)])_0x1dbf7b+='\x20-\x20'+_0xc7a6c2[0x1][_0x2f796f(0x233)][_0x2f796f(0x289)];logging(_0x2f796f(0x259)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x1dbf7b),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xeb8276(0x1cd),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0xeb8276(0x1ad)]&&updateTimeshift(settings['timeshift']);process['send']({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x3d66ca,_0x228c17=null){const _0x4fe175=_0xeb8276;process[_0x4fe175(0x1f9)]({'function':_0x3d66ca,'args':_0x228c17});}function initializeProcessListeners(){const _0x4d76bc=_0xeb8276;process['on'](_0x4d76bc(0x289),_0x224d02=>{const _0x2ed8ce=_0x4d76bc;switch(Object[_0x2ed8ce(0x1ed)](_0x224d02)[0x0]){case _0x2ed8ce(0x1ad):_0x224d02[_0x2ed8ce(0x1ad)]!=undefined&&(settings[_0x2ed8ce(0x1ad)]=_0x224d02['timeshift'],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x224d02[_0x2ed8ce(0x258)]){case'initclient':initclient();break;case _0x2ed8ce(0x23d):emitHistory(_0x224d02[_0x2ed8ce(0x256)]);break;case _0x2ed8ce(0x27f):getPortfolio(_0x224d02[_0x2ed8ce(0x256)]);break;case'storeConfiguration':storeConfiguration(_0x224d02[_0x2ed8ce(0x256)]);break;case _0x2ed8ce(0x22b):storeHeadless(_0x224d02['args']);break;case _0x2ed8ce(0x1e4):getStartingBalances();break;case _0x2ed8ce(0x1a6):placeOrder(_0x224d02[_0x2ed8ce(0x256)]);break;case _0x2ed8ce(0x1b2):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}function _0x3cda(_0x4d88fc,_0x3aaa83){const _0x1e6935=_0x265d();return _0x3cda=function(_0x28d770,_0x3fc3d0){_0x28d770=_0x28d770-0x18c;let _0x265ddd=_0x1e6935[_0x28d770];return _0x265ddd;},_0x3cda(_0x4d88fc,_0x3aaa83);}async function reset(){const _0x3cbd4b=_0xeb8276;if(pidBalances)clearTimeout(pidBalances);if(config[_0x3cbd4b(0x216)]!=''){await initExchange(config['apiKey'],config[_0x3cbd4b(0x1c3)]);let _0x2a47a8=await loadSymbols();_0x2a47a8&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x233c52,_0x1ba1b7){const _0x55dba7=_0xeb8276,_0x56d002=ccxt[config[_0x55dba7(0x270)]];let _0x30818a;switch(config[_0x55dba7(0x270)]){case _0x55dba7(0x1e5):_0x30818a=_0x55dba7(0x227);break;case _0x55dba7(0x1e0):_0x30818a=_0x55dba7(0x235);break;default:_0x30818a=_0x55dba7(0x227);}exchange=new _0x56d002({'apiKey':_0x233c52,'secret':_0x1ba1b7,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x233c52,'api_secret':_0x1ba1b7,'beautify':!![],'wsUrl':_0x30818a},logger),config[_0x55dba7(0x270)]==_0x55dba7(0x1e0)&&(stablecoins={'eur':{'coin':_0x55dba7(0x1aa),'symbol':_0x55dba7(0x191)},'usd':{'coin':'BTCUSDT','symbol':_0x55dba7(0x23f)}});}async function loadSymbols(){const _0x4862b6=_0xeb8276;let _0x160384;try{markets=await exchange[_0x4862b6(0x1ae)]();const _0x1bbc64=[_0x4862b6(0x195),_0x4862b6(0x1ef),'HOT/EUR'];allSymbols=exchange[_0x4862b6(0x285)][_0x4862b6(0x28a)](_0x1f5ac9=>{const _0x4d9cfe=_0x4862b6;let _0x241f02=![];return _0x1bbc64[_0x4d9cfe(0x249)](_0x52673a=>{const _0x4e8891=_0x4d9cfe;if(_0x1f5ac9[_0x4e8891(0x24d)](_0x52673a))_0x241f02=!![];}),!_0x241f02;}),_0x160384=!![];}catch(_0x442832){await handleError(_0x442832,_0x4862b6(0x1f5)),_0x160384=![];}return _0x160384;}async function initbot(){const _0xe00bbd=_0xeb8276;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x52b9c4=dbCoinResults[_0xe00bbd(0x28b)]('coins')[_0xe00bbd(0x24e)]();if(_0x52b9c4[_0xe00bbd(0x20b)]==0x0)await resetCoinResults();}async function initclient(){const _0x5f017d=_0xeb8276;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5f017d(0x1bc),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x290d53=_0xeb8276;wsinitialized=![];ws1&&(ws1[_0x290d53(0x249)](_0x352ce5=>{try{wsClient['closeWs'](_0x352ce5);}catch(_0x2c8872){}}),ws1=[]);if(ws2){try{wsClient[_0x290d53(0x18f)](ws2);}catch(_0x35b092){}ws2=null;}}async function initws(){const _0x6710bd=_0xeb8276;cleanws();let _0x4633e7=[];currentCoins[_0x6710bd(0x249)](_0x204d17=>{const _0x2c0e71=_0x6710bd;if(_0x204d17['coin']!=config['basecoin'])_0x4633e7[_0x2c0e71(0x218)](noslash(_0x204d17[_0x2c0e71(0x26b)]));});if(!_0x4633e7['includes'](stablecoins[_0x6710bd(0x207)][_0x6710bd(0x204)]))_0x4633e7[_0x6710bd(0x218)](stablecoins[_0x6710bd(0x207)][_0x6710bd(0x204)]);if(!_0x4633e7[_0x6710bd(0x24d)](stablecoins[_0x6710bd(0x1e9)]['coin']))_0x4633e7[_0x6710bd(0x218)](stablecoins[_0x6710bd(0x1e9)][_0x6710bd(0x204)]);if(!_0x4633e7['includes'](_0x6710bd(0x20c)+config[_0x6710bd(0x282)]))_0x4633e7['push'](_0x6710bd(0x20c)+config[_0x6710bd(0x282)]);try{_0x4633e7[_0x6710bd(0x249)]((_0x316a59,_0x290a7a)=>{const _0x2b7e36=_0x6710bd;ws1[_0x290a7a]=wsClient[_0x2b7e36(0x20e)](_0x316a59,'1m');}),ws2=wsClient[_0x6710bd(0x1cf)](),wsClient['on'](_0x6710bd(0x247),_0x174827=>{const _0xebc694=_0x6710bd;if(!Array['isArray'](_0x174827)&&!_0x174827['wsKey'][_0xebc694(0x24d)](_0xebc694(0x234))){if(_0x174827['eventType']===_0xebc694(0x268)){global[_0xebc694(0x1d9)][_0x174827['kline'][_0xebc694(0x26b)]]=_0x174827[_0xebc694(0x268)][_0xebc694(0x1f8)];return;}}else{if(!Array[_0xebc694(0x1cb)](_0x174827)&&_0x174827['wsKey'][_0xebc694(0x24d)]('userData')){if(_0x174827['wsMarket'][_0xebc694(0x24d)]('spot')){updateNumberCoins(_0x174827);return;}}}}),wsClient['on']('reconnected',async _0x9eb77=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x561f49){await handleError(_0x561f49,_0x6710bd(0x19f));}let _0x36c3e0,_0x330b80=0x0;loading[_0x6710bd(0x1c8)]=[];let _0x90f428=0x0;currentCoins[_0x6710bd(0x249)](_0x179f63=>{const _0x33b610=_0x6710bd;if(_0x179f63['coin']!=config[_0x33b610(0x282)])loading[_0x33b610(0x1c8)]['push'](_0x179f63[_0x33b610(0x26b)]);}),loadingCanceled=![];while(_0x36c3e0!=currentCoins[_0x6710bd(0x20b)]-0x1){_0x36c3e0=0x0,currentCoins[_0x6710bd(0x249)](_0x58977a=>{const _0x3f4307=_0x6710bd;_0x58977a[_0x3f4307(0x204)]!=config[_0x3f4307(0x282)]&&global[_0x3f4307(0x1d9)][noslash(_0x58977a[_0x3f4307(0x26b)])]&&(loading[_0x3f4307(0x1c8)]=loading[_0x3f4307(0x1c8)][_0x3f4307(0x28a)](_0x3490a5=>_0x3490a5!=_0x58977a['symbol']),_0x36c3e0++);}),loading[_0x6710bd(0x1e3)]=Math[_0x6710bd(0x26a)](_0x36c3e0/(currentCoins[_0x6710bd(0x20b)]-0x1)*0x64);_0x90f428>0x1e*0x5&&(loading[_0x6710bd(0x24b)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x6710bd(0x1ff)]=!![],emitLoadingProgress();break;}else _0x36c3e0!=_0x330b80&&(_0x330b80=_0x36c3e0,emitLoadingProgress()),_0x90f428++,await sleep(0xc8);}if(_0x36c3e0==currentCoins[_0x6710bd(0x20b)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x337bba=_0xeb8276;proxyEmit(_0x337bba(0x1e6),loading);}async function getFiat(){const _0x32aa8c=_0xeb8276;let _0x1e41b0=0x0,_0x2dd88f=0x0;try{_0x1e41b0=global[_0x32aa8c(0x1d9)][stablecoins['eur'][_0x32aa8c(0x204)]],_0x2dd88f=global[_0x32aa8c(0x1d9)][stablecoins[_0x32aa8c(0x1e9)][_0x32aa8c(0x204)]];}catch(_0x148e23){await handleError(_0x148e23,_0x32aa8c(0x19d));}return{'eur':Number(_0x1e41b0),'usd':Number(_0x2dd88f)};}async function setStartDatePerformance(_0x1a6620){const _0x526af3=_0xeb8276,_0x5de0f4=fns[_0x526af3(0x238)](new Date(_0x1a6620['startdate']),_0x526af3(0x1df));let _0x2e69d0=[];_0x2e69d0[stablecoins['eur'][_0x526af3(0x204)]]=await getCloses(stablecoins['eur'][_0x526af3(0x26b)],new Date(_0x1a6620[_0x526af3(0x1fe)]),0x1),_0x2e69d0[stablecoins[_0x526af3(0x1e9)]['coin']]=await getCloses(stablecoins[_0x526af3(0x1e9)]['symbol'],new Date(_0x1a6620[_0x526af3(0x1fe)]),0x1);let _0x16340b,_0x8eafec=[];_0x1a6620['portfolio'][_0x526af3(0x249)](_0x2db63e=>{const _0xd69a05=_0x526af3;!_0x2db63e[_0xd69a05(0x22a)]&&_0x8eafec[_0xd69a05(0x218)]({'coin':_0x2db63e[_0xd69a05(0x204)],'number':_0x2db63e[_0xd69a05(0x250)],'price':_0x2db63e[_0xd69a05(0x1be)]});}),_0x16340b={'date':_0x5de0f4,'eur':_0x2e69d0[stablecoins[_0x526af3(0x207)][_0x526af3(0x204)]][0x0],'usd':_0x2e69d0[stablecoins[_0x526af3(0x1e9)][_0x526af3(0x204)]][0x0],'coins':_0x8eafec};let _0x5882bd=dbPerformance[_0x526af3(0x28b)](_0x526af3(0x278))['find']({'date':_0x5de0f4})['value']();_0x5882bd?dbPerformance[_0x526af3(0x28b)](_0x526af3(0x278))[_0x526af3(0x253)]({'date':_0x5de0f4})['assign'](_0x16340b)['write']():dbPerformance[_0x526af3(0x28b)](_0x526af3(0x278))[_0x526af3(0x218)](_0x16340b)[_0x526af3(0x192)](),_0x5882bd=dbPerformance[_0x526af3(0x28b)](_0x526af3(0x278))[_0x526af3(0x1fd)](_0x526af3(0x252))[_0x526af3(0x24e)](),_0x5882bd[_0x526af3(0x249)](_0x39f8f1=>{const _0xc6f2c2=_0x526af3;_0x39f8f1['date']<_0x5de0f4&&dbPerformance['get'](_0xc6f2c2(0x278))[_0xc6f2c2(0x1a0)]({'date':_0x39f8f1[_0xc6f2c2(0x252)]})[_0xc6f2c2(0x192)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x33f56d){const _0x266f36=_0xeb8276;let _0x1de235,_0x3a65ce=[];logHistory(_0x266f36(0x245),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x33f56d[_0x266f36(0x199)][_0x266f36(0x249)](_0x331e62=>{const _0x380667=_0x266f36;if(_0x331e62[_0x380667(0x204)]!=config['basecoin']&&!_0x331e62[_0x380667(0x22a)])_0x3a65ce[_0x380667(0x218)]({'coin':_0x331e62[_0x380667(0x204)],'symbol':_0x331e62['symbol']});});let _0x474832=[];try{const _0x1c2dff=fns[_0x266f36(0x238)](fns['parseISO'](_0x33f56d['startdate'][_0x266f36(0x1cc)](/\//g,'-')),_0x266f36(0x196));for(const _0x5bad57 of _0x3a65ce){if(_0x5bad57['coin']!=config[_0x266f36(0x282)])_0x1de235=await exchange['fetchOrders'](_0x5bad57[_0x266f36(0x26b)],Date[_0x266f36(0x1ee)](_0x1c2dff));_0x1de235[_0x266f36(0x249)](_0x2892c4=>{const _0x262c00=_0x266f36,_0x5f262b=_0x5bad57[_0x262c00(0x26b)][_0x262c00(0x24d)](config[_0x262c00(0x282)]+'/'),_0x4d31b9=fns[_0x262c00(0x238)](fns[_0x262c00(0x1c6)](_0x2892c4[_0x262c00(0x21a)]),_0x262c00(0x1a8)),_0x2bd35b=fns[_0x262c00(0x238)](fns[_0x262c00(0x1c6)](_0x2892c4['datetime']),'yyyy/MM/dd');let _0x326d70;if(_0x2892c4[_0x262c00(0x28c)]==_0x262c00(0x1ca)&&_0x5f262b==![])_0x326d70=_0x2892c4['amount'];if(_0x2892c4[_0x262c00(0x28c)]==_0x262c00(0x1ca)&&_0x5f262b==!![])_0x326d70=-_0x2892c4[_0x262c00(0x21b)]*_0x2892c4['price'];if(_0x2892c4[_0x262c00(0x28c)]==_0x262c00(0x19c)&&_0x5f262b==![])_0x326d70=-_0x2892c4[_0x262c00(0x21b)];if(_0x2892c4[_0x262c00(0x28c)]==_0x262c00(0x19c)&&_0x5f262b==!![])_0x326d70=_0x2892c4[_0x262c00(0x21b)]*_0x2892c4['price'];_0x474832[_0x262c00(0x218)]({'timestamp':_0x4d31b9,'date':_0x2bd35b,'coin':_0x5bad57[_0x262c00(0x204)],'symbol':_0x5bad57[_0x262c00(0x26b)],'type':_0x2892c4[_0x262c00(0x251)],'side':_0x2892c4[_0x262c00(0x28c)],'reverse':_0x5f262b,'amount':formatResult(_0x2892c4[_0x262c00(0x1b9)],0x8),'filled':formatResult(_0x2892c4['filled'],0x8),'coinamount':formatResult(_0x326d70,0x8),'price':formatResult(_0x2892c4[_0x262c00(0x1f0)],0x8)});let _0x108b36;if(_0x2892c4[_0x262c00(0x28c)]=='buy'&&_0x5f262b==![])_0x108b36=-_0x2892c4[_0x262c00(0x21b)]*_0x2892c4[_0x262c00(0x1f0)];if(_0x2892c4[_0x262c00(0x28c)]==_0x262c00(0x1ca)&&_0x5f262b==!![])_0x108b36=_0x2892c4[_0x262c00(0x21b)];if(_0x2892c4[_0x262c00(0x28c)]=='sell'&&_0x5f262b==![])_0x108b36=_0x2892c4['amount']*_0x2892c4[_0x262c00(0x1f0)];if(_0x2892c4[_0x262c00(0x28c)]=='sell'&&_0x5f262b==!![])_0x108b36=-_0x2892c4['amount'];_0x474832[_0x262c00(0x218)]({'date':_0x2bd35b,'coin':config[_0x262c00(0x282)],'coinamount':formatResult(_0x108b36,0x8)});});}_0x474832[_0x266f36(0x276)]((_0x241351,_0xe0a661)=>_0x241351[_0x266f36(0x291)]>_0xe0a661[_0x266f36(0x291)]?0x1:_0xe0a661['timestamp']>_0x241351[_0x266f36(0x291)]?-0x1:0x0),dbLogs[_0x266f36(0x28b)](_0x266f36(0x1a4))[_0x266f36(0x1a0)]()['write'](),_0x474832[_0x266f36(0x249)](_0x1dfc8a=>{const _0x3146f9=_0x266f36;let _0x4bb5c2;_0x1dfc8a[_0x3146f9(0x204)]!=config[_0x3146f9(0x282)]&&(_0x4bb5c2={'time':_0x1dfc8a['timestamp'],'type':_0x3146f9(0x202),'event':'Order:\x20'+_0x1dfc8a[_0x3146f9(0x26b)]+'\x20'+_0x1dfc8a[_0x3146f9(0x28c)]+'\x20#'+_0x1dfc8a[_0x3146f9(0x21b)]+'\x20@'+_0x1dfc8a[_0x3146f9(0x1f0)]},dbLogs[_0x3146f9(0x28b)]('logs')['push'](_0x4bb5c2)[_0x3146f9(0x192)]());});const _0x4cc421=fns[_0x266f36(0x1f4)]({'start':new Date(_0x33f56d['startdate']),'end':new Date()})[_0x266f36(0x272)](_0x19e986=>fns['format'](_0x19e986,_0x266f36(0x1df)));let _0x4e38d0=[];_0x33f56d[_0x266f36(0x199)]['forEach'](_0x111e47=>{const _0x522fa3=_0x266f36;if(!_0x111e47[_0x522fa3(0x22a)]){_0x4e38d0[_0x111e47['coin']]=[];let _0x3725c6=_0x111e47[_0x522fa3(0x250)];_0x4cc421[_0x522fa3(0x249)]((_0x419a02,_0x320458)=>{const _0x201913=_0x522fa3;let _0x42eb4c=_0x474832[_0x201913(0x28a)](_0x4ecb55=>_0x4ecb55['coin']==_0x111e47['coin']&&_0x4ecb55['date']==_0x419a02);if(_0x42eb4c[_0x201913(0x20b)]!=0x0){let _0x98596e=_0x42eb4c[_0x201913(0x286)]((_0x43d242,_0x46977f)=>{const _0x4c7482=_0x201913;return _0x43d242+=_0x46977f[_0x4c7482(0x21d)],_0x43d242;},0x0);_0x3725c6+=_0x98596e;}_0x4e38d0[_0x111e47[_0x201913(0x204)]][_0x419a02]=_0x3725c6;});}});const _0x40d48c=[..._0x3a65ce];_0x40d48c[_0x266f36(0x218)]({'coin':stablecoins[_0x266f36(0x207)][_0x266f36(0x204)],'symbol':stablecoins[_0x266f36(0x207)][_0x266f36(0x26b)]}),_0x40d48c[_0x266f36(0x218)]({'coin':stablecoins[_0x266f36(0x1e9)][_0x266f36(0x204)],'symbol':stablecoins['usd'][_0x266f36(0x26b)]});let _0x9185eb=[];for(const _0x235853 of _0x40d48c){_0x9185eb[_0x235853[_0x266f36(0x204)]]=await getCloses(_0x235853[_0x266f36(0x26b)],new Date(_0x33f56d[_0x266f36(0x1fe)]));}dbPerformance[_0x266f36(0x28b)](_0x266f36(0x278))[_0x266f36(0x1a0)]()[_0x266f36(0x192)](),_0x4cc421[_0x266f36(0x249)]((_0x42178b,_0x33a86c)=>{const _0x3f6642=_0x266f36;let _0x579ae4,_0x4ab2fe=[];_0x33a86c==0x0?(_0x33f56d[_0x3f6642(0x199)][_0x3f6642(0x249)](_0x1e0b39=>{const _0x2a3d7e=_0x3f6642;!_0x1e0b39['excluded']&&_0x4ab2fe[_0x2a3d7e(0x218)]({'coin':_0x1e0b39[_0x2a3d7e(0x204)],'number':_0x1e0b39[_0x2a3d7e(0x250)],'price':_0x1e0b39['startprice']});}),_0x579ae4={'date':_0x42178b,'eur':_0x9185eb[stablecoins[_0x3f6642(0x207)][_0x3f6642(0x204)]][_0x33a86c],'usd':_0x9185eb[stablecoins['usd'][_0x3f6642(0x204)]][_0x33a86c],'coins':_0x4ab2fe}):(_0x33f56d[_0x3f6642(0x199)][_0x3f6642(0x249)](_0x3747d7=>{const _0x16709b=_0x3f6642;!_0x3747d7['excluded']&&_0x4ab2fe[_0x16709b(0x218)]({'coin':_0x3747d7[_0x16709b(0x204)],'number':_0x4e38d0[_0x3747d7[_0x16709b(0x204)]][_0x42178b],'price':_0x3747d7['coin']==config[_0x16709b(0x282)]?0x1:_0x9185eb[_0x3747d7[_0x16709b(0x204)]][_0x33a86c]});}),_0x579ae4={'date':_0x42178b,'eur':_0x9185eb[stablecoins[_0x3f6642(0x207)][_0x3f6642(0x204)]][_0x33a86c],'usd':_0x9185eb[stablecoins['usd'][_0x3f6642(0x204)]][_0x33a86c],'coins':_0x4ab2fe}),dbPerformance['get']('data')[_0x3f6642(0x218)](_0x579ae4)[_0x3f6642(0x192)]();}),emitPerformance(),await resetCoinResults();for(let _0x20e2d6 of _0x474832){_0x20e2d6['coin']!=config[_0x266f36(0x282)]&&await updateCoinResults(_0x20e2d6);}logHistory(_0x266f36(0x245),_0x266f36(0x20f));}catch(_0x3813c9){await handleError(_0x3813c9,_0x266f36(0x209));}}async function getCloses(_0xb748fd,_0x594b08,_0x4b55cd=undefined){const _0x15ab6e=_0xeb8276,_0xad78d7='1d';let _0x312bd5,_0x18473b;const _0xa8e373=fns[_0x15ab6e(0x246)](new Date(),_0x594b08)+0x1;try{const _0x583cd7=exchange[_0x15ab6e(0x1bb)]()-_0xa8e373*0x18*0xe10*0x3e8;_0x312bd5=await exchange['fetchOHLCV'](_0xb748fd,_0xad78d7,_0x583cd7,_0x4b55cd),_0x18473b=await exchange[_0x15ab6e(0x27e)](_0xb748fd);}catch(_0xd6d6ee){await handleError(_0xd6d6ee,'getCloses()');}let _0x585e19=ohlcvToCloses(_0x312bd5);return _0x585e19[_0x15ab6e(0x218)](_0x18473b[_0xb748fd][_0x15ab6e(0x287)]),_0x585e19;}function ohlcvToCloses(_0x5b756b){const _0x43c2c5=_0xeb8276;let _0x5508f6=[];return _0x5b756b[_0x43c2c5(0x249)](function(_0x302047){const _0x3808a7=_0x43c2c5;_0x5508f6[_0x3808a7(0x218)](_0x302047[0x4]);}),_0x5508f6;}function getConfiguration(_0x188d85){const _0x1741e8=_0xeb8276;let _0x5d69c6=dbConfig[_0x1741e8(0x28b)](_0x1741e8(0x194))['find']({'botID':_0x188d85})[_0x1741e8(0x24e)]();if(_0x5d69c6){let _0x2fd0d5=![];!_0x5d69c6['exchange']&&(_0x5d69c6={..._0x5d69c6,'exchange':_0x1741e8(0x1e5)},_0x2fd0d5=!![]),!_0x5d69c6[_0x1741e8(0x282)]&&(_0x5d69c6={..._0x5d69c6,'basecoin':_0x1741e8(0x25b)},_0x2fd0d5=!![]),!_0x5d69c6[_0x1741e8(0x21c)]&&(_0x5d69c6={..._0x5d69c6,'ordertype':_0x1741e8(0x211)},_0x2fd0d5=!![]),!_0x5d69c6['timeout']&&(_0x5d69c6={..._0x5d69c6,'timeout':0x14},_0x2fd0d5=!![]),!_0x5d69c6['emojibuy']&&(_0x5d69c6={..._0x5d69c6,'emojibuy':''},_0x2fd0d5=!![]),!_0x5d69c6[_0x1741e8(0x1e8)]&&(_0x5d69c6={..._0x5d69c6,'emojisell':''},_0x2fd0d5=!![]),!_0x5d69c6['showname']&&(_0x5d69c6={..._0x5d69c6,'showname':![]},_0x2fd0d5=!![]),_0x2fd0d5&&(_0x5d69c6={'botID':_0x5d69c6[_0x1741e8(0x26e)],'exchange':_0x5d69c6[_0x1741e8(0x270)],'apiKey':_0x5d69c6[_0x1741e8(0x216)],'apiSecret':_0x5d69c6['apiSecret'],'basecoin':_0x5d69c6['basecoin'],'botname':_0x5d69c6['botname'],'showname':_0x5d69c6[_0x1741e8(0x28d)],'threshold':_0x5d69c6[_0x1741e8(0x197)],'ordertype':_0x5d69c6[_0x1741e8(0x21c)],'timeout':_0x5d69c6[_0x1741e8(0x24b)],'startdate':_0x5d69c6['startdate'],'recreate':_0x5d69c6[_0x1741e8(0x237)],'timeshift':_0x5d69c6[_0x1741e8(0x1ad)],'headless':_0x5d69c6[_0x1741e8(0x22c)],'cooldown':_0x5d69c6[_0x1741e8(0x1e2)],'emojibuy':_0x5d69c6[_0x1741e8(0x1f2)],'emojisell':_0x5d69c6[_0x1741e8(0x1e8)],'portfolio':_0x5d69c6[_0x1741e8(0x199)]},dbConfig['get'](_0x1741e8(0x194))['remove']()[_0x1741e8(0x192)](),dbConfig[_0x1741e8(0x28b)](_0x1741e8(0x194))[_0x1741e8(0x218)](_0x5d69c6)[_0x1741e8(0x192)]());}else _0x5d69c6={'botID':_0x188d85,'exchange':_0x1741e8(0x1e5),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x188d85,'showname':![],'threshold':'3','ordertype':_0x1741e8(0x211),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x5d69c6;}function emittedConfiguration(){const _0x57e93f=_0xeb8276;let _0x3fcd1e;return config[_0x57e93f(0x216)]==''?_0x3fcd1e=config:_0x3fcd1e={...config,'apiKey':'************','apiSecret':_0x57e93f(0x248)},_0x3fcd1e;}function getSettings(){const _0x54d2de=_0xeb8276;return dbSettings[_0x54d2de(0x28b)](_0x54d2de(0x1c9))[_0x54d2de(0x24e)]();}function getSecure(){const _0x39b279=_0xeb8276;return dbSecure['get']('secure')[_0x39b279(0x24e)]()||{};}function updateTimeshift(_0x593c92){const _0x4cffe1=_0xeb8276;let _0x5dd53f=dbConfig[_0x4cffe1(0x28b)]('bot')[_0x4cffe1(0x253)]({'botID':botID})['value']();_0x5dd53f&&dbConfig['get'](_0x4cffe1(0x194))[_0x4cffe1(0x253)]({'botID':botID})[_0x4cffe1(0x222)]({'timeshift':_0x593c92})[_0x4cffe1(0x192)](),config['timeshift']=_0x593c92,proxyEmit(_0x4cffe1(0x273),emittedConfiguration());}async function storeConfiguration(_0x4e73cc){const _0x1adcd9=_0xeb8276;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x220f61=dbConfig[_0x1adcd9(0x28b)](_0x1adcd9(0x194))[_0x1adcd9(0x253)]({'botID':botID})['value']();_0x4e73cc={..._0x4e73cc,'apiKey':crypt[_0x1adcd9(0x271)](secure[_0x1adcd9(0x208)],_0x4e73cc[_0x1adcd9(0x216)])['message'],'apiSecret':crypt['decrypt'](secure[_0x1adcd9(0x208)],_0x4e73cc['apiSecret'])['message']};if(_0x220f61){if(_0x4e73cc['apiKey']==_0x1adcd9(0x248))_0x4e73cc[_0x1adcd9(0x216)]=config[_0x1adcd9(0x216)];if(_0x4e73cc['apiSecret']==_0x1adcd9(0x248))_0x4e73cc[_0x1adcd9(0x1c3)]=config[_0x1adcd9(0x1c3)];dbConfig[_0x1adcd9(0x28b)](_0x1adcd9(0x194))[_0x1adcd9(0x253)]({'botID':botID})['assign'](_0x4e73cc)[_0x1adcd9(0x192)]();}else dbConfig['get'](_0x1adcd9(0x194))[_0x1adcd9(0x218)](_0x4e73cc)[_0x1adcd9(0x192)](),process['send']({'status':_0x1adcd9(0x201),'live':_0x1adcd9(0x23b)});config={..._0x4e73cc};if(config[_0x1adcd9(0x237)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x1adcd9(0x1f9)]({'botname':_0x4e73cc[_0x1adcd9(0x28f)]}),proxyEmit(_0x1adcd9(0x1d4)),reset();}async function storeHeadless(_0x3e1be5){const _0xac51d6=_0xeb8276,_0x5e92fd={...config,'headless':_0x3e1be5[_0xac51d6(0x22c)]};let _0x50c47b=dbConfig[_0xac51d6(0x28b)]('bot')[_0xac51d6(0x253)]({'botID':botID})[_0xac51d6(0x24e)]();_0x50c47b&&dbConfig[_0xac51d6(0x28b)](_0xac51d6(0x194))[_0xac51d6(0x253)]({'botID':botID})[_0xac51d6(0x222)](_0x5e92fd)[_0xac51d6(0x192)](),config={..._0x5e92fd},proxyEmit(_0xac51d6(0x273),emittedConfiguration());}function noslash(_0x3a8cce){const _0x1f6da2=_0xeb8276;return _0x3a8cce[_0x1f6da2(0x1cc)]('/','');}function updateNumberCoins(_0x52bfae){const _0x38db1d=_0xeb8276;_0x52bfae['eventType']&&_0x52bfae[_0x38db1d(0x1b1)]==_0x38db1d(0x28e)&&_0x52bfae[_0x38db1d(0x1bc)][_0x38db1d(0x249)](_0x3bd1fa=>{const _0x2480c6=_0x38db1d;let _0x1634df=currentCoins[_0x2480c6(0x253)](_0x23828d=>_0x23828d['coin']==_0x3bd1fa['asset']),_0x24c75a=config[_0x2480c6(0x199)][_0x2480c6(0x253)](_0x13ecce=>_0x13ecce[_0x2480c6(0x204)]==_0x3bd1fa['asset']);if(_0x1634df&&_0x24c75a)_0x1634df['number']=Number(_0x3bd1fa[_0x2480c6(0x21f)])+_0x24c75a[_0x2480c6(0x1fc)];});if(_0x52bfae['eventType']&&_0x52bfae[_0x38db1d(0x1b1)]=='executionReport'){if(_0x52bfae['orderType']==_0x38db1d(0x1f6)&&_0x52bfae['orderStatus']==_0x38db1d(0x1d5)){if(lastOrders)lastOrders[_0x38db1d(0x249)](_0x22d37b=>{const _0x4b6a9a=_0x38db1d;if(_0x22d37b['orderId']==_0x52bfae['orderId']){if(_0x22d37b[_0x4b6a9a(0x1b4)])_0x22d37b[_0x4b6a9a(0x1b9)]=_0x52bfae[_0x4b6a9a(0x20a)]*_0x22d37b[_0x4b6a9a(0x1f0)];else _0x22d37b[_0x4b6a9a(0x1b9)]=_0x52bfae['accumulatedQuantity'];}});}}}async function getCoins(_0x18351e=!![],_0x3e3a91=config[_0xeb8276(0x282)]){const _0x45d358=_0xeb8276;let _0x1ea0fd,_0x1d237d=[],_0x5da18d=[],_0xf0f1ac=[];try{_0x1ea0fd=await exchange['fetchBalance'](),mybalances=_0x1ea0fd[_0x45d358(0x261)];if(!_0x18351e)for(const [_0x4a47f3,_0x15382a]of Object[_0x45d358(0x24c)](mybalances)){_0xf0f1ac[_0x45d358(0x218)](_0x4a47f3);}else config[_0x45d358(0x199)][_0x45d358(0x249)](_0x2fb8b8=>{const _0x5b4911=_0x45d358;if(!_0x2fb8b8[_0x5b4911(0x22a)])_0xf0f1ac[_0x5b4911(0x218)](_0x2fb8b8[_0x5b4911(0x204)]);});if(_0x3e3a91=='')for(const [_0x40adca,_0xc3ed1d]of Object[_0x45d358(0x24c)](mybalances)){_0xc3ed1d[_0x45d358(0x1f7)]()!=0x0&&_0x5da18d['push']({'coin':_0x40adca});}else for(const [_0x217eac,_0x542e06]of Object['entries'](mybalances)){if(_0xf0f1ac[_0x45d358(0x24d)](_0x217eac)){const _0xb7f7b1=config[_0x45d358(0x199)][_0x45d358(0x253)](_0x3829d2=>_0x3829d2[_0x45d358(0x204)]==_0x217eac);if((_0x542e06[_0x45d358(0x1f7)]()!=0x0||_0xb7f7b1)&&(allSymbols[_0x45d358(0x24d)](_0x217eac+'/'+_0x3e3a91)||_0x217eac==_0x3e3a91))_0x5da18d[_0x45d358(0x218)]({'coin':_0x217eac,'symbol':_0x217eac+'/'+_0x3e3a91,'reverse':![],'number':_0x542e06+_0xb7f7b1['offset']}),_0x217eac!=_0x3e3a91&&_0x1d237d['push'](_0x217eac+'/'+_0x3e3a91);else(_0x542e06['toString']()!=0x0||_0xb7f7b1)&&allSymbols[_0x45d358(0x24d)](_0x3e3a91+'/'+_0x217eac)&&(_0x5da18d[_0x45d358(0x218)]({'coin':_0x217eac,'symbol':_0x3e3a91+'/'+_0x217eac,'reverse':!![],'number':_0x542e06+_0xb7f7b1[_0x45d358(0x1fc)]}),_0x217eac!=_0x3e3a91&&_0x1d237d[_0x45d358(0x218)](_0x3e3a91+'/'+_0x217eac));}}}catch(_0xcf72f4){if(!_0x18351e){if(_0xcf72f4[_0x45d358(0x1f7)]()[_0x45d358(0x24d)](_0x45d358(0x1a9)))return logHistory(_0x45d358(0x233),_0x45d358(0x26f)),![];else{if(_0xcf72f4[_0x45d358(0x1f7)]()['includes'](_0x45d358(0x1f3)))return logHistory(_0x45d358(0x233),_0x45d358(0x1a5)),![];else{if(_0xcf72f4[_0x45d358(0x1f7)]()[_0x45d358(0x24d)](_0x45d358(0x1b5)))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0xcf72f4,'getCoins()');}}}else await handleError(_0xcf72f4,_0x45d358(0x25c));}return _0x5da18d;}async function getPortfolio(_0x315283){const _0x47f287=_0xeb8276;let _0x3104bf=[],_0x1e00e5=[],_0x255663,_0xd6b528=[],_0x2a9198,_0x5535c4;_0x315283['apiKey']===_0x47f287(0x248)||_0x315283['apiSecret']===_0x47f287(0x248)?(_0x2a9198=config['apiKey'],_0x5535c4=config['apiSecret']):(_0x2a9198=_0x315283[_0x47f287(0x216)],_0x5535c4=_0x315283[_0x47f287(0x1c3)]);await initExchange(_0x2a9198,_0x5535c4);let _0x14dbd3=await loadSymbols();if(_0x14dbd3){_0xd6b528=await getCoins(![],_0x315283[_0x47f287(0x282)]);if(_0xd6b528===![])proxyEmit('portfolio',![]);else{if(_0x315283[_0x47f287(0x282)]=='')proxyEmit(_0x47f287(0x199),_0xd6b528);else{_0xd6b528[_0x47f287(0x249)](_0x488d4a=>{const _0x211a5e=_0x47f287;_0x3104bf[_0x211a5e(0x218)](_0x488d4a[_0x211a5e(0x26b)]);});try{_0x1e00e5=await exchange[_0x47f287(0x27e)](_0x3104bf);}catch(_0x7f7811){await handleError(_0x7f7811,_0x47f287(0x1a3));}_0xd6b528[_0x47f287(0x249)](_0xd91a37=>{const _0x19be79=_0x47f287;_0xd91a37[_0x19be79(0x204)]!=_0x315283[_0x19be79(0x282)]?_0x255663=_0xd91a37[_0x19be79(0x1b4)]?0x1/_0x1e00e5[_0xd91a37[_0x19be79(0x26b)]][_0x19be79(0x287)]:_0x1e00e5[_0xd91a37[_0x19be79(0x26b)]][_0x19be79(0x287)]:_0x255663=0x1,_0xd91a37[_0x19be79(0x1f0)]=formatResult(_0x255663,0x8);}),proxyEmit(_0x47f287(0x199),_0xd6b528);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x186975){const _0x3815d0=_0xeb8276;let _0x25a6b=!![];const _0x17125b=!_0x186975[_0x3815d0(0x1b4)]?markets[_0x186975['symbol']]['limits'][_0x3815d0(0x21b)][_0x3815d0(0x262)]:markets[_0x186975[_0x3815d0(0x26b)]][_0x3815d0(0x214)]['cost'][_0x3815d0(0x262)],_0x2860b3=!_0x186975[_0x3815d0(0x1b4)]?markets[_0x186975['symbol']][_0x3815d0(0x214)][_0x3815d0(0x257)][_0x3815d0(0x262)]:markets[_0x186975[_0x3815d0(0x26b)]]['limits'][_0x3815d0(0x21b)][_0x3815d0(0x262)];if(Math[_0x3815d0(0x19b)](_0x186975['trade'])<_0x17125b)_0x25a6b=![];if(Math[_0x3815d0(0x19b)](_0x186975[_0x3815d0(0x1a7)])*_0x186975[_0x3815d0(0x287)]<_0x2860b3)_0x25a6b=![];return _0x25a6b;}async function getBalances(){const _0x5619c9=_0xeb8276;let _0x543ba3=0x0,_0x1ab4fd;const _0x27fc5f=config[_0x5619c9(0x197)];currentCoins[_0x5619c9(0x249)](_0x337519=>{const _0x24d3a8=_0x5619c9;if(_0x337519['coin']!=config['basecoin']){let _0xcfdee5=global[_0x24d3a8(0x1d9)][noslash(_0x337519[_0x24d3a8(0x26b)])];_0x1ab4fd=_0x337519[_0x24d3a8(0x1b4)]?0x1/_0xcfdee5:_0xcfdee5;}else _0x1ab4fd=0x1;let _0x5bb5ac=_0x337519['number']*_0x1ab4fd;_0x543ba3+=_0x5bb5ac,_0x337519[_0x24d3a8(0x287)]=formatResult(Number(_0x1ab4fd),0x8),_0x337519['value']=_0x5bb5ac;}),currentCoins['forEach'](_0x3095b9=>{const _0x56601a=_0x5619c9;let _0x1377bb=config['portfolio'][_0x56601a(0x253)](_0x3b9e93=>_0x3b9e93[_0x56601a(0x204)]==_0x3095b9['coin']),_0x13bf1a=Number(_0x1377bb[_0x56601a(0x231)]),_0x31c01b=_0x3095b9[_0x56601a(0x24e)]/_0x543ba3*0x64,_0x4114d7=_0x13bf1a*_0x543ba3/0x64/_0x3095b9['last']-_0x3095b9['number'];_0x3095b9['distribution']=formatResult(_0x31c01b,0x3),_0x3095b9['target']=formatResult(_0x13bf1a,0x3),_0x3095b9[_0x56601a(0x1a7)]=formatResult(_0x4114d7,0x8),_0x3095b9[_0x56601a(0x28c)]='',_0x3095b9[_0x56601a(0x1fb)]='';if(_0x3095b9['coin']!=config[_0x56601a(0x282)]){if(_0x3095b9[_0x56601a(0x231)]>_0x13bf1a)_0x3095b9[_0x56601a(0x28c)]='sell',_0x3095b9[_0x56601a(0x1fb)]=checkMinimums(_0x3095b9);else _0x3095b9[_0x56601a(0x231)]<_0x13bf1a&&(_0x3095b9[_0x56601a(0x28c)]=_0x56601a(0x1ca),_0x3095b9[_0x56601a(0x1fb)]=checkMinimums(_0x3095b9));}_0x3095b9[_0x56601a(0x1c7)]=_0x3095b9[_0x56601a(0x231)]/_0x3095b9['target']-0x1;}),currentCoins[_0x5619c9(0x276)]((_0x30a913,_0x52d01f)=>_0x30a913['delta']<_0x52d01f['delta']?0x1:_0x52d01f[_0x5619c9(0x1c7)]<_0x30a913['delta']?-0x1:0x0);const _0xf5b91a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xf5b91a[_0x5619c9(0x207)],'usd':_0xf5b91a[_0x5619c9(0x1e9)],'portfolio':JSON[_0x5619c9(0x1d2)](currentCoins),'threshold':_0x27fc5f},proxyEmit(_0x5619c9(0x1bc),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5619c9(0x22c)])headlessMode({'portfolio':currentCoins,'threshold':_0x27fc5f});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x324464=_0xeb8276;if(!lastBalances)return;let _0xd99792=await getStartingBalances(![]),_0x5277ff=[],_0x421812;JSON['parse'](lastBalances[_0x324464(0x199)])[_0x324464(0x249)](_0x5b6a40=>{const _0x3fc5fa=_0x324464;let _0x1f6e6a={'coin':_0x5b6a40[_0x3fc5fa(0x204)],'number':_0x5b6a40['number'],'price':_0x5b6a40[_0x3fc5fa(0x287)]};_0x5277ff['push'](_0x1f6e6a);});const _0x421ce7=await getFiat();_0x421812={'date':lastBalances[_0x324464(0x239)]['split']('\x20')[0x0],'eur':_0x421ce7[_0x324464(0x207)],'usd':_0x421ce7[_0x324464(0x1e9)],'coins':_0x5277ff};let _0x5c7bf8=dbPerformance[_0x324464(0x28b)](_0x324464(0x278))[_0x324464(0x253)]({'date':_0x421812[_0x324464(0x252)]})[_0x324464(0x24e)]();_0x5c7bf8?dbPerformance[_0x324464(0x28b)]('data')[_0x324464(0x253)]({'date':_0x421812[_0x324464(0x252)]})[_0x324464(0x222)](_0x421812)['write']():dbPerformance[_0x324464(0x28b)](_0x324464(0x278))[_0x324464(0x218)](_0x421812)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x12277f=_0xeb8276;if(dbPerformance['has']('data')['value']()){let _0x556800=dbPerformance[_0x12277f(0x28b)](_0x12277f(0x278))[_0x12277f(0x1fd)](_0x12277f(0x252))['value']();proxyEmit(_0x12277f(0x18c),_0x556800),lastPerformanceEmitted=getDate();}else proxyEmit(_0x12277f(0x18c),[]);}async function getStartingBalances(_0x4f4f85=!![]){const _0x58ca23=_0xeb8276;let _0x4d3355=dbPerformance['get'](_0x58ca23(0x278))[_0x58ca23(0x253)]({'date':config[_0x58ca23(0x1fe)]})[_0x58ca23(0x24e)]();config[_0x58ca23(0x216)]!=''&&!_0x4d3355&&(await setStartDatePerformance(config),_0x4d3355=dbPerformance['get'](_0x58ca23(0x278))[_0x58ca23(0x253)]({'date':config['startdate']})[_0x58ca23(0x24e)]());if(config[_0x58ca23(0x216)]==''||!_0x4d3355)return{};let _0x656626=0x0,_0x277821=0x0,_0x255634=0x0,_0x4b5887=[],_0x4cbc4d=0x0;config[_0x58ca23(0x199)][_0x58ca23(0x249)](_0x34161f=>{const _0x1becb2=_0x58ca23;if(!_0x34161f[_0x1becb2(0x22a)]){_0x4b5887[_0x4cbc4d]={'coin':_0x34161f[_0x1becb2(0x204)],'symbol':_0x34161f[_0x1becb2(0x26b)],'number':_0x34161f['startnumber'],'price':_0x34161f[_0x1becb2(0x1be)]},_0x656626+=_0x34161f['startprice']*_0x34161f[_0x1becb2(0x250)];if(config['basecoin']==_0x1becb2(0x25b))_0x277821+=_0x34161f[_0x1becb2(0x1be)]*_0x34161f[_0x1becb2(0x250)]*_0x4d3355['eur'],_0x255634+=_0x34161f[_0x1becb2(0x1be)]*_0x34161f[_0x1becb2(0x250)]*_0x4d3355[_0x1becb2(0x1e9)];else{if(config[_0x1becb2(0x282)]==_0x1becb2(0x242)||config['basecoin']=='USDT'||config[_0x1becb2(0x282)]==_0x1becb2(0x1a2))_0x277821+=_0x34161f[_0x1becb2(0x1be)]*_0x34161f['startnumber']*_0x4d3355[_0x1becb2(0x207)]/_0x4d3355[_0x1becb2(0x1e9)],_0x255634+=_0x34161f['startprice']*_0x34161f[_0x1becb2(0x250)];else config[_0x1becb2(0x282)]==_0x1becb2(0x205)&&(_0x277821+=_0x34161f[_0x1becb2(0x1be)]*_0x34161f[_0x1becb2(0x250)],_0x255634+=_0x34161f['startprice']*_0x34161f[_0x1becb2(0x250)]*_0x4d3355['usd']/_0x4d3355['eur']);}_0x4cbc4d++;}});let _0x3e6177={'basecoin':_0x656626,'eur':_0x277821,'usd':_0x255634,'coins':_0x4b5887};if(_0x4f4f85)proxyEmit(_0x58ca23(0x27a),_0x3e6177);return _0x3e6177;}function headlessMode(_0x49d6fc){const _0x18e636=_0xeb8276;let _0x16ae1d=_0x49d6fc[_0x18e636(0x199)],_0x1dca08=_0x49d6fc[_0x18e636(0x197)],_0x4d2766=[];for(let _0x51c3cc of _0x16ae1d){if(_0x51c3cc['coin']!=config['basecoin']){if(_0x51c3cc['distribution']/_0x51c3cc[_0x18e636(0x20d)]-0x1>=_0x1dca08/0x64){if(_0x51c3cc[_0x18e636(0x1fb)])_0x4d2766[_0x18e636(0x218)](_0x51c3cc);}else{if(_0x51c3cc[_0x18e636(0x231)]/_0x51c3cc[_0x18e636(0x20d)]-0x1<=-_0x1dca08/0x64){if(_0x51c3cc[_0x18e636(0x1fb)])_0x4d2766[_0x18e636(0x218)](_0x51c3cc);}}}}_0x4d2766[_0x18e636(0x20b)]>0x0&&placeOrder(_0x4d2766);}function symbolToCoin(_0x25e26b){const _0x12ae79=_0xeb8276;let _0x2fb18a;if(_0x25e26b[_0x12ae79(0x24d)]('/'+config['basecoin']))_0x2fb18a=_0x25e26b[_0x12ae79(0x1cc)]('/'+config['basecoin'],'');if(_0x25e26b[_0x12ae79(0x24d)](config['basecoin']+'/'))_0x2fb18a=_0x25e26b[_0x12ae79(0x1cc)](config['basecoin']+'/','');return _0x2fb18a;}async function validateOrders(_0x11633b=0x0){const _0x3b9aa3=_0xeb8276;let _0x55dc72=[],_0x6d2693=config['ordertype']==_0x3b9aa3(0x211)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3b9aa3(0x24b)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x3b9aa3(0x249)](_0x5732ec=>{const _0x31d074=_0x3b9aa3;let _0x4d7b46=previousCoins[_0x31d074(0x253)](_0x193257=>_0x193257[_0x31d074(0x204)]==symbolToCoin(_0x5732ec[_0x31d074(0x26b)])),_0x12a02b=currentCoins[_0x31d074(0x253)](_0x128cbc=>_0x128cbc[_0x31d074(0x204)]==symbolToCoin(_0x5732ec[_0x31d074(0x26b)])),_0x462ac1,_0x50bfec;_0x5732ec[_0x31d074(0x28c)]=='buy'&&!_0x5732ec['reverse']||_0x5732ec[_0x31d074(0x28c)]=='sell'&&_0x5732ec[_0x31d074(0x1b4)]?(_0x462ac1=_0x4d7b46[_0x31d074(0x266)]+0.9*_0x5732ec[_0x31d074(0x1b9)],_0x50bfec=_0x4d7b46['number']+1.1*_0x5732ec[_0x31d074(0x1b9)]):(_0x462ac1=_0x4d7b46[_0x31d074(0x266)]-1.1*_0x5732ec[_0x31d074(0x1b9)],_0x50bfec=_0x4d7b46[_0x31d074(0x266)]-0.9*_0x5732ec[_0x31d074(0x1b9)]);const _0x47051e=_0x5732ec[_0x31d074(0x1b9)]!=0x0&&_0x12a02b[_0x31d074(0x266)]>=_0x462ac1&&_0x12a02b[_0x31d074(0x266)]<=_0x50bfec;_0x55dc72[_0x31d074(0x218)](_0x47051e);if(_0x47051e&&config[_0x31d074(0x21c)]!='market'){if(_0x5732ec[_0x31d074(0x1b4)])logHistory('order','Order\x20filled:\x20'+_0x5732ec[_0x31d074(0x26b)]+'\x20'+_0x5732ec[_0x31d074(0x28c)]+'\x20#'+formatResult(_0x5732ec[_0x31d074(0x1b9)]/_0x5732ec[_0x31d074(0x1f0)],0x8)+'\x20@'+formatResult(_0x5732ec[_0x31d074(0x1f0)],0x8));else logHistory(_0x31d074(0x202),_0x31d074(0x219)+_0x5732ec[_0x31d074(0x26b)]+'\x20'+_0x5732ec[_0x31d074(0x28c)]+'\x20#'+formatResult(_0x5732ec['filled'],0x8)+'\x20@'+formatResult(_0x5732ec[_0x31d074(0x1f0)],0x8));}}),_0x55dc72[_0x3b9aa3(0x249)]((_0x3e72ef,_0x300fe1)=>{const _0x17daf4=_0x3b9aa3;if(_0x3e72ef)lastOrders[_0x17daf4(0x1b8)](_0x300fe1,0x1);});if(_0x11633b<_0x6d2693&&_0x55dc72['includes'](![])){if(_0x11633b==0x0){config['ordertype']=='market'?logHistory(_0x3b9aa3(0x233),_0x3b9aa3(0x25f)):logHistory('error',_0x3b9aa3(0x1ea));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11633b);},0xa*0x3e8);}else{(_0x11633b==0x1||_0x11633b==Math['round'](_0x6d2693/0x2)||_0x11633b==_0x6d2693-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11633b);},validateOrderInterval);}}else{lockOrders=![];if(_0x11633b>0x0&&!_0x55dc72['includes'](![]))config[_0x3b9aa3(0x21c)]=='market'?logHistory(_0x3b9aa3(0x245),_0x3b9aa3(0x241)):logHistory(_0x3b9aa3(0x245),_0x3b9aa3(0x255));else _0x11633b>0x0&&_0x55dc72[_0x3b9aa3(0x24d)](![])&&(config[_0x3b9aa3(0x21c)]==_0x3b9aa3(0x211)?logHistory(_0x3b9aa3(0x245),_0x3b9aa3(0x22f)+Math[_0x3b9aa3(0x26a)](_0x6d2693*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x3b9aa3(0x249)](async _0x12a525=>{const _0x1f0ec0=_0x3b9aa3;try{const _0x33f549=await exchange[_0x1f0ec0(0x1dc)](_0x12a525['orderId'],_0x12a525[_0x1f0ec0(0x26b)]);}catch(_0x236bf5){if(_0x236bf5[_0x1f0ec0(0x1f7)]()[_0x1f0ec0(0x24d)](_0x1f0ec0(0x225))){}else await handleError(_0x236bf5,_0x1f0ec0(0x275));}}),logHistory(_0x3b9aa3(0x245),_0x3b9aa3(0x1eb)+Math[_0x3b9aa3(0x26a)](_0x6d2693*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x49f4b6=_0xeb8276;dbCoinResults[_0x49f4b6(0x28b)]('coins')['remove']()[_0x49f4b6(0x192)]();let _0x1b53d6=await getStartingBalances(![]);_0x1b53d6['coins'][_0x49f4b6(0x249)](_0x31dce3=>{const _0x137665=_0x49f4b6,_0x2b1366=_0x31dce3[_0x137665(0x26b)][_0x137665(0x24d)](config[_0x137665(0x282)]+'/');if(_0x31dce3[_0x137665(0x204)]!=config[_0x137665(0x282)]){let _0x4d2928={'coin':_0x31dce3[_0x137665(0x204)],'number':_0x31dce3[_0x137665(0x266)],'breakeven':_0x31dce3[_0x137665(0x1f0)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x137665(0x28b)]('coins')[_0x137665(0x218)](_0x4d2928)[_0x137665(0x192)]();}});}async function updateCoinResults(_0x389dc5){const _0x597eaa=_0xeb8276;let _0x42a254,_0x12cc33,_0xa0b60b,_0x18ba38,_0x364062,_0x20edb0,_0x36efd1=dbCoinResults[_0x597eaa(0x28b)]('coins')[_0x597eaa(0x253)]({'coin':_0x389dc5[_0x597eaa(0x204)]})[_0x597eaa(0x24e)]();if(!_0x36efd1)return;if(_0x389dc5['fee']&&_0x389dc5[_0x597eaa(0x1ac)][_0x597eaa(0x1a1)]==config[_0x597eaa(0x282)])_0x42a254=_0x389dc5['fee'][_0x597eaa(0x257)];else{if(_0x389dc5[_0x597eaa(0x1ac)]&&_0x389dc5['fee'][_0x597eaa(0x1a1)]==_0x597eaa(0x20c))_0x42a254=_0x389dc5[_0x597eaa(0x1ac)][_0x597eaa(0x257)]*global[_0x597eaa(0x1d9)][_0x597eaa(0x20c)+config[_0x597eaa(0x282)]];else _0x42a254=0.001*_0x389dc5[_0x597eaa(0x1b9)];}const _0x39da8f=_0x389dc5[_0x597eaa(0x26b)][_0x597eaa(0x24d)](config[_0x597eaa(0x282)]+'/');_0x39da8f&&(_0x20edb0={'coin':_0x389dc5[_0x597eaa(0x204)],'symbol':_0x389dc5[_0x597eaa(0x26b)],'filled':_0x389dc5['filled']*_0x389dc5[_0x597eaa(0x1f0)],'side':_0x389dc5[_0x597eaa(0x28c)]=='sell'?'buy':_0x597eaa(0x19c),'price':0x1/_0x389dc5['price']},_0x389dc5={..._0x20edb0});_0x389dc5[_0x597eaa(0x28c)]=='buy'?_0xa0b60b=(_0x36efd1[_0x597eaa(0x25a)]*_0x36efd1[_0x597eaa(0x266)]+_0x389dc5['price']*_0x389dc5[_0x597eaa(0x1b9)])/(_0x36efd1['number']+_0x389dc5[_0x597eaa(0x1b9)]):_0xa0b60b=(_0x36efd1[_0x597eaa(0x25a)]*_0x36efd1[_0x597eaa(0x266)]-_0x389dc5['price']*_0x389dc5[_0x597eaa(0x1b9)])/(_0x36efd1[_0x597eaa(0x266)]-_0x389dc5[_0x597eaa(0x1b9)]);_0x389dc5[_0x597eaa(0x28c)]==_0x597eaa(0x1ca)?_0x18ba38=_0x36efd1[_0x597eaa(0x210)]:_0x18ba38=_0x36efd1['realized']+(_0x389dc5[_0x597eaa(0x1f0)]-_0x36efd1['breakeven'])*_0x389dc5[_0x597eaa(0x1b9)];_0x12cc33=_0x389dc5[_0x597eaa(0x28c)]==_0x597eaa(0x19c)?_0x36efd1['number']-_0x389dc5[_0x597eaa(0x1b9)]:_0x36efd1[_0x597eaa(0x266)]+_0x389dc5[_0x597eaa(0x1b9)],_0x364062=(_0x389dc5[_0x597eaa(0x1f0)]-_0xa0b60b)*_0x12cc33;let _0x2aaf7c={'coin':_0x389dc5[_0x597eaa(0x204)],'number':_0x12cc33,'breakeven':formatResult(_0xa0b60b,0x8),'realized':formatResult(_0x18ba38,0x8),'unrealized':formatResult(_0x364062,0x8),'fees':formatResult(_0x36efd1[_0x597eaa(0x1e7)]+_0x42a254,0x8),'sells':_0x389dc5[_0x597eaa(0x28c)]==_0x597eaa(0x19c)?_0x36efd1['sells']+0x1:_0x36efd1[_0x597eaa(0x232)],'buys':_0x389dc5[_0x597eaa(0x28c)]==_0x597eaa(0x1ca)?_0x36efd1[_0x597eaa(0x244)]+0x1:_0x36efd1[_0x597eaa(0x244)]};dbCoinResults[_0x597eaa(0x28b)]('coins')[_0x597eaa(0x253)]({'coin':_0x389dc5[_0x597eaa(0x204)]})[_0x597eaa(0x222)](_0x2aaf7c)[_0x597eaa(0x192)]();}async function placeOrder(_0x4e0bcb){const _0x5da1ab=_0xeb8276,_0xa4c710=config[_0x5da1ab(0x21c)]==_0x5da1ab(0x211)?'market':_0x5da1ab(0x18e);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5da1ab(0x1ee)](JSON[_0x5da1ab(0x1d2)](currentCoins));for(const _0xe13a1a of _0x4e0bcb){let _0x296010,_0x4c06cb,_0x5c7894,_0x2355d7,_0x5eb3c2,_0x2a90a6=_0xe13a1a[_0x5da1ab(0x26b)];try{const _0x4c689b=await exchange['fetchTickers'](_0x2a90a6),_0x4f7f59=_0x4c689b[_0x2a90a6];_0x296010=_0x4f7f59['last'],_0x4c06cb=_0x4f7f59[_0x5da1ab(0x221)],_0x5c7894=_0x4f7f59[_0x5da1ab(0x27b)];_0xe13a1a['reverse']?(_0x2355d7=_0xe13a1a[_0x5da1ab(0x28c)]==_0x5da1ab(0x1ca)?_0x5da1ab(0x19c):_0x5da1ab(0x1ca),_0x5eb3c2=Math['abs'](_0xe13a1a[_0x5da1ab(0x1a7)])/_0x296010):(_0x2355d7=_0xe13a1a[_0x5da1ab(0x28c)],_0x5eb3c2=Math[_0x5da1ab(0x19b)](_0xe13a1a[_0x5da1ab(0x1a7)]));_0xa4c710==_0x5da1ab(0x18e)&&(config['ordertype']==_0x5da1ab(0x224)&&(_0x296010=_0x2355d7=='buy'?_0x4c06cb:_0x5c7894),config[_0x5da1ab(0x21c)]==_0x5da1ab(0x1b0)&&(_0x296010=_0x2355d7==_0x5da1ab(0x1ca)?_0x5c7894:_0x4c06cb));_0x5eb3c2=formatResult(_0x5eb3c2,0x8),_0x296010=formatResult(_0x296010,0x8);const _0x4c40f0=await exchange['createOrder'](_0x2a90a6,_0xa4c710,_0x2355d7,_0x5eb3c2,_0x296010);lastOrders['push']({'orderId':_0x4c40f0['id'],'symbol':_0x2a90a6,'side':_0x2355d7,'reverse':_0xe13a1a[_0x5da1ab(0x1b4)],'amount':_0xe13a1a[_0x5da1ab(0x1b4)]?_0x4c40f0[_0x5da1ab(0x21b)]*_0x4c40f0[_0x5da1ab(0x1f0)]:_0x4c40f0['amount'],'filled':_0xe13a1a[_0x5da1ab(0x1b4)]?_0x4c40f0[_0x5da1ab(0x1b9)]*_0x4c40f0[_0x5da1ab(0x1f0)]:_0x4c40f0[_0x5da1ab(0x1b9)],'price':_0x4c40f0[_0x5da1ab(0x1f0)]});const _0x48393a=_0x2355d7==_0x5da1ab(0x19c)?config[_0x5da1ab(0x1e8)]?String['fromCodePoint']('0x'+config[_0x5da1ab(0x1e8)])+'\x20':'':config[_0x5da1ab(0x1f2)]?String[_0x5da1ab(0x212)]('0x'+config['emojibuy'])+'\x20':'',_0x33b48b=_0xa4c710=='market'?'Market':config[_0x5da1ab(0x21c)]=='limit-high'?'Limit\x20(high-margin)':_0x5da1ab(0x1de);if(_0xa4c710==_0x5da1ab(0x211))logHistory('order',''+_0x48393a+_0x33b48b+_0x5da1ab(0x220)+_0x2a90a6+'\x20'+_0x2355d7+'\x20#'+formatResult(_0x4c40f0[_0x5da1ab(0x1b9)],0x8)+'\x20@'+formatResult(_0x4c40f0[_0x5da1ab(0x1f0)],0x8));else logHistory(_0x5da1ab(0x202),''+_0x48393a+_0x33b48b+_0x5da1ab(0x220)+_0x2a90a6+'\x20'+_0x2355d7+'\x20#'+formatResult(_0x4c40f0[_0x5da1ab(0x21b)],0x8)+'\x20@'+formatResult(_0x4c40f0[_0x5da1ab(0x1f0)],0x8));_0x4c40f0['coin']=_0xe13a1a[_0x5da1ab(0x204)],await updateCoinResults(_0x4c40f0);if(config[_0x5da1ab(0x1e2)]!=0x0){let _0x2b9933=null;if(cooldownTracker['length']==config[_0x5da1ab(0x1e2)]-0x1)_0x2b9933=cooldownTracker['shift']();const _0x2470ee=getTimeStamp();cooldownTracker[_0x5da1ab(0x218)](_0x2470ee);if(_0x2b9933){const _0x1ab90e=fns[_0x5da1ab(0x226)](new Date(_0x2470ee),new Date(_0x2b9933));_0x1ab90e<cooldownInterval&&(logHistory(_0x5da1ab(0x233),_0x5da1ab(0x27c)+config[_0x5da1ab(0x1e2)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5da1ab(0x279)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1a2c8f){if(_0x1a2c8f['toString']()[_0x5da1ab(0x24d)](_0x5da1ab(0x288)))logHistory(_0x5da1ab(0x233),_0x5da1ab(0x1f1)+_0x2a90a6);else{if(_0x1a2c8f[_0x5da1ab(0x1f7)]()['includes'](_0x5da1ab(0x260)))logHistory(_0x5da1ab(0x233),_0x5da1ab(0x1e1)+_0x2a90a6);else await handleError(_0x1a2c8f,_0x5da1ab(0x265));}}}if(lastOrders[_0x5da1ab(0x20b)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5da1ab(0x22c)]&&(config[_0x5da1ab(0x21c)]==_0x5da1ab(0x211)?logHistory(_0x5da1ab(0x233),_0x5da1ab(0x1c5)):logHistory(_0x5da1ab(0x233),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config['headless']&&logHistory(_0x5da1ab(0x233),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x14a4f7,_0x4b0742,_0x66f94c=''){const _0x52a44a=_0xeb8276;let _0x2aa129={'time':getTimeStamp(),'type':_0x14a4f7,'event':_0x4b0742,'botname':config['botname'],'showname':config['showname']};dbLogs[_0x52a44a(0x28b)]('logs')[_0x52a44a(0x218)](_0x2aa129)[_0x52a44a(0x192)]();if(_0x66f94c=='')_0x66f94c=_0x4b0742;proxyEmit(_0x52a44a(0x1d3),{'log':_0x2aa129,'summary':_0x66f94c}),process['send']({'telegram':_0x2aa129}),logging(''+_0x2aa129[_0x52a44a(0x1d3)]);}function emitHistory(_0x4d8663={}){const _0x2c494e=_0xeb8276;Object[_0x2c494e(0x1ed)](_0x4d8663)[_0x2c494e(0x20b)]==0x0&&(_0x4d8663={'type':[_0x2c494e(0x202),_0x2c494e(0x1d3)],'event':'','page':0x1});if(_0x4d8663[_0x2c494e(0x251)][_0x2c494e(0x24d)]('event'))_0x4d8663[_0x2c494e(0x251)]['splice'](_0x4d8663[_0x2c494e(0x251)]['indexOf'](_0x2c494e(0x1d3)),0x1,'error',_0x2c494e(0x245));if(dbLogs[_0x2c494e(0x1af)](_0x2c494e(0x1a4))['value']()){let _0x5b0fbd=dbLogs['get'](_0x2c494e(0x1a4))[_0x2c494e(0x28a)](_0x2617ba=>{const _0x345f62=_0x2c494e;if(_0x4d8663['type'][_0x345f62(0x20b)]==0x0)return![];else return _0x4d8663[_0x345f62(0x251)]['includes'](_0x2617ba[_0x345f62(0x251)]);})[_0x2c494e(0x28a)](_0xa7ea37=>{const _0x21a078=_0x2c494e;if(_0x4d8663[_0x21a078(0x1d3)]=='')return!![];else return _0xa7ea37[_0x21a078(0x1d3)][_0x21a078(0x193)]()['includes'](_0x4d8663[_0x21a078(0x1d3)][_0x21a078(0x193)]());})['sortBy']('time'),_0x163b8f=_0x5b0fbd[_0x2c494e(0x24e)]()[_0x2c494e(0x20b)];_0x5b0fbd=_0x5b0fbd[_0x2c494e(0x1b4)]()[_0x2c494e(0x263)]((_0x4d8663[_0x2c494e(0x236)]-0x1)*logPageSize,_0x4d8663['page']*logPageSize-0x1)[_0x2c494e(0x1b4)]()[_0x2c494e(0x24e)](),proxyEmit('event-history',{'logs':_0x5b0fbd,'total':_0x163b8f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x235dcb){const _0x330de4=_0xeb8276,_0x1ceb09=new Date()[_0x330de4(0x18d)]();if(!lastBotPause)lastBotPause=new Date()[_0x330de4(0x18d)](),consecutivePauses=0x1;else{if(_0x1ceb09-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x330de4(0x1f9)]({'stop':_0x330de4(0x1bf)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x330de4(0x18d)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x330de4(0x233),_0x330de4(0x213)+consecutivePauses+')'),await sleep(_0x235dcb),botPaused=![],reset();}}async function handleError(_0x1537de,_0xf9cbdf,_0x4330dc=''){const _0x5899e0=_0xeb8276;if(_0x1537de['toString']()[_0x5899e0(0x24d)]('DDoSProtection'))logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x283)),await pauseBot(pauseBotInterval);else{if(_0x1537de[_0x5899e0(0x1f7)]()[_0x5899e0(0x24d)](_0x5899e0(0x1ab)))logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x22d)),await pauseBot(pauseBotInterval);else{if(_0x1537de[_0x5899e0(0x1f7)]()[_0x5899e0(0x24d)](_0x5899e0(0x200)))logHistory(_0x5899e0(0x233),_0xf9cbdf+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x1537de['toString']()[_0x5899e0(0x24d)](_0x5899e0(0x1a9)))logHistory('error',_0xf9cbdf+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x5899e0(0x233),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x5899e0(0x206)});else{if(_0x1537de[_0x5899e0(0x1f7)]()['includes'](_0x5899e0(0x1f3)))logHistory('error',_0xf9cbdf+_0x5899e0(0x22e)),logHistory(_0x5899e0(0x233),_0x5899e0(0x290)),process['send']({'stop':_0x5899e0(0x206)});else{if(_0x1537de[_0x5899e0(0x1f7)]()[_0x5899e0(0x24d)](_0x5899e0(0x1b5)))logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x277)),logHistory(_0x5899e0(0x233),_0x5899e0(0x290)),process['send']({'stop':_0x5899e0(0x206)});else{if(_0x1537de['toString']()[_0x5899e0(0x24d)](_0x5899e0(0x26d)))logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x190)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5899e0(0x1f9)]({'stop':_0x5899e0(0x206)});else{if(_0x1537de[_0x5899e0(0x1f7)]()[_0x5899e0(0x24d)]('InvalidNonce'))logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x223)),await pauseBot(pauseBotInterval),process[_0x5899e0(0x1f9)]({'stop':_0x5899e0(0x1bf)});else _0x1537de['toString']()[_0x5899e0(0x24d)](_0x5899e0(0x264))?logHistory(_0x5899e0(0x233),_0xf9cbdf+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x5899e0(0x233),_0xf9cbdf+_0x5899e0(0x230)),logging(_0xf9cbdf+_0x5899e0(0x21e),_0x1537de),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x280da6,_0x2a78c7){return parseFloat(_0x280da6['toFixed'](_0x2a78c7));}function logging(_0x579a38,_0x288512=''){const _0x4f3199=_0xeb8276;if(config['showname'])console[_0x4f3199(0x24a)](getTimeStamp()+':\x20'+config[_0x4f3199(0x28f)]+'\x20>\x20'+_0x579a38,_0x288512);else console[_0x4f3199(0x24a)](getTimeStamp()+_0x4f3199(0x215)+botID+_0x4f3199(0x1dd)+_0x579a38,_0x288512);}function getServerTime(){const _0x1f0ab2=_0xeb8276,_0x280cd9=new Date();return _0x280cd9[_0x1f0ab2(0x203)]()+'/'+(_0x280cd9[_0x1f0ab2(0x1ec)]()+0x1)[_0x1f0ab2(0x1f7)]()[_0x1f0ab2(0x25e)](0x2,'0')+'/'+_0x280cd9[_0x1f0ab2(0x1da)]()[_0x1f0ab2(0x1f7)]()[_0x1f0ab2(0x25e)](0x2,'0')+'\x20'+_0x280cd9['getHours']()[_0x1f0ab2(0x1f7)]()[_0x1f0ab2(0x25e)](0x2,'0')+':'+_0x280cd9[_0x1f0ab2(0x1bd)]()[_0x1f0ab2(0x1f7)]()[_0x1f0ab2(0x25e)](0x2,'0')+':'+_0x280cd9[_0x1f0ab2(0x229)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5526e6=_0xeb8276,_0x111a86=shiftedTime();return _0x111a86[_0x5526e6(0x203)]()+'/'+(_0x111a86[_0x5526e6(0x1ec)]()+0x1)[_0x5526e6(0x1f7)]()['padStart'](0x2,'0')+'/'+_0x111a86[_0x5526e6(0x1da)]()[_0x5526e6(0x1f7)]()[_0x5526e6(0x25e)](0x2,'0')+'\x20'+_0x111a86[_0x5526e6(0x254)]()[_0x5526e6(0x1f7)]()[_0x5526e6(0x25e)](0x2,'0')+':'+_0x111a86[_0x5526e6(0x1bd)]()['toString']()[_0x5526e6(0x25e)](0x2,'0')+':'+_0x111a86[_0x5526e6(0x229)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x27dbe5=_0xeb8276,_0x58c6b2=shiftedTime();return _0x58c6b2[_0x27dbe5(0x203)]()+'/'+(_0x58c6b2['getMonth']()+0x1)['toString']()[_0x27dbe5(0x25e)](0x2,'0')+'/'+_0x58c6b2['getDate']()[_0x27dbe5(0x1f7)]()['padStart'](0x2,'0');}function getHour(){const _0x4190b4=_0xeb8276,_0x12cc2a=shiftedTime();return _0x12cc2a[_0x4190b4(0x254)]()[_0x4190b4(0x1f7)]()['padStart'](0x2,'0');}function sleep(_0x278516){return new Promise(_0x32904a=>setTimeout(_0x32904a,_0x278516));}function shiftedTime(){const _0x58edcd=_0xeb8276,_0x514b92=new Date();let _0x4649d8=_0x514b92;if(config&&config[_0x58edcd(0x1ad)]!==0x0)_0x4649d8=fns['add'](_0x514b92,{'hours':config[_0x58edcd(0x1ad)]});return _0x4649d8;}