const _0x2b83c0=_0x15b8;(function(_0xb8b7dd,_0x503e92){const _0x5eba40=_0x15b8,_0x508ca3=_0xb8b7dd();while(!![]){try{const _0x44d84e=-parseInt(_0x5eba40(0x1d8))/0x1+-parseInt(_0x5eba40(0x1fc))/0x2*(parseInt(_0x5eba40(0x235))/0x3)+parseInt(_0x5eba40(0x208))/0x4*(-parseInt(_0x5eba40(0x21c))/0x5)+-parseInt(_0x5eba40(0x19f))/0x6+-parseInt(_0x5eba40(0x23c))/0x7+-parseInt(_0x5eba40(0x1c9))/0x8+parseInt(_0x5eba40(0x1e8))/0x9;if(_0x44d84e===_0x503e92)break;else _0x508ca3['push'](_0x508ca3['shift']());}catch(_0x53f5e3){_0x508ca3['push'](_0x508ca3['shift']());}}}(_0x54c3,0xd65d2));const _0x1132dd=function(){let _0x1534fb=!![];return function(_0x4b2e75,_0x4bd144){const _0x5c454b=_0x1534fb?function(){const _0x5644d4=_0x15b8;if(_0x4bd144){const _0x250ae4=_0x4bd144[_0x5644d4(0x243)](_0x4b2e75,arguments);return _0x4bd144=null,_0x250ae4;}}:function(){};return _0x1534fb=![],_0x5c454b;};}(),_0x3276f6=_0x1132dd(this,function(){const _0x326ba3=_0x15b8;return _0x3276f6[_0x326ba3(0x13d)]()[_0x326ba3(0x12f)]('(((.+)+)+)+$')[_0x326ba3(0x13d)]()[_0x326ba3(0x1d3)](_0x3276f6)['search'](_0x326ba3(0x1a8));});_0x3276f6();'use strict';const ccxt=require(_0x2b83c0(0x22d))['pro'],low=require('lowdb'),FileSync=require(_0x2b83c0(0x1af)),fs=require('fs'),fns=require(_0x2b83c0(0x167)),Crypt=require(_0x2b83c0(0x130))[_0x2b83c0(0x262)],util=require(_0x2b83c0(0x231)),argv=require('yargs/yargs')(process['argv'][_0x2b83c0(0x173)](0x2))[_0x2b83c0(0x216)];let exchange;global[_0x2b83c0(0x20c)]={},global[_0x2b83c0(0x21e)]={};const exceptions={'binance':['DAI/',_0x2b83c0(0x227),_0x2b83c0(0x120),_0x2b83c0(0x15e),_0x2b83c0(0x1da)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2b83c0(0x22a)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2b83c0(0x202)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require('./version.json')['version'],botID=process[_0x2b83c0(0x216)][0x2]||_0x2b83c0(0x1f1),pattern=/^[0-9]{3}$/;!pattern[_0x2b83c0(0x11e)](botID)&&(console[_0x2b83c0(0x162)](_0x2b83c0(0x1cf)+botID+_0x2b83c0(0x1d2)),killBot());const userID=process[_0x2b83c0(0x216)][0x3]||'',configpath=userID?_0x2b83c0(0x196)+userID+'/':_0x2b83c0(0x196),logspath=userID?_0x2b83c0(0x218)+userID+'/':_0x2b83c0(0x218),loggerfile=fs[_0x2b83c0(0x118)](logspath+_0x2b83c0(0x244),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x2b83c0(0x186)](configpath);!fs[_0x2b83c0(0x182)](logspath)&&fs[_0x2b83c0(0x186)](logspath);function _0x54c3(){const _0x2b867f=['\x20|\x20','loading-canceled','coin-loading-progress','threshold','precision','has','Failed\x20to\x20load\x20coin\x20data\x20for\x20','BUSD','min','configuration-stored','NANO/','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','assign','log','bb-secure.json','canceled','yyyy-MM-dd\x27T\x27HH:mm:ss','string','date-fns','fiat','showname','findIndex','toLowerCase','event','\x20|\x20Error\x20details:\x20','writeFile','eur','buy','getMinutes','number','slice','%\x20\x0a','amount','getMonth','InvalidNonce','/USD','padEnd','getTime','configuration','distribution','includes','symbols','replace','AuthenticationError','final','existsSync','Net\x20effect','BNB','-results.json','mkdirSync','max','usd','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','initial','watchTrades','status','kill','placeOrder()','\x20minutes\x20-\x20','indexOf','Initiating\x20exchange\x20reload','valid','clientOrderId','delta','/EUR','./config/','createOrder','progress','join','length','RSA-OAEP','data','storeHeadless','round','10238940HyEBEQ','sortBy','bot','rightTxt','\x20:\x20','-------------------------------\x0a','buys','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','net-basecoin','(((.+)+)+)+$','ETH','0\x20-\x20EXECUTION:\x20','decrypt','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','LOCKED','fee','lowdb/adapters/FileSync','exec','<b>Bot\x20','Binance','liquidity','success','emojibuy','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','trade','Manual\x20balancing\x20required','\x20not\x20available','emitHistory','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','\x20API\x20secret\x20is\x20invalid','settings','args','Limit\x20(low-margin)','yyyy/MM/dd','Net\x20effect\x20(','MIN_NOTIONAL','***','market','uncaughtException','startprice','error','\x20API\x20blocked\x20(DDoS\x20protection)','10006712tNsjZJ','cloneDeep','headless','cancel','Market','2\x20-\x20Orders\x20unlocked','Error:\x20Invalid\x20argument\x20','\x20API\x20key\x20is\x20invalid','random',',\x20must\x20be\x20a\x203\x20digit\x20number','constructor','2\x20-\x20FILLED\x20known\x20order:\x20','write','add','botID','1460048bNBINS','orderId','YOYOW/','Unfilled\x20order(s)\x20canceled\x20after\x20','substring','full','entries','sell','\x20-\x20bot\x20not\x20started','restart','price','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','concat','fromCodePoint','get','No\x20more\x20open\x20orders\x20-\x20','85906908pYRlqD','type','getFullYear','open','botname','API-key\x20format\x20invalid','target','getDate','map','001','datetime','differenceInSeconds','fetchBalance','simple','total','1\x20-\x20Validate\x20orders:\x20','coin','bb-settings.json','closed','value','1285318XVPSDN','getHours','close','EUR','1\x20-\x20Unlock\x20orders','Executing\x20exchange\x20reload','UNLOCKED','customId','fees','toFixed','orderstatus','ongoing','4KIqwld','<pre>','cost','balancing\x20resumes\x20when\x20cooldown\x20ends','ticker','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','2\x20-\x20FILLED\x20unknown\x20order:\x20','split','enabled','symbol','showConfig','\x20not\x20responding','currency','\x20|\x20lock\x20orders:\x20','argv','exchange','./logs/','limit','cancelLoading','2.3.5','8215645rSTaCh','timeout','change','remainingSymbols','fetchClosedOrders','excluded','Order\x20filled:\x20','Order(s)\x20filled\x20-\x20','defaults','side','getSeconds','HOT/BTC','debug','sort','freeze','splice','padStart','ccxt','format','\x20exchange','cooldown','util','\x20hour','order','net-fiat','6jxDIpu','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','performance','placeOrder','balancing\x20resumed','breakeven','\x20value','9249478uMWFxx','ORDERS.UNLOCKED','cancelOrders()','date','parse','shift','message','apply','/output-000.log','2\x20-\x20Validate\x20orders:\x20','Pausing\x20for\x20','USD','\x20orders\x20in\x20less\x20than\x20','milliseconds','no\x20open\x20orders','\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','USDT','loadMarkets','realized','getStartingBalances','sendPortfolioTelegram','-config.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','apiSecret','coins','startnumber','keys','2.5.0','1\x20-\x20Handle\x20open\x20orders','BNB/','push','\x20>\x20','\x20portfolio:</b>\x20\x0a\x0a','find','ask','limit-high','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Crypt','.json','\x20minutes','offset','event-history','logs','limit-low','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','filter','Net\x20','reverse','BTC','cancelOrder','filled','netoffset','loadSymbols()','watchOrders','toUpperCase','sha256','timestamp','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','stringify','createWriteStream','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','none','page','emojisell','ORDERS.UNLOCKING','test','last','XEM/BUSD','1\x20-\x20FILLED:\x20','abs','Order\x20amount\x20is\x20invalid:\x20','bot-','forEach','function','RequestTimeout','set','average','sells','recreateCoinResults()','DDoSProtection','timer:','percentage','search','hybrid-crypto-js','Executed\x20','warning','fetchTickers','basecoin','send','change24h','time',':\x20Bot\x20','fetchTicker','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','parseISO','remove','toString','bid','UNLOCKING','\x20>\x20[DEBUG]\x20','ordertype','balances','fetchOpenOrders','************','ORDERS.LOCKED','Order(s)\x20validated\x20-\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','changes','startdate','Order(s)\x20not\x20validated\x20after\x20','limits','getCoins()','apiKey','version','portfolio','getCoinNumber()','storeConfiguration','leftTxt','timeshift'];_0x54c3=function(){return _0x2b867f;};return _0x54c3();}const configfile=configpath+_0x2b83c0(0x124)+botID+_0x2b83c0(0x252),logfile=configpath+_0x2b83c0(0x124)+botID+'-events.json',performancefile=configpath+_0x2b83c0(0x124)+botID+'-performance.json',coinresultsfile=configpath+_0x2b83c0(0x124)+botID+_0x2b83c0(0x185),settingsfile=configpath+_0x2b83c0(0x1f9),securefile=configpath+_0x2b83c0(0x163),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x2b83c0(0x1d5)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2b83c0(0x224)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2b83c0(0x224)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2b83c0(0x224)]({'coins':[],'version':serverversion})[_0x2b83c0(0x1d5)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2b83c0(0x274),'rsaStandard':_0x2b83c0(0x19b)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x28a8df=>{const _0x1687de=_0x2b83c0;console[_0x1687de(0x162)](_0x28a8df);},'simple':_0x9e411c=>{const _0x35dc95=_0x2b83c0;console[_0x35dc95(0x162)](_0x9e411c),loggerfile['write'](util[_0x35dc95(0x22e)](_0x9e411c)+'\x0a');},'full':async(_0xb3619b,_0x3c2932='')=>{const _0x13a945=_0x2b83c0;let _0x4f3cfc;if(config[_0x13a945(0x169)])_0x4f3cfc=getTimeStamp()+':\x20'+config[_0x13a945(0x1ec)]+_0x13a945(0x25c)+_0xb3619b;else _0x4f3cfc=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0xb3619b;console['log'](_0x4f3cfc),loggerfile[_0x13a945(0x1d5)](util[_0x13a945(0x22e)](_0x4f3cfc)+'\x0a'),_0x3c2932&&(console['log'](_0x3c2932),loggerfile[_0x13a945(0x1d5)](util['format'](_0x3c2932)+'\x0a'));},'debug':async(_0x407acc,_0x4f4d58='')=>{const _0x4c3b89=_0x2b83c0;let _0x3a8687;if(config[_0x4c3b89(0x169)])_0x3a8687=getTimeStamp()+':\x20'+config['botname']+_0x4c3b89(0x140)+_0x407acc;else _0x3a8687=getTimeStamp()+_0x4c3b89(0x138)+botID+'\x20>\x20[DEBUG]\x20'+_0x407acc;if(debugging)console[_0x4c3b89(0x162)](_0x3a8687);loggerfile[_0x4c3b89(0x1d5)](util[_0x4c3b89(0x22e)](_0x3a8687)+'\x0a');if(_0x4f4d58){if(debugging)console[_0x4c3b89(0x162)](_0x4f4d58);loggerfile[_0x4c3b89(0x1d5)](util[_0x4c3b89(0x22e)](_0x4f4d58)+'\x0a');}}};process['on'](_0x2b83c0(0x1c5),function(_0xfb682e){const _0x4f96d8=_0x2b83c0;logger[_0x4f96d8(0x1f5)](_0xfb682e);});settings['timeshift']!=config[_0x2b83c0(0x153)]&&updateTimeshift(settings[_0x2b83c0(0x153)]);process['send']({'started':'running'},_0x2cdb97=>{}),initializeProcessListeners();function proxyEmit(_0x2f11d1,_0x578343=null){process['send']({'function':_0x2f11d1,'args':_0x578343},_0x227e94=>{});}function initializeProcessListeners(){const _0x229fab=_0x2b83c0;process['on'](_0x229fab(0x242),_0x16dc19=>{const _0x1af69f=_0x229fab;switch(Object[_0x1af69f(0x257)](_0x16dc19)[0x0]){case _0x1af69f(0x153):_0x16dc19[_0x1af69f(0x153)]!=undefined&&(settings[_0x1af69f(0x153)]=_0x16dc19['timeshift'],updateTimeshift(settings[_0x1af69f(0x153)]));break;case'function':switch(_0x16dc19[_0x1af69f(0x126)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x1af69f(0x1ba):emitHistory(_0x16dc19[_0x1af69f(0x1be)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x16dc19[_0x1af69f(0x1be)]);break;case'getPortfolio':getPortfolio(_0x16dc19['args']);break;case _0x1af69f(0x151):storeConfiguration(_0x16dc19[_0x1af69f(0x1be)]);break;case _0x1af69f(0x19d):storeHeadless(_0x16dc19[_0x1af69f(0x1be)]);break;case _0x1af69f(0x250):getStartingBalances(getNormalizedPerformance());break;case _0x1af69f(0x238):placeOrder(_0x16dc19[_0x1af69f(0x1be)]);break;case _0x1af69f(0x21a):cancelLoading();break;case _0x1af69f(0x212):showConfig();break;case _0x1af69f(0x251):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x5cb64b=null,_0x26d4f4=![]){const _0x3b1c1d=_0x2b83c0;logger[_0x3b1c1d(0x228)]('Reset\x20|\x20'+(_0x5cb64b!=null)+_0x3b1c1d(0x154)+_0x26d4f4);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x26d4f4)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0x3b1c1d(0x14d)]!=''&&config[_0x3b1c1d(0x14d)]!=_0x3b1c1d(0x1c3)){await initExchange();let _0x3f982f=![];_0x3f982f=await loadSymbols();if(_0x3f982f){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x5cb64b),exchangeStopped=![];if(lastOrders['length']==0x0&&allOpenOrders[_0x3b1c1d(0x19a)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}function _0x15b8(_0x3f5acb,_0x54c66f){const _0x4f0a6e=_0x54c3();return _0x15b8=function(_0x3276f6,_0x1132dd){_0x3276f6=_0x3276f6-0x116;let _0x54c3e6=_0x4f0a6e[_0x3276f6];return _0x54c3e6;},_0x15b8(_0x3f5acb,_0x54c66f);}async function stopExchange(){const _0x139e17=_0x2b83c0;exchangeStopped=!![],await exchange[_0x139e17(0x1fe)]();}async function reloadExchange(){const _0x2b25c3=_0x2b83c0;logger[_0x2b25c3(0x228)](_0x2b25c3(0x191));while(lockOrders!=ORDERS[_0x2b25c3(0x202)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2b25c3(0x228)](_0x2b25c3(0x201)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xd43463=config[_0x2b83c0(0x217)],_0xe17e9a=config['apiKey'],_0x330099=config[_0x2b83c0(0x254)]){const _0x48e5a1=_0x2b83c0;exchange&&await stopExchange();!supportedExchanges()['includes'](_0xd43463)&&(logger[_0x48e5a1(0x1dd)]('Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0xd43463+_0x48e5a1(0x22f)),killBot());const _0x1be4c8=ccxt[_0xd43463[_0x48e5a1(0x16b)]()];exchange=new _0x1be4c8({'apiKey':_0xe17e9a,'secret':_0x330099,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x15dbb9=_0x2b83c0;let _0x3427e4=config[_0x15dbb9(0x134)]==_0x15dbb9(0x1a9)?_0x15dbb9(0x1a9):_0x15dbb9(0x26d),_0x4c4c20=!allSymbols[_0x15dbb9(0x17d)](_0x3427e4+_0x15dbb9(0x178))?_0x15dbb9(0x24d):'USD',_0x2bcab3=!allSymbols['includes'](_0x3427e4+_0x15dbb9(0x195))?_0x4c4c20:_0x15dbb9(0x1ff);stablecoins={'eur':{'coin':''+_0x3427e4+_0x2bcab3,'symbol':_0x3427e4+'/'+_0x2bcab3},'usd':{'coin':''+_0x3427e4+_0x4c4c20,'symbol':_0x3427e4+'/'+_0x4c4c20}};}async function initwsCcxt(_0x4807ca){const _0x51119d=_0x2b83c0;_0x4807ca==null&&(_0x4807ca=[],currentCoins[_0x51119d(0x125)](_0x2fc65f=>{const _0x30e350=_0x51119d;if(_0x2fc65f[_0x30e350(0x1f8)]!=config['basecoin'])_0x4807ca[_0x30e350(0x25b)](_0x2fc65f[_0x30e350(0x211)]);}));if(!_0x4807ca['includes'](stablecoins[_0x51119d(0x16f)][_0x51119d(0x211)]))_0x4807ca[_0x51119d(0x25b)](stablecoins[_0x51119d(0x16f)][_0x51119d(0x211)]);if(!_0x4807ca[_0x51119d(0x17d)](stablecoins[_0x51119d(0x188)][_0x51119d(0x211)]))_0x4807ca[_0x51119d(0x25b)](stablecoins[_0x51119d(0x188)][_0x51119d(0x211)]);if(!_0x4807ca[_0x51119d(0x17d)](_0x51119d(0x25a)+config[_0x51119d(0x134)]))_0x4807ca[_0x51119d(0x25b)](_0x51119d(0x25a)+config[_0x51119d(0x134)]);loadCoins(_0x4807ca);const _0x42786b=async _0x31fd68=>{const _0x3ac7e6=_0x51119d,_0x1a0161=await exchange[_0x3ac7e6(0x139)](_0x31fd68);global[_0x3ac7e6(0x20c)][noslash(_0x1a0161[_0x3ac7e6(0x211)])]=_0x1a0161[_0x3ac7e6(0x11f)];while(!![]){if(!botPaused)try{const _0x1491f9=await exchange[_0x3ac7e6(0x18b)](_0x31fd68);global['ticker'][noslash(_0x1491f9[0x0][_0x3ac7e6(0x211)])]=_0x1491f9[0x0]['price'],await sleep(0x3e8);}catch(_0x3bdcf6){if(!exchangeStopped)await handleError(_0x3bdcf6,'watchTrades',_0x31fd68);}else await sleep(0x3e8);}},_0x224aae=async _0x5459a3=>{const _0x32cbae=_0x51119d;while(!![]){if(!botPaused)try{const _0x420023=await exchange[_0x32cbae(0x139)](_0x5459a3);global[_0x32cbae(0x21e)][_0x420023[_0x32cbae(0x211)]]=_0x420023[_0x32cbae(0x12e)],await sleep(0x2710);}catch(_0x13a702){if(!exchangeStopped)await handleError(_0x13a702,_0x32cbae(0x133),_0x5459a3);}else await sleep(0x3e8);}},_0xe5360b=async()=>{const _0x315bb0=_0x51119d;while(!![]){if(!botPaused)try{const _0x270ad5=await exchange['watchOrders']();_0x270ad5['forEach'](_0x552262=>{updateNumberCoinsCcxt(_0x552262);});}catch(_0x586f34){if(!exchangeStopped)await handleError(_0x586f34,_0x315bb0(0x272));}else await sleep(0x3e8);}};_0x4807ca[_0x51119d(0x125)](async _0x4b3b7e=>{_0x42786b(_0x4b3b7e),_0x224aae(_0x4b3b7e);}),!wsEventsSet&&(wsEventsSet=!![],_0xe5360b());}async function loadSymbols(_0x44151e=config[_0x2b83c0(0x217)]){const _0x36d543=_0x2b83c0;if(allSymbols)return!![];let _0x47a4a8=![];try{markets=await exchange[_0x36d543(0x24e)](),allSymbols=exchange[_0x36d543(0x17e)][_0x36d543(0x26a)](_0x1e4248=>{const _0x22aaef=_0x36d543;let _0x491eca=![];const _0x56d129=exceptions[_0x44151e[_0x22aaef(0x16b)]()]||[];return _0x56d129[_0x22aaef(0x125)](_0x5ea497=>{const _0x3dcff9=_0x22aaef;if(_0x1e4248[_0x3dcff9(0x17d)](_0x5ea497))_0x491eca=!![];}),!_0x491eca;}),_0x47a4a8=!![];}catch(_0xeef759){_0x47a4a8=![],handleError(_0xeef759,_0x36d543(0x271));}return _0x47a4a8;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1e457d=getNormalizedPerformance();emitPerformance(_0x1e457d),await getStartingBalances(_0x1e457d);}async function toggleBotMode(){const _0x5d0255=_0x2b83c0;let _0x11a00a=dbConfig[_0x5d0255(0x1e6)](_0x5d0255(0x1a1))[_0x5d0255(0x25e)]({'botID':botID})['value']();if(_0x11a00a){const _0x3cdeaa=!_0x11a00a[_0x5d0255(0x1cb)];dbConfig[_0x5d0255(0x1e6)](_0x5d0255(0x1a1))[_0x5d0255(0x25e)]({'botID':botID})[_0x5d0255(0x161)]({'headless':_0x3cdeaa})[_0x5d0255(0x1d5)](),config[_0x5d0255(0x1cb)]=_0x3cdeaa,proxyEmit(_0x5d0255(0x17b),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x2c8817=>{});}async function loadCoins(_0x155ed3){const _0x5e44f1=_0x2b83c0;let _0x48408d,_0x49a0ce=0x0;loading[_0x5e44f1(0x21f)]=[];let _0x1bac40=0x0;_0x155ed3[_0x5e44f1(0x125)](_0x12a90e=>{const _0x26cc1f=_0x5e44f1;loading[_0x26cc1f(0x21f)][_0x26cc1f(0x25b)](_0x12a90e);}),loadingCanceled=![];let _0x3ed2b7=![];while(_0x48408d!=_0x155ed3[_0x5e44f1(0x19a)]){_0x48408d=0x0,_0x155ed3[_0x5e44f1(0x125)](_0x49086c=>{const _0x29972e=_0x5e44f1;global[_0x29972e(0x20c)][noslash(_0x49086c)]&&(loading[_0x29972e(0x21f)]=loading[_0x29972e(0x21f)][_0x29972e(0x26a)](_0x59d472=>_0x59d472!=_0x49086c),_0x48408d++);}),loading['progress']=Math[_0x5e44f1(0x19e)](_0x48408d/_0x155ed3[_0x5e44f1(0x19a)]*0x64);loading[_0x5e44f1(0x198)]!=0x64&&(_0x1bac40>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1bac40>0x78*0x5&&!_0x3ed2b7&&(loading['cancel']=!![],emitLoadingProgress(),_0x3ed2b7=!![],logHistory('error',_0x5e44f1(0x15a)+loading[_0x5e44f1(0x21f)][_0x5e44f1(0x199)](',\x20')+_0x5e44f1(0x1e0)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x5e44f1(0x269)),pidCoinReloading=setTimeout(()=>{const _0x4be247=_0x5e44f1;process['send']({'stop':_0x4be247(0x1e1)},_0x1aefe0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5e44f1(0x1cc)]=!![],emitLoadingProgress();break;}else _0x48408d!=_0x49a0ce&&(_0x49a0ce=_0x48408d,emitLoadingProgress()),_0x1bac40++,await sleep(0xc8);}_0x48408d==_0x155ed3[_0x5e44f1(0x19a)]&&(coinsLoaded=!![],_0x3ed2b7&&logHistory(_0x5e44f1(0x1b4),_0x5e44f1(0x236)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5d1aa9=_0x2b83c0;proxyEmit(_0x5d1aa9(0x17b),{...emittedConfiguration(),'configstate':_0x5d1aa9(0x155)});}function emitLoadingProgress(){const _0x277830=_0x2b83c0;proxyEmit(_0x277830(0x156),loading);}async function getFiat(){const _0x45bfcb=_0x2b83c0;let _0x201773=global[_0x45bfcb(0x20c)][stablecoins['eur'][_0x45bfcb(0x1f8)]],_0x184312=global[_0x45bfcb(0x20c)][stablecoins['usd'][_0x45bfcb(0x1f8)]];return{'eur':Number(_0x201773),'usd':Number(_0x184312)};}function capitalize(_0x1b7191){const _0x24e21c=_0x2b83c0;return _0x1b7191[_0x24e21c(0x1dc)](0x0,0x1)[_0x24e21c(0x273)]()+_0x1b7191[_0x24e21c(0x1dc)](0x1);}function supportedExchanges(){const _0x2f1c82=_0x2b83c0,_0x177291=['ws',_0x2f1c82(0x133),'fetchTicker',_0x2f1c82(0x18b),_0x2f1c82(0x272),_0x2f1c82(0x26e),_0x2f1c82(0x197),'fetchOpenOrders','fetchClosedOrders',_0x2f1c82(0x1f4)];let _0x6b8fb4=[];const _0x233de7=ccxt['exchanges'][_0x2f1c82(0x1f0)](_0x285d4f=>new ccxt[_0x285d4f]())[_0x2f1c82(0x26a)](_0x415dd7=>_0x415dd7[_0x2f1c82(0x159)]['ws']);return _0x233de7['forEach'](_0x12883e=>{const _0x400b14=_0x2f1c82;let _0x342cb6=0x0;_0x177291[_0x400b14(0x125)](_0x17c0a3=>{const _0x4f11c4=_0x400b14;_0x17c0a3 in _0x12883e[_0x4f11c4(0x159)]&&_0x12883e[_0x4f11c4(0x159)][_0x17c0a3]&&_0x342cb6++;}),_0x342cb6==_0x177291[_0x400b14(0x19a)]&&_0x6b8fb4['push'](capitalize(_0x12883e['id']));}),_0x6b8fb4;}function setStartDatePerformance(){const _0x3c8ba0=_0x2b83c0;if(config&&config[_0x3c8ba0(0x1b3)][0x0]['changes'][_0x3c8ba0(0x19a)]!=0x0){const _0x5885b5=config[_0x3c8ba0(0x1b3)][0x0][_0x3c8ba0(0x148)];dbPerformance[_0x3c8ba0(0x1e6)](_0x3c8ba0(0x19c))['find']({'date':config['startdate']})['assign']({'coins':_0x5885b5})[_0x3c8ba0(0x1d5)]();}}async function recreateCoinResults(){const _0x44ef27=_0x2b83c0;let _0x2175d6,_0x3de29d=[];try{const _0x4f9761=fns[_0x44ef27(0x22e)](fns[_0x44ef27(0x13b)](config[_0x44ef27(0x149)]['replace'](/\//g,'-')),_0x44ef27(0x165));for(const _0x2ba447 of currentCoins){if(_0x2ba447[_0x44ef27(0x1f8)]!=config['basecoin']){let _0x2ea376=0x0,_0x10fda3,_0x584893;_0x2175d6=await getAllEventOrders(_0x2ba447[_0x44ef27(0x211)]);if(_0x2175d6[_0x44ef27(0x19a)]>0x0)_0x2175d6[_0x44ef27(0x125)](_0x451235=>{const _0x1f400f=_0x44ef27,_0x44ece1=_0x2ba447[_0x1f400f(0x211)][_0x1f400f(0x17d)](config[_0x1f400f(0x134)]+'/');_0x3de29d[_0x1f400f(0x25b)]({'datetime':_0x451235['datetime'],'coin':_0x2ba447[_0x1f400f(0x1f8)],'symbol':_0x2ba447[_0x1f400f(0x211)],'side':_0x451235['side'],'reverse':_0x44ece1,'amount':formatResult(_0x451235['filled'],0x8),'filled':formatResult(_0x451235['filled'],0x8),'price':formatResult(_0x451235[_0x1f400f(0x1e2)],0x8)}),_0x2ea376=_0x451235[_0x1f400f(0x225)]==_0x1f400f(0x170)?_0x2ea376+_0x451235['filled']:_0x2ea376-_0x451235[_0x1f400f(0x26f)];if(!_0x584893)_0x584893=_0x451235[_0x1f400f(0x1e2)];});_0x10fda3=_0x2ba447[_0x44ef27(0x172)]-_0x2ea376;let _0x3d693c;config['liquidity']['forEach'](_0x5ec239=>{const _0x1cd7a4=_0x44ef27;!_0x3d693c&&(_0x3d693c=_0x5ec239[_0x1cd7a4(0x148)][_0x1cd7a4(0x25e)](_0x40557e=>_0x40557e[_0x1cd7a4(0x1f8)]==_0x2ba447[_0x1cd7a4(0x1f8)]),_0x3d693c&&(_0x10fda3=_0x3d693c['number'],_0x584893=_0x3d693c['price']));});let _0x21e507=dbCoinResults[_0x44ef27(0x1e6)](_0x44ef27(0x255))[_0x44ef27(0x25e)]({'coin':_0x2ba447[_0x44ef27(0x1f8)]})[_0x44ef27(0x1fb)]();_0x21e507={'coin':_0x2ba447[_0x44ef27(0x1f8)],'number':_0x10fda3,'breakeven':_0x584893,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x44ef27(0x1e6)](_0x44ef27(0x255))['find']({'coin':_0x2ba447[_0x44ef27(0x1f8)]})['assign'](_0x21e507)['write']();}}_0x3de29d['sort']((_0x3f37ed,_0x4f8b48)=>_0x3f37ed[_0x44ef27(0x1f2)]>_0x4f8b48[_0x44ef27(0x1f2)]?0x1:_0x4f8b48['datetime']>_0x3f37ed[_0x44ef27(0x1f2)]?-0x1:0x0);let _0x3e00e3=0x0;for(let _0x286faa of _0x3de29d){await updateCoinResults(_0x286faa,!![]);}}catch(_0x32c57a){await handleError(_0x32c57a,_0x44ef27(0x12b));}}async function getAllEventOrders(_0x1f8418){const _0x42c89b=_0x2b83c0;let _0x2d2b76=[],_0x1dd353=dbLogs[_0x42c89b(0x1e6)]('logs')[_0x42c89b(0x26a)](_0x53319f=>{const _0x2183cc=_0x42c89b,_0x4d44fd=_0x53319f[_0x2183cc(0x16c)]['toLowerCase']();return _0x4d44fd[_0x2183cc(0x17d)](_0x1f8418['toLowerCase']())&&(_0x4d44fd[_0x2183cc(0x17d)]('market')&&_0x4d44fd[_0x2183cc(0x17d)](_0x2183cc(0x233))||_0x4d44fd[_0x2183cc(0x17d)](_0x2183cc(0x26f))&&_0x4d44fd[_0x2183cc(0x17d)]('order'));})['sortBy']('time')['value']();return _0x1dd353[_0x42c89b(0x125)](_0x2a3a5f=>{const _0x1b1ba4=_0x42c89b,_0x4e08f6=_0x2a3a5f['event'][_0x1b1ba4(0x17d)](_0x1b1ba4(0x1df))?_0x1b1ba4(0x1df):_0x1b1ba4(0x170),_0x4f9c2a=/#([0-9]|\.)+\s/i,_0x5cadbe=Number(_0x4f9c2a[_0x1b1ba4(0x1b0)](_0x2a3a5f[_0x1b1ba4(0x16c)])[0x0][_0x1b1ba4(0x173)](0x1)),_0x41e11a=/@([0-9]|\.)+$/i,_0x5189e7=Number(_0x41e11a[_0x1b1ba4(0x1b0)](_0x2a3a5f[_0x1b1ba4(0x16c)])[0x0]['slice'](0x1));_0x2d2b76[_0x1b1ba4(0x25b)]({'datetime':_0x2a3a5f[_0x1b1ba4(0x137)],'coin':symbolToCoin(_0x1f8418),'symbol':_0x1f8418,'side':_0x4e08f6,'amount':_0x5cadbe,'filled':_0x5cadbe,'price':_0x5189e7});}),_0x2d2b76;}async function getAllOrders(_0x51e465,_0x5bb662){const _0xdf338f=_0x2b83c0;let _0x13f505=[];while(_0x5bb662<exchange[_0xdf338f(0x249)]()){const _0x8d4c01=0x1f4,_0x96ac38=await exchange[_0xdf338f(0x220)](_0x51e465,_0x5bb662,_0x8d4c01);if(_0x96ac38[_0xdf338f(0x19a)])_0x5bb662=_0x96ac38[_0x96ac38[_0xdf338f(0x19a)]-0x1][_0xdf338f(0x275)]+0x1,_0x13f505=_0x13f505[_0xdf338f(0x1e4)](_0x96ac38);else break;}return _0x13f505;}async function validate24hChanges(){const _0x2f8d52=_0x2b83c0;for(const _0x52caf3 of currentCoins){if(_0x52caf3[_0x2f8d52(0x1f8)]!=config[_0x2f8d52(0x134)]){let _0x41c282;_0x52caf3['reverse']?_0x41c282=formatResult((0x1/(global[_0x2f8d52(0x21e)][noslash(_0x52caf3['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x41c282=global[_0x2f8d52(0x21e)][noslash(_0x52caf3['symbol'])],_0x41c282<config[_0x2f8d52(0x136)]&&(logHistory('error',_0x52caf3['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x41c282+'%'),logHistory('error',_0x2f8d52(0x15f)),logHistory(_0x2f8d52(0x1c7),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5db42e,_0x16b1d9){const _0x331b66=_0x2b83c0;if(!_0x5db42e)return!![];const _0x34fd7c=_0x16b1d9[_0x331b66(0x20f)]('.'),_0x3c4a2e=_0x5db42e[_0x331b66(0x20f)]('.');for(var _0x35709c=0x0;_0x35709c<_0x3c4a2e[_0x331b66(0x19a)];_0x35709c++){const _0xd34f10=~~_0x3c4a2e[_0x35709c],_0x453852=~~_0x34fd7c[_0x35709c];if(_0xd34f10<_0x453852)return!![];if(_0xd34f10>_0x453852)return![];}return![];}async function oneTimeMigration(){const _0x760d8f=_0x2b83c0;let _0x2f90b9=dbLogs['get'](_0x760d8f(0x14e))[_0x760d8f(0x1fb)]();if(isOlderVersion(_0x2f90b9,_0x760d8f(0x21b))){let _0x4105f3=[];const _0x3d724d=dbLogs[_0x760d8f(0x1e6)](_0x760d8f(0x267))[_0x760d8f(0x1fb)]();_0x3d724d[_0x760d8f(0x125)](_0x23c7bd=>{const _0x3310bd=_0x760d8f;_0x4105f3['push']({'time':_0x23c7bd['time'],'type':_0x23c7bd['type'],'event':_0x23c7bd[_0x3310bd(0x16c)]});}),dbLogs[_0x760d8f(0x1e6)](_0x760d8f(0x267))['assign'](_0x4105f3)[_0x760d8f(0x1d5)]();}let _0x3c11fe=dbConfig[_0x760d8f(0x1e6)](_0x760d8f(0x14e))[_0x760d8f(0x1fb)]();if(isOlderVersion(_0x3c11fe,_0x760d8f(0x21b))){let _0x5a332d=dbConfig[_0x760d8f(0x1e6)](_0x760d8f(0x1a1))[_0x760d8f(0x25e)]({'botID':botID})[_0x760d8f(0x1fb)]();if(_0x5a332d){let _0x298ae4=[];_0x5a332d[_0x760d8f(0x14f)][_0x760d8f(0x125)](_0x1e5f40=>{const _0x2320ca=_0x760d8f;_0x298ae4[_0x2320ca(0x25b)]({'coin':_0x1e5f40[_0x2320ca(0x1f8)],'number':_0x1e5f40[_0x2320ca(0x256)],'price':_0x1e5f40['startprice']}),delete _0x1e5f40[_0x2320ca(0x256)],delete _0x1e5f40[_0x2320ca(0x1c6)];});if(_0x298ae4[_0x760d8f(0x19a)]!==0x0)fs[_0x760d8f(0x16e)](configbackuppath+('starting-balance-'+botID+_0x760d8f(0x263)),JSON[_0x760d8f(0x117)](_0x298ae4,null,0x4),function(_0x5a04ab){if(_0x5a04ab){}});const _0x5704da=(_0x2c36d2,_0x4fad9b)=>{const _0x71c7f=_0x760d8f;let _0x152ebf=[];_0x4fad9b['forEach'](_0x2e40a2=>{const _0x4eeab3=_0x15b8,_0x1c796a=_0x2c36d2[_0x4eeab3(0x25e)](_0x47c5ec=>_0x47c5ec[_0x4eeab3(0x1f8)]==_0x2e40a2['coin']);if(!_0x1c796a)_0x152ebf['push'](_0x2e40a2);});let _0x530f05=[];return _0x2c36d2[_0x71c7f(0x125)](_0x2af3fe=>{const _0x5b6458=_0x71c7f,_0x4a0e3a=_0x4fad9b[_0x5b6458(0x25e)](_0x4d0e42=>_0x4d0e42[_0x5b6458(0x1f8)]==_0x2af3fe[_0x5b6458(0x1f8)]);if(!_0x4a0e3a||_0x4a0e3a[_0x5b6458(0x172)]==0x0&&_0x2af3fe[_0x5b6458(0x172)]!=0x0)_0x530f05[_0x5b6458(0x25b)](_0x2af3fe);}),{'missingDay1':_0x152ebf,'notInDay2':_0x530f05};},_0x1ef7ee=dbPerformance[_0x760d8f(0x1e6)](_0x760d8f(0x19c))[_0x760d8f(0x1ca)]()[_0x760d8f(0x1fb)]();if(_0x1ef7ee[_0x760d8f(0x19a)]>0x1){const {missingDay1:_0x58ad67,notInDay2:_0x47c29f}=_0x5704da(_0x298ae4,_0x1ef7ee[0x1][_0x760d8f(0x255)]);_0x298ae4=[..._0x298ae4,..._0x58ad67],_0x47c29f[_0x760d8f(0x125)](_0x1f1746=>{const _0x20d83a=_0x760d8f;let _0x1abc45=_0x298ae4[_0x20d83a(0x16a)](_0x532750=>_0x532750[_0x20d83a(0x1f8)]==_0x1f1746[_0x20d83a(0x1f8)]);_0x1abc45!=-0x1&&_0x298ae4[_0x20d83a(0x22b)](_0x1abc45,0x1);});}_0x298ae4[_0x760d8f(0x229)]((_0x539bb7,_0x484038)=>_0x539bb7[_0x760d8f(0x1f8)]>_0x484038['coin']?0x1:_0x484038[_0x760d8f(0x1f8)]>_0x539bb7[_0x760d8f(0x1f8)]?-0x1:0x0);let _0x2a645d=[{'date':_0x5a332d[_0x760d8f(0x149)],'changes':_0x298ae4}];_0x1ef7ee[_0x760d8f(0x19a)]>0x2&&_0x1ef7ee[_0x760d8f(0x125)]((_0xcbecf5,_0x551662)=>{const _0x3c4883=_0x760d8f;if(_0x551662>0x0&&_0x551662<_0x1ef7ee['length']-0x1){const {missingDay1:_0x572fef,notInDay2:_0x52e1b3}=_0x5704da(_0x1ef7ee[_0x551662][_0x3c4883(0x255)],_0x1ef7ee[_0x551662+0x1][_0x3c4883(0x255)]);_0x298ae4=[],(_0x572fef[_0x3c4883(0x19a)]!=0x0||_0x52e1b3[_0x3c4883(0x19a)]!=0x0)&&(_0x572fef[_0x3c4883(0x19a)]!=0x0&&_0x298ae4[_0x3c4883(0x25b)](..._0x572fef),_0x52e1b3[_0x3c4883(0x19a)]!=0x0&&(_0x52e1b3['forEach'](_0x747dd6=>{const _0xa40b27=_0x3c4883;_0x747dd6[_0xa40b27(0x172)]=-_0x747dd6[_0xa40b27(0x172)];}),_0x298ae4[_0x3c4883(0x25b)](..._0x52e1b3)),_0x298ae4[_0x3c4883(0x229)]((_0x4793bf,_0x59d8ff)=>_0x4793bf[_0x3c4883(0x1f8)]>_0x59d8ff[_0x3c4883(0x1f8)]?0x1:_0x59d8ff[_0x3c4883(0x1f8)]>_0x4793bf['coin']?-0x1:0x0),_0x2a645d[_0x3c4883(0x25b)]({'date':_0x1ef7ee[_0x551662+0x1][_0x3c4883(0x23f)],'changes':_0x298ae4}));}}),dbConfig[_0x760d8f(0x1e6)](_0x760d8f(0x1a1))[_0x760d8f(0x25e)]({'botID':botID})[_0x760d8f(0x161)]({..._0x5a332d,'liquidity':_0x2a645d})[_0x760d8f(0x1d5)]();}}if(isOlderVersion(_0x3c11fe,'2.6.0')){let _0x1709d6=dbConfig[_0x760d8f(0x1e6)]('bot')['find']({'botID':botID})[_0x760d8f(0x1fb)]();if(_0x1709d6){const _0x2a75e3=_0x1709d6[_0x760d8f(0x217)],_0x7e6346=_0x2a75e3?capitalize(_0x2a75e3):_0x760d8f(0x1b2);dbConfig[_0x760d8f(0x1e6)](_0x760d8f(0x1a1))[_0x760d8f(0x25e)]({'botID':botID})[_0x760d8f(0x161)]({'exchange':_0x7e6346})[_0x760d8f(0x1d5)]();}}config=getConfiguration(botID);let _0x27d60a=dbPerformance['get'](_0x760d8f(0x14e))[_0x760d8f(0x1fb)]();isOlderVersion(_0x27d60a,_0x760d8f(0x21b))&&setStartDatePerformance();let _0x1fccda=dbCoinResults[_0x760d8f(0x1e6)](_0x760d8f(0x14e))[_0x760d8f(0x1fb)]();if(isOlderVersion(_0x1fccda,_0x760d8f(0x258))){let _0x40e91c=dbCoinResults[_0x760d8f(0x1e6)](_0x760d8f(0x255))[_0x760d8f(0x1fb)]();if(_0x40e91c['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5668f2=_0x2b83c0;dbConfig[_0x5668f2(0x128)]('version',serverversion)[_0x5668f2(0x1d5)](),dbPerformance['set'](_0x5668f2(0x14e),serverversion)[_0x5668f2(0x1d5)](),dbLogs[_0x5668f2(0x128)](_0x5668f2(0x14e),serverversion)[_0x5668f2(0x1d5)](),dbCoinResults['set'](_0x5668f2(0x14e),serverversion)[_0x5668f2(0x1d5)]();}function getConfiguration(_0x1c0bb5){const _0x279a57=_0x2b83c0;let _0x19e7ce=dbConfig[_0x279a57(0x1e6)](_0x279a57(0x1a1))['find']({'botID':_0x1c0bb5})[_0x279a57(0x1fb)]();if(_0x19e7ce){let _0x97ce31=![];typeof _0x19e7ce['threshold']==_0x279a57(0x166)&&(_0x19e7ce={..._0x19e7ce,'threshold':Number(_0x19e7ce[_0x279a57(0x157)])},_0x97ce31=!![]),_0x19e7ce[_0x279a57(0x136)]==null&&(_0x19e7ce={..._0x19e7ce,'change24h':-0x14},_0x97ce31=!![]),_0x97ce31&&(_0x19e7ce={'botID':_0x19e7ce[_0x279a57(0x1d7)],'exchange':_0x19e7ce[_0x279a57(0x217)],'apiKey':_0x19e7ce[_0x279a57(0x14d)],'apiSecret':_0x19e7ce[_0x279a57(0x254)],'basecoin':_0x19e7ce['basecoin'],'botname':_0x19e7ce[_0x279a57(0x1ec)],'showname':_0x19e7ce['showname'],'threshold':_0x19e7ce[_0x279a57(0x157)],'ordertype':_0x19e7ce[_0x279a57(0x141)],'timeout':_0x19e7ce[_0x279a57(0x21d)],'startdate':_0x19e7ce[_0x279a57(0x149)],'recreate':_0x19e7ce['recreate'],'timeshift':_0x19e7ce[_0x279a57(0x153)],'headless':_0x19e7ce[_0x279a57(0x1cb)],'cooldown':_0x19e7ce[_0x279a57(0x230)],'change24h':_0x19e7ce[_0x279a57(0x136)],'emojibuy':_0x19e7ce[_0x279a57(0x1b5)],'emojisell':_0x19e7ce[_0x279a57(0x11c)],'portfolio':_0x19e7ce[_0x279a57(0x14f)],'liquidity':_0x19e7ce[_0x279a57(0x1b3)]},dbConfig['get'](_0x279a57(0x1a1))[_0x279a57(0x13c)]()[_0x279a57(0x1d5)](),dbConfig[_0x279a57(0x1e6)](_0x279a57(0x1a1))['push'](_0x19e7ce)['write']());}else _0x19e7ce={'botID':_0x1c0bb5,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x1c0bb5,'showname':![],'threshold':0x3,'ordertype':_0x279a57(0x1c4),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x19e7ce;}function emittedConfiguration(){const _0x428001=_0x2b83c0;let _0x1654b6;if(config['apiKey']=='')_0x1654b6={...config,'configstate':_0x428001(0x18a)};else config[_0x428001(0x14d)]==_0x428001(0x1c3)?_0x1654b6={...config,'configstate':'recovery'}:_0x1654b6={...config,'apiKey':_0x428001(0x144),'apiSecret':_0x428001(0x144)};return _0x1654b6;}function getSettings(){const _0x3a64ea=_0x2b83c0;return dbSettings['get'](_0x3a64ea(0x1bd))[_0x3a64ea(0x1fb)]();}function getSecure(){const _0x289b97=_0x2b83c0;return dbSecure['get']('secure')[_0x289b97(0x1fb)]()||{};}function updateTimeshift(_0x5db7d4){const _0x5b6597=_0x2b83c0;let _0x5c9182=dbConfig[_0x5b6597(0x1e6)](_0x5b6597(0x1a1))[_0x5b6597(0x25e)]({'botID':botID})[_0x5b6597(0x1fb)]();_0x5c9182&&dbConfig[_0x5b6597(0x1e6)](_0x5b6597(0x1a1))['find']({'botID':botID})[_0x5b6597(0x161)]({'timeshift':_0x5db7d4})['write'](),config[_0x5b6597(0x153)]=_0x5db7d4,proxyEmit(_0x5b6597(0x17b),emittedConfiguration());}async function storeConfiguration(_0x57b67c){const _0x1925b1=_0x2b83c0;let _0x28af97=[],_0x2d8817=[];_0x57b67c['portfolio'][_0x1925b1(0x125)](_0x291c3c=>{const _0x19978d=_0x1925b1;if(!_0x291c3c[_0x19978d(0x221)]&&_0x291c3c[_0x19978d(0x1f8)]!=_0x57b67c[_0x19978d(0x134)])_0x2d8817[_0x19978d(0x25b)](_0x291c3c[_0x19978d(0x211)]);});currentCoins[_0x1925b1(0x19a)]==0x0?_0x28af97=_0x2d8817:_0x2d8817[_0x1925b1(0x125)](_0x5b4fce=>{const _0x19026e=_0x1925b1,_0x2b9349=currentCoins['find'](_0x2f4152=>_0x2f4152[_0x19026e(0x211)]==_0x5b4fce);!_0x2b9349&&_0x28af97[_0x19026e(0x25b)](_0x5b4fce);});let _0x36bfb7=dbConfig[_0x1925b1(0x1e6)]('bot')[_0x1925b1(0x25e)]({'botID':botID})[_0x1925b1(0x1fb)]();_0x57b67c={..._0x57b67c,'apiKey':crypt['decrypt'](secure['privateKey'],_0x57b67c[_0x1925b1(0x14d)])[_0x1925b1(0x242)],'apiSecret':crypt[_0x1925b1(0x1ab)](secure['privateKey'],_0x57b67c[_0x1925b1(0x254)])['message']};if(_0x36bfb7){if(_0x57b67c[_0x1925b1(0x14d)]=='************')_0x57b67c[_0x1925b1(0x14d)]=config[_0x1925b1(0x14d)];if(_0x57b67c[_0x1925b1(0x254)]==_0x1925b1(0x144))_0x57b67c[_0x1925b1(0x254)]=config[_0x1925b1(0x254)];dbConfig[_0x1925b1(0x1e6)]('bot')[_0x1925b1(0x25e)]({'botID':botID})[_0x1925b1(0x161)](_0x57b67c)[_0x1925b1(0x1d5)]();}else dbConfig['get']('bot')['push'](_0x57b67c)['write'](),process['send']({'status':_0x1925b1(0x210),'live':'running'},_0x393c7f=>{});config={..._0x57b67c},setStartDatePerformance(),process[_0x1925b1(0x135)]({'botname':_0x57b67c[_0x1925b1(0x1ec)]},_0xcaf29a=>{}),updateBotManager();const _0x4fa29f=getNormalizedPerformance();getStartingBalances(_0x4fa29f),emitPerformance(_0x4fa29f),proxyEmit(_0x1925b1(0x15d)),await initCoinResults(),reset(_0x28af97);}async function storeHeadless(_0xb1ae9){const _0x2222fa=_0x2b83c0,_0x9d8279={...config,'headless':_0xb1ae9[_0x2222fa(0x1cb)]};let _0x887943=dbConfig['get'](_0x2222fa(0x1a1))[_0x2222fa(0x25e)]({'botID':botID})[_0x2222fa(0x1fb)]();_0x887943&&dbConfig[_0x2222fa(0x1e6)](_0x2222fa(0x1a1))[_0x2222fa(0x25e)]({'botID':botID})[_0x2222fa(0x161)](_0x9d8279)[_0x2222fa(0x1d5)](),config={..._0x9d8279},updateBotManager(),proxyEmit(_0x2222fa(0x17b),emittedConfiguration());}function noslash(_0x3a5201){return _0x3a5201['replace']('/','');}async function updateNumberCoinsCcxt(_0x35047c){const _0x5c7a92=_0x2b83c0;logger[_0x5c7a92(0x228)](_0x5c7a92(0x1aa)+_0x35047c[_0x5c7a92(0x211)]+_0x5c7a92(0x154)+_0x35047c[_0x5c7a92(0x18c)]+'\x20|\x20'+_0x35047c['id']+_0x5c7a92(0x154)+_0x35047c[_0x5c7a92(0x193)]);let _0x206ba3=_0x35047c[_0x5c7a92(0x18c)],_0x473617=![];currentCoins[_0x5c7a92(0x125)](_0x181314=>{const _0x4156fb=_0x5c7a92;_0x181314[_0x4156fb(0x211)]==_0x35047c[_0x4156fb(0x211)]&&(_0x473617=!![]);});if(!_0x473617)return;const _0x427c83=currentCoins[_0x5c7a92(0x25e)](_0x598b3f=>_0x598b3f[_0x5c7a92(0x211)]==_0x35047c[_0x5c7a92(0x211)]),_0x58cfa3=_0x27180f=>{const _0x521be0=_0x5c7a92;if(_0x427c83)_0x427c83[_0x521be0(0x206)]=_0x27180f;};if(_0x206ba3==_0x5c7a92(0x1eb))_0x58cfa3(_0x5c7a92(0x1eb));else{if(_0x206ba3==_0x5c7a92(0x164))_0x58cfa3(_0x5c7a92(0x164)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x206ba3==_0x5c7a92(0x1fa)){logger['debug'](_0x5c7a92(0x121)+_0x35047c[_0x5c7a92(0x211)]+'\x20|\x20'+_0x35047c['filled']+_0x5c7a92(0x154)+_0x35047c['id']+_0x5c7a92(0x154)+_0x35047c['clientOrderId']);let _0x4e9bab=![];if(lastOrders)lastOrders[_0x5c7a92(0x125)](async _0x5a11cb=>{const _0x4570cd=_0x5c7a92;if(_0x5a11cb[_0x4570cd(0x203)]==_0x35047c[_0x4570cd(0x193)]){logger[_0x4570cd(0x228)](_0x4570cd(0x1d4)+_0x35047c['clientOrderId']),_0x4e9bab=!![];if(_0x5a11cb['filled']==0x0){logger[_0x4570cd(0x228)](_0x4570cd(0x147)+_0x35047c[_0x4570cd(0x193)]),_0x5a11cb[_0x4570cd(0x1e2)]=_0x35047c[_0x4570cd(0x129)],_0x5a11cb[_0x4570cd(0x26f)]=_0x35047c[_0x4570cd(0x26f)],_0x5a11cb['fee']={'cost':_0x35047c[_0x4570cd(0x1ae)][_0x4570cd(0x20a)],'currency':_0x35047c['fee'][_0x4570cd(0x214)]},_0x58cfa3(_0x4570cd(0x26f)),await validateOrders();if(lockOrders==ORDERS[_0x4570cd(0x1ad)])currentCoins=await getCoins();await updateCoinResults(_0x5a11cb);}}});!_0x4e9bab&&(logger[_0x5c7a92(0x228)](_0x5c7a92(0x20e)+_0x35047c['id']),_0x58cfa3('filled'),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0xdf6a12=JSON['parse'](lastBalances[_0x5c7a92(0x14f)]);const _0x2015ce=_0xdf6a12[_0x5c7a92(0x25e)](_0x5bb715=>_0x5bb715[_0x5c7a92(0x211)]==_0x35047c['symbol']);if(_0x2015ce){if(_0x206ba3==_0x5c7a92(0x1eb))_0x2015ce[_0x5c7a92(0x206)]=_0x2015ce['orderstatus']=='filled'?'filled':_0x5c7a92(0x1eb);else{if(_0x206ba3==_0x5c7a92(0x164))_0x2015ce[_0x5c7a92(0x206)]=_0x2015ce[_0x5c7a92(0x206)]=='filled'?'filled':_0x5c7a92(0x164);else _0x206ba3==_0x5c7a92(0x1fa)&&(_0x2015ce[_0x5c7a92(0x206)]=_0x5c7a92(0x26f));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xdf6a12)},proxyEmit(_0x5c7a92(0x142),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x26ee9f=![],_0x4af946=!![],_0x5bbbec=config[_0x2b83c0(0x134)]){const _0x5f1d65=_0x2b83c0;let _0x2b51e1,_0x10bd95=[],_0xfa4518=[],_0x5e9c59=[];try{_0x2b51e1=await exchange['fetchBalance'](),mybalances=_0x2b51e1['total'];if(!_0x4af946)for(const [_0x47eef7,_0x236888]of Object[_0x5f1d65(0x1de)](mybalances)){_0x5e9c59['push'](_0x47eef7);}else config['portfolio'][_0x5f1d65(0x125)](_0x47c918=>{const _0x594236=_0x5f1d65;if(!_0x47c918[_0x594236(0x221)])_0x5e9c59[_0x594236(0x25b)](_0x47c918['coin']);});if(_0x5bbbec=='')for(const [_0x3d319d,_0x421e02]of Object[_0x5f1d65(0x1de)](mybalances)){_0x421e02[_0x5f1d65(0x13d)]()!=0x0&&_0xfa4518[_0x5f1d65(0x25b)]({'coin':_0x3d319d});}else{if(_0x26ee9f)await getOpenOrders();let _0x979c83=![];for(const [_0x41d2b0,_0x1600d6]of Object[_0x5f1d65(0x1de)](mybalances)){if(_0x5e9c59['includes'](_0x41d2b0)){const _0x537c0b=config[_0x5f1d65(0x14f)][_0x5f1d65(0x25e)](_0x5bed18=>_0x5bed18[_0x5f1d65(0x1f8)]==_0x41d2b0),_0x424a50=_0x41d2b0+'/'+_0x5bbbec,_0x596973=_0x5bbbec+'/'+_0x41d2b0,_0x52236f=currentCoins[_0x5f1d65(0x25e)](_0x37e411=>_0x37e411[_0x5f1d65(0x1f8)]==_0x41d2b0);_0x979c83=![];_0x26ee9f&&(_0x979c83=allOpenOrders[_0x5f1d65(0x25e)](_0xa41568=>_0xa41568[_0x5f1d65(0x211)]==_0x537c0b[_0x5f1d65(0x211)]));if((_0x1600d6[_0x5f1d65(0x13d)]()!=0x0||_0x537c0b)&&(allSymbols[_0x5f1d65(0x17d)](_0x424a50)||_0x41d2b0==_0x5bbbec))_0x41d2b0!=_0x5bbbec&&_0x10bd95[_0x5f1d65(0x25b)](_0x424a50),_0xfa4518['push']({'coin':_0x41d2b0,'symbol':_0x424a50,'reverse':![],'number':Math[_0x5f1d65(0x187)](_0x1600d6+(_0x537c0b&&_0x537c0b[_0x5f1d65(0x265)]||0x0),0x0),'orderstatus':_0x26ee9f?_0x979c83?'open':_0x5f1d65(0x11a):_0x52236f?_0x52236f['orderstatus']:_0x5f1d65(0x11a)});else(_0x1600d6[_0x5f1d65(0x13d)]()!=0x0||_0x537c0b)&&allSymbols[_0x5f1d65(0x17d)](_0x596973)&&(_0x41d2b0!=_0x5bbbec&&_0x10bd95['push'](_0x596973),_0xfa4518[_0x5f1d65(0x25b)]({'coin':_0x41d2b0,'symbol':_0x596973,'reverse':!![],'number':Math[_0x5f1d65(0x187)](_0x1600d6+(_0x537c0b&&_0x537c0b[_0x5f1d65(0x265)]||0x0),0x0),'orderstatus':_0x26ee9f?_0x979c83?_0x5f1d65(0x1eb):_0x5f1d65(0x11a):_0x52236f?_0x52236f[_0x5f1d65(0x206)]:_0x5f1d65(0x11a)}));}}}}catch(_0x63ecbc){if(!_0x4af946)handleErrorNoStop(_0x63ecbc,_0x5f1d65(0x14c));else await handleError(_0x63ecbc,_0x5f1d65(0x14c));}return _0xfa4518;}async function getCoinNumber(_0x4574cb){const _0x5470c8=_0x2b83c0;let _0x2b0910;try{const _0x44c321=await exchange[_0x5470c8(0x1f4)]();_0x2b0910=_0x44c321[_0x5470c8(0x1f6)][_0x4574cb];}catch(_0x43bb14){await handleError(_0x43bb14,_0x5470c8(0x150));}return _0x2b0910;}async function getOpenOrders(){const _0x35e413=_0x2b83c0;let _0xe78aa4;allOpenOrders=[];try{for(const _0x23858a of config[_0x35e413(0x14f)]){!_0x23858a[_0x35e413(0x221)]&&_0x23858a['coin']!=config[_0x35e413(0x134)]&&(_0xe78aa4=await exchange[_0x35e413(0x143)](_0x23858a['symbol']),_0xe78aa4[_0x35e413(0x19a)]>0x0&&allOpenOrders[_0x35e413(0x25b)](_0xe78aa4[0x0]));}}catch(_0xa2da21){await handleError(_0xa2da21,'getOpenOrders()');}}async function handleOpenOrders(_0x4dfc65=0x0){const _0x27b12a=_0x2b83c0;allOpenOrders[_0x27b12a(0x19a)]==0x0&&lockOrders==ORDERS[_0x27b12a(0x1ad)]&&allOrdersPlaced&&(_0x4dfc65==0x0?(logger[_0x27b12a(0x228)](_0x27b12a(0x259)),_0x4dfc65++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x27b12a(0x228)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x27b12a(0x24a))));}async function getPortfolio(_0xac31f8){const _0x363b82=_0x2b83c0;let _0xe56a36=[],_0x6c535e=[],_0x17a2d5,_0x53a9ce=[],_0x549ee6=![];if(_0xac31f8[_0x363b82(0x14d)]===_0x363b82(0x144)||_0xac31f8[_0x363b82(0x254)]==='************')_0x549ee6=!![];else{await initExchange(_0xac31f8['exchange'],_0xac31f8['apiKey'],_0xac31f8[_0x363b82(0x254)]);try{_0x549ee6=await loadSymbols(_0xac31f8['exchange']);}catch(_0x14e238){_0x549ee6=![],handleErrorNoStop(_0x14e238,_0x363b82(0x271));}}if(_0x549ee6){_0x53a9ce=await getCoins(![],![],_0xac31f8[_0x363b82(0x134)]);if(_0x53a9ce===![])proxyEmit(_0x363b82(0x14f),![]);else{if(_0xac31f8['basecoin']=='')proxyEmit(_0x363b82(0x14f),_0x53a9ce);else{_0x53a9ce['forEach'](_0x3b8766=>{const _0x2a161a=_0x363b82;if(_0x3b8766[_0x2a161a(0x1f8)]!=_0xac31f8[_0x2a161a(0x134)])_0xe56a36[_0x2a161a(0x25b)](_0x3b8766[_0x2a161a(0x211)]);});try{_0x6c535e=await exchange[_0x363b82(0x133)](_0xe56a36);}catch(_0x478722){await handleError(_0x478722,'getPortfolio()');}_0x53a9ce['forEach'](_0x3034f6=>{const _0x1dbcff=_0x363b82;_0x3034f6['coin']!=_0xac31f8[_0x1dbcff(0x134)]?_0x17a2d5=_0x3034f6[_0x1dbcff(0x26c)]?0x1/_0x6c535e[_0x3034f6[_0x1dbcff(0x211)]][_0x1dbcff(0x11f)]:_0x6c535e[_0x3034f6[_0x1dbcff(0x211)]][_0x1dbcff(0x11f)]:_0x17a2d5=0x1,_0x3034f6['price']=formatResult(_0x17a2d5,0x8);}),proxyEmit('portfolio',_0x53a9ce);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x3c09ea){const _0x5bb1ed=_0x2b83c0;let _0x12fa63=!![];const _0x5bd56a=!_0x3c09ea[_0x5bb1ed(0x26c)]?markets[_0x3c09ea[_0x5bb1ed(0x211)]]['limits'][_0x5bb1ed(0x175)][_0x5bb1ed(0x15c)]:markets[_0x3c09ea[_0x5bb1ed(0x211)]]['limits'][_0x5bb1ed(0x20a)][_0x5bb1ed(0x15c)],_0x262c99=!_0x3c09ea[_0x5bb1ed(0x26c)]?markets[_0x3c09ea[_0x5bb1ed(0x211)]][_0x5bb1ed(0x14b)][_0x5bb1ed(0x20a)][_0x5bb1ed(0x15c)]:markets[_0x3c09ea[_0x5bb1ed(0x211)]][_0x5bb1ed(0x14b)][_0x5bb1ed(0x175)][_0x5bb1ed(0x15c)],_0x44df10=markets[_0x3c09ea[_0x5bb1ed(0x211)]][_0x5bb1ed(0x158)]['amount'];_0x3c09ea['trade']=formatResultTruncate(_0x3c09ea[_0x5bb1ed(0x1b7)],_0x44df10);if(Math[_0x5bb1ed(0x122)](_0x3c09ea[_0x5bb1ed(0x1b7)])<_0x5bd56a)_0x12fa63=![];if(Math[_0x5bb1ed(0x122)](_0x3c09ea[_0x5bb1ed(0x1b7)])*_0x3c09ea[_0x5bb1ed(0x11f)]<_0x262c99)_0x12fa63=![];if(_0x3c09ea[_0x5bb1ed(0x225)]==_0x5bb1ed(0x1df)){let _0x5a9235=config[_0x5bb1ed(0x14f)]['find'](_0x966431=>_0x966431[_0x5bb1ed(0x1f8)]==_0x3c09ea[_0x5bb1ed(0x1f8)]);if(_0x5a9235['offset']>0x0){if(Math[_0x5bb1ed(0x122)](_0x3c09ea['trade'])>_0x3c09ea[_0x5bb1ed(0x172)]-_0x5a9235[_0x5bb1ed(0x265)])_0x12fa63=![];}else{if(Math[_0x5bb1ed(0x122)](_0x3c09ea[_0x5bb1ed(0x1b7)])>_0x3c09ea['number'])_0x12fa63=![];}}if(_0x3c09ea[_0x5bb1ed(0x225)]==_0x5bb1ed(0x170)){let _0x230b0d=config[_0x5bb1ed(0x14f)][_0x5bb1ed(0x25e)](_0x3ed73f=>_0x3ed73f[_0x5bb1ed(0x1f8)]==config[_0x5bb1ed(0x134)]),_0x5cfe48=currentCoins[_0x5bb1ed(0x25e)](_0x7df957=>_0x7df957[_0x5bb1ed(0x1f8)]==config[_0x5bb1ed(0x134)]);if(_0x230b0d[_0x5bb1ed(0x265)]>0x0){if(Math[_0x5bb1ed(0x122)](_0x3c09ea[_0x5bb1ed(0x1b7)])*_0x3c09ea[_0x5bb1ed(0x11f)]>_0x5cfe48[_0x5bb1ed(0x172)]-_0x230b0d[_0x5bb1ed(0x265)])_0x12fa63=![];}else{if(Math[_0x5bb1ed(0x122)](_0x3c09ea[_0x5bb1ed(0x1b7)])*_0x3c09ea[_0x5bb1ed(0x11f)]>_0x5cfe48[_0x5bb1ed(0x172)])_0x12fa63=![];}}return _0x12fa63;}async function getBalances(){const _0xefeb12=_0x2b83c0;let _0x17a1bf=0x0,_0x3dcd8c;const _0x243668=config[_0xefeb12(0x157)];if(config[_0xefeb12(0x1cb)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0xefeb12(0x125)](_0x24568d=>{const _0x50f2ad=_0xefeb12;if(_0x24568d[_0x50f2ad(0x1f8)]!=config['basecoin']){let _0x5cc4d9=global[_0x50f2ad(0x20c)][noslash(_0x24568d[_0x50f2ad(0x211)])];_0x3dcd8c=_0x24568d[_0x50f2ad(0x26c)]?0x1/_0x5cc4d9:_0x5cc4d9;}else _0x3dcd8c=0x1;let _0x4d79cf=_0x24568d[_0x50f2ad(0x172)]*_0x3dcd8c;_0x17a1bf+=_0x4d79cf,_0x24568d[_0x50f2ad(0x11f)]=formatResult(Number(_0x3dcd8c),0x8),_0x24568d[_0x50f2ad(0x1fb)]=_0x4d79cf;}),currentCoins['forEach'](_0x4a4812=>{const _0x52b6d5=_0xefeb12;let _0x1d0a51=config[_0x52b6d5(0x14f)][_0x52b6d5(0x25e)](_0x477398=>_0x477398['coin']==_0x4a4812['coin']),_0x242314=Number(_0x1d0a51[_0x52b6d5(0x17c)]),_0x341c52=_0x4a4812[_0x52b6d5(0x1fb)]/_0x17a1bf*0x64,_0x5914a6=_0x242314*_0x17a1bf/0x64/_0x4a4812[_0x52b6d5(0x11f)]-_0x4a4812[_0x52b6d5(0x172)];_0x4a4812['distribution']=formatResult(_0x341c52,0x3),_0x4a4812[_0x52b6d5(0x1ee)]=formatResult(_0x242314,0x3),_0x4a4812[_0x52b6d5(0x1b7)]=formatResult(_0x5914a6,0x8),_0x4a4812[_0x52b6d5(0x225)]='',_0x4a4812[_0x52b6d5(0x192)]=![];if(_0x4a4812['coin']!=config[_0x52b6d5(0x134)]){if(_0x4a4812[_0x52b6d5(0x17c)]>_0x242314)_0x4a4812[_0x52b6d5(0x225)]=_0x52b6d5(0x1df),_0x4a4812[_0x52b6d5(0x192)]=checkMinimums(_0x4a4812);else _0x4a4812[_0x52b6d5(0x17c)]<_0x242314&&(_0x4a4812[_0x52b6d5(0x225)]=_0x52b6d5(0x170),_0x4a4812[_0x52b6d5(0x192)]=checkMinimums(_0x4a4812));}_0x4a4812[_0x52b6d5(0x194)]=_0x4a4812[_0x52b6d5(0x17c)]/_0x4a4812[_0x52b6d5(0x1ee)]-0x1;if(_0x4a4812['orderstatus']==_0x52b6d5(0x26f)||_0x4a4812[_0x52b6d5(0x206)]==_0x52b6d5(0x164))_0x4a4812[_0x52b6d5(0x206)]=_0x52b6d5(0x11a);}),currentCoins[_0xefeb12(0x229)]((_0x4dc526,_0xa84f5)=>_0x4dc526[_0xefeb12(0x194)]<_0xa84f5[_0xefeb12(0x194)]?0x1:_0xa84f5[_0xefeb12(0x194)]<_0x4dc526['delta']?-0x1:0x0);const _0x32f985=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x32f985[_0xefeb12(0x16f)],'usd':_0x32f985['usd'],'portfolio':JSON[_0xefeb12(0x117)](currentCoins),'threshold':_0x243668},proxyEmit(_0xefeb12(0x142),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x243668});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x243668});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3508f7=_0x2b83c0;if(!lastBalances)return;let _0x4ec083=[],_0x2527a5,_0x386b4a=JSON[_0x3508f7(0x240)](lastBalances[_0x3508f7(0x14f)]);_0x386b4a[_0x3508f7(0x229)]((_0x48b56c,_0x45e453)=>_0x48b56c[_0x3508f7(0x1f8)]>_0x45e453[_0x3508f7(0x1f8)]?0x1:_0x45e453[_0x3508f7(0x1f8)]>_0x48b56c['coin']?-0x1:0x0),_0x386b4a[_0x3508f7(0x125)](_0x55d26e=>{const _0xaeec94=_0x3508f7;let _0x491c69={'coin':_0x55d26e['coin'],'number':_0x55d26e[_0xaeec94(0x172)],'price':_0x55d26e[_0xaeec94(0x11f)]};_0x4ec083[_0xaeec94(0x25b)](_0x491c69);});const _0x198083=await getFiat();_0x2527a5={'date':lastBalances[_0x3508f7(0x137)]['split']('\x20')[0x0],'eur':_0x198083[_0x3508f7(0x16f)],'usd':_0x198083[_0x3508f7(0x188)],'coins':_0x4ec083};let _0x4028a3=dbPerformance['get'](_0x3508f7(0x19c))['find']({'date':_0x2527a5['date']})['value']();_0x4028a3?_0x2527a5[_0x3508f7(0x23f)]!=config[_0x3508f7(0x149)]&&dbPerformance[_0x3508f7(0x1e6)](_0x3508f7(0x19c))[_0x3508f7(0x25e)]({'date':_0x2527a5[_0x3508f7(0x23f)]})['assign'](_0x2527a5)[_0x3508f7(0x1d5)]():dbPerformance[_0x3508f7(0x1e6)](_0x3508f7(0x19c))[_0x3508f7(0x25b)](_0x2527a5)[_0x3508f7(0x1d5)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1035e9=_0x2b83c0;let _0x3fcbab=[];if(dbPerformance[_0x1035e9(0x159)](_0x1035e9(0x19c))[_0x1035e9(0x1fb)]()){let _0x5be015=dbPerformance[_0x1035e9(0x1e6)](_0x1035e9(0x19c))['cloneDeep']()[_0x1035e9(0x1a0)](_0x1035e9(0x23f))['value'](),_0x15d65a=[...config[_0x1035e9(0x1b3)]];_0x15d65a[_0x1035e9(0x229)]((_0x3a0ca9,_0x3d5d9a)=>_0x3a0ca9[_0x1035e9(0x23f)]>_0x3d5d9a[_0x1035e9(0x23f)]?-0x1:_0x3d5d9a[_0x1035e9(0x23f)]>_0x3a0ca9[_0x1035e9(0x23f)]?0x1:0x0);let _0x1a3f0d=0x1,_0x93a17e=[],_0x31c4f1=0x0;_0x5be015[_0x1035e9(0x173)]()['reverse']()[_0x1035e9(0x125)]((_0xff9d46,_0x129374)=>{const _0x457a1b=_0x1035e9;if(_0x15d65a[_0x31c4f1]){if(_0x5be015[_0x5be015['length']-_0x129374]&&_0x15d65a[_0x31c4f1]['date']==_0x5be015[_0x5be015[_0x457a1b(0x19a)]-_0x129374]['date']){if(_0x129374<_0x5be015[_0x457a1b(0x19a)]){let _0x4deadf=0x0,_0x20bd7e=0x0;_0x5be015[_0x5be015[_0x457a1b(0x19a)]-_0x129374]['coins'][_0x457a1b(0x125)](_0xaa0939=>{const _0x30af6e=_0x457a1b;_0x20bd7e+=_0xaa0939['number']*_0xaa0939[_0x30af6e(0x1e2)];}),_0x15d65a[_0x31c4f1][_0x457a1b(0x148)]['forEach'](_0x3a9f52=>{const _0x5c02c2=_0x457a1b;_0x4deadf+=_0x3a9f52[_0x5c02c2(0x172)]*_0x3a9f52[_0x5c02c2(0x1e2)];}),_0x1a3f0d*=_0x4deadf/(_0x20bd7e-_0x4deadf)+0x1;}_0x31c4f1++;}}let _0x28c9dc=0x0;_0xff9d46[_0x457a1b(0x255)][_0x457a1b(0x125)](_0x35481e=>{const _0x5a703a=_0x457a1b;_0x28c9dc+=_0x35481e[_0x5a703a(0x172)]*_0x35481e[_0x5a703a(0x1e2)];}),_0x93a17e[_0x5be015[_0x457a1b(0x19a)]-_0x129374-0x1]=_0x28c9dc*(_0x1a3f0d-0x1);});let _0x5d89cf=[];_0x15d65a=[...config[_0x1035e9(0x1b3)]]||[];let _0x41bf67=0x0;_0x31c4f1=0x0,_0x5be015[_0x1035e9(0x125)]((_0x46831f,_0x5e000a)=>{const _0x2b1595=_0x1035e9;if(_0x15d65a[_0x31c4f1]){const _0x3785bb=fns[_0x2b1595(0x240)](_0x15d65a[_0x31c4f1][_0x2b1595(0x23f)],_0x2b1595(0x1c0),new Date()),_0x4cfc92=fns[_0x2b1595(0x240)](_0x46831f[_0x2b1595(0x23f)],_0x2b1595(0x1c0),new Date());if(fns['isEqual'](_0x3785bb,_0x4cfc92)){let _0x153e05=0x0;_0x15d65a[_0x31c4f1]['changes'][_0x2b1595(0x125)](_0x253c6c=>{const _0x535b34=_0x2b1595;!_0x5d89cf[_0x253c6c[_0x535b34(0x1f8)]]?_0x5d89cf[_0x253c6c[_0x535b34(0x1f8)]]=_0x253c6c[_0x535b34(0x172)]:(_0x153e05=_0x5d89cf[_0x253c6c[_0x535b34(0x1f8)]],_0x5d89cf[_0x253c6c[_0x535b34(0x1f8)]]+=_0x253c6c['number']);const _0x3d025d=_0x46831f[_0x535b34(0x255)][_0x535b34(0x25e)](_0x47f3e6=>_0x47f3e6[_0x535b34(0x1f8)]==_0x253c6c[_0x535b34(0x1f8)]);(!_0x3d025d||_0x3d025d[_0x535b34(0x172)]==0x0)&&(_0x41bf67+=(-_0x253c6c[_0x535b34(0x172)]-_0x153e05)*_0x253c6c[_0x535b34(0x1e2)]);}),_0x31c4f1++;}}_0x46831f['coins']['forEach']((_0x465575,_0x1703d8)=>{const _0x1f58f9=_0x2b1595;_0x5d89cf[_0x465575[_0x1f58f9(0x1f8)]]&&(_0x465575={..._0x465575,'initial':_0x5d89cf[_0x465575['coin']]}),_0x46831f[_0x1f58f9(0x255)][_0x1703d8]=_0x465575;}),_0x3fcbab[_0x2b1595(0x25b)]({'date':_0x46831f[_0x2b1595(0x23f)],'eur':_0x46831f['eur'],'usd':_0x46831f[_0x2b1595(0x188)],'offset':_0x93a17e[_0x5e000a],'netoffset':_0x41bf67,'coins':_0x46831f[_0x2b1595(0x255)]});});}return _0x3fcbab;}function emitPerformance(_0x224c54){const _0x2d4f57=_0x2b83c0;_0x224c54[_0x2d4f57(0x19a)]!==0x0?(proxyEmit('performance',_0x224c54),lastPerformanceEmitted=getDate()):proxyEmit(_0x2d4f57(0x237),[]);}function getPerf(_0x3152d6,_0x481029){const _0x360197=_0x2b83c0;let _0x50d1c8=0x0,_0x276b85=0x0,_0x32deaa=0x0;_0x3152d6[_0x360197(0x255)]['forEach'](_0x315ebd=>{_0x50d1c8+=_0x315ebd['number']*_0x315ebd['price'];});_0x481029&&(_0x50d1c8+=_0x3152d6[_0x360197(0x265)]);if(config[_0x360197(0x134)]===_0x360197(0x26d)||config[_0x360197(0x134)]===_0x360197(0x1a9))_0x276b85=_0x50d1c8*_0x3152d6[_0x360197(0x16f)],_0x32deaa=_0x50d1c8*_0x3152d6[_0x360197(0x188)];else{if(config['basecoin']===_0x360197(0x15b)||config['basecoin']==='USDT'||config[_0x360197(0x134)]===_0x360197(0x247))_0x276b85=_0x50d1c8*_0x3152d6[_0x360197(0x16f)]/_0x3152d6[_0x360197(0x188)],_0x32deaa=_0x50d1c8;else config['basecoin']===_0x360197(0x1ff)&&(_0x276b85=_0x50d1c8,_0x32deaa=_0x50d1c8*_0x3152d6[_0x360197(0x188)]/_0x3152d6[_0x360197(0x16f)]);}return[_0x50d1c8,_0x276b85,_0x32deaa];}function getKPIs(_0x56cbc2,_0x3d4b=_0x2b83c0(0x1ff)){const _0x12ba4b=_0x2b83c0,_0x52ea5e=config[_0x12ba4b(0x134)],_0x242585=config['balances'],_0x4b3965=currentCoins,_0x4ab7b2=getNormalizedPerformance(),_0x48b8ea=_0x56cbc2===_0x12ba4b(0x134)?_0x52ea5e:_0x56cbc2===_0x12ba4b(0x168)||_0x56cbc2===_0x12ba4b(0x234)?_0x3d4b:_0x12ba4b(0x26b)+_0x52ea5e,_0x461ef6=_0x56cbc2===_0x12ba4b(0x1a7)?'Net\x20effect':_0x56cbc2===_0x12ba4b(0x234)?_0x12ba4b(0x1c1)+_0x48b8ea+')':_0x48b8ea+_0x12ba4b(0x23b),_0xd5b049=_0x56cbc2===_0x12ba4b(0x1a7)||_0x56cbc2==='net-fiat'?_0x12ba4b(0x183):_0x48b8ea+'\x20change';let _0x451286=0x0;_0x4b3965[_0x12ba4b(0x125)](_0x50f763=>{const _0x5626c1=_0x12ba4b;_0x451286+=_0x50f763[_0x5626c1(0x172)]*_0x50f763[_0x5626c1(0x11f)];});if(_0x56cbc2==='fiat'||_0x56cbc2===_0x12ba4b(0x234)){if(_0x52ea5e===_0x12ba4b(0x26d)||_0x52ea5e===_0x12ba4b(0x1a9))_0x451286=_0x451286*(_0x3d4b===_0x12ba4b(0x1ff)?_0x242585['eur']:_0x242585[_0x12ba4b(0x188)]);else{if(_0x52ea5e===_0x12ba4b(0x15b)||_0x52ea5e===_0x12ba4b(0x24d)||_0x52ea5e===_0x12ba4b(0x247))_0x451286=_0x451286*(_0x3d4b===_0x12ba4b(0x1ff)?_0x242585[_0x12ba4b(0x16f)]/_0x242585['usd']:0x1);else _0x52ea5e==='EUR'&&(_0x451286=_0x451286*(_0x3d4b===_0x12ba4b(0x1ff)?0x1:_0x242585[_0x12ba4b(0x188)]/_0x242585[_0x12ba4b(0x16f)]));}}let _0x4cbc3c;if(_0x451286!==0x0){if(_0x56cbc2===_0x12ba4b(0x134))_0x4cbc3c=(_0x451286/startingBalances[_0x12ba4b(0x134)]-0x1)*0x64;else{if(_0x3d4b===_0x12ba4b(0x1ff))_0x4cbc3c=(_0x451286/startingBalances[_0x12ba4b(0x16f)]-0x1)*0x64;else _0x4cbc3c=(_0x451286/startingBalances[_0x12ba4b(0x188)]-0x1)*0x64;}let _0x4abe10=0x0;if(startingBalances['coins'])_0x4b3965[_0x12ba4b(0x125)](_0x5bbe68=>{const _0x5ade48=_0x12ba4b;let _0x382282=startingBalances[_0x5ade48(0x255)][_0x5ade48(0x25e)](_0x29bb6a=>_0x29bb6a[_0x5ade48(0x1f8)]===_0x5bbe68[_0x5ade48(0x1f8)]);if(_0x382282&&_0x382282[_0x5ade48(0x1f8)]&&_0x5bbe68['number']!==0x0)_0x4abe10+=_0x382282[_0x5ade48(0x172)]*_0x5bbe68[_0x5ade48(0x11f)];});let _0xa7efcc=0x0;if(_0x4ab7b2[_0x12ba4b(0x19a)]!==0x0){let _0x4d166a=_0x4ab7b2[_0x4ab7b2['length']-0x1];_0xa7efcc=_0x4d166a[_0x12ba4b(0x270)];}_0x4abe10-=_0xa7efcc;_0x56cbc2===_0x12ba4b(0x1a7)&&(_0x4cbc3c=(_0x451286-_0x4abe10)/startingBalances['basecoin']*0x64,_0x451286=_0x451286-_0x4abe10);if(_0x56cbc2===_0x12ba4b(0x234)){let _0x584373=_0x3d4b===_0x12ba4b(0x1ff)?startingBalances[_0x12ba4b(0x16f)]:startingBalances['usd'];if(_0x52ea5e===_0x12ba4b(0x26d)||_0x52ea5e===_0x12ba4b(0x1a9))_0x4abe10=_0x3d4b==='EUR'?_0x4abe10*_0x242585['eur']:_0x4abe10*_0x242585[_0x12ba4b(0x188)];else{if(_0x52ea5e==='BUSD'||_0x52ea5e===_0x12ba4b(0x24d)||_0x52ea5e===_0x12ba4b(0x247))_0x4abe10=_0x3d4b==='EUR'?_0x4abe10*_0x242585[_0x12ba4b(0x16f)]/_0x242585[_0x12ba4b(0x188)]:_0x4abe10;else _0x52ea5e===_0x12ba4b(0x1ff)&&(_0x4abe10=_0x3d4b===_0x12ba4b(0x1ff)?_0x4abe10:_0x4abe10*_0x242585['usd']/_0x242585[_0x12ba4b(0x16f)]);}_0x4cbc3c=(_0x451286-_0x4abe10)/_0x584373*0x64,_0x451286=_0x451286-_0x4abe10;}if(_0x4cbc3c){if(_0x4cbc3c<0x64)_0x4cbc3c=_0x4cbc3c[_0x12ba4b(0x205)](0x2);else{if(_0x4cbc3c<0x3e8)_0x4cbc3c=_0x4cbc3c[_0x12ba4b(0x205)](0x1);else _0x4cbc3c=_0x4cbc3c[_0x12ba4b(0x205)](0x0);}}else _0x4cbc3c=Number('0')[_0x12ba4b(0x205)](0x2);if(_0x451286){if(Math[_0x12ba4b(0x122)](_0x451286)<0.000001)_0x451286=_0x451286[_0x12ba4b(0x205)](0x2);else{if(Math[_0x12ba4b(0x122)](_0x451286)<0.1)_0x451286=_0x451286[_0x12ba4b(0x205)](0x6);else{if(Math['abs'](_0x451286)<0x1)_0x451286=_0x451286[_0x12ba4b(0x205)](0x5);else{if(Math[_0x12ba4b(0x122)](_0x451286)<0xa)_0x451286=_0x451286['toFixed'](0x4);else{if(Math[_0x12ba4b(0x122)](_0x451286)<0x64)_0x451286=_0x451286['toFixed'](0x3);else{if(Math[_0x12ba4b(0x122)](_0x451286)<0x3e8)_0x451286=_0x451286[_0x12ba4b(0x205)](0x2);else _0x451286=_0x451286[_0x12ba4b(0x205)](0x2);}}}}}}else _0x451286=Number('0')[_0x12ba4b(0x205)](0x2);}else _0x4cbc3c=Number('0')[_0x12ba4b(0x205)](0x2);return{'value':_0x451286,'change':_0x4cbc3c,'leftTxt':_0x461ef6,'rightTxt':_0xd5b049};}async function getStartingBalances(_0x458f23,_0x4967d1=!![]){const _0x4e088f=_0x2b83c0;if(_0x458f23[_0x4e088f(0x19a)]!==0x0){const [_0x128795,_0x2da3de,_0x29f27d]=getPerf(_0x458f23[0x0],!![]);let _0x2e786b=[];config[_0x4e088f(0x14f)][_0x4e088f(0x125)](_0x33c9cb=>{const _0x34424b=_0x4e088f;let _0x2c73f2=0x0,_0x2a48de;config[_0x34424b(0x1b3)]['forEach'](_0x31d7e3=>{const _0x279984=_0x34424b;let _0x1b9407=_0x31d7e3['changes'][_0x279984(0x25e)](_0x11f12b=>_0x11f12b[_0x279984(0x1f8)]==_0x33c9cb[_0x279984(0x1f8)]);if(_0x1b9407){_0x2c73f2+=_0x1b9407['number'];if(!_0x2a48de)_0x2a48de=_0x1b9407[_0x279984(0x1e2)];}}),_0x2e786b[_0x34424b(0x25b)]({'coin':_0x33c9cb[_0x34424b(0x1f8)],'number':_0x2c73f2,'initialprice':_0x2a48de});});const _0x36c7cf={'basecoin':_0x128795,'eur':_0x2da3de,'usd':_0x29f27d,'coins':_0x2e786b};if(_0x4967d1)proxyEmit('starting-balances',_0x36c7cf);startingBalances=_0x36c7cf;}}function headlessMode(_0x128641){const _0x52b6cc=_0x2b83c0;let _0x38892c=_0x128641[_0x52b6cc(0x14f)],_0x5466dc=_0x128641[_0x52b6cc(0x157)],_0x372820=[];for(let _0x3524ad of _0x38892c){if(_0x3524ad['coin']!=config['basecoin']){if(_0x3524ad[_0x52b6cc(0x194)]>=_0x5466dc/0x64){if(_0x3524ad[_0x52b6cc(0x192)])_0x372820[_0x52b6cc(0x25b)](_0x3524ad);}else{if(_0x3524ad[_0x52b6cc(0x194)]<=-_0x5466dc/0x64){if(_0x3524ad[_0x52b6cc(0x192)])_0x372820['push'](_0x3524ad);}}}}_0x372820[_0x52b6cc(0x19a)]>0x0&&placeOrder(_0x372820);}function notifyBalance(_0x2f8df4){const _0x13a45e=_0x2b83c0;let _0x564789=_0x2f8df4[_0x13a45e(0x14f)],_0x3e5422=_0x2f8df4['threshold'],_0x37db9c=[];for(let _0x320dfa of _0x564789){if(_0x320dfa[_0x13a45e(0x1f8)]!=config['basecoin']){if(_0x320dfa['delta']>=_0x3e5422/0x64){if(_0x320dfa['valid'])_0x37db9c['push'](_0x320dfa);}else{if(_0x320dfa[_0x13a45e(0x194)]<=-_0x3e5422/0x64){if(_0x320dfa[_0x13a45e(0x192)])_0x37db9c[_0x13a45e(0x25b)](_0x320dfa);}}}}if(_0x37db9c['length']>0x0){let _0x5709a4=_0x37db9c[_0x13a45e(0x1f0)](_0x2d14ad=>_0x2d14ad[_0x13a45e(0x1f8)]);_0x5709a4['sort']();let _0x59ebab=_0x5709a4['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x13a45e(0x132),_0x13a45e(0x1b8));lastCoinsToBalance=_0x59ebab;}}function symbolToCoin(_0x1eeff5){const _0x2b2737=_0x2b83c0;let _0x241533;if(_0x1eeff5[_0x2b2737(0x17d)]('/'+config['basecoin']))_0x241533=_0x1eeff5[_0x2b2737(0x17f)]('/'+config[_0x2b2737(0x134)],'');if(_0x1eeff5['includes'](config['basecoin']+'/'))_0x241533=_0x1eeff5[_0x2b2737(0x17f)](config[_0x2b2737(0x134)]+'/','');return _0x241533;}async function unlockOrders(){const _0x22a1ac=_0x2b83c0;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x22a1ac(0x228)](_0x22a1ac(0x200)),lockOrders=ORDERS[_0x22a1ac(0x13f)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x22a1ac(0x18a),persistOpenOrders([]),lockOrders=ORDERS[_0x22a1ac(0x202)],logger[_0x22a1ac(0x228)](_0x22a1ac(0x1ce));}}async function validateOrders(_0x123b9d){const _0x8c55bf=_0x2b83c0;if(_0x123b9d)validateOrdersState=_0x123b9d;logger[_0x8c55bf(0x228)](_0x8c55bf(0x1f7)+validateOrdersState+_0x8c55bf(0x215)+(lockOrders==0x1?_0x8c55bf(0x145):lockOrders==0x2?_0x8c55bf(0x11d):_0x8c55bf(0x23d)));let _0x51fe26=[],_0x4a1155=config['ordertype']==_0x8c55bf(0x1c4)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x8c55bf(0x21d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x8c55bf(0x1ad)])return;logger[_0x8c55bf(0x228)](_0x8c55bf(0x245)+validateOrdersState),lastOrders[_0x8c55bf(0x125)](_0x45c19d=>{const _0x3a1a3d=_0x8c55bf;let _0x256464=![];_0x45c19d[_0x3a1a3d(0x26f)]>0x0&&(_0x256464=!![]),_0x51fe26[_0x3a1a3d(0x25b)](_0x256464),_0x256464&&config[_0x3a1a3d(0x141)]!=_0x3a1a3d(0x1c4)&&logHistory(_0x3a1a3d(0x233),_0x3a1a3d(0x222)+_0x45c19d[_0x3a1a3d(0x211)]+'\x20'+_0x45c19d[_0x3a1a3d(0x225)]+'\x20#'+formatResult(_0x45c19d[_0x3a1a3d(0x26f)],0x8)+'\x20@'+formatResult(_0x45c19d[_0x3a1a3d(0x1e2)],0x8));}),_0x51fe26[_0x8c55bf(0x125)]((_0x10100b,_0x237d81)=>{const _0x14f307=_0x8c55bf;if(_0x10100b)lastOrders[_0x14f307(0x22b)](_0x237d81,0x1);}),persistOpenOrders(lastOrders);const _0x5b2eb8=coolingDown?_0x8c55bf(0x20b):_0x8c55bf(0x239);if(validateOrdersState==_0x8c55bf(0x18a))validateOrdersState='ongoing',_0x51fe26[_0x8c55bf(0x17d)](![])?config['ordertype']==_0x8c55bf(0x1c4)?logHistory(_0x8c55bf(0x132),_0x8c55bf(0x1b6)):logHistory(_0x8c55bf(0x132),_0x8c55bf(0x1e3)):await unlockOrders();else{if(validateOrdersState==_0x8c55bf(0x207)){if(_0x51fe26[_0x8c55bf(0x17d)](![])){}else allOrdersPlaced&&(config[_0x8c55bf(0x141)]==_0x8c55bf(0x1c4)?logHistory('success',_0x8c55bf(0x146)+_0x5b2eb8):logHistory(_0x8c55bf(0x1b4),_0x8c55bf(0x223)+_0x5b2eb8),await unlockOrders());}else{if(validateOrdersState=='final')_0x51fe26[_0x8c55bf(0x17d)](![])&&(config['ordertype']==_0x8c55bf(0x1c4)?logHistory(_0x8c55bf(0x1b4),_0x8c55bf(0x14a)+Math['round'](_0x4a1155*validateOrderInterval/0xea60)+_0x8c55bf(0x18f)+_0x5b2eb8):(await cancelOrders(),logHistory(_0x8c55bf(0x1b4),_0x8c55bf(0x1db)+Math[_0x8c55bf(0x19e)](_0x4a1155*validateOrderInterval/0xea60)+_0x8c55bf(0x18f)+_0x5b2eb8))),await unlockOrders();else{if(validateOrdersState==_0x8c55bf(0x24a)){if(config[_0x8c55bf(0x141)]!=_0x8c55bf(0x1c4))logHistory(_0x8c55bf(0x1b4),_0x8c55bf(0x1e7)+_0x5b2eb8);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x928af2=>{const _0x379841=_0x15b8;try{const _0x17b7b7=await exchange[_0x379841(0x26e)](_0x928af2[_0x379841(0x1d9)],_0x928af2[_0x379841(0x211)]);}catch(_0x5d80df){if(_0x5d80df[_0x379841(0x13d)]()[_0x379841(0x17d)]('OrderNotFound')){}else await handleError(_0x5d80df,_0x379841(0x23e));}});}async function initCoinResults(){const _0x1a2923=_0x2b83c0;let _0x177531=[];config[_0x1a2923(0x14f)][_0x1a2923(0x125)](_0x4d6ca7=>{const _0x4672dc=_0x1a2923;if(!_0x4d6ca7['excluded']&&_0x4d6ca7[_0x4672dc(0x1f8)]!=config[_0x4672dc(0x134)]){let _0x4937b5=dbCoinResults['get'](_0x4672dc(0x255))[_0x4672dc(0x25e)]({'coin':_0x4d6ca7[_0x4672dc(0x1f8)]})[_0x4672dc(0x1fb)]();if(!_0x4937b5){const _0x49dc37=currentCoins[_0x4672dc(0x25e)](_0x257478=>_0x257478[_0x4672dc(0x1f8)]==_0x4d6ca7[_0x4672dc(0x1f8)]),_0x1a9d86=global['ticker'][noslash(_0x4d6ca7[_0x4672dc(0x211)])];let _0x31a7ca=_0x49dc37?_0x49dc37[_0x4672dc(0x172)]:null,_0x2bda97=_0x4d6ca7[_0x4672dc(0x26c)]?0x1/_0x1a9d86:_0x1a9d86,_0x26d04d;config[_0x4672dc(0x1b3)]['forEach'](_0x10fe0f=>{const _0x596110=_0x4672dc;!_0x26d04d&&(_0x26d04d=_0x10fe0f['changes'][_0x596110(0x25e)](_0x4f6c78=>_0x4f6c78[_0x596110(0x1f8)]==_0x4d6ca7[_0x596110(0x1f8)]),_0x26d04d&&(_0x31a7ca=_0x26d04d[_0x596110(0x172)],_0x2bda97=_0x26d04d['price']));}),_0x177531[_0x4672dc(0x25b)]({'coin':_0x4d6ca7[_0x4672dc(0x1f8)],'number':_0x31a7ca,'price':_0x2bda97});}}}),_0x177531[_0x1a2923(0x125)](_0x2aeee9=>{const _0x32f88a=_0x1a2923,_0x4d99d6={'coin':_0x2aeee9[_0x32f88a(0x1f8)],'number':_0x2aeee9[_0x32f88a(0x172)],'breakeven':_0x2aeee9['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x32f88a(0x1e6)](_0x32f88a(0x255))['push'](_0x4d99d6)[_0x32f88a(0x1d5)]();});}async function updateCoinResults(_0x1d51c7,_0x61d4ec=![]){const _0x2c00b9=_0x2b83c0;let _0x4cc563,_0x6d088a,_0x5eea5d,_0x35e54c,_0x3bd044,_0x14887b,_0x39c5d9=dbCoinResults[_0x2c00b9(0x1e6)](_0x2c00b9(0x255))[_0x2c00b9(0x25e)]({'coin':_0x1d51c7['coin']})['value']();!_0x39c5d9&&await initCoinResults();_0x1d51c7[_0x2c00b9(0x26c)]&&(_0x14887b={'filled':_0x1d51c7[_0x2c00b9(0x26f)]*_0x1d51c7['price'],'amount':_0x1d51c7[_0x2c00b9(0x26f)]*_0x1d51c7[_0x2c00b9(0x1e2)],'side':_0x1d51c7[_0x2c00b9(0x225)]=='sell'?_0x2c00b9(0x170):'sell','price':0x1/_0x1d51c7[_0x2c00b9(0x1e2)]},_0x1d51c7={..._0x1d51c7,..._0x14887b});_0x61d4ec?_0x6d088a=_0x1d51c7[_0x2c00b9(0x225)]==_0x2c00b9(0x170)?_0x39c5d9[_0x2c00b9(0x172)]+_0x1d51c7[_0x2c00b9(0x26f)]:_0x39c5d9[_0x2c00b9(0x172)]-_0x1d51c7['filled']:_0x6d088a=await getCoinNumber(_0x1d51c7['coin']);if(_0x1d51c7[_0x2c00b9(0x1ae)]&&_0x1d51c7[_0x2c00b9(0x1ae)][_0x2c00b9(0x214)]==config[_0x2c00b9(0x134)])_0x4cc563=_0x1d51c7[_0x2c00b9(0x1ae)][_0x2c00b9(0x20a)];else{if(_0x1d51c7['fee']&&_0x1d51c7['fee']['currency']==_0x2c00b9(0x184)&&!_0x61d4ec)_0x4cc563=_0x1d51c7[_0x2c00b9(0x1ae)]['cost']*global[_0x2c00b9(0x20c)][_0x2c00b9(0x184)+config['basecoin']];else _0x4cc563=defaultFee*_0x1d51c7['filled']*_0x1d51c7[_0x2c00b9(0x1e2)];}_0x1d51c7['side']==_0x2c00b9(0x170)?(_0x5eea5d=_0x6d088a!=0x0?(_0x39c5d9[_0x2c00b9(0x23a)]*_0x39c5d9['number']+_0x1d51c7[_0x2c00b9(0x1e2)]*(_0x6d088a-_0x39c5d9[_0x2c00b9(0x172)])+_0x4cc563)/_0x6d088a:0x0,_0x35e54c=_0x39c5d9[_0x2c00b9(0x24f)]):(_0x5eea5d=_0x6d088a!=0x0?(_0x39c5d9['breakeven']*_0x39c5d9['number']-_0x1d51c7[_0x2c00b9(0x1e2)]*(_0x39c5d9[_0x2c00b9(0x172)]-_0x6d088a)+_0x4cc563)/_0x6d088a:0x0,_0x35e54c=_0x39c5d9['realized']+(_0x1d51c7['price']-_0x39c5d9[_0x2c00b9(0x23a)])*_0x1d51c7[_0x2c00b9(0x26f)]);_0x3bd044=(_0x1d51c7['price']-_0x5eea5d-_0x4cc563/_0x1d51c7[_0x2c00b9(0x26f)])*_0x6d088a;let _0x5975d4={'coin':_0x1d51c7[_0x2c00b9(0x1f8)],'number':_0x6d088a,'breakeven':formatResult(_0x5eea5d,0x8),'realized':formatResult(_0x35e54c,0x8),'unrealized':formatResult(_0x3bd044,0x8),'fees':formatResult(_0x39c5d9[_0x2c00b9(0x204)]+_0x4cc563,0x8),'sells':_0x1d51c7['side']=='sell'?_0x39c5d9['sells']+0x1:_0x39c5d9[_0x2c00b9(0x12a)],'buys':_0x1d51c7['side']==_0x2c00b9(0x170)?_0x39c5d9[_0x2c00b9(0x1a5)]+0x1:_0x39c5d9['buys']};dbCoinResults['get'](_0x2c00b9(0x255))[_0x2c00b9(0x25e)]({'coin':_0x1d51c7[_0x2c00b9(0x1f8)]})[_0x2c00b9(0x161)](_0x5975d4)['write']();if(!_0x61d4ec){if(_0x1d51c7[_0x2c00b9(0x1ae)]&&_0x1d51c7[_0x2c00b9(0x1ae)]['currency']==_0x2c00b9(0x184)){const _0x4848b6=currentCoins[_0x2c00b9(0x25e)](_0x4d6286=>_0x4d6286[_0x2c00b9(0x1f8)]==_0x2c00b9(0x184));if(_0x4848b6){let _0x3efbf3=dbCoinResults[_0x2c00b9(0x1e6)](_0x2c00b9(0x255))[_0x2c00b9(0x25e)]({'coin':_0x2c00b9(0x184)})[_0x2c00b9(0x1fb)]();_0x5975d4={..._0x3efbf3,'number':_0x4848b6[_0x2c00b9(0x172)]},dbCoinResults[_0x2c00b9(0x1e6)](_0x2c00b9(0x255))[_0x2c00b9(0x25e)]({'coin':_0x2c00b9(0x184)})[_0x2c00b9(0x161)](_0x5975d4)[_0x2c00b9(0x1d5)]();}}}}async function placeOrder(_0x560253){const _0x122992=_0x2b83c0,_0x54bb25=config[_0x122992(0x141)]==_0x122992(0x1c4)?_0x122992(0x1c4):_0x122992(0x219);if(lockOrders==ORDERS[_0x122992(0x202)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x122992(0x1ad)],allOrdersPlaced=![],validateOrdersState=_0x122992(0x18a),lastOrders=[];for(const _0x4ef596 of _0x560253){let _0x1f6b64,_0x1ddb21,_0x2cf266,_0x330e49,_0x148381,_0x4b0081=_0x4ef596[_0x122992(0x211)];try{const _0x4836ff=await exchange[_0x122992(0x139)](_0x4b0081);_0x1f6b64=_0x4ef596['reverse']?0x1/_0x4ef596['last']:_0x4ef596[_0x122992(0x11f)],_0x1ddb21=_0x4836ff[_0x122992(0x13e)],_0x2cf266=_0x4836ff[_0x122992(0x25f)];_0x4ef596['reverse']?(_0x330e49=_0x4ef596['side']==_0x122992(0x170)?_0x122992(0x1df):_0x122992(0x170),_0x148381=Math[_0x122992(0x122)](_0x4ef596[_0x122992(0x1b7)])/_0x1f6b64):(_0x330e49=_0x4ef596['side'],_0x148381=Math[_0x122992(0x122)](_0x4ef596[_0x122992(0x1b7)]));_0x54bb25==_0x122992(0x219)&&(config['ordertype']==_0x122992(0x260)&&(_0x1f6b64=_0x330e49==_0x122992(0x170)?_0x1ddb21:_0x2cf266),config[_0x122992(0x141)]==_0x122992(0x268)&&(_0x1f6b64=_0x330e49==_0x122992(0x170)?_0x2cf266:_0x1ddb21));_0x148381=formatResult(_0x148381,0x8),_0x1f6b64=formatResult(_0x1f6b64,0x8);const _0x2765fa=_0x330e49=='sell'?config[_0x122992(0x11c)]?String[_0x122992(0x1e5)]('0x'+config[_0x122992(0x11c)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x30c5f9=_0x54bb25==_0x122992(0x1c4)?_0x122992(0x1cd):config['ordertype']==_0x122992(0x260)?'Limit\x20(high-margin)':_0x122992(0x1bf),_0x513b06=new Date()['getTime']()[_0x122992(0x13d)]()['slice'](-0x6)+'-'+Math[_0x122992(0x1d1)]()[_0x122992(0x13d)]()[_0x122992(0x173)](-0x6);lastOrders['push']({'customId':_0x513b06,'symbol':_0x4b0081,'coin':_0x4ef596[_0x122992(0x1f8)],'side':_0x330e49,'reverse':_0x4ef596[_0x122992(0x26c)],'filled':0x0});if(_0x54bb25==_0x122992(0x1c4))logHistory(_0x122992(0x233),''+_0x2765fa+_0x30c5f9+_0x122992(0x24b)+_0x4b0081+'\x20'+_0x330e49+'\x20#'+formatResult(_0x148381,0x8)+'\x20@'+formatResult(_0x1f6b64,0x8));else logHistory(_0x122992(0x233),''+_0x2765fa+_0x30c5f9+'\x20order:\x20'+_0x4b0081+'\x20'+_0x330e49+'\x20#'+formatResult(_0x148381,0x8)+'\x20@'+formatResult(_0x1f6b64,0x8));const _0x3193f2=await exchange[_0x122992(0x197)](_0x4b0081,_0x54bb25,_0x330e49,_0x148381,_0x1f6b64,{'clientOrderId':_0x513b06}),_0xbe4e49=lastOrders[_0x122992(0x19a)]-0x1;_0xbe4e49>=0x0&&lastOrders[_0xbe4e49][_0x122992(0x203)]==_0x513b06&&(lastOrders[_0xbe4e49]={...lastOrders[_0xbe4e49],'orderId':_0x3193f2['id'],'amount':_0x3193f2['amount'],'price':_0x3193f2['price'],'fee':_0x3193f2[_0x122992(0x1ae)]});if(config[_0x122992(0x230)]!=0x0){let _0x18c196=null;if(cooldownTracker['length']==config[_0x122992(0x230)]-0x1)_0x18c196=cooldownTracker[_0x122992(0x241)]();const _0x211f55=getTimeStamp();cooldownTracker[_0x122992(0x25b)](_0x211f55);if(_0x18c196){const _0xb69562=fns[_0x122992(0x1f3)](new Date(_0x211f55),new Date(_0x18c196));if(_0xb69562<cooldownInterval){logHistory(_0x122992(0x1c7),_0x122992(0x131)+config[_0x122992(0x230)]+_0x122992(0x248)+cooldownInterval/0x3c+_0x122992(0x189)+cooldownPeriod/(0xe10*0x3e8)+_0x122992(0x232)),coolingDown=!![];break;}}}}catch(_0x46a8b6){if(_0x46a8b6['toString']()[_0x122992(0x17d)](_0x122992(0x1c2)))lastOrders=lastOrders[_0x122992(0x26a)](_0x36a490=>_0x36a490[_0x122992(0x211)]!=_0x4b0081),logHistory('error',_0x122992(0x1a6)+_0x4b0081);else _0x46a8b6[_0x122992(0x13d)]()[_0x122992(0x17d)]('Invalid\x20quantity')?(lastOrders=lastOrders[_0x122992(0x26a)](_0x1877a8=>_0x1877a8[_0x122992(0x211)]!=_0x4b0081),logHistory(_0x122992(0x1c7),_0x122992(0x123)+_0x4b0081)):(lastOrders=lastOrders[_0x122992(0x26a)](_0x491246=>_0x491246[_0x122992(0x211)]!=_0x4b0081),await handleError(_0x46a8b6,_0x122992(0x18e),_0x4b0081));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x122992(0x19a)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5e12c1=config['ordertype']==_0x122992(0x1c4)?validateOrderTimeout*0x3c*0x3e8:config[_0x122992(0x21d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1af362=_0x122992;validateOrders(_0x1af362(0x181));},_0x5e12c1);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x122992(0x1b4),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x122992(0x1cb)]&&logHistory('error',_0x122992(0x20d));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x122992(0x1cb)]&&(config[_0x122992(0x141)]==_0x122992(0x1c4)?logHistory(_0x122992(0x1c7),_0x122992(0x261)):logHistory(_0x122992(0x1c7),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x2a771f){const _0x30724e=_0x2b83c0,_0x61ed5e={...config,'openOrders':_0x2a771f};let _0x1a9142=dbConfig[_0x30724e(0x1e6)](_0x30724e(0x1a1))['find']({'botID':botID})[_0x30724e(0x1fb)]();_0x1a9142&&dbConfig[_0x30724e(0x1e6)](_0x30724e(0x1a1))[_0x30724e(0x25e)]({'botID':botID})[_0x30724e(0x161)](_0x61ed5e)[_0x30724e(0x1d5)]();}function restoreOrders(){const _0x26ac18=_0x2b83c0;let _0x7554bd;config['openOrders']&&allOpenOrders[_0x26ac18(0x125)](_0x5bde10=>{const _0x4900c0=_0x26ac18,_0x2f7b7a=config['openOrders'][_0x4900c0(0x25e)](_0x5c2d4a=>_0x5c2d4a[_0x4900c0(0x1d9)]==_0x5bde10['id']);_0x2f7b7a&&(lastOrders['push'](_0x2f7b7a),_0x7554bd=_0x5bde10['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x26ac18(0x1ad)],validateOrdersState=_0x26ac18(0x207),allOrdersPlaced=!![];const _0x46c1ac=new Date()[_0x26ac18(0x17a)](),_0x401823=config['ordertype']==_0x26ac18(0x1c4)?validateOrderTimeout*0x3c*0x3e8:config[_0x26ac18(0x21d)]*0x3c*0x3e8;if(_0x7554bd+_0x401823>_0x46c1ac){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x23620e=_0x26ac18;validateOrders(_0x23620e(0x181));},_0x7554bd+_0x401823-_0x46c1ac);}else validateOrders('final');}}async function sendPortfolioTelegram(){const _0x54008c=_0x2b83c0;if(!coinsLoaded){process[_0x54008c(0x135)]({'telegrammsg':_0x54008c(0x160)},_0x534294=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x5e6427=[_0x54008c(0x1ff),_0x54008c(0x247),_0x54008c(0x15b),'USDT'],_0x2f1340=_0x5e6427[_0x54008c(0x17d)](config[_0x54008c(0x134)])?0x2:0x8;let _0x58fece='';if(config['showname'])_0x58fece='<b>'+config['botname']+_0x54008c(0x25d);else _0x58fece=_0x54008c(0x1b1)+botID+_0x54008c(0x25d);const _0x182524=getKPIs(_0x54008c(0x134)),_0xfb8446=getKPIs(_0x54008c(0x1a7));_0x58fece+=_0x54008c(0x209),_0x58fece+=_0x182524[_0x54008c(0x152)]+_0x54008c(0x1a3)+_0x182524['value']+'\x20\x0a',_0x58fece+=_0x182524[_0x54008c(0x1a2)]+':\x20'+_0x182524[_0x54008c(0x21e)]+_0x54008c(0x174),_0x58fece+=_0xfb8446[_0x54008c(0x152)]+':\x20'+_0xfb8446[_0x54008c(0x1fb)]+'\x20'+config[_0x54008c(0x134)]+'\x0a',_0x58fece+=_0xfb8446[_0x54008c(0x1a2)]+':\x20'+_0xfb8446['change']+'%\x20\x0a',_0x58fece+='\x0a',_0x58fece+=_0x54008c(0x1a4),_0x58fece+=_0x54008c(0x119),_0x58fece+=_0x54008c(0x1a4),currentCoins[_0x54008c(0x125)](_0x26f7fc=>{const _0x159a21=_0x54008c;_0x58fece+=_0x26f7fc[_0x159a21(0x1f8)][_0x159a21(0x179)](0x7)+'|\x20'+formatPad(_0x26f7fc[_0x159a21(0x17c)],0x2,0x6)+'|\x20'+formatPad(_0x26f7fc[_0x159a21(0x1ee)],0x2,0x6)+'|\x20'+formatPad(_0x26f7fc[_0x159a21(0x194)]*0x64,0x2,0x6)+'\x0a';}),_0x58fece+='</pre>',process[_0x54008c(0x135)]({'telegrammsg':_0x58fece},_0x40c3fb=>{});}function formatPad(_0x48249f,_0x397493,_0x5de1b4){const _0x5d3f9c=_0x2b83c0,_0x4faa95=formatResultString(_0x48249f,_0x397493);return _0x4faa95?_0x4faa95[_0x5d3f9c(0x22c)](_0x5de1b4):''[_0x5d3f9c(0x22c)](_0x5de1b4);}function logHistory(_0x40c8f2,_0x58cdfc,_0x2487d1=''){const _0x15afe5=_0x2b83c0;let _0x36604b={'time':getTimeStamp(),'type':_0x40c8f2,'event':_0x58cdfc};dbLogs[_0x15afe5(0x1e6)](_0x15afe5(0x267))[_0x15afe5(0x25b)](_0x36604b)[_0x15afe5(0x1d5)]();if(_0x2487d1=='')_0x2487d1=_0x58cdfc;proxyEmit(_0x15afe5(0x16c),{'log':_0x36604b,'summary':_0x2487d1}),process[_0x15afe5(0x135)]({'telegram':{..._0x36604b,'botname':config[_0x15afe5(0x1ec)],'showname':config['showname']}},_0x179f27=>{}),logger[_0x15afe5(0x1dd)](''+_0x36604b[_0x15afe5(0x16c)]);}function emitHistory(_0x2a4610={}){const _0x20c2e2=_0x2b83c0;Object[_0x20c2e2(0x257)](_0x2a4610)[_0x20c2e2(0x19a)]==0x0&&(_0x2a4610={'type':[_0x20c2e2(0x233),_0x20c2e2(0x16c)],'event':'','page':0x1});if(_0x2a4610[_0x20c2e2(0x1e9)]['includes'](_0x20c2e2(0x16c)))_0x2a4610[_0x20c2e2(0x1e9)][_0x20c2e2(0x22b)](_0x2a4610['type'][_0x20c2e2(0x190)](_0x20c2e2(0x16c)),0x1,_0x20c2e2(0x1c7),_0x20c2e2(0x1b4));if(dbLogs['has'](_0x20c2e2(0x267))[_0x20c2e2(0x1fb)]()){let _0x33b987=dbLogs[_0x20c2e2(0x1e6)](_0x20c2e2(0x267))[_0x20c2e2(0x26a)](_0x2a6e08=>{const _0xe35369=_0x20c2e2;if(_0x2a4610[_0xe35369(0x1e9)][_0xe35369(0x19a)]==0x0)return![];else return _0x2a4610[_0xe35369(0x1e9)][_0xe35369(0x17d)](_0x2a6e08['type']);})[_0x20c2e2(0x26a)](_0x38d361=>{const _0xd623e0=_0x20c2e2;if(_0x2a4610[_0xd623e0(0x16c)]=='')return!![];else return _0x38d361['event'][_0xd623e0(0x16b)]()[_0xd623e0(0x17d)](_0x2a4610['event'][_0xd623e0(0x16b)]());})[_0x20c2e2(0x1a0)](_0x20c2e2(0x137)),_0x462100=_0x33b987[_0x20c2e2(0x1fb)]()[_0x20c2e2(0x19a)];_0x33b987=_0x33b987[_0x20c2e2(0x26c)]()['slice']((_0x2a4610[_0x20c2e2(0x11b)]-0x1)*logPageSize,_0x2a4610[_0x20c2e2(0x11b)]*logPageSize-0x1)[_0x20c2e2(0x26c)]()[_0x20c2e2(0x1fb)](),proxyEmit(_0x20c2e2(0x266),{'logs':_0x33b987,'total':_0x462100});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2072ed){const _0x5b049e=_0x2b83c0;if(dbLogs[_0x5b049e(0x159)]('logs')[_0x5b049e(0x1fb)]()){const _0x4e8f07=dbLogs['get'](_0x5b049e(0x267))[_0x5b049e(0x1a0)]('time')[_0x5b049e(0x26a)](_0x27ec98=>{const _0x2450e2=_0x5b049e;return _0x27ec98[_0x2450e2(0x1e9)]==_0x2450e2(0x233);})[_0x5b049e(0x1fb)]();dbLogs[_0x5b049e(0x1e6)](_0x5b049e(0x267))[_0x5b049e(0x13c)]()['write'](),dbLogs[_0x5b049e(0x1e6)](_0x5b049e(0x267))['assign'](_0x4e8f07)[_0x5b049e(0x1d5)](),emitHistory(_0x2072ed);}}async function pauseBot(_0x27d887=''){const _0x3f4dd4=_0x2b83c0,_0x2a1cb2=new Date()[_0x3f4dd4(0x17a)]();if(!lastErrorShown||_0x2a1cb2-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2a1cb2;!lastBotPause?(lastBotPause=_0x2a1cb2,consecutivePauses=0x1):(_0x2a1cb2-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3f4dd4(0x135)]({'stop':_0x3f4dd4(0x1e1)},_0x1a553a=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3f4dd4(0x17a)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x27d887)_0x27d887+=_0x3f4dd4(0x154);logHistory(_0x3f4dd4(0x1c7),_0x27d887+_0x3f4dd4(0x246)+pauseBotInterval/0xea60+_0x3f4dd4(0x264)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x4357b3=_0x2b83c0;process[_0x4357b3(0x135)]({'stop':_0x4357b3(0x18d)},_0x4d6c0b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3720f5,_0x4666c4){const _0x189f2a=_0x2b83c0;if(_0x3720f5[_0x189f2a(0x13d)]()[_0x189f2a(0x17d)](_0x189f2a(0x1ed)))return logHistory(_0x189f2a(0x1c7),config[_0x189f2a(0x217)]+'\x20API\x20key\x20is\x20invalid'),![];else{if(_0x3720f5['toString']()[_0x189f2a(0x17d)](_0x189f2a(0x1ac)))return logHistory(_0x189f2a(0x1c7),config[_0x189f2a(0x217)]+'\x20API\x20secret\x20is\x20invalid'),![];else{if(_0x3720f5[_0x189f2a(0x13d)]()[_0x189f2a(0x17d)](_0x189f2a(0x180)))return logHistory(_0x189f2a(0x1c7),config[_0x189f2a(0x217)]+_0x189f2a(0x1bb)+config[_0x189f2a(0x217)]),![];else await handleError(_0x3720f5,_0x4666c4);}}}async function handleError(_0x34cd5e,_0x5ab785,_0xbe10e6=''){const _0x144997=_0x2b83c0;if(_0x34cd5e[_0x144997(0x13d)]()[_0x144997(0x17d)](_0x144997(0x12c)))await pauseBot(config[_0x144997(0x217)]+_0x144997(0x1c8));else{if(_0x34cd5e[_0x144997(0x13d)]()[_0x144997(0x17d)]('ExchangeNotAvailable'))await pauseBot(config[_0x144997(0x217)]+_0x144997(0x1b9));else{if(_0x34cd5e[_0x144997(0x13d)]()['includes'](_0x144997(0x127)))await pauseBot(config['exchange']+_0x144997(0x213));else{if(_0x34cd5e['toString']()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x144997(0x1c7),_0x5ab785+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x144997(0x1c7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x34cd5e[_0x144997(0x13d)]()[_0x144997(0x17d)](_0x144997(0x177)))logHistory('error',_0x5ab785+_0x144997(0x13a)),logHistory(_0x144997(0x1c7),_0x144997(0x253)),await killBot();else{if(_0x34cd5e[_0x144997(0x13d)]()['includes'](_0x144997(0x1ed)))logHistory(_0x144997(0x1c7),_0x5ab785+'\x20|\x20'+config[_0x144997(0x217)]+_0x144997(0x1d0)),logHistory(_0x144997(0x1c7),_0x144997(0x253)),await killBot();else{if(_0x34cd5e[_0x144997(0x13d)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x144997(0x1c7),_0x5ab785+_0x144997(0x154)+config[_0x144997(0x217)]+_0x144997(0x1bc)),logHistory(_0x144997(0x1c7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x34cd5e['toString']()['includes']('AuthenticationError'))logHistory(_0x144997(0x1c7),_0x5ab785+_0x144997(0x154)+config[_0x144997(0x217)]+_0x144997(0x24c)+config['exchange']),logHistory(_0x144997(0x1c7),_0x144997(0x253)),await killBot();else _0x34cd5e['toString']()[_0x144997(0x17d)]('InsufficientFunds')?logHistory(_0x144997(0x1c7),_0x5ab785+_0x144997(0x116)+_0xbe10e6):(logger[_0x144997(0x1dd)](_0x5ab785+_0x144997(0x16d),_0x34cd5e),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x245625,_0x42daaf){const _0x54b232=_0x2b83c0;return parseFloat(_0x245625[_0x54b232(0x205)](_0x42daaf));}function formatResultTruncate(_0x20fc34,_0x54c59d){const _0xe88474=_0x2b83c0;let _0x3bce38=formatResultString(_0x20fc34,0xa),_0x3176e6=_0x3bce38[_0xe88474(0x190)]('.');return _0x3176e6!=-0x1&&(_0x3bce38=_0x3bce38[_0xe88474(0x173)](0x0,_0x3176e6+_0x54c59d+0x1)),Number(_0x3bce38);}function formatResultString(_0x444d89,_0x2e6f2f){const _0x2536ec=_0x2b83c0;let _0x324fc8;if(!(''+_0x444d89)['includes']('e'))_0x324fc8=+(Math[_0x2536ec(0x19e)](_0x444d89+'e+'+_0x2e6f2f)+'e-'+_0x2e6f2f);else{let _0xc52169=(''+_0x444d89)[_0x2536ec(0x20f)]('e'),_0x89d03e='';+_0xc52169[0x1]+_0x2e6f2f>0x0&&(_0x89d03e='+'),_0x324fc8=+(Math[_0x2536ec(0x19e)](+_0xc52169[0x0]+'e'+_0x89d03e+(+_0xc52169[0x1]+_0x2e6f2f))+'e-'+_0x2e6f2f);}return Number(_0x324fc8)[_0x2536ec(0x205)](_0x2e6f2f);}function getServerTime(){const _0x5d3a86=_0x2b83c0,_0x11818e=new Date();return _0x11818e[_0x5d3a86(0x1ea)]()+'/'+(_0x11818e[_0x5d3a86(0x176)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x11818e[_0x5d3a86(0x1ef)]()[_0x5d3a86(0x13d)]()[_0x5d3a86(0x22c)](0x2,'0')+'\x20'+_0x11818e[_0x5d3a86(0x1fd)]()[_0x5d3a86(0x13d)]()[_0x5d3a86(0x22c)](0x2,'0')+':'+_0x11818e[_0x5d3a86(0x171)]()[_0x5d3a86(0x13d)]()['padStart'](0x2,'0')+':'+_0x11818e[_0x5d3a86(0x226)]()['toString']()[_0x5d3a86(0x22c)](0x2,'0');}function getTimeStamp(){const _0x5138d2=_0x2b83c0,_0x4e5475=shiftedTime();return _0x4e5475[_0x5138d2(0x1ea)]()+'/'+(_0x4e5475[_0x5138d2(0x176)]()+0x1)[_0x5138d2(0x13d)]()[_0x5138d2(0x22c)](0x2,'0')+'/'+_0x4e5475[_0x5138d2(0x1ef)]()[_0x5138d2(0x13d)]()[_0x5138d2(0x22c)](0x2,'0')+'\x20'+_0x4e5475['getHours']()[_0x5138d2(0x13d)]()[_0x5138d2(0x22c)](0x2,'0')+':'+_0x4e5475['getMinutes']()[_0x5138d2(0x13d)]()[_0x5138d2(0x22c)](0x2,'0')+':'+_0x4e5475[_0x5138d2(0x226)]()[_0x5138d2(0x13d)]()['padStart'](0x2,'0');}function getDate(){const _0x5a5852=_0x2b83c0,_0x10fa19=shiftedTime();return _0x10fa19[_0x5a5852(0x1ea)]()+'/'+(_0x10fa19['getMonth']()+0x1)[_0x5a5852(0x13d)]()[_0x5a5852(0x22c)](0x2,'0')+'/'+_0x10fa19[_0x5a5852(0x1ef)]()[_0x5a5852(0x13d)]()[_0x5a5852(0x22c)](0x2,'0');}function getHour(){const _0xf6844c=_0x2b83c0,_0x1a93af=shiftedTime();return _0x1a93af['getHours']()[_0xf6844c(0x13d)]()[_0xf6844c(0x22c)](0x2,'0');}function sleep(_0x25ea28){return new Promise(_0x72a53f=>setTimeout(_0x72a53f,_0x25ea28));}function shiftedTime(){const _0xfe63a3=_0x2b83c0,_0x371483=new Date();let _0x1745b0=_0x371483;if(config&&config[_0xfe63a3(0x153)]!==0x0)_0x1745b0=fns[_0xfe63a3(0x1d6)](_0x371483,{'hours':config['timeshift']});return _0x1745b0;}function timer(_0x52adfa){const _0x2f2bb3=_0x2b83c0,_0x4e5f83=new Date();!lasttime?console['log'](_0x2f2bb3(0x12d),_0x52adfa,_0x4e5f83):console[_0x2f2bb3(0x162)](_0x2f2bb3(0x12d),_0x52adfa,(_0x4e5f83-lasttime)/0x3e8),lasttime=_0x4e5f83;}