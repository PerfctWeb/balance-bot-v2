const _0x44508f=_0x4b8e;(function(_0x1e794b,_0x16359c){const _0x3dd673=_0x4b8e,_0x2c95ea=_0x1e794b();while(!![]){try{const _0x4afb4d=parseInt(_0x3dd673(0x2ff))/0x1*(parseInt(_0x3dd673(0x303))/0x2)+parseInt(_0x3dd673(0x35f))/0x3*(parseInt(_0x3dd673(0x27c))/0x4)+parseInt(_0x3dd673(0x292))/0x5*(parseInt(_0x3dd673(0x21d))/0x6)+-parseInt(_0x3dd673(0x215))/0x7*(parseInt(_0x3dd673(0x37b))/0x8)+parseInt(_0x3dd673(0x27e))/0x9+-parseInt(_0x3dd673(0x35c))/0xa*(parseInt(_0x3dd673(0x2e4))/0xb)+-parseInt(_0x3dd673(0x235))/0xc;if(_0x4afb4d===_0x16359c)break;else _0x2c95ea['push'](_0x2c95ea['shift']());}catch(_0x700185){_0x2c95ea['push'](_0x2c95ea['shift']());}}}(_0x3bce,0x65bcd));const _0x29d6c1=function(){let _0x451e01=!![];return function(_0x4fcce2,_0x3659a5){const _0x4b46b9=_0x451e01?function(){const _0x2fcdf4=_0x4b8e;if(_0x3659a5){const _0x5c9609=_0x3659a5[_0x2fcdf4(0x290)](_0x4fcce2,arguments);return _0x3659a5=null,_0x5c9609;}}:function(){};return _0x451e01=![],_0x4b46b9;};}(),_0x494f69=_0x29d6c1(this,function(){const _0x2d16c2=_0x4b8e;return _0x494f69[_0x2d16c2(0x297)]()[_0x2d16c2(0x1ec)](_0x2d16c2(0x310))[_0x2d16c2(0x297)]()[_0x2d16c2(0x241)](_0x494f69)[_0x2d16c2(0x1ec)]('(((.+)+)+)+$');});_0x494f69();'use strict';const ccxt=require(_0x44508f(0x201)),low=require('lowdb'),FileSync=require(_0x44508f(0x258)),fs=require('fs'),fns=require(_0x44508f(0x2c8)),Crypt=require(_0x44508f(0x2e3))['Crypt'],util=require(_0x44508f(0x332)),argv=require('yargs/yargs')(process[_0x44508f(0x306)]['slice'](0x2))[_0x44508f(0x306)],path=require('path');let exchange;global['ticker']={},global[_0x44508f(0x1f0)]={};const usdBasecoins=[_0x44508f(0x268),'BUSD',_0x44508f(0x2a3),'USDT',_0x44508f(0x262),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x44508f(0x295)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x44508f(0x32a)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x44508f(0x2ed)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const serverversion=require(_0x44508f(0x273))['version'],botID=process[_0x44508f(0x306)][0x2]||_0x44508f(0x1fe),pattern=/^[0-9]{3}$/;!pattern[_0x44508f(0x307)](botID)&&(console['log'](_0x44508f(0x374)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x44508f(0x306)][0x3]||'',configpath=userID?_0x44508f(0x2e7)+userID+'/':'./config/',logspath=userID?_0x44508f(0x2f2)+userID+'/':_0x44508f(0x2f2),loggerfile=fs[_0x44508f(0x34a)](logspath+_0x44508f(0x34f),{'flags':'a'});!fs[_0x44508f(0x20d)](configpath)&&fs[_0x44508f(0x28c)](configpath);!fs[_0x44508f(0x20d)](logspath)&&fs[_0x44508f(0x28c)](logspath);const configfile=configpath+_0x44508f(0x25e)+botID+_0x44508f(0x2e1),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x44508f(0x25e)+botID+_0x44508f(0x278),coinresultsfile=configpath+'bot-'+botID+_0x44508f(0x32e),settingsfile=configpath+_0x44508f(0x32f),securefile=configpath+_0x44508f(0x1fa),configbackuppath=configpath+_0x44508f(0x2e9),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x44508f(0x1ef)]({'data':[],'version':serverversion})[_0x44508f(0x2c4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x44508f(0x2c4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x44508f(0x1ef)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x44508f(0x2d1),'rsaStandard':_0x44508f(0x345)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x16c0c3=>{const _0x2a2339=_0x44508f;console[_0x2a2339(0x1ff)](_0x16c0c3);},'simple':_0x1e3899=>{const _0x532406=_0x44508f;console[_0x532406(0x1ff)](_0x1e3899),loggerfile['write'](util[_0x532406(0x329)](_0x1e3899)+'\x0a');},'full':async(_0x145d5f,_0x1a59a3='')=>{const _0x5cabeb=_0x44508f;let _0x5734f2;if(config['showname'])_0x5734f2=getTimeStamp()+':\x20'+config[_0x5cabeb(0x22a)]+_0x5cabeb(0x210)+_0x145d5f;else _0x5734f2=getTimeStamp()+_0x5cabeb(0x221)+botID+_0x5cabeb(0x210)+_0x145d5f;console['log'](_0x5734f2),loggerfile[_0x5cabeb(0x2c4)](util[_0x5cabeb(0x329)](_0x5734f2)+'\x0a'),_0x1a59a3&&(console['log'](_0x1a59a3),loggerfile[_0x5cabeb(0x2c4)](util['format'](_0x1a59a3)+'\x0a'));},'debug':async(_0x1b241d,_0x316068='')=>{const _0x1a7e44=_0x44508f;let _0x5023a1;if(config[_0x1a7e44(0x1e4)])_0x5023a1=getTimeStamp()+':\x20'+config[_0x1a7e44(0x22a)]+_0x1a7e44(0x32d)+_0x1b241d;else _0x5023a1=getTimeStamp()+_0x1a7e44(0x221)+botID+_0x1a7e44(0x32d)+_0x1b241d;if(debugging)console[_0x1a7e44(0x1ff)](_0x5023a1);loggerfile[_0x1a7e44(0x2c4)](util['format'](_0x5023a1)+'\x0a');if(_0x316068){if(debugging)console[_0x1a7e44(0x1ff)](_0x316068);loggerfile[_0x1a7e44(0x2c4)](util[_0x1a7e44(0x329)](_0x316068)+'\x0a');}}};process['on']('uncaughtException',function(_0x127e43){const _0xa94fb2=_0x44508f;logHistory('error',_0xa94fb2(0x33c)),logger[_0xa94fb2(0x291)](_0xa94fb2(0x229),_0x127e43);});settings[_0x44508f(0x342)]!=config[_0x44508f(0x342)]&&updateTimeshift(settings[_0x44508f(0x342)]);settings[_0x44508f(0x2b0)]!=config[_0x44508f(0x2b0)]&&updateOnepagemode(settings[_0x44508f(0x2b0)]);process[_0x44508f(0x226)]({'started':_0x44508f(0x27a)},_0x4df3c8=>{}),initializeProcessListeners();function proxyEmit(_0x3634b3,_0x356fac=null){const _0x2a5541=_0x44508f;process[_0x2a5541(0x226)]({'function':_0x3634b3,'args':_0x356fac},_0x132404=>{});}function initializeProcessListeners(){process['on']('message',_0x2fa4d7=>{const _0x20703b=_0x4b8e;switch(Object['keys'](_0x2fa4d7)[0x0]){case _0x20703b(0x342):_0x2fa4d7[_0x20703b(0x342)]!=undefined&&(settings['timeshift']=_0x2fa4d7[_0x20703b(0x342)],updateTimeshift(settings[_0x20703b(0x342)]));break;case _0x20703b(0x2b0):_0x2fa4d7[_0x20703b(0x2b0)]!=undefined&&(settings['onepagemode']=_0x2fa4d7['onepagemode'],updateOnepagemode(settings[_0x20703b(0x2b0)]));break;case _0x20703b(0x328):_0x2fa4d7[_0x20703b(0x328)]!=undefined&&(bots=JSON['parse'](_0x2fa4d7[_0x20703b(0x328)]),proxyEmit('bots',bots));break;case _0x20703b(0x373):switch(_0x2fa4d7[_0x20703b(0x373)]){case _0x20703b(0x269):initclient();break;case _0x20703b(0x2e5):toggleBotMode();break;case'emitHistory':emitHistory(_0x2fa4d7['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x2fa4d7[_0x20703b(0x2ca)]);break;case'getPortfolio':getPortfolio(_0x2fa4d7[_0x20703b(0x2ca)]);break;case _0x20703b(0x1f5):storeConfiguration(_0x2fa4d7[_0x20703b(0x2ca)]);break;case _0x20703b(0x35d):storeHeadless(_0x2fa4d7[_0x20703b(0x2ca)]);break;case _0x20703b(0x28e):storeFiat(_0x2fa4d7[_0x20703b(0x2ca)]);break;case _0x20703b(0x2ee):resetHistory();break;case _0x20703b(0x22e):getStartingBalances(getNormalizedPerformance());break;case _0x20703b(0x200):placeOrder(_0x2fa4d7[_0x20703b(0x2ca)]);break;case'cancelLoading':cancelLoading();break;case _0x20703b(0x2c9):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x20703b(0x305):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2812ce=![]){const _0x39f626=_0x44508f;logger[_0x39f626(0x291)](_0x39f626(0x2c6)+(_0x2812ce?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x39f626(0x2e8)+config[_0x39f626(0x32c)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2812ce)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x39f626(0x2be)]!=''&&config[_0x39f626(0x2be)]!='***'){loadingProgress=0x0;if(_0x2812ce){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1a0235){handleErrorNoStop(_0x1a0235,_0x39f626(0x30a));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x40d567=await getCoins();[currentCoins,currentCoinsAll]=_0x40d567,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x39f626(0x365)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x39f626(0x1e2)]==0x0&&allOpenOrders[_0x39f626(0x1e2)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x135422=_0x44508f;exchangeStopped=!![];try{await exchange[_0x135422(0x28a)]();}catch(_0x198ad9){await handleError(_0x198ad9,_0x135422(0x324));}}async function reloadExchange(){const _0x1b975e=_0x44508f;logger[_0x1b975e(0x291)](_0x1b975e(0x361));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1b975e(0x291)](_0x1b975e(0x298)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x273b33=config[_0x44508f(0x32c)],_0x404479=config[_0x44508f(0x2be)],_0x248d91=config[_0x44508f(0x246)],_0x5b0f66=config[_0x44508f(0x377)]){const _0x54c97b=_0x44508f;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x273b33)&&(logHistory(_0x54c97b(0x321),_0x54c97b(0x368)+_0x273b33+_0x54c97b(0x2fa)),killBot());const _0x638902=ccxt[_0x54c97b(0x2dd)][_0x273b33['toLowerCase']()];exchange=new _0x638902({'apiKey':_0x404479,'secret':_0x248d91,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x54c97b(0x233)}});if(_0x5b0f66)exchange[_0x54c97b(0x23a)]=_0x5b0f66;}function setStableCoins(){const _0x114678=_0x44508f;let _0xf96ca=config['basecoin']==_0x114678(0x1fc)?_0x114678(0x1fc):_0x114678(0x29c),_0x39b78d=!allSymbols[_0x114678(0x2da)](_0xf96ca+'/USD')?_0x114678(0x2cd):'USD',_0xe527ec=!allSymbols[_0x114678(0x2da)](_0xf96ca+'/EUR')?_0x39b78d:_0x114678(0x21e);stablecoins={'eur':{'coin':''+_0xf96ca+_0xe527ec,'symbol':_0xf96ca+'/'+_0xe527ec},'usd':{'coin':''+_0xf96ca+_0x39b78d,'symbol':_0xf96ca+'/'+_0x39b78d}};}async function initwsCcxt(){const _0xfa108e=_0x44508f;initCycle++;const _0x4e5887=initCycle;let _0x360e2d=[];config['portfolio'][_0xfa108e(0x2ea)](_0x40234=>{const _0x48e286=_0xfa108e;if(!_0x40234['excluded']&&_0x40234[_0x48e286(0x2de)]!=config[_0x48e286(0x2b1)])_0x360e2d[_0x48e286(0x2a7)](_0x40234[_0x48e286(0x2c5)]);});if(!_0x360e2d[_0xfa108e(0x2da)](stablecoins[_0xfa108e(0x36a)][_0xfa108e(0x2c5)]))_0x360e2d[_0xfa108e(0x2a7)](stablecoins[_0xfa108e(0x36a)][_0xfa108e(0x2c5)]);if(!_0x360e2d[_0xfa108e(0x2da)](stablecoins[_0xfa108e(0x238)][_0xfa108e(0x2c5)]))_0x360e2d[_0xfa108e(0x2a7)](stablecoins[_0xfa108e(0x238)]['symbol']);if(config['exchange']['startsWith'](_0xfa108e(0x2e2))){if(!_0x360e2d[_0xfa108e(0x2da)](_0xfa108e(0x254)+config['basecoin']))_0x360e2d['push'](_0xfa108e(0x254)+config[_0xfa108e(0x2b1)]);}loadCoins(_0x360e2d),_0x360e2d=validateSymbols(_0x360e2d);const _0x2438f6=async _0x4fafc2=>{const _0x25f9d0=_0xfa108e;let _0x32a4fc;try{const _0x58fc94=await exchange[_0x25f9d0(0x333)](_0x4fafc2);Object[_0x25f9d0(0x285)](_0x58fc94)['forEach'](_0x50ae12=>{const _0x223ebb=_0x25f9d0;_0x32a4fc=_0x50ae12[0x1][_0x223ebb(0x2c5)],global[_0x223ebb(0x2c0)][noslash(_0x32a4fc)]=_0x50ae12[0x1][_0x223ebb(0x20b)],global[_0x223ebb(0x1f0)][_0x32a4fc]=_0x50ae12[0x1][_0x223ebb(0x351)];});}catch(_0x1738b2){await handleError(_0x1738b2,_0x25f9d0(0x28b),_0x32a4fc);}},_0x40efbf=async _0x3874da=>{const _0x559cc0=_0xfa108e;while(initCycle==_0x4e5887){if(!botPaused)try{const _0x588117=await exchange[_0x559cc0(0x23b)](_0x3874da);global[_0x559cc0(0x2c0)][noslash(_0x588117[0x0][_0x559cc0(0x2c5)])]=_0x588117[0x0][_0x559cc0(0x293)],await sleep(0x3e8);}catch(_0xa12dc3){if(!exchangeStopped)await handleError(_0xa12dc3,_0x559cc0(0x312),_0x3874da);}else await sleep(0x64);}},_0x13f705=async _0x5bc62a=>{const _0x3b6855=_0xfa108e;await sleep(0x3c*0x3e8);while(initCycle==_0x4e5887){if(!botPaused){let _0x44543b;try{const _0x1b6c42=await exchange[_0x3b6855(0x333)](_0x5bc62a);Object['entries'](_0x1b6c42)[_0x3b6855(0x2ea)](_0x27dcac=>{const _0x211b15=_0x3b6855;_0x44543b=_0x27dcac[0x1][_0x211b15(0x2c5)],global['change'][_0x44543b]=_0x27dcac[0x1][_0x211b15(0x351)];}),await sleep(0x3c*0x3e8);}catch(_0x17aabc){if(!exchangeStopped)await handleError(_0x17aabc,_0x3b6855(0x218),_0x44543b);}}else await sleep(0x64);}},_0x6cd81b=async _0x53d777=>{const _0x6e4b3a=_0xfa108e;while(initCycle==_0x4e5887){if(!botPaused)try{const _0x399f15=await exchange[_0x6e4b3a(0x33f)](_0x53d777);_0x399f15[_0x6e4b3a(0x2ea)](_0x579b4b=>{updateNumberCoinsCcxt(_0x579b4b);});}catch(_0x22445d){if(!exchangeStopped)await handleError(_0x22445d,_0x6e4b3a(0x26b));}else await sleep(0x64);}};_0x2438f6(_0x360e2d),_0x13f705(_0x360e2d),_0x360e2d['forEach'](_0xefd7aa=>{_0x40efbf(_0xefd7aa),_0x6cd81b(_0xefd7aa);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x139a4c=_0x44508f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x13cdae=await getCoins(),[_0x1d1546,_0x578ade]=_0x13cdae;let _0x357784=[];currentCoins['forEach'](_0x3ec724=>{const _0x45668e=_0x4b8e,_0x2d370c=_0x1d1546[_0x45668e(0x296)](_0x3a113f=>_0x3a113f['coin']==_0x3ec724[_0x45668e(0x2de)]);if(_0x2d370c){if(_0x3ec724[_0x45668e(0x24a)]!=_0x2d370c[_0x45668e(0x24a)]){let _0x332d26;if(_0x3ec724[_0x45668e(0x2de)]!=config['basecoin']){const _0x1fce60=global[_0x45668e(0x2c0)][noslash(_0x3ec724[_0x45668e(0x2c5)])];_0x332d26=_0x3ec724[_0x45668e(0x224)]?0x1/_0x1fce60:_0x1fce60;}else _0x332d26=0x1;_0x357784[_0x45668e(0x2a7)]({'coin':_0x3ec724[_0x45668e(0x2de)],'symbol':_0x3ec724['symbol'],'price':_0x332d26,'number':Number(formatResult(_0x2d370c['number']-_0x3ec724[_0x45668e(0x24a)],0x8)),'basecoinvalue':_0x332d26*(_0x2d370c[_0x45668e(0x24a)]-_0x3ec724['number'])});}}});if(_0x357784[_0x139a4c(0x1e2)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x139a4c(0x291)](_0x139a4c(0x2ce)+_0x357784[0x0][_0x139a4c(0x272)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x139a4c(0x28f)]);if(lastFees[_0x139a4c(0x28f)]==0x0||Math[_0x139a4c(0x277)](_0x357784[0x0][_0x139a4c(0x272)])>lastFees[_0x139a4c(0x28f)]){delete _0x357784[0x0][_0x139a4c(0x2c5)],delete _0x357784[0x0][_0x139a4c(0x272)];let _0x43a0b7=[],_0xa99711=[...config[_0x139a4c(0x357)]]||[],_0x327aee=config[_0x139a4c(0x357)];_0xa99711[_0x139a4c(0x323)]((_0xaa9991,_0x197cdf)=>_0xaa9991['date']>_0x197cdf['date']?-0x1:_0x197cdf[_0x139a4c(0x350)]>_0xaa9991[_0x139a4c(0x350)]?0x1:0x0);const _0x4f380e=getDate();if(_0xa99711[0x0]){const _0x4581cf=fns[_0x139a4c(0x1f2)](_0xa99711[0x0][_0x139a4c(0x350)],_0x139a4c(0x34d),new Date()),_0x3fcf93=fns['parse'](_0x4f380e,_0x139a4c(0x34d),new Date());if(fns[_0x139a4c(0x222)](_0x4581cf,_0x3fcf93)){_0x43a0b7=_0xa99711[0x0][_0x139a4c(0x2cf)];const _0x2b1d00=_0x43a0b7['find'](_0x48e715=>_0x48e715[_0x139a4c(0x2de)]==_0x357784[0x0][_0x139a4c(0x2de)]);_0x2b1d00?(_0x2b1d00[_0x139a4c(0x24a)]+=_0x357784[0x0]['number'],_0x2b1d00[_0x139a4c(0x24a)]==0x0&&(_0x43a0b7=_0x43a0b7[_0x139a4c(0x1e6)](_0xf5168b=>{const _0x352daa=_0x139a4c;return _0xf5168b[_0x352daa(0x2de)]!=_0x357784[0x0][_0x352daa(0x2de)];}))):_0x43a0b7['push'](_0x357784[0x0]);const _0xf98a23=_0x327aee[_0x139a4c(0x296)](_0x2fd03f=>_0x2fd03f[_0x139a4c(0x350)]==_0x4f380e);_0xf98a23['changes']=_0x43a0b7;}else _0x327aee[_0x139a4c(0x2a7)]({'date':_0x4f380e,'changes':[_0x357784[0x0]]});}const _0x335b95=_0x327aee['find'](_0x2b728b=>_0x2b728b[_0x139a4c(0x350)]==_0x4f380e);if(_0x335b95){let _0x23cd71=!![];_0x335b95[_0x139a4c(0x2cf)][_0x139a4c(0x2ea)](_0x508990=>{const _0x4ddb76=_0x139a4c;if(_0x508990[_0x4ddb76(0x24a)]!=0x0)_0x23cd71=![];}),_0x23cd71&&(_0x327aee=_0x327aee[_0x139a4c(0x1e6)](_0x3f3f4b=>{const _0x4480d7=_0x139a4c;return _0x3f3f4b[_0x4480d7(0x350)]!=_0x4f380e;}));}let _0xc3ce48=dbConfig[_0x139a4c(0x2f1)](_0x139a4c(0x29f))[_0x139a4c(0x296)]({'botID':botID})[_0x139a4c(0x31e)]();_0xc3ce48&&(dbConfig['get'](_0x139a4c(0x29f))[_0x139a4c(0x296)]({'botID':botID})['assign']({'liquidity':_0x327aee})[_0x139a4c(0x2c4)](),config[_0x139a4c(0x357)]=_0x327aee),logHistory(_0x139a4c(0x252),_0x139a4c(0x29a)+Math['abs'](_0x357784[0x0][_0x139a4c(0x24a)])+'\x20'+_0x357784[0x0]['coin']+'\x20'+(_0x357784[0x0][_0x139a4c(0x24a)]>0x0?_0x139a4c(0x337):'removed')+_0x139a4c(0x2c7)),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x139a4c(0x2b6)+Math[_0x139a4c(0x277)](_0x357784[0x0]['number'])+'\x20'+_0x357784[0x0][_0x139a4c(0x2de)]+'\x20'+(_0x357784[0x0][_0x139a4c(0x24a)]>0x0?_0x139a4c(0x337):_0x139a4c(0x26a)));transactionDetected=!![],currentCoins=_0x1d1546,currentCoinsAll=_0x578ade;}else logger[_0x139a4c(0x291)](_0x139a4c(0x29a)+Math['abs'](_0x357784[0x0][_0x139a4c(0x24a)])+'\x20'+_0x357784[0x0][_0x139a4c(0x2de)]+'\x20'+(_0x357784[0x0][_0x139a4c(0x24a)]>0x0?_0x139a4c(0x337):_0x139a4c(0x26a))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x1d1546,currentCoinsAll=_0x578ade;}await sleep(watchTransactionsInterval);}catch(_0x2fa767){if(!exchangeStopped)await handleError(_0x2fa767,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x7cc66d=_0x44508f;try{markets=await exchange[_0x7cc66d(0x36e)](),allSymbols=[],Object[_0x7cc66d(0x285)](markets)[_0x7cc66d(0x2ea)](_0x59cf01=>{const _0x6bcde9=_0x7cc66d;_0x59cf01[0x1][_0x6bcde9(0x2f0)]&&_0x59cf01[0x1][_0x6bcde9(0x233)]&&allSymbols[_0x6bcde9(0x2a7)](_0x59cf01[0x0]);});}catch(_0x55352f){throw _0x55352f;}}function validateSymbols(_0x513659){const _0x172dd2=_0x44508f;let _0x4dbc2d=[];return _0x513659[_0x172dd2(0x2ea)](_0x53a6df=>{const _0x866c72=_0x172dd2;!allSymbols[_0x866c72(0x2da)](_0x53a6df)?logHistory('error',_0x866c72(0x1fd)+_0x53a6df+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x4dbc2d['push'](_0x53a6df);}),_0x4dbc2d;}async function initclient(){const _0x2e2db3=_0x44508f;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x2e2db3(0x372),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x41274c=getNormalizedPerformance();emitPerformance(_0x41274c),getStartingBalances(_0x41274c);}function _0x3bce(){const _0x514ace=['/output-000.log','date','percentage','\x20not\x20available','limit-low','\x20has\x20a\x2024h\x20drop\x20of\x20','OrderNotFound','DDoSProtection','liquidity','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','loading-canceled','remainingSymbols','ongoing','1153240ZYaUwU','storeHeadless','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','3TUrApZ','\x20metrics:</b>\x20\x0a\x0a','Initiating\x20exchange\x20reload','progress','balances','net-basecoin','Loading\x20completed','join','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20network\x20error','eur','configuration','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getAllOrders()','loadMarkets','Resetting\x20coin\x20results:\x20','assign','Invalid\x20API\x20key\x20or\x20secret\x20entered','exchanges','function','Error:\x20Invalid\x20argument\x20','initial','\x20closed\x20the\x20connection','apiPassword','2\x20-\x20Validate\x20orders:\x20','target','starting-balances','2000FhLUBR','getPortfolio(0)','stringify','OnMaintenance','getCoins()','datetime',':\x20timer\x20>','1\x20-\x20Unlock\x20orders','length','bid','showname','type','filter','<pre>','MIN_NOTIONAL','currency','\x20:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','search','limit-high','AuthenticationError','defaults','change','open','parse','\x20change','getPortfolio(2)','storeConfiguration','set','starting-balance-','Error\x20details:','\x20minutes\x20-\x20','bb-secure.json','autoliquidity','ETH','Invalid\x20symbol:\x20','001','log','placeOrder','ccxt','startnumber','getMonth','\x20API\x20key\x20is\x20invalid','split','amount','replace','Executed\x20','orderstatus','coins','last','substring','existsSync','placeOrder()','API-key\x20format\x20invalid','\x20>\x20','.json','\x20|\x20Custom\x20ID:\x20','cancelOrders()','2\x20-\x20Handled\x20open\x20orders','3983IFGTWx','version','createOrder','fetchTickers()','Order\x20filled:\x20','exec','colorscheme','timeout','2281560SreXgT','EUR','\x20|\x20','getFullYear',':\x20Bot\x20','isEqual','orderId','reverse','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','send','market','warning','Uncaught\x20Exception:','botname','headless','openOrders','toLowerCase','getStartingBalances','writeFile','sells','\x20|\x20lock\x20orders:\x20','1\x20-\x20Handle\x20open\x20orders','spot','distribution','2501736xAeNPi','concat','floor','usd','\x20-\x20bot\x20not\x20started','password','watchTrades','***','side','configuration-stored','breakeven','cloneDeep','constructor','yyyy-MM-dd\x27T\x27HH:mm:ss','0\x20-\x20EXECUTION:\x20','Transaction\x20detection\x20blocked','fees','apiSecret','padStart','performance','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','number','recreate','map','2.3.5','Huobi','valid','fiat','NetworkError','success','-------------------------------\x0a','BNB/','data','LOCKED','************','lowdb/adapters/FileSync','restart','botID','sortBy','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','bot-','balancing\x20resumed','privateKey','\x20API\x20secret\x20is\x20invalid','USDC','2.5.0','toUpperCase','max','balancing\x20resumes\x20when\x20cooldown\x20ends','final','USD','initclient','removed','watchOrders()','cancelOrder','fetchClosedOrders','remove','closed','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','getCoinNumber()','basecoinvalue','./version.json','%\x20(','Error\x20while\x20deleting\x20files:\x20','recreateCoinResults()','abs','-performance.json','UNLOCKING','running','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','830188evaZFM','page','3456324AxziNe','round','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','1\x20-\x20Validate\x20orders:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','InvalidOrder','differenceInSeconds','entries','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','add','2\x20-\x20FILLED\x20known\x20order:\x20','\x20exchange\x20error','close','initTickers()','mkdirSync','logs','storeFiat','highest','apply','debug','5hEiCjG','price','\x20orders\x20in\x20less\x20than\x20','freeze','find','toString','Executing\x20exchange\x20reload','getDate','Portfolio\x20change\x20detected:\x20','indexOf','BTC','ORDERS.UNLOCKED','Bot\x20','bot','fetchOpenOrders','limits','ordertype','TUSD','recent20','message','RateLimitExceeded','push','parseISO','getPortfolio(1)','Huobipro','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','full','cancel','ask','emojibuy','onepagemode','basecoin','<b>','cooldown','1\x20-\x20FILLED:\x20','kill','Fee\x20discount\x20refund\x20detected:\x20','getSeconds','event','ExchangeError','startdate','Order(s)\x20not\x20validated\x20after\x20','\x20portfolio:</b>\x20\x0a\x0a','enabled','apiKey','slice','ticker','buy','fetchBalance','getMinutes','write','symbol','Reset\x20|\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','date-fns','showConfig','args','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','limit','USDT','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','changes','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sha256','delta','Unfilled\x20order(s)\x20canceled\x20after\x20','fromCodePoint','event-history','secure','buys','2.6.0','Net\x20effect','includes','cost','Pausing\x20for\x20','pro','coin','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','random','-config.json','Binance','hybrid-crypto-js','22TsFXIU','toggleBotMode','time','./config/','\x20|\x20exchange:\x20','/backup/','forEach','Cooldown\x20ended\x20-\x20balancing\x20resumed','Limit\x20(high-margin)','\x20-\x20pausing\x20bot\x20for\x20','resetHistory','Insufficient\x20funds\x20to\x20execute\x20order:\x20','active','get','./logs/','Waited\x20','amountToPrecision','net-fiat','trade','min','shift','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20exchange','canceled','milliseconds','ORDERS.LOCKED','has','4375UWsRHP','toFixed','startprice','Unknown\x20error\x20occured','12zxTGTi','netoffset','sendPortfolioTelegram','argv','test','2\x20-\x20Orders\x20unlocked','2\x20-\x20FILLED\x20unknown\x20order:\x20','loadSymbols()','keys','getOpenOrders()','offset','Exchange','sell','(((.+)+)+)+$','Transaction\x20detection\x20unblocked','watchTrades()','portfolio','timestamp','total','</pre>','Limit\x20(low-margin)','Avoiding\x20continuous\x20order\x20attempts','<b>Bot\x20','No\x20more\x20open\x20orders\x20-\x20','red_yellow_blue','change24h','rightTxt','value','order','filled','error','getHours','sort','stopExchange()','\x20order:\x20','getTime','must\x20be\x20greater\x20than\x20minimum\x20amount','bots','format','UNLOCKED','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','exchange','\x20>\x20[DEBUG]\x20','-results.json','bb-settings.json','fee','BNB','util','fetchTickers','3\x20-\x20handling\x20FILLED\x20order:\x20','Bybit','RequestTimeout','added','decrypt','ORDERS.UNLOCKING','fetchTicker','-events.json','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Exception\x20thrown\x20in\x20','watchOrders','average','emojisell','timeshift','status','InsufficientFunds','RSA-OAEP','none','leftTxt','excluded','Initializing\x20coin\x20results','createWriteStream','Cex','threshold','yyyy/MM/dd','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'];_0x3bce=function(){return _0x514ace;};return _0x3bce();}async function toggleBotMode(){const _0x461fde=_0x44508f;let _0x8cfe61=dbConfig['get'](_0x461fde(0x29f))['find']({'botID':botID})['value']();if(_0x8cfe61){const _0x5cdc75=!_0x8cfe61['headless'];dbConfig['get'](_0x461fde(0x29f))[_0x461fde(0x296)]({'botID':botID})['assign']({'headless':_0x5cdc75})[_0x461fde(0x2c4)](),config['headless']=_0x5cdc75,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x597717=>{});}async function loadCoins(_0x5bbfb){const _0x2cd884=_0x44508f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x34da2e,_0x238dd4=0x0,_0x1a18b1=0x0;_0x5bbfb[_0x2cd884(0x2ea)](_0x3c68e6=>{const _0x22ecb5=_0x2cd884;loading[_0x22ecb5(0x35a)][_0x22ecb5(0x2a7)](_0x3c68e6);}),loadingCanceled=![];let _0x480be3=![];while(_0x34da2e!=_0x5bbfb[_0x2cd884(0x1e2)]+maxLoadingProgress){_0x34da2e=loadingProgress,_0x5bbfb[_0x2cd884(0x2ea)](_0x51a583=>{const _0x31ef16=_0x2cd884;if(global['ticker'][noslash(_0x51a583)]){loading['remainingSymbols']=loading[_0x31ef16(0x35a)][_0x31ef16(0x1e6)](_0x1e8f78=>_0x1e8f78!=_0x51a583);if(!watchedSymbols[_0x31ef16(0x2da)](_0x51a583))watchedSymbols[_0x31ef16(0x2a7)](_0x51a583);_0x34da2e++;}}),loading[_0x2cd884(0x362)]=Math['round'](_0x34da2e/(_0x5bbfb['length']+maxLoadingProgress)*0x64);loading[_0x2cd884(0x362)]!=0x64&&(_0x1a18b1>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1a18b1>0x78*0x5&&!_0x480be3&&(loading[_0x2cd884(0x2ad)]=!![],emitLoadingProgress(),_0x480be3=!![],logHistory(_0x2cd884(0x321),_0x2cd884(0x282)+loading[_0x2cd884(0x35a)]['join'](',\x20')+_0x2cd884(0x239)),logHistory(_0x2cd884(0x321),_0x2cd884(0x2dc)+loadCoinsRetryInterval/0xea60+_0x2cd884(0x2f9)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0xe9315a=_0x2cd884;process[_0xe9315a(0x226)]({'stop':_0xe9315a(0x259)},_0x34a7f5=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2cd884(0x2ad)]=!![],emitLoadingProgress();break;}else _0x238dd4!=loading[_0x2cd884(0x362)]&&(_0x238dd4=loading[_0x2cd884(0x362)],emitLoadingProgress()),_0x1a18b1++,await sleep(0xc8);}_0x34da2e==_0x5bbfb['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x2cd884(0x226)]({'status':_0x2cd884(0x2bd),'live':'running'},_0x1a9309=>{}),_0x480be3&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4b9980=_0x44508f;proxyEmit(_0x4b9980(0x36b),{...emittedConfiguration(),'configstate':_0x4b9980(0x359)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x2f3d5d=_0x44508f;let _0x557299=global[_0x2f3d5d(0x2c0)][stablecoins[_0x2f3d5d(0x36a)][_0x2f3d5d(0x2de)]],_0x4fa5eb=global['ticker'][stablecoins[_0x2f3d5d(0x238)][_0x2f3d5d(0x2de)]];return{'eur':Number(_0x557299),'usd':Number(_0x4fa5eb)};}function capitalize(_0x13d8f7){const _0x26dbe4=_0x44508f;return _0x13d8f7[_0x26dbe4(0x20c)](0x0,0x1)[_0x26dbe4(0x264)]()+_0x13d8f7['substring'](0x1);}function supportedExchanges(){const _0x222761=_0x44508f,_0x352f89=['ws','fetchTickers',_0x222761(0x33a),_0x222761(0x23b),_0x222761(0x33f),_0x222761(0x26c),_0x222761(0x217),_0x222761(0x2a0),'fetchClosedOrders',_0x222761(0x2c2)];let _0x149168=[],_0xbd2e17=[],_0x3de19d=ccxt[_0x222761(0x2dd)][_0x222761(0x372)];_0x3de19d[_0x222761(0x2ea)](_0x36415c=>{const _0x57fd76=_0x222761;try{const _0x1fe581=new ccxt[(_0x57fd76(0x2dd))][_0x36415c]();_0xbd2e17['push'](_0x1fe581);}catch(_0x2c8c39){}}),_0xbd2e17[_0x222761(0x2ea)](_0x163d51=>{const _0x5980e0=_0x222761;let _0x55040a=0x0;_0x352f89[_0x5980e0(0x2ea)](_0x2ee6ba=>{const _0x264f4a=_0x5980e0;_0x2ee6ba in _0x163d51['has']&&_0x163d51[_0x264f4a(0x2fe)][_0x2ee6ba]&&_0x55040a++;}),_0x55040a==_0x352f89['length']&&_0x149168[_0x5980e0(0x2a7)](capitalize(_0x163d51['id']));});let _0x59b5d9=[];return _0x3de19d[_0x222761(0x2ea)](_0x25031c=>{const _0xa2038e=_0x222761;_0x25031c=capitalize(_0x25031c);if(!_0x149168[_0xa2038e(0x2da)](_0x25031c))_0x59b5d9[_0xa2038e(0x2a7)](_0x25031c);}),_0x149168;}function setStartDatePerformance(){const _0x2a7964=_0x44508f;if(config&&config[_0x2a7964(0x357)][0x0]['changes'][_0x2a7964(0x1e2)]!=0x0){const _0x2ea694=config[_0x2a7964(0x357)][0x0][_0x2a7964(0x2cf)];dbPerformance[_0x2a7964(0x2f1)](_0x2a7964(0x255))[_0x2a7964(0x296)]({'date':config[_0x2a7964(0x2ba)]})[_0x2a7964(0x370)]({'coins':_0x2ea694})[_0x2a7964(0x2c4)]();}}async function recreateCoinResults(){const _0x4ce4dc=_0x44508f;let _0x157b1b,_0x248d99=[];try{const _0x10d74b=fns[_0x4ce4dc(0x329)](fns[_0x4ce4dc(0x2a8)](config[_0x4ce4dc(0x2ba)][_0x4ce4dc(0x207)](/\//g,'-')),_0x4ce4dc(0x242));for(const _0x4d97f4 of currentCoins){if(_0x4d97f4[_0x4ce4dc(0x2de)]!=config['basecoin']){let _0x36de20=0x0,_0x2b7c4c,_0x4b6ee1;_0x157b1b=await getAllEventOrders(_0x4d97f4[_0x4ce4dc(0x2c5)]);if(_0x157b1b['length']>0x0)_0x157b1b[_0x4ce4dc(0x2ea)](_0xa2234c=>{const _0x2ec4c0=_0x4ce4dc,_0x2b1410=_0x4d97f4[_0x2ec4c0(0x2c5)][_0x2ec4c0(0x2da)](config[_0x2ec4c0(0x2b1)]+'/');_0x248d99[_0x2ec4c0(0x2a7)]({'datetime':_0xa2234c[_0x2ec4c0(0x380)],'coin':_0x4d97f4[_0x2ec4c0(0x2de)],'symbol':_0x4d97f4[_0x2ec4c0(0x2c5)],'side':_0xa2234c[_0x2ec4c0(0x23d)],'reverse':_0x2b1410,'amount':formatResult(_0xa2234c[_0x2ec4c0(0x320)],0x8),'filled':formatResult(_0xa2234c[_0x2ec4c0(0x320)],0x8),'price':formatResult(_0xa2234c[_0x2ec4c0(0x293)],0x8)}),_0x36de20=_0xa2234c[_0x2ec4c0(0x23d)]==_0x2ec4c0(0x2c1)?_0x36de20+_0xa2234c[_0x2ec4c0(0x320)]:_0x36de20-_0xa2234c[_0x2ec4c0(0x320)];if(!_0x4b6ee1)_0x4b6ee1=_0xa2234c[_0x2ec4c0(0x293)];});_0x2b7c4c=_0x4d97f4[_0x4ce4dc(0x24a)]-_0x36de20;let _0x3ac0f6;config['liquidity'][_0x4ce4dc(0x2ea)](_0x11ab8b=>{const _0x32c862=_0x4ce4dc;!_0x3ac0f6&&(_0x3ac0f6=_0x11ab8b[_0x32c862(0x2cf)][_0x32c862(0x296)](_0x3660a1=>_0x3660a1['coin']==_0x4d97f4[_0x32c862(0x2de)]),_0x3ac0f6&&(_0x2b7c4c=_0x3ac0f6[_0x32c862(0x24a)],_0x4b6ee1=_0x3ac0f6[_0x32c862(0x293)]));});let _0x18bad2=dbCoinResults[_0x4ce4dc(0x2f1)](_0x4ce4dc(0x20a))['find']({'coin':_0x4d97f4[_0x4ce4dc(0x2de)]})[_0x4ce4dc(0x31e)]();_0x18bad2={'coin':_0x4d97f4[_0x4ce4dc(0x2de)],'number':_0x2b7c4c,'breakeven':_0x4b6ee1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x4ce4dc(0x296)]({'coin':_0x4d97f4[_0x4ce4dc(0x2de)]})[_0x4ce4dc(0x370)](_0x18bad2)[_0x4ce4dc(0x2c4)]();}}_0x248d99[_0x4ce4dc(0x323)]((_0x9f7b9d,_0x1d8f0a)=>_0x9f7b9d[_0x4ce4dc(0x380)]>_0x1d8f0a[_0x4ce4dc(0x380)]?0x1:_0x1d8f0a[_0x4ce4dc(0x380)]>_0x9f7b9d[_0x4ce4dc(0x380)]?-0x1:0x0);let _0x44ad37=0x0;for(let _0x3c3841 of _0x248d99){await updateCoinResults(_0x3c3841,!![]);}}catch(_0x23315d){await handleError(_0x23315d,_0x4ce4dc(0x276));}}async function getAllEventOrders(_0x845363){const _0x1d85df=_0x44508f;let _0xe5f007=[],_0xef727=dbLogs[_0x1d85df(0x2f1)](_0x1d85df(0x28d))[_0x1d85df(0x1e6)](_0xdc3709=>{const _0xd1c0e6=_0x1d85df,_0x276057=_0xdc3709['event'][_0xd1c0e6(0x22d)]();return _0x276057[_0xd1c0e6(0x2da)](_0x845363['toLowerCase']())&&(_0x276057[_0xd1c0e6(0x2da)]('market')&&_0x276057[_0xd1c0e6(0x2da)](_0xd1c0e6(0x31f))||_0x276057['includes'](_0xd1c0e6(0x320))&&_0x276057['includes'](_0xd1c0e6(0x31f)));})[_0x1d85df(0x25b)](_0x1d85df(0x2e6))['value']();return _0xef727[_0x1d85df(0x2ea)](_0x430e88=>{const _0x4a35a6=_0x1d85df,_0x595d3b=_0x430e88[_0x4a35a6(0x2b8)][_0x4a35a6(0x2da)](_0x4a35a6(0x30f))?_0x4a35a6(0x30f):_0x4a35a6(0x2c1),_0x2cf1c0=/#([0-9]|\.)+\s/i,_0x425f4b=Number(_0x2cf1c0[_0x4a35a6(0x21a)](_0x430e88[_0x4a35a6(0x2b8)])[0x0][_0x4a35a6(0x2bf)](0x1)),_0x48e963=/@([0-9]|\.)+$/i,_0x5c18e9=Number(_0x48e963[_0x4a35a6(0x21a)](_0x430e88[_0x4a35a6(0x2b8)])[0x0][_0x4a35a6(0x2bf)](0x1));_0xe5f007[_0x4a35a6(0x2a7)]({'datetime':_0x430e88[_0x4a35a6(0x2e6)],'coin':symbolToCoin(_0x845363),'symbol':_0x845363,'side':_0x595d3b,'amount':_0x425f4b,'filled':_0x425f4b,'price':_0x5c18e9});}),_0xe5f007;}async function getAllOrders(_0x1cd2b9,_0x2f2218){const _0x519987=_0x44508f;let _0x566409=[];while(_0x2f2218<exchange[_0x519987(0x2fc)]()){const _0x325177=0x1f4;try{const _0x3981bd=await exchange[_0x519987(0x26d)](_0x1cd2b9,_0x2f2218,_0x325177);if(_0x3981bd['length'])_0x2f2218=_0x3981bd[_0x3981bd[_0x519987(0x1e2)]-0x1][_0x519987(0x314)]+0x1,_0x566409=_0x566409[_0x519987(0x236)](_0x3981bd);else break;}catch(_0x109dbf){await handleError(_0x109dbf,_0x519987(0x36d),_0x1cd2b9);}}return _0x566409;}async function validate24hChanges(){const _0x2f14b7=_0x44508f;for(const _0x29f69e of currentCoins){if(_0x29f69e[_0x2f14b7(0x2de)]!=config[_0x2f14b7(0x2b1)]){let _0x121301;_0x29f69e[_0x2f14b7(0x224)]?_0x121301=formatResult((0x1/(global['change'][noslash(_0x29f69e[_0x2f14b7(0x2c5)])]/0x64+0x1)-0x1)*0x64,0x3):_0x121301=global[_0x2f14b7(0x1f0)][noslash(_0x29f69e['symbol'])],_0x121301<config['change24h']&&(logHistory(_0x2f14b7(0x321),_0x29f69e[_0x2f14b7(0x2de)]+_0x2f14b7(0x354)+_0x121301+'%'),logHistory('error',_0x2f14b7(0x358)),logHistory('error',_0x2f14b7(0x27b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x55aac3,_0x4570f0){const _0x24eaee=_0x44508f;if(!_0x55aac3)return!![];const _0x57171f=_0x4570f0[_0x24eaee(0x205)]('.'),_0x34bf18=_0x55aac3[_0x24eaee(0x205)]('.');for(var _0x46b5d1=0x0;_0x46b5d1<_0x34bf18[_0x24eaee(0x1e2)];_0x46b5d1++){const _0x58165d=~~_0x34bf18[_0x46b5d1],_0x48c661=~~_0x57171f[_0x46b5d1];if(_0x58165d<_0x48c661)return!![];if(_0x58165d>_0x48c661)return![];}return![];}async function oneTimeMigration(){const _0x1c550e=_0x44508f;let _0x24fa23=dbLogs[_0x1c550e(0x2f1)](_0x1c550e(0x216))[_0x1c550e(0x31e)]();if(isOlderVersion(_0x24fa23,_0x1c550e(0x24d))){let _0x1363c7=[];const _0x27628c=dbLogs[_0x1c550e(0x2f1)](_0x1c550e(0x28d))[_0x1c550e(0x31e)]();_0x27628c[_0x1c550e(0x2ea)](_0x258245=>{const _0x380f70=_0x1c550e;_0x1363c7[_0x380f70(0x2a7)]({'time':_0x258245[_0x380f70(0x2e6)],'type':_0x258245[_0x380f70(0x1e5)],'event':_0x258245['event']});}),dbLogs[_0x1c550e(0x2f1)]('logs')[_0x1c550e(0x370)](_0x1363c7)[_0x1c550e(0x2c4)]();}let _0x35dca7=dbConfig['get'](_0x1c550e(0x216))['value']();if(isOlderVersion(_0x35dca7,'2.3.5')){let _0xf61c71=dbConfig[_0x1c550e(0x2f1)](_0x1c550e(0x29f))[_0x1c550e(0x296)]({'botID':botID})[_0x1c550e(0x31e)]();if(_0xf61c71){let _0x4d0870=[];_0xf61c71[_0x1c550e(0x313)][_0x1c550e(0x2ea)](_0x192dfb=>{const _0x47e0f0=_0x1c550e;_0x4d0870[_0x47e0f0(0x2a7)]({'coin':_0x192dfb[_0x47e0f0(0x2de)],'number':_0x192dfb['startnumber'],'price':_0x192dfb[_0x47e0f0(0x301)]}),delete _0x192dfb[_0x47e0f0(0x202)],delete _0x192dfb[_0x47e0f0(0x301)];});if(_0x4d0870[_0x1c550e(0x1e2)]!==0x0)fs[_0x1c550e(0x22f)](configbackuppath+(_0x1c550e(0x1f7)+botID+_0x1c550e(0x211)),JSON['stringify'](_0x4d0870,null,0x4),function(_0x522138){if(_0x522138){}});const _0x2dd07e=(_0x4ce750,_0x43f9e3)=>{const _0x28c65d=_0x1c550e;let _0x1e0cae=[];_0x43f9e3[_0x28c65d(0x2ea)](_0x12a9c0=>{const _0x8f347f=_0x28c65d,_0x19e97c=_0x4ce750[_0x8f347f(0x296)](_0x26e1c4=>_0x26e1c4['coin']==_0x12a9c0[_0x8f347f(0x2de)]);if(!_0x19e97c)_0x1e0cae[_0x8f347f(0x2a7)](_0x12a9c0);});let _0x21db81=[];return _0x4ce750['forEach'](_0x361bc7=>{const _0x2bec79=_0x28c65d,_0x20bba9=_0x43f9e3[_0x2bec79(0x296)](_0x5ad90e=>_0x5ad90e[_0x2bec79(0x2de)]==_0x361bc7[_0x2bec79(0x2de)]);if(!_0x20bba9||_0x20bba9[_0x2bec79(0x24a)]==0x0&&_0x361bc7[_0x2bec79(0x24a)]!=0x0)_0x21db81['push'](_0x361bc7);}),{'missingDay1':_0x1e0cae,'notInDay2':_0x21db81};},_0x2efb49=dbPerformance['get'](_0x1c550e(0x255))[_0x1c550e(0x240)]()[_0x1c550e(0x31e)]();if(_0x2efb49[_0x1c550e(0x1e2)]>0x1){const {missingDay1:_0x29e0f1,notInDay2:_0x563c20}=_0x2dd07e(_0x4d0870,_0x2efb49[0x1]['coins']);_0x4d0870=[..._0x4d0870,..._0x29e0f1],_0x563c20['forEach'](_0x2ef5be=>{const _0x2ba4a6=_0x1c550e;let _0x247397=_0x4d0870['findIndex'](_0x28a60b=>_0x28a60b[_0x2ba4a6(0x2de)]==_0x2ef5be['coin']);_0x247397!=-0x1&&_0x4d0870['splice'](_0x247397,0x1);});}_0x4d0870['sort']((_0xafec99,_0x3f60f5)=>_0xafec99[_0x1c550e(0x2de)]>_0x3f60f5[_0x1c550e(0x2de)]?0x1:_0x3f60f5[_0x1c550e(0x2de)]>_0xafec99[_0x1c550e(0x2de)]?-0x1:0x0);let _0x1bdae0=[{'date':_0xf61c71[_0x1c550e(0x2ba)],'changes':_0x4d0870}];_0x2efb49[_0x1c550e(0x1e2)]>0x2&&_0x2efb49[_0x1c550e(0x2ea)]((_0x5e146c,_0x4c166e)=>{const _0x47d62b=_0x1c550e;if(_0x4c166e>0x0&&_0x4c166e<_0x2efb49[_0x47d62b(0x1e2)]-0x1){const {missingDay1:_0xaeb9a0,notInDay2:_0x44d122}=_0x2dd07e(_0x2efb49[_0x4c166e][_0x47d62b(0x20a)],_0x2efb49[_0x4c166e+0x1][_0x47d62b(0x20a)]);_0x4d0870=[],(_0xaeb9a0[_0x47d62b(0x1e2)]!=0x0||_0x44d122[_0x47d62b(0x1e2)]!=0x0)&&(_0xaeb9a0[_0x47d62b(0x1e2)]!=0x0&&_0x4d0870[_0x47d62b(0x2a7)](..._0xaeb9a0),_0x44d122[_0x47d62b(0x1e2)]!=0x0&&(_0x44d122['forEach'](_0x593a05=>{const _0xece35a=_0x47d62b;_0x593a05['number']=-_0x593a05[_0xece35a(0x24a)];}),_0x4d0870['push'](..._0x44d122)),_0x4d0870[_0x47d62b(0x323)]((_0x176fd3,_0x2a6f41)=>_0x176fd3[_0x47d62b(0x2de)]>_0x2a6f41['coin']?0x1:_0x2a6f41[_0x47d62b(0x2de)]>_0x176fd3[_0x47d62b(0x2de)]?-0x1:0x0),_0x1bdae0[_0x47d62b(0x2a7)]({'date':_0x2efb49[_0x4c166e+0x1][_0x47d62b(0x350)],'changes':_0x4d0870}));}}),dbConfig[_0x1c550e(0x2f1)]('bot')[_0x1c550e(0x296)]({'botID':botID})['assign']({..._0xf61c71,'liquidity':_0x1bdae0})[_0x1c550e(0x2c4)]();}}if(isOlderVersion(_0x35dca7,_0x1c550e(0x2d8))){let _0x5cc021=dbConfig[_0x1c550e(0x2f1)]('bot')['find']({'botID':botID})[_0x1c550e(0x31e)]();if(_0x5cc021){const _0x55ed3c=_0x5cc021['exchange'],_0x3b36b4=_0x55ed3c?capitalize(_0x55ed3c):_0x1c550e(0x2e2);dbConfig[_0x1c550e(0x2f1)](_0x1c550e(0x29f))['find']({'botID':botID})[_0x1c550e(0x370)]({'exchange':_0x3b36b4})[_0x1c550e(0x2c4)]();}}let _0x32036d=dbPerformance[_0x1c550e(0x2f1)](_0x1c550e(0x216))['value']();isOlderVersion(_0x32036d,'2.3.5')&&setStartDatePerformance();let _0x58afff=dbCoinResults[_0x1c550e(0x2f1)](_0x1c550e(0x216))[_0x1c550e(0x31e)]();if(isOlderVersion(_0x58afff,_0x1c550e(0x263))){let _0x1791d6=dbCoinResults['get']('coins')['value']();if(_0x1791d6[_0x1c550e(0x1e2)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x475faa=_0x44508f;dbConfig['set'](_0x475faa(0x216),serverversion)[_0x475faa(0x2c4)](),dbPerformance[_0x475faa(0x1f6)]('version',serverversion)[_0x475faa(0x2c4)](),dbLogs[_0x475faa(0x1f6)]('version',serverversion)['write'](),dbCoinResults['set']('version',serverversion)[_0x475faa(0x2c4)]();}function getConfiguration(_0x2e3f8a){const _0x27f403=_0x44508f;let _0x3a3b89=dbConfig[_0x27f403(0x2f1)]('bot')[_0x27f403(0x296)]({'botID':_0x2e3f8a})[_0x27f403(0x31e)]();if(_0x3a3b89){let _0x23a6d7=![];typeof _0x3a3b89['threshold']=='string'&&(_0x3a3b89={..._0x3a3b89,'threshold':Number(_0x3a3b89[_0x27f403(0x34c)])},_0x23a6d7=!![]),_0x3a3b89[_0x27f403(0x31c)]==undefined&&(_0x3a3b89={..._0x3a3b89,'change24h':-0x14},_0x23a6d7=!![]),_0x3a3b89[_0x27f403(0x250)]==undefined&&(_0x3a3b89={..._0x3a3b89,'fiat':'USD'},_0x23a6d7=!![]),_0x3a3b89['onepagemode']==undefined&&(_0x3a3b89={..._0x3a3b89,'onepagemode':settings[_0x27f403(0x2b0)]},_0x23a6d7=!![]),_0x3a3b89[_0x27f403(0x21b)]==undefined&&(_0x3a3b89={..._0x3a3b89,'colorscheme':_0x27f403(0x31b)},_0x23a6d7=!![]),_0x3a3b89[_0x27f403(0x1fb)]==undefined&&(_0x3a3b89={..._0x3a3b89,'autoliquidity':!![]},_0x23a6d7=!![]),_0x23a6d7&&(_0x3a3b89={'botID':_0x3a3b89[_0x27f403(0x25a)],'exchange':_0x3a3b89['exchange'],'apiKey':_0x3a3b89[_0x27f403(0x2be)],'apiSecret':_0x3a3b89[_0x27f403(0x246)],'apiPassword':_0x3a3b89[_0x27f403(0x377)],'basecoin':_0x3a3b89[_0x27f403(0x2b1)],'botname':_0x3a3b89[_0x27f403(0x22a)],'showname':_0x3a3b89[_0x27f403(0x1e4)],'threshold':_0x3a3b89['threshold'],'ordertype':_0x3a3b89[_0x27f403(0x2a2)],'timeout':_0x3a3b89[_0x27f403(0x21c)],'fiat':_0x3a3b89['fiat'],'startdate':_0x3a3b89['startdate'],'recreate':_0x3a3b89[_0x27f403(0x24b)],'timeshift':_0x3a3b89['timeshift'],'onepagemode':_0x3a3b89['onepagemode'],'headless':_0x3a3b89[_0x27f403(0x22b)],'cooldown':_0x3a3b89[_0x27f403(0x2b3)],'change24h':_0x3a3b89[_0x27f403(0x31c)],'emojibuy':_0x3a3b89[_0x27f403(0x2af)],'emojisell':_0x3a3b89[_0x27f403(0x341)],'colorscheme':_0x3a3b89[_0x27f403(0x21b)],'portfolio':_0x3a3b89['portfolio'],'autoliquidity':_0x3a3b89[_0x27f403(0x1fb)],'liquidity':_0x3a3b89['liquidity'],'openOrders':_0x3a3b89[_0x27f403(0x22c)]},dbConfig[_0x27f403(0x2f1)](_0x27f403(0x29f))[_0x27f403(0x26e)]()[_0x27f403(0x2c4)](),dbConfig[_0x27f403(0x2f1)](_0x27f403(0x29f))[_0x27f403(0x2a7)](_0x3a3b89)[_0x27f403(0x2c4)]());}else _0x3a3b89={'botID':_0x2e3f8a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x27f403(0x29e)+_0x2e3f8a,'showname':![],'threshold':0x3,'ordertype':_0x27f403(0x227),'timeout':0x14,'fiat':_0x27f403(0x268),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x27f403(0x2b0)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x27f403(0x31b),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3a3b89;}function emittedConfiguration(){const _0x59fccd=_0x44508f;let _0x1b0e88;if(config[_0x59fccd(0x2be)]=='')_0x1b0e88={...config,'configstate':_0x59fccd(0x375)};else config[_0x59fccd(0x2be)]==_0x59fccd(0x23c)?_0x1b0e88={...config,'configstate':'recovery'}:(_0x1b0e88={...config,'apiKey':_0x59fccd(0x257),'apiSecret':_0x59fccd(0x257)},config['apiPassword']&&(_0x1b0e88['apiPassword']='************'));return _0x1b0e88;}function getSettings(){const _0x47e52f=_0x44508f;return dbSettings['get']('settings')[_0x47e52f(0x31e)]();}function getSecure(){const _0x43cb25=_0x44508f;return dbSecure[_0x43cb25(0x2f1)](_0x43cb25(0x2d6))[_0x43cb25(0x31e)]()||{};}function updateTimeshift(_0x1c5f28){const _0x56acd9=_0x44508f;let _0x5c1816=dbConfig['get'](_0x56acd9(0x29f))[_0x56acd9(0x296)]({'botID':botID})['value']();_0x5c1816&&dbConfig[_0x56acd9(0x2f1)]('bot')[_0x56acd9(0x296)]({'botID':botID})[_0x56acd9(0x370)]({'timeshift':_0x1c5f28})[_0x56acd9(0x2c4)](),config['timeshift']=_0x1c5f28,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x28f47e){const _0x36a074=_0x44508f;let _0x1431fd=dbConfig[_0x36a074(0x2f1)]('bot')[_0x36a074(0x296)]({'botID':botID})['value']();_0x1431fd&&dbConfig[_0x36a074(0x2f1)](_0x36a074(0x29f))[_0x36a074(0x296)]({'botID':botID})[_0x36a074(0x370)]({'onepagemode':_0x28f47e})[_0x36a074(0x2c4)](),config[_0x36a074(0x2b0)]=_0x28f47e,proxyEmit(_0x36a074(0x36b),emittedConfiguration());}async function storeConfiguration(_0x5a7e17){const _0x3770c3=_0x44508f;logger['debug']('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x3770c3(0x291)](_0x3770c3(0x244));let _0x581375=![],_0x7a5ede=![],_0x142cb2=[];_0x5a7e17[_0x3770c3(0x313)]['forEach'](_0x378656=>{const _0x4085ae=_0x3770c3;if(!_0x378656[_0x4085ae(0x348)]&&_0x378656['coin']!=_0x5a7e17['basecoin'])_0x142cb2[_0x4085ae(0x2a7)](_0x378656['symbol']);}),_0x142cb2[_0x3770c3(0x2ea)](_0x57cdb2=>{const _0xcd1977=_0x3770c3,_0x59950c=currentCoins[_0xcd1977(0x296)](_0x3baf30=>_0x3baf30[_0xcd1977(0x2c5)]==_0x57cdb2);!_0x59950c&&(_0x581375=!![]);}),currentCoins[_0x3770c3(0x2ea)](_0x480808=>{const _0x7ec415=_0x3770c3;if(_0x480808[_0x7ec415(0x2de)]!=config[_0x7ec415(0x2b1)]){const _0x4b1c5d=_0x142cb2[_0x7ec415(0x296)](_0x53492a=>_0x53492a==_0x480808[_0x7ec415(0x2c5)]);!_0x4b1c5d&&(_0x581375=!![]);}}),_0x5a7e17[_0x3770c3(0x313)][_0x3770c3(0x2ea)](_0x13fe0c=>{const _0x567ca5=_0x3770c3,_0x5f0e5a=config[_0x567ca5(0x313)][_0x567ca5(0x296)](_0x109c47=>_0x109c47['coin']==_0x13fe0c[_0x567ca5(0x2de)]);if(_0x5f0e5a&&_0x13fe0c[_0x567ca5(0x30d)]!=_0x5f0e5a[_0x567ca5(0x30d)])_0x7a5ede=!![];});let _0x5abdf7=dbConfig[_0x3770c3(0x2f1)](_0x3770c3(0x29f))[_0x3770c3(0x296)]({'botID':botID})[_0x3770c3(0x31e)]();_0x5a7e17={..._0x5a7e17,'apiKey':crypt['decrypt'](secure['privateKey'],_0x5a7e17[_0x3770c3(0x2be)])[_0x3770c3(0x2a5)],'apiSecret':crypt[_0x3770c3(0x338)](secure[_0x3770c3(0x260)],_0x5a7e17[_0x3770c3(0x246)])[_0x3770c3(0x2a5)]};_0x5a7e17[_0x3770c3(0x377)]&&(_0x5a7e17[_0x3770c3(0x377)]=crypt[_0x3770c3(0x338)](secure[_0x3770c3(0x260)],_0x5a7e17['apiPassword'])[_0x3770c3(0x2a5)]);let _0x3be6e4=![];if(_0x5abdf7){_0x5a7e17[_0x3770c3(0x2be)]==_0x3770c3(0x257)?_0x5a7e17[_0x3770c3(0x2be)]=config[_0x3770c3(0x2be)]:_0x3be6e4=!![];_0x5a7e17[_0x3770c3(0x246)]==_0x3770c3(0x257)?_0x5a7e17[_0x3770c3(0x246)]=config['apiSecret']:_0x3be6e4=!![];if(_0x5a7e17[_0x3770c3(0x377)]==_0x3770c3(0x257))_0x5a7e17[_0x3770c3(0x377)]=config[_0x3770c3(0x377)];else{if(_0x5a7e17[_0x3770c3(0x377)])_0x3be6e4=!![];}dbConfig[_0x3770c3(0x2f1)](_0x3770c3(0x29f))[_0x3770c3(0x296)]({'botID':botID})[_0x3770c3(0x370)](_0x5a7e17)['write']();}else dbConfig[_0x3770c3(0x2f1)](_0x3770c3(0x29f))[_0x3770c3(0x2a7)](_0x5a7e17)[_0x3770c3(0x2c4)](),_0x3be6e4=!![],process[_0x3770c3(0x226)]({'status':_0x3770c3(0x2bd),'live':'running'},_0x1e9f5d=>{});process[_0x3770c3(0x226)]({'botname':_0x5a7e17['botname']},_0x3e8e1c=>{}),updateBotManager(),config={..._0x5a7e17},proxyEmit(_0x3770c3(0x23e)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3be6e4)await reset(!![]);else _0x581375||_0x7a5ede?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x3770c3(0x311));}async function storeHeadless(_0x76e291){const _0x148d1e=_0x44508f,_0xc0dfd2={...config,'headless':_0x76e291[_0x148d1e(0x22b)]};let _0x433e6b=dbConfig['get'](_0x148d1e(0x29f))[_0x148d1e(0x296)]({'botID':botID})[_0x148d1e(0x31e)]();_0x433e6b&&dbConfig['get'](_0x148d1e(0x29f))[_0x148d1e(0x296)]({'botID':botID})[_0x148d1e(0x370)](_0xc0dfd2)[_0x148d1e(0x2c4)](),config={..._0xc0dfd2},updateBotManager(),proxyEmit(_0x148d1e(0x36b),emittedConfiguration());}async function storeFiat(_0x3006da){const _0x564f04=_0x44508f,_0x2c19b7={...config,'fiat':_0x3006da};let _0x285a59=dbConfig[_0x564f04(0x2f1)](_0x564f04(0x29f))[_0x564f04(0x296)]({'botID':botID})[_0x564f04(0x31e)]();_0x285a59&&dbConfig[_0x564f04(0x2f1)](_0x564f04(0x29f))[_0x564f04(0x296)]({'botID':botID})[_0x564f04(0x370)](_0x2c19b7)['write'](),config={..._0x2c19b7},proxyEmit(_0x564f04(0x36b),emittedConfiguration());}function _0x4b8e(_0x46b682,_0x1fbba7){const _0x58b4be=_0x3bce();return _0x4b8e=function(_0x494f69,_0x29d6c1){_0x494f69=_0x494f69-0x1e0;let _0x3bce00=_0x58b4be[_0x494f69];return _0x3bce00;},_0x4b8e(_0x46b682,_0x1fbba7);}function resetHistory(){const _0x52f333=_0x44508f;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x52f333(0x20d)](path[_0x52f333(0x366)](configpath,_0x52f333(0x25e)+botID+_0x52f333(0x33b))))fs['unlinkSync'](path[_0x52f333(0x366)](configpath,_0x52f333(0x25e)+botID+_0x52f333(0x33b)));if(fs[_0x52f333(0x20d)](path[_0x52f333(0x366)](configpath,_0x52f333(0x25e)+botID+_0x52f333(0x278))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x52f333(0x278)));if(fs[_0x52f333(0x20d)](path[_0x52f333(0x366)](configpath,'bot-'+botID+_0x52f333(0x32e))))fs['unlinkSync'](path[_0x52f333(0x366)](configpath,_0x52f333(0x25e)+botID+_0x52f333(0x32e)));}catch(_0x1a918d){if(_0x1a918d)logger[_0x52f333(0x2ac)](_0x52f333(0x275),_0x1a918d);}const _0x32fca1=getDate();let _0xb9abb8=[];currentCoins[_0x52f333(0x2ea)](_0x5de1f8=>{const _0x4baaaf=_0x52f333;_0xb9abb8[_0x4baaaf(0x2a7)]({'coin':_0x5de1f8['coin'],'number':_0x5de1f8[_0x4baaaf(0x24a)],'price':_0x5de1f8[_0x4baaaf(0x20b)]});});let _0x5460fe=dbConfig[_0x52f333(0x2f1)](_0x52f333(0x29f))[_0x52f333(0x296)]({'botID':botID})[_0x52f333(0x31e)]();_0x5460fe&&(dbConfig[_0x52f333(0x2f1)](_0x52f333(0x29f))[_0x52f333(0x296)]({'botID':botID})[_0x52f333(0x370)]({'liquidity':[{'date':_0x32fca1,'changes':_0xb9abb8}]})[_0x52f333(0x2c4)](),config[_0x52f333(0x357)]=[]),process[_0x52f333(0x226)]({'stop':_0x52f333(0x259)},_0x520bd4=>{});}function noslash(_0x439eaa){const _0x2bd8d0=_0x44508f;return _0x439eaa[_0x2bd8d0(0x207)]('/','');}function updateHighestFee(_0x5b31f9){const _0x4e2a35=_0x44508f;if(_0x5b31f9[_0x4e2a35(0x224)]){let _0x392442={'filled':_0x5b31f9['filled']*_0x5b31f9['price'],'amount':_0x5b31f9[_0x4e2a35(0x320)]*_0x5b31f9[_0x4e2a35(0x293)],'side':_0x5b31f9[_0x4e2a35(0x23d)]==_0x4e2a35(0x30f)?_0x4e2a35(0x2c1):'sell','price':0x1/_0x5b31f9[_0x4e2a35(0x293)]};_0x5b31f9={..._0x5b31f9,..._0x392442};}const _0x372e72=defaultFee*_0x5b31f9['filled']*_0x5b31f9[_0x4e2a35(0x293)];lastFees['recent20'][_0x4e2a35(0x1e2)]===0x14&&lastFees[_0x4e2a35(0x2a4)][_0x4e2a35(0x2f8)](),lastFees[_0x4e2a35(0x2a4)][_0x4e2a35(0x2a7)](_0x372e72),lastFees[_0x4e2a35(0x28f)]=Math['max'](...lastFees[_0x4e2a35(0x2a4)]);}async function updateNumberCoinsCcxt(_0x5f4952){const _0x4d88b2=_0x44508f;logger[_0x4d88b2(0x291)](_0x4d88b2(0x243)+_0x5f4952[_0x4d88b2(0x2c5)]+_0x4d88b2(0x21f)+_0x5f4952[_0x4d88b2(0x343)]+_0x4d88b2(0x21f)+_0x5f4952['id']);let _0x2df1e6=_0x5f4952[_0x4d88b2(0x343)],_0x5722ac=![];currentCoins[_0x4d88b2(0x2ea)](_0x58bafc=>{const _0xd05da5=_0x4d88b2;_0x58bafc[_0xd05da5(0x2c5)]==_0x5f4952['symbol']&&(_0x5722ac=!![]);});if(!_0x5722ac)return;const _0x4a8694=currentCoins[_0x4d88b2(0x296)](_0x27567=>_0x27567[_0x4d88b2(0x2c5)]==_0x5f4952['symbol']),_0x2621c8=_0x302692=>{const _0x3540d6=_0x4d88b2;if(_0x4a8694)_0x4a8694[_0x3540d6(0x209)]=_0x302692;};if(_0x2df1e6=='open')_0x2621c8(_0x4d88b2(0x1f1));else{if(_0x2df1e6==_0x4d88b2(0x2fb)){_0x2621c8(_0x4d88b2(0x2fb));const _0x5e0482=await getCoins();[currentCoins,currentCoinsAll]=_0x5e0482,await getOpenOrders(),handleOpenOrders();}else{if(_0x2df1e6==_0x4d88b2(0x26f)){logger['debug'](_0x4d88b2(0x2b4)+_0x5f4952[_0x4d88b2(0x2c5)]+_0x4d88b2(0x21f)+_0x5f4952[_0x4d88b2(0x320)]+_0x4d88b2(0x21f)+_0x5f4952['id']);let _0x22f8ec=![];if(lastOrders)for(const _0x151ce7 of lastOrders){const _0xf6c2dc=0xc8,_0x2c43c0=0x1388;let _0x4b28f9=0x0;while(!_0x151ce7[_0x4d88b2(0x223)]&&_0x4b28f9*_0xf6c2dc<_0x2c43c0){_0x4b28f9++,await sleep(_0xf6c2dc);}if(_0x4b28f9>0x0)logger['debug'](_0x4d88b2(0x2f3)+_0x4b28f9*_0xf6c2dc/0x3e8+_0x4d88b2(0x25d));if(_0x151ce7[_0x4d88b2(0x223)]==_0x5f4952['id']){logger[_0x4d88b2(0x291)](_0x4d88b2(0x288)+_0x5f4952['id']),_0x22f8ec=!![];if(_0x151ce7[_0x4d88b2(0x320)]==0x0){logger[_0x4d88b2(0x291)](_0x4d88b2(0x334)+_0x5f4952['id']);if(_0x5f4952[_0x4d88b2(0x340)])_0x151ce7[_0x4d88b2(0x293)]=_0x5f4952['average'];else{if(_0x5f4952['price'])_0x151ce7['price']=_0x5f4952[_0x4d88b2(0x293)];else{}}_0x151ce7[_0x4d88b2(0x320)]=_0x5f4952[_0x4d88b2(0x320)],updateHighestFee(_0x151ce7),_0x2621c8(_0x4d88b2(0x320)),await validateOrders();if(lockOrders==ORDERS[_0x4d88b2(0x256)]){const _0x328a63=await getCoins();[currentCoins,currentCoinsAll]=_0x328a63;}_0x151ce7['fee']={'currency':_0x5f4952[_0x4d88b2(0x330)]?_0x5f4952['fee'][_0x4d88b2(0x1e9)]:null,'cost':_0x5f4952[_0x4d88b2(0x330)]?_0x5f4952[_0x4d88b2(0x330)][_0x4d88b2(0x2db)]:0x0},await updateCoinResults(_0x151ce7);}}}if(!_0x22f8ec){logger[_0x4d88b2(0x291)](_0x4d88b2(0x309)+_0x5f4952['id']),_0x2621c8(_0x4d88b2(0x320));const _0x53467a=await getCoins();[currentCoins,currentCoinsAll]=_0x53467a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3b3639=JSON[_0x4d88b2(0x1f2)](lastBalances[_0x4d88b2(0x313)]);const _0x2304a4=_0x3b3639[_0x4d88b2(0x296)](_0x52394f=>_0x52394f[_0x4d88b2(0x2c5)]==_0x5f4952['symbol']);if(_0x2304a4){if(_0x2df1e6==_0x4d88b2(0x1f1))_0x2304a4[_0x4d88b2(0x209)]=_0x2304a4[_0x4d88b2(0x209)]==_0x4d88b2(0x320)?_0x4d88b2(0x320):_0x4d88b2(0x1f1);else{if(_0x2df1e6==_0x4d88b2(0x2fb))_0x2304a4[_0x4d88b2(0x209)]=_0x2304a4[_0x4d88b2(0x209)]==_0x4d88b2(0x320)?_0x4d88b2(0x320):_0x4d88b2(0x2fb);else _0x2df1e6==_0x4d88b2(0x26f)&&(_0x2304a4[_0x4d88b2(0x209)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x4d88b2(0x37d)](_0x3b3639)},proxyEmit(_0x4d88b2(0x363),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5b76f9=![];currentCoins['forEach'](_0x49b8e8=>{const _0x64e0f8=_0x4b8e;_0x5b76f9=allOpenOrders[_0x64e0f8(0x296)](_0x52ae19=>_0x52ae19['symbol']==_0x49b8e8[_0x64e0f8(0x2c5)]),_0x49b8e8['orderstatus']=_0x5b76f9?_0x64e0f8(0x1f1):'none';});}async function getCoins(_0x11f5f7=!![],_0x5c20d4=config[_0x44508f(0x2b1)]){const _0x4a2308=_0x44508f;let _0x21eb9d,_0x3860fd=[],_0xd84648=[],_0x3ccab8=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x21eb9d=await exchange[_0x4a2308(0x2c2)](),mybalances=_0x21eb9d[_0x4a2308(0x315)];for(const [_0x51e0ad,_0x3a40cb]of Object['entries'](mybalances)){_0x3ccab8['push'](_0x51e0ad);}config[_0x4a2308(0x313)][_0x4a2308(0x2ea)](_0x21e91b=>{const _0x110070=_0x4a2308;!_0x3ccab8[_0x110070(0x2da)](_0x21e91b[_0x110070(0x2de)])&&(mybalances[_0x21e91b[_0x110070(0x2de)]]=0x0);});if(_0x5c20d4=='')for(const [_0x1cab54,_0xd75a15]of Object[_0x4a2308(0x285)](mybalances)){_0xd75a15!=0x0&&_0x3860fd['push']({'coin':_0x1cab54});}else{let _0x2aad79=![];for(const [_0x16aa5c,_0x5b51a7]of Object[_0x4a2308(0x285)](mybalances)){const _0x390864=config[_0x4a2308(0x313)][_0x4a2308(0x296)](_0x39cd8b=>_0x39cd8b[_0x4a2308(0x2de)]==_0x16aa5c),_0xd5f0d7=_0x16aa5c+'/'+_0x5c20d4,_0x3b5105=_0x5c20d4+'/'+_0x16aa5c,_0x1fdf50=currentCoins['find'](_0x47c81f=>_0x47c81f[_0x4a2308(0x2de)]==_0x16aa5c);_0x2aad79=![];if((_0x5b51a7!=0x0||_0x390864)&&(allSymbols['includes'](_0xd5f0d7)||_0x16aa5c==_0x5c20d4))_0x3860fd[_0x4a2308(0x2a7)]({'coin':_0x16aa5c,'symbol':_0xd5f0d7,'reverse':![],'number':Math['max'](_0x5b51a7+(_0x390864&&_0x390864[_0x4a2308(0x30d)]||0x0),0x0),'orderstatus':_0x1fdf50?_0x1fdf50[_0x4a2308(0x209)]:_0x4a2308(0x346)});else{if((_0x5b51a7!=0x0||_0x390864)&&allSymbols['includes'](_0x3b5105))_0x3860fd['push']({'coin':_0x16aa5c,'symbol':_0x3b5105,'reverse':!![],'number':Math[_0x4a2308(0x265)](_0x5b51a7+(_0x390864&&_0x390864[_0x4a2308(0x30d)]||0x0),0x0),'orderstatus':_0x1fdf50?_0x1fdf50[_0x4a2308(0x209)]:_0x4a2308(0x346)});else _0x390864&&_0x3860fd[_0x4a2308(0x2a7)]({'coin':_0x390864[_0x4a2308(0x2de)],'symbol':_0x390864['symbol'],'reverse':_0x390864[_0x4a2308(0x224)],'number':0x0,'orderstatus':_0x4a2308(0x346)});}}}}catch(_0x3bb09d){if(!_0x11f5f7)handleErrorNoStop(_0x3bb09d,_0x4a2308(0x37f));else await handleError(_0x3bb09d,'getCoins()');}return _0xd84648=cloneDeep(_0x3860fd),_0x3860fd=_0x3860fd[_0x4a2308(0x1e6)](_0x1a5051=>{const _0x5e9556=_0x4a2308,_0x4437fb=config[_0x5e9556(0x313)][_0x5e9556(0x296)](_0x2d15b9=>_0x2d15b9['coin']==_0x1a5051['coin']);return _0x4437fb&&!_0x4437fb[_0x5e9556(0x348)];}),[_0x3860fd,_0xd84648];}async function getCoinNumber(_0x34ac0a){const _0x438b39=_0x44508f;let _0x151329;try{const _0x1a24ad=await exchange['fetchBalance']();_0x151329=_0x1a24ad[_0x438b39(0x315)][_0x34ac0a];}catch(_0x5afc65){await handleError(_0x5afc65,_0x438b39(0x271));}return _0x151329;}async function getOpenOrders(){const _0x2c0a80=_0x44508f;let _0x4021ad;allOpenOrders=[];try{for(const _0x4bc2f2 of config[_0x2c0a80(0x313)]){!_0x4bc2f2['excluded']&&_0x4bc2f2[_0x2c0a80(0x2de)]!=config[_0x2c0a80(0x2b1)]&&(_0x4021ad=await exchange[_0x2c0a80(0x2a0)](_0x4bc2f2['symbol']),_0x4021ad[_0x2c0a80(0x1e2)]>0x0&&allOpenOrders['push'](_0x4021ad[0x0]));}}catch(_0x4f52e0){await handleError(_0x4f52e0,_0x2c0a80(0x30c));}}async function handleOpenOrders(_0x3d6690=0x0){const _0x4470da=_0x44508f;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x4470da(0x256)]&&allOrdersPlaced&&(_0x3d6690==0x0?(logger[_0x4470da(0x291)](_0x4470da(0x232)),_0x3d6690++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x4470da(0x214)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1344af){const _0x602c0b=_0x44508f,_0x5e5beb=ccxt[_0x602c0b(0x2dd)][_0x1344af[_0x602c0b(0x32c)][_0x602c0b(0x22d)]()],_0x273a7e=new _0x5e5beb({'apiKey':_0x1344af['apiKey'],'secret':_0x1344af[_0x602c0b(0x246)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1344af[_0x602c0b(0x377)])_0x273a7e['password']=_0x1344af['apiPassword'];try{await _0x273a7e[_0x602c0b(0x36e)]();}catch(_0x406ffd){throw _0x406ffd;}}function cloneDeep(_0xc64ebd){return JSON['parse'](JSON['stringify'](_0xc64ebd));}async function getPortfolio(_0x4354ea){const _0x5484ca=_0x44508f;let _0x133888=[],_0x34bc4d=[],_0x2185ff=[],_0x432808;if(_0x4354ea[_0x5484ca(0x2be)]!==_0x5484ca(0x257)||_0x4354ea[_0x5484ca(0x246)]!==_0x5484ca(0x257)||_0x4354ea['apiPassword']&&_0x4354ea[_0x5484ca(0x377)]!==_0x5484ca(0x257)){if(config[_0x5484ca(0x32c)]){if(_0x4354ea['apiKey']==_0x5484ca(0x257))_0x4354ea[_0x5484ca(0x2be)]=config[_0x5484ca(0x2be)];if(_0x4354ea[_0x5484ca(0x246)]==_0x5484ca(0x257))_0x4354ea['apiSecret']=config[_0x5484ca(0x246)];if(_0x4354ea[_0x5484ca(0x377)]==_0x5484ca(0x257))_0x4354ea[_0x5484ca(0x377)]=config[_0x5484ca(0x377)];try{await testAPI(_0x4354ea);}catch(_0xc25240){if(_0xc25240[_0x5484ca(0x297)]()['includes']('AuthenticationError')){logger[_0x5484ca(0x291)](_0x5484ca(0x371)),proxyEmit(_0x5484ca(0x313),![]);return;}else{handleError(_0xc25240,_0x5484ca(0x37c));return;}}}await initExchange(_0x4354ea[_0x5484ca(0x32c)],_0x4354ea[_0x5484ca(0x2be)],_0x4354ea[_0x5484ca(0x246)],_0x4354ea[_0x5484ca(0x377)]);try{await loadSymbols();}catch(_0x514fbe){if(_0x514fbe[_0x5484ca(0x297)]()['includes'](_0x5484ca(0x1ee))){proxyEmit(_0x5484ca(0x313),![]);return;}else{handleError(_0x514fbe,_0x5484ca(0x2a9));return;}}const _0x42758e=await getCoins(![],_0x4354ea[_0x5484ca(0x2b1)]);_0x2185ff=cloneDeep(_0x42758e[0x1]);}else _0x2185ff=cloneDeep(currentCoinsAll);if(_0x4354ea[_0x5484ca(0x2b1)]=='')proxyEmit(_0x5484ca(0x313),_0x2185ff);else{_0x2185ff[_0x5484ca(0x2ea)](_0x33773c=>{const _0x265c62=_0x5484ca;if(_0x33773c['coin']!=_0x4354ea[_0x265c62(0x2b1)]&&allSymbols[_0x265c62(0x2da)](_0x33773c[_0x265c62(0x2c5)]))_0x133888[_0x265c62(0x2a7)](_0x33773c[_0x265c62(0x2c5)]);});if(_0x133888[_0x5484ca(0x1e2)]==0x0)logHistory(_0x5484ca(0x321),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x34bc4d=await exchange['fetchTickers'](_0x133888);}catch(_0x1b8b20){if(_0x1b8b20['toString']()[_0x5484ca(0x2da)](_0x5484ca(0x1ee))){proxyEmit(_0x5484ca(0x313),![]);return;}else handleError(_0x1b8b20,_0x5484ca(0x1f4));}_0x2185ff[_0x5484ca(0x2ea)](_0x20b591=>{const _0x459c83=_0x5484ca;_0x20b591[_0x459c83(0x2de)]!=_0x4354ea['basecoin']?_0x34bc4d[_0x20b591[_0x459c83(0x2c5)]]?_0x432808=_0x20b591['reverse']?0x1/_0x34bc4d[_0x20b591[_0x459c83(0x2c5)]][_0x459c83(0x20b)]:_0x34bc4d[_0x20b591[_0x459c83(0x2c5)]][_0x459c83(0x20b)]:_0x432808=0x0:_0x432808=0x1,_0x20b591[_0x459c83(0x293)]=formatResult(_0x432808,0x8);}),proxyEmit(_0x5484ca(0x313),_0x2185ff);}}}function truncateTradeAmount(_0xf40d91,_0x5fe616){const _0x105486=_0x44508f;let _0x3b03d1=0x0;try{_0x3b03d1=exchange[_0x105486(0x2f4)](_0xf40d91,_0x5fe616);}catch(_0x3e5f17){}return _0x3b03d1;}function checkMinimums(_0x14d4c0){const _0x3879ea=_0x44508f;let _0x283ff2=!![];const _0x5ba4c0=!_0x14d4c0['reverse']?markets[_0x14d4c0[_0x3879ea(0x2c5)]][_0x3879ea(0x2a1)][_0x3879ea(0x206)][_0x3879ea(0x2f7)]:markets[_0x14d4c0[_0x3879ea(0x2c5)]][_0x3879ea(0x2a1)][_0x3879ea(0x2db)][_0x3879ea(0x2f7)],_0x13e321=!_0x14d4c0[_0x3879ea(0x224)]?markets[_0x14d4c0['symbol']][_0x3879ea(0x2a1)][_0x3879ea(0x2db)][_0x3879ea(0x2f7)]:markets[_0x14d4c0[_0x3879ea(0x2c5)]]['limits']['amount'][_0x3879ea(0x2f7)],_0x2cf8a3=truncateTradeAmount(_0x14d4c0[_0x3879ea(0x2c5)],_0x14d4c0[_0x3879ea(0x2f6)]);_0x14d4c0[_0x3879ea(0x2f6)]=_0x2cf8a3;if(Math[_0x3879ea(0x277)](_0x2cf8a3)<_0x5ba4c0)_0x283ff2=![];if(Math[_0x3879ea(0x277)](_0x2cf8a3)*_0x14d4c0[_0x3879ea(0x20b)]<_0x13e321)_0x283ff2=![];if(_0x14d4c0[_0x3879ea(0x23d)]=='sell'){let _0x623d8=config[_0x3879ea(0x313)][_0x3879ea(0x296)](_0x3f3ba6=>_0x3f3ba6[_0x3879ea(0x2de)]==_0x14d4c0['coin']);if(_0x623d8[_0x3879ea(0x30d)]>0x0){if(Math[_0x3879ea(0x277)](_0x2cf8a3)>_0x14d4c0[_0x3879ea(0x24a)]-_0x623d8['offset'])_0x283ff2=![];}else{if(Math[_0x3879ea(0x277)](_0x2cf8a3)>_0x14d4c0[_0x3879ea(0x24a)])_0x283ff2=![];}}if(_0x14d4c0[_0x3879ea(0x23d)]==_0x3879ea(0x2c1)){let _0x4b6d15=config['portfolio'][_0x3879ea(0x296)](_0x533add=>_0x533add[_0x3879ea(0x2de)]==config['basecoin']),_0x238aef=currentCoins[_0x3879ea(0x296)](_0xbedfd1=>_0xbedfd1[_0x3879ea(0x2de)]==config[_0x3879ea(0x2b1)]);if(_0x4b6d15[_0x3879ea(0x30d)]>0x0){if(Math[_0x3879ea(0x277)](_0x2cf8a3)*_0x14d4c0[_0x3879ea(0x20b)]>_0x238aef[_0x3879ea(0x24a)]-_0x4b6d15['offset'])_0x283ff2=![];}else{if(Math[_0x3879ea(0x277)](_0x2cf8a3)*_0x14d4c0['last']>_0x238aef[_0x3879ea(0x24a)])_0x283ff2=![];}}return _0x283ff2;}async function getBalances(_0x40ccb7=!![]){const _0x2806c5=_0x44508f;let _0x3fb6a2=0x0,_0x5547dd;const _0x19ec4e=config[_0x2806c5(0x34c)];if(config['headless']&&config[_0x2806c5(0x31c)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2bfa78=>{const _0x155e78=_0x2806c5;if(_0x2bfa78[_0x155e78(0x2de)]!=config[_0x155e78(0x2b1)]){let _0x41d27b=global[_0x155e78(0x2c0)][noslash(_0x2bfa78[_0x155e78(0x2c5)])];_0x5547dd=_0x2bfa78[_0x155e78(0x224)]?0x1/_0x41d27b:_0x41d27b;}else _0x5547dd=0x1;let _0x221fbb=_0x2bfa78['number']*_0x5547dd;_0x3fb6a2+=_0x221fbb,_0x2bfa78['last']=formatResult(Number(_0x5547dd),0x8),_0x2bfa78[_0x155e78(0x31e)]=_0x221fbb;}),currentCoins['forEach'](_0x46294e=>{const _0x2be09b=_0x2806c5;let _0x5bbb00=config[_0x2be09b(0x313)][_0x2be09b(0x296)](_0x42bb4e=>_0x42bb4e[_0x2be09b(0x2de)]==_0x46294e[_0x2be09b(0x2de)]),_0x5c0e72=Number(_0x5bbb00[_0x2be09b(0x234)]),_0x145e1a=_0x46294e[_0x2be09b(0x31e)]/_0x3fb6a2*0x64,_0x3df651=_0x5c0e72*_0x3fb6a2/0x64/_0x46294e[_0x2be09b(0x20b)]-_0x46294e[_0x2be09b(0x24a)];_0x46294e[_0x2be09b(0x234)]=formatResult(_0x145e1a,0x3),_0x46294e['target']=formatResult(_0x5c0e72,0x3),_0x46294e[_0x2be09b(0x2f6)]=formatResult(_0x3df651,0x8),_0x46294e[_0x2be09b(0x23d)]='',_0x46294e[_0x2be09b(0x24f)]=![];if(_0x46294e[_0x2be09b(0x2de)]!=config['basecoin']){if(_0x46294e[_0x2be09b(0x234)]>_0x5c0e72)_0x46294e[_0x2be09b(0x23d)]=_0x2be09b(0x30f),_0x46294e[_0x2be09b(0x24f)]=checkMinimums(_0x46294e);else _0x46294e[_0x2be09b(0x234)]<_0x5c0e72&&(_0x46294e['side']=_0x2be09b(0x2c1),_0x46294e[_0x2be09b(0x24f)]=checkMinimums(_0x46294e));}_0x46294e[_0x2be09b(0x2d2)]=_0x46294e[_0x2be09b(0x234)]/_0x46294e['target']-0x1;if(_0x46294e[_0x2be09b(0x209)]==_0x2be09b(0x320)||_0x46294e[_0x2be09b(0x209)]==_0x2be09b(0x2fb))_0x46294e['orderstatus']=_0x2be09b(0x346);}),currentCoins[_0x2806c5(0x323)]((_0x457a75,_0xa6c6f1)=>_0x457a75['delta']<_0xa6c6f1['delta']?0x1:_0xa6c6f1[_0x2806c5(0x2d2)]<_0x457a75['delta']?-0x1:0x0);const _0x45dd51=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x45dd51[_0x2806c5(0x36a)],'usd':_0x45dd51[_0x2806c5(0x238)],'portfolio':JSON[_0x2806c5(0x37d)](currentCoins),'threshold':_0x19ec4e},proxyEmit(_0x2806c5(0x363),{'serverversion':serverversion,'balances':lastBalances});if(_0x40ccb7){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x19ec4e});else{if(lockOrders==ORDERS[_0x2806c5(0x32a)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x19ec4e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x466df7=getNormalizedPerformance();getStartingBalances(_0x466df7),emitPerformance(_0x466df7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4dbc04=getNormalizedPerformance();emitPerformance(_0x4dbc04),getStartingBalances(_0x4dbc04),logger['debug'](_0x2806c5(0x32b));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xf0cfe3=_0x44508f;if(!lastBalances)return;let _0x5da8b8=[],_0x5e2eba,_0x3dfb49=JSON['parse'](lastBalances['portfolio']);_0x3dfb49['sort']((_0x49e0f8,_0x4d3e0a)=>_0x49e0f8[_0xf0cfe3(0x2de)]>_0x4d3e0a[_0xf0cfe3(0x2de)]?0x1:_0x4d3e0a[_0xf0cfe3(0x2de)]>_0x49e0f8[_0xf0cfe3(0x2de)]?-0x1:0x0),_0x3dfb49['forEach'](_0xa52fb4=>{const _0x4a6e90=_0xf0cfe3;let _0x450e43={'coin':_0xa52fb4[_0x4a6e90(0x2de)],'number':_0xa52fb4[_0x4a6e90(0x24a)],'price':_0xa52fb4[_0x4a6e90(0x20b)]};_0x5da8b8[_0x4a6e90(0x2a7)](_0x450e43);});const _0x3b4810=await getFiat();_0x5e2eba={'date':lastBalances[_0xf0cfe3(0x2e6)]['split']('\x20')[0x0],'eur':_0x3b4810[_0xf0cfe3(0x36a)],'usd':_0x3b4810[_0xf0cfe3(0x238)],'coins':_0x5da8b8};let _0x51f235=dbPerformance['get']('data')['find']({'date':_0x5e2eba[_0xf0cfe3(0x350)]})['value']();_0x51f235?_0x5e2eba[_0xf0cfe3(0x350)]!=config[_0xf0cfe3(0x2ba)]&&dbPerformance[_0xf0cfe3(0x2f1)](_0xf0cfe3(0x255))[_0xf0cfe3(0x296)]({'date':_0x5e2eba[_0xf0cfe3(0x350)]})[_0xf0cfe3(0x370)](_0x5e2eba)[_0xf0cfe3(0x2c4)]():dbPerformance[_0xf0cfe3(0x2f1)](_0xf0cfe3(0x255))[_0xf0cfe3(0x2a7)](_0x5e2eba)[_0xf0cfe3(0x2c4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x56cb8b=_0x44508f;let _0x155c71=[];if(dbPerformance['has'](_0x56cb8b(0x255))[_0x56cb8b(0x31e)]()){let _0x547ce3=dbPerformance[_0x56cb8b(0x2f1)]('data')['cloneDeep']()[_0x56cb8b(0x1e6)](_0x490ef3=>{const _0x2f563b=_0x56cb8b;if(_0x490ef3[_0x2f563b(0x20a)]['length']==0x0)return![];else return!![];})[_0x56cb8b(0x25b)](_0x56cb8b(0x350))[_0x56cb8b(0x31e)](),_0xedb311=[...config[_0x56cb8b(0x357)]];_0xedb311[_0x56cb8b(0x323)]((_0x49b1da,_0xee90fa)=>_0x49b1da[_0x56cb8b(0x350)]>_0xee90fa['date']?-0x1:_0xee90fa[_0x56cb8b(0x350)]>_0x49b1da['date']?0x1:0x0);let _0x5ae282=0x1,_0x332c4a=[],_0x3d09cb=0x0;_0x547ce3[_0x56cb8b(0x2bf)]()[_0x56cb8b(0x224)]()[_0x56cb8b(0x2ea)]((_0x592165,_0x49f1d6)=>{const _0x526083=_0x56cb8b;if(_0xedb311[_0x3d09cb]){if(_0x547ce3[_0x547ce3['length']-_0x49f1d6]&&_0xedb311[_0x3d09cb][_0x526083(0x350)]==_0x547ce3[_0x547ce3[_0x526083(0x1e2)]-_0x49f1d6][_0x526083(0x350)]){if(_0x49f1d6<_0x547ce3[_0x526083(0x1e2)]){let _0x1af336=0x0,_0x10bbcb=0x0;_0x547ce3[_0x547ce3['length']-_0x49f1d6]['coins']['forEach'](_0xae83e1=>{const _0xa45f1d=_0x526083;_0x10bbcb+=_0xae83e1[_0xa45f1d(0x24a)]*_0xae83e1['price'];}),_0xedb311[_0x3d09cb][_0x526083(0x2cf)]['forEach'](_0x5600c5=>{const _0x33ce32=_0x526083;_0x1af336+=_0x5600c5[_0x33ce32(0x24a)]*_0x5600c5[_0x33ce32(0x293)];}),_0x5ae282*=_0x1af336/(_0x10bbcb-_0x1af336)+0x1;}_0x3d09cb++;}}let _0xdf971a=0x0;_0x592165[_0x526083(0x20a)][_0x526083(0x2ea)](_0x44002d=>{const _0x2bfcb2=_0x526083;_0xdf971a+=_0x44002d[_0x2bfcb2(0x24a)]*_0x44002d[_0x2bfcb2(0x293)];}),_0x332c4a[_0x547ce3[_0x526083(0x1e2)]-_0x49f1d6-0x1]=_0xdf971a*(_0x5ae282-0x1);});let _0x5b1749=[];_0xedb311=[...config[_0x56cb8b(0x357)]]||[];let _0x357c8c=0x0;_0x3d09cb=0x0,_0x547ce3[_0x56cb8b(0x2ea)]((_0x40edd9,_0x717661)=>{const _0x309b61=_0x56cb8b;if(_0xedb311[_0x3d09cb]){const _0x2e1c7f=fns['parse'](_0xedb311[_0x3d09cb][_0x309b61(0x350)],_0x309b61(0x34d),new Date()),_0x257e99=fns[_0x309b61(0x1f2)](_0x40edd9[_0x309b61(0x350)],_0x309b61(0x34d),new Date());if(fns[_0x309b61(0x222)](_0x2e1c7f,_0x257e99)){let _0x5e80b0=0x0;_0xedb311[_0x3d09cb][_0x309b61(0x2cf)]['forEach'](_0x169fa5=>{const _0x3df4be=_0x309b61;!_0x5b1749[_0x169fa5[_0x3df4be(0x2de)]]?_0x5b1749[_0x169fa5['coin']]=_0x169fa5[_0x3df4be(0x24a)]:(_0x5e80b0=_0x5b1749[_0x169fa5[_0x3df4be(0x2de)]],_0x5b1749[_0x169fa5[_0x3df4be(0x2de)]]+=_0x169fa5[_0x3df4be(0x24a)]);const _0x5e72de=_0x40edd9[_0x3df4be(0x20a)]['find'](_0x4fe35c=>_0x4fe35c[_0x3df4be(0x2de)]==_0x169fa5[_0x3df4be(0x2de)]);(!_0x5e72de||_0x5e72de[_0x3df4be(0x24a)]==0x0)&&(_0x357c8c+=(-_0x169fa5[_0x3df4be(0x24a)]-_0x5e80b0)*_0x169fa5[_0x3df4be(0x293)]);}),_0x3d09cb++;}}_0x40edd9['coins'][_0x309b61(0x2ea)]((_0x500c5d,_0x2ff6a5)=>{const _0x5b9586=_0x309b61;_0x5b1749[_0x500c5d['coin']]&&(_0x500c5d[_0x5b9586(0x375)]=_0x5b1749[_0x500c5d[_0x5b9586(0x2de)]]);}),_0x155c71[_0x309b61(0x2a7)]({'date':_0x40edd9[_0x309b61(0x350)],'eur':_0x40edd9[_0x309b61(0x36a)],'usd':_0x40edd9[_0x309b61(0x238)],'offset':_0x332c4a[_0x717661],'netoffset':_0x357c8c,'coins':_0x40edd9[_0x309b61(0x20a)]});});}return _0x155c71;}function emitPerformance(_0x114f2a){const _0x2cab5c=_0x44508f;_0x114f2a[_0x2cab5c(0x1e2)]!==0x0?(proxyEmit('performance',_0x114f2a),lastPerformanceEmitted=getDate()):proxyEmit(_0x2cab5c(0x248),[]);}function getPerf(_0x20ff38,_0x1e8293){const _0x5cb9c2=_0x44508f;let _0x29ccc0=0x0,_0x378ed4=0x0,_0x526408=0x0;_0x20ff38[_0x5cb9c2(0x20a)][_0x5cb9c2(0x2ea)](_0x1b4899=>{const _0x20c827=_0x5cb9c2;_0x29ccc0+=_0x1b4899['number']*_0x1b4899[_0x20c827(0x293)];});_0x1e8293&&(_0x29ccc0+=_0x20ff38[_0x5cb9c2(0x30d)]);if(config[_0x5cb9c2(0x2b1)]===_0x5cb9c2(0x29c)||config[_0x5cb9c2(0x2b1)]===_0x5cb9c2(0x1fc))_0x378ed4=_0x29ccc0*_0x20ff38['eur'],_0x526408=_0x29ccc0*_0x20ff38[_0x5cb9c2(0x238)];else{if(usdBasecoins['includes'](config['basecoin']))_0x378ed4=_0x29ccc0*_0x20ff38[_0x5cb9c2(0x36a)]/_0x20ff38[_0x5cb9c2(0x238)],_0x526408=_0x29ccc0;else config[_0x5cb9c2(0x2b1)]===_0x5cb9c2(0x21e)&&(_0x378ed4=_0x29ccc0,_0x526408=_0x29ccc0*_0x20ff38[_0x5cb9c2(0x238)]/_0x20ff38[_0x5cb9c2(0x36a)]);}return[_0x29ccc0,_0x378ed4,_0x526408];}function getKPIs(_0x4cdea6,_0x595b94='EUR'){const _0x3feb2f=_0x44508f,_0x558853=config[_0x3feb2f(0x2b1)],_0x1096ea=lastBalances,_0x44e43e=currentCoins,_0x44c5ff=getNormalizedPerformance(),_0x2c05ce=_0x4cdea6==='basecoin'?_0x558853:_0x4cdea6===_0x3feb2f(0x250)||_0x4cdea6===_0x3feb2f(0x2f5)?_0x595b94:'Net\x20'+_0x558853,_0x588b11=_0x4cdea6===_0x3feb2f(0x364)?'Net\x20effect':_0x4cdea6===_0x3feb2f(0x2f5)?_0x3feb2f(0x2d9):_0x2c05ce+'\x20value',_0x1ed364=_0x4cdea6===_0x3feb2f(0x364)||_0x4cdea6===_0x3feb2f(0x2f5)?_0x3feb2f(0x2d9):_0x2c05ce+_0x3feb2f(0x1f3);let _0x2613a5=0x0;_0x44e43e[_0x3feb2f(0x2ea)](_0x2ff908=>{const _0x2a671c=_0x3feb2f;_0x2613a5+=_0x2ff908[_0x2a671c(0x24a)]*_0x2ff908[_0x2a671c(0x20b)];});if(_0x4cdea6===_0x3feb2f(0x250)||_0x4cdea6===_0x3feb2f(0x2f5)){if(_0x558853===_0x3feb2f(0x29c)||_0x558853==='ETH')_0x2613a5=_0x2613a5*(_0x595b94===_0x3feb2f(0x21e)?_0x1096ea[_0x3feb2f(0x36a)]:_0x1096ea[_0x3feb2f(0x238)]);else{if(usdBasecoins[_0x3feb2f(0x2da)](_0x558853))_0x2613a5=_0x2613a5*(_0x595b94==='EUR'?_0x1096ea[_0x3feb2f(0x36a)]/_0x1096ea[_0x3feb2f(0x238)]:0x1);else _0x558853===_0x3feb2f(0x21e)&&(_0x2613a5=_0x2613a5*(_0x595b94==='EUR'?0x1:_0x1096ea[_0x3feb2f(0x238)]/_0x1096ea['eur']));}}let _0x3f4aa5;if(_0x2613a5!==0x0){if(_0x4cdea6===_0x3feb2f(0x2b1))_0x3f4aa5=(_0x2613a5/startingBalances[_0x3feb2f(0x2b1)]-0x1)*0x64;else{if(_0x595b94===_0x3feb2f(0x21e))_0x3f4aa5=(_0x2613a5/startingBalances[_0x3feb2f(0x36a)]-0x1)*0x64;else _0x3f4aa5=(_0x2613a5/startingBalances[_0x3feb2f(0x238)]-0x1)*0x64;}let _0x57405c=0x0;if(startingBalances['coins'])_0x44e43e[_0x3feb2f(0x2ea)](_0x46cd84=>{const _0xa528b4=_0x3feb2f;let _0x68d97=startingBalances['coins'][_0xa528b4(0x296)](_0x255652=>_0x255652['coin']===_0x46cd84[_0xa528b4(0x2de)]);if(_0x68d97&&_0x68d97['coin']&&_0x46cd84[_0xa528b4(0x24a)]!==0x0)_0x57405c+=_0x68d97['number']*_0x46cd84[_0xa528b4(0x20b)];});let _0x36fd6f=0x0;if(_0x44c5ff['length']!==0x0){let _0x1b25fa=_0x44c5ff[_0x44c5ff[_0x3feb2f(0x1e2)]-0x1];_0x36fd6f=_0x1b25fa[_0x3feb2f(0x304)];}_0x57405c-=_0x36fd6f;_0x4cdea6===_0x3feb2f(0x364)&&(_0x3f4aa5=(_0x2613a5-_0x57405c)/startingBalances[_0x3feb2f(0x2b1)]*0x64,_0x2613a5=_0x2613a5-_0x57405c);if(_0x4cdea6===_0x3feb2f(0x2f5)){let _0x1b145e=_0x595b94===_0x3feb2f(0x21e)?startingBalances['eur']:startingBalances['usd'];if(_0x558853===_0x3feb2f(0x29c)||_0x558853===_0x3feb2f(0x1fc))_0x57405c=_0x595b94===_0x3feb2f(0x21e)?_0x57405c*_0x1096ea[_0x3feb2f(0x36a)]:_0x57405c*_0x1096ea['usd'];else{if(usdBasecoins[_0x3feb2f(0x2da)](_0x558853))_0x57405c=_0x595b94===_0x3feb2f(0x21e)?_0x57405c*_0x1096ea[_0x3feb2f(0x36a)]/_0x1096ea['usd']:_0x57405c;else _0x558853===_0x3feb2f(0x21e)&&(_0x57405c=_0x595b94===_0x3feb2f(0x21e)?_0x57405c:_0x57405c*_0x1096ea[_0x3feb2f(0x238)]/_0x1096ea[_0x3feb2f(0x36a)]);}_0x3f4aa5=(_0x2613a5-_0x57405c)/_0x1b145e*0x64,_0x2613a5=_0x2613a5-_0x57405c;}if(_0x3f4aa5){if(_0x3f4aa5<0x64)_0x3f4aa5=_0x3f4aa5[_0x3feb2f(0x300)](0x2);else{if(_0x3f4aa5<0x3e8)_0x3f4aa5=_0x3f4aa5[_0x3feb2f(0x300)](0x1);else _0x3f4aa5=_0x3f4aa5['toFixed'](0x0);}}else _0x3f4aa5=Number('0')['toFixed'](0x2);if(_0x2613a5){if(Math[_0x3feb2f(0x277)](_0x2613a5)<0.000001)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x2);else{if(Math[_0x3feb2f(0x277)](_0x2613a5)<0.1)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x6);else{if(Math['abs'](_0x2613a5)<0x1)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x5);else{if(Math[_0x3feb2f(0x277)](_0x2613a5)<0xa)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x4);else{if(Math['abs'](_0x2613a5)<0x64)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x3);else{if(Math['abs'](_0x2613a5)<0x3e8)_0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x2);else _0x2613a5=_0x2613a5[_0x3feb2f(0x300)](0x2);}}}}}}else _0x2613a5=Number('0')[_0x3feb2f(0x300)](0x2);}else _0x3f4aa5=Number('0')['toFixed'](0x2);return{'value':_0x2613a5,'change':_0x3f4aa5,'leftTxt':_0x588b11,'rightTxt':_0x1ed364};}async function getStartingBalances(_0x47fe71,_0xc9e1dc=!![]){const _0x3f218e=_0x44508f;if(_0x47fe71[_0x3f218e(0x1e2)]!==0x0){const [_0x40b693,_0x3b4c8f,_0x363f93]=getPerf(_0x47fe71[0x0],!![]);let _0x275864=[];config[_0x3f218e(0x313)][_0x3f218e(0x2ea)](_0x4d18e6=>{const _0x4acda2=_0x3f218e;let _0x9d691b=0x0,_0x24084d;config[_0x4acda2(0x357)][_0x4acda2(0x2ea)](_0x2a1aaa=>{const _0x1bb5b1=_0x4acda2;let _0x5f4153=_0x2a1aaa[_0x1bb5b1(0x2cf)][_0x1bb5b1(0x296)](_0x594bfb=>_0x594bfb['coin']==_0x4d18e6[_0x1bb5b1(0x2de)]);if(_0x5f4153){_0x9d691b+=_0x5f4153[_0x1bb5b1(0x24a)];if(!_0x24084d)_0x24084d=_0x5f4153[_0x1bb5b1(0x293)];}}),_0x275864[_0x4acda2(0x2a7)]({'coin':_0x4d18e6[_0x4acda2(0x2de)],'number':_0x9d691b,'initialprice':_0x24084d});});const _0x20c0d9={'basecoin':_0x40b693,'eur':_0x3b4c8f,'usd':_0x363f93,'coins':_0x275864};if(_0xc9e1dc)proxyEmit(_0x3f218e(0x37a),_0x20c0d9);startingBalances=_0x20c0d9;}}function headlessMode(_0x41db99){const _0x20dfe5=_0x44508f;let _0x273fef=_0x41db99[_0x20dfe5(0x313)],_0xeda391=_0x41db99[_0x20dfe5(0x34c)],_0xe609a1=[];for(let _0x5b6dd3 of _0x273fef){if(_0x5b6dd3['coin']!=config['basecoin']){if(_0x5b6dd3[_0x20dfe5(0x2d2)]>=_0xeda391/0x64){if(_0x5b6dd3[_0x20dfe5(0x24f)])_0xe609a1[_0x20dfe5(0x2a7)](_0x5b6dd3);}else{if(_0x5b6dd3[_0x20dfe5(0x2d2)]<=-_0xeda391/0x64){if(_0x5b6dd3[_0x20dfe5(0x24f)])_0xe609a1[_0x20dfe5(0x2a7)](_0x5b6dd3);}}}}_0xe609a1[_0x20dfe5(0x1e2)]>0x0&&placeOrder(_0xe609a1);}function notifyBalance(_0x51736a){const _0x2f6deb=_0x44508f;let _0x54674a=_0x51736a['portfolio'],_0x199b96=_0x51736a[_0x2f6deb(0x34c)],_0x1e5709=[];for(let _0xe140b2 of _0x54674a){if(_0xe140b2[_0x2f6deb(0x2de)]!=config[_0x2f6deb(0x2b1)]){if(_0xe140b2['delta']>=_0x199b96/0x64){if(_0xe140b2['valid'])_0x1e5709[_0x2f6deb(0x2a7)](_0xe140b2);}else{if(_0xe140b2[_0x2f6deb(0x2d2)]<=-_0x199b96/0x64){if(_0xe140b2[_0x2f6deb(0x24f)])_0x1e5709[_0x2f6deb(0x2a7)](_0xe140b2);}}}}if(_0x1e5709['length']>0x0){let _0x1f29d2=_0x1e5709[_0x2f6deb(0x24c)](_0x2a1724=>_0x2a1724[_0x2f6deb(0x2de)]);_0x1f29d2[_0x2f6deb(0x323)]();let _0xa5545d=_0x1f29d2[_0x2f6deb(0x366)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2f6deb(0x228),'Manual\x20balancing\x20required');lastCoinsToBalance=_0xa5545d;}}function symbolToCoin(_0xd6f7c0){const _0x42579b=_0x44508f;let _0x2567cf;if(_0xd6f7c0[_0x42579b(0x2da)]('/'+config[_0x42579b(0x2b1)]))_0x2567cf=_0xd6f7c0['replace']('/'+config[_0x42579b(0x2b1)],'');if(_0xd6f7c0['includes'](config[_0x42579b(0x2b1)]+'/'))_0x2567cf=_0xd6f7c0[_0x42579b(0x207)](config['basecoin']+'/','');return _0x2567cf;}async function unlockOrders(){const _0x2feb03=_0x44508f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2feb03(0x256)]){logger['debug'](_0x2feb03(0x1e1)),lockOrders=ORDERS[_0x2feb03(0x279)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2f0b98=await getCoins();[currentCoins,currentCoinsAll]=_0x2f0b98,validateOrdersState=_0x2feb03(0x375),persistOpenOrders([]),lockOrders=ORDERS[_0x2feb03(0x32a)],logger['debug'](_0x2feb03(0x308));}}async function validateOrders(_0x30894e){const _0x2175c7=_0x44508f;if(_0x30894e)validateOrdersState=_0x30894e;logger[_0x2175c7(0x291)](_0x2175c7(0x281)+validateOrdersState+_0x2175c7(0x231)+(lockOrders==0x1?_0x2175c7(0x2fd):lockOrders==0x2?_0x2175c7(0x339):_0x2175c7(0x29d)));let _0x734378=[],_0x5c0a9a=config[_0x2175c7(0x2a2)]==_0x2175c7(0x227)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2175c7(0x21c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2175c7(0x256)])return;logger[_0x2175c7(0x291)](_0x2175c7(0x378)+validateOrdersState),lastOrders[_0x2175c7(0x2ea)](_0x59a5c4=>{const _0x6cb137=_0x2175c7;let _0x519a7d=![];_0x59a5c4[_0x6cb137(0x320)]>0x0&&(_0x519a7d=!![]),_0x734378[_0x6cb137(0x2a7)](_0x519a7d),_0x519a7d&&config[_0x6cb137(0x2a2)]!=_0x6cb137(0x227)&&logHistory(_0x6cb137(0x31f),_0x6cb137(0x219)+_0x59a5c4['symbol']+'\x20'+_0x59a5c4['side']+'\x20#'+formatResult(_0x59a5c4[_0x6cb137(0x320)],0x8)+'\x20@'+formatResult(_0x59a5c4[_0x6cb137(0x293)],0x8));}),_0x734378['forEach']((_0x410ba0,_0xb94d23)=>{if(_0x410ba0)lastOrders['splice'](_0xb94d23,0x1);}),persistOpenOrders(lastOrders);const _0x5b3bcd=coolingDown?_0x2175c7(0x266):_0x2175c7(0x25f);if(validateOrdersState=='initial'){validateOrdersState=_0x2175c7(0x35b);if(_0x734378['includes'](![])){if(config[_0x2175c7(0x2a2)]==_0x2175c7(0x227)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x734378[_0x2175c7(0x2da)](![])){}else{if(allOrdersPlaced){if(config[_0x2175c7(0x2a2)]==_0x2175c7(0x227)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x2175c7(0x267))_0x734378[_0x2175c7(0x2da)](![])&&(config[_0x2175c7(0x2a2)]==_0x2175c7(0x227)?logHistory('success',_0x2175c7(0x2bb)+Math[_0x2175c7(0x27f)](_0x5c0a9a*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5b3bcd):(await cancelOrders(),logHistory('success',_0x2175c7(0x2d3)+Math['round'](_0x5c0a9a*validateOrderInterval/0xea60)+_0x2175c7(0x1f9)+_0x5b3bcd))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x2175c7(0x2a2)]!='market')logHistory(_0x2175c7(0x252),_0x2175c7(0x31a)+_0x5b3bcd);await unlockOrders();}}}}}async function cancelOrders(){const _0x56391f=_0x44508f;lastOrders[_0x56391f(0x2ea)](async _0x467f34=>{const _0x3073eb=_0x56391f;try{const _0x4068c2=await exchange['cancelOrder'](_0x467f34[_0x3073eb(0x223)],_0x467f34[_0x3073eb(0x2c5)]);}catch(_0x21f3e0){if(_0x21f3e0[_0x3073eb(0x297)]()[_0x3073eb(0x2da)](_0x3073eb(0x355))){}else await handleError(_0x21f3e0,_0x3073eb(0x213));}});}async function initCoinResults(_0x54ae35){const _0x1ee172=_0x44508f;_0x54ae35?logger[_0x1ee172(0x291)](_0x1ee172(0x36f)+_0x54ae35):logger[_0x1ee172(0x291)](_0x1ee172(0x349)),config[_0x1ee172(0x313)][_0x1ee172(0x2ea)](_0x240f31=>{const _0x1a4816=_0x1ee172;if(!_0x240f31[_0x1a4816(0x348)]&&_0x240f31[_0x1a4816(0x2de)]!=config[_0x1a4816(0x2b1)]){const _0x5728de=currentCoins['find'](_0x1ecff9=>_0x1ecff9[_0x1a4816(0x2de)]==_0x240f31[_0x1a4816(0x2de)]),_0x58342e=global[_0x1a4816(0x2c0)][noslash(_0x240f31[_0x1a4816(0x2c5)])];let _0x160246=_0x5728de?_0x5728de[_0x1a4816(0x24a)]:null,_0x1bfb8c=_0x240f31[_0x1a4816(0x224)]?0x1/_0x58342e:_0x58342e,_0x2b6064;config['liquidity'][_0x1a4816(0x2ea)](_0x51a367=>{const _0x5418f6=_0x1a4816;!_0x2b6064&&(_0x2b6064=_0x51a367[_0x5418f6(0x2cf)][_0x5418f6(0x296)](_0x5b316f=>_0x5b316f[_0x5418f6(0x2de)]==_0x240f31[_0x5418f6(0x2de)]),_0x2b6064&&(_0x160246=_0x2b6064[_0x5418f6(0x24a)],_0x1bfb8c=_0x2b6064[_0x5418f6(0x293)]));});let _0x3b3173=dbCoinResults['get'](_0x1a4816(0x20a))[_0x1a4816(0x296)]({'coin':_0x240f31[_0x1a4816(0x2de)]})[_0x1a4816(0x31e)]();if(!_0x3b3173){const _0xdd56f3={'coin':_0x240f31[_0x1a4816(0x2de)],'number':_0x160246,'breakeven':_0x1bfb8c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1a4816(0x2f1)](_0x1a4816(0x20a))[_0x1a4816(0x2a7)](_0xdd56f3)['write']();}else{if(_0x54ae35&&_0x240f31[_0x1a4816(0x2de)]==_0x54ae35){const _0x4198b2={'coin':_0x240f31[_0x1a4816(0x2de)],'number':_0x160246,'breakeven':_0x1bfb8c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1a4816(0x2f1)](_0x1a4816(0x20a))[_0x1a4816(0x296)]({'coin':_0x240f31[_0x1a4816(0x2de)]})[_0x1a4816(0x370)](_0x4198b2)[_0x1a4816(0x2c4)]();}}}});}async function updateCoinResults(_0x8af9bf,_0x3c2de3=![]){const _0x4d1e63=_0x44508f;let _0x238759,_0x41edc7,_0x37cece,_0x41c347,_0x2d87d5,_0x473b45,_0x1df224=dbCoinResults[_0x4d1e63(0x2f1)](_0x4d1e63(0x20a))[_0x4d1e63(0x296)]({'coin':_0x8af9bf[_0x4d1e63(0x2de)]})[_0x4d1e63(0x31e)](),_0x14fdc7=![];_0x1df224&&Object[_0x4d1e63(0x285)](_0x1df224)[_0x4d1e63(0x2ea)](([_0x33efa2,_0x54f79d])=>{if(_0x54f79d==null)_0x14fdc7=!![];});(!_0x1df224||_0x14fdc7)&&(await initCoinResults(_0x8af9bf[_0x4d1e63(0x2de)]),_0x1df224=dbCoinResults[_0x4d1e63(0x2f1)](_0x4d1e63(0x20a))['find']({'coin':_0x8af9bf[_0x4d1e63(0x2de)]})['value']());_0x8af9bf['reverse']&&(_0x473b45={'filled':_0x8af9bf['filled']*_0x8af9bf[_0x4d1e63(0x293)],'amount':_0x8af9bf[_0x4d1e63(0x320)]*_0x8af9bf[_0x4d1e63(0x293)],'side':_0x8af9bf[_0x4d1e63(0x23d)]==_0x4d1e63(0x30f)?_0x4d1e63(0x2c1):_0x4d1e63(0x30f),'price':0x1/_0x8af9bf[_0x4d1e63(0x293)]},_0x8af9bf={..._0x8af9bf,..._0x473b45});_0x3c2de3?_0x41edc7=_0x8af9bf[_0x4d1e63(0x23d)]=='buy'?_0x1df224[_0x4d1e63(0x24a)]+_0x8af9bf['filled']:_0x1df224[_0x4d1e63(0x24a)]-_0x8af9bf[_0x4d1e63(0x320)]:_0x41edc7=await getCoinNumber(_0x8af9bf[_0x4d1e63(0x2de)]);if(_0x8af9bf[_0x4d1e63(0x330)]&&_0x8af9bf[_0x4d1e63(0x330)][_0x4d1e63(0x1e9)]==config[_0x4d1e63(0x2b1)])_0x238759=_0x8af9bf[_0x4d1e63(0x330)][_0x4d1e63(0x2db)];else{if(_0x8af9bf[_0x4d1e63(0x330)]&&_0x8af9bf['fee']['currency']=='BNB'&&!_0x3c2de3)_0x238759=_0x8af9bf['fee'][_0x4d1e63(0x2db)]*global[_0x4d1e63(0x2c0)][_0x4d1e63(0x331)+config[_0x4d1e63(0x2b1)]];else _0x238759=defaultFee*_0x8af9bf[_0x4d1e63(0x320)]*_0x8af9bf[_0x4d1e63(0x293)];}_0x8af9bf['side']==_0x4d1e63(0x2c1)?(_0x37cece=_0x41edc7!=0x0?(_0x1df224[_0x4d1e63(0x23f)]*_0x1df224[_0x4d1e63(0x24a)]+_0x8af9bf[_0x4d1e63(0x293)]*(_0x41edc7-_0x1df224['number'])+_0x238759)/_0x41edc7:0x0,_0x41c347=_0x1df224['realized']):(_0x37cece=_0x41edc7!=0x0?(_0x1df224[_0x4d1e63(0x23f)]*_0x1df224['number']-_0x8af9bf[_0x4d1e63(0x293)]*(_0x1df224[_0x4d1e63(0x24a)]-_0x41edc7)+_0x238759)/_0x41edc7:0x0,_0x41c347=_0x1df224['realized']+(_0x8af9bf[_0x4d1e63(0x293)]-_0x1df224[_0x4d1e63(0x23f)])*_0x8af9bf[_0x4d1e63(0x320)]);_0x2d87d5=(_0x8af9bf[_0x4d1e63(0x293)]-_0x37cece-_0x238759/_0x8af9bf['filled'])*_0x41edc7;let _0x118deb={'coin':_0x8af9bf['coin'],'number':_0x41edc7,'breakeven':formatResult(_0x37cece,0x8),'realized':formatResult(_0x41c347,0x8),'unrealized':formatResult(_0x2d87d5,0x8),'fees':formatResult(_0x1df224[_0x4d1e63(0x245)]+_0x238759,0x8),'sells':_0x8af9bf['side']==_0x4d1e63(0x30f)?_0x1df224[_0x4d1e63(0x230)]+0x1:_0x1df224[_0x4d1e63(0x230)],'buys':_0x8af9bf[_0x4d1e63(0x23d)]==_0x4d1e63(0x2c1)?_0x1df224[_0x4d1e63(0x2d7)]+0x1:_0x1df224[_0x4d1e63(0x2d7)]};dbCoinResults['get'](_0x4d1e63(0x20a))[_0x4d1e63(0x296)]({'coin':_0x8af9bf[_0x4d1e63(0x2de)]})[_0x4d1e63(0x370)](_0x118deb)['write']();if(!_0x3c2de3){if(_0x8af9bf['fee']&&_0x8af9bf[_0x4d1e63(0x330)]['currency']==_0x4d1e63(0x331)){const _0x15a305=currentCoins[_0x4d1e63(0x296)](_0x3d1d72=>_0x3d1d72[_0x4d1e63(0x2de)]==_0x4d1e63(0x331));if(_0x15a305){let _0x479456=dbCoinResults[_0x4d1e63(0x2f1)]('coins')[_0x4d1e63(0x296)]({'coin':_0x4d1e63(0x331)})[_0x4d1e63(0x31e)]();_0x118deb={..._0x479456,'number':_0x15a305[_0x4d1e63(0x24a)]},dbCoinResults['get'](_0x4d1e63(0x20a))[_0x4d1e63(0x296)]({'coin':_0x4d1e63(0x331)})[_0x4d1e63(0x370)](_0x118deb)['write']();}}}}async function placeOrder(_0x28d26c){const _0x4b3dba=_0x44508f,_0x5b592f=config[_0x4b3dba(0x2a2)]==_0x4b3dba(0x227)?_0x4b3dba(0x227):_0x4b3dba(0x2cc);if(lockOrders==ORDERS[_0x4b3dba(0x32a)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4b3dba(0x256)],allOrdersPlaced=![],validateOrdersState=_0x4b3dba(0x375);let _0x165c30=![];lastOrders=[];for(const _0x28f4ef of _0x28d26c){let _0x53f837,_0x580928,_0x42f491,_0x1596eb,_0x3360e9,_0x410522=_0x28f4ef[_0x4b3dba(0x2c5)];try{const _0x53c23a=await exchange[_0x4b3dba(0x33a)](_0x410522);_0x53f837=_0x28f4ef['reverse']?0x1/_0x28f4ef[_0x4b3dba(0x20b)]:_0x28f4ef[_0x4b3dba(0x20b)],_0x580928=_0x53c23a[_0x4b3dba(0x1e3)],_0x42f491=_0x53c23a[_0x4b3dba(0x2ae)];_0x28f4ef[_0x4b3dba(0x224)]?(_0x1596eb=_0x28f4ef[_0x4b3dba(0x23d)]==_0x4b3dba(0x2c1)?_0x4b3dba(0x30f):_0x4b3dba(0x2c1),_0x3360e9=Math[_0x4b3dba(0x277)](_0x28f4ef['trade'])/_0x53f837):(_0x1596eb=_0x28f4ef[_0x4b3dba(0x23d)],_0x3360e9=Math[_0x4b3dba(0x277)](_0x28f4ef['trade']));_0x5b592f==_0x4b3dba(0x2cc)&&(config[_0x4b3dba(0x2a2)]=='limit-high'&&(_0x53f837=_0x1596eb==_0x4b3dba(0x2c1)?_0x580928:_0x42f491),config[_0x4b3dba(0x2a2)]==_0x4b3dba(0x353)&&(_0x53f837=_0x1596eb==_0x4b3dba(0x2c1)?_0x42f491:_0x580928));_0x3360e9=formatResult(_0x3360e9,0x8),_0x53f837=formatResult(_0x53f837,0x8);const _0x506e32=_0x1596eb==_0x4b3dba(0x30f)?config[_0x4b3dba(0x341)]?String[_0x4b3dba(0x2d4)]('0x'+config[_0x4b3dba(0x341)])+'\x20':'':config['emojibuy']?String[_0x4b3dba(0x2d4)]('0x'+config[_0x4b3dba(0x2af)])+'\x20':'',_0x5338bd=_0x5b592f=='market'?'Market':config[_0x4b3dba(0x2a2)]==_0x4b3dba(0x1ed)?_0x4b3dba(0x2ec):_0x4b3dba(0x317),_0xda1c4e=(Math[_0x4b3dba(0x237)](Math[_0x4b3dba(0x2e0)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x4b3dba(0x2a7)]({'customId':_0xda1c4e,'symbol':_0x410522,'coin':_0x28f4ef[_0x4b3dba(0x2de)],'amount':_0x3360e9,'price':_0x53f837,'side':_0x1596eb,'reverse':_0x28f4ef[_0x4b3dba(0x224)],'filled':0x0});if(_0x5b592f==_0x4b3dba(0x227))logHistory(_0x4b3dba(0x31f),''+_0x506e32+_0x5338bd+_0x4b3dba(0x325)+_0x410522+'\x20'+_0x1596eb+'\x20#'+formatResult(_0x3360e9,0x8)+'\x20@'+formatResult(_0x53f837,0x8));else logHistory(_0x4b3dba(0x31f),''+_0x506e32+_0x5338bd+_0x4b3dba(0x325)+_0x410522+'\x20'+_0x1596eb+'\x20#'+formatResult(_0x3360e9,0x8)+'\x20@'+formatResult(_0x53f837,0x8));let _0x4461ec;_0x5b592f=='market'?_0x1596eb==_0x4b3dba(0x2c1)&&[_0x4b3dba(0x335),'Bitget',_0x4b3dba(0x34b),_0x4b3dba(0x24e),_0x4b3dba(0x2aa)][_0x4b3dba(0x2da)](config[_0x4b3dba(0x32c)])?_0x4461ec=await exchange['createOrder'](_0x410522,_0x5b592f,_0x1596eb,_0x3360e9,_0x53f837):_0x4461ec=await exchange[_0x4b3dba(0x217)](_0x410522,_0x5b592f,_0x1596eb,_0x3360e9,undefined):_0x4461ec=await exchange['createOrder'](_0x410522,_0x5b592f,_0x1596eb,_0x3360e9,_0x53f837);logger[_0x4b3dba(0x291)]('ID:\x20'+_0x4461ec['id']+_0x4b3dba(0x212)+_0xda1c4e);const _0x55884c=lastOrders[_0x4b3dba(0x1e2)]-0x1;if(_0x55884c>=0x0&&lastOrders[_0x55884c]['customId']==_0xda1c4e){lastOrders[_0x55884c][_0x4b3dba(0x223)]=_0x4461ec['id'];if(_0x4461ec[_0x4b3dba(0x206)])lastOrders[_0x55884c][_0x4b3dba(0x206)]=_0x4461ec[_0x4b3dba(0x206)];if(_0x4461ec[_0x4b3dba(0x293)])lastOrders[_0x55884c][_0x4b3dba(0x293)]=_0x4461ec['price'];lastOrders[_0x55884c]['fee']=_0x4461ec[_0x4b3dba(0x330)];}if(config['cooldown']!=0x0){let _0x439dc3=null;if(cooldownTracker[_0x4b3dba(0x1e2)]==config[_0x4b3dba(0x2b3)]-0x1)_0x439dc3=cooldownTracker[_0x4b3dba(0x2f8)]();const _0x4ae4f9=getTimeStamp();cooldownTracker[_0x4b3dba(0x2a7)](_0x4ae4f9);if(_0x439dc3){const _0x1bd224=fns[_0x4b3dba(0x284)](new Date(_0x4ae4f9),new Date(_0x439dc3));if(_0x1bd224<cooldownInterval){logHistory(_0x4b3dba(0x321),_0x4b3dba(0x208)+config[_0x4b3dba(0x2b3)]+_0x4b3dba(0x294)+cooldownInterval/0x3c+_0x4b3dba(0x249)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x1d6526){if(_0x1d6526[_0x4b3dba(0x297)]()[_0x4b3dba(0x2da)](_0x4b3dba(0x1e8)))lastOrders=lastOrders[_0x4b3dba(0x1e6)](_0x16006d=>_0x16006d[_0x4b3dba(0x2c5)]!=_0x410522),logHistory(_0x4b3dba(0x321),_0x4b3dba(0x35e)+_0x410522),_0x165c30=!![];else{if(_0x1d6526[_0x4b3dba(0x297)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x2a31db=>_0x2a31db['symbol']!=_0x410522),logHistory(_0x4b3dba(0x321),'Order\x20amount\x20is\x20invalid:\x20'+_0x410522),_0x165c30=!![];else{if(_0x1d6526['toString']()[_0x4b3dba(0x2da)](_0x4b3dba(0x283)))lastOrders=lastOrders[_0x4b3dba(0x1e6)](_0x2cb168=>_0x2cb168[_0x4b3dba(0x2c5)]!=_0x410522),logHistory(_0x4b3dba(0x321),'Order\x20is\x20invalid:\x20'+_0x410522),logger[_0x4b3dba(0x291)](_0x1d6526),_0x165c30=!![];else _0x1d6526[_0x4b3dba(0x297)]()['includes'](_0x4b3dba(0x327))?(lastOrders=lastOrders[_0x4b3dba(0x1e6)](_0x19f822=>_0x19f822[_0x4b3dba(0x2c5)]!=_0x410522),logHistory(_0x4b3dba(0x321),_0x4b3dba(0x35e)+_0x410522),_0x165c30=!![]):(lastOrders=lastOrders[_0x4b3dba(0x1e6)](_0x2baa73=>_0x2baa73[_0x4b3dba(0x2c5)]!=_0x410522),await handleError(_0x1d6526,_0x4b3dba(0x20e),_0x410522));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4b3dba(0x1e2)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1d2229=config[_0x4b3dba(0x2a2)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4b3dba(0x21c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x1d2229);}else unlockOrders();_0x165c30&&config[_0x4b3dba(0x22b)]&&(logHistory('error',_0x4b3dba(0x318)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4b3dba(0x252),_0x4b3dba(0x2eb)));}else{if(coolingDown)!config[_0x4b3dba(0x22b)]&&logHistory(_0x4b3dba(0x321),_0x4b3dba(0x2cb));else lockOrders!=ORDERS[_0x4b3dba(0x32a)]&&(!config[_0x4b3dba(0x22b)]&&(config[_0x4b3dba(0x2a2)]==_0x4b3dba(0x227)?logHistory(_0x4b3dba(0x321),_0x4b3dba(0x2ab)):logHistory(_0x4b3dba(0x321),_0x4b3dba(0x2df))));}}function persistOpenOrders(_0x254f3c){const _0x2e2f7f=_0x44508f,_0x3f6d38={...config,'openOrders':_0x254f3c};let _0xd6982e=dbConfig[_0x2e2f7f(0x2f1)](_0x2e2f7f(0x29f))[_0x2e2f7f(0x296)]({'botID':botID})[_0x2e2f7f(0x31e)]();_0xd6982e&&dbConfig[_0x2e2f7f(0x2f1)](_0x2e2f7f(0x29f))['find']({'botID':botID})[_0x2e2f7f(0x370)](_0x3f6d38)[_0x2e2f7f(0x2c4)]();}function restoreOrders(){const _0x186a8e=_0x44508f;let _0x449401;config[_0x186a8e(0x22c)]&&allOpenOrders[_0x186a8e(0x2ea)](_0x339711=>{const _0x31d9e6=_0x186a8e,_0xbe8934=config['openOrders'][_0x31d9e6(0x296)](_0x24d890=>_0x24d890[_0x31d9e6(0x223)]==_0x339711['id']);_0xbe8934&&(lastOrders['push'](_0xbe8934),_0x449401=_0x339711[_0x31d9e6(0x314)]);});if(lastOrders[_0x186a8e(0x1e2)]>0x0){lockOrders=ORDERS[_0x186a8e(0x256)],validateOrdersState=_0x186a8e(0x35b),allOrdersPlaced=!![];const _0x20e8b8=new Date()['getTime'](),_0x5211fb=config[_0x186a8e(0x2a2)]==_0x186a8e(0x227)?validateOrderTimeout*0x3c*0x3e8:config[_0x186a8e(0x21c)]*0x3c*0x3e8;if(_0x449401+_0x5211fb>_0x20e8b8){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x55c11b=_0x186a8e;validateOrders(_0x55c11b(0x267));},_0x449401+_0x5211fb-_0x20e8b8);}else validateOrders(_0x186a8e(0x267));}}async function sendMetricsTelegram(){const _0x61ee47=_0x44508f;if(!coinsLoaded){process['send']({'telegrammsg':_0x61ee47(0x36c)},_0x3a8f84=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x241053='';if(config[_0x61ee47(0x1e4)])_0x241053='<b>'+config[_0x61ee47(0x22a)]+_0x61ee47(0x360);else _0x241053='<b>Bot\x20'+botID+_0x61ee47(0x360);const _0x165677=getKPIs(_0x61ee47(0x2b1)),_0x16d944=getKPIs(_0x61ee47(0x250),config[_0x61ee47(0x250)]),_0x53bbaa=getKPIs(_0x61ee47(0x364)),_0x42f8e0=getKPIs('net-fiat',config[_0x61ee47(0x250)]);_0x241053+='<pre>',_0x241053+=_0x165677[_0x61ee47(0x347)]+_0x61ee47(0x1ea)+_0x165677[_0x61ee47(0x31e)]+'\x0a',_0x241053+=_0x165677['rightTxt']+':\x20'+_0x165677[_0x61ee47(0x1f0)]+'%\x0a',_0x241053+=_0x16d944[_0x61ee47(0x347)]+_0x61ee47(0x1ea)+_0x16d944[_0x61ee47(0x31e)]+'\x0a',_0x241053+=_0x16d944[_0x61ee47(0x31d)]+':\x20'+_0x16d944['change']+'%\x0a',_0x241053+=_0x53bbaa[_0x61ee47(0x347)]+':\x20'+_0x53bbaa['value']+'\x20('+config[_0x61ee47(0x2b1)]+')\x0a',_0x241053+=_0x53bbaa[_0x61ee47(0x31d)]+':\x20'+_0x53bbaa[_0x61ee47(0x1f0)]+_0x61ee47(0x274)+config['basecoin']+')\x0a',_0x241053+=_0x42f8e0[_0x61ee47(0x347)]+':\x20'+_0x42f8e0['value']+'\x20('+config[_0x61ee47(0x250)]+')\x0a',_0x241053+=_0x42f8e0[_0x61ee47(0x31d)]+':\x20'+_0x42f8e0[_0x61ee47(0x1f0)]+_0x61ee47(0x274)+config[_0x61ee47(0x250)]+')\x0a',_0x241053+='</pre>',process[_0x61ee47(0x226)]({'telegrammsg':_0x241053},_0x53daff=>{});}async function sendPortfolioTelegram(){const _0x4a0289=_0x44508f;if(!coinsLoaded){process[_0x4a0289(0x226)]({'telegrammsg':_0x4a0289(0x36c)},_0x35b0ff=>{});return;}let _0x1142a0='';if(config[_0x4a0289(0x1e4)])_0x1142a0=_0x4a0289(0x2b2)+config[_0x4a0289(0x22a)]+_0x4a0289(0x2bc);else _0x1142a0=_0x4a0289(0x319)+botID+_0x4a0289(0x2bc);_0x1142a0+=_0x4a0289(0x1e7),_0x1142a0+=_0x4a0289(0x253),_0x1142a0+=_0x4a0289(0x225),_0x1142a0+=_0x4a0289(0x253),currentCoins[_0x4a0289(0x2ea)](_0x223c37=>{const _0x3e53f0=_0x4a0289;_0x1142a0+=_0x223c37[_0x3e53f0(0x2de)]['padEnd'](0x7)+'|\x20'+formatPad(_0x223c37[_0x3e53f0(0x234)],0x2,0x6)+'|\x20'+formatPad(_0x223c37[_0x3e53f0(0x379)],0x2,0x6)+'|\x20'+formatPad(_0x223c37[_0x3e53f0(0x2d2)]*0x64,0x2,0x6)+'\x0a';}),_0x1142a0+=_0x4a0289(0x316),process[_0x4a0289(0x226)]({'telegrammsg':_0x1142a0},_0x1c9bad=>{});}function formatPad(_0x523578,_0x4dde64,_0x4a7b6a){const _0x2654ec=_0x44508f,_0x12dbb6=formatResultString(_0x523578,_0x4dde64);return _0x12dbb6?_0x12dbb6[_0x2654ec(0x247)](_0x4a7b6a):''['padStart'](_0x4a7b6a);}function logHistory(_0x212b11,_0x1fb378,_0xa64f08=''){const _0xecb71d=_0x44508f;logger[_0xecb71d(0x2ac)](''+_0x1fb378);let _0x5e2571={'time':getTimeStamp(),'type':_0x212b11,'event':_0x1fb378};dbLogs[_0xecb71d(0x2f1)](_0xecb71d(0x28d))[_0xecb71d(0x2a7)](_0x5e2571)[_0xecb71d(0x2c4)]();if(_0xa64f08=='')_0xa64f08=_0x1fb378;proxyEmit(_0xecb71d(0x2b8),{'log':_0x5e2571,'summary':_0xa64f08}),process['send']({'telegram':{..._0x5e2571,'botname':config['botname'],'showname':config[_0xecb71d(0x1e4)]}},_0x1bdc9c=>{});}function emitHistory(_0x47f4e6={}){const _0x576f74=_0x44508f;Object[_0x576f74(0x30b)](_0x47f4e6)[_0x576f74(0x1e2)]==0x0&&(_0x47f4e6={'type':[_0x576f74(0x31f),'event'],'event':'','page':0x1});if(_0x47f4e6[_0x576f74(0x1e5)][_0x576f74(0x2da)](_0x576f74(0x2b8)))_0x47f4e6[_0x576f74(0x1e5)]['splice'](_0x47f4e6[_0x576f74(0x1e5)][_0x576f74(0x29b)](_0x576f74(0x2b8)),0x1,_0x576f74(0x321),'warning',_0x576f74(0x252));if(dbLogs[_0x576f74(0x2fe)](_0x576f74(0x28d))[_0x576f74(0x31e)]()){let _0x53652f=dbLogs[_0x576f74(0x2f1)](_0x576f74(0x28d))['filter'](_0x1b19f9=>{const _0x50acbd=_0x576f74;if(_0x47f4e6[_0x50acbd(0x1e5)][_0x50acbd(0x1e2)]==0x0)return![];else return _0x47f4e6[_0x50acbd(0x1e5)][_0x50acbd(0x2da)](_0x1b19f9[_0x50acbd(0x1e5)]);})[_0x576f74(0x1e6)](_0x47f8f4=>{const _0x3972d0=_0x576f74;if(_0x47f4e6[_0x3972d0(0x2b8)]=='')return!![];else return _0x47f8f4[_0x3972d0(0x2b8)][_0x3972d0(0x22d)]()[_0x3972d0(0x2da)](_0x47f4e6[_0x3972d0(0x2b8)]['toLowerCase']());})[_0x576f74(0x25b)]('time'),_0x37d504=_0x53652f['value']()[_0x576f74(0x1e2)];_0x53652f=_0x53652f[_0x576f74(0x224)]()['slice']((_0x47f4e6['page']-0x1)*logPageSize,_0x47f4e6[_0x576f74(0x27d)]*logPageSize-0x1)[_0x576f74(0x224)]()[_0x576f74(0x31e)](),proxyEmit(_0x576f74(0x2d5),{'logs':_0x53652f,'total':_0x37d504});}else proxyEmit(_0x576f74(0x2d5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5bc285){const _0xfd1111=_0x44508f;if(dbLogs[_0xfd1111(0x2fe)](_0xfd1111(0x28d))[_0xfd1111(0x31e)]()){const _0x59fe34=dbLogs[_0xfd1111(0x2f1)]('logs')[_0xfd1111(0x25b)]('time')[_0xfd1111(0x1e6)](_0x182a5a=>{const _0x30500d=_0xfd1111;return _0x182a5a[_0x30500d(0x1e5)]==_0x30500d(0x31f);})[_0xfd1111(0x31e)]();dbLogs[_0xfd1111(0x2f1)]('logs')[_0xfd1111(0x26e)]()['write'](),dbLogs[_0xfd1111(0x2f1)](_0xfd1111(0x28d))[_0xfd1111(0x370)](_0x59fe34)['write'](),emitHistory(_0x5bc285);}}async function pauseBot(){const _0x394783=_0x44508f,_0x2a618d=new Date()['getTime']();if(!lastErrorShown||_0x2a618d-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2a618d;!lastBotPause?(lastBotPause=_0x2a618d,consecutivePauses=0x1):(_0x2a618d-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':'restart'},_0x9619ae=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x394783(0x326)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0xabdc99=_0x44508f;botPaused=!![],await sleep(0x3e8),process[_0xabdc99(0x226)]({'stop':_0xabdc99(0x2b5)},_0x221ac7=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3248a1,_0x61fe26){const _0xf0b1be=_0x44508f;if(botPaused)return;const _0x556c98=config[_0xf0b1be(0x32c)]||_0xf0b1be(0x30e);if(_0x61fe26)logger[_0xf0b1be(0x291)](_0xf0b1be(0x33e)+_0x61fe26);if(_0x3248a1[_0xf0b1be(0x297)]()[_0xf0b1be(0x2da)]('API-key\x20format\x20invalid'))logHistory(_0xf0b1be(0x321),_0x556c98+_0xf0b1be(0x270));else{if(_0x3248a1[_0xf0b1be(0x297)]()[_0xf0b1be(0x2da)](_0xf0b1be(0x1eb)))logHistory(_0xf0b1be(0x321),_0x556c98+_0xf0b1be(0x34e));else _0x3248a1[_0xf0b1be(0x297)]()['includes'](_0xf0b1be(0x1ee))?(logHistory('error',_0x556c98+_0xf0b1be(0x367)),logHistory(_0xf0b1be(0x321),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x3248a1,null);}}async function handleError(_0x3f868a,_0x544874,_0x46edb0=''){const _0x3ccb7d=_0x44508f;if(botPaused)return;const _0x534c15=config[_0x3ccb7d(0x32c)]||'Exchange';if(_0x544874)logger[_0x3ccb7d(0x291)](_0x3ccb7d(0x33e)+_0x544874);if(_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x356))||_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x2a6)))logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x25c)+pauseBotMsg),await pauseBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)]('ExchangeNotAvailable')||_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x37e)))logHistory('error',_0x534c15+_0x3ccb7d(0x352)+pauseBotMsg),await pauseBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()['includes'](_0x3ccb7d(0x336)))logHistory(_0x3ccb7d(0x321),_0x534c15+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x3f868a['toString']()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x286)))logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x376)+pauseBotMsg),await pauseBot();else{if(_0x3f868a['toString']()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3ccb7d(0x321),_0x3ccb7d(0x2d0)),logHistory('error',_0x3ccb7d(0x280)),await killBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)]('InvalidNonce'))logHistory(_0x3ccb7d(0x321),_0x3ccb7d(0x33d)),logHistory(_0x3ccb7d(0x321),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3f868a instanceof ccxt[_0x3ccb7d(0x251)])logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x369)+pauseBotMsg),logger[_0x3ccb7d(0x291)](_0x3ccb7d(0x1f8),_0x3f868a),await pauseBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()['includes'](_0x3ccb7d(0x20f)))logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x204)),logHistory('error',_0x3ccb7d(0x280)),await killBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x1eb)))logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x261)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3f868a[_0x3ccb7d(0x297)]()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x1ee)))logHistory(_0x3ccb7d(0x321),_0x534c15+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x3ccb7d(0x280)),await killBot();else{if(_0x3f868a['toString']()[_0x3ccb7d(0x2da)](_0x3ccb7d(0x344)))logHistory(_0x3ccb7d(0x321),_0x3ccb7d(0x2ef)+_0x46edb0);else _0x3f868a instanceof ccxt[_0x3ccb7d(0x2b9)]?(logHistory(_0x3ccb7d(0x321),_0x534c15+_0x3ccb7d(0x289)),logger[_0x3ccb7d(0x291)](_0x3ccb7d(0x1f8),_0x3f868a)):(logHistory('error',_0x3ccb7d(0x302)+pauseBotMsg),logger['debug'](_0x3ccb7d(0x1f8),_0x3f868a),await pauseBot());}}}}}}}}}}}function formatResult(_0x3c0c69,_0x34722e){const _0x4878d3=_0x44508f;return parseFloat(_0x3c0c69[_0x4878d3(0x300)](_0x34722e));}function formatResultTruncate(_0x3cd27c,_0x1f9243){const _0x3a064c=_0x44508f;let _0x4e911c=formatResultString(_0x3cd27c,0xa),_0x1f1b49=_0x4e911c[_0x3a064c(0x29b)]('.');return _0x1f1b49!=-0x1&&(_0x4e911c=_0x4e911c[_0x3a064c(0x2bf)](0x0,_0x1f1b49+_0x1f9243+0x1)),Number(_0x4e911c);}function formatResultString(_0x418c1f,_0x242aa9){const _0x41c6ab=_0x44508f;let _0x40d94c;if(!(''+_0x418c1f)['includes']('e'))_0x40d94c=+(Math[_0x41c6ab(0x27f)](_0x418c1f+'e+'+_0x242aa9)+'e-'+_0x242aa9);else{let _0x593d87=(''+_0x418c1f)[_0x41c6ab(0x205)]('e'),_0x33348c='';+_0x593d87[0x1]+_0x242aa9>0x0&&(_0x33348c='+'),_0x40d94c=+(Math[_0x41c6ab(0x27f)](+_0x593d87[0x0]+'e'+_0x33348c+(+_0x593d87[0x1]+_0x242aa9))+'e-'+_0x242aa9);}return Number(_0x40d94c)[_0x41c6ab(0x300)](_0x242aa9);}function getServerTime(){const _0x1721c4=_0x44508f,_0x195134=new Date();return _0x195134[_0x1721c4(0x220)]()+'/'+(_0x195134['getMonth']()+0x1)[_0x1721c4(0x297)]()[_0x1721c4(0x247)](0x2,'0')+'/'+_0x195134[_0x1721c4(0x299)]()[_0x1721c4(0x297)]()[_0x1721c4(0x247)](0x2,'0')+'\x20'+_0x195134['getHours']()[_0x1721c4(0x297)]()[_0x1721c4(0x247)](0x2,'0')+':'+_0x195134[_0x1721c4(0x2c3)]()['toString']()[_0x1721c4(0x247)](0x2,'0')+':'+_0x195134[_0x1721c4(0x2b7)]()[_0x1721c4(0x297)]()[_0x1721c4(0x247)](0x2,'0');}function getTimeStamp(){const _0x2f6c7a=_0x44508f,_0x314f1e=shiftedTime();return _0x314f1e[_0x2f6c7a(0x220)]()+'/'+(_0x314f1e[_0x2f6c7a(0x203)]()+0x1)[_0x2f6c7a(0x297)]()[_0x2f6c7a(0x247)](0x2,'0')+'/'+_0x314f1e[_0x2f6c7a(0x299)]()[_0x2f6c7a(0x297)]()[_0x2f6c7a(0x247)](0x2,'0')+'\x20'+_0x314f1e[_0x2f6c7a(0x322)]()[_0x2f6c7a(0x297)]()[_0x2f6c7a(0x247)](0x2,'0')+':'+_0x314f1e['getMinutes']()[_0x2f6c7a(0x297)]()[_0x2f6c7a(0x247)](0x2,'0')+':'+_0x314f1e[_0x2f6c7a(0x2b7)]()[_0x2f6c7a(0x297)]()[_0x2f6c7a(0x247)](0x2,'0');}function getDate(){const _0x2bf53a=_0x44508f,_0x319cb9=shiftedTime();return _0x319cb9[_0x2bf53a(0x220)]()+'/'+(_0x319cb9[_0x2bf53a(0x203)]()+0x1)[_0x2bf53a(0x297)]()[_0x2bf53a(0x247)](0x2,'0')+'/'+_0x319cb9[_0x2bf53a(0x299)]()['toString']()[_0x2bf53a(0x247)](0x2,'0');}function getHour(){const _0x559280=_0x44508f,_0xeac05c=shiftedTime();return _0xeac05c['getHours']()[_0x559280(0x297)]()[_0x559280(0x247)](0x2,'0');}function sleep(_0x1c0bf7){return new Promise(_0x4deebd=>setTimeout(_0x4deebd,_0x1c0bf7));}function shiftedTime(){const _0x23bfa4=_0x44508f,_0x3b8ef0=new Date();let _0x5b6f10=_0x3b8ef0;if(config&&config['timeshift']!==0x0)_0x5b6f10=fns[_0x23bfa4(0x287)](_0x3b8ef0,{'hours':config['timeshift']});return _0x5b6f10;}function timer(_0x25d922){const _0x17985f=_0x44508f,_0x5a03f4=new Date();!lasttime?console[_0x17985f(0x1ff)](getTimeStamp()+_0x17985f(0x1e0),_0x25d922,_0x5a03f4):console['log'](getTimeStamp()+_0x17985f(0x1e0),_0x25d922,(_0x5a03f4-lasttime)/0x3e8),lasttime=_0x5a03f4;}