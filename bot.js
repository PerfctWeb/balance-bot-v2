const _0x4721ce=_0x496d;(function(_0x505ded,_0x1a45b7){const _0x8fffce=_0x496d,_0x15d8cf=_0x505ded();while(!![]){try{const _0x47436e=-parseInt(_0x8fffce(0x2c2))/0x1+parseInt(_0x8fffce(0x257))/0x2*(-parseInt(_0x8fffce(0x1f5))/0x3)+-parseInt(_0x8fffce(0x1b2))/0x4+parseInt(_0x8fffce(0x23a))/0x5*(-parseInt(_0x8fffce(0x212))/0x6)+parseInt(_0x8fffce(0x31a))/0x7+-parseInt(_0x8fffce(0x28a))/0x8+parseInt(_0x8fffce(0x1ce))/0x9;if(_0x47436e===_0x1a45b7)break;else _0x15d8cf['push'](_0x15d8cf['shift']());}catch(_0x2339df){_0x15d8cf['push'](_0x15d8cf['shift']());}}}(_0x4088,0xa8e10));const _0x43a806=function(){let _0x45914e=!![];return function(_0x5579b7,_0x524425){const _0x1a5f34=_0x45914e?function(){const _0x23f995=_0x496d;if(_0x524425){const _0x27d280=_0x524425[_0x23f995(0x310)](_0x5579b7,arguments);return _0x524425=null,_0x27d280;}}:function(){};return _0x45914e=![],_0x1a5f34;};}(),_0x2655b2=_0x43a806(this,function(){const _0x452479=_0x496d;return _0x2655b2['toString']()['search'](_0x452479(0x283))[_0x452479(0x274)]()[_0x452479(0x320)](_0x2655b2)[_0x452479(0x1de)]('(((.+)+)+)+$');});_0x2655b2();'use strict';const ccxt=require(_0x4721ce(0x1bf))[_0x4721ce(0x30f)],low=require(_0x4721ce(0x30d)),FileSync=require(_0x4721ce(0x30e)),fs=require('fs'),fns=require(_0x4721ce(0x275)),Crypt=require('hybrid-crypto-js')[_0x4721ce(0x2dd)],util=require(_0x4721ce(0x22e)),argv=require(_0x4721ce(0x2e6))(process[_0x4721ce(0x2ca)][_0x4721ce(0x322)](0x2))[_0x4721ce(0x2ca)],path=require(_0x4721ce(0x222));let exchange;global[_0x4721ce(0x24e)]={},global[_0x4721ce(0x2be)]={};const exceptions={'binance':['DAI/',_0x4721ce(0x1f0),'XEM/BUSD',_0x4721ce(0x321),_0x4721ce(0x294)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4721ce(0x1d3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4721ce(0x1c9)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')['version'],botID=process['argv'][0x2]||_0x4721ce(0x238),pattern=/^[0-9]{3}$/;!pattern[_0x4721ce(0x2a1)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x4721ce(0x2ca)][0x3]||'',configpath=userID?_0x4721ce(0x258)+userID+'/':_0x4721ce(0x258),logspath=userID?'./logs/'+userID+'/':_0x4721ce(0x284),loggerfile=fs[_0x4721ce(0x2d3)](logspath+_0x4721ce(0x308),{'flags':'a'});!fs[_0x4721ce(0x2dc)](configpath)&&fs[_0x4721ce(0x286)](configpath);!fs[_0x4721ce(0x2dc)](logspath)&&fs[_0x4721ce(0x286)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x4721ce(0x269)+botID+_0x4721ce(0x2f6),performancefile=configpath+_0x4721ce(0x269)+botID+_0x4721ce(0x2cf),coinresultsfile=configpath+_0x4721ce(0x269)+botID+_0x4721ce(0x216),settingsfile=configpath+_0x4721ce(0x205),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x4721ce(0x2c6),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4721ce(0x1c7)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4721ce(0x1c7)]({'data':[],'version':serverversion})[_0x4721ce(0x1cf)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4721ce(0x1c7)]({'bot':[],'version':serverversion})[_0x4721ce(0x1cf)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x4721ce(0x1cf)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4721ce(0x230),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5a8d83=>{const _0x4f7edf=_0x4721ce;console[_0x4f7edf(0x1e2)](_0x5a8d83);},'simple':_0x328347=>{const _0xcfa90f=_0x4721ce;console[_0xcfa90f(0x1e2)](_0x328347),loggerfile[_0xcfa90f(0x1cf)](util['format'](_0x328347)+'\x0a');},'full':async(_0x344aa6,_0x27c9b8='')=>{const _0x292df5=_0x4721ce;let _0x1f3b31;if(config[_0x292df5(0x1d4)])_0x1f3b31=getTimeStamp()+':\x20'+config[_0x292df5(0x2b0)]+_0x292df5(0x1bc)+_0x344aa6;else _0x1f3b31=getTimeStamp()+_0x292df5(0x2e4)+botID+'\x20>\x20'+_0x344aa6;console['log'](_0x1f3b31),loggerfile[_0x292df5(0x1cf)](util[_0x292df5(0x1ca)](_0x1f3b31)+'\x0a'),_0x27c9b8&&(console[_0x292df5(0x1e2)](_0x27c9b8),loggerfile[_0x292df5(0x1cf)](util[_0x292df5(0x1ca)](_0x27c9b8)+'\x0a'));},'debug':async(_0x1e4af8,_0x198f49='')=>{const _0x2c2e67=_0x4721ce;let _0x33b493;if(config[_0x2c2e67(0x1d4)])_0x33b493=getTimeStamp()+':\x20'+config[_0x2c2e67(0x2b0)]+_0x2c2e67(0x328)+_0x1e4af8;else _0x33b493=getTimeStamp()+_0x2c2e67(0x2e4)+botID+_0x2c2e67(0x328)+_0x1e4af8;if(debugging)console['log'](_0x33b493);loggerfile[_0x2c2e67(0x1cf)](util[_0x2c2e67(0x1ca)](_0x33b493)+'\x0a');if(_0x198f49){if(debugging)console[_0x2c2e67(0x1e2)](_0x198f49);loggerfile[_0x2c2e67(0x1cf)](util['format'](_0x198f49)+'\x0a');}}};process['on'](_0x4721ce(0x289),function(_0x2a80d2){const _0xe053d1=_0x4721ce;logger[_0xe053d1(0x325)](_0x2a80d2);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x4721ce(0x2ac)]);function _0x496d(_0x3e9400,_0x34078f){const _0x4cc4f0=_0x4088();return _0x496d=function(_0x2655b2,_0x43a806){_0x2655b2=_0x2655b2-0x1b1;let _0x408881=_0x4cc4f0[_0x2655b2];return _0x408881;},_0x496d(_0x3e9400,_0x34078f);}settings[_0x4721ce(0x30c)]!=config['onepagemode']&&updateOnepagemode(settings[_0x4721ce(0x30c)]);process[_0x4721ce(0x323)]({'started':_0x4721ce(0x202)},_0x56e3eb=>{}),initializeProcessListeners();function proxyEmit(_0x3a02c6,_0x4b6be0=null){const _0xc60e76=_0x4721ce;process[_0xc60e76(0x323)]({'function':_0x3a02c6,'args':_0x4b6be0},_0x58bfdc=>{});}function initializeProcessListeners(){const _0x412e69=_0x4721ce;process['on'](_0x412e69(0x30b),_0x3e67cc=>{const _0x4f2529=_0x412e69;switch(Object[_0x4f2529(0x22f)](_0x3e67cc)[0x0]){case _0x4f2529(0x2ac):_0x3e67cc[_0x4f2529(0x2ac)]!=undefined&&(settings[_0x4f2529(0x2ac)]=_0x3e67cc[_0x4f2529(0x2ac)],updateTimeshift(settings[_0x4f2529(0x2ac)]));break;case _0x4f2529(0x30c):_0x3e67cc['onepagemode']!=undefined&&(settings['onepagemode']=_0x3e67cc[_0x4f2529(0x30c)],updateOnepagemode(settings[_0x4f2529(0x30c)]));break;case'bots':_0x3e67cc[_0x4f2529(0x1c4)]!=undefined&&(bots=JSON[_0x4f2529(0x1e4)](_0x3e67cc[_0x4f2529(0x1c4)]),proxyEmit('bots',bots));break;case _0x4f2529(0x23d):switch(_0x3e67cc[_0x4f2529(0x23d)]){case _0x4f2529(0x295):initclient();break;case _0x4f2529(0x2f3):toggleBotMode();break;case _0x4f2529(0x1d8):emitHistory(_0x3e67cc['args']);break;case _0x4f2529(0x243):deleteHistoryAlerts(_0x3e67cc[_0x4f2529(0x302)]);break;case _0x4f2529(0x2a8):getPortfolio(_0x3e67cc[_0x4f2529(0x302)]);break;case _0x4f2529(0x306):storeConfiguration(_0x3e67cc['args']);break;case _0x4f2529(0x20e):storeHeadless(_0x3e67cc[_0x4f2529(0x302)]);break;case _0x4f2529(0x22a):storeFiat(_0x3e67cc[_0x4f2529(0x302)]);break;case _0x4f2529(0x1e9):resetHistory();break;case _0x4f2529(0x23f):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3e67cc[_0x4f2529(0x302)]);break;case'cancelLoading':cancelLoading();break;case _0x4f2529(0x254):showConfig();break;case _0x4f2529(0x314):sendMetricsTelegram();break;case _0x4f2529(0x273):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0xd0892d=null,_0x15cdcc=![]){const _0x44e984=_0x4721ce;logger['debug']('Reset\x20|\x20'+(_0xd0892d&&_0xd0892d['length']>0x0?_0x44e984(0x329)+_0xd0892d[_0x44e984(0x2a3)](','):_0x44e984(0x2d5))+_0x44e984(0x2bf)+(_0x15cdcc?_0x44e984(0x305):_0x44e984(0x2b9)));if(pidBalances)clearTimeout(pidBalances);if(!_0x15cdcc)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x44e984(0x260)]!=''&&config[_0x44e984(0x260)]!=_0x44e984(0x1bb)){if(_0x15cdcc){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x483836){handleErrorNoStop(_0x483836,_0x44e984(0x29d));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0xd0892d);const _0x1c8066=await getCoins();[currentCoins,currentCoinsAll]=_0x1c8066,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders[_0x44e984(0x1f1)]==0x0&&allOpenOrders[_0x44e984(0x1f1)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x5b0fe9=_0x4721ce;logger[_0x5b0fe9(0x27d)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x5b0fe9(0x1c9)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x5b0fe9(0x223)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x1e4197=config[_0x4721ce(0x20a)],_0x223a7a=config[_0x4721ce(0x260)],_0x1b61df=config['apiSecret'],_0x13b568=config['apiPassword']){const _0x596464=_0x4721ce;exchange&&await stopExchange();!supportedExchanges()[_0x596464(0x1b3)](_0x1e4197)&&(logHistory(_0x596464(0x291),_0x596464(0x214)+_0x1e4197+'\x20exchange'),killBot());const _0x577d18=ccxt[_0x1e4197[_0x596464(0x211)]()];exchange=new _0x577d18({'apiKey':_0x223a7a,'secret':_0x1b61df,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x13b568)exchange[_0x596464(0x1c2)]=_0x13b568;}function setStableCoins(){const _0x4e36ac=_0x4721ce;let _0x9ec01a=config['basecoin']==_0x4e36ac(0x1b6)?_0x4e36ac(0x1b6):'BTC',_0xaa4183=!allSymbols[_0x4e36ac(0x1b3)](_0x9ec01a+_0x4e36ac(0x25b))?'USDT':_0x4e36ac(0x1f2),_0x4956cf=!allSymbols[_0x4e36ac(0x1b3)](_0x9ec01a+_0x4e36ac(0x26f))?_0xaa4183:'EUR';stablecoins={'eur':{'coin':''+_0x9ec01a+_0x4956cf,'symbol':_0x9ec01a+'/'+_0x4956cf},'usd':{'coin':''+_0x9ec01a+_0xaa4183,'symbol':_0x9ec01a+'/'+_0xaa4183}};}async function initwsCcxt(_0x36d4f9){const _0x31ef25=_0x4721ce;_0x36d4f9==null&&(_0x36d4f9=[],config[_0x31ef25(0x1be)][_0x31ef25(0x251)](_0x26c89d=>{const _0x5a1961=_0x31ef25;if(!_0x26c89d[_0x5a1961(0x28e)]&&_0x26c89d[_0x5a1961(0x203)]!=config['basecoin'])_0x36d4f9[_0x5a1961(0x213)](_0x26c89d[_0x5a1961(0x29f)]);}));if(!_0x36d4f9['includes'](stablecoins[_0x31ef25(0x29a)]['symbol']))_0x36d4f9[_0x31ef25(0x213)](stablecoins[_0x31ef25(0x29a)][_0x31ef25(0x29f)]);if(!_0x36d4f9[_0x31ef25(0x1b3)](stablecoins[_0x31ef25(0x244)][_0x31ef25(0x29f)]))_0x36d4f9[_0x31ef25(0x213)](stablecoins[_0x31ef25(0x244)][_0x31ef25(0x29f)]);if(config[_0x31ef25(0x20a)]['startsWith']('Binance')){if(!_0x36d4f9[_0x31ef25(0x1b3)](_0x31ef25(0x2ec)+config[_0x31ef25(0x1c3)]))_0x36d4f9[_0x31ef25(0x213)](_0x31ef25(0x2ec)+config['basecoin']);}loadCoins(_0x36d4f9);const _0x516f0e=async _0x7237ac=>{const _0x42d646=_0x31ef25,_0x742299=await exchange[_0x42d646(0x1ef)](_0x7237ac);global[_0x42d646(0x24e)][noslash(_0x742299[_0x42d646(0x29f)])]=_0x742299['last'];while(!![]){if(!botPaused)try{const _0x51cb51=await exchange[_0x42d646(0x2e0)](_0x7237ac);global[_0x42d646(0x24e)][noslash(_0x51cb51[0x0][_0x42d646(0x29f)])]=_0x51cb51[0x0][_0x42d646(0x200)],await sleep(0x3e8);}catch(_0x4cadc9){if(!exchangeStopped)await handleError(_0x4cadc9,'watchTrades',_0x7237ac);}else await sleep(0x3e8);}},_0xbc9e84=async _0x5f32e0=>{const _0x2521cb=_0x31ef25;while(!![]){if(!botPaused)try{const _0x3dea18=await exchange[_0x2521cb(0x1ef)](_0x5f32e0);global[_0x2521cb(0x2be)][_0x3dea18[_0x2521cb(0x29f)]]=_0x3dea18[_0x2521cb(0x285)],await sleep(0x3c*0x3e8);}catch(_0x5deece){if(!exchangeStopped)await handleError(_0x5deece,'fetchTickers',_0x5f32e0);}else await sleep(0x3e8);}},_0xfa48b=async()=>{const _0x36f97f=_0x31ef25;while(!![]){if(!botPaused)try{const _0xc9775a=await exchange[_0x36f97f(0x237)]();_0xc9775a[_0x36f97f(0x251)](_0x48917c=>{updateNumberCoinsCcxt(_0x48917c);});}catch(_0x2e5147){if(!exchangeStopped)await handleError(_0x2e5147,_0x36f97f(0x237));}else await sleep(0x3e8);}};_0x36d4f9[_0x31ef25(0x251)](async _0x24f370=>{_0x516f0e(_0x24f370),_0xbc9e84(_0x24f370);}),!wsEventsSet&&(wsEventsSet=!![],_0xfa48b(),watchTransactions());}async function watchTransactions(){const _0x5600df=_0x4721ce;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xbed121=await getCoins(),[_0x34f7cc,_0x3b5f70]=_0xbed121;let _0x4e3e3e=[];currentCoins[_0x5600df(0x251)](_0x178aab=>{const _0x416426=_0x5600df,_0x56881b=_0x34f7cc[_0x416426(0x1b1)](_0x156a46=>_0x156a46[_0x416426(0x203)]==_0x178aab['coin']);_0x56881b&&(_0x178aab[_0x416426(0x2bb)]!=_0x56881b[_0x416426(0x2bb)]&&_0x4e3e3e[_0x416426(0x213)]({'coin':_0x178aab[_0x416426(0x203)],'symbol':_0x178aab[_0x416426(0x29f)],'number':Number(formatResult(_0x56881b[_0x416426(0x2bb)]-_0x178aab[_0x416426(0x2bb)],0x8))}));});if(_0x4e3e3e[_0x5600df(0x1f1)]==0x1&&!blockTransactionDetection){logger[_0x5600df(0x27d)](_0x5600df(0x1dc)+lastFees[_0x5600df(0x24b)]+'\x20|\x20highest:\x20'+lastFees[_0x5600df(0x25c)]);if(!lastFees[_0x5600df(0x24b)]||_0x4e3e3e[0x0][_0x5600df(0x203)]!=lastFees['currency']||_0x4e3e3e[0x0][_0x5600df(0x2bb)]>lastFees[_0x5600df(0x25c)]){let _0x5967c1;if(_0x4e3e3e[0x0][_0x5600df(0x203)]!=config[_0x5600df(0x1c3)]){let _0x2911ca=global[_0x5600df(0x24e)][noslash(_0x4e3e3e[0x0][_0x5600df(0x29f)])];_0x5967c1=_0x4e3e3e[0x0][_0x5600df(0x221)]?0x1/_0x2911ca:_0x2911ca;}else _0x5967c1=0x1;_0x4e3e3e[0x0]['price']=_0x5967c1,delete _0x4e3e3e[0x0]['symbol'];let _0x346cfb=[],_0x4e0164=[...config[_0x5600df(0x319)]]||[],_0x54d172=config[_0x5600df(0x319)];_0x4e0164['sort']((_0x55cc10,_0x826009)=>_0x55cc10[_0x5600df(0x1fa)]>_0x826009[_0x5600df(0x1fa)]?-0x1:_0x826009['date']>_0x55cc10[_0x5600df(0x1fa)]?0x1:0x0);const _0x354b3e=getDate();if(_0x4e0164[0x0]){const _0x3dbb09=fns[_0x5600df(0x1e4)](_0x4e0164[0x0][_0x5600df(0x1fa)],'yyyy/MM/dd',new Date()),_0x40632c=fns[_0x5600df(0x1e4)](_0x354b3e,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x3dbb09,_0x40632c)){_0x346cfb=_0x4e0164[0x0]['changes'];const _0x2e8b5a=_0x346cfb[_0x5600df(0x1b1)](_0x44186d=>_0x44186d['coin']==_0x4e3e3e[0x0]['coin']);_0x2e8b5a?(_0x2e8b5a[_0x5600df(0x2bb)]+=_0x4e3e3e[0x0][_0x5600df(0x2bb)],_0x2e8b5a[_0x5600df(0x2bb)]==0x0&&(_0x346cfb=_0x346cfb[_0x5600df(0x2fe)](_0x4f3d1c=>{const _0x518ec1=_0x5600df;return _0x4f3d1c[_0x518ec1(0x203)]!=_0x4e3e3e[0x0][_0x518ec1(0x203)];}))):_0x346cfb[_0x5600df(0x213)](_0x4e3e3e[0x0]);const _0x687c8c=_0x54d172[_0x5600df(0x1b1)](_0x3b8b3a=>_0x3b8b3a['date']==_0x354b3e);_0x687c8c[_0x5600df(0x2cd)]=_0x346cfb;}else _0x54d172[_0x5600df(0x213)]({'date':_0x354b3e,'changes':[_0x4e3e3e[0x0]]});}const _0x2d2435=_0x54d172[_0x5600df(0x1b1)](_0x1f030a=>_0x1f030a[_0x5600df(0x1fa)]==_0x354b3e);if(_0x2d2435){let _0x12d05e=!![];_0x2d2435['changes'][_0x5600df(0x251)](_0x543406=>{if(_0x543406['number']!=0x0)_0x12d05e=![];}),_0x12d05e&&(_0x54d172=_0x54d172['filter'](_0x448470=>{return _0x448470['date']!=_0x354b3e;}));}let _0x509ee2=dbConfig['get']('bot')[_0x5600df(0x1b1)]({'botID':botID})['value']();_0x509ee2&&(dbConfig[_0x5600df(0x1d6)](_0x5600df(0x2ee))[_0x5600df(0x1b1)]({'botID':botID})[_0x5600df(0x1ff)]({'liquidity':_0x54d172})[_0x5600df(0x1cf)](),config[_0x5600df(0x319)]=_0x54d172),logHistory(_0x5600df(0x23c),_0x5600df(0x232)+Math[_0x5600df(0x282)](_0x4e3e3e[0x0][_0x5600df(0x2bb)])+'\x20'+_0x4e3e3e[0x0][_0x5600df(0x203)]+'\x20'+(_0x4e3e3e[0x0][_0x5600df(0x2bb)]>0x0?_0x5600df(0x27e):'removed')+_0x5600df(0x21f)),proxyEmit(_0x5600df(0x2fb),emittedConfiguration());}else logger[_0x5600df(0x27d)](_0x5600df(0x24a)+Math[_0x5600df(0x282)](_0x4e3e3e[0x0][_0x5600df(0x2bb)])+'\x20'+_0x4e3e3e[0x0]['coin']+'\x20'+(_0x4e3e3e[0x0][_0x5600df(0x2bb)]>0x0?_0x5600df(0x27e):'removed'));transactionDetected=!![],currentCoins=_0x34f7cc,currentCoinsAll=_0x3b5f70;}await sleep(watchTransactionsInterval);}catch(_0x293998){if(!exchangeStopped)await handleError(_0x293998,_0x5600df(0x28f));}else await sleep(0x3e8);}}async function loadSymbols(_0x2dae4c=config[_0x4721ce(0x20a)],_0x5ee376=![]){const _0x3f2431=_0x4721ce;if(allSymbols&&!_0x5ee376)return;try{markets=await exchange[_0x3f2431(0x296)](),allSymbols=exchange[_0x3f2431(0x25d)][_0x3f2431(0x2fe)](_0x3bf969=>{const _0x95f119=_0x3f2431;let _0x1d47a0=![];const _0x18e002=exceptions[_0x2dae4c[_0x95f119(0x211)]()]||[];return _0x18e002[_0x95f119(0x251)](_0x1b0523=>{const _0x51f992=_0x95f119;if(_0x3bf969[_0x51f992(0x1b3)](_0x1b0523))_0x1d47a0=!![];}),!_0x1d47a0;});}catch(_0x2ffd8d){throw _0x2ffd8d;}}async function initclient(){const _0x3d59a5=_0x4721ce;emitLoadingProgress(),proxyEmit(_0x3d59a5(0x2fb),emittedConfiguration()),proxyEmit(_0x3d59a5(0x259),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3d59a5(0x218),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x41f0b3=getNormalizedPerformance();emitPerformance(_0x41f0b3),getStartingBalances(_0x41f0b3);}async function toggleBotMode(){const _0x1673c2=_0x4721ce;let _0x999c67=dbConfig[_0x1673c2(0x1d6)](_0x1673c2(0x2ee))[_0x1673c2(0x1b1)]({'botID':botID})[_0x1673c2(0x225)]();if(_0x999c67){const _0x1beefa=!_0x999c67[_0x1673c2(0x27f)];dbConfig[_0x1673c2(0x1d6)](_0x1673c2(0x2ee))[_0x1673c2(0x1b1)]({'botID':botID})['assign']({'headless':_0x1beefa})[_0x1673c2(0x1cf)](),config['headless']=_0x1beefa,proxyEmit(_0x1673c2(0x2fb),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1a8f5b=_0x4721ce;process[_0x1a8f5b(0x323)]({'updatebotmanager':!![]},_0x2d3e46=>{});}async function loadCoins(_0x106069){const _0x47921c=_0x4721ce;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3ff951,_0x51dc09=0x0,_0x16c6d1=0x0;_0x106069[_0x47921c(0x251)](_0x362c20=>{const _0x1c5c7c=_0x47921c;loading[_0x1c5c7c(0x24c)][_0x1c5c7c(0x213)](_0x362c20);}),loadingCanceled=![];let _0x15ec6c=![];while(_0x3ff951!=_0x106069[_0x47921c(0x1f1)]){_0x3ff951=0x0,_0x106069['forEach'](_0x50e5c9=>{const _0x17f227=_0x47921c;if(global[_0x17f227(0x24e)][noslash(_0x50e5c9)]){loading['remainingSymbols']=loading[_0x17f227(0x24c)][_0x17f227(0x2fe)](_0x542655=>_0x542655!=_0x50e5c9);if(!watchedSymbols[_0x17f227(0x1b3)](_0x50e5c9))watchedSymbols[_0x17f227(0x213)](_0x50e5c9);_0x3ff951++;}}),loading[_0x47921c(0x288)]=Math[_0x47921c(0x2d4)](_0x3ff951/_0x106069[_0x47921c(0x1f1)]*0x64);loading['progress']!=0x64&&(_0x16c6d1>0x1e*0x5&&(loading[_0x47921c(0x26d)]=!![],emitLoadingProgress()),_0x16c6d1>0x78*0x5&&!_0x15ec6c&&(loading[_0x47921c(0x23b)]=!![],emitLoadingProgress(),_0x15ec6c=!![],logHistory(_0x47921c(0x291),_0x47921c(0x31f)+loading['remainingSymbols'][_0x47921c(0x2a3)](',\x20')+_0x47921c(0x2e9)),logHistory('error',_0x47921c(0x2d8)+loadCoinsRetryInterval/0xea60+_0x47921c(0x2b7)),pidCoinReloading=setTimeout(()=>{const _0x33ba0d=_0x47921c;process[_0x33ba0d(0x323)]({'stop':_0x33ba0d(0x271)},_0x874f3e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x47921c(0x23b)]=!![],emitLoadingProgress();break;}else _0x3ff951!=_0x51dc09&&(_0x51dc09=_0x3ff951,emitLoadingProgress()),_0x16c6d1++,await sleep(0xc8);}_0x3ff951==_0x106069[_0x47921c(0x1f1)]&&(coinsLoaded=!![],process[_0x47921c(0x323)]({'status':'enabled','live':_0x47921c(0x202)},_0x3468a1=>{}),_0x15ec6c&&logHistory(_0x47921c(0x23c),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2d6f3f=_0x4721ce;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x2d6f3f(0x1d7)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x22d0bb=_0x4721ce;let _0x17c2b6=global['ticker'][stablecoins[_0x22d0bb(0x29a)]['coin']],_0x59b670=global['ticker'][stablecoins[_0x22d0bb(0x244)][_0x22d0bb(0x203)]];return{'eur':Number(_0x17c2b6),'usd':Number(_0x59b670)};}function capitalize(_0x5add16){const _0x30df42=_0x4721ce;return _0x5add16[_0x30df42(0x312)](0x0,0x1)[_0x30df42(0x240)]()+_0x5add16[_0x30df42(0x312)](0x1);}function supportedExchanges(){const _0x24c9b5=_0x4721ce,_0x5d7ad0=['ws',_0x24c9b5(0x264),_0x24c9b5(0x1ef),_0x24c9b5(0x2e0),_0x24c9b5(0x237),'cancelOrder',_0x24c9b5(0x2f8),_0x24c9b5(0x1c8),_0x24c9b5(0x1fb),_0x24c9b5(0x2b3)];let _0xfae360=[],_0x19bb36=[],_0x3aa303=ccxt['exchanges'];_0x3aa303['forEach'](_0x206084=>{const _0xa1bc76=_0x24c9b5;try{const _0x45b5b9=new ccxt[_0x206084]();if(_0x45b5b9['has']['ws'])_0x19bb36[_0xa1bc76(0x213)](_0x45b5b9);}catch(_0x2e5edc){}}),_0x19bb36[_0x24c9b5(0x251)](_0xcd1a7c=>{const _0x25b302=_0x24c9b5;let _0x1723c9=0x0;_0x5d7ad0[_0x25b302(0x251)](_0xd66d1f=>{const _0x54804a=_0x25b302;_0xd66d1f in _0xcd1a7c[_0x54804a(0x22b)]&&_0xcd1a7c[_0x54804a(0x22b)][_0xd66d1f]&&_0x1723c9++;}),_0x1723c9==_0x5d7ad0[_0x25b302(0x1f1)]&&_0xfae360[_0x25b302(0x213)](capitalize(_0xcd1a7c['id']));});let _0x251024=[];return _0x3aa303['forEach'](_0x368063=>{const _0xcdeeb9=_0x24c9b5;_0x368063=capitalize(_0x368063);if(!_0xfae360[_0xcdeeb9(0x1b3)](_0x368063))_0x251024[_0xcdeeb9(0x213)](_0x368063);}),_0xfae360;}function setStartDatePerformance(){const _0x2c2fbd=_0x4721ce;if(config&&config[_0x2c2fbd(0x319)][0x0][_0x2c2fbd(0x2cd)][_0x2c2fbd(0x1f1)]!=0x0){const _0x315457=config[_0x2c2fbd(0x319)][0x0][_0x2c2fbd(0x2cd)];dbPerformance[_0x2c2fbd(0x1d6)]('data')[_0x2c2fbd(0x1b1)]({'date':config[_0x2c2fbd(0x1b4)]})[_0x2c2fbd(0x1ff)]({'coins':_0x315457})['write']();}}async function recreateCoinResults(){const _0x4cf73c=_0x4721ce;let _0x4ee950,_0x13e51c=[];try{const _0x2fca5f=fns[_0x4cf73c(0x1ca)](fns[_0x4cf73c(0x224)](config[_0x4cf73c(0x1b4)][_0x4cf73c(0x1ea)](/\//g,'-')),_0x4cf73c(0x2bc));for(const _0x50a8a3 of currentCoins){if(_0x50a8a3[_0x4cf73c(0x203)]!=config[_0x4cf73c(0x1c3)]){let _0x2d5802=0x0,_0x1ded1b,_0xb8094d;_0x4ee950=await getAllEventOrders(_0x50a8a3[_0x4cf73c(0x29f)]);if(_0x4ee950[_0x4cf73c(0x1f1)]>0x0)_0x4ee950[_0x4cf73c(0x251)](_0xddbd96=>{const _0x4c9d37=_0x4cf73c,_0xe3f95c=_0x50a8a3[_0x4c9d37(0x29f)]['includes'](config[_0x4c9d37(0x1c3)]+'/');_0x13e51c['push']({'datetime':_0xddbd96['datetime'],'coin':_0x50a8a3[_0x4c9d37(0x203)],'symbol':_0x50a8a3['symbol'],'side':_0xddbd96[_0x4c9d37(0x297)],'reverse':_0xe3f95c,'amount':formatResult(_0xddbd96[_0x4c9d37(0x2c4)],0x8),'filled':formatResult(_0xddbd96[_0x4c9d37(0x2c4)],0x8),'price':formatResult(_0xddbd96[_0x4c9d37(0x200)],0x8)}),_0x2d5802=_0xddbd96['side']==_0x4c9d37(0x208)?_0x2d5802+_0xddbd96[_0x4c9d37(0x2c4)]:_0x2d5802-_0xddbd96[_0x4c9d37(0x2c4)];if(!_0xb8094d)_0xb8094d=_0xddbd96[_0x4c9d37(0x200)];});_0x1ded1b=_0x50a8a3['number']-_0x2d5802;let _0x41d701;config[_0x4cf73c(0x319)][_0x4cf73c(0x251)](_0x55811=>{const _0x357a11=_0x4cf73c;!_0x41d701&&(_0x41d701=_0x55811[_0x357a11(0x2cd)][_0x357a11(0x1b1)](_0x6b40dc=>_0x6b40dc[_0x357a11(0x203)]==_0x50a8a3[_0x357a11(0x203)]),_0x41d701&&(_0x1ded1b=_0x41d701['number'],_0xb8094d=_0x41d701[_0x357a11(0x200)]));});let _0x279cf0=dbCoinResults[_0x4cf73c(0x1d6)](_0x4cf73c(0x2e7))[_0x4cf73c(0x1b1)]({'coin':_0x50a8a3[_0x4cf73c(0x203)]})[_0x4cf73c(0x225)]();_0x279cf0={'coin':_0x50a8a3['coin'],'number':_0x1ded1b,'breakeven':_0xb8094d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4cf73c(0x1d6)]('coins')['find']({'coin':_0x50a8a3[_0x4cf73c(0x203)]})[_0x4cf73c(0x1ff)](_0x279cf0)[_0x4cf73c(0x1cf)]();}}_0x13e51c[_0x4cf73c(0x20c)]((_0xb4d053,_0x13b2aa)=>_0xb4d053[_0x4cf73c(0x1fd)]>_0x13b2aa[_0x4cf73c(0x1fd)]?0x1:_0x13b2aa[_0x4cf73c(0x1fd)]>_0xb4d053[_0x4cf73c(0x1fd)]?-0x1:0x0);let _0x27c164=0x0;for(let _0x272149 of _0x13e51c){await updateCoinResults(_0x272149,!![]);}}catch(_0x49e713){await handleError(_0x49e713,_0x4cf73c(0x317));}}async function getAllEventOrders(_0x253e1f){const _0x3d117b=_0x4721ce;let _0x206a10=[],_0x929a6d=dbLogs[_0x3d117b(0x1d6)](_0x3d117b(0x228))['filter'](_0x3de2f4=>{const _0x5eaf8b=_0x3d117b,_0x452ed6=_0x3de2f4['event'][_0x5eaf8b(0x211)]();return _0x452ed6['includes'](_0x253e1f['toLowerCase']())&&(_0x452ed6[_0x5eaf8b(0x1b3)](_0x5eaf8b(0x1da))&&_0x452ed6[_0x5eaf8b(0x1b3)](_0x5eaf8b(0x24f))||_0x452ed6['includes'](_0x5eaf8b(0x2c4))&&_0x452ed6['includes']('order'));})['sortBy']('time')['value']();return _0x929a6d[_0x3d117b(0x251)](_0xaea18f=>{const _0x380d00=_0x3d117b,_0x28acd2=_0xaea18f[_0x380d00(0x26e)][_0x380d00(0x1b3)]('sell')?'sell':_0x380d00(0x208),_0x4603d2=/#([0-9]|\.)+\s/i,_0x2d8a17=Number(_0x4603d2[_0x380d00(0x2e1)](_0xaea18f['event'])[0x0][_0x380d00(0x322)](0x1)),_0x30523f=/@([0-9]|\.)+$/i,_0x15b1ba=Number(_0x30523f['exec'](_0xaea18f[_0x380d00(0x26e)])[0x0][_0x380d00(0x322)](0x1));_0x206a10[_0x380d00(0x213)]({'datetime':_0xaea18f[_0x380d00(0x2c5)],'coin':symbolToCoin(_0x253e1f),'symbol':_0x253e1f,'side':_0x28acd2,'amount':_0x2d8a17,'filled':_0x2d8a17,'price':_0x15b1ba});}),_0x206a10;}async function getAllOrders(_0x2993f3,_0x59acf2){const _0x3fd3bd=_0x4721ce;let _0x49e1bc=[];while(_0x59acf2<exchange[_0x3fd3bd(0x1d9)]()){const _0x268b69=0x1f4,_0x1c9c2e=await exchange[_0x3fd3bd(0x1fb)](_0x2993f3,_0x59acf2,_0x268b69);if(_0x1c9c2e['length'])_0x59acf2=_0x1c9c2e[_0x1c9c2e[_0x3fd3bd(0x1f1)]-0x1][_0x3fd3bd(0x292)]+0x1,_0x49e1bc=_0x49e1bc[_0x3fd3bd(0x2d6)](_0x1c9c2e);else break;}return _0x49e1bc;}async function validate24hChanges(){const _0x1ae1ae=_0x4721ce;for(const _0x320e3f of currentCoins){if(_0x320e3f[_0x1ae1ae(0x203)]!=config['basecoin']){let _0x5567d2;_0x320e3f[_0x1ae1ae(0x221)]?_0x5567d2=formatResult((0x1/(global[_0x1ae1ae(0x2be)][noslash(_0x320e3f[_0x1ae1ae(0x29f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5567d2=global[_0x1ae1ae(0x2be)][noslash(_0x320e3f['symbol'])],_0x5567d2<config['change24h']&&(logHistory(_0x1ae1ae(0x291),_0x320e3f[_0x1ae1ae(0x203)]+_0x1ae1ae(0x1f3)+_0x5567d2+'%'),logHistory(_0x1ae1ae(0x291),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x1ae1ae(0x291),_0x1ae1ae(0x1c1)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x12ffed,_0x7814aa){const _0xa31686=_0x4721ce;if(!_0x12ffed)return!![];const _0x63690d=_0x7814aa[_0xa31686(0x21d)]('.'),_0x5cf0f5=_0x12ffed[_0xa31686(0x21d)]('.');for(var _0x61f4aa=0x0;_0x61f4aa<_0x5cf0f5[_0xa31686(0x1f1)];_0x61f4aa++){const _0x426252=~~_0x5cf0f5[_0x61f4aa],_0x4c7472=~~_0x63690d[_0x61f4aa];if(_0x426252<_0x4c7472)return!![];if(_0x426252>_0x4c7472)return![];}return![];}async function oneTimeMigration(){const _0x1b1528=_0x4721ce;let _0x2282b2=dbLogs[_0x1b1528(0x1d6)](_0x1b1528(0x22d))[_0x1b1528(0x225)]();if(isOlderVersion(_0x2282b2,'2.3.5')){let _0x578bf3=[];const _0x4596e9=dbLogs[_0x1b1528(0x1d6)](_0x1b1528(0x228))[_0x1b1528(0x225)]();_0x4596e9[_0x1b1528(0x251)](_0x510a1f=>{const _0x522a6e=_0x1b1528;_0x578bf3[_0x522a6e(0x213)]({'time':_0x510a1f['time'],'type':_0x510a1f[_0x522a6e(0x327)],'event':_0x510a1f[_0x522a6e(0x26e)]});}),dbLogs[_0x1b1528(0x1d6)](_0x1b1528(0x228))[_0x1b1528(0x1ff)](_0x578bf3)[_0x1b1528(0x1cf)]();}let _0x59af7b=dbConfig[_0x1b1528(0x1d6)](_0x1b1528(0x22d))[_0x1b1528(0x225)]();if(isOlderVersion(_0x59af7b,_0x1b1528(0x2c8))){let _0x36cef8=dbConfig[_0x1b1528(0x1d6)]('bot')['find']({'botID':botID})['value']();if(_0x36cef8){let _0x255f80=[];_0x36cef8[_0x1b1528(0x1be)][_0x1b1528(0x251)](_0x1f2b7d=>{const _0x33839d=_0x1b1528;_0x255f80[_0x33839d(0x213)]({'coin':_0x1f2b7d[_0x33839d(0x203)],'number':_0x1f2b7d[_0x33839d(0x2ae)],'price':_0x1f2b7d['startprice']}),delete _0x1f2b7d[_0x33839d(0x2ae)],delete _0x1f2b7d[_0x33839d(0x2db)];});if(_0x255f80['length']!==0x0)fs['writeFile'](configbackuppath+(_0x1b1528(0x246)+botID+_0x1b1528(0x26b)),JSON[_0x1b1528(0x31e)](_0x255f80,null,0x4),function(_0xa4e93c){if(_0xa4e93c){}});const _0x2b88b9=(_0x31ce1a,_0x15d004)=>{const _0x46325f=_0x1b1528;let _0x2f6fad=[];_0x15d004[_0x46325f(0x251)](_0x8e66a6=>{const _0x4b8cc7=_0x46325f,_0x2016ba=_0x31ce1a[_0x4b8cc7(0x1b1)](_0x2e7b01=>_0x2e7b01[_0x4b8cc7(0x203)]==_0x8e66a6[_0x4b8cc7(0x203)]);if(!_0x2016ba)_0x2f6fad[_0x4b8cc7(0x213)](_0x8e66a6);});let _0x54a9a2=[];return _0x31ce1a[_0x46325f(0x251)](_0x4d5760=>{const _0x12a976=_0x46325f,_0x427b35=_0x15d004[_0x12a976(0x1b1)](_0x1fcaec=>_0x1fcaec['coin']==_0x4d5760[_0x12a976(0x203)]);if(!_0x427b35||_0x427b35[_0x12a976(0x2bb)]==0x0&&_0x4d5760[_0x12a976(0x2bb)]!=0x0)_0x54a9a2[_0x12a976(0x213)](_0x4d5760);}),{'missingDay1':_0x2f6fad,'notInDay2':_0x54a9a2};},_0x4c44e2=dbPerformance[_0x1b1528(0x1d6)](_0x1b1528(0x1ee))[_0x1b1528(0x220)]()['value']();if(_0x4c44e2['length']>0x1){const {missingDay1:_0x2c0f65,notInDay2:_0x146389}=_0x2b88b9(_0x255f80,_0x4c44e2[0x1][_0x1b1528(0x2e7)]);_0x255f80=[..._0x255f80,..._0x2c0f65],_0x146389[_0x1b1528(0x251)](_0x1d9ad1=>{const _0x1f3572=_0x1b1528;let _0x3df802=_0x255f80[_0x1f3572(0x252)](_0x1244fa=>_0x1244fa['coin']==_0x1d9ad1[_0x1f3572(0x203)]);_0x3df802!=-0x1&&_0x255f80['splice'](_0x3df802,0x1);});}_0x255f80['sort']((_0x43b6d9,_0x39adc2)=>_0x43b6d9[_0x1b1528(0x203)]>_0x39adc2['coin']?0x1:_0x39adc2[_0x1b1528(0x203)]>_0x43b6d9[_0x1b1528(0x203)]?-0x1:0x0);let _0x3bf0a8=[{'date':_0x36cef8[_0x1b1528(0x1b4)],'changes':_0x255f80}];_0x4c44e2[_0x1b1528(0x1f1)]>0x2&&_0x4c44e2[_0x1b1528(0x251)]((_0x4b3c7c,_0x21463c)=>{const _0x5edd04=_0x1b1528;if(_0x21463c>0x0&&_0x21463c<_0x4c44e2[_0x5edd04(0x1f1)]-0x1){const {missingDay1:_0x339f7b,notInDay2:_0x2953c9}=_0x2b88b9(_0x4c44e2[_0x21463c]['coins'],_0x4c44e2[_0x21463c+0x1]['coins']);_0x255f80=[],(_0x339f7b['length']!=0x0||_0x2953c9[_0x5edd04(0x1f1)]!=0x0)&&(_0x339f7b[_0x5edd04(0x1f1)]!=0x0&&_0x255f80[_0x5edd04(0x213)](..._0x339f7b),_0x2953c9[_0x5edd04(0x1f1)]!=0x0&&(_0x2953c9[_0x5edd04(0x251)](_0x2a261d=>{const _0x3a4c76=_0x5edd04;_0x2a261d['number']=-_0x2a261d[_0x3a4c76(0x2bb)];}),_0x255f80['push'](..._0x2953c9)),_0x255f80['sort']((_0x171499,_0x44a05c)=>_0x171499[_0x5edd04(0x203)]>_0x44a05c[_0x5edd04(0x203)]?0x1:_0x44a05c['coin']>_0x171499[_0x5edd04(0x203)]?-0x1:0x0),_0x3bf0a8[_0x5edd04(0x213)]({'date':_0x4c44e2[_0x21463c+0x1][_0x5edd04(0x1fa)],'changes':_0x255f80}));}}),dbConfig[_0x1b1528(0x1d6)](_0x1b1528(0x2ee))[_0x1b1528(0x1b1)]({'botID':botID})[_0x1b1528(0x1ff)]({..._0x36cef8,'liquidity':_0x3bf0a8})[_0x1b1528(0x1cf)]();}}if(isOlderVersion(_0x59af7b,_0x1b1528(0x2aa))){let _0x51fe7d=dbConfig[_0x1b1528(0x1d6)]('bot')[_0x1b1528(0x1b1)]({'botID':botID})['value']();if(_0x51fe7d){const _0x26a887=_0x51fe7d[_0x1b1528(0x20a)],_0x4cab73=_0x26a887?capitalize(_0x26a887):_0x1b1528(0x206);dbConfig['get'](_0x1b1528(0x2ee))['find']({'botID':botID})[_0x1b1528(0x1ff)]({'exchange':_0x4cab73})[_0x1b1528(0x1cf)]();}}let _0x1684c0=dbPerformance[_0x1b1528(0x1d6)](_0x1b1528(0x22d))['value']();isOlderVersion(_0x1684c0,_0x1b1528(0x2c8))&&setStartDatePerformance();let _0x3b3010=dbCoinResults['get']('version')['value']();if(isOlderVersion(_0x3b3010,'2.5.0')){let _0x2cf0cb=dbCoinResults['get'](_0x1b1528(0x2e7))['value']();if(_0x2cf0cb[_0x1b1528(0x1f1)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2cbd3a=_0x4721ce;dbConfig['set'](_0x2cbd3a(0x22d),serverversion)[_0x2cbd3a(0x1cf)](),dbPerformance['set'](_0x2cbd3a(0x22d),serverversion)[_0x2cbd3a(0x1cf)](),dbLogs['set'](_0x2cbd3a(0x22d),serverversion)[_0x2cbd3a(0x1cf)](),dbCoinResults[_0x2cbd3a(0x316)]('version',serverversion)[_0x2cbd3a(0x1cf)]();}function getConfiguration(_0x449103){const _0x2605ae=_0x4721ce;let _0x55a6f8=dbConfig[_0x2605ae(0x1d6)]('bot')[_0x2605ae(0x1b1)]({'botID':_0x449103})[_0x2605ae(0x225)]();if(_0x55a6f8){let _0x32d553=![];typeof _0x55a6f8[_0x2605ae(0x2b5)]==_0x2605ae(0x2d1)&&(_0x55a6f8={..._0x55a6f8,'threshold':Number(_0x55a6f8[_0x2605ae(0x2b5)])},_0x32d553=!![]),_0x55a6f8['change24h']==null&&(_0x55a6f8={..._0x55a6f8,'change24h':-0x14},_0x32d553=!![]),!_0x55a6f8[_0x2605ae(0x2b6)]&&(_0x55a6f8={..._0x55a6f8,'fiat':_0x2605ae(0x1f2)},_0x32d553=!![]),!_0x55a6f8[_0x2605ae(0x30c)]&&(_0x55a6f8={..._0x55a6f8,'onepagemode':settings[_0x2605ae(0x30c)]},_0x32d553=!![]),_0x32d553&&(_0x55a6f8={'botID':_0x55a6f8[_0x2605ae(0x263)],'exchange':_0x55a6f8[_0x2605ae(0x20a)],'apiKey':_0x55a6f8['apiKey'],'apiSecret':_0x55a6f8[_0x2605ae(0x1e6)],'apiPassword':_0x55a6f8[_0x2605ae(0x1ed)],'basecoin':_0x55a6f8[_0x2605ae(0x1c3)],'botname':_0x55a6f8['botname'],'showname':_0x55a6f8['showname'],'threshold':_0x55a6f8[_0x2605ae(0x2b5)],'ordertype':_0x55a6f8['ordertype'],'timeout':_0x55a6f8['timeout'],'fiat':_0x55a6f8['fiat'],'startdate':_0x55a6f8[_0x2605ae(0x1b4)],'recreate':_0x55a6f8[_0x2605ae(0x261)],'timeshift':_0x55a6f8['timeshift'],'onepagemode':_0x55a6f8[_0x2605ae(0x30c)],'headless':_0x55a6f8[_0x2605ae(0x27f)],'cooldown':_0x55a6f8[_0x2605ae(0x26a)],'change24h':_0x55a6f8[_0x2605ae(0x1d2)],'emojibuy':_0x55a6f8[_0x2605ae(0x1cd)],'emojisell':_0x55a6f8[_0x2605ae(0x24d)],'portfolio':_0x55a6f8[_0x2605ae(0x1be)],'liquidity':_0x55a6f8[_0x2605ae(0x319)],'openOrders':_0x55a6f8[_0x2605ae(0x2f1)]},dbConfig[_0x2605ae(0x1d6)](_0x2605ae(0x2ee))[_0x2605ae(0x235)]()[_0x2605ae(0x1cf)](),dbConfig[_0x2605ae(0x1d6)](_0x2605ae(0x2ee))[_0x2605ae(0x213)](_0x55a6f8)['write']());}else _0x55a6f8={'botID':_0x449103,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x449103,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x55a6f8;}function emittedConfiguration(){const _0x2af8be=_0x4721ce;let _0xa3f2f9;if(config['apiKey']=='')_0xa3f2f9={...config,'configstate':'initial'};else config['apiKey']==_0x2af8be(0x1bb)?_0xa3f2f9={...config,'configstate':_0x2af8be(0x2ff)}:(_0xa3f2f9={...config,'apiKey':_0x2af8be(0x245),'apiSecret':_0x2af8be(0x245)},config[_0x2af8be(0x1ed)]&&(_0xa3f2f9[_0x2af8be(0x1ed)]=_0x2af8be(0x245)));return _0xa3f2f9;}function getSettings(){const _0x12fd66=_0x4721ce;return dbSettings[_0x12fd66(0x1d6)]('settings')['value']();}function getSecure(){const _0x2cd219=_0x4721ce;return dbSecure[_0x2cd219(0x1d6)]('secure')[_0x2cd219(0x225)]()||{};}function updateTimeshift(_0x3f78fa){const _0x2f3a70=_0x4721ce;let _0x145629=dbConfig[_0x2f3a70(0x1d6)](_0x2f3a70(0x2ee))[_0x2f3a70(0x1b1)]({'botID':botID})[_0x2f3a70(0x225)]();_0x145629&&dbConfig[_0x2f3a70(0x1d6)](_0x2f3a70(0x2ee))['find']({'botID':botID})['assign']({'timeshift':_0x3f78fa})[_0x2f3a70(0x1cf)](),config[_0x2f3a70(0x2ac)]=_0x3f78fa,proxyEmit('configuration',emittedConfiguration());}function _0x4088(){const _0x24d587=['warning','AuthenticationError','startprice','existsSync','Crypt','configuration-stored','unlinkSync','watchTrades','exec','leftTxt','placeOrder()',':\x20Bot\x20','%\x20(','yargs/yargs','coins','net-fiat','\x20-\x20bot\x20not\x20started','\x20minutes','\x20API\x20key\x20is\x20invalid','BNB/','Order(s)\x20not\x20validated\x20after\x20','bot','Order\x20filled:\x20','\x20:\x20','openOrders','2\x20-\x20Handled\x20open\x20orders','toggleBotMode','splice','USDT','-events.json','Limit\x20(low-margin)','createOrder','yyyy/MM/dd','getOpenOrders()','configuration','min','balancing\x20resumes\x20when\x20cooldown\x20ends','filter','recovery','<b>','Saving\x20configuration','args','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','average','exchange\x20reloaded','storeConfiguration','Transaction\x20detection\x20blocked','/output-000.log','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','DDoSProtection','message','onepagemode','lowdb','lowdb/adapters/FileSync','pro','apply','\x20not\x20available','substring','limit-high','sendMetricsTelegram','no\x20open\x20orders','set','recreateCoinResults()','final','liquidity','370524eURgQT','\x20API\x20secret\x20is\x20invalid','breakeven','timer:','stringify','Failed\x20to\x20load\x20coin\x20data\x20for\x20','constructor','NANO/','slice','send','2\x20-\x20FILLED\x20unknown\x20order:\x20','simple','BNB','type','\x20>\x20[DEBUG]\x20','additional\x20symbols\x20','find','2582888VzBLYl','includes','startdate','\x20orders\x20in\x20less\x20than\x20','ETH','BUSD','getHours','RequestTimeout','entries','***','\x20>\x20','ORDERS.LOCKED','portfolio','ccxt','buys','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','password','basecoin','bots','sells','ORDERS.UNLOCKED','defaults','fetchOpenOrders','UNLOCKED','format','\x20metrics:</b>\x20\x0a\x0a','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','emojibuy','36314703rMflso','write','3\x20-\x20handling\x20FILLED\x20order:\x20','sell','change24h','freeze','showname','getTime','get','loading-canceled','emitHistory','milliseconds','market','net-basecoin','Fees\x20|\x20currency:\x20','map','search','trade','\x20value','-------------------------------\x0a','log','getFullYear','parse','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','apiSecret','\x20|\x20lock\x20orders:\x20','open','resetHistory','replace','\x20hour','InvalidNonce','apiPassword','data','fetchTicker','HOT/BTC','length','USD','\x20has\x20a\x2024h\x20drop\x20of\x20','canceled','123TFXzqu','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getPortfolio(1)','differenceInSeconds','\x20closed\x20the\x20connection','date','fetchClosedOrders','\x20order:\x20','datetime','getMinutes','assign','price','orderstatus','running','coin','Manual\x20balancing\x20required','bb-settings.json','Binance','OrderNotFound','buy','privateKey','exchange','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','sort','getDate','storeHeadless','distribution','valid','toLowerCase','6UwYAys','push','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','BTC','-results.json','limit','balances','getPortfolio(0)','event-history','Executed\x20','amount','split','balancing\x20resumed','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','cloneDeep','reverse','path','Executing\x20exchange\x20reload','parseISO','value','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','kill','logs','API-key\x20format\x20invalid','storeFiat','has','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','version','util','keys','sha256','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Portfolio\x20change\x20detected:\x20','enabled','0\x20-\x20EXECUTION:\x20','remove','shift','watchOrders','001','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','1404455agjYqw','cancel','success','function','customId','getStartingBalances','toUpperCase','padEnd','\x20portfolio:</b>\x20\x0a\x0a','deleteHistoryAlerts','usd','************','starting-balance-','getPortfolio(2)','1\x20-\x20Unlock\x20orders','recent20','Fee\x20discount\x20refund\x20detected:\x20','currency','remainingSymbols','emojisell','ticker','order','fee','forEach','findIndex','<pre>','showConfig','Unfilled\x20order(s)\x20canceled\x20after\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','21778cfmgRr','./config/','exchanges','Order\x20amount\x20is\x20invalid:\x20','/USD','highest','symbols','fromCodePoint','1\x20-\x20Validate\x20orders:\x20','apiKey','recreate','Net\x20','botID','fetchTickers','offset','page','Invalid\x20quantity','ordertype','bot-','cooldown','.json','ExchangeNotAvailable','timeout','event','/EUR','Net\x20effect','restart','cancelOrders()','sendPortfolioTelegram','toString','date-fns','getCoinNumber()','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','full','padStart','ask','target','Resetting\x20bot\x20history','debug','added','headless','limits','Market','abs','(((.+)+)+)+$','./logs/','percentage','mkdirSync','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','progress','uncaughtException','8908352IsWSzi','none','getSeconds','rightTxt','excluded','watchTransactions','cancelOrder','error','timestamp','ongoing','YOYOW/','initclient','loadMarkets','side','total','</pre>','eur','Transaction\x20detection\x20unblocked','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','loadSymbols()','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','symbol','getCoins()','test','initial','join','getMonth','\x20minutes\x20-\x20','add','netoffset','getPortfolio','isEqual','2.6.0','cost','timeshift','sortBy','startnumber','decrypt','botname','orderId','max','fetchBalance','realized','threshold','fiat','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Limit\x20(high-margin)','exchange\x20not\x20reloaded','indexOf','number','yyyy-MM-dd\x27T\x27HH:mm:ss','No\x20more\x20open\x20orders\x20-\x20','change','\x20|\x20','status','InsufficientFunds','909565MUfLZm','EUR','filled','time','/backup/','clientOrderId','2.3.5','toFixed','argv','<b>Bot\x20','amountToPrecision','changes','closed','-performance.json','LOCKED','string','last','createWriteStream','round','no\x20additional\x20symbols','concat','delta','Pausing\x20for\x20'];_0x4088=function(){return _0x24d587;};return _0x4088();}function updateOnepagemode(_0x5708e9){const _0x42fb4b=_0x4721ce;let _0x8b21f1=dbConfig[_0x42fb4b(0x1d6)](_0x42fb4b(0x2ee))[_0x42fb4b(0x1b1)]({'botID':botID})[_0x42fb4b(0x225)]();_0x8b21f1&&dbConfig[_0x42fb4b(0x1d6)](_0x42fb4b(0x2ee))['find']({'botID':botID})[_0x42fb4b(0x1ff)]({'onepagemode':_0x5708e9})[_0x42fb4b(0x1cf)](),config[_0x42fb4b(0x30c)]=_0x5708e9,proxyEmit(_0x42fb4b(0x2fb),emittedConfiguration());}async function storeConfiguration(_0x348bee){const _0x7a97ec=_0x4721ce;logger[_0x7a97ec(0x27d)](_0x7a97ec(0x301)),blockTransactionDetection=!![],logger[_0x7a97ec(0x27d)](_0x7a97ec(0x307));let _0x2eee50=[],_0x1b9f11=![],_0x1fe48d=[];_0x348bee[_0x7a97ec(0x1be)][_0x7a97ec(0x251)](_0x3de71a=>{const _0x346276=_0x7a97ec;if(!_0x3de71a[_0x346276(0x28e)]&&_0x3de71a['coin']!=_0x348bee[_0x346276(0x1c3)])_0x1fe48d['push'](_0x3de71a[_0x346276(0x29f)]);}),_0x1fe48d[_0x7a97ec(0x251)](_0x2bea33=>{const _0x2be23c=_0x7a97ec,_0x3a82f1=watchedSymbols[_0x2be23c(0x1b3)](_0x2bea33);!_0x3a82f1&&_0x2eee50[_0x2be23c(0x213)](_0x2bea33);});_0x2eee50[_0x7a97ec(0x1f1)]>0x0?_0x1b9f11=!![]:currentCoins['forEach'](_0x5be6aa=>{const _0x834980=_0x7a97ec;if(_0x5be6aa[_0x834980(0x203)]!=config[_0x834980(0x1c3)]){const _0x43d47d=_0x1fe48d[_0x834980(0x1b1)](_0x4e5ea2=>_0x4e5ea2==_0x5be6aa[_0x834980(0x29f)]);!_0x43d47d&&(_0x1b9f11=!![]);}});let _0x39919d=dbConfig[_0x7a97ec(0x1d6)](_0x7a97ec(0x2ee))[_0x7a97ec(0x1b1)]({'botID':botID})[_0x7a97ec(0x225)]();_0x348bee={..._0x348bee,'apiKey':crypt['decrypt'](secure[_0x7a97ec(0x209)],_0x348bee[_0x7a97ec(0x260)])[_0x7a97ec(0x30b)],'apiSecret':crypt['decrypt'](secure[_0x7a97ec(0x209)],_0x348bee['apiSecret'])[_0x7a97ec(0x30b)]};_0x348bee[_0x7a97ec(0x1ed)]&&(_0x348bee[_0x7a97ec(0x1ed)]=crypt[_0x7a97ec(0x2af)](secure[_0x7a97ec(0x209)],_0x348bee[_0x7a97ec(0x1ed)])[_0x7a97ec(0x30b)]);let _0x1c802a=![];_0x39919d?(_0x348bee[_0x7a97ec(0x260)]==_0x7a97ec(0x245)?_0x348bee[_0x7a97ec(0x260)]=config['apiKey']:_0x1c802a=!![],_0x348bee[_0x7a97ec(0x1e6)]=='************'?_0x348bee[_0x7a97ec(0x1e6)]=config[_0x7a97ec(0x1e6)]:_0x1c802a=!![],_0x348bee['apiPassword']=='************'?_0x348bee[_0x7a97ec(0x1ed)]=config[_0x7a97ec(0x1ed)]:_0x1c802a=!![],dbConfig[_0x7a97ec(0x1d6)](_0x7a97ec(0x2ee))[_0x7a97ec(0x1b1)]({'botID':botID})[_0x7a97ec(0x1ff)](_0x348bee)[_0x7a97ec(0x1cf)]()):(dbConfig['get'](_0x7a97ec(0x2ee))[_0x7a97ec(0x213)](_0x348bee)[_0x7a97ec(0x1cf)](),_0x1c802a=!![],process[_0x7a97ec(0x323)]({'status':_0x7a97ec(0x233),'live':'running'},_0x2e1096=>{}));config={..._0x348bee},setStartDatePerformance(),process[_0x7a97ec(0x323)]({'botname':_0x348bee[_0x7a97ec(0x2b0)]},_0x7afad4=>{}),updateBotManager(),initialPerformanceStored=![],proxyEmit(_0x7a97ec(0x2de)),await initCoinResults();if(_0x1c802a)await reset(_0x2eee50,!![]);else{if(_0x1b9f11)await reset(_0x2eee50,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger[_0x7a97ec(0x27d)](_0x7a97ec(0x29b));}async function storeHeadless(_0x4b821c){const _0x3a0f2c=_0x4721ce,_0x6d7f06={...config,'headless':_0x4b821c[_0x3a0f2c(0x27f)]};let _0x7399ca=dbConfig[_0x3a0f2c(0x1d6)](_0x3a0f2c(0x2ee))[_0x3a0f2c(0x1b1)]({'botID':botID})[_0x3a0f2c(0x225)]();_0x7399ca&&dbConfig[_0x3a0f2c(0x1d6)](_0x3a0f2c(0x2ee))[_0x3a0f2c(0x1b1)]({'botID':botID})[_0x3a0f2c(0x1ff)](_0x6d7f06)['write'](),config={..._0x6d7f06},updateBotManager(),proxyEmit(_0x3a0f2c(0x2fb),emittedConfiguration());}async function storeFiat(_0x4dd8f6){const _0x1900cb=_0x4721ce,_0x1db98a={...config,'fiat':_0x4dd8f6};let _0x2d33be=dbConfig[_0x1900cb(0x1d6)](_0x1900cb(0x2ee))[_0x1900cb(0x1b1)]({'botID':botID})['value']();_0x2d33be&&dbConfig[_0x1900cb(0x1d6)]('bot')[_0x1900cb(0x1b1)]({'botID':botID})[_0x1900cb(0x1ff)](_0x1db98a)[_0x1900cb(0x1cf)](),config={..._0x1db98a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x4e5ab1=_0x4721ce;logger['full'](_0x4e5ab1(0x27c));try{if(fs[_0x4e5ab1(0x2dc)](path[_0x4e5ab1(0x2a3)](configpath,_0x4e5ab1(0x269)+botID+_0x4e5ab1(0x2f6))))fs[_0x4e5ab1(0x2df)](path[_0x4e5ab1(0x2a3)](configpath,_0x4e5ab1(0x269)+botID+_0x4e5ab1(0x2f6)));if(fs[_0x4e5ab1(0x2dc)](path[_0x4e5ab1(0x2a3)](configpath,'bot-'+botID+'-performance.json')))fs['unlinkSync'](path[_0x4e5ab1(0x2a3)](configpath,_0x4e5ab1(0x269)+botID+_0x4e5ab1(0x2cf)));if(fs['existsSync'](path[_0x4e5ab1(0x2a3)](configpath,_0x4e5ab1(0x269)+botID+'-results.json')))fs[_0x4e5ab1(0x2df)](path[_0x4e5ab1(0x2a3)](configpath,'bot-'+botID+_0x4e5ab1(0x216)));}catch(_0x52ed85){if(_0x52ed85)logger[_0x4e5ab1(0x278)]('Error\x20while\x20deleting\x20files:\x20',_0x52ed85);}const _0x19d380=getDate();let _0x49c47b=[];currentCoins['forEach'](_0x1906fe=>{const _0x3fdb58=_0x4e5ab1;_0x49c47b[_0x3fdb58(0x213)]({'coin':_0x1906fe[_0x3fdb58(0x203)],'number':_0x1906fe['number'],'price':_0x1906fe[_0x3fdb58(0x2d2)]});});let _0x4210f2=dbConfig['get'](_0x4e5ab1(0x2ee))[_0x4e5ab1(0x1b1)]({'botID':botID})['value']();_0x4210f2&&(dbConfig[_0x4e5ab1(0x1d6)](_0x4e5ab1(0x2ee))[_0x4e5ab1(0x1b1)]({'botID':botID})[_0x4e5ab1(0x1ff)]({'liquidity':[{'date':_0x19d380,'changes':_0x49c47b}]})[_0x4e5ab1(0x1cf)](),config[_0x4e5ab1(0x319)]=[]),process[_0x4e5ab1(0x323)]({'stop':'restart'},_0x12f72f=>{});}function noslash(_0x228699){const _0x5b2cfc=_0x4721ce;return _0x228699[_0x5b2cfc(0x1ea)]('/','');}function updateHighestFee(_0x153c0d,_0x227f10){const _0x243808=_0x4721ce;lastFees[_0x243808(0x24b)]=_0x153c0d,lastFees[_0x243808(0x249)][_0x243808(0x1f1)]===0x14&&lastFees[_0x243808(0x249)][_0x243808(0x236)](),lastFees[_0x243808(0x249)][_0x243808(0x213)](_0x227f10),lastFees['highest']=Math[_0x243808(0x2b2)](...lastFees[_0x243808(0x249)]);}async function updateNumberCoinsCcxt(_0xf6d95a){const _0x2fc9b7=_0x4721ce;logger['debug'](_0x2fc9b7(0x234)+_0xf6d95a[_0x2fc9b7(0x29f)]+'\x20|\x20'+_0xf6d95a['status']+'\x20|\x20'+_0xf6d95a['id']+'\x20|\x20'+_0xf6d95a['clientOrderId']);let _0x4fc4cd=_0xf6d95a[_0x2fc9b7(0x2c0)],_0x12b8dc=![];currentCoins[_0x2fc9b7(0x251)](_0x10b0ed=>{const _0x224a13=_0x2fc9b7;_0x10b0ed[_0x224a13(0x29f)]==_0xf6d95a[_0x224a13(0x29f)]&&(_0x12b8dc=!![]);});if(!_0x12b8dc)return;const _0x53ab87=currentCoins[_0x2fc9b7(0x1b1)](_0x5d4114=>_0x5d4114[_0x2fc9b7(0x29f)]==_0xf6d95a['symbol']),_0x1b022e=_0x2cbdeb=>{const _0x13bc8b=_0x2fc9b7;if(_0x53ab87)_0x53ab87[_0x13bc8b(0x201)]=_0x2cbdeb;};if(_0x4fc4cd==_0x2fc9b7(0x1e8))_0x1b022e('open');else{if(_0x4fc4cd==_0x2fc9b7(0x1f4)){_0x1b022e(_0x2fc9b7(0x1f4));const _0x22a8fa=await getCoins();[currentCoins,currentCoinsAll]=_0x22a8fa,await getOpenOrders(),handleOpenOrders();}else{if(_0x4fc4cd==_0x2fc9b7(0x2ce)){logger[_0x2fc9b7(0x27d)]('1\x20-\x20FILLED:\x20'+_0xf6d95a[_0x2fc9b7(0x29f)]+'\x20|\x20'+_0xf6d95a[_0x2fc9b7(0x2c4)]+_0x2fc9b7(0x2bf)+_0xf6d95a['id']+_0x2fc9b7(0x2bf)+_0xf6d95a[_0x2fc9b7(0x2c7)]);let _0x221a0e=![];if(lastOrders)lastOrders[_0x2fc9b7(0x251)](async _0x5220bf=>{const _0x4061e8=_0x2fc9b7;if(_0x5220bf[_0x4061e8(0x23e)]==_0xf6d95a[_0x4061e8(0x2c7)]){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0xf6d95a[_0x4061e8(0x2c7)]),_0x221a0e=!![];if(_0x5220bf['filled']==0x0){logger[_0x4061e8(0x27d)](_0x4061e8(0x1d0)+_0xf6d95a['clientOrderId']);_0xf6d95a[_0x4061e8(0x304)]?_0x5220bf[_0x4061e8(0x200)]=_0xf6d95a[_0x4061e8(0x304)]:_0x5220bf[_0x4061e8(0x200)]=_0xf6d95a[_0x4061e8(0x200)];_0x5220bf[_0x4061e8(0x2c4)]=_0xf6d95a[_0x4061e8(0x2c4)],_0x5220bf['fee']={'currency':_0xf6d95a['fee']?_0xf6d95a[_0x4061e8(0x250)]['currency']:null,'cost':_0xf6d95a[_0x4061e8(0x250)]?_0xf6d95a[_0x4061e8(0x250)][_0x4061e8(0x2ab)]:0x0},updateHighestFee(_0x5220bf['fee'][_0x4061e8(0x24b)],_0x5220bf[_0x4061e8(0x250)][_0x4061e8(0x2ab)]),_0x1b022e('filled'),await validateOrders();if(lockOrders==ORDERS[_0x4061e8(0x2d0)]){const _0x2cb5e1=await getCoins();[currentCoins,currentCoinsAll]=_0x2cb5e1;}await updateCoinResults(_0x5220bf);}}});if(!_0x221a0e){logger[_0x2fc9b7(0x27d)](_0x2fc9b7(0x324)+_0xf6d95a['id']),_0x1b022e(_0x2fc9b7(0x2c4));const _0x252733=await getCoins();[currentCoins,currentCoinsAll]=_0x252733,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x452f35=JSON['parse'](lastBalances['portfolio']);const _0x137040=_0x452f35['find'](_0x20de20=>_0x20de20[_0x2fc9b7(0x29f)]==_0xf6d95a[_0x2fc9b7(0x29f)]);if(_0x137040){if(_0x4fc4cd==_0x2fc9b7(0x1e8))_0x137040[_0x2fc9b7(0x201)]=_0x137040[_0x2fc9b7(0x201)]==_0x2fc9b7(0x2c4)?_0x2fc9b7(0x2c4):'open';else{if(_0x4fc4cd=='canceled')_0x137040['orderstatus']=_0x137040[_0x2fc9b7(0x201)]=='filled'?_0x2fc9b7(0x2c4):'canceled';else _0x4fc4cd==_0x2fc9b7(0x2ce)&&(_0x137040[_0x2fc9b7(0x201)]=_0x2fc9b7(0x2c4));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2fc9b7(0x31e)](_0x452f35)},proxyEmit(_0x2fc9b7(0x218),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x19fda9=_0x4721ce;await getOpenOrders();let _0x444783=![];currentCoins[_0x19fda9(0x251)](_0x3fa049=>{const _0x1b7d79=_0x19fda9;_0x444783=allOpenOrders[_0x1b7d79(0x1b1)](_0x3800b2=>_0x3800b2[_0x1b7d79(0x29f)]==_0x3fa049[_0x1b7d79(0x29f)]),_0x3fa049[_0x1b7d79(0x201)]=_0x444783?_0x1b7d79(0x1e8):'none';});}async function getCoins(_0x44ec44=!![],_0x9a480b=config['basecoin']){const _0xc1d9c8=_0x4721ce;let _0x48cbd6,_0xf687b5=[],_0x492f0a=[],_0x297455=[],_0x296310=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x48cbd6=await exchange[_0xc1d9c8(0x2b3)](),mybalances=_0x48cbd6[_0xc1d9c8(0x298)];for(const [_0x4dd1cb,_0x246688]of Object['entries'](mybalances)){_0x296310[_0xc1d9c8(0x213)](_0x4dd1cb);}if(_0x9a480b=='')for(const [_0xfbb393,_0xabbe1a]of Object['entries'](mybalances)){_0xabbe1a[_0xc1d9c8(0x274)]()!=0x0&&_0x492f0a['push']({'coin':_0xfbb393});}else{let _0x25345c=![];for(const [_0x479de4,_0x363021]of Object[_0xc1d9c8(0x1ba)](mybalances)){if(_0x296310[_0xc1d9c8(0x1b3)](_0x479de4)){const _0x39935=config[_0xc1d9c8(0x1be)][_0xc1d9c8(0x1b1)](_0x17ae94=>_0x17ae94[_0xc1d9c8(0x203)]==_0x479de4),_0x5418b7=_0x479de4+'/'+_0x9a480b,_0x5506c6=_0x9a480b+'/'+_0x479de4,_0x101444=currentCoins[_0xc1d9c8(0x1b1)](_0x393299=>_0x393299[_0xc1d9c8(0x203)]==_0x479de4);_0x25345c=![];if((_0x363021[_0xc1d9c8(0x274)]()!=0x0||_0x39935)&&(allSymbols['includes'](_0x5418b7)||_0x479de4==_0x9a480b))_0x479de4!=_0x9a480b&&_0xf687b5[_0xc1d9c8(0x213)](_0x5418b7),_0x492f0a[_0xc1d9c8(0x213)]({'coin':_0x479de4,'symbol':_0x5418b7,'reverse':![],'number':Math['max'](_0x363021+(_0x39935&&_0x39935[_0xc1d9c8(0x265)]||0x0),0x0),'orderstatus':_0x101444?_0x101444['orderstatus']:'none'});else(_0x363021['toString']()!=0x0||_0x39935)&&allSymbols['includes'](_0x5506c6)&&(_0x479de4!=_0x9a480b&&_0xf687b5[_0xc1d9c8(0x213)](_0x5506c6),_0x492f0a[_0xc1d9c8(0x213)]({'coin':_0x479de4,'symbol':_0x5506c6,'reverse':!![],'number':Math[_0xc1d9c8(0x2b2)](_0x363021+(_0x39935&&_0x39935[_0xc1d9c8(0x265)]||0x0),0x0),'orderstatus':_0x101444?_0x101444[_0xc1d9c8(0x201)]:_0xc1d9c8(0x28b)}));}}}}catch(_0x58bfc8){if(!_0x44ec44)handleErrorNoStop(_0x58bfc8,_0xc1d9c8(0x2a0));else await handleError(_0x58bfc8,_0xc1d9c8(0x2a0));}return _0x297455=cloneDeep(_0x492f0a),_0x492f0a=_0x492f0a[_0xc1d9c8(0x2fe)](_0x1672cf=>{const _0x3f7c59=_0xc1d9c8,_0x521b10=config['portfolio'][_0x3f7c59(0x1b1)](_0x4f9611=>_0x4f9611[_0x3f7c59(0x203)]==_0x1672cf[_0x3f7c59(0x203)]);return _0x521b10&&!_0x521b10[_0x3f7c59(0x28e)];}),[_0x492f0a,_0x297455];}async function getCoinNumber(_0x38be95){const _0x1a987a=_0x4721ce;let _0x43c6b4;try{const _0x4f33fe=await exchange[_0x1a987a(0x2b3)]();_0x43c6b4=_0x4f33fe[_0x1a987a(0x298)][_0x38be95];}catch(_0x5a6faa){await handleError(_0x5a6faa,_0x1a987a(0x276));}return _0x43c6b4;}async function getOpenOrders(){const _0x5c4764=_0x4721ce;let _0x156a0d;allOpenOrders=[];try{for(const _0x3154d9 of config[_0x5c4764(0x1be)]){!_0x3154d9[_0x5c4764(0x28e)]&&_0x3154d9['coin']!=config[_0x5c4764(0x1c3)]&&(_0x156a0d=await exchange['fetchOpenOrders'](_0x3154d9['symbol']),_0x156a0d[_0x5c4764(0x1f1)]>0x0&&allOpenOrders[_0x5c4764(0x213)](_0x156a0d[0x0]));}}catch(_0x3a604c){await handleError(_0x3a604c,_0x5c4764(0x2fa));}}async function handleOpenOrders(_0x55eb32=0x0){const _0x388c54=_0x4721ce;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x388c54(0x2d0)]&&allOrdersPlaced&&(_0x55eb32==0x0?(logger[_0x388c54(0x27d)]('1\x20-\x20Handle\x20open\x20orders'),_0x55eb32++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x388c54(0x2f2)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x5ddc0a){const _0x8751e8=_0x4721ce,_0x1968e8=ccxt[_0x5ddc0a[_0x8751e8(0x20a)][_0x8751e8(0x211)]()],_0x542979=new _0x1968e8({'apiKey':_0x5ddc0a[_0x8751e8(0x260)],'secret':_0x5ddc0a[_0x8751e8(0x1e6)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x5ddc0a[_0x8751e8(0x1ed)])_0x542979['password']=_0x5ddc0a[_0x8751e8(0x1ed)];try{await _0x542979['loadMarkets']();}catch(_0x1baf70){throw _0x1baf70;}}function cloneDeep(_0x1ac5fa){const _0xecfc8e=_0x4721ce;return JSON[_0xecfc8e(0x1e4)](JSON[_0xecfc8e(0x31e)](_0x1ac5fa));}async function getPortfolio(_0x56a14b){const _0x49ed3f=_0x4721ce;let _0x28bdc6=[],_0x2bd774=[],_0x1b4158=[],_0xddba8a;if(_0x56a14b[_0x49ed3f(0x260)]!==_0x49ed3f(0x245)||_0x56a14b['apiSecret']!=='************'||_0x56a14b[_0x49ed3f(0x1ed)]&&_0x56a14b[_0x49ed3f(0x1ed)]!==_0x49ed3f(0x245)){if(config['exchange']){if(_0x56a14b[_0x49ed3f(0x260)]==_0x49ed3f(0x245))_0x56a14b[_0x49ed3f(0x260)]=config[_0x49ed3f(0x260)];if(_0x56a14b[_0x49ed3f(0x1e6)]==_0x49ed3f(0x245))_0x56a14b[_0x49ed3f(0x1e6)]=config[_0x49ed3f(0x1e6)];if(_0x56a14b[_0x49ed3f(0x1ed)]=='************')_0x56a14b[_0x49ed3f(0x1ed)]=config[_0x49ed3f(0x1ed)];try{await testAPI(_0x56a14b);}catch(_0x428f33){if(_0x428f33[_0x49ed3f(0x274)]()['includes'](_0x49ed3f(0x2da))){logger[_0x49ed3f(0x27d)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit('portfolio',![]);return;}else{handleError(_0x428f33,_0x49ed3f(0x219));return;}}}await initExchange(_0x56a14b[_0x49ed3f(0x20a)],_0x56a14b[_0x49ed3f(0x260)],_0x56a14b[_0x49ed3f(0x1e6)],_0x56a14b[_0x49ed3f(0x1ed)]);try{await loadSymbols(_0x56a14b[_0x49ed3f(0x20a)],!![]);}catch(_0x51c473){if(_0x51c473['toString']()[_0x49ed3f(0x1b3)]('AuthenticationError')){proxyEmit(_0x49ed3f(0x1be),![]);return;}else{handleError(_0x51c473,_0x49ed3f(0x1f7));return;}}const _0x127c5d=await getCoins(![],_0x56a14b[_0x49ed3f(0x1c3)]);_0x1b4158=cloneDeep(_0x127c5d[0x1]);}else _0x1b4158=cloneDeep(currentCoinsAll);if(_0x56a14b['basecoin']=='')proxyEmit('portfolio',_0x1b4158);else{_0x1b4158[_0x49ed3f(0x251)](_0x1a1434=>{const _0xabdaff=_0x49ed3f;if(_0x1a1434['coin']!=_0x56a14b[_0xabdaff(0x1c3)])_0x28bdc6[_0xabdaff(0x213)](_0x1a1434['symbol']);});try{_0x2bd774=await exchange[_0x49ed3f(0x264)](_0x28bdc6);}catch(_0x1261d2){if(_0x1261d2[_0x49ed3f(0x274)]()[_0x49ed3f(0x1b3)](_0x49ed3f(0x2da))){proxyEmit('portfolio',![]);return;}else{handleError(_0x1261d2,_0x49ed3f(0x247));return;}}_0x1b4158[_0x49ed3f(0x251)](_0x24a0c2=>{const _0x1d4626=_0x49ed3f;_0x24a0c2[_0x1d4626(0x203)]!=_0x56a14b[_0x1d4626(0x1c3)]?_0xddba8a=_0x24a0c2[_0x1d4626(0x221)]?0x1/_0x2bd774[_0x24a0c2['symbol']][_0x1d4626(0x2d2)]:_0x2bd774[_0x24a0c2[_0x1d4626(0x29f)]][_0x1d4626(0x2d2)]:_0xddba8a=0x1,_0x24a0c2[_0x1d4626(0x200)]=formatResult(_0xddba8a,0x8);}),proxyEmit(_0x49ed3f(0x1be),_0x1b4158);}}function truncateTradeAmount(_0x7b9bd,_0x22d583){const _0x1ca89e=_0x4721ce;let _0x34a029=0x0;try{_0x34a029=exchange[_0x1ca89e(0x2cc)](_0x7b9bd,_0x22d583);}catch(_0x2cef9d){}return _0x34a029;}function checkMinimums(_0x5b9ae0){const _0x13d452=_0x4721ce;let _0x466a64=!![];const _0x3d37f6=!_0x5b9ae0['reverse']?markets[_0x5b9ae0[_0x13d452(0x29f)]]['limits'][_0x13d452(0x21c)][_0x13d452(0x2fc)]:markets[_0x5b9ae0[_0x13d452(0x29f)]][_0x13d452(0x280)]['cost']['min'],_0x100de5=!_0x5b9ae0[_0x13d452(0x221)]?markets[_0x5b9ae0['symbol']][_0x13d452(0x280)][_0x13d452(0x2ab)][_0x13d452(0x2fc)]:markets[_0x5b9ae0[_0x13d452(0x29f)]][_0x13d452(0x280)][_0x13d452(0x21c)]['min'],_0x2827c9=truncateTradeAmount(_0x5b9ae0['symbol'],_0x5b9ae0[_0x13d452(0x1df)]);_0x5b9ae0[_0x13d452(0x1df)]=_0x2827c9;if(Math[_0x13d452(0x282)](_0x2827c9)<_0x3d37f6)_0x466a64=![];if(Math[_0x13d452(0x282)](_0x2827c9)*_0x5b9ae0[_0x13d452(0x2d2)]<_0x100de5)_0x466a64=![];if(_0x5b9ae0[_0x13d452(0x297)]==_0x13d452(0x1d1)){let _0x20afe2=config['portfolio'][_0x13d452(0x1b1)](_0x5e2f56=>_0x5e2f56[_0x13d452(0x203)]==_0x5b9ae0[_0x13d452(0x203)]);if(_0x20afe2['offset']>0x0){if(Math[_0x13d452(0x282)](_0x2827c9)>_0x5b9ae0['number']-_0x20afe2[_0x13d452(0x265)])_0x466a64=![];}else{if(Math[_0x13d452(0x282)](_0x2827c9)>_0x5b9ae0[_0x13d452(0x2bb)])_0x466a64=![];}}if(_0x5b9ae0[_0x13d452(0x297)]=='buy'){let _0x49c9bd=config[_0x13d452(0x1be)]['find'](_0x3ce9e4=>_0x3ce9e4[_0x13d452(0x203)]==config[_0x13d452(0x1c3)]),_0x13c333=currentCoins[_0x13d452(0x1b1)](_0x59868a=>_0x59868a['coin']==config[_0x13d452(0x1c3)]);if(_0x49c9bd[_0x13d452(0x265)]>0x0){if(Math[_0x13d452(0x282)](_0x2827c9)*_0x5b9ae0[_0x13d452(0x2d2)]>_0x13c333[_0x13d452(0x2bb)]-_0x49c9bd[_0x13d452(0x265)])_0x466a64=![];}else{if(Math[_0x13d452(0x282)](_0x2827c9)*_0x5b9ae0[_0x13d452(0x2d2)]>_0x13c333[_0x13d452(0x2bb)])_0x466a64=![];}}return _0x466a64;}async function getBalances(){const _0x2618af=_0x4721ce;let _0x20ad5e=0x0,_0x4e03a4;const _0x596601=config[_0x2618af(0x2b5)];if(config[_0x2618af(0x27f)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2618af(0x251)](_0x2a1952=>{const _0x64b0e7=_0x2618af;if(_0x2a1952['coin']!=config[_0x64b0e7(0x1c3)]){let _0x4cae8b=global[_0x64b0e7(0x24e)][noslash(_0x2a1952[_0x64b0e7(0x29f)])];_0x4e03a4=_0x2a1952['reverse']?0x1/_0x4cae8b:_0x4cae8b;}else _0x4e03a4=0x1;let _0x303cac=_0x2a1952[_0x64b0e7(0x2bb)]*_0x4e03a4;_0x20ad5e+=_0x303cac,_0x2a1952[_0x64b0e7(0x2d2)]=formatResult(Number(_0x4e03a4),0x8),_0x2a1952[_0x64b0e7(0x225)]=_0x303cac;}),currentCoins[_0x2618af(0x251)](_0x536293=>{const _0x48d0be=_0x2618af;let _0x4ff256=config['portfolio'][_0x48d0be(0x1b1)](_0x132a70=>_0x132a70[_0x48d0be(0x203)]==_0x536293[_0x48d0be(0x203)]),_0x299a88=Number(_0x4ff256['distribution']),_0x3c9c11=_0x536293[_0x48d0be(0x225)]/_0x20ad5e*0x64,_0x23fd24=_0x299a88*_0x20ad5e/0x64/_0x536293['last']-_0x536293[_0x48d0be(0x2bb)];_0x536293[_0x48d0be(0x20f)]=formatResult(_0x3c9c11,0x3),_0x536293[_0x48d0be(0x27b)]=formatResult(_0x299a88,0x3),_0x536293[_0x48d0be(0x1df)]=formatResult(_0x23fd24,0x8),_0x536293[_0x48d0be(0x297)]='',_0x536293[_0x48d0be(0x210)]=![];if(_0x536293[_0x48d0be(0x203)]!=config['basecoin']){if(_0x536293[_0x48d0be(0x20f)]>_0x299a88)_0x536293[_0x48d0be(0x297)]=_0x48d0be(0x1d1),_0x536293[_0x48d0be(0x210)]=checkMinimums(_0x536293);else _0x536293['distribution']<_0x299a88&&(_0x536293['side']=_0x48d0be(0x208),_0x536293[_0x48d0be(0x210)]=checkMinimums(_0x536293));}_0x536293[_0x48d0be(0x2d7)]=_0x536293[_0x48d0be(0x20f)]/_0x536293[_0x48d0be(0x27b)]-0x1;if(_0x536293[_0x48d0be(0x201)]=='filled'||_0x536293['orderstatus']==_0x48d0be(0x1f4))_0x536293['orderstatus']=_0x48d0be(0x28b);}),currentCoins['sort']((_0x392928,_0x25a2d7)=>_0x392928[_0x2618af(0x2d7)]<_0x25a2d7[_0x2618af(0x2d7)]?0x1:_0x25a2d7[_0x2618af(0x2d7)]<_0x392928[_0x2618af(0x2d7)]?-0x1:0x0);const _0x1d428b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1d428b[_0x2618af(0x29a)],'usd':_0x1d428b[_0x2618af(0x244)],'portfolio':JSON[_0x2618af(0x31e)](currentCoins),'threshold':_0x596601},proxyEmit(_0x2618af(0x218),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2618af(0x27f)])headlessMode({'portfolio':currentCoins,'threshold':_0x596601});else{if(lockOrders==ORDERS[_0x2618af(0x1c9)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x596601});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4b02eb=getNormalizedPerformance();getStartingBalances(_0x4b02eb),emitPerformance(_0x4b02eb);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4be234=getNormalizedPerformance();emitPerformance(_0x4be234),getStartingBalances(_0x4be234),logger[_0x2618af(0x27d)](_0x2618af(0x256));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x96042d=_0x4721ce;if(!lastBalances)return;let _0x1a5c7d=[],_0x4664da,_0x58ca41=JSON[_0x96042d(0x1e4)](lastBalances[_0x96042d(0x1be)]);_0x58ca41['sort']((_0x1ad0e0,_0x3a4c79)=>_0x1ad0e0[_0x96042d(0x203)]>_0x3a4c79[_0x96042d(0x203)]?0x1:_0x3a4c79[_0x96042d(0x203)]>_0x1ad0e0[_0x96042d(0x203)]?-0x1:0x0),_0x58ca41[_0x96042d(0x251)](_0xd924b8=>{const _0x38c67d=_0x96042d;let _0x6eee1a={'coin':_0xd924b8[_0x38c67d(0x203)],'number':_0xd924b8['number'],'price':_0xd924b8[_0x38c67d(0x2d2)]};_0x1a5c7d[_0x38c67d(0x213)](_0x6eee1a);});const _0x728436=await getFiat();_0x4664da={'date':lastBalances[_0x96042d(0x2c5)][_0x96042d(0x21d)]('\x20')[0x0],'eur':_0x728436['eur'],'usd':_0x728436[_0x96042d(0x244)],'coins':_0x1a5c7d};let _0x4fb800=dbPerformance['get'](_0x96042d(0x1ee))[_0x96042d(0x1b1)]({'date':_0x4664da[_0x96042d(0x1fa)]})[_0x96042d(0x225)]();_0x4fb800?_0x4664da[_0x96042d(0x1fa)]!=config[_0x96042d(0x1b4)]&&dbPerformance[_0x96042d(0x1d6)](_0x96042d(0x1ee))[_0x96042d(0x1b1)]({'date':_0x4664da[_0x96042d(0x1fa)]})['assign'](_0x4664da)['write']():dbPerformance['get'](_0x96042d(0x1ee))[_0x96042d(0x213)](_0x4664da)[_0x96042d(0x1cf)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x18b819=_0x4721ce;let _0x2e72a8=[];if(dbPerformance[_0x18b819(0x22b)](_0x18b819(0x1ee))[_0x18b819(0x225)]()){let _0x48877a=dbPerformance[_0x18b819(0x1d6)](_0x18b819(0x1ee))[_0x18b819(0x220)]()[_0x18b819(0x2ad)](_0x18b819(0x1fa))['value'](),_0x5de559=[...config[_0x18b819(0x319)]];_0x5de559[_0x18b819(0x20c)]((_0x2f35e3,_0x5f4fcb)=>_0x2f35e3[_0x18b819(0x1fa)]>_0x5f4fcb[_0x18b819(0x1fa)]?-0x1:_0x5f4fcb[_0x18b819(0x1fa)]>_0x2f35e3[_0x18b819(0x1fa)]?0x1:0x0);let _0x9423ff=0x1,_0x4d155c=[],_0x14f121=0x0;_0x48877a[_0x18b819(0x322)]()[_0x18b819(0x221)]()['forEach']((_0x3fc736,_0x16cdde)=>{const _0x2a850e=_0x18b819;if(_0x5de559[_0x14f121]){if(_0x48877a[_0x48877a[_0x2a850e(0x1f1)]-_0x16cdde]&&_0x5de559[_0x14f121][_0x2a850e(0x1fa)]==_0x48877a[_0x48877a[_0x2a850e(0x1f1)]-_0x16cdde]['date']){if(_0x16cdde<_0x48877a[_0x2a850e(0x1f1)]){let _0x2d07fb=0x0,_0x572a59=0x0;_0x48877a[_0x48877a[_0x2a850e(0x1f1)]-_0x16cdde]['coins']['forEach'](_0x57b238=>{const _0x537296=_0x2a850e;_0x572a59+=_0x57b238[_0x537296(0x2bb)]*_0x57b238['price'];}),_0x5de559[_0x14f121]['changes'][_0x2a850e(0x251)](_0x4660af=>{const _0x3328b0=_0x2a850e;_0x2d07fb+=_0x4660af['number']*_0x4660af[_0x3328b0(0x200)];}),_0x9423ff*=_0x2d07fb/(_0x572a59-_0x2d07fb)+0x1;}_0x14f121++;}}let _0x31182c=0x0;_0x3fc736[_0x2a850e(0x2e7)]['forEach'](_0x189e1c=>{const _0x3c3baf=_0x2a850e;_0x31182c+=_0x189e1c[_0x3c3baf(0x2bb)]*_0x189e1c[_0x3c3baf(0x200)];}),_0x4d155c[_0x48877a[_0x2a850e(0x1f1)]-_0x16cdde-0x1]=_0x31182c*(_0x9423ff-0x1);});let _0x9fc09e=[];_0x5de559=[...config[_0x18b819(0x319)]]||[];let _0x1d67f9=0x0;_0x14f121=0x0,_0x48877a[_0x18b819(0x251)]((_0x61db8c,_0x5a0b43)=>{const _0x2394ff=_0x18b819;if(_0x5de559[_0x14f121]){const _0x12c47a=fns[_0x2394ff(0x1e4)](_0x5de559[_0x14f121][_0x2394ff(0x1fa)],_0x2394ff(0x2f9),new Date()),_0x390b30=fns[_0x2394ff(0x1e4)](_0x61db8c[_0x2394ff(0x1fa)],_0x2394ff(0x2f9),new Date());if(fns[_0x2394ff(0x2a9)](_0x12c47a,_0x390b30)){let _0x2e4a68=0x0;_0x5de559[_0x14f121][_0x2394ff(0x2cd)][_0x2394ff(0x251)](_0x4a6e25=>{const _0x2cdac6=_0x2394ff;!_0x9fc09e[_0x4a6e25[_0x2cdac6(0x203)]]?_0x9fc09e[_0x4a6e25[_0x2cdac6(0x203)]]=_0x4a6e25[_0x2cdac6(0x2bb)]:(_0x2e4a68=_0x9fc09e[_0x4a6e25['coin']],_0x9fc09e[_0x4a6e25[_0x2cdac6(0x203)]]+=_0x4a6e25[_0x2cdac6(0x2bb)]);const _0x50645d=_0x61db8c[_0x2cdac6(0x2e7)][_0x2cdac6(0x1b1)](_0x91ba2e=>_0x91ba2e[_0x2cdac6(0x203)]==_0x4a6e25[_0x2cdac6(0x203)]);(!_0x50645d||_0x50645d[_0x2cdac6(0x2bb)]==0x0)&&(_0x1d67f9+=(-_0x4a6e25[_0x2cdac6(0x2bb)]-_0x2e4a68)*_0x4a6e25[_0x2cdac6(0x200)]);}),_0x14f121++;}}_0x61db8c[_0x2394ff(0x2e7)][_0x2394ff(0x251)]((_0x15b4b7,_0x2ba3e8)=>{const _0x63dbef=_0x2394ff;_0x9fc09e[_0x15b4b7['coin']]&&(_0x15b4b7[_0x63dbef(0x2a2)]=_0x9fc09e[_0x15b4b7[_0x63dbef(0x203)]]);}),_0x2e72a8['push']({'date':_0x61db8c[_0x2394ff(0x1fa)],'eur':_0x61db8c[_0x2394ff(0x29a)],'usd':_0x61db8c['usd'],'offset':_0x4d155c[_0x5a0b43],'netoffset':_0x1d67f9,'coins':_0x61db8c[_0x2394ff(0x2e7)]});});}return _0x2e72a8;}function emitPerformance(_0x21500e){const _0x228219=_0x4721ce;_0x21500e[_0x228219(0x1f1)]!==0x0?(proxyEmit('performance',_0x21500e),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x66047f,_0x566f1c){const _0x2e2cc0=_0x4721ce;let _0x310e30=0x0,_0x10ddc9=0x0,_0x3c542b=0x0;_0x66047f[_0x2e2cc0(0x2e7)][_0x2e2cc0(0x251)](_0x356fa5=>{const _0xfd60a=_0x2e2cc0;_0x310e30+=_0x356fa5[_0xfd60a(0x2bb)]*_0x356fa5[_0xfd60a(0x200)];});_0x566f1c&&(_0x310e30+=_0x66047f['offset']);if(config[_0x2e2cc0(0x1c3)]===_0x2e2cc0(0x215)||config[_0x2e2cc0(0x1c3)]===_0x2e2cc0(0x1b6))_0x10ddc9=_0x310e30*_0x66047f[_0x2e2cc0(0x29a)],_0x3c542b=_0x310e30*_0x66047f[_0x2e2cc0(0x244)];else{if(config['basecoin']===_0x2e2cc0(0x1b7)||config['basecoin']===_0x2e2cc0(0x2f5)||config[_0x2e2cc0(0x1c3)]===_0x2e2cc0(0x1f2))_0x10ddc9=_0x310e30*_0x66047f[_0x2e2cc0(0x29a)]/_0x66047f[_0x2e2cc0(0x244)],_0x3c542b=_0x310e30;else config['basecoin']==='EUR'&&(_0x10ddc9=_0x310e30,_0x3c542b=_0x310e30*_0x66047f[_0x2e2cc0(0x244)]/_0x66047f[_0x2e2cc0(0x29a)]);}return[_0x310e30,_0x10ddc9,_0x3c542b];}function getKPIs(_0x12627c,_0x1377f7=_0x4721ce(0x2c3)){const _0x4ff857=_0x4721ce,_0x1fcea7=config[_0x4ff857(0x1c3)],_0x1d2843=lastBalances,_0x410fc4=currentCoins,_0x5d4448=getNormalizedPerformance(),_0xe23f2f=_0x12627c==='basecoin'?_0x1fcea7:_0x12627c==='fiat'||_0x12627c==='net-fiat'?_0x1377f7:_0x4ff857(0x262)+_0x1fcea7,_0x2f05f8=_0x12627c===_0x4ff857(0x1db)?_0x4ff857(0x270):_0x12627c===_0x4ff857(0x2e8)?_0x4ff857(0x270):_0xe23f2f+_0x4ff857(0x1e0),_0x4fb9c0=_0x12627c===_0x4ff857(0x1db)||_0x12627c===_0x4ff857(0x2e8)?_0x4ff857(0x270):_0xe23f2f+'\x20change';let _0x102a29=0x0;_0x410fc4['forEach'](_0x49a657=>{const _0x51b03e=_0x4ff857;_0x102a29+=_0x49a657['number']*_0x49a657[_0x51b03e(0x2d2)];});if(_0x12627c==='fiat'||_0x12627c===_0x4ff857(0x2e8)){if(_0x1fcea7===_0x4ff857(0x215)||_0x1fcea7===_0x4ff857(0x1b6))_0x102a29=_0x102a29*(_0x1377f7===_0x4ff857(0x2c3)?_0x1d2843[_0x4ff857(0x29a)]:_0x1d2843[_0x4ff857(0x244)]);else{if(_0x1fcea7===_0x4ff857(0x1b7)||_0x1fcea7==='USDT'||_0x1fcea7==='USD')_0x102a29=_0x102a29*(_0x1377f7===_0x4ff857(0x2c3)?_0x1d2843[_0x4ff857(0x29a)]/_0x1d2843[_0x4ff857(0x244)]:0x1);else _0x1fcea7==='EUR'&&(_0x102a29=_0x102a29*(_0x1377f7===_0x4ff857(0x2c3)?0x1:_0x1d2843[_0x4ff857(0x244)]/_0x1d2843[_0x4ff857(0x29a)]));}}let _0x10e568;if(_0x102a29!==0x0){if(_0x12627c===_0x4ff857(0x1c3))_0x10e568=(_0x102a29/startingBalances[_0x4ff857(0x1c3)]-0x1)*0x64;else{if(_0x1377f7===_0x4ff857(0x2c3))_0x10e568=(_0x102a29/startingBalances[_0x4ff857(0x29a)]-0x1)*0x64;else _0x10e568=(_0x102a29/startingBalances['usd']-0x1)*0x64;}let _0x423ef4=0x0;if(startingBalances['coins'])_0x410fc4[_0x4ff857(0x251)](_0x2f19a7=>{const _0x2f8552=_0x4ff857;let _0x1e6c67=startingBalances[_0x2f8552(0x2e7)][_0x2f8552(0x1b1)](_0x2c6021=>_0x2c6021[_0x2f8552(0x203)]===_0x2f19a7[_0x2f8552(0x203)]);if(_0x1e6c67&&_0x1e6c67['coin']&&_0x2f19a7[_0x2f8552(0x2bb)]!==0x0)_0x423ef4+=_0x1e6c67[_0x2f8552(0x2bb)]*_0x2f19a7[_0x2f8552(0x2d2)];});let _0xfa857e=0x0;if(_0x5d4448[_0x4ff857(0x1f1)]!==0x0){let _0xad41d8=_0x5d4448[_0x5d4448['length']-0x1];_0xfa857e=_0xad41d8[_0x4ff857(0x2a7)];}_0x423ef4-=_0xfa857e;_0x12627c===_0x4ff857(0x1db)&&(_0x10e568=(_0x102a29-_0x423ef4)/startingBalances[_0x4ff857(0x1c3)]*0x64,_0x102a29=_0x102a29-_0x423ef4);if(_0x12627c==='net-fiat'){let _0x4959cd=_0x1377f7==='EUR'?startingBalances[_0x4ff857(0x29a)]:startingBalances[_0x4ff857(0x244)];if(_0x1fcea7===_0x4ff857(0x215)||_0x1fcea7===_0x4ff857(0x1b6))_0x423ef4=_0x1377f7===_0x4ff857(0x2c3)?_0x423ef4*_0x1d2843['eur']:_0x423ef4*_0x1d2843[_0x4ff857(0x244)];else{if(_0x1fcea7===_0x4ff857(0x1b7)||_0x1fcea7===_0x4ff857(0x2f5)||_0x1fcea7==='USD')_0x423ef4=_0x1377f7==='EUR'?_0x423ef4*_0x1d2843[_0x4ff857(0x29a)]/_0x1d2843[_0x4ff857(0x244)]:_0x423ef4;else _0x1fcea7==='EUR'&&(_0x423ef4=_0x1377f7===_0x4ff857(0x2c3)?_0x423ef4:_0x423ef4*_0x1d2843[_0x4ff857(0x244)]/_0x1d2843[_0x4ff857(0x29a)]);}_0x10e568=(_0x102a29-_0x423ef4)/_0x4959cd*0x64,_0x102a29=_0x102a29-_0x423ef4;}if(_0x10e568){if(_0x10e568<0x64)_0x10e568=_0x10e568[_0x4ff857(0x2c9)](0x2);else{if(_0x10e568<0x3e8)_0x10e568=_0x10e568[_0x4ff857(0x2c9)](0x1);else _0x10e568=_0x10e568['toFixed'](0x0);}}else _0x10e568=Number('0')[_0x4ff857(0x2c9)](0x2);if(_0x102a29){if(Math[_0x4ff857(0x282)](_0x102a29)<0.000001)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x2);else{if(Math[_0x4ff857(0x282)](_0x102a29)<0.1)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x6);else{if(Math[_0x4ff857(0x282)](_0x102a29)<0x1)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x5);else{if(Math[_0x4ff857(0x282)](_0x102a29)<0xa)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x4);else{if(Math[_0x4ff857(0x282)](_0x102a29)<0x64)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x3);else{if(Math[_0x4ff857(0x282)](_0x102a29)<0x3e8)_0x102a29=_0x102a29[_0x4ff857(0x2c9)](0x2);else _0x102a29=_0x102a29['toFixed'](0x2);}}}}}}else _0x102a29=Number('0')[_0x4ff857(0x2c9)](0x2);}else _0x10e568=Number('0')['toFixed'](0x2);return{'value':_0x102a29,'change':_0x10e568,'leftTxt':_0x2f05f8,'rightTxt':_0x4fb9c0};}async function getStartingBalances(_0x305d5f,_0x4db21e=!![]){const _0x4160cf=_0x4721ce;if(_0x305d5f[_0x4160cf(0x1f1)]!==0x0){const [_0x331f2f,_0x922178,_0x66968b]=getPerf(_0x305d5f[0x0],!![]);let _0x1e6584=[];config[_0x4160cf(0x1be)][_0x4160cf(0x251)](_0x54cd8b=>{const _0x20bb5a=_0x4160cf;let _0x5649ef=0x0,_0x1fd5d4;config[_0x20bb5a(0x319)][_0x20bb5a(0x251)](_0x439558=>{const _0x38b7e5=_0x20bb5a;let _0x4f33ec=_0x439558[_0x38b7e5(0x2cd)][_0x38b7e5(0x1b1)](_0x1dfdf6=>_0x1dfdf6[_0x38b7e5(0x203)]==_0x54cd8b[_0x38b7e5(0x203)]);if(_0x4f33ec){_0x5649ef+=_0x4f33ec[_0x38b7e5(0x2bb)];if(!_0x1fd5d4)_0x1fd5d4=_0x4f33ec[_0x38b7e5(0x200)];}}),_0x1e6584[_0x20bb5a(0x213)]({'coin':_0x54cd8b[_0x20bb5a(0x203)],'number':_0x5649ef,'initialprice':_0x1fd5d4});});const _0x32410e={'basecoin':_0x331f2f,'eur':_0x922178,'usd':_0x66968b,'coins':_0x1e6584};if(_0x4db21e)proxyEmit('starting-balances',_0x32410e);startingBalances=_0x32410e;}}function headlessMode(_0x4a4680){const _0x14f63c=_0x4721ce;let _0x528ee4=_0x4a4680[_0x14f63c(0x1be)],_0x5885b5=_0x4a4680[_0x14f63c(0x2b5)],_0x5fdf6a=[];for(let _0x4af457 of _0x528ee4){if(_0x4af457[_0x14f63c(0x203)]!=config['basecoin']){if(_0x4af457['delta']>=_0x5885b5/0x64){if(_0x4af457[_0x14f63c(0x210)])_0x5fdf6a[_0x14f63c(0x213)](_0x4af457);}else{if(_0x4af457[_0x14f63c(0x2d7)]<=-_0x5885b5/0x64){if(_0x4af457[_0x14f63c(0x210)])_0x5fdf6a[_0x14f63c(0x213)](_0x4af457);}}}}_0x5fdf6a[_0x14f63c(0x1f1)]>0x0&&placeOrder(_0x5fdf6a);}function notifyBalance(_0x190bbc){const _0x36bab1=_0x4721ce;let _0x4622a1=_0x190bbc[_0x36bab1(0x1be)],_0x2670cf=_0x190bbc[_0x36bab1(0x2b5)],_0x5e3f26=[];for(let _0x46166 of _0x4622a1){if(_0x46166['coin']!=config['basecoin']){if(_0x46166[_0x36bab1(0x2d7)]>=_0x2670cf/0x64){if(_0x46166[_0x36bab1(0x210)])_0x5e3f26[_0x36bab1(0x213)](_0x46166);}else{if(_0x46166['delta']<=-_0x2670cf/0x64){if(_0x46166[_0x36bab1(0x210)])_0x5e3f26[_0x36bab1(0x213)](_0x46166);}}}}if(_0x5e3f26['length']>0x0){let _0x12e224=_0x5e3f26[_0x36bab1(0x1dd)](_0x35bdeb=>_0x35bdeb['coin']);_0x12e224[_0x36bab1(0x20c)]();let _0x50c97d=_0x12e224[_0x36bab1(0x2a3)](',\x20');if(!lastCoinsToBalance)logHistory(_0x36bab1(0x2d9),_0x36bab1(0x204));lastCoinsToBalance=_0x50c97d;}}function symbolToCoin(_0x5637b8){const _0x108197=_0x4721ce;let _0x396d99;if(_0x5637b8[_0x108197(0x1b3)]('/'+config[_0x108197(0x1c3)]))_0x396d99=_0x5637b8['replace']('/'+config[_0x108197(0x1c3)],'');if(_0x5637b8[_0x108197(0x1b3)](config[_0x108197(0x1c3)]+'/'))_0x396d99=_0x5637b8['replace'](config[_0x108197(0x1c3)]+'/','');return _0x396d99;}async function unlockOrders(){const _0x370143=_0x4721ce;if(allOrdersPlaced&&lockOrders==ORDERS[_0x370143(0x2d0)]){logger[_0x370143(0x27d)](_0x370143(0x248)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x179c48=await getCoins();[currentCoins,currentCoinsAll]=_0x179c48,validateOrdersState=_0x370143(0x2a2),persistOpenOrders([]),lockOrders=ORDERS[_0x370143(0x1c9)],logger[_0x370143(0x27d)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x113673){const _0x590507=_0x4721ce;if(_0x113673)validateOrdersState=_0x113673;logger[_0x590507(0x27d)](_0x590507(0x25f)+validateOrdersState+_0x590507(0x1e7)+(lockOrders==0x1?_0x590507(0x1bd):lockOrders==0x2?'ORDERS.UNLOCKING':_0x590507(0x1c6)));let _0x585d0c=[],_0x32d362=config['ordertype']==_0x590507(0x1da)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x590507(0x26d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x590507(0x2d0)])return;logger[_0x590507(0x27d)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0xdf97d6=>{const _0x2e5fa1=_0x590507;let _0x8e3872=![];_0xdf97d6[_0x2e5fa1(0x2c4)]>0x0&&(_0x8e3872=!![]),_0x585d0c[_0x2e5fa1(0x213)](_0x8e3872),_0x8e3872&&config[_0x2e5fa1(0x268)]!='market'&&logHistory('order',_0x2e5fa1(0x2ef)+_0xdf97d6[_0x2e5fa1(0x29f)]+'\x20'+_0xdf97d6['side']+'\x20#'+formatResult(_0xdf97d6[_0x2e5fa1(0x2c4)],0x8)+'\x20@'+formatResult(_0xdf97d6[_0x2e5fa1(0x200)],0x8));}),_0x585d0c['forEach']((_0x4c4de5,_0x466117)=>{const _0x4446ad=_0x590507;if(_0x4c4de5)lastOrders[_0x4446ad(0x2f4)](_0x466117,0x1);}),persistOpenOrders(lastOrders);const _0x48154c=coolingDown?_0x590507(0x2fd):_0x590507(0x21e);if(validateOrdersState==_0x590507(0x2a2)){validateOrdersState=_0x590507(0x293);if(_0x585d0c[_0x590507(0x1b3)](![])){if(config['ordertype']==_0x590507(0x1da)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x590507(0x293)){if(_0x585d0c[_0x590507(0x1b3)](![])){}else{if(allOrdersPlaced){if(config[_0x590507(0x268)]==_0x590507(0x1da)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x590507(0x318))_0x585d0c['includes'](![])&&(config[_0x590507(0x268)]==_0x590507(0x1da)?logHistory(_0x590507(0x23c),_0x590507(0x2ed)+Math[_0x590507(0x2d4)](_0x32d362*validateOrderInterval/0xea60)+_0x590507(0x2a5)+_0x48154c):(await cancelOrders(),logHistory('success',_0x590507(0x255)+Math[_0x590507(0x2d4)](_0x32d362*validateOrderInterval/0xea60)+_0x590507(0x2a5)+_0x48154c))),await unlockOrders();else{if(validateOrdersState==_0x590507(0x315)){if(config[_0x590507(0x268)]!=_0x590507(0x1da))logHistory(_0x590507(0x23c),_0x590507(0x2bd)+_0x48154c);await unlockOrders();}}}}}async function cancelOrders(){const _0x20fa18=_0x4721ce;lastOrders[_0x20fa18(0x251)](async _0x3b6648=>{const _0x46f971=_0x20fa18;try{const _0x3288b0=await exchange[_0x46f971(0x290)](_0x3b6648[_0x46f971(0x2b1)],_0x3b6648[_0x46f971(0x29f)]);}catch(_0x4c0b2c){if(_0x4c0b2c[_0x46f971(0x274)]()[_0x46f971(0x1b3)](_0x46f971(0x207))){}else await handleError(_0x4c0b2c,_0x46f971(0x272));}});}async function initCoinResults(){const _0x53698e=_0x4721ce;let _0x1d7828=[];config[_0x53698e(0x1be)][_0x53698e(0x251)](_0x2369c0=>{const _0x18de4a=_0x53698e;if(!_0x2369c0[_0x18de4a(0x28e)]&&_0x2369c0[_0x18de4a(0x203)]!=config[_0x18de4a(0x1c3)]){let _0x449510=dbCoinResults[_0x18de4a(0x1d6)]('coins')[_0x18de4a(0x1b1)]({'coin':_0x2369c0[_0x18de4a(0x203)]})[_0x18de4a(0x225)]();if(!_0x449510){const _0x47b3ac=currentCoins[_0x18de4a(0x1b1)](_0x237593=>_0x237593['coin']==_0x2369c0[_0x18de4a(0x203)]),_0x3dd4a2=global[_0x18de4a(0x24e)][noslash(_0x2369c0[_0x18de4a(0x29f)])];let _0x262f05=_0x47b3ac?_0x47b3ac[_0x18de4a(0x2bb)]:null,_0x486e02=_0x2369c0[_0x18de4a(0x221)]?0x1/_0x3dd4a2:_0x3dd4a2,_0x127cfc;config['liquidity'][_0x18de4a(0x251)](_0x5c1dca=>{const _0x4f3909=_0x18de4a;!_0x127cfc&&(_0x127cfc=_0x5c1dca[_0x4f3909(0x2cd)][_0x4f3909(0x1b1)](_0x1e4f3b=>_0x1e4f3b[_0x4f3909(0x203)]==_0x2369c0[_0x4f3909(0x203)]),_0x127cfc&&(_0x262f05=_0x127cfc[_0x4f3909(0x2bb)],_0x486e02=_0x127cfc[_0x4f3909(0x200)]));}),_0x1d7828[_0x18de4a(0x213)]({'coin':_0x2369c0[_0x18de4a(0x203)],'number':_0x262f05,'price':_0x486e02});}}}),_0x1d7828[_0x53698e(0x251)](_0x2562ad=>{const _0x539c32=_0x53698e,_0x212240={'coin':_0x2562ad[_0x539c32(0x203)],'number':_0x2562ad[_0x539c32(0x2bb)],'breakeven':_0x2562ad['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x539c32(0x1d6)](_0x539c32(0x2e7))['push'](_0x212240)[_0x539c32(0x1cf)]();});}async function updateCoinResults(_0x31c1d4,_0x4414c3=![]){const _0x4acecb=_0x4721ce;let _0x4cf1f1,_0x1e4b36,_0x1307fa,_0x101d12,_0x3394f9,_0x73386f,_0x478c75=dbCoinResults[_0x4acecb(0x1d6)](_0x4acecb(0x2e7))[_0x4acecb(0x1b1)]({'coin':_0x31c1d4[_0x4acecb(0x203)]})[_0x4acecb(0x225)]();!_0x478c75&&await initCoinResults();_0x31c1d4[_0x4acecb(0x221)]&&(_0x73386f={'filled':_0x31c1d4[_0x4acecb(0x2c4)]*_0x31c1d4[_0x4acecb(0x200)],'amount':_0x31c1d4['filled']*_0x31c1d4[_0x4acecb(0x200)],'side':_0x31c1d4[_0x4acecb(0x297)]==_0x4acecb(0x1d1)?_0x4acecb(0x208):_0x4acecb(0x1d1),'price':0x1/_0x31c1d4[_0x4acecb(0x200)]},_0x31c1d4={..._0x31c1d4,..._0x73386f});_0x4414c3?_0x1e4b36=_0x31c1d4[_0x4acecb(0x297)]==_0x4acecb(0x208)?_0x478c75[_0x4acecb(0x2bb)]+_0x31c1d4[_0x4acecb(0x2c4)]:_0x478c75['number']-_0x31c1d4['filled']:_0x1e4b36=await getCoinNumber(_0x31c1d4[_0x4acecb(0x203)]);if(_0x31c1d4['fee']&&_0x31c1d4['fee'][_0x4acecb(0x24b)]==config[_0x4acecb(0x1c3)])_0x4cf1f1=_0x31c1d4['fee'][_0x4acecb(0x2ab)];else{if(_0x31c1d4[_0x4acecb(0x250)]&&_0x31c1d4[_0x4acecb(0x250)][_0x4acecb(0x24b)]=='BNB'&&!_0x4414c3)_0x4cf1f1=_0x31c1d4[_0x4acecb(0x250)][_0x4acecb(0x2ab)]*global[_0x4acecb(0x24e)][_0x4acecb(0x326)+config[_0x4acecb(0x1c3)]];else _0x4cf1f1=defaultFee*_0x31c1d4[_0x4acecb(0x2c4)]*_0x31c1d4[_0x4acecb(0x200)];}_0x31c1d4['side']==_0x4acecb(0x208)?(_0x1307fa=_0x1e4b36!=0x0?(_0x478c75[_0x4acecb(0x31c)]*_0x478c75[_0x4acecb(0x2bb)]+_0x31c1d4[_0x4acecb(0x200)]*(_0x1e4b36-_0x478c75[_0x4acecb(0x2bb)])+_0x4cf1f1)/_0x1e4b36:0x0,_0x101d12=_0x478c75['realized']):(_0x1307fa=_0x1e4b36!=0x0?(_0x478c75[_0x4acecb(0x31c)]*_0x478c75[_0x4acecb(0x2bb)]-_0x31c1d4['price']*(_0x478c75[_0x4acecb(0x2bb)]-_0x1e4b36)+_0x4cf1f1)/_0x1e4b36:0x0,_0x101d12=_0x478c75[_0x4acecb(0x2b4)]+(_0x31c1d4[_0x4acecb(0x200)]-_0x478c75[_0x4acecb(0x31c)])*_0x31c1d4[_0x4acecb(0x2c4)]);_0x3394f9=(_0x31c1d4['price']-_0x1307fa-_0x4cf1f1/_0x31c1d4[_0x4acecb(0x2c4)])*_0x1e4b36;let _0x2e28ff={'coin':_0x31c1d4['coin'],'number':_0x1e4b36,'breakeven':formatResult(_0x1307fa,0x8),'realized':formatResult(_0x101d12,0x8),'unrealized':formatResult(_0x3394f9,0x8),'fees':formatResult(_0x478c75['fees']+_0x4cf1f1,0x8),'sells':_0x31c1d4[_0x4acecb(0x297)]=='sell'?_0x478c75[_0x4acecb(0x1c5)]+0x1:_0x478c75[_0x4acecb(0x1c5)],'buys':_0x31c1d4[_0x4acecb(0x297)]==_0x4acecb(0x208)?_0x478c75[_0x4acecb(0x1c0)]+0x1:_0x478c75[_0x4acecb(0x1c0)]};dbCoinResults[_0x4acecb(0x1d6)](_0x4acecb(0x2e7))[_0x4acecb(0x1b1)]({'coin':_0x31c1d4[_0x4acecb(0x203)]})[_0x4acecb(0x1ff)](_0x2e28ff)[_0x4acecb(0x1cf)]();if(!_0x4414c3){if(_0x31c1d4[_0x4acecb(0x250)]&&_0x31c1d4[_0x4acecb(0x250)]['currency']==_0x4acecb(0x326)){const _0x15b38d=currentCoins[_0x4acecb(0x1b1)](_0x1fd37b=>_0x1fd37b['coin']==_0x4acecb(0x326));if(_0x15b38d){let _0x25bea4=dbCoinResults[_0x4acecb(0x1d6)](_0x4acecb(0x2e7))[_0x4acecb(0x1b1)]({'coin':_0x4acecb(0x326)})[_0x4acecb(0x225)]();_0x2e28ff={..._0x25bea4,'number':_0x15b38d[_0x4acecb(0x2bb)]},dbCoinResults[_0x4acecb(0x1d6)]('coins')['find']({'coin':_0x4acecb(0x326)})[_0x4acecb(0x1ff)](_0x2e28ff)[_0x4acecb(0x1cf)]();}}}}async function placeOrder(_0x13a037){const _0x595440=_0x4721ce,_0x22a2f7=config[_0x595440(0x268)]=='market'?_0x595440(0x1da):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x595440(0x2a2);let _0x48de7e=![];lastOrders=[];for(const _0x144a9a of _0x13a037){let _0x4abfa9,_0x2032e7,_0xde43c4,_0x1330d0,_0x1a5ba8,_0x1c7932=_0x144a9a[_0x595440(0x29f)];try{const _0x49cc47=await exchange[_0x595440(0x1ef)](_0x1c7932);_0x4abfa9=_0x144a9a[_0x595440(0x221)]?0x1/_0x144a9a[_0x595440(0x2d2)]:_0x144a9a[_0x595440(0x2d2)],_0x2032e7=_0x49cc47['bid'],_0xde43c4=_0x49cc47[_0x595440(0x27a)];_0x144a9a['reverse']?(_0x1330d0=_0x144a9a[_0x595440(0x297)]==_0x595440(0x208)?_0x595440(0x1d1):_0x595440(0x208),_0x1a5ba8=Math[_0x595440(0x282)](_0x144a9a[_0x595440(0x1df)])/_0x4abfa9):(_0x1330d0=_0x144a9a[_0x595440(0x297)],_0x1a5ba8=Math['abs'](_0x144a9a[_0x595440(0x1df)]));_0x22a2f7==_0x595440(0x217)&&(config[_0x595440(0x268)]==_0x595440(0x313)&&(_0x4abfa9=_0x1330d0=='buy'?_0x2032e7:_0xde43c4),config[_0x595440(0x268)]=='limit-low'&&(_0x4abfa9=_0x1330d0=='buy'?_0xde43c4:_0x2032e7));_0x1a5ba8=formatResult(_0x1a5ba8,0x8),_0x4abfa9=formatResult(_0x4abfa9,0x8);const _0x4c07c6=_0x1330d0=='sell'?config['emojisell']?String[_0x595440(0x25e)]('0x'+config[_0x595440(0x24d)])+'\x20':'':config[_0x595440(0x1cd)]?String[_0x595440(0x25e)]('0x'+config[_0x595440(0x1cd)])+'\x20':'',_0x3653ca=_0x22a2f7==_0x595440(0x1da)?_0x595440(0x281):config[_0x595440(0x268)]==_0x595440(0x313)?_0x595440(0x2b8):_0x595440(0x2f7),_0x4a2907=new Date()[_0x595440(0x1d5)]()['toString']()[_0x595440(0x322)](-0x6)+'-'+Math['random']()[_0x595440(0x274)]()[_0x595440(0x322)](-0x6);lastOrders[_0x595440(0x213)]({'customId':_0x4a2907,'symbol':_0x1c7932,'coin':_0x144a9a[_0x595440(0x203)],'side':_0x1330d0,'reverse':_0x144a9a[_0x595440(0x221)],'filled':0x0});if(_0x22a2f7==_0x595440(0x1da))logHistory(_0x595440(0x24f),''+_0x4c07c6+_0x3653ca+_0x595440(0x1fc)+_0x1c7932+'\x20'+_0x1330d0+'\x20#'+formatResult(_0x1a5ba8,0x8)+'\x20@'+formatResult(_0x4abfa9,0x8));else logHistory(_0x595440(0x24f),''+_0x4c07c6+_0x3653ca+_0x595440(0x1fc)+_0x1c7932+'\x20'+_0x1330d0+'\x20#'+formatResult(_0x1a5ba8,0x8)+'\x20@'+formatResult(_0x4abfa9,0x8));const _0x5ca3ca=await exchange[_0x595440(0x2f8)](_0x1c7932,_0x22a2f7,_0x1330d0,_0x1a5ba8,_0x4abfa9,{'clientOrderId':_0x4a2907}),_0x40900e=lastOrders[_0x595440(0x1f1)]-0x1;_0x40900e>=0x0&&lastOrders[_0x40900e][_0x595440(0x23e)]==_0x4a2907&&(lastOrders[_0x40900e]={...lastOrders[_0x40900e],'orderId':_0x5ca3ca['id'],'amount':_0x5ca3ca[_0x595440(0x21c)],'price':_0x5ca3ca[_0x595440(0x200)],'fee':_0x5ca3ca[_0x595440(0x250)]});if(config[_0x595440(0x26a)]!=0x0){let _0x5388e5=null;if(cooldownTracker[_0x595440(0x1f1)]==config['cooldown']-0x1)_0x5388e5=cooldownTracker[_0x595440(0x236)]();const _0x38d951=getTimeStamp();cooldownTracker['push'](_0x38d951);if(_0x5388e5){const _0x25a106=fns[_0x595440(0x1f8)](new Date(_0x38d951),new Date(_0x5388e5));if(_0x25a106<cooldownInterval){logHistory(_0x595440(0x291),_0x595440(0x21b)+config[_0x595440(0x26a)]+_0x595440(0x1b5)+cooldownInterval/0x3c+_0x595440(0x239)+cooldownPeriod/(0xe10*0x3e8)+_0x595440(0x1eb)),coolingDown=!![];break;}}}}catch(_0x567682){if(_0x567682[_0x595440(0x274)]()[_0x595440(0x1b3)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x595440(0x2fe)](_0x4894f7=>_0x4894f7[_0x595440(0x29f)]!=_0x1c7932),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1c7932),_0x48de7e=!![];else{if(_0x567682[_0x595440(0x274)]()[_0x595440(0x1b3)](_0x595440(0x267)))lastOrders=lastOrders[_0x595440(0x2fe)](_0x329fb4=>_0x329fb4['symbol']!=_0x1c7932),logHistory(_0x595440(0x291),_0x595440(0x25a)+_0x1c7932),_0x48de7e=!![];else _0x567682[_0x595440(0x274)]()[_0x595440(0x1b3)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders['filter'](_0x239d31=>_0x239d31[_0x595440(0x29f)]!=_0x1c7932),logHistory(_0x595440(0x291),_0x595440(0x303)+_0x1c7932),_0x48de7e=!![]):(lastOrders=lastOrders[_0x595440(0x2fe)](_0x3bf9f9=>_0x3bf9f9['symbol']!=_0x1c7932),await handleError(_0x567682,_0x595440(0x2e3),_0x1c7932));}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x595440(0x1f1)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xf2e49f=config[_0x595440(0x268)]==_0x595440(0x1da)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0xf2e49f);}else unlockOrders();_0x48de7e&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x595440(0x23c),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x595440(0x27f)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x595440(0x1c9)]&&(!config['headless']&&(config['ordertype']=='market'?logHistory(_0x595440(0x291),_0x595440(0x22c)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x39cdcc){const _0x10b968=_0x4721ce,_0x376238={...config,'openOrders':_0x39cdcc};let _0x45c305=dbConfig[_0x10b968(0x1d6)](_0x10b968(0x2ee))[_0x10b968(0x1b1)]({'botID':botID})[_0x10b968(0x225)]();_0x45c305&&dbConfig[_0x10b968(0x1d6)](_0x10b968(0x2ee))[_0x10b968(0x1b1)]({'botID':botID})[_0x10b968(0x1ff)](_0x376238)[_0x10b968(0x1cf)]();}function restoreOrders(){const _0x228701=_0x4721ce;let _0x2bb53f;config['openOrders']&&allOpenOrders['forEach'](_0x55b825=>{const _0x1335be=_0x496d,_0x10d6d6=config[_0x1335be(0x2f1)]['find'](_0x322e5f=>_0x322e5f['orderId']==_0x55b825['id']);_0x10d6d6&&(lastOrders[_0x1335be(0x213)](_0x10d6d6),_0x2bb53f=_0x55b825[_0x1335be(0x292)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x228701(0x2d0)],validateOrdersState=_0x228701(0x293),allOrdersPlaced=!![];const _0x1416cf=new Date()['getTime'](),_0x1c8694=config['ordertype']==_0x228701(0x1da)?validateOrderTimeout*0x3c*0x3e8:config[_0x228701(0x26d)]*0x3c*0x3e8;if(_0x2bb53f+_0x1c8694>_0x1416cf){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x2bb53f+_0x1c8694-_0x1416cf);}else validateOrders(_0x228701(0x318));}}async function sendMetricsTelegram(){const _0x550ec6=_0x4721ce;if(!coinsLoaded){process[_0x550ec6(0x323)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x41ce4c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x43ab39='';if(config[_0x550ec6(0x1d4)])_0x43ab39=_0x550ec6(0x300)+config[_0x550ec6(0x2b0)]+_0x550ec6(0x1cb);else _0x43ab39='<b>Bot\x20'+botID+_0x550ec6(0x1cb);const _0x1f63f6=getKPIs('basecoin'),_0x307856=getKPIs('fiat',config[_0x550ec6(0x2b6)]),_0x4446aa=getKPIs('net-basecoin'),_0x1e2b02=getKPIs(_0x550ec6(0x2e8),config['fiat']);_0x43ab39+=_0x550ec6(0x253),_0x43ab39+=_0x1f63f6[_0x550ec6(0x2e2)]+_0x550ec6(0x2f0)+_0x1f63f6[_0x550ec6(0x225)]+'\x0a',_0x43ab39+=_0x1f63f6['rightTxt']+':\x20'+_0x1f63f6[_0x550ec6(0x2be)]+'%\x0a',_0x43ab39+=_0x307856[_0x550ec6(0x2e2)]+_0x550ec6(0x2f0)+_0x307856[_0x550ec6(0x225)]+'\x0a',_0x43ab39+=_0x307856[_0x550ec6(0x28d)]+':\x20'+_0x307856['change']+'%\x0a',_0x43ab39+=_0x4446aa['leftTxt']+':\x20'+_0x4446aa['value']+'\x20('+config['basecoin']+')\x0a',_0x43ab39+=_0x4446aa[_0x550ec6(0x28d)]+':\x20'+_0x4446aa['change']+_0x550ec6(0x2e5)+config[_0x550ec6(0x1c3)]+')\x0a',_0x43ab39+=_0x1e2b02['leftTxt']+':\x20'+_0x1e2b02[_0x550ec6(0x225)]+'\x20('+config[_0x550ec6(0x2b6)]+')\x0a',_0x43ab39+=_0x1e2b02[_0x550ec6(0x28d)]+':\x20'+_0x1e2b02[_0x550ec6(0x2be)]+_0x550ec6(0x2e5)+config[_0x550ec6(0x2b6)]+')\x0a',_0x43ab39+=_0x550ec6(0x299),process[_0x550ec6(0x323)]({'telegrammsg':_0x43ab39},_0x4c4639=>{});}async function sendPortfolioTelegram(){const _0x2cdb41=_0x4721ce;if(!coinsLoaded){process[_0x2cdb41(0x323)]({'telegrammsg':_0x2cdb41(0x226)},_0x1456ef=>{});return;}let _0xb3d173='';if(config[_0x2cdb41(0x1d4)])_0xb3d173=_0x2cdb41(0x300)+config['botname']+_0x2cdb41(0x242);else _0xb3d173=_0x2cdb41(0x2cb)+botID+_0x2cdb41(0x242);_0xb3d173+=_0x2cdb41(0x253),_0xb3d173+='-------------------------------\x0a',_0xb3d173+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xb3d173+=_0x2cdb41(0x1e1),currentCoins[_0x2cdb41(0x251)](_0x11cfff=>{const _0x2b67d3=_0x2cdb41;_0xb3d173+=_0x11cfff[_0x2b67d3(0x203)][_0x2b67d3(0x241)](0x7)+'|\x20'+formatPad(_0x11cfff[_0x2b67d3(0x20f)],0x2,0x6)+'|\x20'+formatPad(_0x11cfff['target'],0x2,0x6)+'|\x20'+formatPad(_0x11cfff['delta']*0x64,0x2,0x6)+'\x0a';}),_0xb3d173+=_0x2cdb41(0x299),process[_0x2cdb41(0x323)]({'telegrammsg':_0xb3d173},_0x5e316d=>{});}function formatPad(_0x305853,_0x20d222,_0x3d68b7){const _0x2eb354=_0x4721ce,_0x2f0aa2=formatResultString(_0x305853,_0x20d222);return _0x2f0aa2?_0x2f0aa2[_0x2eb354(0x279)](_0x3d68b7):''['padStart'](_0x3d68b7);}function logHistory(_0x462e46,_0xd8482d,_0x291fdb=''){const _0x52a35c=_0x4721ce;let _0x2fdc83={'time':getTimeStamp(),'type':_0x462e46,'event':_0xd8482d};dbLogs[_0x52a35c(0x1d6)](_0x52a35c(0x228))['push'](_0x2fdc83)[_0x52a35c(0x1cf)]();if(_0x291fdb=='')_0x291fdb=_0xd8482d;proxyEmit(_0x52a35c(0x26e),{'log':_0x2fdc83,'summary':_0x291fdb}),process['send']({'telegram':{..._0x2fdc83,'botname':config[_0x52a35c(0x2b0)],'showname':config['showname']}},_0x29cebb=>{}),logger[_0x52a35c(0x278)](''+_0x2fdc83[_0x52a35c(0x26e)]);}function emitHistory(_0x5d3672={}){const _0x417aba=_0x4721ce;Object[_0x417aba(0x22f)](_0x5d3672)[_0x417aba(0x1f1)]==0x0&&(_0x5d3672={'type':['order',_0x417aba(0x26e)],'event':'','page':0x1});if(_0x5d3672[_0x417aba(0x327)][_0x417aba(0x1b3)](_0x417aba(0x26e)))_0x5d3672[_0x417aba(0x327)]['splice'](_0x5d3672[_0x417aba(0x327)]['indexOf'](_0x417aba(0x26e)),0x1,_0x417aba(0x291),_0x417aba(0x2d9),'success');if(dbLogs[_0x417aba(0x22b)](_0x417aba(0x228))[_0x417aba(0x225)]()){let _0x1c2f6d=dbLogs[_0x417aba(0x1d6)](_0x417aba(0x228))[_0x417aba(0x2fe)](_0x433f32=>{const _0x1d66bf=_0x417aba;if(_0x5d3672['type']['length']==0x0)return![];else return _0x5d3672[_0x1d66bf(0x327)][_0x1d66bf(0x1b3)](_0x433f32[_0x1d66bf(0x327)]);})[_0x417aba(0x2fe)](_0x56a874=>{const _0x36f9a5=_0x417aba;if(_0x5d3672[_0x36f9a5(0x26e)]=='')return!![];else return _0x56a874[_0x36f9a5(0x26e)][_0x36f9a5(0x211)]()['includes'](_0x5d3672[_0x36f9a5(0x26e)][_0x36f9a5(0x211)]());})[_0x417aba(0x2ad)](_0x417aba(0x2c5)),_0x17f852=_0x1c2f6d[_0x417aba(0x225)]()[_0x417aba(0x1f1)];_0x1c2f6d=_0x1c2f6d[_0x417aba(0x221)]()['slice']((_0x5d3672[_0x417aba(0x266)]-0x1)*logPageSize,_0x5d3672[_0x417aba(0x266)]*logPageSize-0x1)[_0x417aba(0x221)]()['value'](),proxyEmit(_0x417aba(0x21a),{'logs':_0x1c2f6d,'total':_0x17f852});}else proxyEmit(_0x417aba(0x21a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5d307d){const _0x3cbea8=_0x4721ce;if(dbLogs[_0x3cbea8(0x22b)](_0x3cbea8(0x228))[_0x3cbea8(0x225)]()){const _0x144774=dbLogs[_0x3cbea8(0x1d6)](_0x3cbea8(0x228))[_0x3cbea8(0x2ad)](_0x3cbea8(0x2c5))[_0x3cbea8(0x2fe)](_0x26dc54=>{const _0x29c6a8=_0x3cbea8;return _0x26dc54['type']==_0x29c6a8(0x24f);})[_0x3cbea8(0x225)]();dbLogs['get'](_0x3cbea8(0x228))['remove']()[_0x3cbea8(0x1cf)](),dbLogs[_0x3cbea8(0x1d6)](_0x3cbea8(0x228))[_0x3cbea8(0x1ff)](_0x144774)['write'](),emitHistory(_0x5d307d);}}async function pauseBot(_0x265343=''){const _0x1f3a6a=_0x4721ce,_0xdf89f1=new Date()[_0x1f3a6a(0x1d5)]();if(!lastErrorShown||_0xdf89f1-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xdf89f1;!lastBotPause?(lastBotPause=_0xdf89f1,consecutivePauses=0x1):(_0xdf89f1-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1f3a6a(0x323)]({'stop':_0x1f3a6a(0x271)},_0x586be2=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1f3a6a(0x1d5)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x265343)_0x265343+=_0x1f3a6a(0x2bf);logHistory(_0x1f3a6a(0x291),_0x265343+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x1f3a6a(0x2ea)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x260755=_0x4721ce;process['send']({'stop':_0x260755(0x227)},_0x24dbee=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3a54d5,_0x3b6b27){const _0x2b4957=_0x4721ce;if(_0x3a54d5[_0x2b4957(0x274)]()[_0x2b4957(0x1b3)](_0x2b4957(0x229)))return logHistory('error',config[_0x2b4957(0x20a)]+_0x2b4957(0x277)),![];else{if(_0x3a54d5[_0x2b4957(0x274)]()[_0x2b4957(0x1b3)](_0x2b4957(0x309)))return logHistory(_0x2b4957(0x291),config[_0x2b4957(0x20a)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x3a54d5[_0x2b4957(0x274)]()[_0x2b4957(0x1b3)](_0x2b4957(0x2da)))return logHistory(_0x2b4957(0x291),config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x2b4957(0x291),_0x2b4957(0x1cc)),![];else await handleError(_0x3a54d5,_0x3b6b27);}}}async function handleError(_0x22cef4,_0xede9ab,_0x1ffc8f=''){const _0x59450a=_0x4721ce,_0x30f060=config['exchange']||'Exchange';if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)](_0x59450a(0x30a)))await pauseBot(config[_0x59450a(0x20a)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)](_0x59450a(0x26c)))await pauseBot(config[_0x59450a(0x20a)]+_0x59450a(0x311));else{if(_0x22cef4['toString']()['includes'](_0x59450a(0x1b9)))await pauseBot(config[_0x59450a(0x20a)]+'\x20not\x20responding');else{if(_0x22cef4[_0x59450a(0x274)]()['includes'](_0x59450a(0x20b)))await pauseBot(config['exchange']+_0x59450a(0x1f9));else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)](_0x59450a(0x231)))logHistory('error',_0xede9ab+_0x59450a(0x29c)),logHistory('error',_0x59450a(0x29e)),await killBot();else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)](_0x59450a(0x1ec)))logHistory(_0x59450a(0x291),_0xede9ab+_0x59450a(0x287)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)]('API-key\x20format\x20invalid'))logHistory('error',_0xede9ab+_0x59450a(0x2bf)+config[_0x59450a(0x20a)]+_0x59450a(0x2eb)),logHistory(_0x59450a(0x291),_0x59450a(0x29e)),await killBot();else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x59450a(0x291),_0xede9ab+'\x20|\x20'+config[_0x59450a(0x20a)]+_0x59450a(0x31b)),logHistory(_0x59450a(0x291),_0x59450a(0x29e)),await killBot();else{if(_0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)]('AuthenticationError'))logHistory(_0x59450a(0x291),_0xede9ab+_0x59450a(0x2bf)+config[_0x59450a(0x20a)]+_0x59450a(0x1f6)),logHistory(_0x59450a(0x291),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x22cef4[_0x59450a(0x274)]()[_0x59450a(0x1b3)](_0x59450a(0x2c1))?logHistory(_0x59450a(0x291),_0xede9ab+_0x59450a(0x1e5)+_0x1ffc8f):(logger[_0x59450a(0x278)](_0xede9ab+'\x20|\x20Error\x20details:\x20',_0x22cef4),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}function formatResult(_0x9bdd6,_0x4388c5){const _0x55ddf8=_0x4721ce;return parseFloat(_0x9bdd6[_0x55ddf8(0x2c9)](_0x4388c5));}function formatResultTruncate(_0xb00fc2,_0x3373d7){const _0x16a7d6=_0x4721ce;let _0x35f2eb=formatResultString(_0xb00fc2,0xa),_0x30684f=_0x35f2eb[_0x16a7d6(0x2ba)]('.');return _0x30684f!=-0x1&&(_0x35f2eb=_0x35f2eb[_0x16a7d6(0x322)](0x0,_0x30684f+_0x3373d7+0x1)),Number(_0x35f2eb);}function formatResultString(_0x14f74c,_0xfccbde){const _0xb46bb1=_0x4721ce;let _0x518be0;if(!(''+_0x14f74c)[_0xb46bb1(0x1b3)]('e'))_0x518be0=+(Math[_0xb46bb1(0x2d4)](_0x14f74c+'e+'+_0xfccbde)+'e-'+_0xfccbde);else{let _0x5c6880=(''+_0x14f74c)[_0xb46bb1(0x21d)]('e'),_0x3e9134='';+_0x5c6880[0x1]+_0xfccbde>0x0&&(_0x3e9134='+'),_0x518be0=+(Math['round'](+_0x5c6880[0x0]+'e'+_0x3e9134+(+_0x5c6880[0x1]+_0xfccbde))+'e-'+_0xfccbde);}return Number(_0x518be0)[_0xb46bb1(0x2c9)](_0xfccbde);}function getServerTime(){const _0x3e3855=_0x4721ce,_0x5898fd=new Date();return _0x5898fd[_0x3e3855(0x1e3)]()+'/'+(_0x5898fd[_0x3e3855(0x2a4)]()+0x1)[_0x3e3855(0x274)]()[_0x3e3855(0x279)](0x2,'0')+'/'+_0x5898fd['getDate']()['toString']()[_0x3e3855(0x279)](0x2,'0')+'\x20'+_0x5898fd[_0x3e3855(0x1b8)]()[_0x3e3855(0x274)]()['padStart'](0x2,'0')+':'+_0x5898fd[_0x3e3855(0x1fe)]()['toString']()[_0x3e3855(0x279)](0x2,'0')+':'+_0x5898fd[_0x3e3855(0x28c)]()[_0x3e3855(0x274)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x46afab=_0x4721ce,_0x5a9c14=shiftedTime();return _0x5a9c14[_0x46afab(0x1e3)]()+'/'+(_0x5a9c14[_0x46afab(0x2a4)]()+0x1)[_0x46afab(0x274)]()[_0x46afab(0x279)](0x2,'0')+'/'+_0x5a9c14['getDate']()[_0x46afab(0x274)]()[_0x46afab(0x279)](0x2,'0')+'\x20'+_0x5a9c14[_0x46afab(0x1b8)]()[_0x46afab(0x274)]()[_0x46afab(0x279)](0x2,'0')+':'+_0x5a9c14[_0x46afab(0x1fe)]()[_0x46afab(0x274)]()[_0x46afab(0x279)](0x2,'0')+':'+_0x5a9c14[_0x46afab(0x28c)]()[_0x46afab(0x274)]()['padStart'](0x2,'0');}function getDate(){const _0x46deeb=_0x4721ce,_0x16456a=shiftedTime();return _0x16456a[_0x46deeb(0x1e3)]()+'/'+(_0x16456a[_0x46deeb(0x2a4)]()+0x1)[_0x46deeb(0x274)]()['padStart'](0x2,'0')+'/'+_0x16456a[_0x46deeb(0x20d)]()[_0x46deeb(0x274)]()[_0x46deeb(0x279)](0x2,'0');}function getHour(){const _0x96a8e7=_0x4721ce,_0x4a789d=shiftedTime();return _0x4a789d[_0x96a8e7(0x1b8)]()[_0x96a8e7(0x274)]()['padStart'](0x2,'0');}function sleep(_0x192b24){return new Promise(_0xd4961b=>setTimeout(_0xd4961b,_0x192b24));}function shiftedTime(){const _0x562668=_0x4721ce,_0x2a63c7=new Date();let _0x28ab65=_0x2a63c7;if(config&&config[_0x562668(0x2ac)]!==0x0)_0x28ab65=fns[_0x562668(0x2a6)](_0x2a63c7,{'hours':config[_0x562668(0x2ac)]});return _0x28ab65;}function timer(_0x3854e9){const _0x490f3a=_0x4721ce,_0x465549=new Date();!lasttime?console['log'](_0x490f3a(0x31d),_0x3854e9,_0x465549):console[_0x490f3a(0x1e2)](_0x490f3a(0x31d),_0x3854e9,(_0x465549-lasttime)/0x3e8),lasttime=_0x465549;}