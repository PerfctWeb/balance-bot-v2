const _0x1c9209=_0x16c1;(function(_0x548466,_0x3e5cb5){const _0x46e984=_0x16c1,_0x5dd365=_0x548466();while(!![]){try{const _0x4dde76=parseInt(_0x46e984(0x184))/0x1*(-parseInt(_0x46e984(0x19f))/0x2)+-parseInt(_0x46e984(0xb9))/0x3*(-parseInt(_0x46e984(0x182))/0x4)+parseInt(_0x46e984(0x17e))/0x5*(-parseInt(_0x46e984(0xd7))/0x6)+parseInt(_0x46e984(0x1e2))/0x7+parseInt(_0x46e984(0x21f))/0x8+parseInt(_0x46e984(0xd6))/0x9+-parseInt(_0x46e984(0xd3))/0xa*(parseInt(_0x46e984(0x110))/0xb);if(_0x4dde76===_0x3e5cb5)break;else _0x5dd365['push'](_0x5dd365['shift']());}catch(_0x926dc6){_0x5dd365['push'](_0x5dd365['shift']());}}}(_0x2311,0x61925));const _0x470c82=function(){let _0x319499=!![];return function(_0x27eec8,_0x20a722){const _0x2c0297=_0x319499?function(){if(_0x20a722){const _0x5da159=_0x20a722['apply'](_0x27eec8,arguments);return _0x20a722=null,_0x5da159;}}:function(){};return _0x319499=![],_0x2c0297;};}(),_0x3e15ff=_0x470c82(this,function(){const _0x87f11=_0x16c1;return _0x3e15ff[_0x87f11(0x18f)]()[_0x87f11(0xae)](_0x87f11(0xbd))[_0x87f11(0x18f)]()[_0x87f11(0x254)](_0x3e15ff)['search']('(((.+)+)+)+$');});_0x3e15ff();'use strict';const ccxt=require(_0x1c9209(0x15b)),low=require('lowdb'),FileSync=require(_0x1c9209(0x195)),fs=require('fs'),fns=require(_0x1c9209(0x168)),forge=require('node-forge'),util=require(_0x1c9209(0xd5)),argv=require(_0x1c9209(0x23f))(process[_0x1c9209(0x1c2)][_0x1c9209(0x13a)](0x2))[_0x1c9209(0x1c2)],path=require(_0x1c9209(0x21a)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1c9209(0xcf),_0x1c9209(0xa7),'TUSD','USDT',_0x1c9209(0xc9),_0x1c9209(0x216)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1c9209(0x171)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1c9209(0x1af)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1c9209(0x1ba)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')[_0x1c9209(0xec)],environment=require(_0x1c9209(0x10b))[_0x1c9209(0x250)]||_0x1c9209(0x11e),botID=process[_0x1c9209(0x1c2)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x1c9209(0x9f)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x1c9209(0x1c2)][0x3]||'',configpath=userID?_0x1c9209(0x1f6)+userID+'/':'./config/',logspath=userID?_0x1c9209(0x1ce)+userID+'/':'./logs/',loggerfile=fs[_0x1c9209(0xa9)](logspath+_0x1c9209(0x256),{'flags':'a'});!fs[_0x1c9209(0xef)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1c9209(0xef)](logspath)&&fs[_0x1c9209(0x247)](logspath);const configfile=configpath+_0x1c9209(0x1c8)+botID+_0x1c9209(0x132),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x1c9209(0x253),coinresultsfile=configpath+_0x1c9209(0x1c8)+botID+_0x1c9209(0x1cf),settingsfile=configpath+_0x1c9209(0x22c),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1c9209(0x24a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1c9209(0x1cd)]({'logs':[],'version':serverversion})[_0x1c9209(0x21e)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1c9209(0x1cd)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1c9209(0x1cd)]({'bot':[],'version':serverversion})[_0x1c9209(0x21e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1c9209(0x1cd)]({'coins':[],'version':serverversion})[_0x1c9209(0x21e)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3a7528=>{console['log'](_0x3a7528);},'simple':_0x165ace=>{const _0x2c80e3=_0x1c9209;console[_0x2c80e3(0x9f)](_0x165ace),loggerfile[_0x2c80e3(0x21e)](util[_0x2c80e3(0x1ed)](_0x165ace)+'\x0a');},'full':async(_0x391ff2,_0x396456='')=>{const _0x34e41=_0x1c9209;let _0x1ca6f6;if(config['showname'])_0x1ca6f6=getTimeStamp()+':\x20'+config[_0x34e41(0xa1)]+'\x20>\x20'+_0x391ff2;else _0x1ca6f6=getTimeStamp()+':\x20Bot\x20'+botID+_0x34e41(0x16a)+_0x391ff2;console['log'](_0x1ca6f6),loggerfile[_0x34e41(0x21e)](util[_0x34e41(0x1ed)](_0x1ca6f6)+'\x0a'),_0x396456&&(console['log'](_0x396456),loggerfile['write'](util[_0x34e41(0x1ed)](_0x396456)+'\x0a'));},'debug':async(_0x2a1f88,_0x5a80a7='')=>{const _0x2b54be=_0x1c9209;let _0x2cc326;if(config[_0x2b54be(0xa2)])_0x2cc326=getTimeStamp()+':\x20'+config[_0x2b54be(0xa1)]+_0x2b54be(0x1c3)+_0x2a1f88;else _0x2cc326=getTimeStamp()+_0x2b54be(0x173)+botID+_0x2b54be(0x1c3)+_0x2a1f88;if(debugging)console[_0x2b54be(0x9f)](_0x2cc326);loggerfile[_0x2b54be(0x21e)](util['format'](_0x2cc326)+'\x0a');if(_0x5a80a7){if(debugging)console[_0x2b54be(0x9f)](_0x5a80a7);loggerfile[_0x2b54be(0x21e)](util[_0x2b54be(0x1ed)](_0x5a80a7)+'\x0a');}}};process['on'](_0x1c9209(0x1ac),function(_0x17ee09){const _0xfc45f6=_0x1c9209;handleError(_0x17ee09,_0xfc45f6(0x1ac));});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x1c9209(0x1d7)]);settings['onepagemode']!=config[_0x1c9209(0x1a0)]&&updateOnepagemode(settings[_0x1c9209(0x1a0)]);(settings['marketcapApi']&&!config[_0x1c9209(0x17b)]||!settings['marketcapApi']&&config[_0x1c9209(0x17b)])&&updateMarketcapApi(settings['marketcapApi']);process['send']({'started':_0x1c9209(0x105)},_0x3cf3ba=>{}),initializeProcessListeners();function proxyEmit(_0x4daa8c,_0x40d884=null){const _0x9c579=_0x1c9209;process[_0x9c579(0x1c9)]({'function':_0x4daa8c,'args':_0x40d884},_0x19762a=>{});}function initializeProcessListeners(){process['on']('message',_0x4f8c09=>{const _0x4115ee=_0x16c1;switch(Object[_0x4115ee(0x10f)](_0x4f8c09)[0x0]){case _0x4115ee(0x1d7):_0x4f8c09[_0x4115ee(0x1d7)]!=undefined&&(settings[_0x4115ee(0x1d7)]=_0x4f8c09[_0x4115ee(0x1d7)],updateTimeshift(settings['timeshift']));break;case _0x4115ee(0x1a0):_0x4f8c09['onepagemode']!=undefined&&(settings['onepagemode']=_0x4f8c09[_0x4115ee(0x1a0)],updateOnepagemode(settings[_0x4115ee(0x1a0)]));break;case'marketcapApi':_0x4f8c09[_0x4115ee(0x17b)]!=undefined&&(settings['marketcapApi']=_0x4f8c09[_0x4115ee(0x17b)],updateMarketcapApi(settings['marketcapApi']));break;case _0x4115ee(0x166):_0x4f8c09['bots']!=undefined&&(bots=JSON['parse'](_0x4f8c09[_0x4115ee(0x166)]),proxyEmit(_0x4115ee(0x166),bots));break;case _0x4115ee(0xb5):switch(_0x4f8c09[_0x4115ee(0xb5)]){case _0x4115ee(0xc2):initclient();break;case _0x4115ee(0x178):toggleBotMode();break;case'emitHistory':emitHistory(_0x4f8c09[_0x4115ee(0x244)]);break;case _0x4115ee(0x1a7):deleteHistoryAlerts(_0x4f8c09[_0x4115ee(0x244)]);break;case _0x4115ee(0x133):getPortfolio(_0x4f8c09[_0x4115ee(0x244)]);break;case _0x4115ee(0x117):storeConfiguration(_0x4f8c09[_0x4115ee(0x244)]);break;case _0x4115ee(0x248):storeHeadless(_0x4f8c09[_0x4115ee(0x244)]);break;case'storeFiat':storeFiat(_0x4f8c09[_0x4115ee(0x244)]);break;case _0x4115ee(0x148):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x4115ee(0x1d5):placeOrder(_0x4f8c09['args']);break;case'cancelLoading':cancelLoading();break;case _0x4115ee(0x190):showConfig();break;case _0x4115ee(0x163):sendMetricsTelegram();break;case _0x4115ee(0x1b9):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x13462c=![]){const _0xb00329=_0x1c9209;logger[_0xb00329(0xa3)](_0xb00329(0x1e7)+(_0x13462c?'exchange\x20reload':'no\x20exchange\x20reloaded')+_0xb00329(0x1e1)+config[_0xb00329(0x121)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x13462c)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0xb00329(0xac)]!=_0xb00329(0x1db)){loadingProgress=0x0;_0x13462c&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xb00329(0x25a),emittedConfiguration()),initialPerformanceStored=![]);const _0x21ab8d=await getCoins();[currentCoins,currentCoinsAll]=_0x21ab8d,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0xb00329(0x21c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xb00329(0x215)]==0x0&&allOpenOrders[_0xb00329(0x215)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x10a969=![]){const _0x201c4f=_0x1c9209;logger['debug'](_0x201c4f(0xe6)+(_0x10a969?_0x201c4f(0x22e):_0x201c4f(0xf8))+_0x201c4f(0x186)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x10a969){getBalances();return;}coinsLoaded=![];if(config[_0x201c4f(0xac)]!=''&&config[_0x201c4f(0xac)]!=_0x201c4f(0x1db)){loadingProgress=0x1;const _0x4c02c5=await getCoins();[currentCoins,currentCoinsAll]=_0x4c02c5,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x201c4f(0xa3)](_0x201c4f(0x21c)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x201c4f(0x215)]==0x0&&allOpenOrders[_0x201c4f(0x215)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x7e96b0){const _0x480101=_0x1c9209;let _0x35158e=![];if(_0x7e96b0)_0x35158e=!![];let _0x533abb;_0x35158e?_0x533abb=_0x7e96b0[_0x480101(0x130)](_0x39b430=>_0x39b430['coin']):_0x533abb=currentCoinsAll[_0x480101(0x130)](_0x1e1664=>_0x1e1664[_0x480101(0x1a3)]);if(!config[_0x480101(0x17b)]||!_0x35158e&&!config[_0x480101(0x183)]||_0x533abb[_0x480101(0x215)]==0x0)return;let _0x1ff636=null;try{_0x1ff636=await axios['get'](_0x480101(0xfd),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x480101(0x17b)]},'params':{'symbol':_0x533abb[_0x480101(0x18f)]()}});}catch(_0x1f1c92){_0x1ff636=null,_0x1f1c92[_0x480101(0x18f)]()['includes'](_0x480101(0x13c))?(config[_0x480101(0x17b)]=![],updateConfig(),proxyEmit(_0x480101(0x25a),emittedConfiguration()),logHistory('error',_0x480101(0x180))):(logHistory(_0x480101(0x1f5),_0x480101(0x22d)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x480101(0xa3)]('Error\x20details:',_0x1f1c92[_0x480101(0x18f)]()+_0x480101(0x196)+_0x1f1c92[_0x480101(0xbb)]));}if(_0x1ff636){let _0x8599df=0x0;const _0x448878=_0x1ff636[_0x480101(0x185)];_0x533abb[_0x480101(0x223)](_0x2e7afd=>{const _0x19d743=_0x480101;if(_0x448878['data'][_0x2e7afd][0x0])_0x8599df+=_0x448878[_0x19d743(0x185)][_0x2e7afd][0x0][_0x19d743(0xe0)][_0x19d743(0xcf)][_0x19d743(0x232)];}),_0x533abb[_0x480101(0x223)](_0x565564=>{const _0x25e561=_0x480101,_0x39ea78=_0x448878['data'][_0x565564][0x0]?_0x448878[_0x25e561(0x185)][_0x565564][0x0][_0x25e561(0xe0)][_0x25e561(0xcf)][_0x25e561(0x232)]:0x0;if(_0x35158e){const _0x27dcf2=_0x7e96b0['find'](_0x258d07=>_0x258d07[_0x25e561(0x1a3)]==_0x565564);_0x27dcf2&&(_0x27dcf2[_0x25e561(0xd8)]=_0x39ea78);}else{const _0x527185=currentCoins[_0x25e561(0x1c7)](_0x48c562=>_0x48c562[_0x25e561(0x1a3)]==_0x565564);_0x527185&&(_0x527185[_0x25e561(0xd8)]=_0x39ea78);const _0x81ab6=currentCoinsAll[_0x25e561(0x1c7)](_0x1e761e=>_0x1e761e['coin']==_0x565564);_0x81ab6&&(_0x81ab6[_0x25e561(0xd8)]=_0x39ea78);}}),!_0x35158e&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x58913c=_0x1c9209,_0x3733ba=0x2;let _0x7de35e=0x0,_0x3fd0e4=0x0,_0x309606=0x0,_0x449d51=0x0,_0x208531=0x0;config[_0x58913c(0x1b2)]['forEach'](_0x8aea3d=>{const _0x34630b=_0x58913c;if(!_0x8aea3d[_0x34630b(0x165)]){_0x309606++,_0x7de35e+=_0x8aea3d[_0x34630b(0x16e)];if(_0x8aea3d['slider']===-0x1){_0x7de35e++;const _0x5bd69e=currentCoinsAll[_0x34630b(0x1c7)](_0xef99b0=>_0xef99b0[_0x34630b(0x1a3)]==_0x8aea3d[_0x34630b(0x1a3)]);_0x5bd69e&&(_0x449d51+=_0x5bd69e['marketcap'],_0x208531+=Math['sqrt'](_0x5bd69e[_0x34630b(0xd8)]));}if(_0x8aea3d[_0x34630b(0x16e)]!==-0x1)_0x3fd0e4++;}});let _0x509659;const _0x5a1efc=0x64-_0x7de35e,_0xec8211=_0x309606-_0x3fd0e4;_0x509659=_0xec8211===0x0?_0x7de35e:Math['max'](0x64,_0x7de35e),config[_0x58913c(0x1b2)]['forEach'](_0x550d41=>{const _0x469b97=_0x58913c,_0x1ed835=currentCoinsAll[_0x469b97(0x1c7)](_0x12564b=>_0x12564b[_0x469b97(0x1a3)]==_0x550d41[_0x469b97(0x1a3)]);_0x1ed835&&(_0x550d41[_0x469b97(0xd8)]=_0x1ed835[_0x469b97(0xd8)]);if(!_0x550d41[_0x469b97(0x165)]){if(_0x509659<=0x64){if(_0x550d41['slider']===-0x1){if(_0x449d51!==0x0&&config['marketcapEnabled']){if(_0x1ed835){if(config[_0x469b97(0x183)]==_0x469b97(0xd8))_0x550d41['distribution']=(_0x5a1efc/(_0x449d51/_0x1ed835['marketcap']))[_0x469b97(0x17d)](_0x3733ba);else config[_0x469b97(0x183)]==_0x469b97(0x14b)&&(_0x550d41['distribution']=(_0x5a1efc/(_0x208531/Math[_0x469b97(0xe2)](_0x1ed835['marketcap'])))['toFixed'](_0x3733ba));}}}}}}),updateConfig();}function updateConfig(){const _0x442fe4=_0x1c9209;let _0x4af968=dbConfig[_0x442fe4(0x124)]('bot')[_0x442fe4(0x1c7)]({'botID':botID})[_0x442fe4(0x239)]();_0x4af968&&dbConfig[_0x442fe4(0x124)](_0x442fe4(0x160))[_0x442fe4(0x1c7)]({'botID':botID})['assign'](config)['write']();}function logMemory(){const _0x57f676=_0x1c9209;if(environment!=_0x57f676(0x12f))return;const _0x481bd7=process[_0x57f676(0x129)]()[_0x57f676(0x242)]/0x400/0x400;logger[_0x57f676(0xa3)](_0x57f676(0x1f4)+process['pid']+_0x57f676(0xfa)+formatResult(_0x481bd7,0x1)+_0x57f676(0xcd));}async function startScheduler(){const _0x53fcf7=_0x1c9209,_0x4b3a6f=shiftedTime()[_0x53fcf7(0xf6)]();getMarketCap(),_0x4b3a6f==0x1&&logMemory(),(_0x4b3a6f==0x2||_0x4b3a6f==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4aa507=![]){const _0x389eb5=_0x1c9209;logger[_0x389eb5(0xa3)](_0x389eb5(0x207));if(!_0x4aa507)while(lockOrders!=ORDERS[_0x389eb5(0x1af)]||coolingDown){await sleep(0x3e8);}process['send']({'stop':'restart'},_0x3a10c4=>{});}async function initExchange(_0x19e7b8=config[_0x1c9209(0x121)],_0x10cd04=config[_0x1c9209(0xac)],_0x8c3cfb=config['apiSecret'],_0x137dfe=config[_0x1c9209(0xd9)]){const _0x12bc9d=_0x1c9209;if(exchange){logger['debug'](_0x12bc9d(0x9e));return;}logger[_0x12bc9d(0xa3)](_0x12bc9d(0x115));!supportedExchanges()[_0x12bc9d(0x174)](_0x19e7b8)&&(logHistory(_0x12bc9d(0x1f5),_0x12bc9d(0xda)+_0x19e7b8+'\x20exchange'),killBot());const _0xab393c=ccxt[_0x12bc9d(0x1e9)][_0x19e7b8['toLowerCase']()];exchange=new _0xab393c({'apiKey':_0x10cd04,'secret':_0x8c3cfb,'options':{'defaultType':_0x12bc9d(0x1b8)}});if(_0x137dfe)exchange[_0x12bc9d(0xf2)]=_0x137dfe;}function updateExchange(_0x21d86f,_0x115634,_0xb75438=null){const _0x58289f=_0x1c9209;exchange[_0x58289f(0xac)]=_0x21d86f,exchange[_0x58289f(0x12a)]=_0x115634,exchange[_0x58289f(0xd9)]=_0xb75438,logger['debug'](_0x58289f(0x209));}function setStableCoins(){const _0x5c6209=_0x1c9209;let _0x58f72e=config[_0x5c6209(0x170)]==_0x5c6209(0x202)?'ETH':config[_0x5c6209(0x170)]==_0x5c6209(0x149)?'PAXG':_0x5c6209(0x211),_0x347139=allSymbols[_0x5c6209(0x174)](_0x58f72e+_0x5c6209(0x24d))?_0x5c6209(0xcf):allSymbols[_0x5c6209(0x174)](_0x58f72e+_0x5c6209(0x16f))?_0x5c6209(0xd4):_0x5c6209(0x1e8),_0x4af5a2=allSymbols['includes'](_0x58f72e+_0x5c6209(0x226))?_0x5c6209(0x1e8):_0x347139;enableFiatToggle=!![],_0x347139==_0x5c6209(0x1e8)&&(enableFiatToggle=![],storeFiat(_0x5c6209(0x1e8))),_0x4af5a2!=_0x5c6209(0x1e8)&&(enableFiatToggle=![],storeFiat(_0x5c6209(0xcf))),stablecoins={'eur':{'coin':''+_0x58f72e+_0x4af5a2,'symbol':_0x58f72e+'/'+_0x4af5a2},'usd':{'coin':''+_0x58f72e+_0x347139,'symbol':_0x58f72e+'/'+_0x347139}};}async function initwsCcxt(){const _0x16c1c3=_0x1c9209;initCycle++;const _0x12d344=initCycle;let _0x5494d7=[];config[_0x16c1c3(0x1b2)][_0x16c1c3(0x223)](_0x2dd9c3=>{const _0x48245c=_0x16c1c3;if(!_0x2dd9c3[_0x48245c(0x165)]&&_0x2dd9c3[_0x48245c(0x1a3)]!=config['basecoin'])_0x5494d7[_0x48245c(0x1b3)](_0x2dd9c3[_0x48245c(0x119)]);});if(!_0x5494d7[_0x16c1c3(0x174)](stablecoins[_0x16c1c3(0x17a)][_0x16c1c3(0x119)]))_0x5494d7[_0x16c1c3(0x1b3)](stablecoins[_0x16c1c3(0x17a)][_0x16c1c3(0x119)]);if(!_0x5494d7[_0x16c1c3(0x174)](stablecoins[_0x16c1c3(0x1d6)][_0x16c1c3(0x119)]))_0x5494d7[_0x16c1c3(0x1b3)](stablecoins[_0x16c1c3(0x1d6)][_0x16c1c3(0x119)]);if(config[_0x16c1c3(0x121)][_0x16c1c3(0x1ff)]('Binance')&&config[_0x16c1c3(0x170)]!=_0x16c1c3(0x149)){if(!_0x5494d7[_0x16c1c3(0x174)](_0x16c1c3(0x1f8)+config[_0x16c1c3(0x170)]))_0x5494d7[_0x16c1c3(0x1b3)](_0x16c1c3(0x1f8)+config['basecoin']);}loadCoins(_0x5494d7),_0x5494d7=validateSymbols(_0x5494d7);const _0x4f0283=async _0x45b66a=>{const _0x4151b3=_0x16c1c3;let _0x168309;try{const _0x2c68c2=await getTickers(_0x45b66a);Object[_0x4151b3(0x1c6)](_0x2c68c2)[_0x4151b3(0x223)](_0x2aa107=>{const _0xaf51f0=_0x4151b3;_0x168309=_0x2aa107[0x1][_0xaf51f0(0x119)],gTicker[noslash(_0x168309)]=_0x2aa107[0x1][_0xaf51f0(0x1aa)],gChange[_0x168309]=_0x2aa107[0x1][_0xaf51f0(0xb4)];});}catch(_0x49ef8e){await handleError(_0x49ef8e,_0x4151b3(0xc7),_0x168309);}},_0x259451=async _0x3644be=>{const _0x1a711a=_0x16c1c3;while(initCycle==_0x12d344){if(!botPaused)try{const _0x5debe7=await exchange[_0x1a711a(0x249)](_0x3644be);gTicker[noslash(_0x5debe7[0x0][_0x1a711a(0x119)])]=_0x5debe7[0x0][_0x1a711a(0xf3)];}catch(_0x285b78){if(!exchangeStopped)await handleError(_0x285b78,_0x1a711a(0x259),_0x3644be);}else await sleep(0x64);}},_0x317329=async _0xa9f3d3=>{const _0x562752=_0x16c1c3;while(initCycle==_0x12d344){if(!botPaused)try{const _0x27d9af=await exchange['watchTradesForSymbols'](_0xa9f3d3),_0x6ef6d5=_0x27d9af[_0x562752(0xad)]();gTicker[noslash(_0x6ef6d5[_0x562752(0x119)])]=_0x6ef6d5[_0x562752(0xf3)];}catch(_0x2c2916){if(!exchangeStopped)await handleError(_0x2c2916,_0x562752(0x136),_0xa9f3d3['toString']());}else await sleep(0x64);}},_0x22eee8=async _0x53c237=>{const _0x3ce850=_0x16c1c3;while(initCycle==_0x12d344){if(!botPaused){let _0xe82419;try{await sleep(0x3c*0x3e8);const _0x67b5ba=await getTickers(_0x53c237);Object[_0x3ce850(0x1c6)](_0x67b5ba)['forEach'](_0x50a5ee=>{const _0x4d160f=_0x3ce850;_0xe82419=_0x50a5ee[0x1][_0x4d160f(0x119)],gChange[_0xe82419]=_0x50a5ee[0x1][_0x4d160f(0xb4)];});}catch(_0x373e5d){if(!exchangeStopped)await handleError(_0x373e5d,_0x3ce850(0x194),_0xe82419);}}else await sleep(0x64);}},_0x4b4b38=async _0x40e79e=>{const _0x466a0c=_0x16c1c3;while(initCycle==_0x12d344){if(!botPaused)try{const _0x1da394=await exchange[_0x466a0c(0x15c)](_0x40e79e);initCycle==_0x12d344&&_0x1da394[_0x466a0c(0x223)](_0x5bd83e=>{updateNumberCoinsCcxt(_0x5bd83e);});}catch(_0x370731){if(!exchangeStopped)await handleError(_0x370731,_0x466a0c(0x1f7));}else await sleep(0x64);}};_0x4f0283(_0x5494d7),_0x22eee8(_0x5494d7),exchange['has']['watchTradesForSymbols']&&!(config[_0x16c1c3(0x121)]==_0x16c1c3(0x192)&&_0x5494d7['length']>0xa)?_0x317329(_0x5494d7):_0x5494d7[_0x16c1c3(0x223)](_0x1ec425=>{_0x259451(_0x1ec425);}),_0x5494d7[_0x16c1c3(0x223)](_0x5e4555=>{_0x4b4b38(_0x5e4555);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x46e680){const _0xdbee20=_0x1c9209;let _0x49a371={};try{if(config[_0xdbee20(0x121)]!='Cryptocom')_0x49a371=await exchange[_0xdbee20(0x16b)](_0x46e680);else for(const _0x4b20df of _0x46e680){const _0x9cca28=await exchange[_0xdbee20(0x19a)](_0x4b20df);_0x49a371[_0x4b20df]=_0x9cca28;}return _0x49a371;}catch(_0x2fa450){throw _0x2fa450;}}function setBlockTransactionDetection(_0x98df72){const _0x2b9607=_0x1c9209;blockTransactionDetection=_0x98df72,logger[_0x2b9607(0xa3)](_0x2b9607(0x1ad)+blockTransactionDetection);}async function detectLiquidityChange(_0x47989c=0x0){const _0x250dc6=_0x1c9209;transactionDetectionOngoing=!![];try{const _0x3f671f=await getCoins(_0x47989c),[_0x4f4cbe,_0x5805fd]=_0x3f671f;let _0x44860a=[];currentCoins['forEach'](_0x409cf0=>{const _0x4bfa71=_0x16c1,_0x28fe1f=_0x4f4cbe[_0x4bfa71(0x1c7)](_0x15084a=>_0x15084a['coin']==_0x409cf0[_0x4bfa71(0x1a3)]);if(_0x28fe1f){if(_0x409cf0[_0x4bfa71(0xff)]!=_0x28fe1f['number']){let _0x59ef75;if(_0x409cf0[_0x4bfa71(0x1a3)]!=config[_0x4bfa71(0x170)]){const _0x225a1e=gTicker[noslash(_0x409cf0[_0x4bfa71(0x119)])];_0x59ef75=_0x409cf0[_0x4bfa71(0x14f)]?0x1/_0x225a1e:_0x225a1e;}else _0x59ef75=0x1;_0x44860a[_0x4bfa71(0x1b3)]({'coin':_0x409cf0[_0x4bfa71(0x1a3)],'symbol':_0x409cf0['symbol'],'price':_0x59ef75,'number':Number(formatResult(_0x28fe1f[_0x4bfa71(0xff)]-_0x409cf0['number'],0x8)),'basecoinvalue':_0x59ef75*(_0x28fe1f[_0x4bfa71(0xff)]-_0x409cf0['number'])});}}});if(_0x44860a[_0x250dc6(0x215)]>0x0&&!blockTransactionDetection){for(const _0x493371 of _0x44860a){if(config[_0x250dc6(0x138)]){logger[_0x250dc6(0xa3)](_0x250dc6(0xe8)+_0x493371[_0x250dc6(0x1b1)]+_0x250dc6(0x1b4)+lastFees[_0x250dc6(0x1bc)]);if(lastFees['highest']==0x0||Math['abs'](_0x493371[_0x250dc6(0x1b1)])>lastFees[_0x250dc6(0x1bc)]*0x3){if(config[_0x250dc6(0x138)]==_0x250dc6(0x1d2)){delete _0x493371[_0x250dc6(0x119)],delete _0x493371[_0x250dc6(0x1b1)];let _0x5629e3=[],_0x1da7a2=[...config[_0x250dc6(0xc3)]]||[],_0x5bb233=config['liquidity'];_0x1da7a2[_0x250dc6(0xa0)]((_0x44b87b,_0x27b47e)=>_0x44b87b[_0x250dc6(0x15a)]>_0x27b47e['date']?-0x1:_0x27b47e[_0x250dc6(0x15a)]>_0x44b87b[_0x250dc6(0x15a)]?0x1:0x0);const _0x430148=getDate();if(_0x1da7a2[0x0]){const _0x171253=fns[_0x250dc6(0x1bf)](_0x1da7a2[0x0][_0x250dc6(0x15a)],_0x250dc6(0x252),new Date()),_0x3c1265=fns[_0x250dc6(0x1bf)](_0x430148,'yyyy/MM/dd',new Date());if(fns[_0x250dc6(0xea)](_0x171253,_0x3c1265)){_0x5629e3=_0x1da7a2[0x0]['changes'];const _0x5c5741=_0x5629e3[_0x250dc6(0x1c7)](_0x452d9c=>_0x452d9c[_0x250dc6(0x1a3)]==_0x493371['coin']);_0x5c5741?(_0x5c5741[_0x250dc6(0xff)]+=_0x493371[_0x250dc6(0xff)],_0x5c5741[_0x250dc6(0xff)]==0x0&&(_0x5629e3=_0x5629e3['filter'](_0x2d547f=>{const _0x538675=_0x250dc6;return _0x2d547f[_0x538675(0x1a3)]!=_0x493371[_0x538675(0x1a3)];}))):_0x5629e3[_0x250dc6(0x1b3)](_0x493371);const _0x2128ba=_0x5bb233[_0x250dc6(0x1c7)](_0x18af9a=>_0x18af9a[_0x250dc6(0x15a)]==_0x430148);_0x2128ba['changes']=_0x5629e3;}else _0x5bb233[_0x250dc6(0x1b3)]({'date':_0x430148,'changes':[_0x493371]});}const _0x51d497=_0x5bb233[_0x250dc6(0x1c7)](_0x392178=>_0x392178[_0x250dc6(0x15a)]==_0x430148);if(_0x51d497){let _0x22bf87=!![];_0x51d497[_0x250dc6(0x143)]['forEach'](_0x55baa4=>{if(_0x55baa4['number']!=0x0)_0x22bf87=![];}),_0x22bf87&&(_0x5bb233=_0x5bb233[_0x250dc6(0x25f)](_0x76329=>{const _0x233731=_0x250dc6;return _0x76329[_0x233731(0x15a)]!=_0x430148;}));}let _0x3090cc=dbConfig[_0x250dc6(0x124)]('bot')[_0x250dc6(0x1c7)]({'botID':botID})[_0x250dc6(0x239)]();_0x3090cc&&(dbConfig[_0x250dc6(0x124)]('bot')['find']({'botID':botID})[_0x250dc6(0xf0)]({'liquidity':_0x5bb233})[_0x250dc6(0x21e)](),config[_0x250dc6(0xc3)]=_0x5bb233);logHistory('success',_0x250dc6(0xa6)+Math[_0x250dc6(0xa8)](_0x493371[_0x250dc6(0xff)])+'\x20'+_0x493371[_0x250dc6(0x1a3)]+'\x20'+(_0x493371['number']>0x0?_0x250dc6(0x12e):'removed')+_0x250dc6(0x228)),proxyEmit(_0x250dc6(0x25a),emittedConfiguration());const _0x24b33e=getNormalizedPerformance();emitPerformance(_0x24b33e),getStartingBalances(_0x24b33e),logger[_0x250dc6(0xa3)](_0x250dc6(0x20a));}else config[_0x250dc6(0x138)]=='switch-manual'&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x250dc6(0x199),_0x250dc6(0xa6)+Math[_0x250dc6(0xa8)](_0x493371[_0x250dc6(0xff)])+'\x20'+_0x493371[_0x250dc6(0x1a3)]+'\x20'+(_0x493371[_0x250dc6(0xff)]>0x0?_0x250dc6(0x12e):_0x250dc6(0x227))+_0x250dc6(0x18b))):logger[_0x250dc6(0xa3)]('Portfolio\x20change\x20detected:\x20'+Math[_0x250dc6(0xa8)](_0x493371[_0x250dc6(0xff)])+'\x20'+_0x493371[_0x250dc6(0x1a3)]+'\x20'+(_0x493371[_0x250dc6(0xff)]>0x0?_0x250dc6(0x12e):_0x250dc6(0x227))+_0x250dc6(0x10c)));}else logger[_0x250dc6(0xa3)](_0x250dc6(0x1a4)+Math[_0x250dc6(0xa8)](_0x493371[_0x250dc6(0xff)])+'\x20'+_0x493371[_0x250dc6(0x1a3)]+'\x20'+(_0x493371[_0x250dc6(0xff)]>0x0?_0x250dc6(0x12e):_0x250dc6(0x227)));}else logger[_0x250dc6(0xa3)](_0x250dc6(0xa6)+Math[_0x250dc6(0xa8)](_0x493371['number'])+'\x20'+_0x493371[_0x250dc6(0x1a3)]+'\x20'+(_0x493371[_0x250dc6(0xff)]>0x0?_0x250dc6(0x12e):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x4f4cbe,currentCoinsAll=_0x5805fd;}}catch(_0x2d3af6){if(!exchangeStopped)await handleError(_0x2d3af6,_0x250dc6(0x1ae));}transactionDetectionOngoing=![];}function _0x16c1(_0x84d43d,_0x5172d8){const _0x55348=_0x2311();return _0x16c1=function(_0x3e15ff,_0x470c82){_0x3e15ff=_0x3e15ff-0x9d;let _0x2311f0=_0x55348[_0x3e15ff];return _0x2311f0;},_0x16c1(_0x84d43d,_0x5172d8);}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5c553e=_0x1c9209;logger[_0x5c553e(0xa3)](_0x5c553e(0x1a2));try{markets=await exchange[_0x5c553e(0x135)]();}catch(_0xcbe7f7){logger[_0x5c553e(0xa3)]('Error\x20in\x20loadSymbols():\x20'+_0xcbe7f7['toString']());if(markets){}else(_0xcbe7f7[_0x5c553e(0x18f)]()[_0x5c553e(0x208)]()[_0x5c553e(0x174)](_0x5c553e(0x144))||_0xcbe7f7['toString']()[_0x5c553e(0x208)]()[_0x5c553e(0x174)](_0x5c553e(0xb3)))&&logHistory(_0x5c553e(0x1f5),_0x5c553e(0x1d9)),logHistory(_0x5c553e(0x1f5),_0x5c553e(0x213)),logHistory(_0x5c553e(0x1f5),_0x5c553e(0x220)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x5c553e(0xa3)](_0x5c553e(0x19e),_0xcbe7f7),loading[_0x5c553e(0x15e)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x5c553e(0x1c6)](markets)[_0x5c553e(0x223)](_0x425c3c=>{const _0x484236=_0x5c553e;_0x425c3c[0x1][_0x484236(0x18c)]&&_0x425c3c[0x1][_0x484236(0x1b8)]&&allSymbols[_0x484236(0x1b3)](_0x425c3c[0x0]);});}function validateSymbols(_0x57e454){let _0x514928=[];return _0x57e454['forEach'](_0x4337eb=>{const _0x36dd8a=_0x16c1;!allSymbols[_0x36dd8a(0x174)](_0x4337eb)?logHistory(_0x36dd8a(0x1f5),'Invalid\x20symbol:\x20'+_0x4337eb+_0x36dd8a(0x203)):_0x514928[_0x36dd8a(0x1b3)](_0x4337eb);}),_0x514928;}async function initclient(){const _0x33603f=_0x1c9209;proxyEmit(_0x33603f(0x25a),emittedConfiguration()),proxyEmit(_0x33603f(0x235),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x33603f(0x10e),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x8bd684=getNormalizedPerformance();emitPerformance(_0x8bd684),getStartingBalances(_0x8bd684);}async function toggleBotMode(){const _0x328e39=_0x1c9209;let _0x2dea87=dbConfig[_0x328e39(0x124)]('bot')[_0x328e39(0x1c7)]({'botID':botID})[_0x328e39(0x239)]();if(_0x2dea87){const _0x38a45d=!_0x2dea87[_0x328e39(0x1fc)];dbConfig['get']('bot')[_0x328e39(0x1c7)]({'botID':botID})[_0x328e39(0xf0)]({'headless':_0x38a45d})[_0x328e39(0x21e)](),config[_0x328e39(0x1fc)]=_0x38a45d,proxyEmit(_0x328e39(0x25a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x152366=_0x1c9209;process[_0x152366(0x1c9)]({'updatebotmanager':!![]},_0xaad4f2=>{}),logger[_0x152366(0xa3)](_0x152366(0x19d)+config['headless']);}async function loadCoins(_0x382773){const _0x319e3e=_0x1c9209;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2e79a6,_0x5bf5dc=0x0,_0x392dcc=0x0;_0x382773[_0x319e3e(0x223)](_0x29eba6=>{const _0x33edc9=_0x319e3e;loading[_0x33edc9(0x193)][_0x33edc9(0x1b3)](_0x29eba6);}),loadingCanceled=![];let _0x2d1be3=![];while(_0x2e79a6!=_0x382773[_0x319e3e(0x215)]+maxLoadingProgress){_0x2e79a6=loadingProgress,_0x382773[_0x319e3e(0x223)](_0x3653f4=>{const _0x2b4176=_0x319e3e;if(gTicker[noslash(_0x3653f4)]){loading['remainingSymbols']=loading[_0x2b4176(0x193)]['filter'](_0x1b0a3c=>_0x1b0a3c!=_0x3653f4);if(!watchedSymbols[_0x2b4176(0x174)](_0x3653f4))watchedSymbols[_0x2b4176(0x1b3)](_0x3653f4);_0x2e79a6++;}}),loading[_0x319e3e(0x17c)]=Math['round'](_0x2e79a6/(_0x382773[_0x319e3e(0x215)]+maxLoadingProgress)*0x64);loading[_0x319e3e(0x17c)]!=0x64&&(_0x392dcc>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x392dcc>0x78*0x5&&!_0x2d1be3&&(_0x2d1be3=!![],logHistory(_0x319e3e(0x1f5),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x319e3e(0xdb)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x319e3e(0x1f5),_0x319e3e(0x220)+loadCoinsRetryInterval/0xea60+_0x319e3e(0x240)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x5bf5dc!=loading['progress']&&(_0x5bf5dc=loading[_0x319e3e(0x17c)],emitLoadingProgress()),_0x392dcc++,await sleep(0xc8);}_0x2e79a6==_0x382773[_0x319e3e(0x215)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x319e3e(0x1c9)]({'status':_0x319e3e(0x1bb),'live':_0x319e3e(0x105)},_0x941d0c=>{}),_0x2d1be3&&logHistory(_0x319e3e(0x199),_0x319e3e(0xb6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x2ad8b0=_0x1c9209;proxyEmit(_0x2ad8b0(0x14c),loading);}async function getFiat(){const _0x317977=_0x1c9209;let _0x28b05e=gTicker[stablecoins[_0x317977(0x17a)][_0x317977(0x1a3)]],_0x298e70=gTicker[stablecoins[_0x317977(0x1d6)][_0x317977(0x1a3)]];return{'eur':Number(_0x28b05e),'usd':Number(_0x298e70)};}function capitalize(_0x3cb0a2){const _0x50907f=_0x1c9209;return _0x3cb0a2[_0x50907f(0xa4)](0x0,0x1)[_0x50907f(0x1c0)]()+_0x3cb0a2['substring'](0x1);}function supportedExchanges(){const _0x2707bf=_0x1c9209,_0x248f2f=['ws','fetchTickers',_0x2707bf(0x19a),'watchTrades',_0x2707bf(0x15c),_0x2707bf(0xce),_0x2707bf(0x19b),_0x2707bf(0x1f1),_0x2707bf(0x234)];let _0x1e747e=[],_0x2696d1=[],_0x4790f2=ccxt[_0x2707bf(0x1e9)]['exchanges'];_0x4790f2['forEach'](_0xc916cc=>{const _0x4615df=_0x2707bf;try{const _0x3b97ac=new ccxt[(_0x4615df(0x1e9))][_0xc916cc]();_0x2696d1[_0x4615df(0x1b3)](_0x3b97ac);}catch(_0x2ac876){}}),_0x2696d1['forEach'](_0x4d96f6=>{const _0x53ec26=_0x2707bf;let _0x44b028=0x0;_0x248f2f[_0x53ec26(0x223)](_0x5ef4de=>{const _0x228679=_0x53ec26;_0x5ef4de in _0x4d96f6[_0x228679(0x167)]&&_0x4d96f6[_0x228679(0x167)][_0x5ef4de]&&_0x44b028++;}),_0x44b028==_0x248f2f['length']&&_0x1e747e[_0x53ec26(0x1b3)](capitalize(_0x4d96f6['id']));});let _0x31d702=[];return _0x4790f2[_0x2707bf(0x223)](_0x2c1ba1=>{_0x2c1ba1=capitalize(_0x2c1ba1);if(!_0x1e747e['includes'](_0x2c1ba1))_0x31d702['push'](_0x2c1ba1);}),_0x1e747e;}function setStartDatePerformance(){const _0x2ff341=_0x1c9209;if(config&&config[_0x2ff341(0xc3)][0x0]['changes'][_0x2ff341(0x215)]!=0x0){const _0x3e4870=config[_0x2ff341(0xc3)][0x0][_0x2ff341(0x143)];dbPerformance['get'](_0x2ff341(0x185))[_0x2ff341(0x1c7)]({'date':config[_0x2ff341(0xb0)]})['assign']({'coins':_0x3e4870})[_0x2ff341(0x21e)]();}}async function recreateCoinResults(){const _0x3ca44c=_0x1c9209;recreationNeeded=![];let _0x5a8a52,_0x36d2e3=[];try{for(const _0x1326df of currentCoins){if(_0x1326df[_0x3ca44c(0x1a3)]!=config[_0x3ca44c(0x170)]){let _0x75df56=0x0,_0x4319bc,_0x37317e;_0x5a8a52=await getAllEventOrders(_0x1326df['symbol']);if(_0x5a8a52[_0x3ca44c(0x215)]>0x0)_0x5a8a52[_0x3ca44c(0x223)](_0x1a59dc=>{const _0x5d4ef7=_0x3ca44c,_0x37c895=_0x1326df[_0x5d4ef7(0x119)][_0x5d4ef7(0x174)](config[_0x5d4ef7(0x170)]+'/');_0x36d2e3[_0x5d4ef7(0x1b3)]({'datetime':_0x1a59dc['datetime'],'coin':_0x1326df[_0x5d4ef7(0x1a3)],'symbol':_0x1326df['symbol'],'side':_0x1a59dc[_0x5d4ef7(0x13d)],'reverse':_0x37c895,'amount':formatResult(_0x1a59dc[_0x5d4ef7(0x161)],0x8),'filled':formatResult(_0x1a59dc['filled'],0x8),'price':formatResult(_0x1a59dc[_0x5d4ef7(0xf3)],0x8)}),_0x75df56=_0x1a59dc[_0x5d4ef7(0x13d)]==_0x5d4ef7(0x158)?_0x75df56+_0x1a59dc['filled']:_0x75df56-_0x1a59dc[_0x5d4ef7(0x161)];if(!_0x37317e)_0x37317e=_0x1a59dc[_0x5d4ef7(0xf3)];});_0x4319bc=_0x1326df[_0x3ca44c(0xff)]-_0x75df56;let _0x5e2282;config[_0x3ca44c(0xc3)][_0x3ca44c(0x223)](_0x156c5d=>{const _0x2f353c=_0x3ca44c;!_0x5e2282&&(_0x5e2282=_0x156c5d['changes']['find'](_0x468ab0=>_0x468ab0[_0x2f353c(0x1a3)]==_0x1326df[_0x2f353c(0x1a3)]),_0x5e2282&&(_0x4319bc=_0x5e2282[_0x2f353c(0xff)],_0x37317e=_0x5e2282['price']));});let _0x404e7f=dbCoinResults[_0x3ca44c(0x124)](_0x3ca44c(0xe5))['find']({'coin':_0x1326df[_0x3ca44c(0x1a3)]})[_0x3ca44c(0x239)]();_0x404e7f={'coin':_0x1326df[_0x3ca44c(0x1a3)],'number':_0x4319bc,'breakeven':_0x37317e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3ca44c(0x124)]('coins')['find']({'coin':_0x1326df[_0x3ca44c(0x1a3)]})[_0x3ca44c(0xf0)](_0x404e7f)[_0x3ca44c(0x21e)]();}}_0x36d2e3[_0x3ca44c(0xa0)]((_0x1417c5,_0x55ca1a)=>_0x1417c5[_0x3ca44c(0x1ea)]>_0x55ca1a[_0x3ca44c(0x1ea)]?0x1:_0x55ca1a[_0x3ca44c(0x1ea)]>_0x1417c5[_0x3ca44c(0x1ea)]?-0x1:0x0);let _0x2d765d=0x0;for(let _0x39db32 of _0x36d2e3){await updateCoinResults(_0x39db32,!![]);}}catch(_0x3fe891){await handleError(_0x3fe891,_0x3ca44c(0x154));}}async function getAllEventOrders(_0x52a9e2){const _0x3427a2=_0x1c9209;let _0x2d37c2=[],_0x4461ea=dbLogs[_0x3427a2(0x124)](_0x3427a2(0xee))[_0x3427a2(0x25f)](_0x1c8bf3=>{const _0x3cfccf=_0x3427a2,_0x129b79=_0x1c8bf3[_0x3cfccf(0x128)][_0x3cfccf(0x208)]();return _0x129b79[_0x3cfccf(0x174)](_0x52a9e2[_0x3cfccf(0x208)]())&&(_0x129b79['includes'](_0x3cfccf(0x114))&&_0x129b79[_0x3cfccf(0x174)](_0x3cfccf(0x139))||_0x129b79[_0x3cfccf(0x174)](_0x3cfccf(0x161))&&_0x129b79['includes']('order'));})[_0x3427a2(0x1cc)](_0x3427a2(0xcb))[_0x3427a2(0x239)]();return _0x4461ea['forEach'](_0x515e3d=>{const _0x20d842=_0x3427a2,_0xa3323e=_0x515e3d[_0x20d842(0x128)][_0x20d842(0x174)](_0x20d842(0x23b))?_0x20d842(0x23b):_0x20d842(0x158),_0x3de7db=/#([0-9]|\.)+\s/i,_0x4028e5=Number(_0x3de7db[_0x20d842(0x131)](_0x515e3d['event'])[0x0][_0x20d842(0x13a)](0x1)),_0x5ae8cd=/@([0-9]|\.)+$/i,_0x24d2d6=Number(_0x5ae8cd['exec'](_0x515e3d[_0x20d842(0x128)])[0x0][_0x20d842(0x13a)](0x1));_0x2d37c2[_0x20d842(0x1b3)]({'datetime':_0x515e3d[_0x20d842(0xcb)],'coin':symbolToCoin(_0x52a9e2),'symbol':_0x52a9e2,'side':_0xa3323e,'amount':_0x4028e5,'filled':_0x4028e5,'price':_0x24d2d6});}),_0x2d37c2;}async function validate24hChanges(){const _0x31a498=_0x1c9209;for(const _0x10d2e2 of currentCoins){if(_0x10d2e2[_0x31a498(0x1a3)]!=config[_0x31a498(0x170)]){let _0x56b64e;_0x10d2e2[_0x31a498(0x14f)]?_0x56b64e=formatResult((0x1/(gChange[_0x10d2e2[_0x31a498(0x119)]]/0x64+0x1)-0x1)*0x64,0x3):_0x56b64e=gChange[_0x10d2e2[_0x31a498(0x119)]],_0x56b64e<config[_0x31a498(0x11c)]&&(logHistory(_0x31a498(0x1f5),_0x10d2e2[_0x31a498(0x1a3)]+_0x31a498(0xe7)+_0x56b64e+'%'),logHistory(_0x31a498(0x1f5),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x260605,_0x22866a){const _0x448d70=_0x1c9209;if(!_0x260605)return!![];const _0x29f6f6=_0x22866a[_0x448d70(0x23d)]('.'),_0x4d5221=_0x260605[_0x448d70(0x23d)]('.');for(var _0x13451a=0x0;_0x13451a<_0x4d5221[_0x448d70(0x215)];_0x13451a++){const _0xbb77b9=~~_0x4d5221[_0x13451a],_0x2c094b=~~_0x29f6f6[_0x13451a];if(_0xbb77b9<_0x2c094b)return!![];if(_0xbb77b9>_0x2c094b)return![];}return![];}async function oneTimeMigration(){const _0x3f8161=_0x1c9209;let _0x1760ce=dbLogs[_0x3f8161(0x124)](_0x3f8161(0xec))[_0x3f8161(0x239)]();if(isOlderVersion(_0x1760ce,_0x3f8161(0x1ca))){let _0xab9f50=[];const _0x5d3390=dbLogs[_0x3f8161(0x124)](_0x3f8161(0xee))[_0x3f8161(0x239)]();_0x5d3390[_0x3f8161(0x223)](_0x3bd77e=>{const _0x1e0f71=_0x3f8161;_0xab9f50[_0x1e0f71(0x1b3)]({'time':_0x3bd77e[_0x1e0f71(0xcb)],'type':_0x3bd77e[_0x1e0f71(0x10d)],'event':_0x3bd77e[_0x1e0f71(0x128)]});}),dbLogs[_0x3f8161(0x124)](_0x3f8161(0xee))[_0x3f8161(0xf0)](_0xab9f50)[_0x3f8161(0x21e)]();}let _0x55c58d=dbConfig['get']('version')[_0x3f8161(0x239)]();if(isOlderVersion(_0x55c58d,_0x3f8161(0x1ca))){let _0x1c8d87=dbConfig[_0x3f8161(0x124)]('bot')[_0x3f8161(0x1c7)]({'botID':botID})['value']();if(_0x1c8d87){let _0x2d94cc=[];_0x1c8d87[_0x3f8161(0x1b2)][_0x3f8161(0x223)](_0x220d1a=>{const _0x8aa85c=_0x3f8161;_0x2d94cc[_0x8aa85c(0x1b3)]({'coin':_0x220d1a[_0x8aa85c(0x1a3)],'number':_0x220d1a[_0x8aa85c(0x24e)],'price':_0x220d1a['startprice']}),delete _0x220d1a[_0x8aa85c(0x24e)],delete _0x220d1a['startprice'];});if(_0x2d94cc[_0x3f8161(0x215)]!==0x0)fs[_0x3f8161(0xbc)](configbackuppath+(_0x3f8161(0x236)+botID+_0x3f8161(0x1d8)),JSON[_0x3f8161(0xe3)](_0x2d94cc,null,0x4),function(_0x4d37fc){if(_0x4d37fc){}});const _0x42bc11=(_0x148a1d,_0x4e0e3f)=>{const _0x49a7e2=_0x3f8161;let _0x43c612=[];_0x4e0e3f[_0x49a7e2(0x223)](_0x3c83c1=>{const _0x5154cf=_0x49a7e2,_0xa32b4a=_0x148a1d[_0x5154cf(0x1c7)](_0x38308a=>_0x38308a[_0x5154cf(0x1a3)]==_0x3c83c1['coin']);if(!_0xa32b4a)_0x43c612[_0x5154cf(0x1b3)](_0x3c83c1);});let _0x35d19a=[];return _0x148a1d[_0x49a7e2(0x223)](_0x243306=>{const _0x930d6a=_0x49a7e2,_0x2eb260=_0x4e0e3f['find'](_0x15f9cf=>_0x15f9cf[_0x930d6a(0x1a3)]==_0x243306[_0x930d6a(0x1a3)]);if(!_0x2eb260||_0x2eb260['number']==0x0&&_0x243306[_0x930d6a(0xff)]!=0x0)_0x35d19a[_0x930d6a(0x1b3)](_0x243306);}),{'missingDay1':_0x43c612,'notInDay2':_0x35d19a};},_0x6be3c8=dbPerformance['get'](_0x3f8161(0x185))[_0x3f8161(0x104)]()[_0x3f8161(0x239)]();if(_0x6be3c8['length']>0x1){const {missingDay1:_0x5a3776,notInDay2:_0x584568}=_0x42bc11(_0x2d94cc,_0x6be3c8[0x1][_0x3f8161(0xe5)]);_0x2d94cc=[..._0x2d94cc,..._0x5a3776],_0x584568['forEach'](_0x474a14=>{const _0x1ccb34=_0x3f8161;let _0x4a17db=_0x2d94cc['findIndex'](_0x5abc62=>_0x5abc62['coin']==_0x474a14['coin']);_0x4a17db!=-0x1&&_0x2d94cc[_0x1ccb34(0x24f)](_0x4a17db,0x1);});}_0x2d94cc[_0x3f8161(0xa0)]((_0x36b285,_0x218c4e)=>_0x36b285[_0x3f8161(0x1a3)]>_0x218c4e[_0x3f8161(0x1a3)]?0x1:_0x218c4e[_0x3f8161(0x1a3)]>_0x36b285[_0x3f8161(0x1a3)]?-0x1:0x0);let _0x150465=[{'date':_0x1c8d87[_0x3f8161(0xb0)],'changes':_0x2d94cc}];_0x6be3c8[_0x3f8161(0x215)]>0x2&&_0x6be3c8[_0x3f8161(0x223)]((_0x1a00e8,_0x514ba7)=>{const _0x5101a3=_0x3f8161;if(_0x514ba7>0x0&&_0x514ba7<_0x6be3c8[_0x5101a3(0x215)]-0x1){const {missingDay1:_0x268363,notInDay2:_0x35d445}=_0x42bc11(_0x6be3c8[_0x514ba7][_0x5101a3(0xe5)],_0x6be3c8[_0x514ba7+0x1][_0x5101a3(0xe5)]);_0x2d94cc=[],(_0x268363['length']!=0x0||_0x35d445[_0x5101a3(0x215)]!=0x0)&&(_0x268363[_0x5101a3(0x215)]!=0x0&&_0x2d94cc['push'](..._0x268363),_0x35d445[_0x5101a3(0x215)]!=0x0&&(_0x35d445['forEach'](_0x30c3b4=>{const _0x143d6e=_0x5101a3;_0x30c3b4[_0x143d6e(0xff)]=-_0x30c3b4[_0x143d6e(0xff)];}),_0x2d94cc[_0x5101a3(0x1b3)](..._0x35d445)),_0x2d94cc['sort']((_0x40ccea,_0x3af976)=>_0x40ccea[_0x5101a3(0x1a3)]>_0x3af976[_0x5101a3(0x1a3)]?0x1:_0x3af976[_0x5101a3(0x1a3)]>_0x40ccea[_0x5101a3(0x1a3)]?-0x1:0x0),_0x150465[_0x5101a3(0x1b3)]({'date':_0x6be3c8[_0x514ba7+0x1][_0x5101a3(0x15a)],'changes':_0x2d94cc}));}}),dbConfig[_0x3f8161(0x124)](_0x3f8161(0x160))[_0x3f8161(0x1c7)]({'botID':botID})[_0x3f8161(0xf0)]({..._0x1c8d87,'liquidity':_0x150465})[_0x3f8161(0x21e)]();}}if(isOlderVersion(_0x55c58d,_0x3f8161(0x1a8))){let _0x54076b=dbConfig[_0x3f8161(0x124)]('bot')[_0x3f8161(0x1c7)]({'botID':botID})[_0x3f8161(0x239)]();if(_0x54076b){const _0x46aa0f=_0x54076b[_0x3f8161(0x121)],_0x4652c4=_0x46aa0f?capitalize(_0x46aa0f):_0x3f8161(0x224);dbConfig['get'](_0x3f8161(0x160))[_0x3f8161(0x1c7)]({'botID':botID})[_0x3f8161(0xf0)]({'exchange':_0x4652c4})[_0x3f8161(0x21e)]();}}if(isOlderVersion(_0x55c58d,_0x3f8161(0x20c))){let _0x1fd8b0=dbConfig[_0x3f8161(0x124)]('bot')[_0x3f8161(0x1c7)]({'botID':botID})['value']();if(_0x1fd8b0){const _0x4189fc=_0x1fd8b0[_0x3f8161(0x183)],_0x2a7693=_0x4189fc?'marketcap':![];dbConfig[_0x3f8161(0x124)](_0x3f8161(0x160))[_0x3f8161(0x1c7)]({'botID':botID})['assign']({'marketcapEnabled':_0x2a7693})[_0x3f8161(0x21e)]();}}if(isOlderVersion(_0x55c58d,_0x3f8161(0x1c4))){let _0xd01232=dbConfig[_0x3f8161(0x124)](_0x3f8161(0x160))[_0x3f8161(0x1c7)]({'botID':botID})['value']();if(_0xd01232){const _0x35606f=_0xd01232[_0x3f8161(0x138)],_0x46cb1c=_0x35606f?_0x3f8161(0x1d2):![];dbConfig['get']('bot')[_0x3f8161(0x1c7)]({'botID':botID})[_0x3f8161(0xf0)]({'autoliquidity':_0x46cb1c})['write']();}}let _0x2bb568=dbPerformance[_0x3f8161(0x124)]('version')[_0x3f8161(0x239)]();isOlderVersion(_0x2bb568,_0x3f8161(0x1ca))&&setStartDatePerformance();let _0xa69801=dbCoinResults[_0x3f8161(0x124)](_0x3f8161(0xec))[_0x3f8161(0x239)]();if(isOlderVersion(_0xa69801,'2.5.0')){let _0x4a4d49=dbCoinResults[_0x3f8161(0x124)](_0x3f8161(0xe5))[_0x3f8161(0x239)]();if(_0x4a4d49[_0x3f8161(0x215)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x24518c=_0x1c9209;dbConfig[_0x24518c(0x13f)]('version',serverversion)[_0x24518c(0x21e)](),dbPerformance[_0x24518c(0x13f)](_0x24518c(0xec),serverversion)['write'](),dbLogs[_0x24518c(0x13f)](_0x24518c(0xec),serverversion)[_0x24518c(0x21e)](),dbCoinResults[_0x24518c(0x13f)](_0x24518c(0xec),serverversion)[_0x24518c(0x21e)]();}function getConfiguration(_0xbc83e0){const _0x4fa3d5=_0x1c9209;let _0x4d80b2=dbConfig[_0x4fa3d5(0x124)](_0x4fa3d5(0x160))['find']({'botID':_0xbc83e0})[_0x4fa3d5(0x239)]();if(_0x4d80b2){let _0x2dd975=![];typeof _0x4d80b2['threshold']==_0x4fa3d5(0x198)&&(_0x4d80b2={..._0x4d80b2,'threshold':Number(_0x4d80b2[_0x4fa3d5(0x201)])},_0x2dd975=!![]),_0x4d80b2['change24h']==undefined&&(_0x4d80b2={..._0x4d80b2,'change24h':-0x14},_0x2dd975=!![]),_0x4d80b2[_0x4fa3d5(0xaa)]==undefined&&(_0x4d80b2={..._0x4d80b2,'fiat':_0x4fa3d5(0xcf)},_0x2dd975=!![]),_0x4d80b2[_0x4fa3d5(0x1a0)]==undefined&&(_0x4d80b2={..._0x4d80b2,'onepagemode':settings[_0x4fa3d5(0x1a0)]},_0x2dd975=!![]),_0x4d80b2['colorscheme']==undefined&&(_0x4d80b2={..._0x4d80b2,'colorscheme':_0x4fa3d5(0x21b)},_0x2dd975=!![]),_0x4d80b2[_0x4fa3d5(0x138)]==undefined&&(_0x4d80b2={..._0x4d80b2,'autoliquidity':_0x4fa3d5(0x1d2)},_0x2dd975=!![]),_0x4d80b2[_0x4fa3d5(0x17b)]==undefined&&(_0x4d80b2={..._0x4d80b2,'marketcapApi':settings[_0x4fa3d5(0x17b)]?!![]:![]},_0x2dd975=!![]),_0x4d80b2[_0x4fa3d5(0x183)]==undefined&&(_0x4d80b2={..._0x4d80b2,'marketcapEnabled':![]},_0x2dd975=!![]),_0x2dd975&&(_0x4d80b2={'botID':_0x4d80b2['botID'],'exchange':_0x4d80b2[_0x4fa3d5(0x121)],'apiKey':_0x4d80b2[_0x4fa3d5(0xac)],'apiSecret':_0x4d80b2[_0x4fa3d5(0x12a)],'apiPassword':_0x4d80b2['apiPassword'],'basecoin':_0x4d80b2[_0x4fa3d5(0x170)],'botname':_0x4d80b2['botname'],'showname':_0x4d80b2['showname'],'threshold':_0x4d80b2['threshold'],'ordertype':_0x4d80b2[_0x4fa3d5(0x127)],'timeout':_0x4d80b2[_0x4fa3d5(0x229)],'fiat':_0x4d80b2['fiat'],'startdate':_0x4d80b2[_0x4fa3d5(0xb0)],'recreate':_0x4d80b2['recreate'],'timeshift':_0x4d80b2[_0x4fa3d5(0x1d7)],'onepagemode':_0x4d80b2[_0x4fa3d5(0x1a0)],'headless':_0x4d80b2[_0x4fa3d5(0x1fc)],'cooldown':_0x4d80b2[_0x4fa3d5(0x147)],'change24h':_0x4d80b2[_0x4fa3d5(0x11c)],'emojibuy':_0x4d80b2['emojibuy'],'emojisell':_0x4d80b2[_0x4fa3d5(0x20d)],'colorscheme':_0x4d80b2['colorscheme'],'marketcapApi':_0x4d80b2[_0x4fa3d5(0x17b)],'marketcapEnabled':_0x4d80b2['marketcapEnabled'],'portfolio':_0x4d80b2[_0x4fa3d5(0x1b2)],'autoliquidity':_0x4d80b2[_0x4fa3d5(0x138)],'liquidity':_0x4d80b2[_0x4fa3d5(0xc3)],'openOrders':_0x4d80b2['openOrders']},dbConfig[_0x4fa3d5(0x124)](_0x4fa3d5(0x160))['remove']()['write'](),dbConfig[_0x4fa3d5(0x124)](_0x4fa3d5(0x160))[_0x4fa3d5(0x1b3)](_0x4d80b2)[_0x4fa3d5(0x21e)]());}else _0x4d80b2={'botID':_0xbc83e0,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4fa3d5(0x109)+_0xbc83e0,'showname':![],'threshold':0x3,'ordertype':_0x4fa3d5(0x114),'timeout':0x14,'fiat':_0x4fa3d5(0xcf),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4fa3d5(0x1d7)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4fa3d5(0x21b),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x4fa3d5(0x1d2),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4d80b2;}function emittedConfiguration(){const _0x31e35a=_0x1c9209;let _0x1785ab;if(config[_0x31e35a(0xac)]=='')_0x1785ab={...config,'configstate':'initial'};else config[_0x31e35a(0xac)]=='***'?_0x1785ab={...config,'configstate':_0x31e35a(0x120)}:(_0x1785ab={...config,'apiKey':_0x31e35a(0x1a9),'apiSecret':_0x31e35a(0x1a9)},config[_0x31e35a(0xd9)]&&(_0x1785ab[_0x31e35a(0xd9)]=_0x31e35a(0x1a9)));return _0x1785ab['enableFiatToggle']=enableFiatToggle,_0x1785ab;}function getSettings(){const _0x2f4db2=_0x1c9209;return dbSettings[_0x2f4db2(0x124)](_0x2f4db2(0x11a))[_0x2f4db2(0x239)]();}function getSecure(){const _0x1b45ad=_0x1c9209;return dbSecure['get'](_0x1b45ad(0xba))[_0x1b45ad(0x239)]()||{};}function updateTimeshift(_0x3cb212){const _0x8f5758=_0x1c9209;let _0x53ed51=dbConfig[_0x8f5758(0x124)](_0x8f5758(0x160))[_0x8f5758(0x1c7)]({'botID':botID})[_0x8f5758(0x239)]();_0x53ed51&&dbConfig['get']('bot')[_0x8f5758(0x1c7)]({'botID':botID})[_0x8f5758(0xf0)]({'timeshift':_0x3cb212})[_0x8f5758(0x21e)](),config['timeshift']=_0x3cb212,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x1fd5ba){const _0xd1157b=_0x1c9209;let _0x73d2a=dbConfig[_0xd1157b(0x124)]('bot')[_0xd1157b(0x1c7)]({'botID':botID})[_0xd1157b(0x239)]();_0x73d2a&&dbConfig['get']('bot')[_0xd1157b(0x1c7)]({'botID':botID})[_0xd1157b(0xf0)]({'onepagemode':_0x1fd5ba})[_0xd1157b(0x21e)](),config[_0xd1157b(0x1a0)]=_0x1fd5ba,proxyEmit(_0xd1157b(0x25a),emittedConfiguration());}function updateMarketcapApi(_0x4471ab){const _0x47e2ca=_0x1c9209,_0x3caa9a=_0x4471ab?!![]:![];let _0x2879c9=dbConfig[_0x47e2ca(0x124)](_0x47e2ca(0x160))[_0x47e2ca(0x1c7)]({'botID':botID})['value']();_0x2879c9&&dbConfig[_0x47e2ca(0x124)]('bot')[_0x47e2ca(0x1c7)]({'botID':botID})[_0x47e2ca(0xf0)]({'marketcapApi':_0x3caa9a})[_0x47e2ca(0x21e)](),config['marketcapApi']=_0x3caa9a,getMarketCap(),proxyEmit(_0x47e2ca(0x25a),emittedConfiguration());}async function storeConfiguration(_0x36d2b7){const _0x43612f=_0x1c9209;logger[_0x43612f(0xa3)](_0x43612f(0x24c));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x382ab1=![],_0x256379=![],_0xa439e5=[];_0x36d2b7['portfolio']['forEach'](_0x39f8d5=>{const _0x572702=_0x43612f;if(!_0x39f8d5[_0x572702(0x165)]&&_0x39f8d5[_0x572702(0x1a3)]!=_0x36d2b7[_0x572702(0x170)])_0xa439e5[_0x572702(0x1b3)](_0x39f8d5[_0x572702(0x119)]);}),_0xa439e5[_0x43612f(0x223)](_0x362c4c=>{const _0x17cd7b=_0x43612f,_0x17a2c8=currentCoins[_0x17cd7b(0x1c7)](_0x5bd8cd=>_0x5bd8cd['symbol']==_0x362c4c);!_0x17a2c8&&(_0x382ab1=!![]);}),currentCoins[_0x43612f(0x223)](_0x28812b=>{const _0x372293=_0x43612f;if(_0x28812b[_0x372293(0x1a3)]!=config[_0x372293(0x170)]){const _0x1c2dbb=_0xa439e5[_0x372293(0x1c7)](_0x5aa750=>_0x5aa750==_0x28812b[_0x372293(0x119)]);!_0x1c2dbb&&(_0x382ab1=!![]);}}),_0x36d2b7[_0x43612f(0x1b2)]['forEach'](_0x455ba1=>{const _0x23a456=_0x43612f,_0x57cc1c=config[_0x23a456(0x1b2)]['find'](_0x5cbd58=>_0x5cbd58[_0x23a456(0x1a3)]==_0x455ba1[_0x23a456(0x1a3)]);if(_0x57cc1c&&_0x455ba1[_0x23a456(0xb2)]!=_0x57cc1c[_0x23a456(0xb2)])_0x256379=!![];});let _0x5d2501=dbConfig['get']('bot')[_0x43612f(0x1c7)]({'botID':botID})[_0x43612f(0x239)]();_0x36d2b7={..._0x36d2b7,'apiKey':decryptRSA(secure[_0x43612f(0xbf)],_0x36d2b7[_0x43612f(0xac)]),'apiSecret':decryptRSA(secure['privateKey'],_0x36d2b7[_0x43612f(0x12a)])};_0x36d2b7[_0x43612f(0xd9)]&&(_0x36d2b7[_0x43612f(0xd9)]=decryptRSA(secure[_0x43612f(0xbf)],_0x36d2b7[_0x43612f(0xd9)]));let _0x24857b=![];if(_0x5d2501){_0x36d2b7['apiKey']==_0x43612f(0x1a9)?_0x36d2b7['apiKey']=config['apiKey']:_0x24857b=!![];_0x36d2b7[_0x43612f(0x12a)]=='************'?_0x36d2b7['apiSecret']=config[_0x43612f(0x12a)]:_0x24857b=!![];if(_0x36d2b7[_0x43612f(0xd9)]=='************')_0x36d2b7['apiPassword']=config[_0x43612f(0xd9)];else{if(_0x36d2b7[_0x43612f(0xd9)])_0x24857b=!![];}dbConfig[_0x43612f(0x124)](_0x43612f(0x160))[_0x43612f(0x1c7)]({'botID':botID})[_0x43612f(0xf0)](_0x36d2b7)[_0x43612f(0x21e)]();}else dbConfig[_0x43612f(0x124)](_0x43612f(0x160))[_0x43612f(0x1b3)](_0x36d2b7)[_0x43612f(0x21e)](),_0x24857b=!![],process[_0x43612f(0x1c9)]({'status':'enabled','live':_0x43612f(0x105)},_0x35933c=>{});process['send']({'botname':_0x36d2b7['botname']},_0x476e93=>{}),config={..._0x36d2b7},updateBotManager(),proxyEmit(_0x43612f(0x1dd)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x24857b)!_0x5d2501?await reset(!![]):getBalances();else _0x382ab1||_0x256379?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x313b69){const _0x802bb8=_0x1c9209,_0x562094={...config,'headless':_0x313b69[_0x802bb8(0x1fc)]};let _0x30a56b=dbConfig[_0x802bb8(0x124)]('bot')[_0x802bb8(0x1c7)]({'botID':botID})['value']();_0x30a56b&&dbConfig[_0x802bb8(0x124)](_0x802bb8(0x160))[_0x802bb8(0x1c7)]({'botID':botID})[_0x802bb8(0xf0)](_0x562094)[_0x802bb8(0x21e)](),config={..._0x562094},updateBotManager(),proxyEmit(_0x802bb8(0x25a),emittedConfiguration());}async function storeFiat(_0x377610){const _0x37271a=_0x1c9209,_0x20ac45={...config,'fiat':_0x377610};let _0x237756=dbConfig[_0x37271a(0x124)](_0x37271a(0x160))[_0x37271a(0x1c7)]({'botID':botID})[_0x37271a(0x239)]();_0x237756&&dbConfig[_0x37271a(0x124)](_0x37271a(0x160))[_0x37271a(0x1c7)]({'botID':botID})[_0x37271a(0xf0)](_0x20ac45)[_0x37271a(0x21e)](),config={..._0x20ac45},proxyEmit(_0x37271a(0x25a),emittedConfiguration());}function resetHistory(){const _0x5db37d=_0x1c9209;logger[_0x5db37d(0x157)](_0x5db37d(0x107));try{if(fs[_0x5db37d(0xef)](path[_0x5db37d(0xdb)](configpath,_0x5db37d(0x1c8)+botID+_0x5db37d(0xdc))))fs[_0x5db37d(0x238)](path[_0x5db37d(0xdb)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x5db37d(0xef)](path['join'](configpath,_0x5db37d(0x1c8)+botID+'-performance.json')))fs[_0x5db37d(0x238)](path[_0x5db37d(0xdb)](configpath,_0x5db37d(0x1c8)+botID+'-performance.json'));if(fs['existsSync'](path[_0x5db37d(0xdb)](configpath,_0x5db37d(0x1c8)+botID+_0x5db37d(0x1cf))))fs[_0x5db37d(0x238)](path['join'](configpath,_0x5db37d(0x1c8)+botID+'-results.json'));}catch(_0x3ccf99){if(_0x3ccf99)logger[_0x5db37d(0x157)]('Error\x20while\x20deleting\x20files:\x20',_0x3ccf99);}const _0x37f635=getDate();let _0x52baaa=[];currentCoins['forEach'](_0xcea0c0=>{const _0x15ec2d=_0x5db37d;_0x52baaa[_0x15ec2d(0x1b3)]({'coin':_0xcea0c0[_0x15ec2d(0x1a3)],'number':_0xcea0c0[_0x15ec2d(0xff)],'price':_0xcea0c0[_0x15ec2d(0x1aa)]});});let _0x44661f=dbConfig['get'](_0x5db37d(0x160))['find']({'botID':botID})[_0x5db37d(0x239)]();_0x44661f&&(dbConfig['get'](_0x5db37d(0x160))[_0x5db37d(0x1c7)]({'botID':botID})[_0x5db37d(0xf0)]({'liquidity':[{'date':_0x37f635,'changes':_0x52baaa}]})[_0x5db37d(0x21e)](),config[_0x5db37d(0xc3)]=[]),restartBot(!![]);}function noslash(_0x428694){const _0x1eacfc=_0x1c9209;return _0x428694[_0x1eacfc(0x1de)]('/','');}function updateHighestFee(_0x5ef544){const _0x4bfbbb=_0x1c9209;if(_0x5ef544[_0x4bfbbb(0x14f)]){let _0x49236e={'filled':_0x5ef544[_0x4bfbbb(0x161)]*_0x5ef544[_0x4bfbbb(0xf3)],'amount':_0x5ef544[_0x4bfbbb(0x161)]*_0x5ef544['price'],'side':_0x5ef544[_0x4bfbbb(0x13d)]==_0x4bfbbb(0x23b)?_0x4bfbbb(0x158):_0x4bfbbb(0x23b),'price':0x1/_0x5ef544['price']};_0x5ef544={..._0x5ef544,..._0x49236e};}const _0x13a912=defaultFee*_0x5ef544['filled']*_0x5ef544['price'];lastFees[_0x4bfbbb(0x1d4)]['length']===0x14&&lastFees[_0x4bfbbb(0x1d4)][_0x4bfbbb(0x14d)](),lastFees[_0x4bfbbb(0x1d4)][_0x4bfbbb(0x1b3)](_0x13a912),lastFees[_0x4bfbbb(0x1bc)]=Math[_0x4bfbbb(0x23c)](...lastFees[_0x4bfbbb(0x1d4)]);}async function updateNumberCoinsCcxt(_0xc25828){const _0x592e1e=_0x1c9209;logger[_0x592e1e(0xa3)]('0\x20-\x20EXECUTION:\x20'+_0xc25828[_0x592e1e(0x119)]+_0x592e1e(0x241)+_0xc25828['status']+_0x592e1e(0x241)+_0xc25828[_0x592e1e(0x161)]+_0x592e1e(0x150)+_0xc25828[_0x592e1e(0x13e)]+_0x592e1e(0x241)+_0xc25828['id']);let _0x3d656c=_0xc25828[_0x592e1e(0xc0)],_0x2deeab=![];currentCoins['forEach'](_0x72b880=>{const _0x1fa96d=_0x592e1e;_0x72b880['symbol']==_0xc25828[_0x1fa96d(0x119)]&&(_0x2deeab=!![]);});if(!_0x2deeab)return;const _0x5148cb=currentCoins['find'](_0x33cb4a=>_0x33cb4a[_0x592e1e(0x119)]==_0xc25828[_0x592e1e(0x119)]),_0x39c0e7=_0x5148cb[_0x592e1e(0x1a3)],_0x28e5d4=_0x5b7db4=>{const _0x4316b4=_0x592e1e,_0x2d131f=currentCoins[_0x4316b4(0x1c7)](_0x26f354=>_0x26f354[_0x4316b4(0x119)]==_0xc25828[_0x4316b4(0x119)]);if(_0x2d131f)_0x2d131f[_0x4316b4(0x22a)]=_0x5b7db4;};let _0x26c3be=![];for(const _0x342385 of lastOrders){const _0x347f22=0x64,_0x220932=0x1388;let _0x257b46=0x0;while(!_0x342385['orderId']&&_0x257b46*_0x347f22<_0x220932){_0x257b46++,await sleep(_0x347f22);}if(_0x257b46>0x0)logger[_0x592e1e(0xa3)]('Waited\x20'+_0x257b46*_0x347f22/0x3e8+_0x592e1e(0xe4));_0x342385[_0x592e1e(0x206)]==_0xc25828['id']&&(_0x26c3be=!![]);}if(_0x3d656c==_0x592e1e(0x101)){_0x28e5d4(_0x592e1e(0x101));if(_0xc25828[_0x592e1e(0x161)]>0x0&&_0xc25828[_0x592e1e(0x161)]<_0xc25828[_0x592e1e(0x13e)]){if(_0x26c3be){setBlockTransactionDetection(!![]),logger[_0x592e1e(0xa3)](_0x592e1e(0x22f)+_0xc25828[_0x592e1e(0x161)]+_0x592e1e(0x18a)+_0xc25828['id']);const _0x36278b=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39c0e7);[currentCoins,currentCoinsAll]=_0x36278b,setBlockTransactionDetection(![]);}else logger[_0x592e1e(0xa3)](_0x592e1e(0x22f)+_0xc25828[_0x592e1e(0x161)]+_0x592e1e(0x23e)+_0xc25828['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x3d656c=='canceled'){_0x28e5d4('canceled');const _0x4a2bb1=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4a2bb1,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x3d656c==_0x592e1e(0x230)){if(lastOrders)for(const _0x239c61 of lastOrders){if(_0x239c61[_0x592e1e(0x206)]==_0xc25828['id']){logger[_0x592e1e(0xa3)](_0x592e1e(0x15d)+_0xc25828['id']),_0x26c3be=!![];if(_0x239c61[_0x592e1e(0x161)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x592e1e(0x11d)+_0xc25828['id']);if(_0xc25828['average'])_0x239c61[_0x592e1e(0xf3)]=_0xc25828['average'];else{if(_0xc25828[_0x592e1e(0xf3)])_0x239c61[_0x592e1e(0xf3)]=_0xc25828[_0x592e1e(0xf3)];else{}}_0x239c61[_0x592e1e(0x161)]=_0xc25828['filled'],updateHighestFee(_0x239c61);const _0x19f252=await getCoins(balanceUpdateDelay,undefined,undefined,_0x39c0e7);[currentCoins,currentCoinsAll]=_0x19f252,setBlockTransactionDetection(![]),await validateOrders(),_0x28e5d4(_0x592e1e(0x161)),_0x239c61['fee']={'currency':_0xc25828[_0x592e1e(0xb8)]?_0xc25828[_0x592e1e(0xb8)]['currency']:null,'cost':_0xc25828[_0x592e1e(0xb8)]?_0xc25828['fee'][_0x592e1e(0x11b)]:0x0},await updateCoinResults(_0x239c61);}}}!_0x26c3be&&(logger[_0x592e1e(0xa3)](_0x592e1e(0x188)+_0xc25828['id']),_0x28e5d4(_0x592e1e(0x161)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2f1a28=JSON[_0x592e1e(0x1bf)](lastBalances[_0x592e1e(0x1b2)]);const _0x359270=_0x2f1a28[_0x592e1e(0x1c7)](_0x526e02=>_0x526e02[_0x592e1e(0x119)]==_0xc25828[_0x592e1e(0x119)]);if(_0x359270){if(_0x3d656c=='open')_0x359270[_0x592e1e(0x22a)]=_0x359270[_0x592e1e(0x22a)]==_0x592e1e(0x161)?_0x592e1e(0x161):'open';else{if(_0x3d656c=='canceled')_0x359270[_0x592e1e(0x22a)]=_0x359270['orderstatus']==_0x592e1e(0x161)?_0x592e1e(0x161):_0x592e1e(0x1fb);else _0x3d656c==_0x592e1e(0x230)&&(_0x359270[_0x592e1e(0x22a)]=_0x592e1e(0x161));}}lastBalances={...lastBalances,'portfolio':JSON[_0x592e1e(0xe3)](_0x2f1a28)},proxyEmit(_0x592e1e(0x10e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2fcddb=_0x1c9209;await getOpenOrders();let _0x502b14=![];currentCoins[_0x2fcddb(0x223)](_0x40ad94=>{const _0x3da7b7=_0x2fcddb;_0x502b14=allOpenOrders[_0x3da7b7(0x1c7)](_0x541443=>_0x541443[_0x3da7b7(0x119)]==_0x40ad94[_0x3da7b7(0x119)]),_0x40ad94['orderstatus']=_0x502b14?_0x3da7b7(0x101):_0x3da7b7(0x243);});}async function fetchBalance(_0x2cc1b5=!![]){const _0x38ef5c=_0x1c9209;let _0xd659d8,_0x2bbc8d;try{return _0xd659d8=await exchange[_0x38ef5c(0x234)](),_0x2bbc8d=_0xd659d8[_0x38ef5c(0x1ee)],_0x2bbc8d;}catch(_0x5bdc72){return!_0x2cc1b5?handleErrorNoStop(_0x5bdc72,_0x38ef5c(0x1f2)):await handleError(_0x5bdc72,_0x38ef5c(0x1f2)),![];}}async function getCoins(_0x30278f=0x0,_0x2cee24=!![],_0x6b08fb=config['basecoin'],_0x22a3a2){const _0x5b9a87=_0x1c9209;let _0x5ae5f9=[],_0x451de0=[],_0x534fab=[],_0x4e5257;if(_0x30278f)await sleep(_0x30278f);if(botPaused)return[currentCoins,currentCoinsAll];let _0x4e9e4b=![],_0x5472bd=0x0,_0x9c0359,_0x6c636f;_0x22a3a2&&(_0x9c0359=currentCoins[_0x5b9a87(0x1c7)](_0x59fe9d=>_0x59fe9d['coin']==_0x22a3a2),_0x6c636f=_0x9c0359[_0x5b9a87(0xff)]);while(!_0x4e9e4b){_0x4e5257=await fetchBalance(_0x2cee24);if(_0x4e5257){if(_0x22a3a2){if(_0x4e5257[_0x22a3a2]!=_0x6c636f)logger[_0x5b9a87(0xa3)](_0x5b9a87(0x1fa)+_0x22a3a2+':\x20'+_0x4e5257[_0x22a3a2]+'\x20('+_0x6c636f+')'),_0x4e9e4b=!![];else{logger[_0x5b9a87(0xa3)](_0x5b9a87(0x140)+_0x22a3a2+':\x20'+_0x4e5257[_0x22a3a2]+'\x20('+_0x6c636f+')'),_0x5472bd++;if(_0x5472bd<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x5b9a87(0x255)+_0x5472bd+_0x5b9a87(0x210));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x3c0501,_0x1a4e73]of Object[_0x5b9a87(0x1c6)](_0x4e5257)){_0x534fab[_0x5b9a87(0x1b3)](_0x3c0501);}config[_0x5b9a87(0x1b2)][_0x5b9a87(0x223)](_0x49a731=>{const _0x57fe75=_0x5b9a87;!_0x534fab[_0x57fe75(0x174)](_0x49a731['coin'])&&(_0x4e5257[_0x49a731[_0x57fe75(0x1a3)]]=0x0);});if(_0x6b08fb=='')for(const [_0x2c20a1,_0x2eed51]of Object[_0x5b9a87(0x1c6)](_0x4e5257)){_0x2eed51!=0x0&&_0x5ae5f9[_0x5b9a87(0x1b3)]({'coin':_0x2c20a1});}else for(const [_0x7ca464,_0x36a3ec]of Object['entries'](_0x4e5257)){const _0x1bad6d=config['portfolio'][_0x5b9a87(0x1c7)](_0x4f35f8=>_0x4f35f8['coin']==_0x7ca464),_0x2c7853=_0x7ca464+'/'+_0x6b08fb,_0x29c4e4=_0x6b08fb+'/'+_0x7ca464,_0x508983=currentCoins[_0x5b9a87(0x1c7)](_0x3d0ed1=>_0x3d0ed1[_0x5b9a87(0x1a3)]==_0x7ca464);if((_0x36a3ec!=0x0||_0x1bad6d)&&(allSymbols['includes'](_0x2c7853)||_0x7ca464==_0x6b08fb))_0x508983?_0x5ae5f9[_0x5b9a87(0x1b3)]({..._0x508983,'number':Math[_0x5b9a87(0x23c)](_0x36a3ec+(_0x1bad6d&&_0x1bad6d[_0x5b9a87(0xb2)]||0x0),0x0)}):_0x5ae5f9[_0x5b9a87(0x1b3)]({'coin':_0x7ca464,'symbol':_0x2c7853,'reverse':![],'number':Math[_0x5b9a87(0x23c)](_0x36a3ec+(_0x1bad6d&&_0x1bad6d[_0x5b9a87(0xb2)]||0x0),0x0),'orderstatus':_0x5b9a87(0x243)});else{if((_0x36a3ec!=0x0||_0x1bad6d)&&allSymbols[_0x5b9a87(0x174)](_0x29c4e4))_0x508983?_0x5ae5f9['push']({..._0x508983,'number':Math[_0x5b9a87(0x23c)](_0x36a3ec+(_0x1bad6d&&_0x1bad6d[_0x5b9a87(0xb2)]||0x0),0x0)}):_0x5ae5f9[_0x5b9a87(0x1b3)]({'coin':_0x7ca464,'symbol':_0x29c4e4,'reverse':!![],'number':Math[_0x5b9a87(0x23c)](_0x36a3ec+(_0x1bad6d&&_0x1bad6d[_0x5b9a87(0xb2)]||0x0),0x0),'orderstatus':'none'});else _0x1bad6d&&_0x5ae5f9[_0x5b9a87(0x1b3)]({'coin':_0x1bad6d[_0x5b9a87(0x1a3)],'symbol':_0x1bad6d[_0x5b9a87(0x119)],'reverse':_0x1bad6d[_0x5b9a87(0x14f)],'number':0x0,'orderstatus':_0x5b9a87(0x243)});}}return _0x5ae5f9[_0x5b9a87(0xa0)]((_0xe815b8,_0x2afa9c)=>_0xe815b8['delta']<_0x2afa9c[_0x5b9a87(0x231)]?0x1:_0x2afa9c[_0x5b9a87(0x231)]<_0xe815b8[_0x5b9a87(0x231)]?-0x1:0x0),_0x451de0=cloneDeep(_0x5ae5f9),_0x5ae5f9=_0x5ae5f9[_0x5b9a87(0x25f)](_0x190fa2=>{const _0x24f11e=_0x5b9a87,_0x15686c=config[_0x24f11e(0x1b2)][_0x24f11e(0x1c7)](_0x188b0b=>_0x188b0b[_0x24f11e(0x1a3)]==_0x190fa2[_0x24f11e(0x1a3)]);return _0x15686c&&!_0x15686c[_0x24f11e(0x165)];}),[_0x5ae5f9,_0x451de0];}async function getCoinNumber(_0x20e431){const _0xae3024=_0x1c9209;let _0x4f93ba;try{const _0xe54b09=await exchange[_0xae3024(0x234)]();_0x4f93ba=_0xe54b09[_0xae3024(0x1ee)][_0x20e431];}catch(_0x532872){await handleError(_0x532872,_0xae3024(0x126));}return _0x4f93ba;}async function getOpenOrders(){const _0x3fba67=_0x1c9209;let _0x3ceb23;allOpenOrders=[];try{for(const _0x38f550 of config[_0x3fba67(0x1b2)]){!_0x38f550[_0x3fba67(0x165)]&&_0x38f550['coin']!=config['basecoin']&&(_0x3ceb23=await exchange[_0x3fba67(0x1f1)](_0x38f550[_0x3fba67(0x119)]),_0x3ceb23[_0x3fba67(0x215)]>0x0&&allOpenOrders['push'](_0x3ceb23[0x0]));}}catch(_0x1a4f3b){await handleError(_0x1a4f3b,_0x3fba67(0x25c));}}async function handleOpenOrders(_0x502202=0x0){const _0x45f9ac=_0x1c9209;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x502202==0x0?(logger[_0x45f9ac(0xa3)](_0x45f9ac(0x172)),_0x502202++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x45f9ac(0x179)),validateOrders(_0x45f9ac(0x1a1))));}async function testAPI(_0x168091){const _0x20ef78=_0x1c9209,_0x38add5=ccxt['pro'][_0x168091['exchange'][_0x20ef78(0x208)]()],_0x5b8405=new _0x38add5({'apiKey':_0x168091[_0x20ef78(0xac)],'secret':_0x168091[_0x20ef78(0x12a)],'options':{'defaultType':_0x20ef78(0x1b8)}});if(_0x168091['apiPassword'])_0x5b8405['password']=_0x168091[_0x20ef78(0xd9)];try{await _0x5b8405[_0x20ef78(0x234)]();}catch(_0x502868){logger[_0x20ef78(0xa3)](_0x20ef78(0xf9)+_0x502868['toString']());throw _0x502868;}}function cloneDeep(_0x2f68a2){const _0x52a528=_0x1c9209;return JSON[_0x52a528(0x1bf)](JSON[_0x52a528(0xe3)](_0x2f68a2));}async function getPortfolio(_0x16ec6e){const _0x2abcb0=_0x1c9209;let _0x477de1=[],_0x1e1094=[],_0x3c1165=[],_0x5e6665;_0x16ec6e[_0x2abcb0(0xac)]=decryptRSA(secure[_0x2abcb0(0xbf)],_0x16ec6e[_0x2abcb0(0xac)]),_0x16ec6e[_0x2abcb0(0x12a)]=decryptRSA(secure[_0x2abcb0(0xbf)],_0x16ec6e[_0x2abcb0(0x12a)]);if(_0x16ec6e['apiPassword'])_0x16ec6e[_0x2abcb0(0xd9)]=decryptRSA(secure[_0x2abcb0(0xbf)],_0x16ec6e['apiPassword']);if(_0x16ec6e['apiKey']!==_0x2abcb0(0x1a9)||_0x16ec6e['apiSecret']!=='************'||_0x16ec6e[_0x2abcb0(0xd9)]&&_0x16ec6e[_0x2abcb0(0xd9)]!==_0x2abcb0(0x1a9)){if(config[_0x2abcb0(0x121)]){if(_0x16ec6e[_0x2abcb0(0xac)]==_0x2abcb0(0x1a9))_0x16ec6e[_0x2abcb0(0xac)]=config['apiKey'];if(_0x16ec6e[_0x2abcb0(0x12a)]==_0x2abcb0(0x1a9))_0x16ec6e[_0x2abcb0(0x12a)]=config[_0x2abcb0(0x12a)];if(_0x16ec6e[_0x2abcb0(0xd9)]==_0x2abcb0(0x1a9))_0x16ec6e['apiPassword']=config['apiPassword'];}try{await testAPI(_0x16ec6e);}catch(_0x572fe1){if(_0x572fe1[_0x2abcb0(0x18f)]()[_0x2abcb0(0x174)](_0x2abcb0(0x164))){logHistory(_0x2abcb0(0x1f5),_0x2abcb0(0xdd)),proxyEmit(_0x2abcb0(0x175),![]);return;}else{logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x2abcb0(0x191),_0x572fe1),proxyEmit(_0x2abcb0(0x175),![]);return;}}exchange?updateExchange(_0x16ec6e[_0x2abcb0(0xac)],_0x16ec6e[_0x2abcb0(0x12a)],_0x16ec6e[_0x2abcb0(0xd9)]):await initExchange(_0x16ec6e[_0x2abcb0(0x121)],_0x16ec6e['apiKey'],_0x16ec6e['apiSecret'],_0x16ec6e[_0x2abcb0(0xd9)]);await loadSymbols();const _0x8bfbba=await getCoins(0x0,![],_0x16ec6e[_0x2abcb0(0x170)]);_0x3c1165=cloneDeep(_0x8bfbba[0x1]);}else{const _0x7c093=await getCoins();_0x3c1165=cloneDeep(_0x7c093[0x1]);}if(_0x16ec6e['basecoin']=='')proxyEmit(_0x2abcb0(0x175),!![]),proxyEmit('portfolio2',_0x3c1165);else{_0x3c1165['forEach'](_0x3bba0e=>{const _0x1fb352=_0x2abcb0;if(_0x3bba0e['coin']!=_0x16ec6e[_0x1fb352(0x170)]&&allSymbols['includes'](_0x3bba0e[_0x1fb352(0x119)]))_0x477de1['push'](_0x3bba0e[_0x1fb352(0x119)]);});if(_0x477de1[_0x2abcb0(0x215)]==0x0)logHistory('error',_0x2abcb0(0x25e));else{try{_0x1e1094=await getTickers(_0x477de1);}catch(_0x19172a){logHistory(_0x2abcb0(0x1f5),_0x2abcb0(0x108)),logger['debug'](_0x2abcb0(0x13b),_0x19172a),proxyEmit(_0x2abcb0(0x175),![]);return;}_0x3c1165['forEach'](_0x177079=>{const _0x1f5c14=_0x2abcb0;_0x177079[_0x1f5c14(0x1a3)]!=_0x16ec6e[_0x1f5c14(0x170)]?_0x1e1094[_0x177079[_0x1f5c14(0x119)]]?_0x5e6665=_0x177079[_0x1f5c14(0x14f)]?0x1/_0x1e1094[_0x177079['symbol']][_0x1f5c14(0x1aa)]:_0x1e1094[_0x177079[_0x1f5c14(0x119)]][_0x1f5c14(0x1aa)]:_0x5e6665=0x0:_0x5e6665=0x1,_0x177079[_0x1f5c14(0xf3)]=formatResult(_0x5e6665,0x8);}),await getMarketCap(_0x3c1165),proxyEmit(_0x2abcb0(0x175),!![]),proxyEmit(_0x2abcb0(0xeb),_0x3c1165);}}}function truncateTradeAmount(_0x57781a,_0x1e6550){let _0x477aea=0x0;try{_0x477aea=exchange['amountToPrecision'](_0x57781a,_0x1e6550);}catch(_0x1d0e49){}return _0x477aea;}function checkMinimums(_0x29be78){const _0x411373=_0x1c9209;let _0x3917e3=!![];const _0x5c3e86=!_0x29be78[_0x411373(0x14f)]?markets[_0x29be78[_0x411373(0x119)]]['limits']['amount'][_0x411373(0xfb)]:markets[_0x29be78['symbol']][_0x411373(0x142)][_0x411373(0x11b)][_0x411373(0xfb)],_0x4fe3c8=!_0x29be78['reverse']?markets[_0x29be78[_0x411373(0x119)]]['limits']['cost'][_0x411373(0xfb)]:markets[_0x29be78[_0x411373(0x119)]][_0x411373(0x142)][_0x411373(0x13e)][_0x411373(0xfb)],_0x263c32=truncateTradeAmount(_0x29be78['symbol'],_0x29be78['trade']);_0x29be78['trade']=_0x263c32;if(Math[_0x411373(0xa8)](_0x263c32)<_0x5c3e86)_0x3917e3=![];if(Math[_0x411373(0xa8)](_0x263c32)*_0x29be78['last']<_0x4fe3c8)_0x3917e3=![];if(_0x29be78[_0x411373(0x13d)]=='sell'){let _0x5b4461=config[_0x411373(0x1b2)][_0x411373(0x1c7)](_0x27c7bd=>_0x27c7bd[_0x411373(0x1a3)]==_0x29be78['coin']);if(_0x5b4461[_0x411373(0xb2)]>0x0){if(Math[_0x411373(0xa8)](_0x263c32)>_0x29be78[_0x411373(0xff)]-_0x5b4461[_0x411373(0xb2)])_0x3917e3=![];}else{if(Math[_0x411373(0xa8)](_0x263c32)>_0x29be78[_0x411373(0xff)])_0x3917e3=![];}}if(_0x29be78[_0x411373(0x13d)]==_0x411373(0x158)){let _0x568e20=config[_0x411373(0x1b2)][_0x411373(0x1c7)](_0x1d2d85=>_0x1d2d85[_0x411373(0x1a3)]==config[_0x411373(0x170)]),_0xb686a4=currentCoins['find'](_0x4c17a4=>_0x4c17a4[_0x411373(0x1a3)]==config[_0x411373(0x170)]);if(_0x568e20[_0x411373(0xb2)]>0x0){if(Math[_0x411373(0xa8)](_0x263c32)*_0x29be78['last']>_0xb686a4[_0x411373(0xff)]-_0x568e20[_0x411373(0xb2)])_0x3917e3=![];}else{if(Math[_0x411373(0xa8)](_0x263c32)*_0x29be78[_0x411373(0x1aa)]>_0xb686a4[_0x411373(0xff)])_0x3917e3=![];}}return _0x3917e3;}async function getBalances(_0x54d54b=!![]){const _0x3a01d5=_0x1c9209;let _0xdd2b90=0x0,_0x3e8e69;const _0x45485f=config[_0x3a01d5(0x201)];if(config[_0x3a01d5(0x1fc)]&&config[_0x3a01d5(0x11c)]<0x0)await validate24hChanges();currentCoins[_0x3a01d5(0x223)](_0x292700=>{const _0x577aa9=_0x3a01d5;if(_0x292700[_0x577aa9(0x1a3)]!=config[_0x577aa9(0x170)]){let _0x182c01=gTicker[noslash(_0x292700[_0x577aa9(0x119)])];_0x3e8e69=_0x292700['reverse']?0x1/_0x182c01:_0x182c01;}else _0x3e8e69=0x1;let _0x22f28e=_0x292700[_0x577aa9(0xff)]*_0x3e8e69;_0xdd2b90+=_0x22f28e,_0x292700[_0x577aa9(0x1aa)]=formatResult(Number(_0x3e8e69),0x8),_0x292700[_0x577aa9(0x239)]=_0x22f28e;}),currentCoins[_0x3a01d5(0x223)](_0x5d18ae=>{const _0x62fda=_0x3a01d5;let _0x241748=config[_0x62fda(0x1b2)][_0x62fda(0x1c7)](_0x26e77f=>_0x26e77f['coin']==_0x5d18ae[_0x62fda(0x1a3)]),_0x123e69=Number(_0x241748[_0x62fda(0xfc)]),_0x37d7d9=_0x5d18ae[_0x62fda(0x239)]/_0xdd2b90*0x64,_0x3f7c78=_0x123e69*_0xdd2b90/0x64/_0x5d18ae[_0x62fda(0x1aa)]-_0x5d18ae[_0x62fda(0xff)];_0x5d18ae[_0x62fda(0xfc)]=formatResult(_0x37d7d9,0x3),_0x5d18ae['target']=formatResult(_0x123e69,0x3),_0x5d18ae['trade']=formatResult(_0x3f7c78,0x8),_0x5d18ae[_0x62fda(0x13d)]='',_0x5d18ae[_0x62fda(0xc4)]=![];if(_0x5d18ae[_0x62fda(0x1a3)]!=config['basecoin']){if(_0x5d18ae[_0x62fda(0xfc)]>_0x123e69)_0x5d18ae[_0x62fda(0x13d)]='sell',_0x5d18ae[_0x62fda(0xc4)]=checkMinimums(_0x5d18ae);else _0x5d18ae[_0x62fda(0xfc)]<_0x123e69&&(_0x5d18ae[_0x62fda(0x13d)]=_0x62fda(0x158),_0x5d18ae[_0x62fda(0xc4)]=checkMinimums(_0x5d18ae));}_0x5d18ae[_0x62fda(0x231)]=_0x5d18ae[_0x62fda(0xfc)]/_0x5d18ae[_0x62fda(0x1b5)]-0x1;if(_0x5d18ae[_0x62fda(0x22a)]=='filled'||_0x5d18ae['orderstatus']==_0x62fda(0x1fb))_0x5d18ae['orderstatus']='none';}),currentCoins['sort']((_0x362beb,_0x5b4707)=>_0x362beb[_0x3a01d5(0x231)]<_0x5b4707[_0x3a01d5(0x231)]?0x1:_0x5b4707['delta']<_0x362beb['delta']?-0x1:0x0);const _0x4a2c56=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4a2c56[_0x3a01d5(0x17a)],'usd':_0x4a2c56['usd'],'portfolio':JSON[_0x3a01d5(0xe3)](currentCoins),'threshold':_0x45485f},proxyEmit(_0x3a01d5(0x10e),{'serverversion':serverversion,'balances':lastBalances});if(_0x54d54b){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x45485f});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x45485f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x19512f=getNormalizedPerformance();getStartingBalances(_0x19512f),emitPerformance(_0x19512f);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2b8f76=_0x1c9209;if(!lastBalances)return;let _0xf7189b=[],_0x5b0bee,_0x4177b8=JSON[_0x2b8f76(0x1bf)](lastBalances['portfolio']);_0x4177b8[_0x2b8f76(0xa0)]((_0x5a00c8,_0x4b5c3d)=>_0x5a00c8[_0x2b8f76(0x1a3)]>_0x4b5c3d[_0x2b8f76(0x1a3)]?0x1:_0x4b5c3d[_0x2b8f76(0x1a3)]>_0x5a00c8[_0x2b8f76(0x1a3)]?-0x1:0x0),_0x4177b8[_0x2b8f76(0x223)](_0xf77b12=>{const _0x2e6bf5=_0x2b8f76;let _0x23724e={'coin':_0xf77b12[_0x2e6bf5(0x1a3)],'number':_0xf77b12[_0x2e6bf5(0xff)],'price':_0xf77b12['last']};_0xf7189b[_0x2e6bf5(0x1b3)](_0x23724e);});const _0x15412f=await getFiat();_0x5b0bee={'date':lastBalances[_0x2b8f76(0xcb)][_0x2b8f76(0x23d)]('\x20')[0x0],'eur':_0x15412f[_0x2b8f76(0x17a)],'usd':_0x15412f[_0x2b8f76(0x1d6)],'coins':_0xf7189b};let _0x16160f=dbPerformance[_0x2b8f76(0x124)](_0x2b8f76(0x185))[_0x2b8f76(0x1c7)]({'date':_0x5b0bee['date']})[_0x2b8f76(0x239)]();_0x16160f?_0x5b0bee[_0x2b8f76(0x15a)]!=config[_0x2b8f76(0xb0)]&&dbPerformance[_0x2b8f76(0x124)](_0x2b8f76(0x185))[_0x2b8f76(0x1c7)]({'date':_0x5b0bee[_0x2b8f76(0x15a)]})[_0x2b8f76(0xf0)](_0x5b0bee)[_0x2b8f76(0x21e)]():dbPerformance['get'](_0x2b8f76(0x185))['push'](_0x5b0bee)[_0x2b8f76(0x21e)](),lastPerformanceStored=getHour();}function _0x2311(){const _0x16828e=['secure','code','writeFile','(((.+)+)+)+$','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','privateKey','status','differenceInSeconds','initclient','liquidity','valid','DDoSProtection','realized','initTickers()','Executed\x20','USDC','balancing\x20resumes\x20when\x20cooldown\x20ends','time','2\x20-\x20Orders\x20unlocked','\x20MB','cancelOrder','USD','padStart','-------------------------------\x0a','Exception\x20thrown\x20in\x20','110Tpncvf','USDT','util','4435164RdFCBZ','3156icKiwo','marketcap','apiPassword','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','join','-events.json','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','change','<b>','quote','ID:\x20','sqrt','stringify','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','coins','Resuming\x20(','\x20has\x20a\x2024h\x20drop\x20of\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Net\x20','isEqual','portfolio2','version','padEnd','logs','existsSync','assign','openOrders','password','price','bid','\x20change','getHours','Order(s)\x20not\x20validated\x20after\x20','complete','Error\x20in\x20testAPI():\x20','\x20uses\x20','min','distribution','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Manual\x20balancing\x20required','number','Trigger:\x20','open','PermissionDenied','\x20>\x20details:','cloneDeep','running','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Resetting\x20bot\x20history','Unknown\x20error\x20-\x20check\x20logs','Bot\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','./version.json','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','type','balances','keys','861289NZGiBP','warning','getMinutes','\x20API\x20key\x20is\x20invalid','market','Initializing\x20exchange','%\x20(','storeConfiguration','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','symbol','settings','cost','change24h','2\x20-\x20handling\x20FILLED\x20order:\x20','production','getTime','recovery','exchange','InsufficientFunds','limit-low','get','Bitget','getCoinNumber()','ordertype','event','memoryUsage','apiSecret','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Huobipro','rightTxt','added','staging','map','exec','-config.json','getPortfolio','floor','loadMarkets','watchTradesForSymbols()','final','autoliquidity','order','slice','Error\x20details\x20(1):','status\x20code\x20401','side','amount','set','Invalid\x20balance\x20for\x20','1\x20-\x20Validate\x20orders:\x20','limits','changes','timestamp','buys','trade','cooldown','resetHistory','PAXG','\x20|\x20lock\x20orders:\x20','marketcapsqrt','coin-loading-progress','shift','\x20minutes\x20-\x20','reverse','\x20/\x20','Order\x20amount\x20is\x20invalid:\x20','\x20API\x20secret\x20is\x20invalid','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','recreateCoinResults()','ongoing','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','full','buy','create','date','ccxt','watchOrders','1\x20-\x20FILLED\x20known\x20order:\x20','cancel','Initializing\x20coin\x20results','bot','filled','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','sendMetricsTelegram','AuthenticationError','excluded','bots','has','date-fns','LOCKED','\x20>\x20','fetchTickers','ask','limit-high','slider','/USDT','basecoin','freeze','1\x20-\x20Handle\x20open\x20orders',':\x20Bot\x20','includes','portfolio1','Network\x20error\x20details:','RETRY\x20-\x20Error\x20in\x20','toggleBotMode','2\x20-\x20Handled\x20open\x20orders','eur','marketcapApi','progress','toFixed','1825HUWEaw','sells','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Order\x20filled:\x20','31564LYMDGf','marketcapEnabled','3623xEsCGS','data',')\x20|\x20exchange:\x20','\x20metrics:</b>\x20\x0a\x0a','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',')\x20known\x20order:\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','active','ORDERS.UNLOCKED','fromCodePoint','toString','showConfig','Error\x20details\x20(0):','Bybit','remainingSymbols','fetchTickers()','lowdb/adapters/FileSync','\x20-\x20','ExchangeNotAvailable','string','success','fetchTicker','createOrder','Unknown\x20error:\x20','Headless:\x20','Error\x20details:','414LGjQBK','onepagemode','no\x20open\x20orders','Loading\x20symbols','coin','Fee\x20discount\x20refund\x20detected:\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','deleteHistoryAlerts','2.6.0','************','last','indexOf','uncaughtException','Block\x20transaction\x20detection:\x20','detectLiquidityChange()','UNLOCKED','\x20orders\x20in\x20less\x20than\x20','basecoinvalue','portfolio','push','\x20|\x20highest\x20fee:\x20','target','Resetting\x20coin\x20results:\x20','RequestTimeout','spot','sendPortfolioTelegram','\x20>\x20pausing\x20bot\x20for\x20','enabled','highest','Order\x20is\x20invalid:\x20','customId','parse','toUpperCase','currency','argv','\x20>\x20[DEBUG]\x20','2.6.23','page','entries','find','bot-','send','2.3.5','getMonth','sortBy','defaults','./logs/','-results.json','MIN_NOTIONAL','emojibuy','update-liquidity','\x20exchange\x20error:\x20','recent20','placeOrder','usd','timeshift','.json','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Limit\x20(low-margin)','***','Exchange\x20error\x20details:','configuration-stored','replace','leftTxt','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20|\x20exchange:\x20','3795099NAwYwb','InvalidNonce','limit','event-history','placeOrder()','Reset\x20|\x20','EUR','pro','datetime','RETRY\x20-\x20Problem\x20resolved\x20after\x20','RateLimitExceeded','format','total','getDate','initial','fetchOpenOrders','fetchBalance()','1\x20-\x20Unlocking\x20orders','process\x20','error','./config/','watchOrders()','BNB/','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Valid\x20balance\x20for\x20','canceled','headless','getSeconds','breakeven','startsWith','ORDERS.LOCKED','threshold','ETH','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Symbol(s):\x20','ExchangeError','orderId','Initiating\x20bot\x20restart','toLowerCase','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','add','2.6.22','emojisell','privateKeyFromPem','sha256','\x20attempts','BTC','round','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','net-fiat','length','USDP','Invalid\x20quantity','decode64','fees','path','red_yellow_blue','Loading\x20completed','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','write','5492712oQddJI','Pausing\x20for\x20','\x20portfolio:</b>\x20\x0a\x0a','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','forEach','Binance','Market','/EUR','removed','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timeout','orderstatus','API-key\x20format\x20invalid','bb-settings.json','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','quick','1\x20-\x20partially\x20FILLED\x20(','closed','delta','market_cap','<b>Bot\x20','fetchBalance','exchanges','starting-balance-','</pre>','unlinkSync','value','net-basecoin','sell','max','split',')\x20unknown\x20order:\x20','yargs/yargs','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20|\x20','heapUsed','none','args','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','getFullYear','mkdirSync','storeHeadless','watchTrades','/backup/','\x20|\x20Custom\x20ID:\x20','Saving\x20configuration','/USD','startnumber','splice','environment','performance','yyyy/MM/dd','-performance.json','constructor','Stopped\x20fetching\x20balance\x20after\x20','/output-000.log','Huobi','InvalidOrder','watchTrades()','configuration','Insufficient\x20funds\x20to\x20execute\x20order:\x20','getOpenOrders()','Avoiding\x20continuous\x20order\x20attempts','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','filter','<pre>','Initializing\x20exchange:\x20already\x20done','log','sort','botname','showname','debug','substring','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Portfolio\x20change\x20detected:\x20','BUSD','abs','createWriteStream','fiat','BNB','apiKey','pop','search','Exchange','startdate',':\x20timer\x20>','offset','request-time','percentage','function','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','UNLOCKING','fee','183TeOCae'];_0x2311=function(){return _0x16828e;};return _0x2311();}function getNormalizedPerformance(){const _0x2e666a=_0x1c9209;let _0x1241b1=[];if(dbPerformance[_0x2e666a(0x167)](_0x2e666a(0x185))[_0x2e666a(0x239)]()){let _0x260ecc=dbPerformance[_0x2e666a(0x124)]('data')['cloneDeep']()[_0x2e666a(0x25f)](_0x58e33d=>{if(_0x58e33d['coins']['length']==0x0)return![];else return!![];})[_0x2e666a(0x1cc)](_0x2e666a(0x15a))[_0x2e666a(0x239)](),_0x3ac5fd=[...config[_0x2e666a(0xc3)]];_0x3ac5fd[_0x2e666a(0xa0)]((_0xa51462,_0x99b9c3)=>_0xa51462['date']>_0x99b9c3[_0x2e666a(0x15a)]?-0x1:_0x99b9c3[_0x2e666a(0x15a)]>_0xa51462['date']?0x1:0x0);let _0xafb972=0x1,_0x1be69b=[],_0x16893d=0x0;_0x260ecc['slice']()[_0x2e666a(0x14f)]()[_0x2e666a(0x223)]((_0x5cd4a5,_0x5c6490)=>{const _0x49a354=_0x2e666a;if(_0x3ac5fd[_0x16893d]){if(_0x260ecc[_0x260ecc[_0x49a354(0x215)]-_0x5c6490]&&_0x3ac5fd[_0x16893d][_0x49a354(0x15a)]==_0x260ecc[_0x260ecc[_0x49a354(0x215)]-_0x5c6490][_0x49a354(0x15a)]){if(_0x5c6490<_0x260ecc[_0x49a354(0x215)]){let _0x2b6be9=0x0,_0x5d3ae6=0x0;_0x260ecc[_0x260ecc[_0x49a354(0x215)]-_0x5c6490][_0x49a354(0xe5)][_0x49a354(0x223)](_0x232f71=>{const _0x2b18c3=_0x49a354;_0x5d3ae6+=_0x232f71[_0x2b18c3(0xff)]*_0x232f71[_0x2b18c3(0xf3)];}),_0x3ac5fd[_0x16893d][_0x49a354(0x143)][_0x49a354(0x223)](_0xae913a=>{const _0x10c3e4=_0x49a354;_0x2b6be9+=_0xae913a[_0x10c3e4(0xff)]*_0xae913a[_0x10c3e4(0xf3)];}),_0xafb972*=_0x2b6be9/(_0x5d3ae6-_0x2b6be9)+0x1;}_0x16893d++;}}let _0x21933c=0x0;_0x5cd4a5['coins'][_0x49a354(0x223)](_0x3d48ec=>{const _0x48ef47=_0x49a354;_0x21933c+=_0x3d48ec[_0x48ef47(0xff)]*_0x3d48ec[_0x48ef47(0xf3)];}),_0x1be69b[_0x260ecc[_0x49a354(0x215)]-_0x5c6490-0x1]=_0x21933c*(_0xafb972-0x1);});let _0x84e4b8=[];_0x3ac5fd=[...config[_0x2e666a(0xc3)]]||[];let _0x299355=0x0;_0x16893d=0x0,_0x260ecc[_0x2e666a(0x223)]((_0x14c3a7,_0x42e3dd)=>{const _0x2ae594=_0x2e666a;if(_0x3ac5fd[_0x16893d]){const _0x5089a1=fns[_0x2ae594(0x1bf)](_0x3ac5fd[_0x16893d][_0x2ae594(0x15a)],'yyyy/MM/dd',new Date()),_0x1b86c0=fns[_0x2ae594(0x1bf)](_0x14c3a7[_0x2ae594(0x15a)],_0x2ae594(0x252),new Date());if(fns['isEqual'](_0x5089a1,_0x1b86c0)){let _0x10ede5=0x0;_0x3ac5fd[_0x16893d][_0x2ae594(0x143)][_0x2ae594(0x223)](_0x2b8a49=>{const _0x33ab67=_0x2ae594;!_0x84e4b8[_0x2b8a49['coin']]?_0x84e4b8[_0x2b8a49[_0x33ab67(0x1a3)]]=_0x2b8a49['number']:(_0x10ede5=_0x84e4b8[_0x2b8a49[_0x33ab67(0x1a3)]],_0x84e4b8[_0x2b8a49[_0x33ab67(0x1a3)]]+=_0x2b8a49['number']);const _0x58c119=_0x14c3a7['coins'][_0x33ab67(0x1c7)](_0x2fd544=>_0x2fd544[_0x33ab67(0x1a3)]==_0x2b8a49[_0x33ab67(0x1a3)]);(!_0x58c119||_0x58c119['number']==0x0)&&(_0x299355+=(-_0x2b8a49[_0x33ab67(0xff)]-_0x10ede5)*_0x2b8a49[_0x33ab67(0xf3)]);}),_0x16893d++;}}_0x14c3a7[_0x2ae594(0xe5)]['forEach']((_0xc04d4f,_0x3fa34c)=>{const _0x57ec7f=_0x2ae594;_0x84e4b8[_0xc04d4f[_0x57ec7f(0x1a3)]]&&(_0xc04d4f[_0x57ec7f(0x1f0)]=_0x84e4b8[_0xc04d4f[_0x57ec7f(0x1a3)]]);}),_0x1241b1[_0x2ae594(0x1b3)]({'date':_0x14c3a7['date'],'eur':_0x14c3a7['eur'],'usd':_0x14c3a7[_0x2ae594(0x1d6)],'offset':_0x1be69b[_0x42e3dd],'netoffset':_0x299355,'coins':_0x14c3a7[_0x2ae594(0xe5)]});});}return _0x1241b1;}function emitPerformance(_0x54d374){const _0x2394b9=_0x1c9209;_0x54d374['length']!==0x0?(proxyEmit(_0x2394b9(0x251),_0x54d374),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x10e34e,_0x445dd4){const _0x5875ec=_0x1c9209;let _0x10f7cf=0x0,_0x527f74=0x0,_0x310b8d=0x0;_0x10e34e['coins'][_0x5875ec(0x223)](_0x15a4e9=>{_0x10f7cf+=_0x15a4e9['number']*_0x15a4e9['price'];});_0x445dd4&&(_0x10f7cf+=_0x10e34e['offset']);if(config[_0x5875ec(0x170)]===_0x5875ec(0x211)||config[_0x5875ec(0x170)]===_0x5875ec(0x202)||config[_0x5875ec(0x170)]===_0x5875ec(0x149))_0x527f74=_0x10f7cf*_0x10e34e[_0x5875ec(0x17a)],_0x310b8d=_0x10f7cf*_0x10e34e['usd'];else{if(usdBasecoins[_0x5875ec(0x174)](config[_0x5875ec(0x170)]))_0x527f74=_0x10f7cf*_0x10e34e[_0x5875ec(0x17a)]/_0x10e34e['usd'],_0x310b8d=_0x10f7cf;else config[_0x5875ec(0x170)]===_0x5875ec(0x1e8)&&(_0x527f74=_0x10f7cf,_0x310b8d=_0x10f7cf*_0x10e34e['usd']/_0x10e34e[_0x5875ec(0x17a)]);}return[_0x10f7cf,_0x527f74,_0x310b8d];}function getKPIs(_0xdc536a,_0x56da40=_0x1c9209(0x1e8)){const _0x181921=_0x1c9209,_0x2ccd7e=config['basecoin'],_0xb7dfc5=lastBalances,_0x4e958d=currentCoins,_0x97cc99=getNormalizedPerformance(),_0x12e562=_0xdc536a==='basecoin'?_0x2ccd7e:_0xdc536a===_0x181921(0xaa)||_0xdc536a===_0x181921(0x214)?_0x56da40:_0x181921(0xe9)+_0x2ccd7e,_0x557fc0=_0xdc536a===_0x181921(0x23a)?'Net\x20effect':_0xdc536a===_0x181921(0x214)?'Net\x20effect':_0x12e562+'\x20value',_0x28feab=_0xdc536a===_0x181921(0x23a)||_0xdc536a===_0x181921(0x214)?'Net\x20effect':_0x12e562+_0x181921(0xf5);let _0x1e4a77=0x0;_0x4e958d[_0x181921(0x223)](_0x51c66a=>{const _0x5d03f9=_0x181921;_0x1e4a77+=_0x51c66a[_0x5d03f9(0xff)]*_0x51c66a[_0x5d03f9(0x1aa)];});if(_0xdc536a==='fiat'||_0xdc536a===_0x181921(0x214)){if(_0x2ccd7e===_0x181921(0x211)||_0x2ccd7e===_0x181921(0x202)||_0x2ccd7e===_0x181921(0x149))_0x1e4a77=_0x1e4a77*(_0x56da40==='EUR'?_0xb7dfc5[_0x181921(0x17a)]:_0xb7dfc5[_0x181921(0x1d6)]);else{if(usdBasecoins[_0x181921(0x174)](_0x2ccd7e))_0x1e4a77=_0x1e4a77*(_0x56da40===_0x181921(0x1e8)?_0xb7dfc5['eur']/_0xb7dfc5[_0x181921(0x1d6)]:0x1);else _0x2ccd7e===_0x181921(0x1e8)&&(_0x1e4a77=_0x1e4a77*(_0x56da40===_0x181921(0x1e8)?0x1:_0xb7dfc5[_0x181921(0x1d6)]/_0xb7dfc5[_0x181921(0x17a)]));}}let _0x36b17d;if(_0x1e4a77!==0x0){if(_0xdc536a===_0x181921(0x170))_0x36b17d=(_0x1e4a77/startingBalances[_0x181921(0x170)]-0x1)*0x64;else{if(_0x56da40===_0x181921(0x1e8))_0x36b17d=(_0x1e4a77/startingBalances[_0x181921(0x17a)]-0x1)*0x64;else _0x36b17d=(_0x1e4a77/startingBalances[_0x181921(0x1d6)]-0x1)*0x64;}let _0x103113=0x0;if(startingBalances[_0x181921(0xe5)])_0x4e958d[_0x181921(0x223)](_0x430828=>{const _0x1b88e2=_0x181921;let _0x22e3fc=startingBalances[_0x1b88e2(0xe5)]['find'](_0x34d3db=>_0x34d3db[_0x1b88e2(0x1a3)]===_0x430828[_0x1b88e2(0x1a3)]);if(_0x22e3fc&&_0x22e3fc[_0x1b88e2(0x1a3)]&&_0x430828[_0x1b88e2(0xff)]!==0x0)_0x103113+=_0x22e3fc[_0x1b88e2(0xff)]*_0x430828[_0x1b88e2(0x1aa)];});let _0x39acb6=0x0;if(_0x97cc99['length']!==0x0){let _0x4c76f6=_0x97cc99[_0x97cc99[_0x181921(0x215)]-0x1];_0x39acb6=_0x4c76f6['netoffset'];}_0x103113-=_0x39acb6;_0xdc536a===_0x181921(0x23a)&&(_0x36b17d=(_0x1e4a77-_0x103113)/startingBalances[_0x181921(0x170)]*0x64,_0x1e4a77=_0x1e4a77-_0x103113);if(_0xdc536a==='net-fiat'){let _0x8deac3=_0x56da40===_0x181921(0x1e8)?startingBalances[_0x181921(0x17a)]:startingBalances[_0x181921(0x1d6)];if(_0x2ccd7e==='BTC'||_0x2ccd7e===_0x181921(0x202)||_0x2ccd7e===_0x181921(0x149))_0x103113=_0x56da40===_0x181921(0x1e8)?_0x103113*_0xb7dfc5['eur']:_0x103113*_0xb7dfc5[_0x181921(0x1d6)];else{if(usdBasecoins[_0x181921(0x174)](_0x2ccd7e))_0x103113=_0x56da40===_0x181921(0x1e8)?_0x103113*_0xb7dfc5['eur']/_0xb7dfc5[_0x181921(0x1d6)]:_0x103113;else _0x2ccd7e===_0x181921(0x1e8)&&(_0x103113=_0x56da40===_0x181921(0x1e8)?_0x103113:_0x103113*_0xb7dfc5[_0x181921(0x1d6)]/_0xb7dfc5['eur']);}_0x36b17d=(_0x1e4a77-_0x103113)/_0x8deac3*0x64,_0x1e4a77=_0x1e4a77-_0x103113;}if(_0x36b17d){if(_0x36b17d<0x64)_0x36b17d=_0x36b17d['toFixed'](0x2);else{if(_0x36b17d<0x3e8)_0x36b17d=_0x36b17d['toFixed'](0x1);else _0x36b17d=_0x36b17d['toFixed'](0x0);}}else _0x36b17d=Number('0')[_0x181921(0x17d)](0x2);if(_0x1e4a77){if(Math[_0x181921(0xa8)](_0x1e4a77)<0.000001)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x2);else{if(Math[_0x181921(0xa8)](_0x1e4a77)<0.1)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x6);else{if(Math[_0x181921(0xa8)](_0x1e4a77)<0x1)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x5);else{if(Math[_0x181921(0xa8)](_0x1e4a77)<0xa)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x4);else{if(Math['abs'](_0x1e4a77)<0x64)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x3);else{if(Math[_0x181921(0xa8)](_0x1e4a77)<0x3e8)_0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x2);else _0x1e4a77=_0x1e4a77[_0x181921(0x17d)](0x2);}}}}}}else _0x1e4a77=Number('0')[_0x181921(0x17d)](0x2);}else _0x36b17d=Number('0')[_0x181921(0x17d)](0x2);return{'value':_0x1e4a77,'change':_0x36b17d,'leftTxt':_0x557fc0,'rightTxt':_0x28feab};}async function getStartingBalances(_0x3f374d,_0x3f5aea=!![]){const _0x8a756e=_0x1c9209;if(_0x3f374d[_0x8a756e(0x215)]!==0x0){const [_0x4a8dcc,_0x19a696,_0x32118f]=getPerf(_0x3f374d[0x0],!![]);let _0x330101=[];config[_0x8a756e(0x1b2)][_0x8a756e(0x223)](_0x55ff82=>{const _0xd0f118=_0x8a756e;let _0x28fd12=0x0,_0x512332;config['liquidity']['forEach'](_0x50de12=>{const _0x3055fb=_0x16c1;let _0x4d3dd9=_0x50de12[_0x3055fb(0x143)][_0x3055fb(0x1c7)](_0x41772e=>_0x41772e[_0x3055fb(0x1a3)]==_0x55ff82['coin']);if(_0x4d3dd9){_0x28fd12+=_0x4d3dd9[_0x3055fb(0xff)];if(!_0x512332)_0x512332=_0x4d3dd9[_0x3055fb(0xf3)];}}),_0x330101[_0xd0f118(0x1b3)]({'coin':_0x55ff82[_0xd0f118(0x1a3)],'number':_0x28fd12,'initialprice':_0x512332});});const _0x500bb5={'basecoin':_0x4a8dcc,'eur':_0x19a696,'usd':_0x32118f,'coins':_0x330101};if(_0x3f5aea)proxyEmit('starting-balances',_0x500bb5);startingBalances=_0x500bb5;}}function headlessMode(_0x50dc41){const _0x572ebc=_0x1c9209;let _0x9d09e4=_0x50dc41[_0x572ebc(0x1b2)],_0x3df895=_0x50dc41[_0x572ebc(0x201)],_0x192fba=[];for(let _0x462741 of _0x9d09e4){if(_0x462741['coin']!=config[_0x572ebc(0x170)]){if(_0x462741['delta']>=_0x3df895/0x64){if(_0x462741[_0x572ebc(0xc4)])_0x192fba[_0x572ebc(0x1b3)](_0x462741);}else{if(_0x462741['delta']<=-_0x3df895/0x64){if(_0x462741[_0x572ebc(0xc4)])_0x192fba[_0x572ebc(0x1b3)](_0x462741);}}}}_0x192fba[_0x572ebc(0x215)]>0x0&&(lockOrders==ORDERS[_0x572ebc(0x1af)]&&!coolingDown&&_0x192fba[_0x572ebc(0x223)](_0x5dbf7f=>{const _0x5d9967=_0x572ebc;logger[_0x5d9967(0xa3)](_0x5d9967(0x100)+_0x5dbf7f[_0x5d9967(0x1a3)]+'\x20'+_0x5dbf7f[_0x5d9967(0xff)]+'\x20'+_0x5dbf7f['last']+'\x20'+_0x5dbf7f[_0x5d9967(0xfc)]+'%\x20'+_0x5dbf7f['target']+'%\x20'+(0x64*_0x5dbf7f[_0x5d9967(0x231)])[_0x5d9967(0x17d)](0x2)+_0x5d9967(0x116)+_0x3df895[_0x5d9967(0x17d)](0x2)+'%)');}),placeOrder(_0x192fba));}function notifyBalance(_0x5942c8){const _0x5711cc=_0x1c9209;let _0x103138=_0x5942c8['portfolio'],_0x5063ce=_0x5942c8['threshold'],_0x5b9152=[];for(let _0x120796 of _0x103138){if(_0x120796[_0x5711cc(0x1a3)]!=config[_0x5711cc(0x170)]){if(_0x120796[_0x5711cc(0x231)]>=_0x5063ce/0x64){if(_0x120796[_0x5711cc(0xc4)])_0x5b9152[_0x5711cc(0x1b3)](_0x120796);}else{if(_0x120796[_0x5711cc(0x231)]<=-_0x5063ce/0x64){if(_0x120796[_0x5711cc(0xc4)])_0x5b9152[_0x5711cc(0x1b3)](_0x120796);}}}}if(_0x5b9152[_0x5711cc(0x215)]>0x0){let _0x4585d0=_0x5b9152[_0x5711cc(0x130)](_0x5d16f9=>_0x5d16f9[_0x5711cc(0x1a3)]);_0x4585d0[_0x5711cc(0xa0)]();let _0x3617f1=_0x4585d0[_0x5711cc(0xdb)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5711cc(0xfe));lastCoinsToBalance=_0x3617f1;}}function symbolToCoin(_0x433e8c){const _0x582964=_0x1c9209;let _0x2b89d5;if(_0x433e8c[_0x582964(0x174)]('/'+config[_0x582964(0x170)]))_0x2b89d5=_0x433e8c[_0x582964(0x1de)]('/'+config[_0x582964(0x170)],'');if(_0x433e8c[_0x582964(0x174)](config[_0x582964(0x170)]+'/'))_0x2b89d5=_0x433e8c[_0x582964(0x1de)](config[_0x582964(0x170)]+'/','');return _0x2b89d5;}async function unlockOrders(_0xc186e7=![]){const _0x173d35=_0x1c9209;if(allOrdersPlaced&&lockOrders==ORDERS[_0x173d35(0x169)]){logger['debug'](_0x173d35(0x1f3)),lockOrders=ORDERS[_0x173d35(0xb7)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0xc186e7){const _0x1a69a7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1a69a7,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x173d35(0x1af)],logger['debug'](_0x173d35(0xcc));}}async function validateOrders(_0xe2dd6b){const _0x5054ac=_0x1c9209;if(_0xe2dd6b)validateOrdersState=_0xe2dd6b;logger[_0x5054ac(0xa3)](_0x5054ac(0x141)+validateOrdersState+_0x5054ac(0x14a)+(lockOrders==0x1?_0x5054ac(0x200):lockOrders==0x2?'ORDERS.UNLOCKING':_0x5054ac(0x18d)));let _0x2fda54=[],_0x5f5638=config[_0x5054ac(0x127)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5054ac(0x229)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5054ac(0x169)])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x1dd906=>{const _0x529547=_0x5054ac;let _0x1539a9=![];_0x1dd906[_0x529547(0x161)]>0x0&&(_0x1539a9=!![]),_0x2fda54[_0x529547(0x1b3)](_0x1539a9),_0x1539a9&&config[_0x529547(0x127)]!=_0x529547(0x114)&&logHistory(_0x529547(0x139),_0x529547(0x181)+_0x1dd906['symbol']+'\x20'+_0x1dd906[_0x529547(0x13d)]+'\x20#'+formatResult(_0x1dd906[_0x529547(0x161)],0x8)+'\x20@'+formatResult(_0x1dd906['price'],0x8));}),_0x2fda54[_0x5054ac(0x223)]((_0x478dd5,_0x449a95)=>{const _0x1950b7=_0x5054ac;if(_0x478dd5)lastOrders[_0x1950b7(0x24f)](_0x449a95,0x1);}),persistOpenOrders(lastOrders);const _0x1a4dc1=coolingDown?_0x5054ac(0xca):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x5054ac(0x155);if(_0x2fda54['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x5054ac(0x155)){if(_0x2fda54[_0x5054ac(0x174)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x5054ac(0x137))_0x2fda54[_0x5054ac(0x174)](![])&&(config[_0x5054ac(0x127)]==_0x5054ac(0x114)?logHistory(_0x5054ac(0x199),_0x5054ac(0xf7)+Math[_0x5054ac(0x212)](_0x5f5638*validateOrderInterval/0xea60)+_0x5054ac(0x14e)+_0x1a4dc1):(await cancelOrders(),logHistory(_0x5054ac(0x199),_0x5054ac(0x10a)+Math[_0x5054ac(0x212)](_0x5f5638*validateOrderInterval/0xea60)+_0x5054ac(0x14e)+_0x1a4dc1))),await unlockOrders(!![]);else{if(validateOrdersState==_0x5054ac(0x1a1)){if(config[_0x5054ac(0x127)]!=_0x5054ac(0x114))logHistory(_0x5054ac(0x199),'No\x20more\x20open\x20orders\x20-\x20'+_0x1a4dc1);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x359d07=_0x1c9209;lastOrders[_0x359d07(0x223)](async _0x54686e=>{const _0x267464=_0x359d07;try{const _0x3da214=await exchange['cancelOrder'](_0x54686e['orderId'],_0x54686e['symbol']);}catch(_0x222937){if(_0x222937['toString']()[_0x267464(0x174)]('OrderNotFound')){}else await handleError(_0x222937,'cancelOrders()');}});}async function initCoinResults(_0x585772){const _0x4c2f9f=_0x1c9209;_0x585772?logger[_0x4c2f9f(0xa3)](_0x4c2f9f(0x1b6)+_0x585772):logger[_0x4c2f9f(0xa3)](_0x4c2f9f(0x15f)),config[_0x4c2f9f(0x1b2)][_0x4c2f9f(0x223)](_0x55411b=>{const _0x1050d8=_0x4c2f9f;if(!_0x55411b[_0x1050d8(0x165)]&&_0x55411b['coin']!=config[_0x1050d8(0x170)]){const _0x19734b=currentCoins[_0x1050d8(0x1c7)](_0x30c980=>_0x30c980[_0x1050d8(0x1a3)]==_0x55411b[_0x1050d8(0x1a3)]),_0x5648e7=gTicker[noslash(_0x55411b['symbol'])];let _0xca603d=_0x19734b?_0x19734b[_0x1050d8(0xff)]:null,_0x524e31=_0x55411b['reverse']?0x1/_0x5648e7:_0x5648e7,_0x2e0ed2;config[_0x1050d8(0xc3)][_0x1050d8(0x223)](_0x58cea1=>{const _0x54a092=_0x1050d8;!_0x2e0ed2&&(_0x2e0ed2=_0x58cea1['changes'][_0x54a092(0x1c7)](_0x3d9868=>_0x3d9868[_0x54a092(0x1a3)]==_0x55411b[_0x54a092(0x1a3)]),_0x2e0ed2&&(_0xca603d=_0x2e0ed2['number'],_0x524e31=_0x2e0ed2[_0x54a092(0xf3)]));});let _0x28a0bc=dbCoinResults['get']('coins')[_0x1050d8(0x1c7)]({'coin':_0x55411b['coin']})[_0x1050d8(0x239)]();if(!_0x28a0bc){const _0x5a9e60={'coin':_0x55411b['coin'],'number':_0xca603d,'breakeven':_0x524e31,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x1050d8(0x1b3)](_0x5a9e60)[_0x1050d8(0x21e)]();}else{if(_0x585772&&_0x55411b[_0x1050d8(0x1a3)]==_0x585772){const _0x2215c9={'coin':_0x55411b[_0x1050d8(0x1a3)],'number':_0xca603d,'breakeven':_0x524e31,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1050d8(0x124)](_0x1050d8(0xe5))['find']({'coin':_0x55411b[_0x1050d8(0x1a3)]})[_0x1050d8(0xf0)](_0x2215c9)[_0x1050d8(0x21e)]();}}}});}async function updateCoinResults(_0x37c63f,_0xf1b377=![]){const _0x79d853=_0x1c9209;let _0x27a064,_0x14d379,_0x37530e,_0x257e57,_0x936a4a,_0x2d960a,_0x1b3857=dbCoinResults['get']('coins')[_0x79d853(0x1c7)]({'coin':_0x37c63f[_0x79d853(0x1a3)]})[_0x79d853(0x239)](),_0x143b22=![];_0x1b3857&&Object[_0x79d853(0x1c6)](_0x1b3857)['forEach'](([_0x2208f9,_0x40d567])=>{if(_0x40d567==null)_0x143b22=!![];});(!_0x1b3857||_0x143b22)&&(await initCoinResults(_0x37c63f['coin']),_0x1b3857=dbCoinResults[_0x79d853(0x124)](_0x79d853(0xe5))[_0x79d853(0x1c7)]({'coin':_0x37c63f[_0x79d853(0x1a3)]})[_0x79d853(0x239)]());_0x37c63f[_0x79d853(0x14f)]&&(_0x2d960a={'filled':_0x37c63f[_0x79d853(0x161)]*_0x37c63f['price'],'amount':_0x37c63f['filled']*_0x37c63f['price'],'side':_0x37c63f[_0x79d853(0x13d)]=='sell'?_0x79d853(0x158):_0x79d853(0x23b),'price':0x1/_0x37c63f[_0x79d853(0xf3)]},_0x37c63f={..._0x37c63f,..._0x2d960a});_0xf1b377?_0x14d379=_0x37c63f[_0x79d853(0x13d)]==_0x79d853(0x158)?_0x1b3857[_0x79d853(0xff)]+_0x37c63f[_0x79d853(0x161)]:_0x1b3857[_0x79d853(0xff)]-_0x37c63f[_0x79d853(0x161)]:_0x14d379=await getCoinNumber(_0x37c63f[_0x79d853(0x1a3)]);if(_0x37c63f[_0x79d853(0xb8)]&&_0x37c63f[_0x79d853(0xb8)][_0x79d853(0x1c1)]==config[_0x79d853(0x170)])_0x27a064=Number(_0x37c63f[_0x79d853(0xb8)][_0x79d853(0x11b)]);else{if(_0x37c63f[_0x79d853(0xb8)]&&_0x37c63f[_0x79d853(0xb8)][_0x79d853(0x1c1)]==_0x79d853(0xab)&&!_0xf1b377&&config['basecoin']!=_0x79d853(0x149))_0x27a064=Number(_0x37c63f['fee'][_0x79d853(0x11b)])*gTicker[_0x79d853(0xab)+config[_0x79d853(0x170)]];else _0x27a064=defaultFee*_0x37c63f[_0x79d853(0x161)]*_0x37c63f['price'];}_0x37c63f[_0x79d853(0x13d)]==_0x79d853(0x158)?(_0x37530e=_0x14d379!=0x0?(_0x1b3857[_0x79d853(0x1fe)]*_0x1b3857['number']+_0x37c63f[_0x79d853(0xf3)]*(_0x14d379-_0x1b3857[_0x79d853(0xff)])+_0x27a064)/_0x14d379:0x0,_0x257e57=_0x1b3857[_0x79d853(0xc6)]):(_0x37530e=_0x14d379!=0x0?(_0x1b3857['breakeven']*_0x1b3857[_0x79d853(0xff)]-_0x37c63f[_0x79d853(0xf3)]*(_0x1b3857['number']-_0x14d379)+_0x27a064)/_0x14d379:0x0,_0x257e57=_0x1b3857[_0x79d853(0xc6)]+(_0x37c63f['price']-_0x1b3857[_0x79d853(0x1fe)])*_0x37c63f[_0x79d853(0x161)]);_0x936a4a=(_0x37c63f[_0x79d853(0xf3)]-_0x37530e-_0x27a064/_0x37c63f['filled'])*_0x14d379;let _0x402666={'coin':_0x37c63f[_0x79d853(0x1a3)],'number':_0x14d379,'breakeven':formatResult(_0x37530e,0x8),'realized':formatResult(_0x257e57,0x8),'unrealized':formatResult(_0x936a4a,0x8),'fees':formatResult(_0x1b3857[_0x79d853(0x219)]+_0x27a064,0x8),'sells':_0x37c63f[_0x79d853(0x13d)]=='sell'?_0x1b3857['sells']+0x1:_0x1b3857[_0x79d853(0x17f)],'buys':_0x37c63f[_0x79d853(0x13d)]==_0x79d853(0x158)?_0x1b3857[_0x79d853(0x145)]+0x1:_0x1b3857[_0x79d853(0x145)]};dbCoinResults[_0x79d853(0x124)](_0x79d853(0xe5))[_0x79d853(0x1c7)]({'coin':_0x37c63f[_0x79d853(0x1a3)]})[_0x79d853(0xf0)](_0x402666)['write']();if(!_0xf1b377){if(_0x37c63f[_0x79d853(0xb8)]&&_0x37c63f[_0x79d853(0xb8)][_0x79d853(0x1c1)]=='BNB'){const _0x266dca=currentCoins['find'](_0x44e427=>_0x44e427['coin']==_0x79d853(0xab));if(_0x266dca){let _0x5e6aa7=dbCoinResults[_0x79d853(0x124)]('coins')[_0x79d853(0x1c7)]({'coin':_0x79d853(0xab)})['value']();_0x402666={..._0x5e6aa7,'number':_0x266dca['number']},dbCoinResults[_0x79d853(0x124)]('coins')[_0x79d853(0x1c7)]({'coin':_0x79d853(0xab)})[_0x79d853(0xf0)](_0x402666)['write']();}}}}async function placeOrder(_0x43a631){const _0x5f43fb=_0x1c9209,_0x4c01f1=config[_0x5f43fb(0x127)]==_0x5f43fb(0x114)?_0x5f43fb(0x114):_0x5f43fb(0x1e4);if(lockOrders==ORDERS[_0x5f43fb(0x1af)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x5f43fb(0x169)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x953073=![];lastOrders=[];for(const _0x219458 of _0x43a631){let _0x2643d2,_0x55dd9c,_0xdb7626,_0x5f08b7,_0x31db18,_0x4ee4da=_0x219458[_0x5f43fb(0x119)];try{const _0x11f109=await exchange['fetchTicker'](_0x4ee4da);_0x2643d2=_0x219458[_0x5f43fb(0x14f)]?0x1/_0x219458['last']:_0x219458['last'],_0x55dd9c=_0x11f109[_0x5f43fb(0xf4)],_0xdb7626=_0x11f109[_0x5f43fb(0x16c)];_0x219458[_0x5f43fb(0x14f)]?(_0x5f08b7=_0x219458['side']==_0x5f43fb(0x158)?_0x5f43fb(0x23b):_0x5f43fb(0x158),_0x31db18=Math[_0x5f43fb(0xa8)](_0x219458[_0x5f43fb(0x146)])/_0x2643d2):(_0x5f08b7=_0x219458[_0x5f43fb(0x13d)],_0x31db18=Math[_0x5f43fb(0xa8)](_0x219458[_0x5f43fb(0x146)]));_0x4c01f1==_0x5f43fb(0x1e4)&&(config['ordertype']=='limit-high'&&(_0x2643d2=_0x5f08b7==_0x5f43fb(0x158)?_0x55dd9c:_0xdb7626),config['ordertype']==_0x5f43fb(0x123)&&(_0x2643d2=_0x5f08b7==_0x5f43fb(0x158)?_0xdb7626:_0x55dd9c));_0x31db18=formatResult(_0x31db18,0x8),_0x2643d2=formatResult(_0x2643d2,0x8);const _0x2def1e=_0x5f08b7=='sell'?config[_0x5f43fb(0x20d)]?String[_0x5f43fb(0x18e)]('0x'+config['emojisell'])+'\x20':'':config[_0x5f43fb(0x1d1)]?String[_0x5f43fb(0x18e)]('0x'+config[_0x5f43fb(0x1d1)])+'\x20':'',_0xec83f6=_0x4c01f1==_0x5f43fb(0x114)?_0x5f43fb(0x225):config[_0x5f43fb(0x127)]==_0x5f43fb(0x16d)?'Limit\x20(high-margin)':_0x5f43fb(0x1da),_0xa7d634=(Math[_0x5f43fb(0x134)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x5f43fb(0x18f)]();lastOrders['push']({'customId':_0xa7d634,'symbol':_0x4ee4da,'coin':_0x219458[_0x5f43fb(0x1a3)],'amount':_0x31db18,'price':_0x2643d2,'side':_0x5f08b7,'reverse':_0x219458['reverse'],'filled':0x0});if(_0x4c01f1==_0x5f43fb(0x114))logHistory(_0x5f43fb(0x139),''+_0x2def1e+_0xec83f6+'\x20order:\x20'+_0x4ee4da+'\x20'+_0x5f08b7+'\x20#'+formatResult(_0x31db18,0x8)+'\x20@'+formatResult(_0x2643d2,0x8));else logHistory('order',''+_0x2def1e+_0xec83f6+'\x20order:\x20'+_0x4ee4da+'\x20'+_0x5f08b7+'\x20#'+formatResult(_0x31db18,0x8)+'\x20@'+formatResult(_0x2643d2,0x8));let _0x2a7760;_0x4c01f1=='market'?_0x5f08b7==_0x5f43fb(0x158)&&[_0x5f43fb(0x192),_0x5f43fb(0x125),'Cex',_0x5f43fb(0x257),_0x5f43fb(0x12c)]['includes'](config['exchange'])?_0x2a7760=await exchange[_0x5f43fb(0x19b)](_0x4ee4da,_0x4c01f1,_0x5f08b7,_0x31db18,_0x2643d2):_0x2a7760=await exchange[_0x5f43fb(0x19b)](_0x4ee4da,_0x4c01f1,_0x5f08b7,_0x31db18,undefined):_0x2a7760=await exchange[_0x5f43fb(0x19b)](_0x4ee4da,_0x4c01f1,_0x5f08b7,_0x31db18,_0x2643d2);logger['debug'](_0x5f43fb(0xe1)+_0x2a7760['id']+_0x5f43fb(0x24b)+_0xa7d634);const _0x357311=lastOrders['length']-0x1;if(_0x357311>=0x0&&lastOrders[_0x357311][_0x5f43fb(0x1be)]==_0xa7d634){lastOrders[_0x357311][_0x5f43fb(0x206)]=_0x2a7760['id'];if(_0x2a7760[_0x5f43fb(0x13e)])lastOrders[_0x357311][_0x5f43fb(0x13e)]=_0x2a7760[_0x5f43fb(0x13e)];if(_0x2a7760[_0x5f43fb(0xf3)])lastOrders[_0x357311][_0x5f43fb(0xf3)]=_0x2a7760[_0x5f43fb(0xf3)];lastOrders[_0x357311][_0x5f43fb(0xb8)]=_0x2a7760[_0x5f43fb(0xb8)];}if(config[_0x5f43fb(0x147)]!=0x0){let _0x3238f2=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x3238f2=cooldownTracker[_0x5f43fb(0x14d)]();const _0x52798f=getTimeStamp();cooldownTracker[_0x5f43fb(0x1b3)](_0x52798f);if(_0x3238f2){const _0x2a3552=fns[_0x5f43fb(0xc1)](new Date(_0x52798f),new Date(_0x3238f2));if(_0x2a3552<cooldownInterval){logHistory('error',_0x5f43fb(0xc8)+config[_0x5f43fb(0x147)]+_0x5f43fb(0x1b0)+cooldownInterval/0x3c+_0x5f43fb(0x153)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x50e7c2){if(_0x50e7c2[_0x5f43fb(0x18f)]()['includes'](_0x5f43fb(0x1d0)))lastOrders=lastOrders[_0x5f43fb(0x25f)](_0x512799=>_0x512799[_0x5f43fb(0x119)]!=_0x4ee4da),logHistory(_0x5f43fb(0x1f5),_0x5f43fb(0x1f9)+_0x4ee4da),_0x953073=!![];else{if(_0x50e7c2[_0x5f43fb(0x18f)]()['includes'](_0x5f43fb(0x217)))lastOrders=lastOrders[_0x5f43fb(0x25f)](_0x18de1d=>_0x18de1d[_0x5f43fb(0x119)]!=_0x4ee4da),logHistory(_0x5f43fb(0x1f5),_0x5f43fb(0x151)+_0x4ee4da),_0x953073=!![];else{if(_0x50e7c2[_0x5f43fb(0x18f)]()['includes'](_0x5f43fb(0x258)))lastOrders=lastOrders[_0x5f43fb(0x25f)](_0x47fbaa=>_0x47fbaa['symbol']!=_0x4ee4da),logHistory(_0x5f43fb(0x1f5),_0x5f43fb(0x1bd)+_0x4ee4da),logger[_0x5f43fb(0xa3)](_0x50e7c2),_0x953073=!![];else _0x50e7c2[_0x5f43fb(0x18f)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x5f43fb(0x25f)](_0x69115b=>_0x69115b[_0x5f43fb(0x119)]!=_0x4ee4da),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4ee4da),_0x953073=!![]):(lastOrders=lastOrders[_0x5f43fb(0x25f)](_0x454ec3=>_0x454ec3[_0x5f43fb(0x119)]!=_0x4ee4da),await handleError(_0x50e7c2,_0x5f43fb(0x1e6),_0x4ee4da));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){const _0x4afc4f=config[_0x5f43fb(0x127)]==_0x5f43fb(0x114)?validateOrderTimeout*0x3c*0x3e8:config[_0x5f43fb(0x229)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x9ab7f1=_0x5f43fb;validateOrders(_0x9ab7f1(0x137));},_0x4afc4f);}else unlockOrders();_0x953073&&config['headless']&&(logHistory(_0x5f43fb(0x1f5),_0x5f43fb(0x25d)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x5f43fb(0x1fc)]&&logHistory(_0x5f43fb(0x1f5),_0x5f43fb(0x222));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x5f43fb(0x1fc)]&&(config['ordertype']==_0x5f43fb(0x114)?logHistory(_0x5f43fb(0x1f5),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x5f43fb(0x1f5),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x454469){const _0x40e438=_0x1c9209,_0x3a18a6={...config,'openOrders':_0x454469};let _0x1c4211=dbConfig[_0x40e438(0x124)](_0x40e438(0x160))[_0x40e438(0x1c7)]({'botID':botID})[_0x40e438(0x239)]();_0x1c4211&&dbConfig[_0x40e438(0x124)](_0x40e438(0x160))[_0x40e438(0x1c7)]({'botID':botID})[_0x40e438(0xf0)](_0x3a18a6)[_0x40e438(0x21e)]();}function restoreOrders(){const _0x4bdba1=_0x1c9209;let _0x4cd1e5;config[_0x4bdba1(0xf1)]&&allOpenOrders['forEach'](_0x1f03b6=>{const _0x33540f=_0x4bdba1,_0x288b90=config[_0x33540f(0xf1)][_0x33540f(0x1c7)](_0xd8930f=>_0xd8930f[_0x33540f(0x206)]==_0x1f03b6['id']);_0x288b90&&(lastOrders['push'](_0x288b90),_0x4cd1e5=_0x1f03b6['timestamp']);});if(lastOrders[_0x4bdba1(0x215)]>0x0){lockOrders=ORDERS[_0x4bdba1(0x169)],validateOrdersState=_0x4bdba1(0x155),allOrdersPlaced=!![];const _0x2e379d=new Date()[_0x4bdba1(0x11f)](),_0x46a027=config[_0x4bdba1(0x127)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4bdba1(0x229)]*0x3c*0x3e8;if(_0x4cd1e5+_0x46a027>_0x2e379d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2b0661=_0x4bdba1;validateOrders(_0x2b0661(0x137));},_0x4cd1e5+_0x46a027-_0x2e379d);}else validateOrders(_0x4bdba1(0x137));}}async function sendMetricsTelegram(){const _0x4b7e07=_0x1c9209;if(!coinsLoaded){process[_0x4b7e07(0x1c9)]({'telegrammsg':_0x4b7e07(0x106)},_0x2469b6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1c8710='';if(config[_0x4b7e07(0xa2)])_0x1c8710='<b>'+config[_0x4b7e07(0xa1)]+_0x4b7e07(0x187);else _0x1c8710=_0x4b7e07(0x233)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x166412=getKPIs(_0x4b7e07(0x170)),_0x426ae2=getKPIs('fiat',config[_0x4b7e07(0xaa)]),_0x244740=getKPIs(_0x4b7e07(0x23a)),_0xfd671d=getKPIs(_0x4b7e07(0x214),config[_0x4b7e07(0xaa)]);_0x1c8710+=_0x4b7e07(0x9d),_0x1c8710+=_0x166412[_0x4b7e07(0x1df)]+'\x20:\x20'+_0x166412[_0x4b7e07(0x239)]+'\x0a',_0x1c8710+=_0x166412[_0x4b7e07(0x12d)]+':\x20'+_0x166412[_0x4b7e07(0xde)]+'%\x0a',_0x1c8710+=_0x426ae2[_0x4b7e07(0x1df)]+'\x20:\x20'+_0x426ae2[_0x4b7e07(0x239)]+'\x0a',_0x1c8710+=_0x426ae2[_0x4b7e07(0x12d)]+':\x20'+_0x426ae2[_0x4b7e07(0xde)]+'%\x0a',_0x1c8710+=_0x244740[_0x4b7e07(0x1df)]+':\x20'+_0x244740[_0x4b7e07(0x239)]+'\x20('+config[_0x4b7e07(0x170)]+')\x0a',_0x1c8710+=_0x244740[_0x4b7e07(0x12d)]+':\x20'+_0x244740[_0x4b7e07(0xde)]+_0x4b7e07(0x116)+config[_0x4b7e07(0x170)]+')\x0a',_0x1c8710+=_0xfd671d[_0x4b7e07(0x1df)]+':\x20'+_0xfd671d[_0x4b7e07(0x239)]+'\x20('+config['fiat']+')\x0a',_0x1c8710+=_0xfd671d[_0x4b7e07(0x12d)]+':\x20'+_0xfd671d[_0x4b7e07(0xde)]+_0x4b7e07(0x116)+config['fiat']+')\x0a',_0x1c8710+=_0x4b7e07(0x237),process[_0x4b7e07(0x1c9)]({'telegrammsg':_0x1c8710},_0xdf4cee=>{});}async function sendPortfolioTelegram(){const _0x24f7b6=_0x1c9209;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process['send']({'telegrammsg':_0x24f7b6(0x106)},_0x766a7c=>{});return;}let _0x1060d2='';if(config['showname'])_0x1060d2=_0x24f7b6(0xdf)+config['botname']+_0x24f7b6(0x221);else _0x1060d2='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x1060d2+='<pre>',_0x1060d2+='-------------------------------\x0a',_0x1060d2+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x1060d2+=_0x24f7b6(0xd1),currentCoins[_0x24f7b6(0x223)](_0x3c8edf=>{const _0x1e831d=_0x24f7b6;_0x1060d2+=_0x3c8edf[_0x1e831d(0x1a3)][_0x1e831d(0xed)](0x7)+'|\x20'+formatPad(_0x3c8edf[_0x1e831d(0xfc)],0x2,0x6)+'|\x20'+formatPad(_0x3c8edf['target'],0x2,0x6)+'|\x20'+formatPad(_0x3c8edf['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1060d2+=_0x24f7b6(0x237),process[_0x24f7b6(0x1c9)]({'telegrammsg':_0x1060d2},_0x3e011f=>{});}function formatPad(_0x2853c9,_0x464972,_0x23783b){const _0x433969=_0x1c9209,_0x4619e7=formatResultString(_0x2853c9,_0x464972);return _0x4619e7?_0x4619e7[_0x433969(0xd0)](_0x23783b):''[_0x433969(0xd0)](_0x23783b);}function logHistory(_0x27e720,_0x597a82,_0x555e98=''){const _0xf02160=_0x1c9209;logger['full'](''+_0x597a82);let _0x3960fc={'time':getTimeStamp(),'type':_0x27e720,'event':_0x597a82};dbLogs[_0xf02160(0x124)](_0xf02160(0xee))['push'](_0x3960fc)[_0xf02160(0x21e)]();if(_0x555e98=='')_0x555e98=_0x597a82;proxyEmit(_0xf02160(0x128),{'log':_0x3960fc,'summary':_0x555e98}),process[_0xf02160(0x1c9)]({'telegram':{..._0x3960fc,'botname':config[_0xf02160(0xa1)],'showname':config['showname']}},_0x2e97b3=>{});}function emitHistory(_0x3a7e27={}){const _0x5465a8=_0x1c9209;Object[_0x5465a8(0x10f)](_0x3a7e27)[_0x5465a8(0x215)]==0x0&&(_0x3a7e27={'type':[_0x5465a8(0x139),_0x5465a8(0x128)],'event':'','page':0x1});if(_0x3a7e27[_0x5465a8(0x10d)][_0x5465a8(0x174)](_0x5465a8(0x128)))_0x3a7e27[_0x5465a8(0x10d)][_0x5465a8(0x24f)](_0x3a7e27['type'][_0x5465a8(0x1ab)](_0x5465a8(0x128)),0x1,_0x5465a8(0x1f5),_0x5465a8(0x111),_0x5465a8(0x199));if(dbLogs[_0x5465a8(0x167)](_0x5465a8(0xee))[_0x5465a8(0x239)]()){let _0x5a2e57=dbLogs[_0x5465a8(0x124)](_0x5465a8(0xee))['filter'](_0x6712d5=>{const _0xfdac17=_0x5465a8;if(_0x3a7e27[_0xfdac17(0x10d)][_0xfdac17(0x215)]==0x0)return![];else return _0x3a7e27['type'][_0xfdac17(0x174)](_0x6712d5['type']);})['filter'](_0x51892e=>{const _0x18b1a0=_0x5465a8;if(_0x3a7e27[_0x18b1a0(0x128)]=='')return!![];else return _0x51892e['event'][_0x18b1a0(0x208)]()[_0x18b1a0(0x174)](_0x3a7e27[_0x18b1a0(0x128)][_0x18b1a0(0x208)]());})['sortBy'](_0x5465a8(0xcb)),_0x450b09=_0x5a2e57['value']()[_0x5465a8(0x215)];_0x5a2e57=_0x5a2e57['reverse']()[_0x5465a8(0x13a)]((_0x3a7e27[_0x5465a8(0x1c5)]-0x1)*logPageSize,_0x3a7e27['page']*logPageSize-0x1)[_0x5465a8(0x14f)]()['value'](),proxyEmit(_0x5465a8(0x1e5),{'logs':_0x5a2e57,'total':_0x450b09});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x55638f){const _0x333e8d=_0x1c9209;if(dbLogs[_0x333e8d(0x167)](_0x333e8d(0xee))[_0x333e8d(0x239)]()){const _0xd3e2e2=dbLogs[_0x333e8d(0x124)](_0x333e8d(0xee))[_0x333e8d(0x1cc)](_0x333e8d(0xcb))['filter'](_0x1fea0f=>{const _0x6f49e1=_0x333e8d;return _0x1fea0f[_0x6f49e1(0x10d)]=='order';})[_0x333e8d(0x239)]();dbLogs[_0x333e8d(0x124)](_0x333e8d(0xee))['remove']()[_0x333e8d(0x21e)](),dbLogs['get'](_0x333e8d(0xee))[_0x333e8d(0xf0)](_0xd3e2e2)['write'](),emitHistory(_0x55638f);}}async function pauseBot(_0x3d20e3=pauseBotIntervalShort,_0x429cc5,_0x724b4e,_0x22c4d8=![]){const _0x4116b3=_0x1c9209,_0x10cee0=new Date()[_0x4116b3(0x11f)]();if(!lastErrorShown||_0x10cee0-lastErrorShown>=_0x3d20e3){lastErrorShown=_0x10cee0;if(!lastBotPause)lastBotPause=_0x10cee0,consecutivePauses=0x1;else{if(_0x10cee0-lastBotPause-_0x3d20e3<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x22c4d8){logHistory(_0x4116b3(0x1f5),_0x429cc5+_0x4116b3(0x1e0)),await killBot();return;}else logHistory(_0x4116b3(0x1f5),_0x429cc5+pauseBotMsg),_0x3d20e3=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x10cee0;}_0x724b4e?logger['debug']('('+consecutivePauses+')\x20'+_0x429cc5+_0x4116b3(0x103),_0x724b4e):logger[_0x4116b3(0xa3)]('('+consecutivePauses+')\x20'+_0x429cc5);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x3d20e3),botPaused=![],_0x3d20e3==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x4f5c44=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1741f8,_0x599267){const _0x3a2a36=_0x1c9209;if(botPaused)return;const _0x2fe3bf=config[_0x3a2a36(0x121)]||_0x3a2a36(0xaf);if(_0x599267)logger[_0x3a2a36(0xa3)]('Exception\x20thrown\x20in\x20'+_0x599267);const _0x697a4b=()=>{const _0x478763=_0x3a2a36;loading[_0x478763(0x1f5)]=!![],emitLoadingProgress();};if(_0x1741f8[_0x3a2a36(0x18f)]()[_0x3a2a36(0x174)]('API-key\x20format\x20invalid'))logHistory(_0x3a2a36(0x1f5),_0x2fe3bf+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x697a4b();else{if(_0x1741f8['toString']()[_0x3a2a36(0x174)](_0x3a2a36(0xa5)))logHistory('error',_0x2fe3bf+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x697a4b();else _0x1741f8[_0x3a2a36(0x18f)]()[_0x3a2a36(0x174)](_0x3a2a36(0x164))?(logHistory('error',_0x2fe3bf+_0x3a2a36(0x12b)),logHistory(_0x3a2a36(0x1f5),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x697a4b()):await handleError(_0x1741f8,null);}}async function handleError(_0x4863c5,_0xb6b475,_0x4ec0d1=''){const _0x2c0aae=_0x1c9209;if(botPaused)return;let _0x556faf;const _0x3de921=config['exchange']||_0x2c0aae(0xaf);if(_0xb6b475)logger['debug'](_0x2c0aae(0xd2)+_0xb6b475);if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0xc5)))_0x556faf=_0x3de921+_0x2c0aae(0x245),await pauseBot(undefined,_0x556faf,_0x4863c5);else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0x1ec)))_0x556faf=_0x3de921+_0x2c0aae(0xbe),await pauseBot(undefined,_0x556faf,_0x4863c5);else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0x197))||_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)]('OnMaintenance'))_0x556faf=_0x3de921+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x556faf,_0x4863c5['toString']());else{if(_0x4863c5[_0x2c0aae(0x18f)]()['includes'](_0x2c0aae(0x1b7)))_0x556faf=_0x3de921+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x556faf,_0x4863c5[_0x2c0aae(0x18f)]());else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0x162)))_0x556faf=_0x3de921+_0x2c0aae(0x1a6),await pauseBot(undefined,_0x556faf,_0x4863c5[_0x2c0aae(0x18f)]());else{if(_0x4863c5[_0x2c0aae(0x18f)]()['toLowerCase']()['includes'](_0x2c0aae(0x144))||_0x4863c5['toString']()['toLowerCase']()[_0x2c0aae(0x174)](_0x2c0aae(0xb3)))_0x556faf=_0x2c0aae(0x1d9),await pauseBot(undefined,_0x556faf,_0x4863c5['toString']());else{if(_0x4863c5['toString']()[_0x2c0aae(0x174)](_0x2c0aae(0x1e3)))_0x556faf=_0x3de921+_0x2c0aae(0x21d),await pauseBot(undefined,_0x556faf,_0x4863c5[_0x2c0aae(0x18f)]());else{if(_0x4863c5 instanceof ccxt['NetworkError'])_0x556faf=_0x3de921+'\x20network\x20error:\x20'+_0x4863c5[_0x2c0aae(0x18f)](),logger['debug'](_0x2c0aae(0x176),_0x4863c5),await pauseBot(undefined,_0x556faf,_0x4863c5);else{if(_0x4863c5[_0x2c0aae(0x18f)]()['includes'](_0x2c0aae(0x22b)))logHistory(_0x2c0aae(0x1f5),_0x3de921+_0x2c0aae(0x113)),logHistory(_0x2c0aae(0x1f5),_0x2c0aae(0x118)),await killBot();else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0xa5)))logHistory(_0x2c0aae(0x1f5),_0x3de921+_0x2c0aae(0x152)),logHistory(_0x2c0aae(0x1f5),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0x164))&&_0x4863c5['toString']()[_0x2c0aae(0x174)]('token\x20is\x20expired'))_0x556faf=_0x3de921+_0x2c0aae(0x189),await pauseBot(undefined,_0x556faf,_0x4863c5,!![]);else{if(_0x4863c5[_0x2c0aae(0x18f)]()['includes'](_0x2c0aae(0x164)))config[_0x2c0aae(0xd9)]?_0x556faf=_0x3de921+_0x2c0aae(0x1a5):_0x556faf=_0x3de921+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory('error',_0x556faf),logHistory(_0x2c0aae(0x1f5),_0x2c0aae(0x118)),await killBot();else{if(_0x4863c5['toString']()[_0x2c0aae(0x174)](_0x2c0aae(0x102)))logHistory('error',_0x3de921+_0x2c0aae(0x156)),logHistory('error',_0x2c0aae(0x118)),await killBot();else{if(_0x4863c5[_0x2c0aae(0x18f)]()[_0x2c0aae(0x174)](_0x2c0aae(0x122)))logHistory('error',_0x2c0aae(0x25b)+_0x4ec0d1);else{if(_0x4863c5 instanceof ccxt[_0x2c0aae(0x205)]){_0x556faf=_0x3de921+_0x2c0aae(0x1d3)+_0x4863c5[_0x2c0aae(0x18f)](),logHistory(_0x2c0aae(0x1f5),_0x556faf),logger[_0x2c0aae(0xa3)](_0x2c0aae(0x1dc),_0x4863c5);if(_0x4ec0d1)logger[_0x2c0aae(0xa3)](_0x2c0aae(0x204)+_0x4ec0d1);await pauseBot(undefined,_0x556faf,_0x4863c5);}else{_0x556faf=_0x2c0aae(0x19c)+_0x4863c5[_0x2c0aae(0x18f)](),logHistory('error',_0x556faf),logger['debug'](_0x556faf+'\x20>\x20details:',_0x4863c5);if(_0x4ec0d1)logger['debug']('Symbol(s):\x20'+_0x4ec0d1);await pauseBot(undefined,_0x556faf);}}}}}}}}}}}}}}}}function decryptRSA(_0x44f5e3,_0x436e7d){const _0x1b06eb=_0x1c9209,_0x58fcdc=forge['pki'][_0x1b06eb(0x20e)](_0x44f5e3),_0x391803=_0x58fcdc['decrypt'](forge[_0x1b06eb(0xd5)][_0x1b06eb(0x218)](_0x436e7d),'RSA-OAEP',{'md':forge['md'][_0x1b06eb(0x20f)][_0x1b06eb(0x159)](),'mgf1':{'md':forge['md'][_0x1b06eb(0x20f)][_0x1b06eb(0x159)]()}});return _0x391803;}async function withRetry(_0x102d17,_0x2a7e54){const _0x622822=_0x1c9209;let _0x433bd6=![],_0x31c728=0x0,_0x30ed49,_0x42da8f;while(_0x31c728<maxRetries){try{_0x30ed49=await _0x2a7e54();break;}catch(_0x32e24e){_0x42da8f=_0x32e24e,!_0x433bd6?(_0x433bd6=!![],logger[_0x622822(0xa3)](_0x622822(0x177)+_0x102d17+':',_0x32e24e[_0x622822(0x18f)]())):await sleep(retryInterval);}_0x31c728++;}if(_0x31c728==0x0)return _0x30ed49;if(_0x31c728>=maxRetries)throw _0x42da8f;else return logger['debug'](_0x622822(0x1eb)+_0x31c728+_0x622822(0x210)),_0x30ed49;}function formatResult(_0x3d5608,_0x54cde7){const _0x303b7c=_0x1c9209;return parseFloat(_0x3d5608[_0x303b7c(0x17d)](_0x54cde7));}function formatResultTruncate(_0x25cf7b,_0x53b34e){const _0x1bf012=_0x1c9209;let _0x2d08ff=formatResultString(_0x25cf7b,0xa),_0x4781ea=_0x2d08ff[_0x1bf012(0x1ab)]('.');return _0x4781ea!=-0x1&&(_0x2d08ff=_0x2d08ff[_0x1bf012(0x13a)](0x0,_0x4781ea+_0x53b34e+0x1)),Number(_0x2d08ff);}function formatResultString(_0x359730,_0x4fd994){const _0x1c04a1=_0x1c9209;let _0x260b66;if(!(''+_0x359730)[_0x1c04a1(0x174)]('e'))_0x260b66=+(Math['round'](_0x359730+'e+'+_0x4fd994)+'e-'+_0x4fd994);else{let _0x4c93c4=(''+_0x359730)['split']('e'),_0x526d49='';+_0x4c93c4[0x1]+_0x4fd994>0x0&&(_0x526d49='+'),_0x260b66=+(Math['round'](+_0x4c93c4[0x0]+'e'+_0x526d49+(+_0x4c93c4[0x1]+_0x4fd994))+'e-'+_0x4fd994);}return Number(_0x260b66)['toFixed'](_0x4fd994);}function getServerTime(){const _0xcd7232=_0x1c9209,_0x3e981a=new Date();return _0x3e981a['getFullYear']()+'/'+(_0x3e981a[_0xcd7232(0x1cb)]()+0x1)[_0xcd7232(0x18f)]()['padStart'](0x2,'0')+'/'+_0x3e981a[_0xcd7232(0x1ef)]()['toString']()[_0xcd7232(0xd0)](0x2,'0')+'\x20'+_0x3e981a[_0xcd7232(0xf6)]()['toString']()['padStart'](0x2,'0')+':'+_0x3e981a['getMinutes']()[_0xcd7232(0x18f)]()[_0xcd7232(0xd0)](0x2,'0')+':'+_0x3e981a[_0xcd7232(0x1fd)]()[_0xcd7232(0x18f)]()[_0xcd7232(0xd0)](0x2,'0');}function getTimeStamp(){const _0x30a1dd=_0x1c9209,_0xdd4585=shiftedTime();return _0xdd4585[_0x30a1dd(0x246)]()+'/'+(_0xdd4585[_0x30a1dd(0x1cb)]()+0x1)[_0x30a1dd(0x18f)]()['padStart'](0x2,'0')+'/'+_0xdd4585[_0x30a1dd(0x1ef)]()[_0x30a1dd(0x18f)]()[_0x30a1dd(0xd0)](0x2,'0')+'\x20'+_0xdd4585[_0x30a1dd(0xf6)]()[_0x30a1dd(0x18f)]()['padStart'](0x2,'0')+':'+_0xdd4585[_0x30a1dd(0x112)]()[_0x30a1dd(0x18f)]()[_0x30a1dd(0xd0)](0x2,'0')+':'+_0xdd4585[_0x30a1dd(0x1fd)]()[_0x30a1dd(0x18f)]()[_0x30a1dd(0xd0)](0x2,'0');}function getDate(){const _0x1f6886=_0x1c9209,_0x69ff63=shiftedTime();return _0x69ff63[_0x1f6886(0x246)]()+'/'+(_0x69ff63[_0x1f6886(0x1cb)]()+0x1)[_0x1f6886(0x18f)]()['padStart'](0x2,'0')+'/'+_0x69ff63[_0x1f6886(0x1ef)]()[_0x1f6886(0x18f)]()[_0x1f6886(0xd0)](0x2,'0');}function getHour(){const _0xad4b8=_0x1c9209,_0x4fb2cb=shiftedTime();return _0x4fb2cb[_0xad4b8(0xf6)]()[_0xad4b8(0x18f)]()[_0xad4b8(0xd0)](0x2,'0');}function sleep(_0x3ae38b){return new Promise(_0x3584d2=>setTimeout(_0x3584d2,_0x3ae38b));}function shiftedTime(){const _0x5b508d=_0x1c9209,_0x39df82=new Date();let _0x2ac952=_0x39df82;if(config&&config[_0x5b508d(0x1d7)]!==0x0)_0x2ac952=fns[_0x5b508d(0x20b)](_0x39df82,{'hours':config[_0x5b508d(0x1d7)]});return _0x2ac952;}function timer(_0x4b7f42){const _0x5b1777=_0x1c9209,_0x4d7288=new Date();!lasttime?console[_0x5b1777(0x9f)](getTimeStamp()+_0x5b1777(0xb1),_0x4b7f42,_0x4d7288):console[_0x5b1777(0x9f)](getTimeStamp()+_0x5b1777(0xb1),_0x4b7f42,(_0x4d7288-lasttime)/0x3e8),lasttime=_0x4d7288;}