const _0x5c012c=_0x2992;(function(_0x1127e1,_0xa07d21){const _0x5c07c4=_0x2992,_0x4204bd=_0x1127e1();while(!![]){try{const _0x116caf=parseInt(_0x5c07c4(0x164))/0x1*(parseInt(_0x5c07c4(0x1c7))/0x2)+-parseInt(_0x5c07c4(0xf0))/0x3+parseInt(_0x5c07c4(0x1e7))/0x4+parseInt(_0x5c07c4(0xa2))/0x5+-parseInt(_0x5c07c4(0xc2))/0x6*(-parseInt(_0x5c07c4(0x1a8))/0x7)+-parseInt(_0x5c07c4(0x120))/0x8+-parseInt(_0x5c07c4(0xa8))/0x9;if(_0x116caf===_0xa07d21)break;else _0x4204bd['push'](_0x4204bd['shift']());}catch(_0x3194e5){_0x4204bd['push'](_0x4204bd['shift']());}}}(_0x3a22,0x81742));const _0x119b9d=function(){let _0x296b96=!![];return function(_0xa0f4f2,_0x1b1c3c){const _0x48d1dd=_0x296b96?function(){const _0x57f5fc=_0x2992;if(_0x1b1c3c){const _0x4a4525=_0x1b1c3c[_0x57f5fc(0xa3)](_0xa0f4f2,arguments);return _0x1b1c3c=null,_0x4a4525;}}:function(){};return _0x296b96=![],_0x48d1dd;};}(),_0x4f631e=_0x119b9d(this,function(){const _0x70e3bc=_0x2992;return _0x4f631e[_0x70e3bc(0x99)]()[_0x70e3bc(0x11a)](_0x70e3bc(0x14f))[_0x70e3bc(0x99)]()[_0x70e3bc(0x1c8)](_0x4f631e)[_0x70e3bc(0x11a)](_0x70e3bc(0x14f));});_0x4f631e();'use strict';const ccxt=require(_0x5c012c(0x133)),low=require('lowdb'),FileSync=require(_0x5c012c(0xe4)),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x5c012c(0x11c)],util=require(_0x5c012c(0x1d1)),argv=require(_0x5c012c(0x1bb))(process['argv'][_0x5c012c(0x113)](0x2))[_0x5c012c(0x170)],path=require(_0x5c012c(0x1e8));let exchange;global[_0x5c012c(0x1f5)]={},global[_0x5c012c(0x19b)]={};const usdBasecoins=['USD',_0x5c012c(0x136),_0x5c012c(0x1bc),_0x5c012c(0x132),_0x5c012c(0x131),_0x5c012c(0x1ce)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x5c012c(0x1b7)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x5c012c(0x165)+pauseBotInterval/0xea60+_0x5c012c(0x89),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x5c012c(0x10c))['version'],botID=process['argv'][0x2]||_0x5c012c(0xa7),pattern=/^[0-9]{3}$/;!pattern[_0x5c012c(0x8a)](botID)&&(console[_0x5c012c(0x1d4)](_0x5c012c(0x16f)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x5c012c(0x170)][0x3]||'',configpath=userID?_0x5c012c(0x9c)+userID+'/':_0x5c012c(0x9c),logspath=userID?_0x5c012c(0x15a)+userID+'/':_0x5c012c(0x15a),loggerfile=fs[_0x5c012c(0xdb)](logspath+_0x5c012c(0x98),{'flags':'a'});function _0x3a22(){const _0x3add0a=['getCoinNumber()','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20/\x20','secure','padStart','timeout','deleteHistoryAlerts','\x20|\x20Custom\x20ID:\x20','limits','Order\x20amount\x20is\x20invalid:\x20','fetchClosedOrders','order',':\x20timer\x20>','set','exchange\x20reloaded','Error\x20while\x20deleting\x20files:\x20','ORDERS.LOCKED','<pre>','\x20minutes\x20-\x20','.json','getAllOrders()','watchOrders()','(((.+)+)+)+$','toFixed','fetchTicker','getSeconds','total','recent20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getPortfolio(2)','cancel','BTC','storeConfiguration','./logs/','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','<b>Bot\x20','ORDERS.UNLOCKING','Initializing\x20coin\x20results','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','watchTrades','net-fiat','replace','sort','26121mEpNkD','\x20-\x20pausing\x20bot\x20for\x20','max','Resetting\x20bot\x20history','average','forEach','value','ID:\x20','orderstatus','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20portfolio:</b>\x20\x0a\x0a','Error:\x20Invalid\x20argument\x20','argv','closed','getCoins()','success','1\x20-\x20Unlock\x20orders','exchanges','\x20closed\x20the\x20connection','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','apiSecret','2.5.0','Transaction\x20detection\x20blocked','substring','watchOrders','cloneDeep','bot-','cancelOrder','bots','running','Bot\x20','recreate','balances','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','rightTxt','Binance','coin-loading-progress','error','number','uncaughtException','active','Kucoin','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','InvalidOrder','exec','configuration-stored','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','1\x20-\x20Handle\x20open\x20orders','Net\x20','\x20not\x20available','timestamp','Huobipro','emojibuy','sortBy','page','change','performance','length','has','liquidity','apiPassword','remove','-results.json','KC-API-TIMESTAMP\x20Invalid','settings','time','Pausing\x20for\x20','initTickers()','4687396ryPZpF','entries','sendMetricsTelegram','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Invalid\x20symbol:\x20','/USD','amount','getMonth','ordertype','Mexc3','watchTransactions()','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','<b>','-performance.json','version','UNLOCKED','\x20exchange\x20error','fiat','BNB','yargs/yargs','TUSD','status','format','starting-balance-','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Net\x20effect','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','netoffset','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getPortfolio','34UGULbd','constructor','apiKey','OrderNotFound','no\x20open\x20orders','breakeven','full','USDP','***','0\x20-\x20EXECUTION:\x20','util','milliseconds','getFullYear','log','canceled','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20rejected\x20your\x20API\x20request','showname','highest','fetchOpenOrders','distribution','fetchTickers()','toLowerCase','Headless:\x20','showConfig','2\x20-\x20handling\x20FILLED\x20order:\x20','progress','message',':\x20Bot\x20','-events.json','balancing\x20resumes\x20when\x20cooldown\x20ends','storeFiat','1191920UERhux','path','offset','\x20value','market','parse','Market','net-basecoin','2\x20-\x20Handled\x20open\x20orders','\x20orders\x20in\x20less\x20than\x20','differenceInSeconds','botID','realized','getStartingBalances','ticker','indexOf','push','coin','percentage','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','placeOrder','AuthenticationError','changes','createOrder','emojisell','InvalidNonce','fromCodePoint','starting-balances','Failed\x20to\x20load\x20coin\x20data\x20for\x20','cancelLoading','Invalid\x20API\x20key\x20or\x20secret\x20entered','startnumber','EUR','RateLimitExceeded','decrypt','Order\x20is\x20invalid:\x20','Avoiding\x20continuous\x20order\x20attempts','cancelOrders()','datetime','configuration','loadMarkets','trade','2.6.0','Order(s)\x20not\x20validated\x20after\x20','MIN_NOTIONAL','ongoing','Invalid\x20ACCESS_TIMESTAMP','Huobi','shift','startdate','coins','buy','\x20API\x20key\x20is\x20invalid','fetchBalance','logs','\x20:\x20','\x20>\x20[DEBUG]\x20','\x20not\x20responding','abs','threshold','NetworkError','defaults','cost','balancing\x20resumed','removed','find','Exchange','excluded','change24h','Waited\x20','round','fetchTickers','getTime','enabled','Resetting\x20coin\x20results:\x20','\x20minutes','test','\x20|\x20lock\x20orders:\x20','Mexc','includes','must\x20be\x20greater\x20than\x20minimum\x20amount','last','1\x20-\x20FILLED\x20unknown\x20order:\x20','UNLOCKING','ask','symbol','startprice','spot','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2\x20-\x20Orders\x20unlocked','/output-000.log','toString','PAXG','headless','./config/','\x20|\x20','2.3.5','-------------------------------\x0a','/backup/','exchange','3865415LEdifr','apply','1\x20-\x20Validate\x20orders:\x20','/EUR','</pre>','001','3295332ldbOHz','type','amountToPrecision','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','bot','portfolio','concat','LOCKED','event','close','get','exchange\x20not\x20reloaded','limit-high','customId','toggleBotMode','sendPortfolioTelegram','delta','orderId','side','pro','\x20change','Limit\x20(low-margin)','request-time','Unknown\x20error\x20occured','keys','added','6JhYCoo','Transaction\x20detection\x20unblocked','function','Insufficient\x20funds\x20to\x20execute\x20order:\x20','password','reverse','%\x20(','valid','unlinkSync','sha256','event-history','ETH','mkdirSync','sell','red_yellow_blue','BNB/','send','Executed\x20','buys','\x20hour','final','isEqual','stringify','padEnd','min','createWriteStream','getDate','\x20>\x20','Exception\x20thrown\x20in\x20','basecoin','Reset\x20|\x20','sells','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','storeHeadless','lowdb/adapters/FileSync','Bitget','split','existsSync','target','join','RequestTimeout','fees','none','USD','Unfilled\x20order(s)\x20canceled\x20after\x20','filled','2217525txWelL','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','assign','splice','leftTxt','loadSymbols()','\x20metrics:</b>\x20\x0a\x0a','************','getPortfolio(1)','parseISO','openOrders','Loading\x20completed','onepagemode','Bybit','kill','Error\x20details:','\x20|\x20exchange:\x20','cooldown','filter','yyyy/MM/dd','eur','API-key\x20format\x20invalid','limit','Limit\x20(high-margin)','botname','invalid\x20Request-Time','Portfolio\x20change\x20detected:\x20','Cryptocom','./version.json','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20|\x20highest\x20fee:\x20','timeshift','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','ExchangeError','data','slice','getMinutes','warning','Binanceus','emitHistory','write','args','search','startsWith','Crypt','colorscheme','\x20API\x20secret\x20is\x20invalid','open','4393464eBvQal','restart','debug','usd','initclient','getHours','Executing\x20exchange\x20reload','RSA-OAEP','initial','currency','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','date','privateKey','recreateCoinResults()','autoliquidity','price','basecoinvalue','USDC','USDT','ccxt','fee','ORDERS.UNLOCKED','BUSD','remainingSymbols','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'];_0x3a22=function(){return _0x3add0a;};return _0x3a22();}!fs[_0x5c012c(0xe7)](configpath)&&fs[_0x5c012c(0xce)](configpath);!fs[_0x5c012c(0xe7)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x5c012c(0x17e)+botID+'-config.json',logfile=configpath+_0x5c012c(0x17e)+botID+_0x5c012c(0x1e4),performancefile=configpath+_0x5c012c(0x17e)+botID+_0x5c012c(0x1b5),coinresultsfile=configpath+'bot-'+botID+_0x5c012c(0x1a2),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x5c012c(0xa0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x5c012c(0x118)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5c012c(0x224)]({'data':[],'version':serverversion})[_0x5c012c(0x118)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5c012c(0x224)]({'bot':[],'version':serverversion})[_0x5c012c(0x118)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5c012c(0x224)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x5c012c(0xcb),'rsaStandard':_0x5c012c(0x127)});function _0x2992(_0x331457,_0x323d57){const _0x5cb289=_0x3a22();return _0x2992=function(_0x4f631e,_0x119b9d){_0x4f631e=_0x4f631e-0x87;let _0x3a22ba=_0x5cb289[_0x4f631e];return _0x3a22ba;},_0x2992(_0x331457,_0x323d57);}let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5f02f0=>{const _0x22fb94=_0x5c012c;console[_0x22fb94(0x1d4)](_0x5f02f0);},'simple':_0x145dec=>{const _0x1fdeef=_0x5c012c;console[_0x1fdeef(0x1d4)](_0x145dec),loggerfile[_0x1fdeef(0x118)](util['format'](_0x145dec)+'\x0a');},'full':async(_0x1cacab,_0x37164e='')=>{const _0x31f879=_0x5c012c;let _0x3d6fda;if(config[_0x31f879(0x1d8)])_0x3d6fda=getTimeStamp()+':\x20'+config[_0x31f879(0x108)]+_0x31f879(0xdd)+_0x1cacab;else _0x3d6fda=getTimeStamp()+_0x31f879(0x1e3)+botID+_0x31f879(0xdd)+_0x1cacab;console['log'](_0x3d6fda),loggerfile[_0x31f879(0x118)](util['format'](_0x3d6fda)+'\x0a'),_0x37164e&&(console['log'](_0x37164e),loggerfile[_0x31f879(0x118)](util[_0x31f879(0x1be)](_0x37164e)+'\x0a'));},'debug':async(_0x1df63c,_0x192ea3='')=>{const _0x1465cb=_0x5c012c;let _0x15c720;if(config[_0x1465cb(0x1d8)])_0x15c720=getTimeStamp()+':\x20'+config[_0x1465cb(0x108)]+_0x1465cb(0x21f)+_0x1df63c;else _0x15c720=getTimeStamp()+_0x1465cb(0x1e3)+botID+_0x1465cb(0x21f)+_0x1df63c;if(debugging)console[_0x1465cb(0x1d4)](_0x15c720);loggerfile[_0x1465cb(0x118)](util[_0x1465cb(0x1be)](_0x15c720)+'\x0a');if(_0x192ea3){if(debugging)console[_0x1465cb(0x1d4)](_0x192ea3);loggerfile[_0x1465cb(0x118)](util[_0x1465cb(0x1be)](_0x192ea3)+'\x0a');}}};process['on'](_0x5c012c(0x18b),function(_0x20be7a){const _0x57f169=_0x5c012c;handleError(_0x20be7a,_0x57f169(0x18b));});settings['timeshift']!=config[_0x5c012c(0x10f)]&&updateTimeshift(settings[_0x5c012c(0x10f)]);settings[_0x5c012c(0xfc)]!=config[_0x5c012c(0xfc)]&&updateOnepagemode(settings['onepagemode']);process[_0x5c012c(0xd2)]({'started':'running'},_0x29d5d4=>{}),initializeProcessListeners();function proxyEmit(_0x2757ec,_0x4c5cfd=null){process['send']({'function':_0x2757ec,'args':_0x4c5cfd},_0x2769ab=>{});}function initializeProcessListeners(){process['on']('message',_0x1f37b3=>{const _0x20c7f1=_0x2992;switch(Object['keys'](_0x1f37b3)[0x0]){case'timeshift':_0x1f37b3['timeshift']!=undefined&&(settings[_0x20c7f1(0x10f)]=_0x1f37b3[_0x20c7f1(0x10f)],updateTimeshift(settings[_0x20c7f1(0x10f)]));break;case _0x20c7f1(0xfc):_0x1f37b3[_0x20c7f1(0xfc)]!=undefined&&(settings[_0x20c7f1(0xfc)]=_0x1f37b3[_0x20c7f1(0xfc)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x1f37b3[_0x20c7f1(0x180)]!=undefined&&(bots=JSON['parse'](_0x1f37b3[_0x20c7f1(0x180)]),proxyEmit(_0x20c7f1(0x180),bots));break;case _0x20c7f1(0xc4):switch(_0x1f37b3[_0x20c7f1(0xc4)]){case _0x20c7f1(0x124):initclient();break;case _0x20c7f1(0xb6):toggleBotMode();break;case _0x20c7f1(0x117):emitHistory(_0x1f37b3[_0x20c7f1(0x119)]);break;case _0x20c7f1(0x13f):deleteHistoryAlerts(_0x1f37b3['args']);break;case _0x20c7f1(0x1c6):getPortfolio(_0x1f37b3[_0x20c7f1(0x119)]);break;case _0x20c7f1(0x159):storeConfiguration(_0x1f37b3[_0x20c7f1(0x119)]);break;case _0x20c7f1(0xe3):storeHeadless(_0x1f37b3['args']);break;case _0x20c7f1(0x1e6):storeFiat(_0x1f37b3[_0x20c7f1(0x119)]);break;case'resetHistory':resetHistory();break;case _0x20c7f1(0x1f4):getStartingBalances(getNormalizedPerformance());break;case _0x20c7f1(0x1fb):placeOrder(_0x1f37b3[_0x20c7f1(0x119)]);break;case _0x20c7f1(0x204):cancelLoading();break;case _0x20c7f1(0x1df):showConfig();break;case _0x20c7f1(0x1aa):sendMetricsTelegram();break;case _0x20c7f1(0xb7):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x365a90=![]){const _0xe53004=_0x5c012c;logger[_0xe53004(0x122)](_0xe53004(0xe0)+(_0x365a90?_0xe53004(0x147):_0xe53004(0xb3))+_0xe53004(0x100)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x365a90)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xe53004(0x1c9)]!=''&&config['apiKey']!=_0xe53004(0x1cf)){loadingProgress=0x0;if(_0x365a90){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x12f4d4){handleErrorNoStop(_0x12f4d4,_0xe53004(0xf5));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x3b9b56=await getCoins();[currentCoins,currentCoinsAll]=_0x3b9b56,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0xe53004(0x122)](_0xe53004(0xfb)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xe53004(0x19d)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x48d11f=_0x5c012c;exchangeStopped=!![];try{await exchange[_0x48d11f(0xb1)]();}catch(_0x5cc400){await handleError(_0x5cc400,'stopExchange()');}}async function reloadExchange(){const _0x472df2=_0x5c012c;while(lockOrders!=ORDERS[_0x472df2(0x1b7)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x472df2(0x122)](_0x472df2(0x126)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x4a85cf=config[_0x5c012c(0xa1)],_0x330788=config[_0x5c012c(0x1c9)],_0x355c53=config[_0x5c012c(0x178)],_0x296640=config[_0x5c012c(0x1a0)]){const _0x2ac260=_0x5c012c;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x4a85cf)&&(logHistory(_0x2ac260(0x189),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x4a85cf+'\x20exchange'),killBot());const _0x4ae523=ccxt[_0x2ac260(0xbb)][_0x4a85cf[_0x2ac260(0x1dd)]()];exchange=new _0x4ae523({'apiKey':_0x330788,'secret':_0x355c53,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2ac260(0x95),'watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}}),exchange['verbose']=!![];if(_0x296640)exchange[_0x2ac260(0xc6)]=_0x296640;}function setStableCoins(){const _0x394260=_0x5c012c;let _0x5bf9e8=config[_0x394260(0xdf)]=='ETH'?_0x394260(0xcd):config[_0x394260(0xdf)]==_0x394260(0x9a)?'PAXG':_0x394260(0x158),_0x8e6539=!allSymbols[_0x394260(0x8d)](_0x5bf9e8+_0x394260(0x1ad))?_0x394260(0x132):_0x394260(0xed),_0x4aeeab=!allSymbols[_0x394260(0x8d)](_0x5bf9e8+_0x394260(0xa5))?_0x8e6539:_0x394260(0x207);stablecoins={'eur':{'coin':''+_0x5bf9e8+_0x4aeeab,'symbol':_0x5bf9e8+'/'+_0x4aeeab},'usd':{'coin':''+_0x5bf9e8+_0x8e6539,'symbol':_0x5bf9e8+'/'+_0x8e6539}};}async function initwsCcxt(){const _0x3cfc97=_0x5c012c;initCycle++;const _0x9039e7=initCycle;let _0x290e20=[];config[_0x3cfc97(0xad)][_0x3cfc97(0x169)](_0x5ed5d8=>{const _0x3c2ad1=_0x3cfc97;if(!_0x5ed5d8[_0x3c2ad1(0x22a)]&&_0x5ed5d8[_0x3c2ad1(0x1f8)]!=config[_0x3c2ad1(0xdf)])_0x290e20[_0x3c2ad1(0x1f7)](_0x5ed5d8[_0x3c2ad1(0x93)]);});if(!_0x290e20[_0x3cfc97(0x8d)](stablecoins[_0x3cfc97(0x104)][_0x3cfc97(0x93)]))_0x290e20['push'](stablecoins['eur'][_0x3cfc97(0x93)]);if(!_0x290e20[_0x3cfc97(0x8d)](stablecoins['usd'][_0x3cfc97(0x93)]))_0x290e20[_0x3cfc97(0x1f7)](stablecoins[_0x3cfc97(0x123)]['symbol']);if(config[_0x3cfc97(0xa1)][_0x3cfc97(0x11b)](_0x3cfc97(0x187))&&config[_0x3cfc97(0xdf)]!=_0x3cfc97(0x9a)){if(!_0x290e20[_0x3cfc97(0x8d)](_0x3cfc97(0xd1)+config['basecoin']))_0x290e20[_0x3cfc97(0x1f7)](_0x3cfc97(0xd1)+config[_0x3cfc97(0xdf)]);}loadCoins(_0x290e20),_0x290e20=validateSymbols(_0x290e20);const _0x32c5c9=async _0x2e92b3=>{const _0x254877=_0x3cfc97;let _0x3bb4ca;try{const _0xe26154=await getTickers(_0x2e92b3);Object['entries'](_0xe26154)[_0x254877(0x169)](_0x2101f3=>{const _0x4a84be=_0x254877;_0x3bb4ca=_0x2101f3[0x1][_0x4a84be(0x93)],global[_0x4a84be(0x1f5)][noslash(_0x3bb4ca)]=_0x2101f3[0x1]['last'],global['change'][_0x3bb4ca]=_0x2101f3[0x1][_0x4a84be(0x1f9)];});}catch(_0x4550e3){await handleError(_0x4550e3,_0x254877(0x1a7),_0x3bb4ca);}},_0x2281a0=async _0x1e2e84=>{const _0x504089=_0x3cfc97;while(initCycle==_0x9039e7){if(!botPaused)try{const _0x29e311=await exchange[_0x504089(0x160)](_0x1e2e84);global[_0x504089(0x1f5)][noslash(_0x29e311[0x0][_0x504089(0x93)])]=_0x29e311[0x0][_0x504089(0x12f)],await sleep(0x3e8);}catch(_0x21c13a){if(!exchangeStopped)await handleError(_0x21c13a,'watchTrades()',_0x1e2e84);}else await sleep(0x64);}},_0x5b0de7=async _0x17facd=>{const _0x5dbcdd=_0x3cfc97;while(initCycle==_0x9039e7){if(!botPaused){let _0x1bbe7b;try{await sleep(0x3c*0x3e8);const _0x4c069f=await getTickers(_0x17facd);Object[_0x5dbcdd(0x1a9)](_0x4c069f)['forEach'](_0x12c9ec=>{const _0xb479d9=_0x5dbcdd;_0x1bbe7b=_0x12c9ec[0x1][_0xb479d9(0x93)],global[_0xb479d9(0x19b)][_0x1bbe7b]=_0x12c9ec[0x1][_0xb479d9(0x1f9)];});}catch(_0x3f45f1){if(!exchangeStopped)await handleError(_0x3f45f1,_0x5dbcdd(0x1dc),_0x1bbe7b);}}else await sleep(0x64);}},_0x47d07e=async _0x1f4b71=>{const _0x29596b=_0x3cfc97;while(initCycle==_0x9039e7){if(!botPaused)try{const _0x506d5a=await exchange[_0x29596b(0x17c)](_0x1f4b71);initCycle==_0x9039e7&&_0x506d5a['forEach'](_0x250fb1=>{updateNumberCoinsCcxt(_0x250fb1);});}catch(_0x19227e){if(!exchangeStopped)await handleError(_0x19227e,_0x29596b(0x14e));}else await sleep(0x64);}};_0x32c5c9(_0x290e20),_0x290e20[_0x3cfc97(0x169)](_0x3e2317=>{_0x47d07e(_0x3e2317);}),!wsEventsSet&&(wsEventsSet=!![]);}async function getTickers(_0x5ae6a0){const _0x46fe07=_0x5c012c;let _0x481cba={};try{if(config[_0x46fe07(0xa1)]!=_0x46fe07(0x10b))_0x481cba=await exchange[_0x46fe07(0x22e)](_0x5ae6a0);else for(const _0x484d0a of _0x5ae6a0){const _0x3464d8=await exchange['fetchTicker'](_0x484d0a);_0x481cba[_0x484d0a]=_0x3464d8;}return _0x481cba;}catch(_0x108f5d){throw _0x108f5d;}}async function watchTransactions(){const _0x97c9cf=_0x5c012c;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x34026f=await getCoins(),[_0x147f95,_0x447600]=_0x34026f;let _0x4cdfcf=[];currentCoins['forEach'](_0x479c67=>{const _0x447ab2=_0x2992,_0x3b2793=_0x147f95[_0x447ab2(0x228)](_0xba5f9b=>_0xba5f9b[_0x447ab2(0x1f8)]==_0x479c67[_0x447ab2(0x1f8)]);if(_0x3b2793){if(_0x479c67['number']!=_0x3b2793['number']){let _0x5be920;if(_0x479c67[_0x447ab2(0x1f8)]!=config[_0x447ab2(0xdf)]){const _0x2d1597=global['ticker'][noslash(_0x479c67[_0x447ab2(0x93)])];_0x5be920=_0x479c67[_0x447ab2(0xc7)]?0x1/_0x2d1597:_0x2d1597;}else _0x5be920=0x1;_0x4cdfcf['push']({'coin':_0x479c67[_0x447ab2(0x1f8)],'symbol':_0x479c67[_0x447ab2(0x93)],'price':_0x5be920,'number':Number(formatResult(_0x3b2793[_0x447ab2(0x18a)]-_0x479c67['number'],0x8)),'basecoinvalue':_0x5be920*(_0x3b2793['number']-_0x479c67[_0x447ab2(0x18a)])});}}});if(_0x4cdfcf[_0x97c9cf(0x19d)]==0x1&&!blockTransactionDetection){if(config[_0x97c9cf(0x12e)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x4cdfcf[0x0][_0x97c9cf(0x130)]+_0x97c9cf(0x10e)+lastFees[_0x97c9cf(0x1d9)]);if(lastFees['highest']==0x0||Math[_0x97c9cf(0x221)](_0x4cdfcf[0x0][_0x97c9cf(0x130)])>lastFees[_0x97c9cf(0x1d9)]){delete _0x4cdfcf[0x0][_0x97c9cf(0x93)],delete _0x4cdfcf[0x0][_0x97c9cf(0x130)];let _0x37c451=[],_0x23cf78=[...config[_0x97c9cf(0x19f)]]||[],_0x51dff5=config[_0x97c9cf(0x19f)];_0x23cf78[_0x97c9cf(0x163)]((_0x1a59ed,_0x2240bf)=>_0x1a59ed[_0x97c9cf(0x12b)]>_0x2240bf[_0x97c9cf(0x12b)]?-0x1:_0x2240bf[_0x97c9cf(0x12b)]>_0x1a59ed['date']?0x1:0x0);const _0x379fbd=getDate();if(_0x23cf78[0x0]){const _0x128228=fns[_0x97c9cf(0x1ec)](_0x23cf78[0x0][_0x97c9cf(0x12b)],_0x97c9cf(0x103),new Date()),_0x5ad0ac=fns[_0x97c9cf(0x1ec)](_0x379fbd,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x128228,_0x5ad0ac)){_0x37c451=_0x23cf78[0x0][_0x97c9cf(0x1fd)];const _0x144e66=_0x37c451[_0x97c9cf(0x228)](_0x5fa36b=>_0x5fa36b[_0x97c9cf(0x1f8)]==_0x4cdfcf[0x0]['coin']);_0x144e66?(_0x144e66[_0x97c9cf(0x18a)]+=_0x4cdfcf[0x0]['number'],_0x144e66[_0x97c9cf(0x18a)]==0x0&&(_0x37c451=_0x37c451['filter'](_0x66ab7c=>{const _0x14d1d9=_0x97c9cf;return _0x66ab7c[_0x14d1d9(0x1f8)]!=_0x4cdfcf[0x0]['coin'];}))):_0x37c451['push'](_0x4cdfcf[0x0]);const _0x60cea3=_0x51dff5['find'](_0x1d0076=>_0x1d0076[_0x97c9cf(0x12b)]==_0x379fbd);_0x60cea3[_0x97c9cf(0x1fd)]=_0x37c451;}else _0x51dff5[_0x97c9cf(0x1f7)]({'date':_0x379fbd,'changes':[_0x4cdfcf[0x0]]});}const _0x43f536=_0x51dff5['find'](_0x48d350=>_0x48d350[_0x97c9cf(0x12b)]==_0x379fbd);if(_0x43f536){let _0x3b7157=!![];_0x43f536['changes'][_0x97c9cf(0x169)](_0x5c659a=>{if(_0x5c659a['number']!=0x0)_0x3b7157=![];}),_0x3b7157&&(_0x51dff5=_0x51dff5[_0x97c9cf(0x102)](_0x5559f9=>{const _0x134b99=_0x97c9cf;return _0x5559f9[_0x134b99(0x12b)]!=_0x379fbd;}));}let _0x5276db=dbConfig[_0x97c9cf(0xb2)](_0x97c9cf(0xac))['find']({'botID':botID})[_0x97c9cf(0x16a)]();_0x5276db&&(dbConfig[_0x97c9cf(0xb2)](_0x97c9cf(0xac))['find']({'botID':botID})[_0x97c9cf(0xf2)]({'liquidity':_0x51dff5})[_0x97c9cf(0x118)](),config[_0x97c9cf(0x19f)]=_0x51dff5),logHistory(_0x97c9cf(0x173),_0x97c9cf(0x10a)+Math[_0x97c9cf(0x221)](_0x4cdfcf[0x0][_0x97c9cf(0x18a)])+'\x20'+_0x4cdfcf[0x0]['coin']+'\x20'+(_0x4cdfcf[0x0][_0x97c9cf(0x18a)]>0x0?'added':'removed')+_0x97c9cf(0x10d)),proxyEmit(_0x97c9cf(0x20e),emittedConfiguration());}else logger[_0x97c9cf(0x122)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x97c9cf(0x221)](_0x4cdfcf[0x0][_0x97c9cf(0x18a)])+'\x20'+_0x4cdfcf[0x0][_0x97c9cf(0x1f8)]+'\x20'+(_0x4cdfcf[0x0][_0x97c9cf(0x18a)]>0x0?_0x97c9cf(0xc1):_0x97c9cf(0x227)));transactionDetected=!![];}else logger[_0x97c9cf(0x122)](_0x97c9cf(0x10a)+Math[_0x97c9cf(0x221)](_0x4cdfcf[0x0][_0x97c9cf(0x18a)])+'\x20'+_0x4cdfcf[0x0][_0x97c9cf(0x1f8)]+'\x20'+(_0x4cdfcf[0x0][_0x97c9cf(0x18a)]>0x0?_0x97c9cf(0xc1):_0x97c9cf(0x227))+_0x97c9cf(0x18e));}currentCoins=_0x147f95,currentCoinsAll=_0x447600,await sleep(watchTransactionsInterval);}catch(_0xfeceea){if(!exchangeStopped)await handleError(_0xfeceea,_0x97c9cf(0x1b2));}else await sleep(0x64);}}async function loadSymbols(){const _0x3bad44=_0x5c012c;try{markets=await exchange[_0x3bad44(0x20f)](),allSymbols=[],Object[_0x3bad44(0x1a9)](markets)['forEach'](_0x4120b9=>{const _0x9ed71b=_0x3bad44;_0x4120b9[0x1][_0x9ed71b(0x18c)]&&_0x4120b9[0x1][_0x9ed71b(0x95)]&&allSymbols[_0x9ed71b(0x1f7)](_0x4120b9[0x0]);});}catch(_0x314597){throw _0x314597;}}function validateSymbols(_0x3f4aaa){let _0x3cabca=[];return _0x3f4aaa['forEach'](_0x1ed51a=>{const _0x182e61=_0x2992;!allSymbols['includes'](_0x1ed51a)?logHistory(_0x182e61(0x189),_0x182e61(0x1ac)+_0x1ed51a+_0x182e61(0x1b3)):_0x3cabca[_0x182e61(0x1f7)](_0x1ed51a);}),_0x3cabca;}async function initclient(){const _0x34459f=_0x5c012c;proxyEmit(_0x34459f(0x20e),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x34459f(0x184),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x551a50=getNormalizedPerformance();emitPerformance(_0x551a50),getStartingBalances(_0x551a50);}async function toggleBotMode(){const _0x362bc3=_0x5c012c;let _0x347460=dbConfig[_0x362bc3(0xb2)](_0x362bc3(0xac))['find']({'botID':botID})[_0x362bc3(0x16a)]();if(_0x347460){const _0x13a489=!_0x347460['headless'];dbConfig[_0x362bc3(0xb2)](_0x362bc3(0xac))[_0x362bc3(0x228)]({'botID':botID})['assign']({'headless':_0x13a489})[_0x362bc3(0x118)](),config[_0x362bc3(0x9b)]=_0x13a489,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xdb23c9=_0x5c012c;process['send']({'updatebotmanager':!![]},_0x2e3a65=>{}),logger['debug'](_0xdb23c9(0x1de)+config[_0xdb23c9(0x9b)]);}async function loadCoins(_0x579917){const _0x552537=_0x5c012c;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2770c0,_0x11ac30=0x0,_0x464095=0x0;_0x579917[_0x552537(0x169)](_0xa847fd=>{loading['remainingSymbols']['push'](_0xa847fd);}),loadingCanceled=![];let _0x3cc948=![];while(_0x2770c0!=_0x579917['length']+maxLoadingProgress){_0x2770c0=loadingProgress,_0x579917[_0x552537(0x169)](_0x16d98d=>{const _0x2b37d6=_0x552537;if(global[_0x2b37d6(0x1f5)][noslash(_0x16d98d)]){loading[_0x2b37d6(0x137)]=loading[_0x2b37d6(0x137)][_0x2b37d6(0x102)](_0x5b25cf=>_0x5b25cf!=_0x16d98d);if(!watchedSymbols[_0x2b37d6(0x8d)](_0x16d98d))watchedSymbols[_0x2b37d6(0x1f7)](_0x16d98d);_0x2770c0++;}}),loading[_0x552537(0x1e1)]=Math[_0x552537(0x22d)](_0x2770c0/(_0x579917[_0x552537(0x19d)]+maxLoadingProgress)*0x64);loading[_0x552537(0x1e1)]!=0x64&&(_0x464095>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x464095>0x78*0x5&&!_0x3cc948&&(_0x3cc948=!![],logHistory(_0x552537(0x189),_0x552537(0x203)+loading[_0x552537(0x137)][_0x552537(0xe9)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x552537(0x189),_0x552537(0x1a6)+loadCoinsRetryInterval/0xea60+_0x552537(0x138)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x7d6ff5=_0x552537;process[_0x7d6ff5(0xd2)]({'stop':_0x7d6ff5(0x121)},_0x3065b1=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x552537(0x157)]=!![],emitLoadingProgress();break;}else _0x11ac30!=loading[_0x552537(0x1e1)]&&(_0x11ac30=loading[_0x552537(0x1e1)],emitLoadingProgress()),_0x464095++,await sleep(0xc8);}_0x2770c0==_0x579917[_0x552537(0x19d)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x552537(0xd2)]({'status':_0x552537(0x87),'live':_0x552537(0x181)},_0xd3c1ba=>{}),_0x3cc948&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x4f421b=_0x5c012c;proxyEmit(_0x4f421b(0x188),loading);}async function getFiat(){const _0x371823=_0x5c012c;let _0x27054c=global[_0x371823(0x1f5)][stablecoins[_0x371823(0x104)][_0x371823(0x1f8)]],_0x563d98=global[_0x371823(0x1f5)][stablecoins[_0x371823(0x123)][_0x371823(0x1f8)]];return{'eur':Number(_0x27054c),'usd':Number(_0x563d98)};}function capitalize(_0x2256a9){const _0x571dba=_0x5c012c;return _0x2256a9[_0x571dba(0x17b)](0x0,0x1)['toUpperCase']()+_0x2256a9[_0x571dba(0x17b)](0x1);}function supportedExchanges(){const _0x285761=_0x5c012c,_0x534937=['ws','fetchTickers','fetchTicker',_0x285761(0x160),'watchOrders',_0x285761(0x17f),_0x285761(0x1fe),_0x285761(0x1da),_0x285761(0x143),_0x285761(0x21c)];let _0x1b7ac1=[],_0x4ba869=[],_0xb63dcd=ccxt[_0x285761(0xbb)][_0x285761(0x175)];_0xb63dcd[_0x285761(0x169)](_0x3332b8=>{const _0x536716=_0x285761;try{const _0x2251b2=new ccxt['pro'][_0x3332b8]();_0x4ba869[_0x536716(0x1f7)](_0x2251b2);}catch(_0x3e874e){}}),_0x4ba869[_0x285761(0x169)](_0x122acd=>{const _0x512513=_0x285761;let _0x543ee6=0x0;_0x534937[_0x512513(0x169)](_0x9d9c5a=>{const _0x56ead6=_0x512513;_0x9d9c5a in _0x122acd['has']&&_0x122acd[_0x56ead6(0x19e)][_0x9d9c5a]&&_0x543ee6++;}),_0x543ee6==_0x534937[_0x512513(0x19d)]&&_0x1b7ac1['push'](capitalize(_0x122acd['id']));});let _0x2aaa25=[];return _0xb63dcd['forEach'](_0x471741=>{const _0x313831=_0x285761;_0x471741=capitalize(_0x471741);if(!_0x1b7ac1[_0x313831(0x8d)](_0x471741))_0x2aaa25[_0x313831(0x1f7)](_0x471741);}),_0x1b7ac1;}function setStartDatePerformance(){const _0x3f32a1=_0x5c012c;if(config&&config[_0x3f32a1(0x19f)][0x0][_0x3f32a1(0x1fd)]['length']!=0x0){const _0x58c929=config[_0x3f32a1(0x19f)][0x0][_0x3f32a1(0x1fd)];dbPerformance[_0x3f32a1(0xb2)](_0x3f32a1(0x112))[_0x3f32a1(0x228)]({'date':config['startdate']})[_0x3f32a1(0xf2)]({'coins':_0x58c929})[_0x3f32a1(0x118)]();}}async function recreateCoinResults(){const _0x25a282=_0x5c012c;let _0x5938b4,_0x3e4890=[];try{const _0x57674b=fns[_0x25a282(0x1be)](fns[_0x25a282(0xf9)](config['startdate'][_0x25a282(0x162)](/\//g,'-')),_0x25a282(0x16d));for(const _0x1b7ed1 of currentCoins){if(_0x1b7ed1['coin']!=config[_0x25a282(0xdf)]){let _0x5d4dbc=0x0,_0x19cd07,_0x415bfa;_0x5938b4=await getAllEventOrders(_0x1b7ed1[_0x25a282(0x93)]);if(_0x5938b4[_0x25a282(0x19d)]>0x0)_0x5938b4[_0x25a282(0x169)](_0x1a4294=>{const _0x359c7f=_0x25a282,_0x1d0311=_0x1b7ed1[_0x359c7f(0x93)][_0x359c7f(0x8d)](config[_0x359c7f(0xdf)]+'/');_0x3e4890[_0x359c7f(0x1f7)]({'datetime':_0x1a4294[_0x359c7f(0x20d)],'coin':_0x1b7ed1[_0x359c7f(0x1f8)],'symbol':_0x1b7ed1[_0x359c7f(0x93)],'side':_0x1a4294['side'],'reverse':_0x1d0311,'amount':formatResult(_0x1a4294[_0x359c7f(0xef)],0x8),'filled':formatResult(_0x1a4294['filled'],0x8),'price':formatResult(_0x1a4294[_0x359c7f(0x12f)],0x8)}),_0x5d4dbc=_0x1a4294[_0x359c7f(0xba)]=='buy'?_0x5d4dbc+_0x1a4294[_0x359c7f(0xef)]:_0x5d4dbc-_0x1a4294['filled'];if(!_0x415bfa)_0x415bfa=_0x1a4294['price'];});_0x19cd07=_0x1b7ed1[_0x25a282(0x18a)]-_0x5d4dbc;let _0x894476;config[_0x25a282(0x19f)]['forEach'](_0x57b115=>{const _0x3593f6=_0x25a282;!_0x894476&&(_0x894476=_0x57b115['changes'][_0x3593f6(0x228)](_0x570364=>_0x570364[_0x3593f6(0x1f8)]==_0x1b7ed1[_0x3593f6(0x1f8)]),_0x894476&&(_0x19cd07=_0x894476[_0x3593f6(0x18a)],_0x415bfa=_0x894476[_0x3593f6(0x12f)]));});let _0x41b1c6=dbCoinResults[_0x25a282(0xb2)](_0x25a282(0x219))[_0x25a282(0x228)]({'coin':_0x1b7ed1['coin']})[_0x25a282(0x16a)]();_0x41b1c6={'coin':_0x1b7ed1[_0x25a282(0x1f8)],'number':_0x19cd07,'breakeven':_0x415bfa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x25a282(0xb2)]('coins')[_0x25a282(0x228)]({'coin':_0x1b7ed1[_0x25a282(0x1f8)]})[_0x25a282(0xf2)](_0x41b1c6)[_0x25a282(0x118)]();}}_0x3e4890[_0x25a282(0x163)]((_0x4e4283,_0x3fffba)=>_0x4e4283[_0x25a282(0x20d)]>_0x3fffba[_0x25a282(0x20d)]?0x1:_0x3fffba[_0x25a282(0x20d)]>_0x4e4283[_0x25a282(0x20d)]?-0x1:0x0);let _0x46f003=0x0;for(let _0x5465eb of _0x3e4890){await updateCoinResults(_0x5465eb,!![]);}}catch(_0x5d3284){await handleError(_0x5d3284,_0x25a282(0x12d));}}async function getAllEventOrders(_0xb0584b){const _0x506b7b=_0x5c012c;let _0x535d98=[],_0x22f80f=dbLogs[_0x506b7b(0xb2)](_0x506b7b(0x21d))['filter'](_0x1a9e01=>{const _0x15833f=_0x506b7b,_0x36c817=_0x1a9e01[_0x15833f(0xb0)][_0x15833f(0x1dd)]();return _0x36c817[_0x15833f(0x8d)](_0xb0584b['toLowerCase']())&&(_0x36c817[_0x15833f(0x8d)]('market')&&_0x36c817['includes'](_0x15833f(0x144))||_0x36c817['includes']('filled')&&_0x36c817['includes'](_0x15833f(0x144)));})[_0x506b7b(0x199)](_0x506b7b(0x1a5))[_0x506b7b(0x16a)]();return _0x22f80f['forEach'](_0x47347d=>{const _0x487df4=_0x506b7b,_0x1d315d=_0x47347d[_0x487df4(0xb0)][_0x487df4(0x8d)](_0x487df4(0xcf))?'sell':_0x487df4(0x21a),_0x1e39f0=/#([0-9]|\.)+\s/i,_0x2123b4=Number(_0x1e39f0['exec'](_0x47347d['event'])[0x0][_0x487df4(0x113)](0x1)),_0x5e4d3c=/@([0-9]|\.)+$/i,_0xe5b021=Number(_0x5e4d3c[_0x487df4(0x190)](_0x47347d['event'])[0x0][_0x487df4(0x113)](0x1));_0x535d98[_0x487df4(0x1f7)]({'datetime':_0x47347d[_0x487df4(0x1a5)],'coin':symbolToCoin(_0xb0584b),'symbol':_0xb0584b,'side':_0x1d315d,'amount':_0x2123b4,'filled':_0x2123b4,'price':_0xe5b021});}),_0x535d98;}async function getAllOrders(_0x14c767,_0x14d74f){const _0x53594e=_0x5c012c;let _0x3f4ebf=[];while(_0x14d74f<exchange[_0x53594e(0x1d2)]()){const _0x1b4829=0x1f4;try{const _0x36396f=await exchange['fetchClosedOrders'](_0x14c767,_0x14d74f,_0x1b4829);if(_0x36396f[_0x53594e(0x19d)])_0x14d74f=_0x36396f[_0x36396f[_0x53594e(0x19d)]-0x1]['timestamp']+0x1,_0x3f4ebf=_0x3f4ebf[_0x53594e(0xae)](_0x36396f);else break;}catch(_0x9ed42d){await handleError(_0x9ed42d,_0x53594e(0x14d),_0x14c767);}}return _0x3f4ebf;}async function validate24hChanges(){const _0x2ef4d4=_0x5c012c;for(const _0x5a1260 of currentCoins){if(_0x5a1260[_0x2ef4d4(0x1f8)]!=config[_0x2ef4d4(0xdf)]){let _0x319335;_0x5a1260[_0x2ef4d4(0xc7)]?_0x319335=formatResult((0x1/(global[_0x2ef4d4(0x19b)][noslash(_0x5a1260[_0x2ef4d4(0x93)])]/0x64+0x1)-0x1)*0x64,0x3):_0x319335=global[_0x2ef4d4(0x19b)][noslash(_0x5a1260[_0x2ef4d4(0x93)])],_0x319335<config['change24h']&&(logHistory(_0x2ef4d4(0x189),_0x5a1260[_0x2ef4d4(0x1f8)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x319335+'%'),logHistory(_0x2ef4d4(0x189),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x2ef4d4(0x189),_0x2ef4d4(0x1ab)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xc5b00d,_0x193219){const _0xc3ee51=_0x5c012c;if(!_0xc5b00d)return!![];const _0x3f1050=_0x193219['split']('.'),_0x530214=_0xc5b00d[_0xc3ee51(0xe6)]('.');for(var _0x42aa26=0x0;_0x42aa26<_0x530214[_0xc3ee51(0x19d)];_0x42aa26++){const _0x1b81d3=~~_0x530214[_0x42aa26],_0x3f868d=~~_0x3f1050[_0x42aa26];if(_0x1b81d3<_0x3f868d)return!![];if(_0x1b81d3>_0x3f868d)return![];}return![];}async function oneTimeMigration(){const _0xeec4ba=_0x5c012c;let _0x50e27c=dbLogs[_0xeec4ba(0xb2)](_0xeec4ba(0x1b6))[_0xeec4ba(0x16a)]();if(isOlderVersion(_0x50e27c,_0xeec4ba(0x9e))){let _0x1faba5=[];const _0x48f952=dbLogs[_0xeec4ba(0xb2)](_0xeec4ba(0x21d))[_0xeec4ba(0x16a)]();_0x48f952['forEach'](_0x431291=>{const _0x2f3f05=_0xeec4ba;_0x1faba5[_0x2f3f05(0x1f7)]({'time':_0x431291[_0x2f3f05(0x1a5)],'type':_0x431291[_0x2f3f05(0xa9)],'event':_0x431291[_0x2f3f05(0xb0)]});}),dbLogs[_0xeec4ba(0xb2)]('logs')[_0xeec4ba(0xf2)](_0x1faba5)[_0xeec4ba(0x118)]();}let _0xdf2f9c=dbConfig[_0xeec4ba(0xb2)](_0xeec4ba(0x1b6))[_0xeec4ba(0x16a)]();if(isOlderVersion(_0xdf2f9c,_0xeec4ba(0x9e))){let _0x4df3ce=dbConfig['get']('bot')[_0xeec4ba(0x228)]({'botID':botID})['value']();if(_0x4df3ce){let _0x4de5ba=[];_0x4df3ce[_0xeec4ba(0xad)]['forEach'](_0x45128d=>{const _0x5c84ee=_0xeec4ba;_0x4de5ba[_0x5c84ee(0x1f7)]({'coin':_0x45128d[_0x5c84ee(0x1f8)],'number':_0x45128d[_0x5c84ee(0x206)],'price':_0x45128d[_0x5c84ee(0x94)]}),delete _0x45128d[_0x5c84ee(0x206)],delete _0x45128d[_0x5c84ee(0x94)];});if(_0x4de5ba[_0xeec4ba(0x19d)]!==0x0)fs['writeFile'](configbackuppath+(_0xeec4ba(0x1bf)+botID+_0xeec4ba(0x14c)),JSON['stringify'](_0x4de5ba,null,0x4),function(_0x59e8b2){if(_0x59e8b2){}});const _0x23fde5=(_0x13b05e,_0x172512)=>{const _0x18fc2b=_0xeec4ba;let _0x34c21c=[];_0x172512[_0x18fc2b(0x169)](_0x208db1=>{const _0x1b1fbd=_0x18fc2b,_0x2ad9e4=_0x13b05e[_0x1b1fbd(0x228)](_0x5d0f0f=>_0x5d0f0f[_0x1b1fbd(0x1f8)]==_0x208db1[_0x1b1fbd(0x1f8)]);if(!_0x2ad9e4)_0x34c21c[_0x1b1fbd(0x1f7)](_0x208db1);});let _0xe029d9=[];return _0x13b05e[_0x18fc2b(0x169)](_0x24c981=>{const _0x334fd7=_0x18fc2b,_0x4f72f6=_0x172512['find'](_0x215318=>_0x215318[_0x334fd7(0x1f8)]==_0x24c981['coin']);if(!_0x4f72f6||_0x4f72f6[_0x334fd7(0x18a)]==0x0&&_0x24c981[_0x334fd7(0x18a)]!=0x0)_0xe029d9[_0x334fd7(0x1f7)](_0x24c981);}),{'missingDay1':_0x34c21c,'notInDay2':_0xe029d9};},_0x5e627e=dbPerformance[_0xeec4ba(0xb2)](_0xeec4ba(0x112))[_0xeec4ba(0x17d)]()['value']();if(_0x5e627e['length']>0x1){const {missingDay1:_0x345ddb,notInDay2:_0x41aa62}=_0x23fde5(_0x4de5ba,_0x5e627e[0x1]['coins']);_0x4de5ba=[..._0x4de5ba,..._0x345ddb],_0x41aa62[_0xeec4ba(0x169)](_0xa20d9f=>{const _0x4fdfe1=_0xeec4ba;let _0x45e491=_0x4de5ba['findIndex'](_0x299309=>_0x299309['coin']==_0xa20d9f[_0x4fdfe1(0x1f8)]);_0x45e491!=-0x1&&_0x4de5ba[_0x4fdfe1(0xf3)](_0x45e491,0x1);});}_0x4de5ba[_0xeec4ba(0x163)]((_0x3315fe,_0x47490c)=>_0x3315fe[_0xeec4ba(0x1f8)]>_0x47490c['coin']?0x1:_0x47490c['coin']>_0x3315fe[_0xeec4ba(0x1f8)]?-0x1:0x0);let _0x21d86b=[{'date':_0x4df3ce[_0xeec4ba(0x218)],'changes':_0x4de5ba}];_0x5e627e[_0xeec4ba(0x19d)]>0x2&&_0x5e627e[_0xeec4ba(0x169)]((_0x4003fe,_0x3e492d)=>{const _0x17b1e6=_0xeec4ba;if(_0x3e492d>0x0&&_0x3e492d<_0x5e627e[_0x17b1e6(0x19d)]-0x1){const {missingDay1:_0x55c6df,notInDay2:_0x2a9f8e}=_0x23fde5(_0x5e627e[_0x3e492d][_0x17b1e6(0x219)],_0x5e627e[_0x3e492d+0x1][_0x17b1e6(0x219)]);_0x4de5ba=[],(_0x55c6df[_0x17b1e6(0x19d)]!=0x0||_0x2a9f8e[_0x17b1e6(0x19d)]!=0x0)&&(_0x55c6df[_0x17b1e6(0x19d)]!=0x0&&_0x4de5ba[_0x17b1e6(0x1f7)](..._0x55c6df),_0x2a9f8e[_0x17b1e6(0x19d)]!=0x0&&(_0x2a9f8e[_0x17b1e6(0x169)](_0xfc8686=>{const _0x1e2493=_0x17b1e6;_0xfc8686['number']=-_0xfc8686[_0x1e2493(0x18a)];}),_0x4de5ba[_0x17b1e6(0x1f7)](..._0x2a9f8e)),_0x4de5ba[_0x17b1e6(0x163)]((_0x1ad5a5,_0x45ae30)=>_0x1ad5a5['coin']>_0x45ae30['coin']?0x1:_0x45ae30['coin']>_0x1ad5a5[_0x17b1e6(0x1f8)]?-0x1:0x0),_0x21d86b[_0x17b1e6(0x1f7)]({'date':_0x5e627e[_0x3e492d+0x1][_0x17b1e6(0x12b)],'changes':_0x4de5ba}));}}),dbConfig[_0xeec4ba(0xb2)](_0xeec4ba(0xac))[_0xeec4ba(0x228)]({'botID':botID})[_0xeec4ba(0xf2)]({..._0x4df3ce,'liquidity':_0x21d86b})[_0xeec4ba(0x118)]();}}if(isOlderVersion(_0xdf2f9c,_0xeec4ba(0x211))){let _0x1e9fcc=dbConfig['get'](_0xeec4ba(0xac))[_0xeec4ba(0x228)]({'botID':botID})['value']();if(_0x1e9fcc){const _0x21301b=_0x1e9fcc[_0xeec4ba(0xa1)],_0xf45d62=_0x21301b?capitalize(_0x21301b):'Binance';dbConfig['get'](_0xeec4ba(0xac))[_0xeec4ba(0x228)]({'botID':botID})[_0xeec4ba(0xf2)]({'exchange':_0xf45d62})[_0xeec4ba(0x118)]();}}let _0x4e87ef=dbPerformance[_0xeec4ba(0xb2)]('version')[_0xeec4ba(0x16a)]();isOlderVersion(_0x4e87ef,'2.3.5')&&setStartDatePerformance();let _0x3b06f1=dbCoinResults['get'](_0xeec4ba(0x1b6))[_0xeec4ba(0x16a)]();if(isOlderVersion(_0x3b06f1,_0xeec4ba(0x179))){let _0x307f2a=dbCoinResults['get'](_0xeec4ba(0x219))[_0xeec4ba(0x16a)]();if(_0x307f2a[_0xeec4ba(0x19d)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5415b5=_0x5c012c;dbConfig[_0x5415b5(0x146)](_0x5415b5(0x1b6),serverversion)['write'](),dbPerformance[_0x5415b5(0x146)](_0x5415b5(0x1b6),serverversion)[_0x5415b5(0x118)](),dbLogs[_0x5415b5(0x146)](_0x5415b5(0x1b6),serverversion)[_0x5415b5(0x118)](),dbCoinResults['set'](_0x5415b5(0x1b6),serverversion)[_0x5415b5(0x118)]();}function getConfiguration(_0x3d1181){const _0x4b88d1=_0x5c012c;let _0x520a7b=dbConfig[_0x4b88d1(0xb2)](_0x4b88d1(0xac))[_0x4b88d1(0x228)]({'botID':_0x3d1181})[_0x4b88d1(0x16a)]();if(_0x520a7b){let _0x33053d=![];typeof _0x520a7b[_0x4b88d1(0x222)]=='string'&&(_0x520a7b={..._0x520a7b,'threshold':Number(_0x520a7b[_0x4b88d1(0x222)])},_0x33053d=!![]),_0x520a7b[_0x4b88d1(0x22b)]==undefined&&(_0x520a7b={..._0x520a7b,'change24h':-0x14},_0x33053d=!![]),_0x520a7b[_0x4b88d1(0x1b9)]==undefined&&(_0x520a7b={..._0x520a7b,'fiat':_0x4b88d1(0xed)},_0x33053d=!![]),_0x520a7b['onepagemode']==undefined&&(_0x520a7b={..._0x520a7b,'onepagemode':settings['onepagemode']},_0x33053d=!![]),_0x520a7b[_0x4b88d1(0x11d)]==undefined&&(_0x520a7b={..._0x520a7b,'colorscheme':'red_yellow_blue'},_0x33053d=!![]),_0x520a7b[_0x4b88d1(0x12e)]==undefined&&(_0x520a7b={..._0x520a7b,'autoliquidity':!![]},_0x33053d=!![]),_0x33053d&&(_0x520a7b={'botID':_0x520a7b[_0x4b88d1(0x1f2)],'exchange':_0x520a7b[_0x4b88d1(0xa1)],'apiKey':_0x520a7b[_0x4b88d1(0x1c9)],'apiSecret':_0x520a7b[_0x4b88d1(0x178)],'apiPassword':_0x520a7b[_0x4b88d1(0x1a0)],'basecoin':_0x520a7b[_0x4b88d1(0xdf)],'botname':_0x520a7b['botname'],'showname':_0x520a7b['showname'],'threshold':_0x520a7b[_0x4b88d1(0x222)],'ordertype':_0x520a7b['ordertype'],'timeout':_0x520a7b[_0x4b88d1(0x13e)],'fiat':_0x520a7b[_0x4b88d1(0x1b9)],'startdate':_0x520a7b[_0x4b88d1(0x218)],'recreate':_0x520a7b[_0x4b88d1(0x183)],'timeshift':_0x520a7b[_0x4b88d1(0x10f)],'onepagemode':_0x520a7b[_0x4b88d1(0xfc)],'headless':_0x520a7b[_0x4b88d1(0x9b)],'cooldown':_0x520a7b['cooldown'],'change24h':_0x520a7b[_0x4b88d1(0x22b)],'emojibuy':_0x520a7b[_0x4b88d1(0x198)],'emojisell':_0x520a7b['emojisell'],'colorscheme':_0x520a7b[_0x4b88d1(0x11d)],'portfolio':_0x520a7b['portfolio'],'autoliquidity':_0x520a7b[_0x4b88d1(0x12e)],'liquidity':_0x520a7b['liquidity'],'openOrders':_0x520a7b['openOrders']},dbConfig[_0x4b88d1(0xb2)](_0x4b88d1(0xac))[_0x4b88d1(0x1a1)]()['write'](),dbConfig['get'](_0x4b88d1(0xac))['push'](_0x520a7b)[_0x4b88d1(0x118)]());}else _0x520a7b={'botID':_0x3d1181,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4b88d1(0x182)+_0x3d1181,'showname':![],'threshold':0x3,'ordertype':_0x4b88d1(0x1eb),'timeout':0x14,'fiat':_0x4b88d1(0xed),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4b88d1(0x10f)],'onepagemode':settings[_0x4b88d1(0xfc)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4b88d1(0xd0),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x520a7b;}function emittedConfiguration(){const _0x34a3d9=_0x5c012c;let _0x227f86;if(config[_0x34a3d9(0x1c9)]=='')_0x227f86={...config,'configstate':'initial'};else config[_0x34a3d9(0x1c9)]==_0x34a3d9(0x1cf)?_0x227f86={...config,'configstate':'recovery'}:(_0x227f86={...config,'apiKey':'************','apiSecret':'************'},config[_0x34a3d9(0x1a0)]&&(_0x227f86['apiPassword']=_0x34a3d9(0xf7)));return _0x227f86;}function getSettings(){const _0x55efd7=_0x5c012c;return dbSettings[_0x55efd7(0xb2)](_0x55efd7(0x1a4))[_0x55efd7(0x16a)]();}function getSecure(){const _0x1a0d03=_0x5c012c;return dbSecure['get'](_0x1a0d03(0x13c))[_0x1a0d03(0x16a)]()||{};}function updateTimeshift(_0x144392){const _0x2eeff5=_0x5c012c;let _0x58a0b7=dbConfig[_0x2eeff5(0xb2)](_0x2eeff5(0xac))['find']({'botID':botID})[_0x2eeff5(0x16a)]();_0x58a0b7&&dbConfig[_0x2eeff5(0xb2)](_0x2eeff5(0xac))[_0x2eeff5(0x228)]({'botID':botID})[_0x2eeff5(0xf2)]({'timeshift':_0x144392})['write'](),config[_0x2eeff5(0x10f)]=_0x144392,proxyEmit(_0x2eeff5(0x20e),emittedConfiguration());}function updateOnepagemode(_0x1080d0){const _0x1a3577=_0x5c012c;let _0xad84a3=dbConfig[_0x1a3577(0xb2)](_0x1a3577(0xac))['find']({'botID':botID})[_0x1a3577(0x16a)]();_0xad84a3&&dbConfig[_0x1a3577(0xb2)](_0x1a3577(0xac))['find']({'botID':botID})[_0x1a3577(0xf2)]({'onepagemode':_0x1080d0})[_0x1a3577(0x118)](),config['onepagemode']=_0x1080d0,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x12c2bc){const _0x49bf50=_0x5c012c;logger[_0x49bf50(0x122)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x49bf50(0x122)](_0x49bf50(0x17a));let _0xe0165e=![],_0x368d86=![],_0x41ac55=[];_0x12c2bc['portfolio'][_0x49bf50(0x169)](_0xae5a1f=>{const _0x1f4915=_0x49bf50;if(!_0xae5a1f['excluded']&&_0xae5a1f[_0x1f4915(0x1f8)]!=_0x12c2bc[_0x1f4915(0xdf)])_0x41ac55[_0x1f4915(0x1f7)](_0xae5a1f[_0x1f4915(0x93)]);}),_0x41ac55[_0x49bf50(0x169)](_0x561ebc=>{const _0xa982ba=_0x49bf50,_0x456019=currentCoins[_0xa982ba(0x228)](_0x124213=>_0x124213[_0xa982ba(0x93)]==_0x561ebc);!_0x456019&&(_0xe0165e=!![]);}),currentCoins[_0x49bf50(0x169)](_0xc467f3=>{const _0x8cb62a=_0x49bf50;if(_0xc467f3[_0x8cb62a(0x1f8)]!=config[_0x8cb62a(0xdf)]){const _0x17f284=_0x41ac55['find'](_0x37e3cf=>_0x37e3cf==_0xc467f3[_0x8cb62a(0x93)]);!_0x17f284&&(_0xe0165e=!![]);}}),_0x12c2bc['portfolio']['forEach'](_0x10151a=>{const _0x40f55d=_0x49bf50,_0x30abf1=config[_0x40f55d(0xad)][_0x40f55d(0x228)](_0x15c8f8=>_0x15c8f8[_0x40f55d(0x1f8)]==_0x10151a['coin']);if(_0x30abf1&&_0x10151a[_0x40f55d(0x1e9)]!=_0x30abf1[_0x40f55d(0x1e9)])_0x368d86=!![];});let _0x3efd87=dbConfig['get'](_0x49bf50(0xac))['find']({'botID':botID})['value']();_0x12c2bc={..._0x12c2bc,'apiKey':crypt[_0x49bf50(0x209)](secure[_0x49bf50(0x12c)],_0x12c2bc['apiKey'])[_0x49bf50(0x1e2)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x12c2bc[_0x49bf50(0x178)])[_0x49bf50(0x1e2)]};_0x12c2bc['apiPassword']&&(_0x12c2bc['apiPassword']=crypt['decrypt'](secure[_0x49bf50(0x12c)],_0x12c2bc[_0x49bf50(0x1a0)])['message']);let _0x296e4d=![];if(_0x3efd87){_0x12c2bc[_0x49bf50(0x1c9)]==_0x49bf50(0xf7)?_0x12c2bc[_0x49bf50(0x1c9)]=config[_0x49bf50(0x1c9)]:_0x296e4d=!![];_0x12c2bc[_0x49bf50(0x178)]==_0x49bf50(0xf7)?_0x12c2bc['apiSecret']=config[_0x49bf50(0x178)]:_0x296e4d=!![];if(_0x12c2bc[_0x49bf50(0x1a0)]=='************')_0x12c2bc[_0x49bf50(0x1a0)]=config['apiPassword'];else{if(_0x12c2bc['apiPassword'])_0x296e4d=!![];}dbConfig[_0x49bf50(0xb2)](_0x49bf50(0xac))['find']({'botID':botID})[_0x49bf50(0xf2)](_0x12c2bc)['write']();}else dbConfig['get'](_0x49bf50(0xac))[_0x49bf50(0x1f7)](_0x12c2bc)[_0x49bf50(0x118)](),_0x296e4d=!![],process['send']({'status':_0x49bf50(0x87),'live':_0x49bf50(0x181)},_0x377d8f=>{});process[_0x49bf50(0xd2)]({'botname':_0x12c2bc[_0x49bf50(0x108)]},_0x4119b3=>{}),config={..._0x12c2bc},updateBotManager(),proxyEmit(_0x49bf50(0x191)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x296e4d)await reset(!![]);else _0xe0165e||_0x368d86?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x49bf50(0x122)](_0x49bf50(0xc3));}async function storeHeadless(_0x104e82){const _0x39557f=_0x5c012c,_0x5b4831={...config,'headless':_0x104e82['headless']};let _0x45802a=dbConfig[_0x39557f(0xb2)](_0x39557f(0xac))[_0x39557f(0x228)]({'botID':botID})[_0x39557f(0x16a)]();_0x45802a&&dbConfig[_0x39557f(0xb2)](_0x39557f(0xac))[_0x39557f(0x228)]({'botID':botID})[_0x39557f(0xf2)](_0x5b4831)[_0x39557f(0x118)](),config={..._0x5b4831},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4c05f3){const _0x53bb97=_0x5c012c,_0x1ef9f5={...config,'fiat':_0x4c05f3};let _0x59c67c=dbConfig[_0x53bb97(0xb2)](_0x53bb97(0xac))[_0x53bb97(0x228)]({'botID':botID})[_0x53bb97(0x16a)]();_0x59c67c&&dbConfig['get'](_0x53bb97(0xac))[_0x53bb97(0x228)]({'botID':botID})['assign'](_0x1ef9f5)[_0x53bb97(0x118)](),config={..._0x1ef9f5},proxyEmit(_0x53bb97(0x20e),emittedConfiguration());}function resetHistory(){const _0x2f638f=_0x5c012c;logger[_0x2f638f(0x1cd)](_0x2f638f(0x167));try{if(fs[_0x2f638f(0xe7)](path[_0x2f638f(0xe9)](configpath,_0x2f638f(0x17e)+botID+_0x2f638f(0x1e4))))fs[_0x2f638f(0xca)](path[_0x2f638f(0xe9)](configpath,'bot-'+botID+_0x2f638f(0x1e4)));if(fs['existsSync'](path[_0x2f638f(0xe9)](configpath,_0x2f638f(0x17e)+botID+_0x2f638f(0x1b5))))fs['unlinkSync'](path[_0x2f638f(0xe9)](configpath,_0x2f638f(0x17e)+botID+_0x2f638f(0x1b5)));if(fs[_0x2f638f(0xe7)](path['join'](configpath,_0x2f638f(0x17e)+botID+_0x2f638f(0x1a2))))fs[_0x2f638f(0xca)](path['join'](configpath,_0x2f638f(0x17e)+botID+_0x2f638f(0x1a2)));}catch(_0x4942c1){if(_0x4942c1)logger['full'](_0x2f638f(0x148),_0x4942c1);}const _0x421c92=getDate();let _0x5a864f=[];currentCoins[_0x2f638f(0x169)](_0x5204ff=>{const _0x1db3e7=_0x2f638f;_0x5a864f['push']({'coin':_0x5204ff[_0x1db3e7(0x1f8)],'number':_0x5204ff[_0x1db3e7(0x18a)],'price':_0x5204ff[_0x1db3e7(0x8f)]});});let _0x205e5d=dbConfig[_0x2f638f(0xb2)](_0x2f638f(0xac))[_0x2f638f(0x228)]({'botID':botID})['value']();_0x205e5d&&(dbConfig[_0x2f638f(0xb2)]('bot')[_0x2f638f(0x228)]({'botID':botID})[_0x2f638f(0xf2)]({'liquidity':[{'date':_0x421c92,'changes':_0x5a864f}]})[_0x2f638f(0x118)](),config[_0x2f638f(0x19f)]=[]),process['send']({'stop':_0x2f638f(0x121)},_0x2787c1=>{});}function noslash(_0x259296){const _0x13d6e5=_0x5c012c;return _0x259296[_0x13d6e5(0x162)]('/','');}function updateHighestFee(_0x29ff3b){const _0x3d813a=_0x5c012c;if(_0x29ff3b[_0x3d813a(0xc7)]){let _0x2f1fd6={'filled':_0x29ff3b[_0x3d813a(0xef)]*_0x29ff3b[_0x3d813a(0x12f)],'amount':_0x29ff3b[_0x3d813a(0xef)]*_0x29ff3b[_0x3d813a(0x12f)],'side':_0x29ff3b['side']==_0x3d813a(0xcf)?'buy':'sell','price':0x1/_0x29ff3b['price']};_0x29ff3b={..._0x29ff3b,..._0x2f1fd6};}const _0xaa2eae=defaultFee*_0x29ff3b[_0x3d813a(0xef)]*_0x29ff3b['price'];lastFees['recent20'][_0x3d813a(0x19d)]===0x14&&lastFees[_0x3d813a(0x154)][_0x3d813a(0x217)](),lastFees[_0x3d813a(0x154)][_0x3d813a(0x1f7)](_0xaa2eae),lastFees[_0x3d813a(0x1d9)]=Math[_0x3d813a(0x166)](...lastFees[_0x3d813a(0x154)]);}async function updateNumberCoinsCcxt(_0xf60e39){const _0x52137b=_0x5c012c;logger[_0x52137b(0x122)](_0x52137b(0x1d0)+_0xf60e39['symbol']+_0x52137b(0x9d)+_0xf60e39[_0x52137b(0x1bd)]+'\x20|\x20'+_0xf60e39[_0x52137b(0xef)]+_0x52137b(0x13b)+_0xf60e39[_0x52137b(0x1ae)]+_0x52137b(0x9d)+_0xf60e39['id']);let _0x364102=_0xf60e39[_0x52137b(0x1bd)],_0x33dd94=![];currentCoins[_0x52137b(0x169)](_0x38379e=>{const _0x2fad98=_0x52137b;_0x38379e[_0x2fad98(0x93)]==_0xf60e39[_0x2fad98(0x93)]&&(_0x33dd94=!![]);});if(!_0x33dd94)return;const _0x48d7d7=currentCoins[_0x52137b(0x228)](_0x1f2b1d=>_0x1f2b1d['symbol']==_0xf60e39[_0x52137b(0x93)]),_0x52cf19=_0x579368=>{const _0xa9ded6=_0x52137b;if(_0x48d7d7)_0x48d7d7[_0xa9ded6(0x16c)]=_0x579368;};if(_0x364102==_0x52137b(0x11f))_0x52cf19(_0x52137b(0x11f));else{if(_0x364102==_0x52137b(0x1d5)){_0x52cf19(_0x52137b(0x1d5));const _0x2313e8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2313e8,await getOpenOrders(),handleOpenOrders();}else{if(_0x364102==_0x52137b(0x171)){let _0x2193a8=![];if(lastOrders)for(const _0x38a5b0 of lastOrders){const _0x424117=0xc8,_0x453e83=0x1388;let _0x1bce28=0x0;while(!_0x38a5b0[_0x52137b(0xb9)]&&_0x1bce28*_0x424117<_0x453e83){_0x1bce28++,await sleep(_0x424117);}if(_0x1bce28>0x0)logger[_0x52137b(0x122)](_0x52137b(0x22c)+_0x1bce28*_0x424117/0x3e8+_0x52137b(0x13a));if(_0x38a5b0[_0x52137b(0xb9)]==_0xf60e39['id']){logger[_0x52137b(0x122)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0xf60e39['id']),_0x2193a8=!![];if(_0x38a5b0['filled']==0x0){logger['debug'](_0x52137b(0x1e0)+_0xf60e39['id']);if(_0xf60e39[_0x52137b(0x168)])_0x38a5b0[_0x52137b(0x12f)]=_0xf60e39[_0x52137b(0x168)];else{if(_0xf60e39[_0x52137b(0x12f)])_0x38a5b0[_0x52137b(0x12f)]=_0xf60e39[_0x52137b(0x12f)];else{}}_0x38a5b0[_0x52137b(0xef)]=_0xf60e39['filled'],updateHighestFee(_0x38a5b0),_0x52cf19('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x55a24c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x55a24c;}_0x38a5b0[_0x52137b(0x134)]={'currency':_0xf60e39[_0x52137b(0x134)]?_0xf60e39['fee'][_0x52137b(0x129)]:null,'cost':_0xf60e39[_0x52137b(0x134)]?_0xf60e39[_0x52137b(0x134)][_0x52137b(0x225)]:0x0},await updateCoinResults(_0x38a5b0);}}}if(!_0x2193a8){logger['debug'](_0x52137b(0x90)+_0xf60e39['id']),_0x52cf19(_0x52137b(0xef));const _0x4700e8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4700e8,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4f4c0a=JSON[_0x52137b(0x1ec)](lastBalances[_0x52137b(0xad)]);const _0x424a73=_0x4f4c0a[_0x52137b(0x228)](_0x59265d=>_0x59265d[_0x52137b(0x93)]==_0xf60e39[_0x52137b(0x93)]);if(_0x424a73){if(_0x364102==_0x52137b(0x11f))_0x424a73['orderstatus']=_0x424a73[_0x52137b(0x16c)]==_0x52137b(0xef)?_0x52137b(0xef):_0x52137b(0x11f);else{if(_0x364102==_0x52137b(0x1d5))_0x424a73[_0x52137b(0x16c)]=_0x424a73[_0x52137b(0x16c)]=='filled'?_0x52137b(0xef):_0x52137b(0x1d5);else _0x364102==_0x52137b(0x171)&&(_0x424a73['orderstatus']=_0x52137b(0xef));}}lastBalances={...lastBalances,'portfolio':JSON[_0x52137b(0xd8)](_0x4f4c0a)},proxyEmit(_0x52137b(0x184),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3c47a1=_0x5c012c;await getOpenOrders();let _0x55316a=![];currentCoins[_0x3c47a1(0x169)](_0x2fa254=>{const _0x3e1f35=_0x3c47a1;_0x55316a=allOpenOrders[_0x3e1f35(0x228)](_0x542bfc=>_0x542bfc[_0x3e1f35(0x93)]==_0x2fa254[_0x3e1f35(0x93)]),_0x2fa254[_0x3e1f35(0x16c)]=_0x55316a?_0x3e1f35(0x11f):'none';});}async function getCoins(_0x280e28=0x0,_0x2d514b=!![],_0x48675e=config[_0x5c012c(0xdf)]){const _0x1365bd=_0x5c012c;let _0x22fcff,_0x3b2932=[],_0x286c1c=[],_0x239950=[];if(_0x280e28)await sleep(_0x280e28);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x22fcff=await exchange[_0x1365bd(0x21c)](),mybalances=_0x22fcff[_0x1365bd(0x153)];for(const [_0x15671e,_0x11eb8c]of Object[_0x1365bd(0x1a9)](mybalances)){_0x239950['push'](_0x15671e);}config[_0x1365bd(0xad)][_0x1365bd(0x169)](_0x4fb1ef=>{const _0x2e3c63=_0x1365bd;!_0x239950[_0x2e3c63(0x8d)](_0x4fb1ef['coin'])&&(mybalances[_0x4fb1ef[_0x2e3c63(0x1f8)]]=0x0);});if(_0x48675e=='')for(const [_0x3df6c3,_0x510ae2]of Object[_0x1365bd(0x1a9)](mybalances)){_0x510ae2!=0x0&&_0x3b2932[_0x1365bd(0x1f7)]({'coin':_0x3df6c3});}else{let _0x111d6d=![];for(const [_0x462e80,_0x3a43c8]of Object[_0x1365bd(0x1a9)](mybalances)){const _0x28b3fa=config[_0x1365bd(0xad)]['find'](_0xc4412e=>_0xc4412e[_0x1365bd(0x1f8)]==_0x462e80),_0x5ad56a=_0x462e80+'/'+_0x48675e,_0x497746=_0x48675e+'/'+_0x462e80,_0xaeaf06=currentCoins['find'](_0x15e63a=>_0x15e63a[_0x1365bd(0x1f8)]==_0x462e80);_0x111d6d=![];if((_0x3a43c8!=0x0||_0x28b3fa)&&(allSymbols[_0x1365bd(0x8d)](_0x5ad56a)||_0x462e80==_0x48675e))_0x3b2932['push']({'coin':_0x462e80,'symbol':_0x5ad56a,'reverse':![],'number':Math[_0x1365bd(0x166)](_0x3a43c8+(_0x28b3fa&&_0x28b3fa[_0x1365bd(0x1e9)]||0x0),0x0),'orderstatus':_0xaeaf06?_0xaeaf06['orderstatus']:_0x1365bd(0xec)});else{if((_0x3a43c8!=0x0||_0x28b3fa)&&allSymbols[_0x1365bd(0x8d)](_0x497746))_0x3b2932[_0x1365bd(0x1f7)]({'coin':_0x462e80,'symbol':_0x497746,'reverse':!![],'number':Math[_0x1365bd(0x166)](_0x3a43c8+(_0x28b3fa&&_0x28b3fa[_0x1365bd(0x1e9)]||0x0),0x0),'orderstatus':_0xaeaf06?_0xaeaf06['orderstatus']:'none'});else _0x28b3fa&&_0x3b2932[_0x1365bd(0x1f7)]({'coin':_0x28b3fa['coin'],'symbol':_0x28b3fa['symbol'],'reverse':_0x28b3fa[_0x1365bd(0xc7)],'number':0x0,'orderstatus':_0x1365bd(0xec)});}}}}catch(_0x2e1b0b){if(!_0x2d514b)handleErrorNoStop(_0x2e1b0b,_0x1365bd(0x172));else await handleError(_0x2e1b0b,_0x1365bd(0x172));}return _0x286c1c=cloneDeep(_0x3b2932),_0x3b2932=_0x3b2932[_0x1365bd(0x102)](_0x4c2d01=>{const _0x1a1524=_0x1365bd,_0xcaa4b7=config[_0x1a1524(0xad)][_0x1a1524(0x228)](_0xcf4335=>_0xcf4335[_0x1a1524(0x1f8)]==_0x4c2d01[_0x1a1524(0x1f8)]);return _0xcaa4b7&&!_0xcaa4b7[_0x1a1524(0x22a)];}),[_0x3b2932,_0x286c1c];}async function getCoinNumber(_0x2d0d7f){const _0x446c8e=_0x5c012c;let _0x4012dc;try{const _0x465094=await exchange[_0x446c8e(0x21c)]();_0x4012dc=_0x465094[_0x446c8e(0x153)][_0x2d0d7f];}catch(_0x45b1d9){await handleError(_0x45b1d9,_0x446c8e(0x139));}return _0x4012dc;}async function getOpenOrders(){const _0x244ef5=_0x5c012c;let _0x5a25ac;allOpenOrders=[];try{for(const _0x24a28d of config[_0x244ef5(0xad)]){!_0x24a28d[_0x244ef5(0x22a)]&&_0x24a28d[_0x244ef5(0x1f8)]!=config[_0x244ef5(0xdf)]&&(_0x5a25ac=await exchange['fetchOpenOrders'](_0x24a28d[_0x244ef5(0x93)]),_0x5a25ac[_0x244ef5(0x19d)]>0x0&&allOpenOrders[_0x244ef5(0x1f7)](_0x5a25ac[0x0]));}}catch(_0x5c90e2){await handleError(_0x5c90e2,'getOpenOrders()');}}async function handleOpenOrders(_0x115fac=0x0){const _0x234939=_0x5c012c;allOpenOrders[_0x234939(0x19d)]==0x0&&lockOrders==ORDERS[_0x234939(0xaf)]&&allOrdersPlaced&&(_0x115fac==0x0?(logger[_0x234939(0x122)](_0x234939(0x193)),_0x115fac++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x234939(0x122)](_0x234939(0x1ef)),validateOrders(_0x234939(0x1cb))));}async function testAPI(_0x3db770){const _0x1de13c=_0x5c012c,_0x5d0895=ccxt['pro'][_0x3db770['exchange'][_0x1de13c(0x1dd)]()],_0x11e7ce=new _0x5d0895({'apiKey':_0x3db770[_0x1de13c(0x1c9)],'secret':_0x3db770['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3db770['apiPassword'])_0x11e7ce[_0x1de13c(0xc6)]=_0x3db770['apiPassword'];try{await _0x11e7ce[_0x1de13c(0x20f)]();}catch(_0x280034){throw _0x280034;}}function cloneDeep(_0xfea89d){const _0x21dd9a=_0x5c012c;return JSON[_0x21dd9a(0x1ec)](JSON[_0x21dd9a(0xd8)](_0xfea89d));}async function getPortfolio(_0x55049e){const _0x8c2753=_0x5c012c;let _0x70240d=[],_0x46eea4=[],_0x3e9168=[],_0x1fffec;if(_0x55049e['apiKey']!==_0x8c2753(0xf7)||_0x55049e[_0x8c2753(0x178)]!=='************'||_0x55049e[_0x8c2753(0x1a0)]&&_0x55049e[_0x8c2753(0x1a0)]!==_0x8c2753(0xf7)){if(config[_0x8c2753(0xa1)]){if(_0x55049e[_0x8c2753(0x1c9)]=='************')_0x55049e[_0x8c2753(0x1c9)]=config[_0x8c2753(0x1c9)];if(_0x55049e[_0x8c2753(0x178)]=='************')_0x55049e[_0x8c2753(0x178)]=config[_0x8c2753(0x178)];if(_0x55049e['apiPassword']==_0x8c2753(0xf7))_0x55049e['apiPassword']=config[_0x8c2753(0x1a0)];try{await testAPI(_0x55049e);}catch(_0x581b71){if(_0x581b71[_0x8c2753(0x99)]()['includes'](_0x8c2753(0x1fc))){logger[_0x8c2753(0x122)](_0x8c2753(0x205)),proxyEmit(_0x8c2753(0xad),![]);return;}else{handleError(_0x581b71,'getPortfolio(0)');return;}}}await initExchange(_0x55049e[_0x8c2753(0xa1)],_0x55049e['apiKey'],_0x55049e[_0x8c2753(0x178)],_0x55049e['apiPassword']);try{await loadSymbols();}catch(_0x3a7879){if(_0x3a7879[_0x8c2753(0x99)]()[_0x8c2753(0x8d)]('AuthenticationError')){proxyEmit(_0x8c2753(0xad),![]);return;}else{handleError(_0x3a7879,_0x8c2753(0xf8));return;}}const _0x5fdacb=await getCoins(0x0,![],_0x55049e[_0x8c2753(0xdf)]);_0x3e9168=cloneDeep(_0x5fdacb[0x1]);}else{const _0x5286a6=await getCoins();_0x3e9168=cloneDeep(_0x5286a6[0x1]);}if(_0x55049e[_0x8c2753(0xdf)]=='')proxyEmit(_0x8c2753(0xad),_0x3e9168);else{_0x3e9168['forEach'](_0x1af125=>{const _0x45bf0b=_0x8c2753;if(_0x1af125['coin']!=_0x55049e[_0x45bf0b(0xdf)]&&allSymbols[_0x45bf0b(0x8d)](_0x1af125['symbol']))_0x70240d[_0x45bf0b(0x1f7)](_0x1af125[_0x45bf0b(0x93)]);});if(_0x70240d[_0x8c2753(0x19d)]==0x0)logHistory(_0x8c2753(0x189),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x46eea4=await getTickers(_0x70240d);}catch(_0x21cd92){if(_0x21cd92['toString']()[_0x8c2753(0x8d)]('AuthenticationError')){proxyEmit(_0x8c2753(0xad),![]);return;}else handleError(_0x21cd92,_0x8c2753(0x156));}_0x3e9168['forEach'](_0x3922b1=>{const _0x9be08=_0x8c2753;_0x3922b1[_0x9be08(0x1f8)]!=_0x55049e['basecoin']?_0x46eea4[_0x3922b1[_0x9be08(0x93)]]?_0x1fffec=_0x3922b1[_0x9be08(0xc7)]?0x1/_0x46eea4[_0x3922b1[_0x9be08(0x93)]][_0x9be08(0x8f)]:_0x46eea4[_0x3922b1['symbol']][_0x9be08(0x8f)]:_0x1fffec=0x0:_0x1fffec=0x1,_0x3922b1[_0x9be08(0x12f)]=formatResult(_0x1fffec,0x8);}),proxyEmit(_0x8c2753(0xad),_0x3e9168);}}}function truncateTradeAmount(_0x1182da,_0x2cb473){const _0x3b1b4f=_0x5c012c;let _0x5ab844=0x0;try{_0x5ab844=exchange[_0x3b1b4f(0xaa)](_0x1182da,_0x2cb473);}catch(_0x2bea70){}return _0x5ab844;}function checkMinimums(_0xfda4a3){const _0x1a7236=_0x5c012c;let _0x1372ce=!![];const _0x4e5bb4=!_0xfda4a3['reverse']?markets[_0xfda4a3[_0x1a7236(0x93)]][_0x1a7236(0x141)][_0x1a7236(0x1ae)][_0x1a7236(0xda)]:markets[_0xfda4a3[_0x1a7236(0x93)]][_0x1a7236(0x141)][_0x1a7236(0x225)][_0x1a7236(0xda)],_0x1d389f=!_0xfda4a3[_0x1a7236(0xc7)]?markets[_0xfda4a3['symbol']]['limits']['cost'][_0x1a7236(0xda)]:markets[_0xfda4a3[_0x1a7236(0x93)]][_0x1a7236(0x141)][_0x1a7236(0x1ae)][_0x1a7236(0xda)],_0x33ceb7=truncateTradeAmount(_0xfda4a3[_0x1a7236(0x93)],_0xfda4a3[_0x1a7236(0x210)]);_0xfda4a3['trade']=_0x33ceb7;if(Math[_0x1a7236(0x221)](_0x33ceb7)<_0x4e5bb4)_0x1372ce=![];if(Math[_0x1a7236(0x221)](_0x33ceb7)*_0xfda4a3[_0x1a7236(0x8f)]<_0x1d389f)_0x1372ce=![];if(_0xfda4a3['side']=='sell'){let _0x22c1e6=config[_0x1a7236(0xad)][_0x1a7236(0x228)](_0x260c62=>_0x260c62[_0x1a7236(0x1f8)]==_0xfda4a3[_0x1a7236(0x1f8)]);if(_0x22c1e6[_0x1a7236(0x1e9)]>0x0){if(Math[_0x1a7236(0x221)](_0x33ceb7)>_0xfda4a3[_0x1a7236(0x18a)]-_0x22c1e6[_0x1a7236(0x1e9)])_0x1372ce=![];}else{if(Math[_0x1a7236(0x221)](_0x33ceb7)>_0xfda4a3[_0x1a7236(0x18a)])_0x1372ce=![];}}if(_0xfda4a3[_0x1a7236(0xba)]=='buy'){let _0x58a78b=config['portfolio'][_0x1a7236(0x228)](_0x578a8b=>_0x578a8b[_0x1a7236(0x1f8)]==config[_0x1a7236(0xdf)]),_0x21aec6=currentCoins['find'](_0x5cb845=>_0x5cb845[_0x1a7236(0x1f8)]==config[_0x1a7236(0xdf)]);if(_0x58a78b[_0x1a7236(0x1e9)]>0x0){if(Math[_0x1a7236(0x221)](_0x33ceb7)*_0xfda4a3['last']>_0x21aec6['number']-_0x58a78b[_0x1a7236(0x1e9)])_0x1372ce=![];}else{if(Math['abs'](_0x33ceb7)*_0xfda4a3[_0x1a7236(0x8f)]>_0x21aec6[_0x1a7236(0x18a)])_0x1372ce=![];}}return _0x1372ce;}async function getBalances(_0x361649=!![]){const _0x23cd2b=_0x5c012c;let _0x1adbda=0x0,_0x3b7ca4;const _0x3096b2=config[_0x23cd2b(0x222)];if(config['headless']&&config[_0x23cd2b(0x22b)]<0x0)await validate24hChanges();currentCoins[_0x23cd2b(0x169)](_0x2e0c78=>{const _0x3978c7=_0x23cd2b;if(_0x2e0c78[_0x3978c7(0x1f8)]!=config[_0x3978c7(0xdf)]){let _0x370ba5=global[_0x3978c7(0x1f5)][noslash(_0x2e0c78[_0x3978c7(0x93)])];_0x3b7ca4=_0x2e0c78[_0x3978c7(0xc7)]?0x1/_0x370ba5:_0x370ba5;}else _0x3b7ca4=0x1;let _0x26fc38=_0x2e0c78[_0x3978c7(0x18a)]*_0x3b7ca4;_0x1adbda+=_0x26fc38,_0x2e0c78[_0x3978c7(0x8f)]=formatResult(Number(_0x3b7ca4),0x8),_0x2e0c78[_0x3978c7(0x16a)]=_0x26fc38;}),currentCoins['forEach'](_0x212a94=>{const _0x5aa90e=_0x23cd2b;let _0x3d744f=config[_0x5aa90e(0xad)][_0x5aa90e(0x228)](_0x2b72b3=>_0x2b72b3['coin']==_0x212a94[_0x5aa90e(0x1f8)]),_0x3c25a3=Number(_0x3d744f[_0x5aa90e(0x1db)]),_0x4bb013=_0x212a94[_0x5aa90e(0x16a)]/_0x1adbda*0x64,_0x1d284a=_0x3c25a3*_0x1adbda/0x64/_0x212a94['last']-_0x212a94[_0x5aa90e(0x18a)];_0x212a94[_0x5aa90e(0x1db)]=formatResult(_0x4bb013,0x3),_0x212a94[_0x5aa90e(0xe8)]=formatResult(_0x3c25a3,0x3),_0x212a94[_0x5aa90e(0x210)]=formatResult(_0x1d284a,0x8),_0x212a94['side']='',_0x212a94['valid']=![];if(_0x212a94[_0x5aa90e(0x1f8)]!=config[_0x5aa90e(0xdf)]){if(_0x212a94[_0x5aa90e(0x1db)]>_0x3c25a3)_0x212a94['side']=_0x5aa90e(0xcf),_0x212a94[_0x5aa90e(0xc9)]=checkMinimums(_0x212a94);else _0x212a94['distribution']<_0x3c25a3&&(_0x212a94['side']=_0x5aa90e(0x21a),_0x212a94[_0x5aa90e(0xc9)]=checkMinimums(_0x212a94));}_0x212a94[_0x5aa90e(0xb8)]=_0x212a94[_0x5aa90e(0x1db)]/_0x212a94['target']-0x1;if(_0x212a94[_0x5aa90e(0x16c)]=='filled'||_0x212a94[_0x5aa90e(0x16c)]==_0x5aa90e(0x1d5))_0x212a94[_0x5aa90e(0x16c)]='none';}),currentCoins[_0x23cd2b(0x163)]((_0x1d7aab,_0x2238e5)=>_0x1d7aab[_0x23cd2b(0xb8)]<_0x2238e5[_0x23cd2b(0xb8)]?0x1:_0x2238e5[_0x23cd2b(0xb8)]<_0x1d7aab[_0x23cd2b(0xb8)]?-0x1:0x0);const _0xe54765=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xe54765[_0x23cd2b(0x104)],'usd':_0xe54765[_0x23cd2b(0x123)],'portfolio':JSON[_0x23cd2b(0xd8)](currentCoins),'threshold':_0x3096b2},proxyEmit(_0x23cd2b(0x184),{'serverversion':serverversion,'balances':lastBalances});if(_0x361649){if(config[_0x23cd2b(0x9b)])headlessMode({'portfolio':currentCoins,'threshold':_0x3096b2});else{if(lockOrders==ORDERS[_0x23cd2b(0x1b7)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3096b2});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x18c222=getNormalizedPerformance();getStartingBalances(_0x18c222),emitPerformance(_0x18c222);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x20dcc3=getNormalizedPerformance();emitPerformance(_0x20dcc3),getStartingBalances(_0x20dcc3),logger[_0x23cd2b(0x122)](_0x23cd2b(0x12a));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x23d0ab=_0x5c012c;if(!lastBalances)return;let _0x15a1e1=[],_0x5f42fd,_0x24cab4=JSON['parse'](lastBalances[_0x23d0ab(0xad)]);_0x24cab4[_0x23d0ab(0x163)]((_0x2354e2,_0xe3d2de)=>_0x2354e2[_0x23d0ab(0x1f8)]>_0xe3d2de[_0x23d0ab(0x1f8)]?0x1:_0xe3d2de[_0x23d0ab(0x1f8)]>_0x2354e2[_0x23d0ab(0x1f8)]?-0x1:0x0),_0x24cab4[_0x23d0ab(0x169)](_0xd510da=>{const _0x260e96=_0x23d0ab;let _0x1266cc={'coin':_0xd510da['coin'],'number':_0xd510da[_0x260e96(0x18a)],'price':_0xd510da['last']};_0x15a1e1[_0x260e96(0x1f7)](_0x1266cc);});const _0x163271=await getFiat();_0x5f42fd={'date':lastBalances[_0x23d0ab(0x1a5)][_0x23d0ab(0xe6)]('\x20')[0x0],'eur':_0x163271[_0x23d0ab(0x104)],'usd':_0x163271['usd'],'coins':_0x15a1e1};let _0x4de5d3=dbPerformance[_0x23d0ab(0xb2)]('data')['find']({'date':_0x5f42fd['date']})[_0x23d0ab(0x16a)]();_0x4de5d3?_0x5f42fd['date']!=config[_0x23d0ab(0x218)]&&dbPerformance['get'](_0x23d0ab(0x112))['find']({'date':_0x5f42fd['date']})['assign'](_0x5f42fd)[_0x23d0ab(0x118)]():dbPerformance[_0x23d0ab(0xb2)](_0x23d0ab(0x112))[_0x23d0ab(0x1f7)](_0x5f42fd)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x230eec=_0x5c012c;let _0x54fef0=[];if(dbPerformance['has'](_0x230eec(0x112))['value']()){let _0x482674=dbPerformance[_0x230eec(0xb2)](_0x230eec(0x112))[_0x230eec(0x17d)]()[_0x230eec(0x102)](_0x32b472=>{if(_0x32b472['coins']['length']==0x0)return![];else return!![];})[_0x230eec(0x199)](_0x230eec(0x12b))['value'](),_0x46a0f6=[...config[_0x230eec(0x19f)]];_0x46a0f6[_0x230eec(0x163)]((_0xb3e792,_0x387a60)=>_0xb3e792[_0x230eec(0x12b)]>_0x387a60[_0x230eec(0x12b)]?-0x1:_0x387a60[_0x230eec(0x12b)]>_0xb3e792[_0x230eec(0x12b)]?0x1:0x0);let _0x2e0661=0x1,_0x3e6f10=[],_0x51918f=0x0;_0x482674[_0x230eec(0x113)]()['reverse']()['forEach']((_0x59dd09,_0x4c02e3)=>{const _0x2b7b95=_0x230eec;if(_0x46a0f6[_0x51918f]){if(_0x482674[_0x482674[_0x2b7b95(0x19d)]-_0x4c02e3]&&_0x46a0f6[_0x51918f][_0x2b7b95(0x12b)]==_0x482674[_0x482674['length']-_0x4c02e3][_0x2b7b95(0x12b)]){if(_0x4c02e3<_0x482674[_0x2b7b95(0x19d)]){let _0x379732=0x0,_0x2e1a79=0x0;_0x482674[_0x482674[_0x2b7b95(0x19d)]-_0x4c02e3][_0x2b7b95(0x219)][_0x2b7b95(0x169)](_0x22f7d1=>{const _0x22be7c=_0x2b7b95;_0x2e1a79+=_0x22f7d1['number']*_0x22f7d1[_0x22be7c(0x12f)];}),_0x46a0f6[_0x51918f]['changes'][_0x2b7b95(0x169)](_0x516321=>{const _0x21d248=_0x2b7b95;_0x379732+=_0x516321[_0x21d248(0x18a)]*_0x516321['price'];}),_0x2e0661*=_0x379732/(_0x2e1a79-_0x379732)+0x1;}_0x51918f++;}}let _0x2796b5=0x0;_0x59dd09['coins'][_0x2b7b95(0x169)](_0x1875d0=>{const _0x2d593b=_0x2b7b95;_0x2796b5+=_0x1875d0['number']*_0x1875d0[_0x2d593b(0x12f)];}),_0x3e6f10[_0x482674[_0x2b7b95(0x19d)]-_0x4c02e3-0x1]=_0x2796b5*(_0x2e0661-0x1);});let _0x3f9b0e=[];_0x46a0f6=[...config[_0x230eec(0x19f)]]||[];let _0x764605=0x0;_0x51918f=0x0,_0x482674['forEach']((_0x589927,_0x4c34c1)=>{const _0x4c8e9a=_0x230eec;if(_0x46a0f6[_0x51918f]){const _0x395a16=fns[_0x4c8e9a(0x1ec)](_0x46a0f6[_0x51918f]['date'],_0x4c8e9a(0x103),new Date()),_0x55c9d1=fns[_0x4c8e9a(0x1ec)](_0x589927[_0x4c8e9a(0x12b)],_0x4c8e9a(0x103),new Date());if(fns[_0x4c8e9a(0xd7)](_0x395a16,_0x55c9d1)){let _0x469884=0x0;_0x46a0f6[_0x51918f][_0x4c8e9a(0x1fd)][_0x4c8e9a(0x169)](_0x2b8a5d=>{const _0x1f1657=_0x4c8e9a;!_0x3f9b0e[_0x2b8a5d['coin']]?_0x3f9b0e[_0x2b8a5d[_0x1f1657(0x1f8)]]=_0x2b8a5d[_0x1f1657(0x18a)]:(_0x469884=_0x3f9b0e[_0x2b8a5d[_0x1f1657(0x1f8)]],_0x3f9b0e[_0x2b8a5d[_0x1f1657(0x1f8)]]+=_0x2b8a5d[_0x1f1657(0x18a)]);const _0x17d0a0=_0x589927['coins'][_0x1f1657(0x228)](_0x3f4453=>_0x3f4453['coin']==_0x2b8a5d[_0x1f1657(0x1f8)]);(!_0x17d0a0||_0x17d0a0[_0x1f1657(0x18a)]==0x0)&&(_0x764605+=(-_0x2b8a5d[_0x1f1657(0x18a)]-_0x469884)*_0x2b8a5d['price']);}),_0x51918f++;}}_0x589927[_0x4c8e9a(0x219)]['forEach']((_0x331cf7,_0xc17f02)=>{const _0x4b6c5b=_0x4c8e9a;_0x3f9b0e[_0x331cf7[_0x4b6c5b(0x1f8)]]&&(_0x331cf7[_0x4b6c5b(0x128)]=_0x3f9b0e[_0x331cf7[_0x4b6c5b(0x1f8)]]);}),_0x54fef0[_0x4c8e9a(0x1f7)]({'date':_0x589927['date'],'eur':_0x589927['eur'],'usd':_0x589927[_0x4c8e9a(0x123)],'offset':_0x3e6f10[_0x4c34c1],'netoffset':_0x764605,'coins':_0x589927[_0x4c8e9a(0x219)]});});}return _0x54fef0;}function emitPerformance(_0x2fa4fb){const _0x3d994e=_0x5c012c;_0x2fa4fb[_0x3d994e(0x19d)]!==0x0?(proxyEmit(_0x3d994e(0x19c),_0x2fa4fb),lastPerformanceEmitted=getDate()):proxyEmit(_0x3d994e(0x19c),[]);}function getPerf(_0x3c75df,_0x2e7520){const _0x34f486=_0x5c012c;let _0x1be2e4=0x0,_0x2335b8=0x0,_0x3272b4=0x0;_0x3c75df[_0x34f486(0x219)][_0x34f486(0x169)](_0x235d4f=>{const _0x47acc9=_0x34f486;_0x1be2e4+=_0x235d4f[_0x47acc9(0x18a)]*_0x235d4f[_0x47acc9(0x12f)];});_0x2e7520&&(_0x1be2e4+=_0x3c75df['offset']);if(config[_0x34f486(0xdf)]===_0x34f486(0x158)||config[_0x34f486(0xdf)]===_0x34f486(0xcd)||config[_0x34f486(0xdf)]==='PAXG')_0x2335b8=_0x1be2e4*_0x3c75df[_0x34f486(0x104)],_0x3272b4=_0x1be2e4*_0x3c75df[_0x34f486(0x123)];else{if(usdBasecoins['includes'](config[_0x34f486(0xdf)]))_0x2335b8=_0x1be2e4*_0x3c75df[_0x34f486(0x104)]/_0x3c75df['usd'],_0x3272b4=_0x1be2e4;else config[_0x34f486(0xdf)]===_0x34f486(0x207)&&(_0x2335b8=_0x1be2e4,_0x3272b4=_0x1be2e4*_0x3c75df[_0x34f486(0x123)]/_0x3c75df['eur']);}return[_0x1be2e4,_0x2335b8,_0x3272b4];}function getKPIs(_0xbb352,_0x3a347e=_0x5c012c(0x207)){const _0x53dbe5=_0x5c012c,_0x22867e=config['basecoin'],_0x5d8b2a=lastBalances,_0x36b45e=currentCoins,_0x16d45b=getNormalizedPerformance(),_0x1eaede=_0xbb352===_0x53dbe5(0xdf)?_0x22867e:_0xbb352===_0x53dbe5(0x1b9)||_0xbb352===_0x53dbe5(0x161)?_0x3a347e:_0x53dbe5(0x194)+_0x22867e,_0x49b01c=_0xbb352==='net-basecoin'?_0x53dbe5(0x1c1):_0xbb352==='net-fiat'?_0x53dbe5(0x1c1):_0x1eaede+_0x53dbe5(0x1ea),_0xec2a5d=_0xbb352===_0x53dbe5(0x1ee)||_0xbb352===_0x53dbe5(0x161)?_0x53dbe5(0x1c1):_0x1eaede+_0x53dbe5(0xbc);let _0x3deb50=0x0;_0x36b45e[_0x53dbe5(0x169)](_0x8d53e8=>{const _0x1d70c6=_0x53dbe5;_0x3deb50+=_0x8d53e8[_0x1d70c6(0x18a)]*_0x8d53e8['last'];});if(_0xbb352===_0x53dbe5(0x1b9)||_0xbb352===_0x53dbe5(0x161)){if(_0x22867e==='BTC'||_0x22867e==='ETH'||_0x22867e===_0x53dbe5(0x9a))_0x3deb50=_0x3deb50*(_0x3a347e===_0x53dbe5(0x207)?_0x5d8b2a['eur']:_0x5d8b2a[_0x53dbe5(0x123)]);else{if(usdBasecoins[_0x53dbe5(0x8d)](_0x22867e))_0x3deb50=_0x3deb50*(_0x3a347e===_0x53dbe5(0x207)?_0x5d8b2a[_0x53dbe5(0x104)]/_0x5d8b2a[_0x53dbe5(0x123)]:0x1);else _0x22867e==='EUR'&&(_0x3deb50=_0x3deb50*(_0x3a347e===_0x53dbe5(0x207)?0x1:_0x5d8b2a[_0x53dbe5(0x123)]/_0x5d8b2a[_0x53dbe5(0x104)]));}}let _0x572b30;if(_0x3deb50!==0x0){if(_0xbb352==='basecoin')_0x572b30=(_0x3deb50/startingBalances[_0x53dbe5(0xdf)]-0x1)*0x64;else{if(_0x3a347e===_0x53dbe5(0x207))_0x572b30=(_0x3deb50/startingBalances['eur']-0x1)*0x64;else _0x572b30=(_0x3deb50/startingBalances[_0x53dbe5(0x123)]-0x1)*0x64;}let _0x4fa3ea=0x0;if(startingBalances[_0x53dbe5(0x219)])_0x36b45e[_0x53dbe5(0x169)](_0x5659b4=>{const _0x31b2e6=_0x53dbe5;let _0x3e6beb=startingBalances[_0x31b2e6(0x219)][_0x31b2e6(0x228)](_0x373e4e=>_0x373e4e[_0x31b2e6(0x1f8)]===_0x5659b4[_0x31b2e6(0x1f8)]);if(_0x3e6beb&&_0x3e6beb[_0x31b2e6(0x1f8)]&&_0x5659b4[_0x31b2e6(0x18a)]!==0x0)_0x4fa3ea+=_0x3e6beb[_0x31b2e6(0x18a)]*_0x5659b4[_0x31b2e6(0x8f)];});let _0x18b278=0x0;if(_0x16d45b[_0x53dbe5(0x19d)]!==0x0){let _0x25fc97=_0x16d45b[_0x16d45b[_0x53dbe5(0x19d)]-0x1];_0x18b278=_0x25fc97[_0x53dbe5(0x1c4)];}_0x4fa3ea-=_0x18b278;_0xbb352===_0x53dbe5(0x1ee)&&(_0x572b30=(_0x3deb50-_0x4fa3ea)/startingBalances[_0x53dbe5(0xdf)]*0x64,_0x3deb50=_0x3deb50-_0x4fa3ea);if(_0xbb352===_0x53dbe5(0x161)){let _0x4e9767=_0x3a347e===_0x53dbe5(0x207)?startingBalances[_0x53dbe5(0x104)]:startingBalances[_0x53dbe5(0x123)];if(_0x22867e==='BTC'||_0x22867e===_0x53dbe5(0xcd)||_0x22867e===_0x53dbe5(0x9a))_0x4fa3ea=_0x3a347e===_0x53dbe5(0x207)?_0x4fa3ea*_0x5d8b2a[_0x53dbe5(0x104)]:_0x4fa3ea*_0x5d8b2a[_0x53dbe5(0x123)];else{if(usdBasecoins[_0x53dbe5(0x8d)](_0x22867e))_0x4fa3ea=_0x3a347e==='EUR'?_0x4fa3ea*_0x5d8b2a[_0x53dbe5(0x104)]/_0x5d8b2a[_0x53dbe5(0x123)]:_0x4fa3ea;else _0x22867e==='EUR'&&(_0x4fa3ea=_0x3a347e===_0x53dbe5(0x207)?_0x4fa3ea:_0x4fa3ea*_0x5d8b2a[_0x53dbe5(0x123)]/_0x5d8b2a['eur']);}_0x572b30=(_0x3deb50-_0x4fa3ea)/_0x4e9767*0x64,_0x3deb50=_0x3deb50-_0x4fa3ea;}if(_0x572b30){if(_0x572b30<0x64)_0x572b30=_0x572b30[_0x53dbe5(0x150)](0x2);else{if(_0x572b30<0x3e8)_0x572b30=_0x572b30[_0x53dbe5(0x150)](0x1);else _0x572b30=_0x572b30[_0x53dbe5(0x150)](0x0);}}else _0x572b30=Number('0')[_0x53dbe5(0x150)](0x2);if(_0x3deb50){if(Math[_0x53dbe5(0x221)](_0x3deb50)<0.000001)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x2);else{if(Math[_0x53dbe5(0x221)](_0x3deb50)<0.1)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x6);else{if(Math[_0x53dbe5(0x221)](_0x3deb50)<0x1)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x5);else{if(Math[_0x53dbe5(0x221)](_0x3deb50)<0xa)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x4);else{if(Math[_0x53dbe5(0x221)](_0x3deb50)<0x64)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x3);else{if(Math['abs'](_0x3deb50)<0x3e8)_0x3deb50=_0x3deb50[_0x53dbe5(0x150)](0x2);else _0x3deb50=_0x3deb50['toFixed'](0x2);}}}}}}else _0x3deb50=Number('0')[_0x53dbe5(0x150)](0x2);}else _0x572b30=Number('0')['toFixed'](0x2);return{'value':_0x3deb50,'change':_0x572b30,'leftTxt':_0x49b01c,'rightTxt':_0xec2a5d};}async function getStartingBalances(_0x30a367,_0x287033=!![]){const _0xf7c9d9=_0x5c012c;if(_0x30a367[_0xf7c9d9(0x19d)]!==0x0){const [_0x2bcd05,_0xb4471d,_0x4752ad]=getPerf(_0x30a367[0x0],!![]);let _0x1506ba=[];config[_0xf7c9d9(0xad)][_0xf7c9d9(0x169)](_0x407153=>{const _0x11266e=_0xf7c9d9;let _0x4ad0a1=0x0,_0x379a30;config[_0x11266e(0x19f)][_0x11266e(0x169)](_0x1b1384=>{const _0x588ec3=_0x11266e;let _0xdcb3f8=_0x1b1384[_0x588ec3(0x1fd)][_0x588ec3(0x228)](_0x4630b3=>_0x4630b3[_0x588ec3(0x1f8)]==_0x407153['coin']);if(_0xdcb3f8){_0x4ad0a1+=_0xdcb3f8[_0x588ec3(0x18a)];if(!_0x379a30)_0x379a30=_0xdcb3f8[_0x588ec3(0x12f)];}}),_0x1506ba['push']({'coin':_0x407153['coin'],'number':_0x4ad0a1,'initialprice':_0x379a30});});const _0x16baa9={'basecoin':_0x2bcd05,'eur':_0xb4471d,'usd':_0x4752ad,'coins':_0x1506ba};if(_0x287033)proxyEmit(_0xf7c9d9(0x202),_0x16baa9);startingBalances=_0x16baa9;}}function headlessMode(_0x11bcf8){const _0x4142a0=_0x5c012c;let _0x22e004=_0x11bcf8[_0x4142a0(0xad)],_0x25166b=_0x11bcf8['threshold'],_0x3d3cd8=[];for(let _0x487e5a of _0x22e004){if(_0x487e5a['coin']!=config[_0x4142a0(0xdf)]){if(_0x487e5a[_0x4142a0(0xb8)]>=_0x25166b/0x64){if(_0x487e5a['valid'])_0x3d3cd8[_0x4142a0(0x1f7)](_0x487e5a);}else{if(_0x487e5a[_0x4142a0(0xb8)]<=-_0x25166b/0x64){if(_0x487e5a['valid'])_0x3d3cd8['push'](_0x487e5a);}}}}_0x3d3cd8[_0x4142a0(0x19d)]>0x0&&(lockOrders==ORDERS[_0x4142a0(0x1b7)]&&!coolingDown&&_0x3d3cd8['forEach'](_0x26abcf=>{const _0x30e086=_0x4142a0;logger['debug']('Trigger:\x20'+_0x26abcf[_0x30e086(0x1f8)]+'\x20'+_0x26abcf[_0x30e086(0x18a)]+'\x20'+_0x26abcf['last']+'\x20'+_0x26abcf[_0x30e086(0x1db)]+'%\x20'+_0x26abcf[_0x30e086(0xe8)]+'%\x20'+(0x64*_0x26abcf[_0x30e086(0xb8)])[_0x30e086(0x150)](0x2)+_0x30e086(0xc8)+_0x25166b[_0x30e086(0x150)](0x2)+'%)');}),placeOrder(_0x3d3cd8));}function notifyBalance(_0x459484){const _0x306bab=_0x5c012c;let _0xf3da30=_0x459484['portfolio'],_0x54b17b=_0x459484[_0x306bab(0x222)],_0x4a625d=[];for(let _0x2ead6b of _0xf3da30){if(_0x2ead6b['coin']!=config[_0x306bab(0xdf)]){if(_0x2ead6b[_0x306bab(0xb8)]>=_0x54b17b/0x64){if(_0x2ead6b[_0x306bab(0xc9)])_0x4a625d[_0x306bab(0x1f7)](_0x2ead6b);}else{if(_0x2ead6b[_0x306bab(0xb8)]<=-_0x54b17b/0x64){if(_0x2ead6b['valid'])_0x4a625d[_0x306bab(0x1f7)](_0x2ead6b);}}}}if(_0x4a625d['length']>0x0){let _0x464fc0=_0x4a625d['map'](_0x3ae7de=>_0x3ae7de[_0x306bab(0x1f8)]);_0x464fc0[_0x306bab(0x163)]();let _0x4efbaf=_0x464fc0['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x306bab(0x115),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x4efbaf;}}function symbolToCoin(_0x1d55df){const _0x167afb=_0x5c012c;let _0x2a0da;if(_0x1d55df['includes']('/'+config[_0x167afb(0xdf)]))_0x2a0da=_0x1d55df[_0x167afb(0x162)]('/'+config[_0x167afb(0xdf)],'');if(_0x1d55df[_0x167afb(0x8d)](config[_0x167afb(0xdf)]+'/'))_0x2a0da=_0x1d55df[_0x167afb(0x162)](config[_0x167afb(0xdf)]+'/','');return _0x2a0da;}async function unlockOrders(){const _0xc8feaf=_0x5c012c;if(allOrdersPlaced&&lockOrders==ORDERS[_0xc8feaf(0xaf)]){logger[_0xc8feaf(0x122)](_0xc8feaf(0x174)),lockOrders=ORDERS[_0xc8feaf(0x91)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4563ce=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4563ce,validateOrdersState=_0xc8feaf(0x128),persistOpenOrders([]),lockOrders=ORDERS[_0xc8feaf(0x1b7)],logger['debug'](_0xc8feaf(0x97));}}async function validateOrders(_0x37341a){const _0x107394=_0x5c012c;if(_0x37341a)validateOrdersState=_0x37341a;logger[_0x107394(0x122)](_0x107394(0xa4)+validateOrdersState+_0x107394(0x8b)+(lockOrders==0x1?_0x107394(0x149):lockOrders==0x2?_0x107394(0x15d):_0x107394(0x135)));let _0x580208=[],_0x16fb32=config['ordertype']==_0x107394(0x1eb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x107394(0x13e)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x107394(0xaf)])return;logger[_0x107394(0x122)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x107394(0x169)](_0x1c41e7=>{const _0x25aa1d=_0x107394;let _0x152a77=![];_0x1c41e7['filled']>0x0&&(_0x152a77=!![]),_0x580208[_0x25aa1d(0x1f7)](_0x152a77),_0x152a77&&config[_0x25aa1d(0x1b0)]!=_0x25aa1d(0x1eb)&&logHistory(_0x25aa1d(0x144),'Order\x20filled:\x20'+_0x1c41e7['symbol']+'\x20'+_0x1c41e7[_0x25aa1d(0xba)]+'\x20#'+formatResult(_0x1c41e7[_0x25aa1d(0xef)],0x8)+'\x20@'+formatResult(_0x1c41e7[_0x25aa1d(0x12f)],0x8));}),_0x580208[_0x107394(0x169)]((_0x3a3554,_0x341b91)=>{const _0x1c0183=_0x107394;if(_0x3a3554)lastOrders[_0x1c0183(0xf3)](_0x341b91,0x1);}),persistOpenOrders(lastOrders);const _0x4b9269=coolingDown?_0x107394(0x1e5):_0x107394(0x226);if(validateOrdersState==_0x107394(0x128)){validateOrdersState='ongoing';if(_0x580208[_0x107394(0x8d)](![])){if(config['ordertype']==_0x107394(0x1eb)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x580208['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x107394(0x1b0)]==_0x107394(0x1eb)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x107394(0xd6))_0x580208[_0x107394(0x8d)](![])&&(config[_0x107394(0x1b0)]==_0x107394(0x1eb)?logHistory('success',_0x107394(0x212)+Math[_0x107394(0x22d)](_0x16fb32*validateOrderInterval/0xea60)+_0x107394(0x14b)+_0x4b9269):(await cancelOrders(),logHistory(_0x107394(0x173),_0x107394(0xee)+Math[_0x107394(0x22d)](_0x16fb32*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4b9269))),await unlockOrders();else{if(validateOrdersState==_0x107394(0x1cb)){if(config[_0x107394(0x1b0)]!='market')logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x4b9269);await unlockOrders();}}}}}async function cancelOrders(){const _0x533501=_0x5c012c;lastOrders[_0x533501(0x169)](async _0x2e1427=>{const _0x5c0795=_0x533501;try{const _0x1528eb=await exchange['cancelOrder'](_0x2e1427['orderId'],_0x2e1427[_0x5c0795(0x93)]);}catch(_0x181784){if(_0x181784[_0x5c0795(0x99)]()[_0x5c0795(0x8d)](_0x5c0795(0x1ca))){}else await handleError(_0x181784,_0x5c0795(0x20c));}});}async function initCoinResults(_0x4e44f1){const _0x19194d=_0x5c012c;_0x4e44f1?logger[_0x19194d(0x122)](_0x19194d(0x88)+_0x4e44f1):logger['debug'](_0x19194d(0x15e)),config[_0x19194d(0xad)][_0x19194d(0x169)](_0x25ff35=>{const _0x5b5b96=_0x19194d;if(!_0x25ff35[_0x5b5b96(0x22a)]&&_0x25ff35['coin']!=config[_0x5b5b96(0xdf)]){const _0x2a66e3=currentCoins[_0x5b5b96(0x228)](_0x212d7f=>_0x212d7f[_0x5b5b96(0x1f8)]==_0x25ff35[_0x5b5b96(0x1f8)]),_0x23aec6=global[_0x5b5b96(0x1f5)][noslash(_0x25ff35[_0x5b5b96(0x93)])];let _0x3dd879=_0x2a66e3?_0x2a66e3[_0x5b5b96(0x18a)]:null,_0x3035ef=_0x25ff35['reverse']?0x1/_0x23aec6:_0x23aec6,_0x4a9b9e;config['liquidity']['forEach'](_0x253080=>{const _0x31bb2b=_0x5b5b96;!_0x4a9b9e&&(_0x4a9b9e=_0x253080['changes'][_0x31bb2b(0x228)](_0x3e87b3=>_0x3e87b3[_0x31bb2b(0x1f8)]==_0x25ff35['coin']),_0x4a9b9e&&(_0x3dd879=_0x4a9b9e[_0x31bb2b(0x18a)],_0x3035ef=_0x4a9b9e['price']));});let _0x554b=dbCoinResults['get'](_0x5b5b96(0x219))['find']({'coin':_0x25ff35[_0x5b5b96(0x1f8)]})[_0x5b5b96(0x16a)]();if(!_0x554b){const _0x1f227e={'coin':_0x25ff35['coin'],'number':_0x3dd879,'breakeven':_0x3035ef,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b5b96(0xb2)](_0x5b5b96(0x219))[_0x5b5b96(0x1f7)](_0x1f227e)[_0x5b5b96(0x118)]();}else{if(_0x4e44f1&&_0x25ff35[_0x5b5b96(0x1f8)]==_0x4e44f1){const _0x2359c5={'coin':_0x25ff35[_0x5b5b96(0x1f8)],'number':_0x3dd879,'breakeven':_0x3035ef,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x5b5b96(0x228)]({'coin':_0x25ff35[_0x5b5b96(0x1f8)]})[_0x5b5b96(0xf2)](_0x2359c5)[_0x5b5b96(0x118)]();}}}});}async function updateCoinResults(_0x42ce4e,_0x8c77cc=![]){const _0x2f92ab=_0x5c012c;let _0x4d536b,_0xcde787,_0x49af3d,_0x9d4ca1,_0xe9efd2,_0x4157ff,_0x5abd45=dbCoinResults[_0x2f92ab(0xb2)]('coins')[_0x2f92ab(0x228)]({'coin':_0x42ce4e[_0x2f92ab(0x1f8)]})[_0x2f92ab(0x16a)](),_0x309b07=![];_0x5abd45&&Object[_0x2f92ab(0x1a9)](_0x5abd45)[_0x2f92ab(0x169)](([_0x25e4b5,_0x4d005a])=>{if(_0x4d005a==null)_0x309b07=!![];});(!_0x5abd45||_0x309b07)&&(await initCoinResults(_0x42ce4e[_0x2f92ab(0x1f8)]),_0x5abd45=dbCoinResults[_0x2f92ab(0xb2)](_0x2f92ab(0x219))[_0x2f92ab(0x228)]({'coin':_0x42ce4e['coin']})[_0x2f92ab(0x16a)]());_0x42ce4e[_0x2f92ab(0xc7)]&&(_0x4157ff={'filled':_0x42ce4e[_0x2f92ab(0xef)]*_0x42ce4e['price'],'amount':_0x42ce4e[_0x2f92ab(0xef)]*_0x42ce4e['price'],'side':_0x42ce4e[_0x2f92ab(0xba)]=='sell'?_0x2f92ab(0x21a):_0x2f92ab(0xcf),'price':0x1/_0x42ce4e['price']},_0x42ce4e={..._0x42ce4e,..._0x4157ff});_0x8c77cc?_0xcde787=_0x42ce4e[_0x2f92ab(0xba)]==_0x2f92ab(0x21a)?_0x5abd45[_0x2f92ab(0x18a)]+_0x42ce4e['filled']:_0x5abd45[_0x2f92ab(0x18a)]-_0x42ce4e[_0x2f92ab(0xef)]:_0xcde787=await getCoinNumber(_0x42ce4e[_0x2f92ab(0x1f8)]);if(_0x42ce4e[_0x2f92ab(0x134)]&&_0x42ce4e[_0x2f92ab(0x134)]['currency']==config[_0x2f92ab(0xdf)])_0x4d536b=_0x42ce4e[_0x2f92ab(0x134)]['cost'];else{if(_0x42ce4e['fee']&&_0x42ce4e[_0x2f92ab(0x134)][_0x2f92ab(0x129)]==_0x2f92ab(0x1ba)&&!_0x8c77cc&&config[_0x2f92ab(0xdf)]!=_0x2f92ab(0x9a))_0x4d536b=_0x42ce4e[_0x2f92ab(0x134)][_0x2f92ab(0x225)]*global[_0x2f92ab(0x1f5)][_0x2f92ab(0x1ba)+config['basecoin']];else _0x4d536b=defaultFee*_0x42ce4e['filled']*_0x42ce4e[_0x2f92ab(0x12f)];}_0x42ce4e[_0x2f92ab(0xba)]==_0x2f92ab(0x21a)?(_0x49af3d=_0xcde787!=0x0?(_0x5abd45['breakeven']*_0x5abd45[_0x2f92ab(0x18a)]+_0x42ce4e[_0x2f92ab(0x12f)]*(_0xcde787-_0x5abd45[_0x2f92ab(0x18a)])+_0x4d536b)/_0xcde787:0x0,_0x9d4ca1=_0x5abd45['realized']):(_0x49af3d=_0xcde787!=0x0?(_0x5abd45[_0x2f92ab(0x1cc)]*_0x5abd45['number']-_0x42ce4e[_0x2f92ab(0x12f)]*(_0x5abd45[_0x2f92ab(0x18a)]-_0xcde787)+_0x4d536b)/_0xcde787:0x0,_0x9d4ca1=_0x5abd45[_0x2f92ab(0x1f3)]+(_0x42ce4e[_0x2f92ab(0x12f)]-_0x5abd45[_0x2f92ab(0x1cc)])*_0x42ce4e[_0x2f92ab(0xef)]);_0xe9efd2=(_0x42ce4e[_0x2f92ab(0x12f)]-_0x49af3d-_0x4d536b/_0x42ce4e[_0x2f92ab(0xef)])*_0xcde787;let _0x4e9e1c={'coin':_0x42ce4e[_0x2f92ab(0x1f8)],'number':_0xcde787,'breakeven':formatResult(_0x49af3d,0x8),'realized':formatResult(_0x9d4ca1,0x8),'unrealized':formatResult(_0xe9efd2,0x8),'fees':formatResult(_0x5abd45[_0x2f92ab(0xeb)]+_0x4d536b,0x8),'sells':_0x42ce4e[_0x2f92ab(0xba)]==_0x2f92ab(0xcf)?_0x5abd45[_0x2f92ab(0xe1)]+0x1:_0x5abd45[_0x2f92ab(0xe1)],'buys':_0x42ce4e['side']==_0x2f92ab(0x21a)?_0x5abd45['buys']+0x1:_0x5abd45[_0x2f92ab(0xd4)]};dbCoinResults[_0x2f92ab(0xb2)](_0x2f92ab(0x219))[_0x2f92ab(0x228)]({'coin':_0x42ce4e['coin']})[_0x2f92ab(0xf2)](_0x4e9e1c)['write']();if(!_0x8c77cc){if(_0x42ce4e['fee']&&_0x42ce4e['fee'][_0x2f92ab(0x129)]==_0x2f92ab(0x1ba)){const _0x4c1f81=currentCoins[_0x2f92ab(0x228)](_0x49b41a=>_0x49b41a[_0x2f92ab(0x1f8)]==_0x2f92ab(0x1ba));if(_0x4c1f81){let _0x4ca816=dbCoinResults[_0x2f92ab(0xb2)](_0x2f92ab(0x219))['find']({'coin':_0x2f92ab(0x1ba)})['value']();_0x4e9e1c={..._0x4ca816,'number':_0x4c1f81[_0x2f92ab(0x18a)]},dbCoinResults[_0x2f92ab(0xb2)](_0x2f92ab(0x219))[_0x2f92ab(0x228)]({'coin':_0x2f92ab(0x1ba)})[_0x2f92ab(0xf2)](_0x4e9e1c)[_0x2f92ab(0x118)]();}}}}async function placeOrder(_0x506674){const _0x446f78=_0x5c012c,_0x3d8e25=config['ordertype']==_0x446f78(0x1eb)?_0x446f78(0x1eb):_0x446f78(0x106);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x446f78(0x128);let _0x3ce7b3=![];lastOrders=[];for(const _0x1be2b2 of _0x506674){let _0x19002a,_0x58a5ef,_0x8f4327,_0x5d6849,_0x12c7c7,_0x4de473=_0x1be2b2['symbol'];try{const _0x322598=await exchange[_0x446f78(0x151)](_0x4de473);_0x19002a=_0x1be2b2[_0x446f78(0xc7)]?0x1/_0x1be2b2['last']:_0x1be2b2['last'],_0x58a5ef=_0x322598['bid'],_0x8f4327=_0x322598[_0x446f78(0x92)];_0x1be2b2[_0x446f78(0xc7)]?(_0x5d6849=_0x1be2b2[_0x446f78(0xba)]==_0x446f78(0x21a)?_0x446f78(0xcf):_0x446f78(0x21a),_0x12c7c7=Math[_0x446f78(0x221)](_0x1be2b2[_0x446f78(0x210)])/_0x19002a):(_0x5d6849=_0x1be2b2['side'],_0x12c7c7=Math[_0x446f78(0x221)](_0x1be2b2[_0x446f78(0x210)]));_0x3d8e25==_0x446f78(0x106)&&(config['ordertype']=='limit-high'&&(_0x19002a=_0x5d6849==_0x446f78(0x21a)?_0x58a5ef:_0x8f4327),config[_0x446f78(0x1b0)]=='limit-low'&&(_0x19002a=_0x5d6849==_0x446f78(0x21a)?_0x8f4327:_0x58a5ef));_0x12c7c7=formatResult(_0x12c7c7,0x8),_0x19002a=formatResult(_0x19002a,0x8);const _0x76344e=_0x5d6849=='sell'?config[_0x446f78(0x1ff)]?String[_0x446f78(0x201)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x446f78(0x201)]('0x'+config[_0x446f78(0x198)])+'\x20':'',_0x1efa8b=_0x3d8e25==_0x446f78(0x1eb)?_0x446f78(0x1ed):config[_0x446f78(0x1b0)]==_0x446f78(0xb4)?_0x446f78(0x107):_0x446f78(0xbd),_0x473040=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x446f78(0x99)]();lastOrders[_0x446f78(0x1f7)]({'customId':_0x473040,'symbol':_0x4de473,'coin':_0x1be2b2[_0x446f78(0x1f8)],'amount':_0x12c7c7,'price':_0x19002a,'side':_0x5d6849,'reverse':_0x1be2b2['reverse'],'filled':0x0});if(_0x3d8e25==_0x446f78(0x1eb))logHistory('order',''+_0x76344e+_0x1efa8b+'\x20order:\x20'+_0x4de473+'\x20'+_0x5d6849+'\x20#'+formatResult(_0x12c7c7,0x8)+'\x20@'+formatResult(_0x19002a,0x8));else logHistory(_0x446f78(0x144),''+_0x76344e+_0x1efa8b+'\x20order:\x20'+_0x4de473+'\x20'+_0x5d6849+'\x20#'+formatResult(_0x12c7c7,0x8)+'\x20@'+formatResult(_0x19002a,0x8));let _0x2d38dd;_0x3d8e25=='market'?_0x5d6849==_0x446f78(0x21a)&&['Bybit',_0x446f78(0xe5),'Cex',_0x446f78(0x216),_0x446f78(0x197)][_0x446f78(0x8d)](config[_0x446f78(0xa1)])?_0x2d38dd=await exchange[_0x446f78(0x1fe)](_0x4de473,_0x3d8e25,_0x5d6849,_0x12c7c7,_0x19002a):_0x2d38dd=await exchange['createOrder'](_0x4de473,_0x3d8e25,_0x5d6849,_0x12c7c7,undefined):_0x2d38dd=await exchange[_0x446f78(0x1fe)](_0x4de473,_0x3d8e25,_0x5d6849,_0x12c7c7,_0x19002a);logger[_0x446f78(0x122)](_0x446f78(0x16b)+_0x2d38dd['id']+_0x446f78(0x140)+_0x473040);const _0x3b31d7=lastOrders[_0x446f78(0x19d)]-0x1;if(_0x3b31d7>=0x0&&lastOrders[_0x3b31d7][_0x446f78(0xb5)]==_0x473040){lastOrders[_0x3b31d7][_0x446f78(0xb9)]=_0x2d38dd['id'];if(_0x2d38dd[_0x446f78(0x1ae)])lastOrders[_0x3b31d7]['amount']=_0x2d38dd[_0x446f78(0x1ae)];if(_0x2d38dd['price'])lastOrders[_0x3b31d7][_0x446f78(0x12f)]=_0x2d38dd[_0x446f78(0x12f)];lastOrders[_0x3b31d7][_0x446f78(0x134)]=_0x2d38dd[_0x446f78(0x134)];}if(config['cooldown']!=0x0){let _0x49a1ad=null;if(cooldownTracker['length']==config[_0x446f78(0x101)]-0x1)_0x49a1ad=cooldownTracker[_0x446f78(0x217)]();const _0x29b82c=getTimeStamp();cooldownTracker[_0x446f78(0x1f7)](_0x29b82c);if(_0x49a1ad){const _0x20b868=fns[_0x446f78(0x1f1)](new Date(_0x29b82c),new Date(_0x49a1ad));if(_0x20b868<cooldownInterval){logHistory('error',_0x446f78(0xd3)+config[_0x446f78(0x101)]+_0x446f78(0x1f0)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x446f78(0xd5)),coolingDown=!![];break;}}}}catch(_0x113d45){if(_0x113d45['toString']()[_0x446f78(0x8d)](_0x446f78(0x213)))lastOrders=lastOrders['filter'](_0x40ff5d=>_0x40ff5d[_0x446f78(0x93)]!=_0x4de473),logHistory(_0x446f78(0x189),_0x446f78(0x1fa)+_0x4de473),_0x3ce7b3=!![];else{if(_0x113d45[_0x446f78(0x99)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x446f78(0x102)](_0x42e37f=>_0x42e37f[_0x446f78(0x93)]!=_0x4de473),logHistory(_0x446f78(0x189),_0x446f78(0x142)+_0x4de473),_0x3ce7b3=!![];else{if(_0x113d45[_0x446f78(0x99)]()['includes'](_0x446f78(0x18f)))lastOrders=lastOrders[_0x446f78(0x102)](_0x24f8b5=>_0x24f8b5[_0x446f78(0x93)]!=_0x4de473),logHistory('error',_0x446f78(0x20a)+_0x4de473),logger[_0x446f78(0x122)](_0x113d45),_0x3ce7b3=!![];else _0x113d45['toString']()[_0x446f78(0x8d)](_0x446f78(0x8e))?(lastOrders=lastOrders[_0x446f78(0x102)](_0x4282a0=>_0x4282a0[_0x446f78(0x93)]!=_0x4de473),logHistory(_0x446f78(0x189),_0x446f78(0x1fa)+_0x4de473),_0x3ce7b3=!![]):(lastOrders=lastOrders[_0x446f78(0x102)](_0x580418=>_0x580418[_0x446f78(0x93)]!=_0x4de473),await handleError(_0x113d45,'placeOrder()',_0x4de473));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4241b=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x446f78(0x13e)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4241b);}else unlockOrders();_0x3ce7b3&&config[_0x446f78(0x9b)]&&(logHistory('error',_0x446f78(0x20b)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x446f78(0x173),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x446f78(0x9b)]&&logHistory(_0x446f78(0x189),_0x446f78(0x185));else lockOrders!=ORDERS[_0x446f78(0x1b7)]&&(!config[_0x446f78(0x9b)]&&(config[_0x446f78(0x1b0)]=='market'?logHistory(_0x446f78(0x189),_0x446f78(0x96)):logHistory(_0x446f78(0x189),_0x446f78(0x177))));}}function persistOpenOrders(_0xd7609f){const _0x39ab58=_0x5c012c,_0x37f96f={...config,'openOrders':_0xd7609f};let _0x2a134a=dbConfig[_0x39ab58(0xb2)]('bot')[_0x39ab58(0x228)]({'botID':botID})[_0x39ab58(0x16a)]();_0x2a134a&&dbConfig[_0x39ab58(0xb2)](_0x39ab58(0xac))[_0x39ab58(0x228)]({'botID':botID})[_0x39ab58(0xf2)](_0x37f96f)[_0x39ab58(0x118)]();}function restoreOrders(){const _0x2c9777=_0x5c012c;let _0x18b733;config[_0x2c9777(0xfa)]&&allOpenOrders[_0x2c9777(0x169)](_0x1588b8=>{const _0x41295c=_0x2c9777,_0x1e7579=config[_0x41295c(0xfa)][_0x41295c(0x228)](_0x37dac0=>_0x37dac0['orderId']==_0x1588b8['id']);_0x1e7579&&(lastOrders[_0x41295c(0x1f7)](_0x1e7579),_0x18b733=_0x1588b8[_0x41295c(0x196)]);});if(lastOrders[_0x2c9777(0x19d)]>0x0){lockOrders=ORDERS[_0x2c9777(0xaf)],validateOrdersState=_0x2c9777(0x214),allOrdersPlaced=!![];const _0x4cfc5a=new Date()[_0x2c9777(0x22f)](),_0x3e9bf1=config['ordertype']==_0x2c9777(0x1eb)?validateOrderTimeout*0x3c*0x3e8:config[_0x2c9777(0x13e)]*0x3c*0x3e8;if(_0x18b733+_0x3e9bf1>_0x4cfc5a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1392a5=_0x2c9777;validateOrders(_0x1392a5(0xd6));},_0x18b733+_0x3e9bf1-_0x4cfc5a);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x2beabd=_0x5c012c;if(!coinsLoaded){process[_0x2beabd(0xd2)]({'telegrammsg':_0x2beabd(0x1c5)},_0x4e974f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x25c2e4='';if(config[_0x2beabd(0x1d8)])_0x25c2e4=_0x2beabd(0x1b4)+config['botname']+_0x2beabd(0xf6);else _0x25c2e4=_0x2beabd(0x15c)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x207d02=getKPIs(_0x2beabd(0xdf)),_0x15833b=getKPIs(_0x2beabd(0x1b9),config[_0x2beabd(0x1b9)]),_0x1c101b=getKPIs('net-basecoin'),_0x43ab82=getKPIs(_0x2beabd(0x161),config[_0x2beabd(0x1b9)]);_0x25c2e4+=_0x2beabd(0x14a),_0x25c2e4+=_0x207d02[_0x2beabd(0xf4)]+_0x2beabd(0x21e)+_0x207d02['value']+'\x0a',_0x25c2e4+=_0x207d02['rightTxt']+':\x20'+_0x207d02[_0x2beabd(0x19b)]+'%\x0a',_0x25c2e4+=_0x15833b[_0x2beabd(0xf4)]+_0x2beabd(0x21e)+_0x15833b[_0x2beabd(0x16a)]+'\x0a',_0x25c2e4+=_0x15833b[_0x2beabd(0x186)]+':\x20'+_0x15833b[_0x2beabd(0x19b)]+'%\x0a',_0x25c2e4+=_0x1c101b['leftTxt']+':\x20'+_0x1c101b[_0x2beabd(0x16a)]+'\x20('+config[_0x2beabd(0xdf)]+')\x0a',_0x25c2e4+=_0x1c101b[_0x2beabd(0x186)]+':\x20'+_0x1c101b[_0x2beabd(0x19b)]+_0x2beabd(0xc8)+config[_0x2beabd(0xdf)]+')\x0a',_0x25c2e4+=_0x43ab82[_0x2beabd(0xf4)]+':\x20'+_0x43ab82[_0x2beabd(0x16a)]+'\x20('+config[_0x2beabd(0x1b9)]+')\x0a',_0x25c2e4+=_0x43ab82[_0x2beabd(0x186)]+':\x20'+_0x43ab82[_0x2beabd(0x19b)]+_0x2beabd(0xc8)+config['fiat']+')\x0a',_0x25c2e4+=_0x2beabd(0xa6),process['send']({'telegrammsg':_0x25c2e4},_0x234a0e=>{});}async function sendPortfolioTelegram(){const _0x30e7d4=_0x5c012c;if(!coinsLoaded){process['send']({'telegrammsg':_0x30e7d4(0x1c5)},_0x406029=>{});return;}let _0x3775c8='';if(config[_0x30e7d4(0x1d8)])_0x3775c8=_0x30e7d4(0x1b4)+config[_0x30e7d4(0x108)]+_0x30e7d4(0x16e);else _0x3775c8=_0x30e7d4(0x15c)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x3775c8+='<pre>',_0x3775c8+=_0x30e7d4(0x9f),_0x3775c8+=_0x30e7d4(0x1c3),_0x3775c8+=_0x30e7d4(0x9f),currentCoins[_0x30e7d4(0x169)](_0x5516f1=>{const _0x5b17ff=_0x30e7d4;_0x3775c8+=_0x5516f1[_0x5b17ff(0x1f8)][_0x5b17ff(0xd9)](0x7)+'|\x20'+formatPad(_0x5516f1['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5516f1[_0x5b17ff(0xe8)],0x2,0x6)+'|\x20'+formatPad(_0x5516f1[_0x5b17ff(0xb8)]*0x64,0x2,0x6)+'\x0a';}),_0x3775c8+=_0x30e7d4(0xa6),process[_0x30e7d4(0xd2)]({'telegrammsg':_0x3775c8},_0x3868b9=>{});}function formatPad(_0x1589b4,_0x26bd2a,_0x746b3d){const _0x282c0a=_0x5c012c,_0x4da7d4=formatResultString(_0x1589b4,_0x26bd2a);return _0x4da7d4?_0x4da7d4[_0x282c0a(0x13d)](_0x746b3d):''['padStart'](_0x746b3d);}function logHistory(_0xd31c4d,_0x1781e5,_0x359997=''){const _0x5650cd=_0x5c012c;logger[_0x5650cd(0x1cd)](''+_0x1781e5);let _0x19cc6e={'time':getTimeStamp(),'type':_0xd31c4d,'event':_0x1781e5};dbLogs[_0x5650cd(0xb2)]('logs')['push'](_0x19cc6e)[_0x5650cd(0x118)]();if(_0x359997=='')_0x359997=_0x1781e5;proxyEmit(_0x5650cd(0xb0),{'log':_0x19cc6e,'summary':_0x359997}),process[_0x5650cd(0xd2)]({'telegram':{..._0x19cc6e,'botname':config[_0x5650cd(0x108)],'showname':config[_0x5650cd(0x1d8)]}},_0x11f657=>{});}function emitHistory(_0x223286={}){const _0x58739a=_0x5c012c;Object[_0x58739a(0xc0)](_0x223286)[_0x58739a(0x19d)]==0x0&&(_0x223286={'type':['order',_0x58739a(0xb0)],'event':'','page':0x1});if(_0x223286[_0x58739a(0xa9)][_0x58739a(0x8d)](_0x58739a(0xb0)))_0x223286[_0x58739a(0xa9)][_0x58739a(0xf3)](_0x223286[_0x58739a(0xa9)][_0x58739a(0x1f6)]('event'),0x1,_0x58739a(0x189),'warning',_0x58739a(0x173));if(dbLogs[_0x58739a(0x19e)](_0x58739a(0x21d))[_0x58739a(0x16a)]()){let _0x5a7f9b=dbLogs[_0x58739a(0xb2)]('logs')[_0x58739a(0x102)](_0x180350=>{const _0x2e42d9=_0x58739a;if(_0x223286[_0x2e42d9(0xa9)]['length']==0x0)return![];else return _0x223286['type'][_0x2e42d9(0x8d)](_0x180350[_0x2e42d9(0xa9)]);})[_0x58739a(0x102)](_0xc456cc=>{const _0x223adf=_0x58739a;if(_0x223286[_0x223adf(0xb0)]=='')return!![];else return _0xc456cc[_0x223adf(0xb0)]['toLowerCase']()[_0x223adf(0x8d)](_0x223286[_0x223adf(0xb0)]['toLowerCase']());})['sortBy'](_0x58739a(0x1a5)),_0x36bb8f=_0x5a7f9b['value']()[_0x58739a(0x19d)];_0x5a7f9b=_0x5a7f9b[_0x58739a(0xc7)]()['slice']((_0x223286[_0x58739a(0x19a)]-0x1)*logPageSize,_0x223286['page']*logPageSize-0x1)[_0x58739a(0xc7)]()[_0x58739a(0x16a)](),proxyEmit(_0x58739a(0xcc),{'logs':_0x5a7f9b,'total':_0x36bb8f});}else proxyEmit(_0x58739a(0xcc),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x56d85e){const _0x4e1da1=_0x5c012c;if(dbLogs[_0x4e1da1(0x19e)](_0x4e1da1(0x21d))[_0x4e1da1(0x16a)]()){const _0x3883bf=dbLogs[_0x4e1da1(0xb2)]('logs')[_0x4e1da1(0x199)](_0x4e1da1(0x1a5))['filter'](_0x4af168=>{const _0x4b8e3d=_0x4e1da1;return _0x4af168[_0x4b8e3d(0xa9)]==_0x4b8e3d(0x144);})['value']();dbLogs[_0x4e1da1(0xb2)](_0x4e1da1(0x21d))['remove']()['write'](),dbLogs[_0x4e1da1(0xb2)](_0x4e1da1(0x21d))[_0x4e1da1(0xf2)](_0x3883bf)[_0x4e1da1(0x118)](),emitHistory(_0x56d85e);}}async function pauseBot(_0x1f6147=pauseBotInterval){const _0x5d7c84=new Date()['getTime']();if(!lastErrorShown||_0x5d7c84-lastErrorShown>=_0x1f6147){lastErrorShown=_0x5d7c84;!lastBotPause?(lastBotPause=_0x5d7c84,consecutivePauses=0x1):(_0x5d7c84-lastBotPause-_0x1f6147<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':'restart'},_0x1e3e8a=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x1f6147),botPaused=![],reset(!![]);}}}async function killBot(){const _0x48cbc1=_0x5c012c;botPaused=!![],await sleep(0x3e8),process[_0x48cbc1(0xd2)]({'stop':_0x48cbc1(0xfe)},_0x371e15=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x582d88,_0x2cdaed){const _0x27a3c7=_0x5c012c;if(botPaused)return;const _0x54583e=config[_0x27a3c7(0xa1)]||'Exchange';if(_0x2cdaed)logger[_0x27a3c7(0x122)](_0x27a3c7(0xde)+_0x2cdaed);const _0xc4bd66=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x582d88[_0x27a3c7(0x99)]()[_0x27a3c7(0x8d)]('API-key\x20format\x20invalid'))logHistory(_0x27a3c7(0x189),_0x54583e+_0x27a3c7(0xe2)),_0xc4bd66();else{if(_0x582d88[_0x27a3c7(0x99)]()[_0x27a3c7(0x8d)](_0x27a3c7(0x15b)))logHistory('error',_0x54583e+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0xc4bd66();else _0x582d88[_0x27a3c7(0x99)]()[_0x27a3c7(0x8d)](_0x27a3c7(0x1fc))?(logHistory('error',_0x54583e+_0x27a3c7(0xab)),logHistory('error',_0x27a3c7(0x1d6)),_0xc4bd66()):await handleError(_0x582d88,null);}}async function handleError(_0x54a2fb,_0x37e1ee,_0xf63a53=''){const _0x863f62=_0x5c012c;if(botPaused)return;const _0x5aac9b=config[_0x863f62(0xa1)]||_0x863f62(0x229);if(_0x37e1ee)logger[_0x863f62(0x122)](_0x863f62(0xde)+_0x37e1ee);if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)]('DDoSProtection'))logHistory(_0x863f62(0x189),_0x5aac9b+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x863f62(0x122)](_0x863f62(0xff),_0x54a2fb),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0x208)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x192)+pauseBotMsg),logger[_0x863f62(0x122)]('Error\x20details:',_0x54a2fb),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)]('ExchangeNotAvailable')||_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)]('OnMaintenance'))logHistory('error',_0x5aac9b+_0x863f62(0x195)+pauseBotMsg),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0xea)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x220)+pauseBotMsg),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0x155)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x176)+pauseBotMsg),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()['toLowerCase']()[_0x863f62(0x8d)](_0x863f62(0x196))||_0x54a2fb[_0x863f62(0x99)]()['toLowerCase']()['includes'](_0x863f62(0xbe))){const _0x4cc97e=_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x1dd)]();let _0x1dd2e0=![];if((config[_0x863f62(0xa1)]=='Binance'||config[_0x863f62(0xa1)]==_0x863f62(0x116))&&(_0x4cc97e[_0x863f62(0x8d)](_0x863f62(0x15f)[_0x863f62(0x1dd)]())||_0x4cc97e[_0x863f62(0x8d)](_0x863f62(0x110)[_0x863f62(0x1dd)]())))_0x1dd2e0=!![];if(config[_0x863f62(0xa1)]==_0x863f62(0x18d)&&_0x4cc97e['includes'](_0x863f62(0x1a3)[_0x863f62(0x1dd)]()))_0x1dd2e0=!![];if(config[_0x863f62(0xa1)]==_0x863f62(0xfd)&&_0x4cc97e[_0x863f62(0x8d)]('invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param'[_0x863f62(0x1dd)]()))_0x1dd2e0=!![];if(config[_0x863f62(0xa1)]==_0x863f62(0xe5)&&_0x4cc97e['includes'](_0x863f62(0x215)[_0x863f62(0x1dd)]()))_0x1dd2e0=!![];if((config[_0x863f62(0xa1)]==_0x863f62(0x8c)||config[_0x863f62(0xa1)]==_0x863f62(0x1b1))&&_0x4cc97e[_0x863f62(0x8d)](_0x863f62(0x109)['toLowerCase']()))_0x1dd2e0=!![];_0x1dd2e0?logHistory(_0x863f62(0x189),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'+pauseBotMsg):logHistory(_0x863f62(0x189),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains'+pauseBotMsg),logger[_0x863f62(0x122)](_0x863f62(0xff),_0x54a2fb[_0x863f62(0x99)]()),await pauseBot();}else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0x200)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x1d7)+pauseBotMsg),logger[_0x863f62(0x122)](_0x863f62(0xff),_0x54a2fb),await pauseBot();else{if(_0x54a2fb instanceof ccxt[_0x863f62(0x223)])logHistory(_0x863f62(0x189),_0x5aac9b+'\x20network\x20error'+pauseBotMsg),logger[_0x863f62(0x122)](_0x863f62(0xff),_0x54a2fb),await pauseBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0x105)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x21b)),logHistory(_0x863f62(0x189),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x54a2fb[_0x863f62(0x99)]()['includes'](_0x863f62(0x15b)))logHistory(_0x863f62(0x189),_0x5aac9b+_0x863f62(0x11e)),logHistory('error',_0x863f62(0xf1)),await killBot();else{if(_0x54a2fb[_0x863f62(0x99)]()[_0x863f62(0x8d)](_0x863f62(0x1fc)))logHistory('error',_0x5aac9b+_0x863f62(0x1c0)),logHistory(_0x863f62(0x189),_0x863f62(0xf1)),await killBot();else{if(_0x54a2fb[_0x863f62(0x99)]()['includes']('PermissionDenied'))logHistory('error',_0x5aac9b+_0x863f62(0x1c2)),logHistory(_0x863f62(0x189),_0x863f62(0xf1)),await killBot();else{if(_0x54a2fb[_0x863f62(0x99)]()['includes']('InsufficientFunds'))logHistory('error',_0x863f62(0xc5)+_0xf63a53);else _0x54a2fb instanceof ccxt[_0x863f62(0x111)]?(logHistory('error',_0x5aac9b+_0x863f62(0x1b8)),logger['debug']('Error\x20details:',_0x54a2fb)):(logHistory('error',_0x863f62(0xbf)+pauseBotMsg),logger['debug'](_0x863f62(0xff),_0x54a2fb),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x3d564b,_0x3dea7e){return parseFloat(_0x3d564b['toFixed'](_0x3dea7e));}function formatResultTruncate(_0x2998a2,_0x15654c){const _0x31b897=_0x5c012c;let _0x320c81=formatResultString(_0x2998a2,0xa),_0x4b215=_0x320c81['indexOf']('.');return _0x4b215!=-0x1&&(_0x320c81=_0x320c81[_0x31b897(0x113)](0x0,_0x4b215+_0x15654c+0x1)),Number(_0x320c81);}function formatResultString(_0x2f5ad2,_0x11788f){const _0x457c42=_0x5c012c;let _0x13da04;if(!(''+_0x2f5ad2)['includes']('e'))_0x13da04=+(Math['round'](_0x2f5ad2+'e+'+_0x11788f)+'e-'+_0x11788f);else{let _0x5d6ba6=(''+_0x2f5ad2)['split']('e'),_0x2d9807='';+_0x5d6ba6[0x1]+_0x11788f>0x0&&(_0x2d9807='+'),_0x13da04=+(Math['round'](+_0x5d6ba6[0x0]+'e'+_0x2d9807+(+_0x5d6ba6[0x1]+_0x11788f))+'e-'+_0x11788f);}return Number(_0x13da04)[_0x457c42(0x150)](_0x11788f);}function getServerTime(){const _0x45d8b6=_0x5c012c,_0xd6e4cb=new Date();return _0xd6e4cb['getFullYear']()+'/'+(_0xd6e4cb[_0x45d8b6(0x1af)]()+0x1)[_0x45d8b6(0x99)]()[_0x45d8b6(0x13d)](0x2,'0')+'/'+_0xd6e4cb[_0x45d8b6(0xdc)]()[_0x45d8b6(0x99)]()[_0x45d8b6(0x13d)](0x2,'0')+'\x20'+_0xd6e4cb['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0xd6e4cb['getMinutes']()[_0x45d8b6(0x99)]()[_0x45d8b6(0x13d)](0x2,'0')+':'+_0xd6e4cb[_0x45d8b6(0x152)]()[_0x45d8b6(0x99)]()[_0x45d8b6(0x13d)](0x2,'0');}function getTimeStamp(){const _0x577404=_0x5c012c,_0x5625b1=shiftedTime();return _0x5625b1['getFullYear']()+'/'+(_0x5625b1[_0x577404(0x1af)]()+0x1)[_0x577404(0x99)]()['padStart'](0x2,'0')+'/'+_0x5625b1[_0x577404(0xdc)]()[_0x577404(0x99)]()[_0x577404(0x13d)](0x2,'0')+'\x20'+_0x5625b1[_0x577404(0x125)]()['toString']()['padStart'](0x2,'0')+':'+_0x5625b1[_0x577404(0x114)]()['toString']()[_0x577404(0x13d)](0x2,'0')+':'+_0x5625b1[_0x577404(0x152)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x54905f=_0x5c012c,_0x267f13=shiftedTime();return _0x267f13[_0x54905f(0x1d3)]()+'/'+(_0x267f13[_0x54905f(0x1af)]()+0x1)[_0x54905f(0x99)]()[_0x54905f(0x13d)](0x2,'0')+'/'+_0x267f13['getDate']()[_0x54905f(0x99)]()[_0x54905f(0x13d)](0x2,'0');}function getHour(){const _0x508233=_0x5c012c,_0x2bd351=shiftedTime();return _0x2bd351[_0x508233(0x125)]()[_0x508233(0x99)]()['padStart'](0x2,'0');}function sleep(_0x1a5fc5){return new Promise(_0x1e02ec=>setTimeout(_0x1e02ec,_0x1a5fc5));}function shiftedTime(){const _0x2814ca=_0x5c012c,_0x4b2074=new Date();let _0xdccab3=_0x4b2074;if(config&&config['timeshift']!==0x0)_0xdccab3=fns['add'](_0x4b2074,{'hours':config[_0x2814ca(0x10f)]});return _0xdccab3;}function timer(_0x2458dc){const _0x14cc34=_0x5c012c,_0x2b622c=new Date();!lasttime?console['log'](getTimeStamp()+_0x14cc34(0x145),_0x2458dc,_0x2b622c):console[_0x14cc34(0x1d4)](getTimeStamp()+_0x14cc34(0x145),_0x2458dc,(_0x2b622c-lasttime)/0x3e8),lasttime=_0x2b622c;}