const _0x22bd8e=_0xc4b7;(function(_0x52504a,_0x50b888){const _0x2f9e48=_0xc4b7,_0x27217e=_0x52504a();while(!![]){try{const _0x592ce9=-parseInt(_0x2f9e48(0x271))/0x1*(-parseInt(_0x2f9e48(0x2e4))/0x2)+-parseInt(_0x2f9e48(0x31c))/0x3+parseInt(_0x2f9e48(0x293))/0x4+parseInt(_0x2f9e48(0x23b))/0x5+-parseInt(_0x2f9e48(0x205))/0x6*(-parseInt(_0x2f9e48(0x2e5))/0x7)+parseInt(_0x2f9e48(0x32b))/0x8*(parseInt(_0x2f9e48(0x1e9))/0x9)+parseInt(_0x2f9e48(0x26a))/0xa*(-parseInt(_0x2f9e48(0x1df))/0xb);if(_0x592ce9===_0x50b888)break;else _0x27217e['push'](_0x27217e['shift']());}catch(_0x36a384){_0x27217e['push'](_0x27217e['shift']());}}}(_0x4b42,0x45718));const _0x343ae7=function(){let _0x20ea31=!![];return function(_0x1f2563,_0x57cf5a){const _0x5dcaad=_0x20ea31?function(){const _0x2fb509=_0xc4b7;if(_0x57cf5a){const _0x2fc4a8=_0x57cf5a[_0x2fb509(0x25e)](_0x1f2563,arguments);return _0x57cf5a=null,_0x2fc4a8;}}:function(){};return _0x20ea31=![],_0x5dcaad;};}(),_0x1b7c48=_0x343ae7(this,function(){const _0x17f53f=_0xc4b7;return _0x1b7c48[_0x17f53f(0x32c)]()['search'](_0x17f53f(0x2ef))[_0x17f53f(0x32c)]()[_0x17f53f(0x19b)](_0x1b7c48)[_0x17f53f(0x1fd)](_0x17f53f(0x2ef));});_0x1b7c48();'use strict';const ccxt=require(_0x22bd8e(0x2d7)),low=require(_0x22bd8e(0x22e)),FileSync=require(_0x22bd8e(0x284)),fs=require('fs'),fns=require(_0x22bd8e(0x30c)),Crypt=require(_0x22bd8e(0x2f8))['Crypt'],util=require(_0x22bd8e(0x26b)),argv=require(_0x22bd8e(0x280))(process[_0x22bd8e(0x23c)]['slice'](0x2))[_0x22bd8e(0x23c)],path=require(_0x22bd8e(0x287));let exchange;global[_0x22bd8e(0x218)]={},global[_0x22bd8e(0x308)]={};const usdBasecoins=[_0x22bd8e(0x25f),_0x22bd8e(0x27c),_0x22bd8e(0x291),'USDT','USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x22bd8e(0x250)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x22bd8e(0x1ad)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0xc4b7(_0x2ed48f,_0x58f401){const _0x195070=_0x4b42();return _0xc4b7=function(_0x1b7c48,_0x343ae7){_0x1b7c48=_0x1b7c48-0x192;let _0x4b4273=_0x195070[_0x1b7c48];return _0x4b4273;},_0xc4b7(_0x2ed48f,_0x58f401);}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x22bd8e(0x30a)+pauseBotInterval/0xea60+_0x22bd8e(0x221),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x22bd8e(0x204))['version'],botID=process[_0x22bd8e(0x23c)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x22bd8e(0x1fb)](botID)&&(console[_0x22bd8e(0x1c4)](_0x22bd8e(0x21e)+botID+_0x22bd8e(0x2ad)),killBot());const userID=process[_0x22bd8e(0x23c)][0x3]||'',configpath=userID?_0x22bd8e(0x2f6)+userID+'/':_0x22bd8e(0x2f6),logspath=userID?_0x22bd8e(0x2c8)+userID+'/':'./logs/',loggerfile=fs[_0x22bd8e(0x22c)](logspath+_0x22bd8e(0x206),{'flags':'a'});!fs[_0x22bd8e(0x278)](configpath)&&fs[_0x22bd8e(0x2d1)](configpath);!fs[_0x22bd8e(0x278)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x22bd8e(0x306)+botID+_0x22bd8e(0x208),logfile=configpath+_0x22bd8e(0x306)+botID+_0x22bd8e(0x1c6),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x22bd8e(0x306)+botID+_0x22bd8e(0x303),settingsfile=configpath+_0x22bd8e(0x1c7),securefile=configpath+_0x22bd8e(0x2fa),configbackuppath=configpath+_0x22bd8e(0x2e3),adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x4b42(){const _0x21bb79=['77rVDomv','set','configuration-stored','autoliquidity','logs','getCoins()','timeshift','error','forEach','storeConfiguration','(((.+)+)+)+$','Huobi','event-history','realized','stringify','initTickers()','\x20network\x20error','./config/','emojibuy','hybrid-crypto-js','time','bb-secure.json','Bot\x20','configuration','cancelOrder','loading-canceled','floor','ongoing','createOrder','Order(s)\x20not\x20validated\x20after\x20','-results.json','OnMaintenance','success','bot-','push','change','sort','\x20-\x20pausing\x20bot\x20for\x20','</pre>','date-fns','2\x20-\x20handling\x20FILLED\x20order:\x20','market','write','net-fiat','password','milliseconds','message','padStart','offset','parseISO','1\x20-\x20Unlock\x20orders','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','2.5.0','apiSecret','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','302304PCMeDN','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','exchange','isEqual','2.3.5','liquidity','changes','getFullYear','apiKey','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','stopExchange()','shift','showname','rightTxt','MIN_NOTIONAL','42736awHARn','toString','remainingSymbols','deleteHistoryAlerts','Executed\x20','\x20|\x20lock\x20orders:\x20','fetchBalance','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','order','date','botID','Binance','slice','split','constructor','yyyy-MM-dd\x27T\x27HH:mm:ss','getCoinNumber()','balances','Uncaught\x20Exception:','filter','unlinkSync','function','portfolio','ordertype','exchange\x20reloaded','fiat','privateKey','toUpperCase','USDT','Market','status','storeHeadless','UNLOCKED','Exchange','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','enabled','EUR','orderstatus','watchTrades','value','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ETH','sell','delta','basecoinvalue','starting-balance-','\x20API\x20secret\x20is\x20invalid','substring','random','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Avoiding\x20continuous\x20order\x20attempts','Trigger:\x20','format','ORDERS.UNLOCKED','progress','log','LOCKED','-events.json','bb-settings.json','Error\x20while\x20deleting\x20files:\x20','Order\x20is\x20invalid:\x20','cancelOrders()','NetworkError','fee','Limit\x20(high-margin)','2.6.0','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','fetchClosedOrders','exchange\x20not\x20reloaded','secure','\x20/\x20','kill','data','1\x20-\x20FILLED\x20unknown\x20order:\x20','full','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','cancelLoading','args','\x20|\x20exchange:\x20','storeFiat','length','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','352eBujXO','startsWith','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Transaction\x20detection\x20blocked','spot','decrypt','2\x20-\x20Validate\x20orders:\x20','uncaughtException','settings','Cex','261jqpACQ','running','assign','recent20','BTC','placeOrder()','\x20|\x20Custom\x20ID:\x20','removed','.json','emitHistory','currency','parse','toggleBotMode','excluded','netoffset','customId','getMinutes','sendMetricsTelegram','test',':\x20timer\x20>','search','fetchTickers','\x20API\x20key\x20is\x20invalid','ORDERS.LOCKED','exec','limit','Resetting\x20coin\x20results:\x20','./version.json','226518ofAWyH','/output-000.log','limit-low','-config.json','buys','red_yellow_blue','<b>Bot\x20','getHours','remove','\x20closed\x20the\x20connection','\x20:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','watchTransactions()','1\x20-\x20FILLED\x20known\x20order:\x20','emojisell','close','InvalidOrder','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Fee\x20discount\x20refund\x20detected:\x20','ticker','loadSymbols()','InsufficientFunds','watchOrders()','openOrders','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Error:\x20Invalid\x20argument\x20','\x20>\x20','recreateCoinResults()','\x20minutes','Saving\x20configuration','getMonth','cloneDeep','-------------------------------\x0a','\x20|\x20','Huobipro','price','Order\x20filled:\x20','bots','send','createWriteStream','***','lowdb','colorscheme','open','balancing\x20resumes\x20when\x20cooldown\x20ends','recovery','Loading\x20completed','fees','buy','getSeconds','\x20order:\x20','usd','min','2\x20-\x20Orders\x20unlocked','1043535qIGpUY','argv','AuthenticationError','timeout','ExchangeNotAvailable','\x20exchange','fetchOpenOrders','entries','active','page','fetchTicker','initclient','filled','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','debug','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','starting-balances','indexOf','ID:\x20','InvalidNonce','Resetting\x20bot\x20history','freeze','\x20minutes\x20-\x20','defaults','\x20-\x20bot\x20not\x20started','performance','onepagemode','breakeven','Net\x20effect','watchOrders','keys','<pre>','sells','toLowerCase','bot','apply','USD','percentage','<b>','cost','valid','replace','Waited\x20','cooldown','initial','datetime','BNB/','266720HLxByl','util','splice','Invalid\x20symbol:\x20','0\x20-\x20EXECUTION:\x20','join','Portfolio\x20change\x20detected:\x20','3exTDqr','coin','get','yyyy/MM/dd','************','getPortfolio','\x20metrics:</b>\x20\x0a\x0a','existsSync','exchanges','\x20>\x20[DEBUG]\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','BUSD',':\x20Bot\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','total','yargs/yargs','getAllOrders()','canceled','ask','lowdb/adapters/FileSync','leftTxt','Bybit','path','type','Invalid\x20API\x20key\x20or\x20secret\x20entered','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','last','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','startdate','restart','sendPortfolioTelegram','added','TUSD','add','340836NODXpL','Executing\x20exchange\x20reload','Limit\x20(low-margin)','Exception\x20thrown\x20in\x20','round','getPortfolio(2)','reverse','loadMarkets','highest','has','side','pro','Invalid\x20quantity','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Transaction\x20detection\x20unblocked','timestamp','headless','basecoin','abs','none','1\x20-\x20Handle\x20open\x20orders','RateLimitExceeded','resetHistory','concat','trade','distribution',',\x20must\x20be\x20a\x203\x20digit\x20number','symbol','botname','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20|\x20highest\x20fee:\x20','threshold','final','%\x20(','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limits','coins','no\x20open\x20orders','Unknown\x20error\x20occured','version','Net\x20','getPortfolio(1)','map','getDate','ORDERS.UNLOCKING','apiPassword','startprice','-performance.json','/EUR','net-basecoin','Error\x20details:','max','includes','./logs/','BNB','findIndex','coin-loading-progress','closed','warning','orderId','target','\x20portfolio:</b>\x20\x0a\x0a','mkdirSync','find','toFixed','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','API-key\x20format\x20invalid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','ccxt','getTime','number','Reset\x20|\x20','fetchTickers()','change24h','amount','event','showConfig','eur','sortBy','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','/backup/','249730kxcCKh'];_0x4b42=function(){return _0x21bb79;};return _0x4b42();}dbLogs[_0x22bd8e(0x252)]({'logs':[],'version':serverversion})[_0x22bd8e(0x30f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x22bd8e(0x30f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x22bd8e(0x252)]({'bot':[],'version':serverversion})[_0x22bd8e(0x30f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x22bd8e(0x252)]({'coins':[],'version':serverversion})[_0x22bd8e(0x30f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x45f3d2=>{const _0x38e38a=_0x22bd8e;console[_0x38e38a(0x1c4)](_0x45f3d2);},'simple':_0xc14bef=>{const _0x5a98a3=_0x22bd8e;console[_0x5a98a3(0x1c4)](_0xc14bef),loggerfile['write'](util[_0x5a98a3(0x1c1)](_0xc14bef)+'\x0a');},'full':async(_0x23a522,_0x4f6cea='')=>{const _0xd3ca92=_0x22bd8e;let _0x2a39b8;if(config['showname'])_0x2a39b8=getTimeStamp()+':\x20'+config['botname']+_0xd3ca92(0x21f)+_0x23a522;else _0x2a39b8=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x23a522;console[_0xd3ca92(0x1c4)](_0x2a39b8),loggerfile['write'](util['format'](_0x2a39b8)+'\x0a'),_0x4f6cea&&(console[_0xd3ca92(0x1c4)](_0x4f6cea),loggerfile[_0xd3ca92(0x30f)](util[_0xd3ca92(0x1c1)](_0x4f6cea)+'\x0a'));},'debug':async(_0x387b3d,_0x355634='')=>{const _0x4c6246=_0x22bd8e;let _0x4a7f14;if(config['showname'])_0x4a7f14=getTimeStamp()+':\x20'+config[_0x4c6246(0x2af)]+_0x4c6246(0x27a)+_0x387b3d;else _0x4a7f14=getTimeStamp()+_0x4c6246(0x27d)+botID+_0x4c6246(0x27a)+_0x387b3d;if(debugging)console[_0x4c6246(0x1c4)](_0x4a7f14);loggerfile[_0x4c6246(0x30f)](util[_0x4c6246(0x1c1)](_0x4a7f14)+'\x0a');if(_0x355634){if(debugging)console[_0x4c6246(0x1c4)](_0x355634);loggerfile['write'](util[_0x4c6246(0x1c1)](_0x355634)+'\x0a');}}};process['on'](_0x22bd8e(0x1e6),function(_0x26cc76){const _0x397ec2=_0x22bd8e;logHistory(_0x397ec2(0x2ec),_0x397ec2(0x1e1)),logger[_0x397ec2(0x249)](_0x397ec2(0x19f),_0x26cc76);});settings[_0x22bd8e(0x2eb)]!=config[_0x22bd8e(0x2eb)]&&updateTimeshift(settings[_0x22bd8e(0x2eb)]);settings[_0x22bd8e(0x255)]!=config[_0x22bd8e(0x255)]&&updateOnepagemode(settings[_0x22bd8e(0x255)]);process[_0x22bd8e(0x22b)]({'started':_0x22bd8e(0x1ea)},_0x5381a5=>{}),initializeProcessListeners();function proxyEmit(_0x55c549,_0x191453=null){const _0x58b926=_0x22bd8e;process[_0x58b926(0x22b)]({'function':_0x55c549,'args':_0x191453},_0x233d3b=>{});}function initializeProcessListeners(){const _0x4adbfb=_0x22bd8e;process['on'](_0x4adbfb(0x313),_0x330af3=>{const _0x435427=_0x4adbfb;switch(Object[_0x435427(0x259)](_0x330af3)[0x0]){case _0x435427(0x2eb):_0x330af3[_0x435427(0x2eb)]!=undefined&&(settings[_0x435427(0x2eb)]=_0x330af3[_0x435427(0x2eb)],updateTimeshift(settings[_0x435427(0x2eb)]));break;case _0x435427(0x255):_0x330af3[_0x435427(0x255)]!=undefined&&(settings['onepagemode']=_0x330af3['onepagemode'],updateOnepagemode(settings[_0x435427(0x255)]));break;case _0x435427(0x22a):_0x330af3[_0x435427(0x22a)]!=undefined&&(bots=JSON['parse'](_0x330af3[_0x435427(0x22a)]),proxyEmit(_0x435427(0x22a),bots));break;case'function':switch(_0x330af3[_0x435427(0x1a2)]){case _0x435427(0x246):initclient();break;case _0x435427(0x1f5):toggleBotMode();break;case _0x435427(0x1f2):emitHistory(_0x330af3['args']);break;case _0x435427(0x32e):deleteHistoryAlerts(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x276):getPortfolio(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x2ee):storeConfiguration(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x1ac):storeHeadless(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x1dc):storeFiat(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x2a9):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x330af3[_0x435427(0x1da)]);break;case _0x435427(0x1d9):cancelLoading();break;case _0x435427(0x2df):showConfig();break;case _0x435427(0x1fa):sendMetricsTelegram();break;case _0x435427(0x28f):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2ed3f9=![]){const _0x2ae7e6=_0x22bd8e;logger[_0x2ae7e6(0x249)](_0x2ae7e6(0x2da)+(_0x2ed3f9?_0x2ae7e6(0x1a5):_0x2ae7e6(0x1d1))+_0x2ae7e6(0x1db)+config[_0x2ae7e6(0x31e)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2ed3f9)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2ae7e6(0x324)]!=''&&config[_0x2ae7e6(0x324)]!='***'){loadingProgress=0x0;if(_0x2ed3f9){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x43b478){handleErrorNoStop(_0x43b478,_0x2ae7e6(0x219));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x15785b=await getCoins();[currentCoins,currentCoinsAll]=_0x15785b,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2ae7e6(0x249)](_0x2ae7e6(0x233)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2ae7e6(0x1dd)]==0x0&&allOpenOrders[_0x2ae7e6(0x1dd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3c34f0=_0x22bd8e;exchangeStopped=!![];try{await exchange[_0x3c34f0(0x214)]();}catch(_0x291cef){await handleError(_0x291cef,_0x3c34f0(0x326));}}async function reloadExchange(){const _0x2a4e5f=_0x22bd8e;while(lockOrders!=ORDERS[_0x2a4e5f(0x1ad)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2a4e5f(0x249)](_0x2a4e5f(0x294)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x5342b4=config[_0x22bd8e(0x31e)],_0x541580=config[_0x22bd8e(0x324)],_0x7f537=config[_0x22bd8e(0x31a)],_0x5f45ff=config['apiPassword']){const _0x17f410=_0x22bd8e;exchange&&await stopExchange();!supportedExchanges()[_0x17f410(0x2c7)](_0x5342b4)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x5342b4+_0x17f410(0x240)),killBot());const _0x470dfe=ccxt[_0x17f410(0x29e)][_0x5342b4[_0x17f410(0x25c)]()];exchange=new _0x470dfe({'apiKey':_0x541580,'secret':_0x7f537,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x17f410(0x1e3)}});if(_0x5f45ff)exchange['password']=_0x5f45ff;}function setStableCoins(){const _0x544508=_0x22bd8e;let _0x5df016=config[_0x544508(0x2a4)]==_0x544508(0x1b6)?_0x544508(0x1b6):_0x544508(0x1ed),_0x2fc9f4=!allSymbols[_0x544508(0x2c7)](_0x5df016+'/USD')?_0x544508(0x1a9):_0x544508(0x25f),_0x2fa0fd=!allSymbols[_0x544508(0x2c7)](_0x5df016+_0x544508(0x2c3))?_0x2fc9f4:'EUR';stablecoins={'eur':{'coin':''+_0x5df016+_0x2fa0fd,'symbol':_0x5df016+'/'+_0x2fa0fd},'usd':{'coin':''+_0x5df016+_0x2fc9f4,'symbol':_0x5df016+'/'+_0x2fc9f4}};}async function initwsCcxt(){const _0x11e229=_0x22bd8e;initCycle++;const _0x3f77f7=initCycle;let _0x10526f=[];config[_0x11e229(0x1a3)][_0x11e229(0x2ed)](_0x40a6b3=>{const _0x4a22cd=_0x11e229;if(!_0x40a6b3[_0x4a22cd(0x1f6)]&&_0x40a6b3[_0x4a22cd(0x272)]!=config[_0x4a22cd(0x2a4)])_0x10526f['push'](_0x40a6b3[_0x4a22cd(0x2ae)]);});if(!_0x10526f['includes'](stablecoins[_0x11e229(0x2e0)]['symbol']))_0x10526f[_0x11e229(0x307)](stablecoins[_0x11e229(0x2e0)]['symbol']);if(!_0x10526f['includes'](stablecoins['usd']['symbol']))_0x10526f[_0x11e229(0x307)](stablecoins[_0x11e229(0x238)]['symbol']);if(config[_0x11e229(0x31e)][_0x11e229(0x1e0)](_0x11e229(0x198))){if(!_0x10526f['includes'](_0x11e229(0x269)+config[_0x11e229(0x2a4)]))_0x10526f[_0x11e229(0x307)](_0x11e229(0x269)+config[_0x11e229(0x2a4)]);}loadCoins(_0x10526f),_0x10526f=validateSymbols(_0x10526f);const _0x3f8a87=async _0x53f1d5=>{const _0x12305f=_0x11e229;let _0x75af5d;try{const _0x17c933=await exchange[_0x12305f(0x1fe)](_0x53f1d5);Object[_0x12305f(0x242)](_0x17c933)[_0x12305f(0x2ed)](_0x490031=>{const _0x3719b5=_0x12305f;_0x75af5d=_0x490031[0x1]['symbol'],global[_0x3719b5(0x218)][noslash(_0x75af5d)]=_0x490031[0x1][_0x3719b5(0x28b)],global[_0x3719b5(0x308)][_0x75af5d]=_0x490031[0x1][_0x3719b5(0x260)];});}catch(_0x30c2b6){await handleError(_0x30c2b6,_0x12305f(0x2f4),_0x75af5d);}},_0x4545a9=async _0x4696b3=>{const _0x302f78=_0x11e229;while(initCycle==_0x3f77f7){if(!botPaused)try{const _0x22d7b4=await exchange['watchTrades'](_0x4696b3);global[_0x302f78(0x218)][noslash(_0x22d7b4[0x0][_0x302f78(0x2ae)])]=_0x22d7b4[0x0][_0x302f78(0x228)],await sleep(0x3e8);}catch(_0x5dab03){if(!exchangeStopped)await handleError(_0x5dab03,'watchTrades()',_0x4696b3);}else await sleep(0x64);}},_0x2ee90c=async _0x224760=>{const _0xf82590=_0x11e229;await sleep(0x3c*0x3e8);while(initCycle==_0x3f77f7){if(!botPaused){let _0x16bd88;try{const _0x7fbc64=await exchange[_0xf82590(0x1fe)](_0x224760);Object[_0xf82590(0x242)](_0x7fbc64)[_0xf82590(0x2ed)](_0x285c11=>{const _0x4142e9=_0xf82590;_0x16bd88=_0x285c11[0x1][_0x4142e9(0x2ae)],global[_0x4142e9(0x308)][_0x16bd88]=_0x285c11[0x1][_0x4142e9(0x260)];}),await sleep(0x3c*0x3e8);}catch(_0x45c457){if(!exchangeStopped)await handleError(_0x45c457,_0xf82590(0x2db),_0x16bd88);}}else await sleep(0x64);}},_0x38101d=async _0x3c8910=>{const _0x52487c=_0x11e229;while(initCycle==_0x3f77f7){if(!botPaused)try{const _0x1c0e17=await exchange[_0x52487c(0x258)](_0x3c8910);initCycle==_0x3f77f7&&_0x1c0e17['forEach'](_0xc015d4=>{updateNumberCoinsCcxt(_0xc015d4);});}catch(_0x2e6e1d){if(!exchangeStopped)await handleError(_0x2e6e1d,_0x52487c(0x21b));}else await sleep(0x64);}};_0x3f8a87(_0x10526f),_0x2ee90c(_0x10526f),_0x10526f[_0x11e229(0x2ed)](_0x3823fb=>{_0x4545a9(_0x3823fb),_0x38101d(_0x3823fb);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x342c70=_0x22bd8e;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x240e6c=await getCoins(),[_0x53d315,_0x59c129]=_0x240e6c;let _0x284ad8=[];currentCoins[_0x342c70(0x2ed)](_0x2c94da=>{const _0x3a7221=_0x342c70,_0x20aa82=_0x53d315[_0x3a7221(0x2d2)](_0x2583b0=>_0x2583b0[_0x3a7221(0x272)]==_0x2c94da[_0x3a7221(0x272)]);if(_0x20aa82){if(_0x2c94da[_0x3a7221(0x2d9)]!=_0x20aa82['number']){let _0xb45be0;if(_0x2c94da[_0x3a7221(0x272)]!=config[_0x3a7221(0x2a4)]){const _0x233331=global[_0x3a7221(0x218)][noslash(_0x2c94da['symbol'])];_0xb45be0=_0x2c94da[_0x3a7221(0x299)]?0x1/_0x233331:_0x233331;}else _0xb45be0=0x1;_0x284ad8[_0x3a7221(0x307)]({'coin':_0x2c94da['coin'],'symbol':_0x2c94da['symbol'],'price':_0xb45be0,'number':Number(formatResult(_0x20aa82['number']-_0x2c94da[_0x3a7221(0x2d9)],0x8)),'basecoinvalue':_0xb45be0*(_0x20aa82[_0x3a7221(0x2d9)]-_0x2c94da['number'])});}}});if(_0x284ad8[_0x342c70(0x1dd)]==0x1&&!blockTransactionDetection){if(config[_0x342c70(0x2e8)]){logger[_0x342c70(0x249)](_0x342c70(0x2d4)+_0x284ad8[0x0][_0x342c70(0x1b9)]+_0x342c70(0x2b1)+lastFees[_0x342c70(0x29b)]);if(lastFees['highest']==0x0||Math[_0x342c70(0x2a5)](_0x284ad8[0x0][_0x342c70(0x1b9)])>lastFees[_0x342c70(0x29b)]){delete _0x284ad8[0x0]['symbol'],delete _0x284ad8[0x0][_0x342c70(0x1b9)];let _0x5938cb=[],_0x5aa213=[...config['liquidity']]||[],_0x46c4e6=config[_0x342c70(0x321)];_0x5aa213[_0x342c70(0x309)]((_0xee6d37,_0x4501db)=>_0xee6d37['date']>_0x4501db[_0x342c70(0x196)]?-0x1:_0x4501db[_0x342c70(0x196)]>_0xee6d37[_0x342c70(0x196)]?0x1:0x0);const _0x3fcaf8=getDate();if(_0x5aa213[0x0]){const _0x1c894e=fns[_0x342c70(0x1f4)](_0x5aa213[0x0][_0x342c70(0x196)],_0x342c70(0x274),new Date()),_0x54fc85=fns['parse'](_0x3fcaf8,_0x342c70(0x274),new Date());if(fns[_0x342c70(0x31f)](_0x1c894e,_0x54fc85)){_0x5938cb=_0x5aa213[0x0][_0x342c70(0x322)];const _0x16ed91=_0x5938cb[_0x342c70(0x2d2)](_0x420c9=>_0x420c9[_0x342c70(0x272)]==_0x284ad8[0x0][_0x342c70(0x272)]);_0x16ed91?(_0x16ed91['number']+=_0x284ad8[0x0][_0x342c70(0x2d9)],_0x16ed91[_0x342c70(0x2d9)]==0x0&&(_0x5938cb=_0x5938cb[_0x342c70(0x1a0)](_0x296133=>{const _0x4c8c9a=_0x342c70;return _0x296133[_0x4c8c9a(0x272)]!=_0x284ad8[0x0][_0x4c8c9a(0x272)];}))):_0x5938cb[_0x342c70(0x307)](_0x284ad8[0x0]);const _0x550670=_0x46c4e6[_0x342c70(0x2d2)](_0x56db18=>_0x56db18[_0x342c70(0x196)]==_0x3fcaf8);_0x550670[_0x342c70(0x322)]=_0x5938cb;}else _0x46c4e6[_0x342c70(0x307)]({'date':_0x3fcaf8,'changes':[_0x284ad8[0x0]]});}const _0x42d205=_0x46c4e6[_0x342c70(0x2d2)](_0xd0b41b=>_0xd0b41b[_0x342c70(0x196)]==_0x3fcaf8);if(_0x42d205){let _0x9e59da=!![];_0x42d205['changes'][_0x342c70(0x2ed)](_0x2bbb4b=>{const _0x5e7da7=_0x342c70;if(_0x2bbb4b[_0x5e7da7(0x2d9)]!=0x0)_0x9e59da=![];}),_0x9e59da&&(_0x46c4e6=_0x46c4e6[_0x342c70(0x1a0)](_0x187d59=>{const _0x52888b=_0x342c70;return _0x187d59[_0x52888b(0x196)]!=_0x3fcaf8;}));}let _0xccf749=dbConfig[_0x342c70(0x273)]('bot')[_0x342c70(0x2d2)]({'botID':botID})['value']();_0xccf749&&(dbConfig['get']('bot')[_0x342c70(0x2d2)]({'botID':botID})[_0x342c70(0x1eb)]({'liquidity':_0x46c4e6})[_0x342c70(0x30f)](),config['liquidity']=_0x46c4e6),logHistory(_0x342c70(0x305),_0x342c70(0x270)+Math[_0x342c70(0x2a5)](_0x284ad8[0x0]['number'])+'\x20'+_0x284ad8[0x0]['coin']+'\x20'+(_0x284ad8[0x0][_0x342c70(0x2d9)]>0x0?_0x342c70(0x290):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x342c70(0x2fc),emittedConfiguration());}else logger[_0x342c70(0x249)](_0x342c70(0x217)+Math[_0x342c70(0x2a5)](_0x284ad8[0x0][_0x342c70(0x2d9)])+'\x20'+_0x284ad8[0x0]['coin']+'\x20'+(_0x284ad8[0x0]['number']>0x0?'added':_0x342c70(0x1f0)));transactionDetected=!![];}else logger[_0x342c70(0x249)](_0x342c70(0x270)+Math['abs'](_0x284ad8[0x0][_0x342c70(0x2d9)])+'\x20'+_0x284ad8[0x0][_0x342c70(0x272)]+'\x20'+(_0x284ad8[0x0][_0x342c70(0x2d9)]>0x0?_0x342c70(0x290):_0x342c70(0x1f0))+_0x342c70(0x194));}currentCoins=_0x53d315,currentCoinsAll=_0x59c129,await sleep(watchTransactionsInterval);}catch(_0x280dd3){if(!exchangeStopped)await handleError(_0x280dd3,_0x342c70(0x211));}else await sleep(0x64);}}async function loadSymbols(){const _0x135721=_0x22bd8e;try{markets=await exchange[_0x135721(0x29a)](),allSymbols=[],Object[_0x135721(0x242)](markets)['forEach'](_0x3ba17a=>{const _0x5b8845=_0x135721;_0x3ba17a[0x1][_0x5b8845(0x243)]&&_0x3ba17a[0x1][_0x5b8845(0x1e3)]&&allSymbols[_0x5b8845(0x307)](_0x3ba17a[0x0]);});}catch(_0x1db23a){throw _0x1db23a;}}function validateSymbols(_0x4657ec){const _0x2dbb89=_0x22bd8e;let _0x361bc9=[];return _0x4657ec[_0x2dbb89(0x2ed)](_0x4abba3=>{const _0x1a369c=_0x2dbb89;!allSymbols[_0x1a369c(0x2c7)](_0x4abba3)?logHistory(_0x1a369c(0x2ec),_0x1a369c(0x26d)+_0x4abba3+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x361bc9[_0x1a369c(0x307)](_0x4abba3);}),_0x361bc9;}async function initclient(){const _0x3f3e85=_0x22bd8e;proxyEmit(_0x3f3e85(0x2fc),emittedConfiguration()),proxyEmit(_0x3f3e85(0x279),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3bc7ae=getNormalizedPerformance();emitPerformance(_0x3bc7ae),getStartingBalances(_0x3bc7ae);}async function toggleBotMode(){const _0x3ee946=_0x22bd8e;let _0xc1f618=dbConfig[_0x3ee946(0x273)](_0x3ee946(0x25d))['find']({'botID':botID})[_0x3ee946(0x1b4)]();if(_0xc1f618){const _0x34979a=!_0xc1f618[_0x3ee946(0x2a3)];dbConfig['get'](_0x3ee946(0x25d))[_0x3ee946(0x2d2)]({'botID':botID})[_0x3ee946(0x1eb)]({'headless':_0x34979a})[_0x3ee946(0x30f)](),config['headless']=_0x34979a,proxyEmit(_0x3ee946(0x2fc),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x276e9f=_0x22bd8e;process[_0x276e9f(0x22b)]({'updatebotmanager':!![]},_0x568644=>{}),logger['debug']('Headless:\x20'+config[_0x276e9f(0x2a3)]);}async function loadCoins(_0x1d06f0){const _0x446b41=_0x22bd8e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x49bd13,_0x2f7fe0=0x0,_0x9f7abf=0x0;_0x1d06f0['forEach'](_0x4d07f8=>{const _0x197bbf=_0xc4b7;loading[_0x197bbf(0x32d)]['push'](_0x4d07f8);}),loadingCanceled=![];let _0x26c8b0=![];while(_0x49bd13!=_0x1d06f0[_0x446b41(0x1dd)]+maxLoadingProgress){_0x49bd13=loadingProgress,_0x1d06f0[_0x446b41(0x2ed)](_0x4a7ebe=>{const _0x236d11=_0x446b41;if(global['ticker'][noslash(_0x4a7ebe)]){loading[_0x236d11(0x32d)]=loading[_0x236d11(0x32d)][_0x236d11(0x1a0)](_0x42fd2d=>_0x42fd2d!=_0x4a7ebe);if(!watchedSymbols[_0x236d11(0x2c7)](_0x4a7ebe))watchedSymbols[_0x236d11(0x307)](_0x4a7ebe);_0x49bd13++;}}),loading[_0x446b41(0x1c3)]=Math[_0x446b41(0x297)](_0x49bd13/(_0x1d06f0[_0x446b41(0x1dd)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x9f7abf>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x9f7abf>0x78*0x5&&!_0x26c8b0&&(_0x26c8b0=!![],logHistory(_0x446b41(0x2ec),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x446b41(0x32d)][_0x446b41(0x26f)](',\x20')+_0x446b41(0x253)),logHistory(_0x446b41(0x2ec),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x446b41(0x28c)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x1e09b6=_0x446b41;process[_0x1e09b6(0x22b)]({'stop':'restart'},_0x4712b2=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x2f7fe0!=loading['progress']&&(_0x2f7fe0=loading[_0x446b41(0x1c3)],emitLoadingProgress()),_0x9f7abf++,await sleep(0xc8);}_0x49bd13==_0x1d06f0['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x446b41(0x1b0),'live':_0x446b41(0x1ea)},_0x466e11=>{}),_0x26c8b0&&logHistory(_0x446b41(0x305),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x45cac1=_0x22bd8e;proxyEmit(_0x45cac1(0x2fc),{...emittedConfiguration(),'configstate':_0x45cac1(0x2fe)});}function emitLoadingProgress(){const _0x6f89a7=_0x22bd8e;proxyEmit(_0x6f89a7(0x2cb),loading);}async function getFiat(){const _0xa7d6f=_0x22bd8e;let _0xfdff68=global['ticker'][stablecoins[_0xa7d6f(0x2e0)][_0xa7d6f(0x272)]],_0xa15ac2=global[_0xa7d6f(0x218)][stablecoins[_0xa7d6f(0x238)][_0xa7d6f(0x272)]];return{'eur':Number(_0xfdff68),'usd':Number(_0xa15ac2)};}function capitalize(_0x92ccd3){const _0x11235b=_0x22bd8e;return _0x92ccd3[_0x11235b(0x1bc)](0x0,0x1)[_0x11235b(0x1a8)]()+_0x92ccd3[_0x11235b(0x1bc)](0x1);}function supportedExchanges(){const _0x1c2140=_0x22bd8e,_0x5a9a39=['ws',_0x1c2140(0x1fe),_0x1c2140(0x245),_0x1c2140(0x1b3),'watchOrders',_0x1c2140(0x2fd),'createOrder',_0x1c2140(0x241),_0x1c2140(0x1d0),'fetchBalance'];let _0x598113=[],_0x433e4e=[],_0x431d6d=ccxt[_0x1c2140(0x29e)][_0x1c2140(0x279)];_0x431d6d[_0x1c2140(0x2ed)](_0x491f78=>{const _0x31b0da=_0x1c2140;try{const _0x5bf74e=new ccxt[(_0x31b0da(0x29e))][_0x491f78]();_0x433e4e[_0x31b0da(0x307)](_0x5bf74e);}catch(_0x3d0aba){}}),_0x433e4e[_0x1c2140(0x2ed)](_0xf485b1=>{const _0xf8c872=_0x1c2140;let _0x196452=0x0;_0x5a9a39[_0xf8c872(0x2ed)](_0x5638f7=>{_0x5638f7 in _0xf485b1['has']&&_0xf485b1['has'][_0x5638f7]&&_0x196452++;}),_0x196452==_0x5a9a39[_0xf8c872(0x1dd)]&&_0x598113[_0xf8c872(0x307)](capitalize(_0xf485b1['id']));});let _0x5f5953=[];return _0x431d6d['forEach'](_0x41916f=>{_0x41916f=capitalize(_0x41916f);if(!_0x598113['includes'](_0x41916f))_0x5f5953['push'](_0x41916f);}),_0x598113;}function setStartDatePerformance(){const _0x19c1ad=_0x22bd8e;if(config&&config[_0x19c1ad(0x321)][0x0][_0x19c1ad(0x322)][_0x19c1ad(0x1dd)]!=0x0){const _0x2ea649=config[_0x19c1ad(0x321)][0x0][_0x19c1ad(0x322)];dbPerformance[_0x19c1ad(0x273)](_0x19c1ad(0x1d5))[_0x19c1ad(0x2d2)]({'date':config[_0x19c1ad(0x28d)]})['assign']({'coins':_0x2ea649})['write']();}}async function recreateCoinResults(){const _0x34e49e=_0x22bd8e;let _0x33e9e1,_0x514c93=[];try{const _0x13ecb9=fns[_0x34e49e(0x1c1)](fns[_0x34e49e(0x316)](config[_0x34e49e(0x28d)][_0x34e49e(0x264)](/\//g,'-')),_0x34e49e(0x19c));for(const _0x38ff99 of currentCoins){if(_0x38ff99[_0x34e49e(0x272)]!=config[_0x34e49e(0x2a4)]){let _0x18a7c6=0x0,_0x170891,_0x56fcc0;_0x33e9e1=await getAllEventOrders(_0x38ff99[_0x34e49e(0x2ae)]);if(_0x33e9e1[_0x34e49e(0x1dd)]>0x0)_0x33e9e1['forEach'](_0xe83fbf=>{const _0x5915ab=_0x34e49e,_0x644312=_0x38ff99[_0x5915ab(0x2ae)]['includes'](config[_0x5915ab(0x2a4)]+'/');_0x514c93[_0x5915ab(0x307)]({'datetime':_0xe83fbf[_0x5915ab(0x268)],'coin':_0x38ff99[_0x5915ab(0x272)],'symbol':_0x38ff99[_0x5915ab(0x2ae)],'side':_0xe83fbf['side'],'reverse':_0x644312,'amount':formatResult(_0xe83fbf['filled'],0x8),'filled':formatResult(_0xe83fbf[_0x5915ab(0x247)],0x8),'price':formatResult(_0xe83fbf[_0x5915ab(0x228)],0x8)}),_0x18a7c6=_0xe83fbf[_0x5915ab(0x29d)]==_0x5915ab(0x235)?_0x18a7c6+_0xe83fbf[_0x5915ab(0x247)]:_0x18a7c6-_0xe83fbf[_0x5915ab(0x247)];if(!_0x56fcc0)_0x56fcc0=_0xe83fbf[_0x5915ab(0x228)];});_0x170891=_0x38ff99[_0x34e49e(0x2d9)]-_0x18a7c6;let _0x2d86f8;config['liquidity'][_0x34e49e(0x2ed)](_0x3b38ad=>{const _0x29f595=_0x34e49e;!_0x2d86f8&&(_0x2d86f8=_0x3b38ad[_0x29f595(0x322)][_0x29f595(0x2d2)](_0x98ebb=>_0x98ebb['coin']==_0x38ff99[_0x29f595(0x272)]),_0x2d86f8&&(_0x170891=_0x2d86f8[_0x29f595(0x2d9)],_0x56fcc0=_0x2d86f8[_0x29f595(0x228)]));});let _0xd9d7bf=dbCoinResults[_0x34e49e(0x273)](_0x34e49e(0x2b7))[_0x34e49e(0x2d2)]({'coin':_0x38ff99[_0x34e49e(0x272)]})[_0x34e49e(0x1b4)]();_0xd9d7bf={'coin':_0x38ff99[_0x34e49e(0x272)],'number':_0x170891,'breakeven':_0x56fcc0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x34e49e(0x273)](_0x34e49e(0x2b7))['find']({'coin':_0x38ff99['coin']})[_0x34e49e(0x1eb)](_0xd9d7bf)['write']();}}_0x514c93[_0x34e49e(0x309)]((_0x3e586c,_0x38277e)=>_0x3e586c['datetime']>_0x38277e[_0x34e49e(0x268)]?0x1:_0x38277e[_0x34e49e(0x268)]>_0x3e586c[_0x34e49e(0x268)]?-0x1:0x0);let _0xca2db0=0x0;for(let _0x5bf7e5 of _0x514c93){await updateCoinResults(_0x5bf7e5,!![]);}}catch(_0x4b5c53){await handleError(_0x4b5c53,_0x34e49e(0x220));}}async function getAllEventOrders(_0x10d33f){const _0x334757=_0x22bd8e;let _0x334b02=[],_0x5ab644=dbLogs[_0x334757(0x273)](_0x334757(0x2e9))[_0x334757(0x1a0)](_0x4164ac=>{const _0x42c463=_0x334757,_0x369b00=_0x4164ac['event'][_0x42c463(0x25c)]();return _0x369b00[_0x42c463(0x2c7)](_0x10d33f[_0x42c463(0x25c)]())&&(_0x369b00[_0x42c463(0x2c7)](_0x42c463(0x30e))&&_0x369b00['includes']('order')||_0x369b00['includes'](_0x42c463(0x247))&&_0x369b00['includes'](_0x42c463(0x195)));})[_0x334757(0x2e1)]('time')[_0x334757(0x1b4)]();return _0x5ab644[_0x334757(0x2ed)](_0x2516c3=>{const _0xa5bd9c=_0x334757,_0x15a1bd=_0x2516c3['event'][_0xa5bd9c(0x2c7)](_0xa5bd9c(0x1b7))?_0xa5bd9c(0x1b7):'buy',_0x4d5e90=/#([0-9]|\.)+\s/i,_0xdda1aa=Number(_0x4d5e90['exec'](_0x2516c3[_0xa5bd9c(0x2de)])[0x0]['slice'](0x1)),_0x1563c1=/@([0-9]|\.)+$/i,_0x4bd66c=Number(_0x1563c1[_0xa5bd9c(0x201)](_0x2516c3[_0xa5bd9c(0x2de)])[0x0]['slice'](0x1));_0x334b02['push']({'datetime':_0x2516c3['time'],'coin':symbolToCoin(_0x10d33f),'symbol':_0x10d33f,'side':_0x15a1bd,'amount':_0xdda1aa,'filled':_0xdda1aa,'price':_0x4bd66c});}),_0x334b02;}async function getAllOrders(_0x20d173,_0xd9ef52){const _0x24de50=_0x22bd8e;let _0x3ab310=[];while(_0xd9ef52<exchange[_0x24de50(0x312)]()){const _0x5eb2bc=0x1f4;try{const _0x9920ec=await exchange['fetchClosedOrders'](_0x20d173,_0xd9ef52,_0x5eb2bc);if(_0x9920ec[_0x24de50(0x1dd)])_0xd9ef52=_0x9920ec[_0x9920ec[_0x24de50(0x1dd)]-0x1][_0x24de50(0x2a2)]+0x1,_0x3ab310=_0x3ab310[_0x24de50(0x2aa)](_0x9920ec);else break;}catch(_0x1d0081){await handleError(_0x1d0081,_0x24de50(0x281),_0x20d173);}}return _0x3ab310;}async function validate24hChanges(){const _0x1925ca=_0x22bd8e;for(const _0x3d2c29 of currentCoins){if(_0x3d2c29[_0x1925ca(0x272)]!=config[_0x1925ca(0x2a4)]){let _0x502bd2;_0x3d2c29[_0x1925ca(0x299)]?_0x502bd2=formatResult((0x1/(global[_0x1925ca(0x308)][noslash(_0x3d2c29[_0x1925ca(0x2ae)])]/0x64+0x1)-0x1)*0x64,0x3):_0x502bd2=global[_0x1925ca(0x308)][noslash(_0x3d2c29[_0x1925ca(0x2ae)])],_0x502bd2<config['change24h']&&(logHistory(_0x1925ca(0x2ec),_0x3d2c29[_0x1925ca(0x272)]+_0x1925ca(0x27e)+_0x502bd2+'%'),logHistory('error',_0x1925ca(0x1b5)),logHistory(_0x1925ca(0x2ec),_0x1925ca(0x216)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2aec6c,_0x6bdf73){const _0x5a29e3=_0x22bd8e;if(!_0x2aec6c)return!![];const _0x279af1=_0x6bdf73[_0x5a29e3(0x19a)]('.'),_0x56e073=_0x2aec6c['split']('.');for(var _0x332262=0x0;_0x332262<_0x56e073[_0x5a29e3(0x1dd)];_0x332262++){const _0x358be5=~~_0x56e073[_0x332262],_0x372906=~~_0x279af1[_0x332262];if(_0x358be5<_0x372906)return!![];if(_0x358be5>_0x372906)return![];}return![];}async function oneTimeMigration(){const _0x3e3bb6=_0x22bd8e;let _0x4ab65=dbLogs[_0x3e3bb6(0x273)]('version')['value']();if(isOlderVersion(_0x4ab65,_0x3e3bb6(0x320))){let _0x3a2188=[];const _0x33223b=dbLogs['get'](_0x3e3bb6(0x2e9))['value']();_0x33223b[_0x3e3bb6(0x2ed)](_0x3b4bcd=>{const _0x76b794=_0x3e3bb6;_0x3a2188[_0x76b794(0x307)]({'time':_0x3b4bcd[_0x76b794(0x2f9)],'type':_0x3b4bcd[_0x76b794(0x288)],'event':_0x3b4bcd[_0x76b794(0x2de)]});}),dbLogs[_0x3e3bb6(0x273)](_0x3e3bb6(0x2e9))[_0x3e3bb6(0x1eb)](_0x3a2188)['write']();}let _0x38d8f5=dbConfig[_0x3e3bb6(0x273)](_0x3e3bb6(0x2ba))[_0x3e3bb6(0x1b4)]();if(isOlderVersion(_0x38d8f5,_0x3e3bb6(0x320))){let _0x68001d=dbConfig[_0x3e3bb6(0x273)](_0x3e3bb6(0x25d))['find']({'botID':botID})[_0x3e3bb6(0x1b4)]();if(_0x68001d){let _0x101326=[];_0x68001d[_0x3e3bb6(0x1a3)][_0x3e3bb6(0x2ed)](_0x143d8e=>{const _0x21f908=_0x3e3bb6;_0x101326[_0x21f908(0x307)]({'coin':_0x143d8e[_0x21f908(0x272)],'number':_0x143d8e['startnumber'],'price':_0x143d8e[_0x21f908(0x2c1)]}),delete _0x143d8e['startnumber'],delete _0x143d8e[_0x21f908(0x2c1)];});if(_0x101326['length']!==0x0)fs['writeFile'](configbackuppath+(_0x3e3bb6(0x1ba)+botID+_0x3e3bb6(0x1f1)),JSON[_0x3e3bb6(0x2f3)](_0x101326,null,0x4),function(_0x4a927a){if(_0x4a927a){}});const _0x39221f=(_0x213f5d,_0x28e3f6)=>{const _0x44cfea=_0x3e3bb6;let _0xa0ceaa=[];_0x28e3f6[_0x44cfea(0x2ed)](_0x40dd24=>{const _0x4233f6=_0x44cfea,_0x5eda02=_0x213f5d[_0x4233f6(0x2d2)](_0xc18b77=>_0xc18b77[_0x4233f6(0x272)]==_0x40dd24[_0x4233f6(0x272)]);if(!_0x5eda02)_0xa0ceaa['push'](_0x40dd24);});let _0x840662=[];return _0x213f5d[_0x44cfea(0x2ed)](_0x4be1e9=>{const _0x58f542=_0x44cfea,_0x51483e=_0x28e3f6['find'](_0x584ee7=>_0x584ee7[_0x58f542(0x272)]==_0x4be1e9[_0x58f542(0x272)]);if(!_0x51483e||_0x51483e[_0x58f542(0x2d9)]==0x0&&_0x4be1e9[_0x58f542(0x2d9)]!=0x0)_0x840662[_0x58f542(0x307)](_0x4be1e9);}),{'missingDay1':_0xa0ceaa,'notInDay2':_0x840662};},_0x42dc7c=dbPerformance['get'](_0x3e3bb6(0x1d5))[_0x3e3bb6(0x224)]()['value']();if(_0x42dc7c[_0x3e3bb6(0x1dd)]>0x1){const {missingDay1:_0xa02f70,notInDay2:_0x2ab508}=_0x39221f(_0x101326,_0x42dc7c[0x1]['coins']);_0x101326=[..._0x101326,..._0xa02f70],_0x2ab508[_0x3e3bb6(0x2ed)](_0x1ae799=>{const _0x5e4937=_0x3e3bb6;let _0x3ea2a6=_0x101326[_0x5e4937(0x2ca)](_0x5766de=>_0x5766de[_0x5e4937(0x272)]==_0x1ae799[_0x5e4937(0x272)]);_0x3ea2a6!=-0x1&&_0x101326['splice'](_0x3ea2a6,0x1);});}_0x101326['sort']((_0x456601,_0x1f1b2f)=>_0x456601[_0x3e3bb6(0x272)]>_0x1f1b2f[_0x3e3bb6(0x272)]?0x1:_0x1f1b2f[_0x3e3bb6(0x272)]>_0x456601[_0x3e3bb6(0x272)]?-0x1:0x0);let _0x368d77=[{'date':_0x68001d[_0x3e3bb6(0x28d)],'changes':_0x101326}];_0x42dc7c[_0x3e3bb6(0x1dd)]>0x2&&_0x42dc7c[_0x3e3bb6(0x2ed)]((_0x283604,_0x306971)=>{const _0x1f1f5=_0x3e3bb6;if(_0x306971>0x0&&_0x306971<_0x42dc7c[_0x1f1f5(0x1dd)]-0x1){const {missingDay1:_0x3b5947,notInDay2:_0x384a15}=_0x39221f(_0x42dc7c[_0x306971][_0x1f1f5(0x2b7)],_0x42dc7c[_0x306971+0x1][_0x1f1f5(0x2b7)]);_0x101326=[],(_0x3b5947[_0x1f1f5(0x1dd)]!=0x0||_0x384a15[_0x1f1f5(0x1dd)]!=0x0)&&(_0x3b5947['length']!=0x0&&_0x101326[_0x1f1f5(0x307)](..._0x3b5947),_0x384a15['length']!=0x0&&(_0x384a15[_0x1f1f5(0x2ed)](_0x7f925c=>{const _0x1bf956=_0x1f1f5;_0x7f925c[_0x1bf956(0x2d9)]=-_0x7f925c[_0x1bf956(0x2d9)];}),_0x101326[_0x1f1f5(0x307)](..._0x384a15)),_0x101326['sort']((_0x1a1be0,_0xd0c214)=>_0x1a1be0['coin']>_0xd0c214[_0x1f1f5(0x272)]?0x1:_0xd0c214[_0x1f1f5(0x272)]>_0x1a1be0[_0x1f1f5(0x272)]?-0x1:0x0),_0x368d77['push']({'date':_0x42dc7c[_0x306971+0x1][_0x1f1f5(0x196)],'changes':_0x101326}));}}),dbConfig[_0x3e3bb6(0x273)](_0x3e3bb6(0x25d))[_0x3e3bb6(0x2d2)]({'botID':botID})[_0x3e3bb6(0x1eb)]({..._0x68001d,'liquidity':_0x368d77})['write']();}}if(isOlderVersion(_0x38d8f5,_0x3e3bb6(0x1ce))){let _0x1472d7=dbConfig[_0x3e3bb6(0x273)](_0x3e3bb6(0x25d))['find']({'botID':botID})[_0x3e3bb6(0x1b4)]();if(_0x1472d7){const _0x11d1df=_0x1472d7[_0x3e3bb6(0x31e)],_0x32d95e=_0x11d1df?capitalize(_0x11d1df):_0x3e3bb6(0x198);dbConfig[_0x3e3bb6(0x273)](_0x3e3bb6(0x25d))[_0x3e3bb6(0x2d2)]({'botID':botID})[_0x3e3bb6(0x1eb)]({'exchange':_0x32d95e})[_0x3e3bb6(0x30f)]();}}let _0x3b22eb=dbPerformance['get']('version')[_0x3e3bb6(0x1b4)]();isOlderVersion(_0x3b22eb,_0x3e3bb6(0x320))&&setStartDatePerformance();let _0x485b75=dbCoinResults[_0x3e3bb6(0x273)](_0x3e3bb6(0x2ba))[_0x3e3bb6(0x1b4)]();if(isOlderVersion(_0x485b75,_0x3e3bb6(0x319))){let _0x2452a9=dbCoinResults[_0x3e3bb6(0x273)]('coins')[_0x3e3bb6(0x1b4)]();if(_0x2452a9[_0x3e3bb6(0x1dd)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5eb8f4=_0x22bd8e;dbConfig['set'](_0x5eb8f4(0x2ba),serverversion)['write'](),dbPerformance['set']('version',serverversion)['write'](),dbLogs[_0x5eb8f4(0x2e6)]('version',serverversion)[_0x5eb8f4(0x30f)](),dbCoinResults[_0x5eb8f4(0x2e6)](_0x5eb8f4(0x2ba),serverversion)['write']();}function getConfiguration(_0x546601){const _0x4fc0db=_0x22bd8e;let _0x24fa1a=dbConfig[_0x4fc0db(0x273)](_0x4fc0db(0x25d))[_0x4fc0db(0x2d2)]({'botID':_0x546601})[_0x4fc0db(0x1b4)]();if(_0x24fa1a){let _0x4f2459=![];typeof _0x24fa1a[_0x4fc0db(0x2b2)]=='string'&&(_0x24fa1a={..._0x24fa1a,'threshold':Number(_0x24fa1a[_0x4fc0db(0x2b2)])},_0x4f2459=!![]),_0x24fa1a[_0x4fc0db(0x2dc)]==undefined&&(_0x24fa1a={..._0x24fa1a,'change24h':-0x14},_0x4f2459=!![]),_0x24fa1a['fiat']==undefined&&(_0x24fa1a={..._0x24fa1a,'fiat':_0x4fc0db(0x25f)},_0x4f2459=!![]),_0x24fa1a[_0x4fc0db(0x255)]==undefined&&(_0x24fa1a={..._0x24fa1a,'onepagemode':settings[_0x4fc0db(0x255)]},_0x4f2459=!![]),_0x24fa1a[_0x4fc0db(0x22f)]==undefined&&(_0x24fa1a={..._0x24fa1a,'colorscheme':_0x4fc0db(0x20a)},_0x4f2459=!![]),_0x24fa1a[_0x4fc0db(0x2e8)]==undefined&&(_0x24fa1a={..._0x24fa1a,'autoliquidity':!![]},_0x4f2459=!![]),_0x4f2459&&(_0x24fa1a={'botID':_0x24fa1a[_0x4fc0db(0x197)],'exchange':_0x24fa1a[_0x4fc0db(0x31e)],'apiKey':_0x24fa1a[_0x4fc0db(0x324)],'apiSecret':_0x24fa1a[_0x4fc0db(0x31a)],'apiPassword':_0x24fa1a[_0x4fc0db(0x2c0)],'basecoin':_0x24fa1a['basecoin'],'botname':_0x24fa1a[_0x4fc0db(0x2af)],'showname':_0x24fa1a[_0x4fc0db(0x328)],'threshold':_0x24fa1a[_0x4fc0db(0x2b2)],'ordertype':_0x24fa1a[_0x4fc0db(0x1a4)],'timeout':_0x24fa1a[_0x4fc0db(0x23e)],'fiat':_0x24fa1a['fiat'],'startdate':_0x24fa1a[_0x4fc0db(0x28d)],'recreate':_0x24fa1a['recreate'],'timeshift':_0x24fa1a[_0x4fc0db(0x2eb)],'onepagemode':_0x24fa1a[_0x4fc0db(0x255)],'headless':_0x24fa1a['headless'],'cooldown':_0x24fa1a['cooldown'],'change24h':_0x24fa1a['change24h'],'emojibuy':_0x24fa1a[_0x4fc0db(0x2f7)],'emojisell':_0x24fa1a[_0x4fc0db(0x213)],'colorscheme':_0x24fa1a[_0x4fc0db(0x22f)],'portfolio':_0x24fa1a[_0x4fc0db(0x1a3)],'autoliquidity':_0x24fa1a['autoliquidity'],'liquidity':_0x24fa1a[_0x4fc0db(0x321)],'openOrders':_0x24fa1a[_0x4fc0db(0x21c)]},dbConfig[_0x4fc0db(0x273)](_0x4fc0db(0x25d))[_0x4fc0db(0x20d)]()[_0x4fc0db(0x30f)](),dbConfig[_0x4fc0db(0x273)](_0x4fc0db(0x25d))[_0x4fc0db(0x307)](_0x24fa1a)[_0x4fc0db(0x30f)]());}else _0x24fa1a={'botID':_0x546601,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4fc0db(0x2fb)+_0x546601,'showname':![],'threshold':0x3,'ordertype':_0x4fc0db(0x30e),'timeout':0x14,'fiat':_0x4fc0db(0x25f),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4fc0db(0x2eb)],'onepagemode':settings[_0x4fc0db(0x255)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4fc0db(0x20a),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x24fa1a;}function emittedConfiguration(){const _0x63032a=_0x22bd8e;let _0x51ab71;if(config['apiKey']=='')_0x51ab71={...config,'configstate':_0x63032a(0x267)};else config[_0x63032a(0x324)]==_0x63032a(0x22d)?_0x51ab71={...config,'configstate':_0x63032a(0x232)}:(_0x51ab71={...config,'apiKey':_0x63032a(0x275),'apiSecret':_0x63032a(0x275)},config[_0x63032a(0x2c0)]&&(_0x51ab71[_0x63032a(0x2c0)]=_0x63032a(0x275)));return _0x51ab71;}function getSettings(){const _0x4877ae=_0x22bd8e;return dbSettings['get'](_0x4877ae(0x1e7))[_0x4877ae(0x1b4)]();}function getSecure(){const _0x2c1504=_0x22bd8e;return dbSecure['get'](_0x2c1504(0x1d2))[_0x2c1504(0x1b4)]()||{};}function updateTimeshift(_0x31d695){const _0x325b7a=_0x22bd8e;let _0x4ac2d5=dbConfig[_0x325b7a(0x273)]('bot')[_0x325b7a(0x2d2)]({'botID':botID})['value']();_0x4ac2d5&&dbConfig['get'](_0x325b7a(0x25d))['find']({'botID':botID})[_0x325b7a(0x1eb)]({'timeshift':_0x31d695})[_0x325b7a(0x30f)](),config[_0x325b7a(0x2eb)]=_0x31d695,proxyEmit(_0x325b7a(0x2fc),emittedConfiguration());}function updateOnepagemode(_0x434829){const _0x37af39=_0x22bd8e;let _0x459c52=dbConfig[_0x37af39(0x273)](_0x37af39(0x25d))[_0x37af39(0x2d2)]({'botID':botID})[_0x37af39(0x1b4)]();_0x459c52&&dbConfig[_0x37af39(0x273)]('bot')[_0x37af39(0x2d2)]({'botID':botID})[_0x37af39(0x1eb)]({'onepagemode':_0x434829})['write'](),config[_0x37af39(0x255)]=_0x434829,proxyEmit(_0x37af39(0x2fc),emittedConfiguration());}async function storeConfiguration(_0x28276d){const _0x82a9ab=_0x22bd8e;logger[_0x82a9ab(0x249)](_0x82a9ab(0x222));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x82a9ab(0x249)](_0x82a9ab(0x1e2));let _0x460ee2=![],_0x4fc027=![],_0x3ba19a=[];_0x28276d['portfolio'][_0x82a9ab(0x2ed)](_0xcbd721=>{const _0x6026ff=_0x82a9ab;if(!_0xcbd721[_0x6026ff(0x1f6)]&&_0xcbd721['coin']!=_0x28276d[_0x6026ff(0x2a4)])_0x3ba19a[_0x6026ff(0x307)](_0xcbd721[_0x6026ff(0x2ae)]);}),_0x3ba19a[_0x82a9ab(0x2ed)](_0x4d7d08=>{const _0x4a47d7=_0x82a9ab,_0x44733a=currentCoins[_0x4a47d7(0x2d2)](_0x4e61b8=>_0x4e61b8[_0x4a47d7(0x2ae)]==_0x4d7d08);!_0x44733a&&(_0x460ee2=!![]);}),currentCoins[_0x82a9ab(0x2ed)](_0x4d96a6=>{const _0x57dd37=_0x82a9ab;if(_0x4d96a6['coin']!=config[_0x57dd37(0x2a4)]){const _0x1a5133=_0x3ba19a['find'](_0x73f574=>_0x73f574==_0x4d96a6[_0x57dd37(0x2ae)]);!_0x1a5133&&(_0x460ee2=!![]);}}),_0x28276d[_0x82a9ab(0x1a3)]['forEach'](_0x41b583=>{const _0x210988=_0x82a9ab,_0x3d0014=config[_0x210988(0x1a3)][_0x210988(0x2d2)](_0x11c131=>_0x11c131[_0x210988(0x272)]==_0x41b583['coin']);if(_0x3d0014&&_0x41b583['offset']!=_0x3d0014[_0x210988(0x315)])_0x4fc027=!![];});let _0x262000=dbConfig['get'](_0x82a9ab(0x25d))[_0x82a9ab(0x2d2)]({'botID':botID})[_0x82a9ab(0x1b4)]();_0x28276d={..._0x28276d,'apiKey':crypt['decrypt'](secure[_0x82a9ab(0x1a7)],_0x28276d[_0x82a9ab(0x324)])['message'],'apiSecret':crypt[_0x82a9ab(0x1e4)](secure[_0x82a9ab(0x1a7)],_0x28276d[_0x82a9ab(0x31a)])['message']};_0x28276d['apiPassword']&&(_0x28276d[_0x82a9ab(0x2c0)]=crypt[_0x82a9ab(0x1e4)](secure[_0x82a9ab(0x1a7)],_0x28276d[_0x82a9ab(0x2c0)])[_0x82a9ab(0x313)]);let _0x54caef=![];if(_0x262000){_0x28276d[_0x82a9ab(0x324)]==_0x82a9ab(0x275)?_0x28276d[_0x82a9ab(0x324)]=config['apiKey']:_0x54caef=!![];_0x28276d['apiSecret']==_0x82a9ab(0x275)?_0x28276d[_0x82a9ab(0x31a)]=config[_0x82a9ab(0x31a)]:_0x54caef=!![];if(_0x28276d['apiPassword']=='************')_0x28276d['apiPassword']=config[_0x82a9ab(0x2c0)];else{if(_0x28276d[_0x82a9ab(0x2c0)])_0x54caef=!![];}dbConfig[_0x82a9ab(0x273)]('bot')[_0x82a9ab(0x2d2)]({'botID':botID})[_0x82a9ab(0x1eb)](_0x28276d)[_0x82a9ab(0x30f)]();}else dbConfig['get'](_0x82a9ab(0x25d))[_0x82a9ab(0x307)](_0x28276d)[_0x82a9ab(0x30f)](),_0x54caef=!![],process['send']({'status':_0x82a9ab(0x1b0),'live':_0x82a9ab(0x1ea)},_0x355fed=>{});process[_0x82a9ab(0x22b)]({'botname':_0x28276d['botname']},_0x58d604=>{}),config={..._0x28276d},updateBotManager(),proxyEmit(_0x82a9ab(0x2e7)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x54caef)await reset(!![]);else _0x460ee2||_0x4fc027?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x82a9ab(0x249)](_0x82a9ab(0x2a1));}async function storeHeadless(_0x1123e6){const _0x18f3bb=_0x22bd8e,_0x32b282={...config,'headless':_0x1123e6[_0x18f3bb(0x2a3)]};let _0x2f25c5=dbConfig[_0x18f3bb(0x273)](_0x18f3bb(0x25d))['find']({'botID':botID})['value']();_0x2f25c5&&dbConfig[_0x18f3bb(0x273)](_0x18f3bb(0x25d))['find']({'botID':botID})[_0x18f3bb(0x1eb)](_0x32b282)[_0x18f3bb(0x30f)](),config={..._0x32b282},updateBotManager(),proxyEmit(_0x18f3bb(0x2fc),emittedConfiguration());}async function storeFiat(_0xdea01d){const _0x174c64=_0x22bd8e,_0x10d69b={...config,'fiat':_0xdea01d};let _0x2ffcf4=dbConfig['get'](_0x174c64(0x25d))['find']({'botID':botID})[_0x174c64(0x1b4)]();_0x2ffcf4&&dbConfig[_0x174c64(0x273)](_0x174c64(0x25d))[_0x174c64(0x2d2)]({'botID':botID})[_0x174c64(0x1eb)](_0x10d69b)['write'](),config={..._0x10d69b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x144494=_0x22bd8e;logger[_0x144494(0x1d7)](_0x144494(0x24f));try{if(fs['existsSync'](path[_0x144494(0x26f)](configpath,_0x144494(0x306)+botID+_0x144494(0x1c6))))fs[_0x144494(0x1a1)](path['join'](configpath,_0x144494(0x306)+botID+_0x144494(0x1c6)));if(fs[_0x144494(0x278)](path['join'](configpath,_0x144494(0x306)+botID+_0x144494(0x2c2))))fs[_0x144494(0x1a1)](path[_0x144494(0x26f)](configpath,_0x144494(0x306)+botID+_0x144494(0x2c2)));if(fs[_0x144494(0x278)](path[_0x144494(0x26f)](configpath,'bot-'+botID+_0x144494(0x303))))fs[_0x144494(0x1a1)](path[_0x144494(0x26f)](configpath,_0x144494(0x306)+botID+_0x144494(0x303)));}catch(_0x3326c9){if(_0x3326c9)logger[_0x144494(0x1d7)](_0x144494(0x1c8),_0x3326c9);}const _0x1fee82=getDate();let _0x425f2c=[];currentCoins[_0x144494(0x2ed)](_0x40f6b1=>{const _0x4260bf=_0x144494;_0x425f2c[_0x4260bf(0x307)]({'coin':_0x40f6b1[_0x4260bf(0x272)],'number':_0x40f6b1[_0x4260bf(0x2d9)],'price':_0x40f6b1[_0x4260bf(0x28b)]});});let _0x35413a=dbConfig[_0x144494(0x273)](_0x144494(0x25d))['find']({'botID':botID})[_0x144494(0x1b4)]();_0x35413a&&(dbConfig['get']('bot')[_0x144494(0x2d2)]({'botID':botID})[_0x144494(0x1eb)]({'liquidity':[{'date':_0x1fee82,'changes':_0x425f2c}]})[_0x144494(0x30f)](),config[_0x144494(0x321)]=[]),process[_0x144494(0x22b)]({'stop':_0x144494(0x28e)},_0x54dbe7=>{});}function noslash(_0x4dd3d0){const _0x4188f8=_0x22bd8e;return _0x4dd3d0[_0x4188f8(0x264)]('/','');}function updateHighestFee(_0x6f4fe3){const _0x1bc1cb=_0x22bd8e;if(_0x6f4fe3[_0x1bc1cb(0x299)]){let _0x1e46ce={'filled':_0x6f4fe3[_0x1bc1cb(0x247)]*_0x6f4fe3[_0x1bc1cb(0x228)],'amount':_0x6f4fe3['filled']*_0x6f4fe3[_0x1bc1cb(0x228)],'side':_0x6f4fe3[_0x1bc1cb(0x29d)]==_0x1bc1cb(0x1b7)?_0x1bc1cb(0x235):'sell','price':0x1/_0x6f4fe3['price']};_0x6f4fe3={..._0x6f4fe3,..._0x1e46ce};}const _0x48d077=defaultFee*_0x6f4fe3[_0x1bc1cb(0x247)]*_0x6f4fe3['price'];lastFees['recent20'][_0x1bc1cb(0x1dd)]===0x14&&lastFees['recent20'][_0x1bc1cb(0x327)](),lastFees[_0x1bc1cb(0x1ec)][_0x1bc1cb(0x307)](_0x48d077),lastFees[_0x1bc1cb(0x29b)]=Math[_0x1bc1cb(0x2c6)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x33ceae){const _0x4fcf2e=_0x22bd8e;logger[_0x4fcf2e(0x249)](_0x4fcf2e(0x26e)+_0x33ceae[_0x4fcf2e(0x2ae)]+'\x20|\x20'+_0x33ceae['status']+_0x4fcf2e(0x226)+_0x33ceae[_0x4fcf2e(0x247)]+_0x4fcf2e(0x1d3)+_0x33ceae['amount']+_0x4fcf2e(0x226)+_0x33ceae['id']);let _0xd83a66=_0x33ceae[_0x4fcf2e(0x1ab)],_0x49372f=![];currentCoins[_0x4fcf2e(0x2ed)](_0x5f92e6=>{const _0x256a52=_0x4fcf2e;_0x5f92e6[_0x256a52(0x2ae)]==_0x33ceae[_0x256a52(0x2ae)]&&(_0x49372f=!![]);});if(!_0x49372f)return;const _0x5cec21=currentCoins['find'](_0x369d23=>_0x369d23[_0x4fcf2e(0x2ae)]==_0x33ceae['symbol']),_0x4fac70=_0x2f0870=>{if(_0x5cec21)_0x5cec21['orderstatus']=_0x2f0870;};if(_0xd83a66==_0x4fcf2e(0x230))_0x4fac70(_0x4fcf2e(0x230));else{if(_0xd83a66=='canceled'){_0x4fac70(_0x4fcf2e(0x282));const _0x44bdd7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x44bdd7,await getOpenOrders(),handleOpenOrders();}else{if(_0xd83a66==_0x4fcf2e(0x2cc)){let _0x6745a0=![];if(lastOrders)for(const _0x4c2dfc of lastOrders){const _0x171cda=0xc8,_0x4b4edc=0x1388;let _0x5f8f01=0x0;while(!_0x4c2dfc[_0x4fcf2e(0x2ce)]&&_0x5f8f01*_0x171cda<_0x4b4edc){_0x5f8f01++,await sleep(_0x171cda);}if(_0x5f8f01>0x0)logger[_0x4fcf2e(0x249)](_0x4fcf2e(0x265)+_0x5f8f01*_0x171cda/0x3e8+_0x4fcf2e(0x210));if(_0x4c2dfc[_0x4fcf2e(0x2ce)]==_0x33ceae['id']){logger['debug'](_0x4fcf2e(0x212)+_0x33ceae['id']),_0x6745a0=!![];if(_0x4c2dfc['filled']==0x0){logger[_0x4fcf2e(0x249)](_0x4fcf2e(0x30d)+_0x33ceae['id']);if(_0x33ceae['average'])_0x4c2dfc[_0x4fcf2e(0x228)]=_0x33ceae['average'];else{if(_0x33ceae[_0x4fcf2e(0x228)])_0x4c2dfc[_0x4fcf2e(0x228)]=_0x33ceae[_0x4fcf2e(0x228)];else{}}_0x4c2dfc[_0x4fcf2e(0x247)]=_0x33ceae[_0x4fcf2e(0x247)],updateHighestFee(_0x4c2dfc),_0x4fac70(_0x4fcf2e(0x247)),await validateOrders();if(lockOrders==ORDERS[_0x4fcf2e(0x1c5)]){const _0x1540b4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1540b4;}_0x4c2dfc[_0x4fcf2e(0x1cc)]={'currency':_0x33ceae[_0x4fcf2e(0x1cc)]?_0x33ceae[_0x4fcf2e(0x1cc)][_0x4fcf2e(0x1f3)]:null,'cost':_0x33ceae[_0x4fcf2e(0x1cc)]?_0x33ceae[_0x4fcf2e(0x1cc)][_0x4fcf2e(0x262)]:0x0},await updateCoinResults(_0x4c2dfc);}}}if(!_0x6745a0){logger[_0x4fcf2e(0x249)](_0x4fcf2e(0x1d6)+_0x33ceae['id']),_0x4fac70(_0x4fcf2e(0x247));const _0x1f9006=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1f9006,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x6a4fdf=JSON[_0x4fcf2e(0x1f4)](lastBalances[_0x4fcf2e(0x1a3)]);const _0x1eab36=_0x6a4fdf['find'](_0x52dc0d=>_0x52dc0d[_0x4fcf2e(0x2ae)]==_0x33ceae[_0x4fcf2e(0x2ae)]);if(_0x1eab36){if(_0xd83a66==_0x4fcf2e(0x230))_0x1eab36['orderstatus']=_0x1eab36['orderstatus']=='filled'?_0x4fcf2e(0x247):_0x4fcf2e(0x230);else{if(_0xd83a66==_0x4fcf2e(0x282))_0x1eab36[_0x4fcf2e(0x1b2)]=_0x1eab36[_0x4fcf2e(0x1b2)]=='filled'?_0x4fcf2e(0x247):'canceled';else _0xd83a66==_0x4fcf2e(0x2cc)&&(_0x1eab36[_0x4fcf2e(0x1b2)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x4fcf2e(0x2f3)](_0x6a4fdf)},proxyEmit(_0x4fcf2e(0x19e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x35d98e=![];currentCoins['forEach'](_0x137bc5=>{const _0x34fc6b=_0xc4b7;_0x35d98e=allOpenOrders['find'](_0x11b6e=>_0x11b6e['symbol']==_0x137bc5[_0x34fc6b(0x2ae)]),_0x137bc5[_0x34fc6b(0x1b2)]=_0x35d98e?_0x34fc6b(0x230):_0x34fc6b(0x2a6);});}async function getCoins(_0x5b1a4d=0x0,_0x4f383a=!![],_0x91a01c=config[_0x22bd8e(0x2a4)]){const _0xcb2ef=_0x22bd8e;let _0xa63265,_0x30f3b4=[],_0x357789=[],_0xc7f2f8=[];if(_0x5b1a4d)await sleep(_0x5b1a4d);if(botPaused)return[currentCoins,currentCoinsAll];try{_0xa63265=await exchange[_0xcb2ef(0x193)](),mybalances=_0xa63265[_0xcb2ef(0x27f)];for(const [_0x14f25d,_0x516cf3]of Object['entries'](mybalances)){_0xc7f2f8['push'](_0x14f25d);}config[_0xcb2ef(0x1a3)][_0xcb2ef(0x2ed)](_0x472479=>{const _0x361d53=_0xcb2ef;!_0xc7f2f8[_0x361d53(0x2c7)](_0x472479[_0x361d53(0x272)])&&(mybalances[_0x472479[_0x361d53(0x272)]]=0x0);});if(_0x91a01c=='')for(const [_0x902abb,_0x33cdd0]of Object[_0xcb2ef(0x242)](mybalances)){_0x33cdd0!=0x0&&_0x30f3b4[_0xcb2ef(0x307)]({'coin':_0x902abb});}else{let _0x23d19c=![];for(const [_0x2d3507,_0x485fca]of Object['entries'](mybalances)){const _0x47c44c=config[_0xcb2ef(0x1a3)]['find'](_0x484253=>_0x484253['coin']==_0x2d3507),_0x642840=_0x2d3507+'/'+_0x91a01c,_0x278622=_0x91a01c+'/'+_0x2d3507,_0x5dad87=currentCoins['find'](_0x15faf8=>_0x15faf8[_0xcb2ef(0x272)]==_0x2d3507);_0x23d19c=![];if((_0x485fca!=0x0||_0x47c44c)&&(allSymbols[_0xcb2ef(0x2c7)](_0x642840)||_0x2d3507==_0x91a01c))_0x30f3b4[_0xcb2ef(0x307)]({'coin':_0x2d3507,'symbol':_0x642840,'reverse':![],'number':Math['max'](_0x485fca+(_0x47c44c&&_0x47c44c[_0xcb2ef(0x315)]||0x0),0x0),'orderstatus':_0x5dad87?_0x5dad87[_0xcb2ef(0x1b2)]:'none'});else{if((_0x485fca!=0x0||_0x47c44c)&&allSymbols[_0xcb2ef(0x2c7)](_0x278622))_0x30f3b4[_0xcb2ef(0x307)]({'coin':_0x2d3507,'symbol':_0x278622,'reverse':!![],'number':Math[_0xcb2ef(0x2c6)](_0x485fca+(_0x47c44c&&_0x47c44c[_0xcb2ef(0x315)]||0x0),0x0),'orderstatus':_0x5dad87?_0x5dad87[_0xcb2ef(0x1b2)]:_0xcb2ef(0x2a6)});else _0x47c44c&&_0x30f3b4[_0xcb2ef(0x307)]({'coin':_0x47c44c[_0xcb2ef(0x272)],'symbol':_0x47c44c[_0xcb2ef(0x2ae)],'reverse':_0x47c44c[_0xcb2ef(0x299)],'number':0x0,'orderstatus':'none'});}}}}catch(_0xa5b5f0){if(!_0x4f383a)handleErrorNoStop(_0xa5b5f0,_0xcb2ef(0x2ea));else await handleError(_0xa5b5f0,_0xcb2ef(0x2ea));}return _0x357789=cloneDeep(_0x30f3b4),_0x30f3b4=_0x30f3b4[_0xcb2ef(0x1a0)](_0x1a1f9a=>{const _0x5314d6=_0xcb2ef,_0x56fab9=config[_0x5314d6(0x1a3)][_0x5314d6(0x2d2)](_0x1d3b66=>_0x1d3b66[_0x5314d6(0x272)]==_0x1a1f9a[_0x5314d6(0x272)]);return _0x56fab9&&!_0x56fab9['excluded'];}),[_0x30f3b4,_0x357789];}async function getCoinNumber(_0x3d2cc7){const _0x3927e1=_0x22bd8e;let _0x45cdad;try{const _0x1d13ed=await exchange[_0x3927e1(0x193)]();_0x45cdad=_0x1d13ed[_0x3927e1(0x27f)][_0x3d2cc7];}catch(_0x10549c){await handleError(_0x10549c,_0x3927e1(0x19d));}return _0x45cdad;}async function getOpenOrders(){const _0x7e07c2=_0x22bd8e;let _0x284943;allOpenOrders=[];try{for(const _0x1d6dac of config['portfolio']){!_0x1d6dac[_0x7e07c2(0x1f6)]&&_0x1d6dac[_0x7e07c2(0x272)]!=config[_0x7e07c2(0x2a4)]&&(_0x284943=await exchange[_0x7e07c2(0x241)](_0x1d6dac[_0x7e07c2(0x2ae)]),_0x284943[_0x7e07c2(0x1dd)]>0x0&&allOpenOrders[_0x7e07c2(0x307)](_0x284943[0x0]));}}catch(_0x5dc433){await handleError(_0x5dc433,'getOpenOrders()');}}async function handleOpenOrders(_0x378a8f=0x0){const _0x538eb8=_0x22bd8e;allOpenOrders[_0x538eb8(0x1dd)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x378a8f==0x0?(logger['debug'](_0x538eb8(0x2a7)),_0x378a8f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x538eb8(0x249)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x538eb8(0x2b8))));}async function testAPI(_0x29ba6d){const _0x544a9e=_0x22bd8e,_0x7b36e2=ccxt[_0x544a9e(0x29e)][_0x29ba6d[_0x544a9e(0x31e)][_0x544a9e(0x25c)]()],_0x49e2ab=new _0x7b36e2({'apiKey':_0x29ba6d[_0x544a9e(0x324)],'secret':_0x29ba6d[_0x544a9e(0x31a)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x29ba6d[_0x544a9e(0x2c0)])_0x49e2ab[_0x544a9e(0x311)]=_0x29ba6d[_0x544a9e(0x2c0)];try{await _0x49e2ab[_0x544a9e(0x29a)]();}catch(_0x263e1f){throw _0x263e1f;}}function cloneDeep(_0x4c75d6){const _0x1e388a=_0x22bd8e;return JSON['parse'](JSON[_0x1e388a(0x2f3)](_0x4c75d6));}async function getPortfolio(_0x299a3d){const _0x16e237=_0x22bd8e;let _0x15b5d9=[],_0x238a12=[],_0x2caade=[],_0x1b15d6;if(_0x299a3d[_0x16e237(0x324)]!==_0x16e237(0x275)||_0x299a3d[_0x16e237(0x31a)]!==_0x16e237(0x275)||_0x299a3d['apiPassword']&&_0x299a3d['apiPassword']!=='************'){if(config[_0x16e237(0x31e)]){if(_0x299a3d[_0x16e237(0x324)]==_0x16e237(0x275))_0x299a3d[_0x16e237(0x324)]=config[_0x16e237(0x324)];if(_0x299a3d[_0x16e237(0x31a)]=='************')_0x299a3d[_0x16e237(0x31a)]=config[_0x16e237(0x31a)];if(_0x299a3d[_0x16e237(0x2c0)]==_0x16e237(0x275))_0x299a3d[_0x16e237(0x2c0)]=config[_0x16e237(0x2c0)];try{await testAPI(_0x299a3d);}catch(_0x663053){if(_0x663053[_0x16e237(0x32c)]()['includes'](_0x16e237(0x23d))){logger[_0x16e237(0x249)](_0x16e237(0x289)),proxyEmit(_0x16e237(0x1a3),![]);return;}else{handleError(_0x663053,'getPortfolio(0)');return;}}}await initExchange(_0x299a3d[_0x16e237(0x31e)],_0x299a3d[_0x16e237(0x324)],_0x299a3d[_0x16e237(0x31a)],_0x299a3d['apiPassword']);try{await loadSymbols();}catch(_0x4c853e){if(_0x4c853e['toString']()[_0x16e237(0x2c7)](_0x16e237(0x23d))){proxyEmit(_0x16e237(0x1a3),![]);return;}else{handleError(_0x4c853e,_0x16e237(0x2bc));return;}}const _0x431f40=await getCoins(0x0,![],_0x299a3d['basecoin']);_0x2caade=cloneDeep(_0x431f40[0x1]);}else _0x2caade=cloneDeep(currentCoinsAll);if(_0x299a3d[_0x16e237(0x2a4)]=='')proxyEmit('portfolio',_0x2caade);else{_0x2caade[_0x16e237(0x2ed)](_0x103378=>{const _0x5ef236=_0x16e237;if(_0x103378['coin']!=_0x299a3d[_0x5ef236(0x2a4)]&&allSymbols[_0x5ef236(0x2c7)](_0x103378['symbol']))_0x15b5d9[_0x5ef236(0x307)](_0x103378['symbol']);});if(_0x15b5d9['length']==0x0)logHistory(_0x16e237(0x2ec),_0x16e237(0x2b5));else{try{_0x238a12=await exchange[_0x16e237(0x1fe)](_0x15b5d9);}catch(_0x149988){if(_0x149988[_0x16e237(0x32c)]()[_0x16e237(0x2c7)]('AuthenticationError')){proxyEmit(_0x16e237(0x1a3),![]);return;}else handleError(_0x149988,_0x16e237(0x298));}_0x2caade[_0x16e237(0x2ed)](_0x3ef708=>{const _0xff3ecf=_0x16e237;_0x3ef708[_0xff3ecf(0x272)]!=_0x299a3d[_0xff3ecf(0x2a4)]?_0x238a12[_0x3ef708['symbol']]?_0x1b15d6=_0x3ef708['reverse']?0x1/_0x238a12[_0x3ef708[_0xff3ecf(0x2ae)]][_0xff3ecf(0x28b)]:_0x238a12[_0x3ef708[_0xff3ecf(0x2ae)]]['last']:_0x1b15d6=0x0:_0x1b15d6=0x1,_0x3ef708[_0xff3ecf(0x228)]=formatResult(_0x1b15d6,0x8);}),proxyEmit(_0x16e237(0x1a3),_0x2caade);}}}function truncateTradeAmount(_0x5ee3ee,_0x2fb803){let _0x52e160=0x0;try{_0x52e160=exchange['amountToPrecision'](_0x5ee3ee,_0x2fb803);}catch(_0x470a3a){}return _0x52e160;}function checkMinimums(_0x4a5c50){const _0x3248e0=_0x22bd8e;let _0x2a90aa=!![];const _0x46a5e0=!_0x4a5c50[_0x3248e0(0x299)]?markets[_0x4a5c50[_0x3248e0(0x2ae)]]['limits'][_0x3248e0(0x2dd)][_0x3248e0(0x239)]:markets[_0x4a5c50['symbol']][_0x3248e0(0x2b6)][_0x3248e0(0x262)][_0x3248e0(0x239)],_0x1b3c72=!_0x4a5c50['reverse']?markets[_0x4a5c50[_0x3248e0(0x2ae)]]['limits'][_0x3248e0(0x262)]['min']:markets[_0x4a5c50[_0x3248e0(0x2ae)]][_0x3248e0(0x2b6)]['amount'][_0x3248e0(0x239)],_0x3ca356=truncateTradeAmount(_0x4a5c50[_0x3248e0(0x2ae)],_0x4a5c50[_0x3248e0(0x2ab)]);_0x4a5c50[_0x3248e0(0x2ab)]=_0x3ca356;if(Math[_0x3248e0(0x2a5)](_0x3ca356)<_0x46a5e0)_0x2a90aa=![];if(Math[_0x3248e0(0x2a5)](_0x3ca356)*_0x4a5c50[_0x3248e0(0x28b)]<_0x1b3c72)_0x2a90aa=![];if(_0x4a5c50[_0x3248e0(0x29d)]==_0x3248e0(0x1b7)){let _0x3e8419=config[_0x3248e0(0x1a3)]['find'](_0x1d6930=>_0x1d6930[_0x3248e0(0x272)]==_0x4a5c50[_0x3248e0(0x272)]);if(_0x3e8419[_0x3248e0(0x315)]>0x0){if(Math[_0x3248e0(0x2a5)](_0x3ca356)>_0x4a5c50[_0x3248e0(0x2d9)]-_0x3e8419[_0x3248e0(0x315)])_0x2a90aa=![];}else{if(Math[_0x3248e0(0x2a5)](_0x3ca356)>_0x4a5c50[_0x3248e0(0x2d9)])_0x2a90aa=![];}}if(_0x4a5c50['side']==_0x3248e0(0x235)){let _0x354026=config[_0x3248e0(0x1a3)][_0x3248e0(0x2d2)](_0x466d99=>_0x466d99[_0x3248e0(0x272)]==config['basecoin']),_0x415278=currentCoins[_0x3248e0(0x2d2)](_0x47436e=>_0x47436e[_0x3248e0(0x272)]==config[_0x3248e0(0x2a4)]);if(_0x354026[_0x3248e0(0x315)]>0x0){if(Math['abs'](_0x3ca356)*_0x4a5c50[_0x3248e0(0x28b)]>_0x415278['number']-_0x354026[_0x3248e0(0x315)])_0x2a90aa=![];}else{if(Math['abs'](_0x3ca356)*_0x4a5c50[_0x3248e0(0x28b)]>_0x415278[_0x3248e0(0x2d9)])_0x2a90aa=![];}}return _0x2a90aa;}async function getBalances(_0x1a5d9b=!![]){const _0x3639a3=_0x22bd8e;let _0x2aecdf=0x0,_0x3087c2;const _0x4706c8=config[_0x3639a3(0x2b2)];if(config['headless']&&config[_0x3639a3(0x2dc)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x5c3714=>{const _0x5ae311=_0x3639a3;if(_0x5c3714[_0x5ae311(0x272)]!=config[_0x5ae311(0x2a4)]){let _0x2dbdc8=global[_0x5ae311(0x218)][noslash(_0x5c3714['symbol'])];_0x3087c2=_0x5c3714[_0x5ae311(0x299)]?0x1/_0x2dbdc8:_0x2dbdc8;}else _0x3087c2=0x1;let _0x5abf64=_0x5c3714[_0x5ae311(0x2d9)]*_0x3087c2;_0x2aecdf+=_0x5abf64,_0x5c3714[_0x5ae311(0x28b)]=formatResult(Number(_0x3087c2),0x8),_0x5c3714['value']=_0x5abf64;}),currentCoins[_0x3639a3(0x2ed)](_0x369fe8=>{const _0x202451=_0x3639a3;let _0x685ed4=config[_0x202451(0x1a3)][_0x202451(0x2d2)](_0x4406b3=>_0x4406b3['coin']==_0x369fe8[_0x202451(0x272)]),_0x492edd=Number(_0x685ed4[_0x202451(0x2ac)]),_0x4ec803=_0x369fe8[_0x202451(0x1b4)]/_0x2aecdf*0x64,_0x48e1ee=_0x492edd*_0x2aecdf/0x64/_0x369fe8[_0x202451(0x28b)]-_0x369fe8[_0x202451(0x2d9)];_0x369fe8[_0x202451(0x2ac)]=formatResult(_0x4ec803,0x3),_0x369fe8[_0x202451(0x2cf)]=formatResult(_0x492edd,0x3),_0x369fe8['trade']=formatResult(_0x48e1ee,0x8),_0x369fe8['side']='',_0x369fe8[_0x202451(0x263)]=![];if(_0x369fe8[_0x202451(0x272)]!=config[_0x202451(0x2a4)]){if(_0x369fe8['distribution']>_0x492edd)_0x369fe8[_0x202451(0x29d)]=_0x202451(0x1b7),_0x369fe8[_0x202451(0x263)]=checkMinimums(_0x369fe8);else _0x369fe8['distribution']<_0x492edd&&(_0x369fe8['side']=_0x202451(0x235),_0x369fe8['valid']=checkMinimums(_0x369fe8));}_0x369fe8['delta']=_0x369fe8['distribution']/_0x369fe8[_0x202451(0x2cf)]-0x1;if(_0x369fe8['orderstatus']==_0x202451(0x247)||_0x369fe8[_0x202451(0x1b2)]==_0x202451(0x282))_0x369fe8['orderstatus']=_0x202451(0x2a6);}),currentCoins[_0x3639a3(0x309)]((_0x29edb5,_0x408a63)=>_0x29edb5[_0x3639a3(0x1b8)]<_0x408a63[_0x3639a3(0x1b8)]?0x1:_0x408a63['delta']<_0x29edb5['delta']?-0x1:0x0);const _0x16c7f8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x16c7f8['eur'],'usd':_0x16c7f8[_0x3639a3(0x238)],'portfolio':JSON[_0x3639a3(0x2f3)](currentCoins),'threshold':_0x4706c8},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x1a5d9b){if(config[_0x3639a3(0x2a3)])headlessMode({'portfolio':currentCoins,'threshold':_0x4706c8});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4706c8});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1cad23=getNormalizedPerformance();getStartingBalances(_0x1cad23),emitPerformance(_0x1cad23);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x24656d=getNormalizedPerformance();emitPerformance(_0x24656d),getStartingBalances(_0x24656d),logger['debug'](_0x3639a3(0x2b0));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x43f957=_0x22bd8e;if(!lastBalances)return;let _0x19ad4a=[],_0x14e1d0,_0x38e220=JSON[_0x43f957(0x1f4)](lastBalances[_0x43f957(0x1a3)]);_0x38e220[_0x43f957(0x309)]((_0x1ea4b1,_0x2cfa80)=>_0x1ea4b1[_0x43f957(0x272)]>_0x2cfa80[_0x43f957(0x272)]?0x1:_0x2cfa80[_0x43f957(0x272)]>_0x1ea4b1[_0x43f957(0x272)]?-0x1:0x0),_0x38e220['forEach'](_0x221623=>{const _0x58f3d7=_0x43f957;let _0x5757e3={'coin':_0x221623[_0x58f3d7(0x272)],'number':_0x221623[_0x58f3d7(0x2d9)],'price':_0x221623[_0x58f3d7(0x28b)]};_0x19ad4a['push'](_0x5757e3);});const _0x19f7b3=await getFiat();_0x14e1d0={'date':lastBalances['time'][_0x43f957(0x19a)]('\x20')[0x0],'eur':_0x19f7b3['eur'],'usd':_0x19f7b3['usd'],'coins':_0x19ad4a};let _0x3a72c5=dbPerformance['get'](_0x43f957(0x1d5))[_0x43f957(0x2d2)]({'date':_0x14e1d0[_0x43f957(0x196)]})[_0x43f957(0x1b4)]();_0x3a72c5?_0x14e1d0[_0x43f957(0x196)]!=config['startdate']&&dbPerformance[_0x43f957(0x273)]('data')[_0x43f957(0x2d2)]({'date':_0x14e1d0[_0x43f957(0x196)]})[_0x43f957(0x1eb)](_0x14e1d0)['write']():dbPerformance[_0x43f957(0x273)](_0x43f957(0x1d5))[_0x43f957(0x307)](_0x14e1d0)[_0x43f957(0x30f)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1b00ca=_0x22bd8e;let _0x1deb83=[];if(dbPerformance[_0x1b00ca(0x29c)](_0x1b00ca(0x1d5))[_0x1b00ca(0x1b4)]()){let _0xdd0266=dbPerformance[_0x1b00ca(0x273)](_0x1b00ca(0x1d5))[_0x1b00ca(0x224)]()[_0x1b00ca(0x1a0)](_0x3712f7=>{const _0x3575aa=_0x1b00ca;if(_0x3712f7[_0x3575aa(0x2b7)][_0x3575aa(0x1dd)]==0x0)return![];else return!![];})[_0x1b00ca(0x2e1)]('date')[_0x1b00ca(0x1b4)](),_0x5bcdb7=[...config[_0x1b00ca(0x321)]];_0x5bcdb7[_0x1b00ca(0x309)]((_0x3a3b69,_0x3005ba)=>_0x3a3b69[_0x1b00ca(0x196)]>_0x3005ba[_0x1b00ca(0x196)]?-0x1:_0x3005ba['date']>_0x3a3b69[_0x1b00ca(0x196)]?0x1:0x0);let _0x3b7274=0x1,_0x29f7a8=[],_0x52ed25=0x0;_0xdd0266['slice']()[_0x1b00ca(0x299)]()['forEach']((_0x36260f,_0x4c22e6)=>{const _0x24963b=_0x1b00ca;if(_0x5bcdb7[_0x52ed25]){if(_0xdd0266[_0xdd0266[_0x24963b(0x1dd)]-_0x4c22e6]&&_0x5bcdb7[_0x52ed25]['date']==_0xdd0266[_0xdd0266[_0x24963b(0x1dd)]-_0x4c22e6][_0x24963b(0x196)]){if(_0x4c22e6<_0xdd0266[_0x24963b(0x1dd)]){let _0x2f1b64=0x0,_0x136b98=0x0;_0xdd0266[_0xdd0266[_0x24963b(0x1dd)]-_0x4c22e6][_0x24963b(0x2b7)][_0x24963b(0x2ed)](_0x33dd0a=>{const _0x3255e1=_0x24963b;_0x136b98+=_0x33dd0a['number']*_0x33dd0a[_0x3255e1(0x228)];}),_0x5bcdb7[_0x52ed25]['changes']['forEach'](_0x5654fe=>{const _0x47c313=_0x24963b;_0x2f1b64+=_0x5654fe[_0x47c313(0x2d9)]*_0x5654fe[_0x47c313(0x228)];}),_0x3b7274*=_0x2f1b64/(_0x136b98-_0x2f1b64)+0x1;}_0x52ed25++;}}let _0x2ae30e=0x0;_0x36260f[_0x24963b(0x2b7)][_0x24963b(0x2ed)](_0x486836=>{const _0x2fbca9=_0x24963b;_0x2ae30e+=_0x486836['number']*_0x486836[_0x2fbca9(0x228)];}),_0x29f7a8[_0xdd0266[_0x24963b(0x1dd)]-_0x4c22e6-0x1]=_0x2ae30e*(_0x3b7274-0x1);});let _0xc347c5=[];_0x5bcdb7=[...config[_0x1b00ca(0x321)]]||[];let _0x1aef11=0x0;_0x52ed25=0x0,_0xdd0266[_0x1b00ca(0x2ed)]((_0x5134a4,_0x2d01ad)=>{const _0x14761a=_0x1b00ca;if(_0x5bcdb7[_0x52ed25]){const _0x49e7d9=fns[_0x14761a(0x1f4)](_0x5bcdb7[_0x52ed25][_0x14761a(0x196)],'yyyy/MM/dd',new Date()),_0x27b9c8=fns[_0x14761a(0x1f4)](_0x5134a4[_0x14761a(0x196)],'yyyy/MM/dd',new Date());if(fns[_0x14761a(0x31f)](_0x49e7d9,_0x27b9c8)){let _0x4f6a5c=0x0;_0x5bcdb7[_0x52ed25][_0x14761a(0x322)][_0x14761a(0x2ed)](_0x198055=>{const _0x30d6da=_0x14761a;!_0xc347c5[_0x198055['coin']]?_0xc347c5[_0x198055['coin']]=_0x198055[_0x30d6da(0x2d9)]:(_0x4f6a5c=_0xc347c5[_0x198055['coin']],_0xc347c5[_0x198055[_0x30d6da(0x272)]]+=_0x198055[_0x30d6da(0x2d9)]);const _0x11438e=_0x5134a4[_0x30d6da(0x2b7)][_0x30d6da(0x2d2)](_0x37b758=>_0x37b758[_0x30d6da(0x272)]==_0x198055[_0x30d6da(0x272)]);(!_0x11438e||_0x11438e['number']==0x0)&&(_0x1aef11+=(-_0x198055[_0x30d6da(0x2d9)]-_0x4f6a5c)*_0x198055[_0x30d6da(0x228)]);}),_0x52ed25++;}}_0x5134a4[_0x14761a(0x2b7)][_0x14761a(0x2ed)]((_0x402833,_0x327f1b)=>{const _0x4b9ed0=_0x14761a;_0xc347c5[_0x402833[_0x4b9ed0(0x272)]]&&(_0x402833[_0x4b9ed0(0x267)]=_0xc347c5[_0x402833['coin']]);}),_0x1deb83[_0x14761a(0x307)]({'date':_0x5134a4[_0x14761a(0x196)],'eur':_0x5134a4[_0x14761a(0x2e0)],'usd':_0x5134a4['usd'],'offset':_0x29f7a8[_0x2d01ad],'netoffset':_0x1aef11,'coins':_0x5134a4[_0x14761a(0x2b7)]});});}return _0x1deb83;}function emitPerformance(_0x303073){const _0x48ec6d=_0x22bd8e;_0x303073[_0x48ec6d(0x1dd)]!==0x0?(proxyEmit('performance',_0x303073),lastPerformanceEmitted=getDate()):proxyEmit(_0x48ec6d(0x254),[]);}function getPerf(_0x5d98f3,_0xec653f){const _0x33a7b0=_0x22bd8e;let _0x545ef5=0x0,_0x286125=0x0,_0x32af09=0x0;_0x5d98f3[_0x33a7b0(0x2b7)][_0x33a7b0(0x2ed)](_0x9926ac=>{const _0x1f913c=_0x33a7b0;_0x545ef5+=_0x9926ac[_0x1f913c(0x2d9)]*_0x9926ac[_0x1f913c(0x228)];});_0xec653f&&(_0x545ef5+=_0x5d98f3['offset']);if(config['basecoin']===_0x33a7b0(0x1ed)||config[_0x33a7b0(0x2a4)]==='ETH')_0x286125=_0x545ef5*_0x5d98f3[_0x33a7b0(0x2e0)],_0x32af09=_0x545ef5*_0x5d98f3[_0x33a7b0(0x238)];else{if(usdBasecoins[_0x33a7b0(0x2c7)](config[_0x33a7b0(0x2a4)]))_0x286125=_0x545ef5*_0x5d98f3[_0x33a7b0(0x2e0)]/_0x5d98f3[_0x33a7b0(0x238)],_0x32af09=_0x545ef5;else config[_0x33a7b0(0x2a4)]===_0x33a7b0(0x1b1)&&(_0x286125=_0x545ef5,_0x32af09=_0x545ef5*_0x5d98f3[_0x33a7b0(0x238)]/_0x5d98f3[_0x33a7b0(0x2e0)]);}return[_0x545ef5,_0x286125,_0x32af09];}function getKPIs(_0x2454ea,_0x2fc4ea=_0x22bd8e(0x1b1)){const _0x5e4448=_0x22bd8e,_0xd94d8b=config[_0x5e4448(0x2a4)],_0x12587b=lastBalances,_0x355276=currentCoins,_0x45b8ab=getNormalizedPerformance(),_0xc86617=_0x2454ea===_0x5e4448(0x2a4)?_0xd94d8b:_0x2454ea===_0x5e4448(0x1a6)||_0x2454ea===_0x5e4448(0x310)?_0x2fc4ea:_0x5e4448(0x2bb)+_0xd94d8b,_0xfb7f18=_0x2454ea==='net-basecoin'?_0x5e4448(0x257):_0x2454ea==='net-fiat'?_0x5e4448(0x257):_0xc86617+'\x20value',_0x20e508=_0x2454ea===_0x5e4448(0x2c4)||_0x2454ea===_0x5e4448(0x310)?'Net\x20effect':_0xc86617+'\x20change';let _0x1cabdf=0x0;_0x355276[_0x5e4448(0x2ed)](_0x4daabe=>{const _0x375031=_0x5e4448;_0x1cabdf+=_0x4daabe[_0x375031(0x2d9)]*_0x4daabe[_0x375031(0x28b)];});if(_0x2454ea===_0x5e4448(0x1a6)||_0x2454ea===_0x5e4448(0x310)){if(_0xd94d8b===_0x5e4448(0x1ed)||_0xd94d8b===_0x5e4448(0x1b6))_0x1cabdf=_0x1cabdf*(_0x2fc4ea===_0x5e4448(0x1b1)?_0x12587b[_0x5e4448(0x2e0)]:_0x12587b['usd']);else{if(usdBasecoins['includes'](_0xd94d8b))_0x1cabdf=_0x1cabdf*(_0x2fc4ea===_0x5e4448(0x1b1)?_0x12587b[_0x5e4448(0x2e0)]/_0x12587b[_0x5e4448(0x238)]:0x1);else _0xd94d8b===_0x5e4448(0x1b1)&&(_0x1cabdf=_0x1cabdf*(_0x2fc4ea===_0x5e4448(0x1b1)?0x1:_0x12587b[_0x5e4448(0x238)]/_0x12587b[_0x5e4448(0x2e0)]));}}let _0x502567;if(_0x1cabdf!==0x0){if(_0x2454ea===_0x5e4448(0x2a4))_0x502567=(_0x1cabdf/startingBalances[_0x5e4448(0x2a4)]-0x1)*0x64;else{if(_0x2fc4ea===_0x5e4448(0x1b1))_0x502567=(_0x1cabdf/startingBalances['eur']-0x1)*0x64;else _0x502567=(_0x1cabdf/startingBalances[_0x5e4448(0x238)]-0x1)*0x64;}let _0x5a7d35=0x0;if(startingBalances[_0x5e4448(0x2b7)])_0x355276[_0x5e4448(0x2ed)](_0x5db5e6=>{const _0x273fd5=_0x5e4448;let _0x354263=startingBalances[_0x273fd5(0x2b7)][_0x273fd5(0x2d2)](_0x356703=>_0x356703[_0x273fd5(0x272)]===_0x5db5e6[_0x273fd5(0x272)]);if(_0x354263&&_0x354263[_0x273fd5(0x272)]&&_0x5db5e6['number']!==0x0)_0x5a7d35+=_0x354263[_0x273fd5(0x2d9)]*_0x5db5e6[_0x273fd5(0x28b)];});let _0x5b1e3d=0x0;if(_0x45b8ab[_0x5e4448(0x1dd)]!==0x0){let _0x572167=_0x45b8ab[_0x45b8ab[_0x5e4448(0x1dd)]-0x1];_0x5b1e3d=_0x572167[_0x5e4448(0x1f7)];}_0x5a7d35-=_0x5b1e3d;_0x2454ea==='net-basecoin'&&(_0x502567=(_0x1cabdf-_0x5a7d35)/startingBalances['basecoin']*0x64,_0x1cabdf=_0x1cabdf-_0x5a7d35);if(_0x2454ea===_0x5e4448(0x310)){let _0x3ce23c=_0x2fc4ea==='EUR'?startingBalances['eur']:startingBalances[_0x5e4448(0x238)];if(_0xd94d8b==='BTC'||_0xd94d8b==='ETH')_0x5a7d35=_0x2fc4ea===_0x5e4448(0x1b1)?_0x5a7d35*_0x12587b[_0x5e4448(0x2e0)]:_0x5a7d35*_0x12587b[_0x5e4448(0x238)];else{if(usdBasecoins[_0x5e4448(0x2c7)](_0xd94d8b))_0x5a7d35=_0x2fc4ea===_0x5e4448(0x1b1)?_0x5a7d35*_0x12587b['eur']/_0x12587b[_0x5e4448(0x238)]:_0x5a7d35;else _0xd94d8b==='EUR'&&(_0x5a7d35=_0x2fc4ea==='EUR'?_0x5a7d35:_0x5a7d35*_0x12587b[_0x5e4448(0x238)]/_0x12587b[_0x5e4448(0x2e0)]);}_0x502567=(_0x1cabdf-_0x5a7d35)/_0x3ce23c*0x64,_0x1cabdf=_0x1cabdf-_0x5a7d35;}if(_0x502567){if(_0x502567<0x64)_0x502567=_0x502567[_0x5e4448(0x2d3)](0x2);else{if(_0x502567<0x3e8)_0x502567=_0x502567[_0x5e4448(0x2d3)](0x1);else _0x502567=_0x502567[_0x5e4448(0x2d3)](0x0);}}else _0x502567=Number('0')['toFixed'](0x2);if(_0x1cabdf){if(Math[_0x5e4448(0x2a5)](_0x1cabdf)<0.000001)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x2);else{if(Math['abs'](_0x1cabdf)<0.1)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x6);else{if(Math[_0x5e4448(0x2a5)](_0x1cabdf)<0x1)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x5);else{if(Math['abs'](_0x1cabdf)<0xa)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x4);else{if(Math[_0x5e4448(0x2a5)](_0x1cabdf)<0x64)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x3);else{if(Math[_0x5e4448(0x2a5)](_0x1cabdf)<0x3e8)_0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x2);else _0x1cabdf=_0x1cabdf[_0x5e4448(0x2d3)](0x2);}}}}}}else _0x1cabdf=Number('0')[_0x5e4448(0x2d3)](0x2);}else _0x502567=Number('0')['toFixed'](0x2);return{'value':_0x1cabdf,'change':_0x502567,'leftTxt':_0xfb7f18,'rightTxt':_0x20e508};}async function getStartingBalances(_0x4b744d,_0x277ecc=!![]){const _0x4a4fb4=_0x22bd8e;if(_0x4b744d[_0x4a4fb4(0x1dd)]!==0x0){const [_0x3885cc,_0x54c754,_0x518f53]=getPerf(_0x4b744d[0x0],!![]);let _0x411a48=[];config['portfolio'][_0x4a4fb4(0x2ed)](_0x7e3be2=>{const _0x2aa0b3=_0x4a4fb4;let _0x48d10a=0x0,_0x299f31;config['liquidity'][_0x2aa0b3(0x2ed)](_0x55f3d0=>{const _0x296054=_0x2aa0b3;let _0x2ebc35=_0x55f3d0[_0x296054(0x322)][_0x296054(0x2d2)](_0x1328e5=>_0x1328e5['coin']==_0x7e3be2[_0x296054(0x272)]);if(_0x2ebc35){_0x48d10a+=_0x2ebc35['number'];if(!_0x299f31)_0x299f31=_0x2ebc35[_0x296054(0x228)];}}),_0x411a48['push']({'coin':_0x7e3be2['coin'],'number':_0x48d10a,'initialprice':_0x299f31});});const _0x859667={'basecoin':_0x3885cc,'eur':_0x54c754,'usd':_0x518f53,'coins':_0x411a48};if(_0x277ecc)proxyEmit(_0x4a4fb4(0x24b),_0x859667);startingBalances=_0x859667;}}function headlessMode(_0x30232a){const _0xbc48e2=_0x22bd8e;let _0x470fd1=_0x30232a[_0xbc48e2(0x1a3)],_0x336adc=_0x30232a[_0xbc48e2(0x2b2)],_0x2ed1f4=[];for(let _0x850330 of _0x470fd1){if(_0x850330[_0xbc48e2(0x272)]!=config[_0xbc48e2(0x2a4)]){if(_0x850330['delta']>=_0x336adc/0x64){if(_0x850330[_0xbc48e2(0x263)])_0x2ed1f4[_0xbc48e2(0x307)](_0x850330);}else{if(_0x850330['delta']<=-_0x336adc/0x64){if(_0x850330[_0xbc48e2(0x263)])_0x2ed1f4[_0xbc48e2(0x307)](_0x850330);}}}}_0x2ed1f4[_0xbc48e2(0x1dd)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x2ed1f4[_0xbc48e2(0x2ed)](_0x23a2f4=>{const _0x3b9524=_0xbc48e2;logger['debug'](_0x3b9524(0x1c0)+_0x23a2f4[_0x3b9524(0x272)]+'\x20'+_0x23a2f4['number']+'\x20'+_0x23a2f4[_0x3b9524(0x28b)]+'\x20'+_0x23a2f4[_0x3b9524(0x2ac)]+'%\x20'+_0x23a2f4[_0x3b9524(0x2cf)]+'%\x20'+(0x64*_0x23a2f4[_0x3b9524(0x1b8)])['toFixed'](0x2)+_0x3b9524(0x2b4)+_0x336adc[_0x3b9524(0x2d3)](0x2)+'%)');}),placeOrder(_0x2ed1f4));}function notifyBalance(_0x31dcc8){const _0x400b22=_0x22bd8e;let _0x1f4bfb=_0x31dcc8[_0x400b22(0x1a3)],_0x56cbbf=_0x31dcc8['threshold'],_0x177932=[];for(let _0x46b4b5 of _0x1f4bfb){if(_0x46b4b5[_0x400b22(0x272)]!=config['basecoin']){if(_0x46b4b5[_0x400b22(0x1b8)]>=_0x56cbbf/0x64){if(_0x46b4b5['valid'])_0x177932['push'](_0x46b4b5);}else{if(_0x46b4b5['delta']<=-_0x56cbbf/0x64){if(_0x46b4b5[_0x400b22(0x263)])_0x177932[_0x400b22(0x307)](_0x46b4b5);}}}}if(_0x177932[_0x400b22(0x1dd)]>0x0){let _0x141e35=_0x177932[_0x400b22(0x2bd)](_0x12a52a=>_0x12a52a[_0x400b22(0x272)]);_0x141e35[_0x400b22(0x309)]();let _0x286d8f=_0x141e35[_0x400b22(0x26f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x400b22(0x2cd),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x286d8f;}}function symbolToCoin(_0x16f07d){const _0x380249=_0x22bd8e;let _0x240d84;if(_0x16f07d[_0x380249(0x2c7)]('/'+config['basecoin']))_0x240d84=_0x16f07d['replace']('/'+config[_0x380249(0x2a4)],'');if(_0x16f07d[_0x380249(0x2c7)](config[_0x380249(0x2a4)]+'/'))_0x240d84=_0x16f07d[_0x380249(0x264)](config[_0x380249(0x2a4)]+'/','');return _0x240d84;}async function unlockOrders(){const _0x4e9720=_0x22bd8e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4e9720(0x1c5)]){logger[_0x4e9720(0x249)](_0x4e9720(0x317)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x44adb3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x44adb3,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4e9720(0x249)](_0x4e9720(0x23a));}}async function validateOrders(_0x2745c6){const _0x447fb8=_0x22bd8e;if(_0x2745c6)validateOrdersState=_0x2745c6;logger[_0x447fb8(0x249)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x447fb8(0x192)+(lockOrders==0x1?_0x447fb8(0x200):lockOrders==0x2?_0x447fb8(0x2bf):_0x447fb8(0x1c2)));let _0x5faa25=[],_0x48447e=config[_0x447fb8(0x1a4)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x447fb8(0x23e)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x447fb8(0x1c5)])return;logger['debug'](_0x447fb8(0x1e5)+validateOrdersState),lastOrders[_0x447fb8(0x2ed)](_0x2508e4=>{const _0x1c5dc3=_0x447fb8;let _0x4da0fa=![];_0x2508e4[_0x1c5dc3(0x247)]>0x0&&(_0x4da0fa=!![]),_0x5faa25[_0x1c5dc3(0x307)](_0x4da0fa),_0x4da0fa&&config[_0x1c5dc3(0x1a4)]!='market'&&logHistory(_0x1c5dc3(0x195),_0x1c5dc3(0x229)+_0x2508e4[_0x1c5dc3(0x2ae)]+'\x20'+_0x2508e4[_0x1c5dc3(0x29d)]+'\x20#'+formatResult(_0x2508e4[_0x1c5dc3(0x247)],0x8)+'\x20@'+formatResult(_0x2508e4['price'],0x8));}),_0x5faa25[_0x447fb8(0x2ed)]((_0x39da87,_0x12b6da)=>{const _0x3da527=_0x447fb8;if(_0x39da87)lastOrders[_0x3da527(0x26c)](_0x12b6da,0x1);}),persistOpenOrders(lastOrders);const _0x467904=coolingDown?_0x447fb8(0x231):'balancing\x20resumed';if(validateOrdersState==_0x447fb8(0x267)){validateOrdersState=_0x447fb8(0x300);if(_0x5faa25[_0x447fb8(0x2c7)](![])){if(config[_0x447fb8(0x1a4)]==_0x447fb8(0x30e)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x447fb8(0x300)){if(_0x5faa25['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x447fb8(0x2b3))_0x5faa25['includes'](![])&&(config['ordertype']==_0x447fb8(0x30e)?logHistory(_0x447fb8(0x305),_0x447fb8(0x302)+Math[_0x447fb8(0x297)](_0x48447e*validateOrderInterval/0xea60)+_0x447fb8(0x251)+_0x467904):(await cancelOrders(),logHistory(_0x447fb8(0x305),_0x447fb8(0x27b)+Math['round'](_0x48447e*validateOrderInterval/0xea60)+_0x447fb8(0x251)+_0x467904))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x447fb8(0x1a4)]!=_0x447fb8(0x30e))logHistory(_0x447fb8(0x305),'No\x20more\x20open\x20orders\x20-\x20'+_0x467904);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5864d=>{const _0x2dbbc8=_0xc4b7;try{const _0x428fdb=await exchange['cancelOrder'](_0x5864d[_0x2dbbc8(0x2ce)],_0x5864d['symbol']);}catch(_0x3d589f){if(_0x3d589f['toString']()[_0x2dbbc8(0x2c7)]('OrderNotFound')){}else await handleError(_0x3d589f,_0x2dbbc8(0x1ca));}});}async function initCoinResults(_0x34210a){const _0x2e41e1=_0x22bd8e;_0x34210a?logger[_0x2e41e1(0x249)](_0x2e41e1(0x203)+_0x34210a):logger['debug']('Initializing\x20coin\x20results'),config['portfolio'][_0x2e41e1(0x2ed)](_0x41a19f=>{const _0x3d12fa=_0x2e41e1;if(!_0x41a19f[_0x3d12fa(0x1f6)]&&_0x41a19f[_0x3d12fa(0x272)]!=config[_0x3d12fa(0x2a4)]){const _0xc4e7ba=currentCoins[_0x3d12fa(0x2d2)](_0x32f5ae=>_0x32f5ae[_0x3d12fa(0x272)]==_0x41a19f[_0x3d12fa(0x272)]),_0x2f8271=global['ticker'][noslash(_0x41a19f[_0x3d12fa(0x2ae)])];let _0xf3ba5a=_0xc4e7ba?_0xc4e7ba[_0x3d12fa(0x2d9)]:null,_0x5c10b1=_0x41a19f['reverse']?0x1/_0x2f8271:_0x2f8271,_0x15ad7e;config['liquidity'][_0x3d12fa(0x2ed)](_0x576584=>{const _0x191948=_0x3d12fa;!_0x15ad7e&&(_0x15ad7e=_0x576584[_0x191948(0x322)][_0x191948(0x2d2)](_0x4c1d2e=>_0x4c1d2e['coin']==_0x41a19f['coin']),_0x15ad7e&&(_0xf3ba5a=_0x15ad7e['number'],_0x5c10b1=_0x15ad7e[_0x191948(0x228)]));});let _0x5d0436=dbCoinResults[_0x3d12fa(0x273)](_0x3d12fa(0x2b7))[_0x3d12fa(0x2d2)]({'coin':_0x41a19f[_0x3d12fa(0x272)]})['value']();if(!_0x5d0436){const _0x2e6426={'coin':_0x41a19f['coin'],'number':_0xf3ba5a,'breakeven':_0x5c10b1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3d12fa(0x273)](_0x3d12fa(0x2b7))[_0x3d12fa(0x307)](_0x2e6426)[_0x3d12fa(0x30f)]();}else{if(_0x34210a&&_0x41a19f[_0x3d12fa(0x272)]==_0x34210a){const _0x4b8cfa={'coin':_0x41a19f['coin'],'number':_0xf3ba5a,'breakeven':_0x5c10b1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3d12fa(0x273)]('coins')[_0x3d12fa(0x2d2)]({'coin':_0x41a19f[_0x3d12fa(0x272)]})[_0x3d12fa(0x1eb)](_0x4b8cfa)['write']();}}}});}async function updateCoinResults(_0x255131,_0x553a6a=![]){const _0x113a41=_0x22bd8e;let _0x506c50,_0x1e5c62,_0x328ed0,_0x2ee9ef,_0x2e0976,_0x3a9ab0,_0x3a96f7=dbCoinResults[_0x113a41(0x273)]('coins')[_0x113a41(0x2d2)]({'coin':_0x255131[_0x113a41(0x272)]})[_0x113a41(0x1b4)](),_0x22dafd=![];_0x3a96f7&&Object['entries'](_0x3a96f7)[_0x113a41(0x2ed)](([_0x40d444,_0x34426f])=>{if(_0x34426f==null)_0x22dafd=!![];});(!_0x3a96f7||_0x22dafd)&&(await initCoinResults(_0x255131[_0x113a41(0x272)]),_0x3a96f7=dbCoinResults[_0x113a41(0x273)](_0x113a41(0x2b7))[_0x113a41(0x2d2)]({'coin':_0x255131[_0x113a41(0x272)]})[_0x113a41(0x1b4)]());_0x255131[_0x113a41(0x299)]&&(_0x3a9ab0={'filled':_0x255131['filled']*_0x255131[_0x113a41(0x228)],'amount':_0x255131[_0x113a41(0x247)]*_0x255131[_0x113a41(0x228)],'side':_0x255131[_0x113a41(0x29d)]==_0x113a41(0x1b7)?_0x113a41(0x235):'sell','price':0x1/_0x255131[_0x113a41(0x228)]},_0x255131={..._0x255131,..._0x3a9ab0});_0x553a6a?_0x1e5c62=_0x255131[_0x113a41(0x29d)]=='buy'?_0x3a96f7[_0x113a41(0x2d9)]+_0x255131[_0x113a41(0x247)]:_0x3a96f7[_0x113a41(0x2d9)]-_0x255131['filled']:_0x1e5c62=await getCoinNumber(_0x255131[_0x113a41(0x272)]);if(_0x255131[_0x113a41(0x1cc)]&&_0x255131[_0x113a41(0x1cc)][_0x113a41(0x1f3)]==config[_0x113a41(0x2a4)])_0x506c50=_0x255131[_0x113a41(0x1cc)]['cost'];else{if(_0x255131[_0x113a41(0x1cc)]&&_0x255131['fee'][_0x113a41(0x1f3)]==_0x113a41(0x2c9)&&!_0x553a6a)_0x506c50=_0x255131['fee'][_0x113a41(0x262)]*global['ticker'][_0x113a41(0x2c9)+config['basecoin']];else _0x506c50=defaultFee*_0x255131[_0x113a41(0x247)]*_0x255131['price'];}_0x255131[_0x113a41(0x29d)]==_0x113a41(0x235)?(_0x328ed0=_0x1e5c62!=0x0?(_0x3a96f7['breakeven']*_0x3a96f7[_0x113a41(0x2d9)]+_0x255131[_0x113a41(0x228)]*(_0x1e5c62-_0x3a96f7['number'])+_0x506c50)/_0x1e5c62:0x0,_0x2ee9ef=_0x3a96f7[_0x113a41(0x2f2)]):(_0x328ed0=_0x1e5c62!=0x0?(_0x3a96f7[_0x113a41(0x256)]*_0x3a96f7[_0x113a41(0x2d9)]-_0x255131['price']*(_0x3a96f7['number']-_0x1e5c62)+_0x506c50)/_0x1e5c62:0x0,_0x2ee9ef=_0x3a96f7['realized']+(_0x255131[_0x113a41(0x228)]-_0x3a96f7['breakeven'])*_0x255131[_0x113a41(0x247)]);_0x2e0976=(_0x255131[_0x113a41(0x228)]-_0x328ed0-_0x506c50/_0x255131['filled'])*_0x1e5c62;let _0x10a2f1={'coin':_0x255131[_0x113a41(0x272)],'number':_0x1e5c62,'breakeven':formatResult(_0x328ed0,0x8),'realized':formatResult(_0x2ee9ef,0x8),'unrealized':formatResult(_0x2e0976,0x8),'fees':formatResult(_0x3a96f7[_0x113a41(0x234)]+_0x506c50,0x8),'sells':_0x255131[_0x113a41(0x29d)]==_0x113a41(0x1b7)?_0x3a96f7[_0x113a41(0x25b)]+0x1:_0x3a96f7['sells'],'buys':_0x255131[_0x113a41(0x29d)]==_0x113a41(0x235)?_0x3a96f7[_0x113a41(0x209)]+0x1:_0x3a96f7[_0x113a41(0x209)]};dbCoinResults['get'](_0x113a41(0x2b7))[_0x113a41(0x2d2)]({'coin':_0x255131[_0x113a41(0x272)]})[_0x113a41(0x1eb)](_0x10a2f1)[_0x113a41(0x30f)]();if(!_0x553a6a){if(_0x255131[_0x113a41(0x1cc)]&&_0x255131[_0x113a41(0x1cc)][_0x113a41(0x1f3)]=='BNB'){const _0x588e49=currentCoins[_0x113a41(0x2d2)](_0x5888c7=>_0x5888c7[_0x113a41(0x272)]==_0x113a41(0x2c9));if(_0x588e49){let _0x1a7e05=dbCoinResults[_0x113a41(0x273)](_0x113a41(0x2b7))[_0x113a41(0x2d2)]({'coin':_0x113a41(0x2c9)})[_0x113a41(0x1b4)]();_0x10a2f1={..._0x1a7e05,'number':_0x588e49['number']},dbCoinResults[_0x113a41(0x273)](_0x113a41(0x2b7))['find']({'coin':'BNB'})[_0x113a41(0x1eb)](_0x10a2f1)[_0x113a41(0x30f)]();}}}}async function placeOrder(_0x57e845){const _0x502c66=_0x22bd8e,_0x53212b=config['ordertype']==_0x502c66(0x30e)?'market':'limit';if(lockOrders==ORDERS[_0x502c66(0x1ad)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x502c66(0x1c5)],allOrdersPlaced=![],validateOrdersState=_0x502c66(0x267);let _0x509b02=![];lastOrders=[];for(const _0x5228f2 of _0x57e845){let _0x440860,_0x55b7a0,_0x99409c,_0x2c4466,_0x4b3486,_0x3fd51e=_0x5228f2[_0x502c66(0x2ae)];try{const _0x1240c5=await exchange[_0x502c66(0x245)](_0x3fd51e);_0x440860=_0x5228f2[_0x502c66(0x299)]?0x1/_0x5228f2[_0x502c66(0x28b)]:_0x5228f2[_0x502c66(0x28b)],_0x55b7a0=_0x1240c5['bid'],_0x99409c=_0x1240c5[_0x502c66(0x283)];_0x5228f2[_0x502c66(0x299)]?(_0x2c4466=_0x5228f2[_0x502c66(0x29d)]==_0x502c66(0x235)?_0x502c66(0x1b7):'buy',_0x4b3486=Math['abs'](_0x5228f2[_0x502c66(0x2ab)])/_0x440860):(_0x2c4466=_0x5228f2[_0x502c66(0x29d)],_0x4b3486=Math[_0x502c66(0x2a5)](_0x5228f2[_0x502c66(0x2ab)]));_0x53212b==_0x502c66(0x202)&&(config['ordertype']=='limit-high'&&(_0x440860=_0x2c4466=='buy'?_0x55b7a0:_0x99409c),config[_0x502c66(0x1a4)]==_0x502c66(0x207)&&(_0x440860=_0x2c4466==_0x502c66(0x235)?_0x99409c:_0x55b7a0));_0x4b3486=formatResult(_0x4b3486,0x8),_0x440860=formatResult(_0x440860,0x8);const _0x4e6ece=_0x2c4466==_0x502c66(0x1b7)?config[_0x502c66(0x213)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x502c66(0x2f7)]?String['fromCodePoint']('0x'+config[_0x502c66(0x2f7)])+'\x20':'',_0x15de1d=_0x53212b==_0x502c66(0x30e)?_0x502c66(0x1aa):config[_0x502c66(0x1a4)]=='limit-high'?_0x502c66(0x1cd):_0x502c66(0x295),_0x50704b=(Math[_0x502c66(0x2ff)](Math[_0x502c66(0x1bd)]()*0x35a4e900)+0x5f5e100)[_0x502c66(0x32c)]();lastOrders['push']({'customId':_0x50704b,'symbol':_0x3fd51e,'coin':_0x5228f2['coin'],'amount':_0x4b3486,'price':_0x440860,'side':_0x2c4466,'reverse':_0x5228f2[_0x502c66(0x299)],'filled':0x0});if(_0x53212b==_0x502c66(0x30e))logHistory(_0x502c66(0x195),''+_0x4e6ece+_0x15de1d+_0x502c66(0x237)+_0x3fd51e+'\x20'+_0x2c4466+'\x20#'+formatResult(_0x4b3486,0x8)+'\x20@'+formatResult(_0x440860,0x8));else logHistory(_0x502c66(0x195),''+_0x4e6ece+_0x15de1d+_0x502c66(0x237)+_0x3fd51e+'\x20'+_0x2c4466+'\x20#'+formatResult(_0x4b3486,0x8)+'\x20@'+formatResult(_0x440860,0x8));let _0x1367e7;_0x53212b==_0x502c66(0x30e)?_0x2c4466==_0x502c66(0x235)&&[_0x502c66(0x286),'Bitget',_0x502c66(0x1e8),_0x502c66(0x2f0),_0x502c66(0x227)][_0x502c66(0x2c7)](config['exchange'])?_0x1367e7=await exchange[_0x502c66(0x301)](_0x3fd51e,_0x53212b,_0x2c4466,_0x4b3486,_0x440860):_0x1367e7=await exchange[_0x502c66(0x301)](_0x3fd51e,_0x53212b,_0x2c4466,_0x4b3486,undefined):_0x1367e7=await exchange[_0x502c66(0x301)](_0x3fd51e,_0x53212b,_0x2c4466,_0x4b3486,_0x440860);logger[_0x502c66(0x249)](_0x502c66(0x24d)+_0x1367e7['id']+_0x502c66(0x1ef)+_0x50704b);const _0xb6da24=lastOrders['length']-0x1;if(_0xb6da24>=0x0&&lastOrders[_0xb6da24][_0x502c66(0x1f8)]==_0x50704b){lastOrders[_0xb6da24][_0x502c66(0x2ce)]=_0x1367e7['id'];if(_0x1367e7[_0x502c66(0x2dd)])lastOrders[_0xb6da24][_0x502c66(0x2dd)]=_0x1367e7['amount'];if(_0x1367e7[_0x502c66(0x228)])lastOrders[_0xb6da24][_0x502c66(0x228)]=_0x1367e7[_0x502c66(0x228)];lastOrders[_0xb6da24][_0x502c66(0x1cc)]=_0x1367e7[_0x502c66(0x1cc)];}if(config['cooldown']!=0x0){let _0x217573=null;if(cooldownTracker[_0x502c66(0x1dd)]==config[_0x502c66(0x266)]-0x1)_0x217573=cooldownTracker[_0x502c66(0x327)]();const _0x3b86d6=getTimeStamp();cooldownTracker[_0x502c66(0x307)](_0x3b86d6);if(_0x217573){const _0x3457fc=fns['differenceInSeconds'](new Date(_0x3b86d6),new Date(_0x217573));if(_0x3457fc<cooldownInterval){logHistory('error',_0x502c66(0x32f)+config[_0x502c66(0x266)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x502c66(0x2e2)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x3e73c2){if(_0x3e73c2[_0x502c66(0x32c)]()[_0x502c66(0x2c7)](_0x502c66(0x32a)))lastOrders=lastOrders[_0x502c66(0x1a0)](_0x2171d0=>_0x2171d0[_0x502c66(0x2ae)]!=_0x3fd51e),logHistory(_0x502c66(0x2ec),_0x502c66(0x28a)+_0x3fd51e),_0x509b02=!![];else{if(_0x3e73c2['toString']()[_0x502c66(0x2c7)](_0x502c66(0x29f)))lastOrders=lastOrders[_0x502c66(0x1a0)](_0x1ffa42=>_0x1ffa42[_0x502c66(0x2ae)]!=_0x3fd51e),logHistory(_0x502c66(0x2ec),'Order\x20amount\x20is\x20invalid:\x20'+_0x3fd51e),_0x509b02=!![];else{if(_0x3e73c2[_0x502c66(0x32c)]()[_0x502c66(0x2c7)](_0x502c66(0x215)))lastOrders=lastOrders[_0x502c66(0x1a0)](_0x20291e=>_0x20291e[_0x502c66(0x2ae)]!=_0x3fd51e),logHistory(_0x502c66(0x2ec),_0x502c66(0x1c9)+_0x3fd51e),logger[_0x502c66(0x249)](_0x3e73c2),_0x509b02=!![];else _0x3e73c2[_0x502c66(0x32c)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x502c66(0x1a0)](_0x58e74a=>_0x58e74a[_0x502c66(0x2ae)]!=_0x3fd51e),logHistory(_0x502c66(0x2ec),_0x502c66(0x28a)+_0x3fd51e),_0x509b02=!![]):(lastOrders=lastOrders[_0x502c66(0x1a0)](_0x11464c=>_0x11464c['symbol']!=_0x3fd51e),await handleError(_0x3e73c2,_0x502c66(0x1ee),_0x3fd51e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x502c66(0x1dd)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x23a716=config[_0x502c66(0x1a4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x502c66(0x23e)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5c06c4=_0x502c66;validateOrders(_0x5c06c4(0x2b3));},_0x23a716);}else unlockOrders();_0x509b02&&config[_0x502c66(0x2a3)]&&(logHistory(_0x502c66(0x2ec),_0x502c66(0x1bf)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x502c66(0x305),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x502c66(0x2a3)]&&logHistory(_0x502c66(0x2ec),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x502c66(0x2a3)]&&(config[_0x502c66(0x1a4)]==_0x502c66(0x30e)?logHistory(_0x502c66(0x2ec),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x502c66(0x2ec),_0x502c66(0x2d6))));}}function persistOpenOrders(_0x35bbfe){const _0x152b88=_0x22bd8e,_0xbef45a={...config,'openOrders':_0x35bbfe};let _0x13bfb6=dbConfig['get'](_0x152b88(0x25d))[_0x152b88(0x2d2)]({'botID':botID})[_0x152b88(0x1b4)]();_0x13bfb6&&dbConfig['get']('bot')[_0x152b88(0x2d2)]({'botID':botID})[_0x152b88(0x1eb)](_0xbef45a)['write']();}function restoreOrders(){const _0x36fba6=_0x22bd8e;let _0x28a030;config['openOrders']&&allOpenOrders[_0x36fba6(0x2ed)](_0x4154da=>{const _0x3f662e=_0x36fba6,_0x2ff610=config[_0x3f662e(0x21c)]['find'](_0x286975=>_0x286975[_0x3f662e(0x2ce)]==_0x4154da['id']);_0x2ff610&&(lastOrders['push'](_0x2ff610),_0x28a030=_0x4154da[_0x3f662e(0x2a2)]);});if(lastOrders[_0x36fba6(0x1dd)]>0x0){lockOrders=ORDERS[_0x36fba6(0x1c5)],validateOrdersState=_0x36fba6(0x300),allOrdersPlaced=!![];const _0x2228ea=new Date()['getTime'](),_0x5eaefa=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x36fba6(0x23e)]*0x3c*0x3e8;if(_0x28a030+_0x5eaefa>_0x2228ea){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x476eca=_0x36fba6;validateOrders(_0x476eca(0x2b3));},_0x28a030+_0x5eaefa-_0x2228ea);}else validateOrders(_0x36fba6(0x2b3));}}async function sendMetricsTelegram(){const _0x317868=_0x22bd8e;if(!coinsLoaded){process[_0x317868(0x22b)]({'telegrammsg':_0x317868(0x2a0)},_0x3541fb=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x59b399='';if(config[_0x317868(0x328)])_0x59b399=_0x317868(0x261)+config[_0x317868(0x2af)]+_0x317868(0x277);else _0x59b399=_0x317868(0x20b)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x18c26f=getKPIs(_0x317868(0x2a4)),_0x4ce53f=getKPIs(_0x317868(0x1a6),config[_0x317868(0x1a6)]),_0x4fb236=getKPIs(_0x317868(0x2c4)),_0x37df16=getKPIs(_0x317868(0x310),config[_0x317868(0x1a6)]);_0x59b399+=_0x317868(0x25a),_0x59b399+=_0x18c26f[_0x317868(0x285)]+_0x317868(0x20f)+_0x18c26f[_0x317868(0x1b4)]+'\x0a',_0x59b399+=_0x18c26f['rightTxt']+':\x20'+_0x18c26f['change']+'%\x0a',_0x59b399+=_0x4ce53f['leftTxt']+_0x317868(0x20f)+_0x4ce53f['value']+'\x0a',_0x59b399+=_0x4ce53f[_0x317868(0x329)]+':\x20'+_0x4ce53f[_0x317868(0x308)]+'%\x0a',_0x59b399+=_0x4fb236[_0x317868(0x285)]+':\x20'+_0x4fb236['value']+'\x20('+config[_0x317868(0x2a4)]+')\x0a',_0x59b399+=_0x4fb236[_0x317868(0x329)]+':\x20'+_0x4fb236[_0x317868(0x308)]+'%\x20('+config[_0x317868(0x2a4)]+')\x0a',_0x59b399+=_0x37df16[_0x317868(0x285)]+':\x20'+_0x37df16['value']+'\x20('+config[_0x317868(0x1a6)]+')\x0a',_0x59b399+=_0x37df16[_0x317868(0x329)]+':\x20'+_0x37df16[_0x317868(0x308)]+_0x317868(0x2b4)+config[_0x317868(0x1a6)]+')\x0a',_0x59b399+='</pre>',process[_0x317868(0x22b)]({'telegrammsg':_0x59b399},_0x53d0ef=>{});}async function sendPortfolioTelegram(){const _0x402a23=_0x22bd8e;if(!coinsLoaded){process[_0x402a23(0x22b)]({'telegrammsg':_0x402a23(0x2a0)},_0x22ba13=>{});return;}let _0x1c9bcb='';if(config[_0x402a23(0x328)])_0x1c9bcb=_0x402a23(0x261)+config[_0x402a23(0x2af)]+_0x402a23(0x2d0);else _0x1c9bcb=_0x402a23(0x20b)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x1c9bcb+=_0x402a23(0x25a),_0x1c9bcb+=_0x402a23(0x225),_0x1c9bcb+=_0x402a23(0x21d),_0x1c9bcb+='-------------------------------\x0a',currentCoins[_0x402a23(0x2ed)](_0x32dcb9=>{const _0x3743c3=_0x402a23;_0x1c9bcb+=_0x32dcb9[_0x3743c3(0x272)]['padEnd'](0x7)+'|\x20'+formatPad(_0x32dcb9['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x32dcb9[_0x3743c3(0x2cf)],0x2,0x6)+'|\x20'+formatPad(_0x32dcb9[_0x3743c3(0x1b8)]*0x64,0x2,0x6)+'\x0a';}),_0x1c9bcb+=_0x402a23(0x30b),process[_0x402a23(0x22b)]({'telegrammsg':_0x1c9bcb},_0xe99584=>{});}function formatPad(_0x3b3d17,_0x19770b,_0x16bb88){const _0x511908=_0x22bd8e,_0x6a30d3=formatResultString(_0x3b3d17,_0x19770b);return _0x6a30d3?_0x6a30d3[_0x511908(0x314)](_0x16bb88):''['padStart'](_0x16bb88);}function logHistory(_0x575b68,_0x4d4245,_0x31127c=''){const _0x216059=_0x22bd8e;logger['full'](''+_0x4d4245);let _0x342345={'time':getTimeStamp(),'type':_0x575b68,'event':_0x4d4245};dbLogs[_0x216059(0x273)](_0x216059(0x2e9))[_0x216059(0x307)](_0x342345)[_0x216059(0x30f)]();if(_0x31127c=='')_0x31127c=_0x4d4245;proxyEmit('event',{'log':_0x342345,'summary':_0x31127c}),process[_0x216059(0x22b)]({'telegram':{..._0x342345,'botname':config['botname'],'showname':config['showname']}},_0x36030b=>{});}function emitHistory(_0x8dd336={}){const _0x17c18d=_0x22bd8e;Object['keys'](_0x8dd336)[_0x17c18d(0x1dd)]==0x0&&(_0x8dd336={'type':[_0x17c18d(0x195),_0x17c18d(0x2de)],'event':'','page':0x1});if(_0x8dd336[_0x17c18d(0x288)][_0x17c18d(0x2c7)]('event'))_0x8dd336[_0x17c18d(0x288)][_0x17c18d(0x26c)](_0x8dd336[_0x17c18d(0x288)][_0x17c18d(0x24c)](_0x17c18d(0x2de)),0x1,_0x17c18d(0x2ec),_0x17c18d(0x2cd),_0x17c18d(0x305));if(dbLogs['has'](_0x17c18d(0x2e9))[_0x17c18d(0x1b4)]()){let _0x5b8fac=dbLogs[_0x17c18d(0x273)](_0x17c18d(0x2e9))[_0x17c18d(0x1a0)](_0x557359=>{const _0x1739aa=_0x17c18d;if(_0x8dd336[_0x1739aa(0x288)][_0x1739aa(0x1dd)]==0x0)return![];else return _0x8dd336['type'][_0x1739aa(0x2c7)](_0x557359['type']);})[_0x17c18d(0x1a0)](_0x2ab9ac=>{const _0x7140d9=_0x17c18d;if(_0x8dd336[_0x7140d9(0x2de)]=='')return!![];else return _0x2ab9ac['event'][_0x7140d9(0x25c)]()['includes'](_0x8dd336[_0x7140d9(0x2de)][_0x7140d9(0x25c)]());})[_0x17c18d(0x2e1)](_0x17c18d(0x2f9)),_0x5e9abb=_0x5b8fac[_0x17c18d(0x1b4)]()[_0x17c18d(0x1dd)];_0x5b8fac=_0x5b8fac[_0x17c18d(0x299)]()[_0x17c18d(0x199)]((_0x8dd336[_0x17c18d(0x244)]-0x1)*logPageSize,_0x8dd336[_0x17c18d(0x244)]*logPageSize-0x1)[_0x17c18d(0x299)]()[_0x17c18d(0x1b4)](),proxyEmit('event-history',{'logs':_0x5b8fac,'total':_0x5e9abb});}else proxyEmit(_0x17c18d(0x2f1),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3fda01){const _0x4fbbf7=_0x22bd8e;if(dbLogs[_0x4fbbf7(0x29c)](_0x4fbbf7(0x2e9))[_0x4fbbf7(0x1b4)]()){const _0x210e8d=dbLogs[_0x4fbbf7(0x273)](_0x4fbbf7(0x2e9))[_0x4fbbf7(0x2e1)](_0x4fbbf7(0x2f9))[_0x4fbbf7(0x1a0)](_0xbd7faa=>{const _0x8ddb3f=_0x4fbbf7;return _0xbd7faa[_0x8ddb3f(0x288)]==_0x8ddb3f(0x195);})[_0x4fbbf7(0x1b4)]();dbLogs[_0x4fbbf7(0x273)](_0x4fbbf7(0x2e9))[_0x4fbbf7(0x20d)]()[_0x4fbbf7(0x30f)](),dbLogs[_0x4fbbf7(0x273)](_0x4fbbf7(0x2e9))[_0x4fbbf7(0x1eb)](_0x210e8d)[_0x4fbbf7(0x30f)](),emitHistory(_0x3fda01);}}async function pauseBot(){const _0x175a5e=_0x22bd8e,_0x218587=new Date()[_0x175a5e(0x2d8)]();if(!lastErrorShown||_0x218587-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x218587;!lastBotPause?(lastBotPause=_0x218587,consecutivePauses=0x1):(_0x218587-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x175a5e(0x22b)]({'stop':_0x175a5e(0x28e)},_0x4c3935=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x175a5e(0x2d8)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x4119d9=_0x22bd8e;botPaused=!![],await sleep(0x3e8),process[_0x4119d9(0x22b)]({'stop':_0x4119d9(0x1d4)},_0x291766=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x250524,_0x2ce25a){const _0x25967e=_0x22bd8e;if(botPaused)return;const _0xd2613b=config[_0x25967e(0x31e)]||_0x25967e(0x1ae);if(_0x2ce25a)logger['debug'](_0x25967e(0x296)+_0x2ce25a);if(_0x250524[_0x25967e(0x32c)]()['includes'](_0x25967e(0x2d5)))logHistory('error',_0xd2613b+_0x25967e(0x248));else{if(_0x250524[_0x25967e(0x32c)]()['includes'](_0x25967e(0x31b)))logHistory(_0x25967e(0x2ec),_0xd2613b+_0x25967e(0x1d8));else _0x250524[_0x25967e(0x32c)]()['includes'](_0x25967e(0x23d))?(logHistory(_0x25967e(0x2ec),_0xd2613b+_0x25967e(0x325)),logHistory(_0x25967e(0x2ec),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x250524,null);}}async function handleError(_0x364e8e,_0x3f4687,_0x5521ba=''){const _0x2f67f3=_0x22bd8e;if(botPaused)return;const _0x35e1db=config['exchange']||_0x2f67f3(0x1ae);if(_0x3f4687)logger[_0x2f67f3(0x249)](_0x2f67f3(0x296)+_0x3f4687);if(_0x364e8e[_0x2f67f3(0x32c)]()['includes']('DDoSProtection')||_0x364e8e['toString']()['includes'](_0x2f67f3(0x2a8)))logHistory(_0x2f67f3(0x2ec),_0x35e1db+_0x2f67f3(0x1cf)+pauseBotMsg),await pauseBot();else{if(_0x364e8e['toString']()[_0x2f67f3(0x2c7)](_0x2f67f3(0x23f))||_0x364e8e['toString']()[_0x2f67f3(0x2c7)](_0x2f67f3(0x304)))logHistory(_0x2f67f3(0x2ec),_0x35e1db+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)]('RequestTimeout'))logHistory('error',_0x35e1db+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)](_0x2f67f3(0x31d)))logHistory('error',_0x35e1db+_0x2f67f3(0x20e)+pauseBotMsg),await pauseBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)](_0x2f67f3(0x1be)))logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x318)),logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x24a)),await killBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)](_0x2f67f3(0x24e)))logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x1de)),logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x24a)),await killBot();else{if(_0x364e8e instanceof ccxt[_0x2f67f3(0x1cb)])logHistory('error',_0x35e1db+_0x2f67f3(0x2f5)+pauseBotMsg),logger['debug'](_0x2f67f3(0x2c5),_0x364e8e),await pauseBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)](_0x2f67f3(0x2d5)))logHistory(_0x2f67f3(0x2ec),_0x35e1db+_0x2f67f3(0x1ff)),logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x24a)),await killBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x35e1db+_0x2f67f3(0x1bb)),logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x24a)),await killBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()['includes'](_0x2f67f3(0x23d)))logHistory(_0x2f67f3(0x2ec),_0x35e1db+_0x2f67f3(0x1af)),logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x24a)),await killBot();else{if(_0x364e8e[_0x2f67f3(0x32c)]()[_0x2f67f3(0x2c7)](_0x2f67f3(0x21a)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x5521ba);else _0x364e8e instanceof ccxt['ExchangeError']?(logHistory(_0x2f67f3(0x2ec),_0x35e1db+'\x20exchange\x20error'),logger[_0x2f67f3(0x249)]('Error\x20details:',_0x364e8e)):(logHistory(_0x2f67f3(0x2ec),_0x2f67f3(0x2b9)+pauseBotMsg),logger[_0x2f67f3(0x249)](_0x2f67f3(0x2c5),_0x364e8e),await pauseBot());}}}}}}}}}}}function formatResult(_0x24a6dc,_0x15e256){const _0x2d7342=_0x22bd8e;return parseFloat(_0x24a6dc[_0x2d7342(0x2d3)](_0x15e256));}function formatResultTruncate(_0x3a7a7e,_0x102e32){const _0x10800c=_0x22bd8e;let _0x29898f=formatResultString(_0x3a7a7e,0xa),_0x23f6fa=_0x29898f['indexOf']('.');return _0x23f6fa!=-0x1&&(_0x29898f=_0x29898f[_0x10800c(0x199)](0x0,_0x23f6fa+_0x102e32+0x1)),Number(_0x29898f);}function formatResultString(_0x4f24c4,_0x5ad3a0){const _0x2462ec=_0x22bd8e;let _0x2f0a42;if(!(''+_0x4f24c4)[_0x2462ec(0x2c7)]('e'))_0x2f0a42=+(Math['round'](_0x4f24c4+'e+'+_0x5ad3a0)+'e-'+_0x5ad3a0);else{let _0x2e4211=(''+_0x4f24c4)[_0x2462ec(0x19a)]('e'),_0x34902d='';+_0x2e4211[0x1]+_0x5ad3a0>0x0&&(_0x34902d='+'),_0x2f0a42=+(Math[_0x2462ec(0x297)](+_0x2e4211[0x0]+'e'+_0x34902d+(+_0x2e4211[0x1]+_0x5ad3a0))+'e-'+_0x5ad3a0);}return Number(_0x2f0a42)[_0x2462ec(0x2d3)](_0x5ad3a0);}function getServerTime(){const _0x5b4c0f=_0x22bd8e,_0x29004b=new Date();return _0x29004b[_0x5b4c0f(0x323)]()+'/'+(_0x29004b[_0x5b4c0f(0x223)]()+0x1)['toString']()[_0x5b4c0f(0x314)](0x2,'0')+'/'+_0x29004b[_0x5b4c0f(0x2be)]()[_0x5b4c0f(0x32c)]()[_0x5b4c0f(0x314)](0x2,'0')+'\x20'+_0x29004b[_0x5b4c0f(0x20c)]()[_0x5b4c0f(0x32c)]()[_0x5b4c0f(0x314)](0x2,'0')+':'+_0x29004b[_0x5b4c0f(0x1f9)]()[_0x5b4c0f(0x32c)]()['padStart'](0x2,'0')+':'+_0x29004b[_0x5b4c0f(0x236)]()[_0x5b4c0f(0x32c)]()[_0x5b4c0f(0x314)](0x2,'0');}function getTimeStamp(){const _0x191c53=_0x22bd8e,_0x4c257e=shiftedTime();return _0x4c257e['getFullYear']()+'/'+(_0x4c257e[_0x191c53(0x223)]()+0x1)['toString']()[_0x191c53(0x314)](0x2,'0')+'/'+_0x4c257e[_0x191c53(0x2be)]()[_0x191c53(0x32c)]()[_0x191c53(0x314)](0x2,'0')+'\x20'+_0x4c257e[_0x191c53(0x20c)]()[_0x191c53(0x32c)]()[_0x191c53(0x314)](0x2,'0')+':'+_0x4c257e[_0x191c53(0x1f9)]()['toString']()[_0x191c53(0x314)](0x2,'0')+':'+_0x4c257e[_0x191c53(0x236)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x13d80b=_0x22bd8e,_0x3f7edc=shiftedTime();return _0x3f7edc[_0x13d80b(0x323)]()+'/'+(_0x3f7edc[_0x13d80b(0x223)]()+0x1)[_0x13d80b(0x32c)]()[_0x13d80b(0x314)](0x2,'0')+'/'+_0x3f7edc[_0x13d80b(0x2be)]()['toString']()[_0x13d80b(0x314)](0x2,'0');}function getHour(){const _0x398532=_0x22bd8e,_0x3ad788=shiftedTime();return _0x3ad788[_0x398532(0x20c)]()[_0x398532(0x32c)]()[_0x398532(0x314)](0x2,'0');}function sleep(_0x1217c8){return new Promise(_0x31baa5=>setTimeout(_0x31baa5,_0x1217c8));}function shiftedTime(){const _0xd4c29c=_0x22bd8e,_0x176c33=new Date();let _0x29495b=_0x176c33;if(config&&config[_0xd4c29c(0x2eb)]!==0x0)_0x29495b=fns[_0xd4c29c(0x292)](_0x176c33,{'hours':config[_0xd4c29c(0x2eb)]});return _0x29495b;}function timer(_0x467310){const _0x3889c5=_0x22bd8e,_0x5bd347=new Date();!lasttime?console[_0x3889c5(0x1c4)](getTimeStamp()+_0x3889c5(0x1fc),_0x467310,_0x5bd347):console[_0x3889c5(0x1c4)](getTimeStamp()+':\x20timer\x20>',_0x467310,(_0x5bd347-lasttime)/0x3e8),lasttime=_0x5bd347;}