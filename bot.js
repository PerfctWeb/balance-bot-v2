const _0xde38f7=_0x5f36;(function(_0xb9a20,_0x51826c){const _0x2b79a8=_0x5f36,_0x428806=_0xb9a20();while(!![]){try{const _0x491ef9=-parseInt(_0x2b79a8(0x2ab))/0x1+-parseInt(_0x2b79a8(0x2d3))/0x2*(-parseInt(_0x2b79a8(0x38e))/0x3)+parseInt(_0x2b79a8(0x1fb))/0x4*(parseInt(_0x2b79a8(0x2f5))/0x5)+-parseInt(_0x2b79a8(0x276))/0x6*(parseInt(_0x2b79a8(0x1fa))/0x7)+parseInt(_0x2b79a8(0x330))/0x8*(-parseInt(_0x2b79a8(0x381))/0x9)+parseInt(_0x2b79a8(0x344))/0xa+parseInt(_0x2b79a8(0x219))/0xb*(parseInt(_0x2b79a8(0x337))/0xc);if(_0x491ef9===_0x51826c)break;else _0x428806['push'](_0x428806['shift']());}catch(_0xc03ee8){_0x428806['push'](_0x428806['shift']());}}}(_0x5a7a,0xcd452));const _0x2eb75d=function(){let _0x236f97=!![];return function(_0x4571c7,_0xed25ea){const _0x3f328d=_0x236f97?function(){const _0x1ca9e4=_0x5f36;if(_0xed25ea){const _0x3379b5=_0xed25ea[_0x1ca9e4(0x324)](_0x4571c7,arguments);return _0xed25ea=null,_0x3379b5;}}:function(){};return _0x236f97=![],_0x3f328d;};}(),_0x3cd0c4=_0x2eb75d(this,function(){const _0x30460c=_0x5f36;return _0x3cd0c4['toString']()[_0x30460c(0x20e)](_0x30460c(0x2ff))[_0x30460c(0x2f0)]()[_0x30460c(0x263)](_0x3cd0c4)[_0x30460c(0x20e)](_0x30460c(0x2ff));});_0x3cd0c4();'use strict';const ccxt=require(_0xde38f7(0x2af)),low=require(_0xde38f7(0x296)),FileSync=require(_0xde38f7(0x31d)),fs=require('fs'),fns=require(_0xde38f7(0x302)),Crypt=require(_0xde38f7(0x2b6))[_0xde38f7(0x215)],util=require(_0xde38f7(0x293)),argv=require(_0xde38f7(0x33a))(process['argv']['slice'](0x2))['argv'],path=require(_0xde38f7(0x339)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0xde38f7(0x395),'BUSD',_0xde38f7(0x270),'USDT',_0xde38f7(0x36a),_0xde38f7(0x265)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xde38f7(0x36f)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xde38f7(0x386))['version'],botID=process[_0xde38f7(0x279)][0x2]||_0xde38f7(0x273),pattern=/^[0-9]{3}$/;!pattern[_0xde38f7(0x30f)](botID)&&(console['log'](_0xde38f7(0x229)+botID+_0xde38f7(0x287)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0xde38f7(0x234),logspath=userID?_0xde38f7(0x28c)+userID+'/':_0xde38f7(0x28c),loggerfile=fs[_0xde38f7(0x36c)](logspath+_0xde38f7(0x1f3),{'flags':'a'});!fs[_0xde38f7(0x39b)](configpath)&&fs[_0xde38f7(0x384)](configpath);!fs['existsSync'](logspath)&&fs[_0xde38f7(0x384)](logspath);const configfile=configpath+_0xde38f7(0x39a)+botID+_0xde38f7(0x2d6),logfile=configpath+'bot-'+botID+_0xde38f7(0x38d),performancefile=configpath+'bot-'+botID+_0xde38f7(0x239),coinresultsfile=configpath+_0xde38f7(0x39a)+botID+_0xde38f7(0x25b),settingsfile=configpath+_0xde38f7(0x33d),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0xde38f7(0x365),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xde38f7(0x35d)]({'logs':[],'version':serverversion})[_0xde38f7(0x290)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xde38f7(0x35d)]({'data':[],'version':serverversion})[_0xde38f7(0x290)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xde38f7(0x35d)]({'coins':[],'version':serverversion})[_0xde38f7(0x290)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xde38f7(0x2bb),'rsaStandard':_0xde38f7(0x252)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x451f65=>{console['log'](_0x451f65);},'simple':_0x1a1634=>{const _0x869c5a=_0xde38f7;console[_0x869c5a(0x348)](_0x1a1634),loggerfile[_0x869c5a(0x290)](util['format'](_0x1a1634)+'\x0a');},'full':async(_0x264e3d,_0x35d50a='')=>{const _0xd0a53e=_0xde38f7;let _0x5885c7;if(config[_0xd0a53e(0x3a6)])_0x5885c7=getTimeStamp()+':\x20'+config[_0xd0a53e(0x258)]+_0xd0a53e(0x2d0)+_0x264e3d;else _0x5885c7=getTimeStamp()+_0xd0a53e(0x2de)+botID+'\x20>\x20'+_0x264e3d;console['log'](_0x5885c7),loggerfile[_0xd0a53e(0x290)](util[_0xd0a53e(0x28d)](_0x5885c7)+'\x0a'),_0x35d50a&&(console[_0xd0a53e(0x348)](_0x35d50a),loggerfile[_0xd0a53e(0x290)](util['format'](_0x35d50a)+'\x0a'));},'debug':async(_0x3e7863,_0x3e645='')=>{const _0x1fa340=_0xde38f7;let _0x4246a5;if(config[_0x1fa340(0x3a6)])_0x4246a5=getTimeStamp()+':\x20'+config[_0x1fa340(0x258)]+_0x1fa340(0x2fb)+_0x3e7863;else _0x4246a5=getTimeStamp()+_0x1fa340(0x2de)+botID+'\x20>\x20[DEBUG]\x20'+_0x3e7863;if(debugging)console[_0x1fa340(0x348)](_0x4246a5);loggerfile[_0x1fa340(0x290)](util[_0x1fa340(0x28d)](_0x4246a5)+'\x0a');if(_0x3e645){if(debugging)console['log'](_0x3e645);loggerfile[_0x1fa340(0x290)](util[_0x1fa340(0x28d)](_0x3e645)+'\x0a');}}};process['on'](_0xde38f7(0x29d),function(_0x436bbb){const _0x29e3fa=_0xde38f7;handleError(_0x436bbb,_0x29e3fa(0x29d));});settings[_0xde38f7(0x2c3)]!=config[_0xde38f7(0x2c3)]&&updateTimeshift(settings[_0xde38f7(0x2c3)]);settings[_0xde38f7(0x308)]!=config[_0xde38f7(0x308)]&&updateOnepagemode(settings[_0xde38f7(0x308)]);(settings[_0xde38f7(0x272)]&&!config[_0xde38f7(0x272)]||!settings[_0xde38f7(0x272)]&&config[_0xde38f7(0x272)])&&updateMarketcapApi(settings[_0xde38f7(0x272)]);process[_0xde38f7(0x22e)]({'started':_0xde38f7(0x295)},_0x2b8dff=>{}),initializeProcessListeners();function proxyEmit(_0x30abcd,_0x3f798f=null){process['send']({'function':_0x30abcd,'args':_0x3f798f},_0x4092a9=>{});}function initializeProcessListeners(){const _0x2f67a8=_0xde38f7;process['on'](_0x2f67a8(0x2c7),_0x388480=>{const _0x1a5c75=_0x2f67a8;switch(Object[_0x1a5c75(0x356)](_0x388480)[0x0]){case _0x1a5c75(0x2c3):_0x388480[_0x1a5c75(0x2c3)]!=undefined&&(settings[_0x1a5c75(0x2c3)]=_0x388480[_0x1a5c75(0x2c3)],updateTimeshift(settings[_0x1a5c75(0x2c3)]));break;case _0x1a5c75(0x308):_0x388480[_0x1a5c75(0x308)]!=undefined&&(settings[_0x1a5c75(0x308)]=_0x388480['onepagemode'],updateOnepagemode(settings[_0x1a5c75(0x308)]));break;case _0x1a5c75(0x272):_0x388480[_0x1a5c75(0x272)]!=undefined&&(settings['marketcapApi']=_0x388480[_0x1a5c75(0x272)],updateMarketcapApi(settings[_0x1a5c75(0x272)]));break;case'bots':_0x388480[_0x1a5c75(0x256)]!=undefined&&(bots=JSON[_0x1a5c75(0x306)](_0x388480[_0x1a5c75(0x256)]),proxyEmit('bots',bots));break;case _0x1a5c75(0x333):switch(_0x388480[_0x1a5c75(0x333)]){case'initclient':initclient();break;case _0x1a5c75(0x30e):toggleBotMode();break;case'emitHistory':emitHistory(_0x388480[_0x1a5c75(0x364)]);break;case _0x1a5c75(0x36b):deleteHistoryAlerts(_0x388480[_0x1a5c75(0x364)]);break;case _0x1a5c75(0x2b7):getPortfolio(_0x388480[_0x1a5c75(0x364)]);break;case _0x1a5c75(0x2fd):storeConfiguration(_0x388480[_0x1a5c75(0x364)]);break;case _0x1a5c75(0x2ea):storeHeadless(_0x388480['args']);break;case _0x1a5c75(0x251):storeFiat(_0x388480[_0x1a5c75(0x364)]);break;case _0x1a5c75(0x385):resetHistory();break;case _0x1a5c75(0x2e2):getStartingBalances(getNormalizedPerformance());break;case _0x1a5c75(0x29b):placeOrder(_0x388480['args']);break;case'cancelLoading':cancelLoading();break;case _0x1a5c75(0x322):showConfig();break;case _0x1a5c75(0x1fd):sendMetricsTelegram();break;case _0x1a5c75(0x2fc):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x2bb58e=![]){const _0x58b1b=_0xde38f7;logger[_0x58b1b(0x1f4)]('Reset\x20|\x20'+(_0x2bb58e?_0x58b1b(0x281):_0x58b1b(0x305))+_0x58b1b(0x33e)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2bb58e)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x58b1b(0x35e)]!=''&&config[_0x58b1b(0x35e)]!=_0x58b1b(0x2ca)){loadingProgress=0x0;if(_0x2bb58e){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x242113){handleErrorNoStop(_0x242113,_0x58b1b(0x2e6));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x399e98=await getCoins();[currentCoins,currentCoinsAll]=_0x399e98,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x58b1b(0x1f4)](_0x58b1b(0x20d)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x58b1b(0x207)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x19b606=![]){const _0x4533dc=_0xde38f7;logger['debug'](_0x4533dc(0x2bc)+(_0x19b606?_0x4533dc(0x1ee):_0x4533dc(0x335))+_0x4533dc(0x1f1)+config[_0x4533dc(0x363)]);if(pidBalances)clearTimeout(pidBalances);if(_0x19b606){getBalances();return;}coinsLoaded=![];if(config[_0x4533dc(0x35e)]!=''&&config[_0x4533dc(0x35e)]!=_0x4533dc(0x2ca)){loadingProgress=0x1;const _0x7774ae=await getCoins();[currentCoins,currentCoinsAll]=_0x7774ae,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4533dc(0x1f4)](_0x4533dc(0x20d)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x137272){const _0x10cdd3=_0xde38f7;let _0x1d1cb7=![];if(_0x137272)_0x1d1cb7=!![];let _0x27a014;_0x1d1cb7?_0x27a014=_0x137272[_0x10cdd3(0x2c8)](_0x43ef77=>_0x43ef77['coin']):_0x27a014=currentCoinsAll[_0x10cdd3(0x2c8)](_0x5f1839=>_0x5f1839[_0x10cdd3(0x1f2)]);if(!config[_0x10cdd3(0x272)]||!_0x1d1cb7&&!config[_0x10cdd3(0x255)]||_0x27a014['length']==0x0)return;let _0x4f415d=null;try{_0x4f415d=await axios[_0x10cdd3(0x235)](_0x10cdd3(0x388),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x10cdd3(0x272)]},'params':{'symbol':_0x27a014[_0x10cdd3(0x2f0)]()}});}catch(_0x470eb3){_0x4f415d=null,_0x470eb3['toString']()[_0x10cdd3(0x35f)](_0x10cdd3(0x1ff))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x10cdd3(0x374),emittedConfiguration()),logHistory(_0x10cdd3(0x2f1),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x10cdd3(0x2f1),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x10cdd3(0x2a5)),logger['debug'](_0x10cdd3(0x373),_0x470eb3[_0x10cdd3(0x2f0)]()+_0x10cdd3(0x28e)+_0x470eb3[_0x10cdd3(0x29e)]));}if(_0x4f415d){let _0x1bb442=0x0;const _0x3fa97=_0x4f415d[_0x10cdd3(0x283)];_0x27a014[_0x10cdd3(0x277)](_0x1e9052=>{const _0x5551e1=_0x10cdd3;if(_0x3fa97['data'][_0x1e9052][0x0])_0x1bb442+=_0x3fa97[_0x5551e1(0x283)][_0x1e9052][0x0][_0x5551e1(0x25d)][_0x5551e1(0x395)][_0x5551e1(0x1f8)];}),_0x27a014[_0x10cdd3(0x277)](_0x4f9c41=>{const _0x174b24=_0x10cdd3,_0x5395a7=_0x3fa97['data'][_0x4f9c41][0x0]?_0x3fa97[_0x174b24(0x283)][_0x4f9c41][0x0][_0x174b24(0x25d)][_0x174b24(0x395)][_0x174b24(0x1f8)]:0x0;if(_0x1d1cb7){const _0x4128af=_0x137272['find'](_0x3a5a7b=>_0x3a5a7b[_0x174b24(0x1f2)]==_0x4f9c41);_0x4128af&&(_0x4128af['marketcap']=_0x5395a7);}else{const _0x103165=currentCoins[_0x174b24(0x267)](_0x10176b=>_0x10176b[_0x174b24(0x1f2)]==_0x4f9c41);_0x103165&&(_0x103165[_0x174b24(0x2b3)]=_0x5395a7);const _0x567a0d=currentCoinsAll[_0x174b24(0x267)](_0x7d56fd=>_0x7d56fd[_0x174b24(0x1f2)]==_0x4f9c41);_0x567a0d&&(_0x567a0d[_0x174b24(0x2b3)]=_0x5395a7);}}),!_0x1d1cb7&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1e2127=_0xde38f7,_0x3432e4=0x2;let _0x313a46=0x0,_0x2216ad=0x0,_0x25eb7c=0x0,_0x48ceab=0x0,_0x43ab67=0x0;config[_0x1e2127(0x23b)][_0x1e2127(0x277)](_0x461f4b=>{const _0x4b2769=_0x1e2127;if(!_0x461f4b[_0x4b2769(0x392)]){_0x25eb7c++,_0x313a46+=_0x461f4b[_0x4b2769(0x24b)];if(_0x461f4b[_0x4b2769(0x24b)]===-0x1){_0x313a46++;const _0x17675c=currentCoinsAll[_0x4b2769(0x267)](_0x47eba0=>_0x47eba0[_0x4b2769(0x1f2)]==_0x461f4b[_0x4b2769(0x1f2)]);_0x17675c&&(_0x48ceab+=_0x17675c[_0x4b2769(0x2b3)],_0x43ab67+=Math[_0x4b2769(0x351)](_0x17675c['marketcap']));}if(_0x461f4b[_0x4b2769(0x24b)]!==-0x1)_0x2216ad++;}});let _0x2df11d;const _0x400acc=0x64-_0x313a46,_0x5d06e0=_0x25eb7c-_0x2216ad;_0x2df11d=_0x5d06e0===0x0?_0x313a46:Math['max'](0x64,_0x313a46),config[_0x1e2127(0x23b)][_0x1e2127(0x277)](_0x2e5be5=>{const _0x195144=_0x1e2127,_0x458fd3=currentCoinsAll['find'](_0x43db29=>_0x43db29['coin']==_0x2e5be5[_0x195144(0x1f2)]);_0x458fd3&&(_0x2e5be5[_0x195144(0x2b3)]=_0x458fd3['marketcap']);if(!_0x2e5be5[_0x195144(0x392)]){if(_0x2df11d<=0x64){if(_0x2e5be5[_0x195144(0x24b)]===-0x1){if(_0x48ceab!==0x0&&config[_0x195144(0x255)]){if(_0x458fd3){if(config['marketcapEnabled']==_0x195144(0x2b3))_0x2e5be5[_0x195144(0x37b)]=(_0x400acc/(_0x48ceab/_0x458fd3['marketcap']))[_0x195144(0x21e)](_0x3432e4);else config[_0x195144(0x255)]=='marketcapsqrt'&&(_0x2e5be5[_0x195144(0x37b)]=(_0x400acc/(_0x43ab67/Math[_0x195144(0x351)](_0x458fd3[_0x195144(0x2b3)])))[_0x195144(0x21e)](_0x3432e4));}}}}}}),updateConfig();}function updateConfig(){const _0x30a704=_0xde38f7;let _0x2ec0bd=dbConfig[_0x30a704(0x235)]('bot')[_0x30a704(0x267)]({'botID':botID})[_0x30a704(0x34d)]();_0x2ec0bd&&dbConfig[_0x30a704(0x235)](_0x30a704(0x22c))[_0x30a704(0x267)]({'botID':botID})['assign'](config)[_0x30a704(0x290)]();}async function startScheduler(){const _0xbbc415=_0xde38f7,_0x440c58=process[_0xbbc415(0x2b5)]()[_0xbbc415(0x29c)]/0x400/0x400;logger[_0xbbc415(0x1f4)](_0xbbc415(0x354)+process[_0xbbc415(0x39d)]+_0xbbc415(0x2f4)+_0x440c58+_0xbbc415(0x2ed)),getMarketCap(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3d9a16=![]){const _0x38fe6c=_0xde38f7;logger[_0x38fe6c(0x1f4)](_0x38fe6c(0x329));if(!_0x3d9a16)while(lockOrders!=ORDERS[_0x38fe6c(0x39e)]||coolingDown){await sleep(0xa*0x3e8);}process[_0x38fe6c(0x22e)]({'stop':'restart'},_0xc67c1b=>{});}async function initExchange(_0x599099=config[_0xde38f7(0x363)],_0xdc4c59=config[_0xde38f7(0x35e)],_0x2300fc=config[_0xde38f7(0x24c)],_0x2e9b17=config[_0xde38f7(0x2e0)]){const _0x2012f9=_0xde38f7;!supportedExchanges()[_0x2012f9(0x35f)](_0x599099)&&(logHistory(_0x2012f9(0x2f1),_0x2012f9(0x27f)+_0x599099+'\x20exchange'),killBot());const _0x3a15fd=ccxt[_0x2012f9(0x2cf)][_0x599099[_0x2012f9(0x21f)]()];exchange=new _0x3a15fd({'apiKey':_0xdc4c59,'secret':_0x2300fc,'options':{'defaultType':'spot'}});if(_0x2e9b17)exchange[_0x2012f9(0x253)]=_0x2e9b17;}function updateExchange(_0x451088,_0x262ec2,_0x401b35=null){const _0x30c268=_0xde38f7;exchange[_0x30c268(0x35e)]=_0x451088,exchange[_0x30c268(0x24c)]=_0x262ec2,exchange['apiPassword']=_0x401b35,logger['debug'](_0x30c268(0x377));}function setStableCoins(){const _0x42f0b9=_0xde38f7;let _0x30a091=config['basecoin']==_0x42f0b9(0x227)?_0x42f0b9(0x227):config[_0x42f0b9(0x311)]=='PAXG'?_0x42f0b9(0x341):_0x42f0b9(0x247),_0x59c8c7=!allSymbols['includes'](_0x30a091+_0x42f0b9(0x254))?_0x42f0b9(0x30a):_0x42f0b9(0x395),_0x149ebf=!allSymbols[_0x42f0b9(0x35f)](_0x30a091+_0x42f0b9(0x226))?_0x59c8c7:_0x42f0b9(0x261);stablecoins={'eur':{'coin':''+_0x30a091+_0x149ebf,'symbol':_0x30a091+'/'+_0x149ebf},'usd':{'coin':''+_0x30a091+_0x59c8c7,'symbol':_0x30a091+'/'+_0x59c8c7}};}async function initwsCcxt(){const _0x422cd7=_0xde38f7;initCycle++;const _0x101d03=initCycle;let _0x59bc83=[];config[_0x422cd7(0x23b)][_0x422cd7(0x277)](_0x5b6153=>{const _0x37f43b=_0x422cd7;if(!_0x5b6153[_0x37f43b(0x392)]&&_0x5b6153[_0x37f43b(0x1f2)]!=config[_0x37f43b(0x311)])_0x59bc83[_0x37f43b(0x372)](_0x5b6153['symbol']);});if(!_0x59bc83['includes'](stablecoins[_0x422cd7(0x2be)][_0x422cd7(0x204)]))_0x59bc83['push'](stablecoins[_0x422cd7(0x2be)][_0x422cd7(0x204)]);if(!_0x59bc83[_0x422cd7(0x35f)](stablecoins[_0x422cd7(0x2ad)][_0x422cd7(0x204)]))_0x59bc83[_0x422cd7(0x372)](stablecoins['usd']['symbol']);if(config[_0x422cd7(0x363)][_0x422cd7(0x34a)]('Binance')&&config[_0x422cd7(0x311)]!=_0x422cd7(0x341)){if(!_0x59bc83['includes'](_0x422cd7(0x2dd)+config[_0x422cd7(0x311)]))_0x59bc83[_0x422cd7(0x372)](_0x422cd7(0x2dd)+config[_0x422cd7(0x311)]);}loadCoins(_0x59bc83),_0x59bc83=validateSymbols(_0x59bc83);const _0x370f09=async _0x14523f=>{const _0x411a1d=_0x422cd7;let _0x488d0d;try{const _0x427d02=await getTickers(_0x14523f);Object['entries'](_0x427d02)[_0x411a1d(0x277)](_0x480aec=>{const _0x5a5dc4=_0x411a1d;_0x488d0d=_0x480aec[0x1][_0x5a5dc4(0x204)],gTicker[noslash(_0x488d0d)]=_0x480aec[0x1][_0x5a5dc4(0x389)],gChange[_0x488d0d]=_0x480aec[0x1][_0x5a5dc4(0x320)];});}catch(_0x1a6cba){await handleError(_0x1a6cba,_0x411a1d(0x2e5),_0x488d0d);}},_0x150d11=async _0x359b12=>{const _0x10fb0d=_0x422cd7;while(initCycle==_0x101d03){if(!botPaused)try{const _0x1076ac=await exchange[_0x10fb0d(0x2aa)](_0x359b12);gTicker[noslash(_0x1076ac[0x0]['symbol'])]=_0x1076ac[0x0]['price'];}catch(_0x4a6c8d){if(!exchangeStopped)await handleError(_0x4a6c8d,_0x10fb0d(0x2e1),_0x359b12);}else await sleep(0x64);}},_0x842454=async _0x40a4af=>{const _0x100c1e=_0x422cd7;while(initCycle==_0x101d03){if(!botPaused)try{const _0x4fc94d=await exchange[_0x100c1e(0x212)](_0x40a4af),_0x3bc9cb=_0x4fc94d['pop']();gTicker[noslash(_0x3bc9cb[_0x100c1e(0x204)])]=_0x3bc9cb[_0x100c1e(0x221)];}catch(_0x369679){if(!exchangeStopped)await handleError(_0x369679,_0x100c1e(0x280),_0x40a4af['toString']());}else await sleep(0x64);}},_0x26a548=async _0x4b6c8a=>{const _0x2891f3=_0x422cd7;while(initCycle==_0x101d03){if(!botPaused){let _0x6b867d;try{await sleep(0x3c*0x3e8);const _0x347557=await getTickers(_0x4b6c8a);Object['entries'](_0x347557)[_0x2891f3(0x277)](_0x2c5c14=>{const _0x4a952f=_0x2891f3;_0x6b867d=_0x2c5c14[0x1][_0x4a952f(0x204)],gChange[_0x6b867d]=_0x2c5c14[0x1][_0x4a952f(0x320)];});}catch(_0x16bd87){if(!exchangeStopped)await handleError(_0x16bd87,_0x2891f3(0x259),_0x6b867d);}}else await sleep(0x64);}},_0x58ab72=async _0x114dc9=>{const _0x9d468=_0x422cd7;while(initCycle==_0x101d03){if(!botPaused)try{const _0x2a9812=await exchange['watchOrders'](_0x114dc9);initCycle==_0x101d03&&_0x2a9812[_0x9d468(0x277)](_0x2fe2f2=>{updateNumberCoinsCcxt(_0x2fe2f2);});}catch(_0x134aa4){if(!exchangeStopped)await handleError(_0x134aa4,_0x9d468(0x31f));}else await sleep(0x64);}};_0x370f09(_0x59bc83),_0x26a548(_0x59bc83),exchange[_0x422cd7(0x2cb)]['watchTradesForSymbols']&&!(config[_0x422cd7(0x363)]==_0x422cd7(0x33f)&&_0x59bc83['length']>0xa)?_0x842454(_0x59bc83):_0x59bc83[_0x422cd7(0x277)](_0x548e93=>{_0x150d11(_0x548e93);}),_0x59bc83[_0x422cd7(0x277)](_0x3f2255=>{_0x58ab72(_0x3f2255);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xb50cde){const _0x5bb7ef=_0xde38f7;let _0x377f80={};try{if(config[_0x5bb7ef(0x363)]!='Cryptocom')_0x377f80=await exchange[_0x5bb7ef(0x245)](_0xb50cde);else for(const _0x2aabd9 of _0xb50cde){const _0x4a1a61=await exchange[_0x5bb7ef(0x316)](_0x2aabd9);_0x377f80[_0x2aabd9]=_0x4a1a61;}return _0x377f80;}catch(_0x48584e){throw _0x48584e;}}function setBlockTransactionDetection(_0x113e45){const _0x38d7f1=_0xde38f7;blockTransactionDetection=_0x113e45,logger[_0x38d7f1(0x1f4)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x4ae8d3=0x0){const _0x5135f4=_0xde38f7;transactionDetectionOngoing=!![];try{const _0x3226d5=await getCoins(_0x4ae8d3),[_0x4fb4ae,_0x323101]=_0x3226d5;let _0x164d91=[];currentCoins[_0x5135f4(0x277)](_0x9b88fa=>{const _0x4988d0=_0x5135f4,_0x238fa9=_0x4fb4ae[_0x4988d0(0x267)](_0xf3703f=>_0xf3703f[_0x4988d0(0x1f2)]==_0x9b88fa['coin']);if(_0x238fa9){if(_0x9b88fa[_0x4988d0(0x24e)]!=_0x238fa9[_0x4988d0(0x24e)]){let _0x13b6c8;if(_0x9b88fa[_0x4988d0(0x1f2)]!=config['basecoin']){const _0x42a10a=gTicker[noslash(_0x9b88fa['symbol'])];_0x13b6c8=_0x9b88fa['reverse']?0x1/_0x42a10a:_0x42a10a;}else _0x13b6c8=0x1;_0x164d91[_0x4988d0(0x372)]({'coin':_0x9b88fa[_0x4988d0(0x1f2)],'symbol':_0x9b88fa[_0x4988d0(0x204)],'price':_0x13b6c8,'number':Number(formatResult(_0x238fa9['number']-_0x9b88fa[_0x4988d0(0x24e)],0x8)),'basecoinvalue':_0x13b6c8*(_0x238fa9[_0x4988d0(0x24e)]-_0x9b88fa['number'])});}}});if(_0x164d91[_0x5135f4(0x207)]>0x0&&!blockTransactionDetection)for(const _0x6e40af of _0x164d91){if(config[_0x5135f4(0x230)]){logger[_0x5135f4(0x1f4)](_0x5135f4(0x31e)+_0x6e40af[_0x5135f4(0x2e9)]+_0x5135f4(0x2b4)+lastFees['highest']);if(lastFees[_0x5135f4(0x26c)]==0x0||Math[_0x5135f4(0x3a2)](_0x6e40af['basecoinvalue'])>lastFees[_0x5135f4(0x26c)]*1.2){if(config[_0x5135f4(0x230)]==_0x5135f4(0x375)){delete _0x6e40af[_0x5135f4(0x204)],delete _0x6e40af[_0x5135f4(0x2e9)];let _0x2692c3=[],_0x3d2a17=[...config['liquidity']]||[],_0x599987=config['liquidity'];_0x3d2a17[_0x5135f4(0x2fe)]((_0x24633d,_0x563234)=>_0x24633d[_0x5135f4(0x30b)]>_0x563234[_0x5135f4(0x30b)]?-0x1:_0x563234[_0x5135f4(0x30b)]>_0x24633d['date']?0x1:0x0);const _0x2908ab=getDate();if(_0x3d2a17[0x0]){const _0x5dfc06=fns['parse'](_0x3d2a17[0x0][_0x5135f4(0x30b)],_0x5135f4(0x25e),new Date()),_0x76ca4=fns['parse'](_0x2908ab,_0x5135f4(0x25e),new Date());if(fns[_0x5135f4(0x23e)](_0x5dfc06,_0x76ca4)){_0x2692c3=_0x3d2a17[0x0]['changes'];const _0x567f09=_0x2692c3[_0x5135f4(0x267)](_0x3f081a=>_0x3f081a['coin']==_0x6e40af[_0x5135f4(0x1f2)]);_0x567f09?(_0x567f09[_0x5135f4(0x24e)]+=_0x6e40af[_0x5135f4(0x24e)],_0x567f09[_0x5135f4(0x24e)]==0x0&&(_0x2692c3=_0x2692c3[_0x5135f4(0x274)](_0x5f3a5f=>{const _0x246a18=_0x5135f4;return _0x5f3a5f[_0x246a18(0x1f2)]!=_0x6e40af['coin'];}))):_0x2692c3[_0x5135f4(0x372)](_0x6e40af);const _0x2d456b=_0x599987[_0x5135f4(0x267)](_0x481e6f=>_0x481e6f['date']==_0x2908ab);_0x2d456b[_0x5135f4(0x397)]=_0x2692c3;}else _0x599987[_0x5135f4(0x372)]({'date':_0x2908ab,'changes':[_0x6e40af]});}const _0x4c55fd=_0x599987[_0x5135f4(0x267)](_0x50d104=>_0x50d104[_0x5135f4(0x30b)]==_0x2908ab);if(_0x4c55fd){let _0x4e78b1=!![];_0x4c55fd[_0x5135f4(0x397)][_0x5135f4(0x277)](_0x54a37f=>{const _0x194acf=_0x5135f4;if(_0x54a37f[_0x194acf(0x24e)]!=0x0)_0x4e78b1=![];}),_0x4e78b1&&(_0x599987=_0x599987[_0x5135f4(0x274)](_0x324170=>{const _0x504495=_0x5135f4;return _0x324170[_0x504495(0x30b)]!=_0x2908ab;}));}let _0x18eebd=dbConfig[_0x5135f4(0x235)]('bot')[_0x5135f4(0x267)]({'botID':botID})[_0x5135f4(0x34d)]();_0x18eebd&&(dbConfig[_0x5135f4(0x235)](_0x5135f4(0x22c))[_0x5135f4(0x267)]({'botID':botID})[_0x5135f4(0x370)]({'liquidity':_0x599987})[_0x5135f4(0x290)](),config[_0x5135f4(0x26f)]=_0x599987);logHistory(_0x5135f4(0x1ed),'Portfolio\x20change\x20detected:\x20'+Math[_0x5135f4(0x3a2)](_0x6e40af[_0x5135f4(0x24e)])+'\x20'+_0x6e40af[_0x5135f4(0x1f2)]+'\x20'+(_0x6e40af[_0x5135f4(0x24e)]>0x0?'added':'removed')+_0x5135f4(0x32b)),proxyEmit(_0x5135f4(0x374),emittedConfiguration());const _0x46541d=getNormalizedPerformance();emitPerformance(_0x46541d),getStartingBalances(_0x46541d),logger[_0x5135f4(0x1f4)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x5135f4(0x230)]==_0x5135f4(0x27a)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x5135f4(0x1ed),'Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x6e40af[_0x5135f4(0x24e)])+'\x20'+_0x6e40af[_0x5135f4(0x1f2)]+'\x20'+(_0x6e40af['number']>0x0?'added':'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0x5135f4(0x382)+Math[_0x5135f4(0x3a2)](_0x6e40af['number'])+'\x20'+_0x6e40af[_0x5135f4(0x1f2)]+'\x20'+(_0x6e40af[_0x5135f4(0x24e)]>0x0?'added':_0x5135f4(0x3b3))+_0x5135f4(0x376)));}else logger['debug'](_0x5135f4(0x26d)+Math[_0x5135f4(0x3a2)](_0x6e40af['number'])+'\x20'+_0x6e40af[_0x5135f4(0x1f2)]+'\x20'+(_0x6e40af[_0x5135f4(0x24e)]>0x0?'added':_0x5135f4(0x3b3)));}else logger[_0x5135f4(0x1f4)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5135f4(0x3a2)](_0x6e40af[_0x5135f4(0x24e)])+'\x20'+_0x6e40af[_0x5135f4(0x1f2)]+'\x20'+(_0x6e40af[_0x5135f4(0x24e)]>0x0?_0x5135f4(0x2f6):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x4fb4ae,currentCoinsAll=_0x323101;}catch(_0x7af41b){if(!exchangeStopped)await handleError(_0x7af41b,_0x5135f4(0x362));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x167d52=_0xde38f7;try{markets=await exchange[_0x167d52(0x313)](),allSymbols=[],Object[_0x167d52(0x289)](markets)[_0x167d52(0x277)](_0x84e471=>{const _0x251b8b=_0x167d52;_0x84e471[0x1][_0x251b8b(0x29f)]&&_0x84e471[0x1][_0x251b8b(0x211)]&&allSymbols[_0x251b8b(0x372)](_0x84e471[0x0]);});}catch(_0x36e8a5){throw _0x36e8a5;}}function validateSymbols(_0x35e618){const _0x4a27a7=_0xde38f7;let _0x1c1b76=[];return _0x35e618[_0x4a27a7(0x277)](_0x43fbf2=>{const _0xd8fb75=_0x4a27a7;!allSymbols[_0xd8fb75(0x35f)](_0x43fbf2)?logHistory(_0xd8fb75(0x2f1),'Invalid\x20symbol:\x20'+_0x43fbf2+_0xd8fb75(0x2df)):_0x1c1b76['push'](_0x43fbf2);}),_0x1c1b76;}async function initclient(){const _0x8563e=_0xde38f7;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x8563e(0x367),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x15b3d0=getNormalizedPerformance();emitPerformance(_0x15b3d0),getStartingBalances(_0x15b3d0);}async function toggleBotMode(){const _0x554cb3=_0xde38f7;let _0x5bf0b7=dbConfig[_0x554cb3(0x235)](_0x554cb3(0x22c))[_0x554cb3(0x267)]({'botID':botID})['value']();if(_0x5bf0b7){const _0x51c91e=!_0x5bf0b7[_0x554cb3(0x3b1)];dbConfig[_0x554cb3(0x235)](_0x554cb3(0x22c))[_0x554cb3(0x267)]({'botID':botID})['assign']({'headless':_0x51c91e})[_0x554cb3(0x290)](),config[_0x554cb3(0x3b1)]=_0x51c91e,proxyEmit(_0x554cb3(0x374),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4f12e1=_0xde38f7;process[_0x4f12e1(0x22e)]({'updatebotmanager':!![]},_0x14ea6b=>{}),logger[_0x4f12e1(0x1f4)](_0x4f12e1(0x391)+config['headless']);}async function loadCoins(_0x5b8521){const _0x3c1fca=_0xde38f7;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x34ba44,_0x2e5a23=0x0,_0xfa4a7e=0x0;_0x5b8521[_0x3c1fca(0x277)](_0x594b41=>{const _0x11645c=_0x3c1fca;loading[_0x11645c(0x24a)][_0x11645c(0x372)](_0x594b41);}),loadingCanceled=![];let _0x2f916d=![];while(_0x34ba44!=_0x5b8521[_0x3c1fca(0x207)]+maxLoadingProgress){_0x34ba44=loadingProgress,_0x5b8521[_0x3c1fca(0x277)](_0x3ef6ac=>{const _0x5a7c17=_0x3c1fca;if(gTicker[noslash(_0x3ef6ac)]){loading['remainingSymbols']=loading['remainingSymbols'][_0x5a7c17(0x274)](_0x28bb61=>_0x28bb61!=_0x3ef6ac);if(!watchedSymbols['includes'](_0x3ef6ac))watchedSymbols[_0x5a7c17(0x372)](_0x3ef6ac);_0x34ba44++;}}),loading[_0x3c1fca(0x34b)]=Math[_0x3c1fca(0x271)](_0x34ba44/(_0x5b8521[_0x3c1fca(0x207)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0xfa4a7e>0x1e*0x5&&(loading[_0x3c1fca(0x257)]=!![],emitLoadingProgress()),_0xfa4a7e>0x78*0x5&&!_0x2f916d&&(_0x2f916d=!![],logHistory(_0x3c1fca(0x2f1),_0x3c1fca(0x2db)+loading[_0x3c1fca(0x24a)][_0x3c1fca(0x22a)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x3c1fca(0x2f1),_0x3c1fca(0x201)+loadCoinsRetryInterval/0xea60+_0x3c1fca(0x2ae)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x2e5a23!=loading[_0x3c1fca(0x34b)]&&(_0x2e5a23=loading[_0x3c1fca(0x34b)],emitLoadingProgress()),_0xfa4a7e++,await sleep(0xc8);}_0x34ba44==_0x5b8521[_0x3c1fca(0x207)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3c1fca(0x22e)]({'status':_0x3c1fca(0x2ec),'live':_0x3c1fca(0x295)},_0x246644=>{}),_0x2f916d&&logHistory(_0x3c1fca(0x1ed),_0x3c1fca(0x328)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3cff18=_0xde38f7;proxyEmit(_0x3cff18(0x374),{...emittedConfiguration(),'configstate':_0x3cff18(0x25f)});}function emitLoadingProgress(){const _0x40c0ac=_0xde38f7;proxyEmit(_0x40c0ac(0x1f9),loading);}async function getFiat(){const _0x1b3895=_0xde38f7;let _0xef2676=gTicker[stablecoins[_0x1b3895(0x2be)][_0x1b3895(0x1f2)]],_0x567f49=gTicker[stablecoins['usd'][_0x1b3895(0x1f2)]];return{'eur':Number(_0xef2676),'usd':Number(_0x567f49)};}function capitalize(_0x209974){const _0x1ceaa4=_0xde38f7;return _0x209974[_0x1ceaa4(0x225)](0x0,0x1)['toUpperCase']()+_0x209974[_0x1ceaa4(0x225)](0x1);}function supportedExchanges(){const _0x4ecb46=_0xde38f7,_0x35690a=['ws',_0x4ecb46(0x245),_0x4ecb46(0x316),_0x4ecb46(0x2aa),'watchOrders',_0x4ecb46(0x3a1),_0x4ecb46(0x319),'fetchOpenOrders','fetchClosedOrders',_0x4ecb46(0x331)];let _0x3a3eea=[],_0x9b9440=[],_0x233620=ccxt['pro'][_0x4ecb46(0x368)];_0x233620['forEach'](_0x2820d1=>{const _0x504635=_0x4ecb46;try{const _0x44e909=new ccxt[(_0x504635(0x2cf))][_0x2820d1]();_0x9b9440[_0x504635(0x372)](_0x44e909);}catch(_0x5b751a){}}),_0x9b9440[_0x4ecb46(0x277)](_0x123edd=>{const _0x27cefe=_0x4ecb46;let _0xb2afc5=0x0;_0x35690a[_0x27cefe(0x277)](_0x5d4dd2=>{const _0x1d197d=_0x27cefe;_0x5d4dd2 in _0x123edd['has']&&_0x123edd[_0x1d197d(0x2cb)][_0x5d4dd2]&&_0xb2afc5++;}),_0xb2afc5==_0x35690a[_0x27cefe(0x207)]&&_0x3a3eea['push'](capitalize(_0x123edd['id']));});let _0x2a7ab8=[];return _0x233620[_0x4ecb46(0x277)](_0x43a0cf=>{const _0x167f5c=_0x4ecb46;_0x43a0cf=capitalize(_0x43a0cf);if(!_0x3a3eea[_0x167f5c(0x35f)](_0x43a0cf))_0x2a7ab8[_0x167f5c(0x372)](_0x43a0cf);}),_0x3a3eea;}function setStartDatePerformance(){const _0x2eb567=_0xde38f7;if(config&&config['liquidity'][0x0][_0x2eb567(0x397)]['length']!=0x0){const _0x546815=config[_0x2eb567(0x26f)][0x0][_0x2eb567(0x397)];dbPerformance[_0x2eb567(0x235)](_0x2eb567(0x283))[_0x2eb567(0x267)]({'date':config['startdate']})[_0x2eb567(0x370)]({'coins':_0x546815})[_0x2eb567(0x290)]();}}async function recreateCoinResults(){const _0x55a0e7=_0xde38f7;recreationNeeded=![];let _0x385223,_0x528af0=[];try{for(const _0x1fe63e of currentCoins){if(_0x1fe63e[_0x55a0e7(0x1f2)]!=config[_0x55a0e7(0x311)]){let _0x2b38d4=0x0,_0x3fff3b,_0xb34133;_0x385223=await getAllEventOrders(_0x1fe63e[_0x55a0e7(0x204)]);if(_0x385223[_0x55a0e7(0x207)]>0x0)_0x385223[_0x55a0e7(0x277)](_0x227fbb=>{const _0x102758=_0x55a0e7,_0x166b96=_0x1fe63e[_0x102758(0x204)][_0x102758(0x35f)](config[_0x102758(0x311)]+'/');_0x528af0[_0x102758(0x372)]({'datetime':_0x227fbb[_0x102758(0x360)],'coin':_0x1fe63e[_0x102758(0x1f2)],'symbol':_0x1fe63e[_0x102758(0x204)],'side':_0x227fbb[_0x102758(0x3af)],'reverse':_0x166b96,'amount':formatResult(_0x227fbb[_0x102758(0x37c)],0x8),'filled':formatResult(_0x227fbb[_0x102758(0x37c)],0x8),'price':formatResult(_0x227fbb['price'],0x8)}),_0x2b38d4=_0x227fbb[_0x102758(0x3af)]==_0x102758(0x2e3)?_0x2b38d4+_0x227fbb[_0x102758(0x37c)]:_0x2b38d4-_0x227fbb[_0x102758(0x37c)];if(!_0xb34133)_0xb34133=_0x227fbb[_0x102758(0x221)];});_0x3fff3b=_0x1fe63e[_0x55a0e7(0x24e)]-_0x2b38d4;let _0x46185f;config[_0x55a0e7(0x26f)][_0x55a0e7(0x277)](_0x42c28c=>{const _0x10f2d5=_0x55a0e7;!_0x46185f&&(_0x46185f=_0x42c28c[_0x10f2d5(0x397)][_0x10f2d5(0x267)](_0x485256=>_0x485256[_0x10f2d5(0x1f2)]==_0x1fe63e[_0x10f2d5(0x1f2)]),_0x46185f&&(_0x3fff3b=_0x46185f[_0x10f2d5(0x24e)],_0xb34133=_0x46185f[_0x10f2d5(0x221)]));});let _0x58da89=dbCoinResults[_0x55a0e7(0x235)]('coins')['find']({'coin':_0x1fe63e[_0x55a0e7(0x1f2)]})[_0x55a0e7(0x34d)]();_0x58da89={'coin':_0x1fe63e[_0x55a0e7(0x1f2)],'number':_0x3fff3b,'breakeven':_0xb34133,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x55a0e7(0x235)](_0x55a0e7(0x2c4))[_0x55a0e7(0x267)]({'coin':_0x1fe63e[_0x55a0e7(0x1f2)]})[_0x55a0e7(0x370)](_0x58da89)['write']();}}_0x528af0['sort']((_0x3ea2c6,_0x552f00)=>_0x3ea2c6[_0x55a0e7(0x360)]>_0x552f00[_0x55a0e7(0x360)]?0x1:_0x552f00[_0x55a0e7(0x360)]>_0x3ea2c6['datetime']?-0x1:0x0);let _0x3318d6=0x0;for(let _0x668d90 of _0x528af0){await updateCoinResults(_0x668d90,!![]);}}catch(_0x18a512){await handleError(_0x18a512,'recreateCoinResults()');}}async function getAllEventOrders(_0x2a11f4){const _0x154d2d=_0xde38f7;let _0x27d76c=[],_0x3b9f62=dbLogs[_0x154d2d(0x235)](_0x154d2d(0x278))[_0x154d2d(0x274)](_0x1d4892=>{const _0x56d977=_0x154d2d,_0x198d38=_0x1d4892[_0x56d977(0x2d4)][_0x56d977(0x21f)]();return _0x198d38['includes'](_0x2a11f4[_0x56d977(0x21f)]())&&(_0x198d38['includes'](_0x56d977(0x2f9))&&_0x198d38['includes'](_0x56d977(0x233))||_0x198d38[_0x56d977(0x35f)](_0x56d977(0x37c))&&_0x198d38[_0x56d977(0x35f)](_0x56d977(0x233)));})[_0x154d2d(0x366)](_0x154d2d(0x3ac))['value']();return _0x3b9f62['forEach'](_0x423b84=>{const _0x538061=_0x154d2d,_0xf16ef9=_0x423b84[_0x538061(0x2d4)][_0x538061(0x35f)](_0x538061(0x243))?_0x538061(0x243):_0x538061(0x2e3),_0x1f93e2=/#([0-9]|\.)+\s/i,_0x3708b2=Number(_0x1f93e2['exec'](_0x423b84[_0x538061(0x2d4)])[0x0][_0x538061(0x398)](0x1)),_0x187da2=/@([0-9]|\.)+$/i,_0x3a55d8=Number(_0x187da2[_0x538061(0x26a)](_0x423b84[_0x538061(0x2d4)])[0x0][_0x538061(0x398)](0x1));_0x27d76c[_0x538061(0x372)]({'datetime':_0x423b84['time'],'coin':symbolToCoin(_0x2a11f4),'symbol':_0x2a11f4,'side':_0xf16ef9,'amount':_0x3708b2,'filled':_0x3708b2,'price':_0x3a55d8});}),_0x27d76c;}async function getAllOrders(_0x261369,_0x39c161){const _0x7d94f1=_0xde38f7;let _0x187055=[];while(_0x39c161<exchange[_0x7d94f1(0x2f8)]()){const _0x30fda8=0x1f4;try{const _0x4788c2=await exchange['fetchClosedOrders'](_0x261369,_0x39c161,_0x30fda8);if(_0x4788c2['length'])_0x39c161=_0x4788c2[_0x4788c2[_0x7d94f1(0x207)]-0x1]['timestamp']+0x1,_0x187055=_0x187055[_0x7d94f1(0x232)](_0x4788c2);else break;}catch(_0x3e1990){await handleError(_0x3e1990,_0x7d94f1(0x2a8),_0x261369);}}return _0x187055;}async function validate24hChanges(){const _0x479285=_0xde38f7;for(const _0x28e896 of currentCoins){if(_0x28e896['coin']!=config['basecoin']){let _0x4ddd66;_0x28e896['reverse']?_0x4ddd66=formatResult((0x1/(gChange[_0x28e896['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x4ddd66=gChange[_0x28e896['symbol']],_0x4ddd66<config[_0x479285(0x269)]&&(logHistory(_0x479285(0x2f1),_0x28e896[_0x479285(0x1f2)]+_0x479285(0x23f)+_0x4ddd66+'%'),logHistory('error',_0x479285(0x213)),logHistory(_0x479285(0x2f1),_0x479285(0x2cd)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x390475,_0x7d8aae){const _0x1e5c13=_0xde38f7;if(!_0x390475)return!![];const _0x245383=_0x7d8aae[_0x1e5c13(0x3b2)]('.'),_0x6282cc=_0x390475[_0x1e5c13(0x3b2)]('.');for(var _0x10d50c=0x0;_0x10d50c<_0x6282cc[_0x1e5c13(0x207)];_0x10d50c++){const _0xb63750=~~_0x6282cc[_0x10d50c],_0x1fde03=~~_0x245383[_0x10d50c];if(_0xb63750<_0x1fde03)return!![];if(_0xb63750>_0x1fde03)return![];}return![];}async function oneTimeMigration(){const _0x548d37=_0xde38f7;let _0x26aae1=dbLogs[_0x548d37(0x235)](_0x548d37(0x390))[_0x548d37(0x34d)]();if(isOlderVersion(_0x26aae1,_0x548d37(0x2b1))){let _0x58a57e=[];const _0x441ca4=dbLogs[_0x548d37(0x235)](_0x548d37(0x278))[_0x548d37(0x34d)]();_0x441ca4[_0x548d37(0x277)](_0x137294=>{const _0x4f5c31=_0x548d37;_0x58a57e[_0x4f5c31(0x372)]({'time':_0x137294[_0x4f5c31(0x3ac)],'type':_0x137294[_0x4f5c31(0x2da)],'event':_0x137294[_0x4f5c31(0x2d4)]});}),dbLogs['get'](_0x548d37(0x278))['assign'](_0x58a57e)[_0x548d37(0x290)]();}let _0x3f41ac=dbConfig[_0x548d37(0x235)](_0x548d37(0x390))['value']();if(isOlderVersion(_0x3f41ac,'2.3.5')){let _0x58412d=dbConfig['get'](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x34d)]();if(_0x58412d){let _0x3dc75a=[];_0x58412d['portfolio']['forEach'](_0x4725f3=>{const _0x4b8bda=_0x548d37;_0x3dc75a[_0x4b8bda(0x372)]({'coin':_0x4725f3[_0x4b8bda(0x1f2)],'number':_0x4725f3[_0x4b8bda(0x22b)],'price':_0x4725f3[_0x4b8bda(0x2b9)]}),delete _0x4725f3[_0x4b8bda(0x22b)],delete _0x4725f3['startprice'];});if(_0x3dc75a['length']!==0x0)fs['writeFile'](configbackuppath+(_0x548d37(0x2dc)+botID+'.json'),JSON['stringify'](_0x3dc75a,null,0x4),function(_0x24e386){if(_0x24e386){}});const _0x5b2b57=(_0x854c3c,_0x367561)=>{const _0xc78b0b=_0x548d37;let _0x1b360f=[];_0x367561[_0xc78b0b(0x277)](_0x4d410c=>{const _0x2cd09a=_0xc78b0b,_0x34583d=_0x854c3c[_0x2cd09a(0x267)](_0x19aff7=>_0x19aff7[_0x2cd09a(0x1f2)]==_0x4d410c[_0x2cd09a(0x1f2)]);if(!_0x34583d)_0x1b360f[_0x2cd09a(0x372)](_0x4d410c);});let _0x425931=[];return _0x854c3c[_0xc78b0b(0x277)](_0x1ed7c3=>{const _0x51bb4e=_0xc78b0b,_0xfcaebb=_0x367561[_0x51bb4e(0x267)](_0x310827=>_0x310827[_0x51bb4e(0x1f2)]==_0x1ed7c3['coin']);if(!_0xfcaebb||_0xfcaebb['number']==0x0&&_0x1ed7c3['number']!=0x0)_0x425931[_0x51bb4e(0x372)](_0x1ed7c3);}),{'missingDay1':_0x1b360f,'notInDay2':_0x425931};},_0x213669=dbPerformance[_0x548d37(0x235)]('data')[_0x548d37(0x231)]()[_0x548d37(0x34d)]();if(_0x213669[_0x548d37(0x207)]>0x1){const {missingDay1:_0x1dc38c,notInDay2:_0x276a8b}=_0x5b2b57(_0x3dc75a,_0x213669[0x1][_0x548d37(0x2c4)]);_0x3dc75a=[..._0x3dc75a,..._0x1dc38c],_0x276a8b[_0x548d37(0x277)](_0x44bd8e=>{const _0x1c3503=_0x548d37;let _0x222097=_0x3dc75a[_0x1c3503(0x345)](_0x3d01f8=>_0x3d01f8[_0x1c3503(0x1f2)]==_0x44bd8e[_0x1c3503(0x1f2)]);_0x222097!=-0x1&&_0x3dc75a['splice'](_0x222097,0x1);});}_0x3dc75a[_0x548d37(0x2fe)]((_0x35c28a,_0x186547)=>_0x35c28a[_0x548d37(0x1f2)]>_0x186547[_0x548d37(0x1f2)]?0x1:_0x186547[_0x548d37(0x1f2)]>_0x35c28a[_0x548d37(0x1f2)]?-0x1:0x0);let _0x3b7884=[{'date':_0x58412d[_0x548d37(0x379)],'changes':_0x3dc75a}];_0x213669['length']>0x2&&_0x213669[_0x548d37(0x277)]((_0x4bd116,_0x49ebba)=>{const _0x1d22d2=_0x548d37;if(_0x49ebba>0x0&&_0x49ebba<_0x213669[_0x1d22d2(0x207)]-0x1){const {missingDay1:_0x6d840,notInDay2:_0xfb350d}=_0x5b2b57(_0x213669[_0x49ebba][_0x1d22d2(0x2c4)],_0x213669[_0x49ebba+0x1][_0x1d22d2(0x2c4)]);_0x3dc75a=[],(_0x6d840[_0x1d22d2(0x207)]!=0x0||_0xfb350d[_0x1d22d2(0x207)]!=0x0)&&(_0x6d840[_0x1d22d2(0x207)]!=0x0&&_0x3dc75a[_0x1d22d2(0x372)](..._0x6d840),_0xfb350d['length']!=0x0&&(_0xfb350d[_0x1d22d2(0x277)](_0x37eccf=>{const _0x5203eb=_0x1d22d2;_0x37eccf[_0x5203eb(0x24e)]=-_0x37eccf['number'];}),_0x3dc75a[_0x1d22d2(0x372)](..._0xfb350d)),_0x3dc75a['sort']((_0x417b28,_0x3a1e85)=>_0x417b28['coin']>_0x3a1e85['coin']?0x1:_0x3a1e85['coin']>_0x417b28[_0x1d22d2(0x1f2)]?-0x1:0x0),_0x3b7884[_0x1d22d2(0x372)]({'date':_0x213669[_0x49ebba+0x1][_0x1d22d2(0x30b)],'changes':_0x3dc75a}));}}),dbConfig[_0x548d37(0x235)](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x370)]({..._0x58412d,'liquidity':_0x3b7884})[_0x548d37(0x290)]();}}if(isOlderVersion(_0x3f41ac,_0x548d37(0x347))){let _0x1605c4=dbConfig[_0x548d37(0x235)](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x34d)]();if(_0x1605c4){const _0x2cc7fc=_0x1605c4[_0x548d37(0x363)],_0x5bbf17=_0x2cc7fc?capitalize(_0x2cc7fc):_0x548d37(0x336);dbConfig[_0x548d37(0x235)](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x370)]({'exchange':_0x5bbf17})[_0x548d37(0x290)]();}}if(isOlderVersion(_0x3f41ac,_0x548d37(0x327))){let _0xe3e5fe=dbConfig['get'](_0x548d37(0x22c))['find']({'botID':botID})[_0x548d37(0x34d)]();if(_0xe3e5fe){const _0x3547c2=_0xe3e5fe[_0x548d37(0x255)],_0x590e68=_0x3547c2?_0x548d37(0x2b3):![];dbConfig['get'](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x370)]({'marketcapEnabled':_0x590e68})['write']();}}if(isOlderVersion(_0x3f41ac,'2.6.23')){let _0x59e90d=dbConfig[_0x548d37(0x235)](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x34d)]();if(_0x59e90d){const _0x1b8d53=_0x59e90d[_0x548d37(0x230)],_0x2444cc=_0x1b8d53?'update-liquidity':![];dbConfig[_0x548d37(0x235)](_0x548d37(0x22c))[_0x548d37(0x267)]({'botID':botID})[_0x548d37(0x370)]({'autoliquidity':_0x2444cc})['write']();}}let _0x287d61=dbPerformance[_0x548d37(0x235)]('version')[_0x548d37(0x34d)]();isOlderVersion(_0x287d61,'2.3.5')&&setStartDatePerformance();let _0x361c78=dbCoinResults['get'](_0x548d37(0x390))['value']();if(isOlderVersion(_0x361c78,'2.5.0')){let _0x4b16d3=dbCoinResults[_0x548d37(0x235)]('coins')[_0x548d37(0x34d)]();if(_0x4b16d3[_0x548d37(0x207)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2c1949=_0xde38f7;dbConfig[_0x2c1949(0x2e7)](_0x2c1949(0x390),serverversion)[_0x2c1949(0x290)](),dbPerformance[_0x2c1949(0x2e7)](_0x2c1949(0x390),serverversion)['write'](),dbLogs['set'](_0x2c1949(0x390),serverversion)[_0x2c1949(0x290)](),dbCoinResults['set'](_0x2c1949(0x390),serverversion)[_0x2c1949(0x290)]();}function getConfiguration(_0x22d1a8){const _0x420575=_0xde38f7;let _0x2f2dcc=dbConfig[_0x420575(0x235)]('bot')['find']({'botID':_0x22d1a8})[_0x420575(0x34d)]();if(_0x2f2dcc){let _0x2fd701=![];typeof _0x2f2dcc[_0x420575(0x250)]==_0x420575(0x2b2)&&(_0x2f2dcc={..._0x2f2dcc,'threshold':Number(_0x2f2dcc[_0x420575(0x250)])},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x269)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'change24h':-0x14},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x2cc)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'fiat':'USD'},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x308)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'onepagemode':settings[_0x420575(0x308)]},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x2a1)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'colorscheme':_0x420575(0x298)},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x230)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'autoliquidity':_0x420575(0x375)},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x272)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'marketcapApi':settings[_0x420575(0x272)]?!![]:![]},_0x2fd701=!![]),_0x2f2dcc[_0x420575(0x255)]==undefined&&(_0x2f2dcc={..._0x2f2dcc,'marketcapEnabled':![]},_0x2fd701=!![]),_0x2fd701&&(_0x2f2dcc={'botID':_0x2f2dcc[_0x420575(0x3a3)],'exchange':_0x2f2dcc[_0x420575(0x363)],'apiKey':_0x2f2dcc[_0x420575(0x35e)],'apiSecret':_0x2f2dcc['apiSecret'],'apiPassword':_0x2f2dcc[_0x420575(0x2e0)],'basecoin':_0x2f2dcc['basecoin'],'botname':_0x2f2dcc[_0x420575(0x258)],'showname':_0x2f2dcc[_0x420575(0x3a6)],'threshold':_0x2f2dcc[_0x420575(0x250)],'ordertype':_0x2f2dcc['ordertype'],'timeout':_0x2f2dcc[_0x420575(0x257)],'fiat':_0x2f2dcc['fiat'],'startdate':_0x2f2dcc[_0x420575(0x379)],'recreate':_0x2f2dcc[_0x420575(0x2b0)],'timeshift':_0x2f2dcc['timeshift'],'onepagemode':_0x2f2dcc['onepagemode'],'headless':_0x2f2dcc[_0x420575(0x3b1)],'cooldown':_0x2f2dcc[_0x420575(0x2c9)],'change24h':_0x2f2dcc[_0x420575(0x269)],'emojibuy':_0x2f2dcc[_0x420575(0x37d)],'emojisell':_0x2f2dcc[_0x420575(0x2ba)],'colorscheme':_0x2f2dcc[_0x420575(0x2a1)],'marketcapApi':_0x2f2dcc[_0x420575(0x272)],'marketcapEnabled':_0x2f2dcc['marketcapEnabled'],'portfolio':_0x2f2dcc[_0x420575(0x23b)],'autoliquidity':_0x2f2dcc[_0x420575(0x230)],'liquidity':_0x2f2dcc[_0x420575(0x26f)],'openOrders':_0x2f2dcc[_0x420575(0x2d7)]},dbConfig['get'](_0x420575(0x22c))[_0x420575(0x32c)]()[_0x420575(0x290)](),dbConfig[_0x420575(0x235)](_0x420575(0x22c))[_0x420575(0x372)](_0x2f2dcc)[_0x420575(0x290)]());}else _0x2f2dcc={'botID':_0x22d1a8,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x420575(0x2ef)+_0x22d1a8,'showname':![],'threshold':0x3,'ordertype':_0x420575(0x2f9),'timeout':0x14,'fiat':_0x420575(0x395),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x420575(0x2c3)],'onepagemode':settings[_0x420575(0x308)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x420575(0x298),'marketcapApi':settings[_0x420575(0x272)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x420575(0x375),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2f2dcc;}function emittedConfiguration(){const _0x2c5378=_0xde38f7;let _0x263b0d;if(config[_0x2c5378(0x35e)]=='')_0x263b0d={...config,'configstate':_0x2c5378(0x30d)};else config['apiKey']==_0x2c5378(0x2ca)?_0x263b0d={...config,'configstate':'recovery'}:(_0x263b0d={...config,'apiKey':_0x2c5378(0x20b),'apiSecret':_0x2c5378(0x20b)},config[_0x2c5378(0x2e0)]&&(_0x263b0d[_0x2c5378(0x2e0)]='************'));return _0x263b0d;}function getSettings(){const _0x93e7f3=_0xde38f7;return dbSettings['get'](_0x93e7f3(0x2a2))[_0x93e7f3(0x34d)]();}function getSecure(){const _0x1897d3=_0xde38f7;return dbSecure[_0x1897d3(0x235)](_0x1897d3(0x38c))[_0x1897d3(0x34d)]()||{};}function updateTimeshift(_0x10551f){const _0x24482d=_0xde38f7;let _0xa330de=dbConfig[_0x24482d(0x235)](_0x24482d(0x22c))[_0x24482d(0x267)]({'botID':botID})[_0x24482d(0x34d)]();_0xa330de&&dbConfig['get']('bot')['find']({'botID':botID})['assign']({'timeshift':_0x10551f})['write'](),config['timeshift']=_0x10551f,proxyEmit(_0x24482d(0x374),emittedConfiguration());}function updateOnepagemode(_0x2cba38){const _0x3ef1ab=_0xde38f7;let _0x30962b=dbConfig[_0x3ef1ab(0x235)](_0x3ef1ab(0x22c))[_0x3ef1ab(0x267)]({'botID':botID})[_0x3ef1ab(0x34d)]();_0x30962b&&dbConfig['get'](_0x3ef1ab(0x22c))[_0x3ef1ab(0x267)]({'botID':botID})[_0x3ef1ab(0x370)]({'onepagemode':_0x2cba38})[_0x3ef1ab(0x290)](),config[_0x3ef1ab(0x308)]=_0x2cba38,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x1f39e0){const _0x386484=_0xde38f7,_0x304572=_0x1f39e0?!![]:![];let _0x4a95fe=dbConfig[_0x386484(0x235)]('bot')[_0x386484(0x267)]({'botID':botID})['value']();_0x4a95fe&&dbConfig[_0x386484(0x235)](_0x386484(0x22c))[_0x386484(0x267)]({'botID':botID})[_0x386484(0x370)]({'marketcapApi':_0x304572})['write'](),config[_0x386484(0x272)]=_0x304572,getMarketCap(),proxyEmit(_0x386484(0x374),emittedConfiguration());}async function storeConfiguration(_0x1dda4c){const _0xe4e041=_0xde38f7;logger[_0xe4e041(0x1f4)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x594215=![],_0x431279=![],_0x3d02a4=[];_0x1dda4c[_0xe4e041(0x23b)][_0xe4e041(0x277)](_0x450752=>{const _0x20fe1f=_0xe4e041;if(!_0x450752['excluded']&&_0x450752[_0x20fe1f(0x1f2)]!=_0x1dda4c[_0x20fe1f(0x311)])_0x3d02a4[_0x20fe1f(0x372)](_0x450752[_0x20fe1f(0x204)]);}),_0x3d02a4['forEach'](_0x4aabaa=>{const _0x2611a4=_0xe4e041,_0x2508b3=currentCoins[_0x2611a4(0x267)](_0x5e59ce=>_0x5e59ce[_0x2611a4(0x204)]==_0x4aabaa);!_0x2508b3&&(_0x594215=!![]);}),currentCoins[_0xe4e041(0x277)](_0x23853a=>{const _0x1872d9=_0xe4e041;if(_0x23853a[_0x1872d9(0x1f2)]!=config[_0x1872d9(0x311)]){const _0xf04157=_0x3d02a4[_0x1872d9(0x267)](_0x460dd4=>_0x460dd4==_0x23853a['symbol']);!_0xf04157&&(_0x594215=!![]);}}),_0x1dda4c['portfolio'][_0xe4e041(0x277)](_0x746806=>{const _0x311fab=_0xe4e041,_0x5017eb=config[_0x311fab(0x23b)][_0x311fab(0x267)](_0x5d8f43=>_0x5d8f43[_0x311fab(0x1f2)]==_0x746806[_0x311fab(0x1f2)]);if(_0x5017eb&&_0x746806[_0x311fab(0x349)]!=_0x5017eb['offset'])_0x431279=!![];});let _0x434f94=dbConfig['get'](_0xe4e041(0x22c))['find']({'botID':botID})[_0xe4e041(0x34d)]();_0x1dda4c={..._0x1dda4c,'apiKey':crypt[_0xe4e041(0x1f0)](secure[_0xe4e041(0x26b)],_0x1dda4c[_0xe4e041(0x35e)])[_0xe4e041(0x2c7)],'apiSecret':crypt[_0xe4e041(0x1f0)](secure[_0xe4e041(0x26b)],_0x1dda4c[_0xe4e041(0x24c)])[_0xe4e041(0x2c7)]};_0x1dda4c[_0xe4e041(0x2e0)]&&(_0x1dda4c[_0xe4e041(0x2e0)]=crypt[_0xe4e041(0x1f0)](secure[_0xe4e041(0x26b)],_0x1dda4c[_0xe4e041(0x2e0)])[_0xe4e041(0x2c7)]);let _0x33efc8=![];if(_0x434f94){_0x1dda4c['apiKey']==_0xe4e041(0x20b)?_0x1dda4c[_0xe4e041(0x35e)]=config['apiKey']:_0x33efc8=!![];_0x1dda4c['apiSecret']==_0xe4e041(0x20b)?_0x1dda4c[_0xe4e041(0x24c)]=config[_0xe4e041(0x24c)]:_0x33efc8=!![];if(_0x1dda4c[_0xe4e041(0x2e0)]==_0xe4e041(0x20b))_0x1dda4c[_0xe4e041(0x2e0)]=config[_0xe4e041(0x2e0)];else{if(_0x1dda4c[_0xe4e041(0x2e0)])_0x33efc8=!![];}dbConfig['get']('bot')[_0xe4e041(0x267)]({'botID':botID})[_0xe4e041(0x370)](_0x1dda4c)[_0xe4e041(0x290)]();}else dbConfig[_0xe4e041(0x235)](_0xe4e041(0x22c))['push'](_0x1dda4c)[_0xe4e041(0x290)](),_0x33efc8=!![],process['send']({'status':_0xe4e041(0x2ec),'live':_0xe4e041(0x295)},_0x40a45e=>{});process[_0xe4e041(0x22e)]({'botname':_0x1dda4c[_0xe4e041(0x258)]},_0x363f6d=>{}),config={..._0x1dda4c},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x33efc8)!_0x434f94?await reset(!![]):getBalances();else _0x594215||_0x431279?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4aa6ef){const _0x5d20e5=_0xde38f7,_0x53e430={...config,'headless':_0x4aa6ef[_0x5d20e5(0x3b1)]};let _0xf09864=dbConfig[_0x5d20e5(0x235)]('bot')[_0x5d20e5(0x267)]({'botID':botID})[_0x5d20e5(0x34d)]();_0xf09864&&dbConfig[_0x5d20e5(0x235)](_0x5d20e5(0x22c))[_0x5d20e5(0x267)]({'botID':botID})[_0x5d20e5(0x370)](_0x53e430)[_0x5d20e5(0x290)](),config={..._0x53e430},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x757153){const _0xe6196b=_0xde38f7,_0x26598b={...config,'fiat':_0x757153};let _0x2a2214=dbConfig['get'](_0xe6196b(0x22c))[_0xe6196b(0x267)]({'botID':botID})['value']();_0x2a2214&&dbConfig[_0xe6196b(0x235)](_0xe6196b(0x22c))[_0xe6196b(0x267)]({'botID':botID})[_0xe6196b(0x370)](_0x26598b)['write'](),config={..._0x26598b},proxyEmit(_0xe6196b(0x374),emittedConfiguration());}function resetHistory(){const _0x4ac692=_0xde38f7;logger['full'](_0x4ac692(0x209));try{if(fs[_0x4ac692(0x39b)](path[_0x4ac692(0x22a)](configpath,'bot-'+botID+_0x4ac692(0x38d))))fs[_0x4ac692(0x38b)](path['join'](configpath,_0x4ac692(0x39a)+botID+_0x4ac692(0x38d)));if(fs['existsSync'](path[_0x4ac692(0x22a)](configpath,_0x4ac692(0x39a)+botID+'-performance.json')))fs['unlinkSync'](path[_0x4ac692(0x22a)](configpath,_0x4ac692(0x39a)+botID+'-performance.json'));if(fs['existsSync'](path[_0x4ac692(0x22a)](configpath,_0x4ac692(0x39a)+botID+_0x4ac692(0x25b))))fs[_0x4ac692(0x38b)](path['join'](configpath,'bot-'+botID+'-results.json'));}catch(_0x46d190){if(_0x46d190)logger[_0x4ac692(0x268)](_0x4ac692(0x37e),_0x46d190);}const _0x48fcd1=getDate();let _0x4df276=[];currentCoins[_0x4ac692(0x277)](_0x3a05d8=>{const _0xffb31=_0x4ac692;_0x4df276[_0xffb31(0x372)]({'coin':_0x3a05d8['coin'],'number':_0x3a05d8[_0xffb31(0x24e)],'price':_0x3a05d8['last']});});let _0x5c4487=dbConfig['get'](_0x4ac692(0x22c))['find']({'botID':botID})[_0x4ac692(0x34d)]();_0x5c4487&&(dbConfig[_0x4ac692(0x235)](_0x4ac692(0x22c))['find']({'botID':botID})[_0x4ac692(0x370)]({'liquidity':[{'date':_0x48fcd1,'changes':_0x4df276}]})[_0x4ac692(0x290)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x36ca46){const _0xa33735=_0xde38f7;return _0x36ca46[_0xa33735(0x2a0)]('/','');}function updateHighestFee(_0x597ac0){const _0x344169=_0xde38f7;if(_0x597ac0[_0x344169(0x32e)]){let _0x2a3c82={'filled':_0x597ac0[_0x344169(0x37c)]*_0x597ac0[_0x344169(0x221)],'amount':_0x597ac0['filled']*_0x597ac0[_0x344169(0x221)],'side':_0x597ac0[_0x344169(0x3af)]==_0x344169(0x243)?_0x344169(0x2e3):_0x344169(0x243),'price':0x1/_0x597ac0[_0x344169(0x221)]};_0x597ac0={..._0x597ac0,..._0x2a3c82};}const _0x5b6b3c=defaultFee*_0x597ac0[_0x344169(0x37c)]*_0x597ac0['price'];lastFees['recent20']['length']===0x14&&lastFees[_0x344169(0x31a)][_0x344169(0x3ad)](),lastFees[_0x344169(0x31a)][_0x344169(0x372)](_0x5b6b3c),lastFees['highest']=Math['max'](...lastFees[_0x344169(0x31a)]);}async function updateNumberCoinsCcxt(_0x30fce7){const _0x240a64=_0xde38f7;logger[_0x240a64(0x1f4)](_0x240a64(0x2d2)+_0x30fce7[_0x240a64(0x204)]+'\x20|\x20'+_0x30fce7[_0x240a64(0x3a5)]+'\x20|\x20'+_0x30fce7['filled']+_0x240a64(0x22d)+_0x30fce7[_0x240a64(0x27d)]+_0x240a64(0x202)+_0x30fce7['id']);let _0x6b72ee=_0x30fce7[_0x240a64(0x3a5)],_0x1e9ac5=![];currentCoins['forEach'](_0x20a493=>{const _0x4ae55b=_0x240a64;_0x20a493['symbol']==_0x30fce7[_0x4ae55b(0x204)]&&(_0x1e9ac5=!![]);});if(!_0x1e9ac5)return;const _0x8d5575=currentCoins['find'](_0x2679d9=>_0x2679d9[_0x240a64(0x204)]==_0x30fce7[_0x240a64(0x204)]),_0x36385f=_0x6698a5=>{const _0x26413c=_0x240a64;if(_0x8d5575)_0x8d5575[_0x26413c(0x2a7)]=_0x6698a5;};let _0x2565f1=![];for(const _0x1c2a7e of lastOrders){const _0x3fa209=0x64,_0x327cc0=0x1388;let _0x4fd725=0x0;while(!_0x1c2a7e[_0x240a64(0x2eb)]&&_0x4fd725*_0x3fa209<_0x327cc0){_0x4fd725++,await sleep(_0x3fa209);}if(_0x4fd725>0x0)logger[_0x240a64(0x1f4)]('Waited\x20'+_0x4fd725*_0x3fa209/0x3e8+_0x240a64(0x20c));_0x1c2a7e['orderId']==_0x30fce7['id']&&(_0x2565f1=!![]);}if(_0x6b72ee==_0x240a64(0x350)){_0x36385f(_0x240a64(0x350));if(_0x30fce7['filled']>0x0){if(_0x2565f1){setBlockTransactionDetection(!![]),logger[_0x240a64(0x1f4)](_0x240a64(0x2f3)+_0x30fce7['id']);const _0x5bd430=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5bd430,setBlockTransactionDetection(![]);}else logger[_0x240a64(0x1f4)](_0x240a64(0x343)+_0x30fce7['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x6b72ee=='canceled'){_0x36385f('canceled');const _0x116664=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x116664,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x6b72ee==_0x240a64(0x33c)){if(lastOrders)for(const _0x3a18e3 of lastOrders){if(_0x3a18e3[_0x240a64(0x2eb)]==_0x30fce7['id']){logger['debug'](_0x240a64(0x244)+_0x30fce7['id']),_0x2565f1=!![];if(_0x3a18e3[_0x240a64(0x37c)]==0x0){setBlockTransactionDetection(!![]),logger[_0x240a64(0x1f4)](_0x240a64(0x34e)+_0x30fce7['id']);if(_0x30fce7[_0x240a64(0x2a9)])_0x3a18e3[_0x240a64(0x221)]=_0x30fce7[_0x240a64(0x2a9)];else{if(_0x30fce7['price'])_0x3a18e3[_0x240a64(0x221)]=_0x30fce7[_0x240a64(0x221)];else{}}_0x3a18e3[_0x240a64(0x37c)]=_0x30fce7[_0x240a64(0x37c)],updateHighestFee(_0x3a18e3),_0x36385f(_0x240a64(0x37c)),await validateOrders();if(lockOrders==ORDERS[_0x240a64(0x35a)]){const _0x3ef8a4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3ef8a4,setBlockTransactionDetection(![]);}_0x3a18e3[_0x240a64(0x28b)]={'currency':_0x30fce7[_0x240a64(0x28b)]?_0x30fce7[_0x240a64(0x28b)][_0x240a64(0x346)]:null,'cost':_0x30fce7[_0x240a64(0x28b)]?_0x30fce7[_0x240a64(0x28b)]['cost']:0x0},await updateCoinResults(_0x3a18e3);}}}!_0x2565f1&&(logger[_0x240a64(0x1f4)](_0x240a64(0x3a8)+_0x30fce7['id']),_0x36385f(_0x240a64(0x37c)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x926fdd=JSON['parse'](lastBalances[_0x240a64(0x23b)]);const _0x4a73ef=_0x926fdd[_0x240a64(0x267)](_0x3245f6=>_0x3245f6[_0x240a64(0x204)]==_0x30fce7[_0x240a64(0x204)]);if(_0x4a73ef){if(_0x6b72ee==_0x240a64(0x350))_0x4a73ef[_0x240a64(0x2a7)]=_0x4a73ef[_0x240a64(0x2a7)]==_0x240a64(0x37c)?'filled':_0x240a64(0x350);else{if(_0x6b72ee==_0x240a64(0x387))_0x4a73ef[_0x240a64(0x2a7)]=_0x4a73ef['orderstatus']=='filled'?_0x240a64(0x37c):'canceled';else _0x6b72ee=='closed'&&(_0x4a73ef[_0x240a64(0x2a7)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x240a64(0x318)](_0x926fdd)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x476e66=_0xde38f7;await getOpenOrders();let _0x34e65d=![];currentCoins[_0x476e66(0x277)](_0x2ab7d9=>{const _0x1a023a=_0x476e66;_0x34e65d=allOpenOrders[_0x1a023a(0x267)](_0x12367f=>_0x12367f['symbol']==_0x2ab7d9[_0x1a023a(0x204)]),_0x2ab7d9['orderstatus']=_0x34e65d?_0x1a023a(0x350):_0x1a023a(0x358);});}async function getCoins(_0xf59751=0x0,_0x1601c5=!![],_0x4cc821=config[_0xde38f7(0x311)]){const _0x3631b0=_0xde38f7;let _0x4692d5,_0x3bb285=[],_0x35296e=[],_0x4a56dc=[];if(_0xf59751)await sleep(_0xf59751);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4692d5=await exchange['fetchBalance'](),mybalances=_0x4692d5[_0x3631b0(0x2c5)];for(const [_0xb29fb,_0x330470]of Object[_0x3631b0(0x289)](mybalances)){_0x4a56dc[_0x3631b0(0x372)](_0xb29fb);}config[_0x3631b0(0x23b)][_0x3631b0(0x277)](_0x215d1f=>{const _0x2cea2a=_0x3631b0;!_0x4a56dc[_0x2cea2a(0x35f)](_0x215d1f[_0x2cea2a(0x1f2)])&&(mybalances[_0x215d1f[_0x2cea2a(0x1f2)]]=0x0);});if(_0x4cc821=='')for(const [_0x11f229,_0x1d1d57]of Object[_0x3631b0(0x289)](mybalances)){_0x1d1d57!=0x0&&_0x3bb285[_0x3631b0(0x372)]({'coin':_0x11f229});}else for(const [_0x484be9,_0x3da656]of Object[_0x3631b0(0x289)](mybalances)){const _0x5dca0d=config['portfolio'][_0x3631b0(0x267)](_0xd59a21=>_0xd59a21[_0x3631b0(0x1f2)]==_0x484be9),_0x5a17e9=_0x484be9+'/'+_0x4cc821,_0x4d6251=_0x4cc821+'/'+_0x484be9,_0x45ef4e=currentCoins['find'](_0x2b39e8=>_0x2b39e8[_0x3631b0(0x1f2)]==_0x484be9);if((_0x3da656!=0x0||_0x5dca0d)&&(allSymbols[_0x3631b0(0x35f)](_0x5a17e9)||_0x484be9==_0x4cc821))_0x45ef4e?_0x3bb285[_0x3631b0(0x372)]({..._0x45ef4e,'number':Math['max'](_0x3da656+(_0x5dca0d&&_0x5dca0d[_0x3631b0(0x349)]||0x0),0x0)}):_0x3bb285[_0x3631b0(0x372)]({'coin':_0x484be9,'symbol':_0x5a17e9,'reverse':![],'number':Math[_0x3631b0(0x203)](_0x3da656+(_0x5dca0d&&_0x5dca0d[_0x3631b0(0x349)]||0x0),0x0),'orderstatus':_0x3631b0(0x358)});else{if((_0x3da656!=0x0||_0x5dca0d)&&allSymbols[_0x3631b0(0x35f)](_0x4d6251))_0x45ef4e?_0x3bb285[_0x3631b0(0x372)]({..._0x45ef4e,'number':Math[_0x3631b0(0x203)](_0x3da656+(_0x5dca0d&&_0x5dca0d[_0x3631b0(0x349)]||0x0),0x0)}):_0x3bb285[_0x3631b0(0x372)]({'coin':_0x484be9,'symbol':_0x4d6251,'reverse':!![],'number':Math[_0x3631b0(0x203)](_0x3da656+(_0x5dca0d&&_0x5dca0d[_0x3631b0(0x349)]||0x0),0x0),'orderstatus':'none'});else _0x5dca0d&&_0x3bb285[_0x3631b0(0x372)]({'coin':_0x5dca0d[_0x3631b0(0x1f2)],'symbol':_0x5dca0d[_0x3631b0(0x204)],'reverse':_0x5dca0d[_0x3631b0(0x32e)],'number':0x0,'orderstatus':_0x3631b0(0x358)});}}}catch(_0x3b0fd0){if(!_0x1601c5)handleErrorNoStop(_0x3b0fd0,_0x3631b0(0x353));else await handleError(_0x3b0fd0,_0x3631b0(0x353));}return _0x3bb285[_0x3631b0(0x2fe)]((_0x3984ed,_0x360b08)=>_0x3984ed['delta']<_0x360b08['delta']?0x1:_0x360b08[_0x3631b0(0x352)]<_0x3984ed['delta']?-0x1:0x0),_0x35296e=cloneDeep(_0x3bb285),_0x3bb285=_0x3bb285[_0x3631b0(0x274)](_0x27e20d=>{const _0x2273bc=_0x3631b0,_0x28c44c=config[_0x2273bc(0x23b)]['find'](_0x22c4fa=>_0x22c4fa['coin']==_0x27e20d[_0x2273bc(0x1f2)]);return _0x28c44c&&!_0x28c44c[_0x2273bc(0x392)];}),[_0x3bb285,_0x35296e];}async function getCoinNumber(_0x382c6e){const _0x5007e8=_0xde38f7;let _0x4c7d0b;try{const _0x239dc1=await exchange[_0x5007e8(0x331)]();_0x4c7d0b=_0x239dc1['total'][_0x382c6e];}catch(_0x3c0d46){await handleError(_0x3c0d46,_0x5007e8(0x3a9));}return _0x4c7d0b;}async function getOpenOrders(){const _0x194e19=_0xde38f7;let _0x5ed273;allOpenOrders=[];try{for(const _0x50a292 of config[_0x194e19(0x23b)]){!_0x50a292[_0x194e19(0x392)]&&_0x50a292[_0x194e19(0x1f2)]!=config[_0x194e19(0x311)]&&(_0x5ed273=await exchange[_0x194e19(0x242)](_0x50a292['symbol']),_0x5ed273['length']>0x0&&allOpenOrders[_0x194e19(0x372)](_0x5ed273[0x0]));}}catch(_0x434765){await handleError(_0x434765,_0x194e19(0x3aa));}}async function handleOpenOrders(_0x1bc22c=0x0){const _0x28902e=_0xde38f7;allOpenOrders[_0x28902e(0x207)]==0x0&&lockOrders==ORDERS[_0x28902e(0x35a)]&&allOrdersPlaced&&(_0x1bc22c==0x0?(logger[_0x28902e(0x1f4)]('1\x20-\x20Handle\x20open\x20orders'),_0x1bc22c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x28902e(0x1f4)](_0x28902e(0x3a4)),validateOrders(_0x28902e(0x249))));}async function testAPI(_0xaae4da){const _0x47a5b7=_0xde38f7,_0x789c2e=ccxt[_0x47a5b7(0x2cf)][_0xaae4da[_0x47a5b7(0x363)][_0x47a5b7(0x21f)]()],_0x3f6729=new _0x789c2e({'apiKey':_0xaae4da['apiKey'],'secret':_0xaae4da['apiSecret'],'options':{'defaultType':_0x47a5b7(0x211)}});if(_0xaae4da[_0x47a5b7(0x2e0)])_0x3f6729[_0x47a5b7(0x253)]=_0xaae4da[_0x47a5b7(0x2e0)];try{await _0x3f6729[_0x47a5b7(0x331)]();}catch(_0x30a919){throw _0x30a919;}}function cloneDeep(_0x561448){const _0x569d3d=_0xde38f7;return JSON[_0x569d3d(0x306)](JSON[_0x569d3d(0x318)](_0x561448));}async function getPortfolio(_0x38993f){const _0x4931b0=_0xde38f7;let _0x43773d=[],_0x30eb1a=[],_0xef8f51=[],_0x40c096;if(_0x38993f[_0x4931b0(0x35e)]!==_0x4931b0(0x20b)||_0x38993f[_0x4931b0(0x24c)]!==_0x4931b0(0x20b)||_0x38993f[_0x4931b0(0x2e0)]&&_0x38993f[_0x4931b0(0x2e0)]!==_0x4931b0(0x20b)){if(config[_0x4931b0(0x363)]){if(_0x38993f[_0x4931b0(0x35e)]==_0x4931b0(0x20b))_0x38993f['apiKey']=config[_0x4931b0(0x35e)];if(_0x38993f[_0x4931b0(0x24c)]==_0x4931b0(0x20b))_0x38993f[_0x4931b0(0x24c)]=config[_0x4931b0(0x24c)];if(_0x38993f[_0x4931b0(0x2e0)]==_0x4931b0(0x20b))_0x38993f['apiPassword']=config[_0x4931b0(0x2e0)];try{await testAPI(_0x38993f);}catch(_0x3d90f1){if(_0x3d90f1[_0x4931b0(0x2f0)]()[_0x4931b0(0x35f)](_0x4931b0(0x359))){logger[_0x4931b0(0x1f4)](_0x4931b0(0x20f)),proxyEmit('portfolio',![]);return;}else{handleError(_0x3d90f1,_0x4931b0(0x393));return;}}}config[_0x4931b0(0x363)]?updateExchange(_0x38993f[_0x4931b0(0x35e)],_0x38993f[_0x4931b0(0x24c)],_0x38993f[_0x4931b0(0x2e0)]):await initExchange(_0x38993f[_0x4931b0(0x363)],_0x38993f[_0x4931b0(0x35e)],_0x38993f[_0x4931b0(0x24c)],_0x38993f['apiPassword']);try{await loadSymbols();}catch(_0x16ba58){if(_0x16ba58['toString']()[_0x4931b0(0x35f)](_0x4931b0(0x359))){proxyEmit(_0x4931b0(0x23b),![]);return;}else{handleError(_0x16ba58,_0x4931b0(0x32f));return;}}const _0x2aa0fd=await getCoins(0x0,![],_0x38993f[_0x4931b0(0x311)]);_0xef8f51=cloneDeep(_0x2aa0fd[0x1]);}else{const _0x49f204=await getCoins();_0xef8f51=cloneDeep(_0x49f204[0x1]);}if(_0x38993f[_0x4931b0(0x311)]=='')proxyEmit('portfolio',_0xef8f51);else{_0xef8f51[_0x4931b0(0x277)](_0xc991dc=>{const _0x351f90=_0x4931b0;if(_0xc991dc[_0x351f90(0x1f2)]!=_0x38993f[_0x351f90(0x311)]&&allSymbols['includes'](_0xc991dc[_0x351f90(0x204)]))_0x43773d[_0x351f90(0x372)](_0xc991dc['symbol']);});if(_0x43773d['length']==0x0)logHistory(_0x4931b0(0x2f1),_0x4931b0(0x31c));else{try{_0x30eb1a=await getTickers(_0x43773d);}catch(_0x25d702){if(_0x25d702[_0x4931b0(0x2f0)]()[_0x4931b0(0x35f)](_0x4931b0(0x359))){proxyEmit(_0x4931b0(0x23b),![]);return;}else handleError(_0x25d702,'getPortfolio(2)');}_0xef8f51[_0x4931b0(0x277)](_0x49f97a=>{const _0x5b4f83=_0x4931b0;_0x49f97a[_0x5b4f83(0x1f2)]!=_0x38993f['basecoin']?_0x30eb1a[_0x49f97a[_0x5b4f83(0x204)]]?_0x40c096=_0x49f97a[_0x5b4f83(0x32e)]?0x1/_0x30eb1a[_0x49f97a[_0x5b4f83(0x204)]][_0x5b4f83(0x389)]:_0x30eb1a[_0x49f97a[_0x5b4f83(0x204)]][_0x5b4f83(0x389)]:_0x40c096=0x0:_0x40c096=0x1,_0x49f97a['price']=formatResult(_0x40c096,0x8);}),await getMarketCap(_0xef8f51),proxyEmit('portfolio',_0xef8f51);}}}function truncateTradeAmount(_0x48602a,_0xb68b5d){const _0x1f795d=_0xde38f7;let _0x323188=0x0;try{_0x323188=exchange[_0x1f795d(0x21b)](_0x48602a,_0xb68b5d);}catch(_0x43623e){}return _0x323188;}function _0x5a7a(){const _0x46059d=['2.6.0','log','offset','startsWith','progress','rightTxt','value','2\x20-\x20handling\x20FILLED\x20order:\x20','<pre>','open','sqrt','delta','getCoins()','process\x20','fees','keys','1\x20-\x20Unlock\x20orders','none','AuthenticationError','LOCKED','random','MIN_NOTIONAL','defaults','apiKey','includes','datetime','buys','detectLiquidityChange()','exchange','args','/backup/','sortBy','balances','exchanges','fromCodePoint','USDC','deleteHistoryAlerts','createWriteStream','net-basecoin','padStart','\x20-\x20pausing\x20bot\x20for\x20','assign','limit','push','Error\x20details:','configuration','update-liquidity','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','warning','startdate','performance','distribution','filled','emojibuy','Error\x20while\x20deleting\x20files:\x20','request-time','Symbol(s):\x20','3712455MewNSH','Portfolio\x20change\x20detected:\x20','add','mkdirSync','resetHistory','./version.json','canceled','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','last','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','unlinkSync','secure','-events.json','3LkPrwo','\x20|\x20lock\x20orders:\x20','version','Headless:\x20','excluded','getPortfolio(0)','Trigger:\x20','USD','trade','changes','slice',':\x20timer\x20>','bot-','existsSync','<b>','pid','UNLOCKED','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','-------------------------------\x0a','cancelOrder','abs','botID','2\x20-\x20Handled\x20open\x20orders','status','showname','\x20API\x20secret\x20is\x20invalid','1\x20-\x20FILLED\x20unknown\x20order:\x20','getCoinNumber()','getOpenOrders()','RateLimitExceeded','time','shift','API-key\x20format\x20invalid','side','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','headless','split','removed','\x20minutes\x20-\x20','change','success','quick','Unfilled\x20order(s)\x20canceled\x20after\x20','decrypt',')\x20|\x20exchange:\x20','coin','/output-000.log','debug','\x20:\x20','event-history','Limit\x20(high-margin)','market_cap','coin-loading-progress','7UiZRnN','12GzhigM','getHours','sendMetricsTelegram','valid','status\x20code\x20401','cost','Pausing\x20for\x20','\x20|\x20','max','symbol','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20attempts','length','differenceInSeconds','Resetting\x20bot\x20history','padEnd','************','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Loading\x20completed','search','Invalid\x20API\x20key,\x20secret\x20or\x20password\x20entered','OnMaintenance','spot','watchTradesForSymbols','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Net\x20','Crypt','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20exchange\x20error','floor','330EYAIdL','limit-high','amountToPrecision','sells','min','toFixed','toLowerCase','2\x20-\x20Orders\x20unlocked','price','Bitget','ORDERS.LOCKED','Invalid\x20quantity','substring','/EUR','ETH','breakeven','Error:\x20Invalid\x20argument\x20','join','startnumber','bot','\x20/\x20','send','InvalidOrder','autoliquidity','cloneDeep','concat','order','./config/','get','Order\x20filled:\x20','Initializing\x20coin\x20results','</pre>','-performance.json','limits','portfolio','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Cex','isEqual','\x20has\x20a\x2024h\x20drop\x20of\x20','Huobi','bid','fetchOpenOrders','sell','1\x20-\x20FILLED\x20known\x20order:\x20','fetchTickers','OrderNotFound','BTC','Executed\x20','no\x20open\x20orders','remainingSymbols','slider','apiSecret','getFullYear','number','Exchange','threshold','storeFiat','RSA-OAEP','password','/USD','marketcapEnabled','bots','timeout','botname','fetchTickers()','Cooldown\x20ended\x20-\x20balancing\x20resumed','-results.json','2\x20-\x20Validate\x20orders:\x20','quote','yyyy/MM/dd','loading-canceled','ORDERS.UNLOCKING','EUR','\x20API\x20key\x20is\x20invalid','constructor','realized','USDP','getMinutes','find','full','change24h','exec','privateKey','highest','Fee\x20discount\x20refund\x20detected:\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','liquidity','TUSD','round','marketcapApi','001','filter','customId','9706296ychCxQ','forEach','logs','argv','switch-manual','RETRY\x20-\x20Error\x20in\x20','Net\x20effect','amount','\x20orders\x20in\x20less\x20than\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','watchTradesForSymbols()','exchange\x20reloaded','\x20value','data','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','indexOf','Huobipro',',\x20must\x20be\x20a\x203\x20digit\x20number','splice','entries','Exchange\x20details:\x20','fee','./logs/','format','\x20-\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','write','cancelOrders()','kill','util','InvalidNonce','running','lowdb','PermissionDenied','red_yellow_blue','<b>Bot\x20','No\x20more\x20open\x20orders\x20-\x20','placeOrder','heapUsed','uncaughtException','code','active','replace','colorscheme','settings','Order\x20amount\x20is\x20invalid:\x20','Order(s)\x20not\x20validated\x20after\x20','\x20minutes','\x20hour','orderstatus','getAllOrders()','average','watchTrades','1217328FpcsQy','ORDERS.UNLOCKED','usd','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','ccxt','recreate','2.3.5','string','marketcap','\x20|\x20highest\x20fee:\x20','memoryUsage','hybrid-crypto-js','getPortfolio','Order\x20is\x20invalid:\x20','startprice','emojisell','sha256','Resuming\x20(','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','eur','Config\x20details:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','ExchangeNotAvailable','timeshift','coins','total','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','message','map','cooldown','***','has','fiat','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','pro','\x20>\x20','ongoing','0\x20-\x20EXECUTION:\x20','73898hcQecd','event','Unknown\x20error\x20occured','-config.json','openOrders','getDate','page','type','Failed\x20to\x20load\x20coin\x20data\x20for\x20','starting-balance-','BNB/',':\x20Bot\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','apiPassword','watchTrades()','getStartingBalances','buy','getMonth','initTickers()','loadSymbols()','set','InsufficientFunds','basecoinvalue','storeHeadless','orderId','enabled','\x20MB','\x20metrics:</b>\x20\x0a\x0a','Bot\x20','toString','error','%\x20(','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','\x20uses\x20','1241525yFZuny','added','\x20>\x20details:','milliseconds','market','Limit\x20(low-margin)','\x20>\x20[DEBUG]\x20','sendPortfolioTelegram','storeConfiguration','sort','(((.+)+)+)+$','\x20portfolio:</b>\x20\x0a\x0a','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','date-fns','timestamp','ordertype','exchange\x20not\x20reloaded','parse','\x20network\x20error','onepagemode','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','USDT','date','ask','initial','toggleBotMode','test','leftTxt','basecoin','\x20order:\x20','loadMarkets','Market','Insufficient\x20funds\x20to\x20execute\x20order:\x20','fetchTicker','final','stringify','createOrder','recent20','balancing\x20resumed','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','lowdb/adapters/FileSync','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','watchOrders()','percentage','placeOrder()','showConfig','Exception\x20thrown\x20in\x20','apply','RequestTimeout','net-fiat','2.6.22','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Initiating\x20bot\x20restart','target','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','remove','Avoiding\x20continuous\x20order\x20attempts','reverse','getPortfolio(1)','24nWxVtw','fetchBalance','BNB','function','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','complete','Binance','1595292REnwsi','\x20change','path','yargs/yargs','NetworkError','closed','bb-settings.json','\x20|\x20exchange:\x20','Bybit','ExchangeError','PAXG','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','1432210Oebyir','findIndex','currency'];_0x5a7a=function(){return _0x46059d;};return _0x5a7a();}function checkMinimums(_0x5ec565){const _0x126c12=_0xde38f7;let _0x4cb58e=!![];const _0x4e5c5a=!_0x5ec565['reverse']?markets[_0x5ec565[_0x126c12(0x204)]][_0x126c12(0x23a)][_0x126c12(0x27d)][_0x126c12(0x21d)]:markets[_0x5ec565[_0x126c12(0x204)]]['limits']['cost']['min'],_0x2ba729=!_0x5ec565[_0x126c12(0x32e)]?markets[_0x5ec565[_0x126c12(0x204)]][_0x126c12(0x23a)][_0x126c12(0x200)]['min']:markets[_0x5ec565['symbol']][_0x126c12(0x23a)][_0x126c12(0x27d)][_0x126c12(0x21d)],_0x19a0a7=truncateTradeAmount(_0x5ec565[_0x126c12(0x204)],_0x5ec565[_0x126c12(0x396)]);_0x5ec565['trade']=_0x19a0a7;if(Math[_0x126c12(0x3a2)](_0x19a0a7)<_0x4e5c5a)_0x4cb58e=![];if(Math[_0x126c12(0x3a2)](_0x19a0a7)*_0x5ec565[_0x126c12(0x389)]<_0x2ba729)_0x4cb58e=![];if(_0x5ec565[_0x126c12(0x3af)]==_0x126c12(0x243)){let _0x43f139=config[_0x126c12(0x23b)][_0x126c12(0x267)](_0x49ae7d=>_0x49ae7d[_0x126c12(0x1f2)]==_0x5ec565[_0x126c12(0x1f2)]);if(_0x43f139[_0x126c12(0x349)]>0x0){if(Math[_0x126c12(0x3a2)](_0x19a0a7)>_0x5ec565[_0x126c12(0x24e)]-_0x43f139[_0x126c12(0x349)])_0x4cb58e=![];}else{if(Math['abs'](_0x19a0a7)>_0x5ec565[_0x126c12(0x24e)])_0x4cb58e=![];}}if(_0x5ec565[_0x126c12(0x3af)]==_0x126c12(0x2e3)){let _0x46d1ea=config[_0x126c12(0x23b)][_0x126c12(0x267)](_0x1ae28c=>_0x1ae28c[_0x126c12(0x1f2)]==config[_0x126c12(0x311)]),_0x3f9648=currentCoins[_0x126c12(0x267)](_0x49d99f=>_0x49d99f[_0x126c12(0x1f2)]==config['basecoin']);if(_0x46d1ea['offset']>0x0){if(Math[_0x126c12(0x3a2)](_0x19a0a7)*_0x5ec565['last']>_0x3f9648[_0x126c12(0x24e)]-_0x46d1ea[_0x126c12(0x349)])_0x4cb58e=![];}else{if(Math[_0x126c12(0x3a2)](_0x19a0a7)*_0x5ec565['last']>_0x3f9648[_0x126c12(0x24e)])_0x4cb58e=![];}}return _0x4cb58e;}async function getBalances(_0x3ec457=!![]){const _0x405fdc=_0xde38f7;let _0x3af194=0x0,_0x51b81e;const _0x436922=config['threshold'];if(config[_0x405fdc(0x3b1)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0xb97e75=>{const _0x343bd3=_0x405fdc;if(_0xb97e75['coin']!=config['basecoin']){let _0x4607a0=gTicker[noslash(_0xb97e75[_0x343bd3(0x204)])];_0x51b81e=_0xb97e75[_0x343bd3(0x32e)]?0x1/_0x4607a0:_0x4607a0;}else _0x51b81e=0x1;let _0x25403a=_0xb97e75[_0x343bd3(0x24e)]*_0x51b81e;_0x3af194+=_0x25403a,_0xb97e75[_0x343bd3(0x389)]=formatResult(Number(_0x51b81e),0x8),_0xb97e75[_0x343bd3(0x34d)]=_0x25403a;}),currentCoins[_0x405fdc(0x277)](_0x5613d7=>{const _0x5a323a=_0x405fdc;let _0x452e4b=config[_0x5a323a(0x23b)][_0x5a323a(0x267)](_0x5394cf=>_0x5394cf[_0x5a323a(0x1f2)]==_0x5613d7['coin']),_0x2d0777=Number(_0x452e4b[_0x5a323a(0x37b)]),_0x1f8941=_0x5613d7[_0x5a323a(0x34d)]/_0x3af194*0x64,_0x4fa97d=_0x2d0777*_0x3af194/0x64/_0x5613d7['last']-_0x5613d7['number'];_0x5613d7[_0x5a323a(0x37b)]=formatResult(_0x1f8941,0x3),_0x5613d7['target']=formatResult(_0x2d0777,0x3),_0x5613d7[_0x5a323a(0x396)]=formatResult(_0x4fa97d,0x8),_0x5613d7[_0x5a323a(0x3af)]='',_0x5613d7[_0x5a323a(0x1fe)]=![];if(_0x5613d7['coin']!=config[_0x5a323a(0x311)]){if(_0x5613d7['distribution']>_0x2d0777)_0x5613d7[_0x5a323a(0x3af)]=_0x5a323a(0x243),_0x5613d7[_0x5a323a(0x1fe)]=checkMinimums(_0x5613d7);else _0x5613d7[_0x5a323a(0x37b)]<_0x2d0777&&(_0x5613d7[_0x5a323a(0x3af)]=_0x5a323a(0x2e3),_0x5613d7['valid']=checkMinimums(_0x5613d7));}_0x5613d7[_0x5a323a(0x352)]=_0x5613d7['distribution']/_0x5613d7[_0x5a323a(0x32a)]-0x1;if(_0x5613d7[_0x5a323a(0x2a7)]==_0x5a323a(0x37c)||_0x5613d7[_0x5a323a(0x2a7)]=='canceled')_0x5613d7[_0x5a323a(0x2a7)]=_0x5a323a(0x358);}),currentCoins[_0x405fdc(0x2fe)]((_0x52bbac,_0x483cca)=>_0x52bbac[_0x405fdc(0x352)]<_0x483cca[_0x405fdc(0x352)]?0x1:_0x483cca[_0x405fdc(0x352)]<_0x52bbac['delta']?-0x1:0x0);const _0x15fca2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x15fca2[_0x405fdc(0x2be)],'usd':_0x15fca2[_0x405fdc(0x2ad)],'portfolio':JSON[_0x405fdc(0x318)](currentCoins),'threshold':_0x436922},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x3ec457){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x436922});else{if(lockOrders==ORDERS[_0x405fdc(0x39e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x436922});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x39cc24=getNormalizedPerformance();getStartingBalances(_0x39cc24),emitPerformance(_0x39cc24);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5af4eb=_0xde38f7;if(!lastBalances)return;let _0x544412=[],_0x4deac3,_0x3ec773=JSON[_0x5af4eb(0x306)](lastBalances[_0x5af4eb(0x23b)]);_0x3ec773[_0x5af4eb(0x2fe)]((_0x3d61cc,_0xe6ae15)=>_0x3d61cc[_0x5af4eb(0x1f2)]>_0xe6ae15['coin']?0x1:_0xe6ae15[_0x5af4eb(0x1f2)]>_0x3d61cc[_0x5af4eb(0x1f2)]?-0x1:0x0),_0x3ec773[_0x5af4eb(0x277)](_0x1bef63=>{const _0x292151=_0x5af4eb;let _0x26d065={'coin':_0x1bef63[_0x292151(0x1f2)],'number':_0x1bef63[_0x292151(0x24e)],'price':_0x1bef63['last']};_0x544412[_0x292151(0x372)](_0x26d065);});const _0xe5b9c9=await getFiat();_0x4deac3={'date':lastBalances[_0x5af4eb(0x3ac)][_0x5af4eb(0x3b2)]('\x20')[0x0],'eur':_0xe5b9c9['eur'],'usd':_0xe5b9c9[_0x5af4eb(0x2ad)],'coins':_0x544412};let _0x9606c6=dbPerformance[_0x5af4eb(0x235)](_0x5af4eb(0x283))[_0x5af4eb(0x267)]({'date':_0x4deac3[_0x5af4eb(0x30b)]})[_0x5af4eb(0x34d)]();_0x9606c6?_0x4deac3[_0x5af4eb(0x30b)]!=config[_0x5af4eb(0x379)]&&dbPerformance[_0x5af4eb(0x235)]('data')['find']({'date':_0x4deac3['date']})[_0x5af4eb(0x370)](_0x4deac3)[_0x5af4eb(0x290)]():dbPerformance[_0x5af4eb(0x235)](_0x5af4eb(0x283))[_0x5af4eb(0x372)](_0x4deac3)[_0x5af4eb(0x290)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x13104b=_0xde38f7;let _0x204da4=[];if(dbPerformance[_0x13104b(0x2cb)]('data')[_0x13104b(0x34d)]()){let _0x1048c5=dbPerformance[_0x13104b(0x235)](_0x13104b(0x283))[_0x13104b(0x231)]()[_0x13104b(0x274)](_0x491068=>{const _0x27d636=_0x13104b;if(_0x491068[_0x27d636(0x2c4)][_0x27d636(0x207)]==0x0)return![];else return!![];})['sortBy'](_0x13104b(0x30b))[_0x13104b(0x34d)](),_0x3f80be=[...config[_0x13104b(0x26f)]];_0x3f80be[_0x13104b(0x2fe)]((_0x4f8b33,_0x143700)=>_0x4f8b33['date']>_0x143700['date']?-0x1:_0x143700['date']>_0x4f8b33[_0x13104b(0x30b)]?0x1:0x0);let _0x28fc71=0x1,_0x42b87c=[],_0x389e53=0x0;_0x1048c5[_0x13104b(0x398)]()[_0x13104b(0x32e)]()[_0x13104b(0x277)]((_0x41a378,_0xd7c1ed)=>{const _0x2b4b73=_0x13104b;if(_0x3f80be[_0x389e53]){if(_0x1048c5[_0x1048c5[_0x2b4b73(0x207)]-_0xd7c1ed]&&_0x3f80be[_0x389e53][_0x2b4b73(0x30b)]==_0x1048c5[_0x1048c5[_0x2b4b73(0x207)]-_0xd7c1ed]['date']){if(_0xd7c1ed<_0x1048c5['length']){let _0x42c72e=0x0,_0x56035b=0x0;_0x1048c5[_0x1048c5[_0x2b4b73(0x207)]-_0xd7c1ed][_0x2b4b73(0x2c4)]['forEach'](_0x16d065=>{const _0x34b512=_0x2b4b73;_0x56035b+=_0x16d065[_0x34b512(0x24e)]*_0x16d065[_0x34b512(0x221)];}),_0x3f80be[_0x389e53][_0x2b4b73(0x397)]['forEach'](_0xc2ee1d=>{const _0x54a0a6=_0x2b4b73;_0x42c72e+=_0xc2ee1d[_0x54a0a6(0x24e)]*_0xc2ee1d[_0x54a0a6(0x221)];}),_0x28fc71*=_0x42c72e/(_0x56035b-_0x42c72e)+0x1;}_0x389e53++;}}let _0x1431ca=0x0;_0x41a378[_0x2b4b73(0x2c4)]['forEach'](_0x5650ac=>{const _0x48b660=_0x2b4b73;_0x1431ca+=_0x5650ac[_0x48b660(0x24e)]*_0x5650ac[_0x48b660(0x221)];}),_0x42b87c[_0x1048c5[_0x2b4b73(0x207)]-_0xd7c1ed-0x1]=_0x1431ca*(_0x28fc71-0x1);});let _0x4bb603=[];_0x3f80be=[...config[_0x13104b(0x26f)]]||[];let _0x1ee5f3=0x0;_0x389e53=0x0,_0x1048c5[_0x13104b(0x277)]((_0x3d6de5,_0x281b74)=>{const _0x124479=_0x13104b;if(_0x3f80be[_0x389e53]){const _0x94a584=fns[_0x124479(0x306)](_0x3f80be[_0x389e53][_0x124479(0x30b)],_0x124479(0x25e),new Date()),_0xd9d702=fns[_0x124479(0x306)](_0x3d6de5[_0x124479(0x30b)],_0x124479(0x25e),new Date());if(fns[_0x124479(0x23e)](_0x94a584,_0xd9d702)){let _0x53bdae=0x0;_0x3f80be[_0x389e53][_0x124479(0x397)]['forEach'](_0x520461=>{const _0x5c0a86=_0x124479;!_0x4bb603[_0x520461[_0x5c0a86(0x1f2)]]?_0x4bb603[_0x520461['coin']]=_0x520461['number']:(_0x53bdae=_0x4bb603[_0x520461[_0x5c0a86(0x1f2)]],_0x4bb603[_0x520461[_0x5c0a86(0x1f2)]]+=_0x520461[_0x5c0a86(0x24e)]);const _0x39aff7=_0x3d6de5[_0x5c0a86(0x2c4)][_0x5c0a86(0x267)](_0x387c6b=>_0x387c6b[_0x5c0a86(0x1f2)]==_0x520461[_0x5c0a86(0x1f2)]);(!_0x39aff7||_0x39aff7[_0x5c0a86(0x24e)]==0x0)&&(_0x1ee5f3+=(-_0x520461['number']-_0x53bdae)*_0x520461[_0x5c0a86(0x221)]);}),_0x389e53++;}}_0x3d6de5[_0x124479(0x2c4)][_0x124479(0x277)]((_0x2817e5,_0x26f24c)=>{const _0x32da01=_0x124479;_0x4bb603[_0x2817e5['coin']]&&(_0x2817e5[_0x32da01(0x30d)]=_0x4bb603[_0x2817e5[_0x32da01(0x1f2)]]);}),_0x204da4[_0x124479(0x372)]({'date':_0x3d6de5['date'],'eur':_0x3d6de5['eur'],'usd':_0x3d6de5['usd'],'offset':_0x42b87c[_0x281b74],'netoffset':_0x1ee5f3,'coins':_0x3d6de5[_0x124479(0x2c4)]});});}return _0x204da4;}function emitPerformance(_0x3154a9){const _0x3abdc4=_0xde38f7;_0x3154a9[_0x3abdc4(0x207)]!==0x0?(proxyEmit(_0x3abdc4(0x37a),_0x3154a9),lastPerformanceEmitted=getDate()):proxyEmit(_0x3abdc4(0x37a),[]);}function getPerf(_0x5579a6,_0x7ba890){const _0x794c99=_0xde38f7;let _0x5cc7e4=0x0,_0xedb730=0x0,_0x32cf77=0x0;_0x5579a6[_0x794c99(0x2c4)]['forEach'](_0x12b169=>{const _0x371a9e=_0x794c99;_0x5cc7e4+=_0x12b169[_0x371a9e(0x24e)]*_0x12b169[_0x371a9e(0x221)];});_0x7ba890&&(_0x5cc7e4+=_0x5579a6[_0x794c99(0x349)]);if(config[_0x794c99(0x311)]==='BTC'||config[_0x794c99(0x311)]===_0x794c99(0x227)||config[_0x794c99(0x311)]===_0x794c99(0x341))_0xedb730=_0x5cc7e4*_0x5579a6['eur'],_0x32cf77=_0x5cc7e4*_0x5579a6['usd'];else{if(usdBasecoins[_0x794c99(0x35f)](config[_0x794c99(0x311)]))_0xedb730=_0x5cc7e4*_0x5579a6[_0x794c99(0x2be)]/_0x5579a6[_0x794c99(0x2ad)],_0x32cf77=_0x5cc7e4;else config[_0x794c99(0x311)]===_0x794c99(0x261)&&(_0xedb730=_0x5cc7e4,_0x32cf77=_0x5cc7e4*_0x5579a6[_0x794c99(0x2ad)]/_0x5579a6[_0x794c99(0x2be)]);}return[_0x5cc7e4,_0xedb730,_0x32cf77];}function getKPIs(_0x39eff4,_0x3882c2=_0xde38f7(0x261)){const _0x14730c=_0xde38f7,_0x6915aa=config[_0x14730c(0x311)],_0x793eb3=lastBalances,_0x2f4add=currentCoins,_0x89a41b=getNormalizedPerformance(),_0xea6e05=_0x39eff4===_0x14730c(0x311)?_0x6915aa:_0x39eff4===_0x14730c(0x2cc)||_0x39eff4===_0x14730c(0x326)?_0x3882c2:_0x14730c(0x214)+_0x6915aa,_0x266c12=_0x39eff4===_0x14730c(0x36d)?'Net\x20effect':_0x39eff4===_0x14730c(0x326)?_0x14730c(0x27c):_0xea6e05+_0x14730c(0x282),_0x31e309=_0x39eff4===_0x14730c(0x36d)||_0x39eff4===_0x14730c(0x326)?_0x14730c(0x27c):_0xea6e05+_0x14730c(0x338);let _0x33e6c1=0x0;_0x2f4add[_0x14730c(0x277)](_0x24ee6b=>{const _0x2979e4=_0x14730c;_0x33e6c1+=_0x24ee6b[_0x2979e4(0x24e)]*_0x24ee6b[_0x2979e4(0x389)];});if(_0x39eff4==='fiat'||_0x39eff4===_0x14730c(0x326)){if(_0x6915aa===_0x14730c(0x247)||_0x6915aa===_0x14730c(0x227)||_0x6915aa===_0x14730c(0x341))_0x33e6c1=_0x33e6c1*(_0x3882c2===_0x14730c(0x261)?_0x793eb3[_0x14730c(0x2be)]:_0x793eb3['usd']);else{if(usdBasecoins[_0x14730c(0x35f)](_0x6915aa))_0x33e6c1=_0x33e6c1*(_0x3882c2==='EUR'?_0x793eb3[_0x14730c(0x2be)]/_0x793eb3[_0x14730c(0x2ad)]:0x1);else _0x6915aa===_0x14730c(0x261)&&(_0x33e6c1=_0x33e6c1*(_0x3882c2==='EUR'?0x1:_0x793eb3[_0x14730c(0x2ad)]/_0x793eb3['eur']));}}let _0x5051b0;if(_0x33e6c1!==0x0){if(_0x39eff4===_0x14730c(0x311))_0x5051b0=(_0x33e6c1/startingBalances[_0x14730c(0x311)]-0x1)*0x64;else{if(_0x3882c2===_0x14730c(0x261))_0x5051b0=(_0x33e6c1/startingBalances[_0x14730c(0x2be)]-0x1)*0x64;else _0x5051b0=(_0x33e6c1/startingBalances['usd']-0x1)*0x64;}let _0x30da8a=0x0;if(startingBalances[_0x14730c(0x2c4)])_0x2f4add[_0x14730c(0x277)](_0x33f8d8=>{const _0x4e14a6=_0x14730c;let _0x36d855=startingBalances[_0x4e14a6(0x2c4)][_0x4e14a6(0x267)](_0x2ebfb2=>_0x2ebfb2['coin']===_0x33f8d8['coin']);if(_0x36d855&&_0x36d855[_0x4e14a6(0x1f2)]&&_0x33f8d8[_0x4e14a6(0x24e)]!==0x0)_0x30da8a+=_0x36d855[_0x4e14a6(0x24e)]*_0x33f8d8[_0x4e14a6(0x389)];});let _0x392481=0x0;if(_0x89a41b['length']!==0x0){let _0x4bf150=_0x89a41b[_0x89a41b[_0x14730c(0x207)]-0x1];_0x392481=_0x4bf150['netoffset'];}_0x30da8a-=_0x392481;_0x39eff4===_0x14730c(0x36d)&&(_0x5051b0=(_0x33e6c1-_0x30da8a)/startingBalances[_0x14730c(0x311)]*0x64,_0x33e6c1=_0x33e6c1-_0x30da8a);if(_0x39eff4==='net-fiat'){let _0x48a8fd=_0x3882c2===_0x14730c(0x261)?startingBalances[_0x14730c(0x2be)]:startingBalances['usd'];if(_0x6915aa==='BTC'||_0x6915aa===_0x14730c(0x227)||_0x6915aa===_0x14730c(0x341))_0x30da8a=_0x3882c2===_0x14730c(0x261)?_0x30da8a*_0x793eb3['eur']:_0x30da8a*_0x793eb3[_0x14730c(0x2ad)];else{if(usdBasecoins[_0x14730c(0x35f)](_0x6915aa))_0x30da8a=_0x3882c2===_0x14730c(0x261)?_0x30da8a*_0x793eb3[_0x14730c(0x2be)]/_0x793eb3[_0x14730c(0x2ad)]:_0x30da8a;else _0x6915aa===_0x14730c(0x261)&&(_0x30da8a=_0x3882c2===_0x14730c(0x261)?_0x30da8a:_0x30da8a*_0x793eb3[_0x14730c(0x2ad)]/_0x793eb3[_0x14730c(0x2be)]);}_0x5051b0=(_0x33e6c1-_0x30da8a)/_0x48a8fd*0x64,_0x33e6c1=_0x33e6c1-_0x30da8a;}if(_0x5051b0){if(_0x5051b0<0x64)_0x5051b0=_0x5051b0['toFixed'](0x2);else{if(_0x5051b0<0x3e8)_0x5051b0=_0x5051b0[_0x14730c(0x21e)](0x1);else _0x5051b0=_0x5051b0['toFixed'](0x0);}}else _0x5051b0=Number('0')[_0x14730c(0x21e)](0x2);if(_0x33e6c1){if(Math['abs'](_0x33e6c1)<0.000001)_0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x2);else{if(Math[_0x14730c(0x3a2)](_0x33e6c1)<0.1)_0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x6);else{if(Math['abs'](_0x33e6c1)<0x1)_0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x5);else{if(Math[_0x14730c(0x3a2)](_0x33e6c1)<0xa)_0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x4);else{if(Math['abs'](_0x33e6c1)<0x64)_0x33e6c1=_0x33e6c1['toFixed'](0x3);else{if(Math[_0x14730c(0x3a2)](_0x33e6c1)<0x3e8)_0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x2);else _0x33e6c1=_0x33e6c1[_0x14730c(0x21e)](0x2);}}}}}}else _0x33e6c1=Number('0')[_0x14730c(0x21e)](0x2);}else _0x5051b0=Number('0')[_0x14730c(0x21e)](0x2);return{'value':_0x33e6c1,'change':_0x5051b0,'leftTxt':_0x266c12,'rightTxt':_0x31e309};}async function getStartingBalances(_0x330d8d,_0x4984e3=!![]){const _0x58f760=_0xde38f7;if(_0x330d8d[_0x58f760(0x207)]!==0x0){const [_0x3df4b1,_0x258966,_0xced7f5]=getPerf(_0x330d8d[0x0],!![]);let _0x364f34=[];config['portfolio'][_0x58f760(0x277)](_0x15cba4=>{const _0x1b54e7=_0x58f760;let _0x4560e6=0x0,_0x3d467d;config['liquidity'][_0x1b54e7(0x277)](_0x445b65=>{const _0x4515c8=_0x1b54e7;let _0x4f54b9=_0x445b65[_0x4515c8(0x397)][_0x4515c8(0x267)](_0x12e193=>_0x12e193[_0x4515c8(0x1f2)]==_0x15cba4[_0x4515c8(0x1f2)]);if(_0x4f54b9){_0x4560e6+=_0x4f54b9[_0x4515c8(0x24e)];if(!_0x3d467d)_0x3d467d=_0x4f54b9['price'];}}),_0x364f34[_0x1b54e7(0x372)]({'coin':_0x15cba4[_0x1b54e7(0x1f2)],'number':_0x4560e6,'initialprice':_0x3d467d});});const _0xe0c9a9={'basecoin':_0x3df4b1,'eur':_0x258966,'usd':_0xced7f5,'coins':_0x364f34};if(_0x4984e3)proxyEmit('starting-balances',_0xe0c9a9);startingBalances=_0xe0c9a9;}}function headlessMode(_0x4c64d4){const _0x10dceb=_0xde38f7;let _0x289471=_0x4c64d4[_0x10dceb(0x23b)],_0x16d452=_0x4c64d4[_0x10dceb(0x250)],_0x337734=[];for(let _0x50edb6 of _0x289471){if(_0x50edb6[_0x10dceb(0x1f2)]!=config['basecoin']){if(_0x50edb6[_0x10dceb(0x352)]>=_0x16d452/0x64){if(_0x50edb6[_0x10dceb(0x1fe)])_0x337734[_0x10dceb(0x372)](_0x50edb6);}else{if(_0x50edb6[_0x10dceb(0x352)]<=-_0x16d452/0x64){if(_0x50edb6['valid'])_0x337734[_0x10dceb(0x372)](_0x50edb6);}}}}_0x337734[_0x10dceb(0x207)]>0x0&&(lockOrders==ORDERS[_0x10dceb(0x39e)]&&!coolingDown&&_0x337734[_0x10dceb(0x277)](_0x50eccf=>{const _0x2a935d=_0x10dceb;logger[_0x2a935d(0x1f4)](_0x2a935d(0x394)+_0x50eccf[_0x2a935d(0x1f2)]+'\x20'+_0x50eccf[_0x2a935d(0x24e)]+'\x20'+_0x50eccf[_0x2a935d(0x389)]+'\x20'+_0x50eccf[_0x2a935d(0x37b)]+'%\x20'+_0x50eccf[_0x2a935d(0x32a)]+'%\x20'+(0x64*_0x50eccf[_0x2a935d(0x352)])['toFixed'](0x2)+_0x2a935d(0x2f2)+_0x16d452[_0x2a935d(0x21e)](0x2)+'%)');}),placeOrder(_0x337734));}function notifyBalance(_0xcf0f01){const _0x489073=_0xde38f7;let _0x51f64b=_0xcf0f01[_0x489073(0x23b)],_0x25366b=_0xcf0f01['threshold'],_0x535214=[];for(let _0xf93ad6 of _0x51f64b){if(_0xf93ad6[_0x489073(0x1f2)]!=config[_0x489073(0x311)]){if(_0xf93ad6[_0x489073(0x352)]>=_0x25366b/0x64){if(_0xf93ad6[_0x489073(0x1fe)])_0x535214[_0x489073(0x372)](_0xf93ad6);}else{if(_0xf93ad6[_0x489073(0x352)]<=-_0x25366b/0x64){if(_0xf93ad6[_0x489073(0x1fe)])_0x535214[_0x489073(0x372)](_0xf93ad6);}}}}if(_0x535214['length']>0x0){let _0x1080ae=_0x535214[_0x489073(0x2c8)](_0x446405=>_0x446405[_0x489073(0x1f2)]);_0x1080ae[_0x489073(0x2fe)]();let _0x3aee97=_0x1080ae[_0x489073(0x22a)](',\x20');if(!lastCoinsToBalance)logHistory(_0x489073(0x378),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x3aee97;}}function symbolToCoin(_0x4019bf){const _0x570f03=_0xde38f7;let _0x36dbd2;if(_0x4019bf[_0x570f03(0x35f)]('/'+config[_0x570f03(0x311)]))_0x36dbd2=_0x4019bf[_0x570f03(0x2a0)]('/'+config[_0x570f03(0x311)],'');if(_0x4019bf[_0x570f03(0x35f)](config[_0x570f03(0x311)]+'/'))_0x36dbd2=_0x4019bf['replace'](config[_0x570f03(0x311)]+'/','');return _0x36dbd2;}async function unlockOrders(){const _0xfde671=_0xde38f7;if(allOrdersPlaced&&lockOrders==ORDERS[_0xfde671(0x35a)]){logger[_0xfde671(0x1f4)](_0xfde671(0x357)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x28b17d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x28b17d,setBlockTransactionDetection(![]),validateOrdersState=_0xfde671(0x30d),persistOpenOrders([]),lockOrders=ORDERS[_0xfde671(0x39e)],logger[_0xfde671(0x1f4)](_0xfde671(0x220));}}async function validateOrders(_0x1b5a8e){const _0x5e3c74=_0xde38f7;if(_0x1b5a8e)validateOrdersState=_0x1b5a8e;logger[_0x5e3c74(0x1f4)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x5e3c74(0x38f)+(lockOrders==0x1?_0x5e3c74(0x223):lockOrders==0x2?_0x5e3c74(0x260):_0x5e3c74(0x2ac)));let _0x29990e=[],_0x4b9a84=config[_0x5e3c74(0x304)]==_0x5e3c74(0x2f9)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5e3c74(0x257)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5e3c74(0x35a)])return;logger[_0x5e3c74(0x1f4)](_0x5e3c74(0x25c)+validateOrdersState),lastOrders[_0x5e3c74(0x277)](_0x45cca4=>{const _0x116f9a=_0x5e3c74;let _0x5b2880=![];_0x45cca4[_0x116f9a(0x37c)]>0x0&&(_0x5b2880=!![]),_0x29990e['push'](_0x5b2880),_0x5b2880&&config[_0x116f9a(0x304)]!=_0x116f9a(0x2f9)&&logHistory(_0x116f9a(0x233),_0x116f9a(0x236)+_0x45cca4[_0x116f9a(0x204)]+'\x20'+_0x45cca4[_0x116f9a(0x3af)]+'\x20#'+formatResult(_0x45cca4[_0x116f9a(0x37c)],0x8)+'\x20@'+formatResult(_0x45cca4[_0x116f9a(0x221)],0x8));}),_0x29990e[_0x5e3c74(0x277)]((_0x51deb9,_0x507211)=>{const _0x2df196=_0x5e3c74;if(_0x51deb9)lastOrders[_0x2df196(0x288)](_0x507211,0x1);}),persistOpenOrders(lastOrders);const _0x1ff82f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x5e3c74(0x31b);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x29990e[_0x5e3c74(0x35f)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5e3c74(0x2d1)){if(_0x29990e[_0x5e3c74(0x35f)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x5e3c74(0x2f9)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x29990e['includes'](![])&&(config[_0x5e3c74(0x304)]=='market'?logHistory(_0x5e3c74(0x1ed),_0x5e3c74(0x2a4)+Math[_0x5e3c74(0x271)](_0x4b9a84*validateOrderInterval/0xea60)+_0x5e3c74(0x1eb)+_0x1ff82f):(await cancelOrders(),logHistory(_0x5e3c74(0x1ed),_0x5e3c74(0x1ef)+Math[_0x5e3c74(0x271)](_0x4b9a84*validateOrderInterval/0xea60)+_0x5e3c74(0x1eb)+_0x1ff82f))),await unlockOrders();else{if(validateOrdersState==_0x5e3c74(0x249)){if(config[_0x5e3c74(0x304)]!='market')logHistory(_0x5e3c74(0x1ed),_0x5e3c74(0x29a)+_0x1ff82f);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x35c31f=>{const _0x18ccec=_0x5f36;try{const _0x3dad71=await exchange[_0x18ccec(0x3a1)](_0x35c31f[_0x18ccec(0x2eb)],_0x35c31f[_0x18ccec(0x204)]);}catch(_0x4d4c1a){if(_0x4d4c1a[_0x18ccec(0x2f0)]()[_0x18ccec(0x35f)](_0x18ccec(0x246))){}else await handleError(_0x4d4c1a,_0x18ccec(0x291));}});}async function initCoinResults(_0x34c34b){const _0x53ea05=_0xde38f7;_0x34c34b?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x34c34b):logger['debug'](_0x53ea05(0x237)),config[_0x53ea05(0x23b)][_0x53ea05(0x277)](_0x50ef33=>{const _0x2f4db6=_0x53ea05;if(!_0x50ef33[_0x2f4db6(0x392)]&&_0x50ef33['coin']!=config[_0x2f4db6(0x311)]){const _0x2dc2fb=currentCoins[_0x2f4db6(0x267)](_0x1c3471=>_0x1c3471['coin']==_0x50ef33[_0x2f4db6(0x1f2)]),_0x3ec32f=gTicker[noslash(_0x50ef33[_0x2f4db6(0x204)])];let _0x2d2433=_0x2dc2fb?_0x2dc2fb[_0x2f4db6(0x24e)]:null,_0x2230df=_0x50ef33[_0x2f4db6(0x32e)]?0x1/_0x3ec32f:_0x3ec32f,_0x4ea44c;config['liquidity'][_0x2f4db6(0x277)](_0x3c2a65=>{const _0x5d2c32=_0x2f4db6;!_0x4ea44c&&(_0x4ea44c=_0x3c2a65[_0x5d2c32(0x397)]['find'](_0x2474ab=>_0x2474ab[_0x5d2c32(0x1f2)]==_0x50ef33[_0x5d2c32(0x1f2)]),_0x4ea44c&&(_0x2d2433=_0x4ea44c[_0x5d2c32(0x24e)],_0x2230df=_0x4ea44c[_0x5d2c32(0x221)]));});let _0x2b71de=dbCoinResults[_0x2f4db6(0x235)]('coins')[_0x2f4db6(0x267)]({'coin':_0x50ef33[_0x2f4db6(0x1f2)]})['value']();if(!_0x2b71de){const _0x1e9f01={'coin':_0x50ef33['coin'],'number':_0x2d2433,'breakeven':_0x2230df,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f4db6(0x235)]('coins')['push'](_0x1e9f01)[_0x2f4db6(0x290)]();}else{if(_0x34c34b&&_0x50ef33[_0x2f4db6(0x1f2)]==_0x34c34b){const _0x41bddd={'coin':_0x50ef33['coin'],'number':_0x2d2433,'breakeven':_0x2230df,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2f4db6(0x235)](_0x2f4db6(0x2c4))['find']({'coin':_0x50ef33[_0x2f4db6(0x1f2)]})['assign'](_0x41bddd)[_0x2f4db6(0x290)]();}}}});}async function updateCoinResults(_0x4ee4e3,_0x2895ce=![]){const _0xeb7f8d=_0xde38f7;let _0x10760f,_0x376316,_0x3d53fc,_0x47a186,_0x5439e2,_0x23c633,_0x78dc04=dbCoinResults['get'](_0xeb7f8d(0x2c4))[_0xeb7f8d(0x267)]({'coin':_0x4ee4e3[_0xeb7f8d(0x1f2)]})[_0xeb7f8d(0x34d)](),_0x51b1aa=![];_0x78dc04&&Object[_0xeb7f8d(0x289)](_0x78dc04)['forEach'](([_0x362284,_0x3a907d])=>{if(_0x3a907d==null)_0x51b1aa=!![];});(!_0x78dc04||_0x51b1aa)&&(await initCoinResults(_0x4ee4e3[_0xeb7f8d(0x1f2)]),_0x78dc04=dbCoinResults[_0xeb7f8d(0x235)](_0xeb7f8d(0x2c4))[_0xeb7f8d(0x267)]({'coin':_0x4ee4e3[_0xeb7f8d(0x1f2)]})['value']());_0x4ee4e3[_0xeb7f8d(0x32e)]&&(_0x23c633={'filled':_0x4ee4e3[_0xeb7f8d(0x37c)]*_0x4ee4e3['price'],'amount':_0x4ee4e3[_0xeb7f8d(0x37c)]*_0x4ee4e3[_0xeb7f8d(0x221)],'side':_0x4ee4e3[_0xeb7f8d(0x3af)]==_0xeb7f8d(0x243)?_0xeb7f8d(0x2e3):_0xeb7f8d(0x243),'price':0x1/_0x4ee4e3[_0xeb7f8d(0x221)]},_0x4ee4e3={..._0x4ee4e3,..._0x23c633});_0x2895ce?_0x376316=_0x4ee4e3[_0xeb7f8d(0x3af)]==_0xeb7f8d(0x2e3)?_0x78dc04['number']+_0x4ee4e3[_0xeb7f8d(0x37c)]:_0x78dc04[_0xeb7f8d(0x24e)]-_0x4ee4e3['filled']:_0x376316=await getCoinNumber(_0x4ee4e3[_0xeb7f8d(0x1f2)]);if(_0x4ee4e3[_0xeb7f8d(0x28b)]&&_0x4ee4e3[_0xeb7f8d(0x28b)]['currency']==config[_0xeb7f8d(0x311)])_0x10760f=Number(_0x4ee4e3[_0xeb7f8d(0x28b)][_0xeb7f8d(0x200)]);else{if(_0x4ee4e3[_0xeb7f8d(0x28b)]&&_0x4ee4e3[_0xeb7f8d(0x28b)][_0xeb7f8d(0x346)]==_0xeb7f8d(0x332)&&!_0x2895ce&&config['basecoin']!=_0xeb7f8d(0x341))_0x10760f=Number(_0x4ee4e3[_0xeb7f8d(0x28b)]['cost'])*gTicker[_0xeb7f8d(0x332)+config['basecoin']];else _0x10760f=defaultFee*_0x4ee4e3['filled']*_0x4ee4e3['price'];}_0x4ee4e3[_0xeb7f8d(0x3af)]==_0xeb7f8d(0x2e3)?(_0x3d53fc=_0x376316!=0x0?(_0x78dc04[_0xeb7f8d(0x228)]*_0x78dc04[_0xeb7f8d(0x24e)]+_0x4ee4e3[_0xeb7f8d(0x221)]*(_0x376316-_0x78dc04['number'])+_0x10760f)/_0x376316:0x0,_0x47a186=_0x78dc04[_0xeb7f8d(0x264)]):(_0x3d53fc=_0x376316!=0x0?(_0x78dc04[_0xeb7f8d(0x228)]*_0x78dc04[_0xeb7f8d(0x24e)]-_0x4ee4e3[_0xeb7f8d(0x221)]*(_0x78dc04[_0xeb7f8d(0x24e)]-_0x376316)+_0x10760f)/_0x376316:0x0,_0x47a186=_0x78dc04[_0xeb7f8d(0x264)]+(_0x4ee4e3[_0xeb7f8d(0x221)]-_0x78dc04[_0xeb7f8d(0x228)])*_0x4ee4e3[_0xeb7f8d(0x37c)]);_0x5439e2=(_0x4ee4e3[_0xeb7f8d(0x221)]-_0x3d53fc-_0x10760f/_0x4ee4e3['filled'])*_0x376316;let _0xcd0eb6={'coin':_0x4ee4e3[_0xeb7f8d(0x1f2)],'number':_0x376316,'breakeven':formatResult(_0x3d53fc,0x8),'realized':formatResult(_0x47a186,0x8),'unrealized':formatResult(_0x5439e2,0x8),'fees':formatResult(_0x78dc04[_0xeb7f8d(0x355)]+_0x10760f,0x8),'sells':_0x4ee4e3[_0xeb7f8d(0x3af)]==_0xeb7f8d(0x243)?_0x78dc04[_0xeb7f8d(0x21c)]+0x1:_0x78dc04['sells'],'buys':_0x4ee4e3[_0xeb7f8d(0x3af)]=='buy'?_0x78dc04[_0xeb7f8d(0x361)]+0x1:_0x78dc04[_0xeb7f8d(0x361)]};dbCoinResults[_0xeb7f8d(0x235)]('coins')['find']({'coin':_0x4ee4e3[_0xeb7f8d(0x1f2)]})['assign'](_0xcd0eb6)[_0xeb7f8d(0x290)]();if(!_0x2895ce){if(_0x4ee4e3[_0xeb7f8d(0x28b)]&&_0x4ee4e3[_0xeb7f8d(0x28b)][_0xeb7f8d(0x346)]==_0xeb7f8d(0x332)){const _0x33b8c5=currentCoins[_0xeb7f8d(0x267)](_0xfd776b=>_0xfd776b['coin']=='BNB');if(_0x33b8c5){let _0x16dff5=dbCoinResults['get']('coins')[_0xeb7f8d(0x267)]({'coin':_0xeb7f8d(0x332)})[_0xeb7f8d(0x34d)]();_0xcd0eb6={..._0x16dff5,'number':_0x33b8c5['number']},dbCoinResults[_0xeb7f8d(0x235)](_0xeb7f8d(0x2c4))[_0xeb7f8d(0x267)]({'coin':'BNB'})[_0xeb7f8d(0x370)](_0xcd0eb6)['write']();}}}}async function placeOrder(_0x3797ec){const _0x34483d=_0xde38f7,_0x4d6df6=config['ordertype']=='market'?'market':_0x34483d(0x371);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x34483d(0x35a)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x34483d(0x30d);let _0x5c2ddb=![];lastOrders=[];for(const _0x1942a5 of _0x3797ec){let _0x3d0b9d,_0x51f9b5,_0x14935e,_0x50b77c,_0x112fea,_0x19ac8a=_0x1942a5[_0x34483d(0x204)];try{const _0x10fed1=await exchange[_0x34483d(0x316)](_0x19ac8a);_0x3d0b9d=_0x1942a5[_0x34483d(0x32e)]?0x1/_0x1942a5[_0x34483d(0x389)]:_0x1942a5[_0x34483d(0x389)],_0x51f9b5=_0x10fed1[_0x34483d(0x241)],_0x14935e=_0x10fed1[_0x34483d(0x30c)];_0x1942a5[_0x34483d(0x32e)]?(_0x50b77c=_0x1942a5[_0x34483d(0x3af)]==_0x34483d(0x2e3)?_0x34483d(0x243):_0x34483d(0x2e3),_0x112fea=Math[_0x34483d(0x3a2)](_0x1942a5[_0x34483d(0x396)])/_0x3d0b9d):(_0x50b77c=_0x1942a5[_0x34483d(0x3af)],_0x112fea=Math['abs'](_0x1942a5[_0x34483d(0x396)]));_0x4d6df6==_0x34483d(0x371)&&(config[_0x34483d(0x304)]==_0x34483d(0x21a)&&(_0x3d0b9d=_0x50b77c==_0x34483d(0x2e3)?_0x51f9b5:_0x14935e),config[_0x34483d(0x304)]=='limit-low'&&(_0x3d0b9d=_0x50b77c=='buy'?_0x14935e:_0x51f9b5));_0x112fea=formatResult(_0x112fea,0x8),_0x3d0b9d=formatResult(_0x3d0b9d,0x8);const _0x4e111c=_0x50b77c==_0x34483d(0x243)?config[_0x34483d(0x2ba)]?String['fromCodePoint']('0x'+config[_0x34483d(0x2ba)])+'\x20':'':config[_0x34483d(0x37d)]?String[_0x34483d(0x369)]('0x'+config[_0x34483d(0x37d)])+'\x20':'',_0x3d382b=_0x4d6df6==_0x34483d(0x2f9)?_0x34483d(0x314):config[_0x34483d(0x304)]==_0x34483d(0x21a)?_0x34483d(0x1f7):_0x34483d(0x2fa),_0x572ad1=(Math[_0x34483d(0x218)](Math[_0x34483d(0x35b)]()*0x35a4e900)+0x5f5e100)[_0x34483d(0x2f0)]();lastOrders['push']({'customId':_0x572ad1,'symbol':_0x19ac8a,'coin':_0x1942a5[_0x34483d(0x1f2)],'amount':_0x112fea,'price':_0x3d0b9d,'side':_0x50b77c,'reverse':_0x1942a5[_0x34483d(0x32e)],'filled':0x0});if(_0x4d6df6==_0x34483d(0x2f9))logHistory(_0x34483d(0x233),''+_0x4e111c+_0x3d382b+'\x20order:\x20'+_0x19ac8a+'\x20'+_0x50b77c+'\x20#'+formatResult(_0x112fea,0x8)+'\x20@'+formatResult(_0x3d0b9d,0x8));else logHistory(_0x34483d(0x233),''+_0x4e111c+_0x3d382b+_0x34483d(0x312)+_0x19ac8a+'\x20'+_0x50b77c+'\x20#'+formatResult(_0x112fea,0x8)+'\x20@'+formatResult(_0x3d0b9d,0x8));let _0x14ffd0;_0x4d6df6=='market'?_0x50b77c==_0x34483d(0x2e3)&&[_0x34483d(0x33f),_0x34483d(0x222),_0x34483d(0x23d),_0x34483d(0x240),_0x34483d(0x286)]['includes'](config[_0x34483d(0x363)])?_0x14ffd0=await exchange[_0x34483d(0x319)](_0x19ac8a,_0x4d6df6,_0x50b77c,_0x112fea,_0x3d0b9d):_0x14ffd0=await exchange[_0x34483d(0x319)](_0x19ac8a,_0x4d6df6,_0x50b77c,_0x112fea,undefined):_0x14ffd0=await exchange[_0x34483d(0x319)](_0x19ac8a,_0x4d6df6,_0x50b77c,_0x112fea,_0x3d0b9d);logger[_0x34483d(0x1f4)]('ID:\x20'+_0x14ffd0['id']+'\x20|\x20Custom\x20ID:\x20'+_0x572ad1);const _0x14d321=lastOrders[_0x34483d(0x207)]-0x1;if(_0x14d321>=0x0&&lastOrders[_0x14d321][_0x34483d(0x275)]==_0x572ad1){lastOrders[_0x14d321][_0x34483d(0x2eb)]=_0x14ffd0['id'];if(_0x14ffd0[_0x34483d(0x27d)])lastOrders[_0x14d321][_0x34483d(0x27d)]=_0x14ffd0['amount'];if(_0x14ffd0[_0x34483d(0x221)])lastOrders[_0x14d321][_0x34483d(0x221)]=_0x14ffd0['price'];lastOrders[_0x14d321]['fee']=_0x14ffd0['fee'];}if(config[_0x34483d(0x2c9)]!=0x0){let _0x31f99a=null;if(cooldownTracker[_0x34483d(0x207)]==config[_0x34483d(0x2c9)]-0x1)_0x31f99a=cooldownTracker['shift']();const _0x26073b=getTimeStamp();cooldownTracker['push'](_0x26073b);if(_0x31f99a){const _0x1bacda=fns[_0x34483d(0x208)](new Date(_0x26073b),new Date(_0x31f99a));if(_0x1bacda<cooldownInterval){logHistory(_0x34483d(0x2f1),_0x34483d(0x248)+config[_0x34483d(0x2c9)]+_0x34483d(0x27e)+cooldownInterval/0x3c+_0x34483d(0x342)+cooldownPeriod/(0xe10*0x3e8)+_0x34483d(0x2a6)),coolingDown=!![];break;}}}}catch(_0x5793e3){if(_0x5793e3['toString']()[_0x34483d(0x35f)](_0x34483d(0x35c)))lastOrders=lastOrders['filter'](_0x22a241=>_0x22a241[_0x34483d(0x204)]!=_0x19ac8a),logHistory(_0x34483d(0x2f1),_0x34483d(0x2c0)+_0x19ac8a),_0x5c2ddb=!![];else{if(_0x5793e3[_0x34483d(0x2f0)]()[_0x34483d(0x35f)](_0x34483d(0x224)))lastOrders=lastOrders[_0x34483d(0x274)](_0x1d2521=>_0x1d2521[_0x34483d(0x204)]!=_0x19ac8a),logHistory(_0x34483d(0x2f1),_0x34483d(0x2a3)+_0x19ac8a),_0x5c2ddb=!![];else{if(_0x5793e3[_0x34483d(0x2f0)]()[_0x34483d(0x35f)](_0x34483d(0x22f)))lastOrders=lastOrders[_0x34483d(0x274)](_0x469ac8=>_0x469ac8['symbol']!=_0x19ac8a),logHistory(_0x34483d(0x2f1),_0x34483d(0x2b8)+_0x19ac8a),logger[_0x34483d(0x1f4)](_0x5793e3),_0x5c2ddb=!![];else _0x5793e3[_0x34483d(0x2f0)]()[_0x34483d(0x35f)](_0x34483d(0x2c1))?(lastOrders=lastOrders[_0x34483d(0x274)](_0x5852df=>_0x5852df[_0x34483d(0x204)]!=_0x19ac8a),logHistory('error',_0x34483d(0x2c0)+_0x19ac8a),_0x5c2ddb=!![]):(lastOrders=lastOrders[_0x34483d(0x274)](_0x1f7109=>_0x1f7109[_0x34483d(0x204)]!=_0x19ac8a),await handleError(_0x5793e3,_0x34483d(0x321),_0x19ac8a));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x34483d(0x207)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x45a4ee=config[_0x34483d(0x304)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x45a4ee);}else unlockOrders();_0x5c2ddb&&config[_0x34483d(0x3b1)]&&(logHistory(_0x34483d(0x2f1),_0x34483d(0x32d)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x34483d(0x1ed),_0x34483d(0x25a)));}else{if(coolingDown)!config[_0x34483d(0x3b1)]&&logHistory(_0x34483d(0x2f1),_0x34483d(0x301));else lockOrders!=ORDERS[_0x34483d(0x39e)]&&(!config[_0x34483d(0x3b1)]&&(config[_0x34483d(0x304)]=='market'?logHistory(_0x34483d(0x2f1),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x34483d(0x2f1),_0x34483d(0x2bd))));}}function persistOpenOrders(_0x465229){const _0x44904b=_0xde38f7,_0x370b7e={...config,'openOrders':_0x465229};let _0xecfbce=dbConfig[_0x44904b(0x235)](_0x44904b(0x22c))[_0x44904b(0x267)]({'botID':botID})[_0x44904b(0x34d)]();_0xecfbce&&dbConfig[_0x44904b(0x235)](_0x44904b(0x22c))['find']({'botID':botID})[_0x44904b(0x370)](_0x370b7e)['write']();}function restoreOrders(){const _0x123e20=_0xde38f7;let _0x378294;config[_0x123e20(0x2d7)]&&allOpenOrders[_0x123e20(0x277)](_0xe1122e=>{const _0x3b2231=_0x123e20,_0x2d93ae=config[_0x3b2231(0x2d7)][_0x3b2231(0x267)](_0x583088=>_0x583088[_0x3b2231(0x2eb)]==_0xe1122e['id']);_0x2d93ae&&(lastOrders[_0x3b2231(0x372)](_0x2d93ae),_0x378294=_0xe1122e[_0x3b2231(0x303)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x123e20(0x35a)],validateOrdersState=_0x123e20(0x2d1),allOrdersPlaced=!![];const _0x4e134e=new Date()['getTime'](),_0x2915ca=config[_0x123e20(0x304)]==_0x123e20(0x2f9)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x378294+_0x2915ca>_0x4e134e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3c7be5=_0x123e20;validateOrders(_0x3c7be5(0x317));},_0x378294+_0x2915ca-_0x4e134e);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x2187cf=_0xde38f7;if(!coinsLoaded){process[_0x2187cf(0x22e)]({'telegrammsg':_0x2187cf(0x216)},_0x299e0a=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2fcf3c='';if(config[_0x2187cf(0x3a6)])_0x2fcf3c=_0x2187cf(0x39c)+config[_0x2187cf(0x258)]+_0x2187cf(0x2ee);else _0x2fcf3c=_0x2187cf(0x299)+botID+_0x2187cf(0x2ee);const _0x25e858=getKPIs('basecoin'),_0x251507=getKPIs(_0x2187cf(0x2cc),config[_0x2187cf(0x2cc)]),_0x563af7=getKPIs(_0x2187cf(0x36d)),_0xaaf1ab=getKPIs(_0x2187cf(0x326),config[_0x2187cf(0x2cc)]);_0x2fcf3c+=_0x2187cf(0x34f),_0x2fcf3c+=_0x25e858[_0x2187cf(0x310)]+_0x2187cf(0x1f5)+_0x25e858[_0x2187cf(0x34d)]+'\x0a',_0x2fcf3c+=_0x25e858[_0x2187cf(0x34c)]+':\x20'+_0x25e858['change']+'%\x0a',_0x2fcf3c+=_0x251507['leftTxt']+_0x2187cf(0x1f5)+_0x251507[_0x2187cf(0x34d)]+'\x0a',_0x2fcf3c+=_0x251507[_0x2187cf(0x34c)]+':\x20'+_0x251507['change']+'%\x0a',_0x2fcf3c+=_0x563af7['leftTxt']+':\x20'+_0x563af7[_0x2187cf(0x34d)]+'\x20('+config[_0x2187cf(0x311)]+')\x0a',_0x2fcf3c+=_0x563af7[_0x2187cf(0x34c)]+':\x20'+_0x563af7[_0x2187cf(0x1ec)]+'%\x20('+config[_0x2187cf(0x311)]+')\x0a',_0x2fcf3c+=_0xaaf1ab[_0x2187cf(0x310)]+':\x20'+_0xaaf1ab[_0x2187cf(0x34d)]+'\x20('+config[_0x2187cf(0x2cc)]+')\x0a',_0x2fcf3c+=_0xaaf1ab[_0x2187cf(0x34c)]+':\x20'+_0xaaf1ab[_0x2187cf(0x1ec)]+_0x2187cf(0x2f2)+config['fiat']+')\x0a',_0x2fcf3c+=_0x2187cf(0x238),process['send']({'telegrammsg':_0x2fcf3c},_0x577c4d=>{});}async function sendPortfolioTelegram(){const _0x2718c1=_0xde38f7;if(!coinsLoaded||!currentCoins[0x0][_0x2718c1(0x37b)]){process[_0x2718c1(0x22e)]({'telegrammsg':_0x2718c1(0x216)},_0xfc6f50=>{});return;}let _0x21a754='';if(config[_0x2718c1(0x3a6)])_0x21a754=_0x2718c1(0x39c)+config['botname']+_0x2718c1(0x300);else _0x21a754=_0x2718c1(0x299)+botID+_0x2718c1(0x300);_0x21a754+=_0x2718c1(0x34f),_0x21a754+=_0x2718c1(0x3a0),_0x21a754+=_0x2718c1(0x284),_0x21a754+=_0x2718c1(0x3a0),currentCoins[_0x2718c1(0x277)](_0x3480ac=>{const _0x59c16a=_0x2718c1;_0x21a754+=_0x3480ac[_0x59c16a(0x1f2)][_0x59c16a(0x20a)](0x7)+'|\x20'+formatPad(_0x3480ac[_0x59c16a(0x37b)],0x2,0x6)+'|\x20'+formatPad(_0x3480ac[_0x59c16a(0x32a)],0x2,0x6)+'|\x20'+formatPad(_0x3480ac[_0x59c16a(0x352)]*0x64,0x2,0x6)+'\x0a';}),_0x21a754+=_0x2718c1(0x238),process['send']({'telegrammsg':_0x21a754},_0x17b682=>{});}function formatPad(_0x410779,_0x1d321b,_0x11c9be){const _0x17a367=_0xde38f7,_0x518669=formatResultString(_0x410779,_0x1d321b);return _0x518669?_0x518669[_0x17a367(0x36e)](_0x11c9be):''[_0x17a367(0x36e)](_0x11c9be);}function logHistory(_0x41fd28,_0x219e8a,_0x327fe3=''){const _0x4cee12=_0xde38f7;logger[_0x4cee12(0x268)](''+_0x219e8a);let _0x1f5362={'time':getTimeStamp(),'type':_0x41fd28,'event':_0x219e8a};dbLogs[_0x4cee12(0x235)](_0x4cee12(0x278))[_0x4cee12(0x372)](_0x1f5362)[_0x4cee12(0x290)]();if(_0x327fe3=='')_0x327fe3=_0x219e8a;proxyEmit('event',{'log':_0x1f5362,'summary':_0x327fe3}),process['send']({'telegram':{..._0x1f5362,'botname':config[_0x4cee12(0x258)],'showname':config[_0x4cee12(0x3a6)]}},_0xb0dc0e=>{});}function emitHistory(_0x162261={}){const _0x3e674a=_0xde38f7;Object[_0x3e674a(0x356)](_0x162261)[_0x3e674a(0x207)]==0x0&&(_0x162261={'type':[_0x3e674a(0x233),_0x3e674a(0x2d4)],'event':'','page':0x1});if(_0x162261[_0x3e674a(0x2da)]['includes'](_0x3e674a(0x2d4)))_0x162261[_0x3e674a(0x2da)][_0x3e674a(0x288)](_0x162261[_0x3e674a(0x2da)][_0x3e674a(0x285)](_0x3e674a(0x2d4)),0x1,'error',_0x3e674a(0x378),_0x3e674a(0x1ed));if(dbLogs['has'](_0x3e674a(0x278))['value']()){let _0x4abfdf=dbLogs[_0x3e674a(0x235)](_0x3e674a(0x278))[_0x3e674a(0x274)](_0x21c8df=>{const _0x288cfe=_0x3e674a;if(_0x162261[_0x288cfe(0x2da)][_0x288cfe(0x207)]==0x0)return![];else return _0x162261[_0x288cfe(0x2da)][_0x288cfe(0x35f)](_0x21c8df['type']);})[_0x3e674a(0x274)](_0x34204b=>{const _0x17fd09=_0x3e674a;if(_0x162261[_0x17fd09(0x2d4)]=='')return!![];else return _0x34204b[_0x17fd09(0x2d4)]['toLowerCase']()[_0x17fd09(0x35f)](_0x162261['event'][_0x17fd09(0x21f)]());})[_0x3e674a(0x366)]('time'),_0x1834ee=_0x4abfdf['value']()['length'];_0x4abfdf=_0x4abfdf[_0x3e674a(0x32e)]()[_0x3e674a(0x398)]((_0x162261['page']-0x1)*logPageSize,_0x162261[_0x3e674a(0x2d9)]*logPageSize-0x1)[_0x3e674a(0x32e)]()[_0x3e674a(0x34d)](),proxyEmit(_0x3e674a(0x1f6),{'logs':_0x4abfdf,'total':_0x1834ee});}else proxyEmit(_0x3e674a(0x1f6),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3bacd6){const _0x4abf56=_0xde38f7;if(dbLogs[_0x4abf56(0x2cb)]('logs')[_0x4abf56(0x34d)]()){const _0x17aa42=dbLogs[_0x4abf56(0x235)](_0x4abf56(0x278))[_0x4abf56(0x366)](_0x4abf56(0x3ac))[_0x4abf56(0x274)](_0x5f91c0=>{const _0x5ed841=_0x4abf56;return _0x5f91c0[_0x5ed841(0x2da)]==_0x5ed841(0x233);})[_0x4abf56(0x34d)]();dbLogs['get'](_0x4abf56(0x278))['remove']()[_0x4abf56(0x290)](),dbLogs[_0x4abf56(0x235)](_0x4abf56(0x278))[_0x4abf56(0x370)](_0x17aa42)['write'](),emitHistory(_0x3bacd6);}}async function pauseBot(_0x400667=pauseBotIntervalShort,_0x4296b5,_0x2ad759){const _0x4d85d7=_0xde38f7,_0x4c8e53=new Date()['getTime']();if(!lastErrorShown||_0x4c8e53-lastErrorShown>=_0x400667){lastErrorShown=_0x4c8e53;!lastBotPause?(lastBotPause=_0x4c8e53,consecutivePauses=0x1):(_0x4c8e53-lastBotPause-_0x400667<0x5a*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory('error',_0x4296b5+pauseBotMsg),_0x400667=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x4c8e53);_0x2ad759?logger[_0x4d85d7(0x1f4)]('('+consecutivePauses+')\x20'+_0x4296b5+'\x20>\x20details:',_0x2ad759):logger[_0x4d85d7(0x1f4)]('('+consecutivePauses+')\x20'+_0x4296b5);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x400667),botPaused=![],_0x400667==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x483c17=_0xde38f7;botPaused=!![],await sleep(0x3e8),process[_0x483c17(0x22e)]({'stop':_0x483c17(0x292)},_0x4e3fc7=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x482860,_0x957ac2){const _0xfa934b=_0xde38f7;if(botPaused)return;const _0x2cf4c0=config[_0xfa934b(0x363)]||'Exchange';if(_0x957ac2)logger['debug']('Exception\x20thrown\x20in\x20'+_0x957ac2);const _0x14d143=()=>{const _0x298f04=_0xfa934b;loading[_0x298f04(0x2f1)]=!![],emitLoadingProgress();};if(_0x482860['toString']()[_0xfa934b(0x35f)]('API-key\x20format\x20invalid'))logHistory(_0xfa934b(0x2f1),_0x2cf4c0+_0xfa934b(0x2c6)),_0x14d143();else{if(_0x482860[_0xfa934b(0x2f0)]()[_0xfa934b(0x35f)](_0xfa934b(0x23c)))logHistory('error',_0x2cf4c0+_0xfa934b(0x38a)),_0x14d143();else _0x482860['toString']()[_0xfa934b(0x35f)](_0xfa934b(0x359))?(logHistory(_0xfa934b(0x2f1),_0x2cf4c0+_0xfa934b(0x205)),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x14d143()):await handleError(_0x482860,null);}}async function handleError(_0x578462,_0x5b4496,_0x4e1656=''){const _0x5ab3d7=_0xde38f7;if(botPaused)return;let _0x50870e;const _0x22f106=config[_0x5ab3d7(0x363)]||_0x5ab3d7(0x24f);if(_0x5b4496)logger[_0x5ab3d7(0x1f4)](_0x5ab3d7(0x323)+_0x5b4496);if(_0x578462[_0x5ab3d7(0x2f0)]()['includes']('DDoSProtection'))_0x50870e=_0x22f106+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x3ab)))_0x50870e=_0x22f106+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x2c2))||_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x210)))_0x50870e=_0x22f106+_0x5ab3d7(0x309),await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x325)))_0x50870e=_0x22f106+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462['toString']()['includes'](_0x5ab3d7(0x3b0)))_0x50870e=_0x22f106+_0x5ab3d7(0x26e),await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()['toLowerCase']()['includes'](_0x5ab3d7(0x303))||_0x578462[_0x5ab3d7(0x2f0)]()['toLowerCase']()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x37f)))_0x50870e=_0x5ab3d7(0x39f),await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x294)))_0x50870e=_0x22f106+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462 instanceof ccxt[_0x5ab3d7(0x33b)])_0x50870e=_0x22f106+_0x5ab3d7(0x307),await pauseBot(undefined,_0x50870e,_0x578462);else{if(_0x578462[_0x5ab3d7(0x2f0)]()['includes'](_0x5ab3d7(0x3ae)))logHistory(_0x5ab3d7(0x2f1),_0x22f106+_0x5ab3d7(0x262)),logHistory(_0x5ab3d7(0x2f1),_0x5ab3d7(0x2ce)),await killBot();else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x23c)))logHistory(_0x5ab3d7(0x2f1),_0x22f106+_0x5ab3d7(0x3a7)),logHistory('error',_0x5ab3d7(0x2ce)),await killBot();else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x359)))logHistory(_0x5ab3d7(0x2f1),_0x22f106+_0x5ab3d7(0x334)),logger[_0x5ab3d7(0x1f4)]('Error\x20details:',_0x578462),logger[_0x5ab3d7(0x1f4)](_0x5ab3d7(0x2bf)+config[_0x5ab3d7(0x35e)][_0x5ab3d7(0x398)](-0x5)+'\x20'+config[_0x5ab3d7(0x24c)][_0x5ab3d7(0x398)](-0x5)+'\x20'+config[_0x5ab3d7(0x2e0)][_0x5ab3d7(0x398)](-0x5)),logger[_0x5ab3d7(0x1f4)](_0x5ab3d7(0x28a)+exchange[_0x5ab3d7(0x35e)][_0x5ab3d7(0x398)](-0x5)+'\x20'+exchange['secret']['slice'](-0x5)+'\x20'+exchange[_0x5ab3d7(0x253)]['slice'](-0x5)),logHistory(_0x5ab3d7(0x2f1),_0x5ab3d7(0x2ce)),await killBot();else{if(_0x578462['toString']()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x297)))logHistory(_0x5ab3d7(0x2f1),_0x22f106+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory('error',_0x5ab3d7(0x2ce)),await killBot();else{if(_0x578462[_0x5ab3d7(0x2f0)]()[_0x5ab3d7(0x35f)](_0x5ab3d7(0x2e8)))logHistory(_0x5ab3d7(0x2f1),_0x5ab3d7(0x315)+_0x4e1656);else{if(_0x578462 instanceof ccxt[_0x5ab3d7(0x340)]){logHistory(_0x5ab3d7(0x2f1),_0x22f106+_0x5ab3d7(0x217)),logger['debug']('Error\x20details:',_0x578462);if(_0x4e1656)logger[_0x5ab3d7(0x1f4)](_0x5ab3d7(0x380)+_0x4e1656);}else{_0x50870e=_0x5ab3d7(0x2d5),logger[_0x5ab3d7(0x1f4)](_0x50870e+_0x5ab3d7(0x2f7),_0x578462);if(_0x4e1656)logger['debug'](_0x5ab3d7(0x380)+_0x4e1656);await pauseBot(undefined,_0x50870e);}}}}}}}}}}}}}}}async function withRetry(_0x141100,_0x318285){const _0x1d50a4=_0xde38f7;let _0x156b42=![],_0x8bd210=0x0,_0x38122a,_0x2f07ff;while(_0x8bd210<maxRetries){try{_0x38122a=await _0x318285();break;}catch(_0x121945){_0x2f07ff=_0x121945,!_0x156b42?(_0x156b42=!![],logger[_0x1d50a4(0x1f4)](_0x1d50a4(0x27b)+_0x141100+':',_0x121945[_0x1d50a4(0x2f0)]())):await sleep(retryInterval);}_0x8bd210++;}if(_0x8bd210==0x0)return _0x38122a;if(_0x8bd210>=maxRetries)throw _0x2f07ff;else return logger[_0x1d50a4(0x1f4)](_0x1d50a4(0x28f)+_0x8bd210+_0x1d50a4(0x206)),_0x38122a;}function formatResult(_0x326955,_0x5cdb40){return parseFloat(_0x326955['toFixed'](_0x5cdb40));}function formatResultTruncate(_0xecc673,_0x4fb5dd){const _0x226eec=_0xde38f7;let _0x2c2f5a=formatResultString(_0xecc673,0xa),_0x31ff98=_0x2c2f5a[_0x226eec(0x285)]('.');return _0x31ff98!=-0x1&&(_0x2c2f5a=_0x2c2f5a['slice'](0x0,_0x31ff98+_0x4fb5dd+0x1)),Number(_0x2c2f5a);}function _0x5f36(_0x31a5f7,_0xc6ae44){const _0x1a3dd3=_0x5a7a();return _0x5f36=function(_0x3cd0c4,_0x2eb75d){_0x3cd0c4=_0x3cd0c4-0x1eb;let _0x5a7ad5=_0x1a3dd3[_0x3cd0c4];return _0x5a7ad5;},_0x5f36(_0x31a5f7,_0xc6ae44);}function formatResultString(_0x177edb,_0x3fd6ca){const _0x27f11f=_0xde38f7;let _0x765624;if(!(''+_0x177edb)[_0x27f11f(0x35f)]('e'))_0x765624=+(Math[_0x27f11f(0x271)](_0x177edb+'e+'+_0x3fd6ca)+'e-'+_0x3fd6ca);else{let _0x49562b=(''+_0x177edb)[_0x27f11f(0x3b2)]('e'),_0x24cb7b='';+_0x49562b[0x1]+_0x3fd6ca>0x0&&(_0x24cb7b='+'),_0x765624=+(Math[_0x27f11f(0x271)](+_0x49562b[0x0]+'e'+_0x24cb7b+(+_0x49562b[0x1]+_0x3fd6ca))+'e-'+_0x3fd6ca);}return Number(_0x765624)[_0x27f11f(0x21e)](_0x3fd6ca);}function getServerTime(){const _0x20dd01=_0xde38f7,_0x229f02=new Date();return _0x229f02[_0x20dd01(0x24d)]()+'/'+(_0x229f02[_0x20dd01(0x2e4)]()+0x1)[_0x20dd01(0x2f0)]()[_0x20dd01(0x36e)](0x2,'0')+'/'+_0x229f02['getDate']()[_0x20dd01(0x2f0)]()['padStart'](0x2,'0')+'\x20'+_0x229f02[_0x20dd01(0x1fc)]()[_0x20dd01(0x2f0)]()['padStart'](0x2,'0')+':'+_0x229f02['getMinutes']()[_0x20dd01(0x2f0)]()['padStart'](0x2,'0')+':'+_0x229f02['getSeconds']()[_0x20dd01(0x2f0)]()[_0x20dd01(0x36e)](0x2,'0');}function getTimeStamp(){const _0x2146b2=_0xde38f7,_0x42a113=shiftedTime();return _0x42a113[_0x2146b2(0x24d)]()+'/'+(_0x42a113[_0x2146b2(0x2e4)]()+0x1)['toString']()[_0x2146b2(0x36e)](0x2,'0')+'/'+_0x42a113[_0x2146b2(0x2d8)]()[_0x2146b2(0x2f0)]()[_0x2146b2(0x36e)](0x2,'0')+'\x20'+_0x42a113[_0x2146b2(0x1fc)]()[_0x2146b2(0x2f0)]()['padStart'](0x2,'0')+':'+_0x42a113[_0x2146b2(0x266)]()[_0x2146b2(0x2f0)]()[_0x2146b2(0x36e)](0x2,'0')+':'+_0x42a113['getSeconds']()[_0x2146b2(0x2f0)]()[_0x2146b2(0x36e)](0x2,'0');}function getDate(){const _0x1dce0c=_0xde38f7,_0x59a90d=shiftedTime();return _0x59a90d[_0x1dce0c(0x24d)]()+'/'+(_0x59a90d[_0x1dce0c(0x2e4)]()+0x1)['toString']()[_0x1dce0c(0x36e)](0x2,'0')+'/'+_0x59a90d[_0x1dce0c(0x2d8)]()[_0x1dce0c(0x2f0)]()['padStart'](0x2,'0');}function getHour(){const _0x50a7fe=_0xde38f7,_0x521ce1=shiftedTime();return _0x521ce1[_0x50a7fe(0x1fc)]()['toString']()[_0x50a7fe(0x36e)](0x2,'0');}function sleep(_0x130766){return new Promise(_0x1cb875=>setTimeout(_0x1cb875,_0x130766));}function shiftedTime(){const _0x535574=_0xde38f7,_0x13dc02=new Date();let _0x4e89bf=_0x13dc02;if(config&&config[_0x535574(0x2c3)]!==0x0)_0x4e89bf=fns[_0x535574(0x383)](_0x13dc02,{'hours':config[_0x535574(0x2c3)]});return _0x4e89bf;}function timer(_0x49217d){const _0x1c954c=_0xde38f7,_0x398415=new Date();!lasttime?console[_0x1c954c(0x348)](getTimeStamp()+':\x20timer\x20>',_0x49217d,_0x398415):console[_0x1c954c(0x348)](getTimeStamp()+_0x1c954c(0x399),_0x49217d,(_0x398415-lasttime)/0x3e8),lasttime=_0x398415;}