const _0x465c6e=_0x56e0;(function(_0x44fd66,_0xbf13d0){const _0x3c3ad1=_0x56e0,_0x448405=_0x44fd66();while(!![]){try{const _0x49110d=-parseInt(_0x3c3ad1(0x213))/0x1+-parseInt(_0x3c3ad1(0x27e))/0x2+-parseInt(_0x3c3ad1(0x17e))/0x3*(parseInt(_0x3c3ad1(0x255))/0x4)+-parseInt(_0x3c3ad1(0x1fa))/0x5+parseInt(_0x3c3ad1(0x26a))/0x6+-parseInt(_0x3c3ad1(0x26c))/0x7*(-parseInt(_0x3c3ad1(0x1b1))/0x8)+parseInt(_0x3c3ad1(0x1f5))/0x9*(parseInt(_0x3c3ad1(0x1e9))/0xa);if(_0x49110d===_0xbf13d0)break;else _0x448405['push'](_0x448405['shift']());}catch(_0x3169d4){_0x448405['push'](_0x448405['shift']());}}}(_0x3778,0x399bb));const _0x4bca27=function(){let _0x4c8629=!![];return function(_0x30e224,_0x407335){const _0x3ed450=_0x4c8629?function(){const _0x3d1ca0=_0x56e0;if(_0x407335){const _0x11d114=_0x407335[_0x3d1ca0(0x23a)](_0x30e224,arguments);return _0x407335=null,_0x11d114;}}:function(){};return _0x4c8629=![],_0x3ed450;};}(),_0xb2cfba=_0x4bca27(this,function(){const _0x17e533=_0x56e0;return _0xb2cfba[_0x17e533(0x21c)]()[_0x17e533(0x1c1)](_0x17e533(0x25c))['toString']()[_0x17e533(0x1ea)](_0xb2cfba)[_0x17e533(0x1c1)]('(((.+)+)+)+$');});_0xb2cfba();'use strict';const ccxt=require(_0x465c6e(0x18b)),low=require(_0x465c6e(0x263)),FileSync=require(_0x465c6e(0x190)),fs=require('fs'),fns=require(_0x465c6e(0x24a)),{WebsocketClient,DefaultLogger}=require(_0x465c6e(0x1c6)),Crypt=require(_0x465c6e(0x253))[_0x465c6e(0x191)];let exchange,wsClient;global[_0x465c6e(0x20a)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x465c6e(0x242))['version'],botID=process[_0x465c6e(0x1f7)][0x2]||_0x465c6e(0x273),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x465c6e(0x234)]('Error:\x20Invalid\x20argument\x20'+botID+_0x465c6e(0x248)),process[_0x465c6e(0x1a8)](0x1);const configpath=_0x465c6e(0x1e3);!fs[_0x465c6e(0x1fe)](configpath)&&fs[_0x465c6e(0x22a)](configpath);const configfile=configpath+'bot-'+botID+_0x465c6e(0x245),logfile=configpath+'bot-'+botID+_0x465c6e(0x24d),performancefile=configpath+_0x465c6e(0x23e)+botID+'-performance.json',coinresultsfile=configpath+_0x465c6e(0x23e)+botID+_0x465c6e(0x282),settingsfile=configpath+_0x465c6e(0x211),securefile=configpath+_0x465c6e(0x1ab),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x465c6e(0x22e)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x465c6e(0x22e)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x465c6e(0x240)]({'bot':[]})[_0x465c6e(0x22e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x465c6e(0x240)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x465c6e(0x25e),'symbol':_0x465c6e(0x1c3)},'usd':{'coin':_0x465c6e(0x225),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x25bbbc)=>{},'debug':(..._0x47a16a)=>{},'notice':(..._0x2e2e4f)=>{},'info':(..._0xda555a)=>{},'warning':(..._0x1885c2)=>{},'error':async function(..._0x55bcc5){const _0x2c4681=_0x465c6e,_0x30bd2f=new Date()[_0x2c4681(0x1be)]();if(!lastErrorShown||_0x30bd2f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x2c4681(0x1be)](),logHistory('error',_0x2c4681(0x228)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes');let _0x5ba133='';if(_0x55bcc5[0x0])_0x5ba133+=_0x55bcc5[0x0];if(_0x55bcc5[0x1]?.[_0x2c4681(0x1c4)]?.[_0x2c4681(0x23c)])_0x5ba133+=_0x2c4681(0x22c)+_0x55bcc5[0x1][_0x2c4681(0x1c4)][_0x2c4681(0x23c)];logging('WebSockets('+consecutivePauses+_0x2c4681(0x222),''+_0x5ba133),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x465c6e(0x215),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x465c6e(0x1fb)]!=config['timeshift']&&updateTimeshift(settings[_0x465c6e(0x1fb)]);process[_0x465c6e(0x1cc)]({'started':_0x465c6e(0x199)}),initializeProcessListeners();function proxyEmit(_0x102909,_0x2ff49c=null){const _0x423280=_0x465c6e;process[_0x423280(0x1cc)]({'function':_0x102909,'args':_0x2ff49c});}function initializeProcessListeners(){const _0x272b3e=_0x465c6e;process['on'](_0x272b3e(0x23c),_0x59b56f=>{const _0x174a11=_0x272b3e;switch(Object['keys'](_0x59b56f)[0x0]){case'timeshift':_0x59b56f[_0x174a11(0x1fb)]!=undefined&&(settings['timeshift']=_0x59b56f[_0x174a11(0x1fb)],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x59b56f[_0x174a11(0x254)]){case _0x174a11(0x26f):initclient();break;case _0x174a11(0x24e):emitHistory(_0x59b56f['args']);break;case _0x174a11(0x1b4):getPortfolio(_0x59b56f['args']);break;case _0x174a11(0x1ce):storeConfiguration(_0x59b56f[_0x174a11(0x24c)]);break;case _0x174a11(0x1ad):storeHeadless(_0x59b56f[_0x174a11(0x24c)]);break;case _0x174a11(0x212):getStartingBalances();break;case'placeOrder':placeOrder(_0x59b56f[_0x174a11(0x24c)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x31825f=_0x465c6e;if(pidBalances)clearTimeout(pidBalances);if(config[_0x31825f(0x235)]!=''){await initExchange(config[_0x31825f(0x235)],config[_0x31825f(0x260)]);let _0x1349e6=await loadSymbols();_0x1349e6&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x27d749,_0x1e19fb){const _0x5a5d65=_0x465c6e,_0x121a15=ccxt[config[_0x5a5d65(0x230)]];let _0x25857c;switch(config['exchange']){case _0x5a5d65(0x1c6):_0x25857c=_0x5a5d65(0x272);break;case _0x5a5d65(0x19a):_0x25857c=_0x5a5d65(0x1ba);break;default:_0x25857c=_0x5a5d65(0x272);}exchange=new _0x121a15({'apiKey':_0x27d749,'secret':_0x1e19fb,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x27d749,'api_secret':_0x1e19fb,'beautify':!![],'wsUrl':_0x25857c},logger),config['exchange']==_0x5a5d65(0x19a)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x5a5d65(0x27d)},'usd':{'coin':'BTCUSDT','symbol':_0x5a5d65(0x20c)}});}async function loadSymbols(){const _0x3508c9=_0x465c6e;let _0x5170a3;try{markets=await exchange[_0x3508c9(0x209)](),allSymbols=exchange[_0x3508c9(0x1c0)][_0x3508c9(0x26d)](_0x1f4e4a=>{const _0x41073=_0x3508c9;return _0x1f4e4a['includes'](_0x41073(0x1aa))&&!_0x1f4e4a['includes'](_0x41073(0x201));}),_0x5170a3=!![];}catch(_0x495f82){await handleError(_0x495f82,_0x3508c9(0x1d8)),_0x5170a3=![];}return _0x5170a3;}async function initbot(){const _0x5d9650=_0x465c6e;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2ddb3a=dbCoinResults[_0x5d9650(0x20f)]('coins')[_0x5d9650(0x1ac)]();if(_0x2ddb3a[_0x5d9650(0x268)]==0x0)await resetCoinResults();}async function initclient(){const _0x2ca93f=_0x465c6e;proxyEmit(_0x2ca93f(0x1a2),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2ca93f(0x283),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x6abf8a=_0x465c6e;wsinitialized=![];ws1&&(ws1[_0x6abf8a(0x19e)](_0x929256=>{const _0x13580d=_0x6abf8a;try{wsClient[_0x13580d(0x256)](_0x929256);}catch(_0x50fd2a){}}),ws1=[]);if(ws2){try{wsClient[_0x6abf8a(0x256)](ws2);}catch(_0x262aa8){}ws2=null;}}async function initws(){const _0x5dcc35=_0x465c6e;cleanws();let _0x49587f=[];currentCoins['forEach'](_0x4c9fc4=>{const _0x27d104=_0x56e0;if(_0x4c9fc4[_0x27d104(0x20d)]!=_0x27d104(0x1aa))_0x49587f[_0x27d104(0x25f)](noslash(_0x4c9fc4[_0x27d104(0x18f)]));});if(!_0x49587f['includes'](stablecoins[_0x5dcc35(0x1ef)][_0x5dcc35(0x20d)]))_0x49587f[_0x5dcc35(0x25f)](stablecoins['eur'][_0x5dcc35(0x20d)]);if(!_0x49587f[_0x5dcc35(0x1c5)](stablecoins[_0x5dcc35(0x24f)][_0x5dcc35(0x20d)]))_0x49587f[_0x5dcc35(0x25f)](stablecoins['usd']['coin']);if(!_0x49587f['includes'](_0x5dcc35(0x25a)))_0x49587f[_0x5dcc35(0x25f)](_0x5dcc35(0x25a));try{_0x49587f[_0x5dcc35(0x19e)]((_0x189c6a,_0x11c3fa)=>{const _0x471b07=_0x5dcc35;ws1[_0x11c3fa]=wsClient[_0x471b07(0x1bc)](_0x189c6a,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0x8585c7=>{const _0x2869ab=_0x5dcc35;if(!Array[_0x2869ab(0x206)](_0x8585c7)&&!_0x8585c7[_0x2869ab(0x264)][_0x2869ab(0x1c5)](_0x2869ab(0x189))){if(_0x8585c7[_0x2869ab(0x1f2)]===_0x2869ab(0x1f6)){global[_0x2869ab(0x20a)][_0x8585c7[_0x2869ab(0x1f6)][_0x2869ab(0x18f)]]=_0x8585c7['kline']['close'];return;}}else{if(!Array[_0x2869ab(0x206)](_0x8585c7)&&_0x8585c7[_0x2869ab(0x264)][_0x2869ab(0x1c5)](_0x2869ab(0x189))){if(_0x8585c7[_0x2869ab(0x1d7)]['includes']('spot')){updateNumberCoins(_0x8585c7);return;}}}}),wsClient['on']('reconnected',async _0x2cc02f=>{currentCoins=await getCoins();});}catch(_0x28f66f){await handleError(_0x28f66f,_0x5dcc35(0x1b8));}let _0x56cf61;while(_0x56cf61!=currentCoins[_0x5dcc35(0x268)]-0x1){_0x56cf61=0x0,currentCoins[_0x5dcc35(0x19e)](_0x48ea4a=>{const _0x382e60=_0x5dcc35;if(_0x48ea4a[_0x382e60(0x20d)]!=_0x382e60(0x1aa)&&global[_0x382e60(0x20a)][noslash(_0x48ea4a[_0x382e60(0x18f)])])_0x56cf61++;});let _0x25eab8=Math[_0x5dcc35(0x218)](_0x56cf61/(currentCoins[_0x5dcc35(0x268)]-0x1)*0x64);proxyEmit(_0x5dcc35(0x247),_0x25eab8),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x3a9d30=_0x465c6e;let _0x384f98=0x0,_0x27ac11=0x0;try{_0x384f98=global[_0x3a9d30(0x20a)][stablecoins[_0x3a9d30(0x1ef)]['coin']],_0x27ac11=global['ticker'][stablecoins[_0x3a9d30(0x24f)]['coin']];}catch(_0x33a4ae){await handleError(_0x33a4ae,_0x3a9d30(0x229));}return{'eur':Number(_0x384f98),'usd':Number(_0x27ac11)};}async function setStartDatePerformance(_0x3db26a){const _0x255237=_0x465c6e,_0x279d7b=fns[_0x255237(0x262)](new Date(_0x3db26a[_0x255237(0x27b)]),'yyyy/MM/dd');let _0x11f145=[];_0x11f145[stablecoins[_0x255237(0x1ef)][_0x255237(0x20d)]]=await getCloses(stablecoins[_0x255237(0x1ef)]['symbol'],new Date(_0x3db26a[_0x255237(0x27b)]),0x1),_0x11f145[stablecoins[_0x255237(0x24f)][_0x255237(0x20d)]]=await getCloses(stablecoins['usd'][_0x255237(0x18f)],new Date(_0x3db26a['startdate']),0x1);let _0x3e3faf,_0x227af3=[];_0x3db26a['portfolio']['forEach'](_0x3f7aba=>{const _0x2e9518=_0x255237;!_0x3f7aba['excluded']&&_0x227af3[_0x2e9518(0x25f)]({'coin':_0x3f7aba[_0x2e9518(0x20d)],'number':_0x3f7aba['startnumber'],'price':_0x3f7aba[_0x2e9518(0x1b6)]});}),_0x3e3faf={'date':_0x279d7b,'eur':_0x11f145[stablecoins[_0x255237(0x1ef)][_0x255237(0x20d)]][0x0],'usd':_0x11f145[stablecoins[_0x255237(0x24f)][_0x255237(0x20d)]][0x0],'coins':_0x227af3};let _0x350fb2=dbPerformance[_0x255237(0x20f)]('data')[_0x255237(0x232)]({'date':_0x279d7b})[_0x255237(0x1ac)]();_0x350fb2?dbPerformance[_0x255237(0x20f)](_0x255237(0x271))[_0x255237(0x232)]({'date':_0x279d7b})[_0x255237(0x208)](_0x3e3faf)[_0x255237(0x22e)]():dbPerformance['get'](_0x255237(0x271))[_0x255237(0x25f)](_0x3e3faf)[_0x255237(0x22e)](),_0x350fb2=dbPerformance['get'](_0x255237(0x271))[_0x255237(0x1da)]('date')[_0x255237(0x1ac)](),_0x350fb2[_0x255237(0x19e)](_0x589507=>{const _0x41b9ef=_0x255237;_0x589507[_0x41b9ef(0x1c7)]<_0x279d7b&&dbPerformance[_0x41b9ef(0x20f)](_0x41b9ef(0x271))[_0x41b9ef(0x1a5)]({'date':_0x589507[_0x41b9ef(0x1c7)]})[_0x41b9ef(0x22e)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x146a3f){const _0x3b1788=_0x465c6e;let _0x4d7489,_0x32596d=[];logHistory(_0x3b1788(0x20b),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x146a3f[_0x3b1788(0x1a0)][_0x3b1788(0x19e)](_0x46caf6=>{const _0x29f87d=_0x3b1788;if(_0x46caf6[_0x29f87d(0x20d)]!=_0x29f87d(0x1aa)&&!_0x46caf6['excluded'])_0x32596d[_0x29f87d(0x25f)]({'coin':_0x46caf6[_0x29f87d(0x20d)],'symbol':_0x46caf6[_0x29f87d(0x18f)]});});let _0x497b64=[];try{const _0x16879a=fns[_0x3b1788(0x262)](fns['parseISO'](_0x146a3f['startdate'][_0x3b1788(0x1e6)](/\//g,'-')),_0x3b1788(0x18d));for(const _0x1c9ef0 of _0x32596d){if(_0x1c9ef0[_0x3b1788(0x20d)]!=_0x3b1788(0x1aa))_0x4d7489=await exchange['fetchOrders'](_0x1c9ef0[_0x3b1788(0x18f)],Date[_0x3b1788(0x217)](_0x16879a));_0x4d7489['forEach'](_0x331b1a=>{const _0x4cd1b4=_0x3b1788,_0x5db22e=_0x1c9ef0[_0x4cd1b4(0x18f)][_0x4cd1b4(0x1c5)](_0x4cd1b4(0x1e7)),_0x199ad3=fns[_0x4cd1b4(0x262)](fns['parseISO'](_0x331b1a[_0x4cd1b4(0x261)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x35f516=fns['format'](fns[_0x4cd1b4(0x1dd)](_0x331b1a['datetime']),_0x4cd1b4(0x197));let _0x4aa5e1;if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x27a)&&_0x5db22e==![])_0x4aa5e1=_0x331b1a[_0x4cd1b4(0x1d5)];if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x27a)&&_0x5db22e==!![])_0x4aa5e1=-_0x331b1a[_0x4cd1b4(0x1d5)]*_0x331b1a[_0x4cd1b4(0x1f9)];if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x237)&&_0x5db22e==![])_0x4aa5e1=-_0x331b1a[_0x4cd1b4(0x1d5)];if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x237)&&_0x5db22e==!![])_0x4aa5e1=_0x331b1a[_0x4cd1b4(0x1d5)]*_0x331b1a['price'];_0x497b64['push']({'timestamp':_0x199ad3,'date':_0x35f516,'coin':_0x1c9ef0['coin'],'symbol':_0x1c9ef0['symbol'],'type':_0x331b1a[_0x4cd1b4(0x265)],'side':_0x331b1a[_0x4cd1b4(0x27f)],'reverse':_0x5db22e,'amount':formatResult(_0x331b1a[_0x4cd1b4(0x1d6)],0x8),'filled':formatResult(_0x331b1a[_0x4cd1b4(0x1d6)],0x8),'coinamount':formatResult(_0x4aa5e1,0x8),'price':formatResult(_0x331b1a[_0x4cd1b4(0x1f9)],0x8)});let _0xd3185;if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x27a)&&_0x5db22e==![])_0xd3185=-_0x331b1a[_0x4cd1b4(0x1d5)]*_0x331b1a[_0x4cd1b4(0x1f9)];if(_0x331b1a['side']==_0x4cd1b4(0x27a)&&_0x5db22e==!![])_0xd3185=_0x331b1a[_0x4cd1b4(0x1d5)];if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x237)&&_0x5db22e==![])_0xd3185=_0x331b1a['amount']*_0x331b1a[_0x4cd1b4(0x1f9)];if(_0x331b1a[_0x4cd1b4(0x27f)]==_0x4cd1b4(0x237)&&_0x5db22e==!![])_0xd3185=-_0x331b1a[_0x4cd1b4(0x1d5)];_0x497b64[_0x4cd1b4(0x25f)]({'date':_0x35f516,'coin':_0x4cd1b4(0x1aa),'coinamount':formatResult(_0xd3185,0x8)});});}_0x497b64[_0x3b1788(0x1cd)]((_0x14d80e,_0x577901)=>_0x14d80e[_0x3b1788(0x223)]>_0x577901['timestamp']?0x1:_0x577901[_0x3b1788(0x223)]>_0x14d80e['timestamp']?-0x1:0x0),dbLogs[_0x3b1788(0x20f)](_0x3b1788(0x198))[_0x3b1788(0x1a5)]()[_0x3b1788(0x22e)](),_0x497b64[_0x3b1788(0x19e)](_0x46cee8=>{const _0x3a2ac8=_0x3b1788;let _0x370dd2;_0x46cee8[_0x3a2ac8(0x20d)]!=_0x3a2ac8(0x1aa)&&(_0x370dd2={'time':_0x46cee8[_0x3a2ac8(0x223)],'type':'order','event':_0x3a2ac8(0x1f4)+_0x46cee8['symbol']+'\x20'+_0x46cee8[_0x3a2ac8(0x27f)]+'\x20#'+_0x46cee8[_0x3a2ac8(0x1d5)]+'\x20@'+_0x46cee8[_0x3a2ac8(0x1f9)]},dbLogs[_0x3a2ac8(0x20f)](_0x3a2ac8(0x198))[_0x3a2ac8(0x25f)](_0x370dd2)[_0x3a2ac8(0x22e)]());});const _0x1d3fff=fns[_0x3b1788(0x17f)]({'start':new Date(_0x146a3f['startdate']),'end':new Date()})[_0x3b1788(0x280)](_0x453281=>fns[_0x3b1788(0x262)](_0x453281,_0x3b1788(0x197)));let _0x42f6d8=[];_0x146a3f['portfolio'][_0x3b1788(0x19e)](_0x395392=>{const _0x976682=_0x3b1788;if(!_0x395392[_0x976682(0x258)]){_0x42f6d8[_0x395392[_0x976682(0x20d)]]=[];let _0x5f4a02=_0x395392[_0x976682(0x19c)];_0x1d3fff[_0x976682(0x19e)]((_0x3eb820,_0x506d46)=>{const _0xb39f82=_0x976682;let _0x2de160=_0x497b64[_0xb39f82(0x26d)](_0x479b85=>_0x479b85[_0xb39f82(0x20d)]==_0x395392[_0xb39f82(0x20d)]&&_0x479b85['date']==_0x3eb820);if(_0x2de160[_0xb39f82(0x268)]!=0x0){let _0x2deafd=_0x2de160['reduce']((_0x2dc0be,_0x28ecca)=>{const _0x12bfac=_0xb39f82;return _0x2dc0be+=_0x28ecca[_0x12bfac(0x231)],_0x2dc0be;},0x0);_0x5f4a02+=_0x2deafd;}_0x42f6d8[_0x395392['coin']][_0x3eb820]=_0x5f4a02;});}});const _0x14cafb=[..._0x32596d];_0x14cafb['push']({'coin':stablecoins[_0x3b1788(0x1ef)]['coin'],'symbol':stablecoins[_0x3b1788(0x1ef)]['symbol']}),_0x14cafb['push']({'coin':stablecoins[_0x3b1788(0x24f)][_0x3b1788(0x20d)],'symbol':stablecoins['usd']['symbol']});let _0xfe94c8=[];for(const _0x287a26 of _0x14cafb){_0xfe94c8[_0x287a26[_0x3b1788(0x20d)]]=await getCloses(_0x287a26[_0x3b1788(0x18f)],new Date(_0x146a3f[_0x3b1788(0x27b)]));}dbPerformance[_0x3b1788(0x20f)](_0x3b1788(0x271))[_0x3b1788(0x1a5)]()[_0x3b1788(0x22e)](),_0x1d3fff[_0x3b1788(0x19e)]((_0x4505a7,_0x3bfe09)=>{const _0x50cf71=_0x3b1788;let _0x4252cf,_0x38881d=[];_0x3bfe09==0x0?(_0x146a3f[_0x50cf71(0x1a0)]['forEach'](_0x374310=>{const _0x28a703=_0x50cf71;!_0x374310[_0x28a703(0x258)]&&_0x38881d[_0x28a703(0x25f)]({'coin':_0x374310[_0x28a703(0x20d)],'number':_0x374310[_0x28a703(0x19c)],'price':_0x374310['startprice']});}),_0x4252cf={'date':_0x4505a7,'eur':_0xfe94c8[stablecoins[_0x50cf71(0x1ef)][_0x50cf71(0x20d)]][_0x3bfe09],'usd':_0xfe94c8[stablecoins[_0x50cf71(0x24f)][_0x50cf71(0x20d)]][_0x3bfe09],'coins':_0x38881d}):(_0x146a3f[_0x50cf71(0x1a0)][_0x50cf71(0x19e)](_0x1c2c47=>{const _0x4645b5=_0x50cf71;!_0x1c2c47[_0x4645b5(0x258)]&&_0x38881d[_0x4645b5(0x25f)]({'coin':_0x1c2c47[_0x4645b5(0x20d)],'number':_0x42f6d8[_0x1c2c47['coin']][_0x4505a7],'price':_0x1c2c47['coin']=='BTC'?0x1:_0xfe94c8[_0x1c2c47[_0x4645b5(0x20d)]][_0x3bfe09]});}),_0x4252cf={'date':_0x4505a7,'eur':_0xfe94c8[stablecoins[_0x50cf71(0x1ef)][_0x50cf71(0x20d)]][_0x3bfe09],'usd':_0xfe94c8[stablecoins[_0x50cf71(0x24f)][_0x50cf71(0x20d)]][_0x3bfe09],'coins':_0x38881d}),dbPerformance[_0x50cf71(0x20f)](_0x50cf71(0x271))['push'](_0x4252cf)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x120164 of _0x497b64){_0x120164[_0x3b1788(0x20d)]!=_0x3b1788(0x1aa)&&await updateCoinResults(_0x120164);}logHistory('success','Performance\x20recreation\x20completed\x20successfully');}catch(_0x2387f1){await handleError(_0x2387f1,_0x3b1788(0x1bb));}}async function getCloses(_0x45f286,_0x2ace7a,_0x1e24b8=undefined){const _0x49b18d=_0x465c6e,_0x2049cb='1d';let _0xc31814,_0x1d65a8;const _0x111107=fns[_0x49b18d(0x214)](new Date(),_0x2ace7a)+0x1;try{const _0x5932e5=exchange[_0x49b18d(0x1d0)]()-_0x111107*0x18*0xe10*0x3e8;_0xc31814=await exchange[_0x49b18d(0x1a7)](_0x45f286,_0x2049cb,_0x5932e5,_0x1e24b8),_0x1d65a8=await exchange[_0x49b18d(0x22b)](_0x45f286);}catch(_0x47f59f){await handleError(_0x47f59f,_0x49b18d(0x1fc));}let _0x22d890=ohlcvToCloses(_0xc31814);return _0x22d890['push'](_0x1d65a8[_0x45f286][_0x49b18d(0x25b)]),_0x22d890;}function ohlcvToCloses(_0x58486c){const _0x3aaacf=_0x465c6e;let _0x216a90=[];return _0x58486c[_0x3aaacf(0x19e)](function(_0x470b1a){const _0x4e473d=_0x3aaacf;_0x216a90[_0x4e473d(0x25f)](_0x470b1a[0x4]);}),_0x216a90;}function getConfiguration(_0x52875d){const _0x2c6040=_0x465c6e;let _0x550efd=dbConfig['get'](_0x2c6040(0x193))['find']({'botID':_0x52875d})[_0x2c6040(0x1ac)]();if(_0x550efd){let _0x1fd96b=![];!_0x550efd['exchange']&&(_0x550efd={..._0x550efd,'exchange':'binance'},_0x1fd96b=!![]),!_0x550efd[_0x2c6040(0x23b)]&&(_0x550efd={..._0x550efd,'ordertype':_0x2c6040(0x186)},_0x1fd96b=!![]),!_0x550efd[_0x2c6040(0x1d4)]&&(_0x550efd={..._0x550efd,'timeout':0x14},_0x1fd96b=!![]),_0x1fd96b&&(_0x550efd={'botID':_0x550efd[_0x2c6040(0x205)],'exchange':_0x550efd[_0x2c6040(0x230)],'apiKey':_0x550efd[_0x2c6040(0x235)],'apiSecret':_0x550efd[_0x2c6040(0x260)],'botname':_0x550efd[_0x2c6040(0x1a1)],'threshold':_0x550efd[_0x2c6040(0x194)],'ordertype':_0x550efd[_0x2c6040(0x23b)],'timeout':_0x550efd[_0x2c6040(0x1d4)],'startdate':_0x550efd[_0x2c6040(0x27b)],'recreate':_0x550efd[_0x2c6040(0x1dc)],'timeshift':_0x550efd[_0x2c6040(0x1fb)],'headless':_0x550efd[_0x2c6040(0x21e)],'cooldown':_0x550efd[_0x2c6040(0x279)],'portfolio':_0x550efd[_0x2c6040(0x1a0)]},dbConfig['get'](_0x2c6040(0x193))[_0x2c6040(0x1a5)]()[_0x2c6040(0x22e)](),dbConfig[_0x2c6040(0x20f)]('bot')[_0x2c6040(0x25f)](_0x550efd)['write']());}else _0x550efd={'botID':_0x52875d,'exchange':_0x2c6040(0x1c6),'apiKey':'','apiSecret':'','botname':'Bot\x20'+_0x52875d,'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2c6040(0x1fb)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x550efd;}function emittedConfiguration(){const _0x1890ca=_0x465c6e;let _0x5b180e;return config['apiKey']==''?_0x5b180e=config:_0x5b180e={...config,'apiKey':'************','apiSecret':_0x1890ca(0x17c)},_0x5b180e;}function getSettings(){const _0x4b067e=_0x465c6e;return dbSettings[_0x4b067e(0x20f)](_0x4b067e(0x1b3))[_0x4b067e(0x1ac)]();}function _0x56e0(_0x5ade95,_0x32f6ee){const _0x48c060=_0x3778();return _0x56e0=function(_0xb2cfba,_0x4bca27){_0xb2cfba=_0xb2cfba-0x17c;let _0x3778a3=_0x48c060[_0xb2cfba];return _0x3778a3;},_0x56e0(_0x5ade95,_0x32f6ee);}function getSecure(){const _0x10bbb4=_0x465c6e;return dbSecure[_0x10bbb4(0x20f)]('secure')['value']()||{};}function updateTimeshift(_0x1208be){const _0x5a17b8=_0x465c6e;let _0x36cde2=dbConfig[_0x5a17b8(0x20f)](_0x5a17b8(0x193))[_0x5a17b8(0x232)]({'botID':botID})['value']();_0x36cde2&&dbConfig[_0x5a17b8(0x20f)](_0x5a17b8(0x193))[_0x5a17b8(0x232)]({'botID':botID})[_0x5a17b8(0x208)]({'timeshift':_0x1208be})[_0x5a17b8(0x22e)](),config['timeshift']=_0x1208be,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x53a721){const _0x4d430a=_0x465c6e;let _0x5157ee=dbConfig[_0x4d430a(0x20f)](_0x4d430a(0x193))[_0x4d430a(0x232)]({'botID':botID})['value']();_0x53a721={..._0x53a721,'apiKey':crypt['decrypt'](secure[_0x4d430a(0x249)],_0x53a721[_0x4d430a(0x235)])[_0x4d430a(0x23c)],'apiSecret':crypt[_0x4d430a(0x266)](secure[_0x4d430a(0x249)],_0x53a721[_0x4d430a(0x260)])['message']};if(_0x5157ee){if(_0x53a721[_0x4d430a(0x235)]=='************')_0x53a721[_0x4d430a(0x235)]=config[_0x4d430a(0x235)];if(_0x53a721[_0x4d430a(0x260)]==_0x4d430a(0x17c))_0x53a721[_0x4d430a(0x260)]=config['apiSecret'];dbConfig[_0x4d430a(0x20f)](_0x4d430a(0x193))[_0x4d430a(0x232)]({'botID':botID})['assign'](_0x53a721)[_0x4d430a(0x22e)]();}else dbConfig[_0x4d430a(0x20f)](_0x4d430a(0x193))[_0x4d430a(0x25f)](_0x53a721)['write'](),process['send']({'status':'enabled','live':_0x4d430a(0x199)});config={..._0x53a721};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x4d430a(0x1cc)]({'botname':_0x53a721[_0x4d430a(0x1a1)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x47fbe7){const _0x13c4bb=_0x465c6e,_0x5bcaf5={...config,'headless':_0x47fbe7['headless']};let _0x7a9fa8=dbConfig[_0x13c4bb(0x20f)](_0x13c4bb(0x193))['find']({'botID':botID})[_0x13c4bb(0x1ac)]();_0x7a9fa8&&dbConfig[_0x13c4bb(0x20f)]('bot')[_0x13c4bb(0x232)]({'botID':botID})['assign'](_0x5bcaf5)[_0x13c4bb(0x22e)](),config={..._0x5bcaf5},proxyEmit(_0x13c4bb(0x1a2),emittedConfiguration());}function noslash(_0x30b2b2){const _0x3d2e1a=_0x465c6e;return _0x30b2b2[_0x3d2e1a(0x1e6)]('/','');}function updateNumberCoins(_0x5b3a02){const _0x527924=_0x465c6e;_0x5b3a02['eventType']&&_0x5b3a02[_0x527924(0x1f2)]==_0x527924(0x1f8)&&_0x5b3a02[_0x527924(0x283)][_0x527924(0x19e)](_0x8b837a=>{const _0x54091b=_0x527924;let _0x1596b4=currentCoins[_0x54091b(0x232)](_0x4abf36=>_0x4abf36[_0x54091b(0x20d)]==_0x8b837a[_0x54091b(0x24b)]);if(_0x1596b4)_0x1596b4[_0x54091b(0x1df)]=Number(_0x8b837a[_0x54091b(0x238)]);}),_0x5b3a02[_0x527924(0x1f2)]&&_0x5b3a02['eventType']==_0x527924(0x220)&&(_0x5b3a02[_0x527924(0x274)]==_0x527924(0x1e4)&&_0x5b3a02[_0x527924(0x226)]==_0x527924(0x21f)&&lastOrders[_0x527924(0x19e)](_0x3f3422=>{const _0x2bd5c9=_0x527924;if(_0x3f3422[_0x2bd5c9(0x19d)]==_0x5b3a02[_0x2bd5c9(0x19d)]){if(_0x3f3422[_0x2bd5c9(0x1d1)])_0x3f3422[_0x2bd5c9(0x1d6)]=_0x5b3a02[_0x2bd5c9(0x23f)]*_0x3f3422['price'];else _0x3f3422[_0x2bd5c9(0x1d6)]=_0x5b3a02[_0x2bd5c9(0x23f)];}}));}async function getCoins(_0x1adce2=!![]){const _0x629f28=_0x465c6e;let _0x1417f5,_0x165ade=[],_0x46fb57=[],_0xe0006e=[];try{_0x1417f5=await exchange[_0x629f28(0x219)](),mybalances=_0x1417f5[_0x629f28(0x1f3)];if(!_0x1adce2)for(const [_0x4c8d64,_0xe4b85c]of Object[_0x629f28(0x284)](mybalances)){_0xe0006e['push'](_0x4c8d64);}else config['portfolio'][_0x629f28(0x19e)](_0x20b322=>{const _0x232b42=_0x629f28;if(!_0x20b322[_0x232b42(0x258)])_0xe0006e[_0x232b42(0x25f)](_0x20b322[_0x232b42(0x20d)]);});for(const [_0xd251d6,_0x3b3862]of Object['entries'](mybalances)){if(_0xe0006e[_0x629f28(0x1c5)](_0xd251d6)){if((_0x3b3862[_0x629f28(0x21c)]()!=0x0||config[_0x629f28(0x1a0)]['find'](_0xdaa7a7=>_0xdaa7a7[_0x629f28(0x20d)]==_0xd251d6))&&(allSymbols[_0x629f28(0x1c5)](_0xd251d6+'/BTC')||_0xd251d6==_0x629f28(0x1aa)))_0x46fb57['push']({'coin':_0xd251d6,'symbol':_0xd251d6+_0x629f28(0x196),'reverse':![],'number':_0x3b3862}),_0xd251d6!=_0x629f28(0x1aa)&&_0x165ade[_0x629f28(0x25f)](_0xd251d6+_0x629f28(0x196));else(_0x3b3862[_0x629f28(0x21c)]()!=0x0||config[_0x629f28(0x1a0)][_0x629f28(0x232)](_0x250ce4=>_0x250ce4[_0x629f28(0x20d)]==_0xd251d6))&&allSymbols[_0x629f28(0x1c5)](_0x629f28(0x1e7)+_0xd251d6)&&(_0x46fb57[_0x629f28(0x25f)]({'coin':_0xd251d6,'symbol':_0x629f28(0x1e7)+_0xd251d6,'reverse':!![],'number':_0x3b3862}),_0xd251d6!='BTC'&&_0x165ade[_0x629f28(0x25f)](_0x629f28(0x1e7)+_0xd251d6));}}}catch(_0x26e590){if(!_0x1adce2){if(_0x26e590['toString']()['includes']('API-key\x20format\x20invalid'))return logHistory(_0x629f28(0x1c4),_0x629f28(0x183)),![];else{if(_0x26e590[_0x629f28(0x21c)]()[_0x629f28(0x1c5)]('AuthenticationError'))return logHistory(_0x629f28(0x1c4),_0x629f28(0x1e1)),![];else{if(_0x26e590[_0x629f28(0x21c)]()[_0x629f28(0x1c5)](_0x629f28(0x18c)))return logHistory(_0x629f28(0x1c4),_0x629f28(0x21a)),![];else await handleError(_0x26e590,'getCoins()');}}}else await handleError(_0x26e590,_0x629f28(0x270));}return _0x46fb57;}async function getPortfolio(_0x128c4e){const _0x503aee=_0x465c6e;let _0x4ee371=[],_0x5e9947=[],_0x33f79e,_0x280d6b=[],_0x169505,_0x82d864;_0x128c4e[_0x503aee(0x235)]===_0x503aee(0x17c)||_0x128c4e['apiSecret']===_0x503aee(0x17c)?(_0x169505=config['apiKey'],_0x82d864=config[_0x503aee(0x260)]):(_0x169505=_0x128c4e[_0x503aee(0x235)],_0x82d864=_0x128c4e[_0x503aee(0x260)]);await initExchange(_0x169505,_0x82d864);let _0x5253e1=await loadSymbols();if(_0x5253e1){_0x280d6b=await getCoins(![]);if(_0x280d6b===![])proxyEmit(_0x503aee(0x1a0),![]);else{_0x280d6b[_0x503aee(0x19e)](_0x354763=>{const _0x4cee1b=_0x503aee;_0x4ee371[_0x4cee1b(0x25f)](_0x354763[_0x4cee1b(0x18f)]);});try{_0x5e9947=await exchange['fetchTickers'](_0x4ee371);}catch(_0x359e53){await handleError(_0x359e53,_0x503aee(0x182));}_0x280d6b[_0x503aee(0x19e)](_0x53e618=>{const _0x5525fc=_0x503aee;_0x53e618[_0x5525fc(0x20d)]!='BTC'?_0x33f79e=_0x53e618[_0x5525fc(0x1d1)]?0x1/_0x5e9947[_0x53e618[_0x5525fc(0x18f)]][_0x5525fc(0x25b)]:_0x5e9947[_0x53e618[_0x5525fc(0x18f)]]['last']:_0x33f79e=0x1,_0x53e618[_0x5525fc(0x1f9)]=formatResult(_0x33f79e,0x8);}),proxyEmit(_0x503aee(0x1a0),_0x280d6b);}}else proxyEmit(_0x503aee(0x1a0),![]);}function checkMinimums(_0x5cfe7b){const _0x214f2a=_0x465c6e;let _0x540638=!![];const _0x3d33c9=!_0x5cfe7b[_0x214f2a(0x1d1)]?markets[_0x5cfe7b[_0x214f2a(0x18f)]][_0x214f2a(0x1cf)]['amount'][_0x214f2a(0x236)]:markets[_0x5cfe7b[_0x214f2a(0x18f)]][_0x214f2a(0x1cf)][_0x214f2a(0x250)][_0x214f2a(0x236)],_0x385e97=!_0x5cfe7b[_0x214f2a(0x1d1)]?markets[_0x5cfe7b[_0x214f2a(0x18f)]]['limits']['cost'][_0x214f2a(0x236)]:markets[_0x5cfe7b[_0x214f2a(0x18f)]][_0x214f2a(0x1cf)]['amount'][_0x214f2a(0x236)];if(Math['abs'](_0x5cfe7b[_0x214f2a(0x20e)])<_0x3d33c9)_0x540638=![];if(Math[_0x214f2a(0x1a4)](_0x5cfe7b[_0x214f2a(0x20e)])*_0x5cfe7b[_0x214f2a(0x25b)]<_0x385e97)_0x540638=![];return _0x540638;}async function getBalances(){const _0x7b87fc=_0x465c6e;let _0x28240f=0x0,_0x152c03;const _0x190127=config['threshold'];currentCoins['forEach'](_0x369a79=>{const _0x1b054a=_0x56e0;if(_0x369a79[_0x1b054a(0x20d)]!=_0x1b054a(0x1aa)){let _0x4b52d0=global[_0x1b054a(0x20a)][noslash(_0x369a79['symbol'])];_0x152c03=_0x369a79[_0x1b054a(0x1d1)]?0x1/_0x4b52d0:_0x4b52d0;}else _0x152c03=0x1;let _0x136a14=_0x369a79[_0x1b054a(0x1df)]*_0x152c03;_0x28240f+=_0x136a14,_0x369a79[_0x1b054a(0x25b)]=formatResult(Number(_0x152c03),0x8),_0x369a79[_0x1b054a(0x1ac)]=_0x136a14;}),currentCoins[_0x7b87fc(0x19e)](_0x3bc3b8=>{const _0x1f1320=_0x7b87fc;let _0x9f014c=config[_0x1f1320(0x1a0)][_0x1f1320(0x232)](_0x7b0ed6=>_0x7b0ed6['coin']==_0x3bc3b8['coin']),_0x456116=Number(_0x9f014c[_0x1f1320(0x239)]),_0x412e38=_0x3bc3b8[_0x1f1320(0x1ac)]/_0x28240f*0x64,_0x5b327f=_0x456116*_0x28240f/0x64/_0x3bc3b8['last']-_0x3bc3b8[_0x1f1320(0x1df)];_0x3bc3b8[_0x1f1320(0x239)]=formatResult(_0x412e38,0x3),_0x3bc3b8[_0x1f1320(0x18a)]=formatResult(_0x456116,0x3),_0x3bc3b8[_0x1f1320(0x20e)]=formatResult(_0x5b327f,0x8),_0x3bc3b8['side']='',_0x3bc3b8['valid']='';if(_0x3bc3b8[_0x1f1320(0x20d)]!=_0x1f1320(0x1aa)){if(_0x3bc3b8[_0x1f1320(0x239)]>_0x456116)_0x3bc3b8[_0x1f1320(0x27f)]='sell',_0x3bc3b8[_0x1f1320(0x1a6)]=checkMinimums(_0x3bc3b8);else _0x3bc3b8['distribution']<_0x456116&&(_0x3bc3b8[_0x1f1320(0x27f)]=_0x1f1320(0x27a),_0x3bc3b8[_0x1f1320(0x1a6)]=checkMinimums(_0x3bc3b8));}_0x3bc3b8[_0x1f1320(0x233)]=_0x3bc3b8[_0x1f1320(0x239)]/_0x3bc3b8['target']-0x1;}),currentCoins[_0x7b87fc(0x1cd)]((_0x2daa04,_0x56fd92)=>_0x2daa04[_0x7b87fc(0x233)]<_0x56fd92[_0x7b87fc(0x233)]?0x1:_0x56fd92[_0x7b87fc(0x233)]<_0x2daa04[_0x7b87fc(0x233)]?-0x1:0x0);const _0x57310f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x57310f[_0x7b87fc(0x1ef)],'usd':_0x57310f[_0x7b87fc(0x24f)],'portfolio':JSON[_0x7b87fc(0x244)](currentCoins),'threshold':_0x190127},proxyEmit(_0x7b87fc(0x283),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x190127});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x53f6cd=_0x465c6e;if(!lastBalances)return;let _0x13684a=await getStartingBalances(![]),_0x15e587=[],_0x27c27e=[],_0x12abc5;JSON[_0x53f6cd(0x217)](lastBalances['portfolio'])[_0x53f6cd(0x19e)](_0x2090bf=>{const _0x3fe732=_0x53f6cd;let _0xfbb508={'coin':_0x2090bf['coin'],'number':_0x2090bf[_0x3fe732(0x1df)],'price':_0x2090bf['last']};_0x15e587['push'](_0xfbb508);if(!_0x13684a['coins']||!_0x13684a[_0x3fe732(0x1cb)][_0x3fe732(0x232)](_0x44c4be=>_0x44c4be[_0x3fe732(0x20d)]==_0x2090bf[_0x3fe732(0x20d)]&&_0x44c4be[_0x3fe732(0x1df)]!=0x0))_0x27c27e[_0x3fe732(0x25f)](_0xfbb508);});const _0x3c87eb=await getFiat();_0x12abc5={'date':lastBalances[_0x53f6cd(0x227)][_0x53f6cd(0x1e8)]('\x20')[0x0],'eur':_0x3c87eb[_0x53f6cd(0x1ef)],'usd':_0x3c87eb[_0x53f6cd(0x24f)],'coins':_0x15e587};let _0x2d0697=dbPerformance[_0x53f6cd(0x20f)](_0x53f6cd(0x271))[_0x53f6cd(0x232)]({'date':_0x12abc5[_0x53f6cd(0x1c7)]})[_0x53f6cd(0x1ac)]();_0x2d0697?dbPerformance[_0x53f6cd(0x20f)](_0x53f6cd(0x271))[_0x53f6cd(0x232)]({'date':_0x12abc5[_0x53f6cd(0x1c7)]})['assign'](_0x12abc5)['write']():dbPerformance[_0x53f6cd(0x20f)](_0x53f6cd(0x271))[_0x53f6cd(0x25f)](_0x12abc5)[_0x53f6cd(0x22e)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x1cd000=_0x465c6e;if(dbPerformance[_0x1cd000(0x1ca)](_0x1cd000(0x271))[_0x1cd000(0x1ac)]()){let _0x50aee9=dbPerformance['get'](_0x1cd000(0x271))[_0x1cd000(0x1da)]('date')[_0x1cd000(0x1ac)]();proxyEmit(_0x1cd000(0x1eb),_0x50aee9),lastPerformanceEmitted=getDate();}else proxyEmit(_0x1cd000(0x1eb),[]);}function _0x3778(){const _0x16980c=['filter','page','initclient','getCoins()','data','wss://stream.binance.com:9443','001','orderType','limit','limit-low','getDate','sells','cooldown','buy','startdate','cancelOrder()','BTC/BUSD','399206ZoQXey','side','map','fee','-results.json','balances','entries','shift','order','************','AuthenticationError','287523oMuVTm','eachDayOfInterval','toFixed','slice','getPortfolio()','Binance\x20API\x20key\x20is\x20invalid','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','differenceInSeconds','market','Limit\x20(low-margin)','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','userData','target','ccxt','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','symbol','lowdb/adapters/FileSync','Crypt','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bot','threshold','Pauses:\x20','/BTC','yyyy/MM/dd','logs','running','binanceus','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','startnumber','orderId','forEach','getMonth','portfolio','botname','configuration','\x20minutes\x20-\x20balancing\x20resumed','abs','remove','valid','fetchOHLCV','exit','DDoSProtection','BTC','bb-secure.json','value','storeHeadless','\x20order:\x20','\x20|\x20Error\x20details:\x20','event-history','8YszTmd','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','settings','getPortfolio','BNB','startprice','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','initws()','getSeconds','wss://stream.binance.us:9443','recreateHistory()','subscribeSpotKline','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','getTime','Executed\x20','symbols','search','bid','BTC/EUR','error','includes','binance','date','getFullYear','indexOf','has','coins','send','sort','storeConfiguration','limits','milliseconds','reverse','placeOrder()','InvalidNonce','timeout','amount','filled','wsMarket','loadSymbols()','Now\x20\x20\x20:\x20','sortBy','RequestTimeout','recreate','parseISO','InsufficientFunds','number','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','splice','./config/','LIMIT','event','replace','BTC/','split','170HAIlAH','constructor','performance','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','padStart','eur','getMinutes','realized','eventType','total','Order:\x20','366831wRymNH','kline','argv','outboundAccountPosition','price','675095UcoOqa','timeshift','getCloses()','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','existsSync','fees','\x20>\x20','DAI/','cancelOrder','OrderNotFound','breakeven','botID','isArray','Order\x20filled:\x20','assign','loadMarkets','ticker','success','BTC/USDT','coin','trade','get','toLowerCase','bb-settings.json','getStartingBalances','103770yYMgqi','differenceInCalendarDays','sha256','getHours','parse','round','fetchBalance','Binance\x20API\x20secret\x20is\x20invalid','Order(s)\x20filled\x20-\x20balancing\x20resumed','toString','API-key\x20format\x20invalid','headless','FILLED','executionReport','Unfilled\x20order(s)\x20canceled\x20after\x20',')\x20|\x20Error\x20details:\x20','timestamp','ExchangeNotAvailable','BTCUSDT','orderStatus','time','WebSockets(','getFiat()','mkdirSync','fetchTickers','\x20-\x20','starting-balances','write','\x20hour','exchange','coinamount','find','delta','log','apiKey','min','sell','availableBalance','distribution','apply','ordertype','message','Order(s)\x20validated\x20-\x20balancing\x20resumed','bot-','accumulatedQuantity','defaults','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','./version.json','limit-high','stringify','-config.json','Limit\x20(high-margin)','coin-loading-progress',',\x20must\x20be\x20a\x203\x20digit\x20number','privateKey','date-fns','asset','args','-events.json','emitHistory','usd','cost','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','createOrder','hybrid-crypto-js','function','12ZIJHeX','closeWs','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','excluded','Order\x20amount\x20is\x20invalid:\x20','BNBBTC','last','(((.+)+)+)+$','Delta\x20:\x20','BTCEUR','push','apiSecret','datetime','format','lowdb','wsKey','type','decrypt',':\x20Bot\x20','length','\x20orders\x20in\x20less\x20than\x20','788544KdOOVx','Market','962857XvQFXH'];_0x3778=function(){return _0x16980c;};return _0x3778();}async function getStartingBalances(_0x154d64=!![]){const _0x333dc5=_0x465c6e;let _0x312973=dbPerformance[_0x333dc5(0x20f)]('data')[_0x333dc5(0x232)]({'date':config[_0x333dc5(0x27b)]})[_0x333dc5(0x1ac)]();config[_0x333dc5(0x235)]!=''&&!_0x312973&&(await setStartDatePerformance(config),_0x312973=dbPerformance[_0x333dc5(0x20f)]('data')[_0x333dc5(0x232)]({'date':config['startdate']})[_0x333dc5(0x1ac)]());if(config['apiKey']==''||!_0x312973)return{};let _0x85d1c4=0x0,_0xfc2c9e=0x0,_0x22f058=0x0,_0x26e274=[],_0xefc6be=0x0;config[_0x333dc5(0x1a0)]['forEach'](_0x2f6514=>{const _0x25214a=_0x333dc5;!_0x2f6514[_0x25214a(0x258)]&&(_0x26e274[_0xefc6be]={'coin':_0x2f6514[_0x25214a(0x20d)],'symbol':_0x2f6514[_0x25214a(0x18f)],'number':_0x2f6514[_0x25214a(0x19c)],'price':_0x2f6514['startprice']},_0x85d1c4+=_0x2f6514[_0x25214a(0x1b6)]*_0x2f6514[_0x25214a(0x19c)],_0xfc2c9e+=_0x2f6514['startprice']*_0x2f6514[_0x25214a(0x19c)]*_0x312973[_0x25214a(0x1ef)],_0x22f058+=_0x2f6514[_0x25214a(0x1b6)]*_0x2f6514[_0x25214a(0x19c)]*_0x312973[_0x25214a(0x24f)],_0xefc6be++);});let _0x20d827={'btc':_0x85d1c4,'eur':_0xfc2c9e,'usd':_0x22f058,'coins':_0x26e274};if(_0x154d64)proxyEmit(_0x333dc5(0x22d),_0x20d827);return _0x20d827;}function headlessMode(_0x2da887){const _0x24ff89=_0x465c6e;let _0x31771c=_0x2da887[_0x24ff89(0x1a0)],_0x3c5661=_0x2da887[_0x24ff89(0x194)],_0xa18e51=[];for(let _0xda1886 of _0x31771c){if(_0xda1886['coin']!=_0x24ff89(0x1aa)){if(_0xda1886[_0x24ff89(0x239)]/_0xda1886['target']-0x1>=_0x3c5661/0x64){if(_0xda1886[_0x24ff89(0x1a6)])_0xa18e51['push'](_0xda1886);}else{if(_0xda1886[_0x24ff89(0x239)]/_0xda1886[_0x24ff89(0x18a)]-0x1<=-_0x3c5661/0x64){if(_0xda1886['valid'])_0xa18e51['push'](_0xda1886);}}}}_0xa18e51[_0x24ff89(0x268)]>0x0&&placeOrder(_0xa18e51);}function symbolToCoin(_0x20a2d8){const _0x9e7d12=_0x465c6e;let _0xf1ab7a;if(_0x20a2d8[_0x9e7d12(0x1c5)](_0x9e7d12(0x196)))_0xf1ab7a=_0x20a2d8[_0x9e7d12(0x1e6)](_0x9e7d12(0x196),'');if(_0x20a2d8[_0x9e7d12(0x1c5)](_0x9e7d12(0x1e7)))_0xf1ab7a=_0x20a2d8[_0x9e7d12(0x1e6)]('BTC/','');return _0xf1ab7a;}async function validateOrders(_0x2f63b7=0x0){const _0x4fc177=_0x465c6e;let _0x8e2c42=[],_0x397926=config['ordertype']==_0x4fc177(0x186)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x4d5c80=>{const _0x27fe47=_0x4fc177;let _0x451eb4=previousCoins['find'](_0x39b918=>_0x39b918[_0x27fe47(0x20d)]==symbolToCoin(_0x4d5c80[_0x27fe47(0x18f)])),_0x26c7ce=currentCoins['find'](_0x22c47c=>_0x22c47c[_0x27fe47(0x20d)]==symbolToCoin(_0x4d5c80[_0x27fe47(0x18f)])),_0x50616b,_0x135f06;_0x4d5c80[_0x27fe47(0x27f)]=='buy'&&!_0x4d5c80[_0x27fe47(0x1d1)]||_0x4d5c80[_0x27fe47(0x27f)]==_0x27fe47(0x237)&&_0x4d5c80[_0x27fe47(0x1d1)]?(_0x50616b=_0x451eb4[_0x27fe47(0x1df)]+0.9*_0x4d5c80[_0x27fe47(0x1d6)],_0x135f06=_0x451eb4[_0x27fe47(0x1df)]+1.1*_0x4d5c80[_0x27fe47(0x1d6)]):(_0x50616b=_0x451eb4[_0x27fe47(0x1df)]-1.1*_0x4d5c80['filled'],_0x135f06=_0x451eb4['number']-0.9*_0x4d5c80[_0x27fe47(0x1d6)]);const _0x831b6d=_0x4d5c80[_0x27fe47(0x1d6)]!=0x0&&_0x26c7ce['number']>=_0x50616b&&_0x26c7ce['number']<=_0x135f06;_0x8e2c42[_0x27fe47(0x25f)](_0x831b6d);if(_0x831b6d&&config[_0x27fe47(0x23b)]!=_0x27fe47(0x186)){if(_0x4d5c80[_0x27fe47(0x1d1)])logHistory(_0x27fe47(0x286),_0x27fe47(0x207)+_0x4d5c80[_0x27fe47(0x18f)]+'\x20'+_0x4d5c80[_0x27fe47(0x27f)]+'\x20#'+formatResult(_0x4d5c80[_0x27fe47(0x1d6)]/_0x4d5c80['price'],0x8)+'\x20@'+formatResult(_0x4d5c80[_0x27fe47(0x1f9)],0x8));else logHistory('order',_0x27fe47(0x207)+_0x4d5c80[_0x27fe47(0x18f)]+'\x20'+_0x4d5c80[_0x27fe47(0x27f)]+'\x20#'+formatResult(_0x4d5c80[_0x27fe47(0x1d6)],0x8)+'\x20@'+formatResult(_0x4d5c80[_0x27fe47(0x1f9)],0x8));}}),_0x8e2c42['forEach']((_0x54f5bb,_0x5e1775)=>{const _0x580bd3=_0x4fc177;if(_0x54f5bb)lastOrders[_0x580bd3(0x1e2)](_0x5e1775,0x1);});if(_0x2f63b7<_0x397926&&_0x8e2c42[_0x4fc177(0x1c5)](![])){if(_0x2f63b7==0x0){config[_0x4fc177(0x23b)]=='market'?logHistory('error',_0x4fc177(0x184)):logHistory(_0x4fc177(0x1c4),_0x4fc177(0x1e0));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2f63b7);},0xa*0x3e8);}else{(_0x2f63b7==0x1||_0x2f63b7==Math['round'](_0x397926/0x2)||_0x2f63b7==_0x397926-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2f63b7);},validateOrderInterval);}}else{lockOrders=![];if(_0x2f63b7>0x0&&!_0x8e2c42[_0x4fc177(0x1c5)](![]))config[_0x4fc177(0x23b)]=='market'?logHistory(_0x4fc177(0x20b),_0x4fc177(0x23d)):logHistory('success',_0x4fc177(0x21b));else _0x2f63b7>0x0&&_0x8e2c42[_0x4fc177(0x1c5)](![])&&(config[_0x4fc177(0x23b)]==_0x4fc177(0x186)?logHistory(_0x4fc177(0x20b),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4fc177(0x218)](_0x397926*validateOrderInterval/0xea60)+_0x4fc177(0x1a3)):(lastOrders[_0x4fc177(0x19e)](async _0x2f3957=>{const _0x394414=_0x4fc177;try{const _0x1aeede=await exchange[_0x394414(0x202)](_0x2f3957[_0x394414(0x19d)],_0x2f3957[_0x394414(0x18f)]);}catch(_0x5b3154){if(_0x5b3154['toString']()[_0x394414(0x1c5)](_0x394414(0x203))){}else await handleError(_0x5b3154,_0x394414(0x27c));}}),logHistory(_0x4fc177(0x20b),_0x4fc177(0x221)+Math[_0x4fc177(0x218)](_0x397926*validateOrderInterval/0xea60)+_0x4fc177(0x1a3))));}}async function resetCoinResults(){const _0x46baf6=_0x465c6e;dbCoinResults[_0x46baf6(0x20f)]('coins')[_0x46baf6(0x1a5)]()[_0x46baf6(0x22e)]();let _0x4fe925=await getStartingBalances(![]);_0x4fe925[_0x46baf6(0x1cb)]['forEach'](_0xff6f3b=>{const _0x4d82ba=_0x46baf6,_0x46b24e=_0xff6f3b[_0x4d82ba(0x18f)]['includes']('BTC/');if(_0xff6f3b['coin']!='BTC'){let _0x239e2f={'coin':_0xff6f3b[_0x4d82ba(0x20d)],'number':_0xff6f3b[_0x4d82ba(0x1df)],'breakeven':_0xff6f3b['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d82ba(0x20f)](_0x4d82ba(0x1cb))[_0x4d82ba(0x25f)](_0x239e2f)[_0x4d82ba(0x22e)]();}});}async function updateCoinResults(_0x32f7b7){const _0x56602a=_0x465c6e;let _0x3a681f,_0x544ffe,_0x3bb665,_0x28a505,_0x34e3ce,_0x5df2b4,_0x5d64d6=dbCoinResults[_0x56602a(0x20f)](_0x56602a(0x1cb))[_0x56602a(0x232)]({'coin':_0x32f7b7[_0x56602a(0x20d)]})[_0x56602a(0x1ac)]();if(!_0x5d64d6)return;if(_0x32f7b7[_0x56602a(0x281)]&&_0x32f7b7['fee']['currency']=='BTC')_0x3a681f=_0x32f7b7[_0x56602a(0x281)]['cost'];else{if(_0x32f7b7[_0x56602a(0x281)]&&_0x32f7b7['fee']['currency']==_0x56602a(0x1b5))_0x3a681f=_0x32f7b7[_0x56602a(0x281)]['cost']*global[_0x56602a(0x20a)][_0x56602a(0x25a)];else _0x3a681f=0.001*_0x32f7b7['filled'];}const _0x2e3b49=_0x32f7b7[_0x56602a(0x18f)][_0x56602a(0x1c5)]('BTC/');_0x2e3b49&&(_0x5df2b4={'coin':_0x32f7b7['coin'],'symbol':_0x32f7b7[_0x56602a(0x18f)],'filled':_0x32f7b7[_0x56602a(0x1d6)]*_0x32f7b7['price'],'side':_0x32f7b7[_0x56602a(0x27f)]==_0x56602a(0x237)?'buy':_0x56602a(0x237),'price':0x1/_0x32f7b7[_0x56602a(0x1f9)]},_0x32f7b7={..._0x5df2b4});_0x32f7b7[_0x56602a(0x27f)]==_0x56602a(0x27a)?_0x3bb665=(_0x5d64d6[_0x56602a(0x204)]*_0x5d64d6[_0x56602a(0x1df)]+_0x32f7b7[_0x56602a(0x1f9)]*_0x32f7b7[_0x56602a(0x1d6)])/(_0x5d64d6['number']+_0x32f7b7[_0x56602a(0x1d6)]):_0x3bb665=(_0x5d64d6[_0x56602a(0x204)]*_0x5d64d6['number']-_0x32f7b7[_0x56602a(0x1f9)]*_0x32f7b7[_0x56602a(0x1d6)])/(_0x5d64d6[_0x56602a(0x1df)]-_0x32f7b7[_0x56602a(0x1d6)]);_0x32f7b7[_0x56602a(0x27f)]==_0x56602a(0x27a)?_0x28a505=_0x5d64d6[_0x56602a(0x1f1)]:_0x28a505=_0x5d64d6[_0x56602a(0x1f1)]+(_0x32f7b7[_0x56602a(0x1f9)]-_0x5d64d6['breakeven'])*_0x32f7b7[_0x56602a(0x1d6)];_0x544ffe=_0x32f7b7['side']=='sell'?_0x5d64d6['number']-_0x32f7b7[_0x56602a(0x1d6)]:_0x5d64d6[_0x56602a(0x1df)]+_0x32f7b7['filled'],_0x34e3ce=(_0x32f7b7[_0x56602a(0x1f9)]-_0x3bb665)*_0x544ffe;let _0x47bfcd={'coin':_0x32f7b7[_0x56602a(0x20d)],'number':_0x544ffe,'breakeven':formatResult(_0x3bb665,0x8),'realized':formatResult(_0x28a505,0x8),'unrealized':formatResult(_0x34e3ce,0x8),'fees':formatResult(_0x5d64d6[_0x56602a(0x1ff)]+_0x3a681f,0x8),'sells':_0x32f7b7[_0x56602a(0x27f)]=='sell'?_0x5d64d6[_0x56602a(0x278)]+0x1:_0x5d64d6[_0x56602a(0x278)],'buys':_0x32f7b7['side']==_0x56602a(0x27a)?_0x5d64d6['buys']+0x1:_0x5d64d6['buys']};dbCoinResults[_0x56602a(0x20f)](_0x56602a(0x1cb))[_0x56602a(0x232)]({'coin':_0x32f7b7[_0x56602a(0x20d)]})[_0x56602a(0x208)](_0x47bfcd)[_0x56602a(0x22e)]();}async function placeOrder(_0x4f3465){const _0x5a1870=_0x465c6e,_0x47d043=config[_0x5a1870(0x23b)]==_0x5a1870(0x186)?_0x5a1870(0x186):_0x5a1870(0x275);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5a1870(0x217)](JSON[_0x5a1870(0x244)](currentCoins));for(const _0x498ea3 of _0x4f3465){let _0x1565b2,_0x4570f0,_0x55a6e8,_0x590ed9,_0x1a601a,_0x51c60b=_0x498ea3[_0x5a1870(0x18f)];try{const _0x55ec6c=await exchange[_0x5a1870(0x22b)](_0x51c60b),_0x3208cb=_0x55ec6c[_0x51c60b];_0x1565b2=_0x3208cb[_0x5a1870(0x25b)],_0x4570f0=_0x3208cb[_0x5a1870(0x1c2)],_0x55a6e8=_0x3208cb['ask'];_0x498ea3['reverse']?(_0x590ed9=_0x498ea3['side']==_0x5a1870(0x27a)?_0x5a1870(0x237):'buy',_0x1a601a=Math[_0x5a1870(0x1a4)](_0x498ea3[_0x5a1870(0x20e)])/_0x1565b2):(_0x590ed9=_0x498ea3['side'],_0x1a601a=Math[_0x5a1870(0x1a4)](_0x498ea3[_0x5a1870(0x20e)]));_0x47d043==_0x5a1870(0x275)&&(config[_0x5a1870(0x23b)]==_0x5a1870(0x243)&&(_0x1565b2=_0x590ed9==_0x5a1870(0x27a)?_0x4570f0:_0x55a6e8),config[_0x5a1870(0x23b)]==_0x5a1870(0x276)&&(_0x1565b2=_0x590ed9==_0x5a1870(0x27a)?_0x55a6e8:_0x4570f0));_0x1a601a=formatResult(_0x1a601a,0x8),_0x1565b2=formatResult(_0x1565b2,0x8);const _0x29a3d3=await exchange[_0x5a1870(0x252)](_0x51c60b,_0x47d043,_0x590ed9,_0x1a601a,_0x1565b2);lastOrders[_0x5a1870(0x25f)]({'orderId':_0x29a3d3['id'],'symbol':_0x51c60b,'side':_0x590ed9,'reverse':_0x498ea3[_0x5a1870(0x1d1)],'amount':_0x498ea3[_0x5a1870(0x1d1)]?_0x29a3d3[_0x5a1870(0x1d5)]*_0x29a3d3['price']:_0x29a3d3[_0x5a1870(0x1d5)],'filled':_0x498ea3[_0x5a1870(0x1d1)]?_0x29a3d3[_0x5a1870(0x1d6)]*_0x29a3d3['price']:_0x29a3d3['filled'],'price':_0x29a3d3[_0x5a1870(0x1f9)]});const _0x5015dc=_0x47d043==_0x5a1870(0x186)?_0x5a1870(0x26b):config[_0x5a1870(0x23b)]==_0x5a1870(0x243)?_0x5a1870(0x246):_0x5a1870(0x187);if(_0x47d043=='market')logHistory('order',_0x5015dc+'\x20order:\x20'+_0x51c60b+'\x20'+_0x590ed9+'\x20#'+formatResult(_0x29a3d3['filled'],0x8)+'\x20@'+formatResult(_0x29a3d3[_0x5a1870(0x1f9)],0x8));else logHistory(_0x5a1870(0x286),_0x5015dc+_0x5a1870(0x1ae)+_0x51c60b+'\x20'+_0x590ed9+'\x20#'+formatResult(_0x29a3d3['amount'],0x8)+'\x20@'+formatResult(_0x29a3d3[_0x5a1870(0x1f9)],0x8));_0x29a3d3[_0x5a1870(0x20d)]=_0x498ea3['coin'],await updateCoinResults(_0x29a3d3);if(config[_0x5a1870(0x279)]!=0x0){let _0x2b1970=null;if(cooldownTracker[_0x5a1870(0x268)]==config[_0x5a1870(0x279)]-0x1)_0x2b1970=cooldownTracker[_0x5a1870(0x285)]();const _0x9e1c4a=getTimeStamp();cooldownTracker[_0x5a1870(0x25f)](_0x9e1c4a);if(_0x2b1970){const _0x239f6f=fns[_0x5a1870(0x185)](new Date(_0x9e1c4a),new Date(_0x2b1970));_0x239f6f<cooldownInterval&&(logHistory(_0x5a1870(0x1c4),_0x5a1870(0x1bf)+config[_0x5a1870(0x279)]+_0x5a1870(0x269)+cooldownInterval/0x3c+_0x5a1870(0x18e)+cooldownPeriod/(0xe10*0x3e8)+_0x5a1870(0x22f)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4e8e3a){if(_0x4e8e3a[_0x5a1870(0x21c)]()[_0x5a1870(0x1c5)]('MIN_NOTIONAL'))logHistory('error',_0x5a1870(0x1ed)+_0x51c60b);else{if(_0x4e8e3a[_0x5a1870(0x21c)]()[_0x5a1870(0x1c5)]('Invalid\x20quantity'))logHistory(_0x5a1870(0x1c4),_0x5a1870(0x259)+_0x51c60b);else await handleError(_0x4e8e3a,_0x5a1870(0x1d2));}}}if(lastOrders[_0x5a1870(0x268)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5a1870(0x21e)]&&(config[_0x5a1870(0x23b)]==_0x5a1870(0x186)?logHistory(_0x5a1870(0x1c4),_0x5a1870(0x251)):logHistory('error',_0x5a1870(0x257)));else coolingDown&&(!config[_0x5a1870(0x21e)]&&logHistory(_0x5a1870(0x1c4),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x4b8f50,_0x35fbb4,_0x1eadcc=''){const _0x2058b5=_0x465c6e;let _0x301b22={'time':getTimeStamp(),'type':_0x4b8f50,'event':_0x35fbb4};dbLogs[_0x2058b5(0x20f)]('logs')[_0x2058b5(0x25f)](_0x301b22)[_0x2058b5(0x22e)]();if(_0x1eadcc=='')_0x1eadcc=_0x35fbb4;proxyEmit(_0x2058b5(0x1e5),{'log':_0x301b22,'summary':_0x1eadcc}),process['send']({'telegram':_0x301b22}),logging(''+_0x301b22[_0x2058b5(0x1e5)]);}function emitHistory(_0x2c2c19={}){const _0x11306e=_0x465c6e;Object['keys'](_0x2c2c19)[_0x11306e(0x268)]==0x0&&(_0x2c2c19={'type':[_0x11306e(0x286),_0x11306e(0x1e5)],'event':'','page':0x1});if(_0x2c2c19['type']['includes']('event'))_0x2c2c19[_0x11306e(0x265)][_0x11306e(0x1e2)](_0x2c2c19[_0x11306e(0x265)][_0x11306e(0x1c9)](_0x11306e(0x1e5)),0x1,_0x11306e(0x1c4),_0x11306e(0x20b));if(dbLogs[_0x11306e(0x1ca)]('logs')['value']()){let _0x4f2880=dbLogs[_0x11306e(0x20f)](_0x11306e(0x198))[_0x11306e(0x26d)](_0xd81d5a=>{const _0x352510=_0x11306e;if(_0x2c2c19[_0x352510(0x265)][_0x352510(0x268)]==0x0)return![];else return _0x2c2c19[_0x352510(0x265)][_0x352510(0x1c5)](_0xd81d5a[_0x352510(0x265)]);})['filter'](_0x27077e=>{const _0x1b657b=_0x11306e;if(_0x2c2c19[_0x1b657b(0x1e5)]=='')return!![];else return _0x27077e['event'][_0x1b657b(0x210)]()[_0x1b657b(0x1c5)](_0x2c2c19[_0x1b657b(0x1e5)][_0x1b657b(0x210)]());})[_0x11306e(0x1da)]('time'),_0x22b587=_0x4f2880[_0x11306e(0x1ac)]()[_0x11306e(0x268)];_0x4f2880=_0x4f2880['reverse']()[_0x11306e(0x181)]((_0x2c2c19[_0x11306e(0x26e)]-0x1)*logPageSize,_0x2c2c19[_0x11306e(0x26e)]*logPageSize-0x1)[_0x11306e(0x1d1)]()[_0x11306e(0x1ac)](),proxyEmit(_0x11306e(0x1b0),{'logs':_0x4f2880,'total':_0x22b587});}else proxyEmit(_0x11306e(0x1b0),{'logs':[],'total':0x0});}async function pauseBot(_0x139b4e){const _0x394c15=_0x465c6e,_0x30e0e5=new Date()[_0x394c15(0x1be)]();console[_0x394c15(0x234)](_0x394c15(0x1d9),_0x30e0e5),console[_0x394c15(0x234)](_0x394c15(0x25d),_0x30e0e5-lastBotPause),console[_0x394c15(0x234)](_0x394c15(0x195),consecutivePauses);if(!lastBotPause)lastBotPause=new Date()[_0x394c15(0x1be)](),consecutivePauses=0x1;else{if(_0x30e0e5-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x394c15(0x1a8)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x394c15(0x1be)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x139b4e),botPaused=![],reset();}}async function handleError(_0x40f021,_0x5fbe51,_0x441796=''){const _0x1c57e1=_0x465c6e;if(_0x40f021[_0x1c57e1(0x21c)]()['includes'](_0x1c57e1(0x1a9)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x1bd)),await pauseBot(pauseBotInterval);else{if(_0x40f021[_0x1c57e1(0x21c)]()[_0x1c57e1(0x1c5)](_0x1c57e1(0x224)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x188)),await pauseBot(pauseBotInterval);else{if(_0x40f021['toString']()[_0x1c57e1(0x1c5)](_0x1c57e1(0x1db)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x241)),await pauseBot(pauseBotInterval);else{if(_0x40f021['toString']()[_0x1c57e1(0x1c5)](_0x1c57e1(0x21d)))logHistory('error',_0x5fbe51+_0x1c57e1(0x1b7)),logHistory(_0x1c57e1(0x1c4),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x1c57e1(0x1a8)](0x4d);else{if(_0x40f021['toString']()[_0x1c57e1(0x1c5)](_0x1c57e1(0x17d)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x1c57e1(0x1c4),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x1c57e1(0x1a8)](0x4d);else{if(_0x40f021['toString']()['includes'](_0x1c57e1(0x18c)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x1c57e1(0x192)),process['exit'](0x4d);else{if(_0x40f021['toString']()[_0x1c57e1(0x1c5)](_0x1c57e1(0x1ec)))logHistory('error',_0x5fbe51+_0x1c57e1(0x1fd)),logHistory(_0x1c57e1(0x1c4),_0x1c57e1(0x192)),process[_0x1c57e1(0x1a8)](0x4d);else{if(_0x40f021['toString']()[_0x1c57e1(0x1c5)](_0x1c57e1(0x1d3)))logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x1fd)),logHistory(_0x1c57e1(0x1c4),_0x1c57e1(0x192)),process[_0x1c57e1(0x1a8)](0x4d);else _0x40f021[_0x1c57e1(0x21c)]()[_0x1c57e1(0x1c5)](_0x1c57e1(0x1de))?logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x19b)):(logHistory(_0x1c57e1(0x1c4),_0x5fbe51+_0x1c57e1(0x1b2)),logging(_0x5fbe51+_0x1c57e1(0x1af),_0x40f021),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x2ea073,_0x453ded){const _0x48561f=_0x465c6e;return parseFloat(_0x2ea073[_0x48561f(0x180)](_0x453ded));}function logging(_0xc1ec39,_0x2eba90=''){const _0x46f3eb=_0x465c6e;console[_0x46f3eb(0x234)](getTimeStamp()+_0x46f3eb(0x267)+botID+_0x46f3eb(0x200)+_0xc1ec39,_0x2eba90);}function getServerTime(){const _0x48adfa=_0x465c6e,_0x50a7d2=new Date();return _0x50a7d2[_0x48adfa(0x1c8)]()+'/'+(_0x50a7d2[_0x48adfa(0x19f)]()+0x1)[_0x48adfa(0x21c)]()['padStart'](0x2,'0')+'/'+_0x50a7d2[_0x48adfa(0x277)]()[_0x48adfa(0x21c)]()[_0x48adfa(0x1ee)](0x2,'0')+'\x20'+_0x50a7d2[_0x48adfa(0x216)]()['toString']()[_0x48adfa(0x1ee)](0x2,'0')+':'+_0x50a7d2[_0x48adfa(0x1f0)]()[_0x48adfa(0x21c)]()[_0x48adfa(0x1ee)](0x2,'0')+':'+_0x50a7d2[_0x48adfa(0x1b9)]()[_0x48adfa(0x21c)]()[_0x48adfa(0x1ee)](0x2,'0');}function getTimeStamp(){const _0x12e49c=_0x465c6e,_0x5606ac=shiftedTime();return _0x5606ac[_0x12e49c(0x1c8)]()+'/'+(_0x5606ac[_0x12e49c(0x19f)]()+0x1)[_0x12e49c(0x21c)]()[_0x12e49c(0x1ee)](0x2,'0')+'/'+_0x5606ac[_0x12e49c(0x277)]()['toString']()[_0x12e49c(0x1ee)](0x2,'0')+'\x20'+_0x5606ac[_0x12e49c(0x216)]()[_0x12e49c(0x21c)]()[_0x12e49c(0x1ee)](0x2,'0')+':'+_0x5606ac[_0x12e49c(0x1f0)]()[_0x12e49c(0x21c)]()[_0x12e49c(0x1ee)](0x2,'0')+':'+_0x5606ac['getSeconds']()['toString']()[_0x12e49c(0x1ee)](0x2,'0');}function getDate(){const _0x5a0963=_0x465c6e,_0x5e1ca4=shiftedTime();return _0x5e1ca4[_0x5a0963(0x1c8)]()+'/'+(_0x5e1ca4['getMonth']()+0x1)[_0x5a0963(0x21c)]()[_0x5a0963(0x1ee)](0x2,'0')+'/'+_0x5e1ca4[_0x5a0963(0x277)]()[_0x5a0963(0x21c)]()['padStart'](0x2,'0');}function getHour(){const _0x5025bb=_0x465c6e,_0x34c455=shiftedTime();return _0x34c455[_0x5025bb(0x216)]()[_0x5025bb(0x21c)]()[_0x5025bb(0x1ee)](0x2,'0');}function sleep(_0x14d6fb){return new Promise(_0x23233e=>setTimeout(_0x23233e,_0x14d6fb));}function shiftedTime(){const _0x58f538=_0x465c6e,_0x3e9b51=new Date();let _0xae1fa=_0x3e9b51;if(config&&config[_0x58f538(0x1fb)]!==0x0)_0xae1fa=fns['add'](_0x3e9b51,{'hours':config[_0x58f538(0x1fb)]});return _0xae1fa;}