function _0x2c8d(_0x156664,_0x429a69){const _0x5858a3=_0x318e();return _0x2c8d=function(_0x5a7a7a,_0x17b0b9){_0x5a7a7a=_0x5a7a7a-0x133;let _0x318ee7=_0x5858a3[_0x5a7a7a];return _0x318ee7;},_0x2c8d(_0x156664,_0x429a69);}const _0x1f537d=_0x2c8d;(function(_0x19e07c,_0x8f1e61){const _0x593619=_0x2c8d,_0x262f98=_0x19e07c();while(!![]){try{const _0x48cc30=-parseInt(_0x593619(0x184))/0x1+-parseInt(_0x593619(0x2a4))/0x2*(-parseInt(_0x593619(0x1d8))/0x3)+parseInt(_0x593619(0x2c5))/0x4+parseInt(_0x593619(0x17a))/0x5*(-parseInt(_0x593619(0x18c))/0x6)+-parseInt(_0x593619(0x1d6))/0x7+parseInt(_0x593619(0x209))/0x8+-parseInt(_0x593619(0x2c7))/0x9*(parseInt(_0x593619(0x19c))/0xa);if(_0x48cc30===_0x8f1e61)break;else _0x262f98['push'](_0x262f98['shift']());}catch(_0x1ec675){_0x262f98['push'](_0x262f98['shift']());}}}(_0x318e,0x21bd5));const _0x17b0b9=function(){let _0x103aff=!![];return function(_0x40ad29,_0x5e6fb9){const _0xa9831a=_0x103aff?function(){const _0x1635c5=_0x2c8d;if(_0x5e6fb9){const _0x37244a=_0x5e6fb9[_0x1635c5(0x1dc)](_0x40ad29,arguments);return _0x5e6fb9=null,_0x37244a;}}:function(){};return _0x103aff=![],_0xa9831a;};}(),_0x5a7a7a=_0x17b0b9(this,function(){const _0x7e8c38=_0x2c8d;return _0x5a7a7a[_0x7e8c38(0x1d1)]()[_0x7e8c38(0x2b6)](_0x7e8c38(0x2a0))[_0x7e8c38(0x1d1)]()['constructor'](_0x5a7a7a)[_0x7e8c38(0x2b6)](_0x7e8c38(0x2a0));});_0x5a7a7a();'use strict';const ccxt=require('ccxt'),low=require(_0x1f537d(0x136)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1f537d(0x1ef)),Crypt=require(_0x1f537d(0x1c5))[_0x1f537d(0x177)],util=require(_0x1f537d(0x154)),argv=require(_0x1f537d(0x19e))(process[_0x1f537d(0x1e3)]['slice'](0x2))[_0x1f537d(0x1e3)],path=require(_0x1f537d(0x133));let exchange;global[_0x1f537d(0x28a)]={},global[_0x1f537d(0x15f)]={};const usdBasecoins=[_0x1f537d(0x1c2),'BUSD',_0x1f537d(0x222),_0x1f537d(0x1de),_0x1f537d(0x1d4),_0x1f537d(0x179)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1f537d(0x2d2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1f537d(0x1f8)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1f537d(0x249)+pauseBotInterval/0xea60+_0x1f537d(0x1ad),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;function _0x318e(){const _0x4f0d99=['./config/','format','Invalid\x20symbol:\x20','openOrders','yyyy-MM-dd\x27T\x27HH:mm:ss','get','currency','2.3.5','orderId','restart','stringify','Headless:\x20','breakeven','getPortfolio(0)','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','debug','getMonth','string','cancelOrder','\x20|\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','date','\x20|\x20exchange:\x20','settings','\x20-\x20pausing\x20bot\x20for\x20','logs','/backup/','max','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','concat','RSA-OAEP','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','substring','-events.json','no\x20open\x20orders','InvalidNonce','Initializing\x20coin\x20results','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','final','configuration-stored','Order\x20filled:\x20','Executed\x20','findIndex','headless','UNLOCKING','stopExchange()','distribution','reverse','event-history','total','</pre>','Exception\x20thrown\x20in\x20','botname','apiPassword','last','net-basecoin','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Transaction\x20detection\x20blocked','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','leftTxt','Error:\x20Invalid\x20argument\x20','parseISO','\x20network\x20error','pro','padStart','fees','ORDERS.UNLOCKED','\x20metrics:</b>\x20\x0a\x0a','\x20:\x20','performance','shift','getMinutes','Cex','amount','-config.json','001','configuration','join','LOCKED','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','enabled','getSeconds','\x20not\x20responding','success','NetworkError','canceled','none','number','ticker','exec','-performance.json','mkdirSync','RequestTimeout','getPortfolio(2)','offset','fetchTickers','initclient','Net\x20effect','ordertype','starting-balances','rightTxt','find','sells','Fee\x20discount\x20refund\x20detected:\x20','limit-high','version','uncaughtException','cloneDeep','realized','%\x20(','(((.+)+)+)+$','timeshift','/EUR','timestamp','56090BdYgQv','BNB/','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20-\x20bot\x20not\x20started','fromCodePoint','warning','bb-secure.json','coin','basecoinvalue','cancel','getDate','value','datetime','-------------------------------\x0a','slice','KC-API-TIMESTAMP\x20Invalid','yyyy/MM/dd','sortBy','search','defaults','initial','bot-','net-fiat','isEqual','padEnd','changes','1\x20-\x20FILLED\x20known\x20order:\x20','No\x20more\x20open\x20orders\x20-\x20','time','storeHeadless','loadSymbols()','<pre>','\x20API\x20key\x20is\x20invalid','1090224tGaBpx','sha256','2030895NdNMTH','indexOf','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','market','ExchangeNotAvailable','\x20closed\x20the\x20connection','set','trade','startdate','recreate','closed','freeze','\x20exchange','forEach','replace','path','fetchBalance','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','lowdb','amountToPrecision','Limit\x20(low-margin)','getHours','Resetting\x20coin\x20results:\x20','ongoing','PAXG','decrypt','Limit\x20(high-margin)','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','existsSync','Loading\x20completed','filter','balancing\x20resumed','ask','toUpperCase','portfolio','change24h','getCoins()','placeOrder()','cancelLoading','sendPortfolioTelegram','ID:\x20','target','Cryptocom','Waited\x20','coins','has','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','-results.json','util','getCoinNumber()','watchOrders','OnMaintenance','\x20minutes\x20-\x20',':\x20timer\x20>','entries','page','bot','floor','emojisell','change','/USD','autoliquidity','Error\x20details:','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','red_yellow_blue','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','starting-balance-','\x20>\x20','\x20order:\x20','keys','excluded','min','BTC','startnumber','OrderNotFound','apiKey','added','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','BNB','status','bid','Order(s)\x20not\x20validated\x20after\x20','Crypt','round','USDP','233795lTdPrK','secure','sell','orderstatus','random','Portfolio\x20change\x20detected:\x20','\x20|\x20Custom\x20ID:\x20','<b>Bot\x20','open','\x20orders\x20in\x20less\x20than\x20','52303RTzUhE','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2.6.0','./logs/','Invalid\x20API\x20key\x20or\x20secret\x20entered','2.5.0','Kucoin','./version.json','12oUZKAd','createOrder','fetchTicker','price','Bot\x20','args','basecoin','emojibuy','buy','running','percentage','API-key\x20format\x20invalid','assign','netoffset','Error\x20while\x20deleting\x20files:\x20','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','10MmlKfm','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','yargs/yargs',':\x20Bot\x20','storeFiat','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','highest','exchange','function','Huobipro','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','length','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20exchange\x20error','side','spot','send','\x20minutes','getAllOrders()','data','Saving\x20configuration','balancing\x20resumes\x20when\x20cooldown\x20ends','1\x20-\x20Handle\x20open\x20orders','unlinkSync','delta','\x20has\x20a\x2024h\x20drop\x20of\x20','cooldown','exchange\x20not\x20reloaded','request-time','type','Exchange','full','placeOrder','watchOrders()','createWriteStream','.json','fetchClosedOrders','cancelOrders()','USD','password','average','hybrid-crypto-js','***','showname','loadMarkets','resetHistory','deleteHistoryAlerts','getPortfolio(1)','loading-canceled','getPortfolio','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','abs','write','toString','message','2\x20-\x20Orders\x20unlocked','USDC','valid','502817jKMGfj','apiSecret','9lGYzCf','recent20','getFullYear','getOpenOrders()','apply','balances','USDT','fiat','ExchangeError','storeConfiguration','threshold','argv','\x20/\x20','InvalidOrder','Mexc','privateKey','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','getTime','liquidity','test','Pausing\x20for\x20','includes','log','date-fns','fetchOpenOrders','ETH','writeFile','Binance','************','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','0\x20-\x20EXECUTION:\x20','exchange\x20reloaded','UNLOCKED','exchanges','limits','toLowerCase','initTickers()','watchTrades','usd','order','toFixed','bots','split','\x20rejected\x20your\x20API\x20request','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','close','error','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','AuthenticationError','1798504ysnvis','emitHistory','remainingSymbols','Transaction\x20detection\x20unblocked','startprice','differenceInSeconds','toggleBotMode','milliseconds','onepagemode','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Resetting\x20bot\x20history','cost','eur','sort','symbol','\x20portfolio:</b>\x20\x0a\x0a','1\x20-\x20Validate\x20orders:\x20','fee','Order\x20amount\x20is\x20invalid:\x20','fetchTickers()','timeout','limit','filled','Bitget','Executing\x20exchange\x20reload','TUSD','parse','splice','progress','Huobi','PermissionDenied','\x20>\x20[DEBUG]\x20','event','watchTransactions()','buys','kill','removed','Unknown\x20error\x20occured','EUR','push'];_0x318e=function(){return _0x4f0d99;};return _0x318e();}let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1f537d(0x18b))[_0x1f537d(0x29b)],botID=process['argv'][0x2]||_0x1f537d(0x27d),pattern=/^[0-9]{3}$/;!pattern[_0x1f537d(0x1eb)](botID)&&(console['log'](_0x1f537d(0x26e)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x1f537d(0x231),logspath=userID?_0x1f537d(0x187)+userID+'/':_0x1f537d(0x187),loggerfile=fs[_0x1f537d(0x1be)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x1f537d(0x140)](configpath)&&fs[_0x1f537d(0x28d)](configpath);!fs['existsSync'](logspath)&&fs[_0x1f537d(0x28d)](logspath);const configfile=configpath+_0x1f537d(0x2b9)+botID+_0x1f537d(0x27c),logfile=configpath+_0x1f537d(0x2b9)+botID+_0x1f537d(0x253),performancefile=configpath+_0x1f537d(0x2b9)+botID+_0x1f537d(0x28c),coinresultsfile=configpath+'bot-'+botID+_0x1f537d(0x153),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x1f537d(0x2aa),configbackuppath=configpath+_0x1f537d(0x24b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1f537d(0x2b7)]({'logs':[],'version':serverversion})[_0x1f537d(0x1d0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x1f537d(0x1d0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x1f537d(0x1d0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1f537d(0x2c6),'rsaStandard':_0x1f537d(0x24f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5f6e4e=>{const _0x1332ff=_0x1f537d;console[_0x1332ff(0x1ee)](_0x5f6e4e);},'simple':_0x5deecb=>{const _0x3c16cc=_0x1f537d;console[_0x3c16cc(0x1ee)](_0x5deecb),loggerfile[_0x3c16cc(0x1d0)](util['format'](_0x5deecb)+'\x0a');},'full':async(_0x325132,_0x31df13='')=>{const _0x21340c=_0x1f537d;let _0x33f8ad;if(config['showname'])_0x33f8ad=getTimeStamp()+':\x20'+config[_0x21340c(0x266)]+_0x21340c(0x168)+_0x325132;else _0x33f8ad=getTimeStamp()+_0x21340c(0x19f)+botID+_0x21340c(0x168)+_0x325132;console[_0x21340c(0x1ee)](_0x33f8ad),loggerfile[_0x21340c(0x1d0)](util[_0x21340c(0x232)](_0x33f8ad)+'\x0a'),_0x31df13&&(console[_0x21340c(0x1ee)](_0x31df13),loggerfile['write'](util['format'](_0x31df13)+'\x0a'));},'debug':async(_0x7f0524,_0x38bcab='')=>{const _0x3881a6=_0x1f537d;let _0x6b88e6;if(config[_0x3881a6(0x1c7)])_0x6b88e6=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x7f0524;else _0x6b88e6=getTimeStamp()+_0x3881a6(0x19f)+botID+_0x3881a6(0x228)+_0x7f0524;if(debugging)console[_0x3881a6(0x1ee)](_0x6b88e6);loggerfile[_0x3881a6(0x1d0)](util[_0x3881a6(0x232)](_0x6b88e6)+'\x0a');if(_0x38bcab){if(debugging)console[_0x3881a6(0x1ee)](_0x38bcab);loggerfile['write'](util[_0x3881a6(0x232)](_0x38bcab)+'\x0a');}}};process['on'](_0x1f537d(0x29c),function(_0x333852){const _0x2733b0=_0x1f537d;handleError(_0x333852,_0x2733b0(0x29c));});settings[_0x1f537d(0x2a1)]!=config[_0x1f537d(0x2a1)]&&updateTimeshift(settings[_0x1f537d(0x2a1)]);settings[_0x1f537d(0x211)]!=config[_0x1f537d(0x211)]&&updateOnepagemode(settings[_0x1f537d(0x211)]);process['send']({'started':_0x1f537d(0x195)},_0x360842=>{}),initializeProcessListeners();function proxyEmit(_0x23635b,_0x65d092=null){const _0x3af744=_0x1f537d;process[_0x3af744(0x1ac)]({'function':_0x23635b,'args':_0x65d092},_0x39bd76=>{});}function initializeProcessListeners(){const _0x22682a=_0x1f537d;process['on'](_0x22682a(0x1d2),_0x38d5a4=>{const _0x1a8a1a=_0x22682a;switch(Object[_0x1a8a1a(0x16a)](_0x38d5a4)[0x0]){case _0x1a8a1a(0x2a1):_0x38d5a4['timeshift']!=undefined&&(settings[_0x1a8a1a(0x2a1)]=_0x38d5a4['timeshift'],updateTimeshift(settings[_0x1a8a1a(0x2a1)]));break;case _0x1a8a1a(0x211):_0x38d5a4['onepagemode']!=undefined&&(settings['onepagemode']=_0x38d5a4[_0x1a8a1a(0x211)],updateOnepagemode(settings['onepagemode']));break;case _0x1a8a1a(0x201):_0x38d5a4['bots']!=undefined&&(bots=JSON[_0x1a8a1a(0x223)](_0x38d5a4[_0x1a8a1a(0x201)]),proxyEmit('bots',bots));break;case'function':switch(_0x38d5a4[_0x1a8a1a(0x1a4)]){case _0x1a8a1a(0x292):initclient();break;case _0x1a8a1a(0x20f):toggleBotMode();break;case _0x1a8a1a(0x20a):emitHistory(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x1ca):deleteHistoryAlerts(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x1cd):getPortfolio(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x1e1):storeConfiguration(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x2c1):storeHeadless(_0x38d5a4['args']);break;case _0x1a8a1a(0x1a0):storeFiat(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x1c9):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x1a8a1a(0x1bc):placeOrder(_0x38d5a4[_0x1a8a1a(0x191)]);break;case _0x1a8a1a(0x14a):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x1a8a1a(0x14b):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x50ef94=![]){const _0x2ecd7c=_0x1f537d;logger[_0x2ecd7c(0x240)]('Reset\x20|\x20'+(_0x50ef94?_0x2ecd7c(0x1f7):_0x2ecd7c(0x1b7))+_0x2ecd7c(0x247)+config[_0x2ecd7c(0x1a3)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x50ef94)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x2ecd7c(0x170)]!=_0x2ecd7c(0x1c6)){loadingProgress=0x0;if(_0x50ef94){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x581aeb){handleErrorNoStop(_0x581aeb,_0x2ecd7c(0x2c2));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4d6575=await getCoins();[currentCoins,currentCoinsAll]=_0x4d6575,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2ecd7c(0x240)](_0x2ecd7c(0x141)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2ecd7c(0x1a7)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x46ce55=_0x1f537d;exchangeStopped=!![];try{await exchange[_0x46ce55(0x205)]();}catch(_0x5d3674){await handleError(_0x5d3674,_0x46ce55(0x25f));}}async function reloadExchange(){const _0x413b9a=_0x1f537d;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x413b9a(0x240)](_0x413b9a(0x221)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x481089=config['exchange'],_0x490d75=config['apiKey'],_0x149412=config[_0x1f537d(0x1d7)],_0x26cce9=config[_0x1f537d(0x267)]){const _0x25aafc=_0x1f537d;exchange&&await stopExchange();!supportedExchanges()[_0x25aafc(0x1ed)](_0x481089)&&(logHistory(_0x25aafc(0x206),_0x25aafc(0x1e8)+_0x481089+_0x25aafc(0x2d3)),killBot());const _0x156e52=ccxt[_0x25aafc(0x271)][_0x481089[_0x25aafc(0x1fb)]()];exchange=new _0x156e52({'apiKey':_0x490d75,'secret':_0x149412,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x25aafc(0x1ab)}});if(_0x26cce9)exchange[_0x25aafc(0x1c3)]=_0x26cce9;}function setStableCoins(){const _0x1bb06c=_0x1f537d;let _0x506cb6=config['basecoin']==_0x1bb06c(0x1f1)?_0x1bb06c(0x1f1):config['basecoin']=='PAXG'?_0x1bb06c(0x13c):_0x1bb06c(0x16d),_0x2293dd=!allSymbols[_0x1bb06c(0x1ed)](_0x506cb6+_0x1bb06c(0x160))?_0x1bb06c(0x1de):_0x1bb06c(0x1c2),_0x4f7b89=!allSymbols[_0x1bb06c(0x1ed)](_0x506cb6+_0x1bb06c(0x2a2))?_0x2293dd:_0x1bb06c(0x22f);stablecoins={'eur':{'coin':''+_0x506cb6+_0x4f7b89,'symbol':_0x506cb6+'/'+_0x4f7b89},'usd':{'coin':''+_0x506cb6+_0x2293dd,'symbol':_0x506cb6+'/'+_0x2293dd}};}async function initwsCcxt(){const _0x4399ac=_0x1f537d;initCycle++;const _0x5d9a92=initCycle;let _0x562d53=[];config[_0x4399ac(0x146)][_0x4399ac(0x2d4)](_0x16c490=>{const _0x246f9a=_0x4399ac;if(!_0x16c490[_0x246f9a(0x16b)]&&_0x16c490[_0x246f9a(0x2ab)]!=config['basecoin'])_0x562d53[_0x246f9a(0x230)](_0x16c490['symbol']);});if(!_0x562d53['includes'](stablecoins[_0x4399ac(0x215)][_0x4399ac(0x217)]))_0x562d53[_0x4399ac(0x230)](stablecoins['eur'][_0x4399ac(0x217)]);if(!_0x562d53[_0x4399ac(0x1ed)](stablecoins[_0x4399ac(0x1fe)][_0x4399ac(0x217)]))_0x562d53[_0x4399ac(0x230)](stablecoins[_0x4399ac(0x1fe)][_0x4399ac(0x217)]);if(config[_0x4399ac(0x1a3)]['startsWith']('Binance')&&config[_0x4399ac(0x192)]!=_0x4399ac(0x13c)){if(!_0x562d53[_0x4399ac(0x1ed)](_0x4399ac(0x2a5)+config[_0x4399ac(0x192)]))_0x562d53[_0x4399ac(0x230)](_0x4399ac(0x2a5)+config['basecoin']);}loadCoins(_0x562d53),_0x562d53=validateSymbols(_0x562d53);const _0x1e2d05=async _0x264137=>{const _0x1ab0d0=_0x4399ac;let _0x3f4e4b;try{const _0x26c6c3=await getTickers(_0x264137);Object['entries'](_0x26c6c3)[_0x1ab0d0(0x2d4)](_0x5cc055=>{const _0x599ba1=_0x1ab0d0;_0x3f4e4b=_0x5cc055[0x1][_0x599ba1(0x217)],global[_0x599ba1(0x28a)][noslash(_0x3f4e4b)]=_0x5cc055[0x1]['last'],global[_0x599ba1(0x15f)][_0x3f4e4b]=_0x5cc055[0x1]['percentage'];});}catch(_0x41056e){await handleError(_0x41056e,_0x1ab0d0(0x1fc),_0x3f4e4b);}},_0x4a6cf2=async _0x4a7fb6=>{const _0x16bfbb=_0x4399ac;while(initCycle==_0x5d9a92){if(!botPaused)try{const _0x16fec9=await exchange['watchTrades'](_0x4a7fb6);global[_0x16bfbb(0x28a)][noslash(_0x16fec9[0x0]['symbol'])]=_0x16fec9[0x0]['price'],await sleep(0x3e8);}catch(_0x43b695){if(!exchangeStopped)await handleError(_0x43b695,'watchTrades()',_0x4a7fb6);}else await sleep(0x64);}},_0xd2ba44=async _0x3ce1b1=>{const _0x57d2fb=_0x4399ac;while(initCycle==_0x5d9a92){if(!botPaused){let _0x9be348;try{await sleep(0x3c*0x3e8);const _0x138341=await getTickers(_0x3ce1b1);Object[_0x57d2fb(0x15a)](_0x138341)[_0x57d2fb(0x2d4)](_0x2db2ea=>{const _0x797705=_0x57d2fb;_0x9be348=_0x2db2ea[0x1][_0x797705(0x217)],global[_0x797705(0x15f)][_0x9be348]=_0x2db2ea[0x1][_0x797705(0x196)];});}catch(_0x206b61){if(!exchangeStopped)await handleError(_0x206b61,_0x57d2fb(0x21c),_0x9be348);}}else await sleep(0x64);}},_0x12c162=async _0xf7ef2c=>{const _0x56e9ea=_0x4399ac;while(initCycle==_0x5d9a92){if(!botPaused)try{const _0x592cb4=await exchange[_0x56e9ea(0x156)](_0xf7ef2c);initCycle==_0x5d9a92&&_0x592cb4['forEach'](_0x568ea7=>{updateNumberCoinsCcxt(_0x568ea7);});}catch(_0x50df68){if(!exchangeStopped)await handleError(_0x50df68,_0x56e9ea(0x1bd));}else await sleep(0x64);}};_0x1e2d05(_0x562d53),_0xd2ba44(_0x562d53),_0x562d53[_0x4399ac(0x2d4)](_0x49c390=>{_0x4a6cf2(_0x49c390),_0x12c162(_0x49c390);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x444093){const _0xa6b6ac=_0x1f537d;let _0x5927ab={};try{if(config[_0xa6b6ac(0x1a3)]!=_0xa6b6ac(0x14e))_0x5927ab=await exchange[_0xa6b6ac(0x291)](_0x444093);else for(const _0x1c6fd1 of _0x444093){const _0x211eab=await exchange[_0xa6b6ac(0x18e)](_0x1c6fd1);_0x5927ab[_0x1c6fd1]=_0x211eab;}return _0x5927ab;}catch(_0x323145){throw _0x323145;}}async function watchTransactions(){const _0xaf60b1=_0x1f537d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x143c63=await getCoins(),[_0xbc3cab,_0x526a99]=_0x143c63;let _0x53c873=[];currentCoins[_0xaf60b1(0x2d4)](_0x3b6e38=>{const _0x308c23=_0xaf60b1,_0xc56cb4=_0xbc3cab[_0x308c23(0x297)](_0x3160f4=>_0x3160f4['coin']==_0x3b6e38[_0x308c23(0x2ab)]);if(_0xc56cb4){if(_0x3b6e38['number']!=_0xc56cb4[_0x308c23(0x289)]){let _0x1c612c;if(_0x3b6e38['coin']!=config[_0x308c23(0x192)]){const _0x45b09c=global[_0x308c23(0x28a)][noslash(_0x3b6e38[_0x308c23(0x217)])];_0x1c612c=_0x3b6e38['reverse']?0x1/_0x45b09c:_0x45b09c;}else _0x1c612c=0x1;_0x53c873[_0x308c23(0x230)]({'coin':_0x3b6e38[_0x308c23(0x2ab)],'symbol':_0x3b6e38[_0x308c23(0x217)],'price':_0x1c612c,'number':Number(formatResult(_0xc56cb4[_0x308c23(0x289)]-_0x3b6e38[_0x308c23(0x289)],0x8)),'basecoinvalue':_0x1c612c*(_0xc56cb4[_0x308c23(0x289)]-_0x3b6e38[_0x308c23(0x289)])});}}});if(_0x53c873[_0xaf60b1(0x1a7)]==0x1&&!blockTransactionDetection){if(config[_0xaf60b1(0x161)]){logger[_0xaf60b1(0x240)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x53c873[0x0][_0xaf60b1(0x2ac)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0xaf60b1(0x1a2)]);if(lastFees[_0xaf60b1(0x1a2)]==0x0||Math['abs'](_0x53c873[0x0][_0xaf60b1(0x2ac)])>lastFees[_0xaf60b1(0x1a2)]){delete _0x53c873[0x0]['symbol'],delete _0x53c873[0x0]['basecoinvalue'];let _0x4fe6cb=[],_0x2925bb=[...config[_0xaf60b1(0x1ea)]]||[],_0x1329c2=config[_0xaf60b1(0x1ea)];_0x2925bb['sort']((_0x1cf967,_0x1b9d87)=>_0x1cf967[_0xaf60b1(0x246)]>_0x1b9d87[_0xaf60b1(0x246)]?-0x1:_0x1b9d87[_0xaf60b1(0x246)]>_0x1cf967['date']?0x1:0x0);const _0x2cc000=getDate();if(_0x2925bb[0x0]){const _0x2c9985=fns[_0xaf60b1(0x223)](_0x2925bb[0x0][_0xaf60b1(0x246)],_0xaf60b1(0x2b4),new Date()),_0x590228=fns[_0xaf60b1(0x223)](_0x2cc000,'yyyy/MM/dd',new Date());if(fns[_0xaf60b1(0x2bb)](_0x2c9985,_0x590228)){_0x4fe6cb=_0x2925bb[0x0][_0xaf60b1(0x2bd)];const _0x149393=_0x4fe6cb[_0xaf60b1(0x297)](_0x4eac2d=>_0x4eac2d[_0xaf60b1(0x2ab)]==_0x53c873[0x0]['coin']);_0x149393?(_0x149393[_0xaf60b1(0x289)]+=_0x53c873[0x0][_0xaf60b1(0x289)],_0x149393[_0xaf60b1(0x289)]==0x0&&(_0x4fe6cb=_0x4fe6cb[_0xaf60b1(0x142)](_0x331b3d=>{return _0x331b3d['coin']!=_0x53c873[0x0]['coin'];}))):_0x4fe6cb[_0xaf60b1(0x230)](_0x53c873[0x0]);const _0x27c1a4=_0x1329c2[_0xaf60b1(0x297)](_0x33cc5e=>_0x33cc5e[_0xaf60b1(0x246)]==_0x2cc000);_0x27c1a4[_0xaf60b1(0x2bd)]=_0x4fe6cb;}else _0x1329c2[_0xaf60b1(0x230)]({'date':_0x2cc000,'changes':[_0x53c873[0x0]]});}const _0x1b221b=_0x1329c2[_0xaf60b1(0x297)](_0x2960c0=>_0x2960c0[_0xaf60b1(0x246)]==_0x2cc000);if(_0x1b221b){let _0x4da70a=!![];_0x1b221b[_0xaf60b1(0x2bd)][_0xaf60b1(0x2d4)](_0x1e049c=>{const _0x4fc7b8=_0xaf60b1;if(_0x1e049c[_0x4fc7b8(0x289)]!=0x0)_0x4da70a=![];}),_0x4da70a&&(_0x1329c2=_0x1329c2['filter'](_0x3480a1=>{const _0x5b4b46=_0xaf60b1;return _0x3480a1[_0x5b4b46(0x246)]!=_0x2cc000;}));}let _0x171c37=dbConfig[_0xaf60b1(0x236)]('bot')[_0xaf60b1(0x297)]({'botID':botID})[_0xaf60b1(0x2af)]();_0x171c37&&(dbConfig[_0xaf60b1(0x236)](_0xaf60b1(0x15c))['find']({'botID':botID})['assign']({'liquidity':_0x1329c2})[_0xaf60b1(0x1d0)](),config['liquidity']=_0x1329c2),logHistory('success',_0xaf60b1(0x17f)+Math[_0xaf60b1(0x1cf)](_0x53c873[0x0]['number'])+'\x20'+_0x53c873[0x0]['coin']+'\x20'+(_0x53c873[0x0]['number']>0x0?_0xaf60b1(0x171):_0xaf60b1(0x22d))+_0xaf60b1(0x185)),proxyEmit(_0xaf60b1(0x27e),emittedConfiguration());}else logger[_0xaf60b1(0x240)](_0xaf60b1(0x299)+Math[_0xaf60b1(0x1cf)](_0x53c873[0x0][_0xaf60b1(0x289)])+'\x20'+_0x53c873[0x0][_0xaf60b1(0x2ab)]+'\x20'+(_0x53c873[0x0][_0xaf60b1(0x289)]>0x0?_0xaf60b1(0x171):_0xaf60b1(0x22d)));transactionDetected=!![];}else logger[_0xaf60b1(0x240)](_0xaf60b1(0x17f)+Math[_0xaf60b1(0x1cf)](_0x53c873[0x0]['number'])+'\x20'+_0x53c873[0x0][_0xaf60b1(0x2ab)]+'\x20'+(_0x53c873[0x0][_0xaf60b1(0x289)]>0x0?_0xaf60b1(0x171):_0xaf60b1(0x22d))+_0xaf60b1(0x257));}currentCoins=_0xbc3cab,currentCoinsAll=_0x526a99,await sleep(watchTransactionsInterval);}catch(_0x154903){if(!exchangeStopped)await handleError(_0x154903,_0xaf60b1(0x22a));}else await sleep(0x64);}}async function loadSymbols(){const _0x2d5799=_0x1f537d;try{markets=await exchange[_0x2d5799(0x1c8)](),allSymbols=[],Object['entries'](markets)['forEach'](_0x2bd889=>{const _0x550205=_0x2d5799;_0x2bd889[0x1]['active']&&_0x2bd889[0x1][_0x550205(0x1ab)]&&allSymbols['push'](_0x2bd889[0x0]);});}catch(_0x2f2ac2){throw _0x2f2ac2;}}function validateSymbols(_0x510dd8){const _0x2a9b41=_0x1f537d;let _0x5e1643=[];return _0x510dd8[_0x2a9b41(0x2d4)](_0x446755=>{const _0x2dd453=_0x2a9b41;!allSymbols[_0x2dd453(0x1ed)](_0x446755)?logHistory(_0x2dd453(0x206),_0x2dd453(0x233)+_0x446755+_0x2dd453(0x19d)):_0x5e1643[_0x2dd453(0x230)](_0x446755);}),_0x5e1643;}async function initclient(){const _0x51bf26=_0x1f537d;proxyEmit(_0x51bf26(0x27e),emittedConfiguration()),proxyEmit(_0x51bf26(0x1f9),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x425540=getNormalizedPerformance();emitPerformance(_0x425540),getStartingBalances(_0x425540);}async function toggleBotMode(){const _0xed65ce=_0x1f537d;let _0x15b5cc=dbConfig['get'](_0xed65ce(0x15c))['find']({'botID':botID})[_0xed65ce(0x2af)]();if(_0x15b5cc){const _0x447744=!_0x15b5cc[_0xed65ce(0x25d)];dbConfig[_0xed65ce(0x236)](_0xed65ce(0x15c))[_0xed65ce(0x297)]({'botID':botID})[_0xed65ce(0x198)]({'headless':_0x447744})[_0xed65ce(0x1d0)](),config['headless']=_0x447744,proxyEmit(_0xed65ce(0x27e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x171e41=_0x1f537d;process[_0x171e41(0x1ac)]({'updatebotmanager':!![]},_0x4224e1=>{}),logger['debug'](_0x171e41(0x23c)+config[_0x171e41(0x25d)]);}async function loadCoins(_0xdd7eab){const _0x4069d4=_0x1f537d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x47ad3a,_0x4ebcdf=0x0,_0x2f84d6=0x0;_0xdd7eab[_0x4069d4(0x2d4)](_0x1986c9=>{const _0x3856a5=_0x4069d4;loading[_0x3856a5(0x20b)]['push'](_0x1986c9);}),loadingCanceled=![];let _0x7d2d58=![];while(_0x47ad3a!=_0xdd7eab[_0x4069d4(0x1a7)]+maxLoadingProgress){_0x47ad3a=loadingProgress,_0xdd7eab['forEach'](_0x151bcb=>{const _0x140501=_0x4069d4;if(global[_0x140501(0x28a)][noslash(_0x151bcb)]){loading['remainingSymbols']=loading[_0x140501(0x20b)]['filter'](_0x2b4f34=>_0x2b4f34!=_0x151bcb);if(!watchedSymbols['includes'](_0x151bcb))watchedSymbols[_0x140501(0x230)](_0x151bcb);_0x47ad3a++;}}),loading[_0x4069d4(0x225)]=Math[_0x4069d4(0x178)](_0x47ad3a/(_0xdd7eab[_0x4069d4(0x1a7)]+maxLoadingProgress)*0x64);loading[_0x4069d4(0x225)]!=0x64&&(_0x2f84d6>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2f84d6>0x78*0x5&&!_0x7d2d58&&(_0x7d2d58=!![],logHistory(_0x4069d4(0x206),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x4069d4(0x20b)][_0x4069d4(0x27f)](',\x20')+_0x4069d4(0x2a7)),logHistory(_0x4069d4(0x206),_0x4069d4(0x1ec)+loadCoinsRetryInterval/0xea60+_0x4069d4(0x245)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x4ca976=_0x4069d4;process[_0x4ca976(0x1ac)]({'stop':_0x4ca976(0x23a)},_0x432721=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4069d4(0x2ad)]=!![],emitLoadingProgress();break;}else _0x4ebcdf!=loading[_0x4069d4(0x225)]&&(_0x4ebcdf=loading[_0x4069d4(0x225)],emitLoadingProgress()),_0x2f84d6++,await sleep(0xc8);}_0x47ad3a==_0xdd7eab[_0x4069d4(0x1a7)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4069d4(0x1ac)]({'status':_0x4069d4(0x282),'live':_0x4069d4(0x195)},_0x57568b=>{}),_0x7d2d58&&logHistory('success',_0x4069d4(0x1ce)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x9e923d=_0x1f537d;proxyEmit(_0x9e923d(0x27e),{...emittedConfiguration(),'configstate':_0x9e923d(0x1cc)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x31d183=_0x1f537d;let _0xb31fd8=global['ticker'][stablecoins['eur'][_0x31d183(0x2ab)]],_0x20da13=global['ticker'][stablecoins[_0x31d183(0x1fe)][_0x31d183(0x2ab)]];return{'eur':Number(_0xb31fd8),'usd':Number(_0x20da13)};}function capitalize(_0x37a1a6){const _0x1c74fe=_0x1f537d;return _0x37a1a6[_0x1c74fe(0x252)](0x0,0x1)[_0x1c74fe(0x145)]()+_0x37a1a6[_0x1c74fe(0x252)](0x1);}function supportedExchanges(){const _0x2b952a=_0x1f537d,_0x34df30=['ws',_0x2b952a(0x291),_0x2b952a(0x18e),_0x2b952a(0x1fd),_0x2b952a(0x156),'cancelOrder',_0x2b952a(0x18d),_0x2b952a(0x1f0),_0x2b952a(0x1c0),_0x2b952a(0x134)];let _0xc11068=[],_0x21513a=[],_0x41d62a=ccxt[_0x2b952a(0x271)][_0x2b952a(0x1f9)];_0x41d62a[_0x2b952a(0x2d4)](_0x3464ab=>{const _0x38d122=_0x2b952a;try{const _0x123032=new ccxt['pro'][_0x3464ab]();_0x21513a[_0x38d122(0x230)](_0x123032);}catch(_0x1a6980){}}),_0x21513a[_0x2b952a(0x2d4)](_0x3a75d1=>{const _0xbc529b=_0x2b952a;let _0x1b3d67=0x0;_0x34df30[_0xbc529b(0x2d4)](_0x4d3044=>{const _0x5d6080=_0xbc529b;_0x4d3044 in _0x3a75d1['has']&&_0x3a75d1[_0x5d6080(0x151)][_0x4d3044]&&_0x1b3d67++;}),_0x1b3d67==_0x34df30[_0xbc529b(0x1a7)]&&_0xc11068[_0xbc529b(0x230)](capitalize(_0x3a75d1['id']));});let _0x16bffb=[];return _0x41d62a[_0x2b952a(0x2d4)](_0x581e41=>{const _0x48689b=_0x2b952a;_0x581e41=capitalize(_0x581e41);if(!_0xc11068['includes'](_0x581e41))_0x16bffb[_0x48689b(0x230)](_0x581e41);}),_0xc11068;}function setStartDatePerformance(){const _0x8aede=_0x1f537d;if(config&&config[_0x8aede(0x1ea)][0x0][_0x8aede(0x2bd)][_0x8aede(0x1a7)]!=0x0){const _0x31c105=config[_0x8aede(0x1ea)][0x0][_0x8aede(0x2bd)];dbPerformance[_0x8aede(0x236)]('data')[_0x8aede(0x297)]({'date':config[_0x8aede(0x2cf)]})[_0x8aede(0x198)]({'coins':_0x31c105})[_0x8aede(0x1d0)]();}}async function recreateCoinResults(){const _0x1cc18e=_0x1f537d;let _0x3c8b20,_0x1249e4=[];try{const _0x5b6fb1=fns[_0x1cc18e(0x232)](fns[_0x1cc18e(0x26f)](config[_0x1cc18e(0x2cf)][_0x1cc18e(0x2d5)](/\//g,'-')),_0x1cc18e(0x235));for(const _0xf151f of currentCoins){if(_0xf151f[_0x1cc18e(0x2ab)]!=config[_0x1cc18e(0x192)]){let _0x2fdaa3=0x0,_0xc869be,_0x50d358;_0x3c8b20=await getAllEventOrders(_0xf151f[_0x1cc18e(0x217)]);if(_0x3c8b20[_0x1cc18e(0x1a7)]>0x0)_0x3c8b20[_0x1cc18e(0x2d4)](_0x1fe11c=>{const _0x1a938b=_0x1cc18e,_0x4ac4b6=_0xf151f[_0x1a938b(0x217)]['includes'](config['basecoin']+'/');_0x1249e4[_0x1a938b(0x230)]({'datetime':_0x1fe11c['datetime'],'coin':_0xf151f['coin'],'symbol':_0xf151f['symbol'],'side':_0x1fe11c[_0x1a938b(0x1aa)],'reverse':_0x4ac4b6,'amount':formatResult(_0x1fe11c[_0x1a938b(0x21f)],0x8),'filled':formatResult(_0x1fe11c[_0x1a938b(0x21f)],0x8),'price':formatResult(_0x1fe11c[_0x1a938b(0x18f)],0x8)}),_0x2fdaa3=_0x1fe11c[_0x1a938b(0x1aa)]==_0x1a938b(0x194)?_0x2fdaa3+_0x1fe11c[_0x1a938b(0x21f)]:_0x2fdaa3-_0x1fe11c[_0x1a938b(0x21f)];if(!_0x50d358)_0x50d358=_0x1fe11c[_0x1a938b(0x18f)];});_0xc869be=_0xf151f[_0x1cc18e(0x289)]-_0x2fdaa3;let _0x32442e;config['liquidity'][_0x1cc18e(0x2d4)](_0x2e7c70=>{const _0x314043=_0x1cc18e;!_0x32442e&&(_0x32442e=_0x2e7c70[_0x314043(0x2bd)][_0x314043(0x297)](_0x5aaeaa=>_0x5aaeaa['coin']==_0xf151f[_0x314043(0x2ab)]),_0x32442e&&(_0xc869be=_0x32442e['number'],_0x50d358=_0x32442e[_0x314043(0x18f)]));});let _0x574759=dbCoinResults[_0x1cc18e(0x236)]('coins')[_0x1cc18e(0x297)]({'coin':_0xf151f[_0x1cc18e(0x2ab)]})[_0x1cc18e(0x2af)]();_0x574759={'coin':_0xf151f['coin'],'number':_0xc869be,'breakeven':_0x50d358,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x1cc18e(0x297)]({'coin':_0xf151f[_0x1cc18e(0x2ab)]})[_0x1cc18e(0x198)](_0x574759)[_0x1cc18e(0x1d0)]();}}_0x1249e4[_0x1cc18e(0x216)]((_0x36518c,_0x1e3649)=>_0x36518c[_0x1cc18e(0x2b0)]>_0x1e3649[_0x1cc18e(0x2b0)]?0x1:_0x1e3649[_0x1cc18e(0x2b0)]>_0x36518c[_0x1cc18e(0x2b0)]?-0x1:0x0);let _0x137611=0x0;for(let _0x5393d3 of _0x1249e4){await updateCoinResults(_0x5393d3,!![]);}}catch(_0xce6c1a){await handleError(_0xce6c1a,'recreateCoinResults()');}}async function getAllEventOrders(_0x274020){const _0x501a3a=_0x1f537d;let _0x2549c1=[],_0x265353=dbLogs['get'](_0x501a3a(0x24a))[_0x501a3a(0x142)](_0x5ee01f=>{const _0x2e29a=_0x501a3a,_0x7adbc8=_0x5ee01f[_0x2e29a(0x229)][_0x2e29a(0x1fb)]();return _0x7adbc8[_0x2e29a(0x1ed)](_0x274020['toLowerCase']())&&(_0x7adbc8[_0x2e29a(0x1ed)](_0x2e29a(0x2ca))&&_0x7adbc8[_0x2e29a(0x1ed)](_0x2e29a(0x1ff))||_0x7adbc8[_0x2e29a(0x1ed)](_0x2e29a(0x21f))&&_0x7adbc8[_0x2e29a(0x1ed)](_0x2e29a(0x1ff)));})['sortBy'](_0x501a3a(0x2c0))[_0x501a3a(0x2af)]();return _0x265353[_0x501a3a(0x2d4)](_0xc347e9=>{const _0xf46f5f=_0x501a3a,_0x16ace7=_0xc347e9[_0xf46f5f(0x229)][_0xf46f5f(0x1ed)](_0xf46f5f(0x17c))?'sell':'buy',_0x237a8b=/#([0-9]|\.)+\s/i,_0x1d91fd=Number(_0x237a8b[_0xf46f5f(0x28b)](_0xc347e9['event'])[0x0][_0xf46f5f(0x2b2)](0x1)),_0x1616fe=/@([0-9]|\.)+$/i,_0x1eba72=Number(_0x1616fe[_0xf46f5f(0x28b)](_0xc347e9[_0xf46f5f(0x229)])[0x0][_0xf46f5f(0x2b2)](0x1));_0x2549c1['push']({'datetime':_0xc347e9['time'],'coin':symbolToCoin(_0x274020),'symbol':_0x274020,'side':_0x16ace7,'amount':_0x1d91fd,'filled':_0x1d91fd,'price':_0x1eba72});}),_0x2549c1;}async function getAllOrders(_0x1407a7,_0x40e750){const _0x4a0eda=_0x1f537d;let _0x70a9bc=[];while(_0x40e750<exchange[_0x4a0eda(0x210)]()){const _0x53f875=0x1f4;try{const _0x30199b=await exchange[_0x4a0eda(0x1c0)](_0x1407a7,_0x40e750,_0x53f875);if(_0x30199b[_0x4a0eda(0x1a7)])_0x40e750=_0x30199b[_0x30199b[_0x4a0eda(0x1a7)]-0x1][_0x4a0eda(0x2a3)]+0x1,_0x70a9bc=_0x70a9bc[_0x4a0eda(0x24e)](_0x30199b);else break;}catch(_0x1efe80){await handleError(_0x1efe80,_0x4a0eda(0x1ae),_0x1407a7);}}return _0x70a9bc;}async function validate24hChanges(){const _0x14a58a=_0x1f537d;for(const _0x5122c0 of currentCoins){if(_0x5122c0[_0x14a58a(0x2ab)]!=config[_0x14a58a(0x192)]){let _0x29eac0;_0x5122c0[_0x14a58a(0x261)]?_0x29eac0=formatResult((0x1/(global[_0x14a58a(0x15f)][noslash(_0x5122c0[_0x14a58a(0x217)])]/0x64+0x1)-0x1)*0x64,0x3):_0x29eac0=global['change'][noslash(_0x5122c0[_0x14a58a(0x217)])],_0x29eac0<config['change24h']&&(logHistory(_0x14a58a(0x206),_0x5122c0[_0x14a58a(0x2ab)]+_0x14a58a(0x1b5)+_0x29eac0+'%'),logHistory(_0x14a58a(0x206),_0x14a58a(0x204)),logHistory(_0x14a58a(0x206),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x527cd9,_0x25da5c){const _0x1773e8=_0x1f537d;if(!_0x527cd9)return!![];const _0x47a1bd=_0x25da5c[_0x1773e8(0x202)]('.'),_0x2a950d=_0x527cd9[_0x1773e8(0x202)]('.');for(var _0x598800=0x0;_0x598800<_0x2a950d[_0x1773e8(0x1a7)];_0x598800++){const _0x59167e=~~_0x2a950d[_0x598800],_0x2c0e02=~~_0x47a1bd[_0x598800];if(_0x59167e<_0x2c0e02)return!![];if(_0x59167e>_0x2c0e02)return![];}return![];}async function oneTimeMigration(){const _0x420f54=_0x1f537d;let _0x362f06=dbLogs[_0x420f54(0x236)](_0x420f54(0x29b))[_0x420f54(0x2af)]();if(isOlderVersion(_0x362f06,'2.3.5')){let _0x408537=[];const _0x5614fb=dbLogs[_0x420f54(0x236)]('logs')[_0x420f54(0x2af)]();_0x5614fb[_0x420f54(0x2d4)](_0x2b4233=>{const _0xa3dd25=_0x420f54;_0x408537['push']({'time':_0x2b4233[_0xa3dd25(0x2c0)],'type':_0x2b4233[_0xa3dd25(0x1b9)],'event':_0x2b4233['event']});}),dbLogs[_0x420f54(0x236)](_0x420f54(0x24a))[_0x420f54(0x198)](_0x408537)[_0x420f54(0x1d0)]();}let _0x11af92=dbConfig['get'](_0x420f54(0x29b))[_0x420f54(0x2af)]();if(isOlderVersion(_0x11af92,_0x420f54(0x238))){let _0x2f220c=dbConfig[_0x420f54(0x236)](_0x420f54(0x15c))[_0x420f54(0x297)]({'botID':botID})['value']();if(_0x2f220c){let _0x496f5c=[];_0x2f220c['portfolio'][_0x420f54(0x2d4)](_0x1fedf8=>{const _0x207b54=_0x420f54;_0x496f5c['push']({'coin':_0x1fedf8[_0x207b54(0x2ab)],'number':_0x1fedf8[_0x207b54(0x16e)],'price':_0x1fedf8[_0x207b54(0x20d)]}),delete _0x1fedf8[_0x207b54(0x16e)],delete _0x1fedf8[_0x207b54(0x20d)];});if(_0x496f5c[_0x420f54(0x1a7)]!==0x0)fs[_0x420f54(0x1f2)](configbackuppath+(_0x420f54(0x167)+botID+_0x420f54(0x1bf)),JSON['stringify'](_0x496f5c,null,0x4),function(_0x18fb58){if(_0x18fb58){}});const _0x1e5041=(_0x43c093,_0x46232f)=>{const _0x30603e=_0x420f54;let _0x26bbc6=[];_0x46232f[_0x30603e(0x2d4)](_0x19a2fd=>{const _0x5a3d40=_0x30603e,_0x24e89c=_0x43c093[_0x5a3d40(0x297)](_0x494a56=>_0x494a56[_0x5a3d40(0x2ab)]==_0x19a2fd[_0x5a3d40(0x2ab)]);if(!_0x24e89c)_0x26bbc6[_0x5a3d40(0x230)](_0x19a2fd);});let _0x51ad68=[];return _0x43c093[_0x30603e(0x2d4)](_0x269827=>{const _0x248259=_0x30603e,_0x541b98=_0x46232f[_0x248259(0x297)](_0x503cce=>_0x503cce[_0x248259(0x2ab)]==_0x269827[_0x248259(0x2ab)]);if(!_0x541b98||_0x541b98[_0x248259(0x289)]==0x0&&_0x269827[_0x248259(0x289)]!=0x0)_0x51ad68[_0x248259(0x230)](_0x269827);}),{'missingDay1':_0x26bbc6,'notInDay2':_0x51ad68};},_0x4847ce=dbPerformance[_0x420f54(0x236)]('data')[_0x420f54(0x29d)]()[_0x420f54(0x2af)]();if(_0x4847ce[_0x420f54(0x1a7)]>0x1){const {missingDay1:_0x291146,notInDay2:_0x1e2e8f}=_0x1e5041(_0x496f5c,_0x4847ce[0x1]['coins']);_0x496f5c=[..._0x496f5c,..._0x291146],_0x1e2e8f[_0x420f54(0x2d4)](_0x185d18=>{const _0x5e8a95=_0x420f54;let _0x46da38=_0x496f5c[_0x5e8a95(0x25c)](_0x4d5d19=>_0x4d5d19[_0x5e8a95(0x2ab)]==_0x185d18[_0x5e8a95(0x2ab)]);_0x46da38!=-0x1&&_0x496f5c[_0x5e8a95(0x224)](_0x46da38,0x1);});}_0x496f5c[_0x420f54(0x216)]((_0x45aa97,_0x59157d)=>_0x45aa97[_0x420f54(0x2ab)]>_0x59157d['coin']?0x1:_0x59157d[_0x420f54(0x2ab)]>_0x45aa97['coin']?-0x1:0x0);let _0x41091d=[{'date':_0x2f220c[_0x420f54(0x2cf)],'changes':_0x496f5c}];_0x4847ce[_0x420f54(0x1a7)]>0x2&&_0x4847ce[_0x420f54(0x2d4)]((_0x14c2e5,_0x2e7dd2)=>{const _0x3d3af6=_0x420f54;if(_0x2e7dd2>0x0&&_0x2e7dd2<_0x4847ce[_0x3d3af6(0x1a7)]-0x1){const {missingDay1:_0x12d786,notInDay2:_0x58df7b}=_0x1e5041(_0x4847ce[_0x2e7dd2]['coins'],_0x4847ce[_0x2e7dd2+0x1][_0x3d3af6(0x150)]);_0x496f5c=[],(_0x12d786[_0x3d3af6(0x1a7)]!=0x0||_0x58df7b['length']!=0x0)&&(_0x12d786[_0x3d3af6(0x1a7)]!=0x0&&_0x496f5c[_0x3d3af6(0x230)](..._0x12d786),_0x58df7b[_0x3d3af6(0x1a7)]!=0x0&&(_0x58df7b['forEach'](_0x1a880a=>{_0x1a880a['number']=-_0x1a880a['number'];}),_0x496f5c[_0x3d3af6(0x230)](..._0x58df7b)),_0x496f5c[_0x3d3af6(0x216)]((_0xf03b3a,_0x1083e5)=>_0xf03b3a[_0x3d3af6(0x2ab)]>_0x1083e5[_0x3d3af6(0x2ab)]?0x1:_0x1083e5[_0x3d3af6(0x2ab)]>_0xf03b3a[_0x3d3af6(0x2ab)]?-0x1:0x0),_0x41091d[_0x3d3af6(0x230)]({'date':_0x4847ce[_0x2e7dd2+0x1][_0x3d3af6(0x246)],'changes':_0x496f5c}));}}),dbConfig[_0x420f54(0x236)](_0x420f54(0x15c))[_0x420f54(0x297)]({'botID':botID})['assign']({..._0x2f220c,'liquidity':_0x41091d})[_0x420f54(0x1d0)]();}}if(isOlderVersion(_0x11af92,_0x420f54(0x186))){let _0x430a34=dbConfig[_0x420f54(0x236)](_0x420f54(0x15c))[_0x420f54(0x297)]({'botID':botID})['value']();if(_0x430a34){const _0x5000e=_0x430a34[_0x420f54(0x1a3)],_0x3b04f0=_0x5000e?capitalize(_0x5000e):_0x420f54(0x1f3);dbConfig[_0x420f54(0x236)](_0x420f54(0x15c))[_0x420f54(0x297)]({'botID':botID})[_0x420f54(0x198)]({'exchange':_0x3b04f0})[_0x420f54(0x1d0)]();}}let _0x6221f9=dbPerformance[_0x420f54(0x236)](_0x420f54(0x29b))[_0x420f54(0x2af)]();isOlderVersion(_0x6221f9,_0x420f54(0x238))&&setStartDatePerformance();let _0x4ffec4=dbCoinResults[_0x420f54(0x236)](_0x420f54(0x29b))['value']();if(isOlderVersion(_0x4ffec4,_0x420f54(0x189))){let _0x30fbbc=dbCoinResults[_0x420f54(0x236)](_0x420f54(0x150))['value']();if(_0x30fbbc[_0x420f54(0x1a7)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5a43de=_0x1f537d;dbConfig[_0x5a43de(0x2cd)](_0x5a43de(0x29b),serverversion)[_0x5a43de(0x1d0)](),dbPerformance[_0x5a43de(0x2cd)](_0x5a43de(0x29b),serverversion)[_0x5a43de(0x1d0)](),dbLogs[_0x5a43de(0x2cd)](_0x5a43de(0x29b),serverversion)['write'](),dbCoinResults[_0x5a43de(0x2cd)](_0x5a43de(0x29b),serverversion)[_0x5a43de(0x1d0)]();}function getConfiguration(_0x14f8f6){const _0x143824=_0x1f537d;let _0x34379f=dbConfig[_0x143824(0x236)](_0x143824(0x15c))[_0x143824(0x297)]({'botID':_0x14f8f6})[_0x143824(0x2af)]();if(_0x34379f){let _0x55cabd=![];typeof _0x34379f[_0x143824(0x1e2)]==_0x143824(0x242)&&(_0x34379f={..._0x34379f,'threshold':Number(_0x34379f[_0x143824(0x1e2)])},_0x55cabd=!![]),_0x34379f['change24h']==undefined&&(_0x34379f={..._0x34379f,'change24h':-0x14},_0x55cabd=!![]),_0x34379f[_0x143824(0x1df)]==undefined&&(_0x34379f={..._0x34379f,'fiat':_0x143824(0x1c2)},_0x55cabd=!![]),_0x34379f[_0x143824(0x211)]==undefined&&(_0x34379f={..._0x34379f,'onepagemode':settings[_0x143824(0x211)]},_0x55cabd=!![]),_0x34379f['colorscheme']==undefined&&(_0x34379f={..._0x34379f,'colorscheme':_0x143824(0x165)},_0x55cabd=!![]),_0x34379f[_0x143824(0x161)]==undefined&&(_0x34379f={..._0x34379f,'autoliquidity':!![]},_0x55cabd=!![]),_0x55cabd&&(_0x34379f={'botID':_0x34379f['botID'],'exchange':_0x34379f['exchange'],'apiKey':_0x34379f[_0x143824(0x170)],'apiSecret':_0x34379f['apiSecret'],'apiPassword':_0x34379f[_0x143824(0x267)],'basecoin':_0x34379f[_0x143824(0x192)],'botname':_0x34379f[_0x143824(0x266)],'showname':_0x34379f[_0x143824(0x1c7)],'threshold':_0x34379f[_0x143824(0x1e2)],'ordertype':_0x34379f[_0x143824(0x294)],'timeout':_0x34379f['timeout'],'fiat':_0x34379f[_0x143824(0x1df)],'startdate':_0x34379f['startdate'],'recreate':_0x34379f[_0x143824(0x2d0)],'timeshift':_0x34379f[_0x143824(0x2a1)],'onepagemode':_0x34379f[_0x143824(0x211)],'headless':_0x34379f[_0x143824(0x25d)],'cooldown':_0x34379f[_0x143824(0x1b6)],'change24h':_0x34379f[_0x143824(0x147)],'emojibuy':_0x34379f[_0x143824(0x193)],'emojisell':_0x34379f[_0x143824(0x15e)],'colorscheme':_0x34379f['colorscheme'],'portfolio':_0x34379f['portfolio'],'autoliquidity':_0x34379f[_0x143824(0x161)],'liquidity':_0x34379f[_0x143824(0x1ea)],'openOrders':_0x34379f[_0x143824(0x234)]},dbConfig[_0x143824(0x236)](_0x143824(0x15c))['remove']()[_0x143824(0x1d0)](),dbConfig[_0x143824(0x236)](_0x143824(0x15c))[_0x143824(0x230)](_0x34379f)['write']());}else _0x34379f={'botID':_0x14f8f6,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x143824(0x190)+_0x14f8f6,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x143824(0x2a1)],'onepagemode':settings[_0x143824(0x211)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x143824(0x165),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x34379f;}function emittedConfiguration(){const _0x266560=_0x1f537d;let _0x4f393;if(config[_0x266560(0x170)]=='')_0x4f393={...config,'configstate':_0x266560(0x2b8)};else config[_0x266560(0x170)]==_0x266560(0x1c6)?_0x4f393={...config,'configstate':'recovery'}:(_0x4f393={...config,'apiKey':'************','apiSecret':'************'},config[_0x266560(0x267)]&&(_0x4f393['apiPassword']=_0x266560(0x1f4)));return _0x4f393;}function getSettings(){const _0x159b52=_0x1f537d;return dbSettings[_0x159b52(0x236)](_0x159b52(0x248))[_0x159b52(0x2af)]();}function getSecure(){const _0x15285e=_0x1f537d;return dbSecure[_0x15285e(0x236)](_0x15285e(0x17b))[_0x15285e(0x2af)]()||{};}function updateTimeshift(_0x1b6415){const _0x3ad2ee=_0x1f537d;let _0x46bc6e=dbConfig[_0x3ad2ee(0x236)](_0x3ad2ee(0x15c))[_0x3ad2ee(0x297)]({'botID':botID})[_0x3ad2ee(0x2af)]();_0x46bc6e&&dbConfig['get'](_0x3ad2ee(0x15c))[_0x3ad2ee(0x297)]({'botID':botID})['assign']({'timeshift':_0x1b6415})[_0x3ad2ee(0x1d0)](),config[_0x3ad2ee(0x2a1)]=_0x1b6415,proxyEmit(_0x3ad2ee(0x27e),emittedConfiguration());}function updateOnepagemode(_0x45c6d5){const _0x57ac1d=_0x1f537d;let _0x17b834=dbConfig[_0x57ac1d(0x236)](_0x57ac1d(0x15c))[_0x57ac1d(0x297)]({'botID':botID})[_0x57ac1d(0x2af)]();_0x17b834&&dbConfig[_0x57ac1d(0x236)](_0x57ac1d(0x15c))[_0x57ac1d(0x297)]({'botID':botID})[_0x57ac1d(0x198)]({'onepagemode':_0x45c6d5})[_0x57ac1d(0x1d0)](),config[_0x57ac1d(0x211)]=_0x45c6d5,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x311431){const _0x4d9b9c=_0x1f537d;logger['debug'](_0x4d9b9c(0x1b0));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4d9b9c(0x240)](_0x4d9b9c(0x26b));let _0x371731=![],_0x42cff2=![],_0x1e9d58=[];_0x311431[_0x4d9b9c(0x146)]['forEach'](_0x16ad13=>{const _0x3a738d=_0x4d9b9c;if(!_0x16ad13[_0x3a738d(0x16b)]&&_0x16ad13[_0x3a738d(0x2ab)]!=_0x311431[_0x3a738d(0x192)])_0x1e9d58['push'](_0x16ad13[_0x3a738d(0x217)]);}),_0x1e9d58[_0x4d9b9c(0x2d4)](_0x1035ce=>{const _0x102a33=_0x4d9b9c,_0x3eb6e7=currentCoins[_0x102a33(0x297)](_0x348d39=>_0x348d39[_0x102a33(0x217)]==_0x1035ce);!_0x3eb6e7&&(_0x371731=!![]);}),currentCoins[_0x4d9b9c(0x2d4)](_0x5e9577=>{const _0x10ec5d=_0x4d9b9c;if(_0x5e9577[_0x10ec5d(0x2ab)]!=config[_0x10ec5d(0x192)]){const _0x1a6b93=_0x1e9d58[_0x10ec5d(0x297)](_0x361938=>_0x361938==_0x5e9577[_0x10ec5d(0x217)]);!_0x1a6b93&&(_0x371731=!![]);}}),_0x311431['portfolio']['forEach'](_0x45e885=>{const _0x522f12=_0x4d9b9c,_0x2b8a42=config['portfolio'][_0x522f12(0x297)](_0x9c717a=>_0x9c717a['coin']==_0x45e885['coin']);if(_0x2b8a42&&_0x45e885[_0x522f12(0x290)]!=_0x2b8a42[_0x522f12(0x290)])_0x42cff2=!![];});let _0x484a4d=dbConfig[_0x4d9b9c(0x236)](_0x4d9b9c(0x15c))[_0x4d9b9c(0x297)]({'botID':botID})[_0x4d9b9c(0x2af)]();_0x311431={..._0x311431,'apiKey':crypt[_0x4d9b9c(0x13d)](secure[_0x4d9b9c(0x1e7)],_0x311431[_0x4d9b9c(0x170)])[_0x4d9b9c(0x1d2)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x311431[_0x4d9b9c(0x1d7)])[_0x4d9b9c(0x1d2)]};_0x311431[_0x4d9b9c(0x267)]&&(_0x311431['apiPassword']=crypt[_0x4d9b9c(0x13d)](secure[_0x4d9b9c(0x1e7)],_0x311431[_0x4d9b9c(0x267)])[_0x4d9b9c(0x1d2)]);let _0x5ef8b2=![];if(_0x484a4d){_0x311431['apiKey']==_0x4d9b9c(0x1f4)?_0x311431[_0x4d9b9c(0x170)]=config[_0x4d9b9c(0x170)]:_0x5ef8b2=!![];_0x311431[_0x4d9b9c(0x1d7)]==_0x4d9b9c(0x1f4)?_0x311431[_0x4d9b9c(0x1d7)]=config[_0x4d9b9c(0x1d7)]:_0x5ef8b2=!![];if(_0x311431[_0x4d9b9c(0x267)]=='************')_0x311431[_0x4d9b9c(0x267)]=config[_0x4d9b9c(0x267)];else{if(_0x311431['apiPassword'])_0x5ef8b2=!![];}dbConfig['get'](_0x4d9b9c(0x15c))['find']({'botID':botID})[_0x4d9b9c(0x198)](_0x311431)[_0x4d9b9c(0x1d0)]();}else dbConfig[_0x4d9b9c(0x236)](_0x4d9b9c(0x15c))[_0x4d9b9c(0x230)](_0x311431)['write'](),_0x5ef8b2=!![],process[_0x4d9b9c(0x1ac)]({'status':_0x4d9b9c(0x282),'live':'running'},_0x55c577=>{});process['send']({'botname':_0x311431[_0x4d9b9c(0x266)]},_0x7ac176=>{}),config={..._0x311431},updateBotManager(),proxyEmit(_0x4d9b9c(0x259)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5ef8b2)await reset(!![]);else _0x371731||_0x42cff2?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x4d9b9c(0x20c));}async function storeHeadless(_0x4a03e5){const _0x30481f=_0x1f537d,_0x54064d={...config,'headless':_0x4a03e5['headless']};let _0x281c51=dbConfig['get'](_0x30481f(0x15c))[_0x30481f(0x297)]({'botID':botID})[_0x30481f(0x2af)]();_0x281c51&&dbConfig[_0x30481f(0x236)](_0x30481f(0x15c))['find']({'botID':botID})[_0x30481f(0x198)](_0x54064d)[_0x30481f(0x1d0)](),config={..._0x54064d},updateBotManager(),proxyEmit(_0x30481f(0x27e),emittedConfiguration());}async function storeFiat(_0x3b4113){const _0xfbde40=_0x1f537d,_0x50bf18={...config,'fiat':_0x3b4113};let _0x5f2ad4=dbConfig[_0xfbde40(0x236)](_0xfbde40(0x15c))['find']({'botID':botID})['value']();_0x5f2ad4&&dbConfig['get'](_0xfbde40(0x15c))['find']({'botID':botID})[_0xfbde40(0x198)](_0x50bf18)[_0xfbde40(0x1d0)](),config={..._0x50bf18},proxyEmit(_0xfbde40(0x27e),emittedConfiguration());}function resetHistory(){const _0x31f07b=_0x1f537d;logger['full'](_0x31f07b(0x213));try{if(fs[_0x31f07b(0x140)](path['join'](configpath,'bot-'+botID+'-events.json')))fs[_0x31f07b(0x1b3)](path['join'](configpath,_0x31f07b(0x2b9)+botID+_0x31f07b(0x253)));if(fs[_0x31f07b(0x140)](path[_0x31f07b(0x27f)](configpath,_0x31f07b(0x2b9)+botID+_0x31f07b(0x28c))))fs[_0x31f07b(0x1b3)](path['join'](configpath,_0x31f07b(0x2b9)+botID+'-performance.json'));if(fs[_0x31f07b(0x140)](path[_0x31f07b(0x27f)](configpath,_0x31f07b(0x2b9)+botID+_0x31f07b(0x153))))fs[_0x31f07b(0x1b3)](path[_0x31f07b(0x27f)](configpath,_0x31f07b(0x2b9)+botID+_0x31f07b(0x153)));}catch(_0x160b1d){if(_0x160b1d)logger[_0x31f07b(0x1bb)](_0x31f07b(0x19a),_0x160b1d);}const _0xa84e29=getDate();let _0x540dbc=[];currentCoins[_0x31f07b(0x2d4)](_0x4a69ca=>{const _0x559945=_0x31f07b;_0x540dbc[_0x559945(0x230)]({'coin':_0x4a69ca[_0x559945(0x2ab)],'number':_0x4a69ca[_0x559945(0x289)],'price':_0x4a69ca[_0x559945(0x268)]});});let _0x41a64a=dbConfig[_0x31f07b(0x236)](_0x31f07b(0x15c))[_0x31f07b(0x297)]({'botID':botID})[_0x31f07b(0x2af)]();_0x41a64a&&(dbConfig[_0x31f07b(0x236)]('bot')['find']({'botID':botID})[_0x31f07b(0x198)]({'liquidity':[{'date':_0xa84e29,'changes':_0x540dbc}]})['write'](),config[_0x31f07b(0x1ea)]=[]),process[_0x31f07b(0x1ac)]({'stop':_0x31f07b(0x23a)},_0x4e2281=>{});}function noslash(_0x36468a){const _0x1cce4a=_0x1f537d;return _0x36468a[_0x1cce4a(0x2d5)]('/','');}function updateHighestFee(_0x4cb9d3){const _0x47aa8f=_0x1f537d;if(_0x4cb9d3[_0x47aa8f(0x261)]){let _0x3f8788={'filled':_0x4cb9d3[_0x47aa8f(0x21f)]*_0x4cb9d3[_0x47aa8f(0x18f)],'amount':_0x4cb9d3[_0x47aa8f(0x21f)]*_0x4cb9d3[_0x47aa8f(0x18f)],'side':_0x4cb9d3['side']=='sell'?'buy':_0x47aa8f(0x17c),'price':0x1/_0x4cb9d3[_0x47aa8f(0x18f)]};_0x4cb9d3={..._0x4cb9d3,..._0x3f8788};}const _0x5edb06=defaultFee*_0x4cb9d3[_0x47aa8f(0x21f)]*_0x4cb9d3[_0x47aa8f(0x18f)];lastFees[_0x47aa8f(0x1d9)]['length']===0x14&&lastFees[_0x47aa8f(0x1d9)][_0x47aa8f(0x278)](),lastFees[_0x47aa8f(0x1d9)]['push'](_0x5edb06),lastFees[_0x47aa8f(0x1a2)]=Math[_0x47aa8f(0x24c)](...lastFees[_0x47aa8f(0x1d9)]);}async function updateNumberCoinsCcxt(_0x5ef127){const _0x44ac0c=_0x1f537d;logger[_0x44ac0c(0x240)](_0x44ac0c(0x1f6)+_0x5ef127['symbol']+'\x20|\x20'+_0x5ef127[_0x44ac0c(0x174)]+_0x44ac0c(0x244)+_0x5ef127['filled']+_0x44ac0c(0x1e4)+_0x5ef127['amount']+_0x44ac0c(0x244)+_0x5ef127['id']);let _0x1b37a7=_0x5ef127[_0x44ac0c(0x174)],_0x44fd8e=![];currentCoins[_0x44ac0c(0x2d4)](_0x2b5689=>{const _0x12a2cd=_0x44ac0c;_0x2b5689[_0x12a2cd(0x217)]==_0x5ef127[_0x12a2cd(0x217)]&&(_0x44fd8e=!![]);});if(!_0x44fd8e)return;const _0x3f70d2=currentCoins[_0x44ac0c(0x297)](_0x14d5f8=>_0x14d5f8[_0x44ac0c(0x217)]==_0x5ef127[_0x44ac0c(0x217)]),_0x499812=_0xdbdaea=>{const _0x48ad30=_0x44ac0c;if(_0x3f70d2)_0x3f70d2[_0x48ad30(0x17d)]=_0xdbdaea;};if(_0x1b37a7==_0x44ac0c(0x182))_0x499812(_0x44ac0c(0x182));else{if(_0x1b37a7==_0x44ac0c(0x287)){_0x499812('canceled');const _0xb6986a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xb6986a,await getOpenOrders(),handleOpenOrders();}else{if(_0x1b37a7==_0x44ac0c(0x2d1)){let _0x12b025=![];if(lastOrders)for(const _0x1f05c6 of lastOrders){const _0x2dac30=0xc8,_0x3fdae4=0x1388;let _0x4a2701=0x0;while(!_0x1f05c6[_0x44ac0c(0x239)]&&_0x4a2701*_0x2dac30<_0x3fdae4){_0x4a2701++,await sleep(_0x2dac30);}if(_0x4a2701>0x0)logger[_0x44ac0c(0x240)](_0x44ac0c(0x14f)+_0x4a2701*_0x2dac30/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x1f05c6[_0x44ac0c(0x239)]==_0x5ef127['id']){logger[_0x44ac0c(0x240)](_0x44ac0c(0x2be)+_0x5ef127['id']),_0x12b025=!![];if(_0x1f05c6['filled']==0x0){logger['debug'](_0x44ac0c(0x2a6)+_0x5ef127['id']);if(_0x5ef127[_0x44ac0c(0x1c4)])_0x1f05c6['price']=_0x5ef127[_0x44ac0c(0x1c4)];else{if(_0x5ef127['price'])_0x1f05c6[_0x44ac0c(0x18f)]=_0x5ef127[_0x44ac0c(0x18f)];else{}}_0x1f05c6['filled']=_0x5ef127['filled'],updateHighestFee(_0x1f05c6),_0x499812('filled'),await validateOrders();if(lockOrders==ORDERS[_0x44ac0c(0x280)]){const _0x46230a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x46230a;}_0x1f05c6[_0x44ac0c(0x21a)]={'currency':_0x5ef127[_0x44ac0c(0x21a)]?_0x5ef127['fee'][_0x44ac0c(0x237)]:null,'cost':_0x5ef127[_0x44ac0c(0x21a)]?_0x5ef127[_0x44ac0c(0x21a)]['cost']:0x0},await updateCoinResults(_0x1f05c6);}}}if(!_0x12b025){logger[_0x44ac0c(0x240)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x5ef127['id']),_0x499812('filled');const _0x5489ec=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5489ec,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x23525e=JSON[_0x44ac0c(0x223)](lastBalances[_0x44ac0c(0x146)]);const _0x4df345=_0x23525e[_0x44ac0c(0x297)](_0x12045b=>_0x12045b['symbol']==_0x5ef127['symbol']);if(_0x4df345){if(_0x1b37a7==_0x44ac0c(0x182))_0x4df345['orderstatus']=_0x4df345[_0x44ac0c(0x17d)]=='filled'?'filled':'open';else{if(_0x1b37a7==_0x44ac0c(0x287))_0x4df345[_0x44ac0c(0x17d)]=_0x4df345[_0x44ac0c(0x17d)]==_0x44ac0c(0x21f)?_0x44ac0c(0x21f):_0x44ac0c(0x287);else _0x1b37a7=='closed'&&(_0x4df345[_0x44ac0c(0x17d)]=_0x44ac0c(0x21f));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x23525e)},proxyEmit(_0x44ac0c(0x1dd),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x558226=_0x1f537d;await getOpenOrders();let _0x30ea63=![];currentCoins[_0x558226(0x2d4)](_0x481d8f=>{const _0x23de5e=_0x558226;_0x30ea63=allOpenOrders[_0x23de5e(0x297)](_0x296c0f=>_0x296c0f['symbol']==_0x481d8f[_0x23de5e(0x217)]),_0x481d8f[_0x23de5e(0x17d)]=_0x30ea63?'open':_0x23de5e(0x288);});}async function getCoins(_0x43601d=0x0,_0x53be65=!![],_0x5db160=config[_0x1f537d(0x192)]){const _0x118c24=_0x1f537d;let _0xc574bd,_0x4910cf=[],_0xaa7787=[],_0x3d1316=[];if(_0x43601d)await sleep(_0x43601d);if(botPaused)return[currentCoins,currentCoinsAll];try{_0xc574bd=await exchange['fetchBalance'](),mybalances=_0xc574bd[_0x118c24(0x263)];for(const [_0x256b30,_0xec82d9]of Object[_0x118c24(0x15a)](mybalances)){_0x3d1316[_0x118c24(0x230)](_0x256b30);}config[_0x118c24(0x146)][_0x118c24(0x2d4)](_0x24bf1f=>{const _0x5785d5=_0x118c24;!_0x3d1316[_0x5785d5(0x1ed)](_0x24bf1f['coin'])&&(mybalances[_0x24bf1f[_0x5785d5(0x2ab)]]=0x0);});if(_0x5db160=='')for(const [_0x405dfc,_0x30d6d5]of Object[_0x118c24(0x15a)](mybalances)){_0x30d6d5!=0x0&&_0x4910cf[_0x118c24(0x230)]({'coin':_0x405dfc});}else{let _0x3cbc71=![];for(const [_0x43a2e0,_0x4bc2df]of Object[_0x118c24(0x15a)](mybalances)){const _0xd5fa87=config[_0x118c24(0x146)][_0x118c24(0x297)](_0x41dfee=>_0x41dfee[_0x118c24(0x2ab)]==_0x43a2e0),_0xae28d9=_0x43a2e0+'/'+_0x5db160,_0x5e75c8=_0x5db160+'/'+_0x43a2e0,_0x2af3e2=currentCoins[_0x118c24(0x297)](_0x3cae10=>_0x3cae10['coin']==_0x43a2e0);_0x3cbc71=![];if((_0x4bc2df!=0x0||_0xd5fa87)&&(allSymbols[_0x118c24(0x1ed)](_0xae28d9)||_0x43a2e0==_0x5db160))_0x4910cf[_0x118c24(0x230)]({'coin':_0x43a2e0,'symbol':_0xae28d9,'reverse':![],'number':Math[_0x118c24(0x24c)](_0x4bc2df+(_0xd5fa87&&_0xd5fa87[_0x118c24(0x290)]||0x0),0x0),'orderstatus':_0x2af3e2?_0x2af3e2['orderstatus']:_0x118c24(0x288)});else{if((_0x4bc2df!=0x0||_0xd5fa87)&&allSymbols[_0x118c24(0x1ed)](_0x5e75c8))_0x4910cf[_0x118c24(0x230)]({'coin':_0x43a2e0,'symbol':_0x5e75c8,'reverse':!![],'number':Math['max'](_0x4bc2df+(_0xd5fa87&&_0xd5fa87[_0x118c24(0x290)]||0x0),0x0),'orderstatus':_0x2af3e2?_0x2af3e2[_0x118c24(0x17d)]:'none'});else _0xd5fa87&&_0x4910cf[_0x118c24(0x230)]({'coin':_0xd5fa87['coin'],'symbol':_0xd5fa87[_0x118c24(0x217)],'reverse':_0xd5fa87[_0x118c24(0x261)],'number':0x0,'orderstatus':_0x118c24(0x288)});}}}}catch(_0x52fd51){if(!_0x53be65)handleErrorNoStop(_0x52fd51,_0x118c24(0x148));else await handleError(_0x52fd51,_0x118c24(0x148));}return _0xaa7787=cloneDeep(_0x4910cf),_0x4910cf=_0x4910cf['filter'](_0x154742=>{const _0x119b15=_0x118c24,_0x23efe6=config[_0x119b15(0x146)][_0x119b15(0x297)](_0x497f2d=>_0x497f2d[_0x119b15(0x2ab)]==_0x154742[_0x119b15(0x2ab)]);return _0x23efe6&&!_0x23efe6[_0x119b15(0x16b)];}),[_0x4910cf,_0xaa7787];}async function getCoinNumber(_0x4df220){const _0x117b57=_0x1f537d;let _0x58d419;try{const _0x27ffc5=await exchange[_0x117b57(0x134)]();_0x58d419=_0x27ffc5[_0x117b57(0x263)][_0x4df220];}catch(_0x578ca3){await handleError(_0x578ca3,_0x117b57(0x155));}return _0x58d419;}async function getOpenOrders(){const _0x22397c=_0x1f537d;let _0x555ee3;allOpenOrders=[];try{for(const _0x5cf210 of config['portfolio']){!_0x5cf210[_0x22397c(0x16b)]&&_0x5cf210[_0x22397c(0x2ab)]!=config['basecoin']&&(_0x555ee3=await exchange['fetchOpenOrders'](_0x5cf210['symbol']),_0x555ee3[_0x22397c(0x1a7)]>0x0&&allOpenOrders[_0x22397c(0x230)](_0x555ee3[0x0]));}}catch(_0x26b0a7){await handleError(_0x26b0a7,_0x22397c(0x1db));}}async function handleOpenOrders(_0x4cb37d=0x0){const _0x2d3534=_0x1f537d;allOpenOrders[_0x2d3534(0x1a7)]==0x0&&lockOrders==ORDERS[_0x2d3534(0x280)]&&allOrdersPlaced&&(_0x4cb37d==0x0?(logger['debug'](_0x2d3534(0x1b2)),_0x4cb37d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2d3534(0x240)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x4e2d6e){const _0x3fd51e=_0x1f537d,_0x371cc0=ccxt[_0x3fd51e(0x271)][_0x4e2d6e['exchange'][_0x3fd51e(0x1fb)]()],_0x803ef0=new _0x371cc0({'apiKey':_0x4e2d6e['apiKey'],'secret':_0x4e2d6e[_0x3fd51e(0x1d7)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3fd51e(0x1ab)}});if(_0x4e2d6e[_0x3fd51e(0x267)])_0x803ef0['password']=_0x4e2d6e['apiPassword'];try{await _0x803ef0['loadMarkets']();}catch(_0x154947){throw _0x154947;}}function cloneDeep(_0x1ac893){const _0x590911=_0x1f537d;return JSON[_0x590911(0x223)](JSON[_0x590911(0x23b)](_0x1ac893));}async function getPortfolio(_0x3b4382){const _0x5060ac=_0x1f537d;let _0x4b67d2=[],_0x228e0e=[],_0x49f663=[],_0xc4b19f;if(_0x3b4382[_0x5060ac(0x170)]!=='************'||_0x3b4382[_0x5060ac(0x1d7)]!==_0x5060ac(0x1f4)||_0x3b4382[_0x5060ac(0x267)]&&_0x3b4382['apiPassword']!==_0x5060ac(0x1f4)){if(config[_0x5060ac(0x1a3)]){if(_0x3b4382[_0x5060ac(0x170)]==_0x5060ac(0x1f4))_0x3b4382[_0x5060ac(0x170)]=config[_0x5060ac(0x170)];if(_0x3b4382[_0x5060ac(0x1d7)]=='************')_0x3b4382['apiSecret']=config[_0x5060ac(0x1d7)];if(_0x3b4382[_0x5060ac(0x267)]==_0x5060ac(0x1f4))_0x3b4382[_0x5060ac(0x267)]=config[_0x5060ac(0x267)];try{await testAPI(_0x3b4382);}catch(_0x5022ac){if(_0x5022ac[_0x5060ac(0x1d1)]()[_0x5060ac(0x1ed)](_0x5060ac(0x208))){logger[_0x5060ac(0x240)](_0x5060ac(0x188)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5022ac,_0x5060ac(0x23e));return;}}}await initExchange(_0x3b4382[_0x5060ac(0x1a3)],_0x3b4382['apiKey'],_0x3b4382[_0x5060ac(0x1d7)],_0x3b4382[_0x5060ac(0x267)]);try{await loadSymbols();}catch(_0x4daacc){if(_0x4daacc[_0x5060ac(0x1d1)]()[_0x5060ac(0x1ed)](_0x5060ac(0x208))){proxyEmit(_0x5060ac(0x146),![]);return;}else{handleError(_0x4daacc,_0x5060ac(0x1cb));return;}}const _0x4a546e=await getCoins(0x0,![],_0x3b4382[_0x5060ac(0x192)]);_0x49f663=cloneDeep(_0x4a546e[0x1]);}else{const _0x1497c0=await getCoins();_0x49f663=cloneDeep(_0x1497c0[0x1]);}if(_0x3b4382['basecoin']=='')proxyEmit(_0x5060ac(0x146),_0x49f663);else{_0x49f663[_0x5060ac(0x2d4)](_0x1d465a=>{const _0x3f6440=_0x5060ac;if(_0x1d465a[_0x3f6440(0x2ab)]!=_0x3b4382[_0x3f6440(0x192)]&&allSymbols[_0x3f6440(0x1ed)](_0x1d465a['symbol']))_0x4b67d2[_0x3f6440(0x230)](_0x1d465a['symbol']);});if(_0x4b67d2[_0x5060ac(0x1a7)]==0x0)logHistory(_0x5060ac(0x206),_0x5060ac(0x163));else{try{_0x228e0e=await getTickers(_0x4b67d2);}catch(_0x1498a3){if(_0x1498a3[_0x5060ac(0x1d1)]()['includes'](_0x5060ac(0x208))){proxyEmit(_0x5060ac(0x146),![]);return;}else handleError(_0x1498a3,_0x5060ac(0x28f));}_0x49f663[_0x5060ac(0x2d4)](_0x6e4dc8=>{const _0x5e541f=_0x5060ac;_0x6e4dc8[_0x5e541f(0x2ab)]!=_0x3b4382[_0x5e541f(0x192)]?_0x228e0e[_0x6e4dc8['symbol']]?_0xc4b19f=_0x6e4dc8['reverse']?0x1/_0x228e0e[_0x6e4dc8[_0x5e541f(0x217)]][_0x5e541f(0x268)]:_0x228e0e[_0x6e4dc8[_0x5e541f(0x217)]][_0x5e541f(0x268)]:_0xc4b19f=0x0:_0xc4b19f=0x1,_0x6e4dc8['price']=formatResult(_0xc4b19f,0x8);}),proxyEmit(_0x5060ac(0x146),_0x49f663);}}}function truncateTradeAmount(_0xa5bb39,_0x28eff8){const _0x270b4f=_0x1f537d;let _0x1ec4d0=0x0;try{_0x1ec4d0=exchange[_0x270b4f(0x137)](_0xa5bb39,_0x28eff8);}catch(_0x4aed3a){}return _0x1ec4d0;}function checkMinimums(_0x5d029a){const _0x41c638=_0x1f537d;let _0x4b48de=!![];const _0x5d2c01=!_0x5d029a[_0x41c638(0x261)]?markets[_0x5d029a[_0x41c638(0x217)]][_0x41c638(0x1fa)]['amount'][_0x41c638(0x16c)]:markets[_0x5d029a[_0x41c638(0x217)]]['limits']['cost'][_0x41c638(0x16c)],_0xb2e97d=!_0x5d029a[_0x41c638(0x261)]?markets[_0x5d029a[_0x41c638(0x217)]]['limits']['cost'][_0x41c638(0x16c)]:markets[_0x5d029a[_0x41c638(0x217)]][_0x41c638(0x1fa)][_0x41c638(0x27b)]['min'],_0x1cfcf9=truncateTradeAmount(_0x5d029a['symbol'],_0x5d029a['trade']);_0x5d029a['trade']=_0x1cfcf9;if(Math[_0x41c638(0x1cf)](_0x1cfcf9)<_0x5d2c01)_0x4b48de=![];if(Math[_0x41c638(0x1cf)](_0x1cfcf9)*_0x5d029a[_0x41c638(0x268)]<_0xb2e97d)_0x4b48de=![];if(_0x5d029a[_0x41c638(0x1aa)]==_0x41c638(0x17c)){let _0x36eea0=config[_0x41c638(0x146)][_0x41c638(0x297)](_0x211b8c=>_0x211b8c['coin']==_0x5d029a[_0x41c638(0x2ab)]);if(_0x36eea0['offset']>0x0){if(Math[_0x41c638(0x1cf)](_0x1cfcf9)>_0x5d029a[_0x41c638(0x289)]-_0x36eea0['offset'])_0x4b48de=![];}else{if(Math[_0x41c638(0x1cf)](_0x1cfcf9)>_0x5d029a[_0x41c638(0x289)])_0x4b48de=![];}}if(_0x5d029a[_0x41c638(0x1aa)]=='buy'){let _0x4e3633=config[_0x41c638(0x146)][_0x41c638(0x297)](_0x566d73=>_0x566d73[_0x41c638(0x2ab)]==config['basecoin']),_0x223cb4=currentCoins['find'](_0x9ae7e9=>_0x9ae7e9['coin']==config[_0x41c638(0x192)]);if(_0x4e3633[_0x41c638(0x290)]>0x0){if(Math[_0x41c638(0x1cf)](_0x1cfcf9)*_0x5d029a['last']>_0x223cb4['number']-_0x4e3633[_0x41c638(0x290)])_0x4b48de=![];}else{if(Math[_0x41c638(0x1cf)](_0x1cfcf9)*_0x5d029a['last']>_0x223cb4['number'])_0x4b48de=![];}}return _0x4b48de;}async function getBalances(_0xcfda3=!![]){const _0x1ecf5f=_0x1f537d;let _0x5023db=0x0,_0x443b3d;const _0x2ef440=config[_0x1ecf5f(0x1e2)];if(config[_0x1ecf5f(0x25d)]&&config[_0x1ecf5f(0x147)]<0x0)await validate24hChanges();currentCoins[_0x1ecf5f(0x2d4)](_0xd2505f=>{const _0x37ee4b=_0x1ecf5f;if(_0xd2505f[_0x37ee4b(0x2ab)]!=config[_0x37ee4b(0x192)]){let _0x2755f8=global[_0x37ee4b(0x28a)][noslash(_0xd2505f[_0x37ee4b(0x217)])];_0x443b3d=_0xd2505f[_0x37ee4b(0x261)]?0x1/_0x2755f8:_0x2755f8;}else _0x443b3d=0x1;let _0x33d3da=_0xd2505f['number']*_0x443b3d;_0x5023db+=_0x33d3da,_0xd2505f['last']=formatResult(Number(_0x443b3d),0x8),_0xd2505f[_0x37ee4b(0x2af)]=_0x33d3da;}),currentCoins[_0x1ecf5f(0x2d4)](_0x1450ed=>{const _0x275581=_0x1ecf5f;let _0x37149b=config[_0x275581(0x146)][_0x275581(0x297)](_0x55475c=>_0x55475c[_0x275581(0x2ab)]==_0x1450ed[_0x275581(0x2ab)]),_0x5d16ce=Number(_0x37149b[_0x275581(0x260)]),_0x2d347e=_0x1450ed[_0x275581(0x2af)]/_0x5023db*0x64,_0x565457=_0x5d16ce*_0x5023db/0x64/_0x1450ed['last']-_0x1450ed['number'];_0x1450ed[_0x275581(0x260)]=formatResult(_0x2d347e,0x3),_0x1450ed[_0x275581(0x14d)]=formatResult(_0x5d16ce,0x3),_0x1450ed[_0x275581(0x2ce)]=formatResult(_0x565457,0x8),_0x1450ed[_0x275581(0x1aa)]='',_0x1450ed[_0x275581(0x1d5)]=![];if(_0x1450ed['coin']!=config[_0x275581(0x192)]){if(_0x1450ed['distribution']>_0x5d16ce)_0x1450ed[_0x275581(0x1aa)]=_0x275581(0x17c),_0x1450ed['valid']=checkMinimums(_0x1450ed);else _0x1450ed[_0x275581(0x260)]<_0x5d16ce&&(_0x1450ed[_0x275581(0x1aa)]=_0x275581(0x194),_0x1450ed[_0x275581(0x1d5)]=checkMinimums(_0x1450ed));}_0x1450ed[_0x275581(0x1b4)]=_0x1450ed[_0x275581(0x260)]/_0x1450ed['target']-0x1;if(_0x1450ed[_0x275581(0x17d)]==_0x275581(0x21f)||_0x1450ed[_0x275581(0x17d)]==_0x275581(0x287))_0x1450ed[_0x275581(0x17d)]=_0x275581(0x288);}),currentCoins[_0x1ecf5f(0x216)]((_0xef2143,_0x56bae7)=>_0xef2143[_0x1ecf5f(0x1b4)]<_0x56bae7[_0x1ecf5f(0x1b4)]?0x1:_0x56bae7['delta']<_0xef2143[_0x1ecf5f(0x1b4)]?-0x1:0x0);const _0x594d1d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x594d1d[_0x1ecf5f(0x215)],'usd':_0x594d1d[_0x1ecf5f(0x1fe)],'portfolio':JSON[_0x1ecf5f(0x23b)](currentCoins),'threshold':_0x2ef440},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0xcfda3){if(config[_0x1ecf5f(0x25d)])headlessMode({'portfolio':currentCoins,'threshold':_0x2ef440});else{if(lockOrders==ORDERS[_0x1ecf5f(0x1f8)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2ef440});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4bb5d3=getNormalizedPerformance();getStartingBalances(_0x4bb5d3),emitPerformance(_0x4bb5d3);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x3d8035=getNormalizedPerformance();emitPerformance(_0x3d8035),getStartingBalances(_0x3d8035),logger[_0x1ecf5f(0x240)](_0x1ecf5f(0x2c9));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x330398=_0x1f537d;if(!lastBalances)return;let _0x53fba3=[],_0x1a9aa4,_0x5af88a=JSON['parse'](lastBalances[_0x330398(0x146)]);_0x5af88a[_0x330398(0x216)]((_0x3e6056,_0x1decf1)=>_0x3e6056['coin']>_0x1decf1[_0x330398(0x2ab)]?0x1:_0x1decf1['coin']>_0x3e6056[_0x330398(0x2ab)]?-0x1:0x0),_0x5af88a[_0x330398(0x2d4)](_0x3aa8c2=>{const _0x190b21=_0x330398;let _0x1ed1c4={'coin':_0x3aa8c2[_0x190b21(0x2ab)],'number':_0x3aa8c2['number'],'price':_0x3aa8c2[_0x190b21(0x268)]};_0x53fba3[_0x190b21(0x230)](_0x1ed1c4);});const _0x4443bd=await getFiat();_0x1a9aa4={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x4443bd[_0x330398(0x215)],'usd':_0x4443bd[_0x330398(0x1fe)],'coins':_0x53fba3};let _0x33284a=dbPerformance[_0x330398(0x236)]('data')[_0x330398(0x297)]({'date':_0x1a9aa4[_0x330398(0x246)]})[_0x330398(0x2af)]();_0x33284a?_0x1a9aa4[_0x330398(0x246)]!=config[_0x330398(0x2cf)]&&dbPerformance[_0x330398(0x236)](_0x330398(0x1af))[_0x330398(0x297)]({'date':_0x1a9aa4['date']})['assign'](_0x1a9aa4)[_0x330398(0x1d0)]():dbPerformance[_0x330398(0x236)](_0x330398(0x1af))[_0x330398(0x230)](_0x1a9aa4)[_0x330398(0x1d0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x19c975=_0x1f537d;let _0x367283=[];if(dbPerformance[_0x19c975(0x151)](_0x19c975(0x1af))[_0x19c975(0x2af)]()){let _0x49f8ef=dbPerformance[_0x19c975(0x236)]('data')[_0x19c975(0x29d)]()[_0x19c975(0x142)](_0x8e9939=>{const _0x30b93d=_0x19c975;if(_0x8e9939[_0x30b93d(0x150)][_0x30b93d(0x1a7)]==0x0)return![];else return!![];})[_0x19c975(0x2b5)](_0x19c975(0x246))[_0x19c975(0x2af)](),_0xddec2e=[...config[_0x19c975(0x1ea)]];_0xddec2e[_0x19c975(0x216)]((_0xbd2543,_0x39bf7f)=>_0xbd2543[_0x19c975(0x246)]>_0x39bf7f[_0x19c975(0x246)]?-0x1:_0x39bf7f[_0x19c975(0x246)]>_0xbd2543[_0x19c975(0x246)]?0x1:0x0);let _0x341c1c=0x1,_0x548649=[],_0x54da24=0x0;_0x49f8ef[_0x19c975(0x2b2)]()[_0x19c975(0x261)]()['forEach']((_0x41b254,_0x5808f3)=>{const _0x4e1da0=_0x19c975;if(_0xddec2e[_0x54da24]){if(_0x49f8ef[_0x49f8ef[_0x4e1da0(0x1a7)]-_0x5808f3]&&_0xddec2e[_0x54da24][_0x4e1da0(0x246)]==_0x49f8ef[_0x49f8ef[_0x4e1da0(0x1a7)]-_0x5808f3]['date']){if(_0x5808f3<_0x49f8ef[_0x4e1da0(0x1a7)]){let _0x4c8719=0x0,_0x2b4a41=0x0;_0x49f8ef[_0x49f8ef[_0x4e1da0(0x1a7)]-_0x5808f3][_0x4e1da0(0x150)][_0x4e1da0(0x2d4)](_0x3d3b36=>{_0x2b4a41+=_0x3d3b36['number']*_0x3d3b36['price'];}),_0xddec2e[_0x54da24][_0x4e1da0(0x2bd)][_0x4e1da0(0x2d4)](_0x1b1756=>{const _0x17484d=_0x4e1da0;_0x4c8719+=_0x1b1756[_0x17484d(0x289)]*_0x1b1756[_0x17484d(0x18f)];}),_0x341c1c*=_0x4c8719/(_0x2b4a41-_0x4c8719)+0x1;}_0x54da24++;}}let _0x2e029e=0x0;_0x41b254[_0x4e1da0(0x150)][_0x4e1da0(0x2d4)](_0x799ac9=>{const _0x431198=_0x4e1da0;_0x2e029e+=_0x799ac9[_0x431198(0x289)]*_0x799ac9[_0x431198(0x18f)];}),_0x548649[_0x49f8ef[_0x4e1da0(0x1a7)]-_0x5808f3-0x1]=_0x2e029e*(_0x341c1c-0x1);});let _0xb427d=[];_0xddec2e=[...config[_0x19c975(0x1ea)]]||[];let _0x443ace=0x0;_0x54da24=0x0,_0x49f8ef[_0x19c975(0x2d4)]((_0x284a31,_0x2f0a2e)=>{const _0x42919f=_0x19c975;if(_0xddec2e[_0x54da24]){const _0x18301b=fns[_0x42919f(0x223)](_0xddec2e[_0x54da24][_0x42919f(0x246)],_0x42919f(0x2b4),new Date()),_0x4fa37f=fns[_0x42919f(0x223)](_0x284a31[_0x42919f(0x246)],_0x42919f(0x2b4),new Date());if(fns[_0x42919f(0x2bb)](_0x18301b,_0x4fa37f)){let _0x5f05ac=0x0;_0xddec2e[_0x54da24][_0x42919f(0x2bd)]['forEach'](_0x4ebb0c=>{const _0xa1dde5=_0x42919f;!_0xb427d[_0x4ebb0c[_0xa1dde5(0x2ab)]]?_0xb427d[_0x4ebb0c[_0xa1dde5(0x2ab)]]=_0x4ebb0c[_0xa1dde5(0x289)]:(_0x5f05ac=_0xb427d[_0x4ebb0c[_0xa1dde5(0x2ab)]],_0xb427d[_0x4ebb0c['coin']]+=_0x4ebb0c['number']);const _0x55102=_0x284a31[_0xa1dde5(0x150)][_0xa1dde5(0x297)](_0x490510=>_0x490510[_0xa1dde5(0x2ab)]==_0x4ebb0c[_0xa1dde5(0x2ab)]);(!_0x55102||_0x55102[_0xa1dde5(0x289)]==0x0)&&(_0x443ace+=(-_0x4ebb0c[_0xa1dde5(0x289)]-_0x5f05ac)*_0x4ebb0c[_0xa1dde5(0x18f)]);}),_0x54da24++;}}_0x284a31[_0x42919f(0x150)][_0x42919f(0x2d4)]((_0x462573,_0x10dbd9)=>{const _0x384d9a=_0x42919f;_0xb427d[_0x462573[_0x384d9a(0x2ab)]]&&(_0x462573[_0x384d9a(0x2b8)]=_0xb427d[_0x462573['coin']]);}),_0x367283[_0x42919f(0x230)]({'date':_0x284a31[_0x42919f(0x246)],'eur':_0x284a31[_0x42919f(0x215)],'usd':_0x284a31['usd'],'offset':_0x548649[_0x2f0a2e],'netoffset':_0x443ace,'coins':_0x284a31[_0x42919f(0x150)]});});}return _0x367283;}function emitPerformance(_0x52de70){const _0xf7c2f0=_0x1f537d;_0x52de70['length']!==0x0?(proxyEmit(_0xf7c2f0(0x277),_0x52de70),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5f05f0,_0x339f50){const _0x19a121=_0x1f537d;let _0x2853d7=0x0,_0x4f8318=0x0,_0x6f4b4=0x0;_0x5f05f0[_0x19a121(0x150)][_0x19a121(0x2d4)](_0x3861c9=>{const _0x278cdd=_0x19a121;_0x2853d7+=_0x3861c9['number']*_0x3861c9[_0x278cdd(0x18f)];});_0x339f50&&(_0x2853d7+=_0x5f05f0[_0x19a121(0x290)]);if(config[_0x19a121(0x192)]==='BTC'||config[_0x19a121(0x192)]===_0x19a121(0x1f1)||config[_0x19a121(0x192)]==='PAXG')_0x4f8318=_0x2853d7*_0x5f05f0[_0x19a121(0x215)],_0x6f4b4=_0x2853d7*_0x5f05f0[_0x19a121(0x1fe)];else{if(usdBasecoins[_0x19a121(0x1ed)](config[_0x19a121(0x192)]))_0x4f8318=_0x2853d7*_0x5f05f0[_0x19a121(0x215)]/_0x5f05f0[_0x19a121(0x1fe)],_0x6f4b4=_0x2853d7;else config[_0x19a121(0x192)]===_0x19a121(0x22f)&&(_0x4f8318=_0x2853d7,_0x6f4b4=_0x2853d7*_0x5f05f0[_0x19a121(0x1fe)]/_0x5f05f0['eur']);}return[_0x2853d7,_0x4f8318,_0x6f4b4];}function getKPIs(_0x317d62,_0x497850=_0x1f537d(0x22f)){const _0x78c86a=_0x1f537d,_0x4534df=config[_0x78c86a(0x192)],_0x42a7a5=lastBalances,_0x50992e=currentCoins,_0x24fa73=getNormalizedPerformance(),_0x5dd2f6=_0x317d62===_0x78c86a(0x192)?_0x4534df:_0x317d62===_0x78c86a(0x1df)||_0x317d62===_0x78c86a(0x2ba)?_0x497850:'Net\x20'+_0x4534df,_0x562ba8=_0x317d62===_0x78c86a(0x269)?_0x78c86a(0x293):_0x317d62==='net-fiat'?'Net\x20effect':_0x5dd2f6+'\x20value',_0x1c16d1=_0x317d62===_0x78c86a(0x269)||_0x317d62===_0x78c86a(0x2ba)?_0x78c86a(0x293):_0x5dd2f6+'\x20change';let _0x4b0096=0x0;_0x50992e['forEach'](_0x384110=>{const _0x3f0fc0=_0x78c86a;_0x4b0096+=_0x384110[_0x3f0fc0(0x289)]*_0x384110[_0x3f0fc0(0x268)];});if(_0x317d62===_0x78c86a(0x1df)||_0x317d62==='net-fiat'){if(_0x4534df==='BTC'||_0x4534df===_0x78c86a(0x1f1)||_0x4534df===_0x78c86a(0x13c))_0x4b0096=_0x4b0096*(_0x497850==='EUR'?_0x42a7a5[_0x78c86a(0x215)]:_0x42a7a5[_0x78c86a(0x1fe)]);else{if(usdBasecoins['includes'](_0x4534df))_0x4b0096=_0x4b0096*(_0x497850===_0x78c86a(0x22f)?_0x42a7a5[_0x78c86a(0x215)]/_0x42a7a5[_0x78c86a(0x1fe)]:0x1);else _0x4534df==='EUR'&&(_0x4b0096=_0x4b0096*(_0x497850===_0x78c86a(0x22f)?0x1:_0x42a7a5[_0x78c86a(0x1fe)]/_0x42a7a5[_0x78c86a(0x215)]));}}let _0x25276b;if(_0x4b0096!==0x0){if(_0x317d62===_0x78c86a(0x192))_0x25276b=(_0x4b0096/startingBalances[_0x78c86a(0x192)]-0x1)*0x64;else{if(_0x497850===_0x78c86a(0x22f))_0x25276b=(_0x4b0096/startingBalances['eur']-0x1)*0x64;else _0x25276b=(_0x4b0096/startingBalances['usd']-0x1)*0x64;}let _0x11c46a=0x0;if(startingBalances[_0x78c86a(0x150)])_0x50992e[_0x78c86a(0x2d4)](_0x568408=>{const _0x450659=_0x78c86a;let _0x110a05=startingBalances[_0x450659(0x150)][_0x450659(0x297)](_0x68c6c6=>_0x68c6c6['coin']===_0x568408[_0x450659(0x2ab)]);if(_0x110a05&&_0x110a05[_0x450659(0x2ab)]&&_0x568408[_0x450659(0x289)]!==0x0)_0x11c46a+=_0x110a05[_0x450659(0x289)]*_0x568408[_0x450659(0x268)];});let _0x412451=0x0;if(_0x24fa73[_0x78c86a(0x1a7)]!==0x0){let _0x79f474=_0x24fa73[_0x24fa73[_0x78c86a(0x1a7)]-0x1];_0x412451=_0x79f474[_0x78c86a(0x199)];}_0x11c46a-=_0x412451;_0x317d62==='net-basecoin'&&(_0x25276b=(_0x4b0096-_0x11c46a)/startingBalances[_0x78c86a(0x192)]*0x64,_0x4b0096=_0x4b0096-_0x11c46a);if(_0x317d62===_0x78c86a(0x2ba)){let _0x46e722=_0x497850===_0x78c86a(0x22f)?startingBalances[_0x78c86a(0x215)]:startingBalances[_0x78c86a(0x1fe)];if(_0x4534df==='BTC'||_0x4534df===_0x78c86a(0x1f1)||_0x4534df===_0x78c86a(0x13c))_0x11c46a=_0x497850===_0x78c86a(0x22f)?_0x11c46a*_0x42a7a5[_0x78c86a(0x215)]:_0x11c46a*_0x42a7a5['usd'];else{if(usdBasecoins[_0x78c86a(0x1ed)](_0x4534df))_0x11c46a=_0x497850===_0x78c86a(0x22f)?_0x11c46a*_0x42a7a5[_0x78c86a(0x215)]/_0x42a7a5[_0x78c86a(0x1fe)]:_0x11c46a;else _0x4534df===_0x78c86a(0x22f)&&(_0x11c46a=_0x497850===_0x78c86a(0x22f)?_0x11c46a:_0x11c46a*_0x42a7a5[_0x78c86a(0x1fe)]/_0x42a7a5[_0x78c86a(0x215)]);}_0x25276b=(_0x4b0096-_0x11c46a)/_0x46e722*0x64,_0x4b0096=_0x4b0096-_0x11c46a;}if(_0x25276b){if(_0x25276b<0x64)_0x25276b=_0x25276b[_0x78c86a(0x200)](0x2);else{if(_0x25276b<0x3e8)_0x25276b=_0x25276b['toFixed'](0x1);else _0x25276b=_0x25276b[_0x78c86a(0x200)](0x0);}}else _0x25276b=Number('0')[_0x78c86a(0x200)](0x2);if(_0x4b0096){if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0.000001)_0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x2);else{if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0.1)_0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x6);else{if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0x1)_0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x5);else{if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0xa)_0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x4);else{if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0x64)_0x4b0096=_0x4b0096['toFixed'](0x3);else{if(Math[_0x78c86a(0x1cf)](_0x4b0096)<0x3e8)_0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x2);else _0x4b0096=_0x4b0096[_0x78c86a(0x200)](0x2);}}}}}}else _0x4b0096=Number('0')[_0x78c86a(0x200)](0x2);}else _0x25276b=Number('0')[_0x78c86a(0x200)](0x2);return{'value':_0x4b0096,'change':_0x25276b,'leftTxt':_0x562ba8,'rightTxt':_0x1c16d1};}async function getStartingBalances(_0x160a07,_0x12fa61=!![]){const _0x2f8c28=_0x1f537d;if(_0x160a07[_0x2f8c28(0x1a7)]!==0x0){const [_0x3a874b,_0x3fc5e9,_0x4689d9]=getPerf(_0x160a07[0x0],!![]);let _0x56e3bb=[];config[_0x2f8c28(0x146)]['forEach'](_0x2a22af=>{const _0x539d50=_0x2f8c28;let _0x38d44d=0x0,_0x58ce9b;config[_0x539d50(0x1ea)][_0x539d50(0x2d4)](_0x21fc21=>{const _0x21347f=_0x539d50;let _0x374962=_0x21fc21['changes']['find'](_0x2b526c=>_0x2b526c['coin']==_0x2a22af[_0x21347f(0x2ab)]);if(_0x374962){_0x38d44d+=_0x374962[_0x21347f(0x289)];if(!_0x58ce9b)_0x58ce9b=_0x374962[_0x21347f(0x18f)];}}),_0x56e3bb[_0x539d50(0x230)]({'coin':_0x2a22af[_0x539d50(0x2ab)],'number':_0x38d44d,'initialprice':_0x58ce9b});});const _0x25b4d4={'basecoin':_0x3a874b,'eur':_0x3fc5e9,'usd':_0x4689d9,'coins':_0x56e3bb};if(_0x12fa61)proxyEmit(_0x2f8c28(0x295),_0x25b4d4);startingBalances=_0x25b4d4;}}function headlessMode(_0xed121a){const _0x494973=_0x1f537d;let _0x19d826=_0xed121a[_0x494973(0x146)],_0x44ff7d=_0xed121a[_0x494973(0x1e2)],_0xb29062=[];for(let _0xb0598c of _0x19d826){if(_0xb0598c[_0x494973(0x2ab)]!=config['basecoin']){if(_0xb0598c[_0x494973(0x1b4)]>=_0x44ff7d/0x64){if(_0xb0598c[_0x494973(0x1d5)])_0xb29062[_0x494973(0x230)](_0xb0598c);}else{if(_0xb0598c[_0x494973(0x1b4)]<=-_0x44ff7d/0x64){if(_0xb0598c['valid'])_0xb29062['push'](_0xb0598c);}}}}_0xb29062['length']>0x0&&(lockOrders==ORDERS[_0x494973(0x1f8)]&&!coolingDown&&_0xb29062[_0x494973(0x2d4)](_0x39db78=>{const _0x57e64f=_0x494973;logger[_0x57e64f(0x240)]('Trigger:\x20'+_0x39db78[_0x57e64f(0x2ab)]+'\x20'+_0x39db78['number']+'\x20'+_0x39db78[_0x57e64f(0x268)]+'\x20'+_0x39db78[_0x57e64f(0x260)]+'%\x20'+_0x39db78[_0x57e64f(0x14d)]+'%\x20'+(0x64*_0x39db78['delta'])[_0x57e64f(0x200)](0x2)+_0x57e64f(0x29f)+_0x44ff7d['toFixed'](0x2)+'%)');}),placeOrder(_0xb29062));}function notifyBalance(_0x5df8da){const _0x3d7bd7=_0x1f537d;let _0x56649b=_0x5df8da[_0x3d7bd7(0x146)],_0x2b83e6=_0x5df8da['threshold'],_0x1efef6=[];for(let _0x245dd1 of _0x56649b){if(_0x245dd1[_0x3d7bd7(0x2ab)]!=config[_0x3d7bd7(0x192)]){if(_0x245dd1[_0x3d7bd7(0x1b4)]>=_0x2b83e6/0x64){if(_0x245dd1[_0x3d7bd7(0x1d5)])_0x1efef6[_0x3d7bd7(0x230)](_0x245dd1);}else{if(_0x245dd1[_0x3d7bd7(0x1b4)]<=-_0x2b83e6/0x64){if(_0x245dd1[_0x3d7bd7(0x1d5)])_0x1efef6[_0x3d7bd7(0x230)](_0x245dd1);}}}}if(_0x1efef6[_0x3d7bd7(0x1a7)]>0x0){let _0x45debe=_0x1efef6['map'](_0x5c998b=>_0x5c998b[_0x3d7bd7(0x2ab)]);_0x45debe[_0x3d7bd7(0x216)]();let _0x394195=_0x45debe[_0x3d7bd7(0x27f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3d7bd7(0x2a9),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x394195;}}function symbolToCoin(_0x25616d){const _0xefccec=_0x1f537d;let _0x38f668;if(_0x25616d[_0xefccec(0x1ed)]('/'+config[_0xefccec(0x192)]))_0x38f668=_0x25616d[_0xefccec(0x2d5)]('/'+config['basecoin'],'');if(_0x25616d[_0xefccec(0x1ed)](config['basecoin']+'/'))_0x38f668=_0x25616d[_0xefccec(0x2d5)](config[_0xefccec(0x192)]+'/','');return _0x38f668;}async function unlockOrders(){const _0x2d0fd9=_0x1f537d;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x2d0fd9(0x25e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x13233a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x13233a,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x2d0fd9(0x1d3));}}async function validateOrders(_0x73ebe8){const _0x5f0eb4=_0x1f537d;if(_0x73ebe8)validateOrdersState=_0x73ebe8;logger[_0x5f0eb4(0x240)](_0x5f0eb4(0x219)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x5f0eb4(0x274)));let _0x33d973=[],_0x4774a7=config[_0x5f0eb4(0x294)]==_0x5f0eb4(0x2ca)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5f0eb4(0x21d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5f0eb4(0x280)])return;logger[_0x5f0eb4(0x240)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x5f0eb4(0x2d4)](_0x28a1d1=>{const _0x37fe38=_0x5f0eb4;let _0x237419=![];_0x28a1d1[_0x37fe38(0x21f)]>0x0&&(_0x237419=!![]),_0x33d973['push'](_0x237419),_0x237419&&config[_0x37fe38(0x294)]!='market'&&logHistory(_0x37fe38(0x1ff),_0x37fe38(0x25a)+_0x28a1d1[_0x37fe38(0x217)]+'\x20'+_0x28a1d1[_0x37fe38(0x1aa)]+'\x20#'+formatResult(_0x28a1d1[_0x37fe38(0x21f)],0x8)+'\x20@'+formatResult(_0x28a1d1[_0x37fe38(0x18f)],0x8));}),_0x33d973['forEach']((_0x42e584,_0x46ff79)=>{const _0x37146a=_0x5f0eb4;if(_0x42e584)lastOrders[_0x37146a(0x224)](_0x46ff79,0x1);}),persistOpenOrders(lastOrders);const _0xc2c0de=coolingDown?_0x5f0eb4(0x1b1):_0x5f0eb4(0x143);if(validateOrdersState==_0x5f0eb4(0x2b8)){validateOrdersState=_0x5f0eb4(0x13b);if(_0x33d973[_0x5f0eb4(0x1ed)](![])){if(config[_0x5f0eb4(0x294)]==_0x5f0eb4(0x2ca)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5f0eb4(0x13b)){if(_0x33d973[_0x5f0eb4(0x1ed)](![])){}else{if(allOrdersPlaced){if(config[_0x5f0eb4(0x294)]==_0x5f0eb4(0x2ca)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x33d973[_0x5f0eb4(0x1ed)](![])&&(config['ordertype']==_0x5f0eb4(0x2ca)?logHistory('success',_0x5f0eb4(0x176)+Math[_0x5f0eb4(0x178)](_0x4774a7*validateOrderInterval/0xea60)+_0x5f0eb4(0x158)+_0xc2c0de):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5f0eb4(0x178)](_0x4774a7*validateOrderInterval/0xea60)+_0x5f0eb4(0x158)+_0xc2c0de))),await unlockOrders();else{if(validateOrdersState==_0x5f0eb4(0x254)){if(config[_0x5f0eb4(0x294)]!=_0x5f0eb4(0x2ca))logHistory(_0x5f0eb4(0x285),_0x5f0eb4(0x2bf)+_0xc2c0de);await unlockOrders();}}}}}async function cancelOrders(){const _0x409702=_0x1f537d;lastOrders[_0x409702(0x2d4)](async _0x574835=>{const _0x40b2b6=_0x409702;try{const _0x2a0812=await exchange[_0x40b2b6(0x243)](_0x574835[_0x40b2b6(0x239)],_0x574835[_0x40b2b6(0x217)]);}catch(_0x154d79){if(_0x154d79[_0x40b2b6(0x1d1)]()[_0x40b2b6(0x1ed)](_0x40b2b6(0x16f))){}else await handleError(_0x154d79,_0x40b2b6(0x1c1));}});}async function initCoinResults(_0x16a034){const _0x41441f=_0x1f537d;_0x16a034?logger[_0x41441f(0x240)](_0x41441f(0x13a)+_0x16a034):logger[_0x41441f(0x240)](_0x41441f(0x256)),config['portfolio'][_0x41441f(0x2d4)](_0x2c4861=>{const _0x4eea62=_0x41441f;if(!_0x2c4861[_0x4eea62(0x16b)]&&_0x2c4861[_0x4eea62(0x2ab)]!=config[_0x4eea62(0x192)]){const _0x42a838=currentCoins[_0x4eea62(0x297)](_0x532aea=>_0x532aea[_0x4eea62(0x2ab)]==_0x2c4861[_0x4eea62(0x2ab)]),_0x1bc449=global[_0x4eea62(0x28a)][noslash(_0x2c4861[_0x4eea62(0x217)])];let _0x2b8503=_0x42a838?_0x42a838[_0x4eea62(0x289)]:null,_0x2b6268=_0x2c4861[_0x4eea62(0x261)]?0x1/_0x1bc449:_0x1bc449,_0x497290;config['liquidity'][_0x4eea62(0x2d4)](_0x4c7324=>{const _0x5c7720=_0x4eea62;!_0x497290&&(_0x497290=_0x4c7324[_0x5c7720(0x2bd)][_0x5c7720(0x297)](_0x1f9358=>_0x1f9358[_0x5c7720(0x2ab)]==_0x2c4861[_0x5c7720(0x2ab)]),_0x497290&&(_0x2b8503=_0x497290[_0x5c7720(0x289)],_0x2b6268=_0x497290[_0x5c7720(0x18f)]));});let _0x300bfc=dbCoinResults[_0x4eea62(0x236)](_0x4eea62(0x150))[_0x4eea62(0x297)]({'coin':_0x2c4861['coin']})[_0x4eea62(0x2af)]();if(!_0x300bfc){const _0x1edf3e={'coin':_0x2c4861[_0x4eea62(0x2ab)],'number':_0x2b8503,'breakeven':_0x2b6268,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4eea62(0x150))['push'](_0x1edf3e)['write']();}else{if(_0x16a034&&_0x2c4861[_0x4eea62(0x2ab)]==_0x16a034){const _0x18c99c={'coin':_0x2c4861[_0x4eea62(0x2ab)],'number':_0x2b8503,'breakeven':_0x2b6268,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4eea62(0x236)](_0x4eea62(0x150))['find']({'coin':_0x2c4861[_0x4eea62(0x2ab)]})[_0x4eea62(0x198)](_0x18c99c)['write']();}}}});}async function updateCoinResults(_0x29db7f,_0x3f6662=![]){const _0xeea151=_0x1f537d;let _0x15257c,_0x12f156,_0x29773b,_0x2e3b6c,_0x348331,_0x41fb77,_0x4a7df8=dbCoinResults[_0xeea151(0x236)](_0xeea151(0x150))[_0xeea151(0x297)]({'coin':_0x29db7f[_0xeea151(0x2ab)]})[_0xeea151(0x2af)](),_0x3c0459=![];_0x4a7df8&&Object[_0xeea151(0x15a)](_0x4a7df8)[_0xeea151(0x2d4)](([_0x492a91,_0x35c7db])=>{if(_0x35c7db==null)_0x3c0459=!![];});(!_0x4a7df8||_0x3c0459)&&(await initCoinResults(_0x29db7f['coin']),_0x4a7df8=dbCoinResults['get'](_0xeea151(0x150))[_0xeea151(0x297)]({'coin':_0x29db7f['coin']})[_0xeea151(0x2af)]());_0x29db7f[_0xeea151(0x261)]&&(_0x41fb77={'filled':_0x29db7f[_0xeea151(0x21f)]*_0x29db7f[_0xeea151(0x18f)],'amount':_0x29db7f[_0xeea151(0x21f)]*_0x29db7f[_0xeea151(0x18f)],'side':_0x29db7f['side']==_0xeea151(0x17c)?_0xeea151(0x194):_0xeea151(0x17c),'price':0x1/_0x29db7f[_0xeea151(0x18f)]},_0x29db7f={..._0x29db7f,..._0x41fb77});_0x3f6662?_0x12f156=_0x29db7f[_0xeea151(0x1aa)]==_0xeea151(0x194)?_0x4a7df8[_0xeea151(0x289)]+_0x29db7f['filled']:_0x4a7df8['number']-_0x29db7f['filled']:_0x12f156=await getCoinNumber(_0x29db7f[_0xeea151(0x2ab)]);if(_0x29db7f[_0xeea151(0x21a)]&&_0x29db7f[_0xeea151(0x21a)][_0xeea151(0x237)]==config[_0xeea151(0x192)])_0x15257c=_0x29db7f[_0xeea151(0x21a)]['cost'];else{if(_0x29db7f['fee']&&_0x29db7f[_0xeea151(0x21a)][_0xeea151(0x237)]=='BNB'&&!_0x3f6662&&config[_0xeea151(0x192)]!=_0xeea151(0x13c))_0x15257c=_0x29db7f[_0xeea151(0x21a)][_0xeea151(0x214)]*global[_0xeea151(0x28a)][_0xeea151(0x173)+config[_0xeea151(0x192)]];else _0x15257c=defaultFee*_0x29db7f[_0xeea151(0x21f)]*_0x29db7f[_0xeea151(0x18f)];}_0x29db7f[_0xeea151(0x1aa)]==_0xeea151(0x194)?(_0x29773b=_0x12f156!=0x0?(_0x4a7df8['breakeven']*_0x4a7df8[_0xeea151(0x289)]+_0x29db7f[_0xeea151(0x18f)]*(_0x12f156-_0x4a7df8[_0xeea151(0x289)])+_0x15257c)/_0x12f156:0x0,_0x2e3b6c=_0x4a7df8[_0xeea151(0x29e)]):(_0x29773b=_0x12f156!=0x0?(_0x4a7df8[_0xeea151(0x23d)]*_0x4a7df8[_0xeea151(0x289)]-_0x29db7f[_0xeea151(0x18f)]*(_0x4a7df8['number']-_0x12f156)+_0x15257c)/_0x12f156:0x0,_0x2e3b6c=_0x4a7df8[_0xeea151(0x29e)]+(_0x29db7f[_0xeea151(0x18f)]-_0x4a7df8[_0xeea151(0x23d)])*_0x29db7f[_0xeea151(0x21f)]);_0x348331=(_0x29db7f['price']-_0x29773b-_0x15257c/_0x29db7f[_0xeea151(0x21f)])*_0x12f156;let _0x1a164a={'coin':_0x29db7f[_0xeea151(0x2ab)],'number':_0x12f156,'breakeven':formatResult(_0x29773b,0x8),'realized':formatResult(_0x2e3b6c,0x8),'unrealized':formatResult(_0x348331,0x8),'fees':formatResult(_0x4a7df8[_0xeea151(0x273)]+_0x15257c,0x8),'sells':_0x29db7f[_0xeea151(0x1aa)]==_0xeea151(0x17c)?_0x4a7df8['sells']+0x1:_0x4a7df8[_0xeea151(0x298)],'buys':_0x29db7f[_0xeea151(0x1aa)]=='buy'?_0x4a7df8[_0xeea151(0x22b)]+0x1:_0x4a7df8['buys']};dbCoinResults['get'](_0xeea151(0x150))[_0xeea151(0x297)]({'coin':_0x29db7f[_0xeea151(0x2ab)]})['assign'](_0x1a164a)[_0xeea151(0x1d0)]();if(!_0x3f6662){if(_0x29db7f[_0xeea151(0x21a)]&&_0x29db7f['fee'][_0xeea151(0x237)]==_0xeea151(0x173)){const _0x562dc1=currentCoins[_0xeea151(0x297)](_0x31c676=>_0x31c676['coin']==_0xeea151(0x173));if(_0x562dc1){let _0x4af9a3=dbCoinResults['get']('coins')[_0xeea151(0x297)]({'coin':_0xeea151(0x173)})[_0xeea151(0x2af)]();_0x1a164a={..._0x4af9a3,'number':_0x562dc1[_0xeea151(0x289)]},dbCoinResults[_0xeea151(0x236)](_0xeea151(0x150))[_0xeea151(0x297)]({'coin':_0xeea151(0x173)})[_0xeea151(0x198)](_0x1a164a)['write']();}}}}async function placeOrder(_0x3295fe){const _0x4bffde=_0x1f537d,_0x2fb0d1=config['ordertype']==_0x4bffde(0x2ca)?'market':_0x4bffde(0x21e);if(lockOrders==ORDERS[_0x4bffde(0x1f8)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4bffde(0x280)],allOrdersPlaced=![],validateOrdersState='initial';let _0x37e7e0=![];lastOrders=[];for(const _0x2fd357 of _0x3295fe){let _0x4f41e1,_0x1d3962,_0x568522,_0x1fc114,_0x488cef,_0x5d8c10=_0x2fd357[_0x4bffde(0x217)];try{const _0x140378=await exchange[_0x4bffde(0x18e)](_0x5d8c10);_0x4f41e1=_0x2fd357[_0x4bffde(0x261)]?0x1/_0x2fd357[_0x4bffde(0x268)]:_0x2fd357[_0x4bffde(0x268)],_0x1d3962=_0x140378[_0x4bffde(0x175)],_0x568522=_0x140378[_0x4bffde(0x144)];_0x2fd357[_0x4bffde(0x261)]?(_0x1fc114=_0x2fd357['side']==_0x4bffde(0x194)?_0x4bffde(0x17c):_0x4bffde(0x194),_0x488cef=Math[_0x4bffde(0x1cf)](_0x2fd357[_0x4bffde(0x2ce)])/_0x4f41e1):(_0x1fc114=_0x2fd357['side'],_0x488cef=Math[_0x4bffde(0x1cf)](_0x2fd357['trade']));_0x2fb0d1==_0x4bffde(0x21e)&&(config[_0x4bffde(0x294)]==_0x4bffde(0x29a)&&(_0x4f41e1=_0x1fc114==_0x4bffde(0x194)?_0x1d3962:_0x568522),config[_0x4bffde(0x294)]=='limit-low'&&(_0x4f41e1=_0x1fc114==_0x4bffde(0x194)?_0x568522:_0x1d3962));_0x488cef=formatResult(_0x488cef,0x8),_0x4f41e1=formatResult(_0x4f41e1,0x8);const _0x5999fc=_0x1fc114=='sell'?config[_0x4bffde(0x15e)]?String[_0x4bffde(0x2a8)]('0x'+config[_0x4bffde(0x15e)])+'\x20':'':config[_0x4bffde(0x193)]?String['fromCodePoint']('0x'+config[_0x4bffde(0x193)])+'\x20':'',_0x305980=_0x2fb0d1==_0x4bffde(0x2ca)?'Market':config['ordertype']==_0x4bffde(0x29a)?_0x4bffde(0x13e):_0x4bffde(0x138),_0x5638cf=(Math[_0x4bffde(0x15d)](Math[_0x4bffde(0x17e)]()*0x35a4e900)+0x5f5e100)[_0x4bffde(0x1d1)]();lastOrders[_0x4bffde(0x230)]({'customId':_0x5638cf,'symbol':_0x5d8c10,'coin':_0x2fd357['coin'],'amount':_0x488cef,'price':_0x4f41e1,'side':_0x1fc114,'reverse':_0x2fd357[_0x4bffde(0x261)],'filled':0x0});if(_0x2fb0d1==_0x4bffde(0x2ca))logHistory(_0x4bffde(0x1ff),''+_0x5999fc+_0x305980+_0x4bffde(0x169)+_0x5d8c10+'\x20'+_0x1fc114+'\x20#'+formatResult(_0x488cef,0x8)+'\x20@'+formatResult(_0x4f41e1,0x8));else logHistory(_0x4bffde(0x1ff),''+_0x5999fc+_0x305980+_0x4bffde(0x169)+_0x5d8c10+'\x20'+_0x1fc114+'\x20#'+formatResult(_0x488cef,0x8)+'\x20@'+formatResult(_0x4f41e1,0x8));let _0x117f63;_0x2fb0d1=='market'?_0x1fc114=='buy'&&['Bybit','Bitget',_0x4bffde(0x27a),_0x4bffde(0x226),_0x4bffde(0x1a5)][_0x4bffde(0x1ed)](config[_0x4bffde(0x1a3)])?_0x117f63=await exchange[_0x4bffde(0x18d)](_0x5d8c10,_0x2fb0d1,_0x1fc114,_0x488cef,_0x4f41e1):_0x117f63=await exchange[_0x4bffde(0x18d)](_0x5d8c10,_0x2fb0d1,_0x1fc114,_0x488cef,undefined):_0x117f63=await exchange[_0x4bffde(0x18d)](_0x5d8c10,_0x2fb0d1,_0x1fc114,_0x488cef,_0x4f41e1);logger[_0x4bffde(0x240)](_0x4bffde(0x14c)+_0x117f63['id']+_0x4bffde(0x180)+_0x5638cf);const _0x3e28bc=lastOrders[_0x4bffde(0x1a7)]-0x1;if(_0x3e28bc>=0x0&&lastOrders[_0x3e28bc]['customId']==_0x5638cf){lastOrders[_0x3e28bc][_0x4bffde(0x239)]=_0x117f63['id'];if(_0x117f63[_0x4bffde(0x27b)])lastOrders[_0x3e28bc][_0x4bffde(0x27b)]=_0x117f63[_0x4bffde(0x27b)];if(_0x117f63[_0x4bffde(0x18f)])lastOrders[_0x3e28bc][_0x4bffde(0x18f)]=_0x117f63[_0x4bffde(0x18f)];lastOrders[_0x3e28bc][_0x4bffde(0x21a)]=_0x117f63[_0x4bffde(0x21a)];}if(config[_0x4bffde(0x1b6)]!=0x0){let _0x521330=null;if(cooldownTracker['length']==config[_0x4bffde(0x1b6)]-0x1)_0x521330=cooldownTracker[_0x4bffde(0x278)]();const _0x14017f=getTimeStamp();cooldownTracker[_0x4bffde(0x230)](_0x14017f);if(_0x521330){const _0x4c625d=fns[_0x4bffde(0x20e)](new Date(_0x14017f),new Date(_0x521330));if(_0x4c625d<cooldownInterval){logHistory(_0x4bffde(0x206),_0x4bffde(0x25b)+config[_0x4bffde(0x1b6)]+_0x4bffde(0x183)+cooldownInterval/0x3c+_0x4bffde(0x1a1)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x232af4){if(_0x232af4[_0x4bffde(0x1d1)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4bffde(0x142)](_0x34dc78=>_0x34dc78[_0x4bffde(0x217)]!=_0x5d8c10),logHistory(_0x4bffde(0x206),_0x4bffde(0x1a8)+_0x5d8c10),_0x37e7e0=!![];else{if(_0x232af4[_0x4bffde(0x1d1)]()[_0x4bffde(0x1ed)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x4bffde(0x142)](_0x3e60d4=>_0x3e60d4[_0x4bffde(0x217)]!=_0x5d8c10),logHistory(_0x4bffde(0x206),_0x4bffde(0x21b)+_0x5d8c10),_0x37e7e0=!![];else{if(_0x232af4[_0x4bffde(0x1d1)]()[_0x4bffde(0x1ed)](_0x4bffde(0x1e5)))lastOrders=lastOrders[_0x4bffde(0x142)](_0x357420=>_0x357420[_0x4bffde(0x217)]!=_0x5d8c10),logHistory(_0x4bffde(0x206),'Order\x20is\x20invalid:\x20'+_0x5d8c10),logger['debug'](_0x232af4),_0x37e7e0=!![];else _0x232af4[_0x4bffde(0x1d1)]()[_0x4bffde(0x1ed)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4bffde(0x142)](_0xa81753=>_0xa81753[_0x4bffde(0x217)]!=_0x5d8c10),logHistory('error',_0x4bffde(0x1a8)+_0x5d8c10),_0x37e7e0=!![]):(lastOrders=lastOrders[_0x4bffde(0x142)](_0x258dc9=>_0x258dc9[_0x4bffde(0x217)]!=_0x5d8c10),await handleError(_0x232af4,_0x4bffde(0x149),_0x5d8c10));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4bffde(0x1a7)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x11f7d3=config[_0x4bffde(0x294)]==_0x4bffde(0x2ca)?validateOrderTimeout*0x3c*0x3e8:config[_0x4bffde(0x21d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xf87ce3=_0x4bffde;validateOrders(_0xf87ce3(0x258));},_0x11f7d3);}else unlockOrders();_0x37e7e0&&config[_0x4bffde(0x25d)]&&(logHistory(_0x4bffde(0x206),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4bffde(0x285),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4bffde(0x25d)]&&logHistory('error',_0x4bffde(0x23f));else lockOrders!=ORDERS[_0x4bffde(0x1f8)]&&(!config[_0x4bffde(0x25d)]&&(config['ordertype']==_0x4bffde(0x2ca)?logHistory(_0x4bffde(0x206),_0x4bffde(0x24d)):logHistory(_0x4bffde(0x206),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x18034f){const _0x2c3695=_0x1f537d,_0x283cb6={...config,'openOrders':_0x18034f};let _0x25c217=dbConfig[_0x2c3695(0x236)](_0x2c3695(0x15c))[_0x2c3695(0x297)]({'botID':botID})[_0x2c3695(0x2af)]();_0x25c217&&dbConfig[_0x2c3695(0x236)](_0x2c3695(0x15c))['find']({'botID':botID})[_0x2c3695(0x198)](_0x283cb6)[_0x2c3695(0x1d0)]();}function restoreOrders(){const _0x5ec29c=_0x1f537d;let _0x5d4b9b;config[_0x5ec29c(0x234)]&&allOpenOrders[_0x5ec29c(0x2d4)](_0x52d439=>{const _0x2ef6d5=_0x5ec29c,_0xbb435f=config['openOrders']['find'](_0x400bee=>_0x400bee[_0x2ef6d5(0x239)]==_0x52d439['id']);_0xbb435f&&(lastOrders[_0x2ef6d5(0x230)](_0xbb435f),_0x5d4b9b=_0x52d439[_0x2ef6d5(0x2a3)]);});if(lastOrders[_0x5ec29c(0x1a7)]>0x0){lockOrders=ORDERS[_0x5ec29c(0x280)],validateOrdersState=_0x5ec29c(0x13b),allOrdersPlaced=!![];const _0x39bc3f=new Date()['getTime'](),_0x10e1e9=config[_0x5ec29c(0x294)]==_0x5ec29c(0x2ca)?validateOrderTimeout*0x3c*0x3e8:config[_0x5ec29c(0x21d)]*0x3c*0x3e8;if(_0x5d4b9b+_0x10e1e9>_0x39bc3f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5d4b9b+_0x10e1e9-_0x39bc3f);}else validateOrders(_0x5ec29c(0x258));}}async function sendMetricsTelegram(){const _0x2fe6ee=_0x1f537d;if(!coinsLoaded){process[_0x2fe6ee(0x1ac)]({'telegrammsg':_0x2fe6ee(0x19b)},_0x1baff7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x34e46e='';if(config[_0x2fe6ee(0x1c7)])_0x34e46e='<b>'+config[_0x2fe6ee(0x266)]+_0x2fe6ee(0x275);else _0x34e46e=_0x2fe6ee(0x181)+botID+_0x2fe6ee(0x275);const _0x1ec59b=getKPIs(_0x2fe6ee(0x192)),_0x47c549=getKPIs(_0x2fe6ee(0x1df),config[_0x2fe6ee(0x1df)]),_0x552db4=getKPIs(_0x2fe6ee(0x269)),_0x284d84=getKPIs(_0x2fe6ee(0x2ba),config['fiat']);_0x34e46e+=_0x2fe6ee(0x2c3),_0x34e46e+=_0x1ec59b[_0x2fe6ee(0x26d)]+_0x2fe6ee(0x276)+_0x1ec59b[_0x2fe6ee(0x2af)]+'\x0a',_0x34e46e+=_0x1ec59b[_0x2fe6ee(0x296)]+':\x20'+_0x1ec59b[_0x2fe6ee(0x15f)]+'%\x0a',_0x34e46e+=_0x47c549[_0x2fe6ee(0x26d)]+'\x20:\x20'+_0x47c549[_0x2fe6ee(0x2af)]+'\x0a',_0x34e46e+=_0x47c549[_0x2fe6ee(0x296)]+':\x20'+_0x47c549['change']+'%\x0a',_0x34e46e+=_0x552db4[_0x2fe6ee(0x26d)]+':\x20'+_0x552db4[_0x2fe6ee(0x2af)]+'\x20('+config[_0x2fe6ee(0x192)]+')\x0a',_0x34e46e+=_0x552db4['rightTxt']+':\x20'+_0x552db4['change']+_0x2fe6ee(0x29f)+config[_0x2fe6ee(0x192)]+')\x0a',_0x34e46e+=_0x284d84[_0x2fe6ee(0x26d)]+':\x20'+_0x284d84[_0x2fe6ee(0x2af)]+'\x20('+config['fiat']+')\x0a',_0x34e46e+=_0x284d84['rightTxt']+':\x20'+_0x284d84['change']+_0x2fe6ee(0x29f)+config['fiat']+')\x0a',_0x34e46e+='</pre>',process['send']({'telegrammsg':_0x34e46e},_0x18bd66=>{});}async function sendPortfolioTelegram(){const _0x5a7483=_0x1f537d;if(!coinsLoaded){process[_0x5a7483(0x1ac)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4ed524=>{});return;}let _0x3deaef='';if(config[_0x5a7483(0x1c7)])_0x3deaef='<b>'+config[_0x5a7483(0x266)]+_0x5a7483(0x218);else _0x3deaef=_0x5a7483(0x181)+botID+_0x5a7483(0x218);_0x3deaef+=_0x5a7483(0x2c3),_0x3deaef+=_0x5a7483(0x2b1),_0x3deaef+=_0x5a7483(0x166),_0x3deaef+='-------------------------------\x0a',currentCoins[_0x5a7483(0x2d4)](_0x4ff023=>{const _0x1d9986=_0x5a7483;_0x3deaef+=_0x4ff023[_0x1d9986(0x2ab)][_0x1d9986(0x2bc)](0x7)+'|\x20'+formatPad(_0x4ff023[_0x1d9986(0x260)],0x2,0x6)+'|\x20'+formatPad(_0x4ff023[_0x1d9986(0x14d)],0x2,0x6)+'|\x20'+formatPad(_0x4ff023[_0x1d9986(0x1b4)]*0x64,0x2,0x6)+'\x0a';}),_0x3deaef+=_0x5a7483(0x264),process[_0x5a7483(0x1ac)]({'telegrammsg':_0x3deaef},_0x38a283=>{});}function formatPad(_0x2561ba,_0x8e5725,_0x1c9729){const _0x3bee9e=_0x1f537d,_0x25a0bf=formatResultString(_0x2561ba,_0x8e5725);return _0x25a0bf?_0x25a0bf['padStart'](_0x1c9729):''[_0x3bee9e(0x272)](_0x1c9729);}function logHistory(_0x1d886f,_0x4cb594,_0x2eb1b8=''){const _0x45af30=_0x1f537d;logger[_0x45af30(0x1bb)](''+_0x4cb594);let _0x5b976={'time':getTimeStamp(),'type':_0x1d886f,'event':_0x4cb594};dbLogs[_0x45af30(0x236)](_0x45af30(0x24a))[_0x45af30(0x230)](_0x5b976)[_0x45af30(0x1d0)]();if(_0x2eb1b8=='')_0x2eb1b8=_0x4cb594;proxyEmit(_0x45af30(0x229),{'log':_0x5b976,'summary':_0x2eb1b8}),process[_0x45af30(0x1ac)]({'telegram':{..._0x5b976,'botname':config[_0x45af30(0x266)],'showname':config[_0x45af30(0x1c7)]}},_0x1daecd=>{});}function emitHistory(_0x5c5e40={}){const _0x54808d=_0x1f537d;Object['keys'](_0x5c5e40)[_0x54808d(0x1a7)]==0x0&&(_0x5c5e40={'type':['order',_0x54808d(0x229)],'event':'','page':0x1});if(_0x5c5e40['type'][_0x54808d(0x1ed)]('event'))_0x5c5e40['type'][_0x54808d(0x224)](_0x5c5e40[_0x54808d(0x1b9)][_0x54808d(0x2c8)](_0x54808d(0x229)),0x1,_0x54808d(0x206),'warning',_0x54808d(0x285));if(dbLogs[_0x54808d(0x151)]('logs')[_0x54808d(0x2af)]()){let _0x32a491=dbLogs['get'](_0x54808d(0x24a))['filter'](_0x1a7125=>{const _0x5ac909=_0x54808d;if(_0x5c5e40['type']['length']==0x0)return![];else return _0x5c5e40['type'][_0x5ac909(0x1ed)](_0x1a7125[_0x5ac909(0x1b9)]);})[_0x54808d(0x142)](_0x513565=>{const _0x52301b=_0x54808d;if(_0x5c5e40[_0x52301b(0x229)]=='')return!![];else return _0x513565[_0x52301b(0x229)]['toLowerCase']()[_0x52301b(0x1ed)](_0x5c5e40[_0x52301b(0x229)][_0x52301b(0x1fb)]());})[_0x54808d(0x2b5)](_0x54808d(0x2c0)),_0x449c1f=_0x32a491[_0x54808d(0x2af)]()[_0x54808d(0x1a7)];_0x32a491=_0x32a491['reverse']()['slice']((_0x5c5e40[_0x54808d(0x15b)]-0x1)*logPageSize,_0x5c5e40[_0x54808d(0x15b)]*logPageSize-0x1)[_0x54808d(0x261)]()[_0x54808d(0x2af)](),proxyEmit(_0x54808d(0x262),{'logs':_0x32a491,'total':_0x449c1f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x28e59d){const _0x189295=_0x1f537d;if(dbLogs['has']('logs')[_0x189295(0x2af)]()){const _0x3793ed=dbLogs[_0x189295(0x236)](_0x189295(0x24a))[_0x189295(0x2b5)](_0x189295(0x2c0))[_0x189295(0x142)](_0x14a511=>{return _0x14a511['type']=='order';})[_0x189295(0x2af)]();dbLogs[_0x189295(0x236)]('logs')['remove']()[_0x189295(0x1d0)](),dbLogs[_0x189295(0x236)](_0x189295(0x24a))['assign'](_0x3793ed)['write'](),emitHistory(_0x28e59d);}}async function pauseBot(_0x5bfd53=pauseBotInterval){const _0x3d0596=_0x1f537d,_0x29e928=new Date()[_0x3d0596(0x1e9)]();if(!lastErrorShown||_0x29e928-lastErrorShown>=_0x5bfd53){lastErrorShown=_0x29e928;!lastBotPause?(lastBotPause=_0x29e928,consecutivePauses=0x1):(_0x29e928-lastBotPause-_0x5bfd53<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3d0596(0x1ac)]({'stop':'restart'},_0xcb32fb=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3d0596(0x1e9)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x5bfd53),botPaused=![],reset(!![]);}}}async function killBot(){const _0x428fca=_0x1f537d;botPaused=!![],await sleep(0x3e8),process[_0x428fca(0x1ac)]({'stop':_0x428fca(0x22c)},_0x5559fc=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3b905d,_0x28f1c6){const _0x181aef=_0x1f537d;if(botPaused)return;const _0x43d9ae=config[_0x181aef(0x1a3)]||_0x181aef(0x1ba);if(_0x28f1c6)logger[_0x181aef(0x240)](_0x181aef(0x265)+_0x28f1c6);const _0x378829=()=>{const _0x29ebb9=_0x181aef;loading[_0x29ebb9(0x206)]=!![],emitLoadingProgress();};if(_0x3b905d[_0x181aef(0x1d1)]()['includes'](_0x181aef(0x197)))logHistory(_0x181aef(0x206),_0x43d9ae+_0x181aef(0x207)),_0x378829();else{if(_0x3b905d[_0x181aef(0x1d1)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x43d9ae+_0x181aef(0x281)),_0x378829();else _0x3b905d[_0x181aef(0x1d1)]()['includes'](_0x181aef(0x208))?(logHistory(_0x181aef(0x206),_0x43d9ae+_0x181aef(0x251)),logHistory(_0x181aef(0x206),_0x181aef(0x172)),_0x378829()):await handleError(_0x3b905d,null);}}async function handleError(_0x4d384b,_0x71a6b0,_0x4e493e=''){const _0x3d1ef6=_0x1f537d;if(botPaused)return;const _0xd2a9d5=config['exchange']||'Exchange';if(_0x71a6b0)logger['debug'](_0x3d1ef6(0x265)+_0x71a6b0);if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)]('DDoSProtection')||_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)]('RateLimitExceeded'))logHistory('error',_0xd2a9d5+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x2cb))||_0x4d384b['toString']()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x157)))logHistory(_0x3d1ef6(0x206),_0xd2a9d5+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x28e)))logHistory(_0x3d1ef6(0x206),_0xd2a9d5+_0x3d1ef6(0x284)+pauseBotMsg),await pauseBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()['includes'](_0x3d1ef6(0x152)))logHistory('error',_0xd2a9d5+_0x3d1ef6(0x2cc)+pauseBotMsg),await pauseBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1fb)]()['includes']('timestamp')||_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1fb)]()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x1b8))){const _0x4dd069=_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1fb)]();let _0x249982=![];if((config[_0x3d1ef6(0x1a3)]==_0x3d1ef6(0x1f3)||config['exchange']=='Binanceus')&&(_0x4dd069[_0x3d1ef6(0x1ed)]('Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow'['toLowerCase']())||_0x4dd069[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x1f5)['toLowerCase']())))_0x249982=!![];if(config[_0x3d1ef6(0x1a3)]==_0x3d1ef6(0x18a)&&_0x4dd069[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x2b3)[_0x3d1ef6(0x1fb)]()))_0x249982=!![];if(config['exchange']=='Bybit'&&_0x4dd069[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x164)['toLowerCase']()))_0x249982=!![];if(config['exchange']==_0x3d1ef6(0x220)&&_0x4dd069[_0x3d1ef6(0x1ed)]('Invalid\x20ACCESS_TIMESTAMP'['toLowerCase']()))_0x249982=!![];if((config[_0x3d1ef6(0x1a3)]==_0x3d1ef6(0x1e6)||config[_0x3d1ef6(0x1a3)]=='Mexc3')&&_0x4dd069['includes']('invalid\x20Request-Time'[_0x3d1ef6(0x1fb)]()))_0x249982=!![];_0x249982?logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x1a6)+pauseBotMsg):logHistory('error',_0x3d1ef6(0x26c)+pauseBotMsg),logger[_0x3d1ef6(0x240)]('Error\x20details:',_0x4d384b[_0x3d1ef6(0x1d1)]()),await pauseBot();}else{if(_0x4d384b['toString']()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x255)))logHistory(_0x3d1ef6(0x206),_0xd2a9d5+_0x3d1ef6(0x203)+pauseBotMsg),logger['debug'](_0x3d1ef6(0x162),_0x4d384b),await pauseBot();else{if(_0x4d384b instanceof ccxt[_0x3d1ef6(0x286)])logHistory('error',_0xd2a9d5+_0x3d1ef6(0x270)+pauseBotMsg),logger[_0x3d1ef6(0x240)]('Error\x20details:',_0x4d384b),await pauseBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x197)))logHistory(_0x3d1ef6(0x206),_0xd2a9d5+_0x3d1ef6(0x2c4)),logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x250)),await killBot();else{if(_0x4d384b['toString']()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x135)))logHistory(_0x3d1ef6(0x206),_0xd2a9d5+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x250)),await killBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()['includes'](_0x3d1ef6(0x208)))logHistory('error',_0xd2a9d5+_0x3d1ef6(0x13f)),logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x250)),await killBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)](_0x3d1ef6(0x227)))logHistory('error',_0xd2a9d5+_0x3d1ef6(0x212)),logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x250)),await killBot();else{if(_0x4d384b[_0x3d1ef6(0x1d1)]()[_0x3d1ef6(0x1ed)]('InsufficientFunds'))logHistory(_0x3d1ef6(0x206),_0x3d1ef6(0x26a)+_0x4e493e);else _0x4d384b instanceof ccxt[_0x3d1ef6(0x1e0)]?(logHistory(_0x3d1ef6(0x206),_0xd2a9d5+_0x3d1ef6(0x1a9)),logger[_0x3d1ef6(0x240)](_0x3d1ef6(0x162),_0x4d384b)):(logHistory('error',_0x3d1ef6(0x22e)+pauseBotMsg),logger[_0x3d1ef6(0x240)](_0x3d1ef6(0x162),_0x4d384b),await pauseBot());}}}}}}}}}}}}function formatResult(_0x402f21,_0x2fe9e3){const _0x209b16=_0x1f537d;return parseFloat(_0x402f21[_0x209b16(0x200)](_0x2fe9e3));}function formatResultTruncate(_0x4f270e,_0x56d194){const _0xea4219=_0x1f537d;let _0x597c1b=formatResultString(_0x4f270e,0xa),_0xd616e3=_0x597c1b['indexOf']('.');return _0xd616e3!=-0x1&&(_0x597c1b=_0x597c1b[_0xea4219(0x2b2)](0x0,_0xd616e3+_0x56d194+0x1)),Number(_0x597c1b);}function formatResultString(_0x5ddddb,_0x4cbb41){const _0x372e2a=_0x1f537d;let _0x355b3d;if(!(''+_0x5ddddb)['includes']('e'))_0x355b3d=+(Math['round'](_0x5ddddb+'e+'+_0x4cbb41)+'e-'+_0x4cbb41);else{let _0x5e8614=(''+_0x5ddddb)[_0x372e2a(0x202)]('e'),_0x34c76d='';+_0x5e8614[0x1]+_0x4cbb41>0x0&&(_0x34c76d='+'),_0x355b3d=+(Math[_0x372e2a(0x178)](+_0x5e8614[0x0]+'e'+_0x34c76d+(+_0x5e8614[0x1]+_0x4cbb41))+'e-'+_0x4cbb41);}return Number(_0x355b3d)[_0x372e2a(0x200)](_0x4cbb41);}function getServerTime(){const _0x2d642f=_0x1f537d,_0x427896=new Date();return _0x427896['getFullYear']()+'/'+(_0x427896[_0x2d642f(0x241)]()+0x1)[_0x2d642f(0x1d1)]()[_0x2d642f(0x272)](0x2,'0')+'/'+_0x427896[_0x2d642f(0x2ae)]()[_0x2d642f(0x1d1)]()[_0x2d642f(0x272)](0x2,'0')+'\x20'+_0x427896[_0x2d642f(0x139)]()[_0x2d642f(0x1d1)]()['padStart'](0x2,'0')+':'+_0x427896[_0x2d642f(0x279)]()[_0x2d642f(0x1d1)]()[_0x2d642f(0x272)](0x2,'0')+':'+_0x427896[_0x2d642f(0x283)]()['toString']()[_0x2d642f(0x272)](0x2,'0');}function getTimeStamp(){const _0x26ecbb=_0x1f537d,_0x265d31=shiftedTime();return _0x265d31[_0x26ecbb(0x1da)]()+'/'+(_0x265d31[_0x26ecbb(0x241)]()+0x1)[_0x26ecbb(0x1d1)]()['padStart'](0x2,'0')+'/'+_0x265d31[_0x26ecbb(0x2ae)]()[_0x26ecbb(0x1d1)]()[_0x26ecbb(0x272)](0x2,'0')+'\x20'+_0x265d31[_0x26ecbb(0x139)]()['toString']()['padStart'](0x2,'0')+':'+_0x265d31['getMinutes']()[_0x26ecbb(0x1d1)]()[_0x26ecbb(0x272)](0x2,'0')+':'+_0x265d31['getSeconds']()['toString']()[_0x26ecbb(0x272)](0x2,'0');}function getDate(){const _0x172caf=_0x1f537d,_0x73d5ca=shiftedTime();return _0x73d5ca[_0x172caf(0x1da)]()+'/'+(_0x73d5ca[_0x172caf(0x241)]()+0x1)[_0x172caf(0x1d1)]()['padStart'](0x2,'0')+'/'+_0x73d5ca[_0x172caf(0x2ae)]()[_0x172caf(0x1d1)]()[_0x172caf(0x272)](0x2,'0');}function getHour(){const _0x3d0337=_0x1f537d,_0x1ec856=shiftedTime();return _0x1ec856['getHours']()['toString']()[_0x3d0337(0x272)](0x2,'0');}function sleep(_0x8542fe){return new Promise(_0x3564f6=>setTimeout(_0x3564f6,_0x8542fe));}function shiftedTime(){const _0x18d74a=_0x1f537d,_0x2f05a6=new Date();let _0x4edaa0=_0x2f05a6;if(config&&config['timeshift']!==0x0)_0x4edaa0=fns['add'](_0x2f05a6,{'hours':config[_0x18d74a(0x2a1)]});return _0x4edaa0;}function timer(_0x3343e7){const _0x27c6f3=_0x1f537d,_0x4a1031=new Date();!lasttime?console[_0x27c6f3(0x1ee)](getTimeStamp()+_0x27c6f3(0x159),_0x3343e7,_0x4a1031):console[_0x27c6f3(0x1ee)](getTimeStamp()+':\x20timer\x20>',_0x3343e7,(_0x4a1031-lasttime)/0x3e8),lasttime=_0x4a1031;}