const _0x119156=_0xea09;(function(_0x5062a1,_0x51c119){const _0x1d3d0d=_0xea09,_0x511dfa=_0x5062a1();while(!![]){try{const _0x401b89=-parseInt(_0x1d3d0d(0xf4))/0x1*(parseInt(_0x1d3d0d(0x202))/0x2)+parseInt(_0x1d3d0d(0x184))/0x3+-parseInt(_0x1d3d0d(0x1fb))/0x4*(parseInt(_0x1d3d0d(0xf1))/0x5)+parseInt(_0x1d3d0d(0x11c))/0x6+parseInt(_0x1d3d0d(0x111))/0x7*(-parseInt(_0x1d3d0d(0x1e8))/0x8)+parseInt(_0x1d3d0d(0x164))/0x9*(parseInt(_0x1d3d0d(0xc4))/0xa)+parseInt(_0x1d3d0d(0xbd))/0xb*(parseInt(_0x1d3d0d(0x141))/0xc);if(_0x401b89===_0x51c119)break;else _0x511dfa['push'](_0x511dfa['shift']());}catch(_0x3be9c2){_0x511dfa['push'](_0x511dfa['shift']());}}}(_0x326a,0xef11a));const _0x3b0fb6=function(){let _0x51e69f=!![];return function(_0x15c25a,_0x40cafb){const _0x20546b=_0x51e69f?function(){const _0x229ef6=_0xea09;if(_0x40cafb){const _0x2afca7=_0x40cafb[_0x229ef6(0xfb)](_0x15c25a,arguments);return _0x40cafb=null,_0x2afca7;}}:function(){};return _0x51e69f=![],_0x20546b;};}(),_0xfdabdb=_0x3b0fb6(this,function(){const _0x5acda9=_0xea09;return _0xfdabdb[_0x5acda9(0xb9)]()[_0x5acda9(0x1ef)](_0x5acda9(0x14b))['toString']()['constructor'](_0xfdabdb)['search'](_0x5acda9(0x14b));});_0xfdabdb();'use strict';const ccxt=require(_0x119156(0x118))[_0x119156(0x1e6)],low=require(_0x119156(0xf2)),FileSync=require(_0x119156(0xe4)),fs=require('fs'),fns=require(_0x119156(0x198)),Crypt=require('hybrid-crypto-js')[_0x119156(0x205)],util=require('util'),argv=require(_0x119156(0xb7))(process['argv'][_0x119156(0xe9)](0x2))[_0x119156(0x11e)],path=require(_0x119156(0x15f));let exchange;global[_0x119156(0x1d0)]={},global[_0x119156(0x146)]={};const exceptions={'binance':[_0x119156(0x1e5),'HOT/BTC',_0x119156(0x186),'NANO/',_0x119156(0x207)]},exchangesRequiringIntId=[_0x119156(0x103)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x119156(0x163)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0x326a(){const _0x13edd7=['\x20API\x20secret\x20is\x20invalid','fetchBalance','has','emojisell','fetchOpenOrders','length','startnumber','emitHistory','event-history','Reset\x20|\x20','sell','BTC','bot','set','\x20not\x20responding','cancel','balancing\x20resumes\x20when\x20cooldown\x20ends','no\x20open\x20orders','threshold','Transaction\x20detection\x20blocked','removed','total','warning','getOpenOrders()','yyyy-MM-dd\x27T\x27HH:mm:ss','add','Binance','UNLOCKED','fees','log','ORDERS.LOCKED','%\x20(','send','onepagemode','getSeconds','\x20|\x20','change24h','Resetting\x20coin\x20results:\x20','stringify','openOrders','UNLOCKING','write','ticker','Pausing\x20for\x20','startsWith','status','toggleBotMode','\x20minutes','/EUR','2\x20-\x20Handled\x20open\x20orders','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','recovery','\x20change','split','Error:\x20Invalid\x20argument\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','limit-high','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','recreate','performance','full','Invalid\x20quantity','Net\x20effect','DAI/','pro','toLowerCase','3789064ocjfhq','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','open','simple','uncaughtException','ongoing','toUpperCase','search','splice','Fees\x20|\x20currency:\x20','orderstatus','0\x20-\x20EXECUTION:\x20','parseISO','usd','getCoinNumber()','find','yyyy/MM/dd','buys','page','4964zqAzRG','\x20|\x20Type:\x20','ordertype','balances','fiat','createWriteStream','fetchClosedOrders','10PLAQoC','getFullYear','timeout','Crypt','fetchTickers','YOYOW/','price','\x20-\x20bot\x20not\x20started','loadMarkets','type','buy','must\x20be\x20greater\x20than\x20minimum\x20amount','001','progress','decrypt','market','Custom\x20ID:\x20','2.6.0','BNB','./config/','getPortfolio','\x20closed\x20the\x20connection','last','date','Saving\x20configuration','privateKey','2.5.0','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','max','rightTxt','Order\x20is\x20invalid:\x20','No\x20more\x20open\x20orders\x20-\x20','changes','password','ETH','loading-canceled','-events.json','net-fiat','Executing\x20exchange\x20reload','findIndex','.json','function','2.3.5','red_yellow_blue','\x20exchange','time','limits','<b>','cloneDeep','configuration','watchTrades','apiPassword','/output-000.log','yargs/yargs','emojibuy','toString','toFixed','getPortfolio(1)','startprice','803KpQxHk','added','2\x20-\x20Validate\x20orders:\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','coins','initial','getPortfolio(0)','3597270FhmStp','canceled','configuration-stored','padEnd','BNB/','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Unfilled\x20order(s)\x20canceled\x20after\x20','writeFile','customId','exchanges','getMonth','\x20:\x20','milliseconds','cost','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','includes','./version.json','number','mkdirSync','\x20portfolio:</b>\x20\x0a\x0a','\x20has\x20a\x2024h\x20drop\x20of\x20','bid','highest','recent20','limit','getStartingBalances','data','Failed\x20to\x20load\x20coin\x20data\x20for\x20','startdate','offset','substring','clientOrderId','lowdb/adapters/FileSync','none','RequestTimeout','isEqual','currency','slice','getMinutes','leftTxt','floor','error','createOrder','trade','1\x20-\x20Validate\x20orders:\x20','2820FQAXQn','lowdb','event','127693BjyrJZ','OrderNotFound','order','EUR','1\x20-\x20FILLED:\x20','getCoins()','Error\x20while\x20deleting\x20files:\x20','apply','InsufficientFunds','breakeven','amount','watchOrders','storeHeadless','\x20API\x20key\x20is\x20invalid','***','Bitfinex2','push','sells','Bot\x20','-config.json','resetHistory','sendPortfolioTelegram','debug','-results.json','net-basecoin','secure','datetime','args','fee','7Nccjpm','fetchTicker','botID','showConfig','MIN_NOTIONAL','getPortfolio(2)','portfolio','ccxt','assign','get','2\x20-\x20FILLED\x20unknown\x20order:\x20','4439976fFTmgU','apiKey','argv','filter','3\x20-\x20handling\x20FILLED\x20order:\x20','symbols','\x20order:\x20','eur','bot-','valid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20>\x20[DEBUG]\x20','realized','bb-secure.json','replace','RSA-OAEP','amountToPrecision','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','</pre>','getHours','reverse','target','side','USD','excluded',':\x20timer\x20>','closed','LOCKED','existsSync','bb-settings.json','unlinkSync','sortBy','DDoSProtection','netoffset','sha256','getTime','BUSD','148860tZtyNy','-performance.json','random','botname','additional\x20symbols\x20','change','cancelLoading','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Initializing\x20coin\x20results','value','(((.+)+)+)+$','API-key\x20format\x20invalid','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Avoiding\x20continuous\x20order\x20attempts','settings','padStart','<b>Bot\x20','recreateCoinResults()','indexOf','-------------------------------\x0a','round','Invalid\x20API\x20key\x20or\x20secret\x20entered','abs','bots','restart','join','\x20value','balancing\x20resumed','\x20>\x20','getDate','path','AuthenticationError','entries','keys','freeze','27VQkokS','/USD','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','filled','\x20not\x20available','\x20hour','Limit\x20(low-margin)','sort','cancelOrders()','timeshift',':\x20Bot\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','basecoin','string','symbol','Order\x20amount\x20is\x20invalid:\x20','fromCodePoint','average','Initiating\x20exchange\x20reload','remove','orderId','map','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','sendMetricsTelegram','coin','\x20minutes\x20-\x20','cancelOrder','percentage','delta','storeFiat','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','199518uDPmIw','headless','XEM/BUSD','forEach','showname','version','defaults','apiSecret','exchange','exec','ORDERS.UNLOCKING','success','<pre>','************','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','placeOrder','remainingSymbols','logs','final','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','date-fns','message','InvalidOrder','format','USDT','ORDERS.UNLOCKED','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','liquidity','min','cooldown','running','Unknown\x20error\x20occured','parse','distribution'];_0x326a=function(){return _0x13edd7;};return _0x326a();}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x119156(0xd4))[_0x119156(0x189)],botID=process[_0x119156(0x11e)][0x2]||_0x119156(0x20e),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x119156(0x1c3)](_0x119156(0x1dc)+botID+_0x119156(0x16f)),killBot());const userID=process[_0x119156(0x11e)][0x3]||'',configpath=userID?_0x119156(0x215)+userID+'/':_0x119156(0x215),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x119156(0x200)](logspath+_0x119156(0xb6),{'flags':'a'});!fs[_0x119156(0x138)](configpath)&&fs[_0x119156(0xd6)](configpath);!fs[_0x119156(0x138)](logspath)&&fs[_0x119156(0xd6)](logspath);const configfile=configpath+_0x119156(0x124)+botID+_0x119156(0x107),logfile=configpath+_0x119156(0x124)+botID+_0x119156(0x226),performancefile=configpath+_0x119156(0x124)+botID+_0x119156(0x142),coinresultsfile=configpath+_0x119156(0x124)+botID+_0x119156(0x10b),settingsfile=configpath+_0x119156(0x139),securefile=configpath+_0x119156(0x129),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x119156(0x1cf)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x119156(0x18a)]({'data':[],'version':serverversion})[_0x119156(0x1cf)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x119156(0x18a)]({'bot':[],'version':serverversion})[_0x119156(0x1cf)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x119156(0x18a)]({'coins':[],'version':serverversion})[_0x119156(0x1cf)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x119156(0x13e),'rsaStandard':_0x119156(0x12b)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x162c00=>{console['log'](_0x162c00);},'simple':_0x13293b=>{const _0x436825=_0x119156;console[_0x436825(0x1c3)](_0x13293b),loggerfile[_0x436825(0x1cf)](util['format'](_0x13293b)+'\x0a');},'full':async(_0x41a95d,_0x4d8430='')=>{const _0x1a2644=_0x119156;let _0x4d2bbb;if(config[_0x1a2644(0x188)])_0x4d2bbb=getTimeStamp()+':\x20'+config[_0x1a2644(0x144)]+_0x1a2644(0x15d)+_0x41a95d;else _0x4d2bbb=getTimeStamp()+':\x20Bot\x20'+botID+_0x1a2644(0x15d)+_0x41a95d;console[_0x1a2644(0x1c3)](_0x4d2bbb),loggerfile[_0x1a2644(0x1cf)](util['format'](_0x4d2bbb)+'\x0a'),_0x4d8430&&(console[_0x1a2644(0x1c3)](_0x4d8430),loggerfile[_0x1a2644(0x1cf)](util[_0x1a2644(0x19b)](_0x4d8430)+'\x0a'));},'debug':async(_0x1ec99c,_0xdcaae='')=>{const _0x41e88c=_0x119156;let _0x4eacfa;if(config['showname'])_0x4eacfa=getTimeStamp()+':\x20'+config[_0x41e88c(0x144)]+_0x41e88c(0x127)+_0x1ec99c;else _0x4eacfa=getTimeStamp()+_0x41e88c(0x16e)+botID+_0x41e88c(0x127)+_0x1ec99c;if(debugging)console['log'](_0x4eacfa);loggerfile['write'](util[_0x41e88c(0x19b)](_0x4eacfa)+'\x0a');if(_0xdcaae){if(debugging)console[_0x41e88c(0x1c3)](_0xdcaae);loggerfile[_0x41e88c(0x1cf)](util[_0x41e88c(0x19b)](_0xdcaae)+'\x0a');}}};process['on'](_0x119156(0x1ec),function(_0x99270c){const _0x4e8f98=_0x119156;logger[_0x4e8f98(0x1eb)](_0x99270c);});settings[_0x119156(0x16d)]!=config[_0x119156(0x16d)]&&updateTimeshift(settings['timeshift']);settings[_0x119156(0x1c7)]!=config['onepagemode']&&updateOnepagemode(settings[_0x119156(0x1c7)]);process['send']({'started':_0x119156(0x1a2)},_0x14afd2=>{}),initializeProcessListeners();function proxyEmit(_0x1ece01,_0x4559a8=null){const _0x511ff5=_0x119156;process[_0x511ff5(0x1c6)]({'function':_0x1ece01,'args':_0x4559a8},_0x3c7fdd=>{});}function initializeProcessListeners(){const _0x45ca1a=_0x119156;process['on'](_0x45ca1a(0x199),_0x348cd8=>{const _0x2ad18f=_0x45ca1a;switch(Object[_0x2ad18f(0x162)](_0x348cd8)[0x0]){case _0x2ad18f(0x16d):_0x348cd8[_0x2ad18f(0x16d)]!=undefined&&(settings[_0x2ad18f(0x16d)]=_0x348cd8[_0x2ad18f(0x16d)],updateTimeshift(settings[_0x2ad18f(0x16d)]));break;case _0x2ad18f(0x1c7):_0x348cd8[_0x2ad18f(0x1c7)]!=undefined&&(settings[_0x2ad18f(0x1c7)]=_0x348cd8[_0x2ad18f(0x1c7)],updateOnepagemode(settings[_0x2ad18f(0x1c7)]));break;case'bots':_0x348cd8[_0x2ad18f(0x158)]!=undefined&&(bots=JSON[_0x2ad18f(0x1a4)](_0x348cd8['bots']),proxyEmit(_0x2ad18f(0x158),bots));break;case _0x2ad18f(0x22b):switch(_0x348cd8['function']){case'initclient':initclient();break;case _0x2ad18f(0x1d4):toggleBotMode();break;case _0x2ad18f(0x1ad):emitHistory(_0x348cd8[_0x2ad18f(0x10f)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x348cd8['args']);break;case _0x2ad18f(0x216):getPortfolio(_0x348cd8[_0x2ad18f(0x10f)]);break;case'storeConfiguration':storeConfiguration(_0x348cd8[_0x2ad18f(0x10f)]);break;case _0x2ad18f(0x100):storeHeadless(_0x348cd8[_0x2ad18f(0x10f)]);break;case _0x2ad18f(0x182):storeFiat(_0x348cd8[_0x2ad18f(0x10f)]);break;case _0x2ad18f(0x108):resetHistory();break;case _0x2ad18f(0xdd):getStartingBalances(getNormalizedPerformance());break;case _0x2ad18f(0x193):placeOrder(_0x348cd8['args']);break;case _0x2ad18f(0x147):cancelLoading();break;case _0x2ad18f(0x114):showConfig();break;case _0x2ad18f(0x17c):sendMetricsTelegram();break;case _0x2ad18f(0x109):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x11d059=null,_0x52df59=![]){const _0x2f6781=_0x119156;logger['debug'](_0x2f6781(0x1af)+(_0x11d059&&_0x11d059[_0x2f6781(0x1ab)]>0x0?_0x2f6781(0x145)+_0x11d059['join'](','):'no\x20additional\x20symbols')+_0x2f6781(0x1c9)+(_0x52df59?'exchange\x20reloaded':'exchange\x20not\x20reloaded'));if(pidBalances)clearTimeout(pidBalances);if(!_0x52df59)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!='***'){if(_0x52df59){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x56773a){handleErrorNoStop(_0x56773a,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x11d059);const _0x2fe84e=await getCoins();[currentCoins,currentCoinsAll]=_0x2fe84e,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2f6781(0x1ab)]==0x0&&allOpenOrders[_0x2f6781(0x1ab)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x28f3e5=_0x119156;logger[_0x28f3e5(0x10a)](_0x28f3e5(0x176));while(lockOrders!=ORDERS[_0x28f3e5(0x1c1)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x28f3e5(0x10a)](_0x28f3e5(0x228)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x40978a=config[_0x119156(0x18c)],_0x15ddcd=config['apiKey'],_0x2966ad=config[_0x119156(0x18b)],_0x30057e=config[_0x119156(0xb5)]){const _0xb407ca=_0x119156;exchange&&await stopExchange();!supportedExchanges()[_0xb407ca(0xd3)](_0x40978a)&&(logHistory('error',_0xb407ca(0x17b)+_0x40978a+_0xb407ca(0x22e)),killBot());const _0x3f6067=ccxt[_0x40978a[_0xb407ca(0x1e7)]()];exchange=new _0x3f6067({'apiKey':_0x15ddcd,'secret':_0x2966ad,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x30057e)exchange[_0xb407ca(0x223)]=_0x30057e;}function setStableCoins(){const _0x3da538=_0x119156;let _0x13530f=config[_0x3da538(0x170)]==_0x3da538(0x224)?'ETH':_0x3da538(0x1b1),_0x515f89=!allSymbols[_0x3da538(0xd3)](_0x13530f+_0x3da538(0x165))?_0x3da538(0x19c):_0x3da538(0x133),_0x15d663=!allSymbols[_0x3da538(0xd3)](_0x13530f+_0x3da538(0x1d6))?_0x515f89:'EUR';stablecoins={'eur':{'coin':''+_0x13530f+_0x15d663,'symbol':_0x13530f+'/'+_0x15d663},'usd':{'coin':''+_0x13530f+_0x515f89,'symbol':_0x13530f+'/'+_0x515f89}};}async function initwsCcxt(_0x2b5b1b){const _0x4d5a38=_0x119156;_0x2b5b1b==null&&(_0x2b5b1b=[],config[_0x4d5a38(0x117)][_0x4d5a38(0x187)](_0x549783=>{const _0x2140ac=_0x4d5a38;if(!_0x549783[_0x2140ac(0x134)]&&_0x549783['coin']!=config[_0x2140ac(0x170)])_0x2b5b1b[_0x2140ac(0x104)](_0x549783[_0x2140ac(0x172)]);}));if(!_0x2b5b1b[_0x4d5a38(0xd3)](stablecoins[_0x4d5a38(0x123)][_0x4d5a38(0x172)]))_0x2b5b1b['push'](stablecoins[_0x4d5a38(0x123)][_0x4d5a38(0x172)]);if(!_0x2b5b1b['includes'](stablecoins['usd'][_0x4d5a38(0x172)]))_0x2b5b1b['push'](stablecoins[_0x4d5a38(0x1f5)][_0x4d5a38(0x172)]);if(config[_0x4d5a38(0x18c)][_0x4d5a38(0x1d2)](_0x4d5a38(0x1c0))){if(!_0x2b5b1b['includes'](_0x4d5a38(0xc8)+config[_0x4d5a38(0x170)]))_0x2b5b1b[_0x4d5a38(0x104)](_0x4d5a38(0xc8)+config[_0x4d5a38(0x170)]);}loadCoins(_0x2b5b1b);const _0x19ad4d=async _0x290240=>{const _0x107283=_0x4d5a38,_0x4ad40b=await exchange[_0x107283(0x112)](_0x290240);global[_0x107283(0x1d0)][noslash(_0x4ad40b[_0x107283(0x172)])]=_0x4ad40b[_0x107283(0x218)];while(!![]){if(!botPaused)try{const _0x4b154d=await exchange[_0x107283(0xb4)](_0x290240);global[_0x107283(0x1d0)][noslash(_0x4b154d[0x0]['symbol'])]=_0x4b154d[0x0][_0x107283(0x208)],await sleep(0x3e8);}catch(_0x650e20){if(!exchangeStopped)await handleError(_0x650e20,'watchTrades',_0x290240);}else await sleep(0x64);}},_0x37ca71=async _0x53fdec=>{const _0x273845=_0x4d5a38;while(!![]){if(!botPaused)try{const _0xdb824d=await exchange['fetchTicker'](_0x53fdec);global['change'][_0xdb824d['symbol']]=_0xdb824d[_0x273845(0x180)],await sleep(0x3c*0x3e8);}catch(_0x96ed){if(!exchangeStopped)await handleError(_0x96ed,_0x273845(0x206),_0x53fdec);}else await sleep(0x64);}},_0x1ec4a9=async()=>{const _0x57c605=_0x4d5a38;while(!![]){if(!botPaused)try{const _0x297e5c=await exchange[_0x57c605(0xff)]();_0x297e5c[_0x57c605(0x187)](_0x3e9efa=>{updateNumberCoinsCcxt(_0x3e9efa);});}catch(_0x719d78){if(!exchangeStopped)await handleError(_0x719d78,_0x57c605(0xff));}else await sleep(0x64);}};_0x2b5b1b[_0x4d5a38(0x187)](async _0x1eed8c=>{_0x19ad4d(_0x1eed8c),_0x37ca71(_0x1eed8c);}),!wsEventsSet&&(wsEventsSet=!![],_0x1ec4a9(),watchTransactions());}async function watchTransactions(){const _0x182e84=_0x119156;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x20112b=await getCoins(),[_0x4992c1,_0x4c58da]=_0x20112b;let _0x1623c7=[];currentCoins[_0x182e84(0x187)](_0x20009c=>{const _0x148037=_0x182e84,_0x2e68f4=_0x4992c1[_0x148037(0x1f7)](_0x58c5b5=>_0x58c5b5[_0x148037(0x17d)]==_0x20009c[_0x148037(0x17d)]);_0x2e68f4&&(_0x20009c[_0x148037(0xd5)]!=_0x2e68f4[_0x148037(0xd5)]&&_0x1623c7['push']({'coin':_0x20009c[_0x148037(0x17d)],'symbol':_0x20009c[_0x148037(0x172)],'number':Number(formatResult(_0x2e68f4[_0x148037(0xd5)]-_0x20009c['number'],0x8))}));});if(_0x1623c7[_0x182e84(0x1ab)]==0x1&&!blockTransactionDetection){logger['debug'](_0x182e84(0x1f1)+lastFees[_0x182e84(0xe8)]+'\x20|\x20highest:\x20'+lastFees[_0x182e84(0xda)]);if(!lastFees['currency']||_0x1623c7[0x0]['coin']!=lastFees['currency']||_0x1623c7[0x0][_0x182e84(0xd5)]>lastFees[_0x182e84(0xda)]){let _0x16d3f8;if(_0x1623c7[0x0][_0x182e84(0x17d)]!=config[_0x182e84(0x170)]){let _0x2848b8=global[_0x182e84(0x1d0)][noslash(_0x1623c7[0x0][_0x182e84(0x172)])];_0x16d3f8=_0x1623c7[0x0]['reverse']?0x1/_0x2848b8:_0x2848b8;}else _0x16d3f8=0x1;_0x1623c7[0x0][_0x182e84(0x208)]=_0x16d3f8,delete _0x1623c7[0x0][_0x182e84(0x172)];let _0xe318b5=[],_0x2c8210=[...config[_0x182e84(0x19f)]]||[],_0x46948d=config[_0x182e84(0x19f)];_0x2c8210['sort']((_0x58849f,_0x1cc6b4)=>_0x58849f[_0x182e84(0x219)]>_0x1cc6b4[_0x182e84(0x219)]?-0x1:_0x1cc6b4['date']>_0x58849f['date']?0x1:0x0);const _0x29fd33=getDate();if(_0x2c8210[0x0]){const _0x35a2c3=fns[_0x182e84(0x1a4)](_0x2c8210[0x0][_0x182e84(0x219)],'yyyy/MM/dd',new Date()),_0x28cd60=fns['parse'](_0x29fd33,_0x182e84(0x1f8),new Date());if(fns[_0x182e84(0xe7)](_0x35a2c3,_0x28cd60)){_0xe318b5=_0x2c8210[0x0][_0x182e84(0x222)];const _0x5b76b7=_0xe318b5[_0x182e84(0x1f7)](_0xc6a7fd=>_0xc6a7fd[_0x182e84(0x17d)]==_0x1623c7[0x0][_0x182e84(0x17d)]);_0x5b76b7?(_0x5b76b7[_0x182e84(0xd5)]+=_0x1623c7[0x0][_0x182e84(0xd5)],_0x5b76b7['number']==0x0&&(_0xe318b5=_0xe318b5['filter'](_0xf6fae6=>{const _0x4fdef2=_0x182e84;return _0xf6fae6[_0x4fdef2(0x17d)]!=_0x1623c7[0x0][_0x4fdef2(0x17d)];}))):_0xe318b5[_0x182e84(0x104)](_0x1623c7[0x0]);const _0x4e7670=_0x46948d[_0x182e84(0x1f7)](_0x36b3c6=>_0x36b3c6[_0x182e84(0x219)]==_0x29fd33);_0x4e7670[_0x182e84(0x222)]=_0xe318b5;}else _0x46948d['push']({'date':_0x29fd33,'changes':[_0x1623c7[0x0]]});}const _0x186238=_0x46948d[_0x182e84(0x1f7)](_0xb76ad7=>_0xb76ad7[_0x182e84(0x219)]==_0x29fd33);if(_0x186238){let _0x32cebb=!![];_0x186238['changes'][_0x182e84(0x187)](_0x15f31b=>{const _0x4a2e5a=_0x182e84;if(_0x15f31b[_0x4a2e5a(0xd5)]!=0x0)_0x32cebb=![];}),_0x32cebb&&(_0x46948d=_0x46948d['filter'](_0x2dbf8f=>{const _0xe28efc=_0x182e84;return _0x2dbf8f[_0xe28efc(0x219)]!=_0x29fd33;}));}let _0x1ee143=dbConfig['get'](_0x182e84(0x1b2))[_0x182e84(0x1f7)]({'botID':botID})[_0x182e84(0x14a)]();_0x1ee143&&(dbConfig['get'](_0x182e84(0x1b2))[_0x182e84(0x1f7)]({'botID':botID})[_0x182e84(0x119)]({'liquidity':_0x46948d})['write'](),config[_0x182e84(0x19f)]=_0x46948d),logHistory(_0x182e84(0x18f),'Portfolio\x20change\x20detected:\x20'+Math[_0x182e84(0x157)](_0x1623c7[0x0][_0x182e84(0xd5)])+'\x20'+_0x1623c7[0x0][_0x182e84(0x17d)]+'\x20'+(_0x1623c7[0x0][_0x182e84(0xd5)]>0x0?_0x182e84(0xbe):'removed')+_0x182e84(0x192)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x182e84(0x10a)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x182e84(0x157)](_0x1623c7[0x0][_0x182e84(0xd5)])+'\x20'+_0x1623c7[0x0][_0x182e84(0x17d)]+'\x20'+(_0x1623c7[0x0][_0x182e84(0xd5)]>0x0?'added':_0x182e84(0x1ba)));transactionDetected=!![],currentCoins=_0x4992c1,currentCoinsAll=_0x4c58da;}await sleep(watchTransactionsInterval);}catch(_0x328424){if(!exchangeStopped)await handleError(_0x328424,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0xb8690c=config[_0x119156(0x18c)],_0xd93543=![]){const _0x4e6686=_0x119156;if(allSymbols&&!_0xd93543)return;try{markets=await exchange[_0x4e6686(0x20a)](),allSymbols=exchange[_0x4e6686(0x121)]['filter'](_0x13d719=>{const _0x408e08=_0x4e6686;let _0xe0c1ae=![];const _0x1276d6=exceptions[_0xb8690c[_0x408e08(0x1e7)]()]||[];return _0x1276d6['forEach'](_0x5c0f16=>{const _0x26624a=_0x408e08;if(_0x13d719[_0x26624a(0xd3)](_0x5c0f16))_0xe0c1ae=!![];}),!_0xe0c1ae;});}catch(_0x5396ed){throw _0x5396ed;}}async function initclient(){const _0x3c3c8c=_0x119156;emitLoadingProgress(),proxyEmit(_0x3c3c8c(0x233),emittedConfiguration()),proxyEmit(_0x3c3c8c(0xcd),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3c3c8c(0x1fe),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x14a2bf=getNormalizedPerformance();emitPerformance(_0x14a2bf),getStartingBalances(_0x14a2bf);}async function toggleBotMode(){const _0x373bb8=_0x119156;let _0x482c03=dbConfig[_0x373bb8(0x11a)](_0x373bb8(0x1b2))[_0x373bb8(0x1f7)]({'botID':botID})[_0x373bb8(0x14a)]();if(_0x482c03){const _0x56a748=!_0x482c03[_0x373bb8(0x185)];dbConfig[_0x373bb8(0x11a)](_0x373bb8(0x1b2))['find']({'botID':botID})[_0x373bb8(0x119)]({'headless':_0x56a748})[_0x373bb8(0x1cf)](),config[_0x373bb8(0x185)]=_0x56a748,proxyEmit(_0x373bb8(0x233),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x207a43=_0x119156;process[_0x207a43(0x1c6)]({'updatebotmanager':!![]},_0x1c5af5=>{});}async function loadCoins(_0x1d472e){const _0x5558d7=_0x119156;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x300ffb,_0x35433b=0x0,_0x5b5b7b=0x0;_0x1d472e['forEach'](_0x3567a4=>{const _0x485868=_0xea09;loading['remainingSymbols'][_0x485868(0x104)](_0x3567a4);}),loadingCanceled=![];let _0x2637e5=![];while(_0x300ffb!=_0x1d472e[_0x5558d7(0x1ab)]){_0x300ffb=0x0,_0x1d472e[_0x5558d7(0x187)](_0x13314d=>{const _0x3c84cd=_0x5558d7;if(global['ticker'][noslash(_0x13314d)]){loading[_0x3c84cd(0x194)]=loading[_0x3c84cd(0x194)][_0x3c84cd(0x11f)](_0x38c2a=>_0x38c2a!=_0x13314d);if(!watchedSymbols[_0x3c84cd(0xd3)](_0x13314d))watchedSymbols[_0x3c84cd(0x104)](_0x13314d);_0x300ffb++;}}),loading[_0x5558d7(0x20f)]=Math[_0x5558d7(0x155)](_0x300ffb/_0x1d472e[_0x5558d7(0x1ab)]*0x64);loading['progress']!=0x64&&(_0x5b5b7b>0x1e*0x5&&(loading[_0x5558d7(0x204)]=!![],emitLoadingProgress()),_0x5b5b7b>0x78*0x5&&!_0x2637e5&&(loading[_0x5558d7(0x1b5)]=!![],emitLoadingProgress(),_0x2637e5=!![],logHistory('error',_0x5558d7(0xdf)+loading[_0x5558d7(0x194)]['join'](',\x20')+_0x5558d7(0x209)),logHistory(_0x5558d7(0xed),_0x5558d7(0x1d1)+loadCoinsRetryInterval/0xea60+_0x5558d7(0x183)),pidCoinReloading=setTimeout(()=>{const _0x56efb5=_0x5558d7;process[_0x56efb5(0x1c6)]({'stop':_0x56efb5(0x159)},_0x5bb16c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x300ffb!=_0x35433b&&(_0x35433b=_0x300ffb,emitLoadingProgress()),_0x5b5b7b++,await sleep(0xc8);}_0x300ffb==_0x1d472e[_0x5558d7(0x1ab)]&&(coinsLoaded=!![],process['send']({'status':'enabled','live':'running'},_0x442993=>{}),_0x2637e5&&logHistory(_0x5558d7(0x18f),_0x5558d7(0x17a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x20c564=_0x119156;proxyEmit(_0x20c564(0x233),{...emittedConfiguration(),'configstate':_0x20c564(0x225)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x51f873=_0x119156;let _0x59a8d0=global[_0x51f873(0x1d0)][stablecoins[_0x51f873(0x123)][_0x51f873(0x17d)]],_0x469a9a=global[_0x51f873(0x1d0)][stablecoins['usd'][_0x51f873(0x17d)]];return{'eur':Number(_0x59a8d0),'usd':Number(_0x469a9a)};}function capitalize(_0x33e006){const _0x377937=_0x119156;return _0x33e006[_0x377937(0xe2)](0x0,0x1)[_0x377937(0x1ee)]()+_0x33e006[_0x377937(0xe2)](0x1);}function supportedExchanges(){const _0x310fcf=_0x119156,_0x104335=['ws',_0x310fcf(0x206),_0x310fcf(0x112),_0x310fcf(0xb4),_0x310fcf(0xff),_0x310fcf(0x17f),'createOrder',_0x310fcf(0x1aa),_0x310fcf(0x201),'fetchBalance'];let _0x4230d0=[],_0x413d3a=[],_0xcb1479=ccxt[_0x310fcf(0xcd)];_0xcb1479[_0x310fcf(0x187)](_0x495a44=>{const _0x3778d2=_0x310fcf;try{const _0x5436eb=new ccxt[_0x495a44]();if(_0x5436eb['has']['ws'])_0x413d3a[_0x3778d2(0x104)](_0x5436eb);}catch(_0x5c69a2){}}),_0x413d3a[_0x310fcf(0x187)](_0x23ef76=>{const _0x4594de=_0x310fcf;let _0x2206ce=0x0;_0x104335[_0x4594de(0x187)](_0x550d02=>{const _0x3fe02a=_0x4594de;_0x550d02 in _0x23ef76['has']&&_0x23ef76[_0x3fe02a(0x1a8)][_0x550d02]&&_0x2206ce++;}),_0x2206ce==_0x104335['length']&&_0x4230d0['push'](capitalize(_0x23ef76['id']));});let _0x48d77e=[];return _0xcb1479[_0x310fcf(0x187)](_0x215678=>{const _0x309469=_0x310fcf;_0x215678=capitalize(_0x215678);if(!_0x4230d0[_0x309469(0xd3)](_0x215678))_0x48d77e[_0x309469(0x104)](_0x215678);}),_0x4230d0;}function setStartDatePerformance(){const _0x250097=_0x119156;if(config&&config[_0x250097(0x19f)][0x0]['changes'][_0x250097(0x1ab)]!=0x0){const _0x5cccb3=config['liquidity'][0x0]['changes'];dbPerformance['get'](_0x250097(0xde))[_0x250097(0x1f7)]({'date':config[_0x250097(0xe0)]})[_0x250097(0x119)]({'coins':_0x5cccb3})[_0x250097(0x1cf)]();}}async function recreateCoinResults(){const _0x42505a=_0x119156;let _0x44fced,_0x2f248b=[];try{const _0x3929e5=fns[_0x42505a(0x19b)](fns[_0x42505a(0x1f4)](config['startdate'][_0x42505a(0x12a)](/\//g,'-')),_0x42505a(0x1be));for(const _0xb69062 of currentCoins){if(_0xb69062[_0x42505a(0x17d)]!=config[_0x42505a(0x170)]){let _0x2d2e1f=0x0,_0x44a83f,_0x57fea9;_0x44fced=await getAllEventOrders(_0xb69062[_0x42505a(0x172)]);if(_0x44fced['length']>0x0)_0x44fced['forEach'](_0x5ce842=>{const _0x150a4e=_0x42505a,_0xab130e=_0xb69062[_0x150a4e(0x172)]['includes'](config[_0x150a4e(0x170)]+'/');_0x2f248b[_0x150a4e(0x104)]({'datetime':_0x5ce842[_0x150a4e(0x10e)],'coin':_0xb69062[_0x150a4e(0x17d)],'symbol':_0xb69062[_0x150a4e(0x172)],'side':_0x5ce842[_0x150a4e(0x132)],'reverse':_0xab130e,'amount':formatResult(_0x5ce842[_0x150a4e(0x167)],0x8),'filled':formatResult(_0x5ce842[_0x150a4e(0x167)],0x8),'price':formatResult(_0x5ce842['price'],0x8)}),_0x2d2e1f=_0x5ce842[_0x150a4e(0x132)]=='buy'?_0x2d2e1f+_0x5ce842[_0x150a4e(0x167)]:_0x2d2e1f-_0x5ce842[_0x150a4e(0x167)];if(!_0x57fea9)_0x57fea9=_0x5ce842['price'];});_0x44a83f=_0xb69062[_0x42505a(0xd5)]-_0x2d2e1f;let _0x584902;config[_0x42505a(0x19f)]['forEach'](_0x36d22f=>{const _0x54db22=_0x42505a;!_0x584902&&(_0x584902=_0x36d22f[_0x54db22(0x222)][_0x54db22(0x1f7)](_0x4f80d9=>_0x4f80d9['coin']==_0xb69062[_0x54db22(0x17d)]),_0x584902&&(_0x44a83f=_0x584902[_0x54db22(0xd5)],_0x57fea9=_0x584902['price']));});let _0x5289f4=dbCoinResults[_0x42505a(0x11a)](_0x42505a(0xc1))['find']({'coin':_0xb69062[_0x42505a(0x17d)]})[_0x42505a(0x14a)]();_0x5289f4={'coin':_0xb69062[_0x42505a(0x17d)],'number':_0x44a83f,'breakeven':_0x57fea9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x42505a(0x11a)]('coins')[_0x42505a(0x1f7)]({'coin':_0xb69062[_0x42505a(0x17d)]})[_0x42505a(0x119)](_0x5289f4)[_0x42505a(0x1cf)]();}}_0x2f248b['sort']((_0x5e4f2b,_0x5ca33f)=>_0x5e4f2b[_0x42505a(0x10e)]>_0x5ca33f[_0x42505a(0x10e)]?0x1:_0x5ca33f['datetime']>_0x5e4f2b['datetime']?-0x1:0x0);let _0x23ff02=0x0;for(let _0x1f3efa of _0x2f248b){await updateCoinResults(_0x1f3efa,!![]);}}catch(_0x888205){await handleError(_0x888205,_0x42505a(0x152));}}async function getAllEventOrders(_0x4878a6){const _0x5ac1e8=_0x119156;let _0x307dc1=[],_0x284358=dbLogs[_0x5ac1e8(0x11a)](_0x5ac1e8(0x195))[_0x5ac1e8(0x11f)](_0x6fdee9=>{const _0x320331=_0x5ac1e8,_0x591fdc=_0x6fdee9[_0x320331(0xf3)][_0x320331(0x1e7)]();return _0x591fdc[_0x320331(0xd3)](_0x4878a6['toLowerCase']())&&(_0x591fdc[_0x320331(0xd3)]('market')&&_0x591fdc[_0x320331(0xd3)](_0x320331(0xf6))||_0x591fdc[_0x320331(0xd3)](_0x320331(0x167))&&_0x591fdc['includes'](_0x320331(0xf6)));})[_0x5ac1e8(0x13b)](_0x5ac1e8(0x22f))[_0x5ac1e8(0x14a)]();return _0x284358['forEach'](_0x31a2cc=>{const _0x354d5a=_0x5ac1e8,_0x3d7a30=_0x31a2cc[_0x354d5a(0xf3)][_0x354d5a(0xd3)](_0x354d5a(0x1b0))?_0x354d5a(0x1b0):_0x354d5a(0x20c),_0x5ea580=/#([0-9]|\.)+\s/i,_0x1e5907=Number(_0x5ea580[_0x354d5a(0x18d)](_0x31a2cc[_0x354d5a(0xf3)])[0x0]['slice'](0x1)),_0x156f83=/@([0-9]|\.)+$/i,_0xc25720=Number(_0x156f83[_0x354d5a(0x18d)](_0x31a2cc['event'])[0x0][_0x354d5a(0xe9)](0x1));_0x307dc1['push']({'datetime':_0x31a2cc[_0x354d5a(0x22f)],'coin':symbolToCoin(_0x4878a6),'symbol':_0x4878a6,'side':_0x3d7a30,'amount':_0x1e5907,'filled':_0x1e5907,'price':_0xc25720});}),_0x307dc1;}async function getAllOrders(_0x577008,_0x462778){const _0xa48571=_0x119156;let _0x186018=[];while(_0x462778<exchange[_0xa48571(0xd0)]()){const _0x461997=0x1f4,_0x5d9c1e=await exchange['fetchClosedOrders'](_0x577008,_0x462778,_0x461997);if(_0x5d9c1e['length'])_0x462778=_0x5d9c1e[_0x5d9c1e['length']-0x1]['timestamp']+0x1,_0x186018=_0x186018['concat'](_0x5d9c1e);else break;}return _0x186018;}async function validate24hChanges(){const _0x188f9f=_0x119156;for(const _0x1cbc1d of currentCoins){if(_0x1cbc1d[_0x188f9f(0x17d)]!=config[_0x188f9f(0x170)]){let _0xe18eb8;_0x1cbc1d[_0x188f9f(0x130)]?_0xe18eb8=formatResult((0x1/(global[_0x188f9f(0x146)][noslash(_0x1cbc1d[_0x188f9f(0x172)])]/0x64+0x1)-0x1)*0x64,0x3):_0xe18eb8=global['change'][noslash(_0x1cbc1d[_0x188f9f(0x172)])],_0xe18eb8<config[_0x188f9f(0x1ca)]&&(logHistory(_0x188f9f(0xed),_0x1cbc1d[_0x188f9f(0x17d)]+_0x188f9f(0xd8)+_0xe18eb8+'%'),logHistory(_0x188f9f(0xed),_0x188f9f(0x21d)),logHistory(_0x188f9f(0xed),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x26ef56,_0x1b7b36){const _0x2867c2=_0x119156;if(!_0x26ef56)return!![];const _0x4f1c54=_0x1b7b36[_0x2867c2(0x1db)]('.'),_0x2f07d5=_0x26ef56[_0x2867c2(0x1db)]('.');for(var _0x23270c=0x0;_0x23270c<_0x2f07d5[_0x2867c2(0x1ab)];_0x23270c++){const _0x15efa0=~~_0x2f07d5[_0x23270c],_0x4fd792=~~_0x4f1c54[_0x23270c];if(_0x15efa0<_0x4fd792)return!![];if(_0x15efa0>_0x4fd792)return![];}return![];}async function oneTimeMigration(){const _0x232042=_0x119156;let _0x4da0ce=dbLogs[_0x232042(0x11a)](_0x232042(0x189))[_0x232042(0x14a)]();if(isOlderVersion(_0x4da0ce,_0x232042(0x22c))){let _0x55e8c9=[];const _0x52051a=dbLogs[_0x232042(0x11a)]('logs')[_0x232042(0x14a)]();_0x52051a[_0x232042(0x187)](_0x5be621=>{const _0x89e5b7=_0x232042;_0x55e8c9['push']({'time':_0x5be621[_0x89e5b7(0x22f)],'type':_0x5be621[_0x89e5b7(0x20b)],'event':_0x5be621[_0x89e5b7(0xf3)]});}),dbLogs[_0x232042(0x11a)](_0x232042(0x195))[_0x232042(0x119)](_0x55e8c9)[_0x232042(0x1cf)]();}let _0x2c09c8=dbConfig[_0x232042(0x11a)](_0x232042(0x189))[_0x232042(0x14a)]();if(isOlderVersion(_0x2c09c8,_0x232042(0x22c))){let _0x29781e=dbConfig['get']('bot')[_0x232042(0x1f7)]({'botID':botID})[_0x232042(0x14a)]();if(_0x29781e){let _0x2788e7=[];_0x29781e[_0x232042(0x117)][_0x232042(0x187)](_0x407994=>{const _0x5bc76e=_0x232042;_0x2788e7[_0x5bc76e(0x104)]({'coin':_0x407994[_0x5bc76e(0x17d)],'number':_0x407994[_0x5bc76e(0x1ac)],'price':_0x407994['startprice']}),delete _0x407994[_0x5bc76e(0x1ac)],delete _0x407994[_0x5bc76e(0xbc)];});if(_0x2788e7[_0x232042(0x1ab)]!==0x0)fs[_0x232042(0xcb)](configbackuppath+('starting-balance-'+botID+_0x232042(0x22a)),JSON[_0x232042(0x1cc)](_0x2788e7,null,0x4),function(_0x4d95fd){if(_0x4d95fd){}});const _0x539f92=(_0x44eb48,_0x50a523)=>{const _0x59598e=_0x232042;let _0x133836=[];_0x50a523[_0x59598e(0x187)](_0x25543a=>{const _0x73e32c=_0x59598e,_0xddb79b=_0x44eb48[_0x73e32c(0x1f7)](_0x222606=>_0x222606[_0x73e32c(0x17d)]==_0x25543a[_0x73e32c(0x17d)]);if(!_0xddb79b)_0x133836[_0x73e32c(0x104)](_0x25543a);});let _0x1df759=[];return _0x44eb48[_0x59598e(0x187)](_0x239934=>{const _0x56d98c=_0x59598e,_0x578d6a=_0x50a523[_0x56d98c(0x1f7)](_0x5c88c2=>_0x5c88c2[_0x56d98c(0x17d)]==_0x239934[_0x56d98c(0x17d)]);if(!_0x578d6a||_0x578d6a['number']==0x0&&_0x239934[_0x56d98c(0xd5)]!=0x0)_0x1df759[_0x56d98c(0x104)](_0x239934);}),{'missingDay1':_0x133836,'notInDay2':_0x1df759};},_0x326d06=dbPerformance[_0x232042(0x11a)](_0x232042(0xde))['cloneDeep']()[_0x232042(0x14a)]();if(_0x326d06['length']>0x1){const {missingDay1:_0x21438f,notInDay2:_0x307bcc}=_0x539f92(_0x2788e7,_0x326d06[0x1]['coins']);_0x2788e7=[..._0x2788e7,..._0x21438f],_0x307bcc[_0x232042(0x187)](_0x5cc63a=>{const _0x3a60e8=_0x232042;let _0x5ebf93=_0x2788e7[_0x3a60e8(0x229)](_0x57f1b8=>_0x57f1b8[_0x3a60e8(0x17d)]==_0x5cc63a[_0x3a60e8(0x17d)]);_0x5ebf93!=-0x1&&_0x2788e7[_0x3a60e8(0x1f0)](_0x5ebf93,0x1);});}_0x2788e7[_0x232042(0x16b)]((_0x5f7f07,_0x1434a3)=>_0x5f7f07['coin']>_0x1434a3[_0x232042(0x17d)]?0x1:_0x1434a3[_0x232042(0x17d)]>_0x5f7f07[_0x232042(0x17d)]?-0x1:0x0);let _0x31f993=[{'date':_0x29781e[_0x232042(0xe0)],'changes':_0x2788e7}];_0x326d06['length']>0x2&&_0x326d06[_0x232042(0x187)]((_0x20eeb8,_0x4af869)=>{const _0x57d2d6=_0x232042;if(_0x4af869>0x0&&_0x4af869<_0x326d06['length']-0x1){const {missingDay1:_0x4691fd,notInDay2:_0x3ae5c1}=_0x539f92(_0x326d06[_0x4af869][_0x57d2d6(0xc1)],_0x326d06[_0x4af869+0x1][_0x57d2d6(0xc1)]);_0x2788e7=[],(_0x4691fd[_0x57d2d6(0x1ab)]!=0x0||_0x3ae5c1[_0x57d2d6(0x1ab)]!=0x0)&&(_0x4691fd[_0x57d2d6(0x1ab)]!=0x0&&_0x2788e7[_0x57d2d6(0x104)](..._0x4691fd),_0x3ae5c1[_0x57d2d6(0x1ab)]!=0x0&&(_0x3ae5c1[_0x57d2d6(0x187)](_0x44574b=>{const _0x50e763=_0x57d2d6;_0x44574b[_0x50e763(0xd5)]=-_0x44574b['number'];}),_0x2788e7[_0x57d2d6(0x104)](..._0x3ae5c1)),_0x2788e7['sort']((_0x5f3284,_0x370eb7)=>_0x5f3284[_0x57d2d6(0x17d)]>_0x370eb7['coin']?0x1:_0x370eb7[_0x57d2d6(0x17d)]>_0x5f3284['coin']?-0x1:0x0),_0x31f993[_0x57d2d6(0x104)]({'date':_0x326d06[_0x4af869+0x1][_0x57d2d6(0x219)],'changes':_0x2788e7}));}}),dbConfig['get'](_0x232042(0x1b2))[_0x232042(0x1f7)]({'botID':botID})[_0x232042(0x119)]({..._0x29781e,'liquidity':_0x31f993})[_0x232042(0x1cf)]();}}if(isOlderVersion(_0x2c09c8,_0x232042(0x213))){let _0x18e0c5=dbConfig[_0x232042(0x11a)](_0x232042(0x1b2))[_0x232042(0x1f7)]({'botID':botID})['value']();if(_0x18e0c5){const _0x6b88de=_0x18e0c5[_0x232042(0x18c)],_0x51b6b3=_0x6b88de?capitalize(_0x6b88de):'Binance';dbConfig[_0x232042(0x11a)](_0x232042(0x1b2))[_0x232042(0x1f7)]({'botID':botID})['assign']({'exchange':_0x51b6b3})[_0x232042(0x1cf)]();}}let _0x39e53d=dbPerformance['get'](_0x232042(0x189))[_0x232042(0x14a)]();isOlderVersion(_0x39e53d,_0x232042(0x22c))&&setStartDatePerformance();let _0x16e202=dbCoinResults[_0x232042(0x11a)]('version')[_0x232042(0x14a)]();if(isOlderVersion(_0x16e202,_0x232042(0x21c))){let _0x436ce=dbCoinResults[_0x232042(0x11a)](_0x232042(0xc1))[_0x232042(0x14a)]();if(_0x436ce[_0x232042(0x1ab)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x35e0b2=_0x119156;dbConfig[_0x35e0b2(0x1b3)](_0x35e0b2(0x189),serverversion)[_0x35e0b2(0x1cf)](),dbPerformance[_0x35e0b2(0x1b3)](_0x35e0b2(0x189),serverversion)[_0x35e0b2(0x1cf)](),dbLogs['set']('version',serverversion)[_0x35e0b2(0x1cf)](),dbCoinResults[_0x35e0b2(0x1b3)](_0x35e0b2(0x189),serverversion)[_0x35e0b2(0x1cf)]();}function getConfiguration(_0x3848da){const _0x5da4c0=_0x119156;let _0x43bc9f=dbConfig[_0x5da4c0(0x11a)]('bot')[_0x5da4c0(0x1f7)]({'botID':_0x3848da})[_0x5da4c0(0x14a)]();if(_0x43bc9f){let _0x11fcf3=![];typeof _0x43bc9f['threshold']==_0x5da4c0(0x171)&&(_0x43bc9f={..._0x43bc9f,'threshold':Number(_0x43bc9f[_0x5da4c0(0x1b8)])},_0x11fcf3=!![]),_0x43bc9f[_0x5da4c0(0x1ca)]==null&&(_0x43bc9f={..._0x43bc9f,'change24h':-0x14},_0x11fcf3=!![]),!_0x43bc9f['fiat']&&(_0x43bc9f={..._0x43bc9f,'fiat':_0x5da4c0(0x133)},_0x11fcf3=!![]),!_0x43bc9f['onepagemode']&&(_0x43bc9f={..._0x43bc9f,'onepagemode':settings[_0x5da4c0(0x1c7)]},_0x11fcf3=!![]),!_0x43bc9f['colorscheme']&&(_0x43bc9f={..._0x43bc9f,'colorscheme':_0x5da4c0(0x22d)},_0x11fcf3=!![]),_0x11fcf3&&(_0x43bc9f={'botID':_0x43bc9f[_0x5da4c0(0x113)],'exchange':_0x43bc9f[_0x5da4c0(0x18c)],'apiKey':_0x43bc9f['apiKey'],'apiSecret':_0x43bc9f[_0x5da4c0(0x18b)],'apiPassword':_0x43bc9f['apiPassword'],'basecoin':_0x43bc9f[_0x5da4c0(0x170)],'botname':_0x43bc9f[_0x5da4c0(0x144)],'showname':_0x43bc9f[_0x5da4c0(0x188)],'threshold':_0x43bc9f[_0x5da4c0(0x1b8)],'ordertype':_0x43bc9f[_0x5da4c0(0x1fd)],'timeout':_0x43bc9f['timeout'],'fiat':_0x43bc9f[_0x5da4c0(0x1ff)],'startdate':_0x43bc9f[_0x5da4c0(0xe0)],'recreate':_0x43bc9f[_0x5da4c0(0x1e0)],'timeshift':_0x43bc9f['timeshift'],'onepagemode':_0x43bc9f[_0x5da4c0(0x1c7)],'headless':_0x43bc9f['headless'],'cooldown':_0x43bc9f[_0x5da4c0(0x1a1)],'change24h':_0x43bc9f[_0x5da4c0(0x1ca)],'emojibuy':_0x43bc9f['emojibuy'],'emojisell':_0x43bc9f[_0x5da4c0(0x1a9)],'colorscheme':_0x43bc9f['colorscheme'],'portfolio':_0x43bc9f[_0x5da4c0(0x117)],'liquidity':_0x43bc9f[_0x5da4c0(0x19f)],'openOrders':_0x43bc9f[_0x5da4c0(0x1cd)]},dbConfig['get']('bot')[_0x5da4c0(0x177)]()['write'](),dbConfig[_0x5da4c0(0x11a)](_0x5da4c0(0x1b2))[_0x5da4c0(0x104)](_0x43bc9f)['write']());}else _0x43bc9f={'botID':_0x3848da,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5da4c0(0x106)+_0x3848da,'showname':![],'threshold':0x3,'ordertype':_0x5da4c0(0x211),'timeout':0x14,'fiat':_0x5da4c0(0x133),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5da4c0(0x16d)],'onepagemode':settings[_0x5da4c0(0x1c7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x43bc9f;}function emittedConfiguration(){const _0x5fd110=_0x119156;let _0x224222;if(config[_0x5fd110(0x11d)]=='')_0x224222={...config,'configstate':_0x5fd110(0xc2)};else config[_0x5fd110(0x11d)]==_0x5fd110(0x102)?_0x224222={...config,'configstate':_0x5fd110(0x1d9)}:(_0x224222={...config,'apiKey':_0x5fd110(0x191),'apiSecret':_0x5fd110(0x191)},config[_0x5fd110(0xb5)]&&(_0x224222[_0x5fd110(0xb5)]=_0x5fd110(0x191)));return _0x224222;}function getSettings(){const _0x5bbc45=_0x119156;return dbSettings[_0x5bbc45(0x11a)](_0x5bbc45(0x14f))[_0x5bbc45(0x14a)]();}function getSecure(){const _0x20834a=_0x119156;return dbSecure['get'](_0x20834a(0x10d))[_0x20834a(0x14a)]()||{};}function updateTimeshift(_0x101c58){const _0x5131e1=_0x119156;let _0xb0c36=dbConfig['get']('bot')[_0x5131e1(0x1f7)]({'botID':botID})[_0x5131e1(0x14a)]();_0xb0c36&&dbConfig['get'](_0x5131e1(0x1b2))[_0x5131e1(0x1f7)]({'botID':botID})[_0x5131e1(0x119)]({'timeshift':_0x101c58})[_0x5131e1(0x1cf)](),config['timeshift']=_0x101c58,proxyEmit(_0x5131e1(0x233),emittedConfiguration());}function updateOnepagemode(_0x1c170c){const _0x32d2ec=_0x119156;let _0x50fa8b=dbConfig[_0x32d2ec(0x11a)](_0x32d2ec(0x1b2))[_0x32d2ec(0x1f7)]({'botID':botID})[_0x32d2ec(0x14a)]();_0x50fa8b&&dbConfig['get'](_0x32d2ec(0x1b2))[_0x32d2ec(0x1f7)]({'botID':botID})['assign']({'onepagemode':_0x1c170c})[_0x32d2ec(0x1cf)](),config[_0x32d2ec(0x1c7)]=_0x1c170c,proxyEmit(_0x32d2ec(0x233),emittedConfiguration());}async function storeConfiguration(_0x323ab2){const _0xf3a081=_0x119156;logger['debug'](_0xf3a081(0x21a));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0xf3a081(0x1b9));let _0x42e4b2=[],_0x3e5887=![],_0x3d906f=![],_0x542293=[];_0x323ab2['portfolio'][_0xf3a081(0x187)](_0xfec542=>{const _0xaa15c3=_0xf3a081;if(!_0xfec542[_0xaa15c3(0x134)]&&_0xfec542['coin']!=_0x323ab2[_0xaa15c3(0x170)])_0x542293['push'](_0xfec542['symbol']);}),_0x542293[_0xf3a081(0x187)](_0x2e8643=>{const _0x44c5d2=watchedSymbols['includes'](_0x2e8643);!_0x44c5d2&&_0x42e4b2['push'](_0x2e8643);});_0x42e4b2['length']>0x0?_0x3e5887=!![]:currentCoins[_0xf3a081(0x187)](_0x1db183=>{const _0x63d481=_0xf3a081;if(_0x1db183[_0x63d481(0x17d)]!=config['basecoin']){const _0x4af734=_0x542293['find'](_0x34b3e6=>_0x34b3e6==_0x1db183[_0x63d481(0x172)]);!_0x4af734&&(_0x3e5887=!![]);}});_0x323ab2[_0xf3a081(0x117)]['forEach'](_0x462abf=>{const _0x1df0a8=_0xf3a081,_0x100f84=config[_0x1df0a8(0x117)]['find'](_0x82c234=>_0x82c234[_0x1df0a8(0x17d)]==_0x462abf[_0x1df0a8(0x17d)]);if(_0x100f84&&_0x462abf[_0x1df0a8(0xe1)]!=_0x100f84['offset'])_0x3d906f=!![];});let _0x91e5aa=dbConfig[_0xf3a081(0x11a)](_0xf3a081(0x1b2))[_0xf3a081(0x1f7)]({'botID':botID})['value']();_0x323ab2={..._0x323ab2,'apiKey':crypt[_0xf3a081(0x210)](secure[_0xf3a081(0x21b)],_0x323ab2[_0xf3a081(0x11d)])[_0xf3a081(0x199)],'apiSecret':crypt['decrypt'](secure[_0xf3a081(0x21b)],_0x323ab2[_0xf3a081(0x18b)])[_0xf3a081(0x199)]};_0x323ab2[_0xf3a081(0xb5)]&&(_0x323ab2[_0xf3a081(0xb5)]=crypt[_0xf3a081(0x210)](secure[_0xf3a081(0x21b)],_0x323ab2[_0xf3a081(0xb5)])[_0xf3a081(0x199)]);let _0x5a9db0=![];if(_0x91e5aa){_0x323ab2[_0xf3a081(0x11d)]==_0xf3a081(0x191)?_0x323ab2[_0xf3a081(0x11d)]=config['apiKey']:_0x5a9db0=!![];_0x323ab2[_0xf3a081(0x18b)]==_0xf3a081(0x191)?_0x323ab2[_0xf3a081(0x18b)]=config['apiSecret']:_0x5a9db0=!![];if(_0x323ab2['apiPassword']==_0xf3a081(0x191))_0x323ab2[_0xf3a081(0xb5)]=config[_0xf3a081(0xb5)];else{if(_0x323ab2[_0xf3a081(0xb5)])_0x5a9db0=!![];}dbConfig[_0xf3a081(0x11a)](_0xf3a081(0x1b2))[_0xf3a081(0x1f7)]({'botID':botID})[_0xf3a081(0x119)](_0x323ab2)['write']();}else dbConfig[_0xf3a081(0x11a)]('bot')[_0xf3a081(0x104)](_0x323ab2)['write'](),_0x5a9db0=!![],process[_0xf3a081(0x1c6)]({'status':'enabled','live':_0xf3a081(0x1a2)},_0xafc7ed=>{});process[_0xf3a081(0x1c6)]({'botname':_0x323ab2['botname']},_0x103bd6=>{}),updateBotManager(),config={..._0x323ab2},proxyEmit(_0xf3a081(0xc6)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5a9db0)await reset(_0x42e4b2,!![]);else _0x3e5887||_0x3d906f?await reset(_0x42e4b2,![]):getBalances();blockTransactionDetection=![],logger[_0xf3a081(0x10a)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x31240c){const _0xb967b7=_0x119156,_0x35d09f={...config,'headless':_0x31240c[_0xb967b7(0x185)]};let _0x464eeb=dbConfig[_0xb967b7(0x11a)](_0xb967b7(0x1b2))[_0xb967b7(0x1f7)]({'botID':botID})[_0xb967b7(0x14a)]();_0x464eeb&&dbConfig[_0xb967b7(0x11a)]('bot')[_0xb967b7(0x1f7)]({'botID':botID})[_0xb967b7(0x119)](_0x35d09f)['write'](),config={..._0x35d09f},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x15a804){const _0x1b4a72=_0x119156,_0xd77df0={...config,'fiat':_0x15a804};let _0x765dcc=dbConfig[_0x1b4a72(0x11a)](_0x1b4a72(0x1b2))[_0x1b4a72(0x1f7)]({'botID':botID})[_0x1b4a72(0x14a)]();_0x765dcc&&dbConfig[_0x1b4a72(0x11a)]('bot')['find']({'botID':botID})[_0x1b4a72(0x119)](_0xd77df0)[_0x1b4a72(0x1cf)](),config={..._0xd77df0},proxyEmit(_0x1b4a72(0x233),emittedConfiguration());}function resetHistory(){const _0x54e18d=_0x119156;logger[_0x54e18d(0x1e2)]('Resetting\x20bot\x20history');try{if(fs[_0x54e18d(0x138)](path['join'](configpath,_0x54e18d(0x124)+botID+_0x54e18d(0x226))))fs['unlinkSync'](path['join'](configpath,_0x54e18d(0x124)+botID+'-events.json'));if(fs[_0x54e18d(0x138)](path[_0x54e18d(0x15a)](configpath,_0x54e18d(0x124)+botID+_0x54e18d(0x142))))fs[_0x54e18d(0x13a)](path[_0x54e18d(0x15a)](configpath,_0x54e18d(0x124)+botID+_0x54e18d(0x142)));if(fs[_0x54e18d(0x138)](path[_0x54e18d(0x15a)](configpath,_0x54e18d(0x124)+botID+_0x54e18d(0x10b))))fs['unlinkSync'](path[_0x54e18d(0x15a)](configpath,_0x54e18d(0x124)+botID+_0x54e18d(0x10b)));}catch(_0xb6c731){if(_0xb6c731)logger[_0x54e18d(0x1e2)](_0x54e18d(0xfa),_0xb6c731);}const _0x578018=getDate();let _0xfb55c6=[];currentCoins[_0x54e18d(0x187)](_0x4156ed=>{const _0x22ada9=_0x54e18d;_0xfb55c6['push']({'coin':_0x4156ed[_0x22ada9(0x17d)],'number':_0x4156ed[_0x22ada9(0xd5)],'price':_0x4156ed[_0x22ada9(0x218)]});});let _0x5642c3=dbConfig[_0x54e18d(0x11a)](_0x54e18d(0x1b2))[_0x54e18d(0x1f7)]({'botID':botID})[_0x54e18d(0x14a)]();_0x5642c3&&(dbConfig[_0x54e18d(0x11a)](_0x54e18d(0x1b2))['find']({'botID':botID})[_0x54e18d(0x119)]({'liquidity':[{'date':_0x578018,'changes':_0xfb55c6}]})['write'](),config[_0x54e18d(0x19f)]=[]),process[_0x54e18d(0x1c6)]({'stop':_0x54e18d(0x159)},_0x27cf73=>{});}function noslash(_0x153158){const _0x3a6439=_0x119156;return _0x153158[_0x3a6439(0x12a)]('/','');}function updateHighestFee(_0x1e9efd,_0x5720ac){const _0x4f9864=_0x119156;lastFees['currency']=_0x1e9efd,lastFees[_0x4f9864(0xdb)]['length']===0x14&&lastFees[_0x4f9864(0xdb)]['shift'](),lastFees[_0x4f9864(0xdb)][_0x4f9864(0x104)](_0x5720ac),lastFees['highest']=Math[_0x4f9864(0x21e)](...lastFees[_0x4f9864(0xdb)]);}async function updateNumberCoinsCcxt(_0x43191f){const _0x2c1c3e=_0x119156;logger['debug'](_0x2c1c3e(0x1f3)+_0x43191f[_0x2c1c3e(0x172)]+_0x2c1c3e(0x1c9)+_0x43191f[_0x2c1c3e(0x1d3)]+_0x2c1c3e(0x1c9)+_0x43191f['id']+_0x2c1c3e(0x1c9)+_0x43191f[_0x2c1c3e(0xe3)]);let _0x36ec06=_0x43191f[_0x2c1c3e(0x1d3)],_0x13a5e1=![];currentCoins[_0x2c1c3e(0x187)](_0x1f4035=>{const _0x12e913=_0x2c1c3e;_0x1f4035[_0x12e913(0x172)]==_0x43191f[_0x12e913(0x172)]&&(_0x13a5e1=!![]);});if(!_0x13a5e1)return;const _0x29e6c4=currentCoins[_0x2c1c3e(0x1f7)](_0x55b10e=>_0x55b10e[_0x2c1c3e(0x172)]==_0x43191f['symbol']),_0x28ce00=_0x46cff1=>{if(_0x29e6c4)_0x29e6c4['orderstatus']=_0x46cff1;};if(_0x36ec06==_0x2c1c3e(0x1ea))_0x28ce00(_0x2c1c3e(0x1ea));else{if(_0x36ec06=='canceled'){_0x28ce00(_0x2c1c3e(0xc5));const _0xb009cf=await getCoins();[currentCoins,currentCoinsAll]=_0xb009cf,await getOpenOrders(),handleOpenOrders();}else{if(_0x36ec06=='closed'){logger[_0x2c1c3e(0x10a)](_0x2c1c3e(0xf8)+_0x43191f[_0x2c1c3e(0x172)]+_0x2c1c3e(0x1c9)+_0x43191f[_0x2c1c3e(0x167)]+_0x2c1c3e(0x1c9)+_0x43191f['id']+_0x2c1c3e(0x1c9)+_0x43191f[_0x2c1c3e(0xe3)]);let _0x35c1e6=![];if(lastOrders)lastOrders[_0x2c1c3e(0x187)](async _0x1ba8b5=>{const _0x2e442e=_0x2c1c3e;if(_0x1ba8b5[_0x2e442e(0xcc)]==_0x43191f['clientOrderId'][_0x2e442e(0xb9)]()){logger[_0x2e442e(0x10a)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x43191f[_0x2e442e(0xe3)]),_0x35c1e6=!![];if(_0x1ba8b5['filled']==0x0){logger[_0x2e442e(0x10a)](_0x2e442e(0x120)+_0x43191f[_0x2e442e(0xe3)]);if(_0x43191f['average'])_0x1ba8b5[_0x2e442e(0x208)]=_0x43191f[_0x2e442e(0x175)];else{if(_0x43191f[_0x2e442e(0x208)])_0x1ba8b5[_0x2e442e(0x208)]=_0x43191f['price'];else{}}_0x1ba8b5[_0x2e442e(0x167)]=_0x43191f[_0x2e442e(0x167)],_0x1ba8b5[_0x2e442e(0x110)]={'currency':_0x43191f[_0x2e442e(0x110)]?_0x43191f[_0x2e442e(0x110)][_0x2e442e(0xe8)]:null,'cost':_0x43191f[_0x2e442e(0x110)]?_0x43191f[_0x2e442e(0x110)][_0x2e442e(0xd1)]:0x0},updateHighestFee(_0x1ba8b5[_0x2e442e(0x110)][_0x2e442e(0xe8)],_0x1ba8b5['fee'][_0x2e442e(0xd1)]),_0x28ce00(_0x2e442e(0x167)),await validateOrders();if(lockOrders==ORDERS[_0x2e442e(0x137)]){const _0x5ece38=await getCoins();[currentCoins,currentCoinsAll]=_0x5ece38;}await updateCoinResults(_0x1ba8b5);}}});if(!_0x35c1e6){logger[_0x2c1c3e(0x10a)](_0x2c1c3e(0x11b)+_0x43191f['id']),_0x28ce00(_0x2c1c3e(0x167));const _0x278332=await getCoins();[currentCoins,currentCoinsAll]=_0x278332,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x45dfa3=JSON[_0x2c1c3e(0x1a4)](lastBalances[_0x2c1c3e(0x117)]);const _0x26d030=_0x45dfa3['find'](_0x2667fd=>_0x2667fd[_0x2c1c3e(0x172)]==_0x43191f[_0x2c1c3e(0x172)]);if(_0x26d030){if(_0x36ec06==_0x2c1c3e(0x1ea))_0x26d030['orderstatus']=_0x26d030['orderstatus']=='filled'?_0x2c1c3e(0x167):'open';else{if(_0x36ec06==_0x2c1c3e(0xc5))_0x26d030['orderstatus']=_0x26d030[_0x2c1c3e(0x1f2)]==_0x2c1c3e(0x167)?_0x2c1c3e(0x167):'canceled';else _0x36ec06==_0x2c1c3e(0x136)&&(_0x26d030[_0x2c1c3e(0x1f2)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x2c1c3e(0x1cc)](_0x45dfa3)},proxyEmit(_0x2c1c3e(0x1fe),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x515c61=![];currentCoins['forEach'](_0xa5990a=>{const _0x1f01f9=_0xea09;_0x515c61=allOpenOrders['find'](_0x1667d4=>_0x1667d4[_0x1f01f9(0x172)]==_0xa5990a[_0x1f01f9(0x172)]),_0xa5990a['orderstatus']=_0x515c61?_0x1f01f9(0x1ea):_0x1f01f9(0xe5);});}async function getCoins(_0x37fffc=!![],_0x1b01a8=config['basecoin']){const _0x4290b1=_0x119156;let _0x2e0355,_0x4d1da3=[],_0x3f037c=[],_0x453dbf=[],_0x450f80=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2e0355=await exchange[_0x4290b1(0x1a7)](),mybalances=_0x2e0355[_0x4290b1(0x1bb)];for(const [_0x15ca9f,_0x925c4b]of Object[_0x4290b1(0x161)](mybalances)){_0x450f80[_0x4290b1(0x104)](_0x15ca9f);}if(_0x1b01a8=='')for(const [_0xa1bdfb,_0x2f9818]of Object[_0x4290b1(0x161)](mybalances)){_0x2f9818[_0x4290b1(0xb9)]()!=0x0&&_0x3f037c['push']({'coin':_0xa1bdfb});}else{let _0xca7129=![];for(const [_0x82c0e7,_0x51bdaa]of Object[_0x4290b1(0x161)](mybalances)){if(_0x450f80[_0x4290b1(0xd3)](_0x82c0e7)){const _0x45cadf=config[_0x4290b1(0x117)][_0x4290b1(0x1f7)](_0xba612c=>_0xba612c[_0x4290b1(0x17d)]==_0x82c0e7),_0x1f9a8c=_0x82c0e7+'/'+_0x1b01a8,_0x1aa3c6=_0x1b01a8+'/'+_0x82c0e7,_0x2e89d1=currentCoins['find'](_0xf9348b=>_0xf9348b[_0x4290b1(0x17d)]==_0x82c0e7);_0xca7129=![];if((_0x51bdaa['toString']()!=0x0||_0x45cadf)&&(allSymbols['includes'](_0x1f9a8c)||_0x82c0e7==_0x1b01a8))_0x82c0e7!=_0x1b01a8&&_0x4d1da3[_0x4290b1(0x104)](_0x1f9a8c),_0x3f037c[_0x4290b1(0x104)]({'coin':_0x82c0e7,'symbol':_0x1f9a8c,'reverse':![],'number':Math[_0x4290b1(0x21e)](_0x51bdaa+(_0x45cadf&&_0x45cadf[_0x4290b1(0xe1)]||0x0),0x0),'orderstatus':_0x2e89d1?_0x2e89d1[_0x4290b1(0x1f2)]:'none'});else(_0x51bdaa[_0x4290b1(0xb9)]()!=0x0||_0x45cadf)&&allSymbols['includes'](_0x1aa3c6)&&(_0x82c0e7!=_0x1b01a8&&_0x4d1da3['push'](_0x1aa3c6),_0x3f037c[_0x4290b1(0x104)]({'coin':_0x82c0e7,'symbol':_0x1aa3c6,'reverse':!![],'number':Math[_0x4290b1(0x21e)](_0x51bdaa+(_0x45cadf&&_0x45cadf[_0x4290b1(0xe1)]||0x0),0x0),'orderstatus':_0x2e89d1?_0x2e89d1[_0x4290b1(0x1f2)]:_0x4290b1(0xe5)}));}}}}catch(_0x3f3205){if(!_0x37fffc)handleErrorNoStop(_0x3f3205,_0x4290b1(0xf9));else await handleError(_0x3f3205,_0x4290b1(0xf9));}return _0x453dbf=cloneDeep(_0x3f037c),_0x3f037c=_0x3f037c[_0x4290b1(0x11f)](_0x1ab3ff=>{const _0x28b419=_0x4290b1,_0x423832=config[_0x28b419(0x117)][_0x28b419(0x1f7)](_0x5d1a8d=>_0x5d1a8d['coin']==_0x1ab3ff[_0x28b419(0x17d)]);return _0x423832&&!_0x423832['excluded'];}),[_0x3f037c,_0x453dbf];}async function getCoinNumber(_0x3f0ff6){const _0xa7b770=_0x119156;let _0x3246f6;try{const _0xb73e4d=await exchange['fetchBalance']();_0x3246f6=_0xb73e4d[_0xa7b770(0x1bb)][_0x3f0ff6];}catch(_0x1d0365){await handleError(_0x1d0365,_0xa7b770(0x1f6));}return _0x3246f6;}async function getOpenOrders(){const _0x4d235b=_0x119156;let _0xca31db;allOpenOrders=[];try{for(const _0x21f42d of config['portfolio']){!_0x21f42d[_0x4d235b(0x134)]&&_0x21f42d[_0x4d235b(0x17d)]!=config[_0x4d235b(0x170)]&&(_0xca31db=await exchange['fetchOpenOrders'](_0x21f42d[_0x4d235b(0x172)]),_0xca31db['length']>0x0&&allOpenOrders[_0x4d235b(0x104)](_0xca31db[0x0]));}}catch(_0x2cc16e){await handleError(_0x2cc16e,_0x4d235b(0x1bd));}}async function handleOpenOrders(_0x1b071a=0x0){const _0xac192f=_0x119156;allOpenOrders[_0xac192f(0x1ab)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x1b071a==0x0?(logger[_0xac192f(0x10a)]('1\x20-\x20Handle\x20open\x20orders'),_0x1b071a++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xac192f(0x10a)](_0xac192f(0x1d7)),validateOrders(_0xac192f(0x1b7))));}async function testAPI(_0x3f5897){const _0x337efe=_0x119156,_0x50f49f=ccxt[_0x3f5897[_0x337efe(0x18c)][_0x337efe(0x1e7)]()],_0x5159e6=new _0x50f49f({'apiKey':_0x3f5897[_0x337efe(0x11d)],'secret':_0x3f5897['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x3f5897[_0x337efe(0xb5)])_0x5159e6[_0x337efe(0x223)]=_0x3f5897[_0x337efe(0xb5)];try{await _0x5159e6[_0x337efe(0x20a)]();}catch(_0x3a779b){throw _0x3a779b;}}function cloneDeep(_0x550faf){const _0x374f13=_0x119156;return JSON[_0x374f13(0x1a4)](JSON[_0x374f13(0x1cc)](_0x550faf));}async function getPortfolio(_0xdf176){const _0x13f387=_0x119156;let _0x251b18=[],_0x22e7d5=[],_0x2cd563=[],_0x36237d;if(_0xdf176['apiKey']!==_0x13f387(0x191)||_0xdf176[_0x13f387(0x18b)]!==_0x13f387(0x191)||_0xdf176[_0x13f387(0xb5)]&&_0xdf176['apiPassword']!=='************'){if(config[_0x13f387(0x18c)]){if(_0xdf176[_0x13f387(0x11d)]==_0x13f387(0x191))_0xdf176[_0x13f387(0x11d)]=config[_0x13f387(0x11d)];if(_0xdf176[_0x13f387(0x18b)]==_0x13f387(0x191))_0xdf176['apiSecret']=config[_0x13f387(0x18b)];if(_0xdf176[_0x13f387(0xb5)]==_0x13f387(0x191))_0xdf176[_0x13f387(0xb5)]=config[_0x13f387(0xb5)];try{await testAPI(_0xdf176);}catch(_0x229089){if(_0x229089[_0x13f387(0xb9)]()[_0x13f387(0xd3)]('AuthenticationError')){logger[_0x13f387(0x10a)](_0x13f387(0x156)),proxyEmit(_0x13f387(0x117),![]);return;}else{handleError(_0x229089,_0x13f387(0xc3));return;}}}await initExchange(_0xdf176[_0x13f387(0x18c)],_0xdf176[_0x13f387(0x11d)],_0xdf176[_0x13f387(0x18b)],_0xdf176[_0x13f387(0xb5)]);try{await loadSymbols(_0xdf176[_0x13f387(0x18c)],!![]);}catch(_0x5e21e2){if(_0x5e21e2[_0x13f387(0xb9)]()[_0x13f387(0xd3)](_0x13f387(0x160))){proxyEmit('portfolio',![]);return;}else{handleError(_0x5e21e2,_0x13f387(0xbb));return;}}const _0x581dd9=await getCoins(![],_0xdf176['basecoin']);_0x2cd563=cloneDeep(_0x581dd9[0x1]);}else _0x2cd563=cloneDeep(currentCoinsAll);if(_0xdf176[_0x13f387(0x170)]=='')proxyEmit(_0x13f387(0x117),_0x2cd563);else{_0x2cd563[_0x13f387(0x187)](_0x33b5dd=>{const _0x2ae026=_0x13f387;if(_0x33b5dd['coin']!=_0xdf176['basecoin'])_0x251b18[_0x2ae026(0x104)](_0x33b5dd[_0x2ae026(0x172)]);});try{_0x22e7d5=await exchange[_0x13f387(0x206)](_0x251b18);}catch(_0x2c1a5c){if(_0x2c1a5c[_0x13f387(0xb9)]()['includes'](_0x13f387(0x160))){proxyEmit('portfolio',![]);return;}else{handleError(_0x2c1a5c,_0x13f387(0x116));return;}}_0x2cd563['forEach'](_0x3a0907=>{const _0x269ddf=_0x13f387;_0x3a0907[_0x269ddf(0x17d)]!=_0xdf176[_0x269ddf(0x170)]?_0x36237d=_0x3a0907[_0x269ddf(0x130)]?0x1/_0x22e7d5[_0x3a0907[_0x269ddf(0x172)]][_0x269ddf(0x218)]:_0x22e7d5[_0x3a0907[_0x269ddf(0x172)]]['last']:_0x36237d=0x1,_0x3a0907[_0x269ddf(0x208)]=formatResult(_0x36237d,0x8);}),proxyEmit(_0x13f387(0x117),_0x2cd563);}}function truncateTradeAmount(_0x4978dc,_0x46dcc6){const _0xbd6006=_0x119156;let _0x4ff9b7=0x0;try{_0x4ff9b7=exchange[_0xbd6006(0x12c)](_0x4978dc,_0x46dcc6);}catch(_0x1aba6d){}return _0x4ff9b7;}function checkMinimums(_0xf21eaa){const _0x33a5f7=_0x119156;let _0x3878dc=!![];const _0x1faca9=!_0xf21eaa[_0x33a5f7(0x130)]?markets[_0xf21eaa['symbol']][_0x33a5f7(0x230)][_0x33a5f7(0xfe)][_0x33a5f7(0x1a0)]:markets[_0xf21eaa[_0x33a5f7(0x172)]][_0x33a5f7(0x230)][_0x33a5f7(0xd1)][_0x33a5f7(0x1a0)],_0x6da604=!_0xf21eaa[_0x33a5f7(0x130)]?markets[_0xf21eaa['symbol']][_0x33a5f7(0x230)]['cost'][_0x33a5f7(0x1a0)]:markets[_0xf21eaa[_0x33a5f7(0x172)]][_0x33a5f7(0x230)]['amount'][_0x33a5f7(0x1a0)],_0x52ef55=truncateTradeAmount(_0xf21eaa['symbol'],_0xf21eaa['trade']);_0xf21eaa[_0x33a5f7(0xef)]=_0x52ef55;if(Math['abs'](_0x52ef55)<_0x1faca9)_0x3878dc=![];if(Math[_0x33a5f7(0x157)](_0x52ef55)*_0xf21eaa[_0x33a5f7(0x218)]<_0x6da604)_0x3878dc=![];if(_0xf21eaa['side']=='sell'){let _0x496742=config[_0x33a5f7(0x117)]['find'](_0x47d1f3=>_0x47d1f3['coin']==_0xf21eaa['coin']);if(_0x496742[_0x33a5f7(0xe1)]>0x0){if(Math[_0x33a5f7(0x157)](_0x52ef55)>_0xf21eaa[_0x33a5f7(0xd5)]-_0x496742[_0x33a5f7(0xe1)])_0x3878dc=![];}else{if(Math[_0x33a5f7(0x157)](_0x52ef55)>_0xf21eaa['number'])_0x3878dc=![];}}if(_0xf21eaa['side']==_0x33a5f7(0x20c)){let _0x57acb7=config[_0x33a5f7(0x117)][_0x33a5f7(0x1f7)](_0x27059a=>_0x27059a[_0x33a5f7(0x17d)]==config[_0x33a5f7(0x170)]),_0x15c360=currentCoins[_0x33a5f7(0x1f7)](_0x24ceb3=>_0x24ceb3[_0x33a5f7(0x17d)]==config[_0x33a5f7(0x170)]);if(_0x57acb7['offset']>0x0){if(Math[_0x33a5f7(0x157)](_0x52ef55)*_0xf21eaa[_0x33a5f7(0x218)]>_0x15c360[_0x33a5f7(0xd5)]-_0x57acb7[_0x33a5f7(0xe1)])_0x3878dc=![];}else{if(Math['abs'](_0x52ef55)*_0xf21eaa[_0x33a5f7(0x218)]>_0x15c360[_0x33a5f7(0xd5)])_0x3878dc=![];}}return _0x3878dc;}async function getBalances(_0x33a684=!![]){const _0x59751e=_0x119156;let _0x3f64c1=0x0,_0x1d6f58;const _0x348283=config[_0x59751e(0x1b8)];if(config['headless']&&config[_0x59751e(0x1ca)]<0x0)await validate24hChanges();currentCoins[_0x59751e(0x187)](_0x3a69a3=>{const _0x3b2268=_0x59751e;if(_0x3a69a3['coin']!=config['basecoin']){let _0x5b7c1b=global[_0x3b2268(0x1d0)][noslash(_0x3a69a3[_0x3b2268(0x172)])];_0x1d6f58=_0x3a69a3[_0x3b2268(0x130)]?0x1/_0x5b7c1b:_0x5b7c1b;}else _0x1d6f58=0x1;let _0x245bd3=_0x3a69a3['number']*_0x1d6f58;_0x3f64c1+=_0x245bd3,_0x3a69a3[_0x3b2268(0x218)]=formatResult(Number(_0x1d6f58),0x8),_0x3a69a3[_0x3b2268(0x14a)]=_0x245bd3;}),currentCoins[_0x59751e(0x187)](_0x45fa79=>{const _0x11fc5c=_0x59751e;let _0x44aa50=config[_0x11fc5c(0x117)]['find'](_0x1de4f9=>_0x1de4f9[_0x11fc5c(0x17d)]==_0x45fa79[_0x11fc5c(0x17d)]),_0xfbbadd=Number(_0x44aa50[_0x11fc5c(0x1a5)]),_0x2eb5c8=_0x45fa79[_0x11fc5c(0x14a)]/_0x3f64c1*0x64,_0x5e8a2c=_0xfbbadd*_0x3f64c1/0x64/_0x45fa79['last']-_0x45fa79[_0x11fc5c(0xd5)];_0x45fa79[_0x11fc5c(0x1a5)]=formatResult(_0x2eb5c8,0x3),_0x45fa79[_0x11fc5c(0x131)]=formatResult(_0xfbbadd,0x3),_0x45fa79[_0x11fc5c(0xef)]=formatResult(_0x5e8a2c,0x8),_0x45fa79['side']='',_0x45fa79[_0x11fc5c(0x125)]=![];if(_0x45fa79['coin']!=config[_0x11fc5c(0x170)]){if(_0x45fa79[_0x11fc5c(0x1a5)]>_0xfbbadd)_0x45fa79['side']=_0x11fc5c(0x1b0),_0x45fa79[_0x11fc5c(0x125)]=checkMinimums(_0x45fa79);else _0x45fa79[_0x11fc5c(0x1a5)]<_0xfbbadd&&(_0x45fa79[_0x11fc5c(0x132)]=_0x11fc5c(0x20c),_0x45fa79[_0x11fc5c(0x125)]=checkMinimums(_0x45fa79));}_0x45fa79[_0x11fc5c(0x181)]=_0x45fa79[_0x11fc5c(0x1a5)]/_0x45fa79[_0x11fc5c(0x131)]-0x1;if(_0x45fa79[_0x11fc5c(0x1f2)]==_0x11fc5c(0x167)||_0x45fa79[_0x11fc5c(0x1f2)]==_0x11fc5c(0xc5))_0x45fa79[_0x11fc5c(0x1f2)]=_0x11fc5c(0xe5);}),currentCoins[_0x59751e(0x16b)]((_0x1a9b90,_0x480203)=>_0x1a9b90[_0x59751e(0x181)]<_0x480203[_0x59751e(0x181)]?0x1:_0x480203[_0x59751e(0x181)]<_0x1a9b90['delta']?-0x1:0x0);const _0x380201=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x380201[_0x59751e(0x123)],'usd':_0x380201[_0x59751e(0x1f5)],'portfolio':JSON[_0x59751e(0x1cc)](currentCoins),'threshold':_0x348283},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x33a684){if(config[_0x59751e(0x185)])headlessMode({'portfolio':currentCoins,'threshold':_0x348283});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x348283});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xd1cc76=getNormalizedPerformance();getStartingBalances(_0xd1cc76),emitPerformance(_0xd1cc76);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x19bf41=getNormalizedPerformance();emitPerformance(_0x19bf41),getStartingBalances(_0x19bf41),logger[_0x59751e(0x10a)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x540cc3=_0x119156;if(!lastBalances)return;let _0x3f92e8=[],_0x4c9678,_0x984a61=JSON['parse'](lastBalances[_0x540cc3(0x117)]);_0x984a61[_0x540cc3(0x16b)]((_0x10ec64,_0x405634)=>_0x10ec64['coin']>_0x405634[_0x540cc3(0x17d)]?0x1:_0x405634['coin']>_0x10ec64[_0x540cc3(0x17d)]?-0x1:0x0),_0x984a61[_0x540cc3(0x187)](_0x5adb96=>{const _0x42c20b=_0x540cc3;let _0x5e79ee={'coin':_0x5adb96[_0x42c20b(0x17d)],'number':_0x5adb96[_0x42c20b(0xd5)],'price':_0x5adb96[_0x42c20b(0x218)]};_0x3f92e8[_0x42c20b(0x104)](_0x5e79ee);});const _0x3637aa=await getFiat();_0x4c9678={'date':lastBalances[_0x540cc3(0x22f)][_0x540cc3(0x1db)]('\x20')[0x0],'eur':_0x3637aa[_0x540cc3(0x123)],'usd':_0x3637aa[_0x540cc3(0x1f5)],'coins':_0x3f92e8};let _0x4f02d4=dbPerformance[_0x540cc3(0x11a)](_0x540cc3(0xde))[_0x540cc3(0x1f7)]({'date':_0x4c9678[_0x540cc3(0x219)]})[_0x540cc3(0x14a)]();_0x4f02d4?_0x4c9678[_0x540cc3(0x219)]!=config['startdate']&&dbPerformance['get']('data')[_0x540cc3(0x1f7)]({'date':_0x4c9678[_0x540cc3(0x219)]})[_0x540cc3(0x119)](_0x4c9678)[_0x540cc3(0x1cf)]():dbPerformance[_0x540cc3(0x11a)]('data')[_0x540cc3(0x104)](_0x4c9678)[_0x540cc3(0x1cf)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x57ee0e=_0x119156;let _0x117d2f=[];if(dbPerformance[_0x57ee0e(0x1a8)](_0x57ee0e(0xde))[_0x57ee0e(0x14a)]()){let _0x40b0d9=dbPerformance[_0x57ee0e(0x11a)](_0x57ee0e(0xde))[_0x57ee0e(0x232)]()[_0x57ee0e(0x13b)]('date')['value'](),_0x4db2d5=[...config[_0x57ee0e(0x19f)]];_0x4db2d5['sort']((_0x520d2e,_0x22738e)=>_0x520d2e['date']>_0x22738e[_0x57ee0e(0x219)]?-0x1:_0x22738e['date']>_0x520d2e[_0x57ee0e(0x219)]?0x1:0x0);let _0x5c81a3=0x1,_0x5170a0=[],_0x2d40d7=0x0;_0x40b0d9[_0x57ee0e(0xe9)]()[_0x57ee0e(0x130)]()[_0x57ee0e(0x187)]((_0x4a541c,_0x23154d)=>{const _0x92066=_0x57ee0e;if(_0x4db2d5[_0x2d40d7]){if(_0x40b0d9[_0x40b0d9[_0x92066(0x1ab)]-_0x23154d]&&_0x4db2d5[_0x2d40d7][_0x92066(0x219)]==_0x40b0d9[_0x40b0d9[_0x92066(0x1ab)]-_0x23154d][_0x92066(0x219)]){if(_0x23154d<_0x40b0d9[_0x92066(0x1ab)]){let _0x43c90c=0x0,_0x19f68d=0x0;_0x40b0d9[_0x40b0d9[_0x92066(0x1ab)]-_0x23154d]['coins'][_0x92066(0x187)](_0x536cc5=>{const _0x16a2d0=_0x92066;_0x19f68d+=_0x536cc5[_0x16a2d0(0xd5)]*_0x536cc5[_0x16a2d0(0x208)];}),_0x4db2d5[_0x2d40d7]['changes'][_0x92066(0x187)](_0x4b206a=>{const _0x3e7d8e=_0x92066;_0x43c90c+=_0x4b206a[_0x3e7d8e(0xd5)]*_0x4b206a[_0x3e7d8e(0x208)];}),_0x5c81a3*=_0x43c90c/(_0x19f68d-_0x43c90c)+0x1;}_0x2d40d7++;}}let _0x3c1828=0x0;_0x4a541c['coins'][_0x92066(0x187)](_0x19f2d7=>{_0x3c1828+=_0x19f2d7['number']*_0x19f2d7['price'];}),_0x5170a0[_0x40b0d9[_0x92066(0x1ab)]-_0x23154d-0x1]=_0x3c1828*(_0x5c81a3-0x1);});let _0x46c1e1=[];_0x4db2d5=[...config[_0x57ee0e(0x19f)]]||[];let _0x2d4ac9=0x0;_0x2d40d7=0x0,_0x40b0d9[_0x57ee0e(0x187)]((_0x1c8054,_0x4610f8)=>{const _0x32059d=_0x57ee0e;if(_0x4db2d5[_0x2d40d7]){const _0x13e6bc=fns['parse'](_0x4db2d5[_0x2d40d7]['date'],'yyyy/MM/dd',new Date()),_0xcf9033=fns[_0x32059d(0x1a4)](_0x1c8054[_0x32059d(0x219)],_0x32059d(0x1f8),new Date());if(fns[_0x32059d(0xe7)](_0x13e6bc,_0xcf9033)){let _0x3c0090=0x0;_0x4db2d5[_0x2d40d7][_0x32059d(0x222)][_0x32059d(0x187)](_0xcc7b67=>{const _0x387c6d=_0x32059d;!_0x46c1e1[_0xcc7b67[_0x387c6d(0x17d)]]?_0x46c1e1[_0xcc7b67[_0x387c6d(0x17d)]]=_0xcc7b67['number']:(_0x3c0090=_0x46c1e1[_0xcc7b67[_0x387c6d(0x17d)]],_0x46c1e1[_0xcc7b67[_0x387c6d(0x17d)]]+=_0xcc7b67[_0x387c6d(0xd5)]);const _0x2225aa=_0x1c8054[_0x387c6d(0xc1)][_0x387c6d(0x1f7)](_0x5c2fbf=>_0x5c2fbf[_0x387c6d(0x17d)]==_0xcc7b67[_0x387c6d(0x17d)]);(!_0x2225aa||_0x2225aa['number']==0x0)&&(_0x2d4ac9+=(-_0xcc7b67[_0x387c6d(0xd5)]-_0x3c0090)*_0xcc7b67[_0x387c6d(0x208)]);}),_0x2d40d7++;}}_0x1c8054[_0x32059d(0xc1)][_0x32059d(0x187)]((_0x505a17,_0x47028b)=>{const _0x85f2c4=_0x32059d;_0x46c1e1[_0x505a17[_0x85f2c4(0x17d)]]&&(_0x505a17[_0x85f2c4(0xc2)]=_0x46c1e1[_0x505a17[_0x85f2c4(0x17d)]]);}),_0x117d2f[_0x32059d(0x104)]({'date':_0x1c8054[_0x32059d(0x219)],'eur':_0x1c8054['eur'],'usd':_0x1c8054[_0x32059d(0x1f5)],'offset':_0x5170a0[_0x4610f8],'netoffset':_0x2d4ac9,'coins':_0x1c8054['coins']});});}return _0x117d2f;}function emitPerformance(_0x4e0508){const _0x23bc6a=_0x119156;_0x4e0508['length']!==0x0?(proxyEmit(_0x23bc6a(0x1e1),_0x4e0508),lastPerformanceEmitted=getDate()):proxyEmit(_0x23bc6a(0x1e1),[]);}function getPerf(_0x58f37f,_0xdaeadd){const _0x5246e8=_0x119156;let _0x40343e=0x0,_0xe43544=0x0,_0x241dc8=0x0;_0x58f37f[_0x5246e8(0xc1)][_0x5246e8(0x187)](_0x13832e=>{const _0x1b3c01=_0x5246e8;_0x40343e+=_0x13832e[_0x1b3c01(0xd5)]*_0x13832e[_0x1b3c01(0x208)];});_0xdaeadd&&(_0x40343e+=_0x58f37f[_0x5246e8(0xe1)]);if(config[_0x5246e8(0x170)]===_0x5246e8(0x1b1)||config[_0x5246e8(0x170)]===_0x5246e8(0x224))_0xe43544=_0x40343e*_0x58f37f[_0x5246e8(0x123)],_0x241dc8=_0x40343e*_0x58f37f[_0x5246e8(0x1f5)];else{if(config[_0x5246e8(0x170)]==='BUSD'||config[_0x5246e8(0x170)]===_0x5246e8(0x19c)||config[_0x5246e8(0x170)]===_0x5246e8(0x133))_0xe43544=_0x40343e*_0x58f37f[_0x5246e8(0x123)]/_0x58f37f[_0x5246e8(0x1f5)],_0x241dc8=_0x40343e;else config[_0x5246e8(0x170)]===_0x5246e8(0xf7)&&(_0xe43544=_0x40343e,_0x241dc8=_0x40343e*_0x58f37f[_0x5246e8(0x1f5)]/_0x58f37f[_0x5246e8(0x123)]);}return[_0x40343e,_0xe43544,_0x241dc8];}function getKPIs(_0x40e110,_0x10c9a4=_0x119156(0xf7)){const _0x7c772e=_0x119156,_0x13685b=config[_0x7c772e(0x170)],_0x579511=lastBalances,_0x22ba0f=currentCoins,_0x907ff2=getNormalizedPerformance(),_0x1ebb44=_0x40e110==='basecoin'?_0x13685b:_0x40e110==='fiat'||_0x40e110==='net-fiat'?_0x10c9a4:'Net\x20'+_0x13685b,_0x5a5e31=_0x40e110==='net-basecoin'?_0x7c772e(0x1e4):_0x40e110===_0x7c772e(0x227)?_0x7c772e(0x1e4):_0x1ebb44+_0x7c772e(0x15b),_0x58be6d=_0x40e110===_0x7c772e(0x10c)||_0x40e110===_0x7c772e(0x227)?_0x7c772e(0x1e4):_0x1ebb44+_0x7c772e(0x1da);let _0x517ea8=0x0;_0x22ba0f[_0x7c772e(0x187)](_0x1effd9=>{const _0x12a067=_0x7c772e;_0x517ea8+=_0x1effd9[_0x12a067(0xd5)]*_0x1effd9[_0x12a067(0x218)];});if(_0x40e110===_0x7c772e(0x1ff)||_0x40e110===_0x7c772e(0x227)){if(_0x13685b===_0x7c772e(0x1b1)||_0x13685b===_0x7c772e(0x224))_0x517ea8=_0x517ea8*(_0x10c9a4===_0x7c772e(0xf7)?_0x579511[_0x7c772e(0x123)]:_0x579511['usd']);else{if(_0x13685b===_0x7c772e(0x140)||_0x13685b===_0x7c772e(0x19c)||_0x13685b==='USD')_0x517ea8=_0x517ea8*(_0x10c9a4===_0x7c772e(0xf7)?_0x579511[_0x7c772e(0x123)]/_0x579511['usd']:0x1);else _0x13685b===_0x7c772e(0xf7)&&(_0x517ea8=_0x517ea8*(_0x10c9a4===_0x7c772e(0xf7)?0x1:_0x579511[_0x7c772e(0x1f5)]/_0x579511[_0x7c772e(0x123)]));}}let _0x235741;if(_0x517ea8!==0x0){if(_0x40e110===_0x7c772e(0x170))_0x235741=(_0x517ea8/startingBalances[_0x7c772e(0x170)]-0x1)*0x64;else{if(_0x10c9a4===_0x7c772e(0xf7))_0x235741=(_0x517ea8/startingBalances[_0x7c772e(0x123)]-0x1)*0x64;else _0x235741=(_0x517ea8/startingBalances['usd']-0x1)*0x64;}let _0x1bf5d4=0x0;if(startingBalances[_0x7c772e(0xc1)])_0x22ba0f[_0x7c772e(0x187)](_0x47c605=>{const _0x482c13=_0x7c772e;let _0x304e8c=startingBalances[_0x482c13(0xc1)][_0x482c13(0x1f7)](_0x5e4f7b=>_0x5e4f7b[_0x482c13(0x17d)]===_0x47c605[_0x482c13(0x17d)]);if(_0x304e8c&&_0x304e8c[_0x482c13(0x17d)]&&_0x47c605['number']!==0x0)_0x1bf5d4+=_0x304e8c[_0x482c13(0xd5)]*_0x47c605['last'];});let _0x1cbcf8=0x0;if(_0x907ff2[_0x7c772e(0x1ab)]!==0x0){let _0x38e810=_0x907ff2[_0x907ff2[_0x7c772e(0x1ab)]-0x1];_0x1cbcf8=_0x38e810[_0x7c772e(0x13d)];}_0x1bf5d4-=_0x1cbcf8;_0x40e110===_0x7c772e(0x10c)&&(_0x235741=(_0x517ea8-_0x1bf5d4)/startingBalances['basecoin']*0x64,_0x517ea8=_0x517ea8-_0x1bf5d4);if(_0x40e110===_0x7c772e(0x227)){let _0x34f730=_0x10c9a4===_0x7c772e(0xf7)?startingBalances[_0x7c772e(0x123)]:startingBalances[_0x7c772e(0x1f5)];if(_0x13685b===_0x7c772e(0x1b1)||_0x13685b===_0x7c772e(0x224))_0x1bf5d4=_0x10c9a4===_0x7c772e(0xf7)?_0x1bf5d4*_0x579511[_0x7c772e(0x123)]:_0x1bf5d4*_0x579511[_0x7c772e(0x1f5)];else{if(_0x13685b===_0x7c772e(0x140)||_0x13685b===_0x7c772e(0x19c)||_0x13685b===_0x7c772e(0x133))_0x1bf5d4=_0x10c9a4===_0x7c772e(0xf7)?_0x1bf5d4*_0x579511[_0x7c772e(0x123)]/_0x579511['usd']:_0x1bf5d4;else _0x13685b===_0x7c772e(0xf7)&&(_0x1bf5d4=_0x10c9a4===_0x7c772e(0xf7)?_0x1bf5d4:_0x1bf5d4*_0x579511[_0x7c772e(0x1f5)]/_0x579511[_0x7c772e(0x123)]);}_0x235741=(_0x517ea8-_0x1bf5d4)/_0x34f730*0x64,_0x517ea8=_0x517ea8-_0x1bf5d4;}if(_0x235741){if(_0x235741<0x64)_0x235741=_0x235741[_0x7c772e(0xba)](0x2);else{if(_0x235741<0x3e8)_0x235741=_0x235741[_0x7c772e(0xba)](0x1);else _0x235741=_0x235741[_0x7c772e(0xba)](0x0);}}else _0x235741=Number('0')[_0x7c772e(0xba)](0x2);if(_0x517ea8){if(Math['abs'](_0x517ea8)<0.000001)_0x517ea8=_0x517ea8[_0x7c772e(0xba)](0x2);else{if(Math['abs'](_0x517ea8)<0.1)_0x517ea8=_0x517ea8['toFixed'](0x6);else{if(Math[_0x7c772e(0x157)](_0x517ea8)<0x1)_0x517ea8=_0x517ea8[_0x7c772e(0xba)](0x5);else{if(Math[_0x7c772e(0x157)](_0x517ea8)<0xa)_0x517ea8=_0x517ea8[_0x7c772e(0xba)](0x4);else{if(Math[_0x7c772e(0x157)](_0x517ea8)<0x64)_0x517ea8=_0x517ea8[_0x7c772e(0xba)](0x3);else{if(Math[_0x7c772e(0x157)](_0x517ea8)<0x3e8)_0x517ea8=_0x517ea8['toFixed'](0x2);else _0x517ea8=_0x517ea8[_0x7c772e(0xba)](0x2);}}}}}}else _0x517ea8=Number('0')[_0x7c772e(0xba)](0x2);}else _0x235741=Number('0')['toFixed'](0x2);return{'value':_0x517ea8,'change':_0x235741,'leftTxt':_0x5a5e31,'rightTxt':_0x58be6d};}async function getStartingBalances(_0x4e2d7e,_0x5bbfd5=!![]){const _0x1dd4e3=_0x119156;if(_0x4e2d7e[_0x1dd4e3(0x1ab)]!==0x0){const [_0x55c30b,_0x157bb9,_0x2d55b2]=getPerf(_0x4e2d7e[0x0],!![]);let _0xd2b70e=[];config[_0x1dd4e3(0x117)]['forEach'](_0x3a527c=>{const _0x5c45bf=_0x1dd4e3;let _0x57f201=0x0,_0x18f332;config[_0x5c45bf(0x19f)][_0x5c45bf(0x187)](_0x30fb48=>{const _0x26c538=_0x5c45bf;let _0x18ee2e=_0x30fb48['changes'][_0x26c538(0x1f7)](_0x10fa42=>_0x10fa42[_0x26c538(0x17d)]==_0x3a527c[_0x26c538(0x17d)]);if(_0x18ee2e){_0x57f201+=_0x18ee2e[_0x26c538(0xd5)];if(!_0x18f332)_0x18f332=_0x18ee2e[_0x26c538(0x208)];}}),_0xd2b70e[_0x5c45bf(0x104)]({'coin':_0x3a527c[_0x5c45bf(0x17d)],'number':_0x57f201,'initialprice':_0x18f332});});const _0x4f3687={'basecoin':_0x55c30b,'eur':_0x157bb9,'usd':_0x2d55b2,'coins':_0xd2b70e};if(_0x5bbfd5)proxyEmit('starting-balances',_0x4f3687);startingBalances=_0x4f3687;}}function headlessMode(_0x481db3){const _0x418caa=_0x119156;let _0x3d9969=_0x481db3[_0x418caa(0x117)],_0x243aea=_0x481db3['threshold'],_0x53c911=[];for(let _0x360ccd of _0x3d9969){if(_0x360ccd['coin']!=config[_0x418caa(0x170)]){if(_0x360ccd[_0x418caa(0x181)]>=_0x243aea/0x64){if(_0x360ccd['valid'])_0x53c911[_0x418caa(0x104)](_0x360ccd);}else{if(_0x360ccd[_0x418caa(0x181)]<=-_0x243aea/0x64){if(_0x360ccd[_0x418caa(0x125)])_0x53c911['push'](_0x360ccd);}}}}_0x53c911['length']>0x0&&placeOrder(_0x53c911);}function notifyBalance(_0x5eb124){const _0x18d2aa=_0x119156;let _0x1fd2ef=_0x5eb124[_0x18d2aa(0x117)],_0x40a9e7=_0x5eb124[_0x18d2aa(0x1b8)],_0x345658=[];for(let _0x4b1243 of _0x1fd2ef){if(_0x4b1243[_0x18d2aa(0x17d)]!=config[_0x18d2aa(0x170)]){if(_0x4b1243['delta']>=_0x40a9e7/0x64){if(_0x4b1243[_0x18d2aa(0x125)])_0x345658['push'](_0x4b1243);}else{if(_0x4b1243[_0x18d2aa(0x181)]<=-_0x40a9e7/0x64){if(_0x4b1243[_0x18d2aa(0x125)])_0x345658['push'](_0x4b1243);}}}}if(_0x345658[_0x18d2aa(0x1ab)]>0x0){let _0x37cbb5=_0x345658[_0x18d2aa(0x179)](_0x15b609=>_0x15b609[_0x18d2aa(0x17d)]);_0x37cbb5[_0x18d2aa(0x16b)]();let _0x56faf6=_0x37cbb5[_0x18d2aa(0x15a)](',\x20');if(!lastCoinsToBalance)logHistory(_0x18d2aa(0x1bc),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x56faf6;}}function symbolToCoin(_0x29accc){const _0x5e9d9f=_0x119156;let _0x17a452;if(_0x29accc[_0x5e9d9f(0xd3)]('/'+config[_0x5e9d9f(0x170)]))_0x17a452=_0x29accc['replace']('/'+config[_0x5e9d9f(0x170)],'');if(_0x29accc[_0x5e9d9f(0xd3)](config[_0x5e9d9f(0x170)]+'/'))_0x17a452=_0x29accc[_0x5e9d9f(0x12a)](config['basecoin']+'/','');return _0x17a452;}async function unlockOrders(){const _0xf77413=_0x119156;if(allOrdersPlaced&&lockOrders==ORDERS[_0xf77413(0x137)]){logger[_0xf77413(0x10a)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0xf77413(0x1ce)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x530450=await getCoins();[currentCoins,currentCoinsAll]=_0x530450,validateOrdersState=_0xf77413(0xc2),persistOpenOrders([]),lockOrders=ORDERS[_0xf77413(0x1c1)],logger[_0xf77413(0x10a)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x2aa916){const _0x240c18=_0x119156;if(_0x2aa916)validateOrdersState=_0x2aa916;logger[_0x240c18(0x10a)](_0x240c18(0xf0)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x240c18(0x1c4):lockOrders==0x2?_0x240c18(0x18e):_0x240c18(0x19d)));let _0x354b64=[],_0x20a695=config[_0x240c18(0x1fd)]==_0x240c18(0x211)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x240c18(0x204)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x240c18(0x137)])return;logger[_0x240c18(0x10a)](_0x240c18(0xbf)+validateOrdersState),lastOrders[_0x240c18(0x187)](_0x54f040=>{const _0x5282c5=_0x240c18;let _0xe3a2b6=![];_0x54f040[_0x5282c5(0x167)]>0x0&&(_0xe3a2b6=!![]),_0x354b64[_0x5282c5(0x104)](_0xe3a2b6),_0xe3a2b6&&config[_0x5282c5(0x1fd)]!=_0x5282c5(0x211)&&logHistory(_0x5282c5(0xf6),'Order\x20filled:\x20'+_0x54f040[_0x5282c5(0x172)]+'\x20'+_0x54f040[_0x5282c5(0x132)]+'\x20#'+formatResult(_0x54f040['filled'],0x8)+'\x20@'+formatResult(_0x54f040[_0x5282c5(0x208)],0x8));}),_0x354b64['forEach']((_0x3b998b,_0x325381)=>{const _0xea1976=_0x240c18;if(_0x3b998b)lastOrders[_0xea1976(0x1f0)](_0x325381,0x1);}),persistOpenOrders(lastOrders);const _0x3d4e90=coolingDown?_0x240c18(0x1b6):_0x240c18(0x15c);if(validateOrdersState==_0x240c18(0xc2)){validateOrdersState=_0x240c18(0x1ed);if(_0x354b64[_0x240c18(0xd3)](![])){if(config[_0x240c18(0x1fd)]==_0x240c18(0x211)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x240c18(0x1ed)){if(_0x354b64[_0x240c18(0xd3)](![])){}else{if(allOrdersPlaced){if(config['ordertype']=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x240c18(0x196))_0x354b64['includes'](![])&&(config['ordertype']=='market'?logHistory(_0x240c18(0x18f),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x240c18(0x155)](_0x20a695*validateOrderInterval/0xea60)+_0x240c18(0x17e)+_0x3d4e90):(await cancelOrders(),logHistory(_0x240c18(0x18f),_0x240c18(0xca)+Math[_0x240c18(0x155)](_0x20a695*validateOrderInterval/0xea60)+_0x240c18(0x17e)+_0x3d4e90))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x240c18(0x1fd)]!=_0x240c18(0x211))logHistory(_0x240c18(0x18f),_0x240c18(0x221)+_0x3d4e90);await unlockOrders();}}}}}async function cancelOrders(){const _0x302031=_0x119156;lastOrders[_0x302031(0x187)](async _0x53a79f=>{const _0x116501=_0x302031;try{const _0x4a7cae=await exchange[_0x116501(0x17f)](_0x53a79f[_0x116501(0x178)],_0x53a79f[_0x116501(0x172)]);}catch(_0x3aaf7e){if(_0x3aaf7e[_0x116501(0xb9)]()[_0x116501(0xd3)](_0x116501(0xf5))){}else await handleError(_0x3aaf7e,_0x116501(0x16c));}});}async function initCoinResults(_0x5169bf){const _0x2e7fda=_0x119156;_0x5169bf?logger['debug'](_0x2e7fda(0x1cb)+_0x5169bf):logger[_0x2e7fda(0x10a)](_0x2e7fda(0x149)),config['portfolio'][_0x2e7fda(0x187)](_0x5eb1ea=>{const _0x635e65=_0x2e7fda;if(!_0x5eb1ea[_0x635e65(0x134)]&&_0x5eb1ea[_0x635e65(0x17d)]!=config[_0x635e65(0x170)]){const _0x44e711=currentCoins[_0x635e65(0x1f7)](_0x4a2a90=>_0x4a2a90['coin']==_0x5eb1ea['coin']),_0x435730=global[_0x635e65(0x1d0)][noslash(_0x5eb1ea[_0x635e65(0x172)])];let _0x5e904e=_0x44e711?_0x44e711['number']:null,_0x47e70e=_0x5eb1ea['reverse']?0x1/_0x435730:_0x435730,_0x3ce036;config[_0x635e65(0x19f)][_0x635e65(0x187)](_0x301564=>{const _0x4f347c=_0x635e65;!_0x3ce036&&(_0x3ce036=_0x301564[_0x4f347c(0x222)][_0x4f347c(0x1f7)](_0x6e6912=>_0x6e6912[_0x4f347c(0x17d)]==_0x5eb1ea[_0x4f347c(0x17d)]),_0x3ce036&&(_0x5e904e=_0x3ce036[_0x4f347c(0xd5)],_0x47e70e=_0x3ce036[_0x4f347c(0x208)]));});let _0x2c8337=dbCoinResults['get']('coins')[_0x635e65(0x1f7)]({'coin':_0x5eb1ea[_0x635e65(0x17d)]})[_0x635e65(0x14a)]();if(!_0x2c8337){const _0x2252cc={'coin':_0x5eb1ea[_0x635e65(0x17d)],'number':_0x5e904e,'breakeven':_0x47e70e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x635e65(0x11a)](_0x635e65(0xc1))[_0x635e65(0x104)](_0x2252cc)[_0x635e65(0x1cf)]();}else{if(_0x5169bf&&_0x5eb1ea['coin']==_0x5169bf){const _0x155737={'coin':_0x5eb1ea[_0x635e65(0x17d)],'number':_0x5e904e,'breakeven':_0x47e70e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x635e65(0xc1))[_0x635e65(0x1f7)]({'coin':_0x5eb1ea[_0x635e65(0x17d)]})[_0x635e65(0x119)](_0x155737)[_0x635e65(0x1cf)]();}}}});}async function updateCoinResults(_0x96f415,_0x44c5a6=![]){const _0x4d581e=_0x119156;let _0x3aad8a,_0x5cc187,_0x19c0b5,_0x195c80,_0x3f9ce7,_0x13062f,_0x420f16=dbCoinResults[_0x4d581e(0x11a)]('coins')[_0x4d581e(0x1f7)]({'coin':_0x96f415[_0x4d581e(0x17d)]})[_0x4d581e(0x14a)](),_0x2df6c0=![];Object[_0x4d581e(0x161)](_0x420f16)[_0x4d581e(0x187)](([_0x17ffb6,_0x20606c])=>{if(_0x20606c==null)_0x2df6c0=!![];});(!_0x420f16||_0x2df6c0)&&(await initCoinResults(_0x96f415[_0x4d581e(0x17d)]),_0x420f16=dbCoinResults['get'](_0x4d581e(0xc1))[_0x4d581e(0x1f7)]({'coin':_0x96f415[_0x4d581e(0x17d)]})[_0x4d581e(0x14a)]());_0x96f415[_0x4d581e(0x130)]&&(_0x13062f={'filled':_0x96f415[_0x4d581e(0x167)]*_0x96f415[_0x4d581e(0x208)],'amount':_0x96f415[_0x4d581e(0x167)]*_0x96f415[_0x4d581e(0x208)],'side':_0x96f415[_0x4d581e(0x132)]==_0x4d581e(0x1b0)?'buy':'sell','price':0x1/_0x96f415[_0x4d581e(0x208)]},_0x96f415={..._0x96f415,..._0x13062f});_0x44c5a6?_0x5cc187=_0x96f415[_0x4d581e(0x132)]==_0x4d581e(0x20c)?_0x420f16[_0x4d581e(0xd5)]+_0x96f415['filled']:_0x420f16[_0x4d581e(0xd5)]-_0x96f415[_0x4d581e(0x167)]:_0x5cc187=await getCoinNumber(_0x96f415[_0x4d581e(0x17d)]);if(_0x96f415['fee']&&_0x96f415['fee'][_0x4d581e(0xe8)]==config['basecoin'])_0x3aad8a=_0x96f415[_0x4d581e(0x110)][_0x4d581e(0xd1)];else{if(_0x96f415['fee']&&_0x96f415[_0x4d581e(0x110)]['currency']==_0x4d581e(0x214)&&!_0x44c5a6)_0x3aad8a=_0x96f415[_0x4d581e(0x110)][_0x4d581e(0xd1)]*global[_0x4d581e(0x1d0)][_0x4d581e(0x214)+config['basecoin']];else _0x3aad8a=defaultFee*_0x96f415[_0x4d581e(0x167)]*_0x96f415['price'];}_0x96f415[_0x4d581e(0x132)]==_0x4d581e(0x20c)?(_0x19c0b5=_0x5cc187!=0x0?(_0x420f16[_0x4d581e(0xfd)]*_0x420f16[_0x4d581e(0xd5)]+_0x96f415['price']*(_0x5cc187-_0x420f16['number'])+_0x3aad8a)/_0x5cc187:0x0,_0x195c80=_0x420f16[_0x4d581e(0x128)]):(_0x19c0b5=_0x5cc187!=0x0?(_0x420f16[_0x4d581e(0xfd)]*_0x420f16['number']-_0x96f415[_0x4d581e(0x208)]*(_0x420f16[_0x4d581e(0xd5)]-_0x5cc187)+_0x3aad8a)/_0x5cc187:0x0,_0x195c80=_0x420f16[_0x4d581e(0x128)]+(_0x96f415[_0x4d581e(0x208)]-_0x420f16[_0x4d581e(0xfd)])*_0x96f415[_0x4d581e(0x167)]);_0x3f9ce7=(_0x96f415[_0x4d581e(0x208)]-_0x19c0b5-_0x3aad8a/_0x96f415[_0x4d581e(0x167)])*_0x5cc187;let _0x26c598={'coin':_0x96f415['coin'],'number':_0x5cc187,'breakeven':formatResult(_0x19c0b5,0x8),'realized':formatResult(_0x195c80,0x8),'unrealized':formatResult(_0x3f9ce7,0x8),'fees':formatResult(_0x420f16[_0x4d581e(0x1c2)]+_0x3aad8a,0x8),'sells':_0x96f415[_0x4d581e(0x132)]==_0x4d581e(0x1b0)?_0x420f16[_0x4d581e(0x105)]+0x1:_0x420f16['sells'],'buys':_0x96f415[_0x4d581e(0x132)]==_0x4d581e(0x20c)?_0x420f16['buys']+0x1:_0x420f16[_0x4d581e(0x1f9)]};dbCoinResults[_0x4d581e(0x11a)](_0x4d581e(0xc1))[_0x4d581e(0x1f7)]({'coin':_0x96f415[_0x4d581e(0x17d)]})[_0x4d581e(0x119)](_0x26c598)['write']();if(!_0x44c5a6){if(_0x96f415[_0x4d581e(0x110)]&&_0x96f415['fee'][_0x4d581e(0xe8)]==_0x4d581e(0x214)){const _0x262236=currentCoins[_0x4d581e(0x1f7)](_0x449934=>_0x449934[_0x4d581e(0x17d)]==_0x4d581e(0x214));if(_0x262236){let _0x330ac3=dbCoinResults[_0x4d581e(0x11a)](_0x4d581e(0xc1))[_0x4d581e(0x1f7)]({'coin':_0x4d581e(0x214)})['value']();_0x26c598={..._0x330ac3,'number':_0x262236[_0x4d581e(0xd5)]},dbCoinResults[_0x4d581e(0x11a)]('coins')[_0x4d581e(0x1f7)]({'coin':'BNB'})[_0x4d581e(0x119)](_0x26c598)[_0x4d581e(0x1cf)]();}}}}function _0xea09(_0x4d77c5,_0x5b0c0c){const _0x1c5300=_0x326a();return _0xea09=function(_0xfdabdb,_0x3b0fb6){_0xfdabdb=_0xfdabdb-0xb4;let _0x326aa0=_0x1c5300[_0xfdabdb];return _0x326aa0;},_0xea09(_0x4d77c5,_0x5b0c0c);}async function placeOrder(_0x261322){const _0xd47367=_0x119156,_0x41e5c9=config[_0xd47367(0x1fd)]==_0xd47367(0x211)?'market':'limit';if(lockOrders==ORDERS[_0xd47367(0x1c1)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xd47367(0x137)],allOrdersPlaced=![],validateOrdersState=_0xd47367(0xc2);let _0x18e626=![];lastOrders=[];for(const _0x16f446 of _0x261322){let _0x66617e,_0x38bce8,_0x1f16fb,_0x2c74a4,_0x1539a0,_0xe488f3=_0x16f446[_0xd47367(0x172)];try{const _0x5084ec=await exchange[_0xd47367(0x112)](_0xe488f3);_0x66617e=_0x16f446[_0xd47367(0x130)]?0x1/_0x16f446['last']:_0x16f446[_0xd47367(0x218)],_0x38bce8=_0x5084ec[_0xd47367(0xd9)],_0x1f16fb=_0x5084ec['ask'];_0x16f446[_0xd47367(0x130)]?(_0x2c74a4=_0x16f446[_0xd47367(0x132)]==_0xd47367(0x20c)?_0xd47367(0x1b0):_0xd47367(0x20c),_0x1539a0=Math['abs'](_0x16f446[_0xd47367(0xef)])/_0x66617e):(_0x2c74a4=_0x16f446['side'],_0x1539a0=Math[_0xd47367(0x157)](_0x16f446[_0xd47367(0xef)]));_0x41e5c9==_0xd47367(0xdc)&&(config['ordertype']==_0xd47367(0x1de)&&(_0x66617e=_0x2c74a4==_0xd47367(0x20c)?_0x38bce8:_0x1f16fb),config['ordertype']=='limit-low'&&(_0x66617e=_0x2c74a4==_0xd47367(0x20c)?_0x1f16fb:_0x38bce8));_0x1539a0=formatResult(_0x1539a0,0x8),_0x66617e=formatResult(_0x66617e,0x8);const _0x4efb10=_0x2c74a4==_0xd47367(0x1b0)?config[_0xd47367(0x1a9)]?String[_0xd47367(0x174)]('0x'+config['emojisell'])+'\x20':'':config[_0xd47367(0xb8)]?String['fromCodePoint']('0x'+config[_0xd47367(0xb8)])+'\x20':'',_0x4c65be=_0x41e5c9=='market'?'Market':config['ordertype']==_0xd47367(0x1de)?'Limit\x20(high-margin)':_0xd47367(0x16a),_0xfa6d5a=(Math[_0xd47367(0xec)](Math[_0xd47367(0x143)]()*0x35a4e900)+0x5f5e100)[_0xd47367(0xb9)]();lastOrders['push']({'customId':_0xfa6d5a,'symbol':_0xe488f3,'coin':_0x16f446['coin'],'amount':_0x1539a0,'price':_0x66617e,'side':_0x2c74a4,'reverse':_0x16f446[_0xd47367(0x130)],'filled':0x0});if(_0x41e5c9==_0xd47367(0x211))logHistory(_0xd47367(0xf6),''+_0x4efb10+_0x4c65be+_0xd47367(0x122)+_0xe488f3+'\x20'+_0x2c74a4+'\x20#'+formatResult(_0x1539a0,0x8)+'\x20@'+formatResult(_0x66617e,0x8));else logHistory(_0xd47367(0xf6),''+_0x4efb10+_0x4c65be+_0xd47367(0x122)+_0xe488f3+'\x20'+_0x2c74a4+'\x20#'+formatResult(_0x1539a0,0x8)+'\x20@'+formatResult(_0x66617e,0x8));let _0x44a402=_0xfa6d5a;exchangesRequiringIntId[_0xd47367(0xd3)](config[_0xd47367(0x18c)])&&(_0x44a402=parseInt(_0xfa6d5a));logger['debug'](_0xd47367(0x212)+_0x44a402+_0xd47367(0x1fc)+typeof _0x44a402);const _0x2261d4=await exchange[_0xd47367(0xee)](_0xe488f3,_0x41e5c9,_0x2c74a4,_0x1539a0,_0x66617e,{'clientOrderId':_0x44a402}),_0x5e5844=lastOrders[_0xd47367(0x1ab)]-0x1;if(_0x5e5844>=0x0&&lastOrders[_0x5e5844]['customId']==_0xfa6d5a){lastOrders[_0x5e5844][_0xd47367(0x178)]=_0x2261d4['id'];if(_0x2261d4['amount'])lastOrders[_0x5e5844][_0xd47367(0xfe)]=_0x2261d4[_0xd47367(0xfe)];if(_0x2261d4[_0xd47367(0x208)])lastOrders[_0x5e5844][_0xd47367(0x208)]=_0x2261d4[_0xd47367(0x208)];lastOrders[_0x5e5844][_0xd47367(0x110)]=_0x2261d4[_0xd47367(0x110)];}if(config[_0xd47367(0x1a1)]!=0x0){let _0x50d070=null;if(cooldownTracker[_0xd47367(0x1ab)]==config['cooldown']-0x1)_0x50d070=cooldownTracker['shift']();const _0x26588e=getTimeStamp();cooldownTracker['push'](_0x26588e);if(_0x50d070){const _0x17576c=fns['differenceInSeconds'](new Date(_0x26588e),new Date(_0x50d070));if(_0x17576c<cooldownInterval){logHistory('error','Executed\x20'+config[_0xd47367(0x1a1)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xd47367(0x19e)+cooldownPeriod/(0xe10*0x3e8)+_0xd47367(0x169)),coolingDown=!![];break;}}}}catch(_0x311b24){if(_0x311b24[_0xd47367(0xb9)]()['includes'](_0xd47367(0x115)))lastOrders=lastOrders['filter'](_0x65e6ae=>_0x65e6ae['symbol']!=_0xe488f3),logHistory(_0xd47367(0xed),_0xd47367(0x1d8)+_0xe488f3),_0x18e626=!![];else{if(_0x311b24['toString']()[_0xd47367(0xd3)](_0xd47367(0x1e3)))lastOrders=lastOrders[_0xd47367(0x11f)](_0x3e9ea7=>_0x3e9ea7[_0xd47367(0x172)]!=_0xe488f3),logHistory(_0xd47367(0xed),_0xd47367(0x173)+_0xe488f3),_0x18e626=!![];else{if(_0x311b24[_0xd47367(0xb9)]()[_0xd47367(0xd3)](_0xd47367(0x19a)))lastOrders=lastOrders[_0xd47367(0x11f)](_0x3d149f=>_0x3d149f['symbol']!=_0xe488f3),logHistory(_0xd47367(0xed),_0xd47367(0x220)+_0xe488f3),_0x18e626=!![];else _0x311b24[_0xd47367(0xb9)]()[_0xd47367(0xd3)](_0xd47367(0x20d))?(lastOrders=lastOrders[_0xd47367(0x11f)](_0x55eed4=>_0x55eed4[_0xd47367(0x172)]!=_0xe488f3),logHistory(_0xd47367(0xed),_0xd47367(0x1d8)+_0xe488f3),_0x18e626=!![]):(lastOrders=lastOrders[_0xd47367(0x11f)](_0x48ef57=>_0x48ef57[_0xd47367(0x172)]!=_0xe488f3),await handleError(_0x311b24,'placeOrder()',_0xe488f3));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1a4f83=config[_0xd47367(0x1fd)]==_0xd47367(0x211)?validateOrderTimeout*0x3c*0x3e8:config[_0xd47367(0x204)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4547c8=_0xd47367;validateOrders(_0x4547c8(0x196));},_0x1a4f83);}else unlockOrders();_0x18e626&&config['headless']&&await pauseBot(_0xd47367(0x14e)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xd47367(0x18f),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0xd47367(0x185)]&&logHistory(_0xd47367(0xed),_0xd47367(0x1dd));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0xd47367(0x185)]&&(config[_0xd47367(0x1fd)]==_0xd47367(0x211)?logHistory(_0xd47367(0xed),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xd47367(0xed),_0xd47367(0x126))));}}function persistOpenOrders(_0x4ca255){const _0x493597=_0x119156,_0x1ffa55={...config,'openOrders':_0x4ca255};let _0x53692b=dbConfig[_0x493597(0x11a)](_0x493597(0x1b2))[_0x493597(0x1f7)]({'botID':botID})[_0x493597(0x14a)]();_0x53692b&&dbConfig[_0x493597(0x11a)](_0x493597(0x1b2))['find']({'botID':botID})[_0x493597(0x119)](_0x1ffa55)[_0x493597(0x1cf)]();}function restoreOrders(){const _0x55503b=_0x119156;let _0xc2a753;config[_0x55503b(0x1cd)]&&allOpenOrders['forEach'](_0x4be579=>{const _0x3cfe4c=_0x55503b,_0x297053=config[_0x3cfe4c(0x1cd)]['find'](_0x1c2a21=>_0x1c2a21[_0x3cfe4c(0x178)]==_0x4be579['id']);_0x297053&&(lastOrders[_0x3cfe4c(0x104)](_0x297053),_0xc2a753=_0x4be579['timestamp']);});if(lastOrders[_0x55503b(0x1ab)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x55503b(0x1ed),allOrdersPlaced=!![];const _0x456305=new Date()[_0x55503b(0x13f)](),_0x10d370=config[_0x55503b(0x1fd)]==_0x55503b(0x211)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0xc2a753+_0x10d370>_0x456305){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5313de=_0x55503b;validateOrders(_0x5313de(0x196));},_0xc2a753+_0x10d370-_0x456305);}else validateOrders(_0x55503b(0x196));}}async function sendMetricsTelegram(){const _0x2003f5=_0x119156;if(!coinsLoaded){process[_0x2003f5(0x1c6)]({'telegrammsg':_0x2003f5(0x12d)},_0x5a06bf=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x20d1e8='';if(config['showname'])_0x20d1e8=_0x2003f5(0x231)+config[_0x2003f5(0x144)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x20d1e8=_0x2003f5(0x151)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2c03d4=getKPIs(_0x2003f5(0x170)),_0x25899b=getKPIs(_0x2003f5(0x1ff),config[_0x2003f5(0x1ff)]),_0x7656ec=getKPIs('net-basecoin'),_0x5e0b8d=getKPIs('net-fiat',config[_0x2003f5(0x1ff)]);_0x20d1e8+=_0x2003f5(0x190),_0x20d1e8+=_0x2c03d4[_0x2003f5(0xeb)]+'\x20:\x20'+_0x2c03d4[_0x2003f5(0x14a)]+'\x0a',_0x20d1e8+=_0x2c03d4[_0x2003f5(0x21f)]+':\x20'+_0x2c03d4[_0x2003f5(0x146)]+'%\x0a',_0x20d1e8+=_0x25899b[_0x2003f5(0xeb)]+_0x2003f5(0xcf)+_0x25899b['value']+'\x0a',_0x20d1e8+=_0x25899b[_0x2003f5(0x21f)]+':\x20'+_0x25899b['change']+'%\x0a',_0x20d1e8+=_0x7656ec[_0x2003f5(0xeb)]+':\x20'+_0x7656ec[_0x2003f5(0x14a)]+'\x20('+config[_0x2003f5(0x170)]+')\x0a',_0x20d1e8+=_0x7656ec[_0x2003f5(0x21f)]+':\x20'+_0x7656ec['change']+_0x2003f5(0x1c5)+config[_0x2003f5(0x170)]+')\x0a',_0x20d1e8+=_0x5e0b8d[_0x2003f5(0xeb)]+':\x20'+_0x5e0b8d[_0x2003f5(0x14a)]+'\x20('+config[_0x2003f5(0x1ff)]+')\x0a',_0x20d1e8+=_0x5e0b8d[_0x2003f5(0x21f)]+':\x20'+_0x5e0b8d[_0x2003f5(0x146)]+_0x2003f5(0x1c5)+config[_0x2003f5(0x1ff)]+')\x0a',_0x20d1e8+=_0x2003f5(0x12e),process[_0x2003f5(0x1c6)]({'telegrammsg':_0x20d1e8},_0x3ae6d8=>{});}async function sendPortfolioTelegram(){const _0x170d74=_0x119156;if(!coinsLoaded){process[_0x170d74(0x1c6)]({'telegrammsg':_0x170d74(0x12d)},_0x35c457=>{});return;}let _0x229365='';if(config[_0x170d74(0x188)])_0x229365=_0x170d74(0x231)+config[_0x170d74(0x144)]+_0x170d74(0xd7);else _0x229365=_0x170d74(0x151)+botID+_0x170d74(0xd7);_0x229365+='<pre>',_0x229365+=_0x170d74(0x154),_0x229365+=_0x170d74(0x148),_0x229365+=_0x170d74(0x154),currentCoins['forEach'](_0x143458=>{const _0x4f1c9c=_0x170d74;_0x229365+=_0x143458[_0x4f1c9c(0x17d)][_0x4f1c9c(0xc7)](0x7)+'|\x20'+formatPad(_0x143458[_0x4f1c9c(0x1a5)],0x2,0x6)+'|\x20'+formatPad(_0x143458[_0x4f1c9c(0x131)],0x2,0x6)+'|\x20'+formatPad(_0x143458['delta']*0x64,0x2,0x6)+'\x0a';}),_0x229365+='</pre>',process[_0x170d74(0x1c6)]({'telegrammsg':_0x229365},_0xe8cd1=>{});}function formatPad(_0x59f5ec,_0x699a6d,_0x2e6fa1){const _0x46ad7e=_0x119156,_0x3bf3a1=formatResultString(_0x59f5ec,_0x699a6d);return _0x3bf3a1?_0x3bf3a1[_0x46ad7e(0x150)](_0x2e6fa1):''['padStart'](_0x2e6fa1);}function logHistory(_0x59e235,_0x4817bc,_0x309ca5=''){const _0x350bd1=_0x119156;let _0x2955f9={'time':getTimeStamp(),'type':_0x59e235,'event':_0x4817bc};dbLogs['get']('logs')[_0x350bd1(0x104)](_0x2955f9)[_0x350bd1(0x1cf)]();if(_0x309ca5=='')_0x309ca5=_0x4817bc;proxyEmit('event',{'log':_0x2955f9,'summary':_0x309ca5}),process[_0x350bd1(0x1c6)]({'telegram':{..._0x2955f9,'botname':config[_0x350bd1(0x144)],'showname':config[_0x350bd1(0x188)]}},_0x3a94ce=>{}),logger[_0x350bd1(0x1e2)](''+_0x2955f9[_0x350bd1(0xf3)]);}function emitHistory(_0x140e86={}){const _0x301ea2=_0x119156;Object['keys'](_0x140e86)[_0x301ea2(0x1ab)]==0x0&&(_0x140e86={'type':[_0x301ea2(0xf6),_0x301ea2(0xf3)],'event':'','page':0x1});if(_0x140e86[_0x301ea2(0x20b)][_0x301ea2(0xd3)]('event'))_0x140e86['type'][_0x301ea2(0x1f0)](_0x140e86[_0x301ea2(0x20b)][_0x301ea2(0x153)](_0x301ea2(0xf3)),0x1,_0x301ea2(0xed),_0x301ea2(0x1bc),'success');if(dbLogs[_0x301ea2(0x1a8)](_0x301ea2(0x195))['value']()){let _0x31f331=dbLogs[_0x301ea2(0x11a)](_0x301ea2(0x195))[_0x301ea2(0x11f)](_0x599ae1=>{const _0x465961=_0x301ea2;if(_0x140e86[_0x465961(0x20b)][_0x465961(0x1ab)]==0x0)return![];else return _0x140e86[_0x465961(0x20b)][_0x465961(0xd3)](_0x599ae1[_0x465961(0x20b)]);})[_0x301ea2(0x11f)](_0x9c27e=>{const _0x4477a1=_0x301ea2;if(_0x140e86['event']=='')return!![];else return _0x9c27e[_0x4477a1(0xf3)]['toLowerCase']()[_0x4477a1(0xd3)](_0x140e86[_0x4477a1(0xf3)][_0x4477a1(0x1e7)]());})[_0x301ea2(0x13b)]('time'),_0x18fe10=_0x31f331[_0x301ea2(0x14a)]()[_0x301ea2(0x1ab)];_0x31f331=_0x31f331[_0x301ea2(0x130)]()[_0x301ea2(0xe9)]((_0x140e86[_0x301ea2(0x1fa)]-0x1)*logPageSize,_0x140e86[_0x301ea2(0x1fa)]*logPageSize-0x1)[_0x301ea2(0x130)]()[_0x301ea2(0x14a)](),proxyEmit(_0x301ea2(0x1ae),{'logs':_0x31f331,'total':_0x18fe10});}else proxyEmit(_0x301ea2(0x1ae),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x25d4c0){const _0x2eb78c=_0x119156;if(dbLogs[_0x2eb78c(0x1a8)](_0x2eb78c(0x195))[_0x2eb78c(0x14a)]()){const _0x4040b4=dbLogs['get'](_0x2eb78c(0x195))['sortBy'](_0x2eb78c(0x22f))[_0x2eb78c(0x11f)](_0x5ec297=>{const _0x29cfec=_0x2eb78c;return _0x5ec297[_0x29cfec(0x20b)]==_0x29cfec(0xf6);})[_0x2eb78c(0x14a)]();dbLogs[_0x2eb78c(0x11a)]('logs')[_0x2eb78c(0x177)]()[_0x2eb78c(0x1cf)](),dbLogs[_0x2eb78c(0x11a)](_0x2eb78c(0x195))[_0x2eb78c(0x119)](_0x4040b4)['write'](),emitHistory(_0x25d4c0);}}async function pauseBot(_0x4a948c=''){const _0x477744=_0x119156,_0x30f372=new Date()[_0x477744(0x13f)]();if(!lastErrorShown||_0x30f372-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x30f372;!lastBotPause?(lastBotPause=_0x30f372,consecutivePauses=0x1):(_0x30f372-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x477744(0x1c6)]({'stop':_0x477744(0x159)},_0x329512=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x4a948c)_0x4a948c+='\x20|\x20';logHistory(_0x477744(0xed),_0x4a948c+_0x477744(0x1d1)+pauseBotInterval/0xea60+_0x477744(0x1d5)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x400ec8=_0x119156;process[_0x400ec8(0x1c6)]({'stop':'kill'},_0x2ce0f5=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3b84e3,_0x3770c9){const _0x34705c=_0x119156;if(_0x3b84e3[_0x34705c(0xb9)]()['includes']('API-key\x20format\x20invalid'))return logHistory(_0x34705c(0xed),config[_0x34705c(0x18c)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x3b84e3['toString']()[_0x34705c(0xd3)](_0x34705c(0x14d)))return logHistory('error',config[_0x34705c(0x18c)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x3b84e3['toString']()[_0x34705c(0xd3)](_0x34705c(0x160)))return logHistory(_0x34705c(0xed),config[_0x34705c(0x18c)]+_0x34705c(0x1e9)),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x3b84e3,_0x3770c9);}}}async function handleError(_0x68b25,_0x183d4e,_0x44f5c4=''){const _0xce25cf=_0x119156,_0x27fadd=config[_0xce25cf(0x18c)]||'Exchange';if(_0x68b25['toString']()[_0xce25cf(0xd3)](_0xce25cf(0x13c)))await pauseBot(config[_0xce25cf(0x18c)]+_0xce25cf(0x166));else{if(_0x68b25[_0xce25cf(0xb9)]()['includes']('ExchangeNotAvailable'))await pauseBot(config['exchange']+_0xce25cf(0x168));else{if(_0x68b25['toString']()[_0xce25cf(0xd3)](_0xce25cf(0xe6)))await pauseBot(config[_0xce25cf(0x18c)]+_0xce25cf(0x1b4));else{if(_0x68b25['toString']()[_0xce25cf(0xd3)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0xce25cf(0x217));else{if(_0x68b25[_0xce25cf(0xb9)]()[_0xce25cf(0xd3)](_0xce25cf(0x1df)))logHistory(_0xce25cf(0xed),_0x183d4e+_0xce25cf(0xc9)),logHistory(_0xce25cf(0xed),_0xce25cf(0x197)),await killBot();else{if(_0x68b25[_0xce25cf(0xb9)]()[_0xce25cf(0xd3)]('InvalidNonce'))logHistory(_0xce25cf(0xed),_0x183d4e+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x68b25['toString']()[_0xce25cf(0xd3)](_0xce25cf(0x14c)))logHistory(_0xce25cf(0xed),_0x183d4e+_0xce25cf(0x1c9)+config[_0xce25cf(0x18c)]+_0xce25cf(0x101)),logHistory(_0xce25cf(0xed),_0xce25cf(0x197)),await killBot();else{if(_0x68b25['toString']()[_0xce25cf(0xd3)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xce25cf(0xed),_0x183d4e+'\x20|\x20'+config[_0xce25cf(0x18c)]+_0xce25cf(0x1a6)),logHistory(_0xce25cf(0xed),_0xce25cf(0x197)),await killBot();else{if(_0x68b25[_0xce25cf(0xb9)]()[_0xce25cf(0xd3)](_0xce25cf(0x160)))logHistory(_0xce25cf(0xed),_0x183d4e+_0xce25cf(0x1c9)+config['exchange']+_0xce25cf(0xd2)),logHistory('error',_0xce25cf(0x197)),await killBot();else _0x68b25[_0xce25cf(0xb9)]()['includes'](_0xce25cf(0xfc))?logHistory(_0xce25cf(0xed),_0x183d4e+_0xce25cf(0xc0)+_0x44f5c4):(logger['full'](_0x183d4e+'\x20|\x20Error\x20details:\x20',_0x68b25),await pauseBot(_0xce25cf(0x1a3)));}}}}}}}}}function formatResult(_0x27fa73,_0xdb415a){return parseFloat(_0x27fa73['toFixed'](_0xdb415a));}function formatResultTruncate(_0x4e2b5e,_0x5e92ce){const _0x5a9575=_0x119156;let _0x31fd56=formatResultString(_0x4e2b5e,0xa),_0x264ca8=_0x31fd56[_0x5a9575(0x153)]('.');return _0x264ca8!=-0x1&&(_0x31fd56=_0x31fd56[_0x5a9575(0xe9)](0x0,_0x264ca8+_0x5e92ce+0x1)),Number(_0x31fd56);}function formatResultString(_0x88b2ce,_0x212828){const _0x444658=_0x119156;let _0x6d0bff;if(!(''+_0x88b2ce)[_0x444658(0xd3)]('e'))_0x6d0bff=+(Math[_0x444658(0x155)](_0x88b2ce+'e+'+_0x212828)+'e-'+_0x212828);else{let _0x3ba3fa=(''+_0x88b2ce)[_0x444658(0x1db)]('e'),_0x2e9664='';+_0x3ba3fa[0x1]+_0x212828>0x0&&(_0x2e9664='+'),_0x6d0bff=+(Math['round'](+_0x3ba3fa[0x0]+'e'+_0x2e9664+(+_0x3ba3fa[0x1]+_0x212828))+'e-'+_0x212828);}return Number(_0x6d0bff)['toFixed'](_0x212828);}function getServerTime(){const _0x510fda=_0x119156,_0x369893=new Date();return _0x369893[_0x510fda(0x203)]()+'/'+(_0x369893['getMonth']()+0x1)[_0x510fda(0xb9)]()['padStart'](0x2,'0')+'/'+_0x369893[_0x510fda(0x15e)]()[_0x510fda(0xb9)]()[_0x510fda(0x150)](0x2,'0')+'\x20'+_0x369893['getHours']()[_0x510fda(0xb9)]()['padStart'](0x2,'0')+':'+_0x369893[_0x510fda(0xea)]()[_0x510fda(0xb9)]()[_0x510fda(0x150)](0x2,'0')+':'+_0x369893[_0x510fda(0x1c8)]()[_0x510fda(0xb9)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x599e09=_0x119156,_0x35fdf2=shiftedTime();return _0x35fdf2['getFullYear']()+'/'+(_0x35fdf2[_0x599e09(0xce)]()+0x1)[_0x599e09(0xb9)]()[_0x599e09(0x150)](0x2,'0')+'/'+_0x35fdf2[_0x599e09(0x15e)]()[_0x599e09(0xb9)]()[_0x599e09(0x150)](0x2,'0')+'\x20'+_0x35fdf2[_0x599e09(0x12f)]()[_0x599e09(0xb9)]()[_0x599e09(0x150)](0x2,'0')+':'+_0x35fdf2[_0x599e09(0xea)]()[_0x599e09(0xb9)]()[_0x599e09(0x150)](0x2,'0')+':'+_0x35fdf2[_0x599e09(0x1c8)]()[_0x599e09(0xb9)]()['padStart'](0x2,'0');}function getDate(){const _0x203212=_0x119156,_0x5bc68a=shiftedTime();return _0x5bc68a['getFullYear']()+'/'+(_0x5bc68a[_0x203212(0xce)]()+0x1)[_0x203212(0xb9)]()[_0x203212(0x150)](0x2,'0')+'/'+_0x5bc68a['getDate']()['toString']()[_0x203212(0x150)](0x2,'0');}function getHour(){const _0x5a2e26=_0x119156,_0x3bd743=shiftedTime();return _0x3bd743[_0x5a2e26(0x12f)]()[_0x5a2e26(0xb9)]()[_0x5a2e26(0x150)](0x2,'0');}function sleep(_0x8ea5c4){return new Promise(_0x47cacc=>setTimeout(_0x47cacc,_0x8ea5c4));}function shiftedTime(){const _0x5a7050=_0x119156,_0x2e3997=new Date();let _0x15a80d=_0x2e3997;if(config&&config[_0x5a7050(0x16d)]!==0x0)_0x15a80d=fns[_0x5a7050(0x1bf)](_0x2e3997,{'hours':config[_0x5a7050(0x16d)]});return _0x15a80d;}function timer(_0x5c539f){const _0x1f17ac=_0x119156,_0x14d560=new Date();!lasttime?console[_0x1f17ac(0x1c3)](getTimeStamp()+_0x1f17ac(0x135),_0x5c539f,_0x14d560):console[_0x1f17ac(0x1c3)](getTimeStamp()+':\x20timer\x20>',_0x5c539f,(_0x14d560-lasttime)/0x3e8),lasttime=_0x14d560;}