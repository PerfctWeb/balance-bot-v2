const _0x35d2d0=_0x3e24;(function(_0x1fe8e5,_0xea6fcb){const _0x5a96bd=_0x3e24,_0x33af57=_0x1fe8e5();while(!![]){try{const _0x5df843=parseInt(_0x5a96bd(0x30a))/0x1+-parseInt(_0x5a96bd(0x29e))/0x2*(parseInt(_0x5a96bd(0x2c5))/0x3)+-parseInt(_0x5a96bd(0x228))/0x4*(parseInt(_0x5a96bd(0x31d))/0x5)+-parseInt(_0x5a96bd(0x1f0))/0x6*(parseInt(_0x5a96bd(0x234))/0x7)+-parseInt(_0x5a96bd(0x222))/0x8+parseInt(_0x5a96bd(0x1a1))/0x9*(-parseInt(_0x5a96bd(0x1fb))/0xa)+parseInt(_0x5a96bd(0x296))/0xb*(parseInt(_0x5a96bd(0x2c1))/0xc);if(_0x5df843===_0xea6fcb)break;else _0x33af57['push'](_0x33af57['shift']());}catch(_0x44a7bd){_0x33af57['push'](_0x33af57['shift']());}}}(_0x1e15,0xdc8a7));const _0x155f13=function(){let _0x21bfac=!![];return function(_0x54dd80,_0x400485){const _0x5b5856=_0x21bfac?function(){const _0x17ddf9=_0x3e24;if(_0x400485){const _0x420fc8=_0x400485[_0x17ddf9(0x1af)](_0x54dd80,arguments);return _0x400485=null,_0x420fc8;}}:function(){};return _0x21bfac=![],_0x5b5856;};}(),_0x224ae9=_0x155f13(this,function(){const _0x477cfa=_0x3e24;return _0x224ae9['toString']()[_0x477cfa(0x23f)](_0x477cfa(0x2da))[_0x477cfa(0x211)]()[_0x477cfa(0x1d3)](_0x224ae9)['search'](_0x477cfa(0x2da));});_0x224ae9();'use strict';const ccxt=require('ccxt'),low=require(_0x35d2d0(0x1a9)),FileSync=require(_0x35d2d0(0x27a)),fs=require('fs'),fns=require(_0x35d2d0(0x31c)),Crypt=require(_0x35d2d0(0x28e))[_0x35d2d0(0x294)],util=require('util'),argv=require(_0x35d2d0(0x1dc))(process[_0x35d2d0(0x1fe)][_0x35d2d0(0x2c2)](0x2))[_0x35d2d0(0x1fe)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x35d2d0(0x173),_0x35d2d0(0x316),'USDT',_0x35d2d0(0x20a),_0x35d2d0(0x246)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x35d2d0(0x282)+pauseBotInterval/0xea60+_0x35d2d0(0x2d8),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x35d2d0(0x252))[_0x35d2d0(0x1f9)],botID=process[_0x35d2d0(0x1fe)][0x2]||_0x35d2d0(0x2e6),pattern=/^[0-9]{3}$/;!pattern[_0x35d2d0(0x292)](botID)&&(console[_0x35d2d0(0x308)](_0x35d2d0(0x18d)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x35d2d0(0x1fe)][0x3]||'',configpath=userID?_0x35d2d0(0x176)+userID+'/':_0x35d2d0(0x176),logspath=userID?_0x35d2d0(0x22e)+userID+'/':_0x35d2d0(0x22e),loggerfile=fs[_0x35d2d0(0x1cb)](logspath+_0x35d2d0(0x183),{'flags':'a'});!fs[_0x35d2d0(0x2f8)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x35d2d0(0x25d)](logspath);const configfile=configpath+_0x35d2d0(0x1c5)+botID+_0x35d2d0(0x326),logfile=configpath+_0x35d2d0(0x1c5)+botID+_0x35d2d0(0x253),performancefile=configpath+'bot-'+botID+_0x35d2d0(0x311),coinresultsfile=configpath+_0x35d2d0(0x1c5)+botID+_0x35d2d0(0x272),settingsfile=configpath+_0x35d2d0(0x2e9),securefile=configpath+_0x35d2d0(0x214),configbackuppath=configpath+_0x35d2d0(0x208),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x35d2d0(0x265)]({'logs':[],'version':serverversion})[_0x35d2d0(0x241)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x35d2d0(0x241)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x35d2d0(0x265)]({'bot':[],'version':serverversion})[_0x35d2d0(0x241)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x35d2d0(0x265)]({'coins':[],'version':serverversion})[_0x35d2d0(0x241)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x35d2d0(0x1db),'rsaStandard':_0x35d2d0(0x2e8)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x558d6e=>{const _0x5ded0a=_0x35d2d0;console[_0x5ded0a(0x308)](_0x558d6e);},'simple':_0x216eb5=>{const _0x18e18e=_0x35d2d0;console[_0x18e18e(0x308)](_0x216eb5),loggerfile['write'](util['format'](_0x216eb5)+'\x0a');},'full':async(_0x5d598a,_0x12b8f7='')=>{const _0x1143fa=_0x35d2d0;let _0x419df2;if(config[_0x1143fa(0x23e)])_0x419df2=getTimeStamp()+':\x20'+config[_0x1143fa(0x1c8)]+'\x20>\x20'+_0x5d598a;else _0x419df2=getTimeStamp()+_0x1143fa(0x2f4)+botID+_0x1143fa(0x2d2)+_0x5d598a;console[_0x1143fa(0x308)](_0x419df2),loggerfile[_0x1143fa(0x241)](util[_0x1143fa(0x237)](_0x419df2)+'\x0a'),_0x12b8f7&&(console[_0x1143fa(0x308)](_0x12b8f7),loggerfile['write'](util['format'](_0x12b8f7)+'\x0a'));},'debug':async(_0xea82b0,_0x34b288='')=>{const _0x21e15e=_0x35d2d0;let _0x1538be;if(config[_0x21e15e(0x23e)])_0x1538be=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0xea82b0;else _0x1538be=getTimeStamp()+_0x21e15e(0x2f4)+botID+_0x21e15e(0x289)+_0xea82b0;if(debugging)console['log'](_0x1538be);loggerfile[_0x21e15e(0x241)](util[_0x21e15e(0x237)](_0x1538be)+'\x0a');if(_0x34b288){if(debugging)console[_0x21e15e(0x308)](_0x34b288);loggerfile['write'](util[_0x21e15e(0x237)](_0x34b288)+'\x0a');}}};process['on'](_0x35d2d0(0x1e2),function(_0xc2b74e){const _0x3f6546=_0x35d2d0;handleError(_0xc2b74e,_0x3f6546(0x1e2));});settings[_0x35d2d0(0x322)]!=config[_0x35d2d0(0x322)]&&updateTimeshift(settings[_0x35d2d0(0x322)]);settings[_0x35d2d0(0x2a4)]!=config[_0x35d2d0(0x2a4)]&&updateOnepagemode(settings['onepagemode']);function _0x1e15(){const _0x4774da=['running','total','Headless:\x20','\x20value','getHours','\x20change','Reset\x20|\x20','placeOrder()','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','marketcapsqrt','/output-000.log','kill','getStartingBalances','cancel','toUpperCase','Fee\x20discount\x20refund\x20detected:\x20','getTime','code','unlinkSync','netoffset','Error:\x20Invalid\x20argument\x20','complete','filter','portfolio','2\x20-\x20handling\x20FILLED\x20order:\x20','buy','Bybit','sort','0\x20-\x20EXECUTION:\x20','added','set','\x20uses\x20','exec','1\x20-\x20Handle\x20open\x20orders','filled','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','differenceInSeconds','recovery','breakeven','\x20metrics:</b>\x20\x0a\x0a','171HuYOTQ','basecoin','starting-balance-','sell','process\x20','fetchClosedOrders','pro','function','lowdb','fetchBalance','pop','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','USDT','\x20has\x20a\x2024h\x20drop\x20of\x20','apply','value','botID','***','RETRY\x20-\x20Problem\x20resolved\x20after\x20','threshold','delta','</pre>','Resetting\x20coin\x20results:\x20','\x20minutes\x20-\x20','RETRY\x20-\x20Error\x20in\x20','data','initclient','watchTrades','push','Order\x20filled:\x20','performance','getPortfolio','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Order\x20is\x20invalid:\x20','sqrt','forEach','bot-','eur','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','botname','2.5.0','valid','createWriteStream','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','map','marketcap','no\x20open\x20orders','getSeconds','padEnd','padStart','constructor','fetchOpenOrders','status\x20code\x20401','Exception\x20thrown\x20in\x20','canceled','type','autoliquidity','timeout','sha256','yargs/yargs','\x20|\x20Custom\x20ID:\x20','market_cap','Error\x20while\x20deleting\x20files:\x20','\x20hour','2.3.5','uncaughtException','startprice',':\x20timer\x20>','2.6.23','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','amount','buys','event-history','has','LOCKED','\x20|\x20','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','cloneDeep','watchTradesForSymbols','6APvyPr','getMinutes','includes','Unknown\x20error:\x20','initial','getCoinNumber()','startnumber','Net\x20effect','Order(s)\x20not\x20validated\x20after\x20','version','fee','751270tyfxbd','watchTradesForSymbols()','Exchange','argv','BNB/','split','net-fiat','exchange','<pre>','length','InvalidNonce','-------------------------------\x0a','OnMaintenance','/backup/','Order\x20amount\x20is\x20invalid:\x20','USDC','PAXG','change','secure','RateLimitExceeded','timestamp','password','toString','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','fees','bb-secure.json','trade','No\x20more\x20open\x20orders\x20-\x20','target','Loading\x20completed','keys','net-basecoin','abs','************','price','coin','limits','Invalid\x20API\x20key,\x20secret\x20or\x20password\x20entered','removed','12978768XkaeGv','\x20MB','balances','exchange\x20reloaded','Trigger:\x20','red_yellow_blue','205876vswjMN','PermissionDenied','Cooldown\x20ended\x20-\x20balancing\x20resumed','cost','Unfilled\x20order(s)\x20canceled\x20after\x20','USD','./logs/','orderstatus','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','find','\x20portfolio:</b>\x20\x0a\x0a','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','4393949hFgWcI','UNLOCKING','args','format','ongoing','usd','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','realized','Resetting\x20bot\x20history','success','showname','search','Initiating\x20bot\x20restart','write','<b>Bot\x20','sendPortfolioTelegram','NetworkError','watchTrades()','USDP','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','exchanges','distribution','Invalid\x20symbol:\x20','\x20API\x20key\x20is\x20invalid','change24h','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','reverse','amountToPrecision','market','MIN_NOTIONAL','./version.json','-events.json','average','startsWith','Resuming\x20(','writeFile','AuthenticationError','BTC','fiat','decrypt','\x20attempts','mkdirSync','date','recreate','OrderNotFound','sells','get','ORDERS.UNLOCKED','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','defaults','configuration-stored','Net\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getCoins()','slider','apiKey','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','max','error','loadMarkets','switch-manual','limit','-results.json','customId','2\x20-\x20Orders\x20unlocked','getPortfolio(2)','starting-balances','replace','Network\x20error\x20details:','Manual\x20balancing\x20required','lowdb/adapters/FileSync','BNB','cancelOrder','order','Binance','Invalid\x20quantity','Symbol(s):\x20','loading-canceled','\x20>\x20pausing\x20bot\x20for\x20','sortBy','\x20:\x20','InvalidOrder','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20>\x20[DEBUG]\x20','indexOf','symbol','\x20orders\x20in\x20less\x20than\x20','orderId','hybrid-crypto-js','marketcapEnabled','remove','startdate','test','privateKey','Crypt','round','209Qtpbfx','side','RequestTimeout','InsufficientFunds','status','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','loadSymbols()','liquidity','2522148oZySuM','min','shift','\x20order:\x20','bots','%\x20(','onepagemode','send','Error\x20details:','none','headless','excluded','ORDERS.LOCKED','open','progress','assign','getDate','\x20-\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','changes','Bot\x20','Saving\x20configuration','DDoSProtection','substring','emitHistory','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','quick','recent20','balancing\x20resumes\x20when\x20cooldown\x20ends','getFullYear','Exchange\x20details:\x20','\x20|\x20exchange:\x20','isEqual','pid','3664716KvHDCG','slice','entries','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','3WzbyOc','coins','quote','Cryptocom','offset','getMonth','remainingSymbols','datetime','detectLiquidityChange()','Executed\x20','warning','milliseconds','ordertype','\x20>\x20','highest','toLowerCase','yyyy/MM/dd','initTickers()','active','\x20minutes','\x20>\x20details:','(((.+)+)+)+$','enabled','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','openOrders','createOrder','configuration','\x20API\x20secret\x20is\x20invalid','apiSecret','spot','fetchTickers','coin-loading-progress','001','resetHistory','RSA-OAEP','bb-settings.json','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','ORDERS.UNLOCKING','placeOrder','getPortfolio(1)','storeFiat','event','random','marketcapApi','API-key\x20format\x20invalid','ETH',':\x20Bot\x20','parse','Block\x20transaction\x20detection:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','existsSync','\x20exchange\x20error:\x20','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','final','apiPassword','EUR','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','deleteHistoryAlerts','add','limit-low','emojisell','toFixed','message','full','balancing\x20resumed','log','page','502629tEkduZ','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','cooldown','splice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','logs','<b>','-performance.json','watchOrders','number','Huobipro',')\x20|\x20exchange:\x20','TUSD','showConfig','1\x20-\x20FILLED\x20known\x20order:\x20','closed','findIndex','Huobi','date-fns','45lByVMC','fetchTicker','bot','time','leftTxt','timeshift','emojibuy','limit-high','Portfolio\x20change\x20detected:\x20','-config.json','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','request-time','getPortfolio(0)','rightTxt','.json','stringify','debug','colorscheme','UNLOCKED','2\x20-\x20Validate\x20orders:\x20','basecoinvalue','Failed\x20to\x20load\x20coin\x20data\x20for\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Config\x20details:\x20','join','fetchTickers()','recreateCoinResults()','Waited\x20','last','BUSD','Limit\x20(high-margin)','ExchangeError','./config/','currency','update-liquidity'];_0x1e15=function(){return _0x4774da;};return _0x1e15();}(settings[_0x35d2d0(0x2f1)]&&!config[_0x35d2d0(0x2f1)]||!settings[_0x35d2d0(0x2f1)]&&config[_0x35d2d0(0x2f1)])&&updateMarketcapApi(settings[_0x35d2d0(0x2f1)]);process[_0x35d2d0(0x2a5)]({'started':_0x35d2d0(0x179)},_0x37fb58=>{}),initializeProcessListeners();function proxyEmit(_0x51ba68,_0x23b8af=null){const _0x388164=_0x35d2d0;process[_0x388164(0x2a5)]({'function':_0x51ba68,'args':_0x23b8af},_0x9571d6=>{});}function initializeProcessListeners(){const _0x3f621e=_0x35d2d0;process['on'](_0x3f621e(0x305),_0x5e47f3=>{const _0x1f4592=_0x3f621e;switch(Object[_0x1f4592(0x219)](_0x5e47f3)[0x0]){case'timeshift':_0x5e47f3[_0x1f4592(0x322)]!=undefined&&(settings['timeshift']=_0x5e47f3[_0x1f4592(0x322)],updateTimeshift(settings['timeshift']));break;case _0x1f4592(0x2a4):_0x5e47f3['onepagemode']!=undefined&&(settings[_0x1f4592(0x2a4)]=_0x5e47f3[_0x1f4592(0x2a4)],updateOnepagemode(settings['onepagemode']));break;case _0x1f4592(0x2f1):_0x5e47f3[_0x1f4592(0x2f1)]!=undefined&&(settings[_0x1f4592(0x2f1)]=_0x5e47f3[_0x1f4592(0x2f1)],updateMarketcapApi(settings['marketcapApi']));break;case _0x1f4592(0x2a2):_0x5e47f3[_0x1f4592(0x2a2)]!=undefined&&(bots=JSON[_0x1f4592(0x2f5)](_0x5e47f3[_0x1f4592(0x2a2)]),proxyEmit(_0x1f4592(0x2a2),bots));break;case _0x1f4592(0x1a8):switch(_0x5e47f3[_0x1f4592(0x1a8)]){case _0x1f4592(0x1bb):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x1f4592(0x2b6):emitHistory(_0x5e47f3[_0x1f4592(0x236)]);break;case _0x1f4592(0x300):deleteHistoryAlerts(_0x5e47f3[_0x1f4592(0x236)]);break;case _0x1f4592(0x1c0):getPortfolio(_0x5e47f3[_0x1f4592(0x236)]);break;case'storeConfiguration':storeConfiguration(_0x5e47f3[_0x1f4592(0x236)]);break;case'storeHeadless':storeHeadless(_0x5e47f3[_0x1f4592(0x236)]);break;case _0x1f4592(0x2ee):storeFiat(_0x5e47f3[_0x1f4592(0x236)]);break;case _0x1f4592(0x2e7):resetHistory();break;case _0x1f4592(0x185):getStartingBalances(getNormalizedPerformance());break;case _0x1f4592(0x2ec):placeOrder(_0x5e47f3['args']);break;case'cancelLoading':cancelLoading();break;case _0x1f4592(0x317):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x1f4592(0x243):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x5489e0=![]){const _0x807181=_0x35d2d0;logger['debug'](_0x807181(0x17f)+(_0x5489e0?_0x807181(0x225):'exchange\x20not\x20reloaded')+_0x807181(0x2be)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x5489e0)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x807181(0x26b)]!=''&&config['apiKey']!=_0x807181(0x1b2)){loadingProgress=0x0;if(_0x5489e0){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x1bc6aa){handleErrorNoStop(_0x1bc6aa,_0x807181(0x29c));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4273db=await getCoins();[currentCoins,currentCoinsAll]=_0x4273db,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x807181(0x218)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x807181(0x204)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x486846=![]){const _0x3ff888=_0x35d2d0;logger[_0x3ff888(0x32d)](_0x3ff888(0x256)+(_0x486846?_0x3ff888(0x2b9):_0x3ff888(0x18e))+_0x3ff888(0x315)+config[_0x3ff888(0x202)]);if(pidBalances)clearTimeout(pidBalances);if(_0x486846){getBalances();return;}coinsLoaded=![];if(config[_0x3ff888(0x26b)]!=''&&config[_0x3ff888(0x26b)]!=_0x3ff888(0x1b2)){loadingProgress=0x1;const _0x183994=await getCoins();[currentCoins,currentCoinsAll]=_0x183994,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3ff888(0x32d)](_0x3ff888(0x218)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3ff888(0x204)]==0x0&&allOpenOrders[_0x3ff888(0x204)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1e1d3d){const _0x196cff=_0x35d2d0;let _0x296686=![];if(_0x1e1d3d)_0x296686=!![];let _0x52aec5;_0x296686?_0x52aec5=_0x1e1d3d[_0x196cff(0x1cd)](_0x506350=>_0x506350[_0x196cff(0x21e)]):_0x52aec5=currentCoinsAll['map'](_0x1d035c=>_0x1d035c[_0x196cff(0x21e)]);if(!config[_0x196cff(0x2f1)]||!_0x296686&&!config[_0x196cff(0x28f)]||_0x52aec5[_0x196cff(0x204)]==0x0)return;let _0x293730=null;try{_0x293730=await axios[_0x196cff(0x262)](_0x196cff(0x1e6),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x196cff(0x2f1)]},'params':{'symbol':_0x52aec5['toString']()}});}catch(_0x1c8967){_0x293730=null,_0x1c8967[_0x196cff(0x211)]()[_0x196cff(0x1f2)](_0x196cff(0x1d5))?(config[_0x196cff(0x2f1)]=![],updateConfig(),proxyEmit(_0x196cff(0x2e0),emittedConfiguration()),logHistory('error','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x196cff(0x26e),_0x196cff(0x2f7)+schedulerInterval/(0x3c*0x3e8)+_0x196cff(0x2d8)),logger[_0x196cff(0x32d)](_0x196cff(0x2a6),_0x1c8967[_0x196cff(0x211)]()+_0x196cff(0x2af)+_0x1c8967[_0x196cff(0x18a)]));}if(_0x293730){let _0x106220=0x0;const _0x5cca8f=_0x293730[_0x196cff(0x1ba)];_0x52aec5[_0x196cff(0x1c4)](_0x129cfe=>{const _0x244d17=_0x196cff;if(_0x5cca8f['data'][_0x129cfe][0x0])_0x106220+=_0x5cca8f[_0x244d17(0x1ba)][_0x129cfe][0x0][_0x244d17(0x2c7)][_0x244d17(0x22d)][_0x244d17(0x1de)];}),_0x52aec5['forEach'](_0x387d4a=>{const _0x11f9ab=_0x196cff,_0x56bfd3=_0x5cca8f[_0x11f9ab(0x1ba)][_0x387d4a][0x0]?_0x5cca8f[_0x11f9ab(0x1ba)][_0x387d4a][0x0]['quote'][_0x11f9ab(0x22d)]['market_cap']:0x0;if(_0x296686){const _0x1a646e=_0x1e1d3d[_0x11f9ab(0x231)](_0x26c763=>_0x26c763['coin']==_0x387d4a);_0x1a646e&&(_0x1a646e[_0x11f9ab(0x1ce)]=_0x56bfd3);}else{const _0x2640bd=currentCoins[_0x11f9ab(0x231)](_0x50327f=>_0x50327f[_0x11f9ab(0x21e)]==_0x387d4a);_0x2640bd&&(_0x2640bd[_0x11f9ab(0x1ce)]=_0x56bfd3);const _0x57ebd2=currentCoinsAll[_0x11f9ab(0x231)](_0x4cd6b0=>_0x4cd6b0[_0x11f9ab(0x21e)]==_0x387d4a);_0x57ebd2&&(_0x57ebd2[_0x11f9ab(0x1ce)]=_0x56bfd3);}}),!_0x296686&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x5e4622=_0x35d2d0,_0x176fce=0x2;let _0x265f0a=0x0,_0x1fc381=0x0,_0x548ca4=0x0,_0x340047=0x0,_0x2a911c=0x0;config[_0x5e4622(0x190)][_0x5e4622(0x1c4)](_0x429daf=>{const _0x3a0ff0=_0x5e4622;if(!_0x429daf[_0x3a0ff0(0x2a9)]){_0x548ca4++,_0x265f0a+=_0x429daf[_0x3a0ff0(0x26a)];if(_0x429daf[_0x3a0ff0(0x26a)]===-0x1){_0x265f0a++;const _0x5808a0=currentCoinsAll[_0x3a0ff0(0x231)](_0x2df308=>_0x2df308[_0x3a0ff0(0x21e)]==_0x429daf['coin']);_0x5808a0&&(_0x340047+=_0x5808a0[_0x3a0ff0(0x1ce)],_0x2a911c+=Math[_0x3a0ff0(0x1c3)](_0x5808a0['marketcap']));}if(_0x429daf[_0x3a0ff0(0x26a)]!==-0x1)_0x1fc381++;}});let _0x4a9e9f;const _0x24b6bf=0x64-_0x265f0a,_0x301c60=_0x548ca4-_0x1fc381;_0x4a9e9f=_0x301c60===0x0?_0x265f0a:Math[_0x5e4622(0x26d)](0x64,_0x265f0a),config[_0x5e4622(0x190)]['forEach'](_0xdc51a1=>{const _0x4e363c=_0x5e4622,_0x4e1b7a=currentCoinsAll['find'](_0x916c14=>_0x916c14[_0x4e363c(0x21e)]==_0xdc51a1[_0x4e363c(0x21e)]);_0x4e1b7a&&(_0xdc51a1[_0x4e363c(0x1ce)]=_0x4e1b7a['marketcap']);if(!_0xdc51a1[_0x4e363c(0x2a9)]){if(_0x4a9e9f<=0x64){if(_0xdc51a1[_0x4e363c(0x26a)]===-0x1){if(_0x340047!==0x0&&config[_0x4e363c(0x28f)]){if(_0x4e1b7a){if(config['marketcapEnabled']=='marketcap')_0xdc51a1['distribution']=(_0x24b6bf/(_0x340047/_0x4e1b7a['marketcap']))['toFixed'](_0x176fce);else config[_0x4e363c(0x28f)]==_0x4e363c(0x182)&&(_0xdc51a1[_0x4e363c(0x249)]=(_0x24b6bf/(_0x2a911c/Math[_0x4e363c(0x1c3)](_0x4e1b7a[_0x4e363c(0x1ce)])))['toFixed'](_0x176fce));}}}}}}),updateConfig();}function updateConfig(){const _0x31062c=_0x35d2d0;let _0x57f24a=dbConfig[_0x31062c(0x262)]('bot')[_0x31062c(0x231)]({'botID':botID})[_0x31062c(0x1b0)]();_0x57f24a&&dbConfig[_0x31062c(0x262)](_0x31062c(0x31f))['find']({'botID':botID})[_0x31062c(0x2ad)](config)[_0x31062c(0x241)]();}async function startScheduler(){const _0x56da31=_0x35d2d0,_0x24b86d=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x56da31(0x32d)](_0x56da31(0x1a5)+process[_0x56da31(0x2c0)]+_0x56da31(0x198)+_0x24b86d+_0x56da31(0x223)),getMarketCap(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x3a8390=![]){const _0x1b328d=_0x35d2d0;logger['debug'](_0x1b328d(0x240));if(!_0x3a8390)while(lockOrders!=ORDERS[_0x1b328d(0x32f)]||coolingDown){await sleep(0xa*0x3e8);}process[_0x1b328d(0x2a5)]({'stop':'restart'},_0x5f0a7e=>{});}async function initExchange(_0x25556b=config[_0x35d2d0(0x202)],_0x5a4419=config[_0x35d2d0(0x26b)],_0x5b97e2=config[_0x35d2d0(0x2e2)],_0x22b0f3=config[_0x35d2d0(0x2fd)]){const _0x34468e=_0x35d2d0;!supportedExchanges()[_0x34468e(0x1f2)](_0x25556b)&&(logHistory(_0x34468e(0x26e),_0x34468e(0x23a)+_0x25556b+'\x20exchange'),killBot());const _0xce8df8=ccxt[_0x34468e(0x1a7)][_0x25556b['toLowerCase']()];exchange=new _0xce8df8({'apiKey':_0x5a4419,'secret':_0x5b97e2,'options':{'defaultType':'spot'}});if(_0x22b0f3)exchange[_0x34468e(0x210)]=_0x22b0f3;}function updateExchange(_0x2ee1ad,_0x403af7,_0x7a5d50=null){const _0x5d17ad=_0x35d2d0;exchange['apiKey']=_0x2ee1ad,exchange['apiSecret']=_0x403af7,exchange[_0x5d17ad(0x2fd)]=_0x7a5d50,logger[_0x5d17ad(0x32d)](_0x5d17ad(0x1ed));}function setStableCoins(){const _0x249aa3=_0x35d2d0;let _0x50ba34=config[_0x249aa3(0x1a2)]==_0x249aa3(0x2f3)?_0x249aa3(0x2f3):config['basecoin']=='PAXG'?_0x249aa3(0x20b):'BTC',_0x3567eb=!allSymbols[_0x249aa3(0x1f2)](_0x50ba34+'/USD')?_0x249aa3(0x1ad):_0x249aa3(0x22d),_0x5d1857=!allSymbols[_0x249aa3(0x1f2)](_0x50ba34+'/EUR')?_0x3567eb:_0x249aa3(0x2fe);stablecoins={'eur':{'coin':''+_0x50ba34+_0x5d1857,'symbol':_0x50ba34+'/'+_0x5d1857},'usd':{'coin':''+_0x50ba34+_0x3567eb,'symbol':_0x50ba34+'/'+_0x3567eb}};}async function initwsCcxt(){const _0x28f582=_0x35d2d0;initCycle++;const _0x2c8d99=initCycle;let _0xcad010=[];config[_0x28f582(0x190)][_0x28f582(0x1c4)](_0x11db55=>{const _0x48dfcc=_0x28f582;if(!_0x11db55['excluded']&&_0x11db55[_0x48dfcc(0x21e)]!=config[_0x48dfcc(0x1a2)])_0xcad010[_0x48dfcc(0x1bd)](_0x11db55[_0x48dfcc(0x28b)]);});if(!_0xcad010['includes'](stablecoins[_0x28f582(0x1c6)]['symbol']))_0xcad010[_0x28f582(0x1bd)](stablecoins['eur'][_0x28f582(0x28b)]);if(!_0xcad010[_0x28f582(0x1f2)](stablecoins[_0x28f582(0x239)][_0x28f582(0x28b)]))_0xcad010['push'](stablecoins['usd']['symbol']);if(config[_0x28f582(0x202)][_0x28f582(0x255)](_0x28f582(0x27e))&&config[_0x28f582(0x1a2)]!='PAXG'){if(!_0xcad010[_0x28f582(0x1f2)](_0x28f582(0x1ff)+config[_0x28f582(0x1a2)]))_0xcad010[_0x28f582(0x1bd)](_0x28f582(0x1ff)+config[_0x28f582(0x1a2)]);}loadCoins(_0xcad010),_0xcad010=validateSymbols(_0xcad010);const _0x33ae01=async _0x3009d9=>{const _0x2a1b49=_0x28f582;let _0x44a2de;try{const _0x4db626=await getTickers(_0x3009d9);Object[_0x2a1b49(0x2c3)](_0x4db626)[_0x2a1b49(0x1c4)](_0x4692d0=>{const _0x31da8c=_0x2a1b49;_0x44a2de=_0x4692d0[0x1][_0x31da8c(0x28b)],gTicker[noslash(_0x44a2de)]=_0x4692d0[0x1][_0x31da8c(0x172)],gChange[_0x44a2de]=_0x4692d0[0x1]['percentage'];});}catch(_0x4a9c03){await handleError(_0x4a9c03,_0x2a1b49(0x2d6),_0x44a2de);}},_0x30663d=async _0x2e0115=>{const _0x1c6c31=_0x28f582;while(initCycle==_0x2c8d99){if(!botPaused)try{const _0x3b6f90=await exchange[_0x1c6c31(0x1bc)](_0x2e0115);gTicker[noslash(_0x3b6f90[0x0][_0x1c6c31(0x28b)])]=_0x3b6f90[0x0][_0x1c6c31(0x21d)];}catch(_0xd87775){if(!exchangeStopped)await handleError(_0xd87775,_0x1c6c31(0x245),_0x2e0115);}else await sleep(0x64);}},_0x35a3e6=async _0x1a7071=>{const _0xb6300a=_0x28f582;while(initCycle==_0x2c8d99){if(!botPaused)try{const _0x3f82bf=await exchange['watchTradesForSymbols'](_0x1a7071),_0x25092b=_0x3f82bf[_0xb6300a(0x1ab)]();gTicker[noslash(_0x25092b[_0xb6300a(0x28b)])]=_0x25092b['price'];}catch(_0x3554f5){if(!exchangeStopped)await handleError(_0x3554f5,_0xb6300a(0x1fc),_0x1a7071['toString']());}else await sleep(0x64);}},_0x6a4fee=async _0x52f27a=>{const _0x60814=_0x28f582;while(initCycle==_0x2c8d99){if(!botPaused){let _0x23e847;try{await sleep(0x3c*0x3e8);const _0x4ab8d1=await getTickers(_0x52f27a);Object[_0x60814(0x2c3)](_0x4ab8d1)[_0x60814(0x1c4)](_0x12166d=>{_0x23e847=_0x12166d[0x1]['symbol'],gChange[_0x23e847]=_0x12166d[0x1]['percentage'];});}catch(_0x5723b5){if(!exchangeStopped)await handleError(_0x5723b5,_0x60814(0x16f),_0x23e847);}}else await sleep(0x64);}},_0xf3ce13=async _0x115918=>{const _0x24fbd8=_0x28f582;while(initCycle==_0x2c8d99){if(!botPaused)try{const _0x527ae9=await exchange['watchOrders'](_0x115918);initCycle==_0x2c8d99&&_0x527ae9[_0x24fbd8(0x1c4)](_0x83bf45=>{updateNumberCoinsCcxt(_0x83bf45);});}catch(_0x5999b7){if(!exchangeStopped)await handleError(_0x5999b7,'watchOrders()');}else await sleep(0x64);}};_0x33ae01(_0xcad010),_0x6a4fee(_0xcad010),exchange[_0x28f582(0x1ea)][_0x28f582(0x1ef)]&&!(config['exchange']=='Bybit'&&_0xcad010['length']>0xa)?_0x35a3e6(_0xcad010):_0xcad010[_0x28f582(0x1c4)](_0x2a7a81=>{_0x30663d(_0x2a7a81);}),_0xcad010['forEach'](_0xf3820a=>{_0xf3ce13(_0xf3820a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4adb9b){const _0x6e011a=_0x35d2d0;let _0x402212={};try{if(config['exchange']!=_0x6e011a(0x2c8))_0x402212=await exchange['fetchTickers'](_0x4adb9b);else for(const _0x3dea55 of _0x4adb9b){const _0x34697d=await exchange[_0x6e011a(0x31e)](_0x3dea55);_0x402212[_0x3dea55]=_0x34697d;}return _0x402212;}catch(_0x29bef2){throw _0x29bef2;}}function setBlockTransactionDetection(_0x4bafcb){const _0x213ae1=_0x35d2d0;blockTransactionDetection=_0x4bafcb,logger[_0x213ae1(0x32d)](_0x213ae1(0x2f6)+blockTransactionDetection);}async function detectLiquidityChange(_0x1b829c=0x0){const _0x2d2f7b=_0x35d2d0;transactionDetectionOngoing=!![];try{const _0xc7ab43=await getCoins(_0x1b829c),[_0x583b2d,_0x93d962]=_0xc7ab43;let _0x20a3c6=[];currentCoins[_0x2d2f7b(0x1c4)](_0x3f2838=>{const _0x45316b=_0x2d2f7b,_0x5ceaa0=_0x583b2d[_0x45316b(0x231)](_0x5087bf=>_0x5087bf[_0x45316b(0x21e)]==_0x3f2838[_0x45316b(0x21e)]);if(_0x5ceaa0){if(_0x3f2838[_0x45316b(0x313)]!=_0x5ceaa0[_0x45316b(0x313)]){let _0x7ee574;if(_0x3f2838[_0x45316b(0x21e)]!=config['basecoin']){const _0x46f33e=gTicker[noslash(_0x3f2838['symbol'])];_0x7ee574=_0x3f2838[_0x45316b(0x24e)]?0x1/_0x46f33e:_0x46f33e;}else _0x7ee574=0x1;_0x20a3c6[_0x45316b(0x1bd)]({'coin':_0x3f2838['coin'],'symbol':_0x3f2838[_0x45316b(0x28b)],'price':_0x7ee574,'number':Number(formatResult(_0x5ceaa0[_0x45316b(0x313)]-_0x3f2838[_0x45316b(0x313)],0x8)),'basecoinvalue':_0x7ee574*(_0x5ceaa0[_0x45316b(0x313)]-_0x3f2838[_0x45316b(0x313)])});}}});if(_0x20a3c6[_0x2d2f7b(0x204)]>0x0&&!blockTransactionDetection)for(const _0x724ce0 of _0x20a3c6){if(config[_0x2d2f7b(0x1d9)]){logger['debug'](_0x2d2f7b(0x233)+_0x724ce0['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x2d2f7b(0x2d3)]);if(lastFees[_0x2d2f7b(0x2d3)]==0x0||Math[_0x2d2f7b(0x21b)](_0x724ce0[_0x2d2f7b(0x331)])>lastFees['highest']*1.2){if(config['autoliquidity']==_0x2d2f7b(0x178)){delete _0x724ce0[_0x2d2f7b(0x28b)],delete _0x724ce0[_0x2d2f7b(0x331)];let _0x586d80=[],_0x1756d5=[...config[_0x2d2f7b(0x29d)]]||[],_0xa8b17=config[_0x2d2f7b(0x29d)];_0x1756d5[_0x2d2f7b(0x194)]((_0x5e2aae,_0x206b0e)=>_0x5e2aae[_0x2d2f7b(0x25e)]>_0x206b0e[_0x2d2f7b(0x25e)]?-0x1:_0x206b0e[_0x2d2f7b(0x25e)]>_0x5e2aae[_0x2d2f7b(0x25e)]?0x1:0x0);const _0x28faa2=getDate();if(_0x1756d5[0x0]){const _0x453fc6=fns[_0x2d2f7b(0x2f5)](_0x1756d5[0x0][_0x2d2f7b(0x25e)],_0x2d2f7b(0x2d5),new Date()),_0x334757=fns[_0x2d2f7b(0x2f5)](_0x28faa2,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x453fc6,_0x334757)){_0x586d80=_0x1756d5[0x0][_0x2d2f7b(0x2b1)];const _0x48659e=_0x586d80[_0x2d2f7b(0x231)](_0x1796ee=>_0x1796ee['coin']==_0x724ce0[_0x2d2f7b(0x21e)]);_0x48659e?(_0x48659e[_0x2d2f7b(0x313)]+=_0x724ce0[_0x2d2f7b(0x313)],_0x48659e['number']==0x0&&(_0x586d80=_0x586d80[_0x2d2f7b(0x18f)](_0x380099=>{const _0x2a06b1=_0x2d2f7b;return _0x380099[_0x2a06b1(0x21e)]!=_0x724ce0[_0x2a06b1(0x21e)];}))):_0x586d80['push'](_0x724ce0);const _0x26aa1c=_0xa8b17[_0x2d2f7b(0x231)](_0x305a8a=>_0x305a8a[_0x2d2f7b(0x25e)]==_0x28faa2);_0x26aa1c[_0x2d2f7b(0x2b1)]=_0x586d80;}else _0xa8b17[_0x2d2f7b(0x1bd)]({'date':_0x28faa2,'changes':[_0x724ce0]});}const _0x10bd3f=_0xa8b17['find'](_0x2a33a5=>_0x2a33a5[_0x2d2f7b(0x25e)]==_0x28faa2);if(_0x10bd3f){let _0x269572=!![];_0x10bd3f[_0x2d2f7b(0x2b1)][_0x2d2f7b(0x1c4)](_0x25302f=>{const _0x438403=_0x2d2f7b;if(_0x25302f[_0x438403(0x313)]!=0x0)_0x269572=![];}),_0x269572&&(_0xa8b17=_0xa8b17[_0x2d2f7b(0x18f)](_0x3046fa=>{const _0x3142f0=_0x2d2f7b;return _0x3046fa[_0x3142f0(0x25e)]!=_0x28faa2;}));}let _0x503a24=dbConfig[_0x2d2f7b(0x262)](_0x2d2f7b(0x31f))[_0x2d2f7b(0x231)]({'botID':botID})[_0x2d2f7b(0x1b0)]();_0x503a24&&(dbConfig['get']('bot')['find']({'botID':botID})['assign']({'liquidity':_0xa8b17})[_0x2d2f7b(0x241)](),config['liquidity']=_0xa8b17);logHistory(_0x2d2f7b(0x23d),_0x2d2f7b(0x325)+Math[_0x2d2f7b(0x21b)](_0x724ce0[_0x2d2f7b(0x313)])+'\x20'+_0x724ce0[_0x2d2f7b(0x21e)]+'\x20'+(_0x724ce0['number']>0x0?_0x2d2f7b(0x196):_0x2d2f7b(0x221))+_0x2d2f7b(0x286)),proxyEmit('configuration',emittedConfiguration());const _0x38b605=getNormalizedPerformance();emitPerformance(_0x38b605),getStartingBalances(_0x38b605),logger[_0x2d2f7b(0x32d)](_0x2d2f7b(0x2fa));}else config[_0x2d2f7b(0x1d9)]==_0x2d2f7b(0x270)&&(config[_0x2d2f7b(0x2a8)]?(await storeHeadless({'headless':![]}),logHistory(_0x2d2f7b(0x23d),_0x2d2f7b(0x325)+Math['abs'](_0x724ce0[_0x2d2f7b(0x313)])+'\x20'+_0x724ce0[_0x2d2f7b(0x21e)]+'\x20'+(_0x724ce0['number']>0x0?_0x2d2f7b(0x196):'removed')+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger['debug'](_0x2d2f7b(0x325)+Math[_0x2d2f7b(0x21b)](_0x724ce0['number'])+'\x20'+_0x724ce0['coin']+'\x20'+(_0x724ce0['number']>0x0?_0x2d2f7b(0x196):_0x2d2f7b(0x221))+_0x2d2f7b(0x2fb)));}else logger[_0x2d2f7b(0x32d)](_0x2d2f7b(0x188)+Math['abs'](_0x724ce0[_0x2d2f7b(0x313)])+'\x20'+_0x724ce0[_0x2d2f7b(0x21e)]+'\x20'+(_0x724ce0[_0x2d2f7b(0x313)]>0x0?_0x2d2f7b(0x196):_0x2d2f7b(0x221)));}else logger[_0x2d2f7b(0x32d)](_0x2d2f7b(0x325)+Math['abs'](_0x724ce0['number'])+'\x20'+_0x724ce0[_0x2d2f7b(0x21e)]+'\x20'+(_0x724ce0[_0x2d2f7b(0x313)]>0x0?_0x2d2f7b(0x196):_0x2d2f7b(0x221))+_0x2d2f7b(0x230));}currentCoins=_0x583b2d,currentCoinsAll=_0x93d962;}catch(_0xc3ee51){if(!exchangeStopped)await handleError(_0xc3ee51,_0x2d2f7b(0x2cd));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x48f398=_0x35d2d0;try{markets=await exchange[_0x48f398(0x26f)](),allSymbols=[],Object[_0x48f398(0x2c3)](markets)[_0x48f398(0x1c4)](_0x19c839=>{const _0x236679=_0x48f398;_0x19c839[0x1][_0x236679(0x2d7)]&&_0x19c839[0x1][_0x236679(0x2e3)]&&allSymbols[_0x236679(0x1bd)](_0x19c839[0x0]);});}catch(_0x45fd9f){throw _0x45fd9f;}}function validateSymbols(_0x57279){let _0x2b15c3=[];return _0x57279['forEach'](_0x392df2=>{const _0x168b67=_0x3e24;!allSymbols[_0x168b67(0x1f2)](_0x392df2)?logHistory(_0x168b67(0x26e),_0x168b67(0x24a)+_0x392df2+_0x168b67(0x1c1)):_0x2b15c3[_0x168b67(0x1bd)](_0x392df2);}),_0x2b15c3;}async function initclient(){const _0x576122=_0x35d2d0;proxyEmit(_0x576122(0x2e0),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x576122(0x224),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4e0f2b=getNormalizedPerformance();emitPerformance(_0x4e0f2b),getStartingBalances(_0x4e0f2b);}async function toggleBotMode(){const _0x1dc91b=_0x35d2d0;let _0x1ca9bc=dbConfig[_0x1dc91b(0x262)](_0x1dc91b(0x31f))['find']({'botID':botID})['value']();if(_0x1ca9bc){const _0x1e9fec=!_0x1ca9bc[_0x1dc91b(0x2a8)];dbConfig[_0x1dc91b(0x262)](_0x1dc91b(0x31f))[_0x1dc91b(0x231)]({'botID':botID})[_0x1dc91b(0x2ad)]({'headless':_0x1e9fec})['write'](),config[_0x1dc91b(0x2a8)]=_0x1e9fec,proxyEmit(_0x1dc91b(0x2e0),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5fc4ff=_0x35d2d0;process[_0x5fc4ff(0x2a5)]({'updatebotmanager':!![]},_0x53d97b=>{}),logger[_0x5fc4ff(0x32d)](_0x5fc4ff(0x17b)+config[_0x5fc4ff(0x2a8)]);}async function loadCoins(_0x727b5e){const _0x3a98cd=_0x35d2d0;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x44abb7,_0x3206b1=0x0,_0x1b878e=0x0;_0x727b5e['forEach'](_0x54af72=>{const _0x34a4f8=_0x3e24;loading[_0x34a4f8(0x2cb)][_0x34a4f8(0x1bd)](_0x54af72);}),loadingCanceled=![];let _0x3c8b83=![];while(_0x44abb7!=_0x727b5e['length']+maxLoadingProgress){_0x44abb7=loadingProgress,_0x727b5e['forEach'](_0x3cbfe=>{const _0x4d5ddf=_0x3e24;if(gTicker[noslash(_0x3cbfe)]){loading['remainingSymbols']=loading[_0x4d5ddf(0x2cb)]['filter'](_0xe63817=>_0xe63817!=_0x3cbfe);if(!watchedSymbols[_0x4d5ddf(0x1f2)](_0x3cbfe))watchedSymbols[_0x4d5ddf(0x1bd)](_0x3cbfe);_0x44abb7++;}}),loading[_0x3a98cd(0x2ac)]=Math[_0x3a98cd(0x295)](_0x44abb7/(_0x727b5e[_0x3a98cd(0x204)]+maxLoadingProgress)*0x64);loading[_0x3a98cd(0x2ac)]!=0x64&&(_0x1b878e>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1b878e>0x78*0x5&&!_0x3c8b83&&(_0x3c8b83=!![],logHistory(_0x3a98cd(0x26e),_0x3a98cd(0x332)+loading[_0x3a98cd(0x2cb)][_0x3a98cd(0x16e)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3a98cd(0x212)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3a98cd(0x186)]=!![],emitLoadingProgress();break;}else _0x3206b1!=loading[_0x3a98cd(0x2ac)]&&(_0x3206b1=loading[_0x3a98cd(0x2ac)],emitLoadingProgress()),_0x1b878e++,await sleep(0xc8);}_0x44abb7==_0x727b5e[_0x3a98cd(0x204)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3a98cd(0x2a5)]({'status':_0x3a98cd(0x2db),'live':'running'},_0x15c407=>{}),_0x3c8b83&&logHistory(_0x3a98cd(0x23d),_0x3a98cd(0x333)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x27e363=_0x35d2d0;proxyEmit(_0x27e363(0x2e0),{...emittedConfiguration(),'configstate':_0x27e363(0x281)});}function emitLoadingProgress(){const _0x2cae23=_0x35d2d0;proxyEmit(_0x2cae23(0x2e5),loading);}async function getFiat(){const _0x533976=_0x35d2d0;let _0x20fdc0=gTicker[stablecoins['eur']['coin']],_0x1091bc=gTicker[stablecoins[_0x533976(0x239)][_0x533976(0x21e)]];return{'eur':Number(_0x20fdc0),'usd':Number(_0x1091bc)};}function capitalize(_0x3c7a37){const _0x2fc6c9=_0x35d2d0;return _0x3c7a37[_0x2fc6c9(0x2b5)](0x0,0x1)[_0x2fc6c9(0x187)]()+_0x3c7a37[_0x2fc6c9(0x2b5)](0x1);}function supportedExchanges(){const _0x3d2c4d=_0x35d2d0,_0x577115=['ws',_0x3d2c4d(0x2e4),_0x3d2c4d(0x31e),'watchTrades',_0x3d2c4d(0x312),'cancelOrder',_0x3d2c4d(0x2df),_0x3d2c4d(0x1d4),'fetchClosedOrders',_0x3d2c4d(0x1aa)];let _0x2216de=[],_0x3816a5=[],_0x3e4ad5=ccxt[_0x3d2c4d(0x1a7)][_0x3d2c4d(0x248)];_0x3e4ad5['forEach'](_0x5ec4f9=>{const _0x5118f1=_0x3d2c4d;try{const _0x5836c9=new ccxt[(_0x5118f1(0x1a7))][_0x5ec4f9]();_0x3816a5['push'](_0x5836c9);}catch(_0x51537f){}}),_0x3816a5[_0x3d2c4d(0x1c4)](_0x32532e=>{const _0x471ff4=_0x3d2c4d;let _0x46b235=0x0;_0x577115[_0x471ff4(0x1c4)](_0x4f84f6=>{const _0x391853=_0x471ff4;_0x4f84f6 in _0x32532e[_0x391853(0x1ea)]&&_0x32532e[_0x391853(0x1ea)][_0x4f84f6]&&_0x46b235++;}),_0x46b235==_0x577115[_0x471ff4(0x204)]&&_0x2216de[_0x471ff4(0x1bd)](capitalize(_0x32532e['id']));});let _0x57afec=[];return _0x3e4ad5[_0x3d2c4d(0x1c4)](_0xe87b6a=>{const _0x28697b=_0x3d2c4d;_0xe87b6a=capitalize(_0xe87b6a);if(!_0x2216de[_0x28697b(0x1f2)](_0xe87b6a))_0x57afec['push'](_0xe87b6a);}),_0x2216de;}function setStartDatePerformance(){const _0x1595dc=_0x35d2d0;if(config&&config[_0x1595dc(0x29d)][0x0][_0x1595dc(0x2b1)][_0x1595dc(0x204)]!=0x0){const _0x5cd8c4=config[_0x1595dc(0x29d)][0x0][_0x1595dc(0x2b1)];dbPerformance['get']('data')['find']({'date':config[_0x1595dc(0x291)]})['assign']({'coins':_0x5cd8c4})['write']();}}async function recreateCoinResults(){const _0x5dc1a8=_0x35d2d0;recreationNeeded=![];let _0x30689a,_0x3e0b85=[];try{for(const _0x31d3bf of currentCoins){if(_0x31d3bf[_0x5dc1a8(0x21e)]!=config['basecoin']){let _0x2de0a0=0x0,_0x1abc40,_0x50636c;_0x30689a=await getAllEventOrders(_0x31d3bf[_0x5dc1a8(0x28b)]);if(_0x30689a[_0x5dc1a8(0x204)]>0x0)_0x30689a[_0x5dc1a8(0x1c4)](_0x54657f=>{const _0x5611ea=_0x5dc1a8,_0x3123fe=_0x31d3bf[_0x5611ea(0x28b)][_0x5611ea(0x1f2)](config['basecoin']+'/');_0x3e0b85['push']({'datetime':_0x54657f['datetime'],'coin':_0x31d3bf['coin'],'symbol':_0x31d3bf[_0x5611ea(0x28b)],'side':_0x54657f[_0x5611ea(0x297)],'reverse':_0x3123fe,'amount':formatResult(_0x54657f[_0x5611ea(0x19b)],0x8),'filled':formatResult(_0x54657f[_0x5611ea(0x19b)],0x8),'price':formatResult(_0x54657f[_0x5611ea(0x21d)],0x8)}),_0x2de0a0=_0x54657f[_0x5611ea(0x297)]==_0x5611ea(0x192)?_0x2de0a0+_0x54657f[_0x5611ea(0x19b)]:_0x2de0a0-_0x54657f[_0x5611ea(0x19b)];if(!_0x50636c)_0x50636c=_0x54657f[_0x5611ea(0x21d)];});_0x1abc40=_0x31d3bf[_0x5dc1a8(0x313)]-_0x2de0a0;let _0x24f2e7;config['liquidity'][_0x5dc1a8(0x1c4)](_0x3ccfc0=>{const _0x59b70c=_0x5dc1a8;!_0x24f2e7&&(_0x24f2e7=_0x3ccfc0[_0x59b70c(0x2b1)][_0x59b70c(0x231)](_0x53a90a=>_0x53a90a[_0x59b70c(0x21e)]==_0x31d3bf[_0x59b70c(0x21e)]),_0x24f2e7&&(_0x1abc40=_0x24f2e7['number'],_0x50636c=_0x24f2e7[_0x59b70c(0x21d)]));});let _0x1dfe6a=dbCoinResults[_0x5dc1a8(0x262)]('coins')[_0x5dc1a8(0x231)]({'coin':_0x31d3bf[_0x5dc1a8(0x21e)]})[_0x5dc1a8(0x1b0)]();_0x1dfe6a={'coin':_0x31d3bf['coin'],'number':_0x1abc40,'breakeven':_0x50636c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x5dc1a8(0x2c6))['find']({'coin':_0x31d3bf[_0x5dc1a8(0x21e)]})[_0x5dc1a8(0x2ad)](_0x1dfe6a)[_0x5dc1a8(0x241)]();}}_0x3e0b85['sort']((_0x460b30,_0x454ec2)=>_0x460b30[_0x5dc1a8(0x2cc)]>_0x454ec2[_0x5dc1a8(0x2cc)]?0x1:_0x454ec2[_0x5dc1a8(0x2cc)]>_0x460b30[_0x5dc1a8(0x2cc)]?-0x1:0x0);let _0x47ea28=0x0;for(let _0x5cbcbf of _0x3e0b85){await updateCoinResults(_0x5cbcbf,!![]);}}catch(_0x4e902c){await handleError(_0x4e902c,_0x5dc1a8(0x170));}}async function getAllEventOrders(_0x1d6ef9){const _0x49f947=_0x35d2d0;let _0x5b35cd=[],_0x94381c=dbLogs[_0x49f947(0x262)]('logs')[_0x49f947(0x18f)](_0x1ab232=>{const _0x1158be=_0x49f947,_0x205ce0=_0x1ab232[_0x1158be(0x2ef)]['toLowerCase']();return _0x205ce0[_0x1158be(0x1f2)](_0x1d6ef9['toLowerCase']())&&(_0x205ce0[_0x1158be(0x1f2)](_0x1158be(0x250))&&_0x205ce0['includes'](_0x1158be(0x27d))||_0x205ce0[_0x1158be(0x1f2)]('filled')&&_0x205ce0['includes'](_0x1158be(0x27d)));})['sortBy'](_0x49f947(0x320))['value']();return _0x94381c['forEach'](_0x442415=>{const _0x86a8f6=_0x49f947,_0x3767d3=_0x442415[_0x86a8f6(0x2ef)]['includes'](_0x86a8f6(0x1a4))?'sell':_0x86a8f6(0x192),_0x55fb0f=/#([0-9]|\.)+\s/i,_0x15d562=Number(_0x55fb0f[_0x86a8f6(0x199)](_0x442415[_0x86a8f6(0x2ef)])[0x0]['slice'](0x1)),_0xf00922=/@([0-9]|\.)+$/i,_0xef07e0=Number(_0xf00922[_0x86a8f6(0x199)](_0x442415[_0x86a8f6(0x2ef)])[0x0][_0x86a8f6(0x2c2)](0x1));_0x5b35cd['push']({'datetime':_0x442415[_0x86a8f6(0x320)],'coin':symbolToCoin(_0x1d6ef9),'symbol':_0x1d6ef9,'side':_0x3767d3,'amount':_0x15d562,'filled':_0x15d562,'price':_0xef07e0});}),_0x5b35cd;}async function getAllOrders(_0x5cd658,_0x2a110a){const _0x5d8239=_0x35d2d0;let _0x3b398c=[];while(_0x2a110a<exchange[_0x5d8239(0x2d0)]()){const _0x86d974=0x1f4;try{const _0x5a7da3=await exchange[_0x5d8239(0x1a6)](_0x5cd658,_0x2a110a,_0x86d974);if(_0x5a7da3[_0x5d8239(0x204)])_0x2a110a=_0x5a7da3[_0x5a7da3[_0x5d8239(0x204)]-0x1][_0x5d8239(0x20f)]+0x1,_0x3b398c=_0x3b398c['concat'](_0x5a7da3);else break;}catch(_0x2867e7){await handleError(_0x2867e7,'getAllOrders()',_0x5cd658);}}return _0x3b398c;}async function validate24hChanges(){const _0x129e0c=_0x35d2d0;for(const _0xddbbe8 of currentCoins){if(_0xddbbe8[_0x129e0c(0x21e)]!=config[_0x129e0c(0x1a2)]){let _0x32c66e;_0xddbbe8['reverse']?_0x32c66e=formatResult((0x1/(gChange[_0xddbbe8[_0x129e0c(0x28b)]]/0x64+0x1)-0x1)*0x64,0x3):_0x32c66e=gChange[_0xddbbe8[_0x129e0c(0x28b)]],_0x32c66e<config[_0x129e0c(0x24c)]&&(logHistory(_0x129e0c(0x26e),_0xddbbe8[_0x129e0c(0x21e)]+_0x129e0c(0x1ae)+_0x32c66e+'%'),logHistory(_0x129e0c(0x26e),_0x129e0c(0x1cc)),logHistory(_0x129e0c(0x26e),_0x129e0c(0x247)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x250fe6,_0x419ce1){const _0x4c123c=_0x35d2d0;if(!_0x250fe6)return!![];const _0x734029=_0x419ce1[_0x4c123c(0x200)]('.'),_0x392576=_0x250fe6[_0x4c123c(0x200)]('.');for(var _0x57af38=0x0;_0x57af38<_0x392576[_0x4c123c(0x204)];_0x57af38++){const _0x1fce7c=~~_0x392576[_0x57af38],_0x11ecb5=~~_0x734029[_0x57af38];if(_0x1fce7c<_0x11ecb5)return!![];if(_0x1fce7c>_0x11ecb5)return![];}return![];}async function oneTimeMigration(){const _0x34dead=_0x35d2d0;let _0x1854dc=dbLogs[_0x34dead(0x262)]('version')[_0x34dead(0x1b0)]();if(isOlderVersion(_0x1854dc,_0x34dead(0x1e1))){let _0x1bd291=[];const _0x30a82f=dbLogs['get']('logs')['value']();_0x30a82f[_0x34dead(0x1c4)](_0x5976a2=>{const _0x3523b2=_0x34dead;_0x1bd291[_0x3523b2(0x1bd)]({'time':_0x5976a2[_0x3523b2(0x320)],'type':_0x5976a2[_0x3523b2(0x1d8)],'event':_0x5976a2['event']});}),dbLogs[_0x34dead(0x262)](_0x34dead(0x30f))[_0x34dead(0x2ad)](_0x1bd291)[_0x34dead(0x241)]();}let _0x40f939=dbConfig['get'](_0x34dead(0x1f9))[_0x34dead(0x1b0)]();if(isOlderVersion(_0x40f939,_0x34dead(0x1e1))){let _0x926cf4=dbConfig['get'](_0x34dead(0x31f))[_0x34dead(0x231)]({'botID':botID})['value']();if(_0x926cf4){let _0x1ddebe=[];_0x926cf4['portfolio'][_0x34dead(0x1c4)](_0xfafff1=>{const _0x32bb97=_0x34dead;_0x1ddebe[_0x32bb97(0x1bd)]({'coin':_0xfafff1[_0x32bb97(0x21e)],'number':_0xfafff1[_0x32bb97(0x1f6)],'price':_0xfafff1[_0x32bb97(0x1e3)]}),delete _0xfafff1[_0x32bb97(0x1f6)],delete _0xfafff1[_0x32bb97(0x1e3)];});if(_0x1ddebe[_0x34dead(0x204)]!==0x0)fs[_0x34dead(0x257)](configbackuppath+(_0x34dead(0x1a3)+botID+_0x34dead(0x32b)),JSON[_0x34dead(0x32c)](_0x1ddebe,null,0x4),function(_0x2c349c){if(_0x2c349c){}});const _0x53504c=(_0x308bd2,_0x38e80a)=>{let _0x56c05d=[];_0x38e80a['forEach'](_0x5cf905=>{const _0x1fafdb=_0x3e24,_0x5a6f4f=_0x308bd2['find'](_0x509884=>_0x509884[_0x1fafdb(0x21e)]==_0x5cf905[_0x1fafdb(0x21e)]);if(!_0x5a6f4f)_0x56c05d['push'](_0x5cf905);});let _0x216fd3=[];return _0x308bd2['forEach'](_0x24cb19=>{const _0x429740=_0x3e24,_0xbd591b=_0x38e80a[_0x429740(0x231)](_0x45fd54=>_0x45fd54['coin']==_0x24cb19[_0x429740(0x21e)]);if(!_0xbd591b||_0xbd591b[_0x429740(0x313)]==0x0&&_0x24cb19[_0x429740(0x313)]!=0x0)_0x216fd3[_0x429740(0x1bd)](_0x24cb19);}),{'missingDay1':_0x56c05d,'notInDay2':_0x216fd3};},_0x118c32=dbPerformance[_0x34dead(0x262)](_0x34dead(0x1ba))[_0x34dead(0x1ee)]()[_0x34dead(0x1b0)]();if(_0x118c32[_0x34dead(0x204)]>0x1){const {missingDay1:_0xfe7688,notInDay2:_0x1e5623}=_0x53504c(_0x1ddebe,_0x118c32[0x1][_0x34dead(0x2c6)]);_0x1ddebe=[..._0x1ddebe,..._0xfe7688],_0x1e5623[_0x34dead(0x1c4)](_0x4c79ff=>{const _0x1e3cc4=_0x34dead;let _0x5c0cd5=_0x1ddebe[_0x1e3cc4(0x31a)](_0x435a9a=>_0x435a9a[_0x1e3cc4(0x21e)]==_0x4c79ff[_0x1e3cc4(0x21e)]);_0x5c0cd5!=-0x1&&_0x1ddebe[_0x1e3cc4(0x30d)](_0x5c0cd5,0x1);});}_0x1ddebe[_0x34dead(0x194)]((_0x4cfda4,_0x485601)=>_0x4cfda4[_0x34dead(0x21e)]>_0x485601[_0x34dead(0x21e)]?0x1:_0x485601[_0x34dead(0x21e)]>_0x4cfda4[_0x34dead(0x21e)]?-0x1:0x0);let _0x192605=[{'date':_0x926cf4[_0x34dead(0x291)],'changes':_0x1ddebe}];_0x118c32[_0x34dead(0x204)]>0x2&&_0x118c32[_0x34dead(0x1c4)]((_0x1c05ee,_0x5ef567)=>{const _0x32f905=_0x34dead;if(_0x5ef567>0x0&&_0x5ef567<_0x118c32['length']-0x1){const {missingDay1:_0x278d6e,notInDay2:_0x512fc6}=_0x53504c(_0x118c32[_0x5ef567]['coins'],_0x118c32[_0x5ef567+0x1]['coins']);_0x1ddebe=[],(_0x278d6e[_0x32f905(0x204)]!=0x0||_0x512fc6[_0x32f905(0x204)]!=0x0)&&(_0x278d6e['length']!=0x0&&_0x1ddebe[_0x32f905(0x1bd)](..._0x278d6e),_0x512fc6[_0x32f905(0x204)]!=0x0&&(_0x512fc6['forEach'](_0x545140=>{const _0x3216d6=_0x32f905;_0x545140['number']=-_0x545140[_0x3216d6(0x313)];}),_0x1ddebe[_0x32f905(0x1bd)](..._0x512fc6)),_0x1ddebe['sort']((_0xa80666,_0x190ef0)=>_0xa80666['coin']>_0x190ef0[_0x32f905(0x21e)]?0x1:_0x190ef0[_0x32f905(0x21e)]>_0xa80666[_0x32f905(0x21e)]?-0x1:0x0),_0x192605['push']({'date':_0x118c32[_0x5ef567+0x1]['date'],'changes':_0x1ddebe}));}}),dbConfig['get'](_0x34dead(0x31f))['find']({'botID':botID})[_0x34dead(0x2ad)]({..._0x926cf4,'liquidity':_0x192605})[_0x34dead(0x241)]();}}if(isOlderVersion(_0x40f939,'2.6.0')){let _0x548e2d=dbConfig[_0x34dead(0x262)](_0x34dead(0x31f))[_0x34dead(0x231)]({'botID':botID})[_0x34dead(0x1b0)]();if(_0x548e2d){const _0xbdba49=_0x548e2d[_0x34dead(0x202)],_0x410631=_0xbdba49?capitalize(_0xbdba49):_0x34dead(0x27e);dbConfig[_0x34dead(0x262)](_0x34dead(0x31f))['find']({'botID':botID})['assign']({'exchange':_0x410631})[_0x34dead(0x241)]();}}if(isOlderVersion(_0x40f939,'2.6.22')){let _0x272b03=dbConfig['get'](_0x34dead(0x31f))[_0x34dead(0x231)]({'botID':botID})['value']();if(_0x272b03){const _0x1aab56=_0x272b03[_0x34dead(0x28f)],_0x366b36=_0x1aab56?_0x34dead(0x1ce):![];dbConfig[_0x34dead(0x262)](_0x34dead(0x31f))[_0x34dead(0x231)]({'botID':botID})['assign']({'marketcapEnabled':_0x366b36})[_0x34dead(0x241)]();}}if(isOlderVersion(_0x40f939,_0x34dead(0x1e5))){let _0x44d60f=dbConfig[_0x34dead(0x262)]('bot')[_0x34dead(0x231)]({'botID':botID})['value']();if(_0x44d60f){const _0x54256a=_0x44d60f[_0x34dead(0x1d9)],_0x278ec5=_0x54256a?'update-liquidity':![];dbConfig[_0x34dead(0x262)](_0x34dead(0x31f))['find']({'botID':botID})[_0x34dead(0x2ad)]({'autoliquidity':_0x278ec5})[_0x34dead(0x241)]();}}let _0x2771e3=dbPerformance[_0x34dead(0x262)](_0x34dead(0x1f9))[_0x34dead(0x1b0)]();isOlderVersion(_0x2771e3,'2.3.5')&&setStartDatePerformance();let _0xb9bae6=dbCoinResults[_0x34dead(0x262)](_0x34dead(0x1f9))[_0x34dead(0x1b0)]();if(isOlderVersion(_0xb9bae6,_0x34dead(0x1c9))){let _0x9622b7=dbCoinResults[_0x34dead(0x262)](_0x34dead(0x2c6))['value']();if(_0x9622b7[_0x34dead(0x204)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2c6863=_0x35d2d0;dbConfig['set'](_0x2c6863(0x1f9),serverversion)[_0x2c6863(0x241)](),dbPerformance[_0x2c6863(0x197)]('version',serverversion)['write'](),dbLogs[_0x2c6863(0x197)](_0x2c6863(0x1f9),serverversion)[_0x2c6863(0x241)](),dbCoinResults['set'](_0x2c6863(0x1f9),serverversion)[_0x2c6863(0x241)]();}function getConfiguration(_0x3d74c9){const _0x4d20c9=_0x35d2d0;let _0x19ae32=dbConfig[_0x4d20c9(0x262)]('bot')[_0x4d20c9(0x231)]({'botID':_0x3d74c9})['value']();if(_0x19ae32){let _0x4d5d80=![];typeof _0x19ae32[_0x4d20c9(0x1b4)]=='string'&&(_0x19ae32={..._0x19ae32,'threshold':Number(_0x19ae32['threshold'])},_0x4d5d80=!![]),_0x19ae32[_0x4d20c9(0x24c)]==undefined&&(_0x19ae32={..._0x19ae32,'change24h':-0x14},_0x4d5d80=!![]),_0x19ae32['fiat']==undefined&&(_0x19ae32={..._0x19ae32,'fiat':_0x4d20c9(0x22d)},_0x4d5d80=!![]),_0x19ae32[_0x4d20c9(0x2a4)]==undefined&&(_0x19ae32={..._0x19ae32,'onepagemode':settings[_0x4d20c9(0x2a4)]},_0x4d5d80=!![]),_0x19ae32[_0x4d20c9(0x32e)]==undefined&&(_0x19ae32={..._0x19ae32,'colorscheme':_0x4d20c9(0x227)},_0x4d5d80=!![]),_0x19ae32['autoliquidity']==undefined&&(_0x19ae32={..._0x19ae32,'autoliquidity':_0x4d20c9(0x178)},_0x4d5d80=!![]),_0x19ae32['marketcapApi']==undefined&&(_0x19ae32={..._0x19ae32,'marketcapApi':settings[_0x4d20c9(0x2f1)]?!![]:![]},_0x4d5d80=!![]),_0x19ae32[_0x4d20c9(0x28f)]==undefined&&(_0x19ae32={..._0x19ae32,'marketcapEnabled':![]},_0x4d5d80=!![]),_0x4d5d80&&(_0x19ae32={'botID':_0x19ae32[_0x4d20c9(0x1b1)],'exchange':_0x19ae32['exchange'],'apiKey':_0x19ae32['apiKey'],'apiSecret':_0x19ae32[_0x4d20c9(0x2e2)],'apiPassword':_0x19ae32[_0x4d20c9(0x2fd)],'basecoin':_0x19ae32[_0x4d20c9(0x1a2)],'botname':_0x19ae32[_0x4d20c9(0x1c8)],'showname':_0x19ae32[_0x4d20c9(0x23e)],'threshold':_0x19ae32['threshold'],'ordertype':_0x19ae32[_0x4d20c9(0x2d1)],'timeout':_0x19ae32[_0x4d20c9(0x1da)],'fiat':_0x19ae32[_0x4d20c9(0x25a)],'startdate':_0x19ae32[_0x4d20c9(0x291)],'recreate':_0x19ae32[_0x4d20c9(0x25f)],'timeshift':_0x19ae32[_0x4d20c9(0x322)],'onepagemode':_0x19ae32['onepagemode'],'headless':_0x19ae32[_0x4d20c9(0x2a8)],'cooldown':_0x19ae32[_0x4d20c9(0x30c)],'change24h':_0x19ae32['change24h'],'emojibuy':_0x19ae32['emojibuy'],'emojisell':_0x19ae32[_0x4d20c9(0x303)],'colorscheme':_0x19ae32[_0x4d20c9(0x32e)],'marketcapApi':_0x19ae32[_0x4d20c9(0x2f1)],'marketcapEnabled':_0x19ae32[_0x4d20c9(0x28f)],'portfolio':_0x19ae32['portfolio'],'autoliquidity':_0x19ae32[_0x4d20c9(0x1d9)],'liquidity':_0x19ae32[_0x4d20c9(0x29d)],'openOrders':_0x19ae32[_0x4d20c9(0x2de)]},dbConfig[_0x4d20c9(0x262)]('bot')[_0x4d20c9(0x290)]()[_0x4d20c9(0x241)](),dbConfig[_0x4d20c9(0x262)](_0x4d20c9(0x31f))[_0x4d20c9(0x1bd)](_0x19ae32)[_0x4d20c9(0x241)]());}else _0x19ae32={'botID':_0x3d74c9,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4d20c9(0x2b2)+_0x3d74c9,'showname':![],'threshold':0x3,'ordertype':_0x4d20c9(0x250),'timeout':0x14,'fiat':_0x4d20c9(0x22d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4d20c9(0x322)],'onepagemode':settings[_0x4d20c9(0x2a4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4d20c9(0x227),'marketcapApi':settings[_0x4d20c9(0x2f1)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x4d20c9(0x178),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x19ae32;}function emittedConfiguration(){const _0x520bc4=_0x35d2d0;let _0x3a7094;if(config[_0x520bc4(0x26b)]=='')_0x3a7094={...config,'configstate':_0x520bc4(0x1f4)};else config[_0x520bc4(0x26b)]==_0x520bc4(0x1b2)?_0x3a7094={...config,'configstate':_0x520bc4(0x19e)}:(_0x3a7094={...config,'apiKey':_0x520bc4(0x21c),'apiSecret':_0x520bc4(0x21c)},config[_0x520bc4(0x2fd)]&&(_0x3a7094['apiPassword']='************'));return _0x3a7094;}function getSettings(){const _0x387cd1=_0x35d2d0;return dbSettings[_0x387cd1(0x262)]('settings')[_0x387cd1(0x1b0)]();}function getSecure(){const _0x3a079f=_0x35d2d0;return dbSecure['get'](_0x3a079f(0x20d))['value']()||{};}function updateTimeshift(_0x3037c5){const _0x1a6dc7=_0x35d2d0;let _0x36e040=dbConfig['get'](_0x1a6dc7(0x31f))[_0x1a6dc7(0x231)]({'botID':botID})[_0x1a6dc7(0x1b0)]();_0x36e040&&dbConfig[_0x1a6dc7(0x262)](_0x1a6dc7(0x31f))[_0x1a6dc7(0x231)]({'botID':botID})[_0x1a6dc7(0x2ad)]({'timeshift':_0x3037c5})['write'](),config[_0x1a6dc7(0x322)]=_0x3037c5,proxyEmit(_0x1a6dc7(0x2e0),emittedConfiguration());}function updateOnepagemode(_0x3e9e43){const _0x3d4368=_0x35d2d0;let _0x24fff2=dbConfig[_0x3d4368(0x262)](_0x3d4368(0x31f))[_0x3d4368(0x231)]({'botID':botID})[_0x3d4368(0x1b0)]();_0x24fff2&&dbConfig[_0x3d4368(0x262)](_0x3d4368(0x31f))['find']({'botID':botID})[_0x3d4368(0x2ad)]({'onepagemode':_0x3e9e43})[_0x3d4368(0x241)](),config[_0x3d4368(0x2a4)]=_0x3e9e43,proxyEmit(_0x3d4368(0x2e0),emittedConfiguration());}function updateMarketcapApi(_0x1168a8){const _0x4be511=_0x35d2d0,_0x11c4cd=_0x1168a8?!![]:![];let _0x192f39=dbConfig[_0x4be511(0x262)](_0x4be511(0x31f))[_0x4be511(0x231)]({'botID':botID})[_0x4be511(0x1b0)]();_0x192f39&&dbConfig['get'](_0x4be511(0x31f))[_0x4be511(0x231)]({'botID':botID})[_0x4be511(0x2ad)]({'marketcapApi':_0x11c4cd})[_0x4be511(0x241)](),config['marketcapApi']=_0x11c4cd,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}function _0x3e24(_0x179df8,_0x2c19bc){const _0x392ad6=_0x1e15();return _0x3e24=function(_0x224ae9,_0x155f13){_0x224ae9=_0x224ae9-0x16d;let _0x1e15b5=_0x392ad6[_0x224ae9];return _0x1e15b5;},_0x3e24(_0x179df8,_0x2c19bc);}async function storeConfiguration(_0x5b3ac1){const _0x1e0c42=_0x35d2d0;logger[_0x1e0c42(0x32d)](_0x1e0c42(0x2b3));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0xcbe48b=![],_0x2c6d27=![],_0x275a86=[];_0x5b3ac1[_0x1e0c42(0x190)][_0x1e0c42(0x1c4)](_0x485d85=>{const _0x3b7d4a=_0x1e0c42;if(!_0x485d85[_0x3b7d4a(0x2a9)]&&_0x485d85[_0x3b7d4a(0x21e)]!=_0x5b3ac1['basecoin'])_0x275a86[_0x3b7d4a(0x1bd)](_0x485d85[_0x3b7d4a(0x28b)]);}),_0x275a86[_0x1e0c42(0x1c4)](_0x457726=>{const _0x9eb588=_0x1e0c42,_0x40d3a8=currentCoins[_0x9eb588(0x231)](_0x7b3b67=>_0x7b3b67[_0x9eb588(0x28b)]==_0x457726);!_0x40d3a8&&(_0xcbe48b=!![]);}),currentCoins[_0x1e0c42(0x1c4)](_0x110b65=>{const _0x36505e=_0x1e0c42;if(_0x110b65[_0x36505e(0x21e)]!=config[_0x36505e(0x1a2)]){const _0x1ecce0=_0x275a86[_0x36505e(0x231)](_0x330076=>_0x330076==_0x110b65['symbol']);!_0x1ecce0&&(_0xcbe48b=!![]);}}),_0x5b3ac1['portfolio'][_0x1e0c42(0x1c4)](_0x3a1bf8=>{const _0x14da73=_0x1e0c42,_0x18fc7c=config[_0x14da73(0x190)]['find'](_0x46b1a9=>_0x46b1a9[_0x14da73(0x21e)]==_0x3a1bf8['coin']);if(_0x18fc7c&&_0x3a1bf8['offset']!=_0x18fc7c['offset'])_0x2c6d27=!![];});let _0x1d6092=dbConfig[_0x1e0c42(0x262)](_0x1e0c42(0x31f))[_0x1e0c42(0x231)]({'botID':botID})[_0x1e0c42(0x1b0)]();_0x5b3ac1={..._0x5b3ac1,'apiKey':crypt[_0x1e0c42(0x25b)](secure[_0x1e0c42(0x293)],_0x5b3ac1[_0x1e0c42(0x26b)])['message'],'apiSecret':crypt[_0x1e0c42(0x25b)](secure[_0x1e0c42(0x293)],_0x5b3ac1['apiSecret'])[_0x1e0c42(0x305)]};_0x5b3ac1[_0x1e0c42(0x2fd)]&&(_0x5b3ac1[_0x1e0c42(0x2fd)]=crypt[_0x1e0c42(0x25b)](secure['privateKey'],_0x5b3ac1[_0x1e0c42(0x2fd)])[_0x1e0c42(0x305)]);let _0x2ea7cc=![];if(_0x1d6092){_0x5b3ac1[_0x1e0c42(0x26b)]==_0x1e0c42(0x21c)?_0x5b3ac1[_0x1e0c42(0x26b)]=config[_0x1e0c42(0x26b)]:_0x2ea7cc=!![];_0x5b3ac1[_0x1e0c42(0x2e2)]==_0x1e0c42(0x21c)?_0x5b3ac1['apiSecret']=config[_0x1e0c42(0x2e2)]:_0x2ea7cc=!![];if(_0x5b3ac1[_0x1e0c42(0x2fd)]==_0x1e0c42(0x21c))_0x5b3ac1[_0x1e0c42(0x2fd)]=config[_0x1e0c42(0x2fd)];else{if(_0x5b3ac1[_0x1e0c42(0x2fd)])_0x2ea7cc=!![];}dbConfig['get'](_0x1e0c42(0x31f))['find']({'botID':botID})[_0x1e0c42(0x2ad)](_0x5b3ac1)[_0x1e0c42(0x241)]();}else dbConfig['get'](_0x1e0c42(0x31f))['push'](_0x5b3ac1)['write'](),_0x2ea7cc=!![],process['send']({'status':'enabled','live':_0x1e0c42(0x179)},_0x21ac4e=>{});process['send']({'botname':_0x5b3ac1[_0x1e0c42(0x1c8)]},_0x275d18=>{}),config={..._0x5b3ac1},updateBotManager(),proxyEmit(_0x1e0c42(0x266)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2ea7cc)!_0x1d6092?await reset(!![]):getBalances();else _0xcbe48b||_0x2c6d27?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4fbb09){const _0x8b0572=_0x35d2d0,_0x5f2b62={...config,'headless':_0x4fbb09[_0x8b0572(0x2a8)]};let _0xbd0fa6=dbConfig[_0x8b0572(0x262)](_0x8b0572(0x31f))[_0x8b0572(0x231)]({'botID':botID})['value']();_0xbd0fa6&&dbConfig[_0x8b0572(0x262)](_0x8b0572(0x31f))['find']({'botID':botID})[_0x8b0572(0x2ad)](_0x5f2b62)[_0x8b0572(0x241)](),config={..._0x5f2b62},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x15e0a8){const _0x45bd43=_0x35d2d0,_0x11ec0f={...config,'fiat':_0x15e0a8};let _0x3321e8=dbConfig[_0x45bd43(0x262)](_0x45bd43(0x31f))[_0x45bd43(0x231)]({'botID':botID})['value']();_0x3321e8&&dbConfig['get'](_0x45bd43(0x31f))['find']({'botID':botID})[_0x45bd43(0x2ad)](_0x11ec0f)[_0x45bd43(0x241)](),config={..._0x11ec0f},proxyEmit(_0x45bd43(0x2e0),emittedConfiguration());}function resetHistory(){const _0x3ff083=_0x35d2d0;logger[_0x3ff083(0x306)](_0x3ff083(0x23c));try{if(fs[_0x3ff083(0x2f8)](path['join'](configpath,_0x3ff083(0x1c5)+botID+_0x3ff083(0x253))))fs[_0x3ff083(0x18b)](path[_0x3ff083(0x16e)](configpath,_0x3ff083(0x1c5)+botID+_0x3ff083(0x253)));if(fs['existsSync'](path[_0x3ff083(0x16e)](configpath,_0x3ff083(0x1c5)+botID+_0x3ff083(0x311))))fs['unlinkSync'](path[_0x3ff083(0x16e)](configpath,_0x3ff083(0x1c5)+botID+'-performance.json'));if(fs[_0x3ff083(0x2f8)](path[_0x3ff083(0x16e)](configpath,_0x3ff083(0x1c5)+botID+'-results.json')))fs['unlinkSync'](path['join'](configpath,_0x3ff083(0x1c5)+botID+_0x3ff083(0x272)));}catch(_0x81190a){if(_0x81190a)logger['full'](_0x3ff083(0x1df),_0x81190a);}const _0x386fa4=getDate();let _0x41f4e7=[];currentCoins[_0x3ff083(0x1c4)](_0x30a3a5=>{const _0x50711d=_0x3ff083;_0x41f4e7[_0x50711d(0x1bd)]({'coin':_0x30a3a5[_0x50711d(0x21e)],'number':_0x30a3a5['number'],'price':_0x30a3a5[_0x50711d(0x172)]});});let _0x4655d1=dbConfig[_0x3ff083(0x262)](_0x3ff083(0x31f))[_0x3ff083(0x231)]({'botID':botID})['value']();_0x4655d1&&(dbConfig[_0x3ff083(0x262)](_0x3ff083(0x31f))[_0x3ff083(0x231)]({'botID':botID})[_0x3ff083(0x2ad)]({'liquidity':[{'date':_0x386fa4,'changes':_0x41f4e7}]})['write'](),config[_0x3ff083(0x29d)]=[]),restartBot(!![]);}function noslash(_0x3b9408){const _0x8c2692=_0x35d2d0;return _0x3b9408[_0x8c2692(0x277)]('/','');}function updateHighestFee(_0x3c825b){const _0x421a87=_0x35d2d0;if(_0x3c825b[_0x421a87(0x24e)]){let _0x1298ee={'filled':_0x3c825b[_0x421a87(0x19b)]*_0x3c825b['price'],'amount':_0x3c825b[_0x421a87(0x19b)]*_0x3c825b[_0x421a87(0x21d)],'side':_0x3c825b['side']==_0x421a87(0x1a4)?_0x421a87(0x192):'sell','price':0x1/_0x3c825b[_0x421a87(0x21d)]};_0x3c825b={..._0x3c825b,..._0x1298ee};}const _0x322958=defaultFee*_0x3c825b[_0x421a87(0x19b)]*_0x3c825b[_0x421a87(0x21d)];lastFees[_0x421a87(0x2ba)]['length']===0x14&&lastFees[_0x421a87(0x2ba)][_0x421a87(0x2a0)](),lastFees['recent20'][_0x421a87(0x1bd)](_0x322958),lastFees[_0x421a87(0x2d3)]=Math[_0x421a87(0x26d)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1d1f4c){const _0x4e2e92=_0x35d2d0;logger[_0x4e2e92(0x32d)](_0x4e2e92(0x195)+_0x1d1f4c['symbol']+_0x4e2e92(0x1ec)+_0x1d1f4c['status']+_0x4e2e92(0x1ec)+_0x1d1f4c[_0x4e2e92(0x19b)]+'\x20/\x20'+_0x1d1f4c[_0x4e2e92(0x1e7)]+_0x4e2e92(0x1ec)+_0x1d1f4c['id']);let _0x28d4eb=_0x1d1f4c[_0x4e2e92(0x29a)],_0x10f582=![];currentCoins[_0x4e2e92(0x1c4)](_0x324902=>{const _0x3cfba6=_0x4e2e92;_0x324902['symbol']==_0x1d1f4c[_0x3cfba6(0x28b)]&&(_0x10f582=!![]);});if(!_0x10f582)return;const _0x2ec727=currentCoins[_0x4e2e92(0x231)](_0x296b3f=>_0x296b3f[_0x4e2e92(0x28b)]==_0x1d1f4c['symbol']),_0x46ac96=_0x3358ff=>{const _0x57b863=_0x4e2e92;if(_0x2ec727)_0x2ec727[_0x57b863(0x22f)]=_0x3358ff;};let _0x476664=![];for(const _0x28c6e9 of lastOrders){const _0x83f860=0x64,_0x502be8=0x1388;let _0x134ad3=0x0;while(!_0x28c6e9['orderId']&&_0x134ad3*_0x83f860<_0x502be8){_0x134ad3++,await sleep(_0x83f860);}if(_0x134ad3>0x0)logger[_0x4e2e92(0x32d)](_0x4e2e92(0x171)+_0x134ad3*_0x83f860/0x3e8+_0x4e2e92(0x2dd));_0x28c6e9[_0x4e2e92(0x28d)]==_0x1d1f4c['id']&&(_0x476664=!![]);}if(_0x28d4eb==_0x4e2e92(0x2ab)){_0x46ac96(_0x4e2e92(0x2ab));if(_0x1d1f4c[_0x4e2e92(0x19b)]>0x0){if(_0x476664){setBlockTransactionDetection(!![]),logger[_0x4e2e92(0x32d)](_0x4e2e92(0x26c)+_0x1d1f4c['id']);const _0x511de4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x511de4,setBlockTransactionDetection(![]);}else logger[_0x4e2e92(0x32d)](_0x4e2e92(0x30b)+_0x1d1f4c['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x28d4eb==_0x4e2e92(0x1d7)){_0x46ac96('canceled');const _0x232527=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x232527,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x28d4eb==_0x4e2e92(0x319)){if(lastOrders)for(const _0x47b278 of lastOrders){if(_0x47b278[_0x4e2e92(0x28d)]==_0x1d1f4c['id']){logger[_0x4e2e92(0x32d)](_0x4e2e92(0x318)+_0x1d1f4c['id']),_0x476664=!![];if(_0x47b278[_0x4e2e92(0x19b)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x4e2e92(0x191)+_0x1d1f4c['id']);if(_0x1d1f4c['average'])_0x47b278[_0x4e2e92(0x21d)]=_0x1d1f4c[_0x4e2e92(0x254)];else{if(_0x1d1f4c[_0x4e2e92(0x21d)])_0x47b278[_0x4e2e92(0x21d)]=_0x1d1f4c[_0x4e2e92(0x21d)];else{}}_0x47b278[_0x4e2e92(0x19b)]=_0x1d1f4c[_0x4e2e92(0x19b)],updateHighestFee(_0x47b278),_0x46ac96(_0x4e2e92(0x19b)),await validateOrders();if(lockOrders==ORDERS[_0x4e2e92(0x1eb)]){const _0xaab6ab=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xaab6ab,setBlockTransactionDetection(![]);}_0x47b278[_0x4e2e92(0x1fa)]={'currency':_0x1d1f4c[_0x4e2e92(0x1fa)]?_0x1d1f4c[_0x4e2e92(0x1fa)][_0x4e2e92(0x177)]:null,'cost':_0x1d1f4c['fee']?_0x1d1f4c[_0x4e2e92(0x1fa)][_0x4e2e92(0x22b)]:0x0},await updateCoinResults(_0x47b278);}}}!_0x476664&&(logger[_0x4e2e92(0x32d)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x1d1f4c['id']),_0x46ac96(_0x4e2e92(0x19b)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x105106=JSON['parse'](lastBalances[_0x4e2e92(0x190)]);const _0x1c3447=_0x105106[_0x4e2e92(0x231)](_0x25dc86=>_0x25dc86[_0x4e2e92(0x28b)]==_0x1d1f4c['symbol']);if(_0x1c3447){if(_0x28d4eb==_0x4e2e92(0x2ab))_0x1c3447[_0x4e2e92(0x22f)]=_0x1c3447[_0x4e2e92(0x22f)]==_0x4e2e92(0x19b)?'filled':_0x4e2e92(0x2ab);else{if(_0x28d4eb==_0x4e2e92(0x1d7))_0x1c3447['orderstatus']=_0x1c3447['orderstatus']==_0x4e2e92(0x19b)?_0x4e2e92(0x19b):'canceled';else _0x28d4eb==_0x4e2e92(0x319)&&(_0x1c3447[_0x4e2e92(0x22f)]=_0x4e2e92(0x19b));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4e2e92(0x32c)](_0x105106)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xdec227=_0x35d2d0;await getOpenOrders();let _0x20cd52=![];currentCoins[_0xdec227(0x1c4)](_0x31d92d=>{const _0x587498=_0xdec227;_0x20cd52=allOpenOrders[_0x587498(0x231)](_0xf6ccfc=>_0xf6ccfc[_0x587498(0x28b)]==_0x31d92d[_0x587498(0x28b)]),_0x31d92d[_0x587498(0x22f)]=_0x20cd52?'open':_0x587498(0x2a7);});}async function getCoins(_0x3e8256=0x0,_0x185300=!![],_0x5be1d3=config[_0x35d2d0(0x1a2)]){const _0xe21793=_0x35d2d0;let _0x2e78b2,_0x4023c3=[],_0x2a13ed=[],_0x41afd5=[];if(_0x3e8256)await sleep(_0x3e8256);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2e78b2=await exchange['fetchBalance'](),mybalances=_0x2e78b2[_0xe21793(0x17a)];for(const [_0x3f128c,_0x534310]of Object[_0xe21793(0x2c3)](mybalances)){_0x41afd5['push'](_0x3f128c);}config[_0xe21793(0x190)][_0xe21793(0x1c4)](_0x95a84b=>{const _0x5cd01c=_0xe21793;!_0x41afd5['includes'](_0x95a84b[_0x5cd01c(0x21e)])&&(mybalances[_0x95a84b[_0x5cd01c(0x21e)]]=0x0);});if(_0x5be1d3=='')for(const [_0x178351,_0x43aa3e]of Object['entries'](mybalances)){_0x43aa3e!=0x0&&_0x4023c3[_0xe21793(0x1bd)]({'coin':_0x178351});}else for(const [_0x3ff3e5,_0x11f6a9]of Object[_0xe21793(0x2c3)](mybalances)){const _0x1d9ec2=config[_0xe21793(0x190)][_0xe21793(0x231)](_0x14fe4b=>_0x14fe4b['coin']==_0x3ff3e5),_0x163c40=_0x3ff3e5+'/'+_0x5be1d3,_0x4b1272=_0x5be1d3+'/'+_0x3ff3e5,_0x196c12=currentCoins[_0xe21793(0x231)](_0x254322=>_0x254322['coin']==_0x3ff3e5);if((_0x11f6a9!=0x0||_0x1d9ec2)&&(allSymbols[_0xe21793(0x1f2)](_0x163c40)||_0x3ff3e5==_0x5be1d3))_0x196c12?_0x4023c3[_0xe21793(0x1bd)]({..._0x196c12,'number':Math[_0xe21793(0x26d)](_0x11f6a9+(_0x1d9ec2&&_0x1d9ec2['offset']||0x0),0x0)}):_0x4023c3[_0xe21793(0x1bd)]({'coin':_0x3ff3e5,'symbol':_0x163c40,'reverse':![],'number':Math[_0xe21793(0x26d)](_0x11f6a9+(_0x1d9ec2&&_0x1d9ec2[_0xe21793(0x2c9)]||0x0),0x0),'orderstatus':_0xe21793(0x2a7)});else{if((_0x11f6a9!=0x0||_0x1d9ec2)&&allSymbols[_0xe21793(0x1f2)](_0x4b1272))_0x196c12?_0x4023c3['push']({..._0x196c12,'number':Math[_0xe21793(0x26d)](_0x11f6a9+(_0x1d9ec2&&_0x1d9ec2[_0xe21793(0x2c9)]||0x0),0x0)}):_0x4023c3[_0xe21793(0x1bd)]({'coin':_0x3ff3e5,'symbol':_0x4b1272,'reverse':!![],'number':Math[_0xe21793(0x26d)](_0x11f6a9+(_0x1d9ec2&&_0x1d9ec2[_0xe21793(0x2c9)]||0x0),0x0),'orderstatus':_0xe21793(0x2a7)});else _0x1d9ec2&&_0x4023c3[_0xe21793(0x1bd)]({'coin':_0x1d9ec2[_0xe21793(0x21e)],'symbol':_0x1d9ec2[_0xe21793(0x28b)],'reverse':_0x1d9ec2[_0xe21793(0x24e)],'number':0x0,'orderstatus':_0xe21793(0x2a7)});}}}catch(_0x2c4bae){if(!_0x185300)handleErrorNoStop(_0x2c4bae,_0xe21793(0x269));else await handleError(_0x2c4bae,'getCoins()');}return _0x4023c3[_0xe21793(0x194)]((_0x501775,_0x570c5b)=>_0x501775['delta']<_0x570c5b[_0xe21793(0x1b5)]?0x1:_0x570c5b[_0xe21793(0x1b5)]<_0x501775[_0xe21793(0x1b5)]?-0x1:0x0),_0x2a13ed=cloneDeep(_0x4023c3),_0x4023c3=_0x4023c3['filter'](_0x4d8c29=>{const _0x37bdbd=_0xe21793,_0x35aa2d=config[_0x37bdbd(0x190)][_0x37bdbd(0x231)](_0x4e1fc5=>_0x4e1fc5[_0x37bdbd(0x21e)]==_0x4d8c29[_0x37bdbd(0x21e)]);return _0x35aa2d&&!_0x35aa2d['excluded'];}),[_0x4023c3,_0x2a13ed];}async function getCoinNumber(_0x1959ce){const _0xc06f1=_0x35d2d0;let _0x31cf08;try{const _0x177567=await exchange['fetchBalance']();_0x31cf08=_0x177567[_0xc06f1(0x17a)][_0x1959ce];}catch(_0x5cab17){await handleError(_0x5cab17,_0xc06f1(0x1f5));}return _0x31cf08;}async function getOpenOrders(){const _0x4e149e=_0x35d2d0;let _0x14b786;allOpenOrders=[];try{for(const _0x3eac3e of config[_0x4e149e(0x190)]){!_0x3eac3e[_0x4e149e(0x2a9)]&&_0x3eac3e['coin']!=config[_0x4e149e(0x1a2)]&&(_0x14b786=await exchange['fetchOpenOrders'](_0x3eac3e[_0x4e149e(0x28b)]),_0x14b786[_0x4e149e(0x204)]>0x0&&allOpenOrders[_0x4e149e(0x1bd)](_0x14b786[0x0]));}}catch(_0x318243){await handleError(_0x318243,'getOpenOrders()');}}async function handleOpenOrders(_0x2394de=0x0){const _0x1f037e=_0x35d2d0;allOpenOrders[_0x1f037e(0x204)]==0x0&&lockOrders==ORDERS[_0x1f037e(0x1eb)]&&allOrdersPlaced&&(_0x2394de==0x0?(logger[_0x1f037e(0x32d)](_0x1f037e(0x19a)),_0x2394de++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1f037e(0x32d)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x1f037e(0x1cf))));}async function testAPI(_0x38d6b5){const _0x2841d0=_0x35d2d0,_0x42dce0=ccxt[_0x2841d0(0x1a7)][_0x38d6b5[_0x2841d0(0x202)][_0x2841d0(0x2d4)]()],_0x2a4587=new _0x42dce0({'apiKey':_0x38d6b5[_0x2841d0(0x26b)],'secret':_0x38d6b5['apiSecret'],'options':{'defaultType':_0x2841d0(0x2e3)}});if(_0x38d6b5[_0x2841d0(0x2fd)])_0x2a4587['password']=_0x38d6b5[_0x2841d0(0x2fd)];try{await _0x2a4587[_0x2841d0(0x1aa)]();}catch(_0x365392){throw _0x365392;}}function cloneDeep(_0x57b51f){const _0x51af81=_0x35d2d0;return JSON[_0x51af81(0x2f5)](JSON[_0x51af81(0x32c)](_0x57b51f));}async function getPortfolio(_0x837637){const _0x4e7908=_0x35d2d0;let _0x197aea=[],_0x4581ca=[],_0x5c26d0=[],_0x57270d;if(_0x837637[_0x4e7908(0x26b)]!==_0x4e7908(0x21c)||_0x837637[_0x4e7908(0x2e2)]!==_0x4e7908(0x21c)||_0x837637['apiPassword']&&_0x837637[_0x4e7908(0x2fd)]!==_0x4e7908(0x21c)){if(config['exchange']){if(_0x837637[_0x4e7908(0x26b)]==_0x4e7908(0x21c))_0x837637[_0x4e7908(0x26b)]=config[_0x4e7908(0x26b)];if(_0x837637['apiSecret']==_0x4e7908(0x21c))_0x837637[_0x4e7908(0x2e2)]=config[_0x4e7908(0x2e2)];if(_0x837637[_0x4e7908(0x2fd)]==_0x4e7908(0x21c))_0x837637[_0x4e7908(0x2fd)]=config[_0x4e7908(0x2fd)];try{await testAPI(_0x837637);}catch(_0x49232a){if(_0x49232a[_0x4e7908(0x211)]()[_0x4e7908(0x1f2)](_0x4e7908(0x258))){logger[_0x4e7908(0x32d)](_0x4e7908(0x220)),proxyEmit(_0x4e7908(0x190),![]);return;}else{handleError(_0x49232a,_0x4e7908(0x329));return;}}}config[_0x4e7908(0x202)]?updateExchange(_0x837637[_0x4e7908(0x26b)],_0x837637[_0x4e7908(0x2e2)],_0x837637['apiPassword']):await initExchange(_0x837637[_0x4e7908(0x202)],_0x837637[_0x4e7908(0x26b)],_0x837637[_0x4e7908(0x2e2)],_0x837637[_0x4e7908(0x2fd)]);try{await loadSymbols();}catch(_0x4c38de){if(_0x4c38de[_0x4e7908(0x211)]()[_0x4e7908(0x1f2)]('AuthenticationError')){proxyEmit(_0x4e7908(0x190),![]);return;}else{handleError(_0x4c38de,_0x4e7908(0x2ed));return;}}const _0x583bfc=await getCoins(0x0,![],_0x837637[_0x4e7908(0x1a2)]);_0x5c26d0=cloneDeep(_0x583bfc[0x1]);}else{const _0x21c8e6=await getCoins();_0x5c26d0=cloneDeep(_0x21c8e6[0x1]);}if(_0x837637['basecoin']=='')proxyEmit(_0x4e7908(0x190),_0x5c26d0);else{_0x5c26d0['forEach'](_0x2faa1b=>{const _0x4d492c=_0x4e7908;if(_0x2faa1b[_0x4d492c(0x21e)]!=_0x837637[_0x4d492c(0x1a2)]&&allSymbols[_0x4d492c(0x1f2)](_0x2faa1b[_0x4d492c(0x28b)]))_0x197aea[_0x4d492c(0x1bd)](_0x2faa1b[_0x4d492c(0x28b)]);});if(_0x197aea[_0x4e7908(0x204)]==0x0)logHistory(_0x4e7908(0x26e),_0x4e7908(0x181));else{try{_0x4581ca=await getTickers(_0x197aea);}catch(_0x8eb709){if(_0x8eb709[_0x4e7908(0x211)]()[_0x4e7908(0x1f2)]('AuthenticationError')){proxyEmit(_0x4e7908(0x190),![]);return;}else handleError(_0x8eb709,_0x4e7908(0x275));}_0x5c26d0[_0x4e7908(0x1c4)](_0x313124=>{const _0xacbbe6=_0x4e7908;_0x313124[_0xacbbe6(0x21e)]!=_0x837637['basecoin']?_0x4581ca[_0x313124[_0xacbbe6(0x28b)]]?_0x57270d=_0x313124[_0xacbbe6(0x24e)]?0x1/_0x4581ca[_0x313124[_0xacbbe6(0x28b)]][_0xacbbe6(0x172)]:_0x4581ca[_0x313124[_0xacbbe6(0x28b)]][_0xacbbe6(0x172)]:_0x57270d=0x0:_0x57270d=0x1,_0x313124[_0xacbbe6(0x21d)]=formatResult(_0x57270d,0x8);}),await getMarketCap(_0x5c26d0),proxyEmit(_0x4e7908(0x190),_0x5c26d0);}}}function truncateTradeAmount(_0x2f27d1,_0x3b06dd){const _0x59a290=_0x35d2d0;let _0x2a7c9e=0x0;try{_0x2a7c9e=exchange[_0x59a290(0x24f)](_0x2f27d1,_0x3b06dd);}catch(_0x3a37df){}return _0x2a7c9e;}function checkMinimums(_0x1ef0eb){const _0x13a094=_0x35d2d0;let _0x3ad2f2=!![];const _0x34edfb=!_0x1ef0eb[_0x13a094(0x24e)]?markets[_0x1ef0eb[_0x13a094(0x28b)]]['limits']['amount']['min']:markets[_0x1ef0eb[_0x13a094(0x28b)]][_0x13a094(0x21f)][_0x13a094(0x22b)][_0x13a094(0x29f)],_0x4a67b9=!_0x1ef0eb[_0x13a094(0x24e)]?markets[_0x1ef0eb['symbol']][_0x13a094(0x21f)][_0x13a094(0x22b)][_0x13a094(0x29f)]:markets[_0x1ef0eb['symbol']][_0x13a094(0x21f)]['amount']['min'],_0x381312=truncateTradeAmount(_0x1ef0eb[_0x13a094(0x28b)],_0x1ef0eb[_0x13a094(0x215)]);_0x1ef0eb[_0x13a094(0x215)]=_0x381312;if(Math['abs'](_0x381312)<_0x34edfb)_0x3ad2f2=![];if(Math[_0x13a094(0x21b)](_0x381312)*_0x1ef0eb[_0x13a094(0x172)]<_0x4a67b9)_0x3ad2f2=![];if(_0x1ef0eb[_0x13a094(0x297)]==_0x13a094(0x1a4)){let _0x43fbeb=config[_0x13a094(0x190)][_0x13a094(0x231)](_0x433e03=>_0x433e03['coin']==_0x1ef0eb[_0x13a094(0x21e)]);if(_0x43fbeb[_0x13a094(0x2c9)]>0x0){if(Math[_0x13a094(0x21b)](_0x381312)>_0x1ef0eb[_0x13a094(0x313)]-_0x43fbeb['offset'])_0x3ad2f2=![];}else{if(Math[_0x13a094(0x21b)](_0x381312)>_0x1ef0eb[_0x13a094(0x313)])_0x3ad2f2=![];}}if(_0x1ef0eb[_0x13a094(0x297)]=='buy'){let _0x134e7d=config['portfolio'][_0x13a094(0x231)](_0x97c8e1=>_0x97c8e1[_0x13a094(0x21e)]==config[_0x13a094(0x1a2)]),_0x37dab4=currentCoins[_0x13a094(0x231)](_0x1a62b6=>_0x1a62b6[_0x13a094(0x21e)]==config[_0x13a094(0x1a2)]);if(_0x134e7d['offset']>0x0){if(Math[_0x13a094(0x21b)](_0x381312)*_0x1ef0eb[_0x13a094(0x172)]>_0x37dab4[_0x13a094(0x313)]-_0x134e7d[_0x13a094(0x2c9)])_0x3ad2f2=![];}else{if(Math['abs'](_0x381312)*_0x1ef0eb[_0x13a094(0x172)]>_0x37dab4[_0x13a094(0x313)])_0x3ad2f2=![];}}return _0x3ad2f2;}async function getBalances(_0x41aede=!![]){const _0x34cd95=_0x35d2d0;let _0x14828a=0x0,_0x1dea78;const _0xf17fc1=config[_0x34cd95(0x1b4)];if(config[_0x34cd95(0x2a8)]&&config[_0x34cd95(0x24c)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1711ee=>{const _0x27eab5=_0x34cd95;if(_0x1711ee[_0x27eab5(0x21e)]!=config['basecoin']){let _0x7c5607=gTicker[noslash(_0x1711ee[_0x27eab5(0x28b)])];_0x1dea78=_0x1711ee['reverse']?0x1/_0x7c5607:_0x7c5607;}else _0x1dea78=0x1;let _0x2c96cb=_0x1711ee[_0x27eab5(0x313)]*_0x1dea78;_0x14828a+=_0x2c96cb,_0x1711ee[_0x27eab5(0x172)]=formatResult(Number(_0x1dea78),0x8),_0x1711ee[_0x27eab5(0x1b0)]=_0x2c96cb;}),currentCoins[_0x34cd95(0x1c4)](_0x442959=>{const _0x54477c=_0x34cd95;let _0x1b4599=config[_0x54477c(0x190)][_0x54477c(0x231)](_0x5ec302=>_0x5ec302['coin']==_0x442959[_0x54477c(0x21e)]),_0xd02136=Number(_0x1b4599[_0x54477c(0x249)]),_0x371338=_0x442959[_0x54477c(0x1b0)]/_0x14828a*0x64,_0x4b048f=_0xd02136*_0x14828a/0x64/_0x442959[_0x54477c(0x172)]-_0x442959[_0x54477c(0x313)];_0x442959[_0x54477c(0x249)]=formatResult(_0x371338,0x3),_0x442959[_0x54477c(0x217)]=formatResult(_0xd02136,0x3),_0x442959[_0x54477c(0x215)]=formatResult(_0x4b048f,0x8),_0x442959[_0x54477c(0x297)]='',_0x442959[_0x54477c(0x1ca)]=![];if(_0x442959[_0x54477c(0x21e)]!=config[_0x54477c(0x1a2)]){if(_0x442959[_0x54477c(0x249)]>_0xd02136)_0x442959[_0x54477c(0x297)]=_0x54477c(0x1a4),_0x442959[_0x54477c(0x1ca)]=checkMinimums(_0x442959);else _0x442959[_0x54477c(0x249)]<_0xd02136&&(_0x442959[_0x54477c(0x297)]=_0x54477c(0x192),_0x442959[_0x54477c(0x1ca)]=checkMinimums(_0x442959));}_0x442959[_0x54477c(0x1b5)]=_0x442959[_0x54477c(0x249)]/_0x442959['target']-0x1;if(_0x442959[_0x54477c(0x22f)]==_0x54477c(0x19b)||_0x442959[_0x54477c(0x22f)]=='canceled')_0x442959[_0x54477c(0x22f)]=_0x54477c(0x2a7);}),currentCoins[_0x34cd95(0x194)]((_0x3b28ca,_0x37f499)=>_0x3b28ca['delta']<_0x37f499[_0x34cd95(0x1b5)]?0x1:_0x37f499[_0x34cd95(0x1b5)]<_0x3b28ca[_0x34cd95(0x1b5)]?-0x1:0x0);const _0x16b1a2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x16b1a2[_0x34cd95(0x1c6)],'usd':_0x16b1a2['usd'],'portfolio':JSON[_0x34cd95(0x32c)](currentCoins),'threshold':_0xf17fc1},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x41aede){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0xf17fc1});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xf17fc1});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3c185c=getNormalizedPerformance();getStartingBalances(_0x3c185c),emitPerformance(_0x3c185c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x18956d=_0x35d2d0;if(!lastBalances)return;let _0x42d31e=[],_0x38f689,_0x51dbc2=JSON['parse'](lastBalances['portfolio']);_0x51dbc2[_0x18956d(0x194)]((_0x55b008,_0x78f85b)=>_0x55b008[_0x18956d(0x21e)]>_0x78f85b[_0x18956d(0x21e)]?0x1:_0x78f85b['coin']>_0x55b008[_0x18956d(0x21e)]?-0x1:0x0),_0x51dbc2[_0x18956d(0x1c4)](_0x1c9558=>{const _0x53baae=_0x18956d;let _0x4b96b8={'coin':_0x1c9558[_0x53baae(0x21e)],'number':_0x1c9558['number'],'price':_0x1c9558[_0x53baae(0x172)]};_0x42d31e['push'](_0x4b96b8);});const _0xeb106a=await getFiat();_0x38f689={'date':lastBalances[_0x18956d(0x320)][_0x18956d(0x200)]('\x20')[0x0],'eur':_0xeb106a[_0x18956d(0x1c6)],'usd':_0xeb106a['usd'],'coins':_0x42d31e};let _0xa43810=dbPerformance[_0x18956d(0x262)](_0x18956d(0x1ba))[_0x18956d(0x231)]({'date':_0x38f689[_0x18956d(0x25e)]})[_0x18956d(0x1b0)]();_0xa43810?_0x38f689[_0x18956d(0x25e)]!=config['startdate']&&dbPerformance['get']('data')[_0x18956d(0x231)]({'date':_0x38f689[_0x18956d(0x25e)]})[_0x18956d(0x2ad)](_0x38f689)['write']():dbPerformance[_0x18956d(0x262)]('data')[_0x18956d(0x1bd)](_0x38f689)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5919a7=_0x35d2d0;let _0x93c9b5=[];if(dbPerformance['has']('data')[_0x5919a7(0x1b0)]()){let _0x422db5=dbPerformance[_0x5919a7(0x262)](_0x5919a7(0x1ba))['cloneDeep']()['filter'](_0x1e34bc=>{const _0x348557=_0x5919a7;if(_0x1e34bc[_0x348557(0x2c6)][_0x348557(0x204)]==0x0)return![];else return!![];})['sortBy'](_0x5919a7(0x25e))[_0x5919a7(0x1b0)](),_0x4fa74f=[...config[_0x5919a7(0x29d)]];_0x4fa74f[_0x5919a7(0x194)]((_0x47ba49,_0x1ec8fe)=>_0x47ba49[_0x5919a7(0x25e)]>_0x1ec8fe[_0x5919a7(0x25e)]?-0x1:_0x1ec8fe[_0x5919a7(0x25e)]>_0x47ba49[_0x5919a7(0x25e)]?0x1:0x0);let _0x5c11d1=0x1,_0x3ac141=[],_0x8a9626=0x0;_0x422db5[_0x5919a7(0x2c2)]()[_0x5919a7(0x24e)]()[_0x5919a7(0x1c4)]((_0x26929f,_0x4c33da)=>{const _0x2f27a5=_0x5919a7;if(_0x4fa74f[_0x8a9626]){if(_0x422db5[_0x422db5[_0x2f27a5(0x204)]-_0x4c33da]&&_0x4fa74f[_0x8a9626][_0x2f27a5(0x25e)]==_0x422db5[_0x422db5[_0x2f27a5(0x204)]-_0x4c33da][_0x2f27a5(0x25e)]){if(_0x4c33da<_0x422db5[_0x2f27a5(0x204)]){let _0x2b5bf3=0x0,_0xd0ff57=0x0;_0x422db5[_0x422db5['length']-_0x4c33da][_0x2f27a5(0x2c6)]['forEach'](_0x58fca3=>{const _0x48b368=_0x2f27a5;_0xd0ff57+=_0x58fca3[_0x48b368(0x313)]*_0x58fca3[_0x48b368(0x21d)];}),_0x4fa74f[_0x8a9626][_0x2f27a5(0x2b1)]['forEach'](_0xfcd01d=>{const _0x49d5c5=_0x2f27a5;_0x2b5bf3+=_0xfcd01d[_0x49d5c5(0x313)]*_0xfcd01d[_0x49d5c5(0x21d)];}),_0x5c11d1*=_0x2b5bf3/(_0xd0ff57-_0x2b5bf3)+0x1;}_0x8a9626++;}}let _0x5aefb8=0x0;_0x26929f[_0x2f27a5(0x2c6)][_0x2f27a5(0x1c4)](_0x35a95c=>{const _0x2fda39=_0x2f27a5;_0x5aefb8+=_0x35a95c[_0x2fda39(0x313)]*_0x35a95c['price'];}),_0x3ac141[_0x422db5[_0x2f27a5(0x204)]-_0x4c33da-0x1]=_0x5aefb8*(_0x5c11d1-0x1);});let _0x328758=[];_0x4fa74f=[...config[_0x5919a7(0x29d)]]||[];let _0x36d491=0x0;_0x8a9626=0x0,_0x422db5['forEach']((_0x5fb955,_0x4938da)=>{const _0x9e22d5=_0x5919a7;if(_0x4fa74f[_0x8a9626]){const _0x530927=fns[_0x9e22d5(0x2f5)](_0x4fa74f[_0x8a9626]['date'],'yyyy/MM/dd',new Date()),_0x5c5efa=fns[_0x9e22d5(0x2f5)](_0x5fb955[_0x9e22d5(0x25e)],_0x9e22d5(0x2d5),new Date());if(fns[_0x9e22d5(0x2bf)](_0x530927,_0x5c5efa)){let _0x46372c=0x0;_0x4fa74f[_0x8a9626][_0x9e22d5(0x2b1)][_0x9e22d5(0x1c4)](_0x4cbb18=>{const _0x30195f=_0x9e22d5;!_0x328758[_0x4cbb18['coin']]?_0x328758[_0x4cbb18[_0x30195f(0x21e)]]=_0x4cbb18[_0x30195f(0x313)]:(_0x46372c=_0x328758[_0x4cbb18['coin']],_0x328758[_0x4cbb18[_0x30195f(0x21e)]]+=_0x4cbb18['number']);const _0x598aa0=_0x5fb955[_0x30195f(0x2c6)][_0x30195f(0x231)](_0x322753=>_0x322753[_0x30195f(0x21e)]==_0x4cbb18[_0x30195f(0x21e)]);(!_0x598aa0||_0x598aa0[_0x30195f(0x313)]==0x0)&&(_0x36d491+=(-_0x4cbb18[_0x30195f(0x313)]-_0x46372c)*_0x4cbb18[_0x30195f(0x21d)]);}),_0x8a9626++;}}_0x5fb955['coins'][_0x9e22d5(0x1c4)]((_0x321128,_0x11bd08)=>{const _0x228d3a=_0x9e22d5;_0x328758[_0x321128[_0x228d3a(0x21e)]]&&(_0x321128[_0x228d3a(0x1f4)]=_0x328758[_0x321128['coin']]);}),_0x93c9b5[_0x9e22d5(0x1bd)]({'date':_0x5fb955['date'],'eur':_0x5fb955[_0x9e22d5(0x1c6)],'usd':_0x5fb955[_0x9e22d5(0x239)],'offset':_0x3ac141[_0x4938da],'netoffset':_0x36d491,'coins':_0x5fb955[_0x9e22d5(0x2c6)]});});}return _0x93c9b5;}function emitPerformance(_0x3c9d77){const _0x572a68=_0x35d2d0;_0x3c9d77['length']!==0x0?(proxyEmit(_0x572a68(0x1bf),_0x3c9d77),lastPerformanceEmitted=getDate()):proxyEmit(_0x572a68(0x1bf),[]);}function getPerf(_0x15d83a,_0x1f553){const _0x1f6f3d=_0x35d2d0;let _0x16490d=0x0,_0x3d2b33=0x0,_0x10bcda=0x0;_0x15d83a['coins']['forEach'](_0x3be696=>{const _0x137372=_0x3e24;_0x16490d+=_0x3be696[_0x137372(0x313)]*_0x3be696[_0x137372(0x21d)];});_0x1f553&&(_0x16490d+=_0x15d83a[_0x1f6f3d(0x2c9)]);if(config[_0x1f6f3d(0x1a2)]==='BTC'||config[_0x1f6f3d(0x1a2)]===_0x1f6f3d(0x2f3)||config[_0x1f6f3d(0x1a2)]==='PAXG')_0x3d2b33=_0x16490d*_0x15d83a[_0x1f6f3d(0x1c6)],_0x10bcda=_0x16490d*_0x15d83a[_0x1f6f3d(0x239)];else{if(usdBasecoins[_0x1f6f3d(0x1f2)](config[_0x1f6f3d(0x1a2)]))_0x3d2b33=_0x16490d*_0x15d83a[_0x1f6f3d(0x1c6)]/_0x15d83a['usd'],_0x10bcda=_0x16490d;else config[_0x1f6f3d(0x1a2)]==='EUR'&&(_0x3d2b33=_0x16490d,_0x10bcda=_0x16490d*_0x15d83a[_0x1f6f3d(0x239)]/_0x15d83a[_0x1f6f3d(0x1c6)]);}return[_0x16490d,_0x3d2b33,_0x10bcda];}function getKPIs(_0x18fd16,_0x559296='EUR'){const _0x1f2613=_0x35d2d0,_0x118fb2=config[_0x1f2613(0x1a2)],_0x3f4d75=lastBalances,_0x34437e=currentCoins,_0x35e84f=getNormalizedPerformance(),_0x1d768c=_0x18fd16===_0x1f2613(0x1a2)?_0x118fb2:_0x18fd16==='fiat'||_0x18fd16===_0x1f2613(0x201)?_0x559296:_0x1f2613(0x267)+_0x118fb2,_0x337cb7=_0x18fd16==='net-basecoin'?'Net\x20effect':_0x18fd16===_0x1f2613(0x201)?_0x1f2613(0x1f7):_0x1d768c+_0x1f2613(0x17c),_0x592bbb=_0x18fd16===_0x1f2613(0x21a)||_0x18fd16===_0x1f2613(0x201)?_0x1f2613(0x1f7):_0x1d768c+_0x1f2613(0x17e);let _0xa6aca0=0x0;_0x34437e['forEach'](_0x2d46e5=>{const _0x447269=_0x1f2613;_0xa6aca0+=_0x2d46e5[_0x447269(0x313)]*_0x2d46e5[_0x447269(0x172)];});if(_0x18fd16===_0x1f2613(0x25a)||_0x18fd16===_0x1f2613(0x201)){if(_0x118fb2===_0x1f2613(0x259)||_0x118fb2===_0x1f2613(0x2f3)||_0x118fb2===_0x1f2613(0x20b))_0xa6aca0=_0xa6aca0*(_0x559296===_0x1f2613(0x2fe)?_0x3f4d75['eur']:_0x3f4d75[_0x1f2613(0x239)]);else{if(usdBasecoins[_0x1f2613(0x1f2)](_0x118fb2))_0xa6aca0=_0xa6aca0*(_0x559296==='EUR'?_0x3f4d75[_0x1f2613(0x1c6)]/_0x3f4d75[_0x1f2613(0x239)]:0x1);else _0x118fb2===_0x1f2613(0x2fe)&&(_0xa6aca0=_0xa6aca0*(_0x559296===_0x1f2613(0x2fe)?0x1:_0x3f4d75[_0x1f2613(0x239)]/_0x3f4d75['eur']));}}let _0x24923b;if(_0xa6aca0!==0x0){if(_0x18fd16==='basecoin')_0x24923b=(_0xa6aca0/startingBalances[_0x1f2613(0x1a2)]-0x1)*0x64;else{if(_0x559296===_0x1f2613(0x2fe))_0x24923b=(_0xa6aca0/startingBalances[_0x1f2613(0x1c6)]-0x1)*0x64;else _0x24923b=(_0xa6aca0/startingBalances['usd']-0x1)*0x64;}let _0x1039ea=0x0;if(startingBalances['coins'])_0x34437e[_0x1f2613(0x1c4)](_0x4483c0=>{const _0x45240d=_0x1f2613;let _0x7015ce=startingBalances[_0x45240d(0x2c6)][_0x45240d(0x231)](_0x30a518=>_0x30a518[_0x45240d(0x21e)]===_0x4483c0[_0x45240d(0x21e)]);if(_0x7015ce&&_0x7015ce['coin']&&_0x4483c0[_0x45240d(0x313)]!==0x0)_0x1039ea+=_0x7015ce[_0x45240d(0x313)]*_0x4483c0[_0x45240d(0x172)];});let _0x39bcd3=0x0;if(_0x35e84f[_0x1f2613(0x204)]!==0x0){let _0x2a3020=_0x35e84f[_0x35e84f['length']-0x1];_0x39bcd3=_0x2a3020[_0x1f2613(0x18c)];}_0x1039ea-=_0x39bcd3;_0x18fd16===_0x1f2613(0x21a)&&(_0x24923b=(_0xa6aca0-_0x1039ea)/startingBalances[_0x1f2613(0x1a2)]*0x64,_0xa6aca0=_0xa6aca0-_0x1039ea);if(_0x18fd16===_0x1f2613(0x201)){let _0x5949c9=_0x559296===_0x1f2613(0x2fe)?startingBalances[_0x1f2613(0x1c6)]:startingBalances[_0x1f2613(0x239)];if(_0x118fb2===_0x1f2613(0x259)||_0x118fb2==='ETH'||_0x118fb2===_0x1f2613(0x20b))_0x1039ea=_0x559296===_0x1f2613(0x2fe)?_0x1039ea*_0x3f4d75['eur']:_0x1039ea*_0x3f4d75[_0x1f2613(0x239)];else{if(usdBasecoins[_0x1f2613(0x1f2)](_0x118fb2))_0x1039ea=_0x559296===_0x1f2613(0x2fe)?_0x1039ea*_0x3f4d75[_0x1f2613(0x1c6)]/_0x3f4d75['usd']:_0x1039ea;else _0x118fb2===_0x1f2613(0x2fe)&&(_0x1039ea=_0x559296===_0x1f2613(0x2fe)?_0x1039ea:_0x1039ea*_0x3f4d75[_0x1f2613(0x239)]/_0x3f4d75['eur']);}_0x24923b=(_0xa6aca0-_0x1039ea)/_0x5949c9*0x64,_0xa6aca0=_0xa6aca0-_0x1039ea;}if(_0x24923b){if(_0x24923b<0x64)_0x24923b=_0x24923b[_0x1f2613(0x304)](0x2);else{if(_0x24923b<0x3e8)_0x24923b=_0x24923b[_0x1f2613(0x304)](0x1);else _0x24923b=_0x24923b['toFixed'](0x0);}}else _0x24923b=Number('0')['toFixed'](0x2);if(_0xa6aca0){if(Math['abs'](_0xa6aca0)<0.000001)_0xa6aca0=_0xa6aca0[_0x1f2613(0x304)](0x2);else{if(Math['abs'](_0xa6aca0)<0.1)_0xa6aca0=_0xa6aca0['toFixed'](0x6);else{if(Math['abs'](_0xa6aca0)<0x1)_0xa6aca0=_0xa6aca0[_0x1f2613(0x304)](0x5);else{if(Math[_0x1f2613(0x21b)](_0xa6aca0)<0xa)_0xa6aca0=_0xa6aca0[_0x1f2613(0x304)](0x4);else{if(Math[_0x1f2613(0x21b)](_0xa6aca0)<0x64)_0xa6aca0=_0xa6aca0['toFixed'](0x3);else{if(Math['abs'](_0xa6aca0)<0x3e8)_0xa6aca0=_0xa6aca0['toFixed'](0x2);else _0xa6aca0=_0xa6aca0[_0x1f2613(0x304)](0x2);}}}}}}else _0xa6aca0=Number('0')[_0x1f2613(0x304)](0x2);}else _0x24923b=Number('0')[_0x1f2613(0x304)](0x2);return{'value':_0xa6aca0,'change':_0x24923b,'leftTxt':_0x337cb7,'rightTxt':_0x592bbb};}async function getStartingBalances(_0x33bf3f,_0x406ee3=!![]){const _0x5eea3f=_0x35d2d0;if(_0x33bf3f['length']!==0x0){const [_0x385452,_0x1ec528,_0x37e3e6]=getPerf(_0x33bf3f[0x0],!![]);let _0x228373=[];config[_0x5eea3f(0x190)][_0x5eea3f(0x1c4)](_0x238d2a=>{const _0x46c918=_0x5eea3f;let _0x314b74=0x0,_0x45dcf4;config[_0x46c918(0x29d)][_0x46c918(0x1c4)](_0x58ef11=>{const _0x5693c7=_0x46c918;let _0x4a96db=_0x58ef11[_0x5693c7(0x2b1)]['find'](_0x59280a=>_0x59280a[_0x5693c7(0x21e)]==_0x238d2a[_0x5693c7(0x21e)]);if(_0x4a96db){_0x314b74+=_0x4a96db[_0x5693c7(0x313)];if(!_0x45dcf4)_0x45dcf4=_0x4a96db[_0x5693c7(0x21d)];}}),_0x228373['push']({'coin':_0x238d2a['coin'],'number':_0x314b74,'initialprice':_0x45dcf4});});const _0x3ab891={'basecoin':_0x385452,'eur':_0x1ec528,'usd':_0x37e3e6,'coins':_0x228373};if(_0x406ee3)proxyEmit(_0x5eea3f(0x276),_0x3ab891);startingBalances=_0x3ab891;}}function headlessMode(_0x1b507b){const _0x3c0001=_0x35d2d0;let _0xd2c580=_0x1b507b[_0x3c0001(0x190)],_0xbdcc9e=_0x1b507b[_0x3c0001(0x1b4)],_0x4be2b7=[];for(let _0x28ffa9 of _0xd2c580){if(_0x28ffa9[_0x3c0001(0x21e)]!=config[_0x3c0001(0x1a2)]){if(_0x28ffa9[_0x3c0001(0x1b5)]>=_0xbdcc9e/0x64){if(_0x28ffa9[_0x3c0001(0x1ca)])_0x4be2b7[_0x3c0001(0x1bd)](_0x28ffa9);}else{if(_0x28ffa9[_0x3c0001(0x1b5)]<=-_0xbdcc9e/0x64){if(_0x28ffa9[_0x3c0001(0x1ca)])_0x4be2b7[_0x3c0001(0x1bd)](_0x28ffa9);}}}}_0x4be2b7[_0x3c0001(0x204)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x4be2b7[_0x3c0001(0x1c4)](_0x23a796=>{const _0x18f15e=_0x3c0001;logger['debug'](_0x18f15e(0x226)+_0x23a796['coin']+'\x20'+_0x23a796[_0x18f15e(0x313)]+'\x20'+_0x23a796[_0x18f15e(0x172)]+'\x20'+_0x23a796[_0x18f15e(0x249)]+'%\x20'+_0x23a796[_0x18f15e(0x217)]+'%\x20'+(0x64*_0x23a796['delta'])['toFixed'](0x2)+_0x18f15e(0x2a3)+_0xbdcc9e[_0x18f15e(0x304)](0x2)+'%)');}),placeOrder(_0x4be2b7));}function notifyBalance(_0x8f4ee8){const _0x2141d7=_0x35d2d0;let _0x370ada=_0x8f4ee8[_0x2141d7(0x190)],_0x37c43b=_0x8f4ee8[_0x2141d7(0x1b4)],_0x41ee5c=[];for(let _0x18ce3d of _0x370ada){if(_0x18ce3d[_0x2141d7(0x21e)]!=config[_0x2141d7(0x1a2)]){if(_0x18ce3d[_0x2141d7(0x1b5)]>=_0x37c43b/0x64){if(_0x18ce3d[_0x2141d7(0x1ca)])_0x41ee5c['push'](_0x18ce3d);}else{if(_0x18ce3d[_0x2141d7(0x1b5)]<=-_0x37c43b/0x64){if(_0x18ce3d[_0x2141d7(0x1ca)])_0x41ee5c['push'](_0x18ce3d);}}}}if(_0x41ee5c[_0x2141d7(0x204)]>0x0){let _0xe7ebda=_0x41ee5c[_0x2141d7(0x1cd)](_0xc2a2e7=>_0xc2a2e7['coin']);_0xe7ebda[_0x2141d7(0x194)]();let _0x331058=_0xe7ebda['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2141d7(0x2cf),_0x2141d7(0x279));lastCoinsToBalance=_0x331058;}}function symbolToCoin(_0x580b87){const _0x357197=_0x35d2d0;let _0xce7be3;if(_0x580b87[_0x357197(0x1f2)]('/'+config[_0x357197(0x1a2)]))_0xce7be3=_0x580b87[_0x357197(0x277)]('/'+config[_0x357197(0x1a2)],'');if(_0x580b87[_0x357197(0x1f2)](config[_0x357197(0x1a2)]+'/'))_0xce7be3=_0x580b87[_0x357197(0x277)](config[_0x357197(0x1a2)]+'/','');return _0xce7be3;}async function unlockOrders(){const _0x272b50=_0x35d2d0;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x272b50(0x32d)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x272b50(0x235)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x54aa8d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x54aa8d,setBlockTransactionDetection(![]),validateOrdersState=_0x272b50(0x1f4),persistOpenOrders([]),lockOrders=ORDERS[_0x272b50(0x32f)],logger['debug'](_0x272b50(0x274));}}async function validateOrders(_0x4fcb68){const _0xeae90c=_0x35d2d0;if(_0x4fcb68)validateOrdersState=_0x4fcb68;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0xeae90c(0x2aa):lockOrders==0x2?_0xeae90c(0x2eb):_0xeae90c(0x263)));let _0x1372fa=[],_0x2b3746=config[_0xeae90c(0x2d1)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xeae90c(0x1da)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xeae90c(0x1eb)])return;logger[_0xeae90c(0x32d)](_0xeae90c(0x330)+validateOrdersState),lastOrders[_0xeae90c(0x1c4)](_0x15b815=>{const _0x1ad213=_0xeae90c;let _0x4714ed=![];_0x15b815[_0x1ad213(0x19b)]>0x0&&(_0x4714ed=!![]),_0x1372fa[_0x1ad213(0x1bd)](_0x4714ed),_0x4714ed&&config[_0x1ad213(0x2d1)]!=_0x1ad213(0x250)&&logHistory(_0x1ad213(0x27d),_0x1ad213(0x1be)+_0x15b815['symbol']+'\x20'+_0x15b815['side']+'\x20#'+formatResult(_0x15b815['filled'],0x8)+'\x20@'+formatResult(_0x15b815[_0x1ad213(0x21d)],0x8));}),_0x1372fa['forEach']((_0x5d1851,_0x459699)=>{const _0x41f9a9=_0xeae90c;if(_0x5d1851)lastOrders[_0x41f9a9(0x30d)](_0x459699,0x1);}),persistOpenOrders(lastOrders);const _0xca3a7e=coolingDown?_0xeae90c(0x2bb):_0xeae90c(0x307);if(validateOrdersState==_0xeae90c(0x1f4)){validateOrdersState=_0xeae90c(0x238);if(_0x1372fa['includes'](![])){if(config[_0xeae90c(0x2d1)]==_0xeae90c(0x250)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0xeae90c(0x238)){if(_0x1372fa[_0xeae90c(0x1f2)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0xeae90c(0x250)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0xeae90c(0x2fc))_0x1372fa['includes'](![])&&(config['ordertype']=='market'?logHistory(_0xeae90c(0x23d),_0xeae90c(0x1f8)+Math['round'](_0x2b3746*validateOrderInterval/0xea60)+_0xeae90c(0x1b8)+_0xca3a7e):(await cancelOrders(),logHistory(_0xeae90c(0x23d),_0xeae90c(0x22c)+Math['round'](_0x2b3746*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0xca3a7e))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0xeae90c(0x2d1)]!=_0xeae90c(0x250))logHistory('success',_0xeae90c(0x216)+_0xca3a7e);await unlockOrders();}}}}}async function cancelOrders(){const _0x51c4bc=_0x35d2d0;lastOrders[_0x51c4bc(0x1c4)](async _0x2aa15f=>{const _0x4c88de=_0x51c4bc;try{const _0x690d2f=await exchange[_0x4c88de(0x27c)](_0x2aa15f['orderId'],_0x2aa15f[_0x4c88de(0x28b)]);}catch(_0x3889bc){if(_0x3889bc[_0x4c88de(0x211)]()[_0x4c88de(0x1f2)](_0x4c88de(0x260))){}else await handleError(_0x3889bc,'cancelOrders()');}});}async function initCoinResults(_0x3f97d2){const _0x4b7671=_0x35d2d0;_0x3f97d2?logger[_0x4b7671(0x32d)](_0x4b7671(0x1b7)+_0x3f97d2):logger['debug']('Initializing\x20coin\x20results'),config[_0x4b7671(0x190)][_0x4b7671(0x1c4)](_0x4e2de3=>{const _0x8fc767=_0x4b7671;if(!_0x4e2de3[_0x8fc767(0x2a9)]&&_0x4e2de3[_0x8fc767(0x21e)]!=config[_0x8fc767(0x1a2)]){const _0x18de68=currentCoins['find'](_0x1d0352=>_0x1d0352[_0x8fc767(0x21e)]==_0x4e2de3[_0x8fc767(0x21e)]),_0x45903f=gTicker[noslash(_0x4e2de3[_0x8fc767(0x28b)])];let _0x6d92f9=_0x18de68?_0x18de68[_0x8fc767(0x313)]:null,_0x2c162d=_0x4e2de3[_0x8fc767(0x24e)]?0x1/_0x45903f:_0x45903f,_0x452560;config[_0x8fc767(0x29d)][_0x8fc767(0x1c4)](_0x13e471=>{const _0x132189=_0x8fc767;!_0x452560&&(_0x452560=_0x13e471[_0x132189(0x2b1)][_0x132189(0x231)](_0x88f0e9=>_0x88f0e9[_0x132189(0x21e)]==_0x4e2de3[_0x132189(0x21e)]),_0x452560&&(_0x6d92f9=_0x452560[_0x132189(0x313)],_0x2c162d=_0x452560[_0x132189(0x21d)]));});let _0x1bebad=dbCoinResults[_0x8fc767(0x262)](_0x8fc767(0x2c6))[_0x8fc767(0x231)]({'coin':_0x4e2de3[_0x8fc767(0x21e)]})[_0x8fc767(0x1b0)]();if(!_0x1bebad){const _0x4996bd={'coin':_0x4e2de3[_0x8fc767(0x21e)],'number':_0x6d92f9,'breakeven':_0x2c162d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x8fc767(0x262)](_0x8fc767(0x2c6))[_0x8fc767(0x1bd)](_0x4996bd)[_0x8fc767(0x241)]();}else{if(_0x3f97d2&&_0x4e2de3[_0x8fc767(0x21e)]==_0x3f97d2){const _0x592ee1={'coin':_0x4e2de3[_0x8fc767(0x21e)],'number':_0x6d92f9,'breakeven':_0x2c162d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x8fc767(0x262)](_0x8fc767(0x2c6))[_0x8fc767(0x231)]({'coin':_0x4e2de3['coin']})[_0x8fc767(0x2ad)](_0x592ee1)['write']();}}}});}async function updateCoinResults(_0x57f5fd,_0x270edf=![]){const _0x230017=_0x35d2d0;let _0x5ae891,_0x2d4960,_0x54f48e,_0x4d4a14,_0x42e81c,_0xa9da1a,_0x40a5b4=dbCoinResults['get']('coins')[_0x230017(0x231)]({'coin':_0x57f5fd[_0x230017(0x21e)]})['value'](),_0x589640=![];_0x40a5b4&&Object['entries'](_0x40a5b4)['forEach'](([_0x418ff7,_0x305b05])=>{if(_0x305b05==null)_0x589640=!![];});(!_0x40a5b4||_0x589640)&&(await initCoinResults(_0x57f5fd['coin']),_0x40a5b4=dbCoinResults[_0x230017(0x262)](_0x230017(0x2c6))[_0x230017(0x231)]({'coin':_0x57f5fd[_0x230017(0x21e)]})[_0x230017(0x1b0)]());_0x57f5fd[_0x230017(0x24e)]&&(_0xa9da1a={'filled':_0x57f5fd[_0x230017(0x19b)]*_0x57f5fd[_0x230017(0x21d)],'amount':_0x57f5fd['filled']*_0x57f5fd[_0x230017(0x21d)],'side':_0x57f5fd[_0x230017(0x297)]==_0x230017(0x1a4)?_0x230017(0x192):_0x230017(0x1a4),'price':0x1/_0x57f5fd[_0x230017(0x21d)]},_0x57f5fd={..._0x57f5fd,..._0xa9da1a});_0x270edf?_0x2d4960=_0x57f5fd[_0x230017(0x297)]==_0x230017(0x192)?_0x40a5b4[_0x230017(0x313)]+_0x57f5fd['filled']:_0x40a5b4['number']-_0x57f5fd['filled']:_0x2d4960=await getCoinNumber(_0x57f5fd[_0x230017(0x21e)]);if(_0x57f5fd[_0x230017(0x1fa)]&&_0x57f5fd[_0x230017(0x1fa)][_0x230017(0x177)]==config[_0x230017(0x1a2)])_0x5ae891=Number(_0x57f5fd[_0x230017(0x1fa)][_0x230017(0x22b)]);else{if(_0x57f5fd[_0x230017(0x1fa)]&&_0x57f5fd[_0x230017(0x1fa)][_0x230017(0x177)]==_0x230017(0x27b)&&!_0x270edf&&config[_0x230017(0x1a2)]!='PAXG')_0x5ae891=Number(_0x57f5fd['fee'][_0x230017(0x22b)])*gTicker['BNB'+config[_0x230017(0x1a2)]];else _0x5ae891=defaultFee*_0x57f5fd['filled']*_0x57f5fd[_0x230017(0x21d)];}_0x57f5fd[_0x230017(0x297)]=='buy'?(_0x54f48e=_0x2d4960!=0x0?(_0x40a5b4['breakeven']*_0x40a5b4[_0x230017(0x313)]+_0x57f5fd[_0x230017(0x21d)]*(_0x2d4960-_0x40a5b4[_0x230017(0x313)])+_0x5ae891)/_0x2d4960:0x0,_0x4d4a14=_0x40a5b4[_0x230017(0x23b)]):(_0x54f48e=_0x2d4960!=0x0?(_0x40a5b4[_0x230017(0x19f)]*_0x40a5b4[_0x230017(0x313)]-_0x57f5fd[_0x230017(0x21d)]*(_0x40a5b4[_0x230017(0x313)]-_0x2d4960)+_0x5ae891)/_0x2d4960:0x0,_0x4d4a14=_0x40a5b4[_0x230017(0x23b)]+(_0x57f5fd[_0x230017(0x21d)]-_0x40a5b4['breakeven'])*_0x57f5fd[_0x230017(0x19b)]);_0x42e81c=(_0x57f5fd[_0x230017(0x21d)]-_0x54f48e-_0x5ae891/_0x57f5fd[_0x230017(0x19b)])*_0x2d4960;let _0xe9da6c={'coin':_0x57f5fd[_0x230017(0x21e)],'number':_0x2d4960,'breakeven':formatResult(_0x54f48e,0x8),'realized':formatResult(_0x4d4a14,0x8),'unrealized':formatResult(_0x42e81c,0x8),'fees':formatResult(_0x40a5b4[_0x230017(0x213)]+_0x5ae891,0x8),'sells':_0x57f5fd[_0x230017(0x297)]=='sell'?_0x40a5b4[_0x230017(0x261)]+0x1:_0x40a5b4[_0x230017(0x261)],'buys':_0x57f5fd[_0x230017(0x297)]==_0x230017(0x192)?_0x40a5b4[_0x230017(0x1e8)]+0x1:_0x40a5b4['buys']};dbCoinResults[_0x230017(0x262)]('coins')[_0x230017(0x231)]({'coin':_0x57f5fd['coin']})[_0x230017(0x2ad)](_0xe9da6c)['write']();if(!_0x270edf){if(_0x57f5fd[_0x230017(0x1fa)]&&_0x57f5fd[_0x230017(0x1fa)]['currency']==_0x230017(0x27b)){const _0x11e560=currentCoins[_0x230017(0x231)](_0x52f3e2=>_0x52f3e2[_0x230017(0x21e)]==_0x230017(0x27b));if(_0x11e560){let _0x1454df=dbCoinResults['get']('coins')[_0x230017(0x231)]({'coin':_0x230017(0x27b)})[_0x230017(0x1b0)]();_0xe9da6c={..._0x1454df,'number':_0x11e560[_0x230017(0x313)]},dbCoinResults[_0x230017(0x262)](_0x230017(0x2c6))[_0x230017(0x231)]({'coin':'BNB'})[_0x230017(0x2ad)](_0xe9da6c)[_0x230017(0x241)]();}}}}async function placeOrder(_0x182b02){const _0x36aa94=_0x35d2d0,_0x391db9=config[_0x36aa94(0x2d1)]==_0x36aa94(0x250)?'market':_0x36aa94(0x271);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x36aa94(0x1eb)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x36aa94(0x1f4);let _0x4e2245=![];lastOrders=[];for(const _0x5254a1 of _0x182b02){let _0x153962,_0x17db5c,_0x29facc,_0x4f1fdf,_0x55ce7c,_0x6c383e=_0x5254a1[_0x36aa94(0x28b)];try{const _0x5bcd73=await exchange[_0x36aa94(0x31e)](_0x6c383e);_0x153962=_0x5254a1[_0x36aa94(0x24e)]?0x1/_0x5254a1['last']:_0x5254a1[_0x36aa94(0x172)],_0x17db5c=_0x5bcd73['bid'],_0x29facc=_0x5bcd73['ask'];_0x5254a1[_0x36aa94(0x24e)]?(_0x4f1fdf=_0x5254a1['side']==_0x36aa94(0x192)?_0x36aa94(0x1a4):'buy',_0x55ce7c=Math[_0x36aa94(0x21b)](_0x5254a1[_0x36aa94(0x215)])/_0x153962):(_0x4f1fdf=_0x5254a1[_0x36aa94(0x297)],_0x55ce7c=Math[_0x36aa94(0x21b)](_0x5254a1[_0x36aa94(0x215)]));_0x391db9=='limit'&&(config['ordertype']==_0x36aa94(0x324)&&(_0x153962=_0x4f1fdf==_0x36aa94(0x192)?_0x17db5c:_0x29facc),config[_0x36aa94(0x2d1)]==_0x36aa94(0x302)&&(_0x153962=_0x4f1fdf==_0x36aa94(0x192)?_0x29facc:_0x17db5c));_0x55ce7c=formatResult(_0x55ce7c,0x8),_0x153962=formatResult(_0x153962,0x8);const _0xf4892f=_0x4f1fdf==_0x36aa94(0x1a4)?config['emojisell']?String['fromCodePoint']('0x'+config[_0x36aa94(0x303)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x36aa94(0x323)])+'\x20':'',_0x455bc9=_0x391db9=='market'?'Market':config['ordertype']==_0x36aa94(0x324)?_0x36aa94(0x174):'Limit\x20(low-margin)',_0x4ac796=(Math['floor'](Math[_0x36aa94(0x2f0)]()*0x35a4e900)+0x5f5e100)[_0x36aa94(0x211)]();lastOrders[_0x36aa94(0x1bd)]({'customId':_0x4ac796,'symbol':_0x6c383e,'coin':_0x5254a1[_0x36aa94(0x21e)],'amount':_0x55ce7c,'price':_0x153962,'side':_0x4f1fdf,'reverse':_0x5254a1[_0x36aa94(0x24e)],'filled':0x0});if(_0x391db9==_0x36aa94(0x250))logHistory(_0x36aa94(0x27d),''+_0xf4892f+_0x455bc9+_0x36aa94(0x2a1)+_0x6c383e+'\x20'+_0x4f1fdf+'\x20#'+formatResult(_0x55ce7c,0x8)+'\x20@'+formatResult(_0x153962,0x8));else logHistory('order',''+_0xf4892f+_0x455bc9+_0x36aa94(0x2a1)+_0x6c383e+'\x20'+_0x4f1fdf+'\x20#'+formatResult(_0x55ce7c,0x8)+'\x20@'+formatResult(_0x153962,0x8));let _0x470b5e;_0x391db9==_0x36aa94(0x250)?_0x4f1fdf==_0x36aa94(0x192)&&[_0x36aa94(0x193),'Bitget','Cex',_0x36aa94(0x31b),_0x36aa94(0x314)][_0x36aa94(0x1f2)](config[_0x36aa94(0x202)])?_0x470b5e=await exchange[_0x36aa94(0x2df)](_0x6c383e,_0x391db9,_0x4f1fdf,_0x55ce7c,_0x153962):_0x470b5e=await exchange[_0x36aa94(0x2df)](_0x6c383e,_0x391db9,_0x4f1fdf,_0x55ce7c,undefined):_0x470b5e=await exchange[_0x36aa94(0x2df)](_0x6c383e,_0x391db9,_0x4f1fdf,_0x55ce7c,_0x153962);logger[_0x36aa94(0x32d)]('ID:\x20'+_0x470b5e['id']+_0x36aa94(0x1dd)+_0x4ac796);const _0x5a688f=lastOrders[_0x36aa94(0x204)]-0x1;if(_0x5a688f>=0x0&&lastOrders[_0x5a688f][_0x36aa94(0x273)]==_0x4ac796){lastOrders[_0x5a688f][_0x36aa94(0x28d)]=_0x470b5e['id'];if(_0x470b5e[_0x36aa94(0x1e7)])lastOrders[_0x5a688f]['amount']=_0x470b5e[_0x36aa94(0x1e7)];if(_0x470b5e['price'])lastOrders[_0x5a688f][_0x36aa94(0x21d)]=_0x470b5e[_0x36aa94(0x21d)];lastOrders[_0x5a688f][_0x36aa94(0x1fa)]=_0x470b5e[_0x36aa94(0x1fa)];}if(config['cooldown']!=0x0){let _0x55464b=null;if(cooldownTracker['length']==config[_0x36aa94(0x30c)]-0x1)_0x55464b=cooldownTracker[_0x36aa94(0x2a0)]();const _0x140cc1=getTimeStamp();cooldownTracker['push'](_0x140cc1);if(_0x55464b){const _0xffafc8=fns[_0x36aa94(0x19d)](new Date(_0x140cc1),new Date(_0x55464b));if(_0xffafc8<cooldownInterval){logHistory('error',_0x36aa94(0x2ce)+config[_0x36aa94(0x30c)]+_0x36aa94(0x28c)+cooldownInterval/0x3c+_0x36aa94(0x24d)+cooldownPeriod/(0xe10*0x3e8)+_0x36aa94(0x1e0)),coolingDown=!![];break;}}}}catch(_0x27cd1b){if(_0x27cd1b[_0x36aa94(0x211)]()[_0x36aa94(0x1f2)](_0x36aa94(0x251)))lastOrders=lastOrders[_0x36aa94(0x18f)](_0x1ccfbe=>_0x1ccfbe[_0x36aa94(0x28b)]!=_0x6c383e),logHistory('error',_0x36aa94(0x2dc)+_0x6c383e),_0x4e2245=!![];else{if(_0x27cd1b[_0x36aa94(0x211)]()[_0x36aa94(0x1f2)](_0x36aa94(0x27f)))lastOrders=lastOrders[_0x36aa94(0x18f)](_0x579e83=>_0x579e83[_0x36aa94(0x28b)]!=_0x6c383e),logHistory(_0x36aa94(0x26e),_0x36aa94(0x209)+_0x6c383e),_0x4e2245=!![];else{if(_0x27cd1b['toString']()[_0x36aa94(0x1f2)](_0x36aa94(0x285)))lastOrders=lastOrders[_0x36aa94(0x18f)](_0x30eead=>_0x30eead['symbol']!=_0x6c383e),logHistory('error',_0x36aa94(0x1c2)+_0x6c383e),logger['debug'](_0x27cd1b),_0x4e2245=!![];else _0x27cd1b[_0x36aa94(0x211)]()[_0x36aa94(0x1f2)](_0x36aa94(0x2b0))?(lastOrders=lastOrders[_0x36aa94(0x18f)](_0x58e910=>_0x58e910[_0x36aa94(0x28b)]!=_0x6c383e),logHistory(_0x36aa94(0x26e),_0x36aa94(0x2dc)+_0x6c383e),_0x4e2245=!![]):(lastOrders=lastOrders[_0x36aa94(0x18f)](_0x39ffa8=>_0x39ffa8[_0x36aa94(0x28b)]!=_0x6c383e),await handleError(_0x27cd1b,_0x36aa94(0x180),_0x6c383e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x312b75=config[_0x36aa94(0x2d1)]==_0x36aa94(0x250)?validateOrderTimeout*0x3c*0x3e8:config[_0x36aa94(0x1da)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36dfd1=_0x36aa94;validateOrders(_0x36dfd1(0x2fc));},_0x312b75);}else unlockOrders();_0x4e2245&&config['headless']&&(logHistory(_0x36aa94(0x26e),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x36aa94(0x22a)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x36aa94(0x288));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x36aa94(0x2a8)]&&(config[_0x36aa94(0x2d1)]==_0x36aa94(0x250)?logHistory(_0x36aa94(0x26e),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x36aa94(0x26e),_0x36aa94(0x268))));}}function persistOpenOrders(_0xde78ac){const _0x55e465=_0x35d2d0,_0x405295={...config,'openOrders':_0xde78ac};let _0x4b66db=dbConfig[_0x55e465(0x262)]('bot')['find']({'botID':botID})['value']();_0x4b66db&&dbConfig[_0x55e465(0x262)](_0x55e465(0x31f))[_0x55e465(0x231)]({'botID':botID})['assign'](_0x405295)['write']();}function restoreOrders(){const _0x406d65=_0x35d2d0;let _0x3b2515;config[_0x406d65(0x2de)]&&allOpenOrders['forEach'](_0x518e50=>{const _0x256f9c=_0x406d65,_0x5eb022=config['openOrders']['find'](_0x2c6efc=>_0x2c6efc['orderId']==_0x518e50['id']);_0x5eb022&&(lastOrders['push'](_0x5eb022),_0x3b2515=_0x518e50[_0x256f9c(0x20f)]);});if(lastOrders[_0x406d65(0x204)]>0x0){lockOrders=ORDERS[_0x406d65(0x1eb)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x3cc51d=new Date()['getTime'](),_0xa4f7c3=config[_0x406d65(0x2d1)]==_0x406d65(0x250)?validateOrderTimeout*0x3c*0x3e8:config[_0x406d65(0x1da)]*0x3c*0x3e8;if(_0x3b2515+_0xa4f7c3>_0x3cc51d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1126e4=_0x406d65;validateOrders(_0x1126e4(0x2fc));},_0x3b2515+_0xa4f7c3-_0x3cc51d);}else validateOrders(_0x406d65(0x2fc));}}async function sendMetricsTelegram(){const _0x300e52=_0x35d2d0;if(!coinsLoaded){process['send']({'telegrammsg':_0x300e52(0x19c)},_0x458276=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x280946='';if(config[_0x300e52(0x23e)])_0x280946=_0x300e52(0x310)+config[_0x300e52(0x1c8)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x280946=_0x300e52(0x242)+botID+_0x300e52(0x1a0);const _0x13e615=getKPIs(_0x300e52(0x1a2)),_0x16b819=getKPIs(_0x300e52(0x25a),config['fiat']),_0x5e94b5=getKPIs('net-basecoin'),_0x1fe90c=getKPIs(_0x300e52(0x201),config[_0x300e52(0x25a)]);_0x280946+=_0x300e52(0x203),_0x280946+=_0x13e615[_0x300e52(0x321)]+_0x300e52(0x284)+_0x13e615['value']+'\x0a',_0x280946+=_0x13e615[_0x300e52(0x32a)]+':\x20'+_0x13e615['change']+'%\x0a',_0x280946+=_0x16b819[_0x300e52(0x321)]+_0x300e52(0x284)+_0x16b819[_0x300e52(0x1b0)]+'\x0a',_0x280946+=_0x16b819[_0x300e52(0x32a)]+':\x20'+_0x16b819[_0x300e52(0x20c)]+'%\x0a',_0x280946+=_0x5e94b5[_0x300e52(0x321)]+':\x20'+_0x5e94b5[_0x300e52(0x1b0)]+'\x20('+config[_0x300e52(0x1a2)]+')\x0a',_0x280946+=_0x5e94b5[_0x300e52(0x32a)]+':\x20'+_0x5e94b5[_0x300e52(0x20c)]+'%\x20('+config['basecoin']+')\x0a',_0x280946+=_0x1fe90c[_0x300e52(0x321)]+':\x20'+_0x1fe90c[_0x300e52(0x1b0)]+'\x20('+config[_0x300e52(0x25a)]+')\x0a',_0x280946+=_0x1fe90c[_0x300e52(0x32a)]+':\x20'+_0x1fe90c['change']+_0x300e52(0x2a3)+config['fiat']+')\x0a',_0x280946+=_0x300e52(0x1b6),process[_0x300e52(0x2a5)]({'telegrammsg':_0x280946},_0x35d819=>{});}async function sendPortfolioTelegram(){const _0xa4f7d0=_0x35d2d0;if(!coinsLoaded||!currentCoins[0x0][_0xa4f7d0(0x249)]){process[_0xa4f7d0(0x2a5)]({'telegrammsg':_0xa4f7d0(0x19c)},_0x4077c7=>{});return;}let _0x2f0b1f='';if(config['showname'])_0x2f0b1f=_0xa4f7d0(0x310)+config[_0xa4f7d0(0x1c8)]+_0xa4f7d0(0x232);else _0x2f0b1f=_0xa4f7d0(0x242)+botID+_0xa4f7d0(0x232);_0x2f0b1f+=_0xa4f7d0(0x203),_0x2f0b1f+='-------------------------------\x0a',_0x2f0b1f+=_0xa4f7d0(0x2c4),_0x2f0b1f+=_0xa4f7d0(0x206),currentCoins[_0xa4f7d0(0x1c4)](_0x3c37bb=>{const _0x659676=_0xa4f7d0;_0x2f0b1f+=_0x3c37bb[_0x659676(0x21e)][_0x659676(0x1d1)](0x7)+'|\x20'+formatPad(_0x3c37bb[_0x659676(0x249)],0x2,0x6)+'|\x20'+formatPad(_0x3c37bb[_0x659676(0x217)],0x2,0x6)+'|\x20'+formatPad(_0x3c37bb['delta']*0x64,0x2,0x6)+'\x0a';}),_0x2f0b1f+=_0xa4f7d0(0x1b6),process[_0xa4f7d0(0x2a5)]({'telegrammsg':_0x2f0b1f},_0x21db7d=>{});}function formatPad(_0x39ed02,_0x4f77a6,_0x5ddab0){const _0x118dbb=_0x35d2d0,_0x26f2d9=formatResultString(_0x39ed02,_0x4f77a6);return _0x26f2d9?_0x26f2d9[_0x118dbb(0x1d2)](_0x5ddab0):''[_0x118dbb(0x1d2)](_0x5ddab0);}function logHistory(_0x1f9b90,_0x5a4573,_0xec95b=''){const _0x155a61=_0x35d2d0;logger[_0x155a61(0x306)](''+_0x5a4573);let _0x1bf6df={'time':getTimeStamp(),'type':_0x1f9b90,'event':_0x5a4573};dbLogs['get'](_0x155a61(0x30f))[_0x155a61(0x1bd)](_0x1bf6df)[_0x155a61(0x241)]();if(_0xec95b=='')_0xec95b=_0x5a4573;proxyEmit(_0x155a61(0x2ef),{'log':_0x1bf6df,'summary':_0xec95b}),process[_0x155a61(0x2a5)]({'telegram':{..._0x1bf6df,'botname':config['botname'],'showname':config['showname']}},_0x4abbab=>{});}function emitHistory(_0x1e47a4={}){const _0xb0fd7f=_0x35d2d0;Object[_0xb0fd7f(0x219)](_0x1e47a4)['length']==0x0&&(_0x1e47a4={'type':['order',_0xb0fd7f(0x2ef)],'event':'','page':0x1});if(_0x1e47a4[_0xb0fd7f(0x1d8)][_0xb0fd7f(0x1f2)](_0xb0fd7f(0x2ef)))_0x1e47a4[_0xb0fd7f(0x1d8)][_0xb0fd7f(0x30d)](_0x1e47a4['type'][_0xb0fd7f(0x28a)](_0xb0fd7f(0x2ef)),0x1,_0xb0fd7f(0x26e),_0xb0fd7f(0x2cf),'success');if(dbLogs['has'](_0xb0fd7f(0x30f))['value']()){let _0xa099c5=dbLogs[_0xb0fd7f(0x262)]('logs')[_0xb0fd7f(0x18f)](_0x36a2a5=>{const _0x3e9a53=_0xb0fd7f;if(_0x1e47a4[_0x3e9a53(0x1d8)][_0x3e9a53(0x204)]==0x0)return![];else return _0x1e47a4[_0x3e9a53(0x1d8)]['includes'](_0x36a2a5['type']);})[_0xb0fd7f(0x18f)](_0x8da32c=>{const _0x3cdf84=_0xb0fd7f;if(_0x1e47a4['event']=='')return!![];else return _0x8da32c[_0x3cdf84(0x2ef)][_0x3cdf84(0x2d4)]()[_0x3cdf84(0x1f2)](_0x1e47a4['event'][_0x3cdf84(0x2d4)]());})[_0xb0fd7f(0x283)](_0xb0fd7f(0x320)),_0x426bd1=_0xa099c5['value']()['length'];_0xa099c5=_0xa099c5['reverse']()[_0xb0fd7f(0x2c2)]((_0x1e47a4[_0xb0fd7f(0x309)]-0x1)*logPageSize,_0x1e47a4[_0xb0fd7f(0x309)]*logPageSize-0x1)[_0xb0fd7f(0x24e)]()[_0xb0fd7f(0x1b0)](),proxyEmit(_0xb0fd7f(0x1e9),{'logs':_0xa099c5,'total':_0x426bd1});}else proxyEmit(_0xb0fd7f(0x1e9),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1fd509){const _0x357a78=_0x35d2d0;if(dbLogs[_0x357a78(0x1ea)](_0x357a78(0x30f))['value']()){const _0x48e46d=dbLogs[_0x357a78(0x262)](_0x357a78(0x30f))[_0x357a78(0x283)](_0x357a78(0x320))[_0x357a78(0x18f)](_0x2fafee=>{const _0x3fb709=_0x357a78;return _0x2fafee[_0x3fb709(0x1d8)]==_0x3fb709(0x27d);})[_0x357a78(0x1b0)]();dbLogs[_0x357a78(0x262)](_0x357a78(0x30f))[_0x357a78(0x290)]()[_0x357a78(0x241)](),dbLogs['get'](_0x357a78(0x30f))[_0x357a78(0x2ad)](_0x48e46d)[_0x357a78(0x241)](),emitHistory(_0x1fd509);}}async function pauseBot(_0x5f20ad=pauseBotIntervalShort,_0x2aa3cc,_0x188c1c,_0x20abab=![]){const _0xbb6ec5=_0x35d2d0,_0xe830bf=new Date()[_0xbb6ec5(0x189)]();if(!lastErrorShown||_0xe830bf-lastErrorShown>=_0x5f20ad){lastErrorShown=_0xe830bf;if(!lastBotPause)lastBotPause=_0xe830bf,consecutivePauses=0x1;else{if(_0xe830bf-lastBotPause-_0x5f20ad<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x20abab){logHistory(_0xbb6ec5(0x26e),_0x2aa3cc+_0xbb6ec5(0x2b8)),await killBot();return;}else logHistory(_0xbb6ec5(0x26e),_0x2aa3cc+pauseBotMsg),_0x5f20ad=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xe830bf;}_0x188c1c?logger[_0xbb6ec5(0x32d)]('('+consecutivePauses+')\x20'+_0x2aa3cc+_0xbb6ec5(0x2d9),_0x188c1c):logger['debug']('('+consecutivePauses+')\x20'+_0x2aa3cc);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5f20ad),botPaused=![],_0x5f20ad==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x1120d2=_0x35d2d0;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1120d2(0x184)},_0x467f0e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1634d7,_0x3a65f8){const _0x5f0144=_0x35d2d0;if(botPaused)return;const _0x4ab035=config[_0x5f0144(0x202)]||_0x5f0144(0x1fd);if(_0x3a65f8)logger[_0x5f0144(0x32d)](_0x5f0144(0x1d6)+_0x3a65f8);const _0x2dfb94=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x1634d7['toString']()[_0x5f0144(0x1f2)](_0x5f0144(0x2f2)))logHistory(_0x5f0144(0x26e),_0x4ab035+_0x5f0144(0x29b)),_0x2dfb94();else{if(_0x1634d7[_0x5f0144(0x211)]()[_0x5f0144(0x1f2)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5f0144(0x26e),_0x4ab035+_0x5f0144(0x1c7)),_0x2dfb94();else _0x1634d7[_0x5f0144(0x211)]()[_0x5f0144(0x1f2)](_0x5f0144(0x258))?(logHistory(_0x5f0144(0x26e),_0x4ab035+_0x5f0144(0x2ea)),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2dfb94()):await handleError(_0x1634d7,null);}}async function handleError(_0x15d39a,_0x5a92df,_0x5d8392=''){const _0x161b4d=_0x35d2d0;if(botPaused)return;let _0x4471e9;const _0x187202=config[_0x161b4d(0x202)]||'Exchange';if(_0x5a92df)logger[_0x161b4d(0x32d)]('Exception\x20thrown\x20in\x20'+_0x5a92df);if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x2b4)))_0x4471e9=_0x187202+_0x161b4d(0x264),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a[_0x161b4d(0x211)]()['includes'](_0x161b4d(0x20e)))_0x4471e9=_0x187202+_0x161b4d(0x327),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)]('ExchangeNotAvailable')||_0x15d39a['toString']()['includes'](_0x161b4d(0x207)))_0x4471e9=_0x187202+_0x161b4d(0x287),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a['toString']()[_0x161b4d(0x1f2)](_0x161b4d(0x298)))_0x4471e9=_0x187202+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a['toString']()[_0x161b4d(0x1f2)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x4471e9=_0x187202+_0x161b4d(0x2b7),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a['toString']()[_0x161b4d(0x2d4)]()['includes'](_0x161b4d(0x20f))||_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x2d4)]()[_0x161b4d(0x1f2)](_0x161b4d(0x328)))_0x4471e9='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x205)))_0x4471e9=_0x187202+_0x161b4d(0x1ac),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a instanceof ccxt[_0x161b4d(0x244)])_0x4471e9=_0x187202+'\x20network\x20error:\x20'+_0x15d39a['toString'](),logger['debug'](_0x161b4d(0x278),_0x15d39a),await pauseBot(undefined,_0x4471e9,_0x15d39a);else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x2f2)))logHistory(_0x161b4d(0x26e),_0x187202+_0x161b4d(0x24b)),logHistory(_0x161b4d(0x26e),_0x161b4d(0x30e)),await killBot();else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x161b4d(0x26e),_0x187202+_0x161b4d(0x2e1)),logHistory(_0x161b4d(0x26e),_0x161b4d(0x30e)),await killBot();else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x258)))_0x4471e9=_0x187202+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',logger[_0x161b4d(0x32d)](_0x161b4d(0x16d)+config[_0x161b4d(0x26b)][_0x161b4d(0x2c2)](-0x5)+'\x20'+config[_0x161b4d(0x2e2)][_0x161b4d(0x2c2)](-0x5)+'\x20'+config['apiPassword'][_0x161b4d(0x2c2)](-0x5)),logger[_0x161b4d(0x32d)](_0x161b4d(0x2bd)+exchange['apiKey']['slice'](-0x5)+'\x20'+exchange['secret']['slice'](-0x5)+'\x20'+exchange[_0x161b4d(0x210)]['slice'](-0x5)),await pauseBot(undefined,_0x4471e9,_0x15d39a,!![]);else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x229)))logHistory(_0x161b4d(0x26e),_0x187202+_0x161b4d(0x2ff)),logHistory(_0x161b4d(0x26e),_0x161b4d(0x30e)),await killBot();else{if(_0x15d39a[_0x161b4d(0x211)]()[_0x161b4d(0x1f2)](_0x161b4d(0x299)))logHistory(_0x161b4d(0x26e),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x5d8392);else{if(_0x15d39a instanceof ccxt[_0x161b4d(0x175)]){_0x4471e9=_0x187202+_0x161b4d(0x2f9)+_0x15d39a[_0x161b4d(0x211)](),logHistory('error',_0x4471e9),logger['debug']('Exchange\x20error\x20details:',_0x15d39a);if(_0x5d8392)logger[_0x161b4d(0x32d)]('Symbol(s):\x20'+_0x5d8392);await pauseBot(undefined,_0x4471e9,_0x15d39a);}else{_0x4471e9=_0x161b4d(0x1f3)+_0x15d39a['toString'](),logHistory(_0x161b4d(0x26e),_0x4471e9),logger[_0x161b4d(0x32d)](_0x4471e9+_0x161b4d(0x2d9),_0x15d39a);if(_0x5d8392)logger[_0x161b4d(0x32d)](_0x161b4d(0x280)+_0x5d8392);await pauseBot(undefined,_0x4471e9);}}}}}}}}}}}}}}}async function withRetry(_0x380eca,_0x437975){const _0x2cdfe5=_0x35d2d0;let _0x379839=![],_0x346134=0x0,_0x42d175,_0x3f6665;while(_0x346134<maxRetries){try{_0x42d175=await _0x437975();break;}catch(_0x2ff62f){_0x3f6665=_0x2ff62f,!_0x379839?(_0x379839=!![],logger[_0x2cdfe5(0x32d)](_0x2cdfe5(0x1b9)+_0x380eca+':',_0x2ff62f['toString']())):await sleep(retryInterval);}_0x346134++;}if(_0x346134==0x0)return _0x42d175;if(_0x346134>=maxRetries)throw _0x3f6665;else return logger[_0x2cdfe5(0x32d)](_0x2cdfe5(0x1b3)+_0x346134+_0x2cdfe5(0x25c)),_0x42d175;}function formatResult(_0x5cc2bf,_0x36343d){const _0x45dd86=_0x35d2d0;return parseFloat(_0x5cc2bf[_0x45dd86(0x304)](_0x36343d));}function formatResultTruncate(_0x4d3a03,_0x327e79){const _0x4eea49=_0x35d2d0;let _0x14c453=formatResultString(_0x4d3a03,0xa),_0x70df8f=_0x14c453[_0x4eea49(0x28a)]('.');return _0x70df8f!=-0x1&&(_0x14c453=_0x14c453[_0x4eea49(0x2c2)](0x0,_0x70df8f+_0x327e79+0x1)),Number(_0x14c453);}function formatResultString(_0x126df3,_0x122e3d){const _0x588f78=_0x35d2d0;let _0x3d7f48;if(!(''+_0x126df3)[_0x588f78(0x1f2)]('e'))_0x3d7f48=+(Math['round'](_0x126df3+'e+'+_0x122e3d)+'e-'+_0x122e3d);else{let _0x1b90d1=(''+_0x126df3)[_0x588f78(0x200)]('e'),_0x4dcaf6='';+_0x1b90d1[0x1]+_0x122e3d>0x0&&(_0x4dcaf6='+'),_0x3d7f48=+(Math[_0x588f78(0x295)](+_0x1b90d1[0x0]+'e'+_0x4dcaf6+(+_0x1b90d1[0x1]+_0x122e3d))+'e-'+_0x122e3d);}return Number(_0x3d7f48)[_0x588f78(0x304)](_0x122e3d);}function getServerTime(){const _0x45e313=_0x35d2d0,_0x583943=new Date();return _0x583943[_0x45e313(0x2bc)]()+'/'+(_0x583943[_0x45e313(0x2ca)]()+0x1)[_0x45e313(0x211)]()[_0x45e313(0x1d2)](0x2,'0')+'/'+_0x583943['getDate']()[_0x45e313(0x211)]()[_0x45e313(0x1d2)](0x2,'0')+'\x20'+_0x583943[_0x45e313(0x17d)]()['toString']()[_0x45e313(0x1d2)](0x2,'0')+':'+_0x583943['getMinutes']()[_0x45e313(0x211)]()[_0x45e313(0x1d2)](0x2,'0')+':'+_0x583943[_0x45e313(0x1d0)]()[_0x45e313(0x211)]()[_0x45e313(0x1d2)](0x2,'0');}function getTimeStamp(){const _0x26a4ab=_0x35d2d0,_0xd8f05d=shiftedTime();return _0xd8f05d[_0x26a4ab(0x2bc)]()+'/'+(_0xd8f05d[_0x26a4ab(0x2ca)]()+0x1)[_0x26a4ab(0x211)]()[_0x26a4ab(0x1d2)](0x2,'0')+'/'+_0xd8f05d[_0x26a4ab(0x2ae)]()['toString']()[_0x26a4ab(0x1d2)](0x2,'0')+'\x20'+_0xd8f05d[_0x26a4ab(0x17d)]()[_0x26a4ab(0x211)]()['padStart'](0x2,'0')+':'+_0xd8f05d[_0x26a4ab(0x1f1)]()[_0x26a4ab(0x211)]()[_0x26a4ab(0x1d2)](0x2,'0')+':'+_0xd8f05d[_0x26a4ab(0x1d0)]()[_0x26a4ab(0x211)]()['padStart'](0x2,'0');}function getDate(){const _0x413d16=_0x35d2d0,_0x1de294=shiftedTime();return _0x1de294[_0x413d16(0x2bc)]()+'/'+(_0x1de294[_0x413d16(0x2ca)]()+0x1)[_0x413d16(0x211)]()['padStart'](0x2,'0')+'/'+_0x1de294['getDate']()[_0x413d16(0x211)]()[_0x413d16(0x1d2)](0x2,'0');}function getHour(){const _0x5c9bbc=_0x35d2d0,_0x221b35=shiftedTime();return _0x221b35['getHours']()[_0x5c9bbc(0x211)]()['padStart'](0x2,'0');}function sleep(_0x41cffd){return new Promise(_0x3d645b=>setTimeout(_0x3d645b,_0x41cffd));}function shiftedTime(){const _0x46faff=_0x35d2d0,_0x32def2=new Date();let _0x4f0600=_0x32def2;if(config&&config['timeshift']!==0x0)_0x4f0600=fns[_0x46faff(0x301)](_0x32def2,{'hours':config[_0x46faff(0x322)]});return _0x4f0600;}function timer(_0x53ba4b){const _0x2eca12=_0x35d2d0,_0xbec9a5=new Date();!lasttime?console[_0x2eca12(0x308)](getTimeStamp()+_0x2eca12(0x1e4),_0x53ba4b,_0xbec9a5):console[_0x2eca12(0x308)](getTimeStamp()+_0x2eca12(0x1e4),_0x53ba4b,(_0xbec9a5-lasttime)/0x3e8),lasttime=_0xbec9a5;}