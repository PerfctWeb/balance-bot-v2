const _0x1d511c=_0x4b28;(function(_0x1ac686,_0x55a9d6){const _0x20801f=_0x4b28,_0x14f876=_0x1ac686();while(!![]){try{const _0x675c=parseInt(_0x20801f(0x1de))/0x1+parseInt(_0x20801f(0x2c2))/0x2+parseInt(_0x20801f(0x28a))/0x3+-parseInt(_0x20801f(0x23b))/0x4*(parseInt(_0x20801f(0x189))/0x5)+-parseInt(_0x20801f(0x191))/0x6*(parseInt(_0x20801f(0x2c8))/0x7)+parseInt(_0x20801f(0x1a1))/0x8*(parseInt(_0x20801f(0x2cc))/0x9)+-parseInt(_0x20801f(0x2bb))/0xa;if(_0x675c===_0x55a9d6)break;else _0x14f876['push'](_0x14f876['shift']());}catch(_0x4ada38){_0x14f876['push'](_0x14f876['shift']());}}}(_0x3e13,0xc9b3f));const _0x2a49df=function(){let _0x13cc67=!![];return function(_0x2f3693,_0x17e9c5){const _0x604a6a=_0x13cc67?function(){const _0x1341a6=_0x4b28;if(_0x17e9c5){const _0x26f2c5=_0x17e9c5[_0x1341a6(0x1c1)](_0x2f3693,arguments);return _0x17e9c5=null,_0x26f2c5;}}:function(){};return _0x13cc67=![],_0x604a6a;};}(),_0x24f893=_0x2a49df(this,function(){const _0x1f4ac4=_0x4b28;return _0x24f893[_0x1f4ac4(0x1b4)]()[_0x1f4ac4(0x31d)]('(((.+)+)+)+$')[_0x1f4ac4(0x1b4)]()[_0x1f4ac4(0x1b3)](_0x24f893)['search']('(((.+)+)+)+$');});_0x24f893();'use strict';const ccxt=require('ccxt'),low=require(_0x1d511c(0x2b7)),FileSync=require(_0x1d511c(0x279)),fs=require('fs'),fns=require(_0x1d511c(0x2f7)),Crypt=require(_0x1d511c(0x230))[_0x1d511c(0x268)],util=require(_0x1d511c(0x16d)),argv=require(_0x1d511c(0x266))(process[_0x1d511c(0x2aa)][_0x1d511c(0x308)](0x2))[_0x1d511c(0x2aa)],path=require(_0x1d511c(0x317)),axios=require(_0x1d511c(0x2de));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x1d511c(0x2fe),_0x1d511c(0x239),'TUSD','USDT',_0x1d511c(0x30d),_0x1d511c(0x1cd)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1d511c(0x1a9)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1d511c(0x251)+pauseBotInterval/0xea60+_0x1d511c(0x178),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1d511c(0x2e9))[_0x1d511c(0x1cf)],botID=process[_0x1d511c(0x2aa)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x1d511c(0x1f5)](_0x1d511c(0x248)+botID+_0x1d511c(0x2ee)),killBot());const userID=process[_0x1d511c(0x2aa)][0x3]||'',configpath=userID?_0x1d511c(0x2c4)+userID+'/':'./config/',logspath=userID?_0x1d511c(0x293)+userID+'/':_0x1d511c(0x293),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0x1d511c(0x1c3)](configpath)&&fs[_0x1d511c(0x2ff)](configpath);!fs[_0x1d511c(0x1c3)](logspath)&&fs[_0x1d511c(0x2ff)](logspath);const configfile=configpath+'bot-'+botID+_0x1d511c(0x24e),logfile=configpath+_0x1d511c(0x21a)+botID+_0x1d511c(0x269),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x1d511c(0x1c6),securefile=configpath+_0x1d511c(0x2cf),configbackuppath=configpath+_0x1d511c(0x1d4),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1d511c(0x1fd)]({'logs':[],'version':serverversion})[_0x1d511c(0x2b0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x1d511c(0x2b0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1d511c(0x1fd)]({'bot':[],'version':serverversion})[_0x1d511c(0x2b0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x1d511c(0x2b0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1d511c(0x202),'rsaStandard':_0x1d511c(0x2e2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1c3af9=>{const _0x110755=_0x1d511c;console[_0x110755(0x1f5)](_0x1c3af9);},'simple':_0x4a5f93=>{const _0x1adfde=_0x1d511c;console[_0x1adfde(0x1f5)](_0x4a5f93),loggerfile[_0x1adfde(0x2b0)](util[_0x1adfde(0x23c)](_0x4a5f93)+'\x0a');},'full':async(_0x556935,_0x2f6a45='')=>{const _0x5005f1=_0x1d511c;let _0x284ff3;if(config[_0x5005f1(0x273)])_0x284ff3=getTimeStamp()+':\x20'+config[_0x5005f1(0x19d)]+_0x5005f1(0x2e3)+_0x556935;else _0x284ff3=getTimeStamp()+':\x20Bot\x20'+botID+_0x5005f1(0x2e3)+_0x556935;console['log'](_0x284ff3),loggerfile[_0x5005f1(0x2b0)](util[_0x5005f1(0x23c)](_0x284ff3)+'\x0a'),_0x2f6a45&&(console['log'](_0x2f6a45),loggerfile[_0x5005f1(0x2b0)](util[_0x5005f1(0x23c)](_0x2f6a45)+'\x0a'));},'debug':async(_0x1a3910,_0x2bc761='')=>{const _0x10d272=_0x1d511c;let _0x198e9f;if(config[_0x10d272(0x273)])_0x198e9f=getTimeStamp()+':\x20'+config[_0x10d272(0x19d)]+_0x10d272(0x208)+_0x1a3910;else _0x198e9f=getTimeStamp()+_0x10d272(0x2ad)+botID+_0x10d272(0x208)+_0x1a3910;if(debugging)console[_0x10d272(0x1f5)](_0x198e9f);loggerfile[_0x10d272(0x2b0)](util[_0x10d272(0x23c)](_0x198e9f)+'\x0a');if(_0x2bc761){if(debugging)console[_0x10d272(0x1f5)](_0x2bc761);loggerfile['write'](util['format'](_0x2bc761)+'\x0a');}}};process['on'](_0x1d511c(0x28f),function(_0x17bfe0){const _0x1776cc=_0x1d511c;handleError(_0x17bfe0,_0x1776cc(0x28f));});settings['timeshift']!=config[_0x1d511c(0x277)]&&updateTimeshift(settings['timeshift']);settings[_0x1d511c(0x235)]!=config[_0x1d511c(0x235)]&&updateOnepagemode(settings[_0x1d511c(0x235)]);(settings[_0x1d511c(0x17f)]&&!config[_0x1d511c(0x17f)]||!settings[_0x1d511c(0x17f)]&&config[_0x1d511c(0x17f)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x1d511c(0x2be)]({'started':_0x1d511c(0x1db)},_0x10d4f5=>{}),initializeProcessListeners();function proxyEmit(_0x476af6,_0x19fa91=null){const _0x59b3c9=_0x1d511c;process[_0x59b3c9(0x2be)]({'function':_0x476af6,'args':_0x19fa91},_0x2175da=>{});}function initializeProcessListeners(){const _0x26895d=_0x1d511c;process['on'](_0x26895d(0x258),_0x52a74e=>{const _0xf206e=_0x26895d;switch(Object[_0xf206e(0x227)](_0x52a74e)[0x0]){case _0xf206e(0x277):_0x52a74e[_0xf206e(0x277)]!=undefined&&(settings[_0xf206e(0x277)]=_0x52a74e[_0xf206e(0x277)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x52a74e['onepagemode']!=undefined&&(settings['onepagemode']=_0x52a74e[_0xf206e(0x235)],updateOnepagemode(settings['onepagemode']));break;case'marketcapApi':_0x52a74e[_0xf206e(0x17f)]!=undefined&&(settings[_0xf206e(0x17f)]=_0x52a74e['marketcapApi'],updateMarketcapApi(settings[_0xf206e(0x17f)]));break;case _0xf206e(0x177):_0x52a74e[_0xf206e(0x177)]!=undefined&&(bots=JSON[_0xf206e(0x2dc)](_0x52a74e[_0xf206e(0x177)]),proxyEmit(_0xf206e(0x177),bots));break;case _0xf206e(0x18d):switch(_0x52a74e[_0xf206e(0x18d)]){case _0xf206e(0x23a):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0xf206e(0x261):emitHistory(_0x52a74e[_0xf206e(0x16e)]);break;case _0xf206e(0x257):deleteHistoryAlerts(_0x52a74e['args']);break;case'getPortfolio':getPortfolio(_0x52a74e[_0xf206e(0x16e)]);break;case _0xf206e(0x1df):storeConfiguration(_0x52a74e['args']);break;case _0xf206e(0x306):storeHeadless(_0x52a74e[_0xf206e(0x16e)]);break;case _0xf206e(0x22c):storeFiat(_0x52a74e['args']);break;case _0xf206e(0x1f9):resetHistory();break;case _0xf206e(0x201):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x52a74e[_0xf206e(0x16e)]);break;case _0xf206e(0x209):cancelLoading();break;case'showConfig':showConfig();break;case _0xf206e(0x233):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x373308=![]){const _0x401736=_0x1d511c;logger[_0x401736(0x283)](_0x401736(0x1e8)+(_0x373308?_0x401736(0x29a):'exchange\x20not\x20reloaded')+_0x401736(0x197)+config[_0x401736(0x1ee)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x373308)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x401736(0x2d3)]!='***'){loadingProgress=0x0;_0x373308&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![]);const _0x34f686=await getCoins();[currentCoins,currentCoinsAll]=_0x34f686,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x401736(0x283)](_0x401736(0x1a7)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x401736(0x212)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}function _0x4b28(_0x342d6c,_0x37b940){const _0x27aaa2=_0x3e13();return _0x4b28=function(_0x24f893,_0x2a49df){_0x24f893=_0x24f893-0x16d;let _0x3e1389=_0x27aaa2[_0x24f893];return _0x3e1389;},_0x4b28(_0x342d6c,_0x37b940);}async function resumeBot(_0x1432f3=![]){const _0x36a509=_0x1d511c;logger[_0x36a509(0x283)](_0x36a509(0x222)+(_0x1432f3?_0x36a509(0x29b):_0x36a509(0x2ea))+_0x36a509(0x18e)+config[_0x36a509(0x1ee)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1432f3){getBalances();return;}coinsLoaded=![];if(config[_0x36a509(0x2d3)]!=''&&config['apiKey']!=_0x36a509(0x211)){loadingProgress=0x1;const _0x844023=await getCoins();[currentCoins,currentCoinsAll]=_0x844023,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x36a509(0x283)](_0x36a509(0x1a7)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x36a509(0x212)]==0x0&&allOpenOrders[_0x36a509(0x212)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x2028d7){const _0xd23b3e=_0x1d511c;let _0x192714=![];if(_0x2028d7)_0x192714=!![];let _0x4c0d7b;_0x192714?_0x4c0d7b=_0x2028d7[_0xd23b3e(0x1f4)](_0x1d4894=>_0x1d4894[_0xd23b3e(0x1d2)]):_0x4c0d7b=currentCoinsAll['map'](_0x251759=>_0x251759[_0xd23b3e(0x1d2)]);if(!config['marketcapApi']||!_0x192714&&!config['marketcapEnabled']||_0x4c0d7b['length']==0x0)return;let _0x5e0d1c=null;try{_0x5e0d1c=await axios[_0xd23b3e(0x1f6)](_0xd23b3e(0x1ef),{'headers':{'X-CMC_PRO_API_KEY':settings[_0xd23b3e(0x17f)]},'params':{'symbol':_0x4c0d7b[_0xd23b3e(0x1b4)]()}});}catch(_0x40aea6){_0x5e0d1c=null,_0x40aea6[_0xd23b3e(0x1b4)]()[_0xd23b3e(0x28e)]('status\x20code\x20401')?(config[_0xd23b3e(0x17f)]=![],updateConfig(),proxyEmit(_0xd23b3e(0x1af),emittedConfiguration()),logHistory(_0xd23b3e(0x19a),_0xd23b3e(0x19e))):(logHistory(_0xd23b3e(0x19a),_0xd23b3e(0x2a0)+schedulerInterval/(0x3c*0x3e8)+_0xd23b3e(0x178)),logger[_0xd23b3e(0x283)](_0xd23b3e(0x1d5),_0x40aea6[_0xd23b3e(0x1b4)]()+_0xd23b3e(0x2f4)+_0x40aea6['code']));}if(_0x5e0d1c){let _0x456820=0x0;const _0x340373=_0x5e0d1c[_0xd23b3e(0x2f5)];_0x4c0d7b[_0xd23b3e(0x2d6)](_0x474565=>{const _0x52d54d=_0xd23b3e;if(_0x340373[_0x52d54d(0x2f5)][_0x474565][0x0])_0x456820+=_0x340373['data'][_0x474565][0x0]['quote'][_0x52d54d(0x2fe)][_0x52d54d(0x1a2)];}),_0x4c0d7b[_0xd23b3e(0x2d6)](_0x1a3a3d=>{const _0x4b8113=_0xd23b3e,_0x2984b0=_0x340373[_0x4b8113(0x2f5)][_0x1a3a3d][0x0]?_0x340373['data'][_0x1a3a3d][0x0]['quote'][_0x4b8113(0x2fe)][_0x4b8113(0x1a2)]:0x0;if(_0x192714){const _0x28c924=_0x2028d7[_0x4b8113(0x291)](_0x5403c8=>_0x5403c8[_0x4b8113(0x1d2)]==_0x1a3a3d);_0x28c924&&(_0x28c924['marketcap']=_0x2984b0);}else{const _0x20315a=currentCoins[_0x4b8113(0x291)](_0x2e58ec=>_0x2e58ec['coin']==_0x1a3a3d);_0x20315a&&(_0x20315a[_0x4b8113(0x1bc)]=_0x2984b0);const _0x1fc826=currentCoinsAll['find'](_0x2163b3=>_0x2163b3[_0x4b8113(0x1d2)]==_0x1a3a3d);_0x1fc826&&(_0x1fc826['marketcap']=_0x2984b0);}}),!_0x192714&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x15316e=_0x1d511c,_0x289ed3=0x2;let _0x40d054=0x0,_0x2fd8b5=0x0,_0x5e410b=0x0,_0x2a5578=0x0,_0x5cc151=0x0;config['portfolio']['forEach'](_0x274fdb=>{const _0x2c88ff=_0x4b28;if(!_0x274fdb[_0x2c88ff(0x226)]){_0x5e410b++,_0x40d054+=_0x274fdb['slider'];if(_0x274fdb[_0x2c88ff(0x26e)]===-0x1){_0x40d054++;const _0x1123e2=currentCoinsAll[_0x2c88ff(0x291)](_0x5b6ca5=>_0x5b6ca5[_0x2c88ff(0x1d2)]==_0x274fdb['coin']);_0x1123e2&&(_0x2a5578+=_0x1123e2['marketcap'],_0x5cc151+=Math[_0x2c88ff(0x1f2)](_0x1123e2[_0x2c88ff(0x1bc)]));}if(_0x274fdb[_0x2c88ff(0x26e)]!==-0x1)_0x2fd8b5++;}});let _0xb1910a;const _0xe3ab98=0x64-_0x40d054,_0x107562=_0x5e410b-_0x2fd8b5;_0xb1910a=_0x107562===0x0?_0x40d054:Math[_0x15316e(0x179)](0x64,_0x40d054),config[_0x15316e(0x1ec)]['forEach'](_0x3a9996=>{const _0x478930=_0x15316e,_0x53bafa=currentCoinsAll['find'](_0x2be93f=>_0x2be93f[_0x478930(0x1d2)]==_0x3a9996[_0x478930(0x1d2)]);_0x53bafa&&(_0x3a9996[_0x478930(0x1bc)]=_0x53bafa[_0x478930(0x1bc)]);if(!_0x3a9996[_0x478930(0x226)]){if(_0xb1910a<=0x64){if(_0x3a9996[_0x478930(0x26e)]===-0x1){if(_0x2a5578!==0x0&&config[_0x478930(0x199)]){if(_0x53bafa){if(config['marketcapEnabled']==_0x478930(0x1bc))_0x3a9996['distribution']=(_0xe3ab98/(_0x2a5578/_0x53bafa[_0x478930(0x1bc)]))['toFixed'](_0x289ed3);else config[_0x478930(0x199)]==_0x478930(0x2f9)&&(_0x3a9996[_0x478930(0x172)]=(_0xe3ab98/(_0x5cc151/Math[_0x478930(0x1f2)](_0x53bafa['marketcap'])))[_0x478930(0x17e)](_0x289ed3));}}}}}}),updateConfig();}function updateConfig(){const _0x15cf07=_0x1d511c;let _0x52b852=dbConfig[_0x15cf07(0x1f6)](_0x15cf07(0x1fa))['find']({'botID':botID})[_0x15cf07(0x1ad)]();_0x52b852&&dbConfig[_0x15cf07(0x1f6)](_0x15cf07(0x1fa))[_0x15cf07(0x291)]({'botID':botID})[_0x15cf07(0x252)](config)['write']();}function logMemory(){const _0x4eba21=_0x1d511c,_0x55ad14=process[_0x4eba21(0x267)]()['heapUsed']/0x400/0x400;logger['debug'](_0x4eba21(0x28b)+process[_0x4eba21(0x223)]+_0x4eba21(0x2d7)+_0x55ad14+_0x4eba21(0x311));}async function startScheduler(){const _0xb4fc3=shiftedTime()['getHours']();getMarketCap(),logMemory(),(_0xb4fc3==0x2||_0xb4fc3==0xe)&&await loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x4cafa9=![]){const _0x4a26aa=_0x1d511c;logger[_0x4a26aa(0x283)](_0x4a26aa(0x224));if(!_0x4cafa9)while(lockOrders!=ORDERS[_0x4a26aa(0x1a9)]||coolingDown){await sleep(0x3e8);}process[_0x4a26aa(0x2be)]({'stop':_0x4a26aa(0x320)},_0x1bca54=>{});}async function initExchange(_0x1be03d=config[_0x1d511c(0x1ee)],_0x13eaea=config[_0x1d511c(0x2d3)],_0x54b08e=config['apiSecret'],_0x1bd2d3=config[_0x1d511c(0x24d)]){const _0x171783=_0x1d511c;if(exchange){logger['debug'](_0x171783(0x20a));return;}logger[_0x171783(0x283)](_0x171783(0x27b));!supportedExchanges()[_0x171783(0x28e)](_0x1be03d)&&(logHistory(_0x171783(0x19a),_0x171783(0x270)+_0x1be03d+_0x171783(0x259)),killBot());const _0x13ee19=ccxt['pro'][_0x1be03d['toLowerCase']()];exchange=new _0x13ee19({'apiKey':_0x13eaea,'secret':_0x54b08e,'options':{'defaultType':_0x171783(0x1aa)}});if(_0x1bd2d3)exchange[_0x171783(0x1fc)]=_0x1bd2d3;}function updateExchange(_0x35dbc4,_0x126936,_0x339ae8=null){const _0x1d15d3=_0x1d511c;exchange[_0x1d15d3(0x2d3)]=_0x35dbc4,exchange[_0x1d15d3(0x1a3)]=_0x126936,exchange[_0x1d15d3(0x24d)]=_0x339ae8,logger[_0x1d15d3(0x283)](_0x1d15d3(0x1dc));}function setStableCoins(){const _0x179072=_0x1d511c;let _0x2fefc1=config[_0x179072(0x2a9)]==_0x179072(0x1b6)?'ETH':config[_0x179072(0x2a9)]==_0x179072(0x2fb)?_0x179072(0x2fb):_0x179072(0x2f1),_0x11bd82=!allSymbols[_0x179072(0x28e)](_0x2fefc1+'/USD')?_0x179072(0x2ec):_0x179072(0x2fe),_0x55689a=!allSymbols['includes'](_0x2fefc1+_0x179072(0x2f0))?_0x11bd82:'EUR';stablecoins={'eur':{'coin':''+_0x2fefc1+_0x55689a,'symbol':_0x2fefc1+'/'+_0x55689a},'usd':{'coin':''+_0x2fefc1+_0x11bd82,'symbol':_0x2fefc1+'/'+_0x11bd82}};}async function initwsCcxt(){const _0x314b89=_0x1d511c;initCycle++;const _0x5aedc8=initCycle;let _0x45968c=[];config['portfolio'][_0x314b89(0x2d6)](_0x4baffb=>{const _0x29db0=_0x314b89;if(!_0x4baffb[_0x29db0(0x226)]&&_0x4baffb[_0x29db0(0x1d2)]!=config['basecoin'])_0x45968c['push'](_0x4baffb[_0x29db0(0x1cb)]);});if(!_0x45968c[_0x314b89(0x28e)](stablecoins[_0x314b89(0x2c7)][_0x314b89(0x1cb)]))_0x45968c['push'](stablecoins['eur'][_0x314b89(0x1cb)]);if(!_0x45968c[_0x314b89(0x28e)](stablecoins[_0x314b89(0x250)][_0x314b89(0x1cb)]))_0x45968c[_0x314b89(0x1b5)](stablecoins[_0x314b89(0x250)]['symbol']);if(config[_0x314b89(0x1ee)]['startsWith'](_0x314b89(0x307))&&config[_0x314b89(0x2a9)]!=_0x314b89(0x2fb)){if(!_0x45968c[_0x314b89(0x28e)](_0x314b89(0x26a)+config['basecoin']))_0x45968c[_0x314b89(0x1b5)](_0x314b89(0x26a)+config[_0x314b89(0x2a9)]);}loadCoins(_0x45968c),_0x45968c=validateSymbols(_0x45968c);const _0x28e5bf=async _0x74ce84=>{const _0x5c25f7=_0x314b89;let _0x33b2ae;try{const _0x1ed920=await getTickers(_0x74ce84);Object[_0x5c25f7(0x264)](_0x1ed920)[_0x5c25f7(0x2d6)](_0x4edb47=>{const _0x5ca394=_0x5c25f7;_0x33b2ae=_0x4edb47[0x1][_0x5ca394(0x1cb)],gTicker[noslash(_0x33b2ae)]=_0x4edb47[0x1][_0x5ca394(0x16f)],gChange[_0x33b2ae]=_0x4edb47[0x1][_0x5ca394(0x27d)];});}catch(_0x2ee270){await handleError(_0x2ee270,_0x5c25f7(0x196),_0x33b2ae);}},_0x312704=async _0x29276a=>{const _0x1c343d=_0x314b89;while(initCycle==_0x5aedc8){if(!botPaused)try{const _0x4b9ab6=await exchange[_0x1c343d(0x192)](_0x29276a);gTicker[noslash(_0x4b9ab6[0x0][_0x1c343d(0x1cb)])]=_0x4b9ab6[0x0][_0x1c343d(0x309)];}catch(_0x3aa4cc){if(!exchangeStopped)await handleError(_0x3aa4cc,'watchTrades()',_0x29276a);}else await sleep(0x64);}},_0x10d6ad=async _0x551385=>{const _0x4a4d50=_0x314b89;while(initCycle==_0x5aedc8){if(!botPaused)try{const _0x4c0f9d=await exchange[_0x4a4d50(0x1bd)](_0x551385),_0x1650fe=_0x4c0f9d['pop']();gTicker[noslash(_0x1650fe[_0x4a4d50(0x1cb)])]=_0x1650fe[_0x4a4d50(0x309)];}catch(_0x2f09cd){if(!exchangeStopped)await handleError(_0x2f09cd,'watchTradesForSymbols()',_0x551385[_0x4a4d50(0x1b4)]());}else await sleep(0x64);}},_0x1483a9=async _0x527e5c=>{const _0x11367e=_0x314b89;while(initCycle==_0x5aedc8){if(!botPaused){let _0x409f43;try{await sleep(0x3c*0x3e8);const _0x5a5b94=await getTickers(_0x527e5c);Object[_0x11367e(0x264)](_0x5a5b94)[_0x11367e(0x2d6)](_0x3a4678=>{const _0x4e2844=_0x11367e;_0x409f43=_0x3a4678[0x1][_0x4e2844(0x1cb)],gChange[_0x409f43]=_0x3a4678[0x1][_0x4e2844(0x27d)];});}catch(_0x3f9cd9){if(!exchangeStopped)await handleError(_0x3f9cd9,'fetchTickers()',_0x409f43);}}else await sleep(0x64);}},_0x2a1da2=async _0x842f52=>{const _0x3d218e=_0x314b89;while(initCycle==_0x5aedc8){if(!botPaused)try{const _0x376473=await exchange[_0x3d218e(0x305)](_0x842f52);initCycle==_0x5aedc8&&_0x376473['forEach'](_0x358166=>{updateNumberCoinsCcxt(_0x358166);});}catch(_0x1f08df){if(!exchangeStopped)await handleError(_0x1f08df,_0x3d218e(0x278));}else await sleep(0x64);}};_0x28e5bf(_0x45968c),_0x1483a9(_0x45968c),exchange['has'][_0x314b89(0x1bd)]&&!(config[_0x314b89(0x1ee)]=='Bybit'&&_0x45968c['length']>0xa)?_0x10d6ad(_0x45968c):_0x45968c[_0x314b89(0x2d6)](_0x60bdb6=>{_0x312704(_0x60bdb6);}),_0x45968c[_0x314b89(0x2d6)](_0x25433f=>{_0x2a1da2(_0x25433f);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x424a72){const _0x556398=_0x1d511c;let _0x62bfc5={};try{if(config['exchange']!=_0x556398(0x29c))_0x62bfc5=await exchange[_0x556398(0x176)](_0x424a72);else for(const _0x48f1a7 of _0x424a72){const _0x245e25=await exchange[_0x556398(0x2c6)](_0x48f1a7);_0x62bfc5[_0x48f1a7]=_0x245e25;}return _0x62bfc5;}catch(_0x4d1a50){throw _0x4d1a50;}}function setBlockTransactionDetection(_0x420d41){const _0x2c5a18=_0x1d511c;blockTransactionDetection=_0x420d41,logger[_0x2c5a18(0x283)](_0x2c5a18(0x289)+blockTransactionDetection);}async function detectLiquidityChange(_0x1bf874=0x0){const _0x33d077=_0x1d511c;transactionDetectionOngoing=!![];try{const _0x1c6772=await getCoins(_0x1bf874),[_0x5a3a5b,_0x304161]=_0x1c6772;let _0x4f5e20=[];currentCoins[_0x33d077(0x2d6)](_0x362d40=>{const _0x22c4a2=_0x33d077,_0x496f6c=_0x5a3a5b[_0x22c4a2(0x291)](_0x341637=>_0x341637[_0x22c4a2(0x1d2)]==_0x362d40['coin']);if(_0x496f6c){if(_0x362d40[_0x22c4a2(0x242)]!=_0x496f6c[_0x22c4a2(0x242)]){let _0x29a476;if(_0x362d40[_0x22c4a2(0x1d2)]!=config[_0x22c4a2(0x2a9)]){const _0x792690=gTicker[noslash(_0x362d40[_0x22c4a2(0x1cb)])];_0x29a476=_0x362d40[_0x22c4a2(0x247)]?0x1/_0x792690:_0x792690;}else _0x29a476=0x1;_0x4f5e20['push']({'coin':_0x362d40[_0x22c4a2(0x1d2)],'symbol':_0x362d40['symbol'],'price':_0x29a476,'number':Number(formatResult(_0x496f6c[_0x22c4a2(0x242)]-_0x362d40[_0x22c4a2(0x242)],0x8)),'basecoinvalue':_0x29a476*(_0x496f6c[_0x22c4a2(0x242)]-_0x362d40[_0x22c4a2(0x242)])});}}});if(_0x4f5e20['length']>0x0&&!blockTransactionDetection)for(const _0x31445a of _0x4f5e20){if(config[_0x33d077(0x319)]){logger[_0x33d077(0x283)](_0x33d077(0x25d)+_0x31445a[_0x33d077(0x2cb)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x33d077(0x198)]);if(lastFees[_0x33d077(0x198)]==0x0||Math[_0x33d077(0x300)](_0x31445a[_0x33d077(0x2cb)])>lastFees[_0x33d077(0x198)]*1.2){if(config[_0x33d077(0x319)]=='update-liquidity'){delete _0x31445a['symbol'],delete _0x31445a[_0x33d077(0x2cb)];let _0x1f9ff3=[],_0x58c8e1=[...config[_0x33d077(0x1e0)]]||[],_0xa3e632=config['liquidity'];_0x58c8e1[_0x33d077(0x2d4)]((_0x53dea,_0x381d2e)=>_0x53dea[_0x33d077(0x182)]>_0x381d2e['date']?-0x1:_0x381d2e['date']>_0x53dea[_0x33d077(0x182)]?0x1:0x0);const _0x25247f=getDate();if(_0x58c8e1[0x0]){const _0x58a62c=fns[_0x33d077(0x2dc)](_0x58c8e1[0x0][_0x33d077(0x182)],_0x33d077(0x21b),new Date()),_0x322884=fns[_0x33d077(0x2dc)](_0x25247f,_0x33d077(0x21b),new Date());if(fns[_0x33d077(0x225)](_0x58a62c,_0x322884)){_0x1f9ff3=_0x58c8e1[0x0][_0x33d077(0x275)];const _0x3a35d7=_0x1f9ff3[_0x33d077(0x291)](_0x253936=>_0x253936['coin']==_0x31445a[_0x33d077(0x1d2)]);_0x3a35d7?(_0x3a35d7['number']+=_0x31445a[_0x33d077(0x242)],_0x3a35d7[_0x33d077(0x242)]==0x0&&(_0x1f9ff3=_0x1f9ff3['filter'](_0x4b9958=>{const _0x599bdc=_0x33d077;return _0x4b9958[_0x599bdc(0x1d2)]!=_0x31445a[_0x599bdc(0x1d2)];}))):_0x1f9ff3[_0x33d077(0x1b5)](_0x31445a);const _0x1fb002=_0xa3e632[_0x33d077(0x291)](_0x2154c0=>_0x2154c0[_0x33d077(0x182)]==_0x25247f);_0x1fb002[_0x33d077(0x275)]=_0x1f9ff3;}else _0xa3e632['push']({'date':_0x25247f,'changes':[_0x31445a]});}const _0x3fe743=_0xa3e632[_0x33d077(0x291)](_0x2fe709=>_0x2fe709[_0x33d077(0x182)]==_0x25247f);if(_0x3fe743){let _0x5284c2=!![];_0x3fe743[_0x33d077(0x275)][_0x33d077(0x2d6)](_0x56b505=>{const _0x5ec9e3=_0x33d077;if(_0x56b505[_0x5ec9e3(0x242)]!=0x0)_0x5284c2=![];}),_0x5284c2&&(_0xa3e632=_0xa3e632[_0x33d077(0x1c9)](_0x3c6f0f=>{const _0x5b56e0=_0x33d077;return _0x3c6f0f[_0x5b56e0(0x182)]!=_0x25247f;}));}let _0x1b010a=dbConfig[_0x33d077(0x1f6)](_0x33d077(0x1fa))['find']({'botID':botID})[_0x33d077(0x1ad)]();_0x1b010a&&(dbConfig[_0x33d077(0x1f6)]('bot')[_0x33d077(0x291)]({'botID':botID})[_0x33d077(0x252)]({'liquidity':_0xa3e632})[_0x33d077(0x2b0)](),config[_0x33d077(0x1e0)]=_0xa3e632);logHistory(_0x33d077(0x30c),'Portfolio\x20change\x20detected:\x20'+Math[_0x33d077(0x300)](_0x31445a[_0x33d077(0x242)])+'\x20'+_0x31445a[_0x33d077(0x1d2)]+'\x20'+(_0x31445a[_0x33d077(0x242)]>0x0?_0x33d077(0x2e5):_0x33d077(0x217))+_0x33d077(0x276)),proxyEmit(_0x33d077(0x1af),emittedConfiguration());const _0x5662fc=getNormalizedPerformance();emitPerformance(_0x5662fc),getStartingBalances(_0x5662fc),logger[_0x33d077(0x283)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config['autoliquidity']=='switch-manual'&&(config[_0x33d077(0x1b9)]?(await storeHeadless({'headless':![]}),logHistory(_0x33d077(0x30c),_0x33d077(0x1ba)+Math[_0x33d077(0x300)](_0x31445a['number'])+'\x20'+_0x31445a[_0x33d077(0x1d2)]+'\x20'+(_0x31445a[_0x33d077(0x242)]>0x0?'added':_0x33d077(0x217))+_0x33d077(0x1d7))):logger['debug'](_0x33d077(0x1ba)+Math[_0x33d077(0x300)](_0x31445a[_0x33d077(0x242)])+'\x20'+_0x31445a['coin']+'\x20'+(_0x31445a[_0x33d077(0x242)]>0x0?_0x33d077(0x2e5):_0x33d077(0x217))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x33d077(0x283)](_0x33d077(0x20c)+Math[_0x33d077(0x300)](_0x31445a[_0x33d077(0x242)])+'\x20'+_0x31445a[_0x33d077(0x1d2)]+'\x20'+(_0x31445a[_0x33d077(0x242)]>0x0?_0x33d077(0x2e5):_0x33d077(0x217)));}else logger[_0x33d077(0x283)](_0x33d077(0x1ba)+Math[_0x33d077(0x300)](_0x31445a[_0x33d077(0x242)])+'\x20'+_0x31445a[_0x33d077(0x1d2)]+'\x20'+(_0x31445a[_0x33d077(0x242)]>0x0?_0x33d077(0x2e5):_0x33d077(0x217))+_0x33d077(0x31f));}currentCoins=_0x5a3a5b,currentCoinsAll=_0x304161;}catch(_0x4bed27){if(!exchangeStopped)await handleError(_0x4bed27,_0x33d077(0x2c1));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x5e3b2d=_0x1d511c;logger[_0x5e3b2d(0x283)](_0x5e3b2d(0x2b9));try{markets=await exchange[_0x5e3b2d(0x203)]();}catch(_0x4c240d){logger[_0x5e3b2d(0x283)]('loadSymbols():\x20'+_0x4c240d[_0x5e3b2d(0x1b4)]());if(markets){}else logHistory(_0x5e3b2d(0x19a),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0x5e3b2d(0x286)+loadCoinsRetryInterval/0xea60+_0x5e3b2d(0x2e6)),logger[_0x5e3b2d(0x283)](_0x5e3b2d(0x1d5),_0x4c240d),loading[_0x5e3b2d(0x2e7)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x5e3b2d(0x264)](markets)[_0x5e3b2d(0x2d6)](_0x45cb2b=>{const _0x28b2ab=_0x5e3b2d;_0x45cb2b[0x1]['active']&&_0x45cb2b[0x1][_0x28b2ab(0x1aa)]&&allSymbols[_0x28b2ab(0x1b5)](_0x45cb2b[0x0]);});}function validateSymbols(_0x5dd9e4){const _0x588bf5=_0x1d511c;let _0x425592=[];return _0x5dd9e4[_0x588bf5(0x2d6)](_0x22ed56=>{const _0x594692=_0x588bf5;!allSymbols['includes'](_0x22ed56)?logHistory(_0x594692(0x19a),_0x594692(0x2bd)+_0x22ed56+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x425592[_0x594692(0x1b5)](_0x22ed56);}),_0x425592;}async function initclient(){const _0x44adb5=_0x1d511c;proxyEmit(_0x44adb5(0x1af),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x44adb5(0x26d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4e6798=getNormalizedPerformance();emitPerformance(_0x4e6798),getStartingBalances(_0x4e6798);}async function toggleBotMode(){const _0x314bc3=_0x1d511c;let _0x4816a6=dbConfig['get'](_0x314bc3(0x1fa))['find']({'botID':botID})['value']();if(_0x4816a6){const _0x18f0a1=!_0x4816a6[_0x314bc3(0x1b9)];dbConfig[_0x314bc3(0x1f6)](_0x314bc3(0x1fa))[_0x314bc3(0x291)]({'botID':botID})[_0x314bc3(0x252)]({'headless':_0x18f0a1})[_0x314bc3(0x2b0)](),config[_0x314bc3(0x1b9)]=_0x18f0a1,proxyEmit(_0x314bc3(0x1af),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x47d064=_0x1d511c;process[_0x47d064(0x2be)]({'updatebotmanager':!![]},_0x128452=>{}),logger[_0x47d064(0x283)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x26f31d){const _0x816efb=_0x1d511c;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x379e30,_0x56e400=0x0,_0xeba448=0x0;_0x26f31d[_0x816efb(0x2d6)](_0x5250c1=>{const _0x134c3a=_0x816efb;loading[_0x134c3a(0x1f8)][_0x134c3a(0x1b5)](_0x5250c1);}),loadingCanceled=![];let _0x1940b0=![];while(_0x379e30!=_0x26f31d[_0x816efb(0x212)]+maxLoadingProgress){_0x379e30=loadingProgress,_0x26f31d[_0x816efb(0x2d6)](_0x209f03=>{const _0x3a2ebd=_0x816efb;if(gTicker[noslash(_0x209f03)]){loading[_0x3a2ebd(0x1f8)]=loading[_0x3a2ebd(0x1f8)][_0x3a2ebd(0x1c9)](_0x5a43cd=>_0x5a43cd!=_0x209f03);if(!watchedSymbols[_0x3a2ebd(0x28e)](_0x209f03))watchedSymbols[_0x3a2ebd(0x1b5)](_0x209f03);_0x379e30++;}}),loading[_0x816efb(0x262)]=Math[_0x816efb(0x27c)](_0x379e30/(_0x26f31d[_0x816efb(0x212)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0xeba448>0x1e*0x5&&(loading[_0x816efb(0x1f7)]=!![],emitLoadingProgress()),_0xeba448>0x78*0x5&&!_0x1940b0&&(_0x1940b0=!![],logHistory(_0x816efb(0x19a),_0x816efb(0x1fe)+loading[_0x816efb(0x1f8)][_0x816efb(0x26c)](',\x20')+_0x816efb(0x2b2)),logHistory(_0x816efb(0x19a),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x816efb(0x2e6)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x56e400!=loading['progress']&&(_0x56e400=loading[_0x816efb(0x262)],emitLoadingProgress()),_0xeba448++,await sleep(0xc8);}_0x379e30==_0x26f31d[_0x816efb(0x212)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x816efb(0x205),'live':'running'},_0x206520=>{}),_0x1940b0&&logHistory(_0x816efb(0x30c),_0x816efb(0x2e8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5177ad=_0x1d511c;proxyEmit(_0x5177ad(0x1af),{...emittedConfiguration(),'configstate':'loading-canceled'});}function _0x3e13(){const _0x4432c2=['\x20>\x20details:','request-time','fetchTickers','bots','\x20minutes','max','event','starting-balance-','1\x20-\x20Handle\x20open\x20orders','fees','toFixed','marketcapApi','full','-------------------------------\x0a','date','InvalidOrder','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','realized','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','2.6.22','MIN_NOTIONAL','197465xGVCKR','OrderNotFound','getSeconds','portfolio2','function',')\x20|\x20exchange:\x20','trade','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','304314KTvfMq','watchTrades','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20network\x20error:\x20','toLowerCase','initTickers()','\x20|\x20exchange:\x20','highest','marketcapEnabled','error','0\x20-\x20EXECUTION:\x20','exec','botname','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Bitget','average','8KTWaml','market_cap','apiSecret','findIndex','recovery','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','Loading\x20completed','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','UNLOCKED','spot','net-basecoin','<b>','value','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','configuration','\x20|\x20Custom\x20ID:\x20','2\x20-\x20handling\x20FILLED\x20order:\x20','amount','constructor','toString','push','ETH','final','leftTxt','headless','Portfolio\x20change\x20detected:\x20','OnMaintenance','marketcap','watchTradesForSymbols','substring','shift','Limit\x20(high-margin)','apply','fetchBalance','existsSync','decrypt','split','bb-settings.json','unlinkSync','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','filter','secure','symbol','datetime','USDP','fromCodePoint','version','emojisell','Exception\x20thrown\x20in\x20','coin','API-key\x20format\x20invalid','/backup/','Error\x20details:','Limit\x20(low-margin)','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','starting-balances','2\x20-\x20Orders\x20unlocked','running','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','orderstatus','233082ekUwAQ','storeConfiguration','liquidity','time','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','remove','order','ongoing','random','BNB','Reset\x20|\x20','amountToPrecision','\x20|\x20','cancelOrders()','portfolio','market','exchange','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','2.3.5','fiat','sqrt','colorscheme','map','log','get','timeout','remainingSymbols','resetHistory','bot','%\x20(','password','defaults','Failed\x20to\x20load\x20coin\x20data\x20for\x20','buys','RateLimitExceeded','getStartingBalances','sha256','loadMarkets','valid','enabled','cancelOrder','.json','\x20>\x20[DEBUG]\x20','cancelLoading','Initializing\x20exchange:\x20already\x20done','1\x20-\x20FILLED\x20known\x20order:\x20','Fee\x20discount\x20refund\x20detected:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','openOrders','PermissionDenied','customId','***','length','getHours','Unknown\x20error:\x20','fetchClosedOrders','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','removed','filled','none','bot-','yyyy/MM/dd','limit-low','Order\x20filled:\x20','\x20orders\x20in\x20less\x20than\x20','fetchOpenOrders','netoffset','getDate','Resuming\x20(','pid','Initiating\x20bot\x20restart','isEqual','excluded','keys','status','Order\x20amount\x20is\x20invalid:\x20','coin-loading-progress','performance','storeFiat','warning','\x20attempts','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','hybrid-crypto-js','UNLOCKING','<pre>','sendMetricsTelegram','token\x20is\x20expired','onepagemode','getFullYear','\x20order:\x20','createOrder','BUSD','initclient','132WVnAvp','format','emojibuy','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','Trigger:\x20','offset','stringify','number','Bot\x20','NetworkError','set','startprice','reverse','Error:\x20Invalid\x20argument\x20','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','delta','side','-results.json','apiPassword','-config.json','buy','usd','\x20>\x20pausing\x20bot\x20for\x20','assign','2.6.23','pro','\x20/\x20','LOCKED','deleteHistoryAlerts','message','\x20exchange','\x20has\x20a\x2024h\x20drop\x20of\x20','exchanges','Cooldown\x20ended\x20-\x20balancing\x20resumed','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','1\x20-\x20Validate\x20orders:\x20','ExchangeNotAvailable','emitHistory','progress','limit','entries','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','yargs/yargs','memoryUsage','Crypt','-events.json','BNB/','-performance.json','join','balances','slider','limits','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','</pre>','showname','2\x20-\x20Handled\x20open\x20orders','changes','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timeshift','watchOrders()','lowdb/adapters/FileSync','1\x20-\x20FILLED\x20unknown\x20order:\x20','Initializing\x20exchange','round','percentage','startdate','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','floor','\x20minutes\x20-\x20','testAPI():','debug','placeOrder()','update-liquidity','Pausing\x20for\x20','Executed\x20','Manual\x20balancing\x20required','Block\x20transaction\x20detection:\x20','2830449VdUDQD','process\x20','timestamp','<b>Bot\x20','includes','uncaughtException','writeFile','find','getMonth','./logs/','breakeven','total','event-history','Symbol(s):\x20','cooldown','has','exchange\x20reloaded','quick','Cryptocom','type','recent20','InsufficientFunds','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','page','cost','\x20value','closed','add','min','replace','RETRY\x20-\x20Problem\x20resolved\x20after\x20','basecoin','argv','Net\x20effect','startnumber',':\x20Bot\x20','open','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','write','padStart','\x20-\x20bot\x20not\x20started','Error\x20details\x20(0):','indexOf','fee','orderId','lowdb','sell','Loading\x20symbols','2\x20-\x20Validate\x20orders:\x20','4826290MZYaQD','configuration-stored','Invalid\x20symbol:\x20','send','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','botID','detectLiquidityChange()','452116SXuYsC','portfolio1','./config/','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','fetchTicker','eur','14lUrHOP','InvalidNonce','\x20portfolio:</b>\x20\x0a\x0a','basecoinvalue','11797992vPpXrB','logs','getMinutes','bb-secure.json','Order(s)\x20not\x20validated\x20after\x20','no\x20open\x20orders','Saving\x20configuration','apiKey','sort','Market','forEach','\x20uses\x20','change','Error\x20while\x20deleting\x20files:\x20','splice','differenceInSeconds','parse','threshold','axios','concat','toUpperCase','currency','RSA-OAEP','\x20>\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','added','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','cancel','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','./version.json','complete','milliseconds','USDT','ID:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','************','/EUR','BTC','initial','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','\x20-\x20','data','\x20API\x20secret\x20is\x20invalid','date-fns','limit-high','marketcapsqrt','Net\x20','PAXG','sortBy','target','USD','mkdirSync','abs','bid','canceled','red_yellow_blue','ExchangeError','watchOrders','storeHeadless','Binance','slice','price','cloneDeep','rightTxt','success','USDC','padEnd','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20metrics:</b>\x20\x0a\x0a','\x20MB','Exchange','1\x20-\x20Unlock\x20orders','EUR','net-fiat','Huobi','path','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','autoliquidity','Unknown\x20error\x20-\x20check\x20logs','Cex','ordertype','search','change24h','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','restart','AuthenticationError','Resetting\x20bot\x20history','settings','util','args','last',':\x20timer\x20>','coins','distribution','recreateCoinResults()'];_0x3e13=function(){return _0x4432c2;};return _0x3e13();}function emitLoadingProgress(){const _0x39164f=_0x1d511c;proxyEmit(_0x39164f(0x22a),loading);}async function getFiat(){const _0xff8c06=_0x1d511c;let _0x3a919c=gTicker[stablecoins['eur'][_0xff8c06(0x1d2)]],_0x277095=gTicker[stablecoins[_0xff8c06(0x250)][_0xff8c06(0x1d2)]];return{'eur':Number(_0x3a919c),'usd':Number(_0x277095)};}function capitalize(_0xebf9cc){const _0x44dec5=_0x1d511c;return _0xebf9cc[_0x44dec5(0x1be)](0x0,0x1)[_0x44dec5(0x2e0)]()+_0xebf9cc[_0x44dec5(0x1be)](0x1);}function supportedExchanges(){const _0x390904=_0x1d511c,_0x24b388=['ws','fetchTickers',_0x390904(0x2c6),'watchTrades',_0x390904(0x305),_0x390904(0x206),_0x390904(0x238),'fetchOpenOrders','fetchClosedOrders',_0x390904(0x1c2)];let _0x5404c7=[],_0x12b286=[],_0x301594=ccxt[_0x390904(0x254)][_0x390904(0x25b)];_0x301594[_0x390904(0x2d6)](_0x20867c=>{const _0xd70469=_0x390904;try{const _0x1d1d07=new ccxt[(_0xd70469(0x254))][_0x20867c]();_0x12b286[_0xd70469(0x1b5)](_0x1d1d07);}catch(_0x5ebc63){}}),_0x12b286[_0x390904(0x2d6)](_0x10083a=>{const _0x33fce2=_0x390904;let _0x16989d=0x0;_0x24b388[_0x33fce2(0x2d6)](_0x39a516=>{const _0x10b926=_0x33fce2;_0x39a516 in _0x10083a[_0x10b926(0x299)]&&_0x10083a[_0x10b926(0x299)][_0x39a516]&&_0x16989d++;}),_0x16989d==_0x24b388[_0x33fce2(0x212)]&&_0x5404c7[_0x33fce2(0x1b5)](capitalize(_0x10083a['id']));});let _0x26bf1e=[];return _0x301594[_0x390904(0x2d6)](_0x5d31c2=>{const _0xa030ba=_0x390904;_0x5d31c2=capitalize(_0x5d31c2);if(!_0x5404c7[_0xa030ba(0x28e)](_0x5d31c2))_0x26bf1e[_0xa030ba(0x1b5)](_0x5d31c2);}),_0x5404c7;}function setStartDatePerformance(){const _0x22c0b9=_0x1d511c;if(config&&config[_0x22c0b9(0x1e0)][0x0][_0x22c0b9(0x275)]['length']!=0x0){const _0x2caeac=config['liquidity'][0x0][_0x22c0b9(0x275)];dbPerformance[_0x22c0b9(0x1f6)]('data')[_0x22c0b9(0x291)]({'date':config[_0x22c0b9(0x27e)]})[_0x22c0b9(0x252)]({'coins':_0x2caeac})[_0x22c0b9(0x2b0)]();}}async function recreateCoinResults(){const _0x484848=_0x1d511c;recreationNeeded=![];let _0x3d90c7,_0x358b67=[];try{for(const _0x5d21a0 of currentCoins){if(_0x5d21a0[_0x484848(0x1d2)]!=config[_0x484848(0x2a9)]){let _0x471f69=0x0,_0x3f0eae,_0x3216a4;_0x3d90c7=await getAllEventOrders(_0x5d21a0['symbol']);if(_0x3d90c7[_0x484848(0x212)]>0x0)_0x3d90c7['forEach'](_0x3903aa=>{const _0xe7ff74=_0x484848,_0x71ab14=_0x5d21a0[_0xe7ff74(0x1cb)]['includes'](config[_0xe7ff74(0x2a9)]+'/');_0x358b67[_0xe7ff74(0x1b5)]({'datetime':_0x3903aa['datetime'],'coin':_0x5d21a0['coin'],'symbol':_0x5d21a0[_0xe7ff74(0x1cb)],'side':_0x3903aa[_0xe7ff74(0x24b)],'reverse':_0x71ab14,'amount':formatResult(_0x3903aa[_0xe7ff74(0x218)],0x8),'filled':formatResult(_0x3903aa[_0xe7ff74(0x218)],0x8),'price':formatResult(_0x3903aa['price'],0x8)}),_0x471f69=_0x3903aa[_0xe7ff74(0x24b)]=='buy'?_0x471f69+_0x3903aa['filled']:_0x471f69-_0x3903aa[_0xe7ff74(0x218)];if(!_0x3216a4)_0x3216a4=_0x3903aa[_0xe7ff74(0x309)];});_0x3f0eae=_0x5d21a0[_0x484848(0x242)]-_0x471f69;let _0x52e26c;config[_0x484848(0x1e0)]['forEach'](_0x26d242=>{const _0x2bee25=_0x484848;!_0x52e26c&&(_0x52e26c=_0x26d242[_0x2bee25(0x275)][_0x2bee25(0x291)](_0x67f107=>_0x67f107['coin']==_0x5d21a0['coin']),_0x52e26c&&(_0x3f0eae=_0x52e26c[_0x2bee25(0x242)],_0x3216a4=_0x52e26c[_0x2bee25(0x309)]));});let _0x40fad2=dbCoinResults['get'](_0x484848(0x171))[_0x484848(0x291)]({'coin':_0x5d21a0[_0x484848(0x1d2)]})[_0x484848(0x1ad)]();_0x40fad2={'coin':_0x5d21a0[_0x484848(0x1d2)],'number':_0x3f0eae,'breakeven':_0x3216a4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')['find']({'coin':_0x5d21a0[_0x484848(0x1d2)]})[_0x484848(0x252)](_0x40fad2)[_0x484848(0x2b0)]();}}_0x358b67[_0x484848(0x2d4)]((_0x3ac8ae,_0x56c54b)=>_0x3ac8ae[_0x484848(0x1cc)]>_0x56c54b[_0x484848(0x1cc)]?0x1:_0x56c54b['datetime']>_0x3ac8ae[_0x484848(0x1cc)]?-0x1:0x0);let _0x38fd3a=0x0;for(let _0x52d33f of _0x358b67){await updateCoinResults(_0x52d33f,!![]);}}catch(_0x53365d){await handleError(_0x53365d,_0x484848(0x173));}}async function getAllEventOrders(_0x2881b7){const _0x12ebd2=_0x1d511c;let _0x37074b=[],_0x6aac3b=dbLogs[_0x12ebd2(0x1f6)]('logs')[_0x12ebd2(0x1c9)](_0x423f6d=>{const _0x1e3127=_0x12ebd2,_0x260e6c=_0x423f6d['event'][_0x1e3127(0x195)]();return _0x260e6c[_0x1e3127(0x28e)](_0x2881b7[_0x1e3127(0x195)]())&&(_0x260e6c['includes'](_0x1e3127(0x1ed))&&_0x260e6c['includes'](_0x1e3127(0x1e4))||_0x260e6c[_0x1e3127(0x28e)](_0x1e3127(0x218))&&_0x260e6c['includes'](_0x1e3127(0x1e4)));})['sortBy'](_0x12ebd2(0x1e1))[_0x12ebd2(0x1ad)]();return _0x6aac3b[_0x12ebd2(0x2d6)](_0x4fb1ee=>{const _0xda2148=_0x12ebd2,_0x47a95e=_0x4fb1ee[_0xda2148(0x17a)]['includes'](_0xda2148(0x2b8))?_0xda2148(0x2b8):_0xda2148(0x24f),_0x2f46bc=/#([0-9]|\.)+\s/i,_0x4add42=Number(_0x2f46bc['exec'](_0x4fb1ee[_0xda2148(0x17a)])[0x0][_0xda2148(0x308)](0x1)),_0x1b3311=/@([0-9]|\.)+$/i,_0x403bf4=Number(_0x1b3311[_0xda2148(0x19c)](_0x4fb1ee[_0xda2148(0x17a)])[0x0]['slice'](0x1));_0x37074b['push']({'datetime':_0x4fb1ee[_0xda2148(0x1e1)],'coin':symbolToCoin(_0x2881b7),'symbol':_0x2881b7,'side':_0x47a95e,'amount':_0x4add42,'filled':_0x4add42,'price':_0x403bf4});}),_0x37074b;}async function getAllOrders(_0x48e5c9,_0x5b68e7){const _0x335e6d=_0x1d511c;let _0x11f075=[];while(_0x5b68e7<exchange[_0x335e6d(0x2eb)]()){const _0x276294=0x1f4;try{const _0x819e27=await exchange[_0x335e6d(0x215)](_0x48e5c9,_0x5b68e7,_0x276294);if(_0x819e27[_0x335e6d(0x212)])_0x5b68e7=_0x819e27[_0x819e27[_0x335e6d(0x212)]-0x1][_0x335e6d(0x28c)]+0x1,_0x11f075=_0x11f075[_0x335e6d(0x2df)](_0x819e27);else break;}catch(_0x5180d1){await handleError(_0x5180d1,'getAllOrders()',_0x48e5c9);}}return _0x11f075;}async function validate24hChanges(){const _0x38173e=_0x1d511c;for(const _0x544a1d of currentCoins){if(_0x544a1d[_0x38173e(0x1d2)]!=config[_0x38173e(0x2a9)]){let _0x4ac0b3;_0x544a1d['reverse']?_0x4ac0b3=formatResult((0x1/(gChange[_0x544a1d[_0x38173e(0x1cb)]]/0x64+0x1)-0x1)*0x64,0x3):_0x4ac0b3=gChange[_0x544a1d[_0x38173e(0x1cb)]],_0x4ac0b3<config[_0x38173e(0x31e)]&&(logHistory('error',_0x544a1d[_0x38173e(0x1d2)]+_0x38173e(0x25a)+_0x4ac0b3+'%'),logHistory(_0x38173e(0x19a),_0x38173e(0x1e2)),logHistory(_0x38173e(0x19a),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x180fbb,_0x3bef0a){const _0x4939c5=_0x1d511c;if(!_0x180fbb)return!![];const _0x4fc92f=_0x3bef0a[_0x4939c5(0x1c5)]('.'),_0x52ce78=_0x180fbb['split']('.');for(var _0x192d16=0x0;_0x192d16<_0x52ce78['length'];_0x192d16++){const _0x16a61c=~~_0x52ce78[_0x192d16],_0x5bfb45=~~_0x4fc92f[_0x192d16];if(_0x16a61c<_0x5bfb45)return!![];if(_0x16a61c>_0x5bfb45)return![];}return![];}async function oneTimeMigration(){const _0x1c748f=_0x1d511c;let _0x5eb188=dbLogs[_0x1c748f(0x1f6)](_0x1c748f(0x1cf))[_0x1c748f(0x1ad)]();if(isOlderVersion(_0x5eb188,_0x1c748f(0x1f0))){let _0x5b6ce5=[];const _0x590e42=dbLogs[_0x1c748f(0x1f6)](_0x1c748f(0x2cd))[_0x1c748f(0x1ad)]();_0x590e42[_0x1c748f(0x2d6)](_0x2d0e3b=>{const _0x263c71=_0x1c748f;_0x5b6ce5['push']({'time':_0x2d0e3b[_0x263c71(0x1e1)],'type':_0x2d0e3b[_0x263c71(0x29d)],'event':_0x2d0e3b[_0x263c71(0x17a)]});}),dbLogs['get'](_0x1c748f(0x2cd))[_0x1c748f(0x252)](_0x5b6ce5)[_0x1c748f(0x2b0)]();}let _0xa56f69=dbConfig[_0x1c748f(0x1f6)]('version')[_0x1c748f(0x1ad)]();if(isOlderVersion(_0xa56f69,_0x1c748f(0x1f0))){let _0x4b11fd=dbConfig[_0x1c748f(0x1f6)](_0x1c748f(0x1fa))[_0x1c748f(0x291)]({'botID':botID})[_0x1c748f(0x1ad)]();if(_0x4b11fd){let _0x3a33a5=[];_0x4b11fd[_0x1c748f(0x1ec)][_0x1c748f(0x2d6)](_0x547b92=>{const _0x2b8d98=_0x1c748f;_0x3a33a5[_0x2b8d98(0x1b5)]({'coin':_0x547b92[_0x2b8d98(0x1d2)],'number':_0x547b92[_0x2b8d98(0x2ac)],'price':_0x547b92[_0x2b8d98(0x246)]}),delete _0x547b92[_0x2b8d98(0x2ac)],delete _0x547b92[_0x2b8d98(0x246)];});if(_0x3a33a5[_0x1c748f(0x212)]!==0x0)fs[_0x1c748f(0x290)](configbackuppath+(_0x1c748f(0x17b)+botID+_0x1c748f(0x207)),JSON[_0x1c748f(0x241)](_0x3a33a5,null,0x4),function(_0x416677){if(_0x416677){}});const _0x262af7=(_0x5ca8b0,_0x4561f0)=>{let _0x199c3a=[];_0x4561f0['forEach'](_0x268311=>{const _0x3de243=_0x4b28,_0x5a9297=_0x5ca8b0[_0x3de243(0x291)](_0x4aa036=>_0x4aa036['coin']==_0x268311['coin']);if(!_0x5a9297)_0x199c3a[_0x3de243(0x1b5)](_0x268311);});let _0x13970c=[];return _0x5ca8b0['forEach'](_0x2deff0=>{const _0x210922=_0x4b28,_0x57e83d=_0x4561f0[_0x210922(0x291)](_0x2a8ac8=>_0x2a8ac8['coin']==_0x2deff0['coin']);if(!_0x57e83d||_0x57e83d[_0x210922(0x242)]==0x0&&_0x2deff0['number']!=0x0)_0x13970c[_0x210922(0x1b5)](_0x2deff0);}),{'missingDay1':_0x199c3a,'notInDay2':_0x13970c};},_0xaacdf4=dbPerformance[_0x1c748f(0x1f6)]('data')[_0x1c748f(0x30a)]()[_0x1c748f(0x1ad)]();if(_0xaacdf4[_0x1c748f(0x212)]>0x1){const {missingDay1:_0x2ea4dd,notInDay2:_0x25c82b}=_0x262af7(_0x3a33a5,_0xaacdf4[0x1][_0x1c748f(0x171)]);_0x3a33a5=[..._0x3a33a5,..._0x2ea4dd],_0x25c82b['forEach'](_0x3ca780=>{const _0x20fa1c=_0x1c748f;let _0x4510af=_0x3a33a5[_0x20fa1c(0x1a4)](_0x2b55f8=>_0x2b55f8['coin']==_0x3ca780[_0x20fa1c(0x1d2)]);_0x4510af!=-0x1&&_0x3a33a5[_0x20fa1c(0x2da)](_0x4510af,0x1);});}_0x3a33a5[_0x1c748f(0x2d4)]((_0x1b8584,_0x3061a0)=>_0x1b8584['coin']>_0x3061a0[_0x1c748f(0x1d2)]?0x1:_0x3061a0[_0x1c748f(0x1d2)]>_0x1b8584[_0x1c748f(0x1d2)]?-0x1:0x0);let _0x1a74b7=[{'date':_0x4b11fd[_0x1c748f(0x27e)],'changes':_0x3a33a5}];_0xaacdf4['length']>0x2&&_0xaacdf4[_0x1c748f(0x2d6)]((_0x2e2467,_0x2c5b52)=>{const _0x5b3c68=_0x1c748f;if(_0x2c5b52>0x0&&_0x2c5b52<_0xaacdf4[_0x5b3c68(0x212)]-0x1){const {missingDay1:_0x2571d3,notInDay2:_0x556b18}=_0x262af7(_0xaacdf4[_0x2c5b52][_0x5b3c68(0x171)],_0xaacdf4[_0x2c5b52+0x1][_0x5b3c68(0x171)]);_0x3a33a5=[],(_0x2571d3['length']!=0x0||_0x556b18[_0x5b3c68(0x212)]!=0x0)&&(_0x2571d3[_0x5b3c68(0x212)]!=0x0&&_0x3a33a5[_0x5b3c68(0x1b5)](..._0x2571d3),_0x556b18[_0x5b3c68(0x212)]!=0x0&&(_0x556b18[_0x5b3c68(0x2d6)](_0x3dd080=>{const _0x5c2ca9=_0x5b3c68;_0x3dd080[_0x5c2ca9(0x242)]=-_0x3dd080[_0x5c2ca9(0x242)];}),_0x3a33a5[_0x5b3c68(0x1b5)](..._0x556b18)),_0x3a33a5[_0x5b3c68(0x2d4)]((_0x5f4e04,_0x3c746f)=>_0x5f4e04[_0x5b3c68(0x1d2)]>_0x3c746f['coin']?0x1:_0x3c746f[_0x5b3c68(0x1d2)]>_0x5f4e04[_0x5b3c68(0x1d2)]?-0x1:0x0),_0x1a74b7['push']({'date':_0xaacdf4[_0x2c5b52+0x1][_0x5b3c68(0x182)],'changes':_0x3a33a5}));}}),dbConfig['get'](_0x1c748f(0x1fa))[_0x1c748f(0x291)]({'botID':botID})['assign']({..._0x4b11fd,'liquidity':_0x1a74b7})[_0x1c748f(0x2b0)]();}}if(isOlderVersion(_0xa56f69,'2.6.0')){let _0x4abdda=dbConfig[_0x1c748f(0x1f6)](_0x1c748f(0x1fa))['find']({'botID':botID})[_0x1c748f(0x1ad)]();if(_0x4abdda){const _0x3f7483=_0x4abdda[_0x1c748f(0x1ee)],_0x2e8577=_0x3f7483?capitalize(_0x3f7483):'Binance';dbConfig['get'](_0x1c748f(0x1fa))[_0x1c748f(0x291)]({'botID':botID})[_0x1c748f(0x252)]({'exchange':_0x2e8577})[_0x1c748f(0x2b0)]();}}if(isOlderVersion(_0xa56f69,_0x1c748f(0x187))){let _0x499b3c=dbConfig[_0x1c748f(0x1f6)](_0x1c748f(0x1fa))['find']({'botID':botID})[_0x1c748f(0x1ad)]();if(_0x499b3c){const _0x1b703d=_0x499b3c[_0x1c748f(0x199)],_0xf056e1=_0x1b703d?'marketcap':![];dbConfig[_0x1c748f(0x1f6)](_0x1c748f(0x1fa))['find']({'botID':botID})[_0x1c748f(0x252)]({'marketcapEnabled':_0xf056e1})[_0x1c748f(0x2b0)]();}}if(isOlderVersion(_0xa56f69,_0x1c748f(0x253))){let _0x19b3b1=dbConfig[_0x1c748f(0x1f6)]('bot')['find']({'botID':botID})[_0x1c748f(0x1ad)]();if(_0x19b3b1){const _0x2ba7a9=_0x19b3b1[_0x1c748f(0x319)],_0x37faaf=_0x2ba7a9?'update-liquidity':![];dbConfig['get'](_0x1c748f(0x1fa))[_0x1c748f(0x291)]({'botID':botID})[_0x1c748f(0x252)]({'autoliquidity':_0x37faaf})[_0x1c748f(0x2b0)]();}}let _0x5e53e5=dbPerformance[_0x1c748f(0x1f6)](_0x1c748f(0x1cf))[_0x1c748f(0x1ad)]();isOlderVersion(_0x5e53e5,_0x1c748f(0x1f0))&&setStartDatePerformance();let _0x47bf7b=dbCoinResults[_0x1c748f(0x1f6)](_0x1c748f(0x1cf))['value']();if(isOlderVersion(_0x47bf7b,'2.5.0')){let _0x3ea631=dbCoinResults[_0x1c748f(0x1f6)](_0x1c748f(0x171))['value']();if(_0x3ea631[_0x1c748f(0x212)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x30e969=_0x1d511c;dbConfig[_0x30e969(0x245)](_0x30e969(0x1cf),serverversion)[_0x30e969(0x2b0)](),dbPerformance[_0x30e969(0x245)]('version',serverversion)[_0x30e969(0x2b0)](),dbLogs[_0x30e969(0x245)](_0x30e969(0x1cf),serverversion)[_0x30e969(0x2b0)](),dbCoinResults['set']('version',serverversion)[_0x30e969(0x2b0)]();}function getConfiguration(_0x2d4f9d){const _0x463afe=_0x1d511c;let _0x5411e5=dbConfig[_0x463afe(0x1f6)]('bot')['find']({'botID':_0x2d4f9d})[_0x463afe(0x1ad)]();if(_0x5411e5){let _0x4c0fa5=![];typeof _0x5411e5[_0x463afe(0x2dd)]=='string'&&(_0x5411e5={..._0x5411e5,'threshold':Number(_0x5411e5[_0x463afe(0x2dd)])},_0x4c0fa5=!![]),_0x5411e5[_0x463afe(0x31e)]==undefined&&(_0x5411e5={..._0x5411e5,'change24h':-0x14},_0x4c0fa5=!![]),_0x5411e5[_0x463afe(0x1f1)]==undefined&&(_0x5411e5={..._0x5411e5,'fiat':'USD'},_0x4c0fa5=!![]),_0x5411e5['onepagemode']==undefined&&(_0x5411e5={..._0x5411e5,'onepagemode':settings['onepagemode']},_0x4c0fa5=!![]),_0x5411e5[_0x463afe(0x1f3)]==undefined&&(_0x5411e5={..._0x5411e5,'colorscheme':_0x463afe(0x303)},_0x4c0fa5=!![]),_0x5411e5['autoliquidity']==undefined&&(_0x5411e5={..._0x5411e5,'autoliquidity':_0x463afe(0x285)},_0x4c0fa5=!![]),_0x5411e5[_0x463afe(0x17f)]==undefined&&(_0x5411e5={..._0x5411e5,'marketcapApi':settings[_0x463afe(0x17f)]?!![]:![]},_0x4c0fa5=!![]),_0x5411e5[_0x463afe(0x199)]==undefined&&(_0x5411e5={..._0x5411e5,'marketcapEnabled':![]},_0x4c0fa5=!![]),_0x4c0fa5&&(_0x5411e5={'botID':_0x5411e5[_0x463afe(0x2c0)],'exchange':_0x5411e5[_0x463afe(0x1ee)],'apiKey':_0x5411e5[_0x463afe(0x2d3)],'apiSecret':_0x5411e5[_0x463afe(0x1a3)],'apiPassword':_0x5411e5[_0x463afe(0x24d)],'basecoin':_0x5411e5[_0x463afe(0x2a9)],'botname':_0x5411e5[_0x463afe(0x19d)],'showname':_0x5411e5['showname'],'threshold':_0x5411e5['threshold'],'ordertype':_0x5411e5[_0x463afe(0x31c)],'timeout':_0x5411e5[_0x463afe(0x1f7)],'fiat':_0x5411e5[_0x463afe(0x1f1)],'startdate':_0x5411e5[_0x463afe(0x27e)],'recreate':_0x5411e5['recreate'],'timeshift':_0x5411e5[_0x463afe(0x277)],'onepagemode':_0x5411e5['onepagemode'],'headless':_0x5411e5['headless'],'cooldown':_0x5411e5[_0x463afe(0x298)],'change24h':_0x5411e5[_0x463afe(0x31e)],'emojibuy':_0x5411e5[_0x463afe(0x23d)],'emojisell':_0x5411e5['emojisell'],'colorscheme':_0x5411e5[_0x463afe(0x1f3)],'marketcapApi':_0x5411e5[_0x463afe(0x17f)],'marketcapEnabled':_0x5411e5['marketcapEnabled'],'portfolio':_0x5411e5[_0x463afe(0x1ec)],'autoliquidity':_0x5411e5[_0x463afe(0x319)],'liquidity':_0x5411e5[_0x463afe(0x1e0)],'openOrders':_0x5411e5['openOrders']},dbConfig[_0x463afe(0x1f6)](_0x463afe(0x1fa))['remove']()[_0x463afe(0x2b0)](),dbConfig[_0x463afe(0x1f6)](_0x463afe(0x1fa))[_0x463afe(0x1b5)](_0x5411e5)[_0x463afe(0x2b0)]());}else _0x5411e5={'botID':_0x2d4f9d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x463afe(0x243)+_0x2d4f9d,'showname':![],'threshold':0x3,'ordertype':_0x463afe(0x1ed),'timeout':0x14,'fiat':_0x463afe(0x2fe),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x463afe(0x277)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x463afe(0x303),'marketcapApi':settings[_0x463afe(0x17f)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x463afe(0x285),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5411e5;}function emittedConfiguration(){const _0x4d50f6=_0x1d511c;let _0x361d1c;if(config[_0x4d50f6(0x2d3)]=='')_0x361d1c={...config,'configstate':_0x4d50f6(0x2f2)};else config[_0x4d50f6(0x2d3)]==_0x4d50f6(0x211)?_0x361d1c={...config,'configstate':_0x4d50f6(0x1a5)}:(_0x361d1c={...config,'apiKey':'************','apiSecret':_0x4d50f6(0x2ef)},config[_0x4d50f6(0x24d)]&&(_0x361d1c['apiPassword']='************'));return _0x361d1c;}function getSettings(){const _0x24a464=_0x1d511c;return dbSettings[_0x24a464(0x1f6)](_0x24a464(0x323))[_0x24a464(0x1ad)]();}function getSecure(){const _0x318405=_0x1d511c;return dbSecure[_0x318405(0x1f6)](_0x318405(0x1ca))['value']()||{};}function updateTimeshift(_0x58d437){const _0x21cf2b=_0x1d511c;let _0xd4130f=dbConfig[_0x21cf2b(0x1f6)](_0x21cf2b(0x1fa))[_0x21cf2b(0x291)]({'botID':botID})['value']();_0xd4130f&&dbConfig[_0x21cf2b(0x1f6)](_0x21cf2b(0x1fa))[_0x21cf2b(0x291)]({'botID':botID})[_0x21cf2b(0x252)]({'timeshift':_0x58d437})[_0x21cf2b(0x2b0)](),config[_0x21cf2b(0x277)]=_0x58d437,proxyEmit(_0x21cf2b(0x1af),emittedConfiguration());}function updateOnepagemode(_0x2d234e){const _0x2960f8=_0x1d511c;let _0x1472ef=dbConfig['get'](_0x2960f8(0x1fa))[_0x2960f8(0x291)]({'botID':botID})[_0x2960f8(0x1ad)]();_0x1472ef&&dbConfig[_0x2960f8(0x1f6)](_0x2960f8(0x1fa))['find']({'botID':botID})['assign']({'onepagemode':_0x2d234e})[_0x2960f8(0x2b0)](),config[_0x2960f8(0x235)]=_0x2d234e,proxyEmit(_0x2960f8(0x1af),emittedConfiguration());}function updateMarketcapApi(_0x2daa8a){const _0x5e4d67=_0x1d511c,_0x53ee41=_0x2daa8a?!![]:![];let _0x3c0961=dbConfig[_0x5e4d67(0x1f6)]('bot')['find']({'botID':botID})['value']();_0x3c0961&&dbConfig['get'](_0x5e4d67(0x1fa))[_0x5e4d67(0x291)]({'botID':botID})['assign']({'marketcapApi':_0x53ee41})[_0x5e4d67(0x2b0)](),config[_0x5e4d67(0x17f)]=_0x53ee41,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x311bf4){const _0x440545=_0x1d511c;logger[_0x440545(0x283)](_0x440545(0x2d2));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1838d6=![],_0x259f0b=![],_0x429b16=[];_0x311bf4['portfolio']['forEach'](_0x1c10f0=>{const _0x5ec365=_0x440545;if(!_0x1c10f0[_0x5ec365(0x226)]&&_0x1c10f0[_0x5ec365(0x1d2)]!=_0x311bf4[_0x5ec365(0x2a9)])_0x429b16[_0x5ec365(0x1b5)](_0x1c10f0['symbol']);}),_0x429b16[_0x440545(0x2d6)](_0xea3f52=>{const _0x2e2346=_0x440545,_0x23889e=currentCoins[_0x2e2346(0x291)](_0x11fe8b=>_0x11fe8b[_0x2e2346(0x1cb)]==_0xea3f52);!_0x23889e&&(_0x1838d6=!![]);}),currentCoins[_0x440545(0x2d6)](_0x4d1929=>{const _0x575755=_0x440545;if(_0x4d1929[_0x575755(0x1d2)]!=config[_0x575755(0x2a9)]){const _0x422463=_0x429b16[_0x575755(0x291)](_0x21b0ac=>_0x21b0ac==_0x4d1929[_0x575755(0x1cb)]);!_0x422463&&(_0x1838d6=!![]);}}),_0x311bf4[_0x440545(0x1ec)][_0x440545(0x2d6)](_0x326bf7=>{const _0x10947e=_0x440545,_0x4b22a1=config[_0x10947e(0x1ec)][_0x10947e(0x291)](_0x141b18=>_0x141b18['coin']==_0x326bf7[_0x10947e(0x1d2)]);if(_0x4b22a1&&_0x326bf7['offset']!=_0x4b22a1[_0x10947e(0x240)])_0x259f0b=!![];});let _0x48a0a7=dbConfig[_0x440545(0x1f6)]('bot')[_0x440545(0x291)]({'botID':botID})[_0x440545(0x1ad)]();_0x311bf4={..._0x311bf4,'apiKey':crypt['decrypt'](secure['privateKey'],_0x311bf4[_0x440545(0x2d3)])['message'],'apiSecret':crypt[_0x440545(0x1c4)](secure['privateKey'],_0x311bf4['apiSecret'])[_0x440545(0x258)]};_0x311bf4[_0x440545(0x24d)]&&(_0x311bf4['apiPassword']=crypt[_0x440545(0x1c4)](secure['privateKey'],_0x311bf4[_0x440545(0x24d)])[_0x440545(0x258)]);let _0x22e10e=![];if(_0x48a0a7){_0x311bf4['apiKey']==_0x440545(0x2ef)?_0x311bf4[_0x440545(0x2d3)]=config[_0x440545(0x2d3)]:_0x22e10e=!![];_0x311bf4[_0x440545(0x1a3)]==_0x440545(0x2ef)?_0x311bf4[_0x440545(0x1a3)]=config[_0x440545(0x1a3)]:_0x22e10e=!![];if(_0x311bf4[_0x440545(0x24d)]==_0x440545(0x2ef))_0x311bf4[_0x440545(0x24d)]=config['apiPassword'];else{if(_0x311bf4[_0x440545(0x24d)])_0x22e10e=!![];}dbConfig[_0x440545(0x1f6)](_0x440545(0x1fa))[_0x440545(0x291)]({'botID':botID})[_0x440545(0x252)](_0x311bf4)[_0x440545(0x2b0)]();}else dbConfig['get'](_0x440545(0x1fa))[_0x440545(0x1b5)](_0x311bf4)['write'](),_0x22e10e=!![],process[_0x440545(0x2be)]({'status':_0x440545(0x205),'live':'running'},_0x3f4ac4=>{});process[_0x440545(0x2be)]({'botname':_0x311bf4[_0x440545(0x19d)]},_0xc1e5b8=>{}),config={..._0x311bf4},updateBotManager(),proxyEmit(_0x440545(0x2bc)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x22e10e)!_0x48a0a7?await reset(!![]):getBalances();else _0x1838d6||_0x259f0b?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x3fe9c7){const _0x2c2b33=_0x1d511c,_0x472a16={...config,'headless':_0x3fe9c7[_0x2c2b33(0x1b9)]};let _0x474678=dbConfig['get']('bot')['find']({'botID':botID})[_0x2c2b33(0x1ad)]();_0x474678&&dbConfig['get'](_0x2c2b33(0x1fa))[_0x2c2b33(0x291)]({'botID':botID})[_0x2c2b33(0x252)](_0x472a16)[_0x2c2b33(0x2b0)](),config={..._0x472a16},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x2d1a98){const _0xbe5a2a=_0x1d511c,_0x2c62e6={...config,'fiat':_0x2d1a98};let _0x784c3a=dbConfig[_0xbe5a2a(0x1f6)](_0xbe5a2a(0x1fa))[_0xbe5a2a(0x291)]({'botID':botID})[_0xbe5a2a(0x1ad)]();_0x784c3a&&dbConfig[_0xbe5a2a(0x1f6)](_0xbe5a2a(0x1fa))[_0xbe5a2a(0x291)]({'botID':botID})['assign'](_0x2c62e6)[_0xbe5a2a(0x2b0)](),config={..._0x2c62e6},proxyEmit(_0xbe5a2a(0x1af),emittedConfiguration());}function resetHistory(){const _0x5c60ee=_0x1d511c;logger[_0x5c60ee(0x180)](_0x5c60ee(0x322));try{if(fs[_0x5c60ee(0x1c3)](path[_0x5c60ee(0x26c)](configpath,_0x5c60ee(0x21a)+botID+'-events.json')))fs['unlinkSync'](path[_0x5c60ee(0x26c)](configpath,_0x5c60ee(0x21a)+botID+_0x5c60ee(0x269)));if(fs[_0x5c60ee(0x1c3)](path[_0x5c60ee(0x26c)](configpath,_0x5c60ee(0x21a)+botID+'-performance.json')))fs[_0x5c60ee(0x1c7)](path[_0x5c60ee(0x26c)](configpath,_0x5c60ee(0x21a)+botID+_0x5c60ee(0x26b)));if(fs[_0x5c60ee(0x1c3)](path['join'](configpath,_0x5c60ee(0x21a)+botID+_0x5c60ee(0x24c))))fs[_0x5c60ee(0x1c7)](path[_0x5c60ee(0x26c)](configpath,'bot-'+botID+_0x5c60ee(0x24c)));}catch(_0x643ba0){if(_0x643ba0)logger['full'](_0x5c60ee(0x2d9),_0x643ba0);}const _0x2655f2=getDate();let _0x50f323=[];currentCoins[_0x5c60ee(0x2d6)](_0x28c039=>{const _0x32e21b=_0x5c60ee;_0x50f323[_0x32e21b(0x1b5)]({'coin':_0x28c039[_0x32e21b(0x1d2)],'number':_0x28c039[_0x32e21b(0x242)],'price':_0x28c039[_0x32e21b(0x16f)]});});let _0x2ce558=dbConfig['get'](_0x5c60ee(0x1fa))[_0x5c60ee(0x291)]({'botID':botID})[_0x5c60ee(0x1ad)]();_0x2ce558&&(dbConfig[_0x5c60ee(0x1f6)](_0x5c60ee(0x1fa))['find']({'botID':botID})[_0x5c60ee(0x252)]({'liquidity':[{'date':_0x2655f2,'changes':_0x50f323}]})[_0x5c60ee(0x2b0)](),config[_0x5c60ee(0x1e0)]=[]),restartBot(!![]);}function noslash(_0x4613de){const _0x2e1f5b=_0x1d511c;return _0x4613de[_0x2e1f5b(0x2a7)]('/','');}function updateHighestFee(_0x5ec30c){const _0x3b286b=_0x1d511c;if(_0x5ec30c['reverse']){let _0x37f143={'filled':_0x5ec30c[_0x3b286b(0x218)]*_0x5ec30c[_0x3b286b(0x309)],'amount':_0x5ec30c[_0x3b286b(0x218)]*_0x5ec30c['price'],'side':_0x5ec30c['side']=='sell'?'buy':_0x3b286b(0x2b8),'price':0x1/_0x5ec30c[_0x3b286b(0x309)]};_0x5ec30c={..._0x5ec30c,..._0x37f143};}const _0x5408d1=defaultFee*_0x5ec30c['filled']*_0x5ec30c[_0x3b286b(0x309)];lastFees[_0x3b286b(0x29e)]['length']===0x14&&lastFees['recent20'][_0x3b286b(0x1bf)](),lastFees[_0x3b286b(0x29e)]['push'](_0x5408d1),lastFees['highest']=Math[_0x3b286b(0x179)](...lastFees[_0x3b286b(0x29e)]);}async function updateNumberCoinsCcxt(_0x7e9b8d){const _0x2749b1=_0x1d511c;logger[_0x2749b1(0x283)](_0x2749b1(0x19b)+_0x7e9b8d['symbol']+_0x2749b1(0x1ea)+_0x7e9b8d[_0x2749b1(0x228)]+_0x2749b1(0x1ea)+_0x7e9b8d[_0x2749b1(0x218)]+_0x2749b1(0x255)+_0x7e9b8d[_0x2749b1(0x1b2)]+_0x2749b1(0x1ea)+_0x7e9b8d['id']);let _0x223a45=_0x7e9b8d['status'],_0x35b6e4=![];currentCoins[_0x2749b1(0x2d6)](_0x35377d=>{const _0x523c3b=_0x2749b1;_0x35377d[_0x523c3b(0x1cb)]==_0x7e9b8d[_0x523c3b(0x1cb)]&&(_0x35b6e4=!![]);});if(!_0x35b6e4)return;const _0x54b8bc=currentCoins[_0x2749b1(0x291)](_0x197b56=>_0x197b56[_0x2749b1(0x1cb)]==_0x7e9b8d[_0x2749b1(0x1cb)]),_0x5898b6=_0x3c922a=>{const _0x16fb00=_0x2749b1;if(_0x54b8bc)_0x54b8bc[_0x16fb00(0x1dd)]=_0x3c922a;};let _0x39eaf7=![];for(const _0x200015 of lastOrders){const _0x570e4a=0x64,_0x2f68ae=0x1388;let _0x457b55=0x0;while(!_0x200015[_0x2749b1(0x2b6)]&&_0x457b55*_0x570e4a<_0x2f68ae){_0x457b55++,await sleep(_0x570e4a);}if(_0x457b55>0x0)logger[_0x2749b1(0x283)]('Waited\x20'+_0x457b55*_0x570e4a/0x3e8+_0x2749b1(0x318));_0x200015[_0x2749b1(0x2b6)]==_0x7e9b8d['id']&&(_0x39eaf7=!![]);}if(_0x223a45=='open'){_0x5898b6(_0x2749b1(0x2ae));if(_0x7e9b8d[_0x2749b1(0x218)]>0x0){if(_0x39eaf7){setBlockTransactionDetection(!![]),logger[_0x2749b1(0x283)](_0x2749b1(0x23e)+_0x7e9b8d['id']);const _0x24f677=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x24f677,setBlockTransactionDetection(![]);}else logger[_0x2749b1(0x283)](_0x2749b1(0x2f3)+_0x7e9b8d['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x223a45==_0x2749b1(0x302)){_0x5898b6(_0x2749b1(0x302));const _0x280dca=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x280dca,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x223a45==_0x2749b1(0x2a4)){if(lastOrders)for(const _0x465908 of lastOrders){if(_0x465908[_0x2749b1(0x2b6)]==_0x7e9b8d['id']){logger[_0x2749b1(0x283)](_0x2749b1(0x20b)+_0x7e9b8d['id']),_0x39eaf7=!![];if(_0x465908[_0x2749b1(0x218)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x2749b1(0x1b1)+_0x7e9b8d['id']);if(_0x7e9b8d[_0x2749b1(0x1a0)])_0x465908['price']=_0x7e9b8d[_0x2749b1(0x1a0)];else{if(_0x7e9b8d[_0x2749b1(0x309)])_0x465908['price']=_0x7e9b8d[_0x2749b1(0x309)];else{}}_0x465908['filled']=_0x7e9b8d[_0x2749b1(0x218)],updateHighestFee(_0x465908),_0x5898b6(_0x2749b1(0x218)),await validateOrders();if(lockOrders==ORDERS[_0x2749b1(0x256)]){const _0x5300a8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5300a8,setBlockTransactionDetection(![]);}_0x465908[_0x2749b1(0x2b5)]={'currency':_0x7e9b8d[_0x2749b1(0x2b5)]?_0x7e9b8d[_0x2749b1(0x2b5)]['currency']:null,'cost':_0x7e9b8d[_0x2749b1(0x2b5)]?_0x7e9b8d[_0x2749b1(0x2b5)][_0x2749b1(0x2a2)]:0x0},await updateCoinResults(_0x465908);}}}!_0x39eaf7&&(logger['debug'](_0x2749b1(0x27a)+_0x7e9b8d['id']),_0x5898b6(_0x2749b1(0x218)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x28ca97=JSON['parse'](lastBalances[_0x2749b1(0x1ec)]);const _0x223bda=_0x28ca97[_0x2749b1(0x291)](_0x3d9d5e=>_0x3d9d5e['symbol']==_0x7e9b8d[_0x2749b1(0x1cb)]);if(_0x223bda){if(_0x223a45=='open')_0x223bda[_0x2749b1(0x1dd)]=_0x223bda[_0x2749b1(0x1dd)]==_0x2749b1(0x218)?_0x2749b1(0x218):'open';else{if(_0x223a45==_0x2749b1(0x302))_0x223bda['orderstatus']=_0x223bda[_0x2749b1(0x1dd)]==_0x2749b1(0x218)?_0x2749b1(0x218):_0x2749b1(0x302);else _0x223a45==_0x2749b1(0x2a4)&&(_0x223bda['orderstatus']=_0x2749b1(0x218));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2749b1(0x241)](_0x28ca97)},proxyEmit(_0x2749b1(0x26d),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x48197a=_0x1d511c;await getOpenOrders();let _0x4f93a0=![];currentCoins[_0x48197a(0x2d6)](_0x19e5bf=>{const _0x46cdda=_0x48197a;_0x4f93a0=allOpenOrders[_0x46cdda(0x291)](_0xcc9fe3=>_0xcc9fe3[_0x46cdda(0x1cb)]==_0x19e5bf[_0x46cdda(0x1cb)]),_0x19e5bf['orderstatus']=_0x4f93a0?_0x46cdda(0x2ae):'none';});}async function getCoins(_0x533718=0x0,_0x1ef0aa=!![],_0x8775ae=config['basecoin']){const _0x2fe62b=_0x1d511c;let _0x58aeec,_0x16dd37=[],_0x2780cb=[],_0x6b8578=[];if(_0x533718)await sleep(_0x533718);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x58aeec=await exchange[_0x2fe62b(0x1c2)](),mybalances=_0x58aeec[_0x2fe62b(0x295)];for(const [_0x64d755,_0x3aef43]of Object[_0x2fe62b(0x264)](mybalances)){_0x6b8578[_0x2fe62b(0x1b5)](_0x64d755);}config[_0x2fe62b(0x1ec)][_0x2fe62b(0x2d6)](_0x1520ae=>{const _0x39665f=_0x2fe62b;!_0x6b8578[_0x39665f(0x28e)](_0x1520ae['coin'])&&(mybalances[_0x1520ae['coin']]=0x0);});if(_0x8775ae=='')for(const [_0x15fce3,_0x1a8d1e]of Object[_0x2fe62b(0x264)](mybalances)){_0x1a8d1e!=0x0&&_0x16dd37[_0x2fe62b(0x1b5)]({'coin':_0x15fce3});}else for(const [_0x36834a,_0x37d4fc]of Object[_0x2fe62b(0x264)](mybalances)){const _0x18c794=config['portfolio']['find'](_0x37d996=>_0x37d996['coin']==_0x36834a),_0x34f404=_0x36834a+'/'+_0x8775ae,_0x2d7bde=_0x8775ae+'/'+_0x36834a,_0xc15fd0=currentCoins[_0x2fe62b(0x291)](_0x19c5be=>_0x19c5be[_0x2fe62b(0x1d2)]==_0x36834a);if((_0x37d4fc!=0x0||_0x18c794)&&(allSymbols[_0x2fe62b(0x28e)](_0x34f404)||_0x36834a==_0x8775ae))_0xc15fd0?_0x16dd37['push']({..._0xc15fd0,'number':Math[_0x2fe62b(0x179)](_0x37d4fc+(_0x18c794&&_0x18c794[_0x2fe62b(0x240)]||0x0),0x0)}):_0x16dd37[_0x2fe62b(0x1b5)]({'coin':_0x36834a,'symbol':_0x34f404,'reverse':![],'number':Math[_0x2fe62b(0x179)](_0x37d4fc+(_0x18c794&&_0x18c794['offset']||0x0),0x0),'orderstatus':_0x2fe62b(0x219)});else{if((_0x37d4fc!=0x0||_0x18c794)&&allSymbols[_0x2fe62b(0x28e)](_0x2d7bde))_0xc15fd0?_0x16dd37[_0x2fe62b(0x1b5)]({..._0xc15fd0,'number':Math[_0x2fe62b(0x179)](_0x37d4fc+(_0x18c794&&_0x18c794['offset']||0x0),0x0)}):_0x16dd37[_0x2fe62b(0x1b5)]({'coin':_0x36834a,'symbol':_0x2d7bde,'reverse':!![],'number':Math[_0x2fe62b(0x179)](_0x37d4fc+(_0x18c794&&_0x18c794['offset']||0x0),0x0),'orderstatus':_0x2fe62b(0x219)});else _0x18c794&&_0x16dd37[_0x2fe62b(0x1b5)]({'coin':_0x18c794[_0x2fe62b(0x1d2)],'symbol':_0x18c794['symbol'],'reverse':_0x18c794['reverse'],'number':0x0,'orderstatus':_0x2fe62b(0x219)});}}}catch(_0x28088f){if(!_0x1ef0aa)handleErrorNoStop(_0x28088f,'getCoins()');else await handleError(_0x28088f,'getCoins()');}return _0x16dd37[_0x2fe62b(0x2d4)]((_0x1d2326,_0x43ca2c)=>_0x1d2326[_0x2fe62b(0x24a)]<_0x43ca2c['delta']?0x1:_0x43ca2c[_0x2fe62b(0x24a)]<_0x1d2326[_0x2fe62b(0x24a)]?-0x1:0x0),_0x2780cb=cloneDeep(_0x16dd37),_0x16dd37=_0x16dd37[_0x2fe62b(0x1c9)](_0x1c8604=>{const _0x31201e=_0x2fe62b,_0x1d27e6=config['portfolio'][_0x31201e(0x291)](_0x401ae0=>_0x401ae0[_0x31201e(0x1d2)]==_0x1c8604[_0x31201e(0x1d2)]);return _0x1d27e6&&!_0x1d27e6[_0x31201e(0x226)];}),[_0x16dd37,_0x2780cb];}async function getCoinNumber(_0x301720){const _0x22e078=_0x1d511c;let _0x519d62;try{const _0x18f1e8=await exchange[_0x22e078(0x1c2)]();_0x519d62=_0x18f1e8[_0x22e078(0x295)][_0x301720];}catch(_0x1b18d3){await handleError(_0x1b18d3,'getCoinNumber()');}return _0x519d62;}async function getOpenOrders(){const _0x3f26dd=_0x1d511c;let _0x4ee838;allOpenOrders=[];try{for(const _0x504097 of config[_0x3f26dd(0x1ec)]){!_0x504097[_0x3f26dd(0x226)]&&_0x504097[_0x3f26dd(0x1d2)]!=config[_0x3f26dd(0x2a9)]&&(_0x4ee838=await exchange[_0x3f26dd(0x21f)](_0x504097['symbol']),_0x4ee838[_0x3f26dd(0x212)]>0x0&&allOpenOrders[_0x3f26dd(0x1b5)](_0x4ee838[0x0]));}}catch(_0x379cec){await handleError(_0x379cec,'getOpenOrders()');}}async function handleOpenOrders(_0x1864bc=0x0){const _0x12d5b2=_0x1d511c;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x12d5b2(0x256)]&&allOrdersPlaced&&(_0x1864bc==0x0?(logger[_0x12d5b2(0x283)](_0x12d5b2(0x17c)),_0x1864bc++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x12d5b2(0x283)](_0x12d5b2(0x274)),validateOrders(_0x12d5b2(0x2d1))));}async function testAPI(_0xe65862){const _0x7f91dd=_0x1d511c,_0x5367a7=ccxt[_0x7f91dd(0x254)][_0xe65862[_0x7f91dd(0x1ee)]['toLowerCase']()],_0x293bb4=new _0x5367a7({'apiKey':_0xe65862[_0x7f91dd(0x2d3)],'secret':_0xe65862[_0x7f91dd(0x1a3)],'options':{'defaultType':_0x7f91dd(0x1aa)}});if(_0xe65862[_0x7f91dd(0x24d)])_0x293bb4[_0x7f91dd(0x1fc)]=_0xe65862['apiPassword'];try{await _0x293bb4[_0x7f91dd(0x1c2)]();}catch(_0x70b610){logger[_0x7f91dd(0x283)](_0x7f91dd(0x282),_0x70b610['toString']());throw _0x70b610;}}function cloneDeep(_0x1da599){const _0x141970=_0x1d511c;return JSON[_0x141970(0x2dc)](JSON[_0x141970(0x241)](_0x1da599));}async function getPortfolio(_0x1dc7d2){const _0xbe240c=_0x1d511c;let _0x5afee1=[],_0x1d8215=[],_0x932e35=[],_0x191153;if(_0x1dc7d2[_0xbe240c(0x2d3)]!==_0xbe240c(0x2ef)||_0x1dc7d2['apiSecret']!=='************'||_0x1dc7d2[_0xbe240c(0x24d)]&&_0x1dc7d2[_0xbe240c(0x24d)]!=='************'){if(config['exchange']){if(_0x1dc7d2[_0xbe240c(0x2d3)]==_0xbe240c(0x2ef))_0x1dc7d2['apiKey']=config[_0xbe240c(0x2d3)];if(_0x1dc7d2[_0xbe240c(0x1a3)]=='************')_0x1dc7d2['apiSecret']=config[_0xbe240c(0x1a3)];if(_0x1dc7d2['apiPassword']==_0xbe240c(0x2ef))_0x1dc7d2[_0xbe240c(0x24d)]=config[_0xbe240c(0x24d)];}try{await testAPI(_0x1dc7d2);}catch(_0x2df09c){if(_0x2df09c[_0xbe240c(0x1b4)]()[_0xbe240c(0x28e)](_0xbe240c(0x321))){logHistory(_0xbe240c(0x19a),_0xbe240c(0x249)),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0xbe240c(0x31a)),logger[_0xbe240c(0x283)](_0xbe240c(0x2b3),_0x2df09c),proxyEmit(_0xbe240c(0x2c3),![]);return;}}exchange?updateExchange(_0x1dc7d2[_0xbe240c(0x2d3)],_0x1dc7d2[_0xbe240c(0x1a3)],_0x1dc7d2['apiPassword']):await initExchange(_0x1dc7d2[_0xbe240c(0x1ee)],_0x1dc7d2[_0xbe240c(0x2d3)],_0x1dc7d2[_0xbe240c(0x1a3)],_0x1dc7d2['apiPassword']);await loadSymbols();const _0x2a0ce3=await getCoins(0x0,![],_0x1dc7d2[_0xbe240c(0x2a9)]);_0x932e35=cloneDeep(_0x2a0ce3[0x1]);}else{const _0x100624=await getCoins();_0x932e35=cloneDeep(_0x100624[0x1]);}if(_0x1dc7d2['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit(_0xbe240c(0x18c),_0x932e35);else{_0x932e35[_0xbe240c(0x2d6)](_0x5a304e=>{const _0x4b1563=_0xbe240c;if(_0x5a304e[_0x4b1563(0x1d2)]!=_0x1dc7d2[_0x4b1563(0x2a9)]&&allSymbols['includes'](_0x5a304e[_0x4b1563(0x1cb)]))_0x5afee1[_0x4b1563(0x1b5)](_0x5a304e[_0x4b1563(0x1cb)]);});if(_0x5afee1[_0xbe240c(0x212)]==0x0)logHistory('error',_0xbe240c(0x20d));else{try{_0x1d8215=await getTickers(_0x5afee1);}catch(_0x5f0f02){logHistory(_0xbe240c(0x19a),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0xbe240c(0x283)]('Error\x20details\x20(1):',_0x5f0f02),proxyEmit('portfolio1',![]);return;}_0x932e35[_0xbe240c(0x2d6)](_0x1c27e8=>{const _0x1efc99=_0xbe240c;_0x1c27e8[_0x1efc99(0x1d2)]!=_0x1dc7d2['basecoin']?_0x1d8215[_0x1c27e8['symbol']]?_0x191153=_0x1c27e8[_0x1efc99(0x247)]?0x1/_0x1d8215[_0x1c27e8[_0x1efc99(0x1cb)]]['last']:_0x1d8215[_0x1c27e8[_0x1efc99(0x1cb)]]['last']:_0x191153=0x0:_0x191153=0x1,_0x1c27e8[_0x1efc99(0x309)]=formatResult(_0x191153,0x8);}),await getMarketCap(_0x932e35),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x932e35);}}}function truncateTradeAmount(_0x19f24a,_0x3fc135){const _0x3f72d8=_0x1d511c;let _0x56b49b=0x0;try{_0x56b49b=exchange[_0x3f72d8(0x1e9)](_0x19f24a,_0x3fc135);}catch(_0x42482d){}return _0x56b49b;}function checkMinimums(_0x1cdeb5){const _0x5c42ed=_0x1d511c;let _0x3c2a08=!![];const _0x47f1bb=!_0x1cdeb5[_0x5c42ed(0x247)]?markets[_0x1cdeb5[_0x5c42ed(0x1cb)]][_0x5c42ed(0x26f)][_0x5c42ed(0x1b2)][_0x5c42ed(0x2a6)]:markets[_0x1cdeb5[_0x5c42ed(0x1cb)]][_0x5c42ed(0x26f)][_0x5c42ed(0x2a2)][_0x5c42ed(0x2a6)],_0x124c74=!_0x1cdeb5['reverse']?markets[_0x1cdeb5[_0x5c42ed(0x1cb)]][_0x5c42ed(0x26f)][_0x5c42ed(0x2a2)][_0x5c42ed(0x2a6)]:markets[_0x1cdeb5[_0x5c42ed(0x1cb)]][_0x5c42ed(0x26f)][_0x5c42ed(0x1b2)][_0x5c42ed(0x2a6)],_0x4547ee=truncateTradeAmount(_0x1cdeb5[_0x5c42ed(0x1cb)],_0x1cdeb5[_0x5c42ed(0x18f)]);_0x1cdeb5[_0x5c42ed(0x18f)]=_0x4547ee;if(Math['abs'](_0x4547ee)<_0x47f1bb)_0x3c2a08=![];if(Math[_0x5c42ed(0x300)](_0x4547ee)*_0x1cdeb5['last']<_0x124c74)_0x3c2a08=![];if(_0x1cdeb5[_0x5c42ed(0x24b)]==_0x5c42ed(0x2b8)){let _0x408063=config[_0x5c42ed(0x1ec)]['find'](_0x29e89f=>_0x29e89f[_0x5c42ed(0x1d2)]==_0x1cdeb5[_0x5c42ed(0x1d2)]);if(_0x408063[_0x5c42ed(0x240)]>0x0){if(Math[_0x5c42ed(0x300)](_0x4547ee)>_0x1cdeb5[_0x5c42ed(0x242)]-_0x408063['offset'])_0x3c2a08=![];}else{if(Math[_0x5c42ed(0x300)](_0x4547ee)>_0x1cdeb5['number'])_0x3c2a08=![];}}if(_0x1cdeb5[_0x5c42ed(0x24b)]==_0x5c42ed(0x24f)){let _0x233051=config[_0x5c42ed(0x1ec)][_0x5c42ed(0x291)](_0x8ff4e4=>_0x8ff4e4[_0x5c42ed(0x1d2)]==config[_0x5c42ed(0x2a9)]),_0x597527=currentCoins[_0x5c42ed(0x291)](_0x2c4ad5=>_0x2c4ad5[_0x5c42ed(0x1d2)]==config['basecoin']);if(_0x233051[_0x5c42ed(0x240)]>0x0){if(Math[_0x5c42ed(0x300)](_0x4547ee)*_0x1cdeb5[_0x5c42ed(0x16f)]>_0x597527[_0x5c42ed(0x242)]-_0x233051[_0x5c42ed(0x240)])_0x3c2a08=![];}else{if(Math[_0x5c42ed(0x300)](_0x4547ee)*_0x1cdeb5[_0x5c42ed(0x16f)]>_0x597527[_0x5c42ed(0x242)])_0x3c2a08=![];}}return _0x3c2a08;}async function getBalances(_0x4b43a0=!![]){const _0x53fdd3=_0x1d511c;let _0x226d9a=0x0,_0x4ce590;const _0x13d0f7=config['threshold'];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x53fdd3(0x2d6)](_0x32eaf5=>{const _0x3bbd21=_0x53fdd3;if(_0x32eaf5[_0x3bbd21(0x1d2)]!=config[_0x3bbd21(0x2a9)]){let _0x2f0f5c=gTicker[noslash(_0x32eaf5[_0x3bbd21(0x1cb)])];_0x4ce590=_0x32eaf5[_0x3bbd21(0x247)]?0x1/_0x2f0f5c:_0x2f0f5c;}else _0x4ce590=0x1;let _0x4401e5=_0x32eaf5[_0x3bbd21(0x242)]*_0x4ce590;_0x226d9a+=_0x4401e5,_0x32eaf5['last']=formatResult(Number(_0x4ce590),0x8),_0x32eaf5[_0x3bbd21(0x1ad)]=_0x4401e5;}),currentCoins[_0x53fdd3(0x2d6)](_0x29ccc0=>{const _0x13d2f7=_0x53fdd3;let _0x146714=config[_0x13d2f7(0x1ec)][_0x13d2f7(0x291)](_0x19509b=>_0x19509b['coin']==_0x29ccc0[_0x13d2f7(0x1d2)]),_0x503451=Number(_0x146714[_0x13d2f7(0x172)]),_0x2b8e20=_0x29ccc0['value']/_0x226d9a*0x64,_0x6374ec=_0x503451*_0x226d9a/0x64/_0x29ccc0[_0x13d2f7(0x16f)]-_0x29ccc0[_0x13d2f7(0x242)];_0x29ccc0[_0x13d2f7(0x172)]=formatResult(_0x2b8e20,0x3),_0x29ccc0[_0x13d2f7(0x2fd)]=formatResult(_0x503451,0x3),_0x29ccc0[_0x13d2f7(0x18f)]=formatResult(_0x6374ec,0x8),_0x29ccc0[_0x13d2f7(0x24b)]='',_0x29ccc0[_0x13d2f7(0x204)]=![];if(_0x29ccc0[_0x13d2f7(0x1d2)]!=config['basecoin']){if(_0x29ccc0['distribution']>_0x503451)_0x29ccc0[_0x13d2f7(0x24b)]='sell',_0x29ccc0[_0x13d2f7(0x204)]=checkMinimums(_0x29ccc0);else _0x29ccc0['distribution']<_0x503451&&(_0x29ccc0[_0x13d2f7(0x24b)]=_0x13d2f7(0x24f),_0x29ccc0[_0x13d2f7(0x204)]=checkMinimums(_0x29ccc0));}_0x29ccc0[_0x13d2f7(0x24a)]=_0x29ccc0[_0x13d2f7(0x172)]/_0x29ccc0[_0x13d2f7(0x2fd)]-0x1;if(_0x29ccc0[_0x13d2f7(0x1dd)]=='filled'||_0x29ccc0[_0x13d2f7(0x1dd)]==_0x13d2f7(0x302))_0x29ccc0[_0x13d2f7(0x1dd)]='none';}),currentCoins[_0x53fdd3(0x2d4)]((_0xea2af,_0x5c535a)=>_0xea2af[_0x53fdd3(0x24a)]<_0x5c535a[_0x53fdd3(0x24a)]?0x1:_0x5c535a[_0x53fdd3(0x24a)]<_0xea2af['delta']?-0x1:0x0);const _0x268f50=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x268f50[_0x53fdd3(0x2c7)],'usd':_0x268f50[_0x53fdd3(0x250)],'portfolio':JSON[_0x53fdd3(0x241)](currentCoins),'threshold':_0x13d0f7},proxyEmit(_0x53fdd3(0x26d),{'serverversion':serverversion,'balances':lastBalances});if(_0x4b43a0){if(config[_0x53fdd3(0x1b9)])headlessMode({'portfolio':currentCoins,'threshold':_0x13d0f7});else{if(lockOrders==ORDERS[_0x53fdd3(0x1a9)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x13d0f7});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5db867=getNormalizedPerformance();getStartingBalances(_0x5db867),emitPerformance(_0x5db867);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3a19b7=_0x1d511c;if(!lastBalances)return;let _0x5bf180=[],_0x414381,_0x33d711=JSON[_0x3a19b7(0x2dc)](lastBalances[_0x3a19b7(0x1ec)]);_0x33d711[_0x3a19b7(0x2d4)]((_0x295643,_0x15e289)=>_0x295643[_0x3a19b7(0x1d2)]>_0x15e289[_0x3a19b7(0x1d2)]?0x1:_0x15e289['coin']>_0x295643[_0x3a19b7(0x1d2)]?-0x1:0x0),_0x33d711[_0x3a19b7(0x2d6)](_0x34af56=>{const _0x121cc1=_0x3a19b7;let _0x2d46ad={'coin':_0x34af56['coin'],'number':_0x34af56[_0x121cc1(0x242)],'price':_0x34af56['last']};_0x5bf180[_0x121cc1(0x1b5)](_0x2d46ad);});const _0xd32b04=await getFiat();_0x414381={'date':lastBalances[_0x3a19b7(0x1e1)]['split']('\x20')[0x0],'eur':_0xd32b04['eur'],'usd':_0xd32b04[_0x3a19b7(0x250)],'coins':_0x5bf180};let _0x34c827=dbPerformance[_0x3a19b7(0x1f6)](_0x3a19b7(0x2f5))[_0x3a19b7(0x291)]({'date':_0x414381[_0x3a19b7(0x182)]})[_0x3a19b7(0x1ad)]();_0x34c827?_0x414381['date']!=config[_0x3a19b7(0x27e)]&&dbPerformance[_0x3a19b7(0x1f6)](_0x3a19b7(0x2f5))[_0x3a19b7(0x291)]({'date':_0x414381['date']})['assign'](_0x414381)[_0x3a19b7(0x2b0)]():dbPerformance[_0x3a19b7(0x1f6)]('data')['push'](_0x414381)[_0x3a19b7(0x2b0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xe6cd7b=_0x1d511c;let _0x5eaeb1=[];if(dbPerformance[_0xe6cd7b(0x299)](_0xe6cd7b(0x2f5))['value']()){let _0x2e6c17=dbPerformance[_0xe6cd7b(0x1f6)](_0xe6cd7b(0x2f5))[_0xe6cd7b(0x30a)]()[_0xe6cd7b(0x1c9)](_0x126946=>{const _0x4d5562=_0xe6cd7b;if(_0x126946[_0x4d5562(0x171)]['length']==0x0)return![];else return!![];})[_0xe6cd7b(0x2fc)](_0xe6cd7b(0x182))[_0xe6cd7b(0x1ad)](),_0x43fa6e=[...config[_0xe6cd7b(0x1e0)]];_0x43fa6e[_0xe6cd7b(0x2d4)]((_0x289dc5,_0x180c3b)=>_0x289dc5[_0xe6cd7b(0x182)]>_0x180c3b[_0xe6cd7b(0x182)]?-0x1:_0x180c3b[_0xe6cd7b(0x182)]>_0x289dc5[_0xe6cd7b(0x182)]?0x1:0x0);let _0x301fda=0x1,_0x43d3fb=[],_0x4f764a=0x0;_0x2e6c17[_0xe6cd7b(0x308)]()[_0xe6cd7b(0x247)]()['forEach']((_0x208e4c,_0x368652)=>{const _0x11ec26=_0xe6cd7b;if(_0x43fa6e[_0x4f764a]){if(_0x2e6c17[_0x2e6c17[_0x11ec26(0x212)]-_0x368652]&&_0x43fa6e[_0x4f764a][_0x11ec26(0x182)]==_0x2e6c17[_0x2e6c17[_0x11ec26(0x212)]-_0x368652][_0x11ec26(0x182)]){if(_0x368652<_0x2e6c17[_0x11ec26(0x212)]){let _0x14ab94=0x0,_0x358399=0x0;_0x2e6c17[_0x2e6c17[_0x11ec26(0x212)]-_0x368652][_0x11ec26(0x171)][_0x11ec26(0x2d6)](_0x561cb4=>{const _0x55ebe6=_0x11ec26;_0x358399+=_0x561cb4[_0x55ebe6(0x242)]*_0x561cb4['price'];}),_0x43fa6e[_0x4f764a]['changes'][_0x11ec26(0x2d6)](_0x5672d0=>{const _0x5f4e48=_0x11ec26;_0x14ab94+=_0x5672d0['number']*_0x5672d0[_0x5f4e48(0x309)];}),_0x301fda*=_0x14ab94/(_0x358399-_0x14ab94)+0x1;}_0x4f764a++;}}let _0xc480cf=0x0;_0x208e4c['coins']['forEach'](_0x4460b8=>{const _0x14ce5b=_0x11ec26;_0xc480cf+=_0x4460b8[_0x14ce5b(0x242)]*_0x4460b8[_0x14ce5b(0x309)];}),_0x43d3fb[_0x2e6c17[_0x11ec26(0x212)]-_0x368652-0x1]=_0xc480cf*(_0x301fda-0x1);});let _0x17f1c0=[];_0x43fa6e=[...config[_0xe6cd7b(0x1e0)]]||[];let _0x2f2e4a=0x0;_0x4f764a=0x0,_0x2e6c17[_0xe6cd7b(0x2d6)]((_0x1bd088,_0xb8aaf5)=>{const _0x469ce7=_0xe6cd7b;if(_0x43fa6e[_0x4f764a]){const _0x9bf82c=fns[_0x469ce7(0x2dc)](_0x43fa6e[_0x4f764a]['date'],'yyyy/MM/dd',new Date()),_0x2352ea=fns[_0x469ce7(0x2dc)](_0x1bd088[_0x469ce7(0x182)],_0x469ce7(0x21b),new Date());if(fns[_0x469ce7(0x225)](_0x9bf82c,_0x2352ea)){let _0x24d2d4=0x0;_0x43fa6e[_0x4f764a][_0x469ce7(0x275)][_0x469ce7(0x2d6)](_0x4f68c0=>{const _0x26c914=_0x469ce7;!_0x17f1c0[_0x4f68c0[_0x26c914(0x1d2)]]?_0x17f1c0[_0x4f68c0[_0x26c914(0x1d2)]]=_0x4f68c0[_0x26c914(0x242)]:(_0x24d2d4=_0x17f1c0[_0x4f68c0[_0x26c914(0x1d2)]],_0x17f1c0[_0x4f68c0[_0x26c914(0x1d2)]]+=_0x4f68c0[_0x26c914(0x242)]);const _0x5ddfde=_0x1bd088['coins'][_0x26c914(0x291)](_0x2f9e8a=>_0x2f9e8a['coin']==_0x4f68c0[_0x26c914(0x1d2)]);(!_0x5ddfde||_0x5ddfde['number']==0x0)&&(_0x2f2e4a+=(-_0x4f68c0['number']-_0x24d2d4)*_0x4f68c0[_0x26c914(0x309)]);}),_0x4f764a++;}}_0x1bd088['coins'][_0x469ce7(0x2d6)]((_0x124bc1,_0x259101)=>{const _0xb79aff=_0x469ce7;_0x17f1c0[_0x124bc1[_0xb79aff(0x1d2)]]&&(_0x124bc1['initial']=_0x17f1c0[_0x124bc1['coin']]);}),_0x5eaeb1['push']({'date':_0x1bd088[_0x469ce7(0x182)],'eur':_0x1bd088[_0x469ce7(0x2c7)],'usd':_0x1bd088[_0x469ce7(0x250)],'offset':_0x43d3fb[_0xb8aaf5],'netoffset':_0x2f2e4a,'coins':_0x1bd088['coins']});});}return _0x5eaeb1;}function emitPerformance(_0x471a08){const _0x3c2c6c=_0x1d511c;_0x471a08[_0x3c2c6c(0x212)]!==0x0?(proxyEmit(_0x3c2c6c(0x22b),_0x471a08),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5949f8,_0x4aa9d6){const _0xda59c0=_0x1d511c;let _0x2913bc=0x0,_0x339908=0x0,_0x60058f=0x0;_0x5949f8[_0xda59c0(0x171)][_0xda59c0(0x2d6)](_0x550cb7=>{const _0x7e4567=_0xda59c0;_0x2913bc+=_0x550cb7[_0x7e4567(0x242)]*_0x550cb7[_0x7e4567(0x309)];});_0x4aa9d6&&(_0x2913bc+=_0x5949f8['offset']);if(config['basecoin']===_0xda59c0(0x2f1)||config[_0xda59c0(0x2a9)]===_0xda59c0(0x1b6)||config[_0xda59c0(0x2a9)]===_0xda59c0(0x2fb))_0x339908=_0x2913bc*_0x5949f8[_0xda59c0(0x2c7)],_0x60058f=_0x2913bc*_0x5949f8[_0xda59c0(0x250)];else{if(usdBasecoins[_0xda59c0(0x28e)](config[_0xda59c0(0x2a9)]))_0x339908=_0x2913bc*_0x5949f8[_0xda59c0(0x2c7)]/_0x5949f8[_0xda59c0(0x250)],_0x60058f=_0x2913bc;else config['basecoin']===_0xda59c0(0x314)&&(_0x339908=_0x2913bc,_0x60058f=_0x2913bc*_0x5949f8['usd']/_0x5949f8[_0xda59c0(0x2c7)]);}return[_0x2913bc,_0x339908,_0x60058f];}function getKPIs(_0x4c2672,_0x4987c8=_0x1d511c(0x314)){const _0x339af9=_0x1d511c,_0xb71f1c=config[_0x339af9(0x2a9)],_0xcd9043=lastBalances,_0xb13fea=currentCoins,_0x56db21=getNormalizedPerformance(),_0x1e2f0d=_0x4c2672===_0x339af9(0x2a9)?_0xb71f1c:_0x4c2672===_0x339af9(0x1f1)||_0x4c2672===_0x339af9(0x315)?_0x4987c8:_0x339af9(0x2fa)+_0xb71f1c,_0xd662=_0x4c2672==='net-basecoin'?'Net\x20effect':_0x4c2672===_0x339af9(0x315)?_0x339af9(0x2ab):_0x1e2f0d+_0x339af9(0x2a3),_0x304299=_0x4c2672==='net-basecoin'||_0x4c2672===_0x339af9(0x315)?'Net\x20effect':_0x1e2f0d+'\x20change';let _0x1a8f9a=0x0;_0xb13fea[_0x339af9(0x2d6)](_0x12ddcf=>{const _0x32e48d=_0x339af9;_0x1a8f9a+=_0x12ddcf[_0x32e48d(0x242)]*_0x12ddcf[_0x32e48d(0x16f)];});if(_0x4c2672===_0x339af9(0x1f1)||_0x4c2672==='net-fiat'){if(_0xb71f1c===_0x339af9(0x2f1)||_0xb71f1c===_0x339af9(0x1b6)||_0xb71f1c===_0x339af9(0x2fb))_0x1a8f9a=_0x1a8f9a*(_0x4987c8==='EUR'?_0xcd9043['eur']:_0xcd9043[_0x339af9(0x250)]);else{if(usdBasecoins[_0x339af9(0x28e)](_0xb71f1c))_0x1a8f9a=_0x1a8f9a*(_0x4987c8==='EUR'?_0xcd9043[_0x339af9(0x2c7)]/_0xcd9043['usd']:0x1);else _0xb71f1c==='EUR'&&(_0x1a8f9a=_0x1a8f9a*(_0x4987c8===_0x339af9(0x314)?0x1:_0xcd9043[_0x339af9(0x250)]/_0xcd9043[_0x339af9(0x2c7)]));}}let _0x5cef1d;if(_0x1a8f9a!==0x0){if(_0x4c2672===_0x339af9(0x2a9))_0x5cef1d=(_0x1a8f9a/startingBalances[_0x339af9(0x2a9)]-0x1)*0x64;else{if(_0x4987c8===_0x339af9(0x314))_0x5cef1d=(_0x1a8f9a/startingBalances['eur']-0x1)*0x64;else _0x5cef1d=(_0x1a8f9a/startingBalances[_0x339af9(0x250)]-0x1)*0x64;}let _0x8d15f8=0x0;if(startingBalances[_0x339af9(0x171)])_0xb13fea[_0x339af9(0x2d6)](_0x12af52=>{const _0x1f1c51=_0x339af9;let _0x45877e=startingBalances['coins'][_0x1f1c51(0x291)](_0x533929=>_0x533929[_0x1f1c51(0x1d2)]===_0x12af52[_0x1f1c51(0x1d2)]);if(_0x45877e&&_0x45877e['coin']&&_0x12af52[_0x1f1c51(0x242)]!==0x0)_0x8d15f8+=_0x45877e[_0x1f1c51(0x242)]*_0x12af52[_0x1f1c51(0x16f)];});let _0x109673=0x0;if(_0x56db21[_0x339af9(0x212)]!==0x0){let _0x5dae7c=_0x56db21[_0x56db21[_0x339af9(0x212)]-0x1];_0x109673=_0x5dae7c[_0x339af9(0x220)];}_0x8d15f8-=_0x109673;_0x4c2672==='net-basecoin'&&(_0x5cef1d=(_0x1a8f9a-_0x8d15f8)/startingBalances[_0x339af9(0x2a9)]*0x64,_0x1a8f9a=_0x1a8f9a-_0x8d15f8);if(_0x4c2672===_0x339af9(0x315)){let _0x4f26e9=_0x4987c8===_0x339af9(0x314)?startingBalances[_0x339af9(0x2c7)]:startingBalances[_0x339af9(0x250)];if(_0xb71f1c==='BTC'||_0xb71f1c===_0x339af9(0x1b6)||_0xb71f1c==='PAXG')_0x8d15f8=_0x4987c8==='EUR'?_0x8d15f8*_0xcd9043[_0x339af9(0x2c7)]:_0x8d15f8*_0xcd9043[_0x339af9(0x250)];else{if(usdBasecoins[_0x339af9(0x28e)](_0xb71f1c))_0x8d15f8=_0x4987c8===_0x339af9(0x314)?_0x8d15f8*_0xcd9043[_0x339af9(0x2c7)]/_0xcd9043[_0x339af9(0x250)]:_0x8d15f8;else _0xb71f1c===_0x339af9(0x314)&&(_0x8d15f8=_0x4987c8===_0x339af9(0x314)?_0x8d15f8:_0x8d15f8*_0xcd9043['usd']/_0xcd9043[_0x339af9(0x2c7)]);}_0x5cef1d=(_0x1a8f9a-_0x8d15f8)/_0x4f26e9*0x64,_0x1a8f9a=_0x1a8f9a-_0x8d15f8;}if(_0x5cef1d){if(_0x5cef1d<0x64)_0x5cef1d=_0x5cef1d[_0x339af9(0x17e)](0x2);else{if(_0x5cef1d<0x3e8)_0x5cef1d=_0x5cef1d[_0x339af9(0x17e)](0x1);else _0x5cef1d=_0x5cef1d[_0x339af9(0x17e)](0x0);}}else _0x5cef1d=Number('0')[_0x339af9(0x17e)](0x2);if(_0x1a8f9a){if(Math[_0x339af9(0x300)](_0x1a8f9a)<0.000001)_0x1a8f9a=_0x1a8f9a['toFixed'](0x2);else{if(Math[_0x339af9(0x300)](_0x1a8f9a)<0.1)_0x1a8f9a=_0x1a8f9a[_0x339af9(0x17e)](0x6);else{if(Math['abs'](_0x1a8f9a)<0x1)_0x1a8f9a=_0x1a8f9a[_0x339af9(0x17e)](0x5);else{if(Math[_0x339af9(0x300)](_0x1a8f9a)<0xa)_0x1a8f9a=_0x1a8f9a['toFixed'](0x4);else{if(Math[_0x339af9(0x300)](_0x1a8f9a)<0x64)_0x1a8f9a=_0x1a8f9a[_0x339af9(0x17e)](0x3);else{if(Math[_0x339af9(0x300)](_0x1a8f9a)<0x3e8)_0x1a8f9a=_0x1a8f9a[_0x339af9(0x17e)](0x2);else _0x1a8f9a=_0x1a8f9a[_0x339af9(0x17e)](0x2);}}}}}}else _0x1a8f9a=Number('0')[_0x339af9(0x17e)](0x2);}else _0x5cef1d=Number('0')[_0x339af9(0x17e)](0x2);return{'value':_0x1a8f9a,'change':_0x5cef1d,'leftTxt':_0xd662,'rightTxt':_0x304299};}async function getStartingBalances(_0x18bb0b,_0xd81fc7=!![]){const _0x4c0f0c=_0x1d511c;if(_0x18bb0b[_0x4c0f0c(0x212)]!==0x0){const [_0x56341e,_0x4f6d08,_0x7895c6]=getPerf(_0x18bb0b[0x0],!![]);let _0x443c21=[];config['portfolio']['forEach'](_0x3e9f63=>{const _0x2eabcf=_0x4c0f0c;let _0x45c242=0x0,_0x3f508f;config[_0x2eabcf(0x1e0)][_0x2eabcf(0x2d6)](_0xa90236=>{const _0x54ec14=_0x2eabcf;let _0x7d85df=_0xa90236[_0x54ec14(0x275)]['find'](_0x345fd1=>_0x345fd1[_0x54ec14(0x1d2)]==_0x3e9f63['coin']);if(_0x7d85df){_0x45c242+=_0x7d85df['number'];if(!_0x3f508f)_0x3f508f=_0x7d85df[_0x54ec14(0x309)];}}),_0x443c21[_0x2eabcf(0x1b5)]({'coin':_0x3e9f63[_0x2eabcf(0x1d2)],'number':_0x45c242,'initialprice':_0x3f508f});});const _0x345db8={'basecoin':_0x56341e,'eur':_0x4f6d08,'usd':_0x7895c6,'coins':_0x443c21};if(_0xd81fc7)proxyEmit(_0x4c0f0c(0x1d9),_0x345db8);startingBalances=_0x345db8;}}function headlessMode(_0x40c6b4){const _0x516202=_0x1d511c;let _0x387f78=_0x40c6b4[_0x516202(0x1ec)],_0x416eef=_0x40c6b4['threshold'],_0x53a834=[];for(let _0x1b8583 of _0x387f78){if(_0x1b8583['coin']!=config[_0x516202(0x2a9)]){if(_0x1b8583[_0x516202(0x24a)]>=_0x416eef/0x64){if(_0x1b8583[_0x516202(0x204)])_0x53a834['push'](_0x1b8583);}else{if(_0x1b8583[_0x516202(0x24a)]<=-_0x416eef/0x64){if(_0x1b8583[_0x516202(0x204)])_0x53a834[_0x516202(0x1b5)](_0x1b8583);}}}}_0x53a834[_0x516202(0x212)]>0x0&&(lockOrders==ORDERS[_0x516202(0x1a9)]&&!coolingDown&&_0x53a834[_0x516202(0x2d6)](_0x2cca68=>{const _0x21151c=_0x516202;logger[_0x21151c(0x283)](_0x21151c(0x23f)+_0x2cca68['coin']+'\x20'+_0x2cca68['number']+'\x20'+_0x2cca68[_0x21151c(0x16f)]+'\x20'+_0x2cca68[_0x21151c(0x172)]+'%\x20'+_0x2cca68[_0x21151c(0x2fd)]+'%\x20'+(0x64*_0x2cca68[_0x21151c(0x24a)])[_0x21151c(0x17e)](0x2)+_0x21151c(0x1fb)+_0x416eef[_0x21151c(0x17e)](0x2)+'%)');}),placeOrder(_0x53a834));}function notifyBalance(_0x4b7a8c){const _0x316d99=_0x1d511c;let _0x41032d=_0x4b7a8c['portfolio'],_0x3d4aa3=_0x4b7a8c[_0x316d99(0x2dd)],_0x11c4cf=[];for(let _0x573f8d of _0x41032d){if(_0x573f8d[_0x316d99(0x1d2)]!=config[_0x316d99(0x2a9)]){if(_0x573f8d[_0x316d99(0x24a)]>=_0x3d4aa3/0x64){if(_0x573f8d['valid'])_0x11c4cf[_0x316d99(0x1b5)](_0x573f8d);}else{if(_0x573f8d[_0x316d99(0x24a)]<=-_0x3d4aa3/0x64){if(_0x573f8d['valid'])_0x11c4cf[_0x316d99(0x1b5)](_0x573f8d);}}}}if(_0x11c4cf[_0x316d99(0x212)]>0x0){let _0x4cabfd=_0x11c4cf['map'](_0x1ce9fd=>_0x1ce9fd[_0x316d99(0x1d2)]);_0x4cabfd[_0x316d99(0x2d4)]();let _0x33fc0d=_0x4cabfd[_0x316d99(0x26c)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x316d99(0x288));lastCoinsToBalance=_0x33fc0d;}}function symbolToCoin(_0x2e52ef){const _0x5713cd=_0x1d511c;let _0x524fd4;if(_0x2e52ef[_0x5713cd(0x28e)]('/'+config['basecoin']))_0x524fd4=_0x2e52ef[_0x5713cd(0x2a7)]('/'+config[_0x5713cd(0x2a9)],'');if(_0x2e52ef[_0x5713cd(0x28e)](config[_0x5713cd(0x2a9)]+'/'))_0x524fd4=_0x2e52ef[_0x5713cd(0x2a7)](config[_0x5713cd(0x2a9)]+'/','');return _0x524fd4;}async function unlockOrders(){const _0x41f25c=_0x1d511c;if(allOrdersPlaced&&lockOrders==ORDERS[_0x41f25c(0x256)]){logger[_0x41f25c(0x283)](_0x41f25c(0x313)),lockOrders=ORDERS[_0x41f25c(0x231)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xd2d6b7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd2d6b7,setBlockTransactionDetection(![]),validateOrdersState=_0x41f25c(0x2f2),persistOpenOrders([]),lockOrders=ORDERS[_0x41f25c(0x1a9)],logger[_0x41f25c(0x283)](_0x41f25c(0x1da));}}async function validateOrders(_0x3a9206){const _0x434e4f=_0x1d511c;if(_0x3a9206)validateOrdersState=_0x3a9206;logger[_0x434e4f(0x283)](_0x434e4f(0x25f)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x65663d=[],_0x536a40=config[_0x434e4f(0x31c)]==_0x434e4f(0x1ed)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x434e4f(0x1f7)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x434e4f(0x256)])return;logger[_0x434e4f(0x283)](_0x434e4f(0x2ba)+validateOrdersState),lastOrders[_0x434e4f(0x2d6)](_0x41d853=>{const _0x1fe404=_0x434e4f;let _0x1139cf=![];_0x41d853[_0x1fe404(0x218)]>0x0&&(_0x1139cf=!![]),_0x65663d['push'](_0x1139cf),_0x1139cf&&config[_0x1fe404(0x31c)]!='market'&&logHistory(_0x1fe404(0x1e4),_0x1fe404(0x21d)+_0x41d853[_0x1fe404(0x1cb)]+'\x20'+_0x41d853['side']+'\x20#'+formatResult(_0x41d853[_0x1fe404(0x218)],0x8)+'\x20@'+formatResult(_0x41d853[_0x1fe404(0x309)],0x8));}),_0x65663d[_0x434e4f(0x2d6)]((_0x1e4a08,_0x26a88d)=>{const _0x33ee17=_0x434e4f;if(_0x1e4a08)lastOrders[_0x33ee17(0x2da)](_0x26a88d,0x1);}),persistOpenOrders(lastOrders);const _0x4d27fb=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x434e4f(0x2f2)){validateOrdersState='ongoing';if(_0x65663d[_0x434e4f(0x28e)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x434e4f(0x1e5)){if(_0x65663d[_0x434e4f(0x28e)](![])){}else{if(allOrdersPlaced){if(config[_0x434e4f(0x31c)]==_0x434e4f(0x1ed)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x434e4f(0x1b7))_0x65663d[_0x434e4f(0x28e)](![])&&(config['ordertype']==_0x434e4f(0x1ed)?logHistory(_0x434e4f(0x30c),_0x434e4f(0x2d0)+Math[_0x434e4f(0x27c)](_0x536a40*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4d27fb):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x434e4f(0x27c)](_0x536a40*validateOrderInterval/0xea60)+_0x434e4f(0x281)+_0x4d27fb))),await unlockOrders();else{if(validateOrdersState==_0x434e4f(0x2d1)){if(config['ordertype']!=_0x434e4f(0x1ed))logHistory(_0x434e4f(0x30c),'No\x20more\x20open\x20orders\x20-\x20'+_0x4d27fb);await unlockOrders();}}}}}async function cancelOrders(){const _0x16ea8d=_0x1d511c;lastOrders[_0x16ea8d(0x2d6)](async _0x3fff5b=>{const _0x16ef98=_0x16ea8d;try{const _0x465f80=await exchange['cancelOrder'](_0x3fff5b['orderId'],_0x3fff5b[_0x16ef98(0x1cb)]);}catch(_0x43d7c6){if(_0x43d7c6[_0x16ef98(0x1b4)]()['includes'](_0x16ef98(0x18a))){}else await handleError(_0x43d7c6,_0x16ef98(0x1eb));}});}async function initCoinResults(_0x232475){const _0x3f7856=_0x1d511c;_0x232475?logger[_0x3f7856(0x283)]('Resetting\x20coin\x20results:\x20'+_0x232475):logger[_0x3f7856(0x283)]('Initializing\x20coin\x20results'),config[_0x3f7856(0x1ec)][_0x3f7856(0x2d6)](_0x36c224=>{const _0x5825d1=_0x3f7856;if(!_0x36c224[_0x5825d1(0x226)]&&_0x36c224['coin']!=config[_0x5825d1(0x2a9)]){const _0xfac3df=currentCoins[_0x5825d1(0x291)](_0x43489e=>_0x43489e[_0x5825d1(0x1d2)]==_0x36c224['coin']),_0x69d880=gTicker[noslash(_0x36c224[_0x5825d1(0x1cb)])];let _0x27549b=_0xfac3df?_0xfac3df[_0x5825d1(0x242)]:null,_0x5cfa1c=_0x36c224['reverse']?0x1/_0x69d880:_0x69d880,_0x5c99f9;config['liquidity'][_0x5825d1(0x2d6)](_0x5dd996=>{const _0x41464c=_0x5825d1;!_0x5c99f9&&(_0x5c99f9=_0x5dd996['changes'][_0x41464c(0x291)](_0x511600=>_0x511600[_0x41464c(0x1d2)]==_0x36c224['coin']),_0x5c99f9&&(_0x27549b=_0x5c99f9[_0x41464c(0x242)],_0x5cfa1c=_0x5c99f9['price']));});let _0x3619a4=dbCoinResults[_0x5825d1(0x1f6)](_0x5825d1(0x171))[_0x5825d1(0x291)]({'coin':_0x36c224[_0x5825d1(0x1d2)]})[_0x5825d1(0x1ad)]();if(!_0x3619a4){const _0x2115b2={'coin':_0x36c224[_0x5825d1(0x1d2)],'number':_0x27549b,'breakeven':_0x5cfa1c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5825d1(0x1f6)](_0x5825d1(0x171))[_0x5825d1(0x1b5)](_0x2115b2)['write']();}else{if(_0x232475&&_0x36c224[_0x5825d1(0x1d2)]==_0x232475){const _0x3592d6={'coin':_0x36c224['coin'],'number':_0x27549b,'breakeven':_0x5cfa1c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5825d1(0x171))['find']({'coin':_0x36c224[_0x5825d1(0x1d2)]})['assign'](_0x3592d6)[_0x5825d1(0x2b0)]();}}}});}async function updateCoinResults(_0x528b27,_0x319abc=![]){const _0x4491b0=_0x1d511c;let _0xe841a9,_0x2402a9,_0x2fcd4d,_0x176840,_0x498072,_0x2514b5,_0x4d25cd=dbCoinResults[_0x4491b0(0x1f6)](_0x4491b0(0x171))['find']({'coin':_0x528b27[_0x4491b0(0x1d2)]})[_0x4491b0(0x1ad)](),_0x6bf195=![];_0x4d25cd&&Object['entries'](_0x4d25cd)[_0x4491b0(0x2d6)](([_0xc690af,_0x403b0f])=>{if(_0x403b0f==null)_0x6bf195=!![];});(!_0x4d25cd||_0x6bf195)&&(await initCoinResults(_0x528b27[_0x4491b0(0x1d2)]),_0x4d25cd=dbCoinResults[_0x4491b0(0x1f6)](_0x4491b0(0x171))[_0x4491b0(0x291)]({'coin':_0x528b27[_0x4491b0(0x1d2)]})[_0x4491b0(0x1ad)]());_0x528b27['reverse']&&(_0x2514b5={'filled':_0x528b27[_0x4491b0(0x218)]*_0x528b27[_0x4491b0(0x309)],'amount':_0x528b27[_0x4491b0(0x218)]*_0x528b27['price'],'side':_0x528b27[_0x4491b0(0x24b)]==_0x4491b0(0x2b8)?_0x4491b0(0x24f):_0x4491b0(0x2b8),'price':0x1/_0x528b27['price']},_0x528b27={..._0x528b27,..._0x2514b5});_0x319abc?_0x2402a9=_0x528b27['side']==_0x4491b0(0x24f)?_0x4d25cd[_0x4491b0(0x242)]+_0x528b27[_0x4491b0(0x218)]:_0x4d25cd['number']-_0x528b27['filled']:_0x2402a9=await getCoinNumber(_0x528b27[_0x4491b0(0x1d2)]);if(_0x528b27[_0x4491b0(0x2b5)]&&_0x528b27['fee']['currency']==config[_0x4491b0(0x2a9)])_0xe841a9=Number(_0x528b27[_0x4491b0(0x2b5)][_0x4491b0(0x2a2)]);else{if(_0x528b27['fee']&&_0x528b27[_0x4491b0(0x2b5)]['currency']==_0x4491b0(0x1e7)&&!_0x319abc&&config[_0x4491b0(0x2a9)]!=_0x4491b0(0x2fb))_0xe841a9=Number(_0x528b27['fee'][_0x4491b0(0x2a2)])*gTicker[_0x4491b0(0x1e7)+config[_0x4491b0(0x2a9)]];else _0xe841a9=defaultFee*_0x528b27[_0x4491b0(0x218)]*_0x528b27[_0x4491b0(0x309)];}_0x528b27[_0x4491b0(0x24b)]==_0x4491b0(0x24f)?(_0x2fcd4d=_0x2402a9!=0x0?(_0x4d25cd[_0x4491b0(0x294)]*_0x4d25cd['number']+_0x528b27[_0x4491b0(0x309)]*(_0x2402a9-_0x4d25cd[_0x4491b0(0x242)])+_0xe841a9)/_0x2402a9:0x0,_0x176840=_0x4d25cd[_0x4491b0(0x185)]):(_0x2fcd4d=_0x2402a9!=0x0?(_0x4d25cd['breakeven']*_0x4d25cd[_0x4491b0(0x242)]-_0x528b27[_0x4491b0(0x309)]*(_0x4d25cd[_0x4491b0(0x242)]-_0x2402a9)+_0xe841a9)/_0x2402a9:0x0,_0x176840=_0x4d25cd[_0x4491b0(0x185)]+(_0x528b27[_0x4491b0(0x309)]-_0x4d25cd[_0x4491b0(0x294)])*_0x528b27[_0x4491b0(0x218)]);_0x498072=(_0x528b27[_0x4491b0(0x309)]-_0x2fcd4d-_0xe841a9/_0x528b27[_0x4491b0(0x218)])*_0x2402a9;let _0x22a70f={'coin':_0x528b27['coin'],'number':_0x2402a9,'breakeven':formatResult(_0x2fcd4d,0x8),'realized':formatResult(_0x176840,0x8),'unrealized':formatResult(_0x498072,0x8),'fees':formatResult(_0x4d25cd[_0x4491b0(0x17d)]+_0xe841a9,0x8),'sells':_0x528b27[_0x4491b0(0x24b)]==_0x4491b0(0x2b8)?_0x4d25cd['sells']+0x1:_0x4d25cd['sells'],'buys':_0x528b27['side']==_0x4491b0(0x24f)?_0x4d25cd[_0x4491b0(0x1ff)]+0x1:_0x4d25cd[_0x4491b0(0x1ff)]};dbCoinResults[_0x4491b0(0x1f6)]('coins')['find']({'coin':_0x528b27['coin']})[_0x4491b0(0x252)](_0x22a70f)[_0x4491b0(0x2b0)]();if(!_0x319abc){if(_0x528b27[_0x4491b0(0x2b5)]&&_0x528b27[_0x4491b0(0x2b5)][_0x4491b0(0x2e1)]=='BNB'){const _0x16dff4=currentCoins[_0x4491b0(0x291)](_0x3b3781=>_0x3b3781[_0x4491b0(0x1d2)]==_0x4491b0(0x1e7));if(_0x16dff4){let _0x189661=dbCoinResults[_0x4491b0(0x1f6)](_0x4491b0(0x171))[_0x4491b0(0x291)]({'coin':_0x4491b0(0x1e7)})['value']();_0x22a70f={..._0x189661,'number':_0x16dff4[_0x4491b0(0x242)]},dbCoinResults[_0x4491b0(0x1f6)](_0x4491b0(0x171))[_0x4491b0(0x291)]({'coin':_0x4491b0(0x1e7)})[_0x4491b0(0x252)](_0x22a70f)[_0x4491b0(0x2b0)]();}}}}async function placeOrder(_0x3c1bf8){const _0xf4d68a=_0x1d511c,_0x4de37d=config[_0xf4d68a(0x31c)]=='market'?_0xf4d68a(0x1ed):_0xf4d68a(0x263);if(lockOrders==ORDERS[_0xf4d68a(0x1a9)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0xf4d68a(0x2f2);let _0x39216c=![];lastOrders=[];for(const _0x18724d of _0x3c1bf8){let _0x26998c,_0x426edb,_0x12bb24,_0x579f30,_0x59ba22,_0x1556ce=_0x18724d['symbol'];try{const _0x3d6b5c=await exchange[_0xf4d68a(0x2c6)](_0x1556ce);_0x26998c=_0x18724d[_0xf4d68a(0x247)]?0x1/_0x18724d['last']:_0x18724d[_0xf4d68a(0x16f)],_0x426edb=_0x3d6b5c[_0xf4d68a(0x301)],_0x12bb24=_0x3d6b5c['ask'];_0x18724d[_0xf4d68a(0x247)]?(_0x579f30=_0x18724d[_0xf4d68a(0x24b)]==_0xf4d68a(0x24f)?_0xf4d68a(0x2b8):_0xf4d68a(0x24f),_0x59ba22=Math[_0xf4d68a(0x300)](_0x18724d['trade'])/_0x26998c):(_0x579f30=_0x18724d[_0xf4d68a(0x24b)],_0x59ba22=Math[_0xf4d68a(0x300)](_0x18724d['trade']));_0x4de37d==_0xf4d68a(0x263)&&(config[_0xf4d68a(0x31c)]=='limit-high'&&(_0x26998c=_0x579f30==_0xf4d68a(0x24f)?_0x426edb:_0x12bb24),config[_0xf4d68a(0x31c)]==_0xf4d68a(0x21c)&&(_0x26998c=_0x579f30=='buy'?_0x12bb24:_0x426edb));_0x59ba22=formatResult(_0x59ba22,0x8),_0x26998c=formatResult(_0x26998c,0x8);const _0x3b24da=_0x579f30==_0xf4d68a(0x2b8)?config[_0xf4d68a(0x1d0)]?String[_0xf4d68a(0x1ce)]('0x'+config['emojisell'])+'\x20':'':config[_0xf4d68a(0x23d)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x51acd1=_0x4de37d==_0xf4d68a(0x1ed)?_0xf4d68a(0x2d5):config[_0xf4d68a(0x31c)]==_0xf4d68a(0x2f8)?_0xf4d68a(0x1c0):_0xf4d68a(0x1d6),_0x25fcf3=(Math[_0xf4d68a(0x280)](Math[_0xf4d68a(0x1e6)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0xf4d68a(0x1b5)]({'customId':_0x25fcf3,'symbol':_0x1556ce,'coin':_0x18724d[_0xf4d68a(0x1d2)],'amount':_0x59ba22,'price':_0x26998c,'side':_0x579f30,'reverse':_0x18724d['reverse'],'filled':0x0});if(_0x4de37d==_0xf4d68a(0x1ed))logHistory('order',''+_0x3b24da+_0x51acd1+_0xf4d68a(0x237)+_0x1556ce+'\x20'+_0x579f30+'\x20#'+formatResult(_0x59ba22,0x8)+'\x20@'+formatResult(_0x26998c,0x8));else logHistory('order',''+_0x3b24da+_0x51acd1+_0xf4d68a(0x237)+_0x1556ce+'\x20'+_0x579f30+'\x20#'+formatResult(_0x59ba22,0x8)+'\x20@'+formatResult(_0x26998c,0x8));let _0x2e6f08;_0x4de37d==_0xf4d68a(0x1ed)?_0x579f30==_0xf4d68a(0x24f)&&['Bybit',_0xf4d68a(0x19f),_0xf4d68a(0x31b),_0xf4d68a(0x316),'Huobipro'][_0xf4d68a(0x28e)](config['exchange'])?_0x2e6f08=await exchange[_0xf4d68a(0x238)](_0x1556ce,_0x4de37d,_0x579f30,_0x59ba22,_0x26998c):_0x2e6f08=await exchange[_0xf4d68a(0x238)](_0x1556ce,_0x4de37d,_0x579f30,_0x59ba22,undefined):_0x2e6f08=await exchange[_0xf4d68a(0x238)](_0x1556ce,_0x4de37d,_0x579f30,_0x59ba22,_0x26998c);logger[_0xf4d68a(0x283)](_0xf4d68a(0x2ed)+_0x2e6f08['id']+_0xf4d68a(0x1b0)+_0x25fcf3);const _0xe87a72=lastOrders[_0xf4d68a(0x212)]-0x1;if(_0xe87a72>=0x0&&lastOrders[_0xe87a72][_0xf4d68a(0x210)]==_0x25fcf3){lastOrders[_0xe87a72][_0xf4d68a(0x2b6)]=_0x2e6f08['id'];if(_0x2e6f08['amount'])lastOrders[_0xe87a72][_0xf4d68a(0x1b2)]=_0x2e6f08['amount'];if(_0x2e6f08[_0xf4d68a(0x309)])lastOrders[_0xe87a72]['price']=_0x2e6f08[_0xf4d68a(0x309)];lastOrders[_0xe87a72]['fee']=_0x2e6f08[_0xf4d68a(0x2b5)];}if(config['cooldown']!=0x0){let _0x14f080=null;if(cooldownTracker['length']==config[_0xf4d68a(0x298)]-0x1)_0x14f080=cooldownTracker[_0xf4d68a(0x1bf)]();const _0x196a46=getTimeStamp();cooldownTracker[_0xf4d68a(0x1b5)](_0x196a46);if(_0x14f080){const _0x3f79f8=fns[_0xf4d68a(0x2db)](new Date(_0x196a46),new Date(_0x14f080));if(_0x3f79f8<cooldownInterval){logHistory(_0xf4d68a(0x19a),_0xf4d68a(0x287)+config['cooldown']+_0xf4d68a(0x21e)+cooldownInterval/0x3c+_0xf4d68a(0x25e)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x5aad59){if(_0x5aad59['toString']()['includes'](_0xf4d68a(0x188)))lastOrders=lastOrders['filter'](_0x215df3=>_0x215df3['symbol']!=_0x1556ce),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1556ce),_0x39216c=!![];else{if(_0x5aad59['toString']()[_0xf4d68a(0x28e)]('Invalid\x20quantity'))lastOrders=lastOrders[_0xf4d68a(0x1c9)](_0x3b2252=>_0x3b2252[_0xf4d68a(0x1cb)]!=_0x1556ce),logHistory(_0xf4d68a(0x19a),_0xf4d68a(0x229)+_0x1556ce),_0x39216c=!![];else{if(_0x5aad59[_0xf4d68a(0x1b4)]()['includes'](_0xf4d68a(0x183)))lastOrders=lastOrders[_0xf4d68a(0x1c9)](_0x81bf88=>_0x81bf88['symbol']!=_0x1556ce),logHistory('error','Order\x20is\x20invalid:\x20'+_0x1556ce),logger[_0xf4d68a(0x283)](_0x5aad59),_0x39216c=!![];else _0x5aad59['toString']()[_0xf4d68a(0x28e)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders['filter'](_0x388a00=>_0x388a00[_0xf4d68a(0x1cb)]!=_0x1556ce),logHistory(_0xf4d68a(0x19a),_0xf4d68a(0x186)+_0x1556ce),_0x39216c=!![]):(lastOrders=lastOrders[_0xf4d68a(0x1c9)](_0xe08222=>_0xe08222[_0xf4d68a(0x1cb)]!=_0x1556ce),await handleError(_0x5aad59,_0xf4d68a(0x284),_0x1556ce));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xf4d68a(0x212)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x562924=config['ordertype']==_0xf4d68a(0x1ed)?validateOrderTimeout*0x3c*0x3e8:config[_0xf4d68a(0x1f7)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x562924);}else unlockOrders();_0x39216c&&config[_0xf4d68a(0x1b9)]&&(logHistory(_0xf4d68a(0x19a),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xf4d68a(0x30c),_0xf4d68a(0x25c)));}else{if(coolingDown)!config[_0xf4d68a(0x1b9)]&&logHistory(_0xf4d68a(0x19a),_0xf4d68a(0x271));else lockOrders!=ORDERS[_0xf4d68a(0x1a9)]&&(!config['headless']&&(config['ordertype']==_0xf4d68a(0x1ed)?logHistory(_0xf4d68a(0x19a),_0xf4d68a(0x2e4)):logHistory(_0xf4d68a(0x19a),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x2261cf){const _0x27ff3c=_0x1d511c,_0x22ba5a={...config,'openOrders':_0x2261cf};let _0x13ba16=dbConfig['get'](_0x27ff3c(0x1fa))[_0x27ff3c(0x291)]({'botID':botID})[_0x27ff3c(0x1ad)]();_0x13ba16&&dbConfig[_0x27ff3c(0x1f6)](_0x27ff3c(0x1fa))['find']({'botID':botID})[_0x27ff3c(0x252)](_0x22ba5a)[_0x27ff3c(0x2b0)]();}function restoreOrders(){const _0x2412da=_0x1d511c;let _0x55eafe;config[_0x2412da(0x20e)]&&allOpenOrders[_0x2412da(0x2d6)](_0x1dc869=>{const _0x1a9083=_0x2412da,_0x57c121=config[_0x1a9083(0x20e)][_0x1a9083(0x291)](_0x3f8407=>_0x3f8407[_0x1a9083(0x2b6)]==_0x1dc869['id']);_0x57c121&&(lastOrders[_0x1a9083(0x1b5)](_0x57c121),_0x55eafe=_0x1dc869['timestamp']);});if(lastOrders[_0x2412da(0x212)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x419818=new Date()['getTime'](),_0x195a3d=config[_0x2412da(0x31c)]==_0x2412da(0x1ed)?validateOrderTimeout*0x3c*0x3e8:config[_0x2412da(0x1f7)]*0x3c*0x3e8;if(_0x55eafe+_0x195a3d>_0x419818){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xdf2907=_0x2412da;validateOrders(_0xdf2907(0x1b7));},_0x55eafe+_0x195a3d-_0x419818);}else validateOrders(_0x2412da(0x1b7));}}async function sendMetricsTelegram(){const _0x7c1598=_0x1d511c;if(!coinsLoaded){process[_0x7c1598(0x2be)]({'telegrammsg':_0x7c1598(0x27f)},_0x4866e5=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x15ab26='';if(config['showname'])_0x15ab26=_0x7c1598(0x1ac)+config[_0x7c1598(0x19d)]+_0x7c1598(0x310);else _0x15ab26='<b>Bot\x20'+botID+_0x7c1598(0x310);const _0x18a825=getKPIs(_0x7c1598(0x2a9)),_0x1e6075=getKPIs('fiat',config[_0x7c1598(0x1f1)]),_0x7d76f6=getKPIs(_0x7c1598(0x1ab)),_0x5672a8=getKPIs('net-fiat',config[_0x7c1598(0x1f1)]);_0x15ab26+=_0x7c1598(0x232),_0x15ab26+=_0x18a825['leftTxt']+'\x20:\x20'+_0x18a825[_0x7c1598(0x1ad)]+'\x0a',_0x15ab26+=_0x18a825['rightTxt']+':\x20'+_0x18a825['change']+'%\x0a',_0x15ab26+=_0x1e6075[_0x7c1598(0x1b8)]+'\x20:\x20'+_0x1e6075[_0x7c1598(0x1ad)]+'\x0a',_0x15ab26+=_0x1e6075['rightTxt']+':\x20'+_0x1e6075[_0x7c1598(0x2d8)]+'%\x0a',_0x15ab26+=_0x7d76f6[_0x7c1598(0x1b8)]+':\x20'+_0x7d76f6['value']+'\x20('+config[_0x7c1598(0x2a9)]+')\x0a',_0x15ab26+=_0x7d76f6[_0x7c1598(0x30b)]+':\x20'+_0x7d76f6[_0x7c1598(0x2d8)]+_0x7c1598(0x1fb)+config[_0x7c1598(0x2a9)]+')\x0a',_0x15ab26+=_0x5672a8[_0x7c1598(0x1b8)]+':\x20'+_0x5672a8[_0x7c1598(0x1ad)]+'\x20('+config[_0x7c1598(0x1f1)]+')\x0a',_0x15ab26+=_0x5672a8[_0x7c1598(0x30b)]+':\x20'+_0x5672a8[_0x7c1598(0x2d8)]+'%\x20('+config[_0x7c1598(0x1f1)]+')\x0a',_0x15ab26+=_0x7c1598(0x272),process[_0x7c1598(0x2be)]({'telegrammsg':_0x15ab26},_0x3b510a=>{});}async function sendPortfolioTelegram(){const _0x1c18cb=_0x1d511c;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x1c18cb(0x2be)]({'telegrammsg':_0x1c18cb(0x27f)},_0x1109f0=>{});return;}let _0x4ca962='';if(config[_0x1c18cb(0x273)])_0x4ca962='<b>'+config['botname']+_0x1c18cb(0x2ca);else _0x4ca962=_0x1c18cb(0x28d)+botID+_0x1c18cb(0x2ca);_0x4ca962+=_0x1c18cb(0x232),_0x4ca962+=_0x1c18cb(0x181),_0x4ca962+=_0x1c18cb(0x2af),_0x4ca962+='-------------------------------\x0a',currentCoins['forEach'](_0x10c087=>{const _0x4f4d9e=_0x1c18cb;_0x4ca962+=_0x10c087['coin'][_0x4f4d9e(0x30e)](0x7)+'|\x20'+formatPad(_0x10c087['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x10c087[_0x4f4d9e(0x2fd)],0x2,0x6)+'|\x20'+formatPad(_0x10c087[_0x4f4d9e(0x24a)]*0x64,0x2,0x6)+'\x0a';}),_0x4ca962+=_0x1c18cb(0x272),process[_0x1c18cb(0x2be)]({'telegrammsg':_0x4ca962},_0x5e4751=>{});}function formatPad(_0x4ea8bd,_0xc13a0b,_0x71abb1){const _0x4f5386=_0x1d511c,_0x206542=formatResultString(_0x4ea8bd,_0xc13a0b);return _0x206542?_0x206542['padStart'](_0x71abb1):''[_0x4f5386(0x2b1)](_0x71abb1);}function logHistory(_0x1e8e32,_0x5ea74d,_0x5bfed8=''){const _0x10bc81=_0x1d511c;logger['full'](''+_0x5ea74d);let _0x513dbf={'time':getTimeStamp(),'type':_0x1e8e32,'event':_0x5ea74d};dbLogs['get'](_0x10bc81(0x2cd))[_0x10bc81(0x1b5)](_0x513dbf)[_0x10bc81(0x2b0)]();if(_0x5bfed8=='')_0x5bfed8=_0x5ea74d;proxyEmit(_0x10bc81(0x17a),{'log':_0x513dbf,'summary':_0x5bfed8}),process[_0x10bc81(0x2be)]({'telegram':{..._0x513dbf,'botname':config[_0x10bc81(0x19d)],'showname':config['showname']}},_0x3d6c7e=>{});}function emitHistory(_0x2dc236={}){const _0x5bc955=_0x1d511c;Object[_0x5bc955(0x227)](_0x2dc236)[_0x5bc955(0x212)]==0x0&&(_0x2dc236={'type':['order',_0x5bc955(0x17a)],'event':'','page':0x1});if(_0x2dc236[_0x5bc955(0x29d)][_0x5bc955(0x28e)]('event'))_0x2dc236['type']['splice'](_0x2dc236[_0x5bc955(0x29d)][_0x5bc955(0x2b4)](_0x5bc955(0x17a)),0x1,'error',_0x5bc955(0x22d),_0x5bc955(0x30c));if(dbLogs[_0x5bc955(0x299)](_0x5bc955(0x2cd))[_0x5bc955(0x1ad)]()){let _0x3585cb=dbLogs[_0x5bc955(0x1f6)](_0x5bc955(0x2cd))['filter'](_0x11d12b=>{const _0x4114e0=_0x5bc955;if(_0x2dc236['type'][_0x4114e0(0x212)]==0x0)return![];else return _0x2dc236[_0x4114e0(0x29d)][_0x4114e0(0x28e)](_0x11d12b[_0x4114e0(0x29d)]);})[_0x5bc955(0x1c9)](_0x1080c5=>{const _0xa3fcc8=_0x5bc955;if(_0x2dc236[_0xa3fcc8(0x17a)]=='')return!![];else return _0x1080c5[_0xa3fcc8(0x17a)][_0xa3fcc8(0x195)]()[_0xa3fcc8(0x28e)](_0x2dc236['event'][_0xa3fcc8(0x195)]());})['sortBy']('time'),_0x150fee=_0x3585cb[_0x5bc955(0x1ad)]()['length'];_0x3585cb=_0x3585cb['reverse']()['slice']((_0x2dc236['page']-0x1)*logPageSize,_0x2dc236[_0x5bc955(0x2a1)]*logPageSize-0x1)[_0x5bc955(0x247)]()[_0x5bc955(0x1ad)](),proxyEmit(_0x5bc955(0x296),{'logs':_0x3585cb,'total':_0x150fee});}else proxyEmit(_0x5bc955(0x296),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5bf39f){const _0x497962=_0x1d511c;if(dbLogs[_0x497962(0x299)](_0x497962(0x2cd))[_0x497962(0x1ad)]()){const _0x53995a=dbLogs[_0x497962(0x1f6)](_0x497962(0x2cd))[_0x497962(0x2fc)]('time')[_0x497962(0x1c9)](_0x150ce9=>{const _0x122f7b=_0x497962;return _0x150ce9[_0x122f7b(0x29d)]=='order';})['value']();dbLogs[_0x497962(0x1f6)](_0x497962(0x2cd))[_0x497962(0x1e3)]()[_0x497962(0x2b0)](),dbLogs[_0x497962(0x1f6)](_0x497962(0x2cd))[_0x497962(0x252)](_0x53995a)['write'](),emitHistory(_0x5bf39f);}}async function pauseBot(_0x4f4415=pauseBotIntervalShort,_0x38ac74,_0x384a19,_0x8096d8=![]){const _0x87735=_0x1d511c,_0x335b54=new Date()['getTime']();if(!lastErrorShown||_0x335b54-lastErrorShown>=_0x4f4415){lastErrorShown=_0x335b54;if(!lastBotPause)lastBotPause=_0x335b54,consecutivePauses=0x1;else{if(_0x335b54-lastBotPause-_0x4f4415<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x8096d8){logHistory(_0x87735(0x19a),_0x38ac74+_0x87735(0x190)),await killBot();return;}else logHistory(_0x87735(0x19a),_0x38ac74+pauseBotMsg),_0x4f4415=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x335b54;}_0x384a19?logger[_0x87735(0x283)]('('+consecutivePauses+')\x20'+_0x38ac74+_0x87735(0x174),_0x384a19):logger['debug']('('+consecutivePauses+')\x20'+_0x38ac74);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4f4415),botPaused=![],_0x4f4415==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x312b58=_0x1d511c;botPaused=!![],await sleep(0x3e8),process[_0x312b58(0x2be)]({'stop':'kill'},_0xb45d38=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x492195,_0x139568){const _0x1fc15b=_0x1d511c;if(botPaused)return;const _0x24bcb9=config[_0x1fc15b(0x1ee)]||_0x1fc15b(0x312);if(_0x139568)logger[_0x1fc15b(0x283)](_0x1fc15b(0x1d1)+_0x139568);const _0x3b16da=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x492195[_0x1fc15b(0x1b4)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x1fc15b(0x19a),_0x24bcb9+_0x1fc15b(0x193)),_0x3b16da();else{if(_0x492195[_0x1fc15b(0x1b4)]()[_0x1fc15b(0x28e)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x1fc15b(0x19a),_0x24bcb9+_0x1fc15b(0x2bf)),_0x3b16da();else _0x492195['toString']()['includes'](_0x1fc15b(0x321))?(logHistory(_0x1fc15b(0x19a),_0x24bcb9+_0x1fc15b(0x1ae)),logHistory(_0x1fc15b(0x19a),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x3b16da()):await handleError(_0x492195,null);}}async function handleError(_0x176828,_0xb799b1,_0xf125b1=''){const _0x31caf8=_0x1d511c;if(botPaused)return;let _0x43e438;const _0x15614b=config[_0x31caf8(0x1ee)]||'Exchange';if(_0xb799b1)logger[_0x31caf8(0x283)](_0x31caf8(0x1d1)+_0xb799b1);if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)]('DDoSProtection'))_0x43e438=_0x15614b+_0x31caf8(0x22f),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x200)))_0x43e438=_0x15614b+_0x31caf8(0x1d8),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x260))||_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x1bb)))_0x43e438=_0x15614b+_0x31caf8(0x1a6),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)]('RequestTimeout'))_0x43e438=_0x15614b+_0x31caf8(0x265),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828['toString']()['includes'](_0x31caf8(0x30f)))_0x43e438=_0x15614b+_0x31caf8(0x1c8),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828['toString']()['toLowerCase']()[_0x31caf8(0x28e)]('timestamp')||_0x176828['toString']()[_0x31caf8(0x195)]()[_0x31caf8(0x28e)](_0x31caf8(0x175)))_0x43e438='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x2c9)))_0x43e438=_0x15614b+_0x31caf8(0x2c5),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828 instanceof ccxt[_0x31caf8(0x244)])_0x43e438=_0x15614b+_0x31caf8(0x194)+_0x176828['toString'](),logger['debug']('Network\x20error\x20details:',_0x176828),await pauseBot(undefined,_0x43e438,_0x176828);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x1d3)))logHistory(_0x31caf8(0x19a),_0x15614b+'\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x31caf8(0x216)),await killBot();else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x1a8)))logHistory(_0x31caf8(0x19a),_0x15614b+_0x31caf8(0x2f6)),logHistory(_0x31caf8(0x19a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)]('AuthenticationError')&&_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x234)))_0x43e438=_0x15614b+_0x31caf8(0x184),await pauseBot(undefined,_0x43e438,_0x176828,!![]);else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x321)))config[_0x31caf8(0x24d)]?_0x43e438=_0x15614b+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x43e438=_0x15614b+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x31caf8(0x19a),_0x43e438),logHistory(_0x31caf8(0x19a),_0x31caf8(0x216)),await killBot();else{if(_0x176828[_0x31caf8(0x1b4)]()[_0x31caf8(0x28e)](_0x31caf8(0x20f)))logHistory(_0x31caf8(0x19a),_0x15614b+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x31caf8(0x19a),_0x31caf8(0x216)),await killBot();else{if(_0x176828[_0x31caf8(0x1b4)]()['includes'](_0x31caf8(0x29f)))logHistory('error','Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0xf125b1);else{if(_0x176828 instanceof ccxt[_0x31caf8(0x304)]){_0x43e438=_0x15614b+'\x20exchange\x20error:\x20'+_0x176828[_0x31caf8(0x1b4)](),logHistory(_0x31caf8(0x19a),_0x43e438),logger[_0x31caf8(0x283)]('Exchange\x20error\x20details:',_0x176828);if(_0xf125b1)logger[_0x31caf8(0x283)](_0x31caf8(0x297)+_0xf125b1);await pauseBot(undefined,_0x43e438,_0x176828);}else{_0x43e438=_0x31caf8(0x214)+_0x176828['toString'](),logHistory(_0x31caf8(0x19a),_0x43e438),logger[_0x31caf8(0x283)](_0x43e438+_0x31caf8(0x174),_0x176828);if(_0xf125b1)logger['debug']('Symbol(s):\x20'+_0xf125b1);await pauseBot(undefined,_0x43e438);}}}}}}}}}}}}}}}}async function withRetry(_0x393a84,_0x4bc19c){const _0x188d58=_0x1d511c;let _0x5d1a7=![],_0x5e94a9=0x0,_0x3ae849,_0x489dee;while(_0x5e94a9<maxRetries){try{_0x3ae849=await _0x4bc19c();break;}catch(_0x1a1885){_0x489dee=_0x1a1885,!_0x5d1a7?(_0x5d1a7=!![],logger[_0x188d58(0x283)]('RETRY\x20-\x20Error\x20in\x20'+_0x393a84+':',_0x1a1885[_0x188d58(0x1b4)]())):await sleep(retryInterval);}_0x5e94a9++;}if(_0x5e94a9==0x0)return _0x3ae849;if(_0x5e94a9>=maxRetries)throw _0x489dee;else return logger[_0x188d58(0x283)](_0x188d58(0x2a8)+_0x5e94a9+_0x188d58(0x22e)),_0x3ae849;}function formatResult(_0x2cd42f,_0x34d2b7){const _0x98441b=_0x1d511c;return parseFloat(_0x2cd42f[_0x98441b(0x17e)](_0x34d2b7));}function formatResultTruncate(_0x3e5e1f,_0x4bcf20){const _0x33210d=_0x1d511c;let _0x5ce594=formatResultString(_0x3e5e1f,0xa),_0x17e459=_0x5ce594[_0x33210d(0x2b4)]('.');return _0x17e459!=-0x1&&(_0x5ce594=_0x5ce594['slice'](0x0,_0x17e459+_0x4bcf20+0x1)),Number(_0x5ce594);}function formatResultString(_0x50c42e,_0x30afda){const _0x59ab28=_0x1d511c;let _0x8bac27;if(!(''+_0x50c42e)['includes']('e'))_0x8bac27=+(Math[_0x59ab28(0x27c)](_0x50c42e+'e+'+_0x30afda)+'e-'+_0x30afda);else{let _0x1eb065=(''+_0x50c42e)[_0x59ab28(0x1c5)]('e'),_0x44d9c2='';+_0x1eb065[0x1]+_0x30afda>0x0&&(_0x44d9c2='+'),_0x8bac27=+(Math[_0x59ab28(0x27c)](+_0x1eb065[0x0]+'e'+_0x44d9c2+(+_0x1eb065[0x1]+_0x30afda))+'e-'+_0x30afda);}return Number(_0x8bac27)['toFixed'](_0x30afda);}function getServerTime(){const _0x2ed7f8=_0x1d511c,_0x246731=new Date();return _0x246731['getFullYear']()+'/'+(_0x246731[_0x2ed7f8(0x292)]()+0x1)['toString']()[_0x2ed7f8(0x2b1)](0x2,'0')+'/'+_0x246731[_0x2ed7f8(0x221)]()[_0x2ed7f8(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0x246731[_0x2ed7f8(0x213)]()[_0x2ed7f8(0x1b4)]()[_0x2ed7f8(0x2b1)](0x2,'0')+':'+_0x246731['getMinutes']()[_0x2ed7f8(0x1b4)]()[_0x2ed7f8(0x2b1)](0x2,'0')+':'+_0x246731[_0x2ed7f8(0x18b)]()[_0x2ed7f8(0x1b4)]()[_0x2ed7f8(0x2b1)](0x2,'0');}function getTimeStamp(){const _0x57653c=_0x1d511c,_0xc93519=shiftedTime();return _0xc93519[_0x57653c(0x236)]()+'/'+(_0xc93519[_0x57653c(0x292)]()+0x1)[_0x57653c(0x1b4)]()[_0x57653c(0x2b1)](0x2,'0')+'/'+_0xc93519[_0x57653c(0x221)]()[_0x57653c(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0xc93519[_0x57653c(0x213)]()[_0x57653c(0x1b4)]()[_0x57653c(0x2b1)](0x2,'0')+':'+_0xc93519[_0x57653c(0x2ce)]()['toString']()['padStart'](0x2,'0')+':'+_0xc93519[_0x57653c(0x18b)]()[_0x57653c(0x1b4)]()[_0x57653c(0x2b1)](0x2,'0');}function getDate(){const _0xcd1026=_0x1d511c,_0x1627f3=shiftedTime();return _0x1627f3[_0xcd1026(0x236)]()+'/'+(_0x1627f3[_0xcd1026(0x292)]()+0x1)['toString']()[_0xcd1026(0x2b1)](0x2,'0')+'/'+_0x1627f3[_0xcd1026(0x221)]()[_0xcd1026(0x1b4)]()['padStart'](0x2,'0');}function getHour(){const _0x5881ea=_0x1d511c,_0x4d8f3e=shiftedTime();return _0x4d8f3e[_0x5881ea(0x213)]()[_0x5881ea(0x1b4)]()[_0x5881ea(0x2b1)](0x2,'0');}function sleep(_0x1db6ee){return new Promise(_0x45b05a=>setTimeout(_0x45b05a,_0x1db6ee));}function shiftedTime(){const _0x1a1ca0=_0x1d511c,_0x49667b=new Date();let _0x212595=_0x49667b;if(config&&config[_0x1a1ca0(0x277)]!==0x0)_0x212595=fns[_0x1a1ca0(0x2a5)](_0x49667b,{'hours':config[_0x1a1ca0(0x277)]});return _0x212595;}function timer(_0x44b1e2){const _0x40407e=_0x1d511c,_0x585953=new Date();!lasttime?console[_0x40407e(0x1f5)](getTimeStamp()+_0x40407e(0x170),_0x44b1e2,_0x585953):console[_0x40407e(0x1f5)](getTimeStamp()+_0x40407e(0x170),_0x44b1e2,(_0x585953-lasttime)/0x3e8),lasttime=_0x585953;}