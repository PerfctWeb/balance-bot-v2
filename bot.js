const _0x479c03=_0x3742;(function(_0x294aec,_0xf1a411){const _0xc66b88=_0x3742,_0x406bf5=_0x294aec();while(!![]){try{const _0x1600ba=parseInt(_0xc66b88(0x130))/0x1*(-parseInt(_0xc66b88(0x286))/0x2)+-parseInt(_0xc66b88(0x23b))/0x3+parseInt(_0xc66b88(0x138))/0x4+parseInt(_0xc66b88(0x27a))/0x5*(-parseInt(_0xc66b88(0x15a))/0x6)+-parseInt(_0xc66b88(0x225))/0x7+parseInt(_0xc66b88(0x195))/0x8+-parseInt(_0xc66b88(0xfc))/0x9*(-parseInt(_0xc66b88(0x1ea))/0xa);if(_0x1600ba===_0xf1a411)break;else _0x406bf5['push'](_0x406bf5['shift']());}catch(_0x41a248){_0x406bf5['push'](_0x406bf5['shift']());}}}(_0x19a2,0xa4253));const _0x3f527a=function(){let _0xf6ff45=!![];return function(_0x386e3b,_0x2f8606){const _0x3a06fe=_0xf6ff45?function(){if(_0x2f8606){const _0x3440e5=_0x2f8606['apply'](_0x386e3b,arguments);return _0x2f8606=null,_0x3440e5;}}:function(){};return _0xf6ff45=![],_0x3a06fe;};}(),_0x59c2d8=_0x3f527a(this,function(){const _0x2d2074=_0x3742;return _0x59c2d8['toString']()[_0x2d2074(0x136)](_0x2d2074(0x188))[_0x2d2074(0x159)]()[_0x2d2074(0x26b)](_0x59c2d8)[_0x2d2074(0x136)](_0x2d2074(0x188));});_0x59c2d8();'use strict';const ccxt=require('ccxt'),low=require(_0x479c03(0x26f)),FileSync=require(_0x479c03(0x111)),fs=require('fs'),fns=require('date-fns'),forge=require('node-forge'),util=require('util'),argv=require('yargs/yargs')(process[_0x479c03(0x1d8)]['slice'](0x2))[_0x479c03(0x1d8)],path=require(_0x479c03(0x1f7)),axios=require(_0x479c03(0x236));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x479c03(0x1ff),_0x479c03(0x231),_0x479c03(0x1c9),_0x479c03(0x289),_0x479c03(0x282)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x479c03(0x16a)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x479c03(0xe3)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x479c03(0x110)+pauseBotInterval/0xea60+_0x479c03(0x237),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x479c03(0x125))['version'],environment=require(_0x479c03(0x125))[_0x479c03(0x23c)]||_0x479c03(0x25a),botID=process[_0x479c03(0x1d8)][0x2]||_0x479c03(0x19d),pattern=/^[0-9]{3}$/;!pattern[_0x479c03(0xfa)](botID)&&(console[_0x479c03(0x176)](_0x479c03(0x217)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x479c03(0x1d8)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x479c03(0x184),logspath=userID?_0x479c03(0x254)+userID+'/':_0x479c03(0x254),loggerfile=fs[_0x479c03(0xf1)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x479c03(0xfb)](configpath);!fs[_0x479c03(0x201)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x479c03(0x1d7)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x479c03(0x133),performancefile=configpath+_0x479c03(0x1d7)+botID+'-performance.json',coinresultsfile=configpath+_0x479c03(0x1d7)+botID+'-results.json',settingsfile=configpath+_0x479c03(0x1ee),securefile=configpath+_0x479c03(0x1ec),configbackuppath=configpath+_0x479c03(0x127),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x479c03(0x103)]({'logs':[],'version':serverversion})[_0x479c03(0x227)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x479c03(0x227)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x479c03(0x103)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x479c03(0x103)]({'coins':[],'version':serverversion})[_0x479c03(0x227)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x13aeb3=>{console['log'](_0x13aeb3);},'simple':_0x3fa5cb=>{const _0x57d35a=_0x479c03;console[_0x57d35a(0x176)](_0x3fa5cb),loggerfile[_0x57d35a(0x227)](util[_0x57d35a(0xe8)](_0x3fa5cb)+'\x0a');},'full':async(_0x5400ee,_0xc8db47='')=>{const _0x5b7c92=_0x479c03;let _0x24f785;if(config[_0x5b7c92(0x27b)])_0x24f785=getTimeStamp()+':\x20'+config[_0x5b7c92(0x24e)]+_0x5b7c92(0x1f9)+_0x5400ee;else _0x24f785=getTimeStamp()+_0x5b7c92(0x19e)+botID+_0x5b7c92(0x1f9)+_0x5400ee;console[_0x5b7c92(0x176)](_0x24f785),loggerfile[_0x5b7c92(0x227)](util[_0x5b7c92(0xe8)](_0x24f785)+'\x0a'),_0xc8db47&&(console[_0x5b7c92(0x176)](_0xc8db47),loggerfile[_0x5b7c92(0x227)](util[_0x5b7c92(0xe8)](_0xc8db47)+'\x0a'));},'debug':async(_0x1e1fcf,_0x3864f7='')=>{const _0x61a13e=_0x479c03;let _0x4ea1e9;if(config[_0x61a13e(0x27b)])_0x4ea1e9=getTimeStamp()+':\x20'+config[_0x61a13e(0x24e)]+_0x61a13e(0x1d2)+_0x1e1fcf;else _0x4ea1e9=getTimeStamp()+_0x61a13e(0x19e)+botID+_0x61a13e(0x1d2)+_0x1e1fcf;if(debugging)console[_0x61a13e(0x176)](_0x4ea1e9);loggerfile[_0x61a13e(0x227)](util[_0x61a13e(0xe8)](_0x4ea1e9)+'\x0a');if(_0x3864f7){if(debugging)console[_0x61a13e(0x176)](_0x3864f7);loggerfile['write'](util[_0x61a13e(0xe8)](_0x3864f7)+'\x0a');}}};process['on']('uncaughtException',function(_0x480659){const _0x128570=_0x479c03;handleError(_0x480659,_0x128570(0x1b5));});settings[_0x479c03(0x1fa)]!=config[_0x479c03(0x1fa)]&&updateTimeshift(settings[_0x479c03(0x1fa)]);settings['onepagemode']!=config[_0x479c03(0x20c)]&&updateOnepagemode(settings[_0x479c03(0x20c)]);(settings[_0x479c03(0x230)]&&!config[_0x479c03(0x230)]||!settings[_0x479c03(0x230)]&&config[_0x479c03(0x230)])&&updateMarketcapApi(settings[_0x479c03(0x230)]);process[_0x479c03(0x214)]({'started':_0x479c03(0x1ba)},_0x21d1a6=>{}),initializeProcessListeners();function proxyEmit(_0x7ba7a9,_0x19bd0c=null){const _0x3672dd=_0x479c03;process[_0x3672dd(0x214)]({'function':_0x7ba7a9,'args':_0x19bd0c},_0xf81ec9=>{});}function initializeProcessListeners(){process['on']('message',_0x1034c4=>{const _0x207e20=_0x3742;switch(Object['keys'](_0x1034c4)[0x0]){case _0x207e20(0x1fa):_0x1034c4['timeshift']!=undefined&&(settings[_0x207e20(0x1fa)]=_0x1034c4[_0x207e20(0x1fa)],updateTimeshift(settings[_0x207e20(0x1fa)]));break;case _0x207e20(0x20c):_0x1034c4[_0x207e20(0x20c)]!=undefined&&(settings['onepagemode']=_0x1034c4['onepagemode'],updateOnepagemode(settings[_0x207e20(0x20c)]));break;case _0x207e20(0x230):_0x1034c4[_0x207e20(0x230)]!=undefined&&(settings[_0x207e20(0x230)]=_0x1034c4[_0x207e20(0x230)],updateMarketcapApi(settings[_0x207e20(0x230)]));break;case'bots':_0x1034c4[_0x207e20(0x115)]!=undefined&&(bots=JSON[_0x207e20(0x134)](_0x1034c4['bots']),proxyEmit('bots',bots));break;case _0x207e20(0x1f8):switch(_0x1034c4[_0x207e20(0x1f8)]){case _0x207e20(0x1a7):initclient();break;case _0x207e20(0x1b2):toggleBotMode();break;case _0x207e20(0x108):emitHistory(_0x1034c4['args']);break;case _0x207e20(0x1be):deleteHistoryAlerts(_0x1034c4[_0x207e20(0x23a)]);break;case'getPortfolio':getPortfolio(_0x1034c4[_0x207e20(0x23a)]);break;case'storeConfiguration':storeConfiguration(_0x1034c4[_0x207e20(0x23a)]);break;case _0x207e20(0x20e):storeHeadless(_0x1034c4[_0x207e20(0x23a)]);break;case _0x207e20(0x187):storeFiat(_0x1034c4['args']);break;case _0x207e20(0x19f):resetHistory();break;case _0x207e20(0x26a):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x1034c4[_0x207e20(0x23a)]);break;case _0x207e20(0x152):cancelLoading();break;case _0x207e20(0x234):showConfig();break;case _0x207e20(0x1c7):sendMetricsTelegram();break;case _0x207e20(0x259):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x190dc7=![]){const _0xc38445=_0x479c03;logger[_0xc38445(0x119)](_0xc38445(0x1d6)+(_0x190dc7?_0xc38445(0x10d):'no\x20exchange\x20reloaded')+_0xc38445(0x245)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x190dc7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xc38445(0x126)]!=''&&config[_0xc38445(0x126)]!=_0xc38445(0x221)){loadingProgress=0x0;_0x190dc7&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0xc38445(0x223),emittedConfiguration()),initialPerformanceStored=![]);const _0x24b685=await getCoins();[currentCoins,currentCoinsAll]=_0x24b685,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0xc38445(0x1d0)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xc38445(0xec)]==0x0&&allOpenOrders[_0xc38445(0xec)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3553c2=![]){const _0x3de96d=_0x479c03;logger[_0x3de96d(0x119)]('Resuming\x20('+(_0x3553c2?'quick':_0x3de96d(0xf2))+_0x3de96d(0x257)+config[_0x3de96d(0x252)]);if(pidBalances)clearTimeout(pidBalances);if(_0x3553c2){getBalances();return;}coinsLoaded=![];if(config[_0x3de96d(0x126)]!=''&&config[_0x3de96d(0x126)]!='***'){loadingProgress=0x1;const _0x4d3025=await getCoins();[currentCoins,currentCoinsAll]=_0x4d3025,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x3de96d(0x1d0)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3de96d(0xec)]==0x0&&allOpenOrders[_0x3de96d(0xec)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x32b379){const _0x2b63a4=_0x479c03;let _0x27909a=![];if(_0x32b379)_0x27909a=!![];let _0x4fed30;_0x27909a?_0x4fed30=_0x32b379['map'](_0x22d2b3=>_0x22d2b3[_0x2b63a4(0x175)]):_0x4fed30=currentCoinsAll[_0x2b63a4(0x21b)](_0x4c24b0=>_0x4c24b0[_0x2b63a4(0x175)]);if(!config['marketcapApi']||!_0x27909a&&!config[_0x2b63a4(0x1cd)]||_0x4fed30[_0x2b63a4(0xec)]==0x0)return;let _0x43c3f8=null;try{_0x43c3f8=await axios['get'](_0x2b63a4(0x1db),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2b63a4(0x230)]},'params':{'symbol':_0x4fed30['toString']()}});}catch(_0x1d94e9){_0x43c3f8=null,_0x1d94e9[_0x2b63a4(0x159)]()[_0x2b63a4(0x206)]('status\x20code\x20401')?(config[_0x2b63a4(0x230)]=![],updateConfig(),proxyEmit(_0x2b63a4(0x223),emittedConfiguration()),logHistory(_0x2b63a4(0x1f0),_0x2b63a4(0xd7))):(logHistory(_0x2b63a4(0x1f0),_0x2b63a4(0x20d)+schedulerInterval/(0x3c*0x3e8)+_0x2b63a4(0x237)),logger[_0x2b63a4(0x119)](_0x2b63a4(0xe4),_0x1d94e9[_0x2b63a4(0x159)]()+_0x2b63a4(0x1ef)+_0x1d94e9[_0x2b63a4(0x1e7)]));}if(_0x43c3f8){let _0x336dde=0x0;const _0x8e21e3=_0x43c3f8[_0x2b63a4(0x249)];_0x4fed30[_0x2b63a4(0x1fe)](_0x548a7f=>{const _0x44527c=_0x2b63a4;if(_0x8e21e3[_0x44527c(0x249)][_0x548a7f][0x0])_0x336dde+=_0x8e21e3['data'][_0x548a7f][0x0][_0x44527c(0x164)][_0x44527c(0x253)]['market_cap'];}),_0x4fed30[_0x2b63a4(0x1fe)](_0xd9b5b9=>{const _0x6f9b46=_0x2b63a4,_0x2894fe=_0x8e21e3[_0x6f9b46(0x249)][_0xd9b5b9][0x0]?_0x8e21e3['data'][_0xd9b5b9][0x0]['quote'][_0x6f9b46(0x253)]['market_cap']:0x0;if(_0x27909a){const _0x154b59=_0x32b379[_0x6f9b46(0x199)](_0x5ef3dd=>_0x5ef3dd[_0x6f9b46(0x175)]==_0xd9b5b9);_0x154b59&&(_0x154b59[_0x6f9b46(0x1a3)]=_0x2894fe);}else{const _0x5c655e=currentCoins[_0x6f9b46(0x199)](_0x53f8f8=>_0x53f8f8[_0x6f9b46(0x175)]==_0xd9b5b9);_0x5c655e&&(_0x5c655e[_0x6f9b46(0x1a3)]=_0x2894fe);const _0x7c14f6=currentCoinsAll['find'](_0x11d7aa=>_0x11d7aa[_0x6f9b46(0x175)]==_0xd9b5b9);_0x7c14f6&&(_0x7c14f6[_0x6f9b46(0x1a3)]=_0x2894fe);}}),!_0x27909a&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x503c0c=_0x479c03,_0x23db2b=0x2;let _0x17ae28=0x0,_0xec1a2c=0x0,_0x33e1b6=0x0,_0x5d3914=0x0,_0x7c4a73=0x0;config[_0x503c0c(0x117)][_0x503c0c(0x1fe)](_0x27c647=>{const _0x3ca140=_0x503c0c;if(!_0x27c647[_0x3ca140(0xd4)]){_0x33e1b6++,_0x17ae28+=_0x27c647[_0x3ca140(0x24a)];if(_0x27c647[_0x3ca140(0x24a)]===-0x1){_0x17ae28++;const _0x39a845=currentCoinsAll[_0x3ca140(0x199)](_0x5659a5=>_0x5659a5[_0x3ca140(0x175)]==_0x27c647['coin']);_0x39a845&&(_0x5d3914+=_0x39a845[_0x3ca140(0x1a3)],_0x7c4a73+=Math[_0x3ca140(0x172)](_0x39a845[_0x3ca140(0x1a3)]));}if(_0x27c647[_0x3ca140(0x24a)]!==-0x1)_0xec1a2c++;}});let _0x3e3791;const _0x5c4094=0x64-_0x17ae28,_0x5ccd86=_0x33e1b6-_0xec1a2c;_0x3e3791=_0x5ccd86===0x0?_0x17ae28:Math['max'](0x64,_0x17ae28),config[_0x503c0c(0x117)][_0x503c0c(0x1fe)](_0x45daef=>{const _0x30c0e3=_0x503c0c,_0x2914e9=currentCoinsAll['find'](_0x4f7383=>_0x4f7383[_0x30c0e3(0x175)]==_0x45daef[_0x30c0e3(0x175)]);_0x2914e9&&(_0x45daef[_0x30c0e3(0x1a3)]=_0x2914e9[_0x30c0e3(0x1a3)]);if(!_0x45daef[_0x30c0e3(0xd4)]){if(_0x3e3791<=0x64){if(_0x45daef['slider']===-0x1){if(_0x5d3914!==0x0&&config['marketcapEnabled']){if(_0x2914e9){if(config[_0x30c0e3(0x1cd)]==_0x30c0e3(0x1a3))_0x45daef['distribution']=(_0x5c4094/(_0x5d3914/_0x2914e9['marketcap']))['toFixed'](_0x23db2b);else config[_0x30c0e3(0x1cd)]=='marketcapsqrt'&&(_0x45daef[_0x30c0e3(0x1a5)]=(_0x5c4094/(_0x7c4a73/Math[_0x30c0e3(0x172)](_0x2914e9[_0x30c0e3(0x1a3)])))['toFixed'](_0x23db2b));}}}}}}),updateConfig();}function updateConfig(){const _0x5cbabd=_0x479c03;let _0x227cd5=dbConfig['get'](_0x5cbabd(0x139))[_0x5cbabd(0x199)]({'botID':botID})['value']();_0x227cd5&&dbConfig[_0x5cbabd(0x23d)](_0x5cbabd(0x139))['find']({'botID':botID})['assign'](config)[_0x5cbabd(0x227)]();}function logMemory(){const _0x440581=_0x479c03;if(environment!=_0x440581(0x15d))return;const _0x511867=process[_0x440581(0x1af)]()[_0x440581(0x149)]/0x400/0x400;logger[_0x440581(0x119)]('process\x20'+process[_0x440581(0x27e)]+'\x20uses\x20'+formatResult(_0x511867,0x1)+_0x440581(0x211));}async function startScheduler(){const _0x5d84d1=_0x479c03,_0x3b0c92=shiftedTime()[_0x5d84d1(0x22d)]();getMarketCap(),_0x3b0c92==0x1&&logMemory(),(_0x3b0c92==0x2||_0x3b0c92==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x430e64=![]){const _0x621ef=_0x479c03;logger[_0x621ef(0x119)](_0x621ef(0x1d9));if(!_0x430e64)while(lockOrders!=ORDERS[_0x621ef(0xe3)]||coolingDown){await sleep(0x3e8);}process[_0x621ef(0x214)]({'stop':_0x621ef(0x129)},_0x3f241f=>{});}async function initExchange(_0x377706=config['exchange'],_0x4c4614=config[_0x479c03(0x126)],_0x5e526e=config[_0x479c03(0x1d1)],_0x4097b3=config['apiPassword']){const _0x4d30c4=_0x479c03;if(exchange){logger['debug']('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x4d30c4(0x119)](_0x4d30c4(0x18f));!supportedExchanges()[_0x4d30c4(0x206)](_0x377706)&&(logHistory(_0x4d30c4(0x1f0),_0x4d30c4(0x218)+_0x377706+_0x4d30c4(0x1f2)),killBot());const _0x1cad3c=ccxt['pro'][_0x377706['toLowerCase']()];exchange=new _0x1cad3c({'apiKey':_0x4c4614,'secret':_0x5e526e,'options':{'defaultType':_0x4d30c4(0x17d)}});if(_0x4097b3)exchange[_0x4d30c4(0x1a0)]=_0x4097b3;}function updateExchange(_0xd06991,_0x27263b,_0x2defdb=null){const _0x43b0be=_0x479c03;exchange[_0x43b0be(0x126)]=_0xd06991,exchange['apiSecret']=_0x27263b,exchange[_0x43b0be(0x1f5)]=_0x2defdb,logger[_0x43b0be(0x119)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x50edf2=_0x479c03;let _0x2e6659=config['basecoin']==_0x50edf2(0x191)?_0x50edf2(0x191):config['basecoin']==_0x50edf2(0x1b1)?_0x50edf2(0x1b1):_0x50edf2(0x276),_0x6db327=allSymbols[_0x50edf2(0x206)](_0x2e6659+'/USD')?_0x50edf2(0x253):allSymbols['includes'](_0x2e6659+_0x50edf2(0x19a))?_0x50edf2(0x1c9):_0x50edf2(0x1b6),_0x24027e=allSymbols[_0x50edf2(0x206)](_0x2e6659+_0x50edf2(0x22f))?_0x50edf2(0x1b6):_0x6db327;enableFiatToggle=!![],_0x6db327=='EUR'&&(enableFiatToggle=![],storeFiat(_0x50edf2(0x1b6))),_0x24027e!='EUR'&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x2e6659+_0x24027e,'symbol':_0x2e6659+'/'+_0x24027e},'usd':{'coin':''+_0x2e6659+_0x6db327,'symbol':_0x2e6659+'/'+_0x6db327}};}async function initwsCcxt(){const _0x48a47f=_0x479c03;initCycle++;const _0x1202d1=initCycle;let _0x542e27=[];config[_0x48a47f(0x117)]['forEach'](_0x5e0301=>{const _0x153a64=_0x48a47f;if(!_0x5e0301['excluded']&&_0x5e0301[_0x153a64(0x175)]!=config[_0x153a64(0x17c)])_0x542e27[_0x153a64(0x1a9)](_0x5e0301[_0x153a64(0x281)]);});if(!_0x542e27[_0x48a47f(0x206)](stablecoins[_0x48a47f(0x1bf)][_0x48a47f(0x281)]))_0x542e27[_0x48a47f(0x1a9)](stablecoins['eur'][_0x48a47f(0x281)]);if(!_0x542e27[_0x48a47f(0x206)](stablecoins['usd'][_0x48a47f(0x281)]))_0x542e27['push'](stablecoins['usd'][_0x48a47f(0x281)]);if(config['exchange'][_0x48a47f(0x148)](_0x48a47f(0xf3))&&config[_0x48a47f(0x17c)]!='PAXG'){if(!_0x542e27['includes'](_0x48a47f(0x22b)+config[_0x48a47f(0x17c)]))_0x542e27[_0x48a47f(0x1a9)]('BNB/'+config[_0x48a47f(0x17c)]);}loadCoins(_0x542e27),_0x542e27=validateSymbols(_0x542e27);const _0x17f446=async _0x4e4487=>{const _0x68105d=_0x48a47f;let _0x23a288;try{const _0x40a7d1=await getTickers(_0x4e4487);Object['entries'](_0x40a7d1)[_0x68105d(0x1fe)](_0x38a2fc=>{const _0x561d71=_0x68105d;_0x23a288=_0x38a2fc[0x1][_0x561d71(0x281)],gTicker[noslash(_0x23a288)]=_0x38a2fc[0x1]['last'],gChange[_0x23a288]=_0x38a2fc[0x1][_0x561d71(0x122)];});}catch(_0x2ad1c5){await handleError(_0x2ad1c5,_0x68105d(0x11c),_0x23a288);}},_0xb7e850=async _0x35ed8a=>{const _0x4a319b=_0x48a47f;while(initCycle==_0x1202d1){if(!botPaused)try{const _0x1ba9c0=await exchange[_0x4a319b(0x1e6)](_0x35ed8a);gTicker[noslash(_0x1ba9c0[0x0]['symbol'])]=_0x1ba9c0[0x0]['price'];}catch(_0x215635){if(!exchangeStopped)await handleError(_0x215635,_0x4a319b(0x1de),_0x35ed8a);}else await sleep(0x64);}},_0x226a2a=async _0x151050=>{const _0x5c7ecc=_0x48a47f;while(initCycle==_0x1202d1){if(!botPaused)try{const _0x5756dc=await exchange[_0x5c7ecc(0x243)](_0x151050),_0x9995a0=_0x5756dc[_0x5c7ecc(0x239)]();gTicker[noslash(_0x9995a0[_0x5c7ecc(0x281)])]=_0x9995a0[_0x5c7ecc(0x1fc)];}catch(_0x2caa9a){if(!exchangeStopped)await handleError(_0x2caa9a,'watchTradesForSymbols()',_0x151050[_0x5c7ecc(0x159)]());}else await sleep(0x64);}},_0x2097b4=async _0x57e6a7=>{const _0x359e70=_0x48a47f;while(initCycle==_0x1202d1){if(!botPaused){let _0x35aa63;try{await sleep(0x3c*0x3e8);const _0x2e2b5e=await getTickers(_0x57e6a7);Object[_0x359e70(0x287)](_0x2e2b5e)[_0x359e70(0x1fe)](_0x13e30d=>{const _0x58f79a=_0x359e70;_0x35aa63=_0x13e30d[0x1][_0x58f79a(0x281)],gChange[_0x35aa63]=_0x13e30d[0x1][_0x58f79a(0x122)];});}catch(_0x186c3b){if(!exchangeStopped)await handleError(_0x186c3b,_0x359e70(0x244),_0x35aa63);}}else await sleep(0x64);}},_0xcaf525=async _0x4c04ab=>{const _0x8d0a33=_0x48a47f;while(initCycle==_0x1202d1){if(!botPaused)try{const _0x1db1ed=await exchange['watchOrders'](_0x4c04ab);initCycle==_0x1202d1&&_0x1db1ed[_0x8d0a33(0x1fe)](_0x5746c1=>{updateNumberCoinsCcxt(_0x5746c1);});}catch(_0x5cdcc5){if(!exchangeStopped)await handleError(_0x5cdcc5,'watchOrders()');}else await sleep(0x64);}};_0x17f446(_0x542e27),_0x2097b4(_0x542e27),exchange['has'][_0x48a47f(0x243)]&&!(config[_0x48a47f(0x252)]==_0x48a47f(0x177)&&_0x542e27[_0x48a47f(0xec)]>0xa)?_0x226a2a(_0x542e27):_0x542e27[_0x48a47f(0x1fe)](_0x573e35=>{_0xb7e850(_0x573e35);}),_0x542e27[_0x48a47f(0x1fe)](_0x341e9b=>{_0xcaf525(_0x341e9b);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4f2e22){const _0x6d044e=_0x479c03;let _0x2b24fc={};try{if(config[_0x6d044e(0x252)]!=_0x6d044e(0x158))_0x2b24fc=await exchange['fetchTickers'](_0x4f2e22);else for(const _0x308c87 of _0x4f2e22){const _0x439a10=await exchange['fetchTicker'](_0x308c87);_0x2b24fc[_0x308c87]=_0x439a10;}return _0x2b24fc;}catch(_0x3e71ba){throw _0x3e71ba;}}function setBlockTransactionDetection(_0x21dd64){const _0x128b05=_0x479c03;blockTransactionDetection=_0x21dd64,logger[_0x128b05(0x119)](_0x128b05(0x186)+blockTransactionDetection);}async function detectLiquidityChange(_0x13f99d=0x0){const _0x3a720a=_0x479c03;transactionDetectionOngoing=!![];try{const _0x56760f=await getCoins(_0x13f99d),[_0x2f3793,_0x1b5957]=_0x56760f;let _0x310fc1=[];currentCoins[_0x3a720a(0x1fe)](_0xe7b15f=>{const _0x35e82d=_0x3a720a,_0x543a6a=_0x2f3793[_0x35e82d(0x199)](_0x4ad61e=>_0x4ad61e[_0x35e82d(0x175)]==_0xe7b15f['coin']);if(_0x543a6a){if(_0xe7b15f[_0x35e82d(0x12e)]!=_0x543a6a['number']){let _0x12fada;if(_0xe7b15f['coin']!=config['basecoin']){const _0x2ca10e=gTicker[noslash(_0xe7b15f[_0x35e82d(0x281)])];_0x12fada=_0xe7b15f[_0x35e82d(0x168)]?0x1/_0x2ca10e:_0x2ca10e;}else _0x12fada=0x1;_0x310fc1['push']({'coin':_0xe7b15f['coin'],'symbol':_0xe7b15f[_0x35e82d(0x281)],'price':_0x12fada,'number':Number(formatResult(_0x543a6a[_0x35e82d(0x12e)]-_0xe7b15f['number'],0x8)),'basecoinvalue':_0x12fada*(_0x543a6a[_0x35e82d(0x12e)]-_0xe7b15f['number'])});}}});if(_0x310fc1[_0x3a720a(0xec)]>0x0&&!blockTransactionDetection){for(const _0x4de3ef of _0x310fc1){if(config[_0x3a720a(0x228)]){logger[_0x3a720a(0x119)](_0x3a720a(0x13d)+_0x4de3ef[_0x3a720a(0x269)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x3a720a(0x216)]);if(lastFees[_0x3a720a(0x216)]==0x0||Math[_0x3a720a(0x24d)](_0x4de3ef['basecoinvalue'])>lastFees[_0x3a720a(0x216)]*0x3){if(config['autoliquidity']=='update-liquidity'){delete _0x4de3ef[_0x3a720a(0x281)],delete _0x4de3ef[_0x3a720a(0x269)];let _0x77352f=[],_0x394365=[...config[_0x3a720a(0x21a)]]||[],_0x119553=config[_0x3a720a(0x21a)];_0x394365[_0x3a720a(0x272)]((_0x3c226a,_0x303760)=>_0x3c226a[_0x3a720a(0x12f)]>_0x303760[_0x3a720a(0x12f)]?-0x1:_0x303760[_0x3a720a(0x12f)]>_0x3c226a[_0x3a720a(0x12f)]?0x1:0x0);const _0x14357b=getDate();if(_0x394365[0x0]){const _0x3c7bf0=fns[_0x3a720a(0x134)](_0x394365[0x0]['date'],_0x3a720a(0x1e1),new Date()),_0x3837b3=fns['parse'](_0x14357b,_0x3a720a(0x1e1),new Date());if(fns['isEqual'](_0x3c7bf0,_0x3837b3)){_0x77352f=_0x394365[0x0][_0x3a720a(0x20f)];const _0x16b6da=_0x77352f[_0x3a720a(0x199)](_0x3ae47f=>_0x3ae47f['coin']==_0x4de3ef[_0x3a720a(0x175)]);_0x16b6da?(_0x16b6da[_0x3a720a(0x12e)]+=_0x4de3ef[_0x3a720a(0x12e)],_0x16b6da[_0x3a720a(0x12e)]==0x0&&(_0x77352f=_0x77352f[_0x3a720a(0x207)](_0x4f8202=>{const _0x5a4824=_0x3a720a;return _0x4f8202[_0x5a4824(0x175)]!=_0x4de3ef[_0x5a4824(0x175)];}))):_0x77352f['push'](_0x4de3ef);const _0x483a7d=_0x119553[_0x3a720a(0x199)](_0x2e89c0=>_0x2e89c0[_0x3a720a(0x12f)]==_0x14357b);_0x483a7d[_0x3a720a(0x20f)]=_0x77352f;}else _0x119553['push']({'date':_0x14357b,'changes':[_0x4de3ef]});}const _0x49de12=_0x119553[_0x3a720a(0x199)](_0x3b9390=>_0x3b9390['date']==_0x14357b);if(_0x49de12){let _0x59ebbc=!![];_0x49de12[_0x3a720a(0x20f)][_0x3a720a(0x1fe)](_0x28b452=>{const _0x38da30=_0x3a720a;if(_0x28b452[_0x38da30(0x12e)]!=0x0)_0x59ebbc=![];}),_0x59ebbc&&(_0x119553=_0x119553[_0x3a720a(0x207)](_0x370954=>{return _0x370954['date']!=_0x14357b;}));}let _0x3867f4=dbConfig[_0x3a720a(0x23d)](_0x3a720a(0x139))[_0x3a720a(0x199)]({'botID':botID})['value']();_0x3867f4&&(dbConfig[_0x3a720a(0x23d)](_0x3a720a(0x139))[_0x3a720a(0x199)]({'botID':botID})['assign']({'liquidity':_0x119553})[_0x3a720a(0x227)](),config[_0x3a720a(0x21a)]=_0x119553);logHistory(_0x3a720a(0x280),_0x3a720a(0x21f)+Math['abs'](_0x4de3ef['number'])+'\x20'+_0x4de3ef[_0x3a720a(0x175)]+'\x20'+(_0x4de3ef['number']>0x0?_0x3a720a(0x105):_0x3a720a(0xd3))+_0x3a720a(0x15b)),proxyEmit('configuration',emittedConfiguration());const _0x463d99=getNormalizedPerformance();emitPerformance(_0x463d99),getStartingBalances(_0x463d99),logger[_0x3a720a(0x119)](_0x3a720a(0x1b0));}else config[_0x3a720a(0x228)]==_0x3a720a(0x1ad)&&(config[_0x3a720a(0x256)]?(await storeHeadless({'headless':![]}),logHistory(_0x3a720a(0x280),_0x3a720a(0x21f)+Math[_0x3a720a(0x24d)](_0x4de3ef[_0x3a720a(0x12e)])+'\x20'+_0x4de3ef[_0x3a720a(0x175)]+'\x20'+(_0x4de3ef[_0x3a720a(0x12e)]>0x0?'added':_0x3a720a(0xd3))+_0x3a720a(0x167))):logger[_0x3a720a(0x119)](_0x3a720a(0x21f)+Math[_0x3a720a(0x24d)](_0x4de3ef[_0x3a720a(0x12e)])+'\x20'+_0x4de3ef['coin']+'\x20'+(_0x4de3ef[_0x3a720a(0x12e)]>0x0?_0x3a720a(0x105):_0x3a720a(0xd3))+_0x3a720a(0x120)));}else logger['debug'](_0x3a720a(0x170)+Math[_0x3a720a(0x24d)](_0x4de3ef[_0x3a720a(0x12e)])+'\x20'+_0x4de3ef[_0x3a720a(0x175)]+'\x20'+(_0x4de3ef['number']>0x0?_0x3a720a(0x105):_0x3a720a(0xd3)));}else logger[_0x3a720a(0x119)](_0x3a720a(0x21f)+Math[_0x3a720a(0x24d)](_0x4de3ef['number'])+'\x20'+_0x4de3ef['coin']+'\x20'+(_0x4de3ef[_0x3a720a(0x12e)]>0x0?_0x3a720a(0x105):_0x3a720a(0xd3))+_0x3a720a(0x12d));}currentCoins=_0x2f3793,currentCoinsAll=_0x1b5957;}}catch(_0x59c7bb){if(!exchangeStopped)await handleError(_0x59c7bb,_0x3a720a(0x27c));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x2995fe=_0x479c03;logger['debug'](_0x2995fe(0x179));try{markets=await exchange[_0x2995fe(0x16e)]();}catch(_0x5c355c){markets?logger[_0x2995fe(0x119)](_0x2995fe(0x271)+_0x5c355c[_0x2995fe(0x159)]()):(loading[_0x2995fe(0x279)]=!![],emitLoadingProgress(),_0x5c355c[_0x2995fe(0x159)]()[_0x2995fe(0x109)]()[_0x2995fe(0x206)](_0x2995fe(0x1a1))||_0x5c355c['toString']()[_0x2995fe(0x109)]()['includes'](_0x2995fe(0x1b9))?logHistory(_0x2995fe(0x1f0),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'):handleErrorNoStop(_0x5c355c,'loadSymbols()'),logHistory(_0x2995fe(0x1f0),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x2995fe(0x1f0),_0x2995fe(0x1fd)+loadCoinsRetryInterval/0xea60+_0x2995fe(0x24f)),logger[_0x2995fe(0x119)](_0x2995fe(0xe4),_0x5c355c),await sleep(loadCoinsRetryInterval),restartBot());}allSymbols=[],Object[_0x2995fe(0x287)](markets)['forEach'](_0x5b21d4=>{const _0x8ffd1=_0x2995fe;_0x5b21d4[0x1]['active']&&_0x5b21d4[0x1][_0x8ffd1(0x17d)]&&allSymbols[_0x8ffd1(0x1a9)](_0x5b21d4[0x0]);});}function validateSymbols(_0x4b0ace){const _0x54c015=_0x479c03;let _0x674324=[];return _0x4b0ace[_0x54c015(0x1fe)](_0x472f5b=>{const _0x318b0e=_0x54c015;!allSymbols[_0x318b0e(0x206)](_0x472f5b)?logHistory('error',_0x318b0e(0x203)+_0x472f5b+_0x318b0e(0x1dc)):_0x674324['push'](_0x472f5b);}),_0x674324;}async function initclient(){const _0x56c755=_0x479c03;proxyEmit(_0x56c755(0x223),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x56c755(0x132),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x7b062=getNormalizedPerformance();emitPerformance(_0x7b062),getStartingBalances(_0x7b062);}async function toggleBotMode(){const _0x112c5d=_0x479c03;let _0x1e84d8=dbConfig[_0x112c5d(0x23d)]('bot')[_0x112c5d(0x199)]({'botID':botID})[_0x112c5d(0x275)]();if(_0x1e84d8){const _0x29d49b=!_0x1e84d8['headless'];dbConfig[_0x112c5d(0x23d)](_0x112c5d(0x139))[_0x112c5d(0x199)]({'botID':botID})[_0x112c5d(0xff)]({'headless':_0x29d49b})[_0x112c5d(0x227)](),config[_0x112c5d(0x256)]=_0x29d49b,proxyEmit(_0x112c5d(0x223),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x175569=_0x479c03;process[_0x175569(0x214)]({'updatebotmanager':!![]},_0x2992fc=>{}),logger[_0x175569(0x119)](_0x175569(0x116)+config[_0x175569(0x256)]);}async function loadCoins(_0x171688){const _0xd92e0f=_0x479c03;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x8c8f20,_0x336a17=0x0,_0x1959c5=0x0;_0x171688['forEach'](_0x245706=>{const _0x5e2de6=_0x3742;loading[_0x5e2de6(0x268)][_0x5e2de6(0x1a9)](_0x245706);}),loadingCanceled=![];let _0x2be57f=![];while(_0x8c8f20!=_0x171688[_0xd92e0f(0xec)]+maxLoadingProgress){_0x8c8f20=loadingProgress,_0x171688[_0xd92e0f(0x1fe)](_0x227fe9=>{const _0x2e3203=_0xd92e0f;if(gTicker[noslash(_0x227fe9)]){loading['remainingSymbols']=loading[_0x2e3203(0x268)][_0x2e3203(0x207)](_0x1a37b5=>_0x1a37b5!=_0x227fe9);if(!watchedSymbols[_0x2e3203(0x206)](_0x227fe9))watchedSymbols['push'](_0x227fe9);_0x8c8f20++;}}),loading[_0xd92e0f(0xd5)]=Math[_0xd92e0f(0x16b)](_0x8c8f20/(_0x171688[_0xd92e0f(0xec)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x1959c5>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1959c5>0x78*0x5&&!_0x2be57f&&(_0x2be57f=!![],logHistory(_0xd92e0f(0x1f0),_0xd92e0f(0x1b8)+loading[_0xd92e0f(0x268)][_0xd92e0f(0x270)](',\x20')+_0xd92e0f(0x1d5)),logHistory(_0xd92e0f(0x1f0),_0xd92e0f(0x1fd)+loadCoinsRetryInterval/0xea60+_0xd92e0f(0x24f)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xd92e0f(0x279)]=!![],emitLoadingProgress();break;}else _0x336a17!=loading[_0xd92e0f(0xd5)]&&(_0x336a17=loading[_0xd92e0f(0xd5)],emitLoadingProgress()),_0x1959c5++,await sleep(0xc8);}_0x8c8f20==_0x171688['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0xd92e0f(0x214)]({'status':_0xd92e0f(0x18b),'live':_0xd92e0f(0x1ba)},_0xe7f0b9=>{}),_0x2be57f&&logHistory(_0xd92e0f(0x280),_0xd92e0f(0x202)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x376f44=_0x479c03;proxyEmit(_0x376f44(0x223),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x291366=_0x479c03;proxyEmit(_0x291366(0x22e),loading);}async function getFiat(){const _0x5a2b52=_0x479c03;let _0x215f47=gTicker[stablecoins[_0x5a2b52(0x1bf)][_0x5a2b52(0x175)]],_0x27cbfd=gTicker[stablecoins[_0x5a2b52(0x1c2)]['coin']];return{'eur':Number(_0x215f47),'usd':Number(_0x27cbfd)};}function capitalize(_0x441d31){const _0x49eb6e=_0x479c03;return _0x441d31['substring'](0x0,0x1)[_0x49eb6e(0x13a)]()+_0x441d31[_0x49eb6e(0x1c8)](0x1);}function supportedExchanges(){const _0x136b2e=_0x479c03,_0x9847f2=['ws','fetchTickers',_0x136b2e(0x10a),_0x136b2e(0x1e6),'watchOrders',_0x136b2e(0xe9),_0x136b2e(0x192),_0x136b2e(0x242),_0x136b2e(0x157)];let _0x193dde=[],_0x5c70b3=[],_0x9e6da7=ccxt[_0x136b2e(0x1f4)][_0x136b2e(0x261)];_0x9e6da7[_0x136b2e(0x1fe)](_0x3fbbe0=>{const _0x277ceb=_0x136b2e;try{const _0x299174=new ccxt[(_0x277ceb(0x1f4))][_0x3fbbe0]();_0x5c70b3['push'](_0x299174);}catch(_0x169059){}}),_0x5c70b3[_0x136b2e(0x1fe)](_0x181cdd=>{const _0x1d31e0=_0x136b2e;let _0x3407b7=0x0;_0x9847f2[_0x1d31e0(0x1fe)](_0x373e14=>{const _0x17446c=_0x1d31e0;_0x373e14 in _0x181cdd[_0x17446c(0xd8)]&&_0x181cdd['has'][_0x373e14]&&_0x3407b7++;}),_0x3407b7==_0x9847f2[_0x1d31e0(0xec)]&&_0x193dde['push'](capitalize(_0x181cdd['id']));});let _0x5dcd0f=[];return _0x9e6da7[_0x136b2e(0x1fe)](_0x2c6c8a=>{const _0x2a6d47=_0x136b2e;_0x2c6c8a=capitalize(_0x2c6c8a);if(!_0x193dde[_0x2a6d47(0x206)](_0x2c6c8a))_0x5dcd0f['push'](_0x2c6c8a);}),_0x193dde;}function setStartDatePerformance(){const _0x142154=_0x479c03;if(config&&config[_0x142154(0x21a)][0x0][_0x142154(0x20f)][_0x142154(0xec)]!=0x0){const _0x427b89=config[_0x142154(0x21a)][0x0][_0x142154(0x20f)];dbPerformance[_0x142154(0x23d)](_0x142154(0x249))['find']({'date':config[_0x142154(0x11f)]})[_0x142154(0xff)]({'coins':_0x427b89})['write']();}}async function recreateCoinResults(){const _0x259da9=_0x479c03;recreationNeeded=![];let _0x1d069c,_0x26f433=[];try{for(const _0x1b5622 of currentCoins){if(_0x1b5622[_0x259da9(0x175)]!=config[_0x259da9(0x17c)]){let _0x425667=0x0,_0x21f953,_0x1b2d06;_0x1d069c=await getAllEventOrders(_0x1b5622[_0x259da9(0x281)]);if(_0x1d069c[_0x259da9(0xec)]>0x0)_0x1d069c[_0x259da9(0x1fe)](_0x250af2=>{const _0x4e3c95=_0x259da9,_0x54c0d0=_0x1b5622[_0x4e3c95(0x281)]['includes'](config[_0x4e3c95(0x17c)]+'/');_0x26f433[_0x4e3c95(0x1a9)]({'datetime':_0x250af2[_0x4e3c95(0x112)],'coin':_0x1b5622[_0x4e3c95(0x175)],'symbol':_0x1b5622[_0x4e3c95(0x281)],'side':_0x250af2['side'],'reverse':_0x54c0d0,'amount':formatResult(_0x250af2[_0x4e3c95(0xe2)],0x8),'filled':formatResult(_0x250af2[_0x4e3c95(0xe2)],0x8),'price':formatResult(_0x250af2[_0x4e3c95(0x1fc)],0x8)}),_0x425667=_0x250af2[_0x4e3c95(0x24c)]==_0x4e3c95(0x219)?_0x425667+_0x250af2[_0x4e3c95(0xe2)]:_0x425667-_0x250af2[_0x4e3c95(0xe2)];if(!_0x1b2d06)_0x1b2d06=_0x250af2[_0x4e3c95(0x1fc)];});_0x21f953=_0x1b5622[_0x259da9(0x12e)]-_0x425667;let _0x296e73;config[_0x259da9(0x21a)][_0x259da9(0x1fe)](_0x146732=>{const _0x62a250=_0x259da9;!_0x296e73&&(_0x296e73=_0x146732[_0x62a250(0x20f)][_0x62a250(0x199)](_0x122791=>_0x122791[_0x62a250(0x175)]==_0x1b5622['coin']),_0x296e73&&(_0x21f953=_0x296e73[_0x62a250(0x12e)],_0x1b2d06=_0x296e73[_0x62a250(0x1fc)]));});let _0x3b0e5a=dbCoinResults[_0x259da9(0x23d)](_0x259da9(0x14f))['find']({'coin':_0x1b5622['coin']})[_0x259da9(0x275)]();_0x3b0e5a={'coin':_0x1b5622[_0x259da9(0x175)],'number':_0x21f953,'breakeven':_0x1b2d06,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x259da9(0x23d)](_0x259da9(0x14f))['find']({'coin':_0x1b5622[_0x259da9(0x175)]})[_0x259da9(0xff)](_0x3b0e5a)[_0x259da9(0x227)]();}}_0x26f433[_0x259da9(0x272)]((_0x27baab,_0x2ad148)=>_0x27baab['datetime']>_0x2ad148[_0x259da9(0x112)]?0x1:_0x2ad148[_0x259da9(0x112)]>_0x27baab[_0x259da9(0x112)]?-0x1:0x0);let _0x3046a0=0x0;for(let _0x1c35fc of _0x26f433){await updateCoinResults(_0x1c35fc,!![]);}}catch(_0x124657){await handleError(_0x124657,'recreateCoinResults()');}}async function getAllEventOrders(_0x416a11){const _0x2bd00d=_0x479c03;let _0x318857=[],_0x33e767=dbLogs[_0x2bd00d(0x23d)](_0x2bd00d(0xd6))[_0x2bd00d(0x207)](_0x34016e=>{const _0x22cb24=_0x2bd00d,_0x2a2481=_0x34016e['event']['toLowerCase']();return _0x2a2481['includes'](_0x416a11['toLowerCase']())&&(_0x2a2481['includes'](_0x22cb24(0x183))&&_0x2a2481['includes'](_0x22cb24(0x174))||_0x2a2481[_0x22cb24(0x206)]('filled')&&_0x2a2481['includes'](_0x22cb24(0x174)));})['sortBy'](_0x2bd00d(0x156))['value']();return _0x33e767[_0x2bd00d(0x1fe)](_0x41da54=>{const _0x105e3a=_0x2bd00d,_0x1facb9=_0x41da54[_0x105e3a(0x278)][_0x105e3a(0x206)](_0x105e3a(0x25c))?_0x105e3a(0x25c):_0x105e3a(0x219),_0x4f1740=/#([0-9]|\.)+\s/i,_0x569a38=Number(_0x4f1740['exec'](_0x41da54[_0x105e3a(0x278)])[0x0][_0x105e3a(0xf4)](0x1)),_0x629ccd=/@([0-9]|\.)+$/i,_0x879fea=Number(_0x629ccd['exec'](_0x41da54[_0x105e3a(0x278)])[0x0][_0x105e3a(0xf4)](0x1));_0x318857[_0x105e3a(0x1a9)]({'datetime':_0x41da54[_0x105e3a(0x156)],'coin':symbolToCoin(_0x416a11),'symbol':_0x416a11,'side':_0x1facb9,'amount':_0x569a38,'filled':_0x569a38,'price':_0x879fea});}),_0x318857;}async function validate24hChanges(){const _0x23d880=_0x479c03;for(const _0x43656d of currentCoins){if(_0x43656d['coin']!=config[_0x23d880(0x17c)]){let _0x15f7fe;_0x43656d[_0x23d880(0x168)]?_0x15f7fe=formatResult((0x1/(gChange[_0x43656d[_0x23d880(0x281)]]/0x64+0x1)-0x1)*0x64,0x3):_0x15f7fe=gChange[_0x43656d[_0x23d880(0x281)]],_0x15f7fe<config[_0x23d880(0x166)]&&(logHistory('error',_0x43656d['coin']+_0x23d880(0x12c)+_0x15f7fe+'%'),logHistory('error',_0x23d880(0x232)),logHistory(_0x23d880(0x1f0),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4441a1,_0xae2af4){const _0x2d3167=_0x479c03;if(!_0x4441a1)return!![];const _0x36d9c4=_0xae2af4[_0x2d3167(0x27d)]('.'),_0x4762f1=_0x4441a1[_0x2d3167(0x27d)]('.');for(var _0x516b47=0x0;_0x516b47<_0x4762f1['length'];_0x516b47++){const _0x4616cd=~~_0x4762f1[_0x516b47],_0x254d7a=~~_0x36d9c4[_0x516b47];if(_0x4616cd<_0x254d7a)return!![];if(_0x4616cd>_0x254d7a)return![];}return![];}function _0x19a2(){const _0x3384e7=['Order\x20filled:\x20','getFullYear','uncaughtException','EUR','closed','Failed\x20to\x20load\x20coin\x20data\x20for\x20','request-time','running','starting-balances','\x20value','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','deleteHistoryAlerts','eur','\x20>\x20details:','\x20API\x20secret\x20is\x20invalid','usd','Error\x20details\x20(1):','canceled','Exception\x20thrown\x20in\x20','2.3.5','sendMetricsTelegram','substring','USDT','Invalid\x20balance\x20for\x20','API-key\x20format\x20invalid','status','marketcapEnabled','\x20portfolio:</b>\x20\x0a\x0a','currency','Loading\x20completed','apiSecret','\x20>\x20[DEBUG]\x20','fetchBalance()','emojibuy','\x20-\x20bot\x20not\x20started','Reset\x20|\x20','bot-','argv','Initiating\x20bot\x20restart','<b>','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','writeFile','watchTrades()','getMonth','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','yyyy/MM/dd','\x20/\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','warning','target','watchTrades','code','Saving\x20configuration','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','10YWMRUL','getTime','bb-secure.json','balancing\x20resumed','bb-settings.json','\x20-\x20','error','sha256','\x20exchange','settings','pro','apiPassword','update-liquidity','path','function','\x20>\x20','timeshift','recreate','price','Pausing\x20for\x20','forEach','BUSD','getMinutes','existsSync','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Invalid\x20symbol:\x20','getSeconds','trade','includes','filter','\x20orders\x20in\x20less\x20than\x20','leftTxt','2\x20-\x20Orders\x20unlocked','Bitget','onepagemode','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','storeHeadless','changes','fees','\x20MB','2\x20-\x20Handled\x20open\x20orders','balancing\x20resumes\x20when\x20cooldown\x20ends','send','sells','highest','Error:\x20Invalid\x20argument\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','buy','liquidity','map','RateLimitExceeded','fee','net-basecoin','Portfolio\x20change\x20detected:\x20','last','***','Order\x20amount\x20is\x20invalid:\x20','configuration','valid','810348nEfwCg','OrderNotFound','write','autoliquidity','indexOf','\x20metrics:</b>\x20\x0a\x0a','BNB/','cooldown','getHours','coin-loading-progress','/EUR','marketcapApi','TUSD','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','botID','showConfig','\x20hour','axios','\x20minutes','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','pop','args','442992PYFdJv','environment','get','emojisell','Order(s)\x20not\x20validated\x20after\x20','full','isEqual','fetchOpenOrders','watchTradesForSymbols','fetchTickers()','\x20|\x20exchange:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','Exchange','\x20attempts','data','slider','\x20API\x20key\x20is\x20invalid','side','abs','botname','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','netoffset','Net\x20effect','exchange','USD','./logs/','padStart','headless',')\x20|\x20exchange:\x20','cost','sendPortfolioTelegram','production','Initializing\x20coin\x20results','sell','differenceInSeconds','Error\x20details\x20(0):','stringify','string','exchanges','Valid\x20balance\x20for\x20','Executed\x20','0\x20-\x20EXECUTION:\x20','final','\x20|\x20lock\x20orders:\x20','type','remainingSymbols','basecoinvalue','getStartingBalances','constructor','shift','cloneDeep','keys','lowdb','join','Error\x20in\x20loadSymbols():\x20','sort','average','remove','value','BTC','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','event','cancel','291895DBhsEk','showname','detectLiquidityChange()','split','pid','Order\x20is\x20invalid:\x20','success','symbol','USDP','1\x20-\x20Unlocking\x20orders','ExchangeError','Stopped\x20fetching\x20balance\x20after\x20','142sGeLXz','entries','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','USDC','getOpenOrders()','secure','toFixed','Avoiding\x20continuous\x20order\x20attempts','min','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','</pre>','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','page','red_yellow_blue','removed','excluded','progress','logs','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','has','PermissionDenied','net-fiat','starting-balance-','-performance.json','portfolio1','\x20|\x20Custom\x20ID:\x20','Trigger:\x20','1\x20-\x20partially\x20FILLED\x20(','ask','filled','UNLOCKED','Error\x20details:','startprice','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','format','cancelOrder','Huobipro','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','length','Limit\x20(low-margin)',':\x20timer\x20>','kill','Unknown\x20error\x20-\x20check\x20logs','createWriteStream','complete','Binance','slice','-results.json','findIndex','ExchangeNotAvailable','max','token\x20is\x20expired','test','mkdirSync','6297183Ovplio','getDate','open','assign','change','initial',')\x20unknown\x20order:\x20','defaults','Insufficient\x20funds\x20to\x20execute\x20order:\x20','added','ID:\x20','limits','emitHistory','toLowerCase','fetchTicker','rightTxt','random','exchange\x20reload','************','amount','\x20>\x20pausing\x20bot\x20for\x20','lowdb/adapters/FileSync','datetime','openOrders','\x20minutes\x20-\x20','bots','Headless:\x20','portfolio','RETRY\x20-\x20Error\x20in\x20','debug','Net\x20','\x20:\x20','initTickers()','portfolio2','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startdate','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','ordertype','percentage','ongoing','2\x20-\x20Validate\x20orders:\x20','./version.json','apiKey','/backup/','realized','restart','Cex','threshold','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','number','date','9645dBUJGh','%\x20(','balances','-events.json','parse','Invalid\x20quantity','search','\x20|\x20','2719660yJKvPD','bot','toUpperCase','orderId','recent20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','privateKey','LOCKED','RSA-OAEP','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','limit-high','getCoinNumber()','bid','customId','cancelOrders()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','startsWith','heapUsed','offset','util','\x20exchange\x20error:\x20','-------------------------------\x0a','BNB','coins','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Cooldown\x20ended\x20-\x20balancing\x20resumed','cancelLoading','startnumber','decrypt','fiat','time','fetchBalance','Cryptocom','toString','72jUjVVX','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','1\x20-\x20FILLED\x20unknown\x20order:\x20','staging','version','replace','colorscheme','Symbol(s):\x20','none','breakeven','quote','splice','change24h','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','reverse','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','freeze','round','sortBy','<pre>','loadMarkets','placeOrder()','Fee\x20discount\x20refund\x20detected:\x20','ORDERS.UNLOCKING','sqrt','set','order','coin','log','Bybit','NetworkError','Loading\x20symbols','Market','buys','basecoin','spot','InvalidNonce','orderstatus','enableFiatToggle','Unknown\x20error:\x20','delta','market','./config/','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Block\x20transaction\x20detection:\x20','storeFiat','(((.+)+)+)+$','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','UNLOCKING','enabled','MIN_NOTIONAL','unlinkSync','limit','Initializing\x20exchange',')\x20known\x20order:\x20','ETH','createOrder','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','privateKeyFromPem','7532064ieqcFJ','pki','timeout','fromCodePoint','find','/USDT','2.6.23','no\x20open\x20orders','001',':\x20Bot\x20','resetHistory','password','timestamp','OnMaintenance','marketcap','2\x20-\x20handling\x20FILLED\x20order:\x20','distribution','performance','initclient','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','push','Error\x20while\x20deleting\x20files:\x20','2.6.22','AuthenticationError','switch-manual','<b>Bot\x20','memoryUsage','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','PAXG','toggleBotMode'];_0x19a2=function(){return _0x3384e7;};return _0x19a2();}async function oneTimeMigration(){const _0x312a8f=_0x479c03;let _0x5091ad=dbLogs[_0x312a8f(0x23d)](_0x312a8f(0x15e))[_0x312a8f(0x275)]();if(isOlderVersion(_0x5091ad,_0x312a8f(0x1c6))){let _0x7de0eb=[];const _0x164108=dbLogs[_0x312a8f(0x23d)](_0x312a8f(0xd6))[_0x312a8f(0x275)]();_0x164108[_0x312a8f(0x1fe)](_0x1aad60=>{const _0x53c27a=_0x312a8f;_0x7de0eb[_0x53c27a(0x1a9)]({'time':_0x1aad60[_0x53c27a(0x156)],'type':_0x1aad60[_0x53c27a(0x267)],'event':_0x1aad60['event']});}),dbLogs['get'](_0x312a8f(0xd6))[_0x312a8f(0xff)](_0x7de0eb)[_0x312a8f(0x227)]();}let _0x132e78=dbConfig[_0x312a8f(0x23d)]('version')[_0x312a8f(0x275)]();if(isOlderVersion(_0x132e78,_0x312a8f(0x1c6))){let _0x31fd91=dbConfig[_0x312a8f(0x23d)](_0x312a8f(0x139))[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0x275)]();if(_0x31fd91){let _0x4360ce=[];_0x31fd91[_0x312a8f(0x117)][_0x312a8f(0x1fe)](_0x13eee7=>{const _0x106799=_0x312a8f;_0x4360ce[_0x106799(0x1a9)]({'coin':_0x13eee7[_0x106799(0x175)],'number':_0x13eee7['startnumber'],'price':_0x13eee7[_0x106799(0xe5)]}),delete _0x13eee7[_0x106799(0x153)],delete _0x13eee7[_0x106799(0xe5)];});if(_0x4360ce[_0x312a8f(0xec)]!==0x0)fs[_0x312a8f(0x1dd)](configbackuppath+(_0x312a8f(0xdb)+botID+'.json'),JSON['stringify'](_0x4360ce,null,0x4),function(_0x1213d7){if(_0x1213d7){}});const _0x2b09a2=(_0x435870,_0x59127f)=>{const _0x4b67d1=_0x312a8f;let _0xe8d445=[];_0x59127f[_0x4b67d1(0x1fe)](_0x2f6f0f=>{const _0x1a327c=_0x4b67d1,_0x36b176=_0x435870['find'](_0x211fd1=>_0x211fd1[_0x1a327c(0x175)]==_0x2f6f0f[_0x1a327c(0x175)]);if(!_0x36b176)_0xe8d445['push'](_0x2f6f0f);});let _0x4da387=[];return _0x435870[_0x4b67d1(0x1fe)](_0x354018=>{const _0x3a6ed3=_0x4b67d1,_0x33e3ab=_0x59127f[_0x3a6ed3(0x199)](_0x3952f7=>_0x3952f7[_0x3a6ed3(0x175)]==_0x354018['coin']);if(!_0x33e3ab||_0x33e3ab['number']==0x0&&_0x354018[_0x3a6ed3(0x12e)]!=0x0)_0x4da387['push'](_0x354018);}),{'missingDay1':_0xe8d445,'notInDay2':_0x4da387};},_0x19ce32=dbPerformance[_0x312a8f(0x23d)](_0x312a8f(0x249))['cloneDeep']()[_0x312a8f(0x275)]();if(_0x19ce32['length']>0x1){const {missingDay1:_0x55a06a,notInDay2:_0x17363f}=_0x2b09a2(_0x4360ce,_0x19ce32[0x1][_0x312a8f(0x14f)]);_0x4360ce=[..._0x4360ce,..._0x55a06a],_0x17363f[_0x312a8f(0x1fe)](_0x10f300=>{const _0x419cba=_0x312a8f;let _0x51ed79=_0x4360ce[_0x419cba(0xf6)](_0x18e15c=>_0x18e15c['coin']==_0x10f300[_0x419cba(0x175)]);_0x51ed79!=-0x1&&_0x4360ce[_0x419cba(0x165)](_0x51ed79,0x1);});}_0x4360ce[_0x312a8f(0x272)]((_0x5c689a,_0x56e1d2)=>_0x5c689a[_0x312a8f(0x175)]>_0x56e1d2['coin']?0x1:_0x56e1d2[_0x312a8f(0x175)]>_0x5c689a[_0x312a8f(0x175)]?-0x1:0x0);let _0x24d8b1=[{'date':_0x31fd91[_0x312a8f(0x11f)],'changes':_0x4360ce}];_0x19ce32[_0x312a8f(0xec)]>0x2&&_0x19ce32['forEach']((_0xa6c9c2,_0x1411af)=>{const _0x5eef58=_0x312a8f;if(_0x1411af>0x0&&_0x1411af<_0x19ce32['length']-0x1){const {missingDay1:_0x366425,notInDay2:_0x5e5568}=_0x2b09a2(_0x19ce32[_0x1411af]['coins'],_0x19ce32[_0x1411af+0x1]['coins']);_0x4360ce=[],(_0x366425['length']!=0x0||_0x5e5568['length']!=0x0)&&(_0x366425['length']!=0x0&&_0x4360ce[_0x5eef58(0x1a9)](..._0x366425),_0x5e5568[_0x5eef58(0xec)]!=0x0&&(_0x5e5568[_0x5eef58(0x1fe)](_0x53a0ac=>{const _0x5f48cc=_0x5eef58;_0x53a0ac[_0x5f48cc(0x12e)]=-_0x53a0ac['number'];}),_0x4360ce['push'](..._0x5e5568)),_0x4360ce[_0x5eef58(0x272)]((_0x44e276,_0x22a481)=>_0x44e276[_0x5eef58(0x175)]>_0x22a481['coin']?0x1:_0x22a481[_0x5eef58(0x175)]>_0x44e276[_0x5eef58(0x175)]?-0x1:0x0),_0x24d8b1['push']({'date':_0x19ce32[_0x1411af+0x1]['date'],'changes':_0x4360ce}));}}),dbConfig['get'](_0x312a8f(0x139))[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0xff)]({..._0x31fd91,'liquidity':_0x24d8b1})[_0x312a8f(0x227)]();}}if(isOlderVersion(_0x132e78,'2.6.0')){let _0x410aa8=dbConfig['get']('bot')[_0x312a8f(0x199)]({'botID':botID})['value']();if(_0x410aa8){const _0x49d14e=_0x410aa8[_0x312a8f(0x252)],_0x167c2f=_0x49d14e?capitalize(_0x49d14e):_0x312a8f(0xf3);dbConfig[_0x312a8f(0x23d)]('bot')[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0xff)]({'exchange':_0x167c2f})['write']();}}if(isOlderVersion(_0x132e78,_0x312a8f(0x1ab))){let _0x3a2f3d=dbConfig['get'](_0x312a8f(0x139))[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0x275)]();if(_0x3a2f3d){const _0x3c3073=_0x3a2f3d[_0x312a8f(0x1cd)],_0x1dd453=_0x3c3073?_0x312a8f(0x1a3):![];dbConfig[_0x312a8f(0x23d)](_0x312a8f(0x139))[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0xff)]({'marketcapEnabled':_0x1dd453})[_0x312a8f(0x227)]();}}if(isOlderVersion(_0x132e78,_0x312a8f(0x19b))){let _0x24842a=dbConfig['get'](_0x312a8f(0x139))['find']({'botID':botID})[_0x312a8f(0x275)]();if(_0x24842a){const _0x550b0d=_0x24842a[_0x312a8f(0x228)],_0x3c8f24=_0x550b0d?_0x312a8f(0x1f6):![];dbConfig[_0x312a8f(0x23d)](_0x312a8f(0x139))[_0x312a8f(0x199)]({'botID':botID})[_0x312a8f(0xff)]({'autoliquidity':_0x3c8f24})[_0x312a8f(0x227)]();}}let _0x7446e8=dbPerformance[_0x312a8f(0x23d)](_0x312a8f(0x15e))[_0x312a8f(0x275)]();isOlderVersion(_0x7446e8,_0x312a8f(0x1c6))&&setStartDatePerformance();let _0x51ff48=dbCoinResults[_0x312a8f(0x23d)](_0x312a8f(0x15e))['value']();if(isOlderVersion(_0x51ff48,'2.5.0')){let _0x2a0db6=dbCoinResults[_0x312a8f(0x23d)](_0x312a8f(0x14f))[_0x312a8f(0x275)]();if(_0x2a0db6['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3028a8=_0x479c03;dbConfig[_0x3028a8(0x173)](_0x3028a8(0x15e),serverversion)['write'](),dbPerformance[_0x3028a8(0x173)](_0x3028a8(0x15e),serverversion)[_0x3028a8(0x227)](),dbLogs[_0x3028a8(0x173)](_0x3028a8(0x15e),serverversion)['write'](),dbCoinResults[_0x3028a8(0x173)](_0x3028a8(0x15e),serverversion)[_0x3028a8(0x227)]();}function getConfiguration(_0x5ab696){const _0x5908b6=_0x479c03;let _0x12c159=dbConfig[_0x5908b6(0x23d)](_0x5908b6(0x139))[_0x5908b6(0x199)]({'botID':_0x5ab696})['value']();if(_0x12c159){let _0x39291c=![];typeof _0x12c159['threshold']==_0x5908b6(0x260)&&(_0x12c159={..._0x12c159,'threshold':Number(_0x12c159[_0x5908b6(0x12b)])},_0x39291c=!![]),_0x12c159[_0x5908b6(0x166)]==undefined&&(_0x12c159={..._0x12c159,'change24h':-0x14},_0x39291c=!![]),_0x12c159['fiat']==undefined&&(_0x12c159={..._0x12c159,'fiat':_0x5908b6(0x253)},_0x39291c=!![]),_0x12c159[_0x5908b6(0x20c)]==undefined&&(_0x12c159={..._0x12c159,'onepagemode':settings[_0x5908b6(0x20c)]},_0x39291c=!![]),_0x12c159['colorscheme']==undefined&&(_0x12c159={..._0x12c159,'colorscheme':_0x5908b6(0xd2)},_0x39291c=!![]),_0x12c159[_0x5908b6(0x228)]==undefined&&(_0x12c159={..._0x12c159,'autoliquidity':_0x5908b6(0x1f6)},_0x39291c=!![]),_0x12c159[_0x5908b6(0x230)]==undefined&&(_0x12c159={..._0x12c159,'marketcapApi':settings[_0x5908b6(0x230)]?!![]:![]},_0x39291c=!![]),_0x12c159[_0x5908b6(0x1cd)]==undefined&&(_0x12c159={..._0x12c159,'marketcapEnabled':![]},_0x39291c=!![]),_0x39291c&&(_0x12c159={'botID':_0x12c159[_0x5908b6(0x233)],'exchange':_0x12c159[_0x5908b6(0x252)],'apiKey':_0x12c159['apiKey'],'apiSecret':_0x12c159[_0x5908b6(0x1d1)],'apiPassword':_0x12c159[_0x5908b6(0x1f5)],'basecoin':_0x12c159[_0x5908b6(0x17c)],'botname':_0x12c159['botname'],'showname':_0x12c159['showname'],'threshold':_0x12c159[_0x5908b6(0x12b)],'ordertype':_0x12c159[_0x5908b6(0x121)],'timeout':_0x12c159[_0x5908b6(0x197)],'fiat':_0x12c159[_0x5908b6(0x155)],'startdate':_0x12c159[_0x5908b6(0x11f)],'recreate':_0x12c159[_0x5908b6(0x1fb)],'timeshift':_0x12c159[_0x5908b6(0x1fa)],'onepagemode':_0x12c159[_0x5908b6(0x20c)],'headless':_0x12c159[_0x5908b6(0x256)],'cooldown':_0x12c159['cooldown'],'change24h':_0x12c159[_0x5908b6(0x166)],'emojibuy':_0x12c159[_0x5908b6(0x1d4)],'emojisell':_0x12c159[_0x5908b6(0x23e)],'colorscheme':_0x12c159[_0x5908b6(0x160)],'marketcapApi':_0x12c159[_0x5908b6(0x230)],'marketcapEnabled':_0x12c159['marketcapEnabled'],'portfolio':_0x12c159[_0x5908b6(0x117)],'autoliquidity':_0x12c159[_0x5908b6(0x228)],'liquidity':_0x12c159['liquidity'],'openOrders':_0x12c159[_0x5908b6(0x113)]},dbConfig[_0x5908b6(0x23d)](_0x5908b6(0x139))[_0x5908b6(0x274)]()[_0x5908b6(0x227)](),dbConfig['get'](_0x5908b6(0x139))[_0x5908b6(0x1a9)](_0x12c159)['write']());}else _0x12c159={'botID':_0x5ab696,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x5ab696,'showname':![],'threshold':0x3,'ordertype':_0x5908b6(0x183),'timeout':0x14,'fiat':_0x5908b6(0x253),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5908b6(0x1fa)],'onepagemode':settings[_0x5908b6(0x20c)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5908b6(0xd2),'marketcapApi':settings[_0x5908b6(0x230)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x5908b6(0x1f6),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x12c159;}function emittedConfiguration(){const _0x418054=_0x479c03;let _0x325e13;if(config[_0x418054(0x126)]=='')_0x325e13={...config,'configstate':_0x418054(0x101)};else config[_0x418054(0x126)]=='***'?_0x325e13={...config,'configstate':'recovery'}:(_0x325e13={...config,'apiKey':'************','apiSecret':_0x418054(0x10e)},config[_0x418054(0x1f5)]&&(_0x325e13[_0x418054(0x1f5)]=_0x418054(0x10e)));return _0x325e13[_0x418054(0x180)]=enableFiatToggle,_0x325e13;}function getSettings(){const _0x293759=_0x479c03;return dbSettings[_0x293759(0x23d)](_0x293759(0x1f3))[_0x293759(0x275)]();}function getSecure(){const _0x33f1b3=_0x479c03;return dbSecure[_0x33f1b3(0x23d)](_0x33f1b3(0x28b))['value']()||{};}function updateTimeshift(_0x3cd2c3){const _0x31031b=_0x479c03;let _0x171754=dbConfig['get'](_0x31031b(0x139))[_0x31031b(0x199)]({'botID':botID})[_0x31031b(0x275)]();_0x171754&&dbConfig['get'](_0x31031b(0x139))[_0x31031b(0x199)]({'botID':botID})['assign']({'timeshift':_0x3cd2c3})[_0x31031b(0x227)](),config['timeshift']=_0x3cd2c3,proxyEmit(_0x31031b(0x223),emittedConfiguration());}function updateOnepagemode(_0x245111){const _0x4442c2=_0x479c03;let _0x16bff9=dbConfig[_0x4442c2(0x23d)]('bot')[_0x4442c2(0x199)]({'botID':botID})['value']();_0x16bff9&&dbConfig['get'](_0x4442c2(0x139))[_0x4442c2(0x199)]({'botID':botID})[_0x4442c2(0xff)]({'onepagemode':_0x245111})[_0x4442c2(0x227)](),config['onepagemode']=_0x245111,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x43a277){const _0xb28df1=_0x479c03,_0x4262b9=_0x43a277?!![]:![];let _0x222452=dbConfig['get'](_0xb28df1(0x139))['find']({'botID':botID})['value']();_0x222452&&dbConfig[_0xb28df1(0x23d)]('bot')['find']({'botID':botID})[_0xb28df1(0xff)]({'marketcapApi':_0x4262b9})['write'](),config['marketcapApi']=_0x4262b9,getMarketCap(),proxyEmit(_0xb28df1(0x223),emittedConfiguration());}async function storeConfiguration(_0x26c82d){const _0x1558ba=_0x479c03;logger[_0x1558ba(0x119)](_0x1558ba(0x1e8));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x22adfe=![],_0x406a47=![],_0x4b3d05=[];_0x26c82d[_0x1558ba(0x117)][_0x1558ba(0x1fe)](_0x5f1131=>{const _0xedca20=_0x1558ba;if(!_0x5f1131[_0xedca20(0xd4)]&&_0x5f1131[_0xedca20(0x175)]!=_0x26c82d[_0xedca20(0x17c)])_0x4b3d05['push'](_0x5f1131[_0xedca20(0x281)]);}),_0x4b3d05['forEach'](_0x298ece=>{const _0x33d0ad=_0x1558ba,_0x14a0a3=currentCoins[_0x33d0ad(0x199)](_0x45bb1f=>_0x45bb1f[_0x33d0ad(0x281)]==_0x298ece);!_0x14a0a3&&(_0x22adfe=!![]);}),currentCoins[_0x1558ba(0x1fe)](_0x1f7aa7=>{const _0xeec2be=_0x1558ba;if(_0x1f7aa7[_0xeec2be(0x175)]!=config['basecoin']){const _0x35dacf=_0x4b3d05[_0xeec2be(0x199)](_0x54773e=>_0x54773e==_0x1f7aa7[_0xeec2be(0x281)]);!_0x35dacf&&(_0x22adfe=!![]);}}),_0x26c82d[_0x1558ba(0x117)][_0x1558ba(0x1fe)](_0x40dc00=>{const _0x529000=_0x1558ba,_0x287c43=config['portfolio'][_0x529000(0x199)](_0x371b4e=>_0x371b4e['coin']==_0x40dc00[_0x529000(0x175)]);if(_0x287c43&&_0x40dc00[_0x529000(0x14a)]!=_0x287c43[_0x529000(0x14a)])_0x406a47=!![];});let _0x551868=dbConfig[_0x1558ba(0x23d)](_0x1558ba(0x139))['find']({'botID':botID})[_0x1558ba(0x275)]();_0x26c82d={..._0x26c82d,'apiKey':decryptRSA(secure[_0x1558ba(0x13e)],_0x26c82d['apiKey']),'apiSecret':decryptRSA(secure[_0x1558ba(0x13e)],_0x26c82d[_0x1558ba(0x1d1)])};_0x26c82d[_0x1558ba(0x1f5)]&&(_0x26c82d[_0x1558ba(0x1f5)]=decryptRSA(secure[_0x1558ba(0x13e)],_0x26c82d['apiPassword']));let _0x25ceb9=![];if(_0x551868){_0x26c82d[_0x1558ba(0x126)]=='************'?_0x26c82d['apiKey']=config[_0x1558ba(0x126)]:_0x25ceb9=!![];_0x26c82d['apiSecret']==_0x1558ba(0x10e)?_0x26c82d[_0x1558ba(0x1d1)]=config['apiSecret']:_0x25ceb9=!![];if(_0x26c82d[_0x1558ba(0x1f5)]==_0x1558ba(0x10e))_0x26c82d[_0x1558ba(0x1f5)]=config[_0x1558ba(0x1f5)];else{if(_0x26c82d[_0x1558ba(0x1f5)])_0x25ceb9=!![];}dbConfig[_0x1558ba(0x23d)]('bot')[_0x1558ba(0x199)]({'botID':botID})[_0x1558ba(0xff)](_0x26c82d)[_0x1558ba(0x227)]();}else dbConfig[_0x1558ba(0x23d)](_0x1558ba(0x139))[_0x1558ba(0x1a9)](_0x26c82d)[_0x1558ba(0x227)](),_0x25ceb9=!![],process[_0x1558ba(0x214)]({'status':_0x1558ba(0x18b),'live':_0x1558ba(0x1ba)},_0x6a89f9=>{});process[_0x1558ba(0x214)]({'botname':_0x26c82d['botname']},_0x23bde2=>{}),config={..._0x26c82d},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x25ceb9)!_0x551868?await reset(!![]):getBalances();else _0x22adfe||_0x406a47?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4551da){const _0x2cadb5=_0x479c03,_0x4d03da={...config,'headless':_0x4551da['headless']};let _0x2aae29=dbConfig[_0x2cadb5(0x23d)](_0x2cadb5(0x139))[_0x2cadb5(0x199)]({'botID':botID})['value']();_0x2aae29&&dbConfig[_0x2cadb5(0x23d)]('bot')[_0x2cadb5(0x199)]({'botID':botID})[_0x2cadb5(0xff)](_0x4d03da)[_0x2cadb5(0x227)](),config={..._0x4d03da},updateBotManager(),proxyEmit(_0x2cadb5(0x223),emittedConfiguration());}async function storeFiat(_0x96604f){const _0x2c014b=_0x479c03,_0x4b6ae7={...config,'fiat':_0x96604f};let _0x5dc8a5=dbConfig['get']('bot')[_0x2c014b(0x199)]({'botID':botID})[_0x2c014b(0x275)]();_0x5dc8a5&&dbConfig[_0x2c014b(0x23d)]('bot')['find']({'botID':botID})[_0x2c014b(0xff)](_0x4b6ae7)['write'](),config={..._0x4b6ae7},proxyEmit(_0x2c014b(0x223),emittedConfiguration());}function resetHistory(){const _0x9eac53=_0x479c03;logger[_0x9eac53(0x240)]('Resetting\x20bot\x20history');try{if(fs[_0x9eac53(0x201)](path[_0x9eac53(0x270)](configpath,_0x9eac53(0x1d7)+botID+_0x9eac53(0x133))))fs[_0x9eac53(0x18d)](path[_0x9eac53(0x270)](configpath,'bot-'+botID+_0x9eac53(0x133)));if(fs[_0x9eac53(0x201)](path[_0x9eac53(0x270)](configpath,_0x9eac53(0x1d7)+botID+_0x9eac53(0xdc))))fs[_0x9eac53(0x18d)](path[_0x9eac53(0x270)](configpath,_0x9eac53(0x1d7)+botID+_0x9eac53(0xdc)));if(fs[_0x9eac53(0x201)](path[_0x9eac53(0x270)](configpath,_0x9eac53(0x1d7)+botID+_0x9eac53(0xf5))))fs[_0x9eac53(0x18d)](path[_0x9eac53(0x270)](configpath,_0x9eac53(0x1d7)+botID+_0x9eac53(0xf5)));}catch(_0x1aa14e){if(_0x1aa14e)logger[_0x9eac53(0x240)](_0x9eac53(0x1aa),_0x1aa14e);}const _0x230c6d=getDate();let _0x1d7aec=[];currentCoins[_0x9eac53(0x1fe)](_0x3a09b3=>{const _0x2479c7=_0x9eac53;_0x1d7aec[_0x2479c7(0x1a9)]({'coin':_0x3a09b3[_0x2479c7(0x175)],'number':_0x3a09b3[_0x2479c7(0x12e)],'price':_0x3a09b3['last']});});let _0x111f89=dbConfig[_0x9eac53(0x23d)](_0x9eac53(0x139))['find']({'botID':botID})[_0x9eac53(0x275)]();_0x111f89&&(dbConfig['get'](_0x9eac53(0x139))[_0x9eac53(0x199)]({'botID':botID})['assign']({'liquidity':[{'date':_0x230c6d,'changes':_0x1d7aec}]})[_0x9eac53(0x227)](),config[_0x9eac53(0x21a)]=[]),restartBot(!![]);}function noslash(_0x253ed3){const _0x85bdc2=_0x479c03;return _0x253ed3[_0x85bdc2(0x15f)]('/','');}function updateHighestFee(_0xe9c5d2){const _0x9d167f=_0x479c03;if(_0xe9c5d2['reverse']){let _0x17b653={'filled':_0xe9c5d2['filled']*_0xe9c5d2[_0x9d167f(0x1fc)],'amount':_0xe9c5d2['filled']*_0xe9c5d2[_0x9d167f(0x1fc)],'side':_0xe9c5d2[_0x9d167f(0x24c)]==_0x9d167f(0x25c)?_0x9d167f(0x219):_0x9d167f(0x25c),'price':0x1/_0xe9c5d2[_0x9d167f(0x1fc)]};_0xe9c5d2={..._0xe9c5d2,..._0x17b653};}const _0x1a34a9=defaultFee*_0xe9c5d2[_0x9d167f(0xe2)]*_0xe9c5d2['price'];lastFees[_0x9d167f(0x13c)][_0x9d167f(0xec)]===0x14&&lastFees[_0x9d167f(0x13c)][_0x9d167f(0x26c)](),lastFees[_0x9d167f(0x13c)][_0x9d167f(0x1a9)](_0x1a34a9),lastFees[_0x9d167f(0x216)]=Math[_0x9d167f(0xf8)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x35f3b0){const _0x18db4c=_0x479c03;logger[_0x18db4c(0x119)](_0x18db4c(0x264)+_0x35f3b0[_0x18db4c(0x281)]+'\x20|\x20'+_0x35f3b0[_0x18db4c(0x1cc)]+'\x20|\x20'+_0x35f3b0[_0x18db4c(0xe2)]+_0x18db4c(0x1e2)+_0x35f3b0[_0x18db4c(0x10f)]+_0x18db4c(0x137)+_0x35f3b0['id']);let _0x5ea0a6=_0x35f3b0[_0x18db4c(0x1cc)],_0x250da9=![];currentCoins[_0x18db4c(0x1fe)](_0x10e0b1=>{const _0x192f97=_0x18db4c;_0x10e0b1[_0x192f97(0x281)]==_0x35f3b0[_0x192f97(0x281)]&&(_0x250da9=!![]);});if(!_0x250da9)return;const _0x594407=currentCoins[_0x18db4c(0x199)](_0x356e7d=>_0x356e7d['symbol']==_0x35f3b0['symbol']),_0x807cbd=_0x594407['coin'],_0x1f65e9=_0x2a0065=>{const _0xcf218=_0x18db4c,_0x42b547=currentCoins[_0xcf218(0x199)](_0x44620f=>_0x44620f['symbol']==_0x35f3b0[_0xcf218(0x281)]);if(_0x42b547)_0x42b547[_0xcf218(0x17f)]=_0x2a0065;};let _0x355a25=![];for(const _0x223309 of lastOrders){const _0x39f05a=0x64,_0x4dad4e=0x1388;let _0x3dfd97=0x0;while(!_0x223309[_0x18db4c(0x13b)]&&_0x3dfd97*_0x39f05a<_0x4dad4e){_0x3dfd97++,await sleep(_0x39f05a);}if(_0x3dfd97>0x0)logger[_0x18db4c(0x119)]('Waited\x20'+_0x3dfd97*_0x39f05a/0x3e8+_0x18db4c(0x277));_0x223309[_0x18db4c(0x13b)]==_0x35f3b0['id']&&(_0x355a25=!![]);}if(_0x5ea0a6==_0x18db4c(0xfe)){_0x1f65e9('open');if(_0x35f3b0['filled']>0x0&&_0x35f3b0[_0x18db4c(0xe2)]<_0x35f3b0[_0x18db4c(0x10f)]){if(_0x355a25){setBlockTransactionDetection(!![]),logger['debug'](_0x18db4c(0xe0)+_0x35f3b0[_0x18db4c(0xe2)]+_0x18db4c(0x190)+_0x35f3b0['id']);const _0x420a00=await getCoins(balanceUpdateDelay,undefined,undefined,_0x807cbd);[currentCoins,currentCoinsAll]=_0x420a00,setBlockTransactionDetection(![]);}else logger[_0x18db4c(0x119)](_0x18db4c(0xe0)+_0x35f3b0[_0x18db4c(0xe2)]+_0x18db4c(0x102)+_0x35f3b0['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5ea0a6=='canceled'){_0x1f65e9(_0x18db4c(0x1c4));const _0x31d210=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x31d210,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5ea0a6=='closed'){if(lastOrders)for(const _0x11bc83 of lastOrders){if(_0x11bc83[_0x18db4c(0x13b)]==_0x35f3b0['id']){logger[_0x18db4c(0x119)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x35f3b0['id']),_0x355a25=!![];if(_0x11bc83[_0x18db4c(0xe2)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x18db4c(0x1a4)+_0x35f3b0['id']);if(_0x35f3b0['average'])_0x11bc83[_0x18db4c(0x1fc)]=_0x35f3b0[_0x18db4c(0x273)];else{if(_0x35f3b0[_0x18db4c(0x1fc)])_0x11bc83[_0x18db4c(0x1fc)]=_0x35f3b0[_0x18db4c(0x1fc)];else{}}_0x11bc83[_0x18db4c(0xe2)]=_0x35f3b0[_0x18db4c(0xe2)],updateHighestFee(_0x11bc83);const _0x3e6e2d=await getCoins(balanceUpdateDelay,undefined,undefined,_0x807cbd);[currentCoins,currentCoinsAll]=_0x3e6e2d,setBlockTransactionDetection(![]),await validateOrders(),_0x1f65e9(_0x18db4c(0xe2)),_0x11bc83[_0x18db4c(0x21d)]={'currency':_0x35f3b0[_0x18db4c(0x21d)]?_0x35f3b0[_0x18db4c(0x21d)][_0x18db4c(0x1cf)]:null,'cost':_0x35f3b0[_0x18db4c(0x21d)]?_0x35f3b0['fee'][_0x18db4c(0x258)]:0x0},await updateCoinResults(_0x11bc83);}}}!_0x355a25&&(logger[_0x18db4c(0x119)](_0x18db4c(0x15c)+_0x35f3b0['id']),_0x1f65e9(_0x18db4c(0xe2)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x2c00ad=JSON[_0x18db4c(0x134)](lastBalances['portfolio']);const _0x108772=_0x2c00ad['find'](_0x560685=>_0x560685['symbol']==_0x35f3b0[_0x18db4c(0x281)]);if(_0x108772){if(_0x5ea0a6==_0x18db4c(0xfe))_0x108772[_0x18db4c(0x17f)]=_0x108772[_0x18db4c(0x17f)]==_0x18db4c(0xe2)?_0x18db4c(0xe2):'open';else{if(_0x5ea0a6==_0x18db4c(0x1c4))_0x108772[_0x18db4c(0x17f)]=_0x108772[_0x18db4c(0x17f)]==_0x18db4c(0xe2)?_0x18db4c(0xe2):_0x18db4c(0x1c4);else _0x5ea0a6==_0x18db4c(0x1b7)&&(_0x108772[_0x18db4c(0x17f)]=_0x18db4c(0xe2));}}lastBalances={...lastBalances,'portfolio':JSON[_0x18db4c(0x25f)](_0x2c00ad)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0xb427ab=![];currentCoins['forEach'](_0x2d606f=>{const _0x3e6f37=_0x3742;_0xb427ab=allOpenOrders[_0x3e6f37(0x199)](_0x43dd8c=>_0x43dd8c[_0x3e6f37(0x281)]==_0x2d606f[_0x3e6f37(0x281)]),_0x2d606f['orderstatus']=_0xb427ab?_0x3e6f37(0xfe):'none';});}async function fetchBalance(_0x49097b=!![]){const _0x322491=_0x479c03;let _0x26e50b,_0x50f060;try{return _0x26e50b=await exchange[_0x322491(0x157)](),_0x50f060=_0x26e50b['total'],_0x50f060;}catch(_0x15a94c){return!_0x49097b?handleErrorNoStop(_0x15a94c,_0x322491(0x1d3)):await handleError(_0x15a94c,_0x322491(0x1d3)),![];}}async function getCoins(_0x328984=0x0,_0x248382=!![],_0x584b3d=config['basecoin'],_0x2d12ab){const _0x521348=_0x479c03;let _0xce3021=[],_0xcdf5b8=[],_0xf0c1c7=[],_0x2794f6;if(_0x328984)await sleep(_0x328984);if(botPaused)return[currentCoins,currentCoinsAll];let _0x2b672f=![],_0x5d553a=0x0,_0x2efe7d,_0x31449f;_0x2d12ab&&(_0x2efe7d=currentCoins['find'](_0x4da7c1=>_0x4da7c1[_0x521348(0x175)]==_0x2d12ab),_0x31449f=_0x2efe7d[_0x521348(0x12e)]);while(!_0x2b672f){_0x2794f6=await fetchBalance(_0x248382);if(_0x2794f6){if(_0x2d12ab){if(_0x2794f6[_0x2d12ab]!=_0x31449f)logger[_0x521348(0x119)](_0x521348(0x262)+_0x2d12ab+':\x20'+_0x2794f6[_0x2d12ab]+'\x20('+_0x31449f+')'),_0x2b672f=!![];else{logger[_0x521348(0x119)](_0x521348(0x1ca)+_0x2d12ab+':\x20'+_0x2794f6[_0x2d12ab]+'\x20('+_0x31449f+')'),_0x5d553a++;if(_0x5d553a<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger['debug'](_0x521348(0x285)+_0x5d553a+'\x20attempts');break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x1828a5,_0x578928]of Object[_0x521348(0x287)](_0x2794f6)){_0xf0c1c7[_0x521348(0x1a9)](_0x1828a5);}config['portfolio'][_0x521348(0x1fe)](_0xef6556=>{const _0x5efe50=_0x521348;!_0xf0c1c7[_0x5efe50(0x206)](_0xef6556[_0x5efe50(0x175)])&&(_0x2794f6[_0xef6556[_0x5efe50(0x175)]]=0x0);});if(_0x584b3d=='')for(const [_0x25069b,_0x20e377]of Object[_0x521348(0x287)](_0x2794f6)){_0x20e377!=0x0&&_0xce3021[_0x521348(0x1a9)]({'coin':_0x25069b});}else for(const [_0x4b038b,_0x390f73]of Object[_0x521348(0x287)](_0x2794f6)){const _0x29b512=config[_0x521348(0x117)]['find'](_0x183e62=>_0x183e62['coin']==_0x4b038b),_0x2d8ce8=_0x4b038b+'/'+_0x584b3d,_0x114f96=_0x584b3d+'/'+_0x4b038b,_0x374d6e=currentCoins[_0x521348(0x199)](_0x3081b0=>_0x3081b0['coin']==_0x4b038b);if((_0x390f73!=0x0||_0x29b512)&&(allSymbols[_0x521348(0x206)](_0x2d8ce8)||_0x4b038b==_0x584b3d))_0x374d6e?_0xce3021[_0x521348(0x1a9)]({..._0x374d6e,'number':Math[_0x521348(0xf8)](_0x390f73+(_0x29b512&&_0x29b512[_0x521348(0x14a)]||0x0),0x0)}):_0xce3021[_0x521348(0x1a9)]({'coin':_0x4b038b,'symbol':_0x2d8ce8,'reverse':![],'number':Math[_0x521348(0xf8)](_0x390f73+(_0x29b512&&_0x29b512[_0x521348(0x14a)]||0x0),0x0),'orderstatus':_0x521348(0x162)});else{if((_0x390f73!=0x0||_0x29b512)&&allSymbols[_0x521348(0x206)](_0x114f96))_0x374d6e?_0xce3021['push']({..._0x374d6e,'number':Math[_0x521348(0xf8)](_0x390f73+(_0x29b512&&_0x29b512[_0x521348(0x14a)]||0x0),0x0)}):_0xce3021[_0x521348(0x1a9)]({'coin':_0x4b038b,'symbol':_0x114f96,'reverse':!![],'number':Math[_0x521348(0xf8)](_0x390f73+(_0x29b512&&_0x29b512[_0x521348(0x14a)]||0x0),0x0),'orderstatus':_0x521348(0x162)});else _0x29b512&&_0xce3021['push']({'coin':_0x29b512[_0x521348(0x175)],'symbol':_0x29b512[_0x521348(0x281)],'reverse':_0x29b512[_0x521348(0x168)],'number':0x0,'orderstatus':_0x521348(0x162)});}}return _0xce3021[_0x521348(0x272)]((_0x24c1f8,_0x4e54eb)=>_0x24c1f8[_0x521348(0x182)]<_0x4e54eb[_0x521348(0x182)]?0x1:_0x4e54eb[_0x521348(0x182)]<_0x24c1f8[_0x521348(0x182)]?-0x1:0x0),_0xcdf5b8=cloneDeep(_0xce3021),_0xce3021=_0xce3021['filter'](_0x59c461=>{const _0x593045=_0x521348,_0x137dca=config[_0x593045(0x117)][_0x593045(0x199)](_0x5c76a3=>_0x5c76a3['coin']==_0x59c461['coin']);return _0x137dca&&!_0x137dca[_0x593045(0xd4)];}),[_0xce3021,_0xcdf5b8];}async function getCoinNumber(_0x429812){const _0x402e09=_0x479c03;let _0x554739;try{const _0x303a73=await exchange['fetchBalance']();_0x554739=_0x303a73['total'][_0x429812];}catch(_0x4cffa0){await handleError(_0x4cffa0,_0x402e09(0x143));}return _0x554739;}async function getOpenOrders(){const _0x369618=_0x479c03;let _0xfcd7ab;allOpenOrders=[];try{for(const _0x28bd2a of config[_0x369618(0x117)]){!_0x28bd2a[_0x369618(0xd4)]&&_0x28bd2a[_0x369618(0x175)]!=config[_0x369618(0x17c)]&&(_0xfcd7ab=await exchange[_0x369618(0x242)](_0x28bd2a[_0x369618(0x281)]),_0xfcd7ab[_0x369618(0xec)]>0x0&&allOpenOrders[_0x369618(0x1a9)](_0xfcd7ab[0x0]));}}catch(_0x5511f1){await handleError(_0x5511f1,_0x369618(0x28a));}}async function handleOpenOrders(_0x3eba6f=0x0){const _0x4b1d18=_0x479c03;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x4b1d18(0x13f)]&&allOrdersPlaced&&(_0x3eba6f==0x0?(logger[_0x4b1d18(0x119)]('1\x20-\x20Handle\x20open\x20orders'),_0x3eba6f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4b1d18(0x119)](_0x4b1d18(0x212)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x6636f7){const _0x2838f8=_0x479c03,_0x1a0320=ccxt[_0x2838f8(0x1f4)][_0x6636f7[_0x2838f8(0x252)]['toLowerCase']()],_0x261f21=new _0x1a0320({'apiKey':_0x6636f7[_0x2838f8(0x126)],'secret':_0x6636f7[_0x2838f8(0x1d1)],'options':{'defaultType':_0x2838f8(0x17d)}});if(_0x6636f7[_0x2838f8(0x1f5)])_0x261f21['password']=_0x6636f7['apiPassword'];try{await _0x261f21[_0x2838f8(0x157)]();}catch(_0x33bb2c){logger[_0x2838f8(0x119)]('Error\x20in\x20testAPI():\x20'+_0x33bb2c[_0x2838f8(0x159)]());throw _0x33bb2c;}}function cloneDeep(_0x98d2ea){const _0x55c1e3=_0x479c03;return JSON[_0x55c1e3(0x134)](JSON[_0x55c1e3(0x25f)](_0x98d2ea));}async function getPortfolio(_0x1c0ceb){const _0x43ac22=_0x479c03;let _0x52508e=[],_0x4990d1=[],_0x500553=[],_0x2805d1;_0x1c0ceb[_0x43ac22(0x126)]=decryptRSA(secure['privateKey'],_0x1c0ceb[_0x43ac22(0x126)]),_0x1c0ceb[_0x43ac22(0x1d1)]=decryptRSA(secure['privateKey'],_0x1c0ceb[_0x43ac22(0x1d1)]);if(_0x1c0ceb[_0x43ac22(0x1f5)])_0x1c0ceb[_0x43ac22(0x1f5)]=decryptRSA(secure[_0x43ac22(0x13e)],_0x1c0ceb[_0x43ac22(0x1f5)]);if(_0x1c0ceb[_0x43ac22(0x126)]!==_0x43ac22(0x10e)||_0x1c0ceb[_0x43ac22(0x1d1)]!==_0x43ac22(0x10e)||_0x1c0ceb[_0x43ac22(0x1f5)]&&_0x1c0ceb[_0x43ac22(0x1f5)]!=='************'){if(config[_0x43ac22(0x252)]){if(_0x1c0ceb[_0x43ac22(0x126)]==_0x43ac22(0x10e))_0x1c0ceb[_0x43ac22(0x126)]=config['apiKey'];if(_0x1c0ceb[_0x43ac22(0x1d1)]=='************')_0x1c0ceb[_0x43ac22(0x1d1)]=config[_0x43ac22(0x1d1)];if(_0x1c0ceb[_0x43ac22(0x1f5)]=='************')_0x1c0ceb[_0x43ac22(0x1f5)]=config[_0x43ac22(0x1f5)];}try{await testAPI(_0x1c0ceb);}catch(_0x22d500){if(_0x22d500[_0x43ac22(0x159)]()['includes'](_0x43ac22(0x1ac))){logHistory(_0x43ac22(0x1f0),_0x43ac22(0x11e)),proxyEmit('portfolio1',![]);return;}else{logHistory('error','Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x43ac22(0x25e),_0x22d500),proxyEmit(_0x43ac22(0xdd),![]);return;}}exchange?updateExchange(_0x1c0ceb[_0x43ac22(0x126)],_0x1c0ceb[_0x43ac22(0x1d1)],_0x1c0ceb[_0x43ac22(0x1f5)]):await initExchange(_0x1c0ceb[_0x43ac22(0x252)],_0x1c0ceb[_0x43ac22(0x126)],_0x1c0ceb[_0x43ac22(0x1d1)],_0x1c0ceb['apiPassword']);await loadSymbols();const _0x2f29d4=await getCoins(0x0,![],_0x1c0ceb[_0x43ac22(0x17c)]);_0x500553=cloneDeep(_0x2f29d4[0x1]);}else{const _0x1a5d6f=await getCoins();_0x500553=cloneDeep(_0x1a5d6f[0x1]);}if(_0x1c0ceb[_0x43ac22(0x17c)]=='')proxyEmit(_0x43ac22(0xdd),!![]),proxyEmit('portfolio2',_0x500553);else{_0x500553[_0x43ac22(0x1fe)](_0x4228fc=>{const _0x2d901c=_0x43ac22;if(_0x4228fc[_0x2d901c(0x175)]!=_0x1c0ceb['basecoin']&&allSymbols['includes'](_0x4228fc[_0x2d901c(0x281)]))_0x52508e[_0x2d901c(0x1a9)](_0x4228fc[_0x2d901c(0x281)]);});if(_0x52508e['length']==0x0)logHistory(_0x43ac22(0x1f0),_0x43ac22(0x1e0));else{try{_0x4990d1=await getTickers(_0x52508e);}catch(_0x2d3675){logHistory(_0x43ac22(0x1f0),_0x43ac22(0xf0)),logger[_0x43ac22(0x119)](_0x43ac22(0x1c3),_0x2d3675),proxyEmit(_0x43ac22(0xdd),![]);return;}_0x500553['forEach'](_0x83fdb4=>{const _0x83b5e3=_0x43ac22;_0x83fdb4['coin']!=_0x1c0ceb[_0x83b5e3(0x17c)]?_0x4990d1[_0x83fdb4['symbol']]?_0x2805d1=_0x83fdb4[_0x83b5e3(0x168)]?0x1/_0x4990d1[_0x83fdb4['symbol']][_0x83b5e3(0x220)]:_0x4990d1[_0x83fdb4[_0x83b5e3(0x281)]][_0x83b5e3(0x220)]:_0x2805d1=0x0:_0x2805d1=0x1,_0x83fdb4[_0x83b5e3(0x1fc)]=formatResult(_0x2805d1,0x8);}),await getMarketCap(_0x500553),proxyEmit(_0x43ac22(0xdd),!![]),proxyEmit(_0x43ac22(0x11d),_0x500553);}}}function truncateTradeAmount(_0x496fee,_0x2eddf1){let _0x1ba1bd=0x0;try{_0x1ba1bd=exchange['amountToPrecision'](_0x496fee,_0x2eddf1);}catch(_0x2777d1){}return _0x1ba1bd;}function checkMinimums(_0x4ae813){const _0x5efd49=_0x479c03;let _0x37d8bd=!![];const _0x582e71=!_0x4ae813[_0x5efd49(0x168)]?markets[_0x4ae813[_0x5efd49(0x281)]]['limits'][_0x5efd49(0x10f)][_0x5efd49(0x28e)]:markets[_0x4ae813[_0x5efd49(0x281)]][_0x5efd49(0x107)]['cost'][_0x5efd49(0x28e)],_0x1fd2e4=!_0x4ae813[_0x5efd49(0x168)]?markets[_0x4ae813[_0x5efd49(0x281)]][_0x5efd49(0x107)][_0x5efd49(0x258)]['min']:markets[_0x4ae813[_0x5efd49(0x281)]][_0x5efd49(0x107)][_0x5efd49(0x10f)]['min'],_0x4b859d=truncateTradeAmount(_0x4ae813['symbol'],_0x4ae813[_0x5efd49(0x205)]);_0x4ae813[_0x5efd49(0x205)]=_0x4b859d;if(Math[_0x5efd49(0x24d)](_0x4b859d)<_0x582e71)_0x37d8bd=![];if(Math[_0x5efd49(0x24d)](_0x4b859d)*_0x4ae813[_0x5efd49(0x220)]<_0x1fd2e4)_0x37d8bd=![];if(_0x4ae813['side']=='sell'){let _0x3cbcf2=config[_0x5efd49(0x117)][_0x5efd49(0x199)](_0x3da658=>_0x3da658[_0x5efd49(0x175)]==_0x4ae813['coin']);if(_0x3cbcf2[_0x5efd49(0x14a)]>0x0){if(Math[_0x5efd49(0x24d)](_0x4b859d)>_0x4ae813[_0x5efd49(0x12e)]-_0x3cbcf2[_0x5efd49(0x14a)])_0x37d8bd=![];}else{if(Math[_0x5efd49(0x24d)](_0x4b859d)>_0x4ae813[_0x5efd49(0x12e)])_0x37d8bd=![];}}if(_0x4ae813[_0x5efd49(0x24c)]==_0x5efd49(0x219)){let _0x16992a=config[_0x5efd49(0x117)][_0x5efd49(0x199)](_0x3fb40f=>_0x3fb40f['coin']==config[_0x5efd49(0x17c)]),_0x5581a5=currentCoins[_0x5efd49(0x199)](_0x387386=>_0x387386[_0x5efd49(0x175)]==config[_0x5efd49(0x17c)]);if(_0x16992a[_0x5efd49(0x14a)]>0x0){if(Math[_0x5efd49(0x24d)](_0x4b859d)*_0x4ae813['last']>_0x5581a5[_0x5efd49(0x12e)]-_0x16992a['offset'])_0x37d8bd=![];}else{if(Math[_0x5efd49(0x24d)](_0x4b859d)*_0x4ae813[_0x5efd49(0x220)]>_0x5581a5[_0x5efd49(0x12e)])_0x37d8bd=![];}}return _0x37d8bd;}async function getBalances(_0x376f88=!![]){const _0x2d98e6=_0x479c03;let _0x175f42=0x0,_0x41d1d0;const _0x524844=config[_0x2d98e6(0x12b)];if(config[_0x2d98e6(0x256)]&&config[_0x2d98e6(0x166)]<0x0)await validate24hChanges();currentCoins[_0x2d98e6(0x1fe)](_0x42162d=>{const _0x34d3f6=_0x2d98e6;if(_0x42162d[_0x34d3f6(0x175)]!=config[_0x34d3f6(0x17c)]){let _0x576faf=gTicker[noslash(_0x42162d[_0x34d3f6(0x281)])];_0x41d1d0=_0x42162d[_0x34d3f6(0x168)]?0x1/_0x576faf:_0x576faf;}else _0x41d1d0=0x1;let _0x405d58=_0x42162d[_0x34d3f6(0x12e)]*_0x41d1d0;_0x175f42+=_0x405d58,_0x42162d[_0x34d3f6(0x220)]=formatResult(Number(_0x41d1d0),0x8),_0x42162d[_0x34d3f6(0x275)]=_0x405d58;}),currentCoins[_0x2d98e6(0x1fe)](_0x334013=>{const _0x1853b7=_0x2d98e6;let _0x43a933=config[_0x1853b7(0x117)][_0x1853b7(0x199)](_0x354550=>_0x354550[_0x1853b7(0x175)]==_0x334013[_0x1853b7(0x175)]),_0x308efe=Number(_0x43a933['distribution']),_0x1f82ba=_0x334013['value']/_0x175f42*0x64,_0x1b6c98=_0x308efe*_0x175f42/0x64/_0x334013[_0x1853b7(0x220)]-_0x334013[_0x1853b7(0x12e)];_0x334013[_0x1853b7(0x1a5)]=formatResult(_0x1f82ba,0x3),_0x334013[_0x1853b7(0x1e5)]=formatResult(_0x308efe,0x3),_0x334013[_0x1853b7(0x205)]=formatResult(_0x1b6c98,0x8),_0x334013[_0x1853b7(0x24c)]='',_0x334013[_0x1853b7(0x224)]=![];if(_0x334013[_0x1853b7(0x175)]!=config[_0x1853b7(0x17c)]){if(_0x334013[_0x1853b7(0x1a5)]>_0x308efe)_0x334013[_0x1853b7(0x24c)]=_0x1853b7(0x25c),_0x334013[_0x1853b7(0x224)]=checkMinimums(_0x334013);else _0x334013['distribution']<_0x308efe&&(_0x334013[_0x1853b7(0x24c)]=_0x1853b7(0x219),_0x334013[_0x1853b7(0x224)]=checkMinimums(_0x334013));}_0x334013[_0x1853b7(0x182)]=_0x334013[_0x1853b7(0x1a5)]/_0x334013[_0x1853b7(0x1e5)]-0x1;if(_0x334013[_0x1853b7(0x17f)]==_0x1853b7(0xe2)||_0x334013[_0x1853b7(0x17f)]==_0x1853b7(0x1c4))_0x334013[_0x1853b7(0x17f)]=_0x1853b7(0x162);}),currentCoins['sort']((_0x473182,_0x3bb1fa)=>_0x473182[_0x2d98e6(0x182)]<_0x3bb1fa[_0x2d98e6(0x182)]?0x1:_0x3bb1fa[_0x2d98e6(0x182)]<_0x473182[_0x2d98e6(0x182)]?-0x1:0x0);const _0x26cb96=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x26cb96['eur'],'usd':_0x26cb96[_0x2d98e6(0x1c2)],'portfolio':JSON[_0x2d98e6(0x25f)](currentCoins),'threshold':_0x524844},proxyEmit(_0x2d98e6(0x132),{'serverversion':serverversion,'balances':lastBalances});if(_0x376f88){if(config[_0x2d98e6(0x256)])headlessMode({'portfolio':currentCoins,'threshold':_0x524844});else{if(lockOrders==ORDERS[_0x2d98e6(0xe3)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x524844});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x41d470=getNormalizedPerformance();getStartingBalances(_0x41d470),emitPerformance(_0x41d470);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4b9b48=_0x479c03;if(!lastBalances)return;let _0x2f52d1=[],_0x5e2776,_0x528c9a=JSON[_0x4b9b48(0x134)](lastBalances['portfolio']);_0x528c9a[_0x4b9b48(0x272)]((_0x1aa6f5,_0x2259d6)=>_0x1aa6f5[_0x4b9b48(0x175)]>_0x2259d6[_0x4b9b48(0x175)]?0x1:_0x2259d6[_0x4b9b48(0x175)]>_0x1aa6f5['coin']?-0x1:0x0),_0x528c9a[_0x4b9b48(0x1fe)](_0x220b3b=>{const _0x401798=_0x4b9b48;let _0x593d07={'coin':_0x220b3b[_0x401798(0x175)],'number':_0x220b3b['number'],'price':_0x220b3b[_0x401798(0x220)]};_0x2f52d1[_0x401798(0x1a9)](_0x593d07);});const _0x1a309d=await getFiat();_0x5e2776={'date':lastBalances[_0x4b9b48(0x156)][_0x4b9b48(0x27d)]('\x20')[0x0],'eur':_0x1a309d[_0x4b9b48(0x1bf)],'usd':_0x1a309d[_0x4b9b48(0x1c2)],'coins':_0x2f52d1};let _0x198bf5=dbPerformance[_0x4b9b48(0x23d)](_0x4b9b48(0x249))[_0x4b9b48(0x199)]({'date':_0x5e2776[_0x4b9b48(0x12f)]})['value']();_0x198bf5?_0x5e2776[_0x4b9b48(0x12f)]!=config[_0x4b9b48(0x11f)]&&dbPerformance[_0x4b9b48(0x23d)]('data')[_0x4b9b48(0x199)]({'date':_0x5e2776[_0x4b9b48(0x12f)]})['assign'](_0x5e2776)[_0x4b9b48(0x227)]():dbPerformance[_0x4b9b48(0x23d)](_0x4b9b48(0x249))[_0x4b9b48(0x1a9)](_0x5e2776)[_0x4b9b48(0x227)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4e64d1=_0x479c03;let _0x7d6df=[];if(dbPerformance['has'](_0x4e64d1(0x249))[_0x4e64d1(0x275)]()){let _0x13892d=dbPerformance[_0x4e64d1(0x23d)]('data')[_0x4e64d1(0x26d)]()['filter'](_0x401620=>{const _0x1cd158=_0x4e64d1;if(_0x401620[_0x1cd158(0x14f)][_0x1cd158(0xec)]==0x0)return![];else return!![];})[_0x4e64d1(0x16c)](_0x4e64d1(0x12f))['value'](),_0x110120=[...config[_0x4e64d1(0x21a)]];_0x110120[_0x4e64d1(0x272)]((_0x5db80d,_0x1f574a)=>_0x5db80d[_0x4e64d1(0x12f)]>_0x1f574a['date']?-0x1:_0x1f574a[_0x4e64d1(0x12f)]>_0x5db80d['date']?0x1:0x0);let _0x1d9efd=0x1,_0x507b70=[],_0x35aae3=0x0;_0x13892d[_0x4e64d1(0xf4)]()[_0x4e64d1(0x168)]()[_0x4e64d1(0x1fe)]((_0x2268b8,_0x57ea1a)=>{const _0xcea23=_0x4e64d1;if(_0x110120[_0x35aae3]){if(_0x13892d[_0x13892d[_0xcea23(0xec)]-_0x57ea1a]&&_0x110120[_0x35aae3][_0xcea23(0x12f)]==_0x13892d[_0x13892d['length']-_0x57ea1a][_0xcea23(0x12f)]){if(_0x57ea1a<_0x13892d[_0xcea23(0xec)]){let _0x18fe76=0x0,_0x5e81b6=0x0;_0x13892d[_0x13892d[_0xcea23(0xec)]-_0x57ea1a][_0xcea23(0x14f)][_0xcea23(0x1fe)](_0x412d42=>{const _0x523393=_0xcea23;_0x5e81b6+=_0x412d42[_0x523393(0x12e)]*_0x412d42['price'];}),_0x110120[_0x35aae3]['changes'][_0xcea23(0x1fe)](_0x335172=>{const _0xc7343d=_0xcea23;_0x18fe76+=_0x335172[_0xc7343d(0x12e)]*_0x335172[_0xc7343d(0x1fc)];}),_0x1d9efd*=_0x18fe76/(_0x5e81b6-_0x18fe76)+0x1;}_0x35aae3++;}}let _0x208874=0x0;_0x2268b8[_0xcea23(0x14f)][_0xcea23(0x1fe)](_0x2aa6e1=>{const _0xa6b0b2=_0xcea23;_0x208874+=_0x2aa6e1[_0xa6b0b2(0x12e)]*_0x2aa6e1[_0xa6b0b2(0x1fc)];}),_0x507b70[_0x13892d[_0xcea23(0xec)]-_0x57ea1a-0x1]=_0x208874*(_0x1d9efd-0x1);});let _0x26b945=[];_0x110120=[...config[_0x4e64d1(0x21a)]]||[];let _0xa6b24c=0x0;_0x35aae3=0x0,_0x13892d[_0x4e64d1(0x1fe)]((_0x4cf249,_0x578063)=>{const _0xd4e2a1=_0x4e64d1;if(_0x110120[_0x35aae3]){const _0x2cbb15=fns[_0xd4e2a1(0x134)](_0x110120[_0x35aae3][_0xd4e2a1(0x12f)],_0xd4e2a1(0x1e1),new Date()),_0x430d52=fns[_0xd4e2a1(0x134)](_0x4cf249[_0xd4e2a1(0x12f)],_0xd4e2a1(0x1e1),new Date());if(fns[_0xd4e2a1(0x241)](_0x2cbb15,_0x430d52)){let _0x2ed508=0x0;_0x110120[_0x35aae3][_0xd4e2a1(0x20f)]['forEach'](_0x43b7f2=>{const _0x51b184=_0xd4e2a1;!_0x26b945[_0x43b7f2[_0x51b184(0x175)]]?_0x26b945[_0x43b7f2[_0x51b184(0x175)]]=_0x43b7f2[_0x51b184(0x12e)]:(_0x2ed508=_0x26b945[_0x43b7f2[_0x51b184(0x175)]],_0x26b945[_0x43b7f2['coin']]+=_0x43b7f2[_0x51b184(0x12e)]);const _0x1ca935=_0x4cf249['coins'][_0x51b184(0x199)](_0x2b9e74=>_0x2b9e74[_0x51b184(0x175)]==_0x43b7f2[_0x51b184(0x175)]);(!_0x1ca935||_0x1ca935[_0x51b184(0x12e)]==0x0)&&(_0xa6b24c+=(-_0x43b7f2[_0x51b184(0x12e)]-_0x2ed508)*_0x43b7f2[_0x51b184(0x1fc)]);}),_0x35aae3++;}}_0x4cf249['coins'][_0xd4e2a1(0x1fe)]((_0x44e513,_0x259713)=>{const _0x7c8a4c=_0xd4e2a1;_0x26b945[_0x44e513[_0x7c8a4c(0x175)]]&&(_0x44e513[_0x7c8a4c(0x101)]=_0x26b945[_0x44e513['coin']]);}),_0x7d6df[_0xd4e2a1(0x1a9)]({'date':_0x4cf249[_0xd4e2a1(0x12f)],'eur':_0x4cf249[_0xd4e2a1(0x1bf)],'usd':_0x4cf249[_0xd4e2a1(0x1c2)],'offset':_0x507b70[_0x578063],'netoffset':_0xa6b24c,'coins':_0x4cf249[_0xd4e2a1(0x14f)]});});}return _0x7d6df;}function emitPerformance(_0x18968e){const _0x365de9=_0x479c03;_0x18968e[_0x365de9(0xec)]!==0x0?(proxyEmit(_0x365de9(0x1a6),_0x18968e),lastPerformanceEmitted=getDate()):proxyEmit(_0x365de9(0x1a6),[]);}function getPerf(_0xe6c87b,_0x2bbe10){const _0x5f0d7e=_0x479c03;let _0x44bf65=0x0,_0x4d5759=0x0,_0x238a2c=0x0;_0xe6c87b[_0x5f0d7e(0x14f)]['forEach'](_0x28fcf8=>{const _0x8c7f5=_0x5f0d7e;_0x44bf65+=_0x28fcf8['number']*_0x28fcf8[_0x8c7f5(0x1fc)];});_0x2bbe10&&(_0x44bf65+=_0xe6c87b[_0x5f0d7e(0x14a)]);if(config['basecoin']===_0x5f0d7e(0x276)||config[_0x5f0d7e(0x17c)]===_0x5f0d7e(0x191)||config[_0x5f0d7e(0x17c)]===_0x5f0d7e(0x1b1))_0x4d5759=_0x44bf65*_0xe6c87b[_0x5f0d7e(0x1bf)],_0x238a2c=_0x44bf65*_0xe6c87b['usd'];else{if(usdBasecoins[_0x5f0d7e(0x206)](config[_0x5f0d7e(0x17c)]))_0x4d5759=_0x44bf65*_0xe6c87b[_0x5f0d7e(0x1bf)]/_0xe6c87b[_0x5f0d7e(0x1c2)],_0x238a2c=_0x44bf65;else config[_0x5f0d7e(0x17c)]===_0x5f0d7e(0x1b6)&&(_0x4d5759=_0x44bf65,_0x238a2c=_0x44bf65*_0xe6c87b[_0x5f0d7e(0x1c2)]/_0xe6c87b[_0x5f0d7e(0x1bf)]);}return[_0x44bf65,_0x4d5759,_0x238a2c];}function getKPIs(_0x2d5cea,_0xb861b8='EUR'){const _0x2f5ec5=_0x479c03,_0x210def=config[_0x2f5ec5(0x17c)],_0x48665a=lastBalances,_0x496f9c=currentCoins,_0x2c7849=getNormalizedPerformance(),_0x5a9395=_0x2d5cea==='basecoin'?_0x210def:_0x2d5cea===_0x2f5ec5(0x155)||_0x2d5cea===_0x2f5ec5(0xda)?_0xb861b8:_0x2f5ec5(0x11a)+_0x210def,_0x48d501=_0x2d5cea===_0x2f5ec5(0x21e)?_0x2f5ec5(0x251):_0x2d5cea===_0x2f5ec5(0xda)?_0x2f5ec5(0x251):_0x5a9395+_0x2f5ec5(0x1bc),_0xcdf319=_0x2d5cea===_0x2f5ec5(0x21e)||_0x2d5cea===_0x2f5ec5(0xda)?'Net\x20effect':_0x5a9395+'\x20change';let _0x21ae2f=0x0;_0x496f9c['forEach'](_0x128c1b=>{const _0x19a484=_0x2f5ec5;_0x21ae2f+=_0x128c1b[_0x19a484(0x12e)]*_0x128c1b[_0x19a484(0x220)];});if(_0x2d5cea===_0x2f5ec5(0x155)||_0x2d5cea==='net-fiat'){if(_0x210def==='BTC'||_0x210def==='ETH'||_0x210def==='PAXG')_0x21ae2f=_0x21ae2f*(_0xb861b8===_0x2f5ec5(0x1b6)?_0x48665a['eur']:_0x48665a[_0x2f5ec5(0x1c2)]);else{if(usdBasecoins[_0x2f5ec5(0x206)](_0x210def))_0x21ae2f=_0x21ae2f*(_0xb861b8===_0x2f5ec5(0x1b6)?_0x48665a[_0x2f5ec5(0x1bf)]/_0x48665a['usd']:0x1);else _0x210def===_0x2f5ec5(0x1b6)&&(_0x21ae2f=_0x21ae2f*(_0xb861b8===_0x2f5ec5(0x1b6)?0x1:_0x48665a[_0x2f5ec5(0x1c2)]/_0x48665a[_0x2f5ec5(0x1bf)]));}}let _0x51bab6;if(_0x21ae2f!==0x0){if(_0x2d5cea==='basecoin')_0x51bab6=(_0x21ae2f/startingBalances[_0x2f5ec5(0x17c)]-0x1)*0x64;else{if(_0xb861b8===_0x2f5ec5(0x1b6))_0x51bab6=(_0x21ae2f/startingBalances['eur']-0x1)*0x64;else _0x51bab6=(_0x21ae2f/startingBalances[_0x2f5ec5(0x1c2)]-0x1)*0x64;}let _0x729560=0x0;if(startingBalances[_0x2f5ec5(0x14f)])_0x496f9c[_0x2f5ec5(0x1fe)](_0x44f09f=>{const _0x37d980=_0x2f5ec5;let _0x51d14a=startingBalances[_0x37d980(0x14f)]['find'](_0x4098f5=>_0x4098f5[_0x37d980(0x175)]===_0x44f09f[_0x37d980(0x175)]);if(_0x51d14a&&_0x51d14a[_0x37d980(0x175)]&&_0x44f09f['number']!==0x0)_0x729560+=_0x51d14a['number']*_0x44f09f[_0x37d980(0x220)];});let _0x397706=0x0;if(_0x2c7849[_0x2f5ec5(0xec)]!==0x0){let _0x399adc=_0x2c7849[_0x2c7849[_0x2f5ec5(0xec)]-0x1];_0x397706=_0x399adc[_0x2f5ec5(0x250)];}_0x729560-=_0x397706;_0x2d5cea===_0x2f5ec5(0x21e)&&(_0x51bab6=(_0x21ae2f-_0x729560)/startingBalances[_0x2f5ec5(0x17c)]*0x64,_0x21ae2f=_0x21ae2f-_0x729560);if(_0x2d5cea===_0x2f5ec5(0xda)){let _0x453bdb=_0xb861b8===_0x2f5ec5(0x1b6)?startingBalances['eur']:startingBalances[_0x2f5ec5(0x1c2)];if(_0x210def==='BTC'||_0x210def===_0x2f5ec5(0x191)||_0x210def==='PAXG')_0x729560=_0xb861b8==='EUR'?_0x729560*_0x48665a[_0x2f5ec5(0x1bf)]:_0x729560*_0x48665a[_0x2f5ec5(0x1c2)];else{if(usdBasecoins['includes'](_0x210def))_0x729560=_0xb861b8===_0x2f5ec5(0x1b6)?_0x729560*_0x48665a[_0x2f5ec5(0x1bf)]/_0x48665a[_0x2f5ec5(0x1c2)]:_0x729560;else _0x210def==='EUR'&&(_0x729560=_0xb861b8===_0x2f5ec5(0x1b6)?_0x729560:_0x729560*_0x48665a[_0x2f5ec5(0x1c2)]/_0x48665a[_0x2f5ec5(0x1bf)]);}_0x51bab6=(_0x21ae2f-_0x729560)/_0x453bdb*0x64,_0x21ae2f=_0x21ae2f-_0x729560;}if(_0x51bab6){if(_0x51bab6<0x64)_0x51bab6=_0x51bab6[_0x2f5ec5(0x28c)](0x2);else{if(_0x51bab6<0x3e8)_0x51bab6=_0x51bab6['toFixed'](0x1);else _0x51bab6=_0x51bab6[_0x2f5ec5(0x28c)](0x0);}}else _0x51bab6=Number('0')[_0x2f5ec5(0x28c)](0x2);if(_0x21ae2f){if(Math['abs'](_0x21ae2f)<0.000001)_0x21ae2f=_0x21ae2f['toFixed'](0x2);else{if(Math[_0x2f5ec5(0x24d)](_0x21ae2f)<0.1)_0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x6);else{if(Math['abs'](_0x21ae2f)<0x1)_0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x5);else{if(Math['abs'](_0x21ae2f)<0xa)_0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x4);else{if(Math[_0x2f5ec5(0x24d)](_0x21ae2f)<0x64)_0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x3);else{if(Math[_0x2f5ec5(0x24d)](_0x21ae2f)<0x3e8)_0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x2);else _0x21ae2f=_0x21ae2f[_0x2f5ec5(0x28c)](0x2);}}}}}}else _0x21ae2f=Number('0')[_0x2f5ec5(0x28c)](0x2);}else _0x51bab6=Number('0')['toFixed'](0x2);return{'value':_0x21ae2f,'change':_0x51bab6,'leftTxt':_0x48d501,'rightTxt':_0xcdf319};}async function getStartingBalances(_0x130d9b,_0x369ecb=!![]){const _0x252481=_0x479c03;if(_0x130d9b[_0x252481(0xec)]!==0x0){const [_0x431458,_0x5a1760,_0xe9576]=getPerf(_0x130d9b[0x0],!![]);let _0x64b2fd=[];config[_0x252481(0x117)][_0x252481(0x1fe)](_0x1c81e5=>{const _0x2ffe49=_0x252481;let _0x15759e=0x0,_0x262771;config[_0x2ffe49(0x21a)][_0x2ffe49(0x1fe)](_0x3899e6=>{const _0x53b9a0=_0x2ffe49;let _0x3f2a6a=_0x3899e6[_0x53b9a0(0x20f)]['find'](_0x3c4547=>_0x3c4547[_0x53b9a0(0x175)]==_0x1c81e5[_0x53b9a0(0x175)]);if(_0x3f2a6a){_0x15759e+=_0x3f2a6a[_0x53b9a0(0x12e)];if(!_0x262771)_0x262771=_0x3f2a6a['price'];}}),_0x64b2fd[_0x2ffe49(0x1a9)]({'coin':_0x1c81e5[_0x2ffe49(0x175)],'number':_0x15759e,'initialprice':_0x262771});});const _0x4a7f11={'basecoin':_0x431458,'eur':_0x5a1760,'usd':_0xe9576,'coins':_0x64b2fd};if(_0x369ecb)proxyEmit(_0x252481(0x1bb),_0x4a7f11);startingBalances=_0x4a7f11;}}function headlessMode(_0x3ad79c){const _0x25d83a=_0x479c03;let _0x5d4565=_0x3ad79c[_0x25d83a(0x117)],_0x5ac330=_0x3ad79c[_0x25d83a(0x12b)],_0x2ea452=[];for(let _0x3af363 of _0x5d4565){if(_0x3af363[_0x25d83a(0x175)]!=config['basecoin']){if(_0x3af363['delta']>=_0x5ac330/0x64){if(_0x3af363['valid'])_0x2ea452['push'](_0x3af363);}else{if(_0x3af363[_0x25d83a(0x182)]<=-_0x5ac330/0x64){if(_0x3af363[_0x25d83a(0x224)])_0x2ea452[_0x25d83a(0x1a9)](_0x3af363);}}}}_0x2ea452[_0x25d83a(0xec)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x2ea452[_0x25d83a(0x1fe)](_0x33f29e=>{const _0x24b913=_0x25d83a;logger[_0x24b913(0x119)](_0x24b913(0xdf)+_0x33f29e['coin']+'\x20'+_0x33f29e[_0x24b913(0x12e)]+'\x20'+_0x33f29e['last']+'\x20'+_0x33f29e['distribution']+'%\x20'+_0x33f29e[_0x24b913(0x1e5)]+'%\x20'+(0x64*_0x33f29e[_0x24b913(0x182)])[_0x24b913(0x28c)](0x2)+_0x24b913(0x131)+_0x5ac330[_0x24b913(0x28c)](0x2)+'%)');}),placeOrder(_0x2ea452));}function notifyBalance(_0x19603f){const _0x10c0fb=_0x479c03;let _0x757171=_0x19603f[_0x10c0fb(0x117)],_0x25c830=_0x19603f[_0x10c0fb(0x12b)],_0x3a08ec=[];for(let _0x2dd3f5 of _0x757171){if(_0x2dd3f5['coin']!=config[_0x10c0fb(0x17c)]){if(_0x2dd3f5[_0x10c0fb(0x182)]>=_0x25c830/0x64){if(_0x2dd3f5[_0x10c0fb(0x224)])_0x3a08ec[_0x10c0fb(0x1a9)](_0x2dd3f5);}else{if(_0x2dd3f5[_0x10c0fb(0x182)]<=-_0x25c830/0x64){if(_0x2dd3f5['valid'])_0x3a08ec[_0x10c0fb(0x1a9)](_0x2dd3f5);}}}}if(_0x3a08ec[_0x10c0fb(0xec)]>0x0){let _0x3cedd7=_0x3a08ec[_0x10c0fb(0x21b)](_0x4b5166=>_0x4b5166['coin']);_0x3cedd7[_0x10c0fb(0x272)]();let _0x224e9a=_0x3cedd7[_0x10c0fb(0x270)](',\x20');if(!lastCoinsToBalance)logHistory(_0x10c0fb(0x1e4),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x224e9a;}}function symbolToCoin(_0xda1023){const _0x28bc70=_0x479c03;let _0x67db5a;if(_0xda1023[_0x28bc70(0x206)]('/'+config[_0x28bc70(0x17c)]))_0x67db5a=_0xda1023[_0x28bc70(0x15f)]('/'+config[_0x28bc70(0x17c)],'');if(_0xda1023[_0x28bc70(0x206)](config[_0x28bc70(0x17c)]+'/'))_0x67db5a=_0xda1023[_0x28bc70(0x15f)](config[_0x28bc70(0x17c)]+'/','');return _0x67db5a;}async function unlockOrders(_0xe1c8be=![]){const _0x5c7bb9=_0x479c03;if(allOrdersPlaced&&lockOrders==ORDERS[_0x5c7bb9(0x13f)]){logger['debug'](_0x5c7bb9(0x283)),lockOrders=ORDERS[_0x5c7bb9(0x18a)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0xe1c8be){const _0x5610d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5610d,setBlockTransactionDetection(![]);}validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x5c7bb9(0x119)](_0x5c7bb9(0x20a));}}async function validateOrders(_0x19f471){const _0x3060bc=_0x479c03;if(_0x19f471)validateOrdersState=_0x19f471;logger[_0x3060bc(0x119)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x3060bc(0x266)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x3060bc(0x171):'ORDERS.UNLOCKED'));let _0x18804d=[],_0x500515=config['ordertype']==_0x3060bc(0x183)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3060bc(0x197)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3060bc(0x13f)])return;logger[_0x3060bc(0x119)](_0x3060bc(0x124)+validateOrdersState),lastOrders[_0x3060bc(0x1fe)](_0x3f8e77=>{const _0x4b5d6b=_0x3060bc;let _0x5c7a6b=![];_0x3f8e77[_0x4b5d6b(0xe2)]>0x0&&(_0x5c7a6b=!![]),_0x18804d[_0x4b5d6b(0x1a9)](_0x5c7a6b),_0x5c7a6b&&config[_0x4b5d6b(0x121)]!=_0x4b5d6b(0x183)&&logHistory(_0x4b5d6b(0x174),_0x4b5d6b(0x1b3)+_0x3f8e77[_0x4b5d6b(0x281)]+'\x20'+_0x3f8e77['side']+'\x20#'+formatResult(_0x3f8e77[_0x4b5d6b(0xe2)],0x8)+'\x20@'+formatResult(_0x3f8e77['price'],0x8));}),_0x18804d[_0x3060bc(0x1fe)]((_0x2751a3,_0x5914d1)=>{const _0x564ddb=_0x3060bc;if(_0x2751a3)lastOrders[_0x564ddb(0x165)](_0x5914d1,0x1);}),persistOpenOrders(lastOrders);const _0x19f411=coolingDown?_0x3060bc(0x213):_0x3060bc(0x1ed);if(validateOrdersState==_0x3060bc(0x101)){validateOrdersState=_0x3060bc(0x123);if(_0x18804d['includes'](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x3060bc(0x123)){if(_0x18804d[_0x3060bc(0x206)](![])){}else await unlockOrders();}else{if(validateOrdersState=='final')_0x18804d[_0x3060bc(0x206)](![])&&(config['ordertype']==_0x3060bc(0x183)?logHistory('success',_0x3060bc(0x23f)+Math[_0x3060bc(0x16b)](_0x500515*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x19f411):(await cancelOrders(),logHistory(_0x3060bc(0x280),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x3060bc(0x16b)](_0x500515*validateOrderInterval/0xea60)+_0x3060bc(0x114)+_0x19f411))),await unlockOrders(!![]);else{if(validateOrdersState==_0x3060bc(0x19c)){if(config[_0x3060bc(0x121)]!=_0x3060bc(0x183))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x19f411);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x4ef739=_0x479c03;lastOrders[_0x4ef739(0x1fe)](async _0x5cf2d7=>{const _0xf2087d=_0x4ef739;try{const _0x60680=await exchange[_0xf2087d(0xe9)](_0x5cf2d7['orderId'],_0x5cf2d7[_0xf2087d(0x281)]);}catch(_0x2d2e71){if(_0x2d2e71[_0xf2087d(0x159)]()['includes'](_0xf2087d(0x226))){}else await handleError(_0x2d2e71,_0xf2087d(0x146));}});}async function initCoinResults(_0x55869c){const _0x255b51=_0x479c03;_0x55869c?logger[_0x255b51(0x119)]('Resetting\x20coin\x20results:\x20'+_0x55869c):logger[_0x255b51(0x119)](_0x255b51(0x25b)),config[_0x255b51(0x117)][_0x255b51(0x1fe)](_0x24b6c0=>{const _0x388540=_0x255b51;if(!_0x24b6c0['excluded']&&_0x24b6c0[_0x388540(0x175)]!=config[_0x388540(0x17c)]){const _0x47d093=currentCoins[_0x388540(0x199)](_0x56cfbc=>_0x56cfbc[_0x388540(0x175)]==_0x24b6c0[_0x388540(0x175)]),_0xa926ed=gTicker[noslash(_0x24b6c0[_0x388540(0x281)])];let _0x403fa3=_0x47d093?_0x47d093['number']:null,_0x1d2cdd=_0x24b6c0[_0x388540(0x168)]?0x1/_0xa926ed:_0xa926ed,_0x4fe97c;config['liquidity'][_0x388540(0x1fe)](_0x4a3900=>{const _0xc47e4f=_0x388540;!_0x4fe97c&&(_0x4fe97c=_0x4a3900[_0xc47e4f(0x20f)]['find'](_0x303061=>_0x303061[_0xc47e4f(0x175)]==_0x24b6c0[_0xc47e4f(0x175)]),_0x4fe97c&&(_0x403fa3=_0x4fe97c[_0xc47e4f(0x12e)],_0x1d2cdd=_0x4fe97c[_0xc47e4f(0x1fc)]));});let _0x2d48d2=dbCoinResults[_0x388540(0x23d)]('coins')['find']({'coin':_0x24b6c0[_0x388540(0x175)]})[_0x388540(0x275)]();if(!_0x2d48d2){const _0x21cef6={'coin':_0x24b6c0['coin'],'number':_0x403fa3,'breakeven':_0x1d2cdd,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x388540(0x23d)]('coins')['push'](_0x21cef6)[_0x388540(0x227)]();}else{if(_0x55869c&&_0x24b6c0[_0x388540(0x175)]==_0x55869c){const _0x2a324b={'coin':_0x24b6c0[_0x388540(0x175)],'number':_0x403fa3,'breakeven':_0x1d2cdd,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x388540(0x23d)](_0x388540(0x14f))[_0x388540(0x199)]({'coin':_0x24b6c0[_0x388540(0x175)]})['assign'](_0x2a324b)['write']();}}}});}async function updateCoinResults(_0x3d944c,_0x2fdd84=![]){const _0x39d235=_0x479c03;let _0x23ce37,_0x2e5606,_0x11dae7,_0x5191ae,_0x58a943,_0xa7f7b3,_0x3eb3d4=dbCoinResults[_0x39d235(0x23d)]('coins')[_0x39d235(0x199)]({'coin':_0x3d944c[_0x39d235(0x175)]})[_0x39d235(0x275)](),_0x5a7f7b=![];_0x3eb3d4&&Object[_0x39d235(0x287)](_0x3eb3d4)[_0x39d235(0x1fe)](([_0x5f4141,_0x39dbb8])=>{if(_0x39dbb8==null)_0x5a7f7b=!![];});(!_0x3eb3d4||_0x5a7f7b)&&(await initCoinResults(_0x3d944c[_0x39d235(0x175)]),_0x3eb3d4=dbCoinResults['get'](_0x39d235(0x14f))['find']({'coin':_0x3d944c[_0x39d235(0x175)]})[_0x39d235(0x275)]());_0x3d944c[_0x39d235(0x168)]&&(_0xa7f7b3={'filled':_0x3d944c[_0x39d235(0xe2)]*_0x3d944c[_0x39d235(0x1fc)],'amount':_0x3d944c[_0x39d235(0xe2)]*_0x3d944c[_0x39d235(0x1fc)],'side':_0x3d944c[_0x39d235(0x24c)]==_0x39d235(0x25c)?_0x39d235(0x219):_0x39d235(0x25c),'price':0x1/_0x3d944c[_0x39d235(0x1fc)]},_0x3d944c={..._0x3d944c,..._0xa7f7b3});_0x2fdd84?_0x2e5606=_0x3d944c['side']==_0x39d235(0x219)?_0x3eb3d4['number']+_0x3d944c[_0x39d235(0xe2)]:_0x3eb3d4['number']-_0x3d944c[_0x39d235(0xe2)]:_0x2e5606=await getCoinNumber(_0x3d944c['coin']);if(_0x3d944c[_0x39d235(0x21d)]&&_0x3d944c[_0x39d235(0x21d)][_0x39d235(0x1cf)]==config[_0x39d235(0x17c)])_0x23ce37=Number(_0x3d944c[_0x39d235(0x21d)][_0x39d235(0x258)]);else{if(_0x3d944c[_0x39d235(0x21d)]&&_0x3d944c[_0x39d235(0x21d)][_0x39d235(0x1cf)]==_0x39d235(0x14e)&&!_0x2fdd84&&config[_0x39d235(0x17c)]!=_0x39d235(0x1b1))_0x23ce37=Number(_0x3d944c[_0x39d235(0x21d)][_0x39d235(0x258)])*gTicker['BNB'+config[_0x39d235(0x17c)]];else _0x23ce37=defaultFee*_0x3d944c[_0x39d235(0xe2)]*_0x3d944c['price'];}_0x3d944c[_0x39d235(0x24c)]==_0x39d235(0x219)?(_0x11dae7=_0x2e5606!=0x0?(_0x3eb3d4[_0x39d235(0x163)]*_0x3eb3d4[_0x39d235(0x12e)]+_0x3d944c['price']*(_0x2e5606-_0x3eb3d4[_0x39d235(0x12e)])+_0x23ce37)/_0x2e5606:0x0,_0x5191ae=_0x3eb3d4[_0x39d235(0x128)]):(_0x11dae7=_0x2e5606!=0x0?(_0x3eb3d4[_0x39d235(0x163)]*_0x3eb3d4[_0x39d235(0x12e)]-_0x3d944c[_0x39d235(0x1fc)]*(_0x3eb3d4[_0x39d235(0x12e)]-_0x2e5606)+_0x23ce37)/_0x2e5606:0x0,_0x5191ae=_0x3eb3d4[_0x39d235(0x128)]+(_0x3d944c[_0x39d235(0x1fc)]-_0x3eb3d4[_0x39d235(0x163)])*_0x3d944c[_0x39d235(0xe2)]);_0x58a943=(_0x3d944c[_0x39d235(0x1fc)]-_0x11dae7-_0x23ce37/_0x3d944c[_0x39d235(0xe2)])*_0x2e5606;let _0x35f641={'coin':_0x3d944c[_0x39d235(0x175)],'number':_0x2e5606,'breakeven':formatResult(_0x11dae7,0x8),'realized':formatResult(_0x5191ae,0x8),'unrealized':formatResult(_0x58a943,0x8),'fees':formatResult(_0x3eb3d4[_0x39d235(0x210)]+_0x23ce37,0x8),'sells':_0x3d944c[_0x39d235(0x24c)]==_0x39d235(0x25c)?_0x3eb3d4[_0x39d235(0x215)]+0x1:_0x3eb3d4[_0x39d235(0x215)],'buys':_0x3d944c['side']==_0x39d235(0x219)?_0x3eb3d4[_0x39d235(0x17b)]+0x1:_0x3eb3d4[_0x39d235(0x17b)]};dbCoinResults[_0x39d235(0x23d)](_0x39d235(0x14f))['find']({'coin':_0x3d944c[_0x39d235(0x175)]})[_0x39d235(0xff)](_0x35f641)[_0x39d235(0x227)]();if(!_0x2fdd84){if(_0x3d944c['fee']&&_0x3d944c[_0x39d235(0x21d)][_0x39d235(0x1cf)]==_0x39d235(0x14e)){const _0x4212a7=currentCoins[_0x39d235(0x199)](_0x3ce712=>_0x3ce712[_0x39d235(0x175)]==_0x39d235(0x14e));if(_0x4212a7){let _0x49ec46=dbCoinResults[_0x39d235(0x23d)]('coins')[_0x39d235(0x199)]({'coin':_0x39d235(0x14e)})[_0x39d235(0x275)]();_0x35f641={..._0x49ec46,'number':_0x4212a7[_0x39d235(0x12e)]},dbCoinResults[_0x39d235(0x23d)](_0x39d235(0x14f))[_0x39d235(0x199)]({'coin':'BNB'})['assign'](_0x35f641)[_0x39d235(0x227)]();}}}}async function placeOrder(_0x163fcf){const _0xb01db9=_0x479c03,_0x28c202=config['ordertype']==_0xb01db9(0x183)?_0xb01db9(0x183):_0xb01db9(0x18e);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0xb01db9(0x101);let _0xcaa6b6=![];lastOrders=[];for(const _0xa07e61 of _0x163fcf){let _0x194eac,_0x56b9e3,_0x152fa7,_0x21eec0,_0xfea763,_0x1b5d5b=_0xa07e61[_0xb01db9(0x281)];try{const _0x47d641=await exchange[_0xb01db9(0x10a)](_0x1b5d5b);_0x194eac=_0xa07e61[_0xb01db9(0x168)]?0x1/_0xa07e61[_0xb01db9(0x220)]:_0xa07e61['last'],_0x56b9e3=_0x47d641[_0xb01db9(0x144)],_0x152fa7=_0x47d641[_0xb01db9(0xe1)];_0xa07e61['reverse']?(_0x21eec0=_0xa07e61[_0xb01db9(0x24c)]==_0xb01db9(0x219)?_0xb01db9(0x25c):'buy',_0xfea763=Math[_0xb01db9(0x24d)](_0xa07e61['trade'])/_0x194eac):(_0x21eec0=_0xa07e61['side'],_0xfea763=Math[_0xb01db9(0x24d)](_0xa07e61[_0xb01db9(0x205)]));_0x28c202==_0xb01db9(0x18e)&&(config['ordertype']==_0xb01db9(0x142)&&(_0x194eac=_0x21eec0==_0xb01db9(0x219)?_0x56b9e3:_0x152fa7),config[_0xb01db9(0x121)]=='limit-low'&&(_0x194eac=_0x21eec0==_0xb01db9(0x219)?_0x152fa7:_0x56b9e3));_0xfea763=formatResult(_0xfea763,0x8),_0x194eac=formatResult(_0x194eac,0x8);const _0x169204=_0x21eec0==_0xb01db9(0x25c)?config[_0xb01db9(0x23e)]?String['fromCodePoint']('0x'+config[_0xb01db9(0x23e)])+'\x20':'':config[_0xb01db9(0x1d4)]?String[_0xb01db9(0x198)]('0x'+config[_0xb01db9(0x1d4)])+'\x20':'',_0x288ddc=_0x28c202==_0xb01db9(0x183)?_0xb01db9(0x17a):config[_0xb01db9(0x121)]==_0xb01db9(0x142)?'Limit\x20(high-margin)':_0xb01db9(0xed),_0x3501a5=(Math['floor'](Math[_0xb01db9(0x10c)]()*0x35a4e900)+0x5f5e100)[_0xb01db9(0x159)]();lastOrders[_0xb01db9(0x1a9)]({'customId':_0x3501a5,'symbol':_0x1b5d5b,'coin':_0xa07e61['coin'],'amount':_0xfea763,'price':_0x194eac,'side':_0x21eec0,'reverse':_0xa07e61[_0xb01db9(0x168)],'filled':0x0});if(_0x28c202==_0xb01db9(0x183))logHistory(_0xb01db9(0x174),''+_0x169204+_0x288ddc+'\x20order:\x20'+_0x1b5d5b+'\x20'+_0x21eec0+'\x20#'+formatResult(_0xfea763,0x8)+'\x20@'+formatResult(_0x194eac,0x8));else logHistory(_0xb01db9(0x174),''+_0x169204+_0x288ddc+'\x20order:\x20'+_0x1b5d5b+'\x20'+_0x21eec0+'\x20#'+formatResult(_0xfea763,0x8)+'\x20@'+formatResult(_0x194eac,0x8));let _0x1ae0ee;_0x28c202==_0xb01db9(0x183)?_0x21eec0==_0xb01db9(0x219)&&[_0xb01db9(0x177),_0xb01db9(0x20b),_0xb01db9(0x12a),'Huobi',_0xb01db9(0xea)][_0xb01db9(0x206)](config[_0xb01db9(0x252)])?_0x1ae0ee=await exchange['createOrder'](_0x1b5d5b,_0x28c202,_0x21eec0,_0xfea763,_0x194eac):_0x1ae0ee=await exchange[_0xb01db9(0x192)](_0x1b5d5b,_0x28c202,_0x21eec0,_0xfea763,undefined):_0x1ae0ee=await exchange[_0xb01db9(0x192)](_0x1b5d5b,_0x28c202,_0x21eec0,_0xfea763,_0x194eac);logger[_0xb01db9(0x119)](_0xb01db9(0x106)+_0x1ae0ee['id']+_0xb01db9(0xde)+_0x3501a5);const _0x4dfcb2=lastOrders[_0xb01db9(0xec)]-0x1;if(_0x4dfcb2>=0x0&&lastOrders[_0x4dfcb2][_0xb01db9(0x145)]==_0x3501a5){lastOrders[_0x4dfcb2][_0xb01db9(0x13b)]=_0x1ae0ee['id'];if(_0x1ae0ee[_0xb01db9(0x10f)])lastOrders[_0x4dfcb2][_0xb01db9(0x10f)]=_0x1ae0ee[_0xb01db9(0x10f)];if(_0x1ae0ee['price'])lastOrders[_0x4dfcb2][_0xb01db9(0x1fc)]=_0x1ae0ee['price'];lastOrders[_0x4dfcb2][_0xb01db9(0x21d)]=_0x1ae0ee[_0xb01db9(0x21d)];}if(config[_0xb01db9(0x22c)]!=0x0){let _0x32beba=null;if(cooldownTracker[_0xb01db9(0xec)]==config['cooldown']-0x1)_0x32beba=cooldownTracker['shift']();const _0x242cda=getTimeStamp();cooldownTracker[_0xb01db9(0x1a9)](_0x242cda);if(_0x32beba){const _0x3d90bb=fns[_0xb01db9(0x25d)](new Date(_0x242cda),new Date(_0x32beba));if(_0x3d90bb<cooldownInterval){logHistory(_0xb01db9(0x1f0),_0xb01db9(0x263)+config[_0xb01db9(0x22c)]+_0xb01db9(0x208)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xb01db9(0x235)),coolingDown=!![];break;}}}}catch(_0x42dd8f){if(_0x42dd8f[_0xb01db9(0x159)]()[_0xb01db9(0x206)](_0xb01db9(0x18c)))lastOrders=lastOrders['filter'](_0x336030=>_0x336030[_0xb01db9(0x281)]!=_0x1b5d5b),logHistory(_0xb01db9(0x1f0),_0xb01db9(0x1e3)+_0x1b5d5b),_0xcaa6b6=!![];else{if(_0x42dd8f[_0xb01db9(0x159)]()[_0xb01db9(0x206)](_0xb01db9(0x135)))lastOrders=lastOrders[_0xb01db9(0x207)](_0x5ceed9=>_0x5ceed9[_0xb01db9(0x281)]!=_0x1b5d5b),logHistory('error',_0xb01db9(0x222)+_0x1b5d5b),_0xcaa6b6=!![];else{if(_0x42dd8f['toString']()[_0xb01db9(0x206)]('InvalidOrder'))lastOrders=lastOrders[_0xb01db9(0x207)](_0x48d157=>_0x48d157[_0xb01db9(0x281)]!=_0x1b5d5b),logHistory(_0xb01db9(0x1f0),_0xb01db9(0x27f)+_0x1b5d5b),logger[_0xb01db9(0x119)](_0x42dd8f),_0xcaa6b6=!![];else _0x42dd8f[_0xb01db9(0x159)]()[_0xb01db9(0x206)](_0xb01db9(0x246))?(lastOrders=lastOrders['filter'](_0x277e8d=>_0x277e8d[_0xb01db9(0x281)]!=_0x1b5d5b),logHistory(_0xb01db9(0x1f0),_0xb01db9(0x1e3)+_0x1b5d5b),_0xcaa6b6=!![]):(lastOrders=lastOrders[_0xb01db9(0x207)](_0x4bd1b2=>_0x4bd1b2[_0xb01db9(0x281)]!=_0x1b5d5b),await handleError(_0x42dd8f,_0xb01db9(0x16f),_0x1b5d5b));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xb01db9(0xec)]>0x0){const _0x2ec572=config[_0xb01db9(0x121)]==_0xb01db9(0x183)?validateOrderTimeout*0x3c*0x3e8:config[_0xb01db9(0x197)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x13e525=_0xb01db9;validateOrders(_0x13e525(0x265));},_0x2ec572);}else unlockOrders();_0xcaa6b6&&config[_0xb01db9(0x256)]&&(logHistory('error',_0xb01db9(0x28d)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xb01db9(0x280),_0xb01db9(0x151)));}else{if(coolingDown)!config['headless']&&logHistory(_0xb01db9(0x1f0),_0xb01db9(0xe7));else lockOrders!=ORDERS[_0xb01db9(0xe3)]&&(!config[_0xb01db9(0x256)]&&(config[_0xb01db9(0x121)]==_0xb01db9(0x183)?logHistory(_0xb01db9(0x1f0),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xb01db9(0x1f0),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x217f8c){const _0x3c2099=_0x479c03,_0x38fbe1={...config,'openOrders':_0x217f8c};let _0x339582=dbConfig[_0x3c2099(0x23d)](_0x3c2099(0x139))[_0x3c2099(0x199)]({'botID':botID})[_0x3c2099(0x275)]();_0x339582&&dbConfig[_0x3c2099(0x23d)]('bot')[_0x3c2099(0x199)]({'botID':botID})[_0x3c2099(0xff)](_0x38fbe1)[_0x3c2099(0x227)]();}function restoreOrders(){const _0x18f81d=_0x479c03;let _0x7682ea;config['openOrders']&&allOpenOrders[_0x18f81d(0x1fe)](_0x29dfe3=>{const _0x4b999b=_0x18f81d,_0x17b68d=config[_0x4b999b(0x113)]['find'](_0x5d4fdd=>_0x5d4fdd[_0x4b999b(0x13b)]==_0x29dfe3['id']);_0x17b68d&&(lastOrders['push'](_0x17b68d),_0x7682ea=_0x29dfe3[_0x4b999b(0x1a1)]);});if(lastOrders[_0x18f81d(0xec)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x18f81d(0x123),allOrdersPlaced=!![];const _0x1d0aad=new Date()[_0x18f81d(0x1eb)](),_0x35f79a=config[_0x18f81d(0x121)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x18f81d(0x197)]*0x3c*0x3e8;if(_0x7682ea+_0x35f79a>_0x1d0aad){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x26cffa=_0x18f81d;validateOrders(_0x26cffa(0x265));},_0x7682ea+_0x35f79a-_0x1d0aad);}else validateOrders('final');}}function _0x3742(_0x4af1d3,_0x40278a){const _0x47bce1=_0x19a2();return _0x3742=function(_0x59c2d8,_0x3f527a){_0x59c2d8=_0x59c2d8-0xd2;let _0x19a2f3=_0x47bce1[_0x59c2d8];return _0x19a2f3;},_0x3742(_0x4af1d3,_0x40278a);}async function sendMetricsTelegram(){const _0x53b78b=_0x479c03;if(!coinsLoaded){process[_0x53b78b(0x214)]({'telegrammsg':_0x53b78b(0x1e9)},_0x595057=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x21a76c='';if(config[_0x53b78b(0x27b)])_0x21a76c=_0x53b78b(0x1da)+config['botname']+'\x20metrics:</b>\x20\x0a\x0a';else _0x21a76c=_0x53b78b(0x1ae)+botID+_0x53b78b(0x22a);const _0x28eebe=getKPIs(_0x53b78b(0x17c)),_0x5ecfe4=getKPIs('fiat',config['fiat']),_0x14037f=getKPIs(_0x53b78b(0x21e)),_0x463248=getKPIs('net-fiat',config[_0x53b78b(0x155)]);_0x21a76c+=_0x53b78b(0x16d),_0x21a76c+=_0x28eebe[_0x53b78b(0x209)]+_0x53b78b(0x11b)+_0x28eebe[_0x53b78b(0x275)]+'\x0a',_0x21a76c+=_0x28eebe[_0x53b78b(0x10b)]+':\x20'+_0x28eebe[_0x53b78b(0x100)]+'%\x0a',_0x21a76c+=_0x5ecfe4['leftTxt']+_0x53b78b(0x11b)+_0x5ecfe4[_0x53b78b(0x275)]+'\x0a',_0x21a76c+=_0x5ecfe4[_0x53b78b(0x10b)]+':\x20'+_0x5ecfe4[_0x53b78b(0x100)]+'%\x0a',_0x21a76c+=_0x14037f[_0x53b78b(0x209)]+':\x20'+_0x14037f[_0x53b78b(0x275)]+'\x20('+config['basecoin']+')\x0a',_0x21a76c+=_0x14037f['rightTxt']+':\x20'+_0x14037f[_0x53b78b(0x100)]+_0x53b78b(0x131)+config[_0x53b78b(0x17c)]+')\x0a',_0x21a76c+=_0x463248[_0x53b78b(0x209)]+':\x20'+_0x463248[_0x53b78b(0x275)]+'\x20('+config[_0x53b78b(0x155)]+')\x0a',_0x21a76c+=_0x463248['rightTxt']+':\x20'+_0x463248[_0x53b78b(0x100)]+_0x53b78b(0x131)+config['fiat']+')\x0a',_0x21a76c+=_0x53b78b(0x291),process[_0x53b78b(0x214)]({'telegrammsg':_0x21a76c},_0x1984e5=>{});}async function sendPortfolioTelegram(){const _0x2217ba=_0x479c03;if(!coinsLoaded||!currentCoins[0x0][_0x2217ba(0x1a5)]){process[_0x2217ba(0x214)]({'telegrammsg':_0x2217ba(0x1e9)},_0x565e37=>{});return;}let _0x3cb8a9='';if(config[_0x2217ba(0x27b)])_0x3cb8a9=_0x2217ba(0x1da)+config[_0x2217ba(0x24e)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x3cb8a9=_0x2217ba(0x1ae)+botID+_0x2217ba(0x1ce);_0x3cb8a9+='<pre>',_0x3cb8a9+=_0x2217ba(0x14d),_0x3cb8a9+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3cb8a9+=_0x2217ba(0x14d),currentCoins[_0x2217ba(0x1fe)](_0x587ba9=>{const _0x285b08=_0x2217ba;_0x3cb8a9+=_0x587ba9[_0x285b08(0x175)]['padEnd'](0x7)+'|\x20'+formatPad(_0x587ba9['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x587ba9[_0x285b08(0x1e5)],0x2,0x6)+'|\x20'+formatPad(_0x587ba9['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3cb8a9+='</pre>',process[_0x2217ba(0x214)]({'telegrammsg':_0x3cb8a9},_0x25b271=>{});}function formatPad(_0x3a28e3,_0x56676e,_0x3d7d50){const _0xd7e3a8=formatResultString(_0x3a28e3,_0x56676e);return _0xd7e3a8?_0xd7e3a8['padStart'](_0x3d7d50):''['padStart'](_0x3d7d50);}function logHistory(_0xce41be,_0xbcdd4a,_0x957928=''){const _0x29ba8d=_0x479c03;logger[_0x29ba8d(0x240)](''+_0xbcdd4a);let _0x20bbb4={'time':getTimeStamp(),'type':_0xce41be,'event':_0xbcdd4a};dbLogs[_0x29ba8d(0x23d)](_0x29ba8d(0xd6))[_0x29ba8d(0x1a9)](_0x20bbb4)['write']();if(_0x957928=='')_0x957928=_0xbcdd4a;proxyEmit(_0x29ba8d(0x278),{'log':_0x20bbb4,'summary':_0x957928}),process['send']({'telegram':{..._0x20bbb4,'botname':config[_0x29ba8d(0x24e)],'showname':config[_0x29ba8d(0x27b)]}},_0x11adc9=>{});}function emitHistory(_0x3a8e07={}){const _0x51c7ea=_0x479c03;Object[_0x51c7ea(0x26e)](_0x3a8e07)[_0x51c7ea(0xec)]==0x0&&(_0x3a8e07={'type':['order',_0x51c7ea(0x278)],'event':'','page':0x1});if(_0x3a8e07[_0x51c7ea(0x267)][_0x51c7ea(0x206)]('event'))_0x3a8e07['type'][_0x51c7ea(0x165)](_0x3a8e07['type'][_0x51c7ea(0x229)](_0x51c7ea(0x278)),0x1,_0x51c7ea(0x1f0),'warning',_0x51c7ea(0x280));if(dbLogs['has']('logs')['value']()){let _0x19a9f0=dbLogs[_0x51c7ea(0x23d)]('logs')[_0x51c7ea(0x207)](_0x4fa8f3=>{const _0x4aadbe=_0x51c7ea;if(_0x3a8e07[_0x4aadbe(0x267)][_0x4aadbe(0xec)]==0x0)return![];else return _0x3a8e07['type'][_0x4aadbe(0x206)](_0x4fa8f3[_0x4aadbe(0x267)]);})[_0x51c7ea(0x207)](_0x16ca15=>{const _0x208fe6=_0x51c7ea;if(_0x3a8e07[_0x208fe6(0x278)]=='')return!![];else return _0x16ca15[_0x208fe6(0x278)]['toLowerCase']()[_0x208fe6(0x206)](_0x3a8e07[_0x208fe6(0x278)][_0x208fe6(0x109)]());})[_0x51c7ea(0x16c)]('time'),_0x53c933=_0x19a9f0[_0x51c7ea(0x275)]()[_0x51c7ea(0xec)];_0x19a9f0=_0x19a9f0[_0x51c7ea(0x168)]()['slice']((_0x3a8e07[_0x51c7ea(0x293)]-0x1)*logPageSize,_0x3a8e07[_0x51c7ea(0x293)]*logPageSize-0x1)['reverse']()[_0x51c7ea(0x275)](),proxyEmit('event-history',{'logs':_0x19a9f0,'total':_0x53c933});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x40bd60){const _0x537b41=_0x479c03;if(dbLogs[_0x537b41(0xd8)](_0x537b41(0xd6))['value']()){const _0xc69e82=dbLogs[_0x537b41(0x23d)](_0x537b41(0xd6))[_0x537b41(0x16c)]('time')['filter'](_0x56fe75=>{const _0x2e6661=_0x537b41;return _0x56fe75[_0x2e6661(0x267)]==_0x2e6661(0x174);})['value']();dbLogs[_0x537b41(0x23d)](_0x537b41(0xd6))[_0x537b41(0x274)]()[_0x537b41(0x227)](),dbLogs[_0x537b41(0x23d)](_0x537b41(0xd6))['assign'](_0xc69e82)[_0x537b41(0x227)](),emitHistory(_0x40bd60);}}async function pauseBot(_0x29716d=pauseBotIntervalShort,_0x2206a3,_0x29f064,_0x10e966=![]){const _0x1bf363=_0x479c03,_0x17e999=new Date()[_0x1bf363(0x1eb)]();if(!lastErrorShown||_0x17e999-lastErrorShown>=_0x29716d){lastErrorShown=_0x17e999;if(!lastBotPause)lastBotPause=_0x17e999,consecutivePauses=0x1;else{if(_0x17e999-lastBotPause-_0x29716d<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x10e966){logHistory('error',_0x2206a3+_0x1bf363(0x292)),await killBot();return;}else logHistory(_0x1bf363(0x1f0),_0x2206a3+pauseBotMsg),_0x29716d=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x17e999;}_0x29f064?logger[_0x1bf363(0x119)]('('+consecutivePauses+')\x20'+_0x2206a3+_0x1bf363(0x1c0),_0x29f064):logger[_0x1bf363(0x119)]('('+consecutivePauses+')\x20'+_0x2206a3);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x29716d),botPaused=![],_0x29716d==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4864a0=_0x479c03;botPaused=!![],await sleep(0x3e8),process[_0x4864a0(0x214)]({'stop':_0x4864a0(0xef)},_0x39674e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3dd727,_0x240d61){const _0x4b9fe8=_0x479c03;if(botPaused)return;const _0x2ac99f=config[_0x4b9fe8(0x252)]||_0x4b9fe8(0x247);if(_0x240d61)logger[_0x4b9fe8(0x119)](_0x4b9fe8(0x1c5)+_0x240d61);const _0x123db7=()=>{const _0x122cf7=_0x4b9fe8;loading[_0x122cf7(0x1f0)]=!![],emitLoadingProgress();};if(_0x3dd727[_0x4b9fe8(0x159)]()[_0x4b9fe8(0x206)](_0x4b9fe8(0x1cb)))logHistory(_0x4b9fe8(0x1f0),_0x2ac99f+_0x4b9fe8(0x150)),_0x123db7();else{if(_0x3dd727[_0x4b9fe8(0x159)]()[_0x4b9fe8(0x206)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x2ac99f+_0x4b9fe8(0x238)),_0x123db7();else{if(_0x3dd727[_0x4b9fe8(0x159)]()[_0x4b9fe8(0x206)](_0x4b9fe8(0x1ac)))config[_0x4b9fe8(0x1f5)]?errormsg=_0x2ac99f+_0x4b9fe8(0x185):errormsg=_0x2ac99f+_0x4b9fe8(0x147),logHistory(_0x4b9fe8(0x1f0),errormsg+'(see:\x20hodlerhacks.com/fix/1)'),_0x123db7();else _0x3dd727['toString']()[_0x4b9fe8(0x206)]('PermissionDenied')?(logHistory(_0x4b9fe8(0x1f0),_0x2ac99f+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x123db7()):await handleError(_0x3dd727,null);}}}async function handleError(_0x3d4567,_0x46d392,_0x176cf7=''){const _0x4e36df=_0x479c03;if(botPaused)return;let _0x2c9d1b;const _0x25a219=config['exchange']||_0x4e36df(0x247);if(_0x46d392)logger[_0x4e36df(0x119)](_0x4e36df(0x1c5)+_0x46d392);if(_0x3d4567['toString']()[_0x4e36df(0x206)]('DDoSProtection'))_0x2c9d1b=_0x25a219+_0x4e36df(0x1a8),await pauseBot(undefined,_0x2c9d1b,_0x3d4567);else{if(_0x3d4567['toString']()[_0x4e36df(0x206)](_0x4e36df(0x21c)))_0x2c9d1b=_0x25a219+_0x4e36df(0x1bd),await pauseBot(undefined,_0x2c9d1b,_0x3d4567);else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0xf7))||_0x3d4567['toString']()['includes'](_0x4e36df(0x1a2)))_0x2c9d1b=_0x25a219+_0x4e36df(0x169),await pauseBot(undefined,_0x2c9d1b,_0x3d4567['toString']());else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)]('RequestTimeout'))_0x2c9d1b=_0x25a219+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x2c9d1b,_0x3d4567[_0x4e36df(0x159)]());else{if(_0x3d4567['toString']()[_0x4e36df(0x206)](_0x4e36df(0xe6)))_0x2c9d1b=_0x25a219+_0x4e36df(0x288),await pauseBot(undefined,_0x2c9d1b,_0x3d4567[_0x4e36df(0x159)]());else{if(_0x3d4567['toString']()['toLowerCase']()['includes'](_0x4e36df(0x1a1))||_0x3d4567[_0x4e36df(0x159)]()['toLowerCase']()[_0x4e36df(0x206)](_0x4e36df(0x1b9)))_0x2c9d1b=_0x4e36df(0x189),await pauseBot(undefined,_0x2c9d1b,_0x3d4567[_0x4e36df(0x159)]());else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0x17e)))_0x2c9d1b=_0x25a219+_0x4e36df(0x193),await pauseBot(undefined,_0x2c9d1b,_0x3d4567['toString']());else{if(_0x3d4567 instanceof ccxt[_0x4e36df(0x178)])_0x2c9d1b=_0x25a219+'\x20network\x20error:\x20'+_0x3d4567[_0x4e36df(0x159)](),logger[_0x4e36df(0x119)]('Network\x20error\x20details:',_0x3d4567),await pauseBot(undefined,_0x2c9d1b,_0x3d4567);else{if(_0x3d4567[_0x4e36df(0x159)]()['includes'](_0x4e36df(0x1cb)))logHistory(_0x4e36df(0x1f0),_0x25a219+_0x4e36df(0x24b)),logHistory('error',_0x4e36df(0x28f)),await killBot();else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0x290)))logHistory(_0x4e36df(0x1f0),_0x25a219+_0x4e36df(0x1c1)),logHistory(_0x4e36df(0x1f0),_0x4e36df(0x28f)),await killBot();else{if(_0x3d4567['toString']()[_0x4e36df(0x206)]('AuthenticationError')&&_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0xf9)))_0x2c9d1b=_0x25a219+_0x4e36df(0x141),await pauseBot(undefined,_0x2c9d1b,_0x3d4567,!![]);else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0x1ac)))config[_0x4e36df(0x1f5)]?_0x2c9d1b=_0x25a219+_0x4e36df(0x185):_0x2c9d1b=_0x25a219+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x4e36df(0x1f0),_0x2c9d1b),logHistory('error',_0x4e36df(0x28f)),await killBot();else{if(_0x3d4567[_0x4e36df(0x159)]()[_0x4e36df(0x206)](_0x4e36df(0xd9)))logHistory(_0x4e36df(0x1f0),_0x25a219+_0x4e36df(0xeb)),logHistory(_0x4e36df(0x1f0),_0x4e36df(0x28f)),await killBot();else{if(_0x3d4567[_0x4e36df(0x159)]()['includes']('InsufficientFunds'))logHistory(_0x4e36df(0x1f0),_0x4e36df(0x104)+_0x176cf7);else{if(_0x3d4567 instanceof ccxt[_0x4e36df(0x284)]){_0x2c9d1b=_0x25a219+_0x4e36df(0x14c)+_0x3d4567[_0x4e36df(0x159)](),logHistory(_0x4e36df(0x1f0),_0x2c9d1b),logger[_0x4e36df(0x119)]('Exchange\x20error\x20details:',_0x3d4567);if(_0x176cf7)logger['debug'](_0x4e36df(0x161)+_0x176cf7);await pauseBot(undefined,_0x2c9d1b,_0x3d4567);}else{_0x2c9d1b=_0x4e36df(0x181)+_0x3d4567[_0x4e36df(0x159)](),logHistory(_0x4e36df(0x1f0),_0x2c9d1b),logger[_0x4e36df(0x119)](_0x2c9d1b+_0x4e36df(0x1c0),_0x3d4567);if(_0x176cf7)logger['debug'](_0x4e36df(0x161)+_0x176cf7);await pauseBot(undefined,_0x2c9d1b);}}}}}}}}}}}}}}}}function decryptRSA(_0x3fc7ca,_0x15efb7){const _0x1a8d15=_0x479c03,_0xcc47dd=forge[_0x1a8d15(0x196)][_0x1a8d15(0x194)](_0x3fc7ca),_0xbbded6=_0xcc47dd[_0x1a8d15(0x154)](forge[_0x1a8d15(0x14b)]['decode64'](_0x15efb7),_0x1a8d15(0x140),{'md':forge['md'][_0x1a8d15(0x1f1)]['create'](),'mgf1':{'md':forge['md']['sha256']['create']()}});return _0xbbded6;}async function withRetry(_0x6e7b1d,_0x239eca){const _0x7fcdce=_0x479c03;let _0x9cdbe7=![],_0x312b10=0x0,_0x2369d7,_0x19aaa7;while(_0x312b10<maxRetries){try{_0x2369d7=await _0x239eca();break;}catch(_0x5b86ea){_0x19aaa7=_0x5b86ea,!_0x9cdbe7?(_0x9cdbe7=!![],logger[_0x7fcdce(0x119)](_0x7fcdce(0x118)+_0x6e7b1d+':',_0x5b86ea[_0x7fcdce(0x159)]())):await sleep(retryInterval);}_0x312b10++;}if(_0x312b10==0x0)return _0x2369d7;if(_0x312b10>=maxRetries)throw _0x19aaa7;else return logger['debug']('RETRY\x20-\x20Problem\x20resolved\x20after\x20'+_0x312b10+_0x7fcdce(0x248)),_0x2369d7;}function formatResult(_0x437f6a,_0x4c99de){const _0x3db4e2=_0x479c03;return parseFloat(_0x437f6a[_0x3db4e2(0x28c)](_0x4c99de));}function formatResultTruncate(_0x424426,_0x5b268e){const _0x3a61a9=_0x479c03;let _0x98647a=formatResultString(_0x424426,0xa),_0x417317=_0x98647a[_0x3a61a9(0x229)]('.');return _0x417317!=-0x1&&(_0x98647a=_0x98647a[_0x3a61a9(0xf4)](0x0,_0x417317+_0x5b268e+0x1)),Number(_0x98647a);}function formatResultString(_0xd80154,_0x5c7c0e){const _0x3e7e9b=_0x479c03;let _0x5ba2af;if(!(''+_0xd80154)['includes']('e'))_0x5ba2af=+(Math[_0x3e7e9b(0x16b)](_0xd80154+'e+'+_0x5c7c0e)+'e-'+_0x5c7c0e);else{let _0x4c9903=(''+_0xd80154)[_0x3e7e9b(0x27d)]('e'),_0x451723='';+_0x4c9903[0x1]+_0x5c7c0e>0x0&&(_0x451723='+'),_0x5ba2af=+(Math[_0x3e7e9b(0x16b)](+_0x4c9903[0x0]+'e'+_0x451723+(+_0x4c9903[0x1]+_0x5c7c0e))+'e-'+_0x5c7c0e);}return Number(_0x5ba2af)[_0x3e7e9b(0x28c)](_0x5c7c0e);}function getServerTime(){const _0x5a2ff0=_0x479c03,_0x3dda99=new Date();return _0x3dda99['getFullYear']()+'/'+(_0x3dda99['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x3dda99[_0x5a2ff0(0xfd)]()[_0x5a2ff0(0x159)]()[_0x5a2ff0(0x255)](0x2,'0')+'\x20'+_0x3dda99[_0x5a2ff0(0x22d)]()['toString']()[_0x5a2ff0(0x255)](0x2,'0')+':'+_0x3dda99[_0x5a2ff0(0x200)]()[_0x5a2ff0(0x159)]()['padStart'](0x2,'0')+':'+_0x3dda99[_0x5a2ff0(0x204)]()[_0x5a2ff0(0x159)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x465c58=_0x479c03,_0x350701=shiftedTime();return _0x350701[_0x465c58(0x1b4)]()+'/'+(_0x350701[_0x465c58(0x1df)]()+0x1)[_0x465c58(0x159)]()[_0x465c58(0x255)](0x2,'0')+'/'+_0x350701[_0x465c58(0xfd)]()[_0x465c58(0x159)]()['padStart'](0x2,'0')+'\x20'+_0x350701[_0x465c58(0x22d)]()[_0x465c58(0x159)]()[_0x465c58(0x255)](0x2,'0')+':'+_0x350701[_0x465c58(0x200)]()[_0x465c58(0x159)]()[_0x465c58(0x255)](0x2,'0')+':'+_0x350701[_0x465c58(0x204)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x1e21b6=_0x479c03,_0x198220=shiftedTime();return _0x198220[_0x1e21b6(0x1b4)]()+'/'+(_0x198220['getMonth']()+0x1)['toString']()[_0x1e21b6(0x255)](0x2,'0')+'/'+_0x198220[_0x1e21b6(0xfd)]()[_0x1e21b6(0x159)]()[_0x1e21b6(0x255)](0x2,'0');}function getHour(){const _0x6142ba=_0x479c03,_0x442b35=shiftedTime();return _0x442b35[_0x6142ba(0x22d)]()[_0x6142ba(0x159)]()['padStart'](0x2,'0');}function sleep(_0x108f0d){return new Promise(_0xc1485d=>setTimeout(_0xc1485d,_0x108f0d));}function shiftedTime(){const _0x251e3b=_0x479c03,_0x30f6c7=new Date();let _0x1641ec=_0x30f6c7;if(config&&config[_0x251e3b(0x1fa)]!==0x0)_0x1641ec=fns['add'](_0x30f6c7,{'hours':config['timeshift']});return _0x1641ec;}function timer(_0x32a395){const _0x55bb7d=_0x479c03,_0x3facb3=new Date();!lasttime?console['log'](getTimeStamp()+_0x55bb7d(0xee),_0x32a395,_0x3facb3):console[_0x55bb7d(0x176)](getTimeStamp()+':\x20timer\x20>',_0x32a395,(_0x3facb3-lasttime)/0x3e8),lasttime=_0x3facb3;}