const _0x6b8927=_0x345f;(function(_0x4fb7a6,_0x30f89f){const _0x2bfebf=_0x345f,_0x163c4d=_0x4fb7a6();while(!![]){try{const _0x155276=parseInt(_0x2bfebf(0xf3))/0x1+-parseInt(_0x2bfebf(0xff))/0x2+parseInt(_0x2bfebf(0x111))/0x3*(parseInt(_0x2bfebf(0xec))/0x4)+-parseInt(_0x2bfebf(0x240))/0x5*(-parseInt(_0x2bfebf(0x16e))/0x6)+parseInt(_0x2bfebf(0x248))/0x7+parseInt(_0x2bfebf(0x259))/0x8*(-parseInt(_0x2bfebf(0x241))/0x9)+-parseInt(_0x2bfebf(0x235))/0xa;if(_0x155276===_0x30f89f)break;else _0x163c4d['push'](_0x163c4d['shift']());}catch(_0x2b413c){_0x163c4d['push'](_0x163c4d['shift']());}}}(_0x4711,0xc10cc));const _0x4e0283=function(){let _0x396de3=!![];return function(_0x2d3cfc,_0x34dd65){const _0x4863d9=_0x396de3?function(){const _0x15755e=_0x345f;if(_0x34dd65){const _0x710c92=_0x34dd65[_0x15755e(0x10e)](_0x2d3cfc,arguments);return _0x34dd65=null,_0x710c92;}}:function(){};return _0x396de3=![],_0x4863d9;};}(),_0x400898=_0x4e0283(this,function(){const _0x26d737=_0x345f;return _0x400898[_0x26d737(0x20a)]()[_0x26d737(0x15c)](_0x26d737(0x23f))[_0x26d737(0x20a)]()[_0x26d737(0xd1)](_0x400898)[_0x26d737(0x15c)](_0x26d737(0x23f));});_0x400898();'use strict';const ccxt=require(_0x6b8927(0x150)),low=require(_0x6b8927(0x1d5)),FileSync=require(_0x6b8927(0x216)),fs=require('fs'),fns=require(_0x6b8927(0x239)),Crypt=require(_0x6b8927(0xe9))[_0x6b8927(0x1b3)],util=require(_0x6b8927(0x17e)),argv=require(_0x6b8927(0x250))(process['argv'][_0x6b8927(0x256)](0x2))[_0x6b8927(0x13a)],path=require(_0x6b8927(0x1d1));let exchange;global[_0x6b8927(0x10c)]={},global[_0x6b8927(0x1f1)]={};const usdBasecoins=[_0x6b8927(0x1af),_0x6b8927(0x199),_0x6b8927(0x177),_0x6b8927(0x134),_0x6b8927(0xef),_0x6b8927(0xe7)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x6b8927(0x1c0)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x6b8927(0x11c))[_0x6b8927(0x25a)],botID=process[_0x6b8927(0x13a)][0x2]||_0x6b8927(0xfb),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x6b8927(0x18c)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x6b8927(0x191),logspath=userID?'./logs/'+userID+'/':_0x6b8927(0x249),loggerfile=fs[_0x6b8927(0x113)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x6b8927(0x1d8)](configpath)&&fs[_0x6b8927(0x21e)](configpath);!fs[_0x6b8927(0x1d8)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x6b8927(0x188)+botID+_0x6b8927(0x25e),logfile=configpath+_0x6b8927(0x188)+botID+'-events.json',performancefile=configpath+_0x6b8927(0x188)+botID+_0x6b8927(0xed),coinresultsfile=configpath+_0x6b8927(0x188)+botID+_0x6b8927(0x1f2),settingsfile=configpath+_0x6b8927(0x1fa),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x6b8927(0x166)]({'data':[],'version':serverversion})[_0x6b8927(0x114)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x6b8927(0x114)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x6b8927(0x166)]({'coins':[],'version':serverversion})[_0x6b8927(0x114)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x6b8927(0x200),'rsaStandard':_0x6b8927(0x1ae)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x161131=>{const _0x6f8141=_0x6b8927;console[_0x6f8141(0x148)](_0x161131);},'simple':_0x3dab6e=>{const _0x2523e3=_0x6b8927;console[_0x2523e3(0x148)](_0x3dab6e),loggerfile[_0x2523e3(0x114)](util[_0x2523e3(0x1eb)](_0x3dab6e)+'\x0a');},'full':async(_0x14b7a1,_0x389c05='')=>{const _0x32f083=_0x6b8927;let _0x3a8ca9;if(config[_0x32f083(0x237)])_0x3a8ca9=getTimeStamp()+':\x20'+config[_0x32f083(0x100)]+_0x32f083(0x196)+_0x14b7a1;else _0x3a8ca9=getTimeStamp()+':\x20Bot\x20'+botID+_0x32f083(0x196)+_0x14b7a1;console['log'](_0x3a8ca9),loggerfile[_0x32f083(0x114)](util['format'](_0x3a8ca9)+'\x0a'),_0x389c05&&(console[_0x32f083(0x148)](_0x389c05),loggerfile[_0x32f083(0x114)](util[_0x32f083(0x1eb)](_0x389c05)+'\x0a'));},'debug':async(_0x15cd85,_0x29772a='')=>{const _0x11a919=_0x6b8927;let _0x24cf8c;if(config['showname'])_0x24cf8c=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x15cd85;else _0x24cf8c=getTimeStamp()+_0x11a919(0x157)+botID+_0x11a919(0x267)+_0x15cd85;if(debugging)console[_0x11a919(0x148)](_0x24cf8c);loggerfile[_0x11a919(0x114)](util[_0x11a919(0x1eb)](_0x24cf8c)+'\x0a');if(_0x29772a){if(debugging)console[_0x11a919(0x148)](_0x29772a);loggerfile[_0x11a919(0x114)](util[_0x11a919(0x1eb)](_0x29772a)+'\x0a');}}};process['on']('uncaughtException',function(_0x1ac4c0){const _0x22501b=_0x6b8927;handleError(_0x1ac4c0,_0x22501b(0x25b));});settings[_0x6b8927(0x1d7)]!=config[_0x6b8927(0x1d7)]&&updateTimeshift(settings[_0x6b8927(0x1d7)]);settings[_0x6b8927(0x1bd)]!=config[_0x6b8927(0x1bd)]&&updateOnepagemode(settings[_0x6b8927(0x1bd)]);process['send']({'started':_0x6b8927(0x1e6)},_0x3782eb=>{}),initializeProcessListeners();function proxyEmit(_0x538afa,_0x565740=null){process['send']({'function':_0x538afa,'args':_0x565740},_0x706bee=>{});}function initializeProcessListeners(){const _0x298eb2=_0x6b8927;process['on'](_0x298eb2(0x1f7),_0x100066=>{const _0x2be2bb=_0x298eb2;switch(Object[_0x2be2bb(0x1ee)](_0x100066)[0x0]){case'timeshift':_0x100066[_0x2be2bb(0x1d7)]!=undefined&&(settings[_0x2be2bb(0x1d7)]=_0x100066[_0x2be2bb(0x1d7)],updateTimeshift(settings['timeshift']));break;case _0x2be2bb(0x1bd):_0x100066[_0x2be2bb(0x1bd)]!=undefined&&(settings[_0x2be2bb(0x1bd)]=_0x100066[_0x2be2bb(0x1bd)],updateOnepagemode(settings[_0x2be2bb(0x1bd)]));break;case _0x2be2bb(0x19a):_0x100066[_0x2be2bb(0x19a)]!=undefined&&(bots=JSON[_0x2be2bb(0x127)](_0x100066[_0x2be2bb(0x19a)]),proxyEmit('bots',bots));break;case _0x2be2bb(0x232):switch(_0x100066['function']){case _0x2be2bb(0xdd):initclient();break;case _0x2be2bb(0x152):toggleBotMode();break;case _0x2be2bb(0xfc):emitHistory(_0x100066[_0x2be2bb(0x1be)]);break;case _0x2be2bb(0x23a):deleteHistoryAlerts(_0x100066[_0x2be2bb(0x1be)]);break;case'getPortfolio':getPortfolio(_0x100066[_0x2be2bb(0x1be)]);break;case'storeConfiguration':storeConfiguration(_0x100066[_0x2be2bb(0x1be)]);break;case _0x2be2bb(0x1c2):storeHeadless(_0x100066[_0x2be2bb(0x1be)]);break;case _0x2be2bb(0xf4):storeFiat(_0x100066['args']);break;case _0x2be2bb(0x20c):resetHistory();break;case _0x2be2bb(0x244):getStartingBalances(getNormalizedPerformance());break;case _0x2be2bb(0x1c4):placeOrder(_0x100066['args']);break;case _0x2be2bb(0x203):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x2be2bb(0x1ca):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2ee108=![]){const _0x450d8b=_0x6b8927;logger['debug'](_0x450d8b(0x1b0)+(_0x2ee108?'exchange\x20reloaded':_0x450d8b(0x224))+_0x450d8b(0xe1)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x2ee108)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x450d8b(0x184)]!=_0x450d8b(0x107)){loadingProgress=0x0;if(_0x2ee108){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x10a3e4){handleErrorNoStop(_0x10a3e4,_0x450d8b(0x130));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xdd3e6f=await getCoins();[currentCoins,currentCoinsAll]=_0xdd3e6f,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x450d8b(0x245)](_0x450d8b(0x1df)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x450d8b(0x1a4)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2428fa=_0x6b8927;exchangeStopped=!![];try{await exchange[_0x2428fa(0x1ce)]();}catch(_0x182ea1){await handleError(_0x182ea1,'stopExchange()');}}async function reloadExchange(){const _0x543aca=_0x6b8927;while(lockOrders!=ORDERS[_0x543aca(0x1c0)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x543aca(0x245)](_0x543aca(0x204)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x2b68e3=config[_0x6b8927(0x146)],_0x3f2d2f=config['apiKey'],_0x226f76=config[_0x6b8927(0xeb)],_0x3bccf7=config['apiPassword']){const _0x54f598=_0x6b8927;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x2b68e3)&&(logHistory(_0x54f598(0xde),_0x54f598(0x17d)+_0x2b68e3+_0x54f598(0x1ac)),killBot());const _0x251db6=ccxt[_0x54f598(0x252)][_0x2b68e3[_0x54f598(0xd8)]()];exchange=new _0x251db6({'apiKey':_0x3f2d2f,'secret':_0x226f76,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3bccf7)exchange[_0x54f598(0x1b5)]=_0x3bccf7;}function setStableCoins(){const _0x11013d=_0x6b8927;let _0x2b3f21=config['basecoin']==_0x11013d(0x218)?_0x11013d(0x218):config[_0x11013d(0x1d0)]==_0x11013d(0x1e9)?_0x11013d(0x1e9):_0x11013d(0x22a),_0x502ff3=!allSymbols[_0x11013d(0x132)](_0x2b3f21+'/USD')?_0x11013d(0x134):'USD',_0x58abb5=!allSymbols[_0x11013d(0x132)](_0x2b3f21+_0x11013d(0xe0))?_0x502ff3:_0x11013d(0x213);stablecoins={'eur':{'coin':''+_0x2b3f21+_0x58abb5,'symbol':_0x2b3f21+'/'+_0x58abb5},'usd':{'coin':''+_0x2b3f21+_0x502ff3,'symbol':_0x2b3f21+'/'+_0x502ff3}};}async function initwsCcxt(){const _0x2bfe90=_0x6b8927;initCycle++;const _0xc32165=initCycle;let _0x58ac5a=[];config['portfolio'][_0x2bfe90(0x21b)](_0x45fc4f=>{const _0x50d09e=_0x2bfe90;if(!_0x45fc4f['excluded']&&_0x45fc4f[_0x50d09e(0x1ef)]!=config[_0x50d09e(0x1d0)])_0x58ac5a['push'](_0x45fc4f[_0x50d09e(0xee)]);});if(!_0x58ac5a[_0x2bfe90(0x132)](stablecoins[_0x2bfe90(0x190)][_0x2bfe90(0xee)]))_0x58ac5a[_0x2bfe90(0x1dd)](stablecoins['eur'][_0x2bfe90(0xee)]);if(!_0x58ac5a[_0x2bfe90(0x132)](stablecoins[_0x2bfe90(0xf5)][_0x2bfe90(0xee)]))_0x58ac5a[_0x2bfe90(0x1dd)](stablecoins[_0x2bfe90(0xf5)][_0x2bfe90(0xee)]);if(config[_0x2bfe90(0x146)]['startsWith']('Binance')&&config[_0x2bfe90(0x1d0)]!=_0x2bfe90(0x1e9)){if(!_0x58ac5a[_0x2bfe90(0x132)]('BNB/'+config['basecoin']))_0x58ac5a[_0x2bfe90(0x1dd)]('BNB/'+config[_0x2bfe90(0x1d0)]);}loadCoins(_0x58ac5a),_0x58ac5a=validateSymbols(_0x58ac5a);const _0x108949=async _0x591807=>{const _0x1a3c13=_0x2bfe90;let _0x446c64;try{const _0xca7c50=await getTickers(_0x591807);Object['entries'](_0xca7c50)['forEach'](_0x12cca8=>{const _0x53baf8=_0x345f;_0x446c64=_0x12cca8[0x1][_0x53baf8(0xee)],global[_0x53baf8(0x10c)][noslash(_0x446c64)]=_0x12cca8[0x1][_0x53baf8(0x1c3)],global[_0x53baf8(0x1f1)][_0x446c64]=_0x12cca8[0x1]['percentage'];});}catch(_0x5af8aa){await handleError(_0x5af8aa,_0x1a3c13(0x1a2),_0x446c64);}},_0x5af5c9=async _0x3132a6=>{const _0x5d4662=_0x2bfe90;while(initCycle==_0xc32165){if(!botPaused)try{const _0x479add=await exchange[_0x5d4662(0x209)](_0x3132a6);global[_0x5d4662(0x10c)][noslash(_0x479add[0x0][_0x5d4662(0xee)])]=_0x479add[0x0][_0x5d4662(0x197)],await sleep(0x3e8);}catch(_0x21a310){if(!exchangeStopped)await handleError(_0x21a310,_0x5d4662(0x109),_0x3132a6);}else await sleep(0x64);}},_0x4a0175=async _0x254091=>{const _0x32f134=_0x2bfe90;while(initCycle==_0xc32165){if(!botPaused){let _0x3fa9aa;try{await sleep(0x3c*0x3e8);const _0x3d74b5=await getTickers(_0x254091);Object['entries'](_0x3d74b5)[_0x32f134(0x21b)](_0x44d02e=>{_0x3fa9aa=_0x44d02e[0x1]['symbol'],global['change'][_0x3fa9aa]=_0x44d02e[0x1]['percentage'];});}catch(_0x32599a){if(!exchangeStopped)await handleError(_0x32599a,_0x32f134(0x192),_0x3fa9aa);}}else await sleep(0x64);}},_0xf4371a=async _0x449a41=>{const _0x11be2b=_0x2bfe90;while(initCycle==_0xc32165){if(!botPaused)try{const _0x201fe9=await exchange['watchOrders'](_0x449a41);initCycle==_0xc32165&&_0x201fe9[_0x11be2b(0x21b)](_0x10e766=>{updateNumberCoinsCcxt(_0x10e766);});}catch(_0x213ec6){if(!exchangeStopped)await handleError(_0x213ec6,_0x11be2b(0x1b1));}else await sleep(0x64);}};_0x108949(_0x58ac5a),_0x4a0175(_0x58ac5a),_0x58ac5a[_0x2bfe90(0x21b)](_0x3a1c8b=>{_0x5af5c9(_0x3a1c8b),_0xf4371a(_0x3a1c8b);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5976c0){const _0x1b1ca0=_0x6b8927;let _0x904fbf={};try{if(config[_0x1b1ca0(0x146)]!='Cryptocom')_0x904fbf=await exchange[_0x1b1ca0(0x12c)](_0x5976c0);else for(const _0x332390 of _0x5976c0){const _0x2de595=await exchange[_0x1b1ca0(0x242)](_0x332390);_0x904fbf[_0x332390]=_0x2de595;}return _0x904fbf;}catch(_0x513d70){throw _0x513d70;}}async function watchTransactions(){const _0x52c189=_0x6b8927;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x103090=await getCoins(),[_0x3cdd7e,_0x5dc20f]=_0x103090;let _0x42049f=[];currentCoins[_0x52c189(0x21b)](_0x59379a=>{const _0x517864=_0x52c189,_0x19fe02=_0x3cdd7e[_0x517864(0x162)](_0x555652=>_0x555652[_0x517864(0x1ef)]==_0x59379a[_0x517864(0x1ef)]);if(_0x19fe02){if(_0x59379a[_0x517864(0x1ff)]!=_0x19fe02[_0x517864(0x1ff)]){let _0x9c8cff;if(_0x59379a[_0x517864(0x1ef)]!=config[_0x517864(0x1d0)]){const _0x28684b=global['ticker'][noslash(_0x59379a[_0x517864(0xee)])];_0x9c8cff=_0x59379a[_0x517864(0x121)]?0x1/_0x28684b:_0x28684b;}else _0x9c8cff=0x1;_0x42049f[_0x517864(0x1dd)]({'coin':_0x59379a[_0x517864(0x1ef)],'symbol':_0x59379a['symbol'],'price':_0x9c8cff,'number':Number(formatResult(_0x19fe02[_0x517864(0x1ff)]-_0x59379a['number'],0x8)),'basecoinvalue':_0x9c8cff*(_0x19fe02[_0x517864(0x1ff)]-_0x59379a[_0x517864(0x1ff)])});}}});if(_0x42049f[_0x52c189(0x1a4)]==0x1&&!blockTransactionDetection){if(config[_0x52c189(0x156)]){logger[_0x52c189(0x245)](_0x52c189(0x176)+_0x42049f[0x0]['basecoinvalue']+_0x52c189(0x15a)+lastFees[_0x52c189(0x1b7)]);if(lastFees[_0x52c189(0x1b7)]==0x0||Math['abs'](_0x42049f[0x0][_0x52c189(0x221)])>lastFees[_0x52c189(0x1b7)]){delete _0x42049f[0x0][_0x52c189(0xee)],delete _0x42049f[0x0][_0x52c189(0x221)];let _0x7a7644=[],_0x127f72=[...config['liquidity']]||[],_0x222dfe=config[_0x52c189(0xe6)];_0x127f72['sort']((_0x283059,_0x1360f5)=>_0x283059[_0x52c189(0x258)]>_0x1360f5[_0x52c189(0x258)]?-0x1:_0x1360f5[_0x52c189(0x258)]>_0x283059[_0x52c189(0x258)]?0x1:0x0);const _0x16f9e6=getDate();if(_0x127f72[0x0]){const _0x3f1367=fns['parse'](_0x127f72[0x0][_0x52c189(0x258)],'yyyy/MM/dd',new Date()),_0x26366a=fns[_0x52c189(0x127)](_0x16f9e6,_0x52c189(0x118),new Date());if(fns[_0x52c189(0xd3)](_0x3f1367,_0x26366a)){_0x7a7644=_0x127f72[0x0][_0x52c189(0xe8)];const _0x5e3817=_0x7a7644[_0x52c189(0x162)](_0x117a6c=>_0x117a6c[_0x52c189(0x1ef)]==_0x42049f[0x0][_0x52c189(0x1ef)]);_0x5e3817?(_0x5e3817['number']+=_0x42049f[0x0]['number'],_0x5e3817['number']==0x0&&(_0x7a7644=_0x7a7644[_0x52c189(0x20d)](_0x53f97e=>{const _0x2eb181=_0x52c189;return _0x53f97e[_0x2eb181(0x1ef)]!=_0x42049f[0x0][_0x2eb181(0x1ef)];}))):_0x7a7644['push'](_0x42049f[0x0]);const _0x196c33=_0x222dfe['find'](_0x4a5b8b=>_0x4a5b8b[_0x52c189(0x258)]==_0x16f9e6);_0x196c33[_0x52c189(0xe8)]=_0x7a7644;}else _0x222dfe['push']({'date':_0x16f9e6,'changes':[_0x42049f[0x0]]});}const _0x2de2fe=_0x222dfe[_0x52c189(0x162)](_0x2e2995=>_0x2e2995[_0x52c189(0x258)]==_0x16f9e6);if(_0x2de2fe){let _0x2b08ba=!![];_0x2de2fe[_0x52c189(0xe8)][_0x52c189(0x21b)](_0xe4b963=>{const _0x411234=_0x52c189;if(_0xe4b963[_0x411234(0x1ff)]!=0x0)_0x2b08ba=![];}),_0x2b08ba&&(_0x222dfe=_0x222dfe[_0x52c189(0x20d)](_0x5bc0b9=>{const _0x398e4b=_0x52c189;return _0x5bc0b9[_0x398e4b(0x258)]!=_0x16f9e6;}));}let _0x2cdfc2=dbConfig[_0x52c189(0x1ec)](_0x52c189(0x168))[_0x52c189(0x162)]({'botID':botID})[_0x52c189(0xdc)]();_0x2cdfc2&&(dbConfig[_0x52c189(0x1ec)](_0x52c189(0x168))['find']({'botID':botID})[_0x52c189(0x189)]({'liquidity':_0x222dfe})[_0x52c189(0x114)](),config[_0x52c189(0xe6)]=_0x222dfe),logHistory(_0x52c189(0xfa),_0x52c189(0x254)+Math[_0x52c189(0x180)](_0x42049f[0x0][_0x52c189(0x1ff)])+'\x20'+_0x42049f[0x0][_0x52c189(0x1ef)]+'\x20'+(_0x42049f[0x0]['number']>0x0?_0x52c189(0x153):_0x52c189(0x1ed))+_0x52c189(0x101)),proxyEmit(_0x52c189(0x161),emittedConfiguration());}else logger[_0x52c189(0x245)](_0x52c189(0xf0)+Math[_0x52c189(0x180)](_0x42049f[0x0][_0x52c189(0x1ff)])+'\x20'+_0x42049f[0x0][_0x52c189(0x1ef)]+'\x20'+(_0x42049f[0x0][_0x52c189(0x1ff)]>0x0?_0x52c189(0x153):_0x52c189(0x1ed)));transactionDetected=!![];}else logger[_0x52c189(0x245)](_0x52c189(0x254)+Math[_0x52c189(0x180)](_0x42049f[0x0][_0x52c189(0x1ff)])+'\x20'+_0x42049f[0x0]['coin']+'\x20'+(_0x42049f[0x0][_0x52c189(0x1ff)]>0x0?_0x52c189(0x153):'removed')+_0x52c189(0x1a8));}currentCoins=_0x3cdd7e,currentCoinsAll=_0x5dc20f,await sleep(watchTransactionsInterval);}catch(_0x4a5d54){if(!exchangeStopped)await handleError(_0x4a5d54,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x5dc12e=_0x6b8927;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x5dc12e(0x23b)](markets)[_0x5dc12e(0x21b)](_0xe7eca8=>{const _0x394c64=_0x5dc12e;_0xe7eca8[0x1][_0x394c64(0xda)]&&_0xe7eca8[0x1]['spot']&&allSymbols[_0x394c64(0x1dd)](_0xe7eca8[0x0]);});}catch(_0x45cea9){throw _0x45cea9;}}function validateSymbols(_0x3cf46f){const _0x4cff1d=_0x6b8927;let _0xbc55c9=[];return _0x3cf46f[_0x4cff1d(0x21b)](_0x410225=>{const _0x22da15=_0x4cff1d;!allSymbols[_0x22da15(0x132)](_0x410225)?logHistory(_0x22da15(0xde),_0x22da15(0x22b)+_0x410225+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0xbc55c9[_0x22da15(0x1dd)](_0x410225);}),_0xbc55c9;}async function initclient(){const _0x5adb59=_0x6b8927;proxyEmit(_0x5adb59(0x161),emittedConfiguration()),proxyEmit(_0x5adb59(0x155),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5adb59(0x126),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x275f5a=getNormalizedPerformance();emitPerformance(_0x275f5a),getStartingBalances(_0x275f5a);}async function toggleBotMode(){const _0x269fab=_0x6b8927;let _0x553784=dbConfig[_0x269fab(0x1ec)]('bot')[_0x269fab(0x162)]({'botID':botID})[_0x269fab(0xdc)]();if(_0x553784){const _0x2cb014=!_0x553784[_0x269fab(0x260)];dbConfig[_0x269fab(0x1ec)]('bot')['find']({'botID':botID})[_0x269fab(0x189)]({'headless':_0x2cb014})[_0x269fab(0x114)](),config[_0x269fab(0x260)]=_0x2cb014,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4bc05b=_0x6b8927;process[_0x4bc05b(0xfd)]({'updatebotmanager':!![]},_0x53ff76=>{}),logger['debug'](_0x4bc05b(0x17f)+config[_0x4bc05b(0x260)]);}async function loadCoins(_0x435805){const _0x1f5ec5=_0x6b8927;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x108223,_0x456d78=0x0,_0x34f3cd=0x0;_0x435805['forEach'](_0x6da752=>{const _0x318053=_0x345f;loading[_0x318053(0x17a)][_0x318053(0x1dd)](_0x6da752);}),loadingCanceled=![];let _0x122ac0=![];while(_0x108223!=_0x435805[_0x1f5ec5(0x1a4)]+maxLoadingProgress){_0x108223=loadingProgress,_0x435805[_0x1f5ec5(0x21b)](_0x29ce8b=>{const _0x6ef266=_0x1f5ec5;if(global[_0x6ef266(0x10c)][noslash(_0x29ce8b)]){loading[_0x6ef266(0x17a)]=loading[_0x6ef266(0x17a)]['filter'](_0x5bf868=>_0x5bf868!=_0x29ce8b);if(!watchedSymbols['includes'](_0x29ce8b))watchedSymbols['push'](_0x29ce8b);_0x108223++;}}),loading['progress']=Math[_0x1f5ec5(0x1ba)](_0x108223/(_0x435805[_0x1f5ec5(0x1a4)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x34f3cd>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x34f3cd>0x78*0x5&&!_0x122ac0&&(_0x122ac0=!![],logHistory(_0x1f5ec5(0xde),_0x1f5ec5(0x11f)+loading[_0x1f5ec5(0x17a)]['join'](',\x20')+_0x1f5ec5(0x1a0)),logHistory(_0x1f5ec5(0xde),_0x1f5ec5(0x264)+loadCoinsRetryInterval/0xea60+_0x1f5ec5(0x1a5)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x12ee06=_0x1f5ec5;process[_0x12ee06(0xfd)]({'stop':_0x12ee06(0x10f)},_0x39e22d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x456d78!=loading[_0x1f5ec5(0x1ea)]&&(_0x456d78=loading[_0x1f5ec5(0x1ea)],emitLoadingProgress()),_0x34f3cd++,await sleep(0xc8);}_0x108223==_0x435805['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1f5ec5(0xfd)]({'status':'enabled','live':_0x1f5ec5(0x1e6)},_0x3405ea=>{}),_0x122ac0&&logHistory('success',_0x1f5ec5(0x143)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3418e9=_0x6b8927;proxyEmit(_0x3418e9(0x161),{...emittedConfiguration(),'configstate':_0x3418e9(0x1c8)});}function emitLoadingProgress(){const _0x43360a=_0x6b8927;proxyEmit(_0x43360a(0xdf),loading);}async function getFiat(){const _0x1b58f0=_0x6b8927;let _0x19f2e8=global[_0x1b58f0(0x10c)][stablecoins[_0x1b58f0(0x190)][_0x1b58f0(0x1ef)]],_0x5cd507=global['ticker'][stablecoins[_0x1b58f0(0xf5)]['coin']];return{'eur':Number(_0x19f2e8),'usd':Number(_0x5cd507)};}function capitalize(_0x353172){const _0x2bcb28=_0x6b8927;return _0x353172[_0x2bcb28(0xf2)](0x0,0x1)[_0x2bcb28(0xd2)]()+_0x353172['substring'](0x1);}function supportedExchanges(){const _0x335192=_0x6b8927,_0x2ad9f0=['ws','fetchTickers',_0x335192(0x242),'watchTrades',_0x335192(0x23d),_0x335192(0x104),_0x335192(0x15f),_0x335192(0x269),'fetchClosedOrders',_0x335192(0x105)];let _0x1f780a=[],_0x133622=[],_0x48dbc1=ccxt[_0x335192(0x252)][_0x335192(0x155)];_0x48dbc1[_0x335192(0x21b)](_0x44ee04=>{try{const _0x1912a8=new ccxt['pro'][_0x44ee04]();_0x133622['push'](_0x1912a8);}catch(_0x26405){}}),_0x133622['forEach'](_0x24441d=>{const _0x451bc4=_0x335192;let _0x423870=0x0;_0x2ad9f0['forEach'](_0x54ff28=>{const _0x52b4d1=_0x345f;_0x54ff28 in _0x24441d[_0x52b4d1(0x160)]&&_0x24441d['has'][_0x54ff28]&&_0x423870++;}),_0x423870==_0x2ad9f0[_0x451bc4(0x1a4)]&&_0x1f780a[_0x451bc4(0x1dd)](capitalize(_0x24441d['id']));});let _0x4651e9=[];return _0x48dbc1[_0x335192(0x21b)](_0x45691f=>{const _0x5a2381=_0x335192;_0x45691f=capitalize(_0x45691f);if(!_0x1f780a[_0x5a2381(0x132)](_0x45691f))_0x4651e9[_0x5a2381(0x1dd)](_0x45691f);}),_0x1f780a;}function setStartDatePerformance(){const _0x2deb85=_0x6b8927;if(config&&config[_0x2deb85(0xe6)][0x0][_0x2deb85(0xe8)][_0x2deb85(0x1a4)]!=0x0){const _0x35c9f4=config[_0x2deb85(0xe6)][0x0][_0x2deb85(0xe8)];dbPerformance[_0x2deb85(0x1ec)](_0x2deb85(0xf7))[_0x2deb85(0x162)]({'date':config['startdate']})['assign']({'coins':_0x35c9f4})['write']();}}async function recreateCoinResults(){const _0x33bfe2=_0x6b8927;let _0x34ca23,_0x1d25b5=[];try{const _0x1c5da5=fns[_0x33bfe2(0x1eb)](fns[_0x33bfe2(0x140)](config['startdate'][_0x33bfe2(0x26b)](/\//g,'-')),_0x33bfe2(0x20e));for(const _0x3882f7 of currentCoins){if(_0x3882f7[_0x33bfe2(0x1ef)]!=config[_0x33bfe2(0x1d0)]){let _0x19260d=0x0,_0x439114,_0x444b5e;_0x34ca23=await getAllEventOrders(_0x3882f7[_0x33bfe2(0xee)]);if(_0x34ca23[_0x33bfe2(0x1a4)]>0x0)_0x34ca23[_0x33bfe2(0x21b)](_0x3b8112=>{const _0x45c5fc=_0x33bfe2,_0x2a3a42=_0x3882f7[_0x45c5fc(0xee)][_0x45c5fc(0x132)](config[_0x45c5fc(0x1d0)]+'/');_0x1d25b5['push']({'datetime':_0x3b8112[_0x45c5fc(0x22d)],'coin':_0x3882f7[_0x45c5fc(0x1ef)],'symbol':_0x3882f7[_0x45c5fc(0xee)],'side':_0x3b8112[_0x45c5fc(0x165)],'reverse':_0x2a3a42,'amount':formatResult(_0x3b8112[_0x45c5fc(0x173)],0x8),'filled':formatResult(_0x3b8112[_0x45c5fc(0x173)],0x8),'price':formatResult(_0x3b8112[_0x45c5fc(0x197)],0x8)}),_0x19260d=_0x3b8112[_0x45c5fc(0x165)]==_0x45c5fc(0x1bb)?_0x19260d+_0x3b8112[_0x45c5fc(0x173)]:_0x19260d-_0x3b8112[_0x45c5fc(0x173)];if(!_0x444b5e)_0x444b5e=_0x3b8112[_0x45c5fc(0x197)];});_0x439114=_0x3882f7[_0x33bfe2(0x1ff)]-_0x19260d;let _0x875faa;config[_0x33bfe2(0xe6)][_0x33bfe2(0x21b)](_0x420515=>{const _0x19fb21=_0x33bfe2;!_0x875faa&&(_0x875faa=_0x420515['changes'][_0x19fb21(0x162)](_0x38b7d0=>_0x38b7d0[_0x19fb21(0x1ef)]==_0x3882f7['coin']),_0x875faa&&(_0x439114=_0x875faa[_0x19fb21(0x1ff)],_0x444b5e=_0x875faa[_0x19fb21(0x197)]));});let _0x4c9831=dbCoinResults['get'](_0x33bfe2(0x167))[_0x33bfe2(0x162)]({'coin':_0x3882f7['coin']})[_0x33bfe2(0xdc)]();_0x4c9831={'coin':_0x3882f7['coin'],'number':_0x439114,'breakeven':_0x444b5e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x33bfe2(0x1ec)]('coins')[_0x33bfe2(0x162)]({'coin':_0x3882f7[_0x33bfe2(0x1ef)]})[_0x33bfe2(0x189)](_0x4c9831)[_0x33bfe2(0x114)]();}}_0x1d25b5[_0x33bfe2(0x193)]((_0x14f6cf,_0x358ee6)=>_0x14f6cf['datetime']>_0x358ee6[_0x33bfe2(0x22d)]?0x1:_0x358ee6[_0x33bfe2(0x22d)]>_0x14f6cf[_0x33bfe2(0x22d)]?-0x1:0x0);let _0x218b5e=0x0;for(let _0xcf5435 of _0x1d25b5){await updateCoinResults(_0xcf5435,!![]);}}catch(_0x4e3313){await handleError(_0x4e3313,_0x33bfe2(0x24a));}}async function getAllEventOrders(_0x31bc66){const _0x2537d1=_0x6b8927;let _0x35565b=[],_0x5f44d1=dbLogs[_0x2537d1(0x1ec)](_0x2537d1(0x225))[_0x2537d1(0x20d)](_0x40d401=>{const _0x1133d0=_0x2537d1,_0x49227f=_0x40d401[_0x1133d0(0x11a)][_0x1133d0(0xd8)]();return _0x49227f[_0x1133d0(0x132)](_0x31bc66[_0x1133d0(0xd8)]())&&(_0x49227f['includes']('market')&&_0x49227f['includes'](_0x1133d0(0x12f))||_0x49227f[_0x1133d0(0x132)]('filled')&&_0x49227f[_0x1133d0(0x132)](_0x1133d0(0x12f)));})[_0x2537d1(0x172)](_0x2537d1(0x16a))[_0x2537d1(0xdc)]();return _0x5f44d1[_0x2537d1(0x21b)](_0x141f4a=>{const _0x1e6b40=_0x2537d1,_0x73304a=_0x141f4a[_0x1e6b40(0x11a)]['includes'](_0x1e6b40(0x1cd))?_0x1e6b40(0x1cd):_0x1e6b40(0x1bb),_0x24f046=/#([0-9]|\.)+\s/i,_0x3c71f1=Number(_0x24f046[_0x1e6b40(0x1cf)](_0x141f4a['event'])[0x0][_0x1e6b40(0x256)](0x1)),_0x55f955=/@([0-9]|\.)+$/i,_0x1bc7b2=Number(_0x55f955['exec'](_0x141f4a[_0x1e6b40(0x11a)])[0x0][_0x1e6b40(0x256)](0x1));_0x35565b['push']({'datetime':_0x141f4a[_0x1e6b40(0x16a)],'coin':symbolToCoin(_0x31bc66),'symbol':_0x31bc66,'side':_0x73304a,'amount':_0x3c71f1,'filled':_0x3c71f1,'price':_0x1bc7b2});}),_0x35565b;}async function getAllOrders(_0x37e288,_0x36b7a6){const _0x105a11=_0x6b8927;let _0x5179ae=[];while(_0x36b7a6<exchange[_0x105a11(0x18d)]()){const _0xe545d9=0x1f4;try{const _0x15843c=await exchange[_0x105a11(0x19e)](_0x37e288,_0x36b7a6,_0xe545d9);if(_0x15843c['length'])_0x36b7a6=_0x15843c[_0x15843c[_0x105a11(0x1a4)]-0x1][_0x105a11(0x163)]+0x1,_0x5179ae=_0x5179ae[_0x105a11(0xf1)](_0x15843c);else break;}catch(_0x88e868){await handleError(_0x88e868,_0x105a11(0xd4),_0x37e288);}}return _0x5179ae;}async function validate24hChanges(){const _0x13b1d6=_0x6b8927;for(const _0x319dbb of currentCoins){if(_0x319dbb['coin']!=config[_0x13b1d6(0x1d0)]){let _0x50417c;_0x319dbb[_0x13b1d6(0x121)]?_0x50417c=formatResult((0x1/(global[_0x13b1d6(0x1f1)][noslash(_0x319dbb[_0x13b1d6(0xee)])]/0x64+0x1)-0x1)*0x64,0x3):_0x50417c=global[_0x13b1d6(0x1f1)][noslash(_0x319dbb[_0x13b1d6(0xee)])],_0x50417c<config[_0x13b1d6(0xd5)]&&(logHistory(_0x13b1d6(0xde),_0x319dbb[_0x13b1d6(0x1ef)]+_0x13b1d6(0x145)+_0x50417c+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x13b1d6(0xde),_0x13b1d6(0x124)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x315f1f,_0x40b7b1){const _0x21dd97=_0x6b8927;if(!_0x315f1f)return!![];const _0x1b502b=_0x40b7b1[_0x21dd97(0x26c)]('.'),_0xfd494c=_0x315f1f['split']('.');for(var _0x216f77=0x0;_0x216f77<_0xfd494c[_0x21dd97(0x1a4)];_0x216f77++){const _0x26e28e=~~_0xfd494c[_0x216f77],_0x3eb784=~~_0x1b502b[_0x216f77];if(_0x26e28e<_0x3eb784)return!![];if(_0x26e28e>_0x3eb784)return![];}return![];}async function oneTimeMigration(){const _0x30c489=_0x6b8927;let _0x3893bd=dbLogs[_0x30c489(0x1ec)](_0x30c489(0x25a))[_0x30c489(0xdc)]();if(isOlderVersion(_0x3893bd,_0x30c489(0x110))){let _0x5dfb52=[];const _0x1a7a70=dbLogs[_0x30c489(0x1ec)](_0x30c489(0x225))[_0x30c489(0xdc)]();_0x1a7a70[_0x30c489(0x21b)](_0x2f9777=>{const _0x769170=_0x30c489;_0x5dfb52[_0x769170(0x1dd)]({'time':_0x2f9777[_0x769170(0x16a)],'type':_0x2f9777['type'],'event':_0x2f9777[_0x769170(0x11a)]});}),dbLogs[_0x30c489(0x1ec)]('logs')[_0x30c489(0x189)](_0x5dfb52)[_0x30c489(0x114)]();}let _0x208538=dbConfig[_0x30c489(0x1ec)](_0x30c489(0x25a))[_0x30c489(0xdc)]();if(isOlderVersion(_0x208538,'2.3.5')){let _0x16227b=dbConfig['get'](_0x30c489(0x168))[_0x30c489(0x162)]({'botID':botID})[_0x30c489(0xdc)]();if(_0x16227b){let _0x499f46=[];_0x16227b[_0x30c489(0x122)][_0x30c489(0x21b)](_0x46ec3b=>{const _0x28b2ca=_0x30c489;_0x499f46[_0x28b2ca(0x1dd)]({'coin':_0x46ec3b['coin'],'number':_0x46ec3b['startnumber'],'price':_0x46ec3b[_0x28b2ca(0x238)]}),delete _0x46ec3b['startnumber'],delete _0x46ec3b[_0x28b2ca(0x238)];});if(_0x499f46[_0x30c489(0x1a4)]!==0x0)fs[_0x30c489(0x178)](configbackuppath+(_0x30c489(0x25d)+botID+_0x30c489(0xcd)),JSON[_0x30c489(0x19b)](_0x499f46,null,0x4),function(_0x9be907){if(_0x9be907){}});const _0x58d6f6=(_0x5baba0,_0x2feac4)=>{let _0x48ca3e=[];_0x2feac4['forEach'](_0x4cb863=>{const _0x3f6723=_0x345f,_0x42c585=_0x5baba0[_0x3f6723(0x162)](_0x1adcca=>_0x1adcca[_0x3f6723(0x1ef)]==_0x4cb863['coin']);if(!_0x42c585)_0x48ca3e[_0x3f6723(0x1dd)](_0x4cb863);});let _0x3d90ba=[];return _0x5baba0['forEach'](_0x392395=>{const _0xc3cde1=_0x345f,_0x194c57=_0x2feac4[_0xc3cde1(0x162)](_0xc773d9=>_0xc773d9['coin']==_0x392395[_0xc3cde1(0x1ef)]);if(!_0x194c57||_0x194c57[_0xc3cde1(0x1ff)]==0x0&&_0x392395[_0xc3cde1(0x1ff)]!=0x0)_0x3d90ba[_0xc3cde1(0x1dd)](_0x392395);}),{'missingDay1':_0x48ca3e,'notInDay2':_0x3d90ba};},_0x3a2e45=dbPerformance['get'](_0x30c489(0xf7))['cloneDeep']()['value']();if(_0x3a2e45[_0x30c489(0x1a4)]>0x1){const {missingDay1:_0xeb881,notInDay2:_0x448ef5}=_0x58d6f6(_0x499f46,_0x3a2e45[0x1]['coins']);_0x499f46=[..._0x499f46,..._0xeb881],_0x448ef5['forEach'](_0x2bc243=>{const _0x19a9e6=_0x30c489;let _0x468586=_0x499f46[_0x19a9e6(0xdb)](_0x9b170=>_0x9b170[_0x19a9e6(0x1ef)]==_0x2bc243[_0x19a9e6(0x1ef)]);_0x468586!=-0x1&&_0x499f46['splice'](_0x468586,0x1);});}_0x499f46['sort']((_0x564101,_0x5427a1)=>_0x564101[_0x30c489(0x1ef)]>_0x5427a1[_0x30c489(0x1ef)]?0x1:_0x5427a1['coin']>_0x564101['coin']?-0x1:0x0);let _0xc63619=[{'date':_0x16227b['startdate'],'changes':_0x499f46}];_0x3a2e45[_0x30c489(0x1a4)]>0x2&&_0x3a2e45[_0x30c489(0x21b)]((_0x3262b6,_0x180542)=>{const _0x5a7dbc=_0x30c489;if(_0x180542>0x0&&_0x180542<_0x3a2e45[_0x5a7dbc(0x1a4)]-0x1){const {missingDay1:_0x3952a5,notInDay2:_0x220b10}=_0x58d6f6(_0x3a2e45[_0x180542][_0x5a7dbc(0x167)],_0x3a2e45[_0x180542+0x1]['coins']);_0x499f46=[],(_0x3952a5[_0x5a7dbc(0x1a4)]!=0x0||_0x220b10['length']!=0x0)&&(_0x3952a5[_0x5a7dbc(0x1a4)]!=0x0&&_0x499f46['push'](..._0x3952a5),_0x220b10[_0x5a7dbc(0x1a4)]!=0x0&&(_0x220b10['forEach'](_0x48a5d2=>{const _0x3d1651=_0x5a7dbc;_0x48a5d2[_0x3d1651(0x1ff)]=-_0x48a5d2[_0x3d1651(0x1ff)];}),_0x499f46[_0x5a7dbc(0x1dd)](..._0x220b10)),_0x499f46[_0x5a7dbc(0x193)]((_0x28a06f,_0xea6e00)=>_0x28a06f['coin']>_0xea6e00[_0x5a7dbc(0x1ef)]?0x1:_0xea6e00[_0x5a7dbc(0x1ef)]>_0x28a06f['coin']?-0x1:0x0),_0xc63619[_0x5a7dbc(0x1dd)]({'date':_0x3a2e45[_0x180542+0x1][_0x5a7dbc(0x258)],'changes':_0x499f46}));}}),dbConfig[_0x30c489(0x1ec)](_0x30c489(0x168))[_0x30c489(0x162)]({'botID':botID})['assign']({..._0x16227b,'liquidity':_0xc63619})['write']();}}if(isOlderVersion(_0x208538,'2.6.0')){let _0x450c09=dbConfig['get'](_0x30c489(0x168))[_0x30c489(0x162)]({'botID':botID})['value']();if(_0x450c09){const _0x2faf1a=_0x450c09[_0x30c489(0x146)],_0x671f0c=_0x2faf1a?capitalize(_0x2faf1a):_0x30c489(0x24e);dbConfig[_0x30c489(0x1ec)](_0x30c489(0x168))[_0x30c489(0x162)]({'botID':botID})['assign']({'exchange':_0x671f0c})[_0x30c489(0x114)]();}}let _0x24b216=dbPerformance[_0x30c489(0x1ec)](_0x30c489(0x25a))[_0x30c489(0xdc)]();isOlderVersion(_0x24b216,_0x30c489(0x110))&&setStartDatePerformance();let _0x46ab45=dbCoinResults['get'](_0x30c489(0x25a))['value']();if(isOlderVersion(_0x46ab45,_0x30c489(0xd7))){let _0x9a36cc=dbCoinResults[_0x30c489(0x1ec)]('coins')[_0x30c489(0xdc)]();if(_0x9a36cc[_0x30c489(0x1a4)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5bee5c=_0x6b8927;dbConfig['set']('version',serverversion)[_0x5bee5c(0x114)](),dbPerformance[_0x5bee5c(0x21a)](_0x5bee5c(0x25a),serverversion)['write'](),dbLogs[_0x5bee5c(0x21a)]('version',serverversion)[_0x5bee5c(0x114)](),dbCoinResults[_0x5bee5c(0x21a)](_0x5bee5c(0x25a),serverversion)[_0x5bee5c(0x114)]();}function getConfiguration(_0x3c0d9b){const _0x31a651=_0x6b8927;let _0x8b4142=dbConfig['get']('bot')[_0x31a651(0x162)]({'botID':_0x3c0d9b})[_0x31a651(0xdc)]();if(_0x8b4142){let _0x5924c3=![];typeof _0x8b4142[_0x31a651(0x187)]=='string'&&(_0x8b4142={..._0x8b4142,'threshold':Number(_0x8b4142['threshold'])},_0x5924c3=!![]),_0x8b4142[_0x31a651(0xd5)]==undefined&&(_0x8b4142={..._0x8b4142,'change24h':-0x14},_0x5924c3=!![]),_0x8b4142[_0x31a651(0x219)]==undefined&&(_0x8b4142={..._0x8b4142,'fiat':_0x31a651(0x1af)},_0x5924c3=!![]),_0x8b4142[_0x31a651(0x1bd)]==undefined&&(_0x8b4142={..._0x8b4142,'onepagemode':settings['onepagemode']},_0x5924c3=!![]),_0x8b4142['colorscheme']==undefined&&(_0x8b4142={..._0x8b4142,'colorscheme':_0x31a651(0x1e1)},_0x5924c3=!![]),_0x8b4142[_0x31a651(0x156)]==undefined&&(_0x8b4142={..._0x8b4142,'autoliquidity':!![]},_0x5924c3=!![]),_0x5924c3&&(_0x8b4142={'botID':_0x8b4142[_0x31a651(0x206)],'exchange':_0x8b4142[_0x31a651(0x146)],'apiKey':_0x8b4142['apiKey'],'apiSecret':_0x8b4142[_0x31a651(0xeb)],'apiPassword':_0x8b4142[_0x31a651(0x1b2)],'basecoin':_0x8b4142[_0x31a651(0x1d0)],'botname':_0x8b4142[_0x31a651(0x100)],'showname':_0x8b4142[_0x31a651(0x237)],'threshold':_0x8b4142[_0x31a651(0x187)],'ordertype':_0x8b4142['ordertype'],'timeout':_0x8b4142[_0x31a651(0x202)],'fiat':_0x8b4142[_0x31a651(0x219)],'startdate':_0x8b4142[_0x31a651(0xe4)],'recreate':_0x8b4142[_0x31a651(0x268)],'timeshift':_0x8b4142['timeshift'],'onepagemode':_0x8b4142[_0x31a651(0x1bd)],'headless':_0x8b4142['headless'],'cooldown':_0x8b4142[_0x31a651(0x135)],'change24h':_0x8b4142[_0x31a651(0xd5)],'emojibuy':_0x8b4142['emojibuy'],'emojisell':_0x8b4142[_0x31a651(0x12d)],'colorscheme':_0x8b4142[_0x31a651(0x123)],'portfolio':_0x8b4142[_0x31a651(0x122)],'autoliquidity':_0x8b4142[_0x31a651(0x156)],'liquidity':_0x8b4142[_0x31a651(0xe6)],'openOrders':_0x8b4142[_0x31a651(0x19d)]},dbConfig['get'](_0x31a651(0x168))[_0x31a651(0x220)]()[_0x31a651(0x114)](),dbConfig['get'](_0x31a651(0x168))[_0x31a651(0x1dd)](_0x8b4142)[_0x31a651(0x114)]());}else _0x8b4142={'botID':_0x3c0d9b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x31a651(0x13b)+_0x3c0d9b,'showname':![],'threshold':0x3,'ordertype':_0x31a651(0x15d),'timeout':0x14,'fiat':_0x31a651(0x1af),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x31a651(0x1d7)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x31a651(0x1e1),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x8b4142;}function emittedConfiguration(){const _0x1c4581=_0x6b8927;let _0x49b70a;if(config[_0x1c4581(0x184)]=='')_0x49b70a={...config,'configstate':_0x1c4581(0x119)};else config[_0x1c4581(0x184)]==_0x1c4581(0x107)?_0x49b70a={...config,'configstate':_0x1c4581(0xf6)}:(_0x49b70a={...config,'apiKey':_0x1c4581(0x1db),'apiSecret':'************'},config['apiPassword']&&(_0x49b70a['apiPassword']=_0x1c4581(0x1db)));return _0x49b70a;}function getSettings(){const _0x4124f0=_0x6b8927;return dbSettings[_0x4124f0(0x1ec)]('settings')[_0x4124f0(0xdc)]();}function getSecure(){const _0x2887d4=_0x6b8927;return dbSecure[_0x2887d4(0x1ec)](_0x2887d4(0x182))['value']()||{};}function updateTimeshift(_0x5d5eb9){const _0x1b6fc0=_0x6b8927;let _0x317e2a=dbConfig['get'](_0x1b6fc0(0x168))[_0x1b6fc0(0x162)]({'botID':botID})[_0x1b6fc0(0xdc)]();_0x317e2a&&dbConfig[_0x1b6fc0(0x1ec)](_0x1b6fc0(0x168))[_0x1b6fc0(0x162)]({'botID':botID})[_0x1b6fc0(0x189)]({'timeshift':_0x5d5eb9})[_0x1b6fc0(0x114)](),config[_0x1b6fc0(0x1d7)]=_0x5d5eb9,proxyEmit(_0x1b6fc0(0x161),emittedConfiguration());}function updateOnepagemode(_0x457ec8){const _0x10067f=_0x6b8927;let _0x58adb9=dbConfig[_0x10067f(0x1ec)](_0x10067f(0x168))[_0x10067f(0x162)]({'botID':botID})[_0x10067f(0xdc)]();_0x58adb9&&dbConfig[_0x10067f(0x1ec)](_0x10067f(0x168))[_0x10067f(0x162)]({'botID':botID})[_0x10067f(0x189)]({'onepagemode':_0x457ec8})['write'](),config['onepagemode']=_0x457ec8,proxyEmit(_0x10067f(0x161),emittedConfiguration());}async function storeConfiguration(_0x30908e){const _0x34a40c=_0x6b8927;logger[_0x34a40c(0x245)](_0x34a40c(0x1e2));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x34a40c(0x245)](_0x34a40c(0x226));let _0x421e84=![],_0x5de823=![],_0x4b9f68=[];_0x30908e[_0x34a40c(0x122)]['forEach'](_0xb1e9ec=>{const _0x3f30a5=_0x34a40c;if(!_0xb1e9ec[_0x3f30a5(0x243)]&&_0xb1e9ec['coin']!=_0x30908e[_0x3f30a5(0x1d0)])_0x4b9f68[_0x3f30a5(0x1dd)](_0xb1e9ec[_0x3f30a5(0xee)]);}),_0x4b9f68[_0x34a40c(0x21b)](_0x44cb0d=>{const _0x2c94bd=_0x34a40c,_0x2b2eab=currentCoins['find'](_0x16f385=>_0x16f385[_0x2c94bd(0xee)]==_0x44cb0d);!_0x2b2eab&&(_0x421e84=!![]);}),currentCoins[_0x34a40c(0x21b)](_0x498ded=>{const _0x3f9fdf=_0x34a40c;if(_0x498ded[_0x3f9fdf(0x1ef)]!=config[_0x3f9fdf(0x1d0)]){const _0x33a507=_0x4b9f68[_0x3f9fdf(0x162)](_0xce15b2=>_0xce15b2==_0x498ded[_0x3f9fdf(0xee)]);!_0x33a507&&(_0x421e84=!![]);}}),_0x30908e[_0x34a40c(0x122)]['forEach'](_0x2b86dc=>{const _0x2fdfea=_0x34a40c,_0x4792f4=config[_0x2fdfea(0x122)][_0x2fdfea(0x162)](_0x170cad=>_0x170cad['coin']==_0x2b86dc[_0x2fdfea(0x1ef)]);if(_0x4792f4&&_0x2b86dc[_0x2fdfea(0xf8)]!=_0x4792f4[_0x2fdfea(0xf8)])_0x5de823=!![];});let _0x6936a4=dbConfig[_0x34a40c(0x1ec)](_0x34a40c(0x168))['find']({'botID':botID})[_0x34a40c(0xdc)]();_0x30908e={..._0x30908e,'apiKey':crypt[_0x34a40c(0x14e)](secure[_0x34a40c(0x174)],_0x30908e[_0x34a40c(0x184)])[_0x34a40c(0x1f7)],'apiSecret':crypt[_0x34a40c(0x14e)](secure['privateKey'],_0x30908e[_0x34a40c(0xeb)])[_0x34a40c(0x1f7)]};_0x30908e['apiPassword']&&(_0x30908e[_0x34a40c(0x1b2)]=crypt['decrypt'](secure['privateKey'],_0x30908e[_0x34a40c(0x1b2)])[_0x34a40c(0x1f7)]);let _0x35dbb2=![];if(_0x6936a4){_0x30908e['apiKey']==_0x34a40c(0x1db)?_0x30908e[_0x34a40c(0x184)]=config[_0x34a40c(0x184)]:_0x35dbb2=!![];_0x30908e[_0x34a40c(0xeb)]==_0x34a40c(0x1db)?_0x30908e[_0x34a40c(0xeb)]=config[_0x34a40c(0xeb)]:_0x35dbb2=!![];if(_0x30908e['apiPassword']==_0x34a40c(0x1db))_0x30908e[_0x34a40c(0x1b2)]=config[_0x34a40c(0x1b2)];else{if(_0x30908e[_0x34a40c(0x1b2)])_0x35dbb2=!![];}dbConfig['get'](_0x34a40c(0x168))[_0x34a40c(0x162)]({'botID':botID})[_0x34a40c(0x189)](_0x30908e)['write']();}else dbConfig[_0x34a40c(0x1ec)]('bot')[_0x34a40c(0x1dd)](_0x30908e)['write'](),_0x35dbb2=!![],process[_0x34a40c(0xfd)]({'status':_0x34a40c(0x207),'live':'running'},_0x36634d=>{});process[_0x34a40c(0xfd)]({'botname':_0x30908e['botname']},_0x42893c=>{}),config={..._0x30908e},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x35dbb2)await reset(!![]);else _0x421e84||_0x5de823?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x34a40c(0x245)](_0x34a40c(0x233));}async function storeHeadless(_0x25c192){const _0x2ea988=_0x6b8927,_0x392506={...config,'headless':_0x25c192[_0x2ea988(0x260)]};let _0x26b8f9=dbConfig[_0x2ea988(0x1ec)](_0x2ea988(0x168))['find']({'botID':botID})[_0x2ea988(0xdc)]();_0x26b8f9&&dbConfig['get'](_0x2ea988(0x168))[_0x2ea988(0x162)]({'botID':botID})['assign'](_0x392506)['write'](),config={..._0x392506},updateBotManager(),proxyEmit(_0x2ea988(0x161),emittedConfiguration());}async function storeFiat(_0x533f46){const _0x4004e8=_0x6b8927,_0x495038={...config,'fiat':_0x533f46};let _0x17a470=dbConfig[_0x4004e8(0x1ec)](_0x4004e8(0x168))[_0x4004e8(0x162)]({'botID':botID})[_0x4004e8(0xdc)]();_0x17a470&&dbConfig[_0x4004e8(0x1ec)](_0x4004e8(0x168))[_0x4004e8(0x162)]({'botID':botID})['assign'](_0x495038)[_0x4004e8(0x114)](),config={..._0x495038},proxyEmit(_0x4004e8(0x161),emittedConfiguration());}function resetHistory(){const _0xa914b8=_0x6b8927;logger['full'](_0xa914b8(0x1f0));try{if(fs[_0xa914b8(0x1d8)](path[_0xa914b8(0x11b)](configpath,_0xa914b8(0x188)+botID+_0xa914b8(0x1a3))))fs['unlinkSync'](path[_0xa914b8(0x11b)](configpath,_0xa914b8(0x188)+botID+_0xa914b8(0x1a3)));if(fs[_0xa914b8(0x1d8)](path['join'](configpath,_0xa914b8(0x188)+botID+_0xa914b8(0xed))))fs[_0xa914b8(0x1f4)](path[_0xa914b8(0x11b)](configpath,_0xa914b8(0x188)+botID+_0xa914b8(0xed)));if(fs[_0xa914b8(0x1d8)](path['join'](configpath,_0xa914b8(0x188)+botID+_0xa914b8(0x1f2))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+'-results.json'));}catch(_0x451ee8){if(_0x451ee8)logger[_0xa914b8(0x103)](_0xa914b8(0x125),_0x451ee8);}const _0x16a263=getDate();let _0x40cb02=[];currentCoins[_0xa914b8(0x21b)](_0x13fe54=>{const _0x4d6242=_0xa914b8;_0x40cb02['push']({'coin':_0x13fe54[_0x4d6242(0x1ef)],'number':_0x13fe54[_0x4d6242(0x1ff)],'price':_0x13fe54[_0x4d6242(0x1c3)]});});let _0xf2de72=dbConfig[_0xa914b8(0x1ec)](_0xa914b8(0x168))[_0xa914b8(0x162)]({'botID':botID})[_0xa914b8(0xdc)]();_0xf2de72&&(dbConfig[_0xa914b8(0x1ec)]('bot')[_0xa914b8(0x162)]({'botID':botID})['assign']({'liquidity':[{'date':_0x16a263,'changes':_0x40cb02}]})[_0xa914b8(0x114)](),config[_0xa914b8(0xe6)]=[]),process['send']({'stop':_0xa914b8(0x10f)},_0x108088=>{});}function noslash(_0x11f3da){return _0x11f3da['replace']('/','');}function updateHighestFee(_0x36a677){const _0x2fcaa5=_0x6b8927;if(_0x36a677[_0x2fcaa5(0x121)]){let _0x1171d2={'filled':_0x36a677['filled']*_0x36a677[_0x2fcaa5(0x197)],'amount':_0x36a677['filled']*_0x36a677[_0x2fcaa5(0x197)],'side':_0x36a677[_0x2fcaa5(0x165)]==_0x2fcaa5(0x1cd)?'buy':_0x2fcaa5(0x1cd),'price':0x1/_0x36a677[_0x2fcaa5(0x197)]};_0x36a677={..._0x36a677,..._0x1171d2};}const _0x6e1419=defaultFee*_0x36a677[_0x2fcaa5(0x173)]*_0x36a677[_0x2fcaa5(0x197)];lastFees['recent20']['length']===0x14&&lastFees[_0x2fcaa5(0x1d2)]['shift'](),lastFees[_0x2fcaa5(0x1d2)][_0x2fcaa5(0x1dd)](_0x6e1419),lastFees['highest']=Math[_0x2fcaa5(0x212)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4fa464){const _0xa561ad=_0x6b8927;logger['debug'](_0xa561ad(0xce)+_0x4fa464[_0xa561ad(0xee)]+_0xa561ad(0x1c7)+_0x4fa464['status']+'\x20|\x20'+_0x4fa464['filled']+'\x20/\x20'+_0x4fa464[_0xa561ad(0x1b9)]+_0xa561ad(0x1c7)+_0x4fa464['id']);let _0x481cf3=_0x4fa464['status'],_0x4da75a=![];currentCoins['forEach'](_0x176cb9=>{const _0x5e5c56=_0xa561ad;_0x176cb9[_0x5e5c56(0xee)]==_0x4fa464[_0x5e5c56(0xee)]&&(_0x4da75a=!![]);});if(!_0x4da75a)return;const _0x5a69a4=currentCoins[_0xa561ad(0x162)](_0xf55912=>_0xf55912['symbol']==_0x4fa464[_0xa561ad(0xee)]),_0x5adb5e=_0x34cfbc=>{const _0xe38b5e=_0xa561ad;if(_0x5a69a4)_0x5a69a4[_0xe38b5e(0x1e3)]=_0x34cfbc;};if(_0x481cf3==_0xa561ad(0x1e5))_0x5adb5e(_0xa561ad(0x1e5));else{if(_0x481cf3==_0xa561ad(0x12a)){_0x5adb5e(_0xa561ad(0x12a));const _0xe9d0da=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xe9d0da,await getOpenOrders(),handleOpenOrders();}else{if(_0x481cf3==_0xa561ad(0x14b)){let _0x2b5611=![];if(lastOrders)for(const _0x218a20 of lastOrders){const _0x22820e=0xc8,_0x3dc915=0x1388;let _0x29f113=0x0;while(!_0x218a20[_0xa561ad(0x185)]&&_0x29f113*_0x22820e<_0x3dc915){_0x29f113++,await sleep(_0x22820e);}if(_0x29f113>0x0)logger[_0xa561ad(0x245)](_0xa561ad(0x22e)+_0x29f113*_0x22820e/0x3e8+_0xa561ad(0x23e));if(_0x218a20[_0xa561ad(0x185)]==_0x4fa464['id']){logger[_0xa561ad(0x245)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x4fa464['id']),_0x2b5611=!![];if(_0x218a20[_0xa561ad(0x173)]==0x0){logger[_0xa561ad(0x245)](_0xa561ad(0x117)+_0x4fa464['id']);if(_0x4fa464[_0xa561ad(0x14c)])_0x218a20['price']=_0x4fa464['average'];else{if(_0x4fa464[_0xa561ad(0x197)])_0x218a20[_0xa561ad(0x197)]=_0x4fa464[_0xa561ad(0x197)];else{}}_0x218a20['filled']=_0x4fa464[_0xa561ad(0x173)],updateHighestFee(_0x218a20),_0x5adb5e(_0xa561ad(0x173)),await validateOrders();if(lockOrders==ORDERS[_0xa561ad(0x1f5)]){const _0x174367=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x174367;}_0x218a20['fee']={'currency':_0x4fa464[_0xa561ad(0x131)]?_0x4fa464[_0xa561ad(0x131)]['currency']:null,'cost':_0x4fa464[_0xa561ad(0x131)]?_0x4fa464['fee']['cost']:0x0},await updateCoinResults(_0x218a20);}}}if(!_0x2b5611){logger[_0xa561ad(0x245)](_0xa561ad(0x208)+_0x4fa464['id']),_0x5adb5e(_0xa561ad(0x173));const _0x21407d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x21407d,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x52a0e5=JSON[_0xa561ad(0x127)](lastBalances['portfolio']);const _0x3a1e83=_0x52a0e5[_0xa561ad(0x162)](_0x5cf938=>_0x5cf938['symbol']==_0x4fa464['symbol']);if(_0x3a1e83){if(_0x481cf3==_0xa561ad(0x1e5))_0x3a1e83[_0xa561ad(0x1e3)]=_0x3a1e83[_0xa561ad(0x1e3)]==_0xa561ad(0x173)?_0xa561ad(0x173):'open';else{if(_0x481cf3==_0xa561ad(0x12a))_0x3a1e83['orderstatus']=_0x3a1e83['orderstatus']=='filled'?_0xa561ad(0x173):_0xa561ad(0x12a);else _0x481cf3==_0xa561ad(0x14b)&&(_0x3a1e83['orderstatus']=_0xa561ad(0x173));}}lastBalances={...lastBalances,'portfolio':JSON[_0xa561ad(0x19b)](_0x52a0e5)},proxyEmit(_0xa561ad(0x126),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x4ab509=![];currentCoins['forEach'](_0x2ffad8=>{const _0x37c133=_0x345f;_0x4ab509=allOpenOrders[_0x37c133(0x162)](_0x438350=>_0x438350[_0x37c133(0xee)]==_0x2ffad8[_0x37c133(0xee)]),_0x2ffad8[_0x37c133(0x1e3)]=_0x4ab509?'open':_0x37c133(0x263);});}async function getCoins(_0x22ccf3=0x0,_0x5f20c3=!![],_0x3b4f42=config[_0x6b8927(0x1d0)]){const _0x6c22cf=_0x6b8927;let _0x71760c,_0x55e897=[],_0x443a9b=[],_0x51a3fb=[];if(_0x22ccf3)await sleep(_0x22ccf3);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x71760c=await exchange[_0x6c22cf(0x105)](),mybalances=_0x71760c[_0x6c22cf(0x255)];for(const [_0x4ac861,_0x53c84a]of Object[_0x6c22cf(0x23b)](mybalances)){_0x51a3fb[_0x6c22cf(0x1dd)](_0x4ac861);}config[_0x6c22cf(0x122)][_0x6c22cf(0x21b)](_0x32899c=>{const _0x2f14cd=_0x6c22cf;!_0x51a3fb[_0x2f14cd(0x132)](_0x32899c[_0x2f14cd(0x1ef)])&&(mybalances[_0x32899c[_0x2f14cd(0x1ef)]]=0x0);});if(_0x3b4f42=='')for(const [_0x9f948c,_0x454f02]of Object[_0x6c22cf(0x23b)](mybalances)){_0x454f02!=0x0&&_0x55e897[_0x6c22cf(0x1dd)]({'coin':_0x9f948c});}else{let _0x398ae0=![];for(const [_0x1d6ad7,_0x16e866]of Object[_0x6c22cf(0x23b)](mybalances)){const _0x384aac=config[_0x6c22cf(0x122)][_0x6c22cf(0x162)](_0x8d76c5=>_0x8d76c5[_0x6c22cf(0x1ef)]==_0x1d6ad7),_0x5495d2=_0x1d6ad7+'/'+_0x3b4f42,_0x4f614e=_0x3b4f42+'/'+_0x1d6ad7,_0x486be7=currentCoins[_0x6c22cf(0x162)](_0x4be8da=>_0x4be8da[_0x6c22cf(0x1ef)]==_0x1d6ad7);_0x398ae0=![];if((_0x16e866!=0x0||_0x384aac)&&(allSymbols[_0x6c22cf(0x132)](_0x5495d2)||_0x1d6ad7==_0x3b4f42))_0x55e897['push']({'coin':_0x1d6ad7,'symbol':_0x5495d2,'reverse':![],'number':Math[_0x6c22cf(0x212)](_0x16e866+(_0x384aac&&_0x384aac[_0x6c22cf(0xf8)]||0x0),0x0),'orderstatus':_0x486be7?_0x486be7['orderstatus']:'none'});else{if((_0x16e866!=0x0||_0x384aac)&&allSymbols[_0x6c22cf(0x132)](_0x4f614e))_0x55e897[_0x6c22cf(0x1dd)]({'coin':_0x1d6ad7,'symbol':_0x4f614e,'reverse':!![],'number':Math[_0x6c22cf(0x212)](_0x16e866+(_0x384aac&&_0x384aac[_0x6c22cf(0xf8)]||0x0),0x0),'orderstatus':_0x486be7?_0x486be7[_0x6c22cf(0x1e3)]:_0x6c22cf(0x263)});else _0x384aac&&_0x55e897['push']({'coin':_0x384aac[_0x6c22cf(0x1ef)],'symbol':_0x384aac[_0x6c22cf(0xee)],'reverse':_0x384aac[_0x6c22cf(0x121)],'number':0x0,'orderstatus':_0x6c22cf(0x263)});}}}}catch(_0x4e8b9e){if(!_0x5f20c3)handleErrorNoStop(_0x4e8b9e,'getCoins()');else await handleError(_0x4e8b9e,_0x6c22cf(0x108));}return _0x443a9b=cloneDeep(_0x55e897),_0x55e897=_0x55e897[_0x6c22cf(0x20d)](_0x1e4111=>{const _0x38fcff=_0x6c22cf,_0x5b1dc8=config[_0x38fcff(0x122)]['find'](_0x379bbc=>_0x379bbc[_0x38fcff(0x1ef)]==_0x1e4111['coin']);return _0x5b1dc8&&!_0x5b1dc8[_0x38fcff(0x243)];}),[_0x55e897,_0x443a9b];}async function getCoinNumber(_0x244718){const _0x1d23a0=_0x6b8927;let _0x4e3d0a;try{const _0x842e31=await exchange[_0x1d23a0(0x105)]();_0x4e3d0a=_0x842e31['total'][_0x244718];}catch(_0x5e60b2){await handleError(_0x5e60b2,_0x1d23a0(0x214));}return _0x4e3d0a;}async function getOpenOrders(){const _0x1958b2=_0x6b8927;let _0xedb2e6;allOpenOrders=[];try{for(const _0x4a333e of config['portfolio']){!_0x4a333e[_0x1958b2(0x243)]&&_0x4a333e[_0x1958b2(0x1ef)]!=config[_0x1958b2(0x1d0)]&&(_0xedb2e6=await exchange['fetchOpenOrders'](_0x4a333e[_0x1958b2(0xee)]),_0xedb2e6['length']>0x0&&allOpenOrders['push'](_0xedb2e6[0x0]));}}catch(_0x45e918){await handleError(_0x45e918,_0x1958b2(0x21f));}}async function handleOpenOrders(_0x544556=0x0){const _0x3e1c3a=_0x6b8927;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3e1c3a(0x1f5)]&&allOrdersPlaced&&(_0x544556==0x0?(logger[_0x3e1c3a(0x245)](_0x3e1c3a(0x229)),_0x544556++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3e1c3a(0x245)](_0x3e1c3a(0x1d6)),validateOrders(_0x3e1c3a(0x133))));}async function testAPI(_0xcc710f){const _0x17b436=_0x6b8927,_0x29d595=ccxt[_0x17b436(0x252)][_0xcc710f[_0x17b436(0x146)][_0x17b436(0xd8)]()],_0x4791e7=new _0x29d595({'apiKey':_0xcc710f['apiKey'],'secret':_0xcc710f['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0xcc710f[_0x17b436(0x1b2)])_0x4791e7[_0x17b436(0x1b5)]=_0xcc710f[_0x17b436(0x1b2)];try{await _0x4791e7['loadMarkets']();}catch(_0x4906b9){throw _0x4906b9;}}function cloneDeep(_0x5bd20a){const _0x590edb=_0x6b8927;return JSON[_0x590edb(0x127)](JSON['stringify'](_0x5bd20a));}async function getPortfolio(_0x59a7ec){const _0x4df880=_0x6b8927;let _0x267de8=[],_0x11ca2a=[],_0x4cfd2a=[],_0x5c5271;if(_0x59a7ec['apiKey']!=='************'||_0x59a7ec[_0x4df880(0xeb)]!==_0x4df880(0x1db)||_0x59a7ec[_0x4df880(0x1b2)]&&_0x59a7ec[_0x4df880(0x1b2)]!==_0x4df880(0x1db)){if(config[_0x4df880(0x146)]){if(_0x59a7ec[_0x4df880(0x184)]=='************')_0x59a7ec[_0x4df880(0x184)]=config[_0x4df880(0x184)];if(_0x59a7ec[_0x4df880(0xeb)]=='************')_0x59a7ec[_0x4df880(0xeb)]=config[_0x4df880(0xeb)];if(_0x59a7ec[_0x4df880(0x1b2)]==_0x4df880(0x1db))_0x59a7ec['apiPassword']=config[_0x4df880(0x1b2)];try{await testAPI(_0x59a7ec);}catch(_0x2a91ea){if(_0x2a91ea[_0x4df880(0x20a)]()[_0x4df880(0x132)](_0x4df880(0x164))){logger[_0x4df880(0x245)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x4df880(0x122),![]);return;}else{handleError(_0x2a91ea,'getPortfolio(0)');return;}}}await initExchange(_0x59a7ec[_0x4df880(0x146)],_0x59a7ec[_0x4df880(0x184)],_0x59a7ec['apiSecret'],_0x59a7ec[_0x4df880(0x1b2)]);try{await loadSymbols();}catch(_0x59b21a){if(_0x59b21a[_0x4df880(0x20a)]()['includes']('AuthenticationError')){proxyEmit('portfolio',![]);return;}else{handleError(_0x59b21a,_0x4df880(0x17b));return;}}const _0x4b2360=await getCoins(0x0,![],_0x59a7ec['basecoin']);_0x4cfd2a=cloneDeep(_0x4b2360[0x1]);}else{const _0x23d1e5=await getCoins();_0x4cfd2a=cloneDeep(_0x23d1e5[0x1]);}if(_0x59a7ec[_0x4df880(0x1d0)]=='')proxyEmit(_0x4df880(0x122),_0x4cfd2a);else{_0x4cfd2a[_0x4df880(0x21b)](_0x50f774=>{const _0x14f0db=_0x4df880;if(_0x50f774[_0x14f0db(0x1ef)]!=_0x59a7ec['basecoin']&&allSymbols[_0x14f0db(0x132)](_0x50f774[_0x14f0db(0xee)]))_0x267de8['push'](_0x50f774[_0x14f0db(0xee)]);});if(_0x267de8[_0x4df880(0x1a4)]==0x0)logHistory(_0x4df880(0xde),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x11ca2a=await getTickers(_0x267de8);}catch(_0x4317cb){if(_0x4317cb[_0x4df880(0x20a)]()[_0x4df880(0x132)](_0x4df880(0x164))){proxyEmit(_0x4df880(0x122),![]);return;}else handleError(_0x4317cb,_0x4df880(0x230));}_0x4cfd2a[_0x4df880(0x21b)](_0x151d1c=>{const _0x16c13b=_0x4df880;_0x151d1c['coin']!=_0x59a7ec['basecoin']?_0x11ca2a[_0x151d1c[_0x16c13b(0xee)]]?_0x5c5271=_0x151d1c[_0x16c13b(0x121)]?0x1/_0x11ca2a[_0x151d1c[_0x16c13b(0xee)]][_0x16c13b(0x1c3)]:_0x11ca2a[_0x151d1c[_0x16c13b(0xee)]]['last']:_0x5c5271=0x0:_0x5c5271=0x1,_0x151d1c[_0x16c13b(0x197)]=formatResult(_0x5c5271,0x8);}),proxyEmit(_0x4df880(0x122),_0x4cfd2a);}}}function truncateTradeAmount(_0x3074d9,_0x1ca86c){const _0xd23f0d=_0x6b8927;let _0x10e5da=0x0;try{_0x10e5da=exchange[_0xd23f0d(0x1b8)](_0x3074d9,_0x1ca86c);}catch(_0x5b837b){}return _0x10e5da;}function checkMinimums(_0x968d46){const _0x57f2a5=_0x6b8927;let _0x4e6b05=!![];const _0x155987=!_0x968d46[_0x57f2a5(0x121)]?markets[_0x968d46['symbol']][_0x57f2a5(0x227)][_0x57f2a5(0x1b9)][_0x57f2a5(0x1f8)]:markets[_0x968d46[_0x57f2a5(0xee)]]['limits'][_0x57f2a5(0x266)][_0x57f2a5(0x1f8)],_0x2c62d8=!_0x968d46[_0x57f2a5(0x121)]?markets[_0x968d46['symbol']][_0x57f2a5(0x227)][_0x57f2a5(0x266)][_0x57f2a5(0x1f8)]:markets[_0x968d46[_0x57f2a5(0xee)]][_0x57f2a5(0x227)][_0x57f2a5(0x1b9)][_0x57f2a5(0x1f8)],_0x3b868f=truncateTradeAmount(_0x968d46[_0x57f2a5(0xee)],_0x968d46[_0x57f2a5(0x215)]);_0x968d46['trade']=_0x3b868f;if(Math[_0x57f2a5(0x180)](_0x3b868f)<_0x155987)_0x4e6b05=![];if(Math[_0x57f2a5(0x180)](_0x3b868f)*_0x968d46['last']<_0x2c62d8)_0x4e6b05=![];if(_0x968d46[_0x57f2a5(0x165)]==_0x57f2a5(0x1cd)){let _0x1027b6=config[_0x57f2a5(0x122)]['find'](_0x1697ca=>_0x1697ca[_0x57f2a5(0x1ef)]==_0x968d46[_0x57f2a5(0x1ef)]);if(_0x1027b6[_0x57f2a5(0xf8)]>0x0){if(Math[_0x57f2a5(0x180)](_0x3b868f)>_0x968d46[_0x57f2a5(0x1ff)]-_0x1027b6[_0x57f2a5(0xf8)])_0x4e6b05=![];}else{if(Math[_0x57f2a5(0x180)](_0x3b868f)>_0x968d46[_0x57f2a5(0x1ff)])_0x4e6b05=![];}}if(_0x968d46['side']=='buy'){let _0x34cedb=config[_0x57f2a5(0x122)][_0x57f2a5(0x162)](_0x5f3374=>_0x5f3374[_0x57f2a5(0x1ef)]==config[_0x57f2a5(0x1d0)]),_0x218fc8=currentCoins[_0x57f2a5(0x162)](_0x52de52=>_0x52de52['coin']==config[_0x57f2a5(0x1d0)]);if(_0x34cedb['offset']>0x0){if(Math[_0x57f2a5(0x180)](_0x3b868f)*_0x968d46[_0x57f2a5(0x1c3)]>_0x218fc8[_0x57f2a5(0x1ff)]-_0x34cedb[_0x57f2a5(0xf8)])_0x4e6b05=![];}else{if(Math[_0x57f2a5(0x180)](_0x3b868f)*_0x968d46[_0x57f2a5(0x1c3)]>_0x218fc8['number'])_0x4e6b05=![];}}return _0x4e6b05;}async function getBalances(_0x3b8d29=!![]){const _0xc5654d=_0x6b8927;let _0x3c13cf=0x0,_0x36eedb;const _0x73b4cf=config['threshold'];if(config[_0xc5654d(0x260)]&&config[_0xc5654d(0xd5)]<0x0)await validate24hChanges();currentCoins[_0xc5654d(0x21b)](_0x1338ae=>{const _0x382303=_0xc5654d;if(_0x1338ae[_0x382303(0x1ef)]!=config[_0x382303(0x1d0)]){let _0x69f485=global[_0x382303(0x10c)][noslash(_0x1338ae[_0x382303(0xee)])];_0x36eedb=_0x1338ae[_0x382303(0x121)]?0x1/_0x69f485:_0x69f485;}else _0x36eedb=0x1;let _0x6b15b8=_0x1338ae[_0x382303(0x1ff)]*_0x36eedb;_0x3c13cf+=_0x6b15b8,_0x1338ae[_0x382303(0x1c3)]=formatResult(Number(_0x36eedb),0x8),_0x1338ae['value']=_0x6b15b8;}),currentCoins[_0xc5654d(0x21b)](_0x344d9b=>{const _0x11e848=_0xc5654d;let _0x3b95b1=config[_0x11e848(0x122)][_0x11e848(0x162)](_0x2db6b8=>_0x2db6b8[_0x11e848(0x1ef)]==_0x344d9b[_0x11e848(0x1ef)]),_0x407a59=Number(_0x3b95b1[_0x11e848(0x1a1)]),_0x17395e=_0x344d9b[_0x11e848(0xdc)]/_0x3c13cf*0x64,_0x44c1be=_0x407a59*_0x3c13cf/0x64/_0x344d9b[_0x11e848(0x1c3)]-_0x344d9b['number'];_0x344d9b[_0x11e848(0x1a1)]=formatResult(_0x17395e,0x3),_0x344d9b['target']=formatResult(_0x407a59,0x3),_0x344d9b['trade']=formatResult(_0x44c1be,0x8),_0x344d9b[_0x11e848(0x165)]='',_0x344d9b['valid']=![];if(_0x344d9b[_0x11e848(0x1ef)]!=config['basecoin']){if(_0x344d9b[_0x11e848(0x1a1)]>_0x407a59)_0x344d9b['side']=_0x11e848(0x1cd),_0x344d9b[_0x11e848(0xd9)]=checkMinimums(_0x344d9b);else _0x344d9b[_0x11e848(0x1a1)]<_0x407a59&&(_0x344d9b[_0x11e848(0x165)]=_0x11e848(0x1bb),_0x344d9b[_0x11e848(0xd9)]=checkMinimums(_0x344d9b));}_0x344d9b[_0x11e848(0x1d4)]=_0x344d9b[_0x11e848(0x1a1)]/_0x344d9b[_0x11e848(0x1cb)]-0x1;if(_0x344d9b[_0x11e848(0x1e3)]==_0x11e848(0x173)||_0x344d9b['orderstatus']=='canceled')_0x344d9b[_0x11e848(0x1e3)]=_0x11e848(0x263);}),currentCoins['sort']((_0x4399f6,_0xfa378f)=>_0x4399f6[_0xc5654d(0x1d4)]<_0xfa378f[_0xc5654d(0x1d4)]?0x1:_0xfa378f[_0xc5654d(0x1d4)]<_0x4399f6[_0xc5654d(0x1d4)]?-0x1:0x0);const _0x4ff490=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4ff490[_0xc5654d(0x190)],'usd':_0x4ff490[_0xc5654d(0xf5)],'portfolio':JSON[_0xc5654d(0x19b)](currentCoins),'threshold':_0x73b4cf},proxyEmit(_0xc5654d(0x126),{'serverversion':serverversion,'balances':lastBalances});if(_0x3b8d29){if(config[_0xc5654d(0x260)])headlessMode({'portfolio':currentCoins,'threshold':_0x73b4cf});else{if(lockOrders==ORDERS[_0xc5654d(0x1c0)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x73b4cf});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5952fd=getNormalizedPerformance();getStartingBalances(_0x5952fd),emitPerformance(_0x5952fd);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5833a9=getNormalizedPerformance();emitPerformance(_0x5833a9),getStartingBalances(_0x5833a9),logger[_0xc5654d(0x245)](_0xc5654d(0xe5));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x257965=_0x6b8927;if(!lastBalances)return;let _0x58e0fb=[],_0xb5e22e,_0x3ddcd1=JSON[_0x257965(0x127)](lastBalances[_0x257965(0x122)]);_0x3ddcd1[_0x257965(0x193)]((_0x274f00,_0x2f3c04)=>_0x274f00[_0x257965(0x1ef)]>_0x2f3c04[_0x257965(0x1ef)]?0x1:_0x2f3c04[_0x257965(0x1ef)]>_0x274f00[_0x257965(0x1ef)]?-0x1:0x0),_0x3ddcd1[_0x257965(0x21b)](_0x1c21e1=>{const _0x26cc06=_0x257965;let _0x257b9e={'coin':_0x1c21e1['coin'],'number':_0x1c21e1[_0x26cc06(0x1ff)],'price':_0x1c21e1['last']};_0x58e0fb['push'](_0x257b9e);});const _0x309307=await getFiat();_0xb5e22e={'date':lastBalances[_0x257965(0x16a)]['split']('\x20')[0x0],'eur':_0x309307[_0x257965(0x190)],'usd':_0x309307[_0x257965(0xf5)],'coins':_0x58e0fb};let _0x33aa26=dbPerformance[_0x257965(0x1ec)](_0x257965(0xf7))[_0x257965(0x162)]({'date':_0xb5e22e[_0x257965(0x258)]})[_0x257965(0xdc)]();_0x33aa26?_0xb5e22e[_0x257965(0x258)]!=config[_0x257965(0xe4)]&&dbPerformance[_0x257965(0x1ec)]('data')[_0x257965(0x162)]({'date':_0xb5e22e['date']})['assign'](_0xb5e22e)[_0x257965(0x114)]():dbPerformance[_0x257965(0x1ec)](_0x257965(0xf7))[_0x257965(0x1dd)](_0xb5e22e)[_0x257965(0x114)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x292067=_0x6b8927;let _0x317fec=[];if(dbPerformance[_0x292067(0x160)](_0x292067(0xf7))[_0x292067(0xdc)]()){let _0x4fc749=dbPerformance[_0x292067(0x1ec)](_0x292067(0xf7))['cloneDeep']()[_0x292067(0x20d)](_0x1b7cd8=>{const _0xa82df1=_0x292067;if(_0x1b7cd8[_0xa82df1(0x167)][_0xa82df1(0x1a4)]==0x0)return![];else return!![];})[_0x292067(0x172)](_0x292067(0x258))[_0x292067(0xdc)](),_0x35ca54=[...config[_0x292067(0xe6)]];_0x35ca54[_0x292067(0x193)]((_0x19ef72,_0x4d7525)=>_0x19ef72[_0x292067(0x258)]>_0x4d7525[_0x292067(0x258)]?-0x1:_0x4d7525[_0x292067(0x258)]>_0x19ef72['date']?0x1:0x0);let _0x6a3cc5=0x1,_0x4e3b43=[],_0x1f093a=0x0;_0x4fc749[_0x292067(0x256)]()[_0x292067(0x121)]()['forEach']((_0x5377fb,_0x44c5c4)=>{const _0x5bb18c=_0x292067;if(_0x35ca54[_0x1f093a]){if(_0x4fc749[_0x4fc749[_0x5bb18c(0x1a4)]-_0x44c5c4]&&_0x35ca54[_0x1f093a][_0x5bb18c(0x258)]==_0x4fc749[_0x4fc749[_0x5bb18c(0x1a4)]-_0x44c5c4]['date']){if(_0x44c5c4<_0x4fc749[_0x5bb18c(0x1a4)]){let _0xd85706=0x0,_0x490971=0x0;_0x4fc749[_0x4fc749['length']-_0x44c5c4]['coins'][_0x5bb18c(0x21b)](_0x54744b=>{_0x490971+=_0x54744b['number']*_0x54744b['price'];}),_0x35ca54[_0x1f093a][_0x5bb18c(0xe8)][_0x5bb18c(0x21b)](_0x1d47ff=>{const _0x1232b1=_0x5bb18c;_0xd85706+=_0x1d47ff[_0x1232b1(0x1ff)]*_0x1d47ff[_0x1232b1(0x197)];}),_0x6a3cc5*=_0xd85706/(_0x490971-_0xd85706)+0x1;}_0x1f093a++;}}let _0xbe4400=0x0;_0x5377fb[_0x5bb18c(0x167)][_0x5bb18c(0x21b)](_0x4020f3=>{const _0x66ca23=_0x5bb18c;_0xbe4400+=_0x4020f3['number']*_0x4020f3[_0x66ca23(0x197)];}),_0x4e3b43[_0x4fc749[_0x5bb18c(0x1a4)]-_0x44c5c4-0x1]=_0xbe4400*(_0x6a3cc5-0x1);});let _0x24a078=[];_0x35ca54=[...config['liquidity']]||[];let _0x5e205c=0x0;_0x1f093a=0x0,_0x4fc749['forEach']((_0x48271d,_0x46ec81)=>{const _0x25f48e=_0x292067;if(_0x35ca54[_0x1f093a]){const _0x2e1d5c=fns[_0x25f48e(0x127)](_0x35ca54[_0x1f093a][_0x25f48e(0x258)],_0x25f48e(0x118),new Date()),_0x5f4fb0=fns[_0x25f48e(0x127)](_0x48271d[_0x25f48e(0x258)],_0x25f48e(0x118),new Date());if(fns['isEqual'](_0x2e1d5c,_0x5f4fb0)){let _0x2fabe5=0x0;_0x35ca54[_0x1f093a]['changes'][_0x25f48e(0x21b)](_0x5e821b=>{const _0x58c0d4=_0x25f48e;!_0x24a078[_0x5e821b[_0x58c0d4(0x1ef)]]?_0x24a078[_0x5e821b[_0x58c0d4(0x1ef)]]=_0x5e821b[_0x58c0d4(0x1ff)]:(_0x2fabe5=_0x24a078[_0x5e821b[_0x58c0d4(0x1ef)]],_0x24a078[_0x5e821b['coin']]+=_0x5e821b['number']);const _0x5a2d71=_0x48271d[_0x58c0d4(0x167)][_0x58c0d4(0x162)](_0x455878=>_0x455878['coin']==_0x5e821b['coin']);(!_0x5a2d71||_0x5a2d71[_0x58c0d4(0x1ff)]==0x0)&&(_0x5e205c+=(-_0x5e821b[_0x58c0d4(0x1ff)]-_0x2fabe5)*_0x5e821b[_0x58c0d4(0x197)]);}),_0x1f093a++;}}_0x48271d[_0x25f48e(0x167)]['forEach']((_0x545862,_0x300b52)=>{const _0x2f73ed=_0x25f48e;_0x24a078[_0x545862[_0x2f73ed(0x1ef)]]&&(_0x545862[_0x2f73ed(0x119)]=_0x24a078[_0x545862[_0x2f73ed(0x1ef)]]);}),_0x317fec['push']({'date':_0x48271d['date'],'eur':_0x48271d['eur'],'usd':_0x48271d[_0x25f48e(0xf5)],'offset':_0x4e3b43[_0x46ec81],'netoffset':_0x5e205c,'coins':_0x48271d[_0x25f48e(0x167)]});});}return _0x317fec;}function emitPerformance(_0x2da123){const _0x53174e=_0x6b8927;_0x2da123[_0x53174e(0x1a4)]!==0x0?(proxyEmit('performance',_0x2da123),lastPerformanceEmitted=getDate()):proxyEmit(_0x53174e(0xcf),[]);}function getPerf(_0x4972be,_0x427c33){const _0x1b98f4=_0x6b8927;let _0x44fd36=0x0,_0x553829=0x0,_0x896679=0x0;_0x4972be[_0x1b98f4(0x167)][_0x1b98f4(0x21b)](_0x4403cd=>{const _0x9a363a=_0x1b98f4;_0x44fd36+=_0x4403cd[_0x9a363a(0x1ff)]*_0x4403cd['price'];});_0x427c33&&(_0x44fd36+=_0x4972be['offset']);if(config[_0x1b98f4(0x1d0)]==='BTC'||config[_0x1b98f4(0x1d0)]===_0x1b98f4(0x218)||config[_0x1b98f4(0x1d0)]===_0x1b98f4(0x1e9))_0x553829=_0x44fd36*_0x4972be[_0x1b98f4(0x190)],_0x896679=_0x44fd36*_0x4972be[_0x1b98f4(0xf5)];else{if(usdBasecoins[_0x1b98f4(0x132)](config[_0x1b98f4(0x1d0)]))_0x553829=_0x44fd36*_0x4972be[_0x1b98f4(0x190)]/_0x4972be[_0x1b98f4(0xf5)],_0x896679=_0x44fd36;else config[_0x1b98f4(0x1d0)]===_0x1b98f4(0x213)&&(_0x553829=_0x44fd36,_0x896679=_0x44fd36*_0x4972be['usd']/_0x4972be[_0x1b98f4(0x190)]);}return[_0x44fd36,_0x553829,_0x896679];}function getKPIs(_0x119d05,_0x54ad76=_0x6b8927(0x213)){const _0x578d=_0x6b8927,_0x133171=config[_0x578d(0x1d0)],_0x5285b7=lastBalances,_0x8ce8e2=currentCoins,_0x596079=getNormalizedPerformance(),_0xaec554=_0x119d05==='basecoin'?_0x133171:_0x119d05===_0x578d(0x219)||_0x119d05===_0x578d(0xd6)?_0x54ad76:_0x578d(0xd0)+_0x133171,_0x543968=_0x119d05===_0x578d(0xf9)?_0x578d(0x13e):_0x119d05==='net-fiat'?_0x578d(0x13e):_0xaec554+'\x20value',_0x3aba15=_0x119d05==='net-basecoin'||_0x119d05==='net-fiat'?_0x578d(0x13e):_0xaec554+_0x578d(0x1a9);let _0x4ee64a=0x0;_0x8ce8e2[_0x578d(0x21b)](_0x38df2f=>{const _0x1c7ae8=_0x578d;_0x4ee64a+=_0x38df2f[_0x1c7ae8(0x1ff)]*_0x38df2f['last'];});if(_0x119d05===_0x578d(0x219)||_0x119d05===_0x578d(0xd6)){if(_0x133171==='BTC'||_0x133171==='ETH'||_0x133171===_0x578d(0x1e9))_0x4ee64a=_0x4ee64a*(_0x54ad76===_0x578d(0x213)?_0x5285b7[_0x578d(0x190)]:_0x5285b7[_0x578d(0xf5)]);else{if(usdBasecoins[_0x578d(0x132)](_0x133171))_0x4ee64a=_0x4ee64a*(_0x54ad76===_0x578d(0x213)?_0x5285b7[_0x578d(0x190)]/_0x5285b7[_0x578d(0xf5)]:0x1);else _0x133171===_0x578d(0x213)&&(_0x4ee64a=_0x4ee64a*(_0x54ad76===_0x578d(0x213)?0x1:_0x5285b7[_0x578d(0xf5)]/_0x5285b7[_0x578d(0x190)]));}}let _0x158a75;if(_0x4ee64a!==0x0){if(_0x119d05===_0x578d(0x1d0))_0x158a75=(_0x4ee64a/startingBalances[_0x578d(0x1d0)]-0x1)*0x64;else{if(_0x54ad76===_0x578d(0x213))_0x158a75=(_0x4ee64a/startingBalances['eur']-0x1)*0x64;else _0x158a75=(_0x4ee64a/startingBalances[_0x578d(0xf5)]-0x1)*0x64;}let _0x2f001e=0x0;if(startingBalances[_0x578d(0x167)])_0x8ce8e2['forEach'](_0x538847=>{const _0x14727e=_0x578d;let _0x51411b=startingBalances[_0x14727e(0x167)][_0x14727e(0x162)](_0x5cc113=>_0x5cc113[_0x14727e(0x1ef)]===_0x538847[_0x14727e(0x1ef)]);if(_0x51411b&&_0x51411b[_0x14727e(0x1ef)]&&_0x538847['number']!==0x0)_0x2f001e+=_0x51411b[_0x14727e(0x1ff)]*_0x538847[_0x14727e(0x1c3)];});let _0x1ef186=0x0;if(_0x596079[_0x578d(0x1a4)]!==0x0){let _0x46c3f=_0x596079[_0x596079[_0x578d(0x1a4)]-0x1];_0x1ef186=_0x46c3f[_0x578d(0x16f)];}_0x2f001e-=_0x1ef186;_0x119d05===_0x578d(0xf9)&&(_0x158a75=(_0x4ee64a-_0x2f001e)/startingBalances[_0x578d(0x1d0)]*0x64,_0x4ee64a=_0x4ee64a-_0x2f001e);if(_0x119d05===_0x578d(0xd6)){let _0x11518b=_0x54ad76==='EUR'?startingBalances[_0x578d(0x190)]:startingBalances[_0x578d(0xf5)];if(_0x133171===_0x578d(0x22a)||_0x133171===_0x578d(0x218)||_0x133171===_0x578d(0x1e9))_0x2f001e=_0x54ad76==='EUR'?_0x2f001e*_0x5285b7[_0x578d(0x190)]:_0x2f001e*_0x5285b7[_0x578d(0xf5)];else{if(usdBasecoins[_0x578d(0x132)](_0x133171))_0x2f001e=_0x54ad76===_0x578d(0x213)?_0x2f001e*_0x5285b7[_0x578d(0x190)]/_0x5285b7[_0x578d(0xf5)]:_0x2f001e;else _0x133171==='EUR'&&(_0x2f001e=_0x54ad76===_0x578d(0x213)?_0x2f001e:_0x2f001e*_0x5285b7[_0x578d(0xf5)]/_0x5285b7['eur']);}_0x158a75=(_0x4ee64a-_0x2f001e)/_0x11518b*0x64,_0x4ee64a=_0x4ee64a-_0x2f001e;}if(_0x158a75){if(_0x158a75<0x64)_0x158a75=_0x158a75[_0x578d(0x23c)](0x2);else{if(_0x158a75<0x3e8)_0x158a75=_0x158a75[_0x578d(0x23c)](0x1);else _0x158a75=_0x158a75[_0x578d(0x23c)](0x0);}}else _0x158a75=Number('0')['toFixed'](0x2);if(_0x4ee64a){if(Math['abs'](_0x4ee64a)<0.000001)_0x4ee64a=_0x4ee64a[_0x578d(0x23c)](0x2);else{if(Math['abs'](_0x4ee64a)<0.1)_0x4ee64a=_0x4ee64a['toFixed'](0x6);else{if(Math[_0x578d(0x180)](_0x4ee64a)<0x1)_0x4ee64a=_0x4ee64a[_0x578d(0x23c)](0x5);else{if(Math[_0x578d(0x180)](_0x4ee64a)<0xa)_0x4ee64a=_0x4ee64a[_0x578d(0x23c)](0x4);else{if(Math['abs'](_0x4ee64a)<0x64)_0x4ee64a=_0x4ee64a[_0x578d(0x23c)](0x3);else{if(Math[_0x578d(0x180)](_0x4ee64a)<0x3e8)_0x4ee64a=_0x4ee64a[_0x578d(0x23c)](0x2);else _0x4ee64a=_0x4ee64a['toFixed'](0x2);}}}}}}else _0x4ee64a=Number('0')[_0x578d(0x23c)](0x2);}else _0x158a75=Number('0')[_0x578d(0x23c)](0x2);return{'value':_0x4ee64a,'change':_0x158a75,'leftTxt':_0x543968,'rightTxt':_0x3aba15};}function _0x345f(_0x3fab97,_0x358508){const _0x539eca=_0x4711();return _0x345f=function(_0x400898,_0x4e0283){_0x400898=_0x400898-0xcd;let _0x4711d0=_0x539eca[_0x400898];return _0x4711d0;},_0x345f(_0x3fab97,_0x358508);}async function getStartingBalances(_0x3fffc1,_0x2a6a60=!![]){const _0x374da0=_0x6b8927;if(_0x3fffc1[_0x374da0(0x1a4)]!==0x0){const [_0x736515,_0x39fce6,_0x55b587]=getPerf(_0x3fffc1[0x0],!![]);let _0x3b0f6b=[];config[_0x374da0(0x122)]['forEach'](_0x10b613=>{const _0x3c2a98=_0x374da0;let _0x4be7f0=0x0,_0x30f33c;config[_0x3c2a98(0xe6)]['forEach'](_0x4cd6a2=>{const _0x34cdf1=_0x3c2a98;let _0x98cfd7=_0x4cd6a2[_0x34cdf1(0xe8)][_0x34cdf1(0x162)](_0x5bbd0c=>_0x5bbd0c[_0x34cdf1(0x1ef)]==_0x10b613[_0x34cdf1(0x1ef)]);if(_0x98cfd7){_0x4be7f0+=_0x98cfd7[_0x34cdf1(0x1ff)];if(!_0x30f33c)_0x30f33c=_0x98cfd7[_0x34cdf1(0x197)];}}),_0x3b0f6b[_0x3c2a98(0x1dd)]({'coin':_0x10b613[_0x3c2a98(0x1ef)],'number':_0x4be7f0,'initialprice':_0x30f33c});});const _0x23acbf={'basecoin':_0x736515,'eur':_0x39fce6,'usd':_0x55b587,'coins':_0x3b0f6b};if(_0x2a6a60)proxyEmit(_0x374da0(0x24d),_0x23acbf);startingBalances=_0x23acbf;}}function headlessMode(_0x2aed92){const _0x1304c7=_0x6b8927;let _0x34a308=_0x2aed92[_0x1304c7(0x122)],_0x207b24=_0x2aed92[_0x1304c7(0x187)],_0x51ff09=[];for(let _0x477264 of _0x34a308){if(_0x477264[_0x1304c7(0x1ef)]!=config[_0x1304c7(0x1d0)]){if(_0x477264[_0x1304c7(0x1d4)]>=_0x207b24/0x64){if(_0x477264[_0x1304c7(0xd9)])_0x51ff09[_0x1304c7(0x1dd)](_0x477264);}else{if(_0x477264[_0x1304c7(0x1d4)]<=-_0x207b24/0x64){if(_0x477264[_0x1304c7(0xd9)])_0x51ff09['push'](_0x477264);}}}}_0x51ff09['length']>0x0&&(lockOrders==ORDERS[_0x1304c7(0x1c0)]&&!coolingDown&&_0x51ff09[_0x1304c7(0x21b)](_0x39a263=>{const _0x29e442=_0x1304c7;logger['debug'](_0x29e442(0x223)+_0x39a263[_0x29e442(0x1ef)]+'\x20'+_0x39a263[_0x29e442(0x1ff)]+'\x20'+_0x39a263['last']+'\x20'+_0x39a263[_0x29e442(0x1a1)]+'%\x20'+_0x39a263[_0x29e442(0x1cb)]+'%\x20'+(0x64*_0x39a263[_0x29e442(0x1d4)])[_0x29e442(0x23c)](0x2)+_0x29e442(0x251)+_0x207b24[_0x29e442(0x23c)](0x2)+'%)');}),placeOrder(_0x51ff09));}function notifyBalance(_0xb56ba5){const _0xd7fbfa=_0x6b8927;let _0x526ce0=_0xb56ba5['portfolio'],_0x23fcc2=_0xb56ba5[_0xd7fbfa(0x187)],_0x131575=[];for(let _0x48d79b of _0x526ce0){if(_0x48d79b[_0xd7fbfa(0x1ef)]!=config[_0xd7fbfa(0x1d0)]){if(_0x48d79b[_0xd7fbfa(0x1d4)]>=_0x23fcc2/0x64){if(_0x48d79b['valid'])_0x131575[_0xd7fbfa(0x1dd)](_0x48d79b);}else{if(_0x48d79b['delta']<=-_0x23fcc2/0x64){if(_0x48d79b[_0xd7fbfa(0xd9)])_0x131575[_0xd7fbfa(0x1dd)](_0x48d79b);}}}}if(_0x131575[_0xd7fbfa(0x1a4)]>0x0){let _0xae1465=_0x131575[_0xd7fbfa(0x1c9)](_0x345190=>_0x345190['coin']);_0xae1465[_0xd7fbfa(0x193)]();let _0x14f218=_0xae1465[_0xd7fbfa(0x11b)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0xd7fbfa(0x1f6));lastCoinsToBalance=_0x14f218;}}function symbolToCoin(_0x516b54){const _0x121e73=_0x6b8927;let _0x25cb32;if(_0x516b54[_0x121e73(0x132)]('/'+config['basecoin']))_0x25cb32=_0x516b54[_0x121e73(0x26b)]('/'+config['basecoin'],'');if(_0x516b54[_0x121e73(0x132)](config['basecoin']+'/'))_0x25cb32=_0x516b54[_0x121e73(0x26b)](config[_0x121e73(0x1d0)]+'/','');return _0x25cb32;}async function unlockOrders(){const _0x2b1fa2=_0x6b8927;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2b1fa2(0x1f5)]){logger[_0x2b1fa2(0x245)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3c918f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3c918f,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x2b1fa2(0x1c0)],logger[_0x2b1fa2(0x245)](_0x2b1fa2(0x19c));}}async function validateOrders(_0x3d60d6){const _0x27a280=_0x6b8927;if(_0x3d60d6)validateOrdersState=_0x3d60d6;logger[_0x27a280(0x245)](_0x27a280(0x24c)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x27a280(0x1bf):_0x27a280(0x18a)));let _0x58d13c=[],_0x19dbb3=config[_0x27a280(0x1bc)]==_0x27a280(0x15d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x27a280(0x202)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x27a280(0x1f5)])return;logger[_0x27a280(0x245)](_0x27a280(0x1d3)+validateOrdersState),lastOrders[_0x27a280(0x21b)](_0x54f6e8=>{const _0xda695e=_0x27a280;let _0x1767e5=![];_0x54f6e8[_0xda695e(0x173)]>0x0&&(_0x1767e5=!![]),_0x58d13c['push'](_0x1767e5),_0x1767e5&&config[_0xda695e(0x1bc)]!='market'&&logHistory(_0xda695e(0x12f),_0xda695e(0x234)+_0x54f6e8['symbol']+'\x20'+_0x54f6e8['side']+'\x20#'+formatResult(_0x54f6e8[_0xda695e(0x173)],0x8)+'\x20@'+formatResult(_0x54f6e8['price'],0x8));}),_0x58d13c[_0x27a280(0x21b)]((_0x17bd76,_0x51cdb7)=>{if(_0x17bd76)lastOrders['splice'](_0x51cdb7,0x1);}),persistOpenOrders(lastOrders);const _0x5ef4a5=coolingDown?_0x27a280(0x149):'balancing\x20resumed';if(validateOrdersState==_0x27a280(0x119)){validateOrdersState=_0x27a280(0x201);if(_0x58d13c[_0x27a280(0x132)](![])){if(config[_0x27a280(0x1bc)]==_0x27a280(0x15d)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x58d13c[_0x27a280(0x132)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x27a280(0x15d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x27a280(0xe3))_0x58d13c[_0x27a280(0x132)](![])&&(config[_0x27a280(0x1bc)]==_0x27a280(0x15d)?logHistory('success',_0x27a280(0x18b)+Math[_0x27a280(0x1ba)](_0x19dbb3*validateOrderInterval/0xea60)+_0x27a280(0x217)+_0x5ef4a5):(await cancelOrders(),logHistory('success',_0x27a280(0x1fc)+Math[_0x27a280(0x1ba)](_0x19dbb3*validateOrderInterval/0xea60)+_0x27a280(0x217)+_0x5ef4a5))),await unlockOrders();else{if(validateOrdersState==_0x27a280(0x133)){if(config[_0x27a280(0x1bc)]!='market')logHistory(_0x27a280(0xfa),'No\x20more\x20open\x20orders\x20-\x20'+_0x5ef4a5);await unlockOrders();}}}}}async function cancelOrders(){const _0xd7ff97=_0x6b8927;lastOrders[_0xd7ff97(0x21b)](async _0x3c7efe=>{const _0x306690=_0xd7ff97;try{const _0x56b6b8=await exchange[_0x306690(0x104)](_0x3c7efe[_0x306690(0x185)],_0x3c7efe[_0x306690(0xee)]);}catch(_0x3d5b2b){if(_0x3d5b2b['toString']()['includes'](_0x306690(0x1f9))){}else await handleError(_0x3d5b2b,_0x306690(0x195));}});}async function initCoinResults(_0x50b8e5){const _0x146e5f=_0x6b8927;_0x50b8e5?logger[_0x146e5f(0x245)]('Resetting\x20coin\x20results:\x20'+_0x50b8e5):logger['debug'](_0x146e5f(0x142)),config[_0x146e5f(0x122)][_0x146e5f(0x21b)](_0x17e4da=>{const _0x43c60e=_0x146e5f;if(!_0x17e4da[_0x43c60e(0x243)]&&_0x17e4da['coin']!=config[_0x43c60e(0x1d0)]){const _0x16e989=currentCoins['find'](_0x14c809=>_0x14c809[_0x43c60e(0x1ef)]==_0x17e4da[_0x43c60e(0x1ef)]),_0x2ebdbc=global['ticker'][noslash(_0x17e4da[_0x43c60e(0xee)])];let _0x1db646=_0x16e989?_0x16e989[_0x43c60e(0x1ff)]:null,_0x3717ec=_0x17e4da['reverse']?0x1/_0x2ebdbc:_0x2ebdbc,_0x1f1cf2;config[_0x43c60e(0xe6)][_0x43c60e(0x21b)](_0x1cc24f=>{const _0x13dcf5=_0x43c60e;!_0x1f1cf2&&(_0x1f1cf2=_0x1cc24f['changes'][_0x13dcf5(0x162)](_0x57ea2e=>_0x57ea2e[_0x13dcf5(0x1ef)]==_0x17e4da[_0x13dcf5(0x1ef)]),_0x1f1cf2&&(_0x1db646=_0x1f1cf2['number'],_0x3717ec=_0x1f1cf2['price']));});let _0x4578b1=dbCoinResults[_0x43c60e(0x1ec)](_0x43c60e(0x167))['find']({'coin':_0x17e4da[_0x43c60e(0x1ef)]})['value']();if(!_0x4578b1){const _0x4bae0e={'coin':_0x17e4da[_0x43c60e(0x1ef)],'number':_0x1db646,'breakeven':_0x3717ec,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x43c60e(0x1ec)](_0x43c60e(0x167))[_0x43c60e(0x1dd)](_0x4bae0e)[_0x43c60e(0x114)]();}else{if(_0x50b8e5&&_0x17e4da[_0x43c60e(0x1ef)]==_0x50b8e5){const _0x2e2043={'coin':_0x17e4da[_0x43c60e(0x1ef)],'number':_0x1db646,'breakeven':_0x3717ec,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x43c60e(0x1ec)](_0x43c60e(0x167))[_0x43c60e(0x162)]({'coin':_0x17e4da[_0x43c60e(0x1ef)]})['assign'](_0x2e2043)[_0x43c60e(0x114)]();}}}});}async function updateCoinResults(_0x4cc2cd,_0x2f38ff=![]){const _0x288273=_0x6b8927;let _0xbfb89c,_0x3ca5fe,_0x4b478b,_0x2c5dd2,_0x2f2d6d,_0x2868e4,_0x2394c4=dbCoinResults[_0x288273(0x1ec)](_0x288273(0x167))[_0x288273(0x162)]({'coin':_0x4cc2cd[_0x288273(0x1ef)]})[_0x288273(0xdc)](),_0x5f4c8b=![];_0x2394c4&&Object[_0x288273(0x23b)](_0x2394c4)['forEach'](([_0x34d4a3,_0x34a8b7])=>{if(_0x34a8b7==null)_0x5f4c8b=!![];});(!_0x2394c4||_0x5f4c8b)&&(await initCoinResults(_0x4cc2cd[_0x288273(0x1ef)]),_0x2394c4=dbCoinResults['get'](_0x288273(0x167))[_0x288273(0x162)]({'coin':_0x4cc2cd[_0x288273(0x1ef)]})['value']());_0x4cc2cd['reverse']&&(_0x2868e4={'filled':_0x4cc2cd[_0x288273(0x173)]*_0x4cc2cd[_0x288273(0x197)],'amount':_0x4cc2cd[_0x288273(0x173)]*_0x4cc2cd[_0x288273(0x197)],'side':_0x4cc2cd[_0x288273(0x165)]==_0x288273(0x1cd)?_0x288273(0x1bb):_0x288273(0x1cd),'price':0x1/_0x4cc2cd[_0x288273(0x197)]},_0x4cc2cd={..._0x4cc2cd,..._0x2868e4});_0x2f38ff?_0x3ca5fe=_0x4cc2cd[_0x288273(0x165)]=='buy'?_0x2394c4[_0x288273(0x1ff)]+_0x4cc2cd['filled']:_0x2394c4[_0x288273(0x1ff)]-_0x4cc2cd[_0x288273(0x173)]:_0x3ca5fe=await getCoinNumber(_0x4cc2cd['coin']);if(_0x4cc2cd[_0x288273(0x131)]&&_0x4cc2cd[_0x288273(0x131)][_0x288273(0x10b)]==config['basecoin'])_0xbfb89c=_0x4cc2cd[_0x288273(0x131)]['cost'];else{if(_0x4cc2cd[_0x288273(0x131)]&&_0x4cc2cd[_0x288273(0x131)]['currency']=='BNB'&&!_0x2f38ff&&config['basecoin']!='PAXG')_0xbfb89c=_0x4cc2cd[_0x288273(0x131)][_0x288273(0x266)]*global[_0x288273(0x10c)][_0x288273(0x231)+config[_0x288273(0x1d0)]];else _0xbfb89c=defaultFee*_0x4cc2cd[_0x288273(0x173)]*_0x4cc2cd[_0x288273(0x197)];}_0x4cc2cd[_0x288273(0x165)]==_0x288273(0x1bb)?(_0x4b478b=_0x3ca5fe!=0x0?(_0x2394c4[_0x288273(0x228)]*_0x2394c4[_0x288273(0x1ff)]+_0x4cc2cd[_0x288273(0x197)]*(_0x3ca5fe-_0x2394c4['number'])+_0xbfb89c)/_0x3ca5fe:0x0,_0x2c5dd2=_0x2394c4[_0x288273(0x129)]):(_0x4b478b=_0x3ca5fe!=0x0?(_0x2394c4[_0x288273(0x228)]*_0x2394c4['number']-_0x4cc2cd['price']*(_0x2394c4[_0x288273(0x1ff)]-_0x3ca5fe)+_0xbfb89c)/_0x3ca5fe:0x0,_0x2c5dd2=_0x2394c4[_0x288273(0x129)]+(_0x4cc2cd[_0x288273(0x197)]-_0x2394c4['breakeven'])*_0x4cc2cd[_0x288273(0x173)]);_0x2f2d6d=(_0x4cc2cd['price']-_0x4b478b-_0xbfb89c/_0x4cc2cd['filled'])*_0x3ca5fe;let _0x5b8b2d={'coin':_0x4cc2cd['coin'],'number':_0x3ca5fe,'breakeven':formatResult(_0x4b478b,0x8),'realized':formatResult(_0x2c5dd2,0x8),'unrealized':formatResult(_0x2f2d6d,0x8),'fees':formatResult(_0x2394c4['fees']+_0xbfb89c,0x8),'sells':_0x4cc2cd[_0x288273(0x165)]==_0x288273(0x1cd)?_0x2394c4[_0x288273(0x137)]+0x1:_0x2394c4[_0x288273(0x137)],'buys':_0x4cc2cd[_0x288273(0x165)]==_0x288273(0x1bb)?_0x2394c4[_0x288273(0x236)]+0x1:_0x2394c4[_0x288273(0x236)]};dbCoinResults['get'](_0x288273(0x167))[_0x288273(0x162)]({'coin':_0x4cc2cd[_0x288273(0x1ef)]})['assign'](_0x5b8b2d)[_0x288273(0x114)]();if(!_0x2f38ff){if(_0x4cc2cd[_0x288273(0x131)]&&_0x4cc2cd[_0x288273(0x131)][_0x288273(0x10b)]==_0x288273(0x231)){const _0x3dd117=currentCoins[_0x288273(0x162)](_0x591133=>_0x591133['coin']==_0x288273(0x231));if(_0x3dd117){let _0x37fa62=dbCoinResults[_0x288273(0x1ec)](_0x288273(0x167))[_0x288273(0x162)]({'coin':'BNB'})[_0x288273(0xdc)]();_0x5b8b2d={..._0x37fa62,'number':_0x3dd117[_0x288273(0x1ff)]},dbCoinResults[_0x288273(0x1ec)](_0x288273(0x167))[_0x288273(0x162)]({'coin':_0x288273(0x231)})[_0x288273(0x189)](_0x5b8b2d)[_0x288273(0x114)]();}}}}async function placeOrder(_0x44cec8){const _0x186983=_0x6b8927,_0x1708ec=config[_0x186983(0x1bc)]==_0x186983(0x15d)?_0x186983(0x15d):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x186983(0x1f5)],allOrdersPlaced=![],validateOrdersState=_0x186983(0x119);let _0x4fe872=![];lastOrders=[];for(const _0x42c231 of _0x44cec8){let _0x2370a0,_0xc12d94,_0x7c8710,_0x10eaa7,_0x2bba9e,_0x1fdfda=_0x42c231[_0x186983(0xee)];try{const _0x69d2fe=await exchange[_0x186983(0x242)](_0x1fdfda);_0x2370a0=_0x42c231[_0x186983(0x121)]?0x1/_0x42c231[_0x186983(0x1c3)]:_0x42c231[_0x186983(0x1c3)],_0xc12d94=_0x69d2fe[_0x186983(0x12e)],_0x7c8710=_0x69d2fe['ask'];_0x42c231[_0x186983(0x121)]?(_0x10eaa7=_0x42c231[_0x186983(0x165)]==_0x186983(0x1bb)?_0x186983(0x1cd):'buy',_0x2bba9e=Math[_0x186983(0x180)](_0x42c231['trade'])/_0x2370a0):(_0x10eaa7=_0x42c231[_0x186983(0x165)],_0x2bba9e=Math['abs'](_0x42c231[_0x186983(0x215)]));_0x1708ec==_0x186983(0x116)&&(config['ordertype']==_0x186983(0x1e0)&&(_0x2370a0=_0x10eaa7==_0x186983(0x1bb)?_0xc12d94:_0x7c8710),config[_0x186983(0x1bc)]==_0x186983(0x1c1)&&(_0x2370a0=_0x10eaa7==_0x186983(0x1bb)?_0x7c8710:_0xc12d94));_0x2bba9e=formatResult(_0x2bba9e,0x8),_0x2370a0=formatResult(_0x2370a0,0x8);const _0x44c4d6=_0x10eaa7=='sell'?config[_0x186983(0x12d)]?String[_0x186983(0x102)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x186983(0x13d)])+'\x20':'',_0x393077=_0x1708ec=='market'?'Market':config[_0x186983(0x1bc)]==_0x186983(0x1e0)?_0x186983(0xfe):_0x186983(0x16d),_0x47cdd2=(Math[_0x186983(0x181)](Math[_0x186983(0x12b)]()*0x35a4e900)+0x5f5e100)[_0x186983(0x20a)]();lastOrders['push']({'customId':_0x47cdd2,'symbol':_0x1fdfda,'coin':_0x42c231['coin'],'amount':_0x2bba9e,'price':_0x2370a0,'side':_0x10eaa7,'reverse':_0x42c231[_0x186983(0x121)],'filled':0x0});if(_0x1708ec==_0x186983(0x15d))logHistory('order',''+_0x44c4d6+_0x393077+_0x186983(0x120)+_0x1fdfda+'\x20'+_0x10eaa7+'\x20#'+formatResult(_0x2bba9e,0x8)+'\x20@'+formatResult(_0x2370a0,0x8));else logHistory('order',''+_0x44c4d6+_0x393077+_0x186983(0x120)+_0x1fdfda+'\x20'+_0x10eaa7+'\x20#'+formatResult(_0x2bba9e,0x8)+'\x20@'+formatResult(_0x2370a0,0x8));let _0x4cface;_0x1708ec==_0x186983(0x15d)?_0x10eaa7==_0x186983(0x1bb)&&[_0x186983(0x24f),_0x186983(0x13c),_0x186983(0x141),_0x186983(0x136),_0x186983(0x18f)]['includes'](config['exchange'])?_0x4cface=await exchange[_0x186983(0x15f)](_0x1fdfda,_0x1708ec,_0x10eaa7,_0x2bba9e,_0x2370a0):_0x4cface=await exchange['createOrder'](_0x1fdfda,_0x1708ec,_0x10eaa7,_0x2bba9e,undefined):_0x4cface=await exchange['createOrder'](_0x1fdfda,_0x1708ec,_0x10eaa7,_0x2bba9e,_0x2370a0);logger[_0x186983(0x245)]('ID:\x20'+_0x4cface['id']+_0x186983(0x25f)+_0x47cdd2);const _0x4ee6cd=lastOrders[_0x186983(0x1a4)]-0x1;if(_0x4ee6cd>=0x0&&lastOrders[_0x4ee6cd][_0x186983(0x1c5)]==_0x47cdd2){lastOrders[_0x4ee6cd]['orderId']=_0x4cface['id'];if(_0x4cface[_0x186983(0x1b9)])lastOrders[_0x4ee6cd][_0x186983(0x1b9)]=_0x4cface[_0x186983(0x1b9)];if(_0x4cface[_0x186983(0x197)])lastOrders[_0x4ee6cd]['price']=_0x4cface[_0x186983(0x197)];lastOrders[_0x4ee6cd][_0x186983(0x131)]=_0x4cface[_0x186983(0x131)];}if(config[_0x186983(0x135)]!=0x0){let _0x1e040a=null;if(cooldownTracker[_0x186983(0x1a4)]==config[_0x186983(0x135)]-0x1)_0x1e040a=cooldownTracker['shift']();const _0x2cd9f2=getTimeStamp();cooldownTracker[_0x186983(0x1dd)](_0x2cd9f2);if(_0x1e040a){const _0x1604a6=fns[_0x186983(0x13f)](new Date(_0x2cd9f2),new Date(_0x1e040a));if(_0x1604a6<cooldownInterval){logHistory(_0x186983(0xde),_0x186983(0x1e7)+config[_0x186983(0x135)]+_0x186983(0x17c)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x3224d2){if(_0x3224d2[_0x186983(0x20a)]()[_0x186983(0x132)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x29fd42=>_0x29fd42['symbol']!=_0x1fdfda),logHistory(_0x186983(0xde),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1fdfda),_0x4fe872=!![];else{if(_0x3224d2['toString']()['includes'](_0x186983(0x15e)))lastOrders=lastOrders[_0x186983(0x20d)](_0x1305ba=>_0x1305ba[_0x186983(0xee)]!=_0x1fdfda),logHistory(_0x186983(0xde),_0x186983(0x18e)+_0x1fdfda),_0x4fe872=!![];else{if(_0x3224d2[_0x186983(0x20a)]()[_0x186983(0x132)](_0x186983(0x14d)))lastOrders=lastOrders[_0x186983(0x20d)](_0x14e73b=>_0x14e73b[_0x186983(0xee)]!=_0x1fdfda),logHistory(_0x186983(0xde),_0x186983(0x24b)+_0x1fdfda),logger['debug'](_0x3224d2),_0x4fe872=!![];else _0x3224d2['toString']()[_0x186983(0x132)](_0x186983(0x144))?(lastOrders=lastOrders[_0x186983(0x20d)](_0xdadd36=>_0xdadd36[_0x186983(0xee)]!=_0x1fdfda),logHistory(_0x186983(0xde),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1fdfda),_0x4fe872=!![]):(lastOrders=lastOrders[_0x186983(0x20d)](_0xf70d02=>_0xf70d02[_0x186983(0xee)]!=_0x1fdfda),await handleError(_0x3224d2,_0x186983(0x1e8),_0x1fdfda));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x186983(0x1a4)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x21ba8b=config[_0x186983(0x1bc)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3fbfee=_0x186983;validateOrders(_0x3fbfee(0xe3));},_0x21ba8b);}else unlockOrders();_0x4fe872&&config[_0x186983(0x260)]&&(logHistory(_0x186983(0xde),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x186983(0xfa),_0x186983(0x1c6)));}else{if(coolingDown)!config['headless']&&logHistory(_0x186983(0xde),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x186983(0x1c0)]&&(!config[_0x186983(0x260)]&&(config['ordertype']==_0x186983(0x15d)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x186983(0xde),_0x186983(0x175))));}}function persistOpenOrders(_0xf2706c){const _0x4528a0=_0x6b8927,_0x8d82d5={...config,'openOrders':_0xf2706c};let _0x19a9df=dbConfig['get']('bot')[_0x4528a0(0x162)]({'botID':botID})['value']();_0x19a9df&&dbConfig[_0x4528a0(0x1ec)](_0x4528a0(0x168))['find']({'botID':botID})[_0x4528a0(0x189)](_0x8d82d5)[_0x4528a0(0x114)]();}function restoreOrders(){const _0x2660bb=_0x6b8927;let _0x492386;config[_0x2660bb(0x19d)]&&allOpenOrders[_0x2660bb(0x21b)](_0x59d3d9=>{const _0x494776=_0x2660bb,_0xcdd5d6=config['openOrders'][_0x494776(0x162)](_0x5f0422=>_0x5f0422[_0x494776(0x185)]==_0x59d3d9['id']);_0xcdd5d6&&(lastOrders[_0x494776(0x1dd)](_0xcdd5d6),_0x492386=_0x59d3d9[_0x494776(0x163)]);});if(lastOrders[_0x2660bb(0x1a4)]>0x0){lockOrders=ORDERS[_0x2660bb(0x1f5)],validateOrdersState=_0x2660bb(0x201),allOrdersPlaced=!![];const _0x4faf5b=new Date()[_0x2660bb(0x257)](),_0x26bef0=config[_0x2660bb(0x1bc)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2660bb(0x202)]*0x3c*0x3e8;if(_0x492386+_0x26bef0>_0x4faf5b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2ce90a=_0x2660bb;validateOrders(_0x2ce90a(0xe3));},_0x492386+_0x26bef0-_0x4faf5b);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x5f1500=_0x6b8927;if(!coinsLoaded){process[_0x5f1500(0xfd)]({'telegrammsg':_0x5f1500(0x171)},_0x2caae4=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x230ae5='';if(config[_0x5f1500(0x237)])_0x230ae5=_0x5f1500(0x194)+config[_0x5f1500(0x100)]+_0x5f1500(0x1b6);else _0x230ae5=_0x5f1500(0x11e)+botID+_0x5f1500(0x1b6);const _0x8cc4e3=getKPIs('basecoin'),_0x105d6a=getKPIs(_0x5f1500(0x219),config['fiat']),_0x5b9db3=getKPIs(_0x5f1500(0xf9)),_0x165575=getKPIs(_0x5f1500(0xd6),config[_0x5f1500(0x219)]);_0x230ae5+='<pre>',_0x230ae5+=_0x8cc4e3[_0x5f1500(0x205)]+_0x5f1500(0x211)+_0x8cc4e3[_0x5f1500(0xdc)]+'\x0a',_0x230ae5+=_0x8cc4e3[_0x5f1500(0x170)]+':\x20'+_0x8cc4e3['change']+'%\x0a',_0x230ae5+=_0x105d6a[_0x5f1500(0x205)]+_0x5f1500(0x211)+_0x105d6a[_0x5f1500(0xdc)]+'\x0a',_0x230ae5+=_0x105d6a[_0x5f1500(0x170)]+':\x20'+_0x105d6a['change']+'%\x0a',_0x230ae5+=_0x5b9db3[_0x5f1500(0x205)]+':\x20'+_0x5b9db3[_0x5f1500(0xdc)]+'\x20('+config[_0x5f1500(0x1d0)]+')\x0a',_0x230ae5+=_0x5b9db3[_0x5f1500(0x170)]+':\x20'+_0x5b9db3[_0x5f1500(0x1f1)]+_0x5f1500(0x251)+config[_0x5f1500(0x1d0)]+')\x0a',_0x230ae5+=_0x165575['leftTxt']+':\x20'+_0x165575[_0x5f1500(0xdc)]+'\x20('+config['fiat']+')\x0a',_0x230ae5+=_0x165575['rightTxt']+':\x20'+_0x165575['change']+_0x5f1500(0x251)+config[_0x5f1500(0x219)]+')\x0a',_0x230ae5+=_0x5f1500(0xe2),process[_0x5f1500(0xfd)]({'telegrammsg':_0x230ae5},_0x24feb4=>{});}async function sendPortfolioTelegram(){const _0x14f32e=_0x6b8927;if(!coinsLoaded){process[_0x14f32e(0xfd)]({'telegrammsg':_0x14f32e(0x171)},_0x4df06e=>{});return;}let _0x25f28f='';if(config[_0x14f32e(0x237)])_0x25f28f=_0x14f32e(0x194)+config[_0x14f32e(0x100)]+_0x14f32e(0x210);else _0x25f28f=_0x14f32e(0x11e)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x25f28f+=_0x14f32e(0x14f),_0x25f28f+=_0x14f32e(0x265),_0x25f28f+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x25f28f+=_0x14f32e(0x265),currentCoins[_0x14f32e(0x21b)](_0x3c13c9=>{const _0x104540=_0x14f32e;_0x25f28f+=_0x3c13c9[_0x104540(0x1ef)][_0x104540(0x1ad)](0x7)+'|\x20'+formatPad(_0x3c13c9[_0x104540(0x1a1)],0x2,0x6)+'|\x20'+formatPad(_0x3c13c9['target'],0x2,0x6)+'|\x20'+formatPad(_0x3c13c9[_0x104540(0x1d4)]*0x64,0x2,0x6)+'\x0a';}),_0x25f28f+=_0x14f32e(0xe2),process[_0x14f32e(0xfd)]({'telegrammsg':_0x25f28f},_0x2540d7=>{});}function formatPad(_0x3f0e5f,_0x2b1f49,_0x31933b){const _0x16b564=_0x6b8927,_0x280097=formatResultString(_0x3f0e5f,_0x2b1f49);return _0x280097?_0x280097[_0x16b564(0x139)](_0x31933b):''['padStart'](_0x31933b);}function logHistory(_0xaa76dd,_0x2aef93,_0x251706=''){const _0x285b7e=_0x6b8927;logger[_0x285b7e(0x103)](''+_0x2aef93);let _0x294c76={'time':getTimeStamp(),'type':_0xaa76dd,'event':_0x2aef93};dbLogs['get'](_0x285b7e(0x225))[_0x285b7e(0x1dd)](_0x294c76)[_0x285b7e(0x114)]();if(_0x251706=='')_0x251706=_0x2aef93;proxyEmit(_0x285b7e(0x11a),{'log':_0x294c76,'summary':_0x251706}),process[_0x285b7e(0xfd)]({'telegram':{..._0x294c76,'botname':config[_0x285b7e(0x100)],'showname':config['showname']}},_0x135798=>{});}function emitHistory(_0x3a6c99={}){const _0x4bd6c7=_0x6b8927;Object[_0x4bd6c7(0x1ee)](_0x3a6c99)[_0x4bd6c7(0x1a4)]==0x0&&(_0x3a6c99={'type':['order',_0x4bd6c7(0x11a)],'event':'','page':0x1});if(_0x3a6c99[_0x4bd6c7(0x1a6)]['includes']('event'))_0x3a6c99[_0x4bd6c7(0x1a6)][_0x4bd6c7(0x246)](_0x3a6c99['type']['indexOf']('event'),0x1,_0x4bd6c7(0xde),_0x4bd6c7(0x1e4),_0x4bd6c7(0xfa));if(dbLogs['has'](_0x4bd6c7(0x225))[_0x4bd6c7(0xdc)]()){let _0x4f20ac=dbLogs[_0x4bd6c7(0x1ec)](_0x4bd6c7(0x225))[_0x4bd6c7(0x20d)](_0x1cff90=>{const _0x4eff11=_0x4bd6c7;if(_0x3a6c99[_0x4eff11(0x1a6)][_0x4eff11(0x1a4)]==0x0)return![];else return _0x3a6c99['type'][_0x4eff11(0x132)](_0x1cff90[_0x4eff11(0x1a6)]);})[_0x4bd6c7(0x20d)](_0x53a0ce=>{const _0x1d0ccd=_0x4bd6c7;if(_0x3a6c99[_0x1d0ccd(0x11a)]=='')return!![];else return _0x53a0ce[_0x1d0ccd(0x11a)][_0x1d0ccd(0xd8)]()[_0x1d0ccd(0x132)](_0x3a6c99[_0x1d0ccd(0x11a)][_0x1d0ccd(0xd8)]());})[_0x4bd6c7(0x172)]('time'),_0x32df50=_0x4f20ac[_0x4bd6c7(0xdc)]()['length'];_0x4f20ac=_0x4f20ac['reverse']()['slice']((_0x3a6c99[_0x4bd6c7(0x1ab)]-0x1)*logPageSize,_0x3a6c99[_0x4bd6c7(0x1ab)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x4bd6c7(0x179),{'logs':_0x4f20ac,'total':_0x32df50});}else proxyEmit(_0x4bd6c7(0x179),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1e0086){const _0x10bc0c=_0x6b8927;if(dbLogs[_0x10bc0c(0x160)](_0x10bc0c(0x225))[_0x10bc0c(0xdc)]()){const _0x4442e7=dbLogs[_0x10bc0c(0x1ec)](_0x10bc0c(0x225))[_0x10bc0c(0x172)](_0x10bc0c(0x16a))[_0x10bc0c(0x20d)](_0x540c99=>{const _0x57abf2=_0x10bc0c;return _0x540c99[_0x57abf2(0x1a6)]==_0x57abf2(0x12f);})[_0x10bc0c(0xdc)]();dbLogs['get'](_0x10bc0c(0x225))['remove']()[_0x10bc0c(0x114)](),dbLogs[_0x10bc0c(0x1ec)](_0x10bc0c(0x225))[_0x10bc0c(0x189)](_0x4442e7)['write'](),emitHistory(_0x1e0086);}}async function pauseBot(_0xe54a10=pauseBotInterval){const _0x85d3f1=_0x6b8927,_0x5b5412=new Date()[_0x85d3f1(0x257)]();if(!lastErrorShown||_0x5b5412-lastErrorShown>=_0xe54a10){lastErrorShown=_0x5b5412;!lastBotPause?(lastBotPause=_0x5b5412,consecutivePauses=0x1):(_0x5b5412-lastBotPause-_0xe54a10<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x85d3f1(0xfd)]({'stop':'restart'},_0x4aa3de=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x85d3f1(0x257)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0xe54a10),botPaused=![],reset(!![]);}}}async function killBot(){const _0x589a02=_0x6b8927;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x589a02(0x10a)},_0x2a2951=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1fd684,_0x3a68ca){const _0x842241=_0x6b8927;if(botPaused)return;const _0x2a405f=config[_0x842241(0x146)]||_0x842241(0x106);if(_0x3a68ca)logger[_0x842241(0x245)](_0x842241(0x1cc)+_0x3a68ca);const _0x387beb=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x1fd684[_0x842241(0x20a)]()[_0x842241(0x132)](_0x842241(0x112)))logHistory(_0x842241(0xde),_0x2a405f+_0x842241(0x183)),_0x387beb();else{if(_0x1fd684[_0x842241(0x20a)]()[_0x842241(0x132)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x2a405f+_0x842241(0x15b)),_0x387beb();else _0x1fd684[_0x842241(0x20a)]()[_0x842241(0x132)](_0x842241(0x164))?(logHistory(_0x842241(0xde),_0x2a405f+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x842241(0xde),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x387beb()):await handleError(_0x1fd684,null);}}async function handleError(_0x3352a1,_0x15b831,_0x5e9dc3=''){const _0x40d261=_0x6b8927;if(botPaused)return;const _0x20fb82=config['exchange']||_0x40d261(0x106);if(_0x15b831)logger[_0x40d261(0x245)](_0x40d261(0x1cc)+_0x15b831);if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)](_0x40d261(0x1fd)))logHistory(_0x40d261(0xde),_0x20fb82+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x40d261(0x245)]('Error\x20details:',_0x3352a1),await pauseBot();else{if(_0x3352a1['toString']()[_0x40d261(0x132)](_0x40d261(0x20f)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0xea)+pauseBotMsg),logger['debug'](_0x40d261(0x21c),_0x3352a1),await pauseBot();else{if(_0x3352a1[_0x40d261(0x20a)]()['includes'](_0x40d261(0x198))||_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)](_0x40d261(0x247)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x115)+pauseBotMsg),await pauseBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)]('RequestTimeout'))logHistory('error',_0x20fb82+_0x40d261(0x158)+pauseBotMsg),await pauseBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)](_0x40d261(0x159)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x1f3)+pauseBotMsg),await pauseBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0xd8)]()[_0x40d261(0x132)](_0x40d261(0x163))||_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0xd8)]()[_0x40d261(0x132)](_0x40d261(0x186))){const _0x16120b=_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0xd8)]();let _0x2f4087=![];if((config['exchange']==_0x40d261(0x24e)||config[_0x40d261(0x146)]==_0x40d261(0x1dc))&&(_0x16120b[_0x40d261(0x132)](_0x40d261(0x253)['toLowerCase']())||_0x16120b[_0x40d261(0x132)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time'[_0x40d261(0xd8)]())))_0x2f4087=!![];if(config[_0x40d261(0x146)]==_0x40d261(0x22f)&&_0x16120b['includes'](_0x40d261(0x1fe)['toLowerCase']()))_0x2f4087=!![];if(config[_0x40d261(0x146)]=='Bybit'&&_0x16120b['includes'](_0x40d261(0x1de)['toLowerCase']()))_0x2f4087=!![];if(config[_0x40d261(0x146)]==_0x40d261(0x13c)&&_0x16120b['includes']('Invalid\x20ACCESS_TIMESTAMP'[_0x40d261(0xd8)]()))_0x2f4087=!![];if((config[_0x40d261(0x146)]==_0x40d261(0x1da)||config[_0x40d261(0x146)]=='Mexc3')&&_0x16120b[_0x40d261(0x132)]('invalid\x20Request-Time'[_0x40d261(0xd8)]()))_0x2f4087=!![];_0x2f4087?logHistory('error',_0x40d261(0x16c)+pauseBotMsg):logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains'+pauseBotMsg),logger['debug'](_0x40d261(0x21c),_0x3352a1[_0x40d261(0x20a)]()),await pauseBot();}else{if(_0x3352a1['toString']()[_0x40d261(0x132)](_0x40d261(0x11d)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x262)+pauseBotMsg),logger[_0x40d261(0x245)]('Error\x20details:',_0x3352a1),await pauseBot();else{if(_0x3352a1 instanceof ccxt[_0x40d261(0x169)])logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x1b4)+pauseBotMsg),logger[_0x40d261(0x245)](_0x40d261(0x21c),_0x3352a1),await pauseBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)](_0x40d261(0x112)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x1a7)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3352a1[_0x40d261(0x20a)]()['includes'](_0x40d261(0x1aa)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x21d)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)]('AuthenticationError'))logHistory('error',_0x20fb82+_0x40d261(0x128)),logHistory(_0x40d261(0xde),_0x40d261(0x1fb)),await killBot();else{if(_0x3352a1[_0x40d261(0x20a)]()[_0x40d261(0x132)](_0x40d261(0x20b)))logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x26a)),logHistory(_0x40d261(0xde),_0x40d261(0x1fb)),await killBot();else{if(_0x3352a1[_0x40d261(0x20a)]()['includes'](_0x40d261(0x138)))logHistory('error',_0x40d261(0x222)+_0x5e9dc3);else _0x3352a1 instanceof ccxt['ExchangeError']?(logHistory(_0x40d261(0xde),_0x20fb82+_0x40d261(0x14a)),logger[_0x40d261(0x245)](_0x40d261(0x21c),_0x3352a1)):(logHistory(_0x40d261(0xde),_0x40d261(0x154)+pauseBotMsg),logger[_0x40d261(0x245)](_0x40d261(0x21c),_0x3352a1),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x4a6e8b,_0x186472){const _0x583737=_0x6b8927;return parseFloat(_0x4a6e8b[_0x583737(0x23c)](_0x186472));}function formatResultTruncate(_0x187081,_0x137c8a){const _0x4e752a=_0x6b8927;let _0x426f45=formatResultString(_0x187081,0xa),_0x45cd8a=_0x426f45[_0x4e752a(0x22c)]('.');return _0x45cd8a!=-0x1&&(_0x426f45=_0x426f45[_0x4e752a(0x256)](0x0,_0x45cd8a+_0x137c8a+0x1)),Number(_0x426f45);}function formatResultString(_0x5d5be8,_0x4b9c86){const _0x2f71d3=_0x6b8927;let _0x5224e1;if(!(''+_0x5d5be8)[_0x2f71d3(0x132)]('e'))_0x5224e1=+(Math[_0x2f71d3(0x1ba)](_0x5d5be8+'e+'+_0x4b9c86)+'e-'+_0x4b9c86);else{let _0x111732=(''+_0x5d5be8)[_0x2f71d3(0x26c)]('e'),_0x24aa39='';+_0x111732[0x1]+_0x4b9c86>0x0&&(_0x24aa39='+'),_0x5224e1=+(Math['round'](+_0x111732[0x0]+'e'+_0x24aa39+(+_0x111732[0x1]+_0x4b9c86))+'e-'+_0x4b9c86);}return Number(_0x5224e1)['toFixed'](_0x4b9c86);}function getServerTime(){const _0x5b8f3d=_0x6b8927,_0x2fe94d=new Date();return _0x2fe94d[_0x5b8f3d(0x25c)]()+'/'+(_0x2fe94d[_0x5b8f3d(0x147)]()+0x1)[_0x5b8f3d(0x20a)]()[_0x5b8f3d(0x139)](0x2,'0')+'/'+_0x2fe94d[_0x5b8f3d(0x151)]()[_0x5b8f3d(0x20a)]()[_0x5b8f3d(0x139)](0x2,'0')+'\x20'+_0x2fe94d[_0x5b8f3d(0x1d9)]()['toString']()[_0x5b8f3d(0x139)](0x2,'0')+':'+_0x2fe94d[_0x5b8f3d(0x16b)]()[_0x5b8f3d(0x20a)]()[_0x5b8f3d(0x139)](0x2,'0')+':'+_0x2fe94d[_0x5b8f3d(0x19f)]()['toString']()[_0x5b8f3d(0x139)](0x2,'0');}function getTimeStamp(){const _0x1b973c=_0x6b8927,_0x448df3=shiftedTime();return _0x448df3['getFullYear']()+'/'+(_0x448df3[_0x1b973c(0x147)]()+0x1)[_0x1b973c(0x20a)]()[_0x1b973c(0x139)](0x2,'0')+'/'+_0x448df3['getDate']()[_0x1b973c(0x20a)]()['padStart'](0x2,'0')+'\x20'+_0x448df3[_0x1b973c(0x1d9)]()[_0x1b973c(0x20a)]()[_0x1b973c(0x139)](0x2,'0')+':'+_0x448df3[_0x1b973c(0x16b)]()[_0x1b973c(0x20a)]()[_0x1b973c(0x139)](0x2,'0')+':'+_0x448df3[_0x1b973c(0x19f)]()[_0x1b973c(0x20a)]()[_0x1b973c(0x139)](0x2,'0');}function getDate(){const _0x122247=_0x6b8927,_0x1ca272=shiftedTime();return _0x1ca272[_0x122247(0x25c)]()+'/'+(_0x1ca272[_0x122247(0x147)]()+0x1)[_0x122247(0x20a)]()[_0x122247(0x139)](0x2,'0')+'/'+_0x1ca272[_0x122247(0x151)]()[_0x122247(0x20a)]()[_0x122247(0x139)](0x2,'0');}function getHour(){const _0x33482=_0x6b8927,_0xe4008c=shiftedTime();return _0xe4008c[_0x33482(0x1d9)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x415317){return new Promise(_0x472eae=>setTimeout(_0x472eae,_0x415317));}function shiftedTime(){const _0x2e9b35=_0x6b8927,_0x1b54dd=new Date();let _0x346d7c=_0x1b54dd;if(config&&config['timeshift']!==0x0)_0x346d7c=fns[_0x2e9b35(0x261)](_0x1b54dd,{'hours':config[_0x2e9b35(0x1d7)]});return _0x346d7c;}function timer(_0x334ec0){const _0x1058b9=_0x6b8927,_0x1cb118=new Date();!lasttime?console['log'](getTimeStamp()+_0x1058b9(0x10d),_0x334ec0,_0x1cb118):console[_0x1058b9(0x148)](getTimeStamp()+_0x1058b9(0x10d),_0x334ec0,(_0x1cb118-lasttime)/0x3e8),lasttime=_0x1cb118;}function _0x4711(){const _0x1aab49=['cost','\x20>\x20[DEBUG]\x20','recreate','fetchOpenOrders','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','replace','split','.json','0\x20-\x20EXECUTION:\x20','performance','Net\x20','constructor','toUpperCase','isEqual','getAllOrders()','change24h','net-fiat','2.5.0','toLowerCase','valid','active','findIndex','value','initclient','error','coin-loading-progress','/EUR','\x20|\x20exchange:\x20','</pre>','final','startdate','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','liquidity','USDP','changes','hybrid-crypto-js','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','apiSecret','248RAvOfQ','-performance.json','symbol','USDC','Fee\x20discount\x20refund\x20detected:\x20','concat','substring','757861Olxzjh','storeFiat','usd','recovery','data','offset','net-basecoin','success','001','emitHistory','send','Limit\x20(high-margin)','20726ojHACK','botname','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','fromCodePoint','full','cancelOrder','fetchBalance','Exchange','***','getCoins()','watchTrades()','kill','currency','ticker',':\x20timer\x20>','apply','restart','2.3.5','50676YWGHwF','API-key\x20format\x20invalid','createWriteStream','write','\x20not\x20available','limit','2\x20-\x20handling\x20FILLED\x20order:\x20','yyyy/MM/dd','initial','event','join','./version.json','InvalidNonce','<b>Bot\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20order:\x20','reverse','portfolio','colorscheme','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Error\x20while\x20deleting\x20files:\x20','balances','parse','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','realized','canceled','random','fetchTickers','emojisell','bid','order','loadSymbols()','fee','includes','no\x20open\x20orders','USDT','cooldown','Huobi','sells','InsufficientFunds','padStart','argv','Bot\x20','Bitget','emojibuy','Net\x20effect','differenceInSeconds','parseISO','Cex','Initializing\x20coin\x20results','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20has\x20a\x2024h\x20drop\x20of\x20','exchange','getMonth','log','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20exchange\x20error','closed','average','InvalidOrder','decrypt','<pre>','ccxt','getDate','toggleBotMode','added','Unknown\x20error\x20occured','exchanges','autoliquidity',':\x20Bot\x20','\x20not\x20responding','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20|\x20highest\x20fee:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','search','market','Invalid\x20quantity','createOrder','has','configuration','find','timestamp','AuthenticationError','side','defaults','coins','bot','NetworkError','time','getMinutes','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Limit\x20(low-margin)','2215692WHMTbg','netoffset','rightTxt','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','sortBy','filled','privateKey','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','TUSD','writeFile','event-history','remainingSymbols','getPortfolio(1)','\x20orders\x20in\x20less\x20than\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','util','Headless:\x20','abs','floor','secure','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','apiKey','orderId','request-time','threshold','bot-','assign','ORDERS.UNLOCKED','Order(s)\x20not\x20validated\x20after\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','milliseconds','Order\x20amount\x20is\x20invalid:\x20','Huobipro','eur','./config/','fetchTickers()','sort','<b>','cancelOrders()','\x20>\x20','price','ExchangeNotAvailable','BUSD','bots','stringify','2\x20-\x20Orders\x20unlocked','openOrders','fetchClosedOrders','getSeconds','\x20-\x20bot\x20not\x20started','distribution','initTickers()','-events.json','length','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','type','\x20API\x20key\x20is\x20invalid','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20change','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','page','\x20exchange','padEnd','RSA-OAEP','USD','Reset\x20|\x20','watchOrders()','apiPassword','Crypt','\x20network\x20error','password','\x20metrics:</b>\x20\x0a\x0a','highest','amountToPrecision','amount','round','buy','ordertype','onepagemode','args','ORDERS.UNLOCKING','UNLOCKED','limit-low','storeHeadless','last','placeOrder','customId','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20|\x20','loading-canceled','map','sendPortfolioTelegram','target','Exception\x20thrown\x20in\x20','sell','close','exec','basecoin','path','recent20','2\x20-\x20Validate\x20orders:\x20','delta','lowdb','2\x20-\x20Handled\x20open\x20orders','timeshift','existsSync','getHours','Mexc','************','Binanceus','push','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','Loading\x20completed','limit-high','red_yellow_blue','Saving\x20configuration','orderstatus','warning','open','running','Executed\x20','placeOrder()','PAXG','progress','format','get','removed','keys','coin','Resetting\x20bot\x20history','change','-results.json','\x20closed\x20the\x20connection','unlinkSync','LOCKED','Manual\x20balancing\x20required','message','min','OrderNotFound','bb-settings.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Unfilled\x20order(s)\x20canceled\x20after\x20','DDoSProtection','KC-API-TIMESTAMP\x20Invalid','number','sha256','ongoing','timeout','cancelLoading','Executing\x20exchange\x20reload','leftTxt','botID','enabled','1\x20-\x20FILLED\x20unknown\x20order:\x20','watchTrades','toString','PermissionDenied','resetHistory','filter','yyyy-MM-dd\x27T\x27HH:mm:ss','RateLimitExceeded','\x20portfolio:</b>\x20\x0a\x0a','\x20:\x20','max','EUR','getCoinNumber()','trade','lowdb/adapters/FileSync','\x20minutes\x20-\x20','ETH','fiat','set','forEach','Error\x20details:','\x20API\x20secret\x20is\x20invalid','mkdirSync','getOpenOrders()','remove','basecoinvalue','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Trigger:\x20','exchange\x20not\x20reloaded','logs','Transaction\x20detection\x20blocked','limits','breakeven','1\x20-\x20Handle\x20open\x20orders','BTC','Invalid\x20symbol:\x20','indexOf','datetime','Waited\x20','Kucoin','getPortfolio(2)','BNB','function','Transaction\x20detection\x20unblocked','Order\x20filled:\x20','10374290FfPwnh','buys','showname','startprice','date-fns','deleteHistoryAlerts','entries','toFixed','watchOrders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','(((.+)+)+)+$','10RBZLFj','831150PXJbEg','fetchTicker','excluded','getStartingBalances','debug','splice','OnMaintenance','2174515iZIxUH','./logs/','recreateCoinResults()','Order\x20is\x20invalid:\x20','1\x20-\x20Validate\x20orders:\x20','starting-balances','Binance','Bybit','yargs/yargs','%\x20(','pro','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','Portfolio\x20change\x20detected:\x20','total','slice','getTime','date','88drZwSH','version','uncaughtException','getFullYear','starting-balance-','-config.json','\x20|\x20Custom\x20ID:\x20','headless','add','\x20rejected\x20your\x20API\x20request','none','Pausing\x20for\x20','-------------------------------\x0a'];_0x4711=function(){return _0x1aab49;};return _0x4711();}