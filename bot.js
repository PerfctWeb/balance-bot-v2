const _0x4f5686=_0x3cce;(function(_0x3003e8,_0x5b0d56){const _0x426fd8=_0x3cce,_0x12b175=_0x3003e8();while(!![]){try{const _0x496cf1=-parseInt(_0x426fd8(0x10a))/0x1+-parseInt(_0x426fd8(0x15a))/0x2*(-parseInt(_0x426fd8(0x110))/0x3)+-parseInt(_0x426fd8(0x13a))/0x4*(-parseInt(_0x426fd8(0x1a6))/0x5)+parseInt(_0x426fd8(0x186))/0x6+parseInt(_0x426fd8(0xe0))/0x7*(parseInt(_0x426fd8(0x10b))/0x8)+parseInt(_0x426fd8(0xd7))/0x9+-parseInt(_0x426fd8(0x190))/0xa*(parseInt(_0x426fd8(0xe1))/0xb);if(_0x496cf1===_0x5b0d56)break;else _0x12b175['push'](_0x12b175['shift']());}catch(_0x2f06da){_0x12b175['push'](_0x12b175['shift']());}}}(_0x5f56,0xf0605));const _0x1a8052=function(){let _0x350c1b=!![];return function(_0x39834d,_0x5477de){const _0x176058=_0x350c1b?function(){const _0x3edab7=_0x3cce;if(_0x5477de){const _0x2c8b3f=_0x5477de[_0x3edab7(0x103)](_0x39834d,arguments);return _0x5477de=null,_0x2c8b3f;}}:function(){};return _0x350c1b=![],_0x176058;};}(),_0x4fddeb=_0x1a8052(this,function(){const _0x2b031a=_0x3cce;return _0x4fddeb[_0x2b031a(0x16e)]()[_0x2b031a(0x159)](_0x2b031a(0xc1))[_0x2b031a(0x16e)]()[_0x2b031a(0x15e)](_0x4fddeb)[_0x2b031a(0x159)](_0x2b031a(0xc1));});_0x4fddeb();'use strict';const ccxt=require(_0x4f5686(0x131)),low=require('lowdb'),FileSync=require(_0x4f5686(0xe3)),fs=require('fs'),fns=require(_0x4f5686(0x127)),{WebsocketClient,DefaultLogger}=require(_0x4f5686(0x175)),Crypt=require(_0x4f5686(0xd5))['Crypt'];let exchange,wsClient;global[_0x4f5686(0x107)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;function _0x3cce(_0x15e672,_0x2763fe){const _0x4f561a=_0x5f56();return _0x3cce=function(_0x4fddeb,_0x1a8052){_0x4fddeb=_0x4fddeb-0xad;let _0x5f5689=_0x4f561a[_0x4fddeb];return _0x5f5689;},_0x3cce(_0x15e672,_0x2763fe);}let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x4f5686(0x197))['version'],botID=process[_0x4f5686(0xb6)][0x2]||_0x4f5686(0x17b),pattern=/^[0-9]{3}$/;if(!pattern[_0x4f5686(0x1a9)](botID))return console['log'](_0x4f5686(0x100)+botID+_0x4f5686(0xf6)),process[_0x4f5686(0xfd)](0x1);const configpath=_0x4f5686(0xdf);!fs[_0x4f5686(0x165)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x4f5686(0xd2)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x4f5686(0xf3),performancefile=configpath+_0x4f5686(0xd2)+botID+_0x4f5686(0xd0),coinresultsfile=configpath+_0x4f5686(0xd2)+botID+_0x4f5686(0xe2),settingsfile=configpath+_0x4f5686(0xcc),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4f5686(0xd4)]({'logs':[]})[_0x4f5686(0x174)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4f5686(0xd4)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x4f5686(0x174)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4f5686(0xd4)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x4f5686(0x1a1),'symbol':_0x4f5686(0xef)},'usd':{'coin':_0x4f5686(0x1aa),'symbol':_0x4f5686(0x158)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x9f66f5)=>{},'debug':(..._0x434d50)=>{},'notice':(..._0xfb332c)=>{},'info':(..._0x42dfa9)=>{},'warning':(..._0x250892)=>{},'error':async function(..._0x4ba834){const _0x17ea70=_0x4f5686,_0xef7e6f=new Date()[_0x17ea70(0xb8)]();if(!lastErrorShown||_0xef7e6f-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x17ea70(0x140),_0x17ea70(0x195)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes');let _0x1ea747='';if(_0x4ba834[0x0])_0x1ea747+=_0x4ba834[0x0];if(_0x4ba834[0x1]&&_0x4ba834[0x1][_0x17ea70(0x140)]&&_0x4ba834[0x1]['error'][_0x17ea70(0xf8)])_0x1ea747+='\x20-\x20'+_0x4ba834[0x1]['error'][_0x17ea70(0xf8)];logging('WebSockets('+consecutivePauses+_0x17ea70(0x1ad),''+_0x1ea747),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x4f5686(0x168),'rsaStandard':_0x4f5686(0x104)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x4f5686(0xf7)]);process[_0x4f5686(0x139)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x208cb5,_0x489dcc=null){const _0xdc88b=_0x4f5686;process[_0xdc88b(0x139)]({'function':_0x208cb5,'args':_0x489dcc});}function initializeProcessListeners(){const _0x359041=_0x4f5686;process['on'](_0x359041(0xf8),_0x55723c=>{const _0x2e8f99=_0x359041;switch(Object['keys'](_0x55723c)[0x0]){case _0x2e8f99(0xf7):_0x55723c[_0x2e8f99(0xf7)]!=undefined&&(settings[_0x2e8f99(0xf7)]=_0x55723c[_0x2e8f99(0xf7)],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x55723c[_0x2e8f99(0x19b)]){case _0x2e8f99(0x183):initclient();break;case'emitHistory':emitHistory(_0x55723c[_0x2e8f99(0x122)]);break;case _0x2e8f99(0x128):getPortfolio(_0x55723c[_0x2e8f99(0x122)]);break;case'storeConfiguration':storeConfiguration(_0x55723c['args']);break;case _0x2e8f99(0xb7):storeHeadless(_0x55723c[_0x2e8f99(0x122)]);break;case _0x2e8f99(0xee):getStartingBalances();break;case _0x2e8f99(0x151):placeOrder(_0x55723c[_0x2e8f99(0x122)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x321adc=_0x4f5686;if(pidBalances)clearTimeout(pidBalances);if(config[_0x321adc(0x10c)]!=''){await initExchange(config[_0x321adc(0x10c)],config[_0x321adc(0x162)]);let _0x910289=await loadSymbols();_0x910289&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x47483b,_0x534f1d){const _0x477ffd=_0x4f5686,_0x2fea91=ccxt[config[_0x477ffd(0xc2)]];let _0x2a28be;switch(config['exchange']){case'binance':_0x2a28be=_0x477ffd(0xb3);break;case _0x477ffd(0x178):_0x2a28be=_0x477ffd(0x16b);break;default:_0x2a28be='wss://stream.binance.com:9443';}exchange=new _0x2fea91({'apiKey':_0x47483b,'secret':_0x534f1d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x47483b,'api_secret':_0x534f1d,'beautify':!![],'wsUrl':_0x2a28be},logger),config[_0x477ffd(0xc2)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x477ffd(0x154),'symbol':_0x477ffd(0x182)},'usd':{'coin':_0x477ffd(0x1aa),'symbol':_0x477ffd(0x158)}});}async function loadSymbols(){const _0x2b6a5d=_0x4f5686;let _0xe23e09;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x2b6a5d(0x117)][_0x2b6a5d(0x14f)](_0x14d49a=>{const _0x3318a3=_0x2b6a5d;return!_0x14d49a[_0x3318a3(0x185)]('DAI/');}),_0xe23e09=!![];}catch(_0xd72fa){await handleError(_0xd72fa,_0x2b6a5d(0x133)),_0xe23e09=![];}return _0xe23e09;}async function initbot(){const _0x97bede=_0x4f5686;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x446f79=dbCoinResults['get']('coins')[_0x97bede(0x11a)]();if(_0x446f79['length']==0x0)await resetCoinResults();}async function initclient(){const _0x25bb97=_0x4f5686;proxyEmit(_0x25bb97(0x12f),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x25bb97(0x187),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x42fd77=_0x4f5686;wsinitialized=![];ws1&&(ws1['forEach'](_0xdf91f4=>{const _0x4e129c=_0x3cce;try{wsClient[_0x4e129c(0x194)](_0xdf91f4);}catch(_0x843e64){}}),ws1=[]);if(ws2){try{wsClient[_0x42fd77(0x194)](ws2);}catch(_0x457e15){}ws2=null;}}async function initws(){const _0x2fabfb=_0x4f5686;cleanws();let _0x23b90c=[];currentCoins[_0x2fabfb(0xd3)](_0x506213=>{const _0x24aedd=_0x2fabfb;if(_0x506213[_0x24aedd(0x1a7)]!=config['basecoin'])_0x23b90c[_0x24aedd(0x15d)](noslash(_0x506213[_0x24aedd(0xad)]));});if(!_0x23b90c['includes'](stablecoins[_0x2fabfb(0x115)][_0x2fabfb(0x1a7)]))_0x23b90c[_0x2fabfb(0x15d)](stablecoins[_0x2fabfb(0x115)][_0x2fabfb(0x1a7)]);if(!_0x23b90c['includes'](stablecoins['usd'][_0x2fabfb(0x1a7)]))_0x23b90c[_0x2fabfb(0x15d)](stablecoins['usd'][_0x2fabfb(0x1a7)]);if(!_0x23b90c['includes'](_0x2fabfb(0x13b)+config[_0x2fabfb(0x19c)]))_0x23b90c[_0x2fabfb(0x15d)](_0x2fabfb(0x13b)+config[_0x2fabfb(0x19c)]);try{_0x23b90c['forEach']((_0x3cdcc4,_0x4e51ea)=>{const _0x3c5897=_0x2fabfb;ws1[_0x4e51ea]=wsClient[_0x3c5897(0xba)](_0x3cdcc4,'1m');}),ws2=wsClient[_0x2fabfb(0x11d)](),wsClient['on']('formattedMessage',_0x4f84ce=>{const _0xd301de=_0x2fabfb;if(!Array[_0xd301de(0xbd)](_0x4f84ce)&&!_0x4f84ce[_0xd301de(0x10f)]['includes'](_0xd301de(0xcd))){if(_0x4f84ce['eventType']==='kline'){global[_0xd301de(0x107)][_0x4f84ce[_0xd301de(0x19e)][_0xd301de(0xad)]]=_0x4f84ce[_0xd301de(0x19e)][_0xd301de(0x130)];return;}}else{if(!Array[_0xd301de(0xbd)](_0x4f84ce)&&_0x4f84ce[_0xd301de(0x10f)][_0xd301de(0x185)](_0xd301de(0xcd))){if(_0x4f84ce[_0xd301de(0xc7)][_0xd301de(0x185)](_0xd301de(0x11f))){updateNumberCoins(_0x4f84ce);return;}}}}),wsClient['on'](_0x2fabfb(0x18f),async _0x599391=>{currentCoins=await getCoins();});}catch(_0x1539cd){await handleError(_0x1539cd,_0x2fabfb(0x153));}let _0x422cd1;while(_0x422cd1!=currentCoins[_0x2fabfb(0x112)]-0x1){_0x422cd1=0x0,currentCoins['forEach'](_0x1f3d35=>{const _0x11e62d=_0x2fabfb;if(_0x1f3d35['coin']!=config['basecoin']&&global[_0x11e62d(0x107)][noslash(_0x1f3d35[_0x11e62d(0xad)])])_0x422cd1++;});let _0x16daab=Math[_0x2fabfb(0xdb)](_0x422cd1/(currentCoins[_0x2fabfb(0x112)]-0x1)*0x64);proxyEmit('coin-loading-progress',_0x16daab),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x1f8244=_0x4f5686;let _0x8ec81e=0x0,_0x2e1248=0x0;try{_0x8ec81e=global[_0x1f8244(0x107)][stablecoins[_0x1f8244(0x115)][_0x1f8244(0x1a7)]],_0x2e1248=global[_0x1f8244(0x107)][stablecoins[_0x1f8244(0xe7)][_0x1f8244(0x1a7)]];}catch(_0x39e734){await handleError(_0x39e734,_0x1f8244(0x137));}return{'eur':Number(_0x8ec81e),'usd':Number(_0x2e1248)};}async function setStartDatePerformance(_0x35871a){const _0x1eed2e=_0x4f5686,_0x1f7a6e=fns[_0x1eed2e(0x149)](new Date(_0x35871a[_0x1eed2e(0xca)]),'yyyy/MM/dd');let _0x23b3bf=[];_0x23b3bf[stablecoins[_0x1eed2e(0x115)]['coin']]=await getCloses(stablecoins[_0x1eed2e(0x115)][_0x1eed2e(0xad)],new Date(_0x35871a[_0x1eed2e(0xca)]),0x1),_0x23b3bf[stablecoins[_0x1eed2e(0xe7)][_0x1eed2e(0x1a7)]]=await getCloses(stablecoins[_0x1eed2e(0xe7)][_0x1eed2e(0xad)],new Date(_0x35871a[_0x1eed2e(0xca)]),0x1);let _0x4b15f9,_0x5b5ea3=[];_0x35871a[_0x1eed2e(0x14a)][_0x1eed2e(0xd3)](_0x47911e=>{const _0x2f222f=_0x1eed2e;!_0x47911e[_0x2f222f(0x188)]&&_0x5b5ea3['push']({'coin':_0x47911e[_0x2f222f(0x1a7)],'number':_0x47911e[_0x2f222f(0x118)],'price':_0x47911e[_0x2f222f(0xeb)]});}),_0x4b15f9={'date':_0x1f7a6e,'eur':_0x23b3bf[stablecoins[_0x1eed2e(0x115)][_0x1eed2e(0x1a7)]][0x0],'usd':_0x23b3bf[stablecoins[_0x1eed2e(0xe7)][_0x1eed2e(0x1a7)]][0x0],'coins':_0x5b5ea3};let _0x29396b=dbPerformance[_0x1eed2e(0x192)](_0x1eed2e(0xcb))['find']({'date':_0x1f7a6e})['value']();_0x29396b?dbPerformance[_0x1eed2e(0x192)](_0x1eed2e(0xcb))['find']({'date':_0x1f7a6e})['assign'](_0x4b15f9)['write']():dbPerformance[_0x1eed2e(0x192)](_0x1eed2e(0xcb))[_0x1eed2e(0x15d)](_0x4b15f9)[_0x1eed2e(0x174)](),_0x29396b=dbPerformance[_0x1eed2e(0x192)](_0x1eed2e(0xcb))[_0x1eed2e(0x123)](_0x1eed2e(0x157))[_0x1eed2e(0x11a)](),_0x29396b['forEach'](_0x35f0fd=>{const _0x4fa0bf=_0x1eed2e;_0x35f0fd[_0x4fa0bf(0x157)]<_0x1f7a6e&&dbPerformance[_0x4fa0bf(0x192)](_0x4fa0bf(0xcb))[_0x4fa0bf(0x17c)]({'date':_0x35f0fd[_0x4fa0bf(0x157)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1c3662){const _0x28018b=_0x4f5686;let _0x3df40c,_0x2cbac4=[];logHistory('success','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x1c3662[_0x28018b(0x14a)][_0x28018b(0xd3)](_0x194345=>{const _0x1a3d0b=_0x28018b;if(_0x194345[_0x1a3d0b(0x1a7)]!=config[_0x1a3d0b(0x19c)]&&!_0x194345[_0x1a3d0b(0x188)])_0x2cbac4[_0x1a3d0b(0x15d)]({'coin':_0x194345[_0x1a3d0b(0x1a7)],'symbol':_0x194345[_0x1a3d0b(0xad)]});});let _0x2a0512=[];try{const _0x1ec226=fns['format'](fns[_0x28018b(0xf5)](_0x1c3662[_0x28018b(0xca)][_0x28018b(0x145)](/\//g,'-')),_0x28018b(0xfb));for(const _0x580224 of _0x2cbac4){if(_0x580224[_0x28018b(0x1a7)]!=config[_0x28018b(0x19c)])_0x3df40c=await exchange[_0x28018b(0x170)](_0x580224[_0x28018b(0xad)],Date[_0x28018b(0x13e)](_0x1ec226));_0x3df40c[_0x28018b(0xd3)](_0x19f568=>{const _0x5ba8e6=_0x28018b,_0x4f8f2b=_0x580224['symbol']['includes'](config[_0x5ba8e6(0x19c)]+'/'),_0x9a397a=fns[_0x5ba8e6(0x149)](fns[_0x5ba8e6(0xf5)](_0x19f568['datetime']),_0x5ba8e6(0xb5)),_0x1d8732=fns[_0x5ba8e6(0x149)](fns[_0x5ba8e6(0xf5)](_0x19f568[_0x5ba8e6(0x16c)]),_0x5ba8e6(0x152));let _0x3c15ab;if(_0x19f568[_0x5ba8e6(0xe6)]==_0x5ba8e6(0x138)&&_0x4f8f2b==![])_0x3c15ab=_0x19f568[_0x5ba8e6(0x11c)];if(_0x19f568['side']=='buy'&&_0x4f8f2b==!![])_0x3c15ab=-_0x19f568['amount']*_0x19f568[_0x5ba8e6(0x1b2)];if(_0x19f568['side']=='sell'&&_0x4f8f2b==![])_0x3c15ab=-_0x19f568['amount'];if(_0x19f568[_0x5ba8e6(0xe6)]==_0x5ba8e6(0x116)&&_0x4f8f2b==!![])_0x3c15ab=_0x19f568[_0x5ba8e6(0x11c)]*_0x19f568[_0x5ba8e6(0x1b2)];_0x2a0512[_0x5ba8e6(0x15d)]({'timestamp':_0x9a397a,'date':_0x1d8732,'coin':_0x580224[_0x5ba8e6(0x1a7)],'symbol':_0x580224[_0x5ba8e6(0xad)],'type':_0x19f568['type'],'side':_0x19f568['side'],'reverse':_0x4f8f2b,'amount':formatResult(_0x19f568[_0x5ba8e6(0xd8)],0x8),'filled':formatResult(_0x19f568[_0x5ba8e6(0xd8)],0x8),'coinamount':formatResult(_0x3c15ab,0x8),'price':formatResult(_0x19f568['price'],0x8)});let _0x51812f;if(_0x19f568['side']==_0x5ba8e6(0x138)&&_0x4f8f2b==![])_0x51812f=-_0x19f568[_0x5ba8e6(0x11c)]*_0x19f568['price'];if(_0x19f568[_0x5ba8e6(0xe6)]==_0x5ba8e6(0x138)&&_0x4f8f2b==!![])_0x51812f=_0x19f568[_0x5ba8e6(0x11c)];if(_0x19f568[_0x5ba8e6(0xe6)]==_0x5ba8e6(0x116)&&_0x4f8f2b==![])_0x51812f=_0x19f568[_0x5ba8e6(0x11c)]*_0x19f568['price'];if(_0x19f568[_0x5ba8e6(0xe6)]==_0x5ba8e6(0x116)&&_0x4f8f2b==!![])_0x51812f=-_0x19f568[_0x5ba8e6(0x11c)];_0x2a0512[_0x5ba8e6(0x15d)]({'date':_0x1d8732,'coin':config[_0x5ba8e6(0x19c)],'coinamount':formatResult(_0x51812f,0x8)});});}_0x2a0512['sort']((_0x4b1bfb,_0x31a946)=>_0x4b1bfb['timestamp']>_0x31a946['timestamp']?0x1:_0x31a946['timestamp']>_0x4b1bfb['timestamp']?-0x1:0x0),dbLogs[_0x28018b(0x192)](_0x28018b(0x19d))[_0x28018b(0x17c)]()['write'](),_0x2a0512[_0x28018b(0xd3)](_0xd21d18=>{const _0xc5497e=_0x28018b;let _0x4cdb45;_0xd21d18[_0xc5497e(0x1a7)]!=config['basecoin']&&(_0x4cdb45={'time':_0xd21d18[_0xc5497e(0x147)],'type':_0xc5497e(0x1af),'event':_0xc5497e(0xc8)+_0xd21d18['symbol']+'\x20'+_0xd21d18[_0xc5497e(0xe6)]+'\x20#'+_0xd21d18[_0xc5497e(0x11c)]+'\x20@'+_0xd21d18[_0xc5497e(0x1b2)]},dbLogs[_0xc5497e(0x192)](_0xc5497e(0x19d))[_0xc5497e(0x15d)](_0x4cdb45)[_0xc5497e(0x174)]());});const _0x46c829=fns['eachDayOfInterval']({'start':new Date(_0x1c3662['startdate']),'end':new Date()})[_0x28018b(0x108)](_0x562ad2=>fns['format'](_0x562ad2,'yyyy/MM/dd'));let _0x464417=[];_0x1c3662[_0x28018b(0x14a)][_0x28018b(0xd3)](_0x555edd=>{const _0x214215=_0x28018b;if(!_0x555edd[_0x214215(0x188)]){_0x464417[_0x555edd['coin']]=[];let _0x561a80=_0x555edd[_0x214215(0x118)];_0x46c829[_0x214215(0xd3)]((_0x9cde5a,_0x2f2968)=>{const _0x8bbb74=_0x214215;let _0x2e6145=_0x2a0512['filter'](_0x2ff375=>_0x2ff375['coin']==_0x555edd[_0x8bbb74(0x1a7)]&&_0x2ff375['date']==_0x9cde5a);if(_0x2e6145[_0x8bbb74(0x112)]!=0x0){let _0x370e04=_0x2e6145[_0x8bbb74(0x142)]((_0x4a292e,_0x5c9d03)=>{return _0x4a292e+=_0x5c9d03['coinamount'],_0x4a292e;},0x0);_0x561a80+=_0x370e04;}_0x464417[_0x555edd[_0x8bbb74(0x1a7)]][_0x9cde5a]=_0x561a80;});}});const _0xfc45e2=[..._0x2cbac4];_0xfc45e2[_0x28018b(0x15d)]({'coin':stablecoins[_0x28018b(0x115)]['coin'],'symbol':stablecoins[_0x28018b(0x115)][_0x28018b(0xad)]}),_0xfc45e2['push']({'coin':stablecoins[_0x28018b(0xe7)][_0x28018b(0x1a7)],'symbol':stablecoins[_0x28018b(0xe7)][_0x28018b(0xad)]});let _0x49d65b=[];for(const _0x4c347b of _0xfc45e2){_0x49d65b[_0x4c347b['coin']]=await getCloses(_0x4c347b[_0x28018b(0xad)],new Date(_0x1c3662[_0x28018b(0xca)]));}dbPerformance['get'](_0x28018b(0xcb))[_0x28018b(0x17c)]()[_0x28018b(0x174)](),_0x46c829[_0x28018b(0xd3)]((_0x7ba6fd,_0x54b0ed)=>{const _0x4d73a5=_0x28018b;let _0x584f9b,_0x1ebdad=[];_0x54b0ed==0x0?(_0x1c3662['portfolio'][_0x4d73a5(0xd3)](_0xdd8938=>{const _0x5dab5d=_0x4d73a5;!_0xdd8938[_0x5dab5d(0x188)]&&_0x1ebdad[_0x5dab5d(0x15d)]({'coin':_0xdd8938[_0x5dab5d(0x1a7)],'number':_0xdd8938[_0x5dab5d(0x118)],'price':_0xdd8938[_0x5dab5d(0xeb)]});}),_0x584f9b={'date':_0x7ba6fd,'eur':_0x49d65b[stablecoins[_0x4d73a5(0x115)][_0x4d73a5(0x1a7)]][_0x54b0ed],'usd':_0x49d65b[stablecoins[_0x4d73a5(0xe7)][_0x4d73a5(0x1a7)]][_0x54b0ed],'coins':_0x1ebdad}):(_0x1c3662['portfolio'][_0x4d73a5(0xd3)](_0x1668ba=>{const _0x2df577=_0x4d73a5;!_0x1668ba[_0x2df577(0x188)]&&_0x1ebdad[_0x2df577(0x15d)]({'coin':_0x1668ba[_0x2df577(0x1a7)],'number':_0x464417[_0x1668ba[_0x2df577(0x1a7)]][_0x7ba6fd],'price':_0x1668ba[_0x2df577(0x1a7)]==config[_0x2df577(0x19c)]?0x1:_0x49d65b[_0x1668ba[_0x2df577(0x1a7)]][_0x54b0ed]});}),_0x584f9b={'date':_0x7ba6fd,'eur':_0x49d65b[stablecoins[_0x4d73a5(0x115)][_0x4d73a5(0x1a7)]][_0x54b0ed],'usd':_0x49d65b[stablecoins['usd'][_0x4d73a5(0x1a7)]][_0x54b0ed],'coins':_0x1ebdad}),dbPerformance[_0x4d73a5(0x192)](_0x4d73a5(0xcb))[_0x4d73a5(0x15d)](_0x584f9b)['write']();}),emitPerformance(),await resetCoinResults();for(let _0xecdac2 of _0x2a0512){_0xecdac2[_0x28018b(0x1a7)]!=config['basecoin']&&await updateCoinResults(_0xecdac2);}logHistory(_0x28018b(0x132),_0x28018b(0x1a0));}catch(_0x27e7eb){await handleError(_0x27e7eb,_0x28018b(0x1ae));}}function _0x5f56(){const _0x5bc949=['remove','trade','running','stringify','Binance\x20API\x20key\x20is\x20invalid','split','BTC/BUSD','initclient','emojibuy','includes','27450tfrSAa','balances','excluded','emojisell','restart','fetchOHLCV','limits','configuration-stored','breakeven','reconnected','40dxzsZf','add','get','has','closeWs','WebSockets(','reverse','./version.json','getCloses()','indexOf','decrypt','function','basecoin','logs','kline','orderStatus','Performance\x20recreation\x20completed\x20successfully','BTCEUR','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','fetchTickers','number','assign','545MFwilf','coin','eventType','test','BTCUSDT','AuthenticationError','\x20|\x20Error\x20details:\x20',')\x20|\x20Error\x20details:\x20','recreateHistory()','order','delta','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','price','recreate','symbol','valid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','threshold','Order\x20filled:\x20','market','wss://stream.binance.com:9443','Executed\x20','yyyy/MM/dd\x20HH:mm:ss','argv','storeHeadless','getTime','enabled','subscribeSpotKline','Order(s)\x20filled\x20-\x20balancing\x20resumed','padStart','isArray','min','secure','differenceInCalendarDays','(((.+)+)+)+$','exchange','botID','toLowerCase','getMonth','getPortfolio()','wsMarket','Order:\x20','BTC','startdate','data','bb-settings.json','userData','limit-high','starting-balances','-performance.json','Binance\x20API\x20secret\x20is\x20invalid','bot-','forEach','defaults','hybrid-crypto-js','getFullYear','9079380OylzXJ','filled','Bot\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','round','sells','cancelOrder','Unfilled\x20order(s)\x20canceled\x20after\x20','./config/','1283961AmCfLH','1142427PnEPQf','-results.json','lowdb/adapters/FileSync','orderId','orderType','side','usd','type','Order(s)\x20validated\x20-\x20balancing\x20resumed','shift','startprice','USDT','event-history','getStartingBalances','BTC/EUR','differenceInSeconds','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ExchangeNotAvailable','-events.json','total','parseISO',',\x20must\x20be\x20a\x203\x20digit\x20number','timeshift','message','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','LIMIT','yyyy-MM-dd\x27T\x27HH:mm:ss','************','exit','OrderNotFound','MIN_NOTIONAL','Error:\x20Invalid\x20argument\x20','\x20>\x20','limit-low','apply','RSA-OAEP','availableBalance','milliseconds','ticker','map','cost','1774347GlVjgU','8IBvMFy','apiKey','Market',':\x20Bot\x20','wsKey','1065VqeYTW','timeout','length','Invalid\x20quantity','realized','eur','sell','symbols','startnumber','buys','value','\x20order:\x20','amount','subscribeSpotUserDataStream','settings','spot','Order(s)\x20not\x20validated\x20after\x20','getMinutes','args','sortBy','botname','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','date-fns','getPortfolio','privateKey','performance','fromCodePoint','cancelOrder()','getCoins()','outboundAccountPosition','configuration','close','ccxt','success','loadSymbols()','entries','kill','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','getFiat()','buy','send','71528pgnMAp','BNB','bot','getHours','parse','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(1)\x20-\x20please\x20sync\x20clock','error','Limit\x20(low-margin)','reduce','abs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','replace','currency','timestamp','BUSD','format','portfolio','cooldown','getDate','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','filter','target','placeOrder','yyyy/MM/dd','initws()','BTCBUSD','slice','\x20hour','date','BTC/USDT','search','160FvDvCt','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','FILLED','push','constructor','time','headless','Order\x20amount\x20is\x20invalid:\x20','apiSecret','last','fee','existsSync','coins','accumulatedQuantity','sha256','\x20minutes\x20-\x20balancing\x20resumed','sort','wss://stream.binance.us:9443','datetime','toFixed','toString','ordertype','fetchOrders','distribution','find','event','write','binance','RequestTimeout','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','binanceus','splice','getSeconds','001'];_0x5f56=function(){return _0x5bc949;};return _0x5f56();}async function getCloses(_0x30c7af,_0x66a5bb,_0x468197=undefined){const _0x19b2f1=_0x4f5686,_0x4a39a3='1d';let _0x53cdc3,_0x3b0f8b;const _0x18c663=fns[_0x19b2f1(0xc0)](new Date(),_0x66a5bb)+0x1;try{const _0x23a464=exchange[_0x19b2f1(0x106)]()-_0x18c663*0x18*0xe10*0x3e8;_0x53cdc3=await exchange[_0x19b2f1(0x18b)](_0x30c7af,_0x4a39a3,_0x23a464,_0x468197),_0x3b0f8b=await exchange[_0x19b2f1(0x1a3)](_0x30c7af);}catch(_0x5cfa63){await handleError(_0x5cfa63,_0x19b2f1(0x198));}let _0x19962e=ohlcvToCloses(_0x53cdc3);return _0x19962e[_0x19b2f1(0x15d)](_0x3b0f8b[_0x30c7af][_0x19b2f1(0x163)]),_0x19962e;}function ohlcvToCloses(_0x2892be){const _0x3b8ba9=_0x4f5686;let _0x2534fa=[];return _0x2892be[_0x3b8ba9(0xd3)](function(_0x3d4559){_0x2534fa['push'](_0x3d4559[0x4]);}),_0x2534fa;}function getConfiguration(_0x56819c){const _0x53f117=_0x4f5686;let _0xf4b448=dbConfig[_0x53f117(0x192)](_0x53f117(0x13c))[_0x53f117(0x172)]({'botID':_0x56819c})[_0x53f117(0x11a)]();if(_0xf4b448){let _0x223d32=![];!_0xf4b448[_0x53f117(0xc2)]&&(_0xf4b448={..._0xf4b448,'exchange':_0x53f117(0x175)},_0x223d32=!![]),!_0xf4b448[_0x53f117(0x19c)]&&(_0xf4b448={..._0xf4b448,'basecoin':_0x53f117(0xc9)},_0x223d32=!![]),!_0xf4b448['ordertype']&&(_0xf4b448={..._0xf4b448,'ordertype':_0x53f117(0xb2)},_0x223d32=!![]),!_0xf4b448['timeout']&&(_0xf4b448={..._0xf4b448,'timeout':0x14},_0x223d32=!![]),!_0xf4b448[_0x53f117(0x184)]&&(_0xf4b448={..._0xf4b448,'emojibuy':''},_0x223d32=!![]),!_0xf4b448[_0x53f117(0x189)]&&(_0xf4b448={..._0xf4b448,'emojisell':''},_0x223d32=!![]),_0x223d32&&(_0xf4b448={'botID':_0xf4b448[_0x53f117(0xc3)],'exchange':_0xf4b448[_0x53f117(0xc2)],'apiKey':_0xf4b448[_0x53f117(0x10c)],'apiSecret':_0xf4b448[_0x53f117(0x162)],'basecoin':_0xf4b448[_0x53f117(0x19c)],'botname':_0xf4b448['botname'],'threshold':_0xf4b448['threshold'],'ordertype':_0xf4b448[_0x53f117(0x16f)],'timeout':_0xf4b448[_0x53f117(0x111)],'startdate':_0xf4b448[_0x53f117(0xca)],'recreate':_0xf4b448[_0x53f117(0x1b3)],'timeshift':_0xf4b448[_0x53f117(0xf7)],'headless':_0xf4b448['headless'],'cooldown':_0xf4b448[_0x53f117(0x14b)],'emojibuy':_0xf4b448[_0x53f117(0x184)],'emojisell':_0xf4b448['emojisell'],'portfolio':_0xf4b448[_0x53f117(0x14a)]},dbConfig[_0x53f117(0x192)]('bot')[_0x53f117(0x17c)]()[_0x53f117(0x174)](),dbConfig['get']('bot')[_0x53f117(0x15d)](_0xf4b448)[_0x53f117(0x174)]());}else _0xf4b448={'botID':_0x56819c,'exchange':_0x53f117(0x175),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x53f117(0xd9)+_0x56819c,'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0xf4b448;}function emittedConfiguration(){const _0x5122fe=_0x4f5686;let _0x4225c6;return config[_0x5122fe(0x10c)]==''?_0x4225c6=config:_0x4225c6={...config,'apiKey':'************','apiSecret':'************'},_0x4225c6;}function getSettings(){const _0x5c1c11=_0x4f5686;return dbSettings[_0x5c1c11(0x192)](_0x5c1c11(0x11e))[_0x5c1c11(0x11a)]();}function getSecure(){const _0x3c9d61=_0x4f5686;return dbSecure[_0x3c9d61(0x192)](_0x3c9d61(0xbf))[_0x3c9d61(0x11a)]()||{};}function updateTimeshift(_0x4c122f){const _0x1f3bc0=_0x4f5686;let _0x2719c9=dbConfig['get'](_0x1f3bc0(0x13c))[_0x1f3bc0(0x172)]({'botID':botID})['value']();_0x2719c9&&dbConfig[_0x1f3bc0(0x192)](_0x1f3bc0(0x13c))['find']({'botID':botID})[_0x1f3bc0(0x1a5)]({'timeshift':_0x4c122f})[_0x1f3bc0(0x174)](),config[_0x1f3bc0(0xf7)]=_0x4c122f,proxyEmit(_0x1f3bc0(0x12f),emittedConfiguration());}async function storeConfiguration(_0x756c9){const _0x423a46=_0x4f5686;let _0x39aa65=dbConfig[_0x423a46(0x192)](_0x423a46(0x13c))[_0x423a46(0x172)]({'botID':botID})[_0x423a46(0x11a)]();_0x756c9={..._0x756c9,'apiKey':crypt[_0x423a46(0x19a)](secure[_0x423a46(0x129)],_0x756c9[_0x423a46(0x10c)])[_0x423a46(0xf8)],'apiSecret':crypt[_0x423a46(0x19a)](secure[_0x423a46(0x129)],_0x756c9[_0x423a46(0x162)])[_0x423a46(0xf8)]};if(_0x39aa65){if(_0x756c9[_0x423a46(0x10c)]==_0x423a46(0xfc))_0x756c9[_0x423a46(0x10c)]=config[_0x423a46(0x10c)];if(_0x756c9[_0x423a46(0x162)]==_0x423a46(0xfc))_0x756c9['apiSecret']=config[_0x423a46(0x162)];dbConfig['get']('bot')[_0x423a46(0x172)]({'botID':botID})['assign'](_0x756c9)[_0x423a46(0x174)]();}else dbConfig[_0x423a46(0x192)]('bot')[_0x423a46(0x15d)](_0x756c9)[_0x423a46(0x174)](),process[_0x423a46(0x139)]({'status':_0x423a46(0xb9),'live':_0x423a46(0x17e)});config={..._0x756c9};if(config[_0x423a46(0x1b3)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x423a46(0x139)]({'botname':_0x756c9[_0x423a46(0x124)]}),proxyEmit(_0x423a46(0x18d)),reset();}async function storeHeadless(_0xb9033b){const _0x1b7de8=_0x4f5686,_0x249b87={...config,'headless':_0xb9033b[_0x1b7de8(0x160)]};let _0x45902a=dbConfig[_0x1b7de8(0x192)](_0x1b7de8(0x13c))[_0x1b7de8(0x172)]({'botID':botID})[_0x1b7de8(0x11a)]();_0x45902a&&dbConfig[_0x1b7de8(0x192)](_0x1b7de8(0x13c))[_0x1b7de8(0x172)]({'botID':botID})['assign'](_0x249b87)[_0x1b7de8(0x174)](),config={..._0x249b87},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x222698){const _0x2e5d1e=_0x4f5686;return _0x222698[_0x2e5d1e(0x145)]('/','');}function updateNumberCoins(_0x269173){const _0x8f22e8=_0x4f5686;_0x269173[_0x8f22e8(0x1a8)]&&_0x269173[_0x8f22e8(0x1a8)]==_0x8f22e8(0x12e)&&_0x269173[_0x8f22e8(0x187)][_0x8f22e8(0xd3)](_0x28e688=>{const _0x3a49aa=_0x8f22e8;let _0x188f60=currentCoins[_0x3a49aa(0x172)](_0x505206=>_0x505206[_0x3a49aa(0x1a7)]==_0x28e688['asset']);if(_0x188f60)_0x188f60[_0x3a49aa(0x1a4)]=Number(_0x28e688[_0x3a49aa(0x105)]);}),_0x269173['eventType']&&_0x269173['eventType']=='executionReport'&&(_0x269173[_0x8f22e8(0xe5)]==_0x8f22e8(0xfa)&&_0x269173[_0x8f22e8(0x19f)]==_0x8f22e8(0x15c)&&lastOrders[_0x8f22e8(0xd3)](_0x15eb53=>{const _0x36e138=_0x8f22e8;if(_0x15eb53[_0x36e138(0xe4)]==_0x269173[_0x36e138(0xe4)]){if(_0x15eb53[_0x36e138(0x196)])_0x15eb53[_0x36e138(0xd8)]=_0x269173[_0x36e138(0x167)]*_0x15eb53['price'];else _0x15eb53['filled']=_0x269173[_0x36e138(0x167)];}}));}async function getCoins(_0xf806fb=!![],_0x57f9f0=config['basecoin']){const _0x561d6e=_0x4f5686;let _0x1b3efd,_0x1ed036=[],_0x48a225=[],_0x3b14e0=[];try{_0x1b3efd=await exchange['fetchBalance'](),mybalances=_0x1b3efd[_0x561d6e(0xf4)];if(!_0xf806fb)for(const [_0x52db37,_0x3fc975]of Object[_0x561d6e(0x134)](mybalances)){_0x3b14e0[_0x561d6e(0x15d)](_0x52db37);}else config['portfolio']['forEach'](_0x25b69a=>{const _0x43060e=_0x561d6e;if(!_0x25b69a['excluded'])_0x3b14e0['push'](_0x25b69a[_0x43060e(0x1a7)]);});if(_0x57f9f0=='')for(const [_0x14d319,_0x36369b]of Object[_0x561d6e(0x134)](mybalances)){_0x36369b[_0x561d6e(0x16e)]()!=0x0&&_0x48a225['push']({'coin':_0x14d319});}else for(const [_0x3f7e93,_0x2ea480]of Object[_0x561d6e(0x134)](mybalances)){if(_0x3b14e0[_0x561d6e(0x185)](_0x3f7e93)){if((_0x2ea480[_0x561d6e(0x16e)]()!=0x0||config[_0x561d6e(0x14a)][_0x561d6e(0x172)](_0x26d1a5=>_0x26d1a5[_0x561d6e(0x1a7)]==_0x3f7e93))&&(allSymbols['includes'](_0x3f7e93+'/'+_0x57f9f0)||_0x3f7e93==_0x57f9f0))_0x48a225[_0x561d6e(0x15d)]({'coin':_0x3f7e93,'symbol':_0x3f7e93+'/'+_0x57f9f0,'reverse':![],'number':_0x2ea480}),_0x3f7e93!=_0x57f9f0&&_0x1ed036[_0x561d6e(0x15d)](_0x3f7e93+'/'+_0x57f9f0);else(_0x2ea480[_0x561d6e(0x16e)]()!=0x0||config[_0x561d6e(0x14a)]['find'](_0x43388f=>_0x43388f[_0x561d6e(0x1a7)]==_0x3f7e93))&&allSymbols[_0x561d6e(0x185)](_0x57f9f0+'/'+_0x3f7e93)&&(_0x48a225[_0x561d6e(0x15d)]({'coin':_0x3f7e93,'symbol':_0x57f9f0+'/'+_0x3f7e93,'reverse':!![],'number':_0x2ea480}),_0x3f7e93!=_0x57f9f0&&_0x1ed036[_0x561d6e(0x15d)](_0x57f9f0+'/'+_0x3f7e93));}}}catch(_0xeed21){if(!_0xf806fb){if(_0xeed21[_0x561d6e(0x16e)]()['includes']('API-key\x20format\x20invalid'))return logHistory(_0x561d6e(0x140),_0x561d6e(0x180)),![];else{if(_0xeed21['toString']()[_0x561d6e(0x185)]('AuthenticationError'))return logHistory(_0x561d6e(0x140),_0x561d6e(0x125)),![];else{if(_0xeed21[_0x561d6e(0x16e)]()[_0x561d6e(0x185)](_0x561d6e(0xf1)))return logHistory('error',_0x561d6e(0xd1)),![];else await handleError(_0xeed21,_0x561d6e(0x12d));}}}else await handleError(_0xeed21,_0x561d6e(0x12d));}return _0x48a225;}async function getPortfolio(_0x34f6ca){const _0x92d5c=_0x4f5686;let _0x253084=[],_0x3d35d4=[],_0x34fc1b,_0xa2321d=[],_0x49be64,_0x5383c5;_0x34f6ca[_0x92d5c(0x10c)]===_0x92d5c(0xfc)||_0x34f6ca[_0x92d5c(0x162)]===_0x92d5c(0xfc)?(_0x49be64=config[_0x92d5c(0x10c)],_0x5383c5=config['apiSecret']):(_0x49be64=_0x34f6ca[_0x92d5c(0x10c)],_0x5383c5=_0x34f6ca[_0x92d5c(0x162)]);await initExchange(_0x49be64,_0x5383c5);let _0x30a98c=await loadSymbols();if(_0x30a98c){_0xa2321d=await getCoins(![],_0x34f6ca[_0x92d5c(0x19c)]);if(_0xa2321d===![])proxyEmit('portfolio',![]);else{if(_0x34f6ca[_0x92d5c(0x19c)]=='')proxyEmit(_0x92d5c(0x14a),_0xa2321d);else{_0xa2321d['forEach'](_0x28ed79=>{const _0x3e802e=_0x92d5c;_0x253084[_0x3e802e(0x15d)](_0x28ed79[_0x3e802e(0xad)]);});try{_0x3d35d4=await exchange[_0x92d5c(0x1a3)](_0x253084);}catch(_0x7b9ae8){await handleError(_0x7b9ae8,_0x92d5c(0xc6));}_0xa2321d[_0x92d5c(0xd3)](_0x3b5903=>{const _0x312aef=_0x92d5c;_0x3b5903['coin']!=_0x34f6ca[_0x312aef(0x19c)]?_0x34fc1b=_0x3b5903['reverse']?0x1/_0x3d35d4[_0x3b5903[_0x312aef(0xad)]]['last']:_0x3d35d4[_0x3b5903[_0x312aef(0xad)]]['last']:_0x34fc1b=0x1,_0x3b5903['price']=formatResult(_0x34fc1b,0x8);}),proxyEmit(_0x92d5c(0x14a),_0xa2321d);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x46119b){const _0x3d2346=_0x4f5686;let _0x235123=!![];const _0x38d234=!_0x46119b[_0x3d2346(0x196)]?markets[_0x46119b['symbol']][_0x3d2346(0x18c)][_0x3d2346(0x11c)][_0x3d2346(0xbe)]:markets[_0x46119b[_0x3d2346(0xad)]]['limits']['cost'][_0x3d2346(0xbe)],_0x3e8325=!_0x46119b[_0x3d2346(0x196)]?markets[_0x46119b[_0x3d2346(0xad)]][_0x3d2346(0x18c)][_0x3d2346(0x109)][_0x3d2346(0xbe)]:markets[_0x46119b[_0x3d2346(0xad)]][_0x3d2346(0x18c)][_0x3d2346(0x11c)]['min'];if(Math['abs'](_0x46119b[_0x3d2346(0x17d)])<_0x38d234)_0x235123=![];if(Math[_0x3d2346(0x143)](_0x46119b[_0x3d2346(0x17d)])*_0x46119b[_0x3d2346(0x163)]<_0x3e8325)_0x235123=![];return _0x235123;}async function getBalances(){const _0x48278e=_0x4f5686;let _0x2ebb21=0x0,_0x2adc3a;const _0x17d27a=config[_0x48278e(0xb0)];currentCoins['forEach'](_0x21669d=>{const _0x40eed0=_0x48278e;if(_0x21669d['coin']!=config[_0x40eed0(0x19c)]){let _0x4fe3ac=global[_0x40eed0(0x107)][noslash(_0x21669d[_0x40eed0(0xad)])];_0x2adc3a=_0x21669d[_0x40eed0(0x196)]?0x1/_0x4fe3ac:_0x4fe3ac;}else _0x2adc3a=0x1;let _0x30a5a7=_0x21669d[_0x40eed0(0x1a4)]*_0x2adc3a;_0x2ebb21+=_0x30a5a7,_0x21669d['last']=formatResult(Number(_0x2adc3a),0x8),_0x21669d[_0x40eed0(0x11a)]=_0x30a5a7;}),currentCoins['forEach'](_0x1601ee=>{const _0x1a11ac=_0x48278e;let _0x1d3b8f=config[_0x1a11ac(0x14a)][_0x1a11ac(0x172)](_0x8efb6c=>_0x8efb6c[_0x1a11ac(0x1a7)]==_0x1601ee['coin']),_0x5485c0=Number(_0x1d3b8f['distribution']),_0x52edda=_0x1601ee[_0x1a11ac(0x11a)]/_0x2ebb21*0x64,_0x457ae8=_0x5485c0*_0x2ebb21/0x64/_0x1601ee[_0x1a11ac(0x163)]-_0x1601ee[_0x1a11ac(0x1a4)];_0x1601ee[_0x1a11ac(0x171)]=formatResult(_0x52edda,0x3),_0x1601ee[_0x1a11ac(0x150)]=formatResult(_0x5485c0,0x3),_0x1601ee[_0x1a11ac(0x17d)]=formatResult(_0x457ae8,0x8),_0x1601ee[_0x1a11ac(0xe6)]='',_0x1601ee[_0x1a11ac(0xae)]='';if(_0x1601ee[_0x1a11ac(0x1a7)]!=config[_0x1a11ac(0x19c)]){if(_0x1601ee[_0x1a11ac(0x171)]>_0x5485c0)_0x1601ee[_0x1a11ac(0xe6)]='sell',_0x1601ee[_0x1a11ac(0xae)]=checkMinimums(_0x1601ee);else _0x1601ee[_0x1a11ac(0x171)]<_0x5485c0&&(_0x1601ee[_0x1a11ac(0xe6)]=_0x1a11ac(0x138),_0x1601ee['valid']=checkMinimums(_0x1601ee));}_0x1601ee[_0x1a11ac(0x1b0)]=_0x1601ee[_0x1a11ac(0x171)]/_0x1601ee[_0x1a11ac(0x150)]-0x1;}),currentCoins[_0x48278e(0x16a)]((_0x119b63,_0x5073bf)=>_0x119b63['delta']<_0x5073bf[_0x48278e(0x1b0)]?0x1:_0x5073bf[_0x48278e(0x1b0)]<_0x119b63[_0x48278e(0x1b0)]?-0x1:0x0);const _0x4c58a7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4c58a7[_0x48278e(0x115)],'usd':_0x4c58a7['usd'],'portfolio':JSON[_0x48278e(0x17f)](currentCoins),'threshold':_0x17d27a},proxyEmit(_0x48278e(0x187),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x48278e(0x160)])headlessMode({'portfolio':currentCoins,'threshold':_0x17d27a});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x360309=_0x4f5686;if(!lastBalances)return;let _0x411a62=await getStartingBalances(![]),_0x3c7968=[],_0x183220=[],_0x4c0d59;JSON[_0x360309(0x13e)](lastBalances[_0x360309(0x14a)])[_0x360309(0xd3)](_0x50a6b6=>{const _0x1117c0=_0x360309;let _0x4354f3={'coin':_0x50a6b6[_0x1117c0(0x1a7)],'number':_0x50a6b6[_0x1117c0(0x1a4)],'price':_0x50a6b6[_0x1117c0(0x163)]};_0x3c7968[_0x1117c0(0x15d)](_0x4354f3);if(!_0x411a62[_0x1117c0(0x166)]||!_0x411a62[_0x1117c0(0x166)]['find'](_0x52345d=>_0x52345d[_0x1117c0(0x1a7)]==_0x50a6b6[_0x1117c0(0x1a7)]&&_0x52345d[_0x1117c0(0x1a4)]!=0x0))_0x183220[_0x1117c0(0x15d)](_0x4354f3);});const _0xa5058=await getFiat();_0x4c0d59={'date':lastBalances[_0x360309(0x15f)][_0x360309(0x181)]('\x20')[0x0],'eur':_0xa5058['eur'],'usd':_0xa5058[_0x360309(0xe7)],'coins':_0x3c7968};let _0x1ec33e=dbPerformance[_0x360309(0x192)](_0x360309(0xcb))[_0x360309(0x172)]({'date':_0x4c0d59['date']})[_0x360309(0x11a)]();_0x1ec33e?dbPerformance[_0x360309(0x192)](_0x360309(0xcb))[_0x360309(0x172)]({'date':_0x4c0d59[_0x360309(0x157)]})['assign'](_0x4c0d59)[_0x360309(0x174)]():dbPerformance['get']('data')['push'](_0x4c0d59)[_0x360309(0x174)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x6ebb20=_0x4f5686;if(dbPerformance['has'](_0x6ebb20(0xcb))[_0x6ebb20(0x11a)]()){let _0x579e45=dbPerformance[_0x6ebb20(0x192)](_0x6ebb20(0xcb))[_0x6ebb20(0x123)](_0x6ebb20(0x157))[_0x6ebb20(0x11a)]();proxyEmit(_0x6ebb20(0x12a),_0x579e45),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x39744d=!![]){const _0xee27d3=_0x4f5686;let _0x3a5510=dbPerformance[_0xee27d3(0x192)](_0xee27d3(0xcb))[_0xee27d3(0x172)]({'date':config[_0xee27d3(0xca)]})[_0xee27d3(0x11a)]();config[_0xee27d3(0x10c)]!=''&&!_0x3a5510&&(await setStartDatePerformance(config),_0x3a5510=dbPerformance[_0xee27d3(0x192)](_0xee27d3(0xcb))[_0xee27d3(0x172)]({'date':config['startdate']})[_0xee27d3(0x11a)]());if(config[_0xee27d3(0x10c)]==''||!_0x3a5510)return{};let _0x2edb62=0x0,_0x381c2d=0x0,_0x513e0f=0x0,_0x466e09=[],_0xb0cf33=0x0;config[_0xee27d3(0x14a)][_0xee27d3(0xd3)](_0x1b6d52=>{const _0x3aa26c=_0xee27d3;if(!_0x1b6d52[_0x3aa26c(0x188)]){_0x466e09[_0xb0cf33]={'coin':_0x1b6d52[_0x3aa26c(0x1a7)],'symbol':_0x1b6d52['symbol'],'number':_0x1b6d52[_0x3aa26c(0x118)],'price':_0x1b6d52[_0x3aa26c(0xeb)]},_0x2edb62+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52['startnumber'];if(config[_0x3aa26c(0x19c)]==_0x3aa26c(0xc9))_0x381c2d+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52[_0x3aa26c(0x118)]*_0x3a5510[_0x3aa26c(0x115)],_0x513e0f+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52['startnumber']*_0x3a5510['usd'];else{if(config['basecoin']==_0x3aa26c(0x148)||config['basecoin']==_0x3aa26c(0xec)||config[_0x3aa26c(0x19c)]=='USDC')_0x381c2d+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52[_0x3aa26c(0x118)]*_0x3a5510[_0x3aa26c(0x115)]/_0x3a5510['usd'],_0x513e0f+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52['startnumber'];else config['basecoin']=='EUR'&&(_0x381c2d+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52[_0x3aa26c(0x118)],_0x513e0f+=_0x1b6d52[_0x3aa26c(0xeb)]*_0x1b6d52[_0x3aa26c(0x118)]*_0x3a5510[_0x3aa26c(0xe7)]/_0x3a5510[_0x3aa26c(0x115)]);}_0xb0cf33++;}});let _0x52fc7c={'basecoin':_0x2edb62,'eur':_0x381c2d,'usd':_0x513e0f,'coins':_0x466e09};if(_0x39744d)proxyEmit(_0xee27d3(0xcf),_0x52fc7c);return _0x52fc7c;}function headlessMode(_0x18b5ea){const _0x2fffd2=_0x4f5686;let _0x4b549b=_0x18b5ea['portfolio'],_0x280c33=_0x18b5ea[_0x2fffd2(0xb0)],_0x1cbd1c=[];for(let _0x37634a of _0x4b549b){if(_0x37634a[_0x2fffd2(0x1a7)]!=config[_0x2fffd2(0x19c)]){if(_0x37634a[_0x2fffd2(0x171)]/_0x37634a[_0x2fffd2(0x150)]-0x1>=_0x280c33/0x64){if(_0x37634a[_0x2fffd2(0xae)])_0x1cbd1c[_0x2fffd2(0x15d)](_0x37634a);}else{if(_0x37634a[_0x2fffd2(0x171)]/_0x37634a[_0x2fffd2(0x150)]-0x1<=-_0x280c33/0x64){if(_0x37634a[_0x2fffd2(0xae)])_0x1cbd1c[_0x2fffd2(0x15d)](_0x37634a);}}}}_0x1cbd1c[_0x2fffd2(0x112)]>0x0&&placeOrder(_0x1cbd1c);}function symbolToCoin(_0x204880){const _0x265c96=_0x4f5686;let _0x3a0a5b;if(_0x204880[_0x265c96(0x185)]('/'+config[_0x265c96(0x19c)]))_0x3a0a5b=_0x204880['replace']('/'+config['basecoin'],'');if(_0x204880[_0x265c96(0x185)](config[_0x265c96(0x19c)]+'/'))_0x3a0a5b=_0x204880[_0x265c96(0x145)](config[_0x265c96(0x19c)]+'/','');return _0x3a0a5b;}async function validateOrders(_0x112e9a=0x0){const _0x339f8c=_0x4f5686;let _0x321ac6=[],_0x5cbf50=config[_0x339f8c(0x16f)]==_0x339f8c(0xb2)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x339f8c(0x111)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x339f8c(0xd3)](_0x305a8c=>{const _0x1bd7a3=_0x339f8c;let _0x503494=previousCoins['find'](_0x252267=>_0x252267['coin']==symbolToCoin(_0x305a8c[_0x1bd7a3(0xad)])),_0x4433b8=currentCoins[_0x1bd7a3(0x172)](_0x1f0889=>_0x1f0889[_0x1bd7a3(0x1a7)]==symbolToCoin(_0x305a8c['symbol'])),_0x4d8cd1,_0x5bf215;_0x305a8c[_0x1bd7a3(0xe6)]=='buy'&&!_0x305a8c[_0x1bd7a3(0x196)]||_0x305a8c[_0x1bd7a3(0xe6)]==_0x1bd7a3(0x116)&&_0x305a8c[_0x1bd7a3(0x196)]?(_0x4d8cd1=_0x503494[_0x1bd7a3(0x1a4)]+0.9*_0x305a8c[_0x1bd7a3(0xd8)],_0x5bf215=_0x503494[_0x1bd7a3(0x1a4)]+1.1*_0x305a8c[_0x1bd7a3(0xd8)]):(_0x4d8cd1=_0x503494[_0x1bd7a3(0x1a4)]-1.1*_0x305a8c[_0x1bd7a3(0xd8)],_0x5bf215=_0x503494['number']-0.9*_0x305a8c[_0x1bd7a3(0xd8)]);const _0x46a430=_0x305a8c['filled']!=0x0&&_0x4433b8['number']>=_0x4d8cd1&&_0x4433b8[_0x1bd7a3(0x1a4)]<=_0x5bf215;_0x321ac6[_0x1bd7a3(0x15d)](_0x46a430);if(_0x46a430&&config['ordertype']!=_0x1bd7a3(0xb2)){if(_0x305a8c[_0x1bd7a3(0x196)])logHistory(_0x1bd7a3(0x1af),'Order\x20filled:\x20'+_0x305a8c[_0x1bd7a3(0xad)]+'\x20'+_0x305a8c[_0x1bd7a3(0xe6)]+'\x20#'+formatResult(_0x305a8c[_0x1bd7a3(0xd8)]/_0x305a8c[_0x1bd7a3(0x1b2)],0x8)+'\x20@'+formatResult(_0x305a8c[_0x1bd7a3(0x1b2)],0x8));else logHistory('order',_0x1bd7a3(0xb1)+_0x305a8c[_0x1bd7a3(0xad)]+'\x20'+_0x305a8c[_0x1bd7a3(0xe6)]+'\x20#'+formatResult(_0x305a8c[_0x1bd7a3(0xd8)],0x8)+'\x20@'+formatResult(_0x305a8c[_0x1bd7a3(0x1b2)],0x8));}}),_0x321ac6[_0x339f8c(0xd3)]((_0x4de0ec,_0x10af57)=>{if(_0x4de0ec)lastOrders['splice'](_0x10af57,0x1);});if(_0x112e9a<_0x5cbf50&&_0x321ac6['includes'](![])){if(_0x112e9a==0x0){config[_0x339f8c(0x16f)]==_0x339f8c(0xb2)?logHistory(_0x339f8c(0x140),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x339f8c(0x140),_0x339f8c(0xda));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x112e9a);},0xa*0x3e8);}else{(_0x112e9a==0x1||_0x112e9a==Math[_0x339f8c(0xdb)](_0x5cbf50/0x2)||_0x112e9a==_0x5cbf50-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x112e9a);},validateOrderInterval);}}else{lockOrders=![];if(_0x112e9a>0x0&&!_0x321ac6[_0x339f8c(0x185)](![]))config[_0x339f8c(0x16f)]==_0x339f8c(0xb2)?logHistory(_0x339f8c(0x132),_0x339f8c(0xe9)):logHistory(_0x339f8c(0x132),_0x339f8c(0xbb));else _0x112e9a>0x0&&_0x321ac6[_0x339f8c(0x185)](![])&&(config['ordertype']==_0x339f8c(0xb2)?logHistory('success',_0x339f8c(0x120)+Math['round'](_0x5cbf50*validateOrderInterval/0xea60)+_0x339f8c(0x169)):(lastOrders['forEach'](async _0x250020=>{const _0x1be515=_0x339f8c;try{const _0x151c33=await exchange[_0x1be515(0xdd)](_0x250020['orderId'],_0x250020['symbol']);}catch(_0x3b20cb){if(_0x3b20cb['toString']()['includes'](_0x1be515(0xfe))){}else await handleError(_0x3b20cb,_0x1be515(0x12c));}}),logHistory(_0x339f8c(0x132),_0x339f8c(0xde)+Math[_0x339f8c(0xdb)](_0x5cbf50*validateOrderInterval/0xea60)+_0x339f8c(0x169))));}}async function resetCoinResults(){const _0x4117a7=_0x4f5686;dbCoinResults[_0x4117a7(0x192)](_0x4117a7(0x166))[_0x4117a7(0x17c)]()[_0x4117a7(0x174)]();let _0x4bfbf4=await getStartingBalances(![]);_0x4bfbf4[_0x4117a7(0x166)][_0x4117a7(0xd3)](_0x251dbf=>{const _0x388da6=_0x4117a7,_0x3adde4=_0x251dbf[_0x388da6(0xad)][_0x388da6(0x185)](config['basecoin']+'/');if(_0x251dbf[_0x388da6(0x1a7)]!=config[_0x388da6(0x19c)]){let _0x24be6a={'coin':_0x251dbf['coin'],'number':_0x251dbf['number'],'breakeven':_0x251dbf[_0x388da6(0x1b2)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x388da6(0x166))['push'](_0x24be6a)['write']();}});}async function updateCoinResults(_0x4566f1){const _0x4be2bb=_0x4f5686;let _0x596152,_0x557f3a,_0x193001,_0x37f9f2,_0x5aa280,_0x15f242,_0x22dad0=dbCoinResults[_0x4be2bb(0x192)](_0x4be2bb(0x166))[_0x4be2bb(0x172)]({'coin':_0x4566f1[_0x4be2bb(0x1a7)]})['value']();if(!_0x22dad0)return;if(_0x4566f1[_0x4be2bb(0x164)]&&_0x4566f1['fee']['currency']==config['basecoin'])_0x596152=_0x4566f1[_0x4be2bb(0x164)][_0x4be2bb(0x109)];else{if(_0x4566f1[_0x4be2bb(0x164)]&&_0x4566f1['fee'][_0x4be2bb(0x146)]==_0x4be2bb(0x13b))_0x596152=_0x4566f1[_0x4be2bb(0x164)][_0x4be2bb(0x109)]*global[_0x4be2bb(0x107)][_0x4be2bb(0x13b)+config[_0x4be2bb(0x19c)]];else _0x596152=0.001*_0x4566f1[_0x4be2bb(0xd8)];}const _0x46898c=_0x4566f1[_0x4be2bb(0xad)]['includes'](config['basecoin']+'/');_0x46898c&&(_0x15f242={'coin':_0x4566f1['coin'],'symbol':_0x4566f1[_0x4be2bb(0xad)],'filled':_0x4566f1[_0x4be2bb(0xd8)]*_0x4566f1[_0x4be2bb(0x1b2)],'side':_0x4566f1[_0x4be2bb(0xe6)]==_0x4be2bb(0x116)?_0x4be2bb(0x138):_0x4be2bb(0x116),'price':0x1/_0x4566f1[_0x4be2bb(0x1b2)]},_0x4566f1={..._0x15f242});_0x4566f1[_0x4be2bb(0xe6)]==_0x4be2bb(0x138)?_0x193001=(_0x22dad0[_0x4be2bb(0x18e)]*_0x22dad0['number']+_0x4566f1[_0x4be2bb(0x1b2)]*_0x4566f1[_0x4be2bb(0xd8)])/(_0x22dad0[_0x4be2bb(0x1a4)]+_0x4566f1[_0x4be2bb(0xd8)]):_0x193001=(_0x22dad0[_0x4be2bb(0x18e)]*_0x22dad0['number']-_0x4566f1[_0x4be2bb(0x1b2)]*_0x4566f1['filled'])/(_0x22dad0['number']-_0x4566f1[_0x4be2bb(0xd8)]);_0x4566f1['side']==_0x4be2bb(0x138)?_0x37f9f2=_0x22dad0[_0x4be2bb(0x114)]:_0x37f9f2=_0x22dad0[_0x4be2bb(0x114)]+(_0x4566f1[_0x4be2bb(0x1b2)]-_0x22dad0['breakeven'])*_0x4566f1[_0x4be2bb(0xd8)];_0x557f3a=_0x4566f1[_0x4be2bb(0xe6)]==_0x4be2bb(0x116)?_0x22dad0[_0x4be2bb(0x1a4)]-_0x4566f1['filled']:_0x22dad0['number']+_0x4566f1[_0x4be2bb(0xd8)],_0x5aa280=(_0x4566f1[_0x4be2bb(0x1b2)]-_0x193001)*_0x557f3a;let _0x3c8922={'coin':_0x4566f1[_0x4be2bb(0x1a7)],'number':_0x557f3a,'breakeven':formatResult(_0x193001,0x8),'realized':formatResult(_0x37f9f2,0x8),'unrealized':formatResult(_0x5aa280,0x8),'fees':formatResult(_0x22dad0['fees']+_0x596152,0x8),'sells':_0x4566f1[_0x4be2bb(0xe6)]=='sell'?_0x22dad0[_0x4be2bb(0xdc)]+0x1:_0x22dad0[_0x4be2bb(0xdc)],'buys':_0x4566f1[_0x4be2bb(0xe6)]==_0x4be2bb(0x138)?_0x22dad0[_0x4be2bb(0x119)]+0x1:_0x22dad0['buys']};dbCoinResults['get'](_0x4be2bb(0x166))['find']({'coin':_0x4566f1['coin']})['assign'](_0x3c8922)['write']();}async function placeOrder(_0x357176){const _0x377e8c=_0x4f5686,_0x690bc6=config[_0x377e8c(0x16f)]==_0x377e8c(0xb2)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x377e8c(0x17f)](currentCoins));for(const _0x437213 of _0x357176){let _0x2a2568,_0x488685,_0x505e06,_0x14f880,_0x4fe724,_0x16f954=_0x437213[_0x377e8c(0xad)];try{const _0x50a4d9=await exchange[_0x377e8c(0x1a3)](_0x16f954),_0x549fef=_0x50a4d9[_0x16f954];_0x2a2568=_0x549fef[_0x377e8c(0x163)],_0x488685=_0x549fef['bid'],_0x505e06=_0x549fef['ask'];_0x437213[_0x377e8c(0x196)]?(_0x14f880=_0x437213[_0x377e8c(0xe6)]=='buy'?_0x377e8c(0x116):'buy',_0x4fe724=Math['abs'](_0x437213[_0x377e8c(0x17d)])/_0x2a2568):(_0x14f880=_0x437213[_0x377e8c(0xe6)],_0x4fe724=Math[_0x377e8c(0x143)](_0x437213[_0x377e8c(0x17d)]));_0x690bc6=='limit'&&(config[_0x377e8c(0x16f)]==_0x377e8c(0xce)&&(_0x2a2568=_0x14f880==_0x377e8c(0x138)?_0x488685:_0x505e06),config[_0x377e8c(0x16f)]==_0x377e8c(0x102)&&(_0x2a2568=_0x14f880==_0x377e8c(0x138)?_0x505e06:_0x488685));_0x4fe724=formatResult(_0x4fe724,0x8),_0x2a2568=formatResult(_0x2a2568,0x8);const _0x4f7050=await exchange['createOrder'](_0x16f954,_0x690bc6,_0x14f880,_0x4fe724,_0x2a2568);lastOrders[_0x377e8c(0x15d)]({'orderId':_0x4f7050['id'],'symbol':_0x16f954,'side':_0x14f880,'reverse':_0x437213[_0x377e8c(0x196)],'amount':_0x437213[_0x377e8c(0x196)]?_0x4f7050[_0x377e8c(0x11c)]*_0x4f7050[_0x377e8c(0x1b2)]:_0x4f7050[_0x377e8c(0x11c)],'filled':_0x437213[_0x377e8c(0x196)]?_0x4f7050[_0x377e8c(0xd8)]*_0x4f7050[_0x377e8c(0x1b2)]:_0x4f7050[_0x377e8c(0xd8)],'price':_0x4f7050['price']});const _0x572edd=_0x14f880=='sell'?config[_0x377e8c(0x189)]?String[_0x377e8c(0x12b)]('0x'+config['emojisell'])+'\x20':'':config[_0x377e8c(0x184)]?String['fromCodePoint']('0x'+config[_0x377e8c(0x184)])+'\x20':'',_0x2b8445=_0x690bc6==_0x377e8c(0xb2)?_0x377e8c(0x10d):config[_0x377e8c(0x16f)]=='limit-high'?'Limit\x20(high-margin)':_0x377e8c(0x141);if(_0x690bc6==_0x377e8c(0xb2))logHistory('order',''+_0x572edd+_0x2b8445+'\x20order:\x20'+_0x16f954+'\x20'+_0x14f880+'\x20#'+formatResult(_0x4f7050['filled'],0x8)+'\x20@'+formatResult(_0x4f7050[_0x377e8c(0x1b2)],0x8));else logHistory(_0x377e8c(0x1af),''+_0x572edd+_0x2b8445+_0x377e8c(0x11b)+_0x16f954+'\x20'+_0x14f880+'\x20#'+formatResult(_0x4f7050['amount'],0x8)+'\x20@'+formatResult(_0x4f7050[_0x377e8c(0x1b2)],0x8));_0x4f7050[_0x377e8c(0x1a7)]=_0x437213[_0x377e8c(0x1a7)],await updateCoinResults(_0x4f7050);if(config[_0x377e8c(0x14b)]!=0x0){let _0x55f8bd=null;if(cooldownTracker[_0x377e8c(0x112)]==config[_0x377e8c(0x14b)]-0x1)_0x55f8bd=cooldownTracker[_0x377e8c(0xea)]();const _0x58e7e7=getTimeStamp();cooldownTracker[_0x377e8c(0x15d)](_0x58e7e7);if(_0x55f8bd){const _0x207d80=fns[_0x377e8c(0xf0)](new Date(_0x58e7e7),new Date(_0x55f8bd));_0x207d80<cooldownInterval&&(logHistory(_0x377e8c(0x140),_0x377e8c(0xb4)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x377e8c(0x144)+cooldownPeriod/(0xe10*0x3e8)+_0x377e8c(0x156)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x35a61b){if(_0x35a61b['toString']()['includes'](_0x377e8c(0xff)))logHistory(_0x377e8c(0x140),_0x377e8c(0x1b1)+_0x16f954);else{if(_0x35a61b['toString']()[_0x377e8c(0x185)](_0x377e8c(0x113)))logHistory('error',_0x377e8c(0x161)+_0x16f954);else await handleError(_0x35a61b,'placeOrder()');}}}if(lastOrders[_0x377e8c(0x112)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x377e8c(0x160)]&&(config[_0x377e8c(0x16f)]==_0x377e8c(0xb2)?logHistory('error',_0x377e8c(0x126)):logHistory(_0x377e8c(0x140),_0x377e8c(0xaf)));else coolingDown&&(!config['headless']&&logHistory(_0x377e8c(0x140),_0x377e8c(0x177)));}}function logHistory(_0x2148d1,_0x503362,_0x4e16c5=''){const _0x3db38c=_0x4f5686;let _0x2421f5={'time':getTimeStamp(),'type':_0x2148d1,'event':_0x503362};dbLogs[_0x3db38c(0x192)](_0x3db38c(0x19d))[_0x3db38c(0x15d)](_0x2421f5)[_0x3db38c(0x174)]();if(_0x4e16c5=='')_0x4e16c5=_0x503362;proxyEmit(_0x3db38c(0x173),{'log':_0x2421f5,'summary':_0x4e16c5}),process[_0x3db38c(0x139)]({'telegram':_0x2421f5}),logging(''+_0x2421f5[_0x3db38c(0x173)]);}function emitHistory(_0x2d6f29={}){const _0x286364=_0x4f5686;Object['keys'](_0x2d6f29)[_0x286364(0x112)]==0x0&&(_0x2d6f29={'type':[_0x286364(0x1af),_0x286364(0x173)],'event':'','page':0x1});if(_0x2d6f29['type'][_0x286364(0x185)](_0x286364(0x173)))_0x2d6f29['type'][_0x286364(0x179)](_0x2d6f29[_0x286364(0xe8)][_0x286364(0x199)](_0x286364(0x173)),0x1,_0x286364(0x140),_0x286364(0x132));if(dbLogs[_0x286364(0x193)](_0x286364(0x19d))[_0x286364(0x11a)]()){let _0xa4bd29=dbLogs[_0x286364(0x192)](_0x286364(0x19d))[_0x286364(0x14f)](_0x4f5aa5=>{const _0x2c9fee=_0x286364;if(_0x2d6f29['type'][_0x2c9fee(0x112)]==0x0)return![];else return _0x2d6f29[_0x2c9fee(0xe8)][_0x2c9fee(0x185)](_0x4f5aa5[_0x2c9fee(0xe8)]);})[_0x286364(0x14f)](_0x416238=>{const _0x2baa26=_0x286364;if(_0x2d6f29['event']=='')return!![];else return _0x416238[_0x2baa26(0x173)][_0x2baa26(0xc4)]()['includes'](_0x2d6f29['event'][_0x2baa26(0xc4)]());})[_0x286364(0x123)](_0x286364(0x15f)),_0x501921=_0xa4bd29['value']()[_0x286364(0x112)];_0xa4bd29=_0xa4bd29['reverse']()[_0x286364(0x155)]((_0x2d6f29['page']-0x1)*logPageSize,_0x2d6f29['page']*logPageSize-0x1)['reverse']()[_0x286364(0x11a)](),proxyEmit(_0x286364(0xed),{'logs':_0xa4bd29,'total':_0x501921});}else proxyEmit(_0x286364(0xed),{'logs':[],'total':0x0});}async function pauseBot(_0x5a275b){const _0x460743=_0x4f5686,_0x5adf11=new Date()[_0x460743(0xb8)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x5adf11-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x460743(0x139)]({'stop':_0x460743(0x18a)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x460743(0xb8)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x5a275b),botPaused=![],reset();}}async function handleError(_0x5a0e82,_0x4f9649,_0x533764=''){const _0x3eb3fd=_0x4f5686;if(_0x5a0e82['toString']()['includes']('DDoSProtection'))logHistory('error',_0x4f9649+_0x3eb3fd(0x14e)),await pauseBot(pauseBotInterval);else{if(_0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)](_0x3eb3fd(0xf2)))logHistory('error',_0x4f9649+_0x3eb3fd(0x14d)),await pauseBot(pauseBotInterval);else{if(_0x5a0e82['toString']()[_0x3eb3fd(0x185)](_0x3eb3fd(0x176)))logHistory(_0x3eb3fd(0x140),_0x4f9649+_0x3eb3fd(0x136)),await pauseBot(pauseBotInterval);else{if(_0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)]('API-key\x20format\x20invalid'))logHistory(_0x3eb3fd(0x140),_0x4f9649+_0x3eb3fd(0x1a2)),logHistory(_0x3eb3fd(0x140),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3eb3fd(0x139)]({'stop':_0x3eb3fd(0x135)});else{if(_0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)](_0x3eb3fd(0x1ab)))logHistory(_0x3eb3fd(0x140),_0x4f9649+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x3eb3fd(0x140),_0x3eb3fd(0x15b)),process[_0x3eb3fd(0x139)]({'stop':_0x3eb3fd(0x135)});else{if(_0x5a0e82['toString']()['includes'](_0x3eb3fd(0xf1)))logHistory(_0x3eb3fd(0x140),_0x4f9649+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3eb3fd(0x140),_0x3eb3fd(0x15b)),process[_0x3eb3fd(0x139)]({'stop':_0x3eb3fd(0x135)});else{if(_0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3eb3fd(0x140),_0x4f9649+_0x3eb3fd(0x13f)),logHistory(_0x3eb3fd(0x140),_0x3eb3fd(0x15b)),process['send']({'stop':_0x3eb3fd(0x135)});else{if(_0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)]('InvalidNonce'))logHistory('error',_0x4f9649+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20(2)\x20-\x20please\x20sync\x20clock'),logHistory(_0x3eb3fd(0x140),_0x3eb3fd(0x15b)),process['send']({'stop':_0x3eb3fd(0x135)});else _0x5a0e82[_0x3eb3fd(0x16e)]()[_0x3eb3fd(0x185)]('InsufficientFunds')?logHistory(_0x3eb3fd(0x140),_0x4f9649+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x3eb3fd(0x140),_0x4f9649+_0x3eb3fd(0xf9)),logging(_0x4f9649+_0x3eb3fd(0x1ac),_0x5a0e82),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x538b5d,_0x238749){const _0x180223=_0x4f5686;return parseFloat(_0x538b5d[_0x180223(0x16d)](_0x238749));}function logging(_0x8c523f,_0x42e208=''){const _0x30e7ba=_0x4f5686;console['log'](getTimeStamp()+_0x30e7ba(0x10e)+botID+_0x30e7ba(0x101)+_0x8c523f,_0x42e208);}function getServerTime(){const _0x35ca89=_0x4f5686,_0x444f6d=new Date();return _0x444f6d['getFullYear']()+'/'+(_0x444f6d['getMonth']()+0x1)[_0x35ca89(0x16e)]()[_0x35ca89(0xbc)](0x2,'0')+'/'+_0x444f6d[_0x35ca89(0x14c)]()[_0x35ca89(0x16e)]()[_0x35ca89(0xbc)](0x2,'0')+'\x20'+_0x444f6d['getHours']()[_0x35ca89(0x16e)]()[_0x35ca89(0xbc)](0x2,'0')+':'+_0x444f6d[_0x35ca89(0x121)]()[_0x35ca89(0x16e)]()['padStart'](0x2,'0')+':'+_0x444f6d[_0x35ca89(0x17a)]()[_0x35ca89(0x16e)]()[_0x35ca89(0xbc)](0x2,'0');}function getTimeStamp(){const _0x2254e0=_0x4f5686,_0x26ea94=shiftedTime();return _0x26ea94[_0x2254e0(0xd6)]()+'/'+(_0x26ea94[_0x2254e0(0xc5)]()+0x1)['toString']()[_0x2254e0(0xbc)](0x2,'0')+'/'+_0x26ea94[_0x2254e0(0x14c)]()[_0x2254e0(0x16e)]()[_0x2254e0(0xbc)](0x2,'0')+'\x20'+_0x26ea94[_0x2254e0(0x13d)]()[_0x2254e0(0x16e)]()[_0x2254e0(0xbc)](0x2,'0')+':'+_0x26ea94['getMinutes']()[_0x2254e0(0x16e)]()[_0x2254e0(0xbc)](0x2,'0')+':'+_0x26ea94[_0x2254e0(0x17a)]()[_0x2254e0(0x16e)]()[_0x2254e0(0xbc)](0x2,'0');}function getDate(){const _0x4994fa=_0x4f5686,_0xc7f17d=shiftedTime();return _0xc7f17d[_0x4994fa(0xd6)]()+'/'+(_0xc7f17d[_0x4994fa(0xc5)]()+0x1)[_0x4994fa(0x16e)]()[_0x4994fa(0xbc)](0x2,'0')+'/'+_0xc7f17d[_0x4994fa(0x14c)]()[_0x4994fa(0x16e)]()['padStart'](0x2,'0');}function getHour(){const _0x512a90=_0x4f5686,_0x188e14=shiftedTime();return _0x188e14['getHours']()[_0x512a90(0x16e)]()[_0x512a90(0xbc)](0x2,'0');}function sleep(_0x346f0c){return new Promise(_0x38da02=>setTimeout(_0x38da02,_0x346f0c));}function shiftedTime(){const _0x10efc9=_0x4f5686,_0x4fe196=new Date();let _0x38cf95=_0x4fe196;if(config&&config['timeshift']!==0x0)_0x38cf95=fns[_0x10efc9(0x191)](_0x4fe196,{'hours':config[_0x10efc9(0xf7)]});return _0x38cf95;}