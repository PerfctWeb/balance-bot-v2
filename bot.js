const _0x131c64=_0x236c;(function(_0x4f8a6e,_0x5b82e7){const _0x55a1b8=_0x236c,_0x39c6ad=_0x4f8a6e();while(!![]){try{const _0x2e39a0=parseInt(_0x55a1b8(0x29b))/0x1+parseInt(_0x55a1b8(0x21a))/0x2+-parseInt(_0x55a1b8(0x209))/0x3*(-parseInt(_0x55a1b8(0x23d))/0x4)+parseInt(_0x55a1b8(0x1ad))/0x5*(parseInt(_0x55a1b8(0x214))/0x6)+parseInt(_0x55a1b8(0x1b3))/0x7*(-parseInt(_0x55a1b8(0x173))/0x8)+parseInt(_0x55a1b8(0x1d5))/0x9+-parseInt(_0x55a1b8(0x21d))/0xa;if(_0x2e39a0===_0x5b82e7)break;else _0x39c6ad['push'](_0x39c6ad['shift']());}catch(_0x58c513){_0x39c6ad['push'](_0x39c6ad['shift']());}}}(_0x497a,0xf1e4a));const _0x4631ac=function(){let _0x555496=!![];return function(_0x100b2c,_0x5367d1){const _0x2cc7a5=_0x555496?function(){const _0x297438=_0x236c;if(_0x5367d1){const _0x1e41ff=_0x5367d1[_0x297438(0x16d)](_0x100b2c,arguments);return _0x5367d1=null,_0x1e41ff;}}:function(){};return _0x555496=![],_0x2cc7a5;};}(),_0x318a3e=_0x4631ac(this,function(){const _0x5982a4=_0x236c;return _0x318a3e[_0x5982a4(0x157)]()[_0x5982a4(0x232)]('(((.+)+)+)+$')[_0x5982a4(0x157)]()['constructor'](_0x318a3e)['search']('(((.+)+)+)+$');});_0x318a3e();'use strict';const ccxt=require(_0x131c64(0x244)),low=require(_0x131c64(0x1d9)),FileSync=require(_0x131c64(0x158)),fs=require('fs'),fns=require(_0x131c64(0x231)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require(_0x131c64(0x159)),argv=require(_0x131c64(0x18b))(process['argv'][_0x131c64(0x2bc)](0x2))[_0x131c64(0x15c)],path=require(_0x131c64(0x266));let exchange;global[_0x131c64(0x167)]={},global['change']={};const usdBasecoins=[_0x131c64(0x1ec),_0x131c64(0x1f6),_0x131c64(0x1dd),'USDT',_0x131c64(0x16b),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x131c64(0x21b)+pauseBotInterval/0xea60+_0x131c64(0x2e7),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x131c64(0x247))[_0x131c64(0x2c8)],botID=process['argv'][0x2]||_0x131c64(0x2d4),pattern=/^[0-9]{3}$/;!pattern[_0x131c64(0x212)](botID)&&(console[_0x131c64(0x207)](_0x131c64(0x1b5)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x131c64(0x15c)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x131c64(0x22b),logspath=userID?_0x131c64(0x298)+userID+'/':_0x131c64(0x298),loggerfile=fs[_0x131c64(0x25f)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x131c64(0x1bc)](configpath)&&fs[_0x131c64(0x1f5)](configpath);!fs[_0x131c64(0x1bc)](logspath)&&fs[_0x131c64(0x1f5)](logspath);const configfile=configpath+_0x131c64(0x2a9)+botID+_0x131c64(0x289),logfile=configpath+_0x131c64(0x2a9)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x131c64(0x2a9)+botID+'-results.json',settingsfile=configpath+_0x131c64(0x28e),securefile=configpath+_0x131c64(0x248),configbackuppath=configpath+_0x131c64(0x22a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x131c64(0x1a1)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x131c64(0x1a1)]({'data':[],'version':serverversion})[_0x131c64(0x1be)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x131c64(0x1a1)]({'bot':[],'version':serverversion})[_0x131c64(0x1be)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x131c64(0x1a1)]({'coins':[],'version':serverversion})[_0x131c64(0x1be)]();function _0x497a(){const _0x471161=['password','yyyy/MM/dd','\x20network\x20error','buy','exchange','total','resetHistory','BadSymbol','bot','USD','floor','<b>','fetchOpenOrders','send','number','writeFile','usd','Insufficient\x20funds\x20to\x20execute\x20order:\x20','mkdirSync','BUSD','Manual\x20balancing\x20required','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','warning','<b>Bot\x20','parseISO','ExchangeNotAvailable','none','customId','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20>\x20[DEBUG]\x20','Pausing\x20for\x20','storeFiat','AuthenticationError','valid','eur','getSeconds','log','event','3346143fmWyBj','Order\x20filled:\x20','RequestTimeout','cooldown','round','autoliquidity','success','\x20change','1\x20-\x20Validate\x20orders:\x20','test','find','11648580mCYfNy','price','Invalid\x20quantity','keys','rightTxt','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','1392784NMCQjV','\x20-\x20Pausing\x20bot\x20for\x20','active','59082030svUFVC','order','get','\x20not\x20responding','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','sortBy','limit-high','NetworkError','last','getMonth','add','cancelLoading','Error\x20details:','/backup/','./config/','ordertype','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','starting-balance-','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Order\x20amount\x20is\x20invalid:\x20','date-fns','search','buys','shift','Transaction\x20detection\x20blocked','string','debug','fromCodePoint','remove','ORDERS.LOCKED','API-key\x20format\x20invalid','has','4diohZf','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','leftTxt','getCoins()','fetchTickers','join','type','ccxt','BNB','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','./version.json','bb-secure.json','toUpperCase','average','datetime','************','split','abs','watchTransactions()','</pre>','substring','placeOrder()','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','differenceInSeconds','coins','exchange\x20reloaded','cost','-------------------------------\x0a','Exchange','ExchangeError','logs','unlinkSync','watchTrades','\x20API\x20secret\x20is\x20invalid','createWriteStream','recovery','%\x20(','\x20portfolio:</b>\x20\x0a\x0a','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','limit','path','remainingSymbols','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','RateLimitExceeded','threshold','coin-loading-progress','Executed\x20','ETH','error','reverse','side','Bitget','amountToPrecision','ORDERS.UNLOCKING','RSA-OAEP','***','spot','createOrder','MIN_NOTIONAL','basecoinvalue','time','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','page','uncaughtException','sendPortfolioTelegram','InvalidNonce','watchTrades()','basecoin','settings','initial','sendMetricsTelegram','Cooldown\x20ended\x20-\x20balancing\x20resumed','Invalid\x20API\x20key\x20or\x20secret\x20entered','timeshift','-config.json','toggleBotMode','stopExchange()','getOpenOrders()','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','bb-settings.json','assign','final','distribution','fee','Error\x20while\x20deleting\x20files:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','timeout','Limit\x20(high-margin)','apiKey','./logs/','realized','BNB/','1946170WchlIZ','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20',':\x20timer\x20>','portfolio','fetchTicker','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','changes','status','parse','\x20|\x20exchange:\x20','getPortfolio(0)','fetchBalance','set','Reset\x20|\x20','bot-','min','showname','LOCKED','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','2\x20-\x20Orders\x20unlocked','milliseconds','Bot\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','Net\x20effect','loadMarkets','pro','added','length','configuration','coin','getPortfolio','random','replace','slice','filled','findIndex','cancel','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20|\x20lock\x20orders:\x20','sell','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','orderstatus','excluded','net-basecoin','closed','version','Market','breakeven','EUR','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','padStart','Saving\x20configuration','entries','cloneDeep',':\x20Bot\x20','enabled','InsufficientFunds','001','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','balances','market','additional\x20symbols\x20','no\x20open\x20orders','trade','exchange\x20not\x20reloaded','1\x20-\x20FILLED:\x20','\x20API\x20key\x20is\x20invalid','-performance.json','highest','getFullYear','close','getPortfolio(1)','sells','exchanges','apiPassword','liquidity','\x20minutes','Order\x20is\x20invalid:\x20','filter','2.3.5','UNLOCKING','USDT','initclient','onepagemode','progress','stringify','loadSymbols()','\x20exchange','\x20hour','starting-balances','2\x20-\x20Handled\x20open\x20orders','toString','lowdb/adapters/FileSync','util','fees','ORDERS.UNLOCKED','argv','function','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','showConfig','max','getAllOrders()','2\x20-\x20Validate\x20orders:\x20','openOrders','emojibuy','OrderNotFound','startnumber','ticker','open','\x20exchange\x20error','symbol','USDC','bots','apply','startsWith','InvalidOrder','getTime','balancing\x20resumes\x20when\x20cooldown\x20ends','restart','2385832JauPjg','Uncaught\x20Exception:','Failed\x20to\x20load\x20coin\x20data\x20for\x20','orderId','DDoSProtection','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getMinutes','botID','Exception\x20thrown\x20in\x20','loading-canceled','padEnd','watchOrders','BTC','UNLOCKED','args','offset','2.6.0','Avoiding\x20continuous\x20order\x20attempts','isEqual','OnMaintenance','Resetting\x20bot\x20history','Fee\x20discount\x20refund\x20detected:\x20','Transaction\x20detection\x20unblocked','\x20|\x20','yargs/yargs','headless','\x20metrics:</b>\x20\x0a\x0a','\x20order:\x20','getCoinNumber()','\x20|\x20highest\x20fee:\x20','canceled','change','Initializing\x20coin\x20results','fetchTickers()','delta','botname','getHours','format','1\x20-\x20Unlock\x20orders','Portfolio\x20change\x20detected:\x20','includes','watchOrders()','value','apiSecret','\x20>\x20','2.5.0','defaults','sort','Net\x20','limits','toLowerCase','removed','no\x20additional\x20symbols','target','data','exec','placeOrder','\x20:\x20','5OwvxqW','startdate','startprice','full','\x20not\x20available','ID:\x20','14SppjfH','secure','Error:\x20Invalid\x20argument\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','currency','change24h','splice','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','recent20','existsSync','colorscheme','write','net-fiat','event-history','-results.json','limit-low','Huobipro','privateKey','deleteHistoryAlerts','performance','forEach','fiat','ongoing','cancelOrders()','running','cancelOrder','yyyy-MM-dd\x27T\x27HH:mm:ss','<pre>','message','1\x20-\x20Handle\x20open\x20orders','No\x20more\x20open\x20orders\x20-\x20','-events.json','2\x20-\x20FILLED\x20known\x20order:\x20','decrypt','16164738fNXXeU','Binance','\x20minutes\x20-\x20','timestamp','lowdb','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','push','amount','TUSD','emitHistory','toFixed','fetchClosedOrders','getDate','date'];_0x497a=function(){return _0x471161;};return _0x497a();}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x131c64(0x274)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x41bed0=>{const _0x30339c=_0x131c64;console[_0x30339c(0x207)](_0x41bed0);},'simple':_0x5a0655=>{const _0x1745bb=_0x131c64;console[_0x1745bb(0x207)](_0x5a0655),loggerfile[_0x1745bb(0x1be)](util[_0x1745bb(0x198)](_0x5a0655)+'\x0a');},'full':async(_0x49aef2,_0x10b580='')=>{const _0x1cc856=_0x131c64;let _0x3af0aa;if(config[_0x1cc856(0x2ab)])_0x3af0aa=getTimeStamp()+':\x20'+config[_0x1cc856(0x196)]+_0x1cc856(0x19f)+_0x49aef2;else _0x3af0aa=getTimeStamp()+_0x1cc856(0x2d1)+botID+_0x1cc856(0x19f)+_0x49aef2;console['log'](_0x3af0aa),loggerfile[_0x1cc856(0x1be)](util['format'](_0x3af0aa)+'\x0a'),_0x10b580&&(console[_0x1cc856(0x207)](_0x10b580),loggerfile[_0x1cc856(0x1be)](util['format'](_0x10b580)+'\x0a'));},'debug':async(_0x7dc7be,_0x3b5f0c='')=>{const _0x361581=_0x131c64;let _0x107f17;if(config[_0x361581(0x2ab)])_0x107f17=getTimeStamp()+':\x20'+config[_0x361581(0x196)]+_0x361581(0x200)+_0x7dc7be;else _0x107f17=getTimeStamp()+_0x361581(0x2d1)+botID+_0x361581(0x200)+_0x7dc7be;if(debugging)console[_0x361581(0x207)](_0x107f17);loggerfile['write'](util['format'](_0x107f17)+'\x0a');if(_0x3b5f0c){if(debugging)console[_0x361581(0x207)](_0x3b5f0c);loggerfile[_0x361581(0x1be)](util[_0x361581(0x198)](_0x3b5f0c)+'\x0a');}}};process['on'](_0x131c64(0x27e),function(_0x6bc26f){const _0x37d51b=_0x131c64;logHistory(_0x37d51b(0x26e),_0x37d51b(0x2cc)),logger['debug'](_0x37d51b(0x174),_0x6bc26f);});settings[_0x131c64(0x288)]!=config[_0x131c64(0x288)]&&updateTimeshift(settings[_0x131c64(0x288)]);settings[_0x131c64(0x2ee)]!=config[_0x131c64(0x2ee)]&&updateOnepagemode(settings[_0x131c64(0x2ee)]);process['send']({'started':_0x131c64(0x1cb)},_0x31c4c7=>{}),initializeProcessListeners();function proxyEmit(_0x282da2,_0x2ff478=null){const _0x5f0377=_0x131c64;process[_0x5f0377(0x1f0)]({'function':_0x282da2,'args':_0x2ff478},_0x3a6482=>{});}function initializeProcessListeners(){const _0x175d6f=_0x131c64;process['on'](_0x175d6f(0x1cf),_0x14e5d3=>{const _0x313270=_0x175d6f;switch(Object[_0x313270(0x217)](_0x14e5d3)[0x0]){case'timeshift':_0x14e5d3[_0x313270(0x288)]!=undefined&&(settings['timeshift']=_0x14e5d3['timeshift'],updateTimeshift(settings[_0x313270(0x288)]));break;case _0x313270(0x2ee):_0x14e5d3[_0x313270(0x2ee)]!=undefined&&(settings[_0x313270(0x2ee)]=_0x14e5d3[_0x313270(0x2ee)],updateOnepagemode(settings[_0x313270(0x2ee)]));break;case _0x313270(0x16c):_0x14e5d3[_0x313270(0x16c)]!=undefined&&(bots=JSON['parse'](_0x14e5d3[_0x313270(0x16c)]),proxyEmit('bots',bots));break;case _0x313270(0x15d):switch(_0x14e5d3[_0x313270(0x15d)]){case _0x313270(0x2ed):initclient();break;case _0x313270(0x28a):toggleBotMode();break;case _0x313270(0x1de):emitHistory(_0x14e5d3['args']);break;case _0x313270(0x1c5):deleteHistoryAlerts(_0x14e5d3[_0x313270(0x181)]);break;case _0x313270(0x2b9):getPortfolio(_0x14e5d3[_0x313270(0x181)]);break;case'storeConfiguration':storeConfiguration(_0x14e5d3['args']);break;case'storeHeadless':storeHeadless(_0x14e5d3['args']);break;case _0x313270(0x202):storeFiat(_0x14e5d3[_0x313270(0x181)]);break;case _0x313270(0x1e9):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x313270(0x1ab):placeOrder(_0x14e5d3['args']);break;case _0x313270(0x228):cancelLoading();break;case _0x313270(0x15f):showConfig();break;case _0x313270(0x285):sendMetricsTelegram();break;case _0x313270(0x27f):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0xcb22e7=null,_0x33b12d=![]){const _0x36135b=_0x131c64;logger[_0x36135b(0x237)](_0x36135b(0x2a8)+(_0xcb22e7&&_0xcb22e7[_0x36135b(0x2b6)]>0x0?_0x36135b(0x2d8)+_0xcb22e7[_0x36135b(0x242)](','):_0x36135b(0x1a7))+_0x36135b(0x18a)+(_0x33b12d?_0x36135b(0x256):_0x36135b(0x2db))+_0x36135b(0x2a4)+config[_0x36135b(0x1e7)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x33b12d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x36135b(0x297)]!=''&&config['apiKey']!=_0x36135b(0x275)){loadingProgress=0x0;if(_0x33b12d){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xc8b489){handleErrorNoStop(_0xc8b489,_0x36135b(0x2f1));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0xcb22e7);const _0x1a504f=await getCoins();[currentCoins,currentCoinsAll]=_0x1a504f,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x36135b(0x1b0)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x36135b(0x2b6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x462147=_0x131c64;exchangeStopped=!![];try{await exchange[_0x462147(0x2e1)]();}catch(_0x543a88){await handleError(_0x543a88,_0x462147(0x28b));}}async function reloadExchange(){const _0x4d43db=_0x131c64;logger[_0x4d43db(0x237)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x4d43db(0x180)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x4d43db(0x237)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x19e60e=config['exchange'],_0x3b258c=config[_0x131c64(0x297)],_0x4b43e2=config['apiSecret'],_0x373a0d=config['apiPassword']){const _0x4ea33d=_0x131c64;exchange&&await stopExchange();!supportedExchanges()[_0x4ea33d(0x19b)](_0x19e60e)&&(logHistory('error',_0x4ea33d(0x219)+_0x19e60e+_0x4ea33d(0x153)),killBot());const _0x28233b=ccxt[_0x4ea33d(0x2b4)][_0x19e60e[_0x4ea33d(0x1a5)]()];exchange=new _0x28233b({'apiKey':_0x3b258c,'secret':_0x4b43e2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x373a0d)exchange[_0x4ea33d(0x1e3)]=_0x373a0d;}function setStableCoins(){const _0x14d04a=_0x131c64;let _0x207ae6=config[_0x14d04a(0x282)]==_0x14d04a(0x26d)?_0x14d04a(0x26d):_0x14d04a(0x17f),_0x15e3d9=!allSymbols[_0x14d04a(0x19b)](_0x207ae6+'/USD')?_0x14d04a(0x2ec):_0x14d04a(0x1ec),_0x37d26e=!allSymbols[_0x14d04a(0x19b)](_0x207ae6+'/EUR')?_0x15e3d9:_0x14d04a(0x2cb);stablecoins={'eur':{'coin':''+_0x207ae6+_0x37d26e,'symbol':_0x207ae6+'/'+_0x37d26e},'usd':{'coin':''+_0x207ae6+_0x15e3d9,'symbol':_0x207ae6+'/'+_0x15e3d9}};}async function initwsCcxt(_0xf518e8){const _0x231a27=_0x131c64;_0xf518e8==null&&(_0xf518e8=[],config['portfolio'][_0x231a27(0x1c7)](_0x29101e=>{const _0x4eaedb=_0x231a27;if(!_0x29101e['excluded']&&_0x29101e[_0x4eaedb(0x2b8)]!=config['basecoin'])_0xf518e8[_0x4eaedb(0x1db)](_0x29101e[_0x4eaedb(0x16a)]);}));if(!_0xf518e8[_0x231a27(0x19b)](stablecoins[_0x231a27(0x205)][_0x231a27(0x16a)]))_0xf518e8[_0x231a27(0x1db)](stablecoins[_0x231a27(0x205)][_0x231a27(0x16a)]);if(!_0xf518e8[_0x231a27(0x19b)](stablecoins[_0x231a27(0x1f3)][_0x231a27(0x16a)]))_0xf518e8[_0x231a27(0x1db)](stablecoins[_0x231a27(0x1f3)][_0x231a27(0x16a)]);if(config[_0x231a27(0x1e7)][_0x231a27(0x16e)](_0x231a27(0x1d6))){if(!_0xf518e8['includes'](_0x231a27(0x29a)+config[_0x231a27(0x282)]))_0xf518e8[_0x231a27(0x1db)]('BNB/'+config['basecoin']);}loadCoins(_0xf518e8),_0xf518e8=validateSymbols(_0xf518e8);const _0x475700=async _0x1d3664=>{const _0x2a2f92=_0x231a27;let _0x4ae309;try{const _0x2d16be=await exchange[_0x2a2f92(0x241)](_0x1d3664);Object[_0x2a2f92(0x2cf)](_0x2d16be)[_0x2a2f92(0x1c7)](_0x4492ff=>{const _0x2cf4ca=_0x2a2f92;_0x4ae309=_0x4492ff[0x1][_0x2cf4ca(0x16a)],global[_0x2cf4ca(0x167)][noslash(_0x4ae309)]=_0x4492ff[0x1][_0x2cf4ca(0x225)];});}catch(_0x55959d){await handleError(_0x55959d,'initTickers()',_0x4ae309);}},_0x26768b=async _0x2054e4=>{const _0x1ba69b=_0x231a27;while(!![]){if(!botPaused)try{const _0x11804d=await exchange[_0x1ba69b(0x25d)](_0x2054e4);global[_0x1ba69b(0x167)][noslash(_0x11804d[0x0][_0x1ba69b(0x16a)])]=_0x11804d[0x0][_0x1ba69b(0x215)],await sleep(0x3e8);}catch(_0x5e5c17){if(!exchangeStopped)await handleError(_0x5e5c17,_0x1ba69b(0x281),_0x2054e4);}else await sleep(0x64);}},_0x4029f4=async _0x157418=>{const _0x3aed8f=_0x231a27;while(!![]){if(!botPaused)try{const _0x6c1829=await exchange[_0x3aed8f(0x29f)](_0x157418);global['change'][_0x6c1829[_0x3aed8f(0x16a)]]=_0x6c1829['percentage'],await sleep(0x3c*0x3e8);}catch(_0xc06436){if(!exchangeStopped)await handleError(_0xc06436,_0x3aed8f(0x194),_0x157418);}else await sleep(0x64);}},_0x26facb=async _0x5f40c1=>{const _0x411937=_0x231a27;while(!![]){if(!botPaused)try{const _0x505c6c=await exchange[_0x411937(0x17e)](_0x5f40c1);_0x505c6c[_0x411937(0x1c7)](_0x5589b1=>{updateNumberCoinsCcxt(_0x5589b1);});}catch(_0x10fc11){if(!exchangeStopped)await handleError(_0x10fc11,_0x411937(0x19c));}else await sleep(0x64);}};_0x475700(_0xf518e8),_0xf518e8[_0x231a27(0x1c7)](_0x376280=>{_0x26768b(_0x376280),_0x4029f4(_0x376280),_0x26facb(_0x376280);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x28c541=_0x131c64;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1b84c9=await getCoins(),[_0x2ce957,_0x58acd4]=_0x1b84c9;let _0x3d3019=[];currentCoins[_0x28c541(0x1c7)](_0x5ca79c=>{const _0xcb2585=_0x28c541,_0x17369f=_0x2ce957[_0xcb2585(0x213)](_0xbe6af1=>_0xbe6af1[_0xcb2585(0x2b8)]==_0x5ca79c[_0xcb2585(0x2b8)]);if(_0x17369f){if(_0x5ca79c[_0xcb2585(0x1f1)]!=_0x17369f[_0xcb2585(0x1f1)]){let _0x5a0d4d;if(_0x5ca79c[_0xcb2585(0x2b8)]!=config[_0xcb2585(0x282)]){const _0x18afa6=global[_0xcb2585(0x167)][noslash(_0x5ca79c['symbol'])];_0x5a0d4d=_0x5ca79c['reverse']?0x1/_0x18afa6:_0x18afa6;}else _0x5a0d4d=0x1;_0x3d3019[_0xcb2585(0x1db)]({'coin':_0x5ca79c['coin'],'symbol':_0x5ca79c[_0xcb2585(0x16a)],'price':_0x5a0d4d,'number':Number(formatResult(_0x17369f[_0xcb2585(0x1f1)]-_0x5ca79c[_0xcb2585(0x1f1)],0x8)),'basecoinvalue':_0x5a0d4d*(_0x17369f[_0xcb2585(0x1f1)]-_0x5ca79c['number'])});}}});if(_0x3d3019[_0x28c541(0x2b6)]==0x1&&!blockTransactionDetection){if(config[_0x28c541(0x20e)]){logger[_0x28c541(0x237)](_0x28c541(0x1ba)+_0x3d3019[0x0][_0x28c541(0x279)]+_0x28c541(0x190)+lastFees[_0x28c541(0x2df)]);if(lastFees[_0x28c541(0x2df)]==0x0||Math[_0x28c541(0x24e)](_0x3d3019[0x0][_0x28c541(0x279)])>lastFees[_0x28c541(0x2df)]){delete _0x3d3019[0x0][_0x28c541(0x16a)],delete _0x3d3019[0x0][_0x28c541(0x279)];let _0x4826e5=[],_0x56355c=[...config[_0x28c541(0x2e6)]]||[],_0x347181=config[_0x28c541(0x2e6)];_0x56355c[_0x28c541(0x1a2)]((_0x1a0ab1,_0x2eae0e)=>_0x1a0ab1[_0x28c541(0x1e2)]>_0x2eae0e[_0x28c541(0x1e2)]?-0x1:_0x2eae0e['date']>_0x1a0ab1['date']?0x1:0x0);const _0x5cd2c2=getDate();if(_0x56355c[0x0]){const _0x34df65=fns[_0x28c541(0x2a3)](_0x56355c[0x0]['date'],'yyyy/MM/dd',new Date()),_0x2e73f9=fns[_0x28c541(0x2a3)](_0x5cd2c2,_0x28c541(0x1e4),new Date());if(fns[_0x28c541(0x185)](_0x34df65,_0x2e73f9)){_0x4826e5=_0x56355c[0x0][_0x28c541(0x2a1)];const _0x4abd87=_0x4826e5['find'](_0x495992=>_0x495992[_0x28c541(0x2b8)]==_0x3d3019[0x0]['coin']);_0x4abd87?(_0x4abd87[_0x28c541(0x1f1)]+=_0x3d3019[0x0]['number'],_0x4abd87['number']==0x0&&(_0x4826e5=_0x4826e5[_0x28c541(0x2e9)](_0x4b941f=>{const _0x219012=_0x28c541;return _0x4b941f['coin']!=_0x3d3019[0x0][_0x219012(0x2b8)];}))):_0x4826e5[_0x28c541(0x1db)](_0x3d3019[0x0]);const _0x296aa6=_0x347181[_0x28c541(0x213)](_0x1d575c=>_0x1d575c[_0x28c541(0x1e2)]==_0x5cd2c2);_0x296aa6[_0x28c541(0x2a1)]=_0x4826e5;}else _0x347181[_0x28c541(0x1db)]({'date':_0x5cd2c2,'changes':[_0x3d3019[0x0]]});}const _0x5996d6=_0x347181[_0x28c541(0x213)](_0x2e7a4d=>_0x2e7a4d[_0x28c541(0x1e2)]==_0x5cd2c2);if(_0x5996d6){let _0x175322=!![];_0x5996d6[_0x28c541(0x2a1)][_0x28c541(0x1c7)](_0x2744fc=>{const _0x55ead4=_0x28c541;if(_0x2744fc[_0x55ead4(0x1f1)]!=0x0)_0x175322=![];}),_0x175322&&(_0x347181=_0x347181[_0x28c541(0x2e9)](_0x2d478d=>{const _0x15dcd0=_0x28c541;return _0x2d478d[_0x15dcd0(0x1e2)]!=_0x5cd2c2;}));}let _0x33f2cd=dbConfig[_0x28c541(0x21f)]('bot')[_0x28c541(0x213)]({'botID':botID})[_0x28c541(0x19d)]();_0x33f2cd&&(dbConfig[_0x28c541(0x21f)](_0x28c541(0x1eb))['find']({'botID':botID})[_0x28c541(0x28f)]({'liquidity':_0x347181})[_0x28c541(0x1be)](),config[_0x28c541(0x2e6)]=_0x347181),logHistory('success',_0x28c541(0x19a)+Math['abs'](_0x3d3019[0x0]['number'])+'\x20'+_0x3d3019[0x0][_0x28c541(0x2b8)]+'\x20'+(_0x3d3019[0x0][_0x28c541(0x1f1)]>0x0?_0x28c541(0x2b5):'removed')+_0x28c541(0x253)),proxyEmit(_0x28c541(0x2b7),emittedConfiguration());}else logger[_0x28c541(0x237)](_0x28c541(0x188)+Math['abs'](_0x3d3019[0x0][_0x28c541(0x1f1)])+'\x20'+_0x3d3019[0x0][_0x28c541(0x2b8)]+'\x20'+(_0x3d3019[0x0]['number']>0x0?_0x28c541(0x2b5):'removed'));transactionDetected=!![],currentCoins=_0x2ce957,currentCoinsAll=_0x58acd4;}else logger[_0x28c541(0x237)](_0x28c541(0x19a)+Math[_0x28c541(0x24e)](_0x3d3019[0x0][_0x28c541(0x1f1)])+'\x20'+_0x3d3019[0x0][_0x28c541(0x2b8)]+'\x20'+(_0x3d3019[0x0][_0x28c541(0x1f1)]>0x0?'added':_0x28c541(0x1a6))+_0x28c541(0x22f)),currentCoins=_0x2ce957,currentCoinsAll=_0x58acd4;}await sleep(watchTransactionsInterval);}catch(_0x460fd4){if(!exchangeStopped)await handleError(_0x460fd4,_0x28c541(0x24f));}else await sleep(0x64);}}async function loadSymbols(){const _0x45b21e=_0x131c64;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x45b21e(0x2cf)](markets)[_0x45b21e(0x1c7)](_0x17244a=>{const _0x40057e=_0x45b21e;_0x17244a[0x1][_0x40057e(0x21c)]&&_0x17244a[0x1][_0x40057e(0x276)]&&allSymbols[_0x40057e(0x1db)](_0x17244a[0x0]);});}catch(_0x1b6602){throw _0x1b6602;}}function validateSymbols(_0x115a79){let _0xc94810=[];return _0x115a79['forEach'](_0x2c8ac3=>{const _0x2cab01=_0x236c;!allSymbols[_0x2cab01(0x19b)](_0x2c8ac3)?logHistory(_0x2cab01(0x26e),'Invalid\x20symbol:\x20'+_0x2c8ac3+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0xc94810[_0x2cab01(0x1db)](_0x2c8ac3);}),_0xc94810;}async function initclient(){const _0x364111=_0x131c64;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x364111(0x2d6),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x226043=getNormalizedPerformance();emitPerformance(_0x226043),getStartingBalances(_0x226043);}async function toggleBotMode(){const _0xb12846=_0x131c64;let _0x24de16=dbConfig[_0xb12846(0x21f)](_0xb12846(0x1eb))[_0xb12846(0x213)]({'botID':botID})[_0xb12846(0x19d)]();if(_0x24de16){const _0x1bcc7d=!_0x24de16[_0xb12846(0x18c)];dbConfig[_0xb12846(0x21f)](_0xb12846(0x1eb))['find']({'botID':botID})[_0xb12846(0x28f)]({'headless':_0x1bcc7d})[_0xb12846(0x1be)](),config[_0xb12846(0x18c)]=_0x1bcc7d,proxyEmit(_0xb12846(0x2b7),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x10d87e=_0x131c64;process[_0x10d87e(0x1f0)]({'updatebotmanager':!![]},_0x5d8cd7=>{});}async function loadCoins(_0x3965c7){const _0x585c91=_0x131c64;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1a5b56,_0x1f760c=0x0,_0x337b85=0x0;_0x3965c7['forEach'](_0x2ff9a9=>{const _0x14a651=_0x236c;loading['remainingSymbols'][_0x14a651(0x1db)](_0x2ff9a9);}),loadingCanceled=![];let _0x4492e7=![];while(_0x1a5b56!=_0x3965c7['length']+maxLoadingProgress){_0x1a5b56=loadingProgress,_0x3965c7[_0x585c91(0x1c7)](_0x3e43a1=>{const _0x347c43=_0x585c91;if(global[_0x347c43(0x167)][noslash(_0x3e43a1)]){loading[_0x347c43(0x267)]=loading['remainingSymbols']['filter'](_0x23ded6=>_0x23ded6!=_0x3e43a1);if(!watchedSymbols['includes'](_0x3e43a1))watchedSymbols[_0x347c43(0x1db)](_0x3e43a1);_0x1a5b56++;}}),loading['progress']=Math[_0x585c91(0x20d)](_0x1a5b56/(_0x3965c7[_0x585c91(0x2b6)]+maxLoadingProgress)*0x64);loading[_0x585c91(0x2ef)]!=0x64&&(_0x337b85>0x1e*0x5&&(loading[_0x585c91(0x295)]=!![],emitLoadingProgress()),_0x337b85>0x78*0x5&&!_0x4492e7&&(loading[_0x585c91(0x2bf)]=!![],emitLoadingProgress(),_0x4492e7=!![],logHistory(_0x585c91(0x26e),_0x585c91(0x175)+loading['remainingSymbols'][_0x585c91(0x242)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x585c91(0x26e),_0x585c91(0x201)+loadCoinsRetryInterval/0xea60+_0x585c91(0x2c0)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x114ff1=_0x585c91;process[_0x114ff1(0x1f0)]({'stop':_0x114ff1(0x172)},_0x15d3fb=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1f760c!=loading[_0x585c91(0x2ef)]&&(_0x1f760c=loading['progress'],emitLoadingProgress()),_0x337b85++,await sleep(0xc8);}_0x1a5b56==_0x3965c7[_0x585c91(0x2b6)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x585c91(0x1f0)]({'status':_0x585c91(0x2d2),'live':_0x585c91(0x1cb)},_0x51ae23=>{}),_0x4492e7&&logHistory(_0x585c91(0x20f),_0x585c91(0x2a0)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x463510=_0x131c64;proxyEmit(_0x463510(0x2b7),{...emittedConfiguration(),'configstate':_0x463510(0x17c)});}function emitLoadingProgress(){const _0x110442=_0x131c64;proxyEmit(_0x110442(0x26b),loading);}async function getFiat(){const _0x2f2e74=_0x131c64;let _0x3540d1=global[_0x2f2e74(0x167)][stablecoins[_0x2f2e74(0x205)][_0x2f2e74(0x2b8)]],_0x4064eb=global[_0x2f2e74(0x167)][stablecoins[_0x2f2e74(0x1f3)][_0x2f2e74(0x2b8)]];return{'eur':Number(_0x3540d1),'usd':Number(_0x4064eb)};}function capitalize(_0x9db685){const _0x4f9253=_0x131c64;return _0x9db685[_0x4f9253(0x251)](0x0,0x1)[_0x4f9253(0x249)]()+_0x9db685[_0x4f9253(0x251)](0x1);}function supportedExchanges(){const _0x13919f=_0x131c64,_0x1adbbc=['ws','fetchTickers',_0x13919f(0x29f),'watchTrades',_0x13919f(0x17e),'cancelOrder','createOrder',_0x13919f(0x1ef),'fetchClosedOrders',_0x13919f(0x2a6)];let _0x5f09f0=[],_0x23b715=[],_0x226dc3=ccxt[_0x13919f(0x2b4)][_0x13919f(0x2e4)];_0x226dc3[_0x13919f(0x1c7)](_0x1c1330=>{const _0x54cc94=_0x13919f;try{const _0x3d5318=new ccxt[(_0x54cc94(0x2b4))][_0x1c1330]();_0x23b715[_0x54cc94(0x1db)](_0x3d5318);}catch(_0x2579ce){}}),_0x23b715[_0x13919f(0x1c7)](_0x50749c=>{const _0x58f134=_0x13919f;let _0x802c10=0x0;_0x1adbbc[_0x58f134(0x1c7)](_0x3c5b72=>{const _0x5469e7=_0x58f134;_0x3c5b72 in _0x50749c['has']&&_0x50749c[_0x5469e7(0x23c)][_0x3c5b72]&&_0x802c10++;}),_0x802c10==_0x1adbbc[_0x58f134(0x2b6)]&&_0x5f09f0[_0x58f134(0x1db)](capitalize(_0x50749c['id']));});let _0x205673=[];return _0x226dc3[_0x13919f(0x1c7)](_0x29299d=>{const _0x3aa769=_0x13919f;_0x29299d=capitalize(_0x29299d);if(!_0x5f09f0[_0x3aa769(0x19b)](_0x29299d))_0x205673[_0x3aa769(0x1db)](_0x29299d);}),_0x5f09f0;}function setStartDatePerformance(){const _0xe18fa9=_0x131c64;if(config&&config[_0xe18fa9(0x2e6)][0x0][_0xe18fa9(0x2a1)][_0xe18fa9(0x2b6)]!=0x0){const _0x1a3c19=config['liquidity'][0x0][_0xe18fa9(0x2a1)];dbPerformance[_0xe18fa9(0x21f)](_0xe18fa9(0x1a9))[_0xe18fa9(0x213)]({'date':config['startdate']})[_0xe18fa9(0x28f)]({'coins':_0x1a3c19})[_0xe18fa9(0x1be)]();}}async function recreateCoinResults(){const _0x3b367e=_0x131c64;let _0x326472,_0x572e19=[];try{const _0x486674=fns[_0x3b367e(0x198)](fns[_0x3b367e(0x1fb)](config['startdate'][_0x3b367e(0x2bb)](/\//g,'-')),_0x3b367e(0x1cd));for(const _0x138747 of currentCoins){if(_0x138747[_0x3b367e(0x2b8)]!=config['basecoin']){let _0x13a90f=0x0,_0xdc882,_0x4782d3;_0x326472=await getAllEventOrders(_0x138747[_0x3b367e(0x16a)]);if(_0x326472['length']>0x0)_0x326472[_0x3b367e(0x1c7)](_0x495a15=>{const _0x2c23e4=_0x3b367e,_0xfca7a9=_0x138747[_0x2c23e4(0x16a)]['includes'](config[_0x2c23e4(0x282)]+'/');_0x572e19['push']({'datetime':_0x495a15[_0x2c23e4(0x24b)],'coin':_0x138747[_0x2c23e4(0x2b8)],'symbol':_0x138747['symbol'],'side':_0x495a15[_0x2c23e4(0x270)],'reverse':_0xfca7a9,'amount':formatResult(_0x495a15[_0x2c23e4(0x2bd)],0x8),'filled':formatResult(_0x495a15[_0x2c23e4(0x2bd)],0x8),'price':formatResult(_0x495a15[_0x2c23e4(0x215)],0x8)}),_0x13a90f=_0x495a15['side']==_0x2c23e4(0x1e6)?_0x13a90f+_0x495a15[_0x2c23e4(0x2bd)]:_0x13a90f-_0x495a15[_0x2c23e4(0x2bd)];if(!_0x4782d3)_0x4782d3=_0x495a15[_0x2c23e4(0x215)];});_0xdc882=_0x138747[_0x3b367e(0x1f1)]-_0x13a90f;let _0x25e1f9;config[_0x3b367e(0x2e6)][_0x3b367e(0x1c7)](_0x134d14=>{const _0x1de46b=_0x3b367e;!_0x25e1f9&&(_0x25e1f9=_0x134d14[_0x1de46b(0x2a1)][_0x1de46b(0x213)](_0x182303=>_0x182303['coin']==_0x138747[_0x1de46b(0x2b8)]),_0x25e1f9&&(_0xdc882=_0x25e1f9[_0x1de46b(0x1f1)],_0x4782d3=_0x25e1f9['price']));});let _0x4e2488=dbCoinResults[_0x3b367e(0x21f)](_0x3b367e(0x255))['find']({'coin':_0x138747[_0x3b367e(0x2b8)]})[_0x3b367e(0x19d)]();_0x4e2488={'coin':_0x138747[_0x3b367e(0x2b8)],'number':_0xdc882,'breakeven':_0x4782d3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x3b367e(0x255))['find']({'coin':_0x138747[_0x3b367e(0x2b8)]})[_0x3b367e(0x28f)](_0x4e2488)['write']();}}_0x572e19[_0x3b367e(0x1a2)]((_0x173ca0,_0x2d8b83)=>_0x173ca0[_0x3b367e(0x24b)]>_0x2d8b83['datetime']?0x1:_0x2d8b83['datetime']>_0x173ca0[_0x3b367e(0x24b)]?-0x1:0x0);let _0x78406d=0x0;for(let _0x18d6f9 of _0x572e19){await updateCoinResults(_0x18d6f9,!![]);}}catch(_0x8409cd){await handleError(_0x8409cd,'recreateCoinResults()');}}async function getAllEventOrders(_0x3448ca){const _0x46c477=_0x131c64;let _0x265f1e=[],_0x135628=dbLogs[_0x46c477(0x21f)](_0x46c477(0x25b))['filter'](_0x1fe7c6=>{const _0x1a282a=_0x46c477,_0x3376e1=_0x1fe7c6[_0x1a282a(0x208)][_0x1a282a(0x1a5)]();return _0x3376e1[_0x1a282a(0x19b)](_0x3448ca[_0x1a282a(0x1a5)]())&&(_0x3376e1[_0x1a282a(0x19b)](_0x1a282a(0x2d7))&&_0x3376e1[_0x1a282a(0x19b)](_0x1a282a(0x21e))||_0x3376e1[_0x1a282a(0x19b)](_0x1a282a(0x2bd))&&_0x3376e1[_0x1a282a(0x19b)](_0x1a282a(0x21e)));})[_0x46c477(0x222)](_0x46c477(0x27a))[_0x46c477(0x19d)]();return _0x135628['forEach'](_0x5535c0=>{const _0x47bc40=_0x46c477,_0x28044a=_0x5535c0['event']['includes'](_0x47bc40(0x2c2))?'sell':_0x47bc40(0x1e6),_0x21af79=/#([0-9]|\.)+\s/i,_0x553754=Number(_0x21af79[_0x47bc40(0x1aa)](_0x5535c0[_0x47bc40(0x208)])[0x0]['slice'](0x1)),_0x52f101=/@([0-9]|\.)+$/i,_0x4ecedf=Number(_0x52f101['exec'](_0x5535c0[_0x47bc40(0x208)])[0x0][_0x47bc40(0x2bc)](0x1));_0x265f1e[_0x47bc40(0x1db)]({'datetime':_0x5535c0['time'],'coin':symbolToCoin(_0x3448ca),'symbol':_0x3448ca,'side':_0x28044a,'amount':_0x553754,'filled':_0x553754,'price':_0x4ecedf});}),_0x265f1e;}async function getAllOrders(_0x124ed5,_0x1b2b64){const _0x3c00c9=_0x131c64;let _0x3e14c7=[];while(_0x1b2b64<exchange[_0x3c00c9(0x2af)]()){const _0x3d261e=0x1f4;try{const _0x5baf89=await exchange[_0x3c00c9(0x1e0)](_0x124ed5,_0x1b2b64,_0x3d261e);if(_0x5baf89[_0x3c00c9(0x2b6)])_0x1b2b64=_0x5baf89[_0x5baf89['length']-0x1][_0x3c00c9(0x1d8)]+0x1,_0x3e14c7=_0x3e14c7['concat'](_0x5baf89);else break;}catch(_0x2c6a3e){await handleError(_0x2c6a3e,_0x3c00c9(0x161),_0x124ed5);}}return _0x3e14c7;}function _0x236c(_0x1a6d59,_0x3a6b38){const _0x1e5c3c=_0x497a();return _0x236c=function(_0x318a3e,_0x4631ac){_0x318a3e=_0x318a3e-0x153;let _0x497ac9=_0x1e5c3c[_0x318a3e];return _0x497ac9;},_0x236c(_0x1a6d59,_0x3a6b38);}async function validate24hChanges(){const _0x51e9a7=_0x131c64;for(const _0x598705 of currentCoins){if(_0x598705['coin']!=config[_0x51e9a7(0x282)]){let _0x1c6671;_0x598705['reverse']?_0x1c6671=formatResult((0x1/(global[_0x51e9a7(0x192)][noslash(_0x598705[_0x51e9a7(0x16a)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1c6671=global[_0x51e9a7(0x192)][noslash(_0x598705[_0x51e9a7(0x16a)])],_0x1c6671<config[_0x51e9a7(0x1b8)]&&(logHistory(_0x51e9a7(0x26e),_0x598705[_0x51e9a7(0x2b8)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1c6671+'%'),logHistory(_0x51e9a7(0x26e),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x51e9a7(0x26e),_0x51e9a7(0x1b6)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x250fe7,_0x31eed4){const _0x3c6f38=_0x131c64;if(!_0x250fe7)return!![];const _0x5da431=_0x31eed4[_0x3c6f38(0x24d)]('.'),_0x111007=_0x250fe7[_0x3c6f38(0x24d)]('.');for(var _0x5b6390=0x0;_0x5b6390<_0x111007[_0x3c6f38(0x2b6)];_0x5b6390++){const _0xfe0e95=~~_0x111007[_0x5b6390],_0x29a252=~~_0x5da431[_0x5b6390];if(_0xfe0e95<_0x29a252)return!![];if(_0xfe0e95>_0x29a252)return![];}return![];}async function oneTimeMigration(){const _0x256f59=_0x131c64;let _0x2a941e=dbLogs[_0x256f59(0x21f)]('version')[_0x256f59(0x19d)]();if(isOlderVersion(_0x2a941e,'2.3.5')){let _0x1d7360=[];const _0x2b9ad9=dbLogs[_0x256f59(0x21f)](_0x256f59(0x25b))['value']();_0x2b9ad9[_0x256f59(0x1c7)](_0x3a92a8=>{const _0x43479f=_0x256f59;_0x1d7360['push']({'time':_0x3a92a8[_0x43479f(0x27a)],'type':_0x3a92a8[_0x43479f(0x243)],'event':_0x3a92a8[_0x43479f(0x208)]});}),dbLogs[_0x256f59(0x21f)](_0x256f59(0x25b))[_0x256f59(0x28f)](_0x1d7360)[_0x256f59(0x1be)]();}let _0x14474c=dbConfig['get'](_0x256f59(0x2c8))['value']();if(isOlderVersion(_0x14474c,_0x256f59(0x2ea))){let _0x500cf7=dbConfig[_0x256f59(0x21f)](_0x256f59(0x1eb))['find']({'botID':botID})[_0x256f59(0x19d)]();if(_0x500cf7){let _0x16f734=[];_0x500cf7['portfolio']['forEach'](_0x57ee4b=>{const _0x22d4ab=_0x256f59;_0x16f734[_0x22d4ab(0x1db)]({'coin':_0x57ee4b[_0x22d4ab(0x2b8)],'number':_0x57ee4b[_0x22d4ab(0x166)],'price':_0x57ee4b['startprice']}),delete _0x57ee4b['startnumber'],delete _0x57ee4b[_0x22d4ab(0x1af)];});if(_0x16f734['length']!==0x0)fs[_0x256f59(0x1f2)](configbackuppath+(_0x256f59(0x22e)+botID+'.json'),JSON[_0x256f59(0x2f0)](_0x16f734,null,0x4),function(_0xf8c52e){if(_0xf8c52e){}});const _0x572e62=(_0x26dfaf,_0x39a9f2)=>{const _0x5c2577=_0x256f59;let _0x5b516d=[];_0x39a9f2[_0x5c2577(0x1c7)](_0x54cf55=>{const _0x18809c=_0x5c2577,_0x173afc=_0x26dfaf['find'](_0x249395=>_0x249395['coin']==_0x54cf55[_0x18809c(0x2b8)]);if(!_0x173afc)_0x5b516d[_0x18809c(0x1db)](_0x54cf55);});let _0x28c3ff=[];return _0x26dfaf[_0x5c2577(0x1c7)](_0x10f1af=>{const _0x465132=_0x5c2577,_0x5d6a7c=_0x39a9f2[_0x465132(0x213)](_0x3d49ec=>_0x3d49ec[_0x465132(0x2b8)]==_0x10f1af[_0x465132(0x2b8)]);if(!_0x5d6a7c||_0x5d6a7c[_0x465132(0x1f1)]==0x0&&_0x10f1af['number']!=0x0)_0x28c3ff['push'](_0x10f1af);}),{'missingDay1':_0x5b516d,'notInDay2':_0x28c3ff};},_0x2b7b69=dbPerformance[_0x256f59(0x21f)](_0x256f59(0x1a9))[_0x256f59(0x2d0)]()[_0x256f59(0x19d)]();if(_0x2b7b69['length']>0x1){const {missingDay1:_0x2ff8f9,notInDay2:_0x26ab58}=_0x572e62(_0x16f734,_0x2b7b69[0x1][_0x256f59(0x255)]);_0x16f734=[..._0x16f734,..._0x2ff8f9],_0x26ab58[_0x256f59(0x1c7)](_0x42c1ec=>{const _0x473862=_0x256f59;let _0x11aa5e=_0x16f734[_0x473862(0x2be)](_0x2bd7d5=>_0x2bd7d5[_0x473862(0x2b8)]==_0x42c1ec[_0x473862(0x2b8)]);_0x11aa5e!=-0x1&&_0x16f734['splice'](_0x11aa5e,0x1);});}_0x16f734['sort']((_0x40119d,_0x27cf5f)=>_0x40119d[_0x256f59(0x2b8)]>_0x27cf5f[_0x256f59(0x2b8)]?0x1:_0x27cf5f[_0x256f59(0x2b8)]>_0x40119d['coin']?-0x1:0x0);let _0x427da4=[{'date':_0x500cf7[_0x256f59(0x1ae)],'changes':_0x16f734}];_0x2b7b69[_0x256f59(0x2b6)]>0x2&&_0x2b7b69[_0x256f59(0x1c7)]((_0x5018cf,_0x40f452)=>{const _0xa080d=_0x256f59;if(_0x40f452>0x0&&_0x40f452<_0x2b7b69['length']-0x1){const {missingDay1:_0x28cfca,notInDay2:_0x4424f9}=_0x572e62(_0x2b7b69[_0x40f452][_0xa080d(0x255)],_0x2b7b69[_0x40f452+0x1][_0xa080d(0x255)]);_0x16f734=[],(_0x28cfca[_0xa080d(0x2b6)]!=0x0||_0x4424f9['length']!=0x0)&&(_0x28cfca[_0xa080d(0x2b6)]!=0x0&&_0x16f734[_0xa080d(0x1db)](..._0x28cfca),_0x4424f9[_0xa080d(0x2b6)]!=0x0&&(_0x4424f9['forEach'](_0x565664=>{const _0x16f1c9=_0xa080d;_0x565664[_0x16f1c9(0x1f1)]=-_0x565664[_0x16f1c9(0x1f1)];}),_0x16f734[_0xa080d(0x1db)](..._0x4424f9)),_0x16f734[_0xa080d(0x1a2)]((_0x471ac7,_0x537864)=>_0x471ac7[_0xa080d(0x2b8)]>_0x537864['coin']?0x1:_0x537864[_0xa080d(0x2b8)]>_0x471ac7[_0xa080d(0x2b8)]?-0x1:0x0),_0x427da4[_0xa080d(0x1db)]({'date':_0x2b7b69[_0x40f452+0x1][_0xa080d(0x1e2)],'changes':_0x16f734}));}}),dbConfig['get'](_0x256f59(0x1eb))[_0x256f59(0x213)]({'botID':botID})[_0x256f59(0x28f)]({..._0x500cf7,'liquidity':_0x427da4})['write']();}}if(isOlderVersion(_0x14474c,_0x256f59(0x183))){let _0x53319f=dbConfig[_0x256f59(0x21f)](_0x256f59(0x1eb))[_0x256f59(0x213)]({'botID':botID})[_0x256f59(0x19d)]();if(_0x53319f){const _0x2e761c=_0x53319f['exchange'],_0x31c5db=_0x2e761c?capitalize(_0x2e761c):_0x256f59(0x1d6);dbConfig[_0x256f59(0x21f)]('bot')[_0x256f59(0x213)]({'botID':botID})['assign']({'exchange':_0x31c5db})[_0x256f59(0x1be)]();}}let _0x553c56=dbPerformance['get'](_0x256f59(0x2c8))['value']();isOlderVersion(_0x553c56,_0x256f59(0x2ea))&&setStartDatePerformance();let _0x1374cb=dbCoinResults['get'](_0x256f59(0x2c8))[_0x256f59(0x19d)]();if(isOlderVersion(_0x1374cb,_0x256f59(0x1a0))){let _0x533289=dbCoinResults[_0x256f59(0x21f)](_0x256f59(0x255))[_0x256f59(0x19d)]();if(_0x533289[_0x256f59(0x2b6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1ff7e1=_0x131c64;dbConfig['set'](_0x1ff7e1(0x2c8),serverversion)[_0x1ff7e1(0x1be)](),dbPerformance[_0x1ff7e1(0x2a7)](_0x1ff7e1(0x2c8),serverversion)[_0x1ff7e1(0x1be)](),dbLogs[_0x1ff7e1(0x2a7)](_0x1ff7e1(0x2c8),serverversion)[_0x1ff7e1(0x1be)](),dbCoinResults['set'](_0x1ff7e1(0x2c8),serverversion)[_0x1ff7e1(0x1be)]();}function getConfiguration(_0x83afb){const _0x5859cc=_0x131c64;let _0x18debd=dbConfig[_0x5859cc(0x21f)](_0x5859cc(0x1eb))[_0x5859cc(0x213)]({'botID':_0x83afb})[_0x5859cc(0x19d)]();if(_0x18debd){let _0x490827=![];typeof _0x18debd[_0x5859cc(0x26a)]==_0x5859cc(0x236)&&(_0x18debd={..._0x18debd,'threshold':Number(_0x18debd['threshold'])},_0x490827=!![]),_0x18debd[_0x5859cc(0x1b8)]==undefined&&(_0x18debd={..._0x18debd,'change24h':-0x14},_0x490827=!![]),_0x18debd[_0x5859cc(0x1c8)]==undefined&&(_0x18debd={..._0x18debd,'fiat':_0x5859cc(0x1ec)},_0x490827=!![]),_0x18debd[_0x5859cc(0x2ee)]==undefined&&(_0x18debd={..._0x18debd,'onepagemode':settings[_0x5859cc(0x2ee)]},_0x490827=!![]),_0x18debd[_0x5859cc(0x1bd)]==undefined&&(_0x18debd={..._0x18debd,'colorscheme':'red_yellow_blue'},_0x490827=!![]),_0x18debd[_0x5859cc(0x20e)]==undefined&&(_0x18debd={..._0x18debd,'autoliquidity':!![]},_0x490827=!![]),_0x490827&&(_0x18debd={'botID':_0x18debd[_0x5859cc(0x17a)],'exchange':_0x18debd[_0x5859cc(0x1e7)],'apiKey':_0x18debd[_0x5859cc(0x297)],'apiSecret':_0x18debd[_0x5859cc(0x19e)],'apiPassword':_0x18debd[_0x5859cc(0x2e5)],'basecoin':_0x18debd[_0x5859cc(0x282)],'botname':_0x18debd[_0x5859cc(0x196)],'showname':_0x18debd[_0x5859cc(0x2ab)],'threshold':_0x18debd[_0x5859cc(0x26a)],'ordertype':_0x18debd[_0x5859cc(0x22c)],'timeout':_0x18debd[_0x5859cc(0x295)],'fiat':_0x18debd[_0x5859cc(0x1c8)],'startdate':_0x18debd[_0x5859cc(0x1ae)],'recreate':_0x18debd['recreate'],'timeshift':_0x18debd[_0x5859cc(0x288)],'onepagemode':_0x18debd[_0x5859cc(0x2ee)],'headless':_0x18debd[_0x5859cc(0x18c)],'cooldown':_0x18debd[_0x5859cc(0x20c)],'change24h':_0x18debd[_0x5859cc(0x1b8)],'emojibuy':_0x18debd['emojibuy'],'emojisell':_0x18debd['emojisell'],'colorscheme':_0x18debd[_0x5859cc(0x1bd)],'portfolio':_0x18debd[_0x5859cc(0x29e)],'autoliquidity':_0x18debd[_0x5859cc(0x20e)],'liquidity':_0x18debd['liquidity'],'openOrders':_0x18debd[_0x5859cc(0x163)]},dbConfig[_0x5859cc(0x21f)](_0x5859cc(0x1eb))[_0x5859cc(0x239)]()[_0x5859cc(0x1be)](),dbConfig[_0x5859cc(0x21f)](_0x5859cc(0x1eb))['push'](_0x18debd)[_0x5859cc(0x1be)]());}else _0x18debd={'botID':_0x83afb,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5859cc(0x2b0)+_0x83afb,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x5859cc(0x1ec),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5859cc(0x288)],'onepagemode':settings[_0x5859cc(0x2ee)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x18debd;}function emittedConfiguration(){const _0x16d23d=_0x131c64;let _0x16a629;if(config[_0x16d23d(0x297)]=='')_0x16a629={...config,'configstate':_0x16d23d(0x284)};else config[_0x16d23d(0x297)]=='***'?_0x16a629={...config,'configstate':_0x16d23d(0x260)}:(_0x16a629={...config,'apiKey':_0x16d23d(0x24c),'apiSecret':_0x16d23d(0x24c)},config[_0x16d23d(0x2e5)]&&(_0x16a629[_0x16d23d(0x2e5)]=_0x16d23d(0x24c)));return _0x16a629;}function getSettings(){const _0x318b0f=_0x131c64;return dbSettings[_0x318b0f(0x21f)](_0x318b0f(0x283))[_0x318b0f(0x19d)]();}function getSecure(){const _0x1a2ee1=_0x131c64;return dbSecure[_0x1a2ee1(0x21f)](_0x1a2ee1(0x1b4))[_0x1a2ee1(0x19d)]()||{};}function updateTimeshift(_0x6ff401){const _0x4b4608=_0x131c64;let _0x171d25=dbConfig[_0x4b4608(0x21f)](_0x4b4608(0x1eb))[_0x4b4608(0x213)]({'botID':botID})[_0x4b4608(0x19d)]();_0x171d25&&dbConfig['get'](_0x4b4608(0x1eb))[_0x4b4608(0x213)]({'botID':botID})[_0x4b4608(0x28f)]({'timeshift':_0x6ff401})[_0x4b4608(0x1be)](),config['timeshift']=_0x6ff401,proxyEmit(_0x4b4608(0x2b7),emittedConfiguration());}function updateOnepagemode(_0x59fbc6){const _0x28fb87=_0x131c64;let _0x58dd99=dbConfig['get'](_0x28fb87(0x1eb))['find']({'botID':botID})[_0x28fb87(0x19d)]();_0x58dd99&&dbConfig[_0x28fb87(0x21f)](_0x28fb87(0x1eb))['find']({'botID':botID})[_0x28fb87(0x28f)]({'onepagemode':_0x59fbc6})['write'](),config[_0x28fb87(0x2ee)]=_0x59fbc6,proxyEmit(_0x28fb87(0x2b7),emittedConfiguration());}async function storeConfiguration(_0x323f3f){const _0x157a3d=_0x131c64;logger[_0x157a3d(0x237)](_0x157a3d(0x2ce));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x157a3d(0x237)](_0x157a3d(0x235));let _0x59ce0b=[],_0x12a8ce=![],_0x15b5bb=![],_0x5c66c7=[];_0x323f3f[_0x157a3d(0x29e)]['forEach'](_0xf6b735=>{const _0x22cc3b=_0x157a3d;if(!_0xf6b735[_0x22cc3b(0x2c5)]&&_0xf6b735[_0x22cc3b(0x2b8)]!=_0x323f3f[_0x22cc3b(0x282)])_0x5c66c7[_0x22cc3b(0x1db)](_0xf6b735[_0x22cc3b(0x16a)]);}),_0x5c66c7[_0x157a3d(0x1c7)](_0x24f323=>{const _0x4cf1f1=_0x157a3d,_0x2b4d2c=watchedSymbols[_0x4cf1f1(0x19b)](_0x24f323);!_0x2b4d2c&&_0x59ce0b[_0x4cf1f1(0x1db)](_0x24f323);}),_0x5c66c7[_0x157a3d(0x1c7)](_0x4e42e1=>{const _0x32b200=_0x157a3d,_0x23adcd=currentCoins['find'](_0x25a8cb=>_0x25a8cb[_0x32b200(0x16a)]==_0x4e42e1);!_0x23adcd&&(_0x12a8ce=!![]);}),currentCoins[_0x157a3d(0x1c7)](_0x255cb0=>{const _0x107755=_0x157a3d;if(_0x255cb0[_0x107755(0x2b8)]!=config['basecoin']){const _0x1c1dcf=_0x5c66c7[_0x107755(0x213)](_0x1c2cf6=>_0x1c2cf6==_0x255cb0[_0x107755(0x16a)]);!_0x1c1dcf&&(_0x12a8ce=!![]);}}),_0x323f3f[_0x157a3d(0x29e)][_0x157a3d(0x1c7)](_0x5c4e2d=>{const _0x1b4c82=_0x157a3d,_0x3b003b=config[_0x1b4c82(0x29e)][_0x1b4c82(0x213)](_0x24801e=>_0x24801e[_0x1b4c82(0x2b8)]==_0x5c4e2d[_0x1b4c82(0x2b8)]);if(_0x3b003b&&_0x5c4e2d[_0x1b4c82(0x182)]!=_0x3b003b['offset'])_0x15b5bb=!![];});let _0x3b62a2=dbConfig['get'](_0x157a3d(0x1eb))['find']({'botID':botID})[_0x157a3d(0x19d)]();_0x323f3f={..._0x323f3f,'apiKey':crypt[_0x157a3d(0x1d4)](secure[_0x157a3d(0x1c4)],_0x323f3f['apiKey'])[_0x157a3d(0x1cf)],'apiSecret':crypt['decrypt'](secure[_0x157a3d(0x1c4)],_0x323f3f[_0x157a3d(0x19e)])[_0x157a3d(0x1cf)]};_0x323f3f[_0x157a3d(0x2e5)]&&(_0x323f3f[_0x157a3d(0x2e5)]=crypt[_0x157a3d(0x1d4)](secure[_0x157a3d(0x1c4)],_0x323f3f[_0x157a3d(0x2e5)])[_0x157a3d(0x1cf)]);let _0x3bbc48=![];if(_0x3b62a2){_0x323f3f[_0x157a3d(0x297)]==_0x157a3d(0x24c)?_0x323f3f[_0x157a3d(0x297)]=config[_0x157a3d(0x297)]:_0x3bbc48=!![];_0x323f3f[_0x157a3d(0x19e)]=='************'?_0x323f3f[_0x157a3d(0x19e)]=config['apiSecret']:_0x3bbc48=!![];if(_0x323f3f['apiPassword']==_0x157a3d(0x24c))_0x323f3f[_0x157a3d(0x2e5)]=config[_0x157a3d(0x2e5)];else{if(_0x323f3f[_0x157a3d(0x2e5)])_0x3bbc48=!![];}dbConfig['get'](_0x157a3d(0x1eb))[_0x157a3d(0x213)]({'botID':botID})[_0x157a3d(0x28f)](_0x323f3f)[_0x157a3d(0x1be)]();}else dbConfig[_0x157a3d(0x21f)](_0x157a3d(0x1eb))[_0x157a3d(0x1db)](_0x323f3f)['write'](),_0x3bbc48=!![],process['send']({'status':_0x157a3d(0x2d2),'live':_0x157a3d(0x1cb)},_0x3059e2=>{});process[_0x157a3d(0x1f0)]({'botname':_0x323f3f['botname']},_0x40940f=>{}),updateBotManager(),config={..._0x323f3f},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3bbc48)await reset(_0x59ce0b,!![]);else _0x12a8ce||_0x15b5bb?await reset(_0x59ce0b,![]):getBalances();blockTransactionDetection=![],logger[_0x157a3d(0x237)](_0x157a3d(0x189));}async function storeHeadless(_0x12791d){const _0x30839d=_0x131c64,_0x2ac7d1={...config,'headless':_0x12791d[_0x30839d(0x18c)]};let _0x498253=dbConfig[_0x30839d(0x21f)](_0x30839d(0x1eb))['find']({'botID':botID})['value']();_0x498253&&dbConfig[_0x30839d(0x21f)]('bot')[_0x30839d(0x213)]({'botID':botID})[_0x30839d(0x28f)](_0x2ac7d1)[_0x30839d(0x1be)](),config={..._0x2ac7d1},updateBotManager(),proxyEmit(_0x30839d(0x2b7),emittedConfiguration());}async function storeFiat(_0x3a7a18){const _0x5b7ede=_0x131c64,_0x2ddd60={...config,'fiat':_0x3a7a18};let _0x430bb9=dbConfig[_0x5b7ede(0x21f)](_0x5b7ede(0x1eb))['find']({'botID':botID})[_0x5b7ede(0x19d)]();_0x430bb9&&dbConfig['get'](_0x5b7ede(0x1eb))[_0x5b7ede(0x213)]({'botID':botID})['assign'](_0x2ddd60)[_0x5b7ede(0x1be)](),config={..._0x2ddd60},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x3604b9=_0x131c64;logger[_0x3604b9(0x1b0)](_0x3604b9(0x187));try{if(fs[_0x3604b9(0x1bc)](path[_0x3604b9(0x242)](configpath,_0x3604b9(0x2a9)+botID+_0x3604b9(0x1d2))))fs[_0x3604b9(0x25c)](path[_0x3604b9(0x242)](configpath,_0x3604b9(0x2a9)+botID+_0x3604b9(0x1d2)));if(fs[_0x3604b9(0x1bc)](path[_0x3604b9(0x242)](configpath,_0x3604b9(0x2a9)+botID+'-performance.json')))fs[_0x3604b9(0x25c)](path['join'](configpath,_0x3604b9(0x2a9)+botID+_0x3604b9(0x2de)));if(fs[_0x3604b9(0x1bc)](path[_0x3604b9(0x242)](configpath,'bot-'+botID+_0x3604b9(0x1c1))))fs['unlinkSync'](path[_0x3604b9(0x242)](configpath,_0x3604b9(0x2a9)+botID+_0x3604b9(0x1c1)));}catch(_0x151011){if(_0x151011)logger[_0x3604b9(0x1b0)](_0x3604b9(0x293),_0x151011);}const _0x3218f1=getDate();let _0x2083db=[];currentCoins['forEach'](_0x288991=>{const _0x48ba34=_0x3604b9;_0x2083db[_0x48ba34(0x1db)]({'coin':_0x288991[_0x48ba34(0x2b8)],'number':_0x288991['number'],'price':_0x288991[_0x48ba34(0x225)]});});let _0x1bd661=dbConfig['get'](_0x3604b9(0x1eb))[_0x3604b9(0x213)]({'botID':botID})[_0x3604b9(0x19d)]();_0x1bd661&&(dbConfig[_0x3604b9(0x21f)]('bot')[_0x3604b9(0x213)]({'botID':botID})[_0x3604b9(0x28f)]({'liquidity':[{'date':_0x3218f1,'changes':_0x2083db}]})['write'](),config[_0x3604b9(0x2e6)]=[]),process['send']({'stop':_0x3604b9(0x172)},_0x29aba3=>{});}function noslash(_0x5f2604){const _0x19699a=_0x131c64;return _0x5f2604[_0x19699a(0x2bb)]('/','');}function updateHighestFee(_0x583865){const _0x127b02=_0x131c64;if(_0x583865[_0x127b02(0x26f)]){let _0x27f2bd={'filled':_0x583865['filled']*_0x583865[_0x127b02(0x215)],'amount':_0x583865[_0x127b02(0x2bd)]*_0x583865[_0x127b02(0x215)],'side':_0x583865[_0x127b02(0x270)]==_0x127b02(0x2c2)?'buy':_0x127b02(0x2c2),'price':0x1/_0x583865[_0x127b02(0x215)]};_0x583865={..._0x583865,..._0x27f2bd};}const _0x48a9e0=defaultFee*_0x583865[_0x127b02(0x2bd)]*_0x583865[_0x127b02(0x215)];lastFees['recent20'][_0x127b02(0x2b6)]===0x14&&lastFees[_0x127b02(0x1bb)]['shift'](),lastFees[_0x127b02(0x1bb)][_0x127b02(0x1db)](_0x48a9e0),lastFees[_0x127b02(0x2df)]=Math[_0x127b02(0x160)](...lastFees[_0x127b02(0x1bb)]);}async function updateNumberCoinsCcxt(_0x27b541){const _0x140f83=_0x131c64;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x27b541[_0x140f83(0x16a)]+_0x140f83(0x18a)+_0x27b541['status']+'\x20|\x20'+_0x27b541['id']);let _0x495303=_0x27b541[_0x140f83(0x2a2)],_0x55645d=![];currentCoins[_0x140f83(0x1c7)](_0x3ef4d6=>{const _0x2cc913=_0x140f83;_0x3ef4d6['symbol']==_0x27b541[_0x2cc913(0x16a)]&&(_0x55645d=!![]);});if(!_0x55645d)return;const _0xc8c16f=currentCoins[_0x140f83(0x213)](_0xab63d8=>_0xab63d8[_0x140f83(0x16a)]==_0x27b541[_0x140f83(0x16a)]),_0x1f7890=_0x32820e=>{const _0x5d4f6c=_0x140f83;if(_0xc8c16f)_0xc8c16f[_0x5d4f6c(0x2c4)]=_0x32820e;};if(_0x495303=='open')_0x1f7890(_0x140f83(0x168));else{if(_0x495303=='canceled'){_0x1f7890(_0x140f83(0x191));const _0x459b2e=await getCoins();[currentCoins,currentCoinsAll]=_0x459b2e,await getOpenOrders(),handleOpenOrders();}else{if(_0x495303==_0x140f83(0x2c7)){logger[_0x140f83(0x237)](_0x140f83(0x2dc)+_0x27b541[_0x140f83(0x16a)]+_0x140f83(0x18a)+_0x27b541['filled']+'\x20|\x20'+_0x27b541['id']);let _0x53b879=![];if(lastOrders)for(const _0x57bf18 of lastOrders){const _0x2159b1=0xc8,_0x4b65aa=0x1388;let _0x5c41bc=0x0;while(!_0x57bf18['orderId']&&_0x5c41bc*_0x2159b1<_0x4b65aa){_0x5c41bc++,await sleep(_0x2159b1);}if(_0x5c41bc>0x0)logger['debug']('Waited\x20'+_0x5c41bc*_0x2159b1/0x3e8+_0x140f83(0x28d));if(_0x57bf18[_0x140f83(0x176)]==_0x27b541['id']){logger[_0x140f83(0x237)](_0x140f83(0x1d3)+_0x27b541['id']),_0x53b879=!![];if(_0x57bf18[_0x140f83(0x2bd)]==0x0){logger[_0x140f83(0x237)](_0x140f83(0x2b1)+_0x27b541['id']);if(_0x27b541[_0x140f83(0x24a)])_0x57bf18[_0x140f83(0x215)]=_0x27b541[_0x140f83(0x24a)];else{if(_0x27b541['price'])_0x57bf18[_0x140f83(0x215)]=_0x27b541[_0x140f83(0x215)];else{}}_0x57bf18[_0x140f83(0x2bd)]=_0x27b541[_0x140f83(0x2bd)],updateHighestFee(_0x57bf18),_0x1f7890('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x4b9522=await getCoins();[currentCoins,currentCoinsAll]=_0x4b9522;}_0x57bf18['fee']={'currency':_0x27b541['fee']?_0x27b541[_0x140f83(0x292)]['currency']:null,'cost':_0x27b541[_0x140f83(0x292)]?_0x27b541[_0x140f83(0x292)][_0x140f83(0x257)]:0x0},await updateCoinResults(_0x57bf18);}}}if(!_0x53b879){logger[_0x140f83(0x237)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x27b541['id']),_0x1f7890(_0x140f83(0x2bd));const _0x2b24a2=await getCoins();[currentCoins,currentCoinsAll]=_0x2b24a2,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4bdc6b=JSON['parse'](lastBalances[_0x140f83(0x29e)]);const _0x209e84=_0x4bdc6b[_0x140f83(0x213)](_0x42a175=>_0x42a175[_0x140f83(0x16a)]==_0x27b541[_0x140f83(0x16a)]);if(_0x209e84){if(_0x495303==_0x140f83(0x168))_0x209e84['orderstatus']=_0x209e84[_0x140f83(0x2c4)]==_0x140f83(0x2bd)?_0x140f83(0x2bd):_0x140f83(0x168);else{if(_0x495303==_0x140f83(0x191))_0x209e84[_0x140f83(0x2c4)]=_0x209e84[_0x140f83(0x2c4)]=='filled'?_0x140f83(0x2bd):'canceled';else _0x495303==_0x140f83(0x2c7)&&(_0x209e84['orderstatus']=_0x140f83(0x2bd));}}lastBalances={...lastBalances,'portfolio':JSON[_0x140f83(0x2f0)](_0x4bdc6b)},proxyEmit(_0x140f83(0x2d6),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x7be8d3=_0x131c64;await getOpenOrders();let _0x331fe2=![];currentCoins[_0x7be8d3(0x1c7)](_0x46c520=>{const _0x200ac7=_0x7be8d3;_0x331fe2=allOpenOrders['find'](_0x250fac=>_0x250fac['symbol']==_0x46c520[_0x200ac7(0x16a)]),_0x46c520[_0x200ac7(0x2c4)]=_0x331fe2?_0x200ac7(0x168):'none';});}async function getCoins(_0x118c0f=!![],_0x2eb64=config['basecoin']){const _0x513beb=_0x131c64;let _0x13b8b8,_0x223a65=[],_0x5d07e9=[],_0x49b6f2=[],_0x45b1ef=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x13b8b8=await exchange[_0x513beb(0x2a6)](),mybalances=_0x13b8b8[_0x513beb(0x1e8)];for(const [_0x71d358,_0x5b5ce6]of Object['entries'](mybalances)){_0x45b1ef[_0x513beb(0x1db)](_0x71d358);}config[_0x513beb(0x29e)][_0x513beb(0x1c7)](_0x471dea=>{const _0xe75615=_0x513beb;!_0x45b1ef[_0xe75615(0x19b)](_0x471dea['coin'])&&(mybalances[_0x471dea[_0xe75615(0x2b8)]]=0x0);});if(_0x2eb64=='')for(const [_0x814ba1,_0x33a70b]of Object[_0x513beb(0x2cf)](mybalances)){_0x33a70b!=0x0&&_0x5d07e9[_0x513beb(0x1db)]({'coin':_0x814ba1});}else{let _0x518d60=![];for(const [_0x5183e4,_0x2ed5ea]of Object[_0x513beb(0x2cf)](mybalances)){const _0x12dac9=config[_0x513beb(0x29e)]['find'](_0x3cb787=>_0x3cb787['coin']==_0x5183e4),_0x35c718=_0x5183e4+'/'+_0x2eb64,_0x1e923f=_0x2eb64+'/'+_0x5183e4,_0x493271=currentCoins[_0x513beb(0x213)](_0x1be1fc=>_0x1be1fc['coin']==_0x5183e4);_0x518d60=![];if((_0x2ed5ea!=0x0||_0x12dac9)&&(allSymbols['includes'](_0x35c718)||_0x5183e4==_0x2eb64))_0x5d07e9[_0x513beb(0x1db)]({'coin':_0x5183e4,'symbol':_0x35c718,'reverse':![],'number':Math['max'](_0x2ed5ea+(_0x12dac9&&_0x12dac9[_0x513beb(0x182)]||0x0),0x0),'orderstatus':_0x493271?_0x493271[_0x513beb(0x2c4)]:_0x513beb(0x1fd)});else{if((_0x2ed5ea!=0x0||_0x12dac9)&&allSymbols[_0x513beb(0x19b)](_0x1e923f))_0x5d07e9[_0x513beb(0x1db)]({'coin':_0x5183e4,'symbol':_0x1e923f,'reverse':!![],'number':Math['max'](_0x2ed5ea+(_0x12dac9&&_0x12dac9['offset']||0x0),0x0),'orderstatus':_0x493271?_0x493271['orderstatus']:_0x513beb(0x1fd)});else _0x12dac9&&_0x5d07e9[_0x513beb(0x1db)]({'coin':_0x12dac9[_0x513beb(0x2b8)],'symbol':_0x12dac9['symbol'],'reverse':_0x12dac9[_0x513beb(0x26f)],'number':0x0,'orderstatus':_0x513beb(0x1fd)});}}}}catch(_0x5127ac){if(!_0x118c0f)handleErrorNoStop(_0x5127ac,_0x513beb(0x240));else await handleError(_0x5127ac,'getCoins()');}return _0x49b6f2=cloneDeep(_0x5d07e9),_0x5d07e9=_0x5d07e9[_0x513beb(0x2e9)](_0x5d5f14=>{const _0x409a04=_0x513beb,_0x1948a5=config[_0x409a04(0x29e)][_0x409a04(0x213)](_0x588df3=>_0x588df3['coin']==_0x5d5f14['coin']);return _0x1948a5&&!_0x1948a5[_0x409a04(0x2c5)];}),[_0x5d07e9,_0x49b6f2];}async function getCoinNumber(_0x14b958){const _0x258bec=_0x131c64;let _0x5d32ef;try{const _0x4b6a1e=await exchange['fetchBalance']();_0x5d32ef=_0x4b6a1e[_0x258bec(0x1e8)][_0x14b958];}catch(_0x2a9e95){await handleError(_0x2a9e95,_0x258bec(0x18f));}return _0x5d32ef;}async function getOpenOrders(){const _0x2a9228=_0x131c64;let _0x20941f;allOpenOrders=[];try{for(const _0x32cea1 of config[_0x2a9228(0x29e)]){!_0x32cea1[_0x2a9228(0x2c5)]&&_0x32cea1[_0x2a9228(0x2b8)]!=config[_0x2a9228(0x282)]&&(_0x20941f=await exchange['fetchOpenOrders'](_0x32cea1[_0x2a9228(0x16a)]),_0x20941f[_0x2a9228(0x2b6)]>0x0&&allOpenOrders[_0x2a9228(0x1db)](_0x20941f[0x0]));}}catch(_0x313c5b){await handleError(_0x313c5b,_0x2a9228(0x28c));}}async function handleOpenOrders(_0x126352=0x0){const _0x1dc656=_0x131c64;allOpenOrders[_0x1dc656(0x2b6)]==0x0&&lockOrders==ORDERS[_0x1dc656(0x2ac)]&&allOrdersPlaced&&(_0x126352==0x0?(logger[_0x1dc656(0x237)](_0x1dc656(0x1d0)),_0x126352++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1dc656(0x237)](_0x1dc656(0x156)),validateOrders(_0x1dc656(0x2d9))));}async function testAPI(_0x58fc42){const _0x1c88b9=_0x131c64,_0x3690d4=ccxt[_0x1c88b9(0x2b4)][_0x58fc42[_0x1c88b9(0x1e7)][_0x1c88b9(0x1a5)]()],_0x3dd2b8=new _0x3690d4({'apiKey':_0x58fc42[_0x1c88b9(0x297)],'secret':_0x58fc42[_0x1c88b9(0x19e)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1c88b9(0x276)}});if(_0x58fc42['apiPassword'])_0x3dd2b8[_0x1c88b9(0x1e3)]=_0x58fc42[_0x1c88b9(0x2e5)];try{await _0x3dd2b8[_0x1c88b9(0x2b3)]();}catch(_0x5bf1e8){throw _0x5bf1e8;}}function cloneDeep(_0x2436bc){const _0x42151c=_0x131c64;return JSON[_0x42151c(0x2a3)](JSON[_0x42151c(0x2f0)](_0x2436bc));}async function getPortfolio(_0x2b25b3){const _0xbaee13=_0x131c64;let _0x151f8e=[],_0x25fdab=[],_0x6cbf96=[],_0x4f6778;if(_0x2b25b3[_0xbaee13(0x297)]!==_0xbaee13(0x24c)||_0x2b25b3[_0xbaee13(0x19e)]!=='************'||_0x2b25b3[_0xbaee13(0x2e5)]&&_0x2b25b3[_0xbaee13(0x2e5)]!==_0xbaee13(0x24c)){if(config[_0xbaee13(0x1e7)]){if(_0x2b25b3[_0xbaee13(0x297)]=='************')_0x2b25b3['apiKey']=config[_0xbaee13(0x297)];if(_0x2b25b3[_0xbaee13(0x19e)]==_0xbaee13(0x24c))_0x2b25b3['apiSecret']=config[_0xbaee13(0x19e)];if(_0x2b25b3['apiPassword']==_0xbaee13(0x24c))_0x2b25b3['apiPassword']=config[_0xbaee13(0x2e5)];try{await testAPI(_0x2b25b3);}catch(_0x37f8b2){if(_0x37f8b2['toString']()[_0xbaee13(0x19b)]('AuthenticationError')){logger['debug'](_0xbaee13(0x287)),proxyEmit(_0xbaee13(0x29e),![]);return;}else{handleError(_0x37f8b2,_0xbaee13(0x2a5));return;}}}await initExchange(_0x2b25b3[_0xbaee13(0x1e7)],_0x2b25b3['apiKey'],_0x2b25b3[_0xbaee13(0x19e)],_0x2b25b3[_0xbaee13(0x2e5)]);try{await loadSymbols();}catch(_0x11fc5d){if(_0x11fc5d['toString']()[_0xbaee13(0x19b)](_0xbaee13(0x203))){proxyEmit(_0xbaee13(0x29e),![]);return;}else{handleError(_0x11fc5d,_0xbaee13(0x2e2));return;}}const _0x423e91=await getCoins(![],_0x2b25b3[_0xbaee13(0x282)]);_0x6cbf96=cloneDeep(_0x423e91[0x1]);}else _0x6cbf96=cloneDeep(currentCoinsAll);if(_0x2b25b3[_0xbaee13(0x282)]=='')proxyEmit('portfolio',_0x6cbf96);else{_0x6cbf96[_0xbaee13(0x1c7)](_0x1c987f=>{const _0x2b1c1e=_0xbaee13;if(_0x1c987f[_0x2b1c1e(0x2b8)]!=_0x2b25b3[_0x2b1c1e(0x282)])_0x151f8e[_0x2b1c1e(0x1db)](_0x1c987f[_0x2b1c1e(0x16a)]);});if(_0x151f8e[_0xbaee13(0x2b6)]==0x0)logHistory('error',_0xbaee13(0x27b));else{try{_0x25fdab=await exchange[_0xbaee13(0x241)](_0x151f8e);}catch(_0x26e87c){if(_0x26e87c[_0xbaee13(0x157)]()[_0xbaee13(0x19b)]('AuthenticationError')){proxyEmit(_0xbaee13(0x29e),![]);return;}else{if(!_0x26e87c['toString']()[_0xbaee13(0x19b)](_0xbaee13(0x1ea)))handleError(_0x26e87c,'getPortfolio(2)');}}_0x6cbf96[_0xbaee13(0x1c7)](_0x13c6d6=>{const _0x256b8f=_0xbaee13;_0x13c6d6[_0x256b8f(0x2b8)]!=_0x2b25b3['basecoin']?_0x25fdab[_0x13c6d6[_0x256b8f(0x16a)]]?_0x4f6778=_0x13c6d6[_0x256b8f(0x26f)]?0x1/_0x25fdab[_0x13c6d6[_0x256b8f(0x16a)]]['last']:_0x25fdab[_0x13c6d6[_0x256b8f(0x16a)]][_0x256b8f(0x225)]:_0x4f6778=0x0:_0x4f6778=0x1,_0x13c6d6[_0x256b8f(0x215)]=formatResult(_0x4f6778,0x8);}),proxyEmit('portfolio',_0x6cbf96);}}}function truncateTradeAmount(_0x2ebe18,_0x1398b2){const _0x39c627=_0x131c64;let _0x2118e7=0x0;try{_0x2118e7=exchange[_0x39c627(0x272)](_0x2ebe18,_0x1398b2);}catch(_0x41e323){}return _0x2118e7;}function checkMinimums(_0x4d3a13){const _0xdc0992=_0x131c64;let _0x164cd0=!![];const _0x96f8c0=!_0x4d3a13['reverse']?markets[_0x4d3a13[_0xdc0992(0x16a)]][_0xdc0992(0x1a4)][_0xdc0992(0x1dc)][_0xdc0992(0x2aa)]:markets[_0x4d3a13[_0xdc0992(0x16a)]][_0xdc0992(0x1a4)][_0xdc0992(0x257)]['min'],_0x39550e=!_0x4d3a13[_0xdc0992(0x26f)]?markets[_0x4d3a13['symbol']][_0xdc0992(0x1a4)][_0xdc0992(0x257)]['min']:markets[_0x4d3a13['symbol']][_0xdc0992(0x1a4)][_0xdc0992(0x1dc)][_0xdc0992(0x2aa)],_0x41eb1f=truncateTradeAmount(_0x4d3a13['symbol'],_0x4d3a13[_0xdc0992(0x2da)]);_0x4d3a13[_0xdc0992(0x2da)]=_0x41eb1f;if(Math['abs'](_0x41eb1f)<_0x96f8c0)_0x164cd0=![];if(Math[_0xdc0992(0x24e)](_0x41eb1f)*_0x4d3a13[_0xdc0992(0x225)]<_0x39550e)_0x164cd0=![];if(_0x4d3a13[_0xdc0992(0x270)]==_0xdc0992(0x2c2)){let _0x2bf921=config[_0xdc0992(0x29e)][_0xdc0992(0x213)](_0x567cd9=>_0x567cd9['coin']==_0x4d3a13['coin']);if(_0x2bf921[_0xdc0992(0x182)]>0x0){if(Math[_0xdc0992(0x24e)](_0x41eb1f)>_0x4d3a13[_0xdc0992(0x1f1)]-_0x2bf921[_0xdc0992(0x182)])_0x164cd0=![];}else{if(Math[_0xdc0992(0x24e)](_0x41eb1f)>_0x4d3a13[_0xdc0992(0x1f1)])_0x164cd0=![];}}if(_0x4d3a13['side']=='buy'){let _0x5906c8=config[_0xdc0992(0x29e)]['find'](_0x2b89ce=>_0x2b89ce[_0xdc0992(0x2b8)]==config['basecoin']),_0xb7342c=currentCoins[_0xdc0992(0x213)](_0x525fdd=>_0x525fdd['coin']==config[_0xdc0992(0x282)]);if(_0x5906c8[_0xdc0992(0x182)]>0x0){if(Math[_0xdc0992(0x24e)](_0x41eb1f)*_0x4d3a13[_0xdc0992(0x225)]>_0xb7342c[_0xdc0992(0x1f1)]-_0x5906c8[_0xdc0992(0x182)])_0x164cd0=![];}else{if(Math[_0xdc0992(0x24e)](_0x41eb1f)*_0x4d3a13[_0xdc0992(0x225)]>_0xb7342c['number'])_0x164cd0=![];}}return _0x164cd0;}async function getBalances(_0x1118bd=!![]){const _0x2a699b=_0x131c64;let _0x5a6d3c=0x0,_0x542c5f;const _0x35f713=config[_0x2a699b(0x26a)];if(config[_0x2a699b(0x18c)]&&config[_0x2a699b(0x1b8)]<0x0)await validate24hChanges();currentCoins[_0x2a699b(0x1c7)](_0x2e441b=>{const _0x572f14=_0x2a699b;if(_0x2e441b[_0x572f14(0x2b8)]!=config[_0x572f14(0x282)]){let _0x45104b=global[_0x572f14(0x167)][noslash(_0x2e441b['symbol'])];_0x542c5f=_0x2e441b[_0x572f14(0x26f)]?0x1/_0x45104b:_0x45104b;}else _0x542c5f=0x1;let _0x807f3e=_0x2e441b[_0x572f14(0x1f1)]*_0x542c5f;_0x5a6d3c+=_0x807f3e,_0x2e441b['last']=formatResult(Number(_0x542c5f),0x8),_0x2e441b['value']=_0x807f3e;}),currentCoins['forEach'](_0x1e2a5d=>{const _0x114d70=_0x2a699b;let _0x5a9491=config[_0x114d70(0x29e)][_0x114d70(0x213)](_0x4591b7=>_0x4591b7[_0x114d70(0x2b8)]==_0x1e2a5d[_0x114d70(0x2b8)]),_0x32661f=Number(_0x5a9491[_0x114d70(0x291)]),_0x1e2c02=_0x1e2a5d[_0x114d70(0x19d)]/_0x5a6d3c*0x64,_0x460961=_0x32661f*_0x5a6d3c/0x64/_0x1e2a5d['last']-_0x1e2a5d[_0x114d70(0x1f1)];_0x1e2a5d[_0x114d70(0x291)]=formatResult(_0x1e2c02,0x3),_0x1e2a5d[_0x114d70(0x1a8)]=formatResult(_0x32661f,0x3),_0x1e2a5d['trade']=formatResult(_0x460961,0x8),_0x1e2a5d[_0x114d70(0x270)]='',_0x1e2a5d['valid']=![];if(_0x1e2a5d[_0x114d70(0x2b8)]!=config[_0x114d70(0x282)]){if(_0x1e2a5d['distribution']>_0x32661f)_0x1e2a5d[_0x114d70(0x270)]=_0x114d70(0x2c2),_0x1e2a5d[_0x114d70(0x204)]=checkMinimums(_0x1e2a5d);else _0x1e2a5d['distribution']<_0x32661f&&(_0x1e2a5d['side']=_0x114d70(0x1e6),_0x1e2a5d[_0x114d70(0x204)]=checkMinimums(_0x1e2a5d));}_0x1e2a5d[_0x114d70(0x195)]=_0x1e2a5d[_0x114d70(0x291)]/_0x1e2a5d['target']-0x1;if(_0x1e2a5d['orderstatus']==_0x114d70(0x2bd)||_0x1e2a5d[_0x114d70(0x2c4)]==_0x114d70(0x191))_0x1e2a5d[_0x114d70(0x2c4)]=_0x114d70(0x1fd);}),currentCoins['sort']((_0x3d15bd,_0x1a2a97)=>_0x3d15bd[_0x2a699b(0x195)]<_0x1a2a97[_0x2a699b(0x195)]?0x1:_0x1a2a97['delta']<_0x3d15bd[_0x2a699b(0x195)]?-0x1:0x0);const _0x11ca03=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x11ca03[_0x2a699b(0x205)],'usd':_0x11ca03[_0x2a699b(0x1f3)],'portfolio':JSON[_0x2a699b(0x2f0)](currentCoins),'threshold':_0x35f713},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x1118bd){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x35f713});else{if(lockOrders==ORDERS[_0x2a699b(0x180)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x35f713});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4bb304=getNormalizedPerformance();getStartingBalances(_0x4bb304),emitPerformance(_0x4bb304);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4d4622=getNormalizedPerformance();emitPerformance(_0x4d4622),getStartingBalances(_0x4d4622),logger['debug'](_0x2a699b(0x294));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3eddf0=_0x131c64;if(!lastBalances)return;let _0x4195f2=[],_0x39f5c1,_0x4927fd=JSON[_0x3eddf0(0x2a3)](lastBalances[_0x3eddf0(0x29e)]);_0x4927fd[_0x3eddf0(0x1a2)]((_0x59b95c,_0x117f31)=>_0x59b95c[_0x3eddf0(0x2b8)]>_0x117f31[_0x3eddf0(0x2b8)]?0x1:_0x117f31[_0x3eddf0(0x2b8)]>_0x59b95c['coin']?-0x1:0x0),_0x4927fd[_0x3eddf0(0x1c7)](_0x374ef0=>{const _0x3775c1=_0x3eddf0;let _0x533305={'coin':_0x374ef0[_0x3775c1(0x2b8)],'number':_0x374ef0[_0x3775c1(0x1f1)],'price':_0x374ef0['last']};_0x4195f2['push'](_0x533305);});const _0x1f31b6=await getFiat();_0x39f5c1={'date':lastBalances['time'][_0x3eddf0(0x24d)]('\x20')[0x0],'eur':_0x1f31b6[_0x3eddf0(0x205)],'usd':_0x1f31b6[_0x3eddf0(0x1f3)],'coins':_0x4195f2};let _0x1ac69e=dbPerformance[_0x3eddf0(0x21f)](_0x3eddf0(0x1a9))[_0x3eddf0(0x213)]({'date':_0x39f5c1['date']})[_0x3eddf0(0x19d)]();_0x1ac69e?_0x39f5c1[_0x3eddf0(0x1e2)]!=config[_0x3eddf0(0x1ae)]&&dbPerformance[_0x3eddf0(0x21f)](_0x3eddf0(0x1a9))[_0x3eddf0(0x213)]({'date':_0x39f5c1[_0x3eddf0(0x1e2)]})[_0x3eddf0(0x28f)](_0x39f5c1)[_0x3eddf0(0x1be)]():dbPerformance['get']('data')[_0x3eddf0(0x1db)](_0x39f5c1)[_0x3eddf0(0x1be)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2d2dc7=_0x131c64;let _0x58acd3=[];if(dbPerformance[_0x2d2dc7(0x23c)]('data')[_0x2d2dc7(0x19d)]()){let _0x4e41a6=dbPerformance[_0x2d2dc7(0x21f)](_0x2d2dc7(0x1a9))['cloneDeep']()[_0x2d2dc7(0x2e9)](_0x4023a8=>{const _0x4cb832=_0x2d2dc7;if(_0x4023a8[_0x4cb832(0x255)][_0x4cb832(0x2b6)]==0x0)return![];else return!![];})['sortBy']('date')[_0x2d2dc7(0x19d)](),_0x4fab0e=[...config[_0x2d2dc7(0x2e6)]];_0x4fab0e[_0x2d2dc7(0x1a2)]((_0x324965,_0x32d4e2)=>_0x324965[_0x2d2dc7(0x1e2)]>_0x32d4e2[_0x2d2dc7(0x1e2)]?-0x1:_0x32d4e2['date']>_0x324965[_0x2d2dc7(0x1e2)]?0x1:0x0);let _0x338dbe=0x1,_0x299446=[],_0x20f1d6=0x0;_0x4e41a6[_0x2d2dc7(0x2bc)]()['reverse']()['forEach']((_0x5b62fd,_0x3d725f)=>{const _0x43199c=_0x2d2dc7;if(_0x4fab0e[_0x20f1d6]){if(_0x4e41a6[_0x4e41a6[_0x43199c(0x2b6)]-_0x3d725f]&&_0x4fab0e[_0x20f1d6][_0x43199c(0x1e2)]==_0x4e41a6[_0x4e41a6[_0x43199c(0x2b6)]-_0x3d725f][_0x43199c(0x1e2)]){if(_0x3d725f<_0x4e41a6[_0x43199c(0x2b6)]){let _0x25856c=0x0,_0x1ce147=0x0;_0x4e41a6[_0x4e41a6[_0x43199c(0x2b6)]-_0x3d725f][_0x43199c(0x255)][_0x43199c(0x1c7)](_0x220a1d=>{const _0x10e434=_0x43199c;_0x1ce147+=_0x220a1d[_0x10e434(0x1f1)]*_0x220a1d[_0x10e434(0x215)];}),_0x4fab0e[_0x20f1d6]['changes'][_0x43199c(0x1c7)](_0x5b6868=>{const _0x404441=_0x43199c;_0x25856c+=_0x5b6868['number']*_0x5b6868[_0x404441(0x215)];}),_0x338dbe*=_0x25856c/(_0x1ce147-_0x25856c)+0x1;}_0x20f1d6++;}}let _0x568957=0x0;_0x5b62fd[_0x43199c(0x255)][_0x43199c(0x1c7)](_0x3437a8=>{const _0x2c808e=_0x43199c;_0x568957+=_0x3437a8[_0x2c808e(0x1f1)]*_0x3437a8[_0x2c808e(0x215)];}),_0x299446[_0x4e41a6[_0x43199c(0x2b6)]-_0x3d725f-0x1]=_0x568957*(_0x338dbe-0x1);});let _0x57d949=[];_0x4fab0e=[...config['liquidity']]||[];let _0x4ff646=0x0;_0x20f1d6=0x0,_0x4e41a6[_0x2d2dc7(0x1c7)]((_0x1c5618,_0x1e6e19)=>{const _0x3dfd86=_0x2d2dc7;if(_0x4fab0e[_0x20f1d6]){const _0x5c884c=fns['parse'](_0x4fab0e[_0x20f1d6][_0x3dfd86(0x1e2)],_0x3dfd86(0x1e4),new Date()),_0x4dfb6f=fns[_0x3dfd86(0x2a3)](_0x1c5618[_0x3dfd86(0x1e2)],_0x3dfd86(0x1e4),new Date());if(fns[_0x3dfd86(0x185)](_0x5c884c,_0x4dfb6f)){let _0x19d3be=0x0;_0x4fab0e[_0x20f1d6]['changes']['forEach'](_0x207307=>{const _0x17dcaa=_0x3dfd86;!_0x57d949[_0x207307['coin']]?_0x57d949[_0x207307[_0x17dcaa(0x2b8)]]=_0x207307['number']:(_0x19d3be=_0x57d949[_0x207307[_0x17dcaa(0x2b8)]],_0x57d949[_0x207307[_0x17dcaa(0x2b8)]]+=_0x207307[_0x17dcaa(0x1f1)]);const _0x47fa3d=_0x1c5618[_0x17dcaa(0x255)][_0x17dcaa(0x213)](_0x344b7e=>_0x344b7e[_0x17dcaa(0x2b8)]==_0x207307['coin']);(!_0x47fa3d||_0x47fa3d[_0x17dcaa(0x1f1)]==0x0)&&(_0x4ff646+=(-_0x207307['number']-_0x19d3be)*_0x207307[_0x17dcaa(0x215)]);}),_0x20f1d6++;}}_0x1c5618[_0x3dfd86(0x255)]['forEach']((_0x18e141,_0xc1fdcc)=>{const _0x2b4341=_0x3dfd86;_0x57d949[_0x18e141[_0x2b4341(0x2b8)]]&&(_0x18e141[_0x2b4341(0x284)]=_0x57d949[_0x18e141[_0x2b4341(0x2b8)]]);}),_0x58acd3['push']({'date':_0x1c5618[_0x3dfd86(0x1e2)],'eur':_0x1c5618[_0x3dfd86(0x205)],'usd':_0x1c5618[_0x3dfd86(0x1f3)],'offset':_0x299446[_0x1e6e19],'netoffset':_0x4ff646,'coins':_0x1c5618[_0x3dfd86(0x255)]});});}return _0x58acd3;}function emitPerformance(_0x76749e){const _0x549d3e=_0x131c64;_0x76749e[_0x549d3e(0x2b6)]!==0x0?(proxyEmit(_0x549d3e(0x1c6),_0x76749e),lastPerformanceEmitted=getDate()):proxyEmit(_0x549d3e(0x1c6),[]);}function getPerf(_0x9af9b2,_0x5cb030){const _0x101778=_0x131c64;let _0x18ebe4=0x0,_0x2b3565=0x0,_0x54f3a1=0x0;_0x9af9b2[_0x101778(0x255)][_0x101778(0x1c7)](_0x2bc6ff=>{const _0x166022=_0x101778;_0x18ebe4+=_0x2bc6ff[_0x166022(0x1f1)]*_0x2bc6ff[_0x166022(0x215)];});_0x5cb030&&(_0x18ebe4+=_0x9af9b2[_0x101778(0x182)]);if(config[_0x101778(0x282)]===_0x101778(0x17f)||config[_0x101778(0x282)]==='ETH')_0x2b3565=_0x18ebe4*_0x9af9b2[_0x101778(0x205)],_0x54f3a1=_0x18ebe4*_0x9af9b2['usd'];else{if(usdBasecoins[_0x101778(0x19b)](config[_0x101778(0x282)]))_0x2b3565=_0x18ebe4*_0x9af9b2[_0x101778(0x205)]/_0x9af9b2['usd'],_0x54f3a1=_0x18ebe4;else config[_0x101778(0x282)]==='EUR'&&(_0x2b3565=_0x18ebe4,_0x54f3a1=_0x18ebe4*_0x9af9b2[_0x101778(0x1f3)]/_0x9af9b2['eur']);}return[_0x18ebe4,_0x2b3565,_0x54f3a1];}function getKPIs(_0x319795,_0x5d82ab=_0x131c64(0x2cb)){const _0x595c3d=_0x131c64,_0x4dfed3=config[_0x595c3d(0x282)],_0x4fd1de=lastBalances,_0x45536f=currentCoins,_0xcb284c=getNormalizedPerformance(),_0x17cda1=_0x319795===_0x595c3d(0x282)?_0x4dfed3:_0x319795==='fiat'||_0x319795===_0x595c3d(0x1bf)?_0x5d82ab:_0x595c3d(0x1a3)+_0x4dfed3,_0x119478=_0x319795===_0x595c3d(0x2c6)?_0x595c3d(0x2b2):_0x319795===_0x595c3d(0x1bf)?_0x595c3d(0x2b2):_0x17cda1+'\x20value',_0x36f4b7=_0x319795===_0x595c3d(0x2c6)||_0x319795===_0x595c3d(0x1bf)?_0x595c3d(0x2b2):_0x17cda1+_0x595c3d(0x210);let _0x114d3b=0x0;_0x45536f['forEach'](_0x3aa085=>{const _0x1cfe50=_0x595c3d;_0x114d3b+=_0x3aa085[_0x1cfe50(0x1f1)]*_0x3aa085[_0x1cfe50(0x225)];});if(_0x319795===_0x595c3d(0x1c8)||_0x319795==='net-fiat'){if(_0x4dfed3===_0x595c3d(0x17f)||_0x4dfed3===_0x595c3d(0x26d))_0x114d3b=_0x114d3b*(_0x5d82ab===_0x595c3d(0x2cb)?_0x4fd1de[_0x595c3d(0x205)]:_0x4fd1de['usd']);else{if(usdBasecoins['includes'](_0x4dfed3))_0x114d3b=_0x114d3b*(_0x5d82ab===_0x595c3d(0x2cb)?_0x4fd1de[_0x595c3d(0x205)]/_0x4fd1de[_0x595c3d(0x1f3)]:0x1);else _0x4dfed3===_0x595c3d(0x2cb)&&(_0x114d3b=_0x114d3b*(_0x5d82ab===_0x595c3d(0x2cb)?0x1:_0x4fd1de[_0x595c3d(0x1f3)]/_0x4fd1de['eur']));}}let _0x3171ec;if(_0x114d3b!==0x0){if(_0x319795===_0x595c3d(0x282))_0x3171ec=(_0x114d3b/startingBalances[_0x595c3d(0x282)]-0x1)*0x64;else{if(_0x5d82ab===_0x595c3d(0x2cb))_0x3171ec=(_0x114d3b/startingBalances[_0x595c3d(0x205)]-0x1)*0x64;else _0x3171ec=(_0x114d3b/startingBalances[_0x595c3d(0x1f3)]-0x1)*0x64;}let _0xda6406=0x0;if(startingBalances[_0x595c3d(0x255)])_0x45536f[_0x595c3d(0x1c7)](_0x5edcef=>{const _0x4d4786=_0x595c3d;let _0x35cdeb=startingBalances[_0x4d4786(0x255)][_0x4d4786(0x213)](_0x14e4ce=>_0x14e4ce[_0x4d4786(0x2b8)]===_0x5edcef['coin']);if(_0x35cdeb&&_0x35cdeb[_0x4d4786(0x2b8)]&&_0x5edcef[_0x4d4786(0x1f1)]!==0x0)_0xda6406+=_0x35cdeb[_0x4d4786(0x1f1)]*_0x5edcef[_0x4d4786(0x225)];});let _0x2491e9=0x0;if(_0xcb284c[_0x595c3d(0x2b6)]!==0x0){let _0x4c4f43=_0xcb284c[_0xcb284c[_0x595c3d(0x2b6)]-0x1];_0x2491e9=_0x4c4f43['netoffset'];}_0xda6406-=_0x2491e9;_0x319795===_0x595c3d(0x2c6)&&(_0x3171ec=(_0x114d3b-_0xda6406)/startingBalances['basecoin']*0x64,_0x114d3b=_0x114d3b-_0xda6406);if(_0x319795===_0x595c3d(0x1bf)){let _0x502b92=_0x5d82ab===_0x595c3d(0x2cb)?startingBalances[_0x595c3d(0x205)]:startingBalances[_0x595c3d(0x1f3)];if(_0x4dfed3===_0x595c3d(0x17f)||_0x4dfed3===_0x595c3d(0x26d))_0xda6406=_0x5d82ab==='EUR'?_0xda6406*_0x4fd1de['eur']:_0xda6406*_0x4fd1de[_0x595c3d(0x1f3)];else{if(usdBasecoins[_0x595c3d(0x19b)](_0x4dfed3))_0xda6406=_0x5d82ab===_0x595c3d(0x2cb)?_0xda6406*_0x4fd1de['eur']/_0x4fd1de[_0x595c3d(0x1f3)]:_0xda6406;else _0x4dfed3===_0x595c3d(0x2cb)&&(_0xda6406=_0x5d82ab===_0x595c3d(0x2cb)?_0xda6406:_0xda6406*_0x4fd1de[_0x595c3d(0x1f3)]/_0x4fd1de[_0x595c3d(0x205)]);}_0x3171ec=(_0x114d3b-_0xda6406)/_0x502b92*0x64,_0x114d3b=_0x114d3b-_0xda6406;}if(_0x3171ec){if(_0x3171ec<0x64)_0x3171ec=_0x3171ec[_0x595c3d(0x1df)](0x2);else{if(_0x3171ec<0x3e8)_0x3171ec=_0x3171ec[_0x595c3d(0x1df)](0x1);else _0x3171ec=_0x3171ec['toFixed'](0x0);}}else _0x3171ec=Number('0')[_0x595c3d(0x1df)](0x2);if(_0x114d3b){if(Math[_0x595c3d(0x24e)](_0x114d3b)<0.000001)_0x114d3b=_0x114d3b['toFixed'](0x2);else{if(Math[_0x595c3d(0x24e)](_0x114d3b)<0.1)_0x114d3b=_0x114d3b[_0x595c3d(0x1df)](0x6);else{if(Math[_0x595c3d(0x24e)](_0x114d3b)<0x1)_0x114d3b=_0x114d3b[_0x595c3d(0x1df)](0x5);else{if(Math['abs'](_0x114d3b)<0xa)_0x114d3b=_0x114d3b[_0x595c3d(0x1df)](0x4);else{if(Math[_0x595c3d(0x24e)](_0x114d3b)<0x64)_0x114d3b=_0x114d3b[_0x595c3d(0x1df)](0x3);else{if(Math[_0x595c3d(0x24e)](_0x114d3b)<0x3e8)_0x114d3b=_0x114d3b['toFixed'](0x2);else _0x114d3b=_0x114d3b[_0x595c3d(0x1df)](0x2);}}}}}}else _0x114d3b=Number('0')[_0x595c3d(0x1df)](0x2);}else _0x3171ec=Number('0')[_0x595c3d(0x1df)](0x2);return{'value':_0x114d3b,'change':_0x3171ec,'leftTxt':_0x119478,'rightTxt':_0x36f4b7};}async function getStartingBalances(_0x2609ed,_0x5e7353=!![]){const _0x1f8b28=_0x131c64;if(_0x2609ed[_0x1f8b28(0x2b6)]!==0x0){const [_0x4d4bb5,_0x73f5fd,_0x40fbe4]=getPerf(_0x2609ed[0x0],!![]);let _0x4f6a9f=[];config[_0x1f8b28(0x29e)][_0x1f8b28(0x1c7)](_0x4f205c=>{const _0x52a9ff=_0x1f8b28;let _0x47d526=0x0,_0x5ba03d;config['liquidity']['forEach'](_0x241f4d=>{const _0x4b485d=_0x236c;let _0xd7386=_0x241f4d['changes'][_0x4b485d(0x213)](_0x4debe6=>_0x4debe6['coin']==_0x4f205c[_0x4b485d(0x2b8)]);if(_0xd7386){_0x47d526+=_0xd7386[_0x4b485d(0x1f1)];if(!_0x5ba03d)_0x5ba03d=_0xd7386[_0x4b485d(0x215)];}}),_0x4f6a9f['push']({'coin':_0x4f205c[_0x52a9ff(0x2b8)],'number':_0x47d526,'initialprice':_0x5ba03d});});const _0x37b3e1={'basecoin':_0x4d4bb5,'eur':_0x73f5fd,'usd':_0x40fbe4,'coins':_0x4f6a9f};if(_0x5e7353)proxyEmit(_0x1f8b28(0x155),_0x37b3e1);startingBalances=_0x37b3e1;}}function headlessMode(_0x39eaaf){const _0x3956bc=_0x131c64;let _0x4c3a18=_0x39eaaf[_0x3956bc(0x29e)],_0x2fdadd=_0x39eaaf['threshold'],_0x6e249f=[];for(let _0x42360e of _0x4c3a18){if(_0x42360e['coin']!=config[_0x3956bc(0x282)]){if(_0x42360e[_0x3956bc(0x195)]>=_0x2fdadd/0x64){if(_0x42360e[_0x3956bc(0x204)])_0x6e249f[_0x3956bc(0x1db)](_0x42360e);}else{if(_0x42360e['delta']<=-_0x2fdadd/0x64){if(_0x42360e['valid'])_0x6e249f[_0x3956bc(0x1db)](_0x42360e);}}}}_0x6e249f[_0x3956bc(0x2b6)]>0x0&&placeOrder(_0x6e249f);}function notifyBalance(_0x4b2c7f){const _0x43d45d=_0x131c64;let _0x47a115=_0x4b2c7f['portfolio'],_0x263c31=_0x4b2c7f[_0x43d45d(0x26a)],_0x8a7bf0=[];for(let _0x47ca3a of _0x47a115){if(_0x47ca3a['coin']!=config['basecoin']){if(_0x47ca3a[_0x43d45d(0x195)]>=_0x263c31/0x64){if(_0x47ca3a[_0x43d45d(0x204)])_0x8a7bf0[_0x43d45d(0x1db)](_0x47ca3a);}else{if(_0x47ca3a['delta']<=-_0x263c31/0x64){if(_0x47ca3a[_0x43d45d(0x204)])_0x8a7bf0[_0x43d45d(0x1db)](_0x47ca3a);}}}}if(_0x8a7bf0[_0x43d45d(0x2b6)]>0x0){let _0x4fadae=_0x8a7bf0['map'](_0x3fc2bf=>_0x3fc2bf[_0x43d45d(0x2b8)]);_0x4fadae[_0x43d45d(0x1a2)]();let _0xf6f152=_0x4fadae[_0x43d45d(0x242)](',\x20');if(!lastCoinsToBalance)logHistory(_0x43d45d(0x1f9),_0x43d45d(0x1f7));lastCoinsToBalance=_0xf6f152;}}function symbolToCoin(_0x55f17d){const _0xfe26bc=_0x131c64;let _0x5de336;if(_0x55f17d[_0xfe26bc(0x19b)]('/'+config[_0xfe26bc(0x282)]))_0x5de336=_0x55f17d[_0xfe26bc(0x2bb)]('/'+config[_0xfe26bc(0x282)],'');if(_0x55f17d['includes'](config[_0xfe26bc(0x282)]+'/'))_0x5de336=_0x55f17d[_0xfe26bc(0x2bb)](config[_0xfe26bc(0x282)]+'/','');return _0x5de336;}async function unlockOrders(){const _0x264c6e=_0x131c64;if(allOrdersPlaced&&lockOrders==ORDERS[_0x264c6e(0x2ac)]){logger[_0x264c6e(0x237)](_0x264c6e(0x199)),lockOrders=ORDERS[_0x264c6e(0x2eb)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x294ba0=await getCoins();[currentCoins,currentCoinsAll]=_0x294ba0,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x264c6e(0x180)],logger[_0x264c6e(0x237)](_0x264c6e(0x2ae));}}async function validateOrders(_0x548e22){const _0x38cff0=_0x131c64;if(_0x548e22)validateOrdersState=_0x548e22;logger[_0x38cff0(0x237)](_0x38cff0(0x211)+validateOrdersState+_0x38cff0(0x2c1)+(lockOrders==0x1?_0x38cff0(0x23a):lockOrders==0x2?_0x38cff0(0x273):_0x38cff0(0x15b)));let _0x3369c6=[],_0x5e32d5=config[_0x38cff0(0x22c)]==_0x38cff0(0x2d7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x38cff0(0x295)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x38cff0(0x2ac)])return;logger[_0x38cff0(0x237)](_0x38cff0(0x162)+validateOrdersState),lastOrders[_0x38cff0(0x1c7)](_0x5a8121=>{const _0x299663=_0x38cff0;let _0xef130b=![];_0x5a8121[_0x299663(0x2bd)]>0x0&&(_0xef130b=!![]),_0x3369c6[_0x299663(0x1db)](_0xef130b),_0xef130b&&config[_0x299663(0x22c)]!='market'&&logHistory(_0x299663(0x21e),_0x299663(0x20a)+_0x5a8121[_0x299663(0x16a)]+'\x20'+_0x5a8121[_0x299663(0x270)]+'\x20#'+formatResult(_0x5a8121[_0x299663(0x2bd)],0x8)+'\x20@'+formatResult(_0x5a8121[_0x299663(0x215)],0x8));}),_0x3369c6[_0x38cff0(0x1c7)]((_0xbbd87e,_0x4341ce)=>{const _0x58acd2=_0x38cff0;if(_0xbbd87e)lastOrders[_0x58acd2(0x1b9)](_0x4341ce,0x1);}),persistOpenOrders(lastOrders);const _0x2dcc6a=coolingDown?_0x38cff0(0x171):'balancing\x20resumed';if(validateOrdersState==_0x38cff0(0x284)){validateOrdersState=_0x38cff0(0x1c9);if(_0x3369c6[_0x38cff0(0x19b)](![])){if(config['ordertype']==_0x38cff0(0x2d7)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3369c6[_0x38cff0(0x19b)](![])){}else{if(allOrdersPlaced){if(config[_0x38cff0(0x22c)]==_0x38cff0(0x2d7)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x3369c6[_0x38cff0(0x19b)](![])&&(config[_0x38cff0(0x22c)]=='market'?logHistory(_0x38cff0(0x20f),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x38cff0(0x20d)](_0x5e32d5*validateOrderInterval/0xea60)+_0x38cff0(0x1d7)+_0x2dcc6a):(await cancelOrders(),logHistory(_0x38cff0(0x20f),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x38cff0(0x20d)](_0x5e32d5*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2dcc6a))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x38cff0(0x22c)]!=_0x38cff0(0x2d7))logHistory(_0x38cff0(0x20f),_0x38cff0(0x1d1)+_0x2dcc6a);await unlockOrders();}}}}}async function cancelOrders(){const _0x54ec4e=_0x131c64;lastOrders[_0x54ec4e(0x1c7)](async _0x44e270=>{const _0x3ad7e4=_0x54ec4e;try{const _0x3f002d=await exchange[_0x3ad7e4(0x1cc)](_0x44e270[_0x3ad7e4(0x176)],_0x44e270[_0x3ad7e4(0x16a)]);}catch(_0x21e8a7){if(_0x21e8a7[_0x3ad7e4(0x157)]()['includes'](_0x3ad7e4(0x165))){}else await handleError(_0x21e8a7,_0x3ad7e4(0x1ca));}});}async function initCoinResults(_0x145a74){const _0x505d28=_0x131c64;_0x145a74?logger[_0x505d28(0x237)]('Resetting\x20coin\x20results:\x20'+_0x145a74):logger['debug'](_0x505d28(0x193)),config[_0x505d28(0x29e)][_0x505d28(0x1c7)](_0x44286d=>{const _0x445da9=_0x505d28;if(!_0x44286d[_0x445da9(0x2c5)]&&_0x44286d[_0x445da9(0x2b8)]!=config[_0x445da9(0x282)]){const _0x407e7d=currentCoins['find'](_0x173cce=>_0x173cce[_0x445da9(0x2b8)]==_0x44286d[_0x445da9(0x2b8)]),_0x251c2d=global[_0x445da9(0x167)][noslash(_0x44286d[_0x445da9(0x16a)])];let _0x398b34=_0x407e7d?_0x407e7d[_0x445da9(0x1f1)]:null,_0x44cc92=_0x44286d[_0x445da9(0x26f)]?0x1/_0x251c2d:_0x251c2d,_0x211676;config[_0x445da9(0x2e6)]['forEach'](_0x537c1c=>{const _0xcc9b6=_0x445da9;!_0x211676&&(_0x211676=_0x537c1c[_0xcc9b6(0x2a1)][_0xcc9b6(0x213)](_0x5b981f=>_0x5b981f['coin']==_0x44286d['coin']),_0x211676&&(_0x398b34=_0x211676['number'],_0x44cc92=_0x211676[_0xcc9b6(0x215)]));});let _0x15c01c=dbCoinResults[_0x445da9(0x21f)](_0x445da9(0x255))['find']({'coin':_0x44286d[_0x445da9(0x2b8)]})[_0x445da9(0x19d)]();if(!_0x15c01c){const _0x5700b8={'coin':_0x44286d['coin'],'number':_0x398b34,'breakeven':_0x44cc92,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x445da9(0x21f)](_0x445da9(0x255))[_0x445da9(0x1db)](_0x5700b8)['write']();}else{if(_0x145a74&&_0x44286d[_0x445da9(0x2b8)]==_0x145a74){const _0x171016={'coin':_0x44286d[_0x445da9(0x2b8)],'number':_0x398b34,'breakeven':_0x44cc92,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x445da9(0x255))['find']({'coin':_0x44286d[_0x445da9(0x2b8)]})[_0x445da9(0x28f)](_0x171016)[_0x445da9(0x1be)]();}}}});}async function updateCoinResults(_0x3a8071,_0x5d0e84=![]){const _0x4a753c=_0x131c64;let _0x2a1334,_0x317f9b,_0x5e12d0,_0x413bf2,_0x38b4bc,_0x58c96b,_0x199cc9=dbCoinResults['get'](_0x4a753c(0x255))['find']({'coin':_0x3a8071[_0x4a753c(0x2b8)]})['value'](),_0x123b08=![];_0x199cc9&&Object[_0x4a753c(0x2cf)](_0x199cc9)[_0x4a753c(0x1c7)](([_0x55e053,_0x224f4d])=>{if(_0x224f4d==null)_0x123b08=!![];});(!_0x199cc9||_0x123b08)&&(await initCoinResults(_0x3a8071[_0x4a753c(0x2b8)]),_0x199cc9=dbCoinResults[_0x4a753c(0x21f)](_0x4a753c(0x255))[_0x4a753c(0x213)]({'coin':_0x3a8071[_0x4a753c(0x2b8)]})[_0x4a753c(0x19d)]());_0x3a8071[_0x4a753c(0x26f)]&&(_0x58c96b={'filled':_0x3a8071[_0x4a753c(0x2bd)]*_0x3a8071[_0x4a753c(0x215)],'amount':_0x3a8071[_0x4a753c(0x2bd)]*_0x3a8071['price'],'side':_0x3a8071[_0x4a753c(0x270)]==_0x4a753c(0x2c2)?_0x4a753c(0x1e6):'sell','price':0x1/_0x3a8071[_0x4a753c(0x215)]},_0x3a8071={..._0x3a8071,..._0x58c96b});_0x5d0e84?_0x317f9b=_0x3a8071[_0x4a753c(0x270)]==_0x4a753c(0x1e6)?_0x199cc9[_0x4a753c(0x1f1)]+_0x3a8071['filled']:_0x199cc9[_0x4a753c(0x1f1)]-_0x3a8071[_0x4a753c(0x2bd)]:_0x317f9b=await getCoinNumber(_0x3a8071[_0x4a753c(0x2b8)]);if(_0x3a8071[_0x4a753c(0x292)]&&_0x3a8071[_0x4a753c(0x292)]['currency']==config[_0x4a753c(0x282)])_0x2a1334=_0x3a8071[_0x4a753c(0x292)][_0x4a753c(0x257)];else{if(_0x3a8071['fee']&&_0x3a8071[_0x4a753c(0x292)][_0x4a753c(0x1b7)]==_0x4a753c(0x245)&&!_0x5d0e84)_0x2a1334=_0x3a8071['fee']['cost']*global[_0x4a753c(0x167)][_0x4a753c(0x245)+config[_0x4a753c(0x282)]];else _0x2a1334=defaultFee*_0x3a8071['filled']*_0x3a8071[_0x4a753c(0x215)];}_0x3a8071[_0x4a753c(0x270)]==_0x4a753c(0x1e6)?(_0x5e12d0=_0x317f9b!=0x0?(_0x199cc9['breakeven']*_0x199cc9['number']+_0x3a8071['price']*(_0x317f9b-_0x199cc9[_0x4a753c(0x1f1)])+_0x2a1334)/_0x317f9b:0x0,_0x413bf2=_0x199cc9[_0x4a753c(0x299)]):(_0x5e12d0=_0x317f9b!=0x0?(_0x199cc9[_0x4a753c(0x2ca)]*_0x199cc9[_0x4a753c(0x1f1)]-_0x3a8071[_0x4a753c(0x215)]*(_0x199cc9[_0x4a753c(0x1f1)]-_0x317f9b)+_0x2a1334)/_0x317f9b:0x0,_0x413bf2=_0x199cc9[_0x4a753c(0x299)]+(_0x3a8071[_0x4a753c(0x215)]-_0x199cc9['breakeven'])*_0x3a8071[_0x4a753c(0x2bd)]);_0x38b4bc=(_0x3a8071[_0x4a753c(0x215)]-_0x5e12d0-_0x2a1334/_0x3a8071[_0x4a753c(0x2bd)])*_0x317f9b;let _0xa18de0={'coin':_0x3a8071['coin'],'number':_0x317f9b,'breakeven':formatResult(_0x5e12d0,0x8),'realized':formatResult(_0x413bf2,0x8),'unrealized':formatResult(_0x38b4bc,0x8),'fees':formatResult(_0x199cc9[_0x4a753c(0x15a)]+_0x2a1334,0x8),'sells':_0x3a8071[_0x4a753c(0x270)]==_0x4a753c(0x2c2)?_0x199cc9[_0x4a753c(0x2e3)]+0x1:_0x199cc9['sells'],'buys':_0x3a8071[_0x4a753c(0x270)]==_0x4a753c(0x1e6)?_0x199cc9['buys']+0x1:_0x199cc9[_0x4a753c(0x233)]};dbCoinResults[_0x4a753c(0x21f)]('coins')[_0x4a753c(0x213)]({'coin':_0x3a8071[_0x4a753c(0x2b8)]})['assign'](_0xa18de0)[_0x4a753c(0x1be)]();if(!_0x5d0e84){if(_0x3a8071[_0x4a753c(0x292)]&&_0x3a8071[_0x4a753c(0x292)][_0x4a753c(0x1b7)]==_0x4a753c(0x245)){const _0x363911=currentCoins['find'](_0x50ebde=>_0x50ebde[_0x4a753c(0x2b8)]==_0x4a753c(0x245));if(_0x363911){let _0x3bd31e=dbCoinResults[_0x4a753c(0x21f)](_0x4a753c(0x255))[_0x4a753c(0x213)]({'coin':_0x4a753c(0x245)})['value']();_0xa18de0={..._0x3bd31e,'number':_0x363911[_0x4a753c(0x1f1)]},dbCoinResults[_0x4a753c(0x21f)](_0x4a753c(0x255))['find']({'coin':_0x4a753c(0x245)})[_0x4a753c(0x28f)](_0xa18de0)[_0x4a753c(0x1be)]();}}}}async function placeOrder(_0x32d81f){const _0x243ea8=_0x131c64,_0x3ee844=config[_0x243ea8(0x22c)]==_0x243ea8(0x2d7)?_0x243ea8(0x2d7):_0x243ea8(0x265);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x243ea8(0x2ac)],allOrdersPlaced=![],validateOrdersState=_0x243ea8(0x284);let _0x39de89=![];lastOrders=[];for(const _0x2eae7c of _0x32d81f){let _0x16d3c9,_0x4e1e76,_0x2df57d,_0x2f0f5b,_0x21d1e7,_0x26dd98=_0x2eae7c[_0x243ea8(0x16a)];try{const _0x158f75=await exchange[_0x243ea8(0x29f)](_0x26dd98);_0x16d3c9=_0x2eae7c[_0x243ea8(0x26f)]?0x1/_0x2eae7c['last']:_0x2eae7c[_0x243ea8(0x225)],_0x4e1e76=_0x158f75['bid'],_0x2df57d=_0x158f75['ask'];_0x2eae7c[_0x243ea8(0x26f)]?(_0x2f0f5b=_0x2eae7c['side']==_0x243ea8(0x1e6)?'sell':'buy',_0x21d1e7=Math[_0x243ea8(0x24e)](_0x2eae7c['trade'])/_0x16d3c9):(_0x2f0f5b=_0x2eae7c[_0x243ea8(0x270)],_0x21d1e7=Math[_0x243ea8(0x24e)](_0x2eae7c[_0x243ea8(0x2da)]));_0x3ee844=='limit'&&(config[_0x243ea8(0x22c)]=='limit-high'&&(_0x16d3c9=_0x2f0f5b==_0x243ea8(0x1e6)?_0x4e1e76:_0x2df57d),config[_0x243ea8(0x22c)]==_0x243ea8(0x1c2)&&(_0x16d3c9=_0x2f0f5b==_0x243ea8(0x1e6)?_0x2df57d:_0x4e1e76));_0x21d1e7=formatResult(_0x21d1e7,0x8),_0x16d3c9=formatResult(_0x16d3c9,0x8);const _0x10a42c=_0x2f0f5b==_0x243ea8(0x2c2)?config['emojisell']?String[_0x243ea8(0x238)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x243ea8(0x238)]('0x'+config[_0x243ea8(0x164)])+'\x20':'',_0x318032=_0x3ee844==_0x243ea8(0x2d7)?_0x243ea8(0x2c9):config['ordertype']==_0x243ea8(0x223)?_0x243ea8(0x296):'Limit\x20(low-margin)',_0x2f8a13=(Math[_0x243ea8(0x1ed)](Math[_0x243ea8(0x2ba)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x243ea8(0x1db)]({'customId':_0x2f8a13,'symbol':_0x26dd98,'coin':_0x2eae7c[_0x243ea8(0x2b8)],'amount':_0x21d1e7,'price':_0x16d3c9,'side':_0x2f0f5b,'reverse':_0x2eae7c[_0x243ea8(0x26f)],'filled':0x0});if(_0x3ee844=='market')logHistory('order',''+_0x10a42c+_0x318032+_0x243ea8(0x18e)+_0x26dd98+'\x20'+_0x2f0f5b+'\x20#'+formatResult(_0x21d1e7,0x8)+'\x20@'+formatResult(_0x16d3c9,0x8));else logHistory(_0x243ea8(0x21e),''+_0x10a42c+_0x318032+_0x243ea8(0x18e)+_0x26dd98+'\x20'+_0x2f0f5b+'\x20#'+formatResult(_0x21d1e7,0x8)+'\x20@'+formatResult(_0x16d3c9,0x8));let _0x40b5d1;_0x3ee844==_0x243ea8(0x2d7)?_0x2f0f5b=='buy'&&['Bybit',_0x243ea8(0x271),'Cex','Huobi',_0x243ea8(0x1c3)]['includes'](config[_0x243ea8(0x1e7)])?_0x40b5d1=await exchange[_0x243ea8(0x277)](_0x26dd98,_0x3ee844,_0x2f0f5b,_0x21d1e7,_0x16d3c9):_0x40b5d1=await exchange['createOrder'](_0x26dd98,_0x3ee844,_0x2f0f5b,_0x21d1e7,undefined):_0x40b5d1=await exchange[_0x243ea8(0x277)](_0x26dd98,_0x3ee844,_0x2f0f5b,_0x21d1e7,_0x16d3c9);logger[_0x243ea8(0x237)](_0x243ea8(0x1b2)+_0x40b5d1['id']+'\x20|\x20Custom\x20ID:\x20'+_0x2f8a13);const _0x2a1d05=lastOrders[_0x243ea8(0x2b6)]-0x1;if(_0x2a1d05>=0x0&&lastOrders[_0x2a1d05][_0x243ea8(0x1fe)]==_0x2f8a13){lastOrders[_0x2a1d05][_0x243ea8(0x176)]=_0x40b5d1['id'];if(_0x40b5d1[_0x243ea8(0x1dc)])lastOrders[_0x2a1d05][_0x243ea8(0x1dc)]=_0x40b5d1['amount'];if(_0x40b5d1[_0x243ea8(0x215)])lastOrders[_0x2a1d05][_0x243ea8(0x215)]=_0x40b5d1[_0x243ea8(0x215)];lastOrders[_0x2a1d05][_0x243ea8(0x292)]=_0x40b5d1[_0x243ea8(0x292)];}if(config['cooldown']!=0x0){let _0x6a21bd=null;if(cooldownTracker[_0x243ea8(0x2b6)]==config[_0x243ea8(0x20c)]-0x1)_0x6a21bd=cooldownTracker[_0x243ea8(0x234)]();const _0x427884=getTimeStamp();cooldownTracker[_0x243ea8(0x1db)](_0x427884);if(_0x6a21bd){const _0x322d83=fns[_0x243ea8(0x254)](new Date(_0x427884),new Date(_0x6a21bd));if(_0x322d83<cooldownInterval){logHistory(_0x243ea8(0x26e),_0x243ea8(0x26c)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x243ea8(0x15e)+cooldownPeriod/(0xe10*0x3e8)+_0x243ea8(0x154)),coolingDown=!![];break;}}}}catch(_0x2bd0f3){if(_0x2bd0f3[_0x243ea8(0x157)]()[_0x243ea8(0x19b)](_0x243ea8(0x278)))lastOrders=lastOrders[_0x243ea8(0x2e9)](_0x26a878=>_0x26a878[_0x243ea8(0x16a)]!=_0x26dd98),logHistory(_0x243ea8(0x26e),_0x243ea8(0x29c)+_0x26dd98),_0x39de89=!![];else{if(_0x2bd0f3[_0x243ea8(0x157)]()[_0x243ea8(0x19b)](_0x243ea8(0x216)))lastOrders=lastOrders[_0x243ea8(0x2e9)](_0x576e45=>_0x576e45['symbol']!=_0x26dd98),logHistory(_0x243ea8(0x26e),_0x243ea8(0x230)+_0x26dd98),_0x39de89=!![];else{if(_0x2bd0f3[_0x243ea8(0x157)]()[_0x243ea8(0x19b)](_0x243ea8(0x16f)))lastOrders=lastOrders[_0x243ea8(0x2e9)](_0x3fa827=>_0x3fa827[_0x243ea8(0x16a)]!=_0x26dd98),logHistory(_0x243ea8(0x26e),_0x243ea8(0x2e8)+_0x26dd98),logger['debug'](_0x2bd0f3),_0x39de89=!![];else _0x2bd0f3['toString']()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x243ea8(0x2e9)](_0x49fcc9=>_0x49fcc9[_0x243ea8(0x16a)]!=_0x26dd98),logHistory(_0x243ea8(0x26e),_0x243ea8(0x29c)+_0x26dd98),_0x39de89=!![]):(lastOrders=lastOrders[_0x243ea8(0x2e9)](_0x28d551=>_0x28d551['symbol']!=_0x26dd98),await handleError(_0x2bd0f3,_0x243ea8(0x252),_0x26dd98));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2ec890=config[_0x243ea8(0x22c)]==_0x243ea8(0x2d7)?validateOrderTimeout*0x3c*0x3e8:config[_0x243ea8(0x295)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xd95db8=_0x243ea8;validateOrders(_0xd95db8(0x290));},_0x2ec890);}else unlockOrders();_0x39de89&&config[_0x243ea8(0x18c)]&&(logHistory(_0x243ea8(0x26e),_0x243ea8(0x184)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x243ea8(0x286)));}else{if(coolingDown)!config['headless']&&logHistory(_0x243ea8(0x26e),_0x243ea8(0x27c));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x243ea8(0x18c)]&&(config['ordertype']==_0x243ea8(0x2d7)?logHistory(_0x243ea8(0x26e),_0x243ea8(0x23e)):logHistory(_0x243ea8(0x26e),_0x243ea8(0x1f8))));}}function persistOpenOrders(_0x196b6e){const _0xd44032=_0x131c64,_0x552796={...config,'openOrders':_0x196b6e};let _0x3a4084=dbConfig[_0xd44032(0x21f)]('bot')['find']({'botID':botID})[_0xd44032(0x19d)]();_0x3a4084&&dbConfig['get'](_0xd44032(0x1eb))[_0xd44032(0x213)]({'botID':botID})['assign'](_0x552796)[_0xd44032(0x1be)]();}function restoreOrders(){const _0x261d43=_0x131c64;let _0x17606f;config[_0x261d43(0x163)]&&allOpenOrders[_0x261d43(0x1c7)](_0x5cf0a0=>{const _0x4c1fc0=_0x261d43,_0x18aca6=config[_0x4c1fc0(0x163)][_0x4c1fc0(0x213)](_0x1d5793=>_0x1d5793[_0x4c1fc0(0x176)]==_0x5cf0a0['id']);_0x18aca6&&(lastOrders['push'](_0x18aca6),_0x17606f=_0x5cf0a0[_0x4c1fc0(0x1d8)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x261d43(0x1c9),allOrdersPlaced=!![];const _0x152201=new Date()[_0x261d43(0x170)](),_0x38cd26=config['ordertype']==_0x261d43(0x2d7)?validateOrderTimeout*0x3c*0x3e8:config[_0x261d43(0x295)]*0x3c*0x3e8;if(_0x17606f+_0x38cd26>_0x152201){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3d2a83=_0x261d43;validateOrders(_0x3d2a83(0x290));},_0x17606f+_0x38cd26-_0x152201);}else validateOrders(_0x261d43(0x290));}}async function sendMetricsTelegram(){const _0x40e90c=_0x131c64;if(!coinsLoaded){process[_0x40e90c(0x1f0)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xb77173=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x55571d='';if(config['showname'])_0x55571d=_0x40e90c(0x1ee)+config[_0x40e90c(0x196)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x55571d=_0x40e90c(0x1fa)+botID+_0x40e90c(0x18d);const _0x59dabc=getKPIs(_0x40e90c(0x282)),_0x145d60=getKPIs(_0x40e90c(0x1c8),config[_0x40e90c(0x1c8)]),_0x291543=getKPIs('net-basecoin'),_0x4015a0=getKPIs(_0x40e90c(0x1bf),config[_0x40e90c(0x1c8)]);_0x55571d+=_0x40e90c(0x1ce),_0x55571d+=_0x59dabc[_0x40e90c(0x23f)]+_0x40e90c(0x1ac)+_0x59dabc[_0x40e90c(0x19d)]+'\x0a',_0x55571d+=_0x59dabc[_0x40e90c(0x218)]+':\x20'+_0x59dabc['change']+'%\x0a',_0x55571d+=_0x145d60['leftTxt']+_0x40e90c(0x1ac)+_0x145d60[_0x40e90c(0x19d)]+'\x0a',_0x55571d+=_0x145d60[_0x40e90c(0x218)]+':\x20'+_0x145d60[_0x40e90c(0x192)]+'%\x0a',_0x55571d+=_0x291543[_0x40e90c(0x23f)]+':\x20'+_0x291543[_0x40e90c(0x19d)]+'\x20('+config['basecoin']+')\x0a',_0x55571d+=_0x291543[_0x40e90c(0x218)]+':\x20'+_0x291543[_0x40e90c(0x192)]+_0x40e90c(0x261)+config[_0x40e90c(0x282)]+')\x0a',_0x55571d+=_0x4015a0[_0x40e90c(0x23f)]+':\x20'+_0x4015a0['value']+'\x20('+config['fiat']+')\x0a',_0x55571d+=_0x4015a0[_0x40e90c(0x218)]+':\x20'+_0x4015a0[_0x40e90c(0x192)]+'%\x20('+config[_0x40e90c(0x1c8)]+')\x0a',_0x55571d+=_0x40e90c(0x250),process[_0x40e90c(0x1f0)]({'telegrammsg':_0x55571d},_0x11ccbc=>{});}async function sendPortfolioTelegram(){const _0x250e77=_0x131c64;if(!coinsLoaded){process[_0x250e77(0x1f0)]({'telegrammsg':_0x250e77(0x268)},_0x34afcc=>{});return;}let _0x35177a='';if(config['showname'])_0x35177a=_0x250e77(0x1ee)+config[_0x250e77(0x196)]+_0x250e77(0x262);else _0x35177a='<b>Bot\x20'+botID+_0x250e77(0x262);_0x35177a+='<pre>',_0x35177a+='-------------------------------\x0a',_0x35177a+=_0x250e77(0x178),_0x35177a+=_0x250e77(0x258),currentCoins['forEach'](_0x553c13=>{const _0x50bdbc=_0x250e77;_0x35177a+=_0x553c13[_0x50bdbc(0x2b8)][_0x50bdbc(0x17d)](0x7)+'|\x20'+formatPad(_0x553c13[_0x50bdbc(0x291)],0x2,0x6)+'|\x20'+formatPad(_0x553c13[_0x50bdbc(0x1a8)],0x2,0x6)+'|\x20'+formatPad(_0x553c13[_0x50bdbc(0x195)]*0x64,0x2,0x6)+'\x0a';}),_0x35177a+='</pre>',process[_0x250e77(0x1f0)]({'telegrammsg':_0x35177a},_0xa4b0b4=>{});}function formatPad(_0x3dad18,_0x46e24d,_0x5b4de2){const _0xa0b62=_0x131c64,_0x2fd591=formatResultString(_0x3dad18,_0x46e24d);return _0x2fd591?_0x2fd591[_0xa0b62(0x2cd)](_0x5b4de2):''[_0xa0b62(0x2cd)](_0x5b4de2);}function logHistory(_0x396a66,_0xcc52f1,_0x25e4d8=''){const _0x5bdee2=_0x131c64;logger['full'](''+_0xcc52f1);let _0x1b7047={'time':getTimeStamp(),'type':_0x396a66,'event':_0xcc52f1};dbLogs['get'](_0x5bdee2(0x25b))[_0x5bdee2(0x1db)](_0x1b7047)[_0x5bdee2(0x1be)]();if(_0x25e4d8=='')_0x25e4d8=_0xcc52f1;proxyEmit(_0x5bdee2(0x208),{'log':_0x1b7047,'summary':_0x25e4d8}),process[_0x5bdee2(0x1f0)]({'telegram':{..._0x1b7047,'botname':config[_0x5bdee2(0x196)],'showname':config[_0x5bdee2(0x2ab)]}},_0x28e7e6=>{});}function emitHistory(_0x32d88d={}){const _0x58b42b=_0x131c64;Object[_0x58b42b(0x217)](_0x32d88d)['length']==0x0&&(_0x32d88d={'type':[_0x58b42b(0x21e),_0x58b42b(0x208)],'event':'','page':0x1});if(_0x32d88d[_0x58b42b(0x243)][_0x58b42b(0x19b)](_0x58b42b(0x208)))_0x32d88d[_0x58b42b(0x243)][_0x58b42b(0x1b9)](_0x32d88d[_0x58b42b(0x243)]['indexOf'](_0x58b42b(0x208)),0x1,_0x58b42b(0x26e),'warning','success');if(dbLogs['has'](_0x58b42b(0x25b))[_0x58b42b(0x19d)]()){let _0x3802e4=dbLogs[_0x58b42b(0x21f)]('logs')['filter'](_0x552347=>{const _0x44d95b=_0x58b42b;if(_0x32d88d[_0x44d95b(0x243)]['length']==0x0)return![];else return _0x32d88d[_0x44d95b(0x243)]['includes'](_0x552347[_0x44d95b(0x243)]);})['filter'](_0x1f2305=>{const _0xe65acc=_0x58b42b;if(_0x32d88d[_0xe65acc(0x208)]=='')return!![];else return _0x1f2305['event'][_0xe65acc(0x1a5)]()[_0xe65acc(0x19b)](_0x32d88d['event'][_0xe65acc(0x1a5)]());})[_0x58b42b(0x222)](_0x58b42b(0x27a)),_0x11c8a4=_0x3802e4[_0x58b42b(0x19d)]()[_0x58b42b(0x2b6)];_0x3802e4=_0x3802e4[_0x58b42b(0x26f)]()[_0x58b42b(0x2bc)]((_0x32d88d[_0x58b42b(0x27d)]-0x1)*logPageSize,_0x32d88d[_0x58b42b(0x27d)]*logPageSize-0x1)[_0x58b42b(0x26f)]()['value'](),proxyEmit(_0x58b42b(0x1c0),{'logs':_0x3802e4,'total':_0x11c8a4});}else proxyEmit(_0x58b42b(0x1c0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x552ed4){const _0x1f074a=_0x131c64;if(dbLogs[_0x1f074a(0x23c)](_0x1f074a(0x25b))['value']()){const _0x4a91e3=dbLogs[_0x1f074a(0x21f)](_0x1f074a(0x25b))[_0x1f074a(0x222)](_0x1f074a(0x27a))[_0x1f074a(0x2e9)](_0x54697d=>{const _0x152921=_0x1f074a;return _0x54697d['type']==_0x152921(0x21e);})[_0x1f074a(0x19d)]();dbLogs['get'](_0x1f074a(0x25b))['remove']()[_0x1f074a(0x1be)](),dbLogs[_0x1f074a(0x21f)](_0x1f074a(0x25b))[_0x1f074a(0x28f)](_0x4a91e3)[_0x1f074a(0x1be)](),emitHistory(_0x552ed4);}}async function pauseBot(){const _0x4240aa=_0x131c64,_0x5e5356=new Date()[_0x4240aa(0x170)]();if(!lastErrorShown||_0x5e5356-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x5e5356;!lastBotPause?(lastBotPause=_0x5e5356,consecutivePauses=0x1):(_0x5e5356-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x4240aa(0x172)},_0x5a9f16=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x4240aa(0x170)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5f42d1=_0x131c64;botPaused=!![],await sleep(0x3e8),process[_0x5f42d1(0x1f0)]({'stop':'kill'},_0x535532=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x50b22b,_0x4da13d){const _0x189d7c=_0x131c64;if(botPaused)return;const _0x524fbe=config['exchange']||_0x189d7c(0x259);if(_0x4da13d)logger[_0x189d7c(0x237)](_0x189d7c(0x17b)+_0x4da13d);if(_0x50b22b['toString']()['includes'](_0x189d7c(0x23b)))logHistory(_0x189d7c(0x26e),_0x524fbe+_0x189d7c(0x263));else{if(_0x50b22b[_0x189d7c(0x157)]()[_0x189d7c(0x19b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x524fbe+_0x189d7c(0x22d));else _0x50b22b[_0x189d7c(0x157)]()[_0x189d7c(0x19b)](_0x189d7c(0x203))?(logHistory('error',_0x524fbe+_0x189d7c(0x1da)),logHistory('error',_0x189d7c(0x2c3))):await handleError(_0x50b22b,null);}}async function handleError(_0x1b1d2b,_0x513bbc,_0x4f5d3c=''){const _0x208434=_0x131c64;if(botPaused)return;const _0x963b11=config[_0x208434(0x1e7)]||_0x208434(0x259);if(_0x513bbc)logger[_0x208434(0x237)](_0x208434(0x17b)+_0x513bbc);if(_0x1b1d2b[_0x208434(0x157)]()['includes'](_0x208434(0x177))||_0x1b1d2b[_0x208434(0x157)]()['includes'](_0x208434(0x269)))logHistory('error',_0x963b11+_0x208434(0x1ff)+pauseBotMsg),await pauseBot();else{if(_0x1b1d2b['toString']()[_0x208434(0x19b)](_0x208434(0x1fc))||_0x1b1d2b[_0x208434(0x157)]()[_0x208434(0x19b)](_0x208434(0x186)))logHistory(_0x208434(0x26e),_0x963b11+_0x208434(0x1b1)+pauseBotMsg),await pauseBot();else{if(_0x1b1d2b[_0x208434(0x157)]()[_0x208434(0x19b)](_0x208434(0x20b)))logHistory('error',_0x963b11+_0x208434(0x220)+pauseBotMsg),await pauseBot();else{if(_0x1b1d2b['toString']()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x208434(0x26e),_0x963b11+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0x1b1d2b['toString']()[_0x208434(0x19b)](_0x208434(0x2ad)))logHistory(_0x208434(0x26e),_0x208434(0x246)),logHistory(_0x208434(0x26e),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1b1d2b[_0x208434(0x157)]()['includes'](_0x208434(0x280)))logHistory(_0x208434(0x26e),_0x208434(0x2d5)),logHistory('error',_0x208434(0x264)),await killBot();else{if(_0x1b1d2b instanceof ccxt[_0x208434(0x224)])logHistory('error',_0x963b11+_0x208434(0x1e5)+pauseBotMsg),logger[_0x208434(0x237)](_0x208434(0x229),_0x1b1d2b),await pauseBot();else{if(_0x1b1d2b[_0x208434(0x157)]()[_0x208434(0x19b)](_0x208434(0x23b)))logHistory(_0x208434(0x26e),_0x963b11+_0x208434(0x2dd)),logHistory(_0x208434(0x26e),_0x208434(0x264)),await killBot();else{if(_0x1b1d2b[_0x208434(0x157)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x208434(0x26e),_0x963b11+_0x208434(0x25e)),logHistory('error',_0x208434(0x264)),await killBot();else{if(_0x1b1d2b[_0x208434(0x157)]()[_0x208434(0x19b)](_0x208434(0x203)))logHistory(_0x208434(0x26e),_0x963b11+_0x208434(0x221)),logHistory(_0x208434(0x26e),_0x208434(0x264)),await killBot();else{if(_0x1b1d2b['toString']()[_0x208434(0x19b)](_0x208434(0x2d3)))logHistory(_0x208434(0x26e),_0x208434(0x1f4)+_0x4f5d3c);else _0x1b1d2b instanceof ccxt[_0x208434(0x25a)]?(logHistory(_0x208434(0x26e),_0x963b11+_0x208434(0x169)),logger[_0x208434(0x237)]('Error\x20details:',_0x1b1d2b)):(logHistory('error','Unknown\x20error\x20occured'+pauseBotMsg),logger[_0x208434(0x237)](_0x208434(0x229),_0x1b1d2b),await pauseBot());}}}}}}}}}}}function formatResult(_0x5a3e00,_0x76302e){const _0x275fd0=_0x131c64;return parseFloat(_0x5a3e00[_0x275fd0(0x1df)](_0x76302e));}function formatResultTruncate(_0x55539c,_0x48de8a){const _0x2b58a3=_0x131c64;let _0xa24a5d=formatResultString(_0x55539c,0xa),_0x46340c=_0xa24a5d['indexOf']('.');return _0x46340c!=-0x1&&(_0xa24a5d=_0xa24a5d[_0x2b58a3(0x2bc)](0x0,_0x46340c+_0x48de8a+0x1)),Number(_0xa24a5d);}function formatResultString(_0x593369,_0x2aaae0){const _0x1378f1=_0x131c64;let _0x1cc180;if(!(''+_0x593369)[_0x1378f1(0x19b)]('e'))_0x1cc180=+(Math[_0x1378f1(0x20d)](_0x593369+'e+'+_0x2aaae0)+'e-'+_0x2aaae0);else{let _0x2f26e3=(''+_0x593369)[_0x1378f1(0x24d)]('e'),_0x596f88='';+_0x2f26e3[0x1]+_0x2aaae0>0x0&&(_0x596f88='+'),_0x1cc180=+(Math[_0x1378f1(0x20d)](+_0x2f26e3[0x0]+'e'+_0x596f88+(+_0x2f26e3[0x1]+_0x2aaae0))+'e-'+_0x2aaae0);}return Number(_0x1cc180)['toFixed'](_0x2aaae0);}function getServerTime(){const _0x234f83=_0x131c64,_0x413fae=new Date();return _0x413fae[_0x234f83(0x2e0)]()+'/'+(_0x413fae[_0x234f83(0x226)]()+0x1)[_0x234f83(0x157)]()['padStart'](0x2,'0')+'/'+_0x413fae[_0x234f83(0x1e1)]()[_0x234f83(0x157)]()[_0x234f83(0x2cd)](0x2,'0')+'\x20'+_0x413fae[_0x234f83(0x197)]()[_0x234f83(0x157)]()[_0x234f83(0x2cd)](0x2,'0')+':'+_0x413fae['getMinutes']()[_0x234f83(0x157)]()[_0x234f83(0x2cd)](0x2,'0')+':'+_0x413fae['getSeconds']()['toString']()[_0x234f83(0x2cd)](0x2,'0');}function getTimeStamp(){const _0x2505e8=_0x131c64,_0x27ca34=shiftedTime();return _0x27ca34[_0x2505e8(0x2e0)]()+'/'+(_0x27ca34[_0x2505e8(0x226)]()+0x1)[_0x2505e8(0x157)]()[_0x2505e8(0x2cd)](0x2,'0')+'/'+_0x27ca34['getDate']()[_0x2505e8(0x157)]()[_0x2505e8(0x2cd)](0x2,'0')+'\x20'+_0x27ca34[_0x2505e8(0x197)]()[_0x2505e8(0x157)]()[_0x2505e8(0x2cd)](0x2,'0')+':'+_0x27ca34[_0x2505e8(0x179)]()[_0x2505e8(0x157)]()['padStart'](0x2,'0')+':'+_0x27ca34[_0x2505e8(0x206)]()[_0x2505e8(0x157)]()[_0x2505e8(0x2cd)](0x2,'0');}function getDate(){const _0x479e47=_0x131c64,_0x1ea837=shiftedTime();return _0x1ea837['getFullYear']()+'/'+(_0x1ea837[_0x479e47(0x226)]()+0x1)[_0x479e47(0x157)]()[_0x479e47(0x2cd)](0x2,'0')+'/'+_0x1ea837[_0x479e47(0x1e1)]()[_0x479e47(0x157)]()[_0x479e47(0x2cd)](0x2,'0');}function getHour(){const _0x8391f2=_0x131c64,_0x2a7c44=shiftedTime();return _0x2a7c44[_0x8391f2(0x197)]()['toString']()[_0x8391f2(0x2cd)](0x2,'0');}function sleep(_0x19243c){return new Promise(_0x5b217b=>setTimeout(_0x5b217b,_0x19243c));}function shiftedTime(){const _0x9ed648=_0x131c64,_0x474339=new Date();let _0x520ba1=_0x474339;if(config&&config['timeshift']!==0x0)_0x520ba1=fns[_0x9ed648(0x227)](_0x474339,{'hours':config[_0x9ed648(0x288)]});return _0x520ba1;}function timer(_0x5e6cbb){const _0x46774a=_0x131c64,_0xd42be=new Date();!lasttime?console[_0x46774a(0x207)](getTimeStamp()+_0x46774a(0x29d),_0x5e6cbb,_0xd42be):console[_0x46774a(0x207)](getTimeStamp()+_0x46774a(0x29d),_0x5e6cbb,(_0xd42be-lasttime)/0x3e8),lasttime=_0xd42be;}