const _0x58b3d8=_0x52cc;(function(_0x4dc322,_0x535e60){const _0x2b40ea=_0x52cc,_0x4c11ab=_0x4dc322();while(!![]){try{const _0x4c83f2=parseInt(_0x2b40ea(0x166))/0x1+-parseInt(_0x2b40ea(0x1e5))/0x2*(-parseInt(_0x2b40ea(0x20f))/0x3)+-parseInt(_0x2b40ea(0x2c5))/0x4+parseInt(_0x2b40ea(0x19b))/0x5+-parseInt(_0x2b40ea(0x2bf))/0x6+-parseInt(_0x2b40ea(0x203))/0x7+-parseInt(_0x2b40ea(0x1a5))/0x8*(-parseInt(_0x2b40ea(0x214))/0x9);if(_0x4c83f2===_0x535e60)break;else _0x4c11ab['push'](_0x4c11ab['shift']());}catch(_0x19a4c6){_0x4c11ab['push'](_0x4c11ab['shift']());}}}(_0x4689,0xd7251));const _0x8c5c1a=function(){let _0x29d5ae=!![];return function(_0x239425,_0x5d98aa){const _0x1961d3=_0x29d5ae?function(){const _0x574eb6=_0x52cc;if(_0x5d98aa){const _0x5d4a4d=_0x5d98aa[_0x574eb6(0x21f)](_0x239425,arguments);return _0x5d98aa=null,_0x5d4a4d;}}:function(){};return _0x29d5ae=![],_0x1961d3;};}(),_0x121ce3=_0x8c5c1a(this,function(){const _0x3aa784=_0x52cc;return _0x121ce3['toString']()[_0x3aa784(0x2ac)](_0x3aa784(0x1d8))['toString']()[_0x3aa784(0x27d)](_0x121ce3)['search'](_0x3aa784(0x1d8));});_0x121ce3();'use strict';function _0x52cc(_0x3a4ed3,_0x894dfb){const _0x45c282=_0x4689();return _0x52cc=function(_0x121ce3,_0x8c5c1a){_0x121ce3=_0x121ce3-0x12f;let _0x46891a=_0x45c282[_0x121ce3];return _0x46891a;},_0x52cc(_0x3a4ed3,_0x894dfb);}const ccxt=require(_0x58b3d8(0x27c)),low=require(_0x58b3d8(0x224)),FileSync=require(_0x58b3d8(0x265)),fs=require('fs'),fns=require(_0x58b3d8(0x2a3)),Crypt=require(_0x58b3d8(0x1ec))[_0x58b3d8(0x2b4)],util=require('util'),argv=require(_0x58b3d8(0x18f))(process[_0x58b3d8(0x198)][_0x58b3d8(0x24a)](0x2))['argv'],path=require(_0x58b3d8(0x26c));let exchange;global[_0x58b3d8(0x1fd)]={},global[_0x58b3d8(0x26b)]={};const usdBasecoins=[_0x58b3d8(0x210),_0x58b3d8(0x1d9),_0x58b3d8(0x2b1),_0x58b3d8(0x16a),'USDC',_0x58b3d8(0x2c4)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x58b3d8(0x1db)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x58b3d8(0x22c)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x58b3d8(0x1e8))[_0x58b3d8(0x21b)],botID=process[_0x58b3d8(0x198)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x58b3d8(0x172)](botID)&&(console[_0x58b3d8(0x2b2)](_0x58b3d8(0x1e2)+botID+_0x58b3d8(0x157)),killBot());const userID=process[_0x58b3d8(0x198)][0x3]||'',configpath=userID?_0x58b3d8(0x23b)+userID+'/':_0x58b3d8(0x23b),logspath=userID?_0x58b3d8(0x1c3)+userID+'/':_0x58b3d8(0x1c3),loggerfile=fs[_0x58b3d8(0x135)](logspath+_0x58b3d8(0x18b),{'flags':'a'});!fs[_0x58b3d8(0x241)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x58b3d8(0x241)](logspath)&&fs[_0x58b3d8(0x295)](logspath);const configfile=configpath+_0x58b3d8(0x25c)+botID+_0x58b3d8(0x1ef),logfile=configpath+_0x58b3d8(0x25c)+botID+_0x58b3d8(0x193),performancefile=configpath+_0x58b3d8(0x25c)+botID+_0x58b3d8(0x280),coinresultsfile=configpath+_0x58b3d8(0x25c)+botID+'-results.json',settingsfile=configpath+_0x58b3d8(0x164),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x58b3d8(0x264),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x58b3d8(0x194)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x58b3d8(0x1b7)]({'data':[],'version':serverversion})[_0x58b3d8(0x194)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x58b3d8(0x1b7)]({'bot':[],'version':serverversion})[_0x58b3d8(0x194)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x58b3d8(0x146)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1cbc2e=>{console['log'](_0x1cbc2e);},'simple':_0x1bfc12=>{const _0x151a79=_0x58b3d8;console['log'](_0x1bfc12),loggerfile[_0x151a79(0x194)](util[_0x151a79(0x2c1)](_0x1bfc12)+'\x0a');},'full':async(_0x50df18,_0x34a70e='')=>{const _0x2dbc23=_0x58b3d8;let _0x3555be;if(config[_0x2dbc23(0x2b8)])_0x3555be=getTimeStamp()+':\x20'+config['botname']+_0x2dbc23(0x293)+_0x50df18;else _0x3555be=getTimeStamp()+_0x2dbc23(0x281)+botID+_0x2dbc23(0x293)+_0x50df18;console[_0x2dbc23(0x2b2)](_0x3555be),loggerfile[_0x2dbc23(0x194)](util[_0x2dbc23(0x2c1)](_0x3555be)+'\x0a'),_0x34a70e&&(console[_0x2dbc23(0x2b2)](_0x34a70e),loggerfile['write'](util[_0x2dbc23(0x2c1)](_0x34a70e)+'\x0a'));},'debug':async(_0x28b8f1,_0x4c39a2='')=>{const _0x263704=_0x58b3d8;let _0x4bb103;if(config[_0x263704(0x2b8)])_0x4bb103=getTimeStamp()+':\x20'+config[_0x263704(0x19a)]+_0x263704(0x184)+_0x28b8f1;else _0x4bb103=getTimeStamp()+_0x263704(0x281)+botID+_0x263704(0x184)+_0x28b8f1;if(debugging)console[_0x263704(0x2b2)](_0x4bb103);loggerfile['write'](util[_0x263704(0x2c1)](_0x4bb103)+'\x0a');if(_0x4c39a2){if(debugging)console[_0x263704(0x2b2)](_0x4c39a2);loggerfile[_0x263704(0x194)](util[_0x263704(0x2c1)](_0x4c39a2)+'\x0a');}}};process['on'](_0x58b3d8(0x18a),function(_0x1ef85a){const _0x4c0dec=_0x58b3d8;logHistory(_0x4c0dec(0x1b6),_0x4c0dec(0x28d)),logger[_0x4c0dec(0x1d4)](_0x4c0dec(0x201),_0x1ef85a);});settings['timeshift']!=config[_0x58b3d8(0x20a)]&&updateTimeshift(settings[_0x58b3d8(0x20a)]);settings['onepagemode']!=config[_0x58b3d8(0x24c)]&&updateOnepagemode(settings['onepagemode']);process[_0x58b3d8(0x1df)]({'started':_0x58b3d8(0x1be)},_0x38caa7=>{}),initializeProcessListeners();function proxyEmit(_0x5eda16,_0x4b9084=null){const _0x34c070=_0x58b3d8;process[_0x34c070(0x1df)]({'function':_0x5eda16,'args':_0x4b9084},_0x2210ac=>{});}function initializeProcessListeners(){process['on']('message',_0x37056e=>{const _0x3ce9b7=_0x52cc;switch(Object[_0x3ce9b7(0x187)](_0x37056e)[0x0]){case _0x3ce9b7(0x20a):_0x37056e[_0x3ce9b7(0x20a)]!=undefined&&(settings[_0x3ce9b7(0x20a)]=_0x37056e[_0x3ce9b7(0x20a)],updateTimeshift(settings[_0x3ce9b7(0x20a)]));break;case _0x3ce9b7(0x24c):_0x37056e[_0x3ce9b7(0x24c)]!=undefined&&(settings[_0x3ce9b7(0x24c)]=_0x37056e['onepagemode'],updateOnepagemode(settings[_0x3ce9b7(0x24c)]));break;case _0x3ce9b7(0x196):_0x37056e[_0x3ce9b7(0x196)]!=undefined&&(bots=JSON['parse'](_0x37056e[_0x3ce9b7(0x196)]),proxyEmit(_0x3ce9b7(0x196),bots));break;case _0x3ce9b7(0x1b9):switch(_0x37056e[_0x3ce9b7(0x1b9)]){case _0x3ce9b7(0x161):initclient();break;case _0x3ce9b7(0x23d):toggleBotMode();break;case _0x3ce9b7(0x267):emitHistory(_0x37056e[_0x3ce9b7(0x1da)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x37056e[_0x3ce9b7(0x1da)]);break;case _0x3ce9b7(0x23e):getPortfolio(_0x37056e['args']);break;case'storeConfiguration':storeConfiguration(_0x37056e[_0x3ce9b7(0x1da)]);break;case'storeHeadless':storeHeadless(_0x37056e[_0x3ce9b7(0x1da)]);break;case _0x3ce9b7(0x145):storeFiat(_0x37056e[_0x3ce9b7(0x1da)]);break;case _0x3ce9b7(0x138):resetHistory();break;case _0x3ce9b7(0x1de):getStartingBalances(getNormalizedPerformance());break;case _0x3ce9b7(0x230):placeOrder(_0x37056e[_0x3ce9b7(0x1da)]);break;case _0x3ce9b7(0x15d):cancelLoading();break;case _0x3ce9b7(0x2a6):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3ce9b7(0x186):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x5c444a=null,_0x257a38=![]){const _0x2a224d=_0x58b3d8;logger[_0x2a224d(0x1d4)](_0x2a224d(0x176)+(_0x5c444a&&_0x5c444a['length']>0x0?_0x2a224d(0x25e)+_0x5c444a[_0x2a224d(0x19c)](','):_0x2a224d(0x242))+_0x2a224d(0x2b0)+(_0x257a38?_0x2a224d(0x229):'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x2a224d(0x149)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x257a38)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2a224d(0x13c)]!=''&&config['apiKey']!=_0x2a224d(0x1c0)){loadingProgress=0x0;if(_0x257a38){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xbbf791){handleErrorNoStop(_0xbbf791,_0x2a224d(0x2a1));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x5c444a);const _0x326823=await getCoins();[currentCoins,currentCoinsAll]=_0x326823,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x2a224d(0x1cc)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2a224d(0x28b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x5e5dd6){await handleError(_0x5e5dd6,'stopExchange()');}}async function reloadExchange(){const _0x31da6c=_0x58b3d8;logger[_0x31da6c(0x1d4)](_0x31da6c(0x22d));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x31da6c(0x1d4)](_0x31da6c(0x2c2)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5acb23=config[_0x58b3d8(0x149)],_0x1e00c0=config['apiKey'],_0x103076=config[_0x58b3d8(0x19d)],_0x5019bd=config[_0x58b3d8(0x1fe)]){const _0x237fc4=_0x58b3d8;exchange&&await stopExchange();!supportedExchanges()[_0x237fc4(0x29a)](_0x5acb23)&&(logHistory(_0x237fc4(0x1b6),_0x237fc4(0x1f3)+_0x5acb23+_0x237fc4(0x2ad)),killBot());const _0x3ca2e9=ccxt[_0x237fc4(0x1e1)][_0x5acb23[_0x237fc4(0x140)]()];exchange=new _0x3ca2e9({'apiKey':_0x1e00c0,'secret':_0x103076,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x237fc4(0x291)}});if(_0x5019bd)exchange[_0x237fc4(0x1c1)]=_0x5019bd;}function setStableCoins(){const _0x57269c=_0x58b3d8;let _0x10a57b=config['basecoin']=='ETH'?_0x57269c(0x29d):_0x57269c(0x16d),_0x5cb602=!allSymbols[_0x57269c(0x29a)](_0x10a57b+'/USD')?_0x57269c(0x16a):_0x57269c(0x210),_0x216990=!allSymbols['includes'](_0x10a57b+_0x57269c(0x18c))?_0x5cb602:_0x57269c(0x200);stablecoins={'eur':{'coin':''+_0x10a57b+_0x216990,'symbol':_0x10a57b+'/'+_0x216990},'usd':{'coin':''+_0x10a57b+_0x5cb602,'symbol':_0x10a57b+'/'+_0x5cb602}};}async function initwsCcxt(_0x377fc9){const _0x1eafce=_0x58b3d8;_0x377fc9==null&&(_0x377fc9=[],config[_0x1eafce(0x1e7)][_0x1eafce(0x2be)](_0x56bf05=>{const _0x397686=_0x1eafce;if(!_0x56bf05[_0x397686(0x14e)]&&_0x56bf05[_0x397686(0x2ba)]!=config[_0x397686(0x174)])_0x377fc9[_0x397686(0x1ad)](_0x56bf05[_0x397686(0x131)]);}));if(!_0x377fc9['includes'](stablecoins[_0x1eafce(0x14b)][_0x1eafce(0x131)]))_0x377fc9[_0x1eafce(0x1ad)](stablecoins[_0x1eafce(0x14b)][_0x1eafce(0x131)]);if(!_0x377fc9[_0x1eafce(0x29a)](stablecoins[_0x1eafce(0x260)][_0x1eafce(0x131)]))_0x377fc9[_0x1eafce(0x1ad)](stablecoins[_0x1eafce(0x260)]['symbol']);if(config[_0x1eafce(0x149)][_0x1eafce(0x2a2)](_0x1eafce(0x238))){if(!_0x377fc9[_0x1eafce(0x29a)]('BNB/'+config[_0x1eafce(0x174)]))_0x377fc9[_0x1eafce(0x1ad)]('BNB/'+config[_0x1eafce(0x174)]);}loadCoins(_0x377fc9),_0x377fc9=validateSymbols(_0x377fc9);const _0x2e3a3c=async _0x5c8952=>{const _0x593980=_0x1eafce;let _0x282ad9;try{const _0x39519e=await exchange[_0x593980(0x235)](_0x5c8952);Object[_0x593980(0x171)](_0x39519e)['forEach'](_0x2e7daf=>{const _0x2c1b65=_0x593980;_0x282ad9=_0x2e7daf[0x1][_0x2c1b65(0x131)],global[_0x2c1b65(0x1fd)][noslash(_0x282ad9)]=_0x2e7daf[0x1][_0x2c1b65(0x23c)];});}catch(_0x4006bf){await handleError(_0x4006bf,_0x593980(0x208),_0x282ad9);}},_0x33c798=async _0x435c55=>{const _0x2f94fd=_0x1eafce;while(!![]){if(!botPaused)try{const _0x3cd433=await exchange[_0x2f94fd(0x1d0)](_0x435c55);global[_0x2f94fd(0x1fd)][noslash(_0x3cd433[0x0][_0x2f94fd(0x131)])]=_0x3cd433[0x0]['price'],await sleep(0x3e8);}catch(_0x12b728){if(!exchangeStopped)await handleError(_0x12b728,'watchTrades()',_0x435c55);}else await sleep(0x64);}},_0x19a89e=async _0x1385a9=>{const _0x537d3f=_0x1eafce;while(!![]){if(!botPaused)try{const _0x53eddf=await exchange[_0x537d3f(0x1fa)](_0x1385a9);global[_0x537d3f(0x26b)][_0x53eddf['symbol']]=_0x53eddf[_0x537d3f(0x2ae)],await sleep(0x3c*0x3e8);}catch(_0x2cef60){if(!exchangeStopped)await handleError(_0x2cef60,_0x537d3f(0x16b),_0x1385a9);}else await sleep(0x64);}},_0x5dcdb0=async _0x363842=>{const _0x278fb0=_0x1eafce;while(!![]){if(!botPaused)try{const _0x18fe74=await exchange['watchOrders'](_0x363842);_0x18fe74[_0x278fb0(0x2be)](_0x465a4a=>{updateNumberCoinsCcxt(_0x465a4a);});}catch(_0x80b747){if(!exchangeStopped)await handleError(_0x80b747,_0x278fb0(0x211));}else await sleep(0x64);}};_0x2e3a3c(_0x377fc9),_0x377fc9[_0x1eafce(0x2be)](_0x2207d0=>{_0x33c798(_0x2207d0),_0x19a89e(_0x2207d0),_0x5dcdb0(_0x2207d0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x40273b=_0x58b3d8;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1582d0=await getCoins(),[_0x476d02,_0x5a4bea]=_0x1582d0;let _0x53cd8b=[];currentCoins[_0x40273b(0x2be)](_0x5ae595=>{const _0x8f8739=_0x40273b,_0x12bb7a=_0x476d02[_0x8f8739(0x1e4)](_0x5c01a7=>_0x5c01a7[_0x8f8739(0x2ba)]==_0x5ae595[_0x8f8739(0x2ba)]);if(_0x12bb7a){if(_0x5ae595[_0x8f8739(0x275)]!=_0x12bb7a['number']){let _0x4cc1d6;if(_0x5ae595[_0x8f8739(0x2ba)]!=config['basecoin']){const _0x1471e0=global[_0x8f8739(0x1fd)][noslash(_0x5ae595[_0x8f8739(0x131)])];_0x4cc1d6=_0x5ae595[_0x8f8739(0x14f)]?0x1/_0x1471e0:_0x1471e0;}else _0x4cc1d6=0x1;_0x53cd8b[_0x8f8739(0x1ad)]({'coin':_0x5ae595[_0x8f8739(0x2ba)],'symbol':_0x5ae595['symbol'],'price':_0x4cc1d6,'number':Number(formatResult(_0x12bb7a[_0x8f8739(0x275)]-_0x5ae595['number'],0x8)),'basecoinvalue':_0x4cc1d6*(_0x12bb7a[_0x8f8739(0x275)]-_0x5ae595[_0x8f8739(0x275)])});}}});if(_0x53cd8b[_0x40273b(0x28b)]==0x1&&!blockTransactionDetection){if(config[_0x40273b(0x222)]){logger['debug'](_0x40273b(0x2aa)+_0x53cd8b[0x0][_0x40273b(0x183)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x40273b(0x217)]);if(lastFees['highest']==0x0||Math[_0x40273b(0x286)](_0x53cd8b[0x0][_0x40273b(0x183)])>lastFees['highest']){delete _0x53cd8b[0x0][_0x40273b(0x131)],delete _0x53cd8b[0x0][_0x40273b(0x183)];let _0x3cbf7a=[],_0x128119=[...config[_0x40273b(0x29f)]]||[],_0x41ba0a=config['liquidity'];_0x128119[_0x40273b(0x25f)]((_0x28d7fc,_0x4a1a1d)=>_0x28d7fc[_0x40273b(0x17c)]>_0x4a1a1d[_0x40273b(0x17c)]?-0x1:_0x4a1a1d['date']>_0x28d7fc['date']?0x1:0x0);const _0x18a91b=getDate();if(_0x128119[0x0]){const _0x57f232=fns[_0x40273b(0x1e9)](_0x128119[0x0]['date'],'yyyy/MM/dd',new Date()),_0xcc42d8=fns['parse'](_0x18a91b,_0x40273b(0x272),new Date());if(fns['isEqual'](_0x57f232,_0xcc42d8)){_0x3cbf7a=_0x128119[0x0][_0x40273b(0x1ba)];const _0x236919=_0x3cbf7a['find'](_0x38fa9e=>_0x38fa9e[_0x40273b(0x2ba)]==_0x53cd8b[0x0][_0x40273b(0x2ba)]);_0x236919?(_0x236919[_0x40273b(0x275)]+=_0x53cd8b[0x0]['number'],_0x236919['number']==0x0&&(_0x3cbf7a=_0x3cbf7a['filter'](_0x1829bc=>{const _0x56e3ec=_0x40273b;return _0x1829bc[_0x56e3ec(0x2ba)]!=_0x53cd8b[0x0][_0x56e3ec(0x2ba)];}))):_0x3cbf7a[_0x40273b(0x1ad)](_0x53cd8b[0x0]);const _0x430790=_0x41ba0a[_0x40273b(0x1e4)](_0x2d34c8=>_0x2d34c8[_0x40273b(0x17c)]==_0x18a91b);_0x430790['changes']=_0x3cbf7a;}else _0x41ba0a[_0x40273b(0x1ad)]({'date':_0x18a91b,'changes':[_0x53cd8b[0x0]]});}const _0x388b06=_0x41ba0a[_0x40273b(0x1e4)](_0x5c9bc4=>_0x5c9bc4[_0x40273b(0x17c)]==_0x18a91b);if(_0x388b06){let _0x3c054c=!![];_0x388b06[_0x40273b(0x1ba)][_0x40273b(0x2be)](_0x1c91c2=>{const _0x27c783=_0x40273b;if(_0x1c91c2[_0x27c783(0x275)]!=0x0)_0x3c054c=![];}),_0x3c054c&&(_0x41ba0a=_0x41ba0a['filter'](_0x115d93=>{const _0x1a3ccd=_0x40273b;return _0x115d93[_0x1a3ccd(0x17c)]!=_0x18a91b;}));}let _0x5110af=dbConfig[_0x40273b(0x1c2)](_0x40273b(0x1a3))[_0x40273b(0x1e4)]({'botID':botID})['value']();_0x5110af&&(dbConfig[_0x40273b(0x1c2)]('bot')[_0x40273b(0x1e4)]({'botID':botID})[_0x40273b(0x2b7)]({'liquidity':_0x41ba0a})[_0x40273b(0x194)](),config[_0x40273b(0x29f)]=_0x41ba0a),logHistory('success',_0x40273b(0x1ca)+Math[_0x40273b(0x286)](_0x53cd8b[0x0]['number'])+'\x20'+_0x53cd8b[0x0][_0x40273b(0x2ba)]+'\x20'+(_0x53cd8b[0x0][_0x40273b(0x275)]>0x0?_0x40273b(0x204):_0x40273b(0x156))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x40273b(0x1d4)](_0x40273b(0x278)+Math[_0x40273b(0x286)](_0x53cd8b[0x0][_0x40273b(0x275)])+'\x20'+_0x53cd8b[0x0][_0x40273b(0x2ba)]+'\x20'+(_0x53cd8b[0x0][_0x40273b(0x275)]>0x0?_0x40273b(0x204):_0x40273b(0x156)));transactionDetected=!![],currentCoins=_0x476d02,currentCoinsAll=_0x5a4bea;}else logger[_0x40273b(0x1d4)](_0x40273b(0x1ca)+Math['abs'](_0x53cd8b[0x0][_0x40273b(0x275)])+'\x20'+_0x53cd8b[0x0]['coin']+'\x20'+(_0x53cd8b[0x0]['number']>0x0?_0x40273b(0x204):'removed')+_0x40273b(0x25b)),currentCoins=_0x476d02,currentCoinsAll=_0x5a4bea;}await sleep(watchTransactionsInterval);}catch(_0x344874){if(!exchangeStopped)await handleError(_0x344874,_0x40273b(0x153));}else await sleep(0x64);}}async function loadSymbols(){const _0x388387=_0x58b3d8;try{markets=await exchange[_0x388387(0x294)](),allSymbols=[],Object[_0x388387(0x171)](markets)[_0x388387(0x2be)](_0x1d6663=>{const _0x28eef1=_0x388387;_0x1d6663[0x1]['active']&&_0x1d6663[0x1]['spot']&&allSymbols[_0x28eef1(0x1ad)](_0x1d6663[0x0]);});}catch(_0x30d425){throw _0x30d425;}}function validateSymbols(_0x398d24){let _0x40007=[];return _0x398d24['forEach'](_0x17c8ab=>{const _0x59ce08=_0x52cc;!allSymbols[_0x59ce08(0x29a)](_0x17c8ab)?logHistory(_0x59ce08(0x1b6),_0x59ce08(0x1ea)+_0x17c8ab+'\x20-\x20exclude\x20from\x20balancing\x20in\x20the\x20configuration'):_0x40007[_0x59ce08(0x1ad)](_0x17c8ab);}),_0x40007;}async function initclient(){const _0x17fcc5=_0x58b3d8;proxyEmit(_0x17fcc5(0x1f8),emittedConfiguration()),proxyEmit(_0x17fcc5(0x1ce),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x17fcc5(0x1f5),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x23d5f9=getNormalizedPerformance();emitPerformance(_0x23d5f9),getStartingBalances(_0x23d5f9);}async function toggleBotMode(){const _0x14ea62=_0x58b3d8;let _0x31a95d=dbConfig[_0x14ea62(0x1c2)]('bot')['find']({'botID':botID})[_0x14ea62(0x1d3)]();if(_0x31a95d){const _0x31af95=!_0x31a95d[_0x14ea62(0x1af)];dbConfig[_0x14ea62(0x1c2)]('bot')['find']({'botID':botID})['assign']({'headless':_0x31af95})[_0x14ea62(0x194)](),config[_0x14ea62(0x1af)]=_0x31af95,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x617cda=_0x58b3d8;process[_0x617cda(0x1df)]({'updatebotmanager':!![]},_0x82d136=>{});}async function loadCoins(_0x4ff194){const _0x3e50af=_0x58b3d8;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x6397d6,_0x14664d=0x0,_0x31f043=0x0;_0x4ff194[_0x3e50af(0x2be)](_0x4b4947=>{const _0x232802=_0x3e50af;loading[_0x232802(0x24b)][_0x232802(0x1ad)](_0x4b4947);}),loadingCanceled=![];let _0xa0de5a=![];while(_0x6397d6!=_0x4ff194[_0x3e50af(0x28b)]+maxLoadingProgress){_0x6397d6=loadingProgress,_0x4ff194[_0x3e50af(0x2be)](_0x58839e=>{const _0x158be4=_0x3e50af;if(global[_0x158be4(0x1fd)][noslash(_0x58839e)]){loading[_0x158be4(0x24b)]=loading[_0x158be4(0x24b)]['filter'](_0x3bbfde=>_0x3bbfde!=_0x58839e);if(!watchedSymbols[_0x158be4(0x29a)](_0x58839e))watchedSymbols[_0x158be4(0x1ad)](_0x58839e);_0x6397d6++;}}),loading[_0x3e50af(0x26d)]=Math[_0x3e50af(0x221)](_0x6397d6/(_0x4ff194[_0x3e50af(0x28b)]+maxLoadingProgress)*0x64);loading[_0x3e50af(0x26d)]!=0x64&&(_0x31f043>0x1e*0x5&&(loading[_0x3e50af(0x133)]=!![],emitLoadingProgress()),_0x31f043>0x78*0x5&&!_0xa0de5a&&(loading[_0x3e50af(0x282)]=!![],emitLoadingProgress(),_0xa0de5a=!![],logHistory(_0x3e50af(0x1b6),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x3e50af(0x24b)][_0x3e50af(0x19c)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x3e50af(0x1b6),_0x3e50af(0x143)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0xbc354f=_0x3e50af;process[_0xbc354f(0x1df)]({'stop':_0xbc354f(0x1b0)},_0x28aeee=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x14664d!=loading['progress']&&(_0x14664d=loading[_0x3e50af(0x26d)],emitLoadingProgress()),_0x31f043++,await sleep(0xc8);}_0x6397d6==_0x4ff194['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3e50af(0x1df)]({'status':_0x3e50af(0x277),'live':'running'},_0x41fe19=>{}),_0xa0de5a&&logHistory(_0x3e50af(0x250),_0x3e50af(0x136)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3c29bc=_0x58b3d8;proxyEmit(_0x3c29bc(0x1f8),{...emittedConfiguration(),'configstate':_0x3c29bc(0x1ed)});}function emitLoadingProgress(){const _0x55330=_0x58b3d8;proxyEmit(_0x55330(0x2a7),loading);}async function getFiat(){const _0x30cb28=_0x58b3d8;let _0x58ab06=global['ticker'][stablecoins[_0x30cb28(0x14b)][_0x30cb28(0x2ba)]],_0x1dbc05=global[_0x30cb28(0x1fd)][stablecoins[_0x30cb28(0x260)][_0x30cb28(0x2ba)]];return{'eur':Number(_0x58ab06),'usd':Number(_0x1dbc05)};}function capitalize(_0x5ac01e){const _0x1044f5=_0x58b3d8;return _0x5ac01e['substring'](0x0,0x1)['toUpperCase']()+_0x5ac01e[_0x1044f5(0x1f4)](0x1);}function supportedExchanges(){const _0x36faa8=_0x58b3d8,_0x3fb297=['ws',_0x36faa8(0x235),_0x36faa8(0x1fa),_0x36faa8(0x1d0),_0x36faa8(0x2a0),_0x36faa8(0x1f0),_0x36faa8(0x134),_0x36faa8(0x1cf),_0x36faa8(0x17a),_0x36faa8(0x2c3)];let _0x5c7d69=[],_0x3fa3cb=[],_0x43682c=ccxt['pro'][_0x36faa8(0x1ce)];_0x43682c[_0x36faa8(0x2be)](_0x455b8a=>{const _0x422b26=_0x36faa8;try{const _0x318062=new ccxt[(_0x422b26(0x1e1))][_0x455b8a]();_0x3fa3cb[_0x422b26(0x1ad)](_0x318062);}catch(_0xd26fe5){}}),_0x3fa3cb[_0x36faa8(0x2be)](_0x5234dc=>{const _0x5a0e73=_0x36faa8;let _0x3a73bc=0x0;_0x3fb297[_0x5a0e73(0x2be)](_0x3a8636=>{const _0x55f19a=_0x5a0e73;_0x3a8636 in _0x5234dc[_0x55f19a(0x1a8)]&&_0x5234dc[_0x55f19a(0x1a8)][_0x3a8636]&&_0x3a73bc++;}),_0x3a73bc==_0x3fb297['length']&&_0x5c7d69[_0x5a0e73(0x1ad)](capitalize(_0x5234dc['id']));});let _0x525978=[];return _0x43682c[_0x36faa8(0x2be)](_0x1bd11b=>{const _0x58df66=_0x36faa8;_0x1bd11b=capitalize(_0x1bd11b);if(!_0x5c7d69[_0x58df66(0x29a)](_0x1bd11b))_0x525978['push'](_0x1bd11b);}),_0x5c7d69;}function setStartDatePerformance(){const _0x12daa7=_0x58b3d8;if(config&&config[_0x12daa7(0x29f)][0x0][_0x12daa7(0x1ba)][_0x12daa7(0x28b)]!=0x0){const _0x4bfc0d=config[_0x12daa7(0x29f)][0x0][_0x12daa7(0x1ba)];dbPerformance[_0x12daa7(0x1c2)]('data')[_0x12daa7(0x1e4)]({'date':config[_0x12daa7(0x165)]})[_0x12daa7(0x2b7)]({'coins':_0x4bfc0d})[_0x12daa7(0x194)]();}}async function recreateCoinResults(){const _0x3b8222=_0x58b3d8;let _0x52f117,_0x17596c=[];try{const _0x561bff=fns[_0x3b8222(0x2c1)](fns['parseISO'](config[_0x3b8222(0x165)][_0x3b8222(0x1c4)](/\//g,'-')),_0x3b8222(0x1a0));for(const _0x17d417 of currentCoins){if(_0x17d417[_0x3b8222(0x2ba)]!=config[_0x3b8222(0x174)]){let _0x44b6b6=0x0,_0x30030d,_0x506c2d;_0x52f117=await getAllEventOrders(_0x17d417['symbol']);if(_0x52f117[_0x3b8222(0x28b)]>0x0)_0x52f117[_0x3b8222(0x2be)](_0x239a1c=>{const _0x4b9977=_0x3b8222,_0x34773a=_0x17d417[_0x4b9977(0x131)][_0x4b9977(0x29a)](config[_0x4b9977(0x174)]+'/');_0x17596c['push']({'datetime':_0x239a1c[_0x4b9977(0x27a)],'coin':_0x17d417[_0x4b9977(0x2ba)],'symbol':_0x17d417[_0x4b9977(0x131)],'side':_0x239a1c['side'],'reverse':_0x34773a,'amount':formatResult(_0x239a1c['filled'],0x8),'filled':formatResult(_0x239a1c[_0x4b9977(0x296)],0x8),'price':formatResult(_0x239a1c[_0x4b9977(0x20e)],0x8)}),_0x44b6b6=_0x239a1c[_0x4b9977(0x252)]==_0x4b9977(0x251)?_0x44b6b6+_0x239a1c[_0x4b9977(0x296)]:_0x44b6b6-_0x239a1c[_0x4b9977(0x296)];if(!_0x506c2d)_0x506c2d=_0x239a1c[_0x4b9977(0x20e)];});_0x30030d=_0x17d417[_0x3b8222(0x275)]-_0x44b6b6;let _0x233d62;config[_0x3b8222(0x29f)][_0x3b8222(0x2be)](_0x2e5da2=>{const _0x4f6b56=_0x3b8222;!_0x233d62&&(_0x233d62=_0x2e5da2[_0x4f6b56(0x1ba)][_0x4f6b56(0x1e4)](_0x3c85c9=>_0x3c85c9[_0x4f6b56(0x2ba)]==_0x17d417[_0x4f6b56(0x2ba)]),_0x233d62&&(_0x30030d=_0x233d62[_0x4f6b56(0x275)],_0x506c2d=_0x233d62[_0x4f6b56(0x20e)]));});let _0x5d22dc=dbCoinResults[_0x3b8222(0x1c2)](_0x3b8222(0x141))[_0x3b8222(0x1e4)]({'coin':_0x17d417['coin']})[_0x3b8222(0x1d3)]();_0x5d22dc={'coin':_0x17d417[_0x3b8222(0x2ba)],'number':_0x30030d,'breakeven':_0x506c2d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3b8222(0x1c2)](_0x3b8222(0x141))['find']({'coin':_0x17d417[_0x3b8222(0x2ba)]})['assign'](_0x5d22dc)[_0x3b8222(0x194)]();}}_0x17596c['sort']((_0x5f1efc,_0x383168)=>_0x5f1efc[_0x3b8222(0x27a)]>_0x383168[_0x3b8222(0x27a)]?0x1:_0x383168[_0x3b8222(0x27a)]>_0x5f1efc[_0x3b8222(0x27a)]?-0x1:0x0);let _0x8b6111=0x0;for(let _0x461dbc of _0x17596c){await updateCoinResults(_0x461dbc,!![]);}}catch(_0x52027a){await handleError(_0x52027a,_0x3b8222(0x173));}}function _0x4689(){const _0x5ec07a=['fromCodePoint','InvalidOrder','Order\x20filled:\x20',':\x20timer\x20>','exchange\x20reloaded','ID:\x20','buys','UNLOCKED','Initiating\x20exchange\x20reload','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','LOCKED','placeOrder','bid','Order(s)\x20not\x20validated\x20after\x20','getDate','balancing\x20resumes\x20when\x20cooldown\x20ends','fetchTickers','\x20closed\x20the\x20connection','min','Binance','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','ongoing','./config/','last','toggleBotMode','getPortfolio','<b>','sell','existsSync','no\x20additional\x20symbols','AuthenticationError','getPortfolio(1)','breakeven','2\x20-\x20Validate\x20orders:\x20','net-fiat','getCoinNumber()','limit-low','slice','remainingSymbols','onepagemode','ExchangeNotAvailable','Limit\x20(low-margin)','emojibuy','success','buy','side','remove','Bot\x20','MIN_NOTIONAL','starting-balance-','\x20API\x20key\x20is\x20invalid','\x20portfolio:</b>\x20\x0a\x0a','getMinutes','startnumber','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','bot-','\x20not\x20available','additional\x20symbols\x20','sort','usd','exec','floor','offset','/backup/','lowdb/adapters/FileSync','sortBy','emitHistory','sells','orderId','event','change','path','progress','3\x20-\x20handling\x20FILLED\x20order:\x20','getTime','timestamp','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','yyyy/MM/dd','time','getPortfolio(2)','number','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','enabled','Fee\x20discount\x20refund\x20detected:\x20','1\x20-\x20Handle\x20open\x20orders','datetime','none','ccxt','constructor','recovery','writeFile','-performance.json',':\x20Bot\x20','cancel','currency','target','Initializing\x20coin\x20results','abs','privateKey','Saving\x20configuration','Transaction\x20detection\x20unblocked','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','length','-------------------------------\x0a','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','2\x20-\x20Orders\x20unlocked','botID','recreate','spot','Exception\x20thrown\x20in\x20','\x20>\x20','loadMarkets','mkdirSync','filled','<pre>','<b>Bot\x20','API-key\x20format\x20invalid','includes','\x20API\x20secret\x20is\x20invalid','unlinkSync','ETH','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','liquidity','watchOrders','loadSymbols()','startsWith','date-fns','ORDERS.UNLOCKED','no\x20open\x20orders','showConfig','coin-loading-progress','orderstatus','0\x20-\x20EXECUTION:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','limit-high','search','\x20exchange','percentage','toString','\x20|\x20','TUSD','log','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Crypt','\x20:\x20','</pre>','assign','showname','\x20exchange\x20error','coin','realized','event-history','openOrders','forEach','3907200cGiDqi','limit','format','Executing\x20exchange\x20reload','fetchBalance','USDP','4899548aENOyG','red_yellow_blue','\x20order:\x20','ask','indexOf','symbol','warning','timeout','createOrder','createWriteStream','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','message','resetHistory','performance','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','cloneDeep','apiKey','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','cost','configuration-stored','toLowerCase','coins','Error\x20details:','Pausing\x20for\x20','DDoSProtection','storeFiat','RSA-OAEP','Exchange','ORDERS.LOCKED','exchange','closed','eur','initial','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','excluded','reverse','Huobi','leftTxt','rightTxt','watchTransactions()','amount','net-basecoin','removed',',\x20must\x20be\x20a\x203\x20digit\x20number','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','milliseconds','\x20has\x20a\x2024h\x20drop\x20of\x20','splice','OnMaintenance','cancelLoading','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','isEqual','shift','initclient','BNB','\x20network\x20error','bb-settings.json','startdate','206463YnIXqD','map','type','recent20','USDT','fetchTickers()','cooldown','BTC','ORDERS.UNLOCKING','emojisell','.json','entries','test','recreateCoinResults()','basecoin','status','Reset\x20|\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','canceled','set','fetchClosedOrders','Net\x20effect','date','2\x20-\x20FILLED\x20unknown\x20order:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Huobipro','getMonth','ordertype','basecoinvalue','\x20>\x20[DEBUG]\x20','delta','sendPortfolioTelegram','keys','open','getSeconds','uncaughtException','/output-000.log','/EUR','\x20|\x20Custom\x20ID:\x20','1\x20-\x20FILLED:\x20','yargs/yargs','distribution','split','customId','-events.json','write','threshold','bots','startprice','argv','\x20hour','botname','8268000EbvJyf','join','apiSecret','\x20minutes\x20-\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','RateLimitExceeded','Net\x20','bot','getHours','4696PUwQbh','differenceInSeconds','2.6.0','has','Market','Resetting\x20bot\x20history','Cex','final','push','change24h','headless','restart','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','No\x20more\x20open\x20orders\x20-\x20','trade','order','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','error','defaults','fee','function','changes','Invalid\x20API\x20key\x20or\x20secret\x20entered','padStart','2.3.5','running','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','***','password','get','./logs/','replace','colorscheme','Limit\x20(high-margin)','OrderNotFound','toFixed','Order\x20is\x20invalid:\x20','Portfolio\x20change\x20detected:\x20','ExchangeError','full','Insufficient\x20funds\x20to\x20execute\x20order:\x20','exchanges','fetchOpenOrders','watchTrades','getFullYear','\x20metrics:</b>\x20\x0a\x0a','value','debug','%\x20(','\x20change','getPortfolio(0)','(((.+)+)+)+$','BUSD','args','freeze','kill','\x20orders\x20in\x20less\x20than\x20','getStartingBalances','send','RequestTimeout','pro','Error:\x20Invalid\x20argument\x20','getOpenOrders()','find','81758yOHkNd','2\x20-\x20Handled\x20open\x20orders','portfolio','./version.json','parse','Invalid\x20symbol:\x20','valid','hybrid-crypto-js','loading-canceled','\x20|\x20lock\x20orders:\x20','-config.json','cancelOrder','************','market','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','substring','balances','amountToPrecision','balancing\x20resumed','configuration','logs','fetchTicker','Bitget','UNLOCKING','ticker','apiPassword','getCoins()','EUR','Uncaught\x20Exception:','max','2359973VNzOxJ','added','Resetting\x20coin\x20results:\x20','limits','Avoiding\x20continuous\x20order\x20attempts','initTickers()','getAllOrders()','timeshift','random','page','Invalid\x20quantity','price','51LorzqF','USD','watchOrders()','InsufficientFunds','stringify','8271DSsWyf','Error\x20while\x20deleting\x20files:\x20','\x20value','highest','-results.json','fiat','filter','version','data','padEnd','findIndex','apply','Bybit','round','autoliquidity','average','lowdb'];_0x4689=function(){return _0x5ec07a;};return _0x4689();}async function getAllEventOrders(_0x51b399){const _0xeb58ca=_0x58b3d8;let _0x39fd85=[],_0x446c7d=dbLogs['get'](_0xeb58ca(0x1f9))['filter'](_0xbf9474=>{const _0x240434=_0xeb58ca,_0x55f30e=_0xbf9474[_0x240434(0x26a)][_0x240434(0x140)]();return _0x55f30e['includes'](_0x51b399['toLowerCase']())&&(_0x55f30e['includes'](_0x240434(0x1f2))&&_0x55f30e[_0x240434(0x29a)](_0x240434(0x1b4))||_0x55f30e[_0x240434(0x29a)]('filled')&&_0x55f30e[_0x240434(0x29a)]('order'));})[_0xeb58ca(0x266)](_0xeb58ca(0x273))[_0xeb58ca(0x1d3)]();return _0x446c7d[_0xeb58ca(0x2be)](_0x603868=>{const _0xddbb0a=_0xeb58ca,_0x77a4dc=_0x603868[_0xddbb0a(0x26a)][_0xddbb0a(0x29a)]('sell')?'sell':_0xddbb0a(0x251),_0x4d0c9a=/#([0-9]|\.)+\s/i,_0x4dc390=Number(_0x4d0c9a[_0xddbb0a(0x261)](_0x603868['event'])[0x0][_0xddbb0a(0x24a)](0x1)),_0x600e73=/@([0-9]|\.)+$/i,_0x3fb998=Number(_0x600e73[_0xddbb0a(0x261)](_0x603868['event'])[0x0]['slice'](0x1));_0x39fd85[_0xddbb0a(0x1ad)]({'datetime':_0x603868[_0xddbb0a(0x273)],'coin':symbolToCoin(_0x51b399),'symbol':_0x51b399,'side':_0x77a4dc,'amount':_0x4dc390,'filled':_0x4dc390,'price':_0x3fb998});}),_0x39fd85;}async function getAllOrders(_0x56bf02,_0x3edb66){const _0xffee90=_0x58b3d8;let _0x1ab635=[];while(_0x3edb66<exchange[_0xffee90(0x159)]()){const _0x1c9c93=0x1f4;try{const _0x5dfb26=await exchange[_0xffee90(0x17a)](_0x56bf02,_0x3edb66,_0x1c9c93);if(_0x5dfb26[_0xffee90(0x28b)])_0x3edb66=_0x5dfb26[_0x5dfb26[_0xffee90(0x28b)]-0x1]['timestamp']+0x1,_0x1ab635=_0x1ab635['concat'](_0x5dfb26);else break;}catch(_0x2480da){await handleError(_0x2480da,_0xffee90(0x209),_0x56bf02);}}return _0x1ab635;}async function validate24hChanges(){const _0x2c73c6=_0x58b3d8;for(const _0x54d7fd of currentCoins){if(_0x54d7fd['coin']!=config[_0x2c73c6(0x174)]){let _0x37eb08;_0x54d7fd[_0x2c73c6(0x14f)]?_0x37eb08=formatResult((0x1/(global[_0x2c73c6(0x26b)][noslash(_0x54d7fd[_0x2c73c6(0x131)])]/0x64+0x1)-0x1)*0x64,0x3):_0x37eb08=global[_0x2c73c6(0x26b)][noslash(_0x54d7fd[_0x2c73c6(0x131)])],_0x37eb08<config[_0x2c73c6(0x1ae)]&&(logHistory(_0x2c73c6(0x1b6),_0x54d7fd[_0x2c73c6(0x2ba)]+_0x2c73c6(0x15a)+_0x37eb08+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x341a02,_0x1cf9f4){const _0x1d7e50=_0x58b3d8;if(!_0x341a02)return!![];const _0x2b12c1=_0x1cf9f4[_0x1d7e50(0x191)]('.'),_0x488dcf=_0x341a02[_0x1d7e50(0x191)]('.');for(var _0x199a75=0x0;_0x199a75<_0x488dcf['length'];_0x199a75++){const _0x845da=~~_0x488dcf[_0x199a75],_0x587c65=~~_0x2b12c1[_0x199a75];if(_0x845da<_0x587c65)return!![];if(_0x845da>_0x587c65)return![];}return![];}async function oneTimeMigration(){const _0x197d0b=_0x58b3d8;let _0x3b76c3=dbLogs[_0x197d0b(0x1c2)](_0x197d0b(0x21b))[_0x197d0b(0x1d3)]();if(isOlderVersion(_0x3b76c3,'2.3.5')){let _0x42dc97=[];const _0x5b01e6=dbLogs[_0x197d0b(0x1c2)](_0x197d0b(0x1f9))['value']();_0x5b01e6[_0x197d0b(0x2be)](_0x500ced=>{const _0x3e293c=_0x197d0b;_0x42dc97[_0x3e293c(0x1ad)]({'time':_0x500ced[_0x3e293c(0x273)],'type':_0x500ced[_0x3e293c(0x168)],'event':_0x500ced[_0x3e293c(0x26a)]});}),dbLogs[_0x197d0b(0x1c2)](_0x197d0b(0x1f9))['assign'](_0x42dc97)[_0x197d0b(0x194)]();}let _0xe55d4=dbConfig[_0x197d0b(0x1c2)](_0x197d0b(0x21b))[_0x197d0b(0x1d3)]();if(isOlderVersion(_0xe55d4,_0x197d0b(0x1bd))){let _0x5d2aef=dbConfig[_0x197d0b(0x1c2)](_0x197d0b(0x1a3))['find']({'botID':botID})[_0x197d0b(0x1d3)]();if(_0x5d2aef){let _0x2d1107=[];_0x5d2aef[_0x197d0b(0x1e7)][_0x197d0b(0x2be)](_0x8a932c=>{const _0x2da06f=_0x197d0b;_0x2d1107['push']({'coin':_0x8a932c[_0x2da06f(0x2ba)],'number':_0x8a932c['startnumber'],'price':_0x8a932c[_0x2da06f(0x197)]}),delete _0x8a932c[_0x2da06f(0x25a)],delete _0x8a932c['startprice'];});if(_0x2d1107['length']!==0x0)fs[_0x197d0b(0x27f)](configbackuppath+(_0x197d0b(0x256)+botID+_0x197d0b(0x170)),JSON[_0x197d0b(0x213)](_0x2d1107,null,0x4),function(_0x4362fb){if(_0x4362fb){}});const _0x472d0a=(_0x1179d7,_0x284ccd)=>{const _0x33853b=_0x197d0b;let _0x501abf=[];_0x284ccd[_0x33853b(0x2be)](_0x2dc549=>{const _0x8a4130=_0x33853b,_0xdd300b=_0x1179d7['find'](_0x5419aa=>_0x5419aa[_0x8a4130(0x2ba)]==_0x2dc549[_0x8a4130(0x2ba)]);if(!_0xdd300b)_0x501abf[_0x8a4130(0x1ad)](_0x2dc549);});let _0x2ca077=[];return _0x1179d7['forEach'](_0x5d14c8=>{const _0x51619b=_0x33853b,_0x249386=_0x284ccd['find'](_0x185f31=>_0x185f31['coin']==_0x5d14c8[_0x51619b(0x2ba)]);if(!_0x249386||_0x249386[_0x51619b(0x275)]==0x0&&_0x5d14c8['number']!=0x0)_0x2ca077[_0x51619b(0x1ad)](_0x5d14c8);}),{'missingDay1':_0x501abf,'notInDay2':_0x2ca077};},_0x384899=dbPerformance[_0x197d0b(0x1c2)](_0x197d0b(0x21c))[_0x197d0b(0x13b)]()[_0x197d0b(0x1d3)]();if(_0x384899[_0x197d0b(0x28b)]>0x1){const {missingDay1:_0x47c380,notInDay2:_0x1db688}=_0x472d0a(_0x2d1107,_0x384899[0x1]['coins']);_0x2d1107=[..._0x2d1107,..._0x47c380],_0x1db688[_0x197d0b(0x2be)](_0x1a47cd=>{const _0x2eef40=_0x197d0b;let _0x290e3f=_0x2d1107[_0x2eef40(0x21e)](_0x75003a=>_0x75003a[_0x2eef40(0x2ba)]==_0x1a47cd[_0x2eef40(0x2ba)]);_0x290e3f!=-0x1&&_0x2d1107[_0x2eef40(0x15b)](_0x290e3f,0x1);});}_0x2d1107['sort']((_0x5f2e62,_0x1f04d3)=>_0x5f2e62[_0x197d0b(0x2ba)]>_0x1f04d3[_0x197d0b(0x2ba)]?0x1:_0x1f04d3[_0x197d0b(0x2ba)]>_0x5f2e62[_0x197d0b(0x2ba)]?-0x1:0x0);let _0x325c5b=[{'date':_0x5d2aef[_0x197d0b(0x165)],'changes':_0x2d1107}];_0x384899[_0x197d0b(0x28b)]>0x2&&_0x384899[_0x197d0b(0x2be)]((_0x15e4a5,_0x599a59)=>{const _0x4ec8ce=_0x197d0b;if(_0x599a59>0x0&&_0x599a59<_0x384899[_0x4ec8ce(0x28b)]-0x1){const {missingDay1:_0x10020d,notInDay2:_0x44afbc}=_0x472d0a(_0x384899[_0x599a59][_0x4ec8ce(0x141)],_0x384899[_0x599a59+0x1][_0x4ec8ce(0x141)]);_0x2d1107=[],(_0x10020d['length']!=0x0||_0x44afbc[_0x4ec8ce(0x28b)]!=0x0)&&(_0x10020d['length']!=0x0&&_0x2d1107[_0x4ec8ce(0x1ad)](..._0x10020d),_0x44afbc['length']!=0x0&&(_0x44afbc[_0x4ec8ce(0x2be)](_0x5c2aab=>{const _0x314297=_0x4ec8ce;_0x5c2aab['number']=-_0x5c2aab[_0x314297(0x275)];}),_0x2d1107[_0x4ec8ce(0x1ad)](..._0x44afbc)),_0x2d1107['sort']((_0x4311b0,_0x2820f3)=>_0x4311b0[_0x4ec8ce(0x2ba)]>_0x2820f3['coin']?0x1:_0x2820f3['coin']>_0x4311b0[_0x4ec8ce(0x2ba)]?-0x1:0x0),_0x325c5b[_0x4ec8ce(0x1ad)]({'date':_0x384899[_0x599a59+0x1]['date'],'changes':_0x2d1107}));}}),dbConfig[_0x197d0b(0x1c2)]('bot')[_0x197d0b(0x1e4)]({'botID':botID})[_0x197d0b(0x2b7)]({..._0x5d2aef,'liquidity':_0x325c5b})[_0x197d0b(0x194)]();}}if(isOlderVersion(_0xe55d4,_0x197d0b(0x1a7))){let _0xf8406e=dbConfig[_0x197d0b(0x1c2)](_0x197d0b(0x1a3))[_0x197d0b(0x1e4)]({'botID':botID})['value']();if(_0xf8406e){const _0x2846e9=_0xf8406e[_0x197d0b(0x149)],_0x5ed05e=_0x2846e9?capitalize(_0x2846e9):_0x197d0b(0x238);dbConfig[_0x197d0b(0x1c2)](_0x197d0b(0x1a3))[_0x197d0b(0x1e4)]({'botID':botID})[_0x197d0b(0x2b7)]({'exchange':_0x5ed05e})[_0x197d0b(0x194)]();}}let _0x1d4c8a=dbPerformance[_0x197d0b(0x1c2)]('version')[_0x197d0b(0x1d3)]();isOlderVersion(_0x1d4c8a,'2.3.5')&&setStartDatePerformance();let _0x25bef9=dbCoinResults[_0x197d0b(0x1c2)](_0x197d0b(0x21b))['value']();if(isOlderVersion(_0x25bef9,'2.5.0')){let _0x33c88d=dbCoinResults[_0x197d0b(0x1c2)](_0x197d0b(0x141))[_0x197d0b(0x1d3)]();if(_0x33c88d[_0x197d0b(0x28b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x52a2dd=_0x58b3d8;dbConfig[_0x52a2dd(0x179)](_0x52a2dd(0x21b),serverversion)[_0x52a2dd(0x194)](),dbPerformance[_0x52a2dd(0x179)]('version',serverversion)[_0x52a2dd(0x194)](),dbLogs[_0x52a2dd(0x179)]('version',serverversion)[_0x52a2dd(0x194)](),dbCoinResults[_0x52a2dd(0x179)]('version',serverversion)[_0x52a2dd(0x194)]();}function getConfiguration(_0x3aed22){const _0x1b91fd=_0x58b3d8;let _0x357234=dbConfig[_0x1b91fd(0x1c2)](_0x1b91fd(0x1a3))['find']({'botID':_0x3aed22})[_0x1b91fd(0x1d3)]();if(_0x357234){let _0xb91f08=![];typeof _0x357234[_0x1b91fd(0x195)]=='string'&&(_0x357234={..._0x357234,'threshold':Number(_0x357234[_0x1b91fd(0x195)])},_0xb91f08=!![]),_0x357234[_0x1b91fd(0x1ae)]==undefined&&(_0x357234={..._0x357234,'change24h':-0x14},_0xb91f08=!![]),_0x357234[_0x1b91fd(0x219)]==undefined&&(_0x357234={..._0x357234,'fiat':_0x1b91fd(0x210)},_0xb91f08=!![]),_0x357234[_0x1b91fd(0x24c)]==undefined&&(_0x357234={..._0x357234,'onepagemode':settings['onepagemode']},_0xb91f08=!![]),_0x357234[_0x1b91fd(0x1c5)]==undefined&&(_0x357234={..._0x357234,'colorscheme':_0x1b91fd(0x2c6)},_0xb91f08=!![]),_0x357234[_0x1b91fd(0x222)]==undefined&&(_0x357234={..._0x357234,'autoliquidity':!![]},_0xb91f08=!![]),_0xb91f08&&(_0x357234={'botID':_0x357234[_0x1b91fd(0x28f)],'exchange':_0x357234[_0x1b91fd(0x149)],'apiKey':_0x357234['apiKey'],'apiSecret':_0x357234[_0x1b91fd(0x19d)],'apiPassword':_0x357234[_0x1b91fd(0x1fe)],'basecoin':_0x357234['basecoin'],'botname':_0x357234[_0x1b91fd(0x19a)],'showname':_0x357234['showname'],'threshold':_0x357234['threshold'],'ordertype':_0x357234[_0x1b91fd(0x182)],'timeout':_0x357234[_0x1b91fd(0x133)],'fiat':_0x357234['fiat'],'startdate':_0x357234['startdate'],'recreate':_0x357234[_0x1b91fd(0x290)],'timeshift':_0x357234['timeshift'],'onepagemode':_0x357234[_0x1b91fd(0x24c)],'headless':_0x357234[_0x1b91fd(0x1af)],'cooldown':_0x357234[_0x1b91fd(0x16c)],'change24h':_0x357234[_0x1b91fd(0x1ae)],'emojibuy':_0x357234['emojibuy'],'emojisell':_0x357234['emojisell'],'colorscheme':_0x357234[_0x1b91fd(0x1c5)],'portfolio':_0x357234[_0x1b91fd(0x1e7)],'autoliquidity':_0x357234[_0x1b91fd(0x222)],'liquidity':_0x357234[_0x1b91fd(0x29f)],'openOrders':_0x357234[_0x1b91fd(0x2bd)]},dbConfig['get'](_0x1b91fd(0x1a3))[_0x1b91fd(0x253)]()['write'](),dbConfig[_0x1b91fd(0x1c2)]('bot')[_0x1b91fd(0x1ad)](_0x357234)['write']());}else _0x357234={'botID':_0x3aed22,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1b91fd(0x254)+_0x3aed22,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x1b91fd(0x210),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x1b91fd(0x24c)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x357234;}function emittedConfiguration(){const _0x5d2476=_0x58b3d8;let _0x28c106;if(config[_0x5d2476(0x13c)]=='')_0x28c106={...config,'configstate':_0x5d2476(0x14c)};else config[_0x5d2476(0x13c)]=='***'?_0x28c106={...config,'configstate':_0x5d2476(0x27e)}:(_0x28c106={...config,'apiKey':'************','apiSecret':'************'},config['apiPassword']&&(_0x28c106['apiPassword']=_0x5d2476(0x1f1)));return _0x28c106;}function getSettings(){const _0x53da39=_0x58b3d8;return dbSettings[_0x53da39(0x1c2)]('settings')[_0x53da39(0x1d3)]();}function getSecure(){const _0x536496=_0x58b3d8;return dbSecure['get']('secure')[_0x536496(0x1d3)]()||{};}function updateTimeshift(_0x25e87d){const _0x1a6bc7=_0x58b3d8;let _0x3dc009=dbConfig[_0x1a6bc7(0x1c2)](_0x1a6bc7(0x1a3))[_0x1a6bc7(0x1e4)]({'botID':botID})[_0x1a6bc7(0x1d3)]();_0x3dc009&&dbConfig[_0x1a6bc7(0x1c2)](_0x1a6bc7(0x1a3))[_0x1a6bc7(0x1e4)]({'botID':botID})[_0x1a6bc7(0x2b7)]({'timeshift':_0x25e87d})[_0x1a6bc7(0x194)](),config[_0x1a6bc7(0x20a)]=_0x25e87d,proxyEmit(_0x1a6bc7(0x1f8),emittedConfiguration());}function updateOnepagemode(_0x386a8c){const _0x335912=_0x58b3d8;let _0x119da9=dbConfig[_0x335912(0x1c2)]('bot')[_0x335912(0x1e4)]({'botID':botID})[_0x335912(0x1d3)]();_0x119da9&&dbConfig['get'](_0x335912(0x1a3))[_0x335912(0x1e4)]({'botID':botID})[_0x335912(0x2b7)]({'onepagemode':_0x386a8c})[_0x335912(0x194)](),config['onepagemode']=_0x386a8c,proxyEmit(_0x335912(0x1f8),emittedConfiguration());}async function storeConfiguration(_0xf6b8c3){const _0xc298ab=_0x58b3d8;logger[_0xc298ab(0x1d4)](_0xc298ab(0x288));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xc298ab(0x1d4)]('Transaction\x20detection\x20blocked');let _0x39544d=[],_0x193603=![],_0x2a6894=![],_0x4b3275=[];_0xf6b8c3['portfolio'][_0xc298ab(0x2be)](_0x4c7f33=>{const _0x12cd59=_0xc298ab;if(!_0x4c7f33[_0x12cd59(0x14e)]&&_0x4c7f33[_0x12cd59(0x2ba)]!=_0xf6b8c3[_0x12cd59(0x174)])_0x4b3275[_0x12cd59(0x1ad)](_0x4c7f33[_0x12cd59(0x131)]);}),_0x4b3275[_0xc298ab(0x2be)](_0x2c7b5f=>{const _0x44bb3a=_0xc298ab,_0x35977c=watchedSymbols[_0x44bb3a(0x29a)](_0x2c7b5f);!_0x35977c&&_0x39544d['push'](_0x2c7b5f);}),_0x4b3275[_0xc298ab(0x2be)](_0x191cc5=>{const _0x3e265d=_0xc298ab,_0x2cd382=currentCoins[_0x3e265d(0x1e4)](_0x38f553=>_0x38f553[_0x3e265d(0x131)]==_0x191cc5);!_0x2cd382&&(_0x193603=!![]);}),currentCoins['forEach'](_0x44c04c=>{const _0xc051f=_0xc298ab;if(_0x44c04c[_0xc051f(0x2ba)]!=config[_0xc051f(0x174)]){const _0x594bce=_0x4b3275['find'](_0x7e06d3=>_0x7e06d3==_0x44c04c[_0xc051f(0x131)]);!_0x594bce&&(_0x193603=!![]);}}),_0xf6b8c3['portfolio'][_0xc298ab(0x2be)](_0x46d501=>{const _0x4c7a78=_0xc298ab,_0x4b4836=config[_0x4c7a78(0x1e7)][_0x4c7a78(0x1e4)](_0x5786a3=>_0x5786a3['coin']==_0x46d501[_0x4c7a78(0x2ba)]);if(_0x4b4836&&_0x46d501['offset']!=_0x4b4836[_0x4c7a78(0x263)])_0x2a6894=!![];});let _0x4394dd=dbConfig[_0xc298ab(0x1c2)]('bot')[_0xc298ab(0x1e4)]({'botID':botID})[_0xc298ab(0x1d3)]();_0xf6b8c3={..._0xf6b8c3,'apiKey':crypt['decrypt'](secure[_0xc298ab(0x287)],_0xf6b8c3[_0xc298ab(0x13c)])[_0xc298ab(0x137)],'apiSecret':crypt['decrypt'](secure[_0xc298ab(0x287)],_0xf6b8c3[_0xc298ab(0x19d)])[_0xc298ab(0x137)]};_0xf6b8c3['apiPassword']&&(_0xf6b8c3[_0xc298ab(0x1fe)]=crypt['decrypt'](secure[_0xc298ab(0x287)],_0xf6b8c3[_0xc298ab(0x1fe)])[_0xc298ab(0x137)]);let _0x3cff51=![];if(_0x4394dd){_0xf6b8c3['apiKey']==_0xc298ab(0x1f1)?_0xf6b8c3[_0xc298ab(0x13c)]=config[_0xc298ab(0x13c)]:_0x3cff51=!![];_0xf6b8c3[_0xc298ab(0x19d)]==_0xc298ab(0x1f1)?_0xf6b8c3['apiSecret']=config[_0xc298ab(0x19d)]:_0x3cff51=!![];if(_0xf6b8c3[_0xc298ab(0x1fe)]==_0xc298ab(0x1f1))_0xf6b8c3[_0xc298ab(0x1fe)]=config[_0xc298ab(0x1fe)];else{if(_0xf6b8c3[_0xc298ab(0x1fe)])_0x3cff51=!![];}dbConfig[_0xc298ab(0x1c2)](_0xc298ab(0x1a3))[_0xc298ab(0x1e4)]({'botID':botID})[_0xc298ab(0x2b7)](_0xf6b8c3)['write']();}else dbConfig[_0xc298ab(0x1c2)](_0xc298ab(0x1a3))[_0xc298ab(0x1ad)](_0xf6b8c3)['write'](),_0x3cff51=!![],process[_0xc298ab(0x1df)]({'status':_0xc298ab(0x277),'live':_0xc298ab(0x1be)},_0x5bf29d=>{});process['send']({'botname':_0xf6b8c3['botname']},_0x1a3ced=>{}),updateBotManager(),config={..._0xf6b8c3},proxyEmit(_0xc298ab(0x13f)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3cff51)await reset(_0x39544d,!![]);else _0x193603||_0x2a6894?await reset(_0x39544d,![]):getBalances();blockTransactionDetection=![],logger[_0xc298ab(0x1d4)](_0xc298ab(0x289));}async function storeHeadless(_0x581bcf){const _0x58949d=_0x58b3d8,_0x12146f={...config,'headless':_0x581bcf[_0x58949d(0x1af)]};let _0x3488ae=dbConfig[_0x58949d(0x1c2)](_0x58949d(0x1a3))['find']({'botID':botID})[_0x58949d(0x1d3)]();_0x3488ae&&dbConfig['get'](_0x58949d(0x1a3))[_0x58949d(0x1e4)]({'botID':botID})[_0x58949d(0x2b7)](_0x12146f)[_0x58949d(0x194)](),config={..._0x12146f},updateBotManager(),proxyEmit(_0x58949d(0x1f8),emittedConfiguration());}async function storeFiat(_0x339c14){const _0x266af5=_0x58b3d8,_0x253a1f={...config,'fiat':_0x339c14};let _0x54363d=dbConfig['get'](_0x266af5(0x1a3))['find']({'botID':botID})[_0x266af5(0x1d3)]();_0x54363d&&dbConfig[_0x266af5(0x1c2)](_0x266af5(0x1a3))[_0x266af5(0x1e4)]({'botID':botID})[_0x266af5(0x2b7)](_0x253a1f)['write'](),config={..._0x253a1f},proxyEmit(_0x266af5(0x1f8),emittedConfiguration());}function resetHistory(){const _0x29f081=_0x58b3d8;logger['full'](_0x29f081(0x1aa));try{if(fs[_0x29f081(0x241)](path[_0x29f081(0x19c)](configpath,_0x29f081(0x25c)+botID+_0x29f081(0x193))))fs[_0x29f081(0x29c)](path[_0x29f081(0x19c)](configpath,'bot-'+botID+_0x29f081(0x193)));if(fs[_0x29f081(0x241)](path[_0x29f081(0x19c)](configpath,'bot-'+botID+_0x29f081(0x280))))fs[_0x29f081(0x29c)](path['join'](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x29f081(0x241)](path[_0x29f081(0x19c)](configpath,_0x29f081(0x25c)+botID+_0x29f081(0x218))))fs['unlinkSync'](path[_0x29f081(0x19c)](configpath,_0x29f081(0x25c)+botID+_0x29f081(0x218)));}catch(_0x340206){if(_0x340206)logger[_0x29f081(0x1cc)](_0x29f081(0x215),_0x340206);}const _0x219a90=getDate();let _0xb172f9=[];currentCoins[_0x29f081(0x2be)](_0x5660e7=>{const _0x1624ab=_0x29f081;_0xb172f9['push']({'coin':_0x5660e7[_0x1624ab(0x2ba)],'number':_0x5660e7['number'],'price':_0x5660e7[_0x1624ab(0x23c)]});});let _0x321102=dbConfig[_0x29f081(0x1c2)](_0x29f081(0x1a3))[_0x29f081(0x1e4)]({'botID':botID})[_0x29f081(0x1d3)]();_0x321102&&(dbConfig['get'](_0x29f081(0x1a3))[_0x29f081(0x1e4)]({'botID':botID})[_0x29f081(0x2b7)]({'liquidity':[{'date':_0x219a90,'changes':_0xb172f9}]})[_0x29f081(0x194)](),config[_0x29f081(0x29f)]=[]),process[_0x29f081(0x1df)]({'stop':_0x29f081(0x1b0)},_0x15cfed=>{});}function noslash(_0x1d66b1){const _0x22a9e5=_0x58b3d8;return _0x1d66b1[_0x22a9e5(0x1c4)]('/','');}function updateHighestFee(_0x1318fa){const _0x5c7853=_0x58b3d8;if(_0x1318fa['reverse']){let _0x41a6ff={'filled':_0x1318fa['filled']*_0x1318fa['price'],'amount':_0x1318fa[_0x5c7853(0x296)]*_0x1318fa['price'],'side':_0x1318fa['side']==_0x5c7853(0x240)?_0x5c7853(0x251):_0x5c7853(0x240),'price':0x1/_0x1318fa[_0x5c7853(0x20e)]};_0x1318fa={..._0x1318fa,..._0x41a6ff};}const _0xd20774=defaultFee*_0x1318fa[_0x5c7853(0x296)]*_0x1318fa[_0x5c7853(0x20e)];lastFees['recent20'][_0x5c7853(0x28b)]===0x14&&lastFees[_0x5c7853(0x169)][_0x5c7853(0x160)](),lastFees[_0x5c7853(0x169)][_0x5c7853(0x1ad)](_0xd20774),lastFees[_0x5c7853(0x217)]=Math['max'](...lastFees[_0x5c7853(0x169)]);}async function updateNumberCoinsCcxt(_0x5bd15a){const _0x324c95=_0x58b3d8;logger['debug'](_0x324c95(0x2a9)+_0x5bd15a[_0x324c95(0x131)]+_0x324c95(0x2b0)+_0x5bd15a['status']+_0x324c95(0x2b0)+_0x5bd15a['id']);let _0x31a9c7=_0x5bd15a[_0x324c95(0x175)],_0xdc9f16=![];currentCoins[_0x324c95(0x2be)](_0x43a6ba=>{_0x43a6ba['symbol']==_0x5bd15a['symbol']&&(_0xdc9f16=!![]);});if(!_0xdc9f16)return;const _0x1f3fa6=currentCoins[_0x324c95(0x1e4)](_0x3aa4c2=>_0x3aa4c2[_0x324c95(0x131)]==_0x5bd15a[_0x324c95(0x131)]),_0x40c969=_0x4f32fb=>{const _0x5f4ba5=_0x324c95;if(_0x1f3fa6)_0x1f3fa6[_0x5f4ba5(0x2a8)]=_0x4f32fb;};if(_0x31a9c7==_0x324c95(0x188))_0x40c969(_0x324c95(0x188));else{if(_0x31a9c7=='canceled'){_0x40c969(_0x324c95(0x178));const _0x2c3235=await getCoins();[currentCoins,currentCoinsAll]=_0x2c3235,await getOpenOrders(),handleOpenOrders();}else{if(_0x31a9c7=='closed'){logger[_0x324c95(0x1d4)](_0x324c95(0x18e)+_0x5bd15a['symbol']+'\x20|\x20'+_0x5bd15a[_0x324c95(0x296)]+'\x20|\x20'+_0x5bd15a['id']);let _0x2330b6=![];if(lastOrders)for(const _0x57237e of lastOrders){const _0x3244ff=0xc8,_0x304560=0x1388;let _0x59b9d1=0x0;while(!_0x57237e[_0x324c95(0x269)]&&_0x59b9d1*_0x3244ff<_0x304560){_0x59b9d1++,await sleep(_0x3244ff);}if(_0x59b9d1>0x0)logger[_0x324c95(0x1d4)]('Waited\x20'+_0x59b9d1*_0x3244ff/0x3e8+_0x324c95(0x14d));if(_0x57237e[_0x324c95(0x269)]==_0x5bd15a['id']){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x5bd15a['id']),_0x2330b6=!![];if(_0x57237e[_0x324c95(0x296)]==0x0){logger[_0x324c95(0x1d4)](_0x324c95(0x26e)+_0x5bd15a['id']);if(_0x5bd15a[_0x324c95(0x223)])_0x57237e['price']=_0x5bd15a[_0x324c95(0x223)];else{if(_0x5bd15a['price'])_0x57237e[_0x324c95(0x20e)]=_0x5bd15a[_0x324c95(0x20e)];else{}}_0x57237e['filled']=_0x5bd15a['filled'],updateHighestFee(_0x57237e),_0x40c969('filled'),await validateOrders();if(lockOrders==ORDERS[_0x324c95(0x22f)]){const _0xf12689=await getCoins();[currentCoins,currentCoinsAll]=_0xf12689;}_0x57237e[_0x324c95(0x1b8)]={'currency':_0x5bd15a[_0x324c95(0x1b8)]?_0x5bd15a[_0x324c95(0x1b8)][_0x324c95(0x283)]:null,'cost':_0x5bd15a[_0x324c95(0x1b8)]?_0x5bd15a[_0x324c95(0x1b8)][_0x324c95(0x13e)]:0x0},await updateCoinResults(_0x57237e);}}}if(!_0x2330b6){logger[_0x324c95(0x1d4)](_0x324c95(0x17d)+_0x5bd15a['id']),_0x40c969(_0x324c95(0x296));const _0x284b95=await getCoins();[currentCoins,currentCoinsAll]=_0x284b95,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x2b3a92=JSON[_0x324c95(0x1e9)](lastBalances['portfolio']);const _0x27bb02=_0x2b3a92[_0x324c95(0x1e4)](_0x5e84b5=>_0x5e84b5[_0x324c95(0x131)]==_0x5bd15a[_0x324c95(0x131)]);if(_0x27bb02){if(_0x31a9c7==_0x324c95(0x188))_0x27bb02[_0x324c95(0x2a8)]=_0x27bb02[_0x324c95(0x2a8)]==_0x324c95(0x296)?_0x324c95(0x296):'open';else{if(_0x31a9c7==_0x324c95(0x178))_0x27bb02[_0x324c95(0x2a8)]=_0x27bb02['orderstatus']==_0x324c95(0x296)?_0x324c95(0x296):_0x324c95(0x178);else _0x31a9c7==_0x324c95(0x14a)&&(_0x27bb02[_0x324c95(0x2a8)]=_0x324c95(0x296));}}lastBalances={...lastBalances,'portfolio':JSON[_0x324c95(0x213)](_0x2b3a92)},proxyEmit(_0x324c95(0x1f5),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4bb4ee=_0x58b3d8;await getOpenOrders();let _0x418de5=![];currentCoins[_0x4bb4ee(0x2be)](_0x26b689=>{const _0x1fea86=_0x4bb4ee;_0x418de5=allOpenOrders[_0x1fea86(0x1e4)](_0x3a580a=>_0x3a580a[_0x1fea86(0x131)]==_0x26b689['symbol']),_0x26b689[_0x1fea86(0x2a8)]=_0x418de5?_0x1fea86(0x188):'none';});}async function getCoins(_0x2e62a5=!![],_0x3270de=config[_0x58b3d8(0x174)]){const _0x4533d0=_0x58b3d8;let _0x370419,_0x48e772=[],_0x263fb1=[],_0x44cc70=[],_0x55b777=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x370419=await exchange[_0x4533d0(0x2c3)](),mybalances=_0x370419['total'];for(const [_0x56cd0b,_0x1958c4]of Object['entries'](mybalances)){_0x55b777[_0x4533d0(0x1ad)](_0x56cd0b);}if(_0x3270de=='')for(const [_0x33c288,_0x2b63fe]of Object['entries'](mybalances)){_0x2b63fe!=0x0&&_0x263fb1[_0x4533d0(0x1ad)]({'coin':_0x33c288});}else{let _0x5a5a70=![];for(const [_0x2d8d8d,_0x50fb25]of Object[_0x4533d0(0x171)](mybalances)){if(_0x55b777['includes'](_0x2d8d8d)){const _0x1c78f2=config['portfolio'][_0x4533d0(0x1e4)](_0x29b82d=>_0x29b82d['coin']==_0x2d8d8d),_0x5a4068=_0x2d8d8d+'/'+_0x3270de,_0x523886=_0x3270de+'/'+_0x2d8d8d,_0x5d4de4=currentCoins['find'](_0x51ca9e=>_0x51ca9e[_0x4533d0(0x2ba)]==_0x2d8d8d);_0x5a5a70=![];if((_0x50fb25!=0x0||_0x1c78f2)&&(allSymbols[_0x4533d0(0x29a)](_0x5a4068)||_0x2d8d8d==_0x3270de))_0x2d8d8d!=_0x3270de&&_0x48e772[_0x4533d0(0x1ad)](_0x5a4068),_0x263fb1['push']({'coin':_0x2d8d8d,'symbol':_0x5a4068,'reverse':![],'number':Math[_0x4533d0(0x202)](_0x50fb25+(_0x1c78f2&&_0x1c78f2[_0x4533d0(0x263)]||0x0),0x0),'orderstatus':_0x5d4de4?_0x5d4de4['orderstatus']:_0x4533d0(0x27b)});else(_0x50fb25!=0x0||_0x1c78f2)&&allSymbols['includes'](_0x523886)&&(_0x2d8d8d!=_0x3270de&&_0x48e772[_0x4533d0(0x1ad)](_0x523886),_0x263fb1[_0x4533d0(0x1ad)]({'coin':_0x2d8d8d,'symbol':_0x523886,'reverse':!![],'number':Math[_0x4533d0(0x202)](_0x50fb25+(_0x1c78f2&&_0x1c78f2['offset']||0x0),0x0),'orderstatus':_0x5d4de4?_0x5d4de4[_0x4533d0(0x2a8)]:_0x4533d0(0x27b)}));}}}}catch(_0x336b5a){if(!_0x2e62a5)handleErrorNoStop(_0x336b5a,_0x4533d0(0x1ff));else await handleError(_0x336b5a,_0x4533d0(0x1ff));}return _0x44cc70=cloneDeep(_0x263fb1),_0x263fb1=_0x263fb1[_0x4533d0(0x21a)](_0x4c1368=>{const _0x47b7b1=_0x4533d0,_0x543bed=config[_0x47b7b1(0x1e7)]['find'](_0x40d673=>_0x40d673['coin']==_0x4c1368['coin']);return _0x543bed&&!_0x543bed[_0x47b7b1(0x14e)];}),[_0x263fb1,_0x44cc70];}async function getCoinNumber(_0x23828a){const _0x2f9399=_0x58b3d8;let _0x19c8f5;try{const _0x22c6d9=await exchange[_0x2f9399(0x2c3)]();_0x19c8f5=_0x22c6d9['total'][_0x23828a];}catch(_0x29a377){await handleError(_0x29a377,_0x2f9399(0x248));}return _0x19c8f5;}async function getOpenOrders(){const _0x273948=_0x58b3d8;let _0x5e0447;allOpenOrders=[];try{for(const _0x974c38 of config[_0x273948(0x1e7)]){!_0x974c38[_0x273948(0x14e)]&&_0x974c38['coin']!=config[_0x273948(0x174)]&&(_0x5e0447=await exchange['fetchOpenOrders'](_0x974c38[_0x273948(0x131)]),_0x5e0447[_0x273948(0x28b)]>0x0&&allOpenOrders[_0x273948(0x1ad)](_0x5e0447[0x0]));}}catch(_0x481c51){await handleError(_0x481c51,_0x273948(0x1e3));}}async function handleOpenOrders(_0x1bf8fb=0x0){const _0x4e63ba=_0x58b3d8;allOpenOrders[_0x4e63ba(0x28b)]==0x0&&lockOrders==ORDERS[_0x4e63ba(0x22f)]&&allOrdersPlaced&&(_0x1bf8fb==0x0?(logger[_0x4e63ba(0x1d4)](_0x4e63ba(0x279)),_0x1bf8fb++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4e63ba(0x1d4)](_0x4e63ba(0x1e6)),validateOrders(_0x4e63ba(0x2a5))));}async function testAPI(_0x5c25e1){const _0x1345f4=_0x58b3d8,_0xdb2f69=ccxt[_0x1345f4(0x1e1)][_0x5c25e1[_0x1345f4(0x149)][_0x1345f4(0x140)]()],_0x13ea90=new _0xdb2f69({'apiKey':_0x5c25e1['apiKey'],'secret':_0x5c25e1['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1345f4(0x291)}});if(_0x5c25e1[_0x1345f4(0x1fe)])_0x13ea90['password']=_0x5c25e1[_0x1345f4(0x1fe)];try{await _0x13ea90['loadMarkets']();}catch(_0x4a53f2){throw _0x4a53f2;}}function cloneDeep(_0x1bb4cf){const _0x1ec5e3=_0x58b3d8;return JSON['parse'](JSON[_0x1ec5e3(0x213)](_0x1bb4cf));}async function getPortfolio(_0x152185){const _0x4269fc=_0x58b3d8;let _0x2dbe77=[],_0x52369a=[],_0x188898=[],_0x90bccb;if(_0x152185[_0x4269fc(0x13c)]!==_0x4269fc(0x1f1)||_0x152185[_0x4269fc(0x19d)]!==_0x4269fc(0x1f1)||_0x152185[_0x4269fc(0x1fe)]&&_0x152185[_0x4269fc(0x1fe)]!==_0x4269fc(0x1f1)){if(config[_0x4269fc(0x149)]){if(_0x152185[_0x4269fc(0x13c)]=='************')_0x152185[_0x4269fc(0x13c)]=config[_0x4269fc(0x13c)];if(_0x152185[_0x4269fc(0x19d)]==_0x4269fc(0x1f1))_0x152185[_0x4269fc(0x19d)]=config[_0x4269fc(0x19d)];if(_0x152185[_0x4269fc(0x1fe)]==_0x4269fc(0x1f1))_0x152185[_0x4269fc(0x1fe)]=config[_0x4269fc(0x1fe)];try{await testAPI(_0x152185);}catch(_0x57a442){if(_0x57a442[_0x4269fc(0x2af)]()['includes']('AuthenticationError')){logger['debug'](_0x4269fc(0x1bb)),proxyEmit(_0x4269fc(0x1e7),![]);return;}else{handleError(_0x57a442,_0x4269fc(0x1d7));return;}}}await initExchange(_0x152185[_0x4269fc(0x149)],_0x152185['apiKey'],_0x152185['apiSecret'],_0x152185[_0x4269fc(0x1fe)]);try{await loadSymbols();}catch(_0x2157d4){if(_0x2157d4[_0x4269fc(0x2af)]()[_0x4269fc(0x29a)](_0x4269fc(0x243))){proxyEmit(_0x4269fc(0x1e7),![]);return;}else{handleError(_0x2157d4,_0x4269fc(0x244));return;}}const _0x402231=await getCoins(![],_0x152185[_0x4269fc(0x174)]);_0x188898=cloneDeep(_0x402231[0x1]);}else _0x188898=cloneDeep(currentCoinsAll);if(_0x152185[_0x4269fc(0x174)]=='')proxyEmit('portfolio',_0x188898);else{_0x188898[_0x4269fc(0x2be)](_0xcc6e17=>{const _0x14e4ca=_0x4269fc;if(_0xcc6e17[_0x14e4ca(0x2ba)]!=_0x152185['basecoin'])_0x2dbe77[_0x14e4ca(0x1ad)](_0xcc6e17[_0x14e4ca(0x131)]);});if(_0x2dbe77['length']==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x52369a=await exchange['fetchTickers'](_0x2dbe77);}catch(_0x5b7fa5){if(_0x5b7fa5[_0x4269fc(0x2af)]()['includes'](_0x4269fc(0x243))){proxyEmit(_0x4269fc(0x1e7),![]);return;}else{handleError(_0x5b7fa5,_0x4269fc(0x274));return;}}_0x188898[_0x4269fc(0x2be)](_0x363432=>{const _0x2021c4=_0x4269fc;_0x363432[_0x2021c4(0x2ba)]!=_0x152185[_0x2021c4(0x174)]?_0x90bccb=_0x363432['reverse']?0x1/_0x52369a[_0x363432['symbol']][_0x2021c4(0x23c)]:_0x52369a[_0x363432[_0x2021c4(0x131)]]['last']:_0x90bccb=0x1,_0x363432['price']=formatResult(_0x90bccb,0x8);}),proxyEmit('portfolio',_0x188898);}}}function truncateTradeAmount(_0x3ee42c,_0xad0631){const _0x4253ba=_0x58b3d8;let _0x227e3d=0x0;try{_0x227e3d=exchange[_0x4253ba(0x1f6)](_0x3ee42c,_0xad0631);}catch(_0x42e540){}return _0x227e3d;}function checkMinimums(_0x187f56){const _0x1e4995=_0x58b3d8;let _0x2eb8d8=!![];const _0x417a43=!_0x187f56[_0x1e4995(0x14f)]?markets[_0x187f56[_0x1e4995(0x131)]][_0x1e4995(0x206)][_0x1e4995(0x154)]['min']:markets[_0x187f56[_0x1e4995(0x131)]][_0x1e4995(0x206)]['cost']['min'],_0x520d43=!_0x187f56['reverse']?markets[_0x187f56[_0x1e4995(0x131)]]['limits'][_0x1e4995(0x13e)][_0x1e4995(0x237)]:markets[_0x187f56[_0x1e4995(0x131)]][_0x1e4995(0x206)]['amount'][_0x1e4995(0x237)],_0x27c6b7=truncateTradeAmount(_0x187f56[_0x1e4995(0x131)],_0x187f56['trade']);_0x187f56[_0x1e4995(0x1b3)]=_0x27c6b7;if(Math[_0x1e4995(0x286)](_0x27c6b7)<_0x417a43)_0x2eb8d8=![];if(Math[_0x1e4995(0x286)](_0x27c6b7)*_0x187f56[_0x1e4995(0x23c)]<_0x520d43)_0x2eb8d8=![];if(_0x187f56['side']==_0x1e4995(0x240)){let _0xa3009c=config[_0x1e4995(0x1e7)][_0x1e4995(0x1e4)](_0x376c18=>_0x376c18['coin']==_0x187f56['coin']);if(_0xa3009c[_0x1e4995(0x263)]>0x0){if(Math[_0x1e4995(0x286)](_0x27c6b7)>_0x187f56['number']-_0xa3009c['offset'])_0x2eb8d8=![];}else{if(Math[_0x1e4995(0x286)](_0x27c6b7)>_0x187f56[_0x1e4995(0x275)])_0x2eb8d8=![];}}if(_0x187f56[_0x1e4995(0x252)]==_0x1e4995(0x251)){let _0x5061cc=config['portfolio'][_0x1e4995(0x1e4)](_0x2b95c3=>_0x2b95c3[_0x1e4995(0x2ba)]==config[_0x1e4995(0x174)]),_0x513dcb=currentCoins['find'](_0x1bbbdb=>_0x1bbbdb[_0x1e4995(0x2ba)]==config[_0x1e4995(0x174)]);if(_0x5061cc[_0x1e4995(0x263)]>0x0){if(Math[_0x1e4995(0x286)](_0x27c6b7)*_0x187f56[_0x1e4995(0x23c)]>_0x513dcb['number']-_0x5061cc['offset'])_0x2eb8d8=![];}else{if(Math['abs'](_0x27c6b7)*_0x187f56[_0x1e4995(0x23c)]>_0x513dcb['number'])_0x2eb8d8=![];}}return _0x2eb8d8;}async function getBalances(_0x333867=!![]){const _0x5a4e6d=_0x58b3d8;let _0x283aa1=0x0,_0x1c7929;const _0x4fac72=config[_0x5a4e6d(0x195)];if(config[_0x5a4e6d(0x1af)]&&config[_0x5a4e6d(0x1ae)]<0x0)await validate24hChanges();currentCoins[_0x5a4e6d(0x2be)](_0x478e7a=>{const _0x404820=_0x5a4e6d;if(_0x478e7a[_0x404820(0x2ba)]!=config[_0x404820(0x174)]){let _0x49c1c2=global[_0x404820(0x1fd)][noslash(_0x478e7a[_0x404820(0x131)])];_0x1c7929=_0x478e7a[_0x404820(0x14f)]?0x1/_0x49c1c2:_0x49c1c2;}else _0x1c7929=0x1;let _0x2ceaf5=_0x478e7a[_0x404820(0x275)]*_0x1c7929;_0x283aa1+=_0x2ceaf5,_0x478e7a['last']=formatResult(Number(_0x1c7929),0x8),_0x478e7a[_0x404820(0x1d3)]=_0x2ceaf5;}),currentCoins[_0x5a4e6d(0x2be)](_0xa6ef19=>{const _0x310ae7=_0x5a4e6d;let _0x351657=config[_0x310ae7(0x1e7)]['find'](_0x4739e3=>_0x4739e3['coin']==_0xa6ef19[_0x310ae7(0x2ba)]),_0x4185b7=Number(_0x351657[_0x310ae7(0x190)]),_0x224922=_0xa6ef19[_0x310ae7(0x1d3)]/_0x283aa1*0x64,_0x2ed7aa=_0x4185b7*_0x283aa1/0x64/_0xa6ef19['last']-_0xa6ef19[_0x310ae7(0x275)];_0xa6ef19[_0x310ae7(0x190)]=formatResult(_0x224922,0x3),_0xa6ef19[_0x310ae7(0x284)]=formatResult(_0x4185b7,0x3),_0xa6ef19[_0x310ae7(0x1b3)]=formatResult(_0x2ed7aa,0x8),_0xa6ef19[_0x310ae7(0x252)]='',_0xa6ef19[_0x310ae7(0x1eb)]=![];if(_0xa6ef19[_0x310ae7(0x2ba)]!=config['basecoin']){if(_0xa6ef19[_0x310ae7(0x190)]>_0x4185b7)_0xa6ef19[_0x310ae7(0x252)]=_0x310ae7(0x240),_0xa6ef19[_0x310ae7(0x1eb)]=checkMinimums(_0xa6ef19);else _0xa6ef19[_0x310ae7(0x190)]<_0x4185b7&&(_0xa6ef19[_0x310ae7(0x252)]='buy',_0xa6ef19[_0x310ae7(0x1eb)]=checkMinimums(_0xa6ef19));}_0xa6ef19[_0x310ae7(0x185)]=_0xa6ef19['distribution']/_0xa6ef19['target']-0x1;if(_0xa6ef19[_0x310ae7(0x2a8)]==_0x310ae7(0x296)||_0xa6ef19[_0x310ae7(0x2a8)]=='canceled')_0xa6ef19[_0x310ae7(0x2a8)]=_0x310ae7(0x27b);}),currentCoins[_0x5a4e6d(0x25f)]((_0x21a045,_0xd14ff7)=>_0x21a045[_0x5a4e6d(0x185)]<_0xd14ff7[_0x5a4e6d(0x185)]?0x1:_0xd14ff7[_0x5a4e6d(0x185)]<_0x21a045['delta']?-0x1:0x0);const _0x1a7921=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1a7921['eur'],'usd':_0x1a7921[_0x5a4e6d(0x260)],'portfolio':JSON[_0x5a4e6d(0x213)](currentCoins),'threshold':_0x4fac72},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x333867){if(config[_0x5a4e6d(0x1af)])headlessMode({'portfolio':currentCoins,'threshold':_0x4fac72});else{if(lockOrders==ORDERS[_0x5a4e6d(0x22c)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4fac72});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x70465b=getNormalizedPerformance();getStartingBalances(_0x70465b),emitPerformance(_0x70465b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x50615e=getNormalizedPerformance();emitPerformance(_0x50615e),getStartingBalances(_0x50615e),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3f1ac2=_0x58b3d8;if(!lastBalances)return;let _0x20d44e=[],_0x73bc6f,_0x19ab2=JSON[_0x3f1ac2(0x1e9)](lastBalances[_0x3f1ac2(0x1e7)]);_0x19ab2[_0x3f1ac2(0x25f)]((_0x70720e,_0x271df6)=>_0x70720e[_0x3f1ac2(0x2ba)]>_0x271df6['coin']?0x1:_0x271df6[_0x3f1ac2(0x2ba)]>_0x70720e[_0x3f1ac2(0x2ba)]?-0x1:0x0),_0x19ab2[_0x3f1ac2(0x2be)](_0x1b7e1a=>{const _0x380f17=_0x3f1ac2;let _0x2dc88d={'coin':_0x1b7e1a['coin'],'number':_0x1b7e1a[_0x380f17(0x275)],'price':_0x1b7e1a[_0x380f17(0x23c)]};_0x20d44e[_0x380f17(0x1ad)](_0x2dc88d);});const _0x4e162c=await getFiat();_0x73bc6f={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x4e162c[_0x3f1ac2(0x14b)],'usd':_0x4e162c[_0x3f1ac2(0x260)],'coins':_0x20d44e};let _0xfc2351=dbPerformance['get'](_0x3f1ac2(0x21c))[_0x3f1ac2(0x1e4)]({'date':_0x73bc6f['date']})['value']();_0xfc2351?_0x73bc6f[_0x3f1ac2(0x17c)]!=config['startdate']&&dbPerformance[_0x3f1ac2(0x1c2)]('data')[_0x3f1ac2(0x1e4)]({'date':_0x73bc6f['date']})[_0x3f1ac2(0x2b7)](_0x73bc6f)[_0x3f1ac2(0x194)]():dbPerformance[_0x3f1ac2(0x1c2)]('data')[_0x3f1ac2(0x1ad)](_0x73bc6f)[_0x3f1ac2(0x194)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x11ee6f=_0x58b3d8;let _0x540c5d=[];if(dbPerformance[_0x11ee6f(0x1a8)](_0x11ee6f(0x21c))['value']()){let _0x1313de=dbPerformance[_0x11ee6f(0x1c2)](_0x11ee6f(0x21c))[_0x11ee6f(0x13b)]()[_0x11ee6f(0x21a)](_0x3fb58e=>{const _0x97f4b4=_0x11ee6f;if(_0x3fb58e['coins'][_0x97f4b4(0x28b)]==0x0)return![];else return!![];})[_0x11ee6f(0x266)](_0x11ee6f(0x17c))[_0x11ee6f(0x1d3)](),_0x1d3682=[...config[_0x11ee6f(0x29f)]];_0x1d3682[_0x11ee6f(0x25f)]((_0x4f3a95,_0x3d7659)=>_0x4f3a95[_0x11ee6f(0x17c)]>_0x3d7659[_0x11ee6f(0x17c)]?-0x1:_0x3d7659[_0x11ee6f(0x17c)]>_0x4f3a95[_0x11ee6f(0x17c)]?0x1:0x0);let _0x188d93=0x1,_0x5df1ea=[],_0x4064ee=0x0;_0x1313de['slice']()[_0x11ee6f(0x14f)]()[_0x11ee6f(0x2be)]((_0x599efe,_0x132155)=>{const _0xc03b99=_0x11ee6f;if(_0x1d3682[_0x4064ee]){if(_0x1313de[_0x1313de[_0xc03b99(0x28b)]-_0x132155]&&_0x1d3682[_0x4064ee][_0xc03b99(0x17c)]==_0x1313de[_0x1313de[_0xc03b99(0x28b)]-_0x132155][_0xc03b99(0x17c)]){if(_0x132155<_0x1313de[_0xc03b99(0x28b)]){let _0x519c42=0x0,_0x588ac2=0x0;_0x1313de[_0x1313de[_0xc03b99(0x28b)]-_0x132155][_0xc03b99(0x141)][_0xc03b99(0x2be)](_0x43a00d=>{const _0x3931be=_0xc03b99;_0x588ac2+=_0x43a00d['number']*_0x43a00d[_0x3931be(0x20e)];}),_0x1d3682[_0x4064ee]['changes'][_0xc03b99(0x2be)](_0x58ba57=>{const _0x29b8aa=_0xc03b99;_0x519c42+=_0x58ba57['number']*_0x58ba57[_0x29b8aa(0x20e)];}),_0x188d93*=_0x519c42/(_0x588ac2-_0x519c42)+0x1;}_0x4064ee++;}}let _0x40a047=0x0;_0x599efe['coins'][_0xc03b99(0x2be)](_0x499418=>{const _0x36efc2=_0xc03b99;_0x40a047+=_0x499418[_0x36efc2(0x275)]*_0x499418[_0x36efc2(0x20e)];}),_0x5df1ea[_0x1313de['length']-_0x132155-0x1]=_0x40a047*(_0x188d93-0x1);});let _0x22d782=[];_0x1d3682=[...config[_0x11ee6f(0x29f)]]||[];let _0xc28d99=0x0;_0x4064ee=0x0,_0x1313de[_0x11ee6f(0x2be)]((_0x991736,_0x3360bb)=>{const _0x10a5ff=_0x11ee6f;if(_0x1d3682[_0x4064ee]){const _0x4bf19a=fns[_0x10a5ff(0x1e9)](_0x1d3682[_0x4064ee]['date'],_0x10a5ff(0x272),new Date()),_0x3f637c=fns[_0x10a5ff(0x1e9)](_0x991736[_0x10a5ff(0x17c)],_0x10a5ff(0x272),new Date());if(fns[_0x10a5ff(0x15f)](_0x4bf19a,_0x3f637c)){let _0x46c506=0x0;_0x1d3682[_0x4064ee][_0x10a5ff(0x1ba)][_0x10a5ff(0x2be)](_0x11aedd=>{const _0x158c0e=_0x10a5ff;!_0x22d782[_0x11aedd[_0x158c0e(0x2ba)]]?_0x22d782[_0x11aedd[_0x158c0e(0x2ba)]]=_0x11aedd[_0x158c0e(0x275)]:(_0x46c506=_0x22d782[_0x11aedd['coin']],_0x22d782[_0x11aedd[_0x158c0e(0x2ba)]]+=_0x11aedd[_0x158c0e(0x275)]);const _0x6c19cd=_0x991736[_0x158c0e(0x141)][_0x158c0e(0x1e4)](_0x201321=>_0x201321[_0x158c0e(0x2ba)]==_0x11aedd[_0x158c0e(0x2ba)]);(!_0x6c19cd||_0x6c19cd[_0x158c0e(0x275)]==0x0)&&(_0xc28d99+=(-_0x11aedd[_0x158c0e(0x275)]-_0x46c506)*_0x11aedd[_0x158c0e(0x20e)]);}),_0x4064ee++;}}_0x991736[_0x10a5ff(0x141)]['forEach']((_0x28dcec,_0x220846)=>{const _0x41e950=_0x10a5ff;_0x22d782[_0x28dcec['coin']]&&(_0x28dcec[_0x41e950(0x14c)]=_0x22d782[_0x28dcec[_0x41e950(0x2ba)]]);}),_0x540c5d[_0x10a5ff(0x1ad)]({'date':_0x991736[_0x10a5ff(0x17c)],'eur':_0x991736[_0x10a5ff(0x14b)],'usd':_0x991736[_0x10a5ff(0x260)],'offset':_0x5df1ea[_0x3360bb],'netoffset':_0xc28d99,'coins':_0x991736[_0x10a5ff(0x141)]});});}return _0x540c5d;}function emitPerformance(_0x4a520f){const _0x142c33=_0x58b3d8;_0x4a520f[_0x142c33(0x28b)]!==0x0?(proxyEmit('performance',_0x4a520f),lastPerformanceEmitted=getDate()):proxyEmit(_0x142c33(0x139),[]);}function getPerf(_0x51e8b5,_0x4e05fd){const _0x1f6912=_0x58b3d8;let _0xee5534=0x0,_0x32f938=0x0,_0x42640c=0x0;_0x51e8b5[_0x1f6912(0x141)][_0x1f6912(0x2be)](_0x31be78=>{const _0x2b15c3=_0x1f6912;_0xee5534+=_0x31be78['number']*_0x31be78[_0x2b15c3(0x20e)];});_0x4e05fd&&(_0xee5534+=_0x51e8b5['offset']);if(config[_0x1f6912(0x174)]===_0x1f6912(0x16d)||config['basecoin']===_0x1f6912(0x29d))_0x32f938=_0xee5534*_0x51e8b5[_0x1f6912(0x14b)],_0x42640c=_0xee5534*_0x51e8b5['usd'];else{if(usdBasecoins[_0x1f6912(0x29a)](config[_0x1f6912(0x174)]))_0x32f938=_0xee5534*_0x51e8b5['eur']/_0x51e8b5[_0x1f6912(0x260)],_0x42640c=_0xee5534;else config['basecoin']===_0x1f6912(0x200)&&(_0x32f938=_0xee5534,_0x42640c=_0xee5534*_0x51e8b5[_0x1f6912(0x260)]/_0x51e8b5['eur']);}return[_0xee5534,_0x32f938,_0x42640c];}function getKPIs(_0x2aca69,_0x563db8='EUR'){const _0x3f6bad=_0x58b3d8,_0x4a01f6=config[_0x3f6bad(0x174)],_0x7d1a0c=lastBalances,_0x44014e=currentCoins,_0x3fa1c5=getNormalizedPerformance(),_0x4a23b0=_0x2aca69===_0x3f6bad(0x174)?_0x4a01f6:_0x2aca69===_0x3f6bad(0x219)||_0x2aca69==='net-fiat'?_0x563db8:_0x3f6bad(0x1a2)+_0x4a01f6,_0x4d94bb=_0x2aca69==='net-basecoin'?'Net\x20effect':_0x2aca69===_0x3f6bad(0x247)?_0x3f6bad(0x17b):_0x4a23b0+_0x3f6bad(0x216),_0x42fef5=_0x2aca69===_0x3f6bad(0x155)||_0x2aca69===_0x3f6bad(0x247)?_0x3f6bad(0x17b):_0x4a23b0+_0x3f6bad(0x1d6);let _0x28fb71=0x0;_0x44014e['forEach'](_0xa8174f=>{const _0x47fc94=_0x3f6bad;_0x28fb71+=_0xa8174f[_0x47fc94(0x275)]*_0xa8174f[_0x47fc94(0x23c)];});if(_0x2aca69==='fiat'||_0x2aca69===_0x3f6bad(0x247)){if(_0x4a01f6===_0x3f6bad(0x16d)||_0x4a01f6===_0x3f6bad(0x29d))_0x28fb71=_0x28fb71*(_0x563db8===_0x3f6bad(0x200)?_0x7d1a0c['eur']:_0x7d1a0c[_0x3f6bad(0x260)]);else{if(usdBasecoins[_0x3f6bad(0x29a)](_0x4a01f6))_0x28fb71=_0x28fb71*(_0x563db8==='EUR'?_0x7d1a0c['eur']/_0x7d1a0c[_0x3f6bad(0x260)]:0x1);else _0x4a01f6===_0x3f6bad(0x200)&&(_0x28fb71=_0x28fb71*(_0x563db8==='EUR'?0x1:_0x7d1a0c['usd']/_0x7d1a0c[_0x3f6bad(0x14b)]));}}let _0x475855;if(_0x28fb71!==0x0){if(_0x2aca69===_0x3f6bad(0x174))_0x475855=(_0x28fb71/startingBalances[_0x3f6bad(0x174)]-0x1)*0x64;else{if(_0x563db8===_0x3f6bad(0x200))_0x475855=(_0x28fb71/startingBalances['eur']-0x1)*0x64;else _0x475855=(_0x28fb71/startingBalances[_0x3f6bad(0x260)]-0x1)*0x64;}let _0x4dcf3f=0x0;if(startingBalances[_0x3f6bad(0x141)])_0x44014e[_0x3f6bad(0x2be)](_0x58a100=>{const _0x3c9baa=_0x3f6bad;let _0x59d70a=startingBalances[_0x3c9baa(0x141)][_0x3c9baa(0x1e4)](_0x1bc6d3=>_0x1bc6d3[_0x3c9baa(0x2ba)]===_0x58a100[_0x3c9baa(0x2ba)]);if(_0x59d70a&&_0x59d70a['coin']&&_0x58a100[_0x3c9baa(0x275)]!==0x0)_0x4dcf3f+=_0x59d70a[_0x3c9baa(0x275)]*_0x58a100[_0x3c9baa(0x23c)];});let _0x400e51=0x0;if(_0x3fa1c5[_0x3f6bad(0x28b)]!==0x0){let _0x4a34fc=_0x3fa1c5[_0x3fa1c5['length']-0x1];_0x400e51=_0x4a34fc['netoffset'];}_0x4dcf3f-=_0x400e51;_0x2aca69===_0x3f6bad(0x155)&&(_0x475855=(_0x28fb71-_0x4dcf3f)/startingBalances[_0x3f6bad(0x174)]*0x64,_0x28fb71=_0x28fb71-_0x4dcf3f);if(_0x2aca69===_0x3f6bad(0x247)){let _0x1d879b=_0x563db8===_0x3f6bad(0x200)?startingBalances[_0x3f6bad(0x14b)]:startingBalances['usd'];if(_0x4a01f6===_0x3f6bad(0x16d)||_0x4a01f6==='ETH')_0x4dcf3f=_0x563db8===_0x3f6bad(0x200)?_0x4dcf3f*_0x7d1a0c[_0x3f6bad(0x14b)]:_0x4dcf3f*_0x7d1a0c[_0x3f6bad(0x260)];else{if(usdBasecoins['includes'](_0x4a01f6))_0x4dcf3f=_0x563db8===_0x3f6bad(0x200)?_0x4dcf3f*_0x7d1a0c['eur']/_0x7d1a0c[_0x3f6bad(0x260)]:_0x4dcf3f;else _0x4a01f6===_0x3f6bad(0x200)&&(_0x4dcf3f=_0x563db8===_0x3f6bad(0x200)?_0x4dcf3f:_0x4dcf3f*_0x7d1a0c[_0x3f6bad(0x260)]/_0x7d1a0c[_0x3f6bad(0x14b)]);}_0x475855=(_0x28fb71-_0x4dcf3f)/_0x1d879b*0x64,_0x28fb71=_0x28fb71-_0x4dcf3f;}if(_0x475855){if(_0x475855<0x64)_0x475855=_0x475855['toFixed'](0x2);else{if(_0x475855<0x3e8)_0x475855=_0x475855[_0x3f6bad(0x1c8)](0x1);else _0x475855=_0x475855[_0x3f6bad(0x1c8)](0x0);}}else _0x475855=Number('0')[_0x3f6bad(0x1c8)](0x2);if(_0x28fb71){if(Math['abs'](_0x28fb71)<0.000001)_0x28fb71=_0x28fb71[_0x3f6bad(0x1c8)](0x2);else{if(Math['abs'](_0x28fb71)<0.1)_0x28fb71=_0x28fb71[_0x3f6bad(0x1c8)](0x6);else{if(Math['abs'](_0x28fb71)<0x1)_0x28fb71=_0x28fb71['toFixed'](0x5);else{if(Math[_0x3f6bad(0x286)](_0x28fb71)<0xa)_0x28fb71=_0x28fb71['toFixed'](0x4);else{if(Math[_0x3f6bad(0x286)](_0x28fb71)<0x64)_0x28fb71=_0x28fb71[_0x3f6bad(0x1c8)](0x3);else{if(Math[_0x3f6bad(0x286)](_0x28fb71)<0x3e8)_0x28fb71=_0x28fb71[_0x3f6bad(0x1c8)](0x2);else _0x28fb71=_0x28fb71[_0x3f6bad(0x1c8)](0x2);}}}}}}else _0x28fb71=Number('0')[_0x3f6bad(0x1c8)](0x2);}else _0x475855=Number('0')[_0x3f6bad(0x1c8)](0x2);return{'value':_0x28fb71,'change':_0x475855,'leftTxt':_0x4d94bb,'rightTxt':_0x42fef5};}async function getStartingBalances(_0x2e7d,_0x4d4af4=!![]){const _0xea9f00=_0x58b3d8;if(_0x2e7d[_0xea9f00(0x28b)]!==0x0){const [_0x2edc1b,_0x5d5fb8,_0x1e80f7]=getPerf(_0x2e7d[0x0],!![]);let _0x2672b9=[];config[_0xea9f00(0x1e7)][_0xea9f00(0x2be)](_0xbe4f5f=>{const _0x5935d5=_0xea9f00;let _0x193822=0x0,_0xfaba2f;config['liquidity'][_0x5935d5(0x2be)](_0x5bcd8d=>{const _0x6c5d5b=_0x5935d5;let _0x2c2639=_0x5bcd8d[_0x6c5d5b(0x1ba)][_0x6c5d5b(0x1e4)](_0x4f646b=>_0x4f646b[_0x6c5d5b(0x2ba)]==_0xbe4f5f[_0x6c5d5b(0x2ba)]);if(_0x2c2639){_0x193822+=_0x2c2639['number'];if(!_0xfaba2f)_0xfaba2f=_0x2c2639[_0x6c5d5b(0x20e)];}}),_0x2672b9[_0x5935d5(0x1ad)]({'coin':_0xbe4f5f[_0x5935d5(0x2ba)],'number':_0x193822,'initialprice':_0xfaba2f});});const _0x18f197={'basecoin':_0x2edc1b,'eur':_0x5d5fb8,'usd':_0x1e80f7,'coins':_0x2672b9};if(_0x4d4af4)proxyEmit('starting-balances',_0x18f197);startingBalances=_0x18f197;}}function headlessMode(_0x592552){const _0x4db3d0=_0x58b3d8;let _0x61fcda=_0x592552['portfolio'],_0x2d3fd5=_0x592552[_0x4db3d0(0x195)],_0x266998=[];for(let _0x572d74 of _0x61fcda){if(_0x572d74[_0x4db3d0(0x2ba)]!=config[_0x4db3d0(0x174)]){if(_0x572d74[_0x4db3d0(0x185)]>=_0x2d3fd5/0x64){if(_0x572d74[_0x4db3d0(0x1eb)])_0x266998['push'](_0x572d74);}else{if(_0x572d74[_0x4db3d0(0x185)]<=-_0x2d3fd5/0x64){if(_0x572d74[_0x4db3d0(0x1eb)])_0x266998['push'](_0x572d74);}}}}_0x266998[_0x4db3d0(0x28b)]>0x0&&placeOrder(_0x266998);}function notifyBalance(_0x397545){const _0x243f97=_0x58b3d8;let _0x19d713=_0x397545[_0x243f97(0x1e7)],_0x392b4a=_0x397545[_0x243f97(0x195)],_0x381202=[];for(let _0x2d30a1 of _0x19d713){if(_0x2d30a1[_0x243f97(0x2ba)]!=config[_0x243f97(0x174)]){if(_0x2d30a1['delta']>=_0x392b4a/0x64){if(_0x2d30a1[_0x243f97(0x1eb)])_0x381202[_0x243f97(0x1ad)](_0x2d30a1);}else{if(_0x2d30a1[_0x243f97(0x185)]<=-_0x392b4a/0x64){if(_0x2d30a1[_0x243f97(0x1eb)])_0x381202[_0x243f97(0x1ad)](_0x2d30a1);}}}}if(_0x381202[_0x243f97(0x28b)]>0x0){let _0x3f703b=_0x381202[_0x243f97(0x167)](_0x1d276e=>_0x1d276e[_0x243f97(0x2ba)]);_0x3f703b[_0x243f97(0x25f)]();let _0x8ea418=_0x3f703b[_0x243f97(0x19c)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x8ea418;}}function symbolToCoin(_0x3e650c){const _0x4f86a2=_0x58b3d8;let _0x45806b;if(_0x3e650c[_0x4f86a2(0x29a)]('/'+config[_0x4f86a2(0x174)]))_0x45806b=_0x3e650c[_0x4f86a2(0x1c4)]('/'+config[_0x4f86a2(0x174)],'');if(_0x3e650c[_0x4f86a2(0x29a)](config['basecoin']+'/'))_0x45806b=_0x3e650c[_0x4f86a2(0x1c4)](config['basecoin']+'/','');return _0x45806b;}async function unlockOrders(){const _0x3024ba=_0x58b3d8;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3024ba(0x22f)]){logger[_0x3024ba(0x1d4)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x3024ba(0x1fc)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x398527=await getCoins();[currentCoins,currentCoinsAll]=_0x398527,validateOrdersState=_0x3024ba(0x14c),persistOpenOrders([]),lockOrders=ORDERS[_0x3024ba(0x22c)],logger[_0x3024ba(0x1d4)](_0x3024ba(0x28e));}}async function validateOrders(_0x2f6840){const _0x46c0a1=_0x58b3d8;if(_0x2f6840)validateOrdersState=_0x2f6840;logger[_0x46c0a1(0x1d4)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x46c0a1(0x1ee)+(lockOrders==0x1?_0x46c0a1(0x148):lockOrders==0x2?_0x46c0a1(0x16e):_0x46c0a1(0x2a4)));let _0x51944b=[],_0x2af5e2=config[_0x46c0a1(0x182)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x46c0a1(0x133)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x46c0a1(0x22f)])return;logger[_0x46c0a1(0x1d4)](_0x46c0a1(0x246)+validateOrdersState),lastOrders[_0x46c0a1(0x2be)](_0x3403b3=>{const _0x16991d=_0x46c0a1;let _0xd1dc4f=![];_0x3403b3['filled']>0x0&&(_0xd1dc4f=!![]),_0x51944b['push'](_0xd1dc4f),_0xd1dc4f&&config[_0x16991d(0x182)]!=_0x16991d(0x1f2)&&logHistory(_0x16991d(0x1b4),_0x16991d(0x227)+_0x3403b3['symbol']+'\x20'+_0x3403b3[_0x16991d(0x252)]+'\x20#'+formatResult(_0x3403b3[_0x16991d(0x296)],0x8)+'\x20@'+formatResult(_0x3403b3[_0x16991d(0x20e)],0x8));}),_0x51944b['forEach']((_0xc3372d,_0xeea9f5)=>{const _0x196f2c=_0x46c0a1;if(_0xc3372d)lastOrders[_0x196f2c(0x15b)](_0xeea9f5,0x1);}),persistOpenOrders(lastOrders);const _0x2aa06f=coolingDown?_0x46c0a1(0x234):_0x46c0a1(0x1f7);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x51944b['includes'](![])){if(config[_0x46c0a1(0x182)]==_0x46c0a1(0x1f2)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x46c0a1(0x23a)){if(_0x51944b[_0x46c0a1(0x29a)](![])){}else{if(allOrdersPlaced){if(config[_0x46c0a1(0x182)]==_0x46c0a1(0x1f2)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x46c0a1(0x1ac))_0x51944b[_0x46c0a1(0x29a)](![])&&(config[_0x46c0a1(0x182)]==_0x46c0a1(0x1f2)?logHistory(_0x46c0a1(0x250),_0x46c0a1(0x232)+Math[_0x46c0a1(0x221)](_0x2af5e2*validateOrderInterval/0xea60)+_0x46c0a1(0x19e)+_0x2aa06f):(await cancelOrders(),logHistory(_0x46c0a1(0x250),_0x46c0a1(0x19f)+Math['round'](_0x2af5e2*validateOrderInterval/0xea60)+_0x46c0a1(0x19e)+_0x2aa06f))),await unlockOrders();else{if(validateOrdersState==_0x46c0a1(0x2a5)){if(config[_0x46c0a1(0x182)]!=_0x46c0a1(0x1f2))logHistory(_0x46c0a1(0x250),_0x46c0a1(0x1b2)+_0x2aa06f);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x3896b7=>{const _0x2b89f8=_0x52cc;try{const _0x5c1d55=await exchange[_0x2b89f8(0x1f0)](_0x3896b7[_0x2b89f8(0x269)],_0x3896b7[_0x2b89f8(0x131)]);}catch(_0x4636ed){if(_0x4636ed[_0x2b89f8(0x2af)]()[_0x2b89f8(0x29a)](_0x2b89f8(0x1c7))){}else await handleError(_0x4636ed,'cancelOrders()');}});}async function initCoinResults(_0x476caf){const _0x55737f=_0x58b3d8;_0x476caf?logger[_0x55737f(0x1d4)](_0x55737f(0x205)+_0x476caf):logger[_0x55737f(0x1d4)](_0x55737f(0x285)),config[_0x55737f(0x1e7)][_0x55737f(0x2be)](_0xbc7993=>{const _0x2b1ef7=_0x55737f;if(!_0xbc7993['excluded']&&_0xbc7993[_0x2b1ef7(0x2ba)]!=config[_0x2b1ef7(0x174)]){const _0xd3cc91=currentCoins['find'](_0x3899b6=>_0x3899b6[_0x2b1ef7(0x2ba)]==_0xbc7993[_0x2b1ef7(0x2ba)]),_0x589b53=global[_0x2b1ef7(0x1fd)][noslash(_0xbc7993[_0x2b1ef7(0x131)])];let _0x313e24=_0xd3cc91?_0xd3cc91[_0x2b1ef7(0x275)]:null,_0x1a0ace=_0xbc7993[_0x2b1ef7(0x14f)]?0x1/_0x589b53:_0x589b53,_0x703572;config[_0x2b1ef7(0x29f)][_0x2b1ef7(0x2be)](_0x46ddaa=>{const _0x4f7eee=_0x2b1ef7;!_0x703572&&(_0x703572=_0x46ddaa['changes'][_0x4f7eee(0x1e4)](_0x583d3c=>_0x583d3c[_0x4f7eee(0x2ba)]==_0xbc7993[_0x4f7eee(0x2ba)]),_0x703572&&(_0x313e24=_0x703572[_0x4f7eee(0x275)],_0x1a0ace=_0x703572[_0x4f7eee(0x20e)]));});let _0x2dd13e=dbCoinResults[_0x2b1ef7(0x1c2)](_0x2b1ef7(0x141))[_0x2b1ef7(0x1e4)]({'coin':_0xbc7993[_0x2b1ef7(0x2ba)]})[_0x2b1ef7(0x1d3)]();if(!_0x2dd13e){const _0x4097f1={'coin':_0xbc7993[_0x2b1ef7(0x2ba)],'number':_0x313e24,'breakeven':_0x1a0ace,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2b1ef7(0x1c2)]('coins')[_0x2b1ef7(0x1ad)](_0x4097f1)[_0x2b1ef7(0x194)]();}else{if(_0x476caf&&_0xbc7993[_0x2b1ef7(0x2ba)]==_0x476caf){const _0x192d4e={'coin':_0xbc7993[_0x2b1ef7(0x2ba)],'number':_0x313e24,'breakeven':_0x1a0ace,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x2b1ef7(0x141))[_0x2b1ef7(0x1e4)]({'coin':_0xbc7993[_0x2b1ef7(0x2ba)]})[_0x2b1ef7(0x2b7)](_0x192d4e)[_0x2b1ef7(0x194)]();}}}});}async function updateCoinResults(_0x30d8ed,_0xf3a2fe=![]){const _0x4babc2=_0x58b3d8;let _0x404d64,_0x5bb008,_0x1531a4,_0x361fcf,_0xbf92a8,_0x522b33,_0x4a1e34=dbCoinResults[_0x4babc2(0x1c2)]('coins')[_0x4babc2(0x1e4)]({'coin':_0x30d8ed[_0x4babc2(0x2ba)]})[_0x4babc2(0x1d3)](),_0x5b9840=![];_0x4a1e34&&Object[_0x4babc2(0x171)](_0x4a1e34)[_0x4babc2(0x2be)](([_0x3916f6,_0xd19b55])=>{if(_0xd19b55==null)_0x5b9840=!![];});(!_0x4a1e34||_0x5b9840)&&(await initCoinResults(_0x30d8ed[_0x4babc2(0x2ba)]),_0x4a1e34=dbCoinResults[_0x4babc2(0x1c2)](_0x4babc2(0x141))[_0x4babc2(0x1e4)]({'coin':_0x30d8ed[_0x4babc2(0x2ba)]})[_0x4babc2(0x1d3)]());_0x30d8ed['reverse']&&(_0x522b33={'filled':_0x30d8ed[_0x4babc2(0x296)]*_0x30d8ed[_0x4babc2(0x20e)],'amount':_0x30d8ed[_0x4babc2(0x296)]*_0x30d8ed[_0x4babc2(0x20e)],'side':_0x30d8ed[_0x4babc2(0x252)]==_0x4babc2(0x240)?_0x4babc2(0x251):_0x4babc2(0x240),'price':0x1/_0x30d8ed['price']},_0x30d8ed={..._0x30d8ed,..._0x522b33});_0xf3a2fe?_0x5bb008=_0x30d8ed[_0x4babc2(0x252)]==_0x4babc2(0x251)?_0x4a1e34[_0x4babc2(0x275)]+_0x30d8ed['filled']:_0x4a1e34['number']-_0x30d8ed['filled']:_0x5bb008=await getCoinNumber(_0x30d8ed['coin']);if(_0x30d8ed['fee']&&_0x30d8ed['fee'][_0x4babc2(0x283)]==config[_0x4babc2(0x174)])_0x404d64=_0x30d8ed[_0x4babc2(0x1b8)][_0x4babc2(0x13e)];else{if(_0x30d8ed[_0x4babc2(0x1b8)]&&_0x30d8ed['fee'][_0x4babc2(0x283)]=='BNB'&&!_0xf3a2fe)_0x404d64=_0x30d8ed[_0x4babc2(0x1b8)][_0x4babc2(0x13e)]*global[_0x4babc2(0x1fd)][_0x4babc2(0x162)+config['basecoin']];else _0x404d64=defaultFee*_0x30d8ed['filled']*_0x30d8ed['price'];}_0x30d8ed['side']=='buy'?(_0x1531a4=_0x5bb008!=0x0?(_0x4a1e34[_0x4babc2(0x245)]*_0x4a1e34['number']+_0x30d8ed[_0x4babc2(0x20e)]*(_0x5bb008-_0x4a1e34[_0x4babc2(0x275)])+_0x404d64)/_0x5bb008:0x0,_0x361fcf=_0x4a1e34['realized']):(_0x1531a4=_0x5bb008!=0x0?(_0x4a1e34['breakeven']*_0x4a1e34[_0x4babc2(0x275)]-_0x30d8ed[_0x4babc2(0x20e)]*(_0x4a1e34['number']-_0x5bb008)+_0x404d64)/_0x5bb008:0x0,_0x361fcf=_0x4a1e34[_0x4babc2(0x2bb)]+(_0x30d8ed[_0x4babc2(0x20e)]-_0x4a1e34['breakeven'])*_0x30d8ed[_0x4babc2(0x296)]);_0xbf92a8=(_0x30d8ed[_0x4babc2(0x20e)]-_0x1531a4-_0x404d64/_0x30d8ed[_0x4babc2(0x296)])*_0x5bb008;let _0x281fbc={'coin':_0x30d8ed[_0x4babc2(0x2ba)],'number':_0x5bb008,'breakeven':formatResult(_0x1531a4,0x8),'realized':formatResult(_0x361fcf,0x8),'unrealized':formatResult(_0xbf92a8,0x8),'fees':formatResult(_0x4a1e34['fees']+_0x404d64,0x8),'sells':_0x30d8ed[_0x4babc2(0x252)]==_0x4babc2(0x240)?_0x4a1e34['sells']+0x1:_0x4a1e34[_0x4babc2(0x268)],'buys':_0x30d8ed['side']=='buy'?_0x4a1e34[_0x4babc2(0x22b)]+0x1:_0x4a1e34[_0x4babc2(0x22b)]};dbCoinResults['get'](_0x4babc2(0x141))[_0x4babc2(0x1e4)]({'coin':_0x30d8ed[_0x4babc2(0x2ba)]})[_0x4babc2(0x2b7)](_0x281fbc)['write']();if(!_0xf3a2fe){if(_0x30d8ed['fee']&&_0x30d8ed[_0x4babc2(0x1b8)]['currency']=='BNB'){const _0x2d70e5=currentCoins[_0x4babc2(0x1e4)](_0x18ce08=>_0x18ce08[_0x4babc2(0x2ba)]==_0x4babc2(0x162));if(_0x2d70e5){let _0x50fc2b=dbCoinResults[_0x4babc2(0x1c2)]('coins')[_0x4babc2(0x1e4)]({'coin':_0x4babc2(0x162)})[_0x4babc2(0x1d3)]();_0x281fbc={..._0x50fc2b,'number':_0x2d70e5['number']},dbCoinResults['get'](_0x4babc2(0x141))[_0x4babc2(0x1e4)]({'coin':_0x4babc2(0x162)})[_0x4babc2(0x2b7)](_0x281fbc)['write']();}}}}async function placeOrder(_0x3dcbe1){const _0x404f86=_0x58b3d8,_0x3dcb54=config[_0x404f86(0x182)]=='market'?'market':'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x404f86(0x14c);let _0x4f98af=![];lastOrders=[];for(const _0x5e27a5 of _0x3dcbe1){let _0x4723ee,_0x3e749f,_0x486dff,_0x1f5382,_0x3075ba,_0x4c1c43=_0x5e27a5[_0x404f86(0x131)];try{const _0x3ee855=await exchange[_0x404f86(0x1fa)](_0x4c1c43);_0x4723ee=_0x5e27a5[_0x404f86(0x14f)]?0x1/_0x5e27a5['last']:_0x5e27a5['last'],_0x3e749f=_0x3ee855[_0x404f86(0x231)],_0x486dff=_0x3ee855[_0x404f86(0x12f)];_0x5e27a5['reverse']?(_0x1f5382=_0x5e27a5[_0x404f86(0x252)]==_0x404f86(0x251)?_0x404f86(0x240):_0x404f86(0x251),_0x3075ba=Math[_0x404f86(0x286)](_0x5e27a5['trade'])/_0x4723ee):(_0x1f5382=_0x5e27a5[_0x404f86(0x252)],_0x3075ba=Math['abs'](_0x5e27a5['trade']));_0x3dcb54==_0x404f86(0x2c0)&&(config[_0x404f86(0x182)]==_0x404f86(0x2ab)&&(_0x4723ee=_0x1f5382==_0x404f86(0x251)?_0x3e749f:_0x486dff),config[_0x404f86(0x182)]==_0x404f86(0x249)&&(_0x4723ee=_0x1f5382==_0x404f86(0x251)?_0x486dff:_0x3e749f));_0x3075ba=formatResult(_0x3075ba,0x8),_0x4723ee=formatResult(_0x4723ee,0x8);const _0x113060=_0x1f5382==_0x404f86(0x240)?config[_0x404f86(0x16f)]?String[_0x404f86(0x225)]('0x'+config[_0x404f86(0x16f)])+'\x20':'':config[_0x404f86(0x24f)]?String[_0x404f86(0x225)]('0x'+config[_0x404f86(0x24f)])+'\x20':'',_0xdd7df1=_0x3dcb54=='market'?_0x404f86(0x1a9):config[_0x404f86(0x182)]==_0x404f86(0x2ab)?_0x404f86(0x1c6):_0x404f86(0x24e),_0xbe191c=(Math[_0x404f86(0x262)](Math[_0x404f86(0x20b)]()*0x35a4e900)+0x5f5e100)[_0x404f86(0x2af)]();lastOrders[_0x404f86(0x1ad)]({'customId':_0xbe191c,'symbol':_0x4c1c43,'coin':_0x5e27a5[_0x404f86(0x2ba)],'amount':_0x3075ba,'price':_0x4723ee,'side':_0x1f5382,'reverse':_0x5e27a5['reverse'],'filled':0x0});if(_0x3dcb54==_0x404f86(0x1f2))logHistory(_0x404f86(0x1b4),''+_0x113060+_0xdd7df1+_0x404f86(0x2c7)+_0x4c1c43+'\x20'+_0x1f5382+'\x20#'+formatResult(_0x3075ba,0x8)+'\x20@'+formatResult(_0x4723ee,0x8));else logHistory(_0x404f86(0x1b4),''+_0x113060+_0xdd7df1+'\x20order:\x20'+_0x4c1c43+'\x20'+_0x1f5382+'\x20#'+formatResult(_0x3075ba,0x8)+'\x20@'+formatResult(_0x4723ee,0x8));let _0x31dba3;_0x3dcb54=='market'?_0x1f5382==_0x404f86(0x251)&&[_0x404f86(0x220),_0x404f86(0x1fb),_0x404f86(0x1ab),_0x404f86(0x150),_0x404f86(0x180)][_0x404f86(0x29a)](config[_0x404f86(0x149)])?_0x31dba3=await exchange[_0x404f86(0x134)](_0x4c1c43,_0x3dcb54,_0x1f5382,_0x3075ba,_0x4723ee):_0x31dba3=await exchange['createOrder'](_0x4c1c43,_0x3dcb54,_0x1f5382,_0x3075ba,undefined):_0x31dba3=await exchange[_0x404f86(0x134)](_0x4c1c43,_0x3dcb54,_0x1f5382,_0x3075ba,_0x4723ee);logger[_0x404f86(0x1d4)](_0x404f86(0x22a)+_0x31dba3['id']+_0x404f86(0x18d)+_0xbe191c);const _0x31da63=lastOrders[_0x404f86(0x28b)]-0x1;if(_0x31da63>=0x0&&lastOrders[_0x31da63][_0x404f86(0x192)]==_0xbe191c){lastOrders[_0x31da63]['orderId']=_0x31dba3['id'];if(_0x31dba3[_0x404f86(0x154)])lastOrders[_0x31da63]['amount']=_0x31dba3[_0x404f86(0x154)];if(_0x31dba3[_0x404f86(0x20e)])lastOrders[_0x31da63][_0x404f86(0x20e)]=_0x31dba3['price'];lastOrders[_0x31da63]['fee']=_0x31dba3['fee'];}if(config[_0x404f86(0x16c)]!=0x0){let _0x88b055=null;if(cooldownTracker[_0x404f86(0x28b)]==config[_0x404f86(0x16c)]-0x1)_0x88b055=cooldownTracker[_0x404f86(0x160)]();const _0x55a879=getTimeStamp();cooldownTracker[_0x404f86(0x1ad)](_0x55a879);if(_0x88b055){const _0x2a1044=fns[_0x404f86(0x1a6)](new Date(_0x55a879),new Date(_0x88b055));if(_0x2a1044<cooldownInterval){logHistory(_0x404f86(0x1b6),'Executed\x20'+config['cooldown']+_0x404f86(0x1dd)+cooldownInterval/0x3c+_0x404f86(0x13d)+cooldownPeriod/(0xe10*0x3e8)+_0x404f86(0x199)),coolingDown=!![];break;}}}}catch(_0x586014){if(_0x586014[_0x404f86(0x2af)]()['includes'](_0x404f86(0x255)))lastOrders=lastOrders[_0x404f86(0x21a)](_0x12d2aa=>_0x12d2aa[_0x404f86(0x131)]!=_0x4c1c43),logHistory(_0x404f86(0x1b6),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4c1c43),_0x4f98af=!![];else{if(_0x586014[_0x404f86(0x2af)]()['includes'](_0x404f86(0x20d)))lastOrders=lastOrders[_0x404f86(0x21a)](_0x4697c5=>_0x4697c5[_0x404f86(0x131)]!=_0x4c1c43),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x4c1c43),_0x4f98af=!![];else{if(_0x586014[_0x404f86(0x2af)]()[_0x404f86(0x29a)](_0x404f86(0x226)))lastOrders=lastOrders[_0x404f86(0x21a)](_0xca1bab=>_0xca1bab[_0x404f86(0x131)]!=_0x4c1c43),logHistory('error',_0x404f86(0x1c9)+_0x4c1c43),logger[_0x404f86(0x1d4)](_0x586014),_0x4f98af=!![];else _0x586014[_0x404f86(0x2af)]()[_0x404f86(0x29a)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x404f86(0x21a)](_0x4ee2e1=>_0x4ee2e1[_0x404f86(0x131)]!=_0x4c1c43),logHistory(_0x404f86(0x1b6),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4c1c43),_0x4f98af=!![]):(lastOrders=lastOrders['filter'](_0x1a240a=>_0x1a240a[_0x404f86(0x131)]!=_0x4c1c43),await handleError(_0x586014,'placeOrder()',_0x4c1c43));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3132f6=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x404f86(0x133)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3b0c92=_0x404f86;validateOrders(_0x3b0c92(0x1ac));},_0x3132f6);}else unlockOrders();_0x4f98af&&config[_0x404f86(0x1af)]&&(logHistory(_0x404f86(0x1b6),_0x404f86(0x207)),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x404f86(0x250),_0x404f86(0x17e)));}else{if(coolingDown)!config[_0x404f86(0x1af)]&&logHistory(_0x404f86(0x1b6),_0x404f86(0x177));else lockOrders!=ORDERS[_0x404f86(0x22c)]&&(!config[_0x404f86(0x1af)]&&(config[_0x404f86(0x182)]==_0x404f86(0x1f2)?logHistory(_0x404f86(0x1b6),_0x404f86(0x29e)):logHistory(_0x404f86(0x1b6),_0x404f86(0x22e))));}}function persistOpenOrders(_0x37e70c){const _0x2c90e8=_0x58b3d8,_0x59a60c={...config,'openOrders':_0x37e70c};let _0x1163e2=dbConfig[_0x2c90e8(0x1c2)]('bot')['find']({'botID':botID})['value']();_0x1163e2&&dbConfig['get']('bot')[_0x2c90e8(0x1e4)]({'botID':botID})[_0x2c90e8(0x2b7)](_0x59a60c)[_0x2c90e8(0x194)]();}function restoreOrders(){const _0x4ab1b4=_0x58b3d8;let _0x17bd62;config[_0x4ab1b4(0x2bd)]&&allOpenOrders[_0x4ab1b4(0x2be)](_0x3ac455=>{const _0x4ca1f1=_0x4ab1b4,_0x5e91a3=config[_0x4ca1f1(0x2bd)][_0x4ca1f1(0x1e4)](_0x26e7b1=>_0x26e7b1[_0x4ca1f1(0x269)]==_0x3ac455['id']);_0x5e91a3&&(lastOrders[_0x4ca1f1(0x1ad)](_0x5e91a3),_0x17bd62=_0x3ac455[_0x4ca1f1(0x270)]);});if(lastOrders[_0x4ab1b4(0x28b)]>0x0){lockOrders=ORDERS[_0x4ab1b4(0x22f)],validateOrdersState=_0x4ab1b4(0x23a),allOrdersPlaced=!![];const _0x226ce6=new Date()[_0x4ab1b4(0x26f)](),_0xa09419=config[_0x4ab1b4(0x182)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x4ab1b4(0x133)]*0x3c*0x3e8;if(_0x17bd62+_0xa09419>_0x226ce6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5f37fa=_0x4ab1b4;validateOrders(_0x5f37fa(0x1ac));},_0x17bd62+_0xa09419-_0x226ce6);}else validateOrders(_0x4ab1b4(0x1ac));}}async function sendMetricsTelegram(){const _0x1542fd=_0x58b3d8;if(!coinsLoaded){process['send']({'telegrammsg':_0x1542fd(0x239)},_0x19b23b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x440059='';if(config[_0x1542fd(0x2b8)])_0x440059=_0x1542fd(0x23f)+config[_0x1542fd(0x19a)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x440059=_0x1542fd(0x298)+botID+_0x1542fd(0x1d2);const _0x57d8f6=getKPIs(_0x1542fd(0x174)),_0x2ad275=getKPIs('fiat',config[_0x1542fd(0x219)]),_0x1037ed=getKPIs(_0x1542fd(0x155)),_0x49e1b1=getKPIs(_0x1542fd(0x247),config[_0x1542fd(0x219)]);_0x440059+=_0x1542fd(0x297),_0x440059+=_0x57d8f6[_0x1542fd(0x151)]+_0x1542fd(0x2b5)+_0x57d8f6[_0x1542fd(0x1d3)]+'\x0a',_0x440059+=_0x57d8f6[_0x1542fd(0x152)]+':\x20'+_0x57d8f6[_0x1542fd(0x26b)]+'%\x0a',_0x440059+=_0x2ad275[_0x1542fd(0x151)]+_0x1542fd(0x2b5)+_0x2ad275['value']+'\x0a',_0x440059+=_0x2ad275[_0x1542fd(0x152)]+':\x20'+_0x2ad275[_0x1542fd(0x26b)]+'%\x0a',_0x440059+=_0x1037ed[_0x1542fd(0x151)]+':\x20'+_0x1037ed[_0x1542fd(0x1d3)]+'\x20('+config[_0x1542fd(0x174)]+')\x0a',_0x440059+=_0x1037ed[_0x1542fd(0x152)]+':\x20'+_0x1037ed[_0x1542fd(0x26b)]+_0x1542fd(0x1d5)+config[_0x1542fd(0x174)]+')\x0a',_0x440059+=_0x49e1b1[_0x1542fd(0x151)]+':\x20'+_0x49e1b1['value']+'\x20('+config[_0x1542fd(0x219)]+')\x0a',_0x440059+=_0x49e1b1[_0x1542fd(0x152)]+':\x20'+_0x49e1b1[_0x1542fd(0x26b)]+'%\x20('+config[_0x1542fd(0x219)]+')\x0a',_0x440059+=_0x1542fd(0x2b6),process[_0x1542fd(0x1df)]({'telegrammsg':_0x440059},_0x4c3f16=>{});}async function sendPortfolioTelegram(){const _0x40d666=_0x58b3d8;if(!coinsLoaded){process[_0x40d666(0x1df)]({'telegrammsg':_0x40d666(0x239)},_0x3e37da=>{});return;}let _0x43e5a3='';if(config[_0x40d666(0x2b8)])_0x43e5a3=_0x40d666(0x23f)+config['botname']+_0x40d666(0x258);else _0x43e5a3=_0x40d666(0x298)+botID+_0x40d666(0x258);_0x43e5a3+=_0x40d666(0x297),_0x43e5a3+=_0x40d666(0x28c),_0x43e5a3+=_0x40d666(0x276),_0x43e5a3+='-------------------------------\x0a',currentCoins[_0x40d666(0x2be)](_0x3a7814=>{const _0x3906d2=_0x40d666;_0x43e5a3+=_0x3a7814[_0x3906d2(0x2ba)][_0x3906d2(0x21d)](0x7)+'|\x20'+formatPad(_0x3a7814[_0x3906d2(0x190)],0x2,0x6)+'|\x20'+formatPad(_0x3a7814['target'],0x2,0x6)+'|\x20'+formatPad(_0x3a7814[_0x3906d2(0x185)]*0x64,0x2,0x6)+'\x0a';}),_0x43e5a3+=_0x40d666(0x2b6),process['send']({'telegrammsg':_0x43e5a3},_0x4a1bdf=>{});}function formatPad(_0x47643a,_0x26498e,_0x31854e){const _0x265875=formatResultString(_0x47643a,_0x26498e);return _0x265875?_0x265875['padStart'](_0x31854e):''['padStart'](_0x31854e);}function logHistory(_0x4fa7df,_0x1bd949,_0x1d4bc8=''){const _0x253bdc=_0x58b3d8;logger[_0x253bdc(0x1cc)](''+_0x1bd949);let _0x250533={'time':getTimeStamp(),'type':_0x4fa7df,'event':_0x1bd949};dbLogs[_0x253bdc(0x1c2)](_0x253bdc(0x1f9))['push'](_0x250533)[_0x253bdc(0x194)]();if(_0x1d4bc8=='')_0x1d4bc8=_0x1bd949;proxyEmit(_0x253bdc(0x26a),{'log':_0x250533,'summary':_0x1d4bc8}),process[_0x253bdc(0x1df)]({'telegram':{..._0x250533,'botname':config[_0x253bdc(0x19a)],'showname':config[_0x253bdc(0x2b8)]}},_0x568d5=>{});}function emitHistory(_0x37382e={}){const _0x97044f=_0x58b3d8;Object[_0x97044f(0x187)](_0x37382e)[_0x97044f(0x28b)]==0x0&&(_0x37382e={'type':[_0x97044f(0x1b4),_0x97044f(0x26a)],'event':'','page':0x1});if(_0x37382e[_0x97044f(0x168)][_0x97044f(0x29a)](_0x97044f(0x26a)))_0x37382e[_0x97044f(0x168)][_0x97044f(0x15b)](_0x37382e[_0x97044f(0x168)][_0x97044f(0x130)](_0x97044f(0x26a)),0x1,_0x97044f(0x1b6),_0x97044f(0x132),_0x97044f(0x250));if(dbLogs[_0x97044f(0x1a8)](_0x97044f(0x1f9))['value']()){let _0x27a7f2=dbLogs[_0x97044f(0x1c2)](_0x97044f(0x1f9))[_0x97044f(0x21a)](_0x2cee56=>{const _0x5e6376=_0x97044f;if(_0x37382e[_0x5e6376(0x168)][_0x5e6376(0x28b)]==0x0)return![];else return _0x37382e[_0x5e6376(0x168)][_0x5e6376(0x29a)](_0x2cee56['type']);})[_0x97044f(0x21a)](_0x221cdc=>{const _0x4c6897=_0x97044f;if(_0x37382e['event']=='')return!![];else return _0x221cdc['event'][_0x4c6897(0x140)]()[_0x4c6897(0x29a)](_0x37382e['event']['toLowerCase']());})[_0x97044f(0x266)](_0x97044f(0x273)),_0x55970e=_0x27a7f2[_0x97044f(0x1d3)]()[_0x97044f(0x28b)];_0x27a7f2=_0x27a7f2[_0x97044f(0x14f)]()['slice']((_0x37382e[_0x97044f(0x20c)]-0x1)*logPageSize,_0x37382e[_0x97044f(0x20c)]*logPageSize-0x1)['reverse']()[_0x97044f(0x1d3)](),proxyEmit(_0x97044f(0x2bc),{'logs':_0x27a7f2,'total':_0x55970e});}else proxyEmit(_0x97044f(0x2bc),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x10c7e4){const _0x25e826=_0x58b3d8;if(dbLogs[_0x25e826(0x1a8)](_0x25e826(0x1f9))[_0x25e826(0x1d3)]()){const _0x2b9bd2=dbLogs[_0x25e826(0x1c2)]('logs')[_0x25e826(0x266)]('time')[_0x25e826(0x21a)](_0xb72e7f=>{const _0x39d3a1=_0x25e826;return _0xb72e7f[_0x39d3a1(0x168)]==_0x39d3a1(0x1b4);})['value']();dbLogs[_0x25e826(0x1c2)](_0x25e826(0x1f9))[_0x25e826(0x253)]()[_0x25e826(0x194)](),dbLogs[_0x25e826(0x1c2)](_0x25e826(0x1f9))['assign'](_0x2b9bd2)[_0x25e826(0x194)](),emitHistory(_0x10c7e4);}}async function pauseBot(){const _0x2af2d5=_0x58b3d8,_0x547a4b=new Date()['getTime']();if(!lastErrorShown||_0x547a4b-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x547a4b;!lastBotPause?(lastBotPause=_0x547a4b,consecutivePauses=0x1):(_0x547a4b-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2af2d5(0x1df)]({'stop':_0x2af2d5(0x1b0)},_0x371bb6=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2af2d5(0x26f)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory('error','Pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x553e1e=_0x58b3d8;botPaused=!![],await sleep(0x3e8),process[_0x553e1e(0x1df)]({'stop':_0x553e1e(0x1dc)},_0x17d0e9=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2c7114,_0x499f26){const _0x409504=_0x58b3d8;if(botPaused)return;const _0x1fffcb=config['exchange']||_0x409504(0x147);if(_0x499f26)logger[_0x409504(0x1d4)](_0x409504(0x292)+_0x499f26);if(_0x2c7114[_0x409504(0x2af)]()[_0x409504(0x29a)](_0x409504(0x299)))logHistory(_0x409504(0x1b6),_0x1fffcb+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration');else{if(_0x2c7114[_0x409504(0x2af)]()['includes'](_0x409504(0x13a)))logHistory('error',_0x1fffcb+_0x409504(0x1b5));else _0x2c7114[_0x409504(0x2af)]()[_0x409504(0x29a)](_0x409504(0x243))?(logHistory(_0x409504(0x1b6),_0x1fffcb+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory('error',_0x409504(0x2b3))):await handleError(_0x2c7114,null);}}async function handleError(_0x180722,_0x3864a4,_0x15aab6=''){const _0x56c292=_0x58b3d8;if(botPaused)return;const _0x4c5adf=config['exchange']||_0x56c292(0x147);if(_0x3864a4)logger['debug'](_0x56c292(0x292)+_0x3864a4);if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x144))||_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x1a1)))logHistory(_0x56c292(0x1b6),_0x4c5adf+_0x56c292(0x17f)),await pauseBot();else{if(_0x180722['toString']()[_0x56c292(0x29a)](_0x56c292(0x24d))||_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x15c)))logHistory(_0x56c292(0x1b6),_0x4c5adf+_0x56c292(0x25d)),await pauseBot();else{if(_0x180722['toString']()[_0x56c292(0x29a)](_0x56c292(0x1e0)))logHistory(_0x56c292(0x1b6),_0x4c5adf+'\x20not\x20responding'),await pauseBot();else{if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x1bf)))logHistory('error',_0x4c5adf+_0x56c292(0x236)),await pauseBot();else{if(_0x180722[_0x56c292(0x2af)]()['includes'](_0x56c292(0x1b1)))logHistory(_0x56c292(0x1b6),_0x56c292(0x158)),logHistory(_0x56c292(0x1b6),_0x56c292(0x28a)),await killBot();else{if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)]('InvalidNonce'))logHistory(_0x56c292(0x1b6),_0x56c292(0x271)),logHistory('error',_0x56c292(0x28a)),await killBot();else{if(_0x180722 instanceof ccxt['NetworkError'])logHistory('error',_0x4c5adf+_0x56c292(0x163)),logger['debug']('Error\x20details:',_0x180722),await pauseBot();else{if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x299)))logHistory(_0x56c292(0x1b6),_0x4c5adf+_0x56c292(0x257)),logHistory(_0x56c292(0x1b6),_0x56c292(0x28a)),await killBot();else{if(_0x180722['toString']()[_0x56c292(0x29a)](_0x56c292(0x13a)))logHistory(_0x56c292(0x1b6),_0x4c5adf+_0x56c292(0x29b)),logHistory(_0x56c292(0x1b6),_0x56c292(0x28a)),await killBot();else{if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x243)))logHistory('error',_0x4c5adf+_0x56c292(0x15e)),logHistory('error',_0x56c292(0x28a)),await killBot();else{if(_0x180722[_0x56c292(0x2af)]()[_0x56c292(0x29a)](_0x56c292(0x212)))logHistory(_0x56c292(0x1b6),_0x56c292(0x1cd)+_0x15aab6);else _0x180722 instanceof ccxt[_0x56c292(0x1cb)]?(logHistory(_0x56c292(0x1b6),_0x4c5adf+_0x56c292(0x2b9)),logger['debug'](_0x56c292(0x142),_0x180722)):(logHistory(_0x56c292(0x1b6),'Unknown\x20error\x20occured'),logger['debug'](_0x56c292(0x142),_0x180722),await pauseBot());}}}}}}}}}}}function formatResult(_0x5cfd7a,_0x14ba28){return parseFloat(_0x5cfd7a['toFixed'](_0x14ba28));}function formatResultTruncate(_0x58410b,_0x34d56a){const _0x1679a2=_0x58b3d8;let _0x12006c=formatResultString(_0x58410b,0xa),_0x54f071=_0x12006c[_0x1679a2(0x130)]('.');return _0x54f071!=-0x1&&(_0x12006c=_0x12006c[_0x1679a2(0x24a)](0x0,_0x54f071+_0x34d56a+0x1)),Number(_0x12006c);}function formatResultString(_0x503215,_0x5544d6){const _0x128122=_0x58b3d8;let _0x4737b5;if(!(''+_0x503215)[_0x128122(0x29a)]('e'))_0x4737b5=+(Math[_0x128122(0x221)](_0x503215+'e+'+_0x5544d6)+'e-'+_0x5544d6);else{let _0x1da417=(''+_0x503215)['split']('e'),_0x404d5f='';+_0x1da417[0x1]+_0x5544d6>0x0&&(_0x404d5f='+'),_0x4737b5=+(Math['round'](+_0x1da417[0x0]+'e'+_0x404d5f+(+_0x1da417[0x1]+_0x5544d6))+'e-'+_0x5544d6);}return Number(_0x4737b5)[_0x128122(0x1c8)](_0x5544d6);}function getServerTime(){const _0x84ba09=_0x58b3d8,_0x53842e=new Date();return _0x53842e[_0x84ba09(0x1d1)]()+'/'+(_0x53842e['getMonth']()+0x1)[_0x84ba09(0x2af)]()[_0x84ba09(0x1bc)](0x2,'0')+'/'+_0x53842e[_0x84ba09(0x233)]()[_0x84ba09(0x2af)]()[_0x84ba09(0x1bc)](0x2,'0')+'\x20'+_0x53842e['getHours']()[_0x84ba09(0x2af)]()['padStart'](0x2,'0')+':'+_0x53842e[_0x84ba09(0x259)]()[_0x84ba09(0x2af)]()[_0x84ba09(0x1bc)](0x2,'0')+':'+_0x53842e['getSeconds']()[_0x84ba09(0x2af)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4bd7e5=_0x58b3d8,_0x260d4a=shiftedTime();return _0x260d4a[_0x4bd7e5(0x1d1)]()+'/'+(_0x260d4a[_0x4bd7e5(0x181)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x260d4a['getDate']()[_0x4bd7e5(0x2af)]()[_0x4bd7e5(0x1bc)](0x2,'0')+'\x20'+_0x260d4a[_0x4bd7e5(0x1a4)]()[_0x4bd7e5(0x2af)]()[_0x4bd7e5(0x1bc)](0x2,'0')+':'+_0x260d4a[_0x4bd7e5(0x259)]()[_0x4bd7e5(0x2af)]()[_0x4bd7e5(0x1bc)](0x2,'0')+':'+_0x260d4a[_0x4bd7e5(0x189)]()[_0x4bd7e5(0x2af)]()[_0x4bd7e5(0x1bc)](0x2,'0');}function getDate(){const _0x5bb6ed=_0x58b3d8,_0x3dc718=shiftedTime();return _0x3dc718[_0x5bb6ed(0x1d1)]()+'/'+(_0x3dc718[_0x5bb6ed(0x181)]()+0x1)['toString']()[_0x5bb6ed(0x1bc)](0x2,'0')+'/'+_0x3dc718[_0x5bb6ed(0x233)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x1756b9=_0x58b3d8,_0x312fec=shiftedTime();return _0x312fec[_0x1756b9(0x1a4)]()[_0x1756b9(0x2af)]()[_0x1756b9(0x1bc)](0x2,'0');}function sleep(_0x35b37e){return new Promise(_0x4eb9be=>setTimeout(_0x4eb9be,_0x35b37e));}function shiftedTime(){const _0x5d7576=_0x58b3d8,_0x3cc0a8=new Date();let _0xb96532=_0x3cc0a8;if(config&&config['timeshift']!==0x0)_0xb96532=fns['add'](_0x3cc0a8,{'hours':config[_0x5d7576(0x20a)]});return _0xb96532;}function timer(_0x7c477a){const _0xab5f7=_0x58b3d8,_0x25e8f3=new Date();!lasttime?console['log'](getTimeStamp()+_0xab5f7(0x228),_0x7c477a,_0x25e8f3):console[_0xab5f7(0x2b2)](getTimeStamp()+':\x20timer\x20>',_0x7c477a,(_0x25e8f3-lasttime)/0x3e8),lasttime=_0x25e8f3;}