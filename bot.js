const _0x4ea7c4=_0x4350;(function(_0x54177b,_0x1782f5){const _0x4cf7ed=_0x4350,_0x51b6ac=_0x54177b();while(!![]){try{const _0x4a1a3b=-parseInt(_0x4cf7ed(0x21f))/0x1*(parseInt(_0x4cf7ed(0x181))/0x2)+parseInt(_0x4cf7ed(0x163))/0x3+-parseInt(_0x4cf7ed(0x234))/0x4+parseInt(_0x4cf7ed(0x1ea))/0x5*(parseInt(_0x4cf7ed(0x1bf))/0x6)+parseInt(_0x4cf7ed(0x174))/0x7*(-parseInt(_0x4cf7ed(0x216))/0x8)+parseInt(_0x4cf7ed(0x183))/0x9+parseInt(_0x4cf7ed(0x1f9))/0xa*(-parseInt(_0x4cf7ed(0x27f))/0xb);if(_0x4a1a3b===_0x1782f5)break;else _0x51b6ac['push'](_0x51b6ac['shift']());}catch(_0x2f8a06){_0x51b6ac['push'](_0x51b6ac['shift']());}}}(_0x552e,0xb2279));const _0x29e40b=function(){let _0x47016e=!![];return function(_0x13117c,_0x2cb4b1){const _0x33a794=_0x47016e?function(){if(_0x2cb4b1){const _0x4b289e=_0x2cb4b1['apply'](_0x13117c,arguments);return _0x2cb4b1=null,_0x4b289e;}}:function(){};return _0x47016e=![],_0x33a794;};}(),_0x7c9d37=_0x29e40b(this,function(){const _0x4bf94e=_0x4350;return _0x7c9d37[_0x4bf94e(0x184)]()[_0x4bf94e(0x281)](_0x4bf94e(0x1cf))[_0x4bf94e(0x184)]()['constructor'](_0x7c9d37)[_0x4bf94e(0x281)](_0x4bf94e(0x1cf));});_0x7c9d37();'use strict';const ccxt=require(_0x4ea7c4(0x200)),low=require(_0x4ea7c4(0x1b6)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x4ea7c4(0x1a2)],util=require(_0x4ea7c4(0x264)),argv=require(_0x4ea7c4(0x21e))(process['argv'][_0x4ea7c4(0x172)](0x2))['argv'],path=require(_0x4ea7c4(0x243));let exchange;global['ticker']={},global[_0x4ea7c4(0x1c9)]={};const usdBasecoins=[_0x4ea7c4(0x1ab),_0x4ea7c4(0x228),_0x4ea7c4(0x249),_0x4ea7c4(0x164),_0x4ea7c4(0x247),_0x4ea7c4(0x2a4)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4ea7c4(0x1af)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4ea7c4(0x27c)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x4ea7c4(0x16d)+pauseBotInterval/0xea60+_0x4ea7c4(0x272),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x4ea7c4(0x25d))['version'],botID=process[_0x4ea7c4(0x269)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x4ea7c4(0x18b)+botID+_0x4ea7c4(0x177)),killBot());const userID=process[_0x4ea7c4(0x269)][0x3]||'',configpath=userID?_0x4ea7c4(0x1c0)+userID+'/':_0x4ea7c4(0x1c0),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+_0x4ea7c4(0x1b3),{'flags':'a'});!fs[_0x4ea7c4(0x2c6)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x4ea7c4(0x2c6)](logspath)&&fs[_0x4ea7c4(0x1d4)](logspath);const configfile=configpath+'bot-'+botID+_0x4ea7c4(0x1d6),logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x4ea7c4(0x1bc)+botID+'-performance.json',coinresultsfile=configpath+_0x4ea7c4(0x1bc)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4ea7c4(0x1f8),configbackuppath=configpath+_0x4ea7c4(0x21a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4ea7c4(0x182)]({'data':[],'version':serverversion})[_0x4ea7c4(0x136)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4ea7c4(0x182)]({'bot':[],'version':serverversion})[_0x4ea7c4(0x136)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4ea7c4(0x182)]({'coins':[],'version':serverversion})[_0x4ea7c4(0x136)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4ea7c4(0x219),'rsaStandard':_0x4ea7c4(0x14a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x38db81=>{const _0x2737d6=_0x4ea7c4;console[_0x2737d6(0x21b)](_0x38db81);},'simple':_0x3c7844=>{const _0x4514b9=_0x4ea7c4;console[_0x4514b9(0x21b)](_0x3c7844),loggerfile[_0x4514b9(0x136)](util[_0x4514b9(0x2b0)](_0x3c7844)+'\x0a');},'full':async(_0x5c623d,_0x422f80='')=>{const _0x4e5556=_0x4ea7c4;let _0x20495c;if(config[_0x4e5556(0x1c1)])_0x20495c=getTimeStamp()+':\x20'+config['botname']+_0x4e5556(0x140)+_0x5c623d;else _0x20495c=getTimeStamp()+_0x4e5556(0x2c7)+botID+_0x4e5556(0x140)+_0x5c623d;console[_0x4e5556(0x21b)](_0x20495c),loggerfile['write'](util['format'](_0x20495c)+'\x0a'),_0x422f80&&(console['log'](_0x422f80),loggerfile[_0x4e5556(0x136)](util[_0x4e5556(0x2b0)](_0x422f80)+'\x0a'));},'debug':async(_0x151c6c,_0x24302b='')=>{const _0x4fd9f1=_0x4ea7c4;let _0x324947;if(config[_0x4fd9f1(0x1c1)])_0x324947=getTimeStamp()+':\x20'+config[_0x4fd9f1(0x16e)]+_0x4fd9f1(0x20b)+_0x151c6c;else _0x324947=getTimeStamp()+_0x4fd9f1(0x2c7)+botID+_0x4fd9f1(0x20b)+_0x151c6c;if(debugging)console[_0x4fd9f1(0x21b)](_0x324947);loggerfile[_0x4fd9f1(0x136)](util[_0x4fd9f1(0x2b0)](_0x324947)+'\x0a');if(_0x24302b){if(debugging)console['log'](_0x24302b);loggerfile[_0x4fd9f1(0x136)](util[_0x4fd9f1(0x2b0)](_0x24302b)+'\x0a');}}};process['on']('uncaughtException',function(_0x5408c3){const _0x27fc1f=_0x4ea7c4;logHistory(_0x27fc1f(0x23c),_0x27fc1f(0x273)),logger[_0x27fc1f(0x255)](_0x27fc1f(0x241),_0x5408c3);});settings['timeshift']!=config[_0x4ea7c4(0x29f)]&&updateTimeshift(settings['timeshift']);settings[_0x4ea7c4(0x288)]!=config[_0x4ea7c4(0x288)]&&updateOnepagemode(settings['onepagemode']);process['send']({'started':'running'},_0x4a7eb3=>{}),initializeProcessListeners();function proxyEmit(_0x58af06,_0x476f12=null){const _0x42cef5=_0x4ea7c4;process[_0x42cef5(0x1ba)]({'function':_0x58af06,'args':_0x476f12},_0x588f4c=>{});}function initializeProcessListeners(){const _0x3c2305=_0x4ea7c4;process['on'](_0x3c2305(0x227),_0x269ad9=>{const _0x1e5e11=_0x3c2305;switch(Object['keys'](_0x269ad9)[0x0]){case _0x1e5e11(0x29f):_0x269ad9['timeshift']!=undefined&&(settings[_0x1e5e11(0x29f)]=_0x269ad9[_0x1e5e11(0x29f)],updateTimeshift(settings['timeshift']));break;case _0x1e5e11(0x288):_0x269ad9['onepagemode']!=undefined&&(settings['onepagemode']=_0x269ad9[_0x1e5e11(0x288)],updateOnepagemode(settings['onepagemode']));break;case _0x1e5e11(0x1e6):_0x269ad9[_0x1e5e11(0x1e6)]!=undefined&&(bots=JSON[_0x1e5e11(0x199)](_0x269ad9['bots']),proxyEmit(_0x1e5e11(0x1e6),bots));break;case'function':switch(_0x269ad9[_0x1e5e11(0x14f)]){case _0x1e5e11(0x230):initclient();break;case _0x1e5e11(0x262):toggleBotMode();break;case _0x1e5e11(0x2d1):emitHistory(_0x269ad9['args']);break;case _0x1e5e11(0x2a6):deleteHistoryAlerts(_0x269ad9[_0x1e5e11(0x1d9)]);break;case _0x1e5e11(0x2a9):getPortfolio(_0x269ad9[_0x1e5e11(0x1d9)]);break;case _0x1e5e11(0x2c0):storeConfiguration(_0x269ad9[_0x1e5e11(0x1d9)]);break;case _0x1e5e11(0x2cc):storeHeadless(_0x269ad9[_0x1e5e11(0x1d9)]);break;case _0x1e5e11(0x18d):storeFiat(_0x269ad9['args']);break;case _0x1e5e11(0x168):resetHistory();break;case _0x1e5e11(0x167):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x269ad9[_0x1e5e11(0x1d9)]);break;case'cancelLoading':cancelLoading();break;case _0x1e5e11(0x19a):showConfig();break;case _0x1e5e11(0x2cf):sendMetricsTelegram();break;case _0x1e5e11(0x271):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5f0da4=![]){const _0x64c7f2=_0x4ea7c4;logger[_0x64c7f2(0x255)](_0x64c7f2(0x1d1)+(_0x5f0da4?_0x64c7f2(0x22c):_0x64c7f2(0x223))+_0x64c7f2(0x19e)+config[_0x64c7f2(0x1ff)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5f0da4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x64c7f2(0x289)]!=''&&config['apiKey']!=_0x64c7f2(0x28c)){loadingProgress=0x0;if(_0x5f0da4){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x459788){handleErrorNoStop(_0x459788,_0x64c7f2(0x270));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1cf4fb=await getCoins();[currentCoins,currentCoinsAll]=_0x1cf4fb,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x64c7f2(0x255)](_0x64c7f2(0x24b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x64c7f2(0x224)]==0x0&&allOpenOrders[_0x64c7f2(0x224)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1fa70d=_0x4ea7c4;exchangeStopped=!![];try{await exchange[_0x1fa70d(0x16c)]();}catch(_0x5e1d18){await handleError(_0x5e1d18,_0x1fa70d(0x285));}}async function reloadExchange(){const _0x467f6b=_0x4ea7c4;while(lockOrders!=ORDERS[_0x467f6b(0x27c)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x467f6b(0x255)](_0x467f6b(0x22b)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x2381f=config[_0x4ea7c4(0x1ff)],_0x3deeac=config[_0x4ea7c4(0x289)],_0x1b1ecb=config[_0x4ea7c4(0x218)],_0x3785f8=config[_0x4ea7c4(0x18c)]){const _0x52194d=_0x4ea7c4;exchange&&await stopExchange();!supportedExchanges()[_0x52194d(0x150)](_0x2381f)&&(logHistory(_0x52194d(0x23c),_0x52194d(0x1c3)+_0x2381f+_0x52194d(0x1d2)),killBot());const _0x55e356=ccxt[_0x52194d(0x251)][_0x2381f[_0x52194d(0x195)]()];exchange=new _0x55e356({'apiKey':_0x3deeac,'secret':_0x1b1ecb,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3785f8)exchange[_0x52194d(0x1b2)]=_0x3785f8;}function setStableCoins(){const _0x3f450d=_0x4ea7c4;let _0x1c1bb5=config[_0x3f450d(0x138)]==_0x3f450d(0x297)?_0x3f450d(0x297):_0x3f450d(0x245),_0x4ca072=!allSymbols[_0x3f450d(0x150)](_0x1c1bb5+_0x3f450d(0x15e))?'USDT':_0x3f450d(0x1ab),_0x598915=!allSymbols[_0x3f450d(0x150)](_0x1c1bb5+_0x3f450d(0x1d3))?_0x4ca072:_0x3f450d(0x15f);stablecoins={'eur':{'coin':''+_0x1c1bb5+_0x598915,'symbol':_0x1c1bb5+'/'+_0x598915},'usd':{'coin':''+_0x1c1bb5+_0x4ca072,'symbol':_0x1c1bb5+'/'+_0x4ca072}};}async function initwsCcxt(){const _0x1ab4b6=_0x4ea7c4;initCycle++;const _0x29529e=initCycle;let _0x123f79=[];config[_0x1ab4b6(0x132)][_0x1ab4b6(0x267)](_0x15c872=>{const _0x488b44=_0x1ab4b6;if(!_0x15c872['excluded']&&_0x15c872[_0x488b44(0x1ae)]!=config[_0x488b44(0x138)])_0x123f79['push'](_0x15c872[_0x488b44(0x1ca)]);});if(!_0x123f79[_0x1ab4b6(0x150)](stablecoins[_0x1ab4b6(0x238)][_0x1ab4b6(0x1ca)]))_0x123f79[_0x1ab4b6(0x1b1)](stablecoins[_0x1ab4b6(0x238)][_0x1ab4b6(0x1ca)]);if(!_0x123f79['includes'](stablecoins[_0x1ab4b6(0x2d5)]['symbol']))_0x123f79[_0x1ab4b6(0x1b1)](stablecoins['usd'][_0x1ab4b6(0x1ca)]);if(config[_0x1ab4b6(0x1ff)][_0x1ab4b6(0x290)](_0x1ab4b6(0x2b7))){if(!_0x123f79[_0x1ab4b6(0x150)](_0x1ab4b6(0x185)+config[_0x1ab4b6(0x138)]))_0x123f79[_0x1ab4b6(0x1b1)]('BNB/'+config['basecoin']);}loadCoins(_0x123f79),_0x123f79=validateSymbols(_0x123f79);const _0x3a23df=async _0x59abfe=>{const _0x5f3991=_0x1ab4b6;let _0x33d40e;try{const _0x1e5267=await getTickers(_0x59abfe);Object[_0x5f3991(0x187)](_0x1e5267)['forEach'](_0x401b80=>{const _0x517e64=_0x5f3991;_0x33d40e=_0x401b80[0x1]['symbol'],global[_0x517e64(0x1c8)][noslash(_0x33d40e)]=_0x401b80[0x1][_0x517e64(0x198)],global['change'][_0x33d40e]=_0x401b80[0x1][_0x517e64(0x16f)];});}catch(_0x29556d){await handleError(_0x29556d,_0x5f3991(0x2af),_0x33d40e);}},_0x2e2694=async _0x5a3470=>{const _0x26cc3e=_0x1ab4b6;while(initCycle==_0x29529e){if(!botPaused)try{const _0x16ff52=await exchange[_0x26cc3e(0x1f0)](_0x5a3470);global[_0x26cc3e(0x1c8)][noslash(_0x16ff52[0x0][_0x26cc3e(0x1ca)])]=_0x16ff52[0x0][_0x26cc3e(0x1a5)],await sleep(0x3e8);}catch(_0x249972){if(!exchangeStopped)await handleError(_0x249972,_0x26cc3e(0x1a3),_0x5a3470);}else await sleep(0x64);}},_0x1eb04c=async _0x1dac7c=>{const _0x130dd6=_0x1ab4b6;while(initCycle==_0x29529e){if(!botPaused){let _0x4f04e2;try{await sleep(0x3c*0x3e8);const _0x546b05=await getTickers(_0x1dac7c);Object['entries'](_0x546b05)[_0x130dd6(0x267)](_0x11f3b8=>{const _0x5b435f=_0x130dd6;_0x4f04e2=_0x11f3b8[0x1][_0x5b435f(0x1ca)],global['change'][_0x4f04e2]=_0x11f3b8[0x1][_0x5b435f(0x16f)];});}catch(_0x27e837){if(!exchangeStopped)await handleError(_0x27e837,_0x130dd6(0x207),_0x4f04e2);}}else await sleep(0x64);}},_0x226652=async _0x115d6d=>{const _0x5b68d9=_0x1ab4b6;while(initCycle==_0x29529e){if(!botPaused)try{const _0x24b9d5=await exchange[_0x5b68d9(0x2b5)](_0x115d6d);initCycle==_0x29529e&&_0x24b9d5[_0x5b68d9(0x267)](_0x1ec427=>{updateNumberCoinsCcxt(_0x1ec427);});}catch(_0x3a0d75){if(!exchangeStopped)await handleError(_0x3a0d75,_0x5b68d9(0x1bb));}else await sleep(0x64);}};_0x3a23df(_0x123f79),_0x1eb04c(_0x123f79),_0x123f79[_0x1ab4b6(0x267)](_0x44e860=>{_0x2e2694(_0x44e860),_0x226652(_0x44e860);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5492d2){const _0x40a970=_0x4ea7c4;let _0x5c8619={};try{if(config[_0x40a970(0x1ff)]!='Cryptocom')_0x5c8619=await exchange[_0x40a970(0x294)](_0x5492d2);else for(const _0x375e05 of _0x5492d2){const _0x82a36f=await exchange[_0x40a970(0x235)](_0x375e05);_0x5c8619[_0x375e05]=_0x82a36f;}return _0x5c8619;}catch(_0x2471d0){throw _0x2471d0;}}async function watchTransactions(){const _0x15e92a=_0x4ea7c4;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x21dcd2=await getCoins(),[_0x3a43d3,_0x28d8d5]=_0x21dcd2;let _0x34d7c5=[];currentCoins[_0x15e92a(0x267)](_0x342476=>{const _0x443432=_0x15e92a,_0x44b938=_0x3a43d3[_0x443432(0x1f7)](_0x39ea23=>_0x39ea23[_0x443432(0x1ae)]==_0x342476[_0x443432(0x1ae)]);if(_0x44b938){if(_0x342476[_0x443432(0x1f2)]!=_0x44b938[_0x443432(0x1f2)]){let _0x4b81f5;if(_0x342476[_0x443432(0x1ae)]!=config[_0x443432(0x138)]){const _0x3cc082=global['ticker'][noslash(_0x342476['symbol'])];_0x4b81f5=_0x342476['reverse']?0x1/_0x3cc082:_0x3cc082;}else _0x4b81f5=0x1;_0x34d7c5[_0x443432(0x1b1)]({'coin':_0x342476[_0x443432(0x1ae)],'symbol':_0x342476[_0x443432(0x1ca)],'price':_0x4b81f5,'number':Number(formatResult(_0x44b938[_0x443432(0x1f2)]-_0x342476[_0x443432(0x1f2)],0x8)),'basecoinvalue':_0x4b81f5*(_0x44b938['number']-_0x342476['number'])});}}});if(_0x34d7c5['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x15e92a(0x255)](_0x15e92a(0x27b)+_0x34d7c5[0x0]['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x15e92a(0x146)](_0x34d7c5[0x0][_0x15e92a(0x275)])>lastFees['highest']){delete _0x34d7c5[0x0][_0x15e92a(0x1ca)],delete _0x34d7c5[0x0][_0x15e92a(0x275)];let _0x2a2b5c=[],_0xd75774=[...config[_0x15e92a(0x1f3)]]||[],_0x4d72e4=config[_0x15e92a(0x1f3)];_0xd75774[_0x15e92a(0x156)]((_0x3297cd,_0x1ee659)=>_0x3297cd[_0x15e92a(0x292)]>_0x1ee659['date']?-0x1:_0x1ee659[_0x15e92a(0x292)]>_0x3297cd[_0x15e92a(0x292)]?0x1:0x0);const _0x5935f0=getDate();if(_0xd75774[0x0]){const _0x5eef44=fns[_0x15e92a(0x199)](_0xd75774[0x0][_0x15e92a(0x292)],_0x15e92a(0x21c),new Date()),_0x4fe6d5=fns['parse'](_0x5935f0,'yyyy/MM/dd',new Date());if(fns[_0x15e92a(0x1a4)](_0x5eef44,_0x4fe6d5)){_0x2a2b5c=_0xd75774[0x0][_0x15e92a(0x22f)];const _0x33a5af=_0x2a2b5c[_0x15e92a(0x1f7)](_0x533ec6=>_0x533ec6[_0x15e92a(0x1ae)]==_0x34d7c5[0x0][_0x15e92a(0x1ae)]);_0x33a5af?(_0x33a5af[_0x15e92a(0x1f2)]+=_0x34d7c5[0x0][_0x15e92a(0x1f2)],_0x33a5af[_0x15e92a(0x1f2)]==0x0&&(_0x2a2b5c=_0x2a2b5c[_0x15e92a(0x253)](_0x2de8bf=>{const _0x50c98f=_0x15e92a;return _0x2de8bf[_0x50c98f(0x1ae)]!=_0x34d7c5[0x0][_0x50c98f(0x1ae)];}))):_0x2a2b5c[_0x15e92a(0x1b1)](_0x34d7c5[0x0]);const _0x254de1=_0x4d72e4['find'](_0x45ea3b=>_0x45ea3b[_0x15e92a(0x292)]==_0x5935f0);_0x254de1[_0x15e92a(0x22f)]=_0x2a2b5c;}else _0x4d72e4[_0x15e92a(0x1b1)]({'date':_0x5935f0,'changes':[_0x34d7c5[0x0]]});}const _0x221bfe=_0x4d72e4[_0x15e92a(0x1f7)](_0x578b2a=>_0x578b2a[_0x15e92a(0x292)]==_0x5935f0);if(_0x221bfe){let _0x1972c7=!![];_0x221bfe[_0x15e92a(0x22f)][_0x15e92a(0x267)](_0x1a316a=>{const _0x4fdd99=_0x15e92a;if(_0x1a316a[_0x4fdd99(0x1f2)]!=0x0)_0x1972c7=![];}),_0x1972c7&&(_0x4d72e4=_0x4d72e4[_0x15e92a(0x253)](_0x2dd053=>{return _0x2dd053['date']!=_0x5935f0;}));}let _0x53f779=dbConfig[_0x15e92a(0x1c7)](_0x15e92a(0x15d))[_0x15e92a(0x1f7)]({'botID':botID})[_0x15e92a(0x2c4)]();_0x53f779&&(dbConfig[_0x15e92a(0x1c7)](_0x15e92a(0x15d))[_0x15e92a(0x1f7)]({'botID':botID})[_0x15e92a(0x217)]({'liquidity':_0x4d72e4})['write'](),config[_0x15e92a(0x1f3)]=_0x4d72e4),logHistory(_0x15e92a(0x25f),_0x15e92a(0x287)+Math[_0x15e92a(0x146)](_0x34d7c5[0x0][_0x15e92a(0x1f2)])+'\x20'+_0x34d7c5[0x0]['coin']+'\x20'+(_0x34d7c5[0x0][_0x15e92a(0x1f2)]>0x0?'added':_0x15e92a(0x2b4))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x15e92a(0x278),emittedConfiguration());}else logger[_0x15e92a(0x255)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x15e92a(0x146)](_0x34d7c5[0x0]['number'])+'\x20'+_0x34d7c5[0x0][_0x15e92a(0x1ae)]+'\x20'+(_0x34d7c5[0x0][_0x15e92a(0x1f2)]>0x0?_0x15e92a(0x179):_0x15e92a(0x2b4)));transactionDetected=!![];}else logger[_0x15e92a(0x255)](_0x15e92a(0x287)+Math[_0x15e92a(0x146)](_0x34d7c5[0x0]['number'])+'\x20'+_0x34d7c5[0x0][_0x15e92a(0x1ae)]+'\x20'+(_0x34d7c5[0x0]['number']>0x0?_0x15e92a(0x179):_0x15e92a(0x2b4))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x3a43d3,currentCoinsAll=_0x28d8d5,await sleep(watchTransactionsInterval);}catch(_0x1f2e11){if(!exchangeStopped)await handleError(_0x1f2e11,_0x15e92a(0x29c));}else await sleep(0x64);}}async function loadSymbols(){const _0xc283e8=_0x4ea7c4;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0xc283e8(0x187)](markets)['forEach'](_0x1d953c=>{const _0x37b0f3=_0xc283e8;_0x1d953c[0x1][_0x37b0f3(0x1ef)]&&_0x1d953c[0x1][_0x37b0f3(0x211)]&&allSymbols[_0x37b0f3(0x1b1)](_0x1d953c[0x0]);});}catch(_0x10b4ee){throw _0x10b4ee;}}function validateSymbols(_0x333d9a){const _0x27493d=_0x4ea7c4;let _0x3c2f8a=[];return _0x333d9a[_0x27493d(0x267)](_0x11a9ce=>{const _0x2a95cb=_0x27493d;!allSymbols[_0x2a95cb(0x150)](_0x11a9ce)?logHistory(_0x2a95cb(0x23c),_0x2a95cb(0x180)+_0x11a9ce+_0x2a95cb(0x190)):_0x3c2f8a[_0x2a95cb(0x1b1)](_0x11a9ce);}),_0x3c2f8a;}async function initclient(){const _0x4e9c93=_0x4ea7c4;proxyEmit(_0x4e9c93(0x278),emittedConfiguration()),proxyEmit(_0x4e9c93(0x2ce),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4e9c93(0x2cb),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x25be89=getNormalizedPerformance();emitPerformance(_0x25be89),getStartingBalances(_0x25be89);}async function toggleBotMode(){const _0x4f9dfb=_0x4ea7c4;let _0x148907=dbConfig['get'](_0x4f9dfb(0x15d))[_0x4f9dfb(0x1f7)]({'botID':botID})[_0x4f9dfb(0x2c4)]();if(_0x148907){const _0x474d73=!_0x148907['headless'];dbConfig['get'](_0x4f9dfb(0x15d))[_0x4f9dfb(0x1f7)]({'botID':botID})[_0x4f9dfb(0x217)]({'headless':_0x474d73})['write'](),config[_0x4f9dfb(0x1f5)]=_0x474d73,proxyEmit(_0x4f9dfb(0x278),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x339a59=_0x4ea7c4;process[_0x339a59(0x1ba)]({'updatebotmanager':!![]},_0x5b5b9d=>{}),logger[_0x339a59(0x255)](_0x339a59(0x188)+config[_0x339a59(0x1f5)]);}async function loadCoins(_0x45f352){const _0x51978c=_0x4ea7c4;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xd6f18b,_0x2ca4e1=0x0,_0x535f=0x0;_0x45f352[_0x51978c(0x267)](_0x6d8bac=>{const _0x46cc82=_0x51978c;loading[_0x46cc82(0x236)][_0x46cc82(0x1b1)](_0x6d8bac);}),loadingCanceled=![];let _0x4fd418=![];while(_0xd6f18b!=_0x45f352[_0x51978c(0x224)]+maxLoadingProgress){_0xd6f18b=loadingProgress,_0x45f352[_0x51978c(0x267)](_0x4a7490=>{const _0x3884d8=_0x51978c;if(global[_0x3884d8(0x1c8)][noslash(_0x4a7490)]){loading[_0x3884d8(0x236)]=loading[_0x3884d8(0x236)][_0x3884d8(0x253)](_0x491267=>_0x491267!=_0x4a7490);if(!watchedSymbols[_0x3884d8(0x150)](_0x4a7490))watchedSymbols[_0x3884d8(0x1b1)](_0x4a7490);_0xd6f18b++;}}),loading[_0x51978c(0x194)]=Math['round'](_0xd6f18b/(_0x45f352[_0x51978c(0x224)]+maxLoadingProgress)*0x64);loading[_0x51978c(0x194)]!=0x64&&(_0x535f>0x1e*0x5&&(loading[_0x51978c(0x1ad)]=!![],emitLoadingProgress()),_0x535f>0x78*0x5&&!_0x4fd418&&(_0x4fd418=!![],logHistory(_0x51978c(0x23c),_0x51978c(0x1d0)+loading[_0x51978c(0x236)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x51978c(0x23c),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x51978c(0x17f)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x8f1a5c=_0x51978c;process['send']({'stop':_0x8f1a5c(0x1c2)},_0x170cde=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x51978c(0x28e)]=!![],emitLoadingProgress();break;}else _0x2ca4e1!=loading['progress']&&(_0x2ca4e1=loading['progress'],emitLoadingProgress()),_0x535f++,await sleep(0xc8);}_0xd6f18b==_0x45f352[_0x51978c(0x224)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x51978c(0x1ba)]({'status':_0x51978c(0x16b),'live':_0x51978c(0x254)},_0x5d99b1=>{}),_0x4fd418&&logHistory('success',_0x51978c(0x276)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x58893e=_0x4ea7c4;proxyEmit(_0x58893e(0x278),{...emittedConfiguration(),'configstate':_0x58893e(0x178)});}function emitLoadingProgress(){const _0x5bcbb1=_0x4ea7c4;proxyEmit(_0x5bcbb1(0x256),loading);}async function getFiat(){const _0x2419f5=_0x4ea7c4;let _0x58282c=global[_0x2419f5(0x1c8)][stablecoins[_0x2419f5(0x238)]['coin']],_0x421fe4=global[_0x2419f5(0x1c8)][stablecoins['usd']['coin']];return{'eur':Number(_0x58282c),'usd':Number(_0x421fe4)};}function capitalize(_0x5e95d9){const _0x51b3ba=_0x4ea7c4;return _0x5e95d9[_0x51b3ba(0x2ab)](0x0,0x1)[_0x51b3ba(0x257)]()+_0x5e95d9[_0x51b3ba(0x2ab)](0x1);}function supportedExchanges(){const _0x119542=_0x4ea7c4,_0x32f6bd=['ws','fetchTickers','fetchTicker',_0x119542(0x1f0),_0x119542(0x2b5),_0x119542(0x220),_0x119542(0x2bb),_0x119542(0x28d),'fetchClosedOrders',_0x119542(0x157)];let _0x57705a=[],_0x40e78e=[],_0x23f880=ccxt[_0x119542(0x251)]['exchanges'];_0x23f880[_0x119542(0x267)](_0x1c8f24=>{const _0x13c14e=_0x119542;try{const _0x1cebe2=new ccxt[(_0x13c14e(0x251))][_0x1c8f24]();_0x40e78e[_0x13c14e(0x1b1)](_0x1cebe2);}catch(_0x52d458){}}),_0x40e78e[_0x119542(0x267)](_0x41d47b=>{const _0x5f6321=_0x119542;let _0x282882=0x0;_0x32f6bd[_0x5f6321(0x267)](_0x5ae6be=>{const _0xe46940=_0x5f6321;_0x5ae6be in _0x41d47b[_0xe46940(0x2d0)]&&_0x41d47b[_0xe46940(0x2d0)][_0x5ae6be]&&_0x282882++;}),_0x282882==_0x32f6bd[_0x5f6321(0x224)]&&_0x57705a[_0x5f6321(0x1b1)](capitalize(_0x41d47b['id']));});let _0x4c9934=[];return _0x23f880[_0x119542(0x267)](_0x4604bd=>{const _0x55f772=_0x119542;_0x4604bd=capitalize(_0x4604bd);if(!_0x57705a[_0x55f772(0x150)](_0x4604bd))_0x4c9934[_0x55f772(0x1b1)](_0x4604bd);}),_0x57705a;}function setStartDatePerformance(){const _0x194cfb=_0x4ea7c4;if(config&&config['liquidity'][0x0][_0x194cfb(0x22f)][_0x194cfb(0x224)]!=0x0){const _0x5482ca=config['liquidity'][0x0][_0x194cfb(0x22f)];dbPerformance[_0x194cfb(0x1c7)](_0x194cfb(0x212))[_0x194cfb(0x1f7)]({'date':config[_0x194cfb(0x1de)]})[_0x194cfb(0x217)]({'coins':_0x5482ca})[_0x194cfb(0x136)]();}}async function recreateCoinResults(){const _0xb29de3=_0x4ea7c4;let _0x325a33,_0xf6f494=[];try{const _0x1ce9cc=fns['format'](fns[_0xb29de3(0x1b5)](config['startdate'][_0xb29de3(0x284)](/\//g,'-')),_0xb29de3(0x2b9));for(const _0x1a5081 of currentCoins){if(_0x1a5081[_0xb29de3(0x1ae)]!=config[_0xb29de3(0x138)]){let _0x2401d0=0x0,_0x36d531,_0x210e12;_0x325a33=await getAllEventOrders(_0x1a5081['symbol']);if(_0x325a33['length']>0x0)_0x325a33['forEach'](_0x4088b5=>{const _0x14aa00=_0xb29de3,_0x26dfb2=_0x1a5081[_0x14aa00(0x1ca)]['includes'](config[_0x14aa00(0x138)]+'/');_0xf6f494[_0x14aa00(0x1b1)]({'datetime':_0x4088b5[_0x14aa00(0x208)],'coin':_0x1a5081[_0x14aa00(0x1ae)],'symbol':_0x1a5081[_0x14aa00(0x1ca)],'side':_0x4088b5[_0x14aa00(0x23a)],'reverse':_0x26dfb2,'amount':formatResult(_0x4088b5[_0x14aa00(0x166)],0x8),'filled':formatResult(_0x4088b5[_0x14aa00(0x166)],0x8),'price':formatResult(_0x4088b5[_0x14aa00(0x1a5)],0x8)}),_0x2401d0=_0x4088b5['side']==_0x14aa00(0x1e9)?_0x2401d0+_0x4088b5[_0x14aa00(0x166)]:_0x2401d0-_0x4088b5['filled'];if(!_0x210e12)_0x210e12=_0x4088b5[_0x14aa00(0x1a5)];});_0x36d531=_0x1a5081[_0xb29de3(0x1f2)]-_0x2401d0;let _0x504775;config[_0xb29de3(0x1f3)][_0xb29de3(0x267)](_0x15aec0=>{const _0x18cea1=_0xb29de3;!_0x504775&&(_0x504775=_0x15aec0['changes']['find'](_0x634269=>_0x634269[_0x18cea1(0x1ae)]==_0x1a5081[_0x18cea1(0x1ae)]),_0x504775&&(_0x36d531=_0x504775[_0x18cea1(0x1f2)],_0x210e12=_0x504775['price']));});let _0x3e80d0=dbCoinResults['get'](_0xb29de3(0x2d7))['find']({'coin':_0x1a5081[_0xb29de3(0x1ae)]})[_0xb29de3(0x2c4)]();_0x3e80d0={'coin':_0x1a5081[_0xb29de3(0x1ae)],'number':_0x36d531,'breakeven':_0x210e12,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0xb29de3(0x2d7))[_0xb29de3(0x1f7)]({'coin':_0x1a5081['coin']})[_0xb29de3(0x217)](_0x3e80d0)['write']();}}_0xf6f494[_0xb29de3(0x156)]((_0x17de3c,_0x38cf95)=>_0x17de3c[_0xb29de3(0x208)]>_0x38cf95['datetime']?0x1:_0x38cf95[_0xb29de3(0x208)]>_0x17de3c[_0xb29de3(0x208)]?-0x1:0x0);let _0x37a70a=0x0;for(let _0x10d97d of _0xf6f494){await updateCoinResults(_0x10d97d,!![]);}}catch(_0x5e1a86){await handleError(_0x5e1a86,_0xb29de3(0x29a));}}async function getAllEventOrders(_0xb3fba1){const _0x2f044f=_0x4ea7c4;let _0x323a39=[],_0x295829=dbLogs[_0x2f044f(0x1c7)]('logs')[_0x2f044f(0x253)](_0x390a2c=>{const _0x2c8a8f=_0x2f044f,_0x7fd61d=_0x390a2c[_0x2c8a8f(0x2d4)][_0x2c8a8f(0x195)]();return _0x7fd61d[_0x2c8a8f(0x150)](_0xb3fba1[_0x2c8a8f(0x195)]())&&(_0x7fd61d[_0x2c8a8f(0x150)]('market')&&_0x7fd61d[_0x2c8a8f(0x150)](_0x2c8a8f(0x1ec))||_0x7fd61d[_0x2c8a8f(0x150)](_0x2c8a8f(0x166))&&_0x7fd61d[_0x2c8a8f(0x150)](_0x2c8a8f(0x1ec)));})[_0x2f044f(0x27a)](_0x2f044f(0x1b7))[_0x2f044f(0x2c4)]();return _0x295829['forEach'](_0x53996a=>{const _0x169ee4=_0x2f044f,_0x24bc65=_0x53996a[_0x169ee4(0x2d4)]['includes'](_0x169ee4(0x206))?_0x169ee4(0x206):_0x169ee4(0x1e9),_0x40f48b=/#([0-9]|\.)+\s/i,_0x4b5c96=Number(_0x40f48b[_0x169ee4(0x2c8)](_0x53996a[_0x169ee4(0x2d4)])[0x0]['slice'](0x1)),_0x52cdeb=/@([0-9]|\.)+$/i,_0x195c00=Number(_0x52cdeb[_0x169ee4(0x2c8)](_0x53996a[_0x169ee4(0x2d4)])[0x0][_0x169ee4(0x172)](0x1));_0x323a39[_0x169ee4(0x1b1)]({'datetime':_0x53996a[_0x169ee4(0x1b7)],'coin':symbolToCoin(_0xb3fba1),'symbol':_0xb3fba1,'side':_0x24bc65,'amount':_0x4b5c96,'filled':_0x4b5c96,'price':_0x195c00});}),_0x323a39;}async function getAllOrders(_0x4de764,_0x2d469e){const _0xfe78e4=_0x4ea7c4;let _0x30f48e=[];while(_0x2d469e<exchange[_0xfe78e4(0x133)]()){const _0xbdecf1=0x1f4;try{const _0x139f16=await exchange[_0xfe78e4(0x28f)](_0x4de764,_0x2d469e,_0xbdecf1);if(_0x139f16[_0xfe78e4(0x224)])_0x2d469e=_0x139f16[_0x139f16[_0xfe78e4(0x224)]-0x1]['timestamp']+0x1,_0x30f48e=_0x30f48e[_0xfe78e4(0x260)](_0x139f16);else break;}catch(_0x470f85){await handleError(_0x470f85,_0xfe78e4(0x24a),_0x4de764);}}return _0x30f48e;}async function validate24hChanges(){const _0x4c23d7=_0x4ea7c4;for(const _0x2855b9 of currentCoins){if(_0x2855b9['coin']!=config[_0x4c23d7(0x138)]){let _0xc73e0c;_0x2855b9['reverse']?_0xc73e0c=formatResult((0x1/(global['change'][noslash(_0x2855b9['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0xc73e0c=global['change'][noslash(_0x2855b9['symbol'])],_0xc73e0c<config[_0x4c23d7(0x26a)]&&(logHistory(_0x4c23d7(0x23c),_0x2855b9['coin']+_0x4c23d7(0x20e)+_0xc73e0c+'%'),logHistory(_0x4c23d7(0x23c),_0x4c23d7(0x1f6)),logHistory(_0x4c23d7(0x23c),_0x4c23d7(0x202)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4ebcc1,_0x1bf16e){const _0x20fafc=_0x4ea7c4;if(!_0x4ebcc1)return!![];const _0x54c9ed=_0x1bf16e[_0x20fafc(0x158)]('.'),_0xb5abb9=_0x4ebcc1[_0x20fafc(0x158)]('.');for(var _0x378c5f=0x0;_0x378c5f<_0xb5abb9[_0x20fafc(0x224)];_0x378c5f++){const _0x514e67=~~_0xb5abb9[_0x378c5f],_0x38b00f=~~_0x54c9ed[_0x378c5f];if(_0x514e67<_0x38b00f)return!![];if(_0x514e67>_0x38b00f)return![];}return![];}async function oneTimeMigration(){const _0x1474db=_0x4ea7c4;let _0xad81ab=dbLogs[_0x1474db(0x1c7)]('version')['value']();if(isOlderVersion(_0xad81ab,_0x1474db(0x1e7))){let _0x3a1ae3=[];const _0x4ac0a3=dbLogs['get'](_0x1474db(0x266))[_0x1474db(0x2c4)]();_0x4ac0a3[_0x1474db(0x267)](_0x16dd47=>{const _0x11fcdb=_0x1474db;_0x3a1ae3[_0x11fcdb(0x1b1)]({'time':_0x16dd47[_0x11fcdb(0x1b7)],'type':_0x16dd47[_0x11fcdb(0x13b)],'event':_0x16dd47[_0x11fcdb(0x2d4)]});}),dbLogs[_0x1474db(0x1c7)](_0x1474db(0x266))[_0x1474db(0x217)](_0x3a1ae3)[_0x1474db(0x136)]();}let _0x5b4d90=dbConfig[_0x1474db(0x1c7)](_0x1474db(0x231))['value']();if(isOlderVersion(_0x5b4d90,'2.3.5')){let _0x138104=dbConfig[_0x1474db(0x1c7)](_0x1474db(0x15d))['find']({'botID':botID})[_0x1474db(0x2c4)]();if(_0x138104){let _0x49867f=[];_0x138104['portfolio'][_0x1474db(0x267)](_0x17f3dc=>{const _0x264746=_0x1474db;_0x49867f[_0x264746(0x1b1)]({'coin':_0x17f3dc[_0x264746(0x1ae)],'number':_0x17f3dc[_0x264746(0x1e4)],'price':_0x17f3dc[_0x264746(0x25e)]}),delete _0x17f3dc[_0x264746(0x1e4)],delete _0x17f3dc[_0x264746(0x25e)];});if(_0x49867f[_0x1474db(0x224)]!==0x0)fs[_0x1474db(0x144)](configbackuppath+('starting-balance-'+botID+'.json'),JSON['stringify'](_0x49867f,null,0x4),function(_0x163718){if(_0x163718){}});const _0x7d77eb=(_0x3649cb,_0x1a0866)=>{const _0x3ff4ed=_0x1474db;let _0x54207a=[];_0x1a0866[_0x3ff4ed(0x267)](_0x4cc98e=>{const _0x4d0f32=_0x3ff4ed,_0x3febb8=_0x3649cb[_0x4d0f32(0x1f7)](_0x3ec568=>_0x3ec568[_0x4d0f32(0x1ae)]==_0x4cc98e['coin']);if(!_0x3febb8)_0x54207a[_0x4d0f32(0x1b1)](_0x4cc98e);});let _0x2f6989=[];return _0x3649cb[_0x3ff4ed(0x267)](_0x28e5cb=>{const _0x41c062=_0x3ff4ed,_0x2f0f10=_0x1a0866[_0x41c062(0x1f7)](_0xfb389a=>_0xfb389a['coin']==_0x28e5cb['coin']);if(!_0x2f0f10||_0x2f0f10[_0x41c062(0x1f2)]==0x0&&_0x28e5cb['number']!=0x0)_0x2f6989['push'](_0x28e5cb);}),{'missingDay1':_0x54207a,'notInDay2':_0x2f6989};},_0x1141ab=dbPerformance[_0x1474db(0x1c7)](_0x1474db(0x212))['cloneDeep']()[_0x1474db(0x2c4)]();if(_0x1141ab[_0x1474db(0x224)]>0x1){const {missingDay1:_0x3ed732,notInDay2:_0xed74d2}=_0x7d77eb(_0x49867f,_0x1141ab[0x1]['coins']);_0x49867f=[..._0x49867f,..._0x3ed732],_0xed74d2[_0x1474db(0x267)](_0x2ed07c=>{const _0x5a3ba4=_0x1474db;let _0x2fb1f6=_0x49867f[_0x5a3ba4(0x2ca)](_0xd7a26c=>_0xd7a26c[_0x5a3ba4(0x1ae)]==_0x2ed07c[_0x5a3ba4(0x1ae)]);_0x2fb1f6!=-0x1&&_0x49867f['splice'](_0x2fb1f6,0x1);});}_0x49867f[_0x1474db(0x156)]((_0x325611,_0x5ee47d)=>_0x325611[_0x1474db(0x1ae)]>_0x5ee47d[_0x1474db(0x1ae)]?0x1:_0x5ee47d[_0x1474db(0x1ae)]>_0x325611['coin']?-0x1:0x0);let _0x47f070=[{'date':_0x138104[_0x1474db(0x1de)],'changes':_0x49867f}];_0x1141ab[_0x1474db(0x224)]>0x2&&_0x1141ab[_0x1474db(0x267)]((_0x156790,_0x5dcd26)=>{const _0x3673f2=_0x1474db;if(_0x5dcd26>0x0&&_0x5dcd26<_0x1141ab[_0x3673f2(0x224)]-0x1){const {missingDay1:_0x623ec6,notInDay2:_0x1e85d3}=_0x7d77eb(_0x1141ab[_0x5dcd26][_0x3673f2(0x2d7)],_0x1141ab[_0x5dcd26+0x1][_0x3673f2(0x2d7)]);_0x49867f=[],(_0x623ec6[_0x3673f2(0x224)]!=0x0||_0x1e85d3[_0x3673f2(0x224)]!=0x0)&&(_0x623ec6[_0x3673f2(0x224)]!=0x0&&_0x49867f[_0x3673f2(0x1b1)](..._0x623ec6),_0x1e85d3[_0x3673f2(0x224)]!=0x0&&(_0x1e85d3[_0x3673f2(0x267)](_0x240a8f=>{const _0x43f088=_0x3673f2;_0x240a8f[_0x43f088(0x1f2)]=-_0x240a8f[_0x43f088(0x1f2)];}),_0x49867f[_0x3673f2(0x1b1)](..._0x1e85d3)),_0x49867f['sort']((_0x57a5b7,_0x6059c2)=>_0x57a5b7[_0x3673f2(0x1ae)]>_0x6059c2[_0x3673f2(0x1ae)]?0x1:_0x6059c2['coin']>_0x57a5b7[_0x3673f2(0x1ae)]?-0x1:0x0),_0x47f070[_0x3673f2(0x1b1)]({'date':_0x1141ab[_0x5dcd26+0x1][_0x3673f2(0x292)],'changes':_0x49867f}));}}),dbConfig[_0x1474db(0x1c7)](_0x1474db(0x15d))[_0x1474db(0x1f7)]({'botID':botID})[_0x1474db(0x217)]({..._0x138104,'liquidity':_0x47f070})['write']();}}if(isOlderVersion(_0x5b4d90,_0x1474db(0x154))){let _0x33ac1a=dbConfig[_0x1474db(0x1c7)](_0x1474db(0x15d))[_0x1474db(0x1f7)]({'botID':botID})[_0x1474db(0x2c4)]();if(_0x33ac1a){const _0x512c25=_0x33ac1a[_0x1474db(0x1ff)],_0xb8a346=_0x512c25?capitalize(_0x512c25):'Binance';dbConfig['get']('bot')[_0x1474db(0x1f7)]({'botID':botID})['assign']({'exchange':_0xb8a346})[_0x1474db(0x136)]();}}let _0x11e875=dbPerformance[_0x1474db(0x1c7)]('version')['value']();isOlderVersion(_0x11e875,_0x1474db(0x1e7))&&setStartDatePerformance();let _0x4b0b58=dbCoinResults['get'](_0x1474db(0x231))['value']();if(isOlderVersion(_0x4b0b58,'2.5.0')){let _0x586295=dbCoinResults['get']('coins')[_0x1474db(0x2c4)]();if(_0x586295[_0x1474db(0x224)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5e1f93=_0x4ea7c4;dbConfig[_0x5e1f93(0x14e)](_0x5e1f93(0x231),serverversion)[_0x5e1f93(0x136)](),dbPerformance['set'](_0x5e1f93(0x231),serverversion)[_0x5e1f93(0x136)](),dbLogs[_0x5e1f93(0x14e)]('version',serverversion)['write'](),dbCoinResults[_0x5e1f93(0x14e)](_0x5e1f93(0x231),serverversion)[_0x5e1f93(0x136)]();}function getConfiguration(_0x354314){const _0x3ce165=_0x4ea7c4;let _0x221f5f=dbConfig[_0x3ce165(0x1c7)]('bot')[_0x3ce165(0x1f7)]({'botID':_0x354314})[_0x3ce165(0x2c4)]();if(_0x221f5f){let _0x56d21d=![];typeof _0x221f5f[_0x3ce165(0x280)]==_0x3ce165(0x155)&&(_0x221f5f={..._0x221f5f,'threshold':Number(_0x221f5f[_0x3ce165(0x280)])},_0x56d21d=!![]),_0x221f5f['change24h']==undefined&&(_0x221f5f={..._0x221f5f,'change24h':-0x14},_0x56d21d=!![]),_0x221f5f['fiat']==undefined&&(_0x221f5f={..._0x221f5f,'fiat':_0x3ce165(0x1ab)},_0x56d21d=!![]),_0x221f5f[_0x3ce165(0x288)]==undefined&&(_0x221f5f={..._0x221f5f,'onepagemode':settings[_0x3ce165(0x288)]},_0x56d21d=!![]),_0x221f5f[_0x3ce165(0x19b)]==undefined&&(_0x221f5f={..._0x221f5f,'colorscheme':_0x3ce165(0x173)},_0x56d21d=!![]),_0x221f5f[_0x3ce165(0x22d)]==undefined&&(_0x221f5f={..._0x221f5f,'autoliquidity':!![]},_0x56d21d=!![]),_0x56d21d&&(_0x221f5f={'botID':_0x221f5f['botID'],'exchange':_0x221f5f[_0x3ce165(0x1ff)],'apiKey':_0x221f5f[_0x3ce165(0x289)],'apiSecret':_0x221f5f[_0x3ce165(0x218)],'apiPassword':_0x221f5f[_0x3ce165(0x18c)],'basecoin':_0x221f5f[_0x3ce165(0x138)],'botname':_0x221f5f['botname'],'showname':_0x221f5f[_0x3ce165(0x1c1)],'threshold':_0x221f5f['threshold'],'ordertype':_0x221f5f['ordertype'],'timeout':_0x221f5f['timeout'],'fiat':_0x221f5f[_0x3ce165(0x1b8)],'startdate':_0x221f5f[_0x3ce165(0x1de)],'recreate':_0x221f5f[_0x3ce165(0x1cb)],'timeshift':_0x221f5f[_0x3ce165(0x29f)],'onepagemode':_0x221f5f[_0x3ce165(0x288)],'headless':_0x221f5f[_0x3ce165(0x1f5)],'cooldown':_0x221f5f[_0x3ce165(0x23e)],'change24h':_0x221f5f[_0x3ce165(0x26a)],'emojibuy':_0x221f5f['emojibuy'],'emojisell':_0x221f5f[_0x3ce165(0x265)],'colorscheme':_0x221f5f[_0x3ce165(0x19b)],'portfolio':_0x221f5f[_0x3ce165(0x132)],'autoliquidity':_0x221f5f[_0x3ce165(0x22d)],'liquidity':_0x221f5f[_0x3ce165(0x1f3)],'openOrders':_0x221f5f[_0x3ce165(0x165)]},dbConfig[_0x3ce165(0x1c7)](_0x3ce165(0x15d))[_0x3ce165(0x1e0)]()[_0x3ce165(0x136)](),dbConfig['get'](_0x3ce165(0x15d))[_0x3ce165(0x1b1)](_0x221f5f)[_0x3ce165(0x136)]());}else _0x221f5f={'botID':_0x354314,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3ce165(0x2a7)+_0x354314,'showname':![],'threshold':0x3,'ordertype':_0x3ce165(0x1a8),'timeout':0x14,'fiat':_0x3ce165(0x1ab),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x3ce165(0x288)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3ce165(0x173),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x221f5f;}function emittedConfiguration(){const _0x27dbf9=_0x4ea7c4;let _0x5a4398;if(config[_0x27dbf9(0x289)]=='')_0x5a4398={...config,'configstate':_0x27dbf9(0x1dd)};else config['apiKey']=='***'?_0x5a4398={...config,'configstate':_0x27dbf9(0x204)}:(_0x5a4398={...config,'apiKey':'************','apiSecret':'************'},config['apiPassword']&&(_0x5a4398['apiPassword']=_0x27dbf9(0x2ae)));return _0x5a4398;}function getSettings(){const _0x1e4b3e=_0x4ea7c4;return dbSettings[_0x1e4b3e(0x1c7)](_0x1e4b3e(0x26b))[_0x1e4b3e(0x2c4)]();}function getSecure(){const _0x1ba6de=_0x4ea7c4;return dbSecure[_0x1ba6de(0x1c7)](_0x1ba6de(0x1e5))[_0x1ba6de(0x2c4)]()||{};}function updateTimeshift(_0x18adce){const _0xf05dc7=_0x4ea7c4;let _0xcdbc2b=dbConfig[_0xf05dc7(0x1c7)]('bot')[_0xf05dc7(0x1f7)]({'botID':botID})[_0xf05dc7(0x2c4)]();_0xcdbc2b&&dbConfig[_0xf05dc7(0x1c7)](_0xf05dc7(0x15d))[_0xf05dc7(0x1f7)]({'botID':botID})[_0xf05dc7(0x217)]({'timeshift':_0x18adce})[_0xf05dc7(0x136)](),config[_0xf05dc7(0x29f)]=_0x18adce,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x4dc3da){const _0x551633=_0x4ea7c4;let _0x300192=dbConfig[_0x551633(0x1c7)](_0x551633(0x15d))[_0x551633(0x1f7)]({'botID':botID})[_0x551633(0x2c4)]();_0x300192&&dbConfig[_0x551633(0x1c7)](_0x551633(0x15d))[_0x551633(0x1f7)]({'botID':botID})[_0x551633(0x217)]({'onepagemode':_0x4dc3da})['write'](),config[_0x551633(0x288)]=_0x4dc3da,proxyEmit(_0x551633(0x278),emittedConfiguration());}async function storeConfiguration(_0x518f7a){const _0xae8f91=_0x4ea7c4;logger[_0xae8f91(0x255)](_0xae8f91(0x246));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0xae8f91(0x20d));let _0x34094f=![],_0x86e8d1=![],_0x8f1ec6=[];_0x518f7a[_0xae8f91(0x132)][_0xae8f91(0x267)](_0x468f40=>{const _0xaaf11c=_0xae8f91;if(!_0x468f40[_0xaaf11c(0x25a)]&&_0x468f40[_0xaaf11c(0x1ae)]!=_0x518f7a['basecoin'])_0x8f1ec6[_0xaaf11c(0x1b1)](_0x468f40[_0xaaf11c(0x1ca)]);}),_0x8f1ec6[_0xae8f91(0x267)](_0x358130=>{const _0x5bfcdf=_0xae8f91,_0x4ba9dd=currentCoins['find'](_0x21f544=>_0x21f544[_0x5bfcdf(0x1ca)]==_0x358130);!_0x4ba9dd&&(_0x34094f=!![]);}),currentCoins[_0xae8f91(0x267)](_0x2a9085=>{const _0x8b5bd8=_0xae8f91;if(_0x2a9085[_0x8b5bd8(0x1ae)]!=config['basecoin']){const _0x1e260e=_0x8f1ec6[_0x8b5bd8(0x1f7)](_0x150db9=>_0x150db9==_0x2a9085[_0x8b5bd8(0x1ca)]);!_0x1e260e&&(_0x34094f=!![]);}}),_0x518f7a[_0xae8f91(0x132)]['forEach'](_0x2602ac=>{const _0x12174f=_0xae8f91,_0x52e000=config[_0x12174f(0x132)][_0x12174f(0x1f7)](_0x4c5df2=>_0x4c5df2['coin']==_0x2602ac[_0x12174f(0x1ae)]);if(_0x52e000&&_0x2602ac['offset']!=_0x52e000[_0x12174f(0x282)])_0x86e8d1=!![];});let _0x29897c=dbConfig[_0xae8f91(0x1c7)]('bot')[_0xae8f91(0x1f7)]({'botID':botID})[_0xae8f91(0x2c4)]();_0x518f7a={..._0x518f7a,'apiKey':crypt[_0xae8f91(0x1ee)](secure['privateKey'],_0x518f7a[_0xae8f91(0x289)])['message'],'apiSecret':crypt['decrypt'](secure[_0xae8f91(0x1d7)],_0x518f7a[_0xae8f91(0x218)])['message']};_0x518f7a[_0xae8f91(0x18c)]&&(_0x518f7a[_0xae8f91(0x18c)]=crypt[_0xae8f91(0x1ee)](secure['privateKey'],_0x518f7a['apiPassword'])[_0xae8f91(0x227)]);let _0x3123a0=![];if(_0x29897c){_0x518f7a[_0xae8f91(0x289)]==_0xae8f91(0x2ae)?_0x518f7a[_0xae8f91(0x289)]=config[_0xae8f91(0x289)]:_0x3123a0=!![];_0x518f7a['apiSecret']=='************'?_0x518f7a[_0xae8f91(0x218)]=config[_0xae8f91(0x218)]:_0x3123a0=!![];if(_0x518f7a['apiPassword']==_0xae8f91(0x2ae))_0x518f7a['apiPassword']=config[_0xae8f91(0x18c)];else{if(_0x518f7a['apiPassword'])_0x3123a0=!![];}dbConfig['get'](_0xae8f91(0x15d))[_0xae8f91(0x1f7)]({'botID':botID})[_0xae8f91(0x217)](_0x518f7a)[_0xae8f91(0x136)]();}else dbConfig['get']('bot')[_0xae8f91(0x1b1)](_0x518f7a)['write'](),_0x3123a0=!![],process[_0xae8f91(0x1ba)]({'status':'enabled','live':'running'},_0x1f0d81=>{});process['send']({'botname':_0x518f7a[_0xae8f91(0x16e)]},_0x570d8e=>{}),config={..._0x518f7a},updateBotManager(),proxyEmit(_0xae8f91(0x20f)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3123a0)await reset(!![]);else _0x34094f||_0x86e8d1?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0xae8f91(0x255)](_0xae8f91(0x2ad));}async function storeHeadless(_0x58c1c2){const _0x160ae6=_0x4ea7c4,_0x21b9cd={...config,'headless':_0x58c1c2[_0x160ae6(0x1f5)]};let _0x4aca17=dbConfig[_0x160ae6(0x1c7)](_0x160ae6(0x15d))[_0x160ae6(0x1f7)]({'botID':botID})[_0x160ae6(0x2c4)]();_0x4aca17&&dbConfig[_0x160ae6(0x1c7)]('bot')[_0x160ae6(0x1f7)]({'botID':botID})[_0x160ae6(0x217)](_0x21b9cd)[_0x160ae6(0x136)](),config={..._0x21b9cd},updateBotManager(),proxyEmit(_0x160ae6(0x278),emittedConfiguration());}async function storeFiat(_0x53bb11){const _0x43bc02=_0x4ea7c4,_0x50b36b={...config,'fiat':_0x53bb11};let _0x128c94=dbConfig['get'](_0x43bc02(0x15d))[_0x43bc02(0x1f7)]({'botID':botID})[_0x43bc02(0x2c4)]();_0x128c94&&dbConfig[_0x43bc02(0x1c7)](_0x43bc02(0x15d))[_0x43bc02(0x1f7)]({'botID':botID})[_0x43bc02(0x217)](_0x50b36b)[_0x43bc02(0x136)](),config={..._0x50b36b},proxyEmit(_0x43bc02(0x278),emittedConfiguration());}function resetHistory(){const _0x5c4425=_0x4ea7c4;logger['full'](_0x5c4425(0x21d));try{if(fs[_0x5c4425(0x2c6)](path[_0x5c4425(0x1df)](configpath,_0x5c4425(0x1bc)+botID+_0x5c4425(0x15c))))fs[_0x5c4425(0x24c)](path[_0x5c4425(0x1df)](configpath,_0x5c4425(0x1bc)+botID+'-events.json'));if(fs[_0x5c4425(0x2c6)](path['join'](configpath,_0x5c4425(0x1bc)+botID+_0x5c4425(0x14c))))fs['unlinkSync'](path[_0x5c4425(0x1df)](configpath,_0x5c4425(0x1bc)+botID+_0x5c4425(0x14c)));if(fs['existsSync'](path[_0x5c4425(0x1df)](configpath,_0x5c4425(0x1bc)+botID+'-results.json')))fs[_0x5c4425(0x24c)](path[_0x5c4425(0x1df)](configpath,'bot-'+botID+_0x5c4425(0x16a)));}catch(_0x149940){if(_0x149940)logger[_0x5c4425(0x22a)](_0x5c4425(0x170),_0x149940);}const _0x8b3603=getDate();let _0x5b0205=[];currentCoins[_0x5c4425(0x267)](_0x36152a=>{const _0x1fef3e=_0x5c4425;_0x5b0205[_0x1fef3e(0x1b1)]({'coin':_0x36152a[_0x1fef3e(0x1ae)],'number':_0x36152a[_0x1fef3e(0x1f2)],'price':_0x36152a[_0x1fef3e(0x198)]});});let _0x5250cd=dbConfig[_0x5c4425(0x1c7)](_0x5c4425(0x15d))[_0x5c4425(0x1f7)]({'botID':botID})['value']();_0x5250cd&&(dbConfig[_0x5c4425(0x1c7)](_0x5c4425(0x15d))[_0x5c4425(0x1f7)]({'botID':botID})['assign']({'liquidity':[{'date':_0x8b3603,'changes':_0x5b0205}]})[_0x5c4425(0x136)](),config[_0x5c4425(0x1f3)]=[]),process[_0x5c4425(0x1ba)]({'stop':_0x5c4425(0x1c2)},_0x52eac2=>{});}function noslash(_0x3e873c){return _0x3e873c['replace']('/','');}function updateHighestFee(_0x4a10b8){const _0x25894d=_0x4ea7c4;if(_0x4a10b8[_0x25894d(0x2bd)]){let _0x28befe={'filled':_0x4a10b8['filled']*_0x4a10b8[_0x25894d(0x1a5)],'amount':_0x4a10b8[_0x25894d(0x166)]*_0x4a10b8['price'],'side':_0x4a10b8[_0x25894d(0x23a)]=='sell'?_0x25894d(0x1e9):_0x25894d(0x206),'price':0x1/_0x4a10b8[_0x25894d(0x1a5)]};_0x4a10b8={..._0x4a10b8,..._0x28befe};}const _0x15915a=defaultFee*_0x4a10b8[_0x25894d(0x166)]*_0x4a10b8[_0x25894d(0x1a5)];lastFees[_0x25894d(0x25c)][_0x25894d(0x224)]===0x14&&lastFees['recent20'][_0x25894d(0x1fa)](),lastFees[_0x25894d(0x25c)][_0x25894d(0x1b1)](_0x15915a),lastFees[_0x25894d(0x2c1)]=Math[_0x25894d(0x2cd)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x48cc24){const _0x53e71d=_0x4ea7c4;logger[_0x53e71d(0x255)](_0x53e71d(0x19f)+_0x48cc24[_0x53e71d(0x1ca)]+_0x53e71d(0x13f)+_0x48cc24[_0x53e71d(0x1f4)]+_0x53e71d(0x13f)+_0x48cc24['filled']+_0x53e71d(0x1fc)+_0x48cc24['amount']+_0x53e71d(0x13f)+_0x48cc24['id']);let _0x20b6f2=_0x48cc24[_0x53e71d(0x1f4)],_0xc5d1cd=![];currentCoins['forEach'](_0x303170=>{const _0xe9e4cf=_0x53e71d;_0x303170[_0xe9e4cf(0x1ca)]==_0x48cc24['symbol']&&(_0xc5d1cd=!![]);});if(!_0xc5d1cd)return;const _0x4e33e8=currentCoins[_0x53e71d(0x1f7)](_0x44a5f6=>_0x44a5f6[_0x53e71d(0x1ca)]==_0x48cc24[_0x53e71d(0x1ca)]),_0x1f76ef=_0x37b716=>{const _0x35a575=_0x53e71d;if(_0x4e33e8)_0x4e33e8[_0x35a575(0x279)]=_0x37b716;};if(_0x20b6f2=='open')_0x1f76ef('open');else{if(_0x20b6f2==_0x53e71d(0x1bd)){_0x1f76ef(_0x53e71d(0x1bd));const _0x2b6bc2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2b6bc2,await getOpenOrders(),handleOpenOrders();}else{if(_0x20b6f2=='closed'){let _0x466347=![];if(lastOrders)for(const _0x469581 of lastOrders){const _0x4b238d=0xc8,_0x1325ec=0x1388;let _0x278e33=0x0;while(!_0x469581['orderId']&&_0x278e33*_0x4b238d<_0x1325ec){_0x278e33++,await sleep(_0x4b238d);}if(_0x278e33>0x0)logger[_0x53e71d(0x255)](_0x53e71d(0x29e)+_0x278e33*_0x4b238d/0x3e8+_0x53e71d(0x18a));if(_0x469581[_0x53e71d(0x28a)]==_0x48cc24['id']){logger[_0x53e71d(0x255)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x48cc24['id']),_0x466347=!![];if(_0x469581[_0x53e71d(0x166)]==0x0){logger[_0x53e71d(0x255)](_0x53e71d(0x1a7)+_0x48cc24['id']);if(_0x48cc24[_0x53e71d(0x2a5)])_0x469581[_0x53e71d(0x1a5)]=_0x48cc24[_0x53e71d(0x2a5)];else{if(_0x48cc24[_0x53e71d(0x1a5)])_0x469581[_0x53e71d(0x1a5)]=_0x48cc24['price'];else{}}_0x469581[_0x53e71d(0x166)]=_0x48cc24[_0x53e71d(0x166)],updateHighestFee(_0x469581),_0x1f76ef('filled'),await validateOrders();if(lockOrders==ORDERS[_0x53e71d(0x1cc)]){const _0x58363e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x58363e;}_0x469581[_0x53e71d(0x22e)]={'currency':_0x48cc24[_0x53e71d(0x22e)]?_0x48cc24[_0x53e71d(0x22e)]['currency']:null,'cost':_0x48cc24['fee']?_0x48cc24[_0x53e71d(0x22e)][_0x53e71d(0x13a)]:0x0},await updateCoinResults(_0x469581);}}}if(!_0x466347){logger['debug'](_0x53e71d(0x2ba)+_0x48cc24['id']),_0x1f76ef('filled');const _0x5e44e4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5e44e4,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xb3b91f=JSON[_0x53e71d(0x199)](lastBalances[_0x53e71d(0x132)]);const _0x3eaa19=_0xb3b91f[_0x53e71d(0x1f7)](_0x18597d=>_0x18597d[_0x53e71d(0x1ca)]==_0x48cc24[_0x53e71d(0x1ca)]);if(_0x3eaa19){if(_0x20b6f2==_0x53e71d(0x14d))_0x3eaa19[_0x53e71d(0x279)]=_0x3eaa19['orderstatus']==_0x53e71d(0x166)?'filled':_0x53e71d(0x14d);else{if(_0x20b6f2==_0x53e71d(0x1bd))_0x3eaa19[_0x53e71d(0x279)]=_0x3eaa19[_0x53e71d(0x279)]=='filled'?'filled':_0x53e71d(0x1bd);else _0x20b6f2==_0x53e71d(0x2a2)&&(_0x3eaa19[_0x53e71d(0x279)]=_0x53e71d(0x166));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0xb3b91f)},proxyEmit(_0x53e71d(0x2cb),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x460b7b=![];currentCoins['forEach'](_0x186ae8=>{const _0x2f30a6=_0x4350;_0x460b7b=allOpenOrders[_0x2f30a6(0x1f7)](_0x14016f=>_0x14016f[_0x2f30a6(0x1ca)]==_0x186ae8[_0x2f30a6(0x1ca)]),_0x186ae8[_0x2f30a6(0x279)]=_0x460b7b?_0x2f30a6(0x14d):_0x2f30a6(0x1da);});}async function getCoins(_0x168a59=0x0,_0x4426a7=!![],_0x25968b=config['basecoin']){const _0x1c8b28=_0x4ea7c4;let _0x432afd,_0x45a134=[],_0x37569a=[],_0x3acb49=[];if(_0x168a59)await sleep(_0x168a59);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x432afd=await exchange[_0x1c8b28(0x157)](),mybalances=_0x432afd[_0x1c8b28(0x274)];for(const [_0x1beaf1,_0x4b77e6]of Object[_0x1c8b28(0x187)](mybalances)){_0x3acb49[_0x1c8b28(0x1b1)](_0x1beaf1);}config[_0x1c8b28(0x132)][_0x1c8b28(0x267)](_0x4746f2=>{const _0x2aed06=_0x1c8b28;!_0x3acb49[_0x2aed06(0x150)](_0x4746f2[_0x2aed06(0x1ae)])&&(mybalances[_0x4746f2[_0x2aed06(0x1ae)]]=0x0);});if(_0x25968b=='')for(const [_0x13253d,_0x3149b4]of Object[_0x1c8b28(0x187)](mybalances)){_0x3149b4!=0x0&&_0x45a134[_0x1c8b28(0x1b1)]({'coin':_0x13253d});}else{let _0x1dc20d=![];for(const [_0x21c350,_0x44a6f7]of Object[_0x1c8b28(0x187)](mybalances)){const _0x540671=config[_0x1c8b28(0x132)][_0x1c8b28(0x1f7)](_0x847057=>_0x847057[_0x1c8b28(0x1ae)]==_0x21c350),_0x1b13d9=_0x21c350+'/'+_0x25968b,_0x101b9a=_0x25968b+'/'+_0x21c350,_0x590c6b=currentCoins[_0x1c8b28(0x1f7)](_0x3e8134=>_0x3e8134[_0x1c8b28(0x1ae)]==_0x21c350);_0x1dc20d=![];if((_0x44a6f7!=0x0||_0x540671)&&(allSymbols['includes'](_0x1b13d9)||_0x21c350==_0x25968b))_0x45a134['push']({'coin':_0x21c350,'symbol':_0x1b13d9,'reverse':![],'number':Math['max'](_0x44a6f7+(_0x540671&&_0x540671['offset']||0x0),0x0),'orderstatus':_0x590c6b?_0x590c6b[_0x1c8b28(0x279)]:_0x1c8b28(0x1da)});else{if((_0x44a6f7!=0x0||_0x540671)&&allSymbols[_0x1c8b28(0x150)](_0x101b9a))_0x45a134['push']({'coin':_0x21c350,'symbol':_0x101b9a,'reverse':!![],'number':Math[_0x1c8b28(0x2cd)](_0x44a6f7+(_0x540671&&_0x540671[_0x1c8b28(0x282)]||0x0),0x0),'orderstatus':_0x590c6b?_0x590c6b[_0x1c8b28(0x279)]:_0x1c8b28(0x1da)});else _0x540671&&_0x45a134[_0x1c8b28(0x1b1)]({'coin':_0x540671[_0x1c8b28(0x1ae)],'symbol':_0x540671['symbol'],'reverse':_0x540671[_0x1c8b28(0x2bd)],'number':0x0,'orderstatus':_0x1c8b28(0x1da)});}}}}catch(_0x26c2bc){if(!_0x4426a7)handleErrorNoStop(_0x26c2bc,_0x1c8b28(0x131));else await handleError(_0x26c2bc,_0x1c8b28(0x131));}return _0x37569a=cloneDeep(_0x45a134),_0x45a134=_0x45a134['filter'](_0x28d1f3=>{const _0x6fc1dc=_0x1c8b28,_0x28224e=config['portfolio'][_0x6fc1dc(0x1f7)](_0x233be3=>_0x233be3[_0x6fc1dc(0x1ae)]==_0x28d1f3[_0x6fc1dc(0x1ae)]);return _0x28224e&&!_0x28224e[_0x6fc1dc(0x25a)];}),[_0x45a134,_0x37569a];}function _0x4350(_0x413951,_0x371d2e){const _0x481550=_0x552e();return _0x4350=function(_0x7c9d37,_0x29e40b){_0x7c9d37=_0x7c9d37-0x131;let _0x552eff=_0x481550[_0x7c9d37];return _0x552eff;},_0x4350(_0x413951,_0x371d2e);}async function getCoinNumber(_0x284c52){const _0x4f1a62=_0x4ea7c4;let _0x3d19d0;try{const _0x2be8ad=await exchange[_0x4f1a62(0x157)]();_0x3d19d0=_0x2be8ad[_0x4f1a62(0x274)][_0x284c52];}catch(_0x4f1899){await handleError(_0x4f1899,'getCoinNumber()');}return _0x3d19d0;}async function getOpenOrders(){const _0x4c05e3=_0x4ea7c4;let _0xf70c68;allOpenOrders=[];try{for(const _0x5e8547 of config['portfolio']){!_0x5e8547[_0x4c05e3(0x25a)]&&_0x5e8547[_0x4c05e3(0x1ae)]!=config[_0x4c05e3(0x138)]&&(_0xf70c68=await exchange[_0x4c05e3(0x28d)](_0x5e8547[_0x4c05e3(0x1ca)]),_0xf70c68[_0x4c05e3(0x224)]>0x0&&allOpenOrders[_0x4c05e3(0x1b1)](_0xf70c68[0x0]));}}catch(_0x3c940b){await handleError(_0x3c940b,'getOpenOrders()');}}async function handleOpenOrders(_0x46cb26=0x0){const _0x2a0191=_0x4ea7c4;allOpenOrders[_0x2a0191(0x224)]==0x0&&lockOrders==ORDERS[_0x2a0191(0x1cc)]&&allOrdersPlaced&&(_0x46cb26==0x0?(logger[_0x2a0191(0x255)](_0x2a0191(0x258)),_0x46cb26++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2a0191(0x255)](_0x2a0191(0x1fe)),validateOrders(_0x2a0191(0x1fb))));}async function testAPI(_0x4e0581){const _0x3923cd=_0x4ea7c4,_0x458570=ccxt[_0x3923cd(0x251)][_0x4e0581['exchange'][_0x3923cd(0x195)]()],_0x248e94=new _0x458570({'apiKey':_0x4e0581[_0x3923cd(0x289)],'secret':_0x4e0581[_0x3923cd(0x218)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3923cd(0x211)}});if(_0x4e0581[_0x3923cd(0x18c)])_0x248e94[_0x3923cd(0x1b2)]=_0x4e0581[_0x3923cd(0x18c)];try{await _0x248e94[_0x3923cd(0x1a6)]();}catch(_0x4c5137){throw _0x4c5137;}}function cloneDeep(_0x2b79af){const _0x4a93a9=_0x4ea7c4;return JSON[_0x4a93a9(0x199)](JSON[_0x4a93a9(0x193)](_0x2b79af));}async function getPortfolio(_0x31caf9){const _0xb517f3=_0x4ea7c4;let _0x12df53=[],_0x4669b8=[],_0x14b420=[],_0x16d14f;if(_0x31caf9[_0xb517f3(0x289)]!==_0xb517f3(0x2ae)||_0x31caf9[_0xb517f3(0x218)]!==_0xb517f3(0x2ae)||_0x31caf9[_0xb517f3(0x18c)]&&_0x31caf9['apiPassword']!==_0xb517f3(0x2ae)){if(config[_0xb517f3(0x1ff)]){if(_0x31caf9[_0xb517f3(0x289)]==_0xb517f3(0x2ae))_0x31caf9[_0xb517f3(0x289)]=config[_0xb517f3(0x289)];if(_0x31caf9[_0xb517f3(0x218)]==_0xb517f3(0x2ae))_0x31caf9[_0xb517f3(0x218)]=config['apiSecret'];if(_0x31caf9[_0xb517f3(0x18c)]==_0xb517f3(0x2ae))_0x31caf9['apiPassword']=config[_0xb517f3(0x18c)];try{await testAPI(_0x31caf9);}catch(_0x4b2355){if(_0x4b2355[_0xb517f3(0x184)]()[_0xb517f3(0x150)]('AuthenticationError')){logger[_0xb517f3(0x255)](_0xb517f3(0x23b)),proxyEmit(_0xb517f3(0x132),![]);return;}else{handleError(_0x4b2355,_0xb517f3(0x162));return;}}}await initExchange(_0x31caf9[_0xb517f3(0x1ff)],_0x31caf9[_0xb517f3(0x289)],_0x31caf9[_0xb517f3(0x218)],_0x31caf9[_0xb517f3(0x18c)]);try{await loadSymbols();}catch(_0x122e1a){if(_0x122e1a[_0xb517f3(0x184)]()['includes'](_0xb517f3(0x192))){proxyEmit(_0xb517f3(0x132),![]);return;}else{handleError(_0x122e1a,_0xb517f3(0x161));return;}}const _0x3a201e=await getCoins(0x0,![],_0x31caf9[_0xb517f3(0x138)]);_0x14b420=cloneDeep(_0x3a201e[0x1]);}else _0x14b420=cloneDeep(currentCoinsAll);if(_0x31caf9[_0xb517f3(0x138)]=='')proxyEmit(_0xb517f3(0x132),_0x14b420);else{_0x14b420[_0xb517f3(0x267)](_0x5d4ef6=>{const _0x357258=_0xb517f3;if(_0x5d4ef6[_0x357258(0x1ae)]!=_0x31caf9[_0x357258(0x138)]&&allSymbols[_0x357258(0x150)](_0x5d4ef6[_0x357258(0x1ca)]))_0x12df53[_0x357258(0x1b1)](_0x5d4ef6['symbol']);});if(_0x12df53[_0xb517f3(0x224)]==0x0)logHistory('error',_0xb517f3(0x1e3));else{try{_0x4669b8=await getTickers(_0x12df53);}catch(_0x51001a){if(_0x51001a[_0xb517f3(0x184)]()[_0xb517f3(0x150)](_0xb517f3(0x192))){proxyEmit('portfolio',![]);return;}else handleError(_0x51001a,_0xb517f3(0x134));}_0x14b420['forEach'](_0x323a25=>{const _0x444012=_0xb517f3;_0x323a25[_0x444012(0x1ae)]!=_0x31caf9[_0x444012(0x138)]?_0x4669b8[_0x323a25[_0x444012(0x1ca)]]?_0x16d14f=_0x323a25['reverse']?0x1/_0x4669b8[_0x323a25[_0x444012(0x1ca)]][_0x444012(0x198)]:_0x4669b8[_0x323a25['symbol']][_0x444012(0x198)]:_0x16d14f=0x0:_0x16d14f=0x1,_0x323a25['price']=formatResult(_0x16d14f,0x8);}),proxyEmit(_0xb517f3(0x132),_0x14b420);}}}function truncateTradeAmount(_0x132de0,_0x2609ba){const _0x335a02=_0x4ea7c4;let _0x37d2bf=0x0;try{_0x37d2bf=exchange[_0x335a02(0x2b6)](_0x132de0,_0x2609ba);}catch(_0x5b3f3f){}return _0x37d2bf;}function _0x552e(){const _0x5b4e34=['fetchBalance','split','must\x20be\x20greater\x20than\x20minimum\x20amount','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','-events.json','bot','/USD','EUR','Limit\x20(low-margin)','getPortfolio(1)','getPortfolio(0)','1249719pXDcOd','USDT','openOrders','filled','getStartingBalances','resetHistory','placeOrder()','-results.json','enabled','close','\x20-\x20pausing\x20bot\x20for\x20','botname','percentage','Error\x20while\x20deleting\x20files:\x20','\x20network\x20error','slice','red_yellow_blue','6036198zEICHF','2\x20-\x20Orders\x20unlocked','Net\x20effect',',\x20must\x20be\x20a\x203\x20digit\x20number','loading-canceled','added','Net\x20','amount','padEnd','limit','1\x20-\x20Validate\x20orders:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Invalid\x20symbol:\x20','32876WyiokA','defaults','10901583uGVdcN','toString','BNB/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','entries','Headless:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Error:\x20Invalid\x20argument\x20','apiPassword','storeFiat','limit-low','leftTxt','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','AuthenticationError','stringify','progress','toLowerCase',':\x20timer\x20>','BNB','last','parse','showConfig','colorscheme','map','valid','\x20|\x20exchange:\x20','0\x20-\x20EXECUTION:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Crypt','watchTrades()','isEqual','price','loadMarkets','2\x20-\x20handling\x20FILLED\x20order:\x20','market','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','final','USD','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','timeout','coin','freeze','min','push','password','/output-000.log','timestamp','parseISO','lowdb','time','fiat','target','send','watchOrders()','bot-','canceled','Manual\x20balancing\x20required','30fKQCYO','./config/','showname','restart','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Trigger:\x20','2\x20-\x20Validate\x20orders:\x20','Order\x20amount\x20is\x20invalid:\x20','get','ticker','change','symbol','recreate','LOCKED','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','(((.+)+)+)+$','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Reset\x20|\x20','\x20exchange','/EUR','mkdirSync','balancing\x20resumes\x20when\x20cooldown\x20ends','-config.json','privateKey','DDoSProtection','args','none','event-history','\x20orders\x20in\x20less\x20than\x20','initial','startdate','join','remove','\x20portfolio:</b>\x20\x0a\x0a','InvalidNonce','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','startnumber','secure','bots','2.3.5','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','buy','1455595XfXlHL','add','order','page','decrypt','active','watchTrades','ORDERS.LOCKED','number','liquidity','status','headless','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','find','bb-secure.json','363380faPlru','shift','no\x20open\x20orders','\x20/\x20','Avoiding\x20continuous\x20order\x20attempts','2\x20-\x20Handled\x20open\x20orders','exchange','ccxt','UNLOCKING','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','performance','recovery','breakeven','sell','fetchTickers()','datetime','\x20|\x20lock\x20orders:\x20','trade','\x20>\x20[DEBUG]\x20','emojibuy','Transaction\x20detection\x20blocked','\x20has\x20a\x2024h\x20drop\x20of\x20','configuration-stored','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','spot','data','ExchangeNotAvailable','NetworkError','distribution','8rMggSV','assign','apiSecret','sha256','/backup/','log','yyyy/MM/dd','Resetting\x20bot\x20history','yargs/yargs','67AgSssj','cancelOrder','</pre>','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','exchange\x20not\x20reloaded','length','delta','balancing\x20resumed','message','BUSD','ongoing','full','Executing\x20exchange\x20reload','exchange\x20reloaded','autoliquidity','fee','changes','initclient','version','Limit\x20(high-margin)','toFixed','833536bSeYhg','fetchTicker','remainingSymbols','MIN_NOTIONAL','eur','Huobipro','side','Invalid\x20API\x20key\x20or\x20secret\x20entered','error','ordertype','cooldown','-------------------------------\x0a','cancelOrders()','Uncaught\x20Exception:','Huobi','path','round','BTC','Saving\x20configuration','USDC','fees','TUSD','getAllOrders()','Loading\x20completed','unlinkSync','Bybit','ExchangeError','warning','ask','pro','InsufficientFunds','filter','running','debug','coin-loading-progress','toUpperCase','1\x20-\x20Handle\x20open\x20orders','\x20not\x20responding','excluded','sells','recent20','./version.json','startprice','success','concat','keys','toggleBotMode','\x20not\x20available','util','emojisell','logs','forEach','getDate','argv','change24h','settings','No\x20more\x20open\x20orders\x20-\x20','Bitget','Error\x20details:','\x20:\x20','loadSymbols()','sendPortfolioTelegram','\x20minutes','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','total','basecoinvalue','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','RequestTimeout','configuration','orderstatus','sortBy','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','UNLOCKED','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','55QhRiSr','threshold','search','offset','getMonth','replace','stopExchange()','Resetting\x20coin\x20results:\x20','Portfolio\x20change\x20detected:\x20','onepagemode','apiKey','orderId','\x20exchange\x20error','***','fetchOpenOrders','cancel','fetchClosedOrders','startsWith','rightTxt','date','getSeconds','fetchTickers','\x20API\x20secret\x20is\x20invalid','<b>Bot\x20','ETH','padStart','\x20minutes\x20-\x20','recreateCoinResults()','ID:\x20','watchTransactions()','getHours','Waited\x20','timeshift','bid','Exception\x20thrown\x20in\x20','closed','Unfilled\x20order(s)\x20canceled\x20after\x20','USDP','average','deleteHistoryAlerts','Bot\x20','Unknown\x20error\x20occured','getPortfolio','InvalidOrder','substring','API-key\x20format\x20invalid','Transaction\x20detection\x20unblocked','************','initTickers()','format','Exchange','<pre>','net-basecoin','removed','watchOrders','amountToPrecision','Binance','realized','yyyy-MM-dd\x27T\x27HH:mm:ss','1\x20-\x20FILLED\x20unknown\x20order:\x20','createOrder','limit-high','reverse','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','getFullYear','storeConfiguration','highest','Market','Order\x20filled:\x20','value','getTime','existsSync',':\x20Bot\x20','exec','floor','findIndex','balances','storeHeadless','max','exchanges','sendMetricsTelegram','has','emitHistory','limits','%\x20(','event','usd','\x20API\x20key\x20is\x20invalid','coins','indexOf','getCoins()','portfolio','milliseconds','getPortfolio(2)','buys','write','fromCodePoint','basecoin','OrderNotFound','cost','type','\x20order:\x20','Executed\x20','\x20closed\x20the\x20connection','\x20|\x20','\x20>\x20','getMinutes','1\x20-\x20Unlock\x20orders','Order\x20is\x20invalid:\x20','writeFile','<b>','abs','kill','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20hour','RSA-OAEP','Order(s)\x20not\x20validated\x20after\x20','-performance.json','open','set','function','includes','net-fiat','ORDERS.UNLOCKING','\x20change','2.6.0','string','sort'];_0x552e=function(){return _0x5b4e34;};return _0x552e();}function checkMinimums(_0x2e9bd3){const _0x11548a=_0x4ea7c4;let _0x16bbf4=!![];const _0xe31197=!_0x2e9bd3[_0x11548a(0x2bd)]?markets[_0x2e9bd3[_0x11548a(0x1ca)]][_0x11548a(0x2d2)][_0x11548a(0x17b)][_0x11548a(0x1b0)]:markets[_0x2e9bd3[_0x11548a(0x1ca)]][_0x11548a(0x2d2)][_0x11548a(0x13a)][_0x11548a(0x1b0)],_0xcc04b6=!_0x2e9bd3[_0x11548a(0x2bd)]?markets[_0x2e9bd3['symbol']]['limits'][_0x11548a(0x13a)][_0x11548a(0x1b0)]:markets[_0x2e9bd3['symbol']][_0x11548a(0x2d2)][_0x11548a(0x17b)][_0x11548a(0x1b0)],_0x2debf6=truncateTradeAmount(_0x2e9bd3[_0x11548a(0x1ca)],_0x2e9bd3[_0x11548a(0x20a)]);_0x2e9bd3[_0x11548a(0x20a)]=_0x2debf6;if(Math[_0x11548a(0x146)](_0x2debf6)<_0xe31197)_0x16bbf4=![];if(Math['abs'](_0x2debf6)*_0x2e9bd3['last']<_0xcc04b6)_0x16bbf4=![];if(_0x2e9bd3[_0x11548a(0x23a)]==_0x11548a(0x206)){let _0x82eb33=config['portfolio'][_0x11548a(0x1f7)](_0x5d8582=>_0x5d8582[_0x11548a(0x1ae)]==_0x2e9bd3['coin']);if(_0x82eb33[_0x11548a(0x282)]>0x0){if(Math[_0x11548a(0x146)](_0x2debf6)>_0x2e9bd3['number']-_0x82eb33['offset'])_0x16bbf4=![];}else{if(Math[_0x11548a(0x146)](_0x2debf6)>_0x2e9bd3[_0x11548a(0x1f2)])_0x16bbf4=![];}}if(_0x2e9bd3[_0x11548a(0x23a)]==_0x11548a(0x1e9)){let _0x57a151=config[_0x11548a(0x132)][_0x11548a(0x1f7)](_0x3fc0f4=>_0x3fc0f4['coin']==config['basecoin']),_0x775dbc=currentCoins[_0x11548a(0x1f7)](_0x40f35d=>_0x40f35d[_0x11548a(0x1ae)]==config[_0x11548a(0x138)]);if(_0x57a151[_0x11548a(0x282)]>0x0){if(Math[_0x11548a(0x146)](_0x2debf6)*_0x2e9bd3['last']>_0x775dbc[_0x11548a(0x1f2)]-_0x57a151[_0x11548a(0x282)])_0x16bbf4=![];}else{if(Math[_0x11548a(0x146)](_0x2debf6)*_0x2e9bd3[_0x11548a(0x198)]>_0x775dbc['number'])_0x16bbf4=![];}}return _0x16bbf4;}async function getBalances(_0x2688a5=!![]){const _0xb6a6c=_0x4ea7c4;let _0x184dca=0x0,_0x4b7a42;const _0x5e70e2=config[_0xb6a6c(0x280)];if(config[_0xb6a6c(0x1f5)]&&config[_0xb6a6c(0x26a)]<0x0)await validate24hChanges();currentCoins[_0xb6a6c(0x267)](_0x3131b4=>{const _0x18c110=_0xb6a6c;if(_0x3131b4['coin']!=config['basecoin']){let _0x14247b=global[_0x18c110(0x1c8)][noslash(_0x3131b4[_0x18c110(0x1ca)])];_0x4b7a42=_0x3131b4['reverse']?0x1/_0x14247b:_0x14247b;}else _0x4b7a42=0x1;let _0xd6c664=_0x3131b4[_0x18c110(0x1f2)]*_0x4b7a42;_0x184dca+=_0xd6c664,_0x3131b4['last']=formatResult(Number(_0x4b7a42),0x8),_0x3131b4[_0x18c110(0x2c4)]=_0xd6c664;}),currentCoins[_0xb6a6c(0x267)](_0x3ee3d5=>{const _0x5da829=_0xb6a6c;let _0x215026=config[_0x5da829(0x132)]['find'](_0x1417ae=>_0x1417ae[_0x5da829(0x1ae)]==_0x3ee3d5[_0x5da829(0x1ae)]),_0x482172=Number(_0x215026[_0x5da829(0x215)]),_0x241aff=_0x3ee3d5[_0x5da829(0x2c4)]/_0x184dca*0x64,_0x3b3759=_0x482172*_0x184dca/0x64/_0x3ee3d5[_0x5da829(0x198)]-_0x3ee3d5[_0x5da829(0x1f2)];_0x3ee3d5['distribution']=formatResult(_0x241aff,0x3),_0x3ee3d5[_0x5da829(0x1b9)]=formatResult(_0x482172,0x3),_0x3ee3d5[_0x5da829(0x20a)]=formatResult(_0x3b3759,0x8),_0x3ee3d5['side']='',_0x3ee3d5[_0x5da829(0x19d)]=![];if(_0x3ee3d5[_0x5da829(0x1ae)]!=config[_0x5da829(0x138)]){if(_0x3ee3d5['distribution']>_0x482172)_0x3ee3d5[_0x5da829(0x23a)]=_0x5da829(0x206),_0x3ee3d5[_0x5da829(0x19d)]=checkMinimums(_0x3ee3d5);else _0x3ee3d5[_0x5da829(0x215)]<_0x482172&&(_0x3ee3d5[_0x5da829(0x23a)]=_0x5da829(0x1e9),_0x3ee3d5[_0x5da829(0x19d)]=checkMinimums(_0x3ee3d5));}_0x3ee3d5['delta']=_0x3ee3d5[_0x5da829(0x215)]/_0x3ee3d5[_0x5da829(0x1b9)]-0x1;if(_0x3ee3d5[_0x5da829(0x279)]==_0x5da829(0x166)||_0x3ee3d5[_0x5da829(0x279)]=='canceled')_0x3ee3d5[_0x5da829(0x279)]=_0x5da829(0x1da);}),currentCoins[_0xb6a6c(0x156)]((_0x5a50f5,_0x47ceee)=>_0x5a50f5['delta']<_0x47ceee[_0xb6a6c(0x225)]?0x1:_0x47ceee[_0xb6a6c(0x225)]<_0x5a50f5['delta']?-0x1:0x0);const _0x527cb1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x527cb1[_0xb6a6c(0x238)],'usd':_0x527cb1[_0xb6a6c(0x2d5)],'portfolio':JSON[_0xb6a6c(0x193)](currentCoins),'threshold':_0x5e70e2},proxyEmit(_0xb6a6c(0x2cb),{'serverversion':serverversion,'balances':lastBalances});if(_0x2688a5){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5e70e2});else{if(lockOrders==ORDERS[_0xb6a6c(0x27c)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5e70e2});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x49d18b=getNormalizedPerformance();getStartingBalances(_0x49d18b),emitPerformance(_0x49d18b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x48f59f=getNormalizedPerformance();emitPerformance(_0x48f59f),getStartingBalances(_0x48f59f),logger['debug'](_0xb6a6c(0x1a0));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x40c801=_0x4ea7c4;if(!lastBalances)return;let _0x2b01b0=[],_0x5107ca,_0x57fbd2=JSON[_0x40c801(0x199)](lastBalances[_0x40c801(0x132)]);_0x57fbd2['sort']((_0x9c9820,_0x558d0d)=>_0x9c9820[_0x40c801(0x1ae)]>_0x558d0d[_0x40c801(0x1ae)]?0x1:_0x558d0d[_0x40c801(0x1ae)]>_0x9c9820[_0x40c801(0x1ae)]?-0x1:0x0),_0x57fbd2[_0x40c801(0x267)](_0x4bbeb5=>{const _0x94068d=_0x40c801;let _0x2dbc3c={'coin':_0x4bbeb5[_0x94068d(0x1ae)],'number':_0x4bbeb5[_0x94068d(0x1f2)],'price':_0x4bbeb5[_0x94068d(0x198)]};_0x2b01b0[_0x94068d(0x1b1)](_0x2dbc3c);});const _0x4db00e=await getFiat();_0x5107ca={'date':lastBalances['time'][_0x40c801(0x158)]('\x20')[0x0],'eur':_0x4db00e[_0x40c801(0x238)],'usd':_0x4db00e['usd'],'coins':_0x2b01b0};let _0x4d1398=dbPerformance[_0x40c801(0x1c7)](_0x40c801(0x212))[_0x40c801(0x1f7)]({'date':_0x5107ca[_0x40c801(0x292)]})[_0x40c801(0x2c4)]();_0x4d1398?_0x5107ca[_0x40c801(0x292)]!=config['startdate']&&dbPerformance[_0x40c801(0x1c7)](_0x40c801(0x212))[_0x40c801(0x1f7)]({'date':_0x5107ca[_0x40c801(0x292)]})['assign'](_0x5107ca)[_0x40c801(0x136)]():dbPerformance[_0x40c801(0x1c7)](_0x40c801(0x212))[_0x40c801(0x1b1)](_0x5107ca)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x538dad=_0x4ea7c4;let _0x4729d7=[];if(dbPerformance[_0x538dad(0x2d0)](_0x538dad(0x212))['value']()){let _0xc98c20=dbPerformance[_0x538dad(0x1c7)](_0x538dad(0x212))['cloneDeep']()['filter'](_0x34cd11=>{const _0x46f5ea=_0x538dad;if(_0x34cd11[_0x46f5ea(0x2d7)][_0x46f5ea(0x224)]==0x0)return![];else return!![];})['sortBy']('date')['value'](),_0x3d4961=[...config[_0x538dad(0x1f3)]];_0x3d4961[_0x538dad(0x156)]((_0x1f7260,_0x2aa25c)=>_0x1f7260['date']>_0x2aa25c['date']?-0x1:_0x2aa25c['date']>_0x1f7260[_0x538dad(0x292)]?0x1:0x0);let _0x19ba01=0x1,_0x4ded9f=[],_0x4c647e=0x0;_0xc98c20[_0x538dad(0x172)]()[_0x538dad(0x2bd)]()[_0x538dad(0x267)]((_0x144af6,_0x25e600)=>{const _0x15349d=_0x538dad;if(_0x3d4961[_0x4c647e]){if(_0xc98c20[_0xc98c20[_0x15349d(0x224)]-_0x25e600]&&_0x3d4961[_0x4c647e][_0x15349d(0x292)]==_0xc98c20[_0xc98c20['length']-_0x25e600][_0x15349d(0x292)]){if(_0x25e600<_0xc98c20['length']){let _0x3503cd=0x0,_0x3cdf5d=0x0;_0xc98c20[_0xc98c20['length']-_0x25e600]['coins'][_0x15349d(0x267)](_0x29553f=>{const _0x237d41=_0x15349d;_0x3cdf5d+=_0x29553f[_0x237d41(0x1f2)]*_0x29553f['price'];}),_0x3d4961[_0x4c647e][_0x15349d(0x22f)]['forEach'](_0x5e6b0b=>{const _0x309b43=_0x15349d;_0x3503cd+=_0x5e6b0b[_0x309b43(0x1f2)]*_0x5e6b0b[_0x309b43(0x1a5)];}),_0x19ba01*=_0x3503cd/(_0x3cdf5d-_0x3503cd)+0x1;}_0x4c647e++;}}let _0x376e1a=0x0;_0x144af6[_0x15349d(0x2d7)][_0x15349d(0x267)](_0xdf7218=>{_0x376e1a+=_0xdf7218['number']*_0xdf7218['price'];}),_0x4ded9f[_0xc98c20[_0x15349d(0x224)]-_0x25e600-0x1]=_0x376e1a*(_0x19ba01-0x1);});let _0x57b648=[];_0x3d4961=[...config[_0x538dad(0x1f3)]]||[];let _0x4a083b=0x0;_0x4c647e=0x0,_0xc98c20['forEach']((_0x6f9f98,_0x2d6981)=>{const _0x291424=_0x538dad;if(_0x3d4961[_0x4c647e]){const _0x505d4d=fns[_0x291424(0x199)](_0x3d4961[_0x4c647e][_0x291424(0x292)],_0x291424(0x21c),new Date()),_0x42ebc4=fns[_0x291424(0x199)](_0x6f9f98[_0x291424(0x292)],'yyyy/MM/dd',new Date());if(fns[_0x291424(0x1a4)](_0x505d4d,_0x42ebc4)){let _0x2130f0=0x0;_0x3d4961[_0x4c647e][_0x291424(0x22f)][_0x291424(0x267)](_0x4f1017=>{const _0x33df51=_0x291424;!_0x57b648[_0x4f1017['coin']]?_0x57b648[_0x4f1017[_0x33df51(0x1ae)]]=_0x4f1017['number']:(_0x2130f0=_0x57b648[_0x4f1017['coin']],_0x57b648[_0x4f1017[_0x33df51(0x1ae)]]+=_0x4f1017[_0x33df51(0x1f2)]);const _0x4a8005=_0x6f9f98['coins'][_0x33df51(0x1f7)](_0x2a8b89=>_0x2a8b89[_0x33df51(0x1ae)]==_0x4f1017[_0x33df51(0x1ae)]);(!_0x4a8005||_0x4a8005['number']==0x0)&&(_0x4a083b+=(-_0x4f1017[_0x33df51(0x1f2)]-_0x2130f0)*_0x4f1017[_0x33df51(0x1a5)]);}),_0x4c647e++;}}_0x6f9f98[_0x291424(0x2d7)][_0x291424(0x267)]((_0x40ef16,_0x37a443)=>{const _0x233352=_0x291424;_0x57b648[_0x40ef16[_0x233352(0x1ae)]]&&(_0x40ef16['initial']=_0x57b648[_0x40ef16[_0x233352(0x1ae)]]);}),_0x4729d7['push']({'date':_0x6f9f98[_0x291424(0x292)],'eur':_0x6f9f98[_0x291424(0x238)],'usd':_0x6f9f98[_0x291424(0x2d5)],'offset':_0x4ded9f[_0x2d6981],'netoffset':_0x4a083b,'coins':_0x6f9f98[_0x291424(0x2d7)]});});}return _0x4729d7;}function emitPerformance(_0x14d536){const _0x5a28af=_0x4ea7c4;_0x14d536[_0x5a28af(0x224)]!==0x0?(proxyEmit(_0x5a28af(0x203),_0x14d536),lastPerformanceEmitted=getDate()):proxyEmit(_0x5a28af(0x203),[]);}function getPerf(_0x10c71d,_0x666df5){const _0x4cfbd5=_0x4ea7c4;let _0x2f9d85=0x0,_0x14e393=0x0,_0x16ded6=0x0;_0x10c71d[_0x4cfbd5(0x2d7)]['forEach'](_0x405105=>{const _0x1b5f0b=_0x4cfbd5;_0x2f9d85+=_0x405105[_0x1b5f0b(0x1f2)]*_0x405105[_0x1b5f0b(0x1a5)];});_0x666df5&&(_0x2f9d85+=_0x10c71d[_0x4cfbd5(0x282)]);if(config[_0x4cfbd5(0x138)]===_0x4cfbd5(0x245)||config['basecoin']==='ETH')_0x14e393=_0x2f9d85*_0x10c71d['eur'],_0x16ded6=_0x2f9d85*_0x10c71d[_0x4cfbd5(0x2d5)];else{if(usdBasecoins[_0x4cfbd5(0x150)](config[_0x4cfbd5(0x138)]))_0x14e393=_0x2f9d85*_0x10c71d[_0x4cfbd5(0x238)]/_0x10c71d[_0x4cfbd5(0x2d5)],_0x16ded6=_0x2f9d85;else config[_0x4cfbd5(0x138)]===_0x4cfbd5(0x15f)&&(_0x14e393=_0x2f9d85,_0x16ded6=_0x2f9d85*_0x10c71d['usd']/_0x10c71d[_0x4cfbd5(0x238)]);}return[_0x2f9d85,_0x14e393,_0x16ded6];}function getKPIs(_0x4703a7,_0x3563ea=_0x4ea7c4(0x15f)){const _0x5ce17c=_0x4ea7c4,_0x3da5e0=config[_0x5ce17c(0x138)],_0x212bdb=lastBalances,_0x4718fd=currentCoins,_0x5e3764=getNormalizedPerformance(),_0x57bfe7=_0x4703a7===_0x5ce17c(0x138)?_0x3da5e0:_0x4703a7===_0x5ce17c(0x1b8)||_0x4703a7===_0x5ce17c(0x151)?_0x3563ea:_0x5ce17c(0x17a)+_0x3da5e0,_0x345ec=_0x4703a7===_0x5ce17c(0x2b3)?_0x5ce17c(0x176):_0x4703a7===_0x5ce17c(0x151)?_0x5ce17c(0x176):_0x57bfe7+'\x20value',_0x2b3b97=_0x4703a7===_0x5ce17c(0x2b3)||_0x4703a7==='net-fiat'?_0x5ce17c(0x176):_0x57bfe7+_0x5ce17c(0x153);let _0x207c74=0x0;_0x4718fd[_0x5ce17c(0x267)](_0x34ec5f=>{const _0x11abe7=_0x5ce17c;_0x207c74+=_0x34ec5f[_0x11abe7(0x1f2)]*_0x34ec5f[_0x11abe7(0x198)];});if(_0x4703a7===_0x5ce17c(0x1b8)||_0x4703a7===_0x5ce17c(0x151)){if(_0x3da5e0===_0x5ce17c(0x245)||_0x3da5e0===_0x5ce17c(0x297))_0x207c74=_0x207c74*(_0x3563ea==='EUR'?_0x212bdb[_0x5ce17c(0x238)]:_0x212bdb[_0x5ce17c(0x2d5)]);else{if(usdBasecoins['includes'](_0x3da5e0))_0x207c74=_0x207c74*(_0x3563ea===_0x5ce17c(0x15f)?_0x212bdb[_0x5ce17c(0x238)]/_0x212bdb[_0x5ce17c(0x2d5)]:0x1);else _0x3da5e0==='EUR'&&(_0x207c74=_0x207c74*(_0x3563ea===_0x5ce17c(0x15f)?0x1:_0x212bdb[_0x5ce17c(0x2d5)]/_0x212bdb[_0x5ce17c(0x238)]));}}let _0x425a31;if(_0x207c74!==0x0){if(_0x4703a7==='basecoin')_0x425a31=(_0x207c74/startingBalances[_0x5ce17c(0x138)]-0x1)*0x64;else{if(_0x3563ea===_0x5ce17c(0x15f))_0x425a31=(_0x207c74/startingBalances[_0x5ce17c(0x238)]-0x1)*0x64;else _0x425a31=(_0x207c74/startingBalances[_0x5ce17c(0x2d5)]-0x1)*0x64;}let _0x2dc983=0x0;if(startingBalances[_0x5ce17c(0x2d7)])_0x4718fd[_0x5ce17c(0x267)](_0x438218=>{const _0x38cff7=_0x5ce17c;let _0x4a15ab=startingBalances[_0x38cff7(0x2d7)][_0x38cff7(0x1f7)](_0x51580f=>_0x51580f['coin']===_0x438218[_0x38cff7(0x1ae)]);if(_0x4a15ab&&_0x4a15ab[_0x38cff7(0x1ae)]&&_0x438218[_0x38cff7(0x1f2)]!==0x0)_0x2dc983+=_0x4a15ab[_0x38cff7(0x1f2)]*_0x438218[_0x38cff7(0x198)];});let _0x1b9474=0x0;if(_0x5e3764[_0x5ce17c(0x224)]!==0x0){let _0x48ec53=_0x5e3764[_0x5e3764[_0x5ce17c(0x224)]-0x1];_0x1b9474=_0x48ec53['netoffset'];}_0x2dc983-=_0x1b9474;_0x4703a7===_0x5ce17c(0x2b3)&&(_0x425a31=(_0x207c74-_0x2dc983)/startingBalances[_0x5ce17c(0x138)]*0x64,_0x207c74=_0x207c74-_0x2dc983);if(_0x4703a7===_0x5ce17c(0x151)){let _0x1921cb=_0x3563ea===_0x5ce17c(0x15f)?startingBalances[_0x5ce17c(0x238)]:startingBalances[_0x5ce17c(0x2d5)];if(_0x3da5e0===_0x5ce17c(0x245)||_0x3da5e0===_0x5ce17c(0x297))_0x2dc983=_0x3563ea===_0x5ce17c(0x15f)?_0x2dc983*_0x212bdb[_0x5ce17c(0x238)]:_0x2dc983*_0x212bdb[_0x5ce17c(0x2d5)];else{if(usdBasecoins['includes'](_0x3da5e0))_0x2dc983=_0x3563ea===_0x5ce17c(0x15f)?_0x2dc983*_0x212bdb[_0x5ce17c(0x238)]/_0x212bdb[_0x5ce17c(0x2d5)]:_0x2dc983;else _0x3da5e0==='EUR'&&(_0x2dc983=_0x3563ea===_0x5ce17c(0x15f)?_0x2dc983:_0x2dc983*_0x212bdb[_0x5ce17c(0x2d5)]/_0x212bdb[_0x5ce17c(0x238)]);}_0x425a31=(_0x207c74-_0x2dc983)/_0x1921cb*0x64,_0x207c74=_0x207c74-_0x2dc983;}if(_0x425a31){if(_0x425a31<0x64)_0x425a31=_0x425a31['toFixed'](0x2);else{if(_0x425a31<0x3e8)_0x425a31=_0x425a31[_0x5ce17c(0x233)](0x1);else _0x425a31=_0x425a31[_0x5ce17c(0x233)](0x0);}}else _0x425a31=Number('0')['toFixed'](0x2);if(_0x207c74){if(Math['abs'](_0x207c74)<0.000001)_0x207c74=_0x207c74['toFixed'](0x2);else{if(Math[_0x5ce17c(0x146)](_0x207c74)<0.1)_0x207c74=_0x207c74[_0x5ce17c(0x233)](0x6);else{if(Math['abs'](_0x207c74)<0x1)_0x207c74=_0x207c74[_0x5ce17c(0x233)](0x5);else{if(Math[_0x5ce17c(0x146)](_0x207c74)<0xa)_0x207c74=_0x207c74[_0x5ce17c(0x233)](0x4);else{if(Math[_0x5ce17c(0x146)](_0x207c74)<0x64)_0x207c74=_0x207c74[_0x5ce17c(0x233)](0x3);else{if(Math['abs'](_0x207c74)<0x3e8)_0x207c74=_0x207c74[_0x5ce17c(0x233)](0x2);else _0x207c74=_0x207c74['toFixed'](0x2);}}}}}}else _0x207c74=Number('0')[_0x5ce17c(0x233)](0x2);}else _0x425a31=Number('0')[_0x5ce17c(0x233)](0x2);return{'value':_0x207c74,'change':_0x425a31,'leftTxt':_0x345ec,'rightTxt':_0x2b3b97};}async function getStartingBalances(_0x2c123a,_0x8f7c65=!![]){const _0x16efc1=_0x4ea7c4;if(_0x2c123a[_0x16efc1(0x224)]!==0x0){const [_0x503342,_0x4a8c35,_0x15790e]=getPerf(_0x2c123a[0x0],!![]);let _0x2e073e=[];config['portfolio']['forEach'](_0x318e7a=>{const _0x4a0239=_0x16efc1;let _0x3bd750=0x0,_0x39e69c;config[_0x4a0239(0x1f3)][_0x4a0239(0x267)](_0x28e54b=>{const _0x4c3b76=_0x4a0239;let _0xb03e8c=_0x28e54b[_0x4c3b76(0x22f)][_0x4c3b76(0x1f7)](_0x2cbcac=>_0x2cbcac[_0x4c3b76(0x1ae)]==_0x318e7a['coin']);if(_0xb03e8c){_0x3bd750+=_0xb03e8c['number'];if(!_0x39e69c)_0x39e69c=_0xb03e8c[_0x4c3b76(0x1a5)];}}),_0x2e073e[_0x4a0239(0x1b1)]({'coin':_0x318e7a[_0x4a0239(0x1ae)],'number':_0x3bd750,'initialprice':_0x39e69c});});const _0x26685f={'basecoin':_0x503342,'eur':_0x4a8c35,'usd':_0x15790e,'coins':_0x2e073e};if(_0x8f7c65)proxyEmit('starting-balances',_0x26685f);startingBalances=_0x26685f;}}function headlessMode(_0x16d87f){const _0x12db4e=_0x4ea7c4;let _0x5ca9b8=_0x16d87f['portfolio'],_0x78a202=_0x16d87f['threshold'],_0x20bfb3=[];for(let _0x1d05b1 of _0x5ca9b8){if(_0x1d05b1[_0x12db4e(0x1ae)]!=config[_0x12db4e(0x138)]){if(_0x1d05b1['delta']>=_0x78a202/0x64){if(_0x1d05b1[_0x12db4e(0x19d)])_0x20bfb3[_0x12db4e(0x1b1)](_0x1d05b1);}else{if(_0x1d05b1[_0x12db4e(0x225)]<=-_0x78a202/0x64){if(_0x1d05b1[_0x12db4e(0x19d)])_0x20bfb3[_0x12db4e(0x1b1)](_0x1d05b1);}}}}_0x20bfb3['length']>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x20bfb3[_0x12db4e(0x267)](_0x689ede=>{const _0xc28acd=_0x12db4e;logger['debug'](_0xc28acd(0x1c4)+_0x689ede[_0xc28acd(0x1ae)]+'\x20'+_0x689ede['number']+'\x20'+_0x689ede['last']+'\x20'+_0x689ede['distribution']+'%\x20'+_0x689ede['target']+'%\x20'+(0x64*_0x689ede['delta'])['toFixed'](0x2)+_0xc28acd(0x2d3)+_0x78a202[_0xc28acd(0x233)](0x2)+'%)');}),placeOrder(_0x20bfb3));}function notifyBalance(_0x52e355){const _0x587d20=_0x4ea7c4;let _0x534d61=_0x52e355['portfolio'],_0x66ce53=_0x52e355[_0x587d20(0x280)],_0x3babd6=[];for(let _0x27cc9b of _0x534d61){if(_0x27cc9b[_0x587d20(0x1ae)]!=config[_0x587d20(0x138)]){if(_0x27cc9b[_0x587d20(0x225)]>=_0x66ce53/0x64){if(_0x27cc9b[_0x587d20(0x19d)])_0x3babd6[_0x587d20(0x1b1)](_0x27cc9b);}else{if(_0x27cc9b[_0x587d20(0x225)]<=-_0x66ce53/0x64){if(_0x27cc9b[_0x587d20(0x19d)])_0x3babd6['push'](_0x27cc9b);}}}}if(_0x3babd6[_0x587d20(0x224)]>0x0){let _0xd7c9ea=_0x3babd6[_0x587d20(0x19c)](_0x2415b1=>_0x2415b1[_0x587d20(0x1ae)]);_0xd7c9ea[_0x587d20(0x156)]();let _0xcf299f=_0xd7c9ea[_0x587d20(0x1df)](',\x20');if(!lastCoinsToBalance)logHistory(_0x587d20(0x24f),_0x587d20(0x1be));lastCoinsToBalance=_0xcf299f;}}function symbolToCoin(_0x46c584){const _0x23e868=_0x4ea7c4;let _0x12a9b0;if(_0x46c584[_0x23e868(0x150)]('/'+config[_0x23e868(0x138)]))_0x12a9b0=_0x46c584[_0x23e868(0x284)]('/'+config[_0x23e868(0x138)],'');if(_0x46c584[_0x23e868(0x150)](config['basecoin']+'/'))_0x12a9b0=_0x46c584[_0x23e868(0x284)](config[_0x23e868(0x138)]+'/','');return _0x12a9b0;}async function unlockOrders(){const _0xc311bb=_0x4ea7c4;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0xc311bb(0x255)](_0xc311bb(0x142)),lockOrders=ORDERS[_0xc311bb(0x201)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x19951b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x19951b,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0xc311bb(0x27c)],logger[_0xc311bb(0x255)](_0xc311bb(0x175));}}async function validateOrders(_0x423918){const _0xcda90=_0x4ea7c4;if(_0x423918)validateOrdersState=_0x423918;logger[_0xcda90(0x255)](_0xcda90(0x17e)+validateOrdersState+_0xcda90(0x209)+(lockOrders==0x1?_0xcda90(0x1f1):lockOrders==0x2?_0xcda90(0x152):'ORDERS.UNLOCKED'));let _0x201a48=[],_0x58d65f=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xcda90(0x1ad)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xcda90(0x1cc)])return;logger[_0xcda90(0x255)](_0xcda90(0x1c5)+validateOrdersState),lastOrders[_0xcda90(0x267)](_0x546f57=>{const _0x5c334c=_0xcda90;let _0x426073=![];_0x546f57[_0x5c334c(0x166)]>0x0&&(_0x426073=!![]),_0x201a48[_0x5c334c(0x1b1)](_0x426073),_0x426073&&config['ordertype']!=_0x5c334c(0x1a8)&&logHistory(_0x5c334c(0x1ec),_0x5c334c(0x2c3)+_0x546f57[_0x5c334c(0x1ca)]+'\x20'+_0x546f57['side']+'\x20#'+formatResult(_0x546f57[_0x5c334c(0x166)],0x8)+'\x20@'+formatResult(_0x546f57[_0x5c334c(0x1a5)],0x8));}),_0x201a48[_0xcda90(0x267)]((_0x1ee40f,_0x351d1e)=>{if(_0x1ee40f)lastOrders['splice'](_0x351d1e,0x1);}),persistOpenOrders(lastOrders);const _0x24772f=coolingDown?_0xcda90(0x1d5):_0xcda90(0x226);if(validateOrdersState==_0xcda90(0x1dd)){validateOrdersState=_0xcda90(0x229);if(_0x201a48['includes'](![])){if(config[_0xcda90(0x23d)]==_0xcda90(0x1a8)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0xcda90(0x229)){if(_0x201a48['includes'](![])){}else{if(allOrdersPlaced){if(config[_0xcda90(0x23d)]==_0xcda90(0x1a8)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x201a48[_0xcda90(0x150)](![])&&(config['ordertype']==_0xcda90(0x1a8)?logHistory(_0xcda90(0x25f),_0xcda90(0x14b)+Math[_0xcda90(0x244)](_0x58d65f*validateOrderInterval/0xea60)+_0xcda90(0x299)+_0x24772f):(await cancelOrders(),logHistory(_0xcda90(0x25f),_0xcda90(0x2a3)+Math['round'](_0x58d65f*validateOrderInterval/0xea60)+_0xcda90(0x299)+_0x24772f))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0xcda90(0x23d)]!=_0xcda90(0x1a8))logHistory(_0xcda90(0x25f),_0xcda90(0x26c)+_0x24772f);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x40e523=>{const _0x5a336e=_0x4350;try{const _0x40d083=await exchange[_0x5a336e(0x220)](_0x40e523['orderId'],_0x40e523['symbol']);}catch(_0x4eb388){if(_0x4eb388['toString']()['includes'](_0x5a336e(0x139))){}else await handleError(_0x4eb388,_0x5a336e(0x240));}});}async function initCoinResults(_0x1b9078){const _0x433cb4=_0x4ea7c4;_0x1b9078?logger[_0x433cb4(0x255)](_0x433cb4(0x286)+_0x1b9078):logger[_0x433cb4(0x255)]('Initializing\x20coin\x20results'),config[_0x433cb4(0x132)][_0x433cb4(0x267)](_0x567668=>{const _0x52d535=_0x433cb4;if(!_0x567668[_0x52d535(0x25a)]&&_0x567668[_0x52d535(0x1ae)]!=config[_0x52d535(0x138)]){const _0xd72fbd=currentCoins[_0x52d535(0x1f7)](_0x985ca6=>_0x985ca6[_0x52d535(0x1ae)]==_0x567668['coin']),_0x27bfaf=global[_0x52d535(0x1c8)][noslash(_0x567668[_0x52d535(0x1ca)])];let _0x49659f=_0xd72fbd?_0xd72fbd[_0x52d535(0x1f2)]:null,_0x16fab3=_0x567668[_0x52d535(0x2bd)]?0x1/_0x27bfaf:_0x27bfaf,_0x2ac142;config[_0x52d535(0x1f3)][_0x52d535(0x267)](_0x272bfb=>{const _0xb73be=_0x52d535;!_0x2ac142&&(_0x2ac142=_0x272bfb['changes']['find'](_0x4a441e=>_0x4a441e['coin']==_0x567668[_0xb73be(0x1ae)]),_0x2ac142&&(_0x49659f=_0x2ac142['number'],_0x16fab3=_0x2ac142[_0xb73be(0x1a5)]));});let _0x23b637=dbCoinResults[_0x52d535(0x1c7)]('coins')[_0x52d535(0x1f7)]({'coin':_0x567668[_0x52d535(0x1ae)]})['value']();if(!_0x23b637){const _0x590e84={'coin':_0x567668[_0x52d535(0x1ae)],'number':_0x49659f,'breakeven':_0x16fab3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x52d535(0x1c7)](_0x52d535(0x2d7))[_0x52d535(0x1b1)](_0x590e84)[_0x52d535(0x136)]();}else{if(_0x1b9078&&_0x567668[_0x52d535(0x1ae)]==_0x1b9078){const _0x574d61={'coin':_0x567668['coin'],'number':_0x49659f,'breakeven':_0x16fab3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x52d535(0x2d7))['find']({'coin':_0x567668[_0x52d535(0x1ae)]})[_0x52d535(0x217)](_0x574d61)[_0x52d535(0x136)]();}}}});}async function updateCoinResults(_0x20e511,_0x483d82=![]){const _0x33fced=_0x4ea7c4;let _0x3610e2,_0x553250,_0x28e1b3,_0x42cdc2,_0x469096,_0x47f5ad,_0x2d6d19=dbCoinResults[_0x33fced(0x1c7)]('coins')[_0x33fced(0x1f7)]({'coin':_0x20e511[_0x33fced(0x1ae)]})[_0x33fced(0x2c4)](),_0x4269b7=![];_0x2d6d19&&Object['entries'](_0x2d6d19)['forEach'](([_0x595e32,_0x287378])=>{if(_0x287378==null)_0x4269b7=!![];});(!_0x2d6d19||_0x4269b7)&&(await initCoinResults(_0x20e511[_0x33fced(0x1ae)]),_0x2d6d19=dbCoinResults['get'](_0x33fced(0x2d7))[_0x33fced(0x1f7)]({'coin':_0x20e511[_0x33fced(0x1ae)]})['value']());_0x20e511[_0x33fced(0x2bd)]&&(_0x47f5ad={'filled':_0x20e511[_0x33fced(0x166)]*_0x20e511[_0x33fced(0x1a5)],'amount':_0x20e511['filled']*_0x20e511[_0x33fced(0x1a5)],'side':_0x20e511[_0x33fced(0x23a)]==_0x33fced(0x206)?'buy':'sell','price':0x1/_0x20e511[_0x33fced(0x1a5)]},_0x20e511={..._0x20e511,..._0x47f5ad});_0x483d82?_0x553250=_0x20e511[_0x33fced(0x23a)]==_0x33fced(0x1e9)?_0x2d6d19['number']+_0x20e511[_0x33fced(0x166)]:_0x2d6d19['number']-_0x20e511[_0x33fced(0x166)]:_0x553250=await getCoinNumber(_0x20e511[_0x33fced(0x1ae)]);if(_0x20e511[_0x33fced(0x22e)]&&_0x20e511[_0x33fced(0x22e)]['currency']==config['basecoin'])_0x3610e2=_0x20e511[_0x33fced(0x22e)][_0x33fced(0x13a)];else{if(_0x20e511['fee']&&_0x20e511['fee']['currency']==_0x33fced(0x197)&&!_0x483d82)_0x3610e2=_0x20e511['fee'][_0x33fced(0x13a)]*global[_0x33fced(0x1c8)]['BNB'+config[_0x33fced(0x138)]];else _0x3610e2=defaultFee*_0x20e511['filled']*_0x20e511[_0x33fced(0x1a5)];}_0x20e511['side']==_0x33fced(0x1e9)?(_0x28e1b3=_0x553250!=0x0?(_0x2d6d19[_0x33fced(0x205)]*_0x2d6d19[_0x33fced(0x1f2)]+_0x20e511[_0x33fced(0x1a5)]*(_0x553250-_0x2d6d19[_0x33fced(0x1f2)])+_0x3610e2)/_0x553250:0x0,_0x42cdc2=_0x2d6d19[_0x33fced(0x2b8)]):(_0x28e1b3=_0x553250!=0x0?(_0x2d6d19[_0x33fced(0x205)]*_0x2d6d19[_0x33fced(0x1f2)]-_0x20e511[_0x33fced(0x1a5)]*(_0x2d6d19['number']-_0x553250)+_0x3610e2)/_0x553250:0x0,_0x42cdc2=_0x2d6d19['realized']+(_0x20e511[_0x33fced(0x1a5)]-_0x2d6d19[_0x33fced(0x205)])*_0x20e511['filled']);_0x469096=(_0x20e511[_0x33fced(0x1a5)]-_0x28e1b3-_0x3610e2/_0x20e511[_0x33fced(0x166)])*_0x553250;let _0x166852={'coin':_0x20e511[_0x33fced(0x1ae)],'number':_0x553250,'breakeven':formatResult(_0x28e1b3,0x8),'realized':formatResult(_0x42cdc2,0x8),'unrealized':formatResult(_0x469096,0x8),'fees':formatResult(_0x2d6d19[_0x33fced(0x248)]+_0x3610e2,0x8),'sells':_0x20e511[_0x33fced(0x23a)]==_0x33fced(0x206)?_0x2d6d19[_0x33fced(0x25b)]+0x1:_0x2d6d19[_0x33fced(0x25b)],'buys':_0x20e511[_0x33fced(0x23a)]==_0x33fced(0x1e9)?_0x2d6d19[_0x33fced(0x135)]+0x1:_0x2d6d19[_0x33fced(0x135)]};dbCoinResults['get'](_0x33fced(0x2d7))[_0x33fced(0x1f7)]({'coin':_0x20e511[_0x33fced(0x1ae)]})[_0x33fced(0x217)](_0x166852)[_0x33fced(0x136)]();if(!_0x483d82){if(_0x20e511[_0x33fced(0x22e)]&&_0x20e511[_0x33fced(0x22e)]['currency']==_0x33fced(0x197)){const _0x30c881=currentCoins['find'](_0x13f62=>_0x13f62[_0x33fced(0x1ae)]==_0x33fced(0x197));if(_0x30c881){let _0x4b25a7=dbCoinResults[_0x33fced(0x1c7)]('coins')[_0x33fced(0x1f7)]({'coin':_0x33fced(0x197)})[_0x33fced(0x2c4)]();_0x166852={..._0x4b25a7,'number':_0x30c881[_0x33fced(0x1f2)]},dbCoinResults[_0x33fced(0x1c7)](_0x33fced(0x2d7))['find']({'coin':_0x33fced(0x197)})[_0x33fced(0x217)](_0x166852)[_0x33fced(0x136)]();}}}}async function placeOrder(_0x4fb3d5){const _0x5981c8=_0x4ea7c4,_0x5dab8f=config[_0x5981c8(0x23d)]==_0x5981c8(0x1a8)?_0x5981c8(0x1a8):'limit';if(lockOrders==ORDERS[_0x5981c8(0x27c)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x5981c8(0x1dd);let _0x3d44fd=![];lastOrders=[];for(const _0x4703f6 of _0x4fb3d5){let _0x312ebc,_0x2ccec1,_0x38a628,_0x4e277f,_0x20018e,_0x124fd1=_0x4703f6[_0x5981c8(0x1ca)];try{const _0x162d05=await exchange['fetchTicker'](_0x124fd1);_0x312ebc=_0x4703f6['reverse']?0x1/_0x4703f6['last']:_0x4703f6[_0x5981c8(0x198)],_0x2ccec1=_0x162d05[_0x5981c8(0x2a0)],_0x38a628=_0x162d05[_0x5981c8(0x250)];_0x4703f6['reverse']?(_0x4e277f=_0x4703f6[_0x5981c8(0x23a)]=='buy'?_0x5981c8(0x206):'buy',_0x20018e=Math[_0x5981c8(0x146)](_0x4703f6[_0x5981c8(0x20a)])/_0x312ebc):(_0x4e277f=_0x4703f6[_0x5981c8(0x23a)],_0x20018e=Math[_0x5981c8(0x146)](_0x4703f6[_0x5981c8(0x20a)]));_0x5dab8f==_0x5981c8(0x17d)&&(config[_0x5981c8(0x23d)]==_0x5981c8(0x2bc)&&(_0x312ebc=_0x4e277f==_0x5981c8(0x1e9)?_0x2ccec1:_0x38a628),config['ordertype']==_0x5981c8(0x18e)&&(_0x312ebc=_0x4e277f==_0x5981c8(0x1e9)?_0x38a628:_0x2ccec1));_0x20018e=formatResult(_0x20018e,0x8),_0x312ebc=formatResult(_0x312ebc,0x8);const _0x47b79d=_0x4e277f==_0x5981c8(0x206)?config[_0x5981c8(0x265)]?String[_0x5981c8(0x137)]('0x'+config[_0x5981c8(0x265)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x5981c8(0x20c)])+'\x20':'',_0x4ff7cd=_0x5dab8f=='market'?_0x5981c8(0x2c2):config[_0x5981c8(0x23d)]=='limit-high'?_0x5981c8(0x232):_0x5981c8(0x160),_0x53ddf0=(Math[_0x5981c8(0x2c9)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x5981c8(0x184)]();lastOrders[_0x5981c8(0x1b1)]({'customId':_0x53ddf0,'symbol':_0x124fd1,'coin':_0x4703f6[_0x5981c8(0x1ae)],'amount':_0x20018e,'price':_0x312ebc,'side':_0x4e277f,'reverse':_0x4703f6[_0x5981c8(0x2bd)],'filled':0x0});if(_0x5dab8f==_0x5981c8(0x1a8))logHistory(_0x5981c8(0x1ec),''+_0x47b79d+_0x4ff7cd+_0x5981c8(0x13c)+_0x124fd1+'\x20'+_0x4e277f+'\x20#'+formatResult(_0x20018e,0x8)+'\x20@'+formatResult(_0x312ebc,0x8));else logHistory(_0x5981c8(0x1ec),''+_0x47b79d+_0x4ff7cd+_0x5981c8(0x13c)+_0x124fd1+'\x20'+_0x4e277f+'\x20#'+formatResult(_0x20018e,0x8)+'\x20@'+formatResult(_0x312ebc,0x8));let _0x136141;_0x5dab8f=='market'?_0x4e277f=='buy'&&[_0x5981c8(0x24d),_0x5981c8(0x26d),'Cex',_0x5981c8(0x242),_0x5981c8(0x239)][_0x5981c8(0x150)](config[_0x5981c8(0x1ff)])?_0x136141=await exchange['createOrder'](_0x124fd1,_0x5dab8f,_0x4e277f,_0x20018e,_0x312ebc):_0x136141=await exchange[_0x5981c8(0x2bb)](_0x124fd1,_0x5dab8f,_0x4e277f,_0x20018e,undefined):_0x136141=await exchange[_0x5981c8(0x2bb)](_0x124fd1,_0x5dab8f,_0x4e277f,_0x20018e,_0x312ebc);logger[_0x5981c8(0x255)](_0x5981c8(0x29b)+_0x136141['id']+'\x20|\x20Custom\x20ID:\x20'+_0x53ddf0);const _0x30b006=lastOrders[_0x5981c8(0x224)]-0x1;if(_0x30b006>=0x0&&lastOrders[_0x30b006]['customId']==_0x53ddf0){lastOrders[_0x30b006][_0x5981c8(0x28a)]=_0x136141['id'];if(_0x136141[_0x5981c8(0x17b)])lastOrders[_0x30b006]['amount']=_0x136141[_0x5981c8(0x17b)];if(_0x136141[_0x5981c8(0x1a5)])lastOrders[_0x30b006][_0x5981c8(0x1a5)]=_0x136141[_0x5981c8(0x1a5)];lastOrders[_0x30b006][_0x5981c8(0x22e)]=_0x136141[_0x5981c8(0x22e)];}if(config[_0x5981c8(0x23e)]!=0x0){let _0x519d23=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x519d23=cooldownTracker[_0x5981c8(0x1fa)]();const _0x385da4=getTimeStamp();cooldownTracker['push'](_0x385da4);if(_0x519d23){const _0x434ce9=fns['differenceInSeconds'](new Date(_0x385da4),new Date(_0x519d23));if(_0x434ce9<cooldownInterval){logHistory(_0x5981c8(0x23c),_0x5981c8(0x13d)+config['cooldown']+_0x5981c8(0x1dc)+cooldownInterval/0x3c+_0x5981c8(0x1a9)+cooldownPeriod/(0xe10*0x3e8)+_0x5981c8(0x149)),coolingDown=!![];break;}}}}catch(_0x599c1d){if(_0x599c1d[_0x5981c8(0x184)]()['includes'](_0x5981c8(0x237)))lastOrders=lastOrders['filter'](_0x15f864=>_0x15f864[_0x5981c8(0x1ca)]!=_0x124fd1),logHistory(_0x5981c8(0x23c),_0x5981c8(0x1e8)+_0x124fd1),_0x3d44fd=!![];else{if(_0x599c1d['toString']()[_0x5981c8(0x150)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x5981c8(0x253)](_0x2567bc=>_0x2567bc[_0x5981c8(0x1ca)]!=_0x124fd1),logHistory('error',_0x5981c8(0x1c6)+_0x124fd1),_0x3d44fd=!![];else{if(_0x599c1d[_0x5981c8(0x184)]()[_0x5981c8(0x150)](_0x5981c8(0x2aa)))lastOrders=lastOrders[_0x5981c8(0x253)](_0x3d382a=>_0x3d382a[_0x5981c8(0x1ca)]!=_0x124fd1),logHistory(_0x5981c8(0x23c),_0x5981c8(0x143)+_0x124fd1),logger[_0x5981c8(0x255)](_0x599c1d),_0x3d44fd=!![];else _0x599c1d[_0x5981c8(0x184)]()['includes'](_0x5981c8(0x159))?(lastOrders=lastOrders['filter'](_0x2c7b87=>_0x2c7b87[_0x5981c8(0x1ca)]!=_0x124fd1),logHistory(_0x5981c8(0x23c),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x124fd1),_0x3d44fd=!![]):(lastOrders=lastOrders[_0x5981c8(0x253)](_0x2cc11a=>_0x2cc11a[_0x5981c8(0x1ca)]!=_0x124fd1),await handleError(_0x599c1d,_0x5981c8(0x169),_0x124fd1));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5e838c=config['ordertype']==_0x5981c8(0x1a8)?validateOrderTimeout*0x3c*0x3e8:config[_0x5981c8(0x1ad)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x472509=_0x5981c8;validateOrders(_0x472509(0x1aa));},_0x5e838c);}else unlockOrders();_0x3d44fd&&config[_0x5981c8(0x1f5)]&&(logHistory('error',_0x5981c8(0x1fd)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5981c8(0x25f),_0x5981c8(0x148)));}else{if(coolingDown)!config['headless']&&logHistory(_0x5981c8(0x23c),_0x5981c8(0x1ce));else lockOrders!=ORDERS[_0x5981c8(0x27c)]&&(!config[_0x5981c8(0x1f5)]&&(config['ordertype']=='market'?logHistory(_0x5981c8(0x23c),_0x5981c8(0x186)):logHistory(_0x5981c8(0x23c),_0x5981c8(0x27e))));}}function persistOpenOrders(_0x3b006){const _0x21fdb0=_0x4ea7c4,_0x278130={...config,'openOrders':_0x3b006};let _0x4059dd=dbConfig[_0x21fdb0(0x1c7)]('bot')[_0x21fdb0(0x1f7)]({'botID':botID})[_0x21fdb0(0x2c4)]();_0x4059dd&&dbConfig[_0x21fdb0(0x1c7)](_0x21fdb0(0x15d))[_0x21fdb0(0x1f7)]({'botID':botID})['assign'](_0x278130)[_0x21fdb0(0x136)]();}function restoreOrders(){const _0x2e38f6=_0x4ea7c4;let _0x19b522;config[_0x2e38f6(0x165)]&&allOpenOrders['forEach'](_0x140933=>{const _0x19e0ca=_0x2e38f6,_0x34374f=config[_0x19e0ca(0x165)][_0x19e0ca(0x1f7)](_0x37287b=>_0x37287b[_0x19e0ca(0x28a)]==_0x140933['id']);_0x34374f&&(lastOrders[_0x19e0ca(0x1b1)](_0x34374f),_0x19b522=_0x140933[_0x19e0ca(0x1b4)]);});if(lastOrders[_0x2e38f6(0x224)]>0x0){lockOrders=ORDERS[_0x2e38f6(0x1cc)],validateOrdersState=_0x2e38f6(0x229),allOrdersPlaced=!![];const _0x45ef2f=new Date()[_0x2e38f6(0x2c5)](),_0x5638f0=config['ordertype']==_0x2e38f6(0x1a8)?validateOrderTimeout*0x3c*0x3e8:config[_0x2e38f6(0x1ad)]*0x3c*0x3e8;if(_0x19b522+_0x5638f0>_0x45ef2f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1c0b85=_0x2e38f6;validateOrders(_0x1c0b85(0x1aa));},_0x19b522+_0x5638f0-_0x45ef2f);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x11917f=_0x4ea7c4;if(!coinsLoaded){process[_0x11917f(0x1ba)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3ad917=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x477cab='';if(config[_0x11917f(0x1c1)])_0x477cab=_0x11917f(0x145)+config[_0x11917f(0x16e)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x477cab=_0x11917f(0x296)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x238360=getKPIs(_0x11917f(0x138)),_0x58b6cb=getKPIs(_0x11917f(0x1b8),config[_0x11917f(0x1b8)]),_0x6a974=getKPIs(_0x11917f(0x2b3)),_0x2895cd=getKPIs(_0x11917f(0x151),config[_0x11917f(0x1b8)]);_0x477cab+=_0x11917f(0x2b2),_0x477cab+=_0x238360[_0x11917f(0x18f)]+_0x11917f(0x26f)+_0x238360[_0x11917f(0x2c4)]+'\x0a',_0x477cab+=_0x238360['rightTxt']+':\x20'+_0x238360[_0x11917f(0x1c9)]+'%\x0a',_0x477cab+=_0x58b6cb[_0x11917f(0x18f)]+_0x11917f(0x26f)+_0x58b6cb[_0x11917f(0x2c4)]+'\x0a',_0x477cab+=_0x58b6cb[_0x11917f(0x291)]+':\x20'+_0x58b6cb['change']+'%\x0a',_0x477cab+=_0x6a974[_0x11917f(0x18f)]+':\x20'+_0x6a974['value']+'\x20('+config['basecoin']+')\x0a',_0x477cab+=_0x6a974[_0x11917f(0x291)]+':\x20'+_0x6a974[_0x11917f(0x1c9)]+_0x11917f(0x2d3)+config[_0x11917f(0x138)]+')\x0a',_0x477cab+=_0x2895cd['leftTxt']+':\x20'+_0x2895cd[_0x11917f(0x2c4)]+'\x20('+config[_0x11917f(0x1b8)]+')\x0a',_0x477cab+=_0x2895cd[_0x11917f(0x291)]+':\x20'+_0x2895cd['change']+_0x11917f(0x2d3)+config[_0x11917f(0x1b8)]+')\x0a',_0x477cab+=_0x11917f(0x221),process[_0x11917f(0x1ba)]({'telegrammsg':_0x477cab},_0x1e0156=>{});}async function sendPortfolioTelegram(){const _0x1f905b=_0x4ea7c4;if(!coinsLoaded){process[_0x1f905b(0x1ba)]({'telegrammsg':_0x1f905b(0x210)},_0xaa01e6=>{});return;}let _0xd3f195='';if(config[_0x1f905b(0x1c1)])_0xd3f195=_0x1f905b(0x145)+config['botname']+_0x1f905b(0x1e1);else _0xd3f195=_0x1f905b(0x296)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xd3f195+=_0x1f905b(0x2b2),_0xd3f195+=_0x1f905b(0x23f),_0xd3f195+=_0x1f905b(0x189),_0xd3f195+='-------------------------------\x0a',currentCoins['forEach'](_0x515f46=>{const _0x4d0fdd=_0x1f905b;_0xd3f195+=_0x515f46['coin'][_0x4d0fdd(0x17c)](0x7)+'|\x20'+formatPad(_0x515f46[_0x4d0fdd(0x215)],0x2,0x6)+'|\x20'+formatPad(_0x515f46[_0x4d0fdd(0x1b9)],0x2,0x6)+'|\x20'+formatPad(_0x515f46[_0x4d0fdd(0x225)]*0x64,0x2,0x6)+'\x0a';}),_0xd3f195+='</pre>',process[_0x1f905b(0x1ba)]({'telegrammsg':_0xd3f195},_0x3eae02=>{});}function formatPad(_0x547c7c,_0x1f5315,_0x36905e){const _0x58e2ea=_0x4ea7c4,_0x89cad2=formatResultString(_0x547c7c,_0x1f5315);return _0x89cad2?_0x89cad2[_0x58e2ea(0x298)](_0x36905e):''[_0x58e2ea(0x298)](_0x36905e);}function logHistory(_0x5cb0c5,_0xf0161b,_0x352454=''){const _0x1362ca=_0x4ea7c4;logger[_0x1362ca(0x22a)](''+_0xf0161b);let _0x2973c3={'time':getTimeStamp(),'type':_0x5cb0c5,'event':_0xf0161b};dbLogs[_0x1362ca(0x1c7)](_0x1362ca(0x266))[_0x1362ca(0x1b1)](_0x2973c3)[_0x1362ca(0x136)]();if(_0x352454=='')_0x352454=_0xf0161b;proxyEmit(_0x1362ca(0x2d4),{'log':_0x2973c3,'summary':_0x352454}),process[_0x1362ca(0x1ba)]({'telegram':{..._0x2973c3,'botname':config[_0x1362ca(0x16e)],'showname':config['showname']}},_0x7c1a13=>{});}function emitHistory(_0x502343={}){const _0x54cf1d=_0x4ea7c4;Object[_0x54cf1d(0x261)](_0x502343)[_0x54cf1d(0x224)]==0x0&&(_0x502343={'type':[_0x54cf1d(0x1ec),_0x54cf1d(0x2d4)],'event':'','page':0x1});if(_0x502343[_0x54cf1d(0x13b)]['includes'](_0x54cf1d(0x2d4)))_0x502343[_0x54cf1d(0x13b)]['splice'](_0x502343[_0x54cf1d(0x13b)][_0x54cf1d(0x2d8)](_0x54cf1d(0x2d4)),0x1,_0x54cf1d(0x23c),'warning',_0x54cf1d(0x25f));if(dbLogs[_0x54cf1d(0x2d0)](_0x54cf1d(0x266))[_0x54cf1d(0x2c4)]()){let _0xe314be=dbLogs[_0x54cf1d(0x1c7)]('logs')['filter'](_0xba6f56=>{const _0x41b3a9=_0x54cf1d;if(_0x502343['type']['length']==0x0)return![];else return _0x502343[_0x41b3a9(0x13b)][_0x41b3a9(0x150)](_0xba6f56['type']);})[_0x54cf1d(0x253)](_0x38e152=>{const _0x18a8a4=_0x54cf1d;if(_0x502343['event']=='')return!![];else return _0x38e152[_0x18a8a4(0x2d4)][_0x18a8a4(0x195)]()[_0x18a8a4(0x150)](_0x502343[_0x18a8a4(0x2d4)]['toLowerCase']());})['sortBy'](_0x54cf1d(0x1b7)),_0x31bc7a=_0xe314be[_0x54cf1d(0x2c4)]()[_0x54cf1d(0x224)];_0xe314be=_0xe314be[_0x54cf1d(0x2bd)]()[_0x54cf1d(0x172)]((_0x502343[_0x54cf1d(0x1ed)]-0x1)*logPageSize,_0x502343[_0x54cf1d(0x1ed)]*logPageSize-0x1)[_0x54cf1d(0x2bd)]()[_0x54cf1d(0x2c4)](),proxyEmit(_0x54cf1d(0x1db),{'logs':_0xe314be,'total':_0x31bc7a});}else proxyEmit(_0x54cf1d(0x1db),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2188b4){const _0x71115c=_0x4ea7c4;if(dbLogs[_0x71115c(0x2d0)](_0x71115c(0x266))['value']()){const _0x5e1137=dbLogs['get'](_0x71115c(0x266))[_0x71115c(0x27a)](_0x71115c(0x1b7))[_0x71115c(0x253)](_0x249afa=>{const _0x235230=_0x71115c;return _0x249afa[_0x235230(0x13b)]=='order';})['value']();dbLogs['get'](_0x71115c(0x266))[_0x71115c(0x1e0)]()[_0x71115c(0x136)](),dbLogs[_0x71115c(0x1c7)](_0x71115c(0x266))[_0x71115c(0x217)](_0x5e1137)[_0x71115c(0x136)](),emitHistory(_0x2188b4);}}async function pauseBot(){const _0x3da8fc=_0x4ea7c4,_0x4d5aa0=new Date()[_0x3da8fc(0x2c5)]();if(!lastErrorShown||_0x4d5aa0-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4d5aa0;!lastBotPause?(lastBotPause=_0x4d5aa0,consecutivePauses=0x1):(_0x4d5aa0-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x3da8fc(0x1c2)},_0x48e5a2=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x5b0bc6=_0x4ea7c4;botPaused=!![],await sleep(0x3e8),process[_0x5b0bc6(0x1ba)]({'stop':_0x5b0bc6(0x147)},_0x528a6e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1bd878,_0x26edbe){const _0x5e1831=_0x4ea7c4;if(botPaused)return;const _0x17e5c3=config['exchange']||_0x5e1831(0x2b1);if(_0x26edbe)logger['debug'](_0x5e1831(0x2a1)+_0x26edbe);const _0x3742b4=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x1bd878['toString']()[_0x5e1831(0x150)](_0x5e1831(0x2ac)))logHistory('error',_0x17e5c3+_0x5e1831(0x2be)),_0x3742b4();else{if(_0x1bd878['toString']()[_0x5e1831(0x150)](_0x5e1831(0x15a)))logHistory('error',_0x17e5c3+_0x5e1831(0x1ac)),_0x3742b4();else _0x1bd878[_0x5e1831(0x184)]()[_0x5e1831(0x150)](_0x5e1831(0x192))?(logHistory(_0x5e1831(0x23c),_0x17e5c3+_0x5e1831(0x191)),logHistory(_0x5e1831(0x23c),_0x5e1831(0x27d)),_0x3742b4()):await handleError(_0x1bd878,null);}}async function handleError(_0x5e019c,_0x4a9ed2,_0x2049a6=''){const _0x175310=_0x4ea7c4;if(botPaused)return;const _0x39f573=config[_0x175310(0x1ff)]||_0x175310(0x2b1);if(_0x4a9ed2)logger[_0x175310(0x255)](_0x175310(0x2a1)+_0x4a9ed2);if(_0x5e019c['toString']()[_0x175310(0x150)](_0x175310(0x1d8))||_0x5e019c['toString']()['includes']('RateLimitExceeded'))logHistory(_0x175310(0x23c),_0x39f573+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)](_0x175310(0x213))||_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)]('OnMaintenance'))logHistory('error',_0x39f573+_0x175310(0x263)+pauseBotMsg),await pauseBot();else{if(_0x5e019c[_0x175310(0x184)]()['includes'](_0x175310(0x277)))logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x259)+pauseBotMsg),await pauseBot();else{if(_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x13e)+pauseBotMsg),await pauseBot();else{if(_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)](_0x175310(0x15b)))logHistory(_0x175310(0x23c),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x175310(0x23c),_0x175310(0x1a1)),await killBot();else{if(_0x5e019c[_0x175310(0x184)]()['includes'](_0x175310(0x1e2)))logHistory('error',_0x175310(0x222)),logHistory(_0x175310(0x23c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e019c instanceof ccxt[_0x175310(0x214)])logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x171)+pauseBotMsg),logger[_0x175310(0x255)](_0x175310(0x26e),_0x5e019c),await pauseBot();else{if(_0x5e019c['toString']()[_0x175310(0x150)](_0x175310(0x2ac)))logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x2d6)),logHistory('error',_0x175310(0x1a1)),await killBot();else{if(_0x5e019c['toString']()['includes'](_0x175310(0x15a)))logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x295)),logHistory(_0x175310(0x23c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e019c['toString']()[_0x175310(0x150)](_0x175310(0x192)))logHistory(_0x175310(0x23c),_0x39f573+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x175310(0x23c),_0x175310(0x1a1)),await killBot();else{if(_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)]('PermissionDenied'))logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x1cd)),logHistory(_0x175310(0x23c),_0x175310(0x1a1)),await killBot();else{if(_0x5e019c[_0x175310(0x184)]()[_0x175310(0x150)](_0x175310(0x252)))logHistory(_0x175310(0x23c),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2049a6);else _0x5e019c instanceof ccxt[_0x175310(0x24e)]?(logHistory(_0x175310(0x23c),_0x39f573+_0x175310(0x28b)),logger[_0x175310(0x255)]('Error\x20details:',_0x5e019c)):(logHistory('error',_0x175310(0x2a8)+pauseBotMsg),logger[_0x175310(0x255)](_0x175310(0x26e),_0x5e019c),await pauseBot());}}}}}}}}}}}}function formatResult(_0x55326d,_0x31e990){const _0xbfc5c5=_0x4ea7c4;return parseFloat(_0x55326d[_0xbfc5c5(0x233)](_0x31e990));}function formatResultTruncate(_0x52668c,_0x29306c){const _0x2ffb4b=_0x4ea7c4;let _0x4e6e06=formatResultString(_0x52668c,0xa),_0x3e7e94=_0x4e6e06[_0x2ffb4b(0x2d8)]('.');return _0x3e7e94!=-0x1&&(_0x4e6e06=_0x4e6e06['slice'](0x0,_0x3e7e94+_0x29306c+0x1)),Number(_0x4e6e06);}function formatResultString(_0x2bf5f9,_0x598974){const _0x58595a=_0x4ea7c4;let _0x2fbd49;if(!(''+_0x2bf5f9)['includes']('e'))_0x2fbd49=+(Math[_0x58595a(0x244)](_0x2bf5f9+'e+'+_0x598974)+'e-'+_0x598974);else{let _0x2544ca=(''+_0x2bf5f9)[_0x58595a(0x158)]('e'),_0x523434='';+_0x2544ca[0x1]+_0x598974>0x0&&(_0x523434='+'),_0x2fbd49=+(Math[_0x58595a(0x244)](+_0x2544ca[0x0]+'e'+_0x523434+(+_0x2544ca[0x1]+_0x598974))+'e-'+_0x598974);}return Number(_0x2fbd49)[_0x58595a(0x233)](_0x598974);}function getServerTime(){const _0x55ebec=_0x4ea7c4,_0x4d8a10=new Date();return _0x4d8a10[_0x55ebec(0x2bf)]()+'/'+(_0x4d8a10[_0x55ebec(0x283)]()+0x1)[_0x55ebec(0x184)]()['padStart'](0x2,'0')+'/'+_0x4d8a10[_0x55ebec(0x268)]()[_0x55ebec(0x184)]()[_0x55ebec(0x298)](0x2,'0')+'\x20'+_0x4d8a10[_0x55ebec(0x29d)]()[_0x55ebec(0x184)]()[_0x55ebec(0x298)](0x2,'0')+':'+_0x4d8a10[_0x55ebec(0x141)]()[_0x55ebec(0x184)]()[_0x55ebec(0x298)](0x2,'0')+':'+_0x4d8a10[_0x55ebec(0x293)]()[_0x55ebec(0x184)]()[_0x55ebec(0x298)](0x2,'0');}function getTimeStamp(){const _0x411ac9=_0x4ea7c4,_0x55ec5f=shiftedTime();return _0x55ec5f[_0x411ac9(0x2bf)]()+'/'+(_0x55ec5f['getMonth']()+0x1)[_0x411ac9(0x184)]()[_0x411ac9(0x298)](0x2,'0')+'/'+_0x55ec5f[_0x411ac9(0x268)]()['toString']()[_0x411ac9(0x298)](0x2,'0')+'\x20'+_0x55ec5f[_0x411ac9(0x29d)]()[_0x411ac9(0x184)]()[_0x411ac9(0x298)](0x2,'0')+':'+_0x55ec5f[_0x411ac9(0x141)]()[_0x411ac9(0x184)]()['padStart'](0x2,'0')+':'+_0x55ec5f[_0x411ac9(0x293)]()[_0x411ac9(0x184)]()['padStart'](0x2,'0');}function getDate(){const _0x435713=_0x4ea7c4,_0x5420aa=shiftedTime();return _0x5420aa[_0x435713(0x2bf)]()+'/'+(_0x5420aa[_0x435713(0x283)]()+0x1)[_0x435713(0x184)]()[_0x435713(0x298)](0x2,'0')+'/'+_0x5420aa[_0x435713(0x268)]()[_0x435713(0x184)]()[_0x435713(0x298)](0x2,'0');}function getHour(){const _0x17f438=_0x4ea7c4,_0x48534b=shiftedTime();return _0x48534b[_0x17f438(0x29d)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x4c9611){return new Promise(_0x54c3b2=>setTimeout(_0x54c3b2,_0x4c9611));}function shiftedTime(){const _0x13ed9e=_0x4ea7c4,_0x2de5b7=new Date();let _0x494a6b=_0x2de5b7;if(config&&config[_0x13ed9e(0x29f)]!==0x0)_0x494a6b=fns[_0x13ed9e(0x1eb)](_0x2de5b7,{'hours':config[_0x13ed9e(0x29f)]});return _0x494a6b;}function timer(_0x53e408){const _0x3bd8e1=_0x4ea7c4,_0x36afa1=new Date();!lasttime?console[_0x3bd8e1(0x21b)](getTimeStamp()+':\x20timer\x20>',_0x53e408,_0x36afa1):console[_0x3bd8e1(0x21b)](getTimeStamp()+_0x3bd8e1(0x196),_0x53e408,(_0x36afa1-lasttime)/0x3e8),lasttime=_0x36afa1;}