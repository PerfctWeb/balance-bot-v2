const _0x56b865=_0x40f3;(function(_0x124a74,_0x4a83e5){const _0x44ee49=_0x40f3,_0x2b8fe5=_0x124a74();while(!![]){try{const _0x2d3028=parseInt(_0x44ee49(0x256))/0x1*(-parseInt(_0x44ee49(0x162))/0x2)+parseInt(_0x44ee49(0x1e0))/0x3+parseInt(_0x44ee49(0x211))/0x4*(-parseInt(_0x44ee49(0x272))/0x5)+-parseInt(_0x44ee49(0x12a))/0x6*(parseInt(_0x44ee49(0x22c))/0x7)+-parseInt(_0x44ee49(0x129))/0x8*(parseInt(_0x44ee49(0x1d1))/0x9)+-parseInt(_0x44ee49(0x18c))/0xa+parseInt(_0x44ee49(0x1a5))/0xb*(parseInt(_0x44ee49(0x242))/0xc);if(_0x2d3028===_0x4a83e5)break;else _0x2b8fe5['push'](_0x2b8fe5['shift']());}catch(_0x21575b){_0x2b8fe5['push'](_0x2b8fe5['shift']());}}}(_0x31a8,0xc4c42));const _0x231661=function(){let _0x502509=!![];return function(_0x5166a4,_0x15c011){const _0x1c6493=_0x502509?function(){const _0xe3d8d2=_0x40f3;if(_0x15c011){const _0x10d2d0=_0x15c011[_0xe3d8d2(0x266)](_0x5166a4,arguments);return _0x15c011=null,_0x10d2d0;}}:function(){};return _0x502509=![],_0x1c6493;};}(),_0x28dcac=_0x231661(this,function(){const _0x11a58d=_0x40f3;return _0x28dcac[_0x11a58d(0x159)]()[_0x11a58d(0x197)](_0x11a58d(0x23e))[_0x11a58d(0x159)]()[_0x11a58d(0x1fb)](_0x28dcac)['search'](_0x11a58d(0x23e));});_0x28dcac();'use strict';const ccxt=require('ccxt')[_0x56b865(0x236)],low=require(_0x56b865(0x14c)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x56b865(0x2a1))[_0x56b865(0x17e)],util=require('util'),argv=require(_0x56b865(0x27c))(process[_0x56b865(0x230)][_0x56b865(0x1c7)](0x2))[_0x56b865(0x230)],path=require(_0x56b865(0x283));let exchange;global['ticker']={},global[_0x56b865(0x1b6)]={};const exceptions={'binance':['DAI/',_0x56b865(0x2a3),'XEM/BUSD','NANO/',_0x56b865(0x193)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x56b865(0x200)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x56b865(0x22f))[_0x56b865(0x187)],botID=process[_0x56b865(0x230)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x56b865(0x234)](botID)&&(console['log'](_0x56b865(0x1c9)+botID+_0x56b865(0x288)),killBot());const userID=process[_0x56b865(0x230)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x56b865(0x28c)+userID+'/':_0x56b865(0x28c),loggerfile=fs[_0x56b865(0x22d)](logspath+_0x56b865(0x23d),{'flags':'a'});!fs[_0x56b865(0x1d3)](configpath)&&fs[_0x56b865(0x20a)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x56b865(0x224)+botID+'-config.json',logfile=configpath+_0x56b865(0x224)+botID+_0x56b865(0x21a),performancefile=configpath+'bot-'+botID+_0x56b865(0x29b),coinresultsfile=configpath+_0x56b865(0x224)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x56b865(0x17f),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x56b865(0x1c0)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x56b865(0x1c0)]({'data':[],'version':serverversion})[_0x56b865(0x1f1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x56b865(0x1c0)]({'bot':[],'version':serverversion})[_0x56b865(0x1f1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x56b865(0x1f1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x56b865(0x1f9),'rsaStandard':_0x56b865(0x13f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x520ac7=>{const _0x2eed2a=_0x56b865;console[_0x2eed2a(0x188)](_0x520ac7);},'simple':_0x4be384=>{const _0x632840=_0x56b865;console[_0x632840(0x188)](_0x4be384),loggerfile[_0x632840(0x1f1)](util[_0x632840(0x1dd)](_0x4be384)+'\x0a');},'full':async(_0x19e65a,_0x1e6e17='')=>{const _0x54b132=_0x56b865;let _0x547cfb;if(config[_0x54b132(0x28d)])_0x547cfb=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x19e65a;else _0x547cfb=getTimeStamp()+_0x54b132(0x1e5)+botID+'\x20>\x20'+_0x19e65a;console[_0x54b132(0x188)](_0x547cfb),loggerfile[_0x54b132(0x1f1)](util[_0x54b132(0x1dd)](_0x547cfb)+'\x0a'),_0x1e6e17&&(console[_0x54b132(0x188)](_0x1e6e17),loggerfile[_0x54b132(0x1f1)](util['format'](_0x1e6e17)+'\x0a'));},'debug':async(_0x5ef4c1,_0x26b9d2='')=>{const _0x11871d=_0x56b865;let _0x34976e;if(config[_0x11871d(0x28d)])_0x34976e=getTimeStamp()+':\x20'+config[_0x11871d(0x218)]+_0x11871d(0x18b)+_0x5ef4c1;else _0x34976e=getTimeStamp()+_0x11871d(0x1e5)+botID+'\x20>\x20[DEBUG]\x20'+_0x5ef4c1;if(debugging)console[_0x11871d(0x188)](_0x34976e);loggerfile[_0x11871d(0x1f1)](util[_0x11871d(0x1dd)](_0x34976e)+'\x0a');if(_0x26b9d2){if(debugging)console[_0x11871d(0x188)](_0x26b9d2);loggerfile['write'](util[_0x11871d(0x1dd)](_0x26b9d2)+'\x0a');}}};process['on'](_0x56b865(0x26e),function(_0x182767){const _0x248c45=_0x56b865;logger[_0x248c45(0x20d)](_0x182767);});settings[_0x56b865(0x287)]!=config[_0x56b865(0x287)]&&updateTimeshift(settings[_0x56b865(0x287)]);settings[_0x56b865(0x147)]!=config[_0x56b865(0x147)]&&updateOnepagemode(settings[_0x56b865(0x147)]);process[_0x56b865(0x177)]({'started':_0x56b865(0x1a8)},_0x207e14=>{}),initializeProcessListeners();function _0x31a8(){const _0x495edc=['forEach','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','target','\x20API\x20key\x20is\x20invalid','\x20minutes\x20-\x20','.json','\x20exchange','recent20','bots','length','type','changes','fiat','emojibuy','keys','apply','Unknown\x20error\x20occured','red_yellow_blue','map','get','join','sortBy','getSeconds','uncaughtException','BNB/','settings','UNLOCKING','2260JImZVD','startsWith','total','openOrders','0\x20-\x20EXECUTION:\x20','\x20order:\x20','milliseconds','fetchTicker','datetime','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','yargs/yargs','\x20portfolio:</b>\x20\x0a\x0a','\x20value','canceled','\x20hour','</pre>','2\x20-\x20Orders\x20unlocked','path','amountToPrecision','loadSymbols()','change24h','timeshift',',\x20must\x20be\x20a\x203\x20digit\x20number','full','debug','unlinkSync','./logs/','showname','warning','timeout','BTC','highest','password',':\x20timer\x20>','LOCKED','2\x20-\x20Validate\x20orders:\x20','cooldown','<b>Bot\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','sells','\x20|\x20lock\x20orders:\x20','-performance.json','error','market','progress','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','headless','hybrid-crypto-js','ongoing','HOT/BTC','filter','getCoins()','balancing\x20resumed','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','function','resetHistory','8RvLjvD','6NgaYnl','floor','sendMetricsTelegram','event-history','getDate','fromCodePoint','ORDERS.LOCKED','exchanges','indexOf','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Net\x20','storeHeadless','set','includes','leftTxt','AuthenticationError','Saving\x20configuration','<b>','logs','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','RSA-OAEP','replace','Invalid\x20API\x20key\x20or\x20secret\x20entered','toLowerCase','shift','\x20not\x20responding','ticker','price','onepagemode','recreate','yyyy/MM/dd','open','final','lowdb','BUSD','ExchangeNotAvailable','recreateCoinResults()','USD','trade','EUR','Executing\x20exchange\x20reload','MIN_NOTIONAL','getMonth','rightTxt','watchTransactions','realized','toString','writeFile','configuration-stored','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','padStart','loadMarkets','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Order\x20amount\x20is\x20invalid:\x20','limit-low','160514NonUqv','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Avoiding\x20continuous\x20order\x20attempts','-results.json','orderstatus','\x20|\x20highest:\x20','<pre>','getStartingBalances','API-key\x20format\x20invalid','has','balances','3\x20-\x20handling\x20FILLED\x20order:\x20','padEnd','2.6.0','basecoin','ordertype','symbols','added','ORDERS.UNLOCKED','substring','placeOrder()','send','abs','splice','status','message','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','excluded','Crypt','bb-secure.json','\x20API\x20secret\x20is\x20invalid','liquidity','isEqual','date','\x20metrics:</b>\x20\x0a\x0a','max','Resetting\x20bot\x20history','version','log','Unfilled\x20order(s)\x20canceled\x20after\x20','watchTrades','\x20>\x20[DEBUG]\x20','9194270TnkRvH','exchange','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1\x20-\x20Unlock\x20orders','Manual\x20balancing\x20required','performance','order','YOYOW/','startdate','cancel','side','search','toUpperCase','No\x20more\x20open\x20orders\x20-\x20','remainingSymbols','fees','Market','emitHistory','delta','clientOrderId','recovery','percentage','Order(s)\x20not\x20validated\x20after\x20','number','timestamp','110000rSDDwD','************','fetchClosedOrders','running','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2.5.0','last','watchOrders','netoffset','colorscheme','fetchBalance','cost','initclient','symbol','Exchange','net-fiat','push','change','getFullYear','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','DDoSProtection','sort','botID','closed','\x20has\x20a\x2024h\x20drop\x20of\x20','none','string','defaults','bot','round','remove','offset','find','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','slice','\x20orders\x20in\x20less\x20than\x20','Error:\x20Invalid\x20argument\x20','filled','Net\x20effect','data','getHours','no\x20open\x20orders','***','storeFiat','1409409brprGL','exchange\x20not\x20reloaded','existsSync','cancelLoading','amount','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','breakeven','fetchTickers','ORDERS.UNLOCKING','apiKey','no\x20additional\x20symbols','2\x20-\x20FILLED\x20unknown\x20order:\x20','format','cancelOrders()','average','2009298DaWkDc','buys','success','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','1\x20-\x20Validate\x20orders:\x20',':\x20Bot\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20not\x20available','assign','net-basecoin','Bot\x20','findIndex','coins','limit','customId','threshold','eur','write','InvalidOrder','kill','deleteHistoryAlerts','value','2\x20-\x20FILLED\x20known\x20order:\x20','storeConfiguration','reverse','sha256','differenceInSeconds','constructor','\x20|\x20','-------------------------------\x0a','sell','2.3.5','freeze','exec','currency','page','cancelOrder','ETH','min','Portfolio\x20change\x20detected:\x20','decrypt','fee','mkdirSync','\x20:\x20','emojisell','simple','random','valid','buy','548ZzREZN','coin','BNB','restart','configuration','args','limits','botname','orderId','-events.json','apiPassword','Fee\x20discount\x20refund\x20detected:\x20','InvalidNonce','showConfig','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','time','toggleBotMode','initial','UNLOCKED','bot-','portfolio','Initiating\x20exchange\x20reload','fetchOpenOrders','usd','loading-canceled','getTime','toFixed','6549221QIufPD','createWriteStream','getPortfolio(2)','./version.json','argv','distribution','createOrder','apiSecret','test','exchange\x20reloaded','pro','parseISO','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Fees\x20|\x20currency:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','Resetting\x20coin\x20results:\x20','/output-000.log','(((.+)+)+)+$','cloneDeep','\x20|\x20Error\x20details:\x20','Invalid\x20quantity','2748HbDDMk','split','startprice','startnumber','entries','enabled','USDT','event','%\x20(','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','InsufficientFunds','starting-balances','Order\x20is\x20invalid:\x20','removed','getMinutes','Error\x20while\x20deleting\x20files:\x20','Binance','privateKey','stringify','parse','1wHKJex'];_0x31a8=function(){return _0x495edc;};return _0x31a8();}function proxyEmit(_0x3234a4,_0x16cba0=null){const _0x57980b=_0x56b865;process[_0x57980b(0x177)]({'function':_0x3234a4,'args':_0x16cba0},_0x2c4975=>{});}function initializeProcessListeners(){const _0x3b7c1f=_0x56b865;process['on'](_0x3b7c1f(0x17b),_0x3733e6=>{const _0x55c060=_0x3b7c1f;switch(Object[_0x55c060(0x265)](_0x3733e6)[0x0]){case _0x55c060(0x287):_0x3733e6['timeshift']!=undefined&&(settings['timeshift']=_0x3733e6[_0x55c060(0x287)],updateTimeshift(settings[_0x55c060(0x287)]));break;case _0x55c060(0x147):_0x3733e6[_0x55c060(0x147)]!=undefined&&(settings[_0x55c060(0x147)]=_0x3733e6['onepagemode'],updateOnepagemode(settings[_0x55c060(0x147)]));break;case _0x55c060(0x25f):_0x3733e6[_0x55c060(0x25f)]!=undefined&&(bots=JSON[_0x55c060(0x255)](_0x3733e6[_0x55c060(0x25f)]),proxyEmit(_0x55c060(0x25f),bots));break;case'function':switch(_0x3733e6[_0x55c060(0x127)]){case _0x55c060(0x1b1):initclient();break;case _0x55c060(0x221):toggleBotMode();break;case _0x55c060(0x19d):emitHistory(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x1f4):deleteHistoryAlerts(_0x3733e6[_0x55c060(0x216)]);break;case'getPortfolio':getPortfolio(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x1f7):storeConfiguration(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x135):storeHeadless(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x1d0):storeFiat(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x128):resetHistory();break;case _0x55c060(0x169):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3733e6[_0x55c060(0x216)]);break;case _0x55c060(0x1d4):cancelLoading();break;case _0x55c060(0x21e):showConfig();break;case _0x55c060(0x12c):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x4fa561=null,_0x4cc5ed=![]){const _0x467c21=_0x56b865;logger['debug']('Reset\x20|\x20'+(_0x4fa561&&_0x4fa561[_0x467c21(0x260)]>0x0?'additional\x20symbols\x20'+_0x4fa561['join'](','):_0x467c21(0x1db))+_0x467c21(0x1fc)+(_0x4cc5ed?_0x467c21(0x235):_0x467c21(0x1d2)));if(pidBalances)clearTimeout(pidBalances);if(!_0x4cc5ed)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x467c21(0x1cf)){if(_0x4cc5ed){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4a1b79){handleErrorNoStop(_0x4a1b79,_0x467c21(0x285));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x4fa561);const _0xe75cb1=await getCoins();[currentCoins,currentCoinsAll]=_0xe75cb1,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x467c21(0x260)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x381a74=_0x56b865;logger[_0x381a74(0x28a)](_0x381a74(0x226));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x381a74(0x28a)](_0x381a74(0x153)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x47500b=config[_0x56b865(0x18d)],_0x7a6ed0=config[_0x56b865(0x1da)],_0x5b23e7=config[_0x56b865(0x233)],_0x367142=config['apiPassword']){const _0x1156a2=_0x56b865;exchange&&await stopExchange();!supportedExchanges()[_0x1156a2(0x137)](_0x47500b)&&(logHistory('error',_0x1156a2(0x1c6)+_0x47500b+_0x1156a2(0x25d)),killBot());const _0x497287=ccxt[_0x47500b[_0x1156a2(0x142)]()];exchange=new _0x497287({'apiKey':_0x7a6ed0,'secret':_0x5b23e7,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x367142)exchange[_0x1156a2(0x292)]=_0x367142;}function setStableCoins(){const _0x38b6c8=_0x56b865;let _0x14bd0f=config[_0x38b6c8(0x170)]==_0x38b6c8(0x205)?_0x38b6c8(0x205):'BTC',_0x5448ab=!allSymbols[_0x38b6c8(0x137)](_0x14bd0f+'/USD')?_0x38b6c8(0x248):'USD',_0x596197=!allSymbols[_0x38b6c8(0x137)](_0x14bd0f+'/EUR')?_0x5448ab:_0x38b6c8(0x152);stablecoins={'eur':{'coin':''+_0x14bd0f+_0x596197,'symbol':_0x14bd0f+'/'+_0x596197},'usd':{'coin':''+_0x14bd0f+_0x5448ab,'symbol':_0x14bd0f+'/'+_0x5448ab}};}async function initwsCcxt(_0x3f7285){const _0x329e29=_0x56b865;_0x3f7285==null&&(_0x3f7285=[],config['portfolio'][_0x329e29(0x257)](_0x211315=>{const _0x5372ce=_0x329e29;if(!_0x211315[_0x5372ce(0x17d)]&&_0x211315[_0x5372ce(0x212)]!=config[_0x5372ce(0x170)])_0x3f7285[_0x5372ce(0x1b5)](_0x211315[_0x5372ce(0x1b2)]);}));if(!_0x3f7285[_0x329e29(0x137)](stablecoins[_0x329e29(0x1f0)]['symbol']))_0x3f7285[_0x329e29(0x1b5)](stablecoins['eur'][_0x329e29(0x1b2)]);if(!_0x3f7285[_0x329e29(0x137)](stablecoins[_0x329e29(0x228)]['symbol']))_0x3f7285['push'](stablecoins['usd'][_0x329e29(0x1b2)]);if(config[_0x329e29(0x18d)][_0x329e29(0x273)](_0x329e29(0x252))){if(!_0x3f7285['includes'](_0x329e29(0x26f)+config[_0x329e29(0x170)]))_0x3f7285[_0x329e29(0x1b5)]('BNB/'+config[_0x329e29(0x170)]);}loadCoins(_0x3f7285);const _0xcd8c05=async _0x3e9c4c=>{const _0x19bab8=_0x329e29,_0x15149a=await exchange['fetchTicker'](_0x3e9c4c);global[_0x19bab8(0x145)][noslash(_0x15149a['symbol'])]=_0x15149a[_0x19bab8(0x1ab)];while(!![]){if(!botPaused)try{const _0x414d30=await exchange[_0x19bab8(0x18a)](_0x3e9c4c);global[_0x19bab8(0x145)][noslash(_0x414d30[0x0][_0x19bab8(0x1b2)])]=_0x414d30[0x0]['price'],await sleep(0x3e8);}catch(_0x1e3913){if(!exchangeStopped)await handleError(_0x1e3913,_0x19bab8(0x18a),_0x3e9c4c);}else await sleep(0x64);}},_0x1cdccd=async _0x1c0b63=>{const _0x1f97e4=_0x329e29;while(!![]){if(!botPaused)try{const _0xf9d98e=await exchange[_0x1f97e4(0x279)](_0x1c0b63);global[_0x1f97e4(0x1b6)][_0xf9d98e[_0x1f97e4(0x1b2)]]=_0xf9d98e[_0x1f97e4(0x1a1)],await sleep(0x3c*0x3e8);}catch(_0x5e5696){if(!exchangeStopped)await handleError(_0x5e5696,_0x1f97e4(0x1d8),_0x1c0b63);}else await sleep(0x64);}},_0x96bb6b=async()=>{const _0x2b4e14=_0x329e29;while(!![]){if(!botPaused)try{const _0x1a6e41=await exchange['watchOrders']();_0x1a6e41['forEach'](_0x25738c=>{updateNumberCoinsCcxt(_0x25738c);});}catch(_0x4aad5f){if(!exchangeStopped)await handleError(_0x4aad5f,_0x2b4e14(0x1ac));}else await sleep(0x64);}};_0x3f7285[_0x329e29(0x257)](async _0x5f2c7e=>{_0xcd8c05(_0x5f2c7e),_0x1cdccd(_0x5f2c7e);}),!wsEventsSet&&(wsEventsSet=!![],_0x96bb6b(),watchTransactions());}async function watchTransactions(){const _0x131376=_0x56b865;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x70232b=await getCoins(),[_0xc98266,_0x54e78a]=_0x70232b;let _0x52ab76=[];currentCoins['forEach'](_0x46a1c5=>{const _0x1b8f7f=_0x40f3,_0x1c8ae3=_0xc98266[_0x1b8f7f(0x1c5)](_0x3f74f9=>_0x3f74f9[_0x1b8f7f(0x212)]==_0x46a1c5[_0x1b8f7f(0x212)]);_0x1c8ae3&&(_0x46a1c5[_0x1b8f7f(0x1a3)]!=_0x1c8ae3[_0x1b8f7f(0x1a3)]&&_0x52ab76['push']({'coin':_0x46a1c5['coin'],'symbol':_0x46a1c5['symbol'],'number':Number(formatResult(_0x1c8ae3[_0x1b8f7f(0x1a3)]-_0x46a1c5[_0x1b8f7f(0x1a3)],0x8))}));});if(_0x52ab76[_0x131376(0x260)]==0x1&&!blockTransactionDetection){logger[_0x131376(0x28a)](_0x131376(0x23a)+lastFees[_0x131376(0x202)]+_0x131376(0x167)+lastFees['highest']);if(!lastFees[_0x131376(0x202)]||_0x52ab76[0x0][_0x131376(0x212)]!=lastFees[_0x131376(0x202)]||_0x52ab76[0x0][_0x131376(0x1a3)]>lastFees[_0x131376(0x291)]){let _0x1d2398;if(_0x52ab76[0x0]['coin']!=config[_0x131376(0x170)]){let _0x2f4f36=global[_0x131376(0x145)][noslash(_0x52ab76[0x0]['symbol'])];_0x1d2398=_0x52ab76[0x0][_0x131376(0x1f8)]?0x1/_0x2f4f36:_0x2f4f36;}else _0x1d2398=0x1;_0x52ab76[0x0][_0x131376(0x146)]=_0x1d2398,delete _0x52ab76[0x0]['symbol'];let _0x32aeff=[],_0x47351a=[...config['liquidity']]||[],_0x518112=config[_0x131376(0x181)];_0x47351a[_0x131376(0x1ba)]((_0x8ce5a6,_0x119824)=>_0x8ce5a6[_0x131376(0x183)]>_0x119824[_0x131376(0x183)]?-0x1:_0x119824[_0x131376(0x183)]>_0x8ce5a6[_0x131376(0x183)]?0x1:0x0);const _0x292f68=getDate();if(_0x47351a[0x0]){const _0x186c0c=fns[_0x131376(0x255)](_0x47351a[0x0][_0x131376(0x183)],'yyyy/MM/dd',new Date()),_0x41ba43=fns[_0x131376(0x255)](_0x292f68,_0x131376(0x149),new Date());if(fns[_0x131376(0x182)](_0x186c0c,_0x41ba43)){_0x32aeff=_0x47351a[0x0]['changes'];const _0x4ae179=_0x32aeff[_0x131376(0x1c5)](_0x2105a4=>_0x2105a4['coin']==_0x52ab76[0x0][_0x131376(0x212)]);_0x4ae179?(_0x4ae179[_0x131376(0x1a3)]+=_0x52ab76[0x0][_0x131376(0x1a3)],_0x4ae179[_0x131376(0x1a3)]==0x0&&(_0x32aeff=_0x32aeff[_0x131376(0x2a4)](_0x36dbbb=>{const _0x48870f=_0x131376;return _0x36dbbb['coin']!=_0x52ab76[0x0][_0x48870f(0x212)];}))):_0x32aeff['push'](_0x52ab76[0x0]);const _0x197150=_0x518112[_0x131376(0x1c5)](_0x4ebd5b=>_0x4ebd5b[_0x131376(0x183)]==_0x292f68);_0x197150[_0x131376(0x262)]=_0x32aeff;}else _0x518112[_0x131376(0x1b5)]({'date':_0x292f68,'changes':[_0x52ab76[0x0]]});}const _0x454e28=_0x518112[_0x131376(0x1c5)](_0x41b2b4=>_0x41b2b4['date']==_0x292f68);if(_0x454e28){let _0x1d29ff=!![];_0x454e28['changes'][_0x131376(0x257)](_0x135588=>{const _0x5d0550=_0x131376;if(_0x135588[_0x5d0550(0x1a3)]!=0x0)_0x1d29ff=![];}),_0x1d29ff&&(_0x518112=_0x518112[_0x131376(0x2a4)](_0xf102e2=>{const _0x4fa9d9=_0x131376;return _0xf102e2[_0x4fa9d9(0x183)]!=_0x292f68;}));}let _0x1abb6b=dbConfig[_0x131376(0x26a)]('bot')['find']({'botID':botID})[_0x131376(0x1f5)]();_0x1abb6b&&(dbConfig[_0x131376(0x26a)](_0x131376(0x1c1))[_0x131376(0x1c5)]({'botID':botID})['assign']({'liquidity':_0x518112})[_0x131376(0x1f1)](),config[_0x131376(0x181)]=_0x518112),logHistory(_0x131376(0x1e2),_0x131376(0x207)+Math[_0x131376(0x178)](_0x52ab76[0x0][_0x131376(0x1a3)])+'\x20'+_0x52ab76[0x0][_0x131376(0x212)]+'\x20'+(_0x52ab76[0x0][_0x131376(0x1a3)]>0x0?_0x131376(0x173):_0x131376(0x24f))+_0x131376(0x238)),proxyEmit(_0x131376(0x215),emittedConfiguration());}else logger['debug'](_0x131376(0x21c)+Math[_0x131376(0x178)](_0x52ab76[0x0][_0x131376(0x1a3)])+'\x20'+_0x52ab76[0x0][_0x131376(0x212)]+'\x20'+(_0x52ab76[0x0]['number']>0x0?'added':_0x131376(0x24f)));transactionDetected=!![],currentCoins=_0xc98266,currentCoinsAll=_0x54e78a;}await sleep(watchTransactionsInterval);}catch(_0xe64944){if(!exchangeStopped)await handleError(_0xe64944,_0x131376(0x157));}else await sleep(0x64);}}async function loadSymbols(_0x477398=config[_0x56b865(0x18d)],_0x1a5dab=![]){const _0xbe286d=_0x56b865;if(allSymbols&&!_0x1a5dab)return;try{markets=await exchange[_0xbe286d(0x15e)](),allSymbols=exchange[_0xbe286d(0x172)][_0xbe286d(0x2a4)](_0xf3f082=>{const _0x4405a1=_0xbe286d;let _0x4ee1e1=![];const _0x67cd0d=exceptions[_0x477398[_0x4405a1(0x142)]()]||[];return _0x67cd0d[_0x4405a1(0x257)](_0x11afc3=>{const _0x53ca6f=_0x4405a1;if(_0xf3f082[_0x53ca6f(0x137)](_0x11afc3))_0x4ee1e1=!![];}),!_0x4ee1e1;});}catch(_0x40b772){throw _0x40b772;}}async function initclient(){const _0x4de2d1=_0x56b865;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x4de2d1(0x131),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4de2d1(0x16c),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4a04cb=getNormalizedPerformance();emitPerformance(_0x4a04cb),getStartingBalances(_0x4a04cb);}async function toggleBotMode(){const _0x12e27c=_0x56b865;let _0x5d4d72=dbConfig['get'](_0x12e27c(0x1c1))[_0x12e27c(0x1c5)]({'botID':botID})[_0x12e27c(0x1f5)]();if(_0x5d4d72){const _0x25d0f8=!_0x5d4d72[_0x12e27c(0x2a0)];dbConfig[_0x12e27c(0x26a)](_0x12e27c(0x1c1))['find']({'botID':botID})[_0x12e27c(0x1e8)]({'headless':_0x25d0f8})[_0x12e27c(0x1f1)](),config[_0x12e27c(0x2a0)]=_0x25d0f8,proxyEmit(_0x12e27c(0x215),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3ba2a6=_0x56b865;process[_0x3ba2a6(0x177)]({'updatebotmanager':!![]},_0x13eaad=>{});}async function loadCoins(_0x4df9c3){const _0x177829=_0x56b865;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1bcba3,_0x3f1ed1=0x0,_0x2a251d=0x0;_0x4df9c3[_0x177829(0x257)](_0x1cd09b=>{const _0x5904f=_0x177829;loading[_0x5904f(0x19a)][_0x5904f(0x1b5)](_0x1cd09b);}),loadingCanceled=![];let _0xb0eceb=![];while(_0x1bcba3!=_0x4df9c3[_0x177829(0x260)]){_0x1bcba3=0x0,_0x4df9c3[_0x177829(0x257)](_0x5395bc=>{const _0x4539ed=_0x177829;if(global[_0x4539ed(0x145)][noslash(_0x5395bc)]){loading[_0x4539ed(0x19a)]=loading[_0x4539ed(0x19a)]['filter'](_0x4c1c34=>_0x4c1c34!=_0x5395bc);if(!watchedSymbols[_0x4539ed(0x137)](_0x5395bc))watchedSymbols[_0x4539ed(0x1b5)](_0x5395bc);_0x1bcba3++;}}),loading[_0x177829(0x29e)]=Math['round'](_0x1bcba3/_0x4df9c3[_0x177829(0x260)]*0x64);loading[_0x177829(0x29e)]!=0x64&&(_0x2a251d>0x1e*0x5&&(loading[_0x177829(0x28f)]=!![],emitLoadingProgress()),_0x2a251d>0x78*0x5&&!_0xb0eceb&&(loading['cancel']=!![],emitLoadingProgress(),_0xb0eceb=!![],logHistory(_0x177829(0x29c),_0x177829(0x15f)+loading[_0x177829(0x19a)][_0x177829(0x26b)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x177829(0x239)),pidCoinReloading=setTimeout(()=>{const _0x2ff8e7=_0x177829;process[_0x2ff8e7(0x177)]({'stop':_0x2ff8e7(0x214)},_0x2577db=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x177829(0x195)]=!![],emitLoadingProgress();break;}else _0x1bcba3!=_0x3f1ed1&&(_0x3f1ed1=_0x1bcba3,emitLoadingProgress()),_0x2a251d++,await sleep(0xc8);}_0x1bcba3==_0x4df9c3[_0x177829(0x260)]&&(coinsLoaded=!![],process[_0x177829(0x177)]({'status':_0x177829(0x247),'live':'running'},_0x7f161c=>{}),_0xb0eceb&&logHistory(_0x177829(0x1e2),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2ec533=_0x56b865;proxyEmit(_0x2ec533(0x215),{...emittedConfiguration(),'configstate':_0x2ec533(0x229)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x8787ff=_0x56b865;let _0x3e3e30=global['ticker'][stablecoins['eur']['coin']],_0x317800=global['ticker'][stablecoins['usd'][_0x8787ff(0x212)]];return{'eur':Number(_0x3e3e30),'usd':Number(_0x317800)};}function capitalize(_0x2883ed){const _0x4cbfb3=_0x56b865;return _0x2883ed[_0x4cbfb3(0x175)](0x0,0x1)[_0x4cbfb3(0x198)]()+_0x2883ed[_0x4cbfb3(0x175)](0x1);}function supportedExchanges(){const _0x52fc57=_0x56b865,_0x5597dd=['ws',_0x52fc57(0x1d8),_0x52fc57(0x279),_0x52fc57(0x18a),_0x52fc57(0x1ac),_0x52fc57(0x204),_0x52fc57(0x232),_0x52fc57(0x227),'fetchClosedOrders',_0x52fc57(0x1af)];let _0x13a4f4=[],_0x196baf=[],_0xd422f5=ccxt['exchanges'];_0xd422f5[_0x52fc57(0x257)](_0x237ce0=>{const _0x2f62c1=_0x52fc57;try{const _0x36f9f4=new ccxt[_0x237ce0]();if(_0x36f9f4[_0x2f62c1(0x16b)]['ws'])_0x196baf[_0x2f62c1(0x1b5)](_0x36f9f4);}catch(_0x17dc9f){}}),_0x196baf['forEach'](_0x5b78a5=>{const _0x49ddb0=_0x52fc57;let _0x253e47=0x0;_0x5597dd[_0x49ddb0(0x257)](_0x3b0d0e=>{const _0x58a65c=_0x49ddb0;_0x3b0d0e in _0x5b78a5[_0x58a65c(0x16b)]&&_0x5b78a5['has'][_0x3b0d0e]&&_0x253e47++;}),_0x253e47==_0x5597dd['length']&&_0x13a4f4['push'](capitalize(_0x5b78a5['id']));});let _0x28dcd8=[];return _0xd422f5[_0x52fc57(0x257)](_0x2859c3=>{const _0x3ec735=_0x52fc57;_0x2859c3=capitalize(_0x2859c3);if(!_0x13a4f4[_0x3ec735(0x137)](_0x2859c3))_0x28dcd8['push'](_0x2859c3);}),_0x13a4f4;}function setStartDatePerformance(){const _0x3c4005=_0x56b865;if(config&&config['liquidity'][0x0][_0x3c4005(0x262)]['length']!=0x0){const _0x3b1381=config[_0x3c4005(0x181)][0x0][_0x3c4005(0x262)];dbPerformance['get']('data')[_0x3c4005(0x1c5)]({'date':config[_0x3c4005(0x194)]})['assign']({'coins':_0x3b1381})[_0x3c4005(0x1f1)]();}}async function recreateCoinResults(){const _0x5c0cb3=_0x56b865;let _0x57f30e,_0x4410b8=[];try{const _0x2c0f1c=fns['format'](fns[_0x5c0cb3(0x237)](config[_0x5c0cb3(0x194)][_0x5c0cb3(0x140)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x2a158e of currentCoins){if(_0x2a158e[_0x5c0cb3(0x212)]!=config[_0x5c0cb3(0x170)]){let _0x2af053=0x0,_0x39b2b9,_0x4142a0;_0x57f30e=await getAllEventOrders(_0x2a158e[_0x5c0cb3(0x1b2)]);if(_0x57f30e[_0x5c0cb3(0x260)]>0x0)_0x57f30e['forEach'](_0x1ceb8b=>{const _0x48f9cd=_0x5c0cb3,_0x4f00f7=_0x2a158e[_0x48f9cd(0x1b2)][_0x48f9cd(0x137)](config[_0x48f9cd(0x170)]+'/');_0x4410b8[_0x48f9cd(0x1b5)]({'datetime':_0x1ceb8b[_0x48f9cd(0x27a)],'coin':_0x2a158e[_0x48f9cd(0x212)],'symbol':_0x2a158e[_0x48f9cd(0x1b2)],'side':_0x1ceb8b[_0x48f9cd(0x196)],'reverse':_0x4f00f7,'amount':formatResult(_0x1ceb8b[_0x48f9cd(0x1ca)],0x8),'filled':formatResult(_0x1ceb8b[_0x48f9cd(0x1ca)],0x8),'price':formatResult(_0x1ceb8b[_0x48f9cd(0x146)],0x8)}),_0x2af053=_0x1ceb8b[_0x48f9cd(0x196)]==_0x48f9cd(0x210)?_0x2af053+_0x1ceb8b[_0x48f9cd(0x1ca)]:_0x2af053-_0x1ceb8b[_0x48f9cd(0x1ca)];if(!_0x4142a0)_0x4142a0=_0x1ceb8b[_0x48f9cd(0x146)];});_0x39b2b9=_0x2a158e[_0x5c0cb3(0x1a3)]-_0x2af053;let _0x47b8f0;config[_0x5c0cb3(0x181)]['forEach'](_0x3d150d=>{const _0x28dd3e=_0x5c0cb3;!_0x47b8f0&&(_0x47b8f0=_0x3d150d[_0x28dd3e(0x262)][_0x28dd3e(0x1c5)](_0x3d6dc4=>_0x3d6dc4[_0x28dd3e(0x212)]==_0x2a158e[_0x28dd3e(0x212)]),_0x47b8f0&&(_0x39b2b9=_0x47b8f0['number'],_0x4142a0=_0x47b8f0[_0x28dd3e(0x146)]));});let _0x449a92=dbCoinResults[_0x5c0cb3(0x26a)](_0x5c0cb3(0x1ec))[_0x5c0cb3(0x1c5)]({'coin':_0x2a158e['coin']})[_0x5c0cb3(0x1f5)]();_0x449a92={'coin':_0x2a158e[_0x5c0cb3(0x212)],'number':_0x39b2b9,'breakeven':_0x4142a0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5c0cb3(0x26a)](_0x5c0cb3(0x1ec))[_0x5c0cb3(0x1c5)]({'coin':_0x2a158e[_0x5c0cb3(0x212)]})['assign'](_0x449a92)[_0x5c0cb3(0x1f1)]();}}_0x4410b8['sort']((_0x2d93f3,_0x450839)=>_0x2d93f3[_0x5c0cb3(0x27a)]>_0x450839[_0x5c0cb3(0x27a)]?0x1:_0x450839[_0x5c0cb3(0x27a)]>_0x2d93f3['datetime']?-0x1:0x0);let _0x35cd3e=0x0;for(let _0x36d88e of _0x4410b8){await updateCoinResults(_0x36d88e,!![]);}}catch(_0x143e5c){await handleError(_0x143e5c,_0x5c0cb3(0x14f));}}async function getAllEventOrders(_0x5ac9b7){const _0x189dcd=_0x56b865;let _0x424330=[],_0x5327f8=dbLogs['get'](_0x189dcd(0x13c))[_0x189dcd(0x2a4)](_0x21114c=>{const _0xfc9be0=_0x189dcd,_0x3e8e7a=_0x21114c[_0xfc9be0(0x249)][_0xfc9be0(0x142)]();return _0x3e8e7a['includes'](_0x5ac9b7[_0xfc9be0(0x142)]())&&(_0x3e8e7a['includes'](_0xfc9be0(0x29d))&&_0x3e8e7a[_0xfc9be0(0x137)](_0xfc9be0(0x192))||_0x3e8e7a[_0xfc9be0(0x137)]('filled')&&_0x3e8e7a[_0xfc9be0(0x137)](_0xfc9be0(0x192)));})[_0x189dcd(0x26c)](_0x189dcd(0x220))[_0x189dcd(0x1f5)]();return _0x5327f8[_0x189dcd(0x257)](_0x5d03e0=>{const _0x2a214c=_0x189dcd,_0x40ec19=_0x5d03e0[_0x2a214c(0x249)]['includes']('sell')?'sell':_0x2a214c(0x210),_0x1aef15=/#([0-9]|\.)+\s/i,_0xfbcd27=Number(_0x1aef15[_0x2a214c(0x201)](_0x5d03e0[_0x2a214c(0x249)])[0x0][_0x2a214c(0x1c7)](0x1)),_0x37424d=/@([0-9]|\.)+$/i,_0x4715e9=Number(_0x37424d[_0x2a214c(0x201)](_0x5d03e0[_0x2a214c(0x249)])[0x0][_0x2a214c(0x1c7)](0x1));_0x424330[_0x2a214c(0x1b5)]({'datetime':_0x5d03e0[_0x2a214c(0x220)],'coin':symbolToCoin(_0x5ac9b7),'symbol':_0x5ac9b7,'side':_0x40ec19,'amount':_0xfbcd27,'filled':_0xfbcd27,'price':_0x4715e9});}),_0x424330;}async function getAllOrders(_0x25f603,_0x5c3988){const _0x55fe48=_0x56b865;let _0x144e3d=[];while(_0x5c3988<exchange[_0x55fe48(0x278)]()){const _0x28a330=0x1f4,_0xb7e9c0=await exchange[_0x55fe48(0x1a7)](_0x25f603,_0x5c3988,_0x28a330);if(_0xb7e9c0[_0x55fe48(0x260)])_0x5c3988=_0xb7e9c0[_0xb7e9c0[_0x55fe48(0x260)]-0x1][_0x55fe48(0x1a4)]+0x1,_0x144e3d=_0x144e3d['concat'](_0xb7e9c0);else break;}return _0x144e3d;}async function validate24hChanges(){const _0x3e9f9a=_0x56b865;for(const _0xb45da1 of currentCoins){if(_0xb45da1[_0x3e9f9a(0x212)]!=config[_0x3e9f9a(0x170)]){let _0x2d23ca;_0xb45da1[_0x3e9f9a(0x1f8)]?_0x2d23ca=formatResult((0x1/(global[_0x3e9f9a(0x1b6)][noslash(_0xb45da1['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x2d23ca=global[_0x3e9f9a(0x1b6)][noslash(_0xb45da1['symbol'])],_0x2d23ca<config['change24h']&&(logHistory(_0x3e9f9a(0x29c),_0xb45da1[_0x3e9f9a(0x212)]+_0x3e9f9a(0x1bd)+_0x2d23ca+'%'),logHistory(_0x3e9f9a(0x29c),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x3e9f9a(0x29c),_0x3e9f9a(0x298)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4adb7c,_0x50daae){const _0x1638d5=_0x56b865;if(!_0x4adb7c)return!![];const _0x1657b4=_0x50daae['split']('.'),_0x429630=_0x4adb7c[_0x1638d5(0x243)]('.');for(var _0x5833f4=0x0;_0x5833f4<_0x429630[_0x1638d5(0x260)];_0x5833f4++){const _0x15c11c=~~_0x429630[_0x5833f4],_0x84058a=~~_0x1657b4[_0x5833f4];if(_0x15c11c<_0x84058a)return!![];if(_0x15c11c>_0x84058a)return![];}return![];}function _0x40f3(_0x49cc62,_0x1fae85){const _0x59aeef=_0x31a8();return _0x40f3=function(_0x28dcac,_0x231661){_0x28dcac=_0x28dcac-0x126;let _0x31a850=_0x59aeef[_0x28dcac];return _0x31a850;},_0x40f3(_0x49cc62,_0x1fae85);}async function oneTimeMigration(){const _0x20b038=_0x56b865;let _0x379198=dbLogs[_0x20b038(0x26a)](_0x20b038(0x187))[_0x20b038(0x1f5)]();if(isOlderVersion(_0x379198,_0x20b038(0x1ff))){let _0xeb1b3=[];const _0x5f236e=dbLogs['get'](_0x20b038(0x13c))['value']();_0x5f236e[_0x20b038(0x257)](_0x1896f=>{const _0x18b3c8=_0x20b038;_0xeb1b3[_0x18b3c8(0x1b5)]({'time':_0x1896f[_0x18b3c8(0x220)],'type':_0x1896f[_0x18b3c8(0x261)],'event':_0x1896f[_0x18b3c8(0x249)]});}),dbLogs['get']('logs')[_0x20b038(0x1e8)](_0xeb1b3)['write']();}let _0x55590d=dbConfig['get']('version')[_0x20b038(0x1f5)]();if(isOlderVersion(_0x55590d,_0x20b038(0x1ff))){let _0x3d3b7d=dbConfig[_0x20b038(0x26a)](_0x20b038(0x1c1))[_0x20b038(0x1c5)]({'botID':botID})[_0x20b038(0x1f5)]();if(_0x3d3b7d){let _0x5487c4=[];_0x3d3b7d[_0x20b038(0x225)][_0x20b038(0x257)](_0x89754=>{const _0x19911b=_0x20b038;_0x5487c4[_0x19911b(0x1b5)]({'coin':_0x89754[_0x19911b(0x212)],'number':_0x89754[_0x19911b(0x245)],'price':_0x89754[_0x19911b(0x244)]}),delete _0x89754['startnumber'],delete _0x89754[_0x19911b(0x244)];});if(_0x5487c4['length']!==0x0)fs[_0x20b038(0x15a)](configbackuppath+('starting-balance-'+botID+_0x20b038(0x25c)),JSON[_0x20b038(0x254)](_0x5487c4,null,0x4),function(_0x119186){if(_0x119186){}});const _0x5bcc50=(_0x50854f,_0x48915a)=>{const _0x117e48=_0x20b038;let _0x523858=[];_0x48915a[_0x117e48(0x257)](_0x4d1d83=>{const _0x51be95=_0x117e48,_0x4b039e=_0x50854f[_0x51be95(0x1c5)](_0x38e547=>_0x38e547[_0x51be95(0x212)]==_0x4d1d83[_0x51be95(0x212)]);if(!_0x4b039e)_0x523858[_0x51be95(0x1b5)](_0x4d1d83);});let _0x136b87=[];return _0x50854f['forEach'](_0x4c7ca5=>{const _0x2ff675=_0x117e48,_0x10adfb=_0x48915a[_0x2ff675(0x1c5)](_0x2dfa47=>_0x2dfa47['coin']==_0x4c7ca5[_0x2ff675(0x212)]);if(!_0x10adfb||_0x10adfb[_0x2ff675(0x1a3)]==0x0&&_0x4c7ca5[_0x2ff675(0x1a3)]!=0x0)_0x136b87[_0x2ff675(0x1b5)](_0x4c7ca5);}),{'missingDay1':_0x523858,'notInDay2':_0x136b87};},_0x2886f1=dbPerformance['get'](_0x20b038(0x1cc))[_0x20b038(0x23f)]()[_0x20b038(0x1f5)]();if(_0x2886f1[_0x20b038(0x260)]>0x1){const {missingDay1:_0x31b458,notInDay2:_0x38ba86}=_0x5bcc50(_0x5487c4,_0x2886f1[0x1]['coins']);_0x5487c4=[..._0x5487c4,..._0x31b458],_0x38ba86[_0x20b038(0x257)](_0x2b2279=>{const _0x6b81a1=_0x20b038;let _0x43d6f7=_0x5487c4[_0x6b81a1(0x1eb)](_0x5900b8=>_0x5900b8[_0x6b81a1(0x212)]==_0x2b2279['coin']);_0x43d6f7!=-0x1&&_0x5487c4['splice'](_0x43d6f7,0x1);});}_0x5487c4[_0x20b038(0x1ba)]((_0x2d4eb5,_0x412dd8)=>_0x2d4eb5['coin']>_0x412dd8[_0x20b038(0x212)]?0x1:_0x412dd8[_0x20b038(0x212)]>_0x2d4eb5[_0x20b038(0x212)]?-0x1:0x0);let _0x181889=[{'date':_0x3d3b7d[_0x20b038(0x194)],'changes':_0x5487c4}];_0x2886f1[_0x20b038(0x260)]>0x2&&_0x2886f1[_0x20b038(0x257)]((_0x5d9060,_0x38b748)=>{const _0x346d5f=_0x20b038;if(_0x38b748>0x0&&_0x38b748<_0x2886f1['length']-0x1){const {missingDay1:_0x2b0f78,notInDay2:_0x245032}=_0x5bcc50(_0x2886f1[_0x38b748][_0x346d5f(0x1ec)],_0x2886f1[_0x38b748+0x1][_0x346d5f(0x1ec)]);_0x5487c4=[],(_0x2b0f78['length']!=0x0||_0x245032[_0x346d5f(0x260)]!=0x0)&&(_0x2b0f78['length']!=0x0&&_0x5487c4[_0x346d5f(0x1b5)](..._0x2b0f78),_0x245032[_0x346d5f(0x260)]!=0x0&&(_0x245032[_0x346d5f(0x257)](_0x49ba72=>{const _0xd9f7fb=_0x346d5f;_0x49ba72[_0xd9f7fb(0x1a3)]=-_0x49ba72['number'];}),_0x5487c4[_0x346d5f(0x1b5)](..._0x245032)),_0x5487c4[_0x346d5f(0x1ba)]((_0x5d5b75,_0x535223)=>_0x5d5b75[_0x346d5f(0x212)]>_0x535223[_0x346d5f(0x212)]?0x1:_0x535223[_0x346d5f(0x212)]>_0x5d5b75['coin']?-0x1:0x0),_0x181889[_0x346d5f(0x1b5)]({'date':_0x2886f1[_0x38b748+0x1]['date'],'changes':_0x5487c4}));}}),dbConfig[_0x20b038(0x26a)](_0x20b038(0x1c1))[_0x20b038(0x1c5)]({'botID':botID})['assign']({..._0x3d3b7d,'liquidity':_0x181889})[_0x20b038(0x1f1)]();}}if(isOlderVersion(_0x55590d,_0x20b038(0x16f))){let _0x404853=dbConfig['get']('bot')[_0x20b038(0x1c5)]({'botID':botID})['value']();if(_0x404853){const _0xd55261=_0x404853[_0x20b038(0x18d)],_0x1d7109=_0xd55261?capitalize(_0xd55261):_0x20b038(0x252);dbConfig[_0x20b038(0x26a)](_0x20b038(0x1c1))[_0x20b038(0x1c5)]({'botID':botID})[_0x20b038(0x1e8)]({'exchange':_0x1d7109})[_0x20b038(0x1f1)]();}}let _0x3b80de=dbPerformance[_0x20b038(0x26a)](_0x20b038(0x187))['value']();isOlderVersion(_0x3b80de,'2.3.5')&&setStartDatePerformance();let _0x2c86bb=dbCoinResults[_0x20b038(0x26a)](_0x20b038(0x187))[_0x20b038(0x1f5)]();if(isOlderVersion(_0x2c86bb,_0x20b038(0x1aa))){let _0x10c7a2=dbCoinResults[_0x20b038(0x26a)](_0x20b038(0x1ec))[_0x20b038(0x1f5)]();if(_0x10c7a2[_0x20b038(0x260)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x26bc2b=_0x56b865;dbConfig[_0x26bc2b(0x136)](_0x26bc2b(0x187),serverversion)['write'](),dbPerformance[_0x26bc2b(0x136)](_0x26bc2b(0x187),serverversion)[_0x26bc2b(0x1f1)](),dbLogs[_0x26bc2b(0x136)](_0x26bc2b(0x187),serverversion)[_0x26bc2b(0x1f1)](),dbCoinResults[_0x26bc2b(0x136)](_0x26bc2b(0x187),serverversion)[_0x26bc2b(0x1f1)]();}function getConfiguration(_0x253284){const _0x609f2=_0x56b865;let _0x60eff=dbConfig[_0x609f2(0x26a)](_0x609f2(0x1c1))[_0x609f2(0x1c5)]({'botID':_0x253284})[_0x609f2(0x1f5)]();if(_0x60eff){let _0x127263=![];typeof _0x60eff[_0x609f2(0x1ef)]==_0x609f2(0x1bf)&&(_0x60eff={..._0x60eff,'threshold':Number(_0x60eff[_0x609f2(0x1ef)])},_0x127263=!![]),_0x60eff['change24h']==null&&(_0x60eff={..._0x60eff,'change24h':-0x14},_0x127263=!![]),!_0x60eff['fiat']&&(_0x60eff={..._0x60eff,'fiat':_0x609f2(0x150)},_0x127263=!![]),!_0x60eff[_0x609f2(0x147)]&&(_0x60eff={..._0x60eff,'onepagemode':settings[_0x609f2(0x147)]},_0x127263=!![]),!_0x60eff[_0x609f2(0x1ae)]&&(_0x60eff={..._0x60eff,'colorscheme':_0x609f2(0x268)},_0x127263=!![]),_0x127263&&(_0x60eff={'botID':_0x60eff[_0x609f2(0x1bb)],'exchange':_0x60eff['exchange'],'apiKey':_0x60eff[_0x609f2(0x1da)],'apiSecret':_0x60eff[_0x609f2(0x233)],'apiPassword':_0x60eff['apiPassword'],'basecoin':_0x60eff[_0x609f2(0x170)],'botname':_0x60eff[_0x609f2(0x218)],'showname':_0x60eff['showname'],'threshold':_0x60eff[_0x609f2(0x1ef)],'ordertype':_0x60eff[_0x609f2(0x171)],'timeout':_0x60eff[_0x609f2(0x28f)],'fiat':_0x60eff[_0x609f2(0x263)],'startdate':_0x60eff[_0x609f2(0x194)],'recreate':_0x60eff[_0x609f2(0x148)],'timeshift':_0x60eff[_0x609f2(0x287)],'onepagemode':_0x60eff[_0x609f2(0x147)],'headless':_0x60eff[_0x609f2(0x2a0)],'cooldown':_0x60eff[_0x609f2(0x296)],'change24h':_0x60eff[_0x609f2(0x286)],'emojibuy':_0x60eff[_0x609f2(0x264)],'emojisell':_0x60eff['emojisell'],'colorscheme':_0x60eff[_0x609f2(0x1ae)],'portfolio':_0x60eff[_0x609f2(0x225)],'liquidity':_0x60eff[_0x609f2(0x181)],'openOrders':_0x60eff[_0x609f2(0x275)]},dbConfig[_0x609f2(0x26a)](_0x609f2(0x1c1))[_0x609f2(0x1c3)]()[_0x609f2(0x1f1)](),dbConfig['get'](_0x609f2(0x1c1))[_0x609f2(0x1b5)](_0x60eff)[_0x609f2(0x1f1)]());}else _0x60eff={'botID':_0x253284,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x609f2(0x1ea)+_0x253284,'showname':![],'threshold':0x3,'ordertype':_0x609f2(0x29d),'timeout':0x14,'fiat':_0x609f2(0x150),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x609f2(0x287)],'onepagemode':settings[_0x609f2(0x147)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x609f2(0x268),'portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x60eff;}function emittedConfiguration(){const _0x55f632=_0x56b865;let _0x3f02bb;if(config[_0x55f632(0x1da)]=='')_0x3f02bb={...config,'configstate':'initial'};else config[_0x55f632(0x1da)]=='***'?_0x3f02bb={...config,'configstate':_0x55f632(0x1a0)}:(_0x3f02bb={...config,'apiKey':_0x55f632(0x1a6),'apiSecret':_0x55f632(0x1a6)},config[_0x55f632(0x21b)]&&(_0x3f02bb[_0x55f632(0x21b)]=_0x55f632(0x1a6)));return _0x3f02bb;}function getSettings(){const _0x37bd97=_0x56b865;return dbSettings['get'](_0x37bd97(0x270))[_0x37bd97(0x1f5)]();}function getSecure(){const _0x2dd46c=_0x56b865;return dbSecure['get']('secure')[_0x2dd46c(0x1f5)]()||{};}function updateTimeshift(_0xa94f16){const _0x1aac04=_0x56b865;let _0xe71cd3=dbConfig[_0x1aac04(0x26a)](_0x1aac04(0x1c1))['find']({'botID':botID})[_0x1aac04(0x1f5)]();_0xe71cd3&&dbConfig['get'](_0x1aac04(0x1c1))['find']({'botID':botID})[_0x1aac04(0x1e8)]({'timeshift':_0xa94f16})[_0x1aac04(0x1f1)](),config['timeshift']=_0xa94f16,proxyEmit(_0x1aac04(0x215),emittedConfiguration());}function updateOnepagemode(_0x384d35){const _0x2f2364=_0x56b865;let _0x350ef0=dbConfig[_0x2f2364(0x26a)](_0x2f2364(0x1c1))[_0x2f2364(0x1c5)]({'botID':botID})['value']();_0x350ef0&&dbConfig[_0x2f2364(0x26a)](_0x2f2364(0x1c1))['find']({'botID':botID})['assign']({'onepagemode':_0x384d35})[_0x2f2364(0x1f1)](),config['onepagemode']=_0x384d35,proxyEmit(_0x2f2364(0x215),emittedConfiguration());}async function storeConfiguration(_0x26896c){const _0x268870=_0x56b865;logger[_0x268870(0x28a)](_0x268870(0x13a));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x268870(0x28a)]('Transaction\x20detection\x20blocked');let _0x363725=[],_0x37a5a0=![],_0x591260=![],_0x36349e=[];_0x26896c[_0x268870(0x225)][_0x268870(0x257)](_0x50199e=>{const _0x4302f6=_0x268870;if(!_0x50199e[_0x4302f6(0x17d)]&&_0x50199e[_0x4302f6(0x212)]!=_0x26896c[_0x4302f6(0x170)])_0x36349e[_0x4302f6(0x1b5)](_0x50199e[_0x4302f6(0x1b2)]);}),_0x36349e[_0x268870(0x257)](_0x2dcdd4=>{const _0x1117c7=_0x268870,_0x34fe00=watchedSymbols[_0x1117c7(0x137)](_0x2dcdd4);!_0x34fe00&&_0x363725['push'](_0x2dcdd4);});_0x363725[_0x268870(0x260)]>0x0?_0x37a5a0=!![]:currentCoins['forEach'](_0x52f521=>{const _0x427e62=_0x268870;if(_0x52f521[_0x427e62(0x212)]!=config[_0x427e62(0x170)]){const _0x321097=_0x36349e['find'](_0x2318f8=>_0x2318f8==_0x52f521['symbol']);!_0x321097&&(_0x37a5a0=!![]);}});_0x26896c['portfolio']['forEach'](_0x1107a7=>{const _0x4ce0ee=_0x268870,_0x549542=config[_0x4ce0ee(0x225)][_0x4ce0ee(0x1c5)](_0x680954=>_0x680954['coin']==_0x1107a7[_0x4ce0ee(0x212)]);if(_0x549542&&_0x1107a7['offset']!=_0x549542[_0x4ce0ee(0x1c4)])_0x591260=!![];});let _0x157e6e=dbConfig[_0x268870(0x26a)](_0x268870(0x1c1))[_0x268870(0x1c5)]({'botID':botID})[_0x268870(0x1f5)]();_0x26896c={..._0x26896c,'apiKey':crypt['decrypt'](secure[_0x268870(0x253)],_0x26896c[_0x268870(0x1da)])[_0x268870(0x17b)],'apiSecret':crypt[_0x268870(0x208)](secure[_0x268870(0x253)],_0x26896c[_0x268870(0x233)])[_0x268870(0x17b)]};_0x26896c[_0x268870(0x21b)]&&(_0x26896c[_0x268870(0x21b)]=crypt[_0x268870(0x208)](secure['privateKey'],_0x26896c[_0x268870(0x21b)])[_0x268870(0x17b)]);let _0x558026=![];if(_0x157e6e){_0x26896c[_0x268870(0x1da)]==_0x268870(0x1a6)?_0x26896c['apiKey']=config[_0x268870(0x1da)]:_0x558026=!![];_0x26896c['apiSecret']==_0x268870(0x1a6)?_0x26896c[_0x268870(0x233)]=config[_0x268870(0x233)]:_0x558026=!![];if(_0x26896c[_0x268870(0x21b)]==_0x268870(0x1a6))_0x26896c['apiPassword']=config[_0x268870(0x21b)];else{if(_0x26896c[_0x268870(0x21b)])_0x558026=!![];}dbConfig[_0x268870(0x26a)]('bot')['find']({'botID':botID})[_0x268870(0x1e8)](_0x26896c)[_0x268870(0x1f1)]();}else dbConfig['get'](_0x268870(0x1c1))['push'](_0x26896c)[_0x268870(0x1f1)](),_0x558026=!![],process[_0x268870(0x177)]({'status':_0x268870(0x247),'live':_0x268870(0x1a8)},_0x1b7b1d=>{});process[_0x268870(0x177)]({'botname':_0x26896c[_0x268870(0x218)]},_0xa9ad0=>{}),updateBotManager(),config={..._0x26896c},proxyEmit(_0x268870(0x15b)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x558026)await reset(_0x363725,!![]);else _0x37a5a0||_0x591260?await reset(_0x363725,![]):getBalances();blockTransactionDetection=![],logger[_0x268870(0x28a)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x20a817){const _0x1c948c=_0x56b865,_0x968b4d={...config,'headless':_0x20a817[_0x1c948c(0x2a0)]};let _0x1538c0=dbConfig[_0x1c948c(0x26a)](_0x1c948c(0x1c1))[_0x1c948c(0x1c5)]({'botID':botID})['value']();_0x1538c0&&dbConfig[_0x1c948c(0x26a)](_0x1c948c(0x1c1))[_0x1c948c(0x1c5)]({'botID':botID})['assign'](_0x968b4d)[_0x1c948c(0x1f1)](),config={..._0x968b4d},updateBotManager(),proxyEmit(_0x1c948c(0x215),emittedConfiguration());}async function storeFiat(_0xe09384){const _0x577be5=_0x56b865,_0x500365={...config,'fiat':_0xe09384};let _0x180063=dbConfig[_0x577be5(0x26a)](_0x577be5(0x1c1))[_0x577be5(0x1c5)]({'botID':botID})[_0x577be5(0x1f5)]();_0x180063&&dbConfig[_0x577be5(0x26a)](_0x577be5(0x1c1))[_0x577be5(0x1c5)]({'botID':botID})[_0x577be5(0x1e8)](_0x500365)['write'](),config={..._0x500365},proxyEmit(_0x577be5(0x215),emittedConfiguration());}function resetHistory(){const _0x3e44ed=_0x56b865;logger[_0x3e44ed(0x289)](_0x3e44ed(0x186));try{if(fs[_0x3e44ed(0x1d3)](path[_0x3e44ed(0x26b)](configpath,_0x3e44ed(0x224)+botID+'-events.json')))fs[_0x3e44ed(0x28b)](path[_0x3e44ed(0x26b)](configpath,_0x3e44ed(0x224)+botID+'-events.json'));if(fs[_0x3e44ed(0x1d3)](path[_0x3e44ed(0x26b)](configpath,_0x3e44ed(0x224)+botID+_0x3e44ed(0x29b))))fs[_0x3e44ed(0x28b)](path['join'](configpath,_0x3e44ed(0x224)+botID+_0x3e44ed(0x29b)));if(fs[_0x3e44ed(0x1d3)](path[_0x3e44ed(0x26b)](configpath,_0x3e44ed(0x224)+botID+_0x3e44ed(0x165))))fs[_0x3e44ed(0x28b)](path[_0x3e44ed(0x26b)](configpath,_0x3e44ed(0x224)+botID+_0x3e44ed(0x165)));}catch(_0xb97c22){if(_0xb97c22)logger[_0x3e44ed(0x289)](_0x3e44ed(0x251),_0xb97c22);}const _0x1af7df=getDate();let _0x1de0fe=[];currentCoins[_0x3e44ed(0x257)](_0x53b7cf=>{const _0x418e5e=_0x3e44ed;_0x1de0fe[_0x418e5e(0x1b5)]({'coin':_0x53b7cf[_0x418e5e(0x212)],'number':_0x53b7cf[_0x418e5e(0x1a3)],'price':_0x53b7cf[_0x418e5e(0x1ab)]});});let _0x814e9=dbConfig[_0x3e44ed(0x26a)](_0x3e44ed(0x1c1))[_0x3e44ed(0x1c5)]({'botID':botID})[_0x3e44ed(0x1f5)]();_0x814e9&&(dbConfig['get'](_0x3e44ed(0x1c1))['find']({'botID':botID})[_0x3e44ed(0x1e8)]({'liquidity':[{'date':_0x1af7df,'changes':_0x1de0fe}]})[_0x3e44ed(0x1f1)](),config[_0x3e44ed(0x181)]=[]),process['send']({'stop':_0x3e44ed(0x214)},_0x53f660=>{});}function noslash(_0x2ab095){const _0x4ee1c9=_0x56b865;return _0x2ab095[_0x4ee1c9(0x140)]('/','');}function updateHighestFee(_0x5e64cb,_0x440638){const _0x4ec49f=_0x56b865;lastFees[_0x4ec49f(0x202)]=_0x5e64cb,lastFees['recent20']['length']===0x14&&lastFees[_0x4ec49f(0x25e)][_0x4ec49f(0x143)](),lastFees[_0x4ec49f(0x25e)][_0x4ec49f(0x1b5)](_0x440638),lastFees[_0x4ec49f(0x291)]=Math[_0x4ec49f(0x185)](...lastFees[_0x4ec49f(0x25e)]);}async function updateNumberCoinsCcxt(_0x1f52ab){const _0x4dce50=_0x56b865;logger[_0x4dce50(0x28a)](_0x4dce50(0x276)+_0x1f52ab[_0x4dce50(0x1b2)]+_0x4dce50(0x1fc)+_0x1f52ab[_0x4dce50(0x17a)]+_0x4dce50(0x1fc)+_0x1f52ab['id']+_0x4dce50(0x1fc)+_0x1f52ab[_0x4dce50(0x19f)]);let _0x201f4c=_0x1f52ab[_0x4dce50(0x17a)],_0x4c5839=![];currentCoins['forEach'](_0x3b241b=>{const _0x2bdcd8=_0x4dce50;_0x3b241b['symbol']==_0x1f52ab[_0x2bdcd8(0x1b2)]&&(_0x4c5839=!![]);});if(!_0x4c5839)return;const _0x2a24e6=currentCoins[_0x4dce50(0x1c5)](_0x4d2528=>_0x4d2528[_0x4dce50(0x1b2)]==_0x1f52ab[_0x4dce50(0x1b2)]),_0x2ee493=_0x26f9ca=>{const _0x2242c7=_0x4dce50;if(_0x2a24e6)_0x2a24e6[_0x2242c7(0x166)]=_0x26f9ca;};if(_0x201f4c==_0x4dce50(0x14a))_0x2ee493(_0x4dce50(0x14a));else{if(_0x201f4c==_0x4dce50(0x27f)){_0x2ee493('canceled');const _0x3af79c=await getCoins();[currentCoins,currentCoinsAll]=_0x3af79c,await getOpenOrders(),handleOpenOrders();}else{if(_0x201f4c==_0x4dce50(0x1bc)){logger['debug']('1\x20-\x20FILLED:\x20'+_0x1f52ab[_0x4dce50(0x1b2)]+_0x4dce50(0x1fc)+_0x1f52ab[_0x4dce50(0x1ca)]+_0x4dce50(0x1fc)+_0x1f52ab['id']+_0x4dce50(0x1fc)+_0x1f52ab['clientOrderId']);let _0x2c64e6=![];if(lastOrders)lastOrders[_0x4dce50(0x257)](async _0x5cd6ab=>{const _0x4b2c83=_0x4dce50;if(_0x5cd6ab['customId']==_0x1f52ab[_0x4b2c83(0x19f)]){logger[_0x4b2c83(0x28a)](_0x4b2c83(0x1f6)+_0x1f52ab[_0x4b2c83(0x19f)]),_0x2c64e6=!![];if(_0x5cd6ab[_0x4b2c83(0x1ca)]==0x0){logger[_0x4b2c83(0x28a)](_0x4b2c83(0x16d)+_0x1f52ab[_0x4b2c83(0x19f)]);if(_0x1f52ab[_0x4b2c83(0x1df)])_0x5cd6ab[_0x4b2c83(0x146)]=_0x1f52ab['average'];else{if(_0x1f52ab[_0x4b2c83(0x146)])_0x5cd6ab[_0x4b2c83(0x146)]=_0x1f52ab[_0x4b2c83(0x146)];else{}}_0x5cd6ab[_0x4b2c83(0x1ca)]=_0x1f52ab[_0x4b2c83(0x1ca)],_0x5cd6ab['fee']={'currency':_0x1f52ab[_0x4b2c83(0x209)]?_0x1f52ab[_0x4b2c83(0x209)]['currency']:null,'cost':_0x1f52ab[_0x4b2c83(0x209)]?_0x1f52ab[_0x4b2c83(0x209)][_0x4b2c83(0x1b0)]:0x0},updateHighestFee(_0x5cd6ab['fee']['currency'],_0x5cd6ab[_0x4b2c83(0x209)]['cost']),_0x2ee493(_0x4b2c83(0x1ca)),await validateOrders();if(lockOrders==ORDERS[_0x4b2c83(0x294)]){const _0x2747c8=await getCoins();[currentCoins,currentCoinsAll]=_0x2747c8;}await updateCoinResults(_0x5cd6ab);}}});if(!_0x2c64e6){logger[_0x4dce50(0x28a)](_0x4dce50(0x1dc)+_0x1f52ab['id']),_0x2ee493(_0x4dce50(0x1ca));const _0x51fcf2=await getCoins();[currentCoins,currentCoinsAll]=_0x51fcf2,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x159852=JSON[_0x4dce50(0x255)](lastBalances[_0x4dce50(0x225)]);const _0x426fe0=_0x159852[_0x4dce50(0x1c5)](_0x224627=>_0x224627[_0x4dce50(0x1b2)]==_0x1f52ab['symbol']);if(_0x426fe0){if(_0x201f4c==_0x4dce50(0x14a))_0x426fe0[_0x4dce50(0x166)]=_0x426fe0[_0x4dce50(0x166)]=='filled'?_0x4dce50(0x1ca):_0x4dce50(0x14a);else{if(_0x201f4c==_0x4dce50(0x27f))_0x426fe0['orderstatus']=_0x426fe0[_0x4dce50(0x166)]=='filled'?_0x4dce50(0x1ca):_0x4dce50(0x27f);else _0x201f4c==_0x4dce50(0x1bc)&&(_0x426fe0[_0x4dce50(0x166)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x4dce50(0x254)](_0x159852)},proxyEmit(_0x4dce50(0x16c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x218641=_0x56b865;await getOpenOrders();let _0x1ac9ed=![];currentCoins[_0x218641(0x257)](_0x1182fc=>{const _0x10c407=_0x218641;_0x1ac9ed=allOpenOrders[_0x10c407(0x1c5)](_0x321947=>_0x321947[_0x10c407(0x1b2)]==_0x1182fc[_0x10c407(0x1b2)]),_0x1182fc['orderstatus']=_0x1ac9ed?'open':_0x10c407(0x1be);});}async function getCoins(_0x456588=!![],_0x2732be=config[_0x56b865(0x170)]){const _0x28e92a=_0x56b865;let _0xac7e4c,_0x24c822=[],_0xa59494=[],_0x1e0442=[],_0x1db3aa=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0xac7e4c=await exchange[_0x28e92a(0x1af)](),mybalances=_0xac7e4c['total'];for(const [_0x43c2cd,_0x5ab435]of Object[_0x28e92a(0x246)](mybalances)){_0x1db3aa[_0x28e92a(0x1b5)](_0x43c2cd);}if(_0x2732be=='')for(const [_0x518ab1,_0x863b08]of Object['entries'](mybalances)){_0x863b08[_0x28e92a(0x159)]()!=0x0&&_0xa59494[_0x28e92a(0x1b5)]({'coin':_0x518ab1});}else{let _0x4b1711=![];for(const [_0x84337e,_0x3d87d1]of Object[_0x28e92a(0x246)](mybalances)){if(_0x1db3aa['includes'](_0x84337e)){const _0x5a157a=config[_0x28e92a(0x225)]['find'](_0xc57302=>_0xc57302[_0x28e92a(0x212)]==_0x84337e),_0x211055=_0x84337e+'/'+_0x2732be,_0x29d74b=_0x2732be+'/'+_0x84337e,_0x290865=currentCoins[_0x28e92a(0x1c5)](_0x3ac55b=>_0x3ac55b[_0x28e92a(0x212)]==_0x84337e);_0x4b1711=![];if((_0x3d87d1['toString']()!=0x0||_0x5a157a)&&(allSymbols[_0x28e92a(0x137)](_0x211055)||_0x84337e==_0x2732be))_0x84337e!=_0x2732be&&_0x24c822['push'](_0x211055),_0xa59494[_0x28e92a(0x1b5)]({'coin':_0x84337e,'symbol':_0x211055,'reverse':![],'number':Math[_0x28e92a(0x185)](_0x3d87d1+(_0x5a157a&&_0x5a157a['offset']||0x0),0x0),'orderstatus':_0x290865?_0x290865[_0x28e92a(0x166)]:_0x28e92a(0x1be)});else(_0x3d87d1[_0x28e92a(0x159)]()!=0x0||_0x5a157a)&&allSymbols[_0x28e92a(0x137)](_0x29d74b)&&(_0x84337e!=_0x2732be&&_0x24c822[_0x28e92a(0x1b5)](_0x29d74b),_0xa59494['push']({'coin':_0x84337e,'symbol':_0x29d74b,'reverse':!![],'number':Math[_0x28e92a(0x185)](_0x3d87d1+(_0x5a157a&&_0x5a157a[_0x28e92a(0x1c4)]||0x0),0x0),'orderstatus':_0x290865?_0x290865[_0x28e92a(0x166)]:_0x28e92a(0x1be)}));}}}}catch(_0x456065){if(!_0x456588)handleErrorNoStop(_0x456065,_0x28e92a(0x2a5));else await handleError(_0x456065,_0x28e92a(0x2a5));}return _0x1e0442=cloneDeep(_0xa59494),_0xa59494=_0xa59494[_0x28e92a(0x2a4)](_0x5ee376=>{const _0x23bf32=_0x28e92a,_0x2af134=config[_0x23bf32(0x225)]['find'](_0x3fd3ac=>_0x3fd3ac[_0x23bf32(0x212)]==_0x5ee376[_0x23bf32(0x212)]);return _0x2af134&&!_0x2af134[_0x23bf32(0x17d)];}),[_0xa59494,_0x1e0442];}async function getCoinNumber(_0x13b5ad){const _0x5c3825=_0x56b865;let _0xfd920b;try{const _0x16df73=await exchange[_0x5c3825(0x1af)]();_0xfd920b=_0x16df73[_0x5c3825(0x274)][_0x13b5ad];}catch(_0x4ed517){await handleError(_0x4ed517,'getCoinNumber()');}return _0xfd920b;}async function getOpenOrders(){const _0x20c8e4=_0x56b865;let _0x598a01;allOpenOrders=[];try{for(const _0x32d856 of config[_0x20c8e4(0x225)]){!_0x32d856[_0x20c8e4(0x17d)]&&_0x32d856[_0x20c8e4(0x212)]!=config['basecoin']&&(_0x598a01=await exchange[_0x20c8e4(0x227)](_0x32d856[_0x20c8e4(0x1b2)]),_0x598a01[_0x20c8e4(0x260)]>0x0&&allOpenOrders[_0x20c8e4(0x1b5)](_0x598a01[0x0]));}}catch(_0x407b65){await handleError(_0x407b65,'getOpenOrders()');}}async function handleOpenOrders(_0x2446c1=0x0){const _0x38d326=_0x56b865;allOpenOrders[_0x38d326(0x260)]==0x0&&lockOrders==ORDERS[_0x38d326(0x294)]&&allOrdersPlaced&&(_0x2446c1==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x2446c1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x38d326(0x28a)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x38d326(0x1ce))));}async function testAPI(_0x161525){const _0x18e27f=_0x56b865,_0x45b433=ccxt[_0x161525['exchange'][_0x18e27f(0x142)]()],_0x48f84f=new _0x45b433({'apiKey':_0x161525['apiKey'],'secret':_0x161525[_0x18e27f(0x233)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x161525['apiPassword'])_0x48f84f['password']=_0x161525[_0x18e27f(0x21b)];try{await _0x48f84f[_0x18e27f(0x15e)]();}catch(_0x18640c){throw _0x18640c;}}function cloneDeep(_0x27df5d){const _0x3d7694=_0x56b865;return JSON[_0x3d7694(0x255)](JSON['stringify'](_0x27df5d));}async function getPortfolio(_0x3d90e6){const _0x5ad872=_0x56b865;let _0x5e128d=[],_0xbb0a80=[],_0x40b73e=[],_0x8a8b3f;if(_0x3d90e6[_0x5ad872(0x1da)]!=='************'||_0x3d90e6[_0x5ad872(0x233)]!=='************'||_0x3d90e6[_0x5ad872(0x21b)]&&_0x3d90e6[_0x5ad872(0x21b)]!==_0x5ad872(0x1a6)){if(config['exchange']){if(_0x3d90e6[_0x5ad872(0x1da)]==_0x5ad872(0x1a6))_0x3d90e6[_0x5ad872(0x1da)]=config[_0x5ad872(0x1da)];if(_0x3d90e6[_0x5ad872(0x233)]=='************')_0x3d90e6[_0x5ad872(0x233)]=config[_0x5ad872(0x233)];if(_0x3d90e6[_0x5ad872(0x21b)]==_0x5ad872(0x1a6))_0x3d90e6[_0x5ad872(0x21b)]=config[_0x5ad872(0x21b)];try{await testAPI(_0x3d90e6);}catch(_0xed1c3a){if(_0xed1c3a[_0x5ad872(0x159)]()[_0x5ad872(0x137)](_0x5ad872(0x139))){logger[_0x5ad872(0x28a)](_0x5ad872(0x141)),proxyEmit(_0x5ad872(0x225),![]);return;}else{handleError(_0xed1c3a,'getPortfolio(0)');return;}}}await initExchange(_0x3d90e6[_0x5ad872(0x18d)],_0x3d90e6[_0x5ad872(0x1da)],_0x3d90e6[_0x5ad872(0x233)],_0x3d90e6[_0x5ad872(0x21b)]);try{await loadSymbols(_0x3d90e6[_0x5ad872(0x18d)],!![]);}catch(_0x1ec002){if(_0x1ec002[_0x5ad872(0x159)]()[_0x5ad872(0x137)](_0x5ad872(0x139))){proxyEmit(_0x5ad872(0x225),![]);return;}else{handleError(_0x1ec002,'getPortfolio(1)');return;}}const _0x29f347=await getCoins(![],_0x3d90e6[_0x5ad872(0x170)]);_0x40b73e=cloneDeep(_0x29f347[0x1]);}else _0x40b73e=cloneDeep(currentCoinsAll);if(_0x3d90e6[_0x5ad872(0x170)]=='')proxyEmit(_0x5ad872(0x225),_0x40b73e);else{_0x40b73e[_0x5ad872(0x257)](_0x2f21f6=>{const _0x1101af=_0x5ad872;if(_0x2f21f6[_0x1101af(0x212)]!=_0x3d90e6[_0x1101af(0x170)])_0x5e128d[_0x1101af(0x1b5)](_0x2f21f6[_0x1101af(0x1b2)]);});try{_0xbb0a80=await exchange[_0x5ad872(0x1d8)](_0x5e128d);}catch(_0x59e980){if(_0x59e980[_0x5ad872(0x159)]()[_0x5ad872(0x137)](_0x5ad872(0x139))){proxyEmit('portfolio',![]);return;}else{handleError(_0x59e980,_0x5ad872(0x22e));return;}}_0x40b73e[_0x5ad872(0x257)](_0x56f951=>{const _0x1d6105=_0x5ad872;_0x56f951['coin']!=_0x3d90e6['basecoin']?_0x8a8b3f=_0x56f951[_0x1d6105(0x1f8)]?0x1/_0xbb0a80[_0x56f951[_0x1d6105(0x1b2)]]['last']:_0xbb0a80[_0x56f951['symbol']]['last']:_0x8a8b3f=0x1,_0x56f951[_0x1d6105(0x146)]=formatResult(_0x8a8b3f,0x8);}),proxyEmit(_0x5ad872(0x225),_0x40b73e);}}function truncateTradeAmount(_0x18411a,_0x1a757c){const _0x4dd4d6=_0x56b865;let _0x3d4e3d=0x0;try{_0x3d4e3d=exchange[_0x4dd4d6(0x284)](_0x18411a,_0x1a757c);}catch(_0x4c0192){}return _0x3d4e3d;}function checkMinimums(_0x562f3f){const _0xbb5cb7=_0x56b865;let _0x577e26=!![];const _0xb7a839=!_0x562f3f[_0xbb5cb7(0x1f8)]?markets[_0x562f3f[_0xbb5cb7(0x1b2)]][_0xbb5cb7(0x217)]['amount']['min']:markets[_0x562f3f[_0xbb5cb7(0x1b2)]][_0xbb5cb7(0x217)]['cost'][_0xbb5cb7(0x206)],_0x16c7ab=!_0x562f3f[_0xbb5cb7(0x1f8)]?markets[_0x562f3f[_0xbb5cb7(0x1b2)]][_0xbb5cb7(0x217)]['cost']['min']:markets[_0x562f3f[_0xbb5cb7(0x1b2)]][_0xbb5cb7(0x217)][_0xbb5cb7(0x1d5)][_0xbb5cb7(0x206)],_0x52256f=truncateTradeAmount(_0x562f3f[_0xbb5cb7(0x1b2)],_0x562f3f[_0xbb5cb7(0x151)]);_0x562f3f[_0xbb5cb7(0x151)]=_0x52256f;if(Math[_0xbb5cb7(0x178)](_0x52256f)<_0xb7a839)_0x577e26=![];if(Math['abs'](_0x52256f)*_0x562f3f['last']<_0x16c7ab)_0x577e26=![];if(_0x562f3f[_0xbb5cb7(0x196)]==_0xbb5cb7(0x1fe)){let _0x32bb22=config[_0xbb5cb7(0x225)][_0xbb5cb7(0x1c5)](_0x3b6361=>_0x3b6361['coin']==_0x562f3f[_0xbb5cb7(0x212)]);if(_0x32bb22[_0xbb5cb7(0x1c4)]>0x0){if(Math['abs'](_0x52256f)>_0x562f3f[_0xbb5cb7(0x1a3)]-_0x32bb22['offset'])_0x577e26=![];}else{if(Math[_0xbb5cb7(0x178)](_0x52256f)>_0x562f3f[_0xbb5cb7(0x1a3)])_0x577e26=![];}}if(_0x562f3f[_0xbb5cb7(0x196)]==_0xbb5cb7(0x210)){let _0x17083c=config[_0xbb5cb7(0x225)][_0xbb5cb7(0x1c5)](_0x37210f=>_0x37210f[_0xbb5cb7(0x212)]==config['basecoin']),_0x4f7bcf=currentCoins[_0xbb5cb7(0x1c5)](_0x1efe21=>_0x1efe21[_0xbb5cb7(0x212)]==config[_0xbb5cb7(0x170)]);if(_0x17083c['offset']>0x0){if(Math[_0xbb5cb7(0x178)](_0x52256f)*_0x562f3f[_0xbb5cb7(0x1ab)]>_0x4f7bcf[_0xbb5cb7(0x1a3)]-_0x17083c[_0xbb5cb7(0x1c4)])_0x577e26=![];}else{if(Math[_0xbb5cb7(0x178)](_0x52256f)*_0x562f3f[_0xbb5cb7(0x1ab)]>_0x4f7bcf[_0xbb5cb7(0x1a3)])_0x577e26=![];}}return _0x577e26;}async function getBalances(_0x4f9213=!![]){const _0x1c4985=_0x56b865;let _0x819809=0x0,_0x42178d;const _0x481778=config['threshold'];if(config[_0x1c4985(0x2a0)]&&config[_0x1c4985(0x286)]<0x0)await validate24hChanges();currentCoins[_0x1c4985(0x257)](_0x1a5dce=>{const _0x544cc6=_0x1c4985;if(_0x1a5dce[_0x544cc6(0x212)]!=config[_0x544cc6(0x170)]){let _0x3d31e7=global[_0x544cc6(0x145)][noslash(_0x1a5dce['symbol'])];_0x42178d=_0x1a5dce[_0x544cc6(0x1f8)]?0x1/_0x3d31e7:_0x3d31e7;}else _0x42178d=0x1;let _0x4a6033=_0x1a5dce[_0x544cc6(0x1a3)]*_0x42178d;_0x819809+=_0x4a6033,_0x1a5dce[_0x544cc6(0x1ab)]=formatResult(Number(_0x42178d),0x8),_0x1a5dce[_0x544cc6(0x1f5)]=_0x4a6033;}),currentCoins[_0x1c4985(0x257)](_0x825b7e=>{const _0x4c787d=_0x1c4985;let _0x39744d=config['portfolio'][_0x4c787d(0x1c5)](_0x1b626a=>_0x1b626a[_0x4c787d(0x212)]==_0x825b7e[_0x4c787d(0x212)]),_0x273fc1=Number(_0x39744d[_0x4c787d(0x231)]),_0x4023f5=_0x825b7e[_0x4c787d(0x1f5)]/_0x819809*0x64,_0x3229dc=_0x273fc1*_0x819809/0x64/_0x825b7e[_0x4c787d(0x1ab)]-_0x825b7e['number'];_0x825b7e[_0x4c787d(0x231)]=formatResult(_0x4023f5,0x3),_0x825b7e['target']=formatResult(_0x273fc1,0x3),_0x825b7e[_0x4c787d(0x151)]=formatResult(_0x3229dc,0x8),_0x825b7e['side']='',_0x825b7e[_0x4c787d(0x20f)]=![];if(_0x825b7e[_0x4c787d(0x212)]!=config[_0x4c787d(0x170)]){if(_0x825b7e[_0x4c787d(0x231)]>_0x273fc1)_0x825b7e[_0x4c787d(0x196)]=_0x4c787d(0x1fe),_0x825b7e[_0x4c787d(0x20f)]=checkMinimums(_0x825b7e);else _0x825b7e['distribution']<_0x273fc1&&(_0x825b7e[_0x4c787d(0x196)]=_0x4c787d(0x210),_0x825b7e[_0x4c787d(0x20f)]=checkMinimums(_0x825b7e));}_0x825b7e[_0x4c787d(0x19e)]=_0x825b7e[_0x4c787d(0x231)]/_0x825b7e[_0x4c787d(0x259)]-0x1;if(_0x825b7e[_0x4c787d(0x166)]=='filled'||_0x825b7e['orderstatus']==_0x4c787d(0x27f))_0x825b7e[_0x4c787d(0x166)]=_0x4c787d(0x1be);}),currentCoins['sort']((_0x2e67ad,_0x3d708b)=>_0x2e67ad['delta']<_0x3d708b[_0x1c4985(0x19e)]?0x1:_0x3d708b[_0x1c4985(0x19e)]<_0x2e67ad['delta']?-0x1:0x0);const _0x8480cc=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x8480cc[_0x1c4985(0x1f0)],'usd':_0x8480cc[_0x1c4985(0x228)],'portfolio':JSON[_0x1c4985(0x254)](currentCoins),'threshold':_0x481778},proxyEmit(_0x1c4985(0x16c),{'serverversion':serverversion,'balances':lastBalances});if(_0x4f9213){if(config[_0x1c4985(0x2a0)])headlessMode({'portfolio':currentCoins,'threshold':_0x481778});else{if(lockOrders==ORDERS[_0x1c4985(0x223)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x481778});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5b12f4=getNormalizedPerformance();getStartingBalances(_0x5b12f4),emitPerformance(_0x5b12f4);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x79b1f9=getNormalizedPerformance();emitPerformance(_0x79b1f9),getStartingBalances(_0x79b1f9),logger[_0x1c4985(0x28a)](_0x1c4985(0x1e3));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4d4c8c=_0x56b865;if(!lastBalances)return;let _0x104213=[],_0x5dbe7e,_0x3d1753=JSON[_0x4d4c8c(0x255)](lastBalances['portfolio']);_0x3d1753[_0x4d4c8c(0x1ba)]((_0x30f79d,_0x2d1c03)=>_0x30f79d[_0x4d4c8c(0x212)]>_0x2d1c03[_0x4d4c8c(0x212)]?0x1:_0x2d1c03[_0x4d4c8c(0x212)]>_0x30f79d[_0x4d4c8c(0x212)]?-0x1:0x0),_0x3d1753[_0x4d4c8c(0x257)](_0x31993a=>{const _0x56f340=_0x4d4c8c;let _0x2269b6={'coin':_0x31993a[_0x56f340(0x212)],'number':_0x31993a['number'],'price':_0x31993a[_0x56f340(0x1ab)]};_0x104213['push'](_0x2269b6);});const _0x2668e7=await getFiat();_0x5dbe7e={'date':lastBalances[_0x4d4c8c(0x220)][_0x4d4c8c(0x243)]('\x20')[0x0],'eur':_0x2668e7[_0x4d4c8c(0x1f0)],'usd':_0x2668e7['usd'],'coins':_0x104213};let _0x251028=dbPerformance[_0x4d4c8c(0x26a)](_0x4d4c8c(0x1cc))[_0x4d4c8c(0x1c5)]({'date':_0x5dbe7e[_0x4d4c8c(0x183)]})['value']();_0x251028?_0x5dbe7e[_0x4d4c8c(0x183)]!=config['startdate']&&dbPerformance['get']('data')[_0x4d4c8c(0x1c5)]({'date':_0x5dbe7e[_0x4d4c8c(0x183)]})[_0x4d4c8c(0x1e8)](_0x5dbe7e)[_0x4d4c8c(0x1f1)]():dbPerformance[_0x4d4c8c(0x26a)](_0x4d4c8c(0x1cc))[_0x4d4c8c(0x1b5)](_0x5dbe7e)[_0x4d4c8c(0x1f1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x12dd26=_0x56b865;let _0x82e27b=[];if(dbPerformance[_0x12dd26(0x16b)](_0x12dd26(0x1cc))['value']()){let _0x3fbbeb=dbPerformance[_0x12dd26(0x26a)](_0x12dd26(0x1cc))[_0x12dd26(0x23f)]()[_0x12dd26(0x26c)](_0x12dd26(0x183))[_0x12dd26(0x1f5)](),_0x4a9fc8=[...config[_0x12dd26(0x181)]];_0x4a9fc8['sort']((_0x591384,_0x4d8498)=>_0x591384['date']>_0x4d8498['date']?-0x1:_0x4d8498[_0x12dd26(0x183)]>_0x591384[_0x12dd26(0x183)]?0x1:0x0);let _0x1a0523=0x1,_0x43bf9b=[],_0xe0aad3=0x0;_0x3fbbeb[_0x12dd26(0x1c7)]()[_0x12dd26(0x1f8)]()[_0x12dd26(0x257)]((_0xe699ff,_0x31371e)=>{const _0x460b62=_0x12dd26;if(_0x4a9fc8[_0xe0aad3]){if(_0x3fbbeb[_0x3fbbeb['length']-_0x31371e]&&_0x4a9fc8[_0xe0aad3]['date']==_0x3fbbeb[_0x3fbbeb['length']-_0x31371e]['date']){if(_0x31371e<_0x3fbbeb['length']){let _0xf47a47=0x0,_0x58ab92=0x0;_0x3fbbeb[_0x3fbbeb['length']-_0x31371e][_0x460b62(0x1ec)][_0x460b62(0x257)](_0x197cc2=>{const _0x15cd70=_0x460b62;_0x58ab92+=_0x197cc2[_0x15cd70(0x1a3)]*_0x197cc2[_0x15cd70(0x146)];}),_0x4a9fc8[_0xe0aad3][_0x460b62(0x262)][_0x460b62(0x257)](_0x4688c4=>{const _0x8d4c9c=_0x460b62;_0xf47a47+=_0x4688c4[_0x8d4c9c(0x1a3)]*_0x4688c4[_0x8d4c9c(0x146)];}),_0x1a0523*=_0xf47a47/(_0x58ab92-_0xf47a47)+0x1;}_0xe0aad3++;}}let _0x48cfb8=0x0;_0xe699ff[_0x460b62(0x1ec)]['forEach'](_0x3873c6=>{const _0x595c6c=_0x460b62;_0x48cfb8+=_0x3873c6[_0x595c6c(0x1a3)]*_0x3873c6[_0x595c6c(0x146)];}),_0x43bf9b[_0x3fbbeb[_0x460b62(0x260)]-_0x31371e-0x1]=_0x48cfb8*(_0x1a0523-0x1);});let _0x2248e9=[];_0x4a9fc8=[...config['liquidity']]||[];let _0x4096d3=0x0;_0xe0aad3=0x0,_0x3fbbeb[_0x12dd26(0x257)]((_0x64007,_0x36aa86)=>{const _0x7cbd6=_0x12dd26;if(_0x4a9fc8[_0xe0aad3]){const _0x473049=fns[_0x7cbd6(0x255)](_0x4a9fc8[_0xe0aad3][_0x7cbd6(0x183)],_0x7cbd6(0x149),new Date()),_0x4f9f4f=fns[_0x7cbd6(0x255)](_0x64007['date'],_0x7cbd6(0x149),new Date());if(fns[_0x7cbd6(0x182)](_0x473049,_0x4f9f4f)){let _0xc31016=0x0;_0x4a9fc8[_0xe0aad3][_0x7cbd6(0x262)]['forEach'](_0x2b6f75=>{const _0x33b383=_0x7cbd6;!_0x2248e9[_0x2b6f75['coin']]?_0x2248e9[_0x2b6f75[_0x33b383(0x212)]]=_0x2b6f75[_0x33b383(0x1a3)]:(_0xc31016=_0x2248e9[_0x2b6f75[_0x33b383(0x212)]],_0x2248e9[_0x2b6f75[_0x33b383(0x212)]]+=_0x2b6f75[_0x33b383(0x1a3)]);const _0x366300=_0x64007[_0x33b383(0x1ec)][_0x33b383(0x1c5)](_0x23d3a8=>_0x23d3a8[_0x33b383(0x212)]==_0x2b6f75['coin']);(!_0x366300||_0x366300[_0x33b383(0x1a3)]==0x0)&&(_0x4096d3+=(-_0x2b6f75[_0x33b383(0x1a3)]-_0xc31016)*_0x2b6f75[_0x33b383(0x146)]);}),_0xe0aad3++;}}_0x64007['coins'][_0x7cbd6(0x257)]((_0x84c8bd,_0x1b560b)=>{const _0x26afc9=_0x7cbd6;_0x2248e9[_0x84c8bd[_0x26afc9(0x212)]]&&(_0x84c8bd[_0x26afc9(0x222)]=_0x2248e9[_0x84c8bd[_0x26afc9(0x212)]]);}),_0x82e27b[_0x7cbd6(0x1b5)]({'date':_0x64007[_0x7cbd6(0x183)],'eur':_0x64007[_0x7cbd6(0x1f0)],'usd':_0x64007[_0x7cbd6(0x228)],'offset':_0x43bf9b[_0x36aa86],'netoffset':_0x4096d3,'coins':_0x64007[_0x7cbd6(0x1ec)]});});}return _0x82e27b;}function emitPerformance(_0x3cf505){const _0x5cd735=_0x56b865;_0x3cf505[_0x5cd735(0x260)]!==0x0?(proxyEmit(_0x5cd735(0x191),_0x3cf505),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x556317,_0xfd12b3){const _0x4ceffe=_0x56b865;let _0x460597=0x0,_0x3bf417=0x0,_0x1b00d4=0x0;_0x556317[_0x4ceffe(0x1ec)][_0x4ceffe(0x257)](_0x4709fa=>{const _0x302d13=_0x4ceffe;_0x460597+=_0x4709fa[_0x302d13(0x1a3)]*_0x4709fa[_0x302d13(0x146)];});_0xfd12b3&&(_0x460597+=_0x556317[_0x4ceffe(0x1c4)]);if(config[_0x4ceffe(0x170)]==='BTC'||config[_0x4ceffe(0x170)]==='ETH')_0x3bf417=_0x460597*_0x556317['eur'],_0x1b00d4=_0x460597*_0x556317[_0x4ceffe(0x228)];else{if(config[_0x4ceffe(0x170)]==='BUSD'||config['basecoin']===_0x4ceffe(0x248)||config['basecoin']==='USD')_0x3bf417=_0x460597*_0x556317['eur']/_0x556317['usd'],_0x1b00d4=_0x460597;else config[_0x4ceffe(0x170)]==='EUR'&&(_0x3bf417=_0x460597,_0x1b00d4=_0x460597*_0x556317[_0x4ceffe(0x228)]/_0x556317['eur']);}return[_0x460597,_0x3bf417,_0x1b00d4];}function getKPIs(_0x52495a,_0x5bf3a4=_0x56b865(0x152)){const _0x50d747=_0x56b865,_0x1016a5=config[_0x50d747(0x170)],_0x900a20=lastBalances,_0x444551=currentCoins,_0x1c29a6=getNormalizedPerformance(),_0x49b92d=_0x52495a===_0x50d747(0x170)?_0x1016a5:_0x52495a===_0x50d747(0x263)||_0x52495a===_0x50d747(0x1b4)?_0x5bf3a4:_0x50d747(0x134)+_0x1016a5,_0xfb3636=_0x52495a==='net-basecoin'?'Net\x20effect':_0x52495a===_0x50d747(0x1b4)?_0x50d747(0x1cb):_0x49b92d+_0x50d747(0x27e),_0x5c8afe=_0x52495a===_0x50d747(0x1e9)||_0x52495a===_0x50d747(0x1b4)?_0x50d747(0x1cb):_0x49b92d+'\x20change';let _0x579a54=0x0;_0x444551[_0x50d747(0x257)](_0x80dcdd=>{const _0x1c2693=_0x50d747;_0x579a54+=_0x80dcdd[_0x1c2693(0x1a3)]*_0x80dcdd[_0x1c2693(0x1ab)];});if(_0x52495a==='fiat'||_0x52495a===_0x50d747(0x1b4)){if(_0x1016a5===_0x50d747(0x290)||_0x1016a5===_0x50d747(0x205))_0x579a54=_0x579a54*(_0x5bf3a4===_0x50d747(0x152)?_0x900a20[_0x50d747(0x1f0)]:_0x900a20['usd']);else{if(_0x1016a5==='BUSD'||_0x1016a5===_0x50d747(0x248)||_0x1016a5==='USD')_0x579a54=_0x579a54*(_0x5bf3a4===_0x50d747(0x152)?_0x900a20[_0x50d747(0x1f0)]/_0x900a20[_0x50d747(0x228)]:0x1);else _0x1016a5===_0x50d747(0x152)&&(_0x579a54=_0x579a54*(_0x5bf3a4===_0x50d747(0x152)?0x1:_0x900a20[_0x50d747(0x228)]/_0x900a20[_0x50d747(0x1f0)]));}}let _0x303532;if(_0x579a54!==0x0){if(_0x52495a===_0x50d747(0x170))_0x303532=(_0x579a54/startingBalances[_0x50d747(0x170)]-0x1)*0x64;else{if(_0x5bf3a4==='EUR')_0x303532=(_0x579a54/startingBalances[_0x50d747(0x1f0)]-0x1)*0x64;else _0x303532=(_0x579a54/startingBalances[_0x50d747(0x228)]-0x1)*0x64;}let _0x4c1482=0x0;if(startingBalances[_0x50d747(0x1ec)])_0x444551[_0x50d747(0x257)](_0x25c7ef=>{const _0x38ceb0=_0x50d747;let _0x1156b5=startingBalances['coins'][_0x38ceb0(0x1c5)](_0x4a572a=>_0x4a572a[_0x38ceb0(0x212)]===_0x25c7ef[_0x38ceb0(0x212)]);if(_0x1156b5&&_0x1156b5[_0x38ceb0(0x212)]&&_0x25c7ef[_0x38ceb0(0x1a3)]!==0x0)_0x4c1482+=_0x1156b5[_0x38ceb0(0x1a3)]*_0x25c7ef[_0x38ceb0(0x1ab)];});let _0x59fcfa=0x0;if(_0x1c29a6[_0x50d747(0x260)]!==0x0){let _0x52e407=_0x1c29a6[_0x1c29a6[_0x50d747(0x260)]-0x1];_0x59fcfa=_0x52e407[_0x50d747(0x1ad)];}_0x4c1482-=_0x59fcfa;_0x52495a===_0x50d747(0x1e9)&&(_0x303532=(_0x579a54-_0x4c1482)/startingBalances['basecoin']*0x64,_0x579a54=_0x579a54-_0x4c1482);if(_0x52495a===_0x50d747(0x1b4)){let _0x45ff25=_0x5bf3a4===_0x50d747(0x152)?startingBalances['eur']:startingBalances['usd'];if(_0x1016a5==='BTC'||_0x1016a5===_0x50d747(0x205))_0x4c1482=_0x5bf3a4==='EUR'?_0x4c1482*_0x900a20[_0x50d747(0x1f0)]:_0x4c1482*_0x900a20[_0x50d747(0x228)];else{if(_0x1016a5===_0x50d747(0x14d)||_0x1016a5==='USDT'||_0x1016a5===_0x50d747(0x150))_0x4c1482=_0x5bf3a4===_0x50d747(0x152)?_0x4c1482*_0x900a20['eur']/_0x900a20[_0x50d747(0x228)]:_0x4c1482;else _0x1016a5==='EUR'&&(_0x4c1482=_0x5bf3a4===_0x50d747(0x152)?_0x4c1482:_0x4c1482*_0x900a20[_0x50d747(0x228)]/_0x900a20['eur']);}_0x303532=(_0x579a54-_0x4c1482)/_0x45ff25*0x64,_0x579a54=_0x579a54-_0x4c1482;}if(_0x303532){if(_0x303532<0x64)_0x303532=_0x303532[_0x50d747(0x22b)](0x2);else{if(_0x303532<0x3e8)_0x303532=_0x303532[_0x50d747(0x22b)](0x1);else _0x303532=_0x303532[_0x50d747(0x22b)](0x0);}}else _0x303532=Number('0')[_0x50d747(0x22b)](0x2);if(_0x579a54){if(Math['abs'](_0x579a54)<0.000001)_0x579a54=_0x579a54['toFixed'](0x2);else{if(Math['abs'](_0x579a54)<0.1)_0x579a54=_0x579a54[_0x50d747(0x22b)](0x6);else{if(Math[_0x50d747(0x178)](_0x579a54)<0x1)_0x579a54=_0x579a54[_0x50d747(0x22b)](0x5);else{if(Math[_0x50d747(0x178)](_0x579a54)<0xa)_0x579a54=_0x579a54['toFixed'](0x4);else{if(Math[_0x50d747(0x178)](_0x579a54)<0x64)_0x579a54=_0x579a54[_0x50d747(0x22b)](0x3);else{if(Math['abs'](_0x579a54)<0x3e8)_0x579a54=_0x579a54[_0x50d747(0x22b)](0x2);else _0x579a54=_0x579a54[_0x50d747(0x22b)](0x2);}}}}}}else _0x579a54=Number('0')['toFixed'](0x2);}else _0x303532=Number('0')['toFixed'](0x2);return{'value':_0x579a54,'change':_0x303532,'leftTxt':_0xfb3636,'rightTxt':_0x5c8afe};}async function getStartingBalances(_0x4c7dbb,_0x464565=!![]){const _0x55b524=_0x56b865;if(_0x4c7dbb['length']!==0x0){const [_0x462f38,_0x3e6aa4,_0x180b7a]=getPerf(_0x4c7dbb[0x0],!![]);let _0x2166a2=[];config['portfolio'][_0x55b524(0x257)](_0x348ce6=>{const _0x134beb=_0x55b524;let _0x206666=0x0,_0x5342e9;config[_0x134beb(0x181)][_0x134beb(0x257)](_0x51fc27=>{const _0x7e225a=_0x134beb;let _0x876e0=_0x51fc27[_0x7e225a(0x262)]['find'](_0x2d68ed=>_0x2d68ed['coin']==_0x348ce6[_0x7e225a(0x212)]);if(_0x876e0){_0x206666+=_0x876e0[_0x7e225a(0x1a3)];if(!_0x5342e9)_0x5342e9=_0x876e0[_0x7e225a(0x146)];}}),_0x2166a2[_0x134beb(0x1b5)]({'coin':_0x348ce6[_0x134beb(0x212)],'number':_0x206666,'initialprice':_0x5342e9});});const _0x33c4c1={'basecoin':_0x462f38,'eur':_0x3e6aa4,'usd':_0x180b7a,'coins':_0x2166a2};if(_0x464565)proxyEmit(_0x55b524(0x24d),_0x33c4c1);startingBalances=_0x33c4c1;}}function headlessMode(_0x447f20){const _0x539724=_0x56b865;let _0xb4f8d8=_0x447f20[_0x539724(0x225)],_0x16b6e0=_0x447f20[_0x539724(0x1ef)],_0x48635f=[];for(let _0x4a71de of _0xb4f8d8){if(_0x4a71de[_0x539724(0x212)]!=config['basecoin']){if(_0x4a71de[_0x539724(0x19e)]>=_0x16b6e0/0x64){if(_0x4a71de[_0x539724(0x20f)])_0x48635f[_0x539724(0x1b5)](_0x4a71de);}else{if(_0x4a71de[_0x539724(0x19e)]<=-_0x16b6e0/0x64){if(_0x4a71de[_0x539724(0x20f)])_0x48635f[_0x539724(0x1b5)](_0x4a71de);}}}}_0x48635f['length']>0x0&&placeOrder(_0x48635f);}function notifyBalance(_0x1e4361){const _0x3f0e6e=_0x56b865;let _0xa600ec=_0x1e4361[_0x3f0e6e(0x225)],_0xedf816=_0x1e4361[_0x3f0e6e(0x1ef)],_0x152dff=[];for(let _0x52243c of _0xa600ec){if(_0x52243c[_0x3f0e6e(0x212)]!=config['basecoin']){if(_0x52243c[_0x3f0e6e(0x19e)]>=_0xedf816/0x64){if(_0x52243c[_0x3f0e6e(0x20f)])_0x152dff['push'](_0x52243c);}else{if(_0x52243c[_0x3f0e6e(0x19e)]<=-_0xedf816/0x64){if(_0x52243c[_0x3f0e6e(0x20f)])_0x152dff[_0x3f0e6e(0x1b5)](_0x52243c);}}}}if(_0x152dff[_0x3f0e6e(0x260)]>0x0){let _0x403b66=_0x152dff[_0x3f0e6e(0x269)](_0x53149f=>_0x53149f['coin']);_0x403b66[_0x3f0e6e(0x1ba)]();let _0x2edc16=_0x403b66['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x3f0e6e(0x28e),_0x3f0e6e(0x190));lastCoinsToBalance=_0x2edc16;}}function symbolToCoin(_0x15d6d7){const _0xeb05f5=_0x56b865;let _0x1c7654;if(_0x15d6d7[_0xeb05f5(0x137)]('/'+config[_0xeb05f5(0x170)]))_0x1c7654=_0x15d6d7[_0xeb05f5(0x140)]('/'+config[_0xeb05f5(0x170)],'');if(_0x15d6d7[_0xeb05f5(0x137)](config[_0xeb05f5(0x170)]+'/'))_0x1c7654=_0x15d6d7['replace'](config['basecoin']+'/','');return _0x1c7654;}async function unlockOrders(){const _0xab32c8=_0x56b865;if(allOrdersPlaced&&lockOrders==ORDERS[_0xab32c8(0x294)]){logger[_0xab32c8(0x28a)](_0xab32c8(0x18f)),lockOrders=ORDERS[_0xab32c8(0x271)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x553673=await getCoins();[currentCoins,currentCoinsAll]=_0x553673,validateOrdersState=_0xab32c8(0x222),persistOpenOrders([]),lockOrders=ORDERS[_0xab32c8(0x223)],logger[_0xab32c8(0x28a)](_0xab32c8(0x282));}}async function validateOrders(_0x332c9a){const _0x3cd43f=_0x56b865;if(_0x332c9a)validateOrdersState=_0x332c9a;logger[_0x3cd43f(0x28a)](_0x3cd43f(0x1e4)+validateOrdersState+_0x3cd43f(0x29a)+(lockOrders==0x1?_0x3cd43f(0x130):lockOrders==0x2?_0x3cd43f(0x1d9):_0x3cd43f(0x174)));let _0x5c2a06=[],_0x440268=config[_0x3cd43f(0x171)]==_0x3cd43f(0x29d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3cd43f(0x28f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x3cd43f(0x28a)](_0x3cd43f(0x295)+validateOrdersState),lastOrders[_0x3cd43f(0x257)](_0x4ad21f=>{const _0x4232b1=_0x3cd43f;let _0x29f160=![];_0x4ad21f['filled']>0x0&&(_0x29f160=!![]),_0x5c2a06['push'](_0x29f160),_0x29f160&&config['ordertype']!=_0x4232b1(0x29d)&&logHistory(_0x4232b1(0x192),'Order\x20filled:\x20'+_0x4ad21f[_0x4232b1(0x1b2)]+'\x20'+_0x4ad21f['side']+'\x20#'+formatResult(_0x4ad21f[_0x4232b1(0x1ca)],0x8)+'\x20@'+formatResult(_0x4ad21f[_0x4232b1(0x146)],0x8));}),_0x5c2a06[_0x3cd43f(0x257)]((_0x213385,_0x379f5c)=>{const _0x2a9e66=_0x3cd43f;if(_0x213385)lastOrders[_0x2a9e66(0x179)](_0x379f5c,0x1);}),persistOpenOrders(lastOrders);const _0x5d3a85=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x3cd43f(0x2a6);if(validateOrdersState==_0x3cd43f(0x222)){validateOrdersState=_0x3cd43f(0x2a2);if(_0x5c2a06[_0x3cd43f(0x137)](![])){if(config[_0x3cd43f(0x171)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5c2a06[_0x3cd43f(0x137)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x3cd43f(0x29d)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x5c2a06['includes'](![])&&(config[_0x3cd43f(0x171)]==_0x3cd43f(0x29d)?logHistory('success',_0x3cd43f(0x1a2)+Math['round'](_0x440268*validateOrderInterval/0xea60)+_0x3cd43f(0x25b)+_0x5d3a85):(await cancelOrders(),logHistory(_0x3cd43f(0x1e2),_0x3cd43f(0x189)+Math[_0x3cd43f(0x1c2)](_0x440268*validateOrderInterval/0xea60)+_0x3cd43f(0x25b)+_0x5d3a85))),await unlockOrders();else{if(validateOrdersState==_0x3cd43f(0x1ce)){if(config[_0x3cd43f(0x171)]!='market')logHistory('success',_0x3cd43f(0x199)+_0x5d3a85);await unlockOrders();}}}}}async function cancelOrders(){const _0x475fc9=_0x56b865;lastOrders[_0x475fc9(0x257)](async _0x254a24=>{const _0x438ca0=_0x475fc9;try{const _0x251ba8=await exchange['cancelOrder'](_0x254a24['orderId'],_0x254a24[_0x438ca0(0x1b2)]);}catch(_0x33ae6b){if(_0x33ae6b[_0x438ca0(0x159)]()[_0x438ca0(0x137)]('OrderNotFound')){}else await handleError(_0x33ae6b,_0x438ca0(0x1de));}});}async function initCoinResults(_0x189100){const _0xd69f5d=_0x56b865;_0x189100?logger[_0xd69f5d(0x28a)](_0xd69f5d(0x23c)+_0x189100):logger['debug']('Initializing\x20coin\x20results'),config[_0xd69f5d(0x225)][_0xd69f5d(0x257)](_0x562cf3=>{const _0x2eee2b=_0xd69f5d;if(!_0x562cf3[_0x2eee2b(0x17d)]&&_0x562cf3[_0x2eee2b(0x212)]!=config[_0x2eee2b(0x170)]){const _0x296033=currentCoins[_0x2eee2b(0x1c5)](_0xa2eba1=>_0xa2eba1[_0x2eee2b(0x212)]==_0x562cf3[_0x2eee2b(0x212)]),_0x5e76c9=global[_0x2eee2b(0x145)][noslash(_0x562cf3['symbol'])];let _0x4a99e9=_0x296033?_0x296033[_0x2eee2b(0x1a3)]:null,_0xe1bca1=_0x562cf3[_0x2eee2b(0x1f8)]?0x1/_0x5e76c9:_0x5e76c9,_0x528488;config['liquidity'][_0x2eee2b(0x257)](_0x4f1b0b=>{const _0x2dcf2f=_0x2eee2b;!_0x528488&&(_0x528488=_0x4f1b0b['changes']['find'](_0x5aa7af=>_0x5aa7af[_0x2dcf2f(0x212)]==_0x562cf3[_0x2dcf2f(0x212)]),_0x528488&&(_0x4a99e9=_0x528488[_0x2dcf2f(0x1a3)],_0xe1bca1=_0x528488[_0x2dcf2f(0x146)]));});let _0xe8e19a=dbCoinResults['get'](_0x2eee2b(0x1ec))[_0x2eee2b(0x1c5)]({'coin':_0x562cf3[_0x2eee2b(0x212)]})['value']();if(!_0xe8e19a){const _0x1a9ec5={'coin':_0x562cf3[_0x2eee2b(0x212)],'number':_0x4a99e9,'breakeven':_0xe1bca1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x2eee2b(0x1ec))[_0x2eee2b(0x1b5)](_0x1a9ec5)[_0x2eee2b(0x1f1)]();}else{if(_0x189100&&_0x562cf3[_0x2eee2b(0x212)]==_0x189100){const _0x41c190={'coin':_0x562cf3['coin'],'number':_0x4a99e9,'breakeven':_0xe1bca1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2eee2b(0x26a)](_0x2eee2b(0x1ec))[_0x2eee2b(0x1c5)]({'coin':_0x562cf3['coin']})[_0x2eee2b(0x1e8)](_0x41c190)[_0x2eee2b(0x1f1)]();}}}});}async function updateCoinResults(_0x47f705,_0x57406a=![]){const _0x432e32=_0x56b865;let _0x1364c6,_0x1b7e22,_0x37ab17,_0x257562,_0x41ffe7,_0x379ec0,_0x2ffb64=dbCoinResults['get'](_0x432e32(0x1ec))['find']({'coin':_0x47f705[_0x432e32(0x212)]})['value'](),_0x38c9be=![];Object['entries'](_0x2ffb64)[_0x432e32(0x257)](([_0x56660a,_0x2dab01])=>{if(_0x2dab01==null)_0x38c9be=!![];});(!_0x2ffb64||_0x38c9be)&&(await initCoinResults(_0x47f705[_0x432e32(0x212)]),_0x2ffb64=dbCoinResults[_0x432e32(0x26a)](_0x432e32(0x1ec))[_0x432e32(0x1c5)]({'coin':_0x47f705[_0x432e32(0x212)]})['value']());_0x47f705[_0x432e32(0x1f8)]&&(_0x379ec0={'filled':_0x47f705[_0x432e32(0x1ca)]*_0x47f705[_0x432e32(0x146)],'amount':_0x47f705[_0x432e32(0x1ca)]*_0x47f705[_0x432e32(0x146)],'side':_0x47f705['side']==_0x432e32(0x1fe)?_0x432e32(0x210):_0x432e32(0x1fe),'price':0x1/_0x47f705[_0x432e32(0x146)]},_0x47f705={..._0x47f705,..._0x379ec0});_0x57406a?_0x1b7e22=_0x47f705[_0x432e32(0x196)]==_0x432e32(0x210)?_0x2ffb64[_0x432e32(0x1a3)]+_0x47f705[_0x432e32(0x1ca)]:_0x2ffb64['number']-_0x47f705[_0x432e32(0x1ca)]:_0x1b7e22=await getCoinNumber(_0x47f705[_0x432e32(0x212)]);if(_0x47f705[_0x432e32(0x209)]&&_0x47f705[_0x432e32(0x209)]['currency']==config[_0x432e32(0x170)])_0x1364c6=_0x47f705[_0x432e32(0x209)]['cost'];else{if(_0x47f705['fee']&&_0x47f705[_0x432e32(0x209)][_0x432e32(0x202)]==_0x432e32(0x213)&&!_0x57406a)_0x1364c6=_0x47f705[_0x432e32(0x209)][_0x432e32(0x1b0)]*global[_0x432e32(0x145)][_0x432e32(0x213)+config[_0x432e32(0x170)]];else _0x1364c6=defaultFee*_0x47f705[_0x432e32(0x1ca)]*_0x47f705[_0x432e32(0x146)];}_0x47f705[_0x432e32(0x196)]==_0x432e32(0x210)?(_0x37ab17=_0x1b7e22!=0x0?(_0x2ffb64[_0x432e32(0x1d7)]*_0x2ffb64[_0x432e32(0x1a3)]+_0x47f705[_0x432e32(0x146)]*(_0x1b7e22-_0x2ffb64[_0x432e32(0x1a3)])+_0x1364c6)/_0x1b7e22:0x0,_0x257562=_0x2ffb64[_0x432e32(0x158)]):(_0x37ab17=_0x1b7e22!=0x0?(_0x2ffb64[_0x432e32(0x1d7)]*_0x2ffb64[_0x432e32(0x1a3)]-_0x47f705['price']*(_0x2ffb64['number']-_0x1b7e22)+_0x1364c6)/_0x1b7e22:0x0,_0x257562=_0x2ffb64['realized']+(_0x47f705[_0x432e32(0x146)]-_0x2ffb64[_0x432e32(0x1d7)])*_0x47f705[_0x432e32(0x1ca)]);_0x41ffe7=(_0x47f705['price']-_0x37ab17-_0x1364c6/_0x47f705[_0x432e32(0x1ca)])*_0x1b7e22;let _0x10be09={'coin':_0x47f705[_0x432e32(0x212)],'number':_0x1b7e22,'breakeven':formatResult(_0x37ab17,0x8),'realized':formatResult(_0x257562,0x8),'unrealized':formatResult(_0x41ffe7,0x8),'fees':formatResult(_0x2ffb64[_0x432e32(0x19b)]+_0x1364c6,0x8),'sells':_0x47f705[_0x432e32(0x196)]==_0x432e32(0x1fe)?_0x2ffb64[_0x432e32(0x299)]+0x1:_0x2ffb64[_0x432e32(0x299)],'buys':_0x47f705[_0x432e32(0x196)]==_0x432e32(0x210)?_0x2ffb64[_0x432e32(0x1e1)]+0x1:_0x2ffb64[_0x432e32(0x1e1)]};dbCoinResults[_0x432e32(0x26a)]('coins')[_0x432e32(0x1c5)]({'coin':_0x47f705[_0x432e32(0x212)]})[_0x432e32(0x1e8)](_0x10be09)[_0x432e32(0x1f1)]();if(!_0x57406a){if(_0x47f705[_0x432e32(0x209)]&&_0x47f705[_0x432e32(0x209)][_0x432e32(0x202)]=='BNB'){const _0x4723ea=currentCoins[_0x432e32(0x1c5)](_0x5a55b6=>_0x5a55b6[_0x432e32(0x212)]==_0x432e32(0x213));if(_0x4723ea){let _0x554b04=dbCoinResults[_0x432e32(0x26a)](_0x432e32(0x1ec))[_0x432e32(0x1c5)]({'coin':_0x432e32(0x213)})[_0x432e32(0x1f5)]();_0x10be09={..._0x554b04,'number':_0x4723ea[_0x432e32(0x1a3)]},dbCoinResults[_0x432e32(0x26a)]('coins')[_0x432e32(0x1c5)]({'coin':_0x432e32(0x213)})[_0x432e32(0x1e8)](_0x10be09)[_0x432e32(0x1f1)]();}}}}async function placeOrder(_0x3bd0c0){const _0x119ed6=_0x56b865,_0x3da167=config[_0x119ed6(0x171)]=='market'?_0x119ed6(0x29d):_0x119ed6(0x1ed);if(lockOrders==ORDERS[_0x119ed6(0x223)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x5e721b=![];lastOrders=[];for(const _0x479ae3 of _0x3bd0c0){let _0x356b0b,_0x1fa326,_0x4ce5e2,_0x32e5aa,_0x2f8546,_0x2beb2c=_0x479ae3[_0x119ed6(0x1b2)];try{const _0xab6f83=await exchange['fetchTicker'](_0x2beb2c);_0x356b0b=_0x479ae3[_0x119ed6(0x1f8)]?0x1/_0x479ae3[_0x119ed6(0x1ab)]:_0x479ae3['last'],_0x1fa326=_0xab6f83['bid'],_0x4ce5e2=_0xab6f83['ask'];_0x479ae3['reverse']?(_0x32e5aa=_0x479ae3[_0x119ed6(0x196)]==_0x119ed6(0x210)?'sell':_0x119ed6(0x210),_0x2f8546=Math[_0x119ed6(0x178)](_0x479ae3[_0x119ed6(0x151)])/_0x356b0b):(_0x32e5aa=_0x479ae3[_0x119ed6(0x196)],_0x2f8546=Math['abs'](_0x479ae3[_0x119ed6(0x151)]));_0x3da167==_0x119ed6(0x1ed)&&(config[_0x119ed6(0x171)]=='limit-high'&&(_0x356b0b=_0x32e5aa==_0x119ed6(0x210)?_0x1fa326:_0x4ce5e2),config[_0x119ed6(0x171)]==_0x119ed6(0x161)&&(_0x356b0b=_0x32e5aa==_0x119ed6(0x210)?_0x4ce5e2:_0x1fa326));_0x2f8546=formatResult(_0x2f8546,0x8),_0x356b0b=formatResult(_0x356b0b,0x8);const _0x36abd6=_0x32e5aa==_0x119ed6(0x1fe)?config[_0x119ed6(0x20c)]?String[_0x119ed6(0x12f)]('0x'+config[_0x119ed6(0x20c)])+'\x20':'':config[_0x119ed6(0x264)]?String[_0x119ed6(0x12f)]('0x'+config[_0x119ed6(0x264)])+'\x20':'',_0x5dfbd0=_0x3da167==_0x119ed6(0x29d)?_0x119ed6(0x19c):config[_0x119ed6(0x171)]=='limit-high'?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x17b716=(Math[_0x119ed6(0x12b)](Math[_0x119ed6(0x20e)]()*0x35a4e900)+0x5f5e100)[_0x119ed6(0x159)]();lastOrders[_0x119ed6(0x1b5)]({'customId':_0x17b716,'symbol':_0x2beb2c,'coin':_0x479ae3[_0x119ed6(0x212)],'amount':_0x2f8546,'price':_0x356b0b,'side':_0x32e5aa,'reverse':_0x479ae3[_0x119ed6(0x1f8)],'filled':0x0});if(_0x3da167==_0x119ed6(0x29d))logHistory(_0x119ed6(0x192),''+_0x36abd6+_0x5dfbd0+_0x119ed6(0x277)+_0x2beb2c+'\x20'+_0x32e5aa+'\x20#'+formatResult(_0x2f8546,0x8)+'\x20@'+formatResult(_0x356b0b,0x8));else logHistory(_0x119ed6(0x192),''+_0x36abd6+_0x5dfbd0+'\x20order:\x20'+_0x2beb2c+'\x20'+_0x32e5aa+'\x20#'+formatResult(_0x2f8546,0x8)+'\x20@'+formatResult(_0x356b0b,0x8));const _0x13ac18=await exchange[_0x119ed6(0x232)](_0x2beb2c,_0x3da167,_0x32e5aa,_0x2f8546,_0x356b0b,{'clientOrderId':_0x17b716}),_0x3d9fe1=lastOrders[_0x119ed6(0x260)]-0x1;if(_0x3d9fe1>=0x0&&lastOrders[_0x3d9fe1][_0x119ed6(0x1ee)]==_0x17b716){lastOrders[_0x3d9fe1][_0x119ed6(0x219)]=_0x13ac18['id'];if(_0x13ac18['amount'])lastOrders[_0x3d9fe1]['amount']=_0x13ac18['amount'];if(_0x13ac18[_0x119ed6(0x146)])lastOrders[_0x3d9fe1][_0x119ed6(0x146)]=_0x13ac18[_0x119ed6(0x146)];lastOrders[_0x3d9fe1][_0x119ed6(0x209)]=_0x13ac18['fee'];}if(config[_0x119ed6(0x296)]!=0x0){let _0x5c1554=null;if(cooldownTracker[_0x119ed6(0x260)]==config[_0x119ed6(0x296)]-0x1)_0x5c1554=cooldownTracker[_0x119ed6(0x143)]();const _0x46a151=getTimeStamp();cooldownTracker[_0x119ed6(0x1b5)](_0x46a151);if(_0x5c1554){const _0x28fde3=fns[_0x119ed6(0x1fa)](new Date(_0x46a151),new Date(_0x5c1554));if(_0x28fde3<cooldownInterval){logHistory(_0x119ed6(0x29c),'Executed\x20'+config['cooldown']+_0x119ed6(0x1c8)+cooldownInterval/0x3c+_0x119ed6(0x126)+cooldownPeriod/(0xe10*0x3e8)+_0x119ed6(0x280)),coolingDown=!![];break;}}}}catch(_0x4d5e47){if(_0x4d5e47[_0x119ed6(0x159)]()[_0x119ed6(0x137)](_0x119ed6(0x154)))lastOrders=lastOrders['filter'](_0x20fdcd=>_0x20fdcd['symbol']!=_0x2beb2c),logHistory(_0x119ed6(0x29c),_0x119ed6(0x163)+_0x2beb2c),_0x5e721b=!![];else{if(_0x4d5e47[_0x119ed6(0x159)]()['includes'](_0x119ed6(0x241)))lastOrders=lastOrders[_0x119ed6(0x2a4)](_0x49e4c9=>_0x49e4c9['symbol']!=_0x2beb2c),logHistory(_0x119ed6(0x29c),_0x119ed6(0x160)+_0x2beb2c),_0x5e721b=!![];else{if(_0x4d5e47['toString']()[_0x119ed6(0x137)](_0x119ed6(0x1f2)))lastOrders=lastOrders['filter'](_0x731f3c=>_0x731f3c['symbol']!=_0x2beb2c),logHistory(_0x119ed6(0x29c),_0x119ed6(0x24e)+_0x2beb2c),_0x5e721b=!![];else _0x4d5e47[_0x119ed6(0x159)]()['includes'](_0x119ed6(0x23b))?(lastOrders=lastOrders[_0x119ed6(0x2a4)](_0x20cb58=>_0x20cb58['symbol']!=_0x2beb2c),logHistory(_0x119ed6(0x29c),_0x119ed6(0x163)+_0x2beb2c),_0x5e721b=!![]):(lastOrders=lastOrders[_0x119ed6(0x2a4)](_0x83cead=>_0x83cead[_0x119ed6(0x1b2)]!=_0x2beb2c),await handleError(_0x4d5e47,_0x119ed6(0x176),_0x2beb2c));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x119ed6(0x260)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x16edc3=config[_0x119ed6(0x171)]==_0x119ed6(0x29d)?validateOrderTimeout*0x3c*0x3e8:config[_0x119ed6(0x28f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x16edc3);}else unlockOrders();_0x5e721b&&config[_0x119ed6(0x2a0)]&&await pauseBot(_0x119ed6(0x164)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x119ed6(0x1e2),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x119ed6(0x29c),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x119ed6(0x223)]&&(!config['headless']&&(config[_0x119ed6(0x171)]==_0x119ed6(0x29d)?logHistory(_0x119ed6(0x29c),_0x119ed6(0x13e)):logHistory(_0x119ed6(0x29c),_0x119ed6(0x1b8))));}}function persistOpenOrders(_0xa34fa1){const _0x4426ae=_0x56b865,_0x2eec0e={...config,'openOrders':_0xa34fa1};let _0x37eeaa=dbConfig[_0x4426ae(0x26a)](_0x4426ae(0x1c1))['find']({'botID':botID})[_0x4426ae(0x1f5)]();_0x37eeaa&&dbConfig[_0x4426ae(0x26a)](_0x4426ae(0x1c1))[_0x4426ae(0x1c5)]({'botID':botID})[_0x4426ae(0x1e8)](_0x2eec0e)[_0x4426ae(0x1f1)]();}function restoreOrders(){const _0x2ab9d3=_0x56b865;let _0x35fc9d;config['openOrders']&&allOpenOrders[_0x2ab9d3(0x257)](_0x985f01=>{const _0xc04e76=_0x2ab9d3,_0x1d8b24=config[_0xc04e76(0x275)][_0xc04e76(0x1c5)](_0x35bfd4=>_0x35bfd4[_0xc04e76(0x219)]==_0x985f01['id']);_0x1d8b24&&(lastOrders[_0xc04e76(0x1b5)](_0x1d8b24),_0x35fc9d=_0x985f01[_0xc04e76(0x1a4)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x2ab9d3(0x294)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x29a277=new Date()[_0x2ab9d3(0x22a)](),_0x181aa5=config[_0x2ab9d3(0x171)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2ab9d3(0x28f)]*0x3c*0x3e8;if(_0x35fc9d+_0x181aa5>_0x29a277){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x13a3d4=_0x2ab9d3;validateOrders(_0x13a3d4(0x14b));},_0x35fc9d+_0x181aa5-_0x29a277);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x361d93=_0x56b865;if(!coinsLoaded){process[_0x361d93(0x177)]({'telegrammsg':_0x361d93(0x17c)},_0x238132=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x48bf60='';if(config[_0x361d93(0x28d)])_0x48bf60=_0x361d93(0x13b)+config[_0x361d93(0x218)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x48bf60=_0x361d93(0x297)+botID+_0x361d93(0x184);const _0x443ff3=getKPIs(_0x361d93(0x170)),_0x164196=getKPIs(_0x361d93(0x263),config[_0x361d93(0x263)]),_0xca6d8=getKPIs('net-basecoin'),_0x25844a=getKPIs(_0x361d93(0x1b4),config[_0x361d93(0x263)]);_0x48bf60+=_0x361d93(0x168),_0x48bf60+=_0x443ff3['leftTxt']+'\x20:\x20'+_0x443ff3['value']+'\x0a',_0x48bf60+=_0x443ff3[_0x361d93(0x156)]+':\x20'+_0x443ff3[_0x361d93(0x1b6)]+'%\x0a',_0x48bf60+=_0x164196[_0x361d93(0x138)]+_0x361d93(0x20b)+_0x164196[_0x361d93(0x1f5)]+'\x0a',_0x48bf60+=_0x164196[_0x361d93(0x156)]+':\x20'+_0x164196[_0x361d93(0x1b6)]+'%\x0a',_0x48bf60+=_0xca6d8['leftTxt']+':\x20'+_0xca6d8[_0x361d93(0x1f5)]+'\x20('+config['basecoin']+')\x0a',_0x48bf60+=_0xca6d8['rightTxt']+':\x20'+_0xca6d8[_0x361d93(0x1b6)]+_0x361d93(0x24a)+config[_0x361d93(0x170)]+')\x0a',_0x48bf60+=_0x25844a[_0x361d93(0x138)]+':\x20'+_0x25844a['value']+'\x20('+config['fiat']+')\x0a',_0x48bf60+=_0x25844a[_0x361d93(0x156)]+':\x20'+_0x25844a[_0x361d93(0x1b6)]+_0x361d93(0x24a)+config[_0x361d93(0x263)]+')\x0a',_0x48bf60+=_0x361d93(0x281),process[_0x361d93(0x177)]({'telegrammsg':_0x48bf60},_0x31540d=>{});}async function sendPortfolioTelegram(){const _0x3f5956=_0x56b865;if(!coinsLoaded){process['send']({'telegrammsg':_0x3f5956(0x17c)},_0x3e62d8=>{});return;}let _0x262cbd='';if(config[_0x3f5956(0x28d)])_0x262cbd=_0x3f5956(0x13b)+config[_0x3f5956(0x218)]+_0x3f5956(0x27d);else _0x262cbd=_0x3f5956(0x297)+botID+_0x3f5956(0x27d);_0x262cbd+=_0x3f5956(0x168),_0x262cbd+='-------------------------------\x0a',_0x262cbd+=_0x3f5956(0x15c),_0x262cbd+=_0x3f5956(0x1fd),currentCoins[_0x3f5956(0x257)](_0x5db537=>{const _0xfefae0=_0x3f5956;_0x262cbd+=_0x5db537['coin'][_0xfefae0(0x16e)](0x7)+'|\x20'+formatPad(_0x5db537['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5db537[_0xfefae0(0x259)],0x2,0x6)+'|\x20'+formatPad(_0x5db537[_0xfefae0(0x19e)]*0x64,0x2,0x6)+'\x0a';}),_0x262cbd+='</pre>',process['send']({'telegrammsg':_0x262cbd},_0x435224=>{});}function formatPad(_0x3b68bb,_0x2c79b7,_0x308799){const _0x1da158=_0x56b865,_0x2d14c9=formatResultString(_0x3b68bb,_0x2c79b7);return _0x2d14c9?_0x2d14c9[_0x1da158(0x15d)](_0x308799):''[_0x1da158(0x15d)](_0x308799);}function logHistory(_0x41a8c1,_0x40fa20,_0x45cee9=''){const _0x54bef2=_0x56b865;let _0x40cbca={'time':getTimeStamp(),'type':_0x41a8c1,'event':_0x40fa20};dbLogs['get'](_0x54bef2(0x13c))['push'](_0x40cbca)['write']();if(_0x45cee9=='')_0x45cee9=_0x40fa20;proxyEmit(_0x54bef2(0x249),{'log':_0x40cbca,'summary':_0x45cee9}),process['send']({'telegram':{..._0x40cbca,'botname':config['botname'],'showname':config[_0x54bef2(0x28d)]}},_0x2e12a2=>{}),logger[_0x54bef2(0x289)](''+_0x40cbca[_0x54bef2(0x249)]);}function emitHistory(_0x5e91f1={}){const _0x3d08f7=_0x56b865;Object['keys'](_0x5e91f1)[_0x3d08f7(0x260)]==0x0&&(_0x5e91f1={'type':[_0x3d08f7(0x192),_0x3d08f7(0x249)],'event':'','page':0x1});if(_0x5e91f1[_0x3d08f7(0x261)]['includes'](_0x3d08f7(0x249)))_0x5e91f1[_0x3d08f7(0x261)][_0x3d08f7(0x179)](_0x5e91f1[_0x3d08f7(0x261)]['indexOf'](_0x3d08f7(0x249)),0x1,'error',_0x3d08f7(0x28e),_0x3d08f7(0x1e2));if(dbLogs['has'](_0x3d08f7(0x13c))[_0x3d08f7(0x1f5)]()){let _0x421a3f=dbLogs[_0x3d08f7(0x26a)]('logs')[_0x3d08f7(0x2a4)](_0x1fdb1a=>{const _0x3ead4e=_0x3d08f7;if(_0x5e91f1['type'][_0x3ead4e(0x260)]==0x0)return![];else return _0x5e91f1[_0x3ead4e(0x261)][_0x3ead4e(0x137)](_0x1fdb1a[_0x3ead4e(0x261)]);})['filter'](_0x428105=>{const _0x24f7bd=_0x3d08f7;if(_0x5e91f1['event']=='')return!![];else return _0x428105[_0x24f7bd(0x249)][_0x24f7bd(0x142)]()[_0x24f7bd(0x137)](_0x5e91f1[_0x24f7bd(0x249)]['toLowerCase']());})[_0x3d08f7(0x26c)]('time'),_0x2d10a7=_0x421a3f[_0x3d08f7(0x1f5)]()['length'];_0x421a3f=_0x421a3f[_0x3d08f7(0x1f8)]()[_0x3d08f7(0x1c7)]((_0x5e91f1[_0x3d08f7(0x203)]-0x1)*logPageSize,_0x5e91f1[_0x3d08f7(0x203)]*logPageSize-0x1)['reverse']()[_0x3d08f7(0x1f5)](),proxyEmit(_0x3d08f7(0x12d),{'logs':_0x421a3f,'total':_0x2d10a7});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x450f78){const _0x28ee35=_0x56b865;if(dbLogs[_0x28ee35(0x16b)]('logs')[_0x28ee35(0x1f5)]()){const _0x58e3d5=dbLogs[_0x28ee35(0x26a)](_0x28ee35(0x13c))['sortBy'](_0x28ee35(0x220))[_0x28ee35(0x2a4)](_0x288021=>{const _0x56f598=_0x28ee35;return _0x288021[_0x56f598(0x261)]=='order';})['value']();dbLogs[_0x28ee35(0x26a)](_0x28ee35(0x13c))['remove']()[_0x28ee35(0x1f1)](),dbLogs['get'](_0x28ee35(0x13c))['assign'](_0x58e3d5)[_0x28ee35(0x1f1)](),emitHistory(_0x450f78);}}async function pauseBot(_0x28c1a5=''){const _0x531c3c=_0x56b865,_0x335ac4=new Date()[_0x531c3c(0x22a)]();if(!lastErrorShown||_0x335ac4-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x335ac4;!lastBotPause?(lastBotPause=_0x335ac4,consecutivePauses=0x1):(_0x335ac4-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x531c3c(0x177)]({'stop':_0x531c3c(0x214)},_0x36eea5=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x531c3c(0x22a)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x28c1a5)_0x28c1a5+=_0x531c3c(0x1fc);logHistory(_0x531c3c(0x29c),_0x28c1a5+'Pausing\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0xd7650=_0x56b865;process['send']({'stop':_0xd7650(0x1f3)},_0x52c555=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2b6b6e,_0x2987cc){const _0x52b0e4=_0x56b865;if(_0x2b6b6e[_0x52b0e4(0x159)]()['includes'](_0x52b0e4(0x16a)))return logHistory(_0x52b0e4(0x29c),config[_0x52b0e4(0x18d)]+_0x52b0e4(0x29f)),![];else{if(_0x2b6b6e[_0x52b0e4(0x159)]()[_0x52b0e4(0x137)](_0x52b0e4(0x1e6)))return logHistory('error',config['exchange']+_0x52b0e4(0x13d)),![];else{if(_0x2b6b6e[_0x52b0e4(0x159)]()['includes']('AuthenticationError'))return logHistory(_0x52b0e4(0x29c),config[_0x52b0e4(0x18d)]+_0x52b0e4(0x27b)),logHistory('error',_0x52b0e4(0x1d6)),![];else await handleError(_0x2b6b6e,_0x2987cc);}}}async function handleError(_0x374dba,_0x13967c,_0x55e842=''){const _0x171d51=_0x56b865,_0x5e34f8=config['exchange']||_0x171d51(0x1b3);if(_0x374dba[_0x171d51(0x159)]()[_0x171d51(0x137)](_0x171d51(0x1b9)))await pauseBot(config[_0x171d51(0x18d)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x374dba['toString']()[_0x171d51(0x137)](_0x171d51(0x14e)))await pauseBot(config['exchange']+_0x171d51(0x1e7));else{if(_0x374dba[_0x171d51(0x159)]()['includes']('RequestTimeout'))await pauseBot(config[_0x171d51(0x18d)]+_0x171d51(0x144));else{if(_0x374dba['toString']()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006'))await pauseBot(config[_0x171d51(0x18d)]+'\x20closed\x20the\x20connection');else{if(_0x374dba[_0x171d51(0x159)]()[_0x171d51(0x137)](_0x171d51(0x21f)))logHistory('error',_0x13967c+_0x171d51(0x133)),logHistory(_0x171d51(0x29c),_0x171d51(0x1a9)),await killBot();else{if(_0x374dba['toString']()[_0x171d51(0x137)](_0x171d51(0x21d)))logHistory(_0x171d51(0x29c),_0x13967c+_0x171d51(0x24b)),logHistory(_0x171d51(0x29c),_0x171d51(0x1a9)),await killBot();else{if(_0x374dba[_0x171d51(0x159)]()['includes'](_0x171d51(0x16a)))logHistory('error',_0x13967c+_0x171d51(0x1fc)+config[_0x171d51(0x18d)]+_0x171d51(0x25a)),logHistory(_0x171d51(0x29c),_0x171d51(0x1a9)),await killBot();else{if(_0x374dba['toString']()[_0x171d51(0x137)](_0x171d51(0x1e6)))logHistory(_0x171d51(0x29c),_0x13967c+_0x171d51(0x1fc)+config[_0x171d51(0x18d)]+_0x171d51(0x180)),logHistory(_0x171d51(0x29c),_0x171d51(0x1a9)),await killBot();else{if(_0x374dba[_0x171d51(0x159)]()[_0x171d51(0x137)]('AuthenticationError'))logHistory(_0x171d51(0x29c),_0x13967c+_0x171d51(0x1fc)+config[_0x171d51(0x18d)]+_0x171d51(0x18e)),logHistory(_0x171d51(0x29c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x374dba[_0x171d51(0x159)]()[_0x171d51(0x137)](_0x171d51(0x24c))?logHistory(_0x171d51(0x29c),_0x13967c+_0x171d51(0x258)+_0x55e842):(logger[_0x171d51(0x289)](_0x13967c+_0x171d51(0x240),_0x374dba),await pauseBot(_0x171d51(0x267)));}}}}}}}}}function formatResult(_0x1aa251,_0x29f50c){return parseFloat(_0x1aa251['toFixed'](_0x29f50c));}function formatResultTruncate(_0xe91eb8,_0x474291){const _0x1a4109=_0x56b865;let _0x21d486=formatResultString(_0xe91eb8,0xa),_0x2a7695=_0x21d486[_0x1a4109(0x132)]('.');return _0x2a7695!=-0x1&&(_0x21d486=_0x21d486[_0x1a4109(0x1c7)](0x0,_0x2a7695+_0x474291+0x1)),Number(_0x21d486);}function formatResultString(_0x33ca2e,_0x13c9a7){const _0xf59108=_0x56b865;let _0x42f963;if(!(''+_0x33ca2e)[_0xf59108(0x137)]('e'))_0x42f963=+(Math[_0xf59108(0x1c2)](_0x33ca2e+'e+'+_0x13c9a7)+'e-'+_0x13c9a7);else{let _0x41c61d=(''+_0x33ca2e)[_0xf59108(0x243)]('e'),_0x34ff55='';+_0x41c61d[0x1]+_0x13c9a7>0x0&&(_0x34ff55='+'),_0x42f963=+(Math[_0xf59108(0x1c2)](+_0x41c61d[0x0]+'e'+_0x34ff55+(+_0x41c61d[0x1]+_0x13c9a7))+'e-'+_0x13c9a7);}return Number(_0x42f963)[_0xf59108(0x22b)](_0x13c9a7);}function getServerTime(){const _0x4364fc=_0x56b865,_0x3f6ff8=new Date();return _0x3f6ff8['getFullYear']()+'/'+(_0x3f6ff8[_0x4364fc(0x155)]()+0x1)[_0x4364fc(0x159)]()[_0x4364fc(0x15d)](0x2,'0')+'/'+_0x3f6ff8[_0x4364fc(0x12e)]()[_0x4364fc(0x159)]()['padStart'](0x2,'0')+'\x20'+_0x3f6ff8['getHours']()[_0x4364fc(0x159)]()[_0x4364fc(0x15d)](0x2,'0')+':'+_0x3f6ff8[_0x4364fc(0x250)]()['toString']()['padStart'](0x2,'0')+':'+_0x3f6ff8[_0x4364fc(0x26d)]()['toString']()[_0x4364fc(0x15d)](0x2,'0');}function getTimeStamp(){const _0x108a67=_0x56b865,_0x2c925a=shiftedTime();return _0x2c925a[_0x108a67(0x1b7)]()+'/'+(_0x2c925a['getMonth']()+0x1)[_0x108a67(0x159)]()[_0x108a67(0x15d)](0x2,'0')+'/'+_0x2c925a[_0x108a67(0x12e)]()[_0x108a67(0x159)]()['padStart'](0x2,'0')+'\x20'+_0x2c925a[_0x108a67(0x1cd)]()[_0x108a67(0x159)]()[_0x108a67(0x15d)](0x2,'0')+':'+_0x2c925a['getMinutes']()[_0x108a67(0x159)]()[_0x108a67(0x15d)](0x2,'0')+':'+_0x2c925a['getSeconds']()['toString']()[_0x108a67(0x15d)](0x2,'0');}function getDate(){const _0x599f1e=_0x56b865,_0x3a02b2=shiftedTime();return _0x3a02b2[_0x599f1e(0x1b7)]()+'/'+(_0x3a02b2['getMonth']()+0x1)[_0x599f1e(0x159)]()[_0x599f1e(0x15d)](0x2,'0')+'/'+_0x3a02b2['getDate']()['toString']()[_0x599f1e(0x15d)](0x2,'0');}function getHour(){const _0x4dce65=_0x56b865,_0x1d99b2=shiftedTime();return _0x1d99b2[_0x4dce65(0x1cd)]()[_0x4dce65(0x159)]()[_0x4dce65(0x15d)](0x2,'0');}function sleep(_0x23cf44){return new Promise(_0x21058f=>setTimeout(_0x21058f,_0x23cf44));}function shiftedTime(){const _0x45470f=_0x56b865,_0x1f193d=new Date();let _0x27949b=_0x1f193d;if(config&&config[_0x45470f(0x287)]!==0x0)_0x27949b=fns['add'](_0x1f193d,{'hours':config[_0x45470f(0x287)]});return _0x27949b;}function timer(_0x44058b){const _0x558f17=_0x56b865,_0x232c03=new Date();!lasttime?console[_0x558f17(0x188)](getTimeStamp()+_0x558f17(0x293),_0x44058b,_0x232c03):console[_0x558f17(0x188)](getTimeStamp()+':\x20timer\x20>',_0x44058b,(_0x232c03-lasttime)/0x3e8),lasttime=_0x232c03;}