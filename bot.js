const _0x5415c1=_0x3e54;(function(_0x263ae9,_0x9e2c2e){const _0x5441ca=_0x3e54,_0x4e9225=_0x263ae9();while(!![]){try{const _0x6eff94=parseInt(_0x5441ca(0x25f))/0x1+-parseInt(_0x5441ca(0x2bc))/0x2+-parseInt(_0x5441ca(0x23f))/0x3+-parseInt(_0x5441ca(0x1a4))/0x4*(parseInt(_0x5441ca(0x1ae))/0x5)+parseInt(_0x5441ca(0x1c3))/0x6+-parseInt(_0x5441ca(0x1d0))/0x7*(-parseInt(_0x5441ca(0x1c6))/0x8)+-parseInt(_0x5441ca(0x183))/0x9*(parseInt(_0x5441ca(0x1b7))/0xa);if(_0x6eff94===_0x9e2c2e)break;else _0x4e9225['push'](_0x4e9225['shift']());}catch(_0xbb828e){_0x4e9225['push'](_0x4e9225['shift']());}}}(_0x319f,0x78683));const _0x3e11b2=function(){let _0x22d19a=!![];return function(_0x445c55,_0x478250){const _0x1052aa=_0x22d19a?function(){const _0x3a6c1e=_0x3e54;if(_0x478250){const _0x4bd7c9=_0x478250[_0x3a6c1e(0x1f1)](_0x445c55,arguments);return _0x478250=null,_0x4bd7c9;}}:function(){};return _0x22d19a=![],_0x1052aa;};}(),_0x308d23=_0x3e11b2(this,function(){const _0x23f4a5=_0x3e54;return _0x308d23[_0x23f4a5(0x2d0)]()[_0x23f4a5(0x1bb)](_0x23f4a5(0x1b2))['toString']()[_0x23f4a5(0x19e)](_0x308d23)[_0x23f4a5(0x1bb)](_0x23f4a5(0x1b2));});_0x308d23();'use strict';const ccxt=require(_0x5415c1(0x2ed))['pro'],low=require(_0x5415c1(0x1df)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x5415c1(0x1ef))[_0x5415c1(0x235)],util=require(_0x5415c1(0x2e8)),argv=require('yargs/yargs')(process[_0x5415c1(0x19c)][_0x5415c1(0x272)](0x2))[_0x5415c1(0x19c)],path=require(_0x5415c1(0x2c7));let exchange;global[_0x5415c1(0x202)]={},global['change']={};const exceptions={'binance':[_0x5415c1(0x2d2),_0x5415c1(0x2d5),'XEM/BUSD',_0x5415c1(0x221),_0x5415c1(0x218)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x5415c1(0x199)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')['version'],botID=process[_0x5415c1(0x19c)][0x2]||_0x5415c1(0x2b2),pattern=/^[0-9]{3}$/;!pattern[_0x5415c1(0x17c)](botID)&&(console[_0x5415c1(0x210)]('Error:\x20Invalid\x20argument\x20'+botID+_0x5415c1(0x223)),killBot());const userID=process[_0x5415c1(0x19c)][0x3]||'',configpath=userID?_0x5415c1(0x1ff)+userID+'/':'./config/',logspath=userID?_0x5415c1(0x1e2)+userID+'/':'./logs/',loggerfile=fs[_0x5415c1(0x259)](logspath+_0x5415c1(0x23e),{'flags':'a'});!fs[_0x5415c1(0x1d8)](configpath)&&fs[_0x5415c1(0x1f3)](configpath);!fs[_0x5415c1(0x1d8)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x5415c1(0x25c)+botID+_0x5415c1(0x1ba),logfile=configpath+'bot-'+botID+_0x5415c1(0x28c),performancefile=configpath+_0x5415c1(0x25c)+botID+_0x5415c1(0x2ae),coinresultsfile=configpath+_0x5415c1(0x25c)+botID+_0x5415c1(0x20e),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x5415c1(0x27b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x5415c1(0x2c2)]({'logs':[],'version':serverversion})[_0x5415c1(0x25b)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5415c1(0x2c2)]({'data':[],'version':serverversion})[_0x5415c1(0x25b)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5415c1(0x2c2)]({'bot':[],'version':serverversion})[_0x5415c1(0x25b)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x5415c1(0x25b)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x5415c1(0x174),'rsaStandard':_0x5415c1(0x294)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x44d43d=>{const _0x381087=_0x5415c1;console[_0x381087(0x210)](_0x44d43d);},'simple':_0x1c134f=>{const _0x41ecdf=_0x5415c1;console[_0x41ecdf(0x210)](_0x1c134f),loggerfile['write'](util[_0x41ecdf(0x1c4)](_0x1c134f)+'\x0a');},'full':async(_0x280f75,_0x44738f='')=>{const _0x39db6f=_0x5415c1;let _0x9b74f5;if(config[_0x39db6f(0x241)])_0x9b74f5=getTimeStamp()+':\x20'+config[_0x39db6f(0x297)]+_0x39db6f(0x24a)+_0x280f75;else _0x9b74f5=getTimeStamp()+_0x39db6f(0x1e6)+botID+_0x39db6f(0x24a)+_0x280f75;console[_0x39db6f(0x210)](_0x9b74f5),loggerfile[_0x39db6f(0x25b)](util['format'](_0x9b74f5)+'\x0a'),_0x44738f&&(console[_0x39db6f(0x210)](_0x44738f),loggerfile['write'](util['format'](_0x44738f)+'\x0a'));},'debug':async(_0x570a1a,_0x4b1a6c='')=>{const _0x2c95b3=_0x5415c1;let _0x29fe8c;if(config[_0x2c95b3(0x241)])_0x29fe8c=getTimeStamp()+':\x20'+config[_0x2c95b3(0x297)]+_0x2c95b3(0x177)+_0x570a1a;else _0x29fe8c=getTimeStamp()+_0x2c95b3(0x1e6)+botID+'\x20>\x20[DEBUG]\x20'+_0x570a1a;if(debugging)console[_0x2c95b3(0x210)](_0x29fe8c);loggerfile['write'](util['format'](_0x29fe8c)+'\x0a');if(_0x4b1a6c){if(debugging)console[_0x2c95b3(0x210)](_0x4b1a6c);loggerfile['write'](util[_0x2c95b3(0x1c4)](_0x4b1a6c)+'\x0a');}}};process['on']('uncaughtException',function(_0x50c79f){logger['simple'](_0x50c79f);});settings[_0x5415c1(0x1dc)]!=config[_0x5415c1(0x1dc)]&&updateTimeshift(settings['timeshift']);settings[_0x5415c1(0x29f)]!=config[_0x5415c1(0x29f)]&&updateOnepagemode(settings[_0x5415c1(0x29f)]);process[_0x5415c1(0x1bd)]({'started':_0x5415c1(0x1f4)},_0x469fff=>{}),initializeProcessListeners();function proxyEmit(_0x2c31dc,_0x15e019=null){process['send']({'function':_0x2c31dc,'args':_0x15e019},_0xbc615a=>{});}function initializeProcessListeners(){process['on']('message',_0x33e8ca=>{const _0x37e8ec=_0x3e54;switch(Object[_0x37e8ec(0x2d6)](_0x33e8ca)[0x0]){case _0x37e8ec(0x1dc):_0x33e8ca[_0x37e8ec(0x1dc)]!=undefined&&(settings['timeshift']=_0x33e8ca[_0x37e8ec(0x1dc)],updateTimeshift(settings[_0x37e8ec(0x1dc)]));break;case _0x37e8ec(0x29f):_0x33e8ca[_0x37e8ec(0x29f)]!=undefined&&(settings['onepagemode']=_0x33e8ca[_0x37e8ec(0x29f)],updateOnepagemode(settings[_0x37e8ec(0x29f)]));break;case _0x37e8ec(0x180):_0x33e8ca['bots']!=undefined&&(bots=JSON['parse'](_0x33e8ca[_0x37e8ec(0x180)]),proxyEmit(_0x37e8ec(0x180),bots));break;case'function':switch(_0x33e8ca[_0x37e8ec(0x1cc)]){case _0x37e8ec(0x2cd):initclient();break;case _0x37e8ec(0x2bd):toggleBotMode();break;case _0x37e8ec(0x263):emitHistory(_0x33e8ca[_0x37e8ec(0x20f)]);break;case _0x37e8ec(0x298):deleteHistoryAlerts(_0x33e8ca[_0x37e8ec(0x20f)]);break;case _0x37e8ec(0x18d):getPortfolio(_0x33e8ca['args']);break;case _0x37e8ec(0x189):storeConfiguration(_0x33e8ca['args']);break;case _0x37e8ec(0x1b0):storeHeadless(_0x33e8ca[_0x37e8ec(0x20f)]);break;case _0x37e8ec(0x2d8):storeFiat(_0x33e8ca[_0x37e8ec(0x20f)]);break;case _0x37e8ec(0x2e6):resetHistory();break;case _0x37e8ec(0x1bf):getStartingBalances(getNormalizedPerformance());break;case _0x37e8ec(0x2df):placeOrder(_0x33e8ca[_0x37e8ec(0x20f)]);break;case'cancelLoading':cancelLoading();break;case _0x37e8ec(0x2a6):showConfig();break;case _0x37e8ec(0x282):sendMetricsTelegram();break;case _0x37e8ec(0x18f):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x1dcefb=null,_0x4a29b1=![]){const _0x533759=_0x5415c1;logger['debug'](_0x533759(0x240)+(_0x1dcefb&&_0x1dcefb[_0x533759(0x195)]>0x0?_0x533759(0x206)+_0x1dcefb[_0x533759(0x266)](','):_0x533759(0x190))+_0x533759(0x1b5)+(_0x4a29b1?'exchange\x20reloaded':_0x533759(0x20c)));if(pidBalances)clearTimeout(pidBalances);if(!_0x4a29b1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x533759(0x178)]!=''&&config[_0x533759(0x178)]!=_0x533759(0x28e)){if(_0x4a29b1){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1056b0){if(_0x1056b0[_0x533759(0x2d0)]()['includes'](_0x533759(0x265))){handleErrorNoStop(_0x1056b0,_0x533759(0x22e));return;}else{handleError(_0x1056b0,_0x533759(0x22e));return;}}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1dcefb);const _0x2609e4=await getCoins();[currentCoins,currentCoinsAll]=_0x2609e4,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x533759(0x195)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xc10817=_0x5415c1;exchangeStopped=!![],await exchange[_0xc10817(0x1a0)]();}async function reloadExchange(){const _0x581454=_0x5415c1;logger[_0x581454(0x271)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x581454(0x199)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x581454(0x296)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x515bd9=config[_0x5415c1(0x200)],_0x5f3bff=config[_0x5415c1(0x178)],_0x1faaaa=config[_0x5415c1(0x1ce)]){const _0x12e296=_0x5415c1;exchange&&await stopExchange();!supportedExchanges()[_0x12e296(0x222)](_0x515bd9)&&(logHistory(_0x12e296(0x2ab),_0x12e296(0x1a1)+_0x515bd9+'\x20exchange'),killBot());const _0x19b6ac=ccxt[_0x515bd9[_0x12e296(0x204)]()];exchange=new _0x19b6ac({'apiKey':_0x5f3bff,'secret':_0x1faaaa,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x2647cf=_0x5415c1;let _0x848c4e=config[_0x2647cf(0x23b)]==_0x2647cf(0x24d)?'ETH':_0x2647cf(0x2aa),_0x52f191=!allSymbols[_0x2647cf(0x222)](_0x848c4e+_0x2647cf(0x197))?_0x2647cf(0x229):_0x2647cf(0x2e5),_0x4c27c7=!allSymbols[_0x2647cf(0x222)](_0x848c4e+_0x2647cf(0x179))?_0x52f191:_0x2647cf(0x21c);stablecoins={'eur':{'coin':''+_0x848c4e+_0x4c27c7,'symbol':_0x848c4e+'/'+_0x4c27c7},'usd':{'coin':''+_0x848c4e+_0x52f191,'symbol':_0x848c4e+'/'+_0x52f191}};}async function initwsCcxt(_0x1e9ace){const _0x3276f8=_0x5415c1;_0x1e9ace==null&&(_0x1e9ace=[],config[_0x3276f8(0x2e0)]['forEach'](_0x201673=>{const _0x4b7348=_0x3276f8;if(!_0x201673['excluded']&&_0x201673[_0x4b7348(0x17d)]!=config[_0x4b7348(0x23b)])_0x1e9ace[_0x4b7348(0x2c5)](_0x201673[_0x4b7348(0x1ac)]);}));if(!_0x1e9ace[_0x3276f8(0x222)](stablecoins['eur'][_0x3276f8(0x1ac)]))_0x1e9ace[_0x3276f8(0x2c5)](stablecoins['eur'][_0x3276f8(0x1ac)]);if(!_0x1e9ace[_0x3276f8(0x222)](stablecoins[_0x3276f8(0x2be)][_0x3276f8(0x1ac)]))_0x1e9ace[_0x3276f8(0x2c5)](stablecoins['usd'][_0x3276f8(0x1ac)]);if(!_0x1e9ace[_0x3276f8(0x222)](_0x3276f8(0x2d7)+config[_0x3276f8(0x23b)]))_0x1e9ace[_0x3276f8(0x2c5)](_0x3276f8(0x2d7)+config[_0x3276f8(0x23b)]);loadCoins(_0x1e9ace);const _0x30570e=async _0xea9b10=>{const _0x1ea8cb=_0x3276f8,_0x11bf5d=await exchange['fetchTicker'](_0xea9b10);global[_0x1ea8cb(0x202)][noslash(_0x11bf5d['symbol'])]=_0x11bf5d[_0x1ea8cb(0x2a7)];while(!![]){if(!botPaused)try{const _0x4a2250=await exchange[_0x1ea8cb(0x2bf)](_0xea9b10);global[_0x1ea8cb(0x202)][noslash(_0x4a2250[0x0][_0x1ea8cb(0x1ac)])]=_0x4a2250[0x0][_0x1ea8cb(0x1f2)],await sleep(0x3e8);}catch(_0x2802e3){if(!exchangeStopped)await handleError(_0x2802e3,_0x1ea8cb(0x2bf),_0xea9b10);}else await sleep(0x3e8);}},_0x39bf08=async _0x3830b7=>{const _0x504d69=_0x3276f8;while(!![]){if(!botPaused)try{const _0xaeaa5f=await exchange['fetchTicker'](_0x3830b7);global['change'][_0xaeaa5f[_0x504d69(0x1ac)]]=_0xaeaa5f['percentage'],await sleep(0x3c*0x3e8);}catch(_0x2342e9){if(!exchangeStopped)await handleError(_0x2342e9,_0x504d69(0x277),_0x3830b7);}else await sleep(0x3e8);}},_0x47829f=async()=>{const _0x809bd0=_0x3276f8;while(!![]){if(!botPaused)try{const _0x460f04=await exchange['watchOrders']();_0x460f04[_0x809bd0(0x205)](_0x451aad=>{updateNumberCoinsCcxt(_0x451aad);});}catch(_0x2fef88){if(!exchangeStopped)await handleError(_0x2fef88,_0x809bd0(0x232));}else await sleep(0x3e8);}};_0x1e9ace[_0x3276f8(0x205)](async _0x402764=>{_0x30570e(_0x402764),_0x39bf08(_0x402764);}),!wsEventsSet&&(wsEventsSet=!![],_0x47829f(),watchTransactions());}async function watchTransactions(){const _0x4102c5=_0x5415c1;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4881d9=await getCoins(),[_0xbdc3c4,_0x29bee5]=_0x4881d9;let _0x52d259=[];currentCoins['forEach'](_0x2cce47=>{const _0x2aeca7=_0x3e54,_0x7bf4a7=_0xbdc3c4[_0x2aeca7(0x25e)](_0x517794=>_0x517794['coin']==_0x2cce47['coin']);_0x7bf4a7&&(_0x2cce47[_0x2aeca7(0x29b)]!=_0x7bf4a7[_0x2aeca7(0x29b)]&&_0x52d259[_0x2aeca7(0x2c5)]({'coin':_0x2cce47[_0x2aeca7(0x17d)],'symbol':_0x2cce47[_0x2aeca7(0x1ac)],'number':Number(formatResult(_0x7bf4a7[_0x2aeca7(0x29b)]-_0x2cce47[_0x2aeca7(0x29b)],0x8))}));});if(_0x52d259[_0x4102c5(0x195)]==0x1&&!blockTransactionDetection){logger[_0x4102c5(0x271)]('Fees\x20|\x20currency:\x20'+lastFees[_0x4102c5(0x275)]+_0x4102c5(0x1f9)+lastFees[_0x4102c5(0x29e)]);if(!lastFees['currency']||_0x52d259[0x0][_0x4102c5(0x17d)]!=lastFees[_0x4102c5(0x275)]||_0x52d259[0x0][_0x4102c5(0x29b)]>lastFees['highest']){let _0xe63852;if(_0x52d259[0x0]['coin']!=config[_0x4102c5(0x23b)]){let _0x4c5355=global[_0x4102c5(0x202)][noslash(_0x52d259[0x0][_0x4102c5(0x1ac)])];_0xe63852=_0x52d259[0x0][_0x4102c5(0x191)]?0x1/_0x4c5355:_0x4c5355;}else _0xe63852=0x1;_0x52d259[0x0]['price']=_0xe63852,delete _0x52d259[0x0][_0x4102c5(0x1ac)];let _0x46bfa9=[],_0x2b515b=[...config['liquidity']]||[],_0x81777f=config[_0x4102c5(0x2a1)];_0x2b515b[_0x4102c5(0x1b8)]((_0x2ea22e,_0x768d79)=>_0x2ea22e[_0x4102c5(0x287)]>_0x768d79['date']?-0x1:_0x768d79[_0x4102c5(0x287)]>_0x2ea22e['date']?0x1:0x0);const _0x31a21d=getDate();if(_0x2b515b[0x0]){const _0x46146a=fns[_0x4102c5(0x1e3)](_0x2b515b[0x0][_0x4102c5(0x287)],_0x4102c5(0x2ca),new Date()),_0x22fc41=fns[_0x4102c5(0x1e3)](_0x31a21d,'yyyy/MM/dd',new Date());if(fns[_0x4102c5(0x279)](_0x46146a,_0x22fc41)){_0x46bfa9=_0x2b515b[0x0][_0x4102c5(0x2d9)];const _0x4b501e=_0x46bfa9['find'](_0x477710=>_0x477710[_0x4102c5(0x17d)]==_0x52d259[0x0][_0x4102c5(0x17d)]);_0x4b501e?(_0x4b501e[_0x4102c5(0x29b)]+=_0x52d259[0x0][_0x4102c5(0x29b)],_0x4b501e['number']==0x0&&(_0x46bfa9=_0x46bfa9[_0x4102c5(0x2a2)](_0x122944=>{const _0x5801b3=_0x4102c5;return _0x122944[_0x5801b3(0x17d)]!=_0x52d259[0x0][_0x5801b3(0x17d)];}))):_0x46bfa9['push'](_0x52d259[0x0]);const _0x96aa9e=_0x81777f[_0x4102c5(0x25e)](_0x2863c4=>_0x2863c4['date']==_0x31a21d);_0x96aa9e[_0x4102c5(0x2d9)]=_0x46bfa9;}else _0x81777f[_0x4102c5(0x2c5)]({'date':_0x31a21d,'changes':[_0x52d259[0x0]]});}const _0x2f1c3b=_0x81777f[_0x4102c5(0x25e)](_0x3c880f=>_0x3c880f[_0x4102c5(0x287)]==_0x31a21d);if(_0x2f1c3b){let _0x183816=!![];_0x2f1c3b[_0x4102c5(0x2d9)]['forEach'](_0x354332=>{const _0x46cb77=_0x4102c5;if(_0x354332[_0x46cb77(0x29b)]!=0x0)_0x183816=![];}),_0x183816&&(_0x81777f=_0x81777f[_0x4102c5(0x2a2)](_0x4a5a8a=>{const _0x5504c8=_0x4102c5;return _0x4a5a8a[_0x5504c8(0x287)]!=_0x31a21d;}));}let _0x14d301=dbConfig[_0x4102c5(0x2dc)]('bot')[_0x4102c5(0x25e)]({'botID':botID})[_0x4102c5(0x184)]();_0x14d301&&(dbConfig['get'](_0x4102c5(0x276))[_0x4102c5(0x25e)]({'botID':botID})['assign']({'liquidity':_0x81777f})[_0x4102c5(0x25b)](),config[_0x4102c5(0x2a1)]=_0x81777f),logHistory(_0x4102c5(0x269),_0x4102c5(0x21d)+Math[_0x4102c5(0x252)](_0x52d259[0x0][_0x4102c5(0x29b)])+'\x20'+_0x52d259[0x0]['coin']+'\x20'+(_0x52d259[0x0][_0x4102c5(0x29b)]>0x0?_0x4102c5(0x182):_0x4102c5(0x1ea))+_0x4102c5(0x286)),proxyEmit(_0x4102c5(0x2cf),emittedConfiguration());}else logger[_0x4102c5(0x271)](_0x4102c5(0x2ac)+Math[_0x4102c5(0x252)](_0x52d259[0x0]['number'])+'\x20'+_0x52d259[0x0][_0x4102c5(0x17d)]+'\x20'+(_0x52d259[0x0][_0x4102c5(0x29b)]>0x0?_0x4102c5(0x182):'removed'));transactionDetected=!![],currentCoins=_0xbdc3c4,currentCoinsAll=_0x29bee5;}await sleep(watchTransactionsInterval);}catch(_0x4f31c2){if(!exchangeStopped)await handleError(_0x4f31c2,_0x4102c5(0x209));}else await sleep(0x3e8);}}async function loadSymbols(_0x5fa023=config['exchange'],_0x1d27f4=![]){const _0x55eee5=_0x5415c1;if(allSymbols&&!_0x1d27f4)return;try{markets=await exchange[_0x55eee5(0x2e1)](),allSymbols=exchange[_0x55eee5(0x2b3)]['filter'](_0x25195e=>{let _0x55a6f1=![];const _0x296f70=exceptions[_0x5fa023['toLowerCase']()]||[];return _0x296f70['forEach'](_0x52d348=>{const _0x31c503=_0x3e54;if(_0x25195e[_0x31c503(0x222)](_0x52d348))_0x55a6f1=!![];}),!_0x55a6f1;});}catch(_0x59f01c){throw _0x59f01c;}}async function initclient(){const _0x1d04c8=_0x5415c1;emitLoadingProgress(),proxyEmit(_0x1d04c8(0x2cf),emittedConfiguration()),proxyEmit(_0x1d04c8(0x26c),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1d04c8(0x233),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x356b78=getNormalizedPerformance();emitPerformance(_0x356b78),getStartingBalances(_0x356b78);}async function toggleBotMode(){const _0x1d5df0=_0x5415c1;let _0x81c7a6=dbConfig['get'](_0x1d5df0(0x276))[_0x1d5df0(0x25e)]({'botID':botID})[_0x1d5df0(0x184)]();if(_0x81c7a6){const _0x18dc9d=!_0x81c7a6['headless'];dbConfig[_0x1d5df0(0x2dc)]('bot')['find']({'botID':botID})[_0x1d5df0(0x22b)]({'headless':_0x18dc9d})[_0x1d5df0(0x25b)](),config['headless']=_0x18dc9d,proxyEmit(_0x1d5df0(0x2cf),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x268111=>{});}async function loadCoins(_0xed1141){const _0x13f39e=_0x5415c1;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x2161bf,_0x2fbcb6=0x0,_0x34fa65=0x0;_0xed1141[_0x13f39e(0x205)](_0x45eea7=>{const _0x2199b2=_0x13f39e;loading[_0x2199b2(0x1dd)][_0x2199b2(0x2c5)](_0x45eea7);}),loadingCanceled=![];let _0x70d68b=![];while(_0x2161bf!=_0xed1141[_0x13f39e(0x195)]){_0x2161bf=0x0,_0xed1141['forEach'](_0x14c1e5=>{const _0x51ea5f=_0x13f39e;if(global['ticker'][noslash(_0x14c1e5)]){loading[_0x51ea5f(0x1dd)]=loading[_0x51ea5f(0x1dd)][_0x51ea5f(0x2a2)](_0x581ebc=>_0x581ebc!=_0x14c1e5);if(!watchedSymbols[_0x51ea5f(0x222)](_0x14c1e5))watchedSymbols[_0x51ea5f(0x2c5)](_0x14c1e5);_0x2161bf++;}}),loading[_0x13f39e(0x20d)]=Math[_0x13f39e(0x2e2)](_0x2161bf/_0xed1141[_0x13f39e(0x195)]*0x64);loading[_0x13f39e(0x20d)]!=0x64&&(_0x34fa65>0x1e*0x5&&(loading[_0x13f39e(0x17b)]=!![],emitLoadingProgress()),_0x34fa65>0x78*0x5&&!_0x70d68b&&(loading[_0x13f39e(0x253)]=!![],emitLoadingProgress(),_0x70d68b=!![],logHistory(_0x13f39e(0x2ab),_0x13f39e(0x226)+loading['remainingSymbols'][_0x13f39e(0x266)](',\x20')+_0x13f39e(0x244)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x1b0df0=_0x13f39e;process[_0x1b0df0(0x1bd)]({'stop':'restart'},_0x4d6756=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x13f39e(0x253)]=!![],emitLoadingProgress();break;}else _0x2161bf!=_0x2fbcb6&&(_0x2fbcb6=_0x2161bf,emitLoadingProgress()),_0x34fa65++,await sleep(0xc8);}_0x2161bf==_0xed1141['length']&&(coinsLoaded=!![],process[_0x13f39e(0x1bd)]({'status':_0x13f39e(0x2a3),'live':_0x13f39e(0x1f4)},_0x40221d=>{}),_0x70d68b&&logHistory(_0x13f39e(0x269),_0x13f39e(0x1d1)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xefb82d=_0x5415c1;proxyEmit(_0xefb82d(0x2cf),{...emittedConfiguration(),'configstate':_0xefb82d(0x1c2)});}function emitLoadingProgress(){const _0x4016de=_0x5415c1;proxyEmit(_0x4016de(0x2ba),loading);}async function getFiat(){const _0x569df6=_0x5415c1;let _0x3938e7=global[_0x569df6(0x202)][stablecoins['eur'][_0x569df6(0x17d)]],_0xfb92d6=global['ticker'][stablecoins[_0x569df6(0x2be)][_0x569df6(0x17d)]];return{'eur':Number(_0x3938e7),'usd':Number(_0xfb92d6)};}function _0x319f(){const _0x219b64=['reverse','getDate','limit-high','performance','length','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','/USD','Transaction\x20detection\x20unblocked','UNLOCKED','has','map','argv','OrderNotFound','constructor','leftTxt','close','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','DDoSProtection','decrypt','4IqARtO','LOCKED','canceled','fetchOpenOrders','Manual\x20balancing\x20required','Invalid\x20quantity','net-basecoin','InvalidNonce','symbol','Cooldown\x20ended\x20-\x20balancing\x20resumed','658520GZVdMs','\x20order:\x20','storeHeadless','Order\x20amount\x20is\x20invalid:\x20','(((.+)+)+)+$','data','2\x20-\x20Orders\x20unlocked','\x20|\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','460uMRYXm','sort','getSeconds','-config.json','search','API-key\x20format\x20invalid','send','limit','getStartingBalances','Invalid\x20API\x20key\x20or\x20secret\x20entered','sortBy','loading-canceled','2146434BEGwum','format','event-history','7029160hrkLHO','Exchange','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getPortfolio(1)','\x20metrics:</b>\x20\x0a\x0a','final','function','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','apiSecret','timestamp','7WntFjw','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','secure','\x20:\x20','Net\x20effect','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','existsSync','openOrders','target','<b>','timeshift','remainingSymbols','eur','lowdb','\x20value','trade','./logs/','parse','getPortfolio(2)','event',':\x20Bot\x20','recent20','ordertype','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','removed','\x20|\x20lock\x20orders:\x20','time','getHours','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','hybrid-crypto-js','max','apply','price','mkdirSync','running','1\x20-\x20FILLED:\x20','order','fromCodePoint','Transaction\x20detection\x20blocked','\x20|\x20highest:\x20','sells','cancelOrder','substring','1\x20-\x20Handle\x20open\x20orders','getCoins()','./config/','exchange','splice','ticker','change','toLowerCase','forEach','additional\x20symbols\x20','toUpperCase','ongoing','watchTransactions','createOrder','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','exchange\x20not\x20reloaded','progress','-results.json','args','log','2.3.5','restart','side','split','status','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','sell','YOYOW/','RequestTimeout','bid','fetchClosedOrders','EUR','Portfolio\x20change\x20detected:\x20','\x20portfolio:</b>\x20\x0a\x0a','recreateCoinResults()','Pausing\x20for\x20','NANO/','includes',',\x20must\x20be\x20a\x203\x20digit\x20number','total','orderstatus','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20API\x20key\x20is\x20invalid','offset','USDT','open','assign','writeFile','getCoinNumber()','loadSymbols()','set','entries','\x20hour','watchOrders','balances','ExchangeNotAvailable','Crypt','Order(s)\x20not\x20validated\x20after\x20','add','emojibuy','customId','net-fiat','basecoin','netoffset','timer:','/output-000.log','1472856TAVDWJ','Reset\x20|\x20','showname','exec','findIndex','\x20-\x20bot\x20not\x20started','delta','filled','full','distribution','Resetting\x20bot\x20history','\x20>\x20','botID','Unfilled\x20order(s)\x20canceled\x20after\x20','ETH','threshold','market','balancing\x20resumes\x20when\x20cooldown\x20ends','InsufficientFunds','abs','cancel','toFixed','getMonth','startdate','differenceInSeconds','none','createWriteStream','average','write','bot-','logs','find','680005PUNqZP','recovery','string','No\x20more\x20open\x20orders\x20-\x20','emitHistory','1\x20-\x20Unlock\x20orders','AuthenticationError','join','\x20minutes','change24h','success','fee','\x20has\x20a\x2024h\x20drop\x20of\x20','exchanges','getTime','1\x20-\x20Validate\x20orders:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','precision','debug','slice','BUSD','%\x20(','currency','bot','fetchTickers','getPortfolio(0)','isEqual','realized','/backup/','buy','clientOrderId','settings','\x20orders\x20in\x20less\x20than\x20','getFullYear','\x20not\x20responding','sendMetricsTelegram','starting-balance-','3\x20-\x20handling\x20FILLED\x20order:\x20','configuration-stored','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','date','type','fetchTicker','unlinkSync','cooldown','-events.json','\x20closed\x20the\x20connection','***','rightTxt','startnumber','balancing\x20resumed','Order\x20filled:\x20','fetchBalance','RSA-OAEP','2\x20-\x20FILLED\x20known\x20order:\x20','Executing\x20exchange\x20reload','botname','deleteHistoryAlerts','headless','\x20minutes\x20-\x20','number','concat','indexOf','highest','onepagemode','cost','liquidity','filter','enabled','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','UNLOCKING','showConfig','last','initial','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','BTC','error','Fee\x20discount\x20refund\x20detected:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','-performance.json','getOpenOrders()','padStart','amount','001','symbols','<b>Bot\x20','fiat','min','stringify','\x20change','************','coin-loading-progress','<pre>','992880CwtCmI','toggleBotMode','usd','watchTrades','no\x20open\x20orders','breakeven','defaults','startprice','Binance','push','parseISO','path','valid','Limit\x20(high-margin)','yyyy/MM/dd','placeOrder()','privateKey','initclient','remove','configuration','toString','fees','DAI/','getMinutes','excluded','HOT/BTC','keys','BNB/','storeFiat','changes','0\x20-\x20EXECUTION:\x20','Bot\x20','get','datetime','coins','placeOrder','portfolio','loadMarkets','round','emojisell','replace','USD','resetHistory','ORDERS.UNLOCKED','util','orderId','limits','buys','closed','ccxt','sha256','version','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20>\x20[DEBUG]\x20','apiKey','/EUR','-------------------------------\x0a','timeout','test','coin','warning','message','bots','2\x20-\x20Handled\x20open\x20orders','added','59499hSdVFe','value','recreate','page','BNB','</pre>','storeConfiguration','\x20not\x20available','cloneDeep','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','getPortfolio','Market','sendPortfolioTelegram','no\x20additional\x20symbols'];_0x319f=function(){return _0x219b64;};return _0x319f();}function capitalize(_0xb1dca4){const _0x42bd3f=_0x5415c1;return _0xb1dca4[_0x42bd3f(0x1fc)](0x0,0x1)[_0x42bd3f(0x207)]()+_0xb1dca4[_0x42bd3f(0x1fc)](0x1);}function supportedExchanges(){const _0x3158fe=_0x5415c1,_0x2911bf=['ws','fetchTickers',_0x3158fe(0x289),'watchTrades',_0x3158fe(0x232),_0x3158fe(0x1fb),_0x3158fe(0x20a),_0x3158fe(0x1a7),_0x3158fe(0x21b),'fetchBalance'];let _0x14c3c0=[],_0x5aa91a=[],_0x583a9c=ccxt[_0x3158fe(0x26c)];_0x583a9c['forEach'](_0x52ff3e=>{const _0xdca613=_0x3158fe;try{const _0x105bcd=new ccxt[_0x52ff3e]();if(_0x105bcd[_0xdca613(0x19a)]['ws'])_0x5aa91a[_0xdca613(0x2c5)](_0x105bcd);}catch(_0x4cb616){}}),_0x5aa91a[_0x3158fe(0x205)](_0x878bcf=>{const _0x1d61e2=_0x3158fe;let _0x4685d9=0x0;_0x2911bf[_0x1d61e2(0x205)](_0x1e740b=>{const _0xb9be91=_0x1d61e2;_0x1e740b in _0x878bcf[_0xb9be91(0x19a)]&&_0x878bcf['has'][_0x1e740b]&&_0x4685d9++;}),_0x4685d9==_0x2911bf['length']&&_0x14c3c0[_0x1d61e2(0x2c5)](capitalize(_0x878bcf['id']));});let _0x31ecd6=[];return _0x583a9c[_0x3158fe(0x205)](_0x4b1a62=>{const _0x9b6f2a=_0x3158fe;_0x4b1a62=capitalize(_0x4b1a62);if(!_0x14c3c0['includes'](_0x4b1a62))_0x31ecd6[_0x9b6f2a(0x2c5)](_0x4b1a62);}),_0x14c3c0;}function setStartDatePerformance(){const _0x5451ef=_0x5415c1;if(config&&config[_0x5451ef(0x2a1)][0x0]['changes']['length']!=0x0){const _0x46669f=config[_0x5451ef(0x2a1)][0x0][_0x5451ef(0x2d9)];dbPerformance[_0x5451ef(0x2dc)](_0x5451ef(0x1b3))[_0x5451ef(0x25e)]({'date':config[_0x5451ef(0x256)]})[_0x5451ef(0x22b)]({'coins':_0x46669f})[_0x5451ef(0x25b)]();}}async function recreateCoinResults(){const _0x46653e=_0x5415c1;let _0x351294,_0x4b89e1=[];try{const _0x356d23=fns[_0x46653e(0x1c4)](fns[_0x46653e(0x2c6)](config['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0xb70c8f of currentCoins){if(_0xb70c8f['coin']!=config[_0x46653e(0x23b)]){let _0x2b25e4=0x0,_0x53e180,_0x45e739;_0x351294=await getAllEventOrders(_0xb70c8f[_0x46653e(0x1ac)]);if(_0x351294[_0x46653e(0x195)]>0x0)_0x351294[_0x46653e(0x205)](_0x26b578=>{const _0x116bc1=_0x46653e,_0x470744=_0xb70c8f[_0x116bc1(0x1ac)][_0x116bc1(0x222)](config[_0x116bc1(0x23b)]+'/');_0x4b89e1[_0x116bc1(0x2c5)]({'datetime':_0x26b578[_0x116bc1(0x2dd)],'coin':_0xb70c8f[_0x116bc1(0x17d)],'symbol':_0xb70c8f['symbol'],'side':_0x26b578['side'],'reverse':_0x470744,'amount':formatResult(_0x26b578[_0x116bc1(0x246)],0x8),'filled':formatResult(_0x26b578[_0x116bc1(0x246)],0x8),'price':formatResult(_0x26b578[_0x116bc1(0x1f2)],0x8)}),_0x2b25e4=_0x26b578[_0x116bc1(0x213)]==_0x116bc1(0x27c)?_0x2b25e4+_0x26b578[_0x116bc1(0x246)]:_0x2b25e4-_0x26b578[_0x116bc1(0x246)];if(!_0x45e739)_0x45e739=_0x26b578[_0x116bc1(0x1f2)];});_0x53e180=_0xb70c8f['number']-_0x2b25e4;let _0x522b78;config[_0x46653e(0x2a1)][_0x46653e(0x205)](_0x1b1dea=>{const _0x1a4776=_0x46653e;!_0x522b78&&(_0x522b78=_0x1b1dea['changes'][_0x1a4776(0x25e)](_0x5e5b80=>_0x5e5b80[_0x1a4776(0x17d)]==_0xb70c8f[_0x1a4776(0x17d)]),_0x522b78&&(_0x53e180=_0x522b78[_0x1a4776(0x29b)],_0x45e739=_0x522b78['price']));});let _0x1cab8d=dbCoinResults[_0x46653e(0x2dc)]('coins')['find']({'coin':_0xb70c8f[_0x46653e(0x17d)]})[_0x46653e(0x184)]();_0x1cab8d={'coin':_0xb70c8f[_0x46653e(0x17d)],'number':_0x53e180,'breakeven':_0x45e739,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x46653e(0x2dc)](_0x46653e(0x2de))[_0x46653e(0x25e)]({'coin':_0xb70c8f['coin']})[_0x46653e(0x22b)](_0x1cab8d)[_0x46653e(0x25b)]();}}_0x4b89e1['sort']((_0x41500f,_0x572016)=>_0x41500f[_0x46653e(0x2dd)]>_0x572016[_0x46653e(0x2dd)]?0x1:_0x572016[_0x46653e(0x2dd)]>_0x41500f['datetime']?-0x1:0x0);let _0x6f2367=0x0;for(let _0x57171e of _0x4b89e1){await updateCoinResults(_0x57171e,!![]);}}catch(_0x377da2){await handleError(_0x377da2,_0x46653e(0x21f));}}async function getAllEventOrders(_0x505eae){const _0x3ed03f=_0x5415c1;let _0x348172=[],_0x1f4131=dbLogs[_0x3ed03f(0x2dc)](_0x3ed03f(0x25d))['filter'](_0x198d69=>{const _0x3741a7=_0x3ed03f,_0x5126c9=_0x198d69[_0x3741a7(0x1e5)][_0x3741a7(0x204)]();return _0x5126c9[_0x3741a7(0x222)](_0x505eae[_0x3741a7(0x204)]())&&(_0x5126c9[_0x3741a7(0x222)](_0x3741a7(0x24f))&&_0x5126c9[_0x3741a7(0x222)](_0x3741a7(0x1f6))||_0x5126c9['includes'](_0x3741a7(0x246))&&_0x5126c9[_0x3741a7(0x222)](_0x3741a7(0x1f6)));})[_0x3ed03f(0x1c1)](_0x3ed03f(0x1ec))['value']();return _0x1f4131[_0x3ed03f(0x205)](_0x4f6f07=>{const _0x6be578=_0x3ed03f,_0x2a810c=_0x4f6f07[_0x6be578(0x1e5)]['includes'](_0x6be578(0x217))?_0x6be578(0x217):_0x6be578(0x27c),_0x55dc82=/#([0-9]|\.)+\s/i,_0x2e2029=Number(_0x55dc82[_0x6be578(0x242)](_0x4f6f07[_0x6be578(0x1e5)])[0x0]['slice'](0x1)),_0x4ecc8e=/@([0-9]|\.)+$/i,_0x34712b=Number(_0x4ecc8e['exec'](_0x4f6f07[_0x6be578(0x1e5)])[0x0][_0x6be578(0x272)](0x1));_0x348172[_0x6be578(0x2c5)]({'datetime':_0x4f6f07['time'],'coin':symbolToCoin(_0x505eae),'symbol':_0x505eae,'side':_0x2a810c,'amount':_0x2e2029,'filled':_0x2e2029,'price':_0x34712b});}),_0x348172;}async function getAllOrders(_0x54313a,_0x152f54){const _0x1a2b90=_0x5415c1;let _0x1635c9=[];while(_0x152f54<exchange['milliseconds']()){const _0x2ba51b=0x1f4,_0xb923bc=await exchange[_0x1a2b90(0x21b)](_0x54313a,_0x152f54,_0x2ba51b);if(_0xb923bc['length'])_0x152f54=_0xb923bc[_0xb923bc[_0x1a2b90(0x195)]-0x1]['timestamp']+0x1,_0x1635c9=_0x1635c9[_0x1a2b90(0x29c)](_0xb923bc);else break;}return _0x1635c9;}async function validate24hChanges(){const _0x32f397=_0x5415c1;for(const _0x4865a4 of currentCoins){if(_0x4865a4[_0x32f397(0x17d)]!=config[_0x32f397(0x23b)]){let _0x64c407;_0x4865a4[_0x32f397(0x191)]?_0x64c407=formatResult((0x1/(global['change'][noslash(_0x4865a4[_0x32f397(0x1ac)])]/0x64+0x1)-0x1)*0x64,0x3):_0x64c407=global[_0x32f397(0x203)][noslash(_0x4865a4[_0x32f397(0x1ac)])],_0x64c407<config[_0x32f397(0x268)]&&(logHistory(_0x32f397(0x2ab),_0x4865a4[_0x32f397(0x17d)]+_0x32f397(0x26b)+_0x64c407+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x32f397(0x2ab),_0x32f397(0x26f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5329de,_0x68c40f){const _0x5d0b89=_0x5415c1;if(!_0x5329de)return!![];const _0x5ba305=_0x68c40f['split']('.'),_0x486e4d=_0x5329de[_0x5d0b89(0x214)]('.');for(var _0x32c3d0=0x0;_0x32c3d0<_0x486e4d[_0x5d0b89(0x195)];_0x32c3d0++){const _0x571e7b=~~_0x486e4d[_0x32c3d0],_0x5ea0a7=~~_0x5ba305[_0x32c3d0];if(_0x571e7b<_0x5ea0a7)return!![];if(_0x571e7b>_0x5ea0a7)return![];}return![];}async function oneTimeMigration(){const _0x1688d6=_0x5415c1;let _0x53bae5=dbLogs[_0x1688d6(0x2dc)]('version')[_0x1688d6(0x184)]();if(isOlderVersion(_0x53bae5,'2.3.5')){let _0x439cab=[];const _0x30030b=dbLogs[_0x1688d6(0x2dc)]('logs')['value']();_0x30030b[_0x1688d6(0x205)](_0x388fd0=>{const _0x7df0fd=_0x1688d6;_0x439cab[_0x7df0fd(0x2c5)]({'time':_0x388fd0[_0x7df0fd(0x1ec)],'type':_0x388fd0['type'],'event':_0x388fd0['event']});}),dbLogs['get'](_0x1688d6(0x25d))[_0x1688d6(0x22b)](_0x439cab)[_0x1688d6(0x25b)]();}let _0x48dc20=dbConfig['get'](_0x1688d6(0x175))[_0x1688d6(0x184)]();if(isOlderVersion(_0x48dc20,_0x1688d6(0x211))){let _0x1e9766=dbConfig[_0x1688d6(0x2dc)](_0x1688d6(0x276))[_0x1688d6(0x25e)]({'botID':botID})[_0x1688d6(0x184)]();if(_0x1e9766){let _0x52f44e=[];_0x1e9766[_0x1688d6(0x2e0)][_0x1688d6(0x205)](_0x4528e8=>{const _0x237b94=_0x1688d6;_0x52f44e['push']({'coin':_0x4528e8[_0x237b94(0x17d)],'number':_0x4528e8[_0x237b94(0x290)],'price':_0x4528e8[_0x237b94(0x2c3)]}),delete _0x4528e8[_0x237b94(0x290)],delete _0x4528e8[_0x237b94(0x2c3)];});if(_0x52f44e[_0x1688d6(0x195)]!==0x0)fs[_0x1688d6(0x22c)](configbackuppath+(_0x1688d6(0x283)+botID+'.json'),JSON[_0x1688d6(0x2b7)](_0x52f44e,null,0x4),function(_0x9ce2d2){if(_0x9ce2d2){}});const _0x26b262=(_0x22627f,_0xf84388)=>{const _0x571bf3=_0x1688d6;let _0x38e025=[];_0xf84388[_0x571bf3(0x205)](_0x4ee718=>{const _0x734eed=_0x571bf3,_0x5cab45=_0x22627f[_0x734eed(0x25e)](_0x338dbb=>_0x338dbb[_0x734eed(0x17d)]==_0x4ee718[_0x734eed(0x17d)]);if(!_0x5cab45)_0x38e025[_0x734eed(0x2c5)](_0x4ee718);});let _0x3b74e7=[];return _0x22627f[_0x571bf3(0x205)](_0x5f0413=>{const _0x2a54b7=_0x571bf3,_0x39d477=_0xf84388[_0x2a54b7(0x25e)](_0x16320e=>_0x16320e[_0x2a54b7(0x17d)]==_0x5f0413[_0x2a54b7(0x17d)]);if(!_0x39d477||_0x39d477['number']==0x0&&_0x5f0413[_0x2a54b7(0x29b)]!=0x0)_0x3b74e7[_0x2a54b7(0x2c5)](_0x5f0413);}),{'missingDay1':_0x38e025,'notInDay2':_0x3b74e7};},_0x47a1ae=dbPerformance['get'](_0x1688d6(0x1b3))[_0x1688d6(0x18b)]()[_0x1688d6(0x184)]();if(_0x47a1ae[_0x1688d6(0x195)]>0x1){const {missingDay1:_0x4d1640,notInDay2:_0x229658}=_0x26b262(_0x52f44e,_0x47a1ae[0x1][_0x1688d6(0x2de)]);_0x52f44e=[..._0x52f44e,..._0x4d1640],_0x229658[_0x1688d6(0x205)](_0x5e7eaa=>{const _0x18efaa=_0x1688d6;let _0x4fa1d4=_0x52f44e[_0x18efaa(0x243)](_0xaa97e7=>_0xaa97e7[_0x18efaa(0x17d)]==_0x5e7eaa['coin']);_0x4fa1d4!=-0x1&&_0x52f44e[_0x18efaa(0x201)](_0x4fa1d4,0x1);});}_0x52f44e['sort']((_0x660b98,_0x4e3c00)=>_0x660b98[_0x1688d6(0x17d)]>_0x4e3c00['coin']?0x1:_0x4e3c00[_0x1688d6(0x17d)]>_0x660b98[_0x1688d6(0x17d)]?-0x1:0x0);let _0x53ae8c=[{'date':_0x1e9766['startdate'],'changes':_0x52f44e}];_0x47a1ae['length']>0x2&&_0x47a1ae[_0x1688d6(0x205)]((_0x34d7d6,_0x2104b6)=>{const _0x252fb3=_0x1688d6;if(_0x2104b6>0x0&&_0x2104b6<_0x47a1ae[_0x252fb3(0x195)]-0x1){const {missingDay1:_0x251a98,notInDay2:_0x18b5b5}=_0x26b262(_0x47a1ae[_0x2104b6][_0x252fb3(0x2de)],_0x47a1ae[_0x2104b6+0x1]['coins']);_0x52f44e=[],(_0x251a98[_0x252fb3(0x195)]!=0x0||_0x18b5b5[_0x252fb3(0x195)]!=0x0)&&(_0x251a98[_0x252fb3(0x195)]!=0x0&&_0x52f44e[_0x252fb3(0x2c5)](..._0x251a98),_0x18b5b5[_0x252fb3(0x195)]!=0x0&&(_0x18b5b5[_0x252fb3(0x205)](_0x16fd99=>{const _0x38567b=_0x252fb3;_0x16fd99['number']=-_0x16fd99[_0x38567b(0x29b)];}),_0x52f44e[_0x252fb3(0x2c5)](..._0x18b5b5)),_0x52f44e[_0x252fb3(0x1b8)]((_0x36d3df,_0x56d277)=>_0x36d3df['coin']>_0x56d277['coin']?0x1:_0x56d277['coin']>_0x36d3df[_0x252fb3(0x17d)]?-0x1:0x0),_0x53ae8c[_0x252fb3(0x2c5)]({'date':_0x47a1ae[_0x2104b6+0x1][_0x252fb3(0x287)],'changes':_0x52f44e}));}}),dbConfig[_0x1688d6(0x2dc)](_0x1688d6(0x276))[_0x1688d6(0x25e)]({'botID':botID})[_0x1688d6(0x22b)]({..._0x1e9766,'liquidity':_0x53ae8c})[_0x1688d6(0x25b)]();}}if(isOlderVersion(_0x48dc20,'2.6.0')){let _0x2291da=dbConfig[_0x1688d6(0x2dc)]('bot')['find']({'botID':botID})[_0x1688d6(0x184)]();if(_0x2291da){const _0x44467a=_0x2291da[_0x1688d6(0x200)],_0xcc7949=_0x44467a?capitalize(_0x44467a):_0x1688d6(0x2c4);dbConfig['get'](_0x1688d6(0x276))[_0x1688d6(0x25e)]({'botID':botID})['assign']({'exchange':_0xcc7949})['write']();}}let _0x278046=dbPerformance[_0x1688d6(0x2dc)]('version')[_0x1688d6(0x184)]();isOlderVersion(_0x278046,_0x1688d6(0x211))&&setStartDatePerformance();let _0x4158b4=dbCoinResults[_0x1688d6(0x2dc)](_0x1688d6(0x175))[_0x1688d6(0x184)]();if(isOlderVersion(_0x4158b4,'2.5.0')){let _0x2d48d7=dbCoinResults[_0x1688d6(0x2dc)](_0x1688d6(0x2de))[_0x1688d6(0x184)]();if(_0x2d48d7['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x32bd97=_0x5415c1;dbConfig[_0x32bd97(0x22f)](_0x32bd97(0x175),serverversion)[_0x32bd97(0x25b)](),dbPerformance[_0x32bd97(0x22f)](_0x32bd97(0x175),serverversion)[_0x32bd97(0x25b)](),dbLogs[_0x32bd97(0x22f)]('version',serverversion)['write'](),dbCoinResults[_0x32bd97(0x22f)](_0x32bd97(0x175),serverversion)[_0x32bd97(0x25b)]();}function getConfiguration(_0x533d11){const _0xe51f2e=_0x5415c1;let _0x4c31bb=dbConfig[_0xe51f2e(0x2dc)](_0xe51f2e(0x276))[_0xe51f2e(0x25e)]({'botID':_0x533d11})[_0xe51f2e(0x184)]();if(_0x4c31bb){let _0x4aeb65=![];typeof _0x4c31bb['threshold']==_0xe51f2e(0x261)&&(_0x4c31bb={..._0x4c31bb,'threshold':Number(_0x4c31bb[_0xe51f2e(0x24e)])},_0x4aeb65=!![]),_0x4c31bb['change24h']==null&&(_0x4c31bb={..._0x4c31bb,'change24h':-0x14},_0x4aeb65=!![]),!_0x4c31bb[_0xe51f2e(0x2b5)]&&(_0x4c31bb={..._0x4c31bb,'fiat':_0xe51f2e(0x2e5)},_0x4aeb65=!![]),!_0x4c31bb[_0xe51f2e(0x29f)]&&(_0x4c31bb={..._0x4c31bb,'onepagemode':settings[_0xe51f2e(0x29f)]},_0x4aeb65=!![]),_0x4aeb65&&(_0x4c31bb={'botID':_0x4c31bb[_0xe51f2e(0x24b)],'exchange':_0x4c31bb[_0xe51f2e(0x200)],'apiKey':_0x4c31bb[_0xe51f2e(0x178)],'apiSecret':_0x4c31bb[_0xe51f2e(0x1ce)],'basecoin':_0x4c31bb[_0xe51f2e(0x23b)],'botname':_0x4c31bb[_0xe51f2e(0x297)],'showname':_0x4c31bb[_0xe51f2e(0x241)],'threshold':_0x4c31bb[_0xe51f2e(0x24e)],'ordertype':_0x4c31bb[_0xe51f2e(0x1e8)],'timeout':_0x4c31bb[_0xe51f2e(0x17b)],'fiat':_0x4c31bb[_0xe51f2e(0x2b5)],'startdate':_0x4c31bb[_0xe51f2e(0x256)],'recreate':_0x4c31bb[_0xe51f2e(0x185)],'timeshift':_0x4c31bb[_0xe51f2e(0x1dc)],'onepagemode':_0x4c31bb[_0xe51f2e(0x29f)],'headless':_0x4c31bb[_0xe51f2e(0x299)],'cooldown':_0x4c31bb['cooldown'],'change24h':_0x4c31bb[_0xe51f2e(0x268)],'emojibuy':_0x4c31bb['emojibuy'],'emojisell':_0x4c31bb[_0xe51f2e(0x2e3)],'portfolio':_0x4c31bb[_0xe51f2e(0x2e0)],'liquidity':_0x4c31bb['liquidity'],'openOrders':_0x4c31bb[_0xe51f2e(0x1d9)]},dbConfig[_0xe51f2e(0x2dc)]('bot')[_0xe51f2e(0x2ce)]()[_0xe51f2e(0x25b)](),dbConfig[_0xe51f2e(0x2dc)](_0xe51f2e(0x276))[_0xe51f2e(0x2c5)](_0x4c31bb)[_0xe51f2e(0x25b)]());}else _0x4c31bb={'botID':_0x533d11,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0xe51f2e(0x2db)+_0x533d11,'showname':![],'threshold':0x3,'ordertype':_0xe51f2e(0x24f),'timeout':0x14,'fiat':_0xe51f2e(0x2e5),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0xe51f2e(0x29f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4c31bb;}function emittedConfiguration(){const _0x506872=_0x5415c1;let _0x5b25ff;if(config[_0x506872(0x178)]=='')_0x5b25ff={...config,'configstate':_0x506872(0x2a8)};else config[_0x506872(0x178)]=='***'?_0x5b25ff={...config,'configstate':_0x506872(0x260)}:_0x5b25ff={...config,'apiKey':_0x506872(0x2b9),'apiSecret':'************'};return _0x5b25ff;}function getSettings(){const _0x50268b=_0x5415c1;return dbSettings['get'](_0x50268b(0x27e))[_0x50268b(0x184)]();}function getSecure(){const _0x221bda=_0x5415c1;return dbSecure['get'](_0x221bda(0x1d2))[_0x221bda(0x184)]()||{};}function updateTimeshift(_0x3b5b4d){const _0x5bc0ef=_0x5415c1;let _0x37eef8=dbConfig[_0x5bc0ef(0x2dc)](_0x5bc0ef(0x276))[_0x5bc0ef(0x25e)]({'botID':botID})[_0x5bc0ef(0x184)]();_0x37eef8&&dbConfig[_0x5bc0ef(0x2dc)]('bot')[_0x5bc0ef(0x25e)]({'botID':botID})[_0x5bc0ef(0x22b)]({'timeshift':_0x3b5b4d})[_0x5bc0ef(0x25b)](),config[_0x5bc0ef(0x1dc)]=_0x3b5b4d,proxyEmit(_0x5bc0ef(0x2cf),emittedConfiguration());}function updateOnepagemode(_0x336480){const _0xc0ffa2=_0x5415c1;let _0x106b97=dbConfig[_0xc0ffa2(0x2dc)](_0xc0ffa2(0x276))['find']({'botID':botID})[_0xc0ffa2(0x184)]();_0x106b97&&dbConfig[_0xc0ffa2(0x2dc)](_0xc0ffa2(0x276))[_0xc0ffa2(0x25e)]({'botID':botID})['assign']({'onepagemode':_0x336480})[_0xc0ffa2(0x25b)](),config[_0xc0ffa2(0x29f)]=_0x336480,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3aa3be){const _0x2b9428=_0x5415c1;logger['debug']('Saving\x20configuration'),blockTransactionDetection=!![],logger[_0x2b9428(0x271)](_0x2b9428(0x1f8));let _0xc13435=[],_0x5937e5=![],_0x5305d4=[];_0x3aa3be[_0x2b9428(0x2e0)]['forEach'](_0x440b30=>{const _0x5db3b6=_0x2b9428;if(!_0x440b30['excluded']&&_0x440b30['coin']!=_0x3aa3be[_0x5db3b6(0x23b)])_0x5305d4[_0x5db3b6(0x2c5)](_0x440b30[_0x5db3b6(0x1ac)]);}),_0x5305d4[_0x2b9428(0x205)](_0x275bc8=>{const _0x2bdbd7=_0x2b9428,_0x3b894c=watchedSymbols[_0x2bdbd7(0x222)](_0x275bc8);!_0x3b894c&&_0xc13435[_0x2bdbd7(0x2c5)](_0x275bc8);});_0xc13435[_0x2b9428(0x195)]>0x0?_0x5937e5=!![]:currentCoins[_0x2b9428(0x205)](_0x2100ae=>{const _0x370bb7=_0x2b9428;if(_0x2100ae[_0x370bb7(0x17d)]!=config[_0x370bb7(0x23b)]){const _0x510ef4=_0x5305d4[_0x370bb7(0x25e)](_0x5588dc=>_0x5588dc==_0x2100ae['symbol']);!_0x510ef4&&(_0x5937e5=!![]);}});let _0x91bb7=dbConfig[_0x2b9428(0x2dc)](_0x2b9428(0x276))[_0x2b9428(0x25e)]({'botID':botID})['value']();_0x3aa3be={..._0x3aa3be,'apiKey':crypt[_0x2b9428(0x1a3)](secure[_0x2b9428(0x2cc)],_0x3aa3be[_0x2b9428(0x178)])[_0x2b9428(0x17f)],'apiSecret':crypt[_0x2b9428(0x1a3)](secure[_0x2b9428(0x2cc)],_0x3aa3be[_0x2b9428(0x1ce)])['message']};let _0x48b271=![];_0x91bb7?(_0x3aa3be['apiKey']==_0x2b9428(0x2b9)?_0x3aa3be['apiKey']=config[_0x2b9428(0x178)]:_0x48b271=!![],_0x3aa3be[_0x2b9428(0x1ce)]==_0x2b9428(0x2b9)?_0x3aa3be['apiSecret']=config[_0x2b9428(0x1ce)]:_0x48b271=!![],dbConfig[_0x2b9428(0x2dc)]('bot')[_0x2b9428(0x25e)]({'botID':botID})[_0x2b9428(0x22b)](_0x3aa3be)[_0x2b9428(0x25b)]()):(dbConfig[_0x2b9428(0x2dc)](_0x2b9428(0x276))['push'](_0x3aa3be)[_0x2b9428(0x25b)](),_0x48b271=!![],process[_0x2b9428(0x1bd)]({'status':_0x2b9428(0x2a3),'live':_0x2b9428(0x1f4)},_0xbe633c=>{}));config={..._0x3aa3be},setStartDatePerformance(),process[_0x2b9428(0x1bd)]({'botname':_0x3aa3be[_0x2b9428(0x297)]},_0x2fdbca=>{}),updateBotManager(),initialPerformanceStored=![],proxyEmit(_0x2b9428(0x285)),await initCoinResults();if(_0x48b271)await reset(_0xc13435,!![]);else{if(_0x5937e5)await reset(_0xc13435,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger[_0x2b9428(0x271)](_0x2b9428(0x198));}async function storeHeadless(_0x29b0fc){const _0x456066=_0x5415c1,_0x2bd6e5={...config,'headless':_0x29b0fc[_0x456066(0x299)]};let _0x298a0=dbConfig[_0x456066(0x2dc)](_0x456066(0x276))['find']({'botID':botID})[_0x456066(0x184)]();_0x298a0&&dbConfig[_0x456066(0x2dc)]('bot')[_0x456066(0x25e)]({'botID':botID})[_0x456066(0x22b)](_0x2bd6e5)[_0x456066(0x25b)](),config={..._0x2bd6e5},updateBotManager(),proxyEmit(_0x456066(0x2cf),emittedConfiguration());}async function storeFiat(_0x1666d6){const _0x4d481f=_0x5415c1,_0xf3ac81={...config,'fiat':_0x1666d6};let _0x142af5=dbConfig[_0x4d481f(0x2dc)](_0x4d481f(0x276))[_0x4d481f(0x25e)]({'botID':botID})[_0x4d481f(0x184)]();_0x142af5&&dbConfig[_0x4d481f(0x2dc)](_0x4d481f(0x276))['find']({'botID':botID})['assign'](_0xf3ac81)[_0x4d481f(0x25b)](),config={..._0xf3ac81},proxyEmit(_0x4d481f(0x2cf),emittedConfiguration());}function resetHistory(){const _0x4f413d=_0x5415c1;logger['full'](_0x4f413d(0x249));try{if(fs[_0x4f413d(0x1d8)](path[_0x4f413d(0x266)](configpath,_0x4f413d(0x25c)+botID+_0x4f413d(0x28c))))fs['unlinkSync'](path[_0x4f413d(0x266)](configpath,_0x4f413d(0x25c)+botID+'-events.json'));if(fs[_0x4f413d(0x1d8)](path[_0x4f413d(0x266)](configpath,_0x4f413d(0x25c)+botID+_0x4f413d(0x2ae))))fs[_0x4f413d(0x28a)](path[_0x4f413d(0x266)](configpath,_0x4f413d(0x25c)+botID+_0x4f413d(0x2ae)));if(fs[_0x4f413d(0x1d8)](path[_0x4f413d(0x266)](configpath,'bot-'+botID+_0x4f413d(0x20e))))fs[_0x4f413d(0x28a)](path[_0x4f413d(0x266)](configpath,_0x4f413d(0x25c)+botID+_0x4f413d(0x20e)));}catch(_0x472da5){if(_0x472da5)logger[_0x4f413d(0x247)]('Error\x20while\x20deleting\x20files:\x20',_0x472da5);}const _0x5ea3ef=getDate();let _0x5145f8=[];currentCoins[_0x4f413d(0x205)](_0x2856d8=>{const _0x1d5d1c=_0x4f413d;_0x5145f8['push']({'coin':_0x2856d8[_0x1d5d1c(0x17d)],'number':_0x2856d8[_0x1d5d1c(0x29b)],'price':_0x2856d8[_0x1d5d1c(0x2a7)]});});let _0x4eb783=dbConfig[_0x4f413d(0x2dc)](_0x4f413d(0x276))[_0x4f413d(0x25e)]({'botID':botID})[_0x4f413d(0x184)]();_0x4eb783&&(dbConfig[_0x4f413d(0x2dc)]('bot')[_0x4f413d(0x25e)]({'botID':botID})['assign']({'liquidity':[{'date':_0x5ea3ef,'changes':_0x5145f8}]})[_0x4f413d(0x25b)](),config['liquidity']=[]),process[_0x4f413d(0x1bd)]({'stop':_0x4f413d(0x212)},_0x48d74d=>{});}function noslash(_0x215348){const _0x11603f=_0x5415c1;return _0x215348[_0x11603f(0x2e4)]('/','');}function updateHighestFee(_0x21f72c,_0x13c890){const _0x5910d4=_0x5415c1;lastFees['currency']=_0x21f72c,lastFees[_0x5910d4(0x1e7)][_0x5910d4(0x195)]===0x14&&lastFees[_0x5910d4(0x1e7)]['shift'](),lastFees[_0x5910d4(0x1e7)][_0x5910d4(0x2c5)](_0x13c890),lastFees[_0x5910d4(0x29e)]=Math[_0x5910d4(0x1f0)](...lastFees[_0x5910d4(0x1e7)]);}async function updateNumberCoinsCcxt(_0x11075a){const _0x4e73e7=_0x5415c1;logger[_0x4e73e7(0x271)](_0x4e73e7(0x2da)+_0x11075a[_0x4e73e7(0x1ac)]+_0x4e73e7(0x1b5)+_0x11075a[_0x4e73e7(0x215)]+_0x4e73e7(0x1b5)+_0x11075a['id']+_0x4e73e7(0x1b5)+_0x11075a['clientOrderId']);let _0x3cf8e3=_0x11075a[_0x4e73e7(0x215)],_0x3faac7=![];currentCoins[_0x4e73e7(0x205)](_0x4468f2=>{const _0x107da2=_0x4e73e7;_0x4468f2['symbol']==_0x11075a[_0x107da2(0x1ac)]&&(_0x3faac7=!![]);});if(!_0x3faac7)return;const _0x33dc23=currentCoins[_0x4e73e7(0x25e)](_0x512960=>_0x512960[_0x4e73e7(0x1ac)]==_0x11075a[_0x4e73e7(0x1ac)]),_0x19165d=_0x231dd8=>{if(_0x33dc23)_0x33dc23['orderstatus']=_0x231dd8;};if(_0x3cf8e3==_0x4e73e7(0x22a))_0x19165d('open');else{if(_0x3cf8e3=='canceled'){_0x19165d(_0x4e73e7(0x1a6));const _0x47001d=await getCoins();[currentCoins,currentCoinsAll]=_0x47001d,await getOpenOrders(),handleOpenOrders();}else{if(_0x3cf8e3==_0x4e73e7(0x2ec)){logger['debug'](_0x4e73e7(0x1f5)+_0x11075a[_0x4e73e7(0x1ac)]+'\x20|\x20'+_0x11075a[_0x4e73e7(0x246)]+_0x4e73e7(0x1b5)+_0x11075a['id']+_0x4e73e7(0x1b5)+_0x11075a['clientOrderId']);let _0x2888df=![];if(lastOrders)lastOrders[_0x4e73e7(0x205)](async _0x28c2ef=>{const _0x1a1b61=_0x4e73e7;if(_0x28c2ef[_0x1a1b61(0x239)]==_0x11075a['clientOrderId']){logger[_0x1a1b61(0x271)](_0x1a1b61(0x295)+_0x11075a[_0x1a1b61(0x27d)]),_0x2888df=!![];if(_0x28c2ef[_0x1a1b61(0x246)]==0x0){logger[_0x1a1b61(0x271)](_0x1a1b61(0x284)+_0x11075a['clientOrderId']),_0x28c2ef[_0x1a1b61(0x1f2)]=_0x11075a[_0x1a1b61(0x25a)],_0x28c2ef[_0x1a1b61(0x246)]=_0x11075a['filled'],_0x28c2ef[_0x1a1b61(0x26a)]={'currency':_0x11075a['fee']?_0x11075a[_0x1a1b61(0x26a)][_0x1a1b61(0x275)]:null,'cost':_0x11075a['fee']?_0x11075a[_0x1a1b61(0x26a)][_0x1a1b61(0x2a0)]:0x0},updateHighestFee(_0x28c2ef['fee'][_0x1a1b61(0x275)],_0x28c2ef['fee'][_0x1a1b61(0x2a0)]),_0x19165d(_0x1a1b61(0x246)),await validateOrders();if(lockOrders==ORDERS[_0x1a1b61(0x1a5)]){const _0x51c3a8=await getCoins();[currentCoins,currentCoinsAll]=_0x51c3a8;}await updateCoinResults(_0x28c2ef);}}});if(!_0x2888df){logger[_0x4e73e7(0x271)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x11075a['id']),_0x19165d(_0x4e73e7(0x246));const _0x15c581=await getCoins();[currentCoins,currentCoinsAll]=_0x15c581,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4cfb6c=JSON[_0x4e73e7(0x1e3)](lastBalances[_0x4e73e7(0x2e0)]);const _0x55ad67=_0x4cfb6c['find'](_0x5aca19=>_0x5aca19[_0x4e73e7(0x1ac)]==_0x11075a[_0x4e73e7(0x1ac)]);if(_0x55ad67){if(_0x3cf8e3=='open')_0x55ad67[_0x4e73e7(0x225)]=_0x55ad67[_0x4e73e7(0x225)]==_0x4e73e7(0x246)?_0x4e73e7(0x246):_0x4e73e7(0x22a);else{if(_0x3cf8e3=='canceled')_0x55ad67[_0x4e73e7(0x225)]=_0x55ad67[_0x4e73e7(0x225)]==_0x4e73e7(0x246)?_0x4e73e7(0x246):_0x4e73e7(0x1a6);else _0x3cf8e3=='closed'&&(_0x55ad67[_0x4e73e7(0x225)]=_0x4e73e7(0x246));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x4cfb6c)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2a3ed3=_0x5415c1;await getOpenOrders();let _0x10a9dc=![];currentCoins[_0x2a3ed3(0x205)](_0x2e2446=>{const _0x4cd49a=_0x2a3ed3;_0x10a9dc=allOpenOrders[_0x4cd49a(0x25e)](_0x89f6f3=>_0x89f6f3[_0x4cd49a(0x1ac)]==_0x2e2446[_0x4cd49a(0x1ac)]),_0x2e2446[_0x4cd49a(0x225)]=_0x10a9dc?'open':_0x4cd49a(0x258);});}async function getCoins(_0x36eb51=!![],_0x307c7c=config['basecoin']){const _0x54b855=_0x5415c1;let _0x6ee39,_0x2fe34d=[],_0x1d9f8d=[],_0xd626c0=[],_0x172625=[];try{_0x6ee39=await exchange[_0x54b855(0x293)](),mybalances=_0x6ee39['total'];for(const [_0x205924,_0x3f9239]of Object['entries'](mybalances)){_0x172625[_0x54b855(0x2c5)](_0x205924);}if(_0x307c7c=='')for(const [_0x6359eb,_0x3d1a90]of Object[_0x54b855(0x230)](mybalances)){_0x3d1a90[_0x54b855(0x2d0)]()!=0x0&&_0x1d9f8d[_0x54b855(0x2c5)]({'coin':_0x6359eb});}else{let _0x45d657=![];for(const [_0x32bc61,_0x31955b]of Object[_0x54b855(0x230)](mybalances)){if(_0x172625[_0x54b855(0x222)](_0x32bc61)){const _0x5686e0=config['portfolio'][_0x54b855(0x25e)](_0x57ab82=>_0x57ab82[_0x54b855(0x17d)]==_0x32bc61),_0x26be93=_0x32bc61+'/'+_0x307c7c,_0x5f383c=_0x307c7c+'/'+_0x32bc61,_0x530ad3=currentCoins['find'](_0x49ce5b=>_0x49ce5b[_0x54b855(0x17d)]==_0x32bc61);_0x45d657=![];if((_0x31955b[_0x54b855(0x2d0)]()!=0x0||_0x5686e0)&&(allSymbols[_0x54b855(0x222)](_0x26be93)||_0x32bc61==_0x307c7c))_0x32bc61!=_0x307c7c&&_0x2fe34d['push'](_0x26be93),_0x1d9f8d[_0x54b855(0x2c5)]({'coin':_0x32bc61,'symbol':_0x26be93,'reverse':![],'number':Math[_0x54b855(0x1f0)](_0x31955b+(_0x5686e0&&_0x5686e0[_0x54b855(0x228)]||0x0),0x0),'orderstatus':_0x530ad3?_0x530ad3[_0x54b855(0x225)]:_0x54b855(0x258)});else(_0x31955b[_0x54b855(0x2d0)]()!=0x0||_0x5686e0)&&allSymbols[_0x54b855(0x222)](_0x5f383c)&&(_0x32bc61!=_0x307c7c&&_0x2fe34d['push'](_0x5f383c),_0x1d9f8d[_0x54b855(0x2c5)]({'coin':_0x32bc61,'symbol':_0x5f383c,'reverse':!![],'number':Math['max'](_0x31955b+(_0x5686e0&&_0x5686e0[_0x54b855(0x228)]||0x0),0x0),'orderstatus':_0x530ad3?_0x530ad3[_0x54b855(0x225)]:_0x54b855(0x258)}));}}}}catch(_0x334272){if(!_0x36eb51)handleErrorNoStop(_0x334272,_0x54b855(0x1fe));else await handleError(_0x334272,_0x54b855(0x1fe));}return _0xd626c0=cloneDeep(_0x1d9f8d),_0x1d9f8d=_0x1d9f8d['filter'](_0x5f44e4=>{const _0x453d31=_0x54b855,_0x3559d1=config['portfolio'][_0x453d31(0x25e)](_0x21d959=>_0x21d959[_0x453d31(0x17d)]==_0x5f44e4[_0x453d31(0x17d)]);return _0x3559d1&&!_0x3559d1[_0x453d31(0x2d4)];}),[_0x1d9f8d,_0xd626c0];}async function getCoinNumber(_0x49c1e6){const _0x2540bd=_0x5415c1;let _0x35b7d2;try{const _0x4d8d5e=await exchange[_0x2540bd(0x293)]();_0x35b7d2=_0x4d8d5e[_0x2540bd(0x224)][_0x49c1e6];}catch(_0x5d6d64){await handleError(_0x5d6d64,_0x2540bd(0x22d));}return _0x35b7d2;}async function getOpenOrders(){const _0x2b39c8=_0x5415c1;let _0x3ceac0;allOpenOrders=[];try{for(const _0x15136c of config['portfolio']){!_0x15136c[_0x2b39c8(0x2d4)]&&_0x15136c['coin']!=config[_0x2b39c8(0x23b)]&&(_0x3ceac0=await exchange['fetchOpenOrders'](_0x15136c['symbol']),_0x3ceac0[_0x2b39c8(0x195)]>0x0&&allOpenOrders[_0x2b39c8(0x2c5)](_0x3ceac0[0x0]));}}catch(_0x1968e5){await handleError(_0x1968e5,_0x2b39c8(0x2af));}}async function handleOpenOrders(_0x222102=0x0){const _0x1e5af5=_0x5415c1;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x1e5af5(0x1a5)]&&allOrdersPlaced&&(_0x222102==0x0?(logger[_0x1e5af5(0x271)](_0x1e5af5(0x1fd)),_0x222102++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1e5af5(0x271)](_0x1e5af5(0x181)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x28880f){const _0x145187=_0x5415c1,_0x57473e=ccxt[_0x28880f[_0x145187(0x200)][_0x145187(0x204)]()],_0x551a27=new _0x57473e({'apiKey':_0x28880f[_0x145187(0x178)],'secret':_0x28880f['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});try{await _0x551a27[_0x145187(0x2e1)]();}catch(_0x580f37){throw _0x580f37;}}function cloneDeep(_0x596297){const _0x17ace6=_0x5415c1;return JSON['parse'](JSON[_0x17ace6(0x2b7)](_0x596297));}async function getPortfolio(_0x30caf7){const _0x1b782f=_0x5415c1;let _0x4c052c=[],_0x239852=[],_0x13218a=[],_0x2b5bb6;if(_0x30caf7[_0x1b782f(0x178)]!=='************'||_0x30caf7[_0x1b782f(0x1ce)]!==_0x1b782f(0x2b9)){if(config[_0x1b782f(0x200)]){if(_0x30caf7[_0x1b782f(0x178)]==_0x1b782f(0x2b9))_0x30caf7[_0x1b782f(0x178)]=config[_0x1b782f(0x178)];if(_0x30caf7[_0x1b782f(0x1ce)]==_0x1b782f(0x2b9))_0x30caf7['apiSecret']=config['apiSecret'];try{await testAPI(_0x30caf7);}catch(_0x46ddd1){if(_0x46ddd1[_0x1b782f(0x2d0)]()['includes']('AuthenticationError')){logger[_0x1b782f(0x271)](_0x1b782f(0x1c0)),proxyEmit(_0x1b782f(0x2e0),![]);return;}else{handleError(_0x46ddd1,_0x1b782f(0x278));return;}}}await initExchange(_0x30caf7[_0x1b782f(0x200)],_0x30caf7['apiKey'],_0x30caf7['apiSecret']);try{await loadSymbols(_0x30caf7[_0x1b782f(0x200)],!![]);}catch(_0x3205dd){if(_0x3205dd[_0x1b782f(0x2d0)]()['includes']('AuthenticationError')){proxyEmit(_0x1b782f(0x2e0),![]);return;}else{handleError(_0x3205dd,_0x1b782f(0x1c9));return;}}const _0x150cb5=await getCoins(![],_0x30caf7[_0x1b782f(0x23b)]);_0x13218a=cloneDeep(_0x150cb5[0x1]);}else _0x13218a=cloneDeep(currentCoinsAll);if(_0x30caf7[_0x1b782f(0x23b)]=='')proxyEmit('portfolio',_0x13218a);else{_0x13218a[_0x1b782f(0x205)](_0x2030f7=>{const _0xfb1e4d=_0x1b782f;if(_0x2030f7['coin']!=_0x30caf7[_0xfb1e4d(0x23b)])_0x4c052c[_0xfb1e4d(0x2c5)](_0x2030f7[_0xfb1e4d(0x1ac)]);});try{_0x239852=await exchange[_0x1b782f(0x277)](_0x4c052c);}catch(_0x5f41b1){if(_0x5f41b1[_0x1b782f(0x2d0)]()[_0x1b782f(0x222)](_0x1b782f(0x265))){proxyEmit(_0x1b782f(0x2e0),![]);return;}else{handleError(_0x5f41b1,_0x1b782f(0x1e4));return;}}_0x13218a[_0x1b782f(0x205)](_0x583138=>{const _0x1c2e08=_0x1b782f;_0x583138[_0x1c2e08(0x17d)]!=_0x30caf7[_0x1c2e08(0x23b)]?_0x2b5bb6=_0x583138[_0x1c2e08(0x191)]?0x1/_0x239852[_0x583138[_0x1c2e08(0x1ac)]]['last']:_0x239852[_0x583138[_0x1c2e08(0x1ac)]][_0x1c2e08(0x2a7)]:_0x2b5bb6=0x1,_0x583138['price']=formatResult(_0x2b5bb6,0x8);}),proxyEmit(_0x1b782f(0x2e0),_0x13218a);}}function checkMinimums(_0x16d73a){const _0x2f11c7=_0x5415c1;let _0x109f95=!![];const _0x863b04=!_0x16d73a[_0x2f11c7(0x191)]?markets[_0x16d73a[_0x2f11c7(0x1ac)]][_0x2f11c7(0x2ea)][_0x2f11c7(0x2b1)][_0x2f11c7(0x2b6)]:markets[_0x16d73a['symbol']][_0x2f11c7(0x2ea)]['cost'][_0x2f11c7(0x2b6)],_0x3f703c=!_0x16d73a[_0x2f11c7(0x191)]?markets[_0x16d73a[_0x2f11c7(0x1ac)]]['limits'][_0x2f11c7(0x2a0)]['min']:markets[_0x16d73a[_0x2f11c7(0x1ac)]][_0x2f11c7(0x2ea)][_0x2f11c7(0x2b1)][_0x2f11c7(0x2b6)],_0x45a646=markets[_0x16d73a[_0x2f11c7(0x1ac)]][_0x2f11c7(0x270)][_0x2f11c7(0x2b1)];_0x16d73a[_0x2f11c7(0x1e1)]=formatResultTruncate(_0x16d73a['trade'],_0x45a646);if(Math[_0x2f11c7(0x252)](_0x16d73a[_0x2f11c7(0x1e1)])<_0x863b04)_0x109f95=![];if(Math[_0x2f11c7(0x252)](_0x16d73a[_0x2f11c7(0x1e1)])*_0x16d73a['last']<_0x3f703c)_0x109f95=![];if(_0x16d73a[_0x2f11c7(0x213)]==_0x2f11c7(0x217)){let _0xd92d6=config[_0x2f11c7(0x2e0)][_0x2f11c7(0x25e)](_0x5799a9=>_0x5799a9[_0x2f11c7(0x17d)]==_0x16d73a[_0x2f11c7(0x17d)]);if(_0xd92d6[_0x2f11c7(0x228)]>0x0){if(Math[_0x2f11c7(0x252)](_0x16d73a[_0x2f11c7(0x1e1)])>_0x16d73a[_0x2f11c7(0x29b)]-_0xd92d6[_0x2f11c7(0x228)])_0x109f95=![];}else{if(Math[_0x2f11c7(0x252)](_0x16d73a[_0x2f11c7(0x1e1)])>_0x16d73a[_0x2f11c7(0x29b)])_0x109f95=![];}}if(_0x16d73a[_0x2f11c7(0x213)]==_0x2f11c7(0x27c)){let _0x42bf4d=config[_0x2f11c7(0x2e0)][_0x2f11c7(0x25e)](_0x39f077=>_0x39f077[_0x2f11c7(0x17d)]==config[_0x2f11c7(0x23b)]),_0x2c302d=currentCoins['find'](_0x22825=>_0x22825[_0x2f11c7(0x17d)]==config[_0x2f11c7(0x23b)]);if(_0x42bf4d[_0x2f11c7(0x228)]>0x0){if(Math[_0x2f11c7(0x252)](_0x16d73a[_0x2f11c7(0x1e1)])*_0x16d73a[_0x2f11c7(0x2a7)]>_0x2c302d['number']-_0x42bf4d[_0x2f11c7(0x228)])_0x109f95=![];}else{if(Math['abs'](_0x16d73a[_0x2f11c7(0x1e1)])*_0x16d73a[_0x2f11c7(0x2a7)]>_0x2c302d[_0x2f11c7(0x29b)])_0x109f95=![];}}return _0x109f95;}async function getBalances(){const _0x39a947=_0x5415c1;let _0x37dba0=0x0,_0x2becbf;const _0x4ab9e8=config[_0x39a947(0x24e)];if(config[_0x39a947(0x299)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x155af6=>{const _0x199067=_0x39a947;if(_0x155af6[_0x199067(0x17d)]!=config[_0x199067(0x23b)]){let _0x1d61f5=global[_0x199067(0x202)][noslash(_0x155af6[_0x199067(0x1ac)])];_0x2becbf=_0x155af6[_0x199067(0x191)]?0x1/_0x1d61f5:_0x1d61f5;}else _0x2becbf=0x1;let _0x5f0d8c=_0x155af6[_0x199067(0x29b)]*_0x2becbf;_0x37dba0+=_0x5f0d8c,_0x155af6['last']=formatResult(Number(_0x2becbf),0x8),_0x155af6[_0x199067(0x184)]=_0x5f0d8c;}),currentCoins[_0x39a947(0x205)](_0x539017=>{const _0x3884d5=_0x39a947;let _0x108295=config[_0x3884d5(0x2e0)][_0x3884d5(0x25e)](_0x1e27aa=>_0x1e27aa['coin']==_0x539017[_0x3884d5(0x17d)]),_0x3b182a=Number(_0x108295[_0x3884d5(0x248)]),_0x4a544b=_0x539017[_0x3884d5(0x184)]/_0x37dba0*0x64,_0x5ec4a4=_0x3b182a*_0x37dba0/0x64/_0x539017['last']-_0x539017[_0x3884d5(0x29b)];_0x539017[_0x3884d5(0x248)]=formatResult(_0x4a544b,0x3),_0x539017[_0x3884d5(0x1da)]=formatResult(_0x3b182a,0x3),_0x539017['trade']=formatResult(_0x5ec4a4,0x8),_0x539017[_0x3884d5(0x213)]='',_0x539017[_0x3884d5(0x2c8)]=![];if(_0x539017[_0x3884d5(0x17d)]!=config[_0x3884d5(0x23b)]){if(_0x539017[_0x3884d5(0x248)]>_0x3b182a)_0x539017[_0x3884d5(0x213)]=_0x3884d5(0x217),_0x539017['valid']=checkMinimums(_0x539017);else _0x539017['distribution']<_0x3b182a&&(_0x539017[_0x3884d5(0x213)]=_0x3884d5(0x27c),_0x539017[_0x3884d5(0x2c8)]=checkMinimums(_0x539017));}_0x539017['delta']=_0x539017[_0x3884d5(0x248)]/_0x539017[_0x3884d5(0x1da)]-0x1;if(_0x539017[_0x3884d5(0x225)]==_0x3884d5(0x246)||_0x539017[_0x3884d5(0x225)]=='canceled')_0x539017[_0x3884d5(0x225)]=_0x3884d5(0x258);}),currentCoins[_0x39a947(0x1b8)]((_0x32f3a3,_0x4acbd3)=>_0x32f3a3[_0x39a947(0x245)]<_0x4acbd3[_0x39a947(0x245)]?0x1:_0x4acbd3[_0x39a947(0x245)]<_0x32f3a3['delta']?-0x1:0x0);const _0x532d89=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x532d89[_0x39a947(0x1de)],'usd':_0x532d89[_0x39a947(0x2be)],'portfolio':JSON[_0x39a947(0x2b7)](currentCoins),'threshold':_0x4ab9e8},proxyEmit(_0x39a947(0x233),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x39a947(0x299)])headlessMode({'portfolio':currentCoins,'threshold':_0x4ab9e8});else{if(lockOrders==ORDERS[_0x39a947(0x199)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4ab9e8});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4af714=getNormalizedPerformance();getStartingBalances(_0x4af714),emitPerformance(_0x4af714);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x3c3507=getNormalizedPerformance();emitPerformance(_0x3c3507),getStartingBalances(_0x3c3507),logger[_0x39a947(0x271)](_0x39a947(0x1b6));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x3e54(_0x192107,_0x1b153d){const _0x5195d2=_0x319f();return _0x3e54=function(_0x308d23,_0x3e11b2){_0x308d23=_0x308d23-0x174;let _0x319fbe=_0x5195d2[_0x308d23];return _0x319fbe;},_0x3e54(_0x192107,_0x1b153d);}async function storePerformance(){const _0x58eee3=_0x5415c1;if(!lastBalances)return;let _0x40a49c=[],_0xbb4da1,_0x31759a=JSON['parse'](lastBalances[_0x58eee3(0x2e0)]);_0x31759a['sort']((_0x265cbf,_0x122fae)=>_0x265cbf[_0x58eee3(0x17d)]>_0x122fae[_0x58eee3(0x17d)]?0x1:_0x122fae[_0x58eee3(0x17d)]>_0x265cbf[_0x58eee3(0x17d)]?-0x1:0x0),_0x31759a[_0x58eee3(0x205)](_0x2fba66=>{const _0x279921=_0x58eee3;let _0x476afe={'coin':_0x2fba66[_0x279921(0x17d)],'number':_0x2fba66['number'],'price':_0x2fba66[_0x279921(0x2a7)]};_0x40a49c[_0x279921(0x2c5)](_0x476afe);});const _0x111746=await getFiat();_0xbb4da1={'date':lastBalances[_0x58eee3(0x1ec)][_0x58eee3(0x214)]('\x20')[0x0],'eur':_0x111746[_0x58eee3(0x1de)],'usd':_0x111746[_0x58eee3(0x2be)],'coins':_0x40a49c};let _0xb3c670=dbPerformance['get'](_0x58eee3(0x1b3))[_0x58eee3(0x25e)]({'date':_0xbb4da1[_0x58eee3(0x287)]})['value']();_0xb3c670?_0xbb4da1[_0x58eee3(0x287)]!=config[_0x58eee3(0x256)]&&dbPerformance[_0x58eee3(0x2dc)](_0x58eee3(0x1b3))[_0x58eee3(0x25e)]({'date':_0xbb4da1[_0x58eee3(0x287)]})['assign'](_0xbb4da1)[_0x58eee3(0x25b)]():dbPerformance[_0x58eee3(0x2dc)](_0x58eee3(0x1b3))[_0x58eee3(0x2c5)](_0xbb4da1)[_0x58eee3(0x25b)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3990cd=_0x5415c1;let _0x635e51=[];if(dbPerformance[_0x3990cd(0x19a)]('data')[_0x3990cd(0x184)]()){let _0x26c7fd=dbPerformance[_0x3990cd(0x2dc)](_0x3990cd(0x1b3))[_0x3990cd(0x18b)]()[_0x3990cd(0x1c1)](_0x3990cd(0x287))[_0x3990cd(0x184)](),_0x1a601a=[...config[_0x3990cd(0x2a1)]];_0x1a601a[_0x3990cd(0x1b8)]((_0x2ca9aa,_0x1f5af4)=>_0x2ca9aa['date']>_0x1f5af4[_0x3990cd(0x287)]?-0x1:_0x1f5af4['date']>_0x2ca9aa[_0x3990cd(0x287)]?0x1:0x0);let _0x514908=0x1,_0x54e8ed=[],_0x1c0305=0x0;_0x26c7fd[_0x3990cd(0x272)]()[_0x3990cd(0x191)]()['forEach']((_0x2df1b3,_0x4c3f03)=>{const _0x76c2e9=_0x3990cd;if(_0x1a601a[_0x1c0305]){if(_0x26c7fd[_0x26c7fd[_0x76c2e9(0x195)]-_0x4c3f03]&&_0x1a601a[_0x1c0305]['date']==_0x26c7fd[_0x26c7fd[_0x76c2e9(0x195)]-_0x4c3f03][_0x76c2e9(0x287)]){if(_0x4c3f03<_0x26c7fd[_0x76c2e9(0x195)]){let _0x5dc1df=0x0,_0x418f5f=0x0;_0x26c7fd[_0x26c7fd[_0x76c2e9(0x195)]-_0x4c3f03]['coins']['forEach'](_0x42fd96=>{const _0x520f97=_0x76c2e9;_0x418f5f+=_0x42fd96[_0x520f97(0x29b)]*_0x42fd96[_0x520f97(0x1f2)];}),_0x1a601a[_0x1c0305][_0x76c2e9(0x2d9)][_0x76c2e9(0x205)](_0x295837=>{const _0x4a0e46=_0x76c2e9;_0x5dc1df+=_0x295837[_0x4a0e46(0x29b)]*_0x295837[_0x4a0e46(0x1f2)];}),_0x514908*=_0x5dc1df/(_0x418f5f-_0x5dc1df)+0x1;}_0x1c0305++;}}let _0x471909=0x0;_0x2df1b3[_0x76c2e9(0x2de)][_0x76c2e9(0x205)](_0x3d6fe9=>{const _0x3d49e3=_0x76c2e9;_0x471909+=_0x3d6fe9[_0x3d49e3(0x29b)]*_0x3d6fe9[_0x3d49e3(0x1f2)];}),_0x54e8ed[_0x26c7fd['length']-_0x4c3f03-0x1]=_0x471909*(_0x514908-0x1);});let _0x7f95f0=[];_0x1a601a=[...config['liquidity']]||[];let _0x5c5a8c=0x0;_0x1c0305=0x0,_0x26c7fd[_0x3990cd(0x205)]((_0x48a12c,_0x414c15)=>{const _0x31c371=_0x3990cd;if(_0x1a601a[_0x1c0305]){const _0x250951=fns[_0x31c371(0x1e3)](_0x1a601a[_0x1c0305][_0x31c371(0x287)],_0x31c371(0x2ca),new Date()),_0x539942=fns['parse'](_0x48a12c[_0x31c371(0x287)],_0x31c371(0x2ca),new Date());if(fns['isEqual'](_0x250951,_0x539942)){let _0xb56ea6=0x0;_0x1a601a[_0x1c0305][_0x31c371(0x2d9)][_0x31c371(0x205)](_0x3b7727=>{const _0x50bc95=_0x31c371;!_0x7f95f0[_0x3b7727[_0x50bc95(0x17d)]]?_0x7f95f0[_0x3b7727[_0x50bc95(0x17d)]]=_0x3b7727[_0x50bc95(0x29b)]:(_0xb56ea6=_0x7f95f0[_0x3b7727['coin']],_0x7f95f0[_0x3b7727[_0x50bc95(0x17d)]]+=_0x3b7727[_0x50bc95(0x29b)]);const _0x5d1c70=_0x48a12c[_0x50bc95(0x2de)][_0x50bc95(0x25e)](_0x2a97a6=>_0x2a97a6[_0x50bc95(0x17d)]==_0x3b7727[_0x50bc95(0x17d)]);(!_0x5d1c70||_0x5d1c70[_0x50bc95(0x29b)]==0x0)&&(_0x5c5a8c+=(-_0x3b7727['number']-_0xb56ea6)*_0x3b7727[_0x50bc95(0x1f2)]);}),_0x1c0305++;}}_0x48a12c[_0x31c371(0x2de)]['forEach']((_0x1876c5,_0x1ca253)=>{const _0x5b8225=_0x31c371;_0x7f95f0[_0x1876c5[_0x5b8225(0x17d)]]&&(_0x1876c5[_0x5b8225(0x2a8)]=_0x7f95f0[_0x1876c5[_0x5b8225(0x17d)]]);}),_0x635e51[_0x31c371(0x2c5)]({'date':_0x48a12c[_0x31c371(0x287)],'eur':_0x48a12c[_0x31c371(0x1de)],'usd':_0x48a12c[_0x31c371(0x2be)],'offset':_0x54e8ed[_0x414c15],'netoffset':_0x5c5a8c,'coins':_0x48a12c[_0x31c371(0x2de)]});});}return _0x635e51;}function emitPerformance(_0x49cf11){const _0x46e47f=_0x5415c1;_0x49cf11[_0x46e47f(0x195)]!==0x0?(proxyEmit('performance',_0x49cf11),lastPerformanceEmitted=getDate()):proxyEmit(_0x46e47f(0x194),[]);}function getPerf(_0x105593,_0x40c0e1){const _0x27d8b3=_0x5415c1;let _0x26f9e8=0x0,_0x3d05d9=0x0,_0x1870e6=0x0;_0x105593[_0x27d8b3(0x2de)]['forEach'](_0x20e3ff=>{const _0x32575b=_0x27d8b3;_0x26f9e8+=_0x20e3ff[_0x32575b(0x29b)]*_0x20e3ff[_0x32575b(0x1f2)];});_0x40c0e1&&(_0x26f9e8+=_0x105593[_0x27d8b3(0x228)]);if(config[_0x27d8b3(0x23b)]===_0x27d8b3(0x2aa)||config[_0x27d8b3(0x23b)]===_0x27d8b3(0x24d))_0x3d05d9=_0x26f9e8*_0x105593['eur'],_0x1870e6=_0x26f9e8*_0x105593[_0x27d8b3(0x2be)];else{if(config[_0x27d8b3(0x23b)]===_0x27d8b3(0x273)||config[_0x27d8b3(0x23b)]===_0x27d8b3(0x229)||config[_0x27d8b3(0x23b)]===_0x27d8b3(0x2e5))_0x3d05d9=_0x26f9e8*_0x105593[_0x27d8b3(0x1de)]/_0x105593['usd'],_0x1870e6=_0x26f9e8;else config[_0x27d8b3(0x23b)]==='EUR'&&(_0x3d05d9=_0x26f9e8,_0x1870e6=_0x26f9e8*_0x105593[_0x27d8b3(0x2be)]/_0x105593['eur']);}return[_0x26f9e8,_0x3d05d9,_0x1870e6];}function getKPIs(_0x493b8c,_0x3951fc='EUR'){const _0x4e36da=_0x5415c1,_0x23e7ef=config[_0x4e36da(0x23b)],_0x50a3c5=lastBalances,_0x2438f4=currentCoins,_0x526ecc=getNormalizedPerformance(),_0x4b670a=_0x493b8c===_0x4e36da(0x23b)?_0x23e7ef:_0x493b8c==='fiat'||_0x493b8c===_0x4e36da(0x23a)?_0x3951fc:'Net\x20'+_0x23e7ef,_0xb59611=_0x493b8c===_0x4e36da(0x1aa)?_0x4e36da(0x1d4):_0x493b8c==='net-fiat'?_0x4e36da(0x1d4):_0x4b670a+_0x4e36da(0x1e0),_0x5596c6=_0x493b8c==='net-basecoin'||_0x493b8c===_0x4e36da(0x23a)?_0x4e36da(0x1d4):_0x4b670a+_0x4e36da(0x2b8);let _0x14516b=0x0;_0x2438f4[_0x4e36da(0x205)](_0x309f1f=>{const _0x23e96e=_0x4e36da;_0x14516b+=_0x309f1f[_0x23e96e(0x29b)]*_0x309f1f[_0x23e96e(0x2a7)];});if(_0x493b8c==='fiat'||_0x493b8c===_0x4e36da(0x23a)){if(_0x23e7ef===_0x4e36da(0x2aa)||_0x23e7ef==='ETH')_0x14516b=_0x14516b*(_0x3951fc==='EUR'?_0x50a3c5[_0x4e36da(0x1de)]:_0x50a3c5[_0x4e36da(0x2be)]);else{if(_0x23e7ef===_0x4e36da(0x273)||_0x23e7ef===_0x4e36da(0x229)||_0x23e7ef===_0x4e36da(0x2e5))_0x14516b=_0x14516b*(_0x3951fc===_0x4e36da(0x21c)?_0x50a3c5[_0x4e36da(0x1de)]/_0x50a3c5[_0x4e36da(0x2be)]:0x1);else _0x23e7ef==='EUR'&&(_0x14516b=_0x14516b*(_0x3951fc==='EUR'?0x1:_0x50a3c5['usd']/_0x50a3c5[_0x4e36da(0x1de)]));}}let _0xeaaf7e;if(_0x14516b!==0x0){if(_0x493b8c===_0x4e36da(0x23b))_0xeaaf7e=(_0x14516b/startingBalances[_0x4e36da(0x23b)]-0x1)*0x64;else{if(_0x3951fc===_0x4e36da(0x21c))_0xeaaf7e=(_0x14516b/startingBalances[_0x4e36da(0x1de)]-0x1)*0x64;else _0xeaaf7e=(_0x14516b/startingBalances['usd']-0x1)*0x64;}let _0x41e431=0x0;if(startingBalances[_0x4e36da(0x2de)])_0x2438f4[_0x4e36da(0x205)](_0x912af6=>{const _0x4aabdd=_0x4e36da;let _0x3d7b91=startingBalances[_0x4aabdd(0x2de)][_0x4aabdd(0x25e)](_0x41f762=>_0x41f762['coin']===_0x912af6[_0x4aabdd(0x17d)]);if(_0x3d7b91&&_0x3d7b91[_0x4aabdd(0x17d)]&&_0x912af6[_0x4aabdd(0x29b)]!==0x0)_0x41e431+=_0x3d7b91[_0x4aabdd(0x29b)]*_0x912af6[_0x4aabdd(0x2a7)];});let _0x1f8e79=0x0;if(_0x526ecc['length']!==0x0){let _0x327d17=_0x526ecc[_0x526ecc[_0x4e36da(0x195)]-0x1];_0x1f8e79=_0x327d17[_0x4e36da(0x23c)];}_0x41e431-=_0x1f8e79;_0x493b8c===_0x4e36da(0x1aa)&&(_0xeaaf7e=(_0x14516b-_0x41e431)/startingBalances[_0x4e36da(0x23b)]*0x64,_0x14516b=_0x14516b-_0x41e431);if(_0x493b8c==='net-fiat'){let _0x57646a=_0x3951fc===_0x4e36da(0x21c)?startingBalances[_0x4e36da(0x1de)]:startingBalances['usd'];if(_0x23e7ef===_0x4e36da(0x2aa)||_0x23e7ef===_0x4e36da(0x24d))_0x41e431=_0x3951fc===_0x4e36da(0x21c)?_0x41e431*_0x50a3c5[_0x4e36da(0x1de)]:_0x41e431*_0x50a3c5[_0x4e36da(0x2be)];else{if(_0x23e7ef===_0x4e36da(0x273)||_0x23e7ef===_0x4e36da(0x229)||_0x23e7ef===_0x4e36da(0x2e5))_0x41e431=_0x3951fc==='EUR'?_0x41e431*_0x50a3c5[_0x4e36da(0x1de)]/_0x50a3c5[_0x4e36da(0x2be)]:_0x41e431;else _0x23e7ef==='EUR'&&(_0x41e431=_0x3951fc===_0x4e36da(0x21c)?_0x41e431:_0x41e431*_0x50a3c5[_0x4e36da(0x2be)]/_0x50a3c5['eur']);}_0xeaaf7e=(_0x14516b-_0x41e431)/_0x57646a*0x64,_0x14516b=_0x14516b-_0x41e431;}if(_0xeaaf7e){if(_0xeaaf7e<0x64)_0xeaaf7e=_0xeaaf7e[_0x4e36da(0x254)](0x2);else{if(_0xeaaf7e<0x3e8)_0xeaaf7e=_0xeaaf7e[_0x4e36da(0x254)](0x1);else _0xeaaf7e=_0xeaaf7e[_0x4e36da(0x254)](0x0);}}else _0xeaaf7e=Number('0')[_0x4e36da(0x254)](0x2);if(_0x14516b){if(Math[_0x4e36da(0x252)](_0x14516b)<0.000001)_0x14516b=_0x14516b['toFixed'](0x2);else{if(Math[_0x4e36da(0x252)](_0x14516b)<0.1)_0x14516b=_0x14516b[_0x4e36da(0x254)](0x6);else{if(Math['abs'](_0x14516b)<0x1)_0x14516b=_0x14516b[_0x4e36da(0x254)](0x5);else{if(Math['abs'](_0x14516b)<0xa)_0x14516b=_0x14516b[_0x4e36da(0x254)](0x4);else{if(Math[_0x4e36da(0x252)](_0x14516b)<0x64)_0x14516b=_0x14516b['toFixed'](0x3);else{if(Math[_0x4e36da(0x252)](_0x14516b)<0x3e8)_0x14516b=_0x14516b[_0x4e36da(0x254)](0x2);else _0x14516b=_0x14516b[_0x4e36da(0x254)](0x2);}}}}}}else _0x14516b=Number('0')[_0x4e36da(0x254)](0x2);}else _0xeaaf7e=Number('0')['toFixed'](0x2);return{'value':_0x14516b,'change':_0xeaaf7e,'leftTxt':_0xb59611,'rightTxt':_0x5596c6};}async function getStartingBalances(_0x14b936,_0x399157=!![]){const _0x3edf6f=_0x5415c1;if(_0x14b936['length']!==0x0){const [_0x281df4,_0x46e15f,_0x262b9b]=getPerf(_0x14b936[0x0],!![]);let _0x3ed58c=[];config['portfolio'][_0x3edf6f(0x205)](_0x386038=>{const _0x34c737=_0x3edf6f;let _0x3f4ac9=0x0,_0x341dab;config[_0x34c737(0x2a1)][_0x34c737(0x205)](_0x203a48=>{const _0x1a2ce4=_0x34c737;let _0xbe86cc=_0x203a48[_0x1a2ce4(0x2d9)][_0x1a2ce4(0x25e)](_0x1220f8=>_0x1220f8[_0x1a2ce4(0x17d)]==_0x386038[_0x1a2ce4(0x17d)]);if(_0xbe86cc){_0x3f4ac9+=_0xbe86cc[_0x1a2ce4(0x29b)];if(!_0x341dab)_0x341dab=_0xbe86cc[_0x1a2ce4(0x1f2)];}}),_0x3ed58c[_0x34c737(0x2c5)]({'coin':_0x386038[_0x34c737(0x17d)],'number':_0x3f4ac9,'initialprice':_0x341dab});});const _0x56f165={'basecoin':_0x281df4,'eur':_0x46e15f,'usd':_0x262b9b,'coins':_0x3ed58c};if(_0x399157)proxyEmit('starting-balances',_0x56f165);startingBalances=_0x56f165;}}function headlessMode(_0x6224e0){const _0x4f88c8=_0x5415c1;let _0x5afa84=_0x6224e0[_0x4f88c8(0x2e0)],_0x1866d3=_0x6224e0[_0x4f88c8(0x24e)],_0x4d3dae=[];for(let _0x21744a of _0x5afa84){if(_0x21744a[_0x4f88c8(0x17d)]!=config[_0x4f88c8(0x23b)]){if(_0x21744a[_0x4f88c8(0x245)]>=_0x1866d3/0x64){if(_0x21744a['valid'])_0x4d3dae[_0x4f88c8(0x2c5)](_0x21744a);}else{if(_0x21744a[_0x4f88c8(0x245)]<=-_0x1866d3/0x64){if(_0x21744a[_0x4f88c8(0x2c8)])_0x4d3dae['push'](_0x21744a);}}}}_0x4d3dae['length']>0x0&&placeOrder(_0x4d3dae);}function notifyBalance(_0x5e992d){const _0x2d46a7=_0x5415c1;let _0x40ab50=_0x5e992d[_0x2d46a7(0x2e0)],_0x5d8a9d=_0x5e992d['threshold'],_0x3ae390=[];for(let _0x28a91a of _0x40ab50){if(_0x28a91a[_0x2d46a7(0x17d)]!=config[_0x2d46a7(0x23b)]){if(_0x28a91a[_0x2d46a7(0x245)]>=_0x5d8a9d/0x64){if(_0x28a91a[_0x2d46a7(0x2c8)])_0x3ae390[_0x2d46a7(0x2c5)](_0x28a91a);}else{if(_0x28a91a['delta']<=-_0x5d8a9d/0x64){if(_0x28a91a[_0x2d46a7(0x2c8)])_0x3ae390[_0x2d46a7(0x2c5)](_0x28a91a);}}}}if(_0x3ae390[_0x2d46a7(0x195)]>0x0){let _0x1d0563=_0x3ae390[_0x2d46a7(0x19b)](_0x5515cf=>_0x5515cf[_0x2d46a7(0x17d)]);_0x1d0563[_0x2d46a7(0x1b8)]();let _0x4e5f5a=_0x1d0563[_0x2d46a7(0x266)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2d46a7(0x17e),_0x2d46a7(0x1a8));lastCoinsToBalance=_0x4e5f5a;}}function symbolToCoin(_0x13a36f){const _0x410654=_0x5415c1;let _0x3f0d0a;if(_0x13a36f[_0x410654(0x222)]('/'+config['basecoin']))_0x3f0d0a=_0x13a36f[_0x410654(0x2e4)]('/'+config[_0x410654(0x23b)],'');if(_0x13a36f[_0x410654(0x222)](config['basecoin']+'/'))_0x3f0d0a=_0x13a36f[_0x410654(0x2e4)](config['basecoin']+'/','');return _0x3f0d0a;}async function unlockOrders(){const _0x25bc68=_0x5415c1;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x25bc68(0x264)),lockOrders=ORDERS[_0x25bc68(0x2a5)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x152be6=await getCoins();[currentCoins,currentCoinsAll]=_0x152be6,validateOrdersState=_0x25bc68(0x2a8),persistOpenOrders([]),lockOrders=ORDERS[_0x25bc68(0x199)],logger[_0x25bc68(0x271)](_0x25bc68(0x1b4));}}async function validateOrders(_0x539edb){const _0x5a7c1a=_0x5415c1;if(_0x539edb)validateOrdersState=_0x539edb;logger[_0x5a7c1a(0x271)](_0x5a7c1a(0x26e)+validateOrdersState+_0x5a7c1a(0x1eb)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x5a7c1a(0x2e7)));let _0x1ccb37=[],_0x26481e=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5a7c1a(0x17b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5a7c1a(0x1a5)])return;logger[_0x5a7c1a(0x271)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x5a7c1a(0x205)](_0x2df66f=>{const _0x521ae3=_0x5a7c1a;let _0xb2381a=![];_0x2df66f['filled']>0x0&&(_0xb2381a=!![]),_0x1ccb37[_0x521ae3(0x2c5)](_0xb2381a),_0xb2381a&&config[_0x521ae3(0x1e8)]!=_0x521ae3(0x24f)&&logHistory(_0x521ae3(0x1f6),_0x521ae3(0x292)+_0x2df66f[_0x521ae3(0x1ac)]+'\x20'+_0x2df66f[_0x521ae3(0x213)]+'\x20#'+formatResult(_0x2df66f[_0x521ae3(0x246)],0x8)+'\x20@'+formatResult(_0x2df66f[_0x521ae3(0x1f2)],0x8));}),_0x1ccb37['forEach']((_0x3529e3,_0x196b40)=>{const _0x24929f=_0x5a7c1a;if(_0x3529e3)lastOrders[_0x24929f(0x201)](_0x196b40,0x1);}),persistOpenOrders(lastOrders);const _0x1589be=coolingDown?_0x5a7c1a(0x250):_0x5a7c1a(0x291);if(validateOrdersState==_0x5a7c1a(0x2a8)){validateOrdersState=_0x5a7c1a(0x208);if(_0x1ccb37[_0x5a7c1a(0x222)](![])){if(config[_0x5a7c1a(0x1e8)]==_0x5a7c1a(0x24f)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5a7c1a(0x208)){if(_0x1ccb37['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x5a7c1a(0x1e8)]==_0x5a7c1a(0x24f)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5a7c1a(0x1cb))_0x1ccb37[_0x5a7c1a(0x222)](![])&&(config[_0x5a7c1a(0x1e8)]=='market'?logHistory('success',_0x5a7c1a(0x236)+Math[_0x5a7c1a(0x2e2)](_0x26481e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1589be):(await cancelOrders(),logHistory('success',_0x5a7c1a(0x24c)+Math[_0x5a7c1a(0x2e2)](_0x26481e*validateOrderInterval/0xea60)+_0x5a7c1a(0x29a)+_0x1589be))),await unlockOrders();else{if(validateOrdersState==_0x5a7c1a(0x2c0)){if(config['ordertype']!=_0x5a7c1a(0x24f))logHistory(_0x5a7c1a(0x269),_0x5a7c1a(0x262)+_0x1589be);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x12408e=>{const _0x4c60d1=_0x3e54;try{const _0x3e7d7c=await exchange[_0x4c60d1(0x1fb)](_0x12408e[_0x4c60d1(0x2e9)],_0x12408e[_0x4c60d1(0x1ac)]);}catch(_0xe0e00d){if(_0xe0e00d[_0x4c60d1(0x2d0)]()[_0x4c60d1(0x222)](_0x4c60d1(0x19d))){}else await handleError(_0xe0e00d,'cancelOrders()');}});}async function initCoinResults(){const _0x1101c2=_0x5415c1;let _0x3ea34e=[];config[_0x1101c2(0x2e0)][_0x1101c2(0x205)](_0x411fde=>{const _0x3a6c19=_0x1101c2;if(!_0x411fde['excluded']&&_0x411fde[_0x3a6c19(0x17d)]!=config[_0x3a6c19(0x23b)]){let _0x88a09c=dbCoinResults[_0x3a6c19(0x2dc)](_0x3a6c19(0x2de))['find']({'coin':_0x411fde[_0x3a6c19(0x17d)]})['value']();if(!_0x88a09c){const _0x3c8b0f=currentCoins['find'](_0x17734d=>_0x17734d['coin']==_0x411fde[_0x3a6c19(0x17d)]),_0xd9e7d6=global[_0x3a6c19(0x202)][noslash(_0x411fde[_0x3a6c19(0x1ac)])];let _0x4b6536=_0x3c8b0f?_0x3c8b0f[_0x3a6c19(0x29b)]:null,_0x553e9c=_0x411fde[_0x3a6c19(0x191)]?0x1/_0xd9e7d6:_0xd9e7d6,_0x386c61;config[_0x3a6c19(0x2a1)][_0x3a6c19(0x205)](_0x37353c=>{const _0x52565f=_0x3a6c19;!_0x386c61&&(_0x386c61=_0x37353c[_0x52565f(0x2d9)]['find'](_0x10463a=>_0x10463a[_0x52565f(0x17d)]==_0x411fde[_0x52565f(0x17d)]),_0x386c61&&(_0x4b6536=_0x386c61[_0x52565f(0x29b)],_0x553e9c=_0x386c61[_0x52565f(0x1f2)]));}),_0x3ea34e[_0x3a6c19(0x2c5)]({'coin':_0x411fde[_0x3a6c19(0x17d)],'number':_0x4b6536,'price':_0x553e9c});}}}),_0x3ea34e[_0x1101c2(0x205)](_0x4ae5ee=>{const _0x16bee9=_0x1101c2,_0x173359={'coin':_0x4ae5ee[_0x16bee9(0x17d)],'number':_0x4ae5ee['number'],'breakeven':_0x4ae5ee['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x16bee9(0x2dc)](_0x16bee9(0x2de))[_0x16bee9(0x2c5)](_0x173359)[_0x16bee9(0x25b)]();});}async function updateCoinResults(_0x329f4f,_0x53d0fe=![]){const _0x339f40=_0x5415c1;let _0x5b26ab,_0x49ed85,_0x1818f0,_0x5020dc,_0x4a4798,_0x470179,_0x190d28=dbCoinResults[_0x339f40(0x2dc)]('coins')['find']({'coin':_0x329f4f['coin']})[_0x339f40(0x184)]();!_0x190d28&&await initCoinResults();_0x329f4f[_0x339f40(0x191)]&&(_0x470179={'filled':_0x329f4f[_0x339f40(0x246)]*_0x329f4f[_0x339f40(0x1f2)],'amount':_0x329f4f[_0x339f40(0x246)]*_0x329f4f['price'],'side':_0x329f4f[_0x339f40(0x213)]=='sell'?'buy':_0x339f40(0x217),'price':0x1/_0x329f4f[_0x339f40(0x1f2)]},_0x329f4f={..._0x329f4f,..._0x470179});_0x53d0fe?_0x49ed85=_0x329f4f[_0x339f40(0x213)]==_0x339f40(0x27c)?_0x190d28['number']+_0x329f4f[_0x339f40(0x246)]:_0x190d28[_0x339f40(0x29b)]-_0x329f4f[_0x339f40(0x246)]:_0x49ed85=await getCoinNumber(_0x329f4f[_0x339f40(0x17d)]);if(_0x329f4f[_0x339f40(0x26a)]&&_0x329f4f[_0x339f40(0x26a)][_0x339f40(0x275)]==config['basecoin'])_0x5b26ab=_0x329f4f['fee'][_0x339f40(0x2a0)];else{if(_0x329f4f[_0x339f40(0x26a)]&&_0x329f4f[_0x339f40(0x26a)]['currency']==_0x339f40(0x187)&&!_0x53d0fe)_0x5b26ab=_0x329f4f[_0x339f40(0x26a)][_0x339f40(0x2a0)]*global[_0x339f40(0x202)][_0x339f40(0x187)+config['basecoin']];else _0x5b26ab=defaultFee*_0x329f4f[_0x339f40(0x246)]*_0x329f4f['price'];}_0x329f4f[_0x339f40(0x213)]==_0x339f40(0x27c)?(_0x1818f0=_0x49ed85!=0x0?(_0x190d28[_0x339f40(0x2c1)]*_0x190d28[_0x339f40(0x29b)]+_0x329f4f[_0x339f40(0x1f2)]*(_0x49ed85-_0x190d28[_0x339f40(0x29b)])+_0x5b26ab)/_0x49ed85:0x0,_0x5020dc=_0x190d28[_0x339f40(0x27a)]):(_0x1818f0=_0x49ed85!=0x0?(_0x190d28[_0x339f40(0x2c1)]*_0x190d28[_0x339f40(0x29b)]-_0x329f4f[_0x339f40(0x1f2)]*(_0x190d28[_0x339f40(0x29b)]-_0x49ed85)+_0x5b26ab)/_0x49ed85:0x0,_0x5020dc=_0x190d28[_0x339f40(0x27a)]+(_0x329f4f[_0x339f40(0x1f2)]-_0x190d28[_0x339f40(0x2c1)])*_0x329f4f[_0x339f40(0x246)]);_0x4a4798=(_0x329f4f[_0x339f40(0x1f2)]-_0x1818f0-_0x5b26ab/_0x329f4f['filled'])*_0x49ed85;let _0x1bb1cc={'coin':_0x329f4f[_0x339f40(0x17d)],'number':_0x49ed85,'breakeven':formatResult(_0x1818f0,0x8),'realized':formatResult(_0x5020dc,0x8),'unrealized':formatResult(_0x4a4798,0x8),'fees':formatResult(_0x190d28[_0x339f40(0x2d1)]+_0x5b26ab,0x8),'sells':_0x329f4f[_0x339f40(0x213)]==_0x339f40(0x217)?_0x190d28['sells']+0x1:_0x190d28[_0x339f40(0x1fa)],'buys':_0x329f4f[_0x339f40(0x213)]=='buy'?_0x190d28[_0x339f40(0x2eb)]+0x1:_0x190d28[_0x339f40(0x2eb)]};dbCoinResults[_0x339f40(0x2dc)](_0x339f40(0x2de))[_0x339f40(0x25e)]({'coin':_0x329f4f['coin']})[_0x339f40(0x22b)](_0x1bb1cc)['write']();if(!_0x53d0fe){if(_0x329f4f[_0x339f40(0x26a)]&&_0x329f4f[_0x339f40(0x26a)][_0x339f40(0x275)]==_0x339f40(0x187)){const _0x45b60d=currentCoins['find'](_0x38c691=>_0x38c691[_0x339f40(0x17d)]=='BNB');if(_0x45b60d){let _0x498180=dbCoinResults[_0x339f40(0x2dc)](_0x339f40(0x2de))[_0x339f40(0x25e)]({'coin':_0x339f40(0x187)})[_0x339f40(0x184)]();_0x1bb1cc={..._0x498180,'number':_0x45b60d[_0x339f40(0x29b)]},dbCoinResults[_0x339f40(0x2dc)]('coins')[_0x339f40(0x25e)]({'coin':_0x339f40(0x187)})['assign'](_0x1bb1cc)[_0x339f40(0x25b)]();}}}}async function placeOrder(_0x38ce14){const _0x3ebf76=_0x5415c1,_0x144a25=config['ordertype']=='market'?_0x3ebf76(0x24f):_0x3ebf76(0x1be);if(lockOrders==ORDERS[_0x3ebf76(0x199)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3ebf76(0x1a5)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x1fe998 of _0x38ce14){let _0x41f7da,_0x382ebc,_0x5f26ce,_0x43bfd2,_0x106d4b,_0x13516d=_0x1fe998[_0x3ebf76(0x1ac)];try{const _0x233679=await exchange['fetchTicker'](_0x13516d);_0x41f7da=_0x1fe998[_0x3ebf76(0x191)]?0x1/_0x1fe998[_0x3ebf76(0x2a7)]:_0x1fe998[_0x3ebf76(0x2a7)],_0x382ebc=_0x233679[_0x3ebf76(0x21a)],_0x5f26ce=_0x233679['ask'];_0x1fe998[_0x3ebf76(0x191)]?(_0x43bfd2=_0x1fe998['side']==_0x3ebf76(0x27c)?_0x3ebf76(0x217):_0x3ebf76(0x27c),_0x106d4b=Math[_0x3ebf76(0x252)](_0x1fe998[_0x3ebf76(0x1e1)])/_0x41f7da):(_0x43bfd2=_0x1fe998[_0x3ebf76(0x213)],_0x106d4b=Math[_0x3ebf76(0x252)](_0x1fe998[_0x3ebf76(0x1e1)]));_0x144a25==_0x3ebf76(0x1be)&&(config['ordertype']=='limit-high'&&(_0x41f7da=_0x43bfd2=='buy'?_0x382ebc:_0x5f26ce),config['ordertype']=='limit-low'&&(_0x41f7da=_0x43bfd2=='buy'?_0x5f26ce:_0x382ebc));_0x106d4b=formatResult(_0x106d4b,0x8),_0x41f7da=formatResult(_0x41f7da,0x8);const _0x43a223=_0x43bfd2==_0x3ebf76(0x217)?config[_0x3ebf76(0x2e3)]?String[_0x3ebf76(0x1f7)]('0x'+config['emojisell'])+'\x20':'':config[_0x3ebf76(0x238)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x2e40a4=_0x144a25==_0x3ebf76(0x24f)?_0x3ebf76(0x18e):config['ordertype']==_0x3ebf76(0x193)?_0x3ebf76(0x2c9):'Limit\x20(low-margin)',_0x2d1aac=new Date()[_0x3ebf76(0x26d)]()[_0x3ebf76(0x2d0)]()[_0x3ebf76(0x272)](-0x6)+'-'+Math['random']()[_0x3ebf76(0x2d0)]()[_0x3ebf76(0x272)](-0x6);lastOrders[_0x3ebf76(0x2c5)]({'customId':_0x2d1aac,'symbol':_0x13516d,'coin':_0x1fe998[_0x3ebf76(0x17d)],'side':_0x43bfd2,'reverse':_0x1fe998[_0x3ebf76(0x191)],'filled':0x0});if(_0x144a25==_0x3ebf76(0x24f))logHistory(_0x3ebf76(0x1f6),''+_0x43a223+_0x2e40a4+_0x3ebf76(0x1af)+_0x13516d+'\x20'+_0x43bfd2+'\x20#'+formatResult(_0x106d4b,0x8)+'\x20@'+formatResult(_0x41f7da,0x8));else logHistory(_0x3ebf76(0x1f6),''+_0x43a223+_0x2e40a4+'\x20order:\x20'+_0x13516d+'\x20'+_0x43bfd2+'\x20#'+formatResult(_0x106d4b,0x8)+'\x20@'+formatResult(_0x41f7da,0x8));const _0x4854d6=await exchange[_0x3ebf76(0x20a)](_0x13516d,_0x144a25,_0x43bfd2,_0x106d4b,_0x41f7da,{'clientOrderId':_0x2d1aac}),_0x15a205=lastOrders[_0x3ebf76(0x195)]-0x1;_0x15a205>=0x0&&lastOrders[_0x15a205]['customId']==_0x2d1aac&&(lastOrders[_0x15a205]={...lastOrders[_0x15a205],'orderId':_0x4854d6['id'],'amount':_0x4854d6[_0x3ebf76(0x2b1)],'price':_0x4854d6[_0x3ebf76(0x1f2)],'fee':_0x4854d6[_0x3ebf76(0x26a)]});if(config['cooldown']!=0x0){let _0x582c01=null;if(cooldownTracker[_0x3ebf76(0x195)]==config['cooldown']-0x1)_0x582c01=cooldownTracker['shift']();const _0xa58cdf=getTimeStamp();cooldownTracker[_0x3ebf76(0x2c5)](_0xa58cdf);if(_0x582c01){const _0x551f14=fns[_0x3ebf76(0x257)](new Date(_0xa58cdf),new Date(_0x582c01));if(_0x551f14<cooldownInterval){logHistory('error','Executed\x20'+config[_0x3ebf76(0x28b)]+_0x3ebf76(0x27f)+cooldownInterval/0x3c+_0x3ebf76(0x1ee)+cooldownPeriod/(0xe10*0x3e8)+_0x3ebf76(0x231)),coolingDown=!![];break;}}}}catch(_0x19b3fa){if(_0x19b3fa[_0x3ebf76(0x2d0)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x3ebf76(0x2a2)](_0x385f15=>_0x385f15[_0x3ebf76(0x1ac)]!=_0x13516d),await pauseBot('Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x13516d);else _0x19b3fa[_0x3ebf76(0x2d0)]()[_0x3ebf76(0x222)](_0x3ebf76(0x1a9))?(lastOrders=lastOrders[_0x3ebf76(0x2a2)](_0x5ae40b=>_0x5ae40b[_0x3ebf76(0x1ac)]!=_0x13516d),await pauseBot(_0x3ebf76(0x1b1)+_0x13516d)):(lastOrders=lastOrders[_0x3ebf76(0x2a2)](_0x18d603=>_0x18d603['symbol']!=_0x13516d),await handleError(_0x19b3fa,_0x3ebf76(0x2cb),_0x13516d));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3ebf76(0x195)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x51aaa6=config[_0x3ebf76(0x1e8)]==_0x3ebf76(0x24f)?validateOrderTimeout*0x3c*0x3e8:config[_0x3ebf76(0x17b)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x483019=_0x3ebf76;validateOrders(_0x483019(0x1cb));},_0x51aaa6);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3ebf76(0x1ad)));}else{if(coolingDown)!config[_0x3ebf76(0x299)]&&logHistory(_0x3ebf76(0x2ab),_0x3ebf76(0x2a4));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x3ebf76(0x299)]&&(config[_0x3ebf76(0x1e8)]==_0x3ebf76(0x24f)?logHistory(_0x3ebf76(0x2ab),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3ebf76(0x2ab),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0xc16637){const _0x2db139=_0x5415c1,_0x37c37a={...config,'openOrders':_0xc16637};let _0x3a5fdf=dbConfig[_0x2db139(0x2dc)]('bot')['find']({'botID':botID})[_0x2db139(0x184)]();_0x3a5fdf&&dbConfig['get'](_0x2db139(0x276))[_0x2db139(0x25e)]({'botID':botID})['assign'](_0x37c37a)[_0x2db139(0x25b)]();}function restoreOrders(){const _0x41a47b=_0x5415c1;let _0x420b33;config[_0x41a47b(0x1d9)]&&allOpenOrders[_0x41a47b(0x205)](_0x459067=>{const _0x446bdd=_0x41a47b,_0x4dead9=config[_0x446bdd(0x1d9)][_0x446bdd(0x25e)](_0x1669b6=>_0x1669b6[_0x446bdd(0x2e9)]==_0x459067['id']);_0x4dead9&&(lastOrders[_0x446bdd(0x2c5)](_0x4dead9),_0x420b33=_0x459067[_0x446bdd(0x1cf)]);});if(lastOrders[_0x41a47b(0x195)]>0x0){lockOrders=ORDERS[_0x41a47b(0x1a5)],validateOrdersState=_0x41a47b(0x208),allOrdersPlaced=!![];const _0x4ac724=new Date()[_0x41a47b(0x26d)](),_0x3a5929=config[_0x41a47b(0x1e8)]==_0x41a47b(0x24f)?validateOrderTimeout*0x3c*0x3e8:config[_0x41a47b(0x17b)]*0x3c*0x3e8;if(_0x420b33+_0x3a5929>_0x4ac724){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x595b5e=_0x41a47b;validateOrders(_0x595b5e(0x1cb));},_0x420b33+_0x3a5929-_0x4ac724);}else validateOrders(_0x41a47b(0x1cb));}}async function sendMetricsTelegram(){const _0x479fe2=_0x5415c1;if(!coinsLoaded){process[_0x479fe2(0x1bd)]({'telegrammsg':_0x479fe2(0x1c8)},_0x10b701=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x891746='';if(config[_0x479fe2(0x241)])_0x891746=_0x479fe2(0x1db)+config[_0x479fe2(0x297)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x891746=_0x479fe2(0x2b4)+botID+_0x479fe2(0x1ca);const _0x5ea26c=getKPIs(_0x479fe2(0x23b)),_0x50a993=getKPIs(_0x479fe2(0x2b5),config[_0x479fe2(0x2b5)]),_0xfa138d=getKPIs(_0x479fe2(0x1aa)),_0x28a59d=getKPIs('net-fiat',config[_0x479fe2(0x2b5)]);_0x891746+=_0x479fe2(0x2bb),_0x891746+=_0x5ea26c[_0x479fe2(0x19f)]+'\x20:\x20'+_0x5ea26c[_0x479fe2(0x184)]+'\x0a',_0x891746+=_0x5ea26c['rightTxt']+':\x20'+_0x5ea26c[_0x479fe2(0x203)]+'%\x0a',_0x891746+=_0x50a993[_0x479fe2(0x19f)]+_0x479fe2(0x1d3)+_0x50a993[_0x479fe2(0x184)]+'\x0a',_0x891746+=_0x50a993[_0x479fe2(0x28f)]+':\x20'+_0x50a993[_0x479fe2(0x203)]+'%\x0a',_0x891746+=_0xfa138d[_0x479fe2(0x19f)]+':\x20'+_0xfa138d['value']+'\x20('+config[_0x479fe2(0x23b)]+')\x0a',_0x891746+=_0xfa138d[_0x479fe2(0x28f)]+':\x20'+_0xfa138d['change']+_0x479fe2(0x274)+config[_0x479fe2(0x23b)]+')\x0a',_0x891746+=_0x28a59d[_0x479fe2(0x19f)]+':\x20'+_0x28a59d[_0x479fe2(0x184)]+'\x20('+config[_0x479fe2(0x2b5)]+')\x0a',_0x891746+=_0x28a59d[_0x479fe2(0x28f)]+':\x20'+_0x28a59d['change']+_0x479fe2(0x274)+config[_0x479fe2(0x2b5)]+')\x0a',_0x891746+=_0x479fe2(0x188),process[_0x479fe2(0x1bd)]({'telegrammsg':_0x891746},_0x34402e=>{});}async function sendPortfolioTelegram(){const _0x482981=_0x5415c1;if(!coinsLoaded){process[_0x482981(0x1bd)]({'telegrammsg':_0x482981(0x1c8)},_0x321238=>{});return;}let _0x3618d2='';if(config['showname'])_0x3618d2='<b>'+config['botname']+_0x482981(0x21e);else _0x3618d2=_0x482981(0x2b4)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x3618d2+='<pre>',_0x3618d2+=_0x482981(0x17a),_0x3618d2+=_0x482981(0x2a9),_0x3618d2+=_0x482981(0x17a),currentCoins[_0x482981(0x205)](_0x21dabe=>{const _0x3b6bb0=_0x482981;_0x3618d2+=_0x21dabe['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x21dabe[_0x3b6bb0(0x248)],0x2,0x6)+'|\x20'+formatPad(_0x21dabe[_0x3b6bb0(0x1da)],0x2,0x6)+'|\x20'+formatPad(_0x21dabe['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3618d2+=_0x482981(0x188),process[_0x482981(0x1bd)]({'telegrammsg':_0x3618d2},_0x134296=>{});}function formatPad(_0x14b85e,_0x3803ac,_0xcce82){const _0x147d6d=_0x5415c1,_0x44c937=formatResultString(_0x14b85e,_0x3803ac);return _0x44c937?_0x44c937[_0x147d6d(0x2b0)](_0xcce82):''[_0x147d6d(0x2b0)](_0xcce82);}function logHistory(_0x2c1c71,_0x1468ae,_0x451929=''){const _0x3a99ab=_0x5415c1;let _0x48916a={'time':getTimeStamp(),'type':_0x2c1c71,'event':_0x1468ae};dbLogs[_0x3a99ab(0x2dc)](_0x3a99ab(0x25d))[_0x3a99ab(0x2c5)](_0x48916a)[_0x3a99ab(0x25b)]();if(_0x451929=='')_0x451929=_0x1468ae;proxyEmit('event',{'log':_0x48916a,'summary':_0x451929}),process[_0x3a99ab(0x1bd)]({'telegram':{..._0x48916a,'botname':config[_0x3a99ab(0x297)],'showname':config[_0x3a99ab(0x241)]}},_0x48bb24=>{}),logger['full'](''+_0x48916a[_0x3a99ab(0x1e5)]);}function emitHistory(_0x2b53dd={}){const _0x5218fa=_0x5415c1;Object[_0x5218fa(0x2d6)](_0x2b53dd)[_0x5218fa(0x195)]==0x0&&(_0x2b53dd={'type':[_0x5218fa(0x1f6),'event'],'event':'','page':0x1});if(_0x2b53dd[_0x5218fa(0x288)][_0x5218fa(0x222)](_0x5218fa(0x1e5)))_0x2b53dd[_0x5218fa(0x288)]['splice'](_0x2b53dd['type'][_0x5218fa(0x29d)](_0x5218fa(0x1e5)),0x1,'error','warning',_0x5218fa(0x269));if(dbLogs[_0x5218fa(0x19a)](_0x5218fa(0x25d))['value']()){let _0x179cd3=dbLogs[_0x5218fa(0x2dc)]('logs')[_0x5218fa(0x2a2)](_0x3b7fe2=>{const _0x50133b=_0x5218fa;if(_0x2b53dd[_0x50133b(0x288)][_0x50133b(0x195)]==0x0)return![];else return _0x2b53dd[_0x50133b(0x288)]['includes'](_0x3b7fe2[_0x50133b(0x288)]);})['filter'](_0x3dc62d=>{const _0x1bfe39=_0x5218fa;if(_0x2b53dd['event']=='')return!![];else return _0x3dc62d[_0x1bfe39(0x1e5)][_0x1bfe39(0x204)]()[_0x1bfe39(0x222)](_0x2b53dd[_0x1bfe39(0x1e5)][_0x1bfe39(0x204)]());})[_0x5218fa(0x1c1)](_0x5218fa(0x1ec)),_0x12ab58=_0x179cd3[_0x5218fa(0x184)]()['length'];_0x179cd3=_0x179cd3[_0x5218fa(0x191)]()[_0x5218fa(0x272)]((_0x2b53dd[_0x5218fa(0x186)]-0x1)*logPageSize,_0x2b53dd[_0x5218fa(0x186)]*logPageSize-0x1)[_0x5218fa(0x191)]()['value'](),proxyEmit('event-history',{'logs':_0x179cd3,'total':_0x12ab58});}else proxyEmit(_0x5218fa(0x1c5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x63ff95){const _0x5ea9dc=_0x5415c1;if(dbLogs[_0x5ea9dc(0x19a)](_0x5ea9dc(0x25d))[_0x5ea9dc(0x184)]()){const _0x43f8ab=dbLogs[_0x5ea9dc(0x2dc)](_0x5ea9dc(0x25d))[_0x5ea9dc(0x1c1)](_0x5ea9dc(0x1ec))[_0x5ea9dc(0x2a2)](_0x3d5862=>{const _0x1ee4c7=_0x5ea9dc;return _0x3d5862[_0x1ee4c7(0x288)]==_0x1ee4c7(0x1f6);})['value']();dbLogs['get']('logs')[_0x5ea9dc(0x2ce)]()[_0x5ea9dc(0x25b)](),dbLogs[_0x5ea9dc(0x2dc)](_0x5ea9dc(0x25d))[_0x5ea9dc(0x22b)](_0x43f8ab)[_0x5ea9dc(0x25b)](),emitHistory(_0x63ff95);}}async function pauseBot(_0x59862e=''){const _0x54b916=_0x5415c1,_0x1000e7=new Date()[_0x54b916(0x26d)]();if(!lastErrorShown||_0x1000e7-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1000e7;!lastBotPause?(lastBotPause=_0x1000e7,consecutivePauses=0x1):(_0x1000e7-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x54b916(0x1bd)]({'stop':_0x54b916(0x212)},_0x59b1a5=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x54b916(0x26d)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x59862e)_0x59862e+=_0x54b916(0x1b5);logHistory('error',_0x59862e+_0x54b916(0x220)+pauseBotInterval/0xea60+_0x54b916(0x267)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0xc7c168=_0x5415c1;process[_0xc7c168(0x1bd)]({'stop':'kill'},_0x33b141=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x429dc7,_0xd2fe02){const _0x2e03c6=_0x5415c1;if(_0x429dc7[_0x2e03c6(0x2d0)]()[_0x2e03c6(0x222)](_0x2e03c6(0x1bc)))return logHistory(_0x2e03c6(0x2ab),config[_0x2e03c6(0x200)]+_0x2e03c6(0x196)),![];else{if(_0x429dc7[_0x2e03c6(0x2d0)]()[_0x2e03c6(0x222)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x2e03c6(0x2ab),config['exchange']+_0x2e03c6(0x2ad)),![];else{if(_0x429dc7[_0x2e03c6(0x2d0)]()[_0x2e03c6(0x222)](_0x2e03c6(0x265)))return logHistory(_0x2e03c6(0x2ab),config['exchange']+_0x2e03c6(0x216)),logHistory(_0x2e03c6(0x2ab),_0x2e03c6(0x1d5)),![];else await handleError(_0x429dc7,_0xd2fe02);}}}async function handleError(_0x504aaf,_0xebca77,_0x295ac7=''){const _0xec2cb7=_0x5415c1,_0x5c49f9=config[_0xec2cb7(0x200)]||_0xec2cb7(0x1c7);if(_0x504aaf[_0xec2cb7(0x2d0)]()['includes'](_0xec2cb7(0x1a2)))await pauseBot(config[_0xec2cb7(0x200)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x504aaf[_0xec2cb7(0x2d0)]()[_0xec2cb7(0x222)](_0xec2cb7(0x234)))await pauseBot(config['exchange']+_0xec2cb7(0x18a));else{if(_0x504aaf[_0xec2cb7(0x2d0)]()['includes'](_0xec2cb7(0x219)))await pauseBot(config[_0xec2cb7(0x200)]+_0xec2cb7(0x281));else{if(_0x504aaf['toString']()['includes'](_0xec2cb7(0x18c)))await pauseBot(config['exchange']+_0xec2cb7(0x28d));else{if(_0x504aaf[_0xec2cb7(0x2d0)]()[_0xec2cb7(0x222)](_0xec2cb7(0x176)))logHistory(_0xec2cb7(0x2ab),_0xebca77+_0xec2cb7(0x1cd)),logHistory(_0xec2cb7(0x2ab),_0xec2cb7(0x1e9)),await killBot();else{if(_0x504aaf[_0xec2cb7(0x2d0)]()[_0xec2cb7(0x222)](_0xec2cb7(0x1ab)))logHistory(_0xec2cb7(0x2ab),_0xebca77+_0xec2cb7(0x20b)),logHistory(_0xec2cb7(0x2ab),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x504aaf['toString']()[_0xec2cb7(0x222)](_0xec2cb7(0x1bc)))logHistory('error',_0xebca77+_0xec2cb7(0x1b5)+config[_0xec2cb7(0x200)]+_0xec2cb7(0x227)),logHistory(_0xec2cb7(0x2ab),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x504aaf[_0xec2cb7(0x2d0)]()[_0xec2cb7(0x222)](_0xec2cb7(0x1d6)))logHistory('error',_0xebca77+'\x20|\x20'+config[_0xec2cb7(0x200)]+'\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x504aaf[_0xec2cb7(0x2d0)]()['includes']('AuthenticationError'))logHistory(_0xec2cb7(0x2ab),_0xebca77+_0xec2cb7(0x1b5)+config[_0xec2cb7(0x200)]+_0xec2cb7(0x1d7)),logHistory('error',_0xec2cb7(0x1e9)),await killBot();else _0x504aaf[_0xec2cb7(0x2d0)]()[_0xec2cb7(0x222)](_0xec2cb7(0x251))?logHistory(_0xec2cb7(0x2ab),_0xebca77+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x295ac7):(logger[_0xec2cb7(0x247)](_0xebca77+'\x20|\x20Error\x20details:\x20',_0x504aaf),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}function formatResult(_0x2c0776,_0x220ec9){return parseFloat(_0x2c0776['toFixed'](_0x220ec9));}function formatResultTruncate(_0x18811d,_0xcb4014){const _0x40be18=_0x5415c1;let _0xfa6ec8=formatResultString(_0x18811d,0xa),_0x4f3402=_0xfa6ec8[_0x40be18(0x29d)]('.');return _0x4f3402!=-0x1&&(_0xfa6ec8=_0xfa6ec8[_0x40be18(0x272)](0x0,_0x4f3402+_0xcb4014+0x1)),Number(_0xfa6ec8);}function formatResultString(_0x4f27a1,_0x5d71d8){const _0x4f7eee=_0x5415c1;let _0x313f9d;if(!(''+_0x4f27a1)['includes']('e'))_0x313f9d=+(Math['round'](_0x4f27a1+'e+'+_0x5d71d8)+'e-'+_0x5d71d8);else{let _0x5bc6fc=(''+_0x4f27a1)['split']('e'),_0x345185='';+_0x5bc6fc[0x1]+_0x5d71d8>0x0&&(_0x345185='+'),_0x313f9d=+(Math[_0x4f7eee(0x2e2)](+_0x5bc6fc[0x0]+'e'+_0x345185+(+_0x5bc6fc[0x1]+_0x5d71d8))+'e-'+_0x5d71d8);}return Number(_0x313f9d)[_0x4f7eee(0x254)](_0x5d71d8);}function getServerTime(){const _0x3cb4c7=_0x5415c1,_0x130289=new Date();return _0x130289[_0x3cb4c7(0x280)]()+'/'+(_0x130289[_0x3cb4c7(0x255)]()+0x1)[_0x3cb4c7(0x2d0)]()['padStart'](0x2,'0')+'/'+_0x130289['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x130289[_0x3cb4c7(0x1ed)]()[_0x3cb4c7(0x2d0)]()[_0x3cb4c7(0x2b0)](0x2,'0')+':'+_0x130289[_0x3cb4c7(0x2d3)]()[_0x3cb4c7(0x2d0)]()[_0x3cb4c7(0x2b0)](0x2,'0')+':'+_0x130289[_0x3cb4c7(0x1b9)]()[_0x3cb4c7(0x2d0)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x99ff5b=_0x5415c1,_0x23f3a3=shiftedTime();return _0x23f3a3[_0x99ff5b(0x280)]()+'/'+(_0x23f3a3[_0x99ff5b(0x255)]()+0x1)[_0x99ff5b(0x2d0)]()['padStart'](0x2,'0')+'/'+_0x23f3a3[_0x99ff5b(0x192)]()[_0x99ff5b(0x2d0)]()[_0x99ff5b(0x2b0)](0x2,'0')+'\x20'+_0x23f3a3[_0x99ff5b(0x1ed)]()['toString']()[_0x99ff5b(0x2b0)](0x2,'0')+':'+_0x23f3a3[_0x99ff5b(0x2d3)]()[_0x99ff5b(0x2d0)]()[_0x99ff5b(0x2b0)](0x2,'0')+':'+_0x23f3a3[_0x99ff5b(0x1b9)]()['toString']()[_0x99ff5b(0x2b0)](0x2,'0');}function getDate(){const _0x1e61c3=_0x5415c1,_0x1c51ba=shiftedTime();return _0x1c51ba[_0x1e61c3(0x280)]()+'/'+(_0x1c51ba[_0x1e61c3(0x255)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1c51ba[_0x1e61c3(0x192)]()[_0x1e61c3(0x2d0)]()[_0x1e61c3(0x2b0)](0x2,'0');}function getHour(){const _0x10c330=_0x5415c1,_0x37bcf2=shiftedTime();return _0x37bcf2[_0x10c330(0x1ed)]()['toString']()[_0x10c330(0x2b0)](0x2,'0');}function sleep(_0x16d3c2){return new Promise(_0x28ef0a=>setTimeout(_0x28ef0a,_0x16d3c2));}function shiftedTime(){const _0x3accaa=_0x5415c1,_0x4186ff=new Date();let _0x3f6b5c=_0x4186ff;if(config&&config[_0x3accaa(0x1dc)]!==0x0)_0x3f6b5c=fns[_0x3accaa(0x237)](_0x4186ff,{'hours':config[_0x3accaa(0x1dc)]});return _0x3f6b5c;}function timer(_0x2c36c3){const _0x4d89c2=_0x5415c1,_0x557083=new Date();!lasttime?console[_0x4d89c2(0x210)](_0x4d89c2(0x23d),_0x2c36c3,_0x557083):console[_0x4d89c2(0x210)](_0x4d89c2(0x23d),_0x2c36c3,(_0x557083-lasttime)/0x3e8),lasttime=_0x557083;}