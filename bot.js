const _0x44b8d7=_0x3362;(function(_0x1c9cc0,_0x3b8f55){const _0x36ac3f=_0x3362,_0x237953=_0x1c9cc0();while(!![]){try{const _0x209d7d=-parseInt(_0x36ac3f(0x188))/0x1*(-parseInt(_0x36ac3f(0x225))/0x2)+-parseInt(_0x36ac3f(0x230))/0x3*(-parseInt(_0x36ac3f(0x1ec))/0x4)+-parseInt(_0x36ac3f(0x1d5))/0x5*(-parseInt(_0x36ac3f(0x187))/0x6)+-parseInt(_0x36ac3f(0x1d1))/0x7*(parseInt(_0x36ac3f(0x1f5))/0x8)+parseInt(_0x36ac3f(0x1a3))/0x9+-parseInt(_0x36ac3f(0x1a5))/0xa*(-parseInt(_0x36ac3f(0x297))/0xb)+-parseInt(_0x36ac3f(0x217))/0xc;if(_0x209d7d===_0x3b8f55)break;else _0x237953['push'](_0x237953['shift']());}catch(_0x329fb4){_0x237953['push'](_0x237953['shift']());}}}(_0x24d9,0xaa462));const _0x5c98bc=function(){let _0x57b358=!![];return function(_0x147ac3,_0x30bb90){const _0x4007ef=_0x57b358?function(){const _0x18e4ec=_0x3362;if(_0x30bb90){const _0x2770e5=_0x30bb90[_0x18e4ec(0x21c)](_0x147ac3,arguments);return _0x30bb90=null,_0x2770e5;}}:function(){};return _0x57b358=![],_0x4007ef;};}(),_0x481218=_0x5c98bc(this,function(){const _0x1a7ab0=_0x3362;return _0x481218[_0x1a7ab0(0x216)]()[_0x1a7ab0(0x194)]('(((.+)+)+)+$')[_0x1a7ab0(0x216)]()[_0x1a7ab0(0x212)](_0x481218)[_0x1a7ab0(0x194)](_0x1a7ab0(0x1c8));});_0x481218();'use strict';const ccxt=require(_0x44b8d7(0x24e))[_0x44b8d7(0x185)],low=require(_0x44b8d7(0x18a)),FileSync=require(_0x44b8d7(0x283)),fs=require('fs'),fns=require(_0x44b8d7(0x198)),Crypt=require(_0x44b8d7(0x1f7))[_0x44b8d7(0x146)],util=require('util');let exchange;global[_0x44b8d7(0x273)]={},global[_0x44b8d7(0x285)]={};const exceptions=[_0x44b8d7(0x2a4),_0x44b8d7(0x2a7),'HOT/EUR',_0x44b8d7(0x1f3),_0x44b8d7(0x248),_0x44b8d7(0x1fc)];let debugLoggingScreen=![],config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x44b8d7(0x159)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x44b8d7(0x16a)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x44b8d7(0x155))['version'],botID=process['argv'][0x2]||_0x44b8d7(0x1ba),pattern=/^[0-9]{3}$/;!pattern[_0x44b8d7(0x284)](botID)&&(console[_0x44b8d7(0x1ed)]('Error:\x20Invalid\x20argument\x20'+botID+_0x44b8d7(0x147)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x44b8d7(0x199)+userID+'/':_0x44b8d7(0x199),logspath=userID?_0x44b8d7(0x19a)+userID+'/':_0x44b8d7(0x19a),loggerfile=fs[_0x44b8d7(0x184)](logspath+_0x44b8d7(0x1a0),{'flags':'a'});!fs[_0x44b8d7(0x22f)](configpath)&&fs[_0x44b8d7(0x29f)](configpath);!fs[_0x44b8d7(0x22f)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x44b8d7(0x20c)+botID+'-config.json',logfile=configpath+_0x44b8d7(0x20c)+botID+_0x44b8d7(0x235),performancefile=configpath+_0x44b8d7(0x20c)+botID+_0x44b8d7(0x250),coinresultsfile=configpath+'bot-'+botID+_0x44b8d7(0x28a),settingsfile=configpath+_0x44b8d7(0x18c),securefile=configpath+_0x44b8d7(0x288),configbackuppath=configpath+_0x44b8d7(0x192),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x44b8d7(0x1e5)]({'data':[],'version':serverversion})[_0x44b8d7(0x271)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x44b8d7(0x1e5)]({'bot':[],'version':serverversion})[_0x44b8d7(0x271)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x44b8d7(0x1e5)]({'coins':[],'version':serverversion})[_0x44b8d7(0x271)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x44b8d7(0x289),'rsaStandard':_0x44b8d7(0x20e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x596392=>{const _0x863e60=_0x44b8d7;console[_0x863e60(0x1ed)](_0x596392);},'simple':_0x4be401=>{const _0x4ff3a7=_0x44b8d7;console[_0x4ff3a7(0x1ed)](_0x4be401),loggerfile[_0x4ff3a7(0x271)](util['format'](_0x4be401)+'\x0a');},'full':async(_0x332129,_0xbd8b0d='')=>{const _0x12b0ee=_0x44b8d7;let _0x456b64;if(config[_0x12b0ee(0x1b8)])_0x456b64=getTimeStamp()+':\x20'+config['botname']+_0x12b0ee(0x1da)+_0x332129;else _0x456b64=getTimeStamp()+_0x12b0ee(0x296)+botID+'\x20>\x20'+_0x332129;console[_0x12b0ee(0x1ed)](_0x456b64),loggerfile[_0x12b0ee(0x271)](util[_0x12b0ee(0x201)](_0x456b64)+'\x0a'),_0xbd8b0d&&(console[_0x12b0ee(0x1ed)](_0xbd8b0d),loggerfile[_0x12b0ee(0x271)](util[_0x12b0ee(0x201)](_0xbd8b0d)+'\x0a'));},'debug':async(_0xbad939,_0x1ea5bc='')=>{const _0x70b14f=_0x44b8d7;let _0x422b31;if(config['showname'])_0x422b31=getTimeStamp()+':\x20'+config[_0x70b14f(0x1d4)]+_0x70b14f(0x262)+_0xbad939;else _0x422b31=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0xbad939;if(debugLoggingScreen)console[_0x70b14f(0x1ed)](_0x422b31);loggerfile['write'](util[_0x70b14f(0x201)](_0x422b31)+'\x0a');if(_0x1ea5bc){if(debugLoggingScreen)console[_0x70b14f(0x1ed)](_0x1ea5bc);loggerfile[_0x70b14f(0x271)](util[_0x70b14f(0x201)](_0x1ea5bc)+'\x0a');}}};process['on'](_0x44b8d7(0x234),function(_0x2d65e6){logger['simple'](_0x2d65e6);});settings[_0x44b8d7(0x1fe)]!=config[_0x44b8d7(0x1fe)]&&updateTimeshift(settings[_0x44b8d7(0x1fe)]);process[_0x44b8d7(0x14b)]({'started':_0x44b8d7(0x263)},_0x3985bb=>{}),initializeProcessListeners();function proxyEmit(_0x4f9492,_0x34ff01=null){const _0x4b69e9=_0x44b8d7;process[_0x4b69e9(0x14b)]({'function':_0x4f9492,'args':_0x34ff01},_0xd7e6a2=>{});}function initializeProcessListeners(){const _0x51a1b5=_0x44b8d7;process['on'](_0x51a1b5(0x21a),_0x5d0972=>{const _0x4dd9f0=_0x51a1b5;switch(Object[_0x4dd9f0(0x264)](_0x5d0972)[0x0]){case _0x4dd9f0(0x1fe):_0x5d0972[_0x4dd9f0(0x1fe)]!=undefined&&(settings[_0x4dd9f0(0x1fe)]=_0x5d0972['timeshift'],updateTimeshift(settings[_0x4dd9f0(0x1fe)]));break;case _0x4dd9f0(0x15b):switch(_0x5d0972['function']){case'initclient':initclient();break;case _0x4dd9f0(0x214):toggleBotMode();break;case _0x4dd9f0(0x1d7):emitHistory(_0x5d0972[_0x4dd9f0(0x24c)]);break;case _0x4dd9f0(0x1f4):deleteHistoryAlerts(_0x5d0972[_0x4dd9f0(0x24c)]);break;case _0x4dd9f0(0x148):getPortfolio(_0x5d0972['args']);break;case _0x4dd9f0(0x26b):storeConfiguration(_0x5d0972['args']);break;case _0x4dd9f0(0x16f):storeHeadless(_0x5d0972[_0x4dd9f0(0x24c)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x4dd9f0(0x2a5):placeOrder(_0x5d0972[_0x4dd9f0(0x24c)]);break;case _0x4dd9f0(0x1b0):cancelLoading();break;case _0x4dd9f0(0x276):showConfig();break;case _0x4dd9f0(0x1c1):sendPortfolioTelegram();break;}}});}reset();function _0x3362(_0x2e8b6a,_0x335efd){const _0x59dca5=_0x24d9();return _0x3362=function(_0x481218,_0x5c98bc){_0x481218=_0x481218-0x143;let _0x24d991=_0x59dca5[_0x481218];return _0x24d991;},_0x3362(_0x2e8b6a,_0x335efd);}async function reset(_0x22ddcd=null,_0x3f5d0c=![]){const _0x48bc79=_0x44b8d7;if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x3f5d0c)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0x48bc79(0x151)]!=''&&config['apiKey']!=_0x48bc79(0x178)){await initExchange();let _0x349050=![];_0x349050=await loadSymbols();if(_0x349050){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x22ddcd),exchangeStopped=![];if(lastOrders[_0x48bc79(0x227)]==0x0&&allOpenOrders[_0x48bc79(0x227)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x512a59=_0x44b8d7;exchangeStopped=!![],await exchange[_0x512a59(0x274)]();}async function reloadExchange(){const _0x3fc44d=_0x44b8d7;logger[_0x3fc44d(0x24b)](_0x3fc44d(0x241));while(lockOrders!=ORDERS[_0x3fc44d(0x16a)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x3fc44d(0x1a4)),exchange&&await stopExchange(),reset(null,!![]);}function _0x24d9(){const _0x4c5bb0=['USD','type','milliseconds','order','watchTrades','orderId','storeConfiguration','split','BUSD','apiSecret','restart','find','write','bot','ticker','close','netoffset','showConfig','clientOrderId','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','getPortfolio()','limit-low','\x20order:\x20','LOCKED','getCoins()','************','2.3.5','orderstatus','Market','loading-canceled','lowdb/adapters/FileSync','test','change','coin','portfolio','bb-secure.json','sha256','-results.json','string','round','coins','sortBy','getFiat()','exchanges','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','<b>Bot\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','recreateCoinResults()',':\x20Bot\x20','66ubmrXk','sells','getFullYear','includes','abs','\x20API\x20key\x20is\x20invalid','createOrder','Unknown\x20error\x20occured','mkdirSync','exchange','getDate','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','getCoinNumber()','DAI/','placeOrder','fetchBalance','HOT/BTC','\x20|\x20lock\x20orders:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','Crypt',',\x20must\x20be\x20a\x203\x20digit\x20number','getPortfolio','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','USDT','send','2\x20-\x20Orders\x20unlocked','limits','offset','kill','Pausing\x20for\x20','apiKey','add','slice','\x20change','./version.json','initial','Net\x20','getHours','freeze','side','function','%\x20\x0a','filter','\x20minutes\x20-\x20','sell','recreate','openOrders','assign','3\x20-\x20handling\x20FILLED\x20order:\x20','change24h','shift','.json','2\x20-\x20FILLED\x20known\x20order:\x20','liquidity','buys','UNLOCKED','enabled','UNLOCKING','limit-high','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','storeHeadless','market','Executed\x20','RequestTimeout','fromCodePoint','amount','starting-balance-','reverse','ORDERS.UNLOCKING','***','data','getMonth','yyyy/MM/dd','threshold','2.6.0','symbols','headless','BTC','1\x20-\x20Handle\x20open\x20orders','forEach','min','createWriteStream','pro','isEqual','2502186AcJrMW','1nOyExq','indexOf','lowdb','Net\x20effect','bb-settings.json','ETH','startnumber','join','no\x20open\x20orders','full','/backup/','event','search','entries','toUpperCase','BNB/','date-fns','./config/','./logs/','Net\x20effect\x20(','fee','delta','\x20not\x20responding','configuration','/output-000.log','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','exec','2335851desBut','Executing\x20exchange\x20reload','1388020gbbnDu','ORDERS.UNLOCKED','cooldown','progress','cancelOrders()','\x20API\x20blocked\x20(DDoS\x20protection)','2.5.0','ordertype','fees','status','\x20minutes','cancelLoading','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','startdate','balances','net-fiat','page','emojibuy','concat','showname','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','001','settings','Order\x20filled:\x20','substring','net-basecoin','total','balancing\x20resumed','sendPortfolioTelegram','canceled','timeout','remove','breakeven','API-key\x20format\x20invalid','fetchTicker','(((.+)+)+)+$','usd','push','/EUR','getMinutes','Limit\x20(high-margin)','eur','getSeconds','fetchClosedOrders','7pafCqT','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','decrypt','botname','5OnxrNR','changes','emitHistory','<b>','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','\x20>\x20','fiat','filled','loadSymbols()','replace','\x20not\x20available','padStart','customId','buy','parseISO','1\x20-\x20Unlock\x20orders','defaults','sort','\x20|\x20','get','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','set','No\x20more\x20open\x20orders\x20-\x20','24qDBIEL','log','ongoing','leftTxt','limit','datetime','open','XEM/BUSD','deleteHistoryAlerts','4400936lJJjKM','fetchOpenOrders','hybrid-crypto-js','toFixed','map','watchOrders','starting-balances','YOYOW/','\x20value','timeshift','balancing\x20resumes\x20when\x20cooldown\x20ends','event-history','format','warning','Bot\x20','EUR','price','ORDERS.LOCKED','closed','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','startprice','bid','1\x20-\x20FILLED:\x20','bot-','symbol','RSA-OAEP','splice','value','basecoin','constructor','cloneDeep','toggleBotMode','error','toString','20171952oTMUoY','performance','AuthenticationError','message','\x20API\x20secret\x20is\x20invalid','apply','remainingSymbols','placeOrder()','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','differenceInSeconds','target','stringify','cancel','excluded','705478lstMnQ','botID','length','\x20:\x20','toLowerCase','distribution','version','currency','rightTxt','1\x20-\x20Validate\x20orders:\x20','existsSync','533217aRHmNr','valid','OrderNotFound','\x20orders\x20in\x20less\x20than\x20','uncaughtException','-events.json','logs','BNB','timer:','realized','cancelOrder','has','date','Limit\x20(low-margin)','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','final','Order(s)\x20validated\x20-\x20','Initiating\x20exchange\x20reload','InvalidNonce','max','Manual\x20balancing\x20required','random','Invalid\x20quantity','DDoSProtection','NANO/','time','fetchTickers','debug','args','getOpenOrders()','ccxt','2\x20-\x20Validate\x20orders:\x20','-performance.json','parse','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','yyyy-MM-dd\x27T\x27HH:mm:ss','emojisell','writeFile','InsufficientFunds','getTime','cost','number','trade','none','last','recovery','\x20|\x20Error\x20details:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','success','privateKey','\x20>\x20[DEBUG]\x20','running','keys'];_0x24d9=function(){return _0x4c5bb0;};return _0x24d9();}async function initExchange(_0x391843=config[_0x44b8d7(0x2a0)],_0x2ee5a9=config['apiKey'],_0x5f162c=config['apiSecret']){const _0x56e798=_0x44b8d7;exchange&&await stopExchange();!supportedExchanges()[_0x56e798(0x29a)](_0x391843)&&(logger['full'](_0x56e798(0x149)+_0x391843+'\x20exchange'),killBot());const _0x2f3ef1=ccxt[_0x391843[_0x56e798(0x229)]()];exchange=new _0x2f3ef1({'apiKey':_0x2ee5a9,'secret':_0x5f162c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'adjustForTimeDifference':!![]}});}function setStableCoins(){const _0x851ad9=_0x44b8d7;let _0x29f32d=config['basecoin']==_0x851ad9(0x18d)?_0x851ad9(0x18d):'BTC',_0xbd3123=!allSymbols[_0x851ad9(0x29a)](_0x29f32d+'/USD')?'USDT':_0x851ad9(0x265),_0xc82c5d=!allSymbols[_0x851ad9(0x29a)](_0x29f32d+_0x851ad9(0x1cb))?_0xbd3123:_0x851ad9(0x204);stablecoins={'eur':{'coin':''+_0x29f32d+_0xc82c5d,'symbol':_0x29f32d+'/'+_0xc82c5d},'usd':{'coin':''+_0x29f32d+_0xbd3123,'symbol':_0x29f32d+'/'+_0xbd3123}};}async function initwsCcxt(_0x258406){const _0xe2c15f=_0x44b8d7;_0x258406==null&&(_0x258406=[],currentCoins[_0xe2c15f(0x182)](_0x590331=>{const _0x568363=_0xe2c15f;if(_0x590331[_0x568363(0x286)]!=config[_0x568363(0x211)])_0x258406[_0x568363(0x1ca)](_0x590331['symbol']);}));if(!_0x258406[_0xe2c15f(0x29a)](stablecoins[_0xe2c15f(0x1ce)][_0xe2c15f(0x20d)]))_0x258406[_0xe2c15f(0x1ca)](stablecoins[_0xe2c15f(0x1ce)][_0xe2c15f(0x20d)]);if(!_0x258406[_0xe2c15f(0x29a)](stablecoins[_0xe2c15f(0x1c9)][_0xe2c15f(0x20d)]))_0x258406[_0xe2c15f(0x1ca)](stablecoins[_0xe2c15f(0x1c9)][_0xe2c15f(0x20d)]);if(!_0x258406['includes'](_0xe2c15f(0x197)+config[_0xe2c15f(0x211)]))_0x258406['push'](_0xe2c15f(0x197)+config[_0xe2c15f(0x211)]);loadCoins(_0x258406);const _0x5511d0=async _0x52f69f=>{const _0x432dba=_0xe2c15f,_0x4190fe=await exchange[_0x432dba(0x1c7)](_0x52f69f);global['ticker'][noslash(_0x4190fe['symbol'])]=_0x4190fe['last'];while(!![]){if(!botPaused)try{const _0x34fcf9=await exchange[_0x432dba(0x269)](_0x52f69f);global[_0x432dba(0x273)][noslash(_0x34fcf9[0x0]['symbol'])]=_0x34fcf9[0x0]['price'],await sleep(0x3e8);}catch(_0x3ef37e){if(!exchangeStopped)await handleError(_0x3ef37e,'watchTrades',_0x52f69f);}else await sleep(0x3e8);}},_0x81859=async _0x52b4b4=>{const _0x3a20d3=_0xe2c15f;while(!![]){if(!botPaused)try{const _0x2d0a5b=await exchange[_0x3a20d3(0x1c7)](_0x52b4b4);global['change'][_0x2d0a5b['symbol']]=_0x2d0a5b['percentage'],await sleep(0x2710);}catch(_0xc38f8f){if(!exchangeStopped)await handleError(_0xc38f8f,_0x3a20d3(0x24a),_0x52b4b4);}else await sleep(0x3e8);}},_0x552336=async()=>{const _0x57d781=_0xe2c15f;while(!![]){if(!botPaused)try{const _0x448809=await exchange['watchOrders']();_0x448809[_0x57d781(0x182)](_0xd6757=>{updateNumberCoinsCcxt(_0xd6757);});}catch(_0x1b35bd){if(!exchangeStopped)await handleError(_0x1b35bd,_0x57d781(0x1fa));}else await sleep(0x3e8);}};_0x258406[_0xe2c15f(0x182)](async _0x4bdb18=>{_0x5511d0(_0x4bdb18),_0x81859(_0x4bdb18);}),!wsEventsSet&&(wsEventsSet=!![],_0x552336());}async function loadSymbols(){const _0x15203e=_0x44b8d7;if(allSymbols)return!![];let _0x58ad9b=![];try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x15203e(0x17e)]['filter'](_0x42f030=>{const _0x4c6304=_0x15203e;let _0x563fa7=![];return exceptions[_0x4c6304(0x182)](_0x41d9c7=>{const _0x3ca872=_0x4c6304;if(_0x42f030[_0x3ca872(0x29a)](_0x41d9c7))_0x563fa7=!![];}),!_0x563fa7;}),_0x58ad9b=!![];}catch(_0x4aefd9){_0x58ad9b=![],handleError(_0x4aefd9,_0x15203e(0x1dd));}return _0x58ad9b;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x586e39=_0x44b8d7;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x586e39(0x290),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x586e39(0x1b3),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x194f7c=getNormalizedPerformance();emitPerformance(_0x194f7c),await getStartingBalances(_0x194f7c);}async function toggleBotMode(){const _0x34faae=_0x44b8d7;let _0x276601=dbConfig[_0x34faae(0x1e8)](_0x34faae(0x272))[_0x34faae(0x270)]({'botID':botID})[_0x34faae(0x210)]();if(_0x276601){const _0x2f08b1=!_0x276601[_0x34faae(0x17f)];dbConfig[_0x34faae(0x1e8)](_0x34faae(0x272))[_0x34faae(0x270)]({'botID':botID})['assign']({'headless':_0x2f08b1})[_0x34faae(0x271)](),config[_0x34faae(0x17f)]=_0x2f08b1,proxyEmit(_0x34faae(0x19f),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x8a4de6=>{});}async function loadCoins(_0x587842){const _0x329f08=_0x44b8d7;let _0x215855,_0x1d838b=0x0;loading[_0x329f08(0x21d)]=[];let _0x26fb4b=0x0;_0x587842[_0x329f08(0x182)](_0x56e0da=>{const _0x1bb16a=_0x329f08;loading[_0x1bb16a(0x21d)]['push'](_0x56e0da);}),loadingCanceled=![];let _0x23f697=![];while(_0x215855!=_0x587842[_0x329f08(0x227)]){_0x215855=0x0,_0x587842[_0x329f08(0x182)](_0x34a57d=>{const _0x11d743=_0x329f08;global['ticker'][noslash(_0x34a57d)]&&(loading[_0x11d743(0x21d)]=loading['remainingSymbols']['filter'](_0x31fa68=>_0x31fa68!=_0x34a57d),_0x215855++);}),loading[_0x329f08(0x1a8)]=Math[_0x329f08(0x28c)](_0x215855/_0x587842[_0x329f08(0x227)]*0x64);loading['progress']!=0x64&&(_0x26fb4b>0x1e*0x5&&(loading[_0x329f08(0x1c3)]=!![],emitLoadingProgress()),_0x26fb4b>0x78*0x5&&!_0x23f697&&(loading[_0x329f08(0x223)]=!![],emitLoadingProgress(),_0x23f697=!![],logHistory(_0x329f08(0x215),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x329f08(0x21d)][_0x329f08(0x18f)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x329f08(0x215),_0x329f08(0x150)+loadCoinsRetryInterval/0xea60+_0x329f08(0x2a2)),pidCoinReloading=setTimeout(()=>{const _0x5bd70f=_0x329f08;process[_0x5bd70f(0x14b)]({'stop':_0x5bd70f(0x26f)},_0x10a268=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x329f08(0x223)]=!![],emitLoadingProgress();break;}else _0x215855!=_0x1d838b&&(_0x1d838b=_0x215855,emitLoadingProgress()),_0x26fb4b++,await sleep(0xc8);}_0x215855==_0x587842[_0x329f08(0x227)]&&(coinsLoaded=!![],_0x23f697&&logHistory('success',_0x329f08(0x1b9)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3975d7=_0x44b8d7;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x3975d7(0x282)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0xc92d4c=_0x44b8d7;let _0xd5f002=0x0,_0x2d1509=0x0;try{_0xd5f002=global[_0xc92d4c(0x273)][stablecoins['eur'][_0xc92d4c(0x286)]],_0x2d1509=global[_0xc92d4c(0x273)][stablecoins['usd']['coin']];}catch(_0x50c82c){await handleError(_0x50c82c,_0xc92d4c(0x28f));}return{'eur':Number(_0xd5f002),'usd':Number(_0x2d1509)};}function capitalize(_0x3aad83){const _0x3e9941=_0x44b8d7;return _0x3aad83[_0x3e9941(0x1bd)](0x0,0x1)[_0x3e9941(0x196)]()+_0x3aad83[_0x3e9941(0x1bd)](0x1);}function supportedExchanges(){const _0x44d5f6=_0x44b8d7,_0x190a84=['ws',_0x44d5f6(0x24a),_0x44d5f6(0x1c7),_0x44d5f6(0x269),_0x44d5f6(0x1fa),_0x44d5f6(0x23a),_0x44d5f6(0x29d),_0x44d5f6(0x1f6),_0x44d5f6(0x1d0),_0x44d5f6(0x2a6)];let _0x207e2c=[];const _0x38f886=ccxt[_0x44d5f6(0x290)][_0x44d5f6(0x1f9)](_0x140d33=>new ccxt[_0x140d33]())[_0x44d5f6(0x15d)](_0x4d293e=>_0x4d293e[_0x44d5f6(0x23b)]['ws']);return _0x38f886['forEach'](_0x771d77=>{const _0x2984d1=_0x44d5f6;let _0x4d17a7=0x0;_0x190a84[_0x2984d1(0x182)](_0x2be3a8=>{const _0x38fc2b=_0x2984d1;_0x2be3a8 in _0x771d77[_0x38fc2b(0x23b)]&&_0x771d77[_0x38fc2b(0x23b)][_0x2be3a8]&&_0x4d17a7++;}),_0x4d17a7==_0x190a84[_0x2984d1(0x227)]&&_0x207e2c['push'](capitalize(_0x771d77['id']));}),_0x207e2c;}function setStartDatePerformance(){const _0xd7086b=_0x44b8d7;if(config&&config[_0xd7086b(0x168)][0x0]['changes']['length']!=0x0){const _0x4153ed=config['liquidity'][0x0][_0xd7086b(0x1d6)];dbPerformance[_0xd7086b(0x1e8)](_0xd7086b(0x179))[_0xd7086b(0x270)]({'date':config['startdate']})['assign']({'coins':_0x4153ed})[_0xd7086b(0x271)]();}}async function recreateCoinResults(){const _0x27b4f5=_0x44b8d7;let _0x493ae1,_0x51f3c6=[];try{const _0x19302e=fns[_0x27b4f5(0x201)](fns[_0x27b4f5(0x1e3)](config[_0x27b4f5(0x1b2)][_0x27b4f5(0x1de)](/\//g,'-')),_0x27b4f5(0x253));for(const _0x1ccf4b of currentCoins){if(_0x1ccf4b[_0x27b4f5(0x286)]!=config[_0x27b4f5(0x211)]){let _0x389873=0x0,_0x569b1c,_0x115e56;_0x493ae1=await getAllEventOrders(_0x1ccf4b[_0x27b4f5(0x20d)]);if(_0x493ae1[_0x27b4f5(0x227)]>0x0)_0x493ae1[_0x27b4f5(0x182)](_0x255254=>{const _0x218064=_0x27b4f5,_0x4868e0=_0x1ccf4b[_0x218064(0x20d)][_0x218064(0x29a)](config[_0x218064(0x211)]+'/');_0x51f3c6[_0x218064(0x1ca)]({'datetime':_0x255254['datetime'],'coin':_0x1ccf4b['coin'],'symbol':_0x1ccf4b[_0x218064(0x20d)],'side':_0x255254[_0x218064(0x15a)],'reverse':_0x4868e0,'amount':formatResult(_0x255254[_0x218064(0x1dc)],0x8),'filled':formatResult(_0x255254[_0x218064(0x1dc)],0x8),'price':formatResult(_0x255254[_0x218064(0x205)],0x8)}),_0x389873=_0x255254[_0x218064(0x15a)]==_0x218064(0x1e2)?_0x389873+_0x255254[_0x218064(0x1dc)]:_0x389873-_0x255254[_0x218064(0x1dc)];if(!_0x115e56)_0x115e56=_0x255254[_0x218064(0x205)];});_0x569b1c=_0x1ccf4b[_0x27b4f5(0x259)]-_0x389873;let _0x50ebdd;config[_0x27b4f5(0x168)][_0x27b4f5(0x182)](_0x38d8ee=>{const _0x2f9730=_0x27b4f5;!_0x50ebdd&&(_0x50ebdd=_0x38d8ee['changes']['find'](_0x5cd3a8=>_0x5cd3a8[_0x2f9730(0x286)]==_0x1ccf4b[_0x2f9730(0x286)]),_0x50ebdd&&(_0x569b1c=_0x50ebdd['number'],_0x115e56=_0x50ebdd[_0x2f9730(0x205)]));});let _0x27cc57=dbCoinResults[_0x27b4f5(0x1e8)]('coins')['find']({'coin':_0x1ccf4b[_0x27b4f5(0x286)]})[_0x27b4f5(0x210)]();_0x27cc57={'coin':_0x1ccf4b[_0x27b4f5(0x286)],'number':_0x569b1c,'breakeven':_0x115e56,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x27b4f5(0x1e8)](_0x27b4f5(0x28d))[_0x27b4f5(0x270)]({'coin':_0x1ccf4b['coin']})[_0x27b4f5(0x162)](_0x27cc57)[_0x27b4f5(0x271)]();}}_0x51f3c6[_0x27b4f5(0x1e6)]((_0x358092,_0x8ce7e5)=>_0x358092['datetime']>_0x8ce7e5[_0x27b4f5(0x1f1)]?0x1:_0x8ce7e5[_0x27b4f5(0x1f1)]>_0x358092[_0x27b4f5(0x1f1)]?-0x1:0x0);let _0x4000a2=0x0;for(let _0x59f1de of _0x51f3c6){await updateCoinResults(_0x59f1de,!![]);}}catch(_0x3c1c50){await handleError(_0x3c1c50,_0x27b4f5(0x295));}}async function getAllEventOrders(_0x27a28e){const _0x5a9b92=_0x44b8d7;let _0x580588=[],_0x34a5a4=dbLogs[_0x5a9b92(0x1e8)](_0x5a9b92(0x236))['filter'](_0x108c3c=>{const _0x50918a=_0x5a9b92,_0x1d6fd8=_0x108c3c[_0x50918a(0x193)][_0x50918a(0x229)]();return _0x1d6fd8[_0x50918a(0x29a)](_0x27a28e[_0x50918a(0x229)]())&&(_0x1d6fd8[_0x50918a(0x29a)]('market')&&_0x1d6fd8[_0x50918a(0x29a)](_0x50918a(0x268))||_0x1d6fd8[_0x50918a(0x29a)](_0x50918a(0x1dc))&&_0x1d6fd8[_0x50918a(0x29a)](_0x50918a(0x268)));})[_0x5a9b92(0x28e)](_0x5a9b92(0x249))[_0x5a9b92(0x210)]();return _0x34a5a4[_0x5a9b92(0x182)](_0x37e58f=>{const _0x3382b1=_0x5a9b92,_0x4a9008=_0x37e58f[_0x3382b1(0x193)]['includes'](_0x3382b1(0x15f))?_0x3382b1(0x15f):'buy',_0x3c3a93=/#([0-9]|\.)+\s/i,_0x285fb0=Number(_0x3c3a93['exec'](_0x37e58f[_0x3382b1(0x193)])[0x0][_0x3382b1(0x153)](0x1)),_0x163912=/@([0-9]|\.)+$/i,_0x46267d=Number(_0x163912[_0x3382b1(0x1a2)](_0x37e58f['event'])[0x0][_0x3382b1(0x153)](0x1));_0x580588[_0x3382b1(0x1ca)]({'datetime':_0x37e58f[_0x3382b1(0x249)],'coin':symbolToCoin(_0x27a28e),'symbol':_0x27a28e,'side':_0x4a9008,'amount':_0x285fb0,'filled':_0x285fb0,'price':_0x46267d});}),_0x580588;}async function getAllOrders(_0x35a8b3,_0x541f78){const _0x4804ba=_0x44b8d7;let _0x28d4e2=[];while(_0x541f78<exchange[_0x4804ba(0x267)]()){const _0x4e243c=0x1f4,_0x20a0b5=await exchange[_0x4804ba(0x1d0)](_0x35a8b3,_0x541f78,_0x4e243c);if(_0x20a0b5[_0x4804ba(0x227)])_0x541f78=_0x20a0b5[_0x20a0b5[_0x4804ba(0x227)]-0x1]['timestamp']+0x1,_0x28d4e2=_0x28d4e2[_0x4804ba(0x1b7)](_0x20a0b5);else break;}return _0x28d4e2;}async function validate24hChanges(){const _0xc06e3=_0x44b8d7;for(const _0x4819c8 of currentCoins){if(_0x4819c8[_0xc06e3(0x286)]!=config[_0xc06e3(0x211)]){let _0x5924f6;_0x4819c8[_0xc06e3(0x176)]?_0x5924f6=formatResult((0x1/(global[_0xc06e3(0x285)][noslash(_0x4819c8[_0xc06e3(0x20d)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5924f6=global[_0xc06e3(0x285)][noslash(_0x4819c8[_0xc06e3(0x20d)])],_0x5924f6<config[_0xc06e3(0x164)]&&(logHistory(_0xc06e3(0x215),_0x4819c8[_0xc06e3(0x286)]+_0xc06e3(0x145)+_0x5924f6+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0xc06e3(0x215),_0xc06e3(0x23e)),await storeHeadless({'headless':![]}));}}}function isNewerVersion(_0x2f96ad,_0x3f73bd){const _0x37ceed=_0x44b8d7,_0x1141e4=_0x3f73bd[_0x37ceed(0x26c)]('.'),_0x229d83=_0x2f96ad[_0x37ceed(0x26c)]('.');for(var _0x171fe5=0x0;_0x171fe5<_0x229d83[_0x37ceed(0x227)];_0x171fe5++){const _0x18a399=~~_0x229d83[_0x171fe5],_0x3aa072=~~_0x1141e4[_0x171fe5];if(_0x18a399>_0x3aa072)return!![];if(_0x18a399<_0x3aa072)return![];}return![];}async function oneTimeMigration(){const _0x410996=_0x44b8d7;let _0x143903=dbLogs[_0x410996(0x1e8)](_0x410996(0x22b))[_0x410996(0x210)]();if(!isNewerVersion(_0x143903,'2.3.5')){dbLogs[_0x410996(0x1ea)](_0x410996(0x22b),'2.3.5')[_0x410996(0x271)]();let _0x156403=[];const _0x129178=dbLogs[_0x410996(0x1e8)](_0x410996(0x236))['value']();_0x129178[_0x410996(0x182)](_0x3687d5=>{const _0x5c6e96=_0x410996;_0x156403['push']({'time':_0x3687d5[_0x5c6e96(0x249)],'type':_0x3687d5[_0x5c6e96(0x266)],'event':_0x3687d5[_0x5c6e96(0x193)]});}),dbLogs[_0x410996(0x1e8)](_0x410996(0x236))['assign'](_0x156403)['write']();}let _0x375cb0=dbConfig[_0x410996(0x1e8)](_0x410996(0x22b))[_0x410996(0x210)]();if(!isNewerVersion(_0x375cb0,_0x410996(0x27f))){dbConfig[_0x410996(0x1ea)](_0x410996(0x22b),_0x410996(0x27f))['write']();let _0x5a089d=dbConfig[_0x410996(0x1e8)](_0x410996(0x272))[_0x410996(0x270)]({'botID':botID})[_0x410996(0x210)]();if(_0x5a089d){let _0x83f748=[];_0x5a089d[_0x410996(0x287)][_0x410996(0x182)](_0x392cb8=>{const _0x32b645=_0x410996;_0x83f748[_0x32b645(0x1ca)]({'coin':_0x392cb8[_0x32b645(0x286)],'number':_0x392cb8[_0x32b645(0x18e)],'price':_0x392cb8[_0x32b645(0x209)]}),delete _0x392cb8[_0x32b645(0x18e)],delete _0x392cb8[_0x32b645(0x209)];});if(_0x83f748[_0x410996(0x227)]!==0x0)fs[_0x410996(0x255)](configbackuppath+(_0x410996(0x175)+botID+_0x410996(0x166)),JSON[_0x410996(0x222)](_0x83f748,null,0x4),function(_0x4c3641){if(_0x4c3641){}});const _0xae6258=(_0x2811c9,_0xb1bf4a)=>{const _0xcac2c7=_0x410996;let _0xdbff57=[];_0xb1bf4a[_0xcac2c7(0x182)](_0x324843=>{const _0x532f03=_0xcac2c7,_0x584288=_0x2811c9[_0x532f03(0x270)](_0x697933=>_0x697933[_0x532f03(0x286)]==_0x324843[_0x532f03(0x286)]);if(!_0x584288)_0xdbff57[_0x532f03(0x1ca)](_0x324843);});let _0x179faa=[];return _0x2811c9[_0xcac2c7(0x182)](_0x371035=>{const _0x31622f=_0xcac2c7,_0x1203e1=_0xb1bf4a[_0x31622f(0x270)](_0x131637=>_0x131637[_0x31622f(0x286)]==_0x371035[_0x31622f(0x286)]);if(!_0x1203e1||_0x1203e1['number']==0x0&&_0x371035[_0x31622f(0x259)]!=0x0)_0x179faa[_0x31622f(0x1ca)](_0x371035);}),{'missingDay1':_0xdbff57,'notInDay2':_0x179faa};},_0x40f4c4=dbPerformance[_0x410996(0x1e8)](_0x410996(0x179))['cloneDeep']()['value']();if(_0x40f4c4['length']>0x1){const {missingDay1:_0x400242,notInDay2:_0xdafd63}=_0xae6258(_0x83f748,_0x40f4c4[0x1]['coins']);_0x83f748=[..._0x83f748,..._0x400242],_0xdafd63[_0x410996(0x182)](_0x37b81a=>{const _0x540e56=_0x410996;let _0x5918bb=_0x83f748['findIndex'](_0x40b6e0=>_0x40b6e0[_0x540e56(0x286)]==_0x37b81a[_0x540e56(0x286)]);_0x5918bb!=-0x1&&_0x83f748['splice'](_0x5918bb,0x1);});}_0x83f748[_0x410996(0x1e6)]((_0x585906,_0x1a0902)=>_0x585906['coin']>_0x1a0902[_0x410996(0x286)]?0x1:_0x1a0902['coin']>_0x585906[_0x410996(0x286)]?-0x1:0x0);let _0xfd1e8f=[{'date':_0x5a089d[_0x410996(0x1b2)],'changes':_0x83f748}];_0x40f4c4[_0x410996(0x227)]>0x2&&_0x40f4c4[_0x410996(0x182)]((_0x46ce2b,_0x1af438)=>{const _0x549f76=_0x410996;if(_0x1af438>0x0&&_0x1af438<_0x40f4c4['length']-0x1){const {missingDay1:_0x11d2b4,notInDay2:_0x40056b}=_0xae6258(_0x40f4c4[_0x1af438][_0x549f76(0x28d)],_0x40f4c4[_0x1af438+0x1]['coins']);_0x83f748=[],(_0x11d2b4[_0x549f76(0x227)]!=0x0||_0x40056b[_0x549f76(0x227)]!=0x0)&&(_0x11d2b4[_0x549f76(0x227)]!=0x0&&_0x83f748[_0x549f76(0x1ca)](..._0x11d2b4),_0x40056b['length']!=0x0&&(_0x40056b['forEach'](_0x5948f6=>{const _0x3226a6=_0x549f76;_0x5948f6[_0x3226a6(0x259)]=-_0x5948f6[_0x3226a6(0x259)];}),_0x83f748['push'](..._0x40056b)),_0x83f748[_0x549f76(0x1e6)]((_0x1d3857,_0x1ab823)=>_0x1d3857[_0x549f76(0x286)]>_0x1ab823['coin']?0x1:_0x1ab823[_0x549f76(0x286)]>_0x1d3857['coin']?-0x1:0x0),_0xfd1e8f[_0x549f76(0x1ca)]({'date':_0x40f4c4[_0x1af438+0x1][_0x549f76(0x23c)],'changes':_0x83f748}));}}),dbConfig[_0x410996(0x1e8)](_0x410996(0x272))[_0x410996(0x270)]({'botID':botID})['assign']({..._0x5a089d,'liquidity':_0xfd1e8f})[_0x410996(0x271)]();}}_0x375cb0=dbConfig[_0x410996(0x1e8)](_0x410996(0x22b))[_0x410996(0x210)]();if(!isNewerVersion(_0x375cb0,_0x410996(0x17d))){dbConfig[_0x410996(0x1ea)](_0x410996(0x22b),_0x410996(0x17d))[_0x410996(0x271)]();let _0x49b0e4=dbConfig[_0x410996(0x1e8)](_0x410996(0x272))['find']({'botID':botID})[_0x410996(0x210)]();if(_0x49b0e4){const _0x2f4703=_0x49b0e4[_0x410996(0x2a0)],_0x5631a0=_0x2f4703?capitalize(_0x2f4703):'Binance';dbConfig[_0x410996(0x1e8)](_0x410996(0x272))[_0x410996(0x270)]({'botID':botID})[_0x410996(0x162)]({'exchange':_0x5631a0})[_0x410996(0x271)]();}}config=getConfiguration(botID);let _0x3384f7=dbPerformance[_0x410996(0x1e8)](_0x410996(0x22b))[_0x410996(0x210)]();!isNewerVersion(_0x3384f7,_0x410996(0x27f))&&(dbPerformance[_0x410996(0x1ea)](_0x410996(0x22b),_0x410996(0x27f))[_0x410996(0x271)](),setStartDatePerformance());let _0x2b8b74=dbCoinResults[_0x410996(0x1e8)]('version')[_0x410996(0x210)]();if(!isNewerVersion(_0x2b8b74,'2.5.0')){dbCoinResults[_0x410996(0x1ea)](_0x410996(0x22b),_0x410996(0x1ab))['write']();let _0x38dbb8=dbCoinResults['get'](_0x410996(0x28d))[_0x410996(0x210)]();if(_0x38dbb8['length']!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x44e44d){const _0x1bf4e9=_0x44b8d7;let _0x17569e=dbConfig[_0x1bf4e9(0x1e8)](_0x1bf4e9(0x272))[_0x1bf4e9(0x270)]({'botID':_0x44e44d})['value']();if(_0x17569e){let _0x47b7b9=![];typeof _0x17569e['threshold']==_0x1bf4e9(0x28b)&&(_0x17569e={..._0x17569e,'threshold':Number(_0x17569e[_0x1bf4e9(0x17c)])},_0x47b7b9=!![]),_0x17569e[_0x1bf4e9(0x164)]==null&&(_0x17569e={..._0x17569e,'change24h':-0x14},_0x47b7b9=!![]),_0x47b7b9&&(_0x17569e={'botID':_0x17569e[_0x1bf4e9(0x226)],'exchange':_0x17569e[_0x1bf4e9(0x2a0)],'apiKey':_0x17569e[_0x1bf4e9(0x151)],'apiSecret':_0x17569e[_0x1bf4e9(0x26e)],'basecoin':_0x17569e['basecoin'],'botname':_0x17569e[_0x1bf4e9(0x1d4)],'showname':_0x17569e[_0x1bf4e9(0x1b8)],'threshold':_0x17569e[_0x1bf4e9(0x17c)],'ordertype':_0x17569e[_0x1bf4e9(0x1ac)],'timeout':_0x17569e['timeout'],'startdate':_0x17569e[_0x1bf4e9(0x1b2)],'recreate':_0x17569e[_0x1bf4e9(0x160)],'timeshift':_0x17569e['timeshift'],'headless':_0x17569e[_0x1bf4e9(0x17f)],'cooldown':_0x17569e[_0x1bf4e9(0x1a7)],'change24h':_0x17569e['change24h'],'emojibuy':_0x17569e[_0x1bf4e9(0x1b6)],'emojisell':_0x17569e[_0x1bf4e9(0x254)],'portfolio':_0x17569e[_0x1bf4e9(0x287)],'liquidity':_0x17569e[_0x1bf4e9(0x168)]},dbConfig[_0x1bf4e9(0x1e8)](_0x1bf4e9(0x272))[_0x1bf4e9(0x1c4)]()['write'](),dbConfig[_0x1bf4e9(0x1e8)](_0x1bf4e9(0x272))[_0x1bf4e9(0x1ca)](_0x17569e)[_0x1bf4e9(0x271)]());}else _0x17569e={'botID':_0x44e44d,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x1bf4e9(0x203)+_0x44e44d,'showname':![],'threshold':0x3,'ordertype':_0x1bf4e9(0x170),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1bf4e9(0x1fe)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x17569e;}function emittedConfiguration(){const _0x101719=_0x44b8d7;let _0x153bda;if(config[_0x101719(0x151)]=='')_0x153bda={...config,'configstate':_0x101719(0x156)};else config[_0x101719(0x151)]==_0x101719(0x178)?_0x153bda={...config,'configstate':_0x101719(0x25d)}:_0x153bda={...config,'apiKey':'************','apiSecret':'************'};return _0x153bda;}function getSettings(){const _0x4481dd=_0x44b8d7;return dbSettings[_0x4481dd(0x1e8)](_0x4481dd(0x1bb))[_0x4481dd(0x210)]();}function getSecure(){return dbSecure['get']('secure')['value']()||{};}function updateTimeshift(_0x2fc956){const _0x2dfebc=_0x44b8d7;let _0x3d878c=dbConfig['get'](_0x2dfebc(0x272))[_0x2dfebc(0x270)]({'botID':botID})['value']();_0x3d878c&&dbConfig['get']('bot')[_0x2dfebc(0x270)]({'botID':botID})['assign']({'timeshift':_0x2fc956})[_0x2dfebc(0x271)](),config[_0x2dfebc(0x1fe)]=_0x2fc956,proxyEmit(_0x2dfebc(0x19f),emittedConfiguration());}async function storeConfiguration(_0x2b37ca){const _0x47da15=_0x44b8d7;let _0x17ce54=[],_0x201986=[];_0x2b37ca[_0x47da15(0x287)][_0x47da15(0x182)](_0xa8356a=>{const _0x4c8e01=_0x47da15;if(!_0xa8356a[_0x4c8e01(0x224)]&&_0xa8356a[_0x4c8e01(0x286)]!=_0x2b37ca[_0x4c8e01(0x211)])_0x201986[_0x4c8e01(0x1ca)](_0xa8356a[_0x4c8e01(0x20d)]);});currentCoins['length']==0x0?_0x17ce54=_0x201986:_0x201986['forEach'](_0x29255d=>{const _0x5d80a0=_0x47da15,_0x16125e=currentCoins[_0x5d80a0(0x270)](_0x24f228=>_0x24f228[_0x5d80a0(0x20d)]==_0x29255d);!_0x16125e&&_0x17ce54['push'](_0x29255d);});let _0x12fdc1=dbConfig[_0x47da15(0x1e8)](_0x47da15(0x272))[_0x47da15(0x270)]({'botID':botID})[_0x47da15(0x210)]();_0x2b37ca={..._0x2b37ca,'apiKey':crypt['decrypt'](secure[_0x47da15(0x261)],_0x2b37ca[_0x47da15(0x151)])[_0x47da15(0x21a)],'apiSecret':crypt[_0x47da15(0x1d3)](secure[_0x47da15(0x261)],_0x2b37ca[_0x47da15(0x26e)])['message']};if(_0x12fdc1){if(_0x2b37ca[_0x47da15(0x151)]=='************')_0x2b37ca[_0x47da15(0x151)]=config[_0x47da15(0x151)];if(_0x2b37ca[_0x47da15(0x26e)]==_0x47da15(0x27e))_0x2b37ca[_0x47da15(0x26e)]=config['apiSecret'];dbConfig[_0x47da15(0x1e8)](_0x47da15(0x272))[_0x47da15(0x270)]({'botID':botID})[_0x47da15(0x162)](_0x2b37ca)[_0x47da15(0x271)]();}else dbConfig[_0x47da15(0x1e8)](_0x47da15(0x272))[_0x47da15(0x1ca)](_0x2b37ca)[_0x47da15(0x271)](),process[_0x47da15(0x14b)]({'status':_0x47da15(0x16b),'live':_0x47da15(0x263)},_0x53ee77=>{});config={..._0x2b37ca},setStartDatePerformance(),process[_0x47da15(0x14b)]({'botname':_0x2b37ca['botname']},_0x54e2a8=>{}),updateBotManager();const _0x4ded26=getNormalizedPerformance();getStartingBalances(_0x4ded26),emitPerformance(_0x4ded26),proxyEmit('configuration-stored'),await initCoinResults(),reset(_0x17ce54);}async function storeHeadless(_0xcc9082){const _0x5d0109=_0x44b8d7,_0x1b49dc={...config,'headless':_0xcc9082['headless']};let _0x311d05=dbConfig[_0x5d0109(0x1e8)](_0x5d0109(0x272))['find']({'botID':botID})['value']();_0x311d05&&dbConfig[_0x5d0109(0x1e8)](_0x5d0109(0x272))[_0x5d0109(0x270)]({'botID':botID})[_0x5d0109(0x162)](_0x1b49dc)[_0x5d0109(0x271)](),config={..._0x1b49dc},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x3ee8a2){const _0x1eb71e=_0x44b8d7;return _0x3ee8a2[_0x1eb71e(0x1de)]('/','');}async function updateNumberCoinsCcxt(_0x454d52){const _0x228bab=_0x44b8d7;logger[_0x228bab(0x24b)]('0\x20-\x20EXECUTION:\x20'+_0x454d52[_0x228bab(0x20d)]+_0x228bab(0x1e7)+_0x454d52['status']+_0x228bab(0x1e7)+_0x454d52['id']+_0x228bab(0x1e7)+_0x454d52[_0x228bab(0x277)]);let _0x30d27c=_0x454d52[_0x228bab(0x1ae)],_0x5921f2=![];currentCoins[_0x228bab(0x182)](_0x3ae46a=>{const _0x2f0253=_0x228bab;_0x3ae46a['symbol']==_0x454d52[_0x2f0253(0x20d)]&&(_0x5921f2=!![]);});if(!_0x5921f2)return;const _0x5911a6=currentCoins[_0x228bab(0x270)](_0x2c4e7a=>_0x2c4e7a['symbol']==_0x454d52[_0x228bab(0x20d)]),_0x21b8f8=_0x4543f5=>{const _0x1aa59b=_0x228bab;if(_0x5911a6)_0x5911a6[_0x1aa59b(0x280)]=_0x4543f5;};if(_0x30d27c==_0x228bab(0x1f2))_0x21b8f8(_0x228bab(0x1f2));else{if(_0x30d27c=='canceled')_0x21b8f8(_0x228bab(0x1c2)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x30d27c==_0x228bab(0x207)){logger[_0x228bab(0x24b)](_0x228bab(0x20b)+_0x454d52[_0x228bab(0x20d)]+_0x228bab(0x1e7)+_0x454d52[_0x228bab(0x1dc)]+_0x228bab(0x1e7)+_0x454d52['id']+_0x228bab(0x1e7)+_0x454d52[_0x228bab(0x277)]);let _0x2bbaba=![];if(lastOrders)lastOrders['forEach'](async _0x45f164=>{const _0x2a3f28=_0x228bab;if(_0x45f164[_0x2a3f28(0x1e1)]==_0x454d52[_0x2a3f28(0x277)]){logger[_0x2a3f28(0x24b)](_0x2a3f28(0x167)+_0x454d52['clientOrderId']),_0x2bbaba=!![];if(_0x45f164[_0x2a3f28(0x1dc)]==0x0){logger['debug'](_0x2a3f28(0x163)+_0x454d52[_0x2a3f28(0x277)]),_0x45f164[_0x2a3f28(0x205)]=_0x454d52['average'],_0x45f164[_0x2a3f28(0x1dc)]=_0x454d52[_0x2a3f28(0x1dc)],_0x45f164[_0x2a3f28(0x19c)]={'cost':_0x454d52[_0x2a3f28(0x19c)][_0x2a3f28(0x258)],'currency':_0x454d52['fee'][_0x2a3f28(0x22c)]},_0x21b8f8(_0x2a3f28(0x1dc)),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x45f164);}}});!_0x2bbaba&&(logger['debug']('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x454d52['id']),_0x21b8f8('filled'),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x345efb=JSON[_0x228bab(0x251)](lastBalances['portfolio']);const _0x577a93=_0x345efb[_0x228bab(0x270)](_0x1144ed=>_0x1144ed[_0x228bab(0x20d)]==_0x454d52[_0x228bab(0x20d)]);if(_0x577a93){if(_0x30d27c==_0x228bab(0x1f2))_0x577a93[_0x228bab(0x280)]=_0x577a93[_0x228bab(0x280)]==_0x228bab(0x1dc)?_0x228bab(0x1dc):_0x228bab(0x1f2);else{if(_0x30d27c==_0x228bab(0x1c2))_0x577a93[_0x228bab(0x280)]=_0x577a93[_0x228bab(0x280)]==_0x228bab(0x1dc)?'filled':'canceled';else _0x30d27c==_0x228bab(0x207)&&(_0x577a93[_0x228bab(0x280)]=_0x228bab(0x1dc));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x345efb)},proxyEmit(_0x228bab(0x1b3),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x393688=![],_0x5cb61f=!![],_0x4ded9d=config['basecoin']){const _0x49c858=_0x44b8d7;let _0x51cca8,_0x712ea3=[],_0x5ec3a6=[],_0x208ead=[];try{_0x51cca8=await exchange[_0x49c858(0x2a6)](),mybalances=_0x51cca8[_0x49c858(0x1bf)];if(!_0x5cb61f)for(const [_0x48947a,_0x44ea3a]of Object['entries'](mybalances)){_0x208ead[_0x49c858(0x1ca)](_0x48947a);}else config[_0x49c858(0x287)][_0x49c858(0x182)](_0x355515=>{const _0x5c3d89=_0x49c858;if(!_0x355515[_0x5c3d89(0x224)])_0x208ead[_0x5c3d89(0x1ca)](_0x355515[_0x5c3d89(0x286)]);});if(_0x4ded9d=='')for(const [_0x5767d,_0x558e3b]of Object[_0x49c858(0x195)](mybalances)){_0x558e3b[_0x49c858(0x216)]()!=0x0&&_0x5ec3a6['push']({'coin':_0x5767d});}else{if(_0x393688)await getOpenOrders();let _0xedda84=![];for(const [_0x504696,_0x5bbb60]of Object[_0x49c858(0x195)](mybalances)){if(_0x208ead['includes'](_0x504696)){const _0x35bebf=config[_0x49c858(0x287)]['find'](_0x271b5c=>_0x271b5c[_0x49c858(0x286)]==_0x504696),_0x1cb363=_0x504696+'/'+_0x4ded9d,_0x3f9883=_0x4ded9d+'/'+_0x504696,_0xa74c69=currentCoins[_0x49c858(0x270)](_0x5b70a6=>_0x5b70a6[_0x49c858(0x286)]==_0x504696);_0xedda84=![];_0x393688&&(_0xedda84=allOpenOrders[_0x49c858(0x270)](_0xf3a23a=>_0xf3a23a[_0x49c858(0x20d)]==_0x35bebf[_0x49c858(0x20d)]));if((_0x5bbb60[_0x49c858(0x216)]()!=0x0||_0x35bebf)&&(allSymbols[_0x49c858(0x29a)](_0x1cb363)||_0x504696==_0x4ded9d))_0x504696!=_0x4ded9d&&_0x712ea3['push'](_0x1cb363),_0x5ec3a6[_0x49c858(0x1ca)]({'coin':_0x504696,'symbol':_0x1cb363,'reverse':![],'number':Math['max'](_0x5bbb60+(_0x35bebf&&_0x35bebf['offset']||0x0),0x0),'orderstatus':_0x393688?_0xedda84?'open':_0x49c858(0x25b):_0xa74c69?_0xa74c69[_0x49c858(0x280)]:_0x49c858(0x25b)});else(_0x5bbb60[_0x49c858(0x216)]()!=0x0||_0x35bebf)&&allSymbols['includes'](_0x3f9883)&&(_0x504696!=_0x4ded9d&&_0x712ea3[_0x49c858(0x1ca)](_0x3f9883),_0x5ec3a6[_0x49c858(0x1ca)]({'coin':_0x504696,'symbol':_0x3f9883,'reverse':!![],'number':Math[_0x49c858(0x243)](_0x5bbb60+(_0x35bebf&&_0x35bebf[_0x49c858(0x14e)]||0x0),0x0),'orderstatus':_0x393688?_0xedda84?_0x49c858(0x1f2):_0x49c858(0x25b):_0xa74c69?_0xa74c69[_0x49c858(0x280)]:_0x49c858(0x25b)}));}}}}catch(_0x2189c8){if(!_0x5cb61f)handleErrorNoStop(_0x2189c8,_0x49c858(0x27d));else await handleError(_0x2189c8,_0x49c858(0x27d));}return _0x5ec3a6;}async function getCoinNumber(_0x487c57){const _0x30f904=_0x44b8d7;let _0x35023c;try{const _0x1374dd=await exchange[_0x30f904(0x2a6)]();_0x35023c=_0x1374dd[_0x30f904(0x1bf)][_0x487c57];}catch(_0x563754){await handleError(_0x563754,_0x30f904(0x2a3));}return _0x35023c;}async function getOpenOrders(){const _0x3bf79e=_0x44b8d7;let _0x1c2d1b;allOpenOrders=[];try{for(const _0x63867c of config['portfolio']){!_0x63867c[_0x3bf79e(0x224)]&&_0x63867c[_0x3bf79e(0x286)]!=config['basecoin']&&(_0x1c2d1b=await exchange[_0x3bf79e(0x1f6)](_0x63867c[_0x3bf79e(0x20d)]),_0x1c2d1b[_0x3bf79e(0x227)]>0x0&&allOpenOrders['push'](_0x1c2d1b[0x0]));}}catch(_0xb3d18c){await handleError(_0xb3d18c,_0x3bf79e(0x24d));}}async function handleOpenOrders(_0x2864aa=0x0){const _0x5b077a=_0x44b8d7;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x5b077a(0x27c)]&&allOrdersPlaced&&(_0x2864aa==0x0?(logger[_0x5b077a(0x24b)](_0x5b077a(0x181)),_0x2864aa++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5b077a(0x24b)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x5b077a(0x190))));}async function getPortfolio(_0x3d1426){const _0x4c102f=_0x44b8d7;let _0x281db6=[],_0x3292db=[],_0x2aee34,_0x5be075=[],_0x39cbed=![];if(_0x3d1426['apiKey']==='************'||_0x3d1426['apiSecret']==='************')_0x39cbed=!![];else{await initExchange(_0x3d1426[_0x4c102f(0x2a0)],_0x3d1426[_0x4c102f(0x151)],_0x3d1426[_0x4c102f(0x26e)]);try{_0x39cbed=await loadSymbols();}catch(_0x1e6269){_0x39cbed=![],handleErrorNoStop(_0x1e6269,_0x4c102f(0x1dd));}}if(_0x39cbed){_0x5be075=await getCoins(![],![],_0x3d1426['basecoin']);if(_0x5be075===![])proxyEmit(_0x4c102f(0x287),![]);else{if(_0x3d1426[_0x4c102f(0x211)]=='')proxyEmit(_0x4c102f(0x287),_0x5be075);else{_0x5be075[_0x4c102f(0x182)](_0x227271=>{const _0x36ab89=_0x4c102f;if(_0x227271[_0x36ab89(0x286)]!=_0x3d1426[_0x36ab89(0x211)])_0x281db6[_0x36ab89(0x1ca)](_0x227271['symbol']);});try{_0x3292db=await exchange['fetchTickers'](_0x281db6);}catch(_0x543791){await handleError(_0x543791,_0x4c102f(0x279));}_0x5be075['forEach'](_0x9ee21a=>{const _0x57f3e2=_0x4c102f;_0x9ee21a[_0x57f3e2(0x286)]!=_0x3d1426[_0x57f3e2(0x211)]?_0x2aee34=_0x9ee21a[_0x57f3e2(0x176)]?0x1/_0x3292db[_0x9ee21a[_0x57f3e2(0x20d)]][_0x57f3e2(0x25c)]:_0x3292db[_0x9ee21a[_0x57f3e2(0x20d)]]['last']:_0x2aee34=0x1,_0x9ee21a[_0x57f3e2(0x205)]=formatResult(_0x2aee34,0x8);}),proxyEmit('portfolio',_0x5be075);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x196ba6){const _0x4d9a64=_0x44b8d7;let _0x5c59ec=!![];const _0x11f1d7=!_0x196ba6[_0x4d9a64(0x176)]?markets[_0x196ba6['symbol']][_0x4d9a64(0x14d)][_0x4d9a64(0x174)]['min']:markets[_0x196ba6['symbol']][_0x4d9a64(0x14d)]['cost'][_0x4d9a64(0x183)],_0x4a08c6=!_0x196ba6[_0x4d9a64(0x176)]?markets[_0x196ba6[_0x4d9a64(0x20d)]][_0x4d9a64(0x14d)][_0x4d9a64(0x258)][_0x4d9a64(0x183)]:markets[_0x196ba6[_0x4d9a64(0x20d)]][_0x4d9a64(0x14d)][_0x4d9a64(0x174)][_0x4d9a64(0x183)],_0x181769=markets[_0x196ba6[_0x4d9a64(0x20d)]]['precision'][_0x4d9a64(0x174)];_0x196ba6[_0x4d9a64(0x25a)]=formatResultTruncate(_0x196ba6[_0x4d9a64(0x25a)],_0x181769);if(Math['abs'](_0x196ba6[_0x4d9a64(0x25a)])<_0x11f1d7)_0x5c59ec=![];if(Math[_0x4d9a64(0x29b)](_0x196ba6[_0x4d9a64(0x25a)])*_0x196ba6[_0x4d9a64(0x25c)]<_0x4a08c6)_0x5c59ec=![];if(_0x196ba6['side']==_0x4d9a64(0x15f)){let _0x429812=config['portfolio'][_0x4d9a64(0x270)](_0x572718=>_0x572718[_0x4d9a64(0x286)]==_0x196ba6[_0x4d9a64(0x286)]);if(_0x429812[_0x4d9a64(0x14e)]>0x0){if(Math[_0x4d9a64(0x29b)](_0x196ba6[_0x4d9a64(0x25a)])>_0x196ba6[_0x4d9a64(0x259)]-_0x429812[_0x4d9a64(0x14e)])_0x5c59ec=![];}else{if(Math[_0x4d9a64(0x29b)](_0x196ba6['trade'])>_0x196ba6[_0x4d9a64(0x259)])_0x5c59ec=![];}}if(_0x196ba6['side']==_0x4d9a64(0x1e2)){let _0x1f173d=config[_0x4d9a64(0x287)][_0x4d9a64(0x270)](_0x5aec24=>_0x5aec24[_0x4d9a64(0x286)]==config[_0x4d9a64(0x211)]),_0x32b17c=currentCoins[_0x4d9a64(0x270)](_0x181297=>_0x181297['coin']==config[_0x4d9a64(0x211)]);if(_0x1f173d[_0x4d9a64(0x14e)]>0x0){if(Math[_0x4d9a64(0x29b)](_0x196ba6['trade'])*_0x196ba6[_0x4d9a64(0x25c)]>_0x32b17c['number']-_0x1f173d[_0x4d9a64(0x14e)])_0x5c59ec=![];}else{if(Math[_0x4d9a64(0x29b)](_0x196ba6[_0x4d9a64(0x25a)])*_0x196ba6[_0x4d9a64(0x25c)]>_0x32b17c[_0x4d9a64(0x259)])_0x5c59ec=![];}}return _0x5c59ec;}async function getBalances(){const _0x4195a8=_0x44b8d7;let _0x5f1fd2=0x0,_0xec4a30;const _0x314192=config[_0x4195a8(0x17c)];if(config['headless']&&config[_0x4195a8(0x164)]<0x0)await validate24hChanges();currentCoins[_0x4195a8(0x182)](_0x4a6011=>{const _0x582076=_0x4195a8;if(_0x4a6011[_0x582076(0x286)]!=config[_0x582076(0x211)]){let _0x510dea=global['ticker'][noslash(_0x4a6011['symbol'])];_0xec4a30=_0x4a6011[_0x582076(0x176)]?0x1/_0x510dea:_0x510dea;}else _0xec4a30=0x1;let _0x527cca=_0x4a6011['number']*_0xec4a30;_0x5f1fd2+=_0x527cca,_0x4a6011[_0x582076(0x25c)]=formatResult(Number(_0xec4a30),0x8),_0x4a6011[_0x582076(0x210)]=_0x527cca;}),currentCoins['forEach'](_0x7143f2=>{const _0x4cf1b8=_0x4195a8;let _0x4d402b=config[_0x4cf1b8(0x287)]['find'](_0x48b465=>_0x48b465['coin']==_0x7143f2['coin']),_0x581f43=Number(_0x4d402b[_0x4cf1b8(0x22a)]),_0x2c51d8=_0x7143f2[_0x4cf1b8(0x210)]/_0x5f1fd2*0x64,_0x1e0391=_0x581f43*_0x5f1fd2/0x64/_0x7143f2[_0x4cf1b8(0x25c)]-_0x7143f2[_0x4cf1b8(0x259)];_0x7143f2['distribution']=formatResult(_0x2c51d8,0x3),_0x7143f2[_0x4cf1b8(0x221)]=formatResult(_0x581f43,0x3),_0x7143f2[_0x4cf1b8(0x25a)]=formatResult(_0x1e0391,0x8),_0x7143f2[_0x4cf1b8(0x15a)]='',_0x7143f2['valid']=![];if(_0x7143f2['coin']!=config[_0x4cf1b8(0x211)]){if(_0x7143f2[_0x4cf1b8(0x22a)]>_0x581f43)_0x7143f2[_0x4cf1b8(0x15a)]=_0x4cf1b8(0x15f),_0x7143f2[_0x4cf1b8(0x231)]=checkMinimums(_0x7143f2);else _0x7143f2['distribution']<_0x581f43&&(_0x7143f2['side']=_0x4cf1b8(0x1e2),_0x7143f2[_0x4cf1b8(0x231)]=checkMinimums(_0x7143f2));}_0x7143f2[_0x4cf1b8(0x19d)]=_0x7143f2[_0x4cf1b8(0x22a)]/_0x7143f2[_0x4cf1b8(0x221)]-0x1;if(_0x7143f2['orderstatus']==_0x4cf1b8(0x1dc)||_0x7143f2[_0x4cf1b8(0x280)]==_0x4cf1b8(0x1c2))_0x7143f2[_0x4cf1b8(0x280)]=_0x4cf1b8(0x25b);}),currentCoins[_0x4195a8(0x1e6)]((_0x5a7abf,_0x5018d3)=>_0x5a7abf['delta']<_0x5018d3[_0x4195a8(0x19d)]?0x1:_0x5018d3[_0x4195a8(0x19d)]<_0x5a7abf[_0x4195a8(0x19d)]?-0x1:0x0);const _0x42a7ac=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x42a7ac[_0x4195a8(0x1ce)],'usd':_0x42a7ac[_0x4195a8(0x1c9)],'portfolio':JSON[_0x4195a8(0x222)](currentCoins),'threshold':_0x314192},proxyEmit(_0x4195a8(0x1b3),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4195a8(0x17f)])headlessMode({'portfolio':currentCoins,'threshold':_0x314192});else{if(lockOrders==ORDERS[_0x4195a8(0x16a)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x314192});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x466bca=_0x44b8d7;if(!lastBalances)return;let _0x4c9819=[],_0x565839,_0x3fe014=JSON[_0x466bca(0x251)](lastBalances['portfolio']);_0x3fe014[_0x466bca(0x1e6)]((_0x30dfdb,_0x1e83e5)=>_0x30dfdb[_0x466bca(0x286)]>_0x1e83e5['coin']?0x1:_0x1e83e5[_0x466bca(0x286)]>_0x30dfdb[_0x466bca(0x286)]?-0x1:0x0),_0x3fe014[_0x466bca(0x182)](_0x49ed34=>{const _0x5f3cd4=_0x466bca;let _0x8a1928={'coin':_0x49ed34['coin'],'number':_0x49ed34[_0x5f3cd4(0x259)],'price':_0x49ed34[_0x5f3cd4(0x25c)]};_0x4c9819[_0x5f3cd4(0x1ca)](_0x8a1928);});const _0x189845=await getFiat();_0x565839={'date':lastBalances[_0x466bca(0x249)]['split']('\x20')[0x0],'eur':_0x189845[_0x466bca(0x1ce)],'usd':_0x189845['usd'],'coins':_0x4c9819};let _0x521adb=dbPerformance['get']('data')[_0x466bca(0x270)]({'date':_0x565839['date']})['value']();_0x521adb?_0x565839[_0x466bca(0x23c)]!=config[_0x466bca(0x1b2)]&&dbPerformance[_0x466bca(0x1e8)]('data')[_0x466bca(0x270)]({'date':_0x565839[_0x466bca(0x23c)]})[_0x466bca(0x162)](_0x565839)[_0x466bca(0x271)]():dbPerformance['get'](_0x466bca(0x179))[_0x466bca(0x1ca)](_0x565839)[_0x466bca(0x271)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xb67839=_0x44b8d7;let _0x2165d1=[];if(dbPerformance[_0xb67839(0x23b)](_0xb67839(0x179))[_0xb67839(0x210)]()){let _0x4bab22=dbPerformance[_0xb67839(0x1e8)]('data')[_0xb67839(0x213)]()[_0xb67839(0x28e)](_0xb67839(0x23c))['value'](),_0x550f5d=[...config['liquidity']];_0x550f5d[_0xb67839(0x1e6)]((_0x57a025,_0x9d0db5)=>_0x57a025[_0xb67839(0x23c)]>_0x9d0db5[_0xb67839(0x23c)]?-0x1:_0x9d0db5[_0xb67839(0x23c)]>_0x57a025['date']?0x1:0x0);let _0x35591b=0x1,_0xdf94d6=[],_0x20539a=0x0;_0x4bab22[_0xb67839(0x153)]()[_0xb67839(0x176)]()[_0xb67839(0x182)]((_0x3cbb54,_0x47390e)=>{const _0x2af0db=_0xb67839;if(_0x550f5d[_0x20539a]){if(_0x4bab22[_0x4bab22[_0x2af0db(0x227)]-_0x47390e]&&_0x550f5d[_0x20539a]['date']==_0x4bab22[_0x4bab22[_0x2af0db(0x227)]-_0x47390e]['date']){if(_0x47390e<_0x4bab22[_0x2af0db(0x227)]){let _0x442361=0x0,_0x37dea5=0x0;_0x4bab22[_0x4bab22[_0x2af0db(0x227)]-_0x47390e]['coins'][_0x2af0db(0x182)](_0x3bb2ea=>{const _0x25cefd=_0x2af0db;_0x37dea5+=_0x3bb2ea[_0x25cefd(0x259)]*_0x3bb2ea[_0x25cefd(0x205)];}),_0x550f5d[_0x20539a][_0x2af0db(0x1d6)][_0x2af0db(0x182)](_0x51a805=>{const _0x203024=_0x2af0db;_0x442361+=_0x51a805[_0x203024(0x259)]*_0x51a805[_0x203024(0x205)];}),_0x35591b*=_0x442361/(_0x37dea5-_0x442361)+0x1;}_0x20539a++;}}let _0x43bf7e=0x0;_0x3cbb54[_0x2af0db(0x28d)]['forEach'](_0x59ed7f=>{const _0x102135=_0x2af0db;_0x43bf7e+=_0x59ed7f[_0x102135(0x259)]*_0x59ed7f['price'];}),_0xdf94d6[_0x4bab22['length']-_0x47390e-0x1]=_0x43bf7e*(_0x35591b-0x1);});let _0x3ae9c3=[];_0x550f5d=[...config[_0xb67839(0x168)]]||[];let _0xeb575=0x0;_0x20539a=0x0,_0x4bab22[_0xb67839(0x182)]((_0xe22ea3,_0x3a6297)=>{const _0x3ba3d2=_0xb67839;if(_0x550f5d[_0x20539a]){const _0x177439=fns[_0x3ba3d2(0x251)](_0x550f5d[_0x20539a]['date'],_0x3ba3d2(0x17b),new Date()),_0x2b0a1e=fns[_0x3ba3d2(0x251)](_0xe22ea3[_0x3ba3d2(0x23c)],_0x3ba3d2(0x17b),new Date());if(fns[_0x3ba3d2(0x186)](_0x177439,_0x2b0a1e)){let _0x2462ce=0x0;_0x550f5d[_0x20539a][_0x3ba3d2(0x1d6)][_0x3ba3d2(0x182)](_0x3e02bd=>{const _0x497194=_0x3ba3d2;!_0x3ae9c3[_0x3e02bd[_0x497194(0x286)]]?_0x3ae9c3[_0x3e02bd[_0x497194(0x286)]]=_0x3e02bd[_0x497194(0x259)]:(_0x2462ce=_0x3ae9c3[_0x3e02bd[_0x497194(0x286)]],_0x3ae9c3[_0x3e02bd['coin']]+=_0x3e02bd[_0x497194(0x259)]);const _0x512c75=_0xe22ea3[_0x497194(0x28d)]['find'](_0x5ddc95=>_0x5ddc95[_0x497194(0x286)]==_0x3e02bd['coin']);(!_0x512c75||_0x512c75[_0x497194(0x259)]==0x0)&&(_0xeb575+=(-_0x3e02bd['number']-_0x2462ce)*_0x3e02bd[_0x497194(0x205)]);}),_0x20539a++;}}_0xe22ea3[_0x3ba3d2(0x28d)][_0x3ba3d2(0x182)]((_0x22c787,_0x19fcfd)=>{const _0x2036b1=_0x3ba3d2;_0x3ae9c3[_0x22c787[_0x2036b1(0x286)]]&&(_0x22c787={..._0x22c787,'initial':_0x3ae9c3[_0x22c787[_0x2036b1(0x286)]]}),_0xe22ea3[_0x2036b1(0x28d)][_0x19fcfd]=_0x22c787;}),_0x2165d1[_0x3ba3d2(0x1ca)]({'date':_0xe22ea3['date'],'eur':_0xe22ea3[_0x3ba3d2(0x1ce)],'usd':_0xe22ea3[_0x3ba3d2(0x1c9)],'offset':_0xdf94d6[_0x3a6297],'netoffset':_0xeb575,'coins':_0xe22ea3[_0x3ba3d2(0x28d)]});});}return _0x2165d1;}function emitPerformance(_0x59e169){const _0x71ca5c=_0x44b8d7;_0x59e169[_0x71ca5c(0x227)]!==0x0?(proxyEmit('performance',_0x59e169),lastPerformanceEmitted=getDate()):proxyEmit(_0x71ca5c(0x218),[]);}function getPerf(_0x293633,_0x2db421){const _0x46b750=_0x44b8d7;let _0x26e98e=0x0,_0x156a8f=0x0,_0x2c161f=0x0;_0x293633[_0x46b750(0x28d)][_0x46b750(0x182)](_0x1ba0ce=>{const _0x4647b6=_0x46b750;_0x26e98e+=_0x1ba0ce[_0x4647b6(0x259)]*_0x1ba0ce[_0x4647b6(0x205)];});_0x2db421&&(_0x26e98e+=_0x293633[_0x46b750(0x14e)]);if(config[_0x46b750(0x211)]==='BTC'||config[_0x46b750(0x211)]==='ETH')_0x156a8f=_0x26e98e*_0x293633[_0x46b750(0x1ce)],_0x2c161f=_0x26e98e*_0x293633[_0x46b750(0x1c9)];else{if(config[_0x46b750(0x211)]==='BUSD'||config[_0x46b750(0x211)]===_0x46b750(0x14a)||config[_0x46b750(0x211)]===_0x46b750(0x265))_0x156a8f=_0x26e98e*_0x293633[_0x46b750(0x1ce)]/_0x293633[_0x46b750(0x1c9)],_0x2c161f=_0x26e98e;else config[_0x46b750(0x211)]==='EUR'&&(_0x156a8f=_0x26e98e,_0x2c161f=_0x26e98e*_0x293633[_0x46b750(0x1c9)]/_0x293633[_0x46b750(0x1ce)]);}return[_0x26e98e,_0x156a8f,_0x2c161f];}function getKPIs(_0x545df4,_0x4df57c=_0x44b8d7(0x204)){const _0x4b0602=_0x44b8d7,_0x3975ff=config['basecoin'],_0x494145=config[_0x4b0602(0x1b3)],_0x189506=currentCoins,_0x574fbb=getNormalizedPerformance(),_0x1fc8e6=_0x545df4===_0x4b0602(0x211)?_0x3975ff:_0x545df4===_0x4b0602(0x1db)||_0x545df4==='net-fiat'?_0x4df57c:_0x4b0602(0x157)+_0x3975ff,_0x1aa4cf=_0x545df4===_0x4b0602(0x1be)?_0x4b0602(0x18b):_0x545df4===_0x4b0602(0x1b4)?_0x4b0602(0x19b)+_0x1fc8e6+')':_0x1fc8e6+_0x4b0602(0x1fd),_0x4cbfad=_0x545df4===_0x4b0602(0x1be)||_0x545df4===_0x4b0602(0x1b4)?_0x4b0602(0x18b):_0x1fc8e6+_0x4b0602(0x154);let _0x3ee4b0=0x0;_0x189506[_0x4b0602(0x182)](_0x2932f3=>{const _0x1a3af6=_0x4b0602;_0x3ee4b0+=_0x2932f3[_0x1a3af6(0x259)]*_0x2932f3['last'];});if(_0x545df4===_0x4b0602(0x1db)||_0x545df4===_0x4b0602(0x1b4)){if(_0x3975ff===_0x4b0602(0x180)||_0x3975ff===_0x4b0602(0x18d))_0x3ee4b0=_0x3ee4b0*(_0x4df57c===_0x4b0602(0x204)?_0x494145[_0x4b0602(0x1ce)]:_0x494145[_0x4b0602(0x1c9)]);else{if(_0x3975ff==='BUSD'||_0x3975ff===_0x4b0602(0x14a)||_0x3975ff===_0x4b0602(0x265))_0x3ee4b0=_0x3ee4b0*(_0x4df57c===_0x4b0602(0x204)?_0x494145['eur']/_0x494145[_0x4b0602(0x1c9)]:0x1);else _0x3975ff===_0x4b0602(0x204)&&(_0x3ee4b0=_0x3ee4b0*(_0x4df57c===_0x4b0602(0x204)?0x1:_0x494145[_0x4b0602(0x1c9)]/_0x494145[_0x4b0602(0x1ce)]));}}let _0x477ce8;if(_0x3ee4b0!==0x0){if(_0x545df4==='basecoin')_0x477ce8=(_0x3ee4b0/startingBalances[_0x4b0602(0x211)]-0x1)*0x64;else{if(_0x4df57c===_0x4b0602(0x204))_0x477ce8=(_0x3ee4b0/startingBalances[_0x4b0602(0x1ce)]-0x1)*0x64;else _0x477ce8=(_0x3ee4b0/startingBalances[_0x4b0602(0x1c9)]-0x1)*0x64;}let _0x2e5c60=0x0;if(startingBalances[_0x4b0602(0x28d)])_0x189506[_0x4b0602(0x182)](_0x3550bf=>{const _0x2ce725=_0x4b0602;let _0xf329ec=startingBalances[_0x2ce725(0x28d)]['find'](_0xb35246=>_0xb35246[_0x2ce725(0x286)]===_0x3550bf[_0x2ce725(0x286)]);if(_0xf329ec&&_0xf329ec[_0x2ce725(0x286)]&&_0x3550bf[_0x2ce725(0x259)]!==0x0)_0x2e5c60+=_0xf329ec[_0x2ce725(0x259)]*_0x3550bf[_0x2ce725(0x25c)];});let _0x3edff8=0x0;if(_0x574fbb['length']!==0x0){let _0x5e2fae=_0x574fbb[_0x574fbb[_0x4b0602(0x227)]-0x1];_0x3edff8=_0x5e2fae[_0x4b0602(0x275)];}_0x2e5c60-=_0x3edff8;_0x545df4===_0x4b0602(0x1be)&&(_0x477ce8=(_0x3ee4b0-_0x2e5c60)/startingBalances[_0x4b0602(0x211)]*0x64,_0x3ee4b0=_0x3ee4b0-_0x2e5c60);if(_0x545df4===_0x4b0602(0x1b4)){let _0x27730c=_0x4df57c===_0x4b0602(0x204)?startingBalances[_0x4b0602(0x1ce)]:startingBalances['usd'];if(_0x3975ff==='BTC'||_0x3975ff===_0x4b0602(0x18d))_0x2e5c60=_0x4df57c===_0x4b0602(0x204)?_0x2e5c60*_0x494145[_0x4b0602(0x1ce)]:_0x2e5c60*_0x494145[_0x4b0602(0x1c9)];else{if(_0x3975ff===_0x4b0602(0x26d)||_0x3975ff==='USDT'||_0x3975ff===_0x4b0602(0x265))_0x2e5c60=_0x4df57c===_0x4b0602(0x204)?_0x2e5c60*_0x494145[_0x4b0602(0x1ce)]/_0x494145[_0x4b0602(0x1c9)]:_0x2e5c60;else _0x3975ff===_0x4b0602(0x204)&&(_0x2e5c60=_0x4df57c===_0x4b0602(0x204)?_0x2e5c60:_0x2e5c60*_0x494145[_0x4b0602(0x1c9)]/_0x494145[_0x4b0602(0x1ce)]);}_0x477ce8=(_0x3ee4b0-_0x2e5c60)/_0x27730c*0x64,_0x3ee4b0=_0x3ee4b0-_0x2e5c60;}if(_0x477ce8){if(_0x477ce8<0x64)_0x477ce8=_0x477ce8[_0x4b0602(0x1f8)](0x2);else{if(_0x477ce8<0x3e8)_0x477ce8=_0x477ce8['toFixed'](0x1);else _0x477ce8=_0x477ce8[_0x4b0602(0x1f8)](0x0);}}else _0x477ce8=Number('0')[_0x4b0602(0x1f8)](0x2);if(_0x3ee4b0){if(Math[_0x4b0602(0x29b)](_0x3ee4b0)<0.000001)_0x3ee4b0=_0x3ee4b0['toFixed'](0x2);else{if(Math['abs'](_0x3ee4b0)<0.1)_0x3ee4b0=_0x3ee4b0[_0x4b0602(0x1f8)](0x6);else{if(Math[_0x4b0602(0x29b)](_0x3ee4b0)<0x1)_0x3ee4b0=_0x3ee4b0['toFixed'](0x5);else{if(Math['abs'](_0x3ee4b0)<0xa)_0x3ee4b0=_0x3ee4b0[_0x4b0602(0x1f8)](0x4);else{if(Math['abs'](_0x3ee4b0)<0x64)_0x3ee4b0=_0x3ee4b0[_0x4b0602(0x1f8)](0x3);else{if(Math['abs'](_0x3ee4b0)<0x3e8)_0x3ee4b0=_0x3ee4b0[_0x4b0602(0x1f8)](0x2);else _0x3ee4b0=_0x3ee4b0[_0x4b0602(0x1f8)](0x2);}}}}}}else _0x3ee4b0=Number('0')[_0x4b0602(0x1f8)](0x2);}else _0x477ce8=Number('0')[_0x4b0602(0x1f8)](0x2);return{'value':_0x3ee4b0,'change':_0x477ce8,'leftTxt':_0x1aa4cf,'rightTxt':_0x4cbfad};}async function getStartingBalances(_0x1c3b2a,_0x30ee03=!![]){const _0x1e0eda=_0x44b8d7;if(_0x1c3b2a[_0x1e0eda(0x227)]!==0x0){const [_0x3b0ec5,_0x13c28f,_0x2e0d82]=getPerf(_0x1c3b2a[0x0],!![]);let _0x547d26=[];config['portfolio'][_0x1e0eda(0x182)](_0x443046=>{const _0x620e7f=_0x1e0eda;let _0x2dd73a=0x0,_0x12563a;config[_0x620e7f(0x168)][_0x620e7f(0x182)](_0x55c70a=>{const _0x435718=_0x620e7f;let _0x3a9926=_0x55c70a[_0x435718(0x1d6)][_0x435718(0x270)](_0x41e2f6=>_0x41e2f6[_0x435718(0x286)]==_0x443046[_0x435718(0x286)]);if(_0x3a9926){_0x2dd73a+=_0x3a9926[_0x435718(0x259)];if(!_0x12563a)_0x12563a=_0x3a9926[_0x435718(0x205)];}}),_0x547d26[_0x620e7f(0x1ca)]({'coin':_0x443046[_0x620e7f(0x286)],'number':_0x2dd73a,'initialprice':_0x12563a});});const _0x31c305={'basecoin':_0x3b0ec5,'eur':_0x13c28f,'usd':_0x2e0d82,'coins':_0x547d26};if(_0x30ee03)proxyEmit(_0x1e0eda(0x1fb),_0x31c305);startingBalances=_0x31c305;}}function headlessMode(_0xdc5664){const _0x1c0bfb=_0x44b8d7;let _0x3c9161=_0xdc5664['portfolio'],_0x19da5e=_0xdc5664[_0x1c0bfb(0x17c)],_0x18afce=[];for(let _0x40d2bf of _0x3c9161){if(_0x40d2bf['coin']!=config['basecoin']){if(_0x40d2bf[_0x1c0bfb(0x19d)]>=_0x19da5e/0x64){if(_0x40d2bf[_0x1c0bfb(0x231)])_0x18afce['push'](_0x40d2bf);}else{if(_0x40d2bf[_0x1c0bfb(0x19d)]<=-_0x19da5e/0x64){if(_0x40d2bf[_0x1c0bfb(0x231)])_0x18afce[_0x1c0bfb(0x1ca)](_0x40d2bf);}}}}_0x18afce[_0x1c0bfb(0x227)]>0x0&&placeOrder(_0x18afce);}function notifyBalance(_0x33bb9a){const _0xbbd18c=_0x44b8d7;let _0x3a21fb=_0x33bb9a[_0xbbd18c(0x287)],_0x2fbf36=_0x33bb9a[_0xbbd18c(0x17c)],_0x38c199=[];for(let _0x217b89 of _0x3a21fb){if(_0x217b89['coin']!=config[_0xbbd18c(0x211)]){if(_0x217b89[_0xbbd18c(0x19d)]>=_0x2fbf36/0x64){if(_0x217b89[_0xbbd18c(0x231)])_0x38c199[_0xbbd18c(0x1ca)](_0x217b89);}else{if(_0x217b89[_0xbbd18c(0x19d)]<=-_0x2fbf36/0x64){if(_0x217b89['valid'])_0x38c199['push'](_0x217b89);}}}}if(_0x38c199[_0xbbd18c(0x227)]>0x0){let _0x1db072=_0x38c199[_0xbbd18c(0x1f9)](_0x333582=>_0x333582[_0xbbd18c(0x286)]);_0x1db072[_0xbbd18c(0x1e6)]();let _0x29cd00=_0x1db072['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0xbbd18c(0x202),_0xbbd18c(0x244));lastCoinsToBalance=_0x29cd00;}}function symbolToCoin(_0x474811){const _0x3e75bf=_0x44b8d7;let _0x1b5f20;if(_0x474811['includes']('/'+config[_0x3e75bf(0x211)]))_0x1b5f20=_0x474811['replace']('/'+config['basecoin'],'');if(_0x474811[_0x3e75bf(0x29a)](config[_0x3e75bf(0x211)]+'/'))_0x1b5f20=_0x474811[_0x3e75bf(0x1de)](config[_0x3e75bf(0x211)]+'/','');return _0x1b5f20;}async function unlockOrders(){const _0x5a3781=_0x44b8d7;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x5a3781(0x1e4)),lockOrders=ORDERS[_0x5a3781(0x16c)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x5a3781(0x156),persistOpenOrders([]),lockOrders=ORDERS[_0x5a3781(0x16a)],logger[_0x5a3781(0x24b)](_0x5a3781(0x14c));}}async function validateOrders(_0x4ae27e){const _0x5906be=_0x44b8d7;if(_0x4ae27e)validateOrdersState=_0x4ae27e;logger[_0x5906be(0x24b)](_0x5906be(0x22e)+validateOrdersState+_0x5906be(0x2a8)+(lockOrders==0x1?_0x5906be(0x206):lockOrders==0x2?_0x5906be(0x177):_0x5906be(0x1a6)));let _0x223534=[],_0x18bfd0=config[_0x5906be(0x1ac)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5906be(0x1c3)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5906be(0x27c)])return;logger[_0x5906be(0x24b)](_0x5906be(0x24f)+validateOrdersState),lastOrders[_0x5906be(0x182)](_0x2a0408=>{const _0x196c9d=_0x5906be;let _0x168ad6=![];_0x2a0408[_0x196c9d(0x1dc)]>0x0&&(_0x168ad6=!![]),_0x223534[_0x196c9d(0x1ca)](_0x168ad6),_0x168ad6&&config[_0x196c9d(0x1ac)]!='market'&&logHistory(_0x196c9d(0x268),_0x196c9d(0x1bc)+_0x2a0408[_0x196c9d(0x20d)]+'\x20'+_0x2a0408[_0x196c9d(0x15a)]+'\x20#'+formatResult(_0x2a0408[_0x196c9d(0x1dc)],0x8)+'\x20@'+formatResult(_0x2a0408[_0x196c9d(0x205)],0x8));}),_0x223534[_0x5906be(0x182)]((_0x426a7e,_0xc7203)=>{const _0x1393bd=_0x5906be;if(_0x426a7e)lastOrders[_0x1393bd(0x20f)](_0xc7203,0x1);}),persistOpenOrders(lastOrders);const _0x323235=coolingDown?_0x5906be(0x1ff):_0x5906be(0x1c0);if(validateOrdersState==_0x5906be(0x156))validateOrdersState=_0x5906be(0x1ee),_0x223534[_0x5906be(0x29a)](![])?config[_0x5906be(0x1ac)]==_0x5906be(0x170)?logHistory('warning',_0x5906be(0x16e)):logHistory(_0x5906be(0x202),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x5906be(0x1ee)){if(_0x223534[_0x5906be(0x29a)](![])){}else allOrdersPlaced&&(config[_0x5906be(0x1ac)]=='market'?logHistory('success',_0x5906be(0x240)+_0x323235):logHistory(_0x5906be(0x260),'Order(s)\x20filled\x20-\x20'+_0x323235),await unlockOrders());}else{if(validateOrdersState==_0x5906be(0x23f))_0x223534[_0x5906be(0x29a)](![])&&(config['ordertype']==_0x5906be(0x170)?logHistory(_0x5906be(0x260),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x5906be(0x28c)](_0x18bfd0*validateOrderInterval/0xea60)+_0x5906be(0x15e)+_0x323235):(await cancelOrders(),logHistory(_0x5906be(0x260),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5906be(0x28c)](_0x18bfd0*validateOrderInterval/0xea60)+_0x5906be(0x15e)+_0x323235))),await unlockOrders();else{if(validateOrdersState==_0x5906be(0x190)){if(config[_0x5906be(0x1ac)]!=_0x5906be(0x170))logHistory(_0x5906be(0x260),_0x5906be(0x1eb)+_0x323235);await unlockOrders();}}}}}async function cancelOrders(){const _0x42a229=_0x44b8d7;lastOrders[_0x42a229(0x182)](async _0x39114a=>{const _0x206e3e=_0x42a229;try{const _0x1de23d=await exchange[_0x206e3e(0x23a)](_0x39114a['orderId'],_0x39114a[_0x206e3e(0x20d)]);}catch(_0xfc9196){if(_0xfc9196['toString']()[_0x206e3e(0x29a)](_0x206e3e(0x232))){}else await handleError(_0xfc9196,_0x206e3e(0x1a9));}});}async function initCoinResults(){const _0x5d3a54=_0x44b8d7;let _0x528e5d=[];config['portfolio'][_0x5d3a54(0x182)](_0x27bcbd=>{const _0x5e520e=_0x5d3a54;if(!_0x27bcbd[_0x5e520e(0x224)]&&_0x27bcbd['coin']!=config[_0x5e520e(0x211)]){let _0x160ccc=dbCoinResults[_0x5e520e(0x1e8)](_0x5e520e(0x28d))[_0x5e520e(0x270)]({'coin':_0x27bcbd['coin']})['value']();if(!_0x160ccc){const _0x553b6e=currentCoins['find'](_0x4ebc18=>_0x4ebc18[_0x5e520e(0x286)]==_0x27bcbd['coin']),_0x27b77b=global['ticker'][noslash(_0x27bcbd[_0x5e520e(0x20d)])];let _0x5757de=_0x553b6e?_0x553b6e[_0x5e520e(0x259)]:null,_0x139733=_0x27bcbd[_0x5e520e(0x176)]?0x1/_0x27b77b:_0x27b77b,_0x3cdf36;config[_0x5e520e(0x168)][_0x5e520e(0x182)](_0x388d64=>{const _0x433ada=_0x5e520e;!_0x3cdf36&&(_0x3cdf36=_0x388d64[_0x433ada(0x1d6)]['find'](_0x527d43=>_0x527d43['coin']==_0x27bcbd[_0x433ada(0x286)]),_0x3cdf36&&(_0x5757de=_0x3cdf36[_0x433ada(0x259)],_0x139733=_0x3cdf36[_0x433ada(0x205)]));}),_0x528e5d[_0x5e520e(0x1ca)]({'coin':_0x27bcbd[_0x5e520e(0x286)],'number':_0x5757de,'price':_0x139733});}}}),_0x528e5d[_0x5d3a54(0x182)](_0x1d8aaf=>{const _0x47d83a=_0x5d3a54,_0x565156={'coin':_0x1d8aaf[_0x47d83a(0x286)],'number':_0x1d8aaf[_0x47d83a(0x259)],'breakeven':_0x1d8aaf['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x47d83a(0x1e8)](_0x47d83a(0x28d))[_0x47d83a(0x1ca)](_0x565156)[_0x47d83a(0x271)]();});}async function updateCoinResults(_0x14d92d,_0x45d6d8=![]){const _0x466aac=_0x44b8d7;let _0x45652b,_0xa2684,_0x306513,_0x90dfb,_0xbdb4f3,_0x181ef5,_0x9fb131=dbCoinResults[_0x466aac(0x1e8)](_0x466aac(0x28d))['find']({'coin':_0x14d92d[_0x466aac(0x286)]})[_0x466aac(0x210)]();!_0x9fb131&&await initCoinResults();_0x14d92d[_0x466aac(0x176)]&&(_0x181ef5={'filled':_0x14d92d['filled']*_0x14d92d[_0x466aac(0x205)],'amount':_0x14d92d['filled']*_0x14d92d[_0x466aac(0x205)],'side':_0x14d92d[_0x466aac(0x15a)]==_0x466aac(0x15f)?_0x466aac(0x1e2):'sell','price':0x1/_0x14d92d[_0x466aac(0x205)]},_0x14d92d={..._0x14d92d,..._0x181ef5});_0x45d6d8?_0xa2684=_0x14d92d['side']==_0x466aac(0x1e2)?_0x9fb131['number']+_0x14d92d[_0x466aac(0x1dc)]:_0x9fb131['number']-_0x14d92d[_0x466aac(0x1dc)]:_0xa2684=await getCoinNumber(_0x14d92d['coin']);if(_0x14d92d[_0x466aac(0x19c)]&&_0x14d92d[_0x466aac(0x19c)][_0x466aac(0x22c)]==config[_0x466aac(0x211)])_0x45652b=_0x14d92d[_0x466aac(0x19c)][_0x466aac(0x258)];else{if(_0x14d92d[_0x466aac(0x19c)]&&_0x14d92d[_0x466aac(0x19c)][_0x466aac(0x22c)]==_0x466aac(0x237)&&!_0x45d6d8)_0x45652b=_0x14d92d['fee']['cost']*global[_0x466aac(0x273)][_0x466aac(0x237)+config['basecoin']];else _0x45652b=defaultFee*_0x14d92d['filled']*_0x14d92d[_0x466aac(0x205)];}_0x14d92d['side']==_0x466aac(0x1e2)?(_0x306513=_0xa2684!=0x0?(_0x9fb131[_0x466aac(0x1c5)]*_0x9fb131[_0x466aac(0x259)]+_0x14d92d[_0x466aac(0x205)]*(_0xa2684-_0x9fb131[_0x466aac(0x259)])+_0x45652b)/_0xa2684:0x0,_0x90dfb=_0x9fb131['realized']):(_0x306513=_0xa2684!=0x0?(_0x9fb131['breakeven']*_0x9fb131[_0x466aac(0x259)]-_0x14d92d['price']*(_0x9fb131[_0x466aac(0x259)]-_0xa2684)+_0x45652b)/_0xa2684:0x0,_0x90dfb=_0x9fb131[_0x466aac(0x239)]+(_0x14d92d[_0x466aac(0x205)]-_0x9fb131[_0x466aac(0x1c5)])*_0x14d92d[_0x466aac(0x1dc)]);_0xbdb4f3=(_0x14d92d[_0x466aac(0x205)]-_0x306513-_0x45652b/_0x14d92d['filled'])*_0xa2684;let _0x4307cb={'coin':_0x14d92d[_0x466aac(0x286)],'number':_0xa2684,'breakeven':formatResult(_0x306513,0x8),'realized':formatResult(_0x90dfb,0x8),'unrealized':formatResult(_0xbdb4f3,0x8),'fees':formatResult(_0x9fb131[_0x466aac(0x1ad)]+_0x45652b,0x8),'sells':_0x14d92d[_0x466aac(0x15a)]==_0x466aac(0x15f)?_0x9fb131[_0x466aac(0x298)]+0x1:_0x9fb131[_0x466aac(0x298)],'buys':_0x14d92d[_0x466aac(0x15a)]==_0x466aac(0x1e2)?_0x9fb131[_0x466aac(0x169)]+0x1:_0x9fb131['buys']};dbCoinResults['get'](_0x466aac(0x28d))[_0x466aac(0x270)]({'coin':_0x14d92d[_0x466aac(0x286)]})[_0x466aac(0x162)](_0x4307cb)[_0x466aac(0x271)]();if(!_0x45d6d8){if(_0x14d92d[_0x466aac(0x19c)]&&_0x14d92d[_0x466aac(0x19c)][_0x466aac(0x22c)]==_0x466aac(0x237)){const _0x2156a1=currentCoins['find'](_0x534f86=>_0x534f86[_0x466aac(0x286)]==_0x466aac(0x237));if(_0x2156a1){let _0x3300a4=dbCoinResults[_0x466aac(0x1e8)]('coins')[_0x466aac(0x270)]({'coin':'BNB'})['value']();_0x4307cb={..._0x3300a4,'number':_0x2156a1[_0x466aac(0x259)]},dbCoinResults['get'](_0x466aac(0x28d))[_0x466aac(0x270)]({'coin':_0x466aac(0x237)})[_0x466aac(0x162)](_0x4307cb)[_0x466aac(0x271)]();}}}}async function placeOrder(_0xf2d47f){const _0x2d2785=_0x44b8d7,_0x45d897=config[_0x2d2785(0x1ac)]==_0x2d2785(0x170)?'market':_0x2d2785(0x1f0);if(lockOrders==ORDERS[_0x2d2785(0x16a)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2d2785(0x27c)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x29b94c of _0xf2d47f){let _0x2070ff,_0x59a25a,_0xe54f1e,_0x33a022,_0x4c553c,_0xbbe43e=_0x29b94c[_0x2d2785(0x20d)];try{const _0x382b3f=await exchange[_0x2d2785(0x1c7)](_0xbbe43e);_0x2070ff=_0x29b94c[_0x2d2785(0x176)]?0x1/_0x29b94c['last']:_0x29b94c[_0x2d2785(0x25c)],_0x59a25a=_0x382b3f[_0x2d2785(0x20a)],_0xe54f1e=_0x382b3f['ask'];_0x29b94c['reverse']?(_0x33a022=_0x29b94c[_0x2d2785(0x15a)]=='buy'?_0x2d2785(0x15f):_0x2d2785(0x1e2),_0x4c553c=Math['abs'](_0x29b94c[_0x2d2785(0x25a)])/_0x2070ff):(_0x33a022=_0x29b94c[_0x2d2785(0x15a)],_0x4c553c=Math[_0x2d2785(0x29b)](_0x29b94c['trade']));_0x45d897==_0x2d2785(0x1f0)&&(config[_0x2d2785(0x1ac)]==_0x2d2785(0x16d)&&(_0x2070ff=_0x33a022==_0x2d2785(0x1e2)?_0x59a25a:_0xe54f1e),config[_0x2d2785(0x1ac)]==_0x2d2785(0x27a)&&(_0x2070ff=_0x33a022==_0x2d2785(0x1e2)?_0xe54f1e:_0x59a25a));_0x4c553c=formatResult(_0x4c553c,0x8),_0x2070ff=formatResult(_0x2070ff,0x8);const _0x16a859=_0x33a022=='sell'?config[_0x2d2785(0x254)]?String[_0x2d2785(0x173)]('0x'+config[_0x2d2785(0x254)])+'\x20':'':config[_0x2d2785(0x1b6)]?String['fromCodePoint']('0x'+config[_0x2d2785(0x1b6)])+'\x20':'',_0x4fb8ab=_0x45d897==_0x2d2785(0x170)?_0x2d2785(0x281):config[_0x2d2785(0x1ac)]=='limit-high'?_0x2d2785(0x1cd):_0x2d2785(0x23d),_0x144d7f=new Date()[_0x2d2785(0x257)]()[_0x2d2785(0x216)]()['slice'](-0x6)+'-'+Math[_0x2d2785(0x245)]()['toString']()[_0x2d2785(0x153)](-0x6);lastOrders[_0x2d2785(0x1ca)]({'customId':_0x144d7f,'symbol':_0xbbe43e,'coin':_0x29b94c['coin'],'side':_0x33a022,'reverse':_0x29b94c[_0x2d2785(0x176)],'filled':0x0});if(_0x45d897==_0x2d2785(0x170))logHistory(_0x2d2785(0x268),''+_0x16a859+_0x4fb8ab+_0x2d2785(0x27b)+_0xbbe43e+'\x20'+_0x33a022+'\x20#'+formatResult(_0x4c553c,0x8)+'\x20@'+formatResult(_0x2070ff,0x8));else logHistory(_0x2d2785(0x268),''+_0x16a859+_0x4fb8ab+'\x20order:\x20'+_0xbbe43e+'\x20'+_0x33a022+'\x20#'+formatResult(_0x4c553c,0x8)+'\x20@'+formatResult(_0x2070ff,0x8));const _0x2290dd=await exchange['createOrder'](_0xbbe43e,_0x45d897,_0x33a022,_0x4c553c,_0x2070ff,{'clientOrderId':_0x144d7f}),_0x52a153=lastOrders[_0x2d2785(0x227)]-0x1;_0x52a153>=0x0&&lastOrders[_0x52a153][_0x2d2785(0x1e1)]==_0x144d7f&&(lastOrders[_0x52a153]={...lastOrders[_0x52a153],'orderId':_0x2290dd['id'],'amount':_0x2290dd['amount'],'price':_0x2290dd[_0x2d2785(0x205)],'fee':_0x2290dd[_0x2d2785(0x19c)]});if(config[_0x2d2785(0x1a7)]!=0x0){let _0x3ecd8e=null;if(cooldownTracker[_0x2d2785(0x227)]==config[_0x2d2785(0x1a7)]-0x1)_0x3ecd8e=cooldownTracker[_0x2d2785(0x165)]();const _0xf0aac7=getTimeStamp();cooldownTracker[_0x2d2785(0x1ca)](_0xf0aac7);if(_0x3ecd8e){const _0x3850de=fns[_0x2d2785(0x220)](new Date(_0xf0aac7),new Date(_0x3ecd8e));if(_0x3850de<cooldownInterval){logHistory('error',_0x2d2785(0x171)+config[_0x2d2785(0x1a7)]+_0x2d2785(0x233)+cooldownInterval/0x3c+_0x2d2785(0x208)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0xc5be20){if(_0xc5be20[_0x2d2785(0x216)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x426f82=>_0x426f82[_0x2d2785(0x20d)]!=_0xbbe43e),logHistory(_0x2d2785(0x215),_0x2d2785(0x144)+_0xbbe43e);else _0xc5be20[_0x2d2785(0x216)]()[_0x2d2785(0x29a)](_0x2d2785(0x246))?(lastOrders=lastOrders[_0x2d2785(0x15d)](_0x1bddb5=>_0x1bddb5[_0x2d2785(0x20d)]!=_0xbbe43e),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0xbbe43e)):(lastOrders=lastOrders[_0x2d2785(0x15d)](_0x4a4427=>_0x4a4427['symbol']!=_0xbbe43e),await handleError(_0xc5be20,_0x2d2785(0x21e),_0xbbe43e));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2d2785(0x227)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x285924=config[_0x2d2785(0x1ac)]==_0x2d2785(0x170)?validateOrderTimeout*0x3c*0x3e8:config[_0x2d2785(0x1c3)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2a24dd=_0x2d2785;validateOrders(_0x2a24dd(0x23f));},_0x285924);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2d2785(0x260),_0x2d2785(0x2a9)));}else{if(coolingDown)!config[_0x2d2785(0x17f)]&&logHistory(_0x2d2785(0x215),_0x2d2785(0x143));else lockOrders!=ORDERS[_0x2d2785(0x16a)]&&(!config[_0x2d2785(0x17f)]&&(config[_0x2d2785(0x1ac)]=='market'?logHistory(_0x2d2785(0x215),_0x2d2785(0x1e9)):logHistory(_0x2d2785(0x215),_0x2d2785(0x1b1))));}}function persistOpenOrders(_0x394cc4){const _0x35e7fb=_0x44b8d7,_0x1be93e={...config,'openOrders':_0x394cc4};let _0x27ead3=dbConfig['get']('bot')['find']({'botID':botID})[_0x35e7fb(0x210)]();_0x27ead3&&dbConfig[_0x35e7fb(0x1e8)](_0x35e7fb(0x272))[_0x35e7fb(0x270)]({'botID':botID})[_0x35e7fb(0x162)](_0x1be93e)['write']();}function restoreOrders(){const _0x3c9307=_0x44b8d7;let _0x5b7942;config[_0x3c9307(0x161)]&&allOpenOrders['forEach'](_0x17ef08=>{const _0x2112ae=_0x3c9307,_0x4cdf8b=config[_0x2112ae(0x161)][_0x2112ae(0x270)](_0x39dfa4=>_0x39dfa4[_0x2112ae(0x26a)]==_0x17ef08['id']);_0x4cdf8b&&(lastOrders[_0x2112ae(0x1ca)](_0x4cdf8b),_0x5b7942=_0x17ef08['timestamp']);});if(lastOrders[_0x3c9307(0x227)]>0x0){lockOrders=ORDERS[_0x3c9307(0x27c)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0xa02d05=new Date()[_0x3c9307(0x257)](),_0xe10d60=config[_0x3c9307(0x1ac)]==_0x3c9307(0x170)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5b7942+_0xe10d60>_0xa02d05){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x572bea=_0x3c9307;validateOrders(_0x572bea(0x23f));},_0x5b7942+_0xe10d60-_0xa02d05);}else validateOrders(_0x3c9307(0x23f));}}async function sendPortfolioTelegram(){const _0x3fdcf7=_0x44b8d7;if(!coinsLoaded){process[_0x3fdcf7(0x14b)]({'telegrammsg':_0x3fdcf7(0x278)},_0xe4c0f8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x54c835=[_0x3fdcf7(0x204),'USD',_0x3fdcf7(0x26d),_0x3fdcf7(0x14a)],_0xbbe1f7=_0x54c835[_0x3fdcf7(0x29a)](config[_0x3fdcf7(0x211)])?0x2:0x8;let _0xdcedc5='';if(config['showname'])_0xdcedc5=_0x3fdcf7(0x1d8)+config[_0x3fdcf7(0x1d4)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0xdcedc5=_0x3fdcf7(0x292)+botID+'\x20portfolio:</b>\x20\x0a\x0a';const _0x248112=getKPIs(_0x3fdcf7(0x211)),_0x30aaaf=getKPIs(_0x3fdcf7(0x1be));_0xdcedc5+='<pre>',_0xdcedc5+=_0x248112[_0x3fdcf7(0x1ef)]+_0x3fdcf7(0x228)+_0x248112[_0x3fdcf7(0x210)]+'\x20\x0a',_0xdcedc5+=_0x248112[_0x3fdcf7(0x22d)]+':\x20'+_0x248112['change']+'%\x20\x0a',_0xdcedc5+=_0x30aaaf['leftTxt']+':\x20'+_0x30aaaf[_0x3fdcf7(0x210)]+'\x20'+config[_0x3fdcf7(0x211)]+'\x0a',_0xdcedc5+=_0x30aaaf[_0x3fdcf7(0x22d)]+':\x20'+_0x30aaaf[_0x3fdcf7(0x285)]+_0x3fdcf7(0x15c),_0xdcedc5+='\x0a',_0xdcedc5+='-------------------------------\x0a',_0xdcedc5+=_0x3fdcf7(0x1d2),_0xdcedc5+='-------------------------------\x0a',currentCoins[_0x3fdcf7(0x182)](_0x5786ac=>{const _0x141a78=_0x3fdcf7;_0xdcedc5+=_0x5786ac[_0x141a78(0x286)]['padEnd'](0x7)+'|\x20'+formatPad(_0x5786ac[_0x141a78(0x22a)],0x2,0x6)+'|\x20'+formatPad(_0x5786ac[_0x141a78(0x221)],0x2,0x6)+'|\x20'+formatPad(_0x5786ac[_0x141a78(0x19d)]*0x64,0x2,0x6)+'\x0a';}),_0xdcedc5+='</pre>',process[_0x3fdcf7(0x14b)]({'telegrammsg':_0xdcedc5},_0x2fcf48=>{});}function formatPad(_0x20e604,_0x534562,_0xdf34db){const _0x3c27b5=_0x44b8d7,_0x311f46=formatResultString(_0x20e604,_0x534562);return _0x311f46?_0x311f46[_0x3c27b5(0x1e0)](_0xdf34db):''[_0x3c27b5(0x1e0)](_0xdf34db);}function logHistory(_0xe38f9a,_0x2240ca,_0x39431a=''){const _0x2448ae=_0x44b8d7;let _0x10f735={'time':getTimeStamp(),'type':_0xe38f9a,'event':_0x2240ca};dbLogs[_0x2448ae(0x1e8)]('logs')['push'](_0x10f735)[_0x2448ae(0x271)]();if(_0x39431a=='')_0x39431a=_0x2240ca;proxyEmit(_0x2448ae(0x193),{'log':_0x10f735,'summary':_0x39431a}),process[_0x2448ae(0x14b)]({'telegram':{..._0x10f735,'botname':config['botname'],'showname':config['showname']}},_0x5d55c4=>{}),logger[_0x2448ae(0x191)](''+_0x10f735[_0x2448ae(0x193)]);}function emitHistory(_0x2f3a37={}){const _0xbd22c5=_0x44b8d7;Object[_0xbd22c5(0x264)](_0x2f3a37)[_0xbd22c5(0x227)]==0x0&&(_0x2f3a37={'type':[_0xbd22c5(0x268),'event'],'event':'','page':0x1});if(_0x2f3a37['type'][_0xbd22c5(0x29a)]('event'))_0x2f3a37[_0xbd22c5(0x266)]['splice'](_0x2f3a37['type'][_0xbd22c5(0x189)](_0xbd22c5(0x193)),0x1,_0xbd22c5(0x215),_0xbd22c5(0x260));if(dbLogs[_0xbd22c5(0x23b)]('logs')[_0xbd22c5(0x210)]()){let _0x2f62d4=dbLogs['get'](_0xbd22c5(0x236))['filter'](_0x5248a=>{const _0x41f611=_0xbd22c5;if(_0x2f3a37[_0x41f611(0x266)][_0x41f611(0x227)]==0x0)return![];else return _0x2f3a37[_0x41f611(0x266)]['includes'](_0x5248a['type']);})[_0xbd22c5(0x15d)](_0x1fddd8=>{const _0xbe016e=_0xbd22c5;if(_0x2f3a37[_0xbe016e(0x193)]=='')return!![];else return _0x1fddd8[_0xbe016e(0x193)][_0xbe016e(0x229)]()[_0xbe016e(0x29a)](_0x2f3a37[_0xbe016e(0x193)]['toLowerCase']());})['sortBy']('time'),_0x260d47=_0x2f62d4[_0xbd22c5(0x210)]()[_0xbd22c5(0x227)];_0x2f62d4=_0x2f62d4[_0xbd22c5(0x176)]()[_0xbd22c5(0x153)]((_0x2f3a37[_0xbd22c5(0x1b5)]-0x1)*logPageSize,_0x2f3a37['page']*logPageSize-0x1)[_0xbd22c5(0x176)]()[_0xbd22c5(0x210)](),proxyEmit('event-history',{'logs':_0x2f62d4,'total':_0x260d47});}else proxyEmit(_0xbd22c5(0x200),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x36a069){const _0x18b731=_0x44b8d7;if(dbLogs[_0x18b731(0x23b)]('logs')[_0x18b731(0x210)]()){const _0x322aaf=dbLogs[_0x18b731(0x1e8)]('logs')[_0x18b731(0x28e)](_0x18b731(0x249))['filter'](_0x1f299e=>{const _0x194a3f=_0x18b731;return _0x1f299e['type']==_0x194a3f(0x268);})[_0x18b731(0x210)]();dbLogs[_0x18b731(0x1e8)](_0x18b731(0x236))[_0x18b731(0x1c4)]()['write'](),dbLogs[_0x18b731(0x1e8)](_0x18b731(0x236))['assign'](_0x322aaf)['write'](),emitHistory(_0x36a069);}}async function pauseBot(_0x2e792a=''){const _0x1a3b3b=_0x44b8d7,_0x383c35=new Date()[_0x1a3b3b(0x257)]();if(!lastErrorShown||_0x383c35-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x383c35;!lastBotPause?(lastBotPause=_0x383c35,consecutivePauses=0x1):(_0x383c35-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1a3b3b(0x14b)]({'stop':_0x1a3b3b(0x26f)},_0x43978b=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x2e792a)_0x2e792a+=_0x1a3b3b(0x1e7);logHistory(_0x1a3b3b(0x215),_0x2e792a+_0x1a3b3b(0x150)+pauseBotInterval/0xea60+_0x1a3b3b(0x1af)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0xe2df04=_0x44b8d7;process[_0xe2df04(0x14b)]({'stop':_0xe2df04(0x14f)},_0x5569ff=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3d51d9,_0x3f4478){const _0x1836fb=_0x44b8d7;if(_0x3d51d9['toString']()[_0x1836fb(0x29a)](_0x1836fb(0x1c6)))return logHistory(_0x1836fb(0x215),config['exchange']+_0x1836fb(0x29c)),![];else{if(_0x3d51d9[_0x1836fb(0x216)]()[_0x1836fb(0x29a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x1836fb(0x215),config['exchange']+_0x1836fb(0x21b)),![];else{if(_0x3d51d9[_0x1836fb(0x216)]()[_0x1836fb(0x29a)](_0x1836fb(0x219)))return logHistory(_0x1836fb(0x215),config[_0x1836fb(0x2a0)]+_0x1836fb(0x293)+config[_0x1836fb(0x2a0)]),![];else await handleError(_0x3d51d9,_0x3f4478);}}}async function handleError(_0x434b37,_0x14b481,_0x101536=''){const _0x30d7b7=_0x44b8d7;if(_0x434b37[_0x30d7b7(0x216)]()['includes'](_0x30d7b7(0x247)))await pauseBot(config[_0x30d7b7(0x2a0)]+_0x30d7b7(0x1aa));else{if(_0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)]('ExchangeNotAvailable'))await pauseBot(config[_0x30d7b7(0x2a0)]+_0x30d7b7(0x1df));else{if(_0x434b37[_0x30d7b7(0x216)]()['includes'](_0x30d7b7(0x172)))await pauseBot(config[_0x30d7b7(0x2a0)]+_0x30d7b7(0x19e));else{if(_0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)](_0x30d7b7(0x291)))logHistory('error',_0x14b481+_0x30d7b7(0x21f)),logHistory(_0x30d7b7(0x215),_0x30d7b7(0x25f)),await killBot();else{if(_0x434b37[_0x30d7b7(0x216)]()['includes'](_0x30d7b7(0x242)))logHistory('error',_0x14b481+_0x30d7b7(0x294)),logHistory(_0x30d7b7(0x215),_0x30d7b7(0x25f)),await killBot();else{if(_0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)](_0x30d7b7(0x1c6)))logHistory(_0x30d7b7(0x215),_0x14b481+'\x20|\x20'+config[_0x30d7b7(0x2a0)]+_0x30d7b7(0x29c)),logHistory(_0x30d7b7(0x215),_0x30d7b7(0x25f)),await killBot();else{if(_0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)](_0x30d7b7(0x252)))logHistory(_0x30d7b7(0x215),_0x14b481+_0x30d7b7(0x1e7)+config[_0x30d7b7(0x2a0)]+_0x30d7b7(0x21b)),logHistory(_0x30d7b7(0x215),_0x30d7b7(0x25f)),await killBot();else{if(_0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)](_0x30d7b7(0x219)))logHistory('error',_0x14b481+_0x30d7b7(0x1e7)+config['exchange']+_0x30d7b7(0x1d9)+config['exchange']),logHistory(_0x30d7b7(0x215),_0x30d7b7(0x25f)),await killBot();else _0x434b37[_0x30d7b7(0x216)]()[_0x30d7b7(0x29a)](_0x30d7b7(0x256))?logHistory(_0x30d7b7(0x215),_0x14b481+_0x30d7b7(0x1a1)+_0x101536):(logger[_0x30d7b7(0x191)](_0x14b481+_0x30d7b7(0x25e),_0x434b37),await pauseBot(_0x30d7b7(0x29e)));}}}}}}}}function formatResult(_0x279c9c,_0x3499a5){const _0x47c5fe=_0x44b8d7;return parseFloat(_0x279c9c[_0x47c5fe(0x1f8)](_0x3499a5));}function formatResultTruncate(_0x281dab,_0x36835e){const _0x360f78=_0x44b8d7;let _0x5bb14a=formatResultString(_0x281dab,0xa),_0x42511c=_0x5bb14a[_0x360f78(0x189)]('.');return _0x42511c!=-0x1&&(_0x5bb14a=_0x5bb14a[_0x360f78(0x153)](0x0,_0x42511c+_0x36835e+0x1)),Number(_0x5bb14a);}function formatResultString(_0x3ea9ac,_0x184015){const _0x394cf1=_0x44b8d7;let _0x847f5b;if(!(''+_0x3ea9ac)['includes']('e'))_0x847f5b=+(Math[_0x394cf1(0x28c)](_0x3ea9ac+'e+'+_0x184015)+'e-'+_0x184015);else{let _0x3d81fa=(''+_0x3ea9ac)[_0x394cf1(0x26c)]('e'),_0x2bb7d1='';+_0x3d81fa[0x1]+_0x184015>0x0&&(_0x2bb7d1='+'),_0x847f5b=+(Math['round'](+_0x3d81fa[0x0]+'e'+_0x2bb7d1+(+_0x3d81fa[0x1]+_0x184015))+'e-'+_0x184015);}return Number(_0x847f5b)[_0x394cf1(0x1f8)](_0x184015);}function getServerTime(){const _0x5740dc=_0x44b8d7,_0x5f354f=new Date();return _0x5f354f['getFullYear']()+'/'+(_0x5f354f[_0x5740dc(0x17a)]()+0x1)[_0x5740dc(0x216)]()[_0x5740dc(0x1e0)](0x2,'0')+'/'+_0x5f354f['getDate']()[_0x5740dc(0x216)]()['padStart'](0x2,'0')+'\x20'+_0x5f354f[_0x5740dc(0x158)]()[_0x5740dc(0x216)]()[_0x5740dc(0x1e0)](0x2,'0')+':'+_0x5f354f[_0x5740dc(0x1cc)]()[_0x5740dc(0x216)]()['padStart'](0x2,'0')+':'+_0x5f354f[_0x5740dc(0x1cf)]()[_0x5740dc(0x216)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2c9cf9=_0x44b8d7,_0x5b0a70=shiftedTime();return _0x5b0a70[_0x2c9cf9(0x299)]()+'/'+(_0x5b0a70[_0x2c9cf9(0x17a)]()+0x1)['toString']()[_0x2c9cf9(0x1e0)](0x2,'0')+'/'+_0x5b0a70['getDate']()['toString']()[_0x2c9cf9(0x1e0)](0x2,'0')+'\x20'+_0x5b0a70[_0x2c9cf9(0x158)]()['toString']()['padStart'](0x2,'0')+':'+_0x5b0a70[_0x2c9cf9(0x1cc)]()[_0x2c9cf9(0x216)]()[_0x2c9cf9(0x1e0)](0x2,'0')+':'+_0x5b0a70[_0x2c9cf9(0x1cf)]()[_0x2c9cf9(0x216)]()[_0x2c9cf9(0x1e0)](0x2,'0');}function getDate(){const _0x2c7614=_0x44b8d7,_0x30a6a5=shiftedTime();return _0x30a6a5[_0x2c7614(0x299)]()+'/'+(_0x30a6a5[_0x2c7614(0x17a)]()+0x1)[_0x2c7614(0x216)]()[_0x2c7614(0x1e0)](0x2,'0')+'/'+_0x30a6a5[_0x2c7614(0x2a1)]()['toString']()[_0x2c7614(0x1e0)](0x2,'0');}function getHour(){const _0x2c0722=_0x44b8d7,_0x586361=shiftedTime();return _0x586361[_0x2c0722(0x158)]()['toString']()[_0x2c0722(0x1e0)](0x2,'0');}function sleep(_0x5cd404){return new Promise(_0x2a1e87=>setTimeout(_0x2a1e87,_0x5cd404));}function shiftedTime(){const _0x35b95a=_0x44b8d7,_0x85f6c4=new Date();let _0x33f7aa=_0x85f6c4;if(config&&config[_0x35b95a(0x1fe)]!==0x0)_0x33f7aa=fns[_0x35b95a(0x152)](_0x85f6c4,{'hours':config['timeshift']});return _0x33f7aa;}function timer(_0x147cac){const _0x5456c6=_0x44b8d7,_0x4b41a1=new Date();!lasttime?console[_0x5456c6(0x1ed)](_0x5456c6(0x238),_0x147cac,_0x4b41a1):console['log'](_0x5456c6(0x238),_0x147cac,(_0x4b41a1-lasttime)/0x3e8),lasttime=_0x4b41a1;}