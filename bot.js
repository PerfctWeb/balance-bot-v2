const _0x51b6e4=_0x2474;(function(_0xec6810,_0x57a802){const _0x50616=_0x2474,_0x13b45f=_0xec6810();while(!![]){try{const _0x5dcacd=-parseInt(_0x50616(0x17b))/0x1+parseInt(_0x50616(0xbe))/0x2+-parseInt(_0x50616(0x1c4))/0x3+-parseInt(_0x50616(0xed))/0x4*(parseInt(_0x50616(0x164))/0x5)+-parseInt(_0x50616(0x191))/0x6*(parseInt(_0x50616(0xae))/0x7)+parseInt(_0x50616(0x105))/0x8*(parseInt(_0x50616(0x11d))/0x9)+parseInt(_0x50616(0x126))/0xa;if(_0x5dcacd===_0x57a802)break;else _0x13b45f['push'](_0x13b45f['shift']());}catch(_0x124dab){_0x13b45f['push'](_0x13b45f['shift']());}}}(_0x447b,0xa2e56));const _0x3741bd=function(){let _0x4ad24b=!![];return function(_0x489b61,_0x145810){const _0x6ea2fc=_0x4ad24b?function(){if(_0x145810){const _0x1b6f46=_0x145810['apply'](_0x489b61,arguments);return _0x145810=null,_0x1b6f46;}}:function(){};return _0x4ad24b=![],_0x6ea2fc;};}(),_0x453881=_0x3741bd(this,function(){const _0xf1de99=_0x2474;return _0x453881[_0xf1de99(0x1b6)]()[_0xf1de99(0x19f)](_0xf1de99(0xa1))[_0xf1de99(0x1b6)]()[_0xf1de99(0xbf)](_0x453881)[_0xf1de99(0x19f)](_0xf1de99(0xa1));});_0x453881();'use strict';const ccxt=require(_0x51b6e4(0x131)),low=require(_0x51b6e4(0x124)),FileSync=require(_0x51b6e4(0xeb)),fs=require('fs'),fns=require(_0x51b6e4(0x1ad)),Crypt=require(_0x51b6e4(0x20e))[_0x51b6e4(0x15e)],util=require(_0x51b6e4(0x161)),argv=require(_0x51b6e4(0xc7))(process['argv']['slice'](0x2))[_0x51b6e4(0x13a)],path=require(_0x51b6e4(0x189));let exchange;global[_0x51b6e4(0x93)]={},global[_0x51b6e4(0xf5)]={};const usdBasecoins=[_0x51b6e4(0x186),_0x51b6e4(0x16a),_0x51b6e4(0x165),_0x51b6e4(0x162),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x51b6e4(0x1b3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x51b6e4(0x10e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x51b6e4(0xdc),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x51b6e4(0xee))[_0x51b6e4(0x1ef)],botID=process[_0x51b6e4(0x13a)][0x2]||_0x51b6e4(0x19a),pattern=/^[0-9]{3}$/;!pattern[_0x51b6e4(0x113)](botID)&&(console[_0x51b6e4(0x152)](_0x51b6e4(0x1c7)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x51b6e4(0x13a)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x51b6e4(0xcf),logspath=userID?'./logs/'+userID+'/':_0x51b6e4(0x12c),loggerfile=fs['createWriteStream'](logspath+_0x51b6e4(0x91),{'flags':'a'});!fs[_0x51b6e4(0xe0)](configpath)&&fs[_0x51b6e4(0x194)](configpath);!fs[_0x51b6e4(0xe0)](logspath)&&fs[_0x51b6e4(0x194)](logspath);const configfile=configpath+'bot-'+botID+_0x51b6e4(0x1a4),logfile=configpath+_0x51b6e4(0x118)+botID+_0x51b6e4(0x1df),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x51b6e4(0x118)+botID+_0x51b6e4(0x1f1),settingsfile=configpath+_0x51b6e4(0x108),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x51b6e4(0x1af)]({'logs':[],'version':serverversion})[_0x51b6e4(0x104)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x51b6e4(0x1af)]({'data':[],'version':serverversion})[_0x51b6e4(0x104)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x51b6e4(0x1af)]({'bot':[],'version':serverversion})[_0x51b6e4(0x104)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x51b6e4(0x1af)]({'coins':[],'version':serverversion})[_0x51b6e4(0x104)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x51b6e4(0x130),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4a09e2=>{const _0x37fe0c=_0x51b6e4;console[_0x37fe0c(0x152)](_0x4a09e2);},'simple':_0x16e680=>{const _0x295281=_0x51b6e4;console[_0x295281(0x152)](_0x16e680),loggerfile[_0x295281(0x104)](util[_0x295281(0xb7)](_0x16e680)+'\x0a');},'full':async(_0x24ae6d,_0x22c32a='')=>{const _0x2b8c76=_0x51b6e4;let _0xda23bb;if(config[_0x2b8c76(0x1d7)])_0xda23bb=getTimeStamp()+':\x20'+config['botname']+_0x2b8c76(0x159)+_0x24ae6d;else _0xda23bb=getTimeStamp()+':\x20Bot\x20'+botID+_0x2b8c76(0x159)+_0x24ae6d;console[_0x2b8c76(0x152)](_0xda23bb),loggerfile['write'](util[_0x2b8c76(0xb7)](_0xda23bb)+'\x0a'),_0x22c32a&&(console[_0x2b8c76(0x152)](_0x22c32a),loggerfile[_0x2b8c76(0x104)](util[_0x2b8c76(0xb7)](_0x22c32a)+'\x0a'));},'debug':async(_0x44df1c,_0x281545='')=>{const _0x4bf29a=_0x51b6e4;let _0x511370;if(config[_0x4bf29a(0x1d7)])_0x511370=getTimeStamp()+':\x20'+config[_0x4bf29a(0x1ec)]+_0x4bf29a(0xa5)+_0x44df1c;else _0x511370=getTimeStamp()+_0x4bf29a(0xf3)+botID+'\x20>\x20[DEBUG]\x20'+_0x44df1c;if(debugging)console[_0x4bf29a(0x152)](_0x511370);loggerfile[_0x4bf29a(0x104)](util[_0x4bf29a(0xb7)](_0x511370)+'\x0a');if(_0x281545){if(debugging)console[_0x4bf29a(0x152)](_0x281545);loggerfile[_0x4bf29a(0x104)](util[_0x4bf29a(0xb7)](_0x281545)+'\x0a');}}};process['on']('uncaughtException',function(_0x728084){const _0x34f390=_0x51b6e4;logHistory('error',_0x34f390(0x1a2)),logger[_0x34f390(0x1e5)](_0x34f390(0x94),_0x728084);});settings[_0x51b6e4(0xca)]!=config[_0x51b6e4(0xca)]&&updateTimeshift(settings[_0x51b6e4(0xca)]);settings[_0x51b6e4(0x9d)]!=config[_0x51b6e4(0x9d)]&&updateOnepagemode(settings[_0x51b6e4(0x9d)]);process[_0x51b6e4(0xe2)]({'started':_0x51b6e4(0xd3)},_0x14a943=>{}),initializeProcessListeners();function proxyEmit(_0x5af021,_0x5ad59b=null){const _0x44dfa4=_0x51b6e4;process[_0x44dfa4(0xe2)]({'function':_0x5af021,'args':_0x5ad59b},_0x348ad0=>{});}function initializeProcessListeners(){const _0x37a8bc=_0x51b6e4;process['on'](_0x37a8bc(0x169),_0x113809=>{const _0x2b24c4=_0x37a8bc;switch(Object[_0x2b24c4(0x115)](_0x113809)[0x0]){case _0x2b24c4(0xca):_0x113809['timeshift']!=undefined&&(settings[_0x2b24c4(0xca)]=_0x113809[_0x2b24c4(0xca)],updateTimeshift(settings[_0x2b24c4(0xca)]));break;case'onepagemode':_0x113809['onepagemode']!=undefined&&(settings['onepagemode']=_0x113809[_0x2b24c4(0x9d)],updateOnepagemode(settings[_0x2b24c4(0x9d)]));break;case _0x2b24c4(0x20b):_0x113809['bots']!=undefined&&(bots=JSON['parse'](_0x113809[_0x2b24c4(0x20b)]),proxyEmit('bots',bots));break;case'function':switch(_0x113809['function']){case _0x2b24c4(0x10f):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x2b24c4(0x146):emitHistory(_0x113809[_0x2b24c4(0x19d)]);break;case _0x2b24c4(0x155):deleteHistoryAlerts(_0x113809[_0x2b24c4(0x19d)]);break;case'getPortfolio':getPortfolio(_0x113809[_0x2b24c4(0x19d)]);break;case'storeConfiguration':storeConfiguration(_0x113809[_0x2b24c4(0x19d)]);break;case _0x2b24c4(0xe7):storeHeadless(_0x113809[_0x2b24c4(0x19d)]);break;case _0x2b24c4(0x181):storeFiat(_0x113809[_0x2b24c4(0x19d)]);break;case _0x2b24c4(0xd2):resetHistory();break;case _0x2b24c4(0x1fa):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x113809[_0x2b24c4(0x19d)]);break;case _0x2b24c4(0x158):cancelLoading();break;case _0x2b24c4(0x21a):showConfig();break;case _0x2b24c4(0x1b0):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x548568=![]){const _0x529366=_0x51b6e4;logger[_0x529366(0x1e5)](_0x529366(0x13d)+(_0x548568?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x548568)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x529366(0x196)]!=''&&config['apiKey']!='***'){loadingProgress=0x0;if(_0x548568){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x43d625){handleErrorNoStop(_0x43d625,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x3168d7=await getCoins();[currentCoins,currentCoinsAll]=_0x3168d7,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x529366(0x1e5)](_0x529366(0x13b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x529366(0x175)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x3a9947){await handleError(_0x3a9947,'stopExchange()');}}function _0x447b(){const _0xdba1ba=['configuration','bot-','apiPassword','fromCodePoint','active','fetchTickers','1557tcEvxB','fees','red_yellow_blue','\x20|\x20','coin','\x20/\x20','placeOrder()','lowdb','exec','31560070aJmUUT','Bot\x20','initTickers()',':\x20timer\x20>','cancelOrder','coin-loading-progress','./logs/','price','UNLOCKING','\x20minutes\x20-\x20','sha256','ccxt','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','watchTransactions()','final','limit','toFixed','\x20|\x20Custom\x20ID:\x20','highest','2\x20-\x20handling\x20FILLED\x20order:\x20','argv','Loading\x20completed','target','Reset\x20|\x20','BNB/','ordertype','Insufficient\x20funds\x20to\x20execute\x20order:\x20','timeout','remainingSymbols','Huobi','<b>Bot\x20','getSeconds','emitHistory','set','getAllOrders()','canceled','min','padEnd','LOCKED','limits','value','order','/USD','exchanges','log','Fee\x20discount\x20refund\x20detected:\x20','%\x20(','deleteHistoryAlerts','startdate','\x20metrics:</b>\x20\x0a\x0a','cancelLoading','\x20>\x20','progress','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','configuration-stored','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Crypt','\x20network\x20error','yyyy-MM-dd\x27T\x27HH:mm:ss','util','USDT','replace','2259185iZZzrA','TUSD','startprice','\x20:\x20','kill','message','BUSD','changes','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','event-history','1\x20-\x20FILLED\x20known\x20order:\x20','2.6.0','initial','decrypt','</pre>','Cooldown\x20ended\x20-\x20balancing\x20resumed','getMinutes','length','padStart','yyyy/MM/dd','random','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','720293OxfjmP','none','AuthenticationError','balances','NetworkError','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','storeFiat','splice','portfolio','cloneDeep','\x20hour','USD','open','Resetting\x20bot\x20history','path','2.5.0','Net\x20effect','\x20order:\x20','push','/EUR','orderstatus','average','216642IOPjGK','Waited\x20','concat','mkdirSync','<b>','apiKey','slice','spot','watchOrders()','001','Executed\x20','\x20exchange','args','bid','search','find','netoffset','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','distribution','-config.json','reverse','password','logs','round','data','must\x20be\x20greater\x20than\x20minimum\x20amount','Limit\x20(high-margin)','assign','date-fns','getTime','defaults','sendMetricsTelegram','watchOrders','loadMarkets','freeze','colorscheme','status','toString','number','\x20not\x20responding','filter','parseISO','starting-balances','ORDERS.UNLOCKED','2\x20-\x20Handled\x20open\x20orders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','apiSecret','2\x20-\x20Validate\x20orders:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchClosedOrders','valid','2951163esVntf','\x20portfolio:</b>\x20\x0a\x0a','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Error:\x20Invalid\x20argument\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','sortBy','emojisell','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Manual\x20balancing\x20required','Headless:\x20','basecoin','Resetting\x20coin\x20results:\x20','ExchangeError','Limit\x20(low-margin)','Invalid\x20quantity','map','BNB','buys','Avoiding\x20continuous\x20order\x20attempts','showname','no\x20open\x20orders','realized','market','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','.json','RequestTimeout','startnumber','-events.json','indexOf','net-basecoin','InvalidOrder','ID:\x20','restart','debug','leftTxt','timestamp','watchTrades','full','getPortfolio(0)','liquidity','botname','cancel','Invalid\x20API\x20key\x20or\x20secret\x20entered','version','recreateCoinResults()','-results.json','bot','entries','Exception\x20thrown\x20in\x20','ExchangeNotAvailable','eur','pro','buy','Error\x20while\x20deleting\x20files:\x20','getStartingBalances','sell','Order\x20is\x20invalid:\x20','forEach','delta','\x20|\x20highest\x20fee:\x20','enabled','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Bybit','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Initializing\x20coin\x20results','balancing\x20resumed','floor','threshold','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','fee','total','bots','getMonth','limit-high','hybrid-crypto-js','Error\x20details:','Unknown\x20error\x20occured','time','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','added','2.3.5','getCoins()','***','Invalid\x20symbol:\x20','trade','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','showConfig','datetime','/output-000.log','Order\x20filled:\x20','ticker','Uncaught\x20Exception:','getCoinNumber()','emojibuy','fetchBalance','Net\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','abs','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getHours','onepagemode','add','removed','change24h','(((.+)+)+)+$','includes','Transaction\x20detection\x20blocked','Exchange','\x20>\x20[DEBUG]\x20','recreate','cancelOrders()','secure','Failed\x20to\x20load\x20coin\x20data\x20for\x20','recent20','RateLimitExceeded','substring','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','217AdaOeV','botID','get','type','offset','fetchTickers()','filled','cooldown','MIN_NOTIONAL','format','\x20has\x20a\x2024h\x20drop\x20of\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ask','event','page','EUR','803608kJbRtp','constructor','coins','last','error','rightTxt','date','OnMaintenance','recovery','yargs/yargs','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','-performance.json','timeshift','DDoSProtection','BTC','Binance','unlinkSync','./config/','success','openOrders','resetHistory','running','************','excluded','basecoinvalue','1\x20-\x20Handle\x20open\x20orders','parse','InsufficientFunds','usd','performance','\x20minutes','amount','cost','ETH','existsSync','orderId','send','<pre>','Portfolio\x20change\x20detected:\x20','net-fiat','closed','storeHeadless','breakeven','side','shift','lowdb/adapters/FileSync','Huobipro','4EfvqvH','./version.json','max','watchTrades()','symbol','toLowerCase',':\x20Bot\x20','ongoing','change','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','fiat','percentage','ORDERS.UNLOCKING','-------------------------------\x0a','autoliquidity','fetchTicker','sort','join','exchange','remove','currency','getPortfolio(1)','has','write','17784CGUgAP','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','split','bb-settings.json','isEqual','Order(s)\x20not\x20validated\x20after\x20','Executing\x20exchange\x20reload','createOrder','getDate','UNLOCKED','initclient','stringify','1\x20-\x20FILLED\x20unknown\x20order:\x20','startsWith','test','headless','keys','getFullYear'];_0x447b=function(){return _0xdba1ba;};return _0x447b();}async function reloadExchange(){const _0x32fd03=_0x51b6e4;while(lockOrders!=ORDERS[_0x32fd03(0x10e)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x32fd03(0x1e5)](_0x32fd03(0x10b)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x526ca6=config[_0x51b6e4(0xff)],_0x297d84=config[_0x51b6e4(0x196)],_0x3fb145=config[_0x51b6e4(0x1bf)],_0x3513e3=config['apiPassword']){const _0x45d6b0=_0x51b6e4;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x526ca6)&&(logHistory('error',_0x45d6b0(0x16c)+_0x526ca6+_0x45d6b0(0x19c)),killBot());const _0x1bed7f=ccxt[_0x45d6b0(0x1f7)][_0x526ca6['toLowerCase']()];exchange=new _0x1bed7f({'apiKey':_0x297d84,'secret':_0x3fb145,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3513e3)exchange['password']=_0x3513e3;}function setStableCoins(){const _0x130e18=_0x51b6e4;let _0x4f8b79=config[_0x130e18(0x1ce)]==_0x130e18(0xdf)?_0x130e18(0xdf):_0x130e18(0xcc),_0x1940ec=!allSymbols[_0x130e18(0xa2)](_0x4f8b79+_0x130e18(0x150))?_0x130e18(0x162):_0x130e18(0x186),_0x36f0fd=!allSymbols[_0x130e18(0xa2)](_0x4f8b79+_0x130e18(0x18e))?_0x1940ec:_0x130e18(0xbd);stablecoins={'eur':{'coin':''+_0x4f8b79+_0x36f0fd,'symbol':_0x4f8b79+'/'+_0x36f0fd},'usd':{'coin':''+_0x4f8b79+_0x1940ec,'symbol':_0x4f8b79+'/'+_0x1940ec}};}async function initwsCcxt(){const _0x197391=_0x51b6e4;initCycle++;const _0x4ae655=initCycle;let _0x3b07a5=[];config['portfolio'][_0x197391(0x1fd)](_0x228a81=>{const _0x4ec67b=_0x197391;if(!_0x228a81[_0x4ec67b(0xd5)]&&_0x228a81['coin']!=config[_0x4ec67b(0x1ce)])_0x3b07a5['push'](_0x228a81[_0x4ec67b(0xf1)]);});if(!_0x3b07a5['includes'](stablecoins['eur'][_0x197391(0xf1)]))_0x3b07a5['push'](stablecoins[_0x197391(0x1f6)][_0x197391(0xf1)]);if(!_0x3b07a5['includes'](stablecoins[_0x197391(0xda)][_0x197391(0xf1)]))_0x3b07a5[_0x197391(0x18d)](stablecoins[_0x197391(0xda)][_0x197391(0xf1)]);if(config['exchange'][_0x197391(0x112)](_0x197391(0xcd))){if(!_0x3b07a5[_0x197391(0xa2)](_0x197391(0x13e)+config[_0x197391(0x1ce)]))_0x3b07a5['push'](_0x197391(0x13e)+config['basecoin']);}loadCoins(_0x3b07a5),_0x3b07a5=validateSymbols(_0x3b07a5);const _0x196857=async _0x4798c3=>{const _0x26ca13=_0x197391;let _0x57a557;try{const _0x47739e=await exchange['fetchTickers'](_0x4798c3);Object[_0x26ca13(0x1f3)](_0x47739e)['forEach'](_0x1ea95f=>{const _0xc7a82f=_0x26ca13;_0x57a557=_0x1ea95f[0x1][_0xc7a82f(0xf1)],global[_0xc7a82f(0x93)][noslash(_0x57a557)]=_0x1ea95f[0x1][_0xc7a82f(0xc1)],global['change'][_0x57a557]=_0x1ea95f[0x1][_0xc7a82f(0xf8)];});}catch(_0x473690){await handleError(_0x473690,_0x26ca13(0x128),_0x57a557);}},_0x37bc79=async _0x1d0fc6=>{const _0xf2a10=_0x197391;while(initCycle==_0x4ae655){if(!botPaused)try{const _0x278f0f=await exchange['watchTrades'](_0x1d0fc6);global[_0xf2a10(0x93)][noslash(_0x278f0f[0x0][_0xf2a10(0xf1)])]=_0x278f0f[0x0][_0xf2a10(0x12d)],await sleep(0x3e8);}catch(_0x9d3401){if(!exchangeStopped)await handleError(_0x9d3401,_0xf2a10(0xf0),_0x1d0fc6);}else await sleep(0x64);}},_0xe98ca7=async _0x5325bf=>{const _0x3ad13c=_0x197391;await sleep(0x3c*0x3e8);while(initCycle==_0x4ae655){if(!botPaused){let _0x526d05;try{const _0x2cca06=await exchange[_0x3ad13c(0x11c)](_0x5325bf);Object['entries'](_0x2cca06)[_0x3ad13c(0x1fd)](_0x17693d=>{const _0x437864=_0x3ad13c;_0x526d05=_0x17693d[0x1]['symbol'],global[_0x437864(0xf5)][_0x526d05]=_0x17693d[0x1]['percentage'];}),await sleep(0x3c*0x3e8);}catch(_0x521bfd){if(!exchangeStopped)await handleError(_0x521bfd,_0x3ad13c(0xb3),_0x526d05);}}else await sleep(0x64);}},_0x2acb5a=async _0x198743=>{const _0x10fa86=_0x197391;while(initCycle==_0x4ae655){if(!botPaused)try{const _0x1e9804=await exchange[_0x10fa86(0x1b1)](_0x198743);initCycle==_0x4ae655&&_0x1e9804[_0x10fa86(0x1fd)](_0x2c0142=>{updateNumberCoinsCcxt(_0x2c0142);});}catch(_0x400918){if(!exchangeStopped)await handleError(_0x400918,_0x10fa86(0x199));}else await sleep(0x64);}};_0x196857(_0x3b07a5),_0xe98ca7(_0x3b07a5),_0x3b07a5[_0x197391(0x1fd)](_0x27c430=>{_0x37bc79(_0x27c430),_0x2acb5a(_0x27c430);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x311ae0=_0x51b6e4;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x20d658=await getCoins(),[_0x2fc2bc,_0x397ff6]=_0x20d658;let _0x53bd4a=[];currentCoins[_0x311ae0(0x1fd)](_0x4a0417=>{const _0x1af196=_0x311ae0,_0x467e0c=_0x2fc2bc[_0x1af196(0x1a0)](_0x4fca22=>_0x4fca22[_0x1af196(0x121)]==_0x4a0417['coin']);if(_0x467e0c){if(_0x4a0417[_0x1af196(0x1b7)]!=_0x467e0c[_0x1af196(0x1b7)]){let _0x21052b;if(_0x4a0417[_0x1af196(0x121)]!=config[_0x1af196(0x1ce)]){const _0x48cf02=global['ticker'][noslash(_0x4a0417[_0x1af196(0xf1)])];_0x21052b=_0x4a0417[_0x1af196(0x1a5)]?0x1/_0x48cf02:_0x48cf02;}else _0x21052b=0x1;_0x53bd4a[_0x1af196(0x18d)]({'coin':_0x4a0417['coin'],'symbol':_0x4a0417[_0x1af196(0xf1)],'price':_0x21052b,'number':Number(formatResult(_0x467e0c[_0x1af196(0x1b7)]-_0x4a0417[_0x1af196(0x1b7)],0x8)),'basecoinvalue':_0x21052b*(_0x467e0c[_0x1af196(0x1b7)]-_0x4a0417['number'])});}}});if(_0x53bd4a[_0x311ae0(0x175)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x311ae0(0x15d)+_0x53bd4a[0x0]['basecoinvalue']+_0x311ae0(0x1ff)+lastFees['highest']);if(lastFees[_0x311ae0(0x138)]==0x0||Math[_0x311ae0(0x9a)](_0x53bd4a[0x0]['basecoinvalue'])>lastFees[_0x311ae0(0x138)]){delete _0x53bd4a[0x0][_0x311ae0(0xf1)],delete _0x53bd4a[0x0][_0x311ae0(0xd6)];let _0x275729=[],_0x3c1c96=[...config[_0x311ae0(0x1eb)]]||[],_0x5ec938=config['liquidity'];_0x3c1c96[_0x311ae0(0xfd)]((_0x4e698c,_0x270f29)=>_0x4e698c[_0x311ae0(0xc4)]>_0x270f29[_0x311ae0(0xc4)]?-0x1:_0x270f29[_0x311ae0(0xc4)]>_0x4e698c[_0x311ae0(0xc4)]?0x1:0x0);const _0x30ff23=getDate();if(_0x3c1c96[0x0]){const _0x21986d=fns[_0x311ae0(0xd8)](_0x3c1c96[0x0][_0x311ae0(0xc4)],_0x311ae0(0x177),new Date()),_0x25cd42=fns[_0x311ae0(0xd8)](_0x30ff23,_0x311ae0(0x177),new Date());if(fns[_0x311ae0(0x109)](_0x21986d,_0x25cd42)){_0x275729=_0x3c1c96[0x0][_0x311ae0(0x16b)];const _0x3729fb=_0x275729[_0x311ae0(0x1a0)](_0x1e12f9=>_0x1e12f9[_0x311ae0(0x121)]==_0x53bd4a[0x0][_0x311ae0(0x121)]);_0x3729fb?(_0x3729fb[_0x311ae0(0x1b7)]+=_0x53bd4a[0x0][_0x311ae0(0x1b7)],_0x3729fb['number']==0x0&&(_0x275729=_0x275729[_0x311ae0(0x1b9)](_0x301e12=>{const _0x41bcf8=_0x311ae0;return _0x301e12[_0x41bcf8(0x121)]!=_0x53bd4a[0x0]['coin'];}))):_0x275729[_0x311ae0(0x18d)](_0x53bd4a[0x0]);const _0x36245d=_0x5ec938['find'](_0x58d179=>_0x58d179[_0x311ae0(0xc4)]==_0x30ff23);_0x36245d[_0x311ae0(0x16b)]=_0x275729;}else _0x5ec938[_0x311ae0(0x18d)]({'date':_0x30ff23,'changes':[_0x53bd4a[0x0]]});}const _0x1dbf52=_0x5ec938[_0x311ae0(0x1a0)](_0x1dfa1b=>_0x1dfa1b[_0x311ae0(0xc4)]==_0x30ff23);if(_0x1dbf52){let _0x1da2e4=!![];_0x1dbf52[_0x311ae0(0x16b)][_0x311ae0(0x1fd)](_0xfaf740=>{const _0x224c42=_0x311ae0;if(_0xfaf740[_0x224c42(0x1b7)]!=0x0)_0x1da2e4=![];}),_0x1da2e4&&(_0x5ec938=_0x5ec938[_0x311ae0(0x1b9)](_0x23b13d=>{const _0x25feb1=_0x311ae0;return _0x23b13d[_0x25feb1(0xc4)]!=_0x30ff23;}));}let _0x5b06de=dbConfig['get']('bot')[_0x311ae0(0x1a0)]({'botID':botID})['value']();_0x5b06de&&(dbConfig['get'](_0x311ae0(0x1f2))['find']({'botID':botID})['assign']({'liquidity':_0x5ec938})[_0x311ae0(0x104)](),config[_0x311ae0(0x1eb)]=_0x5ec938),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math[_0x311ae0(0x9a)](_0x53bd4a[0x0][_0x311ae0(0x1b7)])+'\x20'+_0x53bd4a[0x0][_0x311ae0(0x121)]+'\x20'+(_0x53bd4a[0x0][_0x311ae0(0x1b7)]>0x0?'added':_0x311ae0(0x9f))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x311ae0(0x117),emittedConfiguration());}else logger[_0x311ae0(0x1e5)](_0x311ae0(0x153)+Math[_0x311ae0(0x9a)](_0x53bd4a[0x0]['number'])+'\x20'+_0x53bd4a[0x0][_0x311ae0(0x121)]+'\x20'+(_0x53bd4a[0x0][_0x311ae0(0x1b7)]>0x0?_0x311ae0(0x213):_0x311ae0(0x9f)));transactionDetected=!![];}else logger[_0x311ae0(0x1e5)](_0x311ae0(0xe4)+Math['abs'](_0x53bd4a[0x0]['number'])+'\x20'+_0x53bd4a[0x0][_0x311ae0(0x121)]+'\x20'+(_0x53bd4a[0x0]['number']>0x0?'added':_0x311ae0(0x9f))+_0x311ae0(0x106));}currentCoins=_0x2fc2bc,currentCoinsAll=_0x397ff6,await sleep(watchTransactionsInterval);}catch(_0x55c1f0){if(!exchangeStopped)await handleError(_0x55c1f0,_0x311ae0(0x133));}else await sleep(0x64);}}async function loadSymbols(){const _0x44e113=_0x51b6e4;try{markets=await exchange[_0x44e113(0x1b2)](),allSymbols=[],Object[_0x44e113(0x1f3)](markets)[_0x44e113(0x1fd)](_0x1d8525=>{const _0x45ae94=_0x44e113;_0x1d8525[0x1][_0x45ae94(0x11b)]&&_0x1d8525[0x1][_0x45ae94(0x198)]&&allSymbols[_0x45ae94(0x18d)](_0x1d8525[0x0]);});}catch(_0x964115){throw _0x964115;}}function validateSymbols(_0x5c64a2){const _0x3928b9=_0x51b6e4;let _0x55a042=[];return _0x5c64a2[_0x3928b9(0x1fd)](_0x4e5c5b=>{const _0x54c059=_0x3928b9;!allSymbols['includes'](_0x4e5c5b)?logHistory(_0x54c059(0xc2),_0x54c059(0x217)+_0x4e5c5b+_0x54c059(0x219)):_0x55a042['push'](_0x4e5c5b);}),_0x55a042;}async function initclient(){const _0x15f739=_0x51b6e4;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x15f739(0x151),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xd9e63c=getNormalizedPerformance();emitPerformance(_0xd9e63c),getStartingBalances(_0xd9e63c);}async function toggleBotMode(){const _0x4514b9=_0x51b6e4;let _0x422d1c=dbConfig[_0x4514b9(0xb0)](_0x4514b9(0x1f2))['find']({'botID':botID})[_0x4514b9(0x14e)]();if(_0x422d1c){const _0x4bbb32=!_0x422d1c[_0x4514b9(0x114)];dbConfig['get'](_0x4514b9(0x1f2))['find']({'botID':botID})[_0x4514b9(0x1ac)]({'headless':_0x4bbb32})[_0x4514b9(0x104)](),config[_0x4514b9(0x114)]=_0x4bbb32,proxyEmit(_0x4514b9(0x117),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1a86fa=_0x51b6e4;process[_0x1a86fa(0xe2)]({'updatebotmanager':!![]},_0x6aa650=>{}),logger[_0x1a86fa(0x1e5)](_0x1a86fa(0x1cd)+config[_0x1a86fa(0x114)]);}async function loadCoins(_0x1e9802){const _0x54dc09=_0x51b6e4;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4cd7d5,_0x38cd21=0x0,_0x1572f1=0x0;_0x1e9802['forEach'](_0x246685=>{const _0x35d9fb=_0x2474;loading['remainingSymbols'][_0x35d9fb(0x18d)](_0x246685);}),loadingCanceled=![];let _0x5b7d3c=![];while(_0x4cd7d5!=_0x1e9802[_0x54dc09(0x175)]+maxLoadingProgress){_0x4cd7d5=loadingProgress,_0x1e9802[_0x54dc09(0x1fd)](_0x7f080e=>{const _0x2f8e97=_0x54dc09;if(global[_0x2f8e97(0x93)][noslash(_0x7f080e)]){loading[_0x2f8e97(0x142)]=loading['remainingSymbols']['filter'](_0x1d7033=>_0x1d7033!=_0x7f080e);if(!watchedSymbols[_0x2f8e97(0xa2)](_0x7f080e))watchedSymbols[_0x2f8e97(0x18d)](_0x7f080e);_0x4cd7d5++;}}),loading['progress']=Math[_0x54dc09(0x1a8)](_0x4cd7d5/(_0x1e9802['length']+maxLoadingProgress)*0x64);loading[_0x54dc09(0x15a)]!=0x64&&(_0x1572f1>0x1e*0x5&&(loading[_0x54dc09(0x141)]=!![],emitLoadingProgress()),_0x1572f1>0x78*0x5&&!_0x5b7d3c&&(_0x5b7d3c=!![],logHistory(_0x54dc09(0xc2),_0x54dc09(0xa9)+loading[_0x54dc09(0x142)][_0x54dc09(0xfe)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x54dc09(0xc2),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x54dc09(0xad)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x31c52c=_0x54dc09;process[_0x31c52c(0xe2)]({'stop':_0x31c52c(0x1e4)},_0x49a9a3=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x54dc09(0x1ed)]=!![],emitLoadingProgress();break;}else _0x38cd21!=loading['progress']&&(_0x38cd21=loading[_0x54dc09(0x15a)],emitLoadingProgress()),_0x1572f1++,await sleep(0xc8);}_0x4cd7d5==_0x1e9802[_0x54dc09(0x175)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x54dc09(0xe2)]({'status':_0x54dc09(0x200),'live':_0x54dc09(0xd3)},_0xd6538b=>{}),_0x5b7d3c&&logHistory('success',_0x54dc09(0x1c8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x17200d=_0x51b6e4;proxyEmit(_0x17200d(0x117),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x4e6e7f=_0x51b6e4;proxyEmit(_0x4e6e7f(0x12b),loading);}async function getFiat(){const _0x579e89=_0x51b6e4;let _0x47eecf=global[_0x579e89(0x93)][stablecoins[_0x579e89(0x1f6)][_0x579e89(0x121)]],_0x10822f=global[_0x579e89(0x93)][stablecoins[_0x579e89(0xda)]['coin']];return{'eur':Number(_0x47eecf),'usd':Number(_0x10822f)};}function capitalize(_0x5023c1){const _0x3e1819=_0x51b6e4;return _0x5023c1[_0x3e1819(0xac)](0x0,0x1)['toUpperCase']()+_0x5023c1[_0x3e1819(0xac)](0x1);}function supportedExchanges(){const _0x451347=_0x51b6e4,_0x181f81=['ws',_0x451347(0x11c),_0x451347(0xfc),_0x451347(0x1e8),'watchOrders',_0x451347(0x12a),_0x451347(0x10c),'fetchOpenOrders',_0x451347(0x1c2),'fetchBalance'];let _0x5a00eb=[],_0x448b4f=[],_0x5d3b61=ccxt['pro'][_0x451347(0x151)];_0x5d3b61[_0x451347(0x1fd)](_0x21aa92=>{const _0x587e44=_0x451347;try{const _0x5f1b17=new ccxt[(_0x587e44(0x1f7))][_0x21aa92]();_0x448b4f[_0x587e44(0x18d)](_0x5f1b17);}catch(_0x3cead4){}}),_0x448b4f[_0x451347(0x1fd)](_0x539154=>{const _0x3ccf4d=_0x451347;let _0x1f0735=0x0;_0x181f81['forEach'](_0x20f275=>{const _0x3e9420=_0x2474;_0x20f275 in _0x539154[_0x3e9420(0x103)]&&_0x539154[_0x3e9420(0x103)][_0x20f275]&&_0x1f0735++;}),_0x1f0735==_0x181f81[_0x3ccf4d(0x175)]&&_0x5a00eb['push'](capitalize(_0x539154['id']));});let _0x3452a6=[];return _0x5d3b61[_0x451347(0x1fd)](_0x2c28ae=>{const _0x2507f3=_0x451347;_0x2c28ae=capitalize(_0x2c28ae);if(!_0x5a00eb[_0x2507f3(0xa2)](_0x2c28ae))_0x3452a6[_0x2507f3(0x18d)](_0x2c28ae);}),_0x5a00eb;}function setStartDatePerformance(){const _0x4248b0=_0x51b6e4;if(config&&config['liquidity'][0x0]['changes']['length']!=0x0){const _0x27128f=config[_0x4248b0(0x1eb)][0x0][_0x4248b0(0x16b)];dbPerformance[_0x4248b0(0xb0)](_0x4248b0(0x1a9))[_0x4248b0(0x1a0)]({'date':config['startdate']})[_0x4248b0(0x1ac)]({'coins':_0x27128f})[_0x4248b0(0x104)]();}}async function recreateCoinResults(){const _0xdf39bb=_0x51b6e4;let _0x543f91,_0xf0c1fa=[];try{const _0x2ecc17=fns[_0xdf39bb(0xb7)](fns[_0xdf39bb(0x1ba)](config['startdate'][_0xdf39bb(0x163)](/\//g,'-')),_0xdf39bb(0x160));for(const _0x5be85b of currentCoins){if(_0x5be85b[_0xdf39bb(0x121)]!=config[_0xdf39bb(0x1ce)]){let _0x46b4df=0x0,_0x1b1193,_0x362d69;_0x543f91=await getAllEventOrders(_0x5be85b[_0xdf39bb(0xf1)]);if(_0x543f91['length']>0x0)_0x543f91[_0xdf39bb(0x1fd)](_0x4cda77=>{const _0x197ce7=_0xdf39bb,_0x4daac5=_0x5be85b[_0x197ce7(0xf1)][_0x197ce7(0xa2)](config[_0x197ce7(0x1ce)]+'/');_0xf0c1fa['push']({'datetime':_0x4cda77[_0x197ce7(0x21b)],'coin':_0x5be85b[_0x197ce7(0x121)],'symbol':_0x5be85b[_0x197ce7(0xf1)],'side':_0x4cda77[_0x197ce7(0xe9)],'reverse':_0x4daac5,'amount':formatResult(_0x4cda77[_0x197ce7(0xb4)],0x8),'filled':formatResult(_0x4cda77[_0x197ce7(0xb4)],0x8),'price':formatResult(_0x4cda77['price'],0x8)}),_0x46b4df=_0x4cda77[_0x197ce7(0xe9)]==_0x197ce7(0x1f8)?_0x46b4df+_0x4cda77[_0x197ce7(0xb4)]:_0x46b4df-_0x4cda77[_0x197ce7(0xb4)];if(!_0x362d69)_0x362d69=_0x4cda77[_0x197ce7(0x12d)];});_0x1b1193=_0x5be85b[_0xdf39bb(0x1b7)]-_0x46b4df;let _0x55a674;config[_0xdf39bb(0x1eb)]['forEach'](_0x1d40e2=>{const _0x434f2d=_0xdf39bb;!_0x55a674&&(_0x55a674=_0x1d40e2[_0x434f2d(0x16b)]['find'](_0x59aa6b=>_0x59aa6b['coin']==_0x5be85b[_0x434f2d(0x121)]),_0x55a674&&(_0x1b1193=_0x55a674[_0x434f2d(0x1b7)],_0x362d69=_0x55a674[_0x434f2d(0x12d)]));});let _0x21fe05=dbCoinResults[_0xdf39bb(0xb0)](_0xdf39bb(0xc0))[_0xdf39bb(0x1a0)]({'coin':_0x5be85b['coin']})[_0xdf39bb(0x14e)]();_0x21fe05={'coin':_0x5be85b[_0xdf39bb(0x121)],'number':_0x1b1193,'breakeven':_0x362d69,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xdf39bb(0xb0)]('coins')[_0xdf39bb(0x1a0)]({'coin':_0x5be85b[_0xdf39bb(0x121)]})['assign'](_0x21fe05)['write']();}}_0xf0c1fa[_0xdf39bb(0xfd)]((_0x577dec,_0x14242e)=>_0x577dec[_0xdf39bb(0x21b)]>_0x14242e[_0xdf39bb(0x21b)]?0x1:_0x14242e[_0xdf39bb(0x21b)]>_0x577dec[_0xdf39bb(0x21b)]?-0x1:0x0);let _0xf4801c=0x0;for(let _0x32f11a of _0xf0c1fa){await updateCoinResults(_0x32f11a,!![]);}}catch(_0x2f4253){await handleError(_0x2f4253,_0xdf39bb(0x1f0));}}async function getAllEventOrders(_0x316b2d){const _0x2f36a8=_0x51b6e4;let _0x15f097=[],_0x346aa0=dbLogs['get'](_0x2f36a8(0x1a7))[_0x2f36a8(0x1b9)](_0x2f3e4e=>{const _0x5d6b5d=_0x2f36a8,_0x48f630=_0x2f3e4e[_0x5d6b5d(0xbb)][_0x5d6b5d(0xf2)]();return _0x48f630[_0x5d6b5d(0xa2)](_0x316b2d[_0x5d6b5d(0xf2)]())&&(_0x48f630[_0x5d6b5d(0xa2)]('market')&&_0x48f630[_0x5d6b5d(0xa2)](_0x5d6b5d(0x14f))||_0x48f630[_0x5d6b5d(0xa2)]('filled')&&_0x48f630[_0x5d6b5d(0xa2)](_0x5d6b5d(0x14f)));})[_0x2f36a8(0x1c9)](_0x2f36a8(0x211))[_0x2f36a8(0x14e)]();return _0x346aa0[_0x2f36a8(0x1fd)](_0x1e82de=>{const _0x2df3d9=_0x2f36a8,_0x48c32f=_0x1e82de[_0x2df3d9(0xbb)][_0x2df3d9(0xa2)](_0x2df3d9(0x1fb))?'sell':_0x2df3d9(0x1f8),_0x5c85b5=/#([0-9]|\.)+\s/i,_0x40bb05=Number(_0x5c85b5[_0x2df3d9(0x125)](_0x1e82de[_0x2df3d9(0xbb)])[0x0][_0x2df3d9(0x197)](0x1)),_0x3c9604=/@([0-9]|\.)+$/i,_0x3ec261=Number(_0x3c9604[_0x2df3d9(0x125)](_0x1e82de['event'])[0x0][_0x2df3d9(0x197)](0x1));_0x15f097[_0x2df3d9(0x18d)]({'datetime':_0x1e82de[_0x2df3d9(0x211)],'coin':symbolToCoin(_0x316b2d),'symbol':_0x316b2d,'side':_0x48c32f,'amount':_0x40bb05,'filled':_0x40bb05,'price':_0x3ec261});}),_0x15f097;}async function getAllOrders(_0x5f2e1d,_0xd0d25d){const _0x5a3d96=_0x51b6e4;let _0x596a44=[];while(_0xd0d25d<exchange['milliseconds']()){const _0xa791af=0x1f4;try{const _0x2758b1=await exchange[_0x5a3d96(0x1c2)](_0x5f2e1d,_0xd0d25d,_0xa791af);if(_0x2758b1[_0x5a3d96(0x175)])_0xd0d25d=_0x2758b1[_0x2758b1[_0x5a3d96(0x175)]-0x1]['timestamp']+0x1,_0x596a44=_0x596a44[_0x5a3d96(0x193)](_0x2758b1);else break;}catch(_0x54e7d3){await handleError(_0x54e7d3,_0x5a3d96(0x148),_0x5f2e1d);}}return _0x596a44;}async function validate24hChanges(){const _0x25f29c=_0x51b6e4;for(const _0x1c8fb4 of currentCoins){if(_0x1c8fb4[_0x25f29c(0x121)]!=config[_0x25f29c(0x1ce)]){let _0xf49fac;_0x1c8fb4[_0x25f29c(0x1a5)]?_0xf49fac=formatResult((0x1/(global['change'][noslash(_0x1c8fb4[_0x25f29c(0xf1)])]/0x64+0x1)-0x1)*0x64,0x3):_0xf49fac=global['change'][noslash(_0x1c8fb4[_0x25f29c(0xf1)])],_0xf49fac<config[_0x25f29c(0xa0)]&&(logHistory('error',_0x1c8fb4[_0x25f29c(0x121)]+_0x25f29c(0xb8)+_0xf49fac+'%'),logHistory('error',_0x25f29c(0x99)),logHistory(_0x25f29c(0xc2),_0x25f29c(0xf6)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x12cd88,_0x385fec){const _0x5e092a=_0x51b6e4;if(!_0x12cd88)return!![];const _0x4ceaf1=_0x385fec['split']('.'),_0xa05c2b=_0x12cd88[_0x5e092a(0x107)]('.');for(var _0x26cbe6=0x0;_0x26cbe6<_0xa05c2b[_0x5e092a(0x175)];_0x26cbe6++){const _0x286f16=~~_0xa05c2b[_0x26cbe6],_0x451777=~~_0x4ceaf1[_0x26cbe6];if(_0x286f16<_0x451777)return!![];if(_0x286f16>_0x451777)return![];}return![];}async function oneTimeMigration(){const _0x365395=_0x51b6e4;let _0x5c1cfd=dbLogs[_0x365395(0xb0)](_0x365395(0x1ef))[_0x365395(0x14e)]();if(isOlderVersion(_0x5c1cfd,_0x365395(0x214))){let _0x256522=[];const _0x4bcdb7=dbLogs[_0x365395(0xb0)](_0x365395(0x1a7))[_0x365395(0x14e)]();_0x4bcdb7[_0x365395(0x1fd)](_0x26b9ff=>{const _0xfbfb1=_0x365395;_0x256522[_0xfbfb1(0x18d)]({'time':_0x26b9ff['time'],'type':_0x26b9ff['type'],'event':_0x26b9ff[_0xfbfb1(0xbb)]});}),dbLogs['get'](_0x365395(0x1a7))['assign'](_0x256522)[_0x365395(0x104)]();}let _0x59ca1e=dbConfig[_0x365395(0xb0)]('version')[_0x365395(0x14e)]();if(isOlderVersion(_0x59ca1e,_0x365395(0x214))){let _0xfeb2ec=dbConfig['get'](_0x365395(0x1f2))[_0x365395(0x1a0)]({'botID':botID})[_0x365395(0x14e)]();if(_0xfeb2ec){let _0x100f7a=[];_0xfeb2ec['portfolio']['forEach'](_0x43a09d=>{const _0x360f93=_0x365395;_0x100f7a[_0x360f93(0x18d)]({'coin':_0x43a09d[_0x360f93(0x121)],'number':_0x43a09d[_0x360f93(0x1de)],'price':_0x43a09d[_0x360f93(0x166)]}),delete _0x43a09d[_0x360f93(0x1de)],delete _0x43a09d[_0x360f93(0x166)];});if(_0x100f7a[_0x365395(0x175)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x365395(0x1dc)),JSON[_0x365395(0x110)](_0x100f7a,null,0x4),function(_0x162ec6){if(_0x162ec6){}});const _0x215966=(_0x140443,_0x2f25a7)=>{const _0x48cb5d=_0x365395;let _0x31a9c4=[];_0x2f25a7[_0x48cb5d(0x1fd)](_0x97ed83=>{const _0x173aaf=_0x48cb5d,_0x171ae4=_0x140443[_0x173aaf(0x1a0)](_0x33ebec=>_0x33ebec['coin']==_0x97ed83[_0x173aaf(0x121)]);if(!_0x171ae4)_0x31a9c4['push'](_0x97ed83);});let _0x14cae8=[];return _0x140443[_0x48cb5d(0x1fd)](_0x1f3f23=>{const _0xa26390=_0x48cb5d,_0x559ab6=_0x2f25a7[_0xa26390(0x1a0)](_0x3e4afc=>_0x3e4afc[_0xa26390(0x121)]==_0x1f3f23[_0xa26390(0x121)]);if(!_0x559ab6||_0x559ab6[_0xa26390(0x1b7)]==0x0&&_0x1f3f23[_0xa26390(0x1b7)]!=0x0)_0x14cae8[_0xa26390(0x18d)](_0x1f3f23);}),{'missingDay1':_0x31a9c4,'notInDay2':_0x14cae8};},_0xa3caae=dbPerformance[_0x365395(0xb0)](_0x365395(0x1a9))[_0x365395(0x184)]()[_0x365395(0x14e)]();if(_0xa3caae[_0x365395(0x175)]>0x1){const {missingDay1:_0x213ec0,notInDay2:_0xc99338}=_0x215966(_0x100f7a,_0xa3caae[0x1][_0x365395(0xc0)]);_0x100f7a=[..._0x100f7a,..._0x213ec0],_0xc99338[_0x365395(0x1fd)](_0x24b13f=>{const _0x1dd9bf=_0x365395;let _0x5c171c=_0x100f7a['findIndex'](_0x232054=>_0x232054[_0x1dd9bf(0x121)]==_0x24b13f[_0x1dd9bf(0x121)]);_0x5c171c!=-0x1&&_0x100f7a[_0x1dd9bf(0x182)](_0x5c171c,0x1);});}_0x100f7a[_0x365395(0xfd)]((_0x574db0,_0x424419)=>_0x574db0[_0x365395(0x121)]>_0x424419[_0x365395(0x121)]?0x1:_0x424419[_0x365395(0x121)]>_0x574db0['coin']?-0x1:0x0);let _0x172620=[{'date':_0xfeb2ec[_0x365395(0x156)],'changes':_0x100f7a}];_0xa3caae[_0x365395(0x175)]>0x2&&_0xa3caae[_0x365395(0x1fd)]((_0x495cbe,_0x279a92)=>{const _0x5bf486=_0x365395;if(_0x279a92>0x0&&_0x279a92<_0xa3caae[_0x5bf486(0x175)]-0x1){const {missingDay1:_0x5e6415,notInDay2:_0x9965bb}=_0x215966(_0xa3caae[_0x279a92][_0x5bf486(0xc0)],_0xa3caae[_0x279a92+0x1][_0x5bf486(0xc0)]);_0x100f7a=[],(_0x5e6415[_0x5bf486(0x175)]!=0x0||_0x9965bb['length']!=0x0)&&(_0x5e6415[_0x5bf486(0x175)]!=0x0&&_0x100f7a[_0x5bf486(0x18d)](..._0x5e6415),_0x9965bb[_0x5bf486(0x175)]!=0x0&&(_0x9965bb['forEach'](_0x3a8a71=>{const _0x2ff1e6=_0x5bf486;_0x3a8a71['number']=-_0x3a8a71[_0x2ff1e6(0x1b7)];}),_0x100f7a[_0x5bf486(0x18d)](..._0x9965bb)),_0x100f7a['sort']((_0x42f913,_0x1b758c)=>_0x42f913[_0x5bf486(0x121)]>_0x1b758c[_0x5bf486(0x121)]?0x1:_0x1b758c['coin']>_0x42f913[_0x5bf486(0x121)]?-0x1:0x0),_0x172620[_0x5bf486(0x18d)]({'date':_0xa3caae[_0x279a92+0x1][_0x5bf486(0xc4)],'changes':_0x100f7a}));}}),dbConfig[_0x365395(0xb0)](_0x365395(0x1f2))[_0x365395(0x1a0)]({'botID':botID})['assign']({..._0xfeb2ec,'liquidity':_0x172620})[_0x365395(0x104)]();}}if(isOlderVersion(_0x59ca1e,_0x365395(0x16f))){let _0x3b1425=dbConfig[_0x365395(0xb0)](_0x365395(0x1f2))[_0x365395(0x1a0)]({'botID':botID})['value']();if(_0x3b1425){const _0x31c575=_0x3b1425[_0x365395(0xff)],_0x3e56c2=_0x31c575?capitalize(_0x31c575):_0x365395(0xcd);dbConfig['get'](_0x365395(0x1f2))[_0x365395(0x1a0)]({'botID':botID})[_0x365395(0x1ac)]({'exchange':_0x3e56c2})[_0x365395(0x104)]();}}let _0xe49c32=dbPerformance['get'](_0x365395(0x1ef))[_0x365395(0x14e)]();isOlderVersion(_0xe49c32,_0x365395(0x214))&&setStartDatePerformance();let _0x2b4595=dbCoinResults[_0x365395(0xb0)](_0x365395(0x1ef))[_0x365395(0x14e)]();if(isOlderVersion(_0x2b4595,_0x365395(0x18a))){let _0x47ba35=dbCoinResults['get']('coins')[_0x365395(0x14e)]();if(_0x47ba35[_0x365395(0x175)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x211f99=_0x51b6e4;dbConfig[_0x211f99(0x147)](_0x211f99(0x1ef),serverversion)[_0x211f99(0x104)](),dbPerformance[_0x211f99(0x147)](_0x211f99(0x1ef),serverversion)[_0x211f99(0x104)](),dbLogs['set'](_0x211f99(0x1ef),serverversion)['write'](),dbCoinResults['set']('version',serverversion)[_0x211f99(0x104)]();}function getConfiguration(_0x490526){const _0x131d5b=_0x51b6e4;let _0x3340ae=dbConfig[_0x131d5b(0xb0)](_0x131d5b(0x1f2))[_0x131d5b(0x1a0)]({'botID':_0x490526})['value']();if(_0x3340ae){let _0x49077d=![];typeof _0x3340ae[_0x131d5b(0x207)]=='string'&&(_0x3340ae={..._0x3340ae,'threshold':Number(_0x3340ae['threshold'])},_0x49077d=!![]),_0x3340ae[_0x131d5b(0xa0)]==undefined&&(_0x3340ae={..._0x3340ae,'change24h':-0x14},_0x49077d=!![]),_0x3340ae[_0x131d5b(0xf7)]==undefined&&(_0x3340ae={..._0x3340ae,'fiat':_0x131d5b(0x186)},_0x49077d=!![]),_0x3340ae[_0x131d5b(0x9d)]==undefined&&(_0x3340ae={..._0x3340ae,'onepagemode':settings[_0x131d5b(0x9d)]},_0x49077d=!![]),_0x3340ae[_0x131d5b(0x1b4)]==undefined&&(_0x3340ae={..._0x3340ae,'colorscheme':_0x131d5b(0x11f)},_0x49077d=!![]),_0x3340ae[_0x131d5b(0xfb)]==undefined&&(_0x3340ae={..._0x3340ae,'autoliquidity':!![]},_0x49077d=!![]),_0x49077d&&(_0x3340ae={'botID':_0x3340ae[_0x131d5b(0xaf)],'exchange':_0x3340ae[_0x131d5b(0xff)],'apiKey':_0x3340ae['apiKey'],'apiSecret':_0x3340ae[_0x131d5b(0x1bf)],'apiPassword':_0x3340ae[_0x131d5b(0x119)],'basecoin':_0x3340ae['basecoin'],'botname':_0x3340ae[_0x131d5b(0x1ec)],'showname':_0x3340ae[_0x131d5b(0x1d7)],'threshold':_0x3340ae[_0x131d5b(0x207)],'ordertype':_0x3340ae[_0x131d5b(0x13f)],'timeout':_0x3340ae[_0x131d5b(0x141)],'fiat':_0x3340ae['fiat'],'startdate':_0x3340ae[_0x131d5b(0x156)],'recreate':_0x3340ae[_0x131d5b(0xa6)],'timeshift':_0x3340ae['timeshift'],'onepagemode':_0x3340ae['onepagemode'],'headless':_0x3340ae[_0x131d5b(0x114)],'cooldown':_0x3340ae[_0x131d5b(0xb5)],'change24h':_0x3340ae[_0x131d5b(0xa0)],'emojibuy':_0x3340ae[_0x131d5b(0x96)],'emojisell':_0x3340ae[_0x131d5b(0x1ca)],'colorscheme':_0x3340ae['colorscheme'],'portfolio':_0x3340ae[_0x131d5b(0x183)],'autoliquidity':_0x3340ae[_0x131d5b(0xfb)],'liquidity':_0x3340ae[_0x131d5b(0x1eb)],'openOrders':_0x3340ae[_0x131d5b(0xd1)]},dbConfig[_0x131d5b(0xb0)]('bot')[_0x131d5b(0x100)]()['write'](),dbConfig[_0x131d5b(0xb0)](_0x131d5b(0x1f2))[_0x131d5b(0x18d)](_0x3340ae)[_0x131d5b(0x104)]());}else _0x3340ae={'botID':_0x490526,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x131d5b(0x127)+_0x490526,'showname':![],'threshold':0x3,'ordertype':_0x131d5b(0x1da),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x131d5b(0x9d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3340ae;}function emittedConfiguration(){const _0x1580f5=_0x51b6e4;let _0x113099;if(config[_0x1580f5(0x196)]=='')_0x113099={...config,'configstate':_0x1580f5(0x170)};else config[_0x1580f5(0x196)]==_0x1580f5(0x216)?_0x113099={...config,'configstate':_0x1580f5(0xc6)}:(_0x113099={...config,'apiKey':_0x1580f5(0xd4),'apiSecret':'************'},config[_0x1580f5(0x119)]&&(_0x113099[_0x1580f5(0x119)]=_0x1580f5(0xd4)));return _0x113099;}function getSettings(){const _0x7f1eee=_0x51b6e4;return dbSettings[_0x7f1eee(0xb0)]('settings')[_0x7f1eee(0x14e)]();}function getSecure(){const _0xd3724e=_0x51b6e4;return dbSecure[_0xd3724e(0xb0)](_0xd3724e(0xa8))['value']()||{};}function updateTimeshift(_0x8abbdb){const _0x23a85e=_0x51b6e4;let _0x47a5bd=dbConfig[_0x23a85e(0xb0)]('bot')[_0x23a85e(0x1a0)]({'botID':botID})[_0x23a85e(0x14e)]();_0x47a5bd&&dbConfig[_0x23a85e(0xb0)](_0x23a85e(0x1f2))[_0x23a85e(0x1a0)]({'botID':botID})[_0x23a85e(0x1ac)]({'timeshift':_0x8abbdb})[_0x23a85e(0x104)](),config[_0x23a85e(0xca)]=_0x8abbdb,proxyEmit(_0x23a85e(0x117),emittedConfiguration());}function updateOnepagemode(_0x36d551){const _0x414f9a=_0x51b6e4;let _0x2470ef=dbConfig[_0x414f9a(0xb0)](_0x414f9a(0x1f2))[_0x414f9a(0x1a0)]({'botID':botID})[_0x414f9a(0x14e)]();_0x2470ef&&dbConfig[_0x414f9a(0xb0)](_0x414f9a(0x1f2))[_0x414f9a(0x1a0)]({'botID':botID})[_0x414f9a(0x1ac)]({'onepagemode':_0x36d551})[_0x414f9a(0x104)](),config[_0x414f9a(0x9d)]=_0x36d551,proxyEmit(_0x414f9a(0x117),emittedConfiguration());}async function storeConfiguration(_0x478cb1){const _0x44e16a=_0x51b6e4;logger[_0x44e16a(0x1e5)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x44e16a(0xa3));let _0x2ec407=![],_0x60ecd4=![],_0x32a11b=[];_0x478cb1[_0x44e16a(0x183)][_0x44e16a(0x1fd)](_0x471d72=>{const _0xa16dfa=_0x44e16a;if(!_0x471d72[_0xa16dfa(0xd5)]&&_0x471d72[_0xa16dfa(0x121)]!=_0x478cb1[_0xa16dfa(0x1ce)])_0x32a11b[_0xa16dfa(0x18d)](_0x471d72[_0xa16dfa(0xf1)]);}),_0x32a11b[_0x44e16a(0x1fd)](_0x101c22=>{const _0x1f4bf9=_0x44e16a,_0x4a5768=currentCoins[_0x1f4bf9(0x1a0)](_0x227283=>_0x227283[_0x1f4bf9(0xf1)]==_0x101c22);!_0x4a5768&&(_0x2ec407=!![]);}),currentCoins['forEach'](_0x195d82=>{const _0x4411cc=_0x44e16a;if(_0x195d82[_0x4411cc(0x121)]!=config['basecoin']){const _0x10b074=_0x32a11b[_0x4411cc(0x1a0)](_0x51fe8a=>_0x51fe8a==_0x195d82[_0x4411cc(0xf1)]);!_0x10b074&&(_0x2ec407=!![]);}}),_0x478cb1[_0x44e16a(0x183)][_0x44e16a(0x1fd)](_0x1da6dd=>{const _0x1a8dba=_0x44e16a,_0x16f278=config[_0x1a8dba(0x183)][_0x1a8dba(0x1a0)](_0x33b79c=>_0x33b79c[_0x1a8dba(0x121)]==_0x1da6dd[_0x1a8dba(0x121)]);if(_0x16f278&&_0x1da6dd[_0x1a8dba(0xb2)]!=_0x16f278[_0x1a8dba(0xb2)])_0x60ecd4=!![];});let _0x57fdc4=dbConfig[_0x44e16a(0xb0)](_0x44e16a(0x1f2))[_0x44e16a(0x1a0)]({'botID':botID})[_0x44e16a(0x14e)]();_0x478cb1={..._0x478cb1,'apiKey':crypt[_0x44e16a(0x171)](secure['privateKey'],_0x478cb1[_0x44e16a(0x196)])[_0x44e16a(0x169)],'apiSecret':crypt[_0x44e16a(0x171)](secure['privateKey'],_0x478cb1[_0x44e16a(0x1bf)])[_0x44e16a(0x169)]};_0x478cb1[_0x44e16a(0x119)]&&(_0x478cb1[_0x44e16a(0x119)]=crypt[_0x44e16a(0x171)](secure['privateKey'],_0x478cb1[_0x44e16a(0x119)])[_0x44e16a(0x169)]);let _0x512637=![];if(_0x57fdc4){_0x478cb1[_0x44e16a(0x196)]=='************'?_0x478cb1[_0x44e16a(0x196)]=config[_0x44e16a(0x196)]:_0x512637=!![];_0x478cb1[_0x44e16a(0x1bf)]=='************'?_0x478cb1['apiSecret']=config[_0x44e16a(0x1bf)]:_0x512637=!![];if(_0x478cb1[_0x44e16a(0x119)]=='************')_0x478cb1[_0x44e16a(0x119)]=config[_0x44e16a(0x119)];else{if(_0x478cb1[_0x44e16a(0x119)])_0x512637=!![];}dbConfig[_0x44e16a(0xb0)](_0x44e16a(0x1f2))[_0x44e16a(0x1a0)]({'botID':botID})['assign'](_0x478cb1)[_0x44e16a(0x104)]();}else dbConfig['get']('bot')[_0x44e16a(0x18d)](_0x478cb1)[_0x44e16a(0x104)](),_0x512637=!![],process[_0x44e16a(0xe2)]({'status':_0x44e16a(0x200),'live':_0x44e16a(0xd3)},_0x5512cb=>{});process['send']({'botname':_0x478cb1['botname']},_0x4d7e70=>{}),config={..._0x478cb1},updateBotManager(),proxyEmit(_0x44e16a(0x15c)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x512637)await reset(!![]);else _0x2ec407||_0x60ecd4?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x44e16a(0x1e5)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x2ac4b0){const _0x2464c9=_0x51b6e4,_0x5107b7={...config,'headless':_0x2ac4b0['headless']};let _0x9b7877=dbConfig[_0x2464c9(0xb0)](_0x2464c9(0x1f2))[_0x2464c9(0x1a0)]({'botID':botID})['value']();_0x9b7877&&dbConfig[_0x2464c9(0xb0)](_0x2464c9(0x1f2))['find']({'botID':botID})[_0x2464c9(0x1ac)](_0x5107b7)[_0x2464c9(0x104)](),config={..._0x5107b7},updateBotManager(),proxyEmit(_0x2464c9(0x117),emittedConfiguration());}async function storeFiat(_0x591962){const _0xf31ce4=_0x51b6e4,_0x5f2346={...config,'fiat':_0x591962};let _0xc7e330=dbConfig[_0xf31ce4(0xb0)](_0xf31ce4(0x1f2))[_0xf31ce4(0x1a0)]({'botID':botID})[_0xf31ce4(0x14e)]();_0xc7e330&&dbConfig[_0xf31ce4(0xb0)](_0xf31ce4(0x1f2))['find']({'botID':botID})[_0xf31ce4(0x1ac)](_0x5f2346)[_0xf31ce4(0x104)](),config={..._0x5f2346},proxyEmit(_0xf31ce4(0x117),emittedConfiguration());}function resetHistory(){const _0x5ad6cc=_0x51b6e4;logger[_0x5ad6cc(0x1e9)](_0x5ad6cc(0x188));try{if(fs[_0x5ad6cc(0xe0)](path[_0x5ad6cc(0xfe)](configpath,_0x5ad6cc(0x118)+botID+_0x5ad6cc(0x1df))))fs[_0x5ad6cc(0xce)](path[_0x5ad6cc(0xfe)](configpath,_0x5ad6cc(0x118)+botID+_0x5ad6cc(0x1df)));if(fs[_0x5ad6cc(0xe0)](path[_0x5ad6cc(0xfe)](configpath,_0x5ad6cc(0x118)+botID+'-performance.json')))fs[_0x5ad6cc(0xce)](path['join'](configpath,_0x5ad6cc(0x118)+botID+_0x5ad6cc(0xc9)));if(fs[_0x5ad6cc(0xe0)](path[_0x5ad6cc(0xfe)](configpath,'bot-'+botID+_0x5ad6cc(0x1f1))))fs['unlinkSync'](path[_0x5ad6cc(0xfe)](configpath,_0x5ad6cc(0x118)+botID+_0x5ad6cc(0x1f1)));}catch(_0x44b9b1){if(_0x44b9b1)logger[_0x5ad6cc(0x1e9)](_0x5ad6cc(0x1f9),_0x44b9b1);}const _0x65db1=getDate();let _0x259a62=[];currentCoins[_0x5ad6cc(0x1fd)](_0x5b178e=>{const _0x12fa4f=_0x5ad6cc;_0x259a62[_0x12fa4f(0x18d)]({'coin':_0x5b178e[_0x12fa4f(0x121)],'number':_0x5b178e[_0x12fa4f(0x1b7)],'price':_0x5b178e[_0x12fa4f(0xc1)]});});let _0x323825=dbConfig[_0x5ad6cc(0xb0)](_0x5ad6cc(0x1f2))[_0x5ad6cc(0x1a0)]({'botID':botID})[_0x5ad6cc(0x14e)]();_0x323825&&(dbConfig['get'](_0x5ad6cc(0x1f2))['find']({'botID':botID})[_0x5ad6cc(0x1ac)]({'liquidity':[{'date':_0x65db1,'changes':_0x259a62}]})['write'](),config[_0x5ad6cc(0x1eb)]=[]),process['send']({'stop':'restart'},_0x4654fe=>{});}function noslash(_0x5757ff){const _0x55f6e5=_0x51b6e4;return _0x5757ff[_0x55f6e5(0x163)]('/','');}function _0x2474(_0x4effef,_0x402fde){const _0x13c67e=_0x447b();return _0x2474=function(_0x453881,_0x3741bd){_0x453881=_0x453881-0x91;let _0x447b94=_0x13c67e[_0x453881];return _0x447b94;},_0x2474(_0x4effef,_0x402fde);}function updateHighestFee(_0x2cbdce){const _0x114067=_0x51b6e4;if(_0x2cbdce[_0x114067(0x1a5)]){let _0x2ebb4a={'filled':_0x2cbdce['filled']*_0x2cbdce[_0x114067(0x12d)],'amount':_0x2cbdce[_0x114067(0xb4)]*_0x2cbdce['price'],'side':_0x2cbdce['side']==_0x114067(0x1fb)?_0x114067(0x1f8):_0x114067(0x1fb),'price':0x1/_0x2cbdce[_0x114067(0x12d)]};_0x2cbdce={..._0x2cbdce,..._0x2ebb4a};}const _0x5db14d=defaultFee*_0x2cbdce[_0x114067(0xb4)]*_0x2cbdce[_0x114067(0x12d)];lastFees[_0x114067(0xaa)][_0x114067(0x175)]===0x14&&lastFees[_0x114067(0xaa)][_0x114067(0xea)](),lastFees[_0x114067(0xaa)][_0x114067(0x18d)](_0x5db14d),lastFees[_0x114067(0x138)]=Math[_0x114067(0xef)](...lastFees[_0x114067(0xaa)]);}async function updateNumberCoinsCcxt(_0x2d3723){const _0x1d4e0f=_0x51b6e4;logger[_0x1d4e0f(0x1e5)]('0\x20-\x20EXECUTION:\x20'+_0x2d3723['symbol']+_0x1d4e0f(0x120)+_0x2d3723[_0x1d4e0f(0x1b5)]+_0x1d4e0f(0x120)+_0x2d3723[_0x1d4e0f(0xb4)]+_0x1d4e0f(0x122)+_0x2d3723['amount']+_0x1d4e0f(0x120)+_0x2d3723['id']);let _0x27a68b=_0x2d3723[_0x1d4e0f(0x1b5)],_0x34fd42=![];currentCoins[_0x1d4e0f(0x1fd)](_0x487aa4=>{const _0xf134cb=_0x1d4e0f;_0x487aa4[_0xf134cb(0xf1)]==_0x2d3723[_0xf134cb(0xf1)]&&(_0x34fd42=!![]);});if(!_0x34fd42)return;const _0x2a7153=currentCoins[_0x1d4e0f(0x1a0)](_0x370b23=>_0x370b23['symbol']==_0x2d3723['symbol']),_0x44b77e=_0x396c55=>{if(_0x2a7153)_0x2a7153['orderstatus']=_0x396c55;};if(_0x27a68b==_0x1d4e0f(0x187))_0x44b77e('open');else{if(_0x27a68b==_0x1d4e0f(0x149)){_0x44b77e(_0x1d4e0f(0x149));const _0x1b617b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1b617b,await getOpenOrders(),handleOpenOrders();}else{if(_0x27a68b==_0x1d4e0f(0xe6)){let _0x2acdfb=![];if(lastOrders)for(const _0x7e4c6e of lastOrders){const _0x54cfd2=0xc8,_0x5c33c2=0x1388;let _0x3c6373=0x0;while(!_0x7e4c6e[_0x1d4e0f(0xe1)]&&_0x3c6373*_0x54cfd2<_0x5c33c2){_0x3c6373++,await sleep(_0x54cfd2);}if(_0x3c6373>0x0)logger[_0x1d4e0f(0x1e5)](_0x1d4e0f(0x192)+_0x3c6373*_0x54cfd2/0x3e8+_0x1d4e0f(0x1be));if(_0x7e4c6e['orderId']==_0x2d3723['id']){logger['debug'](_0x1d4e0f(0x16e)+_0x2d3723['id']),_0x2acdfb=!![];if(_0x7e4c6e[_0x1d4e0f(0xb4)]==0x0){logger[_0x1d4e0f(0x1e5)](_0x1d4e0f(0x139)+_0x2d3723['id']);if(_0x2d3723[_0x1d4e0f(0x190)])_0x7e4c6e['price']=_0x2d3723[_0x1d4e0f(0x190)];else{if(_0x2d3723[_0x1d4e0f(0x12d)])_0x7e4c6e[_0x1d4e0f(0x12d)]=_0x2d3723[_0x1d4e0f(0x12d)];else{}}_0x7e4c6e[_0x1d4e0f(0xb4)]=_0x2d3723['filled'],updateHighestFee(_0x7e4c6e),_0x44b77e(_0x1d4e0f(0xb4)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x2840f6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2840f6;}_0x7e4c6e['fee']={'currency':_0x2d3723[_0x1d4e0f(0x209)]?_0x2d3723[_0x1d4e0f(0x209)][_0x1d4e0f(0x101)]:null,'cost':_0x2d3723[_0x1d4e0f(0x209)]?_0x2d3723[_0x1d4e0f(0x209)][_0x1d4e0f(0xde)]:0x0},await updateCoinResults(_0x7e4c6e);}}}if(!_0x2acdfb){logger['debug'](_0x1d4e0f(0x111)+_0x2d3723['id']),_0x44b77e(_0x1d4e0f(0xb4));const _0x498cb9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x498cb9,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x552385=JSON[_0x1d4e0f(0xd8)](lastBalances[_0x1d4e0f(0x183)]);const _0x3f5bf1=_0x552385['find'](_0x59e29c=>_0x59e29c[_0x1d4e0f(0xf1)]==_0x2d3723['symbol']);if(_0x3f5bf1){if(_0x27a68b==_0x1d4e0f(0x187))_0x3f5bf1[_0x1d4e0f(0x18f)]=_0x3f5bf1[_0x1d4e0f(0x18f)]==_0x1d4e0f(0xb4)?_0x1d4e0f(0xb4):'open';else{if(_0x27a68b==_0x1d4e0f(0x149))_0x3f5bf1[_0x1d4e0f(0x18f)]=_0x3f5bf1[_0x1d4e0f(0x18f)]==_0x1d4e0f(0xb4)?_0x1d4e0f(0xb4):'canceled';else _0x27a68b==_0x1d4e0f(0xe6)&&(_0x3f5bf1[_0x1d4e0f(0x18f)]=_0x1d4e0f(0xb4));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x552385)},proxyEmit(_0x1d4e0f(0x17e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1172c5=_0x51b6e4;await getOpenOrders();let _0x41e317=![];currentCoins[_0x1172c5(0x1fd)](_0x43fa73=>{const _0x2cea03=_0x1172c5;_0x41e317=allOpenOrders[_0x2cea03(0x1a0)](_0x3d200c=>_0x3d200c['symbol']==_0x43fa73[_0x2cea03(0xf1)]),_0x43fa73[_0x2cea03(0x18f)]=_0x41e317?'open':_0x2cea03(0x17c);});}async function getCoins(_0x1a665f=0x0,_0x3c2071=!![],_0x577877=config['basecoin']){const _0x232432=_0x51b6e4;let _0x18ec4e,_0x3dbdcb=[],_0x54cfe3=[],_0x3a987d=[];if(_0x1a665f)await sleep(_0x1a665f);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x18ec4e=await exchange[_0x232432(0x97)](),mybalances=_0x18ec4e[_0x232432(0x20a)];for(const [_0x3733d6,_0x5874e4]of Object[_0x232432(0x1f3)](mybalances)){_0x3a987d[_0x232432(0x18d)](_0x3733d6);}config['portfolio']['forEach'](_0x2d7ce2=>{const _0x3968bc=_0x232432;!_0x3a987d[_0x3968bc(0xa2)](_0x2d7ce2[_0x3968bc(0x121)])&&(mybalances[_0x2d7ce2[_0x3968bc(0x121)]]=0x0);});if(_0x577877=='')for(const [_0x2647dd,_0x67acb0]of Object[_0x232432(0x1f3)](mybalances)){_0x67acb0!=0x0&&_0x3dbdcb['push']({'coin':_0x2647dd});}else{let _0xe02c8d=![];for(const [_0x5d54ae,_0x35a270]of Object['entries'](mybalances)){const _0x172fda=config[_0x232432(0x183)][_0x232432(0x1a0)](_0x165be2=>_0x165be2[_0x232432(0x121)]==_0x5d54ae),_0x1747f5=_0x5d54ae+'/'+_0x577877,_0x2c0067=_0x577877+'/'+_0x5d54ae,_0x71d4a9=currentCoins['find'](_0x2b2db2=>_0x2b2db2[_0x232432(0x121)]==_0x5d54ae);_0xe02c8d=![];if((_0x35a270!=0x0||_0x172fda)&&(allSymbols['includes'](_0x1747f5)||_0x5d54ae==_0x577877))_0x3dbdcb[_0x232432(0x18d)]({'coin':_0x5d54ae,'symbol':_0x1747f5,'reverse':![],'number':Math[_0x232432(0xef)](_0x35a270+(_0x172fda&&_0x172fda[_0x232432(0xb2)]||0x0),0x0),'orderstatus':_0x71d4a9?_0x71d4a9[_0x232432(0x18f)]:_0x232432(0x17c)});else{if((_0x35a270!=0x0||_0x172fda)&&allSymbols[_0x232432(0xa2)](_0x2c0067))_0x3dbdcb[_0x232432(0x18d)]({'coin':_0x5d54ae,'symbol':_0x2c0067,'reverse':!![],'number':Math['max'](_0x35a270+(_0x172fda&&_0x172fda[_0x232432(0xb2)]||0x0),0x0),'orderstatus':_0x71d4a9?_0x71d4a9[_0x232432(0x18f)]:'none'});else _0x172fda&&_0x3dbdcb['push']({'coin':_0x172fda[_0x232432(0x121)],'symbol':_0x172fda[_0x232432(0xf1)],'reverse':_0x172fda[_0x232432(0x1a5)],'number':0x0,'orderstatus':_0x232432(0x17c)});}}}}catch(_0x5aa905){if(!_0x3c2071)handleErrorNoStop(_0x5aa905,'getCoins()');else await handleError(_0x5aa905,_0x232432(0x215));}return _0x54cfe3=cloneDeep(_0x3dbdcb),_0x3dbdcb=_0x3dbdcb['filter'](_0x1be037=>{const _0xb7a7d5=_0x232432,_0x303d95=config[_0xb7a7d5(0x183)][_0xb7a7d5(0x1a0)](_0x4135a9=>_0x4135a9['coin']==_0x1be037['coin']);return _0x303d95&&!_0x303d95[_0xb7a7d5(0xd5)];}),[_0x3dbdcb,_0x54cfe3];}async function getCoinNumber(_0x4b25cc){const _0x59fe45=_0x51b6e4;let _0x394279;try{const _0x5093cc=await exchange['fetchBalance']();_0x394279=_0x5093cc[_0x59fe45(0x20a)][_0x4b25cc];}catch(_0x5b310f){await handleError(_0x5b310f,_0x59fe45(0x95));}return _0x394279;}async function getOpenOrders(){const _0x553b46=_0x51b6e4;let _0x53665e;allOpenOrders=[];try{for(const _0x3eff43 of config[_0x553b46(0x183)]){!_0x3eff43[_0x553b46(0xd5)]&&_0x3eff43[_0x553b46(0x121)]!=config[_0x553b46(0x1ce)]&&(_0x53665e=await exchange['fetchOpenOrders'](_0x3eff43['symbol']),_0x53665e[_0x553b46(0x175)]>0x0&&allOpenOrders[_0x553b46(0x18d)](_0x53665e[0x0]));}}catch(_0x574232){await handleError(_0x574232,'getOpenOrders()');}}async function handleOpenOrders(_0x257a0f=0x0){const _0xf9b3c3=_0x51b6e4;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0xf9b3c3(0x14c)]&&allOrdersPlaced&&(_0x257a0f==0x0?(logger[_0xf9b3c3(0x1e5)](_0xf9b3c3(0xd7)),_0x257a0f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xf9b3c3(0x1e5)](_0xf9b3c3(0x1bd)),validateOrders(_0xf9b3c3(0x1d8))));}async function testAPI(_0x3dd07d){const _0xeeab18=_0x51b6e4,_0x3a4b3e=ccxt[_0xeeab18(0x1f7)][_0x3dd07d[_0xeeab18(0xff)][_0xeeab18(0xf2)]()],_0x1e7ccb=new _0x3a4b3e({'apiKey':_0x3dd07d[_0xeeab18(0x196)],'secret':_0x3dd07d[_0xeeab18(0x1bf)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xeeab18(0x198)}});if(_0x3dd07d[_0xeeab18(0x119)])_0x1e7ccb[_0xeeab18(0x1a6)]=_0x3dd07d[_0xeeab18(0x119)];try{await _0x1e7ccb[_0xeeab18(0x1b2)]();}catch(_0x4e4469){throw _0x4e4469;}}function cloneDeep(_0x3a2196){const _0x4a93f1=_0x51b6e4;return JSON[_0x4a93f1(0xd8)](JSON[_0x4a93f1(0x110)](_0x3a2196));}async function getPortfolio(_0x1841d3){const _0x2e101a=_0x51b6e4;let _0xebdd1a=[],_0x2dcf90=[],_0x94fc0d=[],_0x118cb7;if(_0x1841d3[_0x2e101a(0x196)]!==_0x2e101a(0xd4)||_0x1841d3[_0x2e101a(0x1bf)]!=='************'||_0x1841d3[_0x2e101a(0x119)]&&_0x1841d3[_0x2e101a(0x119)]!==_0x2e101a(0xd4)){if(config[_0x2e101a(0xff)]){if(_0x1841d3[_0x2e101a(0x196)]==_0x2e101a(0xd4))_0x1841d3[_0x2e101a(0x196)]=config[_0x2e101a(0x196)];if(_0x1841d3[_0x2e101a(0x1bf)]==_0x2e101a(0xd4))_0x1841d3[_0x2e101a(0x1bf)]=config[_0x2e101a(0x1bf)];if(_0x1841d3[_0x2e101a(0x119)]==_0x2e101a(0xd4))_0x1841d3[_0x2e101a(0x119)]=config[_0x2e101a(0x119)];try{await testAPI(_0x1841d3);}catch(_0x2a4840){if(_0x2a4840[_0x2e101a(0x1b6)]()['includes'](_0x2e101a(0x17d))){logger[_0x2e101a(0x1e5)](_0x2e101a(0x1ee)),proxyEmit('portfolio',![]);return;}else{handleError(_0x2a4840,_0x2e101a(0x1ea));return;}}}await initExchange(_0x1841d3[_0x2e101a(0xff)],_0x1841d3[_0x2e101a(0x196)],_0x1841d3[_0x2e101a(0x1bf)],_0x1841d3[_0x2e101a(0x119)]);try{await loadSymbols();}catch(_0x336f74){if(_0x336f74['toString']()['includes'](_0x2e101a(0x17d))){proxyEmit(_0x2e101a(0x183),![]);return;}else{handleError(_0x336f74,_0x2e101a(0x102));return;}}const _0x41858d=await getCoins(0x0,![],_0x1841d3[_0x2e101a(0x1ce)]);_0x94fc0d=cloneDeep(_0x41858d[0x1]);}else _0x94fc0d=cloneDeep(currentCoinsAll);if(_0x1841d3['basecoin']=='')proxyEmit(_0x2e101a(0x183),_0x94fc0d);else{_0x94fc0d[_0x2e101a(0x1fd)](_0x1ac55c=>{const _0x48c80b=_0x2e101a;if(_0x1ac55c['coin']!=_0x1841d3[_0x48c80b(0x1ce)]&&allSymbols[_0x48c80b(0xa2)](_0x1ac55c[_0x48c80b(0xf1)]))_0xebdd1a[_0x48c80b(0x18d)](_0x1ac55c[_0x48c80b(0xf1)]);});if(_0xebdd1a['length']==0x0)logHistory('error',_0x2e101a(0x132));else{try{_0x2dcf90=await exchange[_0x2e101a(0x11c)](_0xebdd1a);}catch(_0x200b83){if(_0x200b83[_0x2e101a(0x1b6)]()[_0x2e101a(0xa2)](_0x2e101a(0x17d))){proxyEmit(_0x2e101a(0x183),![]);return;}else handleError(_0x200b83,'getPortfolio(2)');}_0x94fc0d[_0x2e101a(0x1fd)](_0x26f72d=>{const _0x1adcb5=_0x2e101a;_0x26f72d['coin']!=_0x1841d3[_0x1adcb5(0x1ce)]?_0x2dcf90[_0x26f72d[_0x1adcb5(0xf1)]]?_0x118cb7=_0x26f72d['reverse']?0x1/_0x2dcf90[_0x26f72d[_0x1adcb5(0xf1)]][_0x1adcb5(0xc1)]:_0x2dcf90[_0x26f72d['symbol']]['last']:_0x118cb7=0x0:_0x118cb7=0x1,_0x26f72d[_0x1adcb5(0x12d)]=formatResult(_0x118cb7,0x8);}),proxyEmit(_0x2e101a(0x183),_0x94fc0d);}}}function truncateTradeAmount(_0x52daee,_0x193b1c){let _0x2c340b=0x0;try{_0x2c340b=exchange['amountToPrecision'](_0x52daee,_0x193b1c);}catch(_0x36ff6d){}return _0x2c340b;}function checkMinimums(_0xe33bfd){const _0x5198df=_0x51b6e4;let _0x5c9ac7=!![];const _0x1a1695=!_0xe33bfd[_0x5198df(0x1a5)]?markets[_0xe33bfd['symbol']][_0x5198df(0x14d)]['amount'][_0x5198df(0x14a)]:markets[_0xe33bfd[_0x5198df(0xf1)]]['limits'][_0x5198df(0xde)][_0x5198df(0x14a)],_0x5bf264=!_0xe33bfd[_0x5198df(0x1a5)]?markets[_0xe33bfd[_0x5198df(0xf1)]][_0x5198df(0x14d)][_0x5198df(0xde)][_0x5198df(0x14a)]:markets[_0xe33bfd['symbol']]['limits'][_0x5198df(0xdd)][_0x5198df(0x14a)],_0x2f8252=truncateTradeAmount(_0xe33bfd[_0x5198df(0xf1)],_0xe33bfd[_0x5198df(0x218)]);_0xe33bfd[_0x5198df(0x218)]=_0x2f8252;if(Math['abs'](_0x2f8252)<_0x1a1695)_0x5c9ac7=![];if(Math['abs'](_0x2f8252)*_0xe33bfd['last']<_0x5bf264)_0x5c9ac7=![];if(_0xe33bfd[_0x5198df(0xe9)]=='sell'){let _0x5ce47f=config[_0x5198df(0x183)][_0x5198df(0x1a0)](_0x135d1e=>_0x135d1e['coin']==_0xe33bfd[_0x5198df(0x121)]);if(_0x5ce47f['offset']>0x0){if(Math[_0x5198df(0x9a)](_0x2f8252)>_0xe33bfd['number']-_0x5ce47f[_0x5198df(0xb2)])_0x5c9ac7=![];}else{if(Math[_0x5198df(0x9a)](_0x2f8252)>_0xe33bfd['number'])_0x5c9ac7=![];}}if(_0xe33bfd[_0x5198df(0xe9)]==_0x5198df(0x1f8)){let _0x59cf5c=config[_0x5198df(0x183)]['find'](_0x59491a=>_0x59491a[_0x5198df(0x121)]==config[_0x5198df(0x1ce)]),_0x106e78=currentCoins[_0x5198df(0x1a0)](_0x2ac5d2=>_0x2ac5d2[_0x5198df(0x121)]==config[_0x5198df(0x1ce)]);if(_0x59cf5c[_0x5198df(0xb2)]>0x0){if(Math[_0x5198df(0x9a)](_0x2f8252)*_0xe33bfd[_0x5198df(0xc1)]>_0x106e78[_0x5198df(0x1b7)]-_0x59cf5c['offset'])_0x5c9ac7=![];}else{if(Math[_0x5198df(0x9a)](_0x2f8252)*_0xe33bfd[_0x5198df(0xc1)]>_0x106e78[_0x5198df(0x1b7)])_0x5c9ac7=![];}}return _0x5c9ac7;}async function getBalances(_0x18d282=!![]){const _0x70477c=_0x51b6e4;let _0x238aa5=0x0,_0xd0532c;const _0x50946f=config[_0x70477c(0x207)];if(config['headless']&&config[_0x70477c(0xa0)]<0x0)await validate24hChanges();currentCoins[_0x70477c(0x1fd)](_0x1954b1=>{const _0x1f3065=_0x70477c;if(_0x1954b1[_0x1f3065(0x121)]!=config['basecoin']){let _0x17986b=global[_0x1f3065(0x93)][noslash(_0x1954b1[_0x1f3065(0xf1)])];_0xd0532c=_0x1954b1[_0x1f3065(0x1a5)]?0x1/_0x17986b:_0x17986b;}else _0xd0532c=0x1;let _0x160628=_0x1954b1[_0x1f3065(0x1b7)]*_0xd0532c;_0x238aa5+=_0x160628,_0x1954b1[_0x1f3065(0xc1)]=formatResult(Number(_0xd0532c),0x8),_0x1954b1[_0x1f3065(0x14e)]=_0x160628;}),currentCoins[_0x70477c(0x1fd)](_0x1ccb92=>{const _0x4e8e65=_0x70477c;let _0x2fb6fd=config[_0x4e8e65(0x183)][_0x4e8e65(0x1a0)](_0x1deadf=>_0x1deadf[_0x4e8e65(0x121)]==_0x1ccb92[_0x4e8e65(0x121)]),_0x4f6fbd=Number(_0x2fb6fd[_0x4e8e65(0x1a3)]),_0x42f8d1=_0x1ccb92[_0x4e8e65(0x14e)]/_0x238aa5*0x64,_0x4a8882=_0x4f6fbd*_0x238aa5/0x64/_0x1ccb92['last']-_0x1ccb92[_0x4e8e65(0x1b7)];_0x1ccb92[_0x4e8e65(0x1a3)]=formatResult(_0x42f8d1,0x3),_0x1ccb92['target']=formatResult(_0x4f6fbd,0x3),_0x1ccb92[_0x4e8e65(0x218)]=formatResult(_0x4a8882,0x8),_0x1ccb92[_0x4e8e65(0xe9)]='',_0x1ccb92[_0x4e8e65(0x1c3)]=![];if(_0x1ccb92[_0x4e8e65(0x121)]!=config[_0x4e8e65(0x1ce)]){if(_0x1ccb92[_0x4e8e65(0x1a3)]>_0x4f6fbd)_0x1ccb92['side']=_0x4e8e65(0x1fb),_0x1ccb92[_0x4e8e65(0x1c3)]=checkMinimums(_0x1ccb92);else _0x1ccb92['distribution']<_0x4f6fbd&&(_0x1ccb92[_0x4e8e65(0xe9)]=_0x4e8e65(0x1f8),_0x1ccb92[_0x4e8e65(0x1c3)]=checkMinimums(_0x1ccb92));}_0x1ccb92[_0x4e8e65(0x1fe)]=_0x1ccb92[_0x4e8e65(0x1a3)]/_0x1ccb92[_0x4e8e65(0x13c)]-0x1;if(_0x1ccb92[_0x4e8e65(0x18f)]=='filled'||_0x1ccb92[_0x4e8e65(0x18f)]==_0x4e8e65(0x149))_0x1ccb92[_0x4e8e65(0x18f)]='none';}),currentCoins[_0x70477c(0xfd)]((_0x17afbf,_0x129051)=>_0x17afbf[_0x70477c(0x1fe)]<_0x129051['delta']?0x1:_0x129051['delta']<_0x17afbf[_0x70477c(0x1fe)]?-0x1:0x0);const _0x307e5f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x307e5f['eur'],'usd':_0x307e5f[_0x70477c(0xda)],'portfolio':JSON[_0x70477c(0x110)](currentCoins),'threshold':_0x50946f},proxyEmit(_0x70477c(0x17e),{'serverversion':serverversion,'balances':lastBalances});if(_0x18d282){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x50946f});else{if(lockOrders==ORDERS[_0x70477c(0x10e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x50946f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1d2b08=getNormalizedPerformance();getStartingBalances(_0x1d2b08),emitPerformance(_0x1d2b08);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x65ba08=getNormalizedPerformance();emitPerformance(_0x65ba08),getStartingBalances(_0x65ba08),logger[_0x70477c(0x1e5)](_0x70477c(0xc8));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x12f1d6=_0x51b6e4;if(!lastBalances)return;let _0x335832=[],_0x43bb04,_0x2b8f1a=JSON[_0x12f1d6(0xd8)](lastBalances[_0x12f1d6(0x183)]);_0x2b8f1a[_0x12f1d6(0xfd)]((_0x325ae7,_0x26d0fd)=>_0x325ae7[_0x12f1d6(0x121)]>_0x26d0fd['coin']?0x1:_0x26d0fd['coin']>_0x325ae7['coin']?-0x1:0x0),_0x2b8f1a[_0x12f1d6(0x1fd)](_0x2d0cd4=>{const _0x4fcdd6=_0x12f1d6;let _0x509c2e={'coin':_0x2d0cd4[_0x4fcdd6(0x121)],'number':_0x2d0cd4[_0x4fcdd6(0x1b7)],'price':_0x2d0cd4[_0x4fcdd6(0xc1)]};_0x335832[_0x4fcdd6(0x18d)](_0x509c2e);});const _0x4e394a=await getFiat();_0x43bb04={'date':lastBalances[_0x12f1d6(0x211)]['split']('\x20')[0x0],'eur':_0x4e394a[_0x12f1d6(0x1f6)],'usd':_0x4e394a[_0x12f1d6(0xda)],'coins':_0x335832};let _0x50fd88=dbPerformance[_0x12f1d6(0xb0)]('data')[_0x12f1d6(0x1a0)]({'date':_0x43bb04[_0x12f1d6(0xc4)]})[_0x12f1d6(0x14e)]();_0x50fd88?_0x43bb04[_0x12f1d6(0xc4)]!=config[_0x12f1d6(0x156)]&&dbPerformance[_0x12f1d6(0xb0)]('data')[_0x12f1d6(0x1a0)]({'date':_0x43bb04[_0x12f1d6(0xc4)]})[_0x12f1d6(0x1ac)](_0x43bb04)['write']():dbPerformance[_0x12f1d6(0xb0)](_0x12f1d6(0x1a9))[_0x12f1d6(0x18d)](_0x43bb04)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xaa6693=_0x51b6e4;let _0x3ddb49=[];if(dbPerformance[_0xaa6693(0x103)](_0xaa6693(0x1a9))['value']()){let _0x2d6dff=dbPerformance[_0xaa6693(0xb0)](_0xaa6693(0x1a9))['cloneDeep']()['filter'](_0x3e7d0c=>{const _0x59caa8=_0xaa6693;if(_0x3e7d0c[_0x59caa8(0xc0)][_0x59caa8(0x175)]==0x0)return![];else return!![];})['sortBy'](_0xaa6693(0xc4))[_0xaa6693(0x14e)](),_0x430bcc=[...config[_0xaa6693(0x1eb)]];_0x430bcc[_0xaa6693(0xfd)]((_0x1acfce,_0x33e147)=>_0x1acfce[_0xaa6693(0xc4)]>_0x33e147['date']?-0x1:_0x33e147[_0xaa6693(0xc4)]>_0x1acfce[_0xaa6693(0xc4)]?0x1:0x0);let _0x195c93=0x1,_0x4d145e=[],_0x12d36c=0x0;_0x2d6dff[_0xaa6693(0x197)]()['reverse']()[_0xaa6693(0x1fd)]((_0xba9459,_0x2767b4)=>{const _0x10f25c=_0xaa6693;if(_0x430bcc[_0x12d36c]){if(_0x2d6dff[_0x2d6dff[_0x10f25c(0x175)]-_0x2767b4]&&_0x430bcc[_0x12d36c][_0x10f25c(0xc4)]==_0x2d6dff[_0x2d6dff[_0x10f25c(0x175)]-_0x2767b4][_0x10f25c(0xc4)]){if(_0x2767b4<_0x2d6dff['length']){let _0xb8c20d=0x0,_0x4ec692=0x0;_0x2d6dff[_0x2d6dff[_0x10f25c(0x175)]-_0x2767b4][_0x10f25c(0xc0)][_0x10f25c(0x1fd)](_0x31a23d=>{const _0xf73645=_0x10f25c;_0x4ec692+=_0x31a23d[_0xf73645(0x1b7)]*_0x31a23d[_0xf73645(0x12d)];}),_0x430bcc[_0x12d36c][_0x10f25c(0x16b)][_0x10f25c(0x1fd)](_0x3d203e=>{const _0x454f6d=_0x10f25c;_0xb8c20d+=_0x3d203e[_0x454f6d(0x1b7)]*_0x3d203e[_0x454f6d(0x12d)];}),_0x195c93*=_0xb8c20d/(_0x4ec692-_0xb8c20d)+0x1;}_0x12d36c++;}}let _0x25db0e=0x0;_0xba9459[_0x10f25c(0xc0)]['forEach'](_0x2a8a4c=>{const _0x1eeec6=_0x10f25c;_0x25db0e+=_0x2a8a4c[_0x1eeec6(0x1b7)]*_0x2a8a4c['price'];}),_0x4d145e[_0x2d6dff[_0x10f25c(0x175)]-_0x2767b4-0x1]=_0x25db0e*(_0x195c93-0x1);});let _0x46a577=[];_0x430bcc=[...config[_0xaa6693(0x1eb)]]||[];let _0x8e4bf7=0x0;_0x12d36c=0x0,_0x2d6dff[_0xaa6693(0x1fd)]((_0x3800b2,_0x5c6ff4)=>{const _0x445c07=_0xaa6693;if(_0x430bcc[_0x12d36c]){const _0x5446aa=fns[_0x445c07(0xd8)](_0x430bcc[_0x12d36c][_0x445c07(0xc4)],_0x445c07(0x177),new Date()),_0x56bcaf=fns[_0x445c07(0xd8)](_0x3800b2[_0x445c07(0xc4)],_0x445c07(0x177),new Date());if(fns['isEqual'](_0x5446aa,_0x56bcaf)){let _0x36f130=0x0;_0x430bcc[_0x12d36c][_0x445c07(0x16b)][_0x445c07(0x1fd)](_0x23b30a=>{const _0x4c774b=_0x445c07;!_0x46a577[_0x23b30a[_0x4c774b(0x121)]]?_0x46a577[_0x23b30a[_0x4c774b(0x121)]]=_0x23b30a[_0x4c774b(0x1b7)]:(_0x36f130=_0x46a577[_0x23b30a['coin']],_0x46a577[_0x23b30a[_0x4c774b(0x121)]]+=_0x23b30a[_0x4c774b(0x1b7)]);const _0x5e684f=_0x3800b2[_0x4c774b(0xc0)][_0x4c774b(0x1a0)](_0x17d118=>_0x17d118[_0x4c774b(0x121)]==_0x23b30a[_0x4c774b(0x121)]);(!_0x5e684f||_0x5e684f[_0x4c774b(0x1b7)]==0x0)&&(_0x8e4bf7+=(-_0x23b30a[_0x4c774b(0x1b7)]-_0x36f130)*_0x23b30a['price']);}),_0x12d36c++;}}_0x3800b2[_0x445c07(0xc0)][_0x445c07(0x1fd)]((_0x2f4a7b,_0x2c8306)=>{const _0x319e3f=_0x445c07;_0x46a577[_0x2f4a7b['coin']]&&(_0x2f4a7b[_0x319e3f(0x170)]=_0x46a577[_0x2f4a7b['coin']]);}),_0x3ddb49[_0x445c07(0x18d)]({'date':_0x3800b2[_0x445c07(0xc4)],'eur':_0x3800b2[_0x445c07(0x1f6)],'usd':_0x3800b2[_0x445c07(0xda)],'offset':_0x4d145e[_0x5c6ff4],'netoffset':_0x8e4bf7,'coins':_0x3800b2[_0x445c07(0xc0)]});});}return _0x3ddb49;}function emitPerformance(_0x236521){const _0x40a9ac=_0x51b6e4;_0x236521[_0x40a9ac(0x175)]!==0x0?(proxyEmit(_0x40a9ac(0xdb),_0x236521),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x107bf3,_0x4d0f67){const _0xecdba6=_0x51b6e4;let _0x346064=0x0,_0x57cdb0=0x0,_0x15a2cb=0x0;_0x107bf3[_0xecdba6(0xc0)]['forEach'](_0x6ebbd4=>{const _0x2eee32=_0xecdba6;_0x346064+=_0x6ebbd4[_0x2eee32(0x1b7)]*_0x6ebbd4[_0x2eee32(0x12d)];});_0x4d0f67&&(_0x346064+=_0x107bf3[_0xecdba6(0xb2)]);if(config['basecoin']===_0xecdba6(0xcc)||config[_0xecdba6(0x1ce)]==='ETH')_0x57cdb0=_0x346064*_0x107bf3[_0xecdba6(0x1f6)],_0x15a2cb=_0x346064*_0x107bf3[_0xecdba6(0xda)];else{if(usdBasecoins[_0xecdba6(0xa2)](config[_0xecdba6(0x1ce)]))_0x57cdb0=_0x346064*_0x107bf3[_0xecdba6(0x1f6)]/_0x107bf3['usd'],_0x15a2cb=_0x346064;else config[_0xecdba6(0x1ce)]===_0xecdba6(0xbd)&&(_0x57cdb0=_0x346064,_0x15a2cb=_0x346064*_0x107bf3[_0xecdba6(0xda)]/_0x107bf3[_0xecdba6(0x1f6)]);}return[_0x346064,_0x57cdb0,_0x15a2cb];}function getKPIs(_0x6ca5f1,_0x352543=_0x51b6e4(0xbd)){const _0x320af0=_0x51b6e4,_0x1b6ec6=config[_0x320af0(0x1ce)],_0x1752c0=lastBalances,_0x58b53a=currentCoins,_0x57abf2=getNormalizedPerformance(),_0x45ef01=_0x6ca5f1==='basecoin'?_0x1b6ec6:_0x6ca5f1===_0x320af0(0xf7)||_0x6ca5f1===_0x320af0(0xe5)?_0x352543:_0x320af0(0x98)+_0x1b6ec6,_0x446cc1=_0x6ca5f1===_0x320af0(0x1e1)?_0x320af0(0x18b):_0x6ca5f1===_0x320af0(0xe5)?'Net\x20effect':_0x45ef01+'\x20value',_0x9c2e20=_0x6ca5f1===_0x320af0(0x1e1)||_0x6ca5f1==='net-fiat'?_0x320af0(0x18b):_0x45ef01+'\x20change';let _0x2de53a=0x0;_0x58b53a[_0x320af0(0x1fd)](_0x4c93a0=>{const _0x46465a=_0x320af0;_0x2de53a+=_0x4c93a0[_0x46465a(0x1b7)]*_0x4c93a0['last'];});if(_0x6ca5f1===_0x320af0(0xf7)||_0x6ca5f1===_0x320af0(0xe5)){if(_0x1b6ec6===_0x320af0(0xcc)||_0x1b6ec6==='ETH')_0x2de53a=_0x2de53a*(_0x352543===_0x320af0(0xbd)?_0x1752c0[_0x320af0(0x1f6)]:_0x1752c0['usd']);else{if(usdBasecoins[_0x320af0(0xa2)](_0x1b6ec6))_0x2de53a=_0x2de53a*(_0x352543===_0x320af0(0xbd)?_0x1752c0['eur']/_0x1752c0[_0x320af0(0xda)]:0x1);else _0x1b6ec6===_0x320af0(0xbd)&&(_0x2de53a=_0x2de53a*(_0x352543===_0x320af0(0xbd)?0x1:_0x1752c0[_0x320af0(0xda)]/_0x1752c0[_0x320af0(0x1f6)]));}}let _0x4b21d9;if(_0x2de53a!==0x0){if(_0x6ca5f1===_0x320af0(0x1ce))_0x4b21d9=(_0x2de53a/startingBalances['basecoin']-0x1)*0x64;else{if(_0x352543==='EUR')_0x4b21d9=(_0x2de53a/startingBalances[_0x320af0(0x1f6)]-0x1)*0x64;else _0x4b21d9=(_0x2de53a/startingBalances[_0x320af0(0xda)]-0x1)*0x64;}let _0x29a363=0x0;if(startingBalances[_0x320af0(0xc0)])_0x58b53a['forEach'](_0x29edd3=>{const _0x4be032=_0x320af0;let _0x4876d5=startingBalances[_0x4be032(0xc0)][_0x4be032(0x1a0)](_0x1cc3bc=>_0x1cc3bc[_0x4be032(0x121)]===_0x29edd3[_0x4be032(0x121)]);if(_0x4876d5&&_0x4876d5[_0x4be032(0x121)]&&_0x29edd3[_0x4be032(0x1b7)]!==0x0)_0x29a363+=_0x4876d5[_0x4be032(0x1b7)]*_0x29edd3[_0x4be032(0xc1)];});let _0x4341e3=0x0;if(_0x57abf2['length']!==0x0){let _0x5c12fa=_0x57abf2[_0x57abf2[_0x320af0(0x175)]-0x1];_0x4341e3=_0x5c12fa[_0x320af0(0x1a1)];}_0x29a363-=_0x4341e3;_0x6ca5f1===_0x320af0(0x1e1)&&(_0x4b21d9=(_0x2de53a-_0x29a363)/startingBalances[_0x320af0(0x1ce)]*0x64,_0x2de53a=_0x2de53a-_0x29a363);if(_0x6ca5f1===_0x320af0(0xe5)){let _0x2c69fd=_0x352543===_0x320af0(0xbd)?startingBalances[_0x320af0(0x1f6)]:startingBalances[_0x320af0(0xda)];if(_0x1b6ec6===_0x320af0(0xcc)||_0x1b6ec6===_0x320af0(0xdf))_0x29a363=_0x352543===_0x320af0(0xbd)?_0x29a363*_0x1752c0['eur']:_0x29a363*_0x1752c0[_0x320af0(0xda)];else{if(usdBasecoins[_0x320af0(0xa2)](_0x1b6ec6))_0x29a363=_0x352543===_0x320af0(0xbd)?_0x29a363*_0x1752c0[_0x320af0(0x1f6)]/_0x1752c0[_0x320af0(0xda)]:_0x29a363;else _0x1b6ec6===_0x320af0(0xbd)&&(_0x29a363=_0x352543===_0x320af0(0xbd)?_0x29a363:_0x29a363*_0x1752c0[_0x320af0(0xda)]/_0x1752c0['eur']);}_0x4b21d9=(_0x2de53a-_0x29a363)/_0x2c69fd*0x64,_0x2de53a=_0x2de53a-_0x29a363;}if(_0x4b21d9){if(_0x4b21d9<0x64)_0x4b21d9=_0x4b21d9['toFixed'](0x2);else{if(_0x4b21d9<0x3e8)_0x4b21d9=_0x4b21d9[_0x320af0(0x136)](0x1);else _0x4b21d9=_0x4b21d9[_0x320af0(0x136)](0x0);}}else _0x4b21d9=Number('0')[_0x320af0(0x136)](0x2);if(_0x2de53a){if(Math['abs'](_0x2de53a)<0.000001)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x2);else{if(Math[_0x320af0(0x9a)](_0x2de53a)<0.1)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x6);else{if(Math['abs'](_0x2de53a)<0x1)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x5);else{if(Math[_0x320af0(0x9a)](_0x2de53a)<0xa)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x4);else{if(Math[_0x320af0(0x9a)](_0x2de53a)<0x64)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x3);else{if(Math['abs'](_0x2de53a)<0x3e8)_0x2de53a=_0x2de53a[_0x320af0(0x136)](0x2);else _0x2de53a=_0x2de53a[_0x320af0(0x136)](0x2);}}}}}}else _0x2de53a=Number('0')[_0x320af0(0x136)](0x2);}else _0x4b21d9=Number('0')[_0x320af0(0x136)](0x2);return{'value':_0x2de53a,'change':_0x4b21d9,'leftTxt':_0x446cc1,'rightTxt':_0x9c2e20};}async function getStartingBalances(_0x19fb84,_0x549cc5=!![]){const _0x1bee61=_0x51b6e4;if(_0x19fb84[_0x1bee61(0x175)]!==0x0){const [_0x2f2440,_0x2dbed3,_0x4f52d5]=getPerf(_0x19fb84[0x0],!![]);let _0x4597c1=[];config['portfolio'][_0x1bee61(0x1fd)](_0x20cd48=>{const _0x1fb86e=_0x1bee61;let _0x1c4572=0x0,_0x1e349b;config['liquidity'][_0x1fb86e(0x1fd)](_0x4243f0=>{const _0x109275=_0x1fb86e;let _0x7f475a=_0x4243f0[_0x109275(0x16b)][_0x109275(0x1a0)](_0x1f0c85=>_0x1f0c85[_0x109275(0x121)]==_0x20cd48[_0x109275(0x121)]);if(_0x7f475a){_0x1c4572+=_0x7f475a[_0x109275(0x1b7)];if(!_0x1e349b)_0x1e349b=_0x7f475a[_0x109275(0x12d)];}}),_0x4597c1[_0x1fb86e(0x18d)]({'coin':_0x20cd48[_0x1fb86e(0x121)],'number':_0x1c4572,'initialprice':_0x1e349b});});const _0x3723ee={'basecoin':_0x2f2440,'eur':_0x2dbed3,'usd':_0x4f52d5,'coins':_0x4597c1};if(_0x549cc5)proxyEmit(_0x1bee61(0x1bb),_0x3723ee);startingBalances=_0x3723ee;}}function headlessMode(_0x288669){const _0x5988e7=_0x51b6e4;let _0x312295=_0x288669[_0x5988e7(0x183)],_0x1e1494=_0x288669['threshold'],_0x5b9236=[];for(let _0x4714d1 of _0x312295){if(_0x4714d1[_0x5988e7(0x121)]!=config[_0x5988e7(0x1ce)]){if(_0x4714d1[_0x5988e7(0x1fe)]>=_0x1e1494/0x64){if(_0x4714d1[_0x5988e7(0x1c3)])_0x5b9236[_0x5988e7(0x18d)](_0x4714d1);}else{if(_0x4714d1[_0x5988e7(0x1fe)]<=-_0x1e1494/0x64){if(_0x4714d1[_0x5988e7(0x1c3)])_0x5b9236[_0x5988e7(0x18d)](_0x4714d1);}}}}_0x5b9236[_0x5988e7(0x175)]>0x0&&(lockOrders==ORDERS[_0x5988e7(0x10e)]&&!coolingDown&&_0x5b9236[_0x5988e7(0x1fd)](_0x1127c6=>{const _0x444fd0=_0x5988e7;logger[_0x444fd0(0x1e5)]('Trigger:\x20'+_0x1127c6[_0x444fd0(0x121)]+'\x20'+_0x1127c6[_0x444fd0(0x1b7)]+'\x20'+_0x1127c6[_0x444fd0(0xc1)]+'\x20'+_0x1127c6[_0x444fd0(0x1a3)]+'%\x20'+_0x1127c6[_0x444fd0(0x13c)]+'%\x20'+(0x64*_0x1127c6[_0x444fd0(0x1fe)])[_0x444fd0(0x136)](0x2)+_0x444fd0(0x154)+_0x1e1494[_0x444fd0(0x136)](0x2)+'%)');}),placeOrder(_0x5b9236));}function notifyBalance(_0x22f944){const _0x15b366=_0x51b6e4;let _0x1de3cb=_0x22f944['portfolio'],_0x2ee2e7=_0x22f944[_0x15b366(0x207)],_0xb2ba4b=[];for(let _0xe08f51 of _0x1de3cb){if(_0xe08f51['coin']!=config[_0x15b366(0x1ce)]){if(_0xe08f51[_0x15b366(0x1fe)]>=_0x2ee2e7/0x64){if(_0xe08f51[_0x15b366(0x1c3)])_0xb2ba4b[_0x15b366(0x18d)](_0xe08f51);}else{if(_0xe08f51[_0x15b366(0x1fe)]<=-_0x2ee2e7/0x64){if(_0xe08f51[_0x15b366(0x1c3)])_0xb2ba4b[_0x15b366(0x18d)](_0xe08f51);}}}}if(_0xb2ba4b[_0x15b366(0x175)]>0x0){let _0x4bd541=_0xb2ba4b[_0x15b366(0x1d3)](_0x21539d=>_0x21539d[_0x15b366(0x121)]);_0x4bd541[_0x15b366(0xfd)]();let _0xa35da6=_0x4bd541[_0x15b366(0xfe)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x15b366(0x1cc));lastCoinsToBalance=_0xa35da6;}}function symbolToCoin(_0x755a98){const _0x3d4a5d=_0x51b6e4;let _0x1b5611;if(_0x755a98[_0x3d4a5d(0xa2)]('/'+config[_0x3d4a5d(0x1ce)]))_0x1b5611=_0x755a98[_0x3d4a5d(0x163)]('/'+config[_0x3d4a5d(0x1ce)],'');if(_0x755a98[_0x3d4a5d(0xa2)](config[_0x3d4a5d(0x1ce)]+'/'))_0x1b5611=_0x755a98['replace'](config[_0x3d4a5d(0x1ce)]+'/','');return _0x1b5611;}async function unlockOrders(){const _0x1ef47d=_0x51b6e4;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1ef47d(0x14c)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x1ef47d(0x12e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x516f9b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x516f9b,validateOrdersState=_0x1ef47d(0x170),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug']('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x42ddea){const _0x1a8c01=_0x51b6e4;if(_0x42ddea)validateOrdersState=_0x42ddea;logger[_0x1a8c01(0x1e5)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x1a8c01(0xf9):_0x1a8c01(0x1bc)));let _0x3ed5fb=[],_0x2be750=config[_0x1a8c01(0x13f)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1a8c01(0x141)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1a8c01(0x14c)])return;logger[_0x1a8c01(0x1e5)](_0x1a8c01(0x1c0)+validateOrdersState),lastOrders[_0x1a8c01(0x1fd)](_0x5a6b9d=>{const _0x2ad699=_0x1a8c01;let _0x5bd915=![];_0x5a6b9d['filled']>0x0&&(_0x5bd915=!![]),_0x3ed5fb[_0x2ad699(0x18d)](_0x5bd915),_0x5bd915&&config[_0x2ad699(0x13f)]!=_0x2ad699(0x1da)&&logHistory('order',_0x2ad699(0x92)+_0x5a6b9d[_0x2ad699(0xf1)]+'\x20'+_0x5a6b9d[_0x2ad699(0xe9)]+'\x20#'+formatResult(_0x5a6b9d[_0x2ad699(0xb4)],0x8)+'\x20@'+formatResult(_0x5a6b9d[_0x2ad699(0x12d)],0x8));}),_0x3ed5fb[_0x1a8c01(0x1fd)]((_0xf1769,_0x46ebd6)=>{if(_0xf1769)lastOrders['splice'](_0x46ebd6,0x1);}),persistOpenOrders(lastOrders);const _0x3a7e30=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x1a8c01(0x205);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x3ed5fb['includes'](![])){if(config[_0x1a8c01(0x13f)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3ed5fb[_0x1a8c01(0xa2)](![])){}else{if(allOrdersPlaced){if(config[_0x1a8c01(0x13f)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x3ed5fb[_0x1a8c01(0xa2)](![])&&(config[_0x1a8c01(0x13f)]==_0x1a8c01(0x1da)?logHistory(_0x1a8c01(0xd0),_0x1a8c01(0x10a)+Math['round'](_0x2be750*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3a7e30):(await cancelOrders(),logHistory(_0x1a8c01(0xd0),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x1a8c01(0x1a8)](_0x2be750*validateOrderInterval/0xea60)+_0x1a8c01(0x12f)+_0x3a7e30))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x1a8c01(0x13f)]!='market')logHistory(_0x1a8c01(0xd0),'No\x20more\x20open\x20orders\x20-\x20'+_0x3a7e30);await unlockOrders();}}}}}async function cancelOrders(){const _0x3c1a4f=_0x51b6e4;lastOrders[_0x3c1a4f(0x1fd)](async _0x5e1f5d=>{const _0x55e12c=_0x3c1a4f;try{const _0x2fde21=await exchange[_0x55e12c(0x12a)](_0x5e1f5d[_0x55e12c(0xe1)],_0x5e1f5d[_0x55e12c(0xf1)]);}catch(_0x113e01){if(_0x113e01[_0x55e12c(0x1b6)]()[_0x55e12c(0xa2)]('OrderNotFound')){}else await handleError(_0x113e01,_0x55e12c(0xa7));}});}async function initCoinResults(_0x493a7b){const _0x25952f=_0x51b6e4;_0x493a7b?logger[_0x25952f(0x1e5)](_0x25952f(0x1cf)+_0x493a7b):logger['debug'](_0x25952f(0x204)),config[_0x25952f(0x183)][_0x25952f(0x1fd)](_0x353549=>{const _0x24e9d2=_0x25952f;if(!_0x353549[_0x24e9d2(0xd5)]&&_0x353549[_0x24e9d2(0x121)]!=config[_0x24e9d2(0x1ce)]){const _0x56a207=currentCoins[_0x24e9d2(0x1a0)](_0x5a2066=>_0x5a2066['coin']==_0x353549[_0x24e9d2(0x121)]),_0x429371=global[_0x24e9d2(0x93)][noslash(_0x353549['symbol'])];let _0x1b52d8=_0x56a207?_0x56a207[_0x24e9d2(0x1b7)]:null,_0x192f6e=_0x353549['reverse']?0x1/_0x429371:_0x429371,_0x557bb0;config[_0x24e9d2(0x1eb)][_0x24e9d2(0x1fd)](_0x4555df=>{const _0x20469a=_0x24e9d2;!_0x557bb0&&(_0x557bb0=_0x4555df[_0x20469a(0x16b)][_0x20469a(0x1a0)](_0x17d237=>_0x17d237[_0x20469a(0x121)]==_0x353549[_0x20469a(0x121)]),_0x557bb0&&(_0x1b52d8=_0x557bb0[_0x20469a(0x1b7)],_0x192f6e=_0x557bb0[_0x20469a(0x12d)]));});let _0x58d93a=dbCoinResults['get'](_0x24e9d2(0xc0))['find']({'coin':_0x353549[_0x24e9d2(0x121)]})[_0x24e9d2(0x14e)]();if(!_0x58d93a){const _0x129db4={'coin':_0x353549[_0x24e9d2(0x121)],'number':_0x1b52d8,'breakeven':_0x192f6e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x24e9d2(0xb0)](_0x24e9d2(0xc0))[_0x24e9d2(0x18d)](_0x129db4)[_0x24e9d2(0x104)]();}else{if(_0x493a7b&&_0x353549['coin']==_0x493a7b){const _0x4cc3be={'coin':_0x353549['coin'],'number':_0x1b52d8,'breakeven':_0x192f6e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x24e9d2(0xb0)](_0x24e9d2(0xc0))[_0x24e9d2(0x1a0)]({'coin':_0x353549[_0x24e9d2(0x121)]})[_0x24e9d2(0x1ac)](_0x4cc3be)[_0x24e9d2(0x104)]();}}}});}async function updateCoinResults(_0x580cad,_0x54b9ec=![]){const _0x2c2008=_0x51b6e4;let _0x12f264,_0x2c07fa,_0x53f740,_0x17aef9,_0x51ff02,_0x57ebbb,_0x54db6d=dbCoinResults[_0x2c2008(0xb0)](_0x2c2008(0xc0))['find']({'coin':_0x580cad[_0x2c2008(0x121)]})['value'](),_0x309b6b=![];_0x54db6d&&Object[_0x2c2008(0x1f3)](_0x54db6d)[_0x2c2008(0x1fd)](([_0x219ed7,_0x22e3d4])=>{if(_0x22e3d4==null)_0x309b6b=!![];});(!_0x54db6d||_0x309b6b)&&(await initCoinResults(_0x580cad['coin']),_0x54db6d=dbCoinResults[_0x2c2008(0xb0)](_0x2c2008(0xc0))['find']({'coin':_0x580cad[_0x2c2008(0x121)]})[_0x2c2008(0x14e)]());_0x580cad[_0x2c2008(0x1a5)]&&(_0x57ebbb={'filled':_0x580cad[_0x2c2008(0xb4)]*_0x580cad[_0x2c2008(0x12d)],'amount':_0x580cad['filled']*_0x580cad[_0x2c2008(0x12d)],'side':_0x580cad[_0x2c2008(0xe9)]==_0x2c2008(0x1fb)?_0x2c2008(0x1f8):_0x2c2008(0x1fb),'price':0x1/_0x580cad[_0x2c2008(0x12d)]},_0x580cad={..._0x580cad,..._0x57ebbb});_0x54b9ec?_0x2c07fa=_0x580cad[_0x2c2008(0xe9)]=='buy'?_0x54db6d[_0x2c2008(0x1b7)]+_0x580cad[_0x2c2008(0xb4)]:_0x54db6d[_0x2c2008(0x1b7)]-_0x580cad[_0x2c2008(0xb4)]:_0x2c07fa=await getCoinNumber(_0x580cad['coin']);if(_0x580cad[_0x2c2008(0x209)]&&_0x580cad['fee']['currency']==config['basecoin'])_0x12f264=_0x580cad[_0x2c2008(0x209)][_0x2c2008(0xde)];else{if(_0x580cad[_0x2c2008(0x209)]&&_0x580cad[_0x2c2008(0x209)]['currency']==_0x2c2008(0x1d4)&&!_0x54b9ec)_0x12f264=_0x580cad[_0x2c2008(0x209)]['cost']*global[_0x2c2008(0x93)]['BNB'+config[_0x2c2008(0x1ce)]];else _0x12f264=defaultFee*_0x580cad['filled']*_0x580cad[_0x2c2008(0x12d)];}_0x580cad[_0x2c2008(0xe9)]==_0x2c2008(0x1f8)?(_0x53f740=_0x2c07fa!=0x0?(_0x54db6d[_0x2c2008(0xe8)]*_0x54db6d[_0x2c2008(0x1b7)]+_0x580cad['price']*(_0x2c07fa-_0x54db6d[_0x2c2008(0x1b7)])+_0x12f264)/_0x2c07fa:0x0,_0x17aef9=_0x54db6d[_0x2c2008(0x1d9)]):(_0x53f740=_0x2c07fa!=0x0?(_0x54db6d[_0x2c2008(0xe8)]*_0x54db6d[_0x2c2008(0x1b7)]-_0x580cad[_0x2c2008(0x12d)]*(_0x54db6d['number']-_0x2c07fa)+_0x12f264)/_0x2c07fa:0x0,_0x17aef9=_0x54db6d[_0x2c2008(0x1d9)]+(_0x580cad[_0x2c2008(0x12d)]-_0x54db6d[_0x2c2008(0xe8)])*_0x580cad[_0x2c2008(0xb4)]);_0x51ff02=(_0x580cad[_0x2c2008(0x12d)]-_0x53f740-_0x12f264/_0x580cad[_0x2c2008(0xb4)])*_0x2c07fa;let _0x585089={'coin':_0x580cad[_0x2c2008(0x121)],'number':_0x2c07fa,'breakeven':formatResult(_0x53f740,0x8),'realized':formatResult(_0x17aef9,0x8),'unrealized':formatResult(_0x51ff02,0x8),'fees':formatResult(_0x54db6d[_0x2c2008(0x11e)]+_0x12f264,0x8),'sells':_0x580cad['side']==_0x2c2008(0x1fb)?_0x54db6d['sells']+0x1:_0x54db6d['sells'],'buys':_0x580cad[_0x2c2008(0xe9)]=='buy'?_0x54db6d[_0x2c2008(0x1d5)]+0x1:_0x54db6d[_0x2c2008(0x1d5)]};dbCoinResults[_0x2c2008(0xb0)](_0x2c2008(0xc0))['find']({'coin':_0x580cad[_0x2c2008(0x121)]})['assign'](_0x585089)[_0x2c2008(0x104)]();if(!_0x54b9ec){if(_0x580cad[_0x2c2008(0x209)]&&_0x580cad[_0x2c2008(0x209)][_0x2c2008(0x101)]==_0x2c2008(0x1d4)){const _0x934299=currentCoins[_0x2c2008(0x1a0)](_0x10069b=>_0x10069b[_0x2c2008(0x121)]==_0x2c2008(0x1d4));if(_0x934299){let _0x1e9745=dbCoinResults[_0x2c2008(0xb0)]('coins')[_0x2c2008(0x1a0)]({'coin':_0x2c2008(0x1d4)})[_0x2c2008(0x14e)]();_0x585089={..._0x1e9745,'number':_0x934299['number']},dbCoinResults[_0x2c2008(0xb0)](_0x2c2008(0xc0))[_0x2c2008(0x1a0)]({'coin':'BNB'})[_0x2c2008(0x1ac)](_0x585089)['write']();}}}}async function placeOrder(_0x79a570){const _0xe5ca96=_0x51b6e4,_0x6942f0=config[_0xe5ca96(0x13f)]==_0xe5ca96(0x1da)?'market':_0xe5ca96(0x135);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xe5ca96(0x14c)],allOrdersPlaced=![],validateOrdersState=_0xe5ca96(0x170);let _0x492f83=![];lastOrders=[];for(const _0x2dfc4a of _0x79a570){let _0x234896,_0x1048cd,_0x115a02,_0x1480bd,_0x3189fc,_0x3efba2=_0x2dfc4a[_0xe5ca96(0xf1)];try{const _0x1e3f3f=await exchange[_0xe5ca96(0xfc)](_0x3efba2);_0x234896=_0x2dfc4a[_0xe5ca96(0x1a5)]?0x1/_0x2dfc4a['last']:_0x2dfc4a[_0xe5ca96(0xc1)],_0x1048cd=_0x1e3f3f[_0xe5ca96(0x19e)],_0x115a02=_0x1e3f3f[_0xe5ca96(0xba)];_0x2dfc4a[_0xe5ca96(0x1a5)]?(_0x1480bd=_0x2dfc4a[_0xe5ca96(0xe9)]==_0xe5ca96(0x1f8)?_0xe5ca96(0x1fb):_0xe5ca96(0x1f8),_0x3189fc=Math[_0xe5ca96(0x9a)](_0x2dfc4a['trade'])/_0x234896):(_0x1480bd=_0x2dfc4a[_0xe5ca96(0xe9)],_0x3189fc=Math[_0xe5ca96(0x9a)](_0x2dfc4a['trade']));_0x6942f0==_0xe5ca96(0x135)&&(config[_0xe5ca96(0x13f)]==_0xe5ca96(0x20d)&&(_0x234896=_0x1480bd==_0xe5ca96(0x1f8)?_0x1048cd:_0x115a02),config[_0xe5ca96(0x13f)]=='limit-low'&&(_0x234896=_0x1480bd==_0xe5ca96(0x1f8)?_0x115a02:_0x1048cd));_0x3189fc=formatResult(_0x3189fc,0x8),_0x234896=formatResult(_0x234896,0x8);const _0xc8a306=_0x1480bd=='sell'?config[_0xe5ca96(0x1ca)]?String[_0xe5ca96(0x11a)]('0x'+config[_0xe5ca96(0x1ca)])+'\x20':'':config['emojibuy']?String[_0xe5ca96(0x11a)]('0x'+config[_0xe5ca96(0x96)])+'\x20':'',_0x4d7b59=_0x6942f0==_0xe5ca96(0x1da)?'Market':config[_0xe5ca96(0x13f)]==_0xe5ca96(0x20d)?_0xe5ca96(0x1ab):_0xe5ca96(0x1d1),_0x339d66=(Math[_0xe5ca96(0x206)](Math[_0xe5ca96(0x178)]()*0x35a4e900)+0x5f5e100)[_0xe5ca96(0x1b6)]();lastOrders[_0xe5ca96(0x18d)]({'customId':_0x339d66,'symbol':_0x3efba2,'coin':_0x2dfc4a[_0xe5ca96(0x121)],'amount':_0x3189fc,'price':_0x234896,'side':_0x1480bd,'reverse':_0x2dfc4a['reverse'],'filled':0x0});if(_0x6942f0==_0xe5ca96(0x1da))logHistory(_0xe5ca96(0x14f),''+_0xc8a306+_0x4d7b59+_0xe5ca96(0x18c)+_0x3efba2+'\x20'+_0x1480bd+'\x20#'+formatResult(_0x3189fc,0x8)+'\x20@'+formatResult(_0x234896,0x8));else logHistory(_0xe5ca96(0x14f),''+_0xc8a306+_0x4d7b59+'\x20order:\x20'+_0x3efba2+'\x20'+_0x1480bd+'\x20#'+formatResult(_0x3189fc,0x8)+'\x20@'+formatResult(_0x234896,0x8));let _0x3181cf;_0x6942f0==_0xe5ca96(0x1da)?_0x1480bd==_0xe5ca96(0x1f8)&&[_0xe5ca96(0x202),'Bitget','Cex',_0xe5ca96(0x143),_0xe5ca96(0xec)]['includes'](config[_0xe5ca96(0xff)])?_0x3181cf=await exchange['createOrder'](_0x3efba2,_0x6942f0,_0x1480bd,_0x3189fc,_0x234896):_0x3181cf=await exchange[_0xe5ca96(0x10c)](_0x3efba2,_0x6942f0,_0x1480bd,_0x3189fc,undefined):_0x3181cf=await exchange['createOrder'](_0x3efba2,_0x6942f0,_0x1480bd,_0x3189fc,_0x234896);logger[_0xe5ca96(0x1e5)](_0xe5ca96(0x1e3)+_0x3181cf['id']+_0xe5ca96(0x137)+_0x339d66);const _0x55c0f5=lastOrders[_0xe5ca96(0x175)]-0x1;if(_0x55c0f5>=0x0&&lastOrders[_0x55c0f5]['customId']==_0x339d66){lastOrders[_0x55c0f5][_0xe5ca96(0xe1)]=_0x3181cf['id'];if(_0x3181cf['amount'])lastOrders[_0x55c0f5][_0xe5ca96(0xdd)]=_0x3181cf[_0xe5ca96(0xdd)];if(_0x3181cf[_0xe5ca96(0x12d)])lastOrders[_0x55c0f5][_0xe5ca96(0x12d)]=_0x3181cf[_0xe5ca96(0x12d)];lastOrders[_0x55c0f5][_0xe5ca96(0x209)]=_0x3181cf[_0xe5ca96(0x209)];}if(config[_0xe5ca96(0xb5)]!=0x0){let _0x39822c=null;if(cooldownTracker['length']==config[_0xe5ca96(0xb5)]-0x1)_0x39822c=cooldownTracker[_0xe5ca96(0xea)]();const _0x586d4d=getTimeStamp();cooldownTracker[_0xe5ca96(0x18d)](_0x586d4d);if(_0x39822c){const _0x537d4c=fns['differenceInSeconds'](new Date(_0x586d4d),new Date(_0x39822c));if(_0x537d4c<cooldownInterval){logHistory('error',_0xe5ca96(0x19b)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xe5ca96(0x212)+cooldownPeriod/(0xe10*0x3e8)+_0xe5ca96(0x185)),coolingDown=!![];break;}}}}catch(_0x40feaf){if(_0x40feaf[_0xe5ca96(0x1b6)]()[_0xe5ca96(0xa2)](_0xe5ca96(0xb6)))lastOrders=lastOrders[_0xe5ca96(0x1b9)](_0x20432f=>_0x20432f[_0xe5ca96(0xf1)]!=_0x3efba2),logHistory('error',_0xe5ca96(0x201)+_0x3efba2),_0x492f83=!![];else{if(_0x40feaf[_0xe5ca96(0x1b6)]()[_0xe5ca96(0xa2)](_0xe5ca96(0x1d2)))lastOrders=lastOrders[_0xe5ca96(0x1b9)](_0x16c02f=>_0x16c02f[_0xe5ca96(0xf1)]!=_0x3efba2),logHistory(_0xe5ca96(0xc2),'Order\x20amount\x20is\x20invalid:\x20'+_0x3efba2),_0x492f83=!![];else{if(_0x40feaf[_0xe5ca96(0x1b6)]()[_0xe5ca96(0xa2)](_0xe5ca96(0x1e2)))lastOrders=lastOrders[_0xe5ca96(0x1b9)](_0x19555b=>_0x19555b[_0xe5ca96(0xf1)]!=_0x3efba2),logHistory('error',_0xe5ca96(0x1fc)+_0x3efba2),logger[_0xe5ca96(0x1e5)](_0x40feaf),_0x492f83=!![];else _0x40feaf[_0xe5ca96(0x1b6)]()[_0xe5ca96(0xa2)](_0xe5ca96(0x1aa))?(lastOrders=lastOrders[_0xe5ca96(0x1b9)](_0x450d8b=>_0x450d8b[_0xe5ca96(0xf1)]!=_0x3efba2),logHistory(_0xe5ca96(0xc2),_0xe5ca96(0x201)+_0x3efba2),_0x492f83=!![]):(lastOrders=lastOrders['filter'](_0xad5632=>_0xad5632[_0xe5ca96(0xf1)]!=_0x3efba2),await handleError(_0x40feaf,_0xe5ca96(0x123),_0x3efba2));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xe5ca96(0x175)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3b667a=config[_0xe5ca96(0x13f)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xe5ca96(0x141)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4f1595=_0xe5ca96;validateOrders(_0x4f1595(0x134));},_0x3b667a);}else unlockOrders();_0x492f83&&config[_0xe5ca96(0x114)]&&(logHistory(_0xe5ca96(0xc2),_0xe5ca96(0x1d6)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xe5ca96(0xd0),_0xe5ca96(0x173)));}else{if(coolingDown)!config[_0xe5ca96(0x114)]&&logHistory(_0xe5ca96(0xc2),_0xe5ca96(0xb9));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0xe5ca96(0x114)]&&(config[_0xe5ca96(0x13f)]==_0xe5ca96(0x1da)?logHistory('error',_0xe5ca96(0x180)):logHistory(_0xe5ca96(0xc2),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x42e780){const _0x1353a5=_0x51b6e4,_0x5f42d4={...config,'openOrders':_0x42e780};let _0x1eeac5=dbConfig[_0x1353a5(0xb0)](_0x1353a5(0x1f2))['find']({'botID':botID})[_0x1353a5(0x14e)]();_0x1eeac5&&dbConfig['get'](_0x1353a5(0x1f2))[_0x1353a5(0x1a0)]({'botID':botID})[_0x1353a5(0x1ac)](_0x5f42d4)[_0x1353a5(0x104)]();}function restoreOrders(){const _0xc4338b=_0x51b6e4;let _0x275915;config['openOrders']&&allOpenOrders[_0xc4338b(0x1fd)](_0x2117a9=>{const _0x153c88=_0xc4338b,_0x3a670e=config[_0x153c88(0xd1)][_0x153c88(0x1a0)](_0x46e9ef=>_0x46e9ef['orderId']==_0x2117a9['id']);_0x3a670e&&(lastOrders[_0x153c88(0x18d)](_0x3a670e),_0x275915=_0x2117a9[_0x153c88(0x1e7)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0xc4338b(0x14c)],validateOrdersState=_0xc4338b(0xf4),allOrdersPlaced=!![];const _0x4ceee2=new Date()[_0xc4338b(0x1ae)](),_0x185e9f=config[_0xc4338b(0x13f)]==_0xc4338b(0x1da)?validateOrderTimeout*0x3c*0x3e8:config[_0xc4338b(0x141)]*0x3c*0x3e8;if(_0x275915+_0x185e9f>_0x4ceee2){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x352c8d=_0xc4338b;validateOrders(_0x352c8d(0x134));},_0x275915+_0x185e9f-_0x4ceee2);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x6e4c0b=_0x51b6e4;if(!coinsLoaded){process[_0x6e4c0b(0xe2)]({'telegrammsg':_0x6e4c0b(0x1db)},_0x27e190=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x322375='';if(config[_0x6e4c0b(0x1d7)])_0x322375='<b>'+config[_0x6e4c0b(0x1ec)]+_0x6e4c0b(0x157);else _0x322375=_0x6e4c0b(0x144)+botID+_0x6e4c0b(0x157);const _0x49015d=getKPIs(_0x6e4c0b(0x1ce)),_0x4ecd89=getKPIs(_0x6e4c0b(0xf7),config[_0x6e4c0b(0xf7)]),_0x193ba2=getKPIs(_0x6e4c0b(0x1e1)),_0x19178e=getKPIs(_0x6e4c0b(0xe5),config[_0x6e4c0b(0xf7)]);_0x322375+=_0x6e4c0b(0xe3),_0x322375+=_0x49015d['leftTxt']+_0x6e4c0b(0x167)+_0x49015d[_0x6e4c0b(0x14e)]+'\x0a',_0x322375+=_0x49015d[_0x6e4c0b(0xc3)]+':\x20'+_0x49015d['change']+'%\x0a',_0x322375+=_0x4ecd89['leftTxt']+_0x6e4c0b(0x167)+_0x4ecd89[_0x6e4c0b(0x14e)]+'\x0a',_0x322375+=_0x4ecd89['rightTxt']+':\x20'+_0x4ecd89[_0x6e4c0b(0xf5)]+'%\x0a',_0x322375+=_0x193ba2[_0x6e4c0b(0x1e6)]+':\x20'+_0x193ba2[_0x6e4c0b(0x14e)]+'\x20('+config['basecoin']+')\x0a',_0x322375+=_0x193ba2[_0x6e4c0b(0xc3)]+':\x20'+_0x193ba2[_0x6e4c0b(0xf5)]+_0x6e4c0b(0x154)+config[_0x6e4c0b(0x1ce)]+')\x0a',_0x322375+=_0x19178e[_0x6e4c0b(0x1e6)]+':\x20'+_0x19178e['value']+'\x20('+config['fiat']+')\x0a',_0x322375+=_0x19178e['rightTxt']+':\x20'+_0x19178e[_0x6e4c0b(0xf5)]+_0x6e4c0b(0x154)+config['fiat']+')\x0a',_0x322375+=_0x6e4c0b(0x172),process['send']({'telegrammsg':_0x322375},_0x13a4f1=>{});}async function sendPortfolioTelegram(){const _0x148899=_0x51b6e4;if(!coinsLoaded){process[_0x148899(0xe2)]({'telegrammsg':_0x148899(0x1db)},_0x5062fa=>{});return;}let _0x37cb0c='';if(config[_0x148899(0x1d7)])_0x37cb0c=_0x148899(0x195)+config[_0x148899(0x1ec)]+_0x148899(0x1c5);else _0x37cb0c=_0x148899(0x144)+botID+_0x148899(0x1c5);_0x37cb0c+=_0x148899(0xe3),_0x37cb0c+=_0x148899(0xfa),_0x37cb0c+=_0x148899(0x208),_0x37cb0c+='-------------------------------\x0a',currentCoins[_0x148899(0x1fd)](_0x219723=>{const _0x4e9ffb=_0x148899;_0x37cb0c+=_0x219723['coin'][_0x4e9ffb(0x14b)](0x7)+'|\x20'+formatPad(_0x219723[_0x4e9ffb(0x1a3)],0x2,0x6)+'|\x20'+formatPad(_0x219723[_0x4e9ffb(0x13c)],0x2,0x6)+'|\x20'+formatPad(_0x219723[_0x4e9ffb(0x1fe)]*0x64,0x2,0x6)+'\x0a';}),_0x37cb0c+=_0x148899(0x172),process[_0x148899(0xe2)]({'telegrammsg':_0x37cb0c},_0x147916=>{});}function formatPad(_0x2e4165,_0x4c78f3,_0x5cf7aa){const _0x290a25=_0x51b6e4,_0x209050=formatResultString(_0x2e4165,_0x4c78f3);return _0x209050?_0x209050[_0x290a25(0x176)](_0x5cf7aa):''[_0x290a25(0x176)](_0x5cf7aa);}function logHistory(_0x117564,_0x2a6d36,_0x5e9292=''){const _0x22e528=_0x51b6e4;logger[_0x22e528(0x1e9)](''+_0x2a6d36);let _0x3cb59e={'time':getTimeStamp(),'type':_0x117564,'event':_0x2a6d36};dbLogs['get'](_0x22e528(0x1a7))['push'](_0x3cb59e)[_0x22e528(0x104)]();if(_0x5e9292=='')_0x5e9292=_0x2a6d36;proxyEmit('event',{'log':_0x3cb59e,'summary':_0x5e9292}),process[_0x22e528(0xe2)]({'telegram':{..._0x3cb59e,'botname':config[_0x22e528(0x1ec)],'showname':config['showname']}},_0x3e4de5=>{});}function emitHistory(_0x526aeb={}){const _0x302a66=_0x51b6e4;Object[_0x302a66(0x115)](_0x526aeb)[_0x302a66(0x175)]==0x0&&(_0x526aeb={'type':[_0x302a66(0x14f),_0x302a66(0xbb)],'event':'','page':0x1});if(_0x526aeb[_0x302a66(0xb1)]['includes']('event'))_0x526aeb[_0x302a66(0xb1)][_0x302a66(0x182)](_0x526aeb[_0x302a66(0xb1)][_0x302a66(0x1e0)](_0x302a66(0xbb)),0x1,_0x302a66(0xc2),'warning',_0x302a66(0xd0));if(dbLogs[_0x302a66(0x103)](_0x302a66(0x1a7))['value']()){let _0x42ab2d=dbLogs[_0x302a66(0xb0)]('logs')[_0x302a66(0x1b9)](_0x3a7cf5=>{const _0x60112=_0x302a66;if(_0x526aeb[_0x60112(0xb1)]['length']==0x0)return![];else return _0x526aeb[_0x60112(0xb1)][_0x60112(0xa2)](_0x3a7cf5[_0x60112(0xb1)]);})[_0x302a66(0x1b9)](_0x47e10c=>{const _0x248673=_0x302a66;if(_0x526aeb[_0x248673(0xbb)]=='')return!![];else return _0x47e10c[_0x248673(0xbb)][_0x248673(0xf2)]()[_0x248673(0xa2)](_0x526aeb[_0x248673(0xbb)][_0x248673(0xf2)]());})[_0x302a66(0x1c9)](_0x302a66(0x211)),_0x100027=_0x42ab2d[_0x302a66(0x14e)]()['length'];_0x42ab2d=_0x42ab2d[_0x302a66(0x1a5)]()[_0x302a66(0x197)]((_0x526aeb[_0x302a66(0xbc)]-0x1)*logPageSize,_0x526aeb[_0x302a66(0xbc)]*logPageSize-0x1)[_0x302a66(0x1a5)]()[_0x302a66(0x14e)](),proxyEmit(_0x302a66(0x16d),{'logs':_0x42ab2d,'total':_0x100027});}else proxyEmit(_0x302a66(0x16d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5b7fd3){const _0x31513d=_0x51b6e4;if(dbLogs['has'](_0x31513d(0x1a7))[_0x31513d(0x14e)]()){const _0x2c7b88=dbLogs['get'](_0x31513d(0x1a7))['sortBy'](_0x31513d(0x211))[_0x31513d(0x1b9)](_0x512f06=>{const _0x4c943f=_0x31513d;return _0x512f06[_0x4c943f(0xb1)]==_0x4c943f(0x14f);})[_0x31513d(0x14e)]();dbLogs[_0x31513d(0xb0)]('logs')[_0x31513d(0x100)]()[_0x31513d(0x104)](),dbLogs[_0x31513d(0xb0)]('logs')['assign'](_0x2c7b88)['write'](),emitHistory(_0x5b7fd3);}}async function pauseBot(){const _0x3af0e6=_0x51b6e4,_0x379b31=new Date()[_0x3af0e6(0x1ae)]();if(!lastErrorShown||_0x379b31-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x379b31;!lastBotPause?(lastBotPause=_0x379b31,consecutivePauses=0x1):(_0x379b31-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3af0e6(0xe2)]({'stop':_0x3af0e6(0x1e4)},_0x11f55f=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3af0e6(0x1ae)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x2943b2=_0x51b6e4;botPaused=!![],await sleep(0x3e8),process[_0x2943b2(0xe2)]({'stop':_0x2943b2(0x168)},_0x43bfe2=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x17d6fe,_0x29e22f){const _0x5d101c=_0x51b6e4;if(botPaused)return;const _0x29ae49=config[_0x5d101c(0xff)]||_0x5d101c(0xa4);if(_0x29e22f)logger['debug'](_0x5d101c(0x1f4)+_0x29e22f);if(_0x17d6fe[_0x5d101c(0x1b6)]()[_0x5d101c(0xa2)]('API-key\x20format\x20invalid'))logHistory(_0x5d101c(0xc2),_0x29ae49+_0x5d101c(0x1c6));else{if(_0x17d6fe[_0x5d101c(0x1b6)]()[_0x5d101c(0xa2)](_0x5d101c(0x9b)))logHistory(_0x5d101c(0xc2),_0x29ae49+_0x5d101c(0x179));else _0x17d6fe[_0x5d101c(0x1b6)]()[_0x5d101c(0xa2)](_0x5d101c(0x17d))?(logHistory(_0x5d101c(0xc2),_0x29ae49+_0x5d101c(0x15b)),logHistory(_0x5d101c(0xc2),_0x5d101c(0x17a))):await handleError(_0x17d6fe,null);}}async function handleError(_0x57ed12,_0x9bf5d3,_0x396901=''){const _0x39b3b4=_0x51b6e4;if(botPaused)return;const _0x95cb64=config[_0x39b3b4(0xff)]||_0x39b3b4(0xa4);if(_0x9bf5d3)logger['debug'](_0x39b3b4(0x1f4)+_0x9bf5d3);if(_0x57ed12[_0x39b3b4(0x1b6)]()[_0x39b3b4(0xa2)](_0x39b3b4(0xcb))||_0x57ed12[_0x39b3b4(0x1b6)]()[_0x39b3b4(0xa2)](_0x39b3b4(0xab)))logHistory(_0x39b3b4(0xc2),_0x95cb64+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x57ed12[_0x39b3b4(0x1b6)]()[_0x39b3b4(0xa2)](_0x39b3b4(0x1f5))||_0x57ed12['toString']()[_0x39b3b4(0xa2)](_0x39b3b4(0xc5)))logHistory(_0x39b3b4(0xc2),_0x95cb64+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x57ed12['toString']()[_0x39b3b4(0xa2)](_0x39b3b4(0x1dd)))logHistory('error',_0x95cb64+_0x39b3b4(0x1b8)+pauseBotMsg),await pauseBot();else{if(_0x57ed12['toString']()[_0x39b3b4(0xa2)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x39b3b4(0xc2),_0x95cb64+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0x57ed12['toString']()[_0x39b3b4(0xa2)](_0x39b3b4(0x1cb)))logHistory(_0x39b3b4(0xc2),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x39b3b4(0xc2),_0x39b3b4(0x203)),await killBot();else{if(_0x57ed12[_0x39b3b4(0x1b6)]()[_0x39b3b4(0xa2)]('InvalidNonce'))logHistory(_0x39b3b4(0xc2),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x39b3b4(0xc2),_0x39b3b4(0x203)),await killBot();else{if(_0x57ed12 instanceof ccxt[_0x39b3b4(0x17f)])logHistory('error',_0x95cb64+_0x39b3b4(0x15f)+pauseBotMsg),logger[_0x39b3b4(0x1e5)](_0x39b3b4(0x20f),_0x57ed12),await pauseBot();else{if(_0x57ed12['toString']()['includes']('API-key\x20format\x20invalid'))logHistory('error',_0x95cb64+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x39b3b4(0xc2),_0x39b3b4(0x203)),await killBot();else{if(_0x57ed12['toString']()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x39b3b4(0xc2),_0x95cb64+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x39b3b4(0xc2),_0x39b3b4(0x203)),await killBot();else{if(_0x57ed12[_0x39b3b4(0x1b6)]()[_0x39b3b4(0xa2)](_0x39b3b4(0x17d)))logHistory(_0x39b3b4(0xc2),_0x95cb64+_0x39b3b4(0x1c1)),logHistory(_0x39b3b4(0xc2),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x57ed12['toString']()['includes'](_0x39b3b4(0xd9)))logHistory('error',_0x39b3b4(0x140)+_0x396901);else _0x57ed12 instanceof ccxt[_0x39b3b4(0x1d0)]?(logHistory(_0x39b3b4(0xc2),_0x95cb64+'\x20exchange\x20error'),logger[_0x39b3b4(0x1e5)]('Error\x20details:',_0x57ed12)):(logHistory(_0x39b3b4(0xc2),_0x39b3b4(0x210)+pauseBotMsg),logger[_0x39b3b4(0x1e5)](_0x39b3b4(0x20f),_0x57ed12),await pauseBot());}}}}}}}}}}}function formatResult(_0x547b09,_0x16ffb6){return parseFloat(_0x547b09['toFixed'](_0x16ffb6));}function formatResultTruncate(_0x47a83a,_0xf75250){const _0x1c393b=_0x51b6e4;let _0x3cf4ad=formatResultString(_0x47a83a,0xa),_0x2e7ae7=_0x3cf4ad[_0x1c393b(0x1e0)]('.');return _0x2e7ae7!=-0x1&&(_0x3cf4ad=_0x3cf4ad[_0x1c393b(0x197)](0x0,_0x2e7ae7+_0xf75250+0x1)),Number(_0x3cf4ad);}function formatResultString(_0x23fd77,_0x2d5b26){const _0x543c5a=_0x51b6e4;let _0x308d1b;if(!(''+_0x23fd77)['includes']('e'))_0x308d1b=+(Math[_0x543c5a(0x1a8)](_0x23fd77+'e+'+_0x2d5b26)+'e-'+_0x2d5b26);else{let _0x46cef0=(''+_0x23fd77)[_0x543c5a(0x107)]('e'),_0x5afb5c='';+_0x46cef0[0x1]+_0x2d5b26>0x0&&(_0x5afb5c='+'),_0x308d1b=+(Math[_0x543c5a(0x1a8)](+_0x46cef0[0x0]+'e'+_0x5afb5c+(+_0x46cef0[0x1]+_0x2d5b26))+'e-'+_0x2d5b26);}return Number(_0x308d1b)[_0x543c5a(0x136)](_0x2d5b26);}function getServerTime(){const _0x472434=_0x51b6e4,_0x32f1bb=new Date();return _0x32f1bb[_0x472434(0x116)]()+'/'+(_0x32f1bb[_0x472434(0x20c)]()+0x1)[_0x472434(0x1b6)]()[_0x472434(0x176)](0x2,'0')+'/'+_0x32f1bb[_0x472434(0x10d)]()[_0x472434(0x1b6)]()[_0x472434(0x176)](0x2,'0')+'\x20'+_0x32f1bb['getHours']()[_0x472434(0x1b6)]()[_0x472434(0x176)](0x2,'0')+':'+_0x32f1bb[_0x472434(0x174)]()[_0x472434(0x1b6)]()[_0x472434(0x176)](0x2,'0')+':'+_0x32f1bb[_0x472434(0x145)]()['toString']()[_0x472434(0x176)](0x2,'0');}function getTimeStamp(){const _0x1fb8e1=_0x51b6e4,_0x53d7b9=shiftedTime();return _0x53d7b9[_0x1fb8e1(0x116)]()+'/'+(_0x53d7b9['getMonth']()+0x1)[_0x1fb8e1(0x1b6)]()[_0x1fb8e1(0x176)](0x2,'0')+'/'+_0x53d7b9[_0x1fb8e1(0x10d)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x53d7b9['getHours']()[_0x1fb8e1(0x1b6)]()[_0x1fb8e1(0x176)](0x2,'0')+':'+_0x53d7b9[_0x1fb8e1(0x174)]()['toString']()[_0x1fb8e1(0x176)](0x2,'0')+':'+_0x53d7b9[_0x1fb8e1(0x145)]()[_0x1fb8e1(0x1b6)]()[_0x1fb8e1(0x176)](0x2,'0');}function getDate(){const _0x176362=_0x51b6e4,_0x17bfc6=shiftedTime();return _0x17bfc6[_0x176362(0x116)]()+'/'+(_0x17bfc6[_0x176362(0x20c)]()+0x1)[_0x176362(0x1b6)]()[_0x176362(0x176)](0x2,'0')+'/'+_0x17bfc6['getDate']()[_0x176362(0x1b6)]()[_0x176362(0x176)](0x2,'0');}function getHour(){const _0x40f19c=_0x51b6e4,_0x2a655e=shiftedTime();return _0x2a655e[_0x40f19c(0x9c)]()[_0x40f19c(0x1b6)]()[_0x40f19c(0x176)](0x2,'0');}function sleep(_0x4d9537){return new Promise(_0x4625de=>setTimeout(_0x4625de,_0x4d9537));}function shiftedTime(){const _0x8fd79b=_0x51b6e4,_0x19ac6d=new Date();let _0x156307=_0x19ac6d;if(config&&config[_0x8fd79b(0xca)]!==0x0)_0x156307=fns[_0x8fd79b(0x9e)](_0x19ac6d,{'hours':config[_0x8fd79b(0xca)]});return _0x156307;}function timer(_0x11b36a){const _0x5afbeb=_0x51b6e4,_0x50b0f8=new Date();!lasttime?console[_0x5afbeb(0x152)](getTimeStamp()+_0x5afbeb(0x129),_0x11b36a,_0x50b0f8):console[_0x5afbeb(0x152)](getTimeStamp()+_0x5afbeb(0x129),_0x11b36a,(_0x50b0f8-lasttime)/0x3e8),lasttime=_0x50b0f8;}