const _0x50ddff=_0x14b2;(function(_0xcbca96,_0x599a6e){const _0x1bc7db=_0x14b2,_0x2dae5a=_0xcbca96();while(!![]){try{const _0x3c0a8a=-parseInt(_0x1bc7db(0x252))/0x1+-parseInt(_0x1bc7db(0x253))/0x2*(-parseInt(_0x1bc7db(0x289))/0x3)+parseInt(_0x1bc7db(0x2df))/0x4*(-parseInt(_0x1bc7db(0x317))/0x5)+parseInt(_0x1bc7db(0x32e))/0x6*(parseInt(_0x1bc7db(0x235))/0x7)+parseInt(_0x1bc7db(0x34a))/0x8+parseInt(_0x1bc7db(0x28f))/0x9*(parseInt(_0x1bc7db(0x311))/0xa)+-parseInt(_0x1bc7db(0x218))/0xb;if(_0x3c0a8a===_0x599a6e)break;else _0x2dae5a['push'](_0x2dae5a['shift']());}catch(_0x3783c6){_0x2dae5a['push'](_0x2dae5a['shift']());}}}(_0x494d,0x98dd8));const _0x178d0c=function(){let _0x3b4c66=!![];return function(_0xa32d93,_0x2b34a3){const _0x2eb7f0=_0x3b4c66?function(){if(_0x2b34a3){const _0x3d324f=_0x2b34a3['apply'](_0xa32d93,arguments);return _0x2b34a3=null,_0x3d324f;}}:function(){};return _0x3b4c66=![],_0x2eb7f0;};}(),_0x6a7ae8=_0x178d0c(this,function(){const _0x3bc58b=_0x14b2;return _0x6a7ae8[_0x3bc58b(0x30b)]()[_0x3bc58b(0x1ee)]('(((.+)+)+)+$')[_0x3bc58b(0x30b)]()['constructor'](_0x6a7ae8)[_0x3bc58b(0x1ee)]('(((.+)+)+)+$');});_0x6a7ae8();'use strict';const ccxt=require(_0x50ddff(0x2d5)),low=require(_0x50ddff(0x221)),FileSync=require(_0x50ddff(0x272)),fs=require('fs'),fns=require(_0x50ddff(0x26d)),Crypt=require(_0x50ddff(0x294))['Crypt'],util=require(_0x50ddff(0x295)),argv=require('yargs/yargs')(process[_0x50ddff(0x331)][_0x50ddff(0x35c)](0x2))[_0x50ddff(0x331)],path=require('path');let exchange;global['ticker']={},global[_0x50ddff(0x316)]={};const usdBasecoins=[_0x50ddff(0x22b),_0x50ddff(0x2bc),_0x50ddff(0x206),_0x50ddff(0x35a),_0x50ddff(0x2e6),_0x50ddff(0x291)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x50ddff(0x1e3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x50ddff(0x1d3)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x50ddff(0x1fa)+pauseBotInterval/0xea60+_0x50ddff(0x2e7),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x50ddff(0x233)],botID=process['argv'][0x2]||_0x50ddff(0x357),pattern=/^[0-9]{3}$/;!pattern[_0x50ddff(0x273)](botID)&&(console[_0x50ddff(0x308)](_0x50ddff(0x2ce)+botID+_0x50ddff(0x2be)),killBot());const userID=process[_0x50ddff(0x331)][0x3]||'',configpath=userID?_0x50ddff(0x35d)+userID+'/':_0x50ddff(0x35d),logspath=userID?_0x50ddff(0x2c8)+userID+'/':_0x50ddff(0x2c8),loggerfile=fs[_0x50ddff(0x229)](logspath+_0x50ddff(0x345),{'flags':'a'});!fs[_0x50ddff(0x2e3)](configpath)&&fs['mkdirSync'](configpath);function _0x14b2(_0x42eab0,_0xee2378){const _0x3bbf44=_0x494d();return _0x14b2=function(_0x6a7ae8,_0x178d0c){_0x6a7ae8=_0x6a7ae8-0x1c5;let _0x494d45=_0x3bbf44[_0x6a7ae8];return _0x494d45;},_0x14b2(_0x42eab0,_0xee2378);}!fs[_0x50ddff(0x2e3)](logspath)&&fs[_0x50ddff(0x2c5)](logspath);const configfile=configpath+_0x50ddff(0x1ff)+botID+_0x50ddff(0x1ca),logfile=configpath+_0x50ddff(0x1ff)+botID+_0x50ddff(0x2ea),performancefile=configpath+'bot-'+botID+_0x50ddff(0x2d0),coinresultsfile=configpath+_0x50ddff(0x1ff)+botID+_0x50ddff(0x27e),settingsfile=configpath+_0x50ddff(0x241),securefile=configpath+_0x50ddff(0x1ef),configbackuppath=configpath+_0x50ddff(0x344),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x50ddff(0x36e)]({'logs':[],'version':serverversion})[_0x50ddff(0x2a8)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x50ddff(0x36e)]({'data':[],'version':serverversion})[_0x50ddff(0x2a8)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x50ddff(0x36e)]({'bot':[],'version':serverversion})[_0x50ddff(0x2a8)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x50ddff(0x36e)]({'coins':[],'version':serverversion})[_0x50ddff(0x2a8)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x50ddff(0x2ef),'rsaStandard':_0x50ddff(0x358)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xb3af9e=>{const _0x1f27ad=_0x50ddff;console[_0x1f27ad(0x308)](_0xb3af9e);},'simple':_0x513ddd=>{const _0x44ccf1=_0x50ddff;console[_0x44ccf1(0x308)](_0x513ddd),loggerfile['write'](util['format'](_0x513ddd)+'\x0a');},'full':async(_0x1409a9,_0x410671='')=>{const _0x42d643=_0x50ddff;let _0x4d3ec8;if(config['showname'])_0x4d3ec8=getTimeStamp()+':\x20'+config['botname']+_0x42d643(0x248)+_0x1409a9;else _0x4d3ec8=getTimeStamp()+_0x42d643(0x23d)+botID+_0x42d643(0x248)+_0x1409a9;console[_0x42d643(0x308)](_0x4d3ec8),loggerfile['write'](util['format'](_0x4d3ec8)+'\x0a'),_0x410671&&(console[_0x42d643(0x308)](_0x410671),loggerfile[_0x42d643(0x2a8)](util['format'](_0x410671)+'\x0a'));},'debug':async(_0x3dadda,_0xd99c1b='')=>{const _0x551ca9=_0x50ddff;let _0x4c3db1;if(config[_0x551ca9(0x346)])_0x4c3db1=getTimeStamp()+':\x20'+config[_0x551ca9(0x2e2)]+'\x20>\x20[DEBUG]\x20'+_0x3dadda;else _0x4c3db1=getTimeStamp()+_0x551ca9(0x23d)+botID+_0x551ca9(0x34f)+_0x3dadda;if(debugging)console['log'](_0x4c3db1);loggerfile[_0x551ca9(0x2a8)](util['format'](_0x4c3db1)+'\x0a');if(_0xd99c1b){if(debugging)console[_0x551ca9(0x308)](_0xd99c1b);loggerfile[_0x551ca9(0x2a8)](util[_0x551ca9(0x24a)](_0xd99c1b)+'\x0a');}}};process['on'](_0x50ddff(0x2f0),function(_0x351b8a){const _0x4f730a=_0x50ddff;handleError(_0x351b8a,_0x4f730a(0x2f0));});settings[_0x50ddff(0x2a3)]!=config[_0x50ddff(0x2a3)]&&updateTimeshift(settings[_0x50ddff(0x2a3)]);settings[_0x50ddff(0x32d)]!=config['onepagemode']&&updateOnepagemode(settings[_0x50ddff(0x32d)]);process[_0x50ddff(0x2de)]({'started':'running'},_0x5d03d1=>{}),initializeProcessListeners();function proxyEmit(_0x46893d,_0x201471=null){const _0x2b679e=_0x50ddff;process[_0x2b679e(0x2de)]({'function':_0x46893d,'args':_0x201471},_0xe8cfda=>{});}function initializeProcessListeners(){const _0xde8f72=_0x50ddff;process['on'](_0xde8f72(0x2e0),_0x133ce9=>{const _0x3e49ca=_0xde8f72;switch(Object['keys'](_0x133ce9)[0x0]){case'timeshift':_0x133ce9['timeshift']!=undefined&&(settings[_0x3e49ca(0x2a3)]=_0x133ce9[_0x3e49ca(0x2a3)],updateTimeshift(settings[_0x3e49ca(0x2a3)]));break;case _0x3e49ca(0x32d):_0x133ce9[_0x3e49ca(0x32d)]!=undefined&&(settings[_0x3e49ca(0x32d)]=_0x133ce9[_0x3e49ca(0x32d)],updateOnepagemode(settings[_0x3e49ca(0x32d)]));break;case _0x3e49ca(0x2c6):_0x133ce9[_0x3e49ca(0x2c6)]!=undefined&&(bots=JSON[_0x3e49ca(0x1d4)](_0x133ce9[_0x3e49ca(0x2c6)]),proxyEmit('bots',bots));break;case _0x3e49ca(0x2da):switch(_0x133ce9[_0x3e49ca(0x2da)]){case'initclient':initclient();break;case _0x3e49ca(0x226):toggleBotMode();break;case'emitHistory':emitHistory(_0x133ce9['args']);break;case _0x3e49ca(0x2dd):deleteHistoryAlerts(_0x133ce9[_0x3e49ca(0x370)]);break;case _0x3e49ca(0x1d7):getPortfolio(_0x133ce9['args']);break;case _0x3e49ca(0x371):storeConfiguration(_0x133ce9[_0x3e49ca(0x370)]);break;case _0x3e49ca(0x2b1):storeHeadless(_0x133ce9[_0x3e49ca(0x370)]);break;case _0x3e49ca(0x369):storeFiat(_0x133ce9[_0x3e49ca(0x370)]);break;case _0x3e49ca(0x20a):resetHistory();break;case _0x3e49ca(0x366):getStartingBalances(getNormalizedPerformance());break;case _0x3e49ca(0x20d):placeOrder(_0x133ce9['args']);break;case _0x3e49ca(0x276):cancelLoading();break;case'showConfig':showConfig();break;case _0x3e49ca(0x2bb):sendMetricsTelegram();break;case _0x3e49ca(0x281):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x294c9f=![]){const _0x3f6ac6=_0x50ddff;logger['debug'](_0x3f6ac6(0x30e)+(_0x294c9f?_0x3f6ac6(0x2dc):_0x3f6ac6(0x28c))+_0x3f6ac6(0x1cf)+config[_0x3f6ac6(0x301)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x294c9f)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3f6ac6(0x33c)]!=''&&config[_0x3f6ac6(0x33c)]!=_0x3f6ac6(0x359)){loadingProgress=0x0;if(_0x294c9f){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x398a60){handleErrorNoStop(_0x398a60,_0x3f6ac6(0x36c));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1bcec2=await getCoins();[currentCoins,currentCoinsAll]=_0x1bcec2,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x3f6ac6(0x239)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4d7315=_0x50ddff;exchangeStopped=!![];try{await exchange[_0x4d7315(0x249)]();}catch(_0x54c39a){await handleError(_0x54c39a,'stopExchange()');}}async function reloadExchange(){const _0x568c2d=_0x50ddff;while(lockOrders!=ORDERS[_0x568c2d(0x1d3)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x568c2d(0x2f2)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x2596ca=config['exchange'],_0x239d27=config[_0x50ddff(0x33c)],_0x586e07=config[_0x50ddff(0x329)],_0x281edf=config[_0x50ddff(0x330)]){const _0x9d4532=_0x50ddff;exchange&&await stopExchange();!supportedExchanges()[_0x9d4532(0x2ae)](_0x2596ca)&&(logHistory(_0x9d4532(0x1fc),_0x9d4532(0x219)+_0x2596ca+_0x9d4532(0x354)),killBot());const _0x388a05=ccxt[_0x9d4532(0x2bf)][_0x2596ca[_0x9d4532(0x34c)]()];exchange=new _0x388a05({'apiKey':_0x239d27,'secret':_0x586e07,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x9d4532(0x1d8)}});if(_0x281edf)exchange[_0x9d4532(0x2f3)]=_0x281edf;}function setStableCoins(){const _0x295f78=_0x50ddff;let _0x3dabf6=config['basecoin']==_0x295f78(0x35b)?_0x295f78(0x35b):config['basecoin']==_0x295f78(0x26e)?_0x295f78(0x26e):'BTC',_0x18fc2a=!allSymbols[_0x295f78(0x2ae)](_0x3dabf6+_0x295f78(0x25b))?_0x295f78(0x35a):'USD',_0xf366c9=!allSymbols[_0x295f78(0x2ae)](_0x3dabf6+'/EUR')?_0x18fc2a:_0x295f78(0x1dd);stablecoins={'eur':{'coin':''+_0x3dabf6+_0xf366c9,'symbol':_0x3dabf6+'/'+_0xf366c9},'usd':{'coin':''+_0x3dabf6+_0x18fc2a,'symbol':_0x3dabf6+'/'+_0x18fc2a}};}async function initwsCcxt(){const _0xf305a0=_0x50ddff;initCycle++;const _0x4665a0=initCycle;let _0xadab=[];config['portfolio'][_0xf305a0(0x24b)](_0xf9aeff=>{const _0xcc3ca=_0xf305a0;if(!_0xf9aeff[_0xcc3ca(0x1f4)]&&_0xf9aeff['coin']!=config[_0xcc3ca(0x265)])_0xadab[_0xcc3ca(0x1f2)](_0xf9aeff[_0xcc3ca(0x332)]);});if(!_0xadab[_0xf305a0(0x2ae)](stablecoins[_0xf305a0(0x2bd)][_0xf305a0(0x332)]))_0xadab[_0xf305a0(0x1f2)](stablecoins[_0xf305a0(0x2bd)][_0xf305a0(0x332)]);if(!_0xadab[_0xf305a0(0x2ae)](stablecoins['usd'][_0xf305a0(0x332)]))_0xadab[_0xf305a0(0x1f2)](stablecoins[_0xf305a0(0x34e)][_0xf305a0(0x332)]);if(config['exchange'][_0xf305a0(0x262)](_0xf305a0(0x2d7))&&config['basecoin']!='PAXG'){if(!_0xadab['includes'](_0xf305a0(0x30a)+config[_0xf305a0(0x265)]))_0xadab['push'](_0xf305a0(0x30a)+config[_0xf305a0(0x265)]);}loadCoins(_0xadab),_0xadab=validateSymbols(_0xadab);const _0x51cf9c=async _0x4505b2=>{const _0xb2aa0f=_0xf305a0;let _0x4ed541;try{const _0x4a78bf=await getTickers(_0x4505b2);Object[_0xb2aa0f(0x250)](_0x4a78bf)['forEach'](_0x2c0953=>{const _0x5497d4=_0xb2aa0f;_0x4ed541=_0x2c0953[0x1][_0x5497d4(0x332)],global['ticker'][noslash(_0x4ed541)]=_0x2c0953[0x1][_0x5497d4(0x36b)],global['change'][_0x4ed541]=_0x2c0953[0x1]['percentage'];});}catch(_0x309a13){await handleError(_0x309a13,_0xb2aa0f(0x1c8),_0x4ed541);}},_0x4c7259=async _0x52b621=>{const _0x1fe366=_0xf305a0;while(initCycle==_0x4665a0){if(!botPaused)try{const _0x235473=await exchange['watchTrades'](_0x52b621);global[_0x1fe366(0x2cf)][noslash(_0x235473[0x0][_0x1fe366(0x332)])]=_0x235473[0x0]['price'],await sleep(0x3e8);}catch(_0x31d523){if(!exchangeStopped)await handleError(_0x31d523,'watchTrades()',_0x52b621);}else await sleep(0x64);}},_0x4c5de2=async _0x33b274=>{const _0x2a9ce2=_0xf305a0;while(initCycle==_0x4665a0){if(!botPaused){let _0x317a41;try{await sleep(0x3c*0x3e8);const _0x139e07=await getTickers(_0x33b274);Object[_0x2a9ce2(0x250)](_0x139e07)[_0x2a9ce2(0x24b)](_0x134869=>{const _0x3995d0=_0x2a9ce2;_0x317a41=_0x134869[0x1][_0x3995d0(0x332)],global[_0x3995d0(0x316)][_0x317a41]=_0x134869[0x1][_0x3995d0(0x1eb)];});}catch(_0x904322){if(!exchangeStopped)await handleError(_0x904322,_0x2a9ce2(0x322),_0x317a41);}}else await sleep(0x64);}},_0x2e2e6f=async _0x1e5b50=>{const _0x330131=_0xf305a0;while(initCycle==_0x4665a0){if(!botPaused)try{const _0x445189=await exchange[_0x330131(0x348)](_0x1e5b50);initCycle==_0x4665a0&&_0x445189[_0x330131(0x24b)](_0x251cd1=>{updateNumberCoinsCcxt(_0x251cd1);});}catch(_0x1ec2a7){if(!exchangeStopped)await handleError(_0x1ec2a7,_0x330131(0x33f));}else await sleep(0x64);}};_0x51cf9c(_0xadab),_0x4c5de2(_0xadab),_0xadab[_0xf305a0(0x24b)](_0x776782=>{_0x4c7259(_0x776782),_0x2e2e6f(_0x776782);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xccfc5c){const _0x316af4=_0x50ddff;let _0x46965a={};try{if(config[_0x316af4(0x301)]!='Cryptocom')_0x46965a=await exchange['fetchTickers'](_0xccfc5c);else for(const _0x128502 of _0xccfc5c){const _0x1c7497=await exchange[_0x316af4(0x1c9)](_0x128502);_0x46965a[_0x128502]=_0x1c7497;}return _0x46965a;}catch(_0x21dc8c){throw _0x21dc8c;}}async function watchTransactions(){const _0x482f17=_0x50ddff;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x49cd5c=await getCoins(),[_0x4089d7,_0x4f485d]=_0x49cd5c;let _0x2b3e6d=[];currentCoins['forEach'](_0x2d5e9d=>{const _0x15ebee=_0x14b2,_0x3f3042=_0x4089d7[_0x15ebee(0x25e)](_0x5d8662=>_0x5d8662[_0x15ebee(0x35e)]==_0x2d5e9d[_0x15ebee(0x35e)]);if(_0x3f3042){if(_0x2d5e9d['number']!=_0x3f3042['number']){let _0x4591a5;if(_0x2d5e9d[_0x15ebee(0x35e)]!=config[_0x15ebee(0x265)]){const _0x20afb9=global[_0x15ebee(0x2cf)][noslash(_0x2d5e9d[_0x15ebee(0x332)])];_0x4591a5=_0x2d5e9d['reverse']?0x1/_0x20afb9:_0x20afb9;}else _0x4591a5=0x1;_0x2b3e6d[_0x15ebee(0x1f2)]({'coin':_0x2d5e9d[_0x15ebee(0x35e)],'symbol':_0x2d5e9d[_0x15ebee(0x332)],'price':_0x4591a5,'number':Number(formatResult(_0x3f3042['number']-_0x2d5e9d[_0x15ebee(0x373)],0x8)),'basecoinvalue':_0x4591a5*(_0x3f3042[_0x15ebee(0x373)]-_0x2d5e9d[_0x15ebee(0x373)])});}}});if(_0x2b3e6d[_0x482f17(0x212)]==0x1&&!blockTransactionDetection){if(config[_0x482f17(0x334)]){logger[_0x482f17(0x2f2)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x2b3e6d[0x0][_0x482f17(0x340)]+_0x482f17(0x2fc)+lastFees['highest']);if(lastFees[_0x482f17(0x27d)]==0x0||Math[_0x482f17(0x25f)](_0x2b3e6d[0x0][_0x482f17(0x340)])>lastFees[_0x482f17(0x27d)]){delete _0x2b3e6d[0x0][_0x482f17(0x332)],delete _0x2b3e6d[0x0]['basecoinvalue'];let _0x47ed89=[],_0x4ac492=[...config[_0x482f17(0x1c6)]]||[],_0x309894=config[_0x482f17(0x1c6)];_0x4ac492['sort']((_0xabb80c,_0x14231f)=>_0xabb80c[_0x482f17(0x313)]>_0x14231f['date']?-0x1:_0x14231f[_0x482f17(0x313)]>_0xabb80c[_0x482f17(0x313)]?0x1:0x0);const _0x32a305=getDate();if(_0x4ac492[0x0]){const _0x5f2491=fns[_0x482f17(0x1d4)](_0x4ac492[0x0]['date'],'yyyy/MM/dd',new Date()),_0x3e677c=fns[_0x482f17(0x1d4)](_0x32a305,_0x482f17(0x2ca),new Date());if(fns[_0x482f17(0x205)](_0x5f2491,_0x3e677c)){_0x47ed89=_0x4ac492[0x0]['changes'];const _0x1cb458=_0x47ed89['find'](_0x591a71=>_0x591a71[_0x482f17(0x35e)]==_0x2b3e6d[0x0]['coin']);_0x1cb458?(_0x1cb458[_0x482f17(0x373)]+=_0x2b3e6d[0x0][_0x482f17(0x373)],_0x1cb458[_0x482f17(0x373)]==0x0&&(_0x47ed89=_0x47ed89[_0x482f17(0x2b4)](_0x23a554=>{const _0x42828c=_0x482f17;return _0x23a554[_0x42828c(0x35e)]!=_0x2b3e6d[0x0]['coin'];}))):_0x47ed89[_0x482f17(0x1f2)](_0x2b3e6d[0x0]);const _0x5cf0c4=_0x309894['find'](_0x4782f6=>_0x4782f6[_0x482f17(0x313)]==_0x32a305);_0x5cf0c4[_0x482f17(0x1e7)]=_0x47ed89;}else _0x309894[_0x482f17(0x1f2)]({'date':_0x32a305,'changes':[_0x2b3e6d[0x0]]});}const _0x58ba14=_0x309894[_0x482f17(0x25e)](_0x57610f=>_0x57610f[_0x482f17(0x313)]==_0x32a305);if(_0x58ba14){let _0x4681e5=!![];_0x58ba14[_0x482f17(0x1e7)][_0x482f17(0x24b)](_0x25f274=>{const _0x41273f=_0x482f17;if(_0x25f274[_0x41273f(0x373)]!=0x0)_0x4681e5=![];}),_0x4681e5&&(_0x309894=_0x309894[_0x482f17(0x2b4)](_0x4b6758=>{const _0x22aa17=_0x482f17;return _0x4b6758[_0x22aa17(0x313)]!=_0x32a305;}));}let _0x55579c=dbConfig[_0x482f17(0x2f8)](_0x482f17(0x217))[_0x482f17(0x25e)]({'botID':botID})[_0x482f17(0x2f7)]();_0x55579c&&(dbConfig['get'](_0x482f17(0x217))[_0x482f17(0x25e)]({'botID':botID})[_0x482f17(0x28a)]({'liquidity':_0x309894})['write'](),config[_0x482f17(0x1c6)]=_0x309894),logHistory(_0x482f17(0x341),_0x482f17(0x2ee)+Math['abs'](_0x2b3e6d[0x0][_0x482f17(0x373)])+'\x20'+_0x2b3e6d[0x0][_0x482f17(0x35e)]+'\x20'+(_0x2b3e6d[0x0][_0x482f17(0x373)]>0x0?'added':'removed')+_0x482f17(0x2c0)),proxyEmit(_0x482f17(0x21c),emittedConfiguration());}else logger[_0x482f17(0x2f2)](_0x482f17(0x254)+Math['abs'](_0x2b3e6d[0x0]['number'])+'\x20'+_0x2b3e6d[0x0][_0x482f17(0x35e)]+'\x20'+(_0x2b3e6d[0x0][_0x482f17(0x373)]>0x0?_0x482f17(0x240):_0x482f17(0x2cc)));transactionDetected=!![];}else logger[_0x482f17(0x2f2)](_0x482f17(0x2ee)+Math['abs'](_0x2b3e6d[0x0][_0x482f17(0x373)])+'\x20'+_0x2b3e6d[0x0][_0x482f17(0x35e)]+'\x20'+(_0x2b3e6d[0x0]['number']>0x0?_0x482f17(0x240):'removed')+_0x482f17(0x30f));}currentCoins=_0x4089d7,currentCoinsAll=_0x4f485d,await sleep(watchTransactionsInterval);}catch(_0x3074a9){if(!exchangeStopped)await handleError(_0x3074a9,_0x482f17(0x374));}else await sleep(0x64);}}async function loadSymbols(){const _0x50728f=_0x50ddff;try{markets=await exchange[_0x50728f(0x245)](),allSymbols=[],Object[_0x50728f(0x250)](markets)['forEach'](_0x4e020a=>{const _0x167a80=_0x50728f;_0x4e020a[0x1][_0x167a80(0x321)]&&_0x4e020a[0x1][_0x167a80(0x1d8)]&&allSymbols['push'](_0x4e020a[0x0]);});}catch(_0x2580ca){throw _0x2580ca;}}function validateSymbols(_0x3b4c32){const _0x1d2b7f=_0x50ddff;let _0x542ea0=[];return _0x3b4c32[_0x1d2b7f(0x24b)](_0x1e3e5d=>{const _0x2538c6=_0x1d2b7f;!allSymbols[_0x2538c6(0x2ae)](_0x1e3e5d)?logHistory(_0x2538c6(0x1fc),_0x2538c6(0x27a)+_0x1e3e5d+_0x2538c6(0x22f)):_0x542ea0[_0x2538c6(0x1f2)](_0x1e3e5d);}),_0x542ea0;}async function initclient(){const _0x3cf436=_0x50ddff;proxyEmit(_0x3cf436(0x21c),emittedConfiguration()),proxyEmit(_0x3cf436(0x1ec),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3cf436(0x305),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1a3969=getNormalizedPerformance();emitPerformance(_0x1a3969),getStartingBalances(_0x1a3969);}async function toggleBotMode(){const _0xf14273=_0x50ddff;let _0x5ef1d7=dbConfig[_0xf14273(0x2f8)](_0xf14273(0x217))['find']({'botID':botID})[_0xf14273(0x2f7)]();if(_0x5ef1d7){const _0x4022e9=!_0x5ef1d7[_0xf14273(0x28b)];dbConfig[_0xf14273(0x2f8)](_0xf14273(0x217))[_0xf14273(0x25e)]({'botID':botID})[_0xf14273(0x28a)]({'headless':_0x4022e9})[_0xf14273(0x2a8)](),config['headless']=_0x4022e9,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1c0a6f=_0x50ddff;process[_0x1c0a6f(0x2de)]({'updatebotmanager':!![]},_0x32143c=>{}),logger['debug'](_0x1c0a6f(0x360)+config['headless']);}async function loadCoins(_0x15116d){const _0x480f83=_0x50ddff;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x471f38,_0x1bd7a9=0x0,_0xeb5c91=0x0;_0x15116d[_0x480f83(0x24b)](_0x368d4c=>{const _0x2b8ef1=_0x480f83;loading['remainingSymbols'][_0x2b8ef1(0x1f2)](_0x368d4c);}),loadingCanceled=![];let _0x480f70=![];while(_0x471f38!=_0x15116d['length']+maxLoadingProgress){_0x471f38=loadingProgress,_0x15116d['forEach'](_0x35885a=>{const _0x142fbb=_0x480f83;if(global[_0x142fbb(0x2cf)][noslash(_0x35885a)]){loading[_0x142fbb(0x2e4)]=loading[_0x142fbb(0x2e4)][_0x142fbb(0x2b4)](_0x2e8fe7=>_0x2e8fe7!=_0x35885a);if(!watchedSymbols[_0x142fbb(0x2ae)](_0x35885a))watchedSymbols[_0x142fbb(0x1f2)](_0x35885a);_0x471f38++;}}),loading[_0x480f83(0x327)]=Math[_0x480f83(0x1cd)](_0x471f38/(_0x15116d[_0x480f83(0x212)]+maxLoadingProgress)*0x64);loading[_0x480f83(0x327)]!=0x64&&(_0xeb5c91>0x1e*0x5&&(loading[_0x480f83(0x1f9)]=!![],emitLoadingProgress()),_0xeb5c91>0x78*0x5&&!_0x480f70&&(_0x480f70=!![],logHistory(_0x480f83(0x1fc),_0x480f83(0x2a4)+loading['remainingSymbols'][_0x480f83(0x27b)](',\x20')+_0x480f83(0x246)),logHistory(_0x480f83(0x1fc),_0x480f83(0x2ad)+loadCoinsRetryInterval/0xea60+_0x480f83(0x347)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x27f5c2=_0x480f83;process[_0x27f5c2(0x2de)]({'stop':_0x27f5c2(0x288)},_0x167f97=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x480f83(0x363)]=!![],emitLoadingProgress();break;}else _0x1bd7a9!=loading['progress']&&(_0x1bd7a9=loading[_0x480f83(0x327)],emitLoadingProgress()),_0xeb5c91++,await sleep(0xc8);}_0x471f38==_0x15116d[_0x480f83(0x212)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x480f83(0x2de)]({'status':_0x480f83(0x203),'live':'running'},_0x138e3c=>{}),_0x480f70&&logHistory(_0x480f83(0x341),_0x480f83(0x24e)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x2dc2ad=_0x50ddff;proxyEmit(_0x2dc2ad(0x247),loading);}async function getFiat(){const _0x579790=_0x50ddff;let _0x1efdb4=global[_0x579790(0x2cf)][stablecoins['eur'][_0x579790(0x35e)]],_0x1616b2=global['ticker'][stablecoins[_0x579790(0x34e)][_0x579790(0x35e)]];return{'eur':Number(_0x1efdb4),'usd':Number(_0x1616b2)};}function capitalize(_0x44bda0){const _0x551a2c=_0x50ddff;return _0x44bda0[_0x551a2c(0x1e1)](0x0,0x1)[_0x551a2c(0x297)]()+_0x44bda0['substring'](0x1);}function supportedExchanges(){const _0x21b83a=_0x50ddff,_0xb533d7=['ws','fetchTickers','fetchTicker',_0x21b83a(0x24c),_0x21b83a(0x348),_0x21b83a(0x35f),_0x21b83a(0x232),'fetchOpenOrders',_0x21b83a(0x285),_0x21b83a(0x302)];let _0x3e9a02=[],_0x2a349b=[],_0x2ca0ed=ccxt[_0x21b83a(0x2bf)][_0x21b83a(0x1ec)];_0x2ca0ed[_0x21b83a(0x24b)](_0x55d53f=>{const _0x142612=_0x21b83a;try{const _0x4a1e47=new ccxt[(_0x142612(0x2bf))][_0x55d53f]();_0x2a349b[_0x142612(0x1f2)](_0x4a1e47);}catch(_0x4c3a2f){}}),_0x2a349b[_0x21b83a(0x24b)](_0x2e9dbe=>{const _0x24280a=_0x21b83a;let _0xde0f6f=0x0;_0xb533d7[_0x24280a(0x24b)](_0x3694c0=>{const _0x55acc4=_0x24280a;_0x3694c0 in _0x2e9dbe['has']&&_0x2e9dbe[_0x55acc4(0x25a)][_0x3694c0]&&_0xde0f6f++;}),_0xde0f6f==_0xb533d7[_0x24280a(0x212)]&&_0x3e9a02[_0x24280a(0x1f2)](capitalize(_0x2e9dbe['id']));});let _0x448113=[];return _0x2ca0ed[_0x21b83a(0x24b)](_0x1f2309=>{const _0x53b6ef=_0x21b83a;_0x1f2309=capitalize(_0x1f2309);if(!_0x3e9a02['includes'](_0x1f2309))_0x448113[_0x53b6ef(0x1f2)](_0x1f2309);}),_0x3e9a02;}function setStartDatePerformance(){const _0x491e08=_0x50ddff;if(config&&config['liquidity'][0x0][_0x491e08(0x1e7)]['length']!=0x0){const _0x18b3b2=config['liquidity'][0x0][_0x491e08(0x1e7)];dbPerformance[_0x491e08(0x2f8)](_0x491e08(0x21a))['find']({'date':config[_0x491e08(0x2e1)]})[_0x491e08(0x28a)]({'coins':_0x18b3b2})[_0x491e08(0x2a8)]();}}async function recreateCoinResults(){const _0x4554bb=_0x50ddff;let _0x123f79,_0x4fed22=[];try{const _0x4e4788=fns['format'](fns['parseISO'](config[_0x4554bb(0x2e1)][_0x4554bb(0x298)](/\//g,'-')),_0x4554bb(0x2ba));for(const _0x2edce6 of currentCoins){if(_0x2edce6[_0x4554bb(0x35e)]!=config[_0x4554bb(0x265)]){let _0x2b3f89=0x0,_0xc3491,_0xdd1581;_0x123f79=await getAllEventOrders(_0x2edce6[_0x4554bb(0x332)]);if(_0x123f79['length']>0x0)_0x123f79[_0x4554bb(0x24b)](_0x50939b=>{const _0x3ffd61=_0x4554bb,_0x125909=_0x2edce6[_0x3ffd61(0x332)][_0x3ffd61(0x2ae)](config[_0x3ffd61(0x265)]+'/');_0x4fed22['push']({'datetime':_0x50939b[_0x3ffd61(0x29c)],'coin':_0x2edce6[_0x3ffd61(0x35e)],'symbol':_0x2edce6[_0x3ffd61(0x332)],'side':_0x50939b['side'],'reverse':_0x125909,'amount':formatResult(_0x50939b[_0x3ffd61(0x32a)],0x8),'filled':formatResult(_0x50939b['filled'],0x8),'price':formatResult(_0x50939b[_0x3ffd61(0x2fe)],0x8)}),_0x2b3f89=_0x50939b[_0x3ffd61(0x1ea)]=='buy'?_0x2b3f89+_0x50939b[_0x3ffd61(0x32a)]:_0x2b3f89-_0x50939b[_0x3ffd61(0x32a)];if(!_0xdd1581)_0xdd1581=_0x50939b['price'];});_0xc3491=_0x2edce6[_0x4554bb(0x373)]-_0x2b3f89;let _0x2d7ff3;config['liquidity'][_0x4554bb(0x24b)](_0x2b666a=>{const _0x4def93=_0x4554bb;!_0x2d7ff3&&(_0x2d7ff3=_0x2b666a[_0x4def93(0x1e7)][_0x4def93(0x25e)](_0x259fb9=>_0x259fb9[_0x4def93(0x35e)]==_0x2edce6[_0x4def93(0x35e)]),_0x2d7ff3&&(_0xc3491=_0x2d7ff3['number'],_0xdd1581=_0x2d7ff3[_0x4def93(0x2fe)]));});let _0x11c034=dbCoinResults[_0x4554bb(0x2f8)](_0x4554bb(0x22e))[_0x4554bb(0x25e)]({'coin':_0x2edce6['coin']})['value']();_0x11c034={'coin':_0x2edce6['coin'],'number':_0xc3491,'breakeven':_0xdd1581,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4554bb(0x2f8)]('coins')[_0x4554bb(0x25e)]({'coin':_0x2edce6[_0x4554bb(0x35e)]})[_0x4554bb(0x28a)](_0x11c034)[_0x4554bb(0x2a8)]();}}_0x4fed22[_0x4554bb(0x365)]((_0xe18437,_0x2e2b2f)=>_0xe18437['datetime']>_0x2e2b2f[_0x4554bb(0x29c)]?0x1:_0x2e2b2f['datetime']>_0xe18437[_0x4554bb(0x29c)]?-0x1:0x0);let _0x1573e7=0x0;for(let _0x5ddada of _0x4fed22){await updateCoinResults(_0x5ddada,!![]);}}catch(_0x1215a6){await handleError(_0x1215a6,_0x4554bb(0x26b));}}async function getAllEventOrders(_0xab8323){const _0x9d1139=_0x50ddff;let _0x308a50=[],_0x36a02e=dbLogs[_0x9d1139(0x2f8)]('logs')[_0x9d1139(0x2b4)](_0x569600=>{const _0x500ddd=_0x9d1139,_0x1255a7=_0x569600[_0x500ddd(0x234)][_0x500ddd(0x34c)]();return _0x1255a7['includes'](_0xab8323['toLowerCase']())&&(_0x1255a7['includes'](_0x500ddd(0x25d))&&_0x1255a7['includes'](_0x500ddd(0x1dc))||_0x1255a7['includes'](_0x500ddd(0x32a))&&_0x1255a7['includes'](_0x500ddd(0x1dc)));})[_0x9d1139(0x270)](_0x9d1139(0x27f))[_0x9d1139(0x2f7)]();return _0x36a02e[_0x9d1139(0x24b)](_0x527569=>{const _0xfc8019=_0x9d1139,_0x61b6bb=_0x527569['event'][_0xfc8019(0x2ae)](_0xfc8019(0x1f1))?_0xfc8019(0x1f1):_0xfc8019(0x2cb),_0x201e76=/#([0-9]|\.)+\s/i,_0x6088ab=Number(_0x201e76[_0xfc8019(0x29a)](_0x527569['event'])[0x0][_0xfc8019(0x35c)](0x1)),_0x41503b=/@([0-9]|\.)+$/i,_0x47f0bd=Number(_0x41503b[_0xfc8019(0x29a)](_0x527569[_0xfc8019(0x234)])[0x0][_0xfc8019(0x35c)](0x1));_0x308a50['push']({'datetime':_0x527569[_0xfc8019(0x27f)],'coin':symbolToCoin(_0xab8323),'symbol':_0xab8323,'side':_0x61b6bb,'amount':_0x6088ab,'filled':_0x6088ab,'price':_0x47f0bd});}),_0x308a50;}async function getAllOrders(_0x5f4887,_0x1c1abd){const _0x35e327=_0x50ddff;let _0x316cdf=[];while(_0x1c1abd<exchange[_0x35e327(0x30c)]()){const _0xb51d1f=0x1f4;try{const _0x3eecf7=await exchange['fetchClosedOrders'](_0x5f4887,_0x1c1abd,_0xb51d1f);if(_0x3eecf7['length'])_0x1c1abd=_0x3eecf7[_0x3eecf7[_0x35e327(0x212)]-0x1]['timestamp']+0x1,_0x316cdf=_0x316cdf['concat'](_0x3eecf7);else break;}catch(_0x154e4c){await handleError(_0x154e4c,_0x35e327(0x326),_0x5f4887);}}return _0x316cdf;}async function validate24hChanges(){const _0x59f724=_0x50ddff;for(const _0x40d283 of currentCoins){if(_0x40d283[_0x59f724(0x35e)]!=config['basecoin']){let _0x1cc07b;_0x40d283[_0x59f724(0x23c)]?_0x1cc07b=formatResult((0x1/(global[_0x59f724(0x316)][noslash(_0x40d283['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1cc07b=global['change'][noslash(_0x40d283['symbol'])],_0x1cc07b<config[_0x59f724(0x342)]&&(logHistory(_0x59f724(0x1fc),_0x40d283[_0x59f724(0x35e)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1cc07b+'%'),logHistory(_0x59f724(0x1fc),_0x59f724(0x2d4)),logHistory(_0x59f724(0x1fc),_0x59f724(0x220)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x40cbba,_0x523564){const _0x51ad46=_0x50ddff;if(!_0x40cbba)return!![];const _0xf05911=_0x523564[_0x51ad46(0x30d)]('.'),_0x204543=_0x40cbba['split']('.');for(var _0x35363d=0x0;_0x35363d<_0x204543[_0x51ad46(0x212)];_0x35363d++){const _0x423ff4=~~_0x204543[_0x35363d],_0x4dab62=~~_0xf05911[_0x35363d];if(_0x423ff4<_0x4dab62)return!![];if(_0x423ff4>_0x4dab62)return![];}return![];}async function oneTimeMigration(){const _0x3b0add=_0x50ddff;let _0x3d606a=dbLogs['get'](_0x3b0add(0x233))[_0x3b0add(0x2f7)]();if(isOlderVersion(_0x3d606a,_0x3b0add(0x1e0))){let _0x5b18ee=[];const _0xa3f0b1=dbLogs[_0x3b0add(0x2f8)](_0x3b0add(0x31c))[_0x3b0add(0x2f7)]();_0xa3f0b1[_0x3b0add(0x24b)](_0x42bad8=>{_0x5b18ee['push']({'time':_0x42bad8['time'],'type':_0x42bad8['type'],'event':_0x42bad8['event']});}),dbLogs['get']('logs')[_0x3b0add(0x28a)](_0x5b18ee)[_0x3b0add(0x2a8)]();}let _0x405ee9=dbConfig[_0x3b0add(0x2f8)](_0x3b0add(0x233))[_0x3b0add(0x2f7)]();if(isOlderVersion(_0x405ee9,_0x3b0add(0x1e0))){let _0x4aa555=dbConfig['get'](_0x3b0add(0x217))[_0x3b0add(0x25e)]({'botID':botID})[_0x3b0add(0x2f7)]();if(_0x4aa555){let _0x3b56c1=[];_0x4aa555['portfolio']['forEach'](_0xd33e51=>{const _0x2303d8=_0x3b0add;_0x3b56c1[_0x2303d8(0x1f2)]({'coin':_0xd33e51[_0x2303d8(0x35e)],'number':_0xd33e51[_0x2303d8(0x2db)],'price':_0xd33e51['startprice']}),delete _0xd33e51['startnumber'],delete _0xd33e51[_0x2303d8(0x21e)];});if(_0x3b56c1[_0x3b0add(0x212)]!==0x0)fs[_0x3b0add(0x261)](configbackuppath+(_0x3b0add(0x237)+botID+'.json'),JSON[_0x3b0add(0x1e9)](_0x3b56c1,null,0x4),function(_0x45ee0c){if(_0x45ee0c){}});const _0x5b93df=(_0x2a9399,_0x9bc515)=>{const _0x34c204=_0x3b0add;let _0x288308=[];_0x9bc515[_0x34c204(0x24b)](_0xa56d48=>{const _0x3fb32a=_0x34c204,_0x13299a=_0x2a9399[_0x3fb32a(0x25e)](_0x48dba1=>_0x48dba1[_0x3fb32a(0x35e)]==_0xa56d48[_0x3fb32a(0x35e)]);if(!_0x13299a)_0x288308[_0x3fb32a(0x1f2)](_0xa56d48);});let _0x2f2f1b=[];return _0x2a9399[_0x34c204(0x24b)](_0x3e3645=>{const _0xd1eaaa=_0x34c204,_0x2dc7f9=_0x9bc515['find'](_0x1d12c4=>_0x1d12c4[_0xd1eaaa(0x35e)]==_0x3e3645[_0xd1eaaa(0x35e)]);if(!_0x2dc7f9||_0x2dc7f9[_0xd1eaaa(0x373)]==0x0&&_0x3e3645[_0xd1eaaa(0x373)]!=0x0)_0x2f2f1b['push'](_0x3e3645);}),{'missingDay1':_0x288308,'notInDay2':_0x2f2f1b};},_0x4dc544=dbPerformance['get'](_0x3b0add(0x21a))[_0x3b0add(0x351)]()['value']();if(_0x4dc544[_0x3b0add(0x212)]>0x1){const {missingDay1:_0x91df1a,notInDay2:_0x219a76}=_0x5b93df(_0x3b56c1,_0x4dc544[0x1][_0x3b0add(0x22e)]);_0x3b56c1=[..._0x3b56c1,..._0x91df1a],_0x219a76[_0x3b0add(0x24b)](_0x5655fc=>{const _0x52b570=_0x3b0add;let _0x5e532c=_0x3b56c1[_0x52b570(0x32b)](_0x4af8cc=>_0x4af8cc[_0x52b570(0x35e)]==_0x5655fc['coin']);_0x5e532c!=-0x1&&_0x3b56c1['splice'](_0x5e532c,0x1);});}_0x3b56c1[_0x3b0add(0x365)]((_0x26aa3a,_0x16bb4c)=>_0x26aa3a['coin']>_0x16bb4c[_0x3b0add(0x35e)]?0x1:_0x16bb4c[_0x3b0add(0x35e)]>_0x26aa3a[_0x3b0add(0x35e)]?-0x1:0x0);let _0x56487f=[{'date':_0x4aa555[_0x3b0add(0x2e1)],'changes':_0x3b56c1}];_0x4dc544['length']>0x2&&_0x4dc544[_0x3b0add(0x24b)]((_0x54ff7d,_0x2dd25a)=>{const _0xbc8775=_0x3b0add;if(_0x2dd25a>0x0&&_0x2dd25a<_0x4dc544[_0xbc8775(0x212)]-0x1){const {missingDay1:_0x421de8,notInDay2:_0xf95aaa}=_0x5b93df(_0x4dc544[_0x2dd25a]['coins'],_0x4dc544[_0x2dd25a+0x1][_0xbc8775(0x22e)]);_0x3b56c1=[],(_0x421de8[_0xbc8775(0x212)]!=0x0||_0xf95aaa[_0xbc8775(0x212)]!=0x0)&&(_0x421de8[_0xbc8775(0x212)]!=0x0&&_0x3b56c1['push'](..._0x421de8),_0xf95aaa[_0xbc8775(0x212)]!=0x0&&(_0xf95aaa[_0xbc8775(0x24b)](_0x2e189d=>{const _0x2cb593=_0xbc8775;_0x2e189d[_0x2cb593(0x373)]=-_0x2e189d['number'];}),_0x3b56c1['push'](..._0xf95aaa)),_0x3b56c1['sort']((_0x58248e,_0x55a43b)=>_0x58248e['coin']>_0x55a43b[_0xbc8775(0x35e)]?0x1:_0x55a43b[_0xbc8775(0x35e)]>_0x58248e['coin']?-0x1:0x0),_0x56487f[_0xbc8775(0x1f2)]({'date':_0x4dc544[_0x2dd25a+0x1][_0xbc8775(0x313)],'changes':_0x3b56c1}));}}),dbConfig[_0x3b0add(0x2f8)]('bot')[_0x3b0add(0x25e)]({'botID':botID})[_0x3b0add(0x28a)]({..._0x4aa555,'liquidity':_0x56487f})[_0x3b0add(0x2a8)]();}}if(isOlderVersion(_0x405ee9,_0x3b0add(0x210))){let _0x2f3ed5=dbConfig[_0x3b0add(0x2f8)](_0x3b0add(0x217))['find']({'botID':botID})[_0x3b0add(0x2f7)]();if(_0x2f3ed5){const _0x397d26=_0x2f3ed5[_0x3b0add(0x301)],_0x554d51=_0x397d26?capitalize(_0x397d26):_0x3b0add(0x2d7);dbConfig[_0x3b0add(0x2f8)](_0x3b0add(0x217))['find']({'botID':botID})['assign']({'exchange':_0x554d51})[_0x3b0add(0x2a8)]();}}let _0x2b2d9a=dbPerformance[_0x3b0add(0x2f8)]('version')[_0x3b0add(0x2f7)]();isOlderVersion(_0x2b2d9a,'2.3.5')&&setStartDatePerformance();let _0x5b8832=dbCoinResults[_0x3b0add(0x2f8)](_0x3b0add(0x233))[_0x3b0add(0x2f7)]();if(isOlderVersion(_0x5b8832,_0x3b0add(0x263))){let _0x557544=dbCoinResults['get'](_0x3b0add(0x22e))['value']();if(_0x557544[_0x3b0add(0x212)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x555b72=_0x50ddff;dbConfig['set'](_0x555b72(0x233),serverversion)[_0x555b72(0x2a8)](),dbPerformance[_0x555b72(0x24d)](_0x555b72(0x233),serverversion)[_0x555b72(0x2a8)](),dbLogs['set'](_0x555b72(0x233),serverversion)[_0x555b72(0x2a8)](),dbCoinResults['set']('version',serverversion)[_0x555b72(0x2a8)]();}function getConfiguration(_0x15b07e){const _0x1f563e=_0x50ddff;let _0xed8d2f=dbConfig[_0x1f563e(0x2f8)](_0x1f563e(0x217))['find']({'botID':_0x15b07e})[_0x1f563e(0x2f7)]();if(_0xed8d2f){let _0x42c390=![];typeof _0xed8d2f[_0x1f563e(0x292)]==_0x1f563e(0x256)&&(_0xed8d2f={..._0xed8d2f,'threshold':Number(_0xed8d2f[_0x1f563e(0x292)])},_0x42c390=!![]),_0xed8d2f['change24h']==undefined&&(_0xed8d2f={..._0xed8d2f,'change24h':-0x14},_0x42c390=!![]),_0xed8d2f[_0x1f563e(0x376)]==undefined&&(_0xed8d2f={..._0xed8d2f,'fiat':_0x1f563e(0x22b)},_0x42c390=!![]),_0xed8d2f[_0x1f563e(0x32d)]==undefined&&(_0xed8d2f={..._0xed8d2f,'onepagemode':settings['onepagemode']},_0x42c390=!![]),_0xed8d2f[_0x1f563e(0x2c3)]==undefined&&(_0xed8d2f={..._0xed8d2f,'colorscheme':_0x1f563e(0x208)},_0x42c390=!![]),_0xed8d2f[_0x1f563e(0x334)]==undefined&&(_0xed8d2f={..._0xed8d2f,'autoliquidity':!![]},_0x42c390=!![]),_0x42c390&&(_0xed8d2f={'botID':_0xed8d2f[_0x1f563e(0x23b)],'exchange':_0xed8d2f[_0x1f563e(0x301)],'apiKey':_0xed8d2f[_0x1f563e(0x33c)],'apiSecret':_0xed8d2f['apiSecret'],'apiPassword':_0xed8d2f[_0x1f563e(0x330)],'basecoin':_0xed8d2f['basecoin'],'botname':_0xed8d2f[_0x1f563e(0x2e2)],'showname':_0xed8d2f[_0x1f563e(0x346)],'threshold':_0xed8d2f[_0x1f563e(0x292)],'ordertype':_0xed8d2f[_0x1f563e(0x267)],'timeout':_0xed8d2f[_0x1f563e(0x1f9)],'fiat':_0xed8d2f[_0x1f563e(0x376)],'startdate':_0xed8d2f['startdate'],'recreate':_0xed8d2f[_0x1f563e(0x314)],'timeshift':_0xed8d2f['timeshift'],'onepagemode':_0xed8d2f[_0x1f563e(0x32d)],'headless':_0xed8d2f[_0x1f563e(0x28b)],'cooldown':_0xed8d2f[_0x1f563e(0x231)],'change24h':_0xed8d2f[_0x1f563e(0x342)],'emojibuy':_0xed8d2f[_0x1f563e(0x31b)],'emojisell':_0xed8d2f[_0x1f563e(0x1fe)],'colorscheme':_0xed8d2f[_0x1f563e(0x2c3)],'portfolio':_0xed8d2f['portfolio'],'autoliquidity':_0xed8d2f['autoliquidity'],'liquidity':_0xed8d2f[_0x1f563e(0x1c6)],'openOrders':_0xed8d2f[_0x1f563e(0x364)]},dbConfig[_0x1f563e(0x2f8)](_0x1f563e(0x217))['remove']()[_0x1f563e(0x2a8)](),dbConfig[_0x1f563e(0x2f8)](_0x1f563e(0x217))[_0x1f563e(0x1f2)](_0xed8d2f)[_0x1f563e(0x2a8)]());}else _0xed8d2f={'botID':_0x15b07e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1f563e(0x1f5)+_0x15b07e,'showname':![],'threshold':0x3,'ordertype':_0x1f563e(0x25d),'timeout':0x14,'fiat':_0x1f563e(0x22b),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x1f563e(0x32d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1f563e(0x208),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xed8d2f;}function emittedConfiguration(){const _0x51e70f=_0x50ddff;let _0xcbf10c;if(config['apiKey']=='')_0xcbf10c={...config,'configstate':'initial'};else config[_0x51e70f(0x33c)]==_0x51e70f(0x359)?_0xcbf10c={...config,'configstate':_0x51e70f(0x31f)}:(_0xcbf10c={...config,'apiKey':'************','apiSecret':_0x51e70f(0x2f4)},config[_0x51e70f(0x330)]&&(_0xcbf10c[_0x51e70f(0x330)]=_0x51e70f(0x2f4)));return _0xcbf10c;}function getSettings(){const _0x540aa2=_0x50ddff;return dbSettings[_0x540aa2(0x2f8)](_0x540aa2(0x31a))[_0x540aa2(0x2f7)]();}function getSecure(){const _0x564d1c=_0x50ddff;return dbSecure[_0x564d1c(0x2f8)](_0x564d1c(0x2d6))[_0x564d1c(0x2f7)]()||{};}function updateTimeshift(_0x364c4e){const _0xe6afb4=_0x50ddff;let _0x2114c2=dbConfig[_0xe6afb4(0x2f8)]('bot')[_0xe6afb4(0x25e)]({'botID':botID})['value']();_0x2114c2&&dbConfig[_0xe6afb4(0x2f8)](_0xe6afb4(0x217))[_0xe6afb4(0x25e)]({'botID':botID})['assign']({'timeshift':_0x364c4e})['write'](),config[_0xe6afb4(0x2a3)]=_0x364c4e,proxyEmit(_0xe6afb4(0x21c),emittedConfiguration());}function updateOnepagemode(_0x3ab89c){const _0x4ac314=_0x50ddff;let _0x2dc94d=dbConfig[_0x4ac314(0x2f8)](_0x4ac314(0x217))[_0x4ac314(0x25e)]({'botID':botID})[_0x4ac314(0x2f7)]();_0x2dc94d&&dbConfig[_0x4ac314(0x2f8)](_0x4ac314(0x217))[_0x4ac314(0x25e)]({'botID':botID})[_0x4ac314(0x28a)]({'onepagemode':_0x3ab89c})[_0x4ac314(0x2a8)](),config[_0x4ac314(0x32d)]=_0x3ab89c,proxyEmit(_0x4ac314(0x21c),emittedConfiguration());}async function storeConfiguration(_0x328dbe){const _0x3555c5=_0x50ddff;logger[_0x3555c5(0x2f2)](_0x3555c5(0x29b));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x485ad2=![],_0x57b680=![],_0x33db26=[];_0x328dbe[_0x3555c5(0x2b5)][_0x3555c5(0x24b)](_0x2d4067=>{const _0x341c3f=_0x3555c5;if(!_0x2d4067['excluded']&&_0x2d4067[_0x341c3f(0x35e)]!=_0x328dbe[_0x341c3f(0x265)])_0x33db26[_0x341c3f(0x1f2)](_0x2d4067[_0x341c3f(0x332)]);}),_0x33db26[_0x3555c5(0x24b)](_0x1fa9fd=>{const _0xefc3a3=_0x3555c5,_0x4fd3ba=currentCoins[_0xefc3a3(0x25e)](_0x18791c=>_0x18791c[_0xefc3a3(0x332)]==_0x1fa9fd);!_0x4fd3ba&&(_0x485ad2=!![]);}),currentCoins[_0x3555c5(0x24b)](_0x289754=>{const _0xe0c8cf=_0x3555c5;if(_0x289754['coin']!=config[_0xe0c8cf(0x265)]){const _0x47be2d=_0x33db26[_0xe0c8cf(0x25e)](_0x5ed695=>_0x5ed695==_0x289754[_0xe0c8cf(0x332)]);!_0x47be2d&&(_0x485ad2=!![]);}}),_0x328dbe[_0x3555c5(0x2b5)]['forEach'](_0x88544d=>{const _0xd38e82=_0x3555c5,_0xa763a2=config[_0xd38e82(0x2b5)][_0xd38e82(0x25e)](_0x5d1150=>_0x5d1150[_0xd38e82(0x35e)]==_0x88544d[_0xd38e82(0x35e)]);if(_0xa763a2&&_0x88544d[_0xd38e82(0x271)]!=_0xa763a2[_0xd38e82(0x271)])_0x57b680=!![];});let _0x56d5cb=dbConfig[_0x3555c5(0x2f8)]('bot')['find']({'botID':botID})[_0x3555c5(0x2f7)]();_0x328dbe={..._0x328dbe,'apiKey':crypt[_0x3555c5(0x260)](secure['privateKey'],_0x328dbe[_0x3555c5(0x33c)])[_0x3555c5(0x2e0)],'apiSecret':crypt[_0x3555c5(0x260)](secure[_0x3555c5(0x312)],_0x328dbe[_0x3555c5(0x329)])[_0x3555c5(0x2e0)]};_0x328dbe[_0x3555c5(0x330)]&&(_0x328dbe['apiPassword']=crypt[_0x3555c5(0x260)](secure['privateKey'],_0x328dbe['apiPassword'])[_0x3555c5(0x2e0)]);let _0x235942=![];if(_0x56d5cb){_0x328dbe[_0x3555c5(0x33c)]=='************'?_0x328dbe[_0x3555c5(0x33c)]=config['apiKey']:_0x235942=!![];_0x328dbe[_0x3555c5(0x329)]=='************'?_0x328dbe['apiSecret']=config[_0x3555c5(0x329)]:_0x235942=!![];if(_0x328dbe[_0x3555c5(0x330)]==_0x3555c5(0x2f4))_0x328dbe[_0x3555c5(0x330)]=config[_0x3555c5(0x330)];else{if(_0x328dbe['apiPassword'])_0x235942=!![];}dbConfig[_0x3555c5(0x2f8)](_0x3555c5(0x217))['find']({'botID':botID})['assign'](_0x328dbe)[_0x3555c5(0x2a8)]();}else dbConfig[_0x3555c5(0x2f8)](_0x3555c5(0x217))['push'](_0x328dbe)[_0x3555c5(0x2a8)](),_0x235942=!![],process[_0x3555c5(0x2de)]({'status':_0x3555c5(0x203),'live':_0x3555c5(0x204)},_0x7441e3=>{});process[_0x3555c5(0x2de)]({'botname':_0x328dbe[_0x3555c5(0x2e2)]},_0xa66f50=>{}),config={..._0x328dbe},updateBotManager(),proxyEmit(_0x3555c5(0x283)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x235942)await reset(!![]);else _0x485ad2||_0x57b680?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x3555c5(0x2f2)](_0x3555c5(0x2c1));}async function storeHeadless(_0x2264fc){const _0x35335b=_0x50ddff,_0x501455={...config,'headless':_0x2264fc['headless']};let _0xe166a6=dbConfig[_0x35335b(0x2f8)](_0x35335b(0x217))[_0x35335b(0x25e)]({'botID':botID})[_0x35335b(0x2f7)]();_0xe166a6&&dbConfig[_0x35335b(0x2f8)]('bot')[_0x35335b(0x25e)]({'botID':botID})['assign'](_0x501455)[_0x35335b(0x2a8)](),config={..._0x501455},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x516466){const _0x42324e=_0x50ddff,_0x4f5eaa={...config,'fiat':_0x516466};let _0x3e6ad1=dbConfig['get'](_0x42324e(0x217))[_0x42324e(0x25e)]({'botID':botID})[_0x42324e(0x2f7)]();_0x3e6ad1&&dbConfig[_0x42324e(0x2f8)](_0x42324e(0x217))[_0x42324e(0x25e)]({'botID':botID})[_0x42324e(0x28a)](_0x4f5eaa)[_0x42324e(0x2a8)](),config={..._0x4f5eaa},proxyEmit(_0x42324e(0x21c),emittedConfiguration());}function resetHistory(){const _0x1f64f6=_0x50ddff;logger[_0x1f64f6(0x202)](_0x1f64f6(0x287));try{if(fs[_0x1f64f6(0x2e3)](path[_0x1f64f6(0x27b)](configpath,_0x1f64f6(0x1ff)+botID+'-events.json')))fs[_0x1f64f6(0x28d)](path[_0x1f64f6(0x27b)](configpath,_0x1f64f6(0x1ff)+botID+_0x1f64f6(0x2ea)));if(fs[_0x1f64f6(0x2e3)](path[_0x1f64f6(0x27b)](configpath,_0x1f64f6(0x1ff)+botID+_0x1f64f6(0x2d0))))fs['unlinkSync'](path[_0x1f64f6(0x27b)](configpath,_0x1f64f6(0x1ff)+botID+'-performance.json'));if(fs[_0x1f64f6(0x2e3)](path[_0x1f64f6(0x27b)](configpath,_0x1f64f6(0x1ff)+botID+'-results.json')))fs[_0x1f64f6(0x28d)](path[_0x1f64f6(0x27b)](configpath,'bot-'+botID+'-results.json'));}catch(_0x4495b5){if(_0x4495b5)logger[_0x1f64f6(0x202)](_0x1f64f6(0x2a0),_0x4495b5);}const _0x12c536=getDate();let _0x4267d0=[];currentCoins[_0x1f64f6(0x24b)](_0x1f6456=>{const _0x5ac3f7=_0x1f64f6;_0x4267d0[_0x5ac3f7(0x1f2)]({'coin':_0x1f6456['coin'],'number':_0x1f6456[_0x5ac3f7(0x373)],'price':_0x1f6456[_0x5ac3f7(0x36b)]});});let _0x99a8d4=dbConfig[_0x1f64f6(0x2f8)](_0x1f64f6(0x217))['find']({'botID':botID})[_0x1f64f6(0x2f7)]();_0x99a8d4&&(dbConfig[_0x1f64f6(0x2f8)](_0x1f64f6(0x217))['find']({'botID':botID})[_0x1f64f6(0x28a)]({'liquidity':[{'date':_0x12c536,'changes':_0x4267d0}]})['write'](),config[_0x1f64f6(0x1c6)]=[]),process[_0x1f64f6(0x2de)]({'stop':_0x1f64f6(0x288)},_0x2fd874=>{});}function noslash(_0x3a7463){const _0x15accd=_0x50ddff;return _0x3a7463[_0x15accd(0x298)]('/','');}function updateHighestFee(_0x2f7dee){const _0x64c80b=_0x50ddff;if(_0x2f7dee['reverse']){let _0x3aeefb={'filled':_0x2f7dee['filled']*_0x2f7dee[_0x64c80b(0x2fe)],'amount':_0x2f7dee['filled']*_0x2f7dee['price'],'side':_0x2f7dee[_0x64c80b(0x1ea)]==_0x64c80b(0x1f1)?_0x64c80b(0x2cb):_0x64c80b(0x1f1),'price':0x1/_0x2f7dee['price']};_0x2f7dee={..._0x2f7dee,..._0x3aeefb};}const _0x2e728f=defaultFee*_0x2f7dee['filled']*_0x2f7dee[_0x64c80b(0x2fe)];lastFees[_0x64c80b(0x29e)][_0x64c80b(0x212)]===0x14&&lastFees[_0x64c80b(0x29e)][_0x64c80b(0x25c)](),lastFees[_0x64c80b(0x29e)][_0x64c80b(0x1f2)](_0x2e728f),lastFees['highest']=Math[_0x64c80b(0x372)](...lastFees[_0x64c80b(0x29e)]);}async function updateNumberCoinsCcxt(_0x3dd2f1){const _0x4539d5=_0x50ddff;logger['debug'](_0x4539d5(0x2a6)+_0x3dd2f1[_0x4539d5(0x332)]+_0x4539d5(0x2f5)+_0x3dd2f1[_0x4539d5(0x1d9)]+_0x4539d5(0x2f5)+_0x3dd2f1[_0x4539d5(0x32a)]+_0x4539d5(0x26a)+_0x3dd2f1[_0x4539d5(0x361)]+_0x4539d5(0x2f5)+_0x3dd2f1['id']);let _0x4bd3d8=_0x3dd2f1[_0x4539d5(0x1d9)],_0x267ad0=![];currentCoins[_0x4539d5(0x24b)](_0x59b6aa=>{const _0x237049=_0x4539d5;_0x59b6aa[_0x237049(0x332)]==_0x3dd2f1['symbol']&&(_0x267ad0=!![]);});if(!_0x267ad0)return;const _0x38695d=currentCoins[_0x4539d5(0x25e)](_0x3947f9=>_0x3947f9[_0x4539d5(0x332)]==_0x3dd2f1[_0x4539d5(0x332)]),_0x31c8e3=_0x5bd829=>{const _0x9fca0a=_0x4539d5;if(_0x38695d)_0x38695d[_0x9fca0a(0x1fd)]=_0x5bd829;};if(_0x4bd3d8==_0x4539d5(0x2eb))_0x31c8e3(_0x4539d5(0x2eb));else{if(_0x4bd3d8=='canceled'){_0x31c8e3(_0x4539d5(0x337));const _0x25e519=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x25e519,await getOpenOrders(),handleOpenOrders();}else{if(_0x4bd3d8=='closed'){let _0x4b2650=![];if(lastOrders)for(const _0x330eda of lastOrders){const _0x14e416=0xc8,_0x47cced=0x1388;let _0x5bccbe=0x0;while(!_0x330eda[_0x4539d5(0x300)]&&_0x5bccbe*_0x14e416<_0x47cced){_0x5bccbe++,await sleep(_0x14e416);}if(_0x5bccbe>0x0)logger[_0x4539d5(0x2f2)](_0x4539d5(0x2cd)+_0x5bccbe*_0x14e416/0x3e8+_0x4539d5(0x2b8));if(_0x330eda[_0x4539d5(0x300)]==_0x3dd2f1['id']){logger[_0x4539d5(0x2f2)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x3dd2f1['id']),_0x4b2650=!![];if(_0x330eda[_0x4539d5(0x32a)]==0x0){logger['debug'](_0x4539d5(0x243)+_0x3dd2f1['id']);if(_0x3dd2f1[_0x4539d5(0x2c4)])_0x330eda[_0x4539d5(0x2fe)]=_0x3dd2f1[_0x4539d5(0x2c4)];else{if(_0x3dd2f1[_0x4539d5(0x2fe)])_0x330eda[_0x4539d5(0x2fe)]=_0x3dd2f1[_0x4539d5(0x2fe)];else{}}_0x330eda[_0x4539d5(0x32a)]=_0x3dd2f1[_0x4539d5(0x32a)],updateHighestFee(_0x330eda),_0x31c8e3(_0x4539d5(0x32a)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x3f942a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3f942a;}_0x330eda[_0x4539d5(0x1cc)]={'currency':_0x3dd2f1[_0x4539d5(0x1cc)]?_0x3dd2f1[_0x4539d5(0x1cc)][_0x4539d5(0x328)]:null,'cost':_0x3dd2f1[_0x4539d5(0x1cc)]?_0x3dd2f1[_0x4539d5(0x1cc)][_0x4539d5(0x2d8)]:0x0},await updateCoinResults(_0x330eda);}}}if(!_0x4b2650){logger['debug'](_0x4539d5(0x1f6)+_0x3dd2f1['id']),_0x31c8e3('filled');const _0x120f4a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x120f4a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xb3f69=JSON[_0x4539d5(0x1d4)](lastBalances[_0x4539d5(0x2b5)]);const _0xf2a571=_0xb3f69[_0x4539d5(0x25e)](_0x235bc2=>_0x235bc2['symbol']==_0x3dd2f1[_0x4539d5(0x332)]);if(_0xf2a571){if(_0x4bd3d8==_0x4539d5(0x2eb))_0xf2a571[_0x4539d5(0x1fd)]=_0xf2a571[_0x4539d5(0x1fd)]==_0x4539d5(0x32a)?_0x4539d5(0x32a):_0x4539d5(0x2eb);else{if(_0x4bd3d8==_0x4539d5(0x337))_0xf2a571[_0x4539d5(0x1fd)]=_0xf2a571[_0x4539d5(0x1fd)]==_0x4539d5(0x32a)?_0x4539d5(0x32a):_0x4539d5(0x337);else _0x4bd3d8==_0x4539d5(0x2c2)&&(_0xf2a571[_0x4539d5(0x1fd)]=_0x4539d5(0x32a));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4539d5(0x1e9)](_0xb3f69)},proxyEmit(_0x4539d5(0x305),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5bf670=_0x50ddff;await getOpenOrders();let _0x5755e6=![];currentCoins[_0x5bf670(0x24b)](_0x11c4fa=>{const _0x42eb7f=_0x5bf670;_0x5755e6=allOpenOrders['find'](_0x24c92c=>_0x24c92c[_0x42eb7f(0x332)]==_0x11c4fa[_0x42eb7f(0x332)]),_0x11c4fa[_0x42eb7f(0x1fd)]=_0x5755e6?'open':_0x42eb7f(0x255);});}async function getCoins(_0x405e4e=0x0,_0x4ba968=!![],_0x2c21c1=config[_0x50ddff(0x265)]){const _0x3c1d5b=_0x50ddff;let _0x4cf7b9,_0x4b3097=[],_0x1538b5=[],_0xcd5839=[];if(_0x405e4e)await sleep(_0x405e4e);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4cf7b9=await exchange[_0x3c1d5b(0x302)](),mybalances=_0x4cf7b9[_0x3c1d5b(0x349)];for(const [_0x499c11,_0x9d0439]of Object[_0x3c1d5b(0x250)](mybalances)){_0xcd5839[_0x3c1d5b(0x1f2)](_0x499c11);}config['portfolio'][_0x3c1d5b(0x24b)](_0x19c345=>{const _0x15f353=_0x3c1d5b;!_0xcd5839[_0x15f353(0x2ae)](_0x19c345[_0x15f353(0x35e)])&&(mybalances[_0x19c345[_0x15f353(0x35e)]]=0x0);});if(_0x2c21c1=='')for(const [_0x277069,_0x380ccb]of Object[_0x3c1d5b(0x250)](mybalances)){_0x380ccb!=0x0&&_0x4b3097[_0x3c1d5b(0x1f2)]({'coin':_0x277069});}else{let _0x3a35ca=![];for(const [_0x185b6d,_0x2eb614]of Object[_0x3c1d5b(0x250)](mybalances)){const _0x26c019=config[_0x3c1d5b(0x2b5)][_0x3c1d5b(0x25e)](_0x2c53eb=>_0x2c53eb[_0x3c1d5b(0x35e)]==_0x185b6d),_0xb2a0db=_0x185b6d+'/'+_0x2c21c1,_0x33476d=_0x2c21c1+'/'+_0x185b6d,_0x22368a=currentCoins['find'](_0x4357a5=>_0x4357a5[_0x3c1d5b(0x35e)]==_0x185b6d);_0x3a35ca=![];if((_0x2eb614!=0x0||_0x26c019)&&(allSymbols[_0x3c1d5b(0x2ae)](_0xb2a0db)||_0x185b6d==_0x2c21c1))_0x4b3097[_0x3c1d5b(0x1f2)]({'coin':_0x185b6d,'symbol':_0xb2a0db,'reverse':![],'number':Math['max'](_0x2eb614+(_0x26c019&&_0x26c019[_0x3c1d5b(0x271)]||0x0),0x0),'orderstatus':_0x22368a?_0x22368a[_0x3c1d5b(0x1fd)]:_0x3c1d5b(0x255)});else{if((_0x2eb614!=0x0||_0x26c019)&&allSymbols[_0x3c1d5b(0x2ae)](_0x33476d))_0x4b3097[_0x3c1d5b(0x1f2)]({'coin':_0x185b6d,'symbol':_0x33476d,'reverse':!![],'number':Math[_0x3c1d5b(0x372)](_0x2eb614+(_0x26c019&&_0x26c019[_0x3c1d5b(0x271)]||0x0),0x0),'orderstatus':_0x22368a?_0x22368a[_0x3c1d5b(0x1fd)]:_0x3c1d5b(0x255)});else _0x26c019&&_0x4b3097[_0x3c1d5b(0x1f2)]({'coin':_0x26c019['coin'],'symbol':_0x26c019[_0x3c1d5b(0x332)],'reverse':_0x26c019[_0x3c1d5b(0x23c)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x2a7540){if(!_0x4ba968)handleErrorNoStop(_0x2a7540,_0x3c1d5b(0x319));else await handleError(_0x2a7540,_0x3c1d5b(0x319));}return _0x1538b5=cloneDeep(_0x4b3097),_0x4b3097=_0x4b3097[_0x3c1d5b(0x2b4)](_0x3af97c=>{const _0x496fd0=_0x3c1d5b,_0x50158b=config[_0x496fd0(0x2b5)][_0x496fd0(0x25e)](_0x5adcc7=>_0x5adcc7[_0x496fd0(0x35e)]==_0x3af97c[_0x496fd0(0x35e)]);return _0x50158b&&!_0x50158b['excluded'];}),[_0x4b3097,_0x1538b5];}async function getCoinNumber(_0x353cc1){const _0x55a2c7=_0x50ddff;let _0x4464ba;try{const _0x15ac66=await exchange[_0x55a2c7(0x302)]();_0x4464ba=_0x15ac66[_0x55a2c7(0x349)][_0x353cc1];}catch(_0x5290b2){await handleError(_0x5290b2,_0x55a2c7(0x339));}return _0x4464ba;}async function getOpenOrders(){const _0x5b40a8=_0x50ddff;let _0x9455cd;allOpenOrders=[];try{for(const _0x27456e of config['portfolio']){!_0x27456e[_0x5b40a8(0x1f4)]&&_0x27456e[_0x5b40a8(0x35e)]!=config[_0x5b40a8(0x265)]&&(_0x9455cd=await exchange[_0x5b40a8(0x1d5)](_0x27456e[_0x5b40a8(0x332)]),_0x9455cd['length']>0x0&&allOpenOrders['push'](_0x9455cd[0x0]));}}catch(_0x1e1c3b){await handleError(_0x1e1c3b,_0x5b40a8(0x20c));}}async function handleOpenOrders(_0x5c81b1=0x0){const _0x5428dc=_0x50ddff;allOpenOrders[_0x5428dc(0x212)]==0x0&&lockOrders==ORDERS[_0x5428dc(0x274)]&&allOrdersPlaced&&(_0x5c81b1==0x0?(logger[_0x5428dc(0x2f2)](_0x5428dc(0x2b7)),_0x5c81b1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5428dc(0x2f2)](_0x5428dc(0x266)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2d6ac6){const _0x4ff947=_0x50ddff,_0x58480d=ccxt['pro'][_0x2d6ac6[_0x4ff947(0x301)]['toLowerCase']()],_0x3a3df1=new _0x58480d({'apiKey':_0x2d6ac6[_0x4ff947(0x33c)],'secret':_0x2d6ac6[_0x4ff947(0x329)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4ff947(0x1d8)}});if(_0x2d6ac6[_0x4ff947(0x330)])_0x3a3df1[_0x4ff947(0x2f3)]=_0x2d6ac6[_0x4ff947(0x330)];try{await _0x3a3df1[_0x4ff947(0x245)]();}catch(_0x1ff2da){throw _0x1ff2da;}}function cloneDeep(_0xa88d04){const _0x30c846=_0x50ddff;return JSON[_0x30c846(0x1d4)](JSON[_0x30c846(0x1e9)](_0xa88d04));}async function getPortfolio(_0x4ec63b){const _0x222561=_0x50ddff;let _0xcd9322=[],_0xac7416=[],_0x21e196=[],_0x19299e;if(_0x4ec63b[_0x222561(0x33c)]!==_0x222561(0x2f4)||_0x4ec63b[_0x222561(0x329)]!==_0x222561(0x2f4)||_0x4ec63b[_0x222561(0x330)]&&_0x4ec63b[_0x222561(0x330)]!==_0x222561(0x2f4)){if(config[_0x222561(0x301)]){if(_0x4ec63b[_0x222561(0x33c)]=='************')_0x4ec63b['apiKey']=config['apiKey'];if(_0x4ec63b[_0x222561(0x329)]==_0x222561(0x2f4))_0x4ec63b[_0x222561(0x329)]=config[_0x222561(0x329)];if(_0x4ec63b[_0x222561(0x330)]==_0x222561(0x2f4))_0x4ec63b['apiPassword']=config[_0x222561(0x330)];try{await testAPI(_0x4ec63b);}catch(_0x5c544d){if(_0x5c544d[_0x222561(0x30b)]()['includes'](_0x222561(0x315))){logger[_0x222561(0x2f2)](_0x222561(0x352)),proxyEmit(_0x222561(0x2b5),![]);return;}else{handleError(_0x5c544d,_0x222561(0x1d0));return;}}}await initExchange(_0x4ec63b[_0x222561(0x301)],_0x4ec63b[_0x222561(0x33c)],_0x4ec63b[_0x222561(0x329)],_0x4ec63b[_0x222561(0x330)]);try{await loadSymbols();}catch(_0x1238d4){if(_0x1238d4[_0x222561(0x30b)]()[_0x222561(0x2ae)](_0x222561(0x315))){proxyEmit(_0x222561(0x2b5),![]);return;}else{handleError(_0x1238d4,_0x222561(0x324));return;}}const _0x404197=await getCoins(0x0,![],_0x4ec63b[_0x222561(0x265)]);_0x21e196=cloneDeep(_0x404197[0x1]);}else{const _0x54a5ce=await getCoins();_0x21e196=cloneDeep(_0x54a5ce[0x1]);}if(_0x4ec63b['basecoin']=='')proxyEmit('portfolio',_0x21e196);else{_0x21e196[_0x222561(0x24b)](_0x3e6622=>{const _0x20e94a=_0x222561;if(_0x3e6622['coin']!=_0x4ec63b[_0x20e94a(0x265)]&&allSymbols[_0x20e94a(0x2ae)](_0x3e6622['symbol']))_0xcd9322[_0x20e94a(0x1f2)](_0x3e6622[_0x20e94a(0x332)]);});if(_0xcd9322[_0x222561(0x212)]==0x0)logHistory(_0x222561(0x1fc),_0x222561(0x2d2));else{try{_0xac7416=await getTickers(_0xcd9322);}catch(_0x2163ac){if(_0x2163ac[_0x222561(0x30b)]()[_0x222561(0x2ae)](_0x222561(0x315))){proxyEmit(_0x222561(0x2b5),![]);return;}else handleError(_0x2163ac,_0x222561(0x2a7));}_0x21e196[_0x222561(0x24b)](_0x539d9d=>{const _0x23e5a1=_0x222561;_0x539d9d[_0x23e5a1(0x35e)]!=_0x4ec63b[_0x23e5a1(0x265)]?_0xac7416[_0x539d9d[_0x23e5a1(0x332)]]?_0x19299e=_0x539d9d['reverse']?0x1/_0xac7416[_0x539d9d[_0x23e5a1(0x332)]][_0x23e5a1(0x36b)]:_0xac7416[_0x539d9d['symbol']][_0x23e5a1(0x36b)]:_0x19299e=0x0:_0x19299e=0x1,_0x539d9d[_0x23e5a1(0x2fe)]=formatResult(_0x19299e,0x8);}),proxyEmit(_0x222561(0x2b5),_0x21e196);}}}function truncateTradeAmount(_0x1de193,_0x18d191){const _0x372ae0=_0x50ddff;let _0x3b4f3b=0x0;try{_0x3b4f3b=exchange[_0x372ae0(0x2ff)](_0x1de193,_0x18d191);}catch(_0x5deb0a){}return _0x3b4f3b;}function checkMinimums(_0x2b1c97){const _0x1aeff2=_0x50ddff;let _0x396767=!![];const _0x430bad=!_0x2b1c97[_0x1aeff2(0x23c)]?markets[_0x2b1c97[_0x1aeff2(0x332)]][_0x1aeff2(0x356)]['amount'][_0x1aeff2(0x320)]:markets[_0x2b1c97['symbol']][_0x1aeff2(0x356)][_0x1aeff2(0x2d8)][_0x1aeff2(0x320)],_0x440ccd=!_0x2b1c97[_0x1aeff2(0x23c)]?markets[_0x2b1c97[_0x1aeff2(0x332)]][_0x1aeff2(0x356)]['cost'][_0x1aeff2(0x320)]:markets[_0x2b1c97[_0x1aeff2(0x332)]]['limits'][_0x1aeff2(0x361)][_0x1aeff2(0x320)],_0x44ee83=truncateTradeAmount(_0x2b1c97['symbol'],_0x2b1c97['trade']);_0x2b1c97[_0x1aeff2(0x1c7)]=_0x44ee83;if(Math['abs'](_0x44ee83)<_0x430bad)_0x396767=![];if(Math[_0x1aeff2(0x25f)](_0x44ee83)*_0x2b1c97[_0x1aeff2(0x36b)]<_0x440ccd)_0x396767=![];if(_0x2b1c97[_0x1aeff2(0x1ea)]==_0x1aeff2(0x1f1)){let _0xf380f2=config['portfolio']['find'](_0x4809=>_0x4809[_0x1aeff2(0x35e)]==_0x2b1c97[_0x1aeff2(0x35e)]);if(_0xf380f2[_0x1aeff2(0x271)]>0x0){if(Math[_0x1aeff2(0x25f)](_0x44ee83)>_0x2b1c97[_0x1aeff2(0x373)]-_0xf380f2['offset'])_0x396767=![];}else{if(Math[_0x1aeff2(0x25f)](_0x44ee83)>_0x2b1c97[_0x1aeff2(0x373)])_0x396767=![];}}if(_0x2b1c97[_0x1aeff2(0x1ea)]==_0x1aeff2(0x2cb)){let _0x48209f=config[_0x1aeff2(0x2b5)][_0x1aeff2(0x25e)](_0x5cee74=>_0x5cee74[_0x1aeff2(0x35e)]==config[_0x1aeff2(0x265)]),_0x46b581=currentCoins[_0x1aeff2(0x25e)](_0x15a1fa=>_0x15a1fa[_0x1aeff2(0x35e)]==config[_0x1aeff2(0x265)]);if(_0x48209f[_0x1aeff2(0x271)]>0x0){if(Math[_0x1aeff2(0x25f)](_0x44ee83)*_0x2b1c97[_0x1aeff2(0x36b)]>_0x46b581[_0x1aeff2(0x373)]-_0x48209f[_0x1aeff2(0x271)])_0x396767=![];}else{if(Math['abs'](_0x44ee83)*_0x2b1c97[_0x1aeff2(0x36b)]>_0x46b581[_0x1aeff2(0x373)])_0x396767=![];}}return _0x396767;}async function getBalances(_0x633403=!![]){const _0x142341=_0x50ddff;let _0x3c6f6e=0x0,_0x123b4c;const _0x1388d2=config[_0x142341(0x292)];if(config[_0x142341(0x28b)]&&config[_0x142341(0x342)]<0x0)await validate24hChanges();currentCoins[_0x142341(0x24b)](_0x11bb90=>{const _0x220306=_0x142341;if(_0x11bb90[_0x220306(0x35e)]!=config[_0x220306(0x265)]){let _0xca52b8=global[_0x220306(0x2cf)][noslash(_0x11bb90[_0x220306(0x332)])];_0x123b4c=_0x11bb90['reverse']?0x1/_0xca52b8:_0xca52b8;}else _0x123b4c=0x1;let _0x2e898f=_0x11bb90[_0x220306(0x373)]*_0x123b4c;_0x3c6f6e+=_0x2e898f,_0x11bb90[_0x220306(0x36b)]=formatResult(Number(_0x123b4c),0x8),_0x11bb90['value']=_0x2e898f;}),currentCoins[_0x142341(0x24b)](_0x5000fd=>{const _0x4aee46=_0x142341;let _0xe6abee=config[_0x4aee46(0x2b5)][_0x4aee46(0x25e)](_0x56594d=>_0x56594d[_0x4aee46(0x35e)]==_0x5000fd['coin']),_0x46fc53=Number(_0xe6abee['distribution']),_0x3782eb=_0x5000fd[_0x4aee46(0x2f7)]/_0x3c6f6e*0x64,_0x413579=_0x46fc53*_0x3c6f6e/0x64/_0x5000fd['last']-_0x5000fd[_0x4aee46(0x373)];_0x5000fd[_0x4aee46(0x2d9)]=formatResult(_0x3782eb,0x3),_0x5000fd[_0x4aee46(0x1de)]=formatResult(_0x46fc53,0x3),_0x5000fd['trade']=formatResult(_0x413579,0x8),_0x5000fd[_0x4aee46(0x1ea)]='',_0x5000fd[_0x4aee46(0x299)]=![];if(_0x5000fd['coin']!=config[_0x4aee46(0x265)]){if(_0x5000fd[_0x4aee46(0x2d9)]>_0x46fc53)_0x5000fd[_0x4aee46(0x1ea)]='sell',_0x5000fd[_0x4aee46(0x299)]=checkMinimums(_0x5000fd);else _0x5000fd[_0x4aee46(0x2d9)]<_0x46fc53&&(_0x5000fd[_0x4aee46(0x1ea)]=_0x4aee46(0x2cb),_0x5000fd[_0x4aee46(0x299)]=checkMinimums(_0x5000fd));}_0x5000fd[_0x4aee46(0x2e5)]=_0x5000fd[_0x4aee46(0x2d9)]/_0x5000fd['target']-0x1;if(_0x5000fd['orderstatus']==_0x4aee46(0x32a)||_0x5000fd['orderstatus']==_0x4aee46(0x337))_0x5000fd[_0x4aee46(0x1fd)]=_0x4aee46(0x255);}),currentCoins[_0x142341(0x365)]((_0x31be62,_0x53fed0)=>_0x31be62[_0x142341(0x2e5)]<_0x53fed0[_0x142341(0x2e5)]?0x1:_0x53fed0['delta']<_0x31be62[_0x142341(0x2e5)]?-0x1:0x0);const _0x2f0e7d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2f0e7d[_0x142341(0x2bd)],'usd':_0x2f0e7d[_0x142341(0x34e)],'portfolio':JSON[_0x142341(0x1e9)](currentCoins),'threshold':_0x1388d2},proxyEmit(_0x142341(0x305),{'serverversion':serverversion,'balances':lastBalances});if(_0x633403){if(config[_0x142341(0x28b)])headlessMode({'portfolio':currentCoins,'threshold':_0x1388d2});else{if(lockOrders==ORDERS[_0x142341(0x1d3)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1388d2});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x411429=getNormalizedPerformance();getStartingBalances(_0x411429),emitPerformance(_0x411429);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x528575=getNormalizedPerformance();emitPerformance(_0x528575),getStartingBalances(_0x528575),logger[_0x142341(0x2f2)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2893bf=_0x50ddff;if(!lastBalances)return;let _0x2df6d8=[],_0x140518,_0x344728=JSON['parse'](lastBalances[_0x2893bf(0x2b5)]);_0x344728[_0x2893bf(0x365)]((_0x285ebf,_0x3813df)=>_0x285ebf['coin']>_0x3813df[_0x2893bf(0x35e)]?0x1:_0x3813df['coin']>_0x285ebf[_0x2893bf(0x35e)]?-0x1:0x0),_0x344728[_0x2893bf(0x24b)](_0x521ac4=>{const _0x368f2a=_0x2893bf;let _0x180e70={'coin':_0x521ac4[_0x368f2a(0x35e)],'number':_0x521ac4['number'],'price':_0x521ac4['last']};_0x2df6d8[_0x368f2a(0x1f2)](_0x180e70);});const _0x26284f=await getFiat();_0x140518={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x26284f[_0x2893bf(0x2bd)],'usd':_0x26284f[_0x2893bf(0x34e)],'coins':_0x2df6d8};let _0x441d79=dbPerformance[_0x2893bf(0x2f8)](_0x2893bf(0x21a))[_0x2893bf(0x25e)]({'date':_0x140518['date']})[_0x2893bf(0x2f7)]();_0x441d79?_0x140518[_0x2893bf(0x313)]!=config[_0x2893bf(0x2e1)]&&dbPerformance[_0x2893bf(0x2f8)](_0x2893bf(0x21a))['find']({'date':_0x140518['date']})[_0x2893bf(0x28a)](_0x140518)['write']():dbPerformance[_0x2893bf(0x2f8)](_0x2893bf(0x21a))[_0x2893bf(0x1f2)](_0x140518)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2a319c=_0x50ddff;let _0x5c83b9=[];if(dbPerformance['has'](_0x2a319c(0x21a))['value']()){let _0x2addca=dbPerformance[_0x2a319c(0x2f8)](_0x2a319c(0x21a))[_0x2a319c(0x351)]()['filter'](_0x5b63ba=>{const _0x444adf=_0x2a319c;if(_0x5b63ba['coins'][_0x444adf(0x212)]==0x0)return![];else return!![];})[_0x2a319c(0x270)](_0x2a319c(0x313))[_0x2a319c(0x2f7)](),_0x3ff74b=[...config[_0x2a319c(0x1c6)]];_0x3ff74b[_0x2a319c(0x365)]((_0x1f739d,_0x408688)=>_0x1f739d[_0x2a319c(0x313)]>_0x408688[_0x2a319c(0x313)]?-0x1:_0x408688['date']>_0x1f739d[_0x2a319c(0x313)]?0x1:0x0);let _0x209390=0x1,_0x351d4b=[],_0x4774f1=0x0;_0x2addca[_0x2a319c(0x35c)]()[_0x2a319c(0x23c)]()[_0x2a319c(0x24b)]((_0x35561f,_0x25439f)=>{const _0x2164a1=_0x2a319c;if(_0x3ff74b[_0x4774f1]){if(_0x2addca[_0x2addca['length']-_0x25439f]&&_0x3ff74b[_0x4774f1][_0x2164a1(0x313)]==_0x2addca[_0x2addca[_0x2164a1(0x212)]-_0x25439f][_0x2164a1(0x313)]){if(_0x25439f<_0x2addca[_0x2164a1(0x212)]){let _0x1d099a=0x0,_0x14b405=0x0;_0x2addca[_0x2addca[_0x2164a1(0x212)]-_0x25439f]['coins'][_0x2164a1(0x24b)](_0x349c60=>{const _0xf90f2d=_0x2164a1;_0x14b405+=_0x349c60[_0xf90f2d(0x373)]*_0x349c60[_0xf90f2d(0x2fe)];}),_0x3ff74b[_0x4774f1][_0x2164a1(0x1e7)][_0x2164a1(0x24b)](_0x340a87=>{const _0x19324e=_0x2164a1;_0x1d099a+=_0x340a87[_0x19324e(0x373)]*_0x340a87[_0x19324e(0x2fe)];}),_0x209390*=_0x1d099a/(_0x14b405-_0x1d099a)+0x1;}_0x4774f1++;}}let _0x2785be=0x0;_0x35561f[_0x2164a1(0x22e)][_0x2164a1(0x24b)](_0x558427=>{const _0x4c0ecd=_0x2164a1;_0x2785be+=_0x558427[_0x4c0ecd(0x373)]*_0x558427[_0x4c0ecd(0x2fe)];}),_0x351d4b[_0x2addca[_0x2164a1(0x212)]-_0x25439f-0x1]=_0x2785be*(_0x209390-0x1);});let _0x59f6b2=[];_0x3ff74b=[...config[_0x2a319c(0x1c6)]]||[];let _0xc900a2=0x0;_0x4774f1=0x0,_0x2addca[_0x2a319c(0x24b)]((_0x419b52,_0x5b2e36)=>{const _0x204f04=_0x2a319c;if(_0x3ff74b[_0x4774f1]){const _0x1f6295=fns[_0x204f04(0x1d4)](_0x3ff74b[_0x4774f1]['date'],_0x204f04(0x2ca),new Date()),_0x140c77=fns[_0x204f04(0x1d4)](_0x419b52[_0x204f04(0x313)],_0x204f04(0x2ca),new Date());if(fns['isEqual'](_0x1f6295,_0x140c77)){let _0x524b5f=0x0;_0x3ff74b[_0x4774f1]['changes'][_0x204f04(0x24b)](_0x588192=>{const _0x279970=_0x204f04;!_0x59f6b2[_0x588192['coin']]?_0x59f6b2[_0x588192[_0x279970(0x35e)]]=_0x588192[_0x279970(0x373)]:(_0x524b5f=_0x59f6b2[_0x588192['coin']],_0x59f6b2[_0x588192['coin']]+=_0x588192[_0x279970(0x373)]);const _0x168fb6=_0x419b52[_0x279970(0x22e)][_0x279970(0x25e)](_0x5e79a4=>_0x5e79a4[_0x279970(0x35e)]==_0x588192[_0x279970(0x35e)]);(!_0x168fb6||_0x168fb6[_0x279970(0x373)]==0x0)&&(_0xc900a2+=(-_0x588192[_0x279970(0x373)]-_0x524b5f)*_0x588192[_0x279970(0x2fe)]);}),_0x4774f1++;}}_0x419b52[_0x204f04(0x22e)][_0x204f04(0x24b)]((_0x28fd42,_0x5d1cba)=>{const _0x4282b3=_0x204f04;_0x59f6b2[_0x28fd42[_0x4282b3(0x35e)]]&&(_0x28fd42['initial']=_0x59f6b2[_0x28fd42[_0x4282b3(0x35e)]]);}),_0x5c83b9['push']({'date':_0x419b52['date'],'eur':_0x419b52['eur'],'usd':_0x419b52[_0x204f04(0x34e)],'offset':_0x351d4b[_0x5b2e36],'netoffset':_0xc900a2,'coins':_0x419b52[_0x204f04(0x22e)]});});}return _0x5c83b9;}function emitPerformance(_0x1209b4){const _0x23fb9d=_0x50ddff;_0x1209b4[_0x23fb9d(0x212)]!==0x0?(proxyEmit(_0x23fb9d(0x23a),_0x1209b4),lastPerformanceEmitted=getDate()):proxyEmit(_0x23fb9d(0x23a),[]);}function getPerf(_0x27a212,_0x575647){const _0xc65b36=_0x50ddff;let _0x584fea=0x0,_0x47e40a=0x0,_0x43a499=0x0;_0x27a212[_0xc65b36(0x22e)]['forEach'](_0x4ae2ef=>{const _0x19ff1e=_0xc65b36;_0x584fea+=_0x4ae2ef[_0x19ff1e(0x373)]*_0x4ae2ef[_0x19ff1e(0x2fe)];});_0x575647&&(_0x584fea+=_0x27a212['offset']);if(config[_0xc65b36(0x265)]===_0xc65b36(0x2a5)||config['basecoin']===_0xc65b36(0x35b)||config['basecoin']===_0xc65b36(0x26e))_0x47e40a=_0x584fea*_0x27a212[_0xc65b36(0x2bd)],_0x43a499=_0x584fea*_0x27a212[_0xc65b36(0x34e)];else{if(usdBasecoins[_0xc65b36(0x2ae)](config[_0xc65b36(0x265)]))_0x47e40a=_0x584fea*_0x27a212[_0xc65b36(0x2bd)]/_0x27a212[_0xc65b36(0x34e)],_0x43a499=_0x584fea;else config[_0xc65b36(0x265)]===_0xc65b36(0x1dd)&&(_0x47e40a=_0x584fea,_0x43a499=_0x584fea*_0x27a212[_0xc65b36(0x34e)]/_0x27a212[_0xc65b36(0x2bd)]);}return[_0x584fea,_0x47e40a,_0x43a499];}function getKPIs(_0x3c3f73,_0x2470b7=_0x50ddff(0x1dd)){const _0x4c2379=_0x50ddff,_0x2ad808=config[_0x4c2379(0x265)],_0x58c6b7=lastBalances,_0x444c21=currentCoins,_0x5cf5c1=getNormalizedPerformance(),_0x32673c=_0x3c3f73===_0x4c2379(0x265)?_0x2ad808:_0x3c3f73===_0x4c2379(0x376)||_0x3c3f73===_0x4c2379(0x1d1)?_0x2470b7:_0x4c2379(0x368)+_0x2ad808,_0x2f0cff=_0x3c3f73===_0x4c2379(0x2ed)?_0x4c2379(0x2fd):_0x3c3f73==='net-fiat'?_0x4c2379(0x2fd):_0x32673c+'\x20value',_0x5988cf=_0x3c3f73==='net-basecoin'||_0x3c3f73==='net-fiat'?'Net\x20effect':_0x32673c+'\x20change';let _0x479cf6=0x0;_0x444c21[_0x4c2379(0x24b)](_0x44c565=>{const _0x2f172c=_0x4c2379;_0x479cf6+=_0x44c565[_0x2f172c(0x373)]*_0x44c565['last'];});if(_0x3c3f73===_0x4c2379(0x376)||_0x3c3f73===_0x4c2379(0x1d1)){if(_0x2ad808==='BTC'||_0x2ad808==='ETH'||_0x2ad808===_0x4c2379(0x26e))_0x479cf6=_0x479cf6*(_0x2470b7==='EUR'?_0x58c6b7['eur']:_0x58c6b7[_0x4c2379(0x34e)]);else{if(usdBasecoins[_0x4c2379(0x2ae)](_0x2ad808))_0x479cf6=_0x479cf6*(_0x2470b7===_0x4c2379(0x1dd)?_0x58c6b7[_0x4c2379(0x2bd)]/_0x58c6b7[_0x4c2379(0x34e)]:0x1);else _0x2ad808==='EUR'&&(_0x479cf6=_0x479cf6*(_0x2470b7===_0x4c2379(0x1dd)?0x1:_0x58c6b7['usd']/_0x58c6b7[_0x4c2379(0x2bd)]));}}let _0x193e37;if(_0x479cf6!==0x0){if(_0x3c3f73===_0x4c2379(0x265))_0x193e37=(_0x479cf6/startingBalances[_0x4c2379(0x265)]-0x1)*0x64;else{if(_0x2470b7===_0x4c2379(0x1dd))_0x193e37=(_0x479cf6/startingBalances[_0x4c2379(0x2bd)]-0x1)*0x64;else _0x193e37=(_0x479cf6/startingBalances[_0x4c2379(0x34e)]-0x1)*0x64;}let _0x2de779=0x0;if(startingBalances[_0x4c2379(0x22e)])_0x444c21[_0x4c2379(0x24b)](_0x5e3d59=>{const _0x26aa62=_0x4c2379;let _0x2294aa=startingBalances[_0x26aa62(0x22e)][_0x26aa62(0x25e)](_0x149c62=>_0x149c62[_0x26aa62(0x35e)]===_0x5e3d59[_0x26aa62(0x35e)]);if(_0x2294aa&&_0x2294aa[_0x26aa62(0x35e)]&&_0x5e3d59[_0x26aa62(0x373)]!==0x0)_0x2de779+=_0x2294aa[_0x26aa62(0x373)]*_0x5e3d59['last'];});let _0x17f62b=0x0;if(_0x5cf5c1['length']!==0x0){let _0x1ce4a4=_0x5cf5c1[_0x5cf5c1[_0x4c2379(0x212)]-0x1];_0x17f62b=_0x1ce4a4[_0x4c2379(0x28e)];}_0x2de779-=_0x17f62b;_0x3c3f73===_0x4c2379(0x2ed)&&(_0x193e37=(_0x479cf6-_0x2de779)/startingBalances['basecoin']*0x64,_0x479cf6=_0x479cf6-_0x2de779);if(_0x3c3f73===_0x4c2379(0x1d1)){let _0x50dc01=_0x2470b7===_0x4c2379(0x1dd)?startingBalances[_0x4c2379(0x2bd)]:startingBalances['usd'];if(_0x2ad808===_0x4c2379(0x2a5)||_0x2ad808==='ETH'||_0x2ad808===_0x4c2379(0x26e))_0x2de779=_0x2470b7===_0x4c2379(0x1dd)?_0x2de779*_0x58c6b7[_0x4c2379(0x2bd)]:_0x2de779*_0x58c6b7[_0x4c2379(0x34e)];else{if(usdBasecoins['includes'](_0x2ad808))_0x2de779=_0x2470b7===_0x4c2379(0x1dd)?_0x2de779*_0x58c6b7['eur']/_0x58c6b7['usd']:_0x2de779;else _0x2ad808===_0x4c2379(0x1dd)&&(_0x2de779=_0x2470b7==='EUR'?_0x2de779:_0x2de779*_0x58c6b7['usd']/_0x58c6b7['eur']);}_0x193e37=(_0x479cf6-_0x2de779)/_0x50dc01*0x64,_0x479cf6=_0x479cf6-_0x2de779;}if(_0x193e37){if(_0x193e37<0x64)_0x193e37=_0x193e37[_0x4c2379(0x22d)](0x2);else{if(_0x193e37<0x3e8)_0x193e37=_0x193e37['toFixed'](0x1);else _0x193e37=_0x193e37[_0x4c2379(0x22d)](0x0);}}else _0x193e37=Number('0')[_0x4c2379(0x22d)](0x2);if(_0x479cf6){if(Math['abs'](_0x479cf6)<0.000001)_0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x2);else{if(Math[_0x4c2379(0x25f)](_0x479cf6)<0.1)_0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x6);else{if(Math[_0x4c2379(0x25f)](_0x479cf6)<0x1)_0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x5);else{if(Math[_0x4c2379(0x25f)](_0x479cf6)<0xa)_0x479cf6=_0x479cf6['toFixed'](0x4);else{if(Math[_0x4c2379(0x25f)](_0x479cf6)<0x64)_0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x3);else{if(Math[_0x4c2379(0x25f)](_0x479cf6)<0x3e8)_0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x2);else _0x479cf6=_0x479cf6[_0x4c2379(0x22d)](0x2);}}}}}}else _0x479cf6=Number('0')['toFixed'](0x2);}else _0x193e37=Number('0')[_0x4c2379(0x22d)](0x2);return{'value':_0x479cf6,'change':_0x193e37,'leftTxt':_0x2f0cff,'rightTxt':_0x5988cf};}async function getStartingBalances(_0x203f82,_0x2a9712=!![]){const _0x4aaae4=_0x50ddff;if(_0x203f82[_0x4aaae4(0x212)]!==0x0){const [_0x404cbd,_0x1ef1e3,_0x3b5196]=getPerf(_0x203f82[0x0],!![]);let _0x45931d=[];config[_0x4aaae4(0x2b5)][_0x4aaae4(0x24b)](_0x128f9a=>{const _0x12f7c9=_0x4aaae4;let _0x153e42=0x0,_0x6489fe;config[_0x12f7c9(0x1c6)][_0x12f7c9(0x24b)](_0x39dcdd=>{const _0xa3c38=_0x12f7c9;let _0xf5cf9f=_0x39dcdd[_0xa3c38(0x1e7)]['find'](_0x280982=>_0x280982[_0xa3c38(0x35e)]==_0x128f9a[_0xa3c38(0x35e)]);if(_0xf5cf9f){_0x153e42+=_0xf5cf9f[_0xa3c38(0x373)];if(!_0x6489fe)_0x6489fe=_0xf5cf9f[_0xa3c38(0x2fe)];}}),_0x45931d[_0x12f7c9(0x1f2)]({'coin':_0x128f9a[_0x12f7c9(0x35e)],'number':_0x153e42,'initialprice':_0x6489fe});});const _0x1f0d96={'basecoin':_0x404cbd,'eur':_0x1ef1e3,'usd':_0x3b5196,'coins':_0x45931d};if(_0x2a9712)proxyEmit(_0x4aaae4(0x33b),_0x1f0d96);startingBalances=_0x1f0d96;}}function headlessMode(_0x300e02){const _0x5624da=_0x50ddff;let _0x223be=_0x300e02[_0x5624da(0x2b5)],_0x494c18=_0x300e02[_0x5624da(0x292)],_0x18c821=[];for(let _0x2b838d of _0x223be){if(_0x2b838d[_0x5624da(0x35e)]!=config['basecoin']){if(_0x2b838d[_0x5624da(0x2e5)]>=_0x494c18/0x64){if(_0x2b838d['valid'])_0x18c821[_0x5624da(0x1f2)](_0x2b838d);}else{if(_0x2b838d['delta']<=-_0x494c18/0x64){if(_0x2b838d[_0x5624da(0x299)])_0x18c821[_0x5624da(0x1f2)](_0x2b838d);}}}}_0x18c821[_0x5624da(0x212)]>0x0&&(lockOrders==ORDERS[_0x5624da(0x1d3)]&&!coolingDown&&_0x18c821[_0x5624da(0x24b)](_0x18dd33=>{const _0x2081be=_0x5624da;logger['debug']('Trigger:\x20'+_0x18dd33[_0x2081be(0x35e)]+'\x20'+_0x18dd33[_0x2081be(0x373)]+'\x20'+_0x18dd33[_0x2081be(0x36b)]+'\x20'+_0x18dd33['distribution']+'%\x20'+_0x18dd33[_0x2081be(0x1de)]+'%\x20'+(0x64*_0x18dd33['delta'])[_0x2081be(0x22d)](0x2)+_0x2081be(0x2e8)+_0x494c18[_0x2081be(0x22d)](0x2)+'%)');}),placeOrder(_0x18c821));}function notifyBalance(_0xf662a6){const _0x2562f0=_0x50ddff;let _0x23cedb=_0xf662a6['portfolio'],_0x42cf84=_0xf662a6[_0x2562f0(0x292)],_0x2d6270=[];for(let _0x293cf4 of _0x23cedb){if(_0x293cf4[_0x2562f0(0x35e)]!=config[_0x2562f0(0x265)]){if(_0x293cf4[_0x2562f0(0x2e5)]>=_0x42cf84/0x64){if(_0x293cf4[_0x2562f0(0x299)])_0x2d6270[_0x2562f0(0x1f2)](_0x293cf4);}else{if(_0x293cf4[_0x2562f0(0x2e5)]<=-_0x42cf84/0x64){if(_0x293cf4[_0x2562f0(0x299)])_0x2d6270['push'](_0x293cf4);}}}}if(_0x2d6270['length']>0x0){let _0x43bf4c=_0x2d6270[_0x2562f0(0x1db)](_0x455b79=>_0x455b79[_0x2562f0(0x35e)]);_0x43bf4c[_0x2562f0(0x365)]();let _0x2a12fa=_0x43bf4c[_0x2562f0(0x27b)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2562f0(0x24f),_0x2562f0(0x258));lastCoinsToBalance=_0x2a12fa;}}function symbolToCoin(_0x4f8d43){const _0xa05180=_0x50ddff;let _0x5a3ee4;if(_0x4f8d43[_0xa05180(0x2ae)]('/'+config[_0xa05180(0x265)]))_0x5a3ee4=_0x4f8d43[_0xa05180(0x298)]('/'+config[_0xa05180(0x265)],'');if(_0x4f8d43['includes'](config[_0xa05180(0x265)]+'/'))_0x5a3ee4=_0x4f8d43[_0xa05180(0x298)](config[_0xa05180(0x265)]+'/','');return _0x5a3ee4;}async function unlockOrders(){const _0x6ffb0b=_0x50ddff;if(allOrdersPlaced&&lockOrders==ORDERS[_0x6ffb0b(0x274)]){logger['debug'](_0x6ffb0b(0x1f3)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x574135=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x574135,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x6ffb0b(0x1d3)],logger['debug'](_0x6ffb0b(0x2a9));}}async function validateOrders(_0x2fa129){const _0x4c8a8a=_0x50ddff;if(_0x2fa129)validateOrdersState=_0x2fa129;logger[_0x4c8a8a(0x2f2)](_0x4c8a8a(0x282)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x4c8a8a(0x2f1):_0x4c8a8a(0x36f)));let _0x2b6d15=[],_0x21dac8=config[_0x4c8a8a(0x267)]==_0x4c8a8a(0x25d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4c8a8a(0x1f9)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4c8a8a(0x274)])return;logger[_0x4c8a8a(0x2f2)](_0x4c8a8a(0x34b)+validateOrdersState),lastOrders[_0x4c8a8a(0x24b)](_0x474efa=>{const _0x367d0b=_0x4c8a8a;let _0x5ee60d=![];_0x474efa['filled']>0x0&&(_0x5ee60d=!![]),_0x2b6d15[_0x367d0b(0x1f2)](_0x5ee60d),_0x5ee60d&&config[_0x367d0b(0x267)]!=_0x367d0b(0x25d)&&logHistory(_0x367d0b(0x1dc),_0x367d0b(0x201)+_0x474efa[_0x367d0b(0x332)]+'\x20'+_0x474efa['side']+'\x20#'+formatResult(_0x474efa[_0x367d0b(0x32a)],0x8)+'\x20@'+formatResult(_0x474efa[_0x367d0b(0x2fe)],0x8));}),_0x2b6d15['forEach']((_0x561837,_0x3103a6)=>{const _0x4c986c=_0x4c8a8a;if(_0x561837)lastOrders[_0x4c986c(0x26c)](_0x3103a6,0x1);}),persistOpenOrders(lastOrders);const _0x56e9a8=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x4c8a8a(0x1f7);if(validateOrdersState==_0x4c8a8a(0x1e2)){validateOrdersState='ongoing';if(_0x2b6d15[_0x4c8a8a(0x2ae)](![])){if(config[_0x4c8a8a(0x267)]==_0x4c8a8a(0x25d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4c8a8a(0x277)){if(_0x2b6d15[_0x4c8a8a(0x2ae)](![])){}else{if(allOrdersPlaced){if(config[_0x4c8a8a(0x267)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x2b6d15[_0x4c8a8a(0x2ae)](![])&&(config[_0x4c8a8a(0x267)]==_0x4c8a8a(0x25d)?logHistory('success',_0x4c8a8a(0x2ec)+Math[_0x4c8a8a(0x1cd)](_0x21dac8*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x56e9a8):(await cancelOrders(),logHistory('success',_0x4c8a8a(0x355)+Math[_0x4c8a8a(0x1cd)](_0x21dac8*validateOrderInterval/0xea60)+_0x4c8a8a(0x2ac)+_0x56e9a8))),await unlockOrders();else{if(validateOrdersState==_0x4c8a8a(0x2fb)){if(config[_0x4c8a8a(0x267)]!=_0x4c8a8a(0x25d))logHistory('success',_0x4c8a8a(0x227)+_0x56e9a8);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x51d742=>{const _0x32a2ae=_0x14b2;try{const _0x4c788e=await exchange['cancelOrder'](_0x51d742[_0x32a2ae(0x300)],_0x51d742['symbol']);}catch(_0x25a32b){if(_0x25a32b[_0x32a2ae(0x30b)]()[_0x32a2ae(0x2ae)](_0x32a2ae(0x318))){}else await handleError(_0x25a32b,_0x32a2ae(0x215));}});}async function initCoinResults(_0x44cb2f){const _0x3bcf81=_0x50ddff;_0x44cb2f?logger[_0x3bcf81(0x2f2)](_0x3bcf81(0x343)+_0x44cb2f):logger[_0x3bcf81(0x2f2)](_0x3bcf81(0x29f)),config[_0x3bcf81(0x2b5)]['forEach'](_0x2a29bd=>{const _0x13dea2=_0x3bcf81;if(!_0x2a29bd['excluded']&&_0x2a29bd[_0x13dea2(0x35e)]!=config[_0x13dea2(0x265)]){const _0x22c6be=currentCoins[_0x13dea2(0x25e)](_0x964609=>_0x964609['coin']==_0x2a29bd['coin']),_0x11cc25=global[_0x13dea2(0x2cf)][noslash(_0x2a29bd['symbol'])];let _0x3e2442=_0x22c6be?_0x22c6be[_0x13dea2(0x373)]:null,_0x2e72a1=_0x2a29bd['reverse']?0x1/_0x11cc25:_0x11cc25,_0x268e77;config[_0x13dea2(0x1c6)][_0x13dea2(0x24b)](_0x25b76c=>{const _0x56a24c=_0x13dea2;!_0x268e77&&(_0x268e77=_0x25b76c[_0x56a24c(0x1e7)][_0x56a24c(0x25e)](_0x4007f5=>_0x4007f5['coin']==_0x2a29bd[_0x56a24c(0x35e)]),_0x268e77&&(_0x3e2442=_0x268e77[_0x56a24c(0x373)],_0x2e72a1=_0x268e77[_0x56a24c(0x2fe)]));});let _0xd5282f=dbCoinResults[_0x13dea2(0x2f8)](_0x13dea2(0x22e))['find']({'coin':_0x2a29bd['coin']})[_0x13dea2(0x2f7)]();if(!_0xd5282f){const _0x922590={'coin':_0x2a29bd[_0x13dea2(0x35e)],'number':_0x3e2442,'breakeven':_0x2e72a1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x13dea2(0x2f8)](_0x13dea2(0x22e))['push'](_0x922590)['write']();}else{if(_0x44cb2f&&_0x2a29bd[_0x13dea2(0x35e)]==_0x44cb2f){const _0x175003={'coin':_0x2a29bd['coin'],'number':_0x3e2442,'breakeven':_0x2e72a1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x13dea2(0x22e))[_0x13dea2(0x25e)]({'coin':_0x2a29bd[_0x13dea2(0x35e)]})[_0x13dea2(0x28a)](_0x175003)['write']();}}}});}async function updateCoinResults(_0x227e71,_0x1e7140=![]){const _0x31c472=_0x50ddff;let _0x19803b,_0x372557,_0x4028bd,_0x49f944,_0x57ed08,_0x5f2194,_0x54abc0=dbCoinResults[_0x31c472(0x2f8)](_0x31c472(0x22e))[_0x31c472(0x25e)]({'coin':_0x227e71[_0x31c472(0x35e)]})['value'](),_0x42f17d=![];_0x54abc0&&Object[_0x31c472(0x250)](_0x54abc0)['forEach'](([_0x412dff,_0x50d242])=>{if(_0x50d242==null)_0x42f17d=!![];});(!_0x54abc0||_0x42f17d)&&(await initCoinResults(_0x227e71[_0x31c472(0x35e)]),_0x54abc0=dbCoinResults[_0x31c472(0x2f8)](_0x31c472(0x22e))[_0x31c472(0x25e)]({'coin':_0x227e71[_0x31c472(0x35e)]})[_0x31c472(0x2f7)]());_0x227e71['reverse']&&(_0x5f2194={'filled':_0x227e71[_0x31c472(0x32a)]*_0x227e71[_0x31c472(0x2fe)],'amount':_0x227e71['filled']*_0x227e71['price'],'side':_0x227e71[_0x31c472(0x1ea)]==_0x31c472(0x1f1)?'buy':_0x31c472(0x1f1),'price':0x1/_0x227e71['price']},_0x227e71={..._0x227e71,..._0x5f2194});_0x1e7140?_0x372557=_0x227e71['side']==_0x31c472(0x2cb)?_0x54abc0[_0x31c472(0x373)]+_0x227e71[_0x31c472(0x32a)]:_0x54abc0[_0x31c472(0x373)]-_0x227e71['filled']:_0x372557=await getCoinNumber(_0x227e71[_0x31c472(0x35e)]);if(_0x227e71['fee']&&_0x227e71['fee'][_0x31c472(0x328)]==config[_0x31c472(0x265)])_0x19803b=_0x227e71[_0x31c472(0x1cc)][_0x31c472(0x2d8)];else{if(_0x227e71[_0x31c472(0x1cc)]&&_0x227e71['fee'][_0x31c472(0x328)]==_0x31c472(0x1d2)&&!_0x1e7140&&config[_0x31c472(0x265)]!='PAXG')_0x19803b=_0x227e71['fee']['cost']*global[_0x31c472(0x2cf)][_0x31c472(0x1d2)+config['basecoin']];else _0x19803b=defaultFee*_0x227e71[_0x31c472(0x32a)]*_0x227e71['price'];}_0x227e71[_0x31c472(0x1ea)]==_0x31c472(0x2cb)?(_0x4028bd=_0x372557!=0x0?(_0x54abc0[_0x31c472(0x26f)]*_0x54abc0[_0x31c472(0x373)]+_0x227e71['price']*(_0x372557-_0x54abc0['number'])+_0x19803b)/_0x372557:0x0,_0x49f944=_0x54abc0[_0x31c472(0x214)]):(_0x4028bd=_0x372557!=0x0?(_0x54abc0[_0x31c472(0x26f)]*_0x54abc0[_0x31c472(0x373)]-_0x227e71[_0x31c472(0x2fe)]*(_0x54abc0['number']-_0x372557)+_0x19803b)/_0x372557:0x0,_0x49f944=_0x54abc0[_0x31c472(0x214)]+(_0x227e71[_0x31c472(0x2fe)]-_0x54abc0[_0x31c472(0x26f)])*_0x227e71[_0x31c472(0x32a)]);_0x57ed08=(_0x227e71[_0x31c472(0x2fe)]-_0x4028bd-_0x19803b/_0x227e71[_0x31c472(0x32a)])*_0x372557;let _0x424962={'coin':_0x227e71['coin'],'number':_0x372557,'breakeven':formatResult(_0x4028bd,0x8),'realized':formatResult(_0x49f944,0x8),'unrealized':formatResult(_0x57ed08,0x8),'fees':formatResult(_0x54abc0[_0x31c472(0x251)]+_0x19803b,0x8),'sells':_0x227e71[_0x31c472(0x1ea)]=='sell'?_0x54abc0[_0x31c472(0x224)]+0x1:_0x54abc0[_0x31c472(0x224)],'buys':_0x227e71[_0x31c472(0x1ea)]=='buy'?_0x54abc0[_0x31c472(0x20f)]+0x1:_0x54abc0[_0x31c472(0x20f)]};dbCoinResults[_0x31c472(0x2f8)]('coins')[_0x31c472(0x25e)]({'coin':_0x227e71['coin']})[_0x31c472(0x28a)](_0x424962)[_0x31c472(0x2a8)]();if(!_0x1e7140){if(_0x227e71['fee']&&_0x227e71[_0x31c472(0x1cc)]['currency']==_0x31c472(0x1d2)){const _0x782531=currentCoins['find'](_0x600c0a=>_0x600c0a[_0x31c472(0x35e)]==_0x31c472(0x1d2));if(_0x782531){let _0x12b162=dbCoinResults[_0x31c472(0x2f8)](_0x31c472(0x22e))[_0x31c472(0x25e)]({'coin':_0x31c472(0x1d2)})[_0x31c472(0x2f7)]();_0x424962={..._0x12b162,'number':_0x782531[_0x31c472(0x373)]},dbCoinResults[_0x31c472(0x2f8)]('coins')[_0x31c472(0x25e)]({'coin':_0x31c472(0x1d2)})[_0x31c472(0x28a)](_0x424962)[_0x31c472(0x2a8)]();}}}}async function placeOrder(_0x2cebc2){const _0x2d78d4=_0x50ddff,_0x37d1b9=config['ordertype']==_0x2d78d4(0x25d)?_0x2d78d4(0x25d):_0x2d78d4(0x20e);if(lockOrders==ORDERS[_0x2d78d4(0x1d3)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x2d78d4(0x274)],allOrdersPlaced=![],validateOrdersState=_0x2d78d4(0x1e2);let _0x7943c3=![];lastOrders=[];for(const _0x2b3a75 of _0x2cebc2){let _0x358cbd,_0x1a931d,_0x1ab039,_0x5d3f16,_0x141602,_0x3bd505=_0x2b3a75[_0x2d78d4(0x332)];try{const _0xa2563b=await exchange[_0x2d78d4(0x1c9)](_0x3bd505);_0x358cbd=_0x2b3a75[_0x2d78d4(0x23c)]?0x1/_0x2b3a75['last']:_0x2b3a75[_0x2d78d4(0x36b)],_0x1a931d=_0xa2563b[_0x2d78d4(0x23e)],_0x1ab039=_0xa2563b[_0x2d78d4(0x280)];_0x2b3a75['reverse']?(_0x5d3f16=_0x2b3a75[_0x2d78d4(0x1ea)]=='buy'?_0x2d78d4(0x1f1):_0x2d78d4(0x2cb),_0x141602=Math['abs'](_0x2b3a75[_0x2d78d4(0x1c7)])/_0x358cbd):(_0x5d3f16=_0x2b3a75['side'],_0x141602=Math[_0x2d78d4(0x25f)](_0x2b3a75[_0x2d78d4(0x1c7)]));_0x37d1b9==_0x2d78d4(0x20e)&&(config[_0x2d78d4(0x267)]==_0x2d78d4(0x1ed)&&(_0x358cbd=_0x5d3f16=='buy'?_0x1a931d:_0x1ab039),config[_0x2d78d4(0x267)]==_0x2d78d4(0x333)&&(_0x358cbd=_0x5d3f16==_0x2d78d4(0x2cb)?_0x1ab039:_0x1a931d));_0x141602=formatResult(_0x141602,0x8),_0x358cbd=formatResult(_0x358cbd,0x8);const _0x177763=_0x5d3f16=='sell'?config[_0x2d78d4(0x1fe)]?String['fromCodePoint']('0x'+config[_0x2d78d4(0x1fe)])+'\x20':'':config[_0x2d78d4(0x31b)]?String[_0x2d78d4(0x2e9)]('0x'+config[_0x2d78d4(0x31b)])+'\x20':'',_0x1f60ce=_0x37d1b9==_0x2d78d4(0x25d)?_0x2d78d4(0x375):config[_0x2d78d4(0x267)]==_0x2d78d4(0x1ed)?_0x2d78d4(0x1e4):_0x2d78d4(0x2ab),_0x45dfdc=(Math[_0x2d78d4(0x296)](Math[_0x2d78d4(0x2a1)]()*0x35a4e900)+0x5f5e100)[_0x2d78d4(0x30b)]();lastOrders[_0x2d78d4(0x1f2)]({'customId':_0x45dfdc,'symbol':_0x3bd505,'coin':_0x2b3a75[_0x2d78d4(0x35e)],'amount':_0x141602,'price':_0x358cbd,'side':_0x5d3f16,'reverse':_0x2b3a75['reverse'],'filled':0x0});if(_0x37d1b9==_0x2d78d4(0x25d))logHistory('order',''+_0x177763+_0x1f60ce+'\x20order:\x20'+_0x3bd505+'\x20'+_0x5d3f16+'\x20#'+formatResult(_0x141602,0x8)+'\x20@'+formatResult(_0x358cbd,0x8));else logHistory(_0x2d78d4(0x1dc),''+_0x177763+_0x1f60ce+_0x2d78d4(0x306)+_0x3bd505+'\x20'+_0x5d3f16+'\x20#'+formatResult(_0x141602,0x8)+'\x20@'+formatResult(_0x358cbd,0x8));let _0x356039;_0x37d1b9==_0x2d78d4(0x25d)?_0x5d3f16=='buy'&&['Bybit',_0x2d78d4(0x29d),_0x2d78d4(0x275),_0x2d78d4(0x32f),_0x2d78d4(0x350)][_0x2d78d4(0x2ae)](config[_0x2d78d4(0x301)])?_0x356039=await exchange[_0x2d78d4(0x232)](_0x3bd505,_0x37d1b9,_0x5d3f16,_0x141602,_0x358cbd):_0x356039=await exchange[_0x2d78d4(0x232)](_0x3bd505,_0x37d1b9,_0x5d3f16,_0x141602,undefined):_0x356039=await exchange[_0x2d78d4(0x232)](_0x3bd505,_0x37d1b9,_0x5d3f16,_0x141602,_0x358cbd);logger[_0x2d78d4(0x2f2)](_0x2d78d4(0x269)+_0x356039['id']+_0x2d78d4(0x362)+_0x45dfdc);const _0x2968f3=lastOrders[_0x2d78d4(0x212)]-0x1;if(_0x2968f3>=0x0&&lastOrders[_0x2968f3]['customId']==_0x45dfdc){lastOrders[_0x2968f3]['orderId']=_0x356039['id'];if(_0x356039[_0x2d78d4(0x361)])lastOrders[_0x2968f3][_0x2d78d4(0x361)]=_0x356039[_0x2d78d4(0x361)];if(_0x356039['price'])lastOrders[_0x2968f3][_0x2d78d4(0x2fe)]=_0x356039[_0x2d78d4(0x2fe)];lastOrders[_0x2968f3][_0x2d78d4(0x1cc)]=_0x356039[_0x2d78d4(0x1cc)];}if(config[_0x2d78d4(0x231)]!=0x0){let _0x37443b=null;if(cooldownTracker['length']==config[_0x2d78d4(0x231)]-0x1)_0x37443b=cooldownTracker[_0x2d78d4(0x25c)]();const _0x37f6db=getTimeStamp();cooldownTracker[_0x2d78d4(0x1f2)](_0x37f6db);if(_0x37443b){const _0x460f7d=fns[_0x2d78d4(0x207)](new Date(_0x37f6db),new Date(_0x37443b));if(_0x460f7d<cooldownInterval){logHistory(_0x2d78d4(0x1fc),'Executed\x20'+config[_0x2d78d4(0x231)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x2d78d4(0x2aa)+cooldownPeriod/(0xe10*0x3e8)+_0x2d78d4(0x2b2)),coolingDown=!![];break;}}}}catch(_0x41ebd1){if(_0x41ebd1['toString']()[_0x2d78d4(0x2ae)](_0x2d78d4(0x31d)))lastOrders=lastOrders[_0x2d78d4(0x2b4)](_0x4d9e5a=>_0x4d9e5a[_0x2d78d4(0x332)]!=_0x3bd505),logHistory(_0x2d78d4(0x1fc),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3bd505),_0x7943c3=!![];else{if(_0x41ebd1[_0x2d78d4(0x30b)]()[_0x2d78d4(0x2ae)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x2d78d4(0x2b4)](_0x3b07c8=>_0x3b07c8[_0x2d78d4(0x332)]!=_0x3bd505),logHistory('error',_0x2d78d4(0x223)+_0x3bd505),_0x7943c3=!![];else{if(_0x41ebd1[_0x2d78d4(0x30b)]()[_0x2d78d4(0x2ae)](_0x2d78d4(0x338)))lastOrders=lastOrders[_0x2d78d4(0x2b4)](_0x49bd35=>_0x49bd35[_0x2d78d4(0x332)]!=_0x3bd505),logHistory(_0x2d78d4(0x1fc),_0x2d78d4(0x279)+_0x3bd505),logger[_0x2d78d4(0x2f2)](_0x41ebd1),_0x7943c3=!![];else _0x41ebd1[_0x2d78d4(0x30b)]()[_0x2d78d4(0x2ae)](_0x2d78d4(0x1f0))?(lastOrders=lastOrders[_0x2d78d4(0x2b4)](_0x1380a3=>_0x1380a3[_0x2d78d4(0x332)]!=_0x3bd505),logHistory(_0x2d78d4(0x1fc),_0x2d78d4(0x222)+_0x3bd505),_0x7943c3=!![]):(lastOrders=lastOrders['filter'](_0x301e62=>_0x301e62[_0x2d78d4(0x332)]!=_0x3bd505),await handleError(_0x41ebd1,'placeOrder()',_0x3bd505));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3eee2d=config[_0x2d78d4(0x267)]==_0x2d78d4(0x25d)?validateOrderTimeout*0x3c*0x3e8:config[_0x2d78d4(0x1f9)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xc1e652=_0x2d78d4;validateOrders(_0xc1e652(0x200));},_0x3eee2d);}else unlockOrders();_0x7943c3&&config[_0x2d78d4(0x28b)]&&(logHistory(_0x2d78d4(0x1fc),_0x2d78d4(0x1da)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2d78d4(0x341),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x2d78d4(0x28b)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x2d78d4(0x1d3)]&&(!config[_0x2d78d4(0x28b)]&&(config[_0x2d78d4(0x267)]==_0x2d78d4(0x25d)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x2d78d4(0x1fc),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x176f65){const _0x2a6bc4=_0x50ddff,_0x30a67e={...config,'openOrders':_0x176f65};let _0x4a0c10=dbConfig['get']('bot')['find']({'botID':botID})[_0x2a6bc4(0x2f7)]();_0x4a0c10&&dbConfig[_0x2a6bc4(0x2f8)](_0x2a6bc4(0x217))[_0x2a6bc4(0x25e)]({'botID':botID})['assign'](_0x30a67e)[_0x2a6bc4(0x2a8)]();}function restoreOrders(){const _0x526c01=_0x50ddff;let _0x1d687d;config[_0x526c01(0x364)]&&allOpenOrders[_0x526c01(0x24b)](_0x3b6f31=>{const _0x308c6c=_0x526c01,_0x57b758=config[_0x308c6c(0x364)][_0x308c6c(0x25e)](_0x5063ba=>_0x5063ba[_0x308c6c(0x300)]==_0x3b6f31['id']);_0x57b758&&(lastOrders['push'](_0x57b758),_0x1d687d=_0x3b6f31[_0x308c6c(0x310)]);});if(lastOrders[_0x526c01(0x212)]>0x0){lockOrders=ORDERS[_0x526c01(0x274)],validateOrdersState=_0x526c01(0x277),allOrdersPlaced=!![];const _0x21aaa5=new Date()[_0x526c01(0x1c5)](),_0x2d03df=config['ordertype']==_0x526c01(0x25d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x1d687d+_0x2d03df>_0x21aaa5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4647ee=_0x526c01;validateOrders(_0x4647ee(0x200));},_0x1d687d+_0x2d03df-_0x21aaa5);}else validateOrders(_0x526c01(0x200));}}async function sendMetricsTelegram(){const _0x158e89=_0x50ddff;if(!coinsLoaded){process['send']({'telegrammsg':_0x158e89(0x290)},_0x37b34e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x35e6af='';if(config[_0x158e89(0x346)])_0x35e6af=_0x158e89(0x2fa)+config[_0x158e89(0x2e2)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x35e6af='<b>Bot\x20'+botID+_0x158e89(0x228);const _0x5488a7=getKPIs(_0x158e89(0x265)),_0x1adf9e=getKPIs(_0x158e89(0x376),config[_0x158e89(0x376)]),_0x814086=getKPIs('net-basecoin'),_0x3861c0=getKPIs('net-fiat',config[_0x158e89(0x376)]);_0x35e6af+=_0x158e89(0x21b),_0x35e6af+=_0x5488a7[_0x158e89(0x32c)]+'\x20:\x20'+_0x5488a7[_0x158e89(0x2f7)]+'\x0a',_0x35e6af+=_0x5488a7[_0x158e89(0x34d)]+':\x20'+_0x5488a7[_0x158e89(0x316)]+'%\x0a',_0x35e6af+=_0x1adf9e['leftTxt']+'\x20:\x20'+_0x1adf9e['value']+'\x0a',_0x35e6af+=_0x1adf9e[_0x158e89(0x34d)]+':\x20'+_0x1adf9e[_0x158e89(0x316)]+'%\x0a',_0x35e6af+=_0x814086[_0x158e89(0x32c)]+':\x20'+_0x814086[_0x158e89(0x2f7)]+'\x20('+config[_0x158e89(0x265)]+')\x0a',_0x35e6af+=_0x814086[_0x158e89(0x34d)]+':\x20'+_0x814086[_0x158e89(0x316)]+'%\x20('+config[_0x158e89(0x265)]+')\x0a',_0x35e6af+=_0x3861c0[_0x158e89(0x32c)]+':\x20'+_0x3861c0['value']+'\x20('+config['fiat']+')\x0a',_0x35e6af+=_0x3861c0[_0x158e89(0x34d)]+':\x20'+_0x3861c0[_0x158e89(0x316)]+_0x158e89(0x2e8)+config[_0x158e89(0x376)]+')\x0a',_0x35e6af+='</pre>',process[_0x158e89(0x2de)]({'telegrammsg':_0x35e6af},_0x7c17c3=>{});}async function sendPortfolioTelegram(){const _0x49e5eb=_0x50ddff;if(!coinsLoaded){process[_0x49e5eb(0x2de)]({'telegrammsg':_0x49e5eb(0x290)},_0x38ab81=>{});return;}let _0x197d77='';if(config['showname'])_0x197d77=_0x49e5eb(0x2fa)+config['botname']+_0x49e5eb(0x304);else _0x197d77=_0x49e5eb(0x22c)+botID+_0x49e5eb(0x304);_0x197d77+=_0x49e5eb(0x21b),_0x197d77+=_0x49e5eb(0x2d1),_0x197d77+=_0x49e5eb(0x21d),_0x197d77+='-------------------------------\x0a',currentCoins['forEach'](_0x1bbe26=>{const _0xef3f7b=_0x49e5eb;_0x197d77+=_0x1bbe26['coin'][_0xef3f7b(0x216)](0x7)+'|\x20'+formatPad(_0x1bbe26[_0xef3f7b(0x2d9)],0x2,0x6)+'|\x20'+formatPad(_0x1bbe26[_0xef3f7b(0x1de)],0x2,0x6)+'|\x20'+formatPad(_0x1bbe26['delta']*0x64,0x2,0x6)+'\x0a';}),_0x197d77+=_0x49e5eb(0x230),process['send']({'telegrammsg':_0x197d77},_0x363f6b=>{});}function formatPad(_0x575aec,_0x5eac4a,_0x156c08){const _0x1055f1=formatResultString(_0x575aec,_0x5eac4a);return _0x1055f1?_0x1055f1['padStart'](_0x156c08):''['padStart'](_0x156c08);}function _0x494d(){const _0x132c1d=['recreateCoinResults()','splice','date-fns','PAXG','breakeven','sortBy','offset','lowdb/adapters/FileSync','test','LOCKED','Cex','cancelLoading','ongoing','RequestTimeout','Order\x20is\x20invalid:\x20','Invalid\x20symbol:\x20','join','Kucoin','highest','-results.json','time','ask','sendPortfolioTelegram','1\x20-\x20Validate\x20orders:\x20','configuration-stored','\x20not\x20responding','fetchClosedOrders','\x20not\x20available','Resetting\x20bot\x20history','restart','2971767uErNKz','assign','headless','exchange\x20not\x20reloaded','unlinkSync','netoffset','9CGnqhF','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','USDP','threshold','invalid\x20Request-Time','hybrid-crypto-js','util','floor','toUpperCase','replace','valid','exec','Saving\x20configuration','datetime','Bitget','recent20','Initializing\x20coin\x20results','Error\x20while\x20deleting\x20files:\x20','random','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','timeshift','Failed\x20to\x20load\x20coin\x20data\x20for\x20','BTC','0\x20-\x20EXECUTION:\x20','getPortfolio(2)','write','2\x20-\x20Orders\x20unlocked','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Limit\x20(low-margin)','\x20minutes\x20-\x20','Pausing\x20for\x20','includes','getSeconds','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','storeHeadless','\x20hour','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','filter','portfolio','getMinutes','1\x20-\x20Handle\x20open\x20orders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20exchange\x20error','yyyy-MM-dd\x27T\x27HH:mm:ss','sendMetricsTelegram','BUSD','eur',',\x20must\x20be\x20a\x203\x20digit\x20number','pro','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Transaction\x20detection\x20unblocked','closed','colorscheme','average','mkdirSync','bots','ExchangeError','./logs/','InsufficientFunds','yyyy/MM/dd','buy','removed','Waited\x20','Error:\x20Invalid\x20argument\x20','ticker','-performance.json','-------------------------------\x0a','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ccxt','secure','Binance','cost','distribution','function','startnumber','exchange\x20reloaded','deleteHistoryAlerts','send','1636340zrPaSb','message','startdate','botname','existsSync','remainingSymbols','delta','USDC','\x20minutes','%\x20(','fromCodePoint','-events.json','open','Order(s)\x20not\x20validated\x20after\x20','net-basecoin','Portfolio\x20change\x20detected:\x20','sha256','uncaughtException','ORDERS.UNLOCKING','debug','password','************','\x20|\x20','\x20closed\x20the\x20connection','value','get','ExchangeNotAvailable','<b>','no\x20open\x20orders','\x20|\x20highest\x20fee:\x20','Net\x20effect','price','amountToPrecision','orderId','exchange','fetchBalance','API-key\x20format\x20invalid','\x20portfolio:</b>\x20\x0a\x0a','balances','\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','log','DDoSProtection','BNB/','toString','milliseconds','split','Reset\x20|\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','timestamp','2673170JKiYJp','privateKey','date','recreate','AuthenticationError','change','10hnquqR','OrderNotFound','getCoins()','settings','emojibuy','logs','MIN_NOTIONAL','getFullYear','recovery','min','active','fetchTickers()','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getPortfolio(1)','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getAllOrders()','progress','currency','apiSecret','filled','findIndex','leftTxt','onepagemode','17826TQJGWh','Huobi','apiPassword','argv','symbol','limit-low','autoliquidity','getDate','NetworkError','canceled','InvalidOrder','getCoinNumber()','add','starting-balances','apiKey',':\x20timer\x20>','indexOf','watchOrders()','basecoinvalue','success','change24h','Resetting\x20coin\x20results:\x20','/backup/','/output-000.log','showname','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','watchOrders','total','7274384ZIbeCi','2\x20-\x20Validate\x20orders:\x20','toLowerCase','rightTxt','usd','\x20>\x20[DEBUG]\x20','Huobipro','cloneDeep','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20exchange','Unfilled\x20order(s)\x20canceled\x20after\x20','limits','001','RSA-OAEP','***','USDT','ETH','slice','./config/','coin','cancelOrder','Headless:\x20','amount','\x20|\x20Custom\x20ID:\x20','cancel','openOrders','sort','getStartingBalances','Error\x20details:','Net\x20','storeFiat','Insufficient\x20funds\x20to\x20execute\x20order:\x20','last','loadSymbols()','page','defaults','ORDERS.UNLOCKED','args','storeConfiguration','max','number','watchTransactions()','Market','fiat','getTime','liquidity','trade','initTickers()','fetchTicker','-config.json','Mexc3','fee','round','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20|\x20exchange:\x20','getPortfolio(0)','net-fiat','BNB','UNLOCKED','parse','fetchOpenOrders','Exception\x20thrown\x20in\x20','getPortfolio','spot','status','Avoiding\x20continuous\x20order\x20attempts','map','order','EUR','target','getMonth','2.3.5','substring','initial','freeze','Limit\x20(high-margin)','keys','RateLimitExceeded','changes','Unknown\x20error\x20occured','stringify','side','percentage','exchanges','limit-high','search','bb-secure.json','must\x20be\x20greater\x20than\x20minimum\x20amount','sell','push','1\x20-\x20Unlock\x20orders','excluded','Bot\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','balancing\x20resumed','getHours','timeout','\x20-\x20pausing\x20bot\x20for\x20','Bybit','error','orderstatus','emojisell','bot-','final','Order\x20filled:\x20','full','enabled','running','isEqual','TUSD','differenceInSeconds','red_yellow_blue','kill','resetHistory','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getOpenOrders()','placeOrder','limit','buys','2.6.0','Mexc','length','InvalidNonce','realized','cancelOrders()','padEnd','bot','4797265EwkQIs','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','data','<pre>','configuration','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','startprice','Invalid\x20ACCESS_TIMESTAMP','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','lowdb','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Order\x20amount\x20is\x20invalid:\x20','sells','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','toggleBotMode','No\x20more\x20open\x20orders\x20-\x20','\x20metrics:</b>\x20\x0a\x0a','createWriteStream','event-history','USD','<b>Bot\x20','toFixed','coins','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','</pre>','cooldown','createOrder','version','event','2191jBuELg','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','starting-balance-','PermissionDenied','Loading\x20completed','performance','botID','reverse',':\x20Bot\x20','bid','\x20network\x20error','added','bb-settings.json','type','2\x20-\x20handling\x20FILLED\x20order:\x20','padStart','loadMarkets','\x20-\x20bot\x20not\x20started','coin-loading-progress','\x20>\x20','close','format','forEach','watchTrades','set','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','warning','entries','fees','1216706bdqCch','2EMGxHt','Fee\x20discount\x20refund\x20detected:\x20','none','string','Binanceus','Manual\x20balancing\x20required','\x20rejected\x20your\x20API\x20request','has','/USD','shift','market','find','abs','decrypt','writeFile','startsWith','2.5.0','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','basecoin','2\x20-\x20Handled\x20open\x20orders','ordertype','\x20API\x20secret\x20is\x20invalid','ID:\x20','\x20/\x20'];_0x494d=function(){return _0x132c1d;};return _0x494d();}function logHistory(_0x3ca28d,_0x39aea0,_0x58eac1=''){const _0x19e53e=_0x50ddff;logger[_0x19e53e(0x202)](''+_0x39aea0);let _0x4e4ac1={'time':getTimeStamp(),'type':_0x3ca28d,'event':_0x39aea0};dbLogs['get'](_0x19e53e(0x31c))[_0x19e53e(0x1f2)](_0x4e4ac1)['write']();if(_0x58eac1=='')_0x58eac1=_0x39aea0;proxyEmit(_0x19e53e(0x234),{'log':_0x4e4ac1,'summary':_0x58eac1}),process[_0x19e53e(0x2de)]({'telegram':{..._0x4e4ac1,'botname':config['botname'],'showname':config[_0x19e53e(0x346)]}},_0x20a7ec=>{});}function emitHistory(_0x5a1f4f={}){const _0x188221=_0x50ddff;Object[_0x188221(0x1e5)](_0x5a1f4f)[_0x188221(0x212)]==0x0&&(_0x5a1f4f={'type':[_0x188221(0x1dc),_0x188221(0x234)],'event':'','page':0x1});if(_0x5a1f4f['type'][_0x188221(0x2ae)](_0x188221(0x234)))_0x5a1f4f['type'][_0x188221(0x26c)](_0x5a1f4f['type'][_0x188221(0x33e)]('event'),0x1,_0x188221(0x1fc),'warning',_0x188221(0x341));if(dbLogs[_0x188221(0x25a)](_0x188221(0x31c))['value']()){let _0x1eb65b=dbLogs[_0x188221(0x2f8)](_0x188221(0x31c))[_0x188221(0x2b4)](_0x45a559=>{const _0x21355b=_0x188221;if(_0x5a1f4f[_0x21355b(0x242)]['length']==0x0)return![];else return _0x5a1f4f[_0x21355b(0x242)][_0x21355b(0x2ae)](_0x45a559[_0x21355b(0x242)]);})[_0x188221(0x2b4)](_0x3b9589=>{const _0x33602f=_0x188221;if(_0x5a1f4f[_0x33602f(0x234)]=='')return!![];else return _0x3b9589[_0x33602f(0x234)]['toLowerCase']()[_0x33602f(0x2ae)](_0x5a1f4f[_0x33602f(0x234)][_0x33602f(0x34c)]());})[_0x188221(0x270)](_0x188221(0x27f)),_0x106749=_0x1eb65b[_0x188221(0x2f7)]()['length'];_0x1eb65b=_0x1eb65b[_0x188221(0x23c)]()[_0x188221(0x35c)]((_0x5a1f4f[_0x188221(0x36d)]-0x1)*logPageSize,_0x5a1f4f[_0x188221(0x36d)]*logPageSize-0x1)[_0x188221(0x23c)]()[_0x188221(0x2f7)](),proxyEmit(_0x188221(0x22a),{'logs':_0x1eb65b,'total':_0x106749});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1b1783){const _0x45dc67=_0x50ddff;if(dbLogs[_0x45dc67(0x25a)](_0x45dc67(0x31c))[_0x45dc67(0x2f7)]()){const _0x40c033=dbLogs['get'](_0x45dc67(0x31c))[_0x45dc67(0x270)](_0x45dc67(0x27f))[_0x45dc67(0x2b4)](_0x51139f=>{const _0x4a6f07=_0x45dc67;return _0x51139f[_0x4a6f07(0x242)]==_0x4a6f07(0x1dc);})[_0x45dc67(0x2f7)]();dbLogs[_0x45dc67(0x2f8)]('logs')['remove']()[_0x45dc67(0x2a8)](),dbLogs[_0x45dc67(0x2f8)]('logs')[_0x45dc67(0x28a)](_0x40c033)[_0x45dc67(0x2a8)](),emitHistory(_0x1b1783);}}async function pauseBot(_0xfba97b=pauseBotInterval){const _0x51b42e=_0x50ddff,_0x17c6e9=new Date()[_0x51b42e(0x1c5)]();if(!lastErrorShown||_0x17c6e9-lastErrorShown>=_0xfba97b){lastErrorShown=_0x17c6e9;!lastBotPause?(lastBotPause=_0x17c6e9,consecutivePauses=0x1):(_0x17c6e9-lastBotPause-_0xfba97b<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x51b42e(0x2de)]({'stop':_0x51b42e(0x288)},_0x98867f=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x51b42e(0x1c5)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0xfba97b),botPaused=![],reset(!![]);}}}async function killBot(){const _0x47ae9c=_0x50ddff;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x47ae9c(0x209)},_0x9f6cda=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x9cfeaf,_0x2b33f5){const _0x5d6b38=_0x50ddff;if(botPaused)return;const _0x3ea795=config[_0x5d6b38(0x301)]||'Exchange';if(_0x2b33f5)logger[_0x5d6b38(0x2f2)](_0x5d6b38(0x1d6)+_0x2b33f5);const _0x512458=()=>{const _0x3228d7=_0x5d6b38;loading[_0x3228d7(0x1fc)]=!![],emitLoadingProgress();};if(_0x9cfeaf[_0x5d6b38(0x30b)]()[_0x5d6b38(0x2ae)]('API-key\x20format\x20invalid'))logHistory(_0x5d6b38(0x1fc),_0x3ea795+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x512458();else{if(_0x9cfeaf['toString']()[_0x5d6b38(0x2ae)](_0x5d6b38(0x2a2)))logHistory(_0x5d6b38(0x1fc),_0x3ea795+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x512458();else _0x9cfeaf[_0x5d6b38(0x30b)]()[_0x5d6b38(0x2ae)](_0x5d6b38(0x315))?(logHistory(_0x5d6b38(0x1fc),_0x3ea795+_0x5d6b38(0x307)),logHistory(_0x5d6b38(0x1fc),_0x5d6b38(0x20b)),_0x512458()):await handleError(_0x9cfeaf,null);}}async function handleError(_0x10afce,_0x193f9f,_0x506b99=''){const _0x568f33=_0x50ddff;if(botPaused)return;const _0x715be9=config[_0x568f33(0x301)]||'Exchange';if(_0x193f9f)logger[_0x568f33(0x2f2)](_0x568f33(0x1d6)+_0x193f9f);if(_0x10afce['toString']()[_0x568f33(0x2ae)](_0x568f33(0x309)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x353)+pauseBotMsg),logger['debug'](_0x568f33(0x367),_0x10afce),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x1e6)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x2b0)+pauseBotMsg),logger['debug'](_0x568f33(0x367),_0x10afce),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x2f9))||_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)]('OnMaintenance'))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x286)+pauseBotMsg),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x278)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x284)+pauseBotMsg),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x325)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x2f6)+pauseBotMsg),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x34c)]()[_0x568f33(0x2ae)]('timestamp')||_0x10afce['toString']()[_0x568f33(0x34c)]()[_0x568f33(0x2ae)]('request-time')){const _0x1ad2c4=_0x10afce['toString']()['toLowerCase']();let _0x490926=![];if((config[_0x568f33(0x301)]==_0x568f33(0x2d7)||config[_0x568f33(0x301)]==_0x568f33(0x257))&&(_0x1ad2c4['includes'](_0x568f33(0x264)[_0x568f33(0x34c)]())||_0x1ad2c4[_0x568f33(0x2ae)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time'['toLowerCase']())))_0x490926=!![];if(config[_0x568f33(0x301)]==_0x568f33(0x27c)&&_0x1ad2c4['includes']('KC-API-TIMESTAMP\x20Invalid'['toLowerCase']()))_0x490926=!![];if(config['exchange']==_0x568f33(0x1fb)&&_0x1ad2c4[_0x568f33(0x2ae)](_0x568f33(0x2b3)[_0x568f33(0x34c)]()))_0x490926=!![];if(config['exchange']==_0x568f33(0x29d)&&_0x1ad2c4[_0x568f33(0x2ae)](_0x568f33(0x21f)[_0x568f33(0x34c)]()))_0x490926=!![];if((config[_0x568f33(0x301)]==_0x568f33(0x211)||config[_0x568f33(0x301)]==_0x568f33(0x1cb))&&_0x1ad2c4[_0x568f33(0x2ae)](_0x568f33(0x293)[_0x568f33(0x34c)]()))_0x490926=!![];_0x490926?logHistory(_0x568f33(0x1fc),_0x568f33(0x323)+pauseBotMsg):logHistory(_0x568f33(0x1fc),_0x568f33(0x236)+pauseBotMsg),logger['debug'](_0x568f33(0x367),_0x10afce[_0x568f33(0x30b)]()),await pauseBot();}else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x213)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x259)+pauseBotMsg),logger['debug']('Error\x20details:',_0x10afce),await pauseBot();else{if(_0x10afce instanceof ccxt[_0x568f33(0x336)])logHistory('error',_0x715be9+_0x568f33(0x23f)+pauseBotMsg),logger[_0x568f33(0x2f2)](_0x568f33(0x367),_0x10afce),await pauseBot();else{if(_0x10afce[_0x568f33(0x30b)]()['includes'](_0x568f33(0x303)))logHistory(_0x568f33(0x1fc),_0x715be9+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x568f33(0x1fc),_0x568f33(0x1ce)),await killBot();else{if(_0x10afce['toString']()[_0x568f33(0x2ae)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x715be9+_0x568f33(0x268)),logHistory(_0x568f33(0x1fc),_0x568f33(0x1ce)),await killBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x315)))logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x2d3)),logHistory(_0x568f33(0x1fc),_0x568f33(0x1ce)),await killBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x238)))logHistory('error',_0x715be9+_0x568f33(0x225)),logHistory(_0x568f33(0x1fc),_0x568f33(0x1ce)),await killBot();else{if(_0x10afce[_0x568f33(0x30b)]()[_0x568f33(0x2ae)](_0x568f33(0x2c9)))logHistory(_0x568f33(0x1fc),_0x568f33(0x36a)+_0x506b99);else _0x10afce instanceof ccxt[_0x568f33(0x2c7)]?(logHistory(_0x568f33(0x1fc),_0x715be9+_0x568f33(0x2b9)),logger[_0x568f33(0x2f2)](_0x568f33(0x367),_0x10afce)):(logHistory(_0x568f33(0x1fc),_0x568f33(0x1e8)+pauseBotMsg),logger[_0x568f33(0x2f2)](_0x568f33(0x367),_0x10afce),await pauseBot());}}}}}}}}}}}}}function formatResult(_0xd324a,_0x33e19e){const _0x5767ed=_0x50ddff;return parseFloat(_0xd324a[_0x5767ed(0x22d)](_0x33e19e));}function formatResultTruncate(_0x8885ec,_0x557c34){const _0x38f515=_0x50ddff;let _0xe2a900=formatResultString(_0x8885ec,0xa),_0x4a0481=_0xe2a900[_0x38f515(0x33e)]('.');return _0x4a0481!=-0x1&&(_0xe2a900=_0xe2a900['slice'](0x0,_0x4a0481+_0x557c34+0x1)),Number(_0xe2a900);}function formatResultString(_0x50502c,_0x193b97){const _0x1cc8ee=_0x50ddff;let _0x41b0b7;if(!(''+_0x50502c)[_0x1cc8ee(0x2ae)]('e'))_0x41b0b7=+(Math[_0x1cc8ee(0x1cd)](_0x50502c+'e+'+_0x193b97)+'e-'+_0x193b97);else{let _0x48e236=(''+_0x50502c)[_0x1cc8ee(0x30d)]('e'),_0x37d8bf='';+_0x48e236[0x1]+_0x193b97>0x0&&(_0x37d8bf='+'),_0x41b0b7=+(Math[_0x1cc8ee(0x1cd)](+_0x48e236[0x0]+'e'+_0x37d8bf+(+_0x48e236[0x1]+_0x193b97))+'e-'+_0x193b97);}return Number(_0x41b0b7)[_0x1cc8ee(0x22d)](_0x193b97);}function getServerTime(){const _0x29988b=_0x50ddff,_0x16852a=new Date();return _0x16852a[_0x29988b(0x31e)]()+'/'+(_0x16852a['getMonth']()+0x1)[_0x29988b(0x30b)]()[_0x29988b(0x244)](0x2,'0')+'/'+_0x16852a[_0x29988b(0x335)]()['toString']()[_0x29988b(0x244)](0x2,'0')+'\x20'+_0x16852a[_0x29988b(0x1f8)]()[_0x29988b(0x30b)]()[_0x29988b(0x244)](0x2,'0')+':'+_0x16852a[_0x29988b(0x2b6)]()[_0x29988b(0x30b)]()[_0x29988b(0x244)](0x2,'0')+':'+_0x16852a['getSeconds']()[_0x29988b(0x30b)]()[_0x29988b(0x244)](0x2,'0');}function getTimeStamp(){const _0x477c96=_0x50ddff,_0x3c691d=shiftedTime();return _0x3c691d['getFullYear']()+'/'+(_0x3c691d[_0x477c96(0x1df)]()+0x1)[_0x477c96(0x30b)]()[_0x477c96(0x244)](0x2,'0')+'/'+_0x3c691d['getDate']()[_0x477c96(0x30b)]()[_0x477c96(0x244)](0x2,'0')+'\x20'+_0x3c691d[_0x477c96(0x1f8)]()[_0x477c96(0x30b)]()[_0x477c96(0x244)](0x2,'0')+':'+_0x3c691d[_0x477c96(0x2b6)]()['toString']()[_0x477c96(0x244)](0x2,'0')+':'+_0x3c691d[_0x477c96(0x2af)]()[_0x477c96(0x30b)]()[_0x477c96(0x244)](0x2,'0');}function getDate(){const _0x430c14=_0x50ddff,_0x432f45=shiftedTime();return _0x432f45[_0x430c14(0x31e)]()+'/'+(_0x432f45[_0x430c14(0x1df)]()+0x1)[_0x430c14(0x30b)]()[_0x430c14(0x244)](0x2,'0')+'/'+_0x432f45[_0x430c14(0x335)]()[_0x430c14(0x30b)]()[_0x430c14(0x244)](0x2,'0');}function getHour(){const _0x857752=_0x50ddff,_0x54e16c=shiftedTime();return _0x54e16c['getHours']()[_0x857752(0x30b)]()[_0x857752(0x244)](0x2,'0');}function sleep(_0x2848fb){return new Promise(_0x40da2e=>setTimeout(_0x40da2e,_0x2848fb));}function shiftedTime(){const _0x53d54f=_0x50ddff,_0x5c73a1=new Date();let _0x27632f=_0x5c73a1;if(config&&config[_0x53d54f(0x2a3)]!==0x0)_0x27632f=fns[_0x53d54f(0x33a)](_0x5c73a1,{'hours':config[_0x53d54f(0x2a3)]});return _0x27632f;}function timer(_0xf919bd){const _0x576091=_0x50ddff,_0x190866=new Date();!lasttime?console[_0x576091(0x308)](getTimeStamp()+_0x576091(0x33d),_0xf919bd,_0x190866):console[_0x576091(0x308)](getTimeStamp()+_0x576091(0x33d),_0xf919bd,(_0x190866-lasttime)/0x3e8),lasttime=_0x190866;}