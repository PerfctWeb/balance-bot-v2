const _0x58d203=_0x47ff;(function(_0x5c29db,_0x54e947){const _0x26ef7f=_0x47ff,_0x31742a=_0x5c29db();while(!![]){try{const _0x58fbbc=-parseInt(_0x26ef7f(0x1fe))/0x1*(parseInt(_0x26ef7f(0x18b))/0x2)+-parseInt(_0x26ef7f(0x185))/0x3*(-parseInt(_0x26ef7f(0x1aa))/0x4)+-parseInt(_0x26ef7f(0x1d2))/0x5+-parseInt(_0x26ef7f(0x21e))/0x6*(-parseInt(_0x26ef7f(0x19c))/0x7)+-parseInt(_0x26ef7f(0x1eb))/0x8+parseInt(_0x26ef7f(0x123))/0x9*(-parseInt(_0x26ef7f(0x149))/0xa)+-parseInt(_0x26ef7f(0x208))/0xb*(-parseInt(_0x26ef7f(0x187))/0xc);if(_0x58fbbc===_0x54e947)break;else _0x31742a['push'](_0x31742a['shift']());}catch(_0x35b2bf){_0x31742a['push'](_0x31742a['shift']());}}}(_0x31b8,0x26bfe));const _0x403ca6=function(){let _0x3f453e=!![];return function(_0x566f24,_0x45af3e){const _0x38b3b7=_0x3f453e?function(){const _0x33ecca=_0x47ff;if(_0x45af3e){const _0x42f43a=_0x45af3e[_0x33ecca(0x15d)](_0x566f24,arguments);return _0x45af3e=null,_0x42f43a;}}:function(){};return _0x3f453e=![],_0x38b3b7;};}(),_0x488e84=_0x403ca6(this,function(){const _0x278a9b=_0x47ff;return _0x488e84[_0x278a9b(0x155)]()[_0x278a9b(0x145)](_0x278a9b(0x139))[_0x278a9b(0x155)]()[_0x278a9b(0x1b4)](_0x488e84)[_0x278a9b(0x145)](_0x278a9b(0x139));});_0x488e84();'use strict';const ccxt=require(_0x58d203(0x168)),low=require('lowdb'),FileSync=require(_0x58d203(0x20b)),fs=require('fs'),fns=require(_0x58d203(0x1df)),{WebsocketClient,DefaultLogger}=require(_0x58d203(0x1f7)),Crypt=require(_0x58d203(0x12a))[_0x58d203(0x1d1)];let exchange,wsClient;global[_0x58d203(0x1e9)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require('./version.json')[_0x58d203(0x154)],botID=process[_0x58d203(0x222)][0x2]||_0x58d203(0x140),pattern=/^[0-9]{3}$/;if(!pattern[_0x58d203(0x182)](botID))return console['log'](_0x58d203(0x1b0)+botID+_0x58d203(0x158)),process[_0x58d203(0x1d6)](0x1);const configpath=_0x58d203(0x1dc);!fs[_0x58d203(0x1a5)](configpath)&&fs[_0x58d203(0x1a9)](configpath);const configfile=configpath+_0x58d203(0x13f)+botID+_0x58d203(0x201),logfile=configpath+'bot-'+botID+_0x58d203(0x164),performancefile=configpath+_0x58d203(0x13f)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x58d203(0x21c),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x58d203(0x1b1),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x58d203(0x17f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x58d203(0x202)]({'data':[]})[_0x58d203(0x17f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x58d203(0x202)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x58d203(0x17f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x58d203(0x135),'symbol':_0x58d203(0x1a0)},'usd':{'coin':_0x58d203(0x13c),'symbol':_0x58d203(0x1ef)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2a1158)=>{},'debug':(..._0x5d4f07)=>{},'notice':(..._0x90c8fc)=>{},'info':(..._0x387c0c)=>{},'warning':(..._0x480b6f)=>{},'error':async function(..._0x394e8c){const _0x3e1dab=_0x58d203,_0x2a81fe=new Date()[_0x3e1dab(0x1c1)]();(!lastErrorShown||_0x2a81fe-lastErrorShown>=pauseBotInterval)&&(lastErrorShown=new Date()['getTime'](),logHistory(_0x3e1dab(0x196),_0x3e1dab(0x152)),logging(_0x3e1dab(0x129),_0x394e8c[0x0]+':\x20'+_0x394e8c[0x1][_0x3e1dab(0x196)][_0x3e1dab(0x198)]),await pauseBot(pauseBotInterval));}},crypt=new Crypt({'md':_0x58d203(0x1be),'rsaStandard':_0x58d203(0x15f)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x58d203(0x1ad)]);process[_0x58d203(0x175)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x30f67a,_0x4ca144=null){process['send']({'function':_0x30f67a,'args':_0x4ca144});}function initializeProcessListeners(){process['on']('message',_0x2618dd=>{const _0xb59ad2=_0x47ff;switch(Object[_0xb59ad2(0x180)](_0x2618dd)[0x0]){case _0xb59ad2(0x1ad):_0x2618dd[_0xb59ad2(0x1ad)]!=undefined&&(settings[_0xb59ad2(0x1ad)]=_0x2618dd[_0xb59ad2(0x1ad)],updateTimeshift(settings[_0xb59ad2(0x1ad)]));break;case'function':switch(_0x2618dd[_0xb59ad2(0x160)]){case _0xb59ad2(0x1bc):initclient();break;case _0xb59ad2(0x1f3):emitHistory(_0x2618dd[_0xb59ad2(0x1d4)]);break;case'getPortfolio':getPortfolio(_0x2618dd[_0xb59ad2(0x1d4)]);break;case _0xb59ad2(0x172):storeConfiguration(_0x2618dd['args']);break;case _0xb59ad2(0x1a8):storeHeadless(_0x2618dd[_0xb59ad2(0x1d4)]);break;case _0xb59ad2(0x19f):getStartingBalances();break;case _0xb59ad2(0x1a2):placeOrder(_0x2618dd[_0xb59ad2(0x1d4)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x3dac33=_0x58d203;if(pidBalances)clearTimeout(pidBalances);if(config[_0x3dac33(0x178)]!=''){await initExchange(config[_0x3dac33(0x178)],config[_0x3dac33(0x161)]);let _0x2dbfff=await loadSymbols();_0x2dbfff&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x12cbff,_0x121c36){const _0x2d0c55=_0x58d203,_0x1ff55d=ccxt[config[_0x2d0c55(0x169)]];let _0x59f406;switch(config['exchange']){case'binance':_0x59f406=_0x2d0c55(0x17c);break;case'binanceus':_0x59f406='wss://stream.binance.us:9443';break;default:_0x59f406='wss://stream.binance.com:9443';}exchange=new _0x1ff55d({'apiKey':_0x12cbff,'secret':_0x121c36,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x12cbff,'api_secret':_0x121c36,'beautify':!![],'wsUrl':_0x59f406},logger),config[_0x2d0c55(0x169)]==_0x2d0c55(0x219)&&(stablecoins={'eur':{'coin':_0x2d0c55(0x21f),'symbol':_0x2d0c55(0x1f9)},'usd':{'coin':_0x2d0c55(0x13c),'symbol':_0x2d0c55(0x1ef)}});}function _0x31b8(){const _0x1e5f03=['BTC/BUSD','botID','Binance\x20API\x20secret\x20is\x20invalid','secure','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','132015cuafeC','balances','datetime','-config.json','defaults','availableBalance','toFixed','last','min','getHours','11AVbixA','subscribeSpotKline','forEach','lowdb/adapters/FileSync','getMonth','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','\x20|\x20Error\x20details:\x20','differenceInCalendarDays','BNBBTC','getPortfolio()','breakeven','/BTC','MIN_NOTIONAL','reduce','outboundAccountPosition','realized','limits','binanceus','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','timeout','-results.json','cooldown','6HpUyew','BTCBUSD','splice','remove','argv','slice','27VZZCBv','round','startdate','fetchOHLCV','type','Bot\x20','WebSockets()\x20|\x20Error\x20details:\x20','hybrid-crypto-js','price','initws()','timestamp','time','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','FILLED','coins','InvalidNonce','indexOf','trade','BTCEUR','push','configuration','configuration-stored','(((.+)+)+)+$','fee','excluded','BTCUSDT','yyyy/MM/dd','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','bot-','001','orderType','page','close','reverse','search','limit-low','isArray','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','1013320oEEIlh','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','accumulatedQuantity','coin-loading-progress','formattedMessage','parse','recreate','fetchBalance','success','WebSockets()\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','getMinutes','version','toString','total','filter',',\x20must\x20be\x20a\x203\x20digit\x20number','value','sells','ask','bot','apply','Limit\x20(low-margin)','RSA-OAEP','function','apiSecret','getFullYear','market','-events.json','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','sortBy','number','ccxt','exchange','ExchangeNotAvailable','executionReport','Market','length','format','currency','filled','Unfilled\x20order(s)\x20canceled\x20after\x20','storeConfiguration','performance','BTC','send','abs','limit','apiKey','event','eventType','orderId','wss://stream.binance.com:9443','threshold','\x20hour','write','keys','fetchTickers','test','valid','get','3QZKiVG','\x20order:\x20','7679928JXxAuV','startnumber','sell','symbol','4aOoxGI','AuthenticationError','reconnected','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','orderStatus','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','headless','assign','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','logs','error','wsMarket','message','wsKey','side','yyyy/MM/dd\x20HH:mm:ss','767900vUiwbN','buy','coinamount','getStartingBalances','BTC/EUR','startprice','placeOrder','getCloses()','BTC/','existsSync','userData','coin','storeHeadless','mkdirSync','745464REWeUY','order','target','timeshift','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','date','Error:\x20Invalid\x20argument\x20','bb-secure.json','find','milliseconds','constructor','replace','decrypt','\x20minutes\x20-\x20balancing\x20resumed','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','Order\x20filled:\x20','cost','portfolio','initclient','privateKey','sha256','BNB','buys','getTime','kline','split','includes','usd',':\x20Bot\x20','loadSymbols()','subscribeSpotUserDataStream','log','eur','\x20orders\x20in\x20less\x20than\x20','Order:\x20','Order(s)\x20validated\x20-\x20balancing\x20resumed','parseISO','RequestTimeout','LIMIT','Crypt','1031200HouLDW','Limit\x20(high-margin)','args','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','exit','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','asset','entries','enabled','************','./config/','has','data','date-fns','symbols','getDate','amount','delta','DAI/','settings','DDoSProtection','fees','Invalid\x20quantity','ticker','spot','24608nyAFSE','padStart','API-key\x20format\x20invalid','ordertype','BTC/USDT','closeWs','event-history','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','emitHistory','getSeconds','distribution','cancelOrder','binance','toLowerCase'];_0x31b8=function(){return _0x1e5f03;};return _0x31b8();}async function loadSymbols(){const _0x3d1ff7=_0x58d203;let _0x21123d;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x3d1ff7(0x1e0)][_0x3d1ff7(0x157)](_0x266c9a=>{const _0x44df0e=_0x3d1ff7;return _0x266c9a[_0x44df0e(0x1c4)]('BTC')&&!_0x266c9a[_0x44df0e(0x1c4)](_0x44df0e(0x1e4));}),_0x21123d=!![];}catch(_0x349874){await handleError(_0x349874,_0x3d1ff7(0x1c7)),_0x21123d=![];}return _0x21123d;}async function initbot(){const _0x4a7e5c=_0x58d203;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3f219e=dbCoinResults[_0x4a7e5c(0x184)](_0x4a7e5c(0x131))['value']();if(_0x3f219e[_0x4a7e5c(0x16d)]==0x0)await resetCoinResults();}async function initclient(){const _0x24518=_0x58d203;proxyEmit(_0x24518(0x137),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4ffb6b=_0x58d203;wsinitialized=![];ws1&&(ws1[_0x4ffb6b(0x20a)](_0x12820b=>{try{wsClient['closeWs'](_0x12820b);}catch(_0x29aaf1){}}),ws1=[]);if(ws2){try{wsClient[_0x4ffb6b(0x1f0)](ws2);}catch(_0x368ed3){}ws2=null;}}async function initws(){const _0x43649c=_0x58d203;cleanws();let _0x2af181=[];currentCoins[_0x43649c(0x20a)](_0x12129d=>{const _0x239c2d=_0x43649c;if(_0x12129d[_0x239c2d(0x1a7)]!=_0x239c2d(0x174))_0x2af181[_0x239c2d(0x136)](noslash(_0x12129d[_0x239c2d(0x18a)]));});if(!_0x2af181[_0x43649c(0x1c4)](stablecoins[_0x43649c(0x1ca)]['coin']))_0x2af181[_0x43649c(0x136)](stablecoins[_0x43649c(0x1ca)][_0x43649c(0x1a7)]);if(!_0x2af181['includes'](stablecoins[_0x43649c(0x1c5)]['coin']))_0x2af181[_0x43649c(0x136)](stablecoins[_0x43649c(0x1c5)][_0x43649c(0x1a7)]);if(!_0x2af181[_0x43649c(0x1c4)](_0x43649c(0x210)))_0x2af181['push']('BNBBTC');try{_0x2af181['forEach']((_0x27b065,_0x16521f)=>{const _0x4eac17=_0x43649c;ws1[_0x16521f]=wsClient[_0x4eac17(0x209)](_0x27b065,'1m');}),ws2=wsClient[_0x43649c(0x1c8)](),wsClient['on'](_0x43649c(0x14d),_0x2ccb97=>{const _0x594cae=_0x43649c;if(!Array[_0x594cae(0x147)](_0x2ccb97)&&!_0x2ccb97[_0x594cae(0x199)][_0x594cae(0x1c4)](_0x594cae(0x1a6))){if(_0x2ccb97[_0x594cae(0x17a)]===_0x594cae(0x1c2)){global[_0x594cae(0x1e9)][_0x2ccb97['kline']['symbol']]=_0x2ccb97[_0x594cae(0x1c2)][_0x594cae(0x143)];return;}}else{if(!Array[_0x594cae(0x147)](_0x2ccb97)&&_0x2ccb97['wsKey'][_0x594cae(0x1c4)](_0x594cae(0x1a6))){if(_0x2ccb97[_0x594cae(0x197)]['includes'](_0x594cae(0x1ea))){updateNumberCoins(_0x2ccb97);return;}}}}),wsClient['on'](_0x43649c(0x18d),async _0x270917=>{currentCoins=await getCoins();});}catch(_0x4e9d27){await handleError(_0x4e9d27,_0x43649c(0x12c));}let _0x348afe;while(_0x348afe!=currentCoins[_0x43649c(0x16d)]-0x1){_0x348afe=0x0,currentCoins[_0x43649c(0x20a)](_0x48a0f8=>{const _0x39d044=_0x43649c;if(_0x48a0f8['coin']!='BTC'&&global[_0x39d044(0x1e9)][noslash(_0x48a0f8['symbol'])])_0x348afe++;});let _0x1221b5=Math[_0x43649c(0x124)](_0x348afe/(currentCoins[_0x43649c(0x16d)]-0x1)*0x64);proxyEmit(_0x43649c(0x14c),_0x1221b5),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x6a49bf=_0x58d203;let _0x83848f=0x0,_0x523c87=0x0;try{_0x83848f=global[_0x6a49bf(0x1e9)][stablecoins['eur']['coin']],_0x523c87=global[_0x6a49bf(0x1e9)][stablecoins['usd']['coin']];}catch(_0x1e56dd){await handleError(_0x1e56dd,'getFiat()');}return{'eur':Number(_0x83848f),'usd':Number(_0x523c87)};}async function setStartDatePerformance(_0x17715d){const _0x2924e0=_0x58d203,_0x58bcf6=fns[_0x2924e0(0x16e)](new Date(_0x17715d['startdate']),'yyyy/MM/dd');let _0x1100db=[];_0x1100db[stablecoins['eur'][_0x2924e0(0x1a7)]]=await getCloses(stablecoins[_0x2924e0(0x1ca)][_0x2924e0(0x18a)],new Date(_0x17715d['startdate']),0x1),_0x1100db[stablecoins[_0x2924e0(0x1c5)]['coin']]=await getCloses(stablecoins[_0x2924e0(0x1c5)][_0x2924e0(0x18a)],new Date(_0x17715d['startdate']),0x1);let _0x5f2208,_0x416fd4=[];_0x17715d[_0x2924e0(0x1bb)][_0x2924e0(0x20a)](_0x21f447=>{const _0x36dc6b=_0x2924e0;!_0x21f447[_0x36dc6b(0x13b)]&&_0x416fd4[_0x36dc6b(0x136)]({'coin':_0x21f447[_0x36dc6b(0x1a7)],'number':_0x21f447[_0x36dc6b(0x188)],'price':_0x21f447[_0x36dc6b(0x1a1)]});}),_0x5f2208={'date':_0x58bcf6,'eur':_0x1100db[stablecoins['eur'][_0x2924e0(0x1a7)]][0x0],'usd':_0x1100db[stablecoins[_0x2924e0(0x1c5)][_0x2924e0(0x1a7)]][0x0],'coins':_0x416fd4};let _0x428a72=dbPerformance[_0x2924e0(0x184)](_0x2924e0(0x1de))[_0x2924e0(0x1b2)]({'date':_0x58bcf6})[_0x2924e0(0x159)]();_0x428a72?dbPerformance[_0x2924e0(0x184)]('data')[_0x2924e0(0x1b2)]({'date':_0x58bcf6})[_0x2924e0(0x192)](_0x5f2208)[_0x2924e0(0x17f)]():dbPerformance[_0x2924e0(0x184)](_0x2924e0(0x1de))['push'](_0x5f2208)[_0x2924e0(0x17f)](),_0x428a72=dbPerformance['get'](_0x2924e0(0x1de))['sortBy'](_0x2924e0(0x1af))['value'](),_0x428a72[_0x2924e0(0x20a)](_0x50a88d=>{const _0x5ba62a=_0x2924e0;_0x50a88d['date']<_0x58bcf6&&dbPerformance[_0x5ba62a(0x184)]('data')['remove']({'date':_0x50a88d[_0x5ba62a(0x1af)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x43ff12){const _0x454145=_0x58d203;let _0x87ce1a,_0x45a00c=[];logHistory(_0x454145(0x151),_0x454145(0x148)),_0x43ff12[_0x454145(0x1bb)][_0x454145(0x20a)](_0x53276f=>{const _0x3ae3f6=_0x454145;if(_0x53276f['coin']!=_0x3ae3f6(0x174)&&!_0x53276f[_0x3ae3f6(0x13b)])_0x45a00c[_0x3ae3f6(0x136)]({'coin':_0x53276f['coin'],'symbol':_0x53276f[_0x3ae3f6(0x18a)]});});let _0x8a47db=[];try{const _0x1fb075=fns['format'](fns[_0x454145(0x1ce)](_0x43ff12['startdate'][_0x454145(0x1b5)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4ba6d8 of _0x45a00c){if(_0x4ba6d8[_0x454145(0x1a7)]!=_0x454145(0x174))_0x87ce1a=await exchange['fetchOrders'](_0x4ba6d8[_0x454145(0x18a)],Date[_0x454145(0x14e)](_0x1fb075));_0x87ce1a[_0x454145(0x20a)](_0x57d2ae=>{const _0x2a60d6=_0x454145,_0x4b11d2=_0x4ba6d8['symbol'][_0x2a60d6(0x1c4)]('BTC/'),_0x125ff8=fns[_0x2a60d6(0x16e)](fns['parseISO'](_0x57d2ae[_0x2a60d6(0x200)]),_0x2a60d6(0x19b)),_0x5950be=fns['format'](fns[_0x2a60d6(0x1ce)](_0x57d2ae['datetime']),_0x2a60d6(0x13d));let _0x25f68d;if(_0x57d2ae[_0x2a60d6(0x19a)]==_0x2a60d6(0x19d)&&_0x4b11d2==![])_0x25f68d=_0x57d2ae['amount'];if(_0x57d2ae[_0x2a60d6(0x19a)]=='buy'&&_0x4b11d2==!![])_0x25f68d=-_0x57d2ae[_0x2a60d6(0x1e2)]*_0x57d2ae[_0x2a60d6(0x12b)];if(_0x57d2ae[_0x2a60d6(0x19a)]=='sell'&&_0x4b11d2==![])_0x25f68d=-_0x57d2ae[_0x2a60d6(0x1e2)];if(_0x57d2ae['side']==_0x2a60d6(0x189)&&_0x4b11d2==!![])_0x25f68d=_0x57d2ae[_0x2a60d6(0x1e2)]*_0x57d2ae[_0x2a60d6(0x12b)];_0x8a47db['push']({'timestamp':_0x125ff8,'date':_0x5950be,'coin':_0x4ba6d8['coin'],'symbol':_0x4ba6d8['symbol'],'type':_0x57d2ae[_0x2a60d6(0x127)],'side':_0x57d2ae[_0x2a60d6(0x19a)],'reverse':_0x4b11d2,'amount':formatResult(_0x57d2ae[_0x2a60d6(0x170)],0x8),'filled':formatResult(_0x57d2ae[_0x2a60d6(0x170)],0x8),'coinamount':formatResult(_0x25f68d,0x8),'price':formatResult(_0x57d2ae[_0x2a60d6(0x12b)],0x8)});let _0x420342;if(_0x57d2ae[_0x2a60d6(0x19a)]==_0x2a60d6(0x19d)&&_0x4b11d2==![])_0x420342=-_0x57d2ae['amount']*_0x57d2ae[_0x2a60d6(0x12b)];if(_0x57d2ae[_0x2a60d6(0x19a)]==_0x2a60d6(0x19d)&&_0x4b11d2==!![])_0x420342=_0x57d2ae[_0x2a60d6(0x1e2)];if(_0x57d2ae[_0x2a60d6(0x19a)]==_0x2a60d6(0x189)&&_0x4b11d2==![])_0x420342=_0x57d2ae['amount']*_0x57d2ae['price'];if(_0x57d2ae[_0x2a60d6(0x19a)]=='sell'&&_0x4b11d2==!![])_0x420342=-_0x57d2ae[_0x2a60d6(0x1e2)];_0x8a47db[_0x2a60d6(0x136)]({'date':_0x5950be,'coin':_0x2a60d6(0x174),'coinamount':formatResult(_0x420342,0x8)});});}_0x8a47db['sort']((_0x5708ec,_0xcfa7a2)=>_0x5708ec[_0x454145(0x12d)]>_0xcfa7a2[_0x454145(0x12d)]?0x1:_0xcfa7a2[_0x454145(0x12d)]>_0x5708ec[_0x454145(0x12d)]?-0x1:0x0),dbLogs[_0x454145(0x184)](_0x454145(0x195))[_0x454145(0x221)]()['write'](),_0x8a47db[_0x454145(0x20a)](_0x2e9346=>{const _0x3a1436=_0x454145;let _0x5b4f3e;_0x2e9346[_0x3a1436(0x1a7)]!=_0x3a1436(0x174)&&(_0x5b4f3e={'time':_0x2e9346[_0x3a1436(0x12d)],'type':_0x3a1436(0x1ab),'event':_0x3a1436(0x1cc)+_0x2e9346['symbol']+'\x20'+_0x2e9346[_0x3a1436(0x19a)]+'\x20#'+_0x2e9346[_0x3a1436(0x1e2)]+'\x20@'+_0x2e9346[_0x3a1436(0x12b)]},dbLogs[_0x3a1436(0x184)](_0x3a1436(0x195))[_0x3a1436(0x136)](_0x5b4f3e)['write']());});const _0x2deed2=fns['eachDayOfInterval']({'start':new Date(_0x43ff12[_0x454145(0x125)]),'end':new Date()})['map'](_0x58b379=>fns[_0x454145(0x16e)](_0x58b379,_0x454145(0x13d)));let _0x100df3=[];_0x43ff12[_0x454145(0x1bb)][_0x454145(0x20a)](_0x5ac8f7=>{const _0x2b2295=_0x454145;if(!_0x5ac8f7['excluded']){_0x100df3[_0x5ac8f7[_0x2b2295(0x1a7)]]=[];let _0x3350cf=_0x5ac8f7[_0x2b2295(0x188)];_0x2deed2['forEach']((_0x552888,_0x1bc3ee)=>{const _0x15c0c6=_0x2b2295;let _0x11ed9a=_0x8a47db[_0x15c0c6(0x157)](_0x491165=>_0x491165[_0x15c0c6(0x1a7)]==_0x5ac8f7[_0x15c0c6(0x1a7)]&&_0x491165[_0x15c0c6(0x1af)]==_0x552888);if(_0x11ed9a[_0x15c0c6(0x16d)]!=0x0){let _0x19d0d3=_0x11ed9a[_0x15c0c6(0x215)]((_0x46e787,_0x4853e7)=>{const _0x47b319=_0x15c0c6;return _0x46e787+=_0x4853e7[_0x47b319(0x19e)],_0x46e787;},0x0);_0x3350cf+=_0x19d0d3;}_0x100df3[_0x5ac8f7[_0x15c0c6(0x1a7)]][_0x552888]=_0x3350cf;});}});const _0x319e3b=[..._0x45a00c];_0x319e3b[_0x454145(0x136)]({'coin':stablecoins[_0x454145(0x1ca)]['coin'],'symbol':stablecoins[_0x454145(0x1ca)]['symbol']}),_0x319e3b[_0x454145(0x136)]({'coin':stablecoins['usd'][_0x454145(0x1a7)],'symbol':stablecoins[_0x454145(0x1c5)][_0x454145(0x18a)]});let _0x488b9f=[];for(const _0x40b839 of _0x319e3b){_0x488b9f[_0x40b839['coin']]=await getCloses(_0x40b839[_0x454145(0x18a)],new Date(_0x43ff12[_0x454145(0x125)]));}dbPerformance[_0x454145(0x184)](_0x454145(0x1de))['remove']()[_0x454145(0x17f)](),_0x2deed2[_0x454145(0x20a)]((_0x29e366,_0x255293)=>{const _0x302dcf=_0x454145;let _0x3a12b8,_0x55fa82=[];_0x255293==0x0?(_0x43ff12[_0x302dcf(0x1bb)]['forEach'](_0x380870=>{const _0xe60444=_0x302dcf;!_0x380870[_0xe60444(0x13b)]&&_0x55fa82[_0xe60444(0x136)]({'coin':_0x380870[_0xe60444(0x1a7)],'number':_0x380870[_0xe60444(0x188)],'price':_0x380870['startprice']});}),_0x3a12b8={'date':_0x29e366,'eur':_0x488b9f[stablecoins[_0x302dcf(0x1ca)][_0x302dcf(0x1a7)]][_0x255293],'usd':_0x488b9f[stablecoins[_0x302dcf(0x1c5)][_0x302dcf(0x1a7)]][_0x255293],'coins':_0x55fa82}):(_0x43ff12[_0x302dcf(0x1bb)][_0x302dcf(0x20a)](_0x52a48c=>{const _0x1a7764=_0x302dcf;!_0x52a48c[_0x1a7764(0x13b)]&&_0x55fa82[_0x1a7764(0x136)]({'coin':_0x52a48c[_0x1a7764(0x1a7)],'number':_0x100df3[_0x52a48c[_0x1a7764(0x1a7)]][_0x29e366],'price':_0x52a48c[_0x1a7764(0x1a7)]==_0x1a7764(0x174)?0x1:_0x488b9f[_0x52a48c['coin']][_0x255293]});}),_0x3a12b8={'date':_0x29e366,'eur':_0x488b9f[stablecoins[_0x302dcf(0x1ca)]['coin']][_0x255293],'usd':_0x488b9f[stablecoins[_0x302dcf(0x1c5)][_0x302dcf(0x1a7)]][_0x255293],'coins':_0x55fa82}),dbPerformance[_0x302dcf(0x184)](_0x302dcf(0x1de))[_0x302dcf(0x136)](_0x3a12b8)[_0x302dcf(0x17f)]();}),emitPerformance(),await resetCoinResults();for(let _0x24a5bb of _0x8a47db){_0x24a5bb[_0x454145(0x1a7)]!=_0x454145(0x174)&&await updateCoinResults(_0x24a5bb);}logHistory('success','Performance\x20recreation\x20completed\x20successfully');}catch(_0x5ae1bd){await handleError(_0x5ae1bd,'recreateHistory()');}}async function getCloses(_0x5aab72,_0x5adbc5,_0x20be22=undefined){const _0x5b264e=_0x58d203,_0x10457d='1d';let _0x4f470f,_0x55ab9d;const _0x236095=fns[_0x5b264e(0x20f)](new Date(),_0x5adbc5)+0x1;try{const _0x103618=exchange[_0x5b264e(0x1b3)]()-_0x236095*0x18*0xe10*0x3e8;_0x4f470f=await exchange[_0x5b264e(0x126)](_0x5aab72,_0x10457d,_0x103618,_0x20be22),_0x55ab9d=await exchange[_0x5b264e(0x181)](_0x5aab72);}catch(_0x1645fb){await handleError(_0x1645fb,_0x5b264e(0x1a3));}let _0x287725=ohlcvToCloses(_0x4f470f);return _0x287725[_0x5b264e(0x136)](_0x55ab9d[_0x5aab72]['last']),_0x287725;}function ohlcvToCloses(_0x411a9a){let _0x225198=[];return _0x411a9a['forEach'](function(_0x1211b7){const _0xeeabb4=_0x47ff;_0x225198[_0xeeabb4(0x136)](_0x1211b7[0x4]);}),_0x225198;}function getConfiguration(_0x27010b){const _0x4b227f=_0x58d203;let _0x43aaaf=dbConfig[_0x4b227f(0x184)]('bot')[_0x4b227f(0x1b2)]({'botID':_0x27010b})[_0x4b227f(0x159)]();if(_0x43aaaf){let _0x684748=![];!_0x43aaaf[_0x4b227f(0x169)]&&(_0x43aaaf={..._0x43aaaf,'exchange':_0x4b227f(0x1f7)},_0x684748=!![]),!_0x43aaaf[_0x4b227f(0x1ee)]&&(_0x43aaaf={..._0x43aaaf,'ordertype':_0x4b227f(0x163)},_0x684748=!![]),!_0x43aaaf[_0x4b227f(0x21b)]&&(_0x43aaaf={..._0x43aaaf,'timeout':0x14},_0x684748=!![]),_0x684748&&(_0x43aaaf={'botID':_0x43aaaf[_0x4b227f(0x1fa)],'exchange':_0x43aaaf['exchange'],'apiKey':_0x43aaaf[_0x4b227f(0x178)],'apiSecret':_0x43aaaf[_0x4b227f(0x161)],'botname':_0x43aaaf['botname'],'threshold':_0x43aaaf['threshold'],'ordertype':_0x43aaaf[_0x4b227f(0x1ee)],'timeout':_0x43aaaf[_0x4b227f(0x21b)],'startdate':_0x43aaaf['startdate'],'recreate':_0x43aaaf[_0x4b227f(0x14f)],'timeshift':_0x43aaaf[_0x4b227f(0x1ad)],'headless':_0x43aaaf[_0x4b227f(0x191)],'cooldown':_0x43aaaf[_0x4b227f(0x21d)],'portfolio':_0x43aaaf[_0x4b227f(0x1bb)]},dbConfig['get'](_0x4b227f(0x15c))[_0x4b227f(0x221)]()[_0x4b227f(0x17f)](),dbConfig[_0x4b227f(0x184)](_0x4b227f(0x15c))[_0x4b227f(0x136)](_0x43aaaf)['write']());}else _0x43aaaf={'botID':_0x27010b,'exchange':'binance','apiKey':'','apiSecret':'','botname':_0x4b227f(0x128)+_0x27010b,'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x43aaaf;}function emittedConfiguration(){const _0x179c13=_0x58d203;let _0x41daed;return config[_0x179c13(0x178)]==''?_0x41daed=config:_0x41daed={...config,'apiKey':_0x179c13(0x1db),'apiSecret':_0x179c13(0x1db)},_0x41daed;}function _0x47ff(_0x55fad9,_0x3a4f6d){const _0xc2c6a3=_0x31b8();return _0x47ff=function(_0x488e84,_0x403ca6){_0x488e84=_0x488e84-0x123;let _0x31b870=_0xc2c6a3[_0x488e84];return _0x31b870;},_0x47ff(_0x55fad9,_0x3a4f6d);}function getSettings(){const _0x862fa9=_0x58d203;return dbSettings[_0x862fa9(0x184)](_0x862fa9(0x1e5))[_0x862fa9(0x159)]();}function getSecure(){const _0x474a1e=_0x58d203;return dbSecure[_0x474a1e(0x184)](_0x474a1e(0x1fc))[_0x474a1e(0x159)]()||{};}function updateTimeshift(_0x27efad){const _0x46f96e=_0x58d203;let _0x512bc0=dbConfig[_0x46f96e(0x184)](_0x46f96e(0x15c))['find']({'botID':botID})[_0x46f96e(0x159)]();_0x512bc0&&dbConfig['get']('bot')[_0x46f96e(0x1b2)]({'botID':botID})['assign']({'timeshift':_0x27efad})[_0x46f96e(0x17f)](),config['timeshift']=_0x27efad,proxyEmit(_0x46f96e(0x137),emittedConfiguration());}async function storeConfiguration(_0x345ead){const _0x6223df=_0x58d203;let _0x543bcf=dbConfig['get'](_0x6223df(0x15c))[_0x6223df(0x1b2)]({'botID':botID})['value']();_0x345ead={..._0x345ead,'apiKey':crypt[_0x6223df(0x1b6)](secure['privateKey'],_0x345ead[_0x6223df(0x178)])['message'],'apiSecret':crypt[_0x6223df(0x1b6)](secure[_0x6223df(0x1bd)],_0x345ead['apiSecret'])[_0x6223df(0x198)]};if(_0x543bcf){if(_0x345ead[_0x6223df(0x178)]==_0x6223df(0x1db))_0x345ead[_0x6223df(0x178)]=config[_0x6223df(0x178)];if(_0x345ead['apiSecret']=='************')_0x345ead[_0x6223df(0x161)]=config[_0x6223df(0x161)];dbConfig[_0x6223df(0x184)](_0x6223df(0x15c))[_0x6223df(0x1b2)]({'botID':botID})['assign'](_0x345ead)[_0x6223df(0x17f)]();}else dbConfig['get']('bot')[_0x6223df(0x136)](_0x345ead)[_0x6223df(0x17f)](),process['send']({'status':_0x6223df(0x1da),'live':'running'});config={..._0x345ead};if(config[_0x6223df(0x14f)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x6223df(0x175)]({'botname':_0x345ead['botname']}),proxyEmit(_0x6223df(0x138)),reset();}async function storeHeadless(_0x2e725c){const _0xa110f1=_0x58d203,_0x5ef276={...config,'headless':_0x2e725c[_0xa110f1(0x191)]};let _0x591b92=dbConfig['get'](_0xa110f1(0x15c))['find']({'botID':botID})[_0xa110f1(0x159)]();_0x591b92&&dbConfig[_0xa110f1(0x184)]('bot')[_0xa110f1(0x1b2)]({'botID':botID})[_0xa110f1(0x192)](_0x5ef276)[_0xa110f1(0x17f)](),config={..._0x5ef276},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x8846ab){const _0x40796b=_0x58d203;return _0x8846ab[_0x40796b(0x1b5)]('/','');}function updateNumberCoins(_0x5941b6){const _0x31741e=_0x58d203;_0x5941b6[_0x31741e(0x17a)]&&_0x5941b6[_0x31741e(0x17a)]==_0x31741e(0x216)&&_0x5941b6[_0x31741e(0x1ff)][_0x31741e(0x20a)](_0x4bc320=>{const _0x14e6cf=_0x31741e;let _0xfe45ce=currentCoins[_0x14e6cf(0x1b2)](_0xd8f826=>_0xd8f826[_0x14e6cf(0x1a7)]==_0x4bc320[_0x14e6cf(0x1d8)]);if(_0xfe45ce)_0xfe45ce[_0x14e6cf(0x167)]=Number(_0x4bc320[_0x14e6cf(0x203)]);}),_0x5941b6[_0x31741e(0x17a)]&&_0x5941b6[_0x31741e(0x17a)]==_0x31741e(0x16b)&&(_0x5941b6[_0x31741e(0x141)]==_0x31741e(0x1d0)&&_0x5941b6[_0x31741e(0x18f)]==_0x31741e(0x130)&&lastOrders['forEach'](_0x51916e=>{const _0x4dc818=_0x31741e;if(_0x51916e[_0x4dc818(0x17b)]==_0x5941b6[_0x4dc818(0x17b)]){if(_0x51916e[_0x4dc818(0x144)])_0x51916e[_0x4dc818(0x170)]=_0x5941b6[_0x4dc818(0x14b)]*_0x51916e[_0x4dc818(0x12b)];else _0x51916e['filled']=_0x5941b6['accumulatedQuantity'];}}));}async function getCoins(_0x2c69dc=!![]){const _0x542aba=_0x58d203;let _0x597528,_0x3fe6b2=[],_0x3e1172=[],_0x1ef9e1=[];try{_0x597528=await exchange[_0x542aba(0x150)](),mybalances=_0x597528[_0x542aba(0x156)];if(!_0x2c69dc)for(const [_0x2dc45c,_0x2a3677]of Object[_0x542aba(0x1d9)](mybalances)){_0x1ef9e1[_0x542aba(0x136)](_0x2dc45c);}else config['portfolio']['forEach'](_0x3ecd97=>{const _0x5dacc7=_0x542aba;if(!_0x3ecd97['excluded'])_0x1ef9e1['push'](_0x3ecd97[_0x5dacc7(0x1a7)]);});for(const [_0x870bd4,_0x1691bd]of Object[_0x542aba(0x1d9)](mybalances)){if(_0x1ef9e1['includes'](_0x870bd4)){if((_0x1691bd[_0x542aba(0x155)]()!=0x0||config[_0x542aba(0x1bb)][_0x542aba(0x1b2)](_0x560f1d=>_0x560f1d[_0x542aba(0x1a7)]==_0x870bd4))&&(allSymbols[_0x542aba(0x1c4)](_0x870bd4+_0x542aba(0x213))||_0x870bd4==_0x542aba(0x174)))_0x3e1172[_0x542aba(0x136)]({'coin':_0x870bd4,'symbol':_0x870bd4+_0x542aba(0x213),'reverse':![],'number':_0x1691bd}),_0x870bd4!=_0x542aba(0x174)&&_0x3fe6b2['push'](_0x870bd4+_0x542aba(0x213));else(_0x1691bd[_0x542aba(0x155)]()!=0x0||config['portfolio'][_0x542aba(0x1b2)](_0x2d6bbb=>_0x2d6bbb[_0x542aba(0x1a7)]==_0x870bd4))&&allSymbols[_0x542aba(0x1c4)](_0x542aba(0x1a4)+_0x870bd4)&&(_0x3e1172[_0x542aba(0x136)]({'coin':_0x870bd4,'symbol':_0x542aba(0x1a4)+_0x870bd4,'reverse':!![],'number':_0x1691bd}),_0x870bd4!='BTC'&&_0x3fe6b2[_0x542aba(0x136)](_0x542aba(0x1a4)+_0x870bd4));}}}catch(_0x3c3465){if(!_0x2c69dc){if(_0x3c3465[_0x542aba(0x155)]()[_0x542aba(0x1c4)]('API-key\x20format\x20invalid'))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x3c3465['toString']()[_0x542aba(0x1c4)](_0x542aba(0x18c)))return logHistory(_0x542aba(0x196),_0x542aba(0x1ae)),![];else{if(_0x3c3465['toString']()[_0x542aba(0x1c4)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x542aba(0x196),_0x542aba(0x1fb)),![];else await handleError(_0x3c3465,'getCoins()');}}}else await handleError(_0x3c3465,'getCoins()');}return _0x3e1172;}async function getPortfolio(_0x3d5a2e){const _0x3c8004=_0x58d203;let _0x26d4e5=[],_0xfe6b7c=[],_0x5cb499,_0x4c598f=[],_0x1cd0ca,_0x979551;_0x3d5a2e[_0x3c8004(0x178)]===_0x3c8004(0x1db)||_0x3d5a2e[_0x3c8004(0x161)]===_0x3c8004(0x1db)?(_0x1cd0ca=config['apiKey'],_0x979551=config[_0x3c8004(0x161)]):(_0x1cd0ca=_0x3d5a2e['apiKey'],_0x979551=_0x3d5a2e[_0x3c8004(0x161)]);await initExchange(_0x1cd0ca,_0x979551);let _0x388059=await loadSymbols();if(_0x388059){_0x4c598f=await getCoins(![]);if(_0x4c598f===![])proxyEmit('portfolio',![]);else{_0x4c598f[_0x3c8004(0x20a)](_0x3e1c3f=>{const _0x1bebb7=_0x3c8004;_0x26d4e5[_0x1bebb7(0x136)](_0x3e1c3f[_0x1bebb7(0x18a)]);});try{_0xfe6b7c=await exchange[_0x3c8004(0x181)](_0x26d4e5);}catch(_0x3371d9){await handleError(_0x3371d9,_0x3c8004(0x211));}_0x4c598f[_0x3c8004(0x20a)](_0x557aab=>{const _0x329f3a=_0x3c8004;_0x557aab[_0x329f3a(0x1a7)]!=_0x329f3a(0x174)?_0x5cb499=_0x557aab['reverse']?0x1/_0xfe6b7c[_0x557aab['symbol']][_0x329f3a(0x205)]:_0xfe6b7c[_0x557aab[_0x329f3a(0x18a)]][_0x329f3a(0x205)]:_0x5cb499=0x1,_0x557aab[_0x329f3a(0x12b)]=formatResult(_0x5cb499,0x8);}),proxyEmit(_0x3c8004(0x1bb),_0x4c598f);}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x59fdf1){const _0xff5d36=_0x58d203;let _0x3b2f2f=!![];const _0xa52f03=!_0x59fdf1[_0xff5d36(0x144)]?markets[_0x59fdf1[_0xff5d36(0x18a)]]['limits'][_0xff5d36(0x1e2)][_0xff5d36(0x206)]:markets[_0x59fdf1[_0xff5d36(0x18a)]][_0xff5d36(0x218)][_0xff5d36(0x1ba)][_0xff5d36(0x206)],_0x19821b=!_0x59fdf1[_0xff5d36(0x144)]?markets[_0x59fdf1['symbol']][_0xff5d36(0x218)]['cost'][_0xff5d36(0x206)]:markets[_0x59fdf1[_0xff5d36(0x18a)]]['limits'][_0xff5d36(0x1e2)][_0xff5d36(0x206)];if(Math[_0xff5d36(0x176)](_0x59fdf1[_0xff5d36(0x134)])<_0xa52f03)_0x3b2f2f=![];if(Math['abs'](_0x59fdf1[_0xff5d36(0x134)])*_0x59fdf1['last']<_0x19821b)_0x3b2f2f=![];return _0x3b2f2f;}async function getBalances(){const _0x3518c4=_0x58d203;let _0x105bc0=0x0,_0x26f312;const _0x262a5d=config[_0x3518c4(0x17d)];currentCoins[_0x3518c4(0x20a)](_0x53f65c=>{const _0x5dc6d5=_0x3518c4;if(_0x53f65c[_0x5dc6d5(0x1a7)]!='BTC'){let _0x549bf2=global['ticker'][noslash(_0x53f65c[_0x5dc6d5(0x18a)])];_0x26f312=_0x53f65c[_0x5dc6d5(0x144)]?0x1/_0x549bf2:_0x549bf2;}else _0x26f312=0x1;let _0x2d6e76=_0x53f65c[_0x5dc6d5(0x167)]*_0x26f312;_0x105bc0+=_0x2d6e76,_0x53f65c[_0x5dc6d5(0x205)]=formatResult(Number(_0x26f312),0x8),_0x53f65c[_0x5dc6d5(0x159)]=_0x2d6e76;}),currentCoins[_0x3518c4(0x20a)](_0x5bb11c=>{const _0x3d88e1=_0x3518c4;let _0x39b165=config[_0x3d88e1(0x1bb)]['find'](_0x1f4c2c=>_0x1f4c2c[_0x3d88e1(0x1a7)]==_0x5bb11c[_0x3d88e1(0x1a7)]),_0x29b042=Number(_0x39b165[_0x3d88e1(0x1f5)]),_0x10d229=_0x5bb11c[_0x3d88e1(0x159)]/_0x105bc0*0x64,_0x3c9b0b=_0x29b042*_0x105bc0/0x64/_0x5bb11c['last']-_0x5bb11c['number'];_0x5bb11c[_0x3d88e1(0x1f5)]=formatResult(_0x10d229,0x3),_0x5bb11c['target']=formatResult(_0x29b042,0x3),_0x5bb11c[_0x3d88e1(0x134)]=formatResult(_0x3c9b0b,0x8),_0x5bb11c[_0x3d88e1(0x19a)]='',_0x5bb11c[_0x3d88e1(0x183)]='';if(_0x5bb11c['coin']!=_0x3d88e1(0x174)){if(_0x5bb11c[_0x3d88e1(0x1f5)]>_0x29b042)_0x5bb11c[_0x3d88e1(0x19a)]='sell',_0x5bb11c['valid']=checkMinimums(_0x5bb11c);else _0x5bb11c[_0x3d88e1(0x1f5)]<_0x29b042&&(_0x5bb11c[_0x3d88e1(0x19a)]='buy',_0x5bb11c[_0x3d88e1(0x183)]=checkMinimums(_0x5bb11c));}_0x5bb11c[_0x3d88e1(0x1e3)]=_0x5bb11c[_0x3d88e1(0x1f5)]/_0x5bb11c['target']-0x1;}),currentCoins['sort']((_0x103456,_0x391f77)=>_0x103456[_0x3518c4(0x1e3)]<_0x391f77[_0x3518c4(0x1e3)]?0x1:_0x391f77[_0x3518c4(0x1e3)]<_0x103456[_0x3518c4(0x1e3)]?-0x1:0x0);const _0x3a20d3=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a20d3[_0x3518c4(0x1ca)],'usd':_0x3a20d3[_0x3518c4(0x1c5)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x262a5d},proxyEmit(_0x3518c4(0x1ff),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3518c4(0x191)])headlessMode({'portfolio':currentCoins,'threshold':_0x262a5d});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xf45adc=_0x58d203;if(!lastBalances)return;let _0x1e8c52=await getStartingBalances(![]),_0x5ba533=[],_0x9a9e8=[],_0x1749b0;JSON['parse'](lastBalances[_0xf45adc(0x1bb)])[_0xf45adc(0x20a)](_0x472a3d=>{const _0x29fb92=_0xf45adc;let _0x303cec={'coin':_0x472a3d[_0x29fb92(0x1a7)],'number':_0x472a3d[_0x29fb92(0x167)],'price':_0x472a3d[_0x29fb92(0x205)]};_0x5ba533['push'](_0x303cec);if(!_0x1e8c52[_0x29fb92(0x131)]||!_0x1e8c52[_0x29fb92(0x131)][_0x29fb92(0x1b2)](_0x364d99=>_0x364d99[_0x29fb92(0x1a7)]==_0x472a3d['coin']&&_0x364d99[_0x29fb92(0x167)]!=0x0))_0x9a9e8[_0x29fb92(0x136)](_0x303cec);});const _0x59c673=await getFiat();_0x1749b0={'date':lastBalances['time'][_0xf45adc(0x1c3)]('\x20')[0x0],'eur':_0x59c673['eur'],'usd':_0x59c673[_0xf45adc(0x1c5)],'coins':_0x5ba533};let _0x5b1aff=dbPerformance[_0xf45adc(0x184)](_0xf45adc(0x1de))[_0xf45adc(0x1b2)]({'date':_0x1749b0[_0xf45adc(0x1af)]})['value']();_0x5b1aff?dbPerformance['get'](_0xf45adc(0x1de))['find']({'date':_0x1749b0[_0xf45adc(0x1af)]})[_0xf45adc(0x192)](_0x1749b0)[_0xf45adc(0x17f)]():dbPerformance[_0xf45adc(0x184)](_0xf45adc(0x1de))[_0xf45adc(0x136)](_0x1749b0)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x4c4db5=_0x58d203;if(dbPerformance['has'](_0x4c4db5(0x1de))[_0x4c4db5(0x159)]()){let _0x24cc7b=dbPerformance[_0x4c4db5(0x184)](_0x4c4db5(0x1de))['sortBy'](_0x4c4db5(0x1af))[_0x4c4db5(0x159)]();proxyEmit('performance',_0x24cc7b),lastPerformanceEmitted=getDate();}else proxyEmit(_0x4c4db5(0x173),[]);}async function getStartingBalances(_0x2cb0a6=!![]){const _0x4a2d04=_0x58d203;let _0x1ab4a5=dbPerformance['get'](_0x4a2d04(0x1de))[_0x4a2d04(0x1b2)]({'date':config['startdate']})['value']();config[_0x4a2d04(0x178)]!=''&&!_0x1ab4a5&&(await setStartDatePerformance(config),_0x1ab4a5=dbPerformance[_0x4a2d04(0x184)]('data')['find']({'date':config[_0x4a2d04(0x125)]})[_0x4a2d04(0x159)]());if(config['apiKey']==''||!_0x1ab4a5)return{};let _0x4396d9=0x0,_0x57bdbb=0x0,_0x43c150=0x0,_0x17542f=[],_0x427dd4=0x0;config[_0x4a2d04(0x1bb)]['forEach'](_0x1cfa21=>{const _0x453777=_0x4a2d04;!_0x1cfa21[_0x453777(0x13b)]&&(_0x17542f[_0x427dd4]={'coin':_0x1cfa21['coin'],'symbol':_0x1cfa21[_0x453777(0x18a)],'number':_0x1cfa21[_0x453777(0x188)],'price':_0x1cfa21[_0x453777(0x1a1)]},_0x4396d9+=_0x1cfa21[_0x453777(0x1a1)]*_0x1cfa21[_0x453777(0x188)],_0x57bdbb+=_0x1cfa21[_0x453777(0x1a1)]*_0x1cfa21[_0x453777(0x188)]*_0x1ab4a5[_0x453777(0x1ca)],_0x43c150+=_0x1cfa21['startprice']*_0x1cfa21[_0x453777(0x188)]*_0x1ab4a5[_0x453777(0x1c5)],_0x427dd4++);});let _0x50cc13={'btc':_0x4396d9,'eur':_0x57bdbb,'usd':_0x43c150,'coins':_0x17542f};if(_0x2cb0a6)proxyEmit('starting-balances',_0x50cc13);return _0x50cc13;}function headlessMode(_0x1635f2){const _0x5e23cf=_0x58d203;let _0x14194a=_0x1635f2[_0x5e23cf(0x1bb)],_0x1ed724=_0x1635f2['threshold'],_0x50bed2=[];for(let _0x964151 of _0x14194a){if(_0x964151[_0x5e23cf(0x1a7)]!='BTC'){if(_0x964151[_0x5e23cf(0x1f5)]/_0x964151['target']-0x1>=_0x1ed724/0x64){if(_0x964151[_0x5e23cf(0x183)])_0x50bed2['push'](_0x964151);}else{if(_0x964151['distribution']/_0x964151[_0x5e23cf(0x1ac)]-0x1<=-_0x1ed724/0x64){if(_0x964151[_0x5e23cf(0x183)])_0x50bed2[_0x5e23cf(0x136)](_0x964151);}}}}_0x50bed2[_0x5e23cf(0x16d)]>0x0&&placeOrder(_0x50bed2);}function symbolToCoin(_0x388f3c){const _0x553cee=_0x58d203;let _0x504feb;if(_0x388f3c[_0x553cee(0x1c4)](_0x553cee(0x213)))_0x504feb=_0x388f3c['replace'](_0x553cee(0x213),'');if(_0x388f3c[_0x553cee(0x1c4)](_0x553cee(0x1a4)))_0x504feb=_0x388f3c[_0x553cee(0x1b5)](_0x553cee(0x1a4),'');return _0x504feb;}async function validateOrders(_0x42a0d8=0x0){const _0x4dca66=_0x58d203;let _0x5e5c4b=[],_0x439452=config[_0x4dca66(0x1ee)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4dca66(0x21b)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x4dca66(0x20a)](_0x1e6baa=>{const _0x2c2179=_0x4dca66;let _0x27e713=previousCoins[_0x2c2179(0x1b2)](_0x4a8899=>_0x4a8899[_0x2c2179(0x1a7)]==symbolToCoin(_0x1e6baa[_0x2c2179(0x18a)])),_0xfd119=currentCoins[_0x2c2179(0x1b2)](_0x301946=>_0x301946[_0x2c2179(0x1a7)]==symbolToCoin(_0x1e6baa[_0x2c2179(0x18a)])),_0x4a4df2,_0x13af36;_0x1e6baa[_0x2c2179(0x19a)]==_0x2c2179(0x19d)&&!_0x1e6baa[_0x2c2179(0x144)]||_0x1e6baa[_0x2c2179(0x19a)]==_0x2c2179(0x189)&&_0x1e6baa[_0x2c2179(0x144)]?(_0x4a4df2=_0x27e713[_0x2c2179(0x167)]+0.9*_0x1e6baa[_0x2c2179(0x170)],_0x13af36=_0x27e713[_0x2c2179(0x167)]+1.1*_0x1e6baa[_0x2c2179(0x170)]):(_0x4a4df2=_0x27e713[_0x2c2179(0x167)]-1.1*_0x1e6baa['filled'],_0x13af36=_0x27e713[_0x2c2179(0x167)]-0.9*_0x1e6baa[_0x2c2179(0x170)]);const _0x5a2cd2=_0x1e6baa[_0x2c2179(0x170)]!=0x0&&_0xfd119['number']>=_0x4a4df2&&_0xfd119['number']<=_0x13af36;_0x5e5c4b['push'](_0x5a2cd2);if(_0x5a2cd2&&config[_0x2c2179(0x1ee)]!=_0x2c2179(0x163)){if(_0x1e6baa['reverse'])logHistory(_0x2c2179(0x1ab),'Order\x20filled:\x20'+_0x1e6baa['symbol']+'\x20'+_0x1e6baa[_0x2c2179(0x19a)]+'\x20#'+formatResult(_0x1e6baa[_0x2c2179(0x170)]/_0x1e6baa[_0x2c2179(0x12b)],0x8)+'\x20@'+formatResult(_0x1e6baa[_0x2c2179(0x12b)],0x8));else logHistory(_0x2c2179(0x1ab),_0x2c2179(0x1b9)+_0x1e6baa[_0x2c2179(0x18a)]+'\x20'+_0x1e6baa[_0x2c2179(0x19a)]+'\x20#'+formatResult(_0x1e6baa['filled'],0x8)+'\x20@'+formatResult(_0x1e6baa[_0x2c2179(0x12b)],0x8));}}),_0x5e5c4b[_0x4dca66(0x20a)]((_0xb6297d,_0x2c5350)=>{const _0x3d208c=_0x4dca66;if(_0xb6297d)lastOrders[_0x3d208c(0x220)](_0x2c5350,0x1);});if(_0x42a0d8<_0x439452&&_0x5e5c4b[_0x4dca66(0x1c4)](![])){if(_0x42a0d8==0x0){config[_0x4dca66(0x1ee)]=='market'?logHistory(_0x4dca66(0x196),_0x4dca66(0x1fd)):logHistory(_0x4dca66(0x196),_0x4dca66(0x193));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x42a0d8);},0xa*0x3e8);}else{(_0x42a0d8==0x1||_0x42a0d8==Math['round'](_0x439452/0x2)||_0x42a0d8==_0x439452-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x42a0d8);},validateOrderInterval);}}else{lockOrders=![];if(_0x42a0d8>0x0&&!_0x5e5c4b[_0x4dca66(0x1c4)](![]))config['ordertype']=='market'?logHistory('success',_0x4dca66(0x1cd)):logHistory(_0x4dca66(0x151),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x42a0d8>0x0&&_0x5e5c4b[_0x4dca66(0x1c4)](![])&&(config['ordertype']==_0x4dca66(0x163)?logHistory(_0x4dca66(0x151),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4dca66(0x124)](_0x439452*validateOrderInterval/0xea60)+_0x4dca66(0x1b7)):(lastOrders['forEach'](async _0x3f373c=>{const _0x31b79f=_0x4dca66;try{const _0x1b57ab=await exchange[_0x31b79f(0x1f6)](_0x3f373c['orderId'],_0x3f373c[_0x31b79f(0x18a)]);}catch(_0x525fdc){if(_0x525fdc[_0x31b79f(0x155)]()[_0x31b79f(0x1c4)]('OrderNotFound')){}else await handleError(_0x525fdc,'cancelOrder()');}}),logHistory(_0x4dca66(0x151),_0x4dca66(0x171)+Math[_0x4dca66(0x124)](_0x439452*validateOrderInterval/0xea60)+_0x4dca66(0x1b7))));}}async function resetCoinResults(){const _0x327861=_0x58d203;dbCoinResults['get'](_0x327861(0x131))[_0x327861(0x221)]()[_0x327861(0x17f)]();let _0x380901=await getStartingBalances(![]);_0x380901['coins'][_0x327861(0x20a)](_0xa75c98=>{const _0x10a499=_0x327861,_0x2d7b74=_0xa75c98[_0x10a499(0x18a)][_0x10a499(0x1c4)](_0x10a499(0x1a4));if(_0xa75c98[_0x10a499(0x1a7)]!='BTC'){let _0x3f43de={'coin':_0xa75c98[_0x10a499(0x1a7)],'number':_0xa75c98['number'],'breakeven':_0xa75c98[_0x10a499(0x12b)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x10a499(0x131))[_0x10a499(0x136)](_0x3f43de)[_0x10a499(0x17f)]();}});}async function updateCoinResults(_0x55b0b4){const _0x5d147c=_0x58d203;let _0x3ac5a8,_0x431c2a,_0x5a6107,_0x556f0e,_0xa14490,_0x11af28,_0x946555=dbCoinResults[_0x5d147c(0x184)](_0x5d147c(0x131))[_0x5d147c(0x1b2)]({'coin':_0x55b0b4['coin']})[_0x5d147c(0x159)]();if(!_0x946555)return;if(_0x55b0b4[_0x5d147c(0x13a)]&&_0x55b0b4[_0x5d147c(0x13a)]['currency']=='BTC')_0x3ac5a8=_0x55b0b4[_0x5d147c(0x13a)]['cost'];else{if(_0x55b0b4[_0x5d147c(0x13a)]&&_0x55b0b4[_0x5d147c(0x13a)][_0x5d147c(0x16f)]==_0x5d147c(0x1bf))_0x3ac5a8=_0x55b0b4[_0x5d147c(0x13a)][_0x5d147c(0x1ba)]*global[_0x5d147c(0x1e9)][_0x5d147c(0x210)];else _0x3ac5a8=0.001*_0x55b0b4[_0x5d147c(0x170)];}const _0x27aaa0=_0x55b0b4[_0x5d147c(0x18a)]['includes'](_0x5d147c(0x1a4));_0x27aaa0&&(_0x11af28={'coin':_0x55b0b4[_0x5d147c(0x1a7)],'symbol':_0x55b0b4[_0x5d147c(0x18a)],'filled':_0x55b0b4[_0x5d147c(0x170)]*_0x55b0b4[_0x5d147c(0x12b)],'side':_0x55b0b4[_0x5d147c(0x19a)]=='sell'?_0x5d147c(0x19d):'sell','price':0x1/_0x55b0b4['price']},_0x55b0b4={..._0x11af28});_0x55b0b4[_0x5d147c(0x19a)]==_0x5d147c(0x19d)?_0x5a6107=(_0x946555[_0x5d147c(0x212)]*_0x946555[_0x5d147c(0x167)]+_0x55b0b4['price']*_0x55b0b4[_0x5d147c(0x170)])/(_0x946555[_0x5d147c(0x167)]+_0x55b0b4[_0x5d147c(0x170)]):_0x5a6107=(_0x946555[_0x5d147c(0x212)]*_0x946555[_0x5d147c(0x167)]-_0x55b0b4[_0x5d147c(0x12b)]*_0x55b0b4[_0x5d147c(0x170)])/(_0x946555[_0x5d147c(0x167)]-_0x55b0b4[_0x5d147c(0x170)]);_0x55b0b4[_0x5d147c(0x19a)]=='buy'?_0x556f0e=_0x946555[_0x5d147c(0x217)]:_0x556f0e=_0x946555['realized']+(_0x55b0b4[_0x5d147c(0x12b)]-_0x946555[_0x5d147c(0x212)])*_0x55b0b4[_0x5d147c(0x170)];_0x431c2a=_0x55b0b4[_0x5d147c(0x19a)]==_0x5d147c(0x189)?_0x946555['number']-_0x55b0b4['filled']:_0x946555['number']+_0x55b0b4[_0x5d147c(0x170)],_0xa14490=(_0x55b0b4[_0x5d147c(0x12b)]-_0x5a6107)*_0x431c2a;let _0x6ed3e={'coin':_0x55b0b4[_0x5d147c(0x1a7)],'number':_0x431c2a,'breakeven':formatResult(_0x5a6107,0x8),'realized':formatResult(_0x556f0e,0x8),'unrealized':formatResult(_0xa14490,0x8),'fees':formatResult(_0x946555[_0x5d147c(0x1e7)]+_0x3ac5a8,0x8),'sells':_0x55b0b4[_0x5d147c(0x19a)]=='sell'?_0x946555[_0x5d147c(0x15a)]+0x1:_0x946555[_0x5d147c(0x15a)],'buys':_0x55b0b4['side']==_0x5d147c(0x19d)?_0x946555[_0x5d147c(0x1c0)]+0x1:_0x946555[_0x5d147c(0x1c0)]};dbCoinResults[_0x5d147c(0x184)]('coins')[_0x5d147c(0x1b2)]({'coin':_0x55b0b4[_0x5d147c(0x1a7)]})[_0x5d147c(0x192)](_0x6ed3e)[_0x5d147c(0x17f)]();}async function placeOrder(_0x1eed76){const _0x2d9e25=_0x58d203,_0x3b92d3=config['ordertype']==_0x2d9e25(0x163)?_0x2d9e25(0x163):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x2d9e25(0x14e)](JSON['stringify'](currentCoins));for(const _0xaf467f of _0x1eed76){let _0x3740e4,_0xc5706b,_0x2f4d70,_0x534423,_0x4ec48a,_0x15308e=_0xaf467f['symbol'];try{const _0x1ba0d3=await exchange[_0x2d9e25(0x181)](_0x15308e),_0x2a8cd9=_0x1ba0d3[_0x15308e];_0x3740e4=_0x2a8cd9[_0x2d9e25(0x205)],_0xc5706b=_0x2a8cd9['bid'],_0x2f4d70=_0x2a8cd9[_0x2d9e25(0x15b)];_0xaf467f[_0x2d9e25(0x144)]?(_0x534423=_0xaf467f[_0x2d9e25(0x19a)]=='buy'?'sell':_0x2d9e25(0x19d),_0x4ec48a=Math[_0x2d9e25(0x176)](_0xaf467f[_0x2d9e25(0x134)])/_0x3740e4):(_0x534423=_0xaf467f['side'],_0x4ec48a=Math[_0x2d9e25(0x176)](_0xaf467f[_0x2d9e25(0x134)]));_0x3b92d3==_0x2d9e25(0x177)&&(config[_0x2d9e25(0x1ee)]=='limit-high'&&(_0x3740e4=_0x534423==_0x2d9e25(0x19d)?_0xc5706b:_0x2f4d70),config[_0x2d9e25(0x1ee)]==_0x2d9e25(0x146)&&(_0x3740e4=_0x534423==_0x2d9e25(0x19d)?_0x2f4d70:_0xc5706b));_0x4ec48a=formatResult(_0x4ec48a,0x8),_0x3740e4=formatResult(_0x3740e4,0x8);const _0x2ea963=await exchange['createOrder'](_0x15308e,_0x3b92d3,_0x534423,_0x4ec48a,_0x3740e4);lastOrders[_0x2d9e25(0x136)]({'orderId':_0x2ea963['id'],'symbol':_0x15308e,'side':_0x534423,'reverse':_0xaf467f[_0x2d9e25(0x144)],'amount':_0xaf467f[_0x2d9e25(0x144)]?_0x2ea963[_0x2d9e25(0x1e2)]*_0x2ea963[_0x2d9e25(0x12b)]:_0x2ea963[_0x2d9e25(0x1e2)],'filled':_0xaf467f[_0x2d9e25(0x144)]?_0x2ea963['filled']*_0x2ea963['price']:_0x2ea963[_0x2d9e25(0x170)],'price':_0x2ea963[_0x2d9e25(0x12b)]});const _0x30e081=_0x3b92d3==_0x2d9e25(0x163)?_0x2d9e25(0x16c):config[_0x2d9e25(0x1ee)]=='limit-high'?_0x2d9e25(0x1d3):_0x2d9e25(0x15e);if(_0x3b92d3==_0x2d9e25(0x163))logHistory(_0x2d9e25(0x1ab),_0x30e081+_0x2d9e25(0x186)+_0x15308e+'\x20'+_0x534423+'\x20#'+formatResult(_0x2ea963['filled'],0x8)+'\x20@'+formatResult(_0x2ea963[_0x2d9e25(0x12b)],0x8));else logHistory(_0x2d9e25(0x1ab),_0x30e081+_0x2d9e25(0x186)+_0x15308e+'\x20'+_0x534423+'\x20#'+formatResult(_0x2ea963[_0x2d9e25(0x1e2)],0x8)+'\x20@'+formatResult(_0x2ea963['price'],0x8));_0x2ea963['coin']=_0xaf467f[_0x2d9e25(0x1a7)],await updateCoinResults(_0x2ea963);if(config['cooldown']!=0x0){let _0x1a4dd1=null;if(cooldownTracker[_0x2d9e25(0x16d)]==config[_0x2d9e25(0x21d)]-0x1)_0x1a4dd1=cooldownTracker['shift']();const _0x58aedd=getTimeStamp();cooldownTracker[_0x2d9e25(0x136)](_0x58aedd);if(_0x1a4dd1){const _0x36656b=fns['differenceInSeconds'](new Date(_0x58aedd),new Date(_0x1a4dd1));_0x36656b<cooldownInterval&&(logHistory(_0x2d9e25(0x196),'Executed\x20'+config[_0x2d9e25(0x21d)]+_0x2d9e25(0x1cb)+cooldownInterval/0x3c+_0x2d9e25(0x12f)+cooldownPeriod/(0xe10*0x3e8)+_0x2d9e25(0x17e)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x416106){if(_0x416106[_0x2d9e25(0x155)]()[_0x2d9e25(0x1c4)](_0x2d9e25(0x214)))logHistory('error',_0x2d9e25(0x1d5)+_0x15308e);else{if(_0x416106[_0x2d9e25(0x155)]()[_0x2d9e25(0x1c4)](_0x2d9e25(0x1e8)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x15308e);else await handleError(_0x416106,'placeOrder()');}}}if(lastOrders[_0x2d9e25(0x16d)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x2d9e25(0x191)]&&(config['ordertype']=='market'?logHistory(_0x2d9e25(0x196),_0x2d9e25(0x1d7)):logHistory(_0x2d9e25(0x196),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x2d9e25(0x191)]&&logHistory(_0x2d9e25(0x196),_0x2d9e25(0x1f2)));}}function logHistory(_0x461c66,_0x52e9a7,_0x54583a=''){const _0x13d29b=_0x58d203;let _0x232403={'time':getTimeStamp(),'type':_0x461c66,'event':_0x52e9a7};dbLogs[_0x13d29b(0x184)](_0x13d29b(0x195))[_0x13d29b(0x136)](_0x232403)[_0x13d29b(0x17f)]();if(_0x54583a=='')_0x54583a=_0x52e9a7;proxyEmit(_0x13d29b(0x179),{'log':_0x232403,'summary':_0x54583a}),process['send']({'telegram':_0x232403}),logging(''+_0x232403['event']);}function emitHistory(_0x7d5877={}){const _0x166e57=_0x58d203;Object[_0x166e57(0x180)](_0x7d5877)[_0x166e57(0x16d)]==0x0&&(_0x7d5877={'type':['order','event'],'event':'','page':0x1});if(_0x7d5877[_0x166e57(0x127)][_0x166e57(0x1c4)](_0x166e57(0x179)))_0x7d5877[_0x166e57(0x127)][_0x166e57(0x220)](_0x7d5877[_0x166e57(0x127)][_0x166e57(0x133)]('event'),0x1,_0x166e57(0x196),_0x166e57(0x151));if(dbLogs[_0x166e57(0x1dd)](_0x166e57(0x195))[_0x166e57(0x159)]()){let _0x4dc178=dbLogs[_0x166e57(0x184)](_0x166e57(0x195))['filter'](_0x1ba79a=>{const _0x245b58=_0x166e57;if(_0x7d5877[_0x245b58(0x127)]['length']==0x0)return![];else return _0x7d5877[_0x245b58(0x127)][_0x245b58(0x1c4)](_0x1ba79a[_0x245b58(0x127)]);})[_0x166e57(0x157)](_0x3be7f9=>{const _0x21472a=_0x166e57;if(_0x7d5877['event']=='')return!![];else return _0x3be7f9[_0x21472a(0x179)]['toLowerCase']()[_0x21472a(0x1c4)](_0x7d5877[_0x21472a(0x179)][_0x21472a(0x1f8)]());})[_0x166e57(0x166)](_0x166e57(0x12e)),_0x36cba7=_0x4dc178['value']()['length'];_0x4dc178=_0x4dc178[_0x166e57(0x144)]()[_0x166e57(0x223)]((_0x7d5877[_0x166e57(0x142)]-0x1)*logPageSize,_0x7d5877[_0x166e57(0x142)]*logPageSize-0x1)[_0x166e57(0x144)]()[_0x166e57(0x159)](),proxyEmit(_0x166e57(0x1f1),{'logs':_0x4dc178,'total':_0x36cba7});}else proxyEmit(_0x166e57(0x1f1),{'logs':[],'total':0x0});}async function pauseBot(_0x9714a6){const _0x426412=_0x58d203,_0x55d962=new Date()[_0x426412(0x1c1)]();if(!lastBotPause)lastBotPause=new Date()[_0x426412(0x1c1)]();else{if(_0x55d962-lastBotPause-pauseBotInterval<0x1388){consecutivePauses++;if(consecutivePauses>0x5)process[_0x426412(0x1d6)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x9714a6),botPaused=![],reset();}}async function handleError(_0x2e1523,_0x1a1398,_0x5f1d87=''){const _0x209fe8=_0x58d203;if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)](_0x209fe8(0x1e6)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x1b8)),await pauseBot(pauseBotInterval);else{if(_0x2e1523[_0x209fe8(0x155)]()['includes'](_0x209fe8(0x16a)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x165)),await pauseBot(pauseBotInterval);else{if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)](_0x209fe8(0x1cf)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x194)),await pauseBot(pauseBotInterval);else{if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)](_0x209fe8(0x1ed)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x13e)),logHistory(_0x209fe8(0x196),_0x209fe8(0x14a)),process[_0x209fe8(0x1d6)](0x4d);else{if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)](_0x209fe8(0x18c)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x20d)),logHistory('error',_0x209fe8(0x14a)),process[_0x209fe8(0x1d6)](0x4d);else{if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x21a)),logHistory(_0x209fe8(0x196),_0x209fe8(0x14a)),process['exit'](0x4d);else{if(_0x2e1523[_0x209fe8(0x155)]()['includes'](_0x209fe8(0x190)))logHistory(_0x209fe8(0x196),_0x1a1398+_0x209fe8(0x18e)),logHistory('error',_0x209fe8(0x14a)),process[_0x209fe8(0x1d6)](0x4d);else{if(_0x2e1523[_0x209fe8(0x155)]()[_0x209fe8(0x1c4)](_0x209fe8(0x132)))logHistory(_0x209fe8(0x196),_0x1a1398+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x209fe8(0x196),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['exit'](0x4d);else _0x2e1523[_0x209fe8(0x155)]()['includes']('InsufficientFunds')?logHistory('error',_0x1a1398+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x209fe8(0x196),_0x1a1398+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0x1a1398+_0x209fe8(0x20e),_0x2e1523),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x122ba5,_0x56cca5){const _0x2fb279=_0x58d203;return parseFloat(_0x122ba5[_0x2fb279(0x204)](_0x56cca5));}function logging(_0x383b47,_0x5ee953=''){const _0xa06e83=_0x58d203;console[_0xa06e83(0x1c9)](getTimeStamp()+_0xa06e83(0x1c6)+botID+'\x20>\x20'+_0x383b47,_0x5ee953);}function getServerTime(){const _0x1fd482=_0x58d203,_0x3ec776=new Date();return _0x3ec776[_0x1fd482(0x162)]()+'/'+(_0x3ec776[_0x1fd482(0x20c)]()+0x1)[_0x1fd482(0x155)]()[_0x1fd482(0x1ec)](0x2,'0')+'/'+_0x3ec776[_0x1fd482(0x1e1)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3ec776[_0x1fd482(0x207)]()[_0x1fd482(0x155)]()[_0x1fd482(0x1ec)](0x2,'0')+':'+_0x3ec776['getMinutes']()[_0x1fd482(0x155)]()[_0x1fd482(0x1ec)](0x2,'0')+':'+_0x3ec776[_0x1fd482(0x1f4)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x41e7e8=_0x58d203,_0x28a25e=shiftedTime();return _0x28a25e[_0x41e7e8(0x162)]()+'/'+(_0x28a25e[_0x41e7e8(0x20c)]()+0x1)[_0x41e7e8(0x155)]()[_0x41e7e8(0x1ec)](0x2,'0')+'/'+_0x28a25e[_0x41e7e8(0x1e1)]()[_0x41e7e8(0x155)]()['padStart'](0x2,'0')+'\x20'+_0x28a25e['getHours']()[_0x41e7e8(0x155)]()[_0x41e7e8(0x1ec)](0x2,'0')+':'+_0x28a25e[_0x41e7e8(0x153)]()[_0x41e7e8(0x155)]()[_0x41e7e8(0x1ec)](0x2,'0')+':'+_0x28a25e[_0x41e7e8(0x1f4)]()[_0x41e7e8(0x155)]()[_0x41e7e8(0x1ec)](0x2,'0');}function getDate(){const _0x1ca39d=_0x58d203,_0x14f03e=shiftedTime();return _0x14f03e[_0x1ca39d(0x162)]()+'/'+(_0x14f03e['getMonth']()+0x1)[_0x1ca39d(0x155)]()[_0x1ca39d(0x1ec)](0x2,'0')+'/'+_0x14f03e['getDate']()[_0x1ca39d(0x155)]()['padStart'](0x2,'0');}function getHour(){const _0x1254d5=_0x58d203,_0x3ac5de=shiftedTime();return _0x3ac5de[_0x1254d5(0x207)]()[_0x1254d5(0x155)]()[_0x1254d5(0x1ec)](0x2,'0');}function sleep(_0x528538){return new Promise(_0xf9f1d9=>setTimeout(_0xf9f1d9,_0x528538));}function shiftedTime(){const _0x1fe1d0=new Date();let _0x33de06=_0x1fe1d0;if(config&&config['timeshift']!==0x0)_0x33de06=fns['add'](_0x1fe1d0,{'hours':config['timeshift']});return _0x33de06;}