const _0x249b4e=_0xa1fc;(function(_0xf743cc,_0x6268c0){const _0x34055d=_0xa1fc,_0x5981fe=_0xf743cc();while(!![]){try{const _0x5524ed=parseInt(_0x34055d(0x174))/0x1*(-parseInt(_0x34055d(0x19c))/0x2)+-parseInt(_0x34055d(0x150))/0x3*(-parseInt(_0x34055d(0xf1))/0x4)+-parseInt(_0x34055d(0xab))/0x5+-parseInt(_0x34055d(0x1bc))/0x6*(parseInt(_0x34055d(0x100))/0x7)+parseInt(_0x34055d(0x221))/0x8*(parseInt(_0x34055d(0x1c9))/0x9)+-parseInt(_0x34055d(0x139))/0xa+parseInt(_0x34055d(0xc2))/0xb;if(_0x5524ed===_0x6268c0)break;else _0x5981fe['push'](_0x5981fe['shift']());}catch(_0x1733d6){_0x5981fe['push'](_0x5981fe['shift']());}}}(_0x438f,0xd8e08));const _0x5c5706=function(){let _0x57850f=!![];return function(_0x2fb9f8,_0x5b22bb){const _0x35c7ea=_0x57850f?function(){const _0xf8cb0c=_0xa1fc;if(_0x5b22bb){const _0x4bf690=_0x5b22bb[_0xf8cb0c(0x1f2)](_0x2fb9f8,arguments);return _0x5b22bb=null,_0x4bf690;}}:function(){};return _0x57850f=![],_0x35c7ea;};}(),_0x596829=_0x5c5706(this,function(){const _0x5a2a2f=_0xa1fc;return _0x596829[_0x5a2a2f(0x7a)]()[_0x5a2a2f(0x187)]('(((.+)+)+)+$')['toString']()['constructor'](_0x596829)[_0x5a2a2f(0x187)](_0x5a2a2f(0x1a1));});_0x596829();'use strict';const ccxt=require('ccxt'),low=require(_0x249b4e(0x17f)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x249b4e(0x1ca)),forge=require(_0x249b4e(0x144)),util=require(_0x249b4e(0x1ef)),argv=require(_0x249b4e(0x1ea))(process[_0x249b4e(0x9b)]['slice'](0x2))['argv'],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x249b4e(0x93),'BUSD','TUSD',_0x249b4e(0xad),_0x249b4e(0x116),_0x249b4e(0x17a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x249b4e(0x170)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x249b4e(0x19d)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x249b4e(0x158)+pauseBotInterval/0xea60+_0x249b4e(0x117),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require('./version.json')['version'],environment=require(_0x249b4e(0x123))[_0x249b4e(0x82)]||_0x249b4e(0x134),botID=process['argv'][0x2]||_0x249b4e(0x1bb),pattern=/^[0-9]{3}$/;!pattern[_0x249b4e(0x193)](botID)&&(console[_0x249b4e(0x218)](_0x249b4e(0x16b)+botID+_0x249b4e(0x15f)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x249b4e(0x10d)+userID+'/':_0x249b4e(0x10d),logspath=userID?_0x249b4e(0x210)+userID+'/':_0x249b4e(0x210),loggerfile=fs[_0x249b4e(0x1d9)](logspath+_0x249b4e(0xd9),{'flags':'a'});!fs[_0x249b4e(0x8d)](configpath)&&fs[_0x249b4e(0x11b)](configpath);!fs['existsSync'](logspath)&&fs[_0x249b4e(0x11b)](logspath);const configfile=configpath+_0x249b4e(0x180)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x249b4e(0xca),performancefile=configpath+_0x249b4e(0x180)+botID+'-performance.json',coinresultsfile=configpath+_0x249b4e(0x180)+botID+_0x249b4e(0x1f5),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x249b4e(0x151),configbackuppath=configpath+_0x249b4e(0x87),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x249b4e(0x9c)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x249b4e(0x9c)]({'data':[],'version':serverversion})[_0x249b4e(0x1d5)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x249b4e(0x9c)]({'bot':[],'version':serverversion})[_0x249b4e(0x1d5)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x249b4e(0x9c)]({'coins':[],'version':serverversion})[_0x249b4e(0x1d5)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5c6adc=>{const _0x560a42=_0x249b4e;console[_0x560a42(0x218)](_0x5c6adc);},'simple':_0x5e5fd2=>{const _0x6864b2=_0x249b4e;console[_0x6864b2(0x218)](_0x5e5fd2),loggerfile[_0x6864b2(0x1d5)](util['format'](_0x5e5fd2)+'\x0a');},'full':async(_0x4ae560,_0xf3f3b8='')=>{const _0x534afa=_0x249b4e;let _0x2e2301;if(config[_0x534afa(0x190)])_0x2e2301=getTimeStamp()+':\x20'+config['botname']+_0x534afa(0x107)+_0x4ae560;else _0x2e2301=getTimeStamp()+_0x534afa(0x12c)+botID+'\x20>\x20'+_0x4ae560;console['log'](_0x2e2301),loggerfile[_0x534afa(0x1d5)](util['format'](_0x2e2301)+'\x0a'),_0xf3f3b8&&(console[_0x534afa(0x218)](_0xf3f3b8),loggerfile['write'](util[_0x534afa(0x115)](_0xf3f3b8)+'\x0a'));},'debug':async(_0x417f01,_0x59329d='')=>{const _0x339eba=_0x249b4e;let _0x49ca01;if(config['showname'])_0x49ca01=getTimeStamp()+':\x20'+config[_0x339eba(0x1aa)]+_0x339eba(0x80)+_0x417f01;else _0x49ca01=getTimeStamp()+_0x339eba(0x12c)+botID+_0x339eba(0x80)+_0x417f01;if(debugging)console['log'](_0x49ca01);loggerfile['write'](util['format'](_0x49ca01)+'\x0a');if(_0x59329d){if(debugging)console[_0x339eba(0x218)](_0x59329d);loggerfile[_0x339eba(0x1d5)](util[_0x339eba(0x115)](_0x59329d)+'\x0a');}}};process['on']('uncaughtException',function(_0x382e3b){handleError(_0x382e3b,'uncaughtException');});settings[_0x249b4e(0x1c2)]!=config[_0x249b4e(0x1c2)]&&updateTimeshift(settings[_0x249b4e(0x1c2)]);settings[_0x249b4e(0xe1)]!=config['onepagemode']&&updateOnepagemode(settings[_0x249b4e(0xe1)]);(settings[_0x249b4e(0x1c5)]&&!config[_0x249b4e(0x1c5)]||!settings[_0x249b4e(0x1c5)]&&config[_0x249b4e(0x1c5)])&&updateMarketcapApi(settings[_0x249b4e(0x1c5)]);process[_0x249b4e(0x1fc)]({'started':'running'},_0x4d7359=>{}),initializeProcessListeners();function proxyEmit(_0x37519d,_0x394a0c=null){const _0x58c322=_0x249b4e;process[_0x58c322(0x1fc)]({'function':_0x37519d,'args':_0x394a0c},_0x29834f=>{});}function initializeProcessListeners(){const _0x49cc6d=_0x249b4e;process['on'](_0x49cc6d(0xc3),_0x4ec0ed=>{const _0x5b13b1=_0x49cc6d;switch(Object['keys'](_0x4ec0ed)[0x0]){case _0x5b13b1(0x1c2):_0x4ec0ed[_0x5b13b1(0x1c2)]!=undefined&&(settings['timeshift']=_0x4ec0ed['timeshift'],updateTimeshift(settings[_0x5b13b1(0x1c2)]));break;case _0x5b13b1(0xe1):_0x4ec0ed[_0x5b13b1(0xe1)]!=undefined&&(settings[_0x5b13b1(0xe1)]=_0x4ec0ed[_0x5b13b1(0xe1)],updateOnepagemode(settings[_0x5b13b1(0xe1)]));break;case _0x5b13b1(0x1c5):_0x4ec0ed[_0x5b13b1(0x1c5)]!=undefined&&(settings[_0x5b13b1(0x1c5)]=_0x4ec0ed['marketcapApi'],updateMarketcapApi(settings['marketcapApi']));break;case _0x5b13b1(0x1e4):_0x4ec0ed['bots']!=undefined&&(bots=JSON[_0x5b13b1(0xc8)](_0x4ec0ed[_0x5b13b1(0x1e4)]),proxyEmit(_0x5b13b1(0x1e4),bots));break;case _0x5b13b1(0x21b):switch(_0x4ec0ed[_0x5b13b1(0x21b)]){case'initclient':initclient();break;case _0x5b13b1(0x200):toggleBotMode();break;case _0x5b13b1(0xb6):emitHistory(_0x4ec0ed[_0x5b13b1(0x189)]);break;case _0x5b13b1(0x19a):deleteHistoryAlerts(_0x4ec0ed['args']);break;case _0x5b13b1(0x113):getPortfolio(_0x4ec0ed[_0x5b13b1(0x189)]);break;case'storeConfiguration':storeConfiguration(_0x4ec0ed[_0x5b13b1(0x189)]);break;case'storeHeadless':storeHeadless(_0x4ec0ed[_0x5b13b1(0x189)]);break;case _0x5b13b1(0x121):storeFiat(_0x4ec0ed[_0x5b13b1(0x189)]);break;case'resetHistory':resetHistory();break;case _0x5b13b1(0x211):getStartingBalances(getNormalizedPerformance());break;case _0x5b13b1(0x8e):placeOrder(_0x4ec0ed[_0x5b13b1(0x189)]);break;case _0x5b13b1(0xf9):cancelLoading();break;case'showConfig':showConfig();break;case _0x5b13b1(0xaa):sendMetricsTelegram();break;case _0x5b13b1(0x1a5):sendPortfolioTelegram();break;}}});}reset(!![]);function _0x438f(){const _0x5ea276=['random','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','createOrder','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','date','timestamp','configuration','sendMetricsTelegram','8610785eOTmoq','filled','USDT','ORDERS.LOCKED','Huobipro','success','1\x20-\x20FILLED\x20known\x20order:\x20','last','\x20|\x20','value','event','emitHistory','Error\x20details\x20(0):','API-key\x20format\x20invalid','sells','Bitget','BNB/','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','\x20>\x20details:','fees','toLowerCase','colorscheme','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','41530302vBbsvN','message','sort','Invalid\x20quantity','set','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','parse','remove','-events.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','final','map','reverse','BTC','getSeconds','exchange','switch-manual','delta','netoffset','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Stopped\x20fetching\x20balance\x20after\x20','bot','distribution','/output-000.log','update-liquidity','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20-\x20bot\x20not\x20started','watchTradesForSymbols','autoliquidity','pro','Error\x20details\x20(1):','onepagemode','emojisell','slider','privateKey','orderId','closed','watchOrders()','Limit\x20(high-margin)','getMinutes','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','cancelOrders()','no\x20open\x20orders','datetime','assign','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20metrics:</b>\x20\x0a\x0a','88296FiqtrI','Resuming\x20(','RequestTimeout','code','OnMaintenance','detectLiquidityChange()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','placeOrder()','cancelLoading','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','Unknown\x20error\x20-\x20check\x20logs','abs','canceled','Binance','\x20/\x20','213115gXcrMy','Invalid\x20symbol:\x20','round','emojibuy','pop','initTickers()','net-basecoin','\x20>\x20','\x20|\x20exchange:\x20','Exchange','Order(s)\x20not\x20validated\x20after\x20','type','isEqual','./config/','portfolio','cancelOrder','sell','ID:\x20','full','getPortfolio','************','format','USDC','\x20minutes','push','net-fiat','sha256','mkdirSync','trade','Initiating\x20bot\x20restart','Symbol(s):\x20','slice','openOrders','storeFiat','ordertype','./version.json','Exception\x20thrown\x20in\x20','initial','string','amountToPrecision','version','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','watchOrders',':\x20Bot\x20','differenceInSeconds','unlinkSync','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','data','coins','ORDERS.UNLOCKING','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','production','price','enableFiatToggle','splice','2.5.0','4565350xPJYFA','\x20hour','\x20-\x20','marketcapEnabled','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','number','Order\x20is\x20invalid:\x20','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','getMonth','Initializing\x20exchange','fetchBalance()','node-forge','getOpenOrders()','padStart','</pre>','time','InvalidNonce','startprice','highest','cancel','length','red_yellow_blue','Error\x20in\x20testAPI():\x20','30sZypyx','bb-secure.json','quick','usd','average','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','memoryUsage','Order\x20amount\x20is\x20invalid:\x20','\x20>\x20pausing\x20bot\x20for\x20','\x20portfolio:</b>\x20\x0a\x0a','filter','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','toUpperCase','cloneDeep','balancing\x20resumed',',\x20must\x20be\x20a\x203\x20digit\x20number','coin-loading-progress','portfolio2','none','2.3.5','Portfolio\x20change\x20detected:\x20','UNLOCKING','exchange\x20reload','RSA-OAEP','exec','/EUR','2\x20-\x20Handled\x20open\x20orders','Error:\x20Invalid\x20argument\x20','loadMarkets','<pre>','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','heapUsed','freeze','buys','no\x20exchange\x20reloaded','complete','23hxgdcX','ETH','create','MIN_NOTIONAL','2\x20-\x20Orders\x20unlocked','added','USDP','Manual\x20balancing\x20required','starting-balance-','fee','buy','lowdb','bot-','excluded','fetchTickers','apiSecret','total','%\x20(','pki','search','indexOf','args','recent20','LOCKED','RETRY\x20-\x20Error\x20in\x20','Bybit','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Insufficient\x20funds\x20to\x20execute\x20order:\x20','showname','progress','.json','test','balances','kill','entries','Executed\x20','decrypt','-------------------------------\x0a','deleteHistoryAlerts','event-history','58414FnOSTQ','UNLOCKED','InsufficientFunds','\x20value','limits','(((.+)+)+)+$','process\x20','Pausing\x20for\x20','Waited\x20','sendPortfolioTelegram','market','Loading\x20symbols','\x20exchange\x20error:\x20','RETRY\x20-\x20Problem\x20resolved\x20after\x20','botname','\x20|\x20lock\x20orders:\x20','sortBy','Exchange\x20error\x20details:','Loading\x20completed','join','2\x20-\x20Validate\x20orders:\x20','RateLimitExceeded','watchTrades','remainingSymbols','orderstatus','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','fetchTicker','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','forEach','NetworkError','Bot\x20','001','222IgmuvZ','startdate','leftTxt','spot','restart','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','timeshift','limit-high','min','marketcapApi','Error\x20details:','getDate','Failed\x20to\x20load\x20coin\x20data\x20for\x20','18801MIfYmH','date-fns','split','fiat','warning','stringify','find','quote','\x20|\x20Custom\x20ID:\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20minutes\x20-\x20','***','write','includes','-performance.json','Resetting\x20bot\x20history','createWriteStream','coin','\x20MB','1\x20-\x20FILLED\x20unknown\x20order:\x20','starting-balances','apiKey','change24h','realized','enabled','\x20network\x20error:\x20','getHours','bots','getFullYear','Net\x20effect','Initializing\x20coin\x20results','exchanges','error','yargs/yargs','fromCodePoint','recreateCoinResults()','side','\x20order:\x20','util','open','configuration-stored','apply','floor','performance','-results.json','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2\x20-\x20handling\x20FILLED\x20order:\x20','writeFile','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','offset','Cooldown\x20ended\x20-\x20balancing\x20resumed','send','password','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','threshold','toggleBotMode','Net\x20','valid','bid','market_cap','symbol','get','substring','replace','startnumber','changes','amount','secure','basecoinvalue','headless','timeout','./logs/','getStartingBalances','marketcapsqrt','target','liquidity','rightTxt','\x20uses\x20','yyyy/MM/dd','log','Avoiding\x20continuous\x20order\x20attempts','\x20:\x20','function','running','apiPassword','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','findIndex','fetchBalance','3328NGNMdf','currency','watchTrades()','recreate','<b>','marketcap','removed','EUR','add','\x20has\x20a\x2024h\x20drop\x20of\x20','token\x20is\x20expired','PAXG','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','cost','has','2.6.23','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','cooldown','toString','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','breakeven','eur','BNB','page','\x20>\x20[DEBUG]\x20','logs','environment','change','getTime','OrderNotFound','basecoin','/backup/','decode64','\x20attempts','active','Limit\x20(low-margin)','2.6.22','existsSync','placeOrder','Valid\x20balance\x20for\x20','ongoing','order','shift','USD','Reset\x20|\x20','sqrt','padEnd','toFixed','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','portfolio1','Network\x20error\x20details:','argv','defaults','debug','AuthenticationError','ExchangeError','2.6.0','limit','max'];_0x438f=function(){return _0x5ea276;};return _0x438f();}async function reset(_0x2dfb5c=![]){const _0x4c1a14=_0x249b4e;logger[_0x4c1a14(0x9d)](_0x4c1a14(0x94)+(_0x2dfb5c?_0x4c1a14(0x166):_0x4c1a14(0x172))+_0x4c1a14(0x108)+config[_0x4c1a14(0xd1)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2dfb5c)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4c1a14(0x1de)]!=''&&config[_0x4c1a14(0x1de)]!=_0x4c1a14(0x1d4)){loadingProgress=0x0;_0x2dfb5c&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x4c1a14(0xa9),emittedConfiguration()),initialPerformanceStored=![]);const _0x19763e=await getCoins();[currentCoins,currentCoinsAll]=_0x19763e,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c1a14(0x9d)](_0x4c1a14(0x1ae)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c1a14(0x14d)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x5ea86d=![]){const _0x581817=_0x249b4e;logger[_0x581817(0x9d)](_0x581817(0xf2)+(_0x5ea86d?_0x581817(0x152):_0x581817(0x173))+')\x20|\x20exchange:\x20'+config[_0x581817(0xd1)]);if(pidBalances)clearTimeout(pidBalances);if(_0x5ea86d){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x581817(0x1de)]!=_0x581817(0x1d4)){loadingProgress=0x1;const _0x4fb685=await getCoins();[currentCoins,currentCoinsAll]=_0x4fb685,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x581817(0x9d)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x581817(0x14d)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3b5b5a){const _0x4842db=_0x249b4e;let _0x35696f=![];if(_0x3b5b5a)_0x35696f=!![];let _0x338be1;_0x35696f?_0x338be1=_0x3b5b5a[_0x4842db(0xcd)](_0x19d0f5=>_0x19d0f5[_0x4842db(0x1da)]):_0x338be1=currentCoinsAll[_0x4842db(0xcd)](_0x505b50=>_0x505b50[_0x4842db(0x1da)]);if(!config[_0x4842db(0x1c5)]||!_0x35696f&&!config[_0x4842db(0x13c)]||_0x338be1[_0x4842db(0x14d)]==0x0)return;let _0x4363e2=null;try{_0x4363e2=await axios[_0x4842db(0x206)](_0x4842db(0x1d2),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4842db(0x1c5)]},'params':{'symbol':_0x338be1[_0x4842db(0x7a)]()}});}catch(_0x5bbd1f){_0x4363e2=null,_0x5bbd1f[_0x4842db(0x7a)]()[_0x4842db(0x1d6)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x4842db(0xa9),emittedConfiguration()),logHistory('error','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x4842db(0x1e9),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x4842db(0x117)),logger['debug'](_0x4842db(0x1c6),_0x5bbd1f[_0x4842db(0x7a)]()+_0x4842db(0x13b)+_0x5bbd1f[_0x4842db(0xf4)]));}if(_0x4363e2){let _0x8eea14=0x0;const _0x165ad6=_0x4363e2[_0x4842db(0x130)];_0x338be1[_0x4842db(0x1b8)](_0x50ced5=>{const _0x9a6428=_0x4842db;if(_0x165ad6[_0x9a6428(0x130)][_0x50ced5][0x0])_0x8eea14+=_0x165ad6[_0x9a6428(0x130)][_0x50ced5][0x0][_0x9a6428(0x1d0)][_0x9a6428(0x93)][_0x9a6428(0x204)];}),_0x338be1[_0x4842db(0x1b8)](_0x54d54a=>{const _0x435982=_0x4842db,_0x21f772=_0x165ad6[_0x435982(0x130)][_0x54d54a][0x0]?_0x165ad6[_0x435982(0x130)][_0x54d54a][0x0][_0x435982(0x1d0)][_0x435982(0x93)]['market_cap']:0x0;if(_0x35696f){const _0x38a347=_0x3b5b5a[_0x435982(0x1cf)](_0x460620=>_0x460620[_0x435982(0x1da)]==_0x54d54a);_0x38a347&&(_0x38a347[_0x435982(0x226)]=_0x21f772);}else{const _0x48c001=currentCoins[_0x435982(0x1cf)](_0x155f1a=>_0x155f1a[_0x435982(0x1da)]==_0x54d54a);_0x48c001&&(_0x48c001[_0x435982(0x226)]=_0x21f772);const _0x17f649=currentCoinsAll['find'](_0x5a2e96=>_0x5a2e96[_0x435982(0x1da)]==_0x54d54a);_0x17f649&&(_0x17f649[_0x435982(0x226)]=_0x21f772);}}),!_0x35696f&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x4b2948=_0x249b4e,_0x16efb1=0x2;let _0x1bfe13=0x0,_0x5cbe97=0x0,_0x2f19eb=0x0,_0x687241=0x0,_0xbec6b9=0x0;config[_0x4b2948(0x10e)][_0x4b2948(0x1b8)](_0x140c87=>{const _0x4ee9cb=_0x4b2948;if(!_0x140c87[_0x4ee9cb(0x181)]){_0x2f19eb++,_0x1bfe13+=_0x140c87[_0x4ee9cb(0xe3)];if(_0x140c87[_0x4ee9cb(0xe3)]===-0x1){_0x1bfe13++;const _0x3406c4=currentCoinsAll[_0x4ee9cb(0x1cf)](_0x3648ea=>_0x3648ea[_0x4ee9cb(0x1da)]==_0x140c87[_0x4ee9cb(0x1da)]);_0x3406c4&&(_0x687241+=_0x3406c4[_0x4ee9cb(0x226)],_0xbec6b9+=Math[_0x4ee9cb(0x95)](_0x3406c4[_0x4ee9cb(0x226)]));}if(_0x140c87[_0x4ee9cb(0xe3)]!==-0x1)_0x5cbe97++;}});let _0x1261c1;const _0x1a8d88=0x64-_0x1bfe13,_0x2f5602=_0x2f19eb-_0x5cbe97;_0x1261c1=_0x2f5602===0x0?_0x1bfe13:Math[_0x4b2948(0xa2)](0x64,_0x1bfe13),config[_0x4b2948(0x10e)][_0x4b2948(0x1b8)](_0x44f7a=>{const _0x2e078d=_0x4b2948,_0x2e6c58=currentCoinsAll[_0x2e078d(0x1cf)](_0x13e7a2=>_0x13e7a2['coin']==_0x44f7a[_0x2e078d(0x1da)]);_0x2e6c58&&(_0x44f7a['marketcap']=_0x2e6c58['marketcap']);if(!_0x44f7a[_0x2e078d(0x181)]){if(_0x1261c1<=0x64){if(_0x44f7a[_0x2e078d(0xe3)]===-0x1){if(_0x687241!==0x0&&config[_0x2e078d(0x13c)]){if(_0x2e6c58){if(config[_0x2e078d(0x13c)]==_0x2e078d(0x226))_0x44f7a[_0x2e078d(0xd8)]=(_0x1a8d88/(_0x687241/_0x2e6c58[_0x2e078d(0x226)]))[_0x2e078d(0x97)](_0x16efb1);else config['marketcapEnabled']==_0x2e078d(0x212)&&(_0x44f7a[_0x2e078d(0xd8)]=(_0x1a8d88/(_0xbec6b9/Math[_0x2e078d(0x95)](_0x2e6c58['marketcap'])))['toFixed'](_0x16efb1));}}}}}}),updateConfig();}function updateConfig(){const _0x191b09=_0x249b4e;let _0xd5cef5=dbConfig['get'](_0x191b09(0xd7))[_0x191b09(0x1cf)]({'botID':botID})['value']();_0xd5cef5&&dbConfig['get'](_0x191b09(0xd7))[_0x191b09(0x1cf)]({'botID':botID})[_0x191b09(0xee)](config)[_0x191b09(0x1d5)]();}function logMemory(){const _0x2dc1ed=_0x249b4e;if(environment!='staging')return;const _0x2323b7=process[_0x2dc1ed(0x156)]()[_0x2dc1ed(0x16f)]/0x400/0x400;logger[_0x2dc1ed(0x9d)](_0x2dc1ed(0x1a2)+process['pid']+_0x2dc1ed(0x216)+formatResult(_0x2323b7,0x1)+_0x2dc1ed(0x1db));}async function startScheduler(){const _0xe08522=_0x249b4e,_0x609650=shiftedTime()[_0xe08522(0x1e3)]();getMarketCap(),_0x609650==0x1&&logMemory(),(_0x609650==0x2||_0x609650==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x38ade7=![]){const _0x39ea4a=_0x249b4e;logger[_0x39ea4a(0x9d)](_0x39ea4a(0x11d));if(!_0x38ade7)while(lockOrders!=ORDERS[_0x39ea4a(0x19d)]||coolingDown){await sleep(0x3e8);}process[_0x39ea4a(0x1fc)]({'stop':_0x39ea4a(0x1c0)},_0x11556f=>{});}async function initExchange(_0x40266d=config[_0x249b4e(0xd1)],_0x45e13a=config[_0x249b4e(0x1de)],_0x2dcab5=config['apiSecret'],_0x1d074b=config['apiPassword']){const _0x54930b=_0x249b4e;if(exchange){logger[_0x54930b(0x9d)]('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x54930b(0x9d)](_0x54930b(0x142));!supportedExchanges()[_0x54930b(0x1d6)](_0x40266d)&&(logHistory(_0x54930b(0x1e9),_0x54930b(0x1f9)+_0x40266d+'\x20exchange'),killBot());const _0x39058a=ccxt['pro'][_0x40266d[_0x54930b(0xbf)]()];exchange=new _0x39058a({'apiKey':_0x45e13a,'secret':_0x2dcab5,'options':{'defaultType':_0x54930b(0x1bf)}});if(_0x1d074b)exchange[_0x54930b(0x1fd)]=_0x1d074b;}function updateExchange(_0x3341e4,_0x2d50a4,_0x4461f6=null){const _0x39d2d4=_0x249b4e;exchange['apiKey']=_0x3341e4,exchange['apiSecret']=_0x2d50a4,exchange[_0x39d2d4(0x21d)]=_0x4461f6,logger['debug']('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x27a8dc=_0x249b4e;let _0x13ad2b=config[_0x27a8dc(0x86)]==_0x27a8dc(0x175)?_0x27a8dc(0x175):config['basecoin']=='PAXG'?_0x27a8dc(0x73):_0x27a8dc(0xcf),_0x3f8a5e=allSymbols[_0x27a8dc(0x1d6)](_0x13ad2b+'/USD')?_0x27a8dc(0x93):allSymbols[_0x27a8dc(0x1d6)](_0x13ad2b+'/USDT')?'USDT':_0x27a8dc(0x6f),_0x397bca=allSymbols[_0x27a8dc(0x1d6)](_0x13ad2b+_0x27a8dc(0x169))?_0x27a8dc(0x6f):_0x3f8a5e;enableFiatToggle=!![],_0x3f8a5e==_0x27a8dc(0x6f)&&(enableFiatToggle=![],storeFiat(_0x27a8dc(0x6f))),_0x397bca!=_0x27a8dc(0x6f)&&(enableFiatToggle=![],storeFiat(_0x27a8dc(0x93))),stablecoins={'eur':{'coin':''+_0x13ad2b+_0x397bca,'symbol':_0x13ad2b+'/'+_0x397bca},'usd':{'coin':''+_0x13ad2b+_0x3f8a5e,'symbol':_0x13ad2b+'/'+_0x3f8a5e}};}async function initwsCcxt(){const _0x2d203c=_0x249b4e;initCycle++;const _0xc79e8c=initCycle;let _0x439f15=[];config[_0x2d203c(0x10e)]['forEach'](_0x5d06e2=>{const _0x4e2c2f=_0x2d203c;if(!_0x5d06e2['excluded']&&_0x5d06e2[_0x4e2c2f(0x1da)]!=config['basecoin'])_0x439f15['push'](_0x5d06e2[_0x4e2c2f(0x205)]);});if(!_0x439f15[_0x2d203c(0x1d6)](stablecoins[_0x2d203c(0x7d)]['symbol']))_0x439f15[_0x2d203c(0x118)](stablecoins[_0x2d203c(0x7d)][_0x2d203c(0x205)]);if(!_0x439f15[_0x2d203c(0x1d6)](stablecoins[_0x2d203c(0x153)][_0x2d203c(0x205)]))_0x439f15[_0x2d203c(0x118)](stablecoins['usd'][_0x2d203c(0x205)]);if(config['exchange']['startsWith'](_0x2d203c(0xfe))&&config[_0x2d203c(0x86)]!=_0x2d203c(0x73)){if(!_0x439f15['includes'](_0x2d203c(0xbb)+config[_0x2d203c(0x86)]))_0x439f15[_0x2d203c(0x118)](_0x2d203c(0xbb)+config[_0x2d203c(0x86)]);}loadCoins(_0x439f15),_0x439f15=validateSymbols(_0x439f15);const _0x24187c=async _0x42a5f4=>{const _0x336b8d=_0x2d203c;let _0x43a977;try{const _0x47c969=await getTickers(_0x42a5f4);Object[_0x336b8d(0x196)](_0x47c969)['forEach'](_0x94d947=>{const _0x55ad2a=_0x336b8d;_0x43a977=_0x94d947[0x1][_0x55ad2a(0x205)],gTicker[noslash(_0x43a977)]=_0x94d947[0x1]['last'],gChange[_0x43a977]=_0x94d947[0x1]['percentage'];});}catch(_0x45fab6){await handleError(_0x45fab6,_0x336b8d(0x105),_0x43a977);}},_0x5c61e2=async _0x1c92c3=>{const _0x31b5e4=_0x2d203c;while(initCycle==_0xc79e8c){if(!botPaused)try{const _0x2d974f=await exchange[_0x31b5e4(0x1b2)](_0x1c92c3);gTicker[noslash(_0x2d974f[0x0]['symbol'])]=_0x2d974f[0x0][_0x31b5e4(0x135)];}catch(_0x565297){if(!exchangeStopped)await handleError(_0x565297,_0x31b5e4(0x223),_0x1c92c3);}else await sleep(0x64);}},_0x360978=async _0x3a9b8d=>{const _0x803266=_0x2d203c;while(initCycle==_0xc79e8c){if(!botPaused)try{const _0x381c9f=await exchange[_0x803266(0xdd)](_0x3a9b8d),_0x57e4ab=_0x381c9f[_0x803266(0x104)]();gTicker[noslash(_0x57e4ab[_0x803266(0x205)])]=_0x57e4ab[_0x803266(0x135)];}catch(_0x413378){if(!exchangeStopped)await handleError(_0x413378,'watchTradesForSymbols()',_0x3a9b8d['toString']());}else await sleep(0x64);}},_0x18b767=async _0x47777a=>{const _0x210f37=_0x2d203c;while(initCycle==_0xc79e8c){if(!botPaused){let _0x3c7d18;try{await sleep(0x3c*0x3e8);const _0x395449=await getTickers(_0x47777a);Object['entries'](_0x395449)[_0x210f37(0x1b8)](_0x378518=>{const _0x50622e=_0x210f37;_0x3c7d18=_0x378518[0x1][_0x50622e(0x205)],gChange[_0x3c7d18]=_0x378518[0x1]['percentage'];});}catch(_0x5b2ee4){if(!exchangeStopped)await handleError(_0x5b2ee4,'fetchTickers()',_0x3c7d18);}}else await sleep(0x64);}},_0x47e694=async _0x28c906=>{const _0x46ccdd=_0x2d203c;while(initCycle==_0xc79e8c){if(!botPaused)try{const _0x245015=await exchange[_0x46ccdd(0x12b)](_0x28c906);initCycle==_0xc79e8c&&_0x245015[_0x46ccdd(0x1b8)](_0xf38907=>{updateNumberCoinsCcxt(_0xf38907);});}catch(_0x20f4a5){if(!exchangeStopped)await handleError(_0x20f4a5,_0x46ccdd(0xe7));}else await sleep(0x64);}};_0x24187c(_0x439f15),_0x18b767(_0x439f15),exchange[_0x2d203c(0x76)][_0x2d203c(0xdd)]&&!(config[_0x2d203c(0xd1)]==_0x2d203c(0x18d)&&_0x439f15[_0x2d203c(0x14d)]>0xa)?_0x360978(_0x439f15):_0x439f15['forEach'](_0xa3d430=>{_0x5c61e2(_0xa3d430);}),_0x439f15[_0x2d203c(0x1b8)](_0xc97635=>{_0x47e694(_0xc97635);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x209246){const _0x42ff53=_0x249b4e;let _0x586666={};try{if(config[_0x42ff53(0xd1)]!='Cryptocom')_0x586666=await exchange[_0x42ff53(0x182)](_0x209246);else for(const _0x583408 of _0x209246){const _0x5dc67=await exchange[_0x42ff53(0x1b6)](_0x583408);_0x586666[_0x583408]=_0x5dc67;}return _0x586666;}catch(_0x498aa0){throw _0x498aa0;}}function setBlockTransactionDetection(_0x819438){blockTransactionDetection=_0x819438,logger['debug']('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x2a41a6=0x0){const _0x23fa52=_0x249b4e;transactionDetectionOngoing=!![];try{const _0x551604=await getCoins(_0x2a41a6),[_0x198307,_0x3def5e]=_0x551604;let _0x4f5c04=[];currentCoins['forEach'](_0xc7917d=>{const _0x113a72=_0xa1fc,_0x416808=_0x198307['find'](_0x2f6d1a=>_0x2f6d1a[_0x113a72(0x1da)]==_0xc7917d[_0x113a72(0x1da)]);if(_0x416808){if(_0xc7917d['number']!=_0x416808['number']){let _0x14b455;if(_0xc7917d[_0x113a72(0x1da)]!=config[_0x113a72(0x86)]){const _0x5dea10=gTicker[noslash(_0xc7917d[_0x113a72(0x205)])];_0x14b455=_0xc7917d[_0x113a72(0xce)]?0x1/_0x5dea10:_0x5dea10;}else _0x14b455=0x1;_0x4f5c04[_0x113a72(0x118)]({'coin':_0xc7917d['coin'],'symbol':_0xc7917d['symbol'],'price':_0x14b455,'number':Number(formatResult(_0x416808[_0x113a72(0x13e)]-_0xc7917d[_0x113a72(0x13e)],0x8)),'basecoinvalue':_0x14b455*(_0x416808[_0x113a72(0x13e)]-_0xc7917d[_0x113a72(0x13e)])});}}});if(_0x4f5c04[_0x23fa52(0x14d)]>0x0&&!blockTransactionDetection)for(const _0x3eb4c7 of _0x4f5c04){if(config[_0x23fa52(0xde)]){logger[_0x23fa52(0x9d)](_0x23fa52(0x7b)+_0x3eb4c7[_0x23fa52(0x20d)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x23fa52(0x14b)]);if(lastFees[_0x23fa52(0x14b)]==0x0||Math[_0x23fa52(0xfc)](_0x3eb4c7[_0x23fa52(0x20d)])>lastFees[_0x23fa52(0x14b)]*0x3){if(config[_0x23fa52(0xde)]==_0x23fa52(0xda)){delete _0x3eb4c7[_0x23fa52(0x205)],delete _0x3eb4c7[_0x23fa52(0x20d)];let _0x2abcae=[],_0x592d36=[...config['liquidity']]||[],_0x17460d=config['liquidity'];_0x592d36['sort']((_0x78917c,_0x193647)=>_0x78917c[_0x23fa52(0xa7)]>_0x193647['date']?-0x1:_0x193647[_0x23fa52(0xa7)]>_0x78917c[_0x23fa52(0xa7)]?0x1:0x0);const _0x16027a=getDate();if(_0x592d36[0x0]){const _0x36db79=fns[_0x23fa52(0xc8)](_0x592d36[0x0][_0x23fa52(0xa7)],_0x23fa52(0x217),new Date()),_0x4f3850=fns[_0x23fa52(0xc8)](_0x16027a,_0x23fa52(0x217),new Date());if(fns[_0x23fa52(0x10c)](_0x36db79,_0x4f3850)){_0x2abcae=_0x592d36[0x0][_0x23fa52(0x20a)];const _0x1333fc=_0x2abcae[_0x23fa52(0x1cf)](_0x337993=>_0x337993[_0x23fa52(0x1da)]==_0x3eb4c7[_0x23fa52(0x1da)]);_0x1333fc?(_0x1333fc[_0x23fa52(0x13e)]+=_0x3eb4c7[_0x23fa52(0x13e)],_0x1333fc[_0x23fa52(0x13e)]==0x0&&(_0x2abcae=_0x2abcae[_0x23fa52(0x15a)](_0x209658=>{const _0x43dd8b=_0x23fa52;return _0x209658[_0x43dd8b(0x1da)]!=_0x3eb4c7['coin'];}))):_0x2abcae[_0x23fa52(0x118)](_0x3eb4c7);const _0x5e928c=_0x17460d[_0x23fa52(0x1cf)](_0x3f5c26=>_0x3f5c26['date']==_0x16027a);_0x5e928c[_0x23fa52(0x20a)]=_0x2abcae;}else _0x17460d[_0x23fa52(0x118)]({'date':_0x16027a,'changes':[_0x3eb4c7]});}const _0x57d8fc=_0x17460d[_0x23fa52(0x1cf)](_0x199b3d=>_0x199b3d['date']==_0x16027a);if(_0x57d8fc){let _0x3e5a5f=!![];_0x57d8fc['changes']['forEach'](_0x5c2278=>{const _0x5f219b=_0x23fa52;if(_0x5c2278[_0x5f219b(0x13e)]!=0x0)_0x3e5a5f=![];}),_0x3e5a5f&&(_0x17460d=_0x17460d[_0x23fa52(0x15a)](_0x241899=>{const _0x18c17d=_0x23fa52;return _0x241899[_0x18c17d(0xa7)]!=_0x16027a;}));}let _0x2624cd=dbConfig[_0x23fa52(0x206)](_0x23fa52(0xd7))[_0x23fa52(0x1cf)]({'botID':botID})[_0x23fa52(0xb4)]();_0x2624cd&&(dbConfig['get'](_0x23fa52(0xd7))[_0x23fa52(0x1cf)]({'botID':botID})[_0x23fa52(0xee)]({'liquidity':_0x17460d})[_0x23fa52(0x1d5)](),config[_0x23fa52(0x214)]=_0x17460d);logHistory(_0x23fa52(0xb0),'Portfolio\x20change\x20detected:\x20'+Math[_0x23fa52(0xfc)](_0x3eb4c7[_0x23fa52(0x13e)])+'\x20'+_0x3eb4c7[_0x23fa52(0x1da)]+'\x20'+(_0x3eb4c7[_0x23fa52(0x13e)]>0x0?_0x23fa52(0x179):_0x23fa52(0x6e))+_0x23fa52(0x155)),proxyEmit('configuration',emittedConfiguration());const _0x2b54b4=getNormalizedPerformance();emitPerformance(_0x2b54b4),getStartingBalances(_0x2b54b4),logger[_0x23fa52(0x9d)]('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x23fa52(0xde)]==_0x23fa52(0xd2)&&(config[_0x23fa52(0x20e)]?(await storeHeadless({'headless':![]}),logHistory(_0x23fa52(0xb0),_0x23fa52(0x164)+Math[_0x23fa52(0xfc)](_0x3eb4c7['number'])+'\x20'+_0x3eb4c7['coin']+'\x20'+(_0x3eb4c7[_0x23fa52(0x13e)]>0x0?'added':_0x23fa52(0x6e))+_0x23fa52(0x98))):logger['debug'](_0x23fa52(0x164)+Math[_0x23fa52(0xfc)](_0x3eb4c7['number'])+'\x20'+_0x3eb4c7['coin']+'\x20'+(_0x3eb4c7[_0x23fa52(0x13e)]>0x0?'added':_0x23fa52(0x6e))+_0x23fa52(0x74)));}else logger[_0x23fa52(0x9d)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x23fa52(0xfc)](_0x3eb4c7[_0x23fa52(0x13e)])+'\x20'+_0x3eb4c7['coin']+'\x20'+(_0x3eb4c7['number']>0x0?'added':_0x23fa52(0x6e)));}else logger[_0x23fa52(0x9d)](_0x23fa52(0x164)+Math[_0x23fa52(0xfc)](_0x3eb4c7[_0x23fa52(0x13e)])+'\x20'+_0x3eb4c7['coin']+'\x20'+(_0x3eb4c7[_0x23fa52(0x13e)]>0x0?_0x23fa52(0x179):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x198307,currentCoinsAll=_0x3def5e;}catch(_0x281653){if(!exchangeStopped)await handleError(_0x281653,_0x23fa52(0xf6));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x46c064=_0x249b4e;logger[_0x46c064(0x9d)](_0x46c064(0x1a7));try{markets=await exchange[_0x46c064(0x16c)]();}catch(_0x24df39){logger[_0x46c064(0x9d)]('Error\x20in\x20loadSymbols():\x20'+_0x24df39['toString']());if(markets){}else(_0x24df39[_0x46c064(0x7a)]()['toLowerCase']()[_0x46c064(0x1d6)](_0x46c064(0xa8))||_0x24df39['toString']()[_0x46c064(0xbf)]()[_0x46c064(0x1d6)]('request-time'))&&logHistory(_0x46c064(0x1e9),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)'),logHistory(_0x46c064(0x1e9),_0x46c064(0x1b5)),logHistory(_0x46c064(0x1e9),_0x46c064(0x1a3)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x46c064(0x9d)](_0x46c064(0x1c6),_0x24df39),loading[_0x46c064(0x14c)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x46c064(0x196)](markets)[_0x46c064(0x1b8)](_0x174072=>{const _0x19aeae=_0x46c064;_0x174072[0x1][_0x19aeae(0x8a)]&&_0x174072[0x1][_0x19aeae(0x1bf)]&&allSymbols[_0x19aeae(0x118)](_0x174072[0x0]);});}function validateSymbols(_0x2e2981){let _0x11666d=[];return _0x2e2981['forEach'](_0x3e4e52=>{const _0x24be90=_0xa1fc;!allSymbols[_0x24be90(0x1d6)](_0x3e4e52)?logHistory(_0x24be90(0x1e9),_0x24be90(0x101)+_0x3e4e52+_0x24be90(0xc1)):_0x11666d['push'](_0x3e4e52);}),_0x11666d;}async function initclient(){const _0x15ada1=_0x249b4e;proxyEmit(_0x15ada1(0xa9),emittedConfiguration()),proxyEmit(_0x15ada1(0x1e8),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x15ada1(0x194),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x40a897=getNormalizedPerformance();emitPerformance(_0x40a897),getStartingBalances(_0x40a897);}async function toggleBotMode(){const _0x1e02bb=_0x249b4e;let _0x5951d4=dbConfig[_0x1e02bb(0x206)](_0x1e02bb(0xd7))[_0x1e02bb(0x1cf)]({'botID':botID})[_0x1e02bb(0xb4)]();if(_0x5951d4){const _0x24cab4=!_0x5951d4['headless'];dbConfig['get'](_0x1e02bb(0xd7))[_0x1e02bb(0x1cf)]({'botID':botID})['assign']({'headless':_0x24cab4})[_0x1e02bb(0x1d5)](),config[_0x1e02bb(0x20e)]=_0x24cab4,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x19c4f4=_0x249b4e;process[_0x19c4f4(0x1fc)]({'updatebotmanager':!![]},_0x293dd3=>{}),logger[_0x19c4f4(0x9d)]('Headless:\x20'+config[_0x19c4f4(0x20e)]);}async function loadCoins(_0x597354){const _0x1ff52c=_0x249b4e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4960c7,_0x1c8253=0x0,_0x1b41d4=0x0;_0x597354['forEach'](_0x5bc842=>{const _0x2626cd=_0xa1fc;loading[_0x2626cd(0x1b3)]['push'](_0x5bc842);}),loadingCanceled=![];let _0x3cd790=![];while(_0x4960c7!=_0x597354[_0x1ff52c(0x14d)]+maxLoadingProgress){_0x4960c7=loadingProgress,_0x597354[_0x1ff52c(0x1b8)](_0x3402fc=>{const _0x52a1b5=_0x1ff52c;if(gTicker[noslash(_0x3402fc)]){loading['remainingSymbols']=loading['remainingSymbols'][_0x52a1b5(0x15a)](_0x547bef=>_0x547bef!=_0x3402fc);if(!watchedSymbols[_0x52a1b5(0x1d6)](_0x3402fc))watchedSymbols[_0x52a1b5(0x118)](_0x3402fc);_0x4960c7++;}}),loading[_0x1ff52c(0x191)]=Math[_0x1ff52c(0x102)](_0x4960c7/(_0x597354[_0x1ff52c(0x14d)]+maxLoadingProgress)*0x64);loading[_0x1ff52c(0x191)]!=0x64&&(_0x1b41d4>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1b41d4>0x78*0x5&&!_0x3cd790&&(_0x3cd790=!![],logHistory('error',_0x1ff52c(0x1c8)+loading[_0x1ff52c(0x1b3)][_0x1ff52c(0x1af)](',\x20')+_0x1ff52c(0xdc)),logHistory(_0x1ff52c(0x1e9),_0x1ff52c(0x1a3)+loadCoinsRetryInterval/0xea60+_0x1ff52c(0x1fe)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1c8253!=loading[_0x1ff52c(0x191)]&&(_0x1c8253=loading['progress'],emitLoadingProgress()),_0x1b41d4++,await sleep(0xc8);}_0x4960c7==_0x597354[_0x1ff52c(0x14d)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1ff52c(0x1fc)]({'status':'enabled','live':_0x1ff52c(0x21c)},_0x2d2ffc=>{}),_0x3cd790&&logHistory(_0x1ff52c(0xb0),_0x1ff52c(0x13d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x10c744=_0x249b4e;proxyEmit(_0x10c744(0xa9),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x4f6029=_0x249b4e;proxyEmit(_0x4f6029(0x160),loading);}async function getFiat(){const _0x2b1f99=_0x249b4e;let _0x4ec9fa=gTicker[stablecoins[_0x2b1f99(0x7d)][_0x2b1f99(0x1da)]],_0x2dbaee=gTicker[stablecoins[_0x2b1f99(0x153)]['coin']];return{'eur':Number(_0x4ec9fa),'usd':Number(_0x2dbaee)};}function capitalize(_0x19e7b6){const _0x4a7770=_0x249b4e;return _0x19e7b6['substring'](0x0,0x1)[_0x4a7770(0x15c)]()+_0x19e7b6[_0x4a7770(0x207)](0x1);}function supportedExchanges(){const _0x31afd4=_0x249b4e,_0x2f0b70=['ws',_0x31afd4(0x182),'fetchTicker',_0x31afd4(0x1b2),_0x31afd4(0x12b),_0x31afd4(0x10f),_0x31afd4(0xa5),'fetchOpenOrders',_0x31afd4(0x220)];let _0x2bccf1=[],_0xf9b6e1=[],_0x5e373d=ccxt['pro'][_0x31afd4(0x1e8)];_0x5e373d[_0x31afd4(0x1b8)](_0x4a439e=>{const _0x1e24a2=_0x31afd4;try{const _0x2ee3bc=new ccxt[(_0x1e24a2(0xdf))][_0x4a439e]();_0xf9b6e1[_0x1e24a2(0x118)](_0x2ee3bc);}catch(_0x8b30f4){}}),_0xf9b6e1[_0x31afd4(0x1b8)](_0x171e35=>{const _0x4c8b12=_0x31afd4;let _0x2541b0=0x0;_0x2f0b70[_0x4c8b12(0x1b8)](_0x1eb7e4=>{const _0x28073a=_0x4c8b12;_0x1eb7e4 in _0x171e35['has']&&_0x171e35[_0x28073a(0x76)][_0x1eb7e4]&&_0x2541b0++;}),_0x2541b0==_0x2f0b70[_0x4c8b12(0x14d)]&&_0x2bccf1[_0x4c8b12(0x118)](capitalize(_0x171e35['id']));});let _0xea5cd6=[];return _0x5e373d[_0x31afd4(0x1b8)](_0x56d9d3=>{const _0x730bb6=_0x31afd4;_0x56d9d3=capitalize(_0x56d9d3);if(!_0x2bccf1[_0x730bb6(0x1d6)](_0x56d9d3))_0xea5cd6[_0x730bb6(0x118)](_0x56d9d3);}),_0x2bccf1;}function setStartDatePerformance(){const _0x37ebbe=_0x249b4e;if(config&&config[_0x37ebbe(0x214)][0x0][_0x37ebbe(0x20a)][_0x37ebbe(0x14d)]!=0x0){const _0x329191=config[_0x37ebbe(0x214)][0x0][_0x37ebbe(0x20a)];dbPerformance[_0x37ebbe(0x206)]('data')[_0x37ebbe(0x1cf)]({'date':config['startdate']})[_0x37ebbe(0xee)]({'coins':_0x329191})[_0x37ebbe(0x1d5)]();}}async function recreateCoinResults(){const _0x148094=_0x249b4e;recreationNeeded=![];let _0x5654c9,_0x3ca7bd=[];try{for(const _0x313c3f of currentCoins){if(_0x313c3f[_0x148094(0x1da)]!=config['basecoin']){let _0x7ca7d4=0x0,_0x5ba520,_0xc5574c;_0x5654c9=await getAllEventOrders(_0x313c3f[_0x148094(0x205)]);if(_0x5654c9[_0x148094(0x14d)]>0x0)_0x5654c9[_0x148094(0x1b8)](_0x3a164c=>{const _0xf7ee00=_0x148094,_0xb4c206=_0x313c3f[_0xf7ee00(0x205)][_0xf7ee00(0x1d6)](config['basecoin']+'/');_0x3ca7bd[_0xf7ee00(0x118)]({'datetime':_0x3a164c[_0xf7ee00(0xed)],'coin':_0x313c3f[_0xf7ee00(0x1da)],'symbol':_0x313c3f[_0xf7ee00(0x205)],'side':_0x3a164c[_0xf7ee00(0x1ed)],'reverse':_0xb4c206,'amount':formatResult(_0x3a164c[_0xf7ee00(0xac)],0x8),'filled':formatResult(_0x3a164c[_0xf7ee00(0xac)],0x8),'price':formatResult(_0x3a164c[_0xf7ee00(0x135)],0x8)}),_0x7ca7d4=_0x3a164c['side']==_0xf7ee00(0x17e)?_0x7ca7d4+_0x3a164c[_0xf7ee00(0xac)]:_0x7ca7d4-_0x3a164c[_0xf7ee00(0xac)];if(!_0xc5574c)_0xc5574c=_0x3a164c[_0xf7ee00(0x135)];});_0x5ba520=_0x313c3f[_0x148094(0x13e)]-_0x7ca7d4;let _0x28ed46;config[_0x148094(0x214)][_0x148094(0x1b8)](_0x73086d=>{const _0x1b2f86=_0x148094;!_0x28ed46&&(_0x28ed46=_0x73086d[_0x1b2f86(0x20a)][_0x1b2f86(0x1cf)](_0x240e75=>_0x240e75[_0x1b2f86(0x1da)]==_0x313c3f[_0x1b2f86(0x1da)]),_0x28ed46&&(_0x5ba520=_0x28ed46[_0x1b2f86(0x13e)],_0xc5574c=_0x28ed46[_0x1b2f86(0x135)]));});let _0x150771=dbCoinResults['get'](_0x148094(0x131))[_0x148094(0x1cf)]({'coin':_0x313c3f[_0x148094(0x1da)]})['value']();_0x150771={'coin':_0x313c3f[_0x148094(0x1da)],'number':_0x5ba520,'breakeven':_0xc5574c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x148094(0x131))[_0x148094(0x1cf)]({'coin':_0x313c3f[_0x148094(0x1da)]})['assign'](_0x150771)[_0x148094(0x1d5)]();}}_0x3ca7bd[_0x148094(0xc4)]((_0x5e5519,_0x1ecfd1)=>_0x5e5519['datetime']>_0x1ecfd1[_0x148094(0xed)]?0x1:_0x1ecfd1[_0x148094(0xed)]>_0x5e5519[_0x148094(0xed)]?-0x1:0x0);let _0x968c0e=0x0;for(let _0x270152 of _0x3ca7bd){await updateCoinResults(_0x270152,!![]);}}catch(_0x3d3536){await handleError(_0x3d3536,_0x148094(0x1ec));}}async function getAllEventOrders(_0xe3928d){const _0x2dbaf1=_0x249b4e;let _0xb96e45=[],_0x477a10=dbLogs[_0x2dbaf1(0x206)](_0x2dbaf1(0x81))[_0x2dbaf1(0x15a)](_0x192197=>{const _0x4d495e=_0x2dbaf1,_0x14b8a6=_0x192197[_0x4d495e(0xb5)][_0x4d495e(0xbf)]();return _0x14b8a6[_0x4d495e(0x1d6)](_0xe3928d[_0x4d495e(0xbf)]())&&(_0x14b8a6[_0x4d495e(0x1d6)](_0x4d495e(0x1a6))&&_0x14b8a6[_0x4d495e(0x1d6)]('order')||_0x14b8a6[_0x4d495e(0x1d6)]('filled')&&_0x14b8a6[_0x4d495e(0x1d6)]('order'));})[_0x2dbaf1(0x1ac)](_0x2dbaf1(0x148))['value']();return _0x477a10[_0x2dbaf1(0x1b8)](_0x285ef9=>{const _0x47f989=_0x2dbaf1,_0x399d1f=_0x285ef9[_0x47f989(0xb5)][_0x47f989(0x1d6)](_0x47f989(0x110))?_0x47f989(0x110):_0x47f989(0x17e),_0x11fb18=/#([0-9]|\.)+\s/i,_0x105ccc=Number(_0x11fb18[_0x47f989(0x168)](_0x285ef9[_0x47f989(0xb5)])[0x0][_0x47f989(0x11f)](0x1)),_0x267a26=/@([0-9]|\.)+$/i,_0x3bc1ba=Number(_0x267a26[_0x47f989(0x168)](_0x285ef9[_0x47f989(0xb5)])[0x0][_0x47f989(0x11f)](0x1));_0xb96e45[_0x47f989(0x118)]({'datetime':_0x285ef9[_0x47f989(0x148)],'coin':symbolToCoin(_0xe3928d),'symbol':_0xe3928d,'side':_0x399d1f,'amount':_0x105ccc,'filled':_0x105ccc,'price':_0x3bc1ba});}),_0xb96e45;}async function validate24hChanges(){const _0x216739=_0x249b4e;for(const _0x2e8ad5 of currentCoins){if(_0x2e8ad5[_0x216739(0x1da)]!=config[_0x216739(0x86)]){let _0x9b69f5;_0x2e8ad5[_0x216739(0xce)]?_0x9b69f5=formatResult((0x1/(gChange[_0x2e8ad5[_0x216739(0x205)]]/0x64+0x1)-0x1)*0x64,0x3):_0x9b69f5=gChange[_0x2e8ad5[_0x216739(0x205)]],_0x9b69f5<config[_0x216739(0x1df)]&&(logHistory('error',_0x2e8ad5[_0x216739(0x1da)]+_0x216739(0x71)+_0x9b69f5+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x216739(0x1e9),_0x216739(0x16e)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1b6ff8,_0x1e3db4){const _0x24ae2b=_0x249b4e;if(!_0x1b6ff8)return!![];const _0x533bd4=_0x1e3db4[_0x24ae2b(0x1cb)]('.'),_0x5df0f9=_0x1b6ff8[_0x24ae2b(0x1cb)]('.');for(var _0x528e24=0x0;_0x528e24<_0x5df0f9[_0x24ae2b(0x14d)];_0x528e24++){const _0x521f80=~~_0x5df0f9[_0x528e24],_0x2ee869=~~_0x533bd4[_0x528e24];if(_0x521f80<_0x2ee869)return!![];if(_0x521f80>_0x2ee869)return![];}return![];}async function oneTimeMigration(){const _0x2773a5=_0x249b4e;let _0x1727b6=dbLogs['get'](_0x2773a5(0x128))[_0x2773a5(0xb4)]();if(isOlderVersion(_0x1727b6,_0x2773a5(0x163))){let _0x465da5=[];const _0x493f40=dbLogs[_0x2773a5(0x206)]('logs')[_0x2773a5(0xb4)]();_0x493f40[_0x2773a5(0x1b8)](_0x406362=>{const _0x27d2fd=_0x2773a5;_0x465da5[_0x27d2fd(0x118)]({'time':_0x406362[_0x27d2fd(0x148)],'type':_0x406362[_0x27d2fd(0x10b)],'event':_0x406362[_0x27d2fd(0xb5)]});}),dbLogs[_0x2773a5(0x206)]('logs')[_0x2773a5(0xee)](_0x465da5)[_0x2773a5(0x1d5)]();}let _0x2bf6d8=dbConfig[_0x2773a5(0x206)]('version')['value']();if(isOlderVersion(_0x2bf6d8,'2.3.5')){let _0x127429=dbConfig[_0x2773a5(0x206)](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xb4)]();if(_0x127429){let _0x1be5d4=[];_0x127429[_0x2773a5(0x10e)]['forEach'](_0x471c5b=>{const _0x40b794=_0x2773a5;_0x1be5d4[_0x40b794(0x118)]({'coin':_0x471c5b[_0x40b794(0x1da)],'number':_0x471c5b[_0x40b794(0x209)],'price':_0x471c5b[_0x40b794(0x14a)]}),delete _0x471c5b[_0x40b794(0x209)],delete _0x471c5b[_0x40b794(0x14a)];});if(_0x1be5d4[_0x2773a5(0x14d)]!==0x0)fs[_0x2773a5(0x1f8)](configbackuppath+(_0x2773a5(0x17c)+botID+_0x2773a5(0x192)),JSON[_0x2773a5(0x1ce)](_0x1be5d4,null,0x4),function(_0x1daeae){if(_0x1daeae){}});const _0x40eeac=(_0x4e413e,_0x1dcde8)=>{const _0x4eab96=_0x2773a5;let _0x2bf5da=[];_0x1dcde8[_0x4eab96(0x1b8)](_0x47bb5f=>{const _0x308563=_0x4eab96,_0x2f5cab=_0x4e413e[_0x308563(0x1cf)](_0x25d135=>_0x25d135[_0x308563(0x1da)]==_0x47bb5f[_0x308563(0x1da)]);if(!_0x2f5cab)_0x2bf5da[_0x308563(0x118)](_0x47bb5f);});let _0x430535=[];return _0x4e413e[_0x4eab96(0x1b8)](_0x5bea39=>{const _0x1d5731=_0x4eab96,_0x1d0062=_0x1dcde8['find'](_0x297e99=>_0x297e99['coin']==_0x5bea39['coin']);if(!_0x1d0062||_0x1d0062[_0x1d5731(0x13e)]==0x0&&_0x5bea39['number']!=0x0)_0x430535['push'](_0x5bea39);}),{'missingDay1':_0x2bf5da,'notInDay2':_0x430535};},_0x2ae6ca=dbPerformance[_0x2773a5(0x206)]('data')[_0x2773a5(0x15d)]()[_0x2773a5(0xb4)]();if(_0x2ae6ca['length']>0x1){const {missingDay1:_0x5242e3,notInDay2:_0x5bf259}=_0x40eeac(_0x1be5d4,_0x2ae6ca[0x1][_0x2773a5(0x131)]);_0x1be5d4=[..._0x1be5d4,..._0x5242e3],_0x5bf259[_0x2773a5(0x1b8)](_0x342756=>{const _0x534436=_0x2773a5;let _0x3ba066=_0x1be5d4[_0x534436(0x21f)](_0xf2cc8=>_0xf2cc8[_0x534436(0x1da)]==_0x342756['coin']);_0x3ba066!=-0x1&&_0x1be5d4[_0x534436(0x137)](_0x3ba066,0x1);});}_0x1be5d4[_0x2773a5(0xc4)]((_0x3adbf0,_0x2ce05d)=>_0x3adbf0[_0x2773a5(0x1da)]>_0x2ce05d[_0x2773a5(0x1da)]?0x1:_0x2ce05d[_0x2773a5(0x1da)]>_0x3adbf0[_0x2773a5(0x1da)]?-0x1:0x0);let _0x5aedaf=[{'date':_0x127429[_0x2773a5(0x1bd)],'changes':_0x1be5d4}];_0x2ae6ca[_0x2773a5(0x14d)]>0x2&&_0x2ae6ca[_0x2773a5(0x1b8)]((_0x1f7da3,_0x259544)=>{const _0x26281f=_0x2773a5;if(_0x259544>0x0&&_0x259544<_0x2ae6ca[_0x26281f(0x14d)]-0x1){const {missingDay1:_0x410a33,notInDay2:_0x490ca7}=_0x40eeac(_0x2ae6ca[_0x259544][_0x26281f(0x131)],_0x2ae6ca[_0x259544+0x1][_0x26281f(0x131)]);_0x1be5d4=[],(_0x410a33[_0x26281f(0x14d)]!=0x0||_0x490ca7[_0x26281f(0x14d)]!=0x0)&&(_0x410a33[_0x26281f(0x14d)]!=0x0&&_0x1be5d4[_0x26281f(0x118)](..._0x410a33),_0x490ca7['length']!=0x0&&(_0x490ca7['forEach'](_0x31ca2c=>{const _0x22653f=_0x26281f;_0x31ca2c[_0x22653f(0x13e)]=-_0x31ca2c[_0x22653f(0x13e)];}),_0x1be5d4[_0x26281f(0x118)](..._0x490ca7)),_0x1be5d4[_0x26281f(0xc4)]((_0x5404ee,_0x15ad18)=>_0x5404ee[_0x26281f(0x1da)]>_0x15ad18[_0x26281f(0x1da)]?0x1:_0x15ad18['coin']>_0x5404ee[_0x26281f(0x1da)]?-0x1:0x0),_0x5aedaf[_0x26281f(0x118)]({'date':_0x2ae6ca[_0x259544+0x1][_0x26281f(0xa7)],'changes':_0x1be5d4}));}}),dbConfig['get'](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xee)]({..._0x127429,'liquidity':_0x5aedaf})[_0x2773a5(0x1d5)]();}}if(isOlderVersion(_0x2bf6d8,_0x2773a5(0xa0))){let _0x59fc1b=dbConfig['get'](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xb4)]();if(_0x59fc1b){const _0x207464=_0x59fc1b[_0x2773a5(0xd1)],_0x534c38=_0x207464?capitalize(_0x207464):_0x2773a5(0xfe);dbConfig[_0x2773a5(0x206)](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xee)]({'exchange':_0x534c38})[_0x2773a5(0x1d5)]();}}if(isOlderVersion(_0x2bf6d8,_0x2773a5(0x8c))){let _0xb51983=dbConfig['get'](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xb4)]();if(_0xb51983){const _0x5534b1=_0xb51983['marketcapEnabled'],_0x2601e5=_0x5534b1?'marketcap':![];dbConfig[_0x2773a5(0x206)]('bot')['find']({'botID':botID})[_0x2773a5(0xee)]({'marketcapEnabled':_0x2601e5})['write']();}}if(isOlderVersion(_0x2bf6d8,_0x2773a5(0x77))){let _0x1470f5=dbConfig[_0x2773a5(0x206)](_0x2773a5(0xd7))[_0x2773a5(0x1cf)]({'botID':botID})[_0x2773a5(0xb4)]();if(_0x1470f5){const _0x555c2b=_0x1470f5[_0x2773a5(0xde)],_0x5d8dde=_0x555c2b?_0x2773a5(0xda):![];dbConfig[_0x2773a5(0x206)](_0x2773a5(0xd7))['find']({'botID':botID})['assign']({'autoliquidity':_0x5d8dde})[_0x2773a5(0x1d5)]();}}let _0x28ea4b=dbPerformance['get'](_0x2773a5(0x128))[_0x2773a5(0xb4)]();isOlderVersion(_0x28ea4b,_0x2773a5(0x163))&&setStartDatePerformance();let _0x1cbcb5=dbCoinResults[_0x2773a5(0x206)](_0x2773a5(0x128))['value']();if(isOlderVersion(_0x1cbcb5,_0x2773a5(0x138))){let _0x3351ff=dbCoinResults[_0x2773a5(0x206)](_0x2773a5(0x131))['value']();if(_0x3351ff['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x24d977=_0x249b4e;dbConfig[_0x24d977(0xc6)]('version',serverversion)[_0x24d977(0x1d5)](),dbPerformance[_0x24d977(0xc6)](_0x24d977(0x128),serverversion)[_0x24d977(0x1d5)](),dbLogs[_0x24d977(0xc6)]('version',serverversion)[_0x24d977(0x1d5)](),dbCoinResults[_0x24d977(0xc6)](_0x24d977(0x128),serverversion)['write']();}function getConfiguration(_0x47ee02){const _0x2135e1=_0x249b4e;let _0x439b13=dbConfig[_0x2135e1(0x206)](_0x2135e1(0xd7))[_0x2135e1(0x1cf)]({'botID':_0x47ee02})[_0x2135e1(0xb4)]();if(_0x439b13){let _0x56d550=![];typeof _0x439b13[_0x2135e1(0x1ff)]==_0x2135e1(0x126)&&(_0x439b13={..._0x439b13,'threshold':Number(_0x439b13[_0x2135e1(0x1ff)])},_0x56d550=!![]),_0x439b13[_0x2135e1(0x1df)]==undefined&&(_0x439b13={..._0x439b13,'change24h':-0x14},_0x56d550=!![]),_0x439b13[_0x2135e1(0x1cc)]==undefined&&(_0x439b13={..._0x439b13,'fiat':_0x2135e1(0x93)},_0x56d550=!![]),_0x439b13[_0x2135e1(0xe1)]==undefined&&(_0x439b13={..._0x439b13,'onepagemode':settings[_0x2135e1(0xe1)]},_0x56d550=!![]),_0x439b13['colorscheme']==undefined&&(_0x439b13={..._0x439b13,'colorscheme':_0x2135e1(0x14e)},_0x56d550=!![]),_0x439b13[_0x2135e1(0xde)]==undefined&&(_0x439b13={..._0x439b13,'autoliquidity':_0x2135e1(0xda)},_0x56d550=!![]),_0x439b13[_0x2135e1(0x1c5)]==undefined&&(_0x439b13={..._0x439b13,'marketcapApi':settings[_0x2135e1(0x1c5)]?!![]:![]},_0x56d550=!![]),_0x439b13[_0x2135e1(0x13c)]==undefined&&(_0x439b13={..._0x439b13,'marketcapEnabled':![]},_0x56d550=!![]),_0x56d550&&(_0x439b13={'botID':_0x439b13['botID'],'exchange':_0x439b13['exchange'],'apiKey':_0x439b13[_0x2135e1(0x1de)],'apiSecret':_0x439b13[_0x2135e1(0x183)],'apiPassword':_0x439b13[_0x2135e1(0x21d)],'basecoin':_0x439b13[_0x2135e1(0x86)],'botname':_0x439b13[_0x2135e1(0x1aa)],'showname':_0x439b13[_0x2135e1(0x190)],'threshold':_0x439b13[_0x2135e1(0x1ff)],'ordertype':_0x439b13[_0x2135e1(0x122)],'timeout':_0x439b13[_0x2135e1(0x20f)],'fiat':_0x439b13[_0x2135e1(0x1cc)],'startdate':_0x439b13[_0x2135e1(0x1bd)],'recreate':_0x439b13[_0x2135e1(0x224)],'timeshift':_0x439b13['timeshift'],'onepagemode':_0x439b13[_0x2135e1(0xe1)],'headless':_0x439b13[_0x2135e1(0x20e)],'cooldown':_0x439b13[_0x2135e1(0x79)],'change24h':_0x439b13[_0x2135e1(0x1df)],'emojibuy':_0x439b13[_0x2135e1(0x103)],'emojisell':_0x439b13['emojisell'],'colorscheme':_0x439b13[_0x2135e1(0xc0)],'marketcapApi':_0x439b13[_0x2135e1(0x1c5)],'marketcapEnabled':_0x439b13[_0x2135e1(0x13c)],'portfolio':_0x439b13[_0x2135e1(0x10e)],'autoliquidity':_0x439b13[_0x2135e1(0xde)],'liquidity':_0x439b13['liquidity'],'openOrders':_0x439b13[_0x2135e1(0x120)]},dbConfig['get']('bot')[_0x2135e1(0xc9)]()[_0x2135e1(0x1d5)](),dbConfig['get'](_0x2135e1(0xd7))['push'](_0x439b13)[_0x2135e1(0x1d5)]());}else _0x439b13={'botID':_0x47ee02,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2135e1(0x1ba)+_0x47ee02,'showname':![],'threshold':0x3,'ordertype':_0x2135e1(0x1a6),'timeout':0x14,'fiat':_0x2135e1(0x93),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2135e1(0x1c2)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2135e1(0x14e),'marketcapApi':settings[_0x2135e1(0x1c5)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x439b13;}function emittedConfiguration(){const _0x3a233d=_0x249b4e;let _0x35f1bd;if(config[_0x3a233d(0x1de)]=='')_0x35f1bd={...config,'configstate':_0x3a233d(0x125)};else config[_0x3a233d(0x1de)]=='***'?_0x35f1bd={...config,'configstate':'recovery'}:(_0x35f1bd={...config,'apiKey':_0x3a233d(0x114),'apiSecret':'************'},config[_0x3a233d(0x21d)]&&(_0x35f1bd['apiPassword']=_0x3a233d(0x114)));return _0x35f1bd[_0x3a233d(0x136)]=enableFiatToggle,_0x35f1bd;}function getSettings(){const _0x17dc96=_0x249b4e;return dbSettings[_0x17dc96(0x206)]('settings')[_0x17dc96(0xb4)]();}function getSecure(){const _0x4a69ac=_0x249b4e;return dbSecure[_0x4a69ac(0x206)](_0x4a69ac(0x20c))[_0x4a69ac(0xb4)]()||{};}function updateTimeshift(_0x1e737b){const _0x540a43=_0x249b4e;let _0x3847d0=dbConfig[_0x540a43(0x206)](_0x540a43(0xd7))[_0x540a43(0x1cf)]({'botID':botID})[_0x540a43(0xb4)]();_0x3847d0&&dbConfig[_0x540a43(0x206)](_0x540a43(0xd7))[_0x540a43(0x1cf)]({'botID':botID})[_0x540a43(0xee)]({'timeshift':_0x1e737b})[_0x540a43(0x1d5)](),config[_0x540a43(0x1c2)]=_0x1e737b,proxyEmit(_0x540a43(0xa9),emittedConfiguration());}function updateOnepagemode(_0x9b2313){const _0x399333=_0x249b4e;let _0x267c15=dbConfig[_0x399333(0x206)](_0x399333(0xd7))[_0x399333(0x1cf)]({'botID':botID})['value']();_0x267c15&&dbConfig['get'](_0x399333(0xd7))[_0x399333(0x1cf)]({'botID':botID})[_0x399333(0xee)]({'onepagemode':_0x9b2313})[_0x399333(0x1d5)](),config[_0x399333(0xe1)]=_0x9b2313,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x3a6011){const _0x13d36f=_0x249b4e,_0x14bb54=_0x3a6011?!![]:![];let _0x4482d3=dbConfig[_0x13d36f(0x206)]('bot')[_0x13d36f(0x1cf)]({'botID':botID})[_0x13d36f(0xb4)]();_0x4482d3&&dbConfig[_0x13d36f(0x206)](_0x13d36f(0xd7))[_0x13d36f(0x1cf)]({'botID':botID})[_0x13d36f(0xee)]({'marketcapApi':_0x14bb54})[_0x13d36f(0x1d5)](),config[_0x13d36f(0x1c5)]=_0x14bb54,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x50e47a){const _0x25b27d=_0x249b4e;logger[_0x25b27d(0x9d)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x617778=![],_0x138784=![],_0x18faeb=[];_0x50e47a[_0x25b27d(0x10e)][_0x25b27d(0x1b8)](_0x1876eb=>{const _0x1e714b=_0x25b27d;if(!_0x1876eb[_0x1e714b(0x181)]&&_0x1876eb[_0x1e714b(0x1da)]!=_0x50e47a[_0x1e714b(0x86)])_0x18faeb[_0x1e714b(0x118)](_0x1876eb['symbol']);}),_0x18faeb[_0x25b27d(0x1b8)](_0x1532cf=>{const _0x2866df=_0x25b27d,_0x299fab=currentCoins[_0x2866df(0x1cf)](_0x4a9842=>_0x4a9842[_0x2866df(0x205)]==_0x1532cf);!_0x299fab&&(_0x617778=!![]);}),currentCoins[_0x25b27d(0x1b8)](_0x1d4708=>{const _0x489f4f=_0x25b27d;if(_0x1d4708['coin']!=config['basecoin']){const _0x2fb37d=_0x18faeb[_0x489f4f(0x1cf)](_0x1396f9=>_0x1396f9==_0x1d4708['symbol']);!_0x2fb37d&&(_0x617778=!![]);}}),_0x50e47a['portfolio'][_0x25b27d(0x1b8)](_0x369a2c=>{const _0x8b7b88=_0x25b27d,_0x4ba4d2=config[_0x8b7b88(0x10e)][_0x8b7b88(0x1cf)](_0x262e71=>_0x262e71[_0x8b7b88(0x1da)]==_0x369a2c[_0x8b7b88(0x1da)]);if(_0x4ba4d2&&_0x369a2c['offset']!=_0x4ba4d2[_0x8b7b88(0x1fa)])_0x138784=!![];});let _0x3e4117=dbConfig['get']('bot')[_0x25b27d(0x1cf)]({'botID':botID})[_0x25b27d(0xb4)]();_0x50e47a={..._0x50e47a,'apiKey':decryptRSA(secure[_0x25b27d(0xe4)],_0x50e47a[_0x25b27d(0x1de)]),'apiSecret':decryptRSA(secure[_0x25b27d(0xe4)],_0x50e47a[_0x25b27d(0x183)])};_0x50e47a[_0x25b27d(0x21d)]&&(_0x50e47a['apiPassword']=decryptRSA(secure[_0x25b27d(0xe4)],_0x50e47a[_0x25b27d(0x21d)]));let _0x37ae5b=![];if(_0x3e4117){_0x50e47a[_0x25b27d(0x1de)]==_0x25b27d(0x114)?_0x50e47a[_0x25b27d(0x1de)]=config[_0x25b27d(0x1de)]:_0x37ae5b=!![];_0x50e47a[_0x25b27d(0x183)]==_0x25b27d(0x114)?_0x50e47a['apiSecret']=config[_0x25b27d(0x183)]:_0x37ae5b=!![];if(_0x50e47a[_0x25b27d(0x21d)]==_0x25b27d(0x114))_0x50e47a['apiPassword']=config[_0x25b27d(0x21d)];else{if(_0x50e47a['apiPassword'])_0x37ae5b=!![];}dbConfig[_0x25b27d(0x206)](_0x25b27d(0xd7))[_0x25b27d(0x1cf)]({'botID':botID})['assign'](_0x50e47a)[_0x25b27d(0x1d5)]();}else dbConfig[_0x25b27d(0x206)](_0x25b27d(0xd7))['push'](_0x50e47a)[_0x25b27d(0x1d5)](),_0x37ae5b=!![],process[_0x25b27d(0x1fc)]({'status':_0x25b27d(0x1e1),'live':'running'},_0x19f534=>{});process['send']({'botname':_0x50e47a[_0x25b27d(0x1aa)]},_0x32514b=>{}),config={..._0x50e47a},updateBotManager(),proxyEmit(_0x25b27d(0x1f1)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x37ae5b)!_0x3e4117?await reset(!![]):getBalances();else _0x617778||_0x138784?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x36fabc){const _0x3ace2f=_0x249b4e,_0x3ab6ba={...config,'headless':_0x36fabc[_0x3ace2f(0x20e)]};let _0x10915e=dbConfig[_0x3ace2f(0x206)]('bot')[_0x3ace2f(0x1cf)]({'botID':botID})['value']();_0x10915e&&dbConfig[_0x3ace2f(0x206)](_0x3ace2f(0xd7))[_0x3ace2f(0x1cf)]({'botID':botID})[_0x3ace2f(0xee)](_0x3ab6ba)[_0x3ace2f(0x1d5)](),config={..._0x3ab6ba},updateBotManager(),proxyEmit(_0x3ace2f(0xa9),emittedConfiguration());}async function storeFiat(_0x5cab93){const _0x272c9e=_0x249b4e,_0x9e617a={...config,'fiat':_0x5cab93};let _0x10b67a=dbConfig[_0x272c9e(0x206)]('bot')[_0x272c9e(0x1cf)]({'botID':botID})[_0x272c9e(0xb4)]();_0x10b67a&&dbConfig[_0x272c9e(0x206)]('bot')[_0x272c9e(0x1cf)]({'botID':botID})[_0x272c9e(0xee)](_0x9e617a)[_0x272c9e(0x1d5)](),config={..._0x9e617a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x3fcf97=_0x249b4e;logger['full'](_0x3fcf97(0x1d8));try{if(fs[_0x3fcf97(0x8d)](path[_0x3fcf97(0x1af)](configpath,_0x3fcf97(0x180)+botID+_0x3fcf97(0xca))))fs[_0x3fcf97(0x12e)](path[_0x3fcf97(0x1af)](configpath,_0x3fcf97(0x180)+botID+'-events.json'));if(fs[_0x3fcf97(0x8d)](path[_0x3fcf97(0x1af)](configpath,_0x3fcf97(0x180)+botID+'-performance.json')))fs[_0x3fcf97(0x12e)](path['join'](configpath,_0x3fcf97(0x180)+botID+_0x3fcf97(0x1d7)));if(fs[_0x3fcf97(0x8d)](path[_0x3fcf97(0x1af)](configpath,'bot-'+botID+_0x3fcf97(0x1f5))))fs[_0x3fcf97(0x12e)](path[_0x3fcf97(0x1af)](configpath,'bot-'+botID+_0x3fcf97(0x1f5)));}catch(_0x5fd60f){if(_0x5fd60f)logger[_0x3fcf97(0x112)]('Error\x20while\x20deleting\x20files:\x20',_0x5fd60f);}const _0x5d7722=getDate();let _0x249db1=[];currentCoins[_0x3fcf97(0x1b8)](_0x1d6fef=>{const _0xa73fff=_0x3fcf97;_0x249db1[_0xa73fff(0x118)]({'coin':_0x1d6fef[_0xa73fff(0x1da)],'number':_0x1d6fef[_0xa73fff(0x13e)],'price':_0x1d6fef[_0xa73fff(0xb2)]});});let _0x4d0aa3=dbConfig[_0x3fcf97(0x206)](_0x3fcf97(0xd7))[_0x3fcf97(0x1cf)]({'botID':botID})[_0x3fcf97(0xb4)]();_0x4d0aa3&&(dbConfig[_0x3fcf97(0x206)](_0x3fcf97(0xd7))['find']({'botID':botID})[_0x3fcf97(0xee)]({'liquidity':[{'date':_0x5d7722,'changes':_0x249db1}]})['write'](),config[_0x3fcf97(0x214)]=[]),restartBot(!![]);}function noslash(_0x2af926){const _0x29d7f3=_0x249b4e;return _0x2af926[_0x29d7f3(0x208)]('/','');}function updateHighestFee(_0x1d56ec){const _0x556ae0=_0x249b4e;if(_0x1d56ec[_0x556ae0(0xce)]){let _0x815b01={'filled':_0x1d56ec[_0x556ae0(0xac)]*_0x1d56ec[_0x556ae0(0x135)],'amount':_0x1d56ec['filled']*_0x1d56ec[_0x556ae0(0x135)],'side':_0x1d56ec[_0x556ae0(0x1ed)]==_0x556ae0(0x110)?_0x556ae0(0x17e):_0x556ae0(0x110),'price':0x1/_0x1d56ec['price']};_0x1d56ec={..._0x1d56ec,..._0x815b01};}const _0x20a73a=defaultFee*_0x1d56ec['filled']*_0x1d56ec[_0x556ae0(0x135)];lastFees[_0x556ae0(0x18a)]['length']===0x14&&lastFees[_0x556ae0(0x18a)][_0x556ae0(0x92)](),lastFees[_0x556ae0(0x18a)][_0x556ae0(0x118)](_0x20a73a),lastFees['highest']=Math[_0x556ae0(0xa2)](...lastFees[_0x556ae0(0x18a)]);}async function updateNumberCoinsCcxt(_0x36c766){const _0x3feb9a=_0x249b4e;logger[_0x3feb9a(0x9d)]('0\x20-\x20EXECUTION:\x20'+_0x36c766[_0x3feb9a(0x205)]+_0x3feb9a(0xb3)+_0x36c766['status']+_0x3feb9a(0xb3)+_0x36c766[_0x3feb9a(0xac)]+_0x3feb9a(0xff)+_0x36c766['amount']+'\x20|\x20'+_0x36c766['id']);let _0x217be8=_0x36c766['status'],_0x473bd2=![];currentCoins[_0x3feb9a(0x1b8)](_0x30acaa=>{const _0x1dfaaa=_0x3feb9a;_0x30acaa[_0x1dfaaa(0x205)]==_0x36c766['symbol']&&(_0x473bd2=!![]);});if(!_0x473bd2)return;let _0x5eb7b4=currentCoins[_0x3feb9a(0x1cf)](_0x4055aa=>_0x4055aa[_0x3feb9a(0x205)]==_0x36c766[_0x3feb9a(0x205)]);const _0x55530f=_0x204225=>{const _0x224ef5=_0x3feb9a;_0x5eb7b4=currentCoins[_0x224ef5(0x1cf)](_0x298ce6=>_0x298ce6[_0x224ef5(0x205)]==_0x36c766['symbol']);if(_0x5eb7b4)_0x5eb7b4[_0x224ef5(0x1b4)]=_0x204225;};let _0x30befb=![];for(const _0x204655 of lastOrders){const _0x43c578=0x64,_0x184157=0x1388;let _0x257269=0x0;while(!_0x204655[_0x3feb9a(0xe5)]&&_0x257269*_0x43c578<_0x184157){_0x257269++,await sleep(_0x43c578);}if(_0x257269>0x0)logger[_0x3feb9a(0x9d)](_0x3feb9a(0x1a4)+_0x257269*_0x43c578/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x204655[_0x3feb9a(0xe5)]==_0x36c766['id']&&(_0x30befb=!![]);}if(_0x217be8=='open'){_0x55530f(_0x3feb9a(0x1f0));if(_0x36c766[_0x3feb9a(0xac)]>0x0){if(_0x30befb){setBlockTransactionDetection(!![]),logger['debug'](_0x3feb9a(0x78)+_0x36c766['id']);const _0x5a3875=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5eb7b4);[currentCoins,currentCoinsAll]=_0x5a3875,setBlockTransactionDetection(![]);}else logger[_0x3feb9a(0x9d)](_0x3feb9a(0xfa)+_0x36c766['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x217be8==_0x3feb9a(0xfd)){_0x55530f(_0x3feb9a(0xfd));const _0xa76611=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xa76611,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x217be8==_0x3feb9a(0xe6)){if(lastOrders)for(const _0x566f66 of lastOrders){if(_0x566f66[_0x3feb9a(0xe5)]==_0x36c766['id']){logger[_0x3feb9a(0x9d)](_0x3feb9a(0xb1)+_0x36c766['id']),_0x30befb=!![];if(_0x566f66['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x3feb9a(0x9d)](_0x3feb9a(0x1f7)+_0x36c766['id']);if(_0x36c766['average'])_0x566f66['price']=_0x36c766[_0x3feb9a(0x154)];else{if(_0x36c766['price'])_0x566f66[_0x3feb9a(0x135)]=_0x36c766['price'];else{}}_0x566f66[_0x3feb9a(0xac)]=_0x36c766[_0x3feb9a(0xac)],updateHighestFee(_0x566f66);const _0x5f30c0=await getCoins(balanceUpdateDelay,undefined,undefined,_0x5eb7b4);[currentCoins,currentCoinsAll]=_0x5f30c0,setBlockTransactionDetection(![]),await validateOrders(),_0x55530f(_0x3feb9a(0xac)),_0x566f66[_0x3feb9a(0x17d)]={'currency':_0x36c766[_0x3feb9a(0x17d)]?_0x36c766['fee'][_0x3feb9a(0x222)]:null,'cost':_0x36c766[_0x3feb9a(0x17d)]?_0x36c766['fee'][_0x3feb9a(0x75)]:0x0},await updateCoinResults(_0x566f66);}}}!_0x30befb&&(logger[_0x3feb9a(0x9d)](_0x3feb9a(0x1dc)+_0x36c766['id']),_0x55530f(_0x3feb9a(0xac)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5df087=JSON[_0x3feb9a(0xc8)](lastBalances[_0x3feb9a(0x10e)]);const _0x19c48c=_0x5df087['find'](_0x5c6828=>_0x5c6828['symbol']==_0x36c766[_0x3feb9a(0x205)]);if(_0x19c48c){if(_0x217be8==_0x3feb9a(0x1f0))_0x19c48c[_0x3feb9a(0x1b4)]=_0x19c48c['orderstatus']==_0x3feb9a(0xac)?'filled':'open';else{if(_0x217be8==_0x3feb9a(0xfd))_0x19c48c['orderstatus']=_0x19c48c[_0x3feb9a(0x1b4)]=='filled'?_0x3feb9a(0xac):'canceled';else _0x217be8==_0x3feb9a(0xe6)&&(_0x19c48c['orderstatus']=_0x3feb9a(0xac));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x5df087)},proxyEmit(_0x3feb9a(0x194),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2075de=_0x249b4e;await getOpenOrders();let _0x50412a=![];currentCoins[_0x2075de(0x1b8)](_0x6f1346=>{const _0xfaf284=_0x2075de;_0x50412a=allOpenOrders['find'](_0x565a0c=>_0x565a0c[_0xfaf284(0x205)]==_0x6f1346[_0xfaf284(0x205)]),_0x6f1346[_0xfaf284(0x1b4)]=_0x50412a?'open':_0xfaf284(0x162);});}async function fetchBalance(_0xfd4690=!![]){const _0x905384=_0x249b4e;let _0x120af7;try{return _0x120af7=await exchange[_0x905384(0x220)](),mybalances=_0x120af7['total'],!![];}catch(_0x11c070){return!_0xfd4690?handleErrorNoStop(_0x11c070,_0x905384(0x143)):await handleError(_0x11c070,'fetchBalance()'),![];}}async function getCoins(_0x484673=0x0,_0x3ab9ad=!![],_0x439724=config[_0x249b4e(0x86)],_0xf5ce94){const _0x558390=_0x249b4e;let _0x126580=[],_0x43f278=[],_0x3ad993=[];if(_0x484673)await sleep(_0x484673);if(botPaused)return[currentCoins,currentCoinsAll];let _0x20cd5f=![],_0x503363=0x0,_0x2933f8,_0x312f6f;_0xf5ce94&&(_0x2933f8=currentCoins[_0x558390(0x1cf)](_0x297a03=>_0x297a03[_0x558390(0x1da)]==_0xf5ce94[_0x558390(0x1da)]),_0x312f6f=_0x2933f8['number']);while(!_0x20cd5f){const _0x3d7fa2=await fetchBalance(_0x3ab9ad);if(_0x3d7fa2){if(_0xf5ce94){if(mybalances[_0xf5ce94[_0x558390(0x1da)]]!=_0x312f6f)logger[_0x558390(0x9d)](_0x558390(0x8f)+_0xf5ce94['coin']+':\x20'+mybalances[_0xf5ce94[_0x558390(0x1da)]]+'\x20('+_0x312f6f+')'),_0x20cd5f=!![];else{logger[_0x558390(0x9d)]('Invalid\x20balance\x20for\x20'+_0xf5ce94['coin']+':\x20'+mybalances[_0xf5ce94[_0x558390(0x1da)]]+'\x20('+_0x312f6f+')'),_0x503363++;if(_0x503363<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x558390(0x9d)](_0x558390(0xd6)+_0x503363+_0x558390(0x89));break;}}}else break;}}for(const [_0x25681d,_0x325f22]of Object['entries'](mybalances)){_0x3ad993['push'](_0x25681d);}config[_0x558390(0x10e)]['forEach'](_0x3e3a32=>{const _0x3ac8e6=_0x558390;!_0x3ad993[_0x3ac8e6(0x1d6)](_0x3e3a32[_0x3ac8e6(0x1da)])&&(mybalances[_0x3e3a32['coin']]=0x0);});if(_0x439724=='')for(const [_0x2a8242,_0x4a0872]of Object[_0x558390(0x196)](mybalances)){_0x4a0872!=0x0&&_0x126580[_0x558390(0x118)]({'coin':_0x2a8242});}else for(const [_0x4baa8a,_0x502141]of Object['entries'](mybalances)){const _0x374a89=config[_0x558390(0x10e)][_0x558390(0x1cf)](_0x2442f5=>_0x2442f5[_0x558390(0x1da)]==_0x4baa8a),_0x1d747c=_0x4baa8a+'/'+_0x439724,_0x18af78=_0x439724+'/'+_0x4baa8a,_0x464a3b=currentCoins[_0x558390(0x1cf)](_0x46854f=>_0x46854f[_0x558390(0x1da)]==_0x4baa8a);if((_0x502141!=0x0||_0x374a89)&&(allSymbols[_0x558390(0x1d6)](_0x1d747c)||_0x4baa8a==_0x439724))_0x464a3b?_0x126580[_0x558390(0x118)]({..._0x464a3b,'number':Math['max'](_0x502141+(_0x374a89&&_0x374a89['offset']||0x0),0x0)}):_0x126580[_0x558390(0x118)]({'coin':_0x4baa8a,'symbol':_0x1d747c,'reverse':![],'number':Math[_0x558390(0xa2)](_0x502141+(_0x374a89&&_0x374a89[_0x558390(0x1fa)]||0x0),0x0),'orderstatus':_0x558390(0x162)});else{if((_0x502141!=0x0||_0x374a89)&&allSymbols[_0x558390(0x1d6)](_0x18af78))_0x464a3b?_0x126580['push']({..._0x464a3b,'number':Math[_0x558390(0xa2)](_0x502141+(_0x374a89&&_0x374a89[_0x558390(0x1fa)]||0x0),0x0)}):_0x126580[_0x558390(0x118)]({'coin':_0x4baa8a,'symbol':_0x18af78,'reverse':!![],'number':Math[_0x558390(0xa2)](_0x502141+(_0x374a89&&_0x374a89['offset']||0x0),0x0),'orderstatus':_0x558390(0x162)});else _0x374a89&&_0x126580[_0x558390(0x118)]({'coin':_0x374a89[_0x558390(0x1da)],'symbol':_0x374a89[_0x558390(0x205)],'reverse':_0x374a89[_0x558390(0xce)],'number':0x0,'orderstatus':_0x558390(0x162)});}}return _0x126580[_0x558390(0xc4)]((_0x24a96c,_0x1ec137)=>_0x24a96c[_0x558390(0xd3)]<_0x1ec137[_0x558390(0xd3)]?0x1:_0x1ec137[_0x558390(0xd3)]<_0x24a96c[_0x558390(0xd3)]?-0x1:0x0),_0x43f278=cloneDeep(_0x126580),_0x126580=_0x126580[_0x558390(0x15a)](_0x1d0cbb=>{const _0x22ba7e=_0x558390,_0x5e70d8=config[_0x22ba7e(0x10e)][_0x22ba7e(0x1cf)](_0x3b8256=>_0x3b8256[_0x22ba7e(0x1da)]==_0x1d0cbb['coin']);return _0x5e70d8&&!_0x5e70d8[_0x22ba7e(0x181)];}),[_0x126580,_0x43f278];}async function getCoinNumber(_0x474eff){const _0x458fe6=_0x249b4e;let _0x4e12f4;try{const _0xec9576=await exchange[_0x458fe6(0x220)]();_0x4e12f4=_0xec9576[_0x458fe6(0x184)][_0x474eff];}catch(_0x42cc54){await handleError(_0x42cc54,'getCoinNumber()');}return _0x4e12f4;}async function getOpenOrders(){const _0x4a8d05=_0x249b4e;let _0x2e2228;allOpenOrders=[];try{for(const _0x16e91f of config[_0x4a8d05(0x10e)]){!_0x16e91f['excluded']&&_0x16e91f['coin']!=config['basecoin']&&(_0x2e2228=await exchange['fetchOpenOrders'](_0x16e91f[_0x4a8d05(0x205)]),_0x2e2228[_0x4a8d05(0x14d)]>0x0&&allOpenOrders[_0x4a8d05(0x118)](_0x2e2228[0x0]));}}catch(_0x5d29f7){await handleError(_0x5d29f7,_0x4a8d05(0x145));}}async function handleOpenOrders(_0x5f4b89=0x0){const _0x369dad=_0x249b4e;allOpenOrders[_0x369dad(0x14d)]==0x0&&lockOrders==ORDERS[_0x369dad(0x18b)]&&allOrdersPlaced&&(_0x5f4b89==0x0?(logger[_0x369dad(0x9d)]('1\x20-\x20Handle\x20open\x20orders'),_0x5f4b89++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x369dad(0x16a)),validateOrders(_0x369dad(0xec))));}async function testAPI(_0x546cf8){const _0x7f1db0=_0x249b4e,_0x16a6de=ccxt['pro'][_0x546cf8['exchange'][_0x7f1db0(0xbf)]()],_0x197a4d=new _0x16a6de({'apiKey':_0x546cf8[_0x7f1db0(0x1de)],'secret':_0x546cf8[_0x7f1db0(0x183)],'options':{'defaultType':_0x7f1db0(0x1bf)}});if(_0x546cf8[_0x7f1db0(0x21d)])_0x197a4d[_0x7f1db0(0x1fd)]=_0x546cf8[_0x7f1db0(0x21d)];try{await _0x197a4d[_0x7f1db0(0x220)]();}catch(_0x409a45){logger[_0x7f1db0(0x9d)](_0x7f1db0(0x14f)+_0x409a45[_0x7f1db0(0x7a)]());throw _0x409a45;}}function cloneDeep(_0x2b7019){const _0xc54175=_0x249b4e;return JSON[_0xc54175(0xc8)](JSON[_0xc54175(0x1ce)](_0x2b7019));}async function getPortfolio(_0x5ae750){const _0x4e8d39=_0x249b4e;let _0x285e57=[],_0x165a82=[],_0x3d1e78=[],_0x4fcd79;_0x5ae750[_0x4e8d39(0x1de)]=decryptRSA(secure[_0x4e8d39(0xe4)],_0x5ae750[_0x4e8d39(0x1de)]),_0x5ae750['apiSecret']=decryptRSA(secure[_0x4e8d39(0xe4)],_0x5ae750[_0x4e8d39(0x183)]);if(_0x5ae750['apiPassword'])_0x5ae750['apiPassword']=decryptRSA(secure[_0x4e8d39(0xe4)],_0x5ae750['apiPassword']);if(_0x5ae750[_0x4e8d39(0x1de)]!==_0x4e8d39(0x114)||_0x5ae750[_0x4e8d39(0x183)]!==_0x4e8d39(0x114)||_0x5ae750[_0x4e8d39(0x21d)]&&_0x5ae750[_0x4e8d39(0x21d)]!=='************'){if(config[_0x4e8d39(0xd1)]){if(_0x5ae750[_0x4e8d39(0x1de)]==_0x4e8d39(0x114))_0x5ae750[_0x4e8d39(0x1de)]=config[_0x4e8d39(0x1de)];if(_0x5ae750['apiSecret']=='************')_0x5ae750[_0x4e8d39(0x183)]=config[_0x4e8d39(0x183)];if(_0x5ae750[_0x4e8d39(0x21d)]==_0x4e8d39(0x114))_0x5ae750[_0x4e8d39(0x21d)]=config[_0x4e8d39(0x21d)];}try{await testAPI(_0x5ae750);}catch(_0x594b8d){if(_0x594b8d[_0x4e8d39(0x7a)]()['includes'](_0x4e8d39(0x9e))){logHistory('error','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),proxyEmit(_0x4e8d39(0x99),![]);return;}else{logHistory(_0x4e8d39(0x1e9),_0x4e8d39(0xfb)),logger['debug'](_0x4e8d39(0xb7),_0x594b8d),proxyEmit(_0x4e8d39(0x99),![]);return;}}exchange?updateExchange(_0x5ae750['apiKey'],_0x5ae750[_0x4e8d39(0x183)],_0x5ae750[_0x4e8d39(0x21d)]):await initExchange(_0x5ae750['exchange'],_0x5ae750[_0x4e8d39(0x1de)],_0x5ae750[_0x4e8d39(0x183)],_0x5ae750['apiPassword']);await loadSymbols();const _0x41c696=await getCoins(0x0,![],_0x5ae750[_0x4e8d39(0x86)]);_0x3d1e78=cloneDeep(_0x41c696[0x1]);}else{const _0x371752=await getCoins();_0x3d1e78=cloneDeep(_0x371752[0x1]);}if(_0x5ae750[_0x4e8d39(0x86)]=='')proxyEmit(_0x4e8d39(0x99),!![]),proxyEmit(_0x4e8d39(0x161),_0x3d1e78);else{_0x3d1e78[_0x4e8d39(0x1b8)](_0x435e5a=>{const _0x167eab=_0x4e8d39;if(_0x435e5a[_0x167eab(0x1da)]!=_0x5ae750[_0x167eab(0x86)]&&allSymbols[_0x167eab(0x1d6)](_0x435e5a[_0x167eab(0x205)]))_0x285e57[_0x167eab(0x118)](_0x435e5a[_0x167eab(0x205)]);});if(_0x285e57[_0x4e8d39(0x14d)]==0x0)logHistory(_0x4e8d39(0x1e9),_0x4e8d39(0xbc));else{try{_0x165a82=await getTickers(_0x285e57);}catch(_0x45b9f5){logHistory(_0x4e8d39(0x1e9),'Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x4e8d39(0xe0),_0x45b9f5),proxyEmit(_0x4e8d39(0x99),![]);return;}_0x3d1e78['forEach'](_0x106155=>{const _0x57594e=_0x4e8d39;_0x106155['coin']!=_0x5ae750[_0x57594e(0x86)]?_0x165a82[_0x106155[_0x57594e(0x205)]]?_0x4fcd79=_0x106155['reverse']?0x1/_0x165a82[_0x106155['symbol']][_0x57594e(0xb2)]:_0x165a82[_0x106155[_0x57594e(0x205)]]['last']:_0x4fcd79=0x0:_0x4fcd79=0x1,_0x106155[_0x57594e(0x135)]=formatResult(_0x4fcd79,0x8);}),await getMarketCap(_0x3d1e78),proxyEmit(_0x4e8d39(0x99),!![]),proxyEmit(_0x4e8d39(0x161),_0x3d1e78);}}}function truncateTradeAmount(_0x304253,_0xe29aa2){const _0xf40d51=_0x249b4e;let _0x5cb802=0x0;try{_0x5cb802=exchange[_0xf40d51(0x127)](_0x304253,_0xe29aa2);}catch(_0x29b6d3){}return _0x5cb802;}function checkMinimums(_0x240e7c){const _0x2435d5=_0x249b4e;let _0x1a5f86=!![];const _0x5d4257=!_0x240e7c[_0x2435d5(0xce)]?markets[_0x240e7c[_0x2435d5(0x205)]][_0x2435d5(0x1a0)][_0x2435d5(0x20b)]['min']:markets[_0x240e7c[_0x2435d5(0x205)]][_0x2435d5(0x1a0)][_0x2435d5(0x75)][_0x2435d5(0x1c4)],_0x56b148=!_0x240e7c['reverse']?markets[_0x240e7c[_0x2435d5(0x205)]][_0x2435d5(0x1a0)]['cost'][_0x2435d5(0x1c4)]:markets[_0x240e7c['symbol']][_0x2435d5(0x1a0)][_0x2435d5(0x20b)]['min'],_0x4accf8=truncateTradeAmount(_0x240e7c[_0x2435d5(0x205)],_0x240e7c[_0x2435d5(0x11c)]);_0x240e7c[_0x2435d5(0x11c)]=_0x4accf8;if(Math[_0x2435d5(0xfc)](_0x4accf8)<_0x5d4257)_0x1a5f86=![];if(Math['abs'](_0x4accf8)*_0x240e7c[_0x2435d5(0xb2)]<_0x56b148)_0x1a5f86=![];if(_0x240e7c[_0x2435d5(0x1ed)]==_0x2435d5(0x110)){let _0x4f5b52=config[_0x2435d5(0x10e)][_0x2435d5(0x1cf)](_0x5d0b3b=>_0x5d0b3b[_0x2435d5(0x1da)]==_0x240e7c[_0x2435d5(0x1da)]);if(_0x4f5b52[_0x2435d5(0x1fa)]>0x0){if(Math[_0x2435d5(0xfc)](_0x4accf8)>_0x240e7c[_0x2435d5(0x13e)]-_0x4f5b52['offset'])_0x1a5f86=![];}else{if(Math['abs'](_0x4accf8)>_0x240e7c['number'])_0x1a5f86=![];}}if(_0x240e7c[_0x2435d5(0x1ed)]==_0x2435d5(0x17e)){let _0x2ef1b7=config[_0x2435d5(0x10e)][_0x2435d5(0x1cf)](_0x348a06=>_0x348a06[_0x2435d5(0x1da)]==config[_0x2435d5(0x86)]),_0x2899c8=currentCoins['find'](_0x13fb43=>_0x13fb43[_0x2435d5(0x1da)]==config['basecoin']);if(_0x2ef1b7[_0x2435d5(0x1fa)]>0x0){if(Math[_0x2435d5(0xfc)](_0x4accf8)*_0x240e7c[_0x2435d5(0xb2)]>_0x2899c8[_0x2435d5(0x13e)]-_0x2ef1b7[_0x2435d5(0x1fa)])_0x1a5f86=![];}else{if(Math[_0x2435d5(0xfc)](_0x4accf8)*_0x240e7c['last']>_0x2899c8[_0x2435d5(0x13e)])_0x1a5f86=![];}}return _0x1a5f86;}async function getBalances(_0x51e732=!![]){const _0x3c7bd7=_0x249b4e;let _0x4c2c7d=0x0,_0x1adb64;const _0x5f6c7a=config['threshold'];if(config[_0x3c7bd7(0x20e)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x598ad5=>{const _0x1cae01=_0x3c7bd7;if(_0x598ad5[_0x1cae01(0x1da)]!=config[_0x1cae01(0x86)]){let _0x422267=gTicker[noslash(_0x598ad5[_0x1cae01(0x205)])];_0x1adb64=_0x598ad5[_0x1cae01(0xce)]?0x1/_0x422267:_0x422267;}else _0x1adb64=0x1;let _0x3be9e6=_0x598ad5[_0x1cae01(0x13e)]*_0x1adb64;_0x4c2c7d+=_0x3be9e6,_0x598ad5['last']=formatResult(Number(_0x1adb64),0x8),_0x598ad5[_0x1cae01(0xb4)]=_0x3be9e6;}),currentCoins[_0x3c7bd7(0x1b8)](_0x340500=>{const _0x54e592=_0x3c7bd7;let _0x2935ce=config[_0x54e592(0x10e)][_0x54e592(0x1cf)](_0x49311b=>_0x49311b[_0x54e592(0x1da)]==_0x340500[_0x54e592(0x1da)]),_0x34dd8c=Number(_0x2935ce[_0x54e592(0xd8)]),_0x5aa006=_0x340500[_0x54e592(0xb4)]/_0x4c2c7d*0x64,_0x3a5d18=_0x34dd8c*_0x4c2c7d/0x64/_0x340500[_0x54e592(0xb2)]-_0x340500[_0x54e592(0x13e)];_0x340500[_0x54e592(0xd8)]=formatResult(_0x5aa006,0x3),_0x340500[_0x54e592(0x213)]=formatResult(_0x34dd8c,0x3),_0x340500[_0x54e592(0x11c)]=formatResult(_0x3a5d18,0x8),_0x340500[_0x54e592(0x1ed)]='',_0x340500[_0x54e592(0x202)]=![];if(_0x340500['coin']!=config[_0x54e592(0x86)]){if(_0x340500[_0x54e592(0xd8)]>_0x34dd8c)_0x340500[_0x54e592(0x1ed)]=_0x54e592(0x110),_0x340500['valid']=checkMinimums(_0x340500);else _0x340500[_0x54e592(0xd8)]<_0x34dd8c&&(_0x340500[_0x54e592(0x1ed)]=_0x54e592(0x17e),_0x340500[_0x54e592(0x202)]=checkMinimums(_0x340500));}_0x340500[_0x54e592(0xd3)]=_0x340500[_0x54e592(0xd8)]/_0x340500['target']-0x1;if(_0x340500[_0x54e592(0x1b4)]==_0x54e592(0xac)||_0x340500[_0x54e592(0x1b4)]==_0x54e592(0xfd))_0x340500['orderstatus']=_0x54e592(0x162);}),currentCoins[_0x3c7bd7(0xc4)]((_0x2aee9b,_0x4cb5fc)=>_0x2aee9b[_0x3c7bd7(0xd3)]<_0x4cb5fc['delta']?0x1:_0x4cb5fc[_0x3c7bd7(0xd3)]<_0x2aee9b['delta']?-0x1:0x0);const _0xb0ac20=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xb0ac20[_0x3c7bd7(0x7d)],'usd':_0xb0ac20[_0x3c7bd7(0x153)],'portfolio':JSON[_0x3c7bd7(0x1ce)](currentCoins),'threshold':_0x5f6c7a},proxyEmit(_0x3c7bd7(0x194),{'serverversion':serverversion,'balances':lastBalances});if(_0x51e732){if(config[_0x3c7bd7(0x20e)])headlessMode({'portfolio':currentCoins,'threshold':_0x5f6c7a});else{if(lockOrders==ORDERS[_0x3c7bd7(0x19d)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5f6c7a});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x22c21d=getNormalizedPerformance();getStartingBalances(_0x22c21d),emitPerformance(_0x22c21d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3d615c=_0x249b4e;if(!lastBalances)return;let _0x347041=[],_0x393d18,_0x3df33a=JSON[_0x3d615c(0xc8)](lastBalances[_0x3d615c(0x10e)]);_0x3df33a['sort']((_0x531ced,_0x3e3c0c)=>_0x531ced[_0x3d615c(0x1da)]>_0x3e3c0c[_0x3d615c(0x1da)]?0x1:_0x3e3c0c[_0x3d615c(0x1da)]>_0x531ced[_0x3d615c(0x1da)]?-0x1:0x0),_0x3df33a['forEach'](_0x191950=>{const _0x2aed41=_0x3d615c;let _0x110ce2={'coin':_0x191950['coin'],'number':_0x191950[_0x2aed41(0x13e)],'price':_0x191950['last']};_0x347041[_0x2aed41(0x118)](_0x110ce2);});const _0x33bc9e=await getFiat();_0x393d18={'date':lastBalances[_0x3d615c(0x148)][_0x3d615c(0x1cb)]('\x20')[0x0],'eur':_0x33bc9e[_0x3d615c(0x7d)],'usd':_0x33bc9e[_0x3d615c(0x153)],'coins':_0x347041};let _0x58b039=dbPerformance[_0x3d615c(0x206)](_0x3d615c(0x130))[_0x3d615c(0x1cf)]({'date':_0x393d18[_0x3d615c(0xa7)]})[_0x3d615c(0xb4)]();_0x58b039?_0x393d18[_0x3d615c(0xa7)]!=config['startdate']&&dbPerformance[_0x3d615c(0x206)](_0x3d615c(0x130))[_0x3d615c(0x1cf)]({'date':_0x393d18['date']})['assign'](_0x393d18)[_0x3d615c(0x1d5)]():dbPerformance[_0x3d615c(0x206)](_0x3d615c(0x130))[_0x3d615c(0x118)](_0x393d18)[_0x3d615c(0x1d5)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3a569b=_0x249b4e;let _0x1ea79c=[];if(dbPerformance[_0x3a569b(0x76)](_0x3a569b(0x130))[_0x3a569b(0xb4)]()){let _0x245060=dbPerformance[_0x3a569b(0x206)](_0x3a569b(0x130))[_0x3a569b(0x15d)]()[_0x3a569b(0x15a)](_0x134070=>{if(_0x134070['coins']['length']==0x0)return![];else return!![];})[_0x3a569b(0x1ac)](_0x3a569b(0xa7))['value'](),_0x104f2=[...config[_0x3a569b(0x214)]];_0x104f2[_0x3a569b(0xc4)]((_0x9e98d2,_0x170bb4)=>_0x9e98d2['date']>_0x170bb4[_0x3a569b(0xa7)]?-0x1:_0x170bb4[_0x3a569b(0xa7)]>_0x9e98d2[_0x3a569b(0xa7)]?0x1:0x0);let _0x1c1f52=0x1,_0x27d1f6=[],_0x174233=0x0;_0x245060['slice']()['reverse']()[_0x3a569b(0x1b8)]((_0x1be63e,_0x1b9900)=>{const _0x5b85d3=_0x3a569b;if(_0x104f2[_0x174233]){if(_0x245060[_0x245060[_0x5b85d3(0x14d)]-_0x1b9900]&&_0x104f2[_0x174233][_0x5b85d3(0xa7)]==_0x245060[_0x245060['length']-_0x1b9900][_0x5b85d3(0xa7)]){if(_0x1b9900<_0x245060['length']){let _0x5c4d4a=0x0,_0xcc4df7=0x0;_0x245060[_0x245060[_0x5b85d3(0x14d)]-_0x1b9900][_0x5b85d3(0x131)]['forEach'](_0x157982=>{const _0x4c76fb=_0x5b85d3;_0xcc4df7+=_0x157982[_0x4c76fb(0x13e)]*_0x157982[_0x4c76fb(0x135)];}),_0x104f2[_0x174233][_0x5b85d3(0x20a)][_0x5b85d3(0x1b8)](_0x350bc4=>{const _0x3f99ea=_0x5b85d3;_0x5c4d4a+=_0x350bc4[_0x3f99ea(0x13e)]*_0x350bc4[_0x3f99ea(0x135)];}),_0x1c1f52*=_0x5c4d4a/(_0xcc4df7-_0x5c4d4a)+0x1;}_0x174233++;}}let _0x4c8671=0x0;_0x1be63e[_0x5b85d3(0x131)][_0x5b85d3(0x1b8)](_0xc2d313=>{const _0x3d7bd1=_0x5b85d3;_0x4c8671+=_0xc2d313[_0x3d7bd1(0x13e)]*_0xc2d313[_0x3d7bd1(0x135)];}),_0x27d1f6[_0x245060[_0x5b85d3(0x14d)]-_0x1b9900-0x1]=_0x4c8671*(_0x1c1f52-0x1);});let _0x393a81=[];_0x104f2=[...config[_0x3a569b(0x214)]]||[];let _0x5717ab=0x0;_0x174233=0x0,_0x245060[_0x3a569b(0x1b8)]((_0x5c86f6,_0x43b7d1)=>{const _0x3e0d28=_0x3a569b;if(_0x104f2[_0x174233]){const _0x159806=fns[_0x3e0d28(0xc8)](_0x104f2[_0x174233][_0x3e0d28(0xa7)],_0x3e0d28(0x217),new Date()),_0x38d130=fns['parse'](_0x5c86f6[_0x3e0d28(0xa7)],_0x3e0d28(0x217),new Date());if(fns[_0x3e0d28(0x10c)](_0x159806,_0x38d130)){let _0x16bffa=0x0;_0x104f2[_0x174233][_0x3e0d28(0x20a)][_0x3e0d28(0x1b8)](_0x515320=>{const _0x9fd8f4=_0x3e0d28;!_0x393a81[_0x515320[_0x9fd8f4(0x1da)]]?_0x393a81[_0x515320['coin']]=_0x515320[_0x9fd8f4(0x13e)]:(_0x16bffa=_0x393a81[_0x515320[_0x9fd8f4(0x1da)]],_0x393a81[_0x515320[_0x9fd8f4(0x1da)]]+=_0x515320[_0x9fd8f4(0x13e)]);const _0x3c510d=_0x5c86f6[_0x9fd8f4(0x131)][_0x9fd8f4(0x1cf)](_0x270e5b=>_0x270e5b[_0x9fd8f4(0x1da)]==_0x515320[_0x9fd8f4(0x1da)]);(!_0x3c510d||_0x3c510d[_0x9fd8f4(0x13e)]==0x0)&&(_0x5717ab+=(-_0x515320[_0x9fd8f4(0x13e)]-_0x16bffa)*_0x515320[_0x9fd8f4(0x135)]);}),_0x174233++;}}_0x5c86f6[_0x3e0d28(0x131)][_0x3e0d28(0x1b8)]((_0x5bd589,_0x5ce98e)=>{const _0x1624be=_0x3e0d28;_0x393a81[_0x5bd589[_0x1624be(0x1da)]]&&(_0x5bd589[_0x1624be(0x125)]=_0x393a81[_0x5bd589[_0x1624be(0x1da)]]);}),_0x1ea79c[_0x3e0d28(0x118)]({'date':_0x5c86f6[_0x3e0d28(0xa7)],'eur':_0x5c86f6[_0x3e0d28(0x7d)],'usd':_0x5c86f6[_0x3e0d28(0x153)],'offset':_0x27d1f6[_0x43b7d1],'netoffset':_0x5717ab,'coins':_0x5c86f6[_0x3e0d28(0x131)]});});}return _0x1ea79c;}function emitPerformance(_0x32ab89){const _0x20c785=_0x249b4e;_0x32ab89[_0x20c785(0x14d)]!==0x0?(proxyEmit(_0x20c785(0x1f4),_0x32ab89),lastPerformanceEmitted=getDate()):proxyEmit(_0x20c785(0x1f4),[]);}function getPerf(_0x53bac0,_0x421d59){const _0x507793=_0x249b4e;let _0x1e681c=0x0,_0x2aafcb=0x0,_0x544748=0x0;_0x53bac0[_0x507793(0x131)][_0x507793(0x1b8)](_0x4acea3=>{const _0x38cd4e=_0x507793;_0x1e681c+=_0x4acea3[_0x38cd4e(0x13e)]*_0x4acea3[_0x38cd4e(0x135)];});_0x421d59&&(_0x1e681c+=_0x53bac0['offset']);if(config[_0x507793(0x86)]===_0x507793(0xcf)||config[_0x507793(0x86)]==='ETH'||config['basecoin']==='PAXG')_0x2aafcb=_0x1e681c*_0x53bac0['eur'],_0x544748=_0x1e681c*_0x53bac0[_0x507793(0x153)];else{if(usdBasecoins[_0x507793(0x1d6)](config[_0x507793(0x86)]))_0x2aafcb=_0x1e681c*_0x53bac0[_0x507793(0x7d)]/_0x53bac0[_0x507793(0x153)],_0x544748=_0x1e681c;else config[_0x507793(0x86)]==='EUR'&&(_0x2aafcb=_0x1e681c,_0x544748=_0x1e681c*_0x53bac0[_0x507793(0x153)]/_0x53bac0[_0x507793(0x7d)]);}return[_0x1e681c,_0x2aafcb,_0x544748];}function getKPIs(_0xd482fe,_0x1e16ca=_0x249b4e(0x6f)){const _0x302a52=_0x249b4e,_0x3cdee5=config[_0x302a52(0x86)],_0x14321d=lastBalances,_0x434871=currentCoins,_0x154f59=getNormalizedPerformance(),_0x47e3b7=_0xd482fe===_0x302a52(0x86)?_0x3cdee5:_0xd482fe===_0x302a52(0x1cc)||_0xd482fe===_0x302a52(0x119)?_0x1e16ca:_0x302a52(0x201)+_0x3cdee5,_0x547e69=_0xd482fe===_0x302a52(0x106)?_0x302a52(0x1e6):_0xd482fe===_0x302a52(0x119)?_0x302a52(0x1e6):_0x47e3b7+_0x302a52(0x19f),_0x35dc3b=_0xd482fe===_0x302a52(0x106)||_0xd482fe===_0x302a52(0x119)?_0x302a52(0x1e6):_0x47e3b7+'\x20change';let _0x59ea43=0x0;_0x434871[_0x302a52(0x1b8)](_0x58ace0=>{const _0x5895e0=_0x302a52;_0x59ea43+=_0x58ace0[_0x5895e0(0x13e)]*_0x58ace0['last'];});if(_0xd482fe===_0x302a52(0x1cc)||_0xd482fe===_0x302a52(0x119)){if(_0x3cdee5==='BTC'||_0x3cdee5==='ETH'||_0x3cdee5===_0x302a52(0x73))_0x59ea43=_0x59ea43*(_0x1e16ca==='EUR'?_0x14321d[_0x302a52(0x7d)]:_0x14321d['usd']);else{if(usdBasecoins['includes'](_0x3cdee5))_0x59ea43=_0x59ea43*(_0x1e16ca===_0x302a52(0x6f)?_0x14321d['eur']/_0x14321d['usd']:0x1);else _0x3cdee5===_0x302a52(0x6f)&&(_0x59ea43=_0x59ea43*(_0x1e16ca===_0x302a52(0x6f)?0x1:_0x14321d[_0x302a52(0x153)]/_0x14321d['eur']));}}let _0x17dcc4;if(_0x59ea43!==0x0){if(_0xd482fe==='basecoin')_0x17dcc4=(_0x59ea43/startingBalances[_0x302a52(0x86)]-0x1)*0x64;else{if(_0x1e16ca===_0x302a52(0x6f))_0x17dcc4=(_0x59ea43/startingBalances[_0x302a52(0x7d)]-0x1)*0x64;else _0x17dcc4=(_0x59ea43/startingBalances[_0x302a52(0x153)]-0x1)*0x64;}let _0x5ef3e3=0x0;if(startingBalances[_0x302a52(0x131)])_0x434871[_0x302a52(0x1b8)](_0x15a980=>{const _0x4a9e59=_0x302a52;let _0x50ef56=startingBalances[_0x4a9e59(0x131)]['find'](_0x128802=>_0x128802[_0x4a9e59(0x1da)]===_0x15a980['coin']);if(_0x50ef56&&_0x50ef56['coin']&&_0x15a980[_0x4a9e59(0x13e)]!==0x0)_0x5ef3e3+=_0x50ef56[_0x4a9e59(0x13e)]*_0x15a980[_0x4a9e59(0xb2)];});let _0x2fc347=0x0;if(_0x154f59[_0x302a52(0x14d)]!==0x0){let _0xd30dd6=_0x154f59[_0x154f59[_0x302a52(0x14d)]-0x1];_0x2fc347=_0xd30dd6[_0x302a52(0xd4)];}_0x5ef3e3-=_0x2fc347;_0xd482fe===_0x302a52(0x106)&&(_0x17dcc4=(_0x59ea43-_0x5ef3e3)/startingBalances['basecoin']*0x64,_0x59ea43=_0x59ea43-_0x5ef3e3);if(_0xd482fe===_0x302a52(0x119)){let _0x462690=_0x1e16ca===_0x302a52(0x6f)?startingBalances[_0x302a52(0x7d)]:startingBalances[_0x302a52(0x153)];if(_0x3cdee5===_0x302a52(0xcf)||_0x3cdee5===_0x302a52(0x175)||_0x3cdee5===_0x302a52(0x73))_0x5ef3e3=_0x1e16ca===_0x302a52(0x6f)?_0x5ef3e3*_0x14321d['eur']:_0x5ef3e3*_0x14321d[_0x302a52(0x153)];else{if(usdBasecoins[_0x302a52(0x1d6)](_0x3cdee5))_0x5ef3e3=_0x1e16ca==='EUR'?_0x5ef3e3*_0x14321d['eur']/_0x14321d[_0x302a52(0x153)]:_0x5ef3e3;else _0x3cdee5===_0x302a52(0x6f)&&(_0x5ef3e3=_0x1e16ca===_0x302a52(0x6f)?_0x5ef3e3:_0x5ef3e3*_0x14321d[_0x302a52(0x153)]/_0x14321d[_0x302a52(0x7d)]);}_0x17dcc4=(_0x59ea43-_0x5ef3e3)/_0x462690*0x64,_0x59ea43=_0x59ea43-_0x5ef3e3;}if(_0x17dcc4){if(_0x17dcc4<0x64)_0x17dcc4=_0x17dcc4['toFixed'](0x2);else{if(_0x17dcc4<0x3e8)_0x17dcc4=_0x17dcc4[_0x302a52(0x97)](0x1);else _0x17dcc4=_0x17dcc4[_0x302a52(0x97)](0x0);}}else _0x17dcc4=Number('0')[_0x302a52(0x97)](0x2);if(_0x59ea43){if(Math[_0x302a52(0xfc)](_0x59ea43)<0.000001)_0x59ea43=_0x59ea43[_0x302a52(0x97)](0x2);else{if(Math[_0x302a52(0xfc)](_0x59ea43)<0.1)_0x59ea43=_0x59ea43[_0x302a52(0x97)](0x6);else{if(Math[_0x302a52(0xfc)](_0x59ea43)<0x1)_0x59ea43=_0x59ea43[_0x302a52(0x97)](0x5);else{if(Math[_0x302a52(0xfc)](_0x59ea43)<0xa)_0x59ea43=_0x59ea43['toFixed'](0x4);else{if(Math[_0x302a52(0xfc)](_0x59ea43)<0x64)_0x59ea43=_0x59ea43[_0x302a52(0x97)](0x3);else{if(Math[_0x302a52(0xfc)](_0x59ea43)<0x3e8)_0x59ea43=_0x59ea43[_0x302a52(0x97)](0x2);else _0x59ea43=_0x59ea43[_0x302a52(0x97)](0x2);}}}}}}else _0x59ea43=Number('0')[_0x302a52(0x97)](0x2);}else _0x17dcc4=Number('0')[_0x302a52(0x97)](0x2);return{'value':_0x59ea43,'change':_0x17dcc4,'leftTxt':_0x547e69,'rightTxt':_0x35dc3b};}async function getStartingBalances(_0x5aac1a,_0x4928ed=!![]){const _0x126aba=_0x249b4e;if(_0x5aac1a[_0x126aba(0x14d)]!==0x0){const [_0x5080e3,_0x295b8f,_0x38e2a1]=getPerf(_0x5aac1a[0x0],!![]);let _0x1c89e7=[];config['portfolio'][_0x126aba(0x1b8)](_0x4c82d8=>{const _0x45ed9e=_0x126aba;let _0x7fdae4=0x0,_0x4fb2c0;config[_0x45ed9e(0x214)]['forEach'](_0x16dd5b=>{const _0x4a4471=_0x45ed9e;let _0x46a75d=_0x16dd5b[_0x4a4471(0x20a)][_0x4a4471(0x1cf)](_0x3e748e=>_0x3e748e[_0x4a4471(0x1da)]==_0x4c82d8['coin']);if(_0x46a75d){_0x7fdae4+=_0x46a75d[_0x4a4471(0x13e)];if(!_0x4fb2c0)_0x4fb2c0=_0x46a75d[_0x4a4471(0x135)];}}),_0x1c89e7[_0x45ed9e(0x118)]({'coin':_0x4c82d8['coin'],'number':_0x7fdae4,'initialprice':_0x4fb2c0});});const _0x3d5e36={'basecoin':_0x5080e3,'eur':_0x295b8f,'usd':_0x38e2a1,'coins':_0x1c89e7};if(_0x4928ed)proxyEmit(_0x126aba(0x1dd),_0x3d5e36);startingBalances=_0x3d5e36;}}function headlessMode(_0x494474){const _0x1d2f19=_0x249b4e;let _0x4a2213=_0x494474['portfolio'],_0x11ca74=_0x494474[_0x1d2f19(0x1ff)],_0x369de5=[];for(let _0x21b4fb of _0x4a2213){if(_0x21b4fb[_0x1d2f19(0x1da)]!=config['basecoin']){if(_0x21b4fb['delta']>=_0x11ca74/0x64){if(_0x21b4fb[_0x1d2f19(0x202)])_0x369de5[_0x1d2f19(0x118)](_0x21b4fb);}else{if(_0x21b4fb['delta']<=-_0x11ca74/0x64){if(_0x21b4fb[_0x1d2f19(0x202)])_0x369de5['push'](_0x21b4fb);}}}}_0x369de5[_0x1d2f19(0x14d)]>0x0&&(lockOrders==ORDERS[_0x1d2f19(0x19d)]&&!coolingDown&&_0x369de5[_0x1d2f19(0x1b8)](_0x316d36=>{const _0x1f4923=_0x1d2f19;logger[_0x1f4923(0x9d)]('Trigger:\x20'+_0x316d36[_0x1f4923(0x1da)]+'\x20'+_0x316d36[_0x1f4923(0x13e)]+'\x20'+_0x316d36[_0x1f4923(0xb2)]+'\x20'+_0x316d36[_0x1f4923(0xd8)]+'%\x20'+_0x316d36[_0x1f4923(0x213)]+'%\x20'+(0x64*_0x316d36[_0x1f4923(0xd3)])[_0x1f4923(0x97)](0x2)+_0x1f4923(0x185)+_0x11ca74[_0x1f4923(0x97)](0x2)+'%)');}),placeOrder(_0x369de5));}function notifyBalance(_0x3cf573){const _0x341b25=_0x249b4e;let _0x10d6b2=_0x3cf573[_0x341b25(0x10e)],_0x49f621=_0x3cf573[_0x341b25(0x1ff)],_0x2b9d0a=[];for(let _0x285a76 of _0x10d6b2){if(_0x285a76[_0x341b25(0x1da)]!=config[_0x341b25(0x86)]){if(_0x285a76[_0x341b25(0xd3)]>=_0x49f621/0x64){if(_0x285a76['valid'])_0x2b9d0a['push'](_0x285a76);}else{if(_0x285a76['delta']<=-_0x49f621/0x64){if(_0x285a76['valid'])_0x2b9d0a[_0x341b25(0x118)](_0x285a76);}}}}if(_0x2b9d0a[_0x341b25(0x14d)]>0x0){let _0x4f701e=_0x2b9d0a[_0x341b25(0xcd)](_0x1ac823=>_0x1ac823[_0x341b25(0x1da)]);_0x4f701e['sort']();let _0x231ccc=_0x4f701e['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x341b25(0x1cd),_0x341b25(0x17b));lastCoinsToBalance=_0x231ccc;}}function symbolToCoin(_0x3b08db){const _0x201978=_0x249b4e;let _0x237439;if(_0x3b08db[_0x201978(0x1d6)]('/'+config[_0x201978(0x86)]))_0x237439=_0x3b08db[_0x201978(0x208)]('/'+config[_0x201978(0x86)],'');if(_0x3b08db[_0x201978(0x1d6)](config[_0x201978(0x86)]+'/'))_0x237439=_0x3b08db[_0x201978(0x208)](config[_0x201978(0x86)]+'/','');return _0x237439;}async function unlockOrders(_0x52a582=![]){const _0x29d972=_0x249b4e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x29d972(0x18b)]){logger[_0x29d972(0x9d)]('1\x20-\x20Unlocking\x20orders'),lockOrders=ORDERS[_0x29d972(0x165)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x52a582){const _0x47c232=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x47c232,setBlockTransactionDetection(![]);}validateOrdersState=_0x29d972(0x125),persistOpenOrders([]),lockOrders=ORDERS[_0x29d972(0x19d)],logger[_0x29d972(0x9d)](_0x29d972(0x178));}}async function validateOrders(_0x405a2d){const _0x12c209=_0x249b4e;if(_0x405a2d)validateOrdersState=_0x405a2d;logger[_0x12c209(0x9d)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x12c209(0x1ab)+(lockOrders==0x1?_0x12c209(0xae):lockOrders==0x2?_0x12c209(0x132):'ORDERS.UNLOCKED'));let _0x3441c4=[],_0x5420da=config[_0x12c209(0x122)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x12c209(0x20f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x12c209(0x18b)])return;logger[_0x12c209(0x9d)](_0x12c209(0x1b0)+validateOrdersState),lastOrders[_0x12c209(0x1b8)](_0x26e94f=>{const _0xbbf027=_0x12c209;let _0xf78c24=![];_0x26e94f[_0xbbf027(0xac)]>0x0&&(_0xf78c24=!![]),_0x3441c4[_0xbbf027(0x118)](_0xf78c24),_0xf78c24&&config[_0xbbf027(0x122)]!='market'&&logHistory(_0xbbf027(0x91),'Order\x20filled:\x20'+_0x26e94f['symbol']+'\x20'+_0x26e94f[_0xbbf027(0x1ed)]+'\x20#'+formatResult(_0x26e94f[_0xbbf027(0xac)],0x8)+'\x20@'+formatResult(_0x26e94f[_0xbbf027(0x135)],0x8));}),_0x3441c4[_0x12c209(0x1b8)]((_0x4bd5d6,_0x19f34f)=>{const _0x10b9be=_0x12c209;if(_0x4bd5d6)lastOrders[_0x10b9be(0x137)](_0x19f34f,0x1);}),persistOpenOrders(lastOrders);const _0x33443b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x12c209(0x15e);if(validateOrdersState==_0x12c209(0x125)){validateOrdersState=_0x12c209(0x90);if(_0x3441c4[_0x12c209(0x1d6)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x12c209(0x90)){if(_0x3441c4[_0x12c209(0x1d6)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x12c209(0xcc))_0x3441c4[_0x12c209(0x1d6)](![])&&(config[_0x12c209(0x122)]=='market'?logHistory(_0x12c209(0xb0),_0x12c209(0x10a)+Math[_0x12c209(0x102)](_0x5420da*validateOrderInterval/0xea60)+_0x12c209(0x1d3)+_0x33443b):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x12c209(0x102)](_0x5420da*validateOrderInterval/0xea60)+_0x12c209(0x1d3)+_0x33443b))),await unlockOrders(!![]);else{if(validateOrdersState==_0x12c209(0xec)){if(config[_0x12c209(0x122)]!='market')logHistory(_0x12c209(0xb0),'No\x20more\x20open\x20orders\x20-\x20'+_0x33443b);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0xb80239=>{const _0x14f661=_0xa1fc;try{const _0x34c9d5=await exchange[_0x14f661(0x10f)](_0xb80239[_0x14f661(0xe5)],_0xb80239[_0x14f661(0x205)]);}catch(_0x350284){if(_0x350284['toString']()[_0x14f661(0x1d6)](_0x14f661(0x85))){}else await handleError(_0x350284,_0x14f661(0xeb));}});}async function initCoinResults(_0x1a7e9d){const _0x36d570=_0x249b4e;_0x1a7e9d?logger[_0x36d570(0x9d)]('Resetting\x20coin\x20results:\x20'+_0x1a7e9d):logger['debug'](_0x36d570(0x1e7)),config[_0x36d570(0x10e)][_0x36d570(0x1b8)](_0xfa1bbb=>{const _0x170740=_0x36d570;if(!_0xfa1bbb[_0x170740(0x181)]&&_0xfa1bbb[_0x170740(0x1da)]!=config[_0x170740(0x86)]){const _0x216883=currentCoins[_0x170740(0x1cf)](_0x4d89f7=>_0x4d89f7[_0x170740(0x1da)]==_0xfa1bbb['coin']),_0x3af92c=gTicker[noslash(_0xfa1bbb[_0x170740(0x205)])];let _0xc33eb5=_0x216883?_0x216883['number']:null,_0x4d2fe2=_0xfa1bbb[_0x170740(0xce)]?0x1/_0x3af92c:_0x3af92c,_0x20e42a;config[_0x170740(0x214)]['forEach'](_0x235e24=>{const _0x6e003e=_0x170740;!_0x20e42a&&(_0x20e42a=_0x235e24['changes']['find'](_0x26eb65=>_0x26eb65[_0x6e003e(0x1da)]==_0xfa1bbb[_0x6e003e(0x1da)]),_0x20e42a&&(_0xc33eb5=_0x20e42a[_0x6e003e(0x13e)],_0x4d2fe2=_0x20e42a[_0x6e003e(0x135)]));});let _0x2624a9=dbCoinResults[_0x170740(0x206)](_0x170740(0x131))[_0x170740(0x1cf)]({'coin':_0xfa1bbb[_0x170740(0x1da)]})[_0x170740(0xb4)]();if(!_0x2624a9){const _0x1edb3d={'coin':_0xfa1bbb[_0x170740(0x1da)],'number':_0xc33eb5,'breakeven':_0x4d2fe2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x170740(0x206)](_0x170740(0x131))['push'](_0x1edb3d)['write']();}else{if(_0x1a7e9d&&_0xfa1bbb[_0x170740(0x1da)]==_0x1a7e9d){const _0x3e0a54={'coin':_0xfa1bbb[_0x170740(0x1da)],'number':_0xc33eb5,'breakeven':_0x4d2fe2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x170740(0x206)](_0x170740(0x131))['find']({'coin':_0xfa1bbb[_0x170740(0x1da)]})[_0x170740(0xee)](_0x3e0a54)['write']();}}}});}async function updateCoinResults(_0x16a463,_0x183fc4=![]){const _0x155f8b=_0x249b4e;let _0x28df33,_0x2c4b9d,_0x377fc6,_0x45edb5,_0x118e73,_0x5a7012,_0x15d26b=dbCoinResults[_0x155f8b(0x206)](_0x155f8b(0x131))['find']({'coin':_0x16a463[_0x155f8b(0x1da)]})[_0x155f8b(0xb4)](),_0x6dccb5=![];_0x15d26b&&Object[_0x155f8b(0x196)](_0x15d26b)[_0x155f8b(0x1b8)](([_0x387197,_0x3cc7cc])=>{if(_0x3cc7cc==null)_0x6dccb5=!![];});(!_0x15d26b||_0x6dccb5)&&(await initCoinResults(_0x16a463[_0x155f8b(0x1da)]),_0x15d26b=dbCoinResults[_0x155f8b(0x206)](_0x155f8b(0x131))[_0x155f8b(0x1cf)]({'coin':_0x16a463[_0x155f8b(0x1da)]})[_0x155f8b(0xb4)]());_0x16a463['reverse']&&(_0x5a7012={'filled':_0x16a463['filled']*_0x16a463[_0x155f8b(0x135)],'amount':_0x16a463['filled']*_0x16a463[_0x155f8b(0x135)],'side':_0x16a463[_0x155f8b(0x1ed)]==_0x155f8b(0x110)?_0x155f8b(0x17e):_0x155f8b(0x110),'price':0x1/_0x16a463[_0x155f8b(0x135)]},_0x16a463={..._0x16a463,..._0x5a7012});_0x183fc4?_0x2c4b9d=_0x16a463[_0x155f8b(0x1ed)]==_0x155f8b(0x17e)?_0x15d26b[_0x155f8b(0x13e)]+_0x16a463[_0x155f8b(0xac)]:_0x15d26b[_0x155f8b(0x13e)]-_0x16a463['filled']:_0x2c4b9d=await getCoinNumber(_0x16a463[_0x155f8b(0x1da)]);if(_0x16a463[_0x155f8b(0x17d)]&&_0x16a463[_0x155f8b(0x17d)][_0x155f8b(0x222)]==config[_0x155f8b(0x86)])_0x28df33=Number(_0x16a463[_0x155f8b(0x17d)]['cost']);else{if(_0x16a463[_0x155f8b(0x17d)]&&_0x16a463['fee'][_0x155f8b(0x222)]==_0x155f8b(0x7e)&&!_0x183fc4&&config[_0x155f8b(0x86)]!='PAXG')_0x28df33=Number(_0x16a463[_0x155f8b(0x17d)][_0x155f8b(0x75)])*gTicker[_0x155f8b(0x7e)+config['basecoin']];else _0x28df33=defaultFee*_0x16a463[_0x155f8b(0xac)]*_0x16a463[_0x155f8b(0x135)];}_0x16a463[_0x155f8b(0x1ed)]==_0x155f8b(0x17e)?(_0x377fc6=_0x2c4b9d!=0x0?(_0x15d26b[_0x155f8b(0x7c)]*_0x15d26b[_0x155f8b(0x13e)]+_0x16a463[_0x155f8b(0x135)]*(_0x2c4b9d-_0x15d26b[_0x155f8b(0x13e)])+_0x28df33)/_0x2c4b9d:0x0,_0x45edb5=_0x15d26b['realized']):(_0x377fc6=_0x2c4b9d!=0x0?(_0x15d26b[_0x155f8b(0x7c)]*_0x15d26b['number']-_0x16a463[_0x155f8b(0x135)]*(_0x15d26b[_0x155f8b(0x13e)]-_0x2c4b9d)+_0x28df33)/_0x2c4b9d:0x0,_0x45edb5=_0x15d26b[_0x155f8b(0x1e0)]+(_0x16a463[_0x155f8b(0x135)]-_0x15d26b['breakeven'])*_0x16a463[_0x155f8b(0xac)]);_0x118e73=(_0x16a463[_0x155f8b(0x135)]-_0x377fc6-_0x28df33/_0x16a463[_0x155f8b(0xac)])*_0x2c4b9d;let _0x576934={'coin':_0x16a463[_0x155f8b(0x1da)],'number':_0x2c4b9d,'breakeven':formatResult(_0x377fc6,0x8),'realized':formatResult(_0x45edb5,0x8),'unrealized':formatResult(_0x118e73,0x8),'fees':formatResult(_0x15d26b[_0x155f8b(0xbe)]+_0x28df33,0x8),'sells':_0x16a463['side']==_0x155f8b(0x110)?_0x15d26b[_0x155f8b(0xb9)]+0x1:_0x15d26b[_0x155f8b(0xb9)],'buys':_0x16a463['side']==_0x155f8b(0x17e)?_0x15d26b[_0x155f8b(0x171)]+0x1:_0x15d26b[_0x155f8b(0x171)]};dbCoinResults['get'](_0x155f8b(0x131))[_0x155f8b(0x1cf)]({'coin':_0x16a463['coin']})[_0x155f8b(0xee)](_0x576934)[_0x155f8b(0x1d5)]();if(!_0x183fc4){if(_0x16a463[_0x155f8b(0x17d)]&&_0x16a463[_0x155f8b(0x17d)]['currency']==_0x155f8b(0x7e)){const _0x30ebc5=currentCoins['find'](_0x17c5d5=>_0x17c5d5['coin']==_0x155f8b(0x7e));if(_0x30ebc5){let _0x4f95e1=dbCoinResults[_0x155f8b(0x206)](_0x155f8b(0x131))[_0x155f8b(0x1cf)]({'coin':_0x155f8b(0x7e)})[_0x155f8b(0xb4)]();_0x576934={..._0x4f95e1,'number':_0x30ebc5[_0x155f8b(0x13e)]},dbCoinResults[_0x155f8b(0x206)](_0x155f8b(0x131))['find']({'coin':_0x155f8b(0x7e)})['assign'](_0x576934)[_0x155f8b(0x1d5)]();}}}}async function placeOrder(_0x2b2949){const _0x2ecb98=_0x249b4e,_0x19e84d=config[_0x2ecb98(0x122)]=='market'?_0x2ecb98(0x1a6):_0x2ecb98(0xa1);if(lockOrders==ORDERS[_0x2ecb98(0x19d)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2ecb98(0x125);let _0x349071=![];lastOrders=[];for(const _0x20baae of _0x2b2949){let _0x4e0326,_0x51d8ae,_0x1ec46c,_0x67964a,_0x2b31ed,_0x2258b9=_0x20baae[_0x2ecb98(0x205)];try{const _0x124882=await exchange['fetchTicker'](_0x2258b9);_0x4e0326=_0x20baae['reverse']?0x1/_0x20baae[_0x2ecb98(0xb2)]:_0x20baae[_0x2ecb98(0xb2)],_0x51d8ae=_0x124882[_0x2ecb98(0x203)],_0x1ec46c=_0x124882['ask'];_0x20baae[_0x2ecb98(0xce)]?(_0x67964a=_0x20baae[_0x2ecb98(0x1ed)]==_0x2ecb98(0x17e)?_0x2ecb98(0x110):_0x2ecb98(0x17e),_0x2b31ed=Math['abs'](_0x20baae[_0x2ecb98(0x11c)])/_0x4e0326):(_0x67964a=_0x20baae[_0x2ecb98(0x1ed)],_0x2b31ed=Math[_0x2ecb98(0xfc)](_0x20baae[_0x2ecb98(0x11c)]));_0x19e84d==_0x2ecb98(0xa1)&&(config[_0x2ecb98(0x122)]=='limit-high'&&(_0x4e0326=_0x67964a=='buy'?_0x51d8ae:_0x1ec46c),config[_0x2ecb98(0x122)]=='limit-low'&&(_0x4e0326=_0x67964a==_0x2ecb98(0x17e)?_0x1ec46c:_0x51d8ae));_0x2b31ed=formatResult(_0x2b31ed,0x8),_0x4e0326=formatResult(_0x4e0326,0x8);const _0x2ef3f8=_0x67964a==_0x2ecb98(0x110)?config[_0x2ecb98(0xe2)]?String[_0x2ecb98(0x1eb)]('0x'+config[_0x2ecb98(0xe2)])+'\x20':'':config['emojibuy']?String[_0x2ecb98(0x1eb)]('0x'+config[_0x2ecb98(0x103)])+'\x20':'',_0x4397ef=_0x19e84d==_0x2ecb98(0x1a6)?'Market':config[_0x2ecb98(0x122)]==_0x2ecb98(0x1c3)?_0x2ecb98(0xe8):_0x2ecb98(0x8b),_0x11f111=(Math[_0x2ecb98(0x1f3)](Math[_0x2ecb98(0xa3)]()*0x35a4e900)+0x5f5e100)[_0x2ecb98(0x7a)]();lastOrders[_0x2ecb98(0x118)]({'customId':_0x11f111,'symbol':_0x2258b9,'coin':_0x20baae[_0x2ecb98(0x1da)],'amount':_0x2b31ed,'price':_0x4e0326,'side':_0x67964a,'reverse':_0x20baae[_0x2ecb98(0xce)],'filled':0x0});if(_0x19e84d==_0x2ecb98(0x1a6))logHistory(_0x2ecb98(0x91),''+_0x2ef3f8+_0x4397ef+'\x20order:\x20'+_0x2258b9+'\x20'+_0x67964a+'\x20#'+formatResult(_0x2b31ed,0x8)+'\x20@'+formatResult(_0x4e0326,0x8));else logHistory(_0x2ecb98(0x91),''+_0x2ef3f8+_0x4397ef+_0x2ecb98(0x1ee)+_0x2258b9+'\x20'+_0x67964a+'\x20#'+formatResult(_0x2b31ed,0x8)+'\x20@'+formatResult(_0x4e0326,0x8));let _0x328913;_0x19e84d==_0x2ecb98(0x1a6)?_0x67964a=='buy'&&[_0x2ecb98(0x18d),_0x2ecb98(0xba),'Cex','Huobi',_0x2ecb98(0xaf)][_0x2ecb98(0x1d6)](config[_0x2ecb98(0xd1)])?_0x328913=await exchange[_0x2ecb98(0xa5)](_0x2258b9,_0x19e84d,_0x67964a,_0x2b31ed,_0x4e0326):_0x328913=await exchange[_0x2ecb98(0xa5)](_0x2258b9,_0x19e84d,_0x67964a,_0x2b31ed,undefined):_0x328913=await exchange[_0x2ecb98(0xa5)](_0x2258b9,_0x19e84d,_0x67964a,_0x2b31ed,_0x4e0326);logger[_0x2ecb98(0x9d)](_0x2ecb98(0x111)+_0x328913['id']+_0x2ecb98(0x1d1)+_0x11f111);const _0x2f016f=lastOrders[_0x2ecb98(0x14d)]-0x1;if(_0x2f016f>=0x0&&lastOrders[_0x2f016f]['customId']==_0x11f111){lastOrders[_0x2f016f][_0x2ecb98(0xe5)]=_0x328913['id'];if(_0x328913[_0x2ecb98(0x20b)])lastOrders[_0x2f016f]['amount']=_0x328913['amount'];if(_0x328913[_0x2ecb98(0x135)])lastOrders[_0x2f016f][_0x2ecb98(0x135)]=_0x328913['price'];lastOrders[_0x2f016f]['fee']=_0x328913[_0x2ecb98(0x17d)];}if(config[_0x2ecb98(0x79)]!=0x0){let _0x58c25d=null;if(cooldownTracker[_0x2ecb98(0x14d)]==config['cooldown']-0x1)_0x58c25d=cooldownTracker[_0x2ecb98(0x92)]();const _0x21d4f6=getTimeStamp();cooldownTracker[_0x2ecb98(0x118)](_0x21d4f6);if(_0x58c25d){const _0x79cf18=fns[_0x2ecb98(0x12d)](new Date(_0x21d4f6),new Date(_0x58c25d));if(_0x79cf18<cooldownInterval){logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0x197)+config[_0x2ecb98(0x79)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x2ecb98(0x1b7)+cooldownPeriod/(0xe10*0x3e8)+_0x2ecb98(0x13a)),coolingDown=!![];break;}}}}catch(_0x30192b){if(_0x30192b['toString']()[_0x2ecb98(0x1d6)](_0x2ecb98(0x177)))lastOrders=lastOrders[_0x2ecb98(0x15a)](_0x1d8a2d=>_0x1d8a2d['symbol']!=_0x2258b9),logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0xc7)+_0x2258b9),_0x349071=!![];else{if(_0x30192b[_0x2ecb98(0x7a)]()[_0x2ecb98(0x1d6)](_0x2ecb98(0xc5)))lastOrders=lastOrders[_0x2ecb98(0x15a)](_0x4dd86a=>_0x4dd86a[_0x2ecb98(0x205)]!=_0x2258b9),logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0x157)+_0x2258b9),_0x349071=!![];else{if(_0x30192b[_0x2ecb98(0x7a)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x2ecb98(0x15a)](_0x354428=>_0x354428[_0x2ecb98(0x205)]!=_0x2258b9),logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0x13f)+_0x2258b9),logger[_0x2ecb98(0x9d)](_0x30192b),_0x349071=!![];else _0x30192b['toString']()[_0x2ecb98(0x1d6)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x2ecb98(0x15a)](_0x48a533=>_0x48a533[_0x2ecb98(0x205)]!=_0x2258b9),logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0xc7)+_0x2258b9),_0x349071=!![]):(lastOrders=lastOrders[_0x2ecb98(0x15a)](_0xf71d1c=>_0xf71d1c[_0x2ecb98(0x205)]!=_0x2258b9),await handleError(_0x30192b,_0x2ecb98(0xf8),_0x2258b9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2ecb98(0x14d)]>0x0){const _0x322220=config[_0x2ecb98(0x122)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2ecb98(0x20f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x27dda3=_0x2ecb98;validateOrders(_0x27dda3(0xcc));},_0x322220);}else unlockOrders();_0x349071&&config[_0x2ecb98(0x20e)]&&(logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0x219)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2ecb98(0xb0),_0x2ecb98(0x1fb)));}else{if(coolingDown)!config[_0x2ecb98(0x20e)]&&logHistory(_0x2ecb98(0x1e9),_0x2ecb98(0xf7));else lockOrders!=ORDERS[_0x2ecb98(0x19d)]&&(!config[_0x2ecb98(0x20e)]&&(config['ordertype']=='market'?logHistory('error',_0x2ecb98(0xd5)):logHistory('error',_0x2ecb98(0xef))));}}function persistOpenOrders(_0x2de2e2){const _0x2a054c=_0x249b4e,_0x1cf72b={...config,'openOrders':_0x2de2e2};let _0xc1f88b=dbConfig[_0x2a054c(0x206)](_0x2a054c(0xd7))[_0x2a054c(0x1cf)]({'botID':botID})['value']();_0xc1f88b&&dbConfig[_0x2a054c(0x206)]('bot')['find']({'botID':botID})['assign'](_0x1cf72b)['write']();}function restoreOrders(){const _0x18ddc0=_0x249b4e;let _0x8c376f;config[_0x18ddc0(0x120)]&&allOpenOrders[_0x18ddc0(0x1b8)](_0x1af1a4=>{const _0x1437c2=_0x18ddc0,_0x4c20a2=config[_0x1437c2(0x120)][_0x1437c2(0x1cf)](_0x4cc30b=>_0x4cc30b['orderId']==_0x1af1a4['id']);_0x4c20a2&&(lastOrders[_0x1437c2(0x118)](_0x4c20a2),_0x8c376f=_0x1af1a4[_0x1437c2(0xa8)]);});if(lastOrders[_0x18ddc0(0x14d)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x32fbc4=new Date()[_0x18ddc0(0x84)](),_0x13216b=config[_0x18ddc0(0x122)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x18ddc0(0x20f)]*0x3c*0x3e8;if(_0x8c376f+_0x13216b>_0x32fbc4){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1b3486=_0x18ddc0;validateOrders(_0x1b3486(0xcc));},_0x8c376f+_0x13216b-_0x32fbc4);}else validateOrders(_0x18ddc0(0xcc));}}async function sendMetricsTelegram(){const _0x8a4357=_0x249b4e;if(!coinsLoaded){process[_0x8a4357(0x1fc)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x58137f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5b5381='';if(config[_0x8a4357(0x190)])_0x5b5381='<b>'+config[_0x8a4357(0x1aa)]+_0x8a4357(0xf0);else _0x5b5381='<b>Bot\x20'+botID+_0x8a4357(0xf0);const _0x265bb3=getKPIs('basecoin'),_0x302a40=getKPIs(_0x8a4357(0x1cc),config[_0x8a4357(0x1cc)]),_0x265865=getKPIs(_0x8a4357(0x106)),_0x53282a=getKPIs('net-fiat',config[_0x8a4357(0x1cc)]);_0x5b5381+=_0x8a4357(0x16d),_0x5b5381+=_0x265bb3[_0x8a4357(0x1be)]+_0x8a4357(0x21a)+_0x265bb3['value']+'\x0a',_0x5b5381+=_0x265bb3[_0x8a4357(0x215)]+':\x20'+_0x265bb3['change']+'%\x0a',_0x5b5381+=_0x302a40[_0x8a4357(0x1be)]+_0x8a4357(0x21a)+_0x302a40[_0x8a4357(0xb4)]+'\x0a',_0x5b5381+=_0x302a40[_0x8a4357(0x215)]+':\x20'+_0x302a40[_0x8a4357(0x83)]+'%\x0a',_0x5b5381+=_0x265865['leftTxt']+':\x20'+_0x265865[_0x8a4357(0xb4)]+'\x20('+config[_0x8a4357(0x86)]+')\x0a',_0x5b5381+=_0x265865[_0x8a4357(0x215)]+':\x20'+_0x265865[_0x8a4357(0x83)]+_0x8a4357(0x185)+config['basecoin']+')\x0a',_0x5b5381+=_0x53282a[_0x8a4357(0x1be)]+':\x20'+_0x53282a['value']+'\x20('+config[_0x8a4357(0x1cc)]+')\x0a',_0x5b5381+=_0x53282a[_0x8a4357(0x215)]+':\x20'+_0x53282a[_0x8a4357(0x83)]+_0x8a4357(0x185)+config[_0x8a4357(0x1cc)]+')\x0a',_0x5b5381+=_0x8a4357(0x147),process[_0x8a4357(0x1fc)]({'telegrammsg':_0x5b5381},_0x37c610=>{});}async function sendPortfolioTelegram(){const _0x42fedb=_0x249b4e;if(!coinsLoaded||!currentCoins[0x0][_0x42fedb(0xd8)]){process[_0x42fedb(0x1fc)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x39e67f=>{});return;}let _0x5aa850='';if(config[_0x42fedb(0x190)])_0x5aa850=_0x42fedb(0x225)+config['botname']+_0x42fedb(0x159);else _0x5aa850='<b>Bot\x20'+botID+_0x42fedb(0x159);_0x5aa850+=_0x42fedb(0x16d),_0x5aa850+=_0x42fedb(0x199),_0x5aa850+=_0x42fedb(0x15b),_0x5aa850+=_0x42fedb(0x199),currentCoins[_0x42fedb(0x1b8)](_0x46f3a9=>{const _0x3f7b2c=_0x42fedb;_0x5aa850+=_0x46f3a9[_0x3f7b2c(0x1da)][_0x3f7b2c(0x96)](0x7)+'|\x20'+formatPad(_0x46f3a9[_0x3f7b2c(0xd8)],0x2,0x6)+'|\x20'+formatPad(_0x46f3a9[_0x3f7b2c(0x213)],0x2,0x6)+'|\x20'+formatPad(_0x46f3a9[_0x3f7b2c(0xd3)]*0x64,0x2,0x6)+'\x0a';}),_0x5aa850+=_0x42fedb(0x147),process[_0x42fedb(0x1fc)]({'telegrammsg':_0x5aa850},_0xe41b77=>{});}function formatPad(_0x49272a,_0x5030ae,_0x2e3893){const _0x7eebd9=_0x249b4e,_0x2b5464=formatResultString(_0x49272a,_0x5030ae);return _0x2b5464?_0x2b5464['padStart'](_0x2e3893):''[_0x7eebd9(0x146)](_0x2e3893);}function logHistory(_0x11129f,_0x1490dc,_0x44a288=''){const _0x39a320=_0x249b4e;logger[_0x39a320(0x112)](''+_0x1490dc);let _0xc18a3={'time':getTimeStamp(),'type':_0x11129f,'event':_0x1490dc};dbLogs[_0x39a320(0x206)](_0x39a320(0x81))[_0x39a320(0x118)](_0xc18a3)[_0x39a320(0x1d5)]();if(_0x44a288=='')_0x44a288=_0x1490dc;proxyEmit(_0x39a320(0xb5),{'log':_0xc18a3,'summary':_0x44a288}),process[_0x39a320(0x1fc)]({'telegram':{..._0xc18a3,'botname':config[_0x39a320(0x1aa)],'showname':config['showname']}},_0x5cc29b=>{});}function emitHistory(_0xbd0dfd={}){const _0xfcad1f=_0x249b4e;Object['keys'](_0xbd0dfd)[_0xfcad1f(0x14d)]==0x0&&(_0xbd0dfd={'type':['order','event'],'event':'','page':0x1});if(_0xbd0dfd['type'][_0xfcad1f(0x1d6)](_0xfcad1f(0xb5)))_0xbd0dfd[_0xfcad1f(0x10b)][_0xfcad1f(0x137)](_0xbd0dfd[_0xfcad1f(0x10b)][_0xfcad1f(0x188)](_0xfcad1f(0xb5)),0x1,_0xfcad1f(0x1e9),_0xfcad1f(0x1cd),_0xfcad1f(0xb0));if(dbLogs['has'](_0xfcad1f(0x81))[_0xfcad1f(0xb4)]()){let _0x28e22e=dbLogs[_0xfcad1f(0x206)]('logs')[_0xfcad1f(0x15a)](_0x18161c=>{const _0x42e3b9=_0xfcad1f;if(_0xbd0dfd[_0x42e3b9(0x10b)]['length']==0x0)return![];else return _0xbd0dfd[_0x42e3b9(0x10b)][_0x42e3b9(0x1d6)](_0x18161c['type']);})['filter'](_0x4dab72=>{const _0x1a62be=_0xfcad1f;if(_0xbd0dfd['event']=='')return!![];else return _0x4dab72[_0x1a62be(0xb5)]['toLowerCase']()['includes'](_0xbd0dfd[_0x1a62be(0xb5)][_0x1a62be(0xbf)]());})['sortBy'](_0xfcad1f(0x148)),_0x249001=_0x28e22e[_0xfcad1f(0xb4)]()[_0xfcad1f(0x14d)];_0x28e22e=_0x28e22e[_0xfcad1f(0xce)]()[_0xfcad1f(0x11f)]((_0xbd0dfd[_0xfcad1f(0x7f)]-0x1)*logPageSize,_0xbd0dfd[_0xfcad1f(0x7f)]*logPageSize-0x1)['reverse']()[_0xfcad1f(0xb4)](),proxyEmit(_0xfcad1f(0x19b),{'logs':_0x28e22e,'total':_0x249001});}else proxyEmit(_0xfcad1f(0x19b),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x378df3){const _0x528ace=_0x249b4e;if(dbLogs[_0x528ace(0x76)](_0x528ace(0x81))['value']()){const _0x47c886=dbLogs[_0x528ace(0x206)](_0x528ace(0x81))[_0x528ace(0x1ac)](_0x528ace(0x148))[_0x528ace(0x15a)](_0x473144=>{return _0x473144['type']=='order';})[_0x528ace(0xb4)]();dbLogs[_0x528ace(0x206)]('logs')[_0x528ace(0xc9)]()[_0x528ace(0x1d5)](),dbLogs['get']('logs')[_0x528ace(0xee)](_0x47c886)[_0x528ace(0x1d5)](),emitHistory(_0x378df3);}}async function pauseBot(_0x45f0fc=pauseBotIntervalShort,_0x56346a,_0x486bf5,_0x3aebdc=![]){const _0x331185=_0x249b4e,_0x5cc53a=new Date()[_0x331185(0x84)]();if(!lastErrorShown||_0x5cc53a-lastErrorShown>=_0x45f0fc){lastErrorShown=_0x5cc53a;if(!lastBotPause)lastBotPause=_0x5cc53a,consecutivePauses=0x1;else{if(_0x5cc53a-lastBotPause-_0x45f0fc<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3aebdc){logHistory(_0x331185(0x1e9),_0x56346a+_0x331185(0x1f6)),await killBot();return;}else logHistory(_0x331185(0x1e9),_0x56346a+pauseBotMsg),_0x45f0fc=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5cc53a;}_0x486bf5?logger[_0x331185(0x9d)]('('+consecutivePauses+')\x20'+_0x56346a+_0x331185(0xbd),_0x486bf5):logger['debug']('('+consecutivePauses+')\x20'+_0x56346a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x45f0fc),botPaused=![],_0x45f0fc==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4f8365=_0x249b4e;botPaused=!![],await sleep(0x3e8),process[_0x4f8365(0x1fc)]({'stop':_0x4f8365(0x195)},_0x14a7fd=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x190c8b,_0x2a9ad0){const _0x592d29=_0x249b4e;if(botPaused)return;const _0x73cd60=config['exchange']||_0x592d29(0x109);if(_0x2a9ad0)logger[_0x592d29(0x9d)]('Exception\x20thrown\x20in\x20'+_0x2a9ad0);const _0x248e2f=()=>{const _0x2a180b=_0x592d29;loading[_0x2a180b(0x1e9)]=!![],emitLoadingProgress();};if(_0x190c8b[_0x592d29(0x7a)]()['includes'](_0x592d29(0xb8)))logHistory(_0x592d29(0x1e9),_0x73cd60+_0x592d29(0xa6)),_0x248e2f();else{if(_0x190c8b[_0x592d29(0x7a)]()[_0x592d29(0x1d6)](_0x592d29(0xa4)))logHistory(_0x592d29(0x1e9),_0x73cd60+_0x592d29(0x21e)),_0x248e2f();else _0x190c8b[_0x592d29(0x7a)]()['includes'](_0x592d29(0x9e))?(logHistory('error',_0x73cd60+_0x592d29(0xdb)),logHistory(_0x592d29(0x1e9),_0x592d29(0x1c1)),_0x248e2f()):await handleError(_0x190c8b,null);}}async function handleError(_0xb2fc95,_0x43c8a2,_0x124f16=''){const _0x1442ae=_0x249b4e;if(botPaused)return;let _0x2fbaee;const _0xc740f2=config['exchange']||'Exchange';if(_0x43c8a2)logger[_0x1442ae(0x9d)](_0x1442ae(0x124)+_0x43c8a2);if(_0xb2fc95[_0x1442ae(0x7a)]()['includes']('DDoSProtection'))_0x2fbaee=_0xc740f2+_0x1442ae(0x12a),await pauseBot(undefined,_0x2fbaee,_0xb2fc95);else{if(_0xb2fc95['toString']()['includes'](_0x1442ae(0x1b1)))_0x2fbaee=_0xc740f2+_0x1442ae(0x18e),await pauseBot(undefined,_0x2fbaee,_0xb2fc95);else{if(_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)]('ExchangeNotAvailable')||_0xb2fc95[_0x1442ae(0x7a)]()['includes'](_0x1442ae(0xf5)))_0x2fbaee=_0xc740f2+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x2fbaee,_0xb2fc95[_0x1442ae(0x7a)]());else{if(_0xb2fc95['toString']()[_0x1442ae(0x1d6)](_0x1442ae(0xf3)))_0x2fbaee=_0xc740f2+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x2fbaee,_0xb2fc95[_0x1442ae(0x7a)]());else{if(_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x2fbaee=_0xc740f2+_0x1442ae(0x140),await pauseBot(undefined,_0x2fbaee,_0xb2fc95[_0x1442ae(0x7a)]());else{if(_0xb2fc95['toString']()[_0x1442ae(0xbf)]()[_0x1442ae(0x1d6)]('timestamp')||_0xb2fc95['toString']()[_0x1442ae(0xbf)]()[_0x1442ae(0x1d6)]('request-time'))_0x2fbaee='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x2fbaee,_0xb2fc95['toString']());else{if(_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)](_0x1442ae(0x149)))_0x2fbaee=_0xc740f2+_0x1442ae(0x133),await pauseBot(undefined,_0x2fbaee,_0xb2fc95[_0x1442ae(0x7a)]());else{if(_0xb2fc95 instanceof ccxt[_0x1442ae(0x1b9)])_0x2fbaee=_0xc740f2+_0x1442ae(0x1e2)+_0xb2fc95[_0x1442ae(0x7a)](),logger[_0x1442ae(0x9d)](_0x1442ae(0x9a),_0xb2fc95),await pauseBot(undefined,_0x2fbaee,_0xb2fc95);else{if(_0xb2fc95['toString']()['includes']('API-key\x20format\x20invalid'))logHistory(_0x1442ae(0x1e9),_0xc740f2+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1442ae(0x1e9),_0x1442ae(0xea)),await killBot();else{if(_0xb2fc95[_0x1442ae(0x7a)]()['includes'](_0x1442ae(0xa4)))logHistory(_0x1442ae(0x1e9),_0xc740f2+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x1442ae(0xea)),await killBot();else{if(_0xb2fc95['toString']()[_0x1442ae(0x1d6)](_0x1442ae(0x9e))&&_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)](_0x1442ae(0x72)))_0x2fbaee=_0xc740f2+_0x1442ae(0x129),await pauseBot(undefined,_0x2fbaee,_0xb2fc95,!![]);else{if(_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)](_0x1442ae(0x9e)))config[_0x1442ae(0x21d)]?_0x2fbaee=_0xc740f2+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x2fbaee=_0xc740f2+_0x1442ae(0xcb),logHistory('error',_0x2fbaee),logHistory(_0x1442ae(0x1e9),_0x1442ae(0xea)),await killBot();else{if(_0xb2fc95[_0x1442ae(0x7a)]()[_0x1442ae(0x1d6)]('PermissionDenied'))logHistory(_0x1442ae(0x1e9),_0xc740f2+_0x1442ae(0x12f)),logHistory('error',_0x1442ae(0xea)),await killBot();else{if(_0xb2fc95['toString']()['includes'](_0x1442ae(0x19e)))logHistory(_0x1442ae(0x1e9),_0x1442ae(0x18f)+_0x124f16);else{if(_0xb2fc95 instanceof ccxt[_0x1442ae(0x9f)]){_0x2fbaee=_0xc740f2+_0x1442ae(0x1a8)+_0xb2fc95[_0x1442ae(0x7a)](),logHistory(_0x1442ae(0x1e9),_0x2fbaee),logger[_0x1442ae(0x9d)](_0x1442ae(0x1ad),_0xb2fc95);if(_0x124f16)logger['debug']('Symbol(s):\x20'+_0x124f16);await pauseBot(undefined,_0x2fbaee,_0xb2fc95);}else{_0x2fbaee='Unknown\x20error:\x20'+_0xb2fc95[_0x1442ae(0x7a)](),logHistory(_0x1442ae(0x1e9),_0x2fbaee),logger[_0x1442ae(0x9d)](_0x2fbaee+'\x20>\x20details:',_0xb2fc95);if(_0x124f16)logger[_0x1442ae(0x9d)](_0x1442ae(0x11e)+_0x124f16);await pauseBot(undefined,_0x2fbaee);}}}}}}}}}}}}}}}}function decryptRSA(_0x3f8743,_0x4fea6d){const _0x2e1b77=_0x249b4e,_0x57312d=forge[_0x2e1b77(0x186)]['privateKeyFromPem'](_0x3f8743),_0x578203=_0x57312d[_0x2e1b77(0x198)](forge['util'][_0x2e1b77(0x88)](_0x4fea6d),_0x2e1b77(0x167),{'md':forge['md'][_0x2e1b77(0x11a)][_0x2e1b77(0x176)](),'mgf1':{'md':forge['md']['sha256'][_0x2e1b77(0x176)]()}});return _0x578203;}async function withRetry(_0x1899b4,_0x4c2349){const _0xc8c39b=_0x249b4e;let _0x3b292d=![],_0x4ed0f3=0x0,_0x2595cb,_0xa945ed;while(_0x4ed0f3<maxRetries){try{_0x2595cb=await _0x4c2349();break;}catch(_0x4e48e7){_0xa945ed=_0x4e48e7,!_0x3b292d?(_0x3b292d=!![],logger[_0xc8c39b(0x9d)](_0xc8c39b(0x18c)+_0x1899b4+':',_0x4e48e7['toString']())):await sleep(retryInterval);}_0x4ed0f3++;}if(_0x4ed0f3==0x0)return _0x2595cb;if(_0x4ed0f3>=maxRetries)throw _0xa945ed;else return logger['debug'](_0xc8c39b(0x1a9)+_0x4ed0f3+_0xc8c39b(0x89)),_0x2595cb;}function formatResult(_0x188690,_0x5e001d){const _0x1cc856=_0x249b4e;return parseFloat(_0x188690[_0x1cc856(0x97)](_0x5e001d));}function formatResultTruncate(_0x599c70,_0x3ed226){const _0x212696=_0x249b4e;let _0x17baa2=formatResultString(_0x599c70,0xa),_0x21adf9=_0x17baa2[_0x212696(0x188)]('.');return _0x21adf9!=-0x1&&(_0x17baa2=_0x17baa2[_0x212696(0x11f)](0x0,_0x21adf9+_0x3ed226+0x1)),Number(_0x17baa2);}function formatResultString(_0x187272,_0x40b5bf){const _0x25c6d4=_0x249b4e;let _0x2efe57;if(!(''+_0x187272)[_0x25c6d4(0x1d6)]('e'))_0x2efe57=+(Math[_0x25c6d4(0x102)](_0x187272+'e+'+_0x40b5bf)+'e-'+_0x40b5bf);else{let _0x2610c5=(''+_0x187272)[_0x25c6d4(0x1cb)]('e'),_0x3bc498='';+_0x2610c5[0x1]+_0x40b5bf>0x0&&(_0x3bc498='+'),_0x2efe57=+(Math[_0x25c6d4(0x102)](+_0x2610c5[0x0]+'e'+_0x3bc498+(+_0x2610c5[0x1]+_0x40b5bf))+'e-'+_0x40b5bf);}return Number(_0x2efe57)['toFixed'](_0x40b5bf);}function getServerTime(){const _0x167370=_0x249b4e,_0x364465=new Date();return _0x364465['getFullYear']()+'/'+(_0x364465['getMonth']()+0x1)[_0x167370(0x7a)]()[_0x167370(0x146)](0x2,'0')+'/'+_0x364465[_0x167370(0x1c7)]()[_0x167370(0x7a)]()['padStart'](0x2,'0')+'\x20'+_0x364465[_0x167370(0x1e3)]()['toString']()[_0x167370(0x146)](0x2,'0')+':'+_0x364465['getMinutes']()[_0x167370(0x7a)]()[_0x167370(0x146)](0x2,'0')+':'+_0x364465[_0x167370(0xd0)]()[_0x167370(0x7a)]()[_0x167370(0x146)](0x2,'0');}function getTimeStamp(){const _0xdf6eb1=_0x249b4e,_0x35a624=shiftedTime();return _0x35a624[_0xdf6eb1(0x1e5)]()+'/'+(_0x35a624[_0xdf6eb1(0x141)]()+0x1)[_0xdf6eb1(0x7a)]()['padStart'](0x2,'0')+'/'+_0x35a624[_0xdf6eb1(0x1c7)]()[_0xdf6eb1(0x7a)]()[_0xdf6eb1(0x146)](0x2,'0')+'\x20'+_0x35a624[_0xdf6eb1(0x1e3)]()[_0xdf6eb1(0x7a)]()['padStart'](0x2,'0')+':'+_0x35a624[_0xdf6eb1(0xe9)]()[_0xdf6eb1(0x7a)]()[_0xdf6eb1(0x146)](0x2,'0')+':'+_0x35a624['getSeconds']()[_0xdf6eb1(0x7a)]()[_0xdf6eb1(0x146)](0x2,'0');}function getDate(){const _0x1e9c5b=_0x249b4e,_0x50bbdc=shiftedTime();return _0x50bbdc[_0x1e9c5b(0x1e5)]()+'/'+(_0x50bbdc[_0x1e9c5b(0x141)]()+0x1)[_0x1e9c5b(0x7a)]()[_0x1e9c5b(0x146)](0x2,'0')+'/'+_0x50bbdc[_0x1e9c5b(0x1c7)]()[_0x1e9c5b(0x7a)]()['padStart'](0x2,'0');}function getHour(){const _0x52e0f8=_0x249b4e,_0x5c5ebe=shiftedTime();return _0x5c5ebe[_0x52e0f8(0x1e3)]()[_0x52e0f8(0x7a)]()['padStart'](0x2,'0');}function _0xa1fc(_0x1eaec0,_0x2c4426){const _0x5302c2=_0x438f();return _0xa1fc=function(_0x596829,_0x5c5706){_0x596829=_0x596829-0x6e;let _0x438fff=_0x5302c2[_0x596829];return _0x438fff;},_0xa1fc(_0x1eaec0,_0x2c4426);}function sleep(_0x4eba12){return new Promise(_0x2097c2=>setTimeout(_0x2097c2,_0x4eba12));}function shiftedTime(){const _0x3b5a48=_0x249b4e,_0x252212=new Date();let _0x576efb=_0x252212;if(config&&config[_0x3b5a48(0x1c2)]!==0x0)_0x576efb=fns[_0x3b5a48(0x70)](_0x252212,{'hours':config[_0x3b5a48(0x1c2)]});return _0x576efb;}function timer(_0x1cadb4){const _0x2ec72a=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x1cadb4,_0x2ec72a):console['log'](getTimeStamp()+':\x20timer\x20>',_0x1cadb4,(_0x2ec72a-lasttime)/0x3e8),lasttime=_0x2ec72a;}