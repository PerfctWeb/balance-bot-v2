const _0x106de7=_0x5b09;(function(_0x7561fd,_0xc27894){const _0x3210e9=_0x5b09,_0x488f3b=_0x7561fd();while(!![]){try{const _0x5d79d3=-parseInt(_0x3210e9(0x195))/0x1*(parseInt(_0x3210e9(0x114))/0x2)+-parseInt(_0x3210e9(0x1ab))/0x3*(-parseInt(_0x3210e9(0x235))/0x4)+parseInt(_0x3210e9(0x1df))/0x5*(parseInt(_0x3210e9(0x201))/0x6)+parseInt(_0x3210e9(0xdd))/0x7*(-parseInt(_0x3210e9(0x262))/0x8)+-parseInt(_0x3210e9(0x191))/0x9*(parseInt(_0x3210e9(0x16d))/0xa)+-parseInt(_0x3210e9(0x22c))/0xb*(parseInt(_0x3210e9(0x115))/0xc)+-parseInt(_0x3210e9(0x225))/0xd*(-parseInt(_0x3210e9(0x254))/0xe);if(_0x5d79d3===_0xc27894)break;else _0x488f3b['push'](_0x488f3b['shift']());}catch(_0x1d14bb){_0x488f3b['push'](_0x488f3b['shift']());}}}(_0x2155,0x8b7fd));const _0x34c82b=function(){let _0x2164bc=!![];return function(_0x353532,_0x35d198){const _0x533a8f=_0x2164bc?function(){const _0x74d6c1=_0x5b09;if(_0x35d198){const _0x29c177=_0x35d198[_0x74d6c1(0x1e9)](_0x353532,arguments);return _0x35d198=null,_0x29c177;}}:function(){};return _0x2164bc=![],_0x533a8f;};}(),_0x11673c=_0x34c82b(this,function(){const _0x25b910=_0x5b09;return _0x11673c['toString']()[_0x25b910(0x23a)]('(((.+)+)+)+$')[_0x25b910(0x214)]()['constructor'](_0x11673c)['search'](_0x25b910(0x170));});_0x11673c();'use strict';const ccxt=require('ccxt'),low=require(_0x106de7(0x273)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x106de7(0x16c)),Crypt=require(_0x106de7(0x11e))[_0x106de7(0x24e)],util=require(_0x106de7(0x122)),argv=require(_0x106de7(0x244))(process['argv'][_0x106de7(0x18e)](0x2))[_0x106de7(0xe0)],path=require(_0x106de7(0x270));let exchange;global['ticker']={},global[_0x106de7(0x204)]={};const usdBasecoins=[_0x106de7(0x1cc),_0x106de7(0x206),_0x106de7(0x26f),_0x106de7(0x240),_0x106de7(0x259),_0x106de7(0x12c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x106de7(0x245)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x106de7(0x17a)+pauseBotInterval/0xea60+_0x106de7(0x139),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x106de7(0x236))[_0x106de7(0x1ef)],botID=process['argv'][0x2]||_0x106de7(0x110),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x106de7(0x179)]('Error:\x20Invalid\x20argument\x20'+botID+_0x106de7(0x13c)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x106de7(0x10e)+userID+'/':_0x106de7(0x10e),logspath=userID?_0x106de7(0x1e3)+userID+'/':_0x106de7(0x1e3),loggerfile=fs['createWriteStream'](logspath+_0x106de7(0x1d7),{'flags':'a'});!fs[_0x106de7(0x234)](configpath)&&fs[_0x106de7(0x231)](configpath);!fs[_0x106de7(0x234)](logspath)&&fs[_0x106de7(0x231)](logspath);const configfile=configpath+_0x106de7(0xe6)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x106de7(0x1dd),performancefile=configpath+_0x106de7(0xe6)+botID+_0x106de7(0x25c),coinresultsfile=configpath+_0x106de7(0xe6)+botID+_0x106de7(0x238),settingsfile=configpath+_0x106de7(0x138),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x106de7(0x1d0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x106de7(0x163)]({'logs':[],'version':serverversion})[_0x106de7(0x257)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x106de7(0x257)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x106de7(0x257)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x2155(){const _0x288f80=['full','ORDERS.LOCKED','429528VnzgNR','1\x20-\x20FILLED\x20known\x20order:\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','watchTrades','secure','mkdirSync','\x20not\x20responding','milliseconds','existsSync','1358620pVRnAr','./version.json','yyyy/MM/dd','-results.json','\x20|\x20','search','value','percentage','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','stopExchange()','bot','USDT','close','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Bybit','yargs/yargs','UNLOCKED','sells','NetworkError','length','max','cancel','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','password','average','Crypt','2.6.0','sell','limit','fee','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','5306overFq','2\x20-\x20handling\x20FILLED\x20order:\x20','Executed\x20','write','round','USDC','loadSymbols()','basecoinvalue','-performance.json','Transaction\x20detection\x20unblocked','toggleBotMode','ticker','Portfolio\x20change\x20detected:\x20','ID:\x20','23544OqiwWk','InvalidOrder','amountToPrecision','spot','OrderNotFound','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','ETH','ordertype','exchange\x20reloaded','includes','fetchClosedOrders','cooldown','Exception\x20thrown\x20in\x20','TUSD','path','apiKey','2\x20-\x20Orders\x20unlocked','lowdb','sort','orderstatus','type','join','2.3.5','2681kvQomk','Transaction\x20detection\x20blocked','recent20','argv','ExchangeError','canceled','privateKey','fetchBalance','deleteHistoryAlerts','bot-','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20exchange','AuthenticationError','emitHistory','differenceInSeconds','startdate','getSeconds','event','random','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','openOrders','getMonth','decrypt','getPortfolio(2)','bots','Unknown\x20error\x20occured','getTime','RequestTimeout','Error\x20while\x20deleting\x20files:\x20','/EUR','remainingSymbols','change24h','Huobipro','none','apiSecret','Net\x20','DDoSProtection','restart','Loading\x20completed','1\x20-\x20Validate\x20orders:\x20','onepagemode','colorscheme','floor','string','amount','progress','exchange','getOpenOrders()','./config/','\x20orders\x20in\x20less\x20than\x20','001','botname','substring','Unfilled\x20order(s)\x20canceled\x20after\x20','222hhttkF','12RSEsIX','args','forEach','ORDERS.UNLOCKED','\x20|\x20highest\x20fee:\x20','apiPassword','API-key\x20format\x20invalid','storeHeadless','distribution','hybrid-crypto-js','message','net-fiat','\x20API\x20secret\x20is\x20invalid','util','replace','realized','getFullYear','***','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','bid','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','BTC','storeConfiguration','USDP','reverse','Resetting\x20coin\x20results:\x20','fromCodePoint','Bot\x20','fees','\x20-\x20bot\x20not\x20started','price','autoliquidity','getAllOrders()','abs','getHours','bb-settings.json','\x20minutes','initial','%\x20(',',\x20must\x20be\x20a\x203\x20digit\x20number','RateLimitExceeded','starting-balance-','OnMaintenance','Error\x20details:','liquidity','page','ask','remove','currency','\x20has\x20a\x2024h\x20drop\x20of\x20','datetime','fiat','changes','set','net-basecoin','keys','UNLOCKING','showConfig','timestamp','last','indexOf','Saving\x20configuration','emojisell','InsufficientFunds','side','Waited\x20','stringify','configuration','Order\x20amount\x20is\x20invalid:\x20','entries','min','netoffset','highest','writeFile','\x20:\x20','excluded','order','configuration-stored','defaults','parse','<b>Bot\x20','getCoins()',':\x20timer\x20>','getStartingBalances','\x20change','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','filled','date-fns','160zzulUb','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchTicker','(((.+)+)+)+$','getDate','\x20network\x20error','cancelOrder','logs','filter','.json','push','<pre>','log','\x20-\x20pausing\x20bot\x20for\x20','-------------------------------\x0a','padEnd','has','findIndex','1\x20-\x20Unlock\x20orders','padStart','date','\x20|\x20lock\x20orders:\x20','<b>','portfolio','open','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','recreateCoinResults()','customId','assign','Avoiding\x20continuous\x20order\x20attempts','/USD','LOCKED','running','slice','closed','exchanges','31491Kjylxl','coins','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','final','7149rhudcr','\x20portfolio:</b>\x20\x0a\x0a','ORDERS.UNLOCKING','timeout','watchOrders()','get','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchOpenOrders','\x20not\x20available','EUR','splice','Resetting\x20bot\x20history','startprice','headless','coin','Huobi','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','total','Net\x20effect','valid','find','rightTxt','3CyvbGo','Limit\x20(high-margin)','buys','Pausing\x20for\x20','getMinutes','split','loadMarkets','time','\x20closed\x20the\x20connection','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','breakeven','1\x20-\x20Handle\x20open\x20orders',':\x20Bot\x20','error','\x20value','PermissionDenied','target','offset','limits','fetchTickers()','Manual\x20balancing\x20required','\x20minutes\x20-\x20','usd','\x20metrics:</b>\x20\x0a\x0a','Limit\x20(low-margin)','status','enabled','Binance','data','shift','toLowerCase','symbol','USD','cancelOrders()','leftTxt','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','/backup/','Headless:\x20','eur','startnumber','resetHistory','Invalid\x20API\x20key\x20or\x20secret\x20entered','threshold','/output-000.log','\x20order:\x20','debug','number','\x20|\x20exchange:\x20','basecoin','-events.json','delta','343015yvJbsi','pro','warning','balances','./logs/','no\x20open\x20orders','sortBy','Executing\x20exchange\x20reload','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','send','apply','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limit-high','getPortfolio(0)','0\x20-\x20EXECUTION:\x20','version','buy','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2\x20-\x20Handled\x20open\x20orders','emojibuy','************','getCoinNumber()','format','orderId','success','Invalid\x20symbol:\x20','ExchangeNotAvailable','\x20|\x20Custom\x20ID:\x20','market','storeFiat','InvalidNonce','BNB/','createOrder','6UdCrfx','startsWith','sendMetricsTelegram','change','function','BUSD','timeshift','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20exchange\x20error','\x20>\x20[DEBUG]\x20','parseISO','removed','ongoing','recreate','BNB','showname','\x20>\x20','coin-loading-progress','watchTransactions()','toString','Order\x20is\x20invalid:\x20','Cex','added','cost','Exchange','isEqual','trade','starting-balances','exchange\x20not\x20reloaded','toUpperCase','map','unlinkSync','loading-canceled','sendPortfolioTelegram','kill','Reset\x20|\x20','74737DfcCdK','concat','toFixed','fetchTickers','performance'];_0x2155=function(){return _0x288f80;};return _0x2155();}let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x481b86=>{const _0x5f5b24=_0x106de7;console[_0x5f5b24(0x179)](_0x481b86);},'simple':_0x367194=>{const _0x5597fc=_0x106de7;console[_0x5597fc(0x179)](_0x367194),loggerfile[_0x5597fc(0x257)](util[_0x5597fc(0x1f6)](_0x367194)+'\x0a');},'full':async(_0x5e7b96,_0x39e42a='')=>{const _0x463e2a=_0x106de7;let _0x9b8f16;if(config['showname'])_0x9b8f16=getTimeStamp()+':\x20'+config[_0x463e2a(0x111)]+_0x463e2a(0x211)+_0x5e7b96;else _0x9b8f16=getTimeStamp()+_0x463e2a(0x1b8)+botID+_0x463e2a(0x211)+_0x5e7b96;console[_0x463e2a(0x179)](_0x9b8f16),loggerfile[_0x463e2a(0x257)](util[_0x463e2a(0x1f6)](_0x9b8f16)+'\x0a'),_0x39e42a&&(console[_0x463e2a(0x179)](_0x39e42a),loggerfile[_0x463e2a(0x257)](util['format'](_0x39e42a)+'\x0a'));},'debug':async(_0x476e4f,_0x464fe0='')=>{const _0x266fa3=_0x106de7;let _0x234960;if(config['showname'])_0x234960=getTimeStamp()+':\x20'+config[_0x266fa3(0x111)]+'\x20>\x20[DEBUG]\x20'+_0x476e4f;else _0x234960=getTimeStamp()+':\x20Bot\x20'+botID+_0x266fa3(0x20a)+_0x476e4f;if(debugging)console[_0x266fa3(0x179)](_0x234960);loggerfile[_0x266fa3(0x257)](util[_0x266fa3(0x1f6)](_0x234960)+'\x0a');if(_0x464fe0){if(debugging)console[_0x266fa3(0x179)](_0x464fe0);loggerfile['write'](util[_0x266fa3(0x1f6)](_0x464fe0)+'\x0a');}}};process['on']('uncaughtException',function(_0x4a3df1){const _0x58d2c9=_0x106de7;logHistory(_0x58d2c9(0x1b9),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x58d2c9(0x1d9)]('Uncaught\x20Exception:',_0x4a3df1);});settings['timeshift']!=config[_0x106de7(0x207)]&&updateTimeshift(settings[_0x106de7(0x207)]);settings['onepagemode']!=config[_0x106de7(0x106)]&&updateOnepagemode(settings[_0x106de7(0x106)]);process['send']({'started':_0x106de7(0x18d)},_0x376f90=>{}),initializeProcessListeners();function proxyEmit(_0x302217,_0x5448fa=null){const _0x76f5da=_0x106de7;process[_0x76f5da(0x1e8)]({'function':_0x302217,'args':_0x5448fa},_0x40981c=>{});}function initializeProcessListeners(){const _0x5d0393=_0x106de7;process['on'](_0x5d0393(0x11f),_0x4c8515=>{const _0x31e9cb=_0x5d0393;switch(Object[_0x31e9cb(0x14c)](_0x4c8515)[0x0]){case _0x31e9cb(0x207):_0x4c8515[_0x31e9cb(0x207)]!=undefined&&(settings[_0x31e9cb(0x207)]=_0x4c8515[_0x31e9cb(0x207)],updateTimeshift(settings[_0x31e9cb(0x207)]));break;case _0x31e9cb(0x106):_0x4c8515[_0x31e9cb(0x106)]!=undefined&&(settings[_0x31e9cb(0x106)]=_0x4c8515['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x31e9cb(0xf6):_0x4c8515[_0x31e9cb(0xf6)]!=undefined&&(bots=JSON[_0x31e9cb(0x164)](_0x4c8515['bots']),proxyEmit('bots',bots));break;case'function':switch(_0x4c8515[_0x31e9cb(0x205)]){case'initclient':initclient();break;case _0x31e9cb(0x25e):toggleBotMode();break;case _0x31e9cb(0xea):emitHistory(_0x4c8515['args']);break;case _0x31e9cb(0xe5):deleteHistoryAlerts(_0x4c8515[_0x31e9cb(0x116)]);break;case'getPortfolio':getPortfolio(_0x4c8515[_0x31e9cb(0x116)]);break;case _0x31e9cb(0x12b):storeConfiguration(_0x4c8515[_0x31e9cb(0x116)]);break;case _0x31e9cb(0x11c):storeHeadless(_0x4c8515[_0x31e9cb(0x116)]);break;case _0x31e9cb(0x1fd):storeFiat(_0x4c8515['args']);break;case _0x31e9cb(0x1d4):resetHistory();break;case _0x31e9cb(0x168):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x4c8515[_0x31e9cb(0x116)]);break;case'cancelLoading':cancelLoading();break;case _0x31e9cb(0x14e):showConfig();break;case _0x31e9cb(0x203):sendMetricsTelegram();break;case _0x31e9cb(0x222):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x59138d=![]){const _0x3be5d0=_0x106de7;logger['debug'](_0x3be5d0(0x224)+(_0x59138d?_0x3be5d0(0x26a):_0x3be5d0(0x21d))+_0x3be5d0(0x1db)+config[_0x3be5d0(0x10c)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x59138d)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3be5d0(0x271)]!=''&&config[_0x3be5d0(0x271)]!=_0x3be5d0(0x126)){loadingProgress=0x0;if(_0x59138d){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x31ddd9){handleErrorNoStop(_0x31ddd9,_0x3be5d0(0x25a));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x2acc11=await getCoins();[currentCoins,currentCoinsAll]=_0x2acc11,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x3be5d0(0x1d9)](_0x3be5d0(0x104)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x3be5d0(0x248)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3ed1db=_0x106de7;exchangeStopped=!![];try{await exchange[_0x3ed1db(0x241)]();}catch(_0x46c8de){await handleError(_0x46c8de,_0x3ed1db(0x23e));}}async function reloadExchange(){const _0x5d4ed4=_0x106de7;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5d4ed4(0x1d9)](_0x5d4ed4(0x1e6)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x38e269=config[_0x106de7(0x10c)],_0x29f7fe=config[_0x106de7(0x271)],_0x59808d=config[_0x106de7(0x100)],_0x13b85d=config[_0x106de7(0x11a)]){const _0x292c29=_0x106de7;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x38e269)&&(logHistory(_0x292c29(0x1b9),_0x292c29(0x1ea)+_0x38e269+_0x292c29(0xe8)),killBot());const _0x599649=ccxt[_0x292c29(0x1e0)][_0x38e269[_0x292c29(0x1ca)]()];exchange=new _0x599649({'apiKey':_0x29f7fe,'secret':_0x59808d,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x13b85d)exchange[_0x292c29(0x24c)]=_0x13b85d;}function setStableCoins(){const _0x4ad7c7=_0x106de7;let _0x172e08=config[_0x4ad7c7(0x1dc)]==_0x4ad7c7(0x268)?_0x4ad7c7(0x268):'BTC',_0x7a7c88=!allSymbols[_0x4ad7c7(0x26b)](_0x172e08+_0x4ad7c7(0x18b))?_0x4ad7c7(0x240):'USD',_0x245ff3=!allSymbols[_0x4ad7c7(0x26b)](_0x172e08+_0x4ad7c7(0xfb))?_0x7a7c88:_0x4ad7c7(0x19e);stablecoins={'eur':{'coin':''+_0x172e08+_0x245ff3,'symbol':_0x172e08+'/'+_0x245ff3},'usd':{'coin':''+_0x172e08+_0x7a7c88,'symbol':_0x172e08+'/'+_0x7a7c88}};}async function initwsCcxt(){const _0x5cfff3=_0x106de7;initCycle++;const _0x290292=initCycle;let _0x550f20=[];config[_0x5cfff3(0x184)][_0x5cfff3(0x117)](_0x48751c=>{const _0x1217ae=_0x5cfff3;if(!_0x48751c['excluded']&&_0x48751c[_0x1217ae(0x1a3)]!=config[_0x1217ae(0x1dc)])_0x550f20[_0x1217ae(0x177)](_0x48751c['symbol']);});if(!_0x550f20[_0x5cfff3(0x26b)](stablecoins[_0x5cfff3(0x1d2)][_0x5cfff3(0x1cb)]))_0x550f20['push'](stablecoins[_0x5cfff3(0x1d2)]['symbol']);if(!_0x550f20['includes'](stablecoins[_0x5cfff3(0x1c2)][_0x5cfff3(0x1cb)]))_0x550f20[_0x5cfff3(0x177)](stablecoins[_0x5cfff3(0x1c2)][_0x5cfff3(0x1cb)]);if(config[_0x5cfff3(0x10c)][_0x5cfff3(0x202)]('Binance')){if(!_0x550f20['includes']('BNB/'+config[_0x5cfff3(0x1dc)]))_0x550f20['push'](_0x5cfff3(0x1ff)+config[_0x5cfff3(0x1dc)]);}loadCoins(_0x550f20),_0x550f20=validateSymbols(_0x550f20);const _0x549d92=async _0x5b3a86=>{const _0x1b9ef0=_0x5cfff3;let _0x1f34a5;try{const _0x1e599e=await getTickers(_0x5b3a86);Object[_0x1b9ef0(0x15a)](_0x1e599e)[_0x1b9ef0(0x117)](_0x3661c0=>{const _0x43fc1b=_0x1b9ef0;_0x1f34a5=_0x3661c0[0x1]['symbol'],global['ticker'][noslash(_0x1f34a5)]=_0x3661c0[0x1][_0x43fc1b(0x150)],global[_0x43fc1b(0x204)][_0x1f34a5]=_0x3661c0[0x1][_0x43fc1b(0x23c)];});}catch(_0x26c0a2){await handleError(_0x26c0a2,'initTickers()',_0x1f34a5);}},_0x3d0df6=async _0x4daa53=>{const _0x3ec935=_0x5cfff3;while(initCycle==_0x290292){if(!botPaused)try{const _0x255e64=await exchange[_0x3ec935(0x22f)](_0x4daa53);global[_0x3ec935(0x25f)][noslash(_0x255e64[0x0]['symbol'])]=_0x255e64[0x0][_0x3ec935(0x133)],await sleep(0x3e8);}catch(_0x19e935){if(!exchangeStopped)await handleError(_0x19e935,'watchTrades()',_0x4daa53);}else await sleep(0x64);}},_0x421ae8=async _0x1d6256=>{const _0x5b4b58=_0x5cfff3;while(initCycle==_0x290292){if(!botPaused){let _0x450010;try{await sleep(0x3c*0x3e8);const _0x18f154=await getTickers(_0x1d6256);Object['entries'](_0x18f154)[_0x5b4b58(0x117)](_0x291dd1=>{const _0x1a3098=_0x5b4b58;_0x450010=_0x291dd1[0x1][_0x1a3098(0x1cb)],global[_0x1a3098(0x204)][_0x450010]=_0x291dd1[0x1][_0x1a3098(0x23c)];});}catch(_0x52acab){if(!exchangeStopped)await handleError(_0x52acab,_0x5b4b58(0x1bf),_0x450010);}}else await sleep(0x64);}},_0x16371d=async _0x506c53=>{const _0x4b7e16=_0x5cfff3;while(initCycle==_0x290292){if(!botPaused)try{const _0x358480=await exchange['watchOrders'](_0x506c53);initCycle==_0x290292&&_0x358480[_0x4b7e16(0x117)](_0x5abf70=>{updateNumberCoinsCcxt(_0x5abf70);});}catch(_0x208cb8){if(!exchangeStopped)await handleError(_0x208cb8,_0x4b7e16(0x199));}else await sleep(0x64);}};_0x549d92(_0x550f20),_0x421ae8(_0x550f20),_0x550f20['forEach'](_0x359c8d=>{_0x3d0df6(_0x359c8d),_0x16371d(_0x359c8d);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5501da){const _0x55a875=_0x106de7;let _0x158af4={};try{if(config['exchange']!='Cryptocom')_0x158af4=await exchange['fetchTickers'](_0x5501da);else for(const _0x3ab11d of _0x5501da){const _0x5d6868=await exchange[_0x55a875(0x16f)](_0x3ab11d);_0x158af4[_0x3ab11d]=_0x5d6868;}return _0x158af4;}catch(_0x2d4cf3){throw _0x2d4cf3;}}async function watchTransactions(){const _0x820499=_0x106de7;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x11c83d=await getCoins(),[_0x320072,_0x6e4d3c]=_0x11c83d;let _0x225878=[];currentCoins['forEach'](_0x2a9413=>{const _0x3d2c1d=_0x5b09,_0x23d9aa=_0x320072[_0x3d2c1d(0x1a9)](_0x55dde2=>_0x55dde2[_0x3d2c1d(0x1a3)]==_0x2a9413[_0x3d2c1d(0x1a3)]);if(_0x23d9aa){if(_0x2a9413['number']!=_0x23d9aa[_0x3d2c1d(0x1da)]){let _0x507298;if(_0x2a9413[_0x3d2c1d(0x1a3)]!=config[_0x3d2c1d(0x1dc)]){const _0x1a2236=global[_0x3d2c1d(0x25f)][noslash(_0x2a9413[_0x3d2c1d(0x1cb)])];_0x507298=_0x2a9413[_0x3d2c1d(0x12d)]?0x1/_0x1a2236:_0x1a2236;}else _0x507298=0x1;_0x225878[_0x3d2c1d(0x177)]({'coin':_0x2a9413[_0x3d2c1d(0x1a3)],'symbol':_0x2a9413['symbol'],'price':_0x507298,'number':Number(formatResult(_0x23d9aa[_0x3d2c1d(0x1da)]-_0x2a9413['number'],0x8)),'basecoinvalue':_0x507298*(_0x23d9aa[_0x3d2c1d(0x1da)]-_0x2a9413[_0x3d2c1d(0x1da)])});}}});if(_0x225878[_0x820499(0x248)]==0x1&&!blockTransactionDetection){if(config[_0x820499(0x134)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x225878[0x0][_0x820499(0x25b)]+_0x820499(0x119)+lastFees[_0x820499(0x15d)]);if(lastFees[_0x820499(0x15d)]==0x0||Math[_0x820499(0x136)](_0x225878[0x0][_0x820499(0x25b)])>lastFees[_0x820499(0x15d)]){delete _0x225878[0x0][_0x820499(0x1cb)],delete _0x225878[0x0][_0x820499(0x25b)];let _0xe49b68=[],_0x33d6e4=[...config[_0x820499(0x141)]]||[],_0x212714=config[_0x820499(0x141)];_0x33d6e4[_0x820499(0x274)]((_0x1418b2,_0xcec21d)=>_0x1418b2[_0x820499(0x181)]>_0xcec21d[_0x820499(0x181)]?-0x1:_0xcec21d['date']>_0x1418b2[_0x820499(0x181)]?0x1:0x0);const _0x379c1f=getDate();if(_0x33d6e4[0x0]){const _0x179e6b=fns['parse'](_0x33d6e4[0x0]['date'],_0x820499(0x237),new Date()),_0x21c55b=fns[_0x820499(0x164)](_0x379c1f,_0x820499(0x237),new Date());if(fns[_0x820499(0x21a)](_0x179e6b,_0x21c55b)){_0xe49b68=_0x33d6e4[0x0][_0x820499(0x149)];const _0x18250d=_0xe49b68[_0x820499(0x1a9)](_0x5331bb=>_0x5331bb[_0x820499(0x1a3)]==_0x225878[0x0][_0x820499(0x1a3)]);_0x18250d?(_0x18250d[_0x820499(0x1da)]+=_0x225878[0x0]['number'],_0x18250d['number']==0x0&&(_0xe49b68=_0xe49b68[_0x820499(0x175)](_0x2f7f8d=>{const _0x2bc77d=_0x820499;return _0x2f7f8d[_0x2bc77d(0x1a3)]!=_0x225878[0x0][_0x2bc77d(0x1a3)];}))):_0xe49b68['push'](_0x225878[0x0]);const _0xfde004=_0x212714[_0x820499(0x1a9)](_0x138b77=>_0x138b77[_0x820499(0x181)]==_0x379c1f);_0xfde004['changes']=_0xe49b68;}else _0x212714[_0x820499(0x177)]({'date':_0x379c1f,'changes':[_0x225878[0x0]]});}const _0x10c34e=_0x212714[_0x820499(0x1a9)](_0x971a2b=>_0x971a2b[_0x820499(0x181)]==_0x379c1f);if(_0x10c34e){let _0x5e5ec0=!![];_0x10c34e[_0x820499(0x149)][_0x820499(0x117)](_0x5d24fb=>{const _0x251237=_0x820499;if(_0x5d24fb[_0x251237(0x1da)]!=0x0)_0x5e5ec0=![];}),_0x5e5ec0&&(_0x212714=_0x212714[_0x820499(0x175)](_0x1d30da=>{const _0x3436f8=_0x820499;return _0x1d30da[_0x3436f8(0x181)]!=_0x379c1f;}));}let _0x1397df=dbConfig['get'](_0x820499(0x23f))[_0x820499(0x1a9)]({'botID':botID})[_0x820499(0x23b)]();_0x1397df&&(dbConfig['get'](_0x820499(0x23f))[_0x820499(0x1a9)]({'botID':botID})[_0x820499(0x189)]({'liquidity':_0x212714})[_0x820499(0x257)](),config['liquidity']=_0x212714),logHistory(_0x820499(0x1f8),_0x820499(0x260)+Math['abs'](_0x225878[0x0][_0x820499(0x1da)])+'\x20'+_0x225878[0x0][_0x820499(0x1a3)]+'\x20'+(_0x225878[0x0]['number']>0x0?_0x820499(0x217):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger[_0x820499(0x1d9)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x820499(0x136)](_0x225878[0x0][_0x820499(0x1da)])+'\x20'+_0x225878[0x0]['coin']+'\x20'+(_0x225878[0x0][_0x820499(0x1da)]>0x0?_0x820499(0x217):_0x820499(0x20c)));transactionDetected=!![];}else logger['debug'](_0x820499(0x260)+Math[_0x820499(0x136)](_0x225878[0x0][_0x820499(0x1da)])+'\x20'+_0x225878[0x0][_0x820499(0x1a3)]+'\x20'+(_0x225878[0x0][_0x820499(0x1da)]>0x0?_0x820499(0x217):'removed')+_0x820499(0x1e7));}currentCoins=_0x320072,currentCoinsAll=_0x6e4d3c,await sleep(watchTransactionsInterval);}catch(_0x4b2406){if(!exchangeStopped)await handleError(_0x4b2406,_0x820499(0x213));}else await sleep(0x64);}}async function loadSymbols(){const _0x594f79=_0x106de7;try{markets=await exchange[_0x594f79(0x1b1)](),allSymbols=[],Object[_0x594f79(0x15a)](markets)[_0x594f79(0x117)](_0x198ea5=>{const _0x497d7b=_0x594f79;_0x198ea5[0x1]['active']&&_0x198ea5[0x1][_0x497d7b(0x265)]&&allSymbols[_0x497d7b(0x177)](_0x198ea5[0x0]);});}catch(_0x29ad41){throw _0x29ad41;}}function validateSymbols(_0x46f80d){const _0x34ade2=_0x106de7;let _0x56ea1d=[];return _0x46f80d[_0x34ade2(0x117)](_0x3c0a40=>{const _0x157d7b=_0x34ade2;!allSymbols[_0x157d7b(0x26b)](_0x3c0a40)?logHistory(_0x157d7b(0x1b9),_0x157d7b(0x1f9)+_0x3c0a40+_0x157d7b(0x22e)):_0x56ea1d[_0x157d7b(0x177)](_0x3c0a40);}),_0x56ea1d;}async function initclient(){const _0x54de7c=_0x106de7;proxyEmit(_0x54de7c(0x158),emittedConfiguration()),proxyEmit(_0x54de7c(0x190),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2957fe=getNormalizedPerformance();emitPerformance(_0x2957fe),getStartingBalances(_0x2957fe);}async function toggleBotMode(){const _0x476ada=_0x106de7;let _0xfdedbb=dbConfig['get'](_0x476ada(0x23f))['find']({'botID':botID})[_0x476ada(0x23b)]();if(_0xfdedbb){const _0x30a94c=!_0xfdedbb['headless'];dbConfig['get'](_0x476ada(0x23f))['find']({'botID':botID})[_0x476ada(0x189)]({'headless':_0x30a94c})[_0x476ada(0x257)](),config[_0x476ada(0x1a2)]=_0x30a94c,proxyEmit(_0x476ada(0x158),emittedConfiguration()),updateBotManager();}}function _0x5b09(_0x41d538,_0xfdad38){const _0x40b3f7=_0x2155();return _0x5b09=function(_0x11673c,_0x34c82b){_0x11673c=_0x11673c-0xdb;let _0x2155dd=_0x40b3f7[_0x11673c];return _0x2155dd;},_0x5b09(_0x41d538,_0xfdad38);}function updateBotManager(){const _0x48d9df=_0x106de7;process['send']({'updatebotmanager':!![]},_0x119f3c=>{}),logger[_0x48d9df(0x1d9)](_0x48d9df(0x1d1)+config[_0x48d9df(0x1a2)]);}async function loadCoins(_0x212d26){const _0x26978e=_0x106de7;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xcb14d7,_0x556c39=0x0,_0x49b741=0x0;_0x212d26[_0x26978e(0x117)](_0x58564c=>{const _0x3223a5=_0x26978e;loading[_0x3223a5(0xfc)][_0x3223a5(0x177)](_0x58564c);}),loadingCanceled=![];let _0x1dc66d=![];while(_0xcb14d7!=_0x212d26[_0x26978e(0x248)]+maxLoadingProgress){_0xcb14d7=loadingProgress,_0x212d26[_0x26978e(0x117)](_0xc48524=>{const _0x31951c=_0x26978e;if(global[_0x31951c(0x25f)][noslash(_0xc48524)]){loading[_0x31951c(0xfc)]=loading[_0x31951c(0xfc)][_0x31951c(0x175)](_0x5d2cc7=>_0x5d2cc7!=_0xc48524);if(!watchedSymbols[_0x31951c(0x26b)](_0xc48524))watchedSymbols[_0x31951c(0x177)](_0xc48524);_0xcb14d7++;}}),loading[_0x26978e(0x10b)]=Math[_0x26978e(0x258)](_0xcb14d7/(_0x212d26[_0x26978e(0x248)]+maxLoadingProgress)*0x64);loading[_0x26978e(0x10b)]!=0x64&&(_0x49b741>0x1e*0x5&&(loading[_0x26978e(0x198)]=!![],emitLoadingProgress()),_0x49b741>0x78*0x5&&!_0x1dc66d&&(_0x1dc66d=!![],logHistory(_0x26978e(0x1b9),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols']['join'](',\x20')+_0x26978e(0x132)),logHistory(_0x26978e(0x1b9),_0x26978e(0x1ae)+loadCoinsRetryInterval/0xea60+_0x26978e(0x267)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x37f253=_0x26978e;process[_0x37f253(0x1e8)]({'stop':_0x37f253(0x103)},_0x331af6=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x26978e(0x24a)]=!![],emitLoadingProgress();break;}else _0x556c39!=loading[_0x26978e(0x10b)]&&(_0x556c39=loading[_0x26978e(0x10b)],emitLoadingProgress()),_0x49b741++,await sleep(0xc8);}_0xcb14d7==_0x212d26[_0x26978e(0x248)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x26978e(0x1e8)]({'status':_0x26978e(0x1c6),'live':'running'},_0x34ca66=>{}),_0x1dc66d&&logHistory(_0x26978e(0x1f8),_0x26978e(0x24b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4ddca9=_0x106de7;proxyEmit(_0x4ddca9(0x158),{...emittedConfiguration(),'configstate':_0x4ddca9(0x221)});}function emitLoadingProgress(){const _0x383fe1=_0x106de7;proxyEmit(_0x383fe1(0x212),loading);}async function getFiat(){const _0x43a6d2=_0x106de7;let _0x50e79e=global[_0x43a6d2(0x25f)][stablecoins[_0x43a6d2(0x1d2)][_0x43a6d2(0x1a3)]],_0x43066f=global[_0x43a6d2(0x25f)][stablecoins[_0x43a6d2(0x1c2)][_0x43a6d2(0x1a3)]];return{'eur':Number(_0x50e79e),'usd':Number(_0x43066f)};}function capitalize(_0x5e4ab8){const _0x2803e9=_0x106de7;return _0x5e4ab8[_0x2803e9(0x112)](0x0,0x1)[_0x2803e9(0x21e)]()+_0x5e4ab8[_0x2803e9(0x112)](0x1);}function supportedExchanges(){const _0x507b72=_0x106de7,_0x2574b3=['ws',_0x507b72(0x228),_0x507b72(0x16f),_0x507b72(0x22f),'watchOrders',_0x507b72(0x173),_0x507b72(0x200),_0x507b72(0x19c),_0x507b72(0x26c),_0x507b72(0xe4)];let _0x45404f=[],_0x16e9c9=[],_0x3bc1f8=ccxt[_0x507b72(0x1e0)][_0x507b72(0x190)];_0x3bc1f8[_0x507b72(0x117)](_0x5254cd=>{const _0x29a292=_0x507b72;try{const _0x1b5eac=new ccxt[(_0x29a292(0x1e0))][_0x5254cd]();_0x16e9c9[_0x29a292(0x177)](_0x1b5eac);}catch(_0x1d65f9){}}),_0x16e9c9[_0x507b72(0x117)](_0x1ed067=>{const _0x51b878=_0x507b72;let _0x567b1d=0x0;_0x2574b3[_0x51b878(0x117)](_0x158b61=>{const _0x4f43a0=_0x51b878;_0x158b61 in _0x1ed067[_0x4f43a0(0x17d)]&&_0x1ed067[_0x4f43a0(0x17d)][_0x158b61]&&_0x567b1d++;}),_0x567b1d==_0x2574b3[_0x51b878(0x248)]&&_0x45404f[_0x51b878(0x177)](capitalize(_0x1ed067['id']));});let _0x563ac3=[];return _0x3bc1f8[_0x507b72(0x117)](_0xe4a166=>{const _0x4b7e54=_0x507b72;_0xe4a166=capitalize(_0xe4a166);if(!_0x45404f[_0x4b7e54(0x26b)](_0xe4a166))_0x563ac3[_0x4b7e54(0x177)](_0xe4a166);}),_0x45404f;}function setStartDatePerformance(){const _0x25a47a=_0x106de7;if(config&&config[_0x25a47a(0x141)][0x0]['changes'][_0x25a47a(0x248)]!=0x0){const _0x474161=config[_0x25a47a(0x141)][0x0][_0x25a47a(0x149)];dbPerformance[_0x25a47a(0x19a)](_0x25a47a(0x1c8))[_0x25a47a(0x1a9)]({'date':config[_0x25a47a(0xec)]})[_0x25a47a(0x189)]({'coins':_0x474161})[_0x25a47a(0x257)]();}}async function recreateCoinResults(){const _0x4fc04f=_0x106de7;let _0x433a4e,_0x382676=[];try{const _0x4ef440=fns[_0x4fc04f(0x1f6)](fns[_0x4fc04f(0x20b)](config[_0x4fc04f(0xec)][_0x4fc04f(0x123)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x528c84 of currentCoins){if(_0x528c84['coin']!=config[_0x4fc04f(0x1dc)]){let _0x3bcd40=0x0,_0x46c953,_0x1985de;_0x433a4e=await getAllEventOrders(_0x528c84[_0x4fc04f(0x1cb)]);if(_0x433a4e['length']>0x0)_0x433a4e['forEach'](_0x235dcb=>{const _0x4c2154=_0x4fc04f,_0x279c71=_0x528c84[_0x4c2154(0x1cb)][_0x4c2154(0x26b)](config[_0x4c2154(0x1dc)]+'/');_0x382676['push']({'datetime':_0x235dcb[_0x4c2154(0x147)],'coin':_0x528c84[_0x4c2154(0x1a3)],'symbol':_0x528c84[_0x4c2154(0x1cb)],'side':_0x235dcb[_0x4c2154(0x155)],'reverse':_0x279c71,'amount':formatResult(_0x235dcb[_0x4c2154(0x16b)],0x8),'filled':formatResult(_0x235dcb[_0x4c2154(0x16b)],0x8),'price':formatResult(_0x235dcb['price'],0x8)}),_0x3bcd40=_0x235dcb['side']==_0x4c2154(0x1f0)?_0x3bcd40+_0x235dcb[_0x4c2154(0x16b)]:_0x3bcd40-_0x235dcb[_0x4c2154(0x16b)];if(!_0x1985de)_0x1985de=_0x235dcb[_0x4c2154(0x133)];});_0x46c953=_0x528c84[_0x4fc04f(0x1da)]-_0x3bcd40;let _0x52fdc0;config[_0x4fc04f(0x141)][_0x4fc04f(0x117)](_0x1959e1=>{const _0x49468f=_0x4fc04f;!_0x52fdc0&&(_0x52fdc0=_0x1959e1[_0x49468f(0x149)][_0x49468f(0x1a9)](_0x55aad0=>_0x55aad0[_0x49468f(0x1a3)]==_0x528c84['coin']),_0x52fdc0&&(_0x46c953=_0x52fdc0[_0x49468f(0x1da)],_0x1985de=_0x52fdc0[_0x49468f(0x133)]));});let _0x3d243d=dbCoinResults[_0x4fc04f(0x19a)](_0x4fc04f(0x192))[_0x4fc04f(0x1a9)]({'coin':_0x528c84[_0x4fc04f(0x1a3)]})[_0x4fc04f(0x23b)]();_0x3d243d={'coin':_0x528c84['coin'],'number':_0x46c953,'breakeven':_0x1985de,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4fc04f(0x19a)](_0x4fc04f(0x192))['find']({'coin':_0x528c84[_0x4fc04f(0x1a3)]})[_0x4fc04f(0x189)](_0x3d243d)[_0x4fc04f(0x257)]();}}_0x382676[_0x4fc04f(0x274)]((_0x42b69e,_0x17bc15)=>_0x42b69e['datetime']>_0x17bc15[_0x4fc04f(0x147)]?0x1:_0x17bc15[_0x4fc04f(0x147)]>_0x42b69e[_0x4fc04f(0x147)]?-0x1:0x0);let _0x9a8080=0x0;for(let _0x421c42 of _0x382676){await updateCoinResults(_0x421c42,!![]);}}catch(_0x19ff97){await handleError(_0x19ff97,_0x4fc04f(0x187));}}async function getAllEventOrders(_0x59a5a3){const _0x6feb37=_0x106de7;let _0x3c2d9c=[],_0x40db37=dbLogs[_0x6feb37(0x19a)]('logs')[_0x6feb37(0x175)](_0x2feded=>{const _0x44c5e6=_0x6feb37,_0xdf553f=_0x2feded[_0x44c5e6(0xee)][_0x44c5e6(0x1ca)]();return _0xdf553f[_0x44c5e6(0x26b)](_0x59a5a3['toLowerCase']())&&(_0xdf553f[_0x44c5e6(0x26b)](_0x44c5e6(0x1fc))&&_0xdf553f[_0x44c5e6(0x26b)]('order')||_0xdf553f[_0x44c5e6(0x26b)](_0x44c5e6(0x16b))&&_0xdf553f[_0x44c5e6(0x26b)](_0x44c5e6(0x161)));})['sortBy'](_0x6feb37(0x1b2))[_0x6feb37(0x23b)]();return _0x40db37['forEach'](_0x48988b=>{const _0x11426a=_0x6feb37,_0x3b4229=_0x48988b[_0x11426a(0xee)][_0x11426a(0x26b)](_0x11426a(0x250))?_0x11426a(0x250):_0x11426a(0x1f0),_0x31ee9e=/#([0-9]|\.)+\s/i,_0x4606ff=Number(_0x31ee9e['exec'](_0x48988b[_0x11426a(0xee)])[0x0][_0x11426a(0x18e)](0x1)),_0x2b7160=/@([0-9]|\.)+$/i,_0x3ee613=Number(_0x2b7160['exec'](_0x48988b['event'])[0x0][_0x11426a(0x18e)](0x1));_0x3c2d9c['push']({'datetime':_0x48988b[_0x11426a(0x1b2)],'coin':symbolToCoin(_0x59a5a3),'symbol':_0x59a5a3,'side':_0x3b4229,'amount':_0x4606ff,'filled':_0x4606ff,'price':_0x3ee613});}),_0x3c2d9c;}async function getAllOrders(_0x57e539,_0xcefb34){const _0x521e97=_0x106de7;let _0x2bf959=[];while(_0xcefb34<exchange[_0x521e97(0x233)]()){const _0x3db2a=0x1f4;try{const _0x681cc1=await exchange[_0x521e97(0x26c)](_0x57e539,_0xcefb34,_0x3db2a);if(_0x681cc1[_0x521e97(0x248)])_0xcefb34=_0x681cc1[_0x681cc1[_0x521e97(0x248)]-0x1][_0x521e97(0x14f)]+0x1,_0x2bf959=_0x2bf959[_0x521e97(0x226)](_0x681cc1);else break;}catch(_0x3a8a52){await handleError(_0x3a8a52,_0x521e97(0x135),_0x57e539);}}return _0x2bf959;}async function validate24hChanges(){const _0x1a1368=_0x106de7;for(const _0x103a72 of currentCoins){if(_0x103a72['coin']!=config[_0x1a1368(0x1dc)]){let _0x2dc430;_0x103a72[_0x1a1368(0x12d)]?_0x2dc430=formatResult((0x1/(global[_0x1a1368(0x204)][noslash(_0x103a72[_0x1a1368(0x1cb)])]/0x64+0x1)-0x1)*0x64,0x3):_0x2dc430=global[_0x1a1368(0x204)][noslash(_0x103a72[_0x1a1368(0x1cb)])],_0x2dc430<config['change24h']&&(logHistory(_0x1a1368(0x1b9),_0x103a72[_0x1a1368(0x1a3)]+_0x1a1368(0x146)+_0x2dc430+'%'),logHistory(_0x1a1368(0x1b9),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x1a1368(0x1b9),_0x1a1368(0x186)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2a253b,_0x36b287){const _0x1f0d50=_0x106de7;if(!_0x2a253b)return!![];const _0x5cefc9=_0x36b287['split']('.'),_0x35f396=_0x2a253b[_0x1f0d50(0x1b0)]('.');for(var _0x5a4d89=0x0;_0x5a4d89<_0x35f396['length'];_0x5a4d89++){const _0x220261=~~_0x35f396[_0x5a4d89],_0xe9ce98=~~_0x5cefc9[_0x5a4d89];if(_0x220261<_0xe9ce98)return!![];if(_0x220261>_0xe9ce98)return![];}return![];}async function oneTimeMigration(){const _0x37d205=_0x106de7;let _0x3bf1d6=dbLogs['get'](_0x37d205(0x1ef))['value']();if(isOlderVersion(_0x3bf1d6,_0x37d205(0xdc))){let _0x4fc259=[];const _0x2d9a05=dbLogs[_0x37d205(0x19a)]('logs')['value']();_0x2d9a05['forEach'](_0x53ce41=>{const _0x509c26=_0x37d205;_0x4fc259[_0x509c26(0x177)]({'time':_0x53ce41[_0x509c26(0x1b2)],'type':_0x53ce41['type'],'event':_0x53ce41[_0x509c26(0xee)]});}),dbLogs['get'](_0x37d205(0x174))['assign'](_0x4fc259)[_0x37d205(0x257)]();}let _0x3b46f8=dbConfig[_0x37d205(0x19a)](_0x37d205(0x1ef))[_0x37d205(0x23b)]();if(isOlderVersion(_0x3b46f8,_0x37d205(0xdc))){let _0x568082=dbConfig[_0x37d205(0x19a)]('bot')[_0x37d205(0x1a9)]({'botID':botID})[_0x37d205(0x23b)]();if(_0x568082){let _0x104b5a=[];_0x568082['portfolio']['forEach'](_0x2e5dc8=>{const _0x501134=_0x37d205;_0x104b5a[_0x501134(0x177)]({'coin':_0x2e5dc8[_0x501134(0x1a3)],'number':_0x2e5dc8[_0x501134(0x1d3)],'price':_0x2e5dc8[_0x501134(0x1a1)]}),delete _0x2e5dc8[_0x501134(0x1d3)],delete _0x2e5dc8[_0x501134(0x1a1)];});if(_0x104b5a[_0x37d205(0x248)]!==0x0)fs[_0x37d205(0x15e)](configbackuppath+(_0x37d205(0x13e)+botID+_0x37d205(0x176)),JSON[_0x37d205(0x157)](_0x104b5a,null,0x4),function(_0x523c36){if(_0x523c36){}});const _0x2f8d6f=(_0x108c59,_0x4a33d0)=>{const _0x376349=_0x37d205;let _0x2768f1=[];_0x4a33d0[_0x376349(0x117)](_0x10cf0a=>{const _0x3927be=_0x376349,_0x3dffc7=_0x108c59[_0x3927be(0x1a9)](_0x45d810=>_0x45d810[_0x3927be(0x1a3)]==_0x10cf0a[_0x3927be(0x1a3)]);if(!_0x3dffc7)_0x2768f1[_0x3927be(0x177)](_0x10cf0a);});let _0x5034a8=[];return _0x108c59['forEach'](_0x1e6290=>{const _0x118190=_0x376349,_0x27c59f=_0x4a33d0['find'](_0xa503b6=>_0xa503b6['coin']==_0x1e6290[_0x118190(0x1a3)]);if(!_0x27c59f||_0x27c59f[_0x118190(0x1da)]==0x0&&_0x1e6290[_0x118190(0x1da)]!=0x0)_0x5034a8[_0x118190(0x177)](_0x1e6290);}),{'missingDay1':_0x2768f1,'notInDay2':_0x5034a8};},_0xdfec07=dbPerformance[_0x37d205(0x19a)](_0x37d205(0x1c8))['cloneDeep']()['value']();if(_0xdfec07['length']>0x1){const {missingDay1:_0x7eadd3,notInDay2:_0x24b85c}=_0x2f8d6f(_0x104b5a,_0xdfec07[0x1][_0x37d205(0x192)]);_0x104b5a=[..._0x104b5a,..._0x7eadd3],_0x24b85c[_0x37d205(0x117)](_0x15e6b4=>{const _0x5770fd=_0x37d205;let _0x3993d0=_0x104b5a[_0x5770fd(0x17e)](_0xddcc50=>_0xddcc50['coin']==_0x15e6b4[_0x5770fd(0x1a3)]);_0x3993d0!=-0x1&&_0x104b5a[_0x5770fd(0x19f)](_0x3993d0,0x1);});}_0x104b5a[_0x37d205(0x274)]((_0x4f97cf,_0x32df3b)=>_0x4f97cf[_0x37d205(0x1a3)]>_0x32df3b[_0x37d205(0x1a3)]?0x1:_0x32df3b[_0x37d205(0x1a3)]>_0x4f97cf[_0x37d205(0x1a3)]?-0x1:0x0);let _0x3f04b1=[{'date':_0x568082[_0x37d205(0xec)],'changes':_0x104b5a}];_0xdfec07[_0x37d205(0x248)]>0x2&&_0xdfec07[_0x37d205(0x117)]((_0x44999d,_0x47c671)=>{const _0x346436=_0x37d205;if(_0x47c671>0x0&&_0x47c671<_0xdfec07[_0x346436(0x248)]-0x1){const {missingDay1:_0x8c9ae4,notInDay2:_0x468625}=_0x2f8d6f(_0xdfec07[_0x47c671][_0x346436(0x192)],_0xdfec07[_0x47c671+0x1]['coins']);_0x104b5a=[],(_0x8c9ae4[_0x346436(0x248)]!=0x0||_0x468625[_0x346436(0x248)]!=0x0)&&(_0x8c9ae4[_0x346436(0x248)]!=0x0&&_0x104b5a['push'](..._0x8c9ae4),_0x468625[_0x346436(0x248)]!=0x0&&(_0x468625[_0x346436(0x117)](_0x442193=>{const _0x2863d6=_0x346436;_0x442193['number']=-_0x442193[_0x2863d6(0x1da)];}),_0x104b5a[_0x346436(0x177)](..._0x468625)),_0x104b5a[_0x346436(0x274)]((_0x30cec2,_0x5270eb)=>_0x30cec2[_0x346436(0x1a3)]>_0x5270eb[_0x346436(0x1a3)]?0x1:_0x5270eb[_0x346436(0x1a3)]>_0x30cec2[_0x346436(0x1a3)]?-0x1:0x0),_0x3f04b1[_0x346436(0x177)]({'date':_0xdfec07[_0x47c671+0x1]['date'],'changes':_0x104b5a}));}}),dbConfig[_0x37d205(0x19a)](_0x37d205(0x23f))[_0x37d205(0x1a9)]({'botID':botID})[_0x37d205(0x189)]({..._0x568082,'liquidity':_0x3f04b1})[_0x37d205(0x257)]();}}if(isOlderVersion(_0x3b46f8,_0x37d205(0x24f))){let _0x1000ca=dbConfig[_0x37d205(0x19a)](_0x37d205(0x23f))['find']({'botID':botID})[_0x37d205(0x23b)]();if(_0x1000ca){const _0x516140=_0x1000ca[_0x37d205(0x10c)],_0x119813=_0x516140?capitalize(_0x516140):_0x37d205(0x1c7);dbConfig[_0x37d205(0x19a)]('bot')['find']({'botID':botID})[_0x37d205(0x189)]({'exchange':_0x119813})[_0x37d205(0x257)]();}}let _0x5d5e89=dbPerformance[_0x37d205(0x19a)](_0x37d205(0x1ef))[_0x37d205(0x23b)]();isOlderVersion(_0x5d5e89,_0x37d205(0xdc))&&setStartDatePerformance();let _0x3be7e9=dbCoinResults[_0x37d205(0x19a)](_0x37d205(0x1ef))[_0x37d205(0x23b)]();if(isOlderVersion(_0x3be7e9,'2.5.0')){let _0x20f565=dbCoinResults[_0x37d205(0x19a)]('coins')[_0x37d205(0x23b)]();if(_0x20f565[_0x37d205(0x248)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x357d5b=_0x106de7;dbConfig['set']('version',serverversion)['write'](),dbPerformance[_0x357d5b(0x14a)](_0x357d5b(0x1ef),serverversion)[_0x357d5b(0x257)](),dbLogs[_0x357d5b(0x14a)](_0x357d5b(0x1ef),serverversion)[_0x357d5b(0x257)](),dbCoinResults[_0x357d5b(0x14a)](_0x357d5b(0x1ef),serverversion)[_0x357d5b(0x257)]();}function getConfiguration(_0xeedd70){const _0x236a57=_0x106de7;let _0x17204e=dbConfig[_0x236a57(0x19a)](_0x236a57(0x23f))['find']({'botID':_0xeedd70})[_0x236a57(0x23b)]();if(_0x17204e){let _0xdd2e61=![];typeof _0x17204e[_0x236a57(0x1d6)]==_0x236a57(0x109)&&(_0x17204e={..._0x17204e,'threshold':Number(_0x17204e[_0x236a57(0x1d6)])},_0xdd2e61=!![]),_0x17204e[_0x236a57(0xfd)]==undefined&&(_0x17204e={..._0x17204e,'change24h':-0x14},_0xdd2e61=!![]),_0x17204e[_0x236a57(0x148)]==undefined&&(_0x17204e={..._0x17204e,'fiat':_0x236a57(0x1cc)},_0xdd2e61=!![]),_0x17204e[_0x236a57(0x106)]==undefined&&(_0x17204e={..._0x17204e,'onepagemode':settings[_0x236a57(0x106)]},_0xdd2e61=!![]),_0x17204e[_0x236a57(0x107)]==undefined&&(_0x17204e={..._0x17204e,'colorscheme':'red_yellow_blue'},_0xdd2e61=!![]),_0x17204e[_0x236a57(0x134)]==undefined&&(_0x17204e={..._0x17204e,'autoliquidity':!![]},_0xdd2e61=!![]),_0xdd2e61&&(_0x17204e={'botID':_0x17204e['botID'],'exchange':_0x17204e[_0x236a57(0x10c)],'apiKey':_0x17204e[_0x236a57(0x271)],'apiSecret':_0x17204e[_0x236a57(0x100)],'apiPassword':_0x17204e[_0x236a57(0x11a)],'basecoin':_0x17204e['basecoin'],'botname':_0x17204e['botname'],'showname':_0x17204e[_0x236a57(0x210)],'threshold':_0x17204e[_0x236a57(0x1d6)],'ordertype':_0x17204e[_0x236a57(0x269)],'timeout':_0x17204e[_0x236a57(0x198)],'fiat':_0x17204e[_0x236a57(0x148)],'startdate':_0x17204e[_0x236a57(0xec)],'recreate':_0x17204e[_0x236a57(0x20e)],'timeshift':_0x17204e['timeshift'],'onepagemode':_0x17204e[_0x236a57(0x106)],'headless':_0x17204e[_0x236a57(0x1a2)],'cooldown':_0x17204e[_0x236a57(0x26d)],'change24h':_0x17204e[_0x236a57(0xfd)],'emojibuy':_0x17204e[_0x236a57(0x1f3)],'emojisell':_0x17204e[_0x236a57(0x153)],'colorscheme':_0x17204e[_0x236a57(0x107)],'portfolio':_0x17204e['portfolio'],'autoliquidity':_0x17204e['autoliquidity'],'liquidity':_0x17204e['liquidity'],'openOrders':_0x17204e['openOrders']},dbConfig[_0x236a57(0x19a)](_0x236a57(0x23f))['remove']()['write'](),dbConfig[_0x236a57(0x19a)](_0x236a57(0x23f))['push'](_0x17204e)[_0x236a57(0x257)]());}else _0x17204e={'botID':_0xeedd70,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x236a57(0x130)+_0xeedd70,'showname':![],'threshold':0x3,'ordertype':_0x236a57(0x1fc),'timeout':0x14,'fiat':_0x236a57(0x1cc),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x236a57(0x106)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x17204e;}function emittedConfiguration(){const _0x5e1932=_0x106de7;let _0x3c6957;if(config['apiKey']=='')_0x3c6957={...config,'configstate':_0x5e1932(0x13a)};else config['apiKey']==_0x5e1932(0x126)?_0x3c6957={...config,'configstate':'recovery'}:(_0x3c6957={...config,'apiKey':_0x5e1932(0x1f4),'apiSecret':_0x5e1932(0x1f4)},config[_0x5e1932(0x11a)]&&(_0x3c6957[_0x5e1932(0x11a)]=_0x5e1932(0x1f4)));return _0x3c6957;}function getSettings(){const _0x557f73=_0x106de7;return dbSettings['get']('settings')[_0x557f73(0x23b)]();}function getSecure(){const _0x10d45a=_0x106de7;return dbSecure[_0x10d45a(0x19a)](_0x10d45a(0x230))['value']()||{};}function updateTimeshift(_0x2833de){const _0x392dde=_0x106de7;let _0x14f469=dbConfig[_0x392dde(0x19a)]('bot')[_0x392dde(0x1a9)]({'botID':botID})[_0x392dde(0x23b)]();_0x14f469&&dbConfig[_0x392dde(0x19a)](_0x392dde(0x23f))[_0x392dde(0x1a9)]({'botID':botID})[_0x392dde(0x189)]({'timeshift':_0x2833de})['write'](),config[_0x392dde(0x207)]=_0x2833de,proxyEmit(_0x392dde(0x158),emittedConfiguration());}function updateOnepagemode(_0x52dc3f){const _0x15c98b=_0x106de7;let _0x21e5e4=dbConfig['get'](_0x15c98b(0x23f))[_0x15c98b(0x1a9)]({'botID':botID})[_0x15c98b(0x23b)]();_0x21e5e4&&dbConfig[_0x15c98b(0x19a)]('bot')[_0x15c98b(0x1a9)]({'botID':botID})[_0x15c98b(0x189)]({'onepagemode':_0x52dc3f})[_0x15c98b(0x257)](),config[_0x15c98b(0x106)]=_0x52dc3f,proxyEmit(_0x15c98b(0x158),emittedConfiguration());}async function storeConfiguration(_0x2efa8a){const _0x16ff00=_0x106de7;logger[_0x16ff00(0x1d9)](_0x16ff00(0x152));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x16ff00(0x1d9)](_0x16ff00(0xde));let _0x2f6e83=![],_0x2909b6=![],_0x3d55d5=[];_0x2efa8a['portfolio'][_0x16ff00(0x117)](_0x590bfe=>{const _0x155cdc=_0x16ff00;if(!_0x590bfe[_0x155cdc(0x160)]&&_0x590bfe[_0x155cdc(0x1a3)]!=_0x2efa8a[_0x155cdc(0x1dc)])_0x3d55d5[_0x155cdc(0x177)](_0x590bfe[_0x155cdc(0x1cb)]);}),_0x3d55d5[_0x16ff00(0x117)](_0x3f79c5=>{const _0x3a1e91=_0x16ff00,_0x5e5fc6=currentCoins[_0x3a1e91(0x1a9)](_0x454189=>_0x454189[_0x3a1e91(0x1cb)]==_0x3f79c5);!_0x5e5fc6&&(_0x2f6e83=!![]);}),currentCoins[_0x16ff00(0x117)](_0x55205d=>{const _0x2ca2aa=_0x16ff00;if(_0x55205d[_0x2ca2aa(0x1a3)]!=config[_0x2ca2aa(0x1dc)]){const _0x190944=_0x3d55d5[_0x2ca2aa(0x1a9)](_0x2fdde4=>_0x2fdde4==_0x55205d[_0x2ca2aa(0x1cb)]);!_0x190944&&(_0x2f6e83=!![]);}}),_0x2efa8a['portfolio']['forEach'](_0x1c24b2=>{const _0x4be6cb=_0x16ff00,_0x101955=config[_0x4be6cb(0x184)][_0x4be6cb(0x1a9)](_0x5c0b46=>_0x5c0b46[_0x4be6cb(0x1a3)]==_0x1c24b2['coin']);if(_0x101955&&_0x1c24b2[_0x4be6cb(0x1bd)]!=_0x101955[_0x4be6cb(0x1bd)])_0x2909b6=!![];});let _0x253b45=dbConfig[_0x16ff00(0x19a)](_0x16ff00(0x23f))[_0x16ff00(0x1a9)]({'botID':botID})[_0x16ff00(0x23b)]();_0x2efa8a={..._0x2efa8a,'apiKey':crypt['decrypt'](secure[_0x16ff00(0xe3)],_0x2efa8a['apiKey'])[_0x16ff00(0x11f)],'apiSecret':crypt['decrypt'](secure[_0x16ff00(0xe3)],_0x2efa8a[_0x16ff00(0x100)])[_0x16ff00(0x11f)]};_0x2efa8a[_0x16ff00(0x11a)]&&(_0x2efa8a['apiPassword']=crypt[_0x16ff00(0xf4)](secure[_0x16ff00(0xe3)],_0x2efa8a[_0x16ff00(0x11a)])[_0x16ff00(0x11f)]);let _0x15031f=![];if(_0x253b45){_0x2efa8a[_0x16ff00(0x271)]==_0x16ff00(0x1f4)?_0x2efa8a[_0x16ff00(0x271)]=config[_0x16ff00(0x271)]:_0x15031f=!![];_0x2efa8a['apiSecret']==_0x16ff00(0x1f4)?_0x2efa8a[_0x16ff00(0x100)]=config[_0x16ff00(0x100)]:_0x15031f=!![];if(_0x2efa8a[_0x16ff00(0x11a)]==_0x16ff00(0x1f4))_0x2efa8a[_0x16ff00(0x11a)]=config[_0x16ff00(0x11a)];else{if(_0x2efa8a[_0x16ff00(0x11a)])_0x15031f=!![];}dbConfig[_0x16ff00(0x19a)]('bot')[_0x16ff00(0x1a9)]({'botID':botID})[_0x16ff00(0x189)](_0x2efa8a)[_0x16ff00(0x257)]();}else dbConfig['get'](_0x16ff00(0x23f))[_0x16ff00(0x177)](_0x2efa8a)['write'](),_0x15031f=!![],process[_0x16ff00(0x1e8)]({'status':'enabled','live':_0x16ff00(0x18d)},_0x42d602=>{});process['send']({'botname':_0x2efa8a['botname']},_0x1d0acb=>{}),config={..._0x2efa8a},updateBotManager(),proxyEmit(_0x16ff00(0x162)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x15031f)await reset(!![]);else _0x2f6e83||_0x2909b6?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x16ff00(0x1d9)](_0x16ff00(0x25d));}async function storeHeadless(_0x370965){const _0x42adc4=_0x106de7,_0x3ed59f={...config,'headless':_0x370965['headless']};let _0x4b2835=dbConfig[_0x42adc4(0x19a)](_0x42adc4(0x23f))[_0x42adc4(0x1a9)]({'botID':botID})['value']();_0x4b2835&&dbConfig['get'](_0x42adc4(0x23f))[_0x42adc4(0x1a9)]({'botID':botID})[_0x42adc4(0x189)](_0x3ed59f)[_0x42adc4(0x257)](),config={..._0x3ed59f},updateBotManager(),proxyEmit(_0x42adc4(0x158),emittedConfiguration());}async function storeFiat(_0x2457d1){const _0x38b5b6=_0x106de7,_0x28fd30={...config,'fiat':_0x2457d1};let _0x321aa8=dbConfig[_0x38b5b6(0x19a)](_0x38b5b6(0x23f))[_0x38b5b6(0x1a9)]({'botID':botID})[_0x38b5b6(0x23b)]();_0x321aa8&&dbConfig['get'](_0x38b5b6(0x23f))[_0x38b5b6(0x1a9)]({'botID':botID})[_0x38b5b6(0x189)](_0x28fd30)[_0x38b5b6(0x257)](),config={..._0x28fd30},proxyEmit(_0x38b5b6(0x158),emittedConfiguration());}function resetHistory(){const _0x7f5147=_0x106de7;logger[_0x7f5147(0x22a)](_0x7f5147(0x1a0));try{if(fs['existsSync'](path[_0x7f5147(0xdb)](configpath,'bot-'+botID+_0x7f5147(0x1dd))))fs[_0x7f5147(0x220)](path[_0x7f5147(0xdb)](configpath,_0x7f5147(0xe6)+botID+'-events.json'));if(fs[_0x7f5147(0x234)](path['join'](configpath,_0x7f5147(0xe6)+botID+_0x7f5147(0x25c))))fs[_0x7f5147(0x220)](path[_0x7f5147(0xdb)](configpath,_0x7f5147(0xe6)+botID+'-performance.json'));if(fs[_0x7f5147(0x234)](path[_0x7f5147(0xdb)](configpath,_0x7f5147(0xe6)+botID+_0x7f5147(0x238))))fs[_0x7f5147(0x220)](path[_0x7f5147(0xdb)](configpath,_0x7f5147(0xe6)+botID+'-results.json'));}catch(_0x454a48){if(_0x454a48)logger[_0x7f5147(0x22a)](_0x7f5147(0xfa),_0x454a48);}const _0x498582=getDate();let _0x58dc8d=[];currentCoins[_0x7f5147(0x117)](_0x3dc726=>{const _0x23ebdf=_0x7f5147;_0x58dc8d[_0x23ebdf(0x177)]({'coin':_0x3dc726[_0x23ebdf(0x1a3)],'number':_0x3dc726[_0x23ebdf(0x1da)],'price':_0x3dc726[_0x23ebdf(0x150)]});});let _0x21da1c=dbConfig['get'](_0x7f5147(0x23f))['find']({'botID':botID})['value']();_0x21da1c&&(dbConfig['get'](_0x7f5147(0x23f))[_0x7f5147(0x1a9)]({'botID':botID})[_0x7f5147(0x189)]({'liquidity':[{'date':_0x498582,'changes':_0x58dc8d}]})[_0x7f5147(0x257)](),config[_0x7f5147(0x141)]=[]),process[_0x7f5147(0x1e8)]({'stop':'restart'},_0x1b5e88=>{});}function noslash(_0xd06573){return _0xd06573['replace']('/','');}function updateHighestFee(_0x11bbbe){const _0xf71bb6=_0x106de7;if(_0x11bbbe[_0xf71bb6(0x12d)]){let _0xe37e31={'filled':_0x11bbbe['filled']*_0x11bbbe['price'],'amount':_0x11bbbe[_0xf71bb6(0x16b)]*_0x11bbbe[_0xf71bb6(0x133)],'side':_0x11bbbe[_0xf71bb6(0x155)]==_0xf71bb6(0x250)?'buy':'sell','price':0x1/_0x11bbbe[_0xf71bb6(0x133)]};_0x11bbbe={..._0x11bbbe,..._0xe37e31};}const _0x23bfd5=defaultFee*_0x11bbbe[_0xf71bb6(0x16b)]*_0x11bbbe['price'];lastFees[_0xf71bb6(0xdf)]['length']===0x14&&lastFees[_0xf71bb6(0xdf)][_0xf71bb6(0x1c9)](),lastFees[_0xf71bb6(0xdf)][_0xf71bb6(0x177)](_0x23bfd5),lastFees[_0xf71bb6(0x15d)]=Math[_0xf71bb6(0x249)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x39c893){const _0x50be1a=_0x106de7;logger[_0x50be1a(0x1d9)](_0x50be1a(0x1ee)+_0x39c893[_0x50be1a(0x1cb)]+_0x50be1a(0x239)+_0x39c893[_0x50be1a(0x1c5)]+_0x50be1a(0x239)+_0x39c893['filled']+'\x20/\x20'+_0x39c893[_0x50be1a(0x10a)]+_0x50be1a(0x239)+_0x39c893['id']);let _0x490b5d=_0x39c893['status'],_0x42ea5d=![];currentCoins[_0x50be1a(0x117)](_0x1a744f=>{const _0x13d4dc=_0x50be1a;_0x1a744f[_0x13d4dc(0x1cb)]==_0x39c893[_0x13d4dc(0x1cb)]&&(_0x42ea5d=!![]);});if(!_0x42ea5d)return;const _0xe4de18=currentCoins[_0x50be1a(0x1a9)](_0x31d896=>_0x31d896[_0x50be1a(0x1cb)]==_0x39c893[_0x50be1a(0x1cb)]),_0x335981=_0x28677f=>{if(_0xe4de18)_0xe4de18['orderstatus']=_0x28677f;};if(_0x490b5d==_0x50be1a(0x185))_0x335981('open');else{if(_0x490b5d=='canceled'){_0x335981('canceled');const _0x39f243=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x39f243,await getOpenOrders(),handleOpenOrders();}else{if(_0x490b5d==_0x50be1a(0x18f)){let _0x41f5b4=![];if(lastOrders)for(const _0x4b2fdf of lastOrders){const _0x163abc=0xc8,_0x13aa7f=0x1388;let _0x506587=0x0;while(!_0x4b2fdf[_0x50be1a(0x1f7)]&&_0x506587*_0x163abc<_0x13aa7f){_0x506587++,await sleep(_0x163abc);}if(_0x506587>0x0)logger[_0x50be1a(0x1d9)](_0x50be1a(0x156)+_0x506587*_0x163abc/0x3e8+_0x50be1a(0x129));if(_0x4b2fdf[_0x50be1a(0x1f7)]==_0x39c893['id']){logger[_0x50be1a(0x1d9)](_0x50be1a(0x22d)+_0x39c893['id']),_0x41f5b4=!![];if(_0x4b2fdf[_0x50be1a(0x16b)]==0x0){logger[_0x50be1a(0x1d9)](_0x50be1a(0x255)+_0x39c893['id']);if(_0x39c893[_0x50be1a(0x24d)])_0x4b2fdf[_0x50be1a(0x133)]=_0x39c893[_0x50be1a(0x24d)];else{if(_0x39c893[_0x50be1a(0x133)])_0x4b2fdf[_0x50be1a(0x133)]=_0x39c893['price'];else{}}_0x4b2fdf[_0x50be1a(0x16b)]=_0x39c893[_0x50be1a(0x16b)],updateHighestFee(_0x4b2fdf),_0x335981(_0x50be1a(0x16b)),await validateOrders();if(lockOrders==ORDERS[_0x50be1a(0x18c)]){const _0x325ecc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x325ecc;}_0x4b2fdf['fee']={'currency':_0x39c893[_0x50be1a(0x252)]?_0x39c893['fee']['currency']:null,'cost':_0x39c893[_0x50be1a(0x252)]?_0x39c893[_0x50be1a(0x252)][_0x50be1a(0x218)]:0x0},await updateCoinResults(_0x4b2fdf);}}}if(!_0x41f5b4){logger[_0x50be1a(0x1d9)](_0x50be1a(0xf1)+_0x39c893['id']),_0x335981(_0x50be1a(0x16b));const _0x15ad4b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x15ad4b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1cb10d=JSON[_0x50be1a(0x164)](lastBalances[_0x50be1a(0x184)]);const _0x266b9e=_0x1cb10d['find'](_0x5da4d3=>_0x5da4d3[_0x50be1a(0x1cb)]==_0x39c893[_0x50be1a(0x1cb)]);if(_0x266b9e){if(_0x490b5d==_0x50be1a(0x185))_0x266b9e[_0x50be1a(0x275)]=_0x266b9e['orderstatus']==_0x50be1a(0x16b)?_0x50be1a(0x16b):'open';else{if(_0x490b5d==_0x50be1a(0xe2))_0x266b9e[_0x50be1a(0x275)]=_0x266b9e[_0x50be1a(0x275)]==_0x50be1a(0x16b)?_0x50be1a(0x16b):'canceled';else _0x490b5d==_0x50be1a(0x18f)&&(_0x266b9e[_0x50be1a(0x275)]=_0x50be1a(0x16b));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x1cb10d)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x200525=![];currentCoins['forEach'](_0x5bd08e=>{const _0x1cbc5c=_0x5b09;_0x200525=allOpenOrders[_0x1cbc5c(0x1a9)](_0x5df7fd=>_0x5df7fd['symbol']==_0x5bd08e[_0x1cbc5c(0x1cb)]),_0x5bd08e[_0x1cbc5c(0x275)]=_0x200525?_0x1cbc5c(0x185):_0x1cbc5c(0xff);});}async function getCoins(_0x1c91d2=0x0,_0x414723=!![],_0x258f90=config[_0x106de7(0x1dc)]){const _0x5d7e2f=_0x106de7;let _0x18e993,_0x39924d=[],_0x4d8d01=[],_0x579685=[];if(_0x1c91d2)await sleep(_0x1c91d2);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x18e993=await exchange[_0x5d7e2f(0xe4)](),mybalances=_0x18e993[_0x5d7e2f(0x1a6)];for(const [_0x148719,_0x85596f]of Object[_0x5d7e2f(0x15a)](mybalances)){_0x579685[_0x5d7e2f(0x177)](_0x148719);}config[_0x5d7e2f(0x184)][_0x5d7e2f(0x117)](_0x146414=>{const _0x2ceac7=_0x5d7e2f;!_0x579685[_0x2ceac7(0x26b)](_0x146414[_0x2ceac7(0x1a3)])&&(mybalances[_0x146414[_0x2ceac7(0x1a3)]]=0x0);});if(_0x258f90=='')for(const [_0x2d9207,_0x4a761c]of Object['entries'](mybalances)){_0x4a761c!=0x0&&_0x39924d[_0x5d7e2f(0x177)]({'coin':_0x2d9207});}else{let _0x55acf8=![];for(const [_0x289090,_0x28c5c5]of Object['entries'](mybalances)){const _0x8849bd=config[_0x5d7e2f(0x184)][_0x5d7e2f(0x1a9)](_0x5d64c0=>_0x5d64c0[_0x5d7e2f(0x1a3)]==_0x289090),_0x3402ef=_0x289090+'/'+_0x258f90,_0x2b6a9c=_0x258f90+'/'+_0x289090,_0x4e7b44=currentCoins['find'](_0x4d617f=>_0x4d617f[_0x5d7e2f(0x1a3)]==_0x289090);_0x55acf8=![];if((_0x28c5c5!=0x0||_0x8849bd)&&(allSymbols[_0x5d7e2f(0x26b)](_0x3402ef)||_0x289090==_0x258f90))_0x39924d[_0x5d7e2f(0x177)]({'coin':_0x289090,'symbol':_0x3402ef,'reverse':![],'number':Math[_0x5d7e2f(0x249)](_0x28c5c5+(_0x8849bd&&_0x8849bd['offset']||0x0),0x0),'orderstatus':_0x4e7b44?_0x4e7b44[_0x5d7e2f(0x275)]:_0x5d7e2f(0xff)});else{if((_0x28c5c5!=0x0||_0x8849bd)&&allSymbols['includes'](_0x2b6a9c))_0x39924d['push']({'coin':_0x289090,'symbol':_0x2b6a9c,'reverse':!![],'number':Math[_0x5d7e2f(0x249)](_0x28c5c5+(_0x8849bd&&_0x8849bd[_0x5d7e2f(0x1bd)]||0x0),0x0),'orderstatus':_0x4e7b44?_0x4e7b44[_0x5d7e2f(0x275)]:_0x5d7e2f(0xff)});else _0x8849bd&&_0x39924d[_0x5d7e2f(0x177)]({'coin':_0x8849bd[_0x5d7e2f(0x1a3)],'symbol':_0x8849bd[_0x5d7e2f(0x1cb)],'reverse':_0x8849bd[_0x5d7e2f(0x12d)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x1e8ca6){if(!_0x414723)handleErrorNoStop(_0x1e8ca6,'getCoins()');else await handleError(_0x1e8ca6,_0x5d7e2f(0x166));}return _0x4d8d01=cloneDeep(_0x39924d),_0x39924d=_0x39924d[_0x5d7e2f(0x175)](_0x1d9662=>{const _0x7ff6d5=_0x5d7e2f,_0x12299a=config['portfolio'][_0x7ff6d5(0x1a9)](_0x37282d=>_0x37282d[_0x7ff6d5(0x1a3)]==_0x1d9662[_0x7ff6d5(0x1a3)]);return _0x12299a&&!_0x12299a[_0x7ff6d5(0x160)];}),[_0x39924d,_0x4d8d01];}async function getCoinNumber(_0x14d6d5){const _0x1ef5de=_0x106de7;let _0x41de19;try{const _0x24b60f=await exchange[_0x1ef5de(0xe4)]();_0x41de19=_0x24b60f['total'][_0x14d6d5];}catch(_0x55d39d){await handleError(_0x55d39d,_0x1ef5de(0x1f5));}return _0x41de19;}async function getOpenOrders(){const _0x333100=_0x106de7;let _0x1471db;allOpenOrders=[];try{for(const _0x506294 of config['portfolio']){!_0x506294[_0x333100(0x160)]&&_0x506294[_0x333100(0x1a3)]!=config[_0x333100(0x1dc)]&&(_0x1471db=await exchange[_0x333100(0x19c)](_0x506294[_0x333100(0x1cb)]),_0x1471db[_0x333100(0x248)]>0x0&&allOpenOrders[_0x333100(0x177)](_0x1471db[0x0]));}}catch(_0x297e44){await handleError(_0x297e44,_0x333100(0x10d));}}async function handleOpenOrders(_0x3fcbfa=0x0){const _0x71b87=_0x106de7;allOpenOrders[_0x71b87(0x248)]==0x0&&lockOrders==ORDERS[_0x71b87(0x18c)]&&allOrdersPlaced&&(_0x3fcbfa==0x0?(logger[_0x71b87(0x1d9)](_0x71b87(0x1b7)),_0x3fcbfa++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x71b87(0x1d9)](_0x71b87(0x1f2)),validateOrders(_0x71b87(0x1e4))));}async function testAPI(_0x1fe403){const _0x422966=_0x106de7,_0x81cb0e=ccxt[_0x422966(0x1e0)][_0x1fe403[_0x422966(0x10c)]['toLowerCase']()],_0x49d075=new _0x81cb0e({'apiKey':_0x1fe403[_0x422966(0x271)],'secret':_0x1fe403[_0x422966(0x100)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x422966(0x265)}});if(_0x1fe403[_0x422966(0x11a)])_0x49d075[_0x422966(0x24c)]=_0x1fe403[_0x422966(0x11a)];try{await _0x49d075[_0x422966(0x1b1)]();}catch(_0x5c2ac8){throw _0x5c2ac8;}}function cloneDeep(_0x4ea150){const _0x2fc351=_0x106de7;return JSON[_0x2fc351(0x164)](JSON['stringify'](_0x4ea150));}async function getPortfolio(_0x59d5b5){const _0x36bbce=_0x106de7;let _0x48d524=[],_0x387ddb=[],_0xf8e1d7=[],_0x10fac3;if(_0x59d5b5[_0x36bbce(0x271)]!==_0x36bbce(0x1f4)||_0x59d5b5[_0x36bbce(0x100)]!==_0x36bbce(0x1f4)||_0x59d5b5['apiPassword']&&_0x59d5b5[_0x36bbce(0x11a)]!==_0x36bbce(0x1f4)){if(config[_0x36bbce(0x10c)]){if(_0x59d5b5[_0x36bbce(0x271)]==_0x36bbce(0x1f4))_0x59d5b5['apiKey']=config['apiKey'];if(_0x59d5b5[_0x36bbce(0x100)]==_0x36bbce(0x1f4))_0x59d5b5[_0x36bbce(0x100)]=config['apiSecret'];if(_0x59d5b5[_0x36bbce(0x11a)]==_0x36bbce(0x1f4))_0x59d5b5[_0x36bbce(0x11a)]=config[_0x36bbce(0x11a)];try{await testAPI(_0x59d5b5);}catch(_0x10e4b4){if(_0x10e4b4[_0x36bbce(0x214)]()[_0x36bbce(0x26b)](_0x36bbce(0xe9))){logger[_0x36bbce(0x1d9)](_0x36bbce(0x1d5)),proxyEmit(_0x36bbce(0x184),![]);return;}else{handleError(_0x10e4b4,_0x36bbce(0x1ed));return;}}}await initExchange(_0x59d5b5[_0x36bbce(0x10c)],_0x59d5b5[_0x36bbce(0x271)],_0x59d5b5[_0x36bbce(0x100)],_0x59d5b5[_0x36bbce(0x11a)]);try{await loadSymbols();}catch(_0x5e4fdc){if(_0x5e4fdc[_0x36bbce(0x214)]()[_0x36bbce(0x26b)](_0x36bbce(0xe9))){proxyEmit('portfolio',![]);return;}else{handleError(_0x5e4fdc,'getPortfolio(1)');return;}}const _0x1f9f6a=await getCoins(0x0,![],_0x59d5b5[_0x36bbce(0x1dc)]);_0xf8e1d7=cloneDeep(_0x1f9f6a[0x1]);}else _0xf8e1d7=cloneDeep(currentCoinsAll);if(_0x59d5b5[_0x36bbce(0x1dc)]=='')proxyEmit(_0x36bbce(0x184),_0xf8e1d7);else{_0xf8e1d7[_0x36bbce(0x117)](_0x1cddc1=>{const _0x3ce663=_0x36bbce;if(_0x1cddc1['coin']!=_0x59d5b5[_0x3ce663(0x1dc)]&&allSymbols['includes'](_0x1cddc1['symbol']))_0x48d524[_0x3ce663(0x177)](_0x1cddc1['symbol']);});if(_0x48d524[_0x36bbce(0x248)]==0x0)logHistory(_0x36bbce(0x1b9),_0x36bbce(0x1eb));else{try{_0x387ddb=await getTickers(_0x48d524);}catch(_0x2f1128){if(_0x2f1128[_0x36bbce(0x214)]()[_0x36bbce(0x26b)](_0x36bbce(0xe9))){proxyEmit('portfolio',![]);return;}else handleError(_0x2f1128,_0x36bbce(0xf5));}_0xf8e1d7[_0x36bbce(0x117)](_0x501a1d=>{const _0x5049bf=_0x36bbce;_0x501a1d[_0x5049bf(0x1a3)]!=_0x59d5b5[_0x5049bf(0x1dc)]?_0x387ddb[_0x501a1d[_0x5049bf(0x1cb)]]?_0x10fac3=_0x501a1d[_0x5049bf(0x12d)]?0x1/_0x387ddb[_0x501a1d[_0x5049bf(0x1cb)]]['last']:_0x387ddb[_0x501a1d['symbol']][_0x5049bf(0x150)]:_0x10fac3=0x0:_0x10fac3=0x1,_0x501a1d[_0x5049bf(0x133)]=formatResult(_0x10fac3,0x8);}),proxyEmit(_0x36bbce(0x184),_0xf8e1d7);}}}function truncateTradeAmount(_0x4c95a2,_0x3f6ef3){const _0x4c1d4e=_0x106de7;let _0x11c9f2=0x0;try{_0x11c9f2=exchange[_0x4c1d4e(0x264)](_0x4c95a2,_0x3f6ef3);}catch(_0x26d41a){}return _0x11c9f2;}function checkMinimums(_0x462c5b){const _0x2ec83d=_0x106de7;let _0x4fb120=!![];const _0x304d6e=!_0x462c5b['reverse']?markets[_0x462c5b['symbol']][_0x2ec83d(0x1be)][_0x2ec83d(0x10a)][_0x2ec83d(0x15b)]:markets[_0x462c5b['symbol']][_0x2ec83d(0x1be)][_0x2ec83d(0x218)][_0x2ec83d(0x15b)],_0x36b6c1=!_0x462c5b[_0x2ec83d(0x12d)]?markets[_0x462c5b[_0x2ec83d(0x1cb)]][_0x2ec83d(0x1be)][_0x2ec83d(0x218)][_0x2ec83d(0x15b)]:markets[_0x462c5b[_0x2ec83d(0x1cb)]][_0x2ec83d(0x1be)][_0x2ec83d(0x10a)][_0x2ec83d(0x15b)],_0x389064=truncateTradeAmount(_0x462c5b['symbol'],_0x462c5b[_0x2ec83d(0x21b)]);_0x462c5b[_0x2ec83d(0x21b)]=_0x389064;if(Math[_0x2ec83d(0x136)](_0x389064)<_0x304d6e)_0x4fb120=![];if(Math[_0x2ec83d(0x136)](_0x389064)*_0x462c5b['last']<_0x36b6c1)_0x4fb120=![];if(_0x462c5b[_0x2ec83d(0x155)]==_0x2ec83d(0x250)){let _0x5ba2d0=config[_0x2ec83d(0x184)][_0x2ec83d(0x1a9)](_0x8ed3c3=>_0x8ed3c3[_0x2ec83d(0x1a3)]==_0x462c5b['coin']);if(_0x5ba2d0[_0x2ec83d(0x1bd)]>0x0){if(Math['abs'](_0x389064)>_0x462c5b[_0x2ec83d(0x1da)]-_0x5ba2d0['offset'])_0x4fb120=![];}else{if(Math[_0x2ec83d(0x136)](_0x389064)>_0x462c5b['number'])_0x4fb120=![];}}if(_0x462c5b[_0x2ec83d(0x155)]==_0x2ec83d(0x1f0)){let _0x2edab3=config[_0x2ec83d(0x184)][_0x2ec83d(0x1a9)](_0x63f3ab=>_0x63f3ab[_0x2ec83d(0x1a3)]==config[_0x2ec83d(0x1dc)]),_0x29d5df=currentCoins[_0x2ec83d(0x1a9)](_0x47f854=>_0x47f854[_0x2ec83d(0x1a3)]==config[_0x2ec83d(0x1dc)]);if(_0x2edab3[_0x2ec83d(0x1bd)]>0x0){if(Math['abs'](_0x389064)*_0x462c5b[_0x2ec83d(0x150)]>_0x29d5df[_0x2ec83d(0x1da)]-_0x2edab3[_0x2ec83d(0x1bd)])_0x4fb120=![];}else{if(Math[_0x2ec83d(0x136)](_0x389064)*_0x462c5b[_0x2ec83d(0x150)]>_0x29d5df['number'])_0x4fb120=![];}}return _0x4fb120;}async function getBalances(_0x462358=!![]){const _0x4792e7=_0x106de7;let _0xf7fb55=0x0,_0x26eb02;const _0x127dee=config[_0x4792e7(0x1d6)];if(config[_0x4792e7(0x1a2)]&&config[_0x4792e7(0xfd)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x584c44=>{const _0x140109=_0x4792e7;if(_0x584c44['coin']!=config[_0x140109(0x1dc)]){let _0x3da68f=global[_0x140109(0x25f)][noslash(_0x584c44[_0x140109(0x1cb)])];_0x26eb02=_0x584c44[_0x140109(0x12d)]?0x1/_0x3da68f:_0x3da68f;}else _0x26eb02=0x1;let _0x53e684=_0x584c44[_0x140109(0x1da)]*_0x26eb02;_0xf7fb55+=_0x53e684,_0x584c44[_0x140109(0x150)]=formatResult(Number(_0x26eb02),0x8),_0x584c44[_0x140109(0x23b)]=_0x53e684;}),currentCoins[_0x4792e7(0x117)](_0x106d34=>{const _0x2bcdb5=_0x4792e7;let _0x3687b3=config[_0x2bcdb5(0x184)]['find'](_0x2aadb9=>_0x2aadb9[_0x2bcdb5(0x1a3)]==_0x106d34['coin']),_0x53b9d0=Number(_0x3687b3[_0x2bcdb5(0x11d)]),_0x220e40=_0x106d34['value']/_0xf7fb55*0x64,_0x43aa8e=_0x53b9d0*_0xf7fb55/0x64/_0x106d34[_0x2bcdb5(0x150)]-_0x106d34[_0x2bcdb5(0x1da)];_0x106d34[_0x2bcdb5(0x11d)]=formatResult(_0x220e40,0x3),_0x106d34[_0x2bcdb5(0x1bc)]=formatResult(_0x53b9d0,0x3),_0x106d34[_0x2bcdb5(0x21b)]=formatResult(_0x43aa8e,0x8),_0x106d34[_0x2bcdb5(0x155)]='',_0x106d34[_0x2bcdb5(0x1a8)]=![];if(_0x106d34['coin']!=config[_0x2bcdb5(0x1dc)]){if(_0x106d34[_0x2bcdb5(0x11d)]>_0x53b9d0)_0x106d34[_0x2bcdb5(0x155)]=_0x2bcdb5(0x250),_0x106d34[_0x2bcdb5(0x1a8)]=checkMinimums(_0x106d34);else _0x106d34[_0x2bcdb5(0x11d)]<_0x53b9d0&&(_0x106d34[_0x2bcdb5(0x155)]=_0x2bcdb5(0x1f0),_0x106d34['valid']=checkMinimums(_0x106d34));}_0x106d34[_0x2bcdb5(0x1de)]=_0x106d34[_0x2bcdb5(0x11d)]/_0x106d34['target']-0x1;if(_0x106d34[_0x2bcdb5(0x275)]==_0x2bcdb5(0x16b)||_0x106d34[_0x2bcdb5(0x275)]==_0x2bcdb5(0xe2))_0x106d34[_0x2bcdb5(0x275)]='none';}),currentCoins[_0x4792e7(0x274)]((_0x3b37a7,_0x47d125)=>_0x3b37a7[_0x4792e7(0x1de)]<_0x47d125['delta']?0x1:_0x47d125[_0x4792e7(0x1de)]<_0x3b37a7[_0x4792e7(0x1de)]?-0x1:0x0);const _0x4c7fa=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4c7fa[_0x4792e7(0x1d2)],'usd':_0x4c7fa[_0x4792e7(0x1c2)],'portfolio':JSON[_0x4792e7(0x157)](currentCoins),'threshold':_0x127dee},proxyEmit(_0x4792e7(0x1e2),{'serverversion':serverversion,'balances':lastBalances});if(_0x462358){if(config[_0x4792e7(0x1a2)])headlessMode({'portfolio':currentCoins,'threshold':_0x127dee});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x127dee});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x22ce93=getNormalizedPerformance();getStartingBalances(_0x22ce93),emitPerformance(_0x22ce93);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4f71cc=getNormalizedPerformance();emitPerformance(_0x4f71cc),getStartingBalances(_0x4f71cc),logger[_0x4792e7(0x1d9)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3de2d9=_0x106de7;if(!lastBalances)return;let _0x27ab5a=[],_0x4c5b02,_0x10a497=JSON['parse'](lastBalances[_0x3de2d9(0x184)]);_0x10a497[_0x3de2d9(0x274)]((_0x40d2b2,_0x3d8146)=>_0x40d2b2[_0x3de2d9(0x1a3)]>_0x3d8146[_0x3de2d9(0x1a3)]?0x1:_0x3d8146[_0x3de2d9(0x1a3)]>_0x40d2b2[_0x3de2d9(0x1a3)]?-0x1:0x0),_0x10a497[_0x3de2d9(0x117)](_0x5d3b8a=>{const _0x2a479c=_0x3de2d9;let _0x2e443b={'coin':_0x5d3b8a['coin'],'number':_0x5d3b8a[_0x2a479c(0x1da)],'price':_0x5d3b8a[_0x2a479c(0x150)]};_0x27ab5a[_0x2a479c(0x177)](_0x2e443b);});const _0x279e1c=await getFiat();_0x4c5b02={'date':lastBalances['time'][_0x3de2d9(0x1b0)]('\x20')[0x0],'eur':_0x279e1c['eur'],'usd':_0x279e1c[_0x3de2d9(0x1c2)],'coins':_0x27ab5a};let _0x4c941a=dbPerformance[_0x3de2d9(0x19a)]('data')[_0x3de2d9(0x1a9)]({'date':_0x4c5b02['date']})['value']();_0x4c941a?_0x4c5b02['date']!=config[_0x3de2d9(0xec)]&&dbPerformance[_0x3de2d9(0x19a)](_0x3de2d9(0x1c8))[_0x3de2d9(0x1a9)]({'date':_0x4c5b02[_0x3de2d9(0x181)]})['assign'](_0x4c5b02)[_0x3de2d9(0x257)]():dbPerformance[_0x3de2d9(0x19a)](_0x3de2d9(0x1c8))[_0x3de2d9(0x177)](_0x4c5b02)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x6e870d=_0x106de7;let _0x134bc=[];if(dbPerformance[_0x6e870d(0x17d)](_0x6e870d(0x1c8))[_0x6e870d(0x23b)]()){let _0x6aa711=dbPerformance[_0x6e870d(0x19a)](_0x6e870d(0x1c8))['cloneDeep']()[_0x6e870d(0x175)](_0x4a09ef=>{const _0x19be2d=_0x6e870d;if(_0x4a09ef[_0x19be2d(0x192)][_0x19be2d(0x248)]==0x0)return![];else return!![];})[_0x6e870d(0x1e5)](_0x6e870d(0x181))[_0x6e870d(0x23b)](),_0x570dc4=[...config[_0x6e870d(0x141)]];_0x570dc4[_0x6e870d(0x274)]((_0x109ebe,_0x2b599c)=>_0x109ebe[_0x6e870d(0x181)]>_0x2b599c['date']?-0x1:_0x2b599c['date']>_0x109ebe[_0x6e870d(0x181)]?0x1:0x0);let _0x5c5518=0x1,_0x3a1cdb=[],_0x6cf10a=0x0;_0x6aa711[_0x6e870d(0x18e)]()['reverse']()[_0x6e870d(0x117)]((_0x5d18a6,_0x58163a)=>{const _0x3c6bbf=_0x6e870d;if(_0x570dc4[_0x6cf10a]){if(_0x6aa711[_0x6aa711[_0x3c6bbf(0x248)]-_0x58163a]&&_0x570dc4[_0x6cf10a][_0x3c6bbf(0x181)]==_0x6aa711[_0x6aa711[_0x3c6bbf(0x248)]-_0x58163a][_0x3c6bbf(0x181)]){if(_0x58163a<_0x6aa711[_0x3c6bbf(0x248)]){let _0x118b8b=0x0,_0x439537=0x0;_0x6aa711[_0x6aa711['length']-_0x58163a]['coins'][_0x3c6bbf(0x117)](_0x56df71=>{const _0x1de32d=_0x3c6bbf;_0x439537+=_0x56df71[_0x1de32d(0x1da)]*_0x56df71[_0x1de32d(0x133)];}),_0x570dc4[_0x6cf10a]['changes'][_0x3c6bbf(0x117)](_0x36e131=>{const _0x390379=_0x3c6bbf;_0x118b8b+=_0x36e131['number']*_0x36e131[_0x390379(0x133)];}),_0x5c5518*=_0x118b8b/(_0x439537-_0x118b8b)+0x1;}_0x6cf10a++;}}let _0x3e298e=0x0;_0x5d18a6[_0x3c6bbf(0x192)][_0x3c6bbf(0x117)](_0x32e9a9=>{const _0x4d76c6=_0x3c6bbf;_0x3e298e+=_0x32e9a9[_0x4d76c6(0x1da)]*_0x32e9a9[_0x4d76c6(0x133)];}),_0x3a1cdb[_0x6aa711['length']-_0x58163a-0x1]=_0x3e298e*(_0x5c5518-0x1);});let _0x27cd92=[];_0x570dc4=[...config[_0x6e870d(0x141)]]||[];let _0x1e9f86=0x0;_0x6cf10a=0x0,_0x6aa711['forEach']((_0xb75bcd,_0x123693)=>{const _0x1eca16=_0x6e870d;if(_0x570dc4[_0x6cf10a]){const _0x5281b8=fns['parse'](_0x570dc4[_0x6cf10a][_0x1eca16(0x181)],_0x1eca16(0x237),new Date()),_0x3573ba=fns[_0x1eca16(0x164)](_0xb75bcd[_0x1eca16(0x181)],_0x1eca16(0x237),new Date());if(fns[_0x1eca16(0x21a)](_0x5281b8,_0x3573ba)){let _0xa6a39d=0x0;_0x570dc4[_0x6cf10a][_0x1eca16(0x149)]['forEach'](_0x4dbfdd=>{const _0x454e89=_0x1eca16;!_0x27cd92[_0x4dbfdd[_0x454e89(0x1a3)]]?_0x27cd92[_0x4dbfdd['coin']]=_0x4dbfdd[_0x454e89(0x1da)]:(_0xa6a39d=_0x27cd92[_0x4dbfdd[_0x454e89(0x1a3)]],_0x27cd92[_0x4dbfdd['coin']]+=_0x4dbfdd[_0x454e89(0x1da)]);const _0x4d2f3b=_0xb75bcd[_0x454e89(0x192)][_0x454e89(0x1a9)](_0x469f43=>_0x469f43['coin']==_0x4dbfdd[_0x454e89(0x1a3)]);(!_0x4d2f3b||_0x4d2f3b[_0x454e89(0x1da)]==0x0)&&(_0x1e9f86+=(-_0x4dbfdd[_0x454e89(0x1da)]-_0xa6a39d)*_0x4dbfdd[_0x454e89(0x133)]);}),_0x6cf10a++;}}_0xb75bcd[_0x1eca16(0x192)][_0x1eca16(0x117)]((_0x302af3,_0x1e2cea)=>{const _0x3a15f5=_0x1eca16;_0x27cd92[_0x302af3[_0x3a15f5(0x1a3)]]&&(_0x302af3[_0x3a15f5(0x13a)]=_0x27cd92[_0x302af3[_0x3a15f5(0x1a3)]]);}),_0x134bc[_0x1eca16(0x177)]({'date':_0xb75bcd[_0x1eca16(0x181)],'eur':_0xb75bcd[_0x1eca16(0x1d2)],'usd':_0xb75bcd['usd'],'offset':_0x3a1cdb[_0x123693],'netoffset':_0x1e9f86,'coins':_0xb75bcd['coins']});});}return _0x134bc;}function emitPerformance(_0x5b7452){const _0x50e680=_0x106de7;_0x5b7452['length']!==0x0?(proxyEmit(_0x50e680(0x229),_0x5b7452),lastPerformanceEmitted=getDate()):proxyEmit(_0x50e680(0x229),[]);}function getPerf(_0x135248,_0x1d3fb9){const _0x62ce76=_0x106de7;let _0xb08c33=0x0,_0x2cb31b=0x0,_0x341d36=0x0;_0x135248[_0x62ce76(0x192)][_0x62ce76(0x117)](_0x9a63b7=>{const _0x58fdf9=_0x62ce76;_0xb08c33+=_0x9a63b7[_0x58fdf9(0x1da)]*_0x9a63b7[_0x58fdf9(0x133)];});_0x1d3fb9&&(_0xb08c33+=_0x135248[_0x62ce76(0x1bd)]);if(config['basecoin']===_0x62ce76(0x12a)||config['basecoin']===_0x62ce76(0x268))_0x2cb31b=_0xb08c33*_0x135248[_0x62ce76(0x1d2)],_0x341d36=_0xb08c33*_0x135248[_0x62ce76(0x1c2)];else{if(usdBasecoins[_0x62ce76(0x26b)](config['basecoin']))_0x2cb31b=_0xb08c33*_0x135248[_0x62ce76(0x1d2)]/_0x135248[_0x62ce76(0x1c2)],_0x341d36=_0xb08c33;else config['basecoin']===_0x62ce76(0x19e)&&(_0x2cb31b=_0xb08c33,_0x341d36=_0xb08c33*_0x135248['usd']/_0x135248[_0x62ce76(0x1d2)]);}return[_0xb08c33,_0x2cb31b,_0x341d36];}function getKPIs(_0x490907,_0x5b1f05='EUR'){const _0x102b7b=_0x106de7,_0x3ae77b=config[_0x102b7b(0x1dc)],_0x55b79e=lastBalances,_0x1d6de0=currentCoins,_0x4a5a21=getNormalizedPerformance(),_0x2fdd74=_0x490907===_0x102b7b(0x1dc)?_0x3ae77b:_0x490907===_0x102b7b(0x148)||_0x490907==='net-fiat'?_0x5b1f05:_0x102b7b(0x101)+_0x3ae77b,_0x3034ab=_0x490907===_0x102b7b(0x14b)?_0x102b7b(0x1a7):_0x490907==='net-fiat'?_0x102b7b(0x1a7):_0x2fdd74+_0x102b7b(0x1ba),_0x585a05=_0x490907===_0x102b7b(0x14b)||_0x490907===_0x102b7b(0x120)?_0x102b7b(0x1a7):_0x2fdd74+_0x102b7b(0x169);let _0x2749ee=0x0;_0x1d6de0['forEach'](_0x5c0d1d=>{const _0xb71eb6=_0x102b7b;_0x2749ee+=_0x5c0d1d['number']*_0x5c0d1d[_0xb71eb6(0x150)];});if(_0x490907===_0x102b7b(0x148)||_0x490907===_0x102b7b(0x120)){if(_0x3ae77b==='BTC'||_0x3ae77b===_0x102b7b(0x268))_0x2749ee=_0x2749ee*(_0x5b1f05===_0x102b7b(0x19e)?_0x55b79e['eur']:_0x55b79e[_0x102b7b(0x1c2)]);else{if(usdBasecoins[_0x102b7b(0x26b)](_0x3ae77b))_0x2749ee=_0x2749ee*(_0x5b1f05===_0x102b7b(0x19e)?_0x55b79e[_0x102b7b(0x1d2)]/_0x55b79e[_0x102b7b(0x1c2)]:0x1);else _0x3ae77b===_0x102b7b(0x19e)&&(_0x2749ee=_0x2749ee*(_0x5b1f05===_0x102b7b(0x19e)?0x1:_0x55b79e[_0x102b7b(0x1c2)]/_0x55b79e['eur']));}}let _0x552542;if(_0x2749ee!==0x0){if(_0x490907==='basecoin')_0x552542=(_0x2749ee/startingBalances[_0x102b7b(0x1dc)]-0x1)*0x64;else{if(_0x5b1f05===_0x102b7b(0x19e))_0x552542=(_0x2749ee/startingBalances[_0x102b7b(0x1d2)]-0x1)*0x64;else _0x552542=(_0x2749ee/startingBalances[_0x102b7b(0x1c2)]-0x1)*0x64;}let _0x2f2efb=0x0;if(startingBalances[_0x102b7b(0x192)])_0x1d6de0['forEach'](_0x5651ae=>{const _0x471873=_0x102b7b;let _0x5b3af0=startingBalances[_0x471873(0x192)][_0x471873(0x1a9)](_0x3be17f=>_0x3be17f[_0x471873(0x1a3)]===_0x5651ae[_0x471873(0x1a3)]);if(_0x5b3af0&&_0x5b3af0['coin']&&_0x5651ae['number']!==0x0)_0x2f2efb+=_0x5b3af0[_0x471873(0x1da)]*_0x5651ae[_0x471873(0x150)];});let _0x507c32=0x0;if(_0x4a5a21[_0x102b7b(0x248)]!==0x0){let _0x7963f8=_0x4a5a21[_0x4a5a21['length']-0x1];_0x507c32=_0x7963f8[_0x102b7b(0x15c)];}_0x2f2efb-=_0x507c32;_0x490907==='net-basecoin'&&(_0x552542=(_0x2749ee-_0x2f2efb)/startingBalances[_0x102b7b(0x1dc)]*0x64,_0x2749ee=_0x2749ee-_0x2f2efb);if(_0x490907==='net-fiat'){let _0x5a10f6=_0x5b1f05===_0x102b7b(0x19e)?startingBalances[_0x102b7b(0x1d2)]:startingBalances[_0x102b7b(0x1c2)];if(_0x3ae77b===_0x102b7b(0x12a)||_0x3ae77b===_0x102b7b(0x268))_0x2f2efb=_0x5b1f05===_0x102b7b(0x19e)?_0x2f2efb*_0x55b79e[_0x102b7b(0x1d2)]:_0x2f2efb*_0x55b79e[_0x102b7b(0x1c2)];else{if(usdBasecoins['includes'](_0x3ae77b))_0x2f2efb=_0x5b1f05===_0x102b7b(0x19e)?_0x2f2efb*_0x55b79e[_0x102b7b(0x1d2)]/_0x55b79e['usd']:_0x2f2efb;else _0x3ae77b===_0x102b7b(0x19e)&&(_0x2f2efb=_0x5b1f05==='EUR'?_0x2f2efb:_0x2f2efb*_0x55b79e['usd']/_0x55b79e[_0x102b7b(0x1d2)]);}_0x552542=(_0x2749ee-_0x2f2efb)/_0x5a10f6*0x64,_0x2749ee=_0x2749ee-_0x2f2efb;}if(_0x552542){if(_0x552542<0x64)_0x552542=_0x552542['toFixed'](0x2);else{if(_0x552542<0x3e8)_0x552542=_0x552542[_0x102b7b(0x227)](0x1);else _0x552542=_0x552542[_0x102b7b(0x227)](0x0);}}else _0x552542=Number('0')[_0x102b7b(0x227)](0x2);if(_0x2749ee){if(Math[_0x102b7b(0x136)](_0x2749ee)<0.000001)_0x2749ee=_0x2749ee[_0x102b7b(0x227)](0x2);else{if(Math[_0x102b7b(0x136)](_0x2749ee)<0.1)_0x2749ee=_0x2749ee[_0x102b7b(0x227)](0x6);else{if(Math['abs'](_0x2749ee)<0x1)_0x2749ee=_0x2749ee[_0x102b7b(0x227)](0x5);else{if(Math[_0x102b7b(0x136)](_0x2749ee)<0xa)_0x2749ee=_0x2749ee[_0x102b7b(0x227)](0x4);else{if(Math['abs'](_0x2749ee)<0x64)_0x2749ee=_0x2749ee['toFixed'](0x3);else{if(Math['abs'](_0x2749ee)<0x3e8)_0x2749ee=_0x2749ee[_0x102b7b(0x227)](0x2);else _0x2749ee=_0x2749ee['toFixed'](0x2);}}}}}}else _0x2749ee=Number('0')[_0x102b7b(0x227)](0x2);}else _0x552542=Number('0')[_0x102b7b(0x227)](0x2);return{'value':_0x2749ee,'change':_0x552542,'leftTxt':_0x3034ab,'rightTxt':_0x585a05};}async function getStartingBalances(_0x1c89cd,_0x5ea7d2=!![]){const _0x63e74b=_0x106de7;if(_0x1c89cd[_0x63e74b(0x248)]!==0x0){const [_0x240eb0,_0xcf4ff1,_0x52b7ca]=getPerf(_0x1c89cd[0x0],!![]);let _0x13fcd7=[];config['portfolio'][_0x63e74b(0x117)](_0x18ba1d=>{const _0x2931d3=_0x63e74b;let _0xc662e2=0x0,_0x23399b;config[_0x2931d3(0x141)][_0x2931d3(0x117)](_0x7a0edd=>{const _0x30d1a2=_0x2931d3;let _0x215bf3=_0x7a0edd[_0x30d1a2(0x149)][_0x30d1a2(0x1a9)](_0x105aad=>_0x105aad['coin']==_0x18ba1d[_0x30d1a2(0x1a3)]);if(_0x215bf3){_0xc662e2+=_0x215bf3[_0x30d1a2(0x1da)];if(!_0x23399b)_0x23399b=_0x215bf3[_0x30d1a2(0x133)];}}),_0x13fcd7[_0x2931d3(0x177)]({'coin':_0x18ba1d['coin'],'number':_0xc662e2,'initialprice':_0x23399b});});const _0x76517f={'basecoin':_0x240eb0,'eur':_0xcf4ff1,'usd':_0x52b7ca,'coins':_0x13fcd7};if(_0x5ea7d2)proxyEmit(_0x63e74b(0x21c),_0x76517f);startingBalances=_0x76517f;}}function headlessMode(_0x37a373){const _0x550e5e=_0x106de7;let _0x4de6c5=_0x37a373[_0x550e5e(0x184)],_0x2fb3ea=_0x37a373[_0x550e5e(0x1d6)],_0x4bc527=[];for(let _0x185135 of _0x4de6c5){if(_0x185135[_0x550e5e(0x1a3)]!=config[_0x550e5e(0x1dc)]){if(_0x185135['delta']>=_0x2fb3ea/0x64){if(_0x185135[_0x550e5e(0x1a8)])_0x4bc527[_0x550e5e(0x177)](_0x185135);}else{if(_0x185135[_0x550e5e(0x1de)]<=-_0x2fb3ea/0x64){if(_0x185135['valid'])_0x4bc527['push'](_0x185135);}}}}_0x4bc527[_0x550e5e(0x248)]>0x0&&(lockOrders==ORDERS[_0x550e5e(0x245)]&&!coolingDown&&_0x4bc527[_0x550e5e(0x117)](_0x6e38ff=>{const _0x2de053=_0x550e5e;logger[_0x2de053(0x1d9)]('Trigger:\x20'+_0x6e38ff[_0x2de053(0x1a3)]+'\x20'+_0x6e38ff['number']+'\x20'+_0x6e38ff['last']+'\x20'+_0x6e38ff[_0x2de053(0x11d)]+'%\x20'+_0x6e38ff[_0x2de053(0x1bc)]+'%\x20'+(0x64*_0x6e38ff[_0x2de053(0x1de)])['toFixed'](0x2)+_0x2de053(0x13b)+_0x2fb3ea['toFixed'](0x2)+'%)');}),placeOrder(_0x4bc527));}function notifyBalance(_0x1a2dd2){const _0x577f98=_0x106de7;let _0x6ed180=_0x1a2dd2[_0x577f98(0x184)],_0x2a73b8=_0x1a2dd2[_0x577f98(0x1d6)],_0x37e4b4=[];for(let _0x13614a of _0x6ed180){if(_0x13614a[_0x577f98(0x1a3)]!=config[_0x577f98(0x1dc)]){if(_0x13614a['delta']>=_0x2a73b8/0x64){if(_0x13614a[_0x577f98(0x1a8)])_0x37e4b4['push'](_0x13614a);}else{if(_0x13614a[_0x577f98(0x1de)]<=-_0x2a73b8/0x64){if(_0x13614a[_0x577f98(0x1a8)])_0x37e4b4['push'](_0x13614a);}}}}if(_0x37e4b4[_0x577f98(0x248)]>0x0){let _0x55fb32=_0x37e4b4[_0x577f98(0x21f)](_0xe33da3=>_0xe33da3[_0x577f98(0x1a3)]);_0x55fb32['sort']();let _0x2b3dab=_0x55fb32['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x577f98(0x1e1),_0x577f98(0x1c0));lastCoinsToBalance=_0x2b3dab;}}function symbolToCoin(_0x1ee592){const _0x432fca=_0x106de7;let _0x10065b;if(_0x1ee592[_0x432fca(0x26b)]('/'+config[_0x432fca(0x1dc)]))_0x10065b=_0x1ee592['replace']('/'+config['basecoin'],'');if(_0x1ee592[_0x432fca(0x26b)](config['basecoin']+'/'))_0x10065b=_0x1ee592[_0x432fca(0x123)](config[_0x432fca(0x1dc)]+'/','');return _0x10065b;}async function unlockOrders(){const _0x3fe847=_0x106de7;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x3fe847(0x1d9)](_0x3fe847(0x17f)),lockOrders=ORDERS[_0x3fe847(0x14d)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x23ade4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x23ade4,validateOrdersState=_0x3fe847(0x13a),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x3fe847(0x1d9)](_0x3fe847(0x272));}}async function validateOrders(_0x565ba6){const _0x4557fd=_0x106de7;if(_0x565ba6)validateOrdersState=_0x565ba6;logger[_0x4557fd(0x1d9)](_0x4557fd(0x105)+validateOrdersState+_0x4557fd(0x182)+(lockOrders==0x1?_0x4557fd(0x22b):lockOrders==0x2?_0x4557fd(0x197):_0x4557fd(0x118)));let _0x1a2017=[],_0x1ae5ab=config['ordertype']==_0x4557fd(0x1fc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x4557fd(0x1d9)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x4557fd(0x117)](_0x3d1506=>{const _0x145e12=_0x4557fd;let _0x5a2b18=![];_0x3d1506[_0x145e12(0x16b)]>0x0&&(_0x5a2b18=!![]),_0x1a2017['push'](_0x5a2b18),_0x5a2b18&&config['ordertype']!='market'&&logHistory('order','Order\x20filled:\x20'+_0x3d1506[_0x145e12(0x1cb)]+'\x20'+_0x3d1506[_0x145e12(0x155)]+'\x20#'+formatResult(_0x3d1506['filled'],0x8)+'\x20@'+formatResult(_0x3d1506['price'],0x8));}),_0x1a2017[_0x4557fd(0x117)]((_0x42a013,_0x155fa8)=>{const _0x39e5bd=_0x4557fd;if(_0x42a013)lastOrders[_0x39e5bd(0x19f)](_0x155fa8,0x1);}),persistOpenOrders(lastOrders);const _0x5196b2=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x4557fd(0x13a)){validateOrdersState=_0x4557fd(0x20d);if(_0x1a2017['includes'](![])){if(config['ordertype']==_0x4557fd(0x1fc)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4557fd(0x20d)){if(_0x1a2017[_0x4557fd(0x26b)](![])){}else{if(allOrdersPlaced){if(config[_0x4557fd(0x269)]==_0x4557fd(0x1fc)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4557fd(0x194))_0x1a2017[_0x4557fd(0x26b)](![])&&(config[_0x4557fd(0x269)]==_0x4557fd(0x1fc)?logHistory(_0x4557fd(0x1f8),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4557fd(0x258)](_0x1ae5ab*validateOrderInterval/0xea60)+_0x4557fd(0x1c1)+_0x5196b2):(await cancelOrders(),logHistory('success',_0x4557fd(0x113)+Math['round'](_0x1ae5ab*validateOrderInterval/0xea60)+_0x4557fd(0x1c1)+_0x5196b2))),await unlockOrders();else{if(validateOrdersState==_0x4557fd(0x1e4)){if(config[_0x4557fd(0x269)]!=_0x4557fd(0x1fc))logHistory(_0x4557fd(0x1f8),'No\x20more\x20open\x20orders\x20-\x20'+_0x5196b2);await unlockOrders();}}}}}async function cancelOrders(){const _0x47147e=_0x106de7;lastOrders[_0x47147e(0x117)](async _0xac5ac0=>{const _0x49c23c=_0x47147e;try{const _0x33cd8b=await exchange[_0x49c23c(0x173)](_0xac5ac0[_0x49c23c(0x1f7)],_0xac5ac0['symbol']);}catch(_0x559b2c){if(_0x559b2c[_0x49c23c(0x214)]()[_0x49c23c(0x26b)](_0x49c23c(0x266))){}else await handleError(_0x559b2c,_0x49c23c(0x1cd));}});}async function initCoinResults(_0x217660){const _0x3746ba=_0x106de7;_0x217660?logger['debug'](_0x3746ba(0x12e)+_0x217660):logger[_0x3746ba(0x1d9)]('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0x4cc4f0=>{const _0x4feba7=_0x3746ba;if(!_0x4cc4f0[_0x4feba7(0x160)]&&_0x4cc4f0['coin']!=config[_0x4feba7(0x1dc)]){const _0x26507e=currentCoins[_0x4feba7(0x1a9)](_0x5054f6=>_0x5054f6['coin']==_0x4cc4f0[_0x4feba7(0x1a3)]),_0x1af186=global[_0x4feba7(0x25f)][noslash(_0x4cc4f0[_0x4feba7(0x1cb)])];let _0x3ff34d=_0x26507e?_0x26507e[_0x4feba7(0x1da)]:null,_0x254cd6=_0x4cc4f0[_0x4feba7(0x12d)]?0x1/_0x1af186:_0x1af186,_0x279162;config[_0x4feba7(0x141)][_0x4feba7(0x117)](_0x42c161=>{const _0x50aecb=_0x4feba7;!_0x279162&&(_0x279162=_0x42c161[_0x50aecb(0x149)]['find'](_0x5ac890=>_0x5ac890[_0x50aecb(0x1a3)]==_0x4cc4f0[_0x50aecb(0x1a3)]),_0x279162&&(_0x3ff34d=_0x279162[_0x50aecb(0x1da)],_0x254cd6=_0x279162[_0x50aecb(0x133)]));});let _0xd3d6b8=dbCoinResults[_0x4feba7(0x19a)](_0x4feba7(0x192))[_0x4feba7(0x1a9)]({'coin':_0x4cc4f0['coin']})['value']();if(!_0xd3d6b8){const _0x4cab50={'coin':_0x4cc4f0['coin'],'number':_0x3ff34d,'breakeven':_0x254cd6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4feba7(0x19a)](_0x4feba7(0x192))[_0x4feba7(0x177)](_0x4cab50)[_0x4feba7(0x257)]();}else{if(_0x217660&&_0x4cc4f0[_0x4feba7(0x1a3)]==_0x217660){const _0x3af55d={'coin':_0x4cc4f0[_0x4feba7(0x1a3)],'number':_0x3ff34d,'breakeven':_0x254cd6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4feba7(0x19a)](_0x4feba7(0x192))[_0x4feba7(0x1a9)]({'coin':_0x4cc4f0[_0x4feba7(0x1a3)]})[_0x4feba7(0x189)](_0x3af55d)[_0x4feba7(0x257)]();}}}});}async function updateCoinResults(_0xc11134,_0x2bf543=![]){const _0x58373e=_0x106de7;let _0x6235f4,_0x346938,_0x1e56d8,_0x497030,_0x1ad1ee,_0x4f625b,_0x181d81=dbCoinResults[_0x58373e(0x19a)](_0x58373e(0x192))[_0x58373e(0x1a9)]({'coin':_0xc11134[_0x58373e(0x1a3)]})[_0x58373e(0x23b)](),_0x397fe6=![];_0x181d81&&Object['entries'](_0x181d81)['forEach'](([_0x5a9f70,_0x318223])=>{if(_0x318223==null)_0x397fe6=!![];});(!_0x181d81||_0x397fe6)&&(await initCoinResults(_0xc11134[_0x58373e(0x1a3)]),_0x181d81=dbCoinResults[_0x58373e(0x19a)](_0x58373e(0x192))[_0x58373e(0x1a9)]({'coin':_0xc11134['coin']})[_0x58373e(0x23b)]());_0xc11134[_0x58373e(0x12d)]&&(_0x4f625b={'filled':_0xc11134[_0x58373e(0x16b)]*_0xc11134[_0x58373e(0x133)],'amount':_0xc11134['filled']*_0xc11134[_0x58373e(0x133)],'side':_0xc11134[_0x58373e(0x155)]==_0x58373e(0x250)?_0x58373e(0x1f0):'sell','price':0x1/_0xc11134[_0x58373e(0x133)]},_0xc11134={..._0xc11134,..._0x4f625b});_0x2bf543?_0x346938=_0xc11134['side']=='buy'?_0x181d81[_0x58373e(0x1da)]+_0xc11134['filled']:_0x181d81['number']-_0xc11134[_0x58373e(0x16b)]:_0x346938=await getCoinNumber(_0xc11134[_0x58373e(0x1a3)]);if(_0xc11134['fee']&&_0xc11134[_0x58373e(0x252)][_0x58373e(0x145)]==config[_0x58373e(0x1dc)])_0x6235f4=_0xc11134[_0x58373e(0x252)][_0x58373e(0x218)];else{if(_0xc11134[_0x58373e(0x252)]&&_0xc11134[_0x58373e(0x252)]['currency']==_0x58373e(0x20f)&&!_0x2bf543)_0x6235f4=_0xc11134[_0x58373e(0x252)][_0x58373e(0x218)]*global[_0x58373e(0x25f)][_0x58373e(0x20f)+config[_0x58373e(0x1dc)]];else _0x6235f4=defaultFee*_0xc11134[_0x58373e(0x16b)]*_0xc11134[_0x58373e(0x133)];}_0xc11134['side']==_0x58373e(0x1f0)?(_0x1e56d8=_0x346938!=0x0?(_0x181d81[_0x58373e(0x1b6)]*_0x181d81['number']+_0xc11134[_0x58373e(0x133)]*(_0x346938-_0x181d81[_0x58373e(0x1da)])+_0x6235f4)/_0x346938:0x0,_0x497030=_0x181d81[_0x58373e(0x124)]):(_0x1e56d8=_0x346938!=0x0?(_0x181d81[_0x58373e(0x1b6)]*_0x181d81[_0x58373e(0x1da)]-_0xc11134[_0x58373e(0x133)]*(_0x181d81[_0x58373e(0x1da)]-_0x346938)+_0x6235f4)/_0x346938:0x0,_0x497030=_0x181d81[_0x58373e(0x124)]+(_0xc11134[_0x58373e(0x133)]-_0x181d81[_0x58373e(0x1b6)])*_0xc11134[_0x58373e(0x16b)]);_0x1ad1ee=(_0xc11134['price']-_0x1e56d8-_0x6235f4/_0xc11134[_0x58373e(0x16b)])*_0x346938;let _0x5474bf={'coin':_0xc11134[_0x58373e(0x1a3)],'number':_0x346938,'breakeven':formatResult(_0x1e56d8,0x8),'realized':formatResult(_0x497030,0x8),'unrealized':formatResult(_0x1ad1ee,0x8),'fees':formatResult(_0x181d81[_0x58373e(0x131)]+_0x6235f4,0x8),'sells':_0xc11134[_0x58373e(0x155)]==_0x58373e(0x250)?_0x181d81['sells']+0x1:_0x181d81[_0x58373e(0x246)],'buys':_0xc11134['side']==_0x58373e(0x1f0)?_0x181d81[_0x58373e(0x1ad)]+0x1:_0x181d81[_0x58373e(0x1ad)]};dbCoinResults[_0x58373e(0x19a)](_0x58373e(0x192))['find']({'coin':_0xc11134[_0x58373e(0x1a3)]})['assign'](_0x5474bf)[_0x58373e(0x257)]();if(!_0x2bf543){if(_0xc11134[_0x58373e(0x252)]&&_0xc11134[_0x58373e(0x252)]['currency']==_0x58373e(0x20f)){const _0x408808=currentCoins[_0x58373e(0x1a9)](_0x1bf255=>_0x1bf255[_0x58373e(0x1a3)]==_0x58373e(0x20f));if(_0x408808){let _0x4e7ea7=dbCoinResults[_0x58373e(0x19a)](_0x58373e(0x192))[_0x58373e(0x1a9)]({'coin':_0x58373e(0x20f)})[_0x58373e(0x23b)]();_0x5474bf={..._0x4e7ea7,'number':_0x408808[_0x58373e(0x1da)]},dbCoinResults[_0x58373e(0x19a)](_0x58373e(0x192))['find']({'coin':_0x58373e(0x20f)})[_0x58373e(0x189)](_0x5474bf)[_0x58373e(0x257)]();}}}}async function placeOrder(_0x4176ce){const _0x4986e6=_0x106de7,_0x370e23=config[_0x4986e6(0x269)]=='market'?'market':_0x4986e6(0x251);if(lockOrders==ORDERS[_0x4986e6(0x245)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4986e6(0x18c)],allOrdersPlaced=![],validateOrdersState='initial';let _0x44219b=![];lastOrders=[];for(const _0x248bf9 of _0x4176ce){let _0x1e00b3,_0xf275e9,_0x91985e,_0x4a7e2d,_0x256687,_0x332a29=_0x248bf9[_0x4986e6(0x1cb)];try{const _0x447548=await exchange[_0x4986e6(0x16f)](_0x332a29);_0x1e00b3=_0x248bf9[_0x4986e6(0x12d)]?0x1/_0x248bf9[_0x4986e6(0x150)]:_0x248bf9[_0x4986e6(0x150)],_0xf275e9=_0x447548[_0x4986e6(0x128)],_0x91985e=_0x447548[_0x4986e6(0x143)];_0x248bf9['reverse']?(_0x4a7e2d=_0x248bf9[_0x4986e6(0x155)]=='buy'?_0x4986e6(0x250):_0x4986e6(0x1f0),_0x256687=Math[_0x4986e6(0x136)](_0x248bf9[_0x4986e6(0x21b)])/_0x1e00b3):(_0x4a7e2d=_0x248bf9[_0x4986e6(0x155)],_0x256687=Math[_0x4986e6(0x136)](_0x248bf9[_0x4986e6(0x21b)]));_0x370e23==_0x4986e6(0x251)&&(config['ordertype']==_0x4986e6(0x1ec)&&(_0x1e00b3=_0x4a7e2d==_0x4986e6(0x1f0)?_0xf275e9:_0x91985e),config[_0x4986e6(0x269)]=='limit-low'&&(_0x1e00b3=_0x4a7e2d=='buy'?_0x91985e:_0xf275e9));_0x256687=formatResult(_0x256687,0x8),_0x1e00b3=formatResult(_0x1e00b3,0x8);const _0x4d44f2=_0x4a7e2d==_0x4986e6(0x250)?config[_0x4986e6(0x153)]?String[_0x4986e6(0x12f)]('0x'+config[_0x4986e6(0x153)])+'\x20':'':config[_0x4986e6(0x1f3)]?String[_0x4986e6(0x12f)]('0x'+config['emojibuy'])+'\x20':'',_0x3ff009=_0x370e23==_0x4986e6(0x1fc)?'Market':config['ordertype']=='limit-high'?_0x4986e6(0x1ac):_0x4986e6(0x1c4),_0x441e42=(Math[_0x4986e6(0x108)](Math[_0x4986e6(0xef)]()*0x35a4e900)+0x5f5e100)[_0x4986e6(0x214)]();lastOrders['push']({'customId':_0x441e42,'symbol':_0x332a29,'coin':_0x248bf9['coin'],'amount':_0x256687,'price':_0x1e00b3,'side':_0x4a7e2d,'reverse':_0x248bf9[_0x4986e6(0x12d)],'filled':0x0});if(_0x370e23==_0x4986e6(0x1fc))logHistory(_0x4986e6(0x161),''+_0x4d44f2+_0x3ff009+_0x4986e6(0x1d8)+_0x332a29+'\x20'+_0x4a7e2d+'\x20#'+formatResult(_0x256687,0x8)+'\x20@'+formatResult(_0x1e00b3,0x8));else logHistory(_0x4986e6(0x161),''+_0x4d44f2+_0x3ff009+_0x4986e6(0x1d8)+_0x332a29+'\x20'+_0x4a7e2d+'\x20#'+formatResult(_0x256687,0x8)+'\x20@'+formatResult(_0x1e00b3,0x8));let _0x26e337;_0x370e23==_0x4986e6(0x1fc)?_0x4a7e2d=='buy'&&[_0x4986e6(0x243),'Bitget',_0x4986e6(0x216),_0x4986e6(0x1a4),_0x4986e6(0xfe)]['includes'](config[_0x4986e6(0x10c)])?_0x26e337=await exchange[_0x4986e6(0x200)](_0x332a29,_0x370e23,_0x4a7e2d,_0x256687,_0x1e00b3):_0x26e337=await exchange[_0x4986e6(0x200)](_0x332a29,_0x370e23,_0x4a7e2d,_0x256687,undefined):_0x26e337=await exchange[_0x4986e6(0x200)](_0x332a29,_0x370e23,_0x4a7e2d,_0x256687,_0x1e00b3);logger['debug'](_0x4986e6(0x261)+_0x26e337['id']+_0x4986e6(0x1fb)+_0x441e42);const _0x11521b=lastOrders[_0x4986e6(0x248)]-0x1;if(_0x11521b>=0x0&&lastOrders[_0x11521b][_0x4986e6(0x188)]==_0x441e42){lastOrders[_0x11521b][_0x4986e6(0x1f7)]=_0x26e337['id'];if(_0x26e337[_0x4986e6(0x10a)])lastOrders[_0x11521b]['amount']=_0x26e337[_0x4986e6(0x10a)];if(_0x26e337[_0x4986e6(0x133)])lastOrders[_0x11521b]['price']=_0x26e337['price'];lastOrders[_0x11521b][_0x4986e6(0x252)]=_0x26e337[_0x4986e6(0x252)];}if(config[_0x4986e6(0x26d)]!=0x0){let _0x1595f9=null;if(cooldownTracker[_0x4986e6(0x248)]==config['cooldown']-0x1)_0x1595f9=cooldownTracker[_0x4986e6(0x1c9)]();const _0x27fe39=getTimeStamp();cooldownTracker['push'](_0x27fe39);if(_0x1595f9){const _0x53ebce=fns[_0x4986e6(0xeb)](new Date(_0x27fe39),new Date(_0x1595f9));if(_0x53ebce<cooldownInterval){logHistory(_0x4986e6(0x1b9),_0x4986e6(0x256)+config[_0x4986e6(0x26d)]+_0x4986e6(0x10f)+cooldownInterval/0x3c+_0x4986e6(0xf0)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x5f5279){if(_0x5f5279['toString']()[_0x4986e6(0x26b)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4986e6(0x175)](_0x273788=>_0x273788[_0x4986e6(0x1cb)]!=_0x332a29),logHistory(_0x4986e6(0x1b9),_0x4986e6(0x16a)+_0x332a29),_0x44219b=!![];else{if(_0x5f5279['toString']()['includes']('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x214ce7=>_0x214ce7[_0x4986e6(0x1cb)]!=_0x332a29),logHistory(_0x4986e6(0x1b9),_0x4986e6(0x159)+_0x332a29),_0x44219b=!![];else{if(_0x5f5279[_0x4986e6(0x214)]()[_0x4986e6(0x26b)](_0x4986e6(0x263)))lastOrders=lastOrders[_0x4986e6(0x175)](_0x1dac22=>_0x1dac22[_0x4986e6(0x1cb)]!=_0x332a29),logHistory(_0x4986e6(0x1b9),_0x4986e6(0x215)+_0x332a29),logger[_0x4986e6(0x1d9)](_0x5f5279),_0x44219b=!![];else _0x5f5279[_0x4986e6(0x214)]()[_0x4986e6(0x26b)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4986e6(0x175)](_0x33c41f=>_0x33c41f[_0x4986e6(0x1cb)]!=_0x332a29),logHistory(_0x4986e6(0x1b9),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x332a29),_0x44219b=!![]):(lastOrders=lastOrders['filter'](_0x173c2a=>_0x173c2a[_0x4986e6(0x1cb)]!=_0x332a29),await handleError(_0x5f5279,'placeOrder()',_0x332a29));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4986e6(0x248)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5aa4f5=config[_0x4986e6(0x269)]==_0x4986e6(0x1fc)?validateOrderTimeout*0x3c*0x3e8:config[_0x4986e6(0x198)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x12f77c=_0x4986e6;validateOrders(_0x12f77c(0x194));},_0x5aa4f5);}else unlockOrders();_0x44219b&&config['headless']&&(logHistory(_0x4986e6(0x1b9),_0x4986e6(0x18a)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4986e6(0x1f8),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4986e6(0x1a2)]&&logHistory(_0x4986e6(0x1b9),_0x4986e6(0x242));else lockOrders!=ORDERS[_0x4986e6(0x245)]&&(!config[_0x4986e6(0x1a2)]&&(config[_0x4986e6(0x269)]==_0x4986e6(0x1fc)?logHistory(_0x4986e6(0x1b9),_0x4986e6(0x1f1)):logHistory('error',_0x4986e6(0x127))));}}function persistOpenOrders(_0x3323b5){const _0xe32a31=_0x106de7,_0x25070a={...config,'openOrders':_0x3323b5};let _0x4e3030=dbConfig[_0xe32a31(0x19a)](_0xe32a31(0x23f))[_0xe32a31(0x1a9)]({'botID':botID})['value']();_0x4e3030&&dbConfig[_0xe32a31(0x19a)](_0xe32a31(0x23f))[_0xe32a31(0x1a9)]({'botID':botID})[_0xe32a31(0x189)](_0x25070a)[_0xe32a31(0x257)]();}function restoreOrders(){const _0x28f7e5=_0x106de7;let _0x4f81ce;config[_0x28f7e5(0xf2)]&&allOpenOrders[_0x28f7e5(0x117)](_0x2cd5c9=>{const _0xf914ee=_0x28f7e5,_0x25e70d=config[_0xf914ee(0xf2)]['find'](_0x53a4e9=>_0x53a4e9[_0xf914ee(0x1f7)]==_0x2cd5c9['id']);_0x25e70d&&(lastOrders[_0xf914ee(0x177)](_0x25e70d),_0x4f81ce=_0x2cd5c9[_0xf914ee(0x14f)]);});if(lastOrders[_0x28f7e5(0x248)]>0x0){lockOrders=ORDERS[_0x28f7e5(0x18c)],validateOrdersState=_0x28f7e5(0x20d),allOrdersPlaced=!![];const _0x14d0f6=new Date()[_0x28f7e5(0xf8)](),_0x3f89f6=config[_0x28f7e5(0x269)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x28f7e5(0x198)]*0x3c*0x3e8;if(_0x4f81ce+_0x3f89f6>_0x14d0f6){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x9eafdd=_0x28f7e5;validateOrders(_0x9eafdd(0x194));},_0x4f81ce+_0x3f89f6-_0x14d0f6);}else validateOrders(_0x28f7e5(0x194));}}async function sendMetricsTelegram(){const _0x2a2b63=_0x106de7;if(!coinsLoaded){process['send']({'telegrammsg':_0x2a2b63(0x1a5)},_0x12e335=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xdac4ea='';if(config[_0x2a2b63(0x210)])_0xdac4ea=_0x2a2b63(0x183)+config[_0x2a2b63(0x111)]+'\x20metrics:</b>\x20\x0a\x0a';else _0xdac4ea=_0x2a2b63(0x165)+botID+_0x2a2b63(0x1c3);const _0x4f2710=getKPIs(_0x2a2b63(0x1dc)),_0x171652=getKPIs(_0x2a2b63(0x148),config[_0x2a2b63(0x148)]),_0xdd7544=getKPIs(_0x2a2b63(0x14b)),_0x4711b7=getKPIs(_0x2a2b63(0x120),config['fiat']);_0xdac4ea+='<pre>',_0xdac4ea+=_0x4f2710['leftTxt']+_0x2a2b63(0x15f)+_0x4f2710[_0x2a2b63(0x23b)]+'\x0a',_0xdac4ea+=_0x4f2710[_0x2a2b63(0x1aa)]+':\x20'+_0x4f2710['change']+'%\x0a',_0xdac4ea+=_0x171652[_0x2a2b63(0x1ce)]+'\x20:\x20'+_0x171652[_0x2a2b63(0x23b)]+'\x0a',_0xdac4ea+=_0x171652[_0x2a2b63(0x1aa)]+':\x20'+_0x171652[_0x2a2b63(0x204)]+'%\x0a',_0xdac4ea+=_0xdd7544[_0x2a2b63(0x1ce)]+':\x20'+_0xdd7544[_0x2a2b63(0x23b)]+'\x20('+config[_0x2a2b63(0x1dc)]+')\x0a',_0xdac4ea+=_0xdd7544['rightTxt']+':\x20'+_0xdd7544['change']+_0x2a2b63(0x13b)+config['basecoin']+')\x0a',_0xdac4ea+=_0x4711b7['leftTxt']+':\x20'+_0x4711b7[_0x2a2b63(0x23b)]+'\x20('+config[_0x2a2b63(0x148)]+')\x0a',_0xdac4ea+=_0x4711b7[_0x2a2b63(0x1aa)]+':\x20'+_0x4711b7[_0x2a2b63(0x204)]+_0x2a2b63(0x13b)+config[_0x2a2b63(0x148)]+')\x0a',_0xdac4ea+='</pre>',process['send']({'telegrammsg':_0xdac4ea},_0x1269af=>{});}async function sendPortfolioTelegram(){const _0x3ae544=_0x106de7;if(!coinsLoaded){process[_0x3ae544(0x1e8)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x216082=>{});return;}let _0x13a003='';if(config[_0x3ae544(0x210)])_0x13a003=_0x3ae544(0x183)+config[_0x3ae544(0x111)]+_0x3ae544(0x196);else _0x13a003='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x13a003+=_0x3ae544(0x178),_0x13a003+=_0x3ae544(0x17b),_0x13a003+=_0x3ae544(0xe7),_0x13a003+='-------------------------------\x0a',currentCoins[_0x3ae544(0x117)](_0x1eafa3=>{const _0x1bd577=_0x3ae544;_0x13a003+=_0x1eafa3['coin'][_0x1bd577(0x17c)](0x7)+'|\x20'+formatPad(_0x1eafa3[_0x1bd577(0x11d)],0x2,0x6)+'|\x20'+formatPad(_0x1eafa3[_0x1bd577(0x1bc)],0x2,0x6)+'|\x20'+formatPad(_0x1eafa3['delta']*0x64,0x2,0x6)+'\x0a';}),_0x13a003+='</pre>',process[_0x3ae544(0x1e8)]({'telegrammsg':_0x13a003},_0x1e527d=>{});}function formatPad(_0x2e5591,_0x1a53ac,_0x11730b){const _0x4615d4=_0x106de7,_0x896bb5=formatResultString(_0x2e5591,_0x1a53ac);return _0x896bb5?_0x896bb5[_0x4615d4(0x180)](_0x11730b):''[_0x4615d4(0x180)](_0x11730b);}function logHistory(_0x3a1208,_0x3af254,_0x16749d=''){const _0x248eb0=_0x106de7;logger['full'](''+_0x3af254);let _0x3c999c={'time':getTimeStamp(),'type':_0x3a1208,'event':_0x3af254};dbLogs[_0x248eb0(0x19a)](_0x248eb0(0x174))[_0x248eb0(0x177)](_0x3c999c)['write']();if(_0x16749d=='')_0x16749d=_0x3af254;proxyEmit(_0x248eb0(0xee),{'log':_0x3c999c,'summary':_0x16749d}),process[_0x248eb0(0x1e8)]({'telegram':{..._0x3c999c,'botname':config['botname'],'showname':config[_0x248eb0(0x210)]}},_0x474024=>{});}function emitHistory(_0xc037cd={}){const _0x589adf=_0x106de7;Object[_0x589adf(0x14c)](_0xc037cd)[_0x589adf(0x248)]==0x0&&(_0xc037cd={'type':['order',_0x589adf(0xee)],'event':'','page':0x1});if(_0xc037cd[_0x589adf(0x276)][_0x589adf(0x26b)]('event'))_0xc037cd[_0x589adf(0x276)][_0x589adf(0x19f)](_0xc037cd[_0x589adf(0x276)][_0x589adf(0x151)]('event'),0x1,_0x589adf(0x1b9),'warning','success');if(dbLogs[_0x589adf(0x17d)](_0x589adf(0x174))[_0x589adf(0x23b)]()){let _0x36424e=dbLogs['get'](_0x589adf(0x174))['filter'](_0x548f0d=>{const _0xd61c04=_0x589adf;if(_0xc037cd[_0xd61c04(0x276)]['length']==0x0)return![];else return _0xc037cd['type'][_0xd61c04(0x26b)](_0x548f0d[_0xd61c04(0x276)]);})[_0x589adf(0x175)](_0xd588c5=>{const _0xe5b816=_0x589adf;if(_0xc037cd[_0xe5b816(0xee)]=='')return!![];else return _0xd588c5[_0xe5b816(0xee)][_0xe5b816(0x1ca)]()['includes'](_0xc037cd[_0xe5b816(0xee)][_0xe5b816(0x1ca)]());})[_0x589adf(0x1e5)](_0x589adf(0x1b2)),_0x26f657=_0x36424e[_0x589adf(0x23b)]()['length'];_0x36424e=_0x36424e[_0x589adf(0x12d)]()['slice']((_0xc037cd[_0x589adf(0x142)]-0x1)*logPageSize,_0xc037cd['page']*logPageSize-0x1)[_0x589adf(0x12d)]()[_0x589adf(0x23b)](),proxyEmit('event-history',{'logs':_0x36424e,'total':_0x26f657});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x63856b){const _0x15ea6a=_0x106de7;if(dbLogs[_0x15ea6a(0x17d)]('logs')[_0x15ea6a(0x23b)]()){const _0x529931=dbLogs[_0x15ea6a(0x19a)](_0x15ea6a(0x174))['sortBy'](_0x15ea6a(0x1b2))['filter'](_0x433388=>{const _0x4e648e=_0x15ea6a;return _0x433388[_0x4e648e(0x276)]=='order';})[_0x15ea6a(0x23b)]();dbLogs[_0x15ea6a(0x19a)](_0x15ea6a(0x174))[_0x15ea6a(0x144)]()['write'](),dbLogs[_0x15ea6a(0x19a)](_0x15ea6a(0x174))[_0x15ea6a(0x189)](_0x529931)[_0x15ea6a(0x257)](),emitHistory(_0x63856b);}}async function pauseBot(){const _0x430648=_0x106de7,_0xfaffac=new Date()[_0x430648(0xf8)]();if(!lastErrorShown||_0xfaffac-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xfaffac;!lastBotPause?(lastBotPause=_0xfaffac,consecutivePauses=0x1):(_0xfaffac-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x430648(0x1e8)]({'stop':_0x430648(0x103)},_0x30614a=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x3b0708=_0x106de7;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x3b0708(0x223)},_0xbb6a56=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x31989a,_0x5aff45){const _0x31dcaa=_0x106de7;if(botPaused)return;const _0x2f6ffd=config[_0x31dcaa(0x10c)]||_0x31dcaa(0x219);if(_0x5aff45)logger['debug'](_0x31dcaa(0x26e)+_0x5aff45);const _0x205c7e=()=>{const _0x20d49b=_0x31dcaa;loading[_0x20d49b(0x1b9)]=!![],emitLoadingProgress();};if(_0x31989a[_0x31dcaa(0x214)]()[_0x31dcaa(0x26b)](_0x31dcaa(0x11b)))logHistory(_0x31dcaa(0x1b9),_0x2f6ffd+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x205c7e();else{if(_0x31989a[_0x31dcaa(0x214)]()[_0x31dcaa(0x26b)](_0x31dcaa(0x23d)))logHistory(_0x31dcaa(0x1b9),_0x2f6ffd+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x205c7e();else _0x31989a[_0x31dcaa(0x214)]()[_0x31dcaa(0x26b)]('AuthenticationError')?(logHistory(_0x31dcaa(0x1b9),_0x2f6ffd+_0x31dcaa(0x1cf)),logHistory(_0x31dcaa(0x1b9),_0x31dcaa(0x208)),_0x205c7e()):await handleError(_0x31989a,null);}}async function handleError(_0x28ad56,_0x4491d9,_0x803bd9=''){const _0x54f66e=_0x106de7;if(botPaused)return;const _0x30abed=config['exchange']||_0x54f66e(0x219);if(_0x4491d9)logger[_0x54f66e(0x1d9)](_0x54f66e(0x26e)+_0x4491d9);if(_0x28ad56['toString']()['includes'](_0x54f66e(0x102))||_0x28ad56[_0x54f66e(0x214)]()['includes'](_0x54f66e(0x13d)))logHistory('error',_0x30abed+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0x1fa))||_0x28ad56[_0x54f66e(0x214)]()['includes'](_0x54f66e(0x13f)))logHistory(_0x54f66e(0x1b9),_0x30abed+_0x54f66e(0x19d)+pauseBotMsg),await pauseBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0xf9)))logHistory('error',_0x30abed+_0x54f66e(0x232)+pauseBotMsg),await pauseBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0x253)))logHistory(_0x54f66e(0x1b9),_0x30abed+_0x54f66e(0x1b3)+pauseBotMsg),await pauseBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0x1b4)))logHistory('error',_0x54f66e(0x193)),logHistory(_0x54f66e(0x1b9),_0x54f66e(0x19b)),await killBot();else{if(_0x28ad56['toString']()[_0x54f66e(0x26b)](_0x54f66e(0x1fe)))logHistory(_0x54f66e(0x1b9),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x54f66e(0x1b9),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x28ad56 instanceof ccxt[_0x54f66e(0x247)])logHistory(_0x54f66e(0x1b9),_0x30abed+_0x54f66e(0x172)+pauseBotMsg),logger['debug'](_0x54f66e(0x140),_0x28ad56),await pauseBot();else{if(_0x28ad56[_0x54f66e(0x214)]()['includes'](_0x54f66e(0x11b)))logHistory(_0x54f66e(0x1b9),_0x30abed+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x54f66e(0x1b9),_0x54f66e(0x19b)),await killBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0x23d)))logHistory('error',_0x30abed+_0x54f66e(0x121)),logHistory(_0x54f66e(0x1b9),_0x54f66e(0x19b)),await killBot();else{if(_0x28ad56['toString']()[_0x54f66e(0x26b)](_0x54f66e(0xe9)))logHistory(_0x54f66e(0x1b9),_0x30abed+_0x54f66e(0x16e)),logHistory(_0x54f66e(0x1b9),_0x54f66e(0x19b)),await killBot();else{if(_0x28ad56[_0x54f66e(0x214)]()[_0x54f66e(0x26b)](_0x54f66e(0x1bb)))logHistory(_0x54f66e(0x1b9),_0x30abed+_0x54f66e(0x1b5)),logHistory(_0x54f66e(0x1b9),_0x54f66e(0x19b)),await killBot();else{if(_0x28ad56[_0x54f66e(0x214)]()['includes'](_0x54f66e(0x154)))logHistory(_0x54f66e(0x1b9),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x803bd9);else _0x28ad56 instanceof ccxt[_0x54f66e(0xe1)]?(logHistory('error',_0x30abed+_0x54f66e(0x209)),logger['debug']('Error\x20details:',_0x28ad56)):(logHistory(_0x54f66e(0x1b9),_0x54f66e(0xf7)+pauseBotMsg),logger[_0x54f66e(0x1d9)](_0x54f66e(0x140),_0x28ad56),await pauseBot());}}}}}}}}}}}}function formatResult(_0x228da3,_0x48ceae){return parseFloat(_0x228da3['toFixed'](_0x48ceae));}function formatResultTruncate(_0x355699,_0x1edae6){const _0x4c4435=_0x106de7;let _0x4657f9=formatResultString(_0x355699,0xa),_0x430e1e=_0x4657f9['indexOf']('.');return _0x430e1e!=-0x1&&(_0x4657f9=_0x4657f9[_0x4c4435(0x18e)](0x0,_0x430e1e+_0x1edae6+0x1)),Number(_0x4657f9);}function formatResultString(_0x5ccac7,_0x2c71bf){const _0x1f8263=_0x106de7;let _0x30d4fa;if(!(''+_0x5ccac7)['includes']('e'))_0x30d4fa=+(Math[_0x1f8263(0x258)](_0x5ccac7+'e+'+_0x2c71bf)+'e-'+_0x2c71bf);else{let _0x27b4da=(''+_0x5ccac7)[_0x1f8263(0x1b0)]('e'),_0x417c67='';+_0x27b4da[0x1]+_0x2c71bf>0x0&&(_0x417c67='+'),_0x30d4fa=+(Math[_0x1f8263(0x258)](+_0x27b4da[0x0]+'e'+_0x417c67+(+_0x27b4da[0x1]+_0x2c71bf))+'e-'+_0x2c71bf);}return Number(_0x30d4fa)[_0x1f8263(0x227)](_0x2c71bf);}function getServerTime(){const _0x43cdb0=_0x106de7,_0x5b1c0b=new Date();return _0x5b1c0b['getFullYear']()+'/'+(_0x5b1c0b[_0x43cdb0(0xf3)]()+0x1)[_0x43cdb0(0x214)]()[_0x43cdb0(0x180)](0x2,'0')+'/'+_0x5b1c0b[_0x43cdb0(0x171)]()[_0x43cdb0(0x214)]()[_0x43cdb0(0x180)](0x2,'0')+'\x20'+_0x5b1c0b[_0x43cdb0(0x137)]()['toString']()[_0x43cdb0(0x180)](0x2,'0')+':'+_0x5b1c0b['getMinutes']()[_0x43cdb0(0x214)]()['padStart'](0x2,'0')+':'+_0x5b1c0b['getSeconds']()[_0x43cdb0(0x214)]()[_0x43cdb0(0x180)](0x2,'0');}function getTimeStamp(){const _0x5c78c4=_0x106de7,_0x48f931=shiftedTime();return _0x48f931[_0x5c78c4(0x125)]()+'/'+(_0x48f931[_0x5c78c4(0xf3)]()+0x1)[_0x5c78c4(0x214)]()[_0x5c78c4(0x180)](0x2,'0')+'/'+_0x48f931[_0x5c78c4(0x171)]()['toString']()[_0x5c78c4(0x180)](0x2,'0')+'\x20'+_0x48f931[_0x5c78c4(0x137)]()[_0x5c78c4(0x214)]()[_0x5c78c4(0x180)](0x2,'0')+':'+_0x48f931[_0x5c78c4(0x1af)]()[_0x5c78c4(0x214)]()[_0x5c78c4(0x180)](0x2,'0')+':'+_0x48f931[_0x5c78c4(0xed)]()[_0x5c78c4(0x214)]()[_0x5c78c4(0x180)](0x2,'0');}function getDate(){const _0x3253e4=_0x106de7,_0x2fd156=shiftedTime();return _0x2fd156[_0x3253e4(0x125)]()+'/'+(_0x2fd156[_0x3253e4(0xf3)]()+0x1)[_0x3253e4(0x214)]()['padStart'](0x2,'0')+'/'+_0x2fd156['getDate']()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x4cd560=_0x106de7,_0x5cd91d=shiftedTime();return _0x5cd91d[_0x4cd560(0x137)]()[_0x4cd560(0x214)]()['padStart'](0x2,'0');}function sleep(_0x992471){return new Promise(_0x28f506=>setTimeout(_0x28f506,_0x992471));}function shiftedTime(){const _0x11bee1=_0x106de7,_0x3fdc6d=new Date();let _0x4f8b8c=_0x3fdc6d;if(config&&config[_0x11bee1(0x207)]!==0x0)_0x4f8b8c=fns['add'](_0x3fdc6d,{'hours':config[_0x11bee1(0x207)]});return _0x4f8b8c;}function timer(_0x17f1aa){const _0x384f34=_0x106de7,_0x3494f5=new Date();!lasttime?console[_0x384f34(0x179)](getTimeStamp()+_0x384f34(0x167),_0x17f1aa,_0x3494f5):console['log'](getTimeStamp()+_0x384f34(0x167),_0x17f1aa,(_0x3494f5-lasttime)/0x3e8),lasttime=_0x3494f5;}