const _0xa4e499=_0x146d;(function(_0x13019a,_0x518633){const _0x46ed15=_0x146d,_0x4e2d16=_0x13019a();while(!![]){try{const _0x55977b=-parseInt(_0x46ed15(0x2c8))/0x1+-parseInt(_0x46ed15(0x2e1))/0x2*(-parseInt(_0x46ed15(0x1fd))/0x3)+-parseInt(_0x46ed15(0x233))/0x4*(-parseInt(_0x46ed15(0x218))/0x5)+-parseInt(_0x46ed15(0x2b9))/0x6*(parseInt(_0x46ed15(0x21a))/0x7)+parseInt(_0x46ed15(0x27f))/0x8*(parseInt(_0x46ed15(0x188))/0x9)+-parseInt(_0x46ed15(0x21d))/0xa*(-parseInt(_0x46ed15(0x1dd))/0xb)+-parseInt(_0x46ed15(0x243))/0xc*(parseInt(_0x46ed15(0x1d0))/0xd);if(_0x55977b===_0x518633)break;else _0x4e2d16['push'](_0x4e2d16['shift']());}catch(_0x27e8d5){_0x4e2d16['push'](_0x4e2d16['shift']());}}}(_0x5bdd,0x7df7f));const _0x1fcbea=function(){let _0x28336d=!![];return function(_0x3d14bc,_0x25fbc4){const _0x3fa8d1=_0x28336d?function(){if(_0x25fbc4){const _0x377614=_0x25fbc4['apply'](_0x3d14bc,arguments);return _0x25fbc4=null,_0x377614;}}:function(){};return _0x28336d=![],_0x3fa8d1;};}(),_0x451d07=_0x1fcbea(this,function(){const _0x4cb437=_0x146d;return _0x451d07[_0x4cb437(0x1d1)]()[_0x4cb437(0x229)](_0x4cb437(0x309))[_0x4cb437(0x1d1)]()['constructor'](_0x451d07)['search'](_0x4cb437(0x309));});_0x451d07();'use strict';const ccxt=require(_0xa4e499(0x1a5)),low=require(_0xa4e499(0x27c)),FileSync=require(_0xa4e499(0x226)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0xa4e499(0x287))[_0xa4e499(0x2c2)],util=require(_0xa4e499(0x2ce)),argv=require('yargs/yargs')(process[_0xa4e499(0x244)][_0xa4e499(0x1cd)](0x2))[_0xa4e499(0x244)],path=require(_0xa4e499(0x2e6));let exchange;global[_0xa4e499(0x294)]={},global[_0xa4e499(0x273)]={};const usdBasecoins=[_0xa4e499(0x248),_0xa4e499(0x1be),_0xa4e499(0x1bb),_0xa4e499(0x2ca),_0xa4e499(0x2e7),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xa4e499(0x211)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xa4e499(0x1a9)+pauseBotInterval/0xea60+_0xa4e499(0x1d4),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0xa4e499(0x224)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0xa4e499(0x2fb)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0xa4e499(0x19a)+userID+'/':'./config/',logspath=userID?_0xa4e499(0x1aa)+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+_0xa4e499(0x322),{'flags':'a'});!fs[_0xa4e499(0x2f7)](configpath)&&fs[_0xa4e499(0x313)](configpath);!fs[_0xa4e499(0x2f7)](logspath)&&fs[_0xa4e499(0x313)](logspath);const configfile=configpath+'bot-'+botID+_0xa4e499(0x232),logfile=configpath+_0xa4e499(0x2d5)+botID+_0xa4e499(0x1ca),performancefile=configpath+'bot-'+botID+_0xa4e499(0x27b),coinresultsfile=configpath+_0xa4e499(0x2d5)+botID+_0xa4e499(0x323),settingsfile=configpath+_0xa4e499(0x1de),securefile=configpath+_0xa4e499(0x221),configbackuppath=configpath+_0xa4e499(0x222),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xa4e499(0x2dc)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xa4e499(0x2c0)]({'data':[],'version':serverversion})[_0xa4e499(0x2dc)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xa4e499(0x2c0)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xa4e499(0x2c0)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0xa4e499(0x1b0)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5b8fe2=>{const _0x33b38b=_0xa4e499;console[_0x33b38b(0x2fb)](_0x5b8fe2);},'simple':_0x1debe3=>{const _0x5018b5=_0xa4e499;console[_0x5018b5(0x2fb)](_0x1debe3),loggerfile[_0x5018b5(0x2dc)](util[_0x5018b5(0x25b)](_0x1debe3)+'\x0a');},'full':async(_0x468e9e,_0x2783e2='')=>{const _0x16454b=_0xa4e499;let _0x4faa58;if(config['showname'])_0x4faa58=getTimeStamp()+':\x20'+config[_0x16454b(0x195)]+_0x16454b(0x304)+_0x468e9e;else _0x4faa58=getTimeStamp()+_0x16454b(0x1c0)+botID+_0x16454b(0x304)+_0x468e9e;console[_0x16454b(0x2fb)](_0x4faa58),loggerfile[_0x16454b(0x2dc)](util[_0x16454b(0x25b)](_0x4faa58)+'\x0a'),_0x2783e2&&(console['log'](_0x2783e2),loggerfile[_0x16454b(0x2dc)](util[_0x16454b(0x25b)](_0x2783e2)+'\x0a'));},'debug':async(_0x468f01,_0x5d292c='')=>{const _0x5c7156=_0xa4e499;let _0x4a8d1d;if(config[_0x5c7156(0x27d)])_0x4a8d1d=getTimeStamp()+':\x20'+config[_0x5c7156(0x195)]+_0x5c7156(0x1e6)+_0x468f01;else _0x4a8d1d=getTimeStamp()+_0x5c7156(0x1c0)+botID+_0x5c7156(0x1e6)+_0x468f01;if(debugging)console[_0x5c7156(0x2fb)](_0x4a8d1d);loggerfile['write'](util[_0x5c7156(0x25b)](_0x4a8d1d)+'\x0a');if(_0x5d292c){if(debugging)console['log'](_0x5d292c);loggerfile[_0x5c7156(0x2dc)](util['format'](_0x5d292c)+'\x0a');}}};process['on'](_0xa4e499(0x1a4),function(_0x400473){const _0x32c03d=_0xa4e499;handleError(_0x400473,_0x32c03d(0x1a4));});settings[_0xa4e499(0x19c)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0xa4e499(0x27e)]!=config[_0xa4e499(0x27e)]&&updateOnepagemode(settings[_0xa4e499(0x27e)]);process[_0xa4e499(0x207)]({'started':_0xa4e499(0x275)},_0x1ae25a=>{}),initializeProcessListeners();function proxyEmit(_0xd785a2,_0x1e4886=null){process['send']({'function':_0xd785a2,'args':_0x1e4886},_0x4c8532=>{});}function initializeProcessListeners(){const _0x60beb=_0xa4e499;process['on'](_0x60beb(0x29c),_0x43c945=>{const _0x3f4665=_0x60beb;switch(Object['keys'](_0x43c945)[0x0]){case'timeshift':_0x43c945[_0x3f4665(0x19c)]!=undefined&&(settings['timeshift']=_0x43c945[_0x3f4665(0x19c)],updateTimeshift(settings['timeshift']));break;case _0x3f4665(0x27e):_0x43c945[_0x3f4665(0x27e)]!=undefined&&(settings[_0x3f4665(0x27e)]=_0x43c945[_0x3f4665(0x27e)],updateOnepagemode(settings[_0x3f4665(0x27e)]));break;case _0x3f4665(0x1d7):_0x43c945['bots']!=undefined&&(bots=JSON[_0x3f4665(0x2d8)](_0x43c945[_0x3f4665(0x1d7)]),proxyEmit(_0x3f4665(0x1d7),bots));break;case _0x3f4665(0x1ed):switch(_0x43c945[_0x3f4665(0x1ed)]){case _0x3f4665(0x2cb):initclient();break;case _0x3f4665(0x2bb):toggleBotMode();break;case _0x3f4665(0x247):emitHistory(_0x43c945[_0x3f4665(0x1e1)]);break;case _0x3f4665(0x260):deleteHistoryAlerts(_0x43c945[_0x3f4665(0x1e1)]);break;case'getPortfolio':getPortfolio(_0x43c945[_0x3f4665(0x1e1)]);break;case'storeConfiguration':storeConfiguration(_0x43c945['args']);break;case _0x3f4665(0x1ef):storeHeadless(_0x43c945['args']);break;case _0x3f4665(0x1f9):storeFiat(_0x43c945['args']);break;case _0x3f4665(0x1c6):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x3f4665(0x2b8):placeOrder(_0x43c945[_0x3f4665(0x1e1)]);break;case'cancelLoading':cancelLoading();break;case _0x3f4665(0x227):showConfig();break;case _0x3f4665(0x239):sendMetricsTelegram();break;case _0x3f4665(0x31b):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5572d7=![]){const _0x1786e4=_0xa4e499;logger['debug']('Reset\x20|\x20'+(_0x5572d7?_0x1786e4(0x254):_0x1786e4(0x2a6))+_0x1786e4(0x1f6)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x5572d7)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x1786e4(0x238)]!=''&&config[_0x1786e4(0x238)]!='***'){loadingProgress=0x0;if(_0x5572d7){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1fdf92){handleErrorNoStop(_0x1fdf92,_0x1786e4(0x186));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x386baf=await getCoins();[currentCoins,currentCoinsAll]=_0x386baf,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x1786e4(0x25d)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1786e4(0x29e)]==0x0&&allOpenOrders[_0x1786e4(0x29e)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1cd3ce=_0xa4e499;exchangeStopped=!![];try{await exchange['close']();}catch(_0x59f0de){await handleError(_0x59f0de,_0x1cd3ce(0x291));}}async function reloadExchange(){const _0x4867f0=_0xa4e499;while(lockOrders!=ORDERS[_0x4867f0(0x274)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x4867f0(0x25d)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x134ced=config['exchange'],_0x5e2267=config['apiKey'],_0x161692=config[_0xa4e499(0x2a9)],_0x1109db=config[_0xa4e499(0x1f3)]){const _0x4d0718=_0xa4e499;exchange&&await stopExchange();!supportedExchanges()[_0x4d0718(0x2de)](_0x134ced)&&(logHistory(_0x4d0718(0x1f5),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x134ced+_0x4d0718(0x2d3)),killBot());const _0x5db54a=ccxt[_0x4d0718(0x1d2)][_0x134ced[_0x4d0718(0x2a1)]()];exchange=new _0x5db54a({'apiKey':_0x5e2267,'secret':_0x161692,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4d0718(0x2a3),'watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}});if(_0x1109db)exchange[_0x4d0718(0x1ea)]=_0x1109db;}function setStableCoins(){const _0x152e11=_0xa4e499;let _0x2e0aeb=config[_0x152e11(0x315)]==_0x152e11(0x280)?_0x152e11(0x280):config['basecoin']=='PAXG'?_0x152e11(0x30e):_0x152e11(0x1d6),_0x43b185=!allSymbols[_0x152e11(0x2de)](_0x2e0aeb+_0x152e11(0x1fa))?'USDT':_0x152e11(0x248),_0xecce2=!allSymbols['includes'](_0x2e0aeb+'/EUR')?_0x43b185:_0x152e11(0x2d6);stablecoins={'eur':{'coin':''+_0x2e0aeb+_0xecce2,'symbol':_0x2e0aeb+'/'+_0xecce2},'usd':{'coin':''+_0x2e0aeb+_0x43b185,'symbol':_0x2e0aeb+'/'+_0x43b185}};}function _0x5bdd(){const _0x5609a6=['last','-performance.json','lowdb','showname','onepagemode','5536488CulGNL','ETH','InvalidNonce','target','Transaction\x20detection\x20blocked','getCoins()','balances','Avoiding\x20continuous\x20order\x20attempts','hybrid-crypto-js','getTime','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','open','Limit\x20(low-margin)','date','timeout','cooldown','stopExchange()','\x20order:\x20','warning','ticker','AuthenticationError','unlinkSync','fee','\x20not\x20available','getDate','parseISO','Order\x20filled:\x20','message','placeOrder()','length','2.5.0','Error\x20while\x20deleting\x20files:\x20','toLowerCase','\x20closed\x20the\x20connection','spot','recreate','filter','exchange\x20not\x20reloaded','limits','bid','apiSecret','performance','emojibuy','enabled','initial','Fee\x20discount\x20refund\x20detected:\x20','status','ordertype','get','limit-low','ORDERS.UNLOCKED','set','RateLimitExceeded','\x20:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','placeOrder','5988CyiyPY','watchOrders','toggleBotMode','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20minutes\x20-\x20','abs','2.6.0','defaults','cancel','Crypt','getSeconds','logs','fromCodePoint','Unknown\x20error\x20occured','sells','743353OFBAuN','sortBy','USDT','initclient','Market','getCoinNumber()','util','1\x20-\x20Validate\x20orders:\x20','emojisell','getMonth','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20exchange','eur','bot-','EUR','OrderNotFound','parse','leftTxt','Order\x20is\x20invalid:\x20','1\x20-\x20Unlock\x20orders','write','keys','includes','<b>','net-fiat','10586iUiUUz','exchanges','exec','order','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','path','USDC','fees','canceled','Cryptocom','startprice','entries','ORDERS.LOCKED','milliseconds','orderId','remove','Manual\x20balancing\x20required','\x20not\x20responding','Resetting\x20coin\x20results:\x20','Net\x20effect','API-key\x20format\x20invalid','bot','existsSync','BNB','symbol','Invalid\x20symbol:\x20','log','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#api-invalid','coin','filled','datetime','DDoSProtection','ORDERS.UNLOCKING','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','recovery','\x20>\x20','colorscheme','value','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','balancing\x20resumed','(((.+)+)+)+$','loadMarkets','headless','padEnd','total','PAXG','timestamp','Unfilled\x20order(s)\x20canceled\x20after\x20','progress','watchTrades','mkdirSync','2\x20-\x20Validate\x20orders:\x20','basecoin','must\x20be\x20greater\x20than\x20minimum\x20amount','change24h','customId','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#api-invalid','toUpperCase','sendPortfolioTelegram','\x20rejected\x20your\x20API\x20request\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#api-rejected','Error\x20details:','getHours','yyyy/MM/dd','join','fetchBalance','/output-000.log','-results.json','2.3.5','distribution','full','cost','loadSymbols()','watchTransactions()','9JJLIvD','Exchange','shift','trade','getPortfolio(1)','%\x20(','configuration','assign','getAllOrders()','\x20|\x20highest\x20fee:\x20','loading-canceled','privateKey','basecoinvalue','botname','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Limit\x20(high-margin)','\x20portfolio:</b>\x20\x0a\x0a','2\x20-\x20handling\x20FILLED\x20order:\x20','./config/','no\x20open\x20orders','timeshift','sort','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','.json','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','event','excluded','\x20/\x20','uncaughtException','ccxt','decrypt','secure','splice','\x20-\x20pausing\x20bot\x20for\x20','./logs/','Huobipro','cancelOrder','Exception\x20thrown\x20in\x20','success','getMinutes','RSA-OAEP','floor','page','data','has','Invalid\x20quantity','portfolio','starting-balance-','createOrder','highest','\x20|\x20','TUSD','Initializing\x20coin\x20results','\x20exchange\x20error','BUSD','\x20hour',':\x20Bot\x20','findIndex','toFixed','getPortfolio(0)','***','threshold','resetHistory','isEqual','added','buy','-events.json','time','Net\x20','slice','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','2314793BbxBTp','toString','pro','min','\x20minutes','recent20','BTC','bots','\x20metrics:</b>\x20\x0a\x0a','Pausing\x20for\x20','coins','getFullYear','<b>Bot\x20','1084237RPRrvW','bb-settings.json','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','startsWith','args','\x20|\x20lock\x20orders:\x20','fetchTickers()','substring','LOCKED','\x20>\x20[DEBUG]\x20','realized','number','request-time','password','\x20value','recreateCoinResults()','function','openOrders','storeHeadless','restart','side','************','apiPassword','round','error','\x20|\x20exchange:\x20','concat','\x20has\x20a\x2024h\x20drop\x20of\x20','storeFiat','/USD','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#api-invalid','Bitget','3rokVJt','find','padStart','ExchangeNotAvailable','Portfolio\x20change\x20detected:\x20','Bot\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','fetchTickers','Resetting\x20bot\x20history','map','send','PermissionDenied','none','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','usd','rightTxt','Transaction\x20detection\x20unblocked','kill','buys','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','freeze','Waited\x20','\x20orders\x20in\x20less\x20than\x20','</pre>','\x20-\x20bot\x20not\x20started','market','RequestTimeout','1127355tPhjeX','fetchOpenOrders','539TVYRGk','No\x20more\x20open\x20orders\x20-\x20','getOpenOrders()','60Wfknxh','cancelOrders()','final','percentage','bb-secure.json','/backup/','Saving\x20configuration','version','orderstatus','lowdb/adapters/FileSync','showConfig','push','search','currency','2\x20-\x20Handled\x20open\x20orders','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','starting-balances','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#api-invalid','stringify','<pre>','exchange','-config.json','4LkEIav','Binance','remainingSymbols','watchTrades()','ID:\x20','apiKey','sendMetricsTelegram','cloneDeep','yyyy-MM-dd\x27T\x27HH:mm:ss','fiat','removed','liquidity','getPortfolio(2)','\x20network\x20error','ask','\x20API\x20secret\x20is\x20invalid','12xAbkLn','argv','1\x20-\x20FILLED\x20known\x20order:\x20','ongoing','emitHistory','USD','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','breakeven','coin-loading-progress','startnumber','reverse','delta','changes','offset','event-history','forEach','autoliquidity','exchange\x20reloaded','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','type','indexOf','price','split','Executed\x20','format','UNLOCKING','debug','ExchangeError','average','deleteHistoryAlerts',':\x20timer\x20>','limit','BNB/','max','fetchTicker','writeFile','Huobi','NetworkError','closed','net-basecoin','sell','balancing\x20resumes\x20when\x20cooldown\x20ends','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Cex','startdate','Insufficient\x20funds\x20to\x20execute\x20order:\x20','valid','Failed\x20to\x20load\x20coin\x20data\x20for\x20','change','UNLOCKED','running','-------------------------------\x0a','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','replace','amount'];_0x5bdd=function(){return _0x5609a6;};return _0x5bdd();}async function initwsCcxt(){const _0x468ad1=_0xa4e499;initCycle++;const _0x516003=initCycle;let _0x56923d=[];config[_0x468ad1(0x1b6)][_0x468ad1(0x252)](_0x2c111a=>{const _0x44ccea=_0x468ad1;if(!_0x2c111a[_0x44ccea(0x1a2)]&&_0x2c111a[_0x44ccea(0x2fd)]!=config[_0x44ccea(0x315)])_0x56923d[_0x44ccea(0x228)](_0x2c111a[_0x44ccea(0x2f9)]);});if(!_0x56923d['includes'](stablecoins[_0x468ad1(0x2d4)][_0x468ad1(0x2f9)]))_0x56923d['push'](stablecoins[_0x468ad1(0x2d4)][_0x468ad1(0x2f9)]);if(!_0x56923d[_0x468ad1(0x2de)](stablecoins['usd']['symbol']))_0x56923d[_0x468ad1(0x228)](stablecoins[_0x468ad1(0x20b)][_0x468ad1(0x2f9)]);if(config['exchange'][_0x468ad1(0x1e0)](_0x468ad1(0x234))&&config[_0x468ad1(0x315)]!='PAXG'){if(!_0x56923d[_0x468ad1(0x2de)](_0x468ad1(0x263)+config[_0x468ad1(0x315)]))_0x56923d[_0x468ad1(0x228)](_0x468ad1(0x263)+config[_0x468ad1(0x315)]);}loadCoins(_0x56923d),_0x56923d=validateSymbols(_0x56923d);const _0x3283fc=async _0x7b1313=>{const _0x46c576=_0x468ad1;let _0x1e682b;try{const _0x28ecca=await getTickers(_0x7b1313);Object[_0x46c576(0x2ec)](_0x28ecca)[_0x46c576(0x252)](_0x395d62=>{const _0x19f26e=_0x46c576;_0x1e682b=_0x395d62[0x1][_0x19f26e(0x2f9)],global[_0x19f26e(0x294)][noslash(_0x1e682b)]=_0x395d62[0x1][_0x19f26e(0x27a)],global[_0x19f26e(0x273)][_0x1e682b]=_0x395d62[0x1][_0x19f26e(0x220)];});}catch(_0x778637){await handleError(_0x778637,'initTickers()',_0x1e682b);}},_0x283acd=async _0x3c3ae7=>{const _0x59e3a8=_0x468ad1;while(initCycle==_0x516003){if(!botPaused)try{const _0xe56369=await exchange[_0x59e3a8(0x312)](_0x3c3ae7);global[_0x59e3a8(0x294)][noslash(_0xe56369[0x0]['symbol'])]=_0xe56369[0x0]['price'],await sleep(0x3e8);}catch(_0x567470){if(!exchangeStopped)await handleError(_0x567470,_0x59e3a8(0x236),_0x3c3ae7);}else await sleep(0x64);}},_0x4c7620=async _0x1c06f2=>{const _0x4050eb=_0x468ad1;while(initCycle==_0x516003){if(!botPaused){let _0x2518f1;try{await sleep(0x3c*0x3e8);const _0x393e3c=await getTickers(_0x1c06f2);Object['entries'](_0x393e3c)[_0x4050eb(0x252)](_0x3739ef=>{const _0x1c6f3b=_0x4050eb;_0x2518f1=_0x3739ef[0x1][_0x1c6f3b(0x2f9)],global[_0x1c6f3b(0x273)][_0x2518f1]=_0x3739ef[0x1]['percentage'];});}catch(_0x1db07e){if(!exchangeStopped)await handleError(_0x1db07e,_0x4050eb(0x1e3),_0x2518f1);}}else await sleep(0x64);}},_0x3c72f0=async _0x469c45=>{const _0x30955a=_0x468ad1;while(initCycle==_0x516003){if(!botPaused)try{const _0x6afeac=await exchange[_0x30955a(0x2ba)](_0x469c45);initCycle==_0x516003&&_0x6afeac[_0x30955a(0x252)](_0x3c7c8e=>{updateNumberCoinsCcxt(_0x3c7c8e);});}catch(_0x19a3d3){if(!exchangeStopped)await handleError(_0x19a3d3,'watchOrders()');}else await sleep(0x64);}};_0x3283fc(_0x56923d),_0x4c7620(_0x56923d),_0x56923d['forEach'](_0x479ca2=>{_0x283acd(_0x479ca2),_0x3c72f0(_0x479ca2);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x58d590){const _0x2e9cb0=_0xa4e499;let _0x451148={};try{if(config[_0x2e9cb0(0x231)]!=_0x2e9cb0(0x2ea))_0x451148=await exchange[_0x2e9cb0(0x204)](_0x58d590);else for(const _0x476f06 of _0x58d590){const _0xa313c1=await exchange[_0x2e9cb0(0x265)](_0x476f06);_0x451148[_0x476f06]=_0xa313c1;}return _0x451148;}catch(_0x2f619a){throw _0x2f619a;}}async function watchTransactions(){const _0x2a47f6=_0xa4e499;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2e51a3=await getCoins(),[_0x2ca370,_0x38c727]=_0x2e51a3;let _0x20ad41=[];currentCoins['forEach'](_0x511aa0=>{const _0xe9a302=_0x146d,_0x37d5f9=_0x2ca370[_0xe9a302(0x1fe)](_0x5d84b4=>_0x5d84b4['coin']==_0x511aa0[_0xe9a302(0x2fd)]);if(_0x37d5f9){if(_0x511aa0[_0xe9a302(0x1e8)]!=_0x37d5f9[_0xe9a302(0x1e8)]){let _0x222769;if(_0x511aa0[_0xe9a302(0x2fd)]!=config[_0xe9a302(0x315)]){const _0x400858=global[_0xe9a302(0x294)][noslash(_0x511aa0[_0xe9a302(0x2f9)])];_0x222769=_0x511aa0[_0xe9a302(0x24d)]?0x1/_0x400858:_0x400858;}else _0x222769=0x1;_0x20ad41[_0xe9a302(0x228)]({'coin':_0x511aa0[_0xe9a302(0x2fd)],'symbol':_0x511aa0[_0xe9a302(0x2f9)],'price':_0x222769,'number':Number(formatResult(_0x37d5f9[_0xe9a302(0x1e8)]-_0x511aa0[_0xe9a302(0x1e8)],0x8)),'basecoinvalue':_0x222769*(_0x37d5f9[_0xe9a302(0x1e8)]-_0x511aa0[_0xe9a302(0x1e8)])});}}});if(_0x20ad41[_0x2a47f6(0x29e)]==0x1&&!blockTransactionDetection){if(config[_0x2a47f6(0x253)]){logger['debug'](_0x2a47f6(0x28b)+_0x20ad41[0x0][_0x2a47f6(0x194)]+_0x2a47f6(0x191)+lastFees[_0x2a47f6(0x1b9)]);if(lastFees['highest']==0x0||Math[_0x2a47f6(0x2be)](_0x20ad41[0x0][_0x2a47f6(0x194)])>lastFees[_0x2a47f6(0x1b9)]){delete _0x20ad41[0x0][_0x2a47f6(0x2f9)],delete _0x20ad41[0x0]['basecoinvalue'];let _0x2a115b=[],_0x3ad460=[...config['liquidity']]||[],_0x9de0c9=config[_0x2a47f6(0x23e)];_0x3ad460[_0x2a47f6(0x19d)]((_0x425c13,_0x3677ac)=>_0x425c13['date']>_0x3677ac['date']?-0x1:_0x3677ac[_0x2a47f6(0x28e)]>_0x425c13[_0x2a47f6(0x28e)]?0x1:0x0);const _0x279d99=getDate();if(_0x3ad460[0x0]){const _0x5c6439=fns['parse'](_0x3ad460[0x0][_0x2a47f6(0x28e)],'yyyy/MM/dd',new Date()),_0x1cff91=fns['parse'](_0x279d99,_0x2a47f6(0x31f),new Date());if(fns[_0x2a47f6(0x1c7)](_0x5c6439,_0x1cff91)){_0x2a115b=_0x3ad460[0x0]['changes'];const _0x44051a=_0x2a115b['find'](_0x3a5ed2=>_0x3a5ed2[_0x2a47f6(0x2fd)]==_0x20ad41[0x0][_0x2a47f6(0x2fd)]);_0x44051a?(_0x44051a[_0x2a47f6(0x1e8)]+=_0x20ad41[0x0][_0x2a47f6(0x1e8)],_0x44051a['number']==0x0&&(_0x2a115b=_0x2a115b[_0x2a47f6(0x2a5)](_0x169d60=>{const _0x1579d0=_0x2a47f6;return _0x169d60[_0x1579d0(0x2fd)]!=_0x20ad41[0x0][_0x1579d0(0x2fd)];}))):_0x2a115b['push'](_0x20ad41[0x0]);const _0x5a808f=_0x9de0c9[_0x2a47f6(0x1fe)](_0x612194=>_0x612194[_0x2a47f6(0x28e)]==_0x279d99);_0x5a808f[_0x2a47f6(0x24f)]=_0x2a115b;}else _0x9de0c9[_0x2a47f6(0x228)]({'date':_0x279d99,'changes':[_0x20ad41[0x0]]});}const _0x350cac=_0x9de0c9[_0x2a47f6(0x1fe)](_0x450de8=>_0x450de8[_0x2a47f6(0x28e)]==_0x279d99);if(_0x350cac){let _0xbdeb46=!![];_0x350cac[_0x2a47f6(0x24f)]['forEach'](_0x3e992c=>{const _0xce7298=_0x2a47f6;if(_0x3e992c[_0xce7298(0x1e8)]!=0x0)_0xbdeb46=![];}),_0xbdeb46&&(_0x9de0c9=_0x9de0c9[_0x2a47f6(0x2a5)](_0x355b40=>{return _0x355b40['date']!=_0x279d99;}));}let _0x68fb8d=dbConfig['get'](_0x2a47f6(0x2f6))['find']({'botID':botID})['value']();_0x68fb8d&&(dbConfig[_0x2a47f6(0x2b1)](_0x2a47f6(0x2f6))[_0x2a47f6(0x1fe)]({'botID':botID})[_0x2a47f6(0x18f)]({'liquidity':_0x9de0c9})[_0x2a47f6(0x2dc)](),config[_0x2a47f6(0x23e)]=_0x9de0c9),logHistory(_0x2a47f6(0x1ae),_0x2a47f6(0x201)+Math[_0x2a47f6(0x2be)](_0x20ad41[0x0]['number'])+'\x20'+_0x20ad41[0x0]['coin']+'\x20'+(_0x20ad41[0x0]['number']>0x0?'added':'removed')+_0x2a47f6(0x2bc)),proxyEmit(_0x2a47f6(0x18e),emittedConfiguration());}else logger[_0x2a47f6(0x25d)](_0x2a47f6(0x2ae)+Math[_0x2a47f6(0x2be)](_0x20ad41[0x0][_0x2a47f6(0x1e8)])+'\x20'+_0x20ad41[0x0][_0x2a47f6(0x2fd)]+'\x20'+(_0x20ad41[0x0]['number']>0x0?_0x2a47f6(0x1c8):_0x2a47f6(0x23d)));transactionDetected=!![];}else logger[_0x2a47f6(0x25d)](_0x2a47f6(0x201)+Math[_0x2a47f6(0x2be)](_0x20ad41[0x0][_0x2a47f6(0x1e8)])+'\x20'+_0x20ad41[0x0][_0x2a47f6(0x2fd)]+'\x20'+(_0x20ad41[0x0][_0x2a47f6(0x1e8)]>0x0?_0x2a47f6(0x1c8):_0x2a47f6(0x23d))+_0x2a47f6(0x2e5));}currentCoins=_0x2ca370,currentCoinsAll=_0x38c727,await sleep(watchTransactionsInterval);}catch(_0x5b845a){if(!exchangeStopped)await handleError(_0x5b845a,_0x2a47f6(0x187));}else await sleep(0x64);}}async function loadSymbols(){const _0x308875=_0xa4e499;try{markets=await exchange[_0x308875(0x30a)](),allSymbols=[],Object[_0x308875(0x2ec)](markets)[_0x308875(0x252)](_0x1deab7=>{const _0x27c31c=_0x308875;_0x1deab7[0x1]['active']&&_0x1deab7[0x1][_0x27c31c(0x2a3)]&&allSymbols['push'](_0x1deab7[0x0]);});}catch(_0xb810a7){throw _0xb810a7;}}function validateSymbols(_0x36f606){const _0x40157f=_0xa4e499;let _0x23c8b4=[];return _0x36f606[_0x40157f(0x252)](_0x17b48=>{const _0xb1c874=_0x40157f;!allSymbols['includes'](_0x17b48)?logHistory(_0xb1c874(0x1f5),_0xb1c874(0x2fa)+_0x17b48+_0xb1c874(0x196)):_0x23c8b4[_0xb1c874(0x228)](_0x17b48);}),_0x23c8b4;}async function initclient(){const _0x50572c=_0xa4e499;proxyEmit(_0x50572c(0x18e),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x50572c(0x285),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xc587a=getNormalizedPerformance();emitPerformance(_0xc587a),getStartingBalances(_0xc587a);}async function toggleBotMode(){const _0x22dda5=_0xa4e499;let _0xf142de=dbConfig[_0x22dda5(0x2b1)](_0x22dda5(0x2f6))[_0x22dda5(0x1fe)]({'botID':botID})['value']();if(_0xf142de){const _0x4ef923=!_0xf142de[_0x22dda5(0x30b)];dbConfig[_0x22dda5(0x2b1)](_0x22dda5(0x2f6))['find']({'botID':botID})[_0x22dda5(0x18f)]({'headless':_0x4ef923})['write'](),config[_0x22dda5(0x30b)]=_0x4ef923,proxyEmit(_0x22dda5(0x18e),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xf17ef5=_0xa4e499;process['send']({'updatebotmanager':!![]},_0x5cbb72=>{}),logger[_0xf17ef5(0x25d)]('Headless:\x20'+config[_0xf17ef5(0x30b)]);}async function loadCoins(_0x46bd81){const _0x4ac3cc=_0xa4e499;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2f402b,_0x38c962=0x0,_0x2ba9ad=0x0;_0x46bd81[_0x4ac3cc(0x252)](_0x15c72e=>{const _0x1789a4=_0x4ac3cc;loading['remainingSymbols'][_0x1789a4(0x228)](_0x15c72e);}),loadingCanceled=![];let _0x35b65d=![];while(_0x2f402b!=_0x46bd81[_0x4ac3cc(0x29e)]+maxLoadingProgress){_0x2f402b=loadingProgress,_0x46bd81['forEach'](_0x445021=>{const _0x706dc6=_0x4ac3cc;if(global[_0x706dc6(0x294)][noslash(_0x445021)]){loading[_0x706dc6(0x235)]=loading['remainingSymbols'][_0x706dc6(0x2a5)](_0x3606c6=>_0x3606c6!=_0x445021);if(!watchedSymbols[_0x706dc6(0x2de)](_0x445021))watchedSymbols[_0x706dc6(0x228)](_0x445021);_0x2f402b++;}}),loading['progress']=Math[_0x4ac3cc(0x1f4)](_0x2f402b/(_0x46bd81['length']+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x2ba9ad>0x1e*0x5&&(loading[_0x4ac3cc(0x28f)]=!![],emitLoadingProgress()),_0x2ba9ad>0x78*0x5&&!_0x35b65d&&(_0x35b65d=!![],logHistory(_0x4ac3cc(0x1f5),_0x4ac3cc(0x272)+loading[_0x4ac3cc(0x235)][_0x4ac3cc(0x320)](',\x20')+_0x4ac3cc(0x215)),logHistory(_0x4ac3cc(0x1f5),_0x4ac3cc(0x1d9)+loadCoinsRetryInterval/0xea60+_0x4ac3cc(0x1a0)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x117f2f=_0x4ac3cc;process['send']({'stop':_0x117f2f(0x1f0)},_0x13bbf8=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4ac3cc(0x2c1)]=!![],emitLoadingProgress();break;}else _0x38c962!=loading[_0x4ac3cc(0x311)]&&(_0x38c962=loading['progress'],emitLoadingProgress()),_0x2ba9ad++,await sleep(0xc8);}_0x2f402b==_0x46bd81[_0x4ac3cc(0x29e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4ac3cc(0x207)]({'status':_0x4ac3cc(0x2ac),'live':_0x4ac3cc(0x275)},_0x539bb7=>{}),_0x35b65d&&logHistory('success',_0x4ac3cc(0x2d2)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3c3415=_0xa4e499;proxyEmit(_0x3c3415(0x18e),{...emittedConfiguration(),'configstate':_0x3c3415(0x192)});}function emitLoadingProgress(){const _0x5b58b8=_0xa4e499;proxyEmit(_0x5b58b8(0x24b),loading);}async function getFiat(){const _0x18b5b9=_0xa4e499;let _0x14d959=global['ticker'][stablecoins[_0x18b5b9(0x2d4)][_0x18b5b9(0x2fd)]],_0xdd282d=global[_0x18b5b9(0x294)][stablecoins[_0x18b5b9(0x20b)]['coin']];return{'eur':Number(_0x14d959),'usd':Number(_0xdd282d)};}function capitalize(_0x3b33ef){const _0x3f9aba=_0xa4e499;return _0x3b33ef[_0x3f9aba(0x1e4)](0x0,0x1)[_0x3f9aba(0x31a)]()+_0x3b33ef['substring'](0x1);}function supportedExchanges(){const _0x364410=_0xa4e499,_0x2b3095=['ws',_0x364410(0x204),'fetchTicker','watchTrades',_0x364410(0x2ba),_0x364410(0x1ac),'createOrder','fetchOpenOrders','fetchClosedOrders',_0x364410(0x321)];let _0x2402ba=[],_0x152956=[],_0x5aeb66=ccxt['pro'][_0x364410(0x2e2)];_0x5aeb66[_0x364410(0x252)](_0x248bfe=>{const _0x4e32a9=_0x364410;try{const _0x56ab2b=new ccxt['pro'][_0x248bfe]();_0x152956[_0x4e32a9(0x228)](_0x56ab2b);}catch(_0x49e45d){}}),_0x152956[_0x364410(0x252)](_0x520670=>{const _0x22ca61=_0x364410;let _0x390d01=0x0;_0x2b3095['forEach'](_0x255460=>{const _0x2655dd=_0x146d;_0x255460 in _0x520670[_0x2655dd(0x1b4)]&&_0x520670[_0x2655dd(0x1b4)][_0x255460]&&_0x390d01++;}),_0x390d01==_0x2b3095[_0x22ca61(0x29e)]&&_0x2402ba['push'](capitalize(_0x520670['id']));});let _0x18c99f=[];return _0x5aeb66[_0x364410(0x252)](_0x5ee161=>{const _0x30b8f7=_0x364410;_0x5ee161=capitalize(_0x5ee161);if(!_0x2402ba[_0x30b8f7(0x2de)](_0x5ee161))_0x18c99f[_0x30b8f7(0x228)](_0x5ee161);}),_0x2402ba;}function setStartDatePerformance(){const _0x2c45df=_0xa4e499;if(config&&config[_0x2c45df(0x23e)][0x0][_0x2c45df(0x24f)]['length']!=0x0){const _0x401a6e=config[_0x2c45df(0x23e)][0x0][_0x2c45df(0x24f)];dbPerformance['get'](_0x2c45df(0x1b3))[_0x2c45df(0x1fe)]({'date':config[_0x2c45df(0x26f)]})[_0x2c45df(0x18f)]({'coins':_0x401a6e})[_0x2c45df(0x2dc)]();}}async function recreateCoinResults(){const _0x2f1039=_0xa4e499;let _0x108a64,_0xe37136=[];try{const _0x1239e0=fns[_0x2f1039(0x25b)](fns[_0x2f1039(0x29a)](config[_0x2f1039(0x26f)]['replace'](/\//g,'-')),_0x2f1039(0x23b));for(const _0x4dd8c8 of currentCoins){if(_0x4dd8c8[_0x2f1039(0x2fd)]!=config['basecoin']){let _0x551789=0x0,_0x107314,_0x303f65;_0x108a64=await getAllEventOrders(_0x4dd8c8['symbol']);if(_0x108a64[_0x2f1039(0x29e)]>0x0)_0x108a64['forEach'](_0x5164f9=>{const _0x44dbf4=_0x2f1039,_0x27154a=_0x4dd8c8[_0x44dbf4(0x2f9)]['includes'](config['basecoin']+'/');_0xe37136[_0x44dbf4(0x228)]({'datetime':_0x5164f9['datetime'],'coin':_0x4dd8c8['coin'],'symbol':_0x4dd8c8[_0x44dbf4(0x2f9)],'side':_0x5164f9['side'],'reverse':_0x27154a,'amount':formatResult(_0x5164f9['filled'],0x8),'filled':formatResult(_0x5164f9[_0x44dbf4(0x2fe)],0x8),'price':formatResult(_0x5164f9[_0x44dbf4(0x258)],0x8)}),_0x551789=_0x5164f9[_0x44dbf4(0x1f1)]==_0x44dbf4(0x1c9)?_0x551789+_0x5164f9[_0x44dbf4(0x2fe)]:_0x551789-_0x5164f9[_0x44dbf4(0x2fe)];if(!_0x303f65)_0x303f65=_0x5164f9[_0x44dbf4(0x258)];});_0x107314=_0x4dd8c8[_0x2f1039(0x1e8)]-_0x551789;let _0xd5ad53;config[_0x2f1039(0x23e)][_0x2f1039(0x252)](_0xe5123d=>{const _0x86df91=_0x2f1039;!_0xd5ad53&&(_0xd5ad53=_0xe5123d[_0x86df91(0x24f)][_0x86df91(0x1fe)](_0x1a7f7a=>_0x1a7f7a[_0x86df91(0x2fd)]==_0x4dd8c8[_0x86df91(0x2fd)]),_0xd5ad53&&(_0x107314=_0xd5ad53[_0x86df91(0x1e8)],_0x303f65=_0xd5ad53[_0x86df91(0x258)]));});let _0x307cc2=dbCoinResults[_0x2f1039(0x2b1)](_0x2f1039(0x1da))[_0x2f1039(0x1fe)]({'coin':_0x4dd8c8[_0x2f1039(0x2fd)]})['value']();_0x307cc2={'coin':_0x4dd8c8['coin'],'number':_0x107314,'breakeven':_0x303f65,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2f1039(0x2b1)]('coins')[_0x2f1039(0x1fe)]({'coin':_0x4dd8c8['coin']})['assign'](_0x307cc2)[_0x2f1039(0x2dc)]();}}_0xe37136[_0x2f1039(0x19d)]((_0x21d137,_0x96bd4f)=>_0x21d137[_0x2f1039(0x2ff)]>_0x96bd4f[_0x2f1039(0x2ff)]?0x1:_0x96bd4f[_0x2f1039(0x2ff)]>_0x21d137[_0x2f1039(0x2ff)]?-0x1:0x0);let _0x48db0f=0x0;for(let _0x4d56da of _0xe37136){await updateCoinResults(_0x4d56da,!![]);}}catch(_0x553516){await handleError(_0x553516,_0x2f1039(0x1ec));}}async function getAllEventOrders(_0xaceba4){const _0x2031af=_0xa4e499;let _0x23de41=[],_0x3fc614=dbLogs[_0x2031af(0x2b1)](_0x2031af(0x2c4))[_0x2031af(0x2a5)](_0x36f52f=>{const _0x549e3c=_0x2031af,_0xf092ed=_0x36f52f[_0x549e3c(0x1a1)][_0x549e3c(0x2a1)]();return _0xf092ed['includes'](_0xaceba4[_0x549e3c(0x2a1)]())&&(_0xf092ed[_0x549e3c(0x2de)](_0x549e3c(0x216))&&_0xf092ed[_0x549e3c(0x2de)](_0x549e3c(0x2e4))||_0xf092ed[_0x549e3c(0x2de)]('filled')&&_0xf092ed[_0x549e3c(0x2de)]('order'));})[_0x2031af(0x2c9)]('time')[_0x2031af(0x306)]();return _0x3fc614[_0x2031af(0x252)](_0x1cdabf=>{const _0x3b1391=_0x2031af,_0x24e01d=_0x1cdabf[_0x3b1391(0x1a1)][_0x3b1391(0x2de)]('sell')?_0x3b1391(0x26b):_0x3b1391(0x1c9),_0x4edc72=/#([0-9]|\.)+\s/i,_0x34c94a=Number(_0x4edc72[_0x3b1391(0x2e3)](_0x1cdabf[_0x3b1391(0x1a1)])[0x0][_0x3b1391(0x1cd)](0x1)),_0x41c451=/@([0-9]|\.)+$/i,_0x46ff17=Number(_0x41c451[_0x3b1391(0x2e3)](_0x1cdabf[_0x3b1391(0x1a1)])[0x0][_0x3b1391(0x1cd)](0x1));_0x23de41[_0x3b1391(0x228)]({'datetime':_0x1cdabf[_0x3b1391(0x1cb)],'coin':symbolToCoin(_0xaceba4),'symbol':_0xaceba4,'side':_0x24e01d,'amount':_0x34c94a,'filled':_0x34c94a,'price':_0x46ff17});}),_0x23de41;}async function getAllOrders(_0x2151de,_0x5adb2a){const _0x13e1db=_0xa4e499;let _0x13df64=[];while(_0x5adb2a<exchange[_0x13e1db(0x2ee)]()){const _0x507434=0x1f4;try{const _0x54a8e6=await exchange['fetchClosedOrders'](_0x2151de,_0x5adb2a,_0x507434);if(_0x54a8e6[_0x13e1db(0x29e)])_0x5adb2a=_0x54a8e6[_0x54a8e6[_0x13e1db(0x29e)]-0x1][_0x13e1db(0x30f)]+0x1,_0x13df64=_0x13df64[_0x13e1db(0x1f7)](_0x54a8e6);else break;}catch(_0x2704e8){await handleError(_0x2704e8,_0x13e1db(0x190),_0x2151de);}}return _0x13df64;}async function validate24hChanges(){const _0x3a9a36=_0xa4e499;for(const _0x4da64a of currentCoins){if(_0x4da64a[_0x3a9a36(0x2fd)]!=config[_0x3a9a36(0x315)]){let _0xa94f60;_0x4da64a['reverse']?_0xa94f60=formatResult((0x1/(global[_0x3a9a36(0x273)][noslash(_0x4da64a[_0x3a9a36(0x2f9)])]/0x64+0x1)-0x1)*0x64,0x3):_0xa94f60=global[_0x3a9a36(0x273)][noslash(_0x4da64a[_0x3a9a36(0x2f9)])],_0xa94f60<config[_0x3a9a36(0x317)]&&(logHistory(_0x3a9a36(0x1f5),_0x4da64a[_0x3a9a36(0x2fd)]+_0x3a9a36(0x1f8)+_0xa94f60+'%'),logHistory(_0x3a9a36(0x1f5),_0x3a9a36(0x255)),logHistory(_0x3a9a36(0x1f5),_0x3a9a36(0x1df)),await storeHeadless({'headless':![]}));}}}function _0x146d(_0x445a0c,_0x27b6fc){const _0x31cc56=_0x5bdd();return _0x146d=function(_0x451d07,_0x1fcbea){_0x451d07=_0x451d07-0x182;let _0x5bddb7=_0x31cc56[_0x451d07];return _0x5bddb7;},_0x146d(_0x445a0c,_0x27b6fc);}function isOlderVersion(_0x3d21ce,_0x42ee11){const _0x3f0a91=_0xa4e499;if(!_0x3d21ce)return!![];const _0x2fae2d=_0x42ee11[_0x3f0a91(0x259)]('.'),_0x49c5b0=_0x3d21ce[_0x3f0a91(0x259)]('.');for(var _0x513004=0x0;_0x513004<_0x49c5b0['length'];_0x513004++){const _0x57e923=~~_0x49c5b0[_0x513004],_0x57182a=~~_0x2fae2d[_0x513004];if(_0x57e923<_0x57182a)return!![];if(_0x57e923>_0x57182a)return![];}return![];}async function oneTimeMigration(){const _0x114b53=_0xa4e499;let _0xe912ae=dbLogs['get']('version')[_0x114b53(0x306)]();if(isOlderVersion(_0xe912ae,_0x114b53(0x182))){let _0x49a44f=[];const _0x78b5d9=dbLogs[_0x114b53(0x2b1)](_0x114b53(0x2c4))[_0x114b53(0x306)]();_0x78b5d9[_0x114b53(0x252)](_0x88a94c=>{const _0x43e5f4=_0x114b53;_0x49a44f['push']({'time':_0x88a94c['time'],'type':_0x88a94c['type'],'event':_0x88a94c[_0x43e5f4(0x1a1)]});}),dbLogs[_0x114b53(0x2b1)](_0x114b53(0x2c4))[_0x114b53(0x18f)](_0x49a44f)['write']();}let _0x123095=dbConfig[_0x114b53(0x2b1)]('version')[_0x114b53(0x306)]();if(isOlderVersion(_0x123095,_0x114b53(0x182))){let _0x23395e=dbConfig[_0x114b53(0x2b1)]('bot')['find']({'botID':botID})[_0x114b53(0x306)]();if(_0x23395e){let _0x195278=[];_0x23395e[_0x114b53(0x1b6)]['forEach'](_0x21450c=>{const _0x46170d=_0x114b53;_0x195278[_0x46170d(0x228)]({'coin':_0x21450c[_0x46170d(0x2fd)],'number':_0x21450c[_0x46170d(0x24c)],'price':_0x21450c[_0x46170d(0x2eb)]}),delete _0x21450c['startnumber'],delete _0x21450c['startprice'];});if(_0x195278[_0x114b53(0x29e)]!==0x0)fs[_0x114b53(0x266)](configbackuppath+(_0x114b53(0x1b7)+botID+_0x114b53(0x19f)),JSON[_0x114b53(0x22f)](_0x195278,null,0x4),function(_0x19dd40){if(_0x19dd40){}});const _0x34adad=(_0x58bdbb,_0x103932)=>{const _0x52133a=_0x114b53;let _0x1d01b4=[];_0x103932['forEach'](_0x29d51a=>{const _0x285d03=_0x146d,_0x4c7d55=_0x58bdbb[_0x285d03(0x1fe)](_0x484ea8=>_0x484ea8[_0x285d03(0x2fd)]==_0x29d51a[_0x285d03(0x2fd)]);if(!_0x4c7d55)_0x1d01b4[_0x285d03(0x228)](_0x29d51a);});let _0x555f69=[];return _0x58bdbb[_0x52133a(0x252)](_0x224841=>{const _0x595dfe=_0x52133a,_0x1a01b4=_0x103932['find'](_0x402745=>_0x402745[_0x595dfe(0x2fd)]==_0x224841[_0x595dfe(0x2fd)]);if(!_0x1a01b4||_0x1a01b4['number']==0x0&&_0x224841['number']!=0x0)_0x555f69[_0x595dfe(0x228)](_0x224841);}),{'missingDay1':_0x1d01b4,'notInDay2':_0x555f69};},_0x33cb57=dbPerformance[_0x114b53(0x2b1)](_0x114b53(0x1b3))[_0x114b53(0x23a)]()['value']();if(_0x33cb57[_0x114b53(0x29e)]>0x1){const {missingDay1:_0x5c70bc,notInDay2:_0x1038e2}=_0x34adad(_0x195278,_0x33cb57[0x1]['coins']);_0x195278=[..._0x195278,..._0x5c70bc],_0x1038e2['forEach'](_0x574da8=>{const _0xe845a=_0x114b53;let _0x20577f=_0x195278[_0xe845a(0x1c1)](_0x450394=>_0x450394[_0xe845a(0x2fd)]==_0x574da8['coin']);_0x20577f!=-0x1&&_0x195278[_0xe845a(0x1a8)](_0x20577f,0x1);});}_0x195278[_0x114b53(0x19d)]((_0x3f1223,_0x362ad9)=>_0x3f1223[_0x114b53(0x2fd)]>_0x362ad9['coin']?0x1:_0x362ad9[_0x114b53(0x2fd)]>_0x3f1223[_0x114b53(0x2fd)]?-0x1:0x0);let _0x55cdde=[{'date':_0x23395e[_0x114b53(0x26f)],'changes':_0x195278}];_0x33cb57[_0x114b53(0x29e)]>0x2&&_0x33cb57[_0x114b53(0x252)]((_0x1629e2,_0x5edcf5)=>{const _0x1a5dd5=_0x114b53;if(_0x5edcf5>0x0&&_0x5edcf5<_0x33cb57[_0x1a5dd5(0x29e)]-0x1){const {missingDay1:_0x3c83dc,notInDay2:_0x1f9c59}=_0x34adad(_0x33cb57[_0x5edcf5][_0x1a5dd5(0x1da)],_0x33cb57[_0x5edcf5+0x1][_0x1a5dd5(0x1da)]);_0x195278=[],(_0x3c83dc[_0x1a5dd5(0x29e)]!=0x0||_0x1f9c59[_0x1a5dd5(0x29e)]!=0x0)&&(_0x3c83dc[_0x1a5dd5(0x29e)]!=0x0&&_0x195278[_0x1a5dd5(0x228)](..._0x3c83dc),_0x1f9c59[_0x1a5dd5(0x29e)]!=0x0&&(_0x1f9c59[_0x1a5dd5(0x252)](_0x2d8df4=>{const _0x573dcc=_0x1a5dd5;_0x2d8df4[_0x573dcc(0x1e8)]=-_0x2d8df4['number'];}),_0x195278['push'](..._0x1f9c59)),_0x195278[_0x1a5dd5(0x19d)]((_0x471963,_0x117540)=>_0x471963['coin']>_0x117540[_0x1a5dd5(0x2fd)]?0x1:_0x117540[_0x1a5dd5(0x2fd)]>_0x471963[_0x1a5dd5(0x2fd)]?-0x1:0x0),_0x55cdde[_0x1a5dd5(0x228)]({'date':_0x33cb57[_0x5edcf5+0x1][_0x1a5dd5(0x28e)],'changes':_0x195278}));}}),dbConfig[_0x114b53(0x2b1)](_0x114b53(0x2f6))[_0x114b53(0x1fe)]({'botID':botID})[_0x114b53(0x18f)]({..._0x23395e,'liquidity':_0x55cdde})[_0x114b53(0x2dc)]();}}if(isOlderVersion(_0x123095,_0x114b53(0x2bf))){let _0x17b280=dbConfig[_0x114b53(0x2b1)](_0x114b53(0x2f6))[_0x114b53(0x1fe)]({'botID':botID})[_0x114b53(0x306)]();if(_0x17b280){const _0x147fd4=_0x17b280[_0x114b53(0x231)],_0x23698f=_0x147fd4?capitalize(_0x147fd4):_0x114b53(0x234);dbConfig[_0x114b53(0x2b1)](_0x114b53(0x2f6))['find']({'botID':botID})[_0x114b53(0x18f)]({'exchange':_0x23698f})[_0x114b53(0x2dc)]();}}let _0x599e8c=dbPerformance[_0x114b53(0x2b1)]('version')[_0x114b53(0x306)]();isOlderVersion(_0x599e8c,'2.3.5')&&setStartDatePerformance();let _0x5aa947=dbCoinResults[_0x114b53(0x2b1)](_0x114b53(0x224))[_0x114b53(0x306)]();if(isOlderVersion(_0x5aa947,_0x114b53(0x29f))){let _0x2b142d=dbCoinResults[_0x114b53(0x2b1)](_0x114b53(0x1da))[_0x114b53(0x306)]();if(_0x2b142d[_0x114b53(0x29e)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4bd40f=_0xa4e499;dbConfig[_0x4bd40f(0x2b4)](_0x4bd40f(0x224),serverversion)[_0x4bd40f(0x2dc)](),dbPerformance[_0x4bd40f(0x2b4)]('version',serverversion)['write'](),dbLogs[_0x4bd40f(0x2b4)](_0x4bd40f(0x224),serverversion)[_0x4bd40f(0x2dc)](),dbCoinResults[_0x4bd40f(0x2b4)](_0x4bd40f(0x224),serverversion)[_0x4bd40f(0x2dc)]();}function getConfiguration(_0xdefb06){const _0x59f03c=_0xa4e499;let _0x11c9c4=dbConfig['get'](_0x59f03c(0x2f6))['find']({'botID':_0xdefb06})[_0x59f03c(0x306)]();if(_0x11c9c4){let _0x5c168f=![];typeof _0x11c9c4['threshold']=='string'&&(_0x11c9c4={..._0x11c9c4,'threshold':Number(_0x11c9c4[_0x59f03c(0x1c5)])},_0x5c168f=!![]),_0x11c9c4[_0x59f03c(0x317)]==undefined&&(_0x11c9c4={..._0x11c9c4,'change24h':-0x14},_0x5c168f=!![]),_0x11c9c4[_0x59f03c(0x23c)]==undefined&&(_0x11c9c4={..._0x11c9c4,'fiat':_0x59f03c(0x248)},_0x5c168f=!![]),_0x11c9c4[_0x59f03c(0x27e)]==undefined&&(_0x11c9c4={..._0x11c9c4,'onepagemode':settings[_0x59f03c(0x27e)]},_0x5c168f=!![]),_0x11c9c4[_0x59f03c(0x305)]==undefined&&(_0x11c9c4={..._0x11c9c4,'colorscheme':'red_yellow_blue'},_0x5c168f=!![]),_0x11c9c4[_0x59f03c(0x253)]==undefined&&(_0x11c9c4={..._0x11c9c4,'autoliquidity':!![]},_0x5c168f=!![]),_0x5c168f&&(_0x11c9c4={'botID':_0x11c9c4['botID'],'exchange':_0x11c9c4[_0x59f03c(0x231)],'apiKey':_0x11c9c4['apiKey'],'apiSecret':_0x11c9c4[_0x59f03c(0x2a9)],'apiPassword':_0x11c9c4[_0x59f03c(0x1f3)],'basecoin':_0x11c9c4[_0x59f03c(0x315)],'botname':_0x11c9c4[_0x59f03c(0x195)],'showname':_0x11c9c4[_0x59f03c(0x27d)],'threshold':_0x11c9c4['threshold'],'ordertype':_0x11c9c4[_0x59f03c(0x2b0)],'timeout':_0x11c9c4[_0x59f03c(0x28f)],'fiat':_0x11c9c4['fiat'],'startdate':_0x11c9c4[_0x59f03c(0x26f)],'recreate':_0x11c9c4[_0x59f03c(0x2a4)],'timeshift':_0x11c9c4[_0x59f03c(0x19c)],'onepagemode':_0x11c9c4['onepagemode'],'headless':_0x11c9c4[_0x59f03c(0x30b)],'cooldown':_0x11c9c4[_0x59f03c(0x290)],'change24h':_0x11c9c4[_0x59f03c(0x317)],'emojibuy':_0x11c9c4['emojibuy'],'emojisell':_0x11c9c4[_0x59f03c(0x2d0)],'colorscheme':_0x11c9c4[_0x59f03c(0x305)],'portfolio':_0x11c9c4[_0x59f03c(0x1b6)],'autoliquidity':_0x11c9c4['autoliquidity'],'liquidity':_0x11c9c4[_0x59f03c(0x23e)],'openOrders':_0x11c9c4[_0x59f03c(0x1ee)]},dbConfig[_0x59f03c(0x2b1)]('bot')[_0x59f03c(0x2f0)]()[_0x59f03c(0x2dc)](),dbConfig[_0x59f03c(0x2b1)](_0x59f03c(0x2f6))['push'](_0x11c9c4)[_0x59f03c(0x2dc)]());}else _0x11c9c4={'botID':_0xdefb06,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x59f03c(0x202)+_0xdefb06,'showname':![],'threshold':0x3,'ordertype':_0x59f03c(0x216),'timeout':0x14,'fiat':_0x59f03c(0x248),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x59f03c(0x19c)],'onepagemode':settings[_0x59f03c(0x27e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x11c9c4;}function emittedConfiguration(){const _0x30ba6b=_0xa4e499;let _0x191dfc;if(config[_0x30ba6b(0x238)]=='')_0x191dfc={...config,'configstate':_0x30ba6b(0x2ad)};else config[_0x30ba6b(0x238)]==_0x30ba6b(0x1c4)?_0x191dfc={...config,'configstate':_0x30ba6b(0x303)}:(_0x191dfc={...config,'apiKey':_0x30ba6b(0x1f2),'apiSecret':_0x30ba6b(0x1f2)},config[_0x30ba6b(0x1f3)]&&(_0x191dfc[_0x30ba6b(0x1f3)]=_0x30ba6b(0x1f2)));return _0x191dfc;}function getSettings(){const _0x2e9de9=_0xa4e499;return dbSettings[_0x2e9de9(0x2b1)]('settings')['value']();}function getSecure(){const _0x517ca5=_0xa4e499;return dbSecure['get'](_0x517ca5(0x1a7))[_0x517ca5(0x306)]()||{};}function updateTimeshift(_0x25e669){const _0xf40202=_0xa4e499;let _0x3ed310=dbConfig[_0xf40202(0x2b1)](_0xf40202(0x2f6))[_0xf40202(0x1fe)]({'botID':botID})[_0xf40202(0x306)]();_0x3ed310&&dbConfig[_0xf40202(0x2b1)](_0xf40202(0x2f6))[_0xf40202(0x1fe)]({'botID':botID})['assign']({'timeshift':_0x25e669})[_0xf40202(0x2dc)](),config[_0xf40202(0x19c)]=_0x25e669,proxyEmit(_0xf40202(0x18e),emittedConfiguration());}function updateOnepagemode(_0x47dceb){const _0x49571c=_0xa4e499;let _0x7c53c6=dbConfig[_0x49571c(0x2b1)](_0x49571c(0x2f6))[_0x49571c(0x1fe)]({'botID':botID})['value']();_0x7c53c6&&dbConfig[_0x49571c(0x2b1)](_0x49571c(0x2f6))['find']({'botID':botID})[_0x49571c(0x18f)]({'onepagemode':_0x47dceb})['write'](),config[_0x49571c(0x27e)]=_0x47dceb,proxyEmit(_0x49571c(0x18e),emittedConfiguration());}async function storeConfiguration(_0x25e46b){const _0xe60181=_0xa4e499;logger[_0xe60181(0x25d)](_0xe60181(0x223));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xe60181(0x25d)](_0xe60181(0x283));let _0x11b1b9=![],_0x334f8e=![],_0x212ed5=[];_0x25e46b[_0xe60181(0x1b6)][_0xe60181(0x252)](_0x493e5b=>{const _0x46a0ea=_0xe60181;if(!_0x493e5b[_0x46a0ea(0x1a2)]&&_0x493e5b[_0x46a0ea(0x2fd)]!=_0x25e46b[_0x46a0ea(0x315)])_0x212ed5[_0x46a0ea(0x228)](_0x493e5b[_0x46a0ea(0x2f9)]);}),_0x212ed5[_0xe60181(0x252)](_0x2dde60=>{const _0x2f5182=_0xe60181,_0x1b60f1=currentCoins[_0x2f5182(0x1fe)](_0x3c6656=>_0x3c6656['symbol']==_0x2dde60);!_0x1b60f1&&(_0x11b1b9=!![]);}),currentCoins[_0xe60181(0x252)](_0x12fd87=>{const _0x5792bb=_0xe60181;if(_0x12fd87[_0x5792bb(0x2fd)]!=config[_0x5792bb(0x315)]){const _0x16b44f=_0x212ed5[_0x5792bb(0x1fe)](_0x3c5618=>_0x3c5618==_0x12fd87['symbol']);!_0x16b44f&&(_0x11b1b9=!![]);}}),_0x25e46b[_0xe60181(0x1b6)][_0xe60181(0x252)](_0x2df14f=>{const _0x43d246=_0xe60181,_0x4722ca=config[_0x43d246(0x1b6)][_0x43d246(0x1fe)](_0x387c81=>_0x387c81[_0x43d246(0x2fd)]==_0x2df14f['coin']);if(_0x4722ca&&_0x2df14f[_0x43d246(0x250)]!=_0x4722ca[_0x43d246(0x250)])_0x334f8e=!![];});let _0x32d779=dbConfig[_0xe60181(0x2b1)]('bot')[_0xe60181(0x1fe)]({'botID':botID})[_0xe60181(0x306)]();_0x25e46b={..._0x25e46b,'apiKey':crypt['decrypt'](secure['privateKey'],_0x25e46b[_0xe60181(0x238)])[_0xe60181(0x29c)],'apiSecret':crypt[_0xe60181(0x1a6)](secure[_0xe60181(0x193)],_0x25e46b[_0xe60181(0x2a9)])['message']};_0x25e46b['apiPassword']&&(_0x25e46b[_0xe60181(0x1f3)]=crypt[_0xe60181(0x1a6)](secure[_0xe60181(0x193)],_0x25e46b[_0xe60181(0x1f3)])[_0xe60181(0x29c)]);let _0x469d99=![];if(_0x32d779){_0x25e46b['apiKey']=='************'?_0x25e46b['apiKey']=config[_0xe60181(0x238)]:_0x469d99=!![];_0x25e46b['apiSecret']=='************'?_0x25e46b[_0xe60181(0x2a9)]=config['apiSecret']:_0x469d99=!![];if(_0x25e46b[_0xe60181(0x1f3)]==_0xe60181(0x1f2))_0x25e46b[_0xe60181(0x1f3)]=config['apiPassword'];else{if(_0x25e46b[_0xe60181(0x1f3)])_0x469d99=!![];}dbConfig[_0xe60181(0x2b1)]('bot')['find']({'botID':botID})['assign'](_0x25e46b)[_0xe60181(0x2dc)]();}else dbConfig[_0xe60181(0x2b1)](_0xe60181(0x2f6))[_0xe60181(0x228)](_0x25e46b)[_0xe60181(0x2dc)](),_0x469d99=!![],process[_0xe60181(0x207)]({'status':_0xe60181(0x2ac),'live':'running'},_0x3be34e=>{});process[_0xe60181(0x207)]({'botname':_0x25e46b[_0xe60181(0x195)]},_0x15c8c7=>{}),config={..._0x25e46b},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x469d99)await reset(!![]);else _0x11b1b9||_0x334f8e?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0xe60181(0x25d)](_0xe60181(0x20d));}async function storeHeadless(_0x4457a9){const _0x4a5eae=_0xa4e499,_0x38d29f={...config,'headless':_0x4457a9[_0x4a5eae(0x30b)]};let _0x45f602=dbConfig[_0x4a5eae(0x2b1)]('bot')[_0x4a5eae(0x1fe)]({'botID':botID})[_0x4a5eae(0x306)]();_0x45f602&&dbConfig['get']('bot')[_0x4a5eae(0x1fe)]({'botID':botID})['assign'](_0x38d29f)[_0x4a5eae(0x2dc)](),config={..._0x38d29f},updateBotManager(),proxyEmit(_0x4a5eae(0x18e),emittedConfiguration());}async function storeFiat(_0x397b80){const _0x599262=_0xa4e499,_0x5d2976={...config,'fiat':_0x397b80};let _0x2ee6fa=dbConfig[_0x599262(0x2b1)](_0x599262(0x2f6))[_0x599262(0x1fe)]({'botID':botID})[_0x599262(0x306)]();_0x2ee6fa&&dbConfig[_0x599262(0x2b1)](_0x599262(0x2f6))['find']({'botID':botID})['assign'](_0x5d2976)[_0x599262(0x2dc)](),config={..._0x5d2976},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x55a269=_0xa4e499;logger['full'](_0x55a269(0x205));try{if(fs[_0x55a269(0x2f7)](path[_0x55a269(0x320)](configpath,_0x55a269(0x2d5)+botID+_0x55a269(0x1ca))))fs[_0x55a269(0x296)](path[_0x55a269(0x320)](configpath,_0x55a269(0x2d5)+botID+_0x55a269(0x1ca)));if(fs[_0x55a269(0x2f7)](path[_0x55a269(0x320)](configpath,_0x55a269(0x2d5)+botID+'-performance.json')))fs[_0x55a269(0x296)](path['join'](configpath,'bot-'+botID+_0x55a269(0x27b)));if(fs[_0x55a269(0x2f7)](path[_0x55a269(0x320)](configpath,_0x55a269(0x2d5)+botID+_0x55a269(0x323))))fs[_0x55a269(0x296)](path[_0x55a269(0x320)](configpath,_0x55a269(0x2d5)+botID+_0x55a269(0x323)));}catch(_0x46894b){if(_0x46894b)logger[_0x55a269(0x184)](_0x55a269(0x2a0),_0x46894b);}const _0x556660=getDate();let _0x4bf5a1=[];currentCoins[_0x55a269(0x252)](_0x5b8a2b=>{const _0x57b18b=_0x55a269;_0x4bf5a1[_0x57b18b(0x228)]({'coin':_0x5b8a2b[_0x57b18b(0x2fd)],'number':_0x5b8a2b[_0x57b18b(0x1e8)],'price':_0x5b8a2b[_0x57b18b(0x27a)]});});let _0x19bb76=dbConfig[_0x55a269(0x2b1)](_0x55a269(0x2f6))['find']({'botID':botID})[_0x55a269(0x306)]();_0x19bb76&&(dbConfig[_0x55a269(0x2b1)](_0x55a269(0x2f6))[_0x55a269(0x1fe)]({'botID':botID})[_0x55a269(0x18f)]({'liquidity':[{'date':_0x556660,'changes':_0x4bf5a1}]})[_0x55a269(0x2dc)](),config[_0x55a269(0x23e)]=[]),process[_0x55a269(0x207)]({'stop':'restart'},_0x17d827=>{});}function noslash(_0x10b3a0){const _0x3716f3=_0xa4e499;return _0x10b3a0[_0x3716f3(0x278)]('/','');}function updateHighestFee(_0x55b503){const _0x3f8865=_0xa4e499;if(_0x55b503[_0x3f8865(0x24d)]){let _0x5b50ff={'filled':_0x55b503['filled']*_0x55b503[_0x3f8865(0x258)],'amount':_0x55b503[_0x3f8865(0x2fe)]*_0x55b503[_0x3f8865(0x258)],'side':_0x55b503['side']==_0x3f8865(0x26b)?_0x3f8865(0x1c9):'sell','price':0x1/_0x55b503['price']};_0x55b503={..._0x55b503,..._0x5b50ff};}const _0x1f01dd=defaultFee*_0x55b503[_0x3f8865(0x2fe)]*_0x55b503['price'];lastFees['recent20'][_0x3f8865(0x29e)]===0x14&&lastFees[_0x3f8865(0x1d5)][_0x3f8865(0x18a)](),lastFees['recent20']['push'](_0x1f01dd),lastFees['highest']=Math[_0x3f8865(0x264)](...lastFees[_0x3f8865(0x1d5)]);}async function updateNumberCoinsCcxt(_0x30aba6){const _0x4adf59=_0xa4e499;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x30aba6[_0x4adf59(0x2f9)]+'\x20|\x20'+_0x30aba6['status']+_0x4adf59(0x1ba)+_0x30aba6[_0x4adf59(0x2fe)]+_0x4adf59(0x1a3)+_0x30aba6[_0x4adf59(0x279)]+_0x4adf59(0x1ba)+_0x30aba6['id']);let _0x38463a=_0x30aba6[_0x4adf59(0x2af)],_0x3643b4=![];currentCoins[_0x4adf59(0x252)](_0x5efa0e=>{const _0x5b5ce9=_0x4adf59;_0x5efa0e[_0x5b5ce9(0x2f9)]==_0x30aba6[_0x5b5ce9(0x2f9)]&&(_0x3643b4=!![]);});if(!_0x3643b4)return;const _0x5da861=currentCoins['find'](_0x1b0d83=>_0x1b0d83[_0x4adf59(0x2f9)]==_0x30aba6[_0x4adf59(0x2f9)]),_0x39f54b=_0x943eaa=>{const _0x368d77=_0x4adf59;if(_0x5da861)_0x5da861[_0x368d77(0x225)]=_0x943eaa;};if(_0x38463a=='open')_0x39f54b(_0x4adf59(0x28c));else{if(_0x38463a=='canceled'){_0x39f54b(_0x4adf59(0x2e9));const _0xd1960c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd1960c,await getOpenOrders(),handleOpenOrders();}else{if(_0x38463a==_0x4adf59(0x269)){let _0x432674=![];if(lastOrders)for(const _0x2fc144 of lastOrders){const _0x54fafa=0xc8,_0x4b072b=0x1388;let _0x9b0fc0=0x0;while(!_0x2fc144[_0x4adf59(0x2ef)]&&_0x9b0fc0*_0x54fafa<_0x4b072b){_0x9b0fc0++,await sleep(_0x54fafa);}if(_0x9b0fc0>0x0)logger[_0x4adf59(0x25d)](_0x4adf59(0x212)+_0x9b0fc0*_0x54fafa/0x3e8+_0x4adf59(0x28a));if(_0x2fc144[_0x4adf59(0x2ef)]==_0x30aba6['id']){logger[_0x4adf59(0x25d)](_0x4adf59(0x245)+_0x30aba6['id']),_0x432674=!![];if(_0x2fc144['filled']==0x0){logger[_0x4adf59(0x25d)](_0x4adf59(0x199)+_0x30aba6['id']);if(_0x30aba6['average'])_0x2fc144[_0x4adf59(0x258)]=_0x30aba6[_0x4adf59(0x25f)];else{if(_0x30aba6[_0x4adf59(0x258)])_0x2fc144[_0x4adf59(0x258)]=_0x30aba6[_0x4adf59(0x258)];else{}}_0x2fc144[_0x4adf59(0x2fe)]=_0x30aba6[_0x4adf59(0x2fe)],updateHighestFee(_0x2fc144),_0x39f54b('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x2ccd20=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2ccd20;}_0x2fc144[_0x4adf59(0x297)]={'currency':_0x30aba6[_0x4adf59(0x297)]?_0x30aba6['fee'][_0x4adf59(0x22a)]:null,'cost':_0x30aba6[_0x4adf59(0x297)]?_0x30aba6['fee'][_0x4adf59(0x185)]:0x0},await updateCoinResults(_0x2fc144);}}}if(!_0x432674){logger[_0x4adf59(0x25d)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x30aba6['id']),_0x39f54b('filled');const _0x54e6c5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x54e6c5,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3ef6bd=JSON[_0x4adf59(0x2d8)](lastBalances[_0x4adf59(0x1b6)]);const _0x212f90=_0x3ef6bd[_0x4adf59(0x1fe)](_0x4bd67b=>_0x4bd67b[_0x4adf59(0x2f9)]==_0x30aba6[_0x4adf59(0x2f9)]);if(_0x212f90){if(_0x38463a=='open')_0x212f90[_0x4adf59(0x225)]=_0x212f90[_0x4adf59(0x225)]==_0x4adf59(0x2fe)?_0x4adf59(0x2fe):_0x4adf59(0x28c);else{if(_0x38463a=='canceled')_0x212f90['orderstatus']=_0x212f90[_0x4adf59(0x225)]==_0x4adf59(0x2fe)?_0x4adf59(0x2fe):'canceled';else _0x38463a=='closed'&&(_0x212f90[_0x4adf59(0x225)]=_0x4adf59(0x2fe));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3ef6bd)},proxyEmit(_0x4adf59(0x285),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x328df8=_0xa4e499;await getOpenOrders();let _0x1bc2d7=![];currentCoins[_0x328df8(0x252)](_0x3cffc4=>{const _0x483fc1=_0x328df8;_0x1bc2d7=allOpenOrders[_0x483fc1(0x1fe)](_0x241f15=>_0x241f15[_0x483fc1(0x2f9)]==_0x3cffc4['symbol']),_0x3cffc4[_0x483fc1(0x225)]=_0x1bc2d7?_0x483fc1(0x28c):_0x483fc1(0x209);});}async function getCoins(_0x9349df=0x0,_0x26f0b5=!![],_0x4de6c4=config[_0xa4e499(0x315)]){const _0x2235dc=_0xa4e499;let _0x1f0cd6,_0x164d03=[],_0x44cd7d=[],_0x18d5f4=[];if(_0x9349df)await sleep(_0x9349df);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1f0cd6=await exchange['fetchBalance'](),mybalances=_0x1f0cd6[_0x2235dc(0x30d)];for(const [_0x10d025,_0x351321]of Object[_0x2235dc(0x2ec)](mybalances)){_0x18d5f4[_0x2235dc(0x228)](_0x10d025);}config[_0x2235dc(0x1b6)][_0x2235dc(0x252)](_0x2e476e=>{const _0x3d8a6d=_0x2235dc;!_0x18d5f4[_0x3d8a6d(0x2de)](_0x2e476e[_0x3d8a6d(0x2fd)])&&(mybalances[_0x2e476e[_0x3d8a6d(0x2fd)]]=0x0);});if(_0x4de6c4=='')for(const [_0x33ab78,_0x127f5d]of Object[_0x2235dc(0x2ec)](mybalances)){_0x127f5d!=0x0&&_0x164d03[_0x2235dc(0x228)]({'coin':_0x33ab78});}else{let _0x4e37c7=![];for(const [_0x5b9e31,_0x31d5db]of Object[_0x2235dc(0x2ec)](mybalances)){const _0x1a9b68=config[_0x2235dc(0x1b6)][_0x2235dc(0x1fe)](_0x3cad63=>_0x3cad63['coin']==_0x5b9e31),_0xbf65fd=_0x5b9e31+'/'+_0x4de6c4,_0x5469c5=_0x4de6c4+'/'+_0x5b9e31,_0x1958cb=currentCoins[_0x2235dc(0x1fe)](_0x4c32c9=>_0x4c32c9[_0x2235dc(0x2fd)]==_0x5b9e31);_0x4e37c7=![];if((_0x31d5db!=0x0||_0x1a9b68)&&(allSymbols['includes'](_0xbf65fd)||_0x5b9e31==_0x4de6c4))_0x164d03['push']({'coin':_0x5b9e31,'symbol':_0xbf65fd,'reverse':![],'number':Math[_0x2235dc(0x264)](_0x31d5db+(_0x1a9b68&&_0x1a9b68['offset']||0x0),0x0),'orderstatus':_0x1958cb?_0x1958cb[_0x2235dc(0x225)]:'none'});else{if((_0x31d5db!=0x0||_0x1a9b68)&&allSymbols[_0x2235dc(0x2de)](_0x5469c5))_0x164d03[_0x2235dc(0x228)]({'coin':_0x5b9e31,'symbol':_0x5469c5,'reverse':!![],'number':Math[_0x2235dc(0x264)](_0x31d5db+(_0x1a9b68&&_0x1a9b68[_0x2235dc(0x250)]||0x0),0x0),'orderstatus':_0x1958cb?_0x1958cb[_0x2235dc(0x225)]:_0x2235dc(0x209)});else _0x1a9b68&&_0x164d03['push']({'coin':_0x1a9b68[_0x2235dc(0x2fd)],'symbol':_0x1a9b68[_0x2235dc(0x2f9)],'reverse':_0x1a9b68[_0x2235dc(0x24d)],'number':0x0,'orderstatus':_0x2235dc(0x209)});}}}}catch(_0x683c5){if(!_0x26f0b5)handleErrorNoStop(_0x683c5,_0x2235dc(0x284));else await handleError(_0x683c5,_0x2235dc(0x284));}return _0x44cd7d=cloneDeep(_0x164d03),_0x164d03=_0x164d03[_0x2235dc(0x2a5)](_0x28d3b3=>{const _0x2d8440=_0x2235dc,_0x423357=config['portfolio'][_0x2d8440(0x1fe)](_0x2e6604=>_0x2e6604[_0x2d8440(0x2fd)]==_0x28d3b3['coin']);return _0x423357&&!_0x423357[_0x2d8440(0x1a2)];}),[_0x164d03,_0x44cd7d];}async function getCoinNumber(_0x1a8f57){const _0x4f4216=_0xa4e499;let _0x94aa27;try{const _0x24a134=await exchange[_0x4f4216(0x321)]();_0x94aa27=_0x24a134['total'][_0x1a8f57];}catch(_0x21aced){await handleError(_0x21aced,_0x4f4216(0x2cd));}return _0x94aa27;}async function getOpenOrders(){const _0x570291=_0xa4e499;let _0x4f3b06;allOpenOrders=[];try{for(const _0x12b8af of config[_0x570291(0x1b6)]){!_0x12b8af[_0x570291(0x1a2)]&&_0x12b8af[_0x570291(0x2fd)]!=config[_0x570291(0x315)]&&(_0x4f3b06=await exchange[_0x570291(0x219)](_0x12b8af[_0x570291(0x2f9)]),_0x4f3b06['length']>0x0&&allOpenOrders[_0x570291(0x228)](_0x4f3b06[0x0]));}}catch(_0x19dd00){await handleError(_0x19dd00,_0x570291(0x21c));}}async function handleOpenOrders(_0x309803=0x0){const _0x39fea2=_0xa4e499;allOpenOrders[_0x39fea2(0x29e)]==0x0&&lockOrders==ORDERS[_0x39fea2(0x1e5)]&&allOrdersPlaced&&(_0x309803==0x0?(logger[_0x39fea2(0x25d)]('1\x20-\x20Handle\x20open\x20orders'),_0x309803++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x39fea2(0x25d)](_0x39fea2(0x22b)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1bd2a5){const _0x153aa6=_0xa4e499,_0x27bb4f=ccxt[_0x153aa6(0x1d2)][_0x1bd2a5[_0x153aa6(0x231)][_0x153aa6(0x2a1)]()],_0x31251d=new _0x27bb4f({'apiKey':_0x1bd2a5['apiKey'],'secret':_0x1bd2a5[_0x153aa6(0x2a9)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x153aa6(0x2a3)}});if(_0x1bd2a5[_0x153aa6(0x1f3)])_0x31251d[_0x153aa6(0x1ea)]=_0x1bd2a5[_0x153aa6(0x1f3)];try{await _0x31251d[_0x153aa6(0x30a)]();}catch(_0x468bf3){throw _0x468bf3;}}function cloneDeep(_0x2beb03){const _0x14dcee=_0xa4e499;return JSON[_0x14dcee(0x2d8)](JSON['stringify'](_0x2beb03));}async function getPortfolio(_0x2717f3){const _0x210ca5=_0xa4e499;let _0x22185d=[],_0x2c774b=[],_0x5105de=[],_0x37c4dd;if(_0x2717f3['apiKey']!==_0x210ca5(0x1f2)||_0x2717f3['apiSecret']!==_0x210ca5(0x1f2)||_0x2717f3[_0x210ca5(0x1f3)]&&_0x2717f3[_0x210ca5(0x1f3)]!==_0x210ca5(0x1f2)){if(config['exchange']){if(_0x2717f3['apiKey']==_0x210ca5(0x1f2))_0x2717f3[_0x210ca5(0x238)]=config[_0x210ca5(0x238)];if(_0x2717f3[_0x210ca5(0x2a9)]==_0x210ca5(0x1f2))_0x2717f3[_0x210ca5(0x2a9)]=config['apiSecret'];if(_0x2717f3[_0x210ca5(0x1f3)]==_0x210ca5(0x1f2))_0x2717f3[_0x210ca5(0x1f3)]=config['apiPassword'];try{await testAPI(_0x2717f3);}catch(_0x32b56f){if(_0x32b56f[_0x210ca5(0x1d1)]()[_0x210ca5(0x2de)]('AuthenticationError')){logger[_0x210ca5(0x25d)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x210ca5(0x1b6),![]);return;}else{handleError(_0x32b56f,_0x210ca5(0x1c3));return;}}}await initExchange(_0x2717f3[_0x210ca5(0x231)],_0x2717f3['apiKey'],_0x2717f3['apiSecret'],_0x2717f3[_0x210ca5(0x1f3)]);try{await loadSymbols();}catch(_0x341a3a){if(_0x341a3a[_0x210ca5(0x1d1)]()[_0x210ca5(0x2de)](_0x210ca5(0x295))){proxyEmit(_0x210ca5(0x1b6),![]);return;}else{handleError(_0x341a3a,_0x210ca5(0x18c));return;}}const _0x409550=await getCoins(0x0,![],_0x2717f3[_0x210ca5(0x315)]);_0x5105de=cloneDeep(_0x409550[0x1]);}else{const _0x5a2776=await getCoins();_0x5105de=cloneDeep(_0x5a2776[0x1]);}if(_0x2717f3[_0x210ca5(0x315)]=='')proxyEmit(_0x210ca5(0x1b6),_0x5105de);else{_0x5105de[_0x210ca5(0x252)](_0x3fe6f0=>{const _0x132d74=_0x210ca5;if(_0x3fe6f0[_0x132d74(0x2fd)]!=_0x2717f3[_0x132d74(0x315)]&&allSymbols[_0x132d74(0x2de)](_0x3fe6f0['symbol']))_0x22185d[_0x132d74(0x228)](_0x3fe6f0['symbol']);});if(_0x22185d[_0x210ca5(0x29e)]==0x0)logHistory(_0x210ca5(0x1f5),_0x210ca5(0x249));else{try{_0x2c774b=await getTickers(_0x22185d);}catch(_0x1cb96b){if(_0x1cb96b[_0x210ca5(0x1d1)]()['includes']('AuthenticationError')){proxyEmit('portfolio',![]);return;}else handleError(_0x1cb96b,_0x210ca5(0x23f));}_0x5105de['forEach'](_0x3ed205=>{const _0x58c9d5=_0x210ca5;_0x3ed205['coin']!=_0x2717f3[_0x58c9d5(0x315)]?_0x2c774b[_0x3ed205[_0x58c9d5(0x2f9)]]?_0x37c4dd=_0x3ed205['reverse']?0x1/_0x2c774b[_0x3ed205[_0x58c9d5(0x2f9)]][_0x58c9d5(0x27a)]:_0x2c774b[_0x3ed205[_0x58c9d5(0x2f9)]][_0x58c9d5(0x27a)]:_0x37c4dd=0x0:_0x37c4dd=0x1,_0x3ed205[_0x58c9d5(0x258)]=formatResult(_0x37c4dd,0x8);}),proxyEmit(_0x210ca5(0x1b6),_0x5105de);}}}function truncateTradeAmount(_0x1a2ca1,_0x2d8d21){let _0x47f21d=0x0;try{_0x47f21d=exchange['amountToPrecision'](_0x1a2ca1,_0x2d8d21);}catch(_0x47052d){}return _0x47f21d;}function checkMinimums(_0x885602){const _0x81d0df=_0xa4e499;let _0x392a4a=!![];const _0x58281a=!_0x885602['reverse']?markets[_0x885602[_0x81d0df(0x2f9)]][_0x81d0df(0x2a7)][_0x81d0df(0x279)]['min']:markets[_0x885602[_0x81d0df(0x2f9)]][_0x81d0df(0x2a7)][_0x81d0df(0x185)][_0x81d0df(0x1d3)],_0x2a586c=!_0x885602[_0x81d0df(0x24d)]?markets[_0x885602[_0x81d0df(0x2f9)]][_0x81d0df(0x2a7)][_0x81d0df(0x185)][_0x81d0df(0x1d3)]:markets[_0x885602[_0x81d0df(0x2f9)]]['limits'][_0x81d0df(0x279)][_0x81d0df(0x1d3)],_0x425c32=truncateTradeAmount(_0x885602[_0x81d0df(0x2f9)],_0x885602[_0x81d0df(0x18b)]);_0x885602[_0x81d0df(0x18b)]=_0x425c32;if(Math['abs'](_0x425c32)<_0x58281a)_0x392a4a=![];if(Math['abs'](_0x425c32)*_0x885602[_0x81d0df(0x27a)]<_0x2a586c)_0x392a4a=![];if(_0x885602['side']=='sell'){let _0x124da4=config['portfolio'][_0x81d0df(0x1fe)](_0x465f5d=>_0x465f5d[_0x81d0df(0x2fd)]==_0x885602[_0x81d0df(0x2fd)]);if(_0x124da4[_0x81d0df(0x250)]>0x0){if(Math['abs'](_0x425c32)>_0x885602[_0x81d0df(0x1e8)]-_0x124da4[_0x81d0df(0x250)])_0x392a4a=![];}else{if(Math[_0x81d0df(0x2be)](_0x425c32)>_0x885602[_0x81d0df(0x1e8)])_0x392a4a=![];}}if(_0x885602[_0x81d0df(0x1f1)]==_0x81d0df(0x1c9)){let _0x2780a5=config['portfolio'][_0x81d0df(0x1fe)](_0x434cae=>_0x434cae['coin']==config['basecoin']),_0x5bf203=currentCoins[_0x81d0df(0x1fe)](_0x4dca3c=>_0x4dca3c[_0x81d0df(0x2fd)]==config[_0x81d0df(0x315)]);if(_0x2780a5[_0x81d0df(0x250)]>0x0){if(Math[_0x81d0df(0x2be)](_0x425c32)*_0x885602[_0x81d0df(0x27a)]>_0x5bf203[_0x81d0df(0x1e8)]-_0x2780a5['offset'])_0x392a4a=![];}else{if(Math[_0x81d0df(0x2be)](_0x425c32)*_0x885602['last']>_0x5bf203[_0x81d0df(0x1e8)])_0x392a4a=![];}}return _0x392a4a;}async function getBalances(_0x2218ed=!![]){const _0x1837af=_0xa4e499;let _0x157e33=0x0,_0x506c72;const _0x532837=config[_0x1837af(0x1c5)];if(config[_0x1837af(0x30b)]&&config[_0x1837af(0x317)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1ce9c2=>{const _0x47558c=_0x1837af;if(_0x1ce9c2[_0x47558c(0x2fd)]!=config[_0x47558c(0x315)]){let _0x45224f=global[_0x47558c(0x294)][noslash(_0x1ce9c2[_0x47558c(0x2f9)])];_0x506c72=_0x1ce9c2[_0x47558c(0x24d)]?0x1/_0x45224f:_0x45224f;}else _0x506c72=0x1;let _0x2cfddf=_0x1ce9c2[_0x47558c(0x1e8)]*_0x506c72;_0x157e33+=_0x2cfddf,_0x1ce9c2[_0x47558c(0x27a)]=formatResult(Number(_0x506c72),0x8),_0x1ce9c2[_0x47558c(0x306)]=_0x2cfddf;}),currentCoins[_0x1837af(0x252)](_0xe0622a=>{const _0x325a05=_0x1837af;let _0x4ff5c5=config['portfolio'][_0x325a05(0x1fe)](_0x528d08=>_0x528d08[_0x325a05(0x2fd)]==_0xe0622a[_0x325a05(0x2fd)]),_0x5df9bd=Number(_0x4ff5c5[_0x325a05(0x183)]),_0x8a9ea2=_0xe0622a['value']/_0x157e33*0x64,_0x320147=_0x5df9bd*_0x157e33/0x64/_0xe0622a['last']-_0xe0622a[_0x325a05(0x1e8)];_0xe0622a[_0x325a05(0x183)]=formatResult(_0x8a9ea2,0x3),_0xe0622a['target']=formatResult(_0x5df9bd,0x3),_0xe0622a['trade']=formatResult(_0x320147,0x8),_0xe0622a[_0x325a05(0x1f1)]='',_0xe0622a['valid']=![];if(_0xe0622a[_0x325a05(0x2fd)]!=config['basecoin']){if(_0xe0622a[_0x325a05(0x183)]>_0x5df9bd)_0xe0622a[_0x325a05(0x1f1)]=_0x325a05(0x26b),_0xe0622a['valid']=checkMinimums(_0xe0622a);else _0xe0622a[_0x325a05(0x183)]<_0x5df9bd&&(_0xe0622a[_0x325a05(0x1f1)]=_0x325a05(0x1c9),_0xe0622a[_0x325a05(0x271)]=checkMinimums(_0xe0622a));}_0xe0622a[_0x325a05(0x24e)]=_0xe0622a[_0x325a05(0x183)]/_0xe0622a[_0x325a05(0x282)]-0x1;if(_0xe0622a[_0x325a05(0x225)]==_0x325a05(0x2fe)||_0xe0622a[_0x325a05(0x225)]==_0x325a05(0x2e9))_0xe0622a[_0x325a05(0x225)]=_0x325a05(0x209);}),currentCoins[_0x1837af(0x19d)]((_0x1431a8,_0xb3dc68)=>_0x1431a8[_0x1837af(0x24e)]<_0xb3dc68[_0x1837af(0x24e)]?0x1:_0xb3dc68[_0x1837af(0x24e)]<_0x1431a8[_0x1837af(0x24e)]?-0x1:0x0);const _0x5cbe56=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5cbe56[_0x1837af(0x2d4)],'usd':_0x5cbe56[_0x1837af(0x20b)],'portfolio':JSON[_0x1837af(0x22f)](currentCoins),'threshold':_0x532837},proxyEmit(_0x1837af(0x285),{'serverversion':serverversion,'balances':lastBalances});if(_0x2218ed){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x532837});else{if(lockOrders==ORDERS[_0x1837af(0x274)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x532837});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2384bc=getNormalizedPerformance();getStartingBalances(_0x2384bc),emitPerformance(_0x2384bc);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1113fd=getNormalizedPerformance();emitPerformance(_0x1113fd),getStartingBalances(_0x1113fd),logger[_0x1837af(0x25d)](_0x1837af(0x22c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x234157=_0xa4e499;if(!lastBalances)return;let _0x2a08a3=[],_0x1b0ddc,_0x5ea9e3=JSON['parse'](lastBalances['portfolio']);_0x5ea9e3[_0x234157(0x19d)]((_0x18eea8,_0x573331)=>_0x18eea8[_0x234157(0x2fd)]>_0x573331[_0x234157(0x2fd)]?0x1:_0x573331['coin']>_0x18eea8['coin']?-0x1:0x0),_0x5ea9e3[_0x234157(0x252)](_0x1e2d58=>{const _0x148616=_0x234157;let _0x20e040={'coin':_0x1e2d58[_0x148616(0x2fd)],'number':_0x1e2d58[_0x148616(0x1e8)],'price':_0x1e2d58[_0x148616(0x27a)]};_0x2a08a3[_0x148616(0x228)](_0x20e040);});const _0x265b20=await getFiat();_0x1b0ddc={'date':lastBalances[_0x234157(0x1cb)][_0x234157(0x259)]('\x20')[0x0],'eur':_0x265b20['eur'],'usd':_0x265b20[_0x234157(0x20b)],'coins':_0x2a08a3};let _0x10fc26=dbPerformance[_0x234157(0x2b1)](_0x234157(0x1b3))['find']({'date':_0x1b0ddc['date']})['value']();_0x10fc26?_0x1b0ddc[_0x234157(0x28e)]!=config[_0x234157(0x26f)]&&dbPerformance[_0x234157(0x2b1)](_0x234157(0x1b3))['find']({'date':_0x1b0ddc[_0x234157(0x28e)]})[_0x234157(0x18f)](_0x1b0ddc)[_0x234157(0x2dc)]():dbPerformance[_0x234157(0x2b1)](_0x234157(0x1b3))['push'](_0x1b0ddc)[_0x234157(0x2dc)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x33977a=_0xa4e499;let _0x439627=[];if(dbPerformance['has'](_0x33977a(0x1b3))[_0x33977a(0x306)]()){let _0x55c31b=dbPerformance[_0x33977a(0x2b1)](_0x33977a(0x1b3))[_0x33977a(0x23a)]()['filter'](_0x45ed19=>{const _0x410112=_0x33977a;if(_0x45ed19['coins'][_0x410112(0x29e)]==0x0)return![];else return!![];})[_0x33977a(0x2c9)](_0x33977a(0x28e))[_0x33977a(0x306)](),_0x3b46f7=[...config[_0x33977a(0x23e)]];_0x3b46f7[_0x33977a(0x19d)]((_0x2e936c,_0x31b757)=>_0x2e936c[_0x33977a(0x28e)]>_0x31b757[_0x33977a(0x28e)]?-0x1:_0x31b757[_0x33977a(0x28e)]>_0x2e936c[_0x33977a(0x28e)]?0x1:0x0);let _0x46504c=0x1,_0x4038ec=[],_0x4120eb=0x0;_0x55c31b[_0x33977a(0x1cd)]()['reverse']()[_0x33977a(0x252)]((_0x3657b9,_0x2a34e1)=>{const _0x459510=_0x33977a;if(_0x3b46f7[_0x4120eb]){if(_0x55c31b[_0x55c31b[_0x459510(0x29e)]-_0x2a34e1]&&_0x3b46f7[_0x4120eb]['date']==_0x55c31b[_0x55c31b[_0x459510(0x29e)]-_0x2a34e1][_0x459510(0x28e)]){if(_0x2a34e1<_0x55c31b[_0x459510(0x29e)]){let _0x335755=0x0,_0x35b69f=0x0;_0x55c31b[_0x55c31b[_0x459510(0x29e)]-_0x2a34e1]['coins'][_0x459510(0x252)](_0x57983c=>{const _0x48e042=_0x459510;_0x35b69f+=_0x57983c[_0x48e042(0x1e8)]*_0x57983c[_0x48e042(0x258)];}),_0x3b46f7[_0x4120eb][_0x459510(0x24f)][_0x459510(0x252)](_0x5d6d6e=>{const _0x3f0081=_0x459510;_0x335755+=_0x5d6d6e[_0x3f0081(0x1e8)]*_0x5d6d6e[_0x3f0081(0x258)];}),_0x46504c*=_0x335755/(_0x35b69f-_0x335755)+0x1;}_0x4120eb++;}}let _0x46b9cf=0x0;_0x3657b9[_0x459510(0x1da)]['forEach'](_0x58d183=>{const _0x89081c=_0x459510;_0x46b9cf+=_0x58d183[_0x89081c(0x1e8)]*_0x58d183[_0x89081c(0x258)];}),_0x4038ec[_0x55c31b['length']-_0x2a34e1-0x1]=_0x46b9cf*(_0x46504c-0x1);});let _0x30c2c1=[];_0x3b46f7=[...config[_0x33977a(0x23e)]]||[];let _0x1c83c5=0x0;_0x4120eb=0x0,_0x55c31b[_0x33977a(0x252)]((_0x29c377,_0x19c510)=>{const _0xa247a2=_0x33977a;if(_0x3b46f7[_0x4120eb]){const _0x343154=fns['parse'](_0x3b46f7[_0x4120eb]['date'],_0xa247a2(0x31f),new Date()),_0x3f4a2a=fns['parse'](_0x29c377[_0xa247a2(0x28e)],_0xa247a2(0x31f),new Date());if(fns[_0xa247a2(0x1c7)](_0x343154,_0x3f4a2a)){let _0x485e54=0x0;_0x3b46f7[_0x4120eb][_0xa247a2(0x24f)]['forEach'](_0x4eaaf6=>{const _0xe1a144=_0xa247a2;!_0x30c2c1[_0x4eaaf6['coin']]?_0x30c2c1[_0x4eaaf6[_0xe1a144(0x2fd)]]=_0x4eaaf6['number']:(_0x485e54=_0x30c2c1[_0x4eaaf6[_0xe1a144(0x2fd)]],_0x30c2c1[_0x4eaaf6['coin']]+=_0x4eaaf6[_0xe1a144(0x1e8)]);const _0x53a3c9=_0x29c377[_0xe1a144(0x1da)][_0xe1a144(0x1fe)](_0x2af8b4=>_0x2af8b4[_0xe1a144(0x2fd)]==_0x4eaaf6[_0xe1a144(0x2fd)]);(!_0x53a3c9||_0x53a3c9[_0xe1a144(0x1e8)]==0x0)&&(_0x1c83c5+=(-_0x4eaaf6[_0xe1a144(0x1e8)]-_0x485e54)*_0x4eaaf6[_0xe1a144(0x258)]);}),_0x4120eb++;}}_0x29c377[_0xa247a2(0x1da)][_0xa247a2(0x252)]((_0x217cf3,_0x7f0998)=>{const _0x18ad4e=_0xa247a2;_0x30c2c1[_0x217cf3[_0x18ad4e(0x2fd)]]&&(_0x217cf3[_0x18ad4e(0x2ad)]=_0x30c2c1[_0x217cf3[_0x18ad4e(0x2fd)]]);}),_0x439627[_0xa247a2(0x228)]({'date':_0x29c377['date'],'eur':_0x29c377[_0xa247a2(0x2d4)],'usd':_0x29c377[_0xa247a2(0x20b)],'offset':_0x4038ec[_0x19c510],'netoffset':_0x1c83c5,'coins':_0x29c377[_0xa247a2(0x1da)]});});}return _0x439627;}function emitPerformance(_0x1aafc8){const _0x2e8791=_0xa4e499;_0x1aafc8[_0x2e8791(0x29e)]!==0x0?(proxyEmit(_0x2e8791(0x2aa),_0x1aafc8),lastPerformanceEmitted=getDate()):proxyEmit(_0x2e8791(0x2aa),[]);}function getPerf(_0x2f8140,_0x4942ca){const _0xd3ded6=_0xa4e499;let _0x10fe77=0x0,_0x340ebb=0x0,_0x3448ac=0x0;_0x2f8140[_0xd3ded6(0x1da)][_0xd3ded6(0x252)](_0x467b3d=>{const _0x2d8c1c=_0xd3ded6;_0x10fe77+=_0x467b3d[_0x2d8c1c(0x1e8)]*_0x467b3d['price'];});_0x4942ca&&(_0x10fe77+=_0x2f8140['offset']);if(config['basecoin']==='BTC'||config[_0xd3ded6(0x315)]===_0xd3ded6(0x280)||config[_0xd3ded6(0x315)]==='PAXG')_0x340ebb=_0x10fe77*_0x2f8140[_0xd3ded6(0x2d4)],_0x3448ac=_0x10fe77*_0x2f8140[_0xd3ded6(0x20b)];else{if(usdBasecoins[_0xd3ded6(0x2de)](config['basecoin']))_0x340ebb=_0x10fe77*_0x2f8140[_0xd3ded6(0x2d4)]/_0x2f8140[_0xd3ded6(0x20b)],_0x3448ac=_0x10fe77;else config[_0xd3ded6(0x315)]==='EUR'&&(_0x340ebb=_0x10fe77,_0x3448ac=_0x10fe77*_0x2f8140['usd']/_0x2f8140[_0xd3ded6(0x2d4)]);}return[_0x10fe77,_0x340ebb,_0x3448ac];}function getKPIs(_0x27fc0b,_0x2cbd5d=_0xa4e499(0x2d6)){const _0x31af6a=_0xa4e499,_0x31970c=config[_0x31af6a(0x315)],_0x2b812b=lastBalances,_0x59ddea=currentCoins,_0x38311a=getNormalizedPerformance(),_0x13f952=_0x27fc0b===_0x31af6a(0x315)?_0x31970c:_0x27fc0b===_0x31af6a(0x23c)||_0x27fc0b===_0x31af6a(0x2e0)?_0x2cbd5d:_0x31af6a(0x1cc)+_0x31970c,_0x2ad523=_0x27fc0b===_0x31af6a(0x26a)?'Net\x20effect':_0x27fc0b==='net-fiat'?_0x31af6a(0x2f4):_0x13f952+_0x31af6a(0x1eb),_0x13edf2=_0x27fc0b===_0x31af6a(0x26a)||_0x27fc0b===_0x31af6a(0x2e0)?_0x31af6a(0x2f4):_0x13f952+'\x20change';let _0x47f399=0x0;_0x59ddea[_0x31af6a(0x252)](_0x1eae32=>{const _0x253afa=_0x31af6a;_0x47f399+=_0x1eae32[_0x253afa(0x1e8)]*_0x1eae32[_0x253afa(0x27a)];});if(_0x27fc0b===_0x31af6a(0x23c)||_0x27fc0b===_0x31af6a(0x2e0)){if(_0x31970c===_0x31af6a(0x1d6)||_0x31970c===_0x31af6a(0x280)||_0x31970c===_0x31af6a(0x30e))_0x47f399=_0x47f399*(_0x2cbd5d==='EUR'?_0x2b812b['eur']:_0x2b812b[_0x31af6a(0x20b)]);else{if(usdBasecoins[_0x31af6a(0x2de)](_0x31970c))_0x47f399=_0x47f399*(_0x2cbd5d===_0x31af6a(0x2d6)?_0x2b812b[_0x31af6a(0x2d4)]/_0x2b812b[_0x31af6a(0x20b)]:0x1);else _0x31970c==='EUR'&&(_0x47f399=_0x47f399*(_0x2cbd5d===_0x31af6a(0x2d6)?0x1:_0x2b812b[_0x31af6a(0x20b)]/_0x2b812b[_0x31af6a(0x2d4)]));}}let _0x42efb9;if(_0x47f399!==0x0){if(_0x27fc0b===_0x31af6a(0x315))_0x42efb9=(_0x47f399/startingBalances[_0x31af6a(0x315)]-0x1)*0x64;else{if(_0x2cbd5d===_0x31af6a(0x2d6))_0x42efb9=(_0x47f399/startingBalances[_0x31af6a(0x2d4)]-0x1)*0x64;else _0x42efb9=(_0x47f399/startingBalances[_0x31af6a(0x20b)]-0x1)*0x64;}let _0x28871d=0x0;if(startingBalances['coins'])_0x59ddea[_0x31af6a(0x252)](_0x395625=>{const _0x288579=_0x31af6a;let _0x2685c5=startingBalances['coins'][_0x288579(0x1fe)](_0x5b38db=>_0x5b38db[_0x288579(0x2fd)]===_0x395625[_0x288579(0x2fd)]);if(_0x2685c5&&_0x2685c5[_0x288579(0x2fd)]&&_0x395625[_0x288579(0x1e8)]!==0x0)_0x28871d+=_0x2685c5[_0x288579(0x1e8)]*_0x395625[_0x288579(0x27a)];});let _0x241921=0x0;if(_0x38311a[_0x31af6a(0x29e)]!==0x0){let _0x40a6dc=_0x38311a[_0x38311a[_0x31af6a(0x29e)]-0x1];_0x241921=_0x40a6dc['netoffset'];}_0x28871d-=_0x241921;_0x27fc0b===_0x31af6a(0x26a)&&(_0x42efb9=(_0x47f399-_0x28871d)/startingBalances[_0x31af6a(0x315)]*0x64,_0x47f399=_0x47f399-_0x28871d);if(_0x27fc0b===_0x31af6a(0x2e0)){let _0x416b5b=_0x2cbd5d===_0x31af6a(0x2d6)?startingBalances[_0x31af6a(0x2d4)]:startingBalances[_0x31af6a(0x20b)];if(_0x31970c===_0x31af6a(0x1d6)||_0x31970c===_0x31af6a(0x280)||_0x31970c===_0x31af6a(0x30e))_0x28871d=_0x2cbd5d==='EUR'?_0x28871d*_0x2b812b[_0x31af6a(0x2d4)]:_0x28871d*_0x2b812b[_0x31af6a(0x20b)];else{if(usdBasecoins[_0x31af6a(0x2de)](_0x31970c))_0x28871d=_0x2cbd5d===_0x31af6a(0x2d6)?_0x28871d*_0x2b812b['eur']/_0x2b812b[_0x31af6a(0x20b)]:_0x28871d;else _0x31970c==='EUR'&&(_0x28871d=_0x2cbd5d===_0x31af6a(0x2d6)?_0x28871d:_0x28871d*_0x2b812b[_0x31af6a(0x20b)]/_0x2b812b['eur']);}_0x42efb9=(_0x47f399-_0x28871d)/_0x416b5b*0x64,_0x47f399=_0x47f399-_0x28871d;}if(_0x42efb9){if(_0x42efb9<0x64)_0x42efb9=_0x42efb9[_0x31af6a(0x1c2)](0x2);else{if(_0x42efb9<0x3e8)_0x42efb9=_0x42efb9[_0x31af6a(0x1c2)](0x1);else _0x42efb9=_0x42efb9[_0x31af6a(0x1c2)](0x0);}}else _0x42efb9=Number('0')[_0x31af6a(0x1c2)](0x2);if(_0x47f399){if(Math[_0x31af6a(0x2be)](_0x47f399)<0.000001)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x2);else{if(Math[_0x31af6a(0x2be)](_0x47f399)<0.1)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x6);else{if(Math[_0x31af6a(0x2be)](_0x47f399)<0x1)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x5);else{if(Math[_0x31af6a(0x2be)](_0x47f399)<0xa)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x4);else{if(Math['abs'](_0x47f399)<0x64)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x3);else{if(Math['abs'](_0x47f399)<0x3e8)_0x47f399=_0x47f399[_0x31af6a(0x1c2)](0x2);else _0x47f399=_0x47f399['toFixed'](0x2);}}}}}}else _0x47f399=Number('0')[_0x31af6a(0x1c2)](0x2);}else _0x42efb9=Number('0')[_0x31af6a(0x1c2)](0x2);return{'value':_0x47f399,'change':_0x42efb9,'leftTxt':_0x2ad523,'rightTxt':_0x13edf2};}async function getStartingBalances(_0x5f519b,_0x27f180=!![]){const _0x5900ed=_0xa4e499;if(_0x5f519b[_0x5900ed(0x29e)]!==0x0){const [_0x15b5e9,_0x4a7360,_0x294bc9]=getPerf(_0x5f519b[0x0],!![]);let _0x108e68=[];config[_0x5900ed(0x1b6)][_0x5900ed(0x252)](_0xeca17a=>{const _0x3ee599=_0x5900ed;let _0x29d5ee=0x0,_0x201b04;config[_0x3ee599(0x23e)][_0x3ee599(0x252)](_0x38fd62=>{const _0x71f185=_0x3ee599;let _0x26b2c2=_0x38fd62[_0x71f185(0x24f)][_0x71f185(0x1fe)](_0x243780=>_0x243780['coin']==_0xeca17a[_0x71f185(0x2fd)]);if(_0x26b2c2){_0x29d5ee+=_0x26b2c2[_0x71f185(0x1e8)];if(!_0x201b04)_0x201b04=_0x26b2c2[_0x71f185(0x258)];}}),_0x108e68[_0x3ee599(0x228)]({'coin':_0xeca17a[_0x3ee599(0x2fd)],'number':_0x29d5ee,'initialprice':_0x201b04});});const _0x19738d={'basecoin':_0x15b5e9,'eur':_0x4a7360,'usd':_0x294bc9,'coins':_0x108e68};if(_0x27f180)proxyEmit(_0x5900ed(0x22d),_0x19738d);startingBalances=_0x19738d;}}function headlessMode(_0x3f2f2d){const _0x8e1ddd=_0xa4e499;let _0x2516e5=_0x3f2f2d[_0x8e1ddd(0x1b6)],_0x41fdaa=_0x3f2f2d[_0x8e1ddd(0x1c5)],_0x371aa9=[];for(let _0x3e0d5e of _0x2516e5){if(_0x3e0d5e[_0x8e1ddd(0x2fd)]!=config['basecoin']){if(_0x3e0d5e[_0x8e1ddd(0x24e)]>=_0x41fdaa/0x64){if(_0x3e0d5e['valid'])_0x371aa9['push'](_0x3e0d5e);}else{if(_0x3e0d5e[_0x8e1ddd(0x24e)]<=-_0x41fdaa/0x64){if(_0x3e0d5e[_0x8e1ddd(0x271)])_0x371aa9['push'](_0x3e0d5e);}}}}_0x371aa9[_0x8e1ddd(0x29e)]>0x0&&(lockOrders==ORDERS[_0x8e1ddd(0x274)]&&!coolingDown&&_0x371aa9[_0x8e1ddd(0x252)](_0x2397d9=>{const _0x442d1b=_0x8e1ddd;logger[_0x442d1b(0x25d)]('Trigger:\x20'+_0x2397d9[_0x442d1b(0x2fd)]+'\x20'+_0x2397d9['number']+'\x20'+_0x2397d9['last']+'\x20'+_0x2397d9[_0x442d1b(0x183)]+'%\x20'+_0x2397d9[_0x442d1b(0x282)]+'%\x20'+(0x64*_0x2397d9[_0x442d1b(0x24e)])[_0x442d1b(0x1c2)](0x2)+_0x442d1b(0x18d)+_0x41fdaa['toFixed'](0x2)+'%)');}),placeOrder(_0x371aa9));}function notifyBalance(_0x5ef37b){const _0x5de6f6=_0xa4e499;let _0x508c73=_0x5ef37b[_0x5de6f6(0x1b6)],_0x22907f=_0x5ef37b[_0x5de6f6(0x1c5)],_0x4cfb41=[];for(let _0x37a113 of _0x508c73){if(_0x37a113[_0x5de6f6(0x2fd)]!=config[_0x5de6f6(0x315)]){if(_0x37a113['delta']>=_0x22907f/0x64){if(_0x37a113[_0x5de6f6(0x271)])_0x4cfb41['push'](_0x37a113);}else{if(_0x37a113[_0x5de6f6(0x24e)]<=-_0x22907f/0x64){if(_0x37a113[_0x5de6f6(0x271)])_0x4cfb41[_0x5de6f6(0x228)](_0x37a113);}}}}if(_0x4cfb41[_0x5de6f6(0x29e)]>0x0){let _0x353a51=_0x4cfb41[_0x5de6f6(0x206)](_0x2de1ad=>_0x2de1ad[_0x5de6f6(0x2fd)]);_0x353a51[_0x5de6f6(0x19d)]();let _0x413769=_0x353a51[_0x5de6f6(0x320)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5de6f6(0x293),_0x5de6f6(0x2f1));lastCoinsToBalance=_0x413769;}}function symbolToCoin(_0x4c3342){const _0x5b5e0e=_0xa4e499;let _0xafb825;if(_0x4c3342[_0x5b5e0e(0x2de)]('/'+config['basecoin']))_0xafb825=_0x4c3342[_0x5b5e0e(0x278)]('/'+config[_0x5b5e0e(0x315)],'');if(_0x4c3342[_0x5b5e0e(0x2de)](config[_0x5b5e0e(0x315)]+'/'))_0xafb825=_0x4c3342[_0x5b5e0e(0x278)](config[_0x5b5e0e(0x315)]+'/','');return _0xafb825;}async function unlockOrders(){const _0x4de197=_0xa4e499;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4de197(0x1e5)]){logger[_0x4de197(0x25d)](_0x4de197(0x2db)),lockOrders=ORDERS[_0x4de197(0x25c)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x241776=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x241776,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4de197(0x25d)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x24d664){const _0x57af65=_0xa4e499;if(_0x24d664)validateOrdersState=_0x24d664;logger['debug'](_0x57af65(0x2cf)+validateOrdersState+_0x57af65(0x1e2)+(lockOrders==0x1?_0x57af65(0x2ed):lockOrders==0x2?_0x57af65(0x301):_0x57af65(0x2b3)));let _0x443bbf=[],_0x4f10be=config[_0x57af65(0x2b0)]==_0x57af65(0x216)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x57af65(0x28f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x57af65(0x1e5)])return;logger['debug'](_0x57af65(0x314)+validateOrdersState),lastOrders['forEach'](_0x199a62=>{const _0x362794=_0x57af65;let _0x3cada2=![];_0x199a62['filled']>0x0&&(_0x3cada2=!![]),_0x443bbf['push'](_0x3cada2),_0x3cada2&&config[_0x362794(0x2b0)]!=_0x362794(0x216)&&logHistory('order',_0x362794(0x29b)+_0x199a62['symbol']+'\x20'+_0x199a62['side']+'\x20#'+formatResult(_0x199a62[_0x362794(0x2fe)],0x8)+'\x20@'+formatResult(_0x199a62[_0x362794(0x258)],0x8));}),_0x443bbf['forEach']((_0x1a84e8,_0x4c67ae)=>{const _0x3876ca=_0x57af65;if(_0x1a84e8)lastOrders[_0x3876ca(0x1a8)](_0x4c67ae,0x1);}),persistOpenOrders(lastOrders);const _0x522932=coolingDown?_0x57af65(0x26c):_0x57af65(0x308);if(validateOrdersState==_0x57af65(0x2ad)){validateOrdersState=_0x57af65(0x246);if(_0x443bbf['includes'](![])){if(config['ordertype']==_0x57af65(0x216)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x57af65(0x246)){if(_0x443bbf['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x57af65(0x216)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x443bbf[_0x57af65(0x2de)](![])&&(config['ordertype']==_0x57af65(0x216)?logHistory(_0x57af65(0x1ae),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x57af65(0x1f4)](_0x4f10be*validateOrderInterval/0xea60)+_0x57af65(0x2bd)+_0x522932):(await cancelOrders(),logHistory(_0x57af65(0x1ae),_0x57af65(0x310)+Math[_0x57af65(0x1f4)](_0x4f10be*validateOrderInterval/0xea60)+_0x57af65(0x2bd)+_0x522932))),await unlockOrders();else{if(validateOrdersState==_0x57af65(0x19b)){if(config['ordertype']!='market')logHistory('success',_0x57af65(0x21b)+_0x522932);await unlockOrders();}}}}}async function cancelOrders(){const _0x2f612b=_0xa4e499;lastOrders[_0x2f612b(0x252)](async _0x4335a8=>{const _0x48af2c=_0x2f612b;try{const _0x5ecd68=await exchange[_0x48af2c(0x1ac)](_0x4335a8[_0x48af2c(0x2ef)],_0x4335a8[_0x48af2c(0x2f9)]);}catch(_0x2a0986){if(_0x2a0986[_0x48af2c(0x1d1)]()[_0x48af2c(0x2de)](_0x48af2c(0x2d7))){}else await handleError(_0x2a0986,_0x48af2c(0x21e));}});}async function initCoinResults(_0x246504){const _0x27fb76=_0xa4e499;_0x246504?logger[_0x27fb76(0x25d)](_0x27fb76(0x2f3)+_0x246504):logger['debug'](_0x27fb76(0x1bc)),config['portfolio'][_0x27fb76(0x252)](_0x212969=>{const _0x4c5e42=_0x27fb76;if(!_0x212969['excluded']&&_0x212969['coin']!=config['basecoin']){const _0x53cee1=currentCoins[_0x4c5e42(0x1fe)](_0x2be784=>_0x2be784[_0x4c5e42(0x2fd)]==_0x212969[_0x4c5e42(0x2fd)]),_0x550899=global[_0x4c5e42(0x294)][noslash(_0x212969[_0x4c5e42(0x2f9)])];let _0x9df607=_0x53cee1?_0x53cee1[_0x4c5e42(0x1e8)]:null,_0x55e082=_0x212969[_0x4c5e42(0x24d)]?0x1/_0x550899:_0x550899,_0x35d5f5;config[_0x4c5e42(0x23e)][_0x4c5e42(0x252)](_0x549f31=>{const _0x2b6a23=_0x4c5e42;!_0x35d5f5&&(_0x35d5f5=_0x549f31[_0x2b6a23(0x24f)][_0x2b6a23(0x1fe)](_0x228219=>_0x228219[_0x2b6a23(0x2fd)]==_0x212969['coin']),_0x35d5f5&&(_0x9df607=_0x35d5f5[_0x2b6a23(0x1e8)],_0x55e082=_0x35d5f5[_0x2b6a23(0x258)]));});let _0x3f27d8=dbCoinResults[_0x4c5e42(0x2b1)](_0x4c5e42(0x1da))[_0x4c5e42(0x1fe)]({'coin':_0x212969['coin']})[_0x4c5e42(0x306)]();if(!_0x3f27d8){const _0x59d903={'coin':_0x212969[_0x4c5e42(0x2fd)],'number':_0x9df607,'breakeven':_0x55e082,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4c5e42(0x2b1)](_0x4c5e42(0x1da))[_0x4c5e42(0x228)](_0x59d903)[_0x4c5e42(0x2dc)]();}else{if(_0x246504&&_0x212969['coin']==_0x246504){const _0x2de929={'coin':_0x212969[_0x4c5e42(0x2fd)],'number':_0x9df607,'breakeven':_0x55e082,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4c5e42(0x2b1)]('coins')[_0x4c5e42(0x1fe)]({'coin':_0x212969[_0x4c5e42(0x2fd)]})[_0x4c5e42(0x18f)](_0x2de929)[_0x4c5e42(0x2dc)]();}}}});}async function updateCoinResults(_0x5c54c1,_0x47688b=![]){const _0x3300ea=_0xa4e499;let _0x106f14,_0x336e92,_0x215c53,_0xf181df,_0x33bd0f,_0x2d84e3,_0x57f345=dbCoinResults[_0x3300ea(0x2b1)](_0x3300ea(0x1da))['find']({'coin':_0x5c54c1[_0x3300ea(0x2fd)]})['value'](),_0x3ef857=![];_0x57f345&&Object[_0x3300ea(0x2ec)](_0x57f345)[_0x3300ea(0x252)](([_0x2ee022,_0x235d1c])=>{if(_0x235d1c==null)_0x3ef857=!![];});(!_0x57f345||_0x3ef857)&&(await initCoinResults(_0x5c54c1[_0x3300ea(0x2fd)]),_0x57f345=dbCoinResults['get'](_0x3300ea(0x1da))[_0x3300ea(0x1fe)]({'coin':_0x5c54c1['coin']})['value']());_0x5c54c1[_0x3300ea(0x24d)]&&(_0x2d84e3={'filled':_0x5c54c1['filled']*_0x5c54c1[_0x3300ea(0x258)],'amount':_0x5c54c1[_0x3300ea(0x2fe)]*_0x5c54c1[_0x3300ea(0x258)],'side':_0x5c54c1[_0x3300ea(0x1f1)]==_0x3300ea(0x26b)?_0x3300ea(0x1c9):'sell','price':0x1/_0x5c54c1['price']},_0x5c54c1={..._0x5c54c1,..._0x2d84e3});_0x47688b?_0x336e92=_0x5c54c1[_0x3300ea(0x1f1)]==_0x3300ea(0x1c9)?_0x57f345[_0x3300ea(0x1e8)]+_0x5c54c1[_0x3300ea(0x2fe)]:_0x57f345['number']-_0x5c54c1['filled']:_0x336e92=await getCoinNumber(_0x5c54c1[_0x3300ea(0x2fd)]);if(_0x5c54c1['fee']&&_0x5c54c1['fee'][_0x3300ea(0x22a)]==config[_0x3300ea(0x315)])_0x106f14=_0x5c54c1[_0x3300ea(0x297)][_0x3300ea(0x185)];else{if(_0x5c54c1['fee']&&_0x5c54c1[_0x3300ea(0x297)]['currency']=='BNB'&&!_0x47688b&&config['basecoin']!='PAXG')_0x106f14=_0x5c54c1[_0x3300ea(0x297)][_0x3300ea(0x185)]*global['ticker']['BNB'+config['basecoin']];else _0x106f14=defaultFee*_0x5c54c1[_0x3300ea(0x2fe)]*_0x5c54c1[_0x3300ea(0x258)];}_0x5c54c1[_0x3300ea(0x1f1)]==_0x3300ea(0x1c9)?(_0x215c53=_0x336e92!=0x0?(_0x57f345[_0x3300ea(0x24a)]*_0x57f345[_0x3300ea(0x1e8)]+_0x5c54c1[_0x3300ea(0x258)]*(_0x336e92-_0x57f345[_0x3300ea(0x1e8)])+_0x106f14)/_0x336e92:0x0,_0xf181df=_0x57f345['realized']):(_0x215c53=_0x336e92!=0x0?(_0x57f345[_0x3300ea(0x24a)]*_0x57f345['number']-_0x5c54c1[_0x3300ea(0x258)]*(_0x57f345[_0x3300ea(0x1e8)]-_0x336e92)+_0x106f14)/_0x336e92:0x0,_0xf181df=_0x57f345[_0x3300ea(0x1e7)]+(_0x5c54c1[_0x3300ea(0x258)]-_0x57f345[_0x3300ea(0x24a)])*_0x5c54c1[_0x3300ea(0x2fe)]);_0x33bd0f=(_0x5c54c1[_0x3300ea(0x258)]-_0x215c53-_0x106f14/_0x5c54c1[_0x3300ea(0x2fe)])*_0x336e92;let _0x235f6a={'coin':_0x5c54c1['coin'],'number':_0x336e92,'breakeven':formatResult(_0x215c53,0x8),'realized':formatResult(_0xf181df,0x8),'unrealized':formatResult(_0x33bd0f,0x8),'fees':formatResult(_0x57f345[_0x3300ea(0x2e8)]+_0x106f14,0x8),'sells':_0x5c54c1[_0x3300ea(0x1f1)]==_0x3300ea(0x26b)?_0x57f345[_0x3300ea(0x2c7)]+0x1:_0x57f345['sells'],'buys':_0x5c54c1[_0x3300ea(0x1f1)]==_0x3300ea(0x1c9)?_0x57f345['buys']+0x1:_0x57f345[_0x3300ea(0x20f)]};dbCoinResults[_0x3300ea(0x2b1)]('coins')[_0x3300ea(0x1fe)]({'coin':_0x5c54c1[_0x3300ea(0x2fd)]})[_0x3300ea(0x18f)](_0x235f6a)['write']();if(!_0x47688b){if(_0x5c54c1[_0x3300ea(0x297)]&&_0x5c54c1[_0x3300ea(0x297)][_0x3300ea(0x22a)]==_0x3300ea(0x2f8)){const _0x446920=currentCoins[_0x3300ea(0x1fe)](_0x1b86cf=>_0x1b86cf[_0x3300ea(0x2fd)]==_0x3300ea(0x2f8));if(_0x446920){let _0x1b39a9=dbCoinResults[_0x3300ea(0x2b1)](_0x3300ea(0x1da))[_0x3300ea(0x1fe)]({'coin':_0x3300ea(0x2f8)})[_0x3300ea(0x306)]();_0x235f6a={..._0x1b39a9,'number':_0x446920[_0x3300ea(0x1e8)]},dbCoinResults['get'](_0x3300ea(0x1da))[_0x3300ea(0x1fe)]({'coin':_0x3300ea(0x2f8)})[_0x3300ea(0x18f)](_0x235f6a)[_0x3300ea(0x2dc)]();}}}}async function placeOrder(_0x564493){const _0xf05b97=_0xa4e499,_0x1c24a8=config[_0xf05b97(0x2b0)]==_0xf05b97(0x216)?_0xf05b97(0x216):_0xf05b97(0x262);if(lockOrders==ORDERS[_0xf05b97(0x274)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xf05b97(0x1e5)],allOrdersPlaced=![],validateOrdersState='initial';let _0x33857b=![];lastOrders=[];for(const _0x5ed418 of _0x564493){let _0x4ff33f,_0x3e4425,_0x297a50,_0x47e3fc,_0x2ee70d,_0x1672c9=_0x5ed418[_0xf05b97(0x2f9)];try{const _0x14308b=await exchange['fetchTicker'](_0x1672c9);_0x4ff33f=_0x5ed418[_0xf05b97(0x24d)]?0x1/_0x5ed418[_0xf05b97(0x27a)]:_0x5ed418[_0xf05b97(0x27a)],_0x3e4425=_0x14308b[_0xf05b97(0x2a8)],_0x297a50=_0x14308b[_0xf05b97(0x241)];_0x5ed418[_0xf05b97(0x24d)]?(_0x47e3fc=_0x5ed418['side']==_0xf05b97(0x1c9)?_0xf05b97(0x26b):_0xf05b97(0x1c9),_0x2ee70d=Math[_0xf05b97(0x2be)](_0x5ed418[_0xf05b97(0x18b)])/_0x4ff33f):(_0x47e3fc=_0x5ed418[_0xf05b97(0x1f1)],_0x2ee70d=Math[_0xf05b97(0x2be)](_0x5ed418['trade']));_0x1c24a8=='limit'&&(config['ordertype']=='limit-high'&&(_0x4ff33f=_0x47e3fc==_0xf05b97(0x1c9)?_0x3e4425:_0x297a50),config[_0xf05b97(0x2b0)]==_0xf05b97(0x2b2)&&(_0x4ff33f=_0x47e3fc==_0xf05b97(0x1c9)?_0x297a50:_0x3e4425));_0x2ee70d=formatResult(_0x2ee70d,0x8),_0x4ff33f=formatResult(_0x4ff33f,0x8);const _0x30c824=_0x47e3fc==_0xf05b97(0x26b)?config[_0xf05b97(0x2d0)]?String[_0xf05b97(0x2c5)]('0x'+config['emojisell'])+'\x20':'':config[_0xf05b97(0x2ab)]?String[_0xf05b97(0x2c5)]('0x'+config[_0xf05b97(0x2ab)])+'\x20':'',_0x52d5e3=_0x1c24a8==_0xf05b97(0x216)?_0xf05b97(0x2cc):config[_0xf05b97(0x2b0)]=='limit-high'?_0xf05b97(0x197):_0xf05b97(0x28d),_0x4be45c=(Math[_0xf05b97(0x1b1)](Math['random']()*0x35a4e900)+0x5f5e100)[_0xf05b97(0x1d1)]();lastOrders[_0xf05b97(0x228)]({'customId':_0x4be45c,'symbol':_0x1672c9,'coin':_0x5ed418['coin'],'amount':_0x2ee70d,'price':_0x4ff33f,'side':_0x47e3fc,'reverse':_0x5ed418['reverse'],'filled':0x0});if(_0x1c24a8==_0xf05b97(0x216))logHistory('order',''+_0x30c824+_0x52d5e3+_0xf05b97(0x292)+_0x1672c9+'\x20'+_0x47e3fc+'\x20#'+formatResult(_0x2ee70d,0x8)+'\x20@'+formatResult(_0x4ff33f,0x8));else logHistory(_0xf05b97(0x2e4),''+_0x30c824+_0x52d5e3+_0xf05b97(0x292)+_0x1672c9+'\x20'+_0x47e3fc+'\x20#'+formatResult(_0x2ee70d,0x8)+'\x20@'+formatResult(_0x4ff33f,0x8));let _0x192aa6;_0x1c24a8==_0xf05b97(0x216)?_0x47e3fc=='buy'&&['Bybit',_0xf05b97(0x1fc),_0xf05b97(0x26e),_0xf05b97(0x267),_0xf05b97(0x1ab)][_0xf05b97(0x2de)](config[_0xf05b97(0x231)])?_0x192aa6=await exchange['createOrder'](_0x1672c9,_0x1c24a8,_0x47e3fc,_0x2ee70d,_0x4ff33f):_0x192aa6=await exchange[_0xf05b97(0x1b8)](_0x1672c9,_0x1c24a8,_0x47e3fc,_0x2ee70d,undefined):_0x192aa6=await exchange[_0xf05b97(0x1b8)](_0x1672c9,_0x1c24a8,_0x47e3fc,_0x2ee70d,_0x4ff33f);logger[_0xf05b97(0x25d)](_0xf05b97(0x237)+_0x192aa6['id']+'\x20|\x20Custom\x20ID:\x20'+_0x4be45c);const _0x39fadf=lastOrders['length']-0x1;if(_0x39fadf>=0x0&&lastOrders[_0x39fadf][_0xf05b97(0x318)]==_0x4be45c){lastOrders[_0x39fadf][_0xf05b97(0x2ef)]=_0x192aa6['id'];if(_0x192aa6[_0xf05b97(0x279)])lastOrders[_0x39fadf]['amount']=_0x192aa6[_0xf05b97(0x279)];if(_0x192aa6['price'])lastOrders[_0x39fadf][_0xf05b97(0x258)]=_0x192aa6[_0xf05b97(0x258)];lastOrders[_0x39fadf]['fee']=_0x192aa6[_0xf05b97(0x297)];}if(config[_0xf05b97(0x290)]!=0x0){let _0x16dac9=null;if(cooldownTracker[_0xf05b97(0x29e)]==config['cooldown']-0x1)_0x16dac9=cooldownTracker[_0xf05b97(0x18a)]();const _0x10f337=getTimeStamp();cooldownTracker[_0xf05b97(0x228)](_0x10f337);if(_0x16dac9){const _0x4fa5b6=fns['differenceInSeconds'](new Date(_0x10f337),new Date(_0x16dac9));if(_0x4fa5b6<cooldownInterval){logHistory(_0xf05b97(0x1f5),_0xf05b97(0x25a)+config[_0xf05b97(0x290)]+_0xf05b97(0x213)+cooldownInterval/0x3c+_0xf05b97(0x1ce)+cooldownPeriod/(0xe10*0x3e8)+_0xf05b97(0x1bf)),coolingDown=!![];break;}}}}catch(_0x31f99e){if(_0x31f99e[_0xf05b97(0x1d1)]()[_0xf05b97(0x2de)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x1d89d7=>_0x1d89d7['symbol']!=_0x1672c9),logHistory(_0xf05b97(0x1f5),_0xf05b97(0x26d)+_0x1672c9),_0x33857b=!![];else{if(_0x31f99e[_0xf05b97(0x1d1)]()[_0xf05b97(0x2de)](_0xf05b97(0x1b5)))lastOrders=lastOrders[_0xf05b97(0x2a5)](_0x3bbc71=>_0x3bbc71[_0xf05b97(0x2f9)]!=_0x1672c9),logHistory(_0xf05b97(0x1f5),'Order\x20amount\x20is\x20invalid:\x20'+_0x1672c9),_0x33857b=!![];else{if(_0x31f99e[_0xf05b97(0x1d1)]()[_0xf05b97(0x2de)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x473dfb=>_0x473dfb[_0xf05b97(0x2f9)]!=_0x1672c9),logHistory(_0xf05b97(0x1f5),_0xf05b97(0x2da)+_0x1672c9),logger[_0xf05b97(0x25d)](_0x31f99e),_0x33857b=!![];else _0x31f99e['toString']()[_0xf05b97(0x2de)](_0xf05b97(0x316))?(lastOrders=lastOrders[_0xf05b97(0x2a5)](_0x4923ae=>_0x4923ae['symbol']!=_0x1672c9),logHistory(_0xf05b97(0x1f5),_0xf05b97(0x26d)+_0x1672c9),_0x33857b=!![]):(lastOrders=lastOrders[_0xf05b97(0x2a5)](_0x3fd83b=>_0x3fd83b[_0xf05b97(0x2f9)]!=_0x1672c9),await handleError(_0x31f99e,_0xf05b97(0x29d),_0x1672c9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xf05b97(0x29e)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x12a70a=config['ordertype']==_0xf05b97(0x216)?validateOrderTimeout*0x3c*0x3e8:config[_0xf05b97(0x28f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1e39d7=_0xf05b97;validateOrders(_0x1e39d7(0x21f));},_0x12a70a);}else unlockOrders();_0x33857b&&config['headless']&&(logHistory('error',_0xf05b97(0x286)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xf05b97(0x1ae),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0xf05b97(0x30b)]&&logHistory(_0xf05b97(0x1f5),_0xf05b97(0x302));else lockOrders!=ORDERS[_0xf05b97(0x274)]&&(!config[_0xf05b97(0x30b)]&&(config[_0xf05b97(0x2b0)]==_0xf05b97(0x216)?logHistory('error',_0xf05b97(0x289)):logHistory(_0xf05b97(0x1f5),_0xf05b97(0x277))));}}function persistOpenOrders(_0x196377){const _0x5b304e=_0xa4e499,_0x4b5ad3={...config,'openOrders':_0x196377};let _0x42a916=dbConfig[_0x5b304e(0x2b1)](_0x5b304e(0x2f6))['find']({'botID':botID})['value']();_0x42a916&&dbConfig[_0x5b304e(0x2b1)](_0x5b304e(0x2f6))['find']({'botID':botID})[_0x5b304e(0x18f)](_0x4b5ad3)[_0x5b304e(0x2dc)]();}function restoreOrders(){const _0x179061=_0xa4e499;let _0x5c145e;config[_0x179061(0x1ee)]&&allOpenOrders[_0x179061(0x252)](_0x123fd0=>{const _0x4a2aeb=_0x179061,_0x24b8db=config[_0x4a2aeb(0x1ee)]['find'](_0x2d614d=>_0x2d614d[_0x4a2aeb(0x2ef)]==_0x123fd0['id']);_0x24b8db&&(lastOrders[_0x4a2aeb(0x228)](_0x24b8db),_0x5c145e=_0x123fd0[_0x4a2aeb(0x30f)]);});if(lastOrders[_0x179061(0x29e)]>0x0){lockOrders=ORDERS[_0x179061(0x1e5)],validateOrdersState=_0x179061(0x246),allOrdersPlaced=!![];const _0x1d0f5c=new Date()[_0x179061(0x288)](),_0x409b37=config[_0x179061(0x2b0)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x179061(0x28f)]*0x3c*0x3e8;if(_0x5c145e+_0x409b37>_0x1d0f5c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5c145e+_0x409b37-_0x1d0f5c);}else validateOrders(_0x179061(0x21f));}}async function sendMetricsTelegram(){const _0x3f6073=_0xa4e499;if(!coinsLoaded){process[_0x3f6073(0x207)]({'telegrammsg':_0x3f6073(0x307)},_0x1e2739=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x42ab91='';if(config[_0x3f6073(0x27d)])_0x42ab91=_0x3f6073(0x2df)+config[_0x3f6073(0x195)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x42ab91=_0x3f6073(0x1dc)+botID+_0x3f6073(0x1d8);const _0x564c80=getKPIs('basecoin'),_0x21308a=getKPIs(_0x3f6073(0x23c),config['fiat']),_0x5ee4c6=getKPIs(_0x3f6073(0x26a)),_0x857090=getKPIs(_0x3f6073(0x2e0),config[_0x3f6073(0x23c)]);_0x42ab91+=_0x3f6073(0x230),_0x42ab91+=_0x564c80[_0x3f6073(0x2d9)]+_0x3f6073(0x2b6)+_0x564c80['value']+'\x0a',_0x42ab91+=_0x564c80[_0x3f6073(0x20c)]+':\x20'+_0x564c80['change']+'%\x0a',_0x42ab91+=_0x21308a[_0x3f6073(0x2d9)]+_0x3f6073(0x2b6)+_0x21308a[_0x3f6073(0x306)]+'\x0a',_0x42ab91+=_0x21308a[_0x3f6073(0x20c)]+':\x20'+_0x21308a[_0x3f6073(0x273)]+'%\x0a',_0x42ab91+=_0x5ee4c6[_0x3f6073(0x2d9)]+':\x20'+_0x5ee4c6['value']+'\x20('+config[_0x3f6073(0x315)]+')\x0a',_0x42ab91+=_0x5ee4c6[_0x3f6073(0x20c)]+':\x20'+_0x5ee4c6['change']+'%\x20('+config[_0x3f6073(0x315)]+')\x0a',_0x42ab91+=_0x857090['leftTxt']+':\x20'+_0x857090[_0x3f6073(0x306)]+'\x20('+config['fiat']+')\x0a',_0x42ab91+=_0x857090[_0x3f6073(0x20c)]+':\x20'+_0x857090[_0x3f6073(0x273)]+_0x3f6073(0x18d)+config[_0x3f6073(0x23c)]+')\x0a',_0x42ab91+=_0x3f6073(0x214),process[_0x3f6073(0x207)]({'telegrammsg':_0x42ab91},_0x57da6d=>{});}async function sendPortfolioTelegram(){const _0x2fccd8=_0xa4e499;if(!coinsLoaded){process[_0x2fccd8(0x207)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4a5ba6=>{});return;}let _0xa50c2b='';if(config[_0x2fccd8(0x27d)])_0xa50c2b=_0x2fccd8(0x2df)+config[_0x2fccd8(0x195)]+_0x2fccd8(0x198);else _0xa50c2b=_0x2fccd8(0x1dc)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xa50c2b+=_0x2fccd8(0x230),_0xa50c2b+=_0x2fccd8(0x276),_0xa50c2b+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xa50c2b+=_0x2fccd8(0x276),currentCoins[_0x2fccd8(0x252)](_0x4d3bce=>{const _0x1d3ebd=_0x2fccd8;_0xa50c2b+=_0x4d3bce['coin'][_0x1d3ebd(0x30c)](0x7)+'|\x20'+formatPad(_0x4d3bce[_0x1d3ebd(0x183)],0x2,0x6)+'|\x20'+formatPad(_0x4d3bce['target'],0x2,0x6)+'|\x20'+formatPad(_0x4d3bce['delta']*0x64,0x2,0x6)+'\x0a';}),_0xa50c2b+='</pre>',process['send']({'telegrammsg':_0xa50c2b},_0x47601e=>{});}function formatPad(_0x57bfb0,_0x120811,_0x3a6983){const _0x268415=_0xa4e499,_0x1f8be7=formatResultString(_0x57bfb0,_0x120811);return _0x1f8be7?_0x1f8be7[_0x268415(0x1ff)](_0x3a6983):''[_0x268415(0x1ff)](_0x3a6983);}function logHistory(_0x400dd5,_0x3efc99,_0x280de6=''){const _0x42d8ab=_0xa4e499;logger[_0x42d8ab(0x184)](''+_0x3efc99);let _0x8b457b={'time':getTimeStamp(),'type':_0x400dd5,'event':_0x3efc99};dbLogs[_0x42d8ab(0x2b1)](_0x42d8ab(0x2c4))[_0x42d8ab(0x228)](_0x8b457b)[_0x42d8ab(0x2dc)]();if(_0x280de6=='')_0x280de6=_0x3efc99;proxyEmit('event',{'log':_0x8b457b,'summary':_0x280de6}),process[_0x42d8ab(0x207)]({'telegram':{..._0x8b457b,'botname':config[_0x42d8ab(0x195)],'showname':config[_0x42d8ab(0x27d)]}},_0x416655=>{});}function emitHistory(_0x356006={}){const _0x4db3e7=_0xa4e499;Object[_0x4db3e7(0x2dd)](_0x356006)[_0x4db3e7(0x29e)]==0x0&&(_0x356006={'type':[_0x4db3e7(0x2e4),_0x4db3e7(0x1a1)],'event':'','page':0x1});if(_0x356006[_0x4db3e7(0x256)][_0x4db3e7(0x2de)](_0x4db3e7(0x1a1)))_0x356006[_0x4db3e7(0x256)][_0x4db3e7(0x1a8)](_0x356006[_0x4db3e7(0x256)]['indexOf']('event'),0x1,_0x4db3e7(0x1f5),_0x4db3e7(0x293),_0x4db3e7(0x1ae));if(dbLogs[_0x4db3e7(0x1b4)](_0x4db3e7(0x2c4))[_0x4db3e7(0x306)]()){let _0x2f2fed=dbLogs[_0x4db3e7(0x2b1)](_0x4db3e7(0x2c4))[_0x4db3e7(0x2a5)](_0x5b455b=>{const _0x3f3a75=_0x4db3e7;if(_0x356006[_0x3f3a75(0x256)]['length']==0x0)return![];else return _0x356006[_0x3f3a75(0x256)]['includes'](_0x5b455b['type']);})[_0x4db3e7(0x2a5)](_0x422120=>{const _0xadca4c=_0x4db3e7;if(_0x356006[_0xadca4c(0x1a1)]=='')return!![];else return _0x422120[_0xadca4c(0x1a1)][_0xadca4c(0x2a1)]()[_0xadca4c(0x2de)](_0x356006[_0xadca4c(0x1a1)]['toLowerCase']());})[_0x4db3e7(0x2c9)](_0x4db3e7(0x1cb)),_0x3a6518=_0x2f2fed[_0x4db3e7(0x306)]()[_0x4db3e7(0x29e)];_0x2f2fed=_0x2f2fed[_0x4db3e7(0x24d)]()['slice']((_0x356006[_0x4db3e7(0x1b2)]-0x1)*logPageSize,_0x356006[_0x4db3e7(0x1b2)]*logPageSize-0x1)[_0x4db3e7(0x24d)]()['value'](),proxyEmit(_0x4db3e7(0x251),{'logs':_0x2f2fed,'total':_0x3a6518});}else proxyEmit(_0x4db3e7(0x251),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x9a5098){const _0x336975=_0xa4e499;if(dbLogs[_0x336975(0x1b4)](_0x336975(0x2c4))['value']()){const _0x18b797=dbLogs['get'](_0x336975(0x2c4))['sortBy'](_0x336975(0x1cb))[_0x336975(0x2a5)](_0x2b8755=>{const _0x58ed8e=_0x336975;return _0x2b8755['type']==_0x58ed8e(0x2e4);})[_0x336975(0x306)]();dbLogs[_0x336975(0x2b1)](_0x336975(0x2c4))[_0x336975(0x2f0)]()[_0x336975(0x2dc)](),dbLogs[_0x336975(0x2b1)](_0x336975(0x2c4))['assign'](_0x18b797)['write'](),emitHistory(_0x9a5098);}}async function pauseBot(_0x594f28=pauseBotInterval){const _0x191e35=_0xa4e499,_0x3fd76e=new Date()[_0x191e35(0x288)]();if(!lastErrorShown||_0x3fd76e-lastErrorShown>=_0x594f28){lastErrorShown=_0x3fd76e;!lastBotPause?(lastBotPause=_0x3fd76e,consecutivePauses=0x1):(_0x3fd76e-lastBotPause-_0x594f28<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x191e35(0x207)]({'stop':_0x191e35(0x1f0)},_0x3df6d7=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x191e35(0x288)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x594f28),botPaused=![],reset(!![]);}}}async function killBot(){const _0x3cc9ef=_0xa4e499;botPaused=!![],await sleep(0x3e8),process[_0x3cc9ef(0x207)]({'stop':_0x3cc9ef(0x20e)},_0x3e5390=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2f7539,_0x5d696b){const _0xd66cb9=_0xa4e499;if(botPaused)return;const _0x2f629d=config[_0xd66cb9(0x231)]||'Exchange';if(_0x5d696b)logger[_0xd66cb9(0x25d)](_0xd66cb9(0x1ad)+_0x5d696b);const _0x15cb77=()=>{const _0x10ded0=_0xd66cb9;loading[_0x10ded0(0x1f5)]=!![],emitLoadingProgress();};if(_0x2f7539[_0xd66cb9(0x1d1)]()['includes'](_0xd66cb9(0x2f5)))logHistory(_0xd66cb9(0x1f5),_0x2f629d+_0xd66cb9(0x1fb)),_0x15cb77();else{if(_0x2f7539[_0xd66cb9(0x1d1)]()[_0xd66cb9(0x2de)](_0xd66cb9(0x2b7)))logHistory('error',_0x2f629d+_0xd66cb9(0x22e)),_0x15cb77();else _0x2f7539[_0xd66cb9(0x1d1)]()['includes'](_0xd66cb9(0x295))?(logHistory(_0xd66cb9(0x1f5),_0x2f629d+_0xd66cb9(0x19e)),logHistory(_0xd66cb9(0x1f5),_0xd66cb9(0x319)),_0x15cb77()):await handleError(_0x2f7539,null);}}async function handleError(_0x193977,_0x565e49,_0x41acf7=''){const _0x3e36f5=_0xa4e499;if(botPaused)return;const _0x1b1e99=config[_0x3e36f5(0x231)]||_0x3e36f5(0x189);if(_0x565e49)logger[_0x3e36f5(0x25d)](_0x3e36f5(0x1ad)+_0x565e49);if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x300)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x1cf)+pauseBotMsg),logger[_0x3e36f5(0x25d)](_0x3e36f5(0x31d),_0x193977),await pauseBot();else{if(_0x193977['toString']()['includes'](_0x3e36f5(0x2b5)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x3e36f5(0x25d)](_0x3e36f5(0x31d),_0x193977),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x200))||_0x193977['toString']()[_0x3e36f5(0x2de)]('OnMaintenance'))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x298)+pauseBotMsg),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x217)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x2f2)+pauseBotMsg),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x203)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x2a2)+pauseBotMsg),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2a1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x30f))||_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2a1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x1e9)))logHistory(_0x3e36f5(0x1f5),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20https://hodlerhacks.com/fix#clock-sync'+pauseBotMsg),logger['debug']('Error\x20details:',_0x193977['toString']()),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()['includes'](_0x3e36f5(0x281)))logHistory('error',_0x1b1e99+_0x3e36f5(0x31c)+pauseBotMsg),logger['debug'](_0x3e36f5(0x31d),_0x193977),await pauseBot();else{if(_0x193977 instanceof ccxt[_0x3e36f5(0x268)])logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x240)+pauseBotMsg),logger[_0x3e36f5(0x25d)](_0x3e36f5(0x31d),_0x193977),await pauseBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x2f5)))logHistory('error',_0x1b1e99+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x3e36f5(0x1f5),_0x3e36f5(0x2fc)),await killBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x2b7)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x242)),logHistory(_0x3e36f5(0x1f5),_0x3e36f5(0x2fc)),await killBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x295)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x210)),logHistory(_0x3e36f5(0x1f5),_0x3e36f5(0x2fc)),await killBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)](_0x3e36f5(0x208)))logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x20a)),logHistory('error',_0x3e36f5(0x2fc)),await killBot();else{if(_0x193977[_0x3e36f5(0x1d1)]()[_0x3e36f5(0x2de)]('InsufficientFunds'))logHistory(_0x3e36f5(0x1f5),_0x3e36f5(0x270)+_0x41acf7);else _0x193977 instanceof ccxt[_0x3e36f5(0x25e)]?(logHistory(_0x3e36f5(0x1f5),_0x1b1e99+_0x3e36f5(0x1bd)),logger[_0x3e36f5(0x25d)](_0x3e36f5(0x31d),_0x193977)):(logHistory(_0x3e36f5(0x1f5),_0x3e36f5(0x2c6)+pauseBotMsg),logger[_0x3e36f5(0x25d)]('Error\x20details:',_0x193977),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x3c75a7,_0x703079){const _0x31e7c6=_0xa4e499;return parseFloat(_0x3c75a7[_0x31e7c6(0x1c2)](_0x703079));}function formatResultTruncate(_0xcd7884,_0x1960ca){const _0x3409ad=_0xa4e499;let _0x4262ed=formatResultString(_0xcd7884,0xa),_0x278612=_0x4262ed[_0x3409ad(0x257)]('.');return _0x278612!=-0x1&&(_0x4262ed=_0x4262ed[_0x3409ad(0x1cd)](0x0,_0x278612+_0x1960ca+0x1)),Number(_0x4262ed);}function formatResultString(_0x4d9b3d,_0x9ba21){const _0xfcba90=_0xa4e499;let _0x2879a7;if(!(''+_0x4d9b3d)[_0xfcba90(0x2de)]('e'))_0x2879a7=+(Math['round'](_0x4d9b3d+'e+'+_0x9ba21)+'e-'+_0x9ba21);else{let _0x2ebec8=(''+_0x4d9b3d)[_0xfcba90(0x259)]('e'),_0x1cfe2e='';+_0x2ebec8[0x1]+_0x9ba21>0x0&&(_0x1cfe2e='+'),_0x2879a7=+(Math[_0xfcba90(0x1f4)](+_0x2ebec8[0x0]+'e'+_0x1cfe2e+(+_0x2ebec8[0x1]+_0x9ba21))+'e-'+_0x9ba21);}return Number(_0x2879a7)[_0xfcba90(0x1c2)](_0x9ba21);}function getServerTime(){const _0x47e9f3=_0xa4e499,_0x4923e2=new Date();return _0x4923e2[_0x47e9f3(0x1db)]()+'/'+(_0x4923e2[_0x47e9f3(0x2d1)]()+0x1)[_0x47e9f3(0x1d1)]()[_0x47e9f3(0x1ff)](0x2,'0')+'/'+_0x4923e2[_0x47e9f3(0x299)]()['toString']()[_0x47e9f3(0x1ff)](0x2,'0')+'\x20'+_0x4923e2[_0x47e9f3(0x31e)]()[_0x47e9f3(0x1d1)]()[_0x47e9f3(0x1ff)](0x2,'0')+':'+_0x4923e2['getMinutes']()[_0x47e9f3(0x1d1)]()[_0x47e9f3(0x1ff)](0x2,'0')+':'+_0x4923e2[_0x47e9f3(0x2c3)]()[_0x47e9f3(0x1d1)]()[_0x47e9f3(0x1ff)](0x2,'0');}function getTimeStamp(){const _0x27c5ac=_0xa4e499,_0x1a95b9=shiftedTime();return _0x1a95b9[_0x27c5ac(0x1db)]()+'/'+(_0x1a95b9[_0x27c5ac(0x2d1)]()+0x1)[_0x27c5ac(0x1d1)]()[_0x27c5ac(0x1ff)](0x2,'0')+'/'+_0x1a95b9[_0x27c5ac(0x299)]()[_0x27c5ac(0x1d1)]()[_0x27c5ac(0x1ff)](0x2,'0')+'\x20'+_0x1a95b9[_0x27c5ac(0x31e)]()[_0x27c5ac(0x1d1)]()[_0x27c5ac(0x1ff)](0x2,'0')+':'+_0x1a95b9[_0x27c5ac(0x1af)]()[_0x27c5ac(0x1d1)]()['padStart'](0x2,'0')+':'+_0x1a95b9[_0x27c5ac(0x2c3)]()[_0x27c5ac(0x1d1)]()['padStart'](0x2,'0');}function getDate(){const _0xe44d2=_0xa4e499,_0x145e61=shiftedTime();return _0x145e61['getFullYear']()+'/'+(_0x145e61[_0xe44d2(0x2d1)]()+0x1)[_0xe44d2(0x1d1)]()[_0xe44d2(0x1ff)](0x2,'0')+'/'+_0x145e61['getDate']()[_0xe44d2(0x1d1)]()[_0xe44d2(0x1ff)](0x2,'0');}function getHour(){const _0x3bb0db=_0xa4e499,_0x1f222c=shiftedTime();return _0x1f222c[_0x3bb0db(0x31e)]()[_0x3bb0db(0x1d1)]()[_0x3bb0db(0x1ff)](0x2,'0');}function sleep(_0x282988){return new Promise(_0x14bf96=>setTimeout(_0x14bf96,_0x282988));}function shiftedTime(){const _0x4f8cb5=_0xa4e499,_0x444dbc=new Date();let _0x1f5373=_0x444dbc;if(config&&config[_0x4f8cb5(0x19c)]!==0x0)_0x1f5373=fns['add'](_0x444dbc,{'hours':config[_0x4f8cb5(0x19c)]});return _0x1f5373;}function timer(_0x4e5752){const _0x15a726=_0xa4e499,_0x3dd72c=new Date();!lasttime?console[_0x15a726(0x2fb)](getTimeStamp()+_0x15a726(0x261),_0x4e5752,_0x3dd72c):console[_0x15a726(0x2fb)](getTimeStamp()+_0x15a726(0x261),_0x4e5752,(_0x3dd72c-lasttime)/0x3e8),lasttime=_0x3dd72c;}