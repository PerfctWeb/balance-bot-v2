const _0x38ddca=_0x535e;(function(_0x351103,_0x43cc72){const _0x1906fa=_0x535e,_0x497c14=_0x351103();while(!![]){try{const _0x2dc80b=-parseInt(_0x1906fa(0x2e5))/0x1*(-parseInt(_0x1906fa(0x213))/0x2)+parseInt(_0x1906fa(0x22d))/0x3*(parseInt(_0x1906fa(0x358))/0x4)+parseInt(_0x1906fa(0x2d8))/0x5+-parseInt(_0x1906fa(0x361))/0x6*(parseInt(_0x1906fa(0x236))/0x7)+parseInt(_0x1906fa(0x2d7))/0x8*(-parseInt(_0x1906fa(0x266))/0x9)+parseInt(_0x1906fa(0x35b))/0xa+-parseInt(_0x1906fa(0x237))/0xb;if(_0x2dc80b===_0x43cc72)break;else _0x497c14['push'](_0x497c14['shift']());}catch(_0x183f7c){_0x497c14['push'](_0x497c14['shift']());}}}(_0x5085,0x521ca));const _0x5f4722=function(){let _0x3f6cee=!![];return function(_0x5b4616,_0x398895){const _0x1db6f9=_0x3f6cee?function(){const _0x8b5e62=_0x535e;if(_0x398895){const _0x11aad5=_0x398895[_0x8b5e62(0x2eb)](_0x5b4616,arguments);return _0x398895=null,_0x11aad5;}}:function(){};return _0x3f6cee=![],_0x1db6f9;};}(),_0xcfe07b=_0x5f4722(this,function(){const _0x223c30=_0x535e;return _0xcfe07b[_0x223c30(0x27b)]()[_0x223c30(0x1aa)]('(((.+)+)+)+$')[_0x223c30(0x27b)]()['constructor'](_0xcfe07b)[_0x223c30(0x1aa)]('(((.+)+)+)+$');});_0xcfe07b();'use strict';const ccxt=require('ccxt'),low=require(_0x38ddca(0x2ea)),FileSync=require(_0x38ddca(0x2f0)),fs=require('fs'),fns=require(_0x38ddca(0x1bb)),forge=require('node-forge'),util=require(_0x38ddca(0x1d3)),argv=require(_0x38ddca(0x362))(process[_0x38ddca(0x2a8)][_0x38ddca(0x2fe)](0x2))[_0x38ddca(0x2a8)],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x38ddca(0x1ed),_0x38ddca(0x344),_0x38ddca(0x1e3),_0x38ddca(0x1dd),_0x38ddca(0x367),_0x38ddca(0x2c5)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x38ddca(0x34b)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x38ddca(0x1fe)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x38ddca(0x210)+pauseBotInterval/0xea60+_0x38ddca(0x1fc),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x5dc,balanceUpdateRetries=0x5;let enableFiatToggle;const serverversion=require(_0x38ddca(0x28c))['version'],environment=require(_0x38ddca(0x28c))[_0x38ddca(0x200)]||_0x38ddca(0x25d),botID=process[_0x38ddca(0x2a8)][0x2]||_0x38ddca(0x36c),pattern=/^[0-9]{3}$/;!pattern[_0x38ddca(0x2c7)](botID)&&(console[_0x38ddca(0x24d)](_0x38ddca(0x226)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x38ddca(0x2a8)][0x3]||'',configpath=userID?_0x38ddca(0x366)+userID+'/':_0x38ddca(0x366),logspath=userID?_0x38ddca(0x264)+userID+'/':_0x38ddca(0x264),loggerfile=fs[_0x38ddca(0x1b7)](logspath+_0x38ddca(0x232),{'flags':'a'});!fs[_0x38ddca(0x2a0)](configpath)&&fs[_0x38ddca(0x2ad)](configpath);!fs[_0x38ddca(0x2a0)](logspath)&&fs[_0x38ddca(0x2ad)](logspath);const configfile=configpath+_0x38ddca(0x1c9)+botID+_0x38ddca(0x2fc),logfile=configpath+_0x38ddca(0x1c9)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x38ddca(0x1c9)+botID+_0x38ddca(0x1e4),settingsfile=configpath+_0x38ddca(0x239),securefile=configpath+_0x38ddca(0x1d2),configbackuppath=configpath+_0x38ddca(0x30f),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x38ddca(0x2de)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x38ddca(0x22e)]({'data':[],'version':serverversion})[_0x38ddca(0x2de)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x38ddca(0x22e)]({'coins':[],'version':serverversion})[_0x38ddca(0x2de)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1dd6d8=>{console['log'](_0x1dd6d8);},'simple':_0x201062=>{const _0x3dfbba=_0x38ddca;console['log'](_0x201062),loggerfile[_0x3dfbba(0x2de)](util[_0x3dfbba(0x2d6)](_0x201062)+'\x0a');},'full':async(_0x4e7324,_0x37acb8='')=>{const _0x5eb679=_0x38ddca;let _0x17f6c4;if(config[_0x5eb679(0x2b3)])_0x17f6c4=getTimeStamp()+':\x20'+config[_0x5eb679(0x21f)]+_0x5eb679(0x25a)+_0x4e7324;else _0x17f6c4=getTimeStamp()+_0x5eb679(0x1c3)+botID+_0x5eb679(0x25a)+_0x4e7324;console[_0x5eb679(0x24d)](_0x17f6c4),loggerfile[_0x5eb679(0x2de)](util['format'](_0x17f6c4)+'\x0a'),_0x37acb8&&(console[_0x5eb679(0x24d)](_0x37acb8),loggerfile['write'](util[_0x5eb679(0x2d6)](_0x37acb8)+'\x0a'));},'debug':async(_0x115b83,_0xc3a676='')=>{const _0x5eb0c8=_0x38ddca;let _0x15bb0a;if(config[_0x5eb0c8(0x2b3)])_0x15bb0a=getTimeStamp()+':\x20'+config[_0x5eb0c8(0x21f)]+_0x5eb0c8(0x280)+_0x115b83;else _0x15bb0a=getTimeStamp()+_0x5eb0c8(0x1c3)+botID+'\x20>\x20[DEBUG]\x20'+_0x115b83;if(debugging)console[_0x5eb0c8(0x24d)](_0x15bb0a);loggerfile[_0x5eb0c8(0x2de)](util[_0x5eb0c8(0x2d6)](_0x15bb0a)+'\x0a');if(_0xc3a676){if(debugging)console[_0x5eb0c8(0x24d)](_0xc3a676);loggerfile['write'](util[_0x5eb0c8(0x2d6)](_0xc3a676)+'\x0a');}}};process['on'](_0x38ddca(0x224),function(_0x5afe78){const _0x890a04=_0x38ddca;handleError(_0x5afe78,_0x890a04(0x224));});settings[_0x38ddca(0x305)]!=config['timeshift']&&updateTimeshift(settings[_0x38ddca(0x305)]);settings[_0x38ddca(0x2b2)]!=config[_0x38ddca(0x2b2)]&&updateOnepagemode(settings[_0x38ddca(0x2b2)]);(settings[_0x38ddca(0x329)]&&!config[_0x38ddca(0x329)]||!settings[_0x38ddca(0x329)]&&config['marketcapApi'])&&updateMarketcapApi(settings['marketcapApi']);process[_0x38ddca(0x2cf)]({'started':_0x38ddca(0x2c9)},_0xd3e9c0=>{}),initializeProcessListeners();function proxyEmit(_0xc56b5a,_0x6099a1=null){process['send']({'function':_0xc56b5a,'args':_0x6099a1},_0x1c8448=>{});}function initializeProcessListeners(){process['on']('message',_0x40446a=>{const _0x285959=_0x535e;switch(Object[_0x285959(0x203)](_0x40446a)[0x0]){case _0x285959(0x305):_0x40446a[_0x285959(0x305)]!=undefined&&(settings['timeshift']=_0x40446a[_0x285959(0x305)],updateTimeshift(settings[_0x285959(0x305)]));break;case _0x285959(0x2b2):_0x40446a[_0x285959(0x2b2)]!=undefined&&(settings['onepagemode']=_0x40446a['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x285959(0x329):_0x40446a[_0x285959(0x329)]!=undefined&&(settings[_0x285959(0x329)]=_0x40446a[_0x285959(0x329)],updateMarketcapApi(settings['marketcapApi']));break;case'bots':_0x40446a[_0x285959(0x252)]!=undefined&&(bots=JSON[_0x285959(0x2d4)](_0x40446a['bots']),proxyEmit('bots',bots));break;case'function':switch(_0x40446a['function']){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x285959(0x27d):emitHistory(_0x40446a['args']);break;case _0x285959(0x2f3):deleteHistoryAlerts(_0x40446a['args']);break;case _0x285959(0x2b6):getPortfolio(_0x40446a['args']);break;case _0x285959(0x350):storeConfiguration(_0x40446a['args']);break;case _0x285959(0x270):storeHeadless(_0x40446a[_0x285959(0x275)]);break;case _0x285959(0x26f):storeFiat(_0x40446a[_0x285959(0x275)]);break;case'resetHistory':resetHistory();break;case _0x285959(0x1a6):getStartingBalances(getNormalizedPerformance());break;case _0x285959(0x1b4):placeOrder(_0x40446a[_0x285959(0x275)]);break;case _0x285959(0x31b):cancelLoading();break;case _0x285959(0x368):showConfig();break;case _0x285959(0x23d):sendMetricsTelegram();break;case _0x285959(0x23f):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x7bfa98=![]){const _0x53a2df=_0x38ddca;logger['debug'](_0x53a2df(0x1ec)+(_0x7bfa98?_0x53a2df(0x282):_0x53a2df(0x2c0))+_0x53a2df(0x29a)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x7bfa98)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x53a2df(0x343)]!=_0x53a2df(0x1cd)){loadingProgress=0x0;_0x7bfa98&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x53a2df(0x1f0),emittedConfiguration()),initialPerformanceStored=![]);const _0x470a20=await getCoins();[currentCoins,currentCoinsAll]=_0x470a20,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x53a2df(0x247)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x53a2df(0x1f9)]==0x0&&allOpenOrders[_0x53a2df(0x1f9)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x51d741=![]){const _0x23f2ca=_0x38ddca;logger['debug']('Resuming\x20('+(_0x51d741?_0x23f2ca(0x2aa):'complete')+')\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x51d741){getBalances();return;}coinsLoaded=![];if(config[_0x23f2ca(0x343)]!=''&&config[_0x23f2ca(0x343)]!=_0x23f2ca(0x1cd)){loadingProgress=0x1;const _0x48e5f5=await getCoins();[currentCoins,currentCoinsAll]=_0x48e5f5,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x23f2ca(0x346)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x23f2ca(0x1f9)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x21a757){const _0x2cc290=_0x38ddca;let _0x2f7112=![];if(_0x21a757)_0x2f7112=!![];let _0x3fee16;_0x2f7112?_0x3fee16=_0x21a757[_0x2cc290(0x311)](_0x269ab9=>_0x269ab9[_0x2cc290(0x1e2)]):_0x3fee16=currentCoinsAll['map'](_0x5a1f3c=>_0x5a1f3c[_0x2cc290(0x1e2)]);if(!config[_0x2cc290(0x329)]||!_0x2f7112&&!config[_0x2cc290(0x265)]||_0x3fee16['length']==0x0)return;let _0x2e5ebf=null;try{_0x2e5ebf=await axios[_0x2cc290(0x216)](_0x2cc290(0x27f),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2cc290(0x329)]},'params':{'symbol':_0x3fee16[_0x2cc290(0x27b)]()}});}catch(_0x3e3e79){_0x2e5ebf=null,_0x3e3e79[_0x2cc290(0x27b)]()['includes']('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x2cc290(0x1f0),emittedConfiguration()),logHistory('error','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x2cc290(0x338),_0x2cc290(0x1f3)+schedulerInterval/(0x3c*0x3e8)+_0x2cc290(0x1fc)),logger['debug'](_0x2cc290(0x238),_0x3e3e79[_0x2cc290(0x27b)]()+_0x2cc290(0x317)+_0x3e3e79['code']));}if(_0x2e5ebf){let _0x672051=0x0;const _0x57bfdf=_0x2e5ebf['data'];_0x3fee16[_0x2cc290(0x337)](_0x49e658=>{const _0x4acdea=_0x2cc290;if(_0x57bfdf[_0x4acdea(0x31d)][_0x49e658][0x0])_0x672051+=_0x57bfdf['data'][_0x49e658][0x0][_0x4acdea(0x1e9)][_0x4acdea(0x1ed)]['market_cap'];}),_0x3fee16['forEach'](_0x354e13=>{const _0x2b9d50=_0x2cc290,_0x3cc968=_0x57bfdf[_0x2b9d50(0x31d)][_0x354e13][0x0]?_0x57bfdf['data'][_0x354e13][0x0][_0x2b9d50(0x1e9)]['USD']['market_cap']:0x0;if(_0x2f7112){const _0x5c7457=_0x21a757['find'](_0x235efe=>_0x235efe[_0x2b9d50(0x1e2)]==_0x354e13);_0x5c7457&&(_0x5c7457[_0x2b9d50(0x212)]=_0x3cc968);}else{const _0x23d030=currentCoins[_0x2b9d50(0x1cf)](_0x2a939d=>_0x2a939d[_0x2b9d50(0x1e2)]==_0x354e13);_0x23d030&&(_0x23d030['marketcap']=_0x3cc968);const _0x93834e=currentCoinsAll['find'](_0x2d6f04=>_0x2d6f04[_0x2b9d50(0x1e2)]==_0x354e13);_0x93834e&&(_0x93834e['marketcap']=_0x3cc968);}}),!_0x2f7112&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1bb3b6=_0x38ddca,_0x30a315=0x2;let _0x420411=0x0,_0x5768bf=0x0,_0x24271e=0x0,_0x364794=0x0,_0x3bb3a6=0x0;config[_0x1bb3b6(0x2b5)]['forEach'](_0x519ab4=>{const _0x11fcad=_0x1bb3b6;if(!_0x519ab4[_0x11fcad(0x1d5)]){_0x24271e++,_0x420411+=_0x519ab4['slider'];if(_0x519ab4[_0x11fcad(0x1f5)]===-0x1){_0x420411++;const _0x51104d=currentCoinsAll[_0x11fcad(0x1cf)](_0x575012=>_0x575012[_0x11fcad(0x1e2)]==_0x519ab4[_0x11fcad(0x1e2)]);_0x51104d&&(_0x364794+=_0x51104d[_0x11fcad(0x212)],_0x3bb3a6+=Math[_0x11fcad(0x261)](_0x51104d['marketcap']));}if(_0x519ab4[_0x11fcad(0x1f5)]!==-0x1)_0x5768bf++;}});let _0x2630b6;const _0x26317d=0x64-_0x420411,_0x59143e=_0x24271e-_0x5768bf;_0x2630b6=_0x59143e===0x0?_0x420411:Math['max'](0x64,_0x420411),config['portfolio'][_0x1bb3b6(0x337)](_0x20e6de=>{const _0x40b81d=_0x1bb3b6,_0x3d2302=currentCoinsAll[_0x40b81d(0x1cf)](_0x94afa=>_0x94afa[_0x40b81d(0x1e2)]==_0x20e6de['coin']);_0x3d2302&&(_0x20e6de[_0x40b81d(0x212)]=_0x3d2302[_0x40b81d(0x212)]);if(!_0x20e6de[_0x40b81d(0x1d5)]){if(_0x2630b6<=0x64){if(_0x20e6de[_0x40b81d(0x1f5)]===-0x1){if(_0x364794!==0x0&&config['marketcapEnabled']){if(_0x3d2302){if(config['marketcapEnabled']==_0x40b81d(0x212))_0x20e6de[_0x40b81d(0x1eb)]=(_0x26317d/(_0x364794/_0x3d2302[_0x40b81d(0x212)]))[_0x40b81d(0x2bc)](_0x30a315);else config[_0x40b81d(0x265)]=='marketcapsqrt'&&(_0x20e6de[_0x40b81d(0x1eb)]=(_0x26317d/(_0x3bb3a6/Math['sqrt'](_0x3d2302[_0x40b81d(0x212)])))[_0x40b81d(0x2bc)](_0x30a315));}}}}}}),updateConfig();}function updateConfig(){const _0x42fb85=_0x38ddca;let _0x598a2d=dbConfig[_0x42fb85(0x216)]('bot')[_0x42fb85(0x1cf)]({'botID':botID})[_0x42fb85(0x33a)]();_0x598a2d&&dbConfig[_0x42fb85(0x216)](_0x42fb85(0x354))[_0x42fb85(0x1cf)]({'botID':botID})[_0x42fb85(0x2db)](config)[_0x42fb85(0x2de)]();}function logMemory(){const _0x529972=_0x38ddca;if(environment!=_0x529972(0x1e0))return;const _0x4f4474=process[_0x529972(0x330)]()[_0x529972(0x320)]/0x400/0x400;logger[_0x529972(0x247)](_0x529972(0x227)+process[_0x529972(0x1d6)]+'\x20uses\x20'+formatResult(_0x4f4474,0x1)+_0x529972(0x1cc));}async function startScheduler(){const _0x1bd1bf=shiftedTime()['getHours']();getMarketCap(),_0x1bd1bf==0x1&&logMemory(),(_0x1bd1bf==0x2||_0x1bd1bf==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x16372f=![]){const _0x58c725=_0x38ddca;logger[_0x58c725(0x247)]('Initiating\x20bot\x20restart');if(!_0x16372f)while(lockOrders!=ORDERS[_0x58c725(0x1fe)]||coolingDown){await sleep(0x3e8);}process[_0x58c725(0x2cf)]({'stop':'restart'},_0x4d7186=>{});}async function initExchange(_0x48d4e2=config['exchange'],_0x11d1f8=config[_0x38ddca(0x343)],_0x1a66d0=config[_0x38ddca(0x289)],_0x37cec4=config[_0x38ddca(0x33e)]){const _0x1d280f=_0x38ddca;if(exchange){logger[_0x1d280f(0x247)](_0x1d280f(0x2dc));return;}logger[_0x1d280f(0x247)](_0x1d280f(0x315));!supportedExchanges()['includes'](_0x48d4e2)&&(logHistory(_0x1d280f(0x338),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x48d4e2+_0x1d280f(0x309)),killBot());const _0x46f202=ccxt[_0x1d280f(0x276)][_0x48d4e2[_0x1d280f(0x1cb)]()];exchange=new _0x46f202({'apiKey':_0x11d1f8,'secret':_0x1a66d0,'options':{'defaultType':_0x1d280f(0x353)}});if(_0x37cec4)exchange[_0x1d280f(0x359)]=_0x37cec4;}function updateExchange(_0x418469,_0x35ddea,_0x1c60da=null){const _0x4dd45c=_0x38ddca;exchange[_0x4dd45c(0x343)]=_0x418469,exchange['apiSecret']=_0x35ddea,exchange[_0x4dd45c(0x33e)]=_0x1c60da,logger[_0x4dd45c(0x247)](_0x4dd45c(0x1d1));}function setStableCoins(){const _0x10647f=_0x38ddca;let _0x3a6bb0=config[_0x10647f(0x33b)]==_0x10647f(0x1a4)?'ETH':config['basecoin']==_0x10647f(0x1e7)?_0x10647f(0x1e7):'BTC',_0x5c07cc=allSymbols[_0x10647f(0x2ca)](_0x3a6bb0+'/USD')?_0x10647f(0x1ed):allSymbols['includes'](_0x3a6bb0+_0x10647f(0x30a))?_0x10647f(0x1dd):'EUR',_0x3b0bc5=allSymbols[_0x10647f(0x2ca)](_0x3a6bb0+_0x10647f(0x2f1))?_0x10647f(0x369):_0x5c07cc;enableFiatToggle=!![],_0x5c07cc=='EUR'&&(enableFiatToggle=![],storeFiat(_0x10647f(0x369))),_0x3b0bc5!=_0x10647f(0x369)&&(enableFiatToggle=![],storeFiat(_0x10647f(0x1ed))),stablecoins={'eur':{'coin':''+_0x3a6bb0+_0x3b0bc5,'symbol':_0x3a6bb0+'/'+_0x3b0bc5},'usd':{'coin':''+_0x3a6bb0+_0x5c07cc,'symbol':_0x3a6bb0+'/'+_0x5c07cc}};}async function initwsCcxt(){const _0x26e2ab=_0x38ddca;initCycle++;const _0x33bb74=initCycle;let _0x6e9efc=[];config['portfolio']['forEach'](_0x29583b=>{const _0x55da77=_0x535e;if(!_0x29583b[_0x55da77(0x1d5)]&&_0x29583b[_0x55da77(0x1e2)]!=config['basecoin'])_0x6e9efc['push'](_0x29583b[_0x55da77(0x1bd)]);});if(!_0x6e9efc[_0x26e2ab(0x2ca)](stablecoins['eur']['symbol']))_0x6e9efc[_0x26e2ab(0x28e)](stablecoins['eur'][_0x26e2ab(0x1bd)]);if(!_0x6e9efc[_0x26e2ab(0x2ca)](stablecoins[_0x26e2ab(0x20f)][_0x26e2ab(0x1bd)]))_0x6e9efc[_0x26e2ab(0x28e)](stablecoins[_0x26e2ab(0x20f)][_0x26e2ab(0x1bd)]);if(config['exchange']['startsWith'](_0x26e2ab(0x31e))&&config[_0x26e2ab(0x33b)]!=_0x26e2ab(0x1e7)){if(!_0x6e9efc[_0x26e2ab(0x2ca)](_0x26e2ab(0x2c4)+config['basecoin']))_0x6e9efc[_0x26e2ab(0x28e)]('BNB/'+config[_0x26e2ab(0x33b)]);}loadCoins(_0x6e9efc),_0x6e9efc=validateSymbols(_0x6e9efc);const _0x3a1742=async _0x3e8c18=>{const _0x4e2e53=_0x26e2ab;let _0x283aa2;try{const _0x4472df=await getTickers(_0x3e8c18);Object['entries'](_0x4472df)[_0x4e2e53(0x337)](_0x3ea610=>{const _0x110c89=_0x4e2e53;_0x283aa2=_0x3ea610[0x1]['symbol'],gTicker[noslash(_0x283aa2)]=_0x3ea610[0x1][_0x110c89(0x324)],gChange[_0x283aa2]=_0x3ea610[0x1]['percentage'];});}catch(_0x262b37){await handleError(_0x262b37,_0x4e2e53(0x28d),_0x283aa2);}},_0x5d4633=async _0x447ead=>{const _0x5b4e4d=_0x26e2ab;while(initCycle==_0x33bb74){if(!botPaused)try{const _0x4abafa=await exchange[_0x5b4e4d(0x204)](_0x447ead);gTicker[noslash(_0x4abafa[0x0][_0x5b4e4d(0x1bd)])]=_0x4abafa[0x0][_0x5b4e4d(0x2a5)];}catch(_0x3dac66){if(!exchangeStopped)await handleError(_0x3dac66,_0x5b4e4d(0x234),_0x447ead);}else await sleep(0x64);}},_0x1682e8=async _0x4d274b=>{const _0x335e35=_0x26e2ab;while(initCycle==_0x33bb74){if(!botPaused)try{const _0x9cbb4b=await exchange[_0x335e35(0x1a7)](_0x4d274b),_0x14eda4=_0x9cbb4b['pop']();gTicker[noslash(_0x14eda4[_0x335e35(0x1bd)])]=_0x14eda4['price'];}catch(_0x2fec11){if(!exchangeStopped)await handleError(_0x2fec11,'watchTradesForSymbols()',_0x4d274b[_0x335e35(0x27b)]());}else await sleep(0x64);}},_0x55df55=async _0x40128c=>{const _0x32111f=_0x26e2ab;while(initCycle==_0x33bb74){if(!botPaused){let _0x2684fd;try{await sleep(0x3c*0x3e8);const _0x1b85db=await getTickers(_0x40128c);Object[_0x32111f(0x281)](_0x1b85db)[_0x32111f(0x337)](_0x37f6c8=>{const _0x4f53f2=_0x32111f;_0x2684fd=_0x37f6c8[0x1]['symbol'],gChange[_0x2684fd]=_0x37f6c8[0x1][_0x4f53f2(0x21e)];});}catch(_0xaf429){if(!exchangeStopped)await handleError(_0xaf429,_0x32111f(0x26a),_0x2684fd);}}else await sleep(0x64);}},_0x1d92b1=async _0x550575=>{const _0x47f628=_0x26e2ab;while(initCycle==_0x33bb74){if(!botPaused)try{const _0x5dca0b=await exchange[_0x47f628(0x222)](_0x550575);initCycle==_0x33bb74&&_0x5dca0b[_0x47f628(0x337)](_0x493fe4=>{updateNumberCoinsCcxt(_0x493fe4);});}catch(_0x53f01a){if(!exchangeStopped)await handleError(_0x53f01a,_0x47f628(0x2b1));}else await sleep(0x64);}};_0x3a1742(_0x6e9efc),_0x55df55(_0x6e9efc),exchange[_0x26e2ab(0x278)]['watchTradesForSymbols']&&!(config['exchange']==_0x26e2ab(0x1e1)&&_0x6e9efc[_0x26e2ab(0x1f9)]>0xa)?_0x1682e8(_0x6e9efc):_0x6e9efc[_0x26e2ab(0x337)](_0x5e146e=>{_0x5d4633(_0x5e146e);}),_0x6e9efc[_0x26e2ab(0x337)](_0x5d03b5=>{_0x1d92b1(_0x5d03b5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x5537ba){const _0x413944=_0x38ddca;let _0x723728={};try{if(config[_0x413944(0x1db)]!='Cryptocom')_0x723728=await exchange['fetchTickers'](_0x5537ba);else for(const _0x32de1d of _0x5537ba){const _0x576525=await exchange[_0x413944(0x2f7)](_0x32de1d);_0x723728[_0x32de1d]=_0x576525;}return _0x723728;}catch(_0x2d2f59){throw _0x2d2f59;}}function setBlockTransactionDetection(_0x224a9b){const _0x20cb0a=_0x38ddca;blockTransactionDetection=_0x224a9b,logger[_0x20cb0a(0x247)](_0x20cb0a(0x314)+blockTransactionDetection);}async function detectLiquidityChange(_0x4bf070=0x0){const _0x207ad1=_0x38ddca;transactionDetectionOngoing=!![];try{const _0x1536b8=await getCoins(_0x4bf070),[_0x785fc8,_0x5e39fe]=_0x1536b8;let _0x111576=[];currentCoins[_0x207ad1(0x337)](_0x3d24c0=>{const _0x653ec8=_0x207ad1,_0x54a1cf=_0x785fc8[_0x653ec8(0x1cf)](_0x181615=>_0x181615['coin']==_0x3d24c0[_0x653ec8(0x1e2)]);if(_0x54a1cf){if(_0x3d24c0[_0x653ec8(0x2da)]!=_0x54a1cf['number']){let _0x4f1256;if(_0x3d24c0[_0x653ec8(0x1e2)]!=config[_0x653ec8(0x33b)]){const _0x16fe61=gTicker[noslash(_0x3d24c0[_0x653ec8(0x1bd)])];_0x4f1256=_0x3d24c0['reverse']?0x1/_0x16fe61:_0x16fe61;}else _0x4f1256=0x1;_0x111576[_0x653ec8(0x28e)]({'coin':_0x3d24c0[_0x653ec8(0x1e2)],'symbol':_0x3d24c0['symbol'],'price':_0x4f1256,'number':Number(formatResult(_0x54a1cf[_0x653ec8(0x2da)]-_0x3d24c0[_0x653ec8(0x2da)],0x8)),'basecoinvalue':_0x4f1256*(_0x54a1cf['number']-_0x3d24c0[_0x653ec8(0x2da)])});}}});if(_0x111576[_0x207ad1(0x1f9)]>0x0&&!blockTransactionDetection){for(const _0x426ee7 of _0x111576){if(config[_0x207ad1(0x29b)]){logger[_0x207ad1(0x247)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x426ee7[_0x207ad1(0x1de)]+_0x207ad1(0x2cd)+lastFees[_0x207ad1(0x293)]);if(lastFees[_0x207ad1(0x293)]==0x0||Math[_0x207ad1(0x1ad)](_0x426ee7['basecoinvalue'])>lastFees[_0x207ad1(0x293)]*0x3){if(config[_0x207ad1(0x29b)]=='update-liquidity'){delete _0x426ee7['symbol'],delete _0x426ee7['basecoinvalue'];let _0x963eea=[],_0x2a6133=[...config[_0x207ad1(0x1c6)]]||[],_0x3379cd=config[_0x207ad1(0x1c6)];_0x2a6133['sort']((_0x59ebea,_0x471308)=>_0x59ebea[_0x207ad1(0x1b1)]>_0x471308['date']?-0x1:_0x471308[_0x207ad1(0x1b1)]>_0x59ebea[_0x207ad1(0x1b1)]?0x1:0x0);const _0x5bfddf=getDate();if(_0x2a6133[0x0]){const _0x5d12e9=fns['parse'](_0x2a6133[0x0][_0x207ad1(0x1b1)],_0x207ad1(0x25c),new Date()),_0x5c3b2e=fns['parse'](_0x5bfddf,_0x207ad1(0x25c),new Date());if(fns[_0x207ad1(0x205)](_0x5d12e9,_0x5c3b2e)){_0x963eea=_0x2a6133[0x0][_0x207ad1(0x347)];const _0x56ba6d=_0x963eea[_0x207ad1(0x1cf)](_0x357183=>_0x357183[_0x207ad1(0x1e2)]==_0x426ee7[_0x207ad1(0x1e2)]);_0x56ba6d?(_0x56ba6d[_0x207ad1(0x2da)]+=_0x426ee7[_0x207ad1(0x2da)],_0x56ba6d[_0x207ad1(0x2da)]==0x0&&(_0x963eea=_0x963eea[_0x207ad1(0x20d)](_0x326e87=>{const _0x3b6b04=_0x207ad1;return _0x326e87[_0x3b6b04(0x1e2)]!=_0x426ee7['coin'];}))):_0x963eea[_0x207ad1(0x28e)](_0x426ee7);const _0xdda5ce=_0x3379cd[_0x207ad1(0x1cf)](_0x1ba723=>_0x1ba723[_0x207ad1(0x1b1)]==_0x5bfddf);_0xdda5ce['changes']=_0x963eea;}else _0x3379cd[_0x207ad1(0x28e)]({'date':_0x5bfddf,'changes':[_0x426ee7]});}const _0x471b60=_0x3379cd['find'](_0x5a27a8=>_0x5a27a8[_0x207ad1(0x1b1)]==_0x5bfddf);if(_0x471b60){let _0x38938b=!![];_0x471b60[_0x207ad1(0x347)][_0x207ad1(0x337)](_0x309b82=>{if(_0x309b82['number']!=0x0)_0x38938b=![];}),_0x38938b&&(_0x3379cd=_0x3379cd[_0x207ad1(0x20d)](_0x156c96=>{const _0x923224=_0x207ad1;return _0x156c96[_0x923224(0x1b1)]!=_0x5bfddf;}));}let _0xc66645=dbConfig[_0x207ad1(0x216)]('bot')[_0x207ad1(0x1cf)]({'botID':botID})[_0x207ad1(0x33a)]();_0xc66645&&(dbConfig[_0x207ad1(0x216)](_0x207ad1(0x354))[_0x207ad1(0x1cf)]({'botID':botID})[_0x207ad1(0x2db)]({'liquidity':_0x3379cd})['write'](),config[_0x207ad1(0x1c6)]=_0x3379cd);logHistory(_0x207ad1(0x1c0),_0x207ad1(0x32c)+Math[_0x207ad1(0x1ad)](_0x426ee7['number'])+'\x20'+_0x426ee7['coin']+'\x20'+(_0x426ee7['number']>0x0?_0x207ad1(0x1f4):'removed')+_0x207ad1(0x254)),proxyEmit('configuration',emittedConfiguration());const _0x29b28d=getNormalizedPerformance();emitPerformance(_0x29b28d),getStartingBalances(_0x29b28d),logger[_0x207ad1(0x247)](_0x207ad1(0x26c));}else config[_0x207ad1(0x29b)]==_0x207ad1(0x1f1)&&(config[_0x207ad1(0x246)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x207ad1(0x32c)+Math[_0x207ad1(0x1ad)](_0x426ee7[_0x207ad1(0x2da)])+'\x20'+_0x426ee7['coin']+'\x20'+(_0x426ee7[_0x207ad1(0x2da)]>0x0?'added':'removed')+_0x207ad1(0x34e))):logger[_0x207ad1(0x247)](_0x207ad1(0x32c)+Math[_0x207ad1(0x1ad)](_0x426ee7[_0x207ad1(0x2da)])+'\x20'+_0x426ee7['coin']+'\x20'+(_0x426ee7[_0x207ad1(0x2da)]>0x0?_0x207ad1(0x1f4):'removed')+_0x207ad1(0x2b9)));}else logger[_0x207ad1(0x247)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x207ad1(0x1ad)](_0x426ee7[_0x207ad1(0x2da)])+'\x20'+_0x426ee7['coin']+'\x20'+(_0x426ee7[_0x207ad1(0x2da)]>0x0?'added':_0x207ad1(0x241)));}else logger[_0x207ad1(0x247)](_0x207ad1(0x32c)+Math[_0x207ad1(0x1ad)](_0x426ee7['number'])+'\x20'+_0x426ee7['coin']+'\x20'+(_0x426ee7[_0x207ad1(0x2da)]>0x0?_0x207ad1(0x1f4):_0x207ad1(0x241))+_0x207ad1(0x256));}currentCoins=_0x785fc8,currentCoinsAll=_0x5e39fe;}}catch(_0x5a1251){if(!exchangeStopped)await handleError(_0x5a1251,_0x207ad1(0x287));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x129c3f=_0x38ddca;try{markets=await exchange[_0x129c3f(0x345)](),allSymbols=[],Object[_0x129c3f(0x281)](markets)['forEach'](_0xb99a05=>{const _0x4b3532=_0x129c3f;_0xb99a05[0x1][_0x4b3532(0x1ff)]&&_0xb99a05[0x1][_0x4b3532(0x353)]&&allSymbols[_0x4b3532(0x28e)](_0xb99a05[0x0]);}),logger[_0x129c3f(0x247)]('Market\x20and\x20symbol\x20data\x20updated');}catch(_0x132356){markets?logger['debug'](_0x129c3f(0x240)+_0x132356[_0x129c3f(0x27b)]()):(loading[_0x129c3f(0x1a9)]=!![],emitLoadingProgress(),_0x132356[_0x129c3f(0x27b)]()[_0x129c3f(0x1cb)]()[_0x129c3f(0x2ca)]('timestamp')||_0x132356[_0x129c3f(0x27b)]()[_0x129c3f(0x1cb)]()[_0x129c3f(0x2ca)](_0x129c3f(0x279))?logHistory(_0x129c3f(0x338),_0x129c3f(0x260)):handleErrorNoStop(_0x132356,'loadSymbols()'),logHistory(_0x129c3f(0x338),_0x129c3f(0x299)),logHistory(_0x129c3f(0x338),_0x129c3f(0x331)+loadCoinsRetryInterval/0xea60+_0x129c3f(0x34c)),logger[_0x129c3f(0x247)](_0x129c3f(0x238),_0x132356),botPaused=!![],await sleep(loadCoinsRetryInterval),restartBot());}}function validateSymbols(_0x3e9829){const _0x195f22=_0x38ddca;let _0x12b1cb=[];return _0x3e9829[_0x195f22(0x337)](_0x87fa5e=>{const _0x2a07ae=_0x195f22;!allSymbols[_0x2a07ae(0x2ca)](_0x87fa5e)?logHistory(_0x2a07ae(0x338),_0x2a07ae(0x2d5)+_0x87fa5e+_0x2a07ae(0x286)):_0x12b1cb[_0x2a07ae(0x28e)](_0x87fa5e);}),_0x12b1cb;}async function initclient(){const _0x27ea34=_0x38ddca;proxyEmit(_0x27ea34(0x1f0),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x17fcb1=getNormalizedPerformance();emitPerformance(_0x17fcb1),getStartingBalances(_0x17fcb1);}async function toggleBotMode(){const _0x1bccc0=_0x38ddca;let _0x46b7e9=dbConfig[_0x1bccc0(0x216)]('bot')[_0x1bccc0(0x1cf)]({'botID':botID})[_0x1bccc0(0x33a)]();if(_0x46b7e9){const _0x325a8a=!_0x46b7e9['headless'];dbConfig['get'](_0x1bccc0(0x354))[_0x1bccc0(0x1cf)]({'botID':botID})[_0x1bccc0(0x2db)]({'headless':_0x325a8a})[_0x1bccc0(0x2de)](),config[_0x1bccc0(0x246)]=_0x325a8a,proxyEmit(_0x1bccc0(0x1f0),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x9532e4=_0x38ddca;process['send']({'updatebotmanager':!![]},_0x5685f1=>{}),logger[_0x9532e4(0x247)]('Headless:\x20'+config[_0x9532e4(0x246)]);}async function loadCoins(_0x317eae){const _0x1fad4b=_0x38ddca;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x12ce83,_0x35b1d9=0x0,_0x4be03e=0x0;_0x317eae[_0x1fad4b(0x337)](_0x3f8f04=>{const _0x582f3b=_0x1fad4b;loading[_0x582f3b(0x2b4)][_0x582f3b(0x28e)](_0x3f8f04);}),loadingCanceled=![];let _0x4cebf3=![];while(_0x12ce83!=_0x317eae[_0x1fad4b(0x1f9)]+maxLoadingProgress){_0x12ce83=loadingProgress,_0x317eae[_0x1fad4b(0x337)](_0x23438d=>{const _0x4abaa4=_0x1fad4b;if(gTicker[noslash(_0x23438d)]){loading[_0x4abaa4(0x2b4)]=loading[_0x4abaa4(0x2b4)][_0x4abaa4(0x20d)](_0x2d6538=>_0x2d6538!=_0x23438d);if(!watchedSymbols[_0x4abaa4(0x2ca)](_0x23438d))watchedSymbols['push'](_0x23438d);_0x12ce83++;}}),loading[_0x1fad4b(0x1f8)]=Math[_0x1fad4b(0x2f8)](_0x12ce83/(_0x317eae[_0x1fad4b(0x1f9)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x4be03e>0x1e*0x5&&(loading[_0x1fad4b(0x1b9)]=!![],emitLoadingProgress()),_0x4be03e>0x78*0x5&&!_0x4cebf3&&(_0x4cebf3=!![],logHistory(_0x1fad4b(0x338),_0x1fad4b(0x24b)+loading[_0x1fad4b(0x2b4)]['join'](',\x20')+_0x1fad4b(0x1ba)),logHistory('error',_0x1fad4b(0x331)+loadCoinsRetryInterval/0xea60+_0x1fad4b(0x34c)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x1fad4b(0x1a9)]=!![],emitLoadingProgress();break;}else _0x35b1d9!=loading[_0x1fad4b(0x1f8)]&&(_0x35b1d9=loading[_0x1fad4b(0x1f8)],emitLoadingProgress()),_0x4be03e++,await sleep(0xc8);}_0x12ce83==_0x317eae[_0x1fad4b(0x1f9)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x1fad4b(0x24f),'live':'running'},_0xe0e52f=>{}),_0x4cebf3&&logHistory('success',_0x1fad4b(0x1ac)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3dadf7=_0x38ddca;proxyEmit(_0x3dadf7(0x1f0),{...emittedConfiguration(),'configstate':_0x3dadf7(0x243)});}function emitLoadingProgress(){const _0x538bfe=_0x38ddca;proxyEmit(_0x538bfe(0x308),loading);}async function getFiat(){const _0x2587ce=_0x38ddca;let _0x17fd6a=gTicker[stablecoins['eur'][_0x2587ce(0x1e2)]],_0x54d198=gTicker[stablecoins[_0x2587ce(0x20f)][_0x2587ce(0x1e2)]];return{'eur':Number(_0x17fd6a),'usd':Number(_0x54d198)};}function capitalize(_0x47c608){const _0x3f9536=_0x38ddca;return _0x47c608[_0x3f9536(0x208)](0x0,0x1)[_0x3f9536(0x356)]()+_0x47c608[_0x3f9536(0x208)](0x1);}function supportedExchanges(){const _0x4b49a8=_0x38ddca,_0x2e6982=['ws','fetchTickers','fetchTicker',_0x4b49a8(0x204),_0x4b49a8(0x222),_0x4b49a8(0x21a),_0x4b49a8(0x207),_0x4b49a8(0x1d7),_0x4b49a8(0x2c2)];let _0x4e0e97=[],_0x41d4c2=[],_0x83720=ccxt[_0x4b49a8(0x276)][_0x4b49a8(0x2cc)];_0x83720[_0x4b49a8(0x337)](_0x524c87=>{const _0x4244e3=_0x4b49a8;try{const _0x5c1e2c=new ccxt[(_0x4244e3(0x276))][_0x524c87]();_0x41d4c2['push'](_0x5c1e2c);}catch(_0x9ccd80){}}),_0x41d4c2[_0x4b49a8(0x337)](_0x228df9=>{const _0x31f8bd=_0x4b49a8;let _0x32fc4e=0x0;_0x2e6982[_0x31f8bd(0x337)](_0x4000a8=>{const _0x291642=_0x31f8bd;_0x4000a8 in _0x228df9[_0x291642(0x278)]&&_0x228df9[_0x291642(0x278)][_0x4000a8]&&_0x32fc4e++;}),_0x32fc4e==_0x2e6982[_0x31f8bd(0x1f9)]&&_0x4e0e97[_0x31f8bd(0x28e)](capitalize(_0x228df9['id']));});let _0x35b3da=[];return _0x83720[_0x4b49a8(0x337)](_0xe70dcf=>{const _0x43cdd1=_0x4b49a8;_0xe70dcf=capitalize(_0xe70dcf);if(!_0x4e0e97['includes'](_0xe70dcf))_0x35b3da[_0x43cdd1(0x28e)](_0xe70dcf);}),_0x4e0e97;}function setStartDatePerformance(){const _0x3ceec9=_0x38ddca;if(config&&config['liquidity'][0x0][_0x3ceec9(0x347)][_0x3ceec9(0x1f9)]!=0x0){const _0x5534d3=config[_0x3ceec9(0x1c6)][0x0][_0x3ceec9(0x347)];dbPerformance[_0x3ceec9(0x216)](_0x3ceec9(0x31d))[_0x3ceec9(0x1cf)]({'date':config['startdate']})[_0x3ceec9(0x2db)]({'coins':_0x5534d3})['write']();}}async function recreateCoinResults(){const _0x2ed648=_0x38ddca;recreationNeeded=![];let _0x4f2d51,_0x22b7db=[];try{for(const _0x39cc09 of currentCoins){if(_0x39cc09['coin']!=config[_0x2ed648(0x33b)]){let _0x1a6667=0x0,_0x4df38f,_0x317555;_0x4f2d51=await getAllEventOrders(_0x39cc09[_0x2ed648(0x1bd)]);if(_0x4f2d51['length']>0x0)_0x4f2d51[_0x2ed648(0x337)](_0x1a917d=>{const _0xd5c002=_0x2ed648,_0x422c5c=_0x39cc09['symbol'][_0xd5c002(0x2ca)](config[_0xd5c002(0x33b)]+'/');_0x22b7db[_0xd5c002(0x28e)]({'datetime':_0x1a917d[_0xd5c002(0x1ab)],'coin':_0x39cc09[_0xd5c002(0x1e2)],'symbol':_0x39cc09[_0xd5c002(0x1bd)],'side':_0x1a917d[_0xd5c002(0x334)],'reverse':_0x422c5c,'amount':formatResult(_0x1a917d[_0xd5c002(0x295)],0x8),'filled':formatResult(_0x1a917d[_0xd5c002(0x295)],0x8),'price':formatResult(_0x1a917d[_0xd5c002(0x2a5)],0x8)}),_0x1a6667=_0x1a917d[_0xd5c002(0x334)]=='buy'?_0x1a6667+_0x1a917d[_0xd5c002(0x295)]:_0x1a6667-_0x1a917d['filled'];if(!_0x317555)_0x317555=_0x1a917d[_0xd5c002(0x2a5)];});_0x4df38f=_0x39cc09[_0x2ed648(0x2da)]-_0x1a6667;let _0x4c93aa;config['liquidity'][_0x2ed648(0x337)](_0x390118=>{const _0x2ca337=_0x2ed648;!_0x4c93aa&&(_0x4c93aa=_0x390118[_0x2ca337(0x347)][_0x2ca337(0x1cf)](_0x1e4066=>_0x1e4066[_0x2ca337(0x1e2)]==_0x39cc09['coin']),_0x4c93aa&&(_0x4df38f=_0x4c93aa[_0x2ca337(0x2da)],_0x317555=_0x4c93aa[_0x2ca337(0x2a5)]));});let _0x2ac1fe=dbCoinResults[_0x2ed648(0x216)](_0x2ed648(0x32d))['find']({'coin':_0x39cc09[_0x2ed648(0x1e2)]})[_0x2ed648(0x33a)]();_0x2ac1fe={'coin':_0x39cc09[_0x2ed648(0x1e2)],'number':_0x4df38f,'breakeven':_0x317555,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2ed648(0x216)](_0x2ed648(0x32d))[_0x2ed648(0x1cf)]({'coin':_0x39cc09[_0x2ed648(0x1e2)]})[_0x2ed648(0x2db)](_0x2ac1fe)[_0x2ed648(0x2de)]();}}_0x22b7db['sort']((_0x6a78a1,_0x5e3a46)=>_0x6a78a1[_0x2ed648(0x1ab)]>_0x5e3a46['datetime']?0x1:_0x5e3a46[_0x2ed648(0x1ab)]>_0x6a78a1[_0x2ed648(0x1ab)]?-0x1:0x0);let _0xeb9ed5=0x0;for(let _0x3bb9da of _0x22b7db){await updateCoinResults(_0x3bb9da,!![]);}}catch(_0xd321ea){await handleError(_0xd321ea,'recreateCoinResults()');}}async function getAllEventOrders(_0x5d34fe){const _0x323d5d=_0x38ddca;let _0x42efa1=[],_0x187d8a=dbLogs[_0x323d5d(0x216)]('logs')[_0x323d5d(0x20d)](_0x1a4415=>{const _0x3c49a9=_0x323d5d,_0x556893=_0x1a4415[_0x3c49a9(0x1fa)][_0x3c49a9(0x1cb)]();return _0x556893['includes'](_0x5d34fe[_0x3c49a9(0x1cb)]())&&(_0x556893['includes'](_0x3c49a9(0x35e))&&_0x556893['includes']('order')||_0x556893['includes']('filled')&&_0x556893[_0x3c49a9(0x2ca)](_0x3c49a9(0x2c1)));})[_0x323d5d(0x355)](_0x323d5d(0x33c))[_0x323d5d(0x33a)]();return _0x187d8a[_0x323d5d(0x337)](_0x7f8ef9=>{const _0x200828=_0x323d5d,_0x1b983b=_0x7f8ef9[_0x200828(0x1fa)][_0x200828(0x2ca)](_0x200828(0x23e))?_0x200828(0x23e):_0x200828(0x1ee),_0x5b74a2=/#([0-9]|\.)+\s/i,_0x3ddf2c=Number(_0x5b74a2[_0x200828(0x2a3)](_0x7f8ef9[_0x200828(0x1fa)])[0x0]['slice'](0x1)),_0x4fa64a=/@([0-9]|\.)+$/i,_0x10c37b=Number(_0x4fa64a[_0x200828(0x2a3)](_0x7f8ef9['event'])[0x0][_0x200828(0x2fe)](0x1));_0x42efa1[_0x200828(0x28e)]({'datetime':_0x7f8ef9['time'],'coin':symbolToCoin(_0x5d34fe),'symbol':_0x5d34fe,'side':_0x1b983b,'amount':_0x3ddf2c,'filled':_0x3ddf2c,'price':_0x10c37b});}),_0x42efa1;}async function validate24hChanges(){const _0x2a7324=_0x38ddca;for(const _0x98ddff of currentCoins){if(_0x98ddff[_0x2a7324(0x1e2)]!=config[_0x2a7324(0x33b)]){let _0x497dc8;_0x98ddff['reverse']?_0x497dc8=formatResult((0x1/(gChange[_0x98ddff[_0x2a7324(0x1bd)]]/0x64+0x1)-0x1)*0x64,0x3):_0x497dc8=gChange[_0x98ddff[_0x2a7324(0x1bd)]],_0x497dc8<config[_0x2a7324(0x2af)]&&(logHistory(_0x2a7324(0x338),_0x98ddff[_0x2a7324(0x1e2)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x497dc8+'%'),logHistory('error',_0x2a7324(0x2f4)),logHistory(_0x2a7324(0x338),_0x2a7324(0x23c)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x416f6d,_0x550da7){const _0x25f94b=_0x38ddca;if(!_0x416f6d)return!![];const _0x378c66=_0x550da7[_0x25f94b(0x319)]('.'),_0x20bb5e=_0x416f6d[_0x25f94b(0x319)]('.');for(var _0x18cae2=0x0;_0x18cae2<_0x20bb5e['length'];_0x18cae2++){const _0x4bdc38=~~_0x20bb5e[_0x18cae2],_0x286b95=~~_0x378c66[_0x18cae2];if(_0x4bdc38<_0x286b95)return!![];if(_0x4bdc38>_0x286b95)return![];}return![];}async function oneTimeMigration(){const _0x3fbf82=_0x38ddca;let _0x3de4ed=dbLogs['get']('version')[_0x3fbf82(0x33a)]();if(isOlderVersion(_0x3de4ed,_0x3fbf82(0x28b))){let _0x45db1b=[];const _0x469ab2=dbLogs['get'](_0x3fbf82(0x294))['value']();_0x469ab2[_0x3fbf82(0x337)](_0x353492=>{const _0x5226c3=_0x3fbf82;_0x45db1b[_0x5226c3(0x28e)]({'time':_0x353492['time'],'type':_0x353492[_0x5226c3(0x364)],'event':_0x353492['event']});}),dbLogs['get'](_0x3fbf82(0x294))[_0x3fbf82(0x2db)](_0x45db1b)[_0x3fbf82(0x2de)]();}let _0x5db582=dbConfig[_0x3fbf82(0x216)]('version')[_0x3fbf82(0x33a)]();if(isOlderVersion(_0x5db582,_0x3fbf82(0x28b))){let _0x23e3e2=dbConfig['get'](_0x3fbf82(0x354))[_0x3fbf82(0x1cf)]({'botID':botID})[_0x3fbf82(0x33a)]();if(_0x23e3e2){let _0x28c0cf=[];_0x23e3e2[_0x3fbf82(0x2b5)][_0x3fbf82(0x337)](_0x16ef3b=>{const _0x31f841=_0x3fbf82;_0x28c0cf[_0x31f841(0x28e)]({'coin':_0x16ef3b[_0x31f841(0x1e2)],'number':_0x16ef3b[_0x31f841(0x32f)],'price':_0x16ef3b[_0x31f841(0x20e)]}),delete _0x16ef3b[_0x31f841(0x32f)],delete _0x16ef3b['startprice'];});if(_0x28c0cf[_0x3fbf82(0x1f9)]!==0x0)fs[_0x3fbf82(0x2ec)](configbackuppath+(_0x3fbf82(0x206)+botID+_0x3fbf82(0x322)),JSON[_0x3fbf82(0x284)](_0x28c0cf,null,0x4),function(_0x20c437){if(_0x20c437){}});const _0x29973e=(_0x10f637,_0x5a84cf)=>{const _0x41a8a0=_0x3fbf82;let _0x5c4e0f=[];_0x5a84cf[_0x41a8a0(0x337)](_0x54ba60=>{const _0x32a1fe=_0x41a8a0,_0x38aca3=_0x10f637['find'](_0x272604=>_0x272604[_0x32a1fe(0x1e2)]==_0x54ba60['coin']);if(!_0x38aca3)_0x5c4e0f[_0x32a1fe(0x28e)](_0x54ba60);});let _0x584e4a=[];return _0x10f637[_0x41a8a0(0x337)](_0x1cb7da=>{const _0x4a16db=_0x41a8a0,_0x2adbd6=_0x5a84cf[_0x4a16db(0x1cf)](_0x1c777f=>_0x1c777f[_0x4a16db(0x1e2)]==_0x1cb7da[_0x4a16db(0x1e2)]);if(!_0x2adbd6||_0x2adbd6['number']==0x0&&_0x1cb7da[_0x4a16db(0x2da)]!=0x0)_0x584e4a[_0x4a16db(0x28e)](_0x1cb7da);}),{'missingDay1':_0x5c4e0f,'notInDay2':_0x584e4a};},_0x39f85c=dbPerformance[_0x3fbf82(0x216)](_0x3fbf82(0x31d))[_0x3fbf82(0x360)]()[_0x3fbf82(0x33a)]();if(_0x39f85c[_0x3fbf82(0x1f9)]>0x1){const {missingDay1:_0x97e95f,notInDay2:_0x3c14b2}=_0x29973e(_0x28c0cf,_0x39f85c[0x1][_0x3fbf82(0x32d)]);_0x28c0cf=[..._0x28c0cf,..._0x97e95f],_0x3c14b2['forEach'](_0x1e33e4=>{const _0x131c19=_0x3fbf82;let _0x3bc454=_0x28c0cf[_0x131c19(0x2a9)](_0x356700=>_0x356700[_0x131c19(0x1e2)]==_0x1e33e4[_0x131c19(0x1e2)]);_0x3bc454!=-0x1&&_0x28c0cf[_0x131c19(0x267)](_0x3bc454,0x1);});}_0x28c0cf['sort']((_0x4a7b30,_0x383723)=>_0x4a7b30[_0x3fbf82(0x1e2)]>_0x383723[_0x3fbf82(0x1e2)]?0x1:_0x383723[_0x3fbf82(0x1e2)]>_0x4a7b30[_0x3fbf82(0x1e2)]?-0x1:0x0);let _0x1b2151=[{'date':_0x23e3e2[_0x3fbf82(0x1f7)],'changes':_0x28c0cf}];_0x39f85c['length']>0x2&&_0x39f85c[_0x3fbf82(0x337)]((_0x1b4a51,_0x3ce5f1)=>{const _0x6f68ca=_0x3fbf82;if(_0x3ce5f1>0x0&&_0x3ce5f1<_0x39f85c[_0x6f68ca(0x1f9)]-0x1){const {missingDay1:_0xf3d2eb,notInDay2:_0x475a73}=_0x29973e(_0x39f85c[_0x3ce5f1][_0x6f68ca(0x32d)],_0x39f85c[_0x3ce5f1+0x1][_0x6f68ca(0x32d)]);_0x28c0cf=[],(_0xf3d2eb[_0x6f68ca(0x1f9)]!=0x0||_0x475a73[_0x6f68ca(0x1f9)]!=0x0)&&(_0xf3d2eb[_0x6f68ca(0x1f9)]!=0x0&&_0x28c0cf[_0x6f68ca(0x28e)](..._0xf3d2eb),_0x475a73['length']!=0x0&&(_0x475a73[_0x6f68ca(0x337)](_0x3b8dbc=>{const _0x3e4f94=_0x6f68ca;_0x3b8dbc[_0x3e4f94(0x2da)]=-_0x3b8dbc[_0x3e4f94(0x2da)];}),_0x28c0cf[_0x6f68ca(0x28e)](..._0x475a73)),_0x28c0cf['sort']((_0x1cbb0b,_0x5bdaef)=>_0x1cbb0b[_0x6f68ca(0x1e2)]>_0x5bdaef['coin']?0x1:_0x5bdaef['coin']>_0x1cbb0b[_0x6f68ca(0x1e2)]?-0x1:0x0),_0x1b2151[_0x6f68ca(0x28e)]({'date':_0x39f85c[_0x3ce5f1+0x1]['date'],'changes':_0x28c0cf}));}}),dbConfig[_0x3fbf82(0x216)]('bot')[_0x3fbf82(0x1cf)]({'botID':botID})[_0x3fbf82(0x2db)]({..._0x23e3e2,'liquidity':_0x1b2151})['write']();}}if(isOlderVersion(_0x5db582,_0x3fbf82(0x32b))){let _0x5b660f=dbConfig[_0x3fbf82(0x216)](_0x3fbf82(0x354))['find']({'botID':botID})[_0x3fbf82(0x33a)]();if(_0x5b660f){const _0x37cbcc=_0x5b660f['exchange'],_0x88fa04=_0x37cbcc?capitalize(_0x37cbcc):'Binance';dbConfig[_0x3fbf82(0x216)](_0x3fbf82(0x354))[_0x3fbf82(0x1cf)]({'botID':botID})[_0x3fbf82(0x2db)]({'exchange':_0x88fa04})[_0x3fbf82(0x2de)]();}}if(isOlderVersion(_0x5db582,_0x3fbf82(0x273))){let _0x5fe3bc=dbConfig[_0x3fbf82(0x216)](_0x3fbf82(0x354))[_0x3fbf82(0x1cf)]({'botID':botID})['value']();if(_0x5fe3bc){const _0x366d9c=_0x5fe3bc['marketcapEnabled'],_0x2789cf=_0x366d9c?'marketcap':![];dbConfig[_0x3fbf82(0x216)]('bot')[_0x3fbf82(0x1cf)]({'botID':botID})[_0x3fbf82(0x2db)]({'marketcapEnabled':_0x2789cf})['write']();}}if(isOlderVersion(_0x5db582,_0x3fbf82(0x253))){let _0x130173=dbConfig[_0x3fbf82(0x216)]('bot')[_0x3fbf82(0x1cf)]({'botID':botID})['value']();if(_0x130173){const _0x5d0443=_0x130173[_0x3fbf82(0x29b)],_0x4e876f=_0x5d0443?_0x3fbf82(0x340):![];dbConfig['get'](_0x3fbf82(0x354))[_0x3fbf82(0x1cf)]({'botID':botID})[_0x3fbf82(0x2db)]({'autoliquidity':_0x4e876f})['write']();}}let _0x558f67=dbPerformance['get'](_0x3fbf82(0x296))[_0x3fbf82(0x33a)]();isOlderVersion(_0x558f67,_0x3fbf82(0x28b))&&setStartDatePerformance();let _0x259817=dbCoinResults[_0x3fbf82(0x216)]('version')[_0x3fbf82(0x33a)]();if(isOlderVersion(_0x259817,'2.5.0')){let _0x669a0f=dbCoinResults['get'](_0x3fbf82(0x32d))[_0x3fbf82(0x33a)]();if(_0x669a0f[_0x3fbf82(0x1f9)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5a5da7=_0x38ddca;dbConfig[_0x5a5da7(0x271)](_0x5a5da7(0x296),serverversion)[_0x5a5da7(0x2de)](),dbPerformance[_0x5a5da7(0x271)](_0x5a5da7(0x296),serverversion)[_0x5a5da7(0x2de)](),dbLogs[_0x5a5da7(0x271)](_0x5a5da7(0x296),serverversion)[_0x5a5da7(0x2de)](),dbCoinResults[_0x5a5da7(0x271)]('version',serverversion)[_0x5a5da7(0x2de)]();}function getConfiguration(_0x5594a4){const _0x4e434e=_0x38ddca;let _0x117984=dbConfig['get'](_0x4e434e(0x354))[_0x4e434e(0x1cf)]({'botID':_0x5594a4})[_0x4e434e(0x33a)]();if(_0x117984){let _0xa27e4=![];typeof _0x117984[_0x4e434e(0x22c)]==_0x4e434e(0x1a8)&&(_0x117984={..._0x117984,'threshold':Number(_0x117984[_0x4e434e(0x22c)])},_0xa27e4=!![]),_0x117984[_0x4e434e(0x2af)]==undefined&&(_0x117984={..._0x117984,'change24h':-0x14},_0xa27e4=!![]),_0x117984[_0x4e434e(0x326)]==undefined&&(_0x117984={..._0x117984,'fiat':_0x4e434e(0x1ed)},_0xa27e4=!![]),_0x117984[_0x4e434e(0x2b2)]==undefined&&(_0x117984={..._0x117984,'onepagemode':settings['onepagemode']},_0xa27e4=!![]),_0x117984['colorscheme']==undefined&&(_0x117984={..._0x117984,'colorscheme':'red_yellow_blue'},_0xa27e4=!![]),_0x117984[_0x4e434e(0x29b)]==undefined&&(_0x117984={..._0x117984,'autoliquidity':_0x4e434e(0x340)},_0xa27e4=!![]),_0x117984[_0x4e434e(0x329)]==undefined&&(_0x117984={..._0x117984,'marketcapApi':settings[_0x4e434e(0x329)]?!![]:![]},_0xa27e4=!![]),_0x117984['marketcapEnabled']==undefined&&(_0x117984={..._0x117984,'marketcapEnabled':![]},_0xa27e4=!![]),_0xa27e4&&(_0x117984={'botID':_0x117984[_0x4e434e(0x36f)],'exchange':_0x117984[_0x4e434e(0x1db)],'apiKey':_0x117984[_0x4e434e(0x343)],'apiSecret':_0x117984[_0x4e434e(0x289)],'apiPassword':_0x117984[_0x4e434e(0x33e)],'basecoin':_0x117984[_0x4e434e(0x33b)],'botname':_0x117984[_0x4e434e(0x21f)],'showname':_0x117984[_0x4e434e(0x2b3)],'threshold':_0x117984[_0x4e434e(0x22c)],'ordertype':_0x117984[_0x4e434e(0x2e4)],'timeout':_0x117984[_0x4e434e(0x1b9)],'fiat':_0x117984[_0x4e434e(0x326)],'startdate':_0x117984['startdate'],'recreate':_0x117984[_0x4e434e(0x36d)],'timeshift':_0x117984['timeshift'],'onepagemode':_0x117984[_0x4e434e(0x2b2)],'headless':_0x117984['headless'],'cooldown':_0x117984[_0x4e434e(0x2cb)],'change24h':_0x117984[_0x4e434e(0x2af)],'emojibuy':_0x117984[_0x4e434e(0x26b)],'emojisell':_0x117984[_0x4e434e(0x303)],'colorscheme':_0x117984[_0x4e434e(0x25e)],'marketcapApi':_0x117984['marketcapApi'],'marketcapEnabled':_0x117984[_0x4e434e(0x265)],'portfolio':_0x117984[_0x4e434e(0x2b5)],'autoliquidity':_0x117984['autoliquidity'],'liquidity':_0x117984[_0x4e434e(0x1c6)],'openOrders':_0x117984['openOrders']},dbConfig[_0x4e434e(0x216)](_0x4e434e(0x354))['remove']()[_0x4e434e(0x2de)](),dbConfig[_0x4e434e(0x216)]('bot')[_0x4e434e(0x28e)](_0x117984)[_0x4e434e(0x2de)]());}else _0x117984={'botID':_0x5594a4,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4e434e(0x2df)+_0x5594a4,'showname':![],'threshold':0x3,'ordertype':_0x4e434e(0x35e),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x4e434e(0x305)],'onepagemode':settings[_0x4e434e(0x2b2)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4e434e(0x21c),'marketcapApi':settings[_0x4e434e(0x329)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x4e434e(0x340),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x117984;}function emittedConfiguration(){const _0x5bf341=_0x38ddca;let _0xdd9b18;if(config[_0x5bf341(0x343)]=='')_0xdd9b18={...config,'configstate':_0x5bf341(0x301)};else config[_0x5bf341(0x343)]==_0x5bf341(0x1cd)?_0xdd9b18={...config,'configstate':_0x5bf341(0x29f)}:(_0xdd9b18={...config,'apiKey':_0x5bf341(0x245),'apiSecret':_0x5bf341(0x245)},config['apiPassword']&&(_0xdd9b18[_0x5bf341(0x33e)]=_0x5bf341(0x245)));return _0xdd9b18[_0x5bf341(0x25f)]=enableFiatToggle,_0xdd9b18;}function getSettings(){const _0x4e9e13=_0x38ddca;return dbSettings[_0x4e9e13(0x216)](_0x4e9e13(0x35f))[_0x4e9e13(0x33a)]();}function getSecure(){const _0x2c16d1=_0x38ddca;return dbSecure[_0x2c16d1(0x216)](_0x2c16d1(0x27e))['value']()||{};}function updateTimeshift(_0x370196){const _0x2f5819=_0x38ddca;let _0x669520=dbConfig[_0x2f5819(0x216)]('bot')[_0x2f5819(0x1cf)]({'botID':botID})[_0x2f5819(0x33a)]();_0x669520&&dbConfig[_0x2f5819(0x216)](_0x2f5819(0x354))[_0x2f5819(0x1cf)]({'botID':botID})['assign']({'timeshift':_0x370196})[_0x2f5819(0x2de)](),config[_0x2f5819(0x305)]=_0x370196,proxyEmit(_0x2f5819(0x1f0),emittedConfiguration());}function updateOnepagemode(_0x32e98a){const _0x556817=_0x38ddca;let _0x2b4cba=dbConfig[_0x556817(0x216)](_0x556817(0x354))['find']({'botID':botID})[_0x556817(0x33a)]();_0x2b4cba&&dbConfig[_0x556817(0x216)](_0x556817(0x354))[_0x556817(0x1cf)]({'botID':botID})[_0x556817(0x2db)]({'onepagemode':_0x32e98a})[_0x556817(0x2de)](),config[_0x556817(0x2b2)]=_0x32e98a,proxyEmit(_0x556817(0x1f0),emittedConfiguration());}function updateMarketcapApi(_0x3ac9cc){const _0x1030de=_0x38ddca,_0x38dd6e=_0x3ac9cc?!![]:![];let _0x31d074=dbConfig[_0x1030de(0x216)]('bot')[_0x1030de(0x1cf)]({'botID':botID})[_0x1030de(0x33a)]();_0x31d074&&dbConfig[_0x1030de(0x216)](_0x1030de(0x354))['find']({'botID':botID})[_0x1030de(0x2db)]({'marketcapApi':_0x38dd6e})['write'](),config[_0x1030de(0x329)]=_0x38dd6e,getMarketCap(),proxyEmit(_0x1030de(0x1f0),emittedConfiguration());}async function storeConfiguration(_0x5b13dc){const _0xb70b84=_0x38ddca;logger[_0xb70b84(0x247)](_0xb70b84(0x215));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5d981a=![],_0x57a502=![],_0x22974f=[];_0x5b13dc['portfolio']['forEach'](_0x1f0339=>{const _0x3a94a1=_0xb70b84;if(!_0x1f0339['excluded']&&_0x1f0339['coin']!=_0x5b13dc[_0x3a94a1(0x33b)])_0x22974f[_0x3a94a1(0x28e)](_0x1f0339[_0x3a94a1(0x1bd)]);}),_0x22974f['forEach'](_0x19a2dd=>{const _0x1acabb=_0xb70b84,_0x175b2b=currentCoins[_0x1acabb(0x1cf)](_0xfb59e2=>_0xfb59e2[_0x1acabb(0x1bd)]==_0x19a2dd);!_0x175b2b&&(_0x5d981a=!![]);}),currentCoins[_0xb70b84(0x337)](_0x962cea=>{const _0x176251=_0xb70b84;if(_0x962cea[_0x176251(0x1e2)]!=config[_0x176251(0x33b)]){const _0x5ac06e=_0x22974f['find'](_0x167c75=>_0x167c75==_0x962cea[_0x176251(0x1bd)]);!_0x5ac06e&&(_0x5d981a=!![]);}}),_0x5b13dc['portfolio'][_0xb70b84(0x337)](_0x29b433=>{const _0x5e4c9d=_0xb70b84,_0x23b889=config[_0x5e4c9d(0x2b5)][_0x5e4c9d(0x1cf)](_0x75f355=>_0x75f355[_0x5e4c9d(0x1e2)]==_0x29b433[_0x5e4c9d(0x1e2)]);if(_0x23b889&&_0x29b433[_0x5e4c9d(0x1dc)]!=_0x23b889[_0x5e4c9d(0x1dc)])_0x57a502=!![];});let _0x3f2895=dbConfig[_0xb70b84(0x216)](_0xb70b84(0x354))[_0xb70b84(0x1cf)]({'botID':botID})[_0xb70b84(0x33a)]();_0x5b13dc={..._0x5b13dc,'apiKey':decryptRSA(secure[_0xb70b84(0x27c)],_0x5b13dc[_0xb70b84(0x343)]),'apiSecret':decryptRSA(secure[_0xb70b84(0x27c)],_0x5b13dc['apiSecret'])};_0x5b13dc[_0xb70b84(0x33e)]&&(_0x5b13dc[_0xb70b84(0x33e)]=decryptRSA(secure[_0xb70b84(0x27c)],_0x5b13dc[_0xb70b84(0x33e)]));let _0x4c4d95=![];if(_0x3f2895){_0x5b13dc['apiKey']==_0xb70b84(0x245)?_0x5b13dc['apiKey']=config['apiKey']:_0x4c4d95=!![];_0x5b13dc['apiSecret']==_0xb70b84(0x245)?_0x5b13dc[_0xb70b84(0x289)]=config['apiSecret']:_0x4c4d95=!![];if(_0x5b13dc[_0xb70b84(0x33e)]=='************')_0x5b13dc[_0xb70b84(0x33e)]=config[_0xb70b84(0x33e)];else{if(_0x5b13dc['apiPassword'])_0x4c4d95=!![];}dbConfig[_0xb70b84(0x216)]('bot')[_0xb70b84(0x1cf)]({'botID':botID})[_0xb70b84(0x2db)](_0x5b13dc)[_0xb70b84(0x2de)]();}else dbConfig[_0xb70b84(0x216)](_0xb70b84(0x354))['push'](_0x5b13dc)[_0xb70b84(0x2de)](),_0x4c4d95=!![],process['send']({'status':_0xb70b84(0x24f),'live':_0xb70b84(0x2c9)},_0x250643=>{});process[_0xb70b84(0x2cf)]({'botname':_0x5b13dc[_0xb70b84(0x21f)]},_0xe16a14=>{}),config={..._0x5b13dc},updateBotManager(),proxyEmit(_0xb70b84(0x292)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4c4d95)!_0x3f2895?await reset(!![]):getBalances();else _0x5d981a||_0x57a502?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x30b454){const _0x374875=_0x38ddca,_0x4cd21a={...config,'headless':_0x30b454[_0x374875(0x246)]};let _0x1bcd90=dbConfig[_0x374875(0x216)](_0x374875(0x354))['find']({'botID':botID})['value']();_0x1bcd90&&dbConfig[_0x374875(0x216)]('bot')[_0x374875(0x1cf)]({'botID':botID})[_0x374875(0x2db)](_0x4cd21a)[_0x374875(0x2de)](),config={..._0x4cd21a},updateBotManager(),proxyEmit(_0x374875(0x1f0),emittedConfiguration());}function _0x535e(_0x3a21a8,_0x373c8b){const _0x26b71a=_0x5085();return _0x535e=function(_0xcfe07b,_0x5f4722){_0xcfe07b=_0xcfe07b-0x1a3;let _0x5085e6=_0x26b71a[_0xcfe07b];return _0x5085e6;},_0x535e(_0x3a21a8,_0x373c8b);}async function storeFiat(_0x324189){const _0x403095=_0x38ddca,_0x51cfdd={...config,'fiat':_0x324189};let _0x7ec272=dbConfig['get'](_0x403095(0x354))[_0x403095(0x1cf)]({'botID':botID})[_0x403095(0x33a)]();_0x7ec272&&dbConfig[_0x403095(0x216)](_0x403095(0x354))[_0x403095(0x1cf)]({'botID':botID})[_0x403095(0x2db)](_0x51cfdd)[_0x403095(0x2de)](),config={..._0x51cfdd},proxyEmit(_0x403095(0x1f0),emittedConfiguration());}function resetHistory(){const _0x17bbad=_0x38ddca;logger[_0x17bbad(0x20b)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x17bbad(0x217)](configpath,_0x17bbad(0x1c9)+botID+_0x17bbad(0x2f6))))fs[_0x17bbad(0x2d1)](path[_0x17bbad(0x217)](configpath,_0x17bbad(0x1c9)+botID+_0x17bbad(0x2f6)));if(fs[_0x17bbad(0x2a0)](path[_0x17bbad(0x217)](configpath,_0x17bbad(0x1c9)+botID+'-performance.json')))fs['unlinkSync'](path[_0x17bbad(0x217)](configpath,_0x17bbad(0x1c9)+botID+_0x17bbad(0x327)));if(fs['existsSync'](path[_0x17bbad(0x217)](configpath,_0x17bbad(0x1c9)+botID+_0x17bbad(0x1e4))))fs[_0x17bbad(0x2d1)](path[_0x17bbad(0x217)](configpath,'bot-'+botID+_0x17bbad(0x1e4)));}catch(_0x3a0c88){if(_0x3a0c88)logger[_0x17bbad(0x20b)](_0x17bbad(0x2ff),_0x3a0c88);}const _0x25e2f3=getDate();let _0x332b1f=[];currentCoins[_0x17bbad(0x337)](_0x44c199=>{const _0x43fcc6=_0x17bbad;_0x332b1f[_0x43fcc6(0x28e)]({'coin':_0x44c199[_0x43fcc6(0x1e2)],'number':_0x44c199['number'],'price':_0x44c199[_0x43fcc6(0x324)]});});let _0x456c04=dbConfig[_0x17bbad(0x216)](_0x17bbad(0x354))[_0x17bbad(0x1cf)]({'botID':botID})['value']();_0x456c04&&(dbConfig[_0x17bbad(0x216)](_0x17bbad(0x354))[_0x17bbad(0x1cf)]({'botID':botID})['assign']({'liquidity':[{'date':_0x25e2f3,'changes':_0x332b1f}]})[_0x17bbad(0x2de)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x3dd31b){const _0x526a93=_0x38ddca;return _0x3dd31b[_0x526a93(0x31f)]('/','');}function updateHighestFee(_0x570d22){const _0x27d953=_0x38ddca;if(_0x570d22[_0x27d953(0x313)]){let _0xa0c5de={'filled':_0x570d22[_0x27d953(0x295)]*_0x570d22[_0x27d953(0x2a5)],'amount':_0x570d22['filled']*_0x570d22[_0x27d953(0x2a5)],'side':_0x570d22[_0x27d953(0x334)]=='sell'?'buy':'sell','price':0x1/_0x570d22[_0x27d953(0x2a5)]};_0x570d22={..._0x570d22,..._0xa0c5de};}const _0x5c5b3f=defaultFee*_0x570d22[_0x27d953(0x295)]*_0x570d22[_0x27d953(0x2a5)];lastFees[_0x27d953(0x24c)]['length']===0x14&&lastFees[_0x27d953(0x24c)]['shift'](),lastFees[_0x27d953(0x24c)]['push'](_0x5c5b3f),lastFees[_0x27d953(0x293)]=Math[_0x27d953(0x1b8)](...lastFees[_0x27d953(0x24c)]);}async function updateNumberCoinsCcxt(_0x36800c){const _0x488dd8=_0x38ddca;logger[_0x488dd8(0x247)](_0x488dd8(0x29c)+_0x36800c[_0x488dd8(0x1bd)]+'\x20|\x20'+_0x36800c['status']+_0x488dd8(0x2b0)+_0x36800c[_0x488dd8(0x295)]+'\x20/\x20'+_0x36800c['amount']+_0x488dd8(0x2b0)+_0x36800c['id']);let _0x70ffa=_0x36800c[_0x488dd8(0x2ac)],_0x775cea=![];currentCoins[_0x488dd8(0x337)](_0x171cd4=>{const _0x613532=_0x488dd8;_0x171cd4['symbol']==_0x36800c[_0x613532(0x1bd)]&&(_0x775cea=!![]);});if(!_0x775cea)return;const _0x28a8f6=currentCoins[_0x488dd8(0x1cf)](_0x13fa12=>_0x13fa12['symbol']==_0x36800c[_0x488dd8(0x1bd)]),_0x4ed501=_0x28a8f6[_0x488dd8(0x1e2)],_0xc5dd2c=_0xbb43e8=>{const _0x20b923=_0x488dd8,_0x314e82=currentCoins[_0x20b923(0x1cf)](_0x1c19f8=>_0x1c19f8['symbol']==_0x36800c['symbol']);if(_0x314e82)_0x314e82[_0x20b923(0x248)]=_0xbb43e8;};let _0x3dd272=![];for(const _0x1184aa of lastOrders){const _0x47891a=0x64,_0xd22dd9=0x1388;let _0x59bb5f=0x0;while(!_0x1184aa[_0x488dd8(0x30c)]&&_0x59bb5f*_0x47891a<_0xd22dd9){_0x59bb5f++,await sleep(_0x47891a);}if(_0x59bb5f>0x0)logger[_0x488dd8(0x247)](_0x488dd8(0x250)+_0x59bb5f*_0x47891a/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x1184aa[_0x488dd8(0x30c)]==_0x36800c['id']&&(_0x3dd272=!![]);}if(_0x70ffa==_0x488dd8(0x2ab)){_0xc5dd2c(_0x488dd8(0x2ab));if(_0x36800c[_0x488dd8(0x295)]>0x0&&_0x36800c[_0x488dd8(0x295)]<_0x36800c[_0x488dd8(0x2be)]){if(_0x3dd272){setBlockTransactionDetection(!![]),logger[_0x488dd8(0x247)](_0x488dd8(0x2ed)+_0x36800c[_0x488dd8(0x295)]+_0x488dd8(0x2f9)+_0x36800c['id']);const _0x2b2ebd=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4ed501);[currentCoins,currentCoinsAll]=_0x2b2ebd,setBlockTransactionDetection(![]);}else logger[_0x488dd8(0x247)](_0x488dd8(0x2ed)+_0x36800c[_0x488dd8(0x295)]+_0x488dd8(0x2a1)+_0x36800c['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x70ffa=='canceled'){_0xc5dd2c(_0x488dd8(0x328));const _0x15aa8c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x15aa8c,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x70ffa==_0x488dd8(0x24e)){if(lastOrders)for(const _0x4ca746 of lastOrders){if(_0x4ca746['orderId']==_0x36800c['id']){logger['debug'](_0x488dd8(0x202)+_0x36800c['id']),_0x3dd272=!![];if(_0x4ca746[_0x488dd8(0x295)]==0x0){setBlockTransactionDetection(!![]),logger[_0x488dd8(0x247)](_0x488dd8(0x2b8)+_0x36800c['id']);if(_0x36800c[_0x488dd8(0x27a)])_0x4ca746[_0x488dd8(0x2a5)]=_0x36800c[_0x488dd8(0x27a)];else{if(_0x36800c[_0x488dd8(0x2a5)])_0x4ca746['price']=_0x36800c[_0x488dd8(0x2a5)];else{}}_0x4ca746[_0x488dd8(0x295)]=_0x36800c['filled'],updateHighestFee(_0x4ca746);const _0x435a89=await getCoins(balanceUpdateDelay,undefined,undefined,_0x4ed501);[currentCoins,currentCoinsAll]=_0x435a89,setBlockTransactionDetection(![]),await validateOrders(),_0xc5dd2c('filled'),_0x4ca746[_0x488dd8(0x2c3)]={'currency':_0x36800c['fee']?_0x36800c['fee']['currency']:null,'cost':_0x36800c[_0x488dd8(0x2c3)]?_0x36800c[_0x488dd8(0x2c3)][_0x488dd8(0x1ef)]:0x0},await updateCoinResults(_0x4ca746);}}}!_0x3dd272&&(logger['debug'](_0x488dd8(0x1d8)+_0x36800c['id']),_0xc5dd2c(_0x488dd8(0x295)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x13241b=JSON[_0x488dd8(0x2d4)](lastBalances[_0x488dd8(0x2b5)]);const _0x3e5188=_0x13241b[_0x488dd8(0x1cf)](_0x2f7df7=>_0x2f7df7[_0x488dd8(0x1bd)]==_0x36800c[_0x488dd8(0x1bd)]);if(_0x3e5188){if(_0x70ffa==_0x488dd8(0x2ab))_0x3e5188[_0x488dd8(0x248)]=_0x3e5188[_0x488dd8(0x248)]=='filled'?'filled':'open';else{if(_0x70ffa=='canceled')_0x3e5188[_0x488dd8(0x248)]=_0x3e5188['orderstatus']==_0x488dd8(0x295)?_0x488dd8(0x295):_0x488dd8(0x328);else _0x70ffa==_0x488dd8(0x24e)&&(_0x3e5188[_0x488dd8(0x248)]=_0x488dd8(0x295));}}lastBalances={...lastBalances,'portfolio':JSON[_0x488dd8(0x284)](_0x13241b)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x36607c=![];currentCoins['forEach'](_0x15664a=>{const _0x29e67a=_0x535e;_0x36607c=allOpenOrders[_0x29e67a(0x1cf)](_0x4f43be=>_0x4f43be[_0x29e67a(0x1bd)]==_0x15664a[_0x29e67a(0x1bd)]),_0x15664a[_0x29e67a(0x248)]=_0x36607c?_0x29e67a(0x2ab):'none';});}async function fetchBalance(_0x341176=!![]){const _0x10eba9=_0x38ddca;let _0x51a936,_0xb7da87;try{return _0x51a936=await exchange['fetchBalance'](),_0xb7da87=_0x51a936[_0x10eba9(0x20a)],_0xb7da87;}catch(_0x3017e7){return!_0x341176?handleErrorNoStop(_0x3017e7,_0x10eba9(0x31a)):await handleError(_0x3017e7,_0x10eba9(0x31a)),![];}}async function getCoins(_0x333d3a=0x0,_0x44aa6d=!![],_0x560651=config['basecoin'],_0x76ec11){const _0x46b767=_0x38ddca;let _0x58abf8=[],_0x27cc28=[],_0x4e24c3=[],_0x45f0f1;if(_0x333d3a)await sleep(_0x333d3a);if(botPaused)return[currentCoins,currentCoinsAll];let _0x1525b2=![],_0x44a4d2=0x0,_0x5ea56b,_0x2b7ffc;_0x76ec11&&(_0x5ea56b=currentCoins[_0x46b767(0x1cf)](_0x62642f=>_0x62642f[_0x46b767(0x1e2)]==_0x76ec11),_0x2b7ffc=_0x5ea56b[_0x46b767(0x2da)]);while(!_0x1525b2){_0x45f0f1=await fetchBalance(_0x44aa6d);if(_0x45f0f1){if(_0x76ec11){if(_0x45f0f1[_0x76ec11]!=_0x2b7ffc)logger[_0x46b767(0x247)](_0x46b767(0x20c)+_0x76ec11+':\x20'+_0x45f0f1[_0x76ec11]+'\x20('+_0x2b7ffc+')'),_0x1525b2=!![];else{logger[_0x46b767(0x247)]('Invalid\x20balance\x20for\x20'+_0x76ec11+':\x20'+_0x45f0f1[_0x76ec11]+'\x20('+_0x2b7ffc+')'),_0x44a4d2++;if(_0x44a4d2<balanceUpdateRetries)await sleep(balanceUpdateDelay);else{logger[_0x46b767(0x247)]('Stopped\x20fetching\x20balance\x20after\x20'+_0x44a4d2+_0x46b767(0x2e7));break;}}}else break;}else return[currentCoins,currentCoinsAll];}for(const [_0x565660,_0x12c127]of Object[_0x46b767(0x281)](_0x45f0f1)){_0x4e24c3[_0x46b767(0x28e)](_0x565660);}config[_0x46b767(0x2b5)][_0x46b767(0x337)](_0x598100=>{const _0x1fe377=_0x46b767;!_0x4e24c3[_0x1fe377(0x2ca)](_0x598100['coin'])&&(_0x45f0f1[_0x598100[_0x1fe377(0x1e2)]]=0x0);});if(_0x560651=='')for(const [_0x1a1ee7,_0x437a2e]of Object[_0x46b767(0x281)](_0x45f0f1)){_0x437a2e!=0x0&&_0x58abf8[_0x46b767(0x28e)]({'coin':_0x1a1ee7});}else for(const [_0x1cfa01,_0x5c159f]of Object[_0x46b767(0x281)](_0x45f0f1)){const _0x2c8b5f=config[_0x46b767(0x2b5)][_0x46b767(0x1cf)](_0x4ad89a=>_0x4ad89a['coin']==_0x1cfa01),_0x191ea1=_0x1cfa01+'/'+_0x560651,_0x2145b1=_0x560651+'/'+_0x1cfa01,_0x36222b=currentCoins[_0x46b767(0x1cf)](_0x383d13=>_0x383d13[_0x46b767(0x1e2)]==_0x1cfa01);if((_0x5c159f!=0x0||_0x2c8b5f)&&(allSymbols[_0x46b767(0x2ca)](_0x191ea1)||_0x1cfa01==_0x560651))_0x36222b?_0x58abf8[_0x46b767(0x28e)]({..._0x36222b,'number':Math[_0x46b767(0x1b8)](_0x5c159f+(_0x2c8b5f&&_0x2c8b5f['offset']||0x0),0x0)}):_0x58abf8[_0x46b767(0x28e)]({'coin':_0x1cfa01,'symbol':_0x191ea1,'reverse':![],'number':Math[_0x46b767(0x1b8)](_0x5c159f+(_0x2c8b5f&&_0x2c8b5f[_0x46b767(0x1dc)]||0x0),0x0),'orderstatus':_0x46b767(0x285)});else{if((_0x5c159f!=0x0||_0x2c8b5f)&&allSymbols[_0x46b767(0x2ca)](_0x2145b1))_0x36222b?_0x58abf8[_0x46b767(0x28e)]({..._0x36222b,'number':Math[_0x46b767(0x1b8)](_0x5c159f+(_0x2c8b5f&&_0x2c8b5f[_0x46b767(0x1dc)]||0x0),0x0)}):_0x58abf8['push']({'coin':_0x1cfa01,'symbol':_0x2145b1,'reverse':!![],'number':Math['max'](_0x5c159f+(_0x2c8b5f&&_0x2c8b5f[_0x46b767(0x1dc)]||0x0),0x0),'orderstatus':_0x46b767(0x285)});else _0x2c8b5f&&_0x58abf8[_0x46b767(0x28e)]({'coin':_0x2c8b5f['coin'],'symbol':_0x2c8b5f[_0x46b767(0x1bd)],'reverse':_0x2c8b5f[_0x46b767(0x313)],'number':0x0,'orderstatus':_0x46b767(0x285)});}}return _0x58abf8[_0x46b767(0x29e)]((_0x60dc99,_0x23e535)=>_0x60dc99[_0x46b767(0x2bd)]<_0x23e535[_0x46b767(0x2bd)]?0x1:_0x23e535[_0x46b767(0x2bd)]<_0x60dc99[_0x46b767(0x2bd)]?-0x1:0x0),_0x27cc28=cloneDeep(_0x58abf8),_0x58abf8=_0x58abf8['filter'](_0xed8d89=>{const _0x32b46c=_0x46b767,_0x4a83a0=config[_0x32b46c(0x2b5)][_0x32b46c(0x1cf)](_0x2a2453=>_0x2a2453[_0x32b46c(0x1e2)]==_0xed8d89[_0x32b46c(0x1e2)]);return _0x4a83a0&&!_0x4a83a0[_0x32b46c(0x1d5)];}),[_0x58abf8,_0x27cc28];}async function getCoinNumber(_0x181caa){const _0x37f97b=_0x38ddca;let _0x53efcb;try{const _0x1d1d17=await exchange[_0x37f97b(0x2c2)]();_0x53efcb=_0x1d1d17['total'][_0x181caa];}catch(_0xbbec5c){await handleError(_0xbbec5c,_0x37f97b(0x1e6));}return _0x53efcb;}async function getOpenOrders(){const _0x4c827c=_0x38ddca;let _0x5e0fea;allOpenOrders=[];try{for(const _0x1fc9e2 of config['portfolio']){!_0x1fc9e2[_0x4c827c(0x1d5)]&&_0x1fc9e2[_0x4c827c(0x1e2)]!=config[_0x4c827c(0x33b)]&&(_0x5e0fea=await exchange[_0x4c827c(0x1d7)](_0x1fc9e2[_0x4c827c(0x1bd)]),_0x5e0fea['length']>0x0&&allOpenOrders[_0x4c827c(0x28e)](_0x5e0fea[0x0]));}}catch(_0x4cd151){await handleError(_0x4cd151,_0x4c827c(0x339));}}async function handleOpenOrders(_0x1fa011=0x0){const _0x4c4fda=_0x38ddca;allOpenOrders[_0x4c4fda(0x1f9)]==0x0&&lockOrders==ORDERS[_0x4c4fda(0x2ae)]&&allOrdersPlaced&&(_0x1fa011==0x0?(logger['debug'](_0x4c4fda(0x263)),_0x1fa011++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4c4fda(0x247)](_0x4c4fda(0x36a)),validateOrders(_0x4c4fda(0x1a3))));}async function testAPI(_0x8920a7){const _0x14ec30=_0x38ddca,_0x2958ba=ccxt[_0x14ec30(0x276)][_0x8920a7[_0x14ec30(0x1db)][_0x14ec30(0x1cb)]()],_0x34c86a=new _0x2958ba({'apiKey':_0x8920a7['apiKey'],'secret':_0x8920a7[_0x14ec30(0x289)],'options':{'defaultType':'spot'}});if(_0x8920a7['apiPassword'])_0x34c86a[_0x14ec30(0x359)]=_0x8920a7[_0x14ec30(0x33e)];try{await _0x34c86a['fetchBalance']();}catch(_0x59f2c5){logger[_0x14ec30(0x247)](_0x14ec30(0x302)+_0x59f2c5['toString']());throw _0x59f2c5;}}function cloneDeep(_0x3aa846){const _0x3ac516=_0x38ddca;return JSON['parse'](JSON[_0x3ac516(0x284)](_0x3aa846));}async function getPortfolio(_0x2a407d){const _0xcd9761=_0x38ddca;let _0x166b6f=[],_0x744630=[],_0x3e995d=[],_0x4f04b4;_0x2a407d[_0xcd9761(0x343)]=decryptRSA(secure[_0xcd9761(0x27c)],_0x2a407d[_0xcd9761(0x343)]),_0x2a407d[_0xcd9761(0x289)]=decryptRSA(secure[_0xcd9761(0x27c)],_0x2a407d[_0xcd9761(0x289)]);if(_0x2a407d[_0xcd9761(0x33e)])_0x2a407d['apiPassword']=decryptRSA(secure[_0xcd9761(0x27c)],_0x2a407d['apiPassword']);if(_0x2a407d[_0xcd9761(0x343)]!==_0xcd9761(0x245)||_0x2a407d[_0xcd9761(0x289)]!==_0xcd9761(0x245)||_0x2a407d[_0xcd9761(0x33e)]&&_0x2a407d[_0xcd9761(0x33e)]!=='************'){if(config[_0xcd9761(0x1db)]){if(_0x2a407d[_0xcd9761(0x343)]==_0xcd9761(0x245))_0x2a407d[_0xcd9761(0x343)]=config[_0xcd9761(0x343)];if(_0x2a407d[_0xcd9761(0x289)]==_0xcd9761(0x245))_0x2a407d['apiSecret']=config[_0xcd9761(0x289)];if(_0x2a407d['apiPassword']==_0xcd9761(0x245))_0x2a407d[_0xcd9761(0x33e)]=config['apiPassword'];}try{await testAPI(_0x2a407d);}catch(_0xfb0ade){if(_0xfb0ade[_0xcd9761(0x27b)]()['includes'](_0xcd9761(0x2ef))){logHistory(_0xcd9761(0x338),_0xcd9761(0x258)),proxyEmit(_0xcd9761(0x1ce),![]);return;}else{logHistory(_0xcd9761(0x338),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0xcd9761(0x247)](_0xcd9761(0x1b5),_0xfb0ade),proxyEmit(_0xcd9761(0x1ce),![]);return;}}exchange?updateExchange(_0x2a407d['apiKey'],_0x2a407d[_0xcd9761(0x289)],_0x2a407d[_0xcd9761(0x33e)]):await initExchange(_0x2a407d[_0xcd9761(0x1db)],_0x2a407d['apiKey'],_0x2a407d[_0xcd9761(0x289)],_0x2a407d[_0xcd9761(0x33e)]);await loadSymbols();const _0x4f67aa=await getCoins(0x0,![],_0x2a407d[_0xcd9761(0x33b)]);_0x3e995d=cloneDeep(_0x4f67aa[0x1]);}else{const _0x1f9b77=await getCoins();_0x3e995d=cloneDeep(_0x1f9b77[0x1]);}if(_0x2a407d[_0xcd9761(0x33b)]=='')proxyEmit('portfolio1',!![]),proxyEmit(_0xcd9761(0x349),_0x3e995d);else{_0x3e995d['forEach'](_0x1f8ecf=>{const _0xf27455=_0xcd9761;if(_0x1f8ecf['coin']!=_0x2a407d[_0xf27455(0x33b)]&&allSymbols[_0xf27455(0x2ca)](_0x1f8ecf[_0xf27455(0x1bd)]))_0x166b6f['push'](_0x1f8ecf[_0xf27455(0x1bd)]);});if(_0x166b6f['length']==0x0)logHistory(_0xcd9761(0x338),_0xcd9761(0x218));else{try{_0x744630=await getTickers(_0x166b6f);}catch(_0x2e3e39){logHistory(_0xcd9761(0x338),_0xcd9761(0x225)),logger[_0xcd9761(0x247)](_0xcd9761(0x214),_0x2e3e39),proxyEmit(_0xcd9761(0x1ce),![]);return;}_0x3e995d[_0xcd9761(0x337)](_0x4b88b4=>{const _0x24d040=_0xcd9761;_0x4b88b4[_0x24d040(0x1e2)]!=_0x2a407d['basecoin']?_0x744630[_0x4b88b4[_0x24d040(0x1bd)]]?_0x4f04b4=_0x4b88b4[_0x24d040(0x313)]?0x1/_0x744630[_0x4b88b4[_0x24d040(0x1bd)]][_0x24d040(0x324)]:_0x744630[_0x4b88b4['symbol']]['last']:_0x4f04b4=0x0:_0x4f04b4=0x1,_0x4b88b4[_0x24d040(0x2a5)]=formatResult(_0x4f04b4,0x8);}),await getMarketCap(_0x3e995d),proxyEmit(_0xcd9761(0x1ce),!![]),proxyEmit(_0xcd9761(0x349),_0x3e995d);}}}function truncateTradeAmount(_0xddee32,_0x4d46b8){const _0x7760e1=_0x38ddca;let _0x1c2f3e=0x0;try{_0x1c2f3e=exchange[_0x7760e1(0x26e)](_0xddee32,_0x4d46b8);}catch(_0x1c7796){}return _0x1c2f3e;}function checkMinimums(_0x56aa26){const _0x342baa=_0x38ddca;let _0x410347=!![];const _0x2cc8cd=!_0x56aa26[_0x342baa(0x313)]?markets[_0x56aa26[_0x342baa(0x1bd)]][_0x342baa(0x22a)][_0x342baa(0x2be)]['min']:markets[_0x56aa26[_0x342baa(0x1bd)]][_0x342baa(0x22a)][_0x342baa(0x1ef)][_0x342baa(0x288)],_0x5de23f=!_0x56aa26[_0x342baa(0x313)]?markets[_0x56aa26['symbol']][_0x342baa(0x22a)][_0x342baa(0x1ef)][_0x342baa(0x288)]:markets[_0x56aa26[_0x342baa(0x1bd)]][_0x342baa(0x22a)][_0x342baa(0x2be)]['min'],_0x57b7d6=truncateTradeAmount(_0x56aa26[_0x342baa(0x1bd)],_0x56aa26[_0x342baa(0x33f)]);_0x56aa26['trade']=_0x57b7d6;if(Math[_0x342baa(0x1ad)](_0x57b7d6)<_0x2cc8cd)_0x410347=![];if(Math[_0x342baa(0x1ad)](_0x57b7d6)*_0x56aa26[_0x342baa(0x324)]<_0x5de23f)_0x410347=![];if(_0x56aa26[_0x342baa(0x334)]==_0x342baa(0x23e)){let _0x743ed4=config[_0x342baa(0x2b5)][_0x342baa(0x1cf)](_0x1f05a6=>_0x1f05a6['coin']==_0x56aa26[_0x342baa(0x1e2)]);if(_0x743ed4[_0x342baa(0x1dc)]>0x0){if(Math[_0x342baa(0x1ad)](_0x57b7d6)>_0x56aa26[_0x342baa(0x2da)]-_0x743ed4[_0x342baa(0x1dc)])_0x410347=![];}else{if(Math['abs'](_0x57b7d6)>_0x56aa26[_0x342baa(0x2da)])_0x410347=![];}}if(_0x56aa26[_0x342baa(0x334)]==_0x342baa(0x1ee)){let _0x615800=config['portfolio'][_0x342baa(0x1cf)](_0x2a9fbf=>_0x2a9fbf[_0x342baa(0x1e2)]==config[_0x342baa(0x33b)]),_0x373263=currentCoins[_0x342baa(0x1cf)](_0x563990=>_0x563990[_0x342baa(0x1e2)]==config[_0x342baa(0x33b)]);if(_0x615800['offset']>0x0){if(Math['abs'](_0x57b7d6)*_0x56aa26[_0x342baa(0x324)]>_0x373263[_0x342baa(0x2da)]-_0x615800[_0x342baa(0x1dc)])_0x410347=![];}else{if(Math['abs'](_0x57b7d6)*_0x56aa26[_0x342baa(0x324)]>_0x373263[_0x342baa(0x2da)])_0x410347=![];}}return _0x410347;}async function getBalances(_0x39b2d1=!![]){const _0x2d38f4=_0x38ddca;if(botPaused)return;let _0x22b833=0x0,_0x504360;const _0x509676=config[_0x2d38f4(0x22c)];if(config[_0x2d38f4(0x246)]&&config[_0x2d38f4(0x2af)]<0x0)await validate24hChanges();currentCoins[_0x2d38f4(0x337)](_0x185a32=>{const _0x4e155a=_0x2d38f4;if(_0x185a32[_0x4e155a(0x1e2)]!=config[_0x4e155a(0x33b)]){let _0x47c402=gTicker[noslash(_0x185a32['symbol'])];_0x504360=_0x185a32[_0x4e155a(0x313)]?0x1/_0x47c402:_0x47c402;}else _0x504360=0x1;let _0x2e05b3=_0x185a32['number']*_0x504360;_0x22b833+=_0x2e05b3,_0x185a32[_0x4e155a(0x324)]=formatResult(Number(_0x504360),0x8),_0x185a32[_0x4e155a(0x33a)]=_0x2e05b3;}),currentCoins[_0x2d38f4(0x337)](_0x5c0c49=>{const _0x256888=_0x2d38f4;let _0xb2b393=config[_0x256888(0x2b5)][_0x256888(0x1cf)](_0x2ab09c=>_0x2ab09c[_0x256888(0x1e2)]==_0x5c0c49[_0x256888(0x1e2)]),_0x26a26c=Number(_0xb2b393[_0x256888(0x1eb)]),_0x38260a=_0x5c0c49[_0x256888(0x33a)]/_0x22b833*0x64,_0x90bb67=_0x26a26c*_0x22b833/0x64/_0x5c0c49[_0x256888(0x324)]-_0x5c0c49[_0x256888(0x2da)];_0x5c0c49[_0x256888(0x1eb)]=formatResult(_0x38260a,0x3),_0x5c0c49[_0x256888(0x2ba)]=formatResult(_0x26a26c,0x3),_0x5c0c49[_0x256888(0x33f)]=formatResult(_0x90bb67,0x8),_0x5c0c49[_0x256888(0x334)]='',_0x5c0c49['valid']=![];if(_0x5c0c49[_0x256888(0x1e2)]!=config[_0x256888(0x33b)]){if(_0x5c0c49[_0x256888(0x1eb)]>_0x26a26c)_0x5c0c49[_0x256888(0x334)]='sell',_0x5c0c49[_0x256888(0x2d9)]=checkMinimums(_0x5c0c49);else _0x5c0c49[_0x256888(0x1eb)]<_0x26a26c&&(_0x5c0c49[_0x256888(0x334)]=_0x256888(0x1ee),_0x5c0c49[_0x256888(0x2d9)]=checkMinimums(_0x5c0c49));}_0x5c0c49['delta']=_0x5c0c49[_0x256888(0x1eb)]/_0x5c0c49[_0x256888(0x2ba)]-0x1;if(_0x5c0c49['orderstatus']==_0x256888(0x295)||_0x5c0c49['orderstatus']==_0x256888(0x328))_0x5c0c49[_0x256888(0x248)]=_0x256888(0x285);}),currentCoins[_0x2d38f4(0x29e)]((_0x160b8e,_0x17b868)=>_0x160b8e[_0x2d38f4(0x2bd)]<_0x17b868['delta']?0x1:_0x17b868[_0x2d38f4(0x2bd)]<_0x160b8e['delta']?-0x1:0x0);const _0x63cac2=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x63cac2['eur'],'usd':_0x63cac2['usd'],'portfolio':JSON[_0x2d38f4(0x284)](currentCoins),'threshold':_0x509676},proxyEmit(_0x2d38f4(0x34a),{'serverversion':serverversion,'balances':lastBalances});if(_0x39b2d1){if(config[_0x2d38f4(0x246)])headlessMode({'portfolio':currentCoins,'threshold':_0x509676});else lockOrders==ORDERS[_0x2d38f4(0x1fe)]&&!coolingDown&&notifyBalance({'portfolio':currentCoins,'threshold':_0x509676});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x7792b1=getNormalizedPerformance();getStartingBalances(_0x7792b1),emitPerformance(_0x7792b1);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3893dd=_0x38ddca;if(!lastBalances)return;let _0x8500a9=[],_0x2d7e6b,_0x48f43c=JSON[_0x3893dd(0x2d4)](lastBalances[_0x3893dd(0x2b5)]);_0x48f43c[_0x3893dd(0x29e)]((_0x24fba1,_0x3ec938)=>_0x24fba1['coin']>_0x3ec938[_0x3893dd(0x1e2)]?0x1:_0x3ec938[_0x3893dd(0x1e2)]>_0x24fba1[_0x3893dd(0x1e2)]?-0x1:0x0),_0x48f43c['forEach'](_0x4ea17a=>{const _0x34edde=_0x3893dd;let _0x22b344={'coin':_0x4ea17a[_0x34edde(0x1e2)],'number':_0x4ea17a[_0x34edde(0x2da)],'price':_0x4ea17a['last']};_0x8500a9[_0x34edde(0x28e)](_0x22b344);});const _0x3dd7eb=await getFiat();_0x2d7e6b={'date':lastBalances[_0x3893dd(0x33c)][_0x3893dd(0x319)]('\x20')[0x0],'eur':_0x3dd7eb[_0x3893dd(0x2e3)],'usd':_0x3dd7eb[_0x3893dd(0x20f)],'coins':_0x8500a9};let _0x491958=dbPerformance[_0x3893dd(0x216)](_0x3893dd(0x31d))[_0x3893dd(0x1cf)]({'date':_0x2d7e6b[_0x3893dd(0x1b1)]})[_0x3893dd(0x33a)]();_0x491958?_0x2d7e6b[_0x3893dd(0x1b1)]!=config[_0x3893dd(0x1f7)]&&dbPerformance[_0x3893dd(0x216)](_0x3893dd(0x31d))[_0x3893dd(0x1cf)]({'date':_0x2d7e6b[_0x3893dd(0x1b1)]})[_0x3893dd(0x2db)](_0x2d7e6b)[_0x3893dd(0x2de)]():dbPerformance[_0x3893dd(0x216)](_0x3893dd(0x31d))['push'](_0x2d7e6b)[_0x3893dd(0x2de)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xde4cf6=_0x38ddca;let _0x3a1ad7=[];if(dbPerformance[_0xde4cf6(0x278)](_0xde4cf6(0x31d))['value']()){let _0x3e3bbc=dbPerformance[_0xde4cf6(0x216)](_0xde4cf6(0x31d))[_0xde4cf6(0x360)]()['filter'](_0x5c6590=>{const _0x10b7fc=_0xde4cf6;if(_0x5c6590[_0x10b7fc(0x32d)][_0x10b7fc(0x1f9)]==0x0)return![];else return!![];})[_0xde4cf6(0x355)](_0xde4cf6(0x1b1))[_0xde4cf6(0x33a)](),_0x1a6c4a=[...config[_0xde4cf6(0x1c6)]];_0x1a6c4a[_0xde4cf6(0x29e)]((_0x11eb98,_0x31bf9e)=>_0x11eb98[_0xde4cf6(0x1b1)]>_0x31bf9e[_0xde4cf6(0x1b1)]?-0x1:_0x31bf9e[_0xde4cf6(0x1b1)]>_0x11eb98['date']?0x1:0x0);let _0x3a184c=0x1,_0x2889d4=[],_0x2168a4=0x0;_0x3e3bbc[_0xde4cf6(0x2fe)]()[_0xde4cf6(0x313)]()[_0xde4cf6(0x337)]((_0x3598da,_0x4e1de4)=>{const _0x522058=_0xde4cf6;if(_0x1a6c4a[_0x2168a4]){if(_0x3e3bbc[_0x3e3bbc[_0x522058(0x1f9)]-_0x4e1de4]&&_0x1a6c4a[_0x2168a4][_0x522058(0x1b1)]==_0x3e3bbc[_0x3e3bbc['length']-_0x4e1de4][_0x522058(0x1b1)]){if(_0x4e1de4<_0x3e3bbc[_0x522058(0x1f9)]){let _0x3027a1=0x0,_0x2712ec=0x0;_0x3e3bbc[_0x3e3bbc[_0x522058(0x1f9)]-_0x4e1de4][_0x522058(0x32d)][_0x522058(0x337)](_0x54660f=>{const _0x347999=_0x522058;_0x2712ec+=_0x54660f['number']*_0x54660f[_0x347999(0x2a5)];}),_0x1a6c4a[_0x2168a4][_0x522058(0x347)][_0x522058(0x337)](_0xbfcd92=>{const _0x536dee=_0x522058;_0x3027a1+=_0xbfcd92[_0x536dee(0x2da)]*_0xbfcd92[_0x536dee(0x2a5)];}),_0x3a184c*=_0x3027a1/(_0x2712ec-_0x3027a1)+0x1;}_0x2168a4++;}}let _0x353923=0x0;_0x3598da['coins'][_0x522058(0x337)](_0x5d467b=>{const _0x3977d2=_0x522058;_0x353923+=_0x5d467b[_0x3977d2(0x2da)]*_0x5d467b[_0x3977d2(0x2a5)];}),_0x2889d4[_0x3e3bbc['length']-_0x4e1de4-0x1]=_0x353923*(_0x3a184c-0x1);});let _0x445c32=[];_0x1a6c4a=[...config[_0xde4cf6(0x1c6)]]||[];let _0x18ee53=0x0;_0x2168a4=0x0,_0x3e3bbc[_0xde4cf6(0x337)]((_0x2335e9,_0x1508d1)=>{const _0x1c8aca=_0xde4cf6;if(_0x1a6c4a[_0x2168a4]){const _0x4d040c=fns[_0x1c8aca(0x2d4)](_0x1a6c4a[_0x2168a4][_0x1c8aca(0x1b1)],_0x1c8aca(0x25c),new Date()),_0x1fbe3d=fns[_0x1c8aca(0x2d4)](_0x2335e9[_0x1c8aca(0x1b1)],_0x1c8aca(0x25c),new Date());if(fns[_0x1c8aca(0x205)](_0x4d040c,_0x1fbe3d)){let _0x165673=0x0;_0x1a6c4a[_0x2168a4][_0x1c8aca(0x347)][_0x1c8aca(0x337)](_0x5a35a0=>{const _0x1f3c8d=_0x1c8aca;!_0x445c32[_0x5a35a0[_0x1f3c8d(0x1e2)]]?_0x445c32[_0x5a35a0['coin']]=_0x5a35a0[_0x1f3c8d(0x2da)]:(_0x165673=_0x445c32[_0x5a35a0[_0x1f3c8d(0x1e2)]],_0x445c32[_0x5a35a0['coin']]+=_0x5a35a0['number']);const _0x4ff358=_0x2335e9['coins'][_0x1f3c8d(0x1cf)](_0x2b1b2a=>_0x2b1b2a['coin']==_0x5a35a0[_0x1f3c8d(0x1e2)]);(!_0x4ff358||_0x4ff358[_0x1f3c8d(0x2da)]==0x0)&&(_0x18ee53+=(-_0x5a35a0[_0x1f3c8d(0x2da)]-_0x165673)*_0x5a35a0['price']);}),_0x2168a4++;}}_0x2335e9[_0x1c8aca(0x32d)][_0x1c8aca(0x337)]((_0x53e576,_0xdcda1a)=>{const _0x46cf46=_0x1c8aca;_0x445c32[_0x53e576[_0x46cf46(0x1e2)]]&&(_0x53e576[_0x46cf46(0x301)]=_0x445c32[_0x53e576[_0x46cf46(0x1e2)]]);}),_0x3a1ad7[_0x1c8aca(0x28e)]({'date':_0x2335e9[_0x1c8aca(0x1b1)],'eur':_0x2335e9[_0x1c8aca(0x2e3)],'usd':_0x2335e9['usd'],'offset':_0x2889d4[_0x1508d1],'netoffset':_0x18ee53,'coins':_0x2335e9[_0x1c8aca(0x32d)]});});}return _0x3a1ad7;}function emitPerformance(_0x478b37){const _0x1fc7eb=_0x38ddca;_0x478b37[_0x1fc7eb(0x1f9)]!==0x0?(proxyEmit('performance',_0x478b37),lastPerformanceEmitted=getDate()):proxyEmit(_0x1fc7eb(0x1b6),[]);}function getPerf(_0xf7d484,_0x32adc6){const _0x40a78e=_0x38ddca;let _0x5910d6=0x0,_0x4c5725=0x0,_0x35581a=0x0;_0xf7d484[_0x40a78e(0x32d)]['forEach'](_0x90e154=>{const _0xeff916=_0x40a78e;_0x5910d6+=_0x90e154[_0xeff916(0x2da)]*_0x90e154[_0xeff916(0x2a5)];});_0x32adc6&&(_0x5910d6+=_0xf7d484[_0x40a78e(0x1dc)]);if(config[_0x40a78e(0x33b)]===_0x40a78e(0x274)||config['basecoin']===_0x40a78e(0x1a4)||config['basecoin']==='PAXG')_0x4c5725=_0x5910d6*_0xf7d484[_0x40a78e(0x2e3)],_0x35581a=_0x5910d6*_0xf7d484[_0x40a78e(0x20f)];else{if(usdBasecoins[_0x40a78e(0x2ca)](config[_0x40a78e(0x33b)]))_0x4c5725=_0x5910d6*_0xf7d484['eur']/_0xf7d484[_0x40a78e(0x20f)],_0x35581a=_0x5910d6;else config[_0x40a78e(0x33b)]===_0x40a78e(0x369)&&(_0x4c5725=_0x5910d6,_0x35581a=_0x5910d6*_0xf7d484[_0x40a78e(0x20f)]/_0xf7d484[_0x40a78e(0x2e3)]);}return[_0x5910d6,_0x4c5725,_0x35581a];}function getKPIs(_0x480a2f,_0x2f069f=_0x38ddca(0x369)){const _0x2db8e6=_0x38ddca,_0x4f129c=config[_0x2db8e6(0x33b)],_0x27809e=lastBalances,_0x2f2dcc=currentCoins,_0x11708d=getNormalizedPerformance(),_0x9c3350=_0x480a2f===_0x2db8e6(0x33b)?_0x4f129c:_0x480a2f===_0x2db8e6(0x326)||_0x480a2f===_0x2db8e6(0x249)?_0x2f069f:_0x2db8e6(0x21d)+_0x4f129c,_0x33aa51=_0x480a2f===_0x2db8e6(0x1f2)?_0x2db8e6(0x2ee):_0x480a2f==='net-fiat'?_0x2db8e6(0x2ee):_0x9c3350+'\x20value',_0x4471a0=_0x480a2f===_0x2db8e6(0x1f2)||_0x480a2f===_0x2db8e6(0x249)?_0x2db8e6(0x2ee):_0x9c3350+_0x2db8e6(0x2c6);let _0x51c831=0x0;_0x2f2dcc[_0x2db8e6(0x337)](_0x4a1782=>{_0x51c831+=_0x4a1782['number']*_0x4a1782['last'];});if(_0x480a2f===_0x2db8e6(0x326)||_0x480a2f===_0x2db8e6(0x249)){if(_0x4f129c===_0x2db8e6(0x274)||_0x4f129c===_0x2db8e6(0x1a4)||_0x4f129c===_0x2db8e6(0x1e7))_0x51c831=_0x51c831*(_0x2f069f===_0x2db8e6(0x369)?_0x27809e[_0x2db8e6(0x2e3)]:_0x27809e[_0x2db8e6(0x20f)]);else{if(usdBasecoins[_0x2db8e6(0x2ca)](_0x4f129c))_0x51c831=_0x51c831*(_0x2f069f==='EUR'?_0x27809e[_0x2db8e6(0x2e3)]/_0x27809e[_0x2db8e6(0x20f)]:0x1);else _0x4f129c==='EUR'&&(_0x51c831=_0x51c831*(_0x2f069f===_0x2db8e6(0x369)?0x1:_0x27809e['usd']/_0x27809e['eur']));}}let _0xd4ddf4;if(_0x51c831!==0x0){if(_0x480a2f===_0x2db8e6(0x33b))_0xd4ddf4=(_0x51c831/startingBalances['basecoin']-0x1)*0x64;else{if(_0x2f069f===_0x2db8e6(0x369))_0xd4ddf4=(_0x51c831/startingBalances[_0x2db8e6(0x2e3)]-0x1)*0x64;else _0xd4ddf4=(_0x51c831/startingBalances[_0x2db8e6(0x20f)]-0x1)*0x64;}let _0x26a3d3=0x0;if(startingBalances[_0x2db8e6(0x32d)])_0x2f2dcc['forEach'](_0x23b51e=>{const _0x42b219=_0x2db8e6;let _0x571145=startingBalances[_0x42b219(0x32d)]['find'](_0x4e8095=>_0x4e8095[_0x42b219(0x1e2)]===_0x23b51e[_0x42b219(0x1e2)]);if(_0x571145&&_0x571145[_0x42b219(0x1e2)]&&_0x23b51e[_0x42b219(0x2da)]!==0x0)_0x26a3d3+=_0x571145['number']*_0x23b51e[_0x42b219(0x324)];});let _0x4d5ac5=0x0;if(_0x11708d['length']!==0x0){let _0x2259d2=_0x11708d[_0x11708d[_0x2db8e6(0x1f9)]-0x1];_0x4d5ac5=_0x2259d2['netoffset'];}_0x26a3d3-=_0x4d5ac5;_0x480a2f===_0x2db8e6(0x1f2)&&(_0xd4ddf4=(_0x51c831-_0x26a3d3)/startingBalances['basecoin']*0x64,_0x51c831=_0x51c831-_0x26a3d3);if(_0x480a2f==='net-fiat'){let _0x15e5ee=_0x2f069f===_0x2db8e6(0x369)?startingBalances['eur']:startingBalances[_0x2db8e6(0x20f)];if(_0x4f129c===_0x2db8e6(0x274)||_0x4f129c===_0x2db8e6(0x1a4)||_0x4f129c===_0x2db8e6(0x1e7))_0x26a3d3=_0x2f069f==='EUR'?_0x26a3d3*_0x27809e[_0x2db8e6(0x2e3)]:_0x26a3d3*_0x27809e['usd'];else{if(usdBasecoins[_0x2db8e6(0x2ca)](_0x4f129c))_0x26a3d3=_0x2f069f==='EUR'?_0x26a3d3*_0x27809e[_0x2db8e6(0x2e3)]/_0x27809e[_0x2db8e6(0x20f)]:_0x26a3d3;else _0x4f129c===_0x2db8e6(0x369)&&(_0x26a3d3=_0x2f069f==='EUR'?_0x26a3d3:_0x26a3d3*_0x27809e[_0x2db8e6(0x20f)]/_0x27809e[_0x2db8e6(0x2e3)]);}_0xd4ddf4=(_0x51c831-_0x26a3d3)/_0x15e5ee*0x64,_0x51c831=_0x51c831-_0x26a3d3;}if(_0xd4ddf4){if(_0xd4ddf4<0x64)_0xd4ddf4=_0xd4ddf4[_0x2db8e6(0x2bc)](0x2);else{if(_0xd4ddf4<0x3e8)_0xd4ddf4=_0xd4ddf4['toFixed'](0x1);else _0xd4ddf4=_0xd4ddf4[_0x2db8e6(0x2bc)](0x0);}}else _0xd4ddf4=Number('0')[_0x2db8e6(0x2bc)](0x2);if(_0x51c831){if(Math[_0x2db8e6(0x1ad)](_0x51c831)<0.000001)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x2);else{if(Math[_0x2db8e6(0x1ad)](_0x51c831)<0.1)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x6);else{if(Math[_0x2db8e6(0x1ad)](_0x51c831)<0x1)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x5);else{if(Math[_0x2db8e6(0x1ad)](_0x51c831)<0xa)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x4);else{if(Math['abs'](_0x51c831)<0x64)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x3);else{if(Math[_0x2db8e6(0x1ad)](_0x51c831)<0x3e8)_0x51c831=_0x51c831[_0x2db8e6(0x2bc)](0x2);else _0x51c831=_0x51c831['toFixed'](0x2);}}}}}}else _0x51c831=Number('0')[_0x2db8e6(0x2bc)](0x2);}else _0xd4ddf4=Number('0')[_0x2db8e6(0x2bc)](0x2);return{'value':_0x51c831,'change':_0xd4ddf4,'leftTxt':_0x33aa51,'rightTxt':_0x4471a0};}async function getStartingBalances(_0x38d42b,_0x33e9bf=!![]){const _0x1de25a=_0x38ddca;if(_0x38d42b[_0x1de25a(0x1f9)]!==0x0){const [_0x531269,_0x5a5d2a,_0x2a0977]=getPerf(_0x38d42b[0x0],!![]);let _0x38c571=[];config[_0x1de25a(0x2b5)]['forEach'](_0x4bffd7=>{const _0x5a0e6e=_0x1de25a;let _0x32eb5c=0x0,_0x5180cd;config[_0x5a0e6e(0x1c6)][_0x5a0e6e(0x337)](_0x14d8e8=>{const _0x5be5ec=_0x5a0e6e;let _0x1d75fb=_0x14d8e8['changes'][_0x5be5ec(0x1cf)](_0x3659e6=>_0x3659e6[_0x5be5ec(0x1e2)]==_0x4bffd7[_0x5be5ec(0x1e2)]);if(_0x1d75fb){_0x32eb5c+=_0x1d75fb[_0x5be5ec(0x2da)];if(!_0x5180cd)_0x5180cd=_0x1d75fb[_0x5be5ec(0x2a5)];}}),_0x38c571[_0x5a0e6e(0x28e)]({'coin':_0x4bffd7['coin'],'number':_0x32eb5c,'initialprice':_0x5180cd});});const _0x3eb131={'basecoin':_0x531269,'eur':_0x5a5d2a,'usd':_0x2a0977,'coins':_0x38c571};if(_0x33e9bf)proxyEmit(_0x1de25a(0x298),_0x3eb131);startingBalances=_0x3eb131;}}function headlessMode(_0xfafacc){const _0x11a613=_0x38ddca;let _0x172ea0=_0xfafacc['portfolio'],_0x3772f5=_0xfafacc[_0x11a613(0x22c)],_0x46db61=[];for(let _0xa05230 of _0x172ea0){if(_0xa05230[_0x11a613(0x1e2)]!=config[_0x11a613(0x33b)]){if(_0xa05230['delta']>=_0x3772f5/0x64){if(_0xa05230[_0x11a613(0x2d9)])_0x46db61[_0x11a613(0x28e)](_0xa05230);}else{if(_0xa05230[_0x11a613(0x2bd)]<=-_0x3772f5/0x64){if(_0xa05230[_0x11a613(0x2d9)])_0x46db61[_0x11a613(0x28e)](_0xa05230);}}}}_0x46db61['length']>0x0&&(lockOrders==ORDERS[_0x11a613(0x1fe)]&&!coolingDown&&_0x46db61[_0x11a613(0x337)](_0x116a46=>{const _0x201281=_0x11a613;logger[_0x201281(0x247)]('Trigger:\x20'+_0x116a46['coin']+'\x20'+_0x116a46['number']+'\x20'+_0x116a46['last']+'\x20'+_0x116a46[_0x201281(0x1eb)]+'%\x20'+_0x116a46[_0x201281(0x2ba)]+'%\x20'+(0x64*_0x116a46[_0x201281(0x2bd)])['toFixed'](0x2)+'%\x20('+_0x3772f5['toFixed'](0x2)+'%)');}),placeOrder(_0x46db61));}function notifyBalance(_0xb55fbe){const _0xa93561=_0x38ddca;let _0x54edc5=_0xb55fbe['portfolio'],_0x31c909=_0xb55fbe['threshold'],_0x359d5c=[];for(let _0x1a7e82 of _0x54edc5){if(_0x1a7e82['coin']!=config['basecoin']){if(_0x1a7e82[_0xa93561(0x2bd)]>=_0x31c909/0x64){if(_0x1a7e82[_0xa93561(0x2d9)])_0x359d5c['push'](_0x1a7e82);}else{if(_0x1a7e82[_0xa93561(0x2bd)]<=-_0x31c909/0x64){if(_0x1a7e82[_0xa93561(0x2d9)])_0x359d5c[_0xa93561(0x28e)](_0x1a7e82);}}}}if(_0x359d5c[_0xa93561(0x1f9)]>0x0){let _0x160308=_0x359d5c[_0xa93561(0x311)](_0x158999=>_0x158999[_0xa93561(0x1e2)]);_0x160308['sort']();let _0x24c8b0=_0x160308['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0xa93561(0x2f2),_0xa93561(0x1ae));lastCoinsToBalance=_0x24c8b0;}}function symbolToCoin(_0x4933e3){const _0xa1bff8=_0x38ddca;let _0x3db76a;if(_0x4933e3['includes']('/'+config[_0xa1bff8(0x33b)]))_0x3db76a=_0x4933e3['replace']('/'+config[_0xa1bff8(0x33b)],'');if(_0x4933e3[_0xa1bff8(0x2ca)](config['basecoin']+'/'))_0x3db76a=_0x4933e3[_0xa1bff8(0x31f)](config[_0xa1bff8(0x33b)]+'/','');return _0x3db76a;}async function unlockOrders(_0x4340e6=![]){const _0x31d4b2=_0x38ddca;if(allOrdersPlaced&&lockOrders==ORDERS[_0x31d4b2(0x2ae)]){logger['debug']('1\x20-\x20Unlocking\x20orders'),lockOrders=ORDERS[_0x31d4b2(0x277)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x4340e6){const _0x3fdda7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3fdda7,setBlockTransactionDetection(![]);}validateOrdersState=_0x31d4b2(0x301),persistOpenOrders([]),lockOrders=ORDERS[_0x31d4b2(0x1fe)],logger[_0x31d4b2(0x247)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x16fff4){const _0x10017a=_0x38ddca;if(_0x16fff4)validateOrdersState=_0x16fff4;logger[_0x10017a(0x247)](_0x10017a(0x2bb)+validateOrdersState+_0x10017a(0x306)+(lockOrders==0x1?_0x10017a(0x25b):lockOrders==0x2?_0x10017a(0x316):'ORDERS.UNLOCKED'));let _0x1728a2=[],_0x2946ad=config[_0x10017a(0x2e4)]==_0x10017a(0x35e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x10017a(0x1b9)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x10017a(0x2ae)])return;logger[_0x10017a(0x247)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x933b12=>{const _0x36cb55=_0x10017a;let _0x340a05=![];_0x933b12[_0x36cb55(0x295)]>0x0&&(_0x340a05=!![]),_0x1728a2['push'](_0x340a05),_0x340a05&&config[_0x36cb55(0x2e4)]!=_0x36cb55(0x35e)&&logHistory('order',_0x36cb55(0x2a4)+_0x933b12[_0x36cb55(0x1bd)]+'\x20'+_0x933b12[_0x36cb55(0x334)]+'\x20#'+formatResult(_0x933b12[_0x36cb55(0x295)],0x8)+'\x20@'+formatResult(_0x933b12[_0x36cb55(0x2a5)],0x8));}),_0x1728a2[_0x10017a(0x337)]((_0x387f8b,_0x1d5f10)=>{const _0xdbc92d=_0x10017a;if(_0x387f8b)lastOrders[_0xdbc92d(0x267)](_0x1d5f10,0x1);}),persistOpenOrders(lastOrders);const _0xd1a7d2=coolingDown?_0x10017a(0x1da):'balancing\x20resumed';if(validateOrdersState==_0x10017a(0x301)){validateOrdersState='ongoing';if(_0x1728a2[_0x10017a(0x2ca)](![])){}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1728a2[_0x10017a(0x2ca)](![])){}else await unlockOrders();}else{if(validateOrdersState==_0x10017a(0x325))_0x1728a2[_0x10017a(0x2ca)](![])&&(config[_0x10017a(0x2e4)]==_0x10017a(0x35e)?logHistory(_0x10017a(0x1c0),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x10017a(0x2f8)](_0x2946ad*validateOrderInterval/0xea60)+_0x10017a(0x2e0)+_0xd1a7d2):(await cancelOrders(),logHistory('success',_0x10017a(0x32a)+Math['round'](_0x2946ad*validateOrderInterval/0xea60)+_0x10017a(0x2e0)+_0xd1a7d2))),await unlockOrders(!![]);else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x10017a(0x2e4)]!=_0x10017a(0x35e))logHistory(_0x10017a(0x1c0),_0x10017a(0x24a)+_0xd1a7d2);await unlockOrders(!![]);}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x48cd8a=>{const _0x346df3=_0x535e;try{const _0x5a9df2=await exchange[_0x346df3(0x21a)](_0x48cd8a['orderId'],_0x48cd8a[_0x346df3(0x1bd)]);}catch(_0x36d76c){if(_0x36d76c[_0x346df3(0x27b)]()['includes'](_0x346df3(0x310))){}else await handleError(_0x36d76c,_0x346df3(0x34d));}});}async function initCoinResults(_0x2fe4d6){const _0x5156c9=_0x38ddca;_0x2fe4d6?logger['debug'](_0x5156c9(0x34f)+_0x2fe4d6):logger['debug'](_0x5156c9(0x2e9)),config['portfolio'][_0x5156c9(0x337)](_0x21da6c=>{const _0x2abd2f=_0x5156c9;if(!_0x21da6c[_0x2abd2f(0x1d5)]&&_0x21da6c['coin']!=config['basecoin']){const _0x24af2e=currentCoins[_0x2abd2f(0x1cf)](_0x8dc561=>_0x8dc561[_0x2abd2f(0x1e2)]==_0x21da6c[_0x2abd2f(0x1e2)]),_0x5a6ae0=gTicker[noslash(_0x21da6c[_0x2abd2f(0x1bd)])];let _0x194e71=_0x24af2e?_0x24af2e['number']:null,_0x3b29aa=_0x21da6c['reverse']?0x1/_0x5a6ae0:_0x5a6ae0,_0x194ba0;config[_0x2abd2f(0x1c6)][_0x2abd2f(0x337)](_0xe821d0=>{const _0x327c92=_0x2abd2f;!_0x194ba0&&(_0x194ba0=_0xe821d0[_0x327c92(0x347)][_0x327c92(0x1cf)](_0x30a3b9=>_0x30a3b9[_0x327c92(0x1e2)]==_0x21da6c['coin']),_0x194ba0&&(_0x194e71=_0x194ba0[_0x327c92(0x2da)],_0x3b29aa=_0x194ba0['price']));});let _0x26404c=dbCoinResults[_0x2abd2f(0x216)](_0x2abd2f(0x32d))[_0x2abd2f(0x1cf)]({'coin':_0x21da6c[_0x2abd2f(0x1e2)]})[_0x2abd2f(0x33a)]();if(!_0x26404c){const _0x5c9f44={'coin':_0x21da6c[_0x2abd2f(0x1e2)],'number':_0x194e71,'breakeven':_0x3b29aa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2abd2f(0x216)](_0x2abd2f(0x32d))[_0x2abd2f(0x28e)](_0x5c9f44)[_0x2abd2f(0x2de)]();}else{if(_0x2fe4d6&&_0x21da6c[_0x2abd2f(0x1e2)]==_0x2fe4d6){const _0x386617={'coin':_0x21da6c[_0x2abd2f(0x1e2)],'number':_0x194e71,'breakeven':_0x3b29aa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2abd2f(0x216)](_0x2abd2f(0x32d))[_0x2abd2f(0x1cf)]({'coin':_0x21da6c[_0x2abd2f(0x1e2)]})[_0x2abd2f(0x2db)](_0x386617)['write']();}}}});}async function updateCoinResults(_0x46e45e,_0x146e6f=![]){const _0x3dc660=_0x38ddca;let _0xa168c9,_0x596285,_0x2d7b1b,_0x398ff8,_0x4ede38,_0x1cc613,_0x3d9c32=dbCoinResults['get'](_0x3dc660(0x32d))[_0x3dc660(0x1cf)]({'coin':_0x46e45e['coin']})[_0x3dc660(0x33a)](),_0x1fc8d7=![];_0x3d9c32&&Object[_0x3dc660(0x281)](_0x3d9c32)['forEach'](([_0x3c6bd6,_0x4b53e1])=>{if(_0x4b53e1==null)_0x1fc8d7=!![];});(!_0x3d9c32||_0x1fc8d7)&&(await initCoinResults(_0x46e45e[_0x3dc660(0x1e2)]),_0x3d9c32=dbCoinResults['get'](_0x3dc660(0x32d))[_0x3dc660(0x1cf)]({'coin':_0x46e45e[_0x3dc660(0x1e2)]})['value']());_0x46e45e['reverse']&&(_0x1cc613={'filled':_0x46e45e[_0x3dc660(0x295)]*_0x46e45e[_0x3dc660(0x2a5)],'amount':_0x46e45e[_0x3dc660(0x295)]*_0x46e45e[_0x3dc660(0x2a5)],'side':_0x46e45e[_0x3dc660(0x334)]=='sell'?_0x3dc660(0x1ee):_0x3dc660(0x23e),'price':0x1/_0x46e45e['price']},_0x46e45e={..._0x46e45e,..._0x1cc613});_0x146e6f?_0x596285=_0x46e45e[_0x3dc660(0x334)]==_0x3dc660(0x1ee)?_0x3d9c32[_0x3dc660(0x2da)]+_0x46e45e['filled']:_0x3d9c32[_0x3dc660(0x2da)]-_0x46e45e[_0x3dc660(0x295)]:_0x596285=await getCoinNumber(_0x46e45e['coin']);if(_0x46e45e[_0x3dc660(0x2c3)]&&_0x46e45e[_0x3dc660(0x2c3)][_0x3dc660(0x209)]==config[_0x3dc660(0x33b)])_0xa168c9=Number(_0x46e45e['fee'][_0x3dc660(0x1ef)]);else{if(_0x46e45e[_0x3dc660(0x2c3)]&&_0x46e45e[_0x3dc660(0x2c3)][_0x3dc660(0x209)]==_0x3dc660(0x211)&&!_0x146e6f&&config[_0x3dc660(0x33b)]!=_0x3dc660(0x1e7))_0xa168c9=Number(_0x46e45e[_0x3dc660(0x2c3)]['cost'])*gTicker[_0x3dc660(0x211)+config[_0x3dc660(0x33b)]];else _0xa168c9=defaultFee*_0x46e45e['filled']*_0x46e45e[_0x3dc660(0x2a5)];}_0x46e45e['side']==_0x3dc660(0x1ee)?(_0x2d7b1b=_0x596285!=0x0?(_0x3d9c32[_0x3dc660(0x231)]*_0x3d9c32[_0x3dc660(0x2da)]+_0x46e45e[_0x3dc660(0x2a5)]*(_0x596285-_0x3d9c32['number'])+_0xa168c9)/_0x596285:0x0,_0x398ff8=_0x3d9c32[_0x3dc660(0x35d)]):(_0x2d7b1b=_0x596285!=0x0?(_0x3d9c32['breakeven']*_0x3d9c32[_0x3dc660(0x2da)]-_0x46e45e[_0x3dc660(0x2a5)]*(_0x3d9c32['number']-_0x596285)+_0xa168c9)/_0x596285:0x0,_0x398ff8=_0x3d9c32[_0x3dc660(0x35d)]+(_0x46e45e[_0x3dc660(0x2a5)]-_0x3d9c32['breakeven'])*_0x46e45e[_0x3dc660(0x295)]);_0x4ede38=(_0x46e45e[_0x3dc660(0x2a5)]-_0x2d7b1b-_0xa168c9/_0x46e45e[_0x3dc660(0x295)])*_0x596285;let _0x50ee8d={'coin':_0x46e45e[_0x3dc660(0x1e2)],'number':_0x596285,'breakeven':formatResult(_0x2d7b1b,0x8),'realized':formatResult(_0x398ff8,0x8),'unrealized':formatResult(_0x4ede38,0x8),'fees':formatResult(_0x3d9c32[_0x3dc660(0x30d)]+_0xa168c9,0x8),'sells':_0x46e45e['side']==_0x3dc660(0x23e)?_0x3d9c32[_0x3dc660(0x291)]+0x1:_0x3d9c32['sells'],'buys':_0x46e45e[_0x3dc660(0x334)]==_0x3dc660(0x1ee)?_0x3d9c32['buys']+0x1:_0x3d9c32[_0x3dc660(0x1df)]};dbCoinResults['get'](_0x3dc660(0x32d))['find']({'coin':_0x46e45e['coin']})[_0x3dc660(0x2db)](_0x50ee8d)[_0x3dc660(0x2de)]();if(!_0x146e6f){if(_0x46e45e['fee']&&_0x46e45e[_0x3dc660(0x2c3)]['currency']=='BNB'){const _0x404cb8=currentCoins[_0x3dc660(0x1cf)](_0x4a5488=>_0x4a5488['coin']==_0x3dc660(0x211));if(_0x404cb8){let _0x240adc=dbCoinResults[_0x3dc660(0x216)](_0x3dc660(0x32d))[_0x3dc660(0x1cf)]({'coin':_0x3dc660(0x211)})['value']();_0x50ee8d={..._0x240adc,'number':_0x404cb8[_0x3dc660(0x2da)]},dbCoinResults[_0x3dc660(0x216)](_0x3dc660(0x32d))['find']({'coin':_0x3dc660(0x211)})['assign'](_0x50ee8d)[_0x3dc660(0x2de)]();}}}}async function placeOrder(_0x1da6e3){const _0x2f8b17=_0x38ddca,_0x48e19f=config[_0x2f8b17(0x2e4)]==_0x2f8b17(0x35e)?_0x2f8b17(0x35e):_0x2f8b17(0x357);if(lockOrders==ORDERS[_0x2f8b17(0x1fe)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x2f8b17(0x2ae)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2f8b17(0x301);let _0x127db6=![];lastOrders=[];for(const _0x4998b8 of _0x1da6e3){let _0x2e205e,_0x3563a6,_0x38b4be,_0x51e73b,_0x32f450,_0x279274=_0x4998b8[_0x2f8b17(0x1bd)];try{const _0x117243=await exchange[_0x2f8b17(0x2f7)](_0x279274);_0x2e205e=_0x4998b8[_0x2f8b17(0x313)]?0x1/_0x4998b8[_0x2f8b17(0x324)]:_0x4998b8[_0x2f8b17(0x324)],_0x3563a6=_0x117243[_0x2f8b17(0x304)],_0x38b4be=_0x117243[_0x2f8b17(0x283)];_0x4998b8[_0x2f8b17(0x313)]?(_0x51e73b=_0x4998b8[_0x2f8b17(0x334)]==_0x2f8b17(0x1ee)?_0x2f8b17(0x23e):_0x2f8b17(0x1ee),_0x32f450=Math['abs'](_0x4998b8[_0x2f8b17(0x33f)])/_0x2e205e):(_0x51e73b=_0x4998b8[_0x2f8b17(0x334)],_0x32f450=Math['abs'](_0x4998b8[_0x2f8b17(0x33f)]));_0x48e19f==_0x2f8b17(0x357)&&(config[_0x2f8b17(0x2e4)]==_0x2f8b17(0x219)&&(_0x2e205e=_0x51e73b==_0x2f8b17(0x1ee)?_0x3563a6:_0x38b4be),config[_0x2f8b17(0x2e4)]==_0x2f8b17(0x28a)&&(_0x2e205e=_0x51e73b==_0x2f8b17(0x1ee)?_0x38b4be:_0x3563a6));_0x32f450=formatResult(_0x32f450,0x8),_0x2e205e=formatResult(_0x2e205e,0x8);const _0x2b7da7=_0x51e73b=='sell'?config[_0x2f8b17(0x303)]?String[_0x2f8b17(0x2d0)]('0x'+config[_0x2f8b17(0x303)])+'\x20':'':config[_0x2f8b17(0x26b)]?String['fromCodePoint']('0x'+config[_0x2f8b17(0x26b)])+'\x20':'',_0xc75d21=_0x48e19f==_0x2f8b17(0x35e)?_0x2f8b17(0x2e8):config[_0x2f8b17(0x2e4)]=='limit-high'?_0x2f8b17(0x1d4):_0x2f8b17(0x36e),_0x121adf=(Math[_0x2f8b17(0x1bf)](Math[_0x2f8b17(0x228)]()*0x35a4e900)+0x5f5e100)[_0x2f8b17(0x27b)]();lastOrders[_0x2f8b17(0x28e)]({'customId':_0x121adf,'symbol':_0x279274,'coin':_0x4998b8['coin'],'amount':_0x32f450,'price':_0x2e205e,'side':_0x51e73b,'reverse':_0x4998b8['reverse'],'filled':0x0});if(_0x48e19f==_0x2f8b17(0x35e))logHistory(_0x2f8b17(0x2c1),''+_0x2b7da7+_0xc75d21+_0x2f8b17(0x365)+_0x279274+'\x20'+_0x51e73b+'\x20#'+formatResult(_0x32f450,0x8)+'\x20@'+formatResult(_0x2e205e,0x8));else logHistory(_0x2f8b17(0x2c1),''+_0x2b7da7+_0xc75d21+'\x20order:\x20'+_0x279274+'\x20'+_0x51e73b+'\x20#'+formatResult(_0x32f450,0x8)+'\x20@'+formatResult(_0x2e205e,0x8));let _0x31a8e1;_0x48e19f==_0x2f8b17(0x35e)?_0x51e73b==_0x2f8b17(0x1ee)&&[_0x2f8b17(0x1e1),_0x2f8b17(0x22f),_0x2f8b17(0x1a5),'Huobi',_0x2f8b17(0x220)]['includes'](config[_0x2f8b17(0x1db)])?_0x31a8e1=await exchange['createOrder'](_0x279274,_0x48e19f,_0x51e73b,_0x32f450,_0x2e205e):_0x31a8e1=await exchange[_0x2f8b17(0x207)](_0x279274,_0x48e19f,_0x51e73b,_0x32f450,undefined):_0x31a8e1=await exchange['createOrder'](_0x279274,_0x48e19f,_0x51e73b,_0x32f450,_0x2e205e);logger[_0x2f8b17(0x247)]('ID:\x20'+_0x31a8e1['id']+_0x2f8b17(0x1d9)+_0x121adf);const _0x10f11c=lastOrders[_0x2f8b17(0x1f9)]-0x1;if(_0x10f11c>=0x0&&lastOrders[_0x10f11c]['customId']==_0x121adf){lastOrders[_0x10f11c][_0x2f8b17(0x30c)]=_0x31a8e1['id'];if(_0x31a8e1[_0x2f8b17(0x2be)])lastOrders[_0x10f11c][_0x2f8b17(0x2be)]=_0x31a8e1[_0x2f8b17(0x2be)];if(_0x31a8e1[_0x2f8b17(0x2a5)])lastOrders[_0x10f11c][_0x2f8b17(0x2a5)]=_0x31a8e1[_0x2f8b17(0x2a5)];lastOrders[_0x10f11c][_0x2f8b17(0x2c3)]=_0x31a8e1[_0x2f8b17(0x2c3)];}if(config[_0x2f8b17(0x2cb)]!=0x0){let _0x495f73=null;if(cooldownTracker[_0x2f8b17(0x1f9)]==config[_0x2f8b17(0x2cb)]-0x1)_0x495f73=cooldownTracker[_0x2f8b17(0x35a)]();const _0x493314=getTimeStamp();cooldownTracker[_0x2f8b17(0x28e)](_0x493314);if(_0x495f73){const _0x42f77a=fns[_0x2f8b17(0x2d2)](new Date(_0x493314),new Date(_0x495f73));if(_0x42f77a<cooldownInterval){logHistory(_0x2f8b17(0x338),_0x2f8b17(0x2fd)+config[_0x2f8b17(0x2cb)]+_0x2f8b17(0x351)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x2f8b17(0x36b)),coolingDown=!![];break;}}}}catch(_0x11502c){if(_0x11502c['toString']()[_0x2f8b17(0x2ca)](_0x2f8b17(0x201)))lastOrders=lastOrders[_0x2f8b17(0x20d)](_0x2689f7=>_0x2689f7[_0x2f8b17(0x1bd)]!=_0x279274),logHistory(_0x2f8b17(0x338),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x279274),_0x127db6=!![];else{if(_0x11502c['toString']()[_0x2f8b17(0x2ca)](_0x2f8b17(0x23a)))lastOrders=lastOrders[_0x2f8b17(0x20d)](_0x1879c3=>_0x1879c3[_0x2f8b17(0x1bd)]!=_0x279274),logHistory(_0x2f8b17(0x338),'Order\x20amount\x20is\x20invalid:\x20'+_0x279274),_0x127db6=!![];else{if(_0x11502c[_0x2f8b17(0x27b)]()['includes'](_0x2f8b17(0x2ce)))lastOrders=lastOrders[_0x2f8b17(0x20d)](_0xfa18f7=>_0xfa18f7[_0x2f8b17(0x1bd)]!=_0x279274),logHistory(_0x2f8b17(0x338),_0x2f8b17(0x1c8)+_0x279274),logger['debug'](_0x11502c),_0x127db6=!![];else _0x11502c[_0x2f8b17(0x27b)]()[_0x2f8b17(0x2ca)](_0x2f8b17(0x1b2))?(lastOrders=lastOrders['filter'](_0x5af10b=>_0x5af10b[_0x2f8b17(0x1bd)]!=_0x279274),logHistory(_0x2f8b17(0x338),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x279274),_0x127db6=!![]):(lastOrders=lastOrders[_0x2f8b17(0x20d)](_0x340850=>_0x340850[_0x2f8b17(0x1bd)]!=_0x279274),await handleError(_0x11502c,_0x2f8b17(0x251),_0x279274));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2f8b17(0x1f9)]>0x0){const _0x445f43=config[_0x2f8b17(0x2e4)]==_0x2f8b17(0x35e)?validateOrderTimeout*0x3c*0x3e8:config[_0x2f8b17(0x1b9)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2ac73b=_0x2f8b17;validateOrders(_0x2ac73b(0x325));},_0x445f43);}else unlockOrders();_0x127db6&&config[_0x2f8b17(0x246)]&&(logHistory('error',_0x2f8b17(0x2e1)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x2f8b17(0x2f5)));}else{if(coolingDown)!config['headless']&&logHistory(_0x2f8b17(0x338),_0x2f8b17(0x2a6));else lockOrders!=ORDERS[_0x2f8b17(0x1fe)]&&(!config[_0x2f8b17(0x246)]&&(config['ordertype']==_0x2f8b17(0x35e)?logHistory(_0x2f8b17(0x338),_0x2f8b17(0x257)):logHistory(_0x2f8b17(0x338),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x58bc15){const _0x5a0822=_0x38ddca,_0x15f221={...config,'openOrders':_0x58bc15};let _0x1f6fda=dbConfig[_0x5a0822(0x216)](_0x5a0822(0x354))[_0x5a0822(0x1cf)]({'botID':botID})[_0x5a0822(0x33a)]();_0x1f6fda&&dbConfig[_0x5a0822(0x216)](_0x5a0822(0x354))[_0x5a0822(0x1cf)]({'botID':botID})[_0x5a0822(0x2db)](_0x15f221)['write']();}function restoreOrders(){const _0x44b77a=_0x38ddca;let _0x2c9db8;config['openOrders']&&allOpenOrders[_0x44b77a(0x337)](_0x281012=>{const _0x549a4e=_0x44b77a,_0x984edf=config[_0x549a4e(0x1e8)][_0x549a4e(0x1cf)](_0x2a40cd=>_0x2a40cd[_0x549a4e(0x30c)]==_0x281012['id']);_0x984edf&&(lastOrders[_0x549a4e(0x28e)](_0x984edf),_0x2c9db8=_0x281012[_0x549a4e(0x259)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x44b77a(0x2ae)],validateOrdersState=_0x44b77a(0x26d),allOrdersPlaced=!![];const _0x53d354=new Date()['getTime'](),_0x1676dc=config[_0x44b77a(0x2e4)]==_0x44b77a(0x35e)?validateOrderTimeout*0x3c*0x3e8:config[_0x44b77a(0x1b9)]*0x3c*0x3e8;if(_0x2c9db8+_0x1676dc>_0x53d354){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2a29c8=_0x44b77a;validateOrders(_0x2a29c8(0x325));},_0x2c9db8+_0x1676dc-_0x53d354);}else validateOrders(_0x44b77a(0x325));}}async function sendMetricsTelegram(){const _0x4f790d=_0x38ddca;if(!coinsLoaded){process['send']({'telegrammsg':_0x4f790d(0x318)},_0x22aed2=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4692cc='';if(config['showname'])_0x4692cc=_0x4f790d(0x2bf)+config[_0x4f790d(0x21f)]+_0x4f790d(0x2a7);else _0x4692cc='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x420ffa=getKPIs('basecoin'),_0x5b5db4=getKPIs(_0x4f790d(0x326),config[_0x4f790d(0x326)]),_0x4ca1b3=getKPIs(_0x4f790d(0x1f2)),_0x1e41a6=getKPIs(_0x4f790d(0x249),config[_0x4f790d(0x326)]);_0x4692cc+=_0x4f790d(0x341),_0x4692cc+=_0x420ffa[_0x4f790d(0x1ca)]+'\x20:\x20'+_0x420ffa[_0x4f790d(0x33a)]+'\x0a',_0x4692cc+=_0x420ffa[_0x4f790d(0x348)]+':\x20'+_0x420ffa[_0x4f790d(0x332)]+'%\x0a',_0x4692cc+=_0x5b5db4[_0x4f790d(0x1ca)]+_0x4f790d(0x1ea)+_0x5b5db4[_0x4f790d(0x33a)]+'\x0a',_0x4692cc+=_0x5b5db4[_0x4f790d(0x348)]+':\x20'+_0x5b5db4[_0x4f790d(0x332)]+'%\x0a',_0x4692cc+=_0x4ca1b3[_0x4f790d(0x1ca)]+':\x20'+_0x4ca1b3['value']+'\x20('+config[_0x4f790d(0x33b)]+')\x0a',_0x4692cc+=_0x4ca1b3[_0x4f790d(0x348)]+':\x20'+_0x4ca1b3[_0x4f790d(0x332)]+'%\x20('+config[_0x4f790d(0x33b)]+')\x0a',_0x4692cc+=_0x1e41a6[_0x4f790d(0x1ca)]+':\x20'+_0x1e41a6[_0x4f790d(0x33a)]+'\x20('+config[_0x4f790d(0x326)]+')\x0a',_0x4692cc+=_0x1e41a6[_0x4f790d(0x348)]+':\x20'+_0x1e41a6[_0x4f790d(0x332)]+_0x4f790d(0x1af)+config[_0x4f790d(0x326)]+')\x0a',_0x4692cc+=_0x4f790d(0x2e2),process['send']({'telegrammsg':_0x4692cc},_0x5ba706=>{});}async function sendPortfolioTelegram(){const _0x224426=_0x38ddca;if(!coinsLoaded||!currentCoins[0x0][_0x224426(0x1eb)]){process['send']({'telegrammsg':_0x224426(0x318)},_0x3a972f=>{});return;}let _0xa0f55a='';if(config[_0x224426(0x2b3)])_0xa0f55a=_0x224426(0x2bf)+config['botname']+_0x224426(0x242);else _0xa0f55a=_0x224426(0x1c4)+botID+_0x224426(0x242);_0xa0f55a+=_0x224426(0x341),_0xa0f55a+=_0x224426(0x35c),_0xa0f55a+=_0x224426(0x255),_0xa0f55a+=_0x224426(0x35c),currentCoins[_0x224426(0x337)](_0x32ce26=>{const _0xcc3dbd=_0x224426;_0xa0f55a+=_0x32ce26['coin'][_0xcc3dbd(0x336)](0x7)+'|\x20'+formatPad(_0x32ce26['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x32ce26[_0xcc3dbd(0x2ba)],0x2,0x6)+'|\x20'+formatPad(_0x32ce26['delta']*0x64,0x2,0x6)+'\x0a';}),_0xa0f55a+='</pre>',process[_0x224426(0x2cf)]({'telegrammsg':_0xa0f55a},_0x22a8a6=>{});}function formatPad(_0x1b3f08,_0x4dd26e,_0x48383d){const _0x446698=_0x38ddca,_0x1e7958=formatResultString(_0x1b3f08,_0x4dd26e);return _0x1e7958?_0x1e7958[_0x446698(0x1b0)](_0x48383d):''[_0x446698(0x1b0)](_0x48383d);}function logHistory(_0x3b6dae,_0x4dbbfe,_0x38bb2a=''){const _0x42622e=_0x38ddca;logger[_0x42622e(0x20b)](''+_0x4dbbfe);let _0x302563={'time':getTimeStamp(),'type':_0x3b6dae,'event':_0x4dbbfe};dbLogs[_0x42622e(0x216)](_0x42622e(0x294))['push'](_0x302563)[_0x42622e(0x2de)]();if(_0x38bb2a=='')_0x38bb2a=_0x4dbbfe;proxyEmit(_0x42622e(0x1fa),{'log':_0x302563,'summary':_0x38bb2a}),process['send']({'telegram':{..._0x302563,'botname':config[_0x42622e(0x21f)],'showname':config[_0x42622e(0x2b3)]}},_0xb18458=>{});}function emitHistory(_0x1bea93={}){const _0x42d2ec=_0x38ddca;Object[_0x42d2ec(0x203)](_0x1bea93)['length']==0x0&&(_0x1bea93={'type':[_0x42d2ec(0x2c1),_0x42d2ec(0x1fa)],'event':'','page':0x1});if(_0x1bea93['type']['includes']('event'))_0x1bea93['type'][_0x42d2ec(0x267)](_0x1bea93['type'][_0x42d2ec(0x335)](_0x42d2ec(0x1fa)),0x1,_0x42d2ec(0x338),_0x42d2ec(0x2f2),'success');if(dbLogs[_0x42d2ec(0x278)](_0x42d2ec(0x294))['value']()){let _0x120963=dbLogs[_0x42d2ec(0x216)](_0x42d2ec(0x294))['filter'](_0x40006c=>{const _0x25ea7e=_0x42d2ec;if(_0x1bea93[_0x25ea7e(0x364)][_0x25ea7e(0x1f9)]==0x0)return![];else return _0x1bea93[_0x25ea7e(0x364)][_0x25ea7e(0x2ca)](_0x40006c['type']);})['filter'](_0x3eccee=>{const _0x22d845=_0x42d2ec;if(_0x1bea93[_0x22d845(0x1fa)]=='')return!![];else return _0x3eccee['event'][_0x22d845(0x1cb)]()[_0x22d845(0x2ca)](_0x1bea93[_0x22d845(0x1fa)]['toLowerCase']());})[_0x42d2ec(0x355)](_0x42d2ec(0x33c)),_0x383581=_0x120963[_0x42d2ec(0x33a)]()[_0x42d2ec(0x1f9)];_0x120963=_0x120963[_0x42d2ec(0x313)]()[_0x42d2ec(0x2fe)]((_0x1bea93[_0x42d2ec(0x269)]-0x1)*logPageSize,_0x1bea93[_0x42d2ec(0x269)]*logPageSize-0x1)[_0x42d2ec(0x313)]()[_0x42d2ec(0x33a)](),proxyEmit('event-history',{'logs':_0x120963,'total':_0x383581});}else proxyEmit(_0x42d2ec(0x342),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x7fe6a8){const _0x16a1c6=_0x38ddca;if(dbLogs['has'](_0x16a1c6(0x294))[_0x16a1c6(0x33a)]()){const _0x49eacf=dbLogs[_0x16a1c6(0x216)](_0x16a1c6(0x294))['sortBy'](_0x16a1c6(0x33c))['filter'](_0x239275=>{const _0x538aca=_0x16a1c6;return _0x239275[_0x538aca(0x364)]==_0x538aca(0x2c1);})['value']();dbLogs['get'](_0x16a1c6(0x294))['remove']()[_0x16a1c6(0x2de)](),dbLogs[_0x16a1c6(0x216)](_0x16a1c6(0x294))[_0x16a1c6(0x2db)](_0x49eacf)[_0x16a1c6(0x2de)](),emitHistory(_0x7fe6a8);}}async function pauseBot(_0x5e8733=pauseBotIntervalShort,_0x2b7cb9,_0x1b5333,_0x10b7f1=![]){const _0x2892dc=_0x38ddca,_0x29b185=new Date()[_0x2892dc(0x229)]();if(!lastErrorShown||_0x29b185-lastErrorShown>=_0x5e8733){lastErrorShown=_0x29b185;if(!lastBotPause)lastBotPause=_0x29b185,consecutivePauses=0x1;else{if(_0x29b185-lastBotPause-_0x5e8733<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x10b7f1){logHistory(_0x2892dc(0x338),_0x2b7cb9+_0x2892dc(0x23b)),await killBot();return;}else logHistory(_0x2892dc(0x338),_0x2b7cb9+pauseBotMsg),_0x5e8733=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x29b185;}_0x1b5333?logger[_0x2892dc(0x247)]('('+consecutivePauses+')\x20'+_0x2b7cb9+_0x2892dc(0x235),_0x1b5333):logger[_0x2892dc(0x247)]('('+consecutivePauses+')\x20'+_0x2b7cb9);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5e8733),botPaused=![],_0x5e8733==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x578d21=_0x38ddca;botPaused=!![],await sleep(0x3e8),process[_0x578d21(0x2cf)]({'stop':'kill'},_0x36a11f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2dba71,_0x498644){const _0x1af152=_0x38ddca;if(botPaused)return;const _0x47d312=config[_0x1af152(0x1db)]||'Exchange';if(_0x498644)logger['debug'](_0x1af152(0x2d3)+_0x498644);const _0xff99d=()=>{const _0x1e5791=_0x1af152;loading[_0x1e5791(0x338)]=!![],emitLoadingProgress();};if(_0x2dba71[_0x1af152(0x27b)]()[_0x1af152(0x2ca)](_0x1af152(0x2fa)))logHistory('error',_0x47d312+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0xff99d();else{if(_0x2dba71[_0x1af152(0x27b)]()[_0x1af152(0x2ca)](_0x1af152(0x1fb)))logHistory('error',_0x47d312+_0x1af152(0x352)),_0xff99d();else{if(_0x2dba71[_0x1af152(0x27b)]()['includes'](_0x1af152(0x2ef)))config['apiPassword']?errormsg=_0x47d312+_0x1af152(0x323):errormsg=_0x47d312+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',logHistory(_0x1af152(0x338),errormsg+_0x1af152(0x2dd)),_0xff99d();else _0x2dba71[_0x1af152(0x27b)]()[_0x1af152(0x2ca)](_0x1af152(0x268))?(logHistory(_0x1af152(0x338),_0x47d312+_0x1af152(0x321)),_0xff99d()):await handleError(_0x2dba71,null);}}}async function handleError(_0x3582ad,_0x40bdd9,_0x478fb4=''){const _0x4cb07d=_0x38ddca;if(botPaused)return;let _0x416d93;const _0x5d7db9=config['exchange']||_0x4cb07d(0x2b7);if(_0x40bdd9)logger['debug'](_0x4cb07d(0x2d3)+_0x40bdd9);if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x244)))_0x416d93=_0x5d7db9+_0x4cb07d(0x1c1),await pauseBot(undefined,_0x416d93,_0x3582ad);else{if(_0x3582ad['toString']()[_0x4cb07d(0x2ca)](_0x4cb07d(0x1d0)))_0x416d93=_0x5d7db9+_0x4cb07d(0x30e),await pauseBot(undefined,_0x416d93,_0x3582ad);else{if(_0x3582ad['toString']()[_0x4cb07d(0x2ca)](_0x4cb07d(0x1c7))||_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x363)))_0x416d93=_0x5d7db9+_0x4cb07d(0x2fb),await pauseBot(undefined,_0x416d93,_0x3582ad[_0x4cb07d(0x27b)]());else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x28f)))_0x416d93=_0x5d7db9+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x416d93,_0x3582ad['toString']());else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x1fd)))_0x416d93=_0x5d7db9+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x416d93,_0x3582ad[_0x4cb07d(0x27b)]());else{if(_0x3582ad[_0x4cb07d(0x27b)]()['toLowerCase']()['includes']('timestamp')||_0x3582ad[_0x4cb07d(0x27b)]()['toLowerCase']()[_0x4cb07d(0x2ca)]('request-time'))_0x416d93=_0x4cb07d(0x260),await pauseBot(undefined,_0x416d93,_0x3582ad[_0x4cb07d(0x27b)]());else{if(_0x3582ad[_0x4cb07d(0x27b)]()['includes']('InvalidNonce'))_0x416d93=_0x5d7db9+_0x4cb07d(0x333),await pauseBot(undefined,_0x416d93,_0x3582ad['toString']());else{if(_0x3582ad instanceof ccxt[_0x4cb07d(0x30b)])_0x416d93=_0x5d7db9+_0x4cb07d(0x223)+_0x3582ad[_0x4cb07d(0x27b)](),logger[_0x4cb07d(0x247)](_0x4cb07d(0x262),_0x3582ad),await pauseBot(undefined,_0x416d93,_0x3582ad);else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)]('API-key\x20format\x20invalid'))logHistory(_0x4cb07d(0x338),_0x5d7db9+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x4cb07d(0x338),_0x4cb07d(0x300)),await killBot();else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x1fb)))logHistory(_0x4cb07d(0x338),_0x5d7db9+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x4cb07d(0x338),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x2ef))&&_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)]('token\x20is\x20expired'))_0x416d93=_0x5d7db9+_0x4cb07d(0x221),await pauseBot(undefined,_0x416d93,_0x3582ad,!![]);else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x2ef)))config['apiPassword']?_0x416d93=_0x5d7db9+_0x4cb07d(0x323):_0x416d93=_0x5d7db9+_0x4cb07d(0x2a2),logHistory('error',_0x416d93),logHistory('error',_0x4cb07d(0x300)),await killBot();else{if(_0x3582ad['toString']()['includes'](_0x4cb07d(0x268)))logHistory('error',_0x5d7db9+_0x4cb07d(0x33d)),logHistory(_0x4cb07d(0x338),_0x4cb07d(0x300)),await killBot();else{if(_0x3582ad[_0x4cb07d(0x27b)]()[_0x4cb07d(0x2ca)](_0x4cb07d(0x1b3)))logHistory(_0x4cb07d(0x338),_0x4cb07d(0x1bc)+_0x478fb4);else{if(_0x3582ad instanceof ccxt[_0x4cb07d(0x230)]){_0x416d93=_0x5d7db9+_0x4cb07d(0x312)+_0x3582ad['toString'](),logHistory(_0x4cb07d(0x338),_0x416d93),logger[_0x4cb07d(0x247)]('Exchange\x20error\x20details:',_0x3582ad);if(_0x478fb4)logger['debug'](_0x4cb07d(0x297)+_0x478fb4);await pauseBot(undefined,_0x416d93,_0x3582ad);}else{_0x416d93=_0x4cb07d(0x1be)+_0x3582ad[_0x4cb07d(0x27b)](),logHistory(_0x4cb07d(0x338),_0x416d93),logger[_0x4cb07d(0x247)](_0x416d93+_0x4cb07d(0x235),_0x3582ad);if(_0x478fb4)logger[_0x4cb07d(0x247)](_0x4cb07d(0x297)+_0x478fb4);await pauseBot(undefined,_0x416d93);}}}}}}}}}}}}}}}}function decryptRSA(_0x4304e3,_0xa44cf0){const _0x3458b1=_0x38ddca,_0x5e4ebb=forge['pki'][_0x3458b1(0x2c8)](_0x4304e3),_0x4eff74=_0x5e4ebb[_0x3458b1(0x272)](forge[_0x3458b1(0x1d3)][_0x3458b1(0x290)](_0xa44cf0),_0x3458b1(0x31c),{'md':forge['md'][_0x3458b1(0x21b)][_0x3458b1(0x29d)](),'mgf1':{'md':forge['md'][_0x3458b1(0x21b)][_0x3458b1(0x29d)]()}});return _0x4eff74;}async function withRetry(_0x4a5520,_0x1edb1c){const _0xa136fe=_0x38ddca;let _0x5c687e=![],_0x46a4c8=0x0,_0x1029a4,_0x498dd7;while(_0x46a4c8<maxRetries){try{_0x1029a4=await _0x1edb1c();break;}catch(_0x4ee009){_0x498dd7=_0x4ee009,!_0x5c687e?(_0x5c687e=!![],logger[_0xa136fe(0x247)]('RETRY\x20-\x20Error\x20in\x20'+_0x4a5520+':',_0x4ee009[_0xa136fe(0x27b)]())):await sleep(retryInterval);}_0x46a4c8++;}if(_0x46a4c8==0x0)return _0x1029a4;if(_0x46a4c8>=maxRetries)throw _0x498dd7;else return logger[_0xa136fe(0x247)](_0xa136fe(0x1c2)+_0x46a4c8+_0xa136fe(0x2e7)),_0x1029a4;}function formatResult(_0x5d7848,_0x228668){const _0x54b090=_0x38ddca;return parseFloat(_0x5d7848[_0x54b090(0x2bc)](_0x228668));}function formatResultTruncate(_0xce47c1,_0x1fe713){const _0xe6cf46=_0x38ddca;let _0x33472f=formatResultString(_0xce47c1,0xa),_0x23dbaf=_0x33472f['indexOf']('.');return _0x23dbaf!=-0x1&&(_0x33472f=_0x33472f[_0xe6cf46(0x2fe)](0x0,_0x23dbaf+_0x1fe713+0x1)),Number(_0x33472f);}function formatResultString(_0x306071,_0x2e2a2c){const _0x5f5d17=_0x38ddca;let _0x20bc36;if(!(''+_0x306071)[_0x5f5d17(0x2ca)]('e'))_0x20bc36=+(Math['round'](_0x306071+'e+'+_0x2e2a2c)+'e-'+_0x2e2a2c);else{let _0x12a2a2=(''+_0x306071)[_0x5f5d17(0x319)]('e'),_0x2cc33e='';+_0x12a2a2[0x1]+_0x2e2a2c>0x0&&(_0x2cc33e='+'),_0x20bc36=+(Math['round'](+_0x12a2a2[0x0]+'e'+_0x2cc33e+(+_0x12a2a2[0x1]+_0x2e2a2c))+'e-'+_0x2e2a2c);}return Number(_0x20bc36)[_0x5f5d17(0x2bc)](_0x2e2a2c);}function _0x5085(){const _0x2edaa1=['Insufficient\x20funds\x20to\x20execute\x20order:\x20','symbol','Unknown\x20error:\x20','floor','success','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','RETRY\x20-\x20Problem\x20resolved\x20after\x20',':\x20Bot\x20','<b>Bot\x20','getHours','liquidity','ExchangeNotAvailable','Order\x20is\x20invalid:\x20','bot-','leftTxt','toLowerCase','\x20MB','***','portfolio1','find','RateLimitExceeded','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','bb-secure.json','util','Limit\x20(high-margin)','excluded','pid','fetchOpenOrders','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20|\x20Custom\x20ID:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','exchange','offset','USDT','basecoinvalue','buys','staging','Bybit','coin','TUSD','-results.json','getSeconds','getCoinNumber()','PAXG','openOrders','quote','\x20:\x20','distribution','Reset\x20|\x20','USD','buy','cost','configuration','switch-manual','net-basecoin','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','added','slider',':\x20timer\x20>','startdate','progress','length','event','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20minutes','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','UNLOCKED','active','environment','MIN_NOTIONAL','1\x20-\x20FILLED\x20known\x20order:\x20','keys','watchTrades','isEqual','starting-balance-','createOrder','substring','currency','total','full','Valid\x20balance\x20for\x20','filter','startprice','usd','\x20>\x20pausing\x20bot\x20for\x20','BNB','marketcap','8852lGQaPm','Error\x20details\x20(1):','Saving\x20configuration','get','join','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limit-high','cancelOrder','sha256','red_yellow_blue','Net\x20','percentage','botname','Huobipro','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','watchOrders','\x20network\x20error:\x20','uncaughtException','Unknown\x20error\x20-\x20check\x20logs','Error:\x20Invalid\x20argument\x20','process\x20','random','getTime','limits','getDate','threshold','1644807WHIcoG','defaults','Bitget','ExchangeError','breakeven','/output-000.log','getMonth','watchTrades()','\x20>\x20details:','60011nHxmuv','11159720yFQUsV','Error\x20details:','bb-settings.json','Invalid\x20quantity','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','sendMetricsTelegram','sell','sendPortfolioTelegram','Error\x20in\x20loadSymbols():\x20','removed','\x20portfolio:</b>\x20\x0a\x0a','loading-canceled','DDoSProtection','************','headless','debug','orderstatus','net-fiat','No\x20more\x20open\x20orders\x20-\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','recent20','log','closed','enabled','Waited\x20','placeOrder()','bots','2.6.23','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','timestamp','\x20>\x20','ORDERS.LOCKED','yyyy/MM/dd','production','colorscheme','enableFiatToggle','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','sqrt','Network\x20error\x20details:','1\x20-\x20Handle\x20open\x20orders','./logs/','marketcapEnabled','52038oYpKQN','splice','PermissionDenied','page','fetchTickers()','emojibuy','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','ongoing','amountToPrecision','storeFiat','storeHeadless','set','decrypt','2.6.22','BTC','args','pro','UNLOCKING','has','request-time','average','toString','privateKey','emitHistory','secure','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20>\x20[DEBUG]\x20','entries','exchange\x20reload','ask','stringify','none','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','detectLiquidityChange()','min','apiSecret','limit-low','2.3.5','./version.json','initTickers()','push','RequestTimeout','decode64','sells','configuration-stored','highest','logs','filled','version','Symbol(s):\x20','starting-balances','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','\x20|\x20exchange:\x20','autoliquidity','0\x20-\x20EXECUTION:\x20','create','sort','recovery','existsSync',')\x20unknown\x20order:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','exec','Order\x20filled:\x20','price','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20metrics:</b>\x20\x0a\x0a','argv','findIndex','quick','open','status','mkdirSync','LOCKED','change24h','\x20|\x20','watchOrders()','onepagemode','showname','remainingSymbols','portfolio','getPortfolio','Exchange','2\x20-\x20handling\x20FILLED\x20order:\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','target','1\x20-\x20Validate\x20orders:\x20','toFixed','delta','amount','<b>','no\x20exchange\x20reloaded','order','fetchBalance','fee','BNB/','USDP','\x20change','test','privateKeyFromPem','running','includes','cooldown','exchanges','\x20|\x20highest\x20fee:\x20','InvalidOrder','send','fromCodePoint','unlinkSync','differenceInSeconds','Exception\x20thrown\x20in\x20','parse','Invalid\x20symbol:\x20','format','8hFbmeq','1464060fKCPzG','valid','number','assign','Initializing\x20exchange:\x20already\x20done','(see:\x20hodlerhacks.com/fix/1)','write','Bot\x20','\x20minutes\x20-\x20','Avoiding\x20continuous\x20order\x20attempts','</pre>','eur','ordertype','67NaLekD','getFullYear','\x20attempts','Market','Initializing\x20coin\x20results','lowdb','apply','writeFile','1\x20-\x20partially\x20FILLED\x20(','Net\x20effect','AuthenticationError','lowdb/adapters/FileSync','/EUR','warning','deleteHistoryAlerts','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Cooldown\x20ended\x20-\x20balancing\x20resumed','-events.json','fetchTicker','round',')\x20known\x20order:\x20','API-key\x20format\x20invalid','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','-config.json','Executed\x20','slice','Error\x20while\x20deleting\x20files:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','initial','Error\x20in\x20testAPI():\x20','emojisell','bid','timeshift','\x20|\x20lock\x20orders:\x20','add','coin-loading-progress','\x20exchange','/USDT','NetworkError','orderId','fees','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','/backup/','OrderNotFound','map','\x20exchange\x20error:\x20','reverse','Block\x20transaction\x20detection:\x20','Initializing\x20exchange','ORDERS.UNLOCKING','\x20-\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','split','fetchBalance()','cancelLoading','RSA-OAEP','data','Binance','replace','heapUsed','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','.json','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','last','final','fiat','-performance.json','canceled','marketcapApi','Unfilled\x20order(s)\x20canceled\x20after\x20','2.6.0','Portfolio\x20change\x20detected:\x20','coins','getMinutes','startnumber','memoryUsage','Pausing\x20for\x20','change','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','side','indexOf','padEnd','forEach','error','getOpenOrders()','value','basecoin','time','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions\x20and\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','apiPassword','trade','update-liquidity','<pre>','event-history','apiKey','BUSD','loadMarkets','Loading\x20completed','changes','rightTxt','portfolio2','balances','freeze','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','cancelOrders()','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Resetting\x20coin\x20results:\x20','storeConfiguration','\x20orders\x20in\x20less\x20than\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','spot','bot','sortBy','toUpperCase','limit','4LNOLVF','password','shift','2618740UZCtSu','-------------------------------\x0a','realized','market','settings','cloneDeep','30CQNFik','yargs/yargs','OnMaintenance','type','\x20order:\x20','./config/','USDC','showConfig','EUR','2\x20-\x20Handled\x20open\x20orders','\x20hour','001','recreate','Limit\x20(low-margin)','botID','no\x20open\x20orders','ETH','Cex','getStartingBalances','watchTradesForSymbols','string','cancel','search','datetime','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','abs','Manual\x20balancing\x20required','%\x20(','padStart','date','must\x20be\x20greater\x20than\x20minimum\x20amount','InsufficientFunds','placeOrder','Error\x20details\x20(0):','performance','createWriteStream','max','timeout','\x20-\x20bot\x20not\x20started','date-fns'];_0x5085=function(){return _0x2edaa1;};return _0x5085();}function getServerTime(){const _0x394cb7=_0x38ddca,_0x4efbe3=new Date();return _0x4efbe3[_0x394cb7(0x2e6)]()+'/'+(_0x4efbe3[_0x394cb7(0x233)]()+0x1)['toString']()[_0x394cb7(0x1b0)](0x2,'0')+'/'+_0x4efbe3['getDate']()[_0x394cb7(0x27b)]()[_0x394cb7(0x1b0)](0x2,'0')+'\x20'+_0x4efbe3[_0x394cb7(0x1c5)]()['toString']()['padStart'](0x2,'0')+':'+_0x4efbe3[_0x394cb7(0x32e)]()[_0x394cb7(0x27b)]()[_0x394cb7(0x1b0)](0x2,'0')+':'+_0x4efbe3[_0x394cb7(0x1e5)]()['toString']()[_0x394cb7(0x1b0)](0x2,'0');}function getTimeStamp(){const _0x1891ab=_0x38ddca,_0x48d8df=shiftedTime();return _0x48d8df[_0x1891ab(0x2e6)]()+'/'+(_0x48d8df[_0x1891ab(0x233)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x48d8df[_0x1891ab(0x22b)]()[_0x1891ab(0x27b)]()[_0x1891ab(0x1b0)](0x2,'0')+'\x20'+_0x48d8df[_0x1891ab(0x1c5)]()[_0x1891ab(0x27b)]()[_0x1891ab(0x1b0)](0x2,'0')+':'+_0x48d8df[_0x1891ab(0x32e)]()['toString']()['padStart'](0x2,'0')+':'+_0x48d8df[_0x1891ab(0x1e5)]()[_0x1891ab(0x27b)]()['padStart'](0x2,'0');}function getDate(){const _0x54d9c7=_0x38ddca,_0x5c74b2=shiftedTime();return _0x5c74b2['getFullYear']()+'/'+(_0x5c74b2[_0x54d9c7(0x233)]()+0x1)[_0x54d9c7(0x27b)]()[_0x54d9c7(0x1b0)](0x2,'0')+'/'+_0x5c74b2['getDate']()[_0x54d9c7(0x27b)]()[_0x54d9c7(0x1b0)](0x2,'0');}function getHour(){const _0x503edd=_0x38ddca,_0x10099d=shiftedTime();return _0x10099d['getHours']()[_0x503edd(0x27b)]()[_0x503edd(0x1b0)](0x2,'0');}function sleep(_0x1167fe){return new Promise(_0x8003f8=>setTimeout(_0x8003f8,_0x1167fe));}function shiftedTime(){const _0x12f722=_0x38ddca,_0x555e7c=new Date();let _0x1bf20a=_0x555e7c;if(config&&config[_0x12f722(0x305)]!==0x0)_0x1bf20a=fns[_0x12f722(0x307)](_0x555e7c,{'hours':config[_0x12f722(0x305)]});return _0x1bf20a;}function timer(_0x17b818){const _0x43b053=_0x38ddca,_0xdaf218=new Date();!lasttime?console['log'](getTimeStamp()+_0x43b053(0x1f6),_0x17b818,_0xdaf218):console[_0x43b053(0x24d)](getTimeStamp()+_0x43b053(0x1f6),_0x17b818,(_0xdaf218-lasttime)/0x3e8),lasttime=_0xdaf218;}