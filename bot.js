const _0x3c477d=_0x31d9;(function(_0x347b89,_0x36ebeb){const _0x565b82=_0x31d9,_0x4af56c=_0x347b89();while(!![]){try{const _0x1868bd=parseInt(_0x565b82(0x26f))/0x1*(parseInt(_0x565b82(0x275))/0x2)+-parseInt(_0x565b82(0x2d1))/0x3+parseInt(_0x565b82(0x21b))/0x4+parseInt(_0x565b82(0x220))/0x5+parseInt(_0x565b82(0x341))/0x6+-parseInt(_0x565b82(0x375))/0x7*(-parseInt(_0x565b82(0x358))/0x8)+-parseInt(_0x565b82(0x270))/0x9;if(_0x1868bd===_0x36ebeb)break;else _0x4af56c['push'](_0x4af56c['shift']());}catch(_0x4cf22a){_0x4af56c['push'](_0x4af56c['shift']());}}}(_0x1b42,0x3321f));const _0xc20984=function(){let _0x3b79de=!![];return function(_0xd598a3,_0x393a68){const _0x4a1f1b=_0x3b79de?function(){const _0x40c3e5=_0x31d9;if(_0x393a68){const _0x5b5482=_0x393a68[_0x40c3e5(0x27d)](_0xd598a3,arguments);return _0x393a68=null,_0x5b5482;}}:function(){};return _0x3b79de=![],_0x4a1f1b;};}(),_0x3d093d=_0xc20984(this,function(){const _0x5a730a=_0x31d9;return _0x3d093d[_0x5a730a(0x2a1)]()[_0x5a730a(0x29a)](_0x5a730a(0x2f4))[_0x5a730a(0x2a1)]()[_0x5a730a(0x32e)](_0x3d093d)[_0x5a730a(0x29a)]('(((.+)+)+)+$');});_0x3d093d();'use strict';const ccxt=require(_0x3c477d(0x352))['pro'],low=require(_0x3c477d(0x288)),FileSync=require(_0x3c477d(0x209)),fs=require('fs'),fns=require(_0x3c477d(0x2f5)),Crypt=require(_0x3c477d(0x21e))[_0x3c477d(0x36a)],util=require(_0x3c477d(0x364)),argv=require('yargs/yargs')(process[_0x3c477d(0x37a)][_0x3c477d(0x372)](0x2))[_0x3c477d(0x37a)],path=require(_0x3c477d(0x31b));let exchange;global[_0x3c477d(0x310)]={},global[_0x3c477d(0x212)]={};const usdBasecoins=[_0x3c477d(0x33b),_0x3c477d(0x27f),_0x3c477d(0x228),_0x3c477d(0x2f6),_0x3c477d(0x25b),_0x3c477d(0x22a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3c477d(0x339)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3c477d(0x279)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3c477d(0x20a))[_0x3c477d(0x32f)],botID=process[_0x3c477d(0x37a)][0x2]||_0x3c477d(0x265),pattern=/^[0-9]{3}$/;!pattern[_0x3c477d(0x207)](botID)&&(console[_0x3c477d(0x230)](_0x3c477d(0x298)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3c477d(0x37a)][0x3]||'',configpath=userID?_0x3c477d(0x29d)+userID+'/':_0x3c477d(0x29d),logspath=userID?_0x3c477d(0x37f)+userID+'/':_0x3c477d(0x37f),loggerfile=fs['createWriteStream'](logspath+_0x3c477d(0x217),{'flags':'a'});!fs[_0x3c477d(0x26d)](configpath)&&fs[_0x3c477d(0x21c)](configpath);!fs[_0x3c477d(0x26d)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x3c477d(0x382)+botID+_0x3c477d(0x20c),logfile=configpath+_0x3c477d(0x382)+botID+_0x3c477d(0x379),performancefile=configpath+'bot-'+botID+_0x3c477d(0x235),coinresultsfile=configpath+_0x3c477d(0x382)+botID+_0x3c477d(0x24e),settingsfile=configpath+_0x3c477d(0x245),securefile=configpath+_0x3c477d(0x360),configbackuppath=configpath+_0x3c477d(0x32a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3c477d(0x201)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3c477d(0x201)]({'data':[],'version':serverversion})[_0x3c477d(0x204)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3c477d(0x201)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3c477d(0x201)]({'coins':[],'version':serverversion})['write']();function _0x1b42(){const _0x23c667=['amountToPrecision','\x20|\x20Custom\x20ID:\x20','differenceInSeconds','recent20','Pausing\x20for\x20','************','event-history','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','breakeven','sortBy','Net\x20effect','red_yellow_blue','none','forEach','Manual\x20balancing\x20required','\x20orders\x20in\x20less\x20than\x20','rightTxt','apiKey','average','amount','ETH','***','InvalidNonce','ticker','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','isEqual','value','additional\x20symbols\x20','ORDERS.LOCKED','data','configuration-stored','find','side','full','path','basecoinvalue','send','add','basecoin','apiSecret','price','random','changes','remainingSymbols','toUpperCase','cancel','\x20|\x20exchange:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','watchTransactions','/backup/','includes','startprice','min','constructor','version','Fee\x20discount\x20refund\x20detected:\x20','startdate','botID','buys','fetchOpenOrders','storeHeadless','round','indexOf','NetworkError','freeze','%\x20(','USD','timeout','resetHistory','active','watchOrders','fetchTickers','2080698aZBIdc','/USD','RequestTimeout','</pre>','ExchangeError','progress','Order\x20is\x20invalid:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Binance','Limit\x20(high-margin)','\x20metrics:</b>\x20\x0a\x0a','getTime','\x20has\x20a\x2024h\x20drop\x20of\x20','padStart','customId','fiat','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ccxt','stringify','assign','target','startsWith','-------------------------------\x0a','1136qKrZVz','yyyy-MM-dd\x27T\x27HH:mm:ss','fromCodePoint','unlinkSync','Net\x20','floor','sort','usd','bb-secure.json','eur','2\x20-\x20Orders\x20unlocked','getOpenOrders()','util','.json','settings','function','1\x20-\x20Handle\x20open\x20orders','2\x20-\x20Validate\x20orders:\x20','Crypt','Executed\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','join','push','error','milliseconds','emitHistory','slice','recreate','cooldown','987JbhRMB','\x20minutes','market','2.5.0','-events.json','argv','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Uncaught\x20NetworkError:','initial','recreateCoinResults()','./logs/','toggleBotMode','Saving\x20configuration','bot-','netoffset','performance','event','timestamp','headless','getSeconds','Uncaught\x20ExchangeError:','warning','running','0\x20-\x20EXECUTION:\x20','<b>','<pre>','cost','Resetting\x20bot\x20history','RSA-OAEP','storeFiat','abs','getDate','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','getPortfolio(2)','defaults','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','storeConfiguration','write','\x20portfolio:</b>\x20\x0a\x0a','bid','test','getPortfolio','lowdb/adapters/FileSync','./version.json','2.3.5','-config.json','coins','restart','trade','splice','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','change','balances','BTC','\x20exchange','buy','/output-000.log','showname','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','1\x20-\x20Validate\x20orders:\x20','862112zfeDTT','mkdirSync','Initializing\x20coin\x20results','hybrid-crypto-js','getCoinNumber()','1464650CNeOaA','initclient','limit-low','\x20>\x20','\x20|\x20lock\x20orders:\x20','DDoSProtection','added','secure','TUSD','Unfilled\x20order(s)\x20canceled\x20after\x20','USDP','Transaction\x20detection\x20blocked','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','loading-canceled','has','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','log','bots','fees','password','emojibuy','-performance.json','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20|\x20highest\x20fee:\x20','InsufficientFunds','AuthenticationError','fetchTicker','highest','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','portfolio','last','bot','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','getFullYear','net-fiat','page','loadMarkets','bb-settings.json','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Cooldown\x20ended\x20-\x20balancing\x20resumed','coin','orderId','closed','limit-high',':\x20timer\x20>','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','-results.json','shift','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','emojisell','enabled','Order\x20amount\x20is\x20invalid:\x20','timeshift','limits','string','1\x20-\x20Unlock\x20orders','Resetting\x20coin\x20results:\x20','delta','\x20closed\x20the\x20connection','USDC','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','message','symbol','parse','date','Order\x20filled:\x20','final','\x20value','orderstatus','001','reverse','Invalid\x20quantity','args','BNB','order','leftTxt','botname','existsSync','ordertype','137778aAzUVM','4995612aGolMS','number','decrypt','\x20hour','Portfolio\x20change\x20detected:\x20','2nDIkPa','autoliquidity','net-basecoin','canceled','UNLOCKED','set','API-key\x20format\x20invalid','Market','apply','getHours','BUSD','\x20>\x20[DEBUG]\x20','startnumber','<b>Bot\x20','filled','kill','configuration','toLowerCase','change24h','lowdb','OnMaintenance','exchange\x20reloaded','sell','loadSymbols()','spot','getPortfolio(1)','getMinutes','Limit\x20(low-margin)','2\x20-\x20FILLED\x20known\x20order:\x20','substring','cancelOrder','watchTrades','getPortfolio(0)',':\x20Bot\x20','Uncaught\x20Exception:','Error:\x20Invalid\x20argument\x20','ask','search','total','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','./config/','\x20exchange\x20error','Waited\x20','\x20|\x20','toString','threshold','cancelOrders()','LOCKED','logs','\x20not\x20responding','datetime','cloneDeep','colorscheme','\x20minutes\x20-\x20','max','split','keys','removed','ORDERS.UNLOCKED','distribution','entries','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','openOrders','time','sells','\x20order:\x20','Initiating\x20exchange\x20reload','toFixed','ongoing','sendMetricsTelegram','1\x20-\x20FILLED:\x20','UNLOCKING','Invalid\x20API\x20key\x20or\x20secret\x20entered','fee','EUR','format','yyyy/MM/dd','get','recovery','realized','concat','ID:\x20','deleteHistoryAlerts','liquidity','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','apiPassword','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','status','debug','3\x20-\x20handling\x20FILLED\x20order:\x20','padEnd','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','745602JyVmHv','filter','\x20API\x20secret\x20is\x20invalid','exchanges','success','fetchBalance','2\x20-\x20Handled\x20open\x20orders','type','showConfig','length','findIndex','exchange','\x20|\x20Error\x20details:\x20','currency','percentage','2\x20-\x20FILLED\x20unknown\x20order:\x20','sendPortfolioTelegram','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','placeOrder','remove','valid','privateKey','limit','getMonth','offset','Avoiding\x20continuous\x20order\x20attempts','excluded','BNB/','writeFile','onepagemode','open','replace','getCoins()','\x20:\x20','fetchClosedOrders','(((.+)+)+)+$','date-fns','USDT','balancing\x20resumed'];_0x1b42=function(){return _0x23c667;};return _0x1b42();}const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x3c477d(0x1fb)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x423254=>{console['log'](_0x423254);},'simple':_0x5080b5=>{const _0x492b00=_0x3c477d;console[_0x492b00(0x230)](_0x5080b5),loggerfile['write'](util[_0x492b00(0x2c0)](_0x5080b5)+'\x0a');},'full':async(_0x59b65b,_0x579774='')=>{const _0x2dfe5=_0x3c477d;let _0x133d35;if(config[_0x2dfe5(0x218)])_0x133d35=getTimeStamp()+':\x20'+config[_0x2dfe5(0x26c)]+_0x2dfe5(0x223)+_0x59b65b;else _0x133d35=getTimeStamp()+':\x20Bot\x20'+botID+_0x2dfe5(0x223)+_0x59b65b;console[_0x2dfe5(0x230)](_0x133d35),loggerfile['write'](util[_0x2dfe5(0x2c0)](_0x133d35)+'\x0a'),_0x579774&&(console['log'](_0x579774),loggerfile[_0x2dfe5(0x204)](util['format'](_0x579774)+'\x0a'));},'debug':async(_0x24108c,_0x2c3714='')=>{const _0x42af02=_0x3c477d;let _0x53b9c7;if(config[_0x42af02(0x218)])_0x53b9c7=getTimeStamp()+':\x20'+config[_0x42af02(0x26c)]+_0x42af02(0x280)+_0x24108c;else _0x53b9c7=getTimeStamp()+_0x42af02(0x296)+botID+'\x20>\x20[DEBUG]\x20'+_0x24108c;if(debugging)console[_0x42af02(0x230)](_0x53b9c7);loggerfile[_0x42af02(0x204)](util[_0x42af02(0x2c0)](_0x53b9c7)+'\x0a');if(_0x2c3714){if(debugging)console[_0x42af02(0x230)](_0x2c3714);loggerfile[_0x42af02(0x204)](util[_0x42af02(0x2c0)](_0x2c3714)+'\x0a');}}};process['on']('uncaughtException',function(_0x359a5d){const _0x54c4b7=_0x3c477d;logHistory(_0x54c4b7(0x36f),_0x54c4b7(0x2c9)),logger[_0x54c4b7(0x2cd)](_0x54c4b7(0x297),_0x359a5d);});settings[_0x3c477d(0x254)]!=config[_0x3c477d(0x254)]&&updateTimeshift(settings['timeshift']);settings[_0x3c477d(0x2ee)]!=config['onepagemode']&&updateOnepagemode(settings[_0x3c477d(0x2ee)]);process[_0x3c477d(0x31d)]({'started':'running'},_0x46c185=>{}),initializeProcessListeners();function proxyEmit(_0x35d6b9,_0x9a556=null){const _0x597aa2=_0x3c477d;process[_0x597aa2(0x31d)]({'function':_0x35d6b9,'args':_0x9a556},_0x27df03=>{});}function initializeProcessListeners(){const _0x448156=_0x3c477d;process['on'](_0x448156(0x25d),_0x5c3144=>{const _0x4017f3=_0x448156;switch(Object[_0x4017f3(0x2ad)](_0x5c3144)[0x0]){case _0x4017f3(0x254):_0x5c3144[_0x4017f3(0x254)]!=undefined&&(settings['timeshift']=_0x5c3144[_0x4017f3(0x254)],updateTimeshift(settings[_0x4017f3(0x254)]));break;case'onepagemode':_0x5c3144[_0x4017f3(0x2ee)]!=undefined&&(settings[_0x4017f3(0x2ee)]=_0x5c3144[_0x4017f3(0x2ee)],updateOnepagemode(settings[_0x4017f3(0x2ee)]));break;case _0x4017f3(0x231):_0x5c3144[_0x4017f3(0x231)]!=undefined&&(bots=JSON['parse'](_0x5c3144[_0x4017f3(0x231)]),proxyEmit('bots',bots));break;case _0x4017f3(0x367):switch(_0x5c3144[_0x4017f3(0x367)]){case _0x4017f3(0x221):initclient();break;case _0x4017f3(0x380):toggleBotMode();break;case _0x4017f3(0x371):emitHistory(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x2c7):deleteHistoryAlerts(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x208):getPortfolio(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x203):storeConfiguration(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x335):storeHeadless(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x1fc):storeFiat(_0x5c3144[_0x4017f3(0x268)]);break;case _0x4017f3(0x33d):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x4017f3(0x2e3):placeOrder(_0x5c3144[_0x4017f3(0x268)]);break;case'cancelLoading':cancelLoading();break;case _0x4017f3(0x2d9):showConfig();break;case _0x4017f3(0x2ba):sendMetricsTelegram();break;case _0x4017f3(0x2e1):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x47b9e5=null,_0x137056=![]){const _0x570529=_0x3c477d;logger[_0x570529(0x2cd)]('Reset\x20|\x20'+(_0x47b9e5&&_0x47b9e5[_0x570529(0x2da)]>0x0?_0x570529(0x314)+_0x47b9e5[_0x570529(0x36d)](','):'no\x20additional\x20symbols')+_0x570529(0x2a0)+(_0x137056?_0x570529(0x28a):'exchange\x20not\x20reloaded')+_0x570529(0x327)+config[_0x570529(0x2dc)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x137056)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x570529(0x30e)){if(_0x137056){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4ccb00){handleErrorNoStop(_0x4ccb00,_0x570529(0x28c));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x47b9e5);const _0x1d1eae=await getCoins();[currentCoins,currentCoinsAll]=_0x1d1eae,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x570529(0x2da)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x18b57f=_0x3c477d;logger[_0x18b57f(0x2cd)](_0x18b57f(0x2b7));while(lockOrders!=ORDERS[_0x18b57f(0x279)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x18b57f(0x2cd)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x55af5a=config[_0x3c477d(0x2dc)],_0x4d5a6a=config[_0x3c477d(0x30a)],_0x586acb=config[_0x3c477d(0x320)],_0x348dcf=config[_0x3c477d(0x2ca)]){const _0x11b885=_0x3c477d;exchange&&await stopExchange();!supportedExchanges()[_0x11b885(0x32b)](_0x55af5a)&&(logHistory(_0x11b885(0x36f),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x55af5a+_0x11b885(0x215)),killBot());const _0x5c5935=ccxt[_0x55af5a[_0x11b885(0x286)]()];exchange=new _0x5c5935({'apiKey':_0x4d5a6a,'secret':_0x586acb,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x11b885(0x28d)}});if(_0x348dcf)exchange[_0x11b885(0x233)]=_0x348dcf;}function setStableCoins(){const _0x450bba=_0x3c477d;let _0x2cc88f=config[_0x450bba(0x31f)]==_0x450bba(0x30d)?'ETH':_0x450bba(0x214),_0x94ad45=!allSymbols[_0x450bba(0x32b)](_0x2cc88f+_0x450bba(0x342))?'USDT':_0x450bba(0x33b),_0x2605d0=!allSymbols[_0x450bba(0x32b)](_0x2cc88f+'/EUR')?_0x94ad45:_0x450bba(0x2bf);stablecoins={'eur':{'coin':''+_0x2cc88f+_0x2605d0,'symbol':_0x2cc88f+'/'+_0x2605d0},'usd':{'coin':''+_0x2cc88f+_0x94ad45,'symbol':_0x2cc88f+'/'+_0x94ad45}};}async function initwsCcxt(_0x3bddc3){const _0x48ebb0=_0x3c477d;_0x3bddc3==null&&(_0x3bddc3=[],config[_0x48ebb0(0x23d)]['forEach'](_0x1c1937=>{const _0x4ba6e8=_0x48ebb0;if(!_0x1c1937[_0x4ba6e8(0x2eb)]&&_0x1c1937['coin']!=config['basecoin'])_0x3bddc3['push'](_0x1c1937['symbol']);}));if(!_0x3bddc3[_0x48ebb0(0x32b)](stablecoins[_0x48ebb0(0x361)]['symbol']))_0x3bddc3['push'](stablecoins[_0x48ebb0(0x361)][_0x48ebb0(0x25e)]);if(!_0x3bddc3['includes'](stablecoins[_0x48ebb0(0x35f)][_0x48ebb0(0x25e)]))_0x3bddc3[_0x48ebb0(0x36e)](stablecoins[_0x48ebb0(0x35f)]['symbol']);if(config[_0x48ebb0(0x2dc)][_0x48ebb0(0x356)]('Binance')){if(!_0x3bddc3[_0x48ebb0(0x32b)](_0x48ebb0(0x2ec)+config[_0x48ebb0(0x31f)]))_0x3bddc3[_0x48ebb0(0x36e)](_0x48ebb0(0x2ec)+config['basecoin']);}loadCoins(_0x3bddc3);const _0x18d4c2=async _0x4bcc7f=>{const _0x3e8289=_0x48ebb0,_0x53d924=await exchange[_0x3e8289(0x23a)](_0x4bcc7f);global[_0x3e8289(0x310)][noslash(_0x53d924[_0x3e8289(0x25e)])]=_0x53d924[_0x3e8289(0x23e)];while(!![]){if(!botPaused)try{const _0x3ba183=await exchange[_0x3e8289(0x294)](_0x4bcc7f);global['ticker'][noslash(_0x3ba183[0x0][_0x3e8289(0x25e)])]=_0x3ba183[0x0]['price'],await sleep(0x3e8);}catch(_0x92fde7){if(!exchangeStopped)await handleError(_0x92fde7,'watchTrades',_0x4bcc7f);}else await sleep(0x64);}},_0x22ee88=async _0x51ecbf=>{const _0x13a114=_0x48ebb0;while(!![]){if(!botPaused)try{const _0x142d20=await exchange['fetchTicker'](_0x51ecbf);global['change'][_0x142d20[_0x13a114(0x25e)]]=_0x142d20[_0x13a114(0x2df)],await sleep(0x3c*0x3e8);}catch(_0x31eee0){if(!exchangeStopped)await handleError(_0x31eee0,'fetchTickers',_0x51ecbf);}else await sleep(0x64);}},_0x24d674=async()=>{const _0x2dde63=_0x48ebb0;while(!![]){if(!botPaused)try{const _0x3a7049=await exchange['watchOrders']();_0x3a7049['forEach'](_0x2d957c=>{updateNumberCoinsCcxt(_0x2d957c);});}catch(_0x3ac97e){if(!exchangeStopped)await handleError(_0x3ac97e,_0x2dde63(0x33f));}else await sleep(0x64);}};_0x3bddc3[_0x48ebb0(0x306)](_0x3f6041=>{_0x18d4c2(_0x3f6041),_0x22ee88(_0x3f6041);}),!wsEventsSet&&(wsEventsSet=!![],_0x24d674(),watchTransactions());}async function watchTransactions(){const _0x24e7a1=_0x3c477d;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x39d0b8=await getCoins(),[_0x503107,_0x4262ff]=_0x39d0b8;let _0x272864=[];currentCoins[_0x24e7a1(0x306)](_0x5a6038=>{const _0x54b05b=_0x24e7a1,_0x1c647b=_0x503107['find'](_0x239129=>_0x239129[_0x54b05b(0x248)]==_0x5a6038[_0x54b05b(0x248)]);if(_0x1c647b){if(_0x5a6038[_0x54b05b(0x271)]!=_0x1c647b[_0x54b05b(0x271)]){let _0x14aacb;if(_0x5a6038[_0x54b05b(0x248)]!=config[_0x54b05b(0x31f)]){const _0x523379=global[_0x54b05b(0x310)][noslash(_0x5a6038[_0x54b05b(0x25e)])];_0x14aacb=_0x5a6038['reverse']?0x1/_0x523379:_0x523379;}else _0x14aacb=0x1;_0x272864[_0x54b05b(0x36e)]({'coin':_0x5a6038['coin'],'symbol':_0x5a6038[_0x54b05b(0x25e)],'price':_0x14aacb,'number':Number(formatResult(_0x1c647b[_0x54b05b(0x271)]-_0x5a6038[_0x54b05b(0x271)],0x8)),'basecoinvalue':_0x14aacb*(_0x1c647b[_0x54b05b(0x271)]-_0x5a6038['number'])});}}});if(_0x272864['length']==0x1&&!blockTransactionDetection){if(config[_0x24e7a1(0x276)]){logger[_0x24e7a1(0x2cd)](_0x24e7a1(0x23c)+_0x272864[0x0][_0x24e7a1(0x31c)]+_0x24e7a1(0x237)+lastFees[_0x24e7a1(0x23b)]);if(lastFees[_0x24e7a1(0x23b)]==0x0||Math[_0x24e7a1(0x1fd)](_0x272864[0x0][_0x24e7a1(0x31c)])>lastFees['highest']){delete _0x272864[0x0][_0x24e7a1(0x25e)],delete _0x272864[0x0][_0x24e7a1(0x31c)];let _0x5930f4=[],_0x1c7854=[...config[_0x24e7a1(0x2c8)]]||[],_0x1ad380=config[_0x24e7a1(0x2c8)];_0x1c7854['sort']((_0x4ff63d,_0x62cb9)=>_0x4ff63d['date']>_0x62cb9[_0x24e7a1(0x260)]?-0x1:_0x62cb9[_0x24e7a1(0x260)]>_0x4ff63d['date']?0x1:0x0);const _0x3aab8e=getDate();if(_0x1c7854[0x0]){const _0x52911c=fns['parse'](_0x1c7854[0x0][_0x24e7a1(0x260)],_0x24e7a1(0x2c1),new Date()),_0x562c4d=fns[_0x24e7a1(0x25f)](_0x3aab8e,_0x24e7a1(0x2c1),new Date());if(fns[_0x24e7a1(0x312)](_0x52911c,_0x562c4d)){_0x5930f4=_0x1c7854[0x0][_0x24e7a1(0x323)];const _0x18a184=_0x5930f4[_0x24e7a1(0x318)](_0x135457=>_0x135457[_0x24e7a1(0x248)]==_0x272864[0x0][_0x24e7a1(0x248)]);_0x18a184?(_0x18a184['number']+=_0x272864[0x0][_0x24e7a1(0x271)],_0x18a184[_0x24e7a1(0x271)]==0x0&&(_0x5930f4=_0x5930f4[_0x24e7a1(0x2d2)](_0x4180ae=>{const _0x5b54d9=_0x24e7a1;return _0x4180ae[_0x5b54d9(0x248)]!=_0x272864[0x0]['coin'];}))):_0x5930f4[_0x24e7a1(0x36e)](_0x272864[0x0]);const _0x5af1af=_0x1ad380[_0x24e7a1(0x318)](_0x4f9388=>_0x4f9388[_0x24e7a1(0x260)]==_0x3aab8e);_0x5af1af[_0x24e7a1(0x323)]=_0x5930f4;}else _0x1ad380[_0x24e7a1(0x36e)]({'date':_0x3aab8e,'changes':[_0x272864[0x0]]});}const _0x459c9c=_0x1ad380['find'](_0x5de8d6=>_0x5de8d6['date']==_0x3aab8e);if(_0x459c9c){let _0x4e021d=!![];_0x459c9c['changes'][_0x24e7a1(0x306)](_0x409323=>{const _0x3574ed=_0x24e7a1;if(_0x409323[_0x3574ed(0x271)]!=0x0)_0x4e021d=![];}),_0x4e021d&&(_0x1ad380=_0x1ad380['filter'](_0x2c8b84=>{const _0x30f250=_0x24e7a1;return _0x2c8b84[_0x30f250(0x260)]!=_0x3aab8e;}));}let _0xcfb292=dbConfig['get'](_0x24e7a1(0x23f))['find']({'botID':botID})[_0x24e7a1(0x313)]();_0xcfb292&&(dbConfig[_0x24e7a1(0x2c2)](_0x24e7a1(0x23f))[_0x24e7a1(0x318)]({'botID':botID})[_0x24e7a1(0x354)]({'liquidity':_0x1ad380})['write'](),config[_0x24e7a1(0x2c8)]=_0x1ad380),logHistory(_0x24e7a1(0x2d5),_0x24e7a1(0x274)+Math[_0x24e7a1(0x1fd)](_0x272864[0x0][_0x24e7a1(0x271)])+'\x20'+_0x272864[0x0]['coin']+'\x20'+(_0x272864[0x0]['number']>0x0?_0x24e7a1(0x226):_0x24e7a1(0x2ae))+_0x24e7a1(0x240)),proxyEmit(_0x24e7a1(0x285),emittedConfiguration());}else logger['debug'](_0x24e7a1(0x330)+Math[_0x24e7a1(0x1fd)](_0x272864[0x0]['number'])+'\x20'+_0x272864[0x0][_0x24e7a1(0x248)]+'\x20'+(_0x272864[0x0]['number']>0x0?_0x24e7a1(0x226):_0x24e7a1(0x2ae)));transactionDetected=!![],currentCoins=_0x503107,currentCoinsAll=_0x4262ff;}else logger[_0x24e7a1(0x2cd)](_0x24e7a1(0x274)+Math['abs'](_0x272864[0x0][_0x24e7a1(0x271)])+'\x20'+_0x272864[0x0][_0x24e7a1(0x248)]+'\x20'+(_0x272864[0x0][_0x24e7a1(0x271)]>0x0?_0x24e7a1(0x226):'removed')+_0x24e7a1(0x348)),currentCoins=_0x503107,currentCoinsAll=_0x4262ff;}await sleep(watchTransactionsInterval);}catch(_0x2ef211){if(!exchangeStopped)await handleError(_0x2ef211,_0x24e7a1(0x329));}else await sleep(0x64);}}async function loadSymbols(_0x5f43b1=config[_0x3c477d(0x2dc)],_0x2c0efc=![]){const _0xbb4b2f=_0x3c477d;if(allSymbols&&!_0x2c0efc)return;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0xbb4b2f(0x2b1)](markets)[_0xbb4b2f(0x306)](_0x3ae5bb=>{const _0x38ed36=_0xbb4b2f;_0x3ae5bb[0x1][_0x38ed36(0x33e)]&&_0x3ae5bb[0x1][_0x38ed36(0x28d)]&&allSymbols[_0x38ed36(0x36e)](_0x3ae5bb[0x0]);});}catch(_0x26ecf1){throw _0x26ecf1;}}async function initclient(){const _0x1d009b=_0x3c477d;emitLoadingProgress(),proxyEmit(_0x1d009b(0x285),emittedConfiguration()),proxyEmit(_0x1d009b(0x2d4),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x539544=getNormalizedPerformance();emitPerformance(_0x539544),getStartingBalances(_0x539544);}async function toggleBotMode(){const _0x5814fe=_0x3c477d;let _0x466b47=dbConfig[_0x5814fe(0x2c2)](_0x5814fe(0x23f))[_0x5814fe(0x318)]({'botID':botID})['value']();if(_0x466b47){const _0x10b5ec=!_0x466b47[_0x5814fe(0x1f1)];dbConfig[_0x5814fe(0x2c2)](_0x5814fe(0x23f))[_0x5814fe(0x318)]({'botID':botID})[_0x5814fe(0x354)]({'headless':_0x10b5ec})[_0x5814fe(0x204)](),config['headless']=_0x10b5ec,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3f0d7e=_0x3c477d;process[_0x3f0d7e(0x31d)]({'updatebotmanager':!![]},_0x1c3548=>{});}async function loadCoins(_0x2b121e){const _0x46f15c=_0x3c477d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4132fb,_0x2a988f=0x0,_0x260387=0x0;_0x2b121e['forEach'](_0x39f7b7=>{const _0x5ba2c6=_0x31d9;loading[_0x5ba2c6(0x324)][_0x5ba2c6(0x36e)](_0x39f7b7);}),loadingCanceled=![];let _0x3c2562=![];while(_0x4132fb!=_0x2b121e[_0x46f15c(0x2da)]){_0x4132fb=0x0,_0x2b121e[_0x46f15c(0x306)](_0x34bd45=>{const _0x1ecfe1=_0x46f15c;if(global['ticker'][noslash(_0x34bd45)]){loading['remainingSymbols']=loading[_0x1ecfe1(0x324)][_0x1ecfe1(0x2d2)](_0x4f1e0b=>_0x4f1e0b!=_0x34bd45);if(!watchedSymbols[_0x1ecfe1(0x32b)](_0x34bd45))watchedSymbols[_0x1ecfe1(0x36e)](_0x34bd45);_0x4132fb++;}}),loading[_0x46f15c(0x346)]=Math['round'](_0x4132fb/_0x2b121e[_0x46f15c(0x2da)]*0x64);loading[_0x46f15c(0x346)]!=0x64&&(_0x260387>0x1e*0x5&&(loading[_0x46f15c(0x33c)]=!![],emitLoadingProgress()),_0x260387>0x78*0x5&&!_0x3c2562&&(loading[_0x46f15c(0x326)]=!![],emitLoadingProgress(),_0x3c2562=!![],logHistory(_0x46f15c(0x36f),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x46f15c(0x324)][_0x46f15c(0x36d)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x46f15c(0x36f),_0x46f15c(0x2fc)+loadCoinsRetryInterval/0xea60+_0x46f15c(0x2e2)),pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0xa0f2e7=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x46f15c(0x326)]=!![],emitLoadingProgress();break;}else _0x4132fb!=_0x2a988f&&(_0x2a988f=_0x4132fb,emitLoadingProgress()),_0x260387++,await sleep(0xc8);}_0x4132fb==_0x2b121e[_0x46f15c(0x2da)]&&(coinsLoaded=!![],process['send']({'status':'enabled','live':'running'},_0x4afea1=>{}),_0x3c2562&&logHistory(_0x46f15c(0x2d5),_0x46f15c(0x37b)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x239a81=_0x3c477d;proxyEmit(_0x239a81(0x285),{...emittedConfiguration(),'configstate':_0x239a81(0x22d)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x4bd41a=_0x3c477d;let _0x3a8c27=global[_0x4bd41a(0x310)][stablecoins[_0x4bd41a(0x361)][_0x4bd41a(0x248)]],_0x555289=global[_0x4bd41a(0x310)][stablecoins['usd']['coin']];return{'eur':Number(_0x3a8c27),'usd':Number(_0x555289)};}function capitalize(_0x47a6dd){const _0x3564fa=_0x3c477d;return _0x47a6dd[_0x3564fa(0x292)](0x0,0x1)[_0x3564fa(0x325)]()+_0x47a6dd[_0x3564fa(0x292)](0x1);}function supportedExchanges(){const _0x2e382a=_0x3c477d,_0x14bc9b=['ws','fetchTickers',_0x2e382a(0x23a),_0x2e382a(0x294),_0x2e382a(0x33f),_0x2e382a(0x293),'createOrder',_0x2e382a(0x334),_0x2e382a(0x2f3),_0x2e382a(0x2d6)];let _0x2bf733=[],_0x2f9290=[],_0xf8c056=ccxt['exchanges'];_0xf8c056[_0x2e382a(0x306)](_0x3cfe5a=>{const _0x4a0f6f=_0x2e382a;try{const _0x3dac28=new ccxt[_0x3cfe5a]();if(_0x3dac28['has']['ws'])_0x2f9290[_0x4a0f6f(0x36e)](_0x3dac28);}catch(_0x1a2f78){}}),_0x2f9290[_0x2e382a(0x306)](_0x5cee88=>{const _0x2836e8=_0x2e382a;let _0x339800=0x0;_0x14bc9b[_0x2836e8(0x306)](_0x24f0d5=>{const _0x218151=_0x2836e8;_0x24f0d5 in _0x5cee88[_0x218151(0x22e)]&&_0x5cee88['has'][_0x24f0d5]&&_0x339800++;}),_0x339800==_0x14bc9b[_0x2836e8(0x2da)]&&_0x2bf733['push'](capitalize(_0x5cee88['id']));});let _0x26e9cb=[];return _0xf8c056[_0x2e382a(0x306)](_0x408f24=>{const _0x406992=_0x2e382a;_0x408f24=capitalize(_0x408f24);if(!_0x2bf733[_0x406992(0x32b)](_0x408f24))_0x26e9cb[_0x406992(0x36e)](_0x408f24);}),_0x2bf733;}function setStartDatePerformance(){const _0x45ad86=_0x3c477d;if(config&&config['liquidity'][0x0][_0x45ad86(0x323)][_0x45ad86(0x2da)]!=0x0){const _0x490d02=config[_0x45ad86(0x2c8)][0x0][_0x45ad86(0x323)];dbPerformance[_0x45ad86(0x2c2)](_0x45ad86(0x316))[_0x45ad86(0x318)]({'date':config[_0x45ad86(0x331)]})[_0x45ad86(0x354)]({'coins':_0x490d02})[_0x45ad86(0x204)]();}}async function recreateCoinResults(){const _0x4225a5=_0x3c477d;let _0x110045,_0x2ed799=[];try{const _0xad324a=fns['format'](fns['parseISO'](config[_0x4225a5(0x331)][_0x4225a5(0x2f0)](/\//g,'-')),_0x4225a5(0x359));for(const _0x3eec80 of currentCoins){if(_0x3eec80['coin']!=config[_0x4225a5(0x31f)]){let _0x5705d5=0x0,_0x5b800b,_0xe70b2d;_0x110045=await getAllEventOrders(_0x3eec80[_0x4225a5(0x25e)]);if(_0x110045[_0x4225a5(0x2da)]>0x0)_0x110045[_0x4225a5(0x306)](_0x131af8=>{const _0x211799=_0x4225a5,_0xc22514=_0x3eec80['symbol'][_0x211799(0x32b)](config[_0x211799(0x31f)]+'/');_0x2ed799['push']({'datetime':_0x131af8[_0x211799(0x2a7)],'coin':_0x3eec80[_0x211799(0x248)],'symbol':_0x3eec80['symbol'],'side':_0x131af8[_0x211799(0x319)],'reverse':_0xc22514,'amount':formatResult(_0x131af8['filled'],0x8),'filled':formatResult(_0x131af8[_0x211799(0x283)],0x8),'price':formatResult(_0x131af8[_0x211799(0x321)],0x8)}),_0x5705d5=_0x131af8[_0x211799(0x319)]==_0x211799(0x216)?_0x5705d5+_0x131af8[_0x211799(0x283)]:_0x5705d5-_0x131af8[_0x211799(0x283)];if(!_0xe70b2d)_0xe70b2d=_0x131af8['price'];});_0x5b800b=_0x3eec80[_0x4225a5(0x271)]-_0x5705d5;let _0x25e303;config[_0x4225a5(0x2c8)][_0x4225a5(0x306)](_0x48e2b7=>{const _0x3d4406=_0x4225a5;!_0x25e303&&(_0x25e303=_0x48e2b7[_0x3d4406(0x323)]['find'](_0x3ad96f=>_0x3ad96f[_0x3d4406(0x248)]==_0x3eec80['coin']),_0x25e303&&(_0x5b800b=_0x25e303['number'],_0xe70b2d=_0x25e303['price']));});let _0xc1fd8b=dbCoinResults['get'](_0x4225a5(0x20d))[_0x4225a5(0x318)]({'coin':_0x3eec80['coin']})[_0x4225a5(0x313)]();_0xc1fd8b={'coin':_0x3eec80[_0x4225a5(0x248)],'number':_0x5b800b,'breakeven':_0xe70b2d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x4225a5(0x20d))[_0x4225a5(0x318)]({'coin':_0x3eec80[_0x4225a5(0x248)]})[_0x4225a5(0x354)](_0xc1fd8b)[_0x4225a5(0x204)]();}}_0x2ed799['sort']((_0x2b93a9,_0x4cf8d9)=>_0x2b93a9[_0x4225a5(0x2a7)]>_0x4cf8d9[_0x4225a5(0x2a7)]?0x1:_0x4cf8d9['datetime']>_0x2b93a9[_0x4225a5(0x2a7)]?-0x1:0x0);let _0x2ff63a=0x0;for(let _0x31ac22 of _0x2ed799){await updateCoinResults(_0x31ac22,!![]);}}catch(_0x5a5f93){await handleError(_0x5a5f93,_0x4225a5(0x37e));}}async function getAllEventOrders(_0x2a366f){const _0x2e3b36=_0x3c477d;let _0x375e35=[],_0x211c7a=dbLogs['get'](_0x2e3b36(0x2a5))[_0x2e3b36(0x2d2)](_0x469a0a=>{const _0x5bd743=_0x2e3b36,_0x29c9c4=_0x469a0a['event'][_0x5bd743(0x286)]();return _0x29c9c4[_0x5bd743(0x32b)](_0x2a366f[_0x5bd743(0x286)]())&&(_0x29c9c4[_0x5bd743(0x32b)](_0x5bd743(0x377))&&_0x29c9c4[_0x5bd743(0x32b)](_0x5bd743(0x26a))||_0x29c9c4['includes'](_0x5bd743(0x283))&&_0x29c9c4[_0x5bd743(0x32b)]('order'));})[_0x2e3b36(0x302)](_0x2e3b36(0x2b4))[_0x2e3b36(0x313)]();return _0x211c7a[_0x2e3b36(0x306)](_0x2e69e6=>{const _0x36b4e5=_0x2e3b36,_0x58c15c=_0x2e69e6[_0x36b4e5(0x1ef)]['includes'](_0x36b4e5(0x28b))?_0x36b4e5(0x28b):_0x36b4e5(0x216),_0x1b3d69=/#([0-9]|\.)+\s/i,_0x3504bc=Number(_0x1b3d69['exec'](_0x2e69e6['event'])[0x0][_0x36b4e5(0x372)](0x1)),_0xa123b1=/@([0-9]|\.)+$/i,_0x257e5a=Number(_0xa123b1['exec'](_0x2e69e6['event'])[0x0][_0x36b4e5(0x372)](0x1));_0x375e35[_0x36b4e5(0x36e)]({'datetime':_0x2e69e6[_0x36b4e5(0x2b4)],'coin':symbolToCoin(_0x2a366f),'symbol':_0x2a366f,'side':_0x58c15c,'amount':_0x3504bc,'filled':_0x3504bc,'price':_0x257e5a});}),_0x375e35;}async function getAllOrders(_0x457957,_0x3c35ca){const _0x2474ca=_0x3c477d;let _0x1a15d4=[];while(_0x3c35ca<exchange[_0x2474ca(0x370)]()){const _0x51afe6=0x1f4,_0x52dc25=await exchange[_0x2474ca(0x2f3)](_0x457957,_0x3c35ca,_0x51afe6);if(_0x52dc25[_0x2474ca(0x2da)])_0x3c35ca=_0x52dc25[_0x52dc25[_0x2474ca(0x2da)]-0x1][_0x2474ca(0x1f0)]+0x1,_0x1a15d4=_0x1a15d4[_0x2474ca(0x2c5)](_0x52dc25);else break;}return _0x1a15d4;}async function validate24hChanges(){const _0x1e2d37=_0x3c477d;for(const _0x2caef1 of currentCoins){if(_0x2caef1[_0x1e2d37(0x248)]!=config['basecoin']){let _0x3b6a5e;_0x2caef1[_0x1e2d37(0x266)]?_0x3b6a5e=formatResult((0x1/(global[_0x1e2d37(0x212)][noslash(_0x2caef1[_0x1e2d37(0x25e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3b6a5e=global[_0x1e2d37(0x212)][noslash(_0x2caef1['symbol'])],_0x3b6a5e<config['change24h']&&(logHistory(_0x1e2d37(0x36f),_0x2caef1[_0x1e2d37(0x248)]+_0x1e2d37(0x34d)+_0x3b6a5e+'%'),logHistory(_0x1e2d37(0x36f),_0x1e2d37(0x2ff)),logHistory('error',_0x1e2d37(0x1ff)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4cc7a0,_0x45de81){const _0x321c5b=_0x3c477d;if(!_0x4cc7a0)return!![];const _0x5a28dd=_0x45de81[_0x321c5b(0x2ac)]('.'),_0x338ab6=_0x4cc7a0['split']('.');for(var _0x441d34=0x0;_0x441d34<_0x338ab6[_0x321c5b(0x2da)];_0x441d34++){const _0x84e11=~~_0x338ab6[_0x441d34],_0x2cb741=~~_0x5a28dd[_0x441d34];if(_0x84e11<_0x2cb741)return!![];if(_0x84e11>_0x2cb741)return![];}return![];}async function oneTimeMigration(){const _0x4acf65=_0x3c477d;let _0x408ec6=dbLogs[_0x4acf65(0x2c2)](_0x4acf65(0x32f))[_0x4acf65(0x313)]();if(isOlderVersion(_0x408ec6,_0x4acf65(0x20b))){let _0x31ede0=[];const _0x48b9ca=dbLogs[_0x4acf65(0x2c2)](_0x4acf65(0x2a5))[_0x4acf65(0x313)]();_0x48b9ca[_0x4acf65(0x306)](_0xe8ec7e=>{const _0x249448=_0x4acf65;_0x31ede0[_0x249448(0x36e)]({'time':_0xe8ec7e['time'],'type':_0xe8ec7e[_0x249448(0x2d8)],'event':_0xe8ec7e[_0x249448(0x1ef)]});}),dbLogs[_0x4acf65(0x2c2)]('logs')[_0x4acf65(0x354)](_0x31ede0)[_0x4acf65(0x204)]();}let _0x3568dc=dbConfig[_0x4acf65(0x2c2)](_0x4acf65(0x32f))[_0x4acf65(0x313)]();if(isOlderVersion(_0x3568dc,_0x4acf65(0x20b))){let _0x42e652=dbConfig['get']('bot')[_0x4acf65(0x318)]({'botID':botID})['value']();if(_0x42e652){let _0x3bbc39=[];_0x42e652['portfolio']['forEach'](_0x422257=>{const _0x5496bd=_0x4acf65;_0x3bbc39[_0x5496bd(0x36e)]({'coin':_0x422257['coin'],'number':_0x422257[_0x5496bd(0x281)],'price':_0x422257[_0x5496bd(0x32c)]}),delete _0x422257[_0x5496bd(0x281)],delete _0x422257[_0x5496bd(0x32c)];});if(_0x3bbc39[_0x4acf65(0x2da)]!==0x0)fs[_0x4acf65(0x2ed)](configbackuppath+('starting-balance-'+botID+_0x4acf65(0x365)),JSON['stringify'](_0x3bbc39,null,0x4),function(_0x2a1d50){if(_0x2a1d50){}});const _0x5dd057=(_0xc8b782,_0x4205a6)=>{const _0x356dc9=_0x4acf65;let _0x3bc755=[];_0x4205a6[_0x356dc9(0x306)](_0x4051c2=>{const _0x1062ce=_0x356dc9,_0x209e95=_0xc8b782['find'](_0x3ce22f=>_0x3ce22f['coin']==_0x4051c2[_0x1062ce(0x248)]);if(!_0x209e95)_0x3bc755['push'](_0x4051c2);});let _0x76f0b7=[];return _0xc8b782[_0x356dc9(0x306)](_0xdd3d85=>{const _0x5414d0=_0x356dc9,_0x5017b4=_0x4205a6[_0x5414d0(0x318)](_0x333b1d=>_0x333b1d['coin']==_0xdd3d85[_0x5414d0(0x248)]);if(!_0x5017b4||_0x5017b4[_0x5414d0(0x271)]==0x0&&_0xdd3d85[_0x5414d0(0x271)]!=0x0)_0x76f0b7['push'](_0xdd3d85);}),{'missingDay1':_0x3bc755,'notInDay2':_0x76f0b7};},_0x2bea26=dbPerformance[_0x4acf65(0x2c2)]('data')['cloneDeep']()[_0x4acf65(0x313)]();if(_0x2bea26[_0x4acf65(0x2da)]>0x1){const {missingDay1:_0x3a99ba,notInDay2:_0x2da34b}=_0x5dd057(_0x3bbc39,_0x2bea26[0x1]['coins']);_0x3bbc39=[..._0x3bbc39,..._0x3a99ba],_0x2da34b['forEach'](_0x47b805=>{const _0x367eb2=_0x4acf65;let _0x407a4a=_0x3bbc39[_0x367eb2(0x2db)](_0x57c4e7=>_0x57c4e7[_0x367eb2(0x248)]==_0x47b805[_0x367eb2(0x248)]);_0x407a4a!=-0x1&&_0x3bbc39[_0x367eb2(0x210)](_0x407a4a,0x1);});}_0x3bbc39['sort']((_0x4a3fea,_0x40cb09)=>_0x4a3fea[_0x4acf65(0x248)]>_0x40cb09[_0x4acf65(0x248)]?0x1:_0x40cb09[_0x4acf65(0x248)]>_0x4a3fea[_0x4acf65(0x248)]?-0x1:0x0);let _0x2eef85=[{'date':_0x42e652[_0x4acf65(0x331)],'changes':_0x3bbc39}];_0x2bea26[_0x4acf65(0x2da)]>0x2&&_0x2bea26[_0x4acf65(0x306)]((_0x453257,_0x2e65b0)=>{const _0x59ca5a=_0x4acf65;if(_0x2e65b0>0x0&&_0x2e65b0<_0x2bea26[_0x59ca5a(0x2da)]-0x1){const {missingDay1:_0x585361,notInDay2:_0x1ce33a}=_0x5dd057(_0x2bea26[_0x2e65b0][_0x59ca5a(0x20d)],_0x2bea26[_0x2e65b0+0x1][_0x59ca5a(0x20d)]);_0x3bbc39=[],(_0x585361[_0x59ca5a(0x2da)]!=0x0||_0x1ce33a[_0x59ca5a(0x2da)]!=0x0)&&(_0x585361[_0x59ca5a(0x2da)]!=0x0&&_0x3bbc39[_0x59ca5a(0x36e)](..._0x585361),_0x1ce33a[_0x59ca5a(0x2da)]!=0x0&&(_0x1ce33a[_0x59ca5a(0x306)](_0x446c13=>{const _0x36754e=_0x59ca5a;_0x446c13[_0x36754e(0x271)]=-_0x446c13['number'];}),_0x3bbc39[_0x59ca5a(0x36e)](..._0x1ce33a)),_0x3bbc39['sort']((_0x8e0eff,_0x2f592b)=>_0x8e0eff[_0x59ca5a(0x248)]>_0x2f592b[_0x59ca5a(0x248)]?0x1:_0x2f592b[_0x59ca5a(0x248)]>_0x8e0eff['coin']?-0x1:0x0),_0x2eef85['push']({'date':_0x2bea26[_0x2e65b0+0x1][_0x59ca5a(0x260)],'changes':_0x3bbc39}));}}),dbConfig['get']('bot')['find']({'botID':botID})[_0x4acf65(0x354)]({..._0x42e652,'liquidity':_0x2eef85})['write']();}}if(isOlderVersion(_0x3568dc,'2.6.0')){let _0x59deb9=dbConfig[_0x4acf65(0x2c2)]('bot')['find']({'botID':botID})[_0x4acf65(0x313)]();if(_0x59deb9){const _0x27668c=_0x59deb9[_0x4acf65(0x2dc)],_0x597750=_0x27668c?capitalize(_0x27668c):_0x4acf65(0x349);dbConfig[_0x4acf65(0x2c2)]('bot')[_0x4acf65(0x318)]({'botID':botID})[_0x4acf65(0x354)]({'exchange':_0x597750})[_0x4acf65(0x204)]();}}let _0x1685c1=dbPerformance[_0x4acf65(0x2c2)](_0x4acf65(0x32f))[_0x4acf65(0x313)]();isOlderVersion(_0x1685c1,'2.3.5')&&setStartDatePerformance();let _0x5a3a63=dbCoinResults['get'](_0x4acf65(0x32f))[_0x4acf65(0x313)]();if(isOlderVersion(_0x5a3a63,_0x4acf65(0x378))){let _0x59153e=dbCoinResults[_0x4acf65(0x2c2)]('coins')['value']();if(_0x59153e[_0x4acf65(0x2da)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x31998f=_0x3c477d;dbConfig[_0x31998f(0x27a)]('version',serverversion)['write'](),dbPerformance['set'](_0x31998f(0x32f),serverversion)[_0x31998f(0x204)](),dbLogs[_0x31998f(0x27a)](_0x31998f(0x32f),serverversion)[_0x31998f(0x204)](),dbCoinResults[_0x31998f(0x27a)](_0x31998f(0x32f),serverversion)[_0x31998f(0x204)]();}function getConfiguration(_0x24cce0){const _0x2e9b40=_0x3c477d;let _0x23cfd9=dbConfig[_0x2e9b40(0x2c2)]('bot')['find']({'botID':_0x24cce0})[_0x2e9b40(0x313)]();if(_0x23cfd9){let _0x77199e=![];typeof _0x23cfd9['threshold']==_0x2e9b40(0x256)&&(_0x23cfd9={..._0x23cfd9,'threshold':Number(_0x23cfd9['threshold'])},_0x77199e=!![]),_0x23cfd9[_0x2e9b40(0x287)]==null&&(_0x23cfd9={..._0x23cfd9,'change24h':-0x14},_0x77199e=!![]),!_0x23cfd9[_0x2e9b40(0x350)]&&(_0x23cfd9={..._0x23cfd9,'fiat':_0x2e9b40(0x33b)},_0x77199e=!![]),!_0x23cfd9[_0x2e9b40(0x2ee)]&&(_0x23cfd9={..._0x23cfd9,'onepagemode':settings[_0x2e9b40(0x2ee)]},_0x77199e=!![]),!_0x23cfd9[_0x2e9b40(0x2a9)]&&(_0x23cfd9={..._0x23cfd9,'colorscheme':_0x2e9b40(0x304)},_0x77199e=!![]),!_0x23cfd9[_0x2e9b40(0x276)]&&(_0x23cfd9={..._0x23cfd9,'autoliquidity':!![]},_0x77199e=!![]),_0x77199e&&(_0x23cfd9={'botID':_0x23cfd9[_0x2e9b40(0x332)],'exchange':_0x23cfd9[_0x2e9b40(0x2dc)],'apiKey':_0x23cfd9[_0x2e9b40(0x30a)],'apiSecret':_0x23cfd9[_0x2e9b40(0x320)],'apiPassword':_0x23cfd9[_0x2e9b40(0x2ca)],'basecoin':_0x23cfd9[_0x2e9b40(0x31f)],'botname':_0x23cfd9[_0x2e9b40(0x26c)],'showname':_0x23cfd9[_0x2e9b40(0x218)],'threshold':_0x23cfd9[_0x2e9b40(0x2a2)],'ordertype':_0x23cfd9[_0x2e9b40(0x26e)],'timeout':_0x23cfd9['timeout'],'fiat':_0x23cfd9[_0x2e9b40(0x350)],'startdate':_0x23cfd9['startdate'],'recreate':_0x23cfd9[_0x2e9b40(0x373)],'timeshift':_0x23cfd9[_0x2e9b40(0x254)],'onepagemode':_0x23cfd9[_0x2e9b40(0x2ee)],'headless':_0x23cfd9[_0x2e9b40(0x1f1)],'cooldown':_0x23cfd9['cooldown'],'change24h':_0x23cfd9[_0x2e9b40(0x287)],'emojibuy':_0x23cfd9[_0x2e9b40(0x234)],'emojisell':_0x23cfd9[_0x2e9b40(0x251)],'colorscheme':_0x23cfd9[_0x2e9b40(0x2a9)],'portfolio':_0x23cfd9[_0x2e9b40(0x23d)],'autoliquidity':_0x23cfd9['autoliquidity'],'liquidity':_0x23cfd9[_0x2e9b40(0x2c8)],'openOrders':_0x23cfd9[_0x2e9b40(0x2b3)]},dbConfig['get'](_0x2e9b40(0x23f))[_0x2e9b40(0x2e4)]()[_0x2e9b40(0x204)](),dbConfig[_0x2e9b40(0x2c2)](_0x2e9b40(0x23f))[_0x2e9b40(0x36e)](_0x23cfd9)[_0x2e9b40(0x204)]());}else _0x23cfd9={'botID':_0x24cce0,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x24cce0,'showname':![],'threshold':0x3,'ordertype':_0x2e9b40(0x377),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x2e9b40(0x254)],'onepagemode':settings[_0x2e9b40(0x2ee)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2e9b40(0x304),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x23cfd9;}function emittedConfiguration(){const _0x555899=_0x3c477d;let _0x27e842;if(config[_0x555899(0x30a)]=='')_0x27e842={...config,'configstate':_0x555899(0x37d)};else config['apiKey']==_0x555899(0x30e)?_0x27e842={...config,'configstate':_0x555899(0x2c3)}:(_0x27e842={...config,'apiKey':_0x555899(0x2fd),'apiSecret':_0x555899(0x2fd)},config['apiPassword']&&(_0x27e842['apiPassword']=_0x555899(0x2fd)));return _0x27e842;}function getSettings(){const _0x3619f8=_0x3c477d;return dbSettings[_0x3619f8(0x2c2)](_0x3619f8(0x366))[_0x3619f8(0x313)]();}function getSecure(){const _0x434d08=_0x3c477d;return dbSecure[_0x434d08(0x2c2)](_0x434d08(0x227))[_0x434d08(0x313)]()||{};}function updateTimeshift(_0x319c23){const _0x24eb19=_0x3c477d;let _0x1f086b=dbConfig[_0x24eb19(0x2c2)](_0x24eb19(0x23f))[_0x24eb19(0x318)]({'botID':botID})[_0x24eb19(0x313)]();_0x1f086b&&dbConfig['get'](_0x24eb19(0x23f))[_0x24eb19(0x318)]({'botID':botID})[_0x24eb19(0x354)]({'timeshift':_0x319c23})[_0x24eb19(0x204)](),config[_0x24eb19(0x254)]=_0x319c23,proxyEmit(_0x24eb19(0x285),emittedConfiguration());}function updateOnepagemode(_0x14f881){const _0x5978b1=_0x3c477d;let _0x407df4=dbConfig[_0x5978b1(0x2c2)](_0x5978b1(0x23f))[_0x5978b1(0x318)]({'botID':botID})['value']();_0x407df4&&dbConfig[_0x5978b1(0x2c2)](_0x5978b1(0x23f))[_0x5978b1(0x318)]({'botID':botID})[_0x5978b1(0x354)]({'onepagemode':_0x14f881})['write'](),config[_0x5978b1(0x2ee)]=_0x14f881,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x441256){const _0x5ece38=_0x3c477d;logger[_0x5ece38(0x2cd)](_0x5ece38(0x381));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5ece38(0x2cd)](_0x5ece38(0x22b));let _0x32b78a=[],_0x3ea181=![],_0xb950f=![],_0x2c50ab=[];_0x441256[_0x5ece38(0x23d)][_0x5ece38(0x306)](_0x33a773=>{const _0x77e57e=_0x5ece38;if(!_0x33a773[_0x77e57e(0x2eb)]&&_0x33a773[_0x77e57e(0x248)]!=_0x441256[_0x77e57e(0x31f)])_0x2c50ab[_0x77e57e(0x36e)](_0x33a773['symbol']);}),_0x2c50ab['forEach'](_0x364457=>{const _0x4f53ce=_0x5ece38,_0x384d2e=watchedSymbols[_0x4f53ce(0x32b)](_0x364457);!_0x384d2e&&_0x32b78a['push'](_0x364457);}),_0x2c50ab[_0x5ece38(0x306)](_0x5a92f5=>{const _0x4e89e6=_0x5ece38,_0x1af3c1=currentCoins[_0x4e89e6(0x318)](_0x1e181c=>_0x1e181c[_0x4e89e6(0x25e)]==_0x5a92f5);!_0x1af3c1&&(_0x3ea181=!![]);}),currentCoins[_0x5ece38(0x306)](_0x2d04a5=>{const _0x4ee91e=_0x5ece38;if(_0x2d04a5[_0x4ee91e(0x248)]!=config[_0x4ee91e(0x31f)]){const _0x2d4aaf=_0x2c50ab[_0x4ee91e(0x318)](_0x3ec53c=>_0x3ec53c==_0x2d04a5[_0x4ee91e(0x25e)]);!_0x2d4aaf&&(_0x3ea181=!![]);}}),_0x441256[_0x5ece38(0x23d)][_0x5ece38(0x306)](_0xc50561=>{const _0x168163=_0x5ece38,_0x3a1b95=config['portfolio'][_0x168163(0x318)](_0xc04148=>_0xc04148[_0x168163(0x248)]==_0xc50561['coin']);if(_0x3a1b95&&_0xc50561[_0x168163(0x2e9)]!=_0x3a1b95[_0x168163(0x2e9)])_0xb950f=!![];});let _0x3d435=dbConfig['get']('bot')[_0x5ece38(0x318)]({'botID':botID})['value']();_0x441256={..._0x441256,'apiKey':crypt['decrypt'](secure[_0x5ece38(0x2e6)],_0x441256[_0x5ece38(0x30a)])[_0x5ece38(0x25d)],'apiSecret':crypt[_0x5ece38(0x272)](secure[_0x5ece38(0x2e6)],_0x441256[_0x5ece38(0x320)])['message']};_0x441256[_0x5ece38(0x2ca)]&&(_0x441256[_0x5ece38(0x2ca)]=crypt[_0x5ece38(0x272)](secure['privateKey'],_0x441256[_0x5ece38(0x2ca)])[_0x5ece38(0x25d)]);let _0x34cff3=![];if(_0x3d435){_0x441256[_0x5ece38(0x30a)]==_0x5ece38(0x2fd)?_0x441256[_0x5ece38(0x30a)]=config[_0x5ece38(0x30a)]:_0x34cff3=!![];_0x441256[_0x5ece38(0x320)]==_0x5ece38(0x2fd)?_0x441256[_0x5ece38(0x320)]=config[_0x5ece38(0x320)]:_0x34cff3=!![];if(_0x441256[_0x5ece38(0x2ca)]=='************')_0x441256[_0x5ece38(0x2ca)]=config[_0x5ece38(0x2ca)];else{if(_0x441256['apiPassword'])_0x34cff3=!![];}dbConfig[_0x5ece38(0x2c2)](_0x5ece38(0x23f))[_0x5ece38(0x318)]({'botID':botID})[_0x5ece38(0x354)](_0x441256)[_0x5ece38(0x204)]();}else dbConfig[_0x5ece38(0x2c2)]('bot')[_0x5ece38(0x36e)](_0x441256)['write'](),_0x34cff3=!![],process[_0x5ece38(0x31d)]({'status':_0x5ece38(0x252),'live':_0x5ece38(0x1f5)},_0x273445=>{});process['send']({'botname':_0x441256['botname']},_0x3171f3=>{}),updateBotManager(),config={..._0x441256},proxyEmit(_0x5ece38(0x317)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x34cff3)await reset(_0x32b78a,!![]);else _0x3ea181||_0xb950f?await reset(_0x32b78a,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x59289d){const _0x40974e=_0x3c477d,_0x52619b={...config,'headless':_0x59289d[_0x40974e(0x1f1)]};let _0x3d1e02=dbConfig[_0x40974e(0x2c2)](_0x40974e(0x23f))[_0x40974e(0x318)]({'botID':botID})[_0x40974e(0x313)]();_0x3d1e02&&dbConfig[_0x40974e(0x2c2)](_0x40974e(0x23f))[_0x40974e(0x318)]({'botID':botID})['assign'](_0x52619b)['write'](),config={..._0x52619b},updateBotManager(),proxyEmit(_0x40974e(0x285),emittedConfiguration());}async function storeFiat(_0x585da1){const _0x4cd14a=_0x3c477d,_0x104556={...config,'fiat':_0x585da1};let _0x513ea0=dbConfig[_0x4cd14a(0x2c2)](_0x4cd14a(0x23f))[_0x4cd14a(0x318)]({'botID':botID})[_0x4cd14a(0x313)]();_0x513ea0&&dbConfig['get'](_0x4cd14a(0x23f))['find']({'botID':botID})[_0x4cd14a(0x354)](_0x104556)[_0x4cd14a(0x204)](),config={..._0x104556},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x362cef=_0x3c477d;logger[_0x362cef(0x31a)](_0x362cef(0x1fa));try{if(fs[_0x362cef(0x26d)](path[_0x362cef(0x36d)](configpath,'bot-'+botID+_0x362cef(0x379))))fs[_0x362cef(0x35b)](path[_0x362cef(0x36d)](configpath,_0x362cef(0x382)+botID+_0x362cef(0x379)));if(fs[_0x362cef(0x26d)](path[_0x362cef(0x36d)](configpath,_0x362cef(0x382)+botID+_0x362cef(0x235))))fs['unlinkSync'](path[_0x362cef(0x36d)](configpath,_0x362cef(0x382)+botID+_0x362cef(0x235)));if(fs['existsSync'](path['join'](configpath,_0x362cef(0x382)+botID+_0x362cef(0x24e))))fs['unlinkSync'](path['join'](configpath,_0x362cef(0x382)+botID+_0x362cef(0x24e)));}catch(_0x56edad){if(_0x56edad)logger[_0x362cef(0x31a)]('Error\x20while\x20deleting\x20files:\x20',_0x56edad);}const _0x407daf=getDate();let _0x1fdf57=[];currentCoins[_0x362cef(0x306)](_0x1d1839=>{const _0x1b380a=_0x362cef;_0x1fdf57[_0x1b380a(0x36e)]({'coin':_0x1d1839[_0x1b380a(0x248)],'number':_0x1d1839[_0x1b380a(0x271)],'price':_0x1d1839[_0x1b380a(0x23e)]});});let _0xdfde0c=dbConfig[_0x362cef(0x2c2)]('bot')[_0x362cef(0x318)]({'botID':botID})[_0x362cef(0x313)]();_0xdfde0c&&(dbConfig[_0x362cef(0x2c2)]('bot')[_0x362cef(0x318)]({'botID':botID})['assign']({'liquidity':[{'date':_0x407daf,'changes':_0x1fdf57}]})[_0x362cef(0x204)](),config[_0x362cef(0x2c8)]=[]),process[_0x362cef(0x31d)]({'stop':'restart'},_0x13ca94=>{});}function noslash(_0x5e4fe7){const _0x503868=_0x3c477d;return _0x5e4fe7[_0x503868(0x2f0)]('/','');}function updateHighestFee(_0x499a5d){const _0x2f9d0a=_0x3c477d;if(_0x499a5d[_0x2f9d0a(0x266)]){let _0x4906a2={'filled':_0x499a5d[_0x2f9d0a(0x283)]*_0x499a5d[_0x2f9d0a(0x321)],'amount':_0x499a5d['filled']*_0x499a5d[_0x2f9d0a(0x321)],'side':_0x499a5d[_0x2f9d0a(0x319)]==_0x2f9d0a(0x28b)?_0x2f9d0a(0x216):_0x2f9d0a(0x28b),'price':0x1/_0x499a5d[_0x2f9d0a(0x321)]};_0x499a5d={..._0x499a5d,..._0x4906a2};}const _0xd17016=defaultFee*_0x499a5d['filled']*_0x499a5d['price'];lastFees[_0x2f9d0a(0x2fb)][_0x2f9d0a(0x2da)]===0x14&&lastFees['recent20'][_0x2f9d0a(0x24f)](),lastFees[_0x2f9d0a(0x2fb)][_0x2f9d0a(0x36e)](_0xd17016),lastFees['highest']=Math[_0x2f9d0a(0x2ab)](...lastFees[_0x2f9d0a(0x2fb)]);}async function updateNumberCoinsCcxt(_0x5286cc){const _0x12d956=_0x3c477d;logger[_0x12d956(0x2cd)](_0x12d956(0x1f6)+_0x5286cc[_0x12d956(0x25e)]+_0x12d956(0x2a0)+_0x5286cc[_0x12d956(0x2cc)]+_0x12d956(0x2a0)+_0x5286cc['id']);let _0x53bca7=_0x5286cc[_0x12d956(0x2cc)],_0x1f7301=![];currentCoins[_0x12d956(0x306)](_0x15739d=>{const _0x50769b=_0x12d956;_0x15739d[_0x50769b(0x25e)]==_0x5286cc[_0x50769b(0x25e)]&&(_0x1f7301=!![]);});if(!_0x1f7301)return;const _0x5e599e=currentCoins['find'](_0x2bf5d1=>_0x2bf5d1['symbol']==_0x5286cc['symbol']),_0x136e18=_0xc7933a=>{const _0x5f825f=_0x12d956;if(_0x5e599e)_0x5e599e[_0x5f825f(0x264)]=_0xc7933a;};if(_0x53bca7==_0x12d956(0x2ef))_0x136e18('open');else{if(_0x53bca7==_0x12d956(0x278)){_0x136e18('canceled');const _0x47311e=await getCoins();[currentCoins,currentCoinsAll]=_0x47311e,await getOpenOrders(),handleOpenOrders();}else{if(_0x53bca7==_0x12d956(0x24a)){logger[_0x12d956(0x2cd)](_0x12d956(0x2bb)+_0x5286cc['symbol']+_0x12d956(0x2a0)+_0x5286cc[_0x12d956(0x283)]+_0x12d956(0x2a0)+_0x5286cc['id']);let _0xa7dda7=![];if(lastOrders)for(const _0x1b1179 of lastOrders){const _0x30ef7c=0xc8,_0x3328a3=0x1388;let _0x388279=0x0;while(!_0x1b1179['orderId']&&_0x388279*_0x30ef7c<_0x3328a3){_0x388279++,await sleep(_0x30ef7c);}if(_0x388279>0x0)logger['debug'](_0x12d956(0x29f)+_0x388279*_0x30ef7c/0x3e8+_0x12d956(0x246));if(_0x1b1179[_0x12d956(0x249)]==_0x5286cc['id']){logger[_0x12d956(0x2cd)](_0x12d956(0x291)+_0x5286cc['id']),_0xa7dda7=!![];if(_0x1b1179[_0x12d956(0x283)]==0x0){logger[_0x12d956(0x2cd)](_0x12d956(0x2ce)+_0x5286cc['id']);if(_0x5286cc[_0x12d956(0x30b)])_0x1b1179[_0x12d956(0x321)]=_0x5286cc[_0x12d956(0x30b)];else{if(_0x5286cc[_0x12d956(0x321)])_0x1b1179[_0x12d956(0x321)]=_0x5286cc['price'];else{}}_0x1b1179[_0x12d956(0x283)]=_0x5286cc[_0x12d956(0x283)],updateHighestFee(_0x1b1179),_0x136e18(_0x12d956(0x283)),await validateOrders();if(lockOrders==ORDERS[_0x12d956(0x2a4)]){const _0x33bd51=await getCoins();[currentCoins,currentCoinsAll]=_0x33bd51;}_0x1b1179[_0x12d956(0x2be)]={'currency':_0x5286cc[_0x12d956(0x2be)]?_0x5286cc['fee'][_0x12d956(0x2de)]:null,'cost':_0x5286cc['fee']?_0x5286cc[_0x12d956(0x2be)][_0x12d956(0x1f9)]:0x0},await updateCoinResults(_0x1b1179);}}}if(!_0xa7dda7){logger[_0x12d956(0x2cd)](_0x12d956(0x2e0)+_0x5286cc['id']),_0x136e18(_0x12d956(0x283));const _0x443483=await getCoins();[currentCoins,currentCoinsAll]=_0x443483,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x41b867=JSON[_0x12d956(0x25f)](lastBalances['portfolio']);const _0x430fd2=_0x41b867['find'](_0xe2b69=>_0xe2b69[_0x12d956(0x25e)]==_0x5286cc[_0x12d956(0x25e)]);if(_0x430fd2){if(_0x53bca7==_0x12d956(0x2ef))_0x430fd2[_0x12d956(0x264)]=_0x430fd2[_0x12d956(0x264)]==_0x12d956(0x283)?_0x12d956(0x283):'open';else{if(_0x53bca7=='canceled')_0x430fd2[_0x12d956(0x264)]=_0x430fd2[_0x12d956(0x264)]=='filled'?_0x12d956(0x283):_0x12d956(0x278);else _0x53bca7=='closed'&&(_0x430fd2[_0x12d956(0x264)]=_0x12d956(0x283));}}lastBalances={...lastBalances,'portfolio':JSON[_0x12d956(0x353)](_0x41b867)},proxyEmit(_0x12d956(0x213),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x275859=_0x3c477d;await getOpenOrders();let _0x51309a=![];currentCoins[_0x275859(0x306)](_0x34e18d=>{const _0x12791b=_0x275859;_0x51309a=allOpenOrders[_0x12791b(0x318)](_0x5331d9=>_0x5331d9['symbol']==_0x34e18d[_0x12791b(0x25e)]),_0x34e18d[_0x12791b(0x264)]=_0x51309a?_0x12791b(0x2ef):'none';});}async function getCoins(_0xd323d0=!![],_0x2b859b=config[_0x3c477d(0x31f)]){const _0x39548d=_0x3c477d;let _0x3995fc,_0x540e3f=[],_0x490504=[],_0x628023=[],_0x41262f=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3995fc=await exchange['fetchBalance'](),mybalances=_0x3995fc['total'];for(const [_0x27ad72,_0x44e30b]of Object[_0x39548d(0x2b1)](mybalances)){_0x41262f[_0x39548d(0x36e)](_0x27ad72);}if(_0x2b859b=='')for(const [_0xa7b3ab,_0x253a31]of Object['entries'](mybalances)){_0x253a31!=0x0&&_0x490504[_0x39548d(0x36e)]({'coin':_0xa7b3ab});}else{let _0xf3b8a2=![];for(const [_0xe1104f,_0x5ebfcb]of Object[_0x39548d(0x2b1)](mybalances)){if(_0x41262f[_0x39548d(0x32b)](_0xe1104f)){const _0x5bae8b=config[_0x39548d(0x23d)][_0x39548d(0x318)](_0x14f28f=>_0x14f28f['coin']==_0xe1104f),_0x76126a=_0xe1104f+'/'+_0x2b859b,_0x380ea7=_0x2b859b+'/'+_0xe1104f,_0x370cf2=currentCoins[_0x39548d(0x318)](_0x4d7f01=>_0x4d7f01['coin']==_0xe1104f);_0xf3b8a2=![];if((_0x5ebfcb!=0x0||_0x5bae8b)&&(allSymbols[_0x39548d(0x32b)](_0x76126a)||_0xe1104f==_0x2b859b))_0xe1104f!=_0x2b859b&&_0x540e3f[_0x39548d(0x36e)](_0x76126a),_0x490504[_0x39548d(0x36e)]({'coin':_0xe1104f,'symbol':_0x76126a,'reverse':![],'number':Math[_0x39548d(0x2ab)](_0x5ebfcb+(_0x5bae8b&&_0x5bae8b['offset']||0x0),0x0),'orderstatus':_0x370cf2?_0x370cf2['orderstatus']:_0x39548d(0x305)});else(_0x5ebfcb!=0x0||_0x5bae8b)&&allSymbols[_0x39548d(0x32b)](_0x380ea7)&&(_0xe1104f!=_0x2b859b&&_0x540e3f[_0x39548d(0x36e)](_0x380ea7),_0x490504[_0x39548d(0x36e)]({'coin':_0xe1104f,'symbol':_0x380ea7,'reverse':!![],'number':Math[_0x39548d(0x2ab)](_0x5ebfcb+(_0x5bae8b&&_0x5bae8b[_0x39548d(0x2e9)]||0x0),0x0),'orderstatus':_0x370cf2?_0x370cf2[_0x39548d(0x264)]:_0x39548d(0x305)}));}}}}catch(_0x2f2a2d){if(!_0xd323d0)handleErrorNoStop(_0x2f2a2d,'getCoins()');else await handleError(_0x2f2a2d,_0x39548d(0x2f1));}return _0x628023=cloneDeep(_0x490504),_0x490504=_0x490504[_0x39548d(0x2d2)](_0x5826ba=>{const _0x5dadcc=_0x39548d,_0x1eb649=config[_0x5dadcc(0x23d)][_0x5dadcc(0x318)](_0x3da5d2=>_0x3da5d2[_0x5dadcc(0x248)]==_0x5826ba['coin']);return _0x1eb649&&!_0x1eb649['excluded'];}),[_0x490504,_0x628023];}async function getCoinNumber(_0x43055c){const _0x3fc890=_0x3c477d;let _0x2191ba;try{const _0x470edf=await exchange['fetchBalance']();_0x2191ba=_0x470edf[_0x3fc890(0x29b)][_0x43055c];}catch(_0x43c60d){await handleError(_0x43c60d,_0x3fc890(0x21f));}return _0x2191ba;}async function getOpenOrders(){const _0x2be37c=_0x3c477d;let _0x3af7ab;allOpenOrders=[];try{for(const _0x2be71f of config[_0x2be37c(0x23d)]){!_0x2be71f[_0x2be37c(0x2eb)]&&_0x2be71f['coin']!=config[_0x2be37c(0x31f)]&&(_0x3af7ab=await exchange[_0x2be37c(0x334)](_0x2be71f['symbol']),_0x3af7ab[_0x2be37c(0x2da)]>0x0&&allOpenOrders[_0x2be37c(0x36e)](_0x3af7ab[0x0]));}}catch(_0x4e504f){await handleError(_0x4e504f,_0x2be37c(0x363));}}async function handleOpenOrders(_0x2cfc59=0x0){const _0x218770=_0x3c477d;allOpenOrders[_0x218770(0x2da)]==0x0&&lockOrders==ORDERS[_0x218770(0x2a4)]&&allOrdersPlaced&&(_0x2cfc59==0x0?(logger['debug'](_0x218770(0x368)),_0x2cfc59++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x218770(0x2d7)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x61508e){const _0x3fcc65=_0x3c477d,_0x2693c2=ccxt[_0x61508e[_0x3fcc65(0x2dc)]['toLowerCase']()],_0x235d1e=new _0x2693c2({'apiKey':_0x61508e[_0x3fcc65(0x30a)],'secret':_0x61508e[_0x3fcc65(0x320)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3fcc65(0x28d)}});if(_0x61508e['apiPassword'])_0x235d1e[_0x3fcc65(0x233)]=_0x61508e['apiPassword'];try{await _0x235d1e[_0x3fcc65(0x244)]();}catch(_0x20d8a4){throw _0x20d8a4;}}function cloneDeep(_0x8a46ce){const _0x2be511=_0x3c477d;return JSON[_0x2be511(0x25f)](JSON[_0x2be511(0x353)](_0x8a46ce));}async function getPortfolio(_0x2fcaed){const _0x9724bc=_0x3c477d;let _0x4b796c=[],_0x874d93=[],_0xd3e276=[],_0x4a1226;if(_0x2fcaed[_0x9724bc(0x30a)]!==_0x9724bc(0x2fd)||_0x2fcaed['apiSecret']!==_0x9724bc(0x2fd)||_0x2fcaed[_0x9724bc(0x2ca)]&&_0x2fcaed['apiPassword']!==_0x9724bc(0x2fd)){if(config[_0x9724bc(0x2dc)]){if(_0x2fcaed[_0x9724bc(0x30a)]==_0x9724bc(0x2fd))_0x2fcaed[_0x9724bc(0x30a)]=config[_0x9724bc(0x30a)];if(_0x2fcaed[_0x9724bc(0x320)]==_0x9724bc(0x2fd))_0x2fcaed[_0x9724bc(0x320)]=config[_0x9724bc(0x320)];if(_0x2fcaed[_0x9724bc(0x2ca)]==_0x9724bc(0x2fd))_0x2fcaed[_0x9724bc(0x2ca)]=config['apiPassword'];try{await testAPI(_0x2fcaed);}catch(_0x584037){if(_0x584037[_0x9724bc(0x2a1)]()[_0x9724bc(0x32b)](_0x9724bc(0x239))){logger[_0x9724bc(0x2cd)](_0x9724bc(0x2bd)),proxyEmit(_0x9724bc(0x23d),![]);return;}else{handleError(_0x584037,_0x9724bc(0x295));return;}}}await initExchange(_0x2fcaed[_0x9724bc(0x2dc)],_0x2fcaed['apiKey'],_0x2fcaed[_0x9724bc(0x320)],_0x2fcaed[_0x9724bc(0x2ca)]);try{await loadSymbols(_0x2fcaed[_0x9724bc(0x2dc)],!![]);}catch(_0x3a3bd7){if(_0x3a3bd7['toString']()[_0x9724bc(0x32b)](_0x9724bc(0x239))){proxyEmit('portfolio',![]);return;}else{handleError(_0x3a3bd7,_0x9724bc(0x28e));return;}}const _0x778209=await getCoins(![],_0x2fcaed[_0x9724bc(0x31f)]);_0xd3e276=cloneDeep(_0x778209[0x1]);}else _0xd3e276=cloneDeep(currentCoinsAll);if(_0x2fcaed[_0x9724bc(0x31f)]=='')proxyEmit(_0x9724bc(0x23d),_0xd3e276);else{_0xd3e276[_0x9724bc(0x306)](_0x4c26d2=>{const _0x430aaa=_0x9724bc;if(_0x4c26d2[_0x430aaa(0x248)]!=_0x2fcaed[_0x430aaa(0x31f)])_0x4b796c[_0x430aaa(0x36e)](_0x4c26d2[_0x430aaa(0x25e)]);});try{_0x874d93=await exchange[_0x9724bc(0x340)](_0x4b796c);}catch(_0x1afd9f){if(_0x1afd9f['toString']()[_0x9724bc(0x32b)](_0x9724bc(0x239))){proxyEmit(_0x9724bc(0x23d),![]);return;}else{handleError(_0x1afd9f,_0x9724bc(0x200));return;}}_0xd3e276[_0x9724bc(0x306)](_0x47b935=>{const _0x26e12b=_0x9724bc;_0x47b935[_0x26e12b(0x248)]!=_0x2fcaed[_0x26e12b(0x31f)]?_0x4a1226=_0x47b935[_0x26e12b(0x266)]?0x1/_0x874d93[_0x47b935[_0x26e12b(0x25e)]]['last']:_0x874d93[_0x47b935[_0x26e12b(0x25e)]]['last']:_0x4a1226=0x1,_0x47b935[_0x26e12b(0x321)]=formatResult(_0x4a1226,0x8);}),proxyEmit(_0x9724bc(0x23d),_0xd3e276);}}function truncateTradeAmount(_0x3b3d12,_0x25c31b){const _0x55573e=_0x3c477d;let _0x1d4909=0x0;try{_0x1d4909=exchange[_0x55573e(0x2f8)](_0x3b3d12,_0x25c31b);}catch(_0x5a9812){}return _0x1d4909;}function checkMinimums(_0x39e0ef){const _0x5bb95d=_0x3c477d;let _0x37e28e=!![];const _0x7712f8=!_0x39e0ef['reverse']?markets[_0x39e0ef[_0x5bb95d(0x25e)]][_0x5bb95d(0x255)][_0x5bb95d(0x30c)][_0x5bb95d(0x32d)]:markets[_0x39e0ef[_0x5bb95d(0x25e)]][_0x5bb95d(0x255)][_0x5bb95d(0x1f9)][_0x5bb95d(0x32d)],_0x4c4cbc=!_0x39e0ef['reverse']?markets[_0x39e0ef['symbol']][_0x5bb95d(0x255)][_0x5bb95d(0x1f9)][_0x5bb95d(0x32d)]:markets[_0x39e0ef[_0x5bb95d(0x25e)]]['limits'][_0x5bb95d(0x30c)][_0x5bb95d(0x32d)],_0x3267a7=truncateTradeAmount(_0x39e0ef[_0x5bb95d(0x25e)],_0x39e0ef[_0x5bb95d(0x20f)]);_0x39e0ef[_0x5bb95d(0x20f)]=_0x3267a7;if(Math[_0x5bb95d(0x1fd)](_0x3267a7)<_0x7712f8)_0x37e28e=![];if(Math['abs'](_0x3267a7)*_0x39e0ef[_0x5bb95d(0x23e)]<_0x4c4cbc)_0x37e28e=![];if(_0x39e0ef[_0x5bb95d(0x319)]=='sell'){let _0x4d783d=config['portfolio'][_0x5bb95d(0x318)](_0x1a2762=>_0x1a2762['coin']==_0x39e0ef[_0x5bb95d(0x248)]);if(_0x4d783d['offset']>0x0){if(Math[_0x5bb95d(0x1fd)](_0x3267a7)>_0x39e0ef[_0x5bb95d(0x271)]-_0x4d783d[_0x5bb95d(0x2e9)])_0x37e28e=![];}else{if(Math[_0x5bb95d(0x1fd)](_0x3267a7)>_0x39e0ef[_0x5bb95d(0x271)])_0x37e28e=![];}}if(_0x39e0ef[_0x5bb95d(0x319)]=='buy'){let _0x2c52e2=config[_0x5bb95d(0x23d)]['find'](_0x1be881=>_0x1be881[_0x5bb95d(0x248)]==config[_0x5bb95d(0x31f)]),_0x2599de=currentCoins[_0x5bb95d(0x318)](_0x3238da=>_0x3238da[_0x5bb95d(0x248)]==config[_0x5bb95d(0x31f)]);if(_0x2c52e2[_0x5bb95d(0x2e9)]>0x0){if(Math['abs'](_0x3267a7)*_0x39e0ef[_0x5bb95d(0x23e)]>_0x2599de[_0x5bb95d(0x271)]-_0x2c52e2[_0x5bb95d(0x2e9)])_0x37e28e=![];}else{if(Math['abs'](_0x3267a7)*_0x39e0ef[_0x5bb95d(0x23e)]>_0x2599de[_0x5bb95d(0x271)])_0x37e28e=![];}}return _0x37e28e;}async function getBalances(_0x5fe4fd=!![]){const _0x4e8a71=_0x3c477d;let _0x16f4b1=0x0,_0x497910;const _0x1f6f08=config[_0x4e8a71(0x2a2)];if(config[_0x4e8a71(0x1f1)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x4e8a71(0x306)](_0x201753=>{const _0x13a657=_0x4e8a71;if(_0x201753['coin']!=config[_0x13a657(0x31f)]){let _0xac3832=global[_0x13a657(0x310)][noslash(_0x201753[_0x13a657(0x25e)])];_0x497910=_0x201753[_0x13a657(0x266)]?0x1/_0xac3832:_0xac3832;}else _0x497910=0x1;let _0x4cb7fa=_0x201753[_0x13a657(0x271)]*_0x497910;_0x16f4b1+=_0x4cb7fa,_0x201753[_0x13a657(0x23e)]=formatResult(Number(_0x497910),0x8),_0x201753[_0x13a657(0x313)]=_0x4cb7fa;}),currentCoins[_0x4e8a71(0x306)](_0x12a887=>{const _0x1b2296=_0x4e8a71;let _0xa976eb=config[_0x1b2296(0x23d)][_0x1b2296(0x318)](_0x335b11=>_0x335b11[_0x1b2296(0x248)]==_0x12a887[_0x1b2296(0x248)]),_0x9e46d5=Number(_0xa976eb['distribution']),_0x47f3d9=_0x12a887['value']/_0x16f4b1*0x64,_0x298696=_0x9e46d5*_0x16f4b1/0x64/_0x12a887['last']-_0x12a887[_0x1b2296(0x271)];_0x12a887[_0x1b2296(0x2b0)]=formatResult(_0x47f3d9,0x3),_0x12a887[_0x1b2296(0x355)]=formatResult(_0x9e46d5,0x3),_0x12a887['trade']=formatResult(_0x298696,0x8),_0x12a887[_0x1b2296(0x319)]='',_0x12a887['valid']=![];if(_0x12a887[_0x1b2296(0x248)]!=config['basecoin']){if(_0x12a887[_0x1b2296(0x2b0)]>_0x9e46d5)_0x12a887[_0x1b2296(0x319)]=_0x1b2296(0x28b),_0x12a887['valid']=checkMinimums(_0x12a887);else _0x12a887['distribution']<_0x9e46d5&&(_0x12a887['side']=_0x1b2296(0x216),_0x12a887[_0x1b2296(0x2e5)]=checkMinimums(_0x12a887));}_0x12a887[_0x1b2296(0x259)]=_0x12a887[_0x1b2296(0x2b0)]/_0x12a887['target']-0x1;if(_0x12a887['orderstatus']=='filled'||_0x12a887[_0x1b2296(0x264)]==_0x1b2296(0x278))_0x12a887[_0x1b2296(0x264)]='none';}),currentCoins[_0x4e8a71(0x35e)]((_0x405317,_0x27ca05)=>_0x405317[_0x4e8a71(0x259)]<_0x27ca05['delta']?0x1:_0x27ca05[_0x4e8a71(0x259)]<_0x405317[_0x4e8a71(0x259)]?-0x1:0x0);const _0xd4e508=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xd4e508[_0x4e8a71(0x361)],'usd':_0xd4e508[_0x4e8a71(0x35f)],'portfolio':JSON[_0x4e8a71(0x353)](currentCoins),'threshold':_0x1f6f08},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x5fe4fd){if(config[_0x4e8a71(0x1f1)])headlessMode({'portfolio':currentCoins,'threshold':_0x1f6f08});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1f6f08});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x46b2eb=getNormalizedPerformance();getStartingBalances(_0x46b2eb),emitPerformance(_0x46b2eb);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x3f9aab=getNormalizedPerformance();emitPerformance(_0x3f9aab),getStartingBalances(_0x3f9aab),logger[_0x4e8a71(0x2cd)](_0x4e8a71(0x2b2));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x32b617=_0x3c477d;if(!lastBalances)return;let _0x2dd6df=[],_0x3dcb33,_0x87995c=JSON[_0x32b617(0x25f)](lastBalances[_0x32b617(0x23d)]);_0x87995c[_0x32b617(0x35e)]((_0x5dde94,_0x202f53)=>_0x5dde94[_0x32b617(0x248)]>_0x202f53[_0x32b617(0x248)]?0x1:_0x202f53[_0x32b617(0x248)]>_0x5dde94[_0x32b617(0x248)]?-0x1:0x0),_0x87995c['forEach'](_0xfc5fcf=>{const _0x5a57f1=_0x32b617;let _0x341bbb={'coin':_0xfc5fcf[_0x5a57f1(0x248)],'number':_0xfc5fcf[_0x5a57f1(0x271)],'price':_0xfc5fcf[_0x5a57f1(0x23e)]};_0x2dd6df[_0x5a57f1(0x36e)](_0x341bbb);});const _0x20249a=await getFiat();_0x3dcb33={'date':lastBalances[_0x32b617(0x2b4)][_0x32b617(0x2ac)]('\x20')[0x0],'eur':_0x20249a[_0x32b617(0x361)],'usd':_0x20249a[_0x32b617(0x35f)],'coins':_0x2dd6df};let _0x565f4c=dbPerformance[_0x32b617(0x2c2)](_0x32b617(0x316))['find']({'date':_0x3dcb33[_0x32b617(0x260)]})[_0x32b617(0x313)]();_0x565f4c?_0x3dcb33['date']!=config[_0x32b617(0x331)]&&dbPerformance[_0x32b617(0x2c2)](_0x32b617(0x316))[_0x32b617(0x318)]({'date':_0x3dcb33[_0x32b617(0x260)]})[_0x32b617(0x354)](_0x3dcb33)[_0x32b617(0x204)]():dbPerformance[_0x32b617(0x2c2)](_0x32b617(0x316))[_0x32b617(0x36e)](_0x3dcb33)[_0x32b617(0x204)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1a1b85=_0x3c477d;let _0x3654a6=[];if(dbPerformance['has'](_0x1a1b85(0x316))[_0x1a1b85(0x313)]()){let _0x177e4f=dbPerformance[_0x1a1b85(0x2c2)](_0x1a1b85(0x316))[_0x1a1b85(0x2a8)]()[_0x1a1b85(0x2d2)](_0x3f377d=>{if(_0x3f377d['coins']['length']==0x0)return![];else return!![];})[_0x1a1b85(0x302)](_0x1a1b85(0x260))[_0x1a1b85(0x313)](),_0x2e4b85=[...config['liquidity']];_0x2e4b85['sort']((_0x43f005,_0x4158fe)=>_0x43f005['date']>_0x4158fe['date']?-0x1:_0x4158fe[_0x1a1b85(0x260)]>_0x43f005[_0x1a1b85(0x260)]?0x1:0x0);let _0x2e6c00=0x1,_0x503151=[],_0x597ad9=0x0;_0x177e4f[_0x1a1b85(0x372)]()[_0x1a1b85(0x266)]()[_0x1a1b85(0x306)]((_0x10bce0,_0x435f8c)=>{const _0x4189a5=_0x1a1b85;if(_0x2e4b85[_0x597ad9]){if(_0x177e4f[_0x177e4f[_0x4189a5(0x2da)]-_0x435f8c]&&_0x2e4b85[_0x597ad9][_0x4189a5(0x260)]==_0x177e4f[_0x177e4f[_0x4189a5(0x2da)]-_0x435f8c][_0x4189a5(0x260)]){if(_0x435f8c<_0x177e4f[_0x4189a5(0x2da)]){let _0x544987=0x0,_0x1a4fc9=0x0;_0x177e4f[_0x177e4f['length']-_0x435f8c]['coins']['forEach'](_0xf2826e=>{const _0x545ed8=_0x4189a5;_0x1a4fc9+=_0xf2826e[_0x545ed8(0x271)]*_0xf2826e[_0x545ed8(0x321)];}),_0x2e4b85[_0x597ad9][_0x4189a5(0x323)][_0x4189a5(0x306)](_0x3f7180=>{const _0x24a319=_0x4189a5;_0x544987+=_0x3f7180[_0x24a319(0x271)]*_0x3f7180[_0x24a319(0x321)];}),_0x2e6c00*=_0x544987/(_0x1a4fc9-_0x544987)+0x1;}_0x597ad9++;}}let _0x420b42=0x0;_0x10bce0[_0x4189a5(0x20d)][_0x4189a5(0x306)](_0x39571b=>{const _0x4f87fd=_0x4189a5;_0x420b42+=_0x39571b[_0x4f87fd(0x271)]*_0x39571b[_0x4f87fd(0x321)];}),_0x503151[_0x177e4f[_0x4189a5(0x2da)]-_0x435f8c-0x1]=_0x420b42*(_0x2e6c00-0x1);});let _0x295d0e=[];_0x2e4b85=[...config[_0x1a1b85(0x2c8)]]||[];let _0x318407=0x0;_0x597ad9=0x0,_0x177e4f['forEach']((_0x12b54f,_0x970dd2)=>{const _0xf53b5d=_0x1a1b85;if(_0x2e4b85[_0x597ad9]){const _0x133d0c=fns[_0xf53b5d(0x25f)](_0x2e4b85[_0x597ad9][_0xf53b5d(0x260)],_0xf53b5d(0x2c1),new Date()),_0x37fbb8=fns[_0xf53b5d(0x25f)](_0x12b54f[_0xf53b5d(0x260)],_0xf53b5d(0x2c1),new Date());if(fns[_0xf53b5d(0x312)](_0x133d0c,_0x37fbb8)){let _0x4257c8=0x0;_0x2e4b85[_0x597ad9][_0xf53b5d(0x323)][_0xf53b5d(0x306)](_0x28d9e1=>{const _0xc14b77=_0xf53b5d;!_0x295d0e[_0x28d9e1['coin']]?_0x295d0e[_0x28d9e1[_0xc14b77(0x248)]]=_0x28d9e1[_0xc14b77(0x271)]:(_0x4257c8=_0x295d0e[_0x28d9e1['coin']],_0x295d0e[_0x28d9e1['coin']]+=_0x28d9e1['number']);const _0xa018d8=_0x12b54f[_0xc14b77(0x20d)][_0xc14b77(0x318)](_0x5e8ef6=>_0x5e8ef6[_0xc14b77(0x248)]==_0x28d9e1['coin']);(!_0xa018d8||_0xa018d8[_0xc14b77(0x271)]==0x0)&&(_0x318407+=(-_0x28d9e1[_0xc14b77(0x271)]-_0x4257c8)*_0x28d9e1[_0xc14b77(0x321)]);}),_0x597ad9++;}}_0x12b54f[_0xf53b5d(0x20d)][_0xf53b5d(0x306)]((_0x36e52a,_0x5074f9)=>{const _0x1cdd00=_0xf53b5d;_0x295d0e[_0x36e52a[_0x1cdd00(0x248)]]&&(_0x36e52a[_0x1cdd00(0x37d)]=_0x295d0e[_0x36e52a['coin']]);}),_0x3654a6['push']({'date':_0x12b54f[_0xf53b5d(0x260)],'eur':_0x12b54f[_0xf53b5d(0x361)],'usd':_0x12b54f['usd'],'offset':_0x503151[_0x970dd2],'netoffset':_0x318407,'coins':_0x12b54f[_0xf53b5d(0x20d)]});});}return _0x3654a6;}function emitPerformance(_0x56ba97){const _0x3e5a9e=_0x3c477d;_0x56ba97['length']!==0x0?(proxyEmit('performance',_0x56ba97),lastPerformanceEmitted=getDate()):proxyEmit(_0x3e5a9e(0x384),[]);}function getPerf(_0x3b9b0c,_0xa428b0){const _0x4c3580=_0x3c477d;let _0x4e0dc2=0x0,_0x18ce8a=0x0,_0x47b108=0x0;_0x3b9b0c[_0x4c3580(0x20d)][_0x4c3580(0x306)](_0x1cff7f=>{_0x4e0dc2+=_0x1cff7f['number']*_0x1cff7f['price'];});_0xa428b0&&(_0x4e0dc2+=_0x3b9b0c[_0x4c3580(0x2e9)]);if(config['basecoin']===_0x4c3580(0x214)||config[_0x4c3580(0x31f)]===_0x4c3580(0x30d))_0x18ce8a=_0x4e0dc2*_0x3b9b0c['eur'],_0x47b108=_0x4e0dc2*_0x3b9b0c[_0x4c3580(0x35f)];else{if(usdBasecoins[_0x4c3580(0x32b)](config[_0x4c3580(0x31f)]))_0x18ce8a=_0x4e0dc2*_0x3b9b0c[_0x4c3580(0x361)]/_0x3b9b0c[_0x4c3580(0x35f)],_0x47b108=_0x4e0dc2;else config[_0x4c3580(0x31f)]==='EUR'&&(_0x18ce8a=_0x4e0dc2,_0x47b108=_0x4e0dc2*_0x3b9b0c[_0x4c3580(0x35f)]/_0x3b9b0c[_0x4c3580(0x361)]);}return[_0x4e0dc2,_0x18ce8a,_0x47b108];}function getKPIs(_0x134f5c,_0x1af4b1=_0x3c477d(0x2bf)){const _0xd53310=_0x3c477d,_0x4df2b=config[_0xd53310(0x31f)],_0x265778=lastBalances,_0x28ad0c=currentCoins,_0x22daf0=getNormalizedPerformance(),_0x4d1162=_0x134f5c===_0xd53310(0x31f)?_0x4df2b:_0x134f5c===_0xd53310(0x350)||_0x134f5c===_0xd53310(0x242)?_0x1af4b1:_0xd53310(0x35c)+_0x4df2b,_0x437a81=_0x134f5c===_0xd53310(0x277)?'Net\x20effect':_0x134f5c===_0xd53310(0x242)?'Net\x20effect':_0x4d1162+_0xd53310(0x263),_0x3404cb=_0x134f5c==='net-basecoin'||_0x134f5c===_0xd53310(0x242)?_0xd53310(0x303):_0x4d1162+'\x20change';let _0x3a3b79=0x0;_0x28ad0c[_0xd53310(0x306)](_0x1cdc74=>{const _0x33a15a=_0xd53310;_0x3a3b79+=_0x1cdc74[_0x33a15a(0x271)]*_0x1cdc74[_0x33a15a(0x23e)];});if(_0x134f5c===_0xd53310(0x350)||_0x134f5c===_0xd53310(0x242)){if(_0x4df2b===_0xd53310(0x214)||_0x4df2b===_0xd53310(0x30d))_0x3a3b79=_0x3a3b79*(_0x1af4b1===_0xd53310(0x2bf)?_0x265778[_0xd53310(0x361)]:_0x265778[_0xd53310(0x35f)]);else{if(usdBasecoins[_0xd53310(0x32b)](_0x4df2b))_0x3a3b79=_0x3a3b79*(_0x1af4b1===_0xd53310(0x2bf)?_0x265778[_0xd53310(0x361)]/_0x265778['usd']:0x1);else _0x4df2b===_0xd53310(0x2bf)&&(_0x3a3b79=_0x3a3b79*(_0x1af4b1===_0xd53310(0x2bf)?0x1:_0x265778[_0xd53310(0x35f)]/_0x265778[_0xd53310(0x361)]));}}let _0x15bda3;if(_0x3a3b79!==0x0){if(_0x134f5c===_0xd53310(0x31f))_0x15bda3=(_0x3a3b79/startingBalances['basecoin']-0x1)*0x64;else{if(_0x1af4b1===_0xd53310(0x2bf))_0x15bda3=(_0x3a3b79/startingBalances[_0xd53310(0x361)]-0x1)*0x64;else _0x15bda3=(_0x3a3b79/startingBalances[_0xd53310(0x35f)]-0x1)*0x64;}let _0x5b5348=0x0;if(startingBalances[_0xd53310(0x20d)])_0x28ad0c[_0xd53310(0x306)](_0x5a2293=>{const _0x587e3e=_0xd53310;let _0x469c40=startingBalances['coins'][_0x587e3e(0x318)](_0x48ced9=>_0x48ced9[_0x587e3e(0x248)]===_0x5a2293['coin']);if(_0x469c40&&_0x469c40[_0x587e3e(0x248)]&&_0x5a2293['number']!==0x0)_0x5b5348+=_0x469c40[_0x587e3e(0x271)]*_0x5a2293[_0x587e3e(0x23e)];});let _0x27686b=0x0;if(_0x22daf0['length']!==0x0){let _0x4d11c8=_0x22daf0[_0x22daf0['length']-0x1];_0x27686b=_0x4d11c8[_0xd53310(0x383)];}_0x5b5348-=_0x27686b;_0x134f5c===_0xd53310(0x277)&&(_0x15bda3=(_0x3a3b79-_0x5b5348)/startingBalances[_0xd53310(0x31f)]*0x64,_0x3a3b79=_0x3a3b79-_0x5b5348);if(_0x134f5c===_0xd53310(0x242)){let _0x18fe93=_0x1af4b1===_0xd53310(0x2bf)?startingBalances[_0xd53310(0x361)]:startingBalances['usd'];if(_0x4df2b===_0xd53310(0x214)||_0x4df2b===_0xd53310(0x30d))_0x5b5348=_0x1af4b1===_0xd53310(0x2bf)?_0x5b5348*_0x265778[_0xd53310(0x361)]:_0x5b5348*_0x265778[_0xd53310(0x35f)];else{if(usdBasecoins['includes'](_0x4df2b))_0x5b5348=_0x1af4b1==='EUR'?_0x5b5348*_0x265778[_0xd53310(0x361)]/_0x265778[_0xd53310(0x35f)]:_0x5b5348;else _0x4df2b===_0xd53310(0x2bf)&&(_0x5b5348=_0x1af4b1===_0xd53310(0x2bf)?_0x5b5348:_0x5b5348*_0x265778[_0xd53310(0x35f)]/_0x265778['eur']);}_0x15bda3=(_0x3a3b79-_0x5b5348)/_0x18fe93*0x64,_0x3a3b79=_0x3a3b79-_0x5b5348;}if(_0x15bda3){if(_0x15bda3<0x64)_0x15bda3=_0x15bda3[_0xd53310(0x2b8)](0x2);else{if(_0x15bda3<0x3e8)_0x15bda3=_0x15bda3[_0xd53310(0x2b8)](0x1);else _0x15bda3=_0x15bda3[_0xd53310(0x2b8)](0x0);}}else _0x15bda3=Number('0')['toFixed'](0x2);if(_0x3a3b79){if(Math['abs'](_0x3a3b79)<0.000001)_0x3a3b79=_0x3a3b79[_0xd53310(0x2b8)](0x2);else{if(Math[_0xd53310(0x1fd)](_0x3a3b79)<0.1)_0x3a3b79=_0x3a3b79['toFixed'](0x6);else{if(Math[_0xd53310(0x1fd)](_0x3a3b79)<0x1)_0x3a3b79=_0x3a3b79[_0xd53310(0x2b8)](0x5);else{if(Math[_0xd53310(0x1fd)](_0x3a3b79)<0xa)_0x3a3b79=_0x3a3b79[_0xd53310(0x2b8)](0x4);else{if(Math[_0xd53310(0x1fd)](_0x3a3b79)<0x64)_0x3a3b79=_0x3a3b79['toFixed'](0x3);else{if(Math['abs'](_0x3a3b79)<0x3e8)_0x3a3b79=_0x3a3b79[_0xd53310(0x2b8)](0x2);else _0x3a3b79=_0x3a3b79[_0xd53310(0x2b8)](0x2);}}}}}}else _0x3a3b79=Number('0')[_0xd53310(0x2b8)](0x2);}else _0x15bda3=Number('0')[_0xd53310(0x2b8)](0x2);return{'value':_0x3a3b79,'change':_0x15bda3,'leftTxt':_0x437a81,'rightTxt':_0x3404cb};}async function getStartingBalances(_0xffc53c,_0x4ed5c3=!![]){const _0x2b15a9=_0x3c477d;if(_0xffc53c['length']!==0x0){const [_0x592372,_0x5ba0c3,_0x3057ba]=getPerf(_0xffc53c[0x0],!![]);let _0x1949a2=[];config[_0x2b15a9(0x23d)][_0x2b15a9(0x306)](_0x3a2fcc=>{const _0x4b5b83=_0x2b15a9;let _0x20c51a=0x0,_0x126165;config[_0x4b5b83(0x2c8)]['forEach'](_0x589769=>{const _0x4bd083=_0x4b5b83;let _0x25adc6=_0x589769[_0x4bd083(0x323)][_0x4bd083(0x318)](_0x2a67f7=>_0x2a67f7['coin']==_0x3a2fcc[_0x4bd083(0x248)]);if(_0x25adc6){_0x20c51a+=_0x25adc6['number'];if(!_0x126165)_0x126165=_0x25adc6['price'];}}),_0x1949a2[_0x4b5b83(0x36e)]({'coin':_0x3a2fcc[_0x4b5b83(0x248)],'number':_0x20c51a,'initialprice':_0x126165});});const _0x5872ce={'basecoin':_0x592372,'eur':_0x5ba0c3,'usd':_0x3057ba,'coins':_0x1949a2};if(_0x4ed5c3)proxyEmit('starting-balances',_0x5872ce);startingBalances=_0x5872ce;}}function headlessMode(_0x3408c8){const _0x293574=_0x3c477d;let _0x18d931=_0x3408c8[_0x293574(0x23d)],_0x3e8dff=_0x3408c8[_0x293574(0x2a2)],_0x4118a6=[];for(let _0x296ca5 of _0x18d931){if(_0x296ca5[_0x293574(0x248)]!=config[_0x293574(0x31f)]){if(_0x296ca5[_0x293574(0x259)]>=_0x3e8dff/0x64){if(_0x296ca5[_0x293574(0x2e5)])_0x4118a6[_0x293574(0x36e)](_0x296ca5);}else{if(_0x296ca5[_0x293574(0x259)]<=-_0x3e8dff/0x64){if(_0x296ca5[_0x293574(0x2e5)])_0x4118a6['push'](_0x296ca5);}}}}_0x4118a6[_0x293574(0x2da)]>0x0&&placeOrder(_0x4118a6);}function notifyBalance(_0x4c0434){const _0x166989=_0x3c477d;let _0x3da1de=_0x4c0434[_0x166989(0x23d)],_0x71724f=_0x4c0434[_0x166989(0x2a2)],_0x2c95dd=[];for(let _0x23fe37 of _0x3da1de){if(_0x23fe37['coin']!=config[_0x166989(0x31f)]){if(_0x23fe37['delta']>=_0x71724f/0x64){if(_0x23fe37['valid'])_0x2c95dd[_0x166989(0x36e)](_0x23fe37);}else{if(_0x23fe37[_0x166989(0x259)]<=-_0x71724f/0x64){if(_0x23fe37[_0x166989(0x2e5)])_0x2c95dd[_0x166989(0x36e)](_0x23fe37);}}}}if(_0x2c95dd[_0x166989(0x2da)]>0x0){let _0x1a025d=_0x2c95dd['map'](_0x58dd91=>_0x58dd91['coin']);_0x1a025d[_0x166989(0x35e)]();let _0x5d0d48=_0x1a025d[_0x166989(0x36d)](',\x20');if(!lastCoinsToBalance)logHistory(_0x166989(0x1f4),_0x166989(0x307));lastCoinsToBalance=_0x5d0d48;}}function symbolToCoin(_0x2f7c02){const _0x4ae355=_0x3c477d;let _0x4d43a3;if(_0x2f7c02[_0x4ae355(0x32b)]('/'+config[_0x4ae355(0x31f)]))_0x4d43a3=_0x2f7c02['replace']('/'+config[_0x4ae355(0x31f)],'');if(_0x2f7c02['includes'](config['basecoin']+'/'))_0x4d43a3=_0x2f7c02[_0x4ae355(0x2f0)](config[_0x4ae355(0x31f)]+'/','');return _0x4d43a3;}async function unlockOrders(){const _0x3f0fa0=_0x3c477d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3f0fa0(0x2a4)]){logger[_0x3f0fa0(0x2cd)](_0x3f0fa0(0x257)),lockOrders=ORDERS[_0x3f0fa0(0x2bc)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x168ea9=await getCoins();[currentCoins,currentCoinsAll]=_0x168ea9,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x3f0fa0(0x279)],logger[_0x3f0fa0(0x2cd)](_0x3f0fa0(0x362));}}async function validateOrders(_0x22225b){const _0x470719=_0x3c477d;if(_0x22225b)validateOrdersState=_0x22225b;logger['debug'](_0x470719(0x21a)+validateOrdersState+_0x470719(0x224)+(lockOrders==0x1?_0x470719(0x315):lockOrders==0x2?'ORDERS.UNLOCKING':_0x470719(0x2af)));let _0x146d64=[],_0xc927b7=config[_0x470719(0x26e)]==_0x470719(0x377)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x470719(0x33c)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x470719(0x369)+validateOrdersState),lastOrders[_0x470719(0x306)](_0x57188d=>{const _0x53b952=_0x470719;let _0x384f8c=![];_0x57188d['filled']>0x0&&(_0x384f8c=!![]),_0x146d64['push'](_0x384f8c),_0x384f8c&&config[_0x53b952(0x26e)]!=_0x53b952(0x377)&&logHistory(_0x53b952(0x26a),_0x53b952(0x261)+_0x57188d[_0x53b952(0x25e)]+'\x20'+_0x57188d[_0x53b952(0x319)]+'\x20#'+formatResult(_0x57188d[_0x53b952(0x283)],0x8)+'\x20@'+formatResult(_0x57188d['price'],0x8));}),_0x146d64['forEach']((_0x3cd180,_0x23febe)=>{const _0x38ec1a=_0x470719;if(_0x3cd180)lastOrders[_0x38ec1a(0x210)](_0x23febe,0x1);}),persistOpenOrders(lastOrders);const _0x450afe=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x470719(0x2f7);if(validateOrdersState=='initial'){validateOrdersState=_0x470719(0x2b9);if(_0x146d64[_0x470719(0x32b)](![])){if(config[_0x470719(0x26e)]==_0x470719(0x377)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x470719(0x2b9)){if(_0x146d64[_0x470719(0x32b)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x470719(0x377)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x470719(0x262))_0x146d64[_0x470719(0x32b)](![])&&(config[_0x470719(0x26e)]==_0x470719(0x377)?logHistory(_0x470719(0x2d5),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0xc927b7*validateOrderInterval/0xea60)+_0x470719(0x2aa)+_0x450afe):(await cancelOrders(),logHistory(_0x470719(0x2d5),_0x470719(0x229)+Math[_0x470719(0x336)](_0xc927b7*validateOrderInterval/0xea60)+_0x470719(0x2aa)+_0x450afe))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x470719(0x26e)]!=_0x470719(0x377))logHistory(_0x470719(0x2d5),'No\x20more\x20open\x20orders\x20-\x20'+_0x450afe);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0xe00d32=>{const _0x19266f=_0x31d9;try{const _0x544e98=await exchange[_0x19266f(0x293)](_0xe00d32[_0x19266f(0x249)],_0xe00d32[_0x19266f(0x25e)]);}catch(_0x36e49c){if(_0x36e49c['toString']()[_0x19266f(0x32b)]('OrderNotFound')){}else await handleError(_0x36e49c,_0x19266f(0x2a3));}});}async function initCoinResults(_0x3b2524){const _0x510acc=_0x3c477d;_0x3b2524?logger[_0x510acc(0x2cd)](_0x510acc(0x258)+_0x3b2524):logger['debug'](_0x510acc(0x21d)),config['portfolio'][_0x510acc(0x306)](_0x138a2b=>{const _0x3ff939=_0x510acc;if(!_0x138a2b[_0x3ff939(0x2eb)]&&_0x138a2b[_0x3ff939(0x248)]!=config[_0x3ff939(0x31f)]){const _0x18e008=currentCoins['find'](_0x385f5a=>_0x385f5a['coin']==_0x138a2b[_0x3ff939(0x248)]),_0x3b76ef=global[_0x3ff939(0x310)][noslash(_0x138a2b[_0x3ff939(0x25e)])];let _0x2c505e=_0x18e008?_0x18e008['number']:null,_0x16ba42=_0x138a2b[_0x3ff939(0x266)]?0x1/_0x3b76ef:_0x3b76ef,_0x12bc5c;config[_0x3ff939(0x2c8)]['forEach'](_0x5f45b2=>{const _0x31e049=_0x3ff939;!_0x12bc5c&&(_0x12bc5c=_0x5f45b2[_0x31e049(0x323)][_0x31e049(0x318)](_0xdb3077=>_0xdb3077[_0x31e049(0x248)]==_0x138a2b[_0x31e049(0x248)]),_0x12bc5c&&(_0x2c505e=_0x12bc5c[_0x31e049(0x271)],_0x16ba42=_0x12bc5c[_0x31e049(0x321)]));});let _0x467e2b=dbCoinResults[_0x3ff939(0x2c2)](_0x3ff939(0x20d))[_0x3ff939(0x318)]({'coin':_0x138a2b['coin']})[_0x3ff939(0x313)]();if(!_0x467e2b){const _0x3be34e={'coin':_0x138a2b[_0x3ff939(0x248)],'number':_0x2c505e,'breakeven':_0x16ba42,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3ff939(0x2c2)](_0x3ff939(0x20d))[_0x3ff939(0x36e)](_0x3be34e)[_0x3ff939(0x204)]();}else{if(_0x3b2524&&_0x138a2b[_0x3ff939(0x248)]==_0x3b2524){const _0x9e3882={'coin':_0x138a2b['coin'],'number':_0x2c505e,'breakeven':_0x16ba42,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3ff939(0x2c2)]('coins')['find']({'coin':_0x138a2b[_0x3ff939(0x248)]})[_0x3ff939(0x354)](_0x9e3882)['write']();}}}});}async function updateCoinResults(_0x1ae088,_0x17bf6a=![]){const _0x5c2024=_0x3c477d;let _0x18d2ac,_0x154743,_0x32bec4,_0x3fc679,_0x5733b0,_0x251d51,_0x2dcf58=dbCoinResults[_0x5c2024(0x2c2)](_0x5c2024(0x20d))['find']({'coin':_0x1ae088[_0x5c2024(0x248)]})[_0x5c2024(0x313)](),_0x2855b5=![];Object['entries'](_0x2dcf58)[_0x5c2024(0x306)](([_0x25c5ac,_0x4bd511])=>{if(_0x4bd511==null)_0x2855b5=!![];});(!_0x2dcf58||_0x2855b5)&&(await initCoinResults(_0x1ae088[_0x5c2024(0x248)]),_0x2dcf58=dbCoinResults[_0x5c2024(0x2c2)](_0x5c2024(0x20d))[_0x5c2024(0x318)]({'coin':_0x1ae088[_0x5c2024(0x248)]})[_0x5c2024(0x313)]());_0x1ae088[_0x5c2024(0x266)]&&(_0x251d51={'filled':_0x1ae088[_0x5c2024(0x283)]*_0x1ae088[_0x5c2024(0x321)],'amount':_0x1ae088[_0x5c2024(0x283)]*_0x1ae088[_0x5c2024(0x321)],'side':_0x1ae088[_0x5c2024(0x319)]==_0x5c2024(0x28b)?_0x5c2024(0x216):_0x5c2024(0x28b),'price':0x1/_0x1ae088[_0x5c2024(0x321)]},_0x1ae088={..._0x1ae088,..._0x251d51});_0x17bf6a?_0x154743=_0x1ae088[_0x5c2024(0x319)]=='buy'?_0x2dcf58[_0x5c2024(0x271)]+_0x1ae088[_0x5c2024(0x283)]:_0x2dcf58[_0x5c2024(0x271)]-_0x1ae088[_0x5c2024(0x283)]:_0x154743=await getCoinNumber(_0x1ae088[_0x5c2024(0x248)]);if(_0x1ae088[_0x5c2024(0x2be)]&&_0x1ae088[_0x5c2024(0x2be)]['currency']==config[_0x5c2024(0x31f)])_0x18d2ac=_0x1ae088[_0x5c2024(0x2be)][_0x5c2024(0x1f9)];else{if(_0x1ae088[_0x5c2024(0x2be)]&&_0x1ae088[_0x5c2024(0x2be)]['currency']==_0x5c2024(0x269)&&!_0x17bf6a)_0x18d2ac=_0x1ae088[_0x5c2024(0x2be)][_0x5c2024(0x1f9)]*global[_0x5c2024(0x310)][_0x5c2024(0x269)+config['basecoin']];else _0x18d2ac=defaultFee*_0x1ae088['filled']*_0x1ae088[_0x5c2024(0x321)];}_0x1ae088[_0x5c2024(0x319)]=='buy'?(_0x32bec4=_0x154743!=0x0?(_0x2dcf58[_0x5c2024(0x301)]*_0x2dcf58[_0x5c2024(0x271)]+_0x1ae088['price']*(_0x154743-_0x2dcf58['number'])+_0x18d2ac)/_0x154743:0x0,_0x3fc679=_0x2dcf58['realized']):(_0x32bec4=_0x154743!=0x0?(_0x2dcf58[_0x5c2024(0x301)]*_0x2dcf58['number']-_0x1ae088[_0x5c2024(0x321)]*(_0x2dcf58['number']-_0x154743)+_0x18d2ac)/_0x154743:0x0,_0x3fc679=_0x2dcf58[_0x5c2024(0x2c4)]+(_0x1ae088[_0x5c2024(0x321)]-_0x2dcf58[_0x5c2024(0x301)])*_0x1ae088[_0x5c2024(0x283)]);_0x5733b0=(_0x1ae088['price']-_0x32bec4-_0x18d2ac/_0x1ae088['filled'])*_0x154743;let _0x19edeb={'coin':_0x1ae088[_0x5c2024(0x248)],'number':_0x154743,'breakeven':formatResult(_0x32bec4,0x8),'realized':formatResult(_0x3fc679,0x8),'unrealized':formatResult(_0x5733b0,0x8),'fees':formatResult(_0x2dcf58[_0x5c2024(0x232)]+_0x18d2ac,0x8),'sells':_0x1ae088['side']==_0x5c2024(0x28b)?_0x2dcf58[_0x5c2024(0x2b5)]+0x1:_0x2dcf58['sells'],'buys':_0x1ae088[_0x5c2024(0x319)]==_0x5c2024(0x216)?_0x2dcf58[_0x5c2024(0x333)]+0x1:_0x2dcf58[_0x5c2024(0x333)]};dbCoinResults['get']('coins')[_0x5c2024(0x318)]({'coin':_0x1ae088['coin']})['assign'](_0x19edeb)[_0x5c2024(0x204)]();if(!_0x17bf6a){if(_0x1ae088[_0x5c2024(0x2be)]&&_0x1ae088[_0x5c2024(0x2be)]['currency']==_0x5c2024(0x269)){const _0x14c671=currentCoins[_0x5c2024(0x318)](_0x4587f2=>_0x4587f2[_0x5c2024(0x248)]==_0x5c2024(0x269));if(_0x14c671){let _0x444f72=dbCoinResults[_0x5c2024(0x2c2)](_0x5c2024(0x20d))[_0x5c2024(0x318)]({'coin':_0x5c2024(0x269)})[_0x5c2024(0x313)]();_0x19edeb={..._0x444f72,'number':_0x14c671[_0x5c2024(0x271)]},dbCoinResults[_0x5c2024(0x2c2)](_0x5c2024(0x20d))[_0x5c2024(0x318)]({'coin':_0x5c2024(0x269)})[_0x5c2024(0x354)](_0x19edeb)['write']();}}}}function _0x31d9(_0x2c16fa,_0x11300c){const _0x32a162=_0x1b42();return _0x31d9=function(_0x3d093d,_0xc20984){_0x3d093d=_0x3d093d-0x1ef;let _0x1b42c0=_0x32a162[_0x3d093d];return _0x1b42c0;},_0x31d9(_0x2c16fa,_0x11300c);}async function placeOrder(_0x82fae3){const _0x3738de=_0x3c477d,_0x131770=config[_0x3738de(0x26e)]==_0x3738de(0x377)?_0x3738de(0x377):'limit';if(lockOrders==ORDERS[_0x3738de(0x279)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3738de(0x2a4)],allOrdersPlaced=![],validateOrdersState=_0x3738de(0x37d);let _0xbbf9a5=![];lastOrders=[];for(const _0x28cd2b of _0x82fae3){let _0x53023e,_0x34a4a1,_0x509202,_0x4f4d60,_0x2db6b0,_0x2ac211=_0x28cd2b[_0x3738de(0x25e)];try{const _0x2579d0=await exchange[_0x3738de(0x23a)](_0x2ac211);_0x53023e=_0x28cd2b[_0x3738de(0x266)]?0x1/_0x28cd2b['last']:_0x28cd2b['last'],_0x34a4a1=_0x2579d0[_0x3738de(0x206)],_0x509202=_0x2579d0[_0x3738de(0x299)];_0x28cd2b[_0x3738de(0x266)]?(_0x4f4d60=_0x28cd2b['side']==_0x3738de(0x216)?_0x3738de(0x28b):_0x3738de(0x216),_0x2db6b0=Math['abs'](_0x28cd2b[_0x3738de(0x20f)])/_0x53023e):(_0x4f4d60=_0x28cd2b[_0x3738de(0x319)],_0x2db6b0=Math[_0x3738de(0x1fd)](_0x28cd2b[_0x3738de(0x20f)]));_0x131770==_0x3738de(0x2e7)&&(config[_0x3738de(0x26e)]==_0x3738de(0x24b)&&(_0x53023e=_0x4f4d60==_0x3738de(0x216)?_0x34a4a1:_0x509202),config[_0x3738de(0x26e)]==_0x3738de(0x222)&&(_0x53023e=_0x4f4d60==_0x3738de(0x216)?_0x509202:_0x34a4a1));_0x2db6b0=formatResult(_0x2db6b0,0x8),_0x53023e=formatResult(_0x53023e,0x8);const _0x223eeb=_0x4f4d60=='sell'?config['emojisell']?String[_0x3738de(0x35a)]('0x'+config[_0x3738de(0x251)])+'\x20':'':config['emojibuy']?String[_0x3738de(0x35a)]('0x'+config[_0x3738de(0x234)])+'\x20':'',_0x560557=_0x131770==_0x3738de(0x377)?_0x3738de(0x27c):config[_0x3738de(0x26e)]==_0x3738de(0x24b)?_0x3738de(0x34a):_0x3738de(0x290),_0x21afdc=(Math[_0x3738de(0x35d)](Math[_0x3738de(0x322)]()*0x35a4e900)+0x5f5e100)[_0x3738de(0x2a1)]();lastOrders['push']({'customId':_0x21afdc,'symbol':_0x2ac211,'coin':_0x28cd2b[_0x3738de(0x248)],'amount':_0x2db6b0,'price':_0x53023e,'side':_0x4f4d60,'reverse':_0x28cd2b['reverse'],'filled':0x0});if(_0x131770==_0x3738de(0x377))logHistory(_0x3738de(0x26a),''+_0x223eeb+_0x560557+'\x20order:\x20'+_0x2ac211+'\x20'+_0x4f4d60+'\x20#'+formatResult(_0x2db6b0,0x8)+'\x20@'+formatResult(_0x53023e,0x8));else logHistory(_0x3738de(0x26a),''+_0x223eeb+_0x560557+_0x3738de(0x2b6)+_0x2ac211+'\x20'+_0x4f4d60+'\x20#'+formatResult(_0x2db6b0,0x8)+'\x20@'+formatResult(_0x53023e,0x8));const _0x321035=await exchange['createOrder'](_0x2ac211,_0x131770,_0x4f4d60,_0x2db6b0,_0x53023e);logger[_0x3738de(0x2cd)](_0x3738de(0x2c6)+_0x321035['id']+_0x3738de(0x2f9)+_0x21afdc);const _0xf9f866=lastOrders[_0x3738de(0x2da)]-0x1;if(_0xf9f866>=0x0&&lastOrders[_0xf9f866][_0x3738de(0x34f)]==_0x21afdc){lastOrders[_0xf9f866]['orderId']=_0x321035['id'];if(_0x321035['amount'])lastOrders[_0xf9f866][_0x3738de(0x30c)]=_0x321035[_0x3738de(0x30c)];if(_0x321035['price'])lastOrders[_0xf9f866][_0x3738de(0x321)]=_0x321035[_0x3738de(0x321)];lastOrders[_0xf9f866][_0x3738de(0x2be)]=_0x321035['fee'];}if(config['cooldown']!=0x0){let _0x59bbdc=null;if(cooldownTracker['length']==config[_0x3738de(0x374)]-0x1)_0x59bbdc=cooldownTracker[_0x3738de(0x24f)]();const _0x3ad681=getTimeStamp();cooldownTracker[_0x3738de(0x36e)](_0x3ad681);if(_0x59bbdc){const _0xc929ed=fns[_0x3738de(0x2fa)](new Date(_0x3ad681),new Date(_0x59bbdc));if(_0xc929ed<cooldownInterval){logHistory('error',_0x3738de(0x36b)+config[_0x3738de(0x374)]+_0x3738de(0x308)+cooldownInterval/0x3c+_0x3738de(0x250)+cooldownPeriod/(0xe10*0x3e8)+_0x3738de(0x273)),coolingDown=!![];break;}}}}catch(_0x3c8818){if(_0x3c8818[_0x3738de(0x2a1)]()[_0x3738de(0x32b)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x5898fb=>_0x5898fb['symbol']!=_0x2ac211),logHistory(_0x3738de(0x36f),_0x3738de(0x328)+_0x2ac211),_0xbbf9a5=!![];else{if(_0x3c8818[_0x3738de(0x2a1)]()[_0x3738de(0x32b)](_0x3738de(0x267)))lastOrders=lastOrders[_0x3738de(0x2d2)](_0x302112=>_0x302112[_0x3738de(0x25e)]!=_0x2ac211),logHistory(_0x3738de(0x36f),_0x3738de(0x253)+_0x2ac211),_0xbbf9a5=!![];else{if(_0x3c8818[_0x3738de(0x2a1)]()[_0x3738de(0x32b)]('InvalidOrder'))lastOrders=lastOrders[_0x3738de(0x2d2)](_0x12c084=>_0x12c084[_0x3738de(0x25e)]!=_0x2ac211),logHistory(_0x3738de(0x36f),_0x3738de(0x347)+_0x2ac211),_0xbbf9a5=!![];else _0x3c8818['toString']()[_0x3738de(0x32b)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x3738de(0x2d2)](_0x183e63=>_0x183e63[_0x3738de(0x25e)]!=_0x2ac211),logHistory(_0x3738de(0x36f),_0x3738de(0x328)+_0x2ac211),_0xbbf9a5=!![]):(lastOrders=lastOrders['filter'](_0x2f5d46=>_0x2f5d46[_0x3738de(0x25e)]!=_0x2ac211),await handleError(_0x3c8818,'placeOrder()',_0x2ac211));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3738de(0x2da)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3dfb43=config[_0x3738de(0x26e)]==_0x3738de(0x377)?validateOrderTimeout*0x3c*0x3e8:config[_0x3738de(0x33c)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3dfb43);}else unlockOrders();_0xbbf9a5&&config[_0x3738de(0x1f1)]&&await pauseBot(_0x3738de(0x2ea)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3738de(0x2d5),_0x3738de(0x247)));}else{if(coolingDown)!config[_0x3738de(0x1f1)]&&logHistory(_0x3738de(0x36f),_0x3738de(0x211));else lockOrders!=ORDERS[_0x3738de(0x279)]&&(!config['headless']&&(config[_0x3738de(0x26e)]==_0x3738de(0x377)?logHistory('error',_0x3738de(0x236)):logHistory(_0x3738de(0x36f),_0x3738de(0x219))));}}function persistOpenOrders(_0x2b188b){const _0x5c829d=_0x3c477d,_0xe9487={...config,'openOrders':_0x2b188b};let _0x11548e=dbConfig[_0x5c829d(0x2c2)](_0x5c829d(0x23f))[_0x5c829d(0x318)]({'botID':botID})[_0x5c829d(0x313)]();_0x11548e&&dbConfig[_0x5c829d(0x2c2)](_0x5c829d(0x23f))[_0x5c829d(0x318)]({'botID':botID})[_0x5c829d(0x354)](_0xe9487)['write']();}function restoreOrders(){const _0x52be1b=_0x3c477d;let _0x237e67;config[_0x52be1b(0x2b3)]&&allOpenOrders[_0x52be1b(0x306)](_0x47cea5=>{const _0x5732e7=_0x52be1b,_0x3f5907=config['openOrders']['find'](_0x37c020=>_0x37c020[_0x5732e7(0x249)]==_0x47cea5['id']);_0x3f5907&&(lastOrders[_0x5732e7(0x36e)](_0x3f5907),_0x237e67=_0x47cea5['timestamp']);});if(lastOrders[_0x52be1b(0x2da)]>0x0){lockOrders=ORDERS[_0x52be1b(0x2a4)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x858442=new Date()[_0x52be1b(0x34c)](),_0x573355=config[_0x52be1b(0x26e)]==_0x52be1b(0x377)?validateOrderTimeout*0x3c*0x3e8:config[_0x52be1b(0x33c)]*0x3c*0x3e8;if(_0x237e67+_0x573355>_0x858442){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xab6050=_0x52be1b;validateOrders(_0xab6050(0x262));},_0x237e67+_0x573355-_0x858442);}else validateOrders(_0x52be1b(0x262));}}async function sendMetricsTelegram(){const _0x46fee6=_0x3c477d;if(!coinsLoaded){process[_0x46fee6(0x31d)]({'telegrammsg':_0x46fee6(0x311)},_0x10f2c6=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x33640b='';if(config['showname'])_0x33640b='<b>'+config[_0x46fee6(0x26c)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x33640b=_0x46fee6(0x282)+botID+_0x46fee6(0x34b);const _0x5eb9ef=getKPIs(_0x46fee6(0x31f)),_0x3629af=getKPIs('fiat',config['fiat']),_0x751137=getKPIs(_0x46fee6(0x277)),_0x1827bd=getKPIs(_0x46fee6(0x242),config[_0x46fee6(0x350)]);_0x33640b+='<pre>',_0x33640b+=_0x5eb9ef[_0x46fee6(0x26b)]+'\x20:\x20'+_0x5eb9ef[_0x46fee6(0x313)]+'\x0a',_0x33640b+=_0x5eb9ef['rightTxt']+':\x20'+_0x5eb9ef[_0x46fee6(0x212)]+'%\x0a',_0x33640b+=_0x3629af[_0x46fee6(0x26b)]+_0x46fee6(0x2f2)+_0x3629af[_0x46fee6(0x313)]+'\x0a',_0x33640b+=_0x3629af[_0x46fee6(0x309)]+':\x20'+_0x3629af[_0x46fee6(0x212)]+'%\x0a',_0x33640b+=_0x751137['leftTxt']+':\x20'+_0x751137[_0x46fee6(0x313)]+'\x20('+config[_0x46fee6(0x31f)]+')\x0a',_0x33640b+=_0x751137[_0x46fee6(0x309)]+':\x20'+_0x751137[_0x46fee6(0x212)]+_0x46fee6(0x33a)+config[_0x46fee6(0x31f)]+')\x0a',_0x33640b+=_0x1827bd[_0x46fee6(0x26b)]+':\x20'+_0x1827bd[_0x46fee6(0x313)]+'\x20('+config['fiat']+')\x0a',_0x33640b+=_0x1827bd['rightTxt']+':\x20'+_0x1827bd[_0x46fee6(0x212)]+'%\x20('+config[_0x46fee6(0x350)]+')\x0a',_0x33640b+='</pre>',process[_0x46fee6(0x31d)]({'telegrammsg':_0x33640b},_0x3be8a1=>{});}async function sendPortfolioTelegram(){const _0xf1948f=_0x3c477d;if(!coinsLoaded){process[_0xf1948f(0x31d)]({'telegrammsg':_0xf1948f(0x311)},_0x48a3b5=>{});return;}let _0xd3f733='';if(config[_0xf1948f(0x218)])_0xd3f733=_0xf1948f(0x1f7)+config[_0xf1948f(0x26c)]+_0xf1948f(0x205);else _0xd3f733='<b>Bot\x20'+botID+_0xf1948f(0x205);_0xd3f733+=_0xf1948f(0x1f8),_0xd3f733+=_0xf1948f(0x357),_0xd3f733+=_0xf1948f(0x29c),_0xd3f733+=_0xf1948f(0x357),currentCoins[_0xf1948f(0x306)](_0x281480=>{const _0x4f2941=_0xf1948f;_0xd3f733+=_0x281480[_0x4f2941(0x248)][_0x4f2941(0x2cf)](0x7)+'|\x20'+formatPad(_0x281480['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x281480['target'],0x2,0x6)+'|\x20'+formatPad(_0x281480['delta']*0x64,0x2,0x6)+'\x0a';}),_0xd3f733+=_0xf1948f(0x344),process['send']({'telegrammsg':_0xd3f733},_0x556374=>{});}function formatPad(_0x17f56b,_0x330098,_0x49d77c){const _0x3232c2=_0x3c477d,_0x3aa5df=formatResultString(_0x17f56b,_0x330098);return _0x3aa5df?_0x3aa5df[_0x3232c2(0x34e)](_0x49d77c):''[_0x3232c2(0x34e)](_0x49d77c);}function logHistory(_0x5f1d80,_0x4d8dca,_0x26d5c9=''){const _0xd3a713=_0x3c477d;let _0x3bf10e={'time':getTimeStamp(),'type':_0x5f1d80,'event':_0x4d8dca};dbLogs['get'](_0xd3a713(0x2a5))[_0xd3a713(0x36e)](_0x3bf10e)[_0xd3a713(0x204)]();if(_0x26d5c9=='')_0x26d5c9=_0x4d8dca;proxyEmit(_0xd3a713(0x1ef),{'log':_0x3bf10e,'summary':_0x26d5c9}),process[_0xd3a713(0x31d)]({'telegram':{..._0x3bf10e,'botname':config[_0xd3a713(0x26c)],'showname':config['showname']}},_0x3e325e=>{}),logger[_0xd3a713(0x31a)](''+_0x3bf10e[_0xd3a713(0x1ef)]);}function emitHistory(_0x153762={}){const _0x11b004=_0x3c477d;Object['keys'](_0x153762)[_0x11b004(0x2da)]==0x0&&(_0x153762={'type':[_0x11b004(0x26a),_0x11b004(0x1ef)],'event':'','page':0x1});if(_0x153762[_0x11b004(0x2d8)][_0x11b004(0x32b)](_0x11b004(0x1ef)))_0x153762[_0x11b004(0x2d8)][_0x11b004(0x210)](_0x153762['type'][_0x11b004(0x337)](_0x11b004(0x1ef)),0x1,_0x11b004(0x36f),_0x11b004(0x1f4),_0x11b004(0x2d5));if(dbLogs[_0x11b004(0x22e)]('logs')['value']()){let _0x5e1091=dbLogs[_0x11b004(0x2c2)]('logs')[_0x11b004(0x2d2)](_0x10dbf2=>{const _0x162c34=_0x11b004;if(_0x153762[_0x162c34(0x2d8)][_0x162c34(0x2da)]==0x0)return![];else return _0x153762[_0x162c34(0x2d8)][_0x162c34(0x32b)](_0x10dbf2['type']);})[_0x11b004(0x2d2)](_0x5b5fcc=>{const _0x4c4498=_0x11b004;if(_0x153762[_0x4c4498(0x1ef)]=='')return!![];else return _0x5b5fcc['event']['toLowerCase']()[_0x4c4498(0x32b)](_0x153762['event']['toLowerCase']());})[_0x11b004(0x302)](_0x11b004(0x2b4)),_0x476c34=_0x5e1091[_0x11b004(0x313)]()['length'];_0x5e1091=_0x5e1091[_0x11b004(0x266)]()['slice']((_0x153762[_0x11b004(0x243)]-0x1)*logPageSize,_0x153762[_0x11b004(0x243)]*logPageSize-0x1)[_0x11b004(0x266)]()[_0x11b004(0x313)](),proxyEmit(_0x11b004(0x2fe),{'logs':_0x5e1091,'total':_0x476c34});}else proxyEmit(_0x11b004(0x2fe),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x273b83){const _0x29d358=_0x3c477d;if(dbLogs[_0x29d358(0x22e)](_0x29d358(0x2a5))[_0x29d358(0x313)]()){const _0x530f4f=dbLogs[_0x29d358(0x2c2)](_0x29d358(0x2a5))['sortBy'](_0x29d358(0x2b4))[_0x29d358(0x2d2)](_0x59337e=>{const _0x2d5ace=_0x29d358;return _0x59337e[_0x2d5ace(0x2d8)]=='order';})[_0x29d358(0x313)]();dbLogs['get']('logs')[_0x29d358(0x2e4)]()[_0x29d358(0x204)](),dbLogs[_0x29d358(0x2c2)]('logs')[_0x29d358(0x354)](_0x530f4f)['write'](),emitHistory(_0x273b83);}}async function pauseBot(_0x3151ba=''){const _0x441173=_0x3c477d,_0x53eeb3=new Date()['getTime']();if(!lastErrorShown||_0x53eeb3-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x53eeb3;!lastBotPause?(lastBotPause=_0x53eeb3,consecutivePauses=0x1):(_0x53eeb3-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x441173(0x31d)]({'stop':_0x441173(0x20e)},_0x2b80ee=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3151ba)_0x3151ba+=_0x441173(0x2a0);logHistory(_0x441173(0x36f),_0x3151ba+_0x441173(0x2fc)+pauseBotInterval/0xea60+_0x441173(0x376)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x583681=_0x3c477d;process[_0x583681(0x31d)]({'stop':_0x583681(0x284)},_0x199f51=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x36fb95,_0x3e458a){const _0x30d3fa=_0x3c477d;if(_0x36fb95[_0x30d3fa(0x2a1)]()[_0x30d3fa(0x32b)](_0x30d3fa(0x27b)))return logHistory('error',config[_0x30d3fa(0x2dc)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x36fb95[_0x30d3fa(0x2a1)]()[_0x30d3fa(0x32b)](_0x30d3fa(0x2cb)))return logHistory(_0x30d3fa(0x36f),config[_0x30d3fa(0x2dc)]+_0x30d3fa(0x24d)),![];else{if(_0x36fb95[_0x30d3fa(0x2a1)]()['includes'](_0x30d3fa(0x239)))return logHistory('error',config[_0x30d3fa(0x2dc)]+_0x30d3fa(0x300)),logHistory('error',_0x30d3fa(0x351)),![];else await handleError(_0x36fb95,_0x3e458a);}}}async function handleError(_0x1adeb7,_0x7f2414,_0x50d915=''){const _0x5e3902=_0x3c477d,_0x567819=config[_0x5e3902(0x2dc)]||'Exchange';if(_0x1adeb7[_0x5e3902(0x2a1)]()['includes'](_0x5e3902(0x225))||_0x1adeb7['toString']()[_0x5e3902(0x32b)]('RateLimitExceeded'))await pauseBot(config['exchange']+_0x5e3902(0x22f));else{if(_0x1adeb7['toString']()[_0x5e3902(0x32b)]('ExchangeNotAvailable')||_0x1adeb7[_0x5e3902(0x2a1)]()[_0x5e3902(0x32b)](_0x5e3902(0x289)))await pauseBot(config[_0x5e3902(0x2dc)]+'\x20not\x20available');else{if(_0x1adeb7['toString']()[_0x5e3902(0x32b)](_0x5e3902(0x343)))await pauseBot(config[_0x5e3902(0x2dc)]+_0x5e3902(0x2a6));else{if(_0x1adeb7[_0x5e3902(0x2a1)]()[_0x5e3902(0x32b)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x5e3902(0x2dc)]+_0x5e3902(0x25a));else{if(_0x1adeb7['toString']()[_0x5e3902(0x32b)](_0x5e3902(0x2d0)))logHistory('error',_0x7f2414+_0x5e3902(0x202)),logHistory(_0x5e3902(0x36f),_0x5e3902(0x22c)),await killBot();else{if(_0x1adeb7[_0x5e3902(0x2a1)]()['includes'](_0x5e3902(0x30f)))logHistory('error',_0x7f2414+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x5e3902(0x36f),_0x5e3902(0x22c)),await killBot();else{if(_0x1adeb7 instanceof ccxt[_0x5e3902(0x338)])logger[_0x5e3902(0x2cd)](_0x5e3902(0x37c),_0x1adeb7),await pauseBot(config[_0x5e3902(0x2dc)]+'\x20network\x20error');else{if(_0x1adeb7[_0x5e3902(0x2a1)]()[_0x5e3902(0x32b)](_0x5e3902(0x27b)))logHistory(_0x5e3902(0x36f),_0x7f2414+_0x5e3902(0x2a0)+config[_0x5e3902(0x2dc)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x5e3902(0x36f),_0x5e3902(0x22c)),await killBot();else{if(_0x1adeb7[_0x5e3902(0x2a1)]()[_0x5e3902(0x32b)](_0x5e3902(0x2cb)))logHistory('error',_0x7f2414+_0x5e3902(0x2a0)+config[_0x5e3902(0x2dc)]+_0x5e3902(0x2d3)),logHistory(_0x5e3902(0x36f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1adeb7['toString']()['includes'](_0x5e3902(0x239)))logHistory(_0x5e3902(0x36f),_0x7f2414+_0x5e3902(0x2a0)+config[_0x5e3902(0x2dc)]+_0x5e3902(0x36c)),logHistory(_0x5e3902(0x36f),_0x5e3902(0x22c)),await killBot();else{if(_0x1adeb7[_0x5e3902(0x2a1)]()[_0x5e3902(0x32b)](_0x5e3902(0x238)))logHistory(_0x5e3902(0x36f),_0x7f2414+_0x5e3902(0x25c)+_0x50d915);else _0x1adeb7 instanceof ccxt[_0x5e3902(0x345)]?(logger['debug'](_0x5e3902(0x1f3),_0x1adeb7),logHistory(_0x5e3902(0x36f),_0x7f2414+_0x5e3902(0x2a0)+config[_0x5e3902(0x2dc)]+_0x5e3902(0x29e))):(logger['full'](_0x7f2414+_0x5e3902(0x2dd),_0x1adeb7),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}}}function formatResult(_0x59b183,_0x46110a){const _0x2efac1=_0x3c477d;return parseFloat(_0x59b183[_0x2efac1(0x2b8)](_0x46110a));}function formatResultTruncate(_0x45920d,_0x5f2d13){const _0x36d275=_0x3c477d;let _0x4983f0=formatResultString(_0x45920d,0xa),_0x211886=_0x4983f0[_0x36d275(0x337)]('.');return _0x211886!=-0x1&&(_0x4983f0=_0x4983f0[_0x36d275(0x372)](0x0,_0x211886+_0x5f2d13+0x1)),Number(_0x4983f0);}function formatResultString(_0x261e7f,_0x495c88){const _0x36ab11=_0x3c477d;let _0x272f60;if(!(''+_0x261e7f)['includes']('e'))_0x272f60=+(Math[_0x36ab11(0x336)](_0x261e7f+'e+'+_0x495c88)+'e-'+_0x495c88);else{let _0x10a180=(''+_0x261e7f)[_0x36ab11(0x2ac)]('e'),_0x19ae45='';+_0x10a180[0x1]+_0x495c88>0x0&&(_0x19ae45='+'),_0x272f60=+(Math[_0x36ab11(0x336)](+_0x10a180[0x0]+'e'+_0x19ae45+(+_0x10a180[0x1]+_0x495c88))+'e-'+_0x495c88);}return Number(_0x272f60)[_0x36ab11(0x2b8)](_0x495c88);}function getServerTime(){const _0x126c4b=_0x3c477d,_0x41582a=new Date();return _0x41582a['getFullYear']()+'/'+(_0x41582a[_0x126c4b(0x2e8)]()+0x1)[_0x126c4b(0x2a1)]()['padStart'](0x2,'0')+'/'+_0x41582a[_0x126c4b(0x1fe)]()['toString']()[_0x126c4b(0x34e)](0x2,'0')+'\x20'+_0x41582a[_0x126c4b(0x27e)]()[_0x126c4b(0x2a1)]()[_0x126c4b(0x34e)](0x2,'0')+':'+_0x41582a[_0x126c4b(0x28f)]()[_0x126c4b(0x2a1)]()[_0x126c4b(0x34e)](0x2,'0')+':'+_0x41582a['getSeconds']()[_0x126c4b(0x2a1)]()[_0x126c4b(0x34e)](0x2,'0');}function getTimeStamp(){const _0xe70ec2=_0x3c477d,_0x3fe4e3=shiftedTime();return _0x3fe4e3[_0xe70ec2(0x241)]()+'/'+(_0x3fe4e3['getMonth']()+0x1)['toString']()[_0xe70ec2(0x34e)](0x2,'0')+'/'+_0x3fe4e3[_0xe70ec2(0x1fe)]()['toString']()[_0xe70ec2(0x34e)](0x2,'0')+'\x20'+_0x3fe4e3['getHours']()[_0xe70ec2(0x2a1)]()[_0xe70ec2(0x34e)](0x2,'0')+':'+_0x3fe4e3[_0xe70ec2(0x28f)]()['toString']()[_0xe70ec2(0x34e)](0x2,'0')+':'+_0x3fe4e3[_0xe70ec2(0x1f2)]()[_0xe70ec2(0x2a1)]()[_0xe70ec2(0x34e)](0x2,'0');}function getDate(){const _0x1b506b=_0x3c477d,_0x3586cb=shiftedTime();return _0x3586cb['getFullYear']()+'/'+(_0x3586cb[_0x1b506b(0x2e8)]()+0x1)[_0x1b506b(0x2a1)]()['padStart'](0x2,'0')+'/'+_0x3586cb[_0x1b506b(0x1fe)]()[_0x1b506b(0x2a1)]()[_0x1b506b(0x34e)](0x2,'0');}function getHour(){const _0x4ef1ac=_0x3c477d,_0x10d6aa=shiftedTime();return _0x10d6aa[_0x4ef1ac(0x27e)]()['toString']()[_0x4ef1ac(0x34e)](0x2,'0');}function sleep(_0x2f7ac2){return new Promise(_0x3dab24=>setTimeout(_0x3dab24,_0x2f7ac2));}function shiftedTime(){const _0x5613f4=_0x3c477d,_0x692489=new Date();let _0x2c9150=_0x692489;if(config&&config[_0x5613f4(0x254)]!==0x0)_0x2c9150=fns[_0x5613f4(0x31e)](_0x692489,{'hours':config[_0x5613f4(0x254)]});return _0x2c9150;}function timer(_0x268ce4){const _0x475b79=_0x3c477d,_0x3001d6=new Date();!lasttime?console['log'](getTimeStamp()+_0x475b79(0x24c),_0x268ce4,_0x3001d6):console[_0x475b79(0x230)](getTimeStamp()+_0x475b79(0x24c),_0x268ce4,(_0x3001d6-lasttime)/0x3e8),lasttime=_0x3001d6;}