const _0x385294=_0x15ad;(function(_0x277e77,_0x244552){const _0x3acb49=_0x15ad,_0x599bf6=_0x277e77();while(!![]){try{const _0x23d3f2=-parseInt(_0x3acb49(0x1b1))/0x1+-parseInt(_0x3acb49(0x287))/0x2*(-parseInt(_0x3acb49(0x228))/0x3)+parseInt(_0x3acb49(0x1a8))/0x4+parseInt(_0x3acb49(0x25a))/0x5+parseInt(_0x3acb49(0x1c9))/0x6+parseInt(_0x3acb49(0x238))/0x7*(parseInt(_0x3acb49(0x20e))/0x8)+parseInt(_0x3acb49(0x231))/0x9*(-parseInt(_0x3acb49(0x1c1))/0xa);if(_0x23d3f2===_0x244552)break;else _0x599bf6['push'](_0x599bf6['shift']());}catch(_0x4a81d9){_0x599bf6['push'](_0x599bf6['shift']());}}}(_0x3c14,0x48762));const _0x595072=function(){let _0x45a63d=!![];return function(_0x9c050f,_0x41e109){const _0x1ac466=_0x45a63d?function(){const _0x4e4f48=_0x15ad;if(_0x41e109){const _0x54dd94=_0x41e109[_0x4e4f48(0x244)](_0x9c050f,arguments);return _0x41e109=null,_0x54dd94;}}:function(){};return _0x45a63d=![],_0x1ac466;};}(),_0x527a8b=_0x595072(this,function(){const _0xd44f8e=_0x15ad;return _0x527a8b[_0xd44f8e(0x1a2)]()[_0xd44f8e(0x29b)](_0xd44f8e(0x26e))[_0xd44f8e(0x1a2)]()[_0xd44f8e(0x297)](_0x527a8b)[_0xd44f8e(0x29b)]('(((.+)+)+)+$');});_0x527a8b();'use strict';const ccxt=require(_0x385294(0x2a7)),low=require(_0x385294(0x1d7)),FileSync=require(_0x385294(0x263)),fs=require('fs'),fns=require(_0x385294(0x1e1)),{WebsocketClient,DefaultLogger}=require(_0x385294(0x26f)),Crypt=require(_0x385294(0x1d8))[_0x385294(0x298)];let exchange,wsClient;global[_0x385294(0x252)]={};function _0x15ad(_0x5c79d3,_0x41f70c){const _0x2e91c4=_0x3c14();return _0x15ad=function(_0x527a8b,_0x595072){_0x527a8b=_0x527a8b-0x1a0;let _0x3c14ab=_0x2e91c4[_0x527a8b];return _0x3c14ab;},_0x15ad(_0x5c79d3,_0x41f70c);}let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')['version'],botID=process[_0x385294(0x25d)][0x2]||_0x385294(0x24e),pattern=/^[0-9]{3}$/;if(!pattern[_0x385294(0x29a)](botID))return console[_0x385294(0x235)]('Error:\x20Invalid\x20argument\x20'+botID+_0x385294(0x1d3)),process[_0x385294(0x21c)](0x1);const userID=process[_0x385294(0x25d)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x385294(0x1de);!fs[_0x385294(0x1cc)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x385294(0x1ef)+botID+_0x385294(0x27d),logfile=configpath+_0x385294(0x1ef)+botID+_0x385294(0x28f),performancefile=configpath+_0x385294(0x1ef)+botID+_0x385294(0x1ae),coinresultsfile=configpath+_0x385294(0x1ef)+botID+_0x385294(0x1ca),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x385294(0x21d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x385294(0x28a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x385294(0x28a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x385294(0x1f8)]({'bot':[]})[_0x385294(0x28a)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x385294(0x1f8)]({'coins':[]})[_0x385294(0x28a)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x385294(0x1d2),'symbol':'BTC/EUR'},'usd':{'coin':_0x385294(0x216),'symbol':_0x385294(0x292)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3b6cb9)=>{},'debug':(..._0x3992d9)=>{},'notice':(..._0x255698)=>{},'info':(..._0x5a7609)=>{},'warning':(..._0x2f2a65)=>{},'error':async function(..._0x4c737f){const _0x48b27c=_0x385294,_0x4238b2=new Date()['getTime']();if(!lastErrorShown||_0x4238b2-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x48b27c(0x23d)](),logHistory(_0x48b27c(0x247),_0x48b27c(0x1d1)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x5ac36a='';if(_0x4c737f[0x0])_0x5ac36a+=_0x4c737f[0x0];if(_0x4c737f[0x1]&&_0x4c737f[0x1]['error']&&_0x4c737f[0x1][_0x48b27c(0x247)][_0x48b27c(0x1b5)])_0x5ac36a+=_0x48b27c(0x1b6)+_0x4c737f[0x1][_0x48b27c(0x247)][_0x48b27c(0x1b5)];logging(_0x48b27c(0x1d1)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x5ac36a),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x385294(0x267),'rsaStandard':_0x385294(0x2a8)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x385294(0x246)]!=config[_0x385294(0x246)]&&updateTimeshift(settings[_0x385294(0x246)]);process['send']({'started':_0x385294(0x1fb)}),initializeProcessListeners();function proxyEmit(_0x10497c,_0x3e5d38=null){const _0x1aa126=_0x385294;process[_0x1aa126(0x291)]({'function':_0x10497c,'args':_0x3e5d38});}function initializeProcessListeners(){const _0xe73f0c=_0x385294;process['on'](_0xe73f0c(0x1b5),_0x182b3e=>{const _0xd53a67=_0xe73f0c;switch(Object[_0xd53a67(0x251)](_0x182b3e)[0x0]){case _0xd53a67(0x246):_0x182b3e[_0xd53a67(0x246)]!=undefined&&(settings[_0xd53a67(0x246)]=_0x182b3e['timeshift'],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x182b3e['function']){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x182b3e[_0xd53a67(0x1dd)]);break;case _0xd53a67(0x232):getPortfolio(_0x182b3e[_0xd53a67(0x1dd)]);break;case'storeConfiguration':storeConfiguration(_0x182b3e[_0xd53a67(0x1dd)]);break;case _0xd53a67(0x275):storeHeadless(_0x182b3e[_0xd53a67(0x1dd)]);break;case _0xd53a67(0x250):getStartingBalances();break;case _0xd53a67(0x229):placeOrder(_0x182b3e[_0xd53a67(0x1dd)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1427b3=_0x385294;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x1427b3(0x24b)],config[_0x1427b3(0x217)]);let _0x50c917=await loadSymbols();_0x50c917&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x43b577,_0x4bf5d){const _0x362cee=_0x385294,_0x1b8e56=ccxt[config[_0x362cee(0x284)]];let _0x46cc21;switch(config[_0x362cee(0x284)]){case _0x362cee(0x26f):_0x46cc21='wss://stream.binance.com:9443';break;case _0x362cee(0x236):_0x46cc21=_0x362cee(0x1e6);break;default:_0x46cc21=_0x362cee(0x1fa);}exchange=new _0x1b8e56({'apiKey':_0x43b577,'secret':_0x4bf5d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x43b577,'api_secret':_0x4bf5d,'beautify':!![],'wsUrl':_0x46cc21},logger),config[_0x362cee(0x284)]==_0x362cee(0x236)&&(stablecoins={'eur':{'coin':_0x362cee(0x296),'symbol':_0x362cee(0x266)},'usd':{'coin':_0x362cee(0x216),'symbol':_0x362cee(0x292)}});}async function loadSymbols(){const _0x511c55=_0x385294;let _0x2fea1c;try{markets=await exchange['loadMarkets']();const _0x4ada3d=[_0x511c55(0x205),_0x511c55(0x213),'HOT/EUR'];allSymbols=exchange[_0x511c55(0x1dc)][_0x511c55(0x239)](_0x1659b6=>{let _0x309f7b=![];return _0x4ada3d['forEach'](_0x227481=>{const _0x9423c=_0x15ad;if(_0x1659b6[_0x9423c(0x1bd)](_0x227481))_0x309f7b=!![];}),!_0x309f7b;}),_0x2fea1c=!![];}catch(_0x18d3ab){await handleError(_0x18d3ab,_0x511c55(0x1af)),_0x2fea1c=![];}return _0x2fea1c;}async function initbot(){const _0x345c48=_0x385294;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x557079=dbCoinResults[_0x345c48(0x261)](_0x345c48(0x1c8))[_0x345c48(0x28d)]();if(_0x557079['length']==0x0)await resetCoinResults();}async function initclient(){const _0x2dcf2e=_0x385294;proxyEmit(_0x2dcf2e(0x265),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2dcf2e(0x207),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x166ee6=_0x385294;wsinitialized=![];ws1&&(ws1[_0x166ee6(0x23f)](_0xf70d99=>{const _0x275a47=_0x166ee6;try{wsClient[_0x275a47(0x1ba)](_0xf70d99);}catch(_0x41c67c){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x154b00){}ws2=null;}}async function initws(){const _0x5be0f2=_0x385294;cleanws();let _0x357a7a=[];currentCoins[_0x5be0f2(0x23f)](_0x4e4b5a=>{const _0xc06a9f=_0x5be0f2;if(_0x4e4b5a[_0xc06a9f(0x289)]!=config[_0xc06a9f(0x25e)])_0x357a7a['push'](noslash(_0x4e4b5a[_0xc06a9f(0x25f)]));});if(!_0x357a7a[_0x5be0f2(0x1bd)](stablecoins[_0x5be0f2(0x26d)]['coin']))_0x357a7a[_0x5be0f2(0x1fd)](stablecoins[_0x5be0f2(0x26d)]['coin']);if(!_0x357a7a[_0x5be0f2(0x1bd)](stablecoins[_0x5be0f2(0x20f)]['coin']))_0x357a7a[_0x5be0f2(0x1fd)](stablecoins[_0x5be0f2(0x20f)][_0x5be0f2(0x289)]);if(!_0x357a7a[_0x5be0f2(0x1bd)](_0x5be0f2(0x1e9)+config['basecoin']))_0x357a7a[_0x5be0f2(0x1fd)]('BNB'+config['basecoin']);try{_0x357a7a[_0x5be0f2(0x23f)]((_0x49d20b,_0x470181)=>{const _0x247242=_0x5be0f2;ws1[_0x470181]=wsClient[_0x247242(0x1b9)](_0x49d20b,'1m');}),ws2=wsClient[_0x5be0f2(0x1c7)](),wsClient['on']('formattedMessage',_0x149de9=>{const _0x349cd1=_0x5be0f2;if(!Array[_0x349cd1(0x215)](_0x149de9)&&!_0x149de9['wsKey']['includes']('userData')){if(_0x149de9[_0x349cd1(0x279)]===_0x349cd1(0x1d5)){global[_0x349cd1(0x252)][_0x149de9[_0x349cd1(0x1d5)][_0x349cd1(0x25f)]]=_0x149de9[_0x349cd1(0x1d5)][_0x349cd1(0x264)];return;}}else{if(!Array[_0x349cd1(0x215)](_0x149de9)&&_0x149de9[_0x349cd1(0x1f7)][_0x349cd1(0x1bd)](_0x349cd1(0x212))){if(_0x149de9[_0x349cd1(0x299)][_0x349cd1(0x1bd)]('spot')){updateNumberCoins(_0x149de9);return;}}}}),wsClient['on'](_0x5be0f2(0x1e8),async _0x19b45a=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x2f9521){await handleError(_0x2f9521,'initws()');}let _0x538361,_0x5d590f=0x0;loading[_0x5be0f2(0x2a3)]=[];let _0x1046fd=0x0;currentCoins['forEach'](_0x3cd607=>{const _0x38d051=_0x5be0f2;if(_0x3cd607[_0x38d051(0x289)]!=config[_0x38d051(0x25e)])loading[_0x38d051(0x2a3)]['push'](_0x3cd607[_0x38d051(0x25f)]);}),loadingCanceled=![];while(_0x538361!=currentCoins['length']-0x1){_0x538361=0x0,currentCoins[_0x5be0f2(0x23f)](_0x51bba4=>{const _0x4ee8a8=_0x5be0f2;_0x51bba4[_0x4ee8a8(0x289)]!=config[_0x4ee8a8(0x25e)]&&global[_0x4ee8a8(0x252)][noslash(_0x51bba4[_0x4ee8a8(0x25f)])]&&(loading['remainingSymbols']=loading['remainingSymbols'][_0x4ee8a8(0x239)](_0x1eda1e=>_0x1eda1e!=_0x51bba4[_0x4ee8a8(0x25f)]),_0x538361++);}),loading[_0x5be0f2(0x269)]=Math[_0x5be0f2(0x201)](_0x538361/(currentCoins[_0x5be0f2(0x1aa)]-0x1)*0x64);_0x1046fd>0x1e*0x5&&(loading[_0x5be0f2(0x268)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x5be0f2(0x277)]=!![],emitLoadingProgress();break;}else _0x538361!=_0x5d590f&&(_0x5d590f=_0x538361,emitLoadingProgress()),_0x1046fd++,await sleep(0xc8);}if(_0x538361==currentCoins[_0x5be0f2(0x1aa)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x441d51=_0x385294;let _0x5298c1=0x0,_0x5e6afa=0x0;try{_0x5298c1=global[_0x441d51(0x252)][stablecoins['eur'][_0x441d51(0x289)]],_0x5e6afa=global[_0x441d51(0x252)][stablecoins[_0x441d51(0x20f)][_0x441d51(0x289)]];}catch(_0x59f4a6){await handleError(_0x59f4a6,_0x441d51(0x2a1));}return{'eur':Number(_0x5298c1),'usd':Number(_0x5e6afa)};}async function setStartDatePerformance(_0x53015c){const _0x54c67e=_0x385294,_0x4c064c=fns[_0x54c67e(0x1ee)](new Date(_0x53015c['startdate']),_0x54c67e(0x22a));let _0x1f4c27=[];_0x1f4c27[stablecoins[_0x54c67e(0x26d)][_0x54c67e(0x289)]]=await getCloses(stablecoins['eur'][_0x54c67e(0x25f)],new Date(_0x53015c[_0x54c67e(0x21a)]),0x1),_0x1f4c27[stablecoins[_0x54c67e(0x20f)][_0x54c67e(0x289)]]=await getCloses(stablecoins[_0x54c67e(0x20f)][_0x54c67e(0x25f)],new Date(_0x53015c['startdate']),0x1);let _0x50a89b,_0x1ee3fc=[];_0x53015c[_0x54c67e(0x22e)][_0x54c67e(0x23f)](_0x24d155=>{const _0x26f283=_0x54c67e;!_0x24d155['excluded']&&_0x1ee3fc['push']({'coin':_0x24d155['coin'],'number':_0x24d155['startnumber'],'price':_0x24d155[_0x26f283(0x1bb)]});}),_0x50a89b={'date':_0x4c064c,'eur':_0x1f4c27[stablecoins[_0x54c67e(0x26d)]['coin']][0x0],'usd':_0x1f4c27[stablecoins['usd'][_0x54c67e(0x289)]][0x0],'coins':_0x1ee3fc};let _0x59fde9=dbPerformance[_0x54c67e(0x261)](_0x54c67e(0x1c6))[_0x54c67e(0x1a0)]({'date':_0x4c064c})[_0x54c67e(0x28d)]();_0x59fde9?dbPerformance[_0x54c67e(0x261)](_0x54c67e(0x1c6))['find']({'date':_0x4c064c})[_0x54c67e(0x1ea)](_0x50a89b)[_0x54c67e(0x28a)]():dbPerformance['get'](_0x54c67e(0x1c6))[_0x54c67e(0x1fd)](_0x50a89b)['write'](),_0x59fde9=dbPerformance['get']('data')['sortBy'](_0x54c67e(0x20c))[_0x54c67e(0x28d)](),_0x59fde9[_0x54c67e(0x23f)](_0x482fb8=>{const _0x2a4b22=_0x54c67e;_0x482fb8[_0x2a4b22(0x20c)]<_0x4c064c&&dbPerformance[_0x2a4b22(0x261)]('data')['remove']({'date':_0x482fb8[_0x2a4b22(0x20c)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x8b4bb9){const _0x20b41d=_0x385294;let _0x5a7c73,_0x990ddd=[];logHistory('success',_0x20b41d(0x26b)),_0x8b4bb9[_0x20b41d(0x22e)][_0x20b41d(0x23f)](_0x35d3e2=>{const _0x54aa1c=_0x20b41d;if(_0x35d3e2[_0x54aa1c(0x289)]!=config[_0x54aa1c(0x25e)]&&!_0x35d3e2[_0x54aa1c(0x273)])_0x990ddd['push']({'coin':_0x35d3e2[_0x54aa1c(0x289)],'symbol':_0x35d3e2[_0x54aa1c(0x25f)]});});let _0x43c44d=[];try{const _0x1ea154=fns[_0x20b41d(0x1ee)](fns[_0x20b41d(0x282)](_0x8b4bb9[_0x20b41d(0x21a)]['replace'](/\//g,'-')),_0x20b41d(0x1d4));for(const _0x5ac483 of _0x990ddd){if(_0x5ac483[_0x20b41d(0x289)]!=config['basecoin'])_0x5a7c73=await exchange[_0x20b41d(0x27c)](_0x5ac483[_0x20b41d(0x25f)],Date[_0x20b41d(0x285)](_0x1ea154));_0x5a7c73['forEach'](_0x40f0b2=>{const _0x548ea8=_0x20b41d,_0x38d8cc=_0x5ac483[_0x548ea8(0x25f)][_0x548ea8(0x1bd)](config[_0x548ea8(0x25e)]+'/'),_0x4870f2=fns[_0x548ea8(0x1ee)](fns[_0x548ea8(0x282)](_0x40f0b2[_0x548ea8(0x1eb)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x154083=fns[_0x548ea8(0x1ee)](fns[_0x548ea8(0x282)](_0x40f0b2[_0x548ea8(0x1eb)]),_0x548ea8(0x22a));let _0x54fb64;if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x23c)&&_0x38d8cc==![])_0x54fb64=_0x40f0b2[_0x548ea8(0x262)];if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x23c)&&_0x38d8cc==!![])_0x54fb64=-_0x40f0b2[_0x548ea8(0x262)]*_0x40f0b2['price'];if(_0x40f0b2['side']=='sell'&&_0x38d8cc==![])_0x54fb64=-_0x40f0b2[_0x548ea8(0x262)];if(_0x40f0b2[_0x548ea8(0x1e7)]=='sell'&&_0x38d8cc==!![])_0x54fb64=_0x40f0b2[_0x548ea8(0x262)]*_0x40f0b2['price'];_0x43c44d[_0x548ea8(0x1fd)]({'timestamp':_0x4870f2,'date':_0x154083,'coin':_0x5ac483[_0x548ea8(0x289)],'symbol':_0x5ac483[_0x548ea8(0x25f)],'type':_0x40f0b2[_0x548ea8(0x209)],'side':_0x40f0b2[_0x548ea8(0x1e7)],'reverse':_0x38d8cc,'amount':formatResult(_0x40f0b2['filled'],0x8),'filled':formatResult(_0x40f0b2[_0x548ea8(0x1c5)],0x8),'coinamount':formatResult(_0x54fb64,0x8),'price':formatResult(_0x40f0b2[_0x548ea8(0x1c3)],0x8)});let _0x525681;if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x23c)&&_0x38d8cc==![])_0x525681=-_0x40f0b2[_0x548ea8(0x262)]*_0x40f0b2[_0x548ea8(0x1c3)];if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x23c)&&_0x38d8cc==!![])_0x525681=_0x40f0b2[_0x548ea8(0x262)];if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x27e)&&_0x38d8cc==![])_0x525681=_0x40f0b2[_0x548ea8(0x262)]*_0x40f0b2[_0x548ea8(0x1c3)];if(_0x40f0b2[_0x548ea8(0x1e7)]==_0x548ea8(0x27e)&&_0x38d8cc==!![])_0x525681=-_0x40f0b2['amount'];_0x43c44d[_0x548ea8(0x1fd)]({'date':_0x154083,'coin':config[_0x548ea8(0x25e)],'coinamount':formatResult(_0x525681,0x8)});});}_0x43c44d['sort']((_0x9feb1b,_0x5b6c9e)=>_0x9feb1b['timestamp']>_0x5b6c9e[_0x20b41d(0x242)]?0x1:_0x5b6c9e['timestamp']>_0x9feb1b[_0x20b41d(0x242)]?-0x1:0x0),dbLogs[_0x20b41d(0x261)]('logs')[_0x20b41d(0x2a2)]()[_0x20b41d(0x28a)](),_0x43c44d[_0x20b41d(0x23f)](_0x3fb736=>{const _0xb3d892=_0x20b41d;let _0x530659;_0x3fb736[_0xb3d892(0x289)]!=config[_0xb3d892(0x25e)]&&(_0x530659={'time':_0x3fb736[_0xb3d892(0x242)],'type':_0xb3d892(0x223),'event':'Order:\x20'+_0x3fb736['symbol']+'\x20'+_0x3fb736[_0xb3d892(0x1e7)]+'\x20#'+_0x3fb736[_0xb3d892(0x262)]+'\x20@'+_0x3fb736[_0xb3d892(0x1c3)]},dbLogs[_0xb3d892(0x261)](_0xb3d892(0x2a6))[_0xb3d892(0x1fd)](_0x530659)[_0xb3d892(0x28a)]());});const _0x52a0f8=fns[_0x20b41d(0x254)]({'start':new Date(_0x8b4bb9[_0x20b41d(0x21a)]),'end':new Date()})[_0x20b41d(0x1a5)](_0x577703=>fns[_0x20b41d(0x1ee)](_0x577703,'yyyy/MM/dd'));let _0x6bf26e=[];_0x8b4bb9[_0x20b41d(0x22e)]['forEach'](_0x1c2db9=>{const _0x29c267=_0x20b41d;if(!_0x1c2db9[_0x29c267(0x273)]){_0x6bf26e[_0x1c2db9[_0x29c267(0x289)]]=[];let _0x51fc5e=_0x1c2db9[_0x29c267(0x294)];_0x52a0f8[_0x29c267(0x23f)]((_0x307421,_0x1c7bf6)=>{const _0x21f952=_0x29c267;let _0x5cb51c=_0x43c44d[_0x21f952(0x239)](_0x29eb05=>_0x29eb05[_0x21f952(0x289)]==_0x1c2db9[_0x21f952(0x289)]&&_0x29eb05[_0x21f952(0x20c)]==_0x307421);if(_0x5cb51c['length']!=0x0){let _0x40a66a=_0x5cb51c['reduce']((_0x29f6c4,_0x4c49e7)=>{const _0x489e57=_0x21f952;return _0x29f6c4+=_0x4c49e7[_0x489e57(0x28c)],_0x29f6c4;},0x0);_0x51fc5e+=_0x40a66a;}_0x6bf26e[_0x1c2db9[_0x21f952(0x289)]][_0x307421]=_0x51fc5e;});}});const _0x3f2373=[..._0x990ddd];_0x3f2373['push']({'coin':stablecoins[_0x20b41d(0x26d)]['coin'],'symbol':stablecoins['eur'][_0x20b41d(0x25f)]}),_0x3f2373[_0x20b41d(0x1fd)]({'coin':stablecoins[_0x20b41d(0x20f)]['coin'],'symbol':stablecoins[_0x20b41d(0x20f)][_0x20b41d(0x25f)]});let _0x1846f9=[];for(const _0x4a9677 of _0x3f2373){_0x1846f9[_0x4a9677[_0x20b41d(0x289)]]=await getCloses(_0x4a9677[_0x20b41d(0x25f)],new Date(_0x8b4bb9[_0x20b41d(0x21a)]));}dbPerformance[_0x20b41d(0x261)](_0x20b41d(0x1c6))[_0x20b41d(0x2a2)]()[_0x20b41d(0x28a)](),_0x52a0f8[_0x20b41d(0x23f)]((_0x56f2d5,_0x55ba92)=>{const _0x3ee4ea=_0x20b41d;let _0x30f845,_0x378398=[];_0x55ba92==0x0?(_0x8b4bb9['portfolio'][_0x3ee4ea(0x23f)](_0x584ce2=>{const _0x44ad73=_0x3ee4ea;!_0x584ce2[_0x44ad73(0x273)]&&_0x378398[_0x44ad73(0x1fd)]({'coin':_0x584ce2[_0x44ad73(0x289)],'number':_0x584ce2[_0x44ad73(0x294)],'price':_0x584ce2['startprice']});}),_0x30f845={'date':_0x56f2d5,'eur':_0x1846f9[stablecoins[_0x3ee4ea(0x26d)][_0x3ee4ea(0x289)]][_0x55ba92],'usd':_0x1846f9[stablecoins[_0x3ee4ea(0x20f)]['coin']][_0x55ba92],'coins':_0x378398}):(_0x8b4bb9['portfolio'][_0x3ee4ea(0x23f)](_0x38cc3d=>{const _0x13a622=_0x3ee4ea;!_0x38cc3d[_0x13a622(0x273)]&&_0x378398[_0x13a622(0x1fd)]({'coin':_0x38cc3d[_0x13a622(0x289)],'number':_0x6bf26e[_0x38cc3d[_0x13a622(0x289)]][_0x56f2d5],'price':_0x38cc3d[_0x13a622(0x289)]==config[_0x13a622(0x25e)]?0x1:_0x1846f9[_0x38cc3d[_0x13a622(0x289)]][_0x55ba92]});}),_0x30f845={'date':_0x56f2d5,'eur':_0x1846f9[stablecoins[_0x3ee4ea(0x26d)][_0x3ee4ea(0x289)]][_0x55ba92],'usd':_0x1846f9[stablecoins[_0x3ee4ea(0x20f)][_0x3ee4ea(0x289)]][_0x55ba92],'coins':_0x378398}),dbPerformance[_0x3ee4ea(0x261)](_0x3ee4ea(0x1c6))[_0x3ee4ea(0x1fd)](_0x30f845)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x394e7b of _0x43c44d){_0x394e7b['coin']!=config[_0x20b41d(0x25e)]&&await updateCoinResults(_0x394e7b);}logHistory(_0x20b41d(0x249),_0x20b41d(0x1e5));}catch(_0x24006d){await handleError(_0x24006d,_0x20b41d(0x1db));}}async function getCloses(_0x584262,_0x485996,_0x16bc06=undefined){const _0x21795c=_0x385294,_0x5cabae='1d';let _0x510235,_0x5a7242;const _0x1a2232=fns[_0x21795c(0x1b2)](new Date(),_0x485996)+0x1;try{const _0x29da94=exchange[_0x21795c(0x1b4)]()-_0x1a2232*0x18*0xe10*0x3e8;_0x510235=await exchange[_0x21795c(0x1b8)](_0x584262,_0x5cabae,_0x29da94,_0x16bc06),_0x5a7242=await exchange[_0x21795c(0x1df)](_0x584262);}catch(_0x5aaec0){await handleError(_0x5aaec0,_0x21795c(0x1ed));}let _0x3f70cf=ohlcvToCloses(_0x510235);return _0x3f70cf['push'](_0x5a7242[_0x584262][_0x21795c(0x1e4)]),_0x3f70cf;}function ohlcvToCloses(_0x250c6f){const _0x46cfa7=_0x385294;let _0x551ab1=[];return _0x250c6f[_0x46cfa7(0x23f)](function(_0x101d06){const _0x5dbfdd=_0x46cfa7;_0x551ab1[_0x5dbfdd(0x1fd)](_0x101d06[0x4]);}),_0x551ab1;}function getConfiguration(_0x4ed95c){const _0x2548dd=_0x385294;let _0x4a0290=dbConfig[_0x2548dd(0x261)](_0x2548dd(0x1d9))[_0x2548dd(0x1a0)]({'botID':_0x4ed95c})[_0x2548dd(0x28d)]();if(_0x4a0290){let _0x22f172=![];!_0x4a0290[_0x2548dd(0x284)]&&(_0x4a0290={..._0x4a0290,'exchange':'binance'},_0x22f172=!![]),!_0x4a0290[_0x2548dd(0x25e)]&&(_0x4a0290={..._0x4a0290,'basecoin':'BTC'},_0x22f172=!![]),!_0x4a0290['ordertype']&&(_0x4a0290={..._0x4a0290,'ordertype':_0x2548dd(0x241)},_0x22f172=!![]),!_0x4a0290[_0x2548dd(0x268)]&&(_0x4a0290={..._0x4a0290,'timeout':0x14},_0x22f172=!![]),!_0x4a0290[_0x2548dd(0x276)]&&(_0x4a0290={..._0x4a0290,'emojibuy':''},_0x22f172=!![]),!_0x4a0290['emojisell']&&(_0x4a0290={..._0x4a0290,'emojisell':''},_0x22f172=!![]),!_0x4a0290[_0x2548dd(0x22b)]&&(_0x4a0290={..._0x4a0290,'showname':![]},_0x22f172=!![]),_0x22f172&&(_0x4a0290={'botID':_0x4a0290[_0x2548dd(0x1e3)],'exchange':_0x4a0290[_0x2548dd(0x284)],'apiKey':_0x4a0290['apiKey'],'apiSecret':_0x4a0290['apiSecret'],'basecoin':_0x4a0290[_0x2548dd(0x25e)],'botname':_0x4a0290['botname'],'showname':_0x4a0290[_0x2548dd(0x22b)],'threshold':_0x4a0290[_0x2548dd(0x227)],'ordertype':_0x4a0290['ordertype'],'timeout':_0x4a0290[_0x2548dd(0x268)],'startdate':_0x4a0290[_0x2548dd(0x21a)],'recreate':_0x4a0290[_0x2548dd(0x259)],'timeshift':_0x4a0290[_0x2548dd(0x246)],'headless':_0x4a0290['headless'],'cooldown':_0x4a0290['cooldown'],'emojibuy':_0x4a0290[_0x2548dd(0x276)],'emojisell':_0x4a0290[_0x2548dd(0x218)],'portfolio':_0x4a0290[_0x2548dd(0x22e)]},dbConfig['get']('bot')[_0x2548dd(0x2a2)]()[_0x2548dd(0x28a)](),dbConfig[_0x2548dd(0x261)](_0x2548dd(0x1d9))['push'](_0x4a0290)[_0x2548dd(0x28a)]());}else _0x4a0290={'botID':_0x4ed95c,'exchange':_0x2548dd(0x26f),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x2548dd(0x24f)+_0x4ed95c,'showname':![],'threshold':'3','ordertype':_0x2548dd(0x241),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2548dd(0x246)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x4a0290;}function emittedConfiguration(){const _0x199e86=_0x385294;let _0x442252;return config['apiKey']==''?_0x442252=config:_0x442252={...config,'apiKey':_0x199e86(0x255),'apiSecret':'************'},_0x442252;}function getSettings(){const _0x1efb04=_0x385294;return dbSettings[_0x1efb04(0x261)](_0x1efb04(0x1e2))[_0x1efb04(0x28d)]();}function getSecure(){const _0x614f98=_0x385294;return dbSecure[_0x614f98(0x261)](_0x614f98(0x1f4))['value']()||{};}function updateTimeshift(_0x3834d2){const _0x8e4c61=_0x385294;let _0x22a656=dbConfig['get'](_0x8e4c61(0x1d9))[_0x8e4c61(0x1a0)]({'botID':botID})[_0x8e4c61(0x28d)]();_0x22a656&&dbConfig[_0x8e4c61(0x261)](_0x8e4c61(0x1d9))['find']({'botID':botID})[_0x8e4c61(0x1ea)]({'timeshift':_0x3834d2})[_0x8e4c61(0x28a)](),config[_0x8e4c61(0x246)]=_0x3834d2,proxyEmit(_0x8e4c61(0x265),emittedConfiguration());}async function storeConfiguration(_0x2b666e){const _0x2084e2=_0x385294;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x421bd9=dbConfig[_0x2084e2(0x261)](_0x2084e2(0x1d9))[_0x2084e2(0x1a0)]({'botID':botID})[_0x2084e2(0x28d)]();_0x2b666e={..._0x2b666e,'apiKey':crypt['decrypt'](secure['privateKey'],_0x2b666e[_0x2084e2(0x24b)])[_0x2084e2(0x1b5)],'apiSecret':crypt[_0x2084e2(0x214)](secure['privateKey'],_0x2b666e['apiSecret'])['message']};if(_0x421bd9){if(_0x2b666e[_0x2084e2(0x24b)]==_0x2084e2(0x255))_0x2b666e['apiKey']=config[_0x2084e2(0x24b)];if(_0x2b666e[_0x2084e2(0x217)]==_0x2084e2(0x255))_0x2b666e[_0x2084e2(0x217)]=config['apiSecret'];dbConfig[_0x2084e2(0x261)](_0x2084e2(0x1d9))['find']({'botID':botID})[_0x2084e2(0x1ea)](_0x2b666e)[_0x2084e2(0x28a)]();}else dbConfig[_0x2084e2(0x261)]('bot')[_0x2084e2(0x1fd)](_0x2b666e)[_0x2084e2(0x28a)](),process[_0x2084e2(0x291)]({'status':_0x2084e2(0x202),'live':_0x2084e2(0x1fb)});config={..._0x2b666e};if(config[_0x2084e2(0x259)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x2b666e[_0x2084e2(0x230)]}),proxyEmit(_0x2084e2(0x22c)),reset();}async function storeHeadless(_0xab29dd){const _0x348b3e=_0x385294,_0x3fa910={...config,'headless':_0xab29dd[_0x348b3e(0x1ff)]};let _0x38e0cc=dbConfig[_0x348b3e(0x261)](_0x348b3e(0x1d9))['find']({'botID':botID})['value']();_0x38e0cc&&dbConfig[_0x348b3e(0x261)](_0x348b3e(0x1d9))['find']({'botID':botID})[_0x348b3e(0x1ea)](_0x3fa910)['write'](),config={..._0x3fa910},proxyEmit(_0x348b3e(0x265),emittedConfiguration());}function noslash(_0x282f01){return _0x282f01['replace']('/','');}function updateNumberCoins(_0x4e2d73){const _0xdd8bb8=_0x385294;_0x4e2d73[_0xdd8bb8(0x279)]&&_0x4e2d73[_0xdd8bb8(0x279)]==_0xdd8bb8(0x293)&&_0x4e2d73[_0xdd8bb8(0x207)]['forEach'](_0x4a0736=>{const _0x53b9fd=_0xdd8bb8;let _0x215aa0=currentCoins[_0x53b9fd(0x1a0)](_0xe215d1=>_0xe215d1['coin']==_0x4a0736[_0x53b9fd(0x288)]);if(_0x215aa0)_0x215aa0[_0x53b9fd(0x2a9)]=Number(_0x4a0736['availableBalance']);});if(_0x4e2d73[_0xdd8bb8(0x279)]&&_0x4e2d73[_0xdd8bb8(0x279)]=='executionReport'){if(_0x4e2d73['orderType']==_0xdd8bb8(0x1b0)&&_0x4e2d73[_0xdd8bb8(0x23a)]==_0xdd8bb8(0x1f5)){if(lastOrders)lastOrders[_0xdd8bb8(0x23f)](_0x2ff4ab=>{const _0x5edebf=_0xdd8bb8;if(_0x2ff4ab[_0x5edebf(0x29f)]==_0x4e2d73[_0x5edebf(0x29f)]){if(_0x2ff4ab[_0x5edebf(0x1f0)])_0x2ff4ab['filled']=_0x4e2d73[_0x5edebf(0x210)]*_0x2ff4ab[_0x5edebf(0x1c3)];else _0x2ff4ab[_0x5edebf(0x1c5)]=_0x4e2d73[_0x5edebf(0x210)];}});}}}async function getCoins(_0xb0a0bf=!![],_0x5e3210=config[_0x385294(0x25e)]){const _0x75a412=_0x385294;let _0x2395a7,_0x517056=[],_0xedadee=[],_0x50e9ab=[];try{_0x2395a7=await exchange[_0x75a412(0x1c0)](),mybalances=_0x2395a7[_0x75a412(0x1f1)];if(!_0xb0a0bf)for(const [_0xa3bd37,_0x56c45]of Object['entries'](mybalances)){_0x50e9ab[_0x75a412(0x1fd)](_0xa3bd37);}else config['portfolio'][_0x75a412(0x23f)](_0x43838a=>{const _0x180e86=_0x75a412;if(!_0x43838a[_0x180e86(0x273)])_0x50e9ab[_0x180e86(0x1fd)](_0x43838a[_0x180e86(0x289)]);});if(_0x5e3210=='')for(const [_0x36f67d,_0x584d97]of Object['entries'](mybalances)){_0x584d97[_0x75a412(0x1a2)]()!=0x0&&_0xedadee[_0x75a412(0x1fd)]({'coin':_0x36f67d});}else for(const [_0x1dce32,_0x402a29]of Object[_0x75a412(0x211)](mybalances)){if(_0x50e9ab[_0x75a412(0x1bd)](_0x1dce32)){if((_0x402a29[_0x75a412(0x1a2)]()!=0x0||config[_0x75a412(0x22e)][_0x75a412(0x1a0)](_0x45176f=>_0x45176f[_0x75a412(0x289)]==_0x1dce32))&&(allSymbols[_0x75a412(0x1bd)](_0x1dce32+'/'+_0x5e3210)||_0x1dce32==_0x5e3210))_0xedadee['push']({'coin':_0x1dce32,'symbol':_0x1dce32+'/'+_0x5e3210,'reverse':![],'number':_0x402a29}),_0x1dce32!=_0x5e3210&&_0x517056['push'](_0x1dce32+'/'+_0x5e3210);else(_0x402a29[_0x75a412(0x1a2)]()!=0x0||config[_0x75a412(0x22e)][_0x75a412(0x1a0)](_0xa9ae8f=>_0xa9ae8f[_0x75a412(0x289)]==_0x1dce32))&&allSymbols[_0x75a412(0x1bd)](_0x5e3210+'/'+_0x1dce32)&&(_0xedadee[_0x75a412(0x1fd)]({'coin':_0x1dce32,'symbol':_0x5e3210+'/'+_0x1dce32,'reverse':!![],'number':_0x402a29}),_0x1dce32!=_0x5e3210&&_0x517056['push'](_0x5e3210+'/'+_0x1dce32));}}}catch(_0x1ced71){if(!_0xb0a0bf){if(_0x1ced71['toString']()['includes'](_0x75a412(0x1fe)))return logHistory(_0x75a412(0x247),_0x75a412(0x1b7)),![];else{if(_0x1ced71[_0x75a412(0x1a2)]()[_0x75a412(0x1bd)](_0x75a412(0x1cf)))return logHistory(_0x75a412(0x247),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x1ced71[_0x75a412(0x1a2)]()[_0x75a412(0x1bd)](_0x75a412(0x1bc)))return logHistory(_0x75a412(0x247),_0x75a412(0x206)),![];else await handleError(_0x1ced71,_0x75a412(0x1f2));}}}else await handleError(_0x1ced71,_0x75a412(0x1f2));}return _0xedadee;}async function getPortfolio(_0x3a96cc){const _0x29c64f=_0x385294;let _0x17b938=[],_0x4d07bd=[],_0x16b7b6,_0xb2a285=[],_0x44b581,_0x23f365;_0x3a96cc[_0x29c64f(0x24b)]===_0x29c64f(0x255)||_0x3a96cc[_0x29c64f(0x217)]===_0x29c64f(0x255)?(_0x44b581=config['apiKey'],_0x23f365=config['apiSecret']):(_0x44b581=_0x3a96cc[_0x29c64f(0x24b)],_0x23f365=_0x3a96cc[_0x29c64f(0x217)]);await initExchange(_0x44b581,_0x23f365);let _0x2ee4a6=await loadSymbols();if(_0x2ee4a6){_0xb2a285=await getCoins(![],_0x3a96cc[_0x29c64f(0x25e)]);if(_0xb2a285===![])proxyEmit(_0x29c64f(0x22e),![]);else{if(_0x3a96cc[_0x29c64f(0x25e)]=='')proxyEmit(_0x29c64f(0x22e),_0xb2a285);else{_0xb2a285['forEach'](_0x5d6128=>{const _0x138862=_0x29c64f;_0x17b938[_0x138862(0x1fd)](_0x5d6128[_0x138862(0x25f)]);});try{_0x4d07bd=await exchange['fetchTickers'](_0x17b938);}catch(_0x4631c7){await handleError(_0x4631c7,'getPortfolio()');}_0xb2a285[_0x29c64f(0x23f)](_0x57ce02=>{const _0xe3b58=_0x29c64f;_0x57ce02['coin']!=_0x3a96cc[_0xe3b58(0x25e)]?_0x16b7b6=_0x57ce02[_0xe3b58(0x1f0)]?0x1/_0x4d07bd[_0x57ce02['symbol']][_0xe3b58(0x1e4)]:_0x4d07bd[_0x57ce02[_0xe3b58(0x25f)]][_0xe3b58(0x1e4)]:_0x16b7b6=0x1,_0x57ce02[_0xe3b58(0x1c3)]=formatResult(_0x16b7b6,0x8);}),proxyEmit(_0x29c64f(0x22e),_0xb2a285);}}}else proxyEmit(_0x29c64f(0x22e),![]);}function checkMinimums(_0x3f63bb){const _0x17eebc=_0x385294;let _0x4558c9=!![];const _0x4e7b3a=!_0x3f63bb[_0x17eebc(0x1f0)]?markets[_0x3f63bb[_0x17eebc(0x25f)]][_0x17eebc(0x225)][_0x17eebc(0x262)]['min']:markets[_0x3f63bb[_0x17eebc(0x25f)]][_0x17eebc(0x225)][_0x17eebc(0x240)][_0x17eebc(0x257)],_0x90b8e1=!_0x3f63bb[_0x17eebc(0x1f0)]?markets[_0x3f63bb['symbol']][_0x17eebc(0x225)][_0x17eebc(0x240)]['min']:markets[_0x3f63bb[_0x17eebc(0x25f)]][_0x17eebc(0x225)][_0x17eebc(0x262)][_0x17eebc(0x257)];if(Math[_0x17eebc(0x1a6)](_0x3f63bb['trade'])<_0x4e7b3a)_0x4558c9=![];if(Math['abs'](_0x3f63bb[_0x17eebc(0x20a)])*_0x3f63bb[_0x17eebc(0x1e4)]<_0x90b8e1)_0x4558c9=![];return _0x4558c9;}async function getBalances(){const _0x2ccffd=_0x385294;let _0x58b2cf=0x0,_0x172f6b;const _0x4d64dc=config['threshold'];currentCoins['forEach'](_0x1695b4=>{const _0x3b3d2d=_0x15ad;if(_0x1695b4[_0x3b3d2d(0x289)]!=config['basecoin']){let _0x58403c=global['ticker'][noslash(_0x1695b4[_0x3b3d2d(0x25f)])];_0x172f6b=_0x1695b4[_0x3b3d2d(0x1f0)]?0x1/_0x58403c:_0x58403c;}else _0x172f6b=0x1;let _0x49c95f=_0x1695b4['number']*_0x172f6b;_0x58b2cf+=_0x49c95f,_0x1695b4['last']=formatResult(Number(_0x172f6b),0x8),_0x1695b4['value']=_0x49c95f;}),currentCoins[_0x2ccffd(0x23f)](_0x543a4a=>{const _0x56619f=_0x2ccffd;let _0x4cfab4=config[_0x56619f(0x22e)][_0x56619f(0x1a0)](_0x4809b3=>_0x4809b3['coin']==_0x543a4a[_0x56619f(0x289)]),_0x5721fd=Number(_0x4cfab4[_0x56619f(0x24a)]),_0x26588a=_0x543a4a['value']/_0x58b2cf*0x64,_0x26b457=_0x5721fd*_0x58b2cf/0x64/_0x543a4a[_0x56619f(0x1e4)]-_0x543a4a[_0x56619f(0x2a9)];_0x543a4a[_0x56619f(0x24a)]=formatResult(_0x26588a,0x3),_0x543a4a[_0x56619f(0x258)]=formatResult(_0x5721fd,0x3),_0x543a4a[_0x56619f(0x20a)]=formatResult(_0x26b457,0x8),_0x543a4a[_0x56619f(0x1e7)]='',_0x543a4a[_0x56619f(0x1e0)]='';if(_0x543a4a['coin']!=config[_0x56619f(0x25e)]){if(_0x543a4a[_0x56619f(0x24a)]>_0x5721fd)_0x543a4a[_0x56619f(0x1e7)]='sell',_0x543a4a[_0x56619f(0x1e0)]=checkMinimums(_0x543a4a);else _0x543a4a[_0x56619f(0x24a)]<_0x5721fd&&(_0x543a4a[_0x56619f(0x1e7)]='buy',_0x543a4a[_0x56619f(0x1e0)]=checkMinimums(_0x543a4a));}_0x543a4a[_0x56619f(0x28e)]=_0x543a4a[_0x56619f(0x24a)]/_0x543a4a[_0x56619f(0x258)]-0x1;}),currentCoins[_0x2ccffd(0x1bf)]((_0x13c70e,_0x219d3e)=>_0x13c70e[_0x2ccffd(0x28e)]<_0x219d3e[_0x2ccffd(0x28e)]?0x1:_0x219d3e['delta']<_0x13c70e[_0x2ccffd(0x28e)]?-0x1:0x0);const _0x5625be=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5625be['eur'],'usd':_0x5625be['usd'],'portfolio':JSON[_0x2ccffd(0x1f3)](currentCoins),'threshold':_0x4d64dc},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2ccffd(0x1ff)])headlessMode({'portfolio':currentCoins,'threshold':_0x4d64dc});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3fcd93=_0x385294;if(!lastBalances)return;let _0x330f18=await getStartingBalances(![]),_0x11a7ef=[],_0x65f364=[],_0x3dc103;JSON[_0x3fcd93(0x285)](lastBalances[_0x3fcd93(0x22e)])['forEach'](_0x5a22e0=>{const _0x3ae250=_0x3fcd93;let _0x3fbcf1={'coin':_0x5a22e0[_0x3ae250(0x289)],'number':_0x5a22e0[_0x3ae250(0x2a9)],'price':_0x5a22e0[_0x3ae250(0x1e4)]};_0x11a7ef[_0x3ae250(0x1fd)](_0x3fbcf1);if(!_0x330f18[_0x3ae250(0x1c8)]||!_0x330f18['coins']['find'](_0x395e3a=>_0x395e3a[_0x3ae250(0x289)]==_0x5a22e0[_0x3ae250(0x289)]&&_0x395e3a[_0x3ae250(0x2a9)]!=0x0))_0x65f364[_0x3ae250(0x1fd)](_0x3fbcf1);});const _0x16bee8=await getFiat();_0x3dc103={'date':lastBalances[_0x3fcd93(0x27f)][_0x3fcd93(0x1a3)]('\x20')[0x0],'eur':_0x16bee8[_0x3fcd93(0x26d)],'usd':_0x16bee8[_0x3fcd93(0x20f)],'coins':_0x11a7ef};let _0x1a7bf2=dbPerformance[_0x3fcd93(0x261)](_0x3fcd93(0x1c6))[_0x3fcd93(0x1a0)]({'date':_0x3dc103['date']})['value']();_0x1a7bf2?dbPerformance[_0x3fcd93(0x261)](_0x3fcd93(0x1c6))[_0x3fcd93(0x1a0)]({'date':_0x3dc103[_0x3fcd93(0x20c)]})[_0x3fcd93(0x1ea)](_0x3dc103)[_0x3fcd93(0x28a)]():dbPerformance[_0x3fcd93(0x261)](_0x3fcd93(0x1c6))[_0x3fcd93(0x1fd)](_0x3dc103)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0xa85b5=_0x385294;if(dbPerformance[_0xa85b5(0x24d)](_0xa85b5(0x1c6))[_0xa85b5(0x28d)]()){let _0x75f001=dbPerformance[_0xa85b5(0x261)]('data')[_0xa85b5(0x1a7)](_0xa85b5(0x20c))[_0xa85b5(0x28d)]();proxyEmit(_0xa85b5(0x27b),_0x75f001),lastPerformanceEmitted=getDate();}else proxyEmit(_0xa85b5(0x27b),[]);}async function getStartingBalances(_0x1a1f31=!![]){const _0x1930f3=_0x385294;let _0x26777e=dbPerformance[_0x1930f3(0x261)](_0x1930f3(0x1c6))['find']({'date':config[_0x1930f3(0x21a)]})['value']();config[_0x1930f3(0x24b)]!=''&&!_0x26777e&&(await setStartDatePerformance(config),_0x26777e=dbPerformance[_0x1930f3(0x261)](_0x1930f3(0x1c6))['find']({'date':config[_0x1930f3(0x21a)]})['value']());if(config[_0x1930f3(0x24b)]==''||!_0x26777e)return{};let _0x43c639=0x0,_0x401dd1=0x0,_0x4dff5e=0x0,_0x159a4b=[],_0x8c006a=0x0;config[_0x1930f3(0x22e)][_0x1930f3(0x23f)](_0x18fa05=>{const _0x245b0a=_0x1930f3;if(!_0x18fa05[_0x245b0a(0x273)]){_0x159a4b[_0x8c006a]={'coin':_0x18fa05[_0x245b0a(0x289)],'symbol':_0x18fa05[_0x245b0a(0x25f)],'number':_0x18fa05[_0x245b0a(0x294)],'price':_0x18fa05[_0x245b0a(0x1bb)]},_0x43c639+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05[_0x245b0a(0x294)];if(config[_0x245b0a(0x25e)]==_0x245b0a(0x281))_0x401dd1+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05['startnumber']*_0x26777e[_0x245b0a(0x26d)],_0x4dff5e+=_0x18fa05['startprice']*_0x18fa05['startnumber']*_0x26777e[_0x245b0a(0x20f)];else{if(config['basecoin']=='BUSD'||config['basecoin']==_0x245b0a(0x24c)||config[_0x245b0a(0x25e)]=='USDC')_0x401dd1+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05[_0x245b0a(0x294)]*_0x26777e[_0x245b0a(0x26d)]/_0x26777e[_0x245b0a(0x20f)],_0x4dff5e+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05['startnumber'];else config[_0x245b0a(0x25e)]=='EUR'&&(_0x401dd1+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05[_0x245b0a(0x294)],_0x4dff5e+=_0x18fa05[_0x245b0a(0x1bb)]*_0x18fa05[_0x245b0a(0x294)]*_0x26777e['usd']/_0x26777e[_0x245b0a(0x26d)]);}_0x8c006a++;}});let _0x273d49={'basecoin':_0x43c639,'eur':_0x401dd1,'usd':_0x4dff5e,'coins':_0x159a4b};if(_0x1a1f31)proxyEmit('starting-balances',_0x273d49);return _0x273d49;}function headlessMode(_0xeb8070){const _0x269c34=_0x385294;let _0x4eb563=_0xeb8070[_0x269c34(0x22e)],_0x367406=_0xeb8070[_0x269c34(0x227)],_0x566317=[];for(let _0x1a13c8 of _0x4eb563){if(_0x1a13c8[_0x269c34(0x289)]!=config[_0x269c34(0x25e)]){if(_0x1a13c8['distribution']/_0x1a13c8[_0x269c34(0x258)]-0x1>=_0x367406/0x64){if(_0x1a13c8[_0x269c34(0x1e0)])_0x566317[_0x269c34(0x1fd)](_0x1a13c8);}else{if(_0x1a13c8[_0x269c34(0x24a)]/_0x1a13c8[_0x269c34(0x258)]-0x1<=-_0x367406/0x64){if(_0x1a13c8[_0x269c34(0x1e0)])_0x566317[_0x269c34(0x1fd)](_0x1a13c8);}}}}_0x566317['length']>0x0&&placeOrder(_0x566317);}function symbolToCoin(_0x38fbdf){const _0x4e5261=_0x385294;let _0x4ac790;if(_0x38fbdf[_0x4e5261(0x1bd)]('/'+config[_0x4e5261(0x25e)]))_0x4ac790=_0x38fbdf[_0x4e5261(0x280)]('/'+config[_0x4e5261(0x25e)],'');if(_0x38fbdf[_0x4e5261(0x1bd)](config['basecoin']+'/'))_0x4ac790=_0x38fbdf['replace'](config[_0x4e5261(0x25e)]+'/','');return _0x4ac790;}function _0x3c14(){const _0x4760b9=['placeOrder()','limits','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','threshold','1926AyKnYg','placeOrder','yyyy/MM/dd','showname','configuration-stored','\x20minutes\x20-\x20balancing\x20resumed','portfolio','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','botname','128376THHrsG','getPortfolio','\x20>\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','log','binanceus','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','3129kzpwAK','filter','orderStatus','Order\x20filled:\x20','buy','getTime','bid','forEach','cost','market','timestamp','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','apply','Order(s)\x20not\x20validated\x20after\x20','timeshift','error','Order(s)\x20filled\x20-\x20balancing\x20resumed','success','distribution','apiKey','USDT','has','001','Bot\x20','getStartingBalances','keys','ticker','Order\x20amount\x20is\x20invalid:\x20','eachDayOfInterval','************','getFullYear','min','target','recreate','2690830PRGTGP','\x20hour','createOrder','argv','basecoin','symbol','differenceInSeconds','get','amount','lowdb/adapters/FileSync','close','configuration','BTC/BUSD','sha256','timeout','progress','realized','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','eur','(((.+)+)+)+$','binance','Limit\x20(high-margin)','event-history','cancelOrder','excluded','kill','storeHeadless','emojibuy','cancel','indexOf','eventType','page','performance','fetchOrders','-config.json','sell','time','replace','BTC','parseISO','Order(s)\x20validated\x20-\x20balancing\x20resumed','exchange','parse','cancelOrder()','946fXdZTn','asset','coin','write','toFixed','coinamount','value','delta','-events.json','currency','send','BTC/USDT','outboundAccountPosition','startnumber','Limit\x20(low-margin)','BTCBUSD','constructor','Crypt','wsMarket','test','search','getMinutes','fee','splice','orderId','add','getFiat()','remove','remainingSymbols','Pausing\x20bot\x20for\x205\x20minutes\x20(','event','logs','ccxt','RSA-OAEP','number','find','limit-high','toString','split','DDoSProtection','map','abs','sortBy','880112MdmECV','getDate','length','getSeconds','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','getHours','-performance.json','loadSymbols()','LIMIT','545245BwHyTK','differenceInCalendarDays','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','milliseconds','message','\x20-\x20','Binance\x20API\x20key\x20is\x20invalid','fetchOHLCV','subscribeSpotKline','closeWs','startprice','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','includes',':\x20Bot\x20','sort','fetchBalance','550jTaepo','Unfilled\x20order(s)\x20canceled\x20after\x20','price','toLowerCase','filled','data','subscribeSpotUserDataStream','coins','1057584QbKyNO','-results.json','shift','existsSync','fromCodePoint','slice','AuthenticationError','limit-low','WebSockets(','BTCEUR',',\x20must\x20be\x20a\x203\x20digit\x20number','yyyy-MM-dd\x27T\x27HH:mm:ss','kline','InvalidNonce','lowdb','hybrid-crypto-js','bot','getMonth','recreateHistory()','symbols','args','./config/','fetchTickers','valid','date-fns','settings','botID','last','Performance\x20recreation\x20completed\x20successfully','wss://stream.binance.us:9443','side','reconnected','BNB','assign','datetime','restart','getCloses()','format','bot-','reverse','total','getCoins()','stringify','secure','FILLED','ExchangeNotAvailable','wsKey','defaults','ordertype','wss://stream.binance.com:9443','running','cooldown','push','API-key\x20format\x20invalid','headless','breakeven','round','enabled','Market','MIN_NOTIONAL','DAI/','Binance\x20API\x20secret\x20is\x20invalid','balances','limit','type','trade','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','date','ask','6952UgIvzN','usd','accumulatedQuantity','entries','userData','HOT/BTC','decrypt','isArray','BTCUSDT','apiSecret','emojisell','\x20orders\x20in\x20less\x20than\x20','startdate','padStart','exit','bb-secure.json','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','buys','sells','\x20|\x20Unknown\x20error\x20occured','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','order'];_0x3c14=function(){return _0x4760b9;};return _0x3c14();}async function validateOrders(_0x6b58fe=0x0){const _0x54dc2b=_0x385294;let _0x5663ec=[],_0x2fe14f=config[_0x54dc2b(0x1f9)]==_0x54dc2b(0x241)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x54dc2b(0x268)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x283848=>{const _0x2759fb=_0x54dc2b;let _0x149eb7=previousCoins[_0x2759fb(0x1a0)](_0xa288a7=>_0xa288a7[_0x2759fb(0x289)]==symbolToCoin(_0x283848['symbol'])),_0xddb784=currentCoins[_0x2759fb(0x1a0)](_0x40c3ef=>_0x40c3ef[_0x2759fb(0x289)]==symbolToCoin(_0x283848[_0x2759fb(0x25f)])),_0xdb8ff8,_0x4e2230;_0x283848[_0x2759fb(0x1e7)]=='buy'&&!_0x283848[_0x2759fb(0x1f0)]||_0x283848[_0x2759fb(0x1e7)]==_0x2759fb(0x27e)&&_0x283848[_0x2759fb(0x1f0)]?(_0xdb8ff8=_0x149eb7[_0x2759fb(0x2a9)]+0.9*_0x283848[_0x2759fb(0x1c5)],_0x4e2230=_0x149eb7['number']+1.1*_0x283848[_0x2759fb(0x1c5)]):(_0xdb8ff8=_0x149eb7[_0x2759fb(0x2a9)]-1.1*_0x283848['filled'],_0x4e2230=_0x149eb7[_0x2759fb(0x2a9)]-0.9*_0x283848['filled']);const _0x356db3=_0x283848[_0x2759fb(0x1c5)]!=0x0&&_0xddb784[_0x2759fb(0x2a9)]>=_0xdb8ff8&&_0xddb784[_0x2759fb(0x2a9)]<=_0x4e2230;_0x5663ec[_0x2759fb(0x1fd)](_0x356db3);if(_0x356db3&&config['ordertype']!='market'){if(_0x283848[_0x2759fb(0x1f0)])logHistory(_0x2759fb(0x223),_0x2759fb(0x23b)+_0x283848[_0x2759fb(0x25f)]+'\x20'+_0x283848[_0x2759fb(0x1e7)]+'\x20#'+formatResult(_0x283848[_0x2759fb(0x1c5)]/_0x283848['price'],0x8)+'\x20@'+formatResult(_0x283848['price'],0x8));else logHistory(_0x2759fb(0x223),_0x2759fb(0x23b)+_0x283848[_0x2759fb(0x25f)]+'\x20'+_0x283848[_0x2759fb(0x1e7)]+'\x20#'+formatResult(_0x283848[_0x2759fb(0x1c5)],0x8)+'\x20@'+formatResult(_0x283848[_0x2759fb(0x1c3)],0x8));}}),_0x5663ec[_0x54dc2b(0x23f)]((_0x3b4b1f,_0x24c504)=>{if(_0x3b4b1f)lastOrders['splice'](_0x24c504,0x1);});if(_0x6b58fe<_0x2fe14f&&_0x5663ec[_0x54dc2b(0x1bd)](![])){if(_0x6b58fe==0x0){config[_0x54dc2b(0x1f9)]==_0x54dc2b(0x241)?logHistory('error',_0x54dc2b(0x243)):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x6b58fe);},0xa*0x3e8);}else{(_0x6b58fe==0x1||_0x6b58fe==Math[_0x54dc2b(0x201)](_0x2fe14f/0x2)||_0x6b58fe==_0x2fe14f-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x6b58fe);},validateOrderInterval);}}else{lockOrders=![];if(_0x6b58fe>0x0&&!_0x5663ec[_0x54dc2b(0x1bd)](![]))config[_0x54dc2b(0x1f9)]==_0x54dc2b(0x241)?logHistory(_0x54dc2b(0x249),_0x54dc2b(0x283)):logHistory(_0x54dc2b(0x249),_0x54dc2b(0x248));else _0x6b58fe>0x0&&_0x5663ec[_0x54dc2b(0x1bd)](![])&&(config[_0x54dc2b(0x1f9)]==_0x54dc2b(0x241)?logHistory(_0x54dc2b(0x249),_0x54dc2b(0x245)+Math['round'](_0x2fe14f*validateOrderInterval/0xea60)+_0x54dc2b(0x22d)):(lastOrders[_0x54dc2b(0x23f)](async _0x4d3b8e=>{const _0x4cf5e4=_0x54dc2b;try{const _0x340a91=await exchange[_0x4cf5e4(0x272)](_0x4d3b8e[_0x4cf5e4(0x29f)],_0x4d3b8e['symbol']);}catch(_0xf5da37){if(_0xf5da37['toString']()[_0x4cf5e4(0x1bd)]('OrderNotFound')){}else await handleError(_0xf5da37,_0x4cf5e4(0x286));}}),logHistory(_0x54dc2b(0x249),_0x54dc2b(0x1c2)+Math[_0x54dc2b(0x201)](_0x2fe14f*validateOrderInterval/0xea60)+_0x54dc2b(0x22d))));}}async function resetCoinResults(){const _0x31ff8d=_0x385294;dbCoinResults[_0x31ff8d(0x261)](_0x31ff8d(0x1c8))[_0x31ff8d(0x2a2)]()[_0x31ff8d(0x28a)]();let _0xef5c5e=await getStartingBalances(![]);_0xef5c5e[_0x31ff8d(0x1c8)][_0x31ff8d(0x23f)](_0x287a7b=>{const _0x340cdd=_0x31ff8d,_0x4b238d=_0x287a7b[_0x340cdd(0x25f)][_0x340cdd(0x1bd)](config[_0x340cdd(0x25e)]+'/');if(_0x287a7b[_0x340cdd(0x289)]!=config[_0x340cdd(0x25e)]){let _0x5cf8f5={'coin':_0x287a7b['coin'],'number':_0x287a7b[_0x340cdd(0x2a9)],'breakeven':_0x287a7b[_0x340cdd(0x1c3)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x340cdd(0x1c8))['push'](_0x5cf8f5)[_0x340cdd(0x28a)]();}});}async function updateCoinResults(_0x1086d9){const _0x380944=_0x385294;let _0x647a88,_0x9243ef,_0x4c93ae,_0x576b66,_0x2c0187,_0x2d7b7c,_0x2f278e=dbCoinResults[_0x380944(0x261)](_0x380944(0x1c8))[_0x380944(0x1a0)]({'coin':_0x1086d9[_0x380944(0x289)]})[_0x380944(0x28d)]();if(!_0x2f278e)return;if(_0x1086d9[_0x380944(0x29d)]&&_0x1086d9[_0x380944(0x29d)]['currency']==config[_0x380944(0x25e)])_0x647a88=_0x1086d9[_0x380944(0x29d)][_0x380944(0x240)];else{if(_0x1086d9[_0x380944(0x29d)]&&_0x1086d9[_0x380944(0x29d)][_0x380944(0x290)]==_0x380944(0x1e9))_0x647a88=_0x1086d9[_0x380944(0x29d)][_0x380944(0x240)]*global[_0x380944(0x252)][_0x380944(0x1e9)+config[_0x380944(0x25e)]];else _0x647a88=0.001*_0x1086d9['filled'];}const _0x2ea80c=_0x1086d9[_0x380944(0x25f)][_0x380944(0x1bd)](config[_0x380944(0x25e)]+'/');_0x2ea80c&&(_0x2d7b7c={'coin':_0x1086d9[_0x380944(0x289)],'symbol':_0x1086d9[_0x380944(0x25f)],'filled':_0x1086d9[_0x380944(0x1c5)]*_0x1086d9[_0x380944(0x1c3)],'side':_0x1086d9[_0x380944(0x1e7)]==_0x380944(0x27e)?'buy':_0x380944(0x27e),'price':0x1/_0x1086d9[_0x380944(0x1c3)]},_0x1086d9={..._0x2d7b7c});_0x1086d9[_0x380944(0x1e7)]=='buy'?_0x4c93ae=(_0x2f278e[_0x380944(0x200)]*_0x2f278e[_0x380944(0x2a9)]+_0x1086d9['price']*_0x1086d9[_0x380944(0x1c5)])/(_0x2f278e[_0x380944(0x2a9)]+_0x1086d9[_0x380944(0x1c5)]):_0x4c93ae=(_0x2f278e['breakeven']*_0x2f278e['number']-_0x1086d9['price']*_0x1086d9[_0x380944(0x1c5)])/(_0x2f278e[_0x380944(0x2a9)]-_0x1086d9[_0x380944(0x1c5)]);_0x1086d9['side']==_0x380944(0x23c)?_0x576b66=_0x2f278e[_0x380944(0x26a)]:_0x576b66=_0x2f278e[_0x380944(0x26a)]+(_0x1086d9['price']-_0x2f278e[_0x380944(0x200)])*_0x1086d9[_0x380944(0x1c5)];_0x9243ef=_0x1086d9[_0x380944(0x1e7)]==_0x380944(0x27e)?_0x2f278e[_0x380944(0x2a9)]-_0x1086d9['filled']:_0x2f278e[_0x380944(0x2a9)]+_0x1086d9[_0x380944(0x1c5)],_0x2c0187=(_0x1086d9[_0x380944(0x1c3)]-_0x4c93ae)*_0x9243ef;let _0x525039={'coin':_0x1086d9[_0x380944(0x289)],'number':_0x9243ef,'breakeven':formatResult(_0x4c93ae,0x8),'realized':formatResult(_0x576b66,0x8),'unrealized':formatResult(_0x2c0187,0x8),'fees':formatResult(_0x2f278e['fees']+_0x647a88,0x8),'sells':_0x1086d9[_0x380944(0x1e7)]==_0x380944(0x27e)?_0x2f278e[_0x380944(0x220)]+0x1:_0x2f278e['sells'],'buys':_0x1086d9[_0x380944(0x1e7)]=='buy'?_0x2f278e[_0x380944(0x21f)]+0x1:_0x2f278e[_0x380944(0x21f)]};dbCoinResults[_0x380944(0x261)](_0x380944(0x1c8))['find']({'coin':_0x1086d9[_0x380944(0x289)]})[_0x380944(0x1ea)](_0x525039)[_0x380944(0x28a)]();}async function placeOrder(_0x5d45c5){const _0x465d71=_0x385294,_0x198274=config[_0x465d71(0x1f9)]==_0x465d71(0x241)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x465d71(0x285)](JSON[_0x465d71(0x1f3)](currentCoins));for(const _0x1db7bf of _0x5d45c5){let _0x1bead4,_0x3360f5,_0x2ac2bc,_0x337dc9,_0x104f55,_0x279a77=_0x1db7bf[_0x465d71(0x25f)];try{const _0x13c9cc=await exchange[_0x465d71(0x1df)](_0x279a77),_0x200200=_0x13c9cc[_0x279a77];_0x1bead4=_0x200200[_0x465d71(0x1e4)],_0x3360f5=_0x200200[_0x465d71(0x23e)],_0x2ac2bc=_0x200200[_0x465d71(0x20d)];_0x1db7bf[_0x465d71(0x1f0)]?(_0x337dc9=_0x1db7bf[_0x465d71(0x1e7)]==_0x465d71(0x23c)?'sell':'buy',_0x104f55=Math[_0x465d71(0x1a6)](_0x1db7bf[_0x465d71(0x20a)])/_0x1bead4):(_0x337dc9=_0x1db7bf['side'],_0x104f55=Math[_0x465d71(0x1a6)](_0x1db7bf[_0x465d71(0x20a)]));_0x198274==_0x465d71(0x208)&&(config[_0x465d71(0x1f9)]==_0x465d71(0x1a1)&&(_0x1bead4=_0x337dc9==_0x465d71(0x23c)?_0x3360f5:_0x2ac2bc),config[_0x465d71(0x1f9)]==_0x465d71(0x1d0)&&(_0x1bead4=_0x337dc9==_0x465d71(0x23c)?_0x2ac2bc:_0x3360f5));_0x104f55=formatResult(_0x104f55,0x8),_0x1bead4=formatResult(_0x1bead4,0x8);const _0x192112=await exchange[_0x465d71(0x25c)](_0x279a77,_0x198274,_0x337dc9,_0x104f55,_0x1bead4);lastOrders['push']({'orderId':_0x192112['id'],'symbol':_0x279a77,'side':_0x337dc9,'reverse':_0x1db7bf[_0x465d71(0x1f0)],'amount':_0x1db7bf[_0x465d71(0x1f0)]?_0x192112[_0x465d71(0x262)]*_0x192112[_0x465d71(0x1c3)]:_0x192112['amount'],'filled':_0x1db7bf[_0x465d71(0x1f0)]?_0x192112['filled']*_0x192112['price']:_0x192112[_0x465d71(0x1c5)],'price':_0x192112['price']});const _0x4895af=_0x337dc9==_0x465d71(0x27e)?config['emojisell']?String[_0x465d71(0x1cd)]('0x'+config[_0x465d71(0x218)])+'\x20':'':config[_0x465d71(0x276)]?String[_0x465d71(0x1cd)]('0x'+config[_0x465d71(0x276)])+'\x20':'',_0xa1ba0e=_0x198274=='market'?_0x465d71(0x203):config[_0x465d71(0x1f9)]=='limit-high'?_0x465d71(0x270):_0x465d71(0x295);if(_0x198274==_0x465d71(0x241))logHistory(_0x465d71(0x223),''+_0x4895af+_0xa1ba0e+'\x20order:\x20'+_0x279a77+'\x20'+_0x337dc9+'\x20#'+formatResult(_0x192112['filled'],0x8)+'\x20@'+formatResult(_0x192112[_0x465d71(0x1c3)],0x8));else logHistory('order',''+_0x4895af+_0xa1ba0e+'\x20order:\x20'+_0x279a77+'\x20'+_0x337dc9+'\x20#'+formatResult(_0x192112[_0x465d71(0x262)],0x8)+'\x20@'+formatResult(_0x192112['price'],0x8));_0x192112['coin']=_0x1db7bf['coin'],await updateCoinResults(_0x192112);if(config['cooldown']!=0x0){let _0x942fbf=null;if(cooldownTracker[_0x465d71(0x1aa)]==config[_0x465d71(0x1fc)]-0x1)_0x942fbf=cooldownTracker[_0x465d71(0x1cb)]();const _0x23fded=getTimeStamp();cooldownTracker[_0x465d71(0x1fd)](_0x23fded);if(_0x942fbf){const _0x390786=fns[_0x465d71(0x260)](new Date(_0x23fded),new Date(_0x942fbf));_0x390786<cooldownInterval&&(logHistory(_0x465d71(0x247),'Executed\x20'+config[_0x465d71(0x1fc)]+_0x465d71(0x219)+cooldownInterval/0x3c+_0x465d71(0x26c)+cooldownPeriod/(0xe10*0x3e8)+_0x465d71(0x25b)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4f773c){if(_0x4f773c[_0x465d71(0x1a2)]()['includes'](_0x465d71(0x204)))logHistory('error',_0x465d71(0x234)+_0x279a77);else{if(_0x4f773c[_0x465d71(0x1a2)]()['includes']('Invalid\x20quantity'))logHistory(_0x465d71(0x247),_0x465d71(0x253)+_0x279a77);else await handleError(_0x4f773c,_0x465d71(0x224));}}}if(lastOrders[_0x465d71(0x1aa)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x465d71(0x1ff)]&&(config[_0x465d71(0x1f9)]=='market'?logHistory(_0x465d71(0x247),_0x465d71(0x20b)):logHistory('error',_0x465d71(0x222)));else coolingDown&&(!config[_0x465d71(0x1ff)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x288f98,_0x1c5d18,_0x787e8e=''){const _0x562c07=_0x385294;let _0x27e67f={'time':getTimeStamp(),'type':_0x288f98,'event':_0x1c5d18,'botname':config[_0x562c07(0x230)],'showname':config[_0x562c07(0x22b)]};dbLogs[_0x562c07(0x261)]('logs')[_0x562c07(0x1fd)](_0x27e67f)['write']();if(_0x787e8e=='')_0x787e8e=_0x1c5d18;proxyEmit('event',{'log':_0x27e67f,'summary':_0x787e8e}),process[_0x562c07(0x291)]({'telegram':_0x27e67f}),logging(''+_0x27e67f[_0x562c07(0x2a5)]);}function emitHistory(_0x1ce399={}){const _0x41dfcc=_0x385294;Object[_0x41dfcc(0x251)](_0x1ce399)[_0x41dfcc(0x1aa)]==0x0&&(_0x1ce399={'type':[_0x41dfcc(0x223),_0x41dfcc(0x2a5)],'event':'','page':0x1});if(_0x1ce399[_0x41dfcc(0x209)][_0x41dfcc(0x1bd)](_0x41dfcc(0x2a5)))_0x1ce399[_0x41dfcc(0x209)][_0x41dfcc(0x29e)](_0x1ce399[_0x41dfcc(0x209)][_0x41dfcc(0x278)]('event'),0x1,_0x41dfcc(0x247),_0x41dfcc(0x249));if(dbLogs[_0x41dfcc(0x24d)](_0x41dfcc(0x2a6))[_0x41dfcc(0x28d)]()){let _0x2d0092=dbLogs[_0x41dfcc(0x261)]('logs')['filter'](_0x4003a4=>{const _0x724a11=_0x41dfcc;if(_0x1ce399['type'][_0x724a11(0x1aa)]==0x0)return![];else return _0x1ce399['type']['includes'](_0x4003a4[_0x724a11(0x209)]);})[_0x41dfcc(0x239)](_0x2e4ca2=>{const _0x28b09b=_0x41dfcc;if(_0x1ce399[_0x28b09b(0x2a5)]=='')return!![];else return _0x2e4ca2[_0x28b09b(0x2a5)]['toLowerCase']()['includes'](_0x1ce399['event'][_0x28b09b(0x1c4)]());})[_0x41dfcc(0x1a7)](_0x41dfcc(0x27f)),_0x22767c=_0x2d0092[_0x41dfcc(0x28d)]()[_0x41dfcc(0x1aa)];_0x2d0092=_0x2d0092[_0x41dfcc(0x1f0)]()[_0x41dfcc(0x1ce)]((_0x1ce399[_0x41dfcc(0x27a)]-0x1)*logPageSize,_0x1ce399[_0x41dfcc(0x27a)]*logPageSize-0x1)['reverse']()[_0x41dfcc(0x28d)](),proxyEmit(_0x41dfcc(0x271),{'logs':_0x2d0092,'total':_0x22767c});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x5cf9e2){const _0x4a1473=_0x385294,_0x4b35dd=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x4a1473(0x23d)](),consecutivePauses=0x1;else{if(_0x4b35dd-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x4a1473(0x291)]({'stop':_0x4a1473(0x1ec)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x4a1473(0x23d)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x4a1473(0x247),_0x4a1473(0x2a4)+consecutivePauses+')'),await sleep(_0x5cf9e2),botPaused=![],reset();}}async function handleError(_0x500bf0,_0x7aa277,_0x33ae7e=''){const _0x551ff3=_0x385294;if(_0x500bf0[_0x551ff3(0x1a2)]()[_0x551ff3(0x1bd)](_0x551ff3(0x1a4)))logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x21e)),await pauseBot(pauseBotInterval);else{if(_0x500bf0[_0x551ff3(0x1a2)]()['includes'](_0x551ff3(0x1f6)))logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x1ac)),await pauseBot(pauseBotInterval);else{if(_0x500bf0['toString']()[_0x551ff3(0x1bd)]('RequestTimeout'))logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x1b3)),await pauseBot(pauseBotInterval);else{if(_0x500bf0[_0x551ff3(0x1a2)]()[_0x551ff3(0x1bd)](_0x551ff3(0x1fe)))logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x237)),logHistory(_0x551ff3(0x247),_0x551ff3(0x22f)),process[_0x551ff3(0x291)]({'stop':_0x551ff3(0x274)});else{if(_0x500bf0['toString']()[_0x551ff3(0x1bd)](_0x551ff3(0x1cf)))logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x226)),logHistory(_0x551ff3(0x247),_0x551ff3(0x22f)),process[_0x551ff3(0x291)]({'stop':_0x551ff3(0x274)});else{if(_0x500bf0['toString']()[_0x551ff3(0x1bd)](_0x551ff3(0x1bc)))logHistory(_0x551ff3(0x247),_0x7aa277+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x551ff3(0x247),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x551ff3(0x274)});else{if(_0x500bf0['toString']()[_0x551ff3(0x1bd)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x551ff3(0x247),_0x7aa277+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x551ff3(0x247),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x551ff3(0x291)]({'stop':_0x551ff3(0x274)});else{if(_0x500bf0[_0x551ff3(0x1a2)]()[_0x551ff3(0x1bd)](_0x551ff3(0x1d6)))logHistory(_0x551ff3(0x247),_0x7aa277+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process[_0x551ff3(0x291)]({'stop':_0x551ff3(0x1ec)});else _0x500bf0[_0x551ff3(0x1a2)]()[_0x551ff3(0x1bd)]('InsufficientFunds')?logHistory(_0x551ff3(0x247),_0x7aa277+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x551ff3(0x247),_0x7aa277+_0x551ff3(0x221)),logging(_0x7aa277+'\x20|\x20Error\x20details:\x20',_0x500bf0),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x4985eb,_0x34ba8c){const _0x27d533=_0x385294;return parseFloat(_0x4985eb[_0x27d533(0x28b)](_0x34ba8c));}function logging(_0x106704,_0x515a6c=''){const _0x11a213=_0x385294;if(config[_0x11a213(0x22b)])console[_0x11a213(0x235)](getTimeStamp()+':\x20'+config[_0x11a213(0x230)]+_0x11a213(0x233)+_0x106704,_0x515a6c);else console['log'](getTimeStamp()+_0x11a213(0x1be)+botID+_0x11a213(0x233)+_0x106704,_0x515a6c);}function getServerTime(){const _0x2c6f89=_0x385294,_0x53f565=new Date();return _0x53f565[_0x2c6f89(0x256)]()+'/'+(_0x53f565[_0x2c6f89(0x1da)]()+0x1)[_0x2c6f89(0x1a2)]()['padStart'](0x2,'0')+'/'+_0x53f565[_0x2c6f89(0x1a9)]()[_0x2c6f89(0x1a2)]()[_0x2c6f89(0x21b)](0x2,'0')+'\x20'+_0x53f565[_0x2c6f89(0x1ad)]()[_0x2c6f89(0x1a2)]()[_0x2c6f89(0x21b)](0x2,'0')+':'+_0x53f565[_0x2c6f89(0x29c)]()['toString']()[_0x2c6f89(0x21b)](0x2,'0')+':'+_0x53f565[_0x2c6f89(0x1ab)]()['toString']()[_0x2c6f89(0x21b)](0x2,'0');}function getTimeStamp(){const _0x2d5baf=_0x385294,_0x1a31f1=shiftedTime();return _0x1a31f1['getFullYear']()+'/'+(_0x1a31f1[_0x2d5baf(0x1da)]()+0x1)[_0x2d5baf(0x1a2)]()[_0x2d5baf(0x21b)](0x2,'0')+'/'+_0x1a31f1[_0x2d5baf(0x1a9)]()[_0x2d5baf(0x1a2)]()[_0x2d5baf(0x21b)](0x2,'0')+'\x20'+_0x1a31f1['getHours']()[_0x2d5baf(0x1a2)]()[_0x2d5baf(0x21b)](0x2,'0')+':'+_0x1a31f1[_0x2d5baf(0x29c)]()['toString']()[_0x2d5baf(0x21b)](0x2,'0')+':'+_0x1a31f1[_0x2d5baf(0x1ab)]()['toString']()[_0x2d5baf(0x21b)](0x2,'0');}function getDate(){const _0x4a2df5=_0x385294,_0x550808=shiftedTime();return _0x550808['getFullYear']()+'/'+(_0x550808[_0x4a2df5(0x1da)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x550808[_0x4a2df5(0x1a9)]()[_0x4a2df5(0x1a2)]()[_0x4a2df5(0x21b)](0x2,'0');}function getHour(){const _0x3e9938=_0x385294,_0x48a7ce=shiftedTime();return _0x48a7ce[_0x3e9938(0x1ad)]()[_0x3e9938(0x1a2)]()[_0x3e9938(0x21b)](0x2,'0');}function sleep(_0x3dd7d7){return new Promise(_0x4f6708=>setTimeout(_0x4f6708,_0x3dd7d7));}function shiftedTime(){const _0x51f870=_0x385294,_0x24189e=new Date();let _0x446104=_0x24189e;if(config&&config[_0x51f870(0x246)]!==0x0)_0x446104=fns[_0x51f870(0x2a0)](_0x24189e,{'hours':config[_0x51f870(0x246)]});return _0x446104;}