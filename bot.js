const _0x28c059=_0x396b;(function(_0x381128,_0x1f2f50){const _0x43cdec=_0x396b,_0x1e06b4=_0x381128();while(!![]){try{const _0x1770de=parseInt(_0x43cdec(0x145))/0x1+parseInt(_0x43cdec(0xf6))/0x2+parseInt(_0x43cdec(0xfb))/0x3*(-parseInt(_0x43cdec(0x10b))/0x4)+parseInt(_0x43cdec(0xa7))/0x5+parseInt(_0x43cdec(0x179))/0x6*(-parseInt(_0x43cdec(0xef))/0x7)+parseInt(_0x43cdec(0xcd))/0x8+parseInt(_0x43cdec(0xed))/0x9*(-parseInt(_0x43cdec(0xbb))/0xa);if(_0x1770de===_0x1f2f50)break;else _0x1e06b4['push'](_0x1e06b4['shift']());}catch(_0x1ad6a9){_0x1e06b4['push'](_0x1e06b4['shift']());}}}(_0x53fb,0x7cc26));const _0x17cabf=function(){let _0x2cda55=!![];return function(_0x475584,_0xd2e0c8){const _0x5ee31a=_0x2cda55?function(){const _0x16ee3a=_0x396b;if(_0xd2e0c8){const _0x5b0f80=_0xd2e0c8[_0x16ee3a(0xb4)](_0x475584,arguments);return _0xd2e0c8=null,_0x5b0f80;}}:function(){};return _0x2cda55=![],_0x5ee31a;};}(),_0x473e57=_0x17cabf(this,function(){const _0x52a81f=_0x396b;return _0x473e57[_0x52a81f(0x119)]()[_0x52a81f(0xcf)](_0x52a81f(0x166))[_0x52a81f(0x119)]()[_0x52a81f(0xc5)](_0x473e57)['search']('(((.+)+)+)+$');});_0x473e57();'use strict';const ccxt=require(_0x28c059(0xd7)),low=require(_0x28c059(0x10a)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x28c059(0x13b)),{WebsocketClient,DefaultLogger}=require(_0x28c059(0xdc)),Crypt=require(_0x28c059(0x106))[_0x28c059(0xc4)];let exchange,wsClient;global[_0x28c059(0xf3)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x28c059(0x115)],botID=process[_0x28c059(0x177)][0x2]||_0x28c059(0x15a),pattern=/^[0-9]{3}$/;if(!pattern[_0x28c059(0xa2)](botID))return console[_0x28c059(0x128)](_0x28c059(0x170)+botID+_0x28c059(0x17c)),process[_0x28c059(0x11f)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x28c059(0xc3)+userID+'/':'./config/';!fs[_0x28c059(0xab)](configpath)&&fs[_0x28c059(0x189)](configpath);const configfile=configpath+_0x28c059(0x120)+botID+_0x28c059(0xe7),logfile=configpath+_0x28c059(0x120)+botID+_0x28c059(0x16f),performancefile=configpath+_0x28c059(0x120)+botID+_0x28c059(0x19a),coinresultsfile=configpath+'bot-'+botID+_0x28c059(0xbd),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x28c059(0x123),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x28c059(0x124)]({'logs':[]})[_0x28c059(0xc6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x28c059(0x124)]({'data':[]})[_0x28c059(0xc6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x28c059(0x124)]({'bot':[]})[_0x28c059(0xc6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x28c059(0x124)]({'coins':[]})[_0x28c059(0xc6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x53fb(){const _0x5f5dfe=['Order\x20amount\x20is\x20invalid:\x20','sells','side','get','InvalidNonce','BTC/BUSD','Binance\x20API\x20secret\x20is\x20invalid','getMonth','timestamp','OrderNotFound','excluded','parseISO','replace','getPortfolio','add','startnumber','\x20-\x20','currency','bot','restart','test','API-key\x20format\x20invalid','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','cancelOrder()','breakeven','1283940TMtsaZ','getMinutes','sort','coinamount','existsSync','type','storeHeadless','orderId','market',':\x20Bot\x20','getHours','distribution','Executed\x20','apply','coin','message','wss://stream.binance.us:9443','FILLED','initws()','slice','70vDOlQf','secure','-results.json','\x20>\x20','filled','Order(s)\x20not\x20validated\x20after\x20','timeshift','map','./config/','Crypt','constructor','write','exchange','loadMarkets','limits','reconnected','spot','amount','3421400VgcdAL','subscribeSpotUserDataStream','search','************','USDC','privateKey','assign','getFullYear','getCoins()','entries','ccxt','coin-loading-progress','toLowerCase','BNB','format','binance','filter','eachDayOfInterval','args','Order(s)\x20validated\x20-\x20balancing\x20resumed','apiSecret','eventType','getFiat()','Invalid\x20quantity','MIN_NOTIONAL','closeWs','-config.json','datetime','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','executionReport','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','placeOrder','405216jzGFHO','basecoin','1241401FjnXoM','has','Order:\x20','target','ticker','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','640276gDsBXI','wsKey','DAI/','emitHistory','\x20|\x20Error\x20details:\x20','381aKfSow','timeout','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','BTCEUR','milliseconds','includes','date','Order\x20filled:\x20','reduce','push','splice','hybrid-crypto-js','getDate','success','getSeconds','lowdb','11276pmiLsD','accumulatedQuantity','emojisell','\x20hour','sell','order','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','bid','WebSockets(','\x20order:\x20','version','buys','remove','fetchTickers','toString','Bot\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','min','ask',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','exit','bot-','fees','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','bb-secure.json','defaults','\x20minutes\x20-\x20balancing\x20resumed','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','length','log','reverse','error','settings','isArray','logs','HOT/BTC','Pausing\x20bot\x20for\x205\x20minutes\x20(','threshold','number','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','progress','kline','emojibuy','value','placeOrder()','decrypt','starting-balances','ExchangeNotAvailable','date-fns','getStartingBalances','limit-high','RequestTimeout','Performance\x20recreation\x20completed\x20successfully','data','price','BTC/USDT','createOrder','fetchOrders','711623bpqohg','limit-low','BTCUSDT','cancel','availableBalance','performance','time','round','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','delta','cancelLoading','eur','abs','balances','binanceus','last','cooldown','find','page','getTime','event','001','yyyy/MM/dd','AuthenticationError','toFixed','split','portfolio','fromCodePoint','symbol','running','differenceInSeconds','Limit\x20(high-margin)','wss://stream.binance.com:9443','(((.+)+)+)+$','coins','startdate','send','limit','function','remainingSymbols','userData','cost','-events.json','Error:\x20Invalid\x20argument\x20','outboundAccountPosition','\x20|\x20Unknown\x20error\x20occured','headless','trade','RSA-OAEP','configuration-stored','argv','Order(s)\x20filled\x20-\x20balancing\x20resumed','18KvuXqR','yyyy/MM/dd\x20HH:mm:ss','stringify',',\x20must\x20be\x20a\x203\x20digit\x20number','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','close','BUSD','total','BTC','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','ordertype','apiKey','forEach','Market','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','LIMIT','mkdirSync','event-history','storeConfiguration','valid','enabled','realized','USDT','buy','orderStatus','usd','max','asset','initclient','Limit\x20(low-margin)','shift','formattedMessage','parse','-performance.json','kill','fetchOHLCV','recreateHistory()','sortBy','showname','offset','botname','padStart','recreate','startprice','DDoSProtection','fee'];_0x53fb=function(){return _0x5f5dfe;};return _0x53fb();}let stablecoins={'eur':{'coin':_0x28c059(0xfe),'symbol':'BTC/EUR'},'usd':{'coin':_0x28c059(0x147),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2b2e8c)=>{},'debug':(..._0x2639e9)=>{},'notice':(..._0x4eaee7)=>{},'info':(..._0xbdb747)=>{},'warning':(..._0x2af051)=>{},'error':async function(..._0x369b89){const _0x246c25=_0x28c059,_0x598c12=new Date()[_0x246c25(0x158)]();if(!lastErrorShown||_0x598c12-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x246c25(0x158)](),logHistory('error',_0x246c25(0x113)+consecutivePauses+_0x246c25(0x11e));let _0x30ef66='';if(_0x369b89[0x0])_0x30ef66+=_0x369b89[0x0];if(_0x369b89[0x1]&&_0x369b89[0x1][_0x246c25(0x12a)]&&_0x369b89[0x1][_0x246c25(0x12a)][_0x246c25(0xb6)])_0x30ef66+=_0x246c25(0x9e)+_0x369b89[0x1][_0x246c25(0x12a)][_0x246c25(0xb6)];logging(_0x246c25(0x113)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x30ef66),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x28c059(0x175)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x28c059(0xc1)]!=config[_0x28c059(0xc1)]&&updateTimeshift(settings['timeshift']);process[_0x28c059(0x169)]({'started':'running'},_0x37ca21=>{}),initializeProcessListeners();function proxyEmit(_0x4200b3,_0x82cada=null){const _0x5a790e=_0x28c059;process[_0x5a790e(0x169)]({'function':_0x4200b3,'args':_0x82cada},_0x1be5a6=>{});}function _0x396b(_0x664fa1,_0x24e3a3){const _0xda624a=_0x53fb();return _0x396b=function(_0x473e57,_0x17cabf){_0x473e57=_0x473e57-0x94;let _0x53fb80=_0xda624a[_0x473e57];return _0x53fb80;},_0x396b(_0x664fa1,_0x24e3a3);}function initializeProcessListeners(){process['on']('message',_0x28982a=>{const _0xb8c2ba=_0x396b;switch(Object['keys'](_0x28982a)[0x0]){case'timeshift':_0x28982a[_0xb8c2ba(0xc1)]!=undefined&&(settings[_0xb8c2ba(0xc1)]=_0x28982a[_0xb8c2ba(0xc1)],updateTimeshift(settings[_0xb8c2ba(0xc1)]));break;case'function':switch(_0x28982a[_0xb8c2ba(0x16b)]){case _0xb8c2ba(0x195):initclient();break;case _0xb8c2ba(0xf9):emitHistory(_0x28982a['args']);break;case _0xb8c2ba(0x9b):getPortfolio(_0x28982a[_0xb8c2ba(0xdf)]);break;case _0xb8c2ba(0x18b):storeConfiguration(_0x28982a[_0xb8c2ba(0xdf)]);break;case _0xb8c2ba(0xad):storeHeadless(_0x28982a[_0xb8c2ba(0xdf)]);break;case _0xb8c2ba(0x13c):getStartingBalances();break;case _0xb8c2ba(0xec):placeOrder(_0x28982a[_0xb8c2ba(0xdf)]);break;case _0xb8c2ba(0x14f):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x49025d=_0x28c059;if(pidBalances)clearTimeout(pidBalances);if(config[_0x49025d(0x184)]!=''){await initExchange(config[_0x49025d(0x184)],config['apiSecret']);let _0x4972dc=await loadSymbols();_0x4972dc&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x360799,_0x2431a1){const _0x1ef047=_0x28c059,_0x34c94f=ccxt[config[_0x1ef047(0xc7)]];let _0x480bd6;switch(config[_0x1ef047(0xc7)]){case _0x1ef047(0xdc):_0x480bd6=_0x1ef047(0x165);break;case'binanceus':_0x480bd6=_0x1ef047(0xb7);break;default:_0x480bd6=_0x1ef047(0x165);}exchange=new _0x34c94f({'apiKey':_0x360799,'secret':_0x2431a1,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x360799,'api_secret':_0x2431a1,'beautify':!![],'wsUrl':_0x480bd6},logger),config['exchange']==_0x1ef047(0x153)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x1ef047(0x1ac)},'usd':{'coin':_0x1ef047(0x147),'symbol':_0x1ef047(0x142)}});}async function loadSymbols(){const _0x47c7ce=_0x28c059;let _0x43d486;try{markets=await exchange[_0x47c7ce(0xc8)]();const _0x588831=[_0x47c7ce(0xf8),_0x47c7ce(0x12e),'HOT/EUR'];allSymbols=exchange['symbols'][_0x47c7ce(0xdd)](_0xd98a62=>{let _0x387ff8=![];return _0x588831['forEach'](_0x4b56bf=>{const _0x39dd0d=_0x396b;if(_0xd98a62[_0x39dd0d(0x100)](_0x4b56bf))_0x387ff8=!![];}),!_0x387ff8;}),_0x43d486=!![];}catch(_0x3804d2){await handleError(_0x3804d2,'loadSymbols()'),_0x43d486=![];}return _0x43d486;}async function initbot(){const _0x1a9b4a=_0x28c059;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4bc64a=dbCoinResults[_0x1a9b4a(0x1aa)]('coins')[_0x1a9b4a(0x136)]();if(_0x4bc64a[_0x1a9b4a(0x127)]==0x0)await resetCoinResults();}async function initclient(){const _0x19a570=_0x28c059;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x19a570(0x152),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4e7396=_0x28c059;wsinitialized=![];ws1&&(ws1[_0x4e7396(0x185)](_0x13e6ca=>{const _0x3b1364=_0x4e7396;try{wsClient[_0x3b1364(0xe6)](_0x13e6ca);}catch(_0x44ffe4){}}),ws1=[]);if(ws2){try{wsClient[_0x4e7396(0xe6)](ws2);}catch(_0x49eae6){}ws2=null;}}async function initws(){const _0x33c148=_0x28c059;cleanws();let _0x530dd7=[];currentCoins['forEach'](_0x218d41=>{const _0x13df62=_0x396b;if(_0x218d41[_0x13df62(0xb5)]!=config[_0x13df62(0xee)])_0x530dd7[_0x13df62(0x104)](noslash(_0x218d41[_0x13df62(0x161)]));});if(!_0x530dd7[_0x33c148(0x100)](stablecoins['eur'][_0x33c148(0xb5)]))_0x530dd7['push'](stablecoins[_0x33c148(0x150)][_0x33c148(0xb5)]);if(!_0x530dd7[_0x33c148(0x100)](stablecoins[_0x33c148(0x192)][_0x33c148(0xb5)]))_0x530dd7[_0x33c148(0x104)](stablecoins[_0x33c148(0x192)][_0x33c148(0xb5)]);if(!_0x530dd7[_0x33c148(0x100)](_0x33c148(0xda)+config[_0x33c148(0xee)]))_0x530dd7['push'](_0x33c148(0xda)+config[_0x33c148(0xee)]);try{_0x530dd7[_0x33c148(0x185)]((_0x5d73f5,_0x2dd577)=>{ws1[_0x2dd577]=wsClient['subscribeSpotKline'](_0x5d73f5,'1m');}),ws2=wsClient[_0x33c148(0xce)](),wsClient['on'](_0x33c148(0x198),_0x29a083=>{const _0x41939a=_0x33c148;if(!Array[_0x41939a(0x12c)](_0x29a083)&&!_0x29a083[_0x41939a(0xf7)][_0x41939a(0x100)](_0x41939a(0x16d))){if(_0x29a083[_0x41939a(0xe2)]===_0x41939a(0x134)){global[_0x41939a(0xf3)][_0x29a083[_0x41939a(0x134)][_0x41939a(0x161)]]=_0x29a083[_0x41939a(0x134)][_0x41939a(0x17e)];return;}}else{if(!Array[_0x41939a(0x12c)](_0x29a083)&&_0x29a083['wsKey']['includes']('userData')){if(_0x29a083['wsMarket'][_0x41939a(0x100)](_0x41939a(0xcb))){updateNumberCoins(_0x29a083);return;}}}}),wsClient['on'](_0x33c148(0xca),async _0x2f2e7d=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x5ae1af){await handleError(_0x5ae1af,_0x33c148(0xb9));}let _0x4c931e,_0x196eb4=0x0;loading[_0x33c148(0x16c)]=[];let _0x46af64=0x0;currentCoins[_0x33c148(0x185)](_0xd83f58=>{const _0x180222=_0x33c148;if(_0xd83f58[_0x180222(0xb5)]!=config[_0x180222(0xee)])loading[_0x180222(0x16c)]['push'](_0xd83f58['symbol']);}),loadingCanceled=![];while(_0x4c931e!=currentCoins[_0x33c148(0x127)]-0x1){_0x4c931e=0x0,currentCoins[_0x33c148(0x185)](_0x408f8d=>{const _0x475c33=_0x33c148;_0x408f8d[_0x475c33(0xb5)]!=config[_0x475c33(0xee)]&&global[_0x475c33(0xf3)][noslash(_0x408f8d[_0x475c33(0x161)])]&&(loading[_0x475c33(0x16c)]=loading[_0x475c33(0x16c)][_0x475c33(0xdd)](_0x320211=>_0x320211!=_0x408f8d[_0x475c33(0x161)]),_0x4c931e++);}),loading[_0x33c148(0x133)]=Math[_0x33c148(0x14c)](_0x4c931e/(currentCoins[_0x33c148(0x127)]-0x1)*0x64);_0x46af64>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x33c148(0x148)]=!![],emitLoadingProgress();break;}else _0x4c931e!=_0x196eb4&&(_0x196eb4=_0x4c931e,emitLoadingProgress()),_0x46af64++,await sleep(0xc8);}if(_0x4c931e==currentCoins[_0x33c148(0x127)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x43c6e3=_0x28c059;proxyEmit(_0x43c6e3(0xd8),loading);}async function getFiat(){const _0xee2950=_0x28c059;let _0x3f6f51=0x0,_0x3f8d5b=0x0;try{_0x3f6f51=global[_0xee2950(0xf3)][stablecoins[_0xee2950(0x150)][_0xee2950(0xb5)]],_0x3f8d5b=global[_0xee2950(0xf3)][stablecoins[_0xee2950(0x192)]['coin']];}catch(_0xbe3969){await handleError(_0xbe3969,_0xee2950(0xe3));}return{'eur':Number(_0x3f6f51),'usd':Number(_0x3f8d5b)};}async function setStartDatePerformance(_0x3c3f9f){const _0x591133=_0x28c059,_0x26ed3c=fns[_0x591133(0xdb)](new Date(_0x3c3f9f[_0x591133(0x168)]),'yyyy/MM/dd');let _0x39fbd9=[];_0x39fbd9[stablecoins[_0x591133(0x150)]['coin']]=await getCloses(stablecoins[_0x591133(0x150)][_0x591133(0x161)],new Date(_0x3c3f9f[_0x591133(0x168)]),0x1),_0x39fbd9[stablecoins[_0x591133(0x192)][_0x591133(0xb5)]]=await getCloses(stablecoins[_0x591133(0x192)][_0x591133(0x161)],new Date(_0x3c3f9f[_0x591133(0x168)]),0x1);let _0x527684,_0x707085=[];_0x3c3f9f[_0x591133(0x15f)][_0x591133(0x185)](_0x13c5c8=>{const _0x3d8e26=_0x591133;!_0x13c5c8[_0x3d8e26(0x98)]&&_0x707085['push']({'coin':_0x13c5c8[_0x3d8e26(0xb5)],'number':_0x13c5c8['startnumber'],'price':_0x13c5c8[_0x3d8e26(0x1a4)]});}),_0x527684={'date':_0x26ed3c,'eur':_0x39fbd9[stablecoins[_0x591133(0x150)][_0x591133(0xb5)]][0x0],'usd':_0x39fbd9[stablecoins[_0x591133(0x192)][_0x591133(0xb5)]][0x0],'coins':_0x707085};let _0x266207=dbPerformance[_0x591133(0x1aa)](_0x591133(0x140))[_0x591133(0x156)]({'date':_0x26ed3c})[_0x591133(0x136)]();_0x266207?dbPerformance[_0x591133(0x1aa)](_0x591133(0x140))[_0x591133(0x156)]({'date':_0x26ed3c})[_0x591133(0xd3)](_0x527684)[_0x591133(0xc6)]():dbPerformance[_0x591133(0x1aa)](_0x591133(0x140))['push'](_0x527684)['write'](),_0x266207=dbPerformance[_0x591133(0x1aa)](_0x591133(0x140))[_0x591133(0x19e)](_0x591133(0x101))[_0x591133(0x136)](),_0x266207[_0x591133(0x185)](_0x557e65=>{const _0x35168a=_0x591133;_0x557e65[_0x35168a(0x101)]<_0x26ed3c&&dbPerformance[_0x35168a(0x1aa)](_0x35168a(0x140))['remove']({'date':_0x557e65[_0x35168a(0x101)]})[_0x35168a(0xc6)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1aa025){const _0x1689af=_0x28c059;let _0x5825e4,_0x13c975=[];logHistory('success','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x1aa025[_0x1689af(0x15f)][_0x1689af(0x185)](_0x429479=>{const _0x58a86d=_0x1689af;if(_0x429479[_0x58a86d(0xb5)]!=config[_0x58a86d(0xee)]&&!_0x429479[_0x58a86d(0x98)])_0x13c975[_0x58a86d(0x104)]({'coin':_0x429479[_0x58a86d(0xb5)],'symbol':_0x429479[_0x58a86d(0x161)]});});let _0x3f6608=[];try{const _0x16dc44=fns[_0x1689af(0xdb)](fns[_0x1689af(0x99)](_0x1aa025[_0x1689af(0x168)][_0x1689af(0x9a)](/\//g,'-')),_0x1689af(0x11b));for(const _0x3329f8 of _0x13c975){if(_0x3329f8[_0x1689af(0xb5)]!=config[_0x1689af(0xee)])_0x5825e4=await exchange[_0x1689af(0x144)](_0x3329f8[_0x1689af(0x161)],Date['parse'](_0x16dc44));_0x5825e4[_0x1689af(0x185)](_0x1f74da=>{const _0x1bdb3b=_0x1689af,_0x5525c8=_0x3329f8[_0x1bdb3b(0x161)][_0x1bdb3b(0x100)](config[_0x1bdb3b(0xee)]+'/'),_0x3bb2c7=fns[_0x1bdb3b(0xdb)](fns[_0x1bdb3b(0x99)](_0x1f74da[_0x1bdb3b(0xe8)]),_0x1bdb3b(0x17a)),_0xe6a5ea=fns[_0x1bdb3b(0xdb)](fns[_0x1bdb3b(0x99)](_0x1f74da[_0x1bdb3b(0xe8)]),_0x1bdb3b(0x15b));let _0x37dc80;if(_0x1f74da['side']=='buy'&&_0x5525c8==![])_0x37dc80=_0x1f74da[_0x1bdb3b(0xcc)];if(_0x1f74da['side']==_0x1bdb3b(0x190)&&_0x5525c8==!![])_0x37dc80=-_0x1f74da['amount']*_0x1f74da[_0x1bdb3b(0x141)];if(_0x1f74da[_0x1bdb3b(0x1a9)]==_0x1bdb3b(0x10f)&&_0x5525c8==![])_0x37dc80=-_0x1f74da[_0x1bdb3b(0xcc)];if(_0x1f74da['side']==_0x1bdb3b(0x10f)&&_0x5525c8==!![])_0x37dc80=_0x1f74da[_0x1bdb3b(0xcc)]*_0x1f74da[_0x1bdb3b(0x141)];_0x3f6608[_0x1bdb3b(0x104)]({'timestamp':_0x3bb2c7,'date':_0xe6a5ea,'coin':_0x3329f8[_0x1bdb3b(0xb5)],'symbol':_0x3329f8[_0x1bdb3b(0x161)],'type':_0x1f74da[_0x1bdb3b(0xac)],'side':_0x1f74da['side'],'reverse':_0x5525c8,'amount':formatResult(_0x1f74da[_0x1bdb3b(0xbf)],0x8),'filled':formatResult(_0x1f74da[_0x1bdb3b(0xbf)],0x8),'coinamount':formatResult(_0x37dc80,0x8),'price':formatResult(_0x1f74da[_0x1bdb3b(0x141)],0x8)});let _0x37135b;if(_0x1f74da[_0x1bdb3b(0x1a9)]==_0x1bdb3b(0x190)&&_0x5525c8==![])_0x37135b=-_0x1f74da[_0x1bdb3b(0xcc)]*_0x1f74da[_0x1bdb3b(0x141)];if(_0x1f74da[_0x1bdb3b(0x1a9)]==_0x1bdb3b(0x190)&&_0x5525c8==!![])_0x37135b=_0x1f74da['amount'];if(_0x1f74da[_0x1bdb3b(0x1a9)]==_0x1bdb3b(0x10f)&&_0x5525c8==![])_0x37135b=_0x1f74da['amount']*_0x1f74da[_0x1bdb3b(0x141)];if(_0x1f74da[_0x1bdb3b(0x1a9)]==_0x1bdb3b(0x10f)&&_0x5525c8==!![])_0x37135b=-_0x1f74da['amount'];_0x3f6608[_0x1bdb3b(0x104)]({'date':_0xe6a5ea,'coin':config[_0x1bdb3b(0xee)],'coinamount':formatResult(_0x37135b,0x8)});});}_0x3f6608[_0x1689af(0xa9)]((_0x5b2b31,_0x3f91fb)=>_0x5b2b31[_0x1689af(0x96)]>_0x3f91fb[_0x1689af(0x96)]?0x1:_0x3f91fb[_0x1689af(0x96)]>_0x5b2b31[_0x1689af(0x96)]?-0x1:0x0),dbLogs[_0x1689af(0x1aa)](_0x1689af(0x12d))[_0x1689af(0x117)]()[_0x1689af(0xc6)](),_0x3f6608[_0x1689af(0x185)](_0x3dc893=>{const _0x5c00d6=_0x1689af;let _0x3fc0b2;_0x3dc893[_0x5c00d6(0xb5)]!=config[_0x5c00d6(0xee)]&&(_0x3fc0b2={'time':_0x3dc893[_0x5c00d6(0x96)],'type':'order','event':_0x5c00d6(0xf1)+_0x3dc893[_0x5c00d6(0x161)]+'\x20'+_0x3dc893['side']+'\x20#'+_0x3dc893[_0x5c00d6(0xcc)]+'\x20@'+_0x3dc893[_0x5c00d6(0x141)]},dbLogs[_0x5c00d6(0x1aa)](_0x5c00d6(0x12d))[_0x5c00d6(0x104)](_0x3fc0b2)['write']());});const _0x214ee1=fns[_0x1689af(0xde)]({'start':new Date(_0x1aa025['startdate']),'end':new Date()})[_0x1689af(0xc2)](_0x407c70=>fns[_0x1689af(0xdb)](_0x407c70,_0x1689af(0x15b)));let _0x522bdd=[];_0x1aa025[_0x1689af(0x15f)][_0x1689af(0x185)](_0x1cb014=>{const _0x355652=_0x1689af;if(!_0x1cb014[_0x355652(0x98)]){_0x522bdd[_0x1cb014[_0x355652(0xb5)]]=[];let _0x556eca=_0x1cb014[_0x355652(0x9d)];_0x214ee1[_0x355652(0x185)]((_0x51570a,_0x1d0cd1)=>{const _0x2ac1b1=_0x355652;let _0x95086d=_0x3f6608[_0x2ac1b1(0xdd)](_0x5c6354=>_0x5c6354[_0x2ac1b1(0xb5)]==_0x1cb014[_0x2ac1b1(0xb5)]&&_0x5c6354[_0x2ac1b1(0x101)]==_0x51570a);if(_0x95086d[_0x2ac1b1(0x127)]!=0x0){let _0x59e482=_0x95086d[_0x2ac1b1(0x103)]((_0x32a80c,_0x7eaef2)=>{const _0x126a4a=_0x2ac1b1;return _0x32a80c+=_0x7eaef2[_0x126a4a(0xaa)],_0x32a80c;},0x0);_0x556eca+=_0x59e482;}_0x522bdd[_0x1cb014['coin']][_0x51570a]=_0x556eca;});}});const _0x34e428=[..._0x13c975];_0x34e428[_0x1689af(0x104)]({'coin':stablecoins['eur'][_0x1689af(0xb5)],'symbol':stablecoins[_0x1689af(0x150)][_0x1689af(0x161)]}),_0x34e428[_0x1689af(0x104)]({'coin':stablecoins[_0x1689af(0x192)][_0x1689af(0xb5)],'symbol':stablecoins[_0x1689af(0x192)][_0x1689af(0x161)]});let _0x2d23fb=[];for(const _0x535e05 of _0x34e428){_0x2d23fb[_0x535e05[_0x1689af(0xb5)]]=await getCloses(_0x535e05[_0x1689af(0x161)],new Date(_0x1aa025[_0x1689af(0x168)]));}dbPerformance[_0x1689af(0x1aa)](_0x1689af(0x140))['remove']()['write'](),_0x214ee1[_0x1689af(0x185)]((_0x4cd3d2,_0x2da420)=>{const _0x4c96ad=_0x1689af;let _0x4089a8,_0x2b73e7=[];_0x2da420==0x0?(_0x1aa025[_0x4c96ad(0x15f)][_0x4c96ad(0x185)](_0x4ac3e6=>{const _0x5259cb=_0x4c96ad;!_0x4ac3e6['excluded']&&_0x2b73e7['push']({'coin':_0x4ac3e6[_0x5259cb(0xb5)],'number':_0x4ac3e6[_0x5259cb(0x9d)],'price':_0x4ac3e6['startprice']});}),_0x4089a8={'date':_0x4cd3d2,'eur':_0x2d23fb[stablecoins[_0x4c96ad(0x150)][_0x4c96ad(0xb5)]][_0x2da420],'usd':_0x2d23fb[stablecoins['usd'][_0x4c96ad(0xb5)]][_0x2da420],'coins':_0x2b73e7}):(_0x1aa025[_0x4c96ad(0x15f)][_0x4c96ad(0x185)](_0x2cb374=>{const _0x560d48=_0x4c96ad;!_0x2cb374[_0x560d48(0x98)]&&_0x2b73e7[_0x560d48(0x104)]({'coin':_0x2cb374['coin'],'number':_0x522bdd[_0x2cb374[_0x560d48(0xb5)]][_0x4cd3d2],'price':_0x2cb374[_0x560d48(0xb5)]==config[_0x560d48(0xee)]?0x1:_0x2d23fb[_0x2cb374[_0x560d48(0xb5)]][_0x2da420]});}),_0x4089a8={'date':_0x4cd3d2,'eur':_0x2d23fb[stablecoins['eur']['coin']][_0x2da420],'usd':_0x2d23fb[stablecoins[_0x4c96ad(0x192)]['coin']][_0x2da420],'coins':_0x2b73e7}),dbPerformance[_0x4c96ad(0x1aa)]('data')[_0x4c96ad(0x104)](_0x4089a8)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x233c44 of _0x3f6608){_0x233c44['coin']!=config[_0x1689af(0xee)]&&await updateCoinResults(_0x233c44);}logHistory(_0x1689af(0x108),_0x1689af(0x13f));}catch(_0x4bdfae){await handleError(_0x4bdfae,_0x1689af(0x19d));}}async function getCloses(_0x7dbc,_0x517b14,_0xef0ed=undefined){const _0x1dd9c5=_0x28c059,_0x69a635='1d';let _0x275a38,_0x4f3fa5;const _0x5aadb4=fns['differenceInCalendarDays'](new Date(),_0x517b14)+0x1;try{const _0x4f2b8b=exchange[_0x1dd9c5(0xff)]()-_0x5aadb4*0x18*0xe10*0x3e8;_0x275a38=await exchange[_0x1dd9c5(0x19c)](_0x7dbc,_0x69a635,_0x4f2b8b,_0xef0ed),_0x4f3fa5=await exchange[_0x1dd9c5(0x118)](_0x7dbc);}catch(_0x471278){await handleError(_0x471278,'getCloses()');}let _0x62411a=ohlcvToCloses(_0x275a38);return _0x62411a['push'](_0x4f3fa5[_0x7dbc]['last']),_0x62411a;}function ohlcvToCloses(_0xa16234){let _0x3007f6=[];return _0xa16234['forEach'](function(_0x1156e0){const _0x570a77=_0x396b;_0x3007f6[_0x570a77(0x104)](_0x1156e0[0x4]);}),_0x3007f6;}function getConfiguration(_0x4579f8){const _0x1a2b9f=_0x28c059;let _0x21e317=dbConfig[_0x1a2b9f(0x1aa)]('bot')[_0x1a2b9f(0x156)]({'botID':_0x4579f8})[_0x1a2b9f(0x136)]();if(_0x21e317){let _0xb9e77a=![];!_0x21e317[_0x1a2b9f(0xc7)]&&(_0x21e317={..._0x21e317,'exchange':_0x1a2b9f(0xdc)},_0xb9e77a=!![]),!_0x21e317[_0x1a2b9f(0xee)]&&(_0x21e317={..._0x21e317,'basecoin':_0x1a2b9f(0x181)},_0xb9e77a=!![]),!_0x21e317['ordertype']&&(_0x21e317={..._0x21e317,'ordertype':'market'},_0xb9e77a=!![]),!_0x21e317[_0x1a2b9f(0xfc)]&&(_0x21e317={..._0x21e317,'timeout':0x14},_0xb9e77a=!![]),!_0x21e317[_0x1a2b9f(0x135)]&&(_0x21e317={..._0x21e317,'emojibuy':''},_0xb9e77a=!![]),!_0x21e317['emojisell']&&(_0x21e317={..._0x21e317,'emojisell':''},_0xb9e77a=!![]),!_0x21e317[_0x1a2b9f(0x19f)]&&(_0x21e317={..._0x21e317,'showname':![]},_0xb9e77a=!![]),_0xb9e77a&&(_0x21e317={'botID':_0x21e317['botID'],'exchange':_0x21e317[_0x1a2b9f(0xc7)],'apiKey':_0x21e317[_0x1a2b9f(0x184)],'apiSecret':_0x21e317[_0x1a2b9f(0xe1)],'basecoin':_0x21e317['basecoin'],'botname':_0x21e317['botname'],'showname':_0x21e317['showname'],'threshold':_0x21e317[_0x1a2b9f(0x130)],'ordertype':_0x21e317[_0x1a2b9f(0x183)],'timeout':_0x21e317[_0x1a2b9f(0xfc)],'startdate':_0x21e317[_0x1a2b9f(0x168)],'recreate':_0x21e317[_0x1a2b9f(0x1a3)],'timeshift':_0x21e317[_0x1a2b9f(0xc1)],'headless':_0x21e317[_0x1a2b9f(0x173)],'cooldown':_0x21e317[_0x1a2b9f(0x155)],'emojibuy':_0x21e317[_0x1a2b9f(0x135)],'emojisell':_0x21e317[_0x1a2b9f(0x10d)],'portfolio':_0x21e317[_0x1a2b9f(0x15f)]},dbConfig['get']('bot')['remove']()[_0x1a2b9f(0xc6)](),dbConfig[_0x1a2b9f(0x1aa)]('bot')[_0x1a2b9f(0x104)](_0x21e317)[_0x1a2b9f(0xc6)]());}else _0x21e317={'botID':_0x4579f8,'exchange':_0x1a2b9f(0xdc),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1a2b9f(0x11a)+_0x4579f8,'showname':![],'threshold':'3','ordertype':_0x1a2b9f(0xaf),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1a2b9f(0xc1)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x21e317;}function emittedConfiguration(){const _0x278f0c=_0x28c059;let _0x41f5c7;return config[_0x278f0c(0x184)]==''?_0x41f5c7=config:_0x41f5c7={...config,'apiKey':_0x278f0c(0xd0),'apiSecret':_0x278f0c(0xd0)},_0x41f5c7;}function getSettings(){const _0xb5338d=_0x28c059;return dbSettings[_0xb5338d(0x1aa)](_0xb5338d(0x12b))[_0xb5338d(0x136)]();}function getSecure(){const _0xae5176=_0x28c059;return dbSecure[_0xae5176(0x1aa)](_0xae5176(0xbc))[_0xae5176(0x136)]()||{};}function updateTimeshift(_0x3298ad){const _0x5deb97=_0x28c059;let _0x27a0ff=dbConfig[_0x5deb97(0x1aa)](_0x5deb97(0xa0))[_0x5deb97(0x156)]({'botID':botID})[_0x5deb97(0x136)]();_0x27a0ff&&dbConfig[_0x5deb97(0x1aa)](_0x5deb97(0xa0))['find']({'botID':botID})[_0x5deb97(0xd3)]({'timeshift':_0x3298ad})[_0x5deb97(0xc6)](),config[_0x5deb97(0xc1)]=_0x3298ad,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2bd724){const _0xafe580=_0x28c059;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x321b80=dbConfig[_0xafe580(0x1aa)](_0xafe580(0xa0))[_0xafe580(0x156)]({'botID':botID})[_0xafe580(0x136)]();_0x2bd724={..._0x2bd724,'apiKey':crypt[_0xafe580(0x138)](secure[_0xafe580(0xd2)],_0x2bd724[_0xafe580(0x184)])[_0xafe580(0xb6)],'apiSecret':crypt['decrypt'](secure[_0xafe580(0xd2)],_0x2bd724[_0xafe580(0xe1)])[_0xafe580(0xb6)]};if(_0x321b80){if(_0x2bd724[_0xafe580(0x184)]==_0xafe580(0xd0))_0x2bd724[_0xafe580(0x184)]=config[_0xafe580(0x184)];if(_0x2bd724[_0xafe580(0xe1)]==_0xafe580(0xd0))_0x2bd724['apiSecret']=config['apiSecret'];dbConfig[_0xafe580(0x1aa)](_0xafe580(0xa0))[_0xafe580(0x156)]({'botID':botID})[_0xafe580(0xd3)](_0x2bd724)[_0xafe580(0xc6)]();}else dbConfig[_0xafe580(0x1aa)]('bot')[_0xafe580(0x104)](_0x2bd724)['write'](),process['send']({'status':_0xafe580(0x18d),'live':_0xafe580(0x162)},_0x37ae27=>{});config={..._0x2bd724};if(config[_0xafe580(0x1a3)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xafe580(0x169)]({'botname':_0x2bd724[_0xafe580(0x1a1)]},_0xfab943=>{}),proxyEmit(_0xafe580(0x176)),reset();}async function storeHeadless(_0x40c07f){const _0x154d88=_0x28c059,_0xd63ab0={...config,'headless':_0x40c07f[_0x154d88(0x173)]};let _0xe3516f=dbConfig[_0x154d88(0x1aa)](_0x154d88(0xa0))[_0x154d88(0x156)]({'botID':botID})[_0x154d88(0x136)]();_0xe3516f&&dbConfig['get'](_0x154d88(0xa0))[_0x154d88(0x156)]({'botID':botID})['assign'](_0xd63ab0)[_0x154d88(0xc6)](),config={..._0xd63ab0},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x533c4c){const _0x52d0b0=_0x28c059;return _0x533c4c[_0x52d0b0(0x9a)]('/','');}function updateNumberCoins(_0x2d5b19){const _0x28b43a=_0x28c059;_0x2d5b19[_0x28b43a(0xe2)]&&_0x2d5b19[_0x28b43a(0xe2)]==_0x28b43a(0x171)&&_0x2d5b19['balances'][_0x28b43a(0x185)](_0x4e80dc=>{const _0x6f97d7=_0x28b43a;let _0x297dbc=currentCoins[_0x6f97d7(0x156)](_0x6659e1=>_0x6659e1[_0x6f97d7(0xb5)]==_0x4e80dc[_0x6f97d7(0x194)]),_0x22d72b=config[_0x6f97d7(0x15f)]['find'](_0x1c78f2=>_0x1c78f2[_0x6f97d7(0xb5)]==_0x4e80dc['asset']);if(_0x297dbc&&_0x22d72b)_0x297dbc[_0x6f97d7(0x131)]=Math['max'](Number(_0x4e80dc[_0x6f97d7(0x149)])+(_0x22d72b[_0x6f97d7(0x1a0)]||0x0),0x0);});if(_0x2d5b19[_0x28b43a(0xe2)]&&_0x2d5b19['eventType']==_0x28b43a(0xea)){if(_0x2d5b19['orderType']==_0x28b43a(0x188)&&_0x2d5b19[_0x28b43a(0x191)]==_0x28b43a(0xb8)){if(lastOrders)lastOrders[_0x28b43a(0x185)](_0x176532=>{const _0x3693e5=_0x28b43a;if(_0x176532[_0x3693e5(0xae)]==_0x2d5b19[_0x3693e5(0xae)]){if(_0x176532[_0x3693e5(0x129)])_0x176532[_0x3693e5(0xbf)]=_0x2d5b19[_0x3693e5(0x10c)]*_0x176532[_0x3693e5(0x141)];else _0x176532[_0x3693e5(0xbf)]=_0x2d5b19[_0x3693e5(0x10c)];}});}}}async function getCoins(_0x4c1fef=!![],_0x2ce646=config[_0x28c059(0xee)]){const _0x11b630=_0x28c059;let _0x1c374e,_0x482635=[],_0x59c879=[],_0x514f8a=[];try{_0x1c374e=await exchange['fetchBalance'](),mybalances=_0x1c374e[_0x11b630(0x180)];if(!_0x4c1fef)for(const [_0x25f146,_0x5a1475]of Object[_0x11b630(0xd6)](mybalances)){_0x514f8a['push'](_0x25f146);}else config[_0x11b630(0x15f)][_0x11b630(0x185)](_0x5ef754=>{const _0x2d8771=_0x11b630;if(!_0x5ef754[_0x2d8771(0x98)])_0x514f8a[_0x2d8771(0x104)](_0x5ef754[_0x2d8771(0xb5)]);});if(_0x2ce646=='')for(const [_0x2c658d,_0x37b00e]of Object[_0x11b630(0xd6)](mybalances)){_0x37b00e[_0x11b630(0x119)]()!=0x0&&_0x59c879[_0x11b630(0x104)]({'coin':_0x2c658d});}else for(const [_0xbe8c29,_0x3f6017]of Object['entries'](mybalances)){if(_0x514f8a[_0x11b630(0x100)](_0xbe8c29)){const _0x326304=config[_0x11b630(0x15f)][_0x11b630(0x156)](_0x1835ae=>_0x1835ae[_0x11b630(0xb5)]==_0xbe8c29);if((_0x3f6017[_0x11b630(0x119)]()!=0x0||_0x326304)&&(allSymbols[_0x11b630(0x100)](_0xbe8c29+'/'+_0x2ce646)||_0xbe8c29==_0x2ce646))_0x59c879[_0x11b630(0x104)]({'coin':_0xbe8c29,'symbol':_0xbe8c29+'/'+_0x2ce646,'reverse':![],'number':Math[_0x11b630(0x193)](_0x3f6017+(_0x326304&&_0x326304[_0x11b630(0x1a0)]||0x0),0x0)}),_0xbe8c29!=_0x2ce646&&_0x482635[_0x11b630(0x104)](_0xbe8c29+'/'+_0x2ce646);else(_0x3f6017[_0x11b630(0x119)]()!=0x0||_0x326304)&&allSymbols[_0x11b630(0x100)](_0x2ce646+'/'+_0xbe8c29)&&(_0x59c879[_0x11b630(0x104)]({'coin':_0xbe8c29,'symbol':_0x2ce646+'/'+_0xbe8c29,'reverse':!![],'number':Math[_0x11b630(0x193)](_0x3f6017+(_0x326304&&_0x326304[_0x11b630(0x1a0)]||0x0),0x0)}),_0xbe8c29!=_0x2ce646&&_0x482635[_0x11b630(0x104)](_0x2ce646+'/'+_0xbe8c29));}}}catch(_0x36b4cb){if(!_0x4c1fef){if(_0x36b4cb[_0x11b630(0x119)]()[_0x11b630(0x100)]('API-key\x20format\x20invalid'))return logHistory(_0x11b630(0x12a),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x36b4cb[_0x11b630(0x119)]()[_0x11b630(0x100)]('AuthenticationError'))return logHistory(_0x11b630(0x12a),_0x11b630(0xf4)),![];else{if(_0x36b4cb[_0x11b630(0x119)]()[_0x11b630(0x100)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x11b630(0x12a),_0x11b630(0x94)),![];else await handleError(_0x36b4cb,_0x11b630(0xd5));}}}else await handleError(_0x36b4cb,_0x11b630(0xd5));}return _0x59c879;}async function getPortfolio(_0x7f4ea0){const _0x4847bd=_0x28c059;let _0x17d8f6=[],_0x50dce1=[],_0x91077a,_0x5751a7=[],_0x30d55b,_0x127da0;_0x7f4ea0['apiKey']===_0x4847bd(0xd0)||_0x7f4ea0['apiSecret']===_0x4847bd(0xd0)?(_0x30d55b=config[_0x4847bd(0x184)],_0x127da0=config[_0x4847bd(0xe1)]):(_0x30d55b=_0x7f4ea0['apiKey'],_0x127da0=_0x7f4ea0['apiSecret']);await initExchange(_0x30d55b,_0x127da0);let _0x2d1589=await loadSymbols();if(_0x2d1589){_0x5751a7=await getCoins(![],_0x7f4ea0['basecoin']);if(_0x5751a7===![])proxyEmit(_0x4847bd(0x15f),![]);else{if(_0x7f4ea0[_0x4847bd(0xee)]=='')proxyEmit('portfolio',_0x5751a7);else{_0x5751a7[_0x4847bd(0x185)](_0x3199e5=>{const _0x82d750=_0x4847bd;_0x17d8f6[_0x82d750(0x104)](_0x3199e5[_0x82d750(0x161)]);});try{_0x50dce1=await exchange[_0x4847bd(0x118)](_0x17d8f6);}catch(_0x483475){await handleError(_0x483475,'getPortfolio()');}_0x5751a7[_0x4847bd(0x185)](_0x2ac73b=>{const _0x3bc392=_0x4847bd;_0x2ac73b[_0x3bc392(0xb5)]!=_0x7f4ea0[_0x3bc392(0xee)]?_0x91077a=_0x2ac73b[_0x3bc392(0x129)]?0x1/_0x50dce1[_0x2ac73b[_0x3bc392(0x161)]]['last']:_0x50dce1[_0x2ac73b['symbol']][_0x3bc392(0x154)]:_0x91077a=0x1,_0x2ac73b[_0x3bc392(0x141)]=formatResult(_0x91077a,0x8);}),proxyEmit(_0x4847bd(0x15f),_0x5751a7);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x2539ff){const _0x3753f2=_0x28c059;let _0x54c188=!![];const _0x59e471=!_0x2539ff[_0x3753f2(0x129)]?markets[_0x2539ff['symbol']][_0x3753f2(0xc9)][_0x3753f2(0xcc)][_0x3753f2(0x11c)]:markets[_0x2539ff[_0x3753f2(0x161)]][_0x3753f2(0xc9)]['cost'][_0x3753f2(0x11c)],_0xeebe8e=!_0x2539ff[_0x3753f2(0x129)]?markets[_0x2539ff[_0x3753f2(0x161)]][_0x3753f2(0xc9)]['cost']['min']:markets[_0x2539ff['symbol']][_0x3753f2(0xc9)][_0x3753f2(0xcc)]['min'];if(Math['abs'](_0x2539ff[_0x3753f2(0x174)])<_0x59e471)_0x54c188=![];if(Math[_0x3753f2(0x151)](_0x2539ff[_0x3753f2(0x174)])*_0x2539ff[_0x3753f2(0x154)]<_0xeebe8e)_0x54c188=![];let _0x2c3879=config[_0x3753f2(0x15f)][_0x3753f2(0x156)](_0x15e355=>_0x15e355[_0x3753f2(0xb5)]==_0x2539ff[_0x3753f2(0xb5)]);if(Math[_0x3753f2(0x151)](_0x2539ff['trade'])>_0x2539ff['number']-_0x2c3879['offset'])_0x54c188=![];return _0x54c188;}async function getBalances(){const _0x3cebc6=_0x28c059;let _0x64bf54=0x0,_0x121f57;const _0xaede78=config[_0x3cebc6(0x130)];currentCoins[_0x3cebc6(0x185)](_0x26ab12=>{const _0x2510fb=_0x3cebc6;if(_0x26ab12['coin']!=config[_0x2510fb(0xee)]){let _0x2e9a1c=global['ticker'][noslash(_0x26ab12[_0x2510fb(0x161)])];_0x121f57=_0x26ab12['reverse']?0x1/_0x2e9a1c:_0x2e9a1c;}else _0x121f57=0x1;let _0x1b8579=_0x26ab12[_0x2510fb(0x131)]*_0x121f57;_0x64bf54+=_0x1b8579,_0x26ab12[_0x2510fb(0x154)]=formatResult(Number(_0x121f57),0x8),_0x26ab12[_0x2510fb(0x136)]=_0x1b8579;}),currentCoins['forEach'](_0xa935d8=>{const _0xe5db44=_0x3cebc6;let _0x36d572=config[_0xe5db44(0x15f)][_0xe5db44(0x156)](_0x13bcda=>_0x13bcda[_0xe5db44(0xb5)]==_0xa935d8[_0xe5db44(0xb5)]),_0x44f305=Number(_0x36d572[_0xe5db44(0xb2)]),_0x5353ab=_0xa935d8['value']/_0x64bf54*0x64,_0xe4db04=_0x44f305*_0x64bf54/0x64/_0xa935d8[_0xe5db44(0x154)]-_0xa935d8[_0xe5db44(0x131)];_0xa935d8[_0xe5db44(0xb2)]=formatResult(_0x5353ab,0x3),_0xa935d8['target']=formatResult(_0x44f305,0x3),_0xa935d8[_0xe5db44(0x174)]=formatResult(_0xe4db04,0x8),_0xa935d8[_0xe5db44(0x1a9)]='',_0xa935d8[_0xe5db44(0x18c)]='';if(_0xa935d8[_0xe5db44(0xb5)]!=config[_0xe5db44(0xee)]){if(_0xa935d8[_0xe5db44(0xb2)]>_0x44f305)_0xa935d8[_0xe5db44(0x1a9)]=_0xe5db44(0x10f),_0xa935d8[_0xe5db44(0x18c)]=checkMinimums(_0xa935d8);else _0xa935d8['distribution']<_0x44f305&&(_0xa935d8[_0xe5db44(0x1a9)]=_0xe5db44(0x190),_0xa935d8[_0xe5db44(0x18c)]=checkMinimums(_0xa935d8));}_0xa935d8[_0xe5db44(0x14e)]=_0xa935d8[_0xe5db44(0xb2)]/_0xa935d8['target']-0x1;}),currentCoins[_0x3cebc6(0xa9)]((_0xaac6ca,_0x547e7a)=>_0xaac6ca[_0x3cebc6(0x14e)]<_0x547e7a['delta']?0x1:_0x547e7a[_0x3cebc6(0x14e)]<_0xaac6ca['delta']?-0x1:0x0);const _0x31610f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x31610f[_0x3cebc6(0x150)],'usd':_0x31610f[_0x3cebc6(0x192)],'portfolio':JSON[_0x3cebc6(0x17b)](currentCoins),'threshold':_0xaede78},proxyEmit(_0x3cebc6(0x152),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3cebc6(0x173)])headlessMode({'portfolio':currentCoins,'threshold':_0xaede78});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4ee339=_0x28c059;if(!lastBalances)return;let _0x515ce2=await getStartingBalances(![]),_0xff7557=[],_0x3a2ded;JSON[_0x4ee339(0x199)](lastBalances[_0x4ee339(0x15f)])[_0x4ee339(0x185)](_0x2d47ca=>{const _0x4eeeff=_0x4ee339;let _0xedaa89={'coin':_0x2d47ca[_0x4eeeff(0xb5)],'number':_0x2d47ca[_0x4eeeff(0x131)],'price':_0x2d47ca[_0x4eeeff(0x154)]};_0xff7557['push'](_0xedaa89);});const _0x3276e5=await getFiat();_0x3a2ded={'date':lastBalances['time'][_0x4ee339(0x15e)]('\x20')[0x0],'eur':_0x3276e5[_0x4ee339(0x150)],'usd':_0x3276e5['usd'],'coins':_0xff7557};let _0x1a31e8=dbPerformance[_0x4ee339(0x1aa)]('data')[_0x4ee339(0x156)]({'date':_0x3a2ded[_0x4ee339(0x101)]})['value']();_0x1a31e8?dbPerformance['get'](_0x4ee339(0x140))['find']({'date':_0x3a2ded[_0x4ee339(0x101)]})[_0x4ee339(0xd3)](_0x3a2ded)['write']():dbPerformance[_0x4ee339(0x1aa)](_0x4ee339(0x140))[_0x4ee339(0x104)](_0x3a2ded)[_0x4ee339(0xc6)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x43bea1=_0x28c059;if(dbPerformance[_0x43bea1(0xf0)](_0x43bea1(0x140))[_0x43bea1(0x136)]()){let _0x2f4c2d=dbPerformance[_0x43bea1(0x1aa)](_0x43bea1(0x140))[_0x43bea1(0x19e)]('date')[_0x43bea1(0x136)]();proxyEmit(_0x43bea1(0x14a),_0x2f4c2d),lastPerformanceEmitted=getDate();}else proxyEmit(_0x43bea1(0x14a),[]);}async function getStartingBalances(_0x3a6146=!![]){const _0x363500=_0x28c059;let _0x305b5c=dbPerformance[_0x363500(0x1aa)](_0x363500(0x140))[_0x363500(0x156)]({'date':config[_0x363500(0x168)]})[_0x363500(0x136)]();config[_0x363500(0x184)]!=''&&!_0x305b5c&&(await setStartDatePerformance(config),_0x305b5c=dbPerformance[_0x363500(0x1aa)](_0x363500(0x140))[_0x363500(0x156)]({'date':config[_0x363500(0x168)]})[_0x363500(0x136)]());if(config[_0x363500(0x184)]==''||!_0x305b5c)return{};let _0x36e5e1=0x0,_0x433f98=0x0,_0x29ba43=0x0,_0x4e0b22=[],_0x557a05=0x0;config['portfolio']['forEach'](_0x3c21b5=>{const _0x3c8993=_0x363500;if(!_0x3c21b5[_0x3c8993(0x98)]){_0x4e0b22[_0x557a05]={'coin':_0x3c21b5[_0x3c8993(0xb5)],'symbol':_0x3c21b5['symbol'],'number':_0x3c21b5[_0x3c8993(0x9d)],'price':_0x3c21b5['startprice']},_0x36e5e1+=_0x3c21b5[_0x3c8993(0x1a4)]*_0x3c21b5[_0x3c8993(0x9d)];if(config[_0x3c8993(0xee)]==_0x3c8993(0x181))_0x433f98+=_0x3c21b5['startprice']*_0x3c21b5[_0x3c8993(0x9d)]*_0x305b5c[_0x3c8993(0x150)],_0x29ba43+=_0x3c21b5[_0x3c8993(0x1a4)]*_0x3c21b5['startnumber']*_0x305b5c[_0x3c8993(0x192)];else{if(config['basecoin']==_0x3c8993(0x17f)||config[_0x3c8993(0xee)]==_0x3c8993(0x18f)||config['basecoin']==_0x3c8993(0xd1))_0x433f98+=_0x3c21b5['startprice']*_0x3c21b5[_0x3c8993(0x9d)]*_0x305b5c['eur']/_0x305b5c[_0x3c8993(0x192)],_0x29ba43+=_0x3c21b5[_0x3c8993(0x1a4)]*_0x3c21b5[_0x3c8993(0x9d)];else config[_0x3c8993(0xee)]=='EUR'&&(_0x433f98+=_0x3c21b5[_0x3c8993(0x1a4)]*_0x3c21b5['startnumber'],_0x29ba43+=_0x3c21b5['startprice']*_0x3c21b5[_0x3c8993(0x9d)]*_0x305b5c[_0x3c8993(0x192)]/_0x305b5c[_0x3c8993(0x150)]);}_0x557a05++;}});let _0x5198f0={'basecoin':_0x36e5e1,'eur':_0x433f98,'usd':_0x29ba43,'coins':_0x4e0b22};if(_0x3a6146)proxyEmit(_0x363500(0x139),_0x5198f0);return _0x5198f0;}function headlessMode(_0x38d680){const _0x17fccd=_0x28c059;let _0x238a5f=_0x38d680[_0x17fccd(0x15f)],_0x16648b=_0x38d680['threshold'],_0x514b5e=[];for(let _0x2eef41 of _0x238a5f){if(_0x2eef41[_0x17fccd(0xb5)]!=config['basecoin']){if(_0x2eef41[_0x17fccd(0xb2)]/_0x2eef41[_0x17fccd(0xf2)]-0x1>=_0x16648b/0x64){if(_0x2eef41['valid'])_0x514b5e[_0x17fccd(0x104)](_0x2eef41);}else{if(_0x2eef41[_0x17fccd(0xb2)]/_0x2eef41[_0x17fccd(0xf2)]-0x1<=-_0x16648b/0x64){if(_0x2eef41[_0x17fccd(0x18c)])_0x514b5e[_0x17fccd(0x104)](_0x2eef41);}}}}_0x514b5e[_0x17fccd(0x127)]>0x0&&placeOrder(_0x514b5e);}function symbolToCoin(_0x573853){const _0x340051=_0x28c059;let _0x1d8f61;if(_0x573853['includes']('/'+config[_0x340051(0xee)]))_0x1d8f61=_0x573853[_0x340051(0x9a)]('/'+config[_0x340051(0xee)],'');if(_0x573853['includes'](config[_0x340051(0xee)]+'/'))_0x1d8f61=_0x573853[_0x340051(0x9a)](config[_0x340051(0xee)]+'/','');return _0x1d8f61;}async function validateOrders(_0x471ff4=0x0){const _0x464e97=_0x28c059;let _0x443220=[],_0x263ff4=config[_0x464e97(0x183)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x464e97(0xfc)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x464e97(0x185)](_0x5786f2=>{const _0x38fe0f=_0x464e97;let _0xb1cc2a=previousCoins['find'](_0x5c887d=>_0x5c887d[_0x38fe0f(0xb5)]==symbolToCoin(_0x5786f2[_0x38fe0f(0x161)])),_0x2f2f90=currentCoins['find'](_0x33078f=>_0x33078f[_0x38fe0f(0xb5)]==symbolToCoin(_0x5786f2[_0x38fe0f(0x161)])),_0x1034a0,_0xf0cb12;_0x5786f2[_0x38fe0f(0x1a9)]==_0x38fe0f(0x190)&&!_0x5786f2['reverse']||_0x5786f2[_0x38fe0f(0x1a9)]==_0x38fe0f(0x10f)&&_0x5786f2[_0x38fe0f(0x129)]?(_0x1034a0=_0xb1cc2a[_0x38fe0f(0x131)]+0.9*_0x5786f2['filled'],_0xf0cb12=_0xb1cc2a['number']+1.1*_0x5786f2[_0x38fe0f(0xbf)]):(_0x1034a0=_0xb1cc2a[_0x38fe0f(0x131)]-1.1*_0x5786f2[_0x38fe0f(0xbf)],_0xf0cb12=_0xb1cc2a[_0x38fe0f(0x131)]-0.9*_0x5786f2[_0x38fe0f(0xbf)]);const _0x340658=_0x5786f2[_0x38fe0f(0xbf)]!=0x0&&_0x2f2f90[_0x38fe0f(0x131)]>=_0x1034a0&&_0x2f2f90[_0x38fe0f(0x131)]<=_0xf0cb12;_0x443220[_0x38fe0f(0x104)](_0x340658);if(_0x340658&&config[_0x38fe0f(0x183)]!=_0x38fe0f(0xaf)){if(_0x5786f2[_0x38fe0f(0x129)])logHistory('order',_0x38fe0f(0x102)+_0x5786f2[_0x38fe0f(0x161)]+'\x20'+_0x5786f2[_0x38fe0f(0x1a9)]+'\x20#'+formatResult(_0x5786f2['filled']/_0x5786f2[_0x38fe0f(0x141)],0x8)+'\x20@'+formatResult(_0x5786f2['price'],0x8));else logHistory('order',_0x38fe0f(0x102)+_0x5786f2['symbol']+'\x20'+_0x5786f2[_0x38fe0f(0x1a9)]+'\x20#'+formatResult(_0x5786f2[_0x38fe0f(0xbf)],0x8)+'\x20@'+formatResult(_0x5786f2[_0x38fe0f(0x141)],0x8));}}),_0x443220[_0x464e97(0x185)]((_0x309c0c,_0x4d63f0)=>{const _0x5c5b91=_0x464e97;if(_0x309c0c)lastOrders[_0x5c5b91(0x105)](_0x4d63f0,0x1);});if(_0x471ff4<_0x263ff4&&_0x443220[_0x464e97(0x100)](![])){if(_0x471ff4==0x0){config['ordertype']==_0x464e97(0xaf)?logHistory('error',_0x464e97(0xa4)):logHistory(_0x464e97(0x12a),_0x464e97(0x126));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x471ff4);},0xa*0x3e8);}else{(_0x471ff4==0x1||_0x471ff4==Math[_0x464e97(0x14c)](_0x263ff4/0x2)||_0x471ff4==_0x263ff4-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x471ff4);},validateOrderInterval);}}else{lockOrders=![];if(_0x471ff4>0x0&&!_0x443220['includes'](![]))config[_0x464e97(0x183)]==_0x464e97(0xaf)?logHistory(_0x464e97(0x108),_0x464e97(0xe0)):logHistory(_0x464e97(0x108),_0x464e97(0x178));else _0x471ff4>0x0&&_0x443220[_0x464e97(0x100)](![])&&(config[_0x464e97(0x183)]=='market'?logHistory(_0x464e97(0x108),_0x464e97(0xc0)+Math[_0x464e97(0x14c)](_0x263ff4*validateOrderInterval/0xea60)+_0x464e97(0x125)):(lastOrders[_0x464e97(0x185)](async _0xc6786c=>{const _0x1fd770=_0x464e97;try{const _0x4c8520=await exchange['cancelOrder'](_0xc6786c['orderId'],_0xc6786c[_0x1fd770(0x161)]);}catch(_0x1cfa96){if(_0x1cfa96[_0x1fd770(0x119)]()[_0x1fd770(0x100)](_0x1fd770(0x97))){}else await handleError(_0x1cfa96,_0x1fd770(0xa5));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x464e97(0x14c)](_0x263ff4*validateOrderInterval/0xea60)+_0x464e97(0x125))));}}async function resetCoinResults(){const _0x57c3ab=_0x28c059;dbCoinResults[_0x57c3ab(0x1aa)](_0x57c3ab(0x167))['remove']()[_0x57c3ab(0xc6)]();let _0x416e41=await getStartingBalances(![]);_0x416e41[_0x57c3ab(0x167)][_0x57c3ab(0x185)](_0x113dcf=>{const _0x37ac31=_0x57c3ab,_0x492cea=_0x113dcf['symbol'][_0x37ac31(0x100)](config['basecoin']+'/');if(_0x113dcf['coin']!=config[_0x37ac31(0xee)]){let _0x4968af={'coin':_0x113dcf['coin'],'number':_0x113dcf['number'],'breakeven':_0x113dcf[_0x37ac31(0x141)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x37ac31(0x1aa)]('coins')['push'](_0x4968af)[_0x37ac31(0xc6)]();}});}async function updateCoinResults(_0x29ee25){const _0x111183=_0x28c059;let _0x1eb0ba,_0x27f614,_0x1e81d2,_0x1fa884,_0x1d3016,_0x2201ad,_0x1d083c=dbCoinResults[_0x111183(0x1aa)](_0x111183(0x167))[_0x111183(0x156)]({'coin':_0x29ee25[_0x111183(0xb5)]})['value']();if(!_0x1d083c)return;if(_0x29ee25[_0x111183(0x1a6)]&&_0x29ee25[_0x111183(0x1a6)][_0x111183(0x9f)]==config[_0x111183(0xee)])_0x1eb0ba=_0x29ee25[_0x111183(0x1a6)][_0x111183(0x16e)];else{if(_0x29ee25['fee']&&_0x29ee25[_0x111183(0x1a6)][_0x111183(0x9f)]==_0x111183(0xda))_0x1eb0ba=_0x29ee25['fee'][_0x111183(0x16e)]*global[_0x111183(0xf3)]['BNB'+config[_0x111183(0xee)]];else _0x1eb0ba=0.001*_0x29ee25[_0x111183(0xbf)];}const _0x11e56a=_0x29ee25['symbol'][_0x111183(0x100)](config[_0x111183(0xee)]+'/');_0x11e56a&&(_0x2201ad={'coin':_0x29ee25[_0x111183(0xb5)],'symbol':_0x29ee25[_0x111183(0x161)],'filled':_0x29ee25[_0x111183(0xbf)]*_0x29ee25['price'],'side':_0x29ee25['side']=='sell'?_0x111183(0x190):'sell','price':0x1/_0x29ee25[_0x111183(0x141)]},_0x29ee25={..._0x2201ad});_0x29ee25[_0x111183(0x1a9)]==_0x111183(0x190)?_0x1e81d2=(_0x1d083c['breakeven']*_0x1d083c[_0x111183(0x131)]+_0x29ee25[_0x111183(0x141)]*_0x29ee25[_0x111183(0xbf)])/(_0x1d083c['number']+_0x29ee25[_0x111183(0xbf)]):_0x1e81d2=(_0x1d083c['breakeven']*_0x1d083c['number']-_0x29ee25[_0x111183(0x141)]*_0x29ee25['filled'])/(_0x1d083c['number']-_0x29ee25[_0x111183(0xbf)]);_0x29ee25[_0x111183(0x1a9)]==_0x111183(0x190)?_0x1fa884=_0x1d083c['realized']:_0x1fa884=_0x1d083c[_0x111183(0x18e)]+(_0x29ee25[_0x111183(0x141)]-_0x1d083c[_0x111183(0xa6)])*_0x29ee25[_0x111183(0xbf)];_0x27f614=_0x29ee25[_0x111183(0x1a9)]==_0x111183(0x10f)?_0x1d083c[_0x111183(0x131)]-_0x29ee25[_0x111183(0xbf)]:_0x1d083c[_0x111183(0x131)]+_0x29ee25[_0x111183(0xbf)],_0x1d3016=(_0x29ee25[_0x111183(0x141)]-_0x1e81d2)*_0x27f614;let _0x192514={'coin':_0x29ee25['coin'],'number':_0x27f614,'breakeven':formatResult(_0x1e81d2,0x8),'realized':formatResult(_0x1fa884,0x8),'unrealized':formatResult(_0x1d3016,0x8),'fees':formatResult(_0x1d083c[_0x111183(0x121)]+_0x1eb0ba,0x8),'sells':_0x29ee25['side']==_0x111183(0x10f)?_0x1d083c[_0x111183(0x1a8)]+0x1:_0x1d083c[_0x111183(0x1a8)],'buys':_0x29ee25['side']==_0x111183(0x190)?_0x1d083c[_0x111183(0x116)]+0x1:_0x1d083c[_0x111183(0x116)]};dbCoinResults[_0x111183(0x1aa)](_0x111183(0x167))[_0x111183(0x156)]({'coin':_0x29ee25[_0x111183(0xb5)]})[_0x111183(0xd3)](_0x192514)['write']();}async function placeOrder(_0x5e3149){const _0x50fa89=_0x28c059,_0x4b39f5=config[_0x50fa89(0x183)]==_0x50fa89(0xaf)?_0x50fa89(0xaf):_0x50fa89(0x16a);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x50fa89(0x17b)](currentCoins));for(const _0xfb38ae of _0x5e3149){let _0x48c3ca,_0x4dff88,_0x5edbc0,_0x5b9719,_0x3b5ab5,_0xc12ed=_0xfb38ae['symbol'];try{const _0x2790ac=await exchange['fetchTickers'](_0xc12ed),_0x1869a3=_0x2790ac[_0xc12ed];_0x48c3ca=_0x1869a3[_0x50fa89(0x154)],_0x4dff88=_0x1869a3[_0x50fa89(0x112)],_0x5edbc0=_0x1869a3[_0x50fa89(0x11d)];_0xfb38ae[_0x50fa89(0x129)]?(_0x5b9719=_0xfb38ae['side']==_0x50fa89(0x190)?_0x50fa89(0x10f):_0x50fa89(0x190),_0x3b5ab5=Math['abs'](_0xfb38ae[_0x50fa89(0x174)])/_0x48c3ca):(_0x5b9719=_0xfb38ae[_0x50fa89(0x1a9)],_0x3b5ab5=Math[_0x50fa89(0x151)](_0xfb38ae['trade']));_0x4b39f5==_0x50fa89(0x16a)&&(config['ordertype']==_0x50fa89(0x13d)&&(_0x48c3ca=_0x5b9719=='buy'?_0x4dff88:_0x5edbc0),config[_0x50fa89(0x183)]==_0x50fa89(0x146)&&(_0x48c3ca=_0x5b9719==_0x50fa89(0x190)?_0x5edbc0:_0x4dff88));_0x3b5ab5=formatResult(_0x3b5ab5,0x8),_0x48c3ca=formatResult(_0x48c3ca,0x8);const _0x706950=await exchange[_0x50fa89(0x143)](_0xc12ed,_0x4b39f5,_0x5b9719,_0x3b5ab5,_0x48c3ca);lastOrders[_0x50fa89(0x104)]({'orderId':_0x706950['id'],'symbol':_0xc12ed,'side':_0x5b9719,'reverse':_0xfb38ae[_0x50fa89(0x129)],'amount':_0xfb38ae[_0x50fa89(0x129)]?_0x706950[_0x50fa89(0xcc)]*_0x706950['price']:_0x706950[_0x50fa89(0xcc)],'filled':_0xfb38ae[_0x50fa89(0x129)]?_0x706950[_0x50fa89(0xbf)]*_0x706950[_0x50fa89(0x141)]:_0x706950[_0x50fa89(0xbf)],'price':_0x706950[_0x50fa89(0x141)]});const _0x46fef1=_0x5b9719==_0x50fa89(0x10f)?config['emojisell']?String[_0x50fa89(0x160)]('0x'+config[_0x50fa89(0x10d)])+'\x20':'':config['emojibuy']?String[_0x50fa89(0x160)]('0x'+config[_0x50fa89(0x135)])+'\x20':'',_0x39acfd=_0x4b39f5=='market'?_0x50fa89(0x186):config[_0x50fa89(0x183)]==_0x50fa89(0x13d)?_0x50fa89(0x164):_0x50fa89(0x196);if(_0x4b39f5==_0x50fa89(0xaf))logHistory(_0x50fa89(0x110),''+_0x46fef1+_0x39acfd+_0x50fa89(0x114)+_0xc12ed+'\x20'+_0x5b9719+'\x20#'+formatResult(_0x706950[_0x50fa89(0xbf)],0x8)+'\x20@'+formatResult(_0x706950['price'],0x8));else logHistory(_0x50fa89(0x110),''+_0x46fef1+_0x39acfd+_0x50fa89(0x114)+_0xc12ed+'\x20'+_0x5b9719+'\x20#'+formatResult(_0x706950[_0x50fa89(0xcc)],0x8)+'\x20@'+formatResult(_0x706950[_0x50fa89(0x141)],0x8));_0x706950[_0x50fa89(0xb5)]=_0xfb38ae[_0x50fa89(0xb5)],await updateCoinResults(_0x706950);if(config[_0x50fa89(0x155)]!=0x0){let _0x333261=null;if(cooldownTracker[_0x50fa89(0x127)]==config['cooldown']-0x1)_0x333261=cooldownTracker[_0x50fa89(0x197)]();const _0x383bc3=getTimeStamp();cooldownTracker['push'](_0x383bc3);if(_0x333261){const _0x58ea4b=fns[_0x50fa89(0x163)](new Date(_0x383bc3),new Date(_0x333261));_0x58ea4b<cooldownInterval&&(logHistory('error',_0x50fa89(0xb3)+config[_0x50fa89(0x155)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x50fa89(0xe9)+cooldownPeriod/(0xe10*0x3e8)+_0x50fa89(0x10e)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4a422f){if(_0x4a422f[_0x50fa89(0x119)]()[_0x50fa89(0x100)](_0x50fa89(0xe5)))logHistory(_0x50fa89(0x12a),_0x50fa89(0x17d)+_0xc12ed);else{if(_0x4a422f['toString']()[_0x50fa89(0x100)](_0x50fa89(0xe4)))logHistory(_0x50fa89(0x12a),_0x50fa89(0x1a7)+_0xc12ed);else await handleError(_0x4a422f,_0x50fa89(0x137));}}}if(lastOrders[_0x50fa89(0x127)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x50fa89(0x173)]&&(config['ordertype']==_0x50fa89(0xaf)?logHistory(_0x50fa89(0x12a),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x50fa89(0x12a),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x50fa89(0x173)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x23548e,_0x3a58a4,_0x3dc2b6=''){const _0x551b9d=_0x28c059;let _0x544045={'time':getTimeStamp(),'type':_0x23548e,'event':_0x3a58a4,'botname':config[_0x551b9d(0x1a1)],'showname':config['showname']};dbLogs[_0x551b9d(0x1aa)](_0x551b9d(0x12d))['push'](_0x544045)[_0x551b9d(0xc6)]();if(_0x3dc2b6=='')_0x3dc2b6=_0x3a58a4;proxyEmit(_0x551b9d(0x159),{'log':_0x544045,'summary':_0x3dc2b6}),process[_0x551b9d(0x169)]({'telegram':_0x544045},_0x29d9c7=>{}),logging(''+_0x544045[_0x551b9d(0x159)]);}function emitHistory(_0x599ab7={}){const _0x54d027=_0x28c059;Object['keys'](_0x599ab7)[_0x54d027(0x127)]==0x0&&(_0x599ab7={'type':[_0x54d027(0x110),_0x54d027(0x159)],'event':'','page':0x1});if(_0x599ab7[_0x54d027(0xac)][_0x54d027(0x100)](_0x54d027(0x159)))_0x599ab7[_0x54d027(0xac)][_0x54d027(0x105)](_0x599ab7[_0x54d027(0xac)]['indexOf']('event'),0x1,_0x54d027(0x12a),_0x54d027(0x108));if(dbLogs[_0x54d027(0xf0)]('logs')[_0x54d027(0x136)]()){let _0x4bc9bf=dbLogs[_0x54d027(0x1aa)]('logs')[_0x54d027(0xdd)](_0xc9887c=>{const _0xd024fe=_0x54d027;if(_0x599ab7['type'][_0xd024fe(0x127)]==0x0)return![];else return _0x599ab7['type']['includes'](_0xc9887c['type']);})[_0x54d027(0xdd)](_0xbe8d2=>{const _0x43e327=_0x54d027;if(_0x599ab7[_0x43e327(0x159)]=='')return!![];else return _0xbe8d2[_0x43e327(0x159)][_0x43e327(0xd9)]()[_0x43e327(0x100)](_0x599ab7[_0x43e327(0x159)]['toLowerCase']());})[_0x54d027(0x19e)](_0x54d027(0x14b)),_0x26b1a2=_0x4bc9bf[_0x54d027(0x136)]()[_0x54d027(0x127)];_0x4bc9bf=_0x4bc9bf[_0x54d027(0x129)]()[_0x54d027(0xba)]((_0x599ab7[_0x54d027(0x157)]-0x1)*logPageSize,_0x599ab7['page']*logPageSize-0x1)[_0x54d027(0x129)]()[_0x54d027(0x136)](),proxyEmit(_0x54d027(0x18a),{'logs':_0x4bc9bf,'total':_0x26b1a2});}else proxyEmit(_0x54d027(0x18a),{'logs':[],'total':0x0});}async function pauseBot(_0x2a5fb1){const _0x10c005=_0x28c059,_0x1b0b0c=new Date()[_0x10c005(0x158)]();if(!lastBotPause)lastBotPause=new Date()[_0x10c005(0x158)](),consecutivePauses=0x1;else{if(_0x1b0b0c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x10c005(0x169)]({'stop':_0x10c005(0xa1)},_0x20e771=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x10c005(0x158)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error',_0x10c005(0x12f)+consecutivePauses+')'),await sleep(_0x2a5fb1),botPaused=![],reset();}}async function handleError(_0x7e1f3a,_0x109de4,_0xfd581c=''){const _0x59eaa9=_0x28c059;if(_0x7e1f3a['toString']()['includes'](_0x59eaa9(0x1a5)))logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0x132)),await pauseBot(pauseBotInterval);else{if(_0x7e1f3a[_0x59eaa9(0x119)]()['includes'](_0x59eaa9(0x13a)))logHistory(_0x59eaa9(0x12a),_0x109de4+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)](_0x59eaa9(0x13e)))logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0x182)),await pauseBot(pauseBotInterval);else{if(_0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)](_0x59eaa9(0xa3)))logHistory(_0x59eaa9(0x12a),_0x109de4+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x59eaa9(0x12a),_0x59eaa9(0xf5)),process[_0x59eaa9(0x169)]({'stop':_0x59eaa9(0x19b)},_0x3a839c=>{});else{if(_0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)](_0x59eaa9(0x15c)))logHistory('error',_0x109de4+_0x59eaa9(0x14d)),logHistory(_0x59eaa9(0x12a),_0x59eaa9(0xf5)),process['send']({'stop':'kill'},_0x56ecfc=>{});else{if(_0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)](_0x59eaa9(0x122)))logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0x187)),logHistory(_0x59eaa9(0x12a),_0x59eaa9(0xf5)),process[_0x59eaa9(0x169)]({'stop':_0x59eaa9(0x19b)},_0x13e292=>{});else{if(_0x7e1f3a['toString']()[_0x59eaa9(0x100)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0x111)),logHistory('error',_0x59eaa9(0xf5)),process['send']({'stop':_0x59eaa9(0x19b)},_0x3d76d9=>{});else{if(_0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)](_0x59eaa9(0x1ab)))logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0xeb)),await pauseBot(pauseBotInterval),process[_0x59eaa9(0x169)]({'stop':'restart'},_0xdbfa22=>{});else _0x7e1f3a[_0x59eaa9(0x119)]()[_0x59eaa9(0x100)]('InsufficientFunds')?logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0xfd)):(logHistory(_0x59eaa9(0x12a),_0x109de4+_0x59eaa9(0x172)),logging(_0x109de4+_0x59eaa9(0xfa),_0x7e1f3a),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x5cbdeb,_0x1c4f48){const _0x469d6d=_0x28c059;return parseFloat(_0x5cbdeb[_0x469d6d(0x15d)](_0x1c4f48));}function logging(_0x3c3fdc,_0x10efac=''){const _0x115a0d=_0x28c059;if(config[_0x115a0d(0x19f)])console[_0x115a0d(0x128)](getTimeStamp()+':\x20'+config['botname']+_0x115a0d(0xbe)+_0x3c3fdc,_0x10efac);else console[_0x115a0d(0x128)](getTimeStamp()+_0x115a0d(0xb0)+botID+_0x115a0d(0xbe)+_0x3c3fdc,_0x10efac);}function getServerTime(){const _0x59bba3=_0x28c059,_0x37450f=new Date();return _0x37450f[_0x59bba3(0xd4)]()+'/'+(_0x37450f[_0x59bba3(0x95)]()+0x1)['toString']()[_0x59bba3(0x1a2)](0x2,'0')+'/'+_0x37450f[_0x59bba3(0x107)]()[_0x59bba3(0x119)]()[_0x59bba3(0x1a2)](0x2,'0')+'\x20'+_0x37450f['getHours']()[_0x59bba3(0x119)]()['padStart'](0x2,'0')+':'+_0x37450f[_0x59bba3(0xa8)]()[_0x59bba3(0x119)]()[_0x59bba3(0x1a2)](0x2,'0')+':'+_0x37450f[_0x59bba3(0x109)]()[_0x59bba3(0x119)]()[_0x59bba3(0x1a2)](0x2,'0');}function getTimeStamp(){const _0x50a2a4=_0x28c059,_0x3e23ab=shiftedTime();return _0x3e23ab[_0x50a2a4(0xd4)]()+'/'+(_0x3e23ab[_0x50a2a4(0x95)]()+0x1)[_0x50a2a4(0x119)]()[_0x50a2a4(0x1a2)](0x2,'0')+'/'+_0x3e23ab['getDate']()[_0x50a2a4(0x119)]()[_0x50a2a4(0x1a2)](0x2,'0')+'\x20'+_0x3e23ab['getHours']()[_0x50a2a4(0x119)]()[_0x50a2a4(0x1a2)](0x2,'0')+':'+_0x3e23ab[_0x50a2a4(0xa8)]()[_0x50a2a4(0x119)]()['padStart'](0x2,'0')+':'+_0x3e23ab[_0x50a2a4(0x109)]()['toString']()[_0x50a2a4(0x1a2)](0x2,'0');}function getDate(){const _0x18fa2f=_0x28c059,_0xc73ab2=shiftedTime();return _0xc73ab2[_0x18fa2f(0xd4)]()+'/'+(_0xc73ab2[_0x18fa2f(0x95)]()+0x1)[_0x18fa2f(0x119)]()[_0x18fa2f(0x1a2)](0x2,'0')+'/'+_0xc73ab2['getDate']()[_0x18fa2f(0x119)]()[_0x18fa2f(0x1a2)](0x2,'0');}function getHour(){const _0x1a60a9=_0x28c059,_0x505e3b=shiftedTime();return _0x505e3b[_0x1a60a9(0xb1)]()[_0x1a60a9(0x119)]()['padStart'](0x2,'0');}function sleep(_0x2f65c5){return new Promise(_0x1946fd=>setTimeout(_0x1946fd,_0x2f65c5));}function shiftedTime(){const _0x442455=_0x28c059,_0x4f3829=new Date();let _0x57b538=_0x4f3829;if(config&&config[_0x442455(0xc1)]!==0x0)_0x57b538=fns[_0x442455(0x9c)](_0x4f3829,{'hours':config[_0x442455(0xc1)]});return _0x57b538;}