const _0x3f7261=_0x5a12;(function(_0x25ba45,_0x37caf6){const _0x13e336=_0x5a12,_0x50a868=_0x25ba45();while(!![]){try{const _0x452284=-parseInt(_0x13e336(0x291))/0x1*(parseInt(_0x13e336(0x246))/0x2)+-parseInt(_0x13e336(0x264))/0x3+-parseInt(_0x13e336(0x300))/0x4+-parseInt(_0x13e336(0x2c5))/0x5+-parseInt(_0x13e336(0x2f6))/0x6+parseInt(_0x13e336(0x267))/0x7*(parseInt(_0x13e336(0x242))/0x8)+-parseInt(_0x13e336(0x2fe))/0x9*(-parseInt(_0x13e336(0x278))/0xa);if(_0x452284===_0x37caf6)break;else _0x50a868['push'](_0x50a868['shift']());}catch(_0x291e4a){_0x50a868['push'](_0x50a868['shift']());}}}(_0x31e1,0x20489));const _0x29fd53=function(){let _0x39b52f=!![];return function(_0xc690b6,_0x379985){const _0x327559=_0x39b52f?function(){const _0x127666=_0x5a12;if(_0x379985){const _0x31eacf=_0x379985[_0x127666(0x1dd)](_0xc690b6,arguments);return _0x379985=null,_0x31eacf;}}:function(){};return _0x39b52f=![],_0x327559;};}(),_0x2a8ef3=_0x29fd53(this,function(){const _0x38c766=_0x5a12;return _0x2a8ef3[_0x38c766(0x227)]()[_0x38c766(0x213)](_0x38c766(0x358))[_0x38c766(0x227)]()['constructor'](_0x2a8ef3)['search'](_0x38c766(0x358));});_0x2a8ef3();'use strict';const ccxt=require(_0x3f7261(0x2dd)),low=require(_0x3f7261(0x337)),FileSync=require(_0x3f7261(0x2e5)),fs=require('fs'),fns=require(_0x3f7261(0x2b5)),Crypt=require(_0x3f7261(0x29a))[_0x3f7261(0x293)],util=require('util'),argv=require('yargs/yargs')(process[_0x3f7261(0x226)][_0x3f7261(0x1d9)](0x2))['argv'],path=require(_0x3f7261(0x2dc));let exchange;global['ticker']={},global['change']={};const usdBasecoins=[_0x3f7261(0x2c4),_0x3f7261(0x2ba),_0x3f7261(0x236),_0x3f7261(0x2c2),'USDC',_0x3f7261(0x20c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3f7261(0x2b0)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3f7261(0x24d)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3f7261(0x31b))[_0x3f7261(0x1eb)],botID=process[_0x3f7261(0x226)][0x2]||_0x3f7261(0x27a),pattern=/^[0-9]{3}$/;!pattern[_0x3f7261(0x211)](botID)&&(console[_0x3f7261(0x23c)](_0x3f7261(0x1df)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3f7261(0x226)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3f7261(0x33b),logspath=userID?_0x3f7261(0x203)+userID+'/':_0x3f7261(0x203),loggerfile=fs[_0x3f7261(0x33d)](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x3f7261(0x359)](logspath)&&fs[_0x3f7261(0x22b)](logspath);const configfile=configpath+_0x3f7261(0x29b)+botID+_0x3f7261(0x314),logfile=configpath+_0x3f7261(0x29b)+botID+_0x3f7261(0x1fc),performancefile=configpath+_0x3f7261(0x29b)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x3f7261(0x1ce),securefile=configpath+_0x3f7261(0x30c),configbackuppath=configpath+_0x3f7261(0x298),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3f7261(0x23f)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x3f7261(0x240)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3f7261(0x23f)]({'coins':[],'version':serverversion})[_0x3f7261(0x240)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3f7261(0x228),'rsaStandard':_0x3f7261(0x334)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x87dc58=>{const _0x14d4c8=_0x3f7261;console[_0x14d4c8(0x23c)](_0x87dc58);},'simple':_0x59077b=>{console['log'](_0x59077b),loggerfile['write'](util['format'](_0x59077b)+'\x0a');},'full':async(_0x11367f,_0x4ea3c6='')=>{const _0x4ea35b=_0x3f7261;let _0x29e982;if(config[_0x4ea35b(0x26f)])_0x29e982=getTimeStamp()+':\x20'+config['botname']+_0x4ea35b(0x31f)+_0x11367f;else _0x29e982=getTimeStamp()+_0x4ea35b(0x2bf)+botID+_0x4ea35b(0x31f)+_0x11367f;console[_0x4ea35b(0x23c)](_0x29e982),loggerfile[_0x4ea35b(0x240)](util[_0x4ea35b(0x317)](_0x29e982)+'\x0a'),_0x4ea3c6&&(console[_0x4ea35b(0x23c)](_0x4ea3c6),loggerfile['write'](util[_0x4ea35b(0x317)](_0x4ea3c6)+'\x0a'));},'debug':async(_0x10b8ea,_0x39c5a5='')=>{const _0x9ca990=_0x3f7261;let _0x30b8e1;if(config[_0x9ca990(0x26f)])_0x30b8e1=getTimeStamp()+':\x20'+config[_0x9ca990(0x208)]+_0x9ca990(0x2db)+_0x10b8ea;else _0x30b8e1=getTimeStamp()+':\x20Bot\x20'+botID+_0x9ca990(0x2db)+_0x10b8ea;if(debugging)console['log'](_0x30b8e1);loggerfile[_0x9ca990(0x240)](util['format'](_0x30b8e1)+'\x0a');if(_0x39c5a5){if(debugging)console['log'](_0x39c5a5);loggerfile[_0x9ca990(0x240)](util['format'](_0x39c5a5)+'\x0a');}}};process['on'](_0x3f7261(0x21a),function(_0x125188){const _0x2f08bd=_0x3f7261;logHistory(_0x2f08bd(0x237),_0x2f08bd(0x25c)),logger[_0x2f08bd(0x212)]('Uncaught\x20Exception:',_0x125188);});settings[_0x3f7261(0x262)]!=config['timeshift']&&updateTimeshift(settings[_0x3f7261(0x262)]);settings['onepagemode']!=config[_0x3f7261(0x1f9)]&&updateOnepagemode(settings[_0x3f7261(0x1f9)]);process[_0x3f7261(0x355)]({'started':_0x3f7261(0x1cc)},_0x1125ac=>{}),initializeProcessListeners();function proxyEmit(_0x441e35,_0x14d361=null){const _0x375e02=_0x3f7261;process[_0x375e02(0x355)]({'function':_0x441e35,'args':_0x14d361},_0x482169=>{});}function initializeProcessListeners(){const _0x5f0745=_0x3f7261;process['on'](_0x5f0745(0x30f),_0x59d5da=>{const _0x5ce0a2=_0x5f0745;switch(Object[_0x5ce0a2(0x1d8)](_0x59d5da)[0x0]){case _0x5ce0a2(0x262):_0x59d5da[_0x5ce0a2(0x262)]!=undefined&&(settings['timeshift']=_0x59d5da[_0x5ce0a2(0x262)],updateTimeshift(settings['timeshift']));break;case _0x5ce0a2(0x1f9):_0x59d5da[_0x5ce0a2(0x1f9)]!=undefined&&(settings['onepagemode']=_0x59d5da[_0x5ce0a2(0x1f9)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x59d5da['bots']!=undefined&&(bots=JSON[_0x5ce0a2(0x1ee)](_0x59d5da[_0x5ce0a2(0x24f)]),proxyEmit('bots',bots));break;case _0x5ce0a2(0x35e):switch(_0x59d5da['function']){case _0x5ce0a2(0x2d6):initclient();break;case _0x5ce0a2(0x2e6):toggleBotMode();break;case _0x5ce0a2(0x259):emitHistory(_0x59d5da['args']);break;case _0x5ce0a2(0x1e6):deleteHistoryAlerts(_0x59d5da[_0x5ce0a2(0x324)]);break;case _0x5ce0a2(0x30e):getPortfolio(_0x59d5da[_0x5ce0a2(0x324)]);break;case _0x5ce0a2(0x1ed):storeConfiguration(_0x59d5da[_0x5ce0a2(0x324)]);break;case'storeHeadless':storeHeadless(_0x59d5da[_0x5ce0a2(0x324)]);break;case _0x5ce0a2(0x327):storeFiat(_0x59d5da[_0x5ce0a2(0x324)]);break;case _0x5ce0a2(0x308):resetHistory();break;case _0x5ce0a2(0x301):getStartingBalances(getNormalizedPerformance());break;case _0x5ce0a2(0x2cb):placeOrder(_0x59d5da[_0x5ce0a2(0x324)]);break;case _0x5ce0a2(0x2bb):cancelLoading();break;case _0x5ce0a2(0x207):showConfig();break;case _0x5ce0a2(0x32f):sendMetricsTelegram();break;case _0x5ce0a2(0x2e3):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x5e566d=null,_0x56e985=![]){const _0x3c4932=_0x3f7261;logger[_0x3c4932(0x212)](_0x3c4932(0x2f2)+(_0x5e566d&&_0x5e566d[_0x3c4932(0x1dc)]>0x0?'additional\x20symbols\x20'+_0x5e566d[_0x3c4932(0x2c8)](','):_0x3c4932(0x2a6))+_0x3c4932(0x2f8)+(_0x56e985?_0x3c4932(0x1e9):_0x3c4932(0x329))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x56e985)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3c4932(0x33f)]!=''&&config[_0x3c4932(0x33f)]!=_0x3c4932(0x249)){if(_0x56e985){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x444ca6){handleErrorNoStop(_0x444ca6,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x5e566d);const _0x143106=await getCoins();[currentCoins,currentCoinsAll]=_0x143106,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3c4932(0x1dc)]==0x0&&allOpenOrders[_0x3c4932(0x1dc)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x164eb0=_0x3f7261;exchangeStopped=!![];try{await exchange[_0x164eb0(0x33c)]();}catch(_0x5284b2){await handleError(_0x5284b2,_0x164eb0(0x284));}}async function reloadExchange(){const _0x7b2c7f=_0x3f7261;logger[_0x7b2c7f(0x212)](_0x7b2c7f(0x283));while(lockOrders!=ORDERS[_0x7b2c7f(0x24d)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x298a7b=config['exchange'],_0x52764a=config[_0x3f7261(0x33f)],_0x32f305=config[_0x3f7261(0x353)],_0x34d866=config['apiPassword']){const _0x41735a=_0x3f7261;exchange&&await stopExchange();!supportedExchanges()[_0x41735a(0x261)](_0x298a7b)&&(logHistory('error',_0x41735a(0x230)+_0x298a7b+'\x20exchange'),killBot());const _0x5f2584=ccxt['pro'][_0x298a7b[_0x41735a(0x2ad)]()];exchange=new _0x5f2584({'apiKey':_0x52764a,'secret':_0x32f305,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x41735a(0x219)}});if(_0x34d866)exchange[_0x41735a(0x270)]=_0x34d866;}function setStableCoins(){const _0x5c29f4=_0x3f7261;let _0x1c0d33=config[_0x5c29f4(0x1e2)]==_0x5c29f4(0x201)?_0x5c29f4(0x201):_0x5c29f4(0x292),_0x3f5606=!allSymbols[_0x5c29f4(0x261)](_0x1c0d33+'/USD')?_0x5c29f4(0x2c2):_0x5c29f4(0x2c4),_0x4dc437=!allSymbols['includes'](_0x1c0d33+_0x5c29f4(0x309))?_0x3f5606:_0x5c29f4(0x224);stablecoins={'eur':{'coin':''+_0x1c0d33+_0x4dc437,'symbol':_0x1c0d33+'/'+_0x4dc437},'usd':{'coin':''+_0x1c0d33+_0x3f5606,'symbol':_0x1c0d33+'/'+_0x3f5606}};}async function initwsCcxt(_0x1eb199){const _0x204021=_0x3f7261;_0x1eb199==null&&(_0x1eb199=[],config['portfolio'][_0x204021(0x214)](_0x3eb8da=>{const _0xa1529d=_0x204021;if(!_0x3eb8da[_0xa1529d(0x33e)]&&_0x3eb8da[_0xa1529d(0x35d)]!=config[_0xa1529d(0x1e2)])_0x1eb199[_0xa1529d(0x22e)](_0x3eb8da['symbol']);}));if(!_0x1eb199[_0x204021(0x261)](stablecoins[_0x204021(0x222)][_0x204021(0x2d5)]))_0x1eb199[_0x204021(0x22e)](stablecoins['eur'][_0x204021(0x2d5)]);if(!_0x1eb199[_0x204021(0x261)](stablecoins['usd']['symbol']))_0x1eb199['push'](stablecoins['usd']['symbol']);if(config[_0x204021(0x200)][_0x204021(0x1e8)](_0x204021(0x32e))){if(!_0x1eb199[_0x204021(0x261)](_0x204021(0x32c)+config['basecoin']))_0x1eb199[_0x204021(0x22e)]('BNB/'+config['basecoin']);}loadCoins(_0x1eb199);const _0x5a595b=async _0x31e4e9=>{const _0x77836a=_0x204021;try{const _0x276cc4=await exchange[_0x77836a(0x2ed)](_0x31e4e9);global[_0x77836a(0x34a)][noslash(_0x276cc4[_0x77836a(0x2d5)])]=_0x276cc4[_0x77836a(0x28e)];}catch(_0x4600b8){await handleError(_0x4600b8,_0x77836a(0x287),_0x31e4e9);}while(!![]){if(!botPaused)try{const _0x2dd896=await exchange[_0x77836a(0x205)](_0x31e4e9);global['ticker'][noslash(_0x2dd896[0x0][_0x77836a(0x2d5)])]=_0x2dd896[0x0][_0x77836a(0x24b)],await sleep(0x3e8);}catch(_0x114395){if(!exchangeStopped)await handleError(_0x114395,_0x77836a(0x22a),_0x31e4e9);}else await sleep(0x64);}},_0x2004f9=async _0x131b56=>{const _0x1e203e=_0x204021;while(!![]){if(!botPaused)try{const _0x484af0=await exchange[_0x1e203e(0x2ed)](_0x131b56);global['change'][_0x484af0[_0x1e203e(0x2d5)]]=_0x484af0['percentage'],await sleep(0x3c*0x3e8);}catch(_0x198148){if(!exchangeStopped)await handleError(_0x198148,_0x1e203e(0x2f0),_0x131b56);}else await sleep(0x64);}},_0x554b7a=async _0x5651df=>{const _0x459396=_0x204021;while(!![]){if(!botPaused)try{const _0x1d092b=await exchange[_0x459396(0x340)](_0x5651df);_0x1d092b[_0x459396(0x214)](_0x2fb755=>{updateNumberCoinsCcxt(_0x2fb755);});}catch(_0x1cf124){if(!exchangeStopped)await handleError(_0x1cf124,_0x459396(0x340));}else await sleep(0x64);}};_0x1eb199['forEach'](_0x152e72=>{_0x5a595b(_0x152e72),_0x2004f9(_0x152e72),_0x554b7a(_0x152e72);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0xe1d827=_0x3f7261;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x33af57=await getCoins(),[_0x15084f,_0x5b899e]=_0x33af57;let _0x3f5c90=[];currentCoins['forEach'](_0x3e1acd=>{const _0x2e7fd4=_0x5a12,_0x37c443=_0x15084f[_0x2e7fd4(0x1d7)](_0x3d3c74=>_0x3d3c74[_0x2e7fd4(0x35d)]==_0x3e1acd[_0x2e7fd4(0x35d)]);if(_0x37c443){if(_0x3e1acd[_0x2e7fd4(0x345)]!=_0x37c443[_0x2e7fd4(0x345)]){let _0x5081d4;if(_0x3e1acd[_0x2e7fd4(0x35d)]!=config[_0x2e7fd4(0x1e2)]){const _0xfe7f31=global['ticker'][noslash(_0x3e1acd[_0x2e7fd4(0x2d5)])];_0x5081d4=_0x3e1acd[_0x2e7fd4(0x2e0)]?0x1/_0xfe7f31:_0xfe7f31;}else _0x5081d4=0x1;_0x3f5c90[_0x2e7fd4(0x22e)]({'coin':_0x3e1acd[_0x2e7fd4(0x35d)],'symbol':_0x3e1acd[_0x2e7fd4(0x2d5)],'price':_0x5081d4,'number':Number(formatResult(_0x37c443[_0x2e7fd4(0x345)]-_0x3e1acd['number'],0x8)),'basecoinvalue':_0x5081d4*(_0x37c443[_0x2e7fd4(0x345)]-_0x3e1acd[_0x2e7fd4(0x345)])});}}});if(_0x3f5c90[_0xe1d827(0x1dc)]==0x1&&!blockTransactionDetection){if(config[_0xe1d827(0x2a8)]){logger[_0xe1d827(0x212)](_0xe1d827(0x331)+_0x3f5c90[0x0]['basecoinvalue']+_0xe1d827(0x336)+lastFees[_0xe1d827(0x21c)]);if(lastFees[_0xe1d827(0x21c)]==0x0||Math['abs'](_0x3f5c90[0x0][_0xe1d827(0x272)])>lastFees[_0xe1d827(0x21c)]){delete _0x3f5c90[0x0]['symbol'],delete _0x3f5c90[0x0]['basecoinvalue'];let _0xaf8eff=[],_0x20c443=[...config['liquidity']]||[],_0x5d7645=config[_0xe1d827(0x31c)];_0x20c443[_0xe1d827(0x20f)]((_0x27c402,_0x1843c0)=>_0x27c402[_0xe1d827(0x338)]>_0x1843c0['date']?-0x1:_0x1843c0[_0xe1d827(0x338)]>_0x27c402[_0xe1d827(0x338)]?0x1:0x0);const _0x36c1e9=getDate();if(_0x20c443[0x0]){const _0xf1586a=fns[_0xe1d827(0x1ee)](_0x20c443[0x0][_0xe1d827(0x338)],'yyyy/MM/dd',new Date()),_0x3efb75=fns[_0xe1d827(0x1ee)](_0x36c1e9,_0xe1d827(0x1d1),new Date());if(fns[_0xe1d827(0x322)](_0xf1586a,_0x3efb75)){_0xaf8eff=_0x20c443[0x0][_0xe1d827(0x260)];const _0x4aad43=_0xaf8eff[_0xe1d827(0x1d7)](_0x41662d=>_0x41662d['coin']==_0x3f5c90[0x0][_0xe1d827(0x35d)]);_0x4aad43?(_0x4aad43[_0xe1d827(0x345)]+=_0x3f5c90[0x0][_0xe1d827(0x345)],_0x4aad43[_0xe1d827(0x345)]==0x0&&(_0xaf8eff=_0xaf8eff[_0xe1d827(0x2bc)](_0x5732e1=>{const _0x5ef462=_0xe1d827;return _0x5732e1[_0x5ef462(0x35d)]!=_0x3f5c90[0x0][_0x5ef462(0x35d)];}))):_0xaf8eff[_0xe1d827(0x22e)](_0x3f5c90[0x0]);const _0x4c6926=_0x5d7645[_0xe1d827(0x1d7)](_0x3b7c3a=>_0x3b7c3a[_0xe1d827(0x338)]==_0x36c1e9);_0x4c6926[_0xe1d827(0x260)]=_0xaf8eff;}else _0x5d7645[_0xe1d827(0x22e)]({'date':_0x36c1e9,'changes':[_0x3f5c90[0x0]]});}const _0x37ebfe=_0x5d7645['find'](_0x36dbde=>_0x36dbde[_0xe1d827(0x338)]==_0x36c1e9);if(_0x37ebfe){let _0x353857=!![];_0x37ebfe[_0xe1d827(0x260)][_0xe1d827(0x214)](_0x2017b7=>{if(_0x2017b7['number']!=0x0)_0x353857=![];}),_0x353857&&(_0x5d7645=_0x5d7645[_0xe1d827(0x2bc)](_0x733ab=>{const _0x4453be=_0xe1d827;return _0x733ab[_0x4453be(0x338)]!=_0x36c1e9;}));}let _0x33abdc=dbConfig['get'](_0xe1d827(0x354))[_0xe1d827(0x1d7)]({'botID':botID})[_0xe1d827(0x2eb)]();_0x33abdc&&(dbConfig[_0xe1d827(0x2ee)]('bot')[_0xe1d827(0x1d7)]({'botID':botID})[_0xe1d827(0x21f)]({'liquidity':_0x5d7645})[_0xe1d827(0x240)](),config['liquidity']=_0x5d7645),logHistory(_0xe1d827(0x28d),'Portfolio\x20change\x20detected:\x20'+Math[_0xe1d827(0x2bd)](_0x3f5c90[0x0][_0xe1d827(0x345)])+'\x20'+_0x3f5c90[0x0][_0xe1d827(0x35d)]+'\x20'+(_0x3f5c90[0x0][_0xe1d827(0x345)]>0x0?_0xe1d827(0x32a):_0xe1d827(0x21d))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0xe1d827(0x1f4),emittedConfiguration());}else logger[_0xe1d827(0x212)](_0xe1d827(0x27c)+Math['abs'](_0x3f5c90[0x0][_0xe1d827(0x345)])+'\x20'+_0x3f5c90[0x0]['coin']+'\x20'+(_0x3f5c90[0x0][_0xe1d827(0x345)]>0x0?_0xe1d827(0x32a):_0xe1d827(0x21d)));transactionDetected=!![],currentCoins=_0x15084f,currentCoinsAll=_0x5b899e;}else logger[_0xe1d827(0x212)](_0xe1d827(0x1f0)+Math[_0xe1d827(0x2bd)](_0x3f5c90[0x0]['number'])+'\x20'+_0x3f5c90[0x0][_0xe1d827(0x35d)]+'\x20'+(_0x3f5c90[0x0][_0xe1d827(0x345)]>0x0?_0xe1d827(0x32a):_0xe1d827(0x21d))+_0xe1d827(0x2c0)),currentCoins=_0x15084f,currentCoinsAll=_0x5b899e;}await sleep(watchTransactionsInterval);}catch(_0x3448fc){if(!exchangeStopped)await handleError(_0x3448fc,_0xe1d827(0x23a));}else await sleep(0x64);}}async function loadSymbols(){const _0x3b6263=_0x3f7261;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x3b6263(0x2af)](markets)[_0x3b6263(0x214)](_0x354ac3=>{const _0x340af7=_0x3b6263;_0x354ac3[0x1][_0x340af7(0x1db)]&&_0x354ac3[0x1][_0x340af7(0x219)]&&allSymbols['push'](_0x354ac3[0x0]);});}catch(_0x49f1d2){throw _0x49f1d2;}}async function initclient(){const _0x308656=_0x3f7261;emitLoadingProgress(),proxyEmit(_0x308656(0x1f4),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x28f1b6=getNormalizedPerformance();emitPerformance(_0x28f1b6),getStartingBalances(_0x28f1b6);}async function toggleBotMode(){const _0x18fdc7=_0x3f7261;let _0x43e30e=dbConfig['get'](_0x18fdc7(0x354))[_0x18fdc7(0x1d7)]({'botID':botID})[_0x18fdc7(0x2eb)]();if(_0x43e30e){const _0xa8fe20=!_0x43e30e[_0x18fdc7(0x294)];dbConfig[_0x18fdc7(0x2ee)](_0x18fdc7(0x354))['find']({'botID':botID})['assign']({'headless':_0xa8fe20})[_0x18fdc7(0x240)](),config[_0x18fdc7(0x294)]=_0xa8fe20,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x506665=_0x3f7261;process[_0x506665(0x355)]({'updatebotmanager':!![]},_0xfa1668=>{});}async function loadCoins(_0x5bccef){const _0xf823a4=_0x3f7261;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x58034b,_0xeb7a6b=0x0,_0xa4aabb=0x0;_0x5bccef[_0xf823a4(0x214)](_0x118cf0=>{const _0x300c3e=_0xf823a4;loading[_0x300c3e(0x28a)]['push'](_0x118cf0);}),loadingCanceled=![];let _0x4f2500=![];while(_0x58034b!=_0x5bccef[_0xf823a4(0x1dc)]){_0x58034b=0x0,_0x5bccef['forEach'](_0x1ac864=>{const _0x31cfae=_0xf823a4;if(global['ticker'][noslash(_0x1ac864)]){loading['remainingSymbols']=loading[_0x31cfae(0x28a)][_0x31cfae(0x2bc)](_0x8f4d71=>_0x8f4d71!=_0x1ac864);if(!watchedSymbols[_0x31cfae(0x261)](_0x1ac864))watchedSymbols[_0x31cfae(0x22e)](_0x1ac864);_0x58034b++;}}),loading['progress']=Math[_0xf823a4(0x2f3)](_0x58034b/_0x5bccef['length']*0x64);loading['progress']!=0x64&&(_0xa4aabb>0x1e*0x5&&(loading[_0xf823a4(0x2d0)]=!![],emitLoadingProgress()),_0xa4aabb>0x78*0x5&&!_0x4f2500&&(loading[_0xf823a4(0x25f)]=!![],emitLoadingProgress(),_0x4f2500=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0xf823a4(0x2c8)](',\x20')+_0xf823a4(0x290)),logHistory('error',_0xf823a4(0x26b)+loadCoinsRetryInterval/0xea60+_0xf823a4(0x34e)),pidCoinReloading=setTimeout(()=>{const _0x5992a1=_0xf823a4;process[_0x5992a1(0x355)]({'stop':_0x5992a1(0x2fb)},_0xd2181e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0xf823a4(0x25f)]=!![],emitLoadingProgress();break;}else _0x58034b!=_0xeb7a6b&&(_0xeb7a6b=_0x58034b,emitLoadingProgress()),_0xa4aabb++,await sleep(0xc8);}_0x58034b==_0x5bccef['length']&&(coinsLoaded=!![],process[_0xf823a4(0x355)]({'status':'enabled','live':_0xf823a4(0x1cc)},_0x57d4b9=>{}),_0x4f2500&&logHistory(_0xf823a4(0x28d),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x15dda7=_0x3f7261;proxyEmit(_0x15dda7(0x1f4),{...emittedConfiguration(),'configstate':_0x15dda7(0x310)});}function emitLoadingProgress(){const _0x1025ec=_0x3f7261;proxyEmit(_0x1025ec(0x268),loading);}async function getFiat(){const _0x258b7c=_0x3f7261;let _0x38f671=global[_0x258b7c(0x34a)][stablecoins[_0x258b7c(0x222)][_0x258b7c(0x35d)]],_0x7a843e=global['ticker'][stablecoins[_0x258b7c(0x216)][_0x258b7c(0x35d)]];return{'eur':Number(_0x38f671),'usd':Number(_0x7a843e)};}function capitalize(_0xd9d4fa){const _0x4677b5=_0x3f7261;return _0xd9d4fa['substring'](0x0,0x1)[_0x4677b5(0x274)]()+_0xd9d4fa[_0x4677b5(0x27d)](0x1);}function supportedExchanges(){const _0xaea38d=_0x3f7261,_0x524bf6=['ws','fetchTickers',_0xaea38d(0x2ed),_0xaea38d(0x205),'watchOrders',_0xaea38d(0x29f),_0xaea38d(0x1d4),_0xaea38d(0x2be),'fetchClosedOrders',_0xaea38d(0x23b)];let _0x2f6e93=[],_0x39d081=[],_0x35d398=ccxt[_0xaea38d(0x348)][_0xaea38d(0x20e)];_0x35d398[_0xaea38d(0x214)](_0xea060e=>{const _0x1795aa=_0xaea38d;try{const _0x3ad3c7=new ccxt[(_0x1795aa(0x348))][_0xea060e]();_0x39d081[_0x1795aa(0x22e)](_0x3ad3c7);}catch(_0x3452aa){}}),_0x39d081[_0xaea38d(0x214)](_0x291afb=>{const _0x5c1e16=_0xaea38d;let _0x542316=0x0;_0x524bf6[_0x5c1e16(0x214)](_0x4dd0b7=>{const _0x3bd5d9=_0x5c1e16;_0x4dd0b7 in _0x291afb[_0x3bd5d9(0x1f6)]&&_0x291afb['has'][_0x4dd0b7]&&_0x542316++;}),_0x542316==_0x524bf6['length']&&_0x2f6e93[_0x5c1e16(0x22e)](capitalize(_0x291afb['id']));});let _0x465b46=[];return _0x35d398[_0xaea38d(0x214)](_0x43720f=>{const _0x2d5c47=_0xaea38d;_0x43720f=capitalize(_0x43720f);if(!_0x2f6e93[_0x2d5c47(0x261)](_0x43720f))_0x465b46[_0x2d5c47(0x22e)](_0x43720f);}),_0x2f6e93;}function setStartDatePerformance(){const _0x46f7ab=_0x3f7261;if(config&&config['liquidity'][0x0][_0x46f7ab(0x260)]['length']!=0x0){const _0x39cb7e=config['liquidity'][0x0][_0x46f7ab(0x260)];dbPerformance['get'](_0x46f7ab(0x2e9))[_0x46f7ab(0x1d7)]({'date':config[_0x46f7ab(0x2b4)]})[_0x46f7ab(0x21f)]({'coins':_0x39cb7e})['write']();}}async function recreateCoinResults(){const _0x527b2f=_0x3f7261;let _0x348e4e,_0x517e94=[];try{const _0x1ebc86=fns[_0x527b2f(0x317)](fns[_0x527b2f(0x1d3)](config['startdate'][_0x527b2f(0x24a)](/\//g,'-')),_0x527b2f(0x253));for(const _0x2d81cc of currentCoins){if(_0x2d81cc[_0x527b2f(0x35d)]!=config['basecoin']){let _0x1c8987=0x0,_0x12d6ed,_0x31d8a3;_0x348e4e=await getAllEventOrders(_0x2d81cc[_0x527b2f(0x2d5)]);if(_0x348e4e['length']>0x0)_0x348e4e[_0x527b2f(0x214)](_0x564cd8=>{const _0x32fe67=_0x527b2f,_0x659946=_0x2d81cc['symbol'][_0x32fe67(0x261)](config['basecoin']+'/');_0x517e94[_0x32fe67(0x22e)]({'datetime':_0x564cd8[_0x32fe67(0x233)],'coin':_0x2d81cc[_0x32fe67(0x35d)],'symbol':_0x2d81cc['symbol'],'side':_0x564cd8[_0x32fe67(0x2b9)],'reverse':_0x659946,'amount':formatResult(_0x564cd8[_0x32fe67(0x1fb)],0x8),'filled':formatResult(_0x564cd8[_0x32fe67(0x1fb)],0x8),'price':formatResult(_0x564cd8[_0x32fe67(0x24b)],0x8)}),_0x1c8987=_0x564cd8[_0x32fe67(0x2b9)]=='buy'?_0x1c8987+_0x564cd8[_0x32fe67(0x1fb)]:_0x1c8987-_0x564cd8[_0x32fe67(0x1fb)];if(!_0x31d8a3)_0x31d8a3=_0x564cd8[_0x32fe67(0x24b)];});_0x12d6ed=_0x2d81cc[_0x527b2f(0x345)]-_0x1c8987;let _0xcb900f;config[_0x527b2f(0x31c)][_0x527b2f(0x214)](_0x558cde=>{const _0x1d8b9a=_0x527b2f;!_0xcb900f&&(_0xcb900f=_0x558cde['changes'][_0x1d8b9a(0x1d7)](_0x556e30=>_0x556e30[_0x1d8b9a(0x35d)]==_0x2d81cc[_0x1d8b9a(0x35d)]),_0xcb900f&&(_0x12d6ed=_0xcb900f['number'],_0x31d8a3=_0xcb900f[_0x1d8b9a(0x24b)]));});let _0x4e5d04=dbCoinResults[_0x527b2f(0x2ee)](_0x527b2f(0x2d7))['find']({'coin':_0x2d81cc[_0x527b2f(0x35d)]})[_0x527b2f(0x2eb)]();_0x4e5d04={'coin':_0x2d81cc[_0x527b2f(0x35d)],'number':_0x12d6ed,'breakeven':_0x31d8a3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x527b2f(0x2ee)](_0x527b2f(0x2d7))[_0x527b2f(0x1d7)]({'coin':_0x2d81cc[_0x527b2f(0x35d)]})[_0x527b2f(0x21f)](_0x4e5d04)[_0x527b2f(0x240)]();}}_0x517e94[_0x527b2f(0x20f)]((_0x162e12,_0x2e5e52)=>_0x162e12[_0x527b2f(0x233)]>_0x2e5e52[_0x527b2f(0x233)]?0x1:_0x2e5e52[_0x527b2f(0x233)]>_0x162e12[_0x527b2f(0x233)]?-0x1:0x0);let _0x4c4521=0x0;for(let _0x342ca6 of _0x517e94){await updateCoinResults(_0x342ca6,!![]);}}catch(_0x1e6d6f){await handleError(_0x1e6d6f,_0x527b2f(0x220));}}async function getAllEventOrders(_0x23b2e7){const _0x1f8ef1=_0x3f7261;let _0x3da355=[],_0x23a534=dbLogs[_0x1f8ef1(0x2ee)](_0x1f8ef1(0x257))[_0x1f8ef1(0x2bc)](_0x5325e4=>{const _0x1a6bf4=_0x1f8ef1,_0xc3f80f=_0x5325e4[_0x1a6bf4(0x2b8)]['toLowerCase']();return _0xc3f80f[_0x1a6bf4(0x261)](_0x23b2e7['toLowerCase']())&&(_0xc3f80f['includes'](_0x1a6bf4(0x296))&&_0xc3f80f[_0x1a6bf4(0x261)]('order')||_0xc3f80f[_0x1a6bf4(0x261)](_0x1a6bf4(0x1fb))&&_0xc3f80f['includes'](_0x1a6bf4(0x2df)));})['sortBy'](_0x1f8ef1(0x2a0))['value']();return _0x23a534['forEach'](_0x5b59f1=>{const _0x38b971=_0x1f8ef1,_0x522401=_0x5b59f1['event'][_0x38b971(0x261)](_0x38b971(0x25a))?_0x38b971(0x25a):_0x38b971(0x1ef),_0x53ab03=/#([0-9]|\.)+\s/i,_0x147579=Number(_0x53ab03['exec'](_0x5b59f1['event'])[0x0][_0x38b971(0x1d9)](0x1)),_0x1be8c2=/@([0-9]|\.)+$/i,_0x20eb51=Number(_0x1be8c2[_0x38b971(0x350)](_0x5b59f1[_0x38b971(0x2b8)])[0x0][_0x38b971(0x1d9)](0x1));_0x3da355[_0x38b971(0x22e)]({'datetime':_0x5b59f1[_0x38b971(0x2a0)],'coin':symbolToCoin(_0x23b2e7),'symbol':_0x23b2e7,'side':_0x522401,'amount':_0x147579,'filled':_0x147579,'price':_0x20eb51});}),_0x3da355;}async function getAllOrders(_0xe8dd89,_0x3ef7cc){const _0x5936cf=_0x3f7261;let _0x150112=[];while(_0x3ef7cc<exchange[_0x5936cf(0x326)]()){const _0x5752b8=0x1f4;try{const _0x1c3124=await exchange[_0x5936cf(0x2d8)](_0xe8dd89,_0x3ef7cc,_0x5752b8);if(_0x1c3124[_0x5936cf(0x1dc)])_0x3ef7cc=_0x1c3124[_0x1c3124[_0x5936cf(0x1dc)]-0x1]['timestamp']+0x1,_0x150112=_0x150112['concat'](_0x1c3124);else break;}catch(_0x3f83d4){await handleError(_0x3f83d4,'getAllOrders',_0xe8dd89);}}return _0x150112;}async function validate24hChanges(){const _0x46825a=_0x3f7261;for(const _0x23b2e3 of currentCoins){if(_0x23b2e3[_0x46825a(0x35d)]!=config['basecoin']){let _0x5ee4f5;_0x23b2e3[_0x46825a(0x2e0)]?_0x5ee4f5=formatResult((0x1/(global['change'][noslash(_0x23b2e3[_0x46825a(0x2d5)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5ee4f5=global['change'][noslash(_0x23b2e3[_0x46825a(0x2d5)])],_0x5ee4f5<config[_0x46825a(0x328)]&&(logHistory(_0x46825a(0x237),_0x23b2e3[_0x46825a(0x35d)]+_0x46825a(0x25b)+_0x5ee4f5+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x46825a(0x237),_0x46825a(0x234)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3a5574,_0x325ff7){const _0x335065=_0x3f7261;if(!_0x3a5574)return!![];const _0x5d88d4=_0x325ff7['split']('.'),_0x3be686=_0x3a5574[_0x335065(0x2b7)]('.');for(var _0x2dfcd1=0x0;_0x2dfcd1<_0x3be686['length'];_0x2dfcd1++){const _0x1c2ad4=~~_0x3be686[_0x2dfcd1],_0x57c0f5=~~_0x5d88d4[_0x2dfcd1];if(_0x1c2ad4<_0x57c0f5)return!![];if(_0x1c2ad4>_0x57c0f5)return![];}return![];}async function oneTimeMigration(){const _0x69b576=_0x3f7261;let _0x51faeb=dbLogs['get'](_0x69b576(0x1eb))[_0x69b576(0x2eb)]();if(isOlderVersion(_0x51faeb,_0x69b576(0x202))){let _0x829ff2=[];const _0x1bdb63=dbLogs[_0x69b576(0x2ee)](_0x69b576(0x257))[_0x69b576(0x2eb)]();_0x1bdb63[_0x69b576(0x214)](_0x579a6b=>{const _0x148b9e=_0x69b576;_0x829ff2[_0x148b9e(0x22e)]({'time':_0x579a6b[_0x148b9e(0x2a0)],'type':_0x579a6b['type'],'event':_0x579a6b[_0x148b9e(0x2b8)]});}),dbLogs['get'](_0x69b576(0x257))[_0x69b576(0x21f)](_0x829ff2)[_0x69b576(0x240)]();}let _0x18e8a1=dbConfig[_0x69b576(0x2ee)](_0x69b576(0x1eb))['value']();if(isOlderVersion(_0x18e8a1,'2.3.5')){let _0x2ee13a=dbConfig['get'](_0x69b576(0x354))[_0x69b576(0x1d7)]({'botID':botID})[_0x69b576(0x2eb)]();if(_0x2ee13a){let _0x471f4c=[];_0x2ee13a[_0x69b576(0x352)][_0x69b576(0x214)](_0x14bd17=>{const _0x41a350=_0x69b576;_0x471f4c[_0x41a350(0x22e)]({'coin':_0x14bd17['coin'],'number':_0x14bd17[_0x41a350(0x223)],'price':_0x14bd17[_0x41a350(0x275)]}),delete _0x14bd17['startnumber'],delete _0x14bd17[_0x41a350(0x275)];});if(_0x471f4c[_0x69b576(0x1dc)]!==0x0)fs[_0x69b576(0x2ce)](configbackuppath+(_0x69b576(0x1cf)+botID+_0x69b576(0x30a)),JSON[_0x69b576(0x269)](_0x471f4c,null,0x4),function(_0x5146cd){if(_0x5146cd){}});const _0x15dfc1=(_0x2bbd82,_0x4fb0cb)=>{const _0x1379b2=_0x69b576;let _0x4e1499=[];_0x4fb0cb[_0x1379b2(0x214)](_0x499bd2=>{const _0x388969=_0x1379b2,_0x4b7758=_0x2bbd82[_0x388969(0x1d7)](_0x396162=>_0x396162[_0x388969(0x35d)]==_0x499bd2[_0x388969(0x35d)]);if(!_0x4b7758)_0x4e1499[_0x388969(0x22e)](_0x499bd2);});let _0x3a81e0=[];return _0x2bbd82[_0x1379b2(0x214)](_0x560d87=>{const _0x2140fa=_0x1379b2,_0x306d1e=_0x4fb0cb[_0x2140fa(0x1d7)](_0x2e9318=>_0x2e9318[_0x2140fa(0x35d)]==_0x560d87[_0x2140fa(0x35d)]);if(!_0x306d1e||_0x306d1e[_0x2140fa(0x345)]==0x0&&_0x560d87['number']!=0x0)_0x3a81e0[_0x2140fa(0x22e)](_0x560d87);}),{'missingDay1':_0x4e1499,'notInDay2':_0x3a81e0};},_0x266bbd=dbPerformance['get'](_0x69b576(0x2e9))['cloneDeep']()[_0x69b576(0x2eb)]();if(_0x266bbd[_0x69b576(0x1dc)]>0x1){const {missingDay1:_0x236c41,notInDay2:_0x648ee2}=_0x15dfc1(_0x471f4c,_0x266bbd[0x1]['coins']);_0x471f4c=[..._0x471f4c,..._0x236c41],_0x648ee2[_0x69b576(0x214)](_0x2ac0c1=>{const _0x32c71d=_0x69b576;let _0xf6f785=_0x471f4c['findIndex'](_0x31bcc2=>_0x31bcc2[_0x32c71d(0x35d)]==_0x2ac0c1['coin']);_0xf6f785!=-0x1&&_0x471f4c[_0x32c71d(0x271)](_0xf6f785,0x1);});}_0x471f4c[_0x69b576(0x20f)]((_0x12db2e,_0x3c4399)=>_0x12db2e['coin']>_0x3c4399[_0x69b576(0x35d)]?0x1:_0x3c4399[_0x69b576(0x35d)]>_0x12db2e['coin']?-0x1:0x0);let _0x1880d2=[{'date':_0x2ee13a[_0x69b576(0x2b4)],'changes':_0x471f4c}];_0x266bbd[_0x69b576(0x1dc)]>0x2&&_0x266bbd[_0x69b576(0x214)]((_0x47ef05,_0x542c5b)=>{const _0x4994d1=_0x69b576;if(_0x542c5b>0x0&&_0x542c5b<_0x266bbd[_0x4994d1(0x1dc)]-0x1){const {missingDay1:_0xeea90c,notInDay2:_0x27c949}=_0x15dfc1(_0x266bbd[_0x542c5b]['coins'],_0x266bbd[_0x542c5b+0x1]['coins']);_0x471f4c=[],(_0xeea90c[_0x4994d1(0x1dc)]!=0x0||_0x27c949[_0x4994d1(0x1dc)]!=0x0)&&(_0xeea90c[_0x4994d1(0x1dc)]!=0x0&&_0x471f4c[_0x4994d1(0x22e)](..._0xeea90c),_0x27c949[_0x4994d1(0x1dc)]!=0x0&&(_0x27c949['forEach'](_0x1164c8=>{const _0x4fea9e=_0x4994d1;_0x1164c8[_0x4fea9e(0x345)]=-_0x1164c8[_0x4fea9e(0x345)];}),_0x471f4c[_0x4994d1(0x22e)](..._0x27c949)),_0x471f4c[_0x4994d1(0x20f)]((_0x3302bf,_0x50aaec)=>_0x3302bf[_0x4994d1(0x35d)]>_0x50aaec[_0x4994d1(0x35d)]?0x1:_0x50aaec[_0x4994d1(0x35d)]>_0x3302bf[_0x4994d1(0x35d)]?-0x1:0x0),_0x1880d2[_0x4994d1(0x22e)]({'date':_0x266bbd[_0x542c5b+0x1][_0x4994d1(0x338)],'changes':_0x471f4c}));}}),dbConfig[_0x69b576(0x2ee)](_0x69b576(0x354))['find']({'botID':botID})[_0x69b576(0x21f)]({..._0x2ee13a,'liquidity':_0x1880d2})[_0x69b576(0x240)]();}}if(isOlderVersion(_0x18e8a1,_0x69b576(0x280))){let _0x538ca7=dbConfig[_0x69b576(0x2ee)](_0x69b576(0x354))[_0x69b576(0x1d7)]({'botID':botID})[_0x69b576(0x2eb)]();if(_0x538ca7){const _0x5ea85a=_0x538ca7[_0x69b576(0x200)],_0x2dc576=_0x5ea85a?capitalize(_0x5ea85a):'Binance';dbConfig[_0x69b576(0x2ee)](_0x69b576(0x354))[_0x69b576(0x1d7)]({'botID':botID})[_0x69b576(0x21f)]({'exchange':_0x2dc576})[_0x69b576(0x240)]();}}let _0x35646a=dbPerformance[_0x69b576(0x2ee)](_0x69b576(0x1eb))[_0x69b576(0x2eb)]();isOlderVersion(_0x35646a,_0x69b576(0x202))&&setStartDatePerformance();let _0xaa7a59=dbCoinResults[_0x69b576(0x2ee)](_0x69b576(0x1eb))['value']();if(isOlderVersion(_0xaa7a59,_0x69b576(0x323))){let _0xf0ac8c=dbCoinResults[_0x69b576(0x2ee)]('coins')['value']();if(_0xf0ac8c[_0x69b576(0x1dc)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5c7e23=_0x3f7261;dbConfig['set'](_0x5c7e23(0x1eb),serverversion)[_0x5c7e23(0x240)](),dbPerformance[_0x5c7e23(0x2a9)]('version',serverversion)[_0x5c7e23(0x240)](),dbLogs[_0x5c7e23(0x2a9)](_0x5c7e23(0x1eb),serverversion)[_0x5c7e23(0x240)](),dbCoinResults[_0x5c7e23(0x2a9)](_0x5c7e23(0x1eb),serverversion)[_0x5c7e23(0x240)]();}function getConfiguration(_0x53fc97){const _0x48d825=_0x3f7261;let _0x188afc=dbConfig[_0x48d825(0x2ee)]('bot')[_0x48d825(0x1d7)]({'botID':_0x53fc97})['value']();if(_0x188afc){let _0x4fdfce=![];typeof _0x188afc[_0x48d825(0x321)]==_0x48d825(0x27f)&&(_0x188afc={..._0x188afc,'threshold':Number(_0x188afc[_0x48d825(0x321)])},_0x4fdfce=!![]),_0x188afc['change24h']==undefined&&(_0x188afc={..._0x188afc,'change24h':-0x14},_0x4fdfce=!![]),_0x188afc[_0x48d825(0x34c)]==undefined&&(_0x188afc={..._0x188afc,'fiat':_0x48d825(0x2c4)},_0x4fdfce=!![]),_0x188afc[_0x48d825(0x1f9)]==undefined&&(_0x188afc={..._0x188afc,'onepagemode':settings[_0x48d825(0x1f9)]},_0x4fdfce=!![]),_0x188afc[_0x48d825(0x303)]==undefined&&(_0x188afc={..._0x188afc,'colorscheme':_0x48d825(0x26d)},_0x4fdfce=!![]),_0x188afc[_0x48d825(0x2a8)]==undefined&&(_0x188afc={..._0x188afc,'autoliquidity':!![]},_0x4fdfce=!![]),_0x4fdfce&&(_0x188afc={'botID':_0x188afc[_0x48d825(0x1d5)],'exchange':_0x188afc[_0x48d825(0x200)],'apiKey':_0x188afc['apiKey'],'apiSecret':_0x188afc[_0x48d825(0x353)],'apiPassword':_0x188afc[_0x48d825(0x251)],'basecoin':_0x188afc[_0x48d825(0x1e2)],'botname':_0x188afc[_0x48d825(0x208)],'showname':_0x188afc[_0x48d825(0x26f)],'threshold':_0x188afc[_0x48d825(0x321)],'ordertype':_0x188afc[_0x48d825(0x2ac)],'timeout':_0x188afc['timeout'],'fiat':_0x188afc[_0x48d825(0x34c)],'startdate':_0x188afc[_0x48d825(0x2b4)],'recreate':_0x188afc['recreate'],'timeshift':_0x188afc[_0x48d825(0x262)],'onepagemode':_0x188afc[_0x48d825(0x1f9)],'headless':_0x188afc[_0x48d825(0x294)],'cooldown':_0x188afc['cooldown'],'change24h':_0x188afc['change24h'],'emojibuy':_0x188afc[_0x48d825(0x1e7)],'emojisell':_0x188afc[_0x48d825(0x2e1)],'colorscheme':_0x188afc[_0x48d825(0x303)],'portfolio':_0x188afc[_0x48d825(0x352)],'autoliquidity':_0x188afc[_0x48d825(0x2a8)],'liquidity':_0x188afc['liquidity'],'openOrders':_0x188afc['openOrders']},dbConfig[_0x48d825(0x2ee)](_0x48d825(0x354))[_0x48d825(0x2c6)]()[_0x48d825(0x240)](),dbConfig[_0x48d825(0x2ee)]('bot')[_0x48d825(0x22e)](_0x188afc)['write']());}else _0x188afc={'botID':_0x53fc97,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x53fc97,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x48d825(0x26d),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x188afc;}function emittedConfiguration(){const _0x7a3ac4=_0x3f7261;let _0x54f463;if(config[_0x7a3ac4(0x33f)]=='')_0x54f463={...config,'configstate':_0x7a3ac4(0x31e)};else config[_0x7a3ac4(0x33f)]==_0x7a3ac4(0x249)?_0x54f463={...config,'configstate':'recovery'}:(_0x54f463={...config,'apiKey':_0x7a3ac4(0x232),'apiSecret':_0x7a3ac4(0x232)},config[_0x7a3ac4(0x251)]&&(_0x54f463[_0x7a3ac4(0x251)]=_0x7a3ac4(0x232)));return _0x54f463;}function getSettings(){const _0x29cf63=_0x3f7261;return dbSettings[_0x29cf63(0x2ee)](_0x29cf63(0x1ff))[_0x29cf63(0x2eb)]();}function getSecure(){const _0x22c823=_0x3f7261;return dbSecure[_0x22c823(0x2ee)]('secure')[_0x22c823(0x2eb)]()||{};}function updateTimeshift(_0x112590){const _0x2f4607=_0x3f7261;let _0x28c81f=dbConfig[_0x2f4607(0x2ee)](_0x2f4607(0x354))['find']({'botID':botID})['value']();_0x28c81f&&dbConfig[_0x2f4607(0x2ee)]('bot')[_0x2f4607(0x1d7)]({'botID':botID})[_0x2f4607(0x21f)]({'timeshift':_0x112590})[_0x2f4607(0x240)](),config[_0x2f4607(0x262)]=_0x112590,proxyEmit(_0x2f4607(0x1f4),emittedConfiguration());}function updateOnepagemode(_0x23be37){const _0x38d701=_0x3f7261;let _0xeb7f61=dbConfig['get'](_0x38d701(0x354))['find']({'botID':botID})['value']();_0xeb7f61&&dbConfig[_0x38d701(0x2ee)](_0x38d701(0x354))[_0x38d701(0x1d7)]({'botID':botID})['assign']({'onepagemode':_0x23be37})[_0x38d701(0x240)](),config[_0x38d701(0x1f9)]=_0x23be37,proxyEmit(_0x38d701(0x1f4),emittedConfiguration());}async function storeConfiguration(_0x5307c8){const _0x52f8d9=_0x3f7261;logger[_0x52f8d9(0x212)](_0x52f8d9(0x2d1));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x52f8d9(0x212)](_0x52f8d9(0x34d));let _0x4b4b82=[],_0xa36e0d=![],_0x52e147=![],_0x739a34=[];_0x5307c8['portfolio']['forEach'](_0x12a6a6=>{const _0x49da1a=_0x52f8d9;if(!_0x12a6a6[_0x49da1a(0x33e)]&&_0x12a6a6[_0x49da1a(0x35d)]!=_0x5307c8[_0x49da1a(0x1e2)])_0x739a34[_0x49da1a(0x22e)](_0x12a6a6[_0x49da1a(0x2d5)]);}),_0x739a34[_0x52f8d9(0x214)](_0x233de8=>{const _0x4f36e2=_0x52f8d9,_0x483244=watchedSymbols[_0x4f36e2(0x261)](_0x233de8);!_0x483244&&_0x4b4b82[_0x4f36e2(0x22e)](_0x233de8);}),_0x739a34[_0x52f8d9(0x214)](_0x1d9aff=>{const _0x173fe0=_0x52f8d9,_0x384a2f=currentCoins[_0x173fe0(0x1d7)](_0x2073bf=>_0x2073bf[_0x173fe0(0x2d5)]==_0x1d9aff);!_0x384a2f&&(_0xa36e0d=!![]);}),currentCoins[_0x52f8d9(0x214)](_0x58268f=>{const _0x39f1a8=_0x52f8d9;if(_0x58268f[_0x39f1a8(0x35d)]!=config['basecoin']){const _0xf082fd=_0x739a34[_0x39f1a8(0x1d7)](_0x1dd75c=>_0x1dd75c==_0x58268f['symbol']);!_0xf082fd&&(_0xa36e0d=!![]);}}),_0x5307c8[_0x52f8d9(0x352)][_0x52f8d9(0x214)](_0x1b7a90=>{const _0xad8a5=_0x52f8d9,_0x29789f=config[_0xad8a5(0x352)][_0xad8a5(0x1d7)](_0x2a8974=>_0x2a8974[_0xad8a5(0x35d)]==_0x1b7a90[_0xad8a5(0x35d)]);if(_0x29789f&&_0x1b7a90[_0xad8a5(0x25e)]!=_0x29789f['offset'])_0x52e147=!![];});let _0x18ac75=dbConfig[_0x52f8d9(0x2ee)](_0x52f8d9(0x354))[_0x52f8d9(0x1d7)]({'botID':botID})[_0x52f8d9(0x2eb)]();_0x5307c8={..._0x5307c8,'apiKey':crypt['decrypt'](secure[_0x52f8d9(0x297)],_0x5307c8[_0x52f8d9(0x33f)])[_0x52f8d9(0x30f)],'apiSecret':crypt[_0x52f8d9(0x258)](secure[_0x52f8d9(0x297)],_0x5307c8[_0x52f8d9(0x353)])[_0x52f8d9(0x30f)]};_0x5307c8[_0x52f8d9(0x251)]&&(_0x5307c8[_0x52f8d9(0x251)]=crypt[_0x52f8d9(0x258)](secure[_0x52f8d9(0x297)],_0x5307c8['apiPassword'])[_0x52f8d9(0x30f)]);let _0xa0c21e=![];if(_0x18ac75){_0x5307c8[_0x52f8d9(0x33f)]=='************'?_0x5307c8['apiKey']=config[_0x52f8d9(0x33f)]:_0xa0c21e=!![];_0x5307c8['apiSecret']==_0x52f8d9(0x232)?_0x5307c8[_0x52f8d9(0x353)]=config[_0x52f8d9(0x353)]:_0xa0c21e=!![];if(_0x5307c8[_0x52f8d9(0x251)]==_0x52f8d9(0x232))_0x5307c8[_0x52f8d9(0x251)]=config[_0x52f8d9(0x251)];else{if(_0x5307c8[_0x52f8d9(0x251)])_0xa0c21e=!![];}dbConfig[_0x52f8d9(0x2ee)](_0x52f8d9(0x354))[_0x52f8d9(0x1d7)]({'botID':botID})[_0x52f8d9(0x21f)](_0x5307c8)[_0x52f8d9(0x240)]();}else dbConfig['get'](_0x52f8d9(0x354))['push'](_0x5307c8)[_0x52f8d9(0x240)](),_0xa0c21e=!![],process[_0x52f8d9(0x355)]({'status':_0x52f8d9(0x2c1),'live':_0x52f8d9(0x1cc)},_0x3ebbc4=>{});process[_0x52f8d9(0x355)]({'botname':_0x5307c8[_0x52f8d9(0x208)]},_0x3bc9b2=>{}),updateBotManager(),config={..._0x5307c8},proxyEmit(_0x52f8d9(0x35c)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xa0c21e)await reset(_0x4b4b82,!![]);else _0xa36e0d||_0x52e147?await reset(_0x4b4b82,![]):getBalances();blockTransactionDetection=![],logger[_0x52f8d9(0x212)](_0x52f8d9(0x347));}async function storeHeadless(_0x2d33f1){const _0x27ef32=_0x3f7261,_0x53c169={...config,'headless':_0x2d33f1[_0x27ef32(0x294)]};let _0x1a2123=dbConfig[_0x27ef32(0x2ee)](_0x27ef32(0x354))[_0x27ef32(0x1d7)]({'botID':botID})['value']();_0x1a2123&&dbConfig[_0x27ef32(0x2ee)](_0x27ef32(0x354))[_0x27ef32(0x1d7)]({'botID':botID})[_0x27ef32(0x21f)](_0x53c169)['write'](),config={..._0x53c169},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x50f696){const _0x497743=_0x3f7261,_0x195574={...config,'fiat':_0x50f696};let _0x4e5ae6=dbConfig[_0x497743(0x2ee)](_0x497743(0x354))['find']({'botID':botID})['value']();_0x4e5ae6&&dbConfig[_0x497743(0x2ee)]('bot')[_0x497743(0x1d7)]({'botID':botID})[_0x497743(0x21f)](_0x195574)['write'](),config={..._0x195574},proxyEmit(_0x497743(0x1f4),emittedConfiguration());}function resetHistory(){const _0x4bb759=_0x3f7261;logger['full'](_0x4bb759(0x252));try{if(fs[_0x4bb759(0x359)](path[_0x4bb759(0x2c8)](configpath,_0x4bb759(0x29b)+botID+_0x4bb759(0x1fc))))fs[_0x4bb759(0x320)](path[_0x4bb759(0x2c8)](configpath,_0x4bb759(0x29b)+botID+_0x4bb759(0x1fc)));if(fs[_0x4bb759(0x359)](path[_0x4bb759(0x2c8)](configpath,_0x4bb759(0x29b)+botID+_0x4bb759(0x313))))fs[_0x4bb759(0x320)](path['join'](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x4bb759(0x359)](path[_0x4bb759(0x2c8)](configpath,_0x4bb759(0x29b)+botID+_0x4bb759(0x299))))fs[_0x4bb759(0x320)](path[_0x4bb759(0x2c8)](configpath,'bot-'+botID+_0x4bb759(0x299)));}catch(_0x413477){if(_0x413477)logger['full'](_0x4bb759(0x241),_0x413477);}const _0x5f3c1d=getDate();let _0x4f2875=[];currentCoins[_0x4bb759(0x214)](_0x8d7ef9=>{const _0x3e6a26=_0x4bb759;_0x4f2875['push']({'coin':_0x8d7ef9[_0x3e6a26(0x35d)],'number':_0x8d7ef9[_0x3e6a26(0x345)],'price':_0x8d7ef9[_0x3e6a26(0x28e)]});});let _0x4aa744=dbConfig['get'](_0x4bb759(0x354))[_0x4bb759(0x1d7)]({'botID':botID})[_0x4bb759(0x2eb)]();_0x4aa744&&(dbConfig[_0x4bb759(0x2ee)]('bot')[_0x4bb759(0x1d7)]({'botID':botID})[_0x4bb759(0x21f)]({'liquidity':[{'date':_0x5f3c1d,'changes':_0x4f2875}]})['write'](),config[_0x4bb759(0x31c)]=[]),process['send']({'stop':_0x4bb759(0x2fb)},_0x45ad20=>{});}function noslash(_0x252569){const _0x415c0e=_0x3f7261;return _0x252569[_0x415c0e(0x24a)]('/','');}function updateHighestFee(_0x209d3b){const _0x134251=_0x3f7261;if(_0x209d3b[_0x134251(0x2e0)]){let _0x29362b={'filled':_0x209d3b[_0x134251(0x1fb)]*_0x209d3b[_0x134251(0x24b)],'amount':_0x209d3b[_0x134251(0x1fb)]*_0x209d3b[_0x134251(0x24b)],'side':_0x209d3b['side']=='sell'?_0x134251(0x1ef):'sell','price':0x1/_0x209d3b[_0x134251(0x24b)]};_0x209d3b={..._0x209d3b,..._0x29362b};}const _0x20edda=defaultFee*_0x209d3b[_0x134251(0x1fb)]*_0x209d3b['price'];lastFees['recent20'][_0x134251(0x1dc)]===0x14&&lastFees[_0x134251(0x305)][_0x134251(0x27b)](),lastFees[_0x134251(0x305)][_0x134251(0x22e)](_0x20edda),lastFees['highest']=Math['max'](...lastFees[_0x134251(0x305)]);}async function updateNumberCoinsCcxt(_0x22725c){const _0x3690c7=_0x3f7261;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x22725c['symbol']+_0x3690c7(0x2f8)+_0x22725c['status']+_0x3690c7(0x2f8)+_0x22725c['id']);let _0x8cb330=_0x22725c[_0x3690c7(0x238)],_0x3556e8=![];currentCoins[_0x3690c7(0x214)](_0x3e9908=>{_0x3e9908['symbol']==_0x22725c['symbol']&&(_0x3556e8=!![]);});if(!_0x3556e8)return;const _0x34f168=currentCoins['find'](_0xed2d38=>_0xed2d38[_0x3690c7(0x2d5)]==_0x22725c['symbol']),_0x35a941=_0x124b4f=>{const _0x1ff699=_0x3690c7;if(_0x34f168)_0x34f168[_0x1ff699(0x2f5)]=_0x124b4f;};if(_0x8cb330==_0x3690c7(0x2d2))_0x35a941(_0x3690c7(0x2d2));else{if(_0x8cb330==_0x3690c7(0x2c3)){_0x35a941(_0x3690c7(0x2c3));const _0x1d794a=await getCoins();[currentCoins,currentCoinsAll]=_0x1d794a,await getOpenOrders(),handleOpenOrders();}else{if(_0x8cb330==_0x3690c7(0x217)){logger['debug'](_0x3690c7(0x1f5)+_0x22725c['symbol']+_0x3690c7(0x2f8)+_0x22725c[_0x3690c7(0x1fb)]+_0x3690c7(0x2f8)+_0x22725c['id']);let _0x3ff94f=![];if(lastOrders)for(const _0x5864a2 of lastOrders){const _0x6a4935=0xc8,_0x7cb0b7=0x1388;let _0x371e87=0x0;while(!_0x5864a2[_0x3690c7(0x33a)]&&_0x371e87*_0x6a4935<_0x7cb0b7){_0x371e87++,await sleep(_0x6a4935);}if(_0x371e87>0x0)logger[_0x3690c7(0x212)]('Waited\x20'+_0x371e87*_0x6a4935/0x3e8+_0x3690c7(0x2f7));if(_0x5864a2[_0x3690c7(0x33a)]==_0x22725c['id']){logger[_0x3690c7(0x212)](_0x3690c7(0x21e)+_0x22725c['id']),_0x3ff94f=!![];if(_0x5864a2[_0x3690c7(0x1fb)]==0x0){logger[_0x3690c7(0x212)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x22725c['id']);if(_0x22725c[_0x3690c7(0x247)])_0x5864a2[_0x3690c7(0x24b)]=_0x22725c['average'];else{if(_0x22725c[_0x3690c7(0x24b)])_0x5864a2['price']=_0x22725c[_0x3690c7(0x24b)];else{}}_0x5864a2['filled']=_0x22725c[_0x3690c7(0x1fb)],updateHighestFee(_0x5864a2),_0x35a941(_0x3690c7(0x1fb)),await validateOrders();if(lockOrders==ORDERS[_0x3690c7(0x1fa)]){const _0x28f4db=await getCoins();[currentCoins,currentCoinsAll]=_0x28f4db;}_0x5864a2[_0x3690c7(0x250)]={'currency':_0x22725c[_0x3690c7(0x250)]?_0x22725c['fee']['currency']:null,'cost':_0x22725c[_0x3690c7(0x250)]?_0x22725c[_0x3690c7(0x250)][_0x3690c7(0x1da)]:0x0},await updateCoinResults(_0x5864a2);}}}if(!_0x3ff94f){logger['debug'](_0x3690c7(0x22c)+_0x22725c['id']),_0x35a941(_0x3690c7(0x1fb));const _0x2cd489=await getCoins();[currentCoins,currentCoinsAll]=_0x2cd489,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x430c25=JSON['parse'](lastBalances[_0x3690c7(0x352)]);const _0x363a4b=_0x430c25[_0x3690c7(0x1d7)](_0x285152=>_0x285152[_0x3690c7(0x2d5)]==_0x22725c['symbol']);if(_0x363a4b){if(_0x8cb330==_0x3690c7(0x2d2))_0x363a4b['orderstatus']=_0x363a4b[_0x3690c7(0x2f5)]==_0x3690c7(0x1fb)?'filled':'open';else{if(_0x8cb330=='canceled')_0x363a4b[_0x3690c7(0x2f5)]=_0x363a4b[_0x3690c7(0x2f5)]==_0x3690c7(0x1fb)?_0x3690c7(0x1fb):_0x3690c7(0x2c3);else _0x8cb330=='closed'&&(_0x363a4b[_0x3690c7(0x2f5)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x430c25)},proxyEmit(_0x3690c7(0x28f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x126312=_0x3f7261;await getOpenOrders();let _0x1d1e96=![];currentCoins[_0x126312(0x214)](_0x35e2ff=>{const _0xdfa2ae=_0x126312;_0x1d1e96=allOpenOrders[_0xdfa2ae(0x1d7)](_0x63442d=>_0x63442d[_0xdfa2ae(0x2d5)]==_0x35e2ff[_0xdfa2ae(0x2d5)]),_0x35e2ff[_0xdfa2ae(0x2f5)]=_0x1d1e96?_0xdfa2ae(0x2d2):_0xdfa2ae(0x342);});}async function getCoins(_0x36b440=!![],_0x95b478=config[_0x3f7261(0x1e2)]){const _0x5e61dd=_0x3f7261;let _0x3a31de,_0x537f49=[],_0x1db34b=[],_0x5db965=[],_0x22bfdd=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3a31de=await exchange[_0x5e61dd(0x23b)](),mybalances=_0x3a31de[_0x5e61dd(0x325)];for(const [_0xf512d,_0x1bfc85]of Object[_0x5e61dd(0x2af)](mybalances)){_0x22bfdd['push'](_0xf512d);}if(_0x95b478=='')for(const [_0x1b73fa,_0x52139e]of Object['entries'](mybalances)){_0x52139e!=0x0&&_0x1db34b['push']({'coin':_0x1b73fa});}else{let _0x4d2082=![];for(const [_0x484e4e,_0x23af9b]of Object[_0x5e61dd(0x2af)](mybalances)){if(_0x22bfdd['includes'](_0x484e4e)){const _0x518233=config[_0x5e61dd(0x352)][_0x5e61dd(0x1d7)](_0x43f798=>_0x43f798[_0x5e61dd(0x35d)]==_0x484e4e),_0x5a300e=_0x484e4e+'/'+_0x95b478,_0x2dc831=_0x95b478+'/'+_0x484e4e,_0x284ef1=currentCoins[_0x5e61dd(0x1d7)](_0x2cc495=>_0x2cc495[_0x5e61dd(0x35d)]==_0x484e4e);_0x4d2082=![];if((_0x23af9b!=0x0||_0x518233)&&(allSymbols[_0x5e61dd(0x261)](_0x5a300e)||_0x484e4e==_0x95b478))_0x484e4e!=_0x95b478&&_0x537f49['push'](_0x5a300e),_0x1db34b[_0x5e61dd(0x22e)]({'coin':_0x484e4e,'symbol':_0x5a300e,'reverse':![],'number':Math[_0x5e61dd(0x2cd)](_0x23af9b+(_0x518233&&_0x518233['offset']||0x0),0x0),'orderstatus':_0x284ef1?_0x284ef1[_0x5e61dd(0x2f5)]:'none'});else(_0x23af9b!=0x0||_0x518233)&&allSymbols[_0x5e61dd(0x261)](_0x2dc831)&&(_0x484e4e!=_0x95b478&&_0x537f49[_0x5e61dd(0x22e)](_0x2dc831),_0x1db34b[_0x5e61dd(0x22e)]({'coin':_0x484e4e,'symbol':_0x2dc831,'reverse':!![],'number':Math[_0x5e61dd(0x2cd)](_0x23af9b+(_0x518233&&_0x518233['offset']||0x0),0x0),'orderstatus':_0x284ef1?_0x284ef1[_0x5e61dd(0x2f5)]:_0x5e61dd(0x342)}));}}}}catch(_0x5cd668){if(!_0x36b440)handleErrorNoStop(_0x5cd668,_0x5e61dd(0x1e3));else await handleError(_0x5cd668,_0x5e61dd(0x1e3));}return _0x5db965=cloneDeep(_0x1db34b),_0x1db34b=_0x1db34b[_0x5e61dd(0x2bc)](_0x2812aa=>{const _0x279de9=_0x5e61dd,_0x5b1290=config[_0x279de9(0x352)][_0x279de9(0x1d7)](_0x2a5cc8=>_0x2a5cc8[_0x279de9(0x35d)]==_0x2812aa[_0x279de9(0x35d)]);return _0x5b1290&&!_0x5b1290['excluded'];}),[_0x1db34b,_0x5db965];}async function getCoinNumber(_0x4b9cdb){const _0x51525d=_0x3f7261;let _0x2d019c;try{const _0x5b87ff=await exchange['fetchBalance']();_0x2d019c=_0x5b87ff[_0x51525d(0x325)][_0x4b9cdb];}catch(_0x239626){await handleError(_0x239626,_0x51525d(0x357));}return _0x2d019c;}async function getOpenOrders(){const _0x57a404=_0x3f7261;let _0x2364d9;allOpenOrders=[];try{for(const _0x2472e7 of config[_0x57a404(0x352)]){!_0x2472e7[_0x57a404(0x33e)]&&_0x2472e7[_0x57a404(0x35d)]!=config[_0x57a404(0x1e2)]&&(_0x2364d9=await exchange['fetchOpenOrders'](_0x2472e7[_0x57a404(0x2d5)]),_0x2364d9[_0x57a404(0x1dc)]>0x0&&allOpenOrders[_0x57a404(0x22e)](_0x2364d9[0x0]));}}catch(_0x358c5b){await handleError(_0x358c5b,_0x57a404(0x332));}}async function handleOpenOrders(_0x55af12=0x0){const _0x42d5ed=_0x3f7261;allOpenOrders[_0x42d5ed(0x1dc)]==0x0&&lockOrders==ORDERS[_0x42d5ed(0x1fa)]&&allOrdersPlaced&&(_0x55af12==0x0?(logger[_0x42d5ed(0x212)](_0x42d5ed(0x343)),_0x55af12++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x42d5ed(0x212)](_0x42d5ed(0x32b)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0xea2520){const _0x411e48=_0x3f7261,_0x375cb5=ccxt[_0x411e48(0x348)][_0xea2520[_0x411e48(0x200)][_0x411e48(0x2ad)]()],_0x5cbdd5=new _0x375cb5({'apiKey':_0xea2520[_0x411e48(0x33f)],'secret':_0xea2520[_0x411e48(0x353)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x411e48(0x219)}});if(_0xea2520[_0x411e48(0x251)])_0x5cbdd5[_0x411e48(0x270)]=_0xea2520['apiPassword'];try{await _0x5cbdd5[_0x411e48(0x1e4)]();}catch(_0x460b24){throw _0x460b24;}}function cloneDeep(_0x502ec8){const _0x6c88a4=_0x3f7261;return JSON[_0x6c88a4(0x1ee)](JSON[_0x6c88a4(0x269)](_0x502ec8));}async function getPortfolio(_0x1be726){const _0x4d776d=_0x3f7261;let _0x1570a7=[],_0x408417=[],_0x45a98e=[],_0x2da189;if(_0x1be726[_0x4d776d(0x33f)]!==_0x4d776d(0x232)||_0x1be726['apiSecret']!==_0x4d776d(0x232)||_0x1be726['apiPassword']&&_0x1be726[_0x4d776d(0x251)]!==_0x4d776d(0x232)){if(config['exchange']){if(_0x1be726[_0x4d776d(0x33f)]==_0x4d776d(0x232))_0x1be726[_0x4d776d(0x33f)]=config[_0x4d776d(0x33f)];if(_0x1be726['apiSecret']==_0x4d776d(0x232))_0x1be726['apiSecret']=config[_0x4d776d(0x353)];if(_0x1be726[_0x4d776d(0x251)]==_0x4d776d(0x232))_0x1be726[_0x4d776d(0x251)]=config[_0x4d776d(0x251)];try{await testAPI(_0x1be726);}catch(_0x4c3a9d){if(_0x4c3a9d[_0x4d776d(0x227)]()[_0x4d776d(0x261)]('AuthenticationError')){logger['debug'](_0x4d776d(0x2da)),proxyEmit('portfolio',![]);return;}else{handleError(_0x4c3a9d,_0x4d776d(0x20d));return;}}}await initExchange(_0x1be726['exchange'],_0x1be726[_0x4d776d(0x33f)],_0x1be726[_0x4d776d(0x353)],_0x1be726[_0x4d776d(0x251)]);try{await loadSymbols();}catch(_0x58fc5f){if(_0x58fc5f['toString']()[_0x4d776d(0x261)](_0x4d776d(0x2d9))){proxyEmit(_0x4d776d(0x352),![]);return;}else{handleError(_0x58fc5f,_0x4d776d(0x315));return;}}const _0x3d7c3c=await getCoins(![],_0x1be726[_0x4d776d(0x1e2)]);_0x45a98e=cloneDeep(_0x3d7c3c[0x1]);}else _0x45a98e=cloneDeep(currentCoinsAll);if(_0x1be726['basecoin']=='')proxyEmit(_0x4d776d(0x352),_0x45a98e);else{_0x45a98e[_0x4d776d(0x214)](_0x215b41=>{const _0x987b31=_0x4d776d;if(_0x215b41['coin']!=_0x1be726[_0x987b31(0x1e2)])_0x1570a7[_0x987b31(0x22e)](_0x215b41[_0x987b31(0x2d5)]);});if(_0x1570a7[_0x4d776d(0x1dc)]==0x0)logHistory(_0x4d776d(0x237),_0x4d776d(0x2a5));else{try{_0x408417=await exchange[_0x4d776d(0x2f0)](_0x1570a7);}catch(_0x535c9a){if(_0x535c9a[_0x4d776d(0x227)]()['includes'](_0x4d776d(0x2d9))){proxyEmit(_0x4d776d(0x352),![]);return;}else{handleError(_0x535c9a,_0x4d776d(0x243));return;}}_0x45a98e[_0x4d776d(0x214)](_0x5899f8=>{const _0x4e0de4=_0x4d776d;_0x5899f8[_0x4e0de4(0x35d)]!=_0x1be726[_0x4e0de4(0x1e2)]?_0x2da189=_0x5899f8[_0x4e0de4(0x2e0)]?0x1/_0x408417[_0x5899f8[_0x4e0de4(0x2d5)]]['last']:_0x408417[_0x5899f8[_0x4e0de4(0x2d5)]][_0x4e0de4(0x28e)]:_0x2da189=0x1,_0x5899f8[_0x4e0de4(0x24b)]=formatResult(_0x2da189,0x8);}),proxyEmit(_0x4d776d(0x352),_0x45a98e);}}}function truncateTradeAmount(_0x5f191e,_0x5dcdb3){const _0x3876d0=_0x3f7261;let _0x2b17be=0x0;try{_0x2b17be=exchange[_0x3876d0(0x286)](_0x5f191e,_0x5dcdb3);}catch(_0x46c424){}return _0x2b17be;}function checkMinimums(_0x5af73b){const _0xe7f4df=_0x3f7261;let _0x47d8b8=!![];const _0x39df8c=!_0x5af73b[_0xe7f4df(0x2e0)]?markets[_0x5af73b[_0xe7f4df(0x2d5)]][_0xe7f4df(0x21b)][_0xe7f4df(0x29c)][_0xe7f4df(0x23e)]:markets[_0x5af73b['symbol']][_0xe7f4df(0x21b)][_0xe7f4df(0x1da)][_0xe7f4df(0x23e)],_0x33dbbb=!_0x5af73b['reverse']?markets[_0x5af73b['symbol']][_0xe7f4df(0x21b)]['cost'][_0xe7f4df(0x23e)]:markets[_0x5af73b[_0xe7f4df(0x2d5)]][_0xe7f4df(0x21b)][_0xe7f4df(0x29c)][_0xe7f4df(0x23e)],_0x372ad9=truncateTradeAmount(_0x5af73b[_0xe7f4df(0x2d5)],_0x5af73b[_0xe7f4df(0x2de)]);_0x5af73b[_0xe7f4df(0x2de)]=_0x372ad9;if(Math['abs'](_0x372ad9)<_0x39df8c)_0x47d8b8=![];if(Math[_0xe7f4df(0x2bd)](_0x372ad9)*_0x5af73b[_0xe7f4df(0x28e)]<_0x33dbbb)_0x47d8b8=![];if(_0x5af73b['side']=='sell'){let _0xebe0a0=config[_0xe7f4df(0x352)]['find'](_0x28b65c=>_0x28b65c[_0xe7f4df(0x35d)]==_0x5af73b['coin']);if(_0xebe0a0['offset']>0x0){if(Math[_0xe7f4df(0x2bd)](_0x372ad9)>_0x5af73b[_0xe7f4df(0x345)]-_0xebe0a0['offset'])_0x47d8b8=![];}else{if(Math[_0xe7f4df(0x2bd)](_0x372ad9)>_0x5af73b[_0xe7f4df(0x345)])_0x47d8b8=![];}}if(_0x5af73b[_0xe7f4df(0x2b9)]==_0xe7f4df(0x1ef)){let _0x3bcf87=config[_0xe7f4df(0x352)][_0xe7f4df(0x1d7)](_0x3b23c7=>_0x3b23c7[_0xe7f4df(0x35d)]==config['basecoin']),_0x567b82=currentCoins[_0xe7f4df(0x1d7)](_0x33fd8f=>_0x33fd8f[_0xe7f4df(0x35d)]==config[_0xe7f4df(0x1e2)]);if(_0x3bcf87[_0xe7f4df(0x25e)]>0x0){if(Math[_0xe7f4df(0x2bd)](_0x372ad9)*_0x5af73b[_0xe7f4df(0x28e)]>_0x567b82['number']-_0x3bcf87['offset'])_0x47d8b8=![];}else{if(Math['abs'](_0x372ad9)*_0x5af73b['last']>_0x567b82[_0xe7f4df(0x345)])_0x47d8b8=![];}}return _0x47d8b8;}async function getBalances(_0x4335ce=!![]){const _0x376305=_0x3f7261;let _0x3a7d8d=0x0,_0x998ef1;const _0x12440c=config[_0x376305(0x321)];if(config[_0x376305(0x294)]&&config[_0x376305(0x328)]<0x0)await validate24hChanges();currentCoins[_0x376305(0x214)](_0x461afb=>{const _0x45b62d=_0x376305;if(_0x461afb[_0x45b62d(0x35d)]!=config[_0x45b62d(0x1e2)]){let _0x1164da=global['ticker'][noslash(_0x461afb[_0x45b62d(0x2d5)])];_0x998ef1=_0x461afb[_0x45b62d(0x2e0)]?0x1/_0x1164da:_0x1164da;}else _0x998ef1=0x1;let _0x77e77b=_0x461afb[_0x45b62d(0x345)]*_0x998ef1;_0x3a7d8d+=_0x77e77b,_0x461afb[_0x45b62d(0x28e)]=formatResult(Number(_0x998ef1),0x8),_0x461afb[_0x45b62d(0x2eb)]=_0x77e77b;}),currentCoins[_0x376305(0x214)](_0x242438=>{const _0x25d232=_0x376305;let _0x28ef9e=config[_0x25d232(0x352)][_0x25d232(0x1d7)](_0x31f0d7=>_0x31f0d7[_0x25d232(0x35d)]==_0x242438[_0x25d232(0x35d)]),_0xb857bb=Number(_0x28ef9e['distribution']),_0x3642a0=_0x242438['value']/_0x3a7d8d*0x64,_0x24da37=_0xb857bb*_0x3a7d8d/0x64/_0x242438[_0x25d232(0x28e)]-_0x242438['number'];_0x242438[_0x25d232(0x346)]=formatResult(_0x3642a0,0x3),_0x242438[_0x25d232(0x1de)]=formatResult(_0xb857bb,0x3),_0x242438[_0x25d232(0x2de)]=formatResult(_0x24da37,0x8),_0x242438[_0x25d232(0x2b9)]='',_0x242438[_0x25d232(0x235)]=![];if(_0x242438['coin']!=config[_0x25d232(0x1e2)]){if(_0x242438['distribution']>_0xb857bb)_0x242438[_0x25d232(0x2b9)]=_0x25d232(0x25a),_0x242438[_0x25d232(0x235)]=checkMinimums(_0x242438);else _0x242438[_0x25d232(0x346)]<_0xb857bb&&(_0x242438[_0x25d232(0x2b9)]=_0x25d232(0x1ef),_0x242438[_0x25d232(0x235)]=checkMinimums(_0x242438));}_0x242438['delta']=_0x242438[_0x25d232(0x346)]/_0x242438[_0x25d232(0x1de)]-0x1;if(_0x242438[_0x25d232(0x2f5)]==_0x25d232(0x1fb)||_0x242438[_0x25d232(0x2f5)]==_0x25d232(0x2c3))_0x242438[_0x25d232(0x2f5)]='none';}),currentCoins[_0x376305(0x20f)]((_0x228b44,_0x59d2ce)=>_0x228b44[_0x376305(0x312)]<_0x59d2ce[_0x376305(0x312)]?0x1:_0x59d2ce[_0x376305(0x312)]<_0x228b44[_0x376305(0x312)]?-0x1:0x0);const _0x109f6a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x109f6a[_0x376305(0x222)],'usd':_0x109f6a['usd'],'portfolio':JSON[_0x376305(0x269)](currentCoins),'threshold':_0x12440c},proxyEmit(_0x376305(0x28f),{'serverversion':serverversion,'balances':lastBalances});if(_0x4335ce){if(config[_0x376305(0x294)])headlessMode({'portfolio':currentCoins,'threshold':_0x12440c});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x12440c});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x57297c=getNormalizedPerformance();getStartingBalances(_0x57297c),emitPerformance(_0x57297c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x47a904=getNormalizedPerformance();emitPerformance(_0x47a904),getStartingBalances(_0x47a904),logger[_0x376305(0x212)](_0x376305(0x2c9));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2287c2=_0x3f7261;if(!lastBalances)return;let _0x4b2e50=[],_0x344fb3,_0xd259b8=JSON['parse'](lastBalances[_0x2287c2(0x352)]);_0xd259b8[_0x2287c2(0x20f)]((_0x3e2ddb,_0x5942f2)=>_0x3e2ddb[_0x2287c2(0x35d)]>_0x5942f2['coin']?0x1:_0x5942f2[_0x2287c2(0x35d)]>_0x3e2ddb['coin']?-0x1:0x0),_0xd259b8[_0x2287c2(0x214)](_0xf809ff=>{const _0x15592f=_0x2287c2;let _0x2ebea7={'coin':_0xf809ff[_0x15592f(0x35d)],'number':_0xf809ff[_0x15592f(0x345)],'price':_0xf809ff[_0x15592f(0x28e)]};_0x4b2e50['push'](_0x2ebea7);});const _0x3662c8=await getFiat();_0x344fb3={'date':lastBalances[_0x2287c2(0x2a0)][_0x2287c2(0x2b7)]('\x20')[0x0],'eur':_0x3662c8['eur'],'usd':_0x3662c8['usd'],'coins':_0x4b2e50};let _0x335beb=dbPerformance[_0x2287c2(0x2ee)](_0x2287c2(0x2e9))[_0x2287c2(0x1d7)]({'date':_0x344fb3[_0x2287c2(0x338)]})[_0x2287c2(0x2eb)]();_0x335beb?_0x344fb3[_0x2287c2(0x338)]!=config[_0x2287c2(0x2b4)]&&dbPerformance[_0x2287c2(0x2ee)]('data')[_0x2287c2(0x1d7)]({'date':_0x344fb3[_0x2287c2(0x338)]})[_0x2287c2(0x21f)](_0x344fb3)['write']():dbPerformance[_0x2287c2(0x2ee)]('data')[_0x2287c2(0x22e)](_0x344fb3)[_0x2287c2(0x240)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x309736=_0x3f7261;let _0x515a93=[];if(dbPerformance[_0x309736(0x1f6)]('data')['value']()){let _0x315d29=dbPerformance['get'](_0x309736(0x2e9))['cloneDeep']()[_0x309736(0x2bc)](_0x2defd1=>{const _0x277fa3=_0x309736;if(_0x2defd1[_0x277fa3(0x2d7)][_0x277fa3(0x1dc)]==0x0)return![];else return!![];})['sortBy'](_0x309736(0x338))[_0x309736(0x2eb)](),_0x4f9ce3=[...config[_0x309736(0x31c)]];_0x4f9ce3[_0x309736(0x20f)]((_0x4e8317,_0x3b9861)=>_0x4e8317[_0x309736(0x338)]>_0x3b9861[_0x309736(0x338)]?-0x1:_0x3b9861[_0x309736(0x338)]>_0x4e8317[_0x309736(0x338)]?0x1:0x0);let _0x142382=0x1,_0x1b62aa=[],_0x22b794=0x0;_0x315d29['slice']()[_0x309736(0x2e0)]()[_0x309736(0x214)]((_0x2ddaf0,_0x519a1d)=>{const _0x426722=_0x309736;if(_0x4f9ce3[_0x22b794]){if(_0x315d29[_0x315d29[_0x426722(0x1dc)]-_0x519a1d]&&_0x4f9ce3[_0x22b794][_0x426722(0x338)]==_0x315d29[_0x315d29[_0x426722(0x1dc)]-_0x519a1d][_0x426722(0x338)]){if(_0x519a1d<_0x315d29[_0x426722(0x1dc)]){let _0x54ffd3=0x0,_0xf78a91=0x0;_0x315d29[_0x315d29['length']-_0x519a1d][_0x426722(0x2d7)][_0x426722(0x214)](_0x442280=>{const _0xd661d1=_0x426722;_0xf78a91+=_0x442280[_0xd661d1(0x345)]*_0x442280[_0xd661d1(0x24b)];}),_0x4f9ce3[_0x22b794][_0x426722(0x260)][_0x426722(0x214)](_0x5948b7=>{const _0x61a860=_0x426722;_0x54ffd3+=_0x5948b7[_0x61a860(0x345)]*_0x5948b7[_0x61a860(0x24b)];}),_0x142382*=_0x54ffd3/(_0xf78a91-_0x54ffd3)+0x1;}_0x22b794++;}}let _0x4b86fa=0x0;_0x2ddaf0[_0x426722(0x2d7)][_0x426722(0x214)](_0x509dd7=>{const _0xd0d2c7=_0x426722;_0x4b86fa+=_0x509dd7[_0xd0d2c7(0x345)]*_0x509dd7[_0xd0d2c7(0x24b)];}),_0x1b62aa[_0x315d29['length']-_0x519a1d-0x1]=_0x4b86fa*(_0x142382-0x1);});let _0x5c0d39=[];_0x4f9ce3=[...config[_0x309736(0x31c)]]||[];let _0x361ac6=0x0;_0x22b794=0x0,_0x315d29['forEach']((_0x16c3e5,_0x3fd6)=>{const _0x161088=_0x309736;if(_0x4f9ce3[_0x22b794]){const _0xb2cb54=fns[_0x161088(0x1ee)](_0x4f9ce3[_0x22b794][_0x161088(0x338)],'yyyy/MM/dd',new Date()),_0x2dddc8=fns[_0x161088(0x1ee)](_0x16c3e5[_0x161088(0x338)],_0x161088(0x1d1),new Date());if(fns[_0x161088(0x322)](_0xb2cb54,_0x2dddc8)){let _0x20341f=0x0;_0x4f9ce3[_0x22b794][_0x161088(0x260)]['forEach'](_0x53b320=>{const _0x4f72fc=_0x161088;!_0x5c0d39[_0x53b320[_0x4f72fc(0x35d)]]?_0x5c0d39[_0x53b320['coin']]=_0x53b320[_0x4f72fc(0x345)]:(_0x20341f=_0x5c0d39[_0x53b320[_0x4f72fc(0x35d)]],_0x5c0d39[_0x53b320[_0x4f72fc(0x35d)]]+=_0x53b320['number']);const _0x459e19=_0x16c3e5['coins'][_0x4f72fc(0x1d7)](_0x1a3c48=>_0x1a3c48[_0x4f72fc(0x35d)]==_0x53b320[_0x4f72fc(0x35d)]);(!_0x459e19||_0x459e19[_0x4f72fc(0x345)]==0x0)&&(_0x361ac6+=(-_0x53b320['number']-_0x20341f)*_0x53b320['price']);}),_0x22b794++;}}_0x16c3e5['coins'][_0x161088(0x214)]((_0x2e0c47,_0x23fc1e)=>{const _0x43a445=_0x161088;_0x5c0d39[_0x2e0c47['coin']]&&(_0x2e0c47['initial']=_0x5c0d39[_0x2e0c47[_0x43a445(0x35d)]]);}),_0x515a93[_0x161088(0x22e)]({'date':_0x16c3e5[_0x161088(0x338)],'eur':_0x16c3e5[_0x161088(0x222)],'usd':_0x16c3e5['usd'],'offset':_0x1b62aa[_0x3fd6],'netoffset':_0x361ac6,'coins':_0x16c3e5[_0x161088(0x2d7)]});});}return _0x515a93;}function emitPerformance(_0x5ebad4){const _0x4268d1=_0x3f7261;_0x5ebad4[_0x4268d1(0x1dc)]!==0x0?(proxyEmit(_0x4268d1(0x2aa),_0x5ebad4),lastPerformanceEmitted=getDate()):proxyEmit(_0x4268d1(0x2aa),[]);}function getPerf(_0x4bfb40,_0x86949e){const _0x168a87=_0x3f7261;let _0x2c7007=0x0,_0xd1bc8e=0x0,_0x5b9c40=0x0;_0x4bfb40[_0x168a87(0x2d7)]['forEach'](_0x103b0e=>{_0x2c7007+=_0x103b0e['number']*_0x103b0e['price'];});_0x86949e&&(_0x2c7007+=_0x4bfb40['offset']);if(config[_0x168a87(0x1e2)]===_0x168a87(0x292)||config[_0x168a87(0x1e2)]===_0x168a87(0x201))_0xd1bc8e=_0x2c7007*_0x4bfb40[_0x168a87(0x222)],_0x5b9c40=_0x2c7007*_0x4bfb40['usd'];else{if(usdBasecoins['includes'](config['basecoin']))_0xd1bc8e=_0x2c7007*_0x4bfb40['eur']/_0x4bfb40[_0x168a87(0x216)],_0x5b9c40=_0x2c7007;else config[_0x168a87(0x1e2)]===_0x168a87(0x224)&&(_0xd1bc8e=_0x2c7007,_0x5b9c40=_0x2c7007*_0x4bfb40[_0x168a87(0x216)]/_0x4bfb40['eur']);}return[_0x2c7007,_0xd1bc8e,_0x5b9c40];}function _0x31e1(){const _0x3822a3=['isEqual','2.5.0','args','total','milliseconds','storeFiat','change24h','exchange\x20not\x20reloaded','added','2\x20-\x20Handled\x20open\x20orders','BNB/','Order\x20is\x20invalid:\x20','Binance','sendMetricsTelegram','\x20portfolio:</b>\x20\x0a\x0a','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','getOpenOrders()','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','RSA-OAEP','ORDERS.LOCKED','\x20|\x20highest\x20fee:\x20','lowdb','date','getSeconds','orderId','./config/','close','createWriteStream','excluded','apiKey','watchOrders','OnMaintenance','none','1\x20-\x20Handle\x20open\x20orders','RateLimitExceeded','number','distribution','Transaction\x20detection\x20unblocked','pro','sortBy','ticker','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fiat','Transaction\x20detection\x20blocked','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','event-history','exec','Resetting\x20coin\x20results:\x20','portfolio','apiSecret','bot','send','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','getCoinNumber()','(((.+)+)+)+$','existsSync','Bybit','\x20value','configuration-stored','coin','function','change','running','Invalid\x20quantity','bb-settings.json','starting-balance-','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','yyyy/MM/dd','getFullYear','parseISO','createOrder','botID','limit-high','find','keys','slice','cost','active','length','apply','target','Error:\x20Invalid\x20argument\x20','fromCodePoint','final','basecoin','getCoins()','loadMarkets','differenceInSeconds','deleteHistoryAlerts','emojibuy','startsWith','exchange\x20reloaded','toFixed','version','full','storeConfiguration','parse','buy','Portfolio\x20change\x20detected:\x20','\x20API\x20key\x20is\x20invalid','\x20|\x20Error\x20details:\x20','limit','configuration','1\x20-\x20FILLED:\x20','has','</pre>','<b>Bot\x20','onepagemode','LOCKED','filled','-events.json','NetworkError','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','settings','exchange','ETH','2.3.5','./logs/','ask','watchTrades','RequestTimeout','showConfig','botname','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','bid','USDP','getPortfolio(0)','exchanges','sort','cooldown','test','debug','search','forEach','placeOrder()','usd','closed','Exchange','spot','uncaughtException','limits','highest','removed','2\x20-\x20FILLED\x20known\x20order:\x20','assign','recreateCoinResults()','InvalidOrder','eur','startnumber','EUR','ongoing','argv','toString','sha256','\x20|\x20Custom\x20ID:\x20','watchTrades(2)','mkdirSync','2\x20-\x20FILLED\x20unknown\x20order:\x20',':\x20timer\x20>','push','getMinutes','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','floor','************','datetime','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','valid','TUSD','error','status','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','watchTransactions','fetchBalance','log','Uncaught\x20ExchangeError:','min','defaults','write','Error\x20while\x20deleting\x20files:\x20','2120YhASeZ','getPortfolio(2)','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','realized','67634KooGbm','average','Market','***','replace','price','currency','UNLOCKED','\x20not\x20responding','bots','fee','apiPassword','Resetting\x20bot\x20history','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20order:\x20','\x20metrics:</b>\x20\x0a\x0a','ID:\x20','logs','decrypt','emitHistory','sell','\x20has\x20a\x2024h\x20drop\x20of\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','limit-low','offset','cancel','changes','includes','timeshift','add','244626MCbnln','breakeven','padStart','6055epgiSg','coin-loading-progress','stringify','1\x20-\x20Validate\x20orders:\x20','Pausing\x20for\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','red_yellow_blue','UNLOCKING','showname','password','splice','basecoinvalue','warning','toUpperCase','startprice','Net\x20effect','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','30FdaEwd','getDate','001','shift','Fee\x20discount\x20refund\x20detected:\x20','substring','Limit\x20(high-margin)','string','2.6.0','leftTxt','page','Initiating\x20exchange\x20reload','stopExchange()','random','amountToPrecision','watchTrades(1)','type','net-fiat','remainingSymbols','BNB','\x20closed\x20the\x20connection','success','last','balances','\x20-\x20bot\x20not\x20started','5hzlZps','BTC','Crypt','headless','<pre>','market','privateKey','/backup/','-results.json','hybrid-crypto-js','bot-','amount','Manual\x20balancing\x20required','-------------------------------\x0a','cancelOrder','time','fees','\x20change','balancing\x20resumes\x20when\x20cooldown\x20ends','DDoSProtection','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','no\x20additional\x20symbols','\x20orders\x20in\x20less\x20than\x20','autoliquidity','set','performance','starting-balances','ordertype','toLowerCase','2\x20-\x20Validate\x20orders:\x20','entries','freeze','InsufficientFunds','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20:\x20','startdate','date-fns','Net\x20','split','event','side','BUSD','cancelLoading','filter','abs','fetchOpenOrders',':\x20Bot\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','enabled','USDT','canceled','USD','480660YmtYoy','remove','Order(s)\x20not\x20validated\x20after\x20','join','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','placeOrder','Uncaught\x20NetworkError:','max','writeFile','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','timeout','Saving\x20configuration','open','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','kill','symbol','initclient','coins','fetchClosedOrders','AuthenticationError','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20>\x20[DEBUG]\x20','path','ccxt','trade','order','reverse','emojisell','map','sendPortfolioTelegram','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','lowdb/adapters/FileSync','toggleBotMode','rightTxt','ExchangeError','data','ORDERS.UNLOCKED','value','balancing\x20resumed','fetchTicker','get','net-basecoin','fetchTickers','Unknown\x20error\x20occured','Reset\x20|\x20','round','\x20minutes\x20-\x20','orderstatus','819846IIsKzf','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20|\x20','openOrders','padEnd','restart','getMonth','Order\x20filled:\x20','1789983jZtdNV','no\x20open\x20orders','841012rpTrSe','getStartingBalances','%\x20(','colorscheme','getHours','recent20','buys','cancelOrders()','resetHistory','/EUR','.json','sells','bb-secure.json','must\x20be\x20greater\x20than\x20minimum\x20amount','getPortfolio','message','loading-canceled','netoffset','delta','-performance.json','-config.json','getPortfolio(1)','InvalidNonce','format','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','1\x20-\x20Unlock\x20orders','API-key\x20format\x20invalid','./version.json','liquidity','<b>','initial','\x20>\x20','unlinkSync','threshold'];_0x31e1=function(){return _0x3822a3;};return _0x31e1();}function getKPIs(_0x2e2412,_0x42cd84=_0x3f7261(0x224)){const _0x58f476=_0x3f7261,_0x53dcaf=config[_0x58f476(0x1e2)],_0xa8d701=lastBalances,_0x44b22b=currentCoins,_0x5d1fbf=getNormalizedPerformance(),_0x341ce1=_0x2e2412===_0x58f476(0x1e2)?_0x53dcaf:_0x2e2412==='fiat'||_0x2e2412===_0x58f476(0x289)?_0x42cd84:_0x58f476(0x2b6)+_0x53dcaf,_0x124eef=_0x2e2412===_0x58f476(0x2ef)?_0x58f476(0x276):_0x2e2412==='net-fiat'?'Net\x20effect':_0x341ce1+_0x58f476(0x35b),_0x244f4d=_0x2e2412==='net-basecoin'||_0x2e2412===_0x58f476(0x289)?_0x58f476(0x276):_0x341ce1+_0x58f476(0x2a2);let _0x400dbc=0x0;_0x44b22b[_0x58f476(0x214)](_0x41e3da=>{const _0x3dc59d=_0x58f476;_0x400dbc+=_0x41e3da[_0x3dc59d(0x345)]*_0x41e3da[_0x3dc59d(0x28e)];});if(_0x2e2412===_0x58f476(0x34c)||_0x2e2412===_0x58f476(0x289)){if(_0x53dcaf===_0x58f476(0x292)||_0x53dcaf===_0x58f476(0x201))_0x400dbc=_0x400dbc*(_0x42cd84===_0x58f476(0x224)?_0xa8d701[_0x58f476(0x222)]:_0xa8d701[_0x58f476(0x216)]);else{if(usdBasecoins[_0x58f476(0x261)](_0x53dcaf))_0x400dbc=_0x400dbc*(_0x42cd84==='EUR'?_0xa8d701[_0x58f476(0x222)]/_0xa8d701[_0x58f476(0x216)]:0x1);else _0x53dcaf===_0x58f476(0x224)&&(_0x400dbc=_0x400dbc*(_0x42cd84==='EUR'?0x1:_0xa8d701[_0x58f476(0x216)]/_0xa8d701[_0x58f476(0x222)]));}}let _0x114f9e;if(_0x400dbc!==0x0){if(_0x2e2412==='basecoin')_0x114f9e=(_0x400dbc/startingBalances[_0x58f476(0x1e2)]-0x1)*0x64;else{if(_0x42cd84===_0x58f476(0x224))_0x114f9e=(_0x400dbc/startingBalances['eur']-0x1)*0x64;else _0x114f9e=(_0x400dbc/startingBalances['usd']-0x1)*0x64;}let _0x4c2580=0x0;if(startingBalances['coins'])_0x44b22b[_0x58f476(0x214)](_0x16ead3=>{const _0x4aa0b4=_0x58f476;let _0x4a50ed=startingBalances[_0x4aa0b4(0x2d7)][_0x4aa0b4(0x1d7)](_0x2815fb=>_0x2815fb[_0x4aa0b4(0x35d)]===_0x16ead3[_0x4aa0b4(0x35d)]);if(_0x4a50ed&&_0x4a50ed[_0x4aa0b4(0x35d)]&&_0x16ead3[_0x4aa0b4(0x345)]!==0x0)_0x4c2580+=_0x4a50ed[_0x4aa0b4(0x345)]*_0x16ead3[_0x4aa0b4(0x28e)];});let _0x55a808=0x0;if(_0x5d1fbf[_0x58f476(0x1dc)]!==0x0){let _0x35e16e=_0x5d1fbf[_0x5d1fbf[_0x58f476(0x1dc)]-0x1];_0x55a808=_0x35e16e[_0x58f476(0x311)];}_0x4c2580-=_0x55a808;_0x2e2412===_0x58f476(0x2ef)&&(_0x114f9e=(_0x400dbc-_0x4c2580)/startingBalances[_0x58f476(0x1e2)]*0x64,_0x400dbc=_0x400dbc-_0x4c2580);if(_0x2e2412===_0x58f476(0x289)){let _0x2c700f=_0x42cd84==='EUR'?startingBalances[_0x58f476(0x222)]:startingBalances[_0x58f476(0x216)];if(_0x53dcaf===_0x58f476(0x292)||_0x53dcaf===_0x58f476(0x201))_0x4c2580=_0x42cd84===_0x58f476(0x224)?_0x4c2580*_0xa8d701[_0x58f476(0x222)]:_0x4c2580*_0xa8d701[_0x58f476(0x216)];else{if(usdBasecoins[_0x58f476(0x261)](_0x53dcaf))_0x4c2580=_0x42cd84===_0x58f476(0x224)?_0x4c2580*_0xa8d701[_0x58f476(0x222)]/_0xa8d701['usd']:_0x4c2580;else _0x53dcaf==='EUR'&&(_0x4c2580=_0x42cd84===_0x58f476(0x224)?_0x4c2580:_0x4c2580*_0xa8d701[_0x58f476(0x216)]/_0xa8d701[_0x58f476(0x222)]);}_0x114f9e=(_0x400dbc-_0x4c2580)/_0x2c700f*0x64,_0x400dbc=_0x400dbc-_0x4c2580;}if(_0x114f9e){if(_0x114f9e<0x64)_0x114f9e=_0x114f9e['toFixed'](0x2);else{if(_0x114f9e<0x3e8)_0x114f9e=_0x114f9e['toFixed'](0x1);else _0x114f9e=_0x114f9e['toFixed'](0x0);}}else _0x114f9e=Number('0')['toFixed'](0x2);if(_0x400dbc){if(Math[_0x58f476(0x2bd)](_0x400dbc)<0.000001)_0x400dbc=_0x400dbc[_0x58f476(0x1ea)](0x2);else{if(Math['abs'](_0x400dbc)<0.1)_0x400dbc=_0x400dbc[_0x58f476(0x1ea)](0x6);else{if(Math[_0x58f476(0x2bd)](_0x400dbc)<0x1)_0x400dbc=_0x400dbc[_0x58f476(0x1ea)](0x5);else{if(Math['abs'](_0x400dbc)<0xa)_0x400dbc=_0x400dbc['toFixed'](0x4);else{if(Math[_0x58f476(0x2bd)](_0x400dbc)<0x64)_0x400dbc=_0x400dbc[_0x58f476(0x1ea)](0x3);else{if(Math[_0x58f476(0x2bd)](_0x400dbc)<0x3e8)_0x400dbc=_0x400dbc['toFixed'](0x2);else _0x400dbc=_0x400dbc[_0x58f476(0x1ea)](0x2);}}}}}}else _0x400dbc=Number('0')[_0x58f476(0x1ea)](0x2);}else _0x114f9e=Number('0')[_0x58f476(0x1ea)](0x2);return{'value':_0x400dbc,'change':_0x114f9e,'leftTxt':_0x124eef,'rightTxt':_0x244f4d};}async function getStartingBalances(_0x1eca16,_0x153bcb=!![]){const _0x1201f7=_0x3f7261;if(_0x1eca16['length']!==0x0){const [_0xdccffe,_0x48e066,_0x3b5d39]=getPerf(_0x1eca16[0x0],!![]);let _0x52d23e=[];config[_0x1201f7(0x352)][_0x1201f7(0x214)](_0x4d54a5=>{const _0x215639=_0x1201f7;let _0x27755d=0x0,_0x5746bf;config['liquidity']['forEach'](_0x577fdd=>{const _0x35ac38=_0x5a12;let _0x3643d6=_0x577fdd[_0x35ac38(0x260)][_0x35ac38(0x1d7)](_0x1df6fd=>_0x1df6fd[_0x35ac38(0x35d)]==_0x4d54a5[_0x35ac38(0x35d)]);if(_0x3643d6){_0x27755d+=_0x3643d6[_0x35ac38(0x345)];if(!_0x5746bf)_0x5746bf=_0x3643d6[_0x35ac38(0x24b)];}}),_0x52d23e[_0x215639(0x22e)]({'coin':_0x4d54a5[_0x215639(0x35d)],'number':_0x27755d,'initialprice':_0x5746bf});});const _0x517f23={'basecoin':_0xdccffe,'eur':_0x48e066,'usd':_0x3b5d39,'coins':_0x52d23e};if(_0x153bcb)proxyEmit(_0x1201f7(0x2ab),_0x517f23);startingBalances=_0x517f23;}}function headlessMode(_0x48fcc4){const _0x492c31=_0x3f7261;let _0x2f8f82=_0x48fcc4[_0x492c31(0x352)],_0x45023f=_0x48fcc4[_0x492c31(0x321)],_0x2e8087=[];for(let _0x2c95a6 of _0x2f8f82){if(_0x2c95a6[_0x492c31(0x35d)]!=config['basecoin']){if(_0x2c95a6[_0x492c31(0x312)]>=_0x45023f/0x64){if(_0x2c95a6['valid'])_0x2e8087['push'](_0x2c95a6);}else{if(_0x2c95a6[_0x492c31(0x312)]<=-_0x45023f/0x64){if(_0x2c95a6[_0x492c31(0x235)])_0x2e8087['push'](_0x2c95a6);}}}}_0x2e8087[_0x492c31(0x1dc)]>0x0&&placeOrder(_0x2e8087);}function notifyBalance(_0x2b7f2b){const _0x2db790=_0x3f7261;let _0x57a568=_0x2b7f2b[_0x2db790(0x352)],_0x14673f=_0x2b7f2b[_0x2db790(0x321)],_0x5b46c5=[];for(let _0x469e84 of _0x57a568){if(_0x469e84[_0x2db790(0x35d)]!=config[_0x2db790(0x1e2)]){if(_0x469e84[_0x2db790(0x312)]>=_0x14673f/0x64){if(_0x469e84['valid'])_0x5b46c5[_0x2db790(0x22e)](_0x469e84);}else{if(_0x469e84[_0x2db790(0x312)]<=-_0x14673f/0x64){if(_0x469e84[_0x2db790(0x235)])_0x5b46c5['push'](_0x469e84);}}}}if(_0x5b46c5[_0x2db790(0x1dc)]>0x0){let _0x58672b=_0x5b46c5[_0x2db790(0x2e2)](_0x37ca67=>_0x37ca67[_0x2db790(0x35d)]);_0x58672b['sort']();let _0x42b2ac=_0x58672b[_0x2db790(0x2c8)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2db790(0x273),_0x2db790(0x29d));lastCoinsToBalance=_0x42b2ac;}}function symbolToCoin(_0x5d4844){const _0x4f317e=_0x3f7261;let _0x5d6157;if(_0x5d4844[_0x4f317e(0x261)]('/'+config['basecoin']))_0x5d6157=_0x5d4844[_0x4f317e(0x24a)]('/'+config[_0x4f317e(0x1e2)],'');if(_0x5d4844[_0x4f317e(0x261)](config[_0x4f317e(0x1e2)]+'/'))_0x5d6157=_0x5d4844[_0x4f317e(0x24a)](config[_0x4f317e(0x1e2)]+'/','');return _0x5d6157;}async function unlockOrders(){const _0x3c240d=_0x3f7261;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3c240d(0x1fa)]){logger[_0x3c240d(0x212)](_0x3c240d(0x319)),lockOrders=ORDERS[_0x3c240d(0x26e)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5ec6c5=await getCoins();[currentCoins,currentCoinsAll]=_0x5ec6c5,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x3c240d(0x24d)],logger[_0x3c240d(0x212)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x3ff0dc){const _0x538e74=_0x3f7261;if(_0x3ff0dc)validateOrdersState=_0x3ff0dc;logger[_0x538e74(0x212)](_0x538e74(0x26a)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x538e74(0x335):lockOrders==0x2?'ORDERS.UNLOCKING':_0x538e74(0x2ea)));let _0x160158=[],_0x58359b=config['ordertype']==_0x538e74(0x296)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x538e74(0x2d0)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x538e74(0x1fa)])return;logger['debug'](_0x538e74(0x2ae)+validateOrdersState),lastOrders[_0x538e74(0x214)](_0x1e9e7f=>{const _0x2e184c=_0x538e74;let _0x51b28d=![];_0x1e9e7f['filled']>0x0&&(_0x51b28d=!![]),_0x160158[_0x2e184c(0x22e)](_0x51b28d),_0x51b28d&&config[_0x2e184c(0x2ac)]!=_0x2e184c(0x296)&&logHistory('order',_0x2e184c(0x2fd)+_0x1e9e7f['symbol']+'\x20'+_0x1e9e7f[_0x2e184c(0x2b9)]+'\x20#'+formatResult(_0x1e9e7f[_0x2e184c(0x1fb)],0x8)+'\x20@'+formatResult(_0x1e9e7f[_0x2e184c(0x24b)],0x8));}),_0x160158[_0x538e74(0x214)]((_0x291d99,_0x32143f)=>{if(_0x291d99)lastOrders['splice'](_0x32143f,0x1);}),persistOpenOrders(lastOrders);const _0x4313ca=coolingDown?_0x538e74(0x2a3):_0x538e74(0x2ec);if(validateOrdersState==_0x538e74(0x31e)){validateOrdersState=_0x538e74(0x225);if(_0x160158[_0x538e74(0x261)](![])){if(config[_0x538e74(0x2ac)]==_0x538e74(0x296)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x538e74(0x225)){if(_0x160158['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x538e74(0x2ac)]==_0x538e74(0x296)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x160158[_0x538e74(0x261)](![])&&(config[_0x538e74(0x2ac)]==_0x538e74(0x296)?logHistory('success',_0x538e74(0x2c7)+Math[_0x538e74(0x2f3)](_0x58359b*validateOrderInterval/0xea60)+_0x538e74(0x2f4)+_0x4313ca):(await cancelOrders(),logHistory(_0x538e74(0x28d),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x538e74(0x2f3)](_0x58359b*validateOrderInterval/0xea60)+_0x538e74(0x2f4)+_0x4313ca))),await unlockOrders();else{if(validateOrdersState==_0x538e74(0x2ff)){if(config['ordertype']!='market')logHistory(_0x538e74(0x28d),'No\x20more\x20open\x20orders\x20-\x20'+_0x4313ca);await unlockOrders();}}}}}async function cancelOrders(){const _0x24a09e=_0x3f7261;lastOrders[_0x24a09e(0x214)](async _0x489849=>{const _0x57d643=_0x24a09e;try{const _0x3e9350=await exchange['cancelOrder'](_0x489849[_0x57d643(0x33a)],_0x489849[_0x57d643(0x2d5)]);}catch(_0x559cfa){if(_0x559cfa['toString']()[_0x57d643(0x261)]('OrderNotFound')){}else await handleError(_0x559cfa,_0x57d643(0x307));}});}async function initCoinResults(_0x5ab1e2){const _0x23825c=_0x3f7261;_0x5ab1e2?logger[_0x23825c(0x212)](_0x23825c(0x351)+_0x5ab1e2):logger[_0x23825c(0x212)]('Initializing\x20coin\x20results'),config['portfolio'][_0x23825c(0x214)](_0x2e33bb=>{const _0x9c9f74=_0x23825c;if(!_0x2e33bb[_0x9c9f74(0x33e)]&&_0x2e33bb[_0x9c9f74(0x35d)]!=config[_0x9c9f74(0x1e2)]){const _0x165964=currentCoins[_0x9c9f74(0x1d7)](_0x5c1d46=>_0x5c1d46['coin']==_0x2e33bb[_0x9c9f74(0x35d)]),_0x5dc404=global['ticker'][noslash(_0x2e33bb['symbol'])];let _0x40b0cd=_0x165964?_0x165964['number']:null,_0x5a14a0=_0x2e33bb[_0x9c9f74(0x2e0)]?0x1/_0x5dc404:_0x5dc404,_0x1bdce3;config[_0x9c9f74(0x31c)][_0x9c9f74(0x214)](_0x49f318=>{const _0x2a6127=_0x9c9f74;!_0x1bdce3&&(_0x1bdce3=_0x49f318[_0x2a6127(0x260)][_0x2a6127(0x1d7)](_0x447148=>_0x447148[_0x2a6127(0x35d)]==_0x2e33bb[_0x2a6127(0x35d)]),_0x1bdce3&&(_0x40b0cd=_0x1bdce3['number'],_0x5a14a0=_0x1bdce3['price']));});let _0x4477f2=dbCoinResults['get'](_0x9c9f74(0x2d7))[_0x9c9f74(0x1d7)]({'coin':_0x2e33bb[_0x9c9f74(0x35d)]})[_0x9c9f74(0x2eb)]();if(!_0x4477f2){const _0x1eb66c={'coin':_0x2e33bb[_0x9c9f74(0x35d)],'number':_0x40b0cd,'breakeven':_0x5a14a0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x9c9f74(0x2ee)](_0x9c9f74(0x2d7))[_0x9c9f74(0x22e)](_0x1eb66c)['write']();}else{if(_0x5ab1e2&&_0x2e33bb[_0x9c9f74(0x35d)]==_0x5ab1e2){const _0x2ec8ea={'coin':_0x2e33bb[_0x9c9f74(0x35d)],'number':_0x40b0cd,'breakeven':_0x5a14a0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x9c9f74(0x2ee)](_0x9c9f74(0x2d7))[_0x9c9f74(0x1d7)]({'coin':_0x2e33bb[_0x9c9f74(0x35d)]})['assign'](_0x2ec8ea)[_0x9c9f74(0x240)]();}}}});}async function updateCoinResults(_0x1d24af,_0x2c9400=![]){const _0x2a4479=_0x3f7261;let _0x37d9ff,_0x240a3b,_0x51bf4e,_0x449743,_0x1eee91,_0x554556,_0x464fe7=dbCoinResults[_0x2a4479(0x2ee)](_0x2a4479(0x2d7))[_0x2a4479(0x1d7)]({'coin':_0x1d24af[_0x2a4479(0x35d)]})[_0x2a4479(0x2eb)](),_0x12cadd=![];_0x464fe7&&Object[_0x2a4479(0x2af)](_0x464fe7)[_0x2a4479(0x214)](([_0xfda39b,_0x25c0ff])=>{if(_0x25c0ff==null)_0x12cadd=!![];});(!_0x464fe7||_0x12cadd)&&(await initCoinResults(_0x1d24af[_0x2a4479(0x35d)]),_0x464fe7=dbCoinResults['get'](_0x2a4479(0x2d7))[_0x2a4479(0x1d7)]({'coin':_0x1d24af['coin']})[_0x2a4479(0x2eb)]());_0x1d24af[_0x2a4479(0x2e0)]&&(_0x554556={'filled':_0x1d24af[_0x2a4479(0x1fb)]*_0x1d24af[_0x2a4479(0x24b)],'amount':_0x1d24af['filled']*_0x1d24af['price'],'side':_0x1d24af[_0x2a4479(0x2b9)]=='sell'?_0x2a4479(0x1ef):_0x2a4479(0x25a),'price':0x1/_0x1d24af[_0x2a4479(0x24b)]},_0x1d24af={..._0x1d24af,..._0x554556});_0x2c9400?_0x240a3b=_0x1d24af[_0x2a4479(0x2b9)]==_0x2a4479(0x1ef)?_0x464fe7[_0x2a4479(0x345)]+_0x1d24af[_0x2a4479(0x1fb)]:_0x464fe7[_0x2a4479(0x345)]-_0x1d24af[_0x2a4479(0x1fb)]:_0x240a3b=await getCoinNumber(_0x1d24af['coin']);if(_0x1d24af[_0x2a4479(0x250)]&&_0x1d24af[_0x2a4479(0x250)][_0x2a4479(0x24c)]==config[_0x2a4479(0x1e2)])_0x37d9ff=_0x1d24af[_0x2a4479(0x250)][_0x2a4479(0x1da)];else{if(_0x1d24af[_0x2a4479(0x250)]&&_0x1d24af[_0x2a4479(0x250)][_0x2a4479(0x24c)]=='BNB'&&!_0x2c9400)_0x37d9ff=_0x1d24af[_0x2a4479(0x250)][_0x2a4479(0x1da)]*global[_0x2a4479(0x34a)]['BNB'+config['basecoin']];else _0x37d9ff=defaultFee*_0x1d24af[_0x2a4479(0x1fb)]*_0x1d24af[_0x2a4479(0x24b)];}_0x1d24af[_0x2a4479(0x2b9)]=='buy'?(_0x51bf4e=_0x240a3b!=0x0?(_0x464fe7[_0x2a4479(0x265)]*_0x464fe7[_0x2a4479(0x345)]+_0x1d24af[_0x2a4479(0x24b)]*(_0x240a3b-_0x464fe7['number'])+_0x37d9ff)/_0x240a3b:0x0,_0x449743=_0x464fe7[_0x2a4479(0x245)]):(_0x51bf4e=_0x240a3b!=0x0?(_0x464fe7['breakeven']*_0x464fe7[_0x2a4479(0x345)]-_0x1d24af[_0x2a4479(0x24b)]*(_0x464fe7['number']-_0x240a3b)+_0x37d9ff)/_0x240a3b:0x0,_0x449743=_0x464fe7[_0x2a4479(0x245)]+(_0x1d24af['price']-_0x464fe7[_0x2a4479(0x265)])*_0x1d24af['filled']);_0x1eee91=(_0x1d24af[_0x2a4479(0x24b)]-_0x51bf4e-_0x37d9ff/_0x1d24af[_0x2a4479(0x1fb)])*_0x240a3b;let _0xf434f9={'coin':_0x1d24af['coin'],'number':_0x240a3b,'breakeven':formatResult(_0x51bf4e,0x8),'realized':formatResult(_0x449743,0x8),'unrealized':formatResult(_0x1eee91,0x8),'fees':formatResult(_0x464fe7[_0x2a4479(0x2a1)]+_0x37d9ff,0x8),'sells':_0x1d24af['side']==_0x2a4479(0x25a)?_0x464fe7['sells']+0x1:_0x464fe7[_0x2a4479(0x30b)],'buys':_0x1d24af[_0x2a4479(0x2b9)]==_0x2a4479(0x1ef)?_0x464fe7[_0x2a4479(0x306)]+0x1:_0x464fe7[_0x2a4479(0x306)]};dbCoinResults['get']('coins')[_0x2a4479(0x1d7)]({'coin':_0x1d24af[_0x2a4479(0x35d)]})[_0x2a4479(0x21f)](_0xf434f9)[_0x2a4479(0x240)]();if(!_0x2c9400){if(_0x1d24af[_0x2a4479(0x250)]&&_0x1d24af['fee'][_0x2a4479(0x24c)]=='BNB'){const _0x1a863b=currentCoins[_0x2a4479(0x1d7)](_0x5c643d=>_0x5c643d['coin']==_0x2a4479(0x28b));if(_0x1a863b){let _0x38836f=dbCoinResults[_0x2a4479(0x2ee)](_0x2a4479(0x2d7))['find']({'coin':_0x2a4479(0x28b)})[_0x2a4479(0x2eb)]();_0xf434f9={..._0x38836f,'number':_0x1a863b[_0x2a4479(0x345)]},dbCoinResults[_0x2a4479(0x2ee)](_0x2a4479(0x2d7))[_0x2a4479(0x1d7)]({'coin':_0x2a4479(0x28b)})[_0x2a4479(0x21f)](_0xf434f9)['write']();}}}}async function placeOrder(_0x185c40){const _0x200689=_0x3f7261,_0x5497c3=config['ordertype']==_0x200689(0x296)?_0x200689(0x296):_0x200689(0x1f3);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x200689(0x1fa)],allOrdersPlaced=![],validateOrdersState='initial';let _0x482500=![];lastOrders=[];for(const _0x43adc9 of _0x185c40){let _0xa40244,_0x430c5a,_0x3ce06b,_0x1747ac,_0x42502c,_0xde4937=_0x43adc9[_0x200689(0x2d5)];try{const _0x2179bb=await exchange['fetchTicker'](_0xde4937);_0xa40244=_0x43adc9[_0x200689(0x2e0)]?0x1/_0x43adc9[_0x200689(0x28e)]:_0x43adc9[_0x200689(0x28e)],_0x430c5a=_0x2179bb[_0x200689(0x20b)],_0x3ce06b=_0x2179bb[_0x200689(0x204)];_0x43adc9[_0x200689(0x2e0)]?(_0x1747ac=_0x43adc9[_0x200689(0x2b9)]==_0x200689(0x1ef)?_0x200689(0x25a):_0x200689(0x1ef),_0x42502c=Math[_0x200689(0x2bd)](_0x43adc9['trade'])/_0xa40244):(_0x1747ac=_0x43adc9[_0x200689(0x2b9)],_0x42502c=Math['abs'](_0x43adc9[_0x200689(0x2de)]));_0x5497c3=='limit'&&(config[_0x200689(0x2ac)]==_0x200689(0x1d6)&&(_0xa40244=_0x1747ac==_0x200689(0x1ef)?_0x430c5a:_0x3ce06b),config[_0x200689(0x2ac)]==_0x200689(0x25d)&&(_0xa40244=_0x1747ac==_0x200689(0x1ef)?_0x3ce06b:_0x430c5a));_0x42502c=formatResult(_0x42502c,0x8),_0xa40244=formatResult(_0xa40244,0x8);const _0x58830c=_0x1747ac=='sell'?config[_0x200689(0x2e1)]?String[_0x200689(0x1e0)]('0x'+config[_0x200689(0x2e1)])+'\x20':'':config[_0x200689(0x1e7)]?String[_0x200689(0x1e0)]('0x'+config['emojibuy'])+'\x20':'',_0x29be69=_0x5497c3==_0x200689(0x296)?_0x200689(0x248):config[_0x200689(0x2ac)]==_0x200689(0x1d6)?_0x200689(0x27e):'Limit\x20(low-margin)',_0x27c8e5=(Math[_0x200689(0x231)](Math[_0x200689(0x285)]()*0x35a4e900)+0x5f5e100)[_0x200689(0x227)]();lastOrders[_0x200689(0x22e)]({'customId':_0x27c8e5,'symbol':_0xde4937,'coin':_0x43adc9[_0x200689(0x35d)],'amount':_0x42502c,'price':_0xa40244,'side':_0x1747ac,'reverse':_0x43adc9['reverse'],'filled':0x0});if(_0x5497c3==_0x200689(0x296))logHistory('order',''+_0x58830c+_0x29be69+_0x200689(0x254)+_0xde4937+'\x20'+_0x1747ac+'\x20#'+formatResult(_0x42502c,0x8)+'\x20@'+formatResult(_0xa40244,0x8));else logHistory(_0x200689(0x2df),''+_0x58830c+_0x29be69+'\x20order:\x20'+_0xde4937+'\x20'+_0x1747ac+'\x20#'+formatResult(_0x42502c,0x8)+'\x20@'+formatResult(_0xa40244,0x8));let _0x16a495;_0x5497c3==_0x200689(0x296)?_0x1747ac=='buy'&&config['exchange']==_0x200689(0x35a)?_0x16a495=await exchange[_0x200689(0x1d4)](_0xde4937,_0x5497c3,_0x1747ac,_0x42502c,_0xa40244):_0x16a495=await exchange[_0x200689(0x1d4)](_0xde4937,_0x5497c3,_0x1747ac,_0x42502c,undefined):_0x16a495=await exchange[_0x200689(0x1d4)](_0xde4937,_0x5497c3,_0x1747ac,_0x42502c,_0xa40244);logger[_0x200689(0x212)](_0x200689(0x256)+_0x16a495['id']+_0x200689(0x229)+_0x27c8e5);const _0xf18c10=lastOrders[_0x200689(0x1dc)]-0x1;if(_0xf18c10>=0x0&&lastOrders[_0xf18c10]['customId']==_0x27c8e5){lastOrders[_0xf18c10]['orderId']=_0x16a495['id'];if(_0x16a495[_0x200689(0x29c)])lastOrders[_0xf18c10]['amount']=_0x16a495['amount'];if(_0x16a495[_0x200689(0x24b)])lastOrders[_0xf18c10][_0x200689(0x24b)]=_0x16a495[_0x200689(0x24b)];lastOrders[_0xf18c10][_0x200689(0x250)]=_0x16a495['fee'];}if(config['cooldown']!=0x0){let _0xeb5797=null;if(cooldownTracker[_0x200689(0x1dc)]==config[_0x200689(0x210)]-0x1)_0xeb5797=cooldownTracker[_0x200689(0x27b)]();const _0x58e820=getTimeStamp();cooldownTracker[_0x200689(0x22e)](_0x58e820);if(_0xeb5797){const _0xa89e07=fns[_0x200689(0x1e5)](new Date(_0x58e820),new Date(_0xeb5797));if(_0xa89e07<cooldownInterval){logHistory(_0x200689(0x237),'Executed\x20'+config['cooldown']+_0x200689(0x2a7)+cooldownInterval/0x3c+_0x200689(0x2e4)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x8fd0dc){if(_0x8fd0dc[_0x200689(0x227)]()[_0x200689(0x261)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x200689(0x2bc)](_0x1c386b=>_0x1c386b[_0x200689(0x2d5)]!=_0xde4937),logHistory(_0x200689(0x237),_0x200689(0x34b)+_0xde4937),_0x482500=!![];else{if(_0x8fd0dc[_0x200689(0x227)]()[_0x200689(0x261)](_0x200689(0x1cd)))lastOrders=lastOrders[_0x200689(0x2bc)](_0x34fa1f=>_0x34fa1f['symbol']!=_0xde4937),logHistory(_0x200689(0x237),'Order\x20amount\x20is\x20invalid:\x20'+_0xde4937),_0x482500=!![];else{if(_0x8fd0dc[_0x200689(0x227)]()[_0x200689(0x261)](_0x200689(0x221)))lastOrders=lastOrders[_0x200689(0x2bc)](_0x584519=>_0x584519[_0x200689(0x2d5)]!=_0xde4937),logHistory('error',_0x200689(0x32d)+_0xde4937),logger[_0x200689(0x212)](_0x8fd0dc),_0x482500=!![];else _0x8fd0dc[_0x200689(0x227)]()[_0x200689(0x261)](_0x200689(0x30d))?(lastOrders=lastOrders[_0x200689(0x2bc)](_0xc6c9fa=>_0xc6c9fa['symbol']!=_0xde4937),logHistory(_0x200689(0x237),_0x200689(0x34b)+_0xde4937),_0x482500=!![]):(lastOrders=lastOrders[_0x200689(0x2bc)](_0x180f96=>_0x180f96[_0x200689(0x2d5)]!=_0xde4937),await handleError(_0x8fd0dc,_0x200689(0x215),_0xde4937));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x200689(0x1dc)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x568358=config[_0x200689(0x2ac)]==_0x200689(0x296)?validateOrderTimeout*0x3c*0x3e8:config[_0x200689(0x2d0)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x568358);}else unlockOrders();_0x482500&&config[_0x200689(0x294)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x200689(0x28d),_0x200689(0x2b2)));}else{if(coolingDown)!config[_0x200689(0x294)]&&logHistory(_0x200689(0x237),_0x200689(0x26c));else lockOrders!=ORDERS[_0x200689(0x24d)]&&(!config[_0x200689(0x294)]&&(config[_0x200689(0x2ac)]==_0x200689(0x296)?logHistory(_0x200689(0x237),_0x200689(0x277)):logHistory('error',_0x200689(0x20a))));}}function persistOpenOrders(_0xf9f25b){const _0x572993=_0x3f7261,_0x2ec1c1={...config,'openOrders':_0xf9f25b};let _0x12bfed=dbConfig[_0x572993(0x2ee)]('bot')[_0x572993(0x1d7)]({'botID':botID})['value']();_0x12bfed&&dbConfig['get'](_0x572993(0x354))['find']({'botID':botID})[_0x572993(0x21f)](_0x2ec1c1)['write']();}function restoreOrders(){const _0x77616f=_0x3f7261;let _0x268054;config[_0x77616f(0x2f9)]&&allOpenOrders[_0x77616f(0x214)](_0x257a54=>{const _0x247557=_0x77616f,_0x946da6=config[_0x247557(0x2f9)][_0x247557(0x1d7)](_0x55c6d4=>_0x55c6d4[_0x247557(0x33a)]==_0x257a54['id']);_0x946da6&&(lastOrders[_0x247557(0x22e)](_0x946da6),_0x268054=_0x257a54['timestamp']);});if(lastOrders[_0x77616f(0x1dc)]>0x0){lockOrders=ORDERS[_0x77616f(0x1fa)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x320f5b=new Date()['getTime'](),_0x1267f8=config['ordertype']==_0x77616f(0x296)?validateOrderTimeout*0x3c*0x3e8:config[_0x77616f(0x2d0)]*0x3c*0x3e8;if(_0x268054+_0x1267f8>_0x320f5b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x143eff=_0x77616f;validateOrders(_0x143eff(0x1e1));},_0x268054+_0x1267f8-_0x320f5b);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4b2354=_0x3f7261;if(!coinsLoaded){process[_0x4b2354(0x355)]({'telegrammsg':_0x4b2354(0x239)},_0x3be498=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1be94f='';if(config[_0x4b2354(0x26f)])_0x1be94f=_0x4b2354(0x31d)+config['botname']+_0x4b2354(0x255);else _0x1be94f='<b>Bot\x20'+botID+_0x4b2354(0x255);const _0x365641=getKPIs(_0x4b2354(0x1e2)),_0x17462b=getKPIs('fiat',config[_0x4b2354(0x34c)]),_0x4c0fbc=getKPIs(_0x4b2354(0x2ef)),_0x1e5ff2=getKPIs('net-fiat',config[_0x4b2354(0x34c)]);_0x1be94f+='<pre>',_0x1be94f+=_0x365641[_0x4b2354(0x281)]+_0x4b2354(0x2b3)+_0x365641[_0x4b2354(0x2eb)]+'\x0a',_0x1be94f+=_0x365641[_0x4b2354(0x2e7)]+':\x20'+_0x365641[_0x4b2354(0x35f)]+'%\x0a',_0x1be94f+=_0x17462b['leftTxt']+'\x20:\x20'+_0x17462b[_0x4b2354(0x2eb)]+'\x0a',_0x1be94f+=_0x17462b[_0x4b2354(0x2e7)]+':\x20'+_0x17462b[_0x4b2354(0x35f)]+'%\x0a',_0x1be94f+=_0x4c0fbc['leftTxt']+':\x20'+_0x4c0fbc[_0x4b2354(0x2eb)]+'\x20('+config['basecoin']+')\x0a',_0x1be94f+=_0x4c0fbc[_0x4b2354(0x2e7)]+':\x20'+_0x4c0fbc[_0x4b2354(0x35f)]+_0x4b2354(0x302)+config[_0x4b2354(0x1e2)]+')\x0a',_0x1be94f+=_0x1e5ff2['leftTxt']+':\x20'+_0x1e5ff2[_0x4b2354(0x2eb)]+'\x20('+config['fiat']+')\x0a',_0x1be94f+=_0x1e5ff2[_0x4b2354(0x2e7)]+':\x20'+_0x1e5ff2[_0x4b2354(0x35f)]+'%\x20('+config[_0x4b2354(0x34c)]+')\x0a',_0x1be94f+=_0x4b2354(0x1f7),process[_0x4b2354(0x355)]({'telegrammsg':_0x1be94f},_0x27d87a=>{});}async function sendPortfolioTelegram(){const _0x99f945=_0x3f7261;if(!coinsLoaded){process[_0x99f945(0x355)]({'telegrammsg':_0x99f945(0x239)},_0x54ba42=>{});return;}let _0x101de9='';if(config[_0x99f945(0x26f)])_0x101de9=_0x99f945(0x31d)+config[_0x99f945(0x208)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x101de9=_0x99f945(0x1f8)+botID+_0x99f945(0x330);_0x101de9+=_0x99f945(0x295),_0x101de9+=_0x99f945(0x29e),_0x101de9+=_0x99f945(0x2ca),_0x101de9+=_0x99f945(0x29e),currentCoins[_0x99f945(0x214)](_0x139045=>{const _0x54598a=_0x99f945;_0x101de9+=_0x139045[_0x54598a(0x35d)][_0x54598a(0x2fa)](0x7)+'|\x20'+formatPad(_0x139045['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x139045['target'],0x2,0x6)+'|\x20'+formatPad(_0x139045[_0x54598a(0x312)]*0x64,0x2,0x6)+'\x0a';}),_0x101de9+='</pre>',process['send']({'telegrammsg':_0x101de9},_0x2e47ff=>{});}function formatPad(_0x5e2769,_0x352e6c,_0x40fbe9){const _0x4b93e4=_0x3f7261,_0x175e13=formatResultString(_0x5e2769,_0x352e6c);return _0x175e13?_0x175e13[_0x4b93e4(0x266)](_0x40fbe9):''[_0x4b93e4(0x266)](_0x40fbe9);}function logHistory(_0x41ff51,_0x296762,_0xa9e413=''){const _0x565fdb=_0x3f7261;let _0x2123dd={'time':getTimeStamp(),'type':_0x41ff51,'event':_0x296762};dbLogs[_0x565fdb(0x2ee)](_0x565fdb(0x257))[_0x565fdb(0x22e)](_0x2123dd)[_0x565fdb(0x240)]();if(_0xa9e413=='')_0xa9e413=_0x296762;proxyEmit(_0x565fdb(0x2b8),{'log':_0x2123dd,'summary':_0xa9e413}),process['send']({'telegram':{..._0x2123dd,'botname':config[_0x565fdb(0x208)],'showname':config['showname']}},_0x112e0b=>{}),logger[_0x565fdb(0x1ec)](''+_0x2123dd[_0x565fdb(0x2b8)]);}function emitHistory(_0x3a3383={}){const _0x5f583a=_0x3f7261;Object['keys'](_0x3a3383)[_0x5f583a(0x1dc)]==0x0&&(_0x3a3383={'type':['order','event'],'event':'','page':0x1});if(_0x3a3383[_0x5f583a(0x288)][_0x5f583a(0x261)](_0x5f583a(0x2b8)))_0x3a3383[_0x5f583a(0x288)][_0x5f583a(0x271)](_0x3a3383[_0x5f583a(0x288)]['indexOf'](_0x5f583a(0x2b8)),0x1,_0x5f583a(0x237),_0x5f583a(0x273),_0x5f583a(0x28d));if(dbLogs[_0x5f583a(0x1f6)]('logs')[_0x5f583a(0x2eb)]()){let _0x8df232=dbLogs[_0x5f583a(0x2ee)](_0x5f583a(0x257))[_0x5f583a(0x2bc)](_0x3947eb=>{const _0x44412c=_0x5f583a;if(_0x3a3383[_0x44412c(0x288)]['length']==0x0)return![];else return _0x3a3383[_0x44412c(0x288)][_0x44412c(0x261)](_0x3947eb[_0x44412c(0x288)]);})[_0x5f583a(0x2bc)](_0x300052=>{const _0x545738=_0x5f583a;if(_0x3a3383['event']=='')return!![];else return _0x300052[_0x545738(0x2b8)]['toLowerCase']()[_0x545738(0x261)](_0x3a3383[_0x545738(0x2b8)][_0x545738(0x2ad)]());})[_0x5f583a(0x349)]('time'),_0x101886=_0x8df232[_0x5f583a(0x2eb)]()[_0x5f583a(0x1dc)];_0x8df232=_0x8df232[_0x5f583a(0x2e0)]()[_0x5f583a(0x1d9)]((_0x3a3383[_0x5f583a(0x282)]-0x1)*logPageSize,_0x3a3383[_0x5f583a(0x282)]*logPageSize-0x1)[_0x5f583a(0x2e0)]()[_0x5f583a(0x2eb)](),proxyEmit(_0x5f583a(0x34f),{'logs':_0x8df232,'total':_0x101886});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x444087){const _0x5e0cca=_0x3f7261;if(dbLogs[_0x5e0cca(0x1f6)](_0x5e0cca(0x257))[_0x5e0cca(0x2eb)]()){const _0x2e2791=dbLogs[_0x5e0cca(0x2ee)](_0x5e0cca(0x257))['sortBy'](_0x5e0cca(0x2a0))[_0x5e0cca(0x2bc)](_0x861518=>{const _0x26dad5=_0x5e0cca;return _0x861518['type']==_0x26dad5(0x2df);})[_0x5e0cca(0x2eb)]();dbLogs['get'](_0x5e0cca(0x257))[_0x5e0cca(0x2c6)]()[_0x5e0cca(0x240)](),dbLogs[_0x5e0cca(0x2ee)](_0x5e0cca(0x257))[_0x5e0cca(0x21f)](_0x2e2791)[_0x5e0cca(0x240)](),emitHistory(_0x444087);}}async function pauseBot(_0x5d994e=''){const _0x2e2f1a=_0x3f7261,_0x59dcb4=new Date()['getTime']();if(!lastErrorShown||_0x59dcb4-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x59dcb4;!lastBotPause?(lastBotPause=_0x59dcb4,consecutivePauses=0x1):(_0x59dcb4-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2e2f1a(0x355)]({'stop':_0x2e2f1a(0x2fb)},_0xe2c17d=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x5d994e)_0x5d994e+='\x20|\x20';logHistory(_0x2e2f1a(0x237),_0x5d994e+_0x2e2f1a(0x26b)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4b42c1=_0x3f7261;process[_0x4b42c1(0x355)]({'stop':_0x4b42c1(0x2d4)},_0x5662bc=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x495d8c,_0x474819){const _0x3d2cfb=_0x3f7261;if(_0x495d8c[_0x3d2cfb(0x227)]()[_0x3d2cfb(0x261)](_0x3d2cfb(0x31a)))return logHistory(_0x3d2cfb(0x237),config[_0x3d2cfb(0x200)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x495d8c[_0x3d2cfb(0x227)]()[_0x3d2cfb(0x261)](_0x3d2cfb(0x209)))return logHistory(_0x3d2cfb(0x237),config[_0x3d2cfb(0x200)]+_0x3d2cfb(0x356)),![];else{if(_0x495d8c[_0x3d2cfb(0x227)]()['includes'](_0x3d2cfb(0x2d9)))return logHistory(_0x3d2cfb(0x237),config[_0x3d2cfb(0x200)]+_0x3d2cfb(0x1d0)),logHistory(_0x3d2cfb(0x237),_0x3d2cfb(0x2d3)),![];else await handleError(_0x495d8c,_0x474819);}}}async function handleError(_0x51fb77,_0xe2b54a,_0x3ec7c9=''){const _0x12e1ac=_0x3f7261,_0x11fa32=config[_0x12e1ac(0x200)]||_0x12e1ac(0x218);if(_0x51fb77[_0x12e1ac(0x227)]()['includes'](_0x12e1ac(0x2a4))||_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x344)))await pauseBot(config[_0x12e1ac(0x200)]+_0x12e1ac(0x1fe));else{if(_0x51fb77['toString']()['includes']('ExchangeNotAvailable')||_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x341)))await pauseBot(config[_0x12e1ac(0x200)]+'\x20not\x20available');else{if(_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x206)))await pauseBot(config['exchange']+_0x12e1ac(0x24e));else{if(_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0x12e1ac(0x28c));else{if(_0x51fb77['toString']()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x12e1ac(0x237),_0xe2b54a+_0x12e1ac(0x318)),logHistory(_0x12e1ac(0x237),_0x12e1ac(0x2cf)),await killBot();else{if(_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x316)))logHistory(_0x12e1ac(0x237),_0xe2b54a+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x12e1ac(0x237),_0x12e1ac(0x2cf)),await killBot();else{if(_0x51fb77 instanceof ccxt[_0x12e1ac(0x1fd)])logger[_0x12e1ac(0x212)](_0x12e1ac(0x2cc),_0x51fb77),await pauseBot(config[_0x12e1ac(0x200)]+'\x20network\x20error');else{if(_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x31a)))logHistory(_0x12e1ac(0x237),_0xe2b54a+'\x20|\x20'+config[_0x12e1ac(0x200)]+_0x12e1ac(0x1f1)),logHistory(_0x12e1ac(0x237),_0x12e1ac(0x2cf)),await killBot();else{if(_0x51fb77[_0x12e1ac(0x227)]()['includes'](_0x12e1ac(0x209)))logHistory(_0x12e1ac(0x237),_0xe2b54a+_0x12e1ac(0x2f8)+config[_0x12e1ac(0x200)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x12e1ac(0x237),_0x12e1ac(0x2cf)),await killBot();else{if(_0x51fb77['toString']()['includes']('AuthenticationError'))logHistory(_0x12e1ac(0x237),_0xe2b54a+'\x20|\x20'+config[_0x12e1ac(0x200)]+_0x12e1ac(0x333)),logHistory(_0x12e1ac(0x237),_0x12e1ac(0x2cf)),await killBot();else{if(_0x51fb77[_0x12e1ac(0x227)]()[_0x12e1ac(0x261)](_0x12e1ac(0x2b1)))logHistory(_0x12e1ac(0x237),_0xe2b54a+_0x12e1ac(0x244)+_0x3ec7c9);else _0x51fb77 instanceof ccxt[_0x12e1ac(0x2e8)]?(logger['debug'](_0x12e1ac(0x23d),_0x51fb77),logHistory('error',_0xe2b54a+_0x12e1ac(0x2f8)+config[_0x12e1ac(0x200)]+'\x20exchange\x20error')):(logger['full'](_0xe2b54a+_0x12e1ac(0x1f2),_0x51fb77),await pauseBot(_0x12e1ac(0x2f1)));}}}}}}}}}}}function formatResult(_0x585f5f,_0x55854e){const _0x322c36=_0x3f7261;return parseFloat(_0x585f5f[_0x322c36(0x1ea)](_0x55854e));}function formatResultTruncate(_0x88485c,_0x50cdca){const _0xd17783=_0x3f7261;let _0x4b71ec=formatResultString(_0x88485c,0xa),_0x52cca3=_0x4b71ec['indexOf']('.');return _0x52cca3!=-0x1&&(_0x4b71ec=_0x4b71ec[_0xd17783(0x1d9)](0x0,_0x52cca3+_0x50cdca+0x1)),Number(_0x4b71ec);}function formatResultString(_0x242193,_0x58f210){const _0x1d458f=_0x3f7261;let _0xd2fcf3;if(!(''+_0x242193)[_0x1d458f(0x261)]('e'))_0xd2fcf3=+(Math['round'](_0x242193+'e+'+_0x58f210)+'e-'+_0x58f210);else{let _0xdbe004=(''+_0x242193)[_0x1d458f(0x2b7)]('e'),_0x498ad9='';+_0xdbe004[0x1]+_0x58f210>0x0&&(_0x498ad9='+'),_0xd2fcf3=+(Math['round'](+_0xdbe004[0x0]+'e'+_0x498ad9+(+_0xdbe004[0x1]+_0x58f210))+'e-'+_0x58f210);}return Number(_0xd2fcf3)['toFixed'](_0x58f210);}function getServerTime(){const _0x2be12e=_0x3f7261,_0x3ecdf1=new Date();return _0x3ecdf1[_0x2be12e(0x1d2)]()+'/'+(_0x3ecdf1[_0x2be12e(0x2fc)]()+0x1)[_0x2be12e(0x227)]()[_0x2be12e(0x266)](0x2,'0')+'/'+_0x3ecdf1[_0x2be12e(0x279)]()[_0x2be12e(0x227)]()[_0x2be12e(0x266)](0x2,'0')+'\x20'+_0x3ecdf1[_0x2be12e(0x304)]()[_0x2be12e(0x227)]()[_0x2be12e(0x266)](0x2,'0')+':'+_0x3ecdf1[_0x2be12e(0x22f)]()[_0x2be12e(0x227)]()['padStart'](0x2,'0')+':'+_0x3ecdf1[_0x2be12e(0x339)]()[_0x2be12e(0x227)]()[_0x2be12e(0x266)](0x2,'0');}function getTimeStamp(){const _0x4061c0=_0x3f7261,_0x3a5459=shiftedTime();return _0x3a5459[_0x4061c0(0x1d2)]()+'/'+(_0x3a5459['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x3a5459[_0x4061c0(0x279)]()[_0x4061c0(0x227)]()[_0x4061c0(0x266)](0x2,'0')+'\x20'+_0x3a5459[_0x4061c0(0x304)]()['toString']()[_0x4061c0(0x266)](0x2,'0')+':'+_0x3a5459[_0x4061c0(0x22f)]()[_0x4061c0(0x227)]()[_0x4061c0(0x266)](0x2,'0')+':'+_0x3a5459['getSeconds']()[_0x4061c0(0x227)]()['padStart'](0x2,'0');}function getDate(){const _0x7de4c1=_0x3f7261,_0x10d3f8=shiftedTime();return _0x10d3f8[_0x7de4c1(0x1d2)]()+'/'+(_0x10d3f8[_0x7de4c1(0x2fc)]()+0x1)[_0x7de4c1(0x227)]()[_0x7de4c1(0x266)](0x2,'0')+'/'+_0x10d3f8[_0x7de4c1(0x279)]()[_0x7de4c1(0x227)]()[_0x7de4c1(0x266)](0x2,'0');}function getHour(){const _0x554144=_0x3f7261,_0x53bccf=shiftedTime();return _0x53bccf[_0x554144(0x304)]()[_0x554144(0x227)]()['padStart'](0x2,'0');}function sleep(_0x5925b9){return new Promise(_0x33fd90=>setTimeout(_0x33fd90,_0x5925b9));}function shiftedTime(){const _0x26bb91=_0x3f7261,_0x1d9e94=new Date();let _0xf3aac5=_0x1d9e94;if(config&&config[_0x26bb91(0x262)]!==0x0)_0xf3aac5=fns[_0x26bb91(0x263)](_0x1d9e94,{'hours':config['timeshift']});return _0xf3aac5;}function _0x5a12(_0x4f3ae1,_0x4d820f){const _0x296a7e=_0x31e1();return _0x5a12=function(_0x2a8ef3,_0x29fd53){_0x2a8ef3=_0x2a8ef3-0x1cc;let _0x31e18a=_0x296a7e[_0x2a8ef3];return _0x31e18a;},_0x5a12(_0x4f3ae1,_0x4d820f);}function timer(_0x472fed){const _0x45859b=_0x3f7261,_0x47b40f=new Date();!lasttime?console[_0x45859b(0x23c)](getTimeStamp()+_0x45859b(0x22d),_0x472fed,_0x47b40f):console[_0x45859b(0x23c)](getTimeStamp()+_0x45859b(0x22d),_0x472fed,(_0x47b40f-lasttime)/0x3e8),lasttime=_0x47b40f;}