const _0x4a5832=_0x47e8;(function(_0x4cfb83,_0x1be9c0){const _0x57cae7=_0x47e8,_0x45ba90=_0x4cfb83();while(!![]){try{const _0x2681be=-parseInt(_0x57cae7(0x1a5))/0x1+parseInt(_0x57cae7(0x142))/0x2*(parseInt(_0x57cae7(0x130))/0x3)+-parseInt(_0x57cae7(0x1d0))/0x4*(parseInt(_0x57cae7(0x208))/0x5)+parseInt(_0x57cae7(0x147))/0x6+parseInt(_0x57cae7(0x20b))/0x7*(parseInt(_0x57cae7(0x19d))/0x8)+-parseInt(_0x57cae7(0x209))/0x9+parseInt(_0x57cae7(0x200))/0xa*(-parseInt(_0x57cae7(0x171))/0xb);if(_0x2681be===_0x1be9c0)break;else _0x45ba90['push'](_0x45ba90['shift']());}catch(_0x293824){_0x45ba90['push'](_0x45ba90['shift']());}}}(_0x3826,0x1b6b7));const _0x14b233=function(){let _0x341f6f=!![];return function(_0x2735e0,_0x5863b5){const _0x2619ca=_0x341f6f?function(){if(_0x5863b5){const _0x37ba0d=_0x5863b5['apply'](_0x2735e0,arguments);return _0x5863b5=null,_0x37ba0d;}}:function(){};return _0x341f6f=![],_0x2619ca;};}(),_0x50fca5=_0x14b233(this,function(){const _0xf7488f=_0x47e8;return _0x50fca5[_0xf7488f(0x1b0)]()[_0xf7488f(0x1b1)]('(((.+)+)+)+$')[_0xf7488f(0x1b0)]()[_0xf7488f(0x115)](_0x50fca5)[_0xf7488f(0x1b1)](_0xf7488f(0x175));});_0x50fca5();'use strict';const ccxt=require(_0x4a5832(0x1ba)),low=require(_0x4a5832(0x118)),FileSync=require(_0x4a5832(0x19c)),fs=require('fs'),fns=require(_0x4a5832(0x1b2)),{WebsocketClient,DefaultLogger}=require(_0x4a5832(0x145)),Crypt=require('hybrid-crypto-js')[_0x4a5832(0x18b)];let exchange,wsClient;global[_0x4a5832(0x1a0)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;function _0x3826(){const _0x383c11=['Binance\x20API\x20key\x20is\x20invalid','write','Order(s)\x20filled\x20-\x20balancing\x20resumed','coin','BTCBUSD','Market','abs','placeOrder()','format','getTime','log','binanceus','WebSockets()\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','find','wsKey','Crypt','Order\x20filled:\x20','fetchOrders','message','time','apiKey','subscribeSpotKline','orderType','remove','\x20orders\x20in\x20less\x20than\x20','shift','coinamount','sortBy','close','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getPortfolio()','add','lowdb/adapters/FileSync','37784jyvfAw','sells','getStartingBalances','ticker','initws()','-events.json','includes','limits','161244jXPEsv','settings','orderStatus','************','toFixed','createOrder','subscribeSpotUserDataStream','parseISO','currency','reconnected','existsSync','toString','search','date-fns','distribution','fetchTickers','WebSockets()\x20|\x20Error\x20details:\x20','padStart','formattedMessage','trade','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ccxt','number','portfolio','startnumber','wss://stream.binance.us:9443','RequestTimeout','Limit\x20(low-margin)','DDoSProtection','startdate','Bot\x20','page','\x20hour','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','userData','DAI/','reverse','buy','coin-loading-progress','last','wss://stream.binance.com:9443','Limit\x20(high-margin)','getCoins()','57016IKXEyi','Order(s)\x20validated\x20-\x20balancing\x20resumed','event','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','/BTC','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','symbols','excluded','limit','fetchOHLCV','BTC/USDT','executionReport','sha256','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','limit-low','getMonth','forEach',':\x20Bot\x20','cooldown','target','push','kline','map','balances','differenceInSeconds','timeshift','parse','defaults','recreateHistory()','startprice','bot','coins','getFiat()','availableBalance','keys','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','send','date','getSeconds','assign','001','valid','AuthenticationError','has','\x20|\x20Error\x20details:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','amount','134110QmhTEo','exchange','getPortfolio','ordertype','error','BTC/BUSD','BTC','price','15danwCX','519282VzRIqa','fee','217pIeZJz','order','recreate','milliseconds','accumulatedQuantity','toLowerCase','isArray','secure','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','bb-secure.json','limit-high','enabled','InsufficientFunds','constructor','configuration','performance','lowdb','get','getFullYear','fetchBalance','apiSecret','symbol','spot','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','slice','mkdirSync','delta','BTCEUR','cost','filter','\x20order:\x20','emitHistory','getCloses()','privateKey','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','starting-balances','min','eventType','36141bgvnIs','type','argv','botname','logs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20minutes\x20-\x20balancing\x20resumed','Order(s)\x20not\x20filled\x20after\x20','buys','running','sort','breakeven','FILLED','total','InvalidNonce','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','side','realized','24oOSMQi','BTC/','getHours','binance','filled','578694IPPBoI','BNBBTC','API-key\x20format\x20invalid','data','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','getDate','datetime','timeout','headless','stringify','yyyy/MM/dd','botID','RSA-OAEP','value','BTC/EUR','Order:\x20','round','exit','splice','Performance\x20recreation\x20completed\x20successfully',',\x20must\x20be\x20a\x203\x20digit\x20number','market','MIN_NOTIONAL','yyyy/MM/dd\x20HH:mm:ss','bid','function','threshold','getMinutes','configuration-stored','sell','usd','bot-','eachDayOfInterval','-config.json','Order(s)\x20not\x20validated\x20after\x20','timestamp','\x20minutes\x20-\x20order(s)\x20canceled\x20-\x20balancing\x20resumed','length','Binance\x20API\x20secret\x20is\x20invalid','success','eur','args','11oDldXe','closeWs','orderId','event-history','(((.+)+)+)+$','Order\x20amount\x20is\x20invalid:\x20','\x20>\x20','wsMarket','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','BTCUSDT','indexOf'];_0x3826=function(){return _0x383c11;};return _0x3826();}let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require('./version.json')['version'],botID=process[_0x4a5832(0x132)][0x2]||_0x4a5832(0x1f9),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x4a5832(0x186)]('Error:\x20Invalid\x20argument\x20'+botID+_0x4a5832(0x15b)),process[_0x4a5832(0x158)](0x1);const configpath='./config/';!fs[_0x4a5832(0x1af)](configpath)&&fs[_0x4a5832(0x123)](configpath);const configfile=configpath+_0x4a5832(0x166)+botID+_0x4a5832(0x168),logfile=configpath+_0x4a5832(0x166)+botID+_0x4a5832(0x1a2),performancefile=configpath+_0x4a5832(0x166)+botID+'-performance.json',coinresultsfile=configpath+_0x4a5832(0x166)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4a5832(0x111),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4a5832(0x1ec)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4a5832(0x1ec)]({'data':[]})[_0x4a5832(0x17d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x47e8(_0xda0d41,_0xb3c788){const _0x1f77c6=_0x3826();return _0x47e8=function(_0x50fca5,_0x14b233){_0x50fca5=_0x50fca5-0x109;let _0x382620=_0x1f77c6[_0x50fca5];return _0x382620;},_0x47e8(_0xda0d41,_0xb3c788);}dbConfig[_0x4a5832(0x1ec)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4a5832(0x1ec)]({'coins':[]})[_0x4a5832(0x17d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x4a5832(0x125),'symbol':_0x4a5832(0x155)},'usd':{'coin':'BTCUSDT','symbol':_0x4a5832(0x1db)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3ea2cc)=>{},'debug':(..._0x51ed78)=>{},'notice':(..._0x1037d7)=>{},'info':(..._0x4c8b6c)=>{},'warning':(..._0x26440c)=>{},'error':async function(..._0xa0ee24){const _0x400659=_0x4a5832,_0x2fb90b=new Date()[_0x400659(0x185)]();(!lastErrorShown||_0x2fb90b-lastErrorShown>=pauseBotInterval)&&(lastErrorShown=new Date()[_0x400659(0x185)](),logHistory(_0x400659(0x204),_0x400659(0x188)),logging(_0x400659(0x1b5),_0xa0ee24[0x0]+':\x20'+_0xa0ee24[0x1][_0x400659(0x204)][_0x400659(0x18e)]),await pauseBot(pauseBotInterval));}},crypt=new Crypt({'md':_0x4a5832(0x1dd),'rsaStandard':_0x4a5832(0x153)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x4a5832(0x1ea)]!=config[_0x4a5832(0x1ea)]&&updateTimeshift(settings[_0x4a5832(0x1ea)]);process['send']({'started':_0x4a5832(0x139)}),initializeProcessListeners();function proxyEmit(_0x10fdea,_0x3a2ce9=null){process['send']({'function':_0x10fdea,'args':_0x3a2ce9});}function initializeProcessListeners(){const _0xce9ec4=_0x4a5832;process['on'](_0xce9ec4(0x18e),_0x4b124b=>{const _0x3487c6=_0xce9ec4;switch(Object[_0x3487c6(0x1f3)](_0x4b124b)[0x0]){case _0x3487c6(0x1ea):_0x4b124b[_0x3487c6(0x1ea)]!=undefined&&(settings[_0x3487c6(0x1ea)]=_0x4b124b[_0x3487c6(0x1ea)],updateTimeshift(settings[_0x3487c6(0x1ea)]));break;case _0x3487c6(0x160):switch(_0x4b124b[_0x3487c6(0x160)]){case'initclient':initclient();break;case _0x3487c6(0x129):emitHistory(_0x4b124b[_0x3487c6(0x170)]);break;case _0x3487c6(0x202):getPortfolio(_0x4b124b[_0x3487c6(0x170)]);break;case'storeConfiguration':storeConfiguration(_0x4b124b[_0x3487c6(0x170)]);break;case'storeHeadless':storeHeadless(_0x4b124b['args']);break;case _0x3487c6(0x19f):getStartingBalances();break;case'placeOrder':placeOrder(_0x4b124b[_0x3487c6(0x170)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x48c026=_0x4a5832;if(pidBalances)clearTimeout(pidBalances);if(config[_0x48c026(0x190)]!=''){await initExchange(config[_0x48c026(0x190)],config['apiSecret']);let _0x11a4b0=await loadSymbols();_0x11a4b0&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x2da475,_0xe9a486){const _0x513317=_0x4a5832,_0xe73fff=ccxt[config[_0x513317(0x201)]];let _0x5dbe83;switch(config['exchange']){case _0x513317(0x145):_0x5dbe83=_0x513317(0x1cd);break;case _0x513317(0x187):_0x5dbe83=_0x513317(0x1be);break;default:_0x5dbe83=_0x513317(0x1cd);}exchange=new _0xe73fff({'apiKey':_0x2da475,'secret':_0xe9a486,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2da475,'api_secret':_0xe9a486,'beautify':!![],'wsUrl':_0x5dbe83},logger),config[_0x513317(0x201)]==_0x513317(0x187)&&(stablecoins={'eur':{'coin':_0x513317(0x180),'symbol':_0x513317(0x205)},'usd':{'coin':_0x513317(0x17a),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x38e7e9=_0x4a5832;let _0x327564;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x38e7e9(0x1d7)]['filter'](_0xc3bd8a=>{const _0x140710=_0x38e7e9;return _0xc3bd8a[_0x140710(0x1a3)](_0x140710(0x206))&&!_0xc3bd8a['includes'](_0x140710(0x1c8));}),_0x327564=!![];}catch(_0x2e6d30){await handleError(_0x2e6d30,'loadSymbols()'),_0x327564=![];}return _0x327564;}async function initbot(){const _0xc5d21=_0x4a5832;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x341e63=dbCoinResults[_0xc5d21(0x119)](_0xc5d21(0x1f0))[_0xc5d21(0x154)]();if(_0x341e63[_0xc5d21(0x16c)]==0x0)await resetCoinResults();}async function initclient(){const _0x2058a3=_0x4a5832;proxyEmit(_0x2058a3(0x116),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2058a3(0x1e8),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3b9eff=_0x4a5832;wsinitialized=![];ws1&&(ws1[_0x3b9eff(0x1e1)](_0x48ef2f=>{const _0x403989=_0x3b9eff;try{wsClient[_0x403989(0x172)](_0x48ef2f);}catch(_0x1f3a82){}}),ws1=[]);if(ws2){try{wsClient[_0x3b9eff(0x172)](ws2);}catch(_0x241c7f){}ws2=null;}}async function initws(){const _0x27352c=_0x4a5832;cleanws();let _0x4bbabd=[];currentCoins['forEach'](_0x3e1890=>{const _0x5811a2=_0x47e8;if(_0x3e1890[_0x5811a2(0x17f)]!=_0x5811a2(0x206))_0x4bbabd['push'](noslash(_0x3e1890[_0x5811a2(0x11d)]));});if(!_0x4bbabd['includes'](stablecoins['eur'][_0x27352c(0x17f)]))_0x4bbabd[_0x27352c(0x1e5)](stablecoins[_0x27352c(0x16f)][_0x27352c(0x17f)]);if(!_0x4bbabd['includes'](stablecoins['usd']['coin']))_0x4bbabd[_0x27352c(0x1e5)](stablecoins[_0x27352c(0x165)][_0x27352c(0x17f)]);if(!_0x4bbabd[_0x27352c(0x1a3)](_0x27352c(0x148)))_0x4bbabd[_0x27352c(0x1e5)](_0x27352c(0x148));try{_0x4bbabd[_0x27352c(0x1e1)]((_0x3f7e47,_0x5a4874)=>{const _0xd0ab73=_0x27352c;ws1[_0x5a4874]=wsClient[_0xd0ab73(0x191)](_0x3f7e47,'1m');}),ws2=wsClient[_0x27352c(0x1ab)](),wsClient['on'](_0x27352c(0x1b7),_0x2e66d6=>{const _0x41ded0=_0x27352c;if(!Array[_0x41ded0(0x10e)](_0x2e66d6)&&!_0x2e66d6[_0x41ded0(0x18a)][_0x41ded0(0x1a3)](_0x41ded0(0x1c7))){if(_0x2e66d6[_0x41ded0(0x12f)]==='kline'){global['ticker'][_0x2e66d6[_0x41ded0(0x1e6)]['symbol']]=_0x2e66d6[_0x41ded0(0x1e6)][_0x41ded0(0x198)];return;}}else{if(!Array[_0x41ded0(0x10e)](_0x2e66d6)&&_0x2e66d6[_0x41ded0(0x18a)][_0x41ded0(0x1a3)](_0x41ded0(0x1c7))){if(_0x2e66d6[_0x41ded0(0x178)][_0x41ded0(0x1a3)](_0x41ded0(0x11e))){updateNumberCoins(_0x2e66d6);return;}}}}),wsClient['on'](_0x27352c(0x1ae),async _0x1f0984=>{currentCoins=await getCoins();});}catch(_0x446972){await handleError(_0x446972,_0x27352c(0x1a1));}let _0x6cac1b;while(_0x6cac1b!=currentCoins[_0x27352c(0x16c)]-0x1){_0x6cac1b=0x0,currentCoins['forEach'](_0x37291d=>{const _0xde4ece=_0x27352c;if(_0x37291d[_0xde4ece(0x17f)]!=_0xde4ece(0x206)&&global[_0xde4ece(0x1a0)][noslash(_0x37291d['symbol'])])_0x6cac1b++;});let _0x3c1b18=Math[_0x27352c(0x157)](_0x6cac1b/(currentCoins['length']-0x1)*0x64);proxyEmit(_0x27352c(0x1cb),_0x3c1b18),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x2222c3=_0x4a5832;let _0x437f58=0x0,_0x1ae1f7=0x0;try{_0x437f58=global[_0x2222c3(0x1a0)][stablecoins['eur'][_0x2222c3(0x17f)]],_0x1ae1f7=global[_0x2222c3(0x1a0)][stablecoins['usd'][_0x2222c3(0x17f)]];}catch(_0x347001){await handleError(_0x347001,_0x2222c3(0x1f1));}return{'eur':Number(_0x437f58),'usd':Number(_0x1ae1f7)};}async function setStartDatePerformance(_0x2dd5f9){const _0x35249a=_0x4a5832,_0x5dfadd=fns[_0x35249a(0x184)](new Date(_0x2dd5f9[_0x35249a(0x1c2)]),_0x35249a(0x151));let _0x1f87ef=[];_0x1f87ef[stablecoins[_0x35249a(0x16f)]['coin']]=await getCloses(stablecoins['eur'][_0x35249a(0x11d)],new Date(_0x2dd5f9[_0x35249a(0x1c2)]),0x1),_0x1f87ef[stablecoins[_0x35249a(0x165)][_0x35249a(0x17f)]]=await getCloses(stablecoins[_0x35249a(0x165)][_0x35249a(0x11d)],new Date(_0x2dd5f9[_0x35249a(0x1c2)]),0x1);let _0x46c018,_0x1ede34=[];_0x2dd5f9['portfolio'][_0x35249a(0x1e1)](_0x559eaa=>{const _0x1307f2=_0x35249a;!_0x559eaa['excluded']&&_0x1ede34[_0x1307f2(0x1e5)]({'coin':_0x559eaa[_0x1307f2(0x17f)],'number':_0x559eaa[_0x1307f2(0x1bd)],'price':_0x559eaa[_0x1307f2(0x1ee)]});}),_0x46c018={'date':_0x5dfadd,'eur':_0x1f87ef[stablecoins[_0x35249a(0x16f)][_0x35249a(0x17f)]][0x0],'usd':_0x1f87ef[stablecoins['usd']['coin']][0x0],'coins':_0x1ede34};let _0x21496e=dbPerformance['get']('data')[_0x35249a(0x189)]({'date':_0x5dfadd})[_0x35249a(0x154)]();_0x21496e?dbPerformance['get'](_0x35249a(0x14a))['find']({'date':_0x5dfadd})[_0x35249a(0x1f8)](_0x46c018)[_0x35249a(0x17d)]():dbPerformance[_0x35249a(0x119)]('data')[_0x35249a(0x1e5)](_0x46c018)[_0x35249a(0x17d)](),_0x21496e=dbPerformance[_0x35249a(0x119)]('data')[_0x35249a(0x197)]('date')[_0x35249a(0x154)](),_0x21496e[_0x35249a(0x1e1)](_0x2b5c56=>{const _0x4fd81e=_0x35249a;_0x2b5c56[_0x4fd81e(0x1f6)]<_0x5dfadd&&dbPerformance[_0x4fd81e(0x119)](_0x4fd81e(0x14a))['remove']({'date':_0x2b5c56[_0x4fd81e(0x1f6)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x371759){const _0x4858a6=_0x4a5832;let _0x47c135,_0x7a7dbe=[];logHistory(_0x4858a6(0x16e),_0x4858a6(0x13f)),_0x371759['portfolio'][_0x4858a6(0x1e1)](_0x538687=>{const _0x5f116d=_0x4858a6;if(_0x538687[_0x5f116d(0x17f)]!=_0x5f116d(0x206)&&!_0x538687[_0x5f116d(0x1d8)])_0x7a7dbe[_0x5f116d(0x1e5)]({'coin':_0x538687[_0x5f116d(0x17f)],'symbol':_0x538687[_0x5f116d(0x11d)]});});let _0x52c731=[];try{const _0x19dbc8=fns[_0x4858a6(0x184)](fns[_0x4858a6(0x1ac)](_0x371759[_0x4858a6(0x1c2)]['replace'](/\//g,'-')),_0x4858a6(0x1fe));for(const _0x420cd6 of _0x7a7dbe){if(_0x420cd6['coin']!='BTC')_0x47c135=await exchange[_0x4858a6(0x18d)](_0x420cd6[_0x4858a6(0x11d)],Date['parse'](_0x19dbc8));_0x47c135['forEach'](_0x3f01cd=>{const _0x349fe5=_0x4858a6,_0x5934f8=_0x420cd6[_0x349fe5(0x11d)][_0x349fe5(0x1a3)](_0x349fe5(0x143)),_0x131811=fns['format'](fns['parseISO'](_0x3f01cd[_0x349fe5(0x14d)]),_0x349fe5(0x15e)),_0x2d6f50=fns[_0x349fe5(0x184)](fns[_0x349fe5(0x1ac)](_0x3f01cd['datetime']),_0x349fe5(0x151));let _0x1aa273;if(_0x3f01cd[_0x349fe5(0x140)]==_0x349fe5(0x1ca)&&_0x5934f8==![])_0x1aa273=_0x3f01cd[_0x349fe5(0x1ff)];if(_0x3f01cd[_0x349fe5(0x140)]==_0x349fe5(0x1ca)&&_0x5934f8==!![])_0x1aa273=-_0x3f01cd[_0x349fe5(0x1ff)]*_0x3f01cd['price'];if(_0x3f01cd[_0x349fe5(0x140)]==_0x349fe5(0x164)&&_0x5934f8==![])_0x1aa273=-_0x3f01cd[_0x349fe5(0x1ff)];if(_0x3f01cd['side']==_0x349fe5(0x164)&&_0x5934f8==!![])_0x1aa273=_0x3f01cd[_0x349fe5(0x1ff)]*_0x3f01cd['price'];_0x52c731['push']({'timestamp':_0x131811,'date':_0x2d6f50,'coin':_0x420cd6[_0x349fe5(0x17f)],'symbol':_0x420cd6[_0x349fe5(0x11d)],'type':_0x3f01cd[_0x349fe5(0x131)],'side':_0x3f01cd[_0x349fe5(0x140)],'reverse':_0x5934f8,'amount':formatResult(_0x3f01cd[_0x349fe5(0x146)],0x8),'filled':formatResult(_0x3f01cd[_0x349fe5(0x146)],0x8),'coinamount':formatResult(_0x1aa273,0x8),'price':formatResult(_0x3f01cd[_0x349fe5(0x207)],0x8)});let _0x402bf6;if(_0x3f01cd['side']=='buy'&&_0x5934f8==![])_0x402bf6=-_0x3f01cd[_0x349fe5(0x1ff)]*_0x3f01cd['price'];if(_0x3f01cd[_0x349fe5(0x140)]==_0x349fe5(0x1ca)&&_0x5934f8==!![])_0x402bf6=_0x3f01cd[_0x349fe5(0x1ff)];if(_0x3f01cd['side']==_0x349fe5(0x164)&&_0x5934f8==![])_0x402bf6=_0x3f01cd['amount']*_0x3f01cd[_0x349fe5(0x207)];if(_0x3f01cd['side']==_0x349fe5(0x164)&&_0x5934f8==!![])_0x402bf6=-_0x3f01cd[_0x349fe5(0x1ff)];_0x52c731[_0x349fe5(0x1e5)]({'date':_0x2d6f50,'coin':_0x349fe5(0x206),'coinamount':formatResult(_0x402bf6,0x8)});});}_0x52c731[_0x4858a6(0x13a)]((_0x15a057,_0x534bcd)=>_0x15a057['timestamp']>_0x534bcd[_0x4858a6(0x16a)]?0x1:_0x534bcd[_0x4858a6(0x16a)]>_0x15a057[_0x4858a6(0x16a)]?-0x1:0x0),dbLogs['get'](_0x4858a6(0x134))[_0x4858a6(0x193)]()[_0x4858a6(0x17d)](),_0x52c731[_0x4858a6(0x1e1)](_0x91807b=>{const _0x342f5f=_0x4858a6;let _0x1332a5;_0x91807b[_0x342f5f(0x17f)]!=_0x342f5f(0x206)&&(_0x1332a5={'time':_0x91807b[_0x342f5f(0x16a)],'type':_0x342f5f(0x109),'event':_0x342f5f(0x156)+_0x91807b[_0x342f5f(0x11d)]+'\x20'+_0x91807b[_0x342f5f(0x140)]+'\x20#'+_0x91807b[_0x342f5f(0x1ff)]+'\x20@'+_0x91807b[_0x342f5f(0x207)]},dbLogs['get']('logs')['push'](_0x1332a5)['write']());});const _0x4f83bb=fns[_0x4858a6(0x167)]({'start':new Date(_0x371759[_0x4858a6(0x1c2)]),'end':new Date()})[_0x4858a6(0x1e7)](_0x789ad8=>fns['format'](_0x789ad8,'yyyy/MM/dd'));let _0x553e04=[];_0x371759[_0x4858a6(0x1bc)][_0x4858a6(0x1e1)](_0x3d23e8=>{const _0xd04b92=_0x4858a6;if(!_0x3d23e8[_0xd04b92(0x1d8)]){_0x553e04[_0x3d23e8['coin']]=[];let _0x4ce782=_0x3d23e8[_0xd04b92(0x1bd)];_0x4f83bb[_0xd04b92(0x1e1)]((_0x2d6088,_0x2911f7)=>{const _0x5974b9=_0xd04b92;let _0x24e609=_0x52c731[_0x5974b9(0x127)](_0x12824e=>_0x12824e['coin']==_0x3d23e8[_0x5974b9(0x17f)]&&_0x12824e[_0x5974b9(0x1f6)]==_0x2d6088);if(_0x24e609[_0x5974b9(0x16c)]!=0x0){let _0x3d6b65=_0x24e609['reduce']((_0x3ba902,_0x29d1fd)=>{const _0x1e86d2=_0x5974b9;return _0x3ba902+=_0x29d1fd[_0x1e86d2(0x196)],_0x3ba902;},0x0);_0x4ce782+=_0x3d6b65;}_0x553e04[_0x3d23e8['coin']][_0x2d6088]=_0x4ce782;});}});const _0x13de8b=[..._0x7a7dbe];_0x13de8b[_0x4858a6(0x1e5)]({'coin':stablecoins[_0x4858a6(0x16f)][_0x4858a6(0x17f)],'symbol':stablecoins[_0x4858a6(0x16f)]['symbol']}),_0x13de8b[_0x4858a6(0x1e5)]({'coin':stablecoins[_0x4858a6(0x165)][_0x4858a6(0x17f)],'symbol':stablecoins[_0x4858a6(0x165)]['symbol']});let _0x56b6fd=[];for(const _0x5612fe of _0x13de8b){_0x56b6fd[_0x5612fe[_0x4858a6(0x17f)]]=await getCloses(_0x5612fe[_0x4858a6(0x11d)],new Date(_0x371759[_0x4858a6(0x1c2)]));}dbPerformance[_0x4858a6(0x119)](_0x4858a6(0x14a))[_0x4858a6(0x193)]()['write'](),_0x4f83bb[_0x4858a6(0x1e1)]((_0x53d23e,_0x3d95e8)=>{const _0x37a786=_0x4858a6;let _0x453efd,_0x3573ea=[];_0x3d95e8==0x0?(_0x371759[_0x37a786(0x1bc)][_0x37a786(0x1e1)](_0x448710=>{const _0x1719b9=_0x37a786;!_0x448710[_0x1719b9(0x1d8)]&&_0x3573ea['push']({'coin':_0x448710['coin'],'number':_0x448710[_0x1719b9(0x1bd)],'price':_0x448710[_0x1719b9(0x1ee)]});}),_0x453efd={'date':_0x53d23e,'eur':_0x56b6fd[stablecoins[_0x37a786(0x16f)][_0x37a786(0x17f)]][_0x3d95e8],'usd':_0x56b6fd[stablecoins[_0x37a786(0x165)]['coin']][_0x3d95e8],'coins':_0x3573ea}):(_0x371759[_0x37a786(0x1bc)]['forEach'](_0x28d01d=>{const _0x533a7e=_0x37a786;!_0x28d01d[_0x533a7e(0x1d8)]&&_0x3573ea[_0x533a7e(0x1e5)]({'coin':_0x28d01d[_0x533a7e(0x17f)],'number':_0x553e04[_0x28d01d[_0x533a7e(0x17f)]][_0x53d23e],'price':_0x28d01d[_0x533a7e(0x17f)]=='BTC'?0x1:_0x56b6fd[_0x28d01d[_0x533a7e(0x17f)]][_0x3d95e8]});}),_0x453efd={'date':_0x53d23e,'eur':_0x56b6fd[stablecoins[_0x37a786(0x16f)]['coin']][_0x3d95e8],'usd':_0x56b6fd[stablecoins[_0x37a786(0x165)][_0x37a786(0x17f)]][_0x3d95e8],'coins':_0x3573ea}),dbPerformance[_0x37a786(0x119)](_0x37a786(0x14a))[_0x37a786(0x1e5)](_0x453efd)[_0x37a786(0x17d)]();}),emitPerformance(),await resetCoinResults();for(let _0x518600 of _0x52c731){_0x518600[_0x4858a6(0x17f)]!='BTC'&&await updateCoinResults(_0x518600);}logHistory(_0x4858a6(0x16e),_0x4858a6(0x15a));}catch(_0x2aaccf){await handleError(_0x2aaccf,_0x4858a6(0x1ed));}}async function getCloses(_0x312943,_0x2f4145,_0xa88544=undefined){const _0x31b32d=_0x4a5832,_0x199207='1d';let _0xce5f24,_0x338af7;const _0x239764=fns['differenceInCalendarDays'](new Date(),_0x2f4145)+0x1;try{const _0x45517b=exchange[_0x31b32d(0x10b)]()-_0x239764*0x18*0xe10*0x3e8;_0xce5f24=await exchange[_0x31b32d(0x1da)](_0x312943,_0x199207,_0x45517b,_0xa88544),_0x338af7=await exchange[_0x31b32d(0x1b4)](_0x312943);}catch(_0x4eb3d7){await handleError(_0x4eb3d7,_0x31b32d(0x12a));}let _0x7ed6bd=ohlcvToCloses(_0xce5f24);return _0x7ed6bd[_0x31b32d(0x1e5)](_0x338af7[_0x312943][_0x31b32d(0x1cc)]),_0x7ed6bd;}function ohlcvToCloses(_0x3e5d2a){let _0x5bc4a7=[];return _0x3e5d2a['forEach'](function(_0x5c9079){const _0x5bd762=_0x47e8;_0x5bc4a7[_0x5bd762(0x1e5)](_0x5c9079[0x4]);}),_0x5bc4a7;}function getConfiguration(_0x588348){const _0x43e359=_0x4a5832;let _0x2add5c=dbConfig[_0x43e359(0x119)]('bot')['find']({'botID':_0x588348})[_0x43e359(0x154)]();if(_0x2add5c){let _0x525097=![];!_0x2add5c[_0x43e359(0x201)]&&(_0x2add5c={..._0x2add5c,'exchange':_0x43e359(0x145)},_0x525097=!![]),!_0x2add5c['ordertype']&&(_0x2add5c={..._0x2add5c,'ordertype':_0x43e359(0x15c)},_0x525097=!![]),!_0x2add5c['timeout']&&(_0x2add5c={..._0x2add5c,'timeout':0x14},_0x525097=!![]),_0x525097&&(_0x2add5c={'botID':_0x2add5c[_0x43e359(0x152)],'exchange':_0x2add5c[_0x43e359(0x201)],'apiKey':_0x2add5c[_0x43e359(0x190)],'apiSecret':_0x2add5c[_0x43e359(0x11c)],'botname':_0x2add5c[_0x43e359(0x133)],'threshold':_0x2add5c[_0x43e359(0x161)],'ordertype':_0x2add5c[_0x43e359(0x203)],'timeout':_0x2add5c[_0x43e359(0x14e)],'startdate':_0x2add5c[_0x43e359(0x1c2)],'recreate':_0x2add5c[_0x43e359(0x10a)],'timeshift':_0x2add5c[_0x43e359(0x1ea)],'headless':_0x2add5c[_0x43e359(0x14f)],'cooldown':_0x2add5c[_0x43e359(0x1e3)],'portfolio':_0x2add5c[_0x43e359(0x1bc)]},dbConfig[_0x43e359(0x119)](_0x43e359(0x1ef))['remove']()['write'](),dbConfig[_0x43e359(0x119)](_0x43e359(0x1ef))[_0x43e359(0x1e5)](_0x2add5c)[_0x43e359(0x17d)]());}else _0x2add5c={'botID':_0x588348,'exchange':'binance','apiKey':'','apiSecret':'','botname':_0x43e359(0x1c3)+_0x588348,'threshold':'3','ordertype':_0x43e359(0x15c),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x43e359(0x1ea)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x2add5c;}function emittedConfiguration(){const _0x485dab=_0x4a5832;let _0x555ec4;return config[_0x485dab(0x190)]==''?_0x555ec4=config:_0x555ec4={...config,'apiKey':_0x485dab(0x1a8),'apiSecret':_0x485dab(0x1a8)},_0x555ec4;}function getSettings(){const _0x566bfb=_0x4a5832;return dbSettings['get'](_0x566bfb(0x1a6))['value']();}function getSecure(){const _0x4a7c60=_0x4a5832;return dbSecure[_0x4a7c60(0x119)](_0x4a7c60(0x10f))[_0x4a7c60(0x154)]()||{};}function updateTimeshift(_0x1ba1ca){const _0x3bb223=_0x4a5832;let _0x4eca80=dbConfig[_0x3bb223(0x119)](_0x3bb223(0x1ef))['find']({'botID':botID})[_0x3bb223(0x154)]();_0x4eca80&&dbConfig[_0x3bb223(0x119)](_0x3bb223(0x1ef))[_0x3bb223(0x189)]({'botID':botID})[_0x3bb223(0x1f8)]({'timeshift':_0x1ba1ca})['write'](),config[_0x3bb223(0x1ea)]=_0x1ba1ca,proxyEmit(_0x3bb223(0x116),emittedConfiguration());}async function storeConfiguration(_0xa2bf21){const _0x5c3a11=_0x4a5832;let _0xddf786=dbConfig[_0x5c3a11(0x119)](_0x5c3a11(0x1ef))[_0x5c3a11(0x189)]({'botID':botID})[_0x5c3a11(0x154)]();_0xa2bf21={..._0xa2bf21,'apiKey':crypt['decrypt'](secure['privateKey'],_0xa2bf21[_0x5c3a11(0x190)])['message'],'apiSecret':crypt['decrypt'](secure[_0x5c3a11(0x12b)],_0xa2bf21[_0x5c3a11(0x11c)])['message']};if(_0xddf786){if(_0xa2bf21[_0x5c3a11(0x190)]==_0x5c3a11(0x1a8))_0xa2bf21[_0x5c3a11(0x190)]=config[_0x5c3a11(0x190)];if(_0xa2bf21[_0x5c3a11(0x11c)]=='************')_0xa2bf21[_0x5c3a11(0x11c)]=config['apiSecret'];dbConfig[_0x5c3a11(0x119)](_0x5c3a11(0x1ef))[_0x5c3a11(0x189)]({'botID':botID})[_0x5c3a11(0x1f8)](_0xa2bf21)[_0x5c3a11(0x17d)]();}else dbConfig['get'](_0x5c3a11(0x1ef))['push'](_0xa2bf21)[_0x5c3a11(0x17d)](),process[_0x5c3a11(0x1f5)]({'status':_0x5c3a11(0x113),'live':_0x5c3a11(0x139)});config={..._0xa2bf21};if(config[_0x5c3a11(0x10a)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x5c3a11(0x1f5)]({'botname':_0xa2bf21[_0x5c3a11(0x133)]}),proxyEmit(_0x5c3a11(0x163)),reset();}async function storeHeadless(_0x64ca07){const _0x27b06c=_0x4a5832,_0x4c4919={...config,'headless':_0x64ca07[_0x27b06c(0x14f)]};let _0x167ec3=dbConfig['get'](_0x27b06c(0x1ef))['find']({'botID':botID})[_0x27b06c(0x154)]();_0x167ec3&&dbConfig[_0x27b06c(0x119)]('bot')[_0x27b06c(0x189)]({'botID':botID})[_0x27b06c(0x1f8)](_0x4c4919)[_0x27b06c(0x17d)](),config={..._0x4c4919},proxyEmit(_0x27b06c(0x116),emittedConfiguration());}function noslash(_0x1baa05){return _0x1baa05['replace']('/','');}function updateNumberCoins(_0x3770a4){const _0x26332a=_0x4a5832;_0x3770a4[_0x26332a(0x12f)]&&_0x3770a4[_0x26332a(0x12f)]=='outboundAccountPosition'&&_0x3770a4[_0x26332a(0x1e8)][_0x26332a(0x1e1)](_0x4860f8=>{const _0x4ebeb4=_0x26332a;let _0x300aea=currentCoins['find'](_0x50697b=>_0x50697b[_0x4ebeb4(0x17f)]==_0x4860f8['asset']);if(_0x300aea)_0x300aea[_0x4ebeb4(0x1bb)]=Number(_0x4860f8[_0x4ebeb4(0x1f2)]);}),_0x3770a4[_0x26332a(0x12f)]&&_0x3770a4[_0x26332a(0x12f)]==_0x26332a(0x1dc)&&(_0x3770a4[_0x26332a(0x192)]=='LIMIT'&&_0x3770a4[_0x26332a(0x1a7)]==_0x26332a(0x13c)&&lastOrders[_0x26332a(0x1e1)](_0x2bad3c=>{const _0x57a7d4=_0x26332a;if(_0x2bad3c[_0x57a7d4(0x173)]==_0x3770a4[_0x57a7d4(0x173)]){if(_0x2bad3c['reverse'])_0x2bad3c[_0x57a7d4(0x146)]=_0x3770a4[_0x57a7d4(0x10c)]*_0x2bad3c['price'];else _0x2bad3c[_0x57a7d4(0x146)]=_0x3770a4[_0x57a7d4(0x10c)];}}));}async function getCoins(_0x559f3d=!![]){const _0x4f44ed=_0x4a5832;let _0x295685,_0x17e522=[],_0x54477e=[],_0x42a9f5=[];try{_0x295685=await exchange[_0x4f44ed(0x11b)](),mybalances=_0x295685[_0x4f44ed(0x13d)];if(!_0x559f3d)for(const [_0xd51378,_0x11939c]of Object['entries'](mybalances)){_0x42a9f5['push'](_0xd51378);}else config['portfolio']['forEach'](_0x48d1c2=>{const _0x93b161=_0x4f44ed;if(!_0x48d1c2[_0x93b161(0x1d8)])_0x42a9f5[_0x93b161(0x1e5)](_0x48d1c2[_0x93b161(0x17f)]);});for(const [_0x5c1f3a,_0x2eda8c]of Object['entries'](mybalances)){if(_0x42a9f5[_0x4f44ed(0x1a3)](_0x5c1f3a)){if((_0x2eda8c['toString']()!=0x0||config[_0x4f44ed(0x1bc)][_0x4f44ed(0x189)](_0x8bdd2d=>_0x8bdd2d['coin']==_0x5c1f3a))&&(allSymbols['includes'](_0x5c1f3a+'/BTC')||_0x5c1f3a=='BTC'))_0x54477e[_0x4f44ed(0x1e5)]({'coin':_0x5c1f3a,'symbol':_0x5c1f3a+'/BTC','reverse':![],'number':_0x2eda8c}),_0x5c1f3a!=_0x4f44ed(0x206)&&_0x17e522['push'](_0x5c1f3a+_0x4f44ed(0x1d5));else(_0x2eda8c[_0x4f44ed(0x1b0)]()!=0x0||config[_0x4f44ed(0x1bc)][_0x4f44ed(0x189)](_0x5c7faf=>_0x5c7faf['coin']==_0x5c1f3a))&&allSymbols[_0x4f44ed(0x1a3)](_0x4f44ed(0x143)+_0x5c1f3a)&&(_0x54477e[_0x4f44ed(0x1e5)]({'coin':_0x5c1f3a,'symbol':_0x4f44ed(0x143)+_0x5c1f3a,'reverse':!![],'number':_0x2eda8c}),_0x5c1f3a!='BTC'&&_0x17e522[_0x4f44ed(0x1e5)](_0x4f44ed(0x143)+_0x5c1f3a));}}}catch(_0x352b48){if(!_0x559f3d){if(_0x352b48['toString']()[_0x4f44ed(0x1a3)](_0x4f44ed(0x149)))return logHistory(_0x4f44ed(0x204),_0x4f44ed(0x17c)),![];else{if(_0x352b48[_0x4f44ed(0x1b0)]()['includes'](_0x4f44ed(0x1fb)))return logHistory('error',_0x4f44ed(0x1d4)),![];else{if(_0x352b48[_0x4f44ed(0x1b0)]()[_0x4f44ed(0x1a3)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',_0x4f44ed(0x16d)),![];else await handleError(_0x352b48,_0x4f44ed(0x1cf));}}}else await handleError(_0x352b48,_0x4f44ed(0x1cf));}return _0x54477e;}async function getPortfolio(_0x49bba9){const _0xe51ca0=_0x4a5832;let _0x576fd1=[],_0x552459=[],_0x6e527d,_0x192bb4=[],_0x561c22,_0x5f4384;_0x49bba9[_0xe51ca0(0x190)]===_0xe51ca0(0x1a8)||_0x49bba9[_0xe51ca0(0x11c)]===_0xe51ca0(0x1a8)?(_0x561c22=config[_0xe51ca0(0x190)],_0x5f4384=config[_0xe51ca0(0x11c)]):(_0x561c22=_0x49bba9['apiKey'],_0x5f4384=_0x49bba9[_0xe51ca0(0x11c)]);await initExchange(_0x561c22,_0x5f4384);let _0xaeabd=await loadSymbols();if(_0xaeabd){_0x192bb4=await getCoins(![]);if(_0x192bb4===![])proxyEmit(_0xe51ca0(0x1bc),![]);else{_0x192bb4[_0xe51ca0(0x1e1)](_0x1fa232=>{const _0x1cac38=_0xe51ca0;_0x576fd1['push'](_0x1fa232[_0x1cac38(0x11d)]);});try{_0x552459=await exchange['fetchTickers'](_0x576fd1);}catch(_0x1d37ce){await handleError(_0x1d37ce,_0xe51ca0(0x19a));}_0x192bb4['forEach'](_0x3fe672=>{const _0x41f9db=_0xe51ca0;_0x3fe672['coin']!=_0x41f9db(0x206)?_0x6e527d=_0x3fe672[_0x41f9db(0x1c9)]?0x1/_0x552459[_0x3fe672['symbol']][_0x41f9db(0x1cc)]:_0x552459[_0x3fe672[_0x41f9db(0x11d)]][_0x41f9db(0x1cc)]:_0x6e527d=0x1,_0x3fe672[_0x41f9db(0x207)]=formatResult(_0x6e527d,0x8);}),proxyEmit(_0xe51ca0(0x1bc),_0x192bb4);}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x37554c){const _0x5db8db=_0x4a5832;let _0x268c92=!![];const _0xe2ff25=!_0x37554c[_0x5db8db(0x1c9)]?markets[_0x37554c[_0x5db8db(0x11d)]][_0x5db8db(0x1a4)][_0x5db8db(0x1ff)][_0x5db8db(0x12e)]:markets[_0x37554c[_0x5db8db(0x11d)]][_0x5db8db(0x1a4)]['cost'][_0x5db8db(0x12e)],_0x1e6a4b=!_0x37554c[_0x5db8db(0x1c9)]?markets[_0x37554c[_0x5db8db(0x11d)]]['limits'][_0x5db8db(0x126)][_0x5db8db(0x12e)]:markets[_0x37554c[_0x5db8db(0x11d)]]['limits'][_0x5db8db(0x1ff)][_0x5db8db(0x12e)];if(Math[_0x5db8db(0x182)](_0x37554c['trade'])<_0xe2ff25)_0x268c92=![];if(Math[_0x5db8db(0x182)](_0x37554c['trade'])*_0x37554c[_0x5db8db(0x1cc)]<_0x1e6a4b)_0x268c92=![];return _0x268c92;}async function getBalances(){const _0x536a09=_0x4a5832;let _0x196113=0x0,_0x5b637b;const _0xe16348=config['threshold'];currentCoins[_0x536a09(0x1e1)](_0x3af099=>{const _0x3ecb0a=_0x536a09;if(_0x3af099['coin']!=_0x3ecb0a(0x206)){let _0x1c14d9=global['ticker'][noslash(_0x3af099[_0x3ecb0a(0x11d)])];_0x5b637b=_0x3af099[_0x3ecb0a(0x1c9)]?0x1/_0x1c14d9:_0x1c14d9;}else _0x5b637b=0x1;let _0x4c570e=_0x3af099[_0x3ecb0a(0x1bb)]*_0x5b637b;_0x196113+=_0x4c570e,_0x3af099['last']=formatResult(Number(_0x5b637b),0x8),_0x3af099[_0x3ecb0a(0x154)]=_0x4c570e;}),currentCoins[_0x536a09(0x1e1)](_0x464160=>{const _0x376de9=_0x536a09;let _0x1718d7=config[_0x376de9(0x1bc)][_0x376de9(0x189)](_0x476c99=>_0x476c99[_0x376de9(0x17f)]==_0x464160[_0x376de9(0x17f)]),_0x523e54=Number(_0x1718d7[_0x376de9(0x1b3)]),_0x4ca4ba=_0x464160[_0x376de9(0x154)]/_0x196113*0x64,_0x5ad0c1=_0x523e54*_0x196113/0x64/_0x464160[_0x376de9(0x1cc)]-_0x464160[_0x376de9(0x1bb)];_0x464160[_0x376de9(0x1b3)]=formatResult(_0x4ca4ba,0x3),_0x464160[_0x376de9(0x1e4)]=formatResult(_0x523e54,0x3),_0x464160[_0x376de9(0x1b8)]=formatResult(_0x5ad0c1,0x8),_0x464160['side']='',_0x464160['valid']='';if(_0x464160['coin']!='BTC'){if(_0x464160[_0x376de9(0x1b3)]>_0x523e54)_0x464160[_0x376de9(0x140)]=_0x376de9(0x164),_0x464160['valid']=checkMinimums(_0x464160);else _0x464160[_0x376de9(0x1b3)]<_0x523e54&&(_0x464160[_0x376de9(0x140)]=_0x376de9(0x1ca),_0x464160['valid']=checkMinimums(_0x464160));}_0x464160[_0x376de9(0x124)]=_0x464160[_0x376de9(0x1b3)]/_0x464160[_0x376de9(0x1e4)]-0x1;}),currentCoins[_0x536a09(0x13a)]((_0x20528e,_0x2d5a45)=>_0x20528e['delta']<_0x2d5a45[_0x536a09(0x124)]?0x1:_0x2d5a45[_0x536a09(0x124)]<_0x20528e[_0x536a09(0x124)]?-0x1:0x0);const _0x385340=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x385340[_0x536a09(0x16f)],'usd':_0x385340[_0x536a09(0x165)],'portfolio':JSON[_0x536a09(0x150)](currentCoins),'threshold':_0xe16348},proxyEmit(_0x536a09(0x1e8),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x536a09(0x14f)])headlessMode({'portfolio':currentCoins,'threshold':_0xe16348});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x43f1c5=_0x4a5832;if(!lastBalances)return;let _0x4f1aa7=await getStartingBalances(![]),_0x3cfcb2=[],_0x2b80ae=[],_0x113190;JSON[_0x43f1c5(0x1eb)](lastBalances[_0x43f1c5(0x1bc)])['forEach'](_0x382e6d=>{const _0x1416c2=_0x43f1c5;let _0x280cfc={'coin':_0x382e6d[_0x1416c2(0x17f)],'number':_0x382e6d[_0x1416c2(0x1bb)],'price':_0x382e6d[_0x1416c2(0x1cc)]};_0x3cfcb2[_0x1416c2(0x1e5)](_0x280cfc);if(!_0x4f1aa7[_0x1416c2(0x1f0)]||!_0x4f1aa7['coins']['find'](_0x3a6fb4=>_0x3a6fb4[_0x1416c2(0x17f)]==_0x382e6d['coin']&&_0x3a6fb4[_0x1416c2(0x1bb)]!=0x0))_0x2b80ae[_0x1416c2(0x1e5)](_0x280cfc);});const _0x4f04e5=await getFiat();_0x113190={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x4f04e5[_0x43f1c5(0x16f)],'usd':_0x4f04e5[_0x43f1c5(0x165)],'coins':_0x3cfcb2};let _0x378713=dbPerformance[_0x43f1c5(0x119)](_0x43f1c5(0x14a))['find']({'date':_0x113190[_0x43f1c5(0x1f6)]})[_0x43f1c5(0x154)]();_0x378713?dbPerformance[_0x43f1c5(0x119)](_0x43f1c5(0x14a))[_0x43f1c5(0x189)]({'date':_0x113190[_0x43f1c5(0x1f6)]})['assign'](_0x113190)[_0x43f1c5(0x17d)]():dbPerformance[_0x43f1c5(0x119)](_0x43f1c5(0x14a))[_0x43f1c5(0x1e5)](_0x113190)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x40cc0f=_0x4a5832;if(dbPerformance[_0x40cc0f(0x1fc)](_0x40cc0f(0x14a))['value']()){let _0x54031a=dbPerformance[_0x40cc0f(0x119)]('data')[_0x40cc0f(0x197)]('date')['value']();proxyEmit('performance',_0x54031a),lastPerformanceEmitted=getDate();}else proxyEmit(_0x40cc0f(0x117),[]);}async function getStartingBalances(_0x44077b=!![]){const _0xeccc7=_0x4a5832;let _0x48c4d2=dbPerformance[_0xeccc7(0x119)]('data')[_0xeccc7(0x189)]({'date':config[_0xeccc7(0x1c2)]})[_0xeccc7(0x154)]();config[_0xeccc7(0x190)]!=''&&!_0x48c4d2&&(await setStartDatePerformance(config),_0x48c4d2=dbPerformance['get'](_0xeccc7(0x14a))[_0xeccc7(0x189)]({'date':config[_0xeccc7(0x1c2)]})[_0xeccc7(0x154)]());if(config[_0xeccc7(0x190)]==''||!_0x48c4d2)return{};let _0x4d18e5=0x0,_0x5d6a52=0x0,_0x8708aa=0x0,_0x173d45=[],_0x1e8842=0x0;config[_0xeccc7(0x1bc)][_0xeccc7(0x1e1)](_0x42bd77=>{const _0x4d90ab=_0xeccc7;!_0x42bd77[_0x4d90ab(0x1d8)]&&(_0x173d45[_0x1e8842]={'coin':_0x42bd77[_0x4d90ab(0x17f)],'symbol':_0x42bd77['symbol'],'number':_0x42bd77[_0x4d90ab(0x1bd)],'price':_0x42bd77[_0x4d90ab(0x1ee)]},_0x4d18e5+=_0x42bd77[_0x4d90ab(0x1ee)]*_0x42bd77[_0x4d90ab(0x1bd)],_0x5d6a52+=_0x42bd77[_0x4d90ab(0x1ee)]*_0x42bd77['startnumber']*_0x48c4d2['eur'],_0x8708aa+=_0x42bd77[_0x4d90ab(0x1ee)]*_0x42bd77[_0x4d90ab(0x1bd)]*_0x48c4d2[_0x4d90ab(0x165)],_0x1e8842++);});let _0x416c9f={'btc':_0x4d18e5,'eur':_0x5d6a52,'usd':_0x8708aa,'coins':_0x173d45};if(_0x44077b)proxyEmit(_0xeccc7(0x12d),_0x416c9f);return _0x416c9f;}function headlessMode(_0x3882f7){const _0x1b8873=_0x4a5832;let _0x1d273c=_0x3882f7[_0x1b8873(0x1bc)],_0x1805fb=_0x3882f7[_0x1b8873(0x161)],_0x2a5806=[];for(let _0x11e758 of _0x1d273c){if(_0x11e758[_0x1b8873(0x17f)]!=_0x1b8873(0x206)){if(_0x11e758[_0x1b8873(0x1b3)]/_0x11e758[_0x1b8873(0x1e4)]-0x1>=_0x1805fb/0x64){if(_0x11e758[_0x1b8873(0x1fa)])_0x2a5806['push'](_0x11e758);}else{if(_0x11e758[_0x1b8873(0x1b3)]/_0x11e758[_0x1b8873(0x1e4)]-0x1<=-_0x1805fb/0x64){if(_0x11e758['valid'])_0x2a5806[_0x1b8873(0x1e5)](_0x11e758);}}}}_0x2a5806['length']>0x0&&placeOrder(_0x2a5806);}function symbolToCoin(_0x55bce6){const _0x296f43=_0x4a5832;let _0x45905f;if(_0x55bce6[_0x296f43(0x1a3)](_0x296f43(0x1d5)))_0x45905f=_0x55bce6['replace'](_0x296f43(0x1d5),'');if(_0x55bce6['includes']('BTC/'))_0x45905f=_0x55bce6['replace'](_0x296f43(0x143),'');return _0x45905f;}async function validateOrders(_0x36a22e=0x0){const _0x355b0a=_0x4a5832;let _0x6bcf12=[],_0x26fb07=config[_0x355b0a(0x203)]==_0x355b0a(0x15c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x355b0a(0x14e)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x355b0a(0x1e1)](_0x443d11=>{const _0x40df20=_0x355b0a;let _0x158eb6=previousCoins[_0x40df20(0x189)](_0x1da7d4=>_0x1da7d4[_0x40df20(0x17f)]==symbolToCoin(_0x443d11[_0x40df20(0x11d)])),_0x56cfa8=currentCoins['find'](_0x51ba86=>_0x51ba86[_0x40df20(0x17f)]==symbolToCoin(_0x443d11[_0x40df20(0x11d)])),_0x1018ab,_0x135b69;_0x443d11[_0x40df20(0x140)]==_0x40df20(0x1ca)&&!_0x443d11[_0x40df20(0x1c9)]||_0x443d11['side']==_0x40df20(0x164)&&_0x443d11[_0x40df20(0x1c9)]?(_0x1018ab=_0x158eb6[_0x40df20(0x1bb)]+0.9*_0x443d11[_0x40df20(0x146)],_0x135b69=_0x158eb6[_0x40df20(0x1bb)]+1.1*_0x443d11[_0x40df20(0x146)]):(_0x1018ab=_0x158eb6['number']-1.1*_0x443d11['filled'],_0x135b69=_0x158eb6[_0x40df20(0x1bb)]-0.9*_0x443d11[_0x40df20(0x146)]);const _0x4b4cd3=_0x443d11[_0x40df20(0x146)]!=0x0&&_0x56cfa8[_0x40df20(0x1bb)]>=_0x1018ab&&_0x56cfa8['number']<=_0x135b69;_0x6bcf12[_0x40df20(0x1e5)](_0x4b4cd3);if(_0x4b4cd3&&config[_0x40df20(0x203)]!=_0x40df20(0x15c)){if(_0x443d11[_0x40df20(0x1c9)])logHistory(_0x40df20(0x16e),_0x40df20(0x18c)+_0x443d11[_0x40df20(0x11d)]+'\x20'+_0x443d11[_0x40df20(0x140)]+'\x20#'+formatResult(_0x443d11[_0x40df20(0x146)]/_0x443d11[_0x40df20(0x207)],0x8)+'\x20@'+formatResult(_0x443d11[_0x40df20(0x207)],0x8));else logHistory('success','Order\x20filled:\x20'+_0x443d11[_0x40df20(0x11d)]+'\x20'+_0x443d11[_0x40df20(0x140)]+'\x20#'+formatResult(_0x443d11[_0x40df20(0x146)],0x8)+'\x20@'+formatResult(_0x443d11[_0x40df20(0x207)],0x8));}}),_0x6bcf12[_0x355b0a(0x1e1)]((_0xfc5eae,_0xd3da4f)=>{if(_0xfc5eae)lastOrders['splice'](_0xd3da4f,0x1);});if(_0x36a22e<_0x26fb07&&_0x6bcf12['includes'](![])){if(_0x36a22e==0x0){config[_0x355b0a(0x203)]==_0x355b0a(0x15c)?logHistory(_0x355b0a(0x204),_0x355b0a(0x121)):logHistory(_0x355b0a(0x204),_0x355b0a(0x179));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x36a22e);},0xa*0x3e8);}else{(_0x36a22e==0x1||_0x36a22e==Math[_0x355b0a(0x157)](_0x26fb07/0x2)||_0x36a22e==_0x26fb07-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x36a22e);},validateOrderInterval);}}else{lockOrders=![];if(_0x36a22e>0x0&&!_0x6bcf12[_0x355b0a(0x1a3)](![]))config[_0x355b0a(0x203)]==_0x355b0a(0x15c)?logHistory('success',_0x355b0a(0x1d1)):logHistory(_0x355b0a(0x16e),_0x355b0a(0x17e));else _0x36a22e>0x0&&_0x6bcf12[_0x355b0a(0x1a3)](![])&&(config['ordertype']==_0x355b0a(0x15c)?logHistory(_0x355b0a(0x16e),_0x355b0a(0x169)+Math[_0x355b0a(0x157)](_0x26fb07*validateOrderInterval/0xea60)+_0x355b0a(0x136)):(lastOrders['forEach'](async _0x39765e=>{const _0x462ce8=_0x355b0a;try{const _0x332287=await exchange['cancelOrder'](_0x39765e['orderId'],_0x39765e[_0x462ce8(0x11d)]);}catch(_0x4c40b6){if(_0x4c40b6[_0x462ce8(0x1b0)]()[_0x462ce8(0x1a3)]('OrderNotFound')){}else await handleError(_0x4c40b6,'cancelOrder()');}}),logHistory(_0x355b0a(0x16e),_0x355b0a(0x137)+Math[_0x355b0a(0x157)](_0x26fb07*validateOrderInterval/0xea60)+_0x355b0a(0x16b))));}}async function resetCoinResults(){const _0x463d18=_0x4a5832;dbCoinResults[_0x463d18(0x119)](_0x463d18(0x1f0))['remove']()[_0x463d18(0x17d)]();let _0x13cb02=await getStartingBalances(![]);_0x13cb02[_0x463d18(0x1f0)][_0x463d18(0x1e1)](_0x328b96=>{const _0x1b93b2=_0x463d18,_0x2289fb=_0x328b96[_0x1b93b2(0x11d)]['includes'](_0x1b93b2(0x143));if(_0x328b96[_0x1b93b2(0x17f)]!=_0x1b93b2(0x206)){let _0x566b73={'coin':_0x328b96[_0x1b93b2(0x17f)],'number':_0x328b96[_0x1b93b2(0x1bb)],'breakeven':_0x328b96[_0x1b93b2(0x207)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1b93b2(0x119)](_0x1b93b2(0x1f0))['push'](_0x566b73)[_0x1b93b2(0x17d)]();}});}async function updateCoinResults(_0x513fe0){const _0x57ae11=_0x4a5832;let _0x5549c6,_0x5d93c8,_0x2122e2,_0x5b4450,_0xad7447,_0xcf59f5,_0x1b0898=dbCoinResults['get'](_0x57ae11(0x1f0))['find']({'coin':_0x513fe0[_0x57ae11(0x17f)]})[_0x57ae11(0x154)]();if(!_0x1b0898)return;if(_0x513fe0[_0x57ae11(0x20a)]&&_0x513fe0[_0x57ae11(0x20a)]['currency']==_0x57ae11(0x206))_0x5549c6=_0x513fe0[_0x57ae11(0x20a)][_0x57ae11(0x126)];else{if(_0x513fe0[_0x57ae11(0x20a)]&&_0x513fe0[_0x57ae11(0x20a)][_0x57ae11(0x1ad)]=='BNB')_0x5549c6=_0x513fe0[_0x57ae11(0x20a)][_0x57ae11(0x126)]*global[_0x57ae11(0x1a0)][_0x57ae11(0x148)];else _0x5549c6=0.001*_0x513fe0[_0x57ae11(0x146)];}const _0x2f3cc9=_0x513fe0[_0x57ae11(0x11d)][_0x57ae11(0x1a3)](_0x57ae11(0x143));_0x2f3cc9&&(_0xcf59f5={'coin':_0x513fe0['coin'],'symbol':_0x513fe0[_0x57ae11(0x11d)],'filled':_0x513fe0[_0x57ae11(0x146)]*_0x513fe0['price'],'side':_0x513fe0[_0x57ae11(0x140)]==_0x57ae11(0x164)?_0x57ae11(0x1ca):'sell','price':0x1/_0x513fe0['price']},_0x513fe0={..._0xcf59f5});_0x513fe0['side']==_0x57ae11(0x1ca)?_0x2122e2=(_0x1b0898[_0x57ae11(0x13b)]*_0x1b0898[_0x57ae11(0x1bb)]+_0x513fe0['price']*_0x513fe0['filled'])/(_0x1b0898[_0x57ae11(0x1bb)]+_0x513fe0['filled']):_0x2122e2=(_0x1b0898[_0x57ae11(0x13b)]*_0x1b0898[_0x57ae11(0x1bb)]-_0x513fe0[_0x57ae11(0x207)]*_0x513fe0[_0x57ae11(0x146)])/(_0x1b0898[_0x57ae11(0x1bb)]-_0x513fe0[_0x57ae11(0x146)]);_0x513fe0[_0x57ae11(0x140)]==_0x57ae11(0x1ca)?_0x5b4450=_0x1b0898[_0x57ae11(0x141)]:_0x5b4450=_0x1b0898[_0x57ae11(0x141)]+(_0x513fe0[_0x57ae11(0x207)]-_0x1b0898['breakeven'])*_0x513fe0[_0x57ae11(0x146)];_0x5d93c8=_0x513fe0['side']==_0x57ae11(0x164)?_0x1b0898[_0x57ae11(0x1bb)]-_0x513fe0[_0x57ae11(0x146)]:_0x1b0898[_0x57ae11(0x1bb)]+_0x513fe0[_0x57ae11(0x146)],_0xad7447=(_0x513fe0[_0x57ae11(0x207)]-_0x2122e2)*_0x5d93c8;let _0xd2724c={'coin':_0x513fe0[_0x57ae11(0x17f)],'number':_0x5d93c8,'breakeven':formatResult(_0x2122e2,0x8),'realized':formatResult(_0x5b4450,0x8),'unrealized':formatResult(_0xad7447,0x8),'fees':formatResult(_0x1b0898['fees']+_0x5549c6,0x8),'sells':_0x513fe0[_0x57ae11(0x140)]==_0x57ae11(0x164)?_0x1b0898[_0x57ae11(0x19e)]+0x1:_0x1b0898[_0x57ae11(0x19e)],'buys':_0x513fe0[_0x57ae11(0x140)]==_0x57ae11(0x1ca)?_0x1b0898[_0x57ae11(0x138)]+0x1:_0x1b0898['buys']};dbCoinResults[_0x57ae11(0x119)](_0x57ae11(0x1f0))[_0x57ae11(0x189)]({'coin':_0x513fe0[_0x57ae11(0x17f)]})[_0x57ae11(0x1f8)](_0xd2724c)[_0x57ae11(0x17d)]();}async function placeOrder(_0x51a91b){const _0x310d99=_0x4a5832,_0x5ea49d=config[_0x310d99(0x203)]==_0x310d99(0x15c)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x43a45a of _0x51a91b){let _0x34441a,_0x14f019,_0x547874,_0x122fa2,_0x227c92,_0x43f45b=_0x43a45a[_0x310d99(0x11d)];try{const _0x4718af=await exchange[_0x310d99(0x1b4)](_0x43f45b),_0x5392ba=_0x4718af[_0x43f45b];_0x34441a=_0x5392ba['last'],_0x14f019=_0x5392ba[_0x310d99(0x15f)],_0x547874=_0x5392ba['ask'];_0x43a45a[_0x310d99(0x1c9)]?(_0x122fa2=_0x43a45a[_0x310d99(0x140)]==_0x310d99(0x1ca)?_0x310d99(0x164):_0x310d99(0x1ca),_0x227c92=Math[_0x310d99(0x182)](_0x43a45a[_0x310d99(0x1b8)])/_0x34441a):(_0x122fa2=_0x43a45a['side'],_0x227c92=Math[_0x310d99(0x182)](_0x43a45a[_0x310d99(0x1b8)]));_0x5ea49d==_0x310d99(0x1d9)&&(config[_0x310d99(0x203)]==_0x310d99(0x112)&&(_0x34441a=_0x122fa2==_0x310d99(0x1ca)?_0x14f019:_0x547874),config[_0x310d99(0x203)]==_0x310d99(0x1df)&&(_0x34441a=_0x122fa2=='buy'?_0x547874:_0x14f019));_0x227c92=formatResult(_0x227c92,0x8),_0x34441a=formatResult(_0x34441a,0x8);const _0x154c39=await exchange[_0x310d99(0x1aa)](_0x43f45b,_0x5ea49d,_0x122fa2,_0x227c92,_0x34441a);lastOrders['push']({'orderId':_0x154c39['id'],'symbol':_0x43f45b,'side':_0x122fa2,'reverse':_0x43a45a['reverse'],'amount':_0x43a45a[_0x310d99(0x1c9)]?_0x154c39['amount']*_0x154c39[_0x310d99(0x207)]:_0x154c39['amount'],'filled':_0x43a45a[_0x310d99(0x1c9)]?_0x154c39[_0x310d99(0x146)]*_0x154c39[_0x310d99(0x207)]:_0x154c39['filled'],'price':_0x154c39['price']});const _0xa399df=_0x5ea49d==_0x310d99(0x15c)?_0x310d99(0x181):config['ordertype']=='limit-high'?_0x310d99(0x1ce):_0x310d99(0x1c0);if(_0x5ea49d=='market')logHistory(_0x310d99(0x109),_0xa399df+_0x310d99(0x128)+_0x43f45b+'\x20'+_0x122fa2+'\x20#'+formatResult(_0x154c39[_0x310d99(0x146)],0x8)+'\x20@'+formatResult(_0x154c39[_0x310d99(0x207)],0x8));else logHistory(_0x310d99(0x109),_0xa399df+'\x20order:\x20'+_0x43f45b+'\x20'+_0x122fa2+'\x20#'+formatResult(_0x154c39[_0x310d99(0x1ff)],0x8)+'\x20@'+formatResult(_0x154c39[_0x310d99(0x207)],0x8));_0x154c39[_0x310d99(0x17f)]=_0x43a45a[_0x310d99(0x17f)],await updateCoinResults(_0x154c39);if(config[_0x310d99(0x1e3)]!=0x0){let _0x108c28=null;if(cooldownTracker['length']==config[_0x310d99(0x1e3)]-0x1)_0x108c28=cooldownTracker[_0x310d99(0x195)]();const _0x3a1c03=getTimeStamp();cooldownTracker[_0x310d99(0x1e5)](_0x3a1c03);if(_0x108c28){const _0x4c6e6e=fns[_0x310d99(0x1e9)](new Date(_0x3a1c03),new Date(_0x108c28));_0x4c6e6e<cooldownInterval&&(logHistory(_0x310d99(0x204),'Executed\x20'+config[_0x310d99(0x1e3)]+_0x310d99(0x194)+cooldownInterval/0x3c+_0x310d99(0x135)+cooldownPeriod/(0xe10*0x3e8)+_0x310d99(0x1c5)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x48399c){if(_0x48399c[_0x310d99(0x1b0)]()['includes'](_0x310d99(0x15d)))logHistory(_0x310d99(0x204),_0x310d99(0x12c)+_0x43f45b);else{if(_0x48399c[_0x310d99(0x1b0)]()['includes']('Invalid\x20quantity'))logHistory(_0x310d99(0x204),_0x310d99(0x176)+_0x43f45b);else await handleError(_0x48399c,_0x310d99(0x183));}}}if(lastOrders[_0x310d99(0x16c)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x310d99(0x14f)]&&(config['ordertype']==_0x310d99(0x15c)?logHistory(_0x310d99(0x204),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x310d99(0x204),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x310d99(0x14f)]&&logHistory(_0x310d99(0x204),_0x310d99(0x1d6)));}}function logHistory(_0x403e0a,_0x1ec5d7,_0x33e0c6=''){const _0x5b52a6=_0x4a5832;let _0x4ad710={'time':getTimeStamp(),'type':_0x403e0a,'event':_0x1ec5d7};dbLogs[_0x5b52a6(0x119)](_0x5b52a6(0x134))[_0x5b52a6(0x1e5)](_0x4ad710)[_0x5b52a6(0x17d)]();if(_0x33e0c6=='')_0x33e0c6=_0x1ec5d7;proxyEmit(_0x5b52a6(0x1d2),{'log':_0x4ad710,'summary':_0x33e0c6}),process[_0x5b52a6(0x1f5)]({'telegram':_0x4ad710}),logging(''+_0x4ad710[_0x5b52a6(0x1d2)]);}function emitHistory(_0xead978={}){const _0x1d281c=_0x4a5832;Object[_0x1d281c(0x1f3)](_0xead978)[_0x1d281c(0x16c)]==0x0&&(_0xead978={'type':[_0x1d281c(0x109),_0x1d281c(0x1d2)],'event':'','page':0x1});if(_0xead978[_0x1d281c(0x131)][_0x1d281c(0x1a3)](_0x1d281c(0x1d2)))_0xead978[_0x1d281c(0x131)][_0x1d281c(0x159)](_0xead978[_0x1d281c(0x131)][_0x1d281c(0x17b)](_0x1d281c(0x1d2)),0x1,_0x1d281c(0x204),'success');if(dbLogs['has'](_0x1d281c(0x134))[_0x1d281c(0x154)]()){let _0x4017b6=dbLogs['get'](_0x1d281c(0x134))[_0x1d281c(0x127)](_0x2dba4f=>{const _0x24a3eb=_0x1d281c;if(_0xead978[_0x24a3eb(0x131)]['length']==0x0)return![];else return _0xead978[_0x24a3eb(0x131)][_0x24a3eb(0x1a3)](_0x2dba4f['type']);})[_0x1d281c(0x127)](_0x1eb9b4=>{const _0x26f412=_0x1d281c;if(_0xead978[_0x26f412(0x1d2)]=='')return!![];else return _0x1eb9b4[_0x26f412(0x1d2)][_0x26f412(0x10d)]()['includes'](_0xead978[_0x26f412(0x1d2)]['toLowerCase']());})[_0x1d281c(0x197)](_0x1d281c(0x18f)),_0x264ea1=_0x4017b6[_0x1d281c(0x154)]()[_0x1d281c(0x16c)];_0x4017b6=_0x4017b6[_0x1d281c(0x1c9)]()[_0x1d281c(0x122)]((_0xead978[_0x1d281c(0x1c4)]-0x1)*logPageSize,_0xead978[_0x1d281c(0x1c4)]*logPageSize-0x1)[_0x1d281c(0x1c9)]()[_0x1d281c(0x154)](),proxyEmit('event-history',{'logs':_0x4017b6,'total':_0x264ea1});}else proxyEmit(_0x1d281c(0x174),{'logs':[],'total':0x0});}async function pauseBot(_0x54f7d2){const _0x310af6=_0x4a5832,_0x36a261=new Date()[_0x310af6(0x185)]();if(!lastBotPause)lastBotPause=new Date()['getTime']();else{if(_0x36a261-lastBotPause-pauseBotInterval<0x1388){consecutivePauses++;if(consecutivePauses>0x5)process[_0x310af6(0x158)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x310af6(0x185)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x54f7d2),botPaused=![],reset();}}async function handleError(_0x3178e5,_0x50302a,_0x506e4=''){const _0x28e08f=_0x4a5832;if(_0x3178e5['toString']()[_0x28e08f(0x1a3)](_0x28e08f(0x1c1)))logHistory('error',_0x50302a+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x3178e5[_0x28e08f(0x1b0)]()[_0x28e08f(0x1a3)]('ExchangeNotAvailable'))logHistory('error',_0x50302a+_0x28e08f(0x1c6)),await pauseBot(pauseBotInterval);else{if(_0x3178e5[_0x28e08f(0x1b0)]()[_0x28e08f(0x1a3)](_0x28e08f(0x1bf)))logHistory('error',_0x50302a+_0x28e08f(0x120)),await pauseBot(pauseBotInterval);else{if(_0x3178e5[_0x28e08f(0x1b0)]()['includes']('API-key\x20format\x20invalid'))logHistory('error',_0x50302a+_0x28e08f(0x1de)),logHistory(_0x28e08f(0x204),_0x28e08f(0x199)),process['exit'](0x4d);else{if(_0x3178e5[_0x28e08f(0x1b0)]()[_0x28e08f(0x1a3)](_0x28e08f(0x1fb)))logHistory(_0x28e08f(0x204),_0x50302a+_0x28e08f(0x11f)),logHistory(_0x28e08f(0x204),_0x28e08f(0x199)),process[_0x28e08f(0x158)](0x4d);else{if(_0x3178e5[_0x28e08f(0x1b0)]()[_0x28e08f(0x1a3)](_0x28e08f(0x1b9)))logHistory(_0x28e08f(0x204),_0x50302a+_0x28e08f(0x14b)),logHistory('error',_0x28e08f(0x199)),process[_0x28e08f(0x158)](0x4d);else{if(_0x3178e5['toString']()['includes'](_0x28e08f(0x1d3)))logHistory('error',_0x50302a+_0x28e08f(0x1f4)),logHistory(_0x28e08f(0x204),_0x28e08f(0x199)),process[_0x28e08f(0x158)](0x4d);else{if(_0x3178e5[_0x28e08f(0x1b0)]()['includes'](_0x28e08f(0x13e)))logHistory(_0x28e08f(0x204),_0x50302a+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x28e08f(0x204),_0x28e08f(0x199)),process[_0x28e08f(0x158)](0x4d);else _0x3178e5[_0x28e08f(0x1b0)]()[_0x28e08f(0x1a3)](_0x28e08f(0x114))?logHistory(_0x28e08f(0x204),_0x50302a+_0x28e08f(0x110)):(logHistory('error',_0x50302a+'\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0x50302a+_0x28e08f(0x1fd),_0x3178e5),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x1bc530,_0x5ef130){const _0x151572=_0x4a5832;return parseFloat(_0x1bc530[_0x151572(0x1a9)](_0x5ef130));}function logging(_0x58fe72,_0x282f4a=''){const _0x11d2b2=_0x4a5832;console[_0x11d2b2(0x186)](getTimeStamp()+_0x11d2b2(0x1e2)+botID+_0x11d2b2(0x177)+_0x58fe72,_0x282f4a);}function getServerTime(){const _0x508f00=_0x4a5832,_0x5a0349=new Date();return _0x5a0349[_0x508f00(0x11a)]()+'/'+(_0x5a0349[_0x508f00(0x1e0)]()+0x1)[_0x508f00(0x1b0)]()[_0x508f00(0x1b6)](0x2,'0')+'/'+_0x5a0349[_0x508f00(0x14c)]()[_0x508f00(0x1b0)]()['padStart'](0x2,'0')+'\x20'+_0x5a0349[_0x508f00(0x144)]()['toString']()[_0x508f00(0x1b6)](0x2,'0')+':'+_0x5a0349[_0x508f00(0x162)]()[_0x508f00(0x1b0)]()[_0x508f00(0x1b6)](0x2,'0')+':'+_0x5a0349['getSeconds']()[_0x508f00(0x1b0)]()[_0x508f00(0x1b6)](0x2,'0');}function getTimeStamp(){const _0x3301a3=_0x4a5832,_0x46a6f9=shiftedTime();return _0x46a6f9[_0x3301a3(0x11a)]()+'/'+(_0x46a6f9[_0x3301a3(0x1e0)]()+0x1)[_0x3301a3(0x1b0)]()[_0x3301a3(0x1b6)](0x2,'0')+'/'+_0x46a6f9['getDate']()[_0x3301a3(0x1b0)]()['padStart'](0x2,'0')+'\x20'+_0x46a6f9[_0x3301a3(0x144)]()['toString']()[_0x3301a3(0x1b6)](0x2,'0')+':'+_0x46a6f9[_0x3301a3(0x162)]()[_0x3301a3(0x1b0)]()[_0x3301a3(0x1b6)](0x2,'0')+':'+_0x46a6f9[_0x3301a3(0x1f7)]()['toString']()[_0x3301a3(0x1b6)](0x2,'0');}function getDate(){const _0x518e70=_0x4a5832,_0x39748b=shiftedTime();return _0x39748b[_0x518e70(0x11a)]()+'/'+(_0x39748b[_0x518e70(0x1e0)]()+0x1)[_0x518e70(0x1b0)]()[_0x518e70(0x1b6)](0x2,'0')+'/'+_0x39748b[_0x518e70(0x14c)]()['toString']()[_0x518e70(0x1b6)](0x2,'0');}function getHour(){const _0x36d0aa=_0x4a5832,_0x510772=shiftedTime();return _0x510772[_0x36d0aa(0x144)]()[_0x36d0aa(0x1b0)]()[_0x36d0aa(0x1b6)](0x2,'0');}function sleep(_0x327ff1){return new Promise(_0x274003=>setTimeout(_0x274003,_0x327ff1));}function shiftedTime(){const _0x38098f=_0x4a5832,_0x4b9498=new Date();let _0x3fbf13=_0x4b9498;if(config&&config['timeshift']!==0x0)_0x3fbf13=fns[_0x38098f(0x19b)](_0x4b9498,{'hours':config[_0x38098f(0x1ea)]});return _0x3fbf13;}