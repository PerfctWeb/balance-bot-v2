const _0x4bba6f=_0x28eb;(function(_0x27f5ed,_0x1fa400){const _0x43747a=_0x28eb,_0x1644a8=_0x27f5ed();while(!![]){try{const _0x90e76d=parseInt(_0x43747a(0x190))/0x1+parseInt(_0x43747a(0x109))/0x2+-parseInt(_0x43747a(0xa3))/0x3*(parseInt(_0x43747a(0x105))/0x4)+parseInt(_0x43747a(0x97))/0x5*(-parseInt(_0x43747a(0x96))/0x6)+parseInt(_0x43747a(0xb2))/0x7*(parseInt(_0x43747a(0x83))/0x8)+parseInt(_0x43747a(0x138))/0x9*(-parseInt(_0x43747a(0x14d))/0xa)+parseInt(_0x43747a(0xed))/0xb*(parseInt(_0x43747a(0x12b))/0xc);if(_0x90e76d===_0x1fa400)break;else _0x1644a8['push'](_0x1644a8['shift']());}catch(_0x487e65){_0x1644a8['push'](_0x1644a8['shift']());}}}(_0x1acf,0xca737));const _0x200923=function(){let _0x3e9999=!![];return function(_0x4cc652,_0x251bff){const _0x5523ac=_0x3e9999?function(){const _0x2927ab=_0x28eb;if(_0x251bff){const _0x121b41=_0x251bff[_0x2927ab(0x1a2)](_0x4cc652,arguments);return _0x251bff=null,_0x121b41;}}:function(){};return _0x3e9999=![],_0x5523ac;};}(),_0x485cce=_0x200923(this,function(){const _0xf727e0=_0x28eb;return _0x485cce['toString']()[_0xf727e0(0xb4)](_0xf727e0(0x157))[_0xf727e0(0xe9)]()[_0xf727e0(0x1a1)](_0x485cce)['search'](_0xf727e0(0x157));});_0x485cce();'use strict';const ccxt=require(_0x4bba6f(0x8a)),low=require(_0x4bba6f(0x17b)),FileSync=require(_0x4bba6f(0xcd)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require('binance'),Crypt=require('hybrid-crypto-js')[_0x4bba6f(0x77)];let exchange,wsClient;global[_0x4bba6f(0xd2)]={},global['change']={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x4bba6f(0x102),_0x4bba6f(0x16d),_0x4bba6f(0x112),_0x4bba6f(0x11b),_0x4bba6f(0x163),_0x4bba6f(0x15a)];let config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4bba6f(0x172))[_0x4bba6f(0x15b)],botID=process[_0x4bba6f(0x8c)][0x2]||'001',pattern=/^[0-9]{3}$/;function _0x28eb(_0x4e46dc,_0x19cd39){const _0x3dfe31=_0x1acf();return _0x28eb=function(_0x485cce,_0x200923){_0x485cce=_0x485cce-0x68;let _0x1acfc8=_0x3dfe31[_0x485cce];return _0x1acfc8;},_0x28eb(_0x4e46dc,_0x19cd39);}!pattern[_0x4bba6f(0x106)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x4bba6f(0x153)),process[_0x4bba6f(0x182)](0x1));const userID=process['argv'][0x3]||'',configpath=userID?_0x4bba6f(0x6f)+userID+'/':'./config/';!fs[_0x4bba6f(0xa7)](configpath)&&fs[_0x4bba6f(0x101)](configpath);const configfile=configpath+_0x4bba6f(0x118)+botID+_0x4bba6f(0x10a),logfile=configpath+'bot-'+botID+_0x4bba6f(0x141),performancefile=configpath+_0x4bba6f(0x118)+botID+_0x4bba6f(0x71),coinresultsfile=configpath+_0x4bba6f(0x118)+botID+'-results.json',settingsfile=configpath+_0x4bba6f(0x196),securefile=configpath+_0x4bba6f(0x148),configbackuppath=configpath+_0x4bba6f(0xf1),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4bba6f(0x155)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4bba6f(0x155)]({'data':[]})[_0x4bba6f(0x68)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4bba6f(0x155)]({'bot':[]})[_0x4bba6f(0x68)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4bba6f(0x155)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x463e5f)=>{},'debug':(..._0x3be113)=>{},'notice':(..._0x43c243)=>{},'info':(..._0x555f6f)=>{},'warning':(..._0x580fb3)=>{},'error':async function(..._0x56c04a){const _0x8e9aa4=_0x4bba6f,_0x260778=new Date()[_0x8e9aa4(0x75)]();if(!lastErrorShown||_0x260778-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x8e9aa4(0x75)]();let _0x5baa13='';if(_0x56c04a[0x0])_0x5baa13+=_0x56c04a[0x0];if(_0x56c04a[0x1]&&_0x56c04a[0x1][_0x8e9aa4(0x150)]&&_0x56c04a[0x1]['error'][_0x8e9aa4(0x91)])_0x5baa13+=_0x8e9aa4(0xf0)+_0x56c04a[0x1]['error'][_0x8e9aa4(0x91)];logging(_0x8e9aa4(0x7d)+consecutivePauses+_0x8e9aa4(0x104),''+_0x5baa13),await pauseBot(_0x8e9aa4(0xe1));}}},crypt=new Crypt({'md':_0x4bba6f(0x14c),'rsaStandard':_0x4bba6f(0x6a)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x4bba6f(0x180)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process[_0x4bba6f(0xbf)]({'started':_0x4bba6f(0x7b)},_0x300840=>{}),initializeProcessListeners();function proxyEmit(_0x554547,_0x188c21=null){const _0x56d14b=_0x4bba6f;process[_0x56d14b(0xbf)]({'function':_0x554547,'args':_0x188c21},_0x35609f=>{});}function initializeProcessListeners(){const _0x229abf=_0x4bba6f;process['on'](_0x229abf(0x91),_0x5386a5=>{const _0x512650=_0x229abf;switch(Object[_0x512650(0x176)](_0x5386a5)[0x0]){case _0x512650(0x180):_0x5386a5[_0x512650(0x180)]!=undefined&&(settings[_0x512650(0x180)]=_0x5386a5['timeshift'],updateTimeshift(settings[_0x512650(0x180)]));break;case _0x512650(0xda):switch(_0x5386a5[_0x512650(0xda)]){case'initclient':initclient();break;case _0x512650(0x81):toggleBotMode();break;case _0x512650(0x85):emitHistory(_0x5386a5[_0x512650(0x194)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x5386a5[_0x512650(0x194)]);break;case _0x512650(0xd3):getPortfolio(_0x5386a5[_0x512650(0x194)]);break;case _0x512650(0x169):storeConfiguration(_0x5386a5[_0x512650(0x194)]);break;case _0x512650(0x13f):storeHeadless(_0x5386a5[_0x512650(0x194)]);break;case _0x512650(0x8e):getStartingBalances(getNormalizedPerformance());break;case _0x512650(0x100):placeOrder(_0x5386a5['args']);break;case _0x512650(0x159):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x15aa11=_0x4bba6f;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x15aa11(0x136)],config[_0x15aa11(0x82)]);let _0x47138d=await loadSymbols();_0x47138d&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x5805f0,_0x326ccd){const _0x143d8c=_0x4bba6f,_0xbb284e=ccxt[config['exchange']];let _0x4c753a;switch(config[_0x143d8c(0xd9)]){case _0x143d8c(0x13a):_0x4c753a=_0x143d8c(0x158);break;case _0x143d8c(0x166):_0x4c753a=_0x143d8c(0xfa);break;default:_0x4c753a='wss://stream.binance.com:9443';}exchange=new _0xbb284e({'apiKey':_0x5805f0,'secret':_0x326ccd,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5805f0,'api_secret':_0x326ccd,'beautify':!![],'wsUrl':_0x4c753a},logger);let _0x28a2a1=config['exchange']==_0x143d8c(0x166)?_0x143d8c(0x170):_0x143d8c(0x18c),_0xc06135=config[_0x143d8c(0xee)]==_0x143d8c(0x14e)?_0x143d8c(0x14e):'BTC';stablecoins={'eur':{'coin':''+_0xc06135+_0x28a2a1,'symbol':_0xc06135+'/'+_0x28a2a1},'usd':{'coin':_0xc06135+_0x143d8c(0x170),'symbol':_0xc06135+_0x143d8c(0xdc)}};}async function loadSymbols(){const _0x18f67f=_0x4bba6f;let _0x2acd89;try{markets=await exchange[_0x18f67f(0x87)](),allSymbols=exchange[_0x18f67f(0x95)][_0x18f67f(0x165)](_0x2ad7aa=>{const _0x4fccf5=_0x18f67f;let _0x29ff46=![];return exceptions[_0x4fccf5(0x195)](_0x3fcfca=>{if(_0x2ad7aa['includes'](_0x3fcfca))_0x29ff46=!![];}),!_0x29ff46;}),_0x2acd89=!![];}catch(_0x4d85cd){await handleError(_0x4d85cd,'loadSymbols()'),_0x2acd89=![];}return _0x2acd89;}async function initbot(){const _0x15c2e0=_0x4bba6f;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x12d861=dbCoinResults['get'](_0x15c2e0(0x98))[_0x15c2e0(0x12f)]();if(_0x12d861[_0x15c2e0(0x135)]==0x0)await resetCoinResults();}async function initclient(){const _0x56cb18=_0x4bba6f;proxyEmit(_0x56cb18(0x193),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x56cb18(0x19d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x45e255=getNormalizedPerformance();emitPerformance(_0x45e255),await getStartingBalances(_0x45e255);}async function toggleBotMode(){const _0x5bfb3b=_0x4bba6f;let _0x25a0ef=dbConfig[_0x5bfb3b(0xeb)](_0x5bfb3b(0x140))[_0x5bfb3b(0x9f)]({'botID':botID})[_0x5bfb3b(0x12f)]();if(_0x25a0ef){const _0x5ebe39=!_0x25a0ef[_0x5bfb3b(0x188)];dbConfig['get'](_0x5bfb3b(0x140))[_0x5bfb3b(0x9f)]({'botID':botID})[_0x5bfb3b(0xb9)]({'headless':_0x5ebe39})[_0x5bfb3b(0x68)](),config[_0x5bfb3b(0x188)]=_0x5ebe39,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4ac9f5=_0x4bba6f;process[_0x4ac9f5(0xbf)]({'updatebotmanager':!![]},_0x50c6fe=>{});}function cleanws(){const _0x4fe1f7=_0x4bba6f;wsinitialized=![];ws1&&(ws1[_0x4fe1f7(0x195)](_0x26be3e=>{try{wsClient['closeWs'](_0x26be3e);}catch(_0x2e2a48){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x33dc85){}ws2=null;}ws3&&(ws3[_0x4fe1f7(0x195)](_0x292736=>{const _0x680b38=_0x4fe1f7;try{wsClient[_0x680b38(0x129)](_0x292736);}catch(_0x383ea6){}}),ws3=[]);}async function initws(){const _0x3088b5=_0x4bba6f;cleanws();let _0x408264=[];currentCoins[_0x3088b5(0x195)](_0x30afab=>{const _0x1e1588=_0x3088b5;if(_0x30afab['coin']!=config['basecoin'])_0x408264[_0x1e1588(0x8d)](_0x30afab[_0x1e1588(0x79)]);});if(!_0x408264[_0x3088b5(0x6c)](stablecoins[_0x3088b5(0x107)][_0x3088b5(0x79)]))_0x408264[_0x3088b5(0x8d)](stablecoins[_0x3088b5(0x107)][_0x3088b5(0x79)]);if(!_0x408264[_0x3088b5(0x6c)](stablecoins['usd']['symbol']))_0x408264[_0x3088b5(0x8d)](stablecoins[_0x3088b5(0x94)][_0x3088b5(0x79)]);if(!_0x408264[_0x3088b5(0x6c)]('BNB/'+config[_0x3088b5(0xee)]))_0x408264[_0x3088b5(0x8d)](_0x3088b5(0xb0)+config[_0x3088b5(0xee)]);try{_0x408264['forEach']((_0x4eaa8c,_0x4d5943)=>{const _0x1af205=_0x3088b5;ws1[_0x4d5943]=wsClient['subscribeSpotKline'](noslash(_0x4eaa8c),'1m'),ws3[_0x4d5943]=wsClient['subscribeSymbol24hrTicker'](noslash(_0x4eaa8c),_0x1af205(0x13e));}),ws2=wsClient[_0x3088b5(0x14f)](),wsClient['on']('formattedMessage',_0xbf65fb=>{const _0x2ba8be=_0x3088b5;if(isWsFormattedKline(_0xbf65fb)){global['ticker'][_0xbf65fb[_0x2ba8be(0xaf)][_0x2ba8be(0x79)]]=_0xbf65fb[_0x2ba8be(0xaf)][_0x2ba8be(0x19b)];return;}else{if(isWsFormatted24hrTicker(_0xbf65fb)){global['change'][_0xbf65fb[_0x2ba8be(0x79)]]=_0xbf65fb[_0x2ba8be(0xa1)];return;}else{if(!Array[_0x2ba8be(0x72)](_0xbf65fb)&&_0xbf65fb['wsKey'][_0x2ba8be(0x6c)](_0x2ba8be(0x167))){if(_0xbf65fb['wsMarket'][_0x2ba8be(0x6c)](_0x2ba8be(0x13e))){updateNumberCoins(_0xbf65fb);return;}}}}}),wsClient['on'](_0x3088b5(0x16a),async _0x191508=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x3c45b1){await handleError(_0x3c45b1,_0x3088b5(0x12a));}let _0x508fdb,_0x41969a=0x0;loading['remainingSymbols']=[];let _0x202c42=0x0;_0x408264['forEach'](_0x4a2f06=>{const _0xb96ce0=_0x3088b5;loading[_0xb96ce0(0xa8)][_0xb96ce0(0x8d)](_0x4a2f06);}),loadingCanceled=![];while(_0x508fdb!=_0x408264[_0x3088b5(0x135)]){_0x508fdb=0x0,_0x408264['forEach'](_0x3d9c94=>{const _0x2a85ae=_0x3088b5;global['ticker'][noslash(_0x3d9c94)]&&(loading[_0x2a85ae(0xa8)]=loading[_0x2a85ae(0xa8)][_0x2a85ae(0x165)](_0x506581=>_0x506581!=_0x3d9c94),_0x508fdb++);}),loading['progress']=Math[_0x3088b5(0x10d)](_0x508fdb/_0x408264[_0x3088b5(0x135)]*0x64);_0x202c42>0x1e*0x5&&(loading[_0x3088b5(0xb7)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x3088b5(0x178)]=!![],emitLoadingProgress();break;}else _0x508fdb!=_0x41969a&&(_0x41969a=_0x508fdb,emitLoadingProgress()),_0x202c42++,await sleep(0xc8);}if(_0x508fdb==_0x408264[_0x3088b5(0x135)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x3a77c9=_0x4bba6f;proxyEmit(_0x3a77c9(0x8f),loading);}async function getFiat(){const _0x22b358=_0x4bba6f;let _0x3fdee3=0x0,_0x36113=0x0;try{_0x3fdee3=global[_0x22b358(0xd2)][stablecoins[_0x22b358(0x107)][_0x22b358(0x17a)]],_0x36113=global[_0x22b358(0xd2)][stablecoins[_0x22b358(0x94)]['coin']];}catch(_0x23369a){await handleError(_0x23369a,_0x22b358(0xb3));}return{'eur':Number(_0x3fdee3),'usd':Number(_0x36113)};}function setStartDatePerformance(){const _0x5bb699=_0x4bba6f;if(config&&config['liquidity'][0x0]['changes'][_0x5bb699(0x135)]!=0x0){const _0xb511a8=config[_0x5bb699(0xea)][0x0][_0x5bb699(0x11a)];dbPerformance[_0x5bb699(0xeb)](_0x5bb699(0xd6))['find']({'date':config['startdate']})[_0x5bb699(0xb9)]({'coins':_0xb511a8})['write']();}}async function recreateHistory(_0x5849f6){const _0x246264=_0x4bba6f;let _0x1a6dc9,_0xa23359=[];logHistory('success','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x5849f6[_0x246264(0x10e)]['forEach'](_0x43f239=>{const _0x1a7d06=_0x246264;if(_0x43f239[_0x1a7d06(0x17a)]!=config[_0x1a7d06(0xee)]&&!_0x43f239[_0x1a7d06(0x156)])_0xa23359['push']({'coin':_0x43f239['coin'],'symbol':_0x43f239[_0x1a7d06(0x79)]});});let _0x481d95=[];try{const _0xb8a031=fns['format'](fns['parseISO'](_0x5849f6[_0x246264(0x185)][_0x246264(0xb8)](/\//g,'-')),_0x246264(0xc4));for(const _0x340080 of _0xa23359){if(_0x340080[_0x246264(0x17a)]!=config[_0x246264(0xee)])_0x1a6dc9=await exchange['fetchOrders'](_0x340080['symbol'],Date[_0x246264(0x123)](_0xb8a031));_0x1a6dc9['forEach'](_0xb6faae=>{const _0x936c3a=_0x246264,_0x340e8e=_0x340080[_0x936c3a(0x79)][_0x936c3a(0x6c)](config[_0x936c3a(0xee)]+'/'),_0x50308a=fns[_0x936c3a(0xd5)](fns[_0x936c3a(0x117)](_0xb6faae[_0x936c3a(0x18f)]),_0x936c3a(0xc2)),_0x54e005=fns[_0x936c3a(0xd5)](fns[_0x936c3a(0x117)](_0xb6faae['datetime']),_0x936c3a(0x113));let _0x30095a;if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x127)&&_0x340e8e==![])_0x30095a=_0xb6faae[_0x936c3a(0xa0)];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x127)&&_0x340e8e==!![])_0x30095a=-_0xb6faae[_0x936c3a(0xa0)]*_0xb6faae[_0x936c3a(0x16e)];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x17e)&&_0x340e8e==![])_0x30095a=-_0xb6faae[_0x936c3a(0xa0)];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x17e)&&_0x340e8e==!![])_0x30095a=_0xb6faae[_0x936c3a(0xa0)]*_0xb6faae[_0x936c3a(0x16e)];_0x481d95[_0x936c3a(0x8d)]({'timestamp':_0x50308a,'date':_0x54e005,'coin':_0x340080[_0x936c3a(0x17a)],'symbol':_0x340080[_0x936c3a(0x79)],'type':_0xb6faae[_0x936c3a(0x124)],'side':_0xb6faae[_0x936c3a(0x144)],'reverse':_0x340e8e,'amount':formatResult(_0xb6faae[_0x936c3a(0xa9)],0x8),'filled':formatResult(_0xb6faae[_0x936c3a(0xa9)],0x8),'coinamount':formatResult(_0x30095a,0x8),'price':formatResult(_0xb6faae[_0x936c3a(0x16e)],0x8)});let _0x34c786;if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x127)&&_0x340e8e==![])_0x34c786=-_0xb6faae['amount']*_0xb6faae['price'];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x127)&&_0x340e8e==!![])_0x34c786=_0xb6faae['amount'];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x17e)&&_0x340e8e==![])_0x34c786=_0xb6faae[_0x936c3a(0xa0)]*_0xb6faae[_0x936c3a(0x16e)];if(_0xb6faae[_0x936c3a(0x144)]==_0x936c3a(0x17e)&&_0x340e8e==!![])_0x34c786=-_0xb6faae[_0x936c3a(0xa0)];_0x481d95['push']({'date':_0x54e005,'coin':config[_0x936c3a(0xee)],'coinamount':formatResult(_0x34c786,0x8)});});}_0x481d95[_0x246264(0x10b)]((_0x3e3071,_0x349d51)=>_0x3e3071[_0x246264(0x183)]>_0x349d51[_0x246264(0x183)]?0x1:_0x349d51['timestamp']>_0x3e3071[_0x246264(0x183)]?-0x1:0x0),dbLogs[_0x246264(0xeb)](_0x246264(0xf9))[_0x246264(0xc7)]()[_0x246264(0x68)](),_0x481d95[_0x246264(0x195)](_0x151303=>{const _0x3d689d=_0x246264;let _0x1f31a0;_0x151303['coin']!=config[_0x3d689d(0xee)]&&(_0x1f31a0={'time':_0x151303[_0x3d689d(0x183)],'type':'order','event':_0x3d689d(0xa5)+_0x151303[_0x3d689d(0x79)]+'\x20'+_0x151303[_0x3d689d(0x144)]+'\x20#'+_0x151303['amount']+'\x20@'+_0x151303['price']},dbLogs[_0x3d689d(0xeb)](_0x3d689d(0xf9))[_0x3d689d(0x8d)](_0x1f31a0)[_0x3d689d(0x68)]());});const _0xbc0f97=fns['eachDayOfInterval']({'start':new Date(_0x5849f6[_0x246264(0x185)]),'end':new Date()})[_0x246264(0x103)](_0x521ce8=>fns[_0x246264(0xd5)](_0x521ce8,'yyyy/MM/dd'));let _0x2eeafb=[];_0x5849f6[_0x246264(0x10e)][_0x246264(0x195)](_0x40a74c=>{const _0x30c258=_0x246264;if(!_0x40a74c[_0x30c258(0x156)]){_0x2eeafb[_0x40a74c[_0x30c258(0x17a)]]=[];let _0x171c97=_0x40a74c[_0x30c258(0x86)];_0xbc0f97[_0x30c258(0x195)]((_0x433b3c,_0x16f82e)=>{const _0x39068d=_0x30c258;let _0x13aa4e=_0x481d95[_0x39068d(0x165)](_0x3ed12a=>_0x3ed12a[_0x39068d(0x17a)]==_0x40a74c['coin']&&_0x3ed12a[_0x39068d(0xf4)]==_0x433b3c);if(_0x13aa4e[_0x39068d(0x135)]!=0x0){let _0x4ec0af=_0x13aa4e[_0x39068d(0x191)]((_0x55a8ff,_0x37481b)=>{const _0x384136=_0x39068d;return _0x55a8ff+=_0x37481b[_0x384136(0x16b)],_0x55a8ff;},0x0);_0x171c97+=_0x4ec0af;}_0x2eeafb[_0x40a74c[_0x39068d(0x17a)]][_0x433b3c]=_0x171c97;});}});const _0x553211=[..._0xa23359];_0x553211[_0x246264(0x8d)]({'coin':stablecoins[_0x246264(0x107)][_0x246264(0x17a)],'symbol':stablecoins[_0x246264(0x107)][_0x246264(0x79)]}),_0x553211[_0x246264(0x8d)]({'coin':stablecoins[_0x246264(0x94)][_0x246264(0x17a)],'symbol':stablecoins[_0x246264(0x94)]['symbol']});let _0x580546=[];for(const _0x25a565 of _0x553211){_0x580546[_0x25a565[_0x246264(0x17a)]]=await getCloses(_0x25a565[_0x246264(0x79)],new Date(_0x5849f6[_0x246264(0x185)]));}dbPerformance['get'](_0x246264(0xd6))['remove']()[_0x246264(0x68)](),_0xbc0f97[_0x246264(0x195)]((_0x560000,_0x300498)=>{const _0x12ad89=_0x246264;let _0x1c468d,_0x234949=[];_0x300498==0x0?(_0x5849f6[_0x12ad89(0x10e)][_0x12ad89(0x195)](_0x50944b=>{const _0x2559b4=_0x12ad89;!_0x50944b[_0x2559b4(0x156)]&&_0x234949['push']({'coin':_0x50944b[_0x2559b4(0x17a)],'number':_0x50944b[_0x2559b4(0x86)],'price':_0x50944b[_0x2559b4(0xaa)]});}),_0x1c468d={'date':_0x560000,'eur':_0x580546[stablecoins['eur'][_0x12ad89(0x17a)]][_0x300498],'usd':_0x580546[stablecoins[_0x12ad89(0x94)][_0x12ad89(0x17a)]][_0x300498],'coins':_0x234949}):(_0x5849f6['portfolio'][_0x12ad89(0x195)](_0x5e93d5=>{const _0x3763ee=_0x12ad89;!_0x5e93d5[_0x3763ee(0x156)]&&_0x234949[_0x3763ee(0x8d)]({'coin':_0x5e93d5[_0x3763ee(0x17a)],'number':_0x2eeafb[_0x5e93d5[_0x3763ee(0x17a)]][_0x560000],'price':_0x5e93d5[_0x3763ee(0x17a)]==config['basecoin']?0x1:_0x580546[_0x5e93d5['coin']][_0x300498]});}),_0x1c468d={'date':_0x560000,'eur':_0x580546[stablecoins[_0x12ad89(0x107)]['coin']][_0x300498],'usd':_0x580546[stablecoins[_0x12ad89(0x94)][_0x12ad89(0x17a)]][_0x300498],'coins':_0x234949}),dbPerformance[_0x12ad89(0xeb)](_0x12ad89(0xd6))[_0x12ad89(0x8d)](_0x1c468d)[_0x12ad89(0x68)]();}),emitPerformance(getNormalizedPerformance()),await resetCoinResults();for(let _0x469507 of _0x481d95){_0x469507[_0x246264(0x17a)]!=config[_0x246264(0xee)]&&await updateCoinResults(_0x469507);}logHistory(_0x246264(0x154),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x40b987){await handleError(_0x40b987,_0x246264(0x120));}}async function validate24hChanges(){const _0x1756aa=_0x4bba6f;let _0x2f29a1;for(const _0x65c091 of currentCoins){if(_0x65c091[_0x1756aa(0x17a)]!=config['basecoin']){let _0x11f490;_0x65c091[_0x1756aa(0xcf)]?_0x11f490=formatResult((0x1/(global['change'][noslash(_0x65c091[_0x1756aa(0x79)])]/0x64+0x1)-0x1)*0x64,0x3):_0x11f490=global[_0x1756aa(0x114)][noslash(_0x65c091[_0x1756aa(0x79)])],_0x11f490<config[_0x1756aa(0x115)]&&(logHistory('error',_0x65c091[_0x1756aa(0x17a)]+_0x1756aa(0xe4)+_0x11f490+'%'),logHistory(_0x1756aa(0x150),_0x1756aa(0xec)),logHistory(_0x1756aa(0x150),'Carefully\x20evaludate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function getCloses(_0x2c7fe6,_0x472f9c,_0x33f468=undefined){const _0x515b7d=_0x4bba6f,_0x2f9f4f='1d';let _0x4f2a5e,_0x1ebff4;const _0x5e1ca1=fns[_0x515b7d(0x122)](new Date(),_0x472f9c)+0x1;try{const _0x34a417=exchange[_0x515b7d(0xf6)]()-_0x5e1ca1*0x18*0xe10*0x3e8;_0x4f2a5e=await exchange[_0x515b7d(0x18a)](_0x2c7fe6,_0x2f9f4f,_0x34a417,_0x33f468),_0x1ebff4=await exchange[_0x515b7d(0x128)](_0x2c7fe6);}catch(_0x5ed05e){await handleError(_0x5ed05e,'getCloses()');}let _0x5e003a=ohlcvToCloses(_0x4f2a5e);return _0x5e003a['push'](_0x1ebff4[_0x2c7fe6]['last']),_0x5e003a;}function ohlcvToCloses(_0x52407d){const _0x487028=_0x4bba6f;let _0x44d561=[];return _0x52407d[_0x487028(0x195)](function(_0x48fe63){_0x44d561['push'](_0x48fe63[0x4]);}),_0x44d561;}function oneTimeMigration(){const _0x22ac56=_0x4bba6f;let _0x1439db=dbLogs['get'](_0x22ac56(0x15b))[_0x22ac56(0x12f)]();if(_0x1439db!=_0x22ac56(0x146)){dbLogs[_0x22ac56(0x173)](_0x22ac56(0x15b),_0x22ac56(0x146))[_0x22ac56(0x68)]();let _0x501b77=[];const _0x102b55=dbLogs['get'](_0x22ac56(0xf9))[_0x22ac56(0x12f)]();_0x102b55[_0x22ac56(0x195)](_0x44f8a8=>{const _0x39aef1=_0x22ac56;_0x501b77[_0x39aef1(0x8d)]({'time':_0x44f8a8[_0x39aef1(0x74)],'type':_0x44f8a8[_0x39aef1(0x124)],'event':_0x44f8a8[_0x39aef1(0x17c)]});}),dbLogs['get'](_0x22ac56(0xf9))[_0x22ac56(0xb9)](_0x501b77)['write']();}let _0x4e764c=dbConfig['get'](_0x22ac56(0x15b))['value']();if(_0x4e764c!=_0x22ac56(0x146)){dbConfig[_0x22ac56(0x173)](_0x22ac56(0x15b),'2.3.5')[_0x22ac56(0x68)]();let _0x1bc974=dbConfig['get'](_0x22ac56(0x140))[_0x22ac56(0x9f)]({'botID':botID})[_0x22ac56(0x12f)]();if(_0x1bc974){let _0x1f59fa=[];_0x1bc974['portfolio'][_0x22ac56(0x195)](_0x14bfbb=>{const _0x5e335a=_0x22ac56;_0x1f59fa[_0x5e335a(0x8d)]({'coin':_0x14bfbb[_0x5e335a(0x17a)],'number':_0x14bfbb['startnumber'],'price':_0x14bfbb[_0x5e335a(0xaa)]}),delete _0x14bfbb[_0x5e335a(0x86)],delete _0x14bfbb[_0x5e335a(0xaa)];});if(_0x1f59fa[_0x22ac56(0x135)]!==0x0)fs[_0x22ac56(0x8b)](configbackuppath+(_0x22ac56(0x179)+botID+_0x22ac56(0xac)),JSON[_0x22ac56(0x197)](_0x1f59fa,null,0x4),function(_0x530436){if(_0x530436){}});const _0x530dd9=(_0x310f6f,_0x19972c)=>{const _0x47ae0c=_0x22ac56;let _0x3ac2cf=[];_0x19972c[_0x47ae0c(0x195)](_0x580ed2=>{const _0x30565b=_0x47ae0c,_0xe9cd5c=_0x310f6f['find'](_0x49a36a=>_0x49a36a[_0x30565b(0x17a)]==_0x580ed2[_0x30565b(0x17a)]);if(!_0xe9cd5c)_0x3ac2cf[_0x30565b(0x8d)](_0x580ed2);});let _0x1a6f1c=[];return _0x310f6f[_0x47ae0c(0x195)](_0x2de6ff=>{const _0x5f958d=_0x47ae0c,_0x37093f=_0x19972c[_0x5f958d(0x9f)](_0x4846bf=>_0x4846bf['coin']==_0x2de6ff['coin']);if(!_0x37093f||_0x37093f['number']==0x0&&_0x2de6ff[_0x5f958d(0x11d)]!=0x0)_0x1a6f1c[_0x5f958d(0x8d)](_0x2de6ff);}),{'missingDay1':_0x3ac2cf,'notInDay2':_0x1a6f1c};},_0x172747=dbPerformance[_0x22ac56(0xeb)]('data')['cloneDeep']()[_0x22ac56(0x12f)]();if(_0x172747[_0x22ac56(0x135)]>0x1){const {missingDay1:_0xb99be7,notInDay2:_0x42942c}=_0x530dd9(_0x1f59fa,_0x172747[0x1]['coins']);_0x1f59fa=[..._0x1f59fa,..._0xb99be7],_0x42942c[_0x22ac56(0x195)](_0x3c0fd4=>{const _0x55d7ec=_0x22ac56;let _0x4e3865=_0x1f59fa[_0x55d7ec(0xb6)](_0x4414f8=>_0x4414f8[_0x55d7ec(0x17a)]==_0x3c0fd4[_0x55d7ec(0x17a)]);_0x4e3865!=-0x1&&_0x1f59fa[_0x55d7ec(0x6b)](_0x4e3865,0x1);});}_0x1f59fa[_0x22ac56(0x10b)]((_0x53688c,_0x49f42b)=>_0x53688c[_0x22ac56(0x17a)]>_0x49f42b[_0x22ac56(0x17a)]?0x1:_0x49f42b[_0x22ac56(0x17a)]>_0x53688c[_0x22ac56(0x17a)]?-0x1:0x0);let _0x67297=[{'date':_0x1bc974[_0x22ac56(0x185)],'changes':_0x1f59fa}];_0x172747[_0x22ac56(0x135)]>0x2&&_0x172747[_0x22ac56(0x195)]((_0x28a341,_0x5e3e34)=>{const _0x3154d9=_0x22ac56;if(_0x5e3e34>0x0&&_0x5e3e34<_0x172747['length']-0x1){const {missingDay1:_0x260c3d,notInDay2:_0x62609}=_0x530dd9(_0x172747[_0x5e3e34]['coins'],_0x172747[_0x5e3e34+0x1][_0x3154d9(0x98)]);_0x1f59fa=[],(_0x260c3d[_0x3154d9(0x135)]!=0x0||_0x62609[_0x3154d9(0x135)]!=0x0)&&(_0x260c3d[_0x3154d9(0x135)]!=0x0&&_0x1f59fa[_0x3154d9(0x8d)](..._0x260c3d),_0x62609[_0x3154d9(0x135)]!=0x0&&(_0x62609[_0x3154d9(0x195)](_0x4c071c=>{const _0x1f1484=_0x3154d9;_0x4c071c[_0x1f1484(0x11d)]=-_0x4c071c[_0x1f1484(0x11d)];}),_0x1f59fa[_0x3154d9(0x8d)](..._0x62609)),_0x1f59fa[_0x3154d9(0x10b)]((_0x2124af,_0x1daab9)=>_0x2124af[_0x3154d9(0x17a)]>_0x1daab9['coin']?0x1:_0x1daab9['coin']>_0x2124af[_0x3154d9(0x17a)]?-0x1:0x0),_0x67297[_0x3154d9(0x8d)]({'date':_0x172747[_0x5e3e34+0x1][_0x3154d9(0xf4)],'changes':_0x1f59fa}));}}),dbConfig[_0x22ac56(0xeb)]('bot')[_0x22ac56(0x9f)]({'botID':botID})[_0x22ac56(0xb9)]({..._0x1bc974,'liquidity':_0x67297})[_0x22ac56(0x68)]();}}config=getConfiguration(botID);let _0x195c3f=dbPerformance[_0x22ac56(0xeb)](_0x22ac56(0x15b))[_0x22ac56(0x12f)]();_0x195c3f!=_0x22ac56(0x146)&&(dbPerformance[_0x22ac56(0x173)](_0x22ac56(0x15b),_0x22ac56(0x146))[_0x22ac56(0x68)](),setStartDatePerformance());let _0x42ef3f=dbCoinResults[_0x22ac56(0xeb)](_0x22ac56(0x15b))[_0x22ac56(0x12f)]();_0x42ef3f!=_0x22ac56(0x6d)&&(dbCoinResults[_0x22ac56(0xeb)]('coins')[_0x22ac56(0xc7)]()[_0x22ac56(0x68)](),dbCoinResults['set'](_0x22ac56(0x15b),_0x22ac56(0x6d))[_0x22ac56(0x68)](),dbCoinResults[_0x22ac56(0x173)](_0x22ac56(0x177),getTimeStamp())[_0x22ac56(0x68)]());}function getConfiguration(_0xdb33c8){const _0x3c8956=_0x4bba6f;let _0x408f57=dbConfig[_0x3c8956(0xeb)](_0x3c8956(0x140))[_0x3c8956(0x9f)]({'botID':_0xdb33c8})[_0x3c8956(0x12f)]();if(_0x408f57){let _0x50aea8=![];typeof _0x408f57[_0x3c8956(0xd8)]=='string'&&(_0x408f57={..._0x408f57,'threshold':Number(_0x408f57['threshold'])},_0x50aea8=!![]),_0x408f57[_0x3c8956(0x115)]==null&&(_0x408f57={..._0x408f57,'change24h':-0x14},_0x50aea8=!![]),_0x50aea8&&(_0x408f57={'botID':_0x408f57['botID'],'exchange':_0x408f57[_0x3c8956(0xd9)],'apiKey':_0x408f57['apiKey'],'apiSecret':_0x408f57[_0x3c8956(0x82)],'basecoin':_0x408f57[_0x3c8956(0xee)],'botname':_0x408f57[_0x3c8956(0x13c)],'showname':_0x408f57[_0x3c8956(0xf5)],'threshold':_0x408f57[_0x3c8956(0xd8)],'ordertype':_0x408f57[_0x3c8956(0xe5)],'timeout':_0x408f57['timeout'],'startdate':_0x408f57[_0x3c8956(0x185)],'recreate':_0x408f57[_0x3c8956(0xf3)],'timeshift':_0x408f57['timeshift'],'headless':_0x408f57[_0x3c8956(0x188)],'cooldown':_0x408f57[_0x3c8956(0x9b)],'change24h':_0x408f57[_0x3c8956(0x115)],'emojibuy':_0x408f57[_0x3c8956(0x198)],'emojisell':_0x408f57[_0x3c8956(0x13d)],'portfolio':_0x408f57[_0x3c8956(0x10e)],'liquidity':_0x408f57['liquidity']},dbConfig[_0x3c8956(0xeb)](_0x3c8956(0x140))['remove']()['write'](),dbConfig[_0x3c8956(0xeb)](_0x3c8956(0x140))[_0x3c8956(0x8d)](_0x408f57)[_0x3c8956(0x68)]());}else _0x408f57={'botID':_0xdb33c8,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':_0x3c8956(0xf7)+_0xdb33c8,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3c8956(0x180)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x408f57;}function emittedConfiguration(){const _0x2e99bb=_0x4bba6f;let _0x5cf732;return config[_0x2e99bb(0x136)]==''?_0x5cf732=config:_0x5cf732={...config,'apiKey':_0x2e99bb(0x149),'apiSecret':_0x2e99bb(0x149)},_0x5cf732;}function getSettings(){const _0x2fc785=_0x4bba6f;return dbSettings[_0x2fc785(0xeb)](_0x2fc785(0x143))[_0x2fc785(0x12f)]();}function getSecure(){const _0x276218=_0x4bba6f;return dbSecure[_0x276218(0xeb)](_0x276218(0x162))[_0x276218(0x12f)]()||{};}function updateTimeshift(_0x49fc62){const _0xacf8df=_0x4bba6f;let _0x282c4c=dbConfig[_0xacf8df(0xeb)](_0xacf8df(0x140))['find']({'botID':botID})['value']();_0x282c4c&&dbConfig[_0xacf8df(0xeb)]('bot')[_0xacf8df(0x9f)]({'botID':botID})[_0xacf8df(0xb9)]({'timeshift':_0x49fc62})[_0xacf8df(0x68)](),config[_0xacf8df(0x180)]=_0x49fc62,proxyEmit(_0xacf8df(0x193),emittedConfiguration());}async function storeConfiguration(_0x47abc8){const _0x4d020a=_0x4bba6f;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x46a135=dbConfig[_0x4d020a(0xeb)](_0x4d020a(0x140))[_0x4d020a(0x9f)]({'botID':botID})['value']();_0x47abc8={..._0x47abc8,'apiKey':crypt[_0x4d020a(0x12c)](secure[_0x4d020a(0x9d)],_0x47abc8[_0x4d020a(0x136)])[_0x4d020a(0x91)],'apiSecret':crypt[_0x4d020a(0x12c)](secure[_0x4d020a(0x9d)],_0x47abc8[_0x4d020a(0x82)])['message']};if(_0x46a135){if(_0x47abc8[_0x4d020a(0x136)]==_0x4d020a(0x149))_0x47abc8[_0x4d020a(0x136)]=config['apiKey'];if(_0x47abc8[_0x4d020a(0x82)]==_0x4d020a(0x149))_0x47abc8['apiSecret']=config['apiSecret'];dbConfig[_0x4d020a(0xeb)](_0x4d020a(0x140))['find']({'botID':botID})['assign'](_0x47abc8)['write']();}else dbConfig[_0x4d020a(0xeb)](_0x4d020a(0x140))['push'](_0x47abc8)[_0x4d020a(0x68)](),process[_0x4d020a(0xbf)]({'status':_0x4d020a(0x17f),'live':_0x4d020a(0x7b)},_0x34d6d7=>{});config={..._0x47abc8},setStartDatePerformance(),process[_0x4d020a(0xbf)]({'botname':_0x47abc8[_0x4d020a(0x13c)]},_0x363877=>{}),updateBotManager();const _0x37a1d6=getNormalizedPerformance();getStartingBalances(_0x37a1d6),emitPerformance(_0x37a1d6),proxyEmit(_0x4d020a(0xc5)),reset();}async function storeHeadless(_0x3b7735){const _0x4b8f70=_0x4bba6f,_0x1c3ad2={...config,'headless':_0x3b7735['headless']};let _0x4622dc=dbConfig[_0x4b8f70(0xeb)](_0x4b8f70(0x140))[_0x4b8f70(0x9f)]({'botID':botID})['value']();_0x4622dc&&dbConfig[_0x4b8f70(0xeb)](_0x4b8f70(0x140))[_0x4b8f70(0x9f)]({'botID':botID})[_0x4b8f70(0xb9)](_0x1c3ad2)['write'](),config={..._0x1c3ad2},updateBotManager(),proxyEmit(_0x4b8f70(0x193),emittedConfiguration());}function noslash(_0x1bb2dc){const _0x38fd6a=_0x4bba6f;return _0x1bb2dc[_0x38fd6a(0xb8)]('/','');}async function updateNumberCoins(_0x42bf0c){const _0x59dbd3=_0x4bba6f;_0x42bf0c['eventType']&&_0x42bf0c[_0x59dbd3(0xfb)]==_0x59dbd3(0xce)&&(_0x42bf0c['eventTime']!=lastOutboundEventTime&&(lastOutboundEventTime=_0x42bf0c[_0x59dbd3(0xe8)],currentCoins=await getCoins(),validateOrders()));if(_0x42bf0c[_0x59dbd3(0xfb)]&&_0x42bf0c[_0x59dbd3(0xfb)]=='executionReport'){if(_0x42bf0c[_0x59dbd3(0xc1)]=='FILLED'){if(lastOrders)lastOrders[_0x59dbd3(0x195)](async _0x8e4fb1=>{const _0x18d072=_0x59dbd3;if(_0x8e4fb1[_0x18d072(0x171)]==_0x42bf0c[_0x18d072(0x171)]&&_0x8e4fb1['filled']==0x0){_0x8e4fb1[_0x18d072(0x16e)]=_0x42bf0c[_0x18d072(0x11e)]/_0x42bf0c[_0x18d072(0x145)];if(_0x8e4fb1[_0x18d072(0xcf)])_0x8e4fb1[_0x18d072(0xa9)]=_0x42bf0c['accumulatedQuantity']*_0x8e4fb1[_0x18d072(0x16e)];else _0x8e4fb1['filled']=_0x42bf0c['accumulatedQuantity'];_0x8e4fb1['fee']={'cost':_0x42bf0c['commission'],'currency':_0x42bf0c[_0x18d072(0x160)]},currentCoins=await getCoins(),validateOrders(),await updateCoinResults(_0x8e4fb1);}});}}}async function getCoins(_0xf674ee=!![],_0x36410d=config[_0x4bba6f(0xee)]){const _0x2c988e=_0x4bba6f;let _0x39bdb7,_0xaf47c3=[],_0x4a3687=[],_0x19b7b2=[];try{_0x39bdb7=await exchange['fetchBalance'](),mybalances=_0x39bdb7['total'];if(!_0xf674ee)for(const [_0x402ca8,_0xc10f6b]of Object[_0x2c988e(0xde)](mybalances)){_0x19b7b2['push'](_0x402ca8);}else config[_0x2c988e(0x10e)][_0x2c988e(0x195)](_0x2d6d2e=>{const _0x20125d=_0x2c988e;if(!_0x2d6d2e[_0x20125d(0x156)])_0x19b7b2[_0x20125d(0x8d)](_0x2d6d2e['coin']);});if(_0x36410d=='')for(const [_0xde6333,_0x5b91ef]of Object[_0x2c988e(0xde)](mybalances)){_0x5b91ef[_0x2c988e(0xe9)]()!=0x0&&_0x4a3687[_0x2c988e(0x8d)]({'coin':_0xde6333});}else{let _0x38c91e=0x0,_0x5e76b7=![];for(const [_0x518f2a,_0x22a550]of Object[_0x2c988e(0xde)](mybalances)){if(_0x19b7b2['includes'](_0x518f2a)){const _0x1674fd=config[_0x2c988e(0x10e)]['find'](_0x272fb8=>_0x272fb8[_0x2c988e(0x17a)]==_0x518f2a),_0x1f402a=_0x518f2a+'/'+_0x36410d,_0x485e49=_0x36410d+'/'+_0x518f2a;_0x5e76b7=![];if((_0x22a550['toString']()!=0x0||_0x1674fd)&&(allSymbols[_0x2c988e(0x6c)](_0x1f402a)||_0x518f2a==_0x36410d)){if(_0x518f2a!=_0x36410d){_0xaf47c3[_0x2c988e(0x8d)](_0x1f402a);const _0x14ec35=await exchange[_0x2c988e(0x142)](_0x1f402a);_0x14ec35[_0x2c988e(0x135)]>0x0&&(_0x5e76b7=!![]);}_0x4a3687[_0x2c988e(0x8d)]({'coin':_0x518f2a,'symbol':_0x1f402a,'reverse':![],'number':Math['max'](_0x22a550+(_0x1674fd&&_0x1674fd[_0x2c988e(0x161)]||0x0),0x0),'order':_0x5e76b7});}else{if((_0x22a550[_0x2c988e(0xe9)]()!=0x0||_0x1674fd)&&allSymbols[_0x2c988e(0x6c)](_0x485e49)){if(_0x518f2a!=_0x36410d){_0xaf47c3['push'](_0x485e49);const _0x2dfebc=await exchange[_0x2c988e(0x142)](_0x485e49);_0x2dfebc[_0x2c988e(0x135)]>0x0&&(_0x5e76b7=!![]);}_0x4a3687[_0x2c988e(0x8d)]({'coin':_0x518f2a,'symbol':_0x485e49,'reverse':!![],'number':Math[_0x2c988e(0x130)](_0x22a550+(_0x1674fd&&_0x1674fd[_0x2c988e(0x161)]||0x0),0x0),'order':_0x5e76b7});}}}if(_0x5e76b7)_0x38c91e++;}_0x38c91e==0x0&&(lockOrders&&validateOrders(_0x2c988e(0x89)));}}catch(_0x33efe4){if(!_0xf674ee){if(_0x33efe4[_0x2c988e(0xe9)]()[_0x2c988e(0x6c)](_0x2c988e(0x93)))return logHistory(_0x2c988e(0x150),_0x2c988e(0x15d)),![];else{if(_0x33efe4[_0x2c988e(0xe9)]()[_0x2c988e(0x6c)](_0x2c988e(0xc8)))return logHistory(_0x2c988e(0x150),_0x2c988e(0x17d)),![];else{if(_0x33efe4[_0x2c988e(0xe9)]()[_0x2c988e(0x6c)](_0x2c988e(0xdf)))return logHistory(_0x2c988e(0x150),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x33efe4,_0x2c988e(0x70));}}}else await handleError(_0x33efe4,_0x2c988e(0x70));}return _0x4a3687;}async function getPortfolio(_0x3c49db){const _0x3e66b6=_0x4bba6f;let _0x3f4028=[],_0x49f9ca=[],_0x17cbeb,_0x1b2bd1=[],_0xb88bf2,_0xdb714a;_0x3c49db['apiKey']===_0x3e66b6(0x149)||_0x3c49db[_0x3e66b6(0x82)]===_0x3e66b6(0x149)?(_0xb88bf2=config[_0x3e66b6(0x136)],_0xdb714a=config[_0x3e66b6(0x82)]):(_0xb88bf2=_0x3c49db[_0x3e66b6(0x136)],_0xdb714a=_0x3c49db[_0x3e66b6(0x82)]);await initExchange(_0xb88bf2,_0xdb714a);let _0x6ef892=await loadSymbols();if(_0x6ef892){_0x1b2bd1=await getCoins(![],_0x3c49db[_0x3e66b6(0xee)]);if(_0x1b2bd1===![])proxyEmit(_0x3e66b6(0x10e),![]);else{if(_0x3c49db[_0x3e66b6(0xee)]=='')proxyEmit(_0x3e66b6(0x10e),_0x1b2bd1);else{_0x1b2bd1[_0x3e66b6(0x195)](_0x338ee6=>{const _0x40faff=_0x3e66b6;if(_0x338ee6[_0x40faff(0x17a)]!=_0x3c49db[_0x40faff(0xee)])_0x3f4028[_0x40faff(0x8d)](_0x338ee6[_0x40faff(0x79)]);});try{_0x49f9ca=await exchange[_0x3e66b6(0x128)](_0x3f4028);}catch(_0x423c6f){await handleError(_0x423c6f,'getPortfolio()');}_0x1b2bd1[_0x3e66b6(0x195)](_0x11567e=>{const _0x4d28a8=_0x3e66b6;_0x11567e[_0x4d28a8(0x17a)]!=_0x3c49db[_0x4d28a8(0xee)]?_0x17cbeb=_0x11567e[_0x4d28a8(0xcf)]?0x1/_0x49f9ca[_0x11567e[_0x4d28a8(0x79)]]['last']:_0x49f9ca[_0x11567e[_0x4d28a8(0x79)]]['last']:_0x17cbeb=0x1,_0x11567e[_0x4d28a8(0x16e)]=formatResult(_0x17cbeb,0x8);}),proxyEmit(_0x3e66b6(0x10e),_0x1b2bd1);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x4a2b58){const _0x31dbba=_0x4bba6f;let _0x420d2e=!![];const _0x555938=!_0x4a2b58[_0x31dbba(0xcf)]?markets[_0x4a2b58[_0x31dbba(0x79)]][_0x31dbba(0x181)][_0x31dbba(0xa0)][_0x31dbba(0xd0)]:markets[_0x4a2b58[_0x31dbba(0x79)]][_0x31dbba(0x181)][_0x31dbba(0xa6)][_0x31dbba(0xd0)],_0x971269=!_0x4a2b58[_0x31dbba(0xcf)]?markets[_0x4a2b58[_0x31dbba(0x79)]][_0x31dbba(0x181)][_0x31dbba(0xa6)]['min']:markets[_0x4a2b58[_0x31dbba(0x79)]][_0x31dbba(0x181)][_0x31dbba(0xa0)][_0x31dbba(0xd0)];if(Math[_0x31dbba(0x12d)](_0x4a2b58[_0x31dbba(0x119)])<_0x555938)_0x420d2e=![];if(Math[_0x31dbba(0x12d)](_0x4a2b58[_0x31dbba(0x119)])*_0x4a2b58['last']<_0x971269)_0x420d2e=![];if(_0x4a2b58[_0x31dbba(0x144)]==_0x31dbba(0x17e)){let _0x2b6ad8=config[_0x31dbba(0x10e)][_0x31dbba(0x9f)](_0x3e92ff=>_0x3e92ff[_0x31dbba(0x17a)]==_0x4a2b58[_0x31dbba(0x17a)]);if(_0x2b6ad8['offset']>0x0){if(Math['abs'](_0x4a2b58['trade'])>_0x4a2b58[_0x31dbba(0x11d)]-_0x2b6ad8[_0x31dbba(0x161)])_0x420d2e=![];}else{if(Math[_0x31dbba(0x12d)](_0x4a2b58['trade'])>_0x4a2b58['number'])_0x420d2e=![];}}if(_0x4a2b58[_0x31dbba(0x144)]==_0x31dbba(0x127)){let _0x287ef3=config[_0x31dbba(0x10e)][_0x31dbba(0x9f)](_0x20053f=>_0x20053f[_0x31dbba(0x17a)]==config[_0x31dbba(0xee)]),_0x1aa542=currentCoins['find'](_0x1b44f0=>_0x1b44f0['coin']==config['basecoin']);if(_0x287ef3['offset']>0x0){if(Math[_0x31dbba(0x12d)](_0x4a2b58[_0x31dbba(0x119)])*_0x4a2b58[_0x31dbba(0xf2)]>_0x1aa542[_0x31dbba(0x11d)]-_0x287ef3[_0x31dbba(0x161)])_0x420d2e=![];}else{if(Math[_0x31dbba(0x12d)](_0x4a2b58[_0x31dbba(0x119)])*_0x4a2b58['last']>_0x1aa542[_0x31dbba(0x11d)])_0x420d2e=![];}}return _0x420d2e;}async function getBalances(){const _0x5de2d7=_0x4bba6f;let _0x52b95b=0x0,_0x53d2a5;const _0xa40d9=config['threshold'];if(config[_0x5de2d7(0x188)]&&config[_0x5de2d7(0x115)]<0x0)await validate24hChanges();currentCoins[_0x5de2d7(0x195)](_0x3ecf4a=>{const _0x1faf35=_0x5de2d7;if(_0x3ecf4a[_0x1faf35(0x17a)]!=config[_0x1faf35(0xee)]){let _0x457a41=global[_0x1faf35(0xd2)][noslash(_0x3ecf4a[_0x1faf35(0x79)])];_0x53d2a5=_0x3ecf4a[_0x1faf35(0xcf)]?0x1/_0x457a41:_0x457a41;}else _0x53d2a5=0x1;let _0x1f5446=_0x3ecf4a['number']*_0x53d2a5;_0x52b95b+=_0x1f5446,_0x3ecf4a[_0x1faf35(0xf2)]=formatResult(Number(_0x53d2a5),0x8),_0x3ecf4a['value']=_0x1f5446;}),currentCoins[_0x5de2d7(0x195)](_0x4281d5=>{const _0x563f3d=_0x5de2d7;let _0x5a53c2=config[_0x563f3d(0x10e)][_0x563f3d(0x9f)](_0xdd1082=>_0xdd1082[_0x563f3d(0x17a)]==_0x4281d5[_0x563f3d(0x17a)]),_0x167b46=Number(_0x5a53c2['distribution']),_0x56bd26=_0x4281d5[_0x563f3d(0x12f)]/_0x52b95b*0x64,_0xed6af2=_0x167b46*_0x52b95b/0x64/_0x4281d5[_0x563f3d(0xf2)]-_0x4281d5['number'];_0x4281d5[_0x563f3d(0x174)]=formatResult(_0x56bd26,0x3),_0x4281d5[_0x563f3d(0x78)]=formatResult(_0x167b46,0x3),_0x4281d5['trade']=formatResult(_0xed6af2,0x8),_0x4281d5['side']='',_0x4281d5[_0x563f3d(0xbd)]=![];if(_0x4281d5['coin']!=config[_0x563f3d(0xee)]){if(_0x4281d5['distribution']>_0x167b46)_0x4281d5['side']=_0x563f3d(0x17e),_0x4281d5[_0x563f3d(0xbd)]=checkMinimums(_0x4281d5);else _0x4281d5[_0x563f3d(0x174)]<_0x167b46&&(_0x4281d5[_0x563f3d(0x144)]=_0x563f3d(0x127),_0x4281d5[_0x563f3d(0xbd)]=checkMinimums(_0x4281d5));}_0x4281d5[_0x563f3d(0x90)]=_0x4281d5['distribution']/_0x4281d5[_0x563f3d(0x78)]-0x1;}),currentCoins['sort']((_0x486b75,_0x204baa)=>_0x486b75[_0x5de2d7(0x90)]<_0x204baa['delta']?0x1:_0x204baa['delta']<_0x486b75['delta']?-0x1:0x0);const _0x598d33=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x598d33['eur'],'usd':_0x598d33['usd'],'portfolio':JSON[_0x5de2d7(0x197)](currentCoins),'threshold':_0xa40d9},proxyEmit(_0x5de2d7(0x19d),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5de2d7(0x188)])headlessMode({'portfolio':currentCoins,'threshold':_0xa40d9});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0xa40d9});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x26c11c=_0x4bba6f;if(!lastBalances)return;let _0x4c066c=[],_0x54d102,_0x4fb7be=JSON[_0x26c11c(0x123)](lastBalances[_0x26c11c(0x10e)]);_0x4fb7be[_0x26c11c(0x10b)]((_0x5c32f0,_0x426f03)=>_0x5c32f0[_0x26c11c(0x17a)]>_0x426f03[_0x26c11c(0x17a)]?0x1:_0x426f03['coin']>_0x5c32f0[_0x26c11c(0x17a)]?-0x1:0x0),_0x4fb7be[_0x26c11c(0x195)](_0x399bd9=>{const _0xe04d0c=_0x26c11c;let _0x2f136f={'coin':_0x399bd9[_0xe04d0c(0x17a)],'number':_0x399bd9['number'],'price':_0x399bd9[_0xe04d0c(0xf2)]};_0x4c066c[_0xe04d0c(0x8d)](_0x2f136f);});const _0x4fb562=await getFiat();_0x54d102={'date':lastBalances[_0x26c11c(0x74)][_0x26c11c(0xae)]('\x20')[0x0],'eur':_0x4fb562[_0x26c11c(0x107)],'usd':_0x4fb562['usd'],'coins':_0x4c066c};let _0x91660e=dbPerformance[_0x26c11c(0xeb)](_0x26c11c(0xd6))['find']({'date':_0x54d102[_0x26c11c(0xf4)]})[_0x26c11c(0x12f)]();_0x91660e?_0x54d102[_0x26c11c(0xf4)]!=config[_0x26c11c(0x185)]&&dbPerformance['get'](_0x26c11c(0xd6))[_0x26c11c(0x9f)]({'date':_0x54d102[_0x26c11c(0xf4)]})[_0x26c11c(0xb9)](_0x54d102)[_0x26c11c(0x68)]():dbPerformance['get'](_0x26c11c(0xd6))[_0x26c11c(0x8d)](_0x54d102)[_0x26c11c(0x68)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1a59e8=_0x4bba6f;let _0xd58e53=[];if(dbPerformance[_0x1a59e8(0x10c)]('data')[_0x1a59e8(0x12f)]()){let _0x559ba6=dbPerformance[_0x1a59e8(0xeb)](_0x1a59e8(0xd6))[_0x1a59e8(0x121)]()[_0x1a59e8(0xfc)](_0x1a59e8(0xf4))[_0x1a59e8(0x12f)](),_0x5910fd=[...config['liquidity']];_0x5910fd[_0x1a59e8(0x10b)]((_0x2bb2e7,_0x27e3bd)=>_0x2bb2e7[_0x1a59e8(0xf4)]>_0x27e3bd['date']?-0x1:_0x27e3bd[_0x1a59e8(0xf4)]>_0x2bb2e7['date']?0x1:0x0);let _0x47b83c=0x1,_0x581cbf=[],_0x3c5069=0x0;_0x559ba6['slice']()['reverse']()[_0x1a59e8(0x195)]((_0x4ae357,_0x17ebf3)=>{const _0x111d37=_0x1a59e8;if(_0x5910fd[_0x3c5069]){if(_0x559ba6[_0x559ba6[_0x111d37(0x135)]-_0x17ebf3]&&_0x5910fd[_0x3c5069][_0x111d37(0xf4)]==_0x559ba6[_0x559ba6[_0x111d37(0x135)]-_0x17ebf3][_0x111d37(0xf4)]){if(_0x17ebf3<_0x559ba6['length']){let _0xcfab95=0x0,_0x3c3728=0x0;_0x559ba6[_0x559ba6[_0x111d37(0x135)]-_0x17ebf3]['coins']['forEach'](_0x14c24d=>{const _0x5749cd=_0x111d37;_0x3c3728+=_0x14c24d[_0x5749cd(0x11d)]*_0x14c24d[_0x5749cd(0x16e)];}),_0x5910fd[_0x3c5069][_0x111d37(0x11a)]['forEach'](_0x437a54=>{const _0x58a94f=_0x111d37;_0xcfab95+=_0x437a54[_0x58a94f(0x11d)]*_0x437a54[_0x58a94f(0x16e)];}),_0x47b83c*=_0xcfab95/(_0x3c3728-_0xcfab95)+0x1;}_0x3c5069++;}}let _0x8c0cfc=0x0;_0x4ae357[_0x111d37(0x98)][_0x111d37(0x195)](_0x2c73be=>{const _0x42e14c=_0x111d37;_0x8c0cfc+=_0x2c73be['number']*_0x2c73be[_0x42e14c(0x16e)];}),_0x581cbf[_0x559ba6['length']-_0x17ebf3-0x1]=_0x8c0cfc*(_0x47b83c-0x1);});let _0x1aa01f=[];_0x5910fd=[...config[_0x1a59e8(0xea)]]||[];let _0x271ff2=0x0;_0x3c5069=0x0,_0x559ba6[_0x1a59e8(0x195)]((_0x3ad554,_0x8fde5e)=>{const _0x5edb24=_0x1a59e8;if(_0x5910fd[_0x3c5069]){const _0x48792e=fns['parse'](_0x5910fd[_0x3c5069]['date'],'yyyy/MM/dd',new Date()),_0x4f1201=fns[_0x5edb24(0x123)](_0x3ad554[_0x5edb24(0xf4)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x48792e,_0x4f1201)){let _0x3b2004=0x0;_0x5910fd[_0x3c5069][_0x5edb24(0x11a)][_0x5edb24(0x195)](_0x1ad3dd=>{const _0x5a60e6=_0x5edb24;!_0x1aa01f[_0x1ad3dd['coin']]?_0x1aa01f[_0x1ad3dd['coin']]=_0x1ad3dd[_0x5a60e6(0x11d)]:(_0x3b2004=_0x1aa01f[_0x1ad3dd[_0x5a60e6(0x17a)]],_0x1aa01f[_0x1ad3dd[_0x5a60e6(0x17a)]]+=_0x1ad3dd['number']);const _0x3bed43=_0x3ad554['coins'][_0x5a60e6(0x9f)](_0x1589f8=>_0x1589f8[_0x5a60e6(0x17a)]==_0x1ad3dd[_0x5a60e6(0x17a)]);(!_0x3bed43||_0x3bed43[_0x5a60e6(0x11d)]==0x0)&&(_0x271ff2+=(-_0x1ad3dd['number']-_0x3b2004)*_0x1ad3dd[_0x5a60e6(0x16e)]);}),_0x3c5069++;}}_0x3ad554[_0x5edb24(0x98)][_0x5edb24(0x195)]((_0x4bc713,_0x946bd)=>{const _0x45eaf3=_0x5edb24;_0x1aa01f[_0x4bc713[_0x45eaf3(0x17a)]]&&(_0x4bc713={..._0x4bc713,'initial':_0x1aa01f[_0x4bc713[_0x45eaf3(0x17a)]]}),_0x3ad554[_0x45eaf3(0x98)][_0x946bd]=_0x4bc713;}),_0xd58e53[_0x5edb24(0x8d)]({'date':_0x3ad554[_0x5edb24(0xf4)],'eur':_0x3ad554[_0x5edb24(0x107)],'usd':_0x3ad554[_0x5edb24(0x94)],'offset':_0x581cbf[_0x8fde5e],'netoffset':_0x271ff2,'coins':_0x3ad554[_0x5edb24(0x98)]});});}return _0xd58e53;}function emitPerformance(_0x3b6c9d){const _0x25007c=_0x4bba6f;_0x3b6c9d[_0x25007c(0x135)]!==0x0?(proxyEmit(_0x25007c(0x192),_0x3b6c9d),lastPerformanceEmitted=getDate()):proxyEmit(_0x25007c(0x192),[]);}function getPerf(_0x4e298f,_0x16251c){const _0x1d9703=_0x4bba6f;let _0x21fd3d=0x0,_0x282e12=0x0,_0x5354de=0x0;_0x4e298f[_0x1d9703(0x98)]['forEach'](_0x25e070=>{const _0xb1f383=_0x1d9703;_0x21fd3d+=_0x25e070[_0xb1f383(0x11d)]*_0x25e070['price'];});_0x16251c&&(_0x21fd3d+=_0x4e298f['offset']);if(config[_0x1d9703(0xee)]===_0x1d9703(0x7e)||config[_0x1d9703(0xee)]===_0x1d9703(0x14e))_0x282e12=_0x21fd3d*_0x4e298f[_0x1d9703(0x107)],_0x5354de=_0x21fd3d*_0x4e298f['usd'];else{if(config[_0x1d9703(0xee)]===_0x1d9703(0x11f)||config[_0x1d9703(0xee)]===_0x1d9703(0x170)||config[_0x1d9703(0xee)]===_0x1d9703(0xbb))_0x282e12=_0x21fd3d*_0x4e298f[_0x1d9703(0x107)]/_0x4e298f[_0x1d9703(0x94)],_0x5354de=_0x21fd3d;else config['basecoin']===_0x1d9703(0x18c)&&(_0x282e12=_0x21fd3d,_0x5354de=_0x21fd3d*_0x4e298f['usd']/_0x4e298f[_0x1d9703(0x107)]);}return[_0x21fd3d,_0x282e12,_0x5354de];}async function getStartingBalances(_0x213fa3,_0x14ac96=!![]){const _0x359618=_0x4bba6f;if(_0x213fa3[_0x359618(0x135)]!==0x0){const [_0x3a1cff,_0x25c5fd,_0x3f44ee]=getPerf(_0x213fa3[0x0],!![]);let _0x5a7bed=[];config[_0x359618(0x10e)]['forEach'](_0x327d80=>{const _0x2ebad0=_0x359618;let _0x54c851=0x0,_0xc4fa38;config[_0x2ebad0(0xea)]['forEach'](_0x5d9243=>{const _0x20ba96=_0x2ebad0;let _0x94083c=_0x5d9243[_0x20ba96(0x11a)]['find'](_0x403b89=>_0x403b89[_0x20ba96(0x17a)]==_0x327d80[_0x20ba96(0x17a)]);if(_0x94083c){_0x54c851+=_0x94083c[_0x20ba96(0x11d)];if(!_0xc4fa38)_0xc4fa38=_0x94083c[_0x20ba96(0x16e)];}}),_0x5a7bed[_0x2ebad0(0x8d)]({'coin':_0x327d80[_0x2ebad0(0x17a)],'number':_0x54c851,'initialprice':_0xc4fa38});});const _0x28ad65={'basecoin':_0x3a1cff,'eur':_0x25c5fd,'usd':_0x3f44ee,'coins':_0x5a7bed};if(_0x14ac96)proxyEmit(_0x359618(0x73),_0x28ad65);return _0x28ad65;}}function headlessMode(_0x5674a8){const _0x232c36=_0x4bba6f;let _0x32b6d5=_0x5674a8[_0x232c36(0x10e)],_0x1bb9fe=_0x5674a8[_0x232c36(0xd8)],_0xbe52d1=[];for(let _0x58eafc of _0x32b6d5){if(_0x58eafc[_0x232c36(0x17a)]!=config['basecoin']){if(_0x58eafc['delta']>=_0x1bb9fe/0x64){if(_0x58eafc[_0x232c36(0xbd)])_0xbe52d1[_0x232c36(0x8d)](_0x58eafc);}else{if(_0x58eafc['delta']<=-_0x1bb9fe/0x64){if(_0x58eafc[_0x232c36(0xbd)])_0xbe52d1[_0x232c36(0x8d)](_0x58eafc);}}}}_0xbe52d1[_0x232c36(0x135)]>0x0&&placeOrder(_0xbe52d1);}function notifyBalance(_0x1ae10c){const _0x3955e9=_0x4bba6f;let _0x3ca741=_0x1ae10c['portfolio'],_0x11db26=_0x1ae10c[_0x3955e9(0xd8)],_0x1fddd3=[];for(let _0x12ad33 of _0x3ca741){if(_0x12ad33['coin']!=config['basecoin']){if(_0x12ad33[_0x3955e9(0x90)]>=_0x11db26/0x64){if(_0x12ad33['valid'])_0x1fddd3[_0x3955e9(0x8d)](_0x12ad33);}else{if(_0x12ad33[_0x3955e9(0x90)]<=-_0x11db26/0x64){if(_0x12ad33[_0x3955e9(0xbd)])_0x1fddd3[_0x3955e9(0x8d)](_0x12ad33);}}}}if(_0x1fddd3[_0x3955e9(0x135)]>0x0){let _0x13c701=_0x1fddd3[_0x3955e9(0x103)](_0x13ebab=>_0x13ebab[_0x3955e9(0x17a)]);_0x13c701[_0x3955e9(0x10b)]();let _0x207925=_0x13c701[_0x3955e9(0x133)](',\x20');if(lastCoinsToBalance!==_0x207925)logHistory('success',_0x3955e9(0x13b)+_0x207925);lastCoinsToBalance=_0x207925;}}function symbolToCoin(_0x333d51){const _0x425b14=_0x4bba6f;let _0x330ff2;if(_0x333d51['includes']('/'+config[_0x425b14(0xee)]))_0x330ff2=_0x333d51[_0x425b14(0xb8)]('/'+config[_0x425b14(0xee)],'');if(_0x333d51[_0x425b14(0x6c)](config[_0x425b14(0xee)]+'/'))_0x330ff2=_0x333d51['replace'](config['basecoin']+'/','');return _0x330ff2;}async function validateOrders(_0x308189){const _0x398aa=_0x4bba6f;if(_0x308189)validateOrdersState=_0x308189;let _0x25dfc7=[],_0x686cdd=config['ordertype']==_0x398aa(0xe7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x398aa(0x195)](_0x36ef49=>{const _0x36292c=_0x398aa;let _0x15d48e=![];if(_0x36ef49[_0x36292c(0xa9)]>0x0)_0x15d48e=!![];else{let _0x15e653=previousCoins[_0x36292c(0x9f)](_0x5331a8=>_0x5331a8[_0x36292c(0x17a)]==symbolToCoin(_0x36ef49['symbol'])),_0x5e2b82=currentCoins['find'](_0x20c6db=>_0x20c6db[_0x36292c(0x17a)]==symbolToCoin(_0x36ef49[_0x36292c(0x79)])),_0x2811ec,_0x55ba37;_0x36ef49[_0x36292c(0x144)]=='buy'&&!_0x36ef49['reverse']||_0x36ef49['side']==_0x36292c(0x17e)&&_0x36ef49[_0x36292c(0xcf)]?(_0x2811ec=_0x15e653[_0x36292c(0x11d)]+0.9*_0x36ef49[_0x36292c(0xa9)],_0x55ba37=_0x15e653[_0x36292c(0x11d)]+1.1*_0x36ef49[_0x36292c(0xa9)]):(_0x2811ec=_0x15e653[_0x36292c(0x11d)]-1.1*_0x36ef49[_0x36292c(0xa9)],_0x55ba37=_0x15e653[_0x36292c(0x11d)]-0.9*_0x36ef49['filled']),_0x15d48e=_0x36ef49[_0x36292c(0xa9)]!=0x0&&_0x5e2b82[_0x36292c(0x11d)]>=_0x2811ec&&_0x5e2b82[_0x36292c(0x11d)]<=_0x55ba37,_0x15d48e&&(_0x5e2b82['order']=![]);}_0x25dfc7[_0x36292c(0x8d)](_0x15d48e);if(_0x15d48e&&config['ordertype']!=_0x36292c(0xe7)){if(_0x36ef49[_0x36292c(0xcf)])logHistory(_0x36292c(0xbe),'Order\x20filled:\x20'+_0x36ef49[_0x36292c(0x79)]+'\x20'+_0x36ef49[_0x36292c(0x144)]+'\x20#'+formatResult(_0x36ef49[_0x36292c(0xa9)]/_0x36ef49[_0x36292c(0x16e)],0x8)+'\x20@'+formatResult(_0x36ef49['price'],0x8));else logHistory(_0x36292c(0xbe),_0x36292c(0x175)+_0x36ef49[_0x36292c(0x79)]+'\x20'+_0x36ef49[_0x36292c(0x144)]+'\x20#'+formatResult(_0x36ef49[_0x36292c(0xa9)],0x8)+'\x20@'+formatResult(_0x36ef49[_0x36292c(0x16e)],0x8));}}),_0x25dfc7[_0x398aa(0x195)]((_0x3d11d3,_0x2e54f2)=>{if(_0x3d11d3)lastOrders['splice'](_0x2e54f2,0x1);});const _0x9523bc=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x398aa(0xe2))validateOrdersState=_0x398aa(0x99),_0x25dfc7[_0x398aa(0x6c)](![])?config[_0x398aa(0xe5)]==_0x398aa(0xe7)?logHistory('error',_0x398aa(0xad)):logHistory(_0x398aa(0x150),_0x398aa(0x7a)):lockOrders=![];else{if(validateOrdersState==_0x398aa(0x99)){if(_0x25dfc7['includes'](![])){}else lockOrders=![],config['ordertype']==_0x398aa(0xe7)?logHistory(_0x398aa(0x154),_0x398aa(0x164)+_0x9523bc):logHistory(_0x398aa(0x154),_0x398aa(0xc9)+_0x9523bc);}else{if(validateOrdersState==_0x398aa(0xc3))lockOrders=![],_0x25dfc7[_0x398aa(0x6c)](![])?config['ordertype']==_0x398aa(0xe7)?logHistory('success',_0x398aa(0x116)+Math[_0x398aa(0x10d)](_0x686cdd*validateOrderInterval/0xea60)+_0x398aa(0xc6)+_0x9523bc):(await cancelOrders(),logHistory(_0x398aa(0x154),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x686cdd*validateOrderInterval/0xea60)+_0x398aa(0xc6)+_0x9523bc)):logHistory(_0x398aa(0x154),_0x398aa(0x186)+_0x9523bc),currentCoins=await getCoins();else{if(validateOrdersState==_0x398aa(0x89)){lockOrders=![];if(config['ordertype']!=_0x398aa(0xe7))logHistory(_0x398aa(0x154),_0x398aa(0x186)+_0x9523bc);}}}}}async function cancelOrders(){const _0x2eb820=_0x4bba6f;lastOrders[_0x2eb820(0x195)](async _0x2dd3d7=>{const _0x3bcdf7=_0x2eb820;try{const _0x43223e=await exchange[_0x3bcdf7(0x137)](_0x2dd3d7[_0x3bcdf7(0x171)],_0x2dd3d7['symbol']);}catch(_0x62e0e9){if(_0x62e0e9[_0x3bcdf7(0xe9)]()[_0x3bcdf7(0x6c)](_0x3bcdf7(0x15f))){}else await handleError(_0x62e0e9,_0x3bcdf7(0x1a0));}});}async function resetCoinResults(){const _0x1537a3=_0x4bba6f;dbCoinResults[_0x1537a3(0xeb)](_0x1537a3(0x98))['remove']()[_0x1537a3(0x68)]();let _0x55317e=await getStartingBalances(getNormalizedPerformance(),![]);_0x55317e[_0x1537a3(0x98)]['forEach'](_0x319d6d=>{const _0x3b5825=_0x1537a3;if(_0x319d6d['coin']!=config['basecoin']){let _0xb18dad={'coin':_0x319d6d['coin'],'number':_0x319d6d[_0x3b5825(0x11d)],'breakeven':formatResult(_0x319d6d['initialprice'],0x8),'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x3b5825(0x98))['push'](_0xb18dad)['write']();}});}async function updateCoinResults(_0x59f87c){const _0x41f6b2=_0x4bba6f;let _0x43be02,_0x489231,_0x36e910,_0xab9afa,_0x3eb85d,_0x378fc2;console[_0x41f6b2(0x147)](_0x41f6b2(0x15c),_0x59f87c);let _0x87ec1e=dbCoinResults[_0x41f6b2(0xeb)](_0x41f6b2(0x98))[_0x41f6b2(0x9f)]({'coin':_0x59f87c[_0x41f6b2(0x17a)]})[_0x41f6b2(0x12f)]();if(!_0x87ec1e)return;if(_0x59f87c[_0x41f6b2(0x12e)]&&_0x59f87c['fee']['currency']==config[_0x41f6b2(0xee)])_0x43be02=_0x59f87c[_0x41f6b2(0x12e)]['cost'];else{if(_0x59f87c[_0x41f6b2(0x12e)]&&_0x59f87c[_0x41f6b2(0x12e)]['currency']==_0x41f6b2(0x139))_0x43be02=_0x59f87c[_0x41f6b2(0x12e)][_0x41f6b2(0xa6)]*global['ticker']['BNB'+config[_0x41f6b2(0xee)]];else _0x43be02=0.001*_0x59f87c[_0x41f6b2(0xa9)];}_0x59f87c[_0x41f6b2(0xcf)]&&(_0x378fc2={'coin':_0x59f87c[_0x41f6b2(0x17a)],'symbol':_0x59f87c[_0x41f6b2(0x79)],'filled':_0x59f87c[_0x41f6b2(0xa9)]*_0x59f87c['price'],'side':_0x59f87c[_0x41f6b2(0x144)]==_0x41f6b2(0x17e)?_0x41f6b2(0x127):_0x41f6b2(0x17e),'price':0x1/_0x59f87c[_0x41f6b2(0x16e)]},_0x59f87c={..._0x378fc2});_0x59f87c[_0x41f6b2(0x144)]=='buy'?_0x36e910=(_0x87ec1e['breakeven']*_0x87ec1e['number']+_0x59f87c[_0x41f6b2(0x16e)]*_0x59f87c[_0x41f6b2(0xa9)])/(_0x87ec1e['number']+_0x59f87c['filled']):_0x36e910=(_0x87ec1e[_0x41f6b2(0x151)]*_0x87ec1e['number']-_0x59f87c[_0x41f6b2(0x16e)]*_0x59f87c[_0x41f6b2(0xa9)])/(_0x87ec1e[_0x41f6b2(0x11d)]-_0x59f87c[_0x41f6b2(0xa9)]);_0x59f87c[_0x41f6b2(0x144)]==_0x41f6b2(0x127)?_0xab9afa=_0x87ec1e[_0x41f6b2(0x111)]:_0xab9afa=_0x87ec1e[_0x41f6b2(0x111)]+(_0x59f87c[_0x41f6b2(0x16e)]-_0x87ec1e[_0x41f6b2(0x151)])*_0x59f87c[_0x41f6b2(0xa9)];const _0x5316e9=currentCoins['find'](_0x39d854=>_0x39d854[_0x41f6b2(0x17a)]==_0x59f87c[_0x41f6b2(0x17a)]);_0x489231=_0x5316e9[_0x41f6b2(0x11d)],_0x3eb85d=(_0x59f87c[_0x41f6b2(0x16e)]-_0x36e910)*_0x489231;let _0x39b3e4={'coin':_0x59f87c[_0x41f6b2(0x17a)],'number':_0x489231,'breakeven':formatResult(_0x36e910,0x8),'realized':formatResult(_0xab9afa,0x8),'unrealized':formatResult(_0x3eb85d,0x8),'fees':formatResult(_0x87ec1e[_0x41f6b2(0xef)]+_0x43be02,0x8),'sells':_0x59f87c['side']=='sell'?_0x87ec1e[_0x41f6b2(0x19e)]+0x1:_0x87ec1e[_0x41f6b2(0x19e)],'buys':_0x59f87c[_0x41f6b2(0x144)]==_0x41f6b2(0x127)?_0x87ec1e[_0x41f6b2(0x1a3)]+0x1:_0x87ec1e['buys']};dbCoinResults['get'](_0x41f6b2(0x98))[_0x41f6b2(0x9f)]({'coin':_0x59f87c[_0x41f6b2(0x17a)]})[_0x41f6b2(0xb9)](_0x39b3e4)[_0x41f6b2(0x68)]();if(_0x59f87c[_0x41f6b2(0x12e)]&&_0x59f87c['fee'][_0x41f6b2(0xb5)]==_0x41f6b2(0x139)){const _0x42706a=currentCoins['find'](_0x493049=>_0x493049['coin']==_0x41f6b2(0x139));_0x489231=_0x42706a['number'];let _0x1699d3=dbCoinResults[_0x41f6b2(0xeb)]('coins')['find']({'coin':_0x41f6b2(0x139)})[_0x41f6b2(0x12f)]();_0x39b3e4={..._0x1699d3,'number':_0x489231},dbCoinResults[_0x41f6b2(0xeb)]('coins')[_0x41f6b2(0x9f)]({'coin':_0x41f6b2(0x139)})[_0x41f6b2(0xb9)](_0x39b3e4)[_0x41f6b2(0x68)]();}}async function placeOrder(_0x118038){const _0xb79f05=_0x4bba6f,_0x419b13=config[_0xb79f05(0xe5)]=='market'?_0xb79f05(0xe7):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0xb79f05(0x123)](JSON[_0xb79f05(0x197)](currentCoins));for(const _0x523454 of _0x118038){let _0x16b34d,_0x57cd9a,_0x266ba8,_0x1526bb,_0x1cf836,_0x2a0b3a=_0x523454['symbol'];try{const _0x4480af=await exchange[_0xb79f05(0x128)]([_0x2a0b3a]),_0x1ddb24=_0x4480af[_0x2a0b3a];_0x16b34d=_0x523454['reverse']?0x1/_0x523454[_0xb79f05(0xf2)]:_0x523454['last'],_0x57cd9a=_0x1ddb24[_0xb79f05(0xe0)],_0x266ba8=_0x1ddb24[_0xb79f05(0x76)];_0x523454[_0xb79f05(0xcf)]?(_0x1526bb=_0x523454['side']=='buy'?'sell':_0xb79f05(0x127),_0x1cf836=Math[_0xb79f05(0x12d)](_0x523454[_0xb79f05(0x119)])/_0x16b34d):(_0x1526bb=_0x523454['side'],_0x1cf836=Math[_0xb79f05(0x12d)](_0x523454[_0xb79f05(0x119)]));_0x419b13==_0xb79f05(0xb1)&&(config[_0xb79f05(0xe5)]==_0xb79f05(0xfd)&&(_0x16b34d=_0x1526bb==_0xb79f05(0x127)?_0x57cd9a:_0x266ba8),config[_0xb79f05(0xe5)]==_0xb79f05(0x19f)&&(_0x16b34d=_0x1526bb==_0xb79f05(0x127)?_0x266ba8:_0x57cd9a));_0x1cf836=formatResult(_0x1cf836,0x8),_0x16b34d=formatResult(_0x16b34d,0x8);const _0x313d93=await exchange[_0xb79f05(0x9a)](_0x2a0b3a,_0x419b13,_0x1526bb,_0x1cf836,_0x16b34d);lastOrders['push']({'orderId':_0x313d93['id'],'symbol':_0x2a0b3a,'coin':_0x523454[_0xb79f05(0x17a)],'side':_0x1526bb,'reverse':_0x523454['reverse'],'amount':_0x523454[_0xb79f05(0xcf)]?_0x313d93[_0xb79f05(0xa0)]*_0x313d93[_0xb79f05(0x16e)]:_0x313d93['amount'],'filled':0x0,'price':_0x313d93[_0xb79f05(0x16e)],'fee':_0x313d93[_0xb79f05(0x12e)]});const _0x3d3a3c=_0x1526bb==_0xb79f05(0x17e)?config[_0xb79f05(0x13d)]?String[_0xb79f05(0xc0)]('0x'+config['emojisell'])+'\x20':'':config[_0xb79f05(0x198)]?String[_0xb79f05(0xc0)]('0x'+config[_0xb79f05(0x198)])+'\x20':'',_0x54ffad=_0x419b13==_0xb79f05(0xe7)?_0xb79f05(0x152):config['ordertype']=='limit-high'?_0xb79f05(0xa4):_0xb79f05(0x189);if(_0x419b13==_0xb79f05(0xe7))logHistory(_0xb79f05(0xbe),''+_0x3d3a3c+_0x54ffad+_0xb79f05(0x108)+_0x2a0b3a+'\x20'+_0x1526bb+'\x20#'+formatResult(_0x313d93[_0xb79f05(0xa9)],0x8)+'\x20@'+formatResult(_0x313d93['price'],0x8));else logHistory('order',''+_0x3d3a3c+_0x54ffad+_0xb79f05(0x108)+_0x2a0b3a+'\x20'+_0x1526bb+'\x20#'+formatResult(_0x313d93['amount'],0x8)+'\x20@'+formatResult(_0x313d93[_0xb79f05(0x16e)],0x8));let _0x24f796=currentCoins[_0xb79f05(0x9f)](_0x35ac31=>_0x35ac31[_0xb79f05(0x17a)]==_0x523454[_0xb79f05(0x17a)]);_0x24f796[_0xb79f05(0xbe)]=!![];if(config['cooldown']!=0x0){let _0x1318b8=null;if(cooldownTracker[_0xb79f05(0x135)]==config[_0xb79f05(0x9b)]-0x1)_0x1318b8=cooldownTracker[_0xb79f05(0x110)]();const _0x40fd0f=getTimeStamp();cooldownTracker['push'](_0x40fd0f);if(_0x1318b8){const _0x4a4220=fns[_0xb79f05(0x199)](new Date(_0x40fd0f),new Date(_0x1318b8));if(_0x4a4220<cooldownInterval){logHistory(_0xb79f05(0x150),_0xb79f05(0x19a)+config[_0xb79f05(0x9b)]+_0xb79f05(0xe6)+cooldownInterval/0x3c+_0xb79f05(0x125)+cooldownPeriod/(0xe10*0x3e8)+_0xb79f05(0x10f)),coolingDown=!![];break;}}}}catch(_0x347faa){if(_0x347faa[_0xb79f05(0xe9)]()[_0xb79f05(0x6c)]('MIN_NOTIONAL'))logHistory(_0xb79f05(0x150),_0xb79f05(0x14a)+_0x2a0b3a);else{if(_0x347faa[_0xb79f05(0xe9)]()['includes'](_0xb79f05(0xcb)))logHistory('error',_0xb79f05(0xf8)+_0x2a0b3a);else await handleError(_0x347faa,'placeOrder()',_0x2a0b3a);}}}if(lastOrders[_0xb79f05(0x135)]!=0x0){lockOrders=!![],validateOrdersState=_0xb79f05(0xe2);const _0x3027a6=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x142e84=_0xb79f05;validateOrders(_0x142e84(0xc3));},_0x3027a6);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xb79f05(0x154),_0xb79f05(0xba)));}else{if(coolingDown)!config['headless']&&logHistory(_0xb79f05(0x150),_0xb79f05(0xd1));else lockOrders&&(!config[_0xb79f05(0x188)]&&(config[_0xb79f05(0xe5)]=='market'?logHistory(_0xb79f05(0x150),_0xb79f05(0x84)):logHistory(_0xb79f05(0x150),_0xb79f05(0x16f))));}}function logHistory(_0x3bfec5,_0xb787b6,_0x21e344=''){const _0x54310d=_0x4bba6f;let _0x520dc1={'time':getTimeStamp(),'type':_0x3bfec5,'event':_0xb787b6};dbLogs[_0x54310d(0xeb)](_0x54310d(0xf9))[_0x54310d(0x8d)](_0x520dc1)[_0x54310d(0x68)]();if(_0x21e344=='')_0x21e344=_0xb787b6;proxyEmit(_0x54310d(0x17c),{'log':_0x520dc1,'summary':_0x21e344}),process[_0x54310d(0xbf)]({'telegram':{..._0x520dc1,'botname':config['botname'],'showname':config[_0x54310d(0xf5)]}},_0x399f68=>{}),logging(''+_0x520dc1['event']);}function _0x1acf(){const _0x250366=['userData','getFullYear','storeConfiguration','reconnected','coinamount','\x20|\x20','HOT/BTC','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','USDT','orderId','./version.json','set','distribution','Order\x20filled:\x20','keys','starttime','cancel','starting-balance-','coin','lowdb','event','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','sell','enabled','timeshift','limits','exit','timestamp','Unknown\x20error\x20occured','startdate','No\x20more\x20open\x20orders\x20-\x20','getMinutes','headless','Limit\x20(low-margin)','fetchOHLCV','getDate','EUR','getSeconds','add','datetime','85514ItdPsi','reduce','performance','configuration','args','forEach','bb-settings.json','stringify','emojibuy','differenceInSeconds','Executed\x20','close','InsufficientFunds','balances','sells','limit-low','cancelOrders()','constructor','apply','buys','write','DDoSProtection','RSA-OAEP','splice','includes','2.4.4','Binance\x20API\x20blocked','./config/','getCoins()','-performance.json','isArray','starting-balances','time','getTime','ask','Crypt','target','symbol','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','running','getHours','WebSockets(','BTC','Binance\x20not\x20responding','\x20>\x20','toggleBotMode','apiSecret','5434488fZvBjR','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','emitHistory','startnumber','loadMarkets','API\x20or\x20clock\x20sync\x20issue','no\x20open\x20orders','ccxt','writeFile','argv','push','getStartingBalances','coin-loading-progress','delta','message','InvalidNonce','API-key\x20format\x20invalid','usd','symbols','3970014vtWlxM','10pwBuYv','coins','ongoing','createOrder','cooldown','slice','privateKey','\x20minutes','find','amount','priceChangePercent','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','1017015Tdtbxn','Limit\x20(high-margin)','Order:\x20','cost','existsSync','remainingSymbols','filled','startprice','toFixed','.json','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','split','kline','BNB/','limit','14jXcszB','getFiat()','search','currency','findIndex','timeout','replace','assign','Cooldown\x20ended\x20-\x20balancing\x20resumed','USDC','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','valid','order','send','fromCodePoint','orderStatus','yyyy/MM/dd\x20HH:mm:ss','final','yyyy-MM-dd\x27T\x27HH:mm:ss','configuration-stored','\x20minutes\x20-\x20','remove','AuthenticationError','Order(s)\x20filled\x20-\x20','\x20|\x20Binance\x20API\x20secret\x20invalid','Invalid\x20quantity','\x20|\x20Error\x20details:\x20','lowdb/adapters/FileSync','outboundAccountPosition','reverse','min','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ticker','getPortfolio',':\x20Bot\x20','format','data','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','threshold','exchange','function','getMonth','/USDT','padStart','entries','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','bid','Binance\x20not\x20available\x20(1)','initial','\x20|\x20Binance\x20API\x20key\x20invalid','\x20has\x20a\x2024h\x20drop\x20of\x20','ordertype','\x20orders\x20in\x20less\x20than\x20','market','eventTime','toString','liquidity','get','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','6094385QfcfsZ','basecoin','fees','\x20-\x20','/backup/','last','recreate','date','showname','milliseconds','Bot\x20','Order\x20amount\x20is\x20invalid:\x20','logs','wss://stream.binance.us:9443','eventType','sortBy','limit-high','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','event-history','placeOrder','mkdirSync','DAI/','map',')\x20|\x20Error\x20details:\x20','12ffFFqA','test','eur','\x20order:\x20','575154RhZEhS','-config.json','sort','has','round','portfolio','\x20hour','shift','realized','HOT/EUR','yyyy/MM/dd','change','change24h','Order(s)\x20not\x20validated\x20after\x20','parseISO','bot-','trade','changes','XEM/BUSD','restart','number','cumulativeQuoteAssetTransactedQty','BUSD','recreateHistory()','cloneDeep','differenceInCalendarDays','parse','type','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','page','buy','fetchTickers','closeWs','initws()','36HtBlUJ','decrypt','abs','fee','value','max','Binance\x20not\x20available\x20(2)','Pausing\x20for\x20','join','toLowerCase','length','apiKey','cancelOrder','672678vkavux','BNB','binance','Manual\x20balancing\x20required:\x20','botname','emojisell','spot','storeHeadless','bot','-events.json','fetchOpenOrders','settings','side','accumulatedQuantity','2.3.5','log','bb-secure.json','************','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','RequestTimeout','sha256','30xTnGXb','ETH','subscribeSpotUserDataStream','error','breakeven','Market',',\x20must\x20be\x20a\x203\x20digit\x20number','success','defaults','excluded','(((.+)+)+)+$','wss://stream.binance.com:9443','cancelLoading','YOYOW/','version','update\x20results:','Binance\x20API\x20key\x20is\x20invalid','kill','OrderNotFound','commissionAsset','offset','secure','NANO/','Order(s)\x20validated\x20-\x20','filter','binanceus'];_0x1acf=function(){return _0x250366;};return _0x1acf();}function emitHistory(_0x42c52a={}){const _0x4712b9=_0x4bba6f;Object[_0x4712b9(0x176)](_0x42c52a)[_0x4712b9(0x135)]==0x0&&(_0x42c52a={'type':[_0x4712b9(0xbe),_0x4712b9(0x17c)],'event':'','page':0x1});if(_0x42c52a['type']['includes'](_0x4712b9(0x17c)))_0x42c52a[_0x4712b9(0x124)][_0x4712b9(0x6b)](_0x42c52a[_0x4712b9(0x124)]['indexOf'](_0x4712b9(0x17c)),0x1,_0x4712b9(0x150),'success');if(dbLogs[_0x4712b9(0x10c)]('logs')[_0x4712b9(0x12f)]()){let _0x209883=dbLogs[_0x4712b9(0xeb)](_0x4712b9(0xf9))[_0x4712b9(0x165)](_0x37da87=>{const _0x70c9d8=_0x4712b9;if(_0x42c52a[_0x70c9d8(0x124)][_0x70c9d8(0x135)]==0x0)return![];else return _0x42c52a[_0x70c9d8(0x124)][_0x70c9d8(0x6c)](_0x37da87[_0x70c9d8(0x124)]);})['filter'](_0x2abae7=>{const _0x28827f=_0x4712b9;if(_0x42c52a[_0x28827f(0x17c)]=='')return!![];else return _0x2abae7[_0x28827f(0x17c)][_0x28827f(0x134)]()[_0x28827f(0x6c)](_0x42c52a['event'][_0x28827f(0x134)]());})[_0x4712b9(0xfc)](_0x4712b9(0x74)),_0x432556=_0x209883[_0x4712b9(0x12f)]()['length'];_0x209883=_0x209883[_0x4712b9(0xcf)]()[_0x4712b9(0x9c)]((_0x42c52a[_0x4712b9(0x126)]-0x1)*logPageSize,_0x42c52a['page']*logPageSize-0x1)[_0x4712b9(0xcf)]()[_0x4712b9(0x12f)](),proxyEmit(_0x4712b9(0xff),{'logs':_0x209883,'total':_0x432556});}else proxyEmit(_0x4712b9(0xff),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x47a06a){const _0xf2bcce=_0x4bba6f;if(dbLogs['has']('logs')[_0xf2bcce(0x12f)]()){const _0x339e9a=dbLogs['get'](_0xf2bcce(0xf9))[_0xf2bcce(0xfc)](_0xf2bcce(0x74))['filter'](_0x261c4d=>{const _0x4aa75f=_0xf2bcce;return _0x261c4d[_0x4aa75f(0x124)]=='order';})['value']();dbLogs[_0xf2bcce(0xeb)](_0xf2bcce(0xf9))[_0xf2bcce(0xc7)]()[_0xf2bcce(0x68)](),dbLogs[_0xf2bcce(0xeb)](_0xf2bcce(0xf9))[_0xf2bcce(0xb9)](_0x339e9a)['write'](),emitHistory(_0x47a06a);}}async function pauseBot(_0x45f4f2=''){const _0x1b0632=_0x4bba6f,_0xe0c823=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x1b0632(0x75)](),consecutivePauses=0x1;else{if(_0xe0c823-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process['send']({'stop':'restart'},_0x5f4cbb=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x1b0632(0x75)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x45f4f2)_0x45f4f2+=_0x1b0632(0x16c);logHistory('error',_0x45f4f2+_0x1b0632(0x132)+pauseBotInterval/0xea60+_0x1b0632(0x9e)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x20faf3=_0x4bba6f;process['send']({'stop':_0x20faf3(0x15e)},_0x69af2f=>{}),await sleep(0x7d0);}async function handleError(_0x43d025,_0x8f835b,_0x2998e1=''){const _0x38c128=_0x4bba6f;if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)](_0x38c128(0x69)))await pauseBot(_0x38c128(0x6e));else{if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)]('ExchangeNotAvailable'))await pauseBot(_0x38c128(0x131));else{if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)](_0x38c128(0x14b)))await pauseBot(_0x38c128(0x7f));else{if(_0x43d025[_0x38c128(0xe9)]()['includes']('API-key\x20format\x20invalid'))logHistory('error',_0x8f835b+_0x38c128(0xe3)),logHistory(_0x38c128(0x150),_0x38c128(0xfe)),await killBot();else{if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)](_0x38c128(0xc8)))logHistory('error',_0x8f835b+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x38c128(0x150),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x8f835b+_0x38c128(0xca)),logHistory('error',_0x38c128(0xfe)),await killBot();else{if(_0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)](_0x38c128(0xd7)))logHistory(_0x38c128(0x150),_0x8f835b+_0x38c128(0xbc)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x43d025['toString']()['includes'](_0x38c128(0x92)))await pauseBot(_0x38c128(0x88)),process[_0x38c128(0xbf)]({'stop':_0x38c128(0x11c)},_0xfb884f=>{});else _0x43d025[_0x38c128(0xe9)]()[_0x38c128(0x6c)](_0x38c128(0x19c))?logHistory('error',_0x8f835b+_0x38c128(0xa2)+_0x2998e1):(logging(_0x8f835b+_0x38c128(0xcc),_0x43d025),await pauseBot(_0x38c128(0x184)));}}}}}}}}function formatResult(_0x3ae330,_0x2b28c1){const _0x11fe3f=_0x4bba6f;return _0x3ae330?parseFloat(_0x3ae330[_0x11fe3f(0xab)](_0x2b28c1)):null;}function logging(_0x41cdd0,_0x3db9ae=''){const _0xa98868=_0x4bba6f;if(config[_0xa98868(0xf5)])console['log'](getTimeStamp()+':\x20'+config['botname']+_0xa98868(0x80)+_0x41cdd0,_0x3db9ae);else console[_0xa98868(0x147)](getTimeStamp()+_0xa98868(0xd4)+botID+_0xa98868(0x80)+_0x41cdd0,_0x3db9ae);}function getServerTime(){const _0x5a2e7b=_0x4bba6f,_0x339f01=new Date();return _0x339f01[_0x5a2e7b(0x168)]()+'/'+(_0x339f01[_0x5a2e7b(0xdb)]()+0x1)[_0x5a2e7b(0xe9)]()[_0x5a2e7b(0xdd)](0x2,'0')+'/'+_0x339f01[_0x5a2e7b(0x18b)]()[_0x5a2e7b(0xe9)]()[_0x5a2e7b(0xdd)](0x2,'0')+'\x20'+_0x339f01[_0x5a2e7b(0x7c)]()['toString']()[_0x5a2e7b(0xdd)](0x2,'0')+':'+_0x339f01[_0x5a2e7b(0x187)]()[_0x5a2e7b(0xe9)]()[_0x5a2e7b(0xdd)](0x2,'0')+':'+_0x339f01['getSeconds']()[_0x5a2e7b(0xe9)]()[_0x5a2e7b(0xdd)](0x2,'0');}function getTimeStamp(){const _0x13a48e=_0x4bba6f,_0x376d24=shiftedTime();return _0x376d24['getFullYear']()+'/'+(_0x376d24[_0x13a48e(0xdb)]()+0x1)[_0x13a48e(0xe9)]()[_0x13a48e(0xdd)](0x2,'0')+'/'+_0x376d24[_0x13a48e(0x18b)]()[_0x13a48e(0xe9)]()['padStart'](0x2,'0')+'\x20'+_0x376d24['getHours']()[_0x13a48e(0xe9)]()[_0x13a48e(0xdd)](0x2,'0')+':'+_0x376d24[_0x13a48e(0x187)]()[_0x13a48e(0xe9)]()[_0x13a48e(0xdd)](0x2,'0')+':'+_0x376d24[_0x13a48e(0x18d)]()['toString']()[_0x13a48e(0xdd)](0x2,'0');}function getDate(){const _0x22fda6=_0x4bba6f,_0xb38247=shiftedTime();return _0xb38247[_0x22fda6(0x168)]()+'/'+(_0xb38247[_0x22fda6(0xdb)]()+0x1)[_0x22fda6(0xe9)]()[_0x22fda6(0xdd)](0x2,'0')+'/'+_0xb38247[_0x22fda6(0x18b)]()[_0x22fda6(0xe9)]()['padStart'](0x2,'0');}function getHour(){const _0x5c5359=_0x4bba6f,_0x52d34b=shiftedTime();return _0x52d34b[_0x5c5359(0x7c)]()[_0x5c5359(0xe9)]()[_0x5c5359(0xdd)](0x2,'0');}function sleep(_0x52a632){return new Promise(_0x4bb96c=>setTimeout(_0x4bb96c,_0x52a632));}function shiftedTime(){const _0x4e998c=_0x4bba6f,_0x3cb8a3=new Date();let _0x3710e3=_0x3cb8a3;if(config&&config[_0x4e998c(0x180)]!==0x0)_0x3710e3=fns[_0x4e998c(0x18e)](_0x3cb8a3,{'hours':config['timeshift']});return _0x3710e3;}