const _0x309e6f=_0xea77;(function(_0x6e2c78,_0xeef75e){const _0x314f3c=_0xea77,_0x152dec=_0x6e2c78();while(!![]){try{const _0x39f5a1=parseInt(_0x314f3c(0x2f1))/0x1+parseInt(_0x314f3c(0x2d4))/0x2+parseInt(_0x314f3c(0x1b2))/0x3+-parseInt(_0x314f3c(0x301))/0x4+-parseInt(_0x314f3c(0x225))/0x5*(parseInt(_0x314f3c(0x169))/0x6)+parseInt(_0x314f3c(0x15c))/0x7+-parseInt(_0x314f3c(0x299))/0x8*(parseInt(_0x314f3c(0x27a))/0x9);if(_0x39f5a1===_0xeef75e)break;else _0x152dec['push'](_0x152dec['shift']());}catch(_0x13c45f){_0x152dec['push'](_0x152dec['shift']());}}}(_0x3c5e,0xc5793));const _0x35467c=function(){let _0x59ee08=!![];return function(_0x54f464,_0x2420b1){const _0x3cd3a6=_0x59ee08?function(){const _0x10ebb4=_0xea77;if(_0x2420b1){const _0x14aa1a=_0x2420b1[_0x10ebb4(0x1c7)](_0x54f464,arguments);return _0x2420b1=null,_0x14aa1a;}}:function(){};return _0x59ee08=![],_0x3cd3a6;};}(),_0x383196=_0x35467c(this,function(){const _0x4285a2=_0xea77;return _0x383196[_0x4285a2(0x17b)]()[_0x4285a2(0x1e0)](_0x4285a2(0x255))[_0x4285a2(0x17b)]()['constructor'](_0x383196)['search'](_0x4285a2(0x255));});_0x383196();'use strict';const ccxt=require(_0x309e6f(0x1ea)),low=require(_0x309e6f(0x295)),FileSync=require(_0x309e6f(0x283)),fs=require('fs'),fns=require(_0x309e6f(0x2e7)),forge=require('node-forge'),util=require(_0x309e6f(0x275)),argv=require(_0x309e6f(0x2c5))(process[_0x309e6f(0x297)][_0x309e6f(0x2ba)](0x2))[_0x309e6f(0x297)],path=require(_0x309e6f(0x143)),axios=require(_0x309e6f(0x257));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x309e6f(0x207),_0x309e6f(0x18f),'USDC',_0x309e6f(0x256)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x309e6f(0x29f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x309e6f(0x2b7)+pauseBotInterval/0xea60+_0x309e6f(0x2c3),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8;let enableFiatToggle;const serverversion=require(_0x309e6f(0x2a7))[_0x309e6f(0x1a2)],environment=require(_0x309e6f(0x2a7))[_0x309e6f(0x268)]||_0x309e6f(0x266),botID=process['argv'][0x2]||_0x309e6f(0x176),pattern=/^[0-9]{3}$/;!pattern[_0x309e6f(0x211)](botID)&&(console[_0x309e6f(0x210)](_0x309e6f(0x1ef)+botID+_0x309e6f(0x254)),killBot());const userID=process[_0x309e6f(0x297)][0x3]||'',configpath=userID?_0x309e6f(0x28c)+userID+'/':_0x309e6f(0x28c),logspath=userID?_0x309e6f(0x1bc)+userID+'/':_0x309e6f(0x1bc),loggerfile=fs[_0x309e6f(0x1af)](logspath+_0x309e6f(0x292),{'flags':'a'});!fs[_0x309e6f(0x2ff)](configpath)&&fs[_0x309e6f(0x249)](configpath);!fs['existsSync'](logspath)&&fs[_0x309e6f(0x249)](logspath);const configfile=configpath+_0x309e6f(0x2e1)+botID+_0x309e6f(0x15e),logfile=configpath+'bot-'+botID+_0x309e6f(0x1d6),performancefile=configpath+'bot-'+botID+_0x309e6f(0x194),coinresultsfile=configpath+_0x309e6f(0x2e1)+botID+_0x309e6f(0x236),settingsfile=configpath+_0x309e6f(0x23f),securefile=configpath+_0x309e6f(0x1ce),configbackuppath=configpath+_0x309e6f(0x1fd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x309e6f(0x1e2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x309e6f(0x1e2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x309e6f(0x2a9)]({'bot':[],'version':serverversion})[_0x309e6f(0x1e2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x309e6f(0x2a9)]({'coins':[],'version':serverversion})[_0x309e6f(0x1e2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x587fd8=>{const _0x149374=_0x309e6f;console[_0x149374(0x210)](_0x587fd8);},'simple':_0x5c4456=>{const _0x241b90=_0x309e6f;console[_0x241b90(0x210)](_0x5c4456),loggerfile['write'](util[_0x241b90(0x24f)](_0x5c4456)+'\x0a');},'full':async(_0x58e788,_0x5e81a6='')=>{const _0x540686=_0x309e6f;let _0x299486;if(config['showname'])_0x299486=getTimeStamp()+':\x20'+config[_0x540686(0x184)]+_0x540686(0x202)+_0x58e788;else _0x299486=getTimeStamp()+_0x540686(0x2e2)+botID+_0x540686(0x202)+_0x58e788;console[_0x540686(0x210)](_0x299486),loggerfile['write'](util[_0x540686(0x24f)](_0x299486)+'\x0a'),_0x5e81a6&&(console[_0x540686(0x210)](_0x5e81a6),loggerfile['write'](util[_0x540686(0x24f)](_0x5e81a6)+'\x0a'));},'debug':async(_0x5d59be,_0x51216c='')=>{const _0x612a28=_0x309e6f;let _0x4c6a13;if(config[_0x612a28(0x2a2)])_0x4c6a13=getTimeStamp()+':\x20'+config[_0x612a28(0x184)]+_0x612a28(0x151)+_0x5d59be;else _0x4c6a13=getTimeStamp()+':\x20Bot\x20'+botID+_0x612a28(0x151)+_0x5d59be;if(debugging)console[_0x612a28(0x210)](_0x4c6a13);loggerfile['write'](util[_0x612a28(0x24f)](_0x4c6a13)+'\x0a');if(_0x51216c){if(debugging)console['log'](_0x51216c);loggerfile[_0x612a28(0x1e2)](util[_0x612a28(0x24f)](_0x51216c)+'\x0a');}}};process['on']('uncaughtException',function(_0x2e778d){const _0x51549b=_0x309e6f;handleError(_0x2e778d,_0x51549b(0x161));});settings[_0x309e6f(0x1ee)]!=config[_0x309e6f(0x1ee)]&&updateTimeshift(settings[_0x309e6f(0x1ee)]);settings[_0x309e6f(0x14f)]!=config['onepagemode']&&updateOnepagemode(settings[_0x309e6f(0x14f)]);(settings[_0x309e6f(0x2a5)]&&!config['marketcapApi']||!settings[_0x309e6f(0x2a5)]&&config[_0x309e6f(0x2a5)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x309e6f(0x1a7)]({'started':_0x309e6f(0x173)},_0x266500=>{}),initializeProcessListeners();function proxyEmit(_0x258c2a,_0x597e0f=null){process['send']({'function':_0x258c2a,'args':_0x597e0f},_0x504640=>{});}function initializeProcessListeners(){const _0x122768=_0x309e6f;process['on'](_0x122768(0x2ed),_0x34ba11=>{const _0x599ce9=_0x122768;switch(Object[_0x599ce9(0x19b)](_0x34ba11)[0x0]){case _0x599ce9(0x1ee):_0x34ba11[_0x599ce9(0x1ee)]!=undefined&&(settings[_0x599ce9(0x1ee)]=_0x34ba11[_0x599ce9(0x1ee)],updateTimeshift(settings[_0x599ce9(0x1ee)]));break;case _0x599ce9(0x14f):_0x34ba11[_0x599ce9(0x14f)]!=undefined&&(settings[_0x599ce9(0x14f)]=_0x34ba11[_0x599ce9(0x14f)],updateOnepagemode(settings[_0x599ce9(0x14f)]));break;case _0x599ce9(0x2a5):_0x34ba11[_0x599ce9(0x2a5)]!=undefined&&(settings['marketcapApi']=_0x34ba11[_0x599ce9(0x2a5)],updateMarketcapApi(settings[_0x599ce9(0x2a5)]));break;case'bots':_0x34ba11['bots']!=undefined&&(bots=JSON[_0x599ce9(0x193)](_0x34ba11[_0x599ce9(0x261)]),proxyEmit('bots',bots));break;case _0x599ce9(0x163):switch(_0x34ba11['function']){case _0x599ce9(0x2a0):initclient();break;case _0x599ce9(0x1ae):toggleBotMode();break;case _0x599ce9(0x223):emitHistory(_0x34ba11[_0x599ce9(0x141)]);break;case _0x599ce9(0x1f8):deleteHistoryAlerts(_0x34ba11[_0x599ce9(0x141)]);break;case'getPortfolio':getPortfolio(_0x34ba11[_0x599ce9(0x141)]);break;case _0x599ce9(0x25d):storeConfiguration(_0x34ba11['args']);break;case _0x599ce9(0x2c4):storeHeadless(_0x34ba11[_0x599ce9(0x141)]);break;case _0x599ce9(0x2d5):storeFiat(_0x34ba11[_0x599ce9(0x141)]);break;case'resetHistory':resetHistory();break;case _0x599ce9(0x221):getStartingBalances(getNormalizedPerformance());break;case _0x599ce9(0x2fb):placeOrder(_0x34ba11[_0x599ce9(0x141)]);break;case _0x599ce9(0x2ee):cancelLoading();break;case _0x599ce9(0x26e):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x599ce9(0x245):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x27cfd4=![]){const _0x482de2=_0x309e6f;logger[_0x482de2(0x2fa)](_0x482de2(0x191)+(_0x27cfd4?_0x482de2(0x206):_0x482de2(0x24b))+'\x20|\x20exchange:\x20'+config[_0x482de2(0x240)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x27cfd4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x482de2(0x15f)]!=''&&config['apiKey']!=_0x482de2(0x16b)){loadingProgress=0x0;_0x27cfd4&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x482de2(0x1fc),emittedConfiguration()),initialPerformanceStored=![]);const _0x1f2c4e=await getCoins();[currentCoins,currentCoinsAll]=_0x1f2c4e,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x482de2(0x2f5)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x482de2(0x2fd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x10a1fe=![]){const _0x2403e9=_0x309e6f;logger[_0x2403e9(0x2fa)](_0x2403e9(0x230)+(_0x10a1fe?_0x2403e9(0x196):'complete')+_0x2403e9(0x2e9)+config[_0x2403e9(0x240)]);if(pidBalances)clearTimeout(pidBalances);if(_0x10a1fe){getBalances();return;}coinsLoaded=![];if(config[_0x2403e9(0x15f)]!=''&&config[_0x2403e9(0x15f)]!='***'){loadingProgress=0x1;const _0x29c5ba=await getCoins();[currentCoins,currentCoinsAll]=_0x29c5ba,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x2403e9(0x2fd)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3bb218){const _0x25e461=_0x309e6f;let _0x65ff60=![];if(_0x3bb218)_0x65ff60=!![];let _0x48b4ce;_0x65ff60?_0x48b4ce=_0x3bb218['map'](_0x389de9=>_0x389de9[_0x25e461(0x2ef)]):_0x48b4ce=currentCoinsAll[_0x25e461(0x1e1)](_0x37321a=>_0x37321a[_0x25e461(0x2ef)]);if(!config[_0x25e461(0x2a5)]||!_0x65ff60&&!config[_0x25e461(0x262)]||_0x48b4ce['length']==0x0)return;let _0x3c3d14=null;try{_0x3c3d14=await axios[_0x25e461(0x192)](_0x25e461(0x195),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x25e461(0x2a5)]},'params':{'symbol':_0x48b4ce[_0x25e461(0x17b)]()}});}catch(_0x46739f){_0x3c3d14=null,_0x46739f[_0x25e461(0x17b)]()[_0x25e461(0x1fa)](_0x25e461(0x289))?(config[_0x25e461(0x2a5)]=![],updateConfig(),proxyEmit(_0x25e461(0x1fc),emittedConfiguration()),logHistory(_0x25e461(0x27b),_0x25e461(0x25a))):(logHistory(_0x25e461(0x27b),_0x25e461(0x284)+schedulerInterval/(0x3c*0x3e8)+_0x25e461(0x2c3)),logger[_0x25e461(0x2fa)](_0x25e461(0x1e9),_0x46739f[_0x25e461(0x17b)]()+_0x25e461(0x2d8)+_0x46739f['code']));}if(_0x3c3d14){let _0x257c1d=0x0;const _0x2fe667=_0x3c3d14[_0x25e461(0x251)];_0x48b4ce[_0x25e461(0x1e6)](_0xb72373=>{const _0xea3ac=_0x25e461;if(_0x2fe667['data'][_0xb72373][0x0])_0x257c1d+=_0x2fe667[_0xea3ac(0x251)][_0xb72373][0x0][_0xea3ac(0x2ea)][_0xea3ac(0x1a5)][_0xea3ac(0x2f9)];}),_0x48b4ce[_0x25e461(0x1e6)](_0x516d5c=>{const _0x101c6d=_0x25e461,_0x259620=_0x2fe667['data'][_0x516d5c][0x0]?_0x2fe667[_0x101c6d(0x251)][_0x516d5c][0x0][_0x101c6d(0x2ea)][_0x101c6d(0x1a5)][_0x101c6d(0x2f9)]:0x0;if(_0x65ff60){const _0x385a33=_0x3bb218['find'](_0x28e085=>_0x28e085['coin']==_0x516d5c);_0x385a33&&(_0x385a33[_0x101c6d(0x145)]=_0x259620);}else{const _0x155620=currentCoins[_0x101c6d(0x260)](_0x290bc9=>_0x290bc9[_0x101c6d(0x2ef)]==_0x516d5c);_0x155620&&(_0x155620[_0x101c6d(0x145)]=_0x259620);const _0x440e83=currentCoinsAll[_0x101c6d(0x260)](_0x5a7f04=>_0x5a7f04['coin']==_0x516d5c);_0x440e83&&(_0x440e83[_0x101c6d(0x145)]=_0x259620);}}),!_0x65ff60&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x5ab684=_0x309e6f,_0x3436e5=0x2;let _0x158bde=0x0,_0x388662=0x0,_0x3f606a=0x0,_0x3b104a=0x0,_0x21d573=0x0;config[_0x5ab684(0x1a3)][_0x5ab684(0x1e6)](_0x2d0688=>{const _0x2934df=_0x5ab684;if(!_0x2d0688[_0x2934df(0x150)]){_0x3f606a++,_0x158bde+=_0x2d0688['slider'];if(_0x2d0688[_0x2934df(0x237)]===-0x1){_0x158bde++;const _0x19c13a=currentCoinsAll[_0x2934df(0x260)](_0x4a248b=>_0x4a248b[_0x2934df(0x2ef)]==_0x2d0688[_0x2934df(0x2ef)]);_0x19c13a&&(_0x3b104a+=_0x19c13a['marketcap'],_0x21d573+=Math[_0x2934df(0x1ad)](_0x19c13a[_0x2934df(0x145)]));}if(_0x2d0688['slider']!==-0x1)_0x388662++;}});let _0x53026f;const _0x547df2=0x64-_0x158bde,_0x3f4027=_0x3f606a-_0x388662;_0x53026f=_0x3f4027===0x0?_0x158bde:Math[_0x5ab684(0x1da)](0x64,_0x158bde),config['portfolio'][_0x5ab684(0x1e6)](_0x26a0f7=>{const _0x122999=_0x5ab684,_0x5cf12c=currentCoinsAll[_0x122999(0x260)](_0x23964a=>_0x23964a[_0x122999(0x2ef)]==_0x26a0f7[_0x122999(0x2ef)]);_0x5cf12c&&(_0x26a0f7[_0x122999(0x145)]=_0x5cf12c[_0x122999(0x145)]);if(!_0x26a0f7[_0x122999(0x150)]){if(_0x53026f<=0x64){if(_0x26a0f7[_0x122999(0x237)]===-0x1){if(_0x3b104a!==0x0&&config[_0x122999(0x262)]){if(_0x5cf12c){if(config[_0x122999(0x262)]=='marketcap')_0x26a0f7[_0x122999(0x22a)]=(_0x547df2/(_0x3b104a/_0x5cf12c[_0x122999(0x145)]))[_0x122999(0x1b7)](_0x3436e5);else config[_0x122999(0x262)]==_0x122999(0x242)&&(_0x26a0f7['distribution']=(_0x547df2/(_0x21d573/Math[_0x122999(0x1ad)](_0x5cf12c[_0x122999(0x145)])))[_0x122999(0x1b7)](_0x3436e5));}}}}}}),updateConfig();}function updateConfig(){const _0x37a8b0=_0x309e6f;let _0x757200=dbConfig[_0x37a8b0(0x192)]('bot')[_0x37a8b0(0x260)]({'botID':botID})[_0x37a8b0(0x2f7)]();_0x757200&&dbConfig['get'](_0x37a8b0(0x182))['find']({'botID':botID})[_0x37a8b0(0x285)](config)[_0x37a8b0(0x1e2)]();}function logMemory(){const _0x21dfcf=_0x309e6f;if(environment!=_0x21dfcf(0x2d0))return;const _0x405763=process[_0x21dfcf(0x26f)]()[_0x21dfcf(0x164)]/0x400/0x400;logger[_0x21dfcf(0x2fa)](_0x21dfcf(0x1ed)+process[_0x21dfcf(0x219)]+_0x21dfcf(0x244)+formatResult(_0x405763,0x1)+_0x21dfcf(0x293));}async function startScheduler(){const _0x2e164e=_0x309e6f,_0x285364=shiftedTime()[_0x2e164e(0x22b)]();getMarketCap(),_0x285364==0x1&&logMemory(),(_0x285364==0x2||_0x285364==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x53669c=![]){const _0x5bc78a=_0x309e6f;logger['debug'](_0x5bc78a(0x28b));if(!_0x53669c)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process['send']({'stop':_0x5bc78a(0x13b)},_0x45fc39=>{});}async function initExchange(_0xa70cbf=config[_0x309e6f(0x240)],_0x45a63f=config['apiKey'],_0x417acb=config[_0x309e6f(0x23c)],_0x2e50fa=config[_0x309e6f(0x273)]){const _0x2800bb=_0x309e6f;if(exchange){logger['debug'](_0x2800bb(0x1eb));return;}logger[_0x2800bb(0x2fa)](_0x2800bb(0x181));!supportedExchanges()['includes'](_0xa70cbf)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0xa70cbf+_0x2800bb(0x229)),killBot());const _0x56f272=ccxt[_0x2800bb(0x270)][_0xa70cbf['toLowerCase']()];exchange=new _0x56f272({'apiKey':_0x45a63f,'secret':_0x417acb,'options':{'defaultType':_0x2800bb(0x18c)}});if(_0x2e50fa)exchange['password']=_0x2e50fa;}function updateExchange(_0x138294,_0x4c668a,_0x525485=null){const _0x683ddb=_0x309e6f;exchange[_0x683ddb(0x15f)]=_0x138294,exchange[_0x683ddb(0x23c)]=_0x4c668a,exchange[_0x683ddb(0x273)]=_0x525485,logger[_0x683ddb(0x2fa)](_0x683ddb(0x271));}function setStableCoins(){const _0x47c461=_0x309e6f;let _0x8e7b79=config[_0x47c461(0x1c4)]==_0x47c461(0x16c)?_0x47c461(0x16c):config[_0x47c461(0x1c4)]==_0x47c461(0x1df)?_0x47c461(0x1df):'BTC',_0x2b7492=allSymbols[_0x47c461(0x1fa)](_0x8e7b79+_0x47c461(0x259))?_0x47c461(0x1a5):allSymbols[_0x47c461(0x1fa)](_0x8e7b79+'/USDT')?_0x47c461(0x18f):'EUR',_0x742c9a=allSymbols['includes'](_0x8e7b79+_0x47c461(0x267))?_0x47c461(0x21d):_0x2b7492;enableFiatToggle=!![],_0x2b7492=='EUR'&&(enableFiatToggle=![],storeFiat('EUR')),_0x742c9a!='EUR'&&(enableFiatToggle=![],storeFiat(_0x47c461(0x1a5))),stablecoins={'eur':{'coin':''+_0x8e7b79+_0x742c9a,'symbol':_0x8e7b79+'/'+_0x742c9a},'usd':{'coin':''+_0x8e7b79+_0x2b7492,'symbol':_0x8e7b79+'/'+_0x2b7492}};}async function initwsCcxt(){const _0x275b3c=_0x309e6f;initCycle++;const _0x52c420=initCycle;let _0x26b188=[];config[_0x275b3c(0x1a3)]['forEach'](_0x110869=>{const _0x2d635f=_0x275b3c;if(!_0x110869['excluded']&&_0x110869[_0x2d635f(0x2ef)]!=config[_0x2d635f(0x1c4)])_0x26b188[_0x2d635f(0x233)](_0x110869[_0x2d635f(0x26c)]);});if(!_0x26b188[_0x275b3c(0x1fa)](stablecoins[_0x275b3c(0x183)][_0x275b3c(0x26c)]))_0x26b188[_0x275b3c(0x233)](stablecoins[_0x275b3c(0x183)][_0x275b3c(0x26c)]);if(!_0x26b188[_0x275b3c(0x1fa)](stablecoins[_0x275b3c(0x252)][_0x275b3c(0x26c)]))_0x26b188[_0x275b3c(0x233)](stablecoins[_0x275b3c(0x252)][_0x275b3c(0x26c)]);if(config[_0x275b3c(0x240)][_0x275b3c(0x2bb)](_0x275b3c(0x2ab))&&config[_0x275b3c(0x1c4)]!=_0x275b3c(0x1df)){if(!_0x26b188[_0x275b3c(0x1fa)](_0x275b3c(0x2f0)+config['basecoin']))_0x26b188[_0x275b3c(0x233)](_0x275b3c(0x2f0)+config['basecoin']);}loadCoins(_0x26b188),_0x26b188=validateSymbols(_0x26b188);const _0x2c6f77=async _0x44517c=>{const _0x3eb873=_0x275b3c;let _0x1b78c8;try{const _0x466338=await getTickers(_0x44517c);Object[_0x3eb873(0x1fe)](_0x466338)[_0x3eb873(0x1e6)](_0x571e57=>{const _0x3d4303=_0x3eb873;_0x1b78c8=_0x571e57[0x1][_0x3d4303(0x26c)],gTicker[noslash(_0x1b78c8)]=_0x571e57[0x1][_0x3d4303(0x18b)],gChange[_0x1b78c8]=_0x571e57[0x1][_0x3d4303(0x2ec)];});}catch(_0x3db750){await handleError(_0x3db750,_0x3eb873(0x1f4),_0x1b78c8);}},_0x288af8=async _0x2eb6a0=>{const _0x4b6697=_0x275b3c;while(initCycle==_0x52c420){if(!botPaused)try{const _0x3ae052=await exchange[_0x4b6697(0x241)](_0x2eb6a0);gTicker[noslash(_0x3ae052[0x0][_0x4b6697(0x26c)])]=_0x3ae052[0x0][_0x4b6697(0x2a6)];}catch(_0x3c93c1){if(!exchangeStopped)await handleError(_0x3c93c1,_0x4b6697(0x1c1),_0x2eb6a0);}else await sleep(0x64);}},_0x16f2bc=async _0x503ff6=>{const _0x5a2c43=_0x275b3c;while(initCycle==_0x52c420){if(!botPaused)try{const _0x487b8a=await exchange['watchTradesForSymbols'](_0x503ff6),_0x46c863=_0x487b8a[_0x5a2c43(0x226)]();gTicker[noslash(_0x46c863['symbol'])]=_0x46c863[_0x5a2c43(0x2a6)];}catch(_0x8d87d3){if(!exchangeStopped)await handleError(_0x8d87d3,_0x5a2c43(0x2e5),_0x503ff6[_0x5a2c43(0x17b)]());}else await sleep(0x64);}},_0x529769=async _0x1b7d02=>{const _0x4b8436=_0x275b3c;while(initCycle==_0x52c420){if(!botPaused){let _0x47ebf0;try{await sleep(0x3c*0x3e8);const _0x5dac23=await getTickers(_0x1b7d02);Object[_0x4b8436(0x1fe)](_0x5dac23)['forEach'](_0x57927b=>{const _0x573d2a=_0x4b8436;_0x47ebf0=_0x57927b[0x1][_0x573d2a(0x26c)],gChange[_0x47ebf0]=_0x57927b[0x1]['percentage'];});}catch(_0x38b8c3){if(!exchangeStopped)await handleError(_0x38b8c3,'fetchTickers()',_0x47ebf0);}}else await sleep(0x64);}},_0x11c005=async _0x4a5a3b=>{const _0x5c0425=_0x275b3c;while(initCycle==_0x52c420){if(!botPaused)try{const _0x11f288=await exchange[_0x5c0425(0x300)](_0x4a5a3b);initCycle==_0x52c420&&_0x11f288[_0x5c0425(0x1e6)](_0x1aeab0=>{updateNumberCoinsCcxt(_0x1aeab0);});}catch(_0xc9408d){if(!exchangeStopped)await handleError(_0xc9408d,_0x5c0425(0x203));}else await sleep(0x64);}};_0x2c6f77(_0x26b188),_0x529769(_0x26b188),exchange['has'][_0x275b3c(0x2b9)]&&!(config[_0x275b3c(0x240)]==_0x275b3c(0x1a0)&&_0x26b188[_0x275b3c(0x2fd)]>0xa)?_0x16f2bc(_0x26b188):_0x26b188[_0x275b3c(0x1e6)](_0x57099e=>{_0x288af8(_0x57099e);}),_0x26b188[_0x275b3c(0x1e6)](_0x19d184=>{_0x11c005(_0x19d184);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1961bd){const _0x5505be=_0x309e6f;let _0x499981={};try{if(config['exchange']!='Cryptocom')_0x499981=await exchange[_0x5505be(0x1f1)](_0x1961bd);else for(const _0x38d4b2 of _0x1961bd){const _0x410a84=await exchange[_0x5505be(0x247)](_0x38d4b2);_0x499981[_0x38d4b2]=_0x410a84;}return _0x499981;}catch(_0x5c6f4b){throw _0x5c6f4b;}}function setBlockTransactionDetection(_0x4e7034){const _0x5d6ddb=_0x309e6f;blockTransactionDetection=_0x4e7034,logger['debug'](_0x5d6ddb(0x253)+blockTransactionDetection);}async function detectLiquidityChange(_0x4c8eef=0x0){const _0x3405b5=_0x309e6f;transactionDetectionOngoing=!![];try{const _0x1c0f99=await getCoins(_0x4c8eef),[_0x3d0cb1,_0x4d9087]=_0x1c0f99;let _0x28a705=[];currentCoins['forEach'](_0x18495a=>{const _0x310f53=_0xea77,_0x1c3861=_0x3d0cb1[_0x310f53(0x260)](_0x173dd1=>_0x173dd1[_0x310f53(0x2ef)]==_0x18495a[_0x310f53(0x2ef)]);if(_0x1c3861){if(_0x18495a['number']!=_0x1c3861[_0x310f53(0x23a)]){let _0x2390fb;if(_0x18495a[_0x310f53(0x2ef)]!=config[_0x310f53(0x1c4)]){const _0x33c1e6=gTicker[noslash(_0x18495a[_0x310f53(0x26c)])];_0x2390fb=_0x18495a['reverse']?0x1/_0x33c1e6:_0x33c1e6;}else _0x2390fb=0x1;_0x28a705[_0x310f53(0x233)]({'coin':_0x18495a[_0x310f53(0x2ef)],'symbol':_0x18495a[_0x310f53(0x26c)],'price':_0x2390fb,'number':Number(formatResult(_0x1c3861['number']-_0x18495a[_0x310f53(0x23a)],0x8)),'basecoinvalue':_0x2390fb*(_0x1c3861[_0x310f53(0x23a)]-_0x18495a[_0x310f53(0x23a)])});}}});if(_0x28a705[_0x3405b5(0x2fd)]>0x0&&!blockTransactionDetection)for(const _0xc77286 of _0x28a705){if(config['autoliquidity']){logger[_0x3405b5(0x2fa)](_0x3405b5(0x231)+_0xc77286[_0x3405b5(0x19d)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x3405b5(0x142)]);if(lastFees[_0x3405b5(0x142)]==0x0||Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x19d)])>lastFees[_0x3405b5(0x142)]*1.2){if(config[_0x3405b5(0x13c)]==_0x3405b5(0x20e)){delete _0xc77286['symbol'],delete _0xc77286[_0x3405b5(0x19d)];let _0x13b5bb=[],_0x5a46c1=[...config[_0x3405b5(0x13d)]]||[],_0x15ba2c=config[_0x3405b5(0x13d)];_0x5a46c1[_0x3405b5(0x2a1)]((_0xf1652d,_0x5c84a7)=>_0xf1652d[_0x3405b5(0x189)]>_0x5c84a7[_0x3405b5(0x189)]?-0x1:_0x5c84a7[_0x3405b5(0x189)]>_0xf1652d[_0x3405b5(0x189)]?0x1:0x0);const _0x446daa=getDate();if(_0x5a46c1[0x0]){const _0x1533f6=fns['parse'](_0x5a46c1[0x0][_0x3405b5(0x189)],_0x3405b5(0x27e),new Date()),_0x5ca1ad=fns[_0x3405b5(0x193)](_0x446daa,'yyyy/MM/dd',new Date());if(fns[_0x3405b5(0x1c3)](_0x1533f6,_0x5ca1ad)){_0x13b5bb=_0x5a46c1[0x0][_0x3405b5(0x25b)];const _0x5bcc30=_0x13b5bb[_0x3405b5(0x260)](_0x39f722=>_0x39f722['coin']==_0xc77286['coin']);_0x5bcc30?(_0x5bcc30[_0x3405b5(0x23a)]+=_0xc77286['number'],_0x5bcc30[_0x3405b5(0x23a)]==0x0&&(_0x13b5bb=_0x13b5bb[_0x3405b5(0x224)](_0x25abdb=>{const _0x1fc764=_0x3405b5;return _0x25abdb['coin']!=_0xc77286[_0x1fc764(0x2ef)];}))):_0x13b5bb[_0x3405b5(0x233)](_0xc77286);const _0x352791=_0x15ba2c['find'](_0x3ae65c=>_0x3ae65c['date']==_0x446daa);_0x352791[_0x3405b5(0x25b)]=_0x13b5bb;}else _0x15ba2c[_0x3405b5(0x233)]({'date':_0x446daa,'changes':[_0xc77286]});}const _0x9bc25=_0x15ba2c[_0x3405b5(0x260)](_0x271778=>_0x271778[_0x3405b5(0x189)]==_0x446daa);if(_0x9bc25){let _0x5b0a40=!![];_0x9bc25[_0x3405b5(0x25b)]['forEach'](_0x1c64ea=>{const _0x11f0fc=_0x3405b5;if(_0x1c64ea[_0x11f0fc(0x23a)]!=0x0)_0x5b0a40=![];}),_0x5b0a40&&(_0x15ba2c=_0x15ba2c[_0x3405b5(0x224)](_0x4739bd=>{return _0x4739bd['date']!=_0x446daa;}));}let _0x251e5a=dbConfig[_0x3405b5(0x192)](_0x3405b5(0x182))[_0x3405b5(0x260)]({'botID':botID})[_0x3405b5(0x2f7)]();_0x251e5a&&(dbConfig[_0x3405b5(0x192)](_0x3405b5(0x182))[_0x3405b5(0x260)]({'botID':botID})['assign']({'liquidity':_0x15ba2c})[_0x3405b5(0x1e2)](),config['liquidity']=_0x15ba2c);logHistory('success',_0x3405b5(0x2a3)+Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x23a)])+'\x20'+_0xc77286[_0x3405b5(0x2ef)]+'\x20'+(_0xc77286[_0x3405b5(0x23a)]>0x0?_0x3405b5(0x246):_0x3405b5(0x208))+_0x3405b5(0x2df)),proxyEmit('configuration',emittedConfiguration());const _0x54f3ae=getNormalizedPerformance();emitPerformance(_0x54f3ae),getStartingBalances(_0x54f3ae),logger[_0x3405b5(0x2fa)](_0x3405b5(0x278));}else config['autoliquidity']==_0x3405b5(0x23e)&&(config[_0x3405b5(0x186)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x3405b5(0x2a3)+Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x23a)])+'\x20'+_0xc77286[_0x3405b5(0x2ef)]+'\x20'+(_0xc77286[_0x3405b5(0x23a)]>0x0?'added':'removed')+_0x3405b5(0x235))):logger['debug'](_0x3405b5(0x2a3)+Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x23a)])+'\x20'+_0xc77286[_0x3405b5(0x2ef)]+'\x20'+(_0xc77286[_0x3405b5(0x23a)]>0x0?_0x3405b5(0x246):_0x3405b5(0x208))+_0x3405b5(0x180)));}else logger[_0x3405b5(0x2fa)](_0x3405b5(0x21a)+Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x23a)])+'\x20'+_0xc77286[_0x3405b5(0x2ef)]+'\x20'+(_0xc77286['number']>0x0?'added':_0x3405b5(0x208)));}else logger[_0x3405b5(0x2fa)](_0x3405b5(0x2a3)+Math[_0x3405b5(0x218)](_0xc77286[_0x3405b5(0x23a)])+'\x20'+_0xc77286[_0x3405b5(0x2ef)]+'\x20'+(_0xc77286[_0x3405b5(0x23a)]>0x0?_0x3405b5(0x246):_0x3405b5(0x208))+_0x3405b5(0x302));}currentCoins=_0x3d0cb1,currentCoinsAll=_0x4d9087;}catch(_0x2860bc){if(!exchangeStopped)await handleError(_0x2860bc,_0x3405b5(0x2ad));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x238231=_0x309e6f;logger[_0x238231(0x2fa)](_0x238231(0x1a9));try{markets=await exchange[_0x238231(0x19c)]();}catch(_0x427336){logger[_0x238231(0x2fa)]('Error\x20in\x20loadSymbols():\x20'+_0x427336[_0x238231(0x17b)]());if(markets){}else logHistory(_0x238231(0x27b),_0x238231(0x239)),logHistory('error',_0x238231(0x20d)+loadCoinsRetryInterval/0xea60+_0x238231(0x201)),logger[_0x238231(0x2fa)](_0x238231(0x1e9),_0x427336),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x238231(0x1fe)](markets)[_0x238231(0x1e6)](_0x27b7db=>{const _0x25be0d=_0x238231;_0x27b7db[0x1]['active']&&_0x27b7db[0x1][_0x25be0d(0x18c)]&&allSymbols['push'](_0x27b7db[0x0]);});}function validateSymbols(_0x4e0068){const _0x1bd691=_0x309e6f;let _0x438434=[];return _0x4e0068[_0x1bd691(0x1e6)](_0x1ecfbc=>{const _0x51dc9c=_0x1bd691;!allSymbols['includes'](_0x1ecfbc)?logHistory(_0x51dc9c(0x27b),_0x51dc9c(0x24e)+_0x1ecfbc+_0x51dc9c(0x152)):_0x438434['push'](_0x1ecfbc);}),_0x438434;}async function initclient(){const _0x3b53f7=_0x309e6f;proxyEmit(_0x3b53f7(0x1fc),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3f20b2=getNormalizedPerformance();emitPerformance(_0x3f20b2),getStartingBalances(_0x3f20b2);}async function toggleBotMode(){const _0x29f370=_0x309e6f;let _0x51ebdb=dbConfig['get']('bot')[_0x29f370(0x260)]({'botID':botID})[_0x29f370(0x2f7)]();if(_0x51ebdb){const _0x19f8aa=!_0x51ebdb[_0x29f370(0x186)];dbConfig[_0x29f370(0x192)](_0x29f370(0x182))[_0x29f370(0x260)]({'botID':botID})['assign']({'headless':_0x19f8aa})[_0x29f370(0x1e2)](),config[_0x29f370(0x186)]=_0x19f8aa,proxyEmit(_0x29f370(0x1fc),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x55638f=_0x309e6f;process[_0x55638f(0x1a7)]({'updatebotmanager':!![]},_0xe68028=>{}),logger['debug']('Headless:\x20'+config['headless']);}async function loadCoins(_0x2f3c89){const _0x1e9b39=_0x309e6f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5d4d9d,_0x3269f4=0x0,_0x3464ba=0x0;_0x2f3c89['forEach'](_0x147880=>{const _0x265ec6=_0xea77;loading[_0x265ec6(0x27c)][_0x265ec6(0x233)](_0x147880);}),loadingCanceled=![];let _0x58bb7b=![];while(_0x5d4d9d!=_0x2f3c89[_0x1e9b39(0x2fd)]+maxLoadingProgress){_0x5d4d9d=loadingProgress,_0x2f3c89[_0x1e9b39(0x1e6)](_0x3d80c9=>{const _0xa25dd1=_0x1e9b39;if(gTicker[noslash(_0x3d80c9)]){loading[_0xa25dd1(0x27c)]=loading[_0xa25dd1(0x27c)][_0xa25dd1(0x224)](_0x386657=>_0x386657!=_0x3d80c9);if(!watchedSymbols[_0xa25dd1(0x1fa)](_0x3d80c9))watchedSymbols[_0xa25dd1(0x233)](_0x3d80c9);_0x5d4d9d++;}}),loading[_0x1e9b39(0x16d)]=Math[_0x1e9b39(0x2ae)](_0x5d4d9d/(_0x2f3c89[_0x1e9b39(0x2fd)]+maxLoadingProgress)*0x64);loading[_0x1e9b39(0x16d)]!=0x64&&(_0x3464ba>0x1e*0x5&&(loading[_0x1e9b39(0x198)]=!![],emitLoadingProgress()),_0x3464ba>0x78*0x5&&!_0x58bb7b&&(_0x58bb7b=!![],logHistory('error',_0x1e9b39(0x2e3)+loading[_0x1e9b39(0x27c)][_0x1e9b39(0x1f5)](',\x20')+_0x1e9b39(0x24d)),logHistory(_0x1e9b39(0x27b),_0x1e9b39(0x20d)+loadCoinsRetryInterval/0xea60+_0x1e9b39(0x201)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3269f4!=loading[_0x1e9b39(0x16d)]&&(_0x3269f4=loading[_0x1e9b39(0x16d)],emitLoadingProgress()),_0x3464ba++,await sleep(0xc8);}_0x5d4d9d==_0x2f3c89[_0x1e9b39(0x2fd)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1e9b39(0x1a7)]({'status':'enabled','live':_0x1e9b39(0x173)},_0x4ee4eb=>{}),_0x58bb7b&&logHistory(_0x1e9b39(0x1d9),_0x1e9b39(0x2e8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x58e5e6=_0x309e6f;proxyEmit(_0x58e5e6(0x1fc),{...emittedConfiguration(),'configstate':_0x58e5e6(0x1cd)});}function emitLoadingProgress(){const _0x4a17fa=_0x309e6f;proxyEmit(_0x4a17fa(0x29b),loading);}async function getFiat(){const _0x5015c2=_0x309e6f;let _0x3ce1f1=gTicker[stablecoins[_0x5015c2(0x183)][_0x5015c2(0x2ef)]],_0x19e13d=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x3ce1f1),'usd':Number(_0x19e13d)};}function capitalize(_0x48afd6){const _0x3bed65=_0x309e6f;return _0x48afd6['substring'](0x0,0x1)[_0x3bed65(0x228)]()+_0x48afd6[_0x3bed65(0x1b4)](0x1);}function supportedExchanges(){const _0x4d4ed7=_0x309e6f,_0x46a0a8=['ws','fetchTickers',_0x4d4ed7(0x247),_0x4d4ed7(0x241),_0x4d4ed7(0x300),_0x4d4ed7(0x2a8),_0x4d4ed7(0x1a6),_0x4d4ed7(0x2af),_0x4d4ed7(0x214)];let _0x243fb4=[],_0x395c3d=[],_0x5a9229=ccxt[_0x4d4ed7(0x270)][_0x4d4ed7(0x17d)];_0x5a9229['forEach'](_0x1b3d5b=>{const _0x5220=_0x4d4ed7;try{const _0x453cec=new ccxt[(_0x5220(0x270))][_0x1b3d5b]();_0x395c3d[_0x5220(0x233)](_0x453cec);}catch(_0x4c0e74){}}),_0x395c3d[_0x4d4ed7(0x1e6)](_0x569adb=>{const _0x1bc009=_0x4d4ed7;let _0x4aa4b3=0x0;_0x46a0a8[_0x1bc009(0x1e6)](_0x3d60cb=>{const _0xbf46b1=_0x1bc009;_0x3d60cb in _0x569adb[_0xbf46b1(0x170)]&&_0x569adb[_0xbf46b1(0x170)][_0x3d60cb]&&_0x4aa4b3++;}),_0x4aa4b3==_0x46a0a8[_0x1bc009(0x2fd)]&&_0x243fb4['push'](capitalize(_0x569adb['id']));});let _0x25a03c=[];return _0x5a9229[_0x4d4ed7(0x1e6)](_0x101002=>{const _0x16d733=_0x4d4ed7;_0x101002=capitalize(_0x101002);if(!_0x243fb4['includes'](_0x101002))_0x25a03c[_0x16d733(0x233)](_0x101002);}),_0x243fb4;}function _0xea77(_0x206a9c,_0x7b137c){const _0x176495=_0x3c5e();return _0xea77=function(_0x383196,_0x35467c){_0x383196=_0x383196-0x13b;let _0x3c5e68=_0x176495[_0x383196];return _0x3c5e68;},_0xea77(_0x206a9c,_0x7b137c);}function setStartDatePerformance(){const _0x53fab4=_0x309e6f;if(config&&config['liquidity'][0x0][_0x53fab4(0x25b)][_0x53fab4(0x2fd)]!=0x0){const _0x5508fd=config[_0x53fab4(0x13d)][0x0][_0x53fab4(0x25b)];dbPerformance[_0x53fab4(0x192)](_0x53fab4(0x251))['find']({'date':config[_0x53fab4(0x160)]})['assign']({'coins':_0x5508fd})[_0x53fab4(0x1e2)]();}}async function recreateCoinResults(){const _0x1314f1=_0x309e6f;recreationNeeded=![];let _0x54b8c5,_0x5a597c=[];try{for(const _0x1840d6 of currentCoins){if(_0x1840d6['coin']!=config[_0x1314f1(0x1c4)]){let _0x5e6968=0x0,_0xd4837a,_0x213a2d;_0x54b8c5=await getAllEventOrders(_0x1840d6['symbol']);if(_0x54b8c5['length']>0x0)_0x54b8c5[_0x1314f1(0x1e6)](_0x22bfc9=>{const _0x2d7c41=_0x1314f1,_0x176fe1=_0x1840d6[_0x2d7c41(0x26c)][_0x2d7c41(0x1fa)](config[_0x2d7c41(0x1c4)]+'/');_0x5a597c['push']({'datetime':_0x22bfc9['datetime'],'coin':_0x1840d6['coin'],'symbol':_0x1840d6[_0x2d7c41(0x26c)],'side':_0x22bfc9[_0x2d7c41(0x222)],'reverse':_0x176fe1,'amount':formatResult(_0x22bfc9[_0x2d7c41(0x209)],0x8),'filled':formatResult(_0x22bfc9['filled'],0x8),'price':formatResult(_0x22bfc9[_0x2d7c41(0x2a6)],0x8)}),_0x5e6968=_0x22bfc9[_0x2d7c41(0x222)]==_0x2d7c41(0x1bd)?_0x5e6968+_0x22bfc9['filled']:_0x5e6968-_0x22bfc9[_0x2d7c41(0x209)];if(!_0x213a2d)_0x213a2d=_0x22bfc9[_0x2d7c41(0x2a6)];});_0xd4837a=_0x1840d6[_0x1314f1(0x23a)]-_0x5e6968;let _0x2e4161;config[_0x1314f1(0x13d)]['forEach'](_0x1ffdf6=>{const _0x230953=_0x1314f1;!_0x2e4161&&(_0x2e4161=_0x1ffdf6[_0x230953(0x25b)][_0x230953(0x260)](_0xe98d33=>_0xe98d33[_0x230953(0x2ef)]==_0x1840d6[_0x230953(0x2ef)]),_0x2e4161&&(_0xd4837a=_0x2e4161[_0x230953(0x23a)],_0x213a2d=_0x2e4161[_0x230953(0x2a6)]));});let _0xb6bf9f=dbCoinResults[_0x1314f1(0x192)](_0x1314f1(0x216))[_0x1314f1(0x260)]({'coin':_0x1840d6[_0x1314f1(0x2ef)]})['value']();_0xb6bf9f={'coin':_0x1840d6[_0x1314f1(0x2ef)],'number':_0xd4837a,'breakeven':_0x213a2d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1314f1(0x192)](_0x1314f1(0x216))[_0x1314f1(0x260)]({'coin':_0x1840d6[_0x1314f1(0x2ef)]})[_0x1314f1(0x285)](_0xb6bf9f)[_0x1314f1(0x1e2)]();}}_0x5a597c[_0x1314f1(0x2a1)]((_0x567205,_0x7e1d6f)=>_0x567205[_0x1314f1(0x179)]>_0x7e1d6f[_0x1314f1(0x179)]?0x1:_0x7e1d6f[_0x1314f1(0x179)]>_0x567205[_0x1314f1(0x179)]?-0x1:0x0);let _0x80a1ad=0x0;for(let _0x470d98 of _0x5a597c){await updateCoinResults(_0x470d98,!![]);}}catch(_0x1ce2f9){await handleError(_0x1ce2f9,'recreateCoinResults()');}}async function getAllEventOrders(_0x3b2574){const _0x53f500=_0x309e6f;let _0x1be878=[],_0x59060f=dbLogs[_0x53f500(0x192)](_0x53f500(0x2cc))[_0x53f500(0x224)](_0x410e8f=>{const _0x36dff2=_0x53f500,_0x47af6c=_0x410e8f[_0x36dff2(0x1be)][_0x36dff2(0x20a)]();return _0x47af6c[_0x36dff2(0x1fa)](_0x3b2574[_0x36dff2(0x20a)]())&&(_0x47af6c[_0x36dff2(0x1fa)](_0x36dff2(0x23b))&&_0x47af6c[_0x36dff2(0x1fa)](_0x36dff2(0x155))||_0x47af6c['includes'](_0x36dff2(0x209))&&_0x47af6c[_0x36dff2(0x1fa)](_0x36dff2(0x155)));})[_0x53f500(0x234)]('time')[_0x53f500(0x2f7)]();return _0x59060f[_0x53f500(0x1e6)](_0x564bfa=>{const _0x52cf5d=_0x53f500,_0x490215=_0x564bfa[_0x52cf5d(0x1be)][_0x52cf5d(0x1fa)](_0x52cf5d(0x215))?_0x52cf5d(0x215):_0x52cf5d(0x1bd),_0x264fdf=/#([0-9]|\.)+\s/i,_0x409921=Number(_0x264fdf[_0x52cf5d(0x144)](_0x564bfa[_0x52cf5d(0x1be)])[0x0]['slice'](0x1)),_0x3d1986=/@([0-9]|\.)+$/i,_0x1b87b3=Number(_0x3d1986[_0x52cf5d(0x144)](_0x564bfa[_0x52cf5d(0x1be)])[0x0][_0x52cf5d(0x2ba)](0x1));_0x1be878[_0x52cf5d(0x233)]({'datetime':_0x564bfa[_0x52cf5d(0x2b6)],'coin':symbolToCoin(_0x3b2574),'symbol':_0x3b2574,'side':_0x490215,'amount':_0x409921,'filled':_0x409921,'price':_0x1b87b3});}),_0x1be878;}async function validate24hChanges(){const _0x319492=_0x309e6f;for(const _0x32c745 of currentCoins){if(_0x32c745[_0x319492(0x2ef)]!=config[_0x319492(0x1c4)]){let _0x32d6d2;_0x32c745[_0x319492(0x2ac)]?_0x32d6d2=formatResult((0x1/(gChange[_0x32c745[_0x319492(0x26c)]]/0x64+0x1)-0x1)*0x64,0x3):_0x32d6d2=gChange[_0x32c745['symbol']],_0x32d6d2<config[_0x319492(0x277)]&&(logHistory(_0x319492(0x27b),_0x32c745[_0x319492(0x2ef)]+_0x319492(0x1de)+_0x32d6d2+'%'),logHistory('error',_0x319492(0x25e)),logHistory(_0x319492(0x27b),_0x319492(0x199)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1279a2,_0xf62d0f){const _0x4d54d3=_0x309e6f;if(!_0x1279a2)return!![];const _0x420902=_0xf62d0f[_0x4d54d3(0x2b0)]('.'),_0x39bf9f=_0x1279a2[_0x4d54d3(0x2b0)]('.');for(var _0x28ce9a=0x0;_0x28ce9a<_0x39bf9f['length'];_0x28ce9a++){const _0x2345f1=~~_0x39bf9f[_0x28ce9a],_0x1013d8=~~_0x420902[_0x28ce9a];if(_0x2345f1<_0x1013d8)return!![];if(_0x2345f1>_0x1013d8)return![];}return![];}async function oneTimeMigration(){const _0x22a33a=_0x309e6f;let _0x31ac34=dbLogs[_0x22a33a(0x192)]('version')[_0x22a33a(0x2f7)]();if(isOlderVersion(_0x31ac34,_0x22a33a(0x2c0))){let _0x561341=[];const _0x3502e4=dbLogs['get'](_0x22a33a(0x2cc))['value']();_0x3502e4[_0x22a33a(0x1e6)](_0x22c27d=>{const _0x4fc866=_0x22a33a;_0x561341[_0x4fc866(0x233)]({'time':_0x22c27d[_0x4fc866(0x2b6)],'type':_0x22c27d['type'],'event':_0x22c27d[_0x4fc866(0x1be)]});}),dbLogs[_0x22a33a(0x192)]('logs')['assign'](_0x561341)['write']();}let _0x3fe911=dbConfig[_0x22a33a(0x192)](_0x22a33a(0x1a2))[_0x22a33a(0x2f7)]();if(isOlderVersion(_0x3fe911,_0x22a33a(0x2c0))){let _0x4b15de=dbConfig[_0x22a33a(0x192)](_0x22a33a(0x182))[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x2f7)]();if(_0x4b15de){let _0x30faaf=[];_0x4b15de[_0x22a33a(0x1a3)][_0x22a33a(0x1e6)](_0x24e512=>{const _0x358c65=_0x22a33a;_0x30faaf[_0x358c65(0x233)]({'coin':_0x24e512[_0x358c65(0x2ef)],'number':_0x24e512['startnumber'],'price':_0x24e512[_0x358c65(0x1e7)]}),delete _0x24e512[_0x358c65(0x25f)],delete _0x24e512[_0x358c65(0x1e7)];});if(_0x30faaf['length']!==0x0)fs[_0x22a33a(0x13f)](configbackuppath+(_0x22a33a(0x1ca)+botID+_0x22a33a(0x16a)),JSON[_0x22a33a(0x14e)](_0x30faaf,null,0x4),function(_0xfef5b7){if(_0xfef5b7){}});const _0x2e5c3a=(_0xdd7df9,_0x7f0fa1)=>{const _0x368efe=_0x22a33a;let _0x191077=[];_0x7f0fa1[_0x368efe(0x1e6)](_0x3fdf0c=>{const _0x242850=_0x368efe,_0x5d5dba=_0xdd7df9[_0x242850(0x260)](_0x21e001=>_0x21e001[_0x242850(0x2ef)]==_0x3fdf0c[_0x242850(0x2ef)]);if(!_0x5d5dba)_0x191077[_0x242850(0x233)](_0x3fdf0c);});let _0x259452=[];return _0xdd7df9[_0x368efe(0x1e6)](_0x46307b=>{const _0x425d70=_0x368efe,_0x2942f6=_0x7f0fa1[_0x425d70(0x260)](_0x561b70=>_0x561b70['coin']==_0x46307b[_0x425d70(0x2ef)]);if(!_0x2942f6||_0x2942f6['number']==0x0&&_0x46307b[_0x425d70(0x23a)]!=0x0)_0x259452['push'](_0x46307b);}),{'missingDay1':_0x191077,'notInDay2':_0x259452};},_0x152338=dbPerformance['get'](_0x22a33a(0x251))[_0x22a33a(0x25c)]()[_0x22a33a(0x2f7)]();if(_0x152338[_0x22a33a(0x2fd)]>0x1){const {missingDay1:_0x20403e,notInDay2:_0x5395b0}=_0x2e5c3a(_0x30faaf,_0x152338[0x1][_0x22a33a(0x216)]);_0x30faaf=[..._0x30faaf,..._0x20403e],_0x5395b0[_0x22a33a(0x1e6)](_0x57851f=>{const _0x1d93cd=_0x22a33a;let _0x3ab1ee=_0x30faaf['findIndex'](_0xdb7e63=>_0xdb7e63[_0x1d93cd(0x2ef)]==_0x57851f['coin']);_0x3ab1ee!=-0x1&&_0x30faaf[_0x1d93cd(0x2bc)](_0x3ab1ee,0x1);});}_0x30faaf[_0x22a33a(0x2a1)]((_0x4c85dc,_0x57cdbb)=>_0x4c85dc[_0x22a33a(0x2ef)]>_0x57cdbb['coin']?0x1:_0x57cdbb[_0x22a33a(0x2ef)]>_0x4c85dc['coin']?-0x1:0x0);let _0x4afc77=[{'date':_0x4b15de[_0x22a33a(0x160)],'changes':_0x30faaf}];_0x152338[_0x22a33a(0x2fd)]>0x2&&_0x152338[_0x22a33a(0x1e6)]((_0x1d64a9,_0x3b7819)=>{const _0x3db76d=_0x22a33a;if(_0x3b7819>0x0&&_0x3b7819<_0x152338[_0x3db76d(0x2fd)]-0x1){const {missingDay1:_0x31f4ca,notInDay2:_0x5228fb}=_0x2e5c3a(_0x152338[_0x3b7819]['coins'],_0x152338[_0x3b7819+0x1][_0x3db76d(0x216)]);_0x30faaf=[],(_0x31f4ca[_0x3db76d(0x2fd)]!=0x0||_0x5228fb['length']!=0x0)&&(_0x31f4ca[_0x3db76d(0x2fd)]!=0x0&&_0x30faaf['push'](..._0x31f4ca),_0x5228fb['length']!=0x0&&(_0x5228fb[_0x3db76d(0x1e6)](_0xab486a=>{_0xab486a['number']=-_0xab486a['number'];}),_0x30faaf[_0x3db76d(0x233)](..._0x5228fb)),_0x30faaf[_0x3db76d(0x2a1)]((_0x160cf6,_0x592088)=>_0x160cf6[_0x3db76d(0x2ef)]>_0x592088[_0x3db76d(0x2ef)]?0x1:_0x592088[_0x3db76d(0x2ef)]>_0x160cf6[_0x3db76d(0x2ef)]?-0x1:0x0),_0x4afc77[_0x3db76d(0x233)]({'date':_0x152338[_0x3b7819+0x1]['date'],'changes':_0x30faaf}));}}),dbConfig[_0x22a33a(0x192)](_0x22a33a(0x182))[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x285)]({..._0x4b15de,'liquidity':_0x4afc77})[_0x22a33a(0x1e2)]();}}if(isOlderVersion(_0x3fe911,_0x22a33a(0x2e0))){let _0x30438b=dbConfig[_0x22a33a(0x192)]('bot')['find']({'botID':botID})[_0x22a33a(0x2f7)]();if(_0x30438b){const _0x301c3d=_0x30438b[_0x22a33a(0x240)],_0x1ae3d2=_0x301c3d?capitalize(_0x301c3d):_0x22a33a(0x2ab);dbConfig[_0x22a33a(0x192)]('bot')['find']({'botID':botID})[_0x22a33a(0x285)]({'exchange':_0x1ae3d2})[_0x22a33a(0x1e2)]();}}if(isOlderVersion(_0x3fe911,_0x22a33a(0x2e6))){let _0x9fabb8=dbConfig[_0x22a33a(0x192)]('bot')[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x2f7)]();if(_0x9fabb8){const _0x41b9b7=_0x9fabb8['marketcapEnabled'],_0x168d4c=_0x41b9b7?'marketcap':![];dbConfig['get'](_0x22a33a(0x182))[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x285)]({'marketcapEnabled':_0x168d4c})['write']();}}if(isOlderVersion(_0x3fe911,_0x22a33a(0x2f3))){let _0x1077c1=dbConfig[_0x22a33a(0x192)](_0x22a33a(0x182))[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x2f7)]();if(_0x1077c1){const _0x16c5d1=_0x1077c1['autoliquidity'],_0xe5752f=_0x16c5d1?'update-liquidity':![];dbConfig[_0x22a33a(0x192)]('bot')[_0x22a33a(0x260)]({'botID':botID})[_0x22a33a(0x285)]({'autoliquidity':_0xe5752f})['write']();}}let _0x224599=dbPerformance[_0x22a33a(0x192)](_0x22a33a(0x1a2))[_0x22a33a(0x2f7)]();isOlderVersion(_0x224599,_0x22a33a(0x2c0))&&setStartDatePerformance();let _0x3f9d09=dbCoinResults['get'](_0x22a33a(0x1a2))[_0x22a33a(0x2f7)]();if(isOlderVersion(_0x3f9d09,'2.5.0')){let _0x2c5025=dbCoinResults['get'](_0x22a33a(0x216))[_0x22a33a(0x2f7)]();if(_0x2c5025[_0x22a33a(0x2fd)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x262ba1=_0x309e6f;dbConfig[_0x262ba1(0x287)](_0x262ba1(0x1a2),serverversion)['write'](),dbPerformance[_0x262ba1(0x287)](_0x262ba1(0x1a2),serverversion)['write'](),dbLogs[_0x262ba1(0x287)](_0x262ba1(0x1a2),serverversion)[_0x262ba1(0x1e2)](),dbCoinResults['set']('version',serverversion)[_0x262ba1(0x1e2)]();}function getConfiguration(_0x414e8a){const _0x15f5f5=_0x309e6f;let _0x2b3e73=dbConfig['get'](_0x15f5f5(0x182))[_0x15f5f5(0x260)]({'botID':_0x414e8a})['value']();if(_0x2b3e73){let _0x12d193=![];typeof _0x2b3e73[_0x15f5f5(0x1ac)]=='string'&&(_0x2b3e73={..._0x2b3e73,'threshold':Number(_0x2b3e73[_0x15f5f5(0x1ac)])},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x277)]==undefined&&(_0x2b3e73={..._0x2b3e73,'change24h':-0x14},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x280)]==undefined&&(_0x2b3e73={..._0x2b3e73,'fiat':_0x15f5f5(0x1a5)},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x14f)]==undefined&&(_0x2b3e73={..._0x2b3e73,'onepagemode':settings[_0x15f5f5(0x14f)]},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x205)]==undefined&&(_0x2b3e73={..._0x2b3e73,'colorscheme':_0x15f5f5(0x282)},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x13c)]==undefined&&(_0x2b3e73={..._0x2b3e73,'autoliquidity':_0x15f5f5(0x20e)},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x2a5)]==undefined&&(_0x2b3e73={..._0x2b3e73,'marketcapApi':settings[_0x15f5f5(0x2a5)]?!![]:![]},_0x12d193=!![]),_0x2b3e73[_0x15f5f5(0x262)]==undefined&&(_0x2b3e73={..._0x2b3e73,'marketcapEnabled':![]},_0x12d193=!![]),_0x12d193&&(_0x2b3e73={'botID':_0x2b3e73['botID'],'exchange':_0x2b3e73[_0x15f5f5(0x240)],'apiKey':_0x2b3e73[_0x15f5f5(0x15f)],'apiSecret':_0x2b3e73['apiSecret'],'apiPassword':_0x2b3e73[_0x15f5f5(0x273)],'basecoin':_0x2b3e73[_0x15f5f5(0x1c4)],'botname':_0x2b3e73['botname'],'showname':_0x2b3e73[_0x15f5f5(0x2a2)],'threshold':_0x2b3e73[_0x15f5f5(0x1ac)],'ordertype':_0x2b3e73['ordertype'],'timeout':_0x2b3e73[_0x15f5f5(0x198)],'fiat':_0x2b3e73[_0x15f5f5(0x280)],'startdate':_0x2b3e73['startdate'],'recreate':_0x2b3e73['recreate'],'timeshift':_0x2b3e73[_0x15f5f5(0x1ee)],'onepagemode':_0x2b3e73[_0x15f5f5(0x14f)],'headless':_0x2b3e73['headless'],'cooldown':_0x2b3e73[_0x15f5f5(0x269)],'change24h':_0x2b3e73[_0x15f5f5(0x277)],'emojibuy':_0x2b3e73[_0x15f5f5(0x165)],'emojisell':_0x2b3e73[_0x15f5f5(0x276)],'colorscheme':_0x2b3e73[_0x15f5f5(0x205)],'marketcapApi':_0x2b3e73[_0x15f5f5(0x2a5)],'marketcapEnabled':_0x2b3e73[_0x15f5f5(0x262)],'portfolio':_0x2b3e73[_0x15f5f5(0x1a3)],'autoliquidity':_0x2b3e73['autoliquidity'],'liquidity':_0x2b3e73['liquidity'],'openOrders':_0x2b3e73[_0x15f5f5(0x20c)]},dbConfig['get']('bot')[_0x15f5f5(0x2bd)]()[_0x15f5f5(0x1e2)](),dbConfig['get']('bot')[_0x15f5f5(0x233)](_0x2b3e73)[_0x15f5f5(0x1e2)]());}else _0x2b3e73={'botID':_0x414e8a,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x15f5f5(0x2db)+_0x414e8a,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x15f5f5(0x1a5),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x15f5f5(0x1ee)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x15f5f5(0x282),'marketcapApi':settings[_0x15f5f5(0x2a5)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x15f5f5(0x20e),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2b3e73;}function emittedConfiguration(){const _0x41f345=_0x309e6f;let _0x4ee4a3;if(config['apiKey']=='')_0x4ee4a3={...config,'configstate':'initial'};else config[_0x41f345(0x15f)]==_0x41f345(0x16b)?_0x4ee4a3={...config,'configstate':'recovery'}:(_0x4ee4a3={...config,'apiKey':_0x41f345(0x2d3),'apiSecret':'************'},config[_0x41f345(0x273)]&&(_0x4ee4a3[_0x41f345(0x273)]=_0x41f345(0x2d3)));return _0x4ee4a3[_0x41f345(0x298)]=enableFiatToggle,_0x4ee4a3;}function getSettings(){const _0x55485b=_0x309e6f;return dbSettings[_0x55485b(0x192)](_0x55485b(0x1b3))[_0x55485b(0x2f7)]();}function getSecure(){const _0x361930=_0x309e6f;return dbSecure['get'](_0x361930(0x243))['value']()||{};}function updateTimeshift(_0x65bdd2){const _0x1ee48c=_0x309e6f;let _0x59201f=dbConfig[_0x1ee48c(0x192)](_0x1ee48c(0x182))[_0x1ee48c(0x260)]({'botID':botID})[_0x1ee48c(0x2f7)]();_0x59201f&&dbConfig[_0x1ee48c(0x192)](_0x1ee48c(0x182))['find']({'botID':botID})[_0x1ee48c(0x285)]({'timeshift':_0x65bdd2})['write'](),config['timeshift']=_0x65bdd2,proxyEmit(_0x1ee48c(0x1fc),emittedConfiguration());}function updateOnepagemode(_0x45988d){const _0x33b0ae=_0x309e6f;let _0x4c0200=dbConfig[_0x33b0ae(0x192)]('bot')[_0x33b0ae(0x260)]({'botID':botID})[_0x33b0ae(0x2f7)]();_0x4c0200&&dbConfig[_0x33b0ae(0x192)](_0x33b0ae(0x182))['find']({'botID':botID})['assign']({'onepagemode':_0x45988d})[_0x33b0ae(0x1e2)](),config['onepagemode']=_0x45988d,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x3f375b){const _0xd4f3d=_0x309e6f,_0x3994b9=_0x3f375b?!![]:![];let _0x358edc=dbConfig[_0xd4f3d(0x192)](_0xd4f3d(0x182))[_0xd4f3d(0x260)]({'botID':botID})[_0xd4f3d(0x2f7)]();_0x358edc&&dbConfig[_0xd4f3d(0x192)](_0xd4f3d(0x182))['find']({'botID':botID})[_0xd4f3d(0x285)]({'marketcapApi':_0x3994b9})[_0xd4f3d(0x1e2)](),config['marketcapApi']=_0x3994b9,getMarketCap(),proxyEmit(_0xd4f3d(0x1fc),emittedConfiguration());}async function storeConfiguration(_0x56ab47){const _0x1a854c=_0x309e6f;logger[_0x1a854c(0x2fa)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x26b294=![],_0x1454a3=![],_0x1755a0=[];_0x56ab47[_0x1a854c(0x1a3)][_0x1a854c(0x1e6)](_0x18d05e=>{const _0x3b155d=_0x1a854c;if(!_0x18d05e['excluded']&&_0x18d05e['coin']!=_0x56ab47[_0x3b155d(0x1c4)])_0x1755a0['push'](_0x18d05e[_0x3b155d(0x26c)]);}),_0x1755a0[_0x1a854c(0x1e6)](_0x396a22=>{const _0x456b27=_0x1a854c,_0x3f79b1=currentCoins[_0x456b27(0x260)](_0xe14693=>_0xe14693[_0x456b27(0x26c)]==_0x396a22);!_0x3f79b1&&(_0x26b294=!![]);}),currentCoins[_0x1a854c(0x1e6)](_0x4fb0e6=>{const _0xf1893a=_0x1a854c;if(_0x4fb0e6[_0xf1893a(0x2ef)]!=config[_0xf1893a(0x1c4)]){const _0x2cd3c7=_0x1755a0['find'](_0x16587d=>_0x16587d==_0x4fb0e6[_0xf1893a(0x26c)]);!_0x2cd3c7&&(_0x26b294=!![]);}}),_0x56ab47[_0x1a854c(0x1a3)][_0x1a854c(0x1e6)](_0x1a6d43=>{const _0x15a00f=_0x1a854c,_0x332ee4=config[_0x15a00f(0x1a3)][_0x15a00f(0x260)](_0x275395=>_0x275395[_0x15a00f(0x2ef)]==_0x1a6d43[_0x15a00f(0x2ef)]);if(_0x332ee4&&_0x1a6d43[_0x15a00f(0x1f2)]!=_0x332ee4['offset'])_0x1454a3=!![];});let _0x50611a=dbConfig[_0x1a854c(0x192)](_0x1a854c(0x182))[_0x1a854c(0x260)]({'botID':botID})[_0x1a854c(0x2f7)]();_0x56ab47={..._0x56ab47,'apiKey':decryptRSA(secure[_0x1a854c(0x171)],_0x56ab47[_0x1a854c(0x15f)]),'apiSecret':decryptRSA(secure[_0x1a854c(0x171)],_0x56ab47['apiSecret'])};_0x56ab47[_0x1a854c(0x273)]&&(_0x56ab47['apiPassword']=decryptRSA(secure[_0x1a854c(0x171)],_0x56ab47[_0x1a854c(0x273)]));let _0x29ddbb=![];if(_0x50611a){_0x56ab47['apiKey']==_0x1a854c(0x2d3)?_0x56ab47[_0x1a854c(0x15f)]=config[_0x1a854c(0x15f)]:_0x29ddbb=!![];_0x56ab47['apiSecret']==_0x1a854c(0x2d3)?_0x56ab47[_0x1a854c(0x23c)]=config['apiSecret']:_0x29ddbb=!![];if(_0x56ab47['apiPassword']==_0x1a854c(0x2d3))_0x56ab47['apiPassword']=config[_0x1a854c(0x273)];else{if(_0x56ab47[_0x1a854c(0x273)])_0x29ddbb=!![];}dbConfig[_0x1a854c(0x192)]('bot')['find']({'botID':botID})[_0x1a854c(0x285)](_0x56ab47)[_0x1a854c(0x1e2)]();}else dbConfig['get']('bot')[_0x1a854c(0x233)](_0x56ab47)[_0x1a854c(0x1e2)](),_0x29ddbb=!![],process[_0x1a854c(0x1a7)]({'status':'enabled','live':_0x1a854c(0x173)},_0x1cf949=>{});process[_0x1a854c(0x1a7)]({'botname':_0x56ab47['botname']},_0x62fe84=>{}),config={..._0x56ab47},updateBotManager(),proxyEmit(_0x1a854c(0x188)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x29ddbb)!_0x50611a?await reset(!![]):getBalances();else _0x26b294||_0x1454a3?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x55083d){const _0x4bf2c0=_0x309e6f,_0x3a7a3f={...config,'headless':_0x55083d[_0x4bf2c0(0x186)]};let _0x48c9a5=dbConfig[_0x4bf2c0(0x192)](_0x4bf2c0(0x182))[_0x4bf2c0(0x260)]({'botID':botID})[_0x4bf2c0(0x2f7)]();_0x48c9a5&&dbConfig['get'](_0x4bf2c0(0x182))[_0x4bf2c0(0x260)]({'botID':botID})[_0x4bf2c0(0x285)](_0x3a7a3f)[_0x4bf2c0(0x1e2)](),config={..._0x3a7a3f},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x16760e){const _0x8f81a5=_0x309e6f,_0x131ad1={...config,'fiat':_0x16760e};let _0x161af6=dbConfig[_0x8f81a5(0x192)](_0x8f81a5(0x182))[_0x8f81a5(0x260)]({'botID':botID})['value']();_0x161af6&&dbConfig[_0x8f81a5(0x192)](_0x8f81a5(0x182))[_0x8f81a5(0x260)]({'botID':botID})[_0x8f81a5(0x285)](_0x131ad1)[_0x8f81a5(0x1e2)](),config={..._0x131ad1},proxyEmit(_0x8f81a5(0x1fc),emittedConfiguration());}function resetHistory(){const _0xafc4d2=_0x309e6f;logger['full'](_0xafc4d2(0x18e));try{if(fs[_0xafc4d2(0x2ff)](path[_0xafc4d2(0x1f5)](configpath,_0xafc4d2(0x2e1)+botID+_0xafc4d2(0x1d6))))fs['unlinkSync'](path[_0xafc4d2(0x1f5)](configpath,'bot-'+botID+_0xafc4d2(0x1d6)));if(fs['existsSync'](path[_0xafc4d2(0x1f5)](configpath,_0xafc4d2(0x2e1)+botID+_0xafc4d2(0x194))))fs[_0xafc4d2(0x2c6)](path['join'](configpath,_0xafc4d2(0x2e1)+botID+_0xafc4d2(0x194)));if(fs[_0xafc4d2(0x2ff)](path['join'](configpath,_0xafc4d2(0x2e1)+botID+_0xafc4d2(0x236))))fs[_0xafc4d2(0x2c6)](path[_0xafc4d2(0x1f5)](configpath,_0xafc4d2(0x2e1)+botID+_0xafc4d2(0x236)));}catch(_0x319918){if(_0x319918)logger[_0xafc4d2(0x20f)](_0xafc4d2(0x1b8),_0x319918);}const _0x4b3052=getDate();let _0x174e52=[];currentCoins[_0xafc4d2(0x1e6)](_0x17f5a1=>{const _0x1e645a=_0xafc4d2;_0x174e52[_0x1e645a(0x233)]({'coin':_0x17f5a1['coin'],'number':_0x17f5a1[_0x1e645a(0x23a)],'price':_0x17f5a1['last']});});let _0xc46dae=dbConfig[_0xafc4d2(0x192)](_0xafc4d2(0x182))['find']({'botID':botID})[_0xafc4d2(0x2f7)]();_0xc46dae&&(dbConfig[_0xafc4d2(0x192)](_0xafc4d2(0x182))[_0xafc4d2(0x260)]({'botID':botID})[_0xafc4d2(0x285)]({'liquidity':[{'date':_0x4b3052,'changes':_0x174e52}]})[_0xafc4d2(0x1e2)](),config[_0xafc4d2(0x13d)]=[]),restartBot(!![]);}function noslash(_0x5b4c14){return _0x5b4c14['replace']('/','');}function updateHighestFee(_0x41bbc1){const _0x27f0e5=_0x309e6f;if(_0x41bbc1['reverse']){let _0x446021={'filled':_0x41bbc1[_0x27f0e5(0x209)]*_0x41bbc1[_0x27f0e5(0x2a6)],'amount':_0x41bbc1[_0x27f0e5(0x209)]*_0x41bbc1[_0x27f0e5(0x2a6)],'side':_0x41bbc1['side']==_0x27f0e5(0x215)?_0x27f0e5(0x1bd):_0x27f0e5(0x215),'price':0x1/_0x41bbc1[_0x27f0e5(0x2a6)]};_0x41bbc1={..._0x41bbc1,..._0x446021};}const _0x2afe38=defaultFee*_0x41bbc1[_0x27f0e5(0x209)]*_0x41bbc1[_0x27f0e5(0x2a6)];lastFees[_0x27f0e5(0x2b3)][_0x27f0e5(0x2fd)]===0x14&&lastFees['recent20'][_0x27f0e5(0x258)](),lastFees[_0x27f0e5(0x2b3)][_0x27f0e5(0x233)](_0x2afe38),lastFees[_0x27f0e5(0x142)]=Math['max'](...lastFees[_0x27f0e5(0x2b3)]);}async function updateNumberCoinsCcxt(_0x19dbbe){const _0x3d638e=_0x309e6f;logger[_0x3d638e(0x2fa)](_0x3d638e(0x24a)+_0x19dbbe[_0x3d638e(0x26c)]+_0x3d638e(0x28a)+_0x19dbbe[_0x3d638e(0x28e)]+_0x3d638e(0x28a)+_0x19dbbe[_0x3d638e(0x209)]+_0x3d638e(0x2f6)+_0x19dbbe[_0x3d638e(0x1bb)]+_0x3d638e(0x28a)+_0x19dbbe['id']);let _0x2840e3=_0x19dbbe[_0x3d638e(0x28e)],_0x28dd05=![];currentCoins[_0x3d638e(0x1e6)](_0x1df694=>{const _0x370989=_0x3d638e;_0x1df694[_0x370989(0x26c)]==_0x19dbbe[_0x370989(0x26c)]&&(_0x28dd05=!![]);});if(!_0x28dd05)return;const _0x3ebe6e=currentCoins[_0x3d638e(0x260)](_0x1d401b=>_0x1d401b['symbol']==_0x19dbbe[_0x3d638e(0x26c)]),_0x41ed8e=_0x3e318c=>{const _0x1eb40d=_0x3d638e;if(_0x3ebe6e)_0x3ebe6e[_0x1eb40d(0x2bf)]=_0x3e318c;};let _0x3ed144=![];for(const _0x33044c of lastOrders){const _0x2ea51d=0x64,_0xf23597=0x1388;let _0x9d168f=0x0;while(!_0x33044c[_0x3d638e(0x2eb)]&&_0x9d168f*_0x2ea51d<_0xf23597){_0x9d168f++,await sleep(_0x2ea51d);}if(_0x9d168f>0x0)logger[_0x3d638e(0x2fa)](_0x3d638e(0x197)+_0x9d168f*_0x2ea51d/0x3e8+_0x3d638e(0x1b6));_0x33044c[_0x3d638e(0x2eb)]==_0x19dbbe['id']&&(_0x3ed144=!![]);}if(_0x2840e3==_0x3d638e(0x2fe)){_0x41ed8e(_0x3d638e(0x2fe));if(_0x19dbbe[_0x3d638e(0x209)]>0x0){if(_0x3ed144){setBlockTransactionDetection(!![]),logger['debug']('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x19dbbe['id']);const _0x90b04=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x90b04,setBlockTransactionDetection(![]);}else logger['debug']('1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20'+_0x19dbbe['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x2840e3==_0x3d638e(0x1aa)){_0x41ed8e('canceled');const _0x4b20d9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4b20d9,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2840e3==_0x3d638e(0x1a8)){if(lastOrders)for(const _0x4490cf of lastOrders){if(_0x4490cf[_0x3d638e(0x2eb)]==_0x19dbbe['id']){logger['debug'](_0x3d638e(0x19f)+_0x19dbbe['id']),_0x3ed144=!![];if(_0x4490cf[_0x3d638e(0x209)]==0x0){setBlockTransactionDetection(!![]),logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x19dbbe['id']);if(_0x19dbbe['average'])_0x4490cf[_0x3d638e(0x2a6)]=_0x19dbbe['average'];else{if(_0x19dbbe[_0x3d638e(0x2a6)])_0x4490cf[_0x3d638e(0x2a6)]=_0x19dbbe[_0x3d638e(0x2a6)];else{}}_0x4490cf[_0x3d638e(0x209)]=_0x19dbbe[_0x3d638e(0x209)],updateHighestFee(_0x4490cf),_0x41ed8e(_0x3d638e(0x209)),await validateOrders();if(lockOrders==ORDERS[_0x3d638e(0x15b)]){const _0x293a4c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x293a4c,setBlockTransactionDetection(![]);}_0x4490cf[_0x3d638e(0x232)]={'currency':_0x19dbbe['fee']?_0x19dbbe['fee'][_0x3d638e(0x2fc)]:null,'cost':_0x19dbbe['fee']?_0x19dbbe['fee'][_0x3d638e(0x1f0)]:0x0},await updateCoinResults(_0x4490cf);}}}!_0x3ed144&&(logger[_0x3d638e(0x2fa)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x19dbbe['id']),_0x41ed8e(_0x3d638e(0x209)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x28d662=JSON[_0x3d638e(0x193)](lastBalances['portfolio']);const _0x1e2944=_0x28d662[_0x3d638e(0x260)](_0x5684c3=>_0x5684c3[_0x3d638e(0x26c)]==_0x19dbbe[_0x3d638e(0x26c)]);if(_0x1e2944){if(_0x2840e3==_0x3d638e(0x2fe))_0x1e2944[_0x3d638e(0x2bf)]=_0x1e2944[_0x3d638e(0x2bf)]==_0x3d638e(0x209)?'filled':_0x3d638e(0x2fe);else{if(_0x2840e3==_0x3d638e(0x1aa))_0x1e2944[_0x3d638e(0x2bf)]=_0x1e2944[_0x3d638e(0x2bf)]==_0x3d638e(0x209)?'filled':'canceled';else _0x2840e3==_0x3d638e(0x1a8)&&(_0x1e2944[_0x3d638e(0x2bf)]=_0x3d638e(0x209));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x28d662)},proxyEmit(_0x3d638e(0x21c),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2b8203=_0x309e6f;await getOpenOrders();let _0xf6ff70=![];currentCoins[_0x2b8203(0x1e6)](_0x4f5949=>{const _0x52172e=_0x2b8203;_0xf6ff70=allOpenOrders[_0x52172e(0x260)](_0x17387a=>_0x17387a[_0x52172e(0x26c)]==_0x4f5949['symbol']),_0x4f5949['orderstatus']=_0xf6ff70?_0x52172e(0x2fe):'none';});}async function getCoins(_0x8e9b30=0x0,_0x57f002=!![],_0x2e2664=config[_0x309e6f(0x1c4)]){const _0x109aa7=_0x309e6f;let _0x4c987f,_0x566a90=[],_0x402fad=[],_0x57aad3=[];if(_0x8e9b30)await sleep(_0x8e9b30);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4c987f=await exchange['fetchBalance'](),mybalances=_0x4c987f[_0x109aa7(0x1cb)];for(const [_0x53bf77,_0xcd4c0c]of Object[_0x109aa7(0x1fe)](mybalances)){_0x57aad3[_0x109aa7(0x233)](_0x53bf77);}config['portfolio'][_0x109aa7(0x1e6)](_0x184ef0=>{const _0xa9b940=_0x109aa7;!_0x57aad3[_0xa9b940(0x1fa)](_0x184ef0[_0xa9b940(0x2ef)])&&(mybalances[_0x184ef0['coin']]=0x0);});if(_0x2e2664=='')for(const [_0x753250,_0x482c28]of Object[_0x109aa7(0x1fe)](mybalances)){_0x482c28!=0x0&&_0x566a90[_0x109aa7(0x233)]({'coin':_0x753250});}else for(const [_0x38680c,_0x18beaf]of Object['entries'](mybalances)){const _0x9e8d7f=config['portfolio']['find'](_0x16d804=>_0x16d804['coin']==_0x38680c),_0x505f48=_0x38680c+'/'+_0x2e2664,_0x53bb0c=_0x2e2664+'/'+_0x38680c,_0x527bb5=currentCoins['find'](_0x577eb4=>_0x577eb4[_0x109aa7(0x2ef)]==_0x38680c);if((_0x18beaf!=0x0||_0x9e8d7f)&&(allSymbols['includes'](_0x505f48)||_0x38680c==_0x2e2664))_0x527bb5?_0x566a90[_0x109aa7(0x233)]({..._0x527bb5,'number':Math[_0x109aa7(0x1da)](_0x18beaf+(_0x9e8d7f&&_0x9e8d7f[_0x109aa7(0x1f2)]||0x0),0x0)}):_0x566a90[_0x109aa7(0x233)]({'coin':_0x38680c,'symbol':_0x505f48,'reverse':![],'number':Math[_0x109aa7(0x1da)](_0x18beaf+(_0x9e8d7f&&_0x9e8d7f['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x18beaf!=0x0||_0x9e8d7f)&&allSymbols[_0x109aa7(0x1fa)](_0x53bb0c))_0x527bb5?_0x566a90['push']({..._0x527bb5,'number':Math['max'](_0x18beaf+(_0x9e8d7f&&_0x9e8d7f['offset']||0x0),0x0)}):_0x566a90[_0x109aa7(0x233)]({'coin':_0x38680c,'symbol':_0x53bb0c,'reverse':!![],'number':Math[_0x109aa7(0x1da)](_0x18beaf+(_0x9e8d7f&&_0x9e8d7f['offset']||0x0),0x0),'orderstatus':'none'});else _0x9e8d7f&&_0x566a90['push']({'coin':_0x9e8d7f['coin'],'symbol':_0x9e8d7f['symbol'],'reverse':_0x9e8d7f['reverse'],'number':0x0,'orderstatus':'none'});}}}catch(_0x3cc7f9){if(!_0x57f002)handleErrorNoStop(_0x3cc7f9,'getCoins()');else await handleError(_0x3cc7f9,'getCoins()');}return _0x566a90['sort']((_0x2b16dc,_0x358ec3)=>_0x2b16dc[_0x109aa7(0x1ba)]<_0x358ec3['delta']?0x1:_0x358ec3[_0x109aa7(0x1ba)]<_0x2b16dc[_0x109aa7(0x1ba)]?-0x1:0x0),_0x402fad=cloneDeep(_0x566a90),_0x566a90=_0x566a90[_0x109aa7(0x224)](_0x5c1f5c=>{const _0x35cf14=_0x109aa7,_0x460ab5=config[_0x35cf14(0x1a3)][_0x35cf14(0x260)](_0x427ea7=>_0x427ea7[_0x35cf14(0x2ef)]==_0x5c1f5c[_0x35cf14(0x2ef)]);return _0x460ab5&&!_0x460ab5['excluded'];}),[_0x566a90,_0x402fad];}async function getCoinNumber(_0x29da71){const _0x46fa3d=_0x309e6f;let _0x42763d;try{const _0xa9fe43=await exchange[_0x46fa3d(0x214)]();_0x42763d=_0xa9fe43['total'][_0x29da71];}catch(_0x4d4d1f){await handleError(_0x4d4d1f,_0x46fa3d(0x2b2));}return _0x42763d;}async function getOpenOrders(){const _0x1f6fd9=_0x309e6f;let _0x5740a1;allOpenOrders=[];try{for(const _0x12a090 of config[_0x1f6fd9(0x1a3)]){!_0x12a090[_0x1f6fd9(0x150)]&&_0x12a090[_0x1f6fd9(0x2ef)]!=config[_0x1f6fd9(0x1c4)]&&(_0x5740a1=await exchange[_0x1f6fd9(0x2af)](_0x12a090[_0x1f6fd9(0x26c)]),_0x5740a1[_0x1f6fd9(0x2fd)]>0x0&&allOpenOrders[_0x1f6fd9(0x233)](_0x5740a1[0x0]));}}catch(_0x3c622f){await handleError(_0x3c622f,_0x1f6fd9(0x1c8));}}async function handleOpenOrders(_0x53aebf=0x0){const _0x2511e5=_0x309e6f;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x2511e5(0x15b)]&&allOrdersPlaced&&(_0x53aebf==0x0?(logger[_0x2511e5(0x2fa)](_0x2511e5(0x2e4)),_0x53aebf++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2511e5(0x2fa)](_0x2511e5(0x2f4)),validateOrders(_0x2511e5(0x279))));}async function testAPI(_0xb667d0){const _0x2d7143=_0x309e6f,_0x2bd4a2=ccxt['pro'][_0xb667d0[_0x2d7143(0x240)][_0x2d7143(0x20a)]()],_0xb93a22=new _0x2bd4a2({'apiKey':_0xb667d0['apiKey'],'secret':_0xb667d0['apiSecret'],'options':{'defaultType':'spot'}});if(_0xb667d0['apiPassword'])_0xb93a22[_0x2d7143(0x2f2)]=_0xb667d0[_0x2d7143(0x273)];try{await _0xb93a22['fetchBalance']();}catch(_0x5d8eb7){logger['debug']('Error\x20in\x20testAPI():\x20'+_0x5d8eb7[_0x2d7143(0x17b)]());throw _0x5d8eb7;}}function cloneDeep(_0x204d11){const _0x548e00=_0x309e6f;return JSON[_0x548e00(0x193)](JSON['stringify'](_0x204d11));}async function getPortfolio(_0x57b31c){const _0x5df9d0=_0x309e6f;let _0x8fb03c=[],_0x4f3943=[],_0x257f68=[],_0x13232a;_0x57b31c['apiKey']=decryptRSA(secure['privateKey'],_0x57b31c['apiKey']),_0x57b31c[_0x5df9d0(0x23c)]=decryptRSA(secure[_0x5df9d0(0x171)],_0x57b31c[_0x5df9d0(0x23c)]);if(_0x57b31c[_0x5df9d0(0x273)])_0x57b31c[_0x5df9d0(0x273)]=decryptRSA(secure[_0x5df9d0(0x171)],_0x57b31c[_0x5df9d0(0x273)]);if(_0x57b31c['apiKey']!==_0x5df9d0(0x2d3)||_0x57b31c[_0x5df9d0(0x23c)]!==_0x5df9d0(0x2d3)||_0x57b31c[_0x5df9d0(0x273)]&&_0x57b31c['apiPassword']!==_0x5df9d0(0x2d3)){if(config['exchange']){if(_0x57b31c[_0x5df9d0(0x15f)]==_0x5df9d0(0x2d3))_0x57b31c['apiKey']=config[_0x5df9d0(0x15f)];if(_0x57b31c['apiSecret']==_0x5df9d0(0x2d3))_0x57b31c['apiSecret']=config[_0x5df9d0(0x23c)];if(_0x57b31c[_0x5df9d0(0x273)]=='************')_0x57b31c[_0x5df9d0(0x273)]=config['apiPassword'];}try{await testAPI(_0x57b31c);}catch(_0x34457f){if(_0x34457f[_0x5df9d0(0x17b)]()[_0x5df9d0(0x1fa)]('AuthenticationError')){logHistory('error','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x5df9d0(0x27b),'Unknown\x20error\x20-\x20check\x20logs'),logger['debug']('Error\x20details\x20(0):',_0x34457f),proxyEmit(_0x5df9d0(0x166),![]);return;}}exchange?updateExchange(_0x57b31c[_0x5df9d0(0x15f)],_0x57b31c[_0x5df9d0(0x23c)],_0x57b31c['apiPassword']):await initExchange(_0x57b31c['exchange'],_0x57b31c[_0x5df9d0(0x15f)],_0x57b31c[_0x5df9d0(0x23c)],_0x57b31c[_0x5df9d0(0x273)]);await loadSymbols();const _0x2ca6ef=await getCoins(0x0,![],_0x57b31c[_0x5df9d0(0x1c4)]);_0x257f68=cloneDeep(_0x2ca6ef[0x1]);}else{const _0xc12052=await getCoins();_0x257f68=cloneDeep(_0xc12052[0x1]);}if(_0x57b31c[_0x5df9d0(0x1c4)]=='')proxyEmit(_0x5df9d0(0x166),!![]),proxyEmit(_0x5df9d0(0x21b),_0x257f68);else{_0x257f68[_0x5df9d0(0x1e6)](_0x539680=>{const _0x4cff7a=_0x5df9d0;if(_0x539680[_0x4cff7a(0x2ef)]!=_0x57b31c[_0x4cff7a(0x1c4)]&&allSymbols[_0x4cff7a(0x1fa)](_0x539680[_0x4cff7a(0x26c)]))_0x8fb03c['push'](_0x539680[_0x4cff7a(0x26c)]);});if(_0x8fb03c[_0x5df9d0(0x2fd)]==0x0)logHistory(_0x5df9d0(0x27b),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4f3943=await getTickers(_0x8fb03c);}catch(_0x282c01){logHistory(_0x5df9d0(0x27b),_0x5df9d0(0x286)),logger['debug']('Error\x20details\x20(1):',_0x282c01),proxyEmit(_0x5df9d0(0x166),![]);return;}_0x257f68[_0x5df9d0(0x1e6)](_0x386f7e=>{const _0x2912c0=_0x5df9d0;_0x386f7e[_0x2912c0(0x2ef)]!=_0x57b31c[_0x2912c0(0x1c4)]?_0x4f3943[_0x386f7e['symbol']]?_0x13232a=_0x386f7e[_0x2912c0(0x2ac)]?0x1/_0x4f3943[_0x386f7e[_0x2912c0(0x26c)]]['last']:_0x4f3943[_0x386f7e[_0x2912c0(0x26c)]][_0x2912c0(0x18b)]:_0x13232a=0x0:_0x13232a=0x1,_0x386f7e[_0x2912c0(0x2a6)]=formatResult(_0x13232a,0x8);}),await getMarketCap(_0x257f68),proxyEmit(_0x5df9d0(0x166),!![]),proxyEmit(_0x5df9d0(0x21b),_0x257f68);}}}function truncateTradeAmount(_0x2e96a4,_0x31443d){const _0x3082cf=_0x309e6f;let _0x1cfe22=0x0;try{_0x1cfe22=exchange[_0x3082cf(0x1dd)](_0x2e96a4,_0x31443d);}catch(_0x1c9a23){}return _0x1cfe22;}function checkMinimums(_0x49a4b1){const _0x1226c7=_0x309e6f;let _0x28661d=!![];const _0x9aeba8=!_0x49a4b1[_0x1226c7(0x2ac)]?markets[_0x49a4b1[_0x1226c7(0x26c)]]['limits']['amount'][_0x1226c7(0x2cd)]:markets[_0x49a4b1[_0x1226c7(0x26c)]][_0x1226c7(0x13e)][_0x1226c7(0x1f0)][_0x1226c7(0x2cd)],_0x3a347c=!_0x49a4b1['reverse']?markets[_0x49a4b1[_0x1226c7(0x26c)]]['limits']['cost'][_0x1226c7(0x2cd)]:markets[_0x49a4b1['symbol']][_0x1226c7(0x13e)]['amount']['min'],_0x9d7785=truncateTradeAmount(_0x49a4b1[_0x1226c7(0x26c)],_0x49a4b1[_0x1226c7(0x263)]);_0x49a4b1[_0x1226c7(0x263)]=_0x9d7785;if(Math['abs'](_0x9d7785)<_0x9aeba8)_0x28661d=![];if(Math[_0x1226c7(0x218)](_0x9d7785)*_0x49a4b1['last']<_0x3a347c)_0x28661d=![];if(_0x49a4b1[_0x1226c7(0x222)]=='sell'){let _0x208370=config[_0x1226c7(0x1a3)][_0x1226c7(0x260)](_0x48261d=>_0x48261d[_0x1226c7(0x2ef)]==_0x49a4b1[_0x1226c7(0x2ef)]);if(_0x208370[_0x1226c7(0x1f2)]>0x0){if(Math[_0x1226c7(0x218)](_0x9d7785)>_0x49a4b1[_0x1226c7(0x23a)]-_0x208370[_0x1226c7(0x1f2)])_0x28661d=![];}else{if(Math[_0x1226c7(0x218)](_0x9d7785)>_0x49a4b1[_0x1226c7(0x23a)])_0x28661d=![];}}if(_0x49a4b1['side']==_0x1226c7(0x1bd)){let _0x34caa9=config['portfolio'][_0x1226c7(0x260)](_0x244bbf=>_0x244bbf[_0x1226c7(0x2ef)]==config[_0x1226c7(0x1c4)]),_0x90a604=currentCoins['find'](_0x252a1e=>_0x252a1e[_0x1226c7(0x2ef)]==config[_0x1226c7(0x1c4)]);if(_0x34caa9['offset']>0x0){if(Math[_0x1226c7(0x218)](_0x9d7785)*_0x49a4b1[_0x1226c7(0x18b)]>_0x90a604[_0x1226c7(0x23a)]-_0x34caa9[_0x1226c7(0x1f2)])_0x28661d=![];}else{if(Math['abs'](_0x9d7785)*_0x49a4b1[_0x1226c7(0x18b)]>_0x90a604[_0x1226c7(0x23a)])_0x28661d=![];}}return _0x28661d;}async function getBalances(_0x1c722d=!![]){const _0x3ec28d=_0x309e6f;let _0x1a2c9b=0x0,_0x1d8f46;const _0x4acbaa=config[_0x3ec28d(0x1ac)];if(config[_0x3ec28d(0x186)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x3ec28d(0x1e6)](_0x26635b=>{const _0x42b798=_0x3ec28d;if(_0x26635b[_0x42b798(0x2ef)]!=config['basecoin']){let _0x40d77c=gTicker[noslash(_0x26635b[_0x42b798(0x26c)])];_0x1d8f46=_0x26635b[_0x42b798(0x2ac)]?0x1/_0x40d77c:_0x40d77c;}else _0x1d8f46=0x1;let _0x3b501b=_0x26635b[_0x42b798(0x23a)]*_0x1d8f46;_0x1a2c9b+=_0x3b501b,_0x26635b[_0x42b798(0x18b)]=formatResult(Number(_0x1d8f46),0x8),_0x26635b[_0x42b798(0x2f7)]=_0x3b501b;}),currentCoins[_0x3ec28d(0x1e6)](_0x569f94=>{const _0x47623f=_0x3ec28d;let _0x4acd69=config[_0x47623f(0x1a3)][_0x47623f(0x260)](_0x5e7a2e=>_0x5e7a2e[_0x47623f(0x2ef)]==_0x569f94['coin']),_0x300eb0=Number(_0x4acd69[_0x47623f(0x22a)]),_0x56090b=_0x569f94[_0x47623f(0x2f7)]/_0x1a2c9b*0x64,_0x55b964=_0x300eb0*_0x1a2c9b/0x64/_0x569f94[_0x47623f(0x18b)]-_0x569f94['number'];_0x569f94[_0x47623f(0x22a)]=formatResult(_0x56090b,0x3),_0x569f94['target']=formatResult(_0x300eb0,0x3),_0x569f94['trade']=formatResult(_0x55b964,0x8),_0x569f94[_0x47623f(0x222)]='',_0x569f94[_0x47623f(0x14d)]=![];if(_0x569f94[_0x47623f(0x2ef)]!=config[_0x47623f(0x1c4)]){if(_0x569f94[_0x47623f(0x22a)]>_0x300eb0)_0x569f94['side']=_0x47623f(0x215),_0x569f94[_0x47623f(0x14d)]=checkMinimums(_0x569f94);else _0x569f94[_0x47623f(0x22a)]<_0x300eb0&&(_0x569f94['side']=_0x47623f(0x1bd),_0x569f94['valid']=checkMinimums(_0x569f94));}_0x569f94[_0x47623f(0x1ba)]=_0x569f94[_0x47623f(0x22a)]/_0x569f94[_0x47623f(0x294)]-0x1;if(_0x569f94[_0x47623f(0x2bf)]==_0x47623f(0x209)||_0x569f94[_0x47623f(0x2bf)]==_0x47623f(0x1aa))_0x569f94[_0x47623f(0x2bf)]=_0x47623f(0x178);}),currentCoins[_0x3ec28d(0x2a1)]((_0x20afb5,_0xeeb9b5)=>_0x20afb5[_0x3ec28d(0x1ba)]<_0xeeb9b5[_0x3ec28d(0x1ba)]?0x1:_0xeeb9b5[_0x3ec28d(0x1ba)]<_0x20afb5[_0x3ec28d(0x1ba)]?-0x1:0x0);const _0x4c103c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4c103c[_0x3ec28d(0x183)],'usd':_0x4c103c['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4acbaa},proxyEmit(_0x3ec28d(0x21c),{'serverversion':serverversion,'balances':lastBalances});if(_0x1c722d){if(config[_0x3ec28d(0x186)])headlessMode({'portfolio':currentCoins,'threshold':_0x4acbaa});else{if(lockOrders==ORDERS[_0x3ec28d(0x1e8)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4acbaa});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2c30f6=getNormalizedPerformance();getStartingBalances(_0x2c30f6),emitPerformance(_0x2c30f6);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1c393e=_0x309e6f;if(!lastBalances)return;let _0x141f32=[],_0x29a426,_0x17cee5=JSON['parse'](lastBalances['portfolio']);_0x17cee5[_0x1c393e(0x2a1)]((_0x830ae4,_0x68196a)=>_0x830ae4[_0x1c393e(0x2ef)]>_0x68196a[_0x1c393e(0x2ef)]?0x1:_0x68196a['coin']>_0x830ae4[_0x1c393e(0x2ef)]?-0x1:0x0),_0x17cee5[_0x1c393e(0x1e6)](_0x24dbd7=>{const _0x5e7947=_0x1c393e;let _0x12fe04={'coin':_0x24dbd7['coin'],'number':_0x24dbd7[_0x5e7947(0x23a)],'price':_0x24dbd7['last']};_0x141f32['push'](_0x12fe04);});const _0x32bcab=await getFiat();_0x29a426={'date':lastBalances[_0x1c393e(0x2b6)][_0x1c393e(0x2b0)]('\x20')[0x0],'eur':_0x32bcab['eur'],'usd':_0x32bcab['usd'],'coins':_0x141f32};let _0x169480=dbPerformance['get'](_0x1c393e(0x251))[_0x1c393e(0x260)]({'date':_0x29a426[_0x1c393e(0x189)]})['value']();_0x169480?_0x29a426[_0x1c393e(0x189)]!=config[_0x1c393e(0x160)]&&dbPerformance[_0x1c393e(0x192)](_0x1c393e(0x251))[_0x1c393e(0x260)]({'date':_0x29a426['date']})[_0x1c393e(0x285)](_0x29a426)[_0x1c393e(0x1e2)]():dbPerformance['get'](_0x1c393e(0x251))[_0x1c393e(0x233)](_0x29a426)[_0x1c393e(0x1e2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x55a717=_0x309e6f;let _0x1b1eb6=[];if(dbPerformance[_0x55a717(0x170)](_0x55a717(0x251))[_0x55a717(0x2f7)]()){let _0x36f476=dbPerformance[_0x55a717(0x192)]('data')[_0x55a717(0x25c)]()[_0x55a717(0x224)](_0x3d6156=>{const _0x23aa2d=_0x55a717;if(_0x3d6156['coins'][_0x23aa2d(0x2fd)]==0x0)return![];else return!![];})['sortBy']('date')[_0x55a717(0x2f7)](),_0x28d616=[...config['liquidity']];_0x28d616['sort']((_0x5838af,_0x4e0880)=>_0x5838af[_0x55a717(0x189)]>_0x4e0880[_0x55a717(0x189)]?-0x1:_0x4e0880[_0x55a717(0x189)]>_0x5838af['date']?0x1:0x0);let _0x14ef44=0x1,_0x50228b=[],_0x4024b4=0x0;_0x36f476['slice']()[_0x55a717(0x2ac)]()['forEach']((_0x595d30,_0x2740d8)=>{const _0x2ba861=_0x55a717;if(_0x28d616[_0x4024b4]){if(_0x36f476[_0x36f476[_0x2ba861(0x2fd)]-_0x2740d8]&&_0x28d616[_0x4024b4][_0x2ba861(0x189)]==_0x36f476[_0x36f476['length']-_0x2740d8][_0x2ba861(0x189)]){if(_0x2740d8<_0x36f476[_0x2ba861(0x2fd)]){let _0x59e7da=0x0,_0x3d87fd=0x0;_0x36f476[_0x36f476['length']-_0x2740d8][_0x2ba861(0x216)][_0x2ba861(0x1e6)](_0x3c5a17=>{const _0xe74b30=_0x2ba861;_0x3d87fd+=_0x3c5a17['number']*_0x3c5a17[_0xe74b30(0x2a6)];}),_0x28d616[_0x4024b4][_0x2ba861(0x25b)][_0x2ba861(0x1e6)](_0xe44349=>{const _0x42bf62=_0x2ba861;_0x59e7da+=_0xe44349[_0x42bf62(0x23a)]*_0xe44349['price'];}),_0x14ef44*=_0x59e7da/(_0x3d87fd-_0x59e7da)+0x1;}_0x4024b4++;}}let _0x1eae9d=0x0;_0x595d30[_0x2ba861(0x216)][_0x2ba861(0x1e6)](_0xe5ff4d=>{const _0x214e07=_0x2ba861;_0x1eae9d+=_0xe5ff4d[_0x214e07(0x23a)]*_0xe5ff4d['price'];}),_0x50228b[_0x36f476['length']-_0x2740d8-0x1]=_0x1eae9d*(_0x14ef44-0x1);});let _0x1dd72f=[];_0x28d616=[...config['liquidity']]||[];let _0x5e3c73=0x0;_0x4024b4=0x0,_0x36f476[_0x55a717(0x1e6)]((_0x10d9ce,_0x11a213)=>{const _0x301b62=_0x55a717;if(_0x28d616[_0x4024b4]){const _0x8a889c=fns['parse'](_0x28d616[_0x4024b4][_0x301b62(0x189)],_0x301b62(0x27e),new Date()),_0x67a1ba=fns[_0x301b62(0x193)](_0x10d9ce['date'],_0x301b62(0x27e),new Date());if(fns['isEqual'](_0x8a889c,_0x67a1ba)){let _0x260cfe=0x0;_0x28d616[_0x4024b4][_0x301b62(0x25b)][_0x301b62(0x1e6)](_0x3d2889=>{const _0x47fe5d=_0x301b62;!_0x1dd72f[_0x3d2889[_0x47fe5d(0x2ef)]]?_0x1dd72f[_0x3d2889['coin']]=_0x3d2889[_0x47fe5d(0x23a)]:(_0x260cfe=_0x1dd72f[_0x3d2889['coin']],_0x1dd72f[_0x3d2889[_0x47fe5d(0x2ef)]]+=_0x3d2889[_0x47fe5d(0x23a)]);const _0xc9aba2=_0x10d9ce[_0x47fe5d(0x216)]['find'](_0x4edf37=>_0x4edf37['coin']==_0x3d2889[_0x47fe5d(0x2ef)]);(!_0xc9aba2||_0xc9aba2['number']==0x0)&&(_0x5e3c73+=(-_0x3d2889[_0x47fe5d(0x23a)]-_0x260cfe)*_0x3d2889[_0x47fe5d(0x2a6)]);}),_0x4024b4++;}}_0x10d9ce[_0x301b62(0x216)][_0x301b62(0x1e6)]((_0x2de556,_0x2f75b7)=>{const _0x56e0e3=_0x301b62;_0x1dd72f[_0x2de556[_0x56e0e3(0x2ef)]]&&(_0x2de556[_0x56e0e3(0x20b)]=_0x1dd72f[_0x2de556['coin']]);}),_0x1b1eb6[_0x301b62(0x233)]({'date':_0x10d9ce[_0x301b62(0x189)],'eur':_0x10d9ce['eur'],'usd':_0x10d9ce['usd'],'offset':_0x50228b[_0x11a213],'netoffset':_0x5e3c73,'coins':_0x10d9ce['coins']});});}return _0x1b1eb6;}function emitPerformance(_0x164174){const _0x2c0f87=_0x309e6f;_0x164174[_0x2c0f87(0x2fd)]!==0x0?(proxyEmit(_0x2c0f87(0x2de),_0x164174),lastPerformanceEmitted=getDate()):proxyEmit(_0x2c0f87(0x2de),[]);}function getPerf(_0x1dfd96,_0x2b9be0){const _0x7a8441=_0x309e6f;let _0x101de2=0x0,_0x3f2d38=0x0,_0x23a904=0x0;_0x1dfd96[_0x7a8441(0x216)][_0x7a8441(0x1e6)](_0xf28195=>{const _0x169741=_0x7a8441;_0x101de2+=_0xf28195['number']*_0xf28195[_0x169741(0x2a6)];});_0x2b9be0&&(_0x101de2+=_0x1dfd96['offset']);if(config[_0x7a8441(0x1c4)]==='BTC'||config[_0x7a8441(0x1c4)]===_0x7a8441(0x16c)||config[_0x7a8441(0x1c4)]==='PAXG')_0x3f2d38=_0x101de2*_0x1dfd96['eur'],_0x23a904=_0x101de2*_0x1dfd96['usd'];else{if(usdBasecoins[_0x7a8441(0x1fa)](config[_0x7a8441(0x1c4)]))_0x3f2d38=_0x101de2*_0x1dfd96[_0x7a8441(0x183)]/_0x1dfd96[_0x7a8441(0x252)],_0x23a904=_0x101de2;else config[_0x7a8441(0x1c4)]===_0x7a8441(0x21d)&&(_0x3f2d38=_0x101de2,_0x23a904=_0x101de2*_0x1dfd96['usd']/_0x1dfd96[_0x7a8441(0x183)]);}return[_0x101de2,_0x3f2d38,_0x23a904];}function getKPIs(_0x169936,_0x27ffef='EUR'){const _0x4ea46a=_0x309e6f,_0x1da239=config[_0x4ea46a(0x1c4)],_0x36b7f4=lastBalances,_0x443e1e=currentCoins,_0x26ae04=getNormalizedPerformance(),_0x5bdd95=_0x169936==='basecoin'?_0x1da239:_0x169936===_0x4ea46a(0x280)||_0x169936===_0x4ea46a(0x264)?_0x27ffef:_0x4ea46a(0x2b1)+_0x1da239,_0x9ab867=_0x169936===_0x4ea46a(0x16f)?_0x4ea46a(0x18d):_0x169936===_0x4ea46a(0x264)?_0x4ea46a(0x18d):_0x5bdd95+_0x4ea46a(0x17e),_0x1f2ccf=_0x169936==='net-basecoin'||_0x169936===_0x4ea46a(0x264)?_0x4ea46a(0x18d):_0x5bdd95+'\x20change';let _0x439931=0x0;_0x443e1e[_0x4ea46a(0x1e6)](_0x40cc1d=>{const _0x5c9c76=_0x4ea46a;_0x439931+=_0x40cc1d[_0x5c9c76(0x23a)]*_0x40cc1d[_0x5c9c76(0x18b)];});if(_0x169936===_0x4ea46a(0x280)||_0x169936==='net-fiat'){if(_0x1da239===_0x4ea46a(0x2cf)||_0x1da239===_0x4ea46a(0x16c)||_0x1da239===_0x4ea46a(0x1df))_0x439931=_0x439931*(_0x27ffef===_0x4ea46a(0x21d)?_0x36b7f4['eur']:_0x36b7f4['usd']);else{if(usdBasecoins['includes'](_0x1da239))_0x439931=_0x439931*(_0x27ffef===_0x4ea46a(0x21d)?_0x36b7f4['eur']/_0x36b7f4[_0x4ea46a(0x252)]:0x1);else _0x1da239===_0x4ea46a(0x21d)&&(_0x439931=_0x439931*(_0x27ffef===_0x4ea46a(0x21d)?0x1:_0x36b7f4[_0x4ea46a(0x252)]/_0x36b7f4[_0x4ea46a(0x183)]));}}let _0x467fff;if(_0x439931!==0x0){if(_0x169936===_0x4ea46a(0x1c4))_0x467fff=(_0x439931/startingBalances[_0x4ea46a(0x1c4)]-0x1)*0x64;else{if(_0x27ffef===_0x4ea46a(0x21d))_0x467fff=(_0x439931/startingBalances[_0x4ea46a(0x183)]-0x1)*0x64;else _0x467fff=(_0x439931/startingBalances[_0x4ea46a(0x252)]-0x1)*0x64;}let _0x3dff41=0x0;if(startingBalances[_0x4ea46a(0x216)])_0x443e1e[_0x4ea46a(0x1e6)](_0x2fb40d=>{const _0x535841=_0x4ea46a;let _0x42df4f=startingBalances[_0x535841(0x216)]['find'](_0x1fff37=>_0x1fff37['coin']===_0x2fb40d[_0x535841(0x2ef)]);if(_0x42df4f&&_0x42df4f[_0x535841(0x2ef)]&&_0x2fb40d[_0x535841(0x23a)]!==0x0)_0x3dff41+=_0x42df4f['number']*_0x2fb40d[_0x535841(0x18b)];});let _0x5a5aff=0x0;if(_0x26ae04[_0x4ea46a(0x2fd)]!==0x0){let _0x5221e7=_0x26ae04[_0x26ae04[_0x4ea46a(0x2fd)]-0x1];_0x5a5aff=_0x5221e7[_0x4ea46a(0x172)];}_0x3dff41-=_0x5a5aff;_0x169936===_0x4ea46a(0x16f)&&(_0x467fff=(_0x439931-_0x3dff41)/startingBalances[_0x4ea46a(0x1c4)]*0x64,_0x439931=_0x439931-_0x3dff41);if(_0x169936===_0x4ea46a(0x264)){let _0x4a11c7=_0x27ffef===_0x4ea46a(0x21d)?startingBalances[_0x4ea46a(0x183)]:startingBalances[_0x4ea46a(0x252)];if(_0x1da239===_0x4ea46a(0x2cf)||_0x1da239===_0x4ea46a(0x16c)||_0x1da239===_0x4ea46a(0x1df))_0x3dff41=_0x27ffef===_0x4ea46a(0x21d)?_0x3dff41*_0x36b7f4[_0x4ea46a(0x183)]:_0x3dff41*_0x36b7f4[_0x4ea46a(0x252)];else{if(usdBasecoins[_0x4ea46a(0x1fa)](_0x1da239))_0x3dff41=_0x27ffef===_0x4ea46a(0x21d)?_0x3dff41*_0x36b7f4[_0x4ea46a(0x183)]/_0x36b7f4[_0x4ea46a(0x252)]:_0x3dff41;else _0x1da239==='EUR'&&(_0x3dff41=_0x27ffef===_0x4ea46a(0x21d)?_0x3dff41:_0x3dff41*_0x36b7f4[_0x4ea46a(0x252)]/_0x36b7f4[_0x4ea46a(0x183)]);}_0x467fff=(_0x439931-_0x3dff41)/_0x4a11c7*0x64,_0x439931=_0x439931-_0x3dff41;}if(_0x467fff){if(_0x467fff<0x64)_0x467fff=_0x467fff[_0x4ea46a(0x1b7)](0x2);else{if(_0x467fff<0x3e8)_0x467fff=_0x467fff[_0x4ea46a(0x1b7)](0x1);else _0x467fff=_0x467fff[_0x4ea46a(0x1b7)](0x0);}}else _0x467fff=Number('0')[_0x4ea46a(0x1b7)](0x2);if(_0x439931){if(Math['abs'](_0x439931)<0.000001)_0x439931=_0x439931['toFixed'](0x2);else{if(Math[_0x4ea46a(0x218)](_0x439931)<0.1)_0x439931=_0x439931[_0x4ea46a(0x1b7)](0x6);else{if(Math[_0x4ea46a(0x218)](_0x439931)<0x1)_0x439931=_0x439931['toFixed'](0x5);else{if(Math[_0x4ea46a(0x218)](_0x439931)<0xa)_0x439931=_0x439931[_0x4ea46a(0x1b7)](0x4);else{if(Math[_0x4ea46a(0x218)](_0x439931)<0x64)_0x439931=_0x439931[_0x4ea46a(0x1b7)](0x3);else{if(Math['abs'](_0x439931)<0x3e8)_0x439931=_0x439931['toFixed'](0x2);else _0x439931=_0x439931[_0x4ea46a(0x1b7)](0x2);}}}}}}else _0x439931=Number('0')[_0x4ea46a(0x1b7)](0x2);}else _0x467fff=Number('0')[_0x4ea46a(0x1b7)](0x2);return{'value':_0x439931,'change':_0x467fff,'leftTxt':_0x9ab867,'rightTxt':_0x1f2ccf};}async function getStartingBalances(_0x5d8db8,_0x27ac6b=!![]){const _0x13f506=_0x309e6f;if(_0x5d8db8[_0x13f506(0x2fd)]!==0x0){const [_0xdd5ec4,_0x168d6c,_0x4dc102]=getPerf(_0x5d8db8[0x0],!![]);let _0x6e3c15=[];config[_0x13f506(0x1a3)][_0x13f506(0x1e6)](_0x1d0aa9=>{const _0x832115=_0x13f506;let _0x4adcd9=0x0,_0xbd33df;config[_0x832115(0x13d)][_0x832115(0x1e6)](_0xcde26f=>{const _0x1441fa=_0x832115;let _0x235dfb=_0xcde26f[_0x1441fa(0x25b)][_0x1441fa(0x260)](_0x3e2730=>_0x3e2730[_0x1441fa(0x2ef)]==_0x1d0aa9[_0x1441fa(0x2ef)]);if(_0x235dfb){_0x4adcd9+=_0x235dfb[_0x1441fa(0x23a)];if(!_0xbd33df)_0xbd33df=_0x235dfb['price'];}}),_0x6e3c15[_0x832115(0x233)]({'coin':_0x1d0aa9[_0x832115(0x2ef)],'number':_0x4adcd9,'initialprice':_0xbd33df});});const _0x5731a1={'basecoin':_0xdd5ec4,'eur':_0x168d6c,'usd':_0x4dc102,'coins':_0x6e3c15};if(_0x27ac6b)proxyEmit(_0x13f506(0x2c7),_0x5731a1);startingBalances=_0x5731a1;}}function headlessMode(_0xde0093){const _0x1e6467=_0x309e6f;let _0xac6a27=_0xde0093[_0x1e6467(0x1a3)],_0x22cb42=_0xde0093[_0x1e6467(0x1ac)],_0x3e06d8=[];for(let _0x18f2a1 of _0xac6a27){if(_0x18f2a1[_0x1e6467(0x2ef)]!=config['basecoin']){if(_0x18f2a1[_0x1e6467(0x1ba)]>=_0x22cb42/0x64){if(_0x18f2a1['valid'])_0x3e06d8[_0x1e6467(0x233)](_0x18f2a1);}else{if(_0x18f2a1[_0x1e6467(0x1ba)]<=-_0x22cb42/0x64){if(_0x18f2a1[_0x1e6467(0x14d)])_0x3e06d8[_0x1e6467(0x233)](_0x18f2a1);}}}}_0x3e06d8['length']>0x0&&(lockOrders==ORDERS[_0x1e6467(0x1e8)]&&!coolingDown&&_0x3e06d8[_0x1e6467(0x1e6)](_0x36da4d=>{const _0x3f9d57=_0x1e6467;logger[_0x3f9d57(0x2fa)]('Trigger:\x20'+_0x36da4d[_0x3f9d57(0x2ef)]+'\x20'+_0x36da4d['number']+'\x20'+_0x36da4d[_0x3f9d57(0x18b)]+'\x20'+_0x36da4d['distribution']+'%\x20'+_0x36da4d[_0x3f9d57(0x294)]+'%\x20'+(0x64*_0x36da4d[_0x3f9d57(0x1ba)])[_0x3f9d57(0x1b7)](0x2)+_0x3f9d57(0x1c0)+_0x22cb42[_0x3f9d57(0x1b7)](0x2)+'%)');}),placeOrder(_0x3e06d8));}function notifyBalance(_0x1c11df){const _0x1b4ef3=_0x309e6f;let _0x21e3a6=_0x1c11df[_0x1b4ef3(0x1a3)],_0x585a6f=_0x1c11df[_0x1b4ef3(0x1ac)],_0x5c76ac=[];for(let _0x54d2a6 of _0x21e3a6){if(_0x54d2a6[_0x1b4ef3(0x2ef)]!=config[_0x1b4ef3(0x1c4)]){if(_0x54d2a6[_0x1b4ef3(0x1ba)]>=_0x585a6f/0x64){if(_0x54d2a6[_0x1b4ef3(0x14d)])_0x5c76ac[_0x1b4ef3(0x233)](_0x54d2a6);}else{if(_0x54d2a6['delta']<=-_0x585a6f/0x64){if(_0x54d2a6['valid'])_0x5c76ac[_0x1b4ef3(0x233)](_0x54d2a6);}}}}if(_0x5c76ac[_0x1b4ef3(0x2fd)]>0x0){let _0x5f44ef=_0x5c76ac['map'](_0x4af3d8=>_0x4af3d8['coin']);_0x5f44ef[_0x1b4ef3(0x2a1)]();let _0x4b3c7b=_0x5f44ef['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x1b4ef3(0x1b5));lastCoinsToBalance=_0x4b3c7b;}}function symbolToCoin(_0x4b741b){const _0x36b4ef=_0x309e6f;let _0x548f59;if(_0x4b741b[_0x36b4ef(0x1fa)]('/'+config['basecoin']))_0x548f59=_0x4b741b['replace']('/'+config['basecoin'],'');if(_0x4b741b[_0x36b4ef(0x1fa)](config['basecoin']+'/'))_0x548f59=_0x4b741b[_0x36b4ef(0x1b1)](config['basecoin']+'/','');return _0x548f59;}async function unlockOrders(){const _0x55c776=_0x309e6f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x55c776(0x15b)]){logger[_0x55c776(0x2fa)](_0x55c776(0x1d5)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x44e8ff=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x44e8ff,setBlockTransactionDetection(![]),validateOrdersState=_0x55c776(0x20b),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x55c776(0x2fa)](_0x55c776(0x146));}}async function validateOrders(_0x484ee0){const _0x51df87=_0x309e6f;if(_0x484ee0)validateOrdersState=_0x484ee0;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x51df87(0x1c5):'ORDERS.UNLOCKED'));let _0x25ff70=[],_0x4f7a9e=config[_0x51df87(0x24c)]==_0x51df87(0x23b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x51df87(0x198)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x51df87(0x15b)])return;logger['debug'](_0x51df87(0x1f7)+validateOrdersState),lastOrders[_0x51df87(0x1e6)](_0x205d73=>{const _0x1ac689=_0x51df87;let _0x2913af=![];_0x205d73[_0x1ac689(0x209)]>0x0&&(_0x2913af=!![]),_0x25ff70[_0x1ac689(0x233)](_0x2913af),_0x2913af&&config[_0x1ac689(0x24c)]!=_0x1ac689(0x23b)&&logHistory(_0x1ac689(0x155),_0x1ac689(0x272)+_0x205d73[_0x1ac689(0x26c)]+'\x20'+_0x205d73[_0x1ac689(0x222)]+'\x20#'+formatResult(_0x205d73[_0x1ac689(0x209)],0x8)+'\x20@'+formatResult(_0x205d73[_0x1ac689(0x2a6)],0x8));}),_0x25ff70[_0x51df87(0x1e6)]((_0x424a6e,_0xbd1aa7)=>{const _0x3a7249=_0x51df87;if(_0x424a6e)lastOrders[_0x3a7249(0x2bc)](_0xbd1aa7,0x1);}),persistOpenOrders(lastOrders);const _0xc52e26=coolingDown?_0x51df87(0x149):_0x51df87(0x265);if(validateOrdersState==_0x51df87(0x20b)){validateOrdersState=_0x51df87(0x17f);if(_0x25ff70[_0x51df87(0x1fa)](![])){if(config[_0x51df87(0x24c)]==_0x51df87(0x23b)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x51df87(0x17f)){if(_0x25ff70[_0x51df87(0x1fa)](![])){}else{if(allOrdersPlaced){if(config[_0x51df87(0x24c)]==_0x51df87(0x23b)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x51df87(0x21f))_0x25ff70[_0x51df87(0x1fa)](![])&&(config[_0x51df87(0x24c)]=='market'?logHistory(_0x51df87(0x1d9),_0x51df87(0x2cb)+Math[_0x51df87(0x2ae)](_0x4f7a9e*validateOrderInterval/0xea60)+_0x51df87(0x1dc)+_0xc52e26):(await cancelOrders(),logHistory(_0x51df87(0x1d9),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x51df87(0x2ae)](_0x4f7a9e*validateOrderInterval/0xea60)+_0x51df87(0x1dc)+_0xc52e26))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x51df87(0x24c)]!=_0x51df87(0x23b))logHistory('success',_0x51df87(0x1d0)+_0xc52e26);await unlockOrders();}}}}}async function cancelOrders(){const _0x3f6159=_0x309e6f;lastOrders[_0x3f6159(0x1e6)](async _0x66aa30=>{const _0x1de6df=_0x3f6159;try{const _0x27681e=await exchange[_0x1de6df(0x2a8)](_0x66aa30[_0x1de6df(0x2eb)],_0x66aa30['symbol']);}catch(_0x76c7be){if(_0x76c7be[_0x1de6df(0x17b)]()['includes']('OrderNotFound')){}else await handleError(_0x76c7be,_0x1de6df(0x1d1));}});}async function initCoinResults(_0x39534d){const _0x21b906=_0x309e6f;_0x39534d?logger[_0x21b906(0x2fa)](_0x21b906(0x2dc)+_0x39534d):logger['debug'](_0x21b906(0x217)),config[_0x21b906(0x1a3)][_0x21b906(0x1e6)](_0x55cce3=>{const _0x561c18=_0x21b906;if(!_0x55cce3['excluded']&&_0x55cce3[_0x561c18(0x2ef)]!=config[_0x561c18(0x1c4)]){const _0x969ec3=currentCoins[_0x561c18(0x260)](_0x39f28f=>_0x39f28f[_0x561c18(0x2ef)]==_0x55cce3['coin']),_0x36d47c=gTicker[noslash(_0x55cce3[_0x561c18(0x26c)])];let _0x2bd835=_0x969ec3?_0x969ec3['number']:null,_0x5d58b9=_0x55cce3[_0x561c18(0x2ac)]?0x1/_0x36d47c:_0x36d47c,_0x1f1332;config[_0x561c18(0x13d)]['forEach'](_0x5cf3be=>{const _0x4b35e2=_0x561c18;!_0x1f1332&&(_0x1f1332=_0x5cf3be[_0x4b35e2(0x25b)]['find'](_0x3ab1b9=>_0x3ab1b9[_0x4b35e2(0x2ef)]==_0x55cce3[_0x4b35e2(0x2ef)]),_0x1f1332&&(_0x2bd835=_0x1f1332[_0x4b35e2(0x23a)],_0x5d58b9=_0x1f1332[_0x4b35e2(0x2a6)]));});let _0x1d383f=dbCoinResults[_0x561c18(0x192)](_0x561c18(0x216))[_0x561c18(0x260)]({'coin':_0x55cce3[_0x561c18(0x2ef)]})[_0x561c18(0x2f7)]();if(!_0x1d383f){const _0x215451={'coin':_0x55cce3[_0x561c18(0x2ef)],'number':_0x2bd835,'breakeven':_0x5d58b9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x561c18(0x216))[_0x561c18(0x233)](_0x215451)['write']();}else{if(_0x39534d&&_0x55cce3[_0x561c18(0x2ef)]==_0x39534d){const _0x1d4b11={'coin':_0x55cce3[_0x561c18(0x2ef)],'number':_0x2bd835,'breakeven':_0x5d58b9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x561c18(0x192)](_0x561c18(0x216))['find']({'coin':_0x55cce3[_0x561c18(0x2ef)]})[_0x561c18(0x285)](_0x1d4b11)[_0x561c18(0x1e2)]();}}}});}async function updateCoinResults(_0x3f43b4,_0x1ba32b=![]){const _0x552aeb=_0x309e6f;let _0x58eddb,_0x444bbd,_0x34a7d5,_0x20b3c4,_0x2447c0,_0x229d09,_0x37efc5=dbCoinResults[_0x552aeb(0x192)]('coins')[_0x552aeb(0x260)]({'coin':_0x3f43b4[_0x552aeb(0x2ef)]})[_0x552aeb(0x2f7)](),_0x1b965a=![];_0x37efc5&&Object['entries'](_0x37efc5)[_0x552aeb(0x1e6)](([_0x15a214,_0x768134])=>{if(_0x768134==null)_0x1b965a=!![];});(!_0x37efc5||_0x1b965a)&&(await initCoinResults(_0x3f43b4[_0x552aeb(0x2ef)]),_0x37efc5=dbCoinResults[_0x552aeb(0x192)](_0x552aeb(0x216))['find']({'coin':_0x3f43b4[_0x552aeb(0x2ef)]})['value']());_0x3f43b4[_0x552aeb(0x2ac)]&&(_0x229d09={'filled':_0x3f43b4[_0x552aeb(0x209)]*_0x3f43b4[_0x552aeb(0x2a6)],'amount':_0x3f43b4['filled']*_0x3f43b4[_0x552aeb(0x2a6)],'side':_0x3f43b4[_0x552aeb(0x222)]==_0x552aeb(0x215)?_0x552aeb(0x1bd):_0x552aeb(0x215),'price':0x1/_0x3f43b4['price']},_0x3f43b4={..._0x3f43b4,..._0x229d09});_0x1ba32b?_0x444bbd=_0x3f43b4[_0x552aeb(0x222)]==_0x552aeb(0x1bd)?_0x37efc5[_0x552aeb(0x23a)]+_0x3f43b4['filled']:_0x37efc5['number']-_0x3f43b4[_0x552aeb(0x209)]:_0x444bbd=await getCoinNumber(_0x3f43b4[_0x552aeb(0x2ef)]);if(_0x3f43b4['fee']&&_0x3f43b4[_0x552aeb(0x232)]['currency']==config[_0x552aeb(0x1c4)])_0x58eddb=Number(_0x3f43b4[_0x552aeb(0x232)][_0x552aeb(0x1f0)]);else{if(_0x3f43b4[_0x552aeb(0x232)]&&_0x3f43b4[_0x552aeb(0x232)][_0x552aeb(0x2fc)]==_0x552aeb(0x274)&&!_0x1ba32b&&config['basecoin']!=_0x552aeb(0x1df))_0x58eddb=Number(_0x3f43b4[_0x552aeb(0x232)][_0x552aeb(0x1f0)])*gTicker[_0x552aeb(0x274)+config[_0x552aeb(0x1c4)]];else _0x58eddb=defaultFee*_0x3f43b4[_0x552aeb(0x209)]*_0x3f43b4[_0x552aeb(0x2a6)];}_0x3f43b4[_0x552aeb(0x222)]=='buy'?(_0x34a7d5=_0x444bbd!=0x0?(_0x37efc5[_0x552aeb(0x1c2)]*_0x37efc5[_0x552aeb(0x23a)]+_0x3f43b4[_0x552aeb(0x2a6)]*(_0x444bbd-_0x37efc5['number'])+_0x58eddb)/_0x444bbd:0x0,_0x20b3c4=_0x37efc5[_0x552aeb(0x2c9)]):(_0x34a7d5=_0x444bbd!=0x0?(_0x37efc5[_0x552aeb(0x1c2)]*_0x37efc5['number']-_0x3f43b4[_0x552aeb(0x2a6)]*(_0x37efc5[_0x552aeb(0x23a)]-_0x444bbd)+_0x58eddb)/_0x444bbd:0x0,_0x20b3c4=_0x37efc5['realized']+(_0x3f43b4[_0x552aeb(0x2a6)]-_0x37efc5[_0x552aeb(0x1c2)])*_0x3f43b4[_0x552aeb(0x209)]);_0x2447c0=(_0x3f43b4[_0x552aeb(0x2a6)]-_0x34a7d5-_0x58eddb/_0x3f43b4['filled'])*_0x444bbd;let _0x567750={'coin':_0x3f43b4[_0x552aeb(0x2ef)],'number':_0x444bbd,'breakeven':formatResult(_0x34a7d5,0x8),'realized':formatResult(_0x20b3c4,0x8),'unrealized':formatResult(_0x2447c0,0x8),'fees':formatResult(_0x37efc5[_0x552aeb(0x1db)]+_0x58eddb,0x8),'sells':_0x3f43b4[_0x552aeb(0x222)]==_0x552aeb(0x215)?_0x37efc5[_0x552aeb(0x157)]+0x1:_0x37efc5[_0x552aeb(0x157)],'buys':_0x3f43b4[_0x552aeb(0x222)]=='buy'?_0x37efc5[_0x552aeb(0x153)]+0x1:_0x37efc5[_0x552aeb(0x153)]};dbCoinResults[_0x552aeb(0x192)]('coins')[_0x552aeb(0x260)]({'coin':_0x3f43b4['coin']})[_0x552aeb(0x285)](_0x567750)['write']();if(!_0x1ba32b){if(_0x3f43b4['fee']&&_0x3f43b4[_0x552aeb(0x232)][_0x552aeb(0x2fc)]==_0x552aeb(0x274)){const _0x9499bd=currentCoins[_0x552aeb(0x260)](_0x1a5580=>_0x1a5580[_0x552aeb(0x2ef)]==_0x552aeb(0x274));if(_0x9499bd){let _0x109a4a=dbCoinResults['get'](_0x552aeb(0x216))[_0x552aeb(0x260)]({'coin':_0x552aeb(0x274)})[_0x552aeb(0x2f7)]();_0x567750={..._0x109a4a,'number':_0x9499bd[_0x552aeb(0x23a)]},dbCoinResults[_0x552aeb(0x192)]('coins')['find']({'coin':_0x552aeb(0x274)})['assign'](_0x567750)[_0x552aeb(0x1e2)]();}}}}async function placeOrder(_0x4ccc75){const _0x59082d=_0x309e6f,_0x12cc3e=config[_0x59082d(0x24c)]==_0x59082d(0x23b)?'market':_0x59082d(0x2da);if(lockOrders==ORDERS[_0x59082d(0x1e8)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x59082d(0x15b)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x753676=![];lastOrders=[];for(const _0xe0173d of _0x4ccc75){let _0x1b7e84,_0x49e1e5,_0x5e9e37,_0x5ac343,_0x54ceb8,_0x670282=_0xe0173d['symbol'];try{const _0x666de0=await exchange[_0x59082d(0x247)](_0x670282);_0x1b7e84=_0xe0173d[_0x59082d(0x2ac)]?0x1/_0xe0173d[_0x59082d(0x18b)]:_0xe0173d[_0x59082d(0x18b)],_0x49e1e5=_0x666de0[_0x59082d(0x156)],_0x5e9e37=_0x666de0[_0x59082d(0x19a)];_0xe0173d[_0x59082d(0x2ac)]?(_0x5ac343=_0xe0173d['side']==_0x59082d(0x1bd)?'sell':'buy',_0x54ceb8=Math[_0x59082d(0x218)](_0xe0173d['trade'])/_0x1b7e84):(_0x5ac343=_0xe0173d[_0x59082d(0x222)],_0x54ceb8=Math[_0x59082d(0x218)](_0xe0173d[_0x59082d(0x263)]));_0x12cc3e==_0x59082d(0x2da)&&(config[_0x59082d(0x24c)]==_0x59082d(0x159)&&(_0x1b7e84=_0x5ac343==_0x59082d(0x1bd)?_0x49e1e5:_0x5e9e37),config['ordertype']==_0x59082d(0x2d2)&&(_0x1b7e84=_0x5ac343=='buy'?_0x5e9e37:_0x49e1e5));_0x54ceb8=formatResult(_0x54ceb8,0x8),_0x1b7e84=formatResult(_0x1b7e84,0x8);const _0x49cccd=_0x5ac343==_0x59082d(0x215)?config[_0x59082d(0x276)]?String[_0x59082d(0x2f8)]('0x'+config[_0x59082d(0x276)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x59082d(0x165)])+'\x20':'',_0x58c4ba=_0x12cc3e==_0x59082d(0x23b)?_0x59082d(0x27d):config[_0x59082d(0x24c)]==_0x59082d(0x159)?_0x59082d(0x2c1):_0x59082d(0x1f3),_0x2c6bf3=(Math[_0x59082d(0x1ff)](Math[_0x59082d(0x174)]()*0x35a4e900)+0x5f5e100)[_0x59082d(0x17b)]();lastOrders[_0x59082d(0x233)]({'customId':_0x2c6bf3,'symbol':_0x670282,'coin':_0xe0173d['coin'],'amount':_0x54ceb8,'price':_0x1b7e84,'side':_0x5ac343,'reverse':_0xe0173d[_0x59082d(0x2ac)],'filled':0x0});if(_0x12cc3e==_0x59082d(0x23b))logHistory(_0x59082d(0x155),''+_0x49cccd+_0x58c4ba+_0x59082d(0x248)+_0x670282+'\x20'+_0x5ac343+'\x20#'+formatResult(_0x54ceb8,0x8)+'\x20@'+formatResult(_0x1b7e84,0x8));else logHistory('order',''+_0x49cccd+_0x58c4ba+_0x59082d(0x248)+_0x670282+'\x20'+_0x5ac343+'\x20#'+formatResult(_0x54ceb8,0x8)+'\x20@'+formatResult(_0x1b7e84,0x8));let _0x3a5165;_0x12cc3e==_0x59082d(0x23b)?_0x5ac343==_0x59082d(0x1bd)&&[_0x59082d(0x1a0),'Bitget',_0x59082d(0x29d),_0x59082d(0x204),'Huobipro']['includes'](config[_0x59082d(0x240)])?_0x3a5165=await exchange['createOrder'](_0x670282,_0x12cc3e,_0x5ac343,_0x54ceb8,_0x1b7e84):_0x3a5165=await exchange[_0x59082d(0x1a6)](_0x670282,_0x12cc3e,_0x5ac343,_0x54ceb8,undefined):_0x3a5165=await exchange[_0x59082d(0x1a6)](_0x670282,_0x12cc3e,_0x5ac343,_0x54ceb8,_0x1b7e84);logger[_0x59082d(0x2fa)]('ID:\x20'+_0x3a5165['id']+_0x59082d(0x22d)+_0x2c6bf3);const _0x3b7124=lastOrders['length']-0x1;if(_0x3b7124>=0x0&&lastOrders[_0x3b7124][_0x59082d(0x14b)]==_0x2c6bf3){lastOrders[_0x3b7124][_0x59082d(0x2eb)]=_0x3a5165['id'];if(_0x3a5165[_0x59082d(0x1bb)])lastOrders[_0x3b7124][_0x59082d(0x1bb)]=_0x3a5165[_0x59082d(0x1bb)];if(_0x3a5165['price'])lastOrders[_0x3b7124][_0x59082d(0x2a6)]=_0x3a5165[_0x59082d(0x2a6)];lastOrders[_0x3b7124][_0x59082d(0x232)]=_0x3a5165['fee'];}if(config[_0x59082d(0x269)]!=0x0){let _0x5268c2=null;if(cooldownTracker[_0x59082d(0x2fd)]==config[_0x59082d(0x269)]-0x1)_0x5268c2=cooldownTracker['shift']();const _0xd33e10=getTimeStamp();cooldownTracker[_0x59082d(0x233)](_0xd33e10);if(_0x5268c2){const _0x328fec=fns['differenceInSeconds'](new Date(_0xd33e10),new Date(_0x5268c2));if(_0x328fec<cooldownInterval){logHistory(_0x59082d(0x27b),'Executed\x20'+config[_0x59082d(0x269)]+_0x59082d(0x200)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x59082d(0x1c9)),coolingDown=!![];break;}}}}catch(_0x355fed){if(_0x355fed['toString']()[_0x59082d(0x1fa)](_0x59082d(0x140)))lastOrders=lastOrders['filter'](_0x360117=>_0x360117[_0x59082d(0x26c)]!=_0x670282),logHistory(_0x59082d(0x27b),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x670282),_0x753676=!![];else{if(_0x355fed[_0x59082d(0x17b)]()['includes'](_0x59082d(0x1cf)))lastOrders=lastOrders[_0x59082d(0x224)](_0x4da642=>_0x4da642['symbol']!=_0x670282),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x670282),_0x753676=!![];else{if(_0x355fed['toString']()[_0x59082d(0x1fa)](_0x59082d(0x167)))lastOrders=lastOrders[_0x59082d(0x224)](_0x3e08a4=>_0x3e08a4['symbol']!=_0x670282),logHistory(_0x59082d(0x27b),_0x59082d(0x2d7)+_0x670282),logger[_0x59082d(0x2fa)](_0x355fed),_0x753676=!![];else _0x355fed[_0x59082d(0x17b)]()[_0x59082d(0x1fa)](_0x59082d(0x28d))?(lastOrders=lastOrders[_0x59082d(0x224)](_0x4a9a31=>_0x4a9a31[_0x59082d(0x26c)]!=_0x670282),logHistory(_0x59082d(0x27b),_0x59082d(0x14c)+_0x670282),_0x753676=!![]):(lastOrders=lastOrders[_0x59082d(0x224)](_0x26a541=>_0x26a541['symbol']!=_0x670282),await handleError(_0x355fed,_0x59082d(0x2a4),_0x670282));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x59082d(0x2fd)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4866e4=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x59082d(0x198)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4866e4);}else unlockOrders();_0x753676&&config['headless']&&(logHistory('error',_0x59082d(0x158)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x59082d(0x1d9),_0x59082d(0x288)));}else{if(coolingDown)!config[_0x59082d(0x186)]&&logHistory(_0x59082d(0x27b),_0x59082d(0x16e));else lockOrders!=ORDERS[_0x59082d(0x1e8)]&&(!config[_0x59082d(0x186)]&&(config[_0x59082d(0x24c)]==_0x59082d(0x23b)?logHistory(_0x59082d(0x27b),_0x59082d(0x17a)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5dfeef){const _0x2845c3=_0x309e6f,_0x18d8d9={...config,'openOrders':_0x5dfeef};let _0x57f02d=dbConfig[_0x2845c3(0x192)](_0x2845c3(0x182))[_0x2845c3(0x260)]({'botID':botID})[_0x2845c3(0x2f7)]();_0x57f02d&&dbConfig[_0x2845c3(0x192)](_0x2845c3(0x182))['find']({'botID':botID})[_0x2845c3(0x285)](_0x18d8d9)[_0x2845c3(0x1e2)]();}function restoreOrders(){const _0x7aac2c=_0x309e6f;let _0x2ad9c6;config[_0x7aac2c(0x20c)]&&allOpenOrders[_0x7aac2c(0x1e6)](_0x224808=>{const _0x481282=_0x7aac2c,_0x35e2b4=config[_0x481282(0x20c)][_0x481282(0x260)](_0x3f6e59=>_0x3f6e59['orderId']==_0x224808['id']);_0x35e2b4&&(lastOrders[_0x481282(0x233)](_0x35e2b4),_0x2ad9c6=_0x224808[_0x481282(0x22f)]);});if(lastOrders[_0x7aac2c(0x2fd)]>0x0){lockOrders=ORDERS[_0x7aac2c(0x15b)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x438d92=new Date()[_0x7aac2c(0x168)](),_0x2b0f0e=config[_0x7aac2c(0x24c)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x7aac2c(0x198)]*0x3c*0x3e8;if(_0x2ad9c6+_0x2b0f0e>_0x438d92){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x431de4=_0x7aac2c;validateOrders(_0x431de4(0x21f));},_0x2ad9c6+_0x2b0f0e-_0x438d92);}else validateOrders(_0x7aac2c(0x21f));}}async function sendMetricsTelegram(){const _0xa5963e=_0x309e6f;if(!coinsLoaded){process['send']({'telegrammsg':_0xa5963e(0x1d2)},_0x383370=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4bbb6d='';if(config['showname'])_0x4bbb6d='<b>'+config[_0xa5963e(0x184)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x4bbb6d=_0xa5963e(0x19e)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x7a5436=getKPIs(_0xa5963e(0x1c4)),_0x1fbae1=getKPIs(_0xa5963e(0x280),config[_0xa5963e(0x280)]),_0x2583b4=getKPIs(_0xa5963e(0x16f)),_0x527d55=getKPIs(_0xa5963e(0x264),config[_0xa5963e(0x280)]);_0x4bbb6d+=_0xa5963e(0x1f9),_0x4bbb6d+=_0x7a5436[_0xa5963e(0x291)]+_0xa5963e(0x185)+_0x7a5436[_0xa5963e(0x2f7)]+'\x0a',_0x4bbb6d+=_0x7a5436[_0xa5963e(0x2dd)]+':\x20'+_0x7a5436['change']+'%\x0a',_0x4bbb6d+=_0x1fbae1[_0xa5963e(0x291)]+_0xa5963e(0x185)+_0x1fbae1['value']+'\x0a',_0x4bbb6d+=_0x1fbae1[_0xa5963e(0x2dd)]+':\x20'+_0x1fbae1[_0xa5963e(0x2d1)]+'%\x0a',_0x4bbb6d+=_0x2583b4['leftTxt']+':\x20'+_0x2583b4[_0xa5963e(0x2f7)]+'\x20('+config[_0xa5963e(0x1c4)]+')\x0a',_0x4bbb6d+=_0x2583b4[_0xa5963e(0x2dd)]+':\x20'+_0x2583b4['change']+_0xa5963e(0x1c0)+config[_0xa5963e(0x1c4)]+')\x0a',_0x4bbb6d+=_0x527d55[_0xa5963e(0x291)]+':\x20'+_0x527d55[_0xa5963e(0x2f7)]+'\x20('+config['fiat']+')\x0a',_0x4bbb6d+=_0x527d55[_0xa5963e(0x2dd)]+':\x20'+_0x527d55[_0xa5963e(0x2d1)]+'%\x20('+config[_0xa5963e(0x280)]+')\x0a',_0x4bbb6d+=_0xa5963e(0x212),process[_0xa5963e(0x1a7)]({'telegrammsg':_0x4bbb6d},_0x34d592=>{});}async function sendPortfolioTelegram(){const _0x5bda27=_0x309e6f;if(!coinsLoaded||!currentCoins[0x0][_0x5bda27(0x22a)]){process['send']({'telegrammsg':_0x5bda27(0x1d2)},_0x37a50a=>{});return;}let _0x42a650='';if(config[_0x5bda27(0x2a2)])_0x42a650=_0x5bda27(0x2ca)+config[_0x5bda27(0x184)]+_0x5bda27(0x29e);else _0x42a650=_0x5bda27(0x19e)+botID+_0x5bda27(0x29e);_0x42a650+='<pre>',_0x42a650+=_0x5bda27(0x1d3),_0x42a650+=_0x5bda27(0x290),_0x42a650+=_0x5bda27(0x1d3),currentCoins['forEach'](_0x5a0256=>{const _0x29a2a8=_0x5bda27;_0x42a650+=_0x5a0256['coin'][_0x29a2a8(0x1d8)](0x7)+'|\x20'+formatPad(_0x5a0256['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x5a0256[_0x29a2a8(0x294)],0x2,0x6)+'|\x20'+formatPad(_0x5a0256[_0x29a2a8(0x1ba)]*0x64,0x2,0x6)+'\x0a';}),_0x42a650+=_0x5bda27(0x212),process[_0x5bda27(0x1a7)]({'telegrammsg':_0x42a650},_0x151b99=>{});}function formatPad(_0x40561f,_0x45d4a6,_0x1aa922){const _0x387742=_0x309e6f,_0x4785dd=formatResultString(_0x40561f,_0x45d4a6);return _0x4785dd?_0x4785dd[_0x387742(0x17c)](_0x1aa922):''[_0x387742(0x17c)](_0x1aa922);}function logHistory(_0x2f15ef,_0x215715,_0x30787d=''){const _0x4801eb=_0x309e6f;logger['full'](''+_0x215715);let _0x570d95={'time':getTimeStamp(),'type':_0x2f15ef,'event':_0x215715};dbLogs[_0x4801eb(0x192)](_0x4801eb(0x2cc))[_0x4801eb(0x233)](_0x570d95)[_0x4801eb(0x1e2)]();if(_0x30787d=='')_0x30787d=_0x215715;proxyEmit(_0x4801eb(0x1be),{'log':_0x570d95,'summary':_0x30787d}),process['send']({'telegram':{..._0x570d95,'botname':config[_0x4801eb(0x184)],'showname':config[_0x4801eb(0x2a2)]}},_0x5bbb79=>{});}function _0x3c5e(){const _0x59e6c6=['openOrders','Pausing\x20for\x20','update-liquidity','full','log','test','</pre>','InvalidNonce','fetchBalance','sell','coins','Initializing\x20coin\x20results','abs','pid','Fee\x20discount\x20refund\x20detected:\x20','portfolio2','balances','EUR','RETRY\x20-\x20Error\x20in\x20','final','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getStartingBalances','side','emitHistory','filter','1686565yRonFX','pop','indexOf','toUpperCase','\x20exchange','distribution','getHours','warning','\x20|\x20Custom\x20ID:\x20','getFullYear','timestamp','Resuming\x20(','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','fee','push','sortBy','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','-results.json','slider','ExchangeNotAvailable','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','number','market','apiSecret','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','switch-manual','bb-settings.json','exchange','watchTrades','marketcapsqrt','secure','\x20uses\x20','sendPortfolioTelegram','added','fetchTicker','\x20order:\x20','mkdirSync','0\x20-\x20EXECUTION:\x20','no\x20exchange\x20reloaded','ordertype','\x20-\x20bot\x20not\x20started','Invalid\x20symbol:\x20','format','RETRY\x20-\x20Problem\x20resolved\x20after\x20','data','usd','Block\x20transaction\x20detection:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','(((.+)+)+)+$','USDP','axios','shift','/USD','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','changes','cloneDeep','storeConfiguration','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','startnumber','find','bots','marketcapEnabled','trade','net-fiat','balancing\x20resumed','production','/EUR','environment','cooldown','getMonth','\x20>\x20details:','symbol','create','showConfig','memoryUsage','pro','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Order\x20filled:\x20','apiPassword','BNB','util','emojisell','change24h','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','no\x20open\x20orders','933381upQECg','error','remainingSymbols','Market','yyyy/MM/dd','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','fiat','kill','red_yellow_blue','lowdb/adapters/FileSync','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','assign','Unknown\x20error\x20-\x20check\x20logs','set','Cooldown\x20ended\x20-\x20balancing\x20resumed','status\x20code\x20401','\x20|\x20','Initiating\x20bot\x20restart','./config/','must\x20be\x20greater\x20than\x20minimum\x20amount','status','ExchangeError','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','leftTxt','/output-000.log','\x20MB','target','lowdb',':\x20timer\x20>','argv','enableFiatToggle','88eOvogd','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','coin-loading-progress','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Cex','\x20portfolio:</b>\x20\x0a\x0a','freeze','initclient','sort','showname','Portfolio\x20change\x20detected:\x20','placeOrder()','marketcapApi','price','./version.json','cancelOrder','defaults','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Binance','reverse','detectLiquidityChange()','round','fetchOpenOrders','split','Net\x20','getCoinNumber()','recent20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','RequestTimeout','time','\x20>\x20pausing\x20bot\x20for\x20','getSeconds','watchTradesForSymbols','slice','startsWith','splice','remove','event-history','orderstatus','2.3.5','Limit\x20(high-margin)','API-key\x20format\x20invalid','\x20minutes','storeHeadless','yargs/yargs','unlinkSync','starting-balances','sha256','realized','<b>','Order(s)\x20not\x20validated\x20after\x20','logs','min','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','BTC','staging','change','limit-low','************','3125642txiUly','storeFiat','Network\x20error\x20details:','Order\x20is\x20invalid:\x20','\x20-\x20','type','limit','Bot\x20','Resetting\x20coin\x20results:\x20','rightTxt','performance','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2.6.0','bot-',':\x20Bot\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','1\x20-\x20Handle\x20open\x20orders','watchTradesForSymbols()','2.6.22','date-fns','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started',')\x20|\x20exchange:\x20','quote','orderId','percentage','message','cancelLoading','coin','BNB/','637538TLXjjq','password','2.6.23','2\x20-\x20Handled\x20open\x20orders','Loading\x20completed','\x20/\x20','value','fromCodePoint','market_cap','debug','placeOrder','currency','length','open','existsSync','watchOrders','4039876imSKzC','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','restart','autoliquidity','liquidity','limits','writeFile','MIN_NOTIONAL','args','highest','path','exec','marketcap','2\x20-\x20Orders\x20unlocked','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','DDoSProtection','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','customId','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','valid','stringify','onepagemode','excluded','\x20>\x20[DEBUG]\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','buys','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','order','bid','sells','Avoiding\x20continuous\x20order\x20attempts','limit-high','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','LOCKED','5510372jrQyYO','token\x20is\x20expired','-config.json','apiKey','startdate','uncaughtException','Unknown\x20error:\x20','function','heapUsed','emojibuy','portfolio1','InvalidOrder','getTime','6PONiPK','.json','***','ETH','progress','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','net-basecoin','has','privateKey','netoffset','running','random','Insufficient\x20funds\x20to\x20execute\x20order:\x20','001','request-time','none','datetime','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','toString','padStart','exchanges','\x20value','ongoing','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Initializing\x20exchange','bot','eur','botname','\x20:\x20','headless','\x20attempts','configuration-stored','date','page','last','spot','Net\x20effect','Resetting\x20bot\x20history','USDT','Exchange\x20error\x20details:','Reset\x20|\x20','get','parse','-performance.json','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','quick','Waited\x20','timeout','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ask','keys','loadMarkets','basecoinvalue','<b>Bot\x20','1\x20-\x20FILLED\x20known\x20order:\x20','Bybit','\x20network\x20error:\x20','version','portfolio','InsufficientFunds','USD','createOrder','send','closed','Loading\x20symbols','canceled','\x20exchange\x20error:\x20','threshold','sqrt','toggleBotMode','createWriteStream','Exception\x20thrown\x20in\x20','replace','928131ircuRD','settings','substring','Manual\x20balancing\x20required','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','toFixed','Error\x20while\x20deleting\x20files:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','delta','amount','./logs/','buy','event','AuthenticationError','%\x20(','watchTrades()','breakeven','isEqual','basecoin','ORDERS.UNLOCKING','Symbol(s):\x20','apply','getOpenOrders()','\x20hour','starting-balance-','total','PermissionDenied','loading-canceled','bb-secure.json','Invalid\x20quantity','No\x20more\x20open\x20orders\x20-\x20','cancelOrders()','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','-------------------------------\x0a','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','1\x20-\x20Unlock\x20orders','-events.json','privateKeyFromPem','padEnd','success','max','fees','\x20minutes\x20-\x20','amountToPrecision','\x20has\x20a\x2024h\x20drop\x20of\x20','PAXG','search','map','write','getDate','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Exchange','forEach','startprice','UNLOCKED','Error\x20details:','ccxt','Initializing\x20exchange:\x20already\x20done','decrypt','process\x20','timeshift','Error:\x20Invalid\x20argument\x20','cost','fetchTickers','offset','Limit\x20(low-margin)','initTickers()','join','RateLimitExceeded','2\x20-\x20Validate\x20orders:\x20','deleteHistoryAlerts','<pre>','includes','decode64','configuration','/backup/','entries','floor','\x20orders\x20in\x20less\x20than\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20>\x20','watchOrders()','Huobi','colorscheme','exchange\x20reload','TUSD','removed','filled','toLowerCase','initial'];_0x3c5e=function(){return _0x59e6c6;};return _0x3c5e();}function emitHistory(_0x18d805={}){const _0x4b5344=_0x309e6f;Object[_0x4b5344(0x19b)](_0x18d805)[_0x4b5344(0x2fd)]==0x0&&(_0x18d805={'type':[_0x4b5344(0x155),_0x4b5344(0x1be)],'event':'','page':0x1});if(_0x18d805['type']['includes'](_0x4b5344(0x1be)))_0x18d805[_0x4b5344(0x2d9)][_0x4b5344(0x2bc)](_0x18d805[_0x4b5344(0x2d9)][_0x4b5344(0x227)]('event'),0x1,_0x4b5344(0x27b),_0x4b5344(0x22c),'success');if(dbLogs['has'](_0x4b5344(0x2cc))[_0x4b5344(0x2f7)]()){let _0x3554a6=dbLogs[_0x4b5344(0x192)](_0x4b5344(0x2cc))[_0x4b5344(0x224)](_0x212692=>{const _0x5dde22=_0x4b5344;if(_0x18d805[_0x5dde22(0x2d9)][_0x5dde22(0x2fd)]==0x0)return![];else return _0x18d805[_0x5dde22(0x2d9)][_0x5dde22(0x1fa)](_0x212692[_0x5dde22(0x2d9)]);})[_0x4b5344(0x224)](_0x184144=>{const _0x1bdb6c=_0x4b5344;if(_0x18d805[_0x1bdb6c(0x1be)]=='')return!![];else return _0x184144[_0x1bdb6c(0x1be)][_0x1bdb6c(0x20a)]()[_0x1bdb6c(0x1fa)](_0x18d805[_0x1bdb6c(0x1be)][_0x1bdb6c(0x20a)]());})[_0x4b5344(0x234)](_0x4b5344(0x2b6)),_0x2a0046=_0x3554a6[_0x4b5344(0x2f7)]()[_0x4b5344(0x2fd)];_0x3554a6=_0x3554a6[_0x4b5344(0x2ac)]()[_0x4b5344(0x2ba)]((_0x18d805['page']-0x1)*logPageSize,_0x18d805[_0x4b5344(0x18a)]*logPageSize-0x1)[_0x4b5344(0x2ac)]()['value'](),proxyEmit('event-history',{'logs':_0x3554a6,'total':_0x2a0046});}else proxyEmit(_0x4b5344(0x2be),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3dfeb1){const _0x471c7f=_0x309e6f;if(dbLogs['has'](_0x471c7f(0x2cc))['value']()){const _0x821109=dbLogs[_0x471c7f(0x192)]('logs')['sortBy'](_0x471c7f(0x2b6))[_0x471c7f(0x224)](_0x4731c7=>{const _0x4a3d67=_0x471c7f;return _0x4731c7[_0x4a3d67(0x2d9)]=='order';})['value']();dbLogs[_0x471c7f(0x192)]('logs')[_0x471c7f(0x2bd)]()[_0x471c7f(0x1e2)](),dbLogs[_0x471c7f(0x192)](_0x471c7f(0x2cc))['assign'](_0x821109)[_0x471c7f(0x1e2)](),emitHistory(_0x3dfeb1);}}async function pauseBot(_0x4c8544=pauseBotIntervalShort,_0x576e44,_0x32d1c7,_0x3bf613=![]){const _0xf186ff=_0x309e6f,_0xf0c1f7=new Date()['getTime']();if(!lastErrorShown||_0xf0c1f7-lastErrorShown>=_0x4c8544){lastErrorShown=_0xf0c1f7;if(!lastBotPause)lastBotPause=_0xf0c1f7,consecutivePauses=0x1;else{if(_0xf0c1f7-lastBotPause-_0x4c8544<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3bf613){logHistory('error',_0x576e44+_0xf186ff(0x220)),await killBot();return;}else logHistory(_0xf186ff(0x27b),_0x576e44+pauseBotMsg),_0x4c8544=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xf0c1f7;}_0x32d1c7?logger[_0xf186ff(0x2fa)]('('+consecutivePauses+')\x20'+_0x576e44+'\x20>\x20details:',_0x32d1c7):logger['debug']('('+consecutivePauses+')\x20'+_0x576e44);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x4c8544),botPaused=![],_0x4c8544==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x434768=_0x309e6f;botPaused=!![],await sleep(0x3e8),process[_0x434768(0x1a7)]({'stop':_0x434768(0x281)},_0x1a1eb1=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x58d902,_0x1ebe68){const _0x22497e=_0x309e6f;if(botPaused)return;const _0xc6585e=config[_0x22497e(0x240)]||_0x22497e(0x1e5);if(_0x1ebe68)logger['debug'](_0x22497e(0x1b0)+_0x1ebe68);const _0x50cdc4=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x58d902[_0x22497e(0x17b)]()[_0x22497e(0x1fa)](_0x22497e(0x2c2)))logHistory(_0x22497e(0x27b),_0xc6585e+_0x22497e(0x15a)),_0x50cdc4();else{if(_0x58d902[_0x22497e(0x17b)]()[_0x22497e(0x1fa)](_0x22497e(0x29c)))logHistory(_0x22497e(0x27b),_0xc6585e+_0x22497e(0x1b9)),_0x50cdc4();else _0x58d902[_0x22497e(0x17b)]()[_0x22497e(0x1fa)](_0x22497e(0x1bf))?(logHistory('error',_0xc6585e+_0x22497e(0x154)),logHistory('error',_0x22497e(0x1e4)),_0x50cdc4()):await handleError(_0x58d902,null);}}async function handleError(_0x4a9c37,_0x41d313,_0xb3fcd3=''){const _0x286327=_0x309e6f;if(botPaused)return;let _0x1405d3;const _0x2809d9=config['exchange']||_0x286327(0x1e5);if(_0x41d313)logger[_0x286327(0x2fa)]('Exception\x20thrown\x20in\x20'+_0x41d313);if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x148)))_0x1405d3=_0x2809d9+_0x286327(0x2ce),await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37['toString']()[_0x286327(0x1fa)](_0x286327(0x1f6)))_0x1405d3=_0x2809d9+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37[_0x286327(0x17b)]()['includes'](_0x286327(0x238))||_0x4a9c37['toString']()[_0x286327(0x1fa)]('OnMaintenance'))_0x1405d3=_0x2809d9+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x2b5)))_0x1405d3=_0x2809d9+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37['toString']()[_0x286327(0x1fa)](_0x286327(0x2b4)))_0x1405d3=_0x2809d9+_0x286327(0x1d4),await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x20a)]()[_0x286327(0x1fa)](_0x286327(0x22f))||_0x4a9c37[_0x286327(0x17b)]()['toLowerCase']()[_0x286327(0x1fa)](_0x286327(0x177)))_0x1405d3='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37[_0x286327(0x17b)]()['includes'](_0x286327(0x213)))_0x1405d3=_0x2809d9+_0x286327(0x29a),await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37 instanceof ccxt['NetworkError'])_0x1405d3=_0x2809d9+_0x286327(0x1a1)+_0x4a9c37['toString'](),logger[_0x286327(0x2fa)](_0x286327(0x2d6),_0x4a9c37),await pauseBot(undefined,_0x1405d3,_0x4a9c37);else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x2c2)))logHistory(_0x286327(0x27b),_0x2809d9+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x286327(0x27b),_0x286327(0x2aa)),await killBot();else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x29c)))logHistory('error',_0x2809d9+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x286327(0x27b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x1bf))&&_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x15d)))_0x1405d3=_0x2809d9+_0x286327(0x23d),await pauseBot(undefined,_0x1405d3,_0x4a9c37,!![]);else{if(_0x4a9c37['toString']()[_0x286327(0x1fa)](_0x286327(0x1bf)))config[_0x286327(0x273)]?_0x1405d3=_0x2809d9+_0x286327(0x147):_0x1405d3=_0x2809d9+_0x286327(0x14a),logHistory('error',_0x1405d3),logHistory(_0x286327(0x27b),_0x286327(0x2aa)),await killBot();else{if(_0x4a9c37[_0x286327(0x17b)]()['includes'](_0x286327(0x1cc)))logHistory(_0x286327(0x27b),_0x2809d9+_0x286327(0x27f)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4a9c37[_0x286327(0x17b)]()[_0x286327(0x1fa)](_0x286327(0x1a4)))logHistory(_0x286327(0x27b),_0x286327(0x175)+_0xb3fcd3);else{if(_0x4a9c37 instanceof ccxt[_0x286327(0x28f)]){_0x1405d3=_0x2809d9+_0x286327(0x1ab)+_0x4a9c37[_0x286327(0x17b)](),logHistory(_0x286327(0x27b),_0x1405d3),logger[_0x286327(0x2fa)](_0x286327(0x190),_0x4a9c37);if(_0xb3fcd3)logger[_0x286327(0x2fa)](_0x286327(0x1c6)+_0xb3fcd3);await pauseBot(undefined,_0x1405d3,_0x4a9c37);}else{_0x1405d3=_0x286327(0x162)+_0x4a9c37[_0x286327(0x17b)](),logHistory(_0x286327(0x27b),_0x1405d3),logger[_0x286327(0x2fa)](_0x1405d3+_0x286327(0x26b),_0x4a9c37);if(_0xb3fcd3)logger[_0x286327(0x2fa)](_0x286327(0x1c6)+_0xb3fcd3);await pauseBot(undefined,_0x1405d3);}}}}}}}}}}}}}}}}function decryptRSA(_0x2ad83e,_0x4f906e){const _0xb31c79=_0x309e6f,_0x5d95e4=forge['pki'][_0xb31c79(0x1d7)](_0x2ad83e),_0x3d9e8c=_0x5d95e4[_0xb31c79(0x1ec)](forge[_0xb31c79(0x275)][_0xb31c79(0x1fb)](_0x4f906e),'RSA-OAEP',{'md':forge['md'][_0xb31c79(0x2c8)][_0xb31c79(0x26d)](),'mgf1':{'md':forge['md'][_0xb31c79(0x2c8)][_0xb31c79(0x26d)]()}});return _0x3d9e8c;}async function withRetry(_0x440c4b,_0x135b95){const _0x2a8804=_0x309e6f;let _0x2e4c09=![],_0x3dd397=0x0,_0x3879a9,_0x425958;while(_0x3dd397<maxRetries){try{_0x3879a9=await _0x135b95();break;}catch(_0x1ecac3){_0x425958=_0x1ecac3,!_0x2e4c09?(_0x2e4c09=!![],logger[_0x2a8804(0x2fa)](_0x2a8804(0x21e)+_0x440c4b+':',_0x1ecac3[_0x2a8804(0x17b)]())):await sleep(retryInterval);}_0x3dd397++;}if(_0x3dd397==0x0)return _0x3879a9;if(_0x3dd397>=maxRetries)throw _0x425958;else return logger['debug'](_0x2a8804(0x250)+_0x3dd397+_0x2a8804(0x187)),_0x3879a9;}function formatResult(_0x1fcff3,_0x175536){const _0x5c7f9a=_0x309e6f;return parseFloat(_0x1fcff3[_0x5c7f9a(0x1b7)](_0x175536));}function formatResultTruncate(_0xdf6460,_0x3b0647){const _0x2d1f6d=_0x309e6f;let _0x14ea07=formatResultString(_0xdf6460,0xa),_0x31e441=_0x14ea07[_0x2d1f6d(0x227)]('.');return _0x31e441!=-0x1&&(_0x14ea07=_0x14ea07['slice'](0x0,_0x31e441+_0x3b0647+0x1)),Number(_0x14ea07);}function formatResultString(_0x44d7fa,_0x3566f8){const _0x17d295=_0x309e6f;let _0x1b2ac5;if(!(''+_0x44d7fa)[_0x17d295(0x1fa)]('e'))_0x1b2ac5=+(Math['round'](_0x44d7fa+'e+'+_0x3566f8)+'e-'+_0x3566f8);else{let _0x560360=(''+_0x44d7fa)[_0x17d295(0x2b0)]('e'),_0x3724a2='';+_0x560360[0x1]+_0x3566f8>0x0&&(_0x3724a2='+'),_0x1b2ac5=+(Math[_0x17d295(0x2ae)](+_0x560360[0x0]+'e'+_0x3724a2+(+_0x560360[0x1]+_0x3566f8))+'e-'+_0x3566f8);}return Number(_0x1b2ac5)[_0x17d295(0x1b7)](_0x3566f8);}function getServerTime(){const _0x30c1e3=_0x309e6f,_0x2619c4=new Date();return _0x2619c4[_0x30c1e3(0x22e)]()+'/'+(_0x2619c4[_0x30c1e3(0x26a)]()+0x1)[_0x30c1e3(0x17b)]()[_0x30c1e3(0x17c)](0x2,'0')+'/'+_0x2619c4[_0x30c1e3(0x1e3)]()[_0x30c1e3(0x17b)]()[_0x30c1e3(0x17c)](0x2,'0')+'\x20'+_0x2619c4[_0x30c1e3(0x22b)]()[_0x30c1e3(0x17b)]()[_0x30c1e3(0x17c)](0x2,'0')+':'+_0x2619c4['getMinutes']()[_0x30c1e3(0x17b)]()['padStart'](0x2,'0')+':'+_0x2619c4[_0x30c1e3(0x2b8)]()['toString']()[_0x30c1e3(0x17c)](0x2,'0');}function getTimeStamp(){const _0x26560b=_0x309e6f,_0x347257=shiftedTime();return _0x347257['getFullYear']()+'/'+(_0x347257[_0x26560b(0x26a)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x347257['getDate']()[_0x26560b(0x17b)]()[_0x26560b(0x17c)](0x2,'0')+'\x20'+_0x347257['getHours']()['toString']()[_0x26560b(0x17c)](0x2,'0')+':'+_0x347257['getMinutes']()[_0x26560b(0x17b)]()[_0x26560b(0x17c)](0x2,'0')+':'+_0x347257[_0x26560b(0x2b8)]()[_0x26560b(0x17b)]()[_0x26560b(0x17c)](0x2,'0');}function getDate(){const _0x40656d=_0x309e6f,_0x3224a2=shiftedTime();return _0x3224a2[_0x40656d(0x22e)]()+'/'+(_0x3224a2['getMonth']()+0x1)['toString']()[_0x40656d(0x17c)](0x2,'0')+'/'+_0x3224a2[_0x40656d(0x1e3)]()['toString']()[_0x40656d(0x17c)](0x2,'0');}function getHour(){const _0x4a2c31=_0x309e6f,_0x10ff79=shiftedTime();return _0x10ff79[_0x4a2c31(0x22b)]()[_0x4a2c31(0x17b)]()[_0x4a2c31(0x17c)](0x2,'0');}function sleep(_0x2bc1e9){return new Promise(_0x343a8c=>setTimeout(_0x343a8c,_0x2bc1e9));}function shiftedTime(){const _0x412cf0=_0x309e6f,_0x4b10b7=new Date();let _0x481766=_0x4b10b7;if(config&&config[_0x412cf0(0x1ee)]!==0x0)_0x481766=fns['add'](_0x4b10b7,{'hours':config[_0x412cf0(0x1ee)]});return _0x481766;}function timer(_0x2cd363){const _0x38e70a=_0x309e6f,_0x5b1687=new Date();!lasttime?console[_0x38e70a(0x210)](getTimeStamp()+_0x38e70a(0x296),_0x2cd363,_0x5b1687):console['log'](getTimeStamp()+':\x20timer\x20>',_0x2cd363,(_0x5b1687-lasttime)/0x3e8),lasttime=_0x5b1687;}