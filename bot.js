const _0xc95087=_0x5bad;(function(_0x1fae2b,_0x3748a5){const _0x264959=_0x5bad,_0x363b07=_0x1fae2b();while(!![]){try{const _0x297b92=-parseInt(_0x264959(0x256))/0x1+-parseInt(_0x264959(0x2ab))/0x2*(-parseInt(_0x264959(0x262))/0x3)+parseInt(_0x264959(0x1ac))/0x4+-parseInt(_0x264959(0x1b5))/0x5+parseInt(_0x264959(0x1ef))/0x6+parseInt(_0x264959(0x1ba))/0x7*(-parseInt(_0x264959(0x133))/0x8)+parseInt(_0x264959(0x1e6))/0x9;if(_0x297b92===_0x3748a5)break;else _0x363b07['push'](_0x363b07['shift']());}catch(_0x8ba3e4){_0x363b07['push'](_0x363b07['shift']());}}}(_0x43cf,0xa552a));const _0xda0302=function(){let _0x5dff54=!![];return function(_0x61456b,_0x58e47a){const _0x374167=_0x5dff54?function(){if(_0x58e47a){const _0x2b05f6=_0x58e47a['apply'](_0x61456b,arguments);return _0x58e47a=null,_0x2b05f6;}}:function(){};return _0x5dff54=![],_0x374167;};}(),_0x515178=_0xda0302(this,function(){const _0x5c1d69=_0x5bad;return _0x515178['toString']()['search'](_0x5c1d69(0x27b))[_0x5c1d69(0x15d)]()[_0x5c1d69(0x134)](_0x515178)[_0x5c1d69(0x11b)](_0x5c1d69(0x27b));});_0x515178();'use strict';const ccxt=require(_0xc95087(0x23d)),low=require(_0xc95087(0x17f)),FileSync=require(_0xc95087(0x28b)),fs=require('fs'),fns=require(_0xc95087(0x28e)),Crypt=require(_0xc95087(0x202))['Crypt'],util=require('util'),argv=require(_0xc95087(0x112))(process['argv'][_0xc95087(0x13b)](0x2))[_0xc95087(0x1dc)],path=require(_0xc95087(0x1b9));let exchange;global[_0xc95087(0x25a)]={},global['change']={};const usdBasecoins=[_0xc95087(0x1ff),_0xc95087(0x15f),_0xc95087(0x257),_0xc95087(0x1e9),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xc95087(0x207)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xc95087(0x18f)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xc95087(0x252)+pauseBotInterval/0xea60+_0xc95087(0x20a),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0xc95087(0x121)],botID=process[_0xc95087(0x1dc)][0x2]||_0xc95087(0x192),pattern=/^[0-9]{3}$/;!pattern[_0xc95087(0x1f6)](botID)&&(console['log'](_0xc95087(0x176)+botID+_0xc95087(0x226)),killBot());const userID=process[_0xc95087(0x1dc)][0x3]||'',configpath=userID?_0xc95087(0x2a8)+userID+'/':_0xc95087(0x2a8),logspath=userID?_0xc95087(0x18a)+userID+'/':'./logs/',loggerfile=fs[_0xc95087(0x129)](logspath+_0xc95087(0x2ad),{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0xc95087(0x131)](logspath)&&fs[_0xc95087(0x139)](logspath);const configfile=configpath+_0xc95087(0x214)+botID+_0xc95087(0x269),logfile=configpath+_0xc95087(0x214)+botID+_0xc95087(0x1e3),performancefile=configpath+_0xc95087(0x214)+botID+_0xc95087(0x151),coinresultsfile=configpath+_0xc95087(0x214)+botID+'-results.json',settingsfile=configpath+_0xc95087(0x1d7),securefile=configpath+_0xc95087(0x22d),configbackuppath=configpath+_0xc95087(0x1c8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xc95087(0x26f)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xc95087(0x26f)]({'data':[],'version':serverversion})[_0xc95087(0x172)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xc95087(0x26f)]({'bot':[],'version':serverversion})[_0xc95087(0x172)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xc95087(0x26f)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0xc95087(0x16f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x28fa81=>{const _0x307e22=_0xc95087;console[_0x307e22(0x1a4)](_0x28fa81);},'simple':_0xf4e5dd=>{const _0x2ba3d5=_0xc95087;console['log'](_0xf4e5dd),loggerfile[_0x2ba3d5(0x172)](util[_0x2ba3d5(0x1ae)](_0xf4e5dd)+'\x0a');},'full':async(_0x39dcfd,_0x59c0e1='')=>{const _0xd43e8a=_0xc95087;let _0x218e47;if(config[_0xd43e8a(0x27a)])_0x218e47=getTimeStamp()+':\x20'+config[_0xd43e8a(0x132)]+_0xd43e8a(0x297)+_0x39dcfd;else _0x218e47=getTimeStamp()+':\x20Bot\x20'+botID+_0xd43e8a(0x297)+_0x39dcfd;console['log'](_0x218e47),loggerfile[_0xd43e8a(0x172)](util[_0xd43e8a(0x1ae)](_0x218e47)+'\x0a'),_0x59c0e1&&(console[_0xd43e8a(0x1a4)](_0x59c0e1),loggerfile['write'](util['format'](_0x59c0e1)+'\x0a'));},'debug':async(_0x582f8f,_0x194ccf='')=>{const _0x4e29d1=_0xc95087;let _0x232716;if(config[_0x4e29d1(0x27a)])_0x232716=getTimeStamp()+':\x20'+config[_0x4e29d1(0x132)]+_0x4e29d1(0x184)+_0x582f8f;else _0x232716=getTimeStamp()+_0x4e29d1(0x157)+botID+_0x4e29d1(0x184)+_0x582f8f;if(debugging)console[_0x4e29d1(0x1a4)](_0x232716);loggerfile[_0x4e29d1(0x172)](util[_0x4e29d1(0x1ae)](_0x232716)+'\x0a');if(_0x194ccf){if(debugging)console[_0x4e29d1(0x1a4)](_0x194ccf);loggerfile[_0x4e29d1(0x172)](util[_0x4e29d1(0x1ae)](_0x194ccf)+'\x0a');}}};process['on'](_0xc95087(0x13d),function(_0x7cfe95){const _0x53e8db=_0xc95087;handleError(_0x7cfe95,_0x53e8db(0x13d));});settings[_0xc95087(0x254)]!=config[_0xc95087(0x254)]&&updateTimeshift(settings[_0xc95087(0x254)]);settings[_0xc95087(0x1d2)]!=config[_0xc95087(0x1d2)]&&updateOnepagemode(settings[_0xc95087(0x1d2)]);process[_0xc95087(0x1f4)]({'started':_0xc95087(0x158)},_0x58c0a6=>{}),initializeProcessListeners();function proxyEmit(_0x445b91,_0x2c1077=null){const _0x4bd4c0=_0xc95087;process[_0x4bd4c0(0x1f4)]({'function':_0x445b91,'args':_0x2c1077},_0x4b6c85=>{});}function initializeProcessListeners(){const _0xb95ac7=_0xc95087;process['on'](_0xb95ac7(0x1e7),_0x418c76=>{const _0x57540c=_0xb95ac7;switch(Object[_0x57540c(0x18b)](_0x418c76)[0x0]){case'timeshift':_0x418c76[_0x57540c(0x254)]!=undefined&&(settings[_0x57540c(0x254)]=_0x418c76[_0x57540c(0x254)],updateTimeshift(settings[_0x57540c(0x254)]));break;case _0x57540c(0x1d2):_0x418c76[_0x57540c(0x1d2)]!=undefined&&(settings[_0x57540c(0x1d2)]=_0x418c76['onepagemode'],updateOnepagemode(settings[_0x57540c(0x1d2)]));break;case _0x57540c(0x27d):_0x418c76['bots']!=undefined&&(bots=JSON[_0x57540c(0x1cd)](_0x418c76[_0x57540c(0x27d)]),proxyEmit(_0x57540c(0x27d),bots));break;case _0x57540c(0x26a):switch(_0x418c76['function']){case _0x57540c(0x261):initclient();break;case _0x57540c(0x136):toggleBotMode();break;case _0x57540c(0x205):emitHistory(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x233):deleteHistoryAlerts(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x146):getPortfolio(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x2aa):storeConfiguration(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x1a9):storeHeadless(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x21f):storeFiat(_0x418c76['args']);break;case _0x57540c(0x25d):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x57540c(0x173):placeOrder(_0x418c76[_0x57540c(0x17b)]);break;case _0x57540c(0x2a0):cancelLoading();break;case'showConfig':showConfig();break;case _0x57540c(0x1f3):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x100d80=![]){const _0x315ef5=_0xc95087;logger['debug'](_0x315ef5(0x2a1)+(_0x100d80?_0x315ef5(0x21e):_0x315ef5(0x1c2))+_0x315ef5(0x26e)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x100d80)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x315ef5(0x1c3)]!=''&&config[_0x315ef5(0x1c3)]!='***'){loadingProgress=0x0;if(_0x100d80){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x20db6c){handleErrorNoStop(_0x20db6c,_0x315ef5(0x12e));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4578c1=await getCoins();[currentCoins,currentCoinsAll]=_0x4578c1,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x315ef5(0x237)](_0x315ef5(0x27f)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x315ef5(0x21c)]==0x0&&allOpenOrders[_0x315ef5(0x21c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x26fc22=_0xc95087;exchangeStopped=!![];try{await exchange['close']();}catch(_0x11a424){await handleError(_0x11a424,_0x26fc22(0x264));}}async function reloadExchange(){const _0x14d70e=_0xc95087;while(lockOrders!=ORDERS[_0x14d70e(0x18f)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x14d70e(0x237)](_0x14d70e(0x271)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3f4440=config[_0xc95087(0x113)],_0x539bcb=config[_0xc95087(0x1c3)],_0x4aeb71=config[_0xc95087(0x186)],_0x38c17c=config[_0xc95087(0x19a)]){const _0x581ef8=_0xc95087;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x3f4440)&&(logHistory('error',_0x581ef8(0x2a5)+_0x3f4440+_0x581ef8(0x26d)),killBot());const _0x1900b8=ccxt[_0x581ef8(0x1dd)][_0x3f4440['toLowerCase']()];exchange=new _0x1900b8({'apiKey':_0x539bcb,'secret':_0x4aeb71,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot','watchPositions':{'fetchPositionsSnapshot':![],'awaitPositionsSnapshot':![]}}});if(_0x38c17c)exchange[_0x581ef8(0x12d)]=_0x38c17c;}function setStableCoins(){const _0x5eb25e=_0xc95087;let _0x83aede=config[_0x5eb25e(0x1d0)]==_0x5eb25e(0x1af)?_0x5eb25e(0x1af):config[_0x5eb25e(0x1d0)]==_0x5eb25e(0x1fc)?_0x5eb25e(0x1fc):_0x5eb25e(0x1da),_0x534f12=!allSymbols[_0x5eb25e(0x242)](_0x83aede+_0x5eb25e(0x259))?_0x5eb25e(0x1e9):'USD',_0x1c8c7b=!allSymbols[_0x5eb25e(0x242)](_0x83aede+_0x5eb25e(0x25b))?_0x534f12:_0x5eb25e(0x1f0);stablecoins={'eur':{'coin':''+_0x83aede+_0x1c8c7b,'symbol':_0x83aede+'/'+_0x1c8c7b},'usd':{'coin':''+_0x83aede+_0x534f12,'symbol':_0x83aede+'/'+_0x534f12}};}async function initwsCcxt(){const _0x2a4b81=_0xc95087;initCycle++;const _0xcf667e=initCycle;let _0x342ff7=[];config[_0x2a4b81(0x12b)][_0x2a4b81(0x20d)](_0x27c402=>{const _0x2a74a2=_0x2a4b81;if(!_0x27c402[_0x2a74a2(0x195)]&&_0x27c402[_0x2a74a2(0x223)]!=config[_0x2a74a2(0x1d0)])_0x342ff7[_0x2a74a2(0x2a9)](_0x27c402[_0x2a74a2(0x182)]);});if(!_0x342ff7['includes'](stablecoins[_0x2a4b81(0x1ea)][_0x2a4b81(0x182)]))_0x342ff7[_0x2a4b81(0x2a9)](stablecoins['eur'][_0x2a4b81(0x182)]);if(!_0x342ff7[_0x2a4b81(0x242)](stablecoins[_0x2a4b81(0x206)]['symbol']))_0x342ff7['push'](stablecoins[_0x2a4b81(0x206)][_0x2a4b81(0x182)]);if(config[_0x2a4b81(0x113)]['startsWith']('Binance')&&config['basecoin']!=_0x2a4b81(0x1fc)){if(!_0x342ff7[_0x2a4b81(0x242)](_0x2a4b81(0x211)+config[_0x2a4b81(0x1d0)]))_0x342ff7[_0x2a4b81(0x2a9)]('BNB/'+config['basecoin']);}loadCoins(_0x342ff7),_0x342ff7=validateSymbols(_0x342ff7);const _0x335c3c=async _0xb38fd7=>{const _0x43d82d=_0x2a4b81;let _0x3666bb;try{const _0x35d48d=await getTickers(_0xb38fd7);Object[_0x43d82d(0x229)](_0x35d48d)[_0x43d82d(0x20d)](_0x22c0c3=>{const _0x2db978=_0x43d82d;_0x3666bb=_0x22c0c3[0x1]['symbol'],global[_0x2db978(0x25a)][noslash(_0x3666bb)]=_0x22c0c3[0x1][_0x2db978(0x144)],global['change'][_0x3666bb]=_0x22c0c3[0x1][_0x2db978(0x11c)];});}catch(_0x59e43d){await handleError(_0x59e43d,_0x43d82d(0x247),_0x3666bb);}},_0x5b89ac=async _0x5367cd=>{const _0x36853d=_0x2a4b81;while(initCycle==_0xcf667e){if(!botPaused)try{const _0x42c156=await exchange[_0x36853d(0x276)](_0x5367cd);global[_0x36853d(0x25a)][noslash(_0x42c156[0x0][_0x36853d(0x182)])]=_0x42c156[0x0][_0x36853d(0x197)],await sleep(0x3e8);}catch(_0x28995c){if(!exchangeStopped)await handleError(_0x28995c,_0x36853d(0x299),_0x5367cd);}else await sleep(0x64);}},_0x5951f8=async _0x5385ab=>{const _0x10b8f1=_0x2a4b81;while(initCycle==_0xcf667e){if(!botPaused){let _0x3d0a00;try{await sleep(0x3c*0x3e8);const _0x45d396=await getTickers(_0x5385ab);Object[_0x10b8f1(0x229)](_0x45d396)[_0x10b8f1(0x20d)](_0x2a4153=>{const _0x1853cf=_0x10b8f1;_0x3d0a00=_0x2a4153[0x1][_0x1853cf(0x182)],global[_0x1853cf(0x16a)][_0x3d0a00]=_0x2a4153[0x1][_0x1853cf(0x11c)];});}catch(_0x8d3ddf){if(!exchangeStopped)await handleError(_0x8d3ddf,'fetchTickers()',_0x3d0a00);}}else await sleep(0x64);}},_0x2881c3=async _0x9009b7=>{const _0x4e453d=_0x2a4b81;while(initCycle==_0xcf667e){if(!botPaused)try{const _0xc0b9cc=await exchange['watchOrders'](_0x9009b7);initCycle==_0xcf667e&&_0xc0b9cc[_0x4e453d(0x20d)](_0x3d3c2f=>{updateNumberCoinsCcxt(_0x3d3c2f);});}catch(_0x3877bb){if(!exchangeStopped)await handleError(_0x3877bb,_0x4e453d(0x187));}else await sleep(0x64);}};_0x335c3c(_0x342ff7),_0x5951f8(_0x342ff7),_0x342ff7['forEach'](_0x4f23ab=>{_0x5b89ac(_0x4f23ab),_0x2881c3(_0x4f23ab);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x19e7d9){const _0x4e090a=_0xc95087;let _0x519146={};try{if(config[_0x4e090a(0x113)]!=_0x4e090a(0x19b))_0x519146=await exchange['fetchTickers'](_0x19e7d9);else for(const _0x5cb025 of _0x19e7d9){const _0x1eee49=await exchange[_0x4e090a(0x241)](_0x5cb025);_0x519146[_0x5cb025]=_0x1eee49;}return _0x519146;}catch(_0x1e640c){throw _0x1e640c;}}async function watchTransactions(){const _0xd59419=_0xc95087;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x463b03=await getCoins(),[_0x58f272,_0x2ac916]=_0x463b03;let _0x4c0da7=[];currentCoins['forEach'](_0x197bd0=>{const _0x2d9013=_0x5bad,_0x43aac6=_0x58f272[_0x2d9013(0x177)](_0x49b93a=>_0x49b93a[_0x2d9013(0x223)]==_0x197bd0[_0x2d9013(0x223)]);if(_0x43aac6){if(_0x197bd0[_0x2d9013(0x1a5)]!=_0x43aac6['number']){let _0x2f11e0;if(_0x197bd0['coin']!=config[_0x2d9013(0x1d0)]){const _0xbe21c=global[_0x2d9013(0x25a)][noslash(_0x197bd0[_0x2d9013(0x182)])];_0x2f11e0=_0x197bd0[_0x2d9013(0x10f)]?0x1/_0xbe21c:_0xbe21c;}else _0x2f11e0=0x1;_0x4c0da7['push']({'coin':_0x197bd0[_0x2d9013(0x223)],'symbol':_0x197bd0[_0x2d9013(0x182)],'price':_0x2f11e0,'number':Number(formatResult(_0x43aac6['number']-_0x197bd0[_0x2d9013(0x1a5)],0x8)),'basecoinvalue':_0x2f11e0*(_0x43aac6[_0x2d9013(0x1a5)]-_0x197bd0['number'])});}}});if(_0x4c0da7[_0xd59419(0x21c)]==0x1&&!blockTransactionDetection){if(config[_0xd59419(0x203)]){logger[_0xd59419(0x237)](_0xd59419(0x1e5)+_0x4c0da7[0x0][_0xd59419(0x126)]+_0xd59419(0x135)+lastFees[_0xd59419(0x125)]);if(lastFees[_0xd59419(0x125)]==0x0||Math[_0xd59419(0x1d8)](_0x4c0da7[0x0][_0xd59419(0x126)])>lastFees['highest']){delete _0x4c0da7[0x0][_0xd59419(0x182)],delete _0x4c0da7[0x0]['basecoinvalue'];let _0x472643=[],_0x3bc73f=[...config[_0xd59419(0x239)]]||[],_0x20a316=config['liquidity'];_0x3bc73f['sort']((_0x3e505a,_0x47a47c)=>_0x3e505a[_0xd59419(0x198)]>_0x47a47c[_0xd59419(0x198)]?-0x1:_0x47a47c['date']>_0x3e505a[_0xd59419(0x198)]?0x1:0x0);const _0x2f21db=getDate();if(_0x3bc73f[0x0]){const _0x1d3f71=fns[_0xd59419(0x1cd)](_0x3bc73f[0x0]['date'],_0xd59419(0x1c6),new Date()),_0x5d5ca6=fns['parse'](_0x2f21db,_0xd59419(0x1c6),new Date());if(fns[_0xd59419(0x166)](_0x1d3f71,_0x5d5ca6)){_0x472643=_0x3bc73f[0x0][_0xd59419(0x179)];const _0x5d5554=_0x472643[_0xd59419(0x177)](_0x4fc000=>_0x4fc000[_0xd59419(0x223)]==_0x4c0da7[0x0][_0xd59419(0x223)]);_0x5d5554?(_0x5d5554[_0xd59419(0x1a5)]+=_0x4c0da7[0x0]['number'],_0x5d5554[_0xd59419(0x1a5)]==0x0&&(_0x472643=_0x472643[_0xd59419(0x238)](_0x3a36b4=>{const _0x27e89a=_0xd59419;return _0x3a36b4[_0x27e89a(0x223)]!=_0x4c0da7[0x0][_0x27e89a(0x223)];}))):_0x472643[_0xd59419(0x2a9)](_0x4c0da7[0x0]);const _0x330c9f=_0x20a316[_0xd59419(0x177)](_0x91fdee=>_0x91fdee[_0xd59419(0x198)]==_0x2f21db);_0x330c9f[_0xd59419(0x179)]=_0x472643;}else _0x20a316['push']({'date':_0x2f21db,'changes':[_0x4c0da7[0x0]]});}const _0x5d9b02=_0x20a316[_0xd59419(0x177)](_0xc6443f=>_0xc6443f['date']==_0x2f21db);if(_0x5d9b02){let _0x50fa84=!![];_0x5d9b02[_0xd59419(0x179)][_0xd59419(0x20d)](_0x2658d9=>{const _0x4ccd38=_0xd59419;if(_0x2658d9[_0x4ccd38(0x1a5)]!=0x0)_0x50fa84=![];}),_0x50fa84&&(_0x20a316=_0x20a316[_0xd59419(0x238)](_0x20e2d3=>{const _0x200749=_0xd59419;return _0x20e2d3[_0x200749(0x198)]!=_0x2f21db;}));}let _0x17c4a3=dbConfig['get'](_0xd59419(0x291))[_0xd59419(0x177)]({'botID':botID})[_0xd59419(0x17d)]();_0x17c4a3&&(dbConfig[_0xd59419(0x122)](_0xd59419(0x291))[_0xd59419(0x177)]({'botID':botID})[_0xd59419(0x28f)]({'liquidity':_0x20a316})[_0xd59419(0x172)](),config[_0xd59419(0x239)]=_0x20a316),logHistory('success',_0xd59419(0x1ca)+Math[_0xd59419(0x1d8)](_0x4c0da7[0x0][_0xd59419(0x1a5)])+'\x20'+_0x4c0da7[0x0][_0xd59419(0x223)]+'\x20'+(_0x4c0da7[0x0][_0xd59419(0x1a5)]>0x0?'added':'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0xd59419(0x21a),emittedConfiguration());}else logger[_0xd59419(0x237)](_0xd59419(0x1b7)+Math[_0xd59419(0x1d8)](_0x4c0da7[0x0][_0xd59419(0x1a5)])+'\x20'+_0x4c0da7[0x0]['coin']+'\x20'+(_0x4c0da7[0x0][_0xd59419(0x1a5)]>0x0?'added':_0xd59419(0x116)));transactionDetected=!![];}else logger[_0xd59419(0x237)](_0xd59419(0x1ca)+Math[_0xd59419(0x1d8)](_0x4c0da7[0x0]['number'])+'\x20'+_0x4c0da7[0x0][_0xd59419(0x223)]+'\x20'+(_0x4c0da7[0x0]['number']>0x0?_0xd59419(0x24f):_0xd59419(0x116))+_0xd59419(0x24e));}currentCoins=_0x58f272,currentCoinsAll=_0x2ac916,await sleep(watchTransactionsInterval);}catch(_0x1e4c26){if(!exchangeStopped)await handleError(_0x1e4c26,_0xd59419(0x11a));}else await sleep(0x64);}}async function loadSymbols(){const _0x49d566=_0xc95087;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x49d566(0x229)](markets)[_0x49d566(0x20d)](_0x56edd3=>{const _0x395ff5=_0x49d566;_0x56edd3[0x1][_0x395ff5(0x2b4)]&&_0x56edd3[0x1]['spot']&&allSymbols[_0x395ff5(0x2a9)](_0x56edd3[0x0]);});}catch(_0x353079){throw _0x353079;}}function validateSymbols(_0x2decb2){const _0x370117=_0xc95087;let _0x3d5446=[];return _0x2decb2[_0x370117(0x20d)](_0x17deb4=>{const _0x23de56=_0x370117;!allSymbols[_0x23de56(0x242)](_0x17deb4)?logHistory(_0x23de56(0x1d5),'Invalid\x20symbol:\x20'+_0x17deb4+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x3d5446[_0x23de56(0x2a9)](_0x17deb4);}),_0x3d5446;}async function initclient(){const _0x174217=_0xc95087;proxyEmit(_0x174217(0x21a),emittedConfiguration()),proxyEmit(_0x174217(0x2a3),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x174217(0x124),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x250e45=getNormalizedPerformance();emitPerformance(_0x250e45),getStartingBalances(_0x250e45);}async function toggleBotMode(){const _0xaee350=_0xc95087;let _0x9de7eb=dbConfig[_0xaee350(0x122)](_0xaee350(0x291))[_0xaee350(0x177)]({'botID':botID})[_0xaee350(0x17d)]();if(_0x9de7eb){const _0x336960=!_0x9de7eb[_0xaee350(0x284)];dbConfig['get']('bot')['find']({'botID':botID})['assign']({'headless':_0x336960})[_0xaee350(0x172)](),config[_0xaee350(0x284)]=_0x336960,proxyEmit(_0xaee350(0x21a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2163cd=_0xc95087;process[_0x2163cd(0x1f4)]({'updatebotmanager':!![]},_0x171ee8=>{}),logger['debug'](_0x2163cd(0x183)+config[_0x2163cd(0x284)]);}async function loadCoins(_0x594a38){const _0x44c352=_0xc95087;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x399c0c,_0x50d181=0x0,_0x16d473=0x0;_0x594a38['forEach'](_0x444a34=>{const _0xa91252=_0x5bad;loading[_0xa91252(0x1a7)][_0xa91252(0x2a9)](_0x444a34);}),loadingCanceled=![];let _0x575fbb=![];while(_0x399c0c!=_0x594a38[_0x44c352(0x21c)]+maxLoadingProgress){_0x399c0c=loadingProgress,_0x594a38['forEach'](_0x5499d7=>{const _0x1d49a6=_0x44c352;if(global[_0x1d49a6(0x25a)][noslash(_0x5499d7)]){loading['remainingSymbols']=loading[_0x1d49a6(0x1a7)]['filter'](_0x3a9df7=>_0x3a9df7!=_0x5499d7);if(!watchedSymbols[_0x1d49a6(0x242)](_0x5499d7))watchedSymbols['push'](_0x5499d7);_0x399c0c++;}}),loading['progress']=Math['round'](_0x399c0c/(_0x594a38[_0x44c352(0x21c)]+maxLoadingProgress)*0x64);loading[_0x44c352(0x290)]!=0x64&&(_0x16d473>0x1e*0x5&&(loading[_0x44c352(0x1d4)]=!![],emitLoadingProgress()),_0x16d473>0x78*0x5&&!_0x575fbb&&(_0x575fbb=!![],logHistory(_0x44c352(0x1d5),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x44c352(0x1f1)](',\x20')+_0x44c352(0x286)),logHistory(_0x44c352(0x1d5),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x44c352(0x1c7)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x5b72a2=_0x44c352;process[_0x5b72a2(0x1f4)]({'stop':_0x5b72a2(0x2a4)},_0x35e37c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x44c352(0x250)]=!![],emitLoadingProgress();break;}else _0x50d181!=loading[_0x44c352(0x290)]&&(_0x50d181=loading[_0x44c352(0x290)],emitLoadingProgress()),_0x16d473++,await sleep(0xc8);}_0x399c0c==_0x594a38[_0x44c352(0x21c)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x44c352(0x1f4)]({'status':_0x44c352(0x18c),'live':_0x44c352(0x158)},_0xc559ca=>{}),_0x575fbb&&logHistory(_0x44c352(0x1ab),_0x44c352(0x272)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5011fa=_0xc95087;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x5011fa(0x15e)});}function emitLoadingProgress(){const _0x124f1a=_0xc95087;proxyEmit(_0x124f1a(0x14a),loading);}async function getFiat(){const _0x2fcd5c=_0xc95087;let _0x2ec730=global[_0x2fcd5c(0x25a)][stablecoins[_0x2fcd5c(0x1ea)][_0x2fcd5c(0x223)]],_0x359635=global[_0x2fcd5c(0x25a)][stablecoins['usd'][_0x2fcd5c(0x223)]];return{'eur':Number(_0x2ec730),'usd':Number(_0x359635)};}function capitalize(_0x598a8d){const _0x6ea4e4=_0xc95087;return _0x598a8d[_0x6ea4e4(0x14c)](0x0,0x1)[_0x6ea4e4(0x1f5)]()+_0x598a8d[_0x6ea4e4(0x14c)](0x1);}function _0x43cf(){const _0x2a1994=['watchTrades','Unknown\x20error\x20occured','0\x20-\x20EXECUTION:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','showname','(((.+)+)+)+$','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','bots','timestamp','Loading\x20completed','emojisell','colorscheme','logs','getHours','headless','limit-high','\x20-\x20bot\x20not\x20started','\x20exchange\x20error','openOrders','market','sort','lowdb/adapters/FileSync','limit-low','privateKey','date-fns','assign','progress','bot','getCoinNumber()',':\x20timer\x20>','rightTxt','\x20|\x20','fiat','\x20>\x20','recent20','watchTrades()','buy','cancelOrders()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20closed\x20the\x20connection','Order\x20amount\x20is\x20invalid:\x20','orderstatus','cancelLoading','Reset\x20|\x20','\x20portfolio:</b>\x20\x0a\x0a','exchanges','restart','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','<pre>','limits','./config/','push','storeConfiguration','2QTNOop','sells','/output-000.log','API-key\x20format\x20invalid','side','NetworkError','delta','MIN_NOTIONAL','differenceInSeconds','active','cooldown','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','No\x20more\x20open\x20orders\x20-\x20','Net\x20effect','recreate','reverse','realized','sell','yargs/yargs','exchange','string','cancelOrder','removed','Transaction\x20detection\x20unblocked','open','exec','watchTransactions()','search','percentage','toFixed','RateLimitExceeded','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','AuthenticationError','version','get','Limit\x20(high-margin)','balances','highest','basecoinvalue','getCoins()','cloneDeep','createWriteStream','watchOrders','portfolio','\x20not\x20responding','password','loadSymbols()','fetchClosedOrders','balancing\x20resumes\x20when\x20cooldown\x20ends','existsSync','botname','8gBxNjs','constructor','\x20|\x20highest\x20fee:\x20','toggleBotMode','fees','offset','mkdirSync','recreateCoinResults()','slice','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','uncaughtException','<b>Bot\x20','2\x20-\x20Handled\x20open\x20orders','ordertype','Manual\x20balancing\x20required','PermissionDenied','DDoSProtection','last','set','getPortfolio','Limit\x20(low-margin)','bid','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','coin-loading-progress','stringify','substring','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','final','BNB','total','-performance.json','status','\x20order:\x20','ExchangeNotAvailable','placeOrder()','replace',':\x20Bot\x20','running','Trigger:\x20','coins','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','trade','toString','loading-canceled','BUSD','findIndex','full','event-history','Cex','amount','startdate','isEqual','ORDERS.UNLOCKED','getFullYear','time','change','InsufficientFunds','net-basecoin','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ORDERS.UNLOCKING','RSA-OAEP','1\x20-\x20Validate\x20orders:\x20','Bitget','write','placeOrder','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fetchOpenOrders','Error:\x20Invalid\x20argument\x20','find','Exchange','changes','padEnd','args','Insufficient\x20funds\x20to\x20execute\x20order:\x20','value','loadMarkets','lowdb','filled','customId','symbol','Headless:\x20','\x20>\x20[DEBUG]\x20','***','apiSecret','watchOrders()','min','LOCKED','./logs/','keys','enabled','red_yellow_blue','parseISO','UNLOCKED','Huobipro','round','001','remove','starting-balance-','excluded','\x20minutes\x20-\x20','price','date','getOpenOrders()','apiPassword','Cryptocom','Net\x20','change24h','warning','\x20API\x20key\x20is\x20invalid','Cooldown\x20ended\x20-\x20balancing\x20resumed','initial','startprice','max','log','number','\x20metrics:</b>\x20\x0a\x0a','remainingSymbols','Unfilled\x20order(s)\x20canceled\x20after\x20','storeHeadless','performance','success','5325668JYNAPM','getMonth','format','ETH','kill','floor','\x20hour','spot','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','6084945Bovlgk','Market','Fee\x20discount\x20refund\x20detected:\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','path','19376buZoyd','getSeconds','settings','1\x20-\x20FILLED\x20known\x20order:\x20','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','toLowerCase','fee','valid','exchange\x20not\x20reloaded','apiKey','distribution','\x20not\x20available','yyyy/MM/dd','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','/backup/','Binance','Portfolio\x20change\x20detected:\x20','concat','canceled','parse','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20has\x20a\x2024h\x20drop\x20of\x20','basecoin','2\x20-\x20Orders\x20unlocked','onepagemode','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','timeout','error','1\x20-\x20Unlock\x20orders','bb-settings.json','abs','decrypt','BTC','KC-API-TIMESTAMP\x20Invalid','argv','pro','orderId','type','2\x20-\x20Validate\x20orders:\x20','splice','getMinutes','-events.json','Binanceus','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','4432959XaFvzT','message','yyyy-MM-dd\x27T\x27HH:mm:ss','USDT','eur','sortBy','\x20API\x20secret\x20is\x20invalid','cost','OnMaintenance','4290216hLjpmZ','EUR','join','add','sendMetricsTelegram','send','toUpperCase','test','Order(s)\x20not\x20validated\x20after\x20','UNLOCKING','has','data','buys','PAXG','getTime','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','USD','invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param','\x20|\x20lock\x20orders:\x20','hybrid-crypto-js','autoliquidity','indexOf','emitHistory','usd','freeze','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Order\x20is\x20invalid:\x20','\x20minutes','\x20network\x20error','getPortfolio(1)','forEach','average','currency','padStart','BNB/','\x20|\x20Custom\x20ID:\x20','leftTxt','bot-','1\x20-\x20Handle\x20open\x20orders','getDate','milliseconds','startnumber','unlinkSync','configuration','Invalid\x20quantity','length','InvalidNonce','exchange\x20reloaded','storeFiat','secure','2.3.5','************','coin','breakeven','datetime',',\x20must\x20be\x20a\x203\x20digit\x20number','InvalidOrder','shift','entries','createOrder','none','order','bb-secure.json','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fetchBalance','page','map','Saving\x20configuration','deleteHistoryAlerts','2.5.0','ExchangeError','writeFile','debug','filter','liquidity','target','Initializing\x20coin\x20results','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','ccxt','\x20/\x20','<b>','\x20:\x20','fetchTicker','includes','ORDERS.LOCKED','getPortfolio(2)','no\x20open\x20orders','fromCodePoint','initTickers()','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','emojibuy','ID:\x20','event','split','ongoing','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','added','cancel','botID','\x20-\x20pausing\x20bot\x20for\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','timeshift','net-fiat','1325256bbSgrb','TUSD','-------------------------------\x0a','/USD','ticker','/EUR','Bybit','resetHistory','-results.json','\x20rejected\x20your\x20API\x20request','threshold','initclient','2049513UNuwsa','Error\x20details:','stopExchange()','invalid\x20Request-Time','fetchTickers','\x20value','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','-config.json','function','2\x20-\x20handling\x20FILLED\x20order:\x20','getPortfolio(0)','\x20exchange','\x20|\x20exchange:\x20','defaults','%\x20(','Executing\x20exchange\x20reload','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Exception\x20thrown\x20in\x20','limit','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time'];_0x43cf=function(){return _0x2a1994;};return _0x43cf();}function supportedExchanges(){const _0x1966f5=_0xc95087,_0x5c76d1=['ws',_0x1966f5(0x266),_0x1966f5(0x241),_0x1966f5(0x276),_0x1966f5(0x12a),'cancelOrder',_0x1966f5(0x22a),'fetchOpenOrders',_0x1966f5(0x12f),_0x1966f5(0x22f)];let _0x39f8e9=[],_0x68bbd8=[],_0x56189b=ccxt[_0x1966f5(0x1dd)][_0x1966f5(0x2a3)];_0x56189b['forEach'](_0x294730=>{const _0x3a01d7=_0x1966f5;try{const _0x18c40c=new ccxt[(_0x3a01d7(0x1dd))][_0x294730]();_0x68bbd8[_0x3a01d7(0x2a9)](_0x18c40c);}catch(_0x5c7092){}}),_0x68bbd8['forEach'](_0xa6a83d=>{const _0x1b30a5=_0x1966f5;let _0x4f0bc8=0x0;_0x5c76d1[_0x1b30a5(0x20d)](_0x179aa9=>{const _0xb59331=_0x1b30a5;_0x179aa9 in _0xa6a83d[_0xb59331(0x1f9)]&&_0xa6a83d[_0xb59331(0x1f9)][_0x179aa9]&&_0x4f0bc8++;}),_0x4f0bc8==_0x5c76d1[_0x1b30a5(0x21c)]&&_0x39f8e9[_0x1b30a5(0x2a9)](capitalize(_0xa6a83d['id']));});let _0x38d657=[];return _0x56189b[_0x1966f5(0x20d)](_0x7a0918=>{const _0x3e8e3b=_0x1966f5;_0x7a0918=capitalize(_0x7a0918);if(!_0x39f8e9[_0x3e8e3b(0x242)](_0x7a0918))_0x38d657[_0x3e8e3b(0x2a9)](_0x7a0918);}),_0x39f8e9;}function setStartDatePerformance(){const _0xb740d6=_0xc95087;if(config&&config[_0xb740d6(0x239)][0x0][_0xb740d6(0x179)][_0xb740d6(0x21c)]!=0x0){const _0x311c23=config['liquidity'][0x0][_0xb740d6(0x179)];dbPerformance[_0xb740d6(0x122)](_0xb740d6(0x1fa))[_0xb740d6(0x177)]({'date':config[_0xb740d6(0x165)]})[_0xb740d6(0x28f)]({'coins':_0x311c23})[_0xb740d6(0x172)]();}}async function recreateCoinResults(){const _0x5f0218=_0xc95087;let _0x1fac25,_0x5a9d65=[];try{const _0x3b4317=fns['format'](fns[_0x5f0218(0x18e)](config[_0x5f0218(0x165)]['replace'](/\//g,'-')),_0x5f0218(0x1e8));for(const _0x1af4c0 of currentCoins){if(_0x1af4c0['coin']!=config[_0x5f0218(0x1d0)]){let _0x3b19d9=0x0,_0x55d8ca,_0x3ea0bb;_0x1fac25=await getAllEventOrders(_0x1af4c0[_0x5f0218(0x182)]);if(_0x1fac25[_0x5f0218(0x21c)]>0x0)_0x1fac25[_0x5f0218(0x20d)](_0xaf037c=>{const _0x1108c7=_0x5f0218,_0x19cb3f=_0x1af4c0[_0x1108c7(0x182)]['includes'](config[_0x1108c7(0x1d0)]+'/');_0x5a9d65['push']({'datetime':_0xaf037c[_0x1108c7(0x225)],'coin':_0x1af4c0[_0x1108c7(0x223)],'symbol':_0x1af4c0['symbol'],'side':_0xaf037c[_0x1108c7(0x2af)],'reverse':_0x19cb3f,'amount':formatResult(_0xaf037c[_0x1108c7(0x180)],0x8),'filled':formatResult(_0xaf037c['filled'],0x8),'price':formatResult(_0xaf037c[_0x1108c7(0x197)],0x8)}),_0x3b19d9=_0xaf037c[_0x1108c7(0x2af)]==_0x1108c7(0x29a)?_0x3b19d9+_0xaf037c[_0x1108c7(0x180)]:_0x3b19d9-_0xaf037c[_0x1108c7(0x180)];if(!_0x3ea0bb)_0x3ea0bb=_0xaf037c[_0x1108c7(0x197)];});_0x55d8ca=_0x1af4c0[_0x5f0218(0x1a5)]-_0x3b19d9;let _0x446562;config[_0x5f0218(0x239)]['forEach'](_0x2cc0dc=>{const _0x550a88=_0x5f0218;!_0x446562&&(_0x446562=_0x2cc0dc[_0x550a88(0x179)][_0x550a88(0x177)](_0x298101=>_0x298101[_0x550a88(0x223)]==_0x1af4c0[_0x550a88(0x223)]),_0x446562&&(_0x55d8ca=_0x446562['number'],_0x3ea0bb=_0x446562[_0x550a88(0x197)]));});let _0x4f0b5e=dbCoinResults['get'](_0x5f0218(0x15a))[_0x5f0218(0x177)]({'coin':_0x1af4c0[_0x5f0218(0x223)]})[_0x5f0218(0x17d)]();_0x4f0b5e={'coin':_0x1af4c0[_0x5f0218(0x223)],'number':_0x55d8ca,'breakeven':_0x3ea0bb,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5f0218(0x122)](_0x5f0218(0x15a))['find']({'coin':_0x1af4c0['coin']})[_0x5f0218(0x28f)](_0x4f0b5e)['write']();}}_0x5a9d65[_0x5f0218(0x28a)]((_0x49e860,_0x514025)=>_0x49e860['datetime']>_0x514025['datetime']?0x1:_0x514025[_0x5f0218(0x225)]>_0x49e860[_0x5f0218(0x225)]?-0x1:0x0);let _0x481f2d=0x0;for(let _0x3c1ffa of _0x5a9d65){await updateCoinResults(_0x3c1ffa,!![]);}}catch(_0x55ff33){await handleError(_0x55ff33,_0x5f0218(0x13a));}}async function getAllEventOrders(_0x223737){const _0x4c6a3c=_0xc95087;let _0x404d83=[],_0x2878a4=dbLogs['get'](_0x4c6a3c(0x282))[_0x4c6a3c(0x238)](_0x3d33c4=>{const _0x4df994=_0x4c6a3c,_0x3dd2df=_0x3d33c4[_0x4df994(0x24b)][_0x4df994(0x1bf)]();return _0x3dd2df[_0x4df994(0x242)](_0x223737[_0x4df994(0x1bf)]())&&(_0x3dd2df[_0x4df994(0x242)]('market')&&_0x3dd2df[_0x4df994(0x242)](_0x4df994(0x22c))||_0x3dd2df['includes']('filled')&&_0x3dd2df['includes'](_0x4df994(0x22c)));})['sortBy']('time')[_0x4c6a3c(0x17d)]();return _0x2878a4[_0x4c6a3c(0x20d)](_0x35d839=>{const _0x624bef=_0x4c6a3c,_0xeeb67=_0x35d839[_0x624bef(0x24b)][_0x624bef(0x242)](_0x624bef(0x111))?'sell':_0x624bef(0x29a),_0x550902=/#([0-9]|\.)+\s/i,_0x1c4b22=Number(_0x550902['exec'](_0x35d839[_0x624bef(0x24b)])[0x0][_0x624bef(0x13b)](0x1)),_0x5bf0ae=/@([0-9]|\.)+$/i,_0x39d1f2=Number(_0x5bf0ae[_0x624bef(0x119)](_0x35d839[_0x624bef(0x24b)])[0x0]['slice'](0x1));_0x404d83[_0x624bef(0x2a9)]({'datetime':_0x35d839[_0x624bef(0x169)],'coin':symbolToCoin(_0x223737),'symbol':_0x223737,'side':_0xeeb67,'amount':_0x1c4b22,'filled':_0x1c4b22,'price':_0x39d1f2});}),_0x404d83;}async function getAllOrders(_0x1486c7,_0x5e7037){const _0x525eab=_0xc95087;let _0xb7ac2f=[];while(_0x5e7037<exchange[_0x525eab(0x217)]()){const _0x52c302=0x1f4;try{const _0x23ef10=await exchange[_0x525eab(0x12f)](_0x1486c7,_0x5e7037,_0x52c302);if(_0x23ef10[_0x525eab(0x21c)])_0x5e7037=_0x23ef10[_0x23ef10[_0x525eab(0x21c)]-0x1]['timestamp']+0x1,_0xb7ac2f=_0xb7ac2f[_0x525eab(0x1cb)](_0x23ef10);else break;}catch(_0x27ae8c){await handleError(_0x27ae8c,'getAllOrders()',_0x1486c7);}}return _0xb7ac2f;}async function validate24hChanges(){const _0x2c9d6c=_0xc95087;for(const _0x5e9a76 of currentCoins){if(_0x5e9a76[_0x2c9d6c(0x223)]!=config[_0x2c9d6c(0x1d0)]){let _0xacd7ec;_0x5e9a76[_0x2c9d6c(0x10f)]?_0xacd7ec=formatResult((0x1/(global[_0x2c9d6c(0x16a)][noslash(_0x5e9a76[_0x2c9d6c(0x182)])]/0x64+0x1)-0x1)*0x64,0x3):_0xacd7ec=global['change'][noslash(_0x5e9a76[_0x2c9d6c(0x182)])],_0xacd7ec<config['change24h']&&(logHistory(_0x2c9d6c(0x1d5),_0x5e9a76[_0x2c9d6c(0x223)]+_0x2c9d6c(0x1cf)+_0xacd7ec+'%'),logHistory(_0x2c9d6c(0x1d5),_0x2c9d6c(0x16d)),logHistory(_0x2c9d6c(0x1d5),_0x2c9d6c(0x11f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xe1ad58,_0x1ea1bf){const _0x347e66=_0xc95087;if(!_0xe1ad58)return!![];const _0x22c751=_0x1ea1bf[_0x347e66(0x24c)]('.'),_0x53f422=_0xe1ad58['split']('.');for(var _0x12cfe4=0x0;_0x12cfe4<_0x53f422[_0x347e66(0x21c)];_0x12cfe4++){const _0x1a5d69=~~_0x53f422[_0x12cfe4],_0x5e3823=~~_0x22c751[_0x12cfe4];if(_0x1a5d69<_0x5e3823)return!![];if(_0x1a5d69>_0x5e3823)return![];}return![];}async function oneTimeMigration(){const _0xb030c5=_0xc95087;let _0x5b7031=dbLogs[_0xb030c5(0x122)](_0xb030c5(0x121))[_0xb030c5(0x17d)]();if(isOlderVersion(_0x5b7031,_0xb030c5(0x221))){let _0x548f37=[];const _0x5e5390=dbLogs[_0xb030c5(0x122)](_0xb030c5(0x282))[_0xb030c5(0x17d)]();_0x5e5390[_0xb030c5(0x20d)](_0x11c9fb=>{const _0x55f277=_0xb030c5;_0x548f37['push']({'time':_0x11c9fb[_0x55f277(0x169)],'type':_0x11c9fb[_0x55f277(0x1df)],'event':_0x11c9fb['event']});}),dbLogs['get'](_0xb030c5(0x282))['assign'](_0x548f37)[_0xb030c5(0x172)]();}let _0x4ac10e=dbConfig['get'](_0xb030c5(0x121))[_0xb030c5(0x17d)]();if(isOlderVersion(_0x4ac10e,_0xb030c5(0x221))){let _0x4ecbcb=dbConfig[_0xb030c5(0x122)](_0xb030c5(0x291))['find']({'botID':botID})[_0xb030c5(0x17d)]();if(_0x4ecbcb){let _0x51d714=[];_0x4ecbcb['portfolio'][_0xb030c5(0x20d)](_0xbd8622=>{const _0x5d8d52=_0xb030c5;_0x51d714['push']({'coin':_0xbd8622[_0x5d8d52(0x223)],'number':_0xbd8622['startnumber'],'price':_0xbd8622[_0x5d8d52(0x1a2)]}),delete _0xbd8622[_0x5d8d52(0x218)],delete _0xbd8622[_0x5d8d52(0x1a2)];});if(_0x51d714[_0xb030c5(0x21c)]!==0x0)fs[_0xb030c5(0x236)](configbackuppath+(_0xb030c5(0x194)+botID+'.json'),JSON[_0xb030c5(0x14b)](_0x51d714,null,0x4),function(_0x5e4113){if(_0x5e4113){}});const _0x337dd2=(_0x1693c3,_0x52ab8d)=>{const _0x1958c6=_0xb030c5;let _0x594f05=[];_0x52ab8d[_0x1958c6(0x20d)](_0x2e2d52=>{const _0x211aba=_0x1958c6,_0x101662=_0x1693c3[_0x211aba(0x177)](_0x1b2006=>_0x1b2006[_0x211aba(0x223)]==_0x2e2d52['coin']);if(!_0x101662)_0x594f05[_0x211aba(0x2a9)](_0x2e2d52);});let _0x78f321=[];return _0x1693c3['forEach'](_0x2e44cf=>{const _0x12b5f6=_0x1958c6,_0x2173c4=_0x52ab8d['find'](_0x5ac8e9=>_0x5ac8e9[_0x12b5f6(0x223)]==_0x2e44cf[_0x12b5f6(0x223)]);if(!_0x2173c4||_0x2173c4[_0x12b5f6(0x1a5)]==0x0&&_0x2e44cf['number']!=0x0)_0x78f321['push'](_0x2e44cf);}),{'missingDay1':_0x594f05,'notInDay2':_0x78f321};},_0x3f9814=dbPerformance['get']('data')[_0xb030c5(0x128)]()[_0xb030c5(0x17d)]();if(_0x3f9814[_0xb030c5(0x21c)]>0x1){const {missingDay1:_0x462cd3,notInDay2:_0x194168}=_0x337dd2(_0x51d714,_0x3f9814[0x1]['coins']);_0x51d714=[..._0x51d714,..._0x462cd3],_0x194168[_0xb030c5(0x20d)](_0x40c3b1=>{const _0x4b51b7=_0xb030c5;let _0x39eeea=_0x51d714[_0x4b51b7(0x160)](_0x517a2e=>_0x517a2e[_0x4b51b7(0x223)]==_0x40c3b1[_0x4b51b7(0x223)]);_0x39eeea!=-0x1&&_0x51d714[_0x4b51b7(0x1e1)](_0x39eeea,0x1);});}_0x51d714[_0xb030c5(0x28a)]((_0x1ab5ae,_0x50205f)=>_0x1ab5ae[_0xb030c5(0x223)]>_0x50205f[_0xb030c5(0x223)]?0x1:_0x50205f[_0xb030c5(0x223)]>_0x1ab5ae['coin']?-0x1:0x0);let _0x52ea5c=[{'date':_0x4ecbcb[_0xb030c5(0x165)],'changes':_0x51d714}];_0x3f9814[_0xb030c5(0x21c)]>0x2&&_0x3f9814[_0xb030c5(0x20d)]((_0x3fbef8,_0x112f8e)=>{const _0x19a631=_0xb030c5;if(_0x112f8e>0x0&&_0x112f8e<_0x3f9814[_0x19a631(0x21c)]-0x1){const {missingDay1:_0x28a8a3,notInDay2:_0x57e030}=_0x337dd2(_0x3f9814[_0x112f8e][_0x19a631(0x15a)],_0x3f9814[_0x112f8e+0x1][_0x19a631(0x15a)]);_0x51d714=[],(_0x28a8a3[_0x19a631(0x21c)]!=0x0||_0x57e030[_0x19a631(0x21c)]!=0x0)&&(_0x28a8a3['length']!=0x0&&_0x51d714[_0x19a631(0x2a9)](..._0x28a8a3),_0x57e030['length']!=0x0&&(_0x57e030['forEach'](_0x333746=>{const _0x450ac6=_0x19a631;_0x333746['number']=-_0x333746[_0x450ac6(0x1a5)];}),_0x51d714[_0x19a631(0x2a9)](..._0x57e030)),_0x51d714['sort']((_0x26b3f8,_0x4fe14d)=>_0x26b3f8[_0x19a631(0x223)]>_0x4fe14d[_0x19a631(0x223)]?0x1:_0x4fe14d[_0x19a631(0x223)]>_0x26b3f8[_0x19a631(0x223)]?-0x1:0x0),_0x52ea5c[_0x19a631(0x2a9)]({'date':_0x3f9814[_0x112f8e+0x1][_0x19a631(0x198)],'changes':_0x51d714}));}}),dbConfig[_0xb030c5(0x122)]('bot')[_0xb030c5(0x177)]({'botID':botID})[_0xb030c5(0x28f)]({..._0x4ecbcb,'liquidity':_0x52ea5c})[_0xb030c5(0x172)]();}}if(isOlderVersion(_0x4ac10e,'2.6.0')){let _0x53ead5=dbConfig[_0xb030c5(0x122)](_0xb030c5(0x291))[_0xb030c5(0x177)]({'botID':botID})[_0xb030c5(0x17d)]();if(_0x53ead5){const _0x281d98=_0x53ead5[_0xb030c5(0x113)],_0x158a67=_0x281d98?capitalize(_0x281d98):_0xb030c5(0x1c9);dbConfig[_0xb030c5(0x122)](_0xb030c5(0x291))[_0xb030c5(0x177)]({'botID':botID})[_0xb030c5(0x28f)]({'exchange':_0x158a67})[_0xb030c5(0x172)]();}}let _0x3eb4cd=dbPerformance['get'](_0xb030c5(0x121))[_0xb030c5(0x17d)]();isOlderVersion(_0x3eb4cd,_0xb030c5(0x221))&&setStartDatePerformance();let _0x29501e=dbCoinResults[_0xb030c5(0x122)](_0xb030c5(0x121))[_0xb030c5(0x17d)]();if(isOlderVersion(_0x29501e,_0xb030c5(0x234))){let _0x4eb8bd=dbCoinResults['get'](_0xb030c5(0x15a))['value']();if(_0x4eb8bd[_0xb030c5(0x21c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1e6067=_0xc95087;dbConfig[_0x1e6067(0x145)](_0x1e6067(0x121),serverversion)[_0x1e6067(0x172)](),dbPerformance[_0x1e6067(0x145)]('version',serverversion)['write'](),dbLogs['set']('version',serverversion)[_0x1e6067(0x172)](),dbCoinResults[_0x1e6067(0x145)](_0x1e6067(0x121),serverversion)[_0x1e6067(0x172)]();}function getConfiguration(_0x210c62){const _0x322a5c=_0xc95087;let _0x10b499=dbConfig[_0x322a5c(0x122)](_0x322a5c(0x291))[_0x322a5c(0x177)]({'botID':_0x210c62})[_0x322a5c(0x17d)]();if(_0x10b499){let _0x576b02=![];typeof _0x10b499[_0x322a5c(0x260)]==_0x322a5c(0x114)&&(_0x10b499={..._0x10b499,'threshold':Number(_0x10b499[_0x322a5c(0x260)])},_0x576b02=!![]),_0x10b499[_0x322a5c(0x19d)]==undefined&&(_0x10b499={..._0x10b499,'change24h':-0x14},_0x576b02=!![]),_0x10b499[_0x322a5c(0x296)]==undefined&&(_0x10b499={..._0x10b499,'fiat':_0x322a5c(0x1ff)},_0x576b02=!![]),_0x10b499[_0x322a5c(0x1d2)]==undefined&&(_0x10b499={..._0x10b499,'onepagemode':settings['onepagemode']},_0x576b02=!![]),_0x10b499[_0x322a5c(0x281)]==undefined&&(_0x10b499={..._0x10b499,'colorscheme':_0x322a5c(0x18d)},_0x576b02=!![]),_0x10b499['autoliquidity']==undefined&&(_0x10b499={..._0x10b499,'autoliquidity':!![]},_0x576b02=!![]),_0x576b02&&(_0x10b499={'botID':_0x10b499[_0x322a5c(0x251)],'exchange':_0x10b499[_0x322a5c(0x113)],'apiKey':_0x10b499[_0x322a5c(0x1c3)],'apiSecret':_0x10b499['apiSecret'],'apiPassword':_0x10b499[_0x322a5c(0x19a)],'basecoin':_0x10b499['basecoin'],'botname':_0x10b499[_0x322a5c(0x132)],'showname':_0x10b499[_0x322a5c(0x27a)],'threshold':_0x10b499[_0x322a5c(0x260)],'ordertype':_0x10b499[_0x322a5c(0x140)],'timeout':_0x10b499[_0x322a5c(0x1d4)],'fiat':_0x10b499[_0x322a5c(0x296)],'startdate':_0x10b499[_0x322a5c(0x165)],'recreate':_0x10b499[_0x322a5c(0x10e)],'timeshift':_0x10b499['timeshift'],'onepagemode':_0x10b499['onepagemode'],'headless':_0x10b499[_0x322a5c(0x284)],'cooldown':_0x10b499[_0x322a5c(0x10a)],'change24h':_0x10b499[_0x322a5c(0x19d)],'emojibuy':_0x10b499[_0x322a5c(0x249)],'emojisell':_0x10b499[_0x322a5c(0x280)],'colorscheme':_0x10b499[_0x322a5c(0x281)],'portfolio':_0x10b499['portfolio'],'autoliquidity':_0x10b499[_0x322a5c(0x203)],'liquidity':_0x10b499[_0x322a5c(0x239)],'openOrders':_0x10b499[_0x322a5c(0x288)]},dbConfig[_0x322a5c(0x122)]('bot')[_0x322a5c(0x193)]()[_0x322a5c(0x172)](),dbConfig[_0x322a5c(0x122)](_0x322a5c(0x291))['push'](_0x10b499)[_0x322a5c(0x172)]());}else _0x10b499={'botID':_0x210c62,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x210c62,'showname':![],'threshold':0x3,'ordertype':_0x322a5c(0x289),'timeout':0x14,'fiat':_0x322a5c(0x1ff),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x322a5c(0x254)],'onepagemode':settings[_0x322a5c(0x1d2)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x322a5c(0x18d),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x10b499;}function emittedConfiguration(){const _0x2514c8=_0xc95087;let _0x58aa1d;if(config[_0x2514c8(0x1c3)]=='')_0x58aa1d={...config,'configstate':'initial'};else config[_0x2514c8(0x1c3)]==_0x2514c8(0x185)?_0x58aa1d={...config,'configstate':'recovery'}:(_0x58aa1d={...config,'apiKey':_0x2514c8(0x222),'apiSecret':_0x2514c8(0x222)},config[_0x2514c8(0x19a)]&&(_0x58aa1d[_0x2514c8(0x19a)]=_0x2514c8(0x222)));return _0x58aa1d;}function getSettings(){const _0x38fb73=_0xc95087;return dbSettings['get'](_0x38fb73(0x1bc))['value']();}function getSecure(){const _0x14efd0=_0xc95087;return dbSecure[_0x14efd0(0x122)](_0x14efd0(0x220))['value']()||{};}function updateTimeshift(_0x59574c){const _0x3bd621=_0xc95087;let _0x53a44f=dbConfig['get']('bot')[_0x3bd621(0x177)]({'botID':botID})[_0x3bd621(0x17d)]();_0x53a44f&&dbConfig[_0x3bd621(0x122)](_0x3bd621(0x291))[_0x3bd621(0x177)]({'botID':botID})[_0x3bd621(0x28f)]({'timeshift':_0x59574c})[_0x3bd621(0x172)](),config[_0x3bd621(0x254)]=_0x59574c,proxyEmit(_0x3bd621(0x21a),emittedConfiguration());}function updateOnepagemode(_0x3e16d1){const _0x18fe19=_0xc95087;let _0x98f05a=dbConfig[_0x18fe19(0x122)](_0x18fe19(0x291))[_0x18fe19(0x177)]({'botID':botID})[_0x18fe19(0x17d)]();_0x98f05a&&dbConfig[_0x18fe19(0x122)]('bot')['find']({'botID':botID})[_0x18fe19(0x28f)]({'onepagemode':_0x3e16d1})[_0x18fe19(0x172)](),config[_0x18fe19(0x1d2)]=_0x3e16d1,proxyEmit(_0x18fe19(0x21a),emittedConfiguration());}async function storeConfiguration(_0x156636){const _0xba0d5=_0xc95087;logger[_0xba0d5(0x237)](_0xba0d5(0x232));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xba0d5(0x237)]('Transaction\x20detection\x20blocked');let _0x53013f=![],_0x1c2d06=![],_0x5ca751=[];_0x156636[_0xba0d5(0x12b)][_0xba0d5(0x20d)](_0x1fdc16=>{const _0x247f72=_0xba0d5;if(!_0x1fdc16['excluded']&&_0x1fdc16[_0x247f72(0x223)]!=_0x156636[_0x247f72(0x1d0)])_0x5ca751['push'](_0x1fdc16[_0x247f72(0x182)]);}),_0x5ca751[_0xba0d5(0x20d)](_0x475b9c=>{const _0x5949b4=_0xba0d5,_0x1d27aa=currentCoins[_0x5949b4(0x177)](_0x5c3383=>_0x5c3383['symbol']==_0x475b9c);!_0x1d27aa&&(_0x53013f=!![]);}),currentCoins['forEach'](_0x50b4a0=>{const _0x205220=_0xba0d5;if(_0x50b4a0['coin']!=config[_0x205220(0x1d0)]){const _0x2f08cb=_0x5ca751[_0x205220(0x177)](_0x2e3685=>_0x2e3685==_0x50b4a0[_0x205220(0x182)]);!_0x2f08cb&&(_0x53013f=!![]);}}),_0x156636[_0xba0d5(0x12b)][_0xba0d5(0x20d)](_0x55e187=>{const _0x10d905=_0xba0d5,_0x4aa1d2=config[_0x10d905(0x12b)][_0x10d905(0x177)](_0x10e331=>_0x10e331[_0x10d905(0x223)]==_0x55e187[_0x10d905(0x223)]);if(_0x4aa1d2&&_0x55e187[_0x10d905(0x138)]!=_0x4aa1d2[_0x10d905(0x138)])_0x1c2d06=!![];});let _0x90dc92=dbConfig['get'](_0xba0d5(0x291))[_0xba0d5(0x177)]({'botID':botID})[_0xba0d5(0x17d)]();_0x156636={..._0x156636,'apiKey':crypt[_0xba0d5(0x1d9)](secure[_0xba0d5(0x28d)],_0x156636[_0xba0d5(0x1c3)])[_0xba0d5(0x1e7)],'apiSecret':crypt[_0xba0d5(0x1d9)](secure[_0xba0d5(0x28d)],_0x156636[_0xba0d5(0x186)])[_0xba0d5(0x1e7)]};_0x156636[_0xba0d5(0x19a)]&&(_0x156636[_0xba0d5(0x19a)]=crypt[_0xba0d5(0x1d9)](secure[_0xba0d5(0x28d)],_0x156636[_0xba0d5(0x19a)])[_0xba0d5(0x1e7)]);let _0x4279a2=![];if(_0x90dc92){_0x156636[_0xba0d5(0x1c3)]=='************'?_0x156636[_0xba0d5(0x1c3)]=config[_0xba0d5(0x1c3)]:_0x4279a2=!![];_0x156636[_0xba0d5(0x186)]=='************'?_0x156636[_0xba0d5(0x186)]=config[_0xba0d5(0x186)]:_0x4279a2=!![];if(_0x156636[_0xba0d5(0x19a)]==_0xba0d5(0x222))_0x156636[_0xba0d5(0x19a)]=config[_0xba0d5(0x19a)];else{if(_0x156636[_0xba0d5(0x19a)])_0x4279a2=!![];}dbConfig['get'](_0xba0d5(0x291))[_0xba0d5(0x177)]({'botID':botID})[_0xba0d5(0x28f)](_0x156636)[_0xba0d5(0x172)]();}else dbConfig[_0xba0d5(0x122)](_0xba0d5(0x291))[_0xba0d5(0x2a9)](_0x156636)[_0xba0d5(0x172)](),_0x4279a2=!![],process[_0xba0d5(0x1f4)]({'status':_0xba0d5(0x18c),'live':_0xba0d5(0x158)},_0x15927f=>{});process[_0xba0d5(0x1f4)]({'botname':_0x156636[_0xba0d5(0x132)]},_0x190777=>{}),config={..._0x156636},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4279a2)await reset(!![]);else _0x53013f||_0x1c2d06?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0xba0d5(0x237)](_0xba0d5(0x117));}async function storeHeadless(_0x176fe5){const _0x9849e9=_0xc95087,_0x5f0116={...config,'headless':_0x176fe5['headless']};let _0x35d6f1=dbConfig[_0x9849e9(0x122)](_0x9849e9(0x291))[_0x9849e9(0x177)]({'botID':botID})[_0x9849e9(0x17d)]();_0x35d6f1&&dbConfig[_0x9849e9(0x122)](_0x9849e9(0x291))[_0x9849e9(0x177)]({'botID':botID})['assign'](_0x5f0116)['write'](),config={..._0x5f0116},updateBotManager(),proxyEmit(_0x9849e9(0x21a),emittedConfiguration());}async function storeFiat(_0x1215e9){const _0xcad0a3=_0xc95087,_0xdb7ae1={...config,'fiat':_0x1215e9};let _0x37ec50=dbConfig[_0xcad0a3(0x122)](_0xcad0a3(0x291))[_0xcad0a3(0x177)]({'botID':botID})[_0xcad0a3(0x17d)]();_0x37ec50&&dbConfig[_0xcad0a3(0x122)]('bot')[_0xcad0a3(0x177)]({'botID':botID})['assign'](_0xdb7ae1)[_0xcad0a3(0x172)](),config={..._0xdb7ae1},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x151f63=_0xc95087;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x151f63(0x131)](path[_0x151f63(0x1f1)](configpath,'bot-'+botID+_0x151f63(0x1e3))))fs['unlinkSync'](path[_0x151f63(0x1f1)](configpath,_0x151f63(0x214)+botID+'-events.json'));if(fs[_0x151f63(0x131)](path[_0x151f63(0x1f1)](configpath,_0x151f63(0x214)+botID+_0x151f63(0x151))))fs[_0x151f63(0x219)](path[_0x151f63(0x1f1)](configpath,_0x151f63(0x214)+botID+'-performance.json'));if(fs[_0x151f63(0x131)](path[_0x151f63(0x1f1)](configpath,_0x151f63(0x214)+botID+_0x151f63(0x25e))))fs['unlinkSync'](path[_0x151f63(0x1f1)](configpath,_0x151f63(0x214)+botID+_0x151f63(0x25e)));}catch(_0x5e58e2){if(_0x5e58e2)logger[_0x151f63(0x161)]('Error\x20while\x20deleting\x20files:\x20',_0x5e58e2);}const _0x4f365b=getDate();let _0x33d784=[];currentCoins[_0x151f63(0x20d)](_0x2e6d88=>{const _0xd9baac=_0x151f63;_0x33d784[_0xd9baac(0x2a9)]({'coin':_0x2e6d88[_0xd9baac(0x223)],'number':_0x2e6d88[_0xd9baac(0x1a5)],'price':_0x2e6d88['last']});});let _0x2e7f52=dbConfig[_0x151f63(0x122)](_0x151f63(0x291))[_0x151f63(0x177)]({'botID':botID})[_0x151f63(0x17d)]();_0x2e7f52&&(dbConfig[_0x151f63(0x122)](_0x151f63(0x291))[_0x151f63(0x177)]({'botID':botID})[_0x151f63(0x28f)]({'liquidity':[{'date':_0x4f365b,'changes':_0x33d784}]})['write'](),config[_0x151f63(0x239)]=[]),process[_0x151f63(0x1f4)]({'stop':_0x151f63(0x2a4)},_0xa3c2f8=>{});}function noslash(_0x7d593b){const _0xe9a693=_0xc95087;return _0x7d593b[_0xe9a693(0x156)]('/','');}function updateHighestFee(_0x3b5d39){const _0x21d535=_0xc95087;if(_0x3b5d39[_0x21d535(0x10f)]){let _0x51b9ac={'filled':_0x3b5d39[_0x21d535(0x180)]*_0x3b5d39[_0x21d535(0x197)],'amount':_0x3b5d39[_0x21d535(0x180)]*_0x3b5d39[_0x21d535(0x197)],'side':_0x3b5d39[_0x21d535(0x2af)]==_0x21d535(0x111)?_0x21d535(0x29a):_0x21d535(0x111),'price':0x1/_0x3b5d39[_0x21d535(0x197)]};_0x3b5d39={..._0x3b5d39,..._0x51b9ac};}const _0x2ae111=defaultFee*_0x3b5d39[_0x21d535(0x180)]*_0x3b5d39[_0x21d535(0x197)];lastFees['recent20'][_0x21d535(0x21c)]===0x14&&lastFees[_0x21d535(0x298)][_0x21d535(0x228)](),lastFees['recent20'][_0x21d535(0x2a9)](_0x2ae111),lastFees['highest']=Math[_0x21d535(0x1a3)](...lastFees[_0x21d535(0x298)]);}async function updateNumberCoinsCcxt(_0x312bd8){const _0x73a94e=_0xc95087;logger[_0x73a94e(0x237)](_0x73a94e(0x278)+_0x312bd8[_0x73a94e(0x182)]+_0x73a94e(0x295)+_0x312bd8['status']+'\x20|\x20'+_0x312bd8[_0x73a94e(0x180)]+_0x73a94e(0x23e)+_0x312bd8['amount']+'\x20|\x20'+_0x312bd8['id']);let _0x223617=_0x312bd8[_0x73a94e(0x152)],_0x468b58=![];currentCoins['forEach'](_0x5935d6=>{const _0x382fd1=_0x73a94e;_0x5935d6[_0x382fd1(0x182)]==_0x312bd8[_0x382fd1(0x182)]&&(_0x468b58=!![]);});if(!_0x468b58)return;const _0x239810=currentCoins[_0x73a94e(0x177)](_0x13da6c=>_0x13da6c[_0x73a94e(0x182)]==_0x312bd8[_0x73a94e(0x182)]),_0x21c6c5=_0x154385=>{const _0x4b8273=_0x73a94e;if(_0x239810)_0x239810[_0x4b8273(0x29f)]=_0x154385;};if(_0x223617=='open')_0x21c6c5(_0x73a94e(0x118));else{if(_0x223617==_0x73a94e(0x1cc)){_0x21c6c5(_0x73a94e(0x1cc));const _0x3b48ae=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b48ae,await getOpenOrders(),handleOpenOrders();}else{if(_0x223617=='closed'){let _0x501931=![];if(lastOrders)for(const _0xe146f of lastOrders){const _0x3d9283=0xc8,_0x429775=0x1388;let _0x3ce227=0x0;while(!_0xe146f[_0x73a94e(0x1de)]&&_0x3ce227*_0x3d9283<_0x429775){_0x3ce227++,await sleep(_0x3d9283);}if(_0x3ce227>0x0)logger['debug']('Waited\x20'+_0x3ce227*_0x3d9283/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0xe146f[_0x73a94e(0x1de)]==_0x312bd8['id']){logger[_0x73a94e(0x237)](_0x73a94e(0x1bd)+_0x312bd8['id']),_0x501931=!![];if(_0xe146f[_0x73a94e(0x180)]==0x0){logger[_0x73a94e(0x237)](_0x73a94e(0x26b)+_0x312bd8['id']);if(_0x312bd8['average'])_0xe146f['price']=_0x312bd8[_0x73a94e(0x20e)];else{if(_0x312bd8[_0x73a94e(0x197)])_0xe146f[_0x73a94e(0x197)]=_0x312bd8['price'];else{}}_0xe146f[_0x73a94e(0x180)]=_0x312bd8[_0x73a94e(0x180)],updateHighestFee(_0xe146f),_0x21c6c5('filled'),await validateOrders();if(lockOrders==ORDERS[_0x73a94e(0x189)]){const _0xa8fd7d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xa8fd7d;}_0xe146f['fee']={'currency':_0x312bd8[_0x73a94e(0x1c0)]?_0x312bd8[_0x73a94e(0x1c0)][_0x73a94e(0x20f)]:null,'cost':_0x312bd8[_0x73a94e(0x1c0)]?_0x312bd8['fee'][_0x73a94e(0x1ed)]:0x0},await updateCoinResults(_0xe146f);}}}if(!_0x501931){logger[_0x73a94e(0x237)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x312bd8['id']),_0x21c6c5('filled');const _0x56e397=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x56e397,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x2975f4=JSON[_0x73a94e(0x1cd)](lastBalances[_0x73a94e(0x12b)]);const _0x487ec6=_0x2975f4[_0x73a94e(0x177)](_0x2c92a1=>_0x2c92a1[_0x73a94e(0x182)]==_0x312bd8[_0x73a94e(0x182)]);if(_0x487ec6){if(_0x223617=='open')_0x487ec6[_0x73a94e(0x29f)]=_0x487ec6[_0x73a94e(0x29f)]==_0x73a94e(0x180)?_0x73a94e(0x180):'open';else{if(_0x223617=='canceled')_0x487ec6['orderstatus']=_0x487ec6['orderstatus']==_0x73a94e(0x180)?_0x73a94e(0x180):'canceled';else _0x223617=='closed'&&(_0x487ec6[_0x73a94e(0x29f)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x73a94e(0x14b)](_0x2975f4)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x223b7f=![];currentCoins['forEach'](_0xd2d331=>{const _0xbb0c7e=_0x5bad;_0x223b7f=allOpenOrders[_0xbb0c7e(0x177)](_0x39e4e1=>_0x39e4e1[_0xbb0c7e(0x182)]==_0xd2d331[_0xbb0c7e(0x182)]),_0xd2d331['orderstatus']=_0x223b7f?'open':_0xbb0c7e(0x22b);});}function _0x5bad(_0x1df881,_0x5c2b18){const _0xc2488a=_0x43cf();return _0x5bad=function(_0x515178,_0xda0302){_0x515178=_0x515178-0x10a;let _0x43cf59=_0xc2488a[_0x515178];return _0x43cf59;},_0x5bad(_0x1df881,_0x5c2b18);}async function getCoins(_0x40708e=0x0,_0x3faa8d=!![],_0xa3a3b9=config['basecoin']){const _0xdb665c=_0xc95087;let _0x1d1880,_0x21b134=[],_0x297845=[],_0x4b68e3=[];if(_0x40708e)await sleep(_0x40708e);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1d1880=await exchange[_0xdb665c(0x22f)](),mybalances=_0x1d1880[_0xdb665c(0x150)];for(const [_0x2ca69a,_0x47dbbd]of Object['entries'](mybalances)){_0x4b68e3['push'](_0x2ca69a);}config[_0xdb665c(0x12b)][_0xdb665c(0x20d)](_0x3ec7f9=>{const _0x553542=_0xdb665c;!_0x4b68e3[_0x553542(0x242)](_0x3ec7f9[_0x553542(0x223)])&&(mybalances[_0x3ec7f9[_0x553542(0x223)]]=0x0);});if(_0xa3a3b9=='')for(const [_0x258c25,_0x2d3f7a]of Object[_0xdb665c(0x229)](mybalances)){_0x2d3f7a!=0x0&&_0x21b134['push']({'coin':_0x258c25});}else{let _0x1d89d9=![];for(const [_0x530fa6,_0x423ce1]of Object[_0xdb665c(0x229)](mybalances)){const _0x351ea2=config[_0xdb665c(0x12b)]['find'](_0x4aa0ef=>_0x4aa0ef[_0xdb665c(0x223)]==_0x530fa6),_0x2200ea=_0x530fa6+'/'+_0xa3a3b9,_0x52c97d=_0xa3a3b9+'/'+_0x530fa6,_0x395b3b=currentCoins['find'](_0x539259=>_0x539259[_0xdb665c(0x223)]==_0x530fa6);_0x1d89d9=![];if((_0x423ce1!=0x0||_0x351ea2)&&(allSymbols[_0xdb665c(0x242)](_0x2200ea)||_0x530fa6==_0xa3a3b9))_0x21b134[_0xdb665c(0x2a9)]({'coin':_0x530fa6,'symbol':_0x2200ea,'reverse':![],'number':Math[_0xdb665c(0x1a3)](_0x423ce1+(_0x351ea2&&_0x351ea2[_0xdb665c(0x138)]||0x0),0x0),'orderstatus':_0x395b3b?_0x395b3b[_0xdb665c(0x29f)]:_0xdb665c(0x22b)});else{if((_0x423ce1!=0x0||_0x351ea2)&&allSymbols['includes'](_0x52c97d))_0x21b134[_0xdb665c(0x2a9)]({'coin':_0x530fa6,'symbol':_0x52c97d,'reverse':!![],'number':Math['max'](_0x423ce1+(_0x351ea2&&_0x351ea2[_0xdb665c(0x138)]||0x0),0x0),'orderstatus':_0x395b3b?_0x395b3b[_0xdb665c(0x29f)]:_0xdb665c(0x22b)});else _0x351ea2&&_0x21b134[_0xdb665c(0x2a9)]({'coin':_0x351ea2['coin'],'symbol':_0x351ea2['symbol'],'reverse':_0x351ea2[_0xdb665c(0x10f)],'number':0x0,'orderstatus':_0xdb665c(0x22b)});}}}}catch(_0x237c01){if(!_0x3faa8d)handleErrorNoStop(_0x237c01,'getCoins()');else await handleError(_0x237c01,_0xdb665c(0x127));}return _0x297845=cloneDeep(_0x21b134),_0x21b134=_0x21b134[_0xdb665c(0x238)](_0x12fbfa=>{const _0x137d76=_0xdb665c,_0x1197ab=config[_0x137d76(0x12b)][_0x137d76(0x177)](_0x4ce071=>_0x4ce071[_0x137d76(0x223)]==_0x12fbfa[_0x137d76(0x223)]);return _0x1197ab&&!_0x1197ab[_0x137d76(0x195)];}),[_0x21b134,_0x297845];}async function getCoinNumber(_0x1cc517){const _0x2e4460=_0xc95087;let _0x14e605;try{const _0x3cc07f=await exchange[_0x2e4460(0x22f)]();_0x14e605=_0x3cc07f[_0x2e4460(0x150)][_0x1cc517];}catch(_0x7d0081){await handleError(_0x7d0081,_0x2e4460(0x292));}return _0x14e605;}async function getOpenOrders(){const _0x6d6b28=_0xc95087;let _0x1a6ca4;allOpenOrders=[];try{for(const _0x42bea3 of config[_0x6d6b28(0x12b)]){!_0x42bea3[_0x6d6b28(0x195)]&&_0x42bea3[_0x6d6b28(0x223)]!=config['basecoin']&&(_0x1a6ca4=await exchange[_0x6d6b28(0x175)](_0x42bea3['symbol']),_0x1a6ca4[_0x6d6b28(0x21c)]>0x0&&allOpenOrders[_0x6d6b28(0x2a9)](_0x1a6ca4[0x0]));}}catch(_0x1174e6){await handleError(_0x1174e6,_0x6d6b28(0x199));}}async function handleOpenOrders(_0x2c1ff2=0x0){const _0x431fee=_0xc95087;allOpenOrders[_0x431fee(0x21c)]==0x0&&lockOrders==ORDERS[_0x431fee(0x189)]&&allOrdersPlaced&&(_0x2c1ff2==0x0?(logger[_0x431fee(0x237)](_0x431fee(0x215)),_0x2c1ff2++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x431fee(0x237)](_0x431fee(0x13f)),validateOrders(_0x431fee(0x245))));}async function testAPI(_0x5a807a){const _0x327314=_0xc95087,_0x4289a1=ccxt[_0x327314(0x1dd)][_0x5a807a[_0x327314(0x113)][_0x327314(0x1bf)]()],_0x59e983=new _0x4289a1({'apiKey':_0x5a807a['apiKey'],'secret':_0x5a807a['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x327314(0x1b3)}});if(_0x5a807a['apiPassword'])_0x59e983[_0x327314(0x12d)]=_0x5a807a[_0x327314(0x19a)];try{await _0x59e983[_0x327314(0x17e)]();}catch(_0x1ccc27){throw _0x1ccc27;}}function cloneDeep(_0x4655f6){const _0x87f888=_0xc95087;return JSON[_0x87f888(0x1cd)](JSON['stringify'](_0x4655f6));}async function getPortfolio(_0x449574){const _0x430257=_0xc95087;let _0x4743ab=[],_0x41f9c2=[],_0x9f28a0=[],_0x1b2845;if(_0x449574['apiKey']!==_0x430257(0x222)||_0x449574[_0x430257(0x186)]!=='************'||_0x449574[_0x430257(0x19a)]&&_0x449574['apiPassword']!=='************'){if(config[_0x430257(0x113)]){if(_0x449574['apiKey']==_0x430257(0x222))_0x449574[_0x430257(0x1c3)]=config[_0x430257(0x1c3)];if(_0x449574[_0x430257(0x186)]==_0x430257(0x222))_0x449574['apiSecret']=config[_0x430257(0x186)];if(_0x449574['apiPassword']==_0x430257(0x222))_0x449574[_0x430257(0x19a)]=config[_0x430257(0x19a)];try{await testAPI(_0x449574);}catch(_0x1a5f9e){if(_0x1a5f9e[_0x430257(0x15d)]()[_0x430257(0x242)](_0x430257(0x120))){logger[_0x430257(0x237)](_0x430257(0x1b8)),proxyEmit('portfolio',![]);return;}else{handleError(_0x1a5f9e,_0x430257(0x26c));return;}}}await initExchange(_0x449574[_0x430257(0x113)],_0x449574['apiKey'],_0x449574[_0x430257(0x186)],_0x449574[_0x430257(0x19a)]);try{await loadSymbols();}catch(_0x50f2d3){if(_0x50f2d3[_0x430257(0x15d)]()['includes'](_0x430257(0x120))){proxyEmit(_0x430257(0x12b),![]);return;}else{handleError(_0x50f2d3,_0x430257(0x20c));return;}}const _0x25e8f6=await getCoins(0x0,![],_0x449574[_0x430257(0x1d0)]);_0x9f28a0=cloneDeep(_0x25e8f6[0x1]);}else{const _0x3ccbe7=await getCoins();_0x9f28a0=cloneDeep(_0x3ccbe7[0x1]);}if(_0x449574['basecoin']=='')proxyEmit('portfolio',_0x9f28a0);else{_0x9f28a0[_0x430257(0x20d)](_0x471c30=>{const _0x2a6222=_0x430257;if(_0x471c30['coin']!=_0x449574[_0x2a6222(0x1d0)]&&allSymbols['includes'](_0x471c30['symbol']))_0x4743ab[_0x2a6222(0x2a9)](_0x471c30[_0x2a6222(0x182)]);});if(_0x4743ab[_0x430257(0x21c)]==0x0)logHistory(_0x430257(0x1d5),_0x430257(0x23c));else{try{_0x41f9c2=await getTickers(_0x4743ab);}catch(_0x39d131){if(_0x39d131[_0x430257(0x15d)]()[_0x430257(0x242)](_0x430257(0x120))){proxyEmit(_0x430257(0x12b),![]);return;}else handleError(_0x39d131,_0x430257(0x244));}_0x9f28a0['forEach'](_0x5dd6e6=>{const _0x1ce3d3=_0x430257;_0x5dd6e6['coin']!=_0x449574[_0x1ce3d3(0x1d0)]?_0x41f9c2[_0x5dd6e6[_0x1ce3d3(0x182)]]?_0x1b2845=_0x5dd6e6['reverse']?0x1/_0x41f9c2[_0x5dd6e6[_0x1ce3d3(0x182)]][_0x1ce3d3(0x144)]:_0x41f9c2[_0x5dd6e6[_0x1ce3d3(0x182)]][_0x1ce3d3(0x144)]:_0x1b2845=0x0:_0x1b2845=0x1,_0x5dd6e6['price']=formatResult(_0x1b2845,0x8);}),proxyEmit(_0x430257(0x12b),_0x9f28a0);}}}function truncateTradeAmount(_0x3af3bc,_0x49e8d7){let _0x145c34=0x0;try{_0x145c34=exchange['amountToPrecision'](_0x3af3bc,_0x49e8d7);}catch(_0x57558a){}return _0x145c34;}function checkMinimums(_0x2be5a5){const _0x3b64bf=_0xc95087;let _0x2e332b=!![];const _0x56a8f5=!_0x2be5a5[_0x3b64bf(0x10f)]?markets[_0x2be5a5['symbol']][_0x3b64bf(0x2a7)][_0x3b64bf(0x164)][_0x3b64bf(0x188)]:markets[_0x2be5a5[_0x3b64bf(0x182)]][_0x3b64bf(0x2a7)][_0x3b64bf(0x1ed)][_0x3b64bf(0x188)],_0x3f7a73=!_0x2be5a5[_0x3b64bf(0x10f)]?markets[_0x2be5a5[_0x3b64bf(0x182)]][_0x3b64bf(0x2a7)][_0x3b64bf(0x1ed)][_0x3b64bf(0x188)]:markets[_0x2be5a5[_0x3b64bf(0x182)]][_0x3b64bf(0x2a7)]['amount'][_0x3b64bf(0x188)],_0x43d68a=truncateTradeAmount(_0x2be5a5[_0x3b64bf(0x182)],_0x2be5a5[_0x3b64bf(0x15c)]);_0x2be5a5['trade']=_0x43d68a;if(Math[_0x3b64bf(0x1d8)](_0x43d68a)<_0x56a8f5)_0x2e332b=![];if(Math[_0x3b64bf(0x1d8)](_0x43d68a)*_0x2be5a5['last']<_0x3f7a73)_0x2e332b=![];if(_0x2be5a5[_0x3b64bf(0x2af)]==_0x3b64bf(0x111)){let _0x58ad98=config[_0x3b64bf(0x12b)]['find'](_0x486731=>_0x486731[_0x3b64bf(0x223)]==_0x2be5a5[_0x3b64bf(0x223)]);if(_0x58ad98[_0x3b64bf(0x138)]>0x0){if(Math['abs'](_0x43d68a)>_0x2be5a5[_0x3b64bf(0x1a5)]-_0x58ad98[_0x3b64bf(0x138)])_0x2e332b=![];}else{if(Math[_0x3b64bf(0x1d8)](_0x43d68a)>_0x2be5a5[_0x3b64bf(0x1a5)])_0x2e332b=![];}}if(_0x2be5a5['side']==_0x3b64bf(0x29a)){let _0x36c02f=config[_0x3b64bf(0x12b)]['find'](_0x1410a0=>_0x1410a0[_0x3b64bf(0x223)]==config[_0x3b64bf(0x1d0)]),_0x28e70e=currentCoins['find'](_0x20cdbf=>_0x20cdbf[_0x3b64bf(0x223)]==config[_0x3b64bf(0x1d0)]);if(_0x36c02f[_0x3b64bf(0x138)]>0x0){if(Math[_0x3b64bf(0x1d8)](_0x43d68a)*_0x2be5a5[_0x3b64bf(0x144)]>_0x28e70e[_0x3b64bf(0x1a5)]-_0x36c02f[_0x3b64bf(0x138)])_0x2e332b=![];}else{if(Math[_0x3b64bf(0x1d8)](_0x43d68a)*_0x2be5a5[_0x3b64bf(0x144)]>_0x28e70e[_0x3b64bf(0x1a5)])_0x2e332b=![];}}return _0x2e332b;}async function getBalances(_0x348114=!![]){const _0x99203=_0xc95087;let _0xefc4bc=0x0,_0x2c0629;const _0x582ced=config[_0x99203(0x260)];if(config[_0x99203(0x284)]&&config[_0x99203(0x19d)]<0x0)await validate24hChanges();currentCoins[_0x99203(0x20d)](_0x273011=>{const _0x1200fd=_0x99203;if(_0x273011[_0x1200fd(0x223)]!=config[_0x1200fd(0x1d0)]){let _0x155069=global[_0x1200fd(0x25a)][noslash(_0x273011[_0x1200fd(0x182)])];_0x2c0629=_0x273011[_0x1200fd(0x10f)]?0x1/_0x155069:_0x155069;}else _0x2c0629=0x1;let _0x3cd2a2=_0x273011[_0x1200fd(0x1a5)]*_0x2c0629;_0xefc4bc+=_0x3cd2a2,_0x273011['last']=formatResult(Number(_0x2c0629),0x8),_0x273011[_0x1200fd(0x17d)]=_0x3cd2a2;}),currentCoins['forEach'](_0x3f8c11=>{const _0x1b5ecc=_0x99203;let _0x335428=config['portfolio'][_0x1b5ecc(0x177)](_0x38a331=>_0x38a331['coin']==_0x3f8c11[_0x1b5ecc(0x223)]),_0x1f6b8a=Number(_0x335428[_0x1b5ecc(0x1c4)]),_0x5e2ddb=_0x3f8c11[_0x1b5ecc(0x17d)]/_0xefc4bc*0x64,_0x171cc2=_0x1f6b8a*_0xefc4bc/0x64/_0x3f8c11[_0x1b5ecc(0x144)]-_0x3f8c11[_0x1b5ecc(0x1a5)];_0x3f8c11[_0x1b5ecc(0x1c4)]=formatResult(_0x5e2ddb,0x3),_0x3f8c11['target']=formatResult(_0x1f6b8a,0x3),_0x3f8c11['trade']=formatResult(_0x171cc2,0x8),_0x3f8c11['side']='',_0x3f8c11[_0x1b5ecc(0x1c1)]=![];if(_0x3f8c11[_0x1b5ecc(0x223)]!=config[_0x1b5ecc(0x1d0)]){if(_0x3f8c11[_0x1b5ecc(0x1c4)]>_0x1f6b8a)_0x3f8c11[_0x1b5ecc(0x2af)]=_0x1b5ecc(0x111),_0x3f8c11['valid']=checkMinimums(_0x3f8c11);else _0x3f8c11['distribution']<_0x1f6b8a&&(_0x3f8c11['side']='buy',_0x3f8c11[_0x1b5ecc(0x1c1)]=checkMinimums(_0x3f8c11));}_0x3f8c11[_0x1b5ecc(0x2b1)]=_0x3f8c11[_0x1b5ecc(0x1c4)]/_0x3f8c11['target']-0x1;if(_0x3f8c11[_0x1b5ecc(0x29f)]=='filled'||_0x3f8c11['orderstatus']==_0x1b5ecc(0x1cc))_0x3f8c11[_0x1b5ecc(0x29f)]=_0x1b5ecc(0x22b);}),currentCoins['sort']((_0x118558,_0x415667)=>_0x118558['delta']<_0x415667[_0x99203(0x2b1)]?0x1:_0x415667['delta']<_0x118558[_0x99203(0x2b1)]?-0x1:0x0);const _0x4a2483=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4a2483[_0x99203(0x1ea)],'usd':_0x4a2483[_0x99203(0x206)],'portfolio':JSON[_0x99203(0x14b)](currentCoins),'threshold':_0x582ced},proxyEmit(_0x99203(0x124),{'serverversion':serverversion,'balances':lastBalances});if(_0x348114){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x582ced});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x582ced});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2de02d=getNormalizedPerformance();getStartingBalances(_0x2de02d),emitPerformance(_0x2de02d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x13ff12=getNormalizedPerformance();emitPerformance(_0x13ff12),getStartingBalances(_0x13ff12),logger[_0x99203(0x237)](_0x99203(0x149));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x29ca4e=_0xc95087;if(!lastBalances)return;let _0x54b554=[],_0x4ae5b5,_0x41c3a=JSON['parse'](lastBalances[_0x29ca4e(0x12b)]);_0x41c3a['sort']((_0x220507,_0xd1b717)=>_0x220507[_0x29ca4e(0x223)]>_0xd1b717[_0x29ca4e(0x223)]?0x1:_0xd1b717[_0x29ca4e(0x223)]>_0x220507[_0x29ca4e(0x223)]?-0x1:0x0),_0x41c3a['forEach'](_0x31f9d8=>{const _0x3de86d=_0x29ca4e;let _0x4bb3e4={'coin':_0x31f9d8[_0x3de86d(0x223)],'number':_0x31f9d8['number'],'price':_0x31f9d8[_0x3de86d(0x144)]};_0x54b554['push'](_0x4bb3e4);});const _0x3c4605=await getFiat();_0x4ae5b5={'date':lastBalances[_0x29ca4e(0x169)]['split']('\x20')[0x0],'eur':_0x3c4605['eur'],'usd':_0x3c4605[_0x29ca4e(0x206)],'coins':_0x54b554};let _0x1e37f3=dbPerformance[_0x29ca4e(0x122)](_0x29ca4e(0x1fa))['find']({'date':_0x4ae5b5[_0x29ca4e(0x198)]})['value']();_0x1e37f3?_0x4ae5b5[_0x29ca4e(0x198)]!=config['startdate']&&dbPerformance['get'](_0x29ca4e(0x1fa))[_0x29ca4e(0x177)]({'date':_0x4ae5b5['date']})['assign'](_0x4ae5b5)[_0x29ca4e(0x172)]():dbPerformance[_0x29ca4e(0x122)](_0x29ca4e(0x1fa))[_0x29ca4e(0x2a9)](_0x4ae5b5)[_0x29ca4e(0x172)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x27b77a=_0xc95087;let _0x5e0f0f=[];if(dbPerformance[_0x27b77a(0x1f9)]('data')[_0x27b77a(0x17d)]()){let _0xb1b6b=dbPerformance[_0x27b77a(0x122)](_0x27b77a(0x1fa))['cloneDeep']()[_0x27b77a(0x238)](_0x4dc7b3=>{const _0x55e8ef=_0x27b77a;if(_0x4dc7b3[_0x55e8ef(0x15a)]['length']==0x0)return![];else return!![];})[_0x27b77a(0x1eb)](_0x27b77a(0x198))['value'](),_0x312ee0=[...config[_0x27b77a(0x239)]];_0x312ee0[_0x27b77a(0x28a)]((_0x44346c,_0x1f7d79)=>_0x44346c['date']>_0x1f7d79[_0x27b77a(0x198)]?-0x1:_0x1f7d79[_0x27b77a(0x198)]>_0x44346c[_0x27b77a(0x198)]?0x1:0x0);let _0x2fea73=0x1,_0x29eb49=[],_0x2fe8e3=0x0;_0xb1b6b[_0x27b77a(0x13b)]()['reverse']()[_0x27b77a(0x20d)]((_0x255f70,_0x37913d)=>{const _0x508b01=_0x27b77a;if(_0x312ee0[_0x2fe8e3]){if(_0xb1b6b[_0xb1b6b[_0x508b01(0x21c)]-_0x37913d]&&_0x312ee0[_0x2fe8e3][_0x508b01(0x198)]==_0xb1b6b[_0xb1b6b['length']-_0x37913d][_0x508b01(0x198)]){if(_0x37913d<_0xb1b6b[_0x508b01(0x21c)]){let _0x2c831b=0x0,_0x5563d6=0x0;_0xb1b6b[_0xb1b6b[_0x508b01(0x21c)]-_0x37913d]['coins'][_0x508b01(0x20d)](_0x151205=>{const _0x444cae=_0x508b01;_0x5563d6+=_0x151205['number']*_0x151205[_0x444cae(0x197)];}),_0x312ee0[_0x2fe8e3][_0x508b01(0x179)]['forEach'](_0x2e9508=>{const _0x2e17db=_0x508b01;_0x2c831b+=_0x2e9508[_0x2e17db(0x1a5)]*_0x2e9508[_0x2e17db(0x197)];}),_0x2fea73*=_0x2c831b/(_0x5563d6-_0x2c831b)+0x1;}_0x2fe8e3++;}}let _0x1d9756=0x0;_0x255f70['coins'][_0x508b01(0x20d)](_0x13222e=>{const _0x3e0ea4=_0x508b01;_0x1d9756+=_0x13222e[_0x3e0ea4(0x1a5)]*_0x13222e[_0x3e0ea4(0x197)];}),_0x29eb49[_0xb1b6b['length']-_0x37913d-0x1]=_0x1d9756*(_0x2fea73-0x1);});let _0xdd197d=[];_0x312ee0=[...config['liquidity']]||[];let _0x583bd1=0x0;_0x2fe8e3=0x0,_0xb1b6b[_0x27b77a(0x20d)]((_0x26296f,_0x2337e6)=>{const _0x1a2c02=_0x27b77a;if(_0x312ee0[_0x2fe8e3]){const _0x55ae40=fns['parse'](_0x312ee0[_0x2fe8e3][_0x1a2c02(0x198)],_0x1a2c02(0x1c6),new Date()),_0x44f9a0=fns[_0x1a2c02(0x1cd)](_0x26296f['date'],'yyyy/MM/dd',new Date());if(fns[_0x1a2c02(0x166)](_0x55ae40,_0x44f9a0)){let _0x1821ee=0x0;_0x312ee0[_0x2fe8e3][_0x1a2c02(0x179)][_0x1a2c02(0x20d)](_0x1bcb54=>{const _0x416798=_0x1a2c02;!_0xdd197d[_0x1bcb54[_0x416798(0x223)]]?_0xdd197d[_0x1bcb54[_0x416798(0x223)]]=_0x1bcb54['number']:(_0x1821ee=_0xdd197d[_0x1bcb54[_0x416798(0x223)]],_0xdd197d[_0x1bcb54[_0x416798(0x223)]]+=_0x1bcb54['number']);const _0x4c9350=_0x26296f[_0x416798(0x15a)][_0x416798(0x177)](_0x5d958a=>_0x5d958a[_0x416798(0x223)]==_0x1bcb54['coin']);(!_0x4c9350||_0x4c9350[_0x416798(0x1a5)]==0x0)&&(_0x583bd1+=(-_0x1bcb54[_0x416798(0x1a5)]-_0x1821ee)*_0x1bcb54[_0x416798(0x197)]);}),_0x2fe8e3++;}}_0x26296f['coins'][_0x1a2c02(0x20d)]((_0x3c9dec,_0x37776e)=>{const _0x31d866=_0x1a2c02;_0xdd197d[_0x3c9dec[_0x31d866(0x223)]]&&(_0x3c9dec[_0x31d866(0x1a1)]=_0xdd197d[_0x3c9dec[_0x31d866(0x223)]]);}),_0x5e0f0f[_0x1a2c02(0x2a9)]({'date':_0x26296f[_0x1a2c02(0x198)],'eur':_0x26296f[_0x1a2c02(0x1ea)],'usd':_0x26296f[_0x1a2c02(0x206)],'offset':_0x29eb49[_0x2337e6],'netoffset':_0x583bd1,'coins':_0x26296f[_0x1a2c02(0x15a)]});});}return _0x5e0f0f;}function emitPerformance(_0x2f4c06){const _0x48ae25=_0xc95087;_0x2f4c06[_0x48ae25(0x21c)]!==0x0?(proxyEmit(_0x48ae25(0x1aa),_0x2f4c06),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3b1bb8,_0x337cc0){const _0x3fcc38=_0xc95087;let _0x568adb=0x0,_0x56e57b=0x0,_0x291b9f=0x0;_0x3b1bb8[_0x3fcc38(0x15a)]['forEach'](_0x46a7cc=>{const _0xa8e809=_0x3fcc38;_0x568adb+=_0x46a7cc[_0xa8e809(0x1a5)]*_0x46a7cc[_0xa8e809(0x197)];});_0x337cc0&&(_0x568adb+=_0x3b1bb8[_0x3fcc38(0x138)]);if(config[_0x3fcc38(0x1d0)]===_0x3fcc38(0x1da)||config[_0x3fcc38(0x1d0)]==='ETH'||config['basecoin']===_0x3fcc38(0x1fc))_0x56e57b=_0x568adb*_0x3b1bb8[_0x3fcc38(0x1ea)],_0x291b9f=_0x568adb*_0x3b1bb8[_0x3fcc38(0x206)];else{if(usdBasecoins[_0x3fcc38(0x242)](config['basecoin']))_0x56e57b=_0x568adb*_0x3b1bb8['eur']/_0x3b1bb8[_0x3fcc38(0x206)],_0x291b9f=_0x568adb;else config[_0x3fcc38(0x1d0)]===_0x3fcc38(0x1f0)&&(_0x56e57b=_0x568adb,_0x291b9f=_0x568adb*_0x3b1bb8[_0x3fcc38(0x206)]/_0x3b1bb8[_0x3fcc38(0x1ea)]);}return[_0x568adb,_0x56e57b,_0x291b9f];}function getKPIs(_0x28a4b6,_0x596c0a='EUR'){const _0x2a28bf=_0xc95087,_0xecf981=config[_0x2a28bf(0x1d0)],_0x4191de=lastBalances,_0x4db4ca=currentCoins,_0x37d9dc=getNormalizedPerformance(),_0x14f13d=_0x28a4b6===_0x2a28bf(0x1d0)?_0xecf981:_0x28a4b6==='fiat'||_0x28a4b6===_0x2a28bf(0x255)?_0x596c0a:_0x2a28bf(0x19c)+_0xecf981,_0x3440b6=_0x28a4b6===_0x2a28bf(0x16c)?_0x2a28bf(0x10d):_0x28a4b6===_0x2a28bf(0x255)?_0x2a28bf(0x10d):_0x14f13d+_0x2a28bf(0x267),_0x566416=_0x28a4b6==='net-basecoin'||_0x28a4b6==='net-fiat'?_0x2a28bf(0x10d):_0x14f13d+'\x20change';let _0x35384c=0x0;_0x4db4ca[_0x2a28bf(0x20d)](_0x3dd832=>{const _0x4c5777=_0x2a28bf;_0x35384c+=_0x3dd832[_0x4c5777(0x1a5)]*_0x3dd832['last'];});if(_0x28a4b6===_0x2a28bf(0x296)||_0x28a4b6===_0x2a28bf(0x255)){if(_0xecf981===_0x2a28bf(0x1da)||_0xecf981==='ETH'||_0xecf981===_0x2a28bf(0x1fc))_0x35384c=_0x35384c*(_0x596c0a===_0x2a28bf(0x1f0)?_0x4191de[_0x2a28bf(0x1ea)]:_0x4191de[_0x2a28bf(0x206)]);else{if(usdBasecoins[_0x2a28bf(0x242)](_0xecf981))_0x35384c=_0x35384c*(_0x596c0a===_0x2a28bf(0x1f0)?_0x4191de[_0x2a28bf(0x1ea)]/_0x4191de[_0x2a28bf(0x206)]:0x1);else _0xecf981===_0x2a28bf(0x1f0)&&(_0x35384c=_0x35384c*(_0x596c0a===_0x2a28bf(0x1f0)?0x1:_0x4191de[_0x2a28bf(0x206)]/_0x4191de[_0x2a28bf(0x1ea)]));}}let _0x46cb60;if(_0x35384c!==0x0){if(_0x28a4b6===_0x2a28bf(0x1d0))_0x46cb60=(_0x35384c/startingBalances[_0x2a28bf(0x1d0)]-0x1)*0x64;else{if(_0x596c0a===_0x2a28bf(0x1f0))_0x46cb60=(_0x35384c/startingBalances['eur']-0x1)*0x64;else _0x46cb60=(_0x35384c/startingBalances['usd']-0x1)*0x64;}let _0x2203f1=0x0;if(startingBalances[_0x2a28bf(0x15a)])_0x4db4ca['forEach'](_0x26c0fc=>{const _0x4122eb=_0x2a28bf;let _0x259304=startingBalances['coins'][_0x4122eb(0x177)](_0x1e2a28=>_0x1e2a28['coin']===_0x26c0fc['coin']);if(_0x259304&&_0x259304[_0x4122eb(0x223)]&&_0x26c0fc[_0x4122eb(0x1a5)]!==0x0)_0x2203f1+=_0x259304['number']*_0x26c0fc[_0x4122eb(0x144)];});let _0x174030=0x0;if(_0x37d9dc[_0x2a28bf(0x21c)]!==0x0){let _0x42616e=_0x37d9dc[_0x37d9dc[_0x2a28bf(0x21c)]-0x1];_0x174030=_0x42616e['netoffset'];}_0x2203f1-=_0x174030;_0x28a4b6==='net-basecoin'&&(_0x46cb60=(_0x35384c-_0x2203f1)/startingBalances[_0x2a28bf(0x1d0)]*0x64,_0x35384c=_0x35384c-_0x2203f1);if(_0x28a4b6===_0x2a28bf(0x255)){let _0x560754=_0x596c0a===_0x2a28bf(0x1f0)?startingBalances[_0x2a28bf(0x1ea)]:startingBalances[_0x2a28bf(0x206)];if(_0xecf981===_0x2a28bf(0x1da)||_0xecf981===_0x2a28bf(0x1af)||_0xecf981===_0x2a28bf(0x1fc))_0x2203f1=_0x596c0a===_0x2a28bf(0x1f0)?_0x2203f1*_0x4191de[_0x2a28bf(0x1ea)]:_0x2203f1*_0x4191de[_0x2a28bf(0x206)];else{if(usdBasecoins[_0x2a28bf(0x242)](_0xecf981))_0x2203f1=_0x596c0a==='EUR'?_0x2203f1*_0x4191de['eur']/_0x4191de[_0x2a28bf(0x206)]:_0x2203f1;else _0xecf981===_0x2a28bf(0x1f0)&&(_0x2203f1=_0x596c0a===_0x2a28bf(0x1f0)?_0x2203f1:_0x2203f1*_0x4191de[_0x2a28bf(0x206)]/_0x4191de['eur']);}_0x46cb60=(_0x35384c-_0x2203f1)/_0x560754*0x64,_0x35384c=_0x35384c-_0x2203f1;}if(_0x46cb60){if(_0x46cb60<0x64)_0x46cb60=_0x46cb60[_0x2a28bf(0x11d)](0x2);else{if(_0x46cb60<0x3e8)_0x46cb60=_0x46cb60[_0x2a28bf(0x11d)](0x1);else _0x46cb60=_0x46cb60[_0x2a28bf(0x11d)](0x0);}}else _0x46cb60=Number('0')[_0x2a28bf(0x11d)](0x2);if(_0x35384c){if(Math['abs'](_0x35384c)<0.000001)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x2);else{if(Math['abs'](_0x35384c)<0.1)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x6);else{if(Math[_0x2a28bf(0x1d8)](_0x35384c)<0x1)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x5);else{if(Math[_0x2a28bf(0x1d8)](_0x35384c)<0xa)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x4);else{if(Math['abs'](_0x35384c)<0x64)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x3);else{if(Math[_0x2a28bf(0x1d8)](_0x35384c)<0x3e8)_0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x2);else _0x35384c=_0x35384c[_0x2a28bf(0x11d)](0x2);}}}}}}else _0x35384c=Number('0')[_0x2a28bf(0x11d)](0x2);}else _0x46cb60=Number('0')[_0x2a28bf(0x11d)](0x2);return{'value':_0x35384c,'change':_0x46cb60,'leftTxt':_0x3440b6,'rightTxt':_0x566416};}async function getStartingBalances(_0x124816,_0x385d55=!![]){const _0x5dd331=_0xc95087;if(_0x124816[_0x5dd331(0x21c)]!==0x0){const [_0x200fe7,_0x5f352f,_0x438e64]=getPerf(_0x124816[0x0],!![]);let _0x14ced8=[];config[_0x5dd331(0x12b)][_0x5dd331(0x20d)](_0x452222=>{const _0x1828de=_0x5dd331;let _0x2aee8c=0x0,_0x1d9fac;config[_0x1828de(0x239)][_0x1828de(0x20d)](_0x4449cf=>{const _0x35c8fa=_0x1828de;let _0x33d5b2=_0x4449cf[_0x35c8fa(0x179)][_0x35c8fa(0x177)](_0x691981=>_0x691981['coin']==_0x452222[_0x35c8fa(0x223)]);if(_0x33d5b2){_0x2aee8c+=_0x33d5b2[_0x35c8fa(0x1a5)];if(!_0x1d9fac)_0x1d9fac=_0x33d5b2[_0x35c8fa(0x197)];}}),_0x14ced8[_0x1828de(0x2a9)]({'coin':_0x452222[_0x1828de(0x223)],'number':_0x2aee8c,'initialprice':_0x1d9fac});});const _0x5c721c={'basecoin':_0x200fe7,'eur':_0x5f352f,'usd':_0x438e64,'coins':_0x14ced8};if(_0x385d55)proxyEmit('starting-balances',_0x5c721c);startingBalances=_0x5c721c;}}function headlessMode(_0x2f1fae){const _0x4ee928=_0xc95087;let _0x531187=_0x2f1fae[_0x4ee928(0x12b)],_0x292ef7=_0x2f1fae[_0x4ee928(0x260)],_0x2e587d=[];for(let _0x32682e of _0x531187){if(_0x32682e[_0x4ee928(0x223)]!=config[_0x4ee928(0x1d0)]){if(_0x32682e[_0x4ee928(0x2b1)]>=_0x292ef7/0x64){if(_0x32682e[_0x4ee928(0x1c1)])_0x2e587d['push'](_0x32682e);}else{if(_0x32682e[_0x4ee928(0x2b1)]<=-_0x292ef7/0x64){if(_0x32682e[_0x4ee928(0x1c1)])_0x2e587d[_0x4ee928(0x2a9)](_0x32682e);}}}}_0x2e587d[_0x4ee928(0x21c)]>0x0&&(lockOrders==ORDERS[_0x4ee928(0x18f)]&&!coolingDown&&_0x2e587d['forEach'](_0x55a524=>{const _0x22d640=_0x4ee928;logger['debug'](_0x22d640(0x159)+_0x55a524['coin']+'\x20'+_0x55a524['number']+'\x20'+_0x55a524[_0x22d640(0x144)]+'\x20'+_0x55a524[_0x22d640(0x1c4)]+'%\x20'+_0x55a524[_0x22d640(0x23a)]+'%\x20'+(0x64*_0x55a524[_0x22d640(0x2b1)])[_0x22d640(0x11d)](0x2)+_0x22d640(0x270)+_0x292ef7[_0x22d640(0x11d)](0x2)+'%)');}),placeOrder(_0x2e587d));}function notifyBalance(_0x5c9ac6){const _0x4d514d=_0xc95087;let _0x1aba71=_0x5c9ac6[_0x4d514d(0x12b)],_0x3dc78d=_0x5c9ac6[_0x4d514d(0x260)],_0x24f98d=[];for(let _0x3119c2 of _0x1aba71){if(_0x3119c2['coin']!=config[_0x4d514d(0x1d0)]){if(_0x3119c2[_0x4d514d(0x2b1)]>=_0x3dc78d/0x64){if(_0x3119c2[_0x4d514d(0x1c1)])_0x24f98d[_0x4d514d(0x2a9)](_0x3119c2);}else{if(_0x3119c2['delta']<=-_0x3dc78d/0x64){if(_0x3119c2['valid'])_0x24f98d[_0x4d514d(0x2a9)](_0x3119c2);}}}}if(_0x24f98d[_0x4d514d(0x21c)]>0x0){let _0xfed993=_0x24f98d[_0x4d514d(0x231)](_0x17089a=>_0x17089a['coin']);_0xfed993[_0x4d514d(0x28a)]();let _0x3c5ebe=_0xfed993[_0x4d514d(0x1f1)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4d514d(0x19e),_0x4d514d(0x141));lastCoinsToBalance=_0x3c5ebe;}}function symbolToCoin(_0x854178){const _0x4567b8=_0xc95087;let _0x22ea55;if(_0x854178['includes']('/'+config[_0x4567b8(0x1d0)]))_0x22ea55=_0x854178[_0x4567b8(0x156)]('/'+config[_0x4567b8(0x1d0)],'');if(_0x854178[_0x4567b8(0x242)](config['basecoin']+'/'))_0x22ea55=_0x854178[_0x4567b8(0x156)](config[_0x4567b8(0x1d0)]+'/','');return _0x22ea55;}async function unlockOrders(){const _0xbc5996=_0xc95087;if(allOrdersPlaced&&lockOrders==ORDERS[_0xbc5996(0x189)]){logger[_0xbc5996(0x237)](_0xbc5996(0x1d6)),lockOrders=ORDERS[_0xbc5996(0x1f8)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x449f61=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x449f61,validateOrdersState=_0xbc5996(0x1a1),persistOpenOrders([]),lockOrders=ORDERS[_0xbc5996(0x18f)],logger[_0xbc5996(0x237)](_0xbc5996(0x1d1));}}async function validateOrders(_0x3ac211){const _0x5d013c=_0xc95087;if(_0x3ac211)validateOrdersState=_0x3ac211;logger[_0x5d013c(0x237)](_0x5d013c(0x170)+validateOrdersState+_0x5d013c(0x201)+(lockOrders==0x1?_0x5d013c(0x243):lockOrders==0x2?_0x5d013c(0x16e):_0x5d013c(0x167)));let _0x25057d=[],_0x490ca9=config[_0x5d013c(0x140)]==_0x5d013c(0x289)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5d013c(0x1d4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5d013c(0x189)])return;logger[_0x5d013c(0x237)](_0x5d013c(0x1e0)+validateOrdersState),lastOrders[_0x5d013c(0x20d)](_0x337f44=>{const _0x1ddcda=_0x5d013c;let _0xd73a35=![];_0x337f44['filled']>0x0&&(_0xd73a35=!![]),_0x25057d[_0x1ddcda(0x2a9)](_0xd73a35),_0xd73a35&&config['ordertype']!=_0x1ddcda(0x289)&&logHistory('order','Order\x20filled:\x20'+_0x337f44[_0x1ddcda(0x182)]+'\x20'+_0x337f44['side']+'\x20#'+formatResult(_0x337f44['filled'],0x8)+'\x20@'+formatResult(_0x337f44[_0x1ddcda(0x197)],0x8));}),_0x25057d[_0x5d013c(0x20d)]((_0x76b0d8,_0x1c42aa)=>{if(_0x76b0d8)lastOrders['splice'](_0x1c42aa,0x1);}),persistOpenOrders(lastOrders);const _0x1a109e=coolingDown?_0x5d013c(0x130):'balancing\x20resumed';if(validateOrdersState==_0x5d013c(0x1a1)){validateOrdersState=_0x5d013c(0x24d);if(_0x25057d['includes'](![])){if(config[_0x5d013c(0x140)]==_0x5d013c(0x289)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5d013c(0x24d)){if(_0x25057d[_0x5d013c(0x242)](![])){}else{if(allOrdersPlaced){if(config[_0x5d013c(0x140)]==_0x5d013c(0x289)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5d013c(0x14e))_0x25057d[_0x5d013c(0x242)](![])&&(config[_0x5d013c(0x140)]==_0x5d013c(0x289)?logHistory(_0x5d013c(0x1ab),_0x5d013c(0x1f7)+Math[_0x5d013c(0x191)](_0x490ca9*validateOrderInterval/0xea60)+_0x5d013c(0x196)+_0x1a109e):(await cancelOrders(),logHistory(_0x5d013c(0x1ab),_0x5d013c(0x1a8)+Math['round'](_0x490ca9*validateOrderInterval/0xea60)+_0x5d013c(0x196)+_0x1a109e))),await unlockOrders();else{if(validateOrdersState==_0x5d013c(0x245)){if(config[_0x5d013c(0x140)]!='market')logHistory(_0x5d013c(0x1ab),_0x5d013c(0x10c)+_0x1a109e);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2aa0df=>{const _0x543a0c=_0x5bad;try{const _0x7c1c27=await exchange[_0x543a0c(0x115)](_0x2aa0df[_0x543a0c(0x1de)],_0x2aa0df['symbol']);}catch(_0x221602){if(_0x221602[_0x543a0c(0x15d)]()[_0x543a0c(0x242)]('OrderNotFound')){}else await handleError(_0x221602,_0x543a0c(0x29b));}});}async function initCoinResults(_0x4822fe){const _0x1dbf40=_0xc95087;_0x4822fe?logger[_0x1dbf40(0x237)]('Resetting\x20coin\x20results:\x20'+_0x4822fe):logger[_0x1dbf40(0x237)](_0x1dbf40(0x23b)),config[_0x1dbf40(0x12b)][_0x1dbf40(0x20d)](_0x5be04e=>{const _0x28c55e=_0x1dbf40;if(!_0x5be04e[_0x28c55e(0x195)]&&_0x5be04e['coin']!=config[_0x28c55e(0x1d0)]){const _0x102921=currentCoins['find'](_0x3c4750=>_0x3c4750[_0x28c55e(0x223)]==_0x5be04e[_0x28c55e(0x223)]),_0x43d505=global[_0x28c55e(0x25a)][noslash(_0x5be04e[_0x28c55e(0x182)])];let _0x55eb23=_0x102921?_0x102921[_0x28c55e(0x1a5)]:null,_0x3c4826=_0x5be04e[_0x28c55e(0x10f)]?0x1/_0x43d505:_0x43d505,_0x55cc08;config['liquidity'][_0x28c55e(0x20d)](_0x679621=>{const _0x571049=_0x28c55e;!_0x55cc08&&(_0x55cc08=_0x679621['changes'][_0x571049(0x177)](_0x4af059=>_0x4af059[_0x571049(0x223)]==_0x5be04e[_0x571049(0x223)]),_0x55cc08&&(_0x55eb23=_0x55cc08[_0x571049(0x1a5)],_0x3c4826=_0x55cc08[_0x571049(0x197)]));});let _0x3489ae=dbCoinResults[_0x28c55e(0x122)](_0x28c55e(0x15a))[_0x28c55e(0x177)]({'coin':_0x5be04e[_0x28c55e(0x223)]})[_0x28c55e(0x17d)]();if(!_0x3489ae){const _0x3fca22={'coin':_0x5be04e[_0x28c55e(0x223)],'number':_0x55eb23,'breakeven':_0x3c4826,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x28c55e(0x15a))[_0x28c55e(0x2a9)](_0x3fca22)[_0x28c55e(0x172)]();}else{if(_0x4822fe&&_0x5be04e[_0x28c55e(0x223)]==_0x4822fe){const _0x534313={'coin':_0x5be04e[_0x28c55e(0x223)],'number':_0x55eb23,'breakeven':_0x3c4826,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x28c55e(0x122)](_0x28c55e(0x15a))[_0x28c55e(0x177)]({'coin':_0x5be04e['coin']})[_0x28c55e(0x28f)](_0x534313)['write']();}}}});}async function updateCoinResults(_0x1cdb47,_0x34f1d=![]){const _0x4419d4=_0xc95087;let _0x2ea16e,_0x41da84,_0x4127b8,_0x185c91,_0x110ed3,_0x296e6d,_0x239922=dbCoinResults[_0x4419d4(0x122)](_0x4419d4(0x15a))[_0x4419d4(0x177)]({'coin':_0x1cdb47[_0x4419d4(0x223)]})[_0x4419d4(0x17d)](),_0x576588=![];_0x239922&&Object['entries'](_0x239922)[_0x4419d4(0x20d)](([_0x131408,_0x59d684])=>{if(_0x59d684==null)_0x576588=!![];});(!_0x239922||_0x576588)&&(await initCoinResults(_0x1cdb47[_0x4419d4(0x223)]),_0x239922=dbCoinResults[_0x4419d4(0x122)](_0x4419d4(0x15a))[_0x4419d4(0x177)]({'coin':_0x1cdb47['coin']})[_0x4419d4(0x17d)]());_0x1cdb47['reverse']&&(_0x296e6d={'filled':_0x1cdb47[_0x4419d4(0x180)]*_0x1cdb47[_0x4419d4(0x197)],'amount':_0x1cdb47[_0x4419d4(0x180)]*_0x1cdb47[_0x4419d4(0x197)],'side':_0x1cdb47[_0x4419d4(0x2af)]==_0x4419d4(0x111)?_0x4419d4(0x29a):'sell','price':0x1/_0x1cdb47[_0x4419d4(0x197)]},_0x1cdb47={..._0x1cdb47,..._0x296e6d});_0x34f1d?_0x41da84=_0x1cdb47[_0x4419d4(0x2af)]=='buy'?_0x239922[_0x4419d4(0x1a5)]+_0x1cdb47[_0x4419d4(0x180)]:_0x239922['number']-_0x1cdb47[_0x4419d4(0x180)]:_0x41da84=await getCoinNumber(_0x1cdb47[_0x4419d4(0x223)]);if(_0x1cdb47[_0x4419d4(0x1c0)]&&_0x1cdb47['fee'][_0x4419d4(0x20f)]==config[_0x4419d4(0x1d0)])_0x2ea16e=_0x1cdb47[_0x4419d4(0x1c0)][_0x4419d4(0x1ed)];else{if(_0x1cdb47['fee']&&_0x1cdb47[_0x4419d4(0x1c0)][_0x4419d4(0x20f)]==_0x4419d4(0x14f)&&!_0x34f1d&&config[_0x4419d4(0x1d0)]!=_0x4419d4(0x1fc))_0x2ea16e=_0x1cdb47[_0x4419d4(0x1c0)][_0x4419d4(0x1ed)]*global['ticker'][_0x4419d4(0x14f)+config[_0x4419d4(0x1d0)]];else _0x2ea16e=defaultFee*_0x1cdb47[_0x4419d4(0x180)]*_0x1cdb47[_0x4419d4(0x197)];}_0x1cdb47[_0x4419d4(0x2af)]==_0x4419d4(0x29a)?(_0x4127b8=_0x41da84!=0x0?(_0x239922[_0x4419d4(0x224)]*_0x239922[_0x4419d4(0x1a5)]+_0x1cdb47[_0x4419d4(0x197)]*(_0x41da84-_0x239922['number'])+_0x2ea16e)/_0x41da84:0x0,_0x185c91=_0x239922[_0x4419d4(0x110)]):(_0x4127b8=_0x41da84!=0x0?(_0x239922[_0x4419d4(0x224)]*_0x239922[_0x4419d4(0x1a5)]-_0x1cdb47[_0x4419d4(0x197)]*(_0x239922['number']-_0x41da84)+_0x2ea16e)/_0x41da84:0x0,_0x185c91=_0x239922['realized']+(_0x1cdb47[_0x4419d4(0x197)]-_0x239922[_0x4419d4(0x224)])*_0x1cdb47[_0x4419d4(0x180)]);_0x110ed3=(_0x1cdb47['price']-_0x4127b8-_0x2ea16e/_0x1cdb47[_0x4419d4(0x180)])*_0x41da84;let _0x4b207e={'coin':_0x1cdb47[_0x4419d4(0x223)],'number':_0x41da84,'breakeven':formatResult(_0x4127b8,0x8),'realized':formatResult(_0x185c91,0x8),'unrealized':formatResult(_0x110ed3,0x8),'fees':formatResult(_0x239922[_0x4419d4(0x137)]+_0x2ea16e,0x8),'sells':_0x1cdb47['side']==_0x4419d4(0x111)?_0x239922[_0x4419d4(0x2ac)]+0x1:_0x239922['sells'],'buys':_0x1cdb47['side']=='buy'?_0x239922[_0x4419d4(0x1fb)]+0x1:_0x239922[_0x4419d4(0x1fb)]};dbCoinResults[_0x4419d4(0x122)](_0x4419d4(0x15a))['find']({'coin':_0x1cdb47[_0x4419d4(0x223)]})[_0x4419d4(0x28f)](_0x4b207e)[_0x4419d4(0x172)]();if(!_0x34f1d){if(_0x1cdb47[_0x4419d4(0x1c0)]&&_0x1cdb47['fee'][_0x4419d4(0x20f)]==_0x4419d4(0x14f)){const _0x86dd82=currentCoins[_0x4419d4(0x177)](_0x2995c0=>_0x2995c0[_0x4419d4(0x223)]=='BNB');if(_0x86dd82){let _0x4419e6=dbCoinResults['get'](_0x4419d4(0x15a))[_0x4419d4(0x177)]({'coin':_0x4419d4(0x14f)})[_0x4419d4(0x17d)]();_0x4b207e={..._0x4419e6,'number':_0x86dd82[_0x4419d4(0x1a5)]},dbCoinResults[_0x4419d4(0x122)](_0x4419d4(0x15a))['find']({'coin':_0x4419d4(0x14f)})['assign'](_0x4b207e)[_0x4419d4(0x172)]();}}}}async function placeOrder(_0x4f1531){const _0x4133dc=_0xc95087,_0x5bf406=config[_0x4133dc(0x140)]==_0x4133dc(0x289)?'market':_0x4133dc(0x274);if(lockOrders==ORDERS[_0x4133dc(0x18f)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4133dc(0x189)],allOrdersPlaced=![],validateOrdersState=_0x4133dc(0x1a1);let _0x567e87=![];lastOrders=[];for(const _0xb67596 of _0x4f1531){let _0x5534c7,_0x261201,_0x18245b,_0x5303ea,_0x466301,_0x8f52a8=_0xb67596['symbol'];try{const _0x3f003e=await exchange[_0x4133dc(0x241)](_0x8f52a8);_0x5534c7=_0xb67596[_0x4133dc(0x10f)]?0x1/_0xb67596[_0x4133dc(0x144)]:_0xb67596[_0x4133dc(0x144)],_0x261201=_0x3f003e[_0x4133dc(0x148)],_0x18245b=_0x3f003e['ask'];_0xb67596[_0x4133dc(0x10f)]?(_0x5303ea=_0xb67596['side']==_0x4133dc(0x29a)?'sell':_0x4133dc(0x29a),_0x466301=Math[_0x4133dc(0x1d8)](_0xb67596[_0x4133dc(0x15c)])/_0x5534c7):(_0x5303ea=_0xb67596['side'],_0x466301=Math['abs'](_0xb67596[_0x4133dc(0x15c)]));_0x5bf406==_0x4133dc(0x274)&&(config[_0x4133dc(0x140)]==_0x4133dc(0x285)&&(_0x5534c7=_0x5303ea==_0x4133dc(0x29a)?_0x261201:_0x18245b),config[_0x4133dc(0x140)]==_0x4133dc(0x28c)&&(_0x5534c7=_0x5303ea==_0x4133dc(0x29a)?_0x18245b:_0x261201));_0x466301=formatResult(_0x466301,0x8),_0x5534c7=formatResult(_0x5534c7,0x8);const _0x49931e=_0x5303ea==_0x4133dc(0x111)?config['emojisell']?String[_0x4133dc(0x246)]('0x'+config[_0x4133dc(0x280)])+'\x20':'':config[_0x4133dc(0x249)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x8827ad=_0x5bf406=='market'?_0x4133dc(0x1b6):config[_0x4133dc(0x140)]==_0x4133dc(0x285)?_0x4133dc(0x123):_0x4133dc(0x147),_0x3ce328=(Math[_0x4133dc(0x1b1)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x4133dc(0x2a9)]({'customId':_0x3ce328,'symbol':_0x8f52a8,'coin':_0xb67596[_0x4133dc(0x223)],'amount':_0x466301,'price':_0x5534c7,'side':_0x5303ea,'reverse':_0xb67596['reverse'],'filled':0x0});if(_0x5bf406==_0x4133dc(0x289))logHistory(_0x4133dc(0x22c),''+_0x49931e+_0x8827ad+_0x4133dc(0x153)+_0x8f52a8+'\x20'+_0x5303ea+'\x20#'+formatResult(_0x466301,0x8)+'\x20@'+formatResult(_0x5534c7,0x8));else logHistory(_0x4133dc(0x22c),''+_0x49931e+_0x8827ad+'\x20order:\x20'+_0x8f52a8+'\x20'+_0x5303ea+'\x20#'+formatResult(_0x466301,0x8)+'\x20@'+formatResult(_0x5534c7,0x8));let _0x385dc9;_0x5bf406=='market'?_0x5303ea==_0x4133dc(0x29a)&&[_0x4133dc(0x25c),'Bitget',_0x4133dc(0x163),'Huobi',_0x4133dc(0x190)][_0x4133dc(0x242)](config[_0x4133dc(0x113)])?_0x385dc9=await exchange[_0x4133dc(0x22a)](_0x8f52a8,_0x5bf406,_0x5303ea,_0x466301,_0x5534c7):_0x385dc9=await exchange[_0x4133dc(0x22a)](_0x8f52a8,_0x5bf406,_0x5303ea,_0x466301,undefined):_0x385dc9=await exchange[_0x4133dc(0x22a)](_0x8f52a8,_0x5bf406,_0x5303ea,_0x466301,_0x5534c7);logger[_0x4133dc(0x237)](_0x4133dc(0x24a)+_0x385dc9['id']+_0x4133dc(0x212)+_0x3ce328);const _0x3ef15c=lastOrders[_0x4133dc(0x21c)]-0x1;if(_0x3ef15c>=0x0&&lastOrders[_0x3ef15c][_0x4133dc(0x181)]==_0x3ce328){lastOrders[_0x3ef15c][_0x4133dc(0x1de)]=_0x385dc9['id'];if(_0x385dc9['amount'])lastOrders[_0x3ef15c][_0x4133dc(0x164)]=_0x385dc9[_0x4133dc(0x164)];if(_0x385dc9[_0x4133dc(0x197)])lastOrders[_0x3ef15c][_0x4133dc(0x197)]=_0x385dc9[_0x4133dc(0x197)];lastOrders[_0x3ef15c][_0x4133dc(0x1c0)]=_0x385dc9[_0x4133dc(0x1c0)];}if(config[_0x4133dc(0x10a)]!=0x0){let _0x18fc17=null;if(cooldownTracker[_0x4133dc(0x21c)]==config[_0x4133dc(0x10a)]-0x1)_0x18fc17=cooldownTracker[_0x4133dc(0x228)]();const _0x20d467=getTimeStamp();cooldownTracker['push'](_0x20d467);if(_0x18fc17){const _0x115636=fns[_0x4133dc(0x2b3)](new Date(_0x20d467),new Date(_0x18fc17));if(_0x115636<cooldownInterval){logHistory('error','Executed\x20'+config[_0x4133dc(0x10a)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x4133dc(0x10b)+cooldownPeriod/(0xe10*0x3e8)+_0x4133dc(0x1b2)),coolingDown=!![];break;}}}}catch(_0x5c4419){if(_0x5c4419[_0x4133dc(0x15d)]()[_0x4133dc(0x242)](_0x4133dc(0x2b2)))lastOrders=lastOrders[_0x4133dc(0x238)](_0x38e8cc=>_0x38e8cc['symbol']!=_0x8f52a8),logHistory(_0x4133dc(0x1d5),_0x4133dc(0x174)+_0x8f52a8),_0x567e87=!![];else{if(_0x5c4419[_0x4133dc(0x15d)]()[_0x4133dc(0x242)](_0x4133dc(0x21b)))lastOrders=lastOrders['filter'](_0x590eb7=>_0x590eb7[_0x4133dc(0x182)]!=_0x8f52a8),logHistory(_0x4133dc(0x1d5),_0x4133dc(0x29e)+_0x8f52a8),_0x567e87=!![];else{if(_0x5c4419[_0x4133dc(0x15d)]()[_0x4133dc(0x242)](_0x4133dc(0x227)))lastOrders=lastOrders[_0x4133dc(0x238)](_0x514875=>_0x514875[_0x4133dc(0x182)]!=_0x8f52a8),logHistory(_0x4133dc(0x1d5),_0x4133dc(0x209)+_0x8f52a8),logger[_0x4133dc(0x237)](_0x5c4419),_0x567e87=!![];else _0x5c4419[_0x4133dc(0x15d)]()[_0x4133dc(0x242)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4133dc(0x238)](_0x5b0966=>_0x5b0966[_0x4133dc(0x182)]!=_0x8f52a8),logHistory(_0x4133dc(0x1d5),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x8f52a8),_0x567e87=!![]):(lastOrders=lastOrders[_0x4133dc(0x238)](_0x4c3851=>_0x4c3851[_0x4133dc(0x182)]!=_0x8f52a8),await handleError(_0x5c4419,_0x4133dc(0x155),_0x8f52a8));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4133dc(0x21c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xb789ac=config[_0x4133dc(0x140)]==_0x4133dc(0x289)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3235cf=_0x4133dc;validateOrders(_0x3235cf(0x14e));},_0xb789ac);}else unlockOrders();_0x567e87&&config[_0x4133dc(0x284)]&&(logHistory(_0x4133dc(0x1d5),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x4133dc(0x1a0)));}else{if(coolingDown)!config['headless']&&logHistory(_0x4133dc(0x1d5),_0x4133dc(0x1ce));else lockOrders!=ORDERS[_0x4133dc(0x18f)]&&(!config[_0x4133dc(0x284)]&&(config[_0x4133dc(0x140)]=='market'?logHistory(_0x4133dc(0x1d5),_0x4133dc(0x268)):logHistory(_0x4133dc(0x1d5),_0x4133dc(0x253))));}}function persistOpenOrders(_0x520c61){const _0x112826=_0xc95087,_0x3f3663={...config,'openOrders':_0x520c61};let _0x451632=dbConfig[_0x112826(0x122)](_0x112826(0x291))[_0x112826(0x177)]({'botID':botID})[_0x112826(0x17d)]();_0x451632&&dbConfig[_0x112826(0x122)](_0x112826(0x291))[_0x112826(0x177)]({'botID':botID})[_0x112826(0x28f)](_0x3f3663)['write']();}function restoreOrders(){const _0x6ccaee=_0xc95087;let _0x166733;config[_0x6ccaee(0x288)]&&allOpenOrders[_0x6ccaee(0x20d)](_0x35093d=>{const _0x4c7d44=_0x6ccaee,_0xcd12b3=config['openOrders'][_0x4c7d44(0x177)](_0x168ded=>_0x168ded['orderId']==_0x35093d['id']);_0xcd12b3&&(lastOrders['push'](_0xcd12b3),_0x166733=_0x35093d[_0x4c7d44(0x27e)]);});if(lastOrders[_0x6ccaee(0x21c)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x4c4ba3=new Date()[_0x6ccaee(0x1fd)](),_0x46c4ab=config[_0x6ccaee(0x140)]==_0x6ccaee(0x289)?validateOrderTimeout*0x3c*0x3e8:config[_0x6ccaee(0x1d4)]*0x3c*0x3e8;if(_0x166733+_0x46c4ab>_0x4c4ba3){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x32c126=_0x6ccaee;validateOrders(_0x32c126(0x14e));},_0x166733+_0x46c4ab-_0x4c4ba3);}else validateOrders(_0x6ccaee(0x14e));}}async function sendMetricsTelegram(){const _0x45789d=_0xc95087;if(!coinsLoaded){process[_0x45789d(0x1f4)]({'telegrammsg':_0x45789d(0x1b4)},_0x16d61b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x57c8df='';if(config[_0x45789d(0x27a)])_0x57c8df=_0x45789d(0x23f)+config[_0x45789d(0x132)]+_0x45789d(0x1a6);else _0x57c8df=_0x45789d(0x13e)+botID+_0x45789d(0x1a6);const _0x709978=getKPIs(_0x45789d(0x1d0)),_0x3288b6=getKPIs(_0x45789d(0x296),config[_0x45789d(0x296)]),_0x3d430a=getKPIs('net-basecoin'),_0x315f3e=getKPIs('net-fiat',config[_0x45789d(0x296)]);_0x57c8df+='<pre>',_0x57c8df+=_0x709978[_0x45789d(0x213)]+_0x45789d(0x240)+_0x709978[_0x45789d(0x17d)]+'\x0a',_0x57c8df+=_0x709978[_0x45789d(0x294)]+':\x20'+_0x709978[_0x45789d(0x16a)]+'%\x0a',_0x57c8df+=_0x3288b6['leftTxt']+_0x45789d(0x240)+_0x3288b6[_0x45789d(0x17d)]+'\x0a',_0x57c8df+=_0x3288b6[_0x45789d(0x294)]+':\x20'+_0x3288b6[_0x45789d(0x16a)]+'%\x0a',_0x57c8df+=_0x3d430a[_0x45789d(0x213)]+':\x20'+_0x3d430a[_0x45789d(0x17d)]+'\x20('+config[_0x45789d(0x1d0)]+')\x0a',_0x57c8df+=_0x3d430a[_0x45789d(0x294)]+':\x20'+_0x3d430a[_0x45789d(0x16a)]+_0x45789d(0x270)+config[_0x45789d(0x1d0)]+')\x0a',_0x57c8df+=_0x315f3e['leftTxt']+':\x20'+_0x315f3e[_0x45789d(0x17d)]+'\x20('+config[_0x45789d(0x296)]+')\x0a',_0x57c8df+=_0x315f3e[_0x45789d(0x294)]+':\x20'+_0x315f3e[_0x45789d(0x16a)]+_0x45789d(0x270)+config[_0x45789d(0x296)]+')\x0a',_0x57c8df+='</pre>',process[_0x45789d(0x1f4)]({'telegrammsg':_0x57c8df},_0x5b9a9d=>{});}async function sendPortfolioTelegram(){const _0x38fcb9=_0xc95087;if(!coinsLoaded){process[_0x38fcb9(0x1f4)]({'telegrammsg':_0x38fcb9(0x1b4)},_0x4e6977=>{});return;}let _0xe0fb9e='';if(config['showname'])_0xe0fb9e=_0x38fcb9(0x23f)+config[_0x38fcb9(0x132)]+_0x38fcb9(0x2a2);else _0xe0fb9e=_0x38fcb9(0x13e)+botID+_0x38fcb9(0x2a2);_0xe0fb9e+=_0x38fcb9(0x2a6),_0xe0fb9e+=_0x38fcb9(0x258),_0xe0fb9e+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0xe0fb9e+=_0x38fcb9(0x258),currentCoins['forEach'](_0x4c234d=>{const _0x39ed57=_0x38fcb9;_0xe0fb9e+=_0x4c234d[_0x39ed57(0x223)][_0x39ed57(0x17a)](0x7)+'|\x20'+formatPad(_0x4c234d['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x4c234d['target'],0x2,0x6)+'|\x20'+formatPad(_0x4c234d[_0x39ed57(0x2b1)]*0x64,0x2,0x6)+'\x0a';}),_0xe0fb9e+='</pre>',process['send']({'telegrammsg':_0xe0fb9e},_0x4a6aff=>{});}function formatPad(_0x387fdf,_0x1021b0,_0x2c7069){const _0x40a6a2=_0xc95087,_0x1449ac=formatResultString(_0x387fdf,_0x1021b0);return _0x1449ac?_0x1449ac[_0x40a6a2(0x210)](_0x2c7069):''['padStart'](_0x2c7069);}function logHistory(_0x2d9a58,_0x4153b6,_0x718042=''){const _0x55533f=_0xc95087;logger['full'](''+_0x4153b6);let _0x5e86ae={'time':getTimeStamp(),'type':_0x2d9a58,'event':_0x4153b6};dbLogs[_0x55533f(0x122)](_0x55533f(0x282))[_0x55533f(0x2a9)](_0x5e86ae)[_0x55533f(0x172)]();if(_0x718042=='')_0x718042=_0x4153b6;proxyEmit(_0x55533f(0x24b),{'log':_0x5e86ae,'summary':_0x718042}),process[_0x55533f(0x1f4)]({'telegram':{..._0x5e86ae,'botname':config[_0x55533f(0x132)],'showname':config[_0x55533f(0x27a)]}},_0x494315=>{});}function emitHistory(_0x2dfae0={}){const _0x3e56e0=_0xc95087;Object['keys'](_0x2dfae0)[_0x3e56e0(0x21c)]==0x0&&(_0x2dfae0={'type':[_0x3e56e0(0x22c),_0x3e56e0(0x24b)],'event':'','page':0x1});if(_0x2dfae0[_0x3e56e0(0x1df)][_0x3e56e0(0x242)](_0x3e56e0(0x24b)))_0x2dfae0[_0x3e56e0(0x1df)][_0x3e56e0(0x1e1)](_0x2dfae0[_0x3e56e0(0x1df)][_0x3e56e0(0x204)](_0x3e56e0(0x24b)),0x1,_0x3e56e0(0x1d5),_0x3e56e0(0x19e),_0x3e56e0(0x1ab));if(dbLogs[_0x3e56e0(0x1f9)](_0x3e56e0(0x282))[_0x3e56e0(0x17d)]()){let _0x58fd8a=dbLogs[_0x3e56e0(0x122)]('logs')[_0x3e56e0(0x238)](_0x5e9d59=>{const _0x327193=_0x3e56e0;if(_0x2dfae0['type'][_0x327193(0x21c)]==0x0)return![];else return _0x2dfae0[_0x327193(0x1df)][_0x327193(0x242)](_0x5e9d59[_0x327193(0x1df)]);})[_0x3e56e0(0x238)](_0x450b01=>{const _0x3c8fab=_0x3e56e0;if(_0x2dfae0[_0x3c8fab(0x24b)]=='')return!![];else return _0x450b01[_0x3c8fab(0x24b)][_0x3c8fab(0x1bf)]()[_0x3c8fab(0x242)](_0x2dfae0[_0x3c8fab(0x24b)]['toLowerCase']());})['sortBy'](_0x3e56e0(0x169)),_0x3ca5e9=_0x58fd8a['value']()[_0x3e56e0(0x21c)];_0x58fd8a=_0x58fd8a['reverse']()[_0x3e56e0(0x13b)]((_0x2dfae0[_0x3e56e0(0x230)]-0x1)*logPageSize,_0x2dfae0['page']*logPageSize-0x1)['reverse']()[_0x3e56e0(0x17d)](),proxyEmit(_0x3e56e0(0x162),{'logs':_0x58fd8a,'total':_0x3ca5e9});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x398332){const _0x5dcd6a=_0xc95087;if(dbLogs[_0x5dcd6a(0x1f9)]('logs')[_0x5dcd6a(0x17d)]()){const _0x7a8c60=dbLogs[_0x5dcd6a(0x122)](_0x5dcd6a(0x282))[_0x5dcd6a(0x1eb)]('time')[_0x5dcd6a(0x238)](_0xf0fa6e=>{return _0xf0fa6e['type']=='order';})['value']();dbLogs['get'](_0x5dcd6a(0x282))[_0x5dcd6a(0x193)]()[_0x5dcd6a(0x172)](),dbLogs[_0x5dcd6a(0x122)]('logs')['assign'](_0x7a8c60)[_0x5dcd6a(0x172)](),emitHistory(_0x398332);}}async function pauseBot(_0x1ef438=pauseBotInterval){const _0x56be9d=_0xc95087,_0x43b868=new Date()[_0x56be9d(0x1fd)]();if(!lastErrorShown||_0x43b868-lastErrorShown>=_0x1ef438){lastErrorShown=_0x43b868;!lastBotPause?(lastBotPause=_0x43b868,consecutivePauses=0x1):(_0x43b868-lastBotPause-_0x1ef438<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x56be9d(0x2a4)},_0x294f01=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x56be9d(0x1fd)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x1ef438),botPaused=![],reset(!![]);}}}async function killBot(){const _0x568c40=_0xc95087;botPaused=!![],await sleep(0x3e8),process[_0x568c40(0x1f4)]({'stop':_0x568c40(0x1b0)},_0x3a6814=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5bd0da,_0xd7d7c4){const _0x29b122=_0xc95087;if(botPaused)return;const _0x2430f9=config['exchange']||_0x29b122(0x178);if(_0xd7d7c4)logger[_0x29b122(0x237)](_0x29b122(0x273)+_0xd7d7c4);const _0x10f28a=()=>{const _0x303b18=_0x29b122;loading[_0x303b18(0x1d5)]=!![],emitLoadingProgress();};if(_0x5bd0da[_0x29b122(0x15d)]()[_0x29b122(0x242)](_0x29b122(0x2ae)))logHistory(_0x29b122(0x1d5),_0x2430f9+_0x29b122(0x279)),_0x10f28a();else{if(_0x5bd0da['toString']()[_0x29b122(0x242)](_0x29b122(0x22e)))logHistory(_0x29b122(0x1d5),_0x2430f9+_0x29b122(0x13c)),_0x10f28a();else _0x5bd0da[_0x29b122(0x15d)]()['includes'](_0x29b122(0x120))?(logHistory('error',_0x2430f9+_0x29b122(0x248)),logHistory(_0x29b122(0x1d5),_0x29b122(0x29c)),_0x10f28a()):await handleError(_0x5bd0da,null);}}async function handleError(_0x4740c6,_0x22f4f4,_0x3bb1e6=''){const _0x1cba27=_0xc95087;if(botPaused)return;const _0x45479b=config[_0x1cba27(0x113)]||_0x1cba27(0x178);if(_0x22f4f4)logger[_0x1cba27(0x237)](_0x1cba27(0x273)+_0x22f4f4);if(_0x4740c6['toString']()[_0x1cba27(0x242)](_0x1cba27(0x143)))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x1fe)+pauseBotMsg),logger['debug'](_0x1cba27(0x263),_0x4740c6),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)](_0x1cba27(0x11e)))logHistory('error',_0x45479b+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x1cba27(0x237)](_0x1cba27(0x263),_0x4740c6),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)](_0x1cba27(0x154))||_0x4740c6['toString']()[_0x1cba27(0x242)](_0x1cba27(0x1ee)))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x1c5)+pauseBotMsg),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()['includes']('RequestTimeout'))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x12c)+pauseBotMsg),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x29d)+pauseBotMsg),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x1bf)]()['includes']('timestamp')||_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x1bf)]()[_0x1cba27(0x242)]('request-time')){const _0x4f6a97=_0x4740c6[_0x1cba27(0x15d)]()['toLowerCase']();let _0xd2ef77=![];if((config[_0x1cba27(0x113)]=='Binance'||config[_0x1cba27(0x113)]==_0x1cba27(0x1e4))&&(_0x4f6a97['includes'](_0x1cba27(0x1be)['toLowerCase']())||_0x4f6a97[_0x1cba27(0x242)](_0x1cba27(0x275)[_0x1cba27(0x1bf)]())))_0xd2ef77=!![];if(config[_0x1cba27(0x113)]=='Kucoin'&&_0x4f6a97[_0x1cba27(0x242)](_0x1cba27(0x1db)[_0x1cba27(0x1bf)]()))_0xd2ef77=!![];if(config[_0x1cba27(0x113)]==_0x1cba27(0x25c)&&_0x4f6a97[_0x1cba27(0x242)](_0x1cba27(0x200)[_0x1cba27(0x1bf)]()))_0xd2ef77=!![];if(config[_0x1cba27(0x113)]==_0x1cba27(0x171)&&_0x4f6a97[_0x1cba27(0x242)]('Invalid\x20ACCESS_TIMESTAMP'['toLowerCase']()))_0xd2ef77=!![];if((config['exchange']=='Mexc'||config['exchange']=='Mexc3')&&_0x4f6a97[_0x1cba27(0x242)](_0x1cba27(0x265)['toLowerCase']()))_0xd2ef77=!![];_0xd2ef77?logHistory('error',_0x1cba27(0x27c)+pauseBotMsg):logHistory('error',_0x1cba27(0x14d)+pauseBotMsg),logger[_0x1cba27(0x237)](_0x1cba27(0x263),_0x4740c6[_0x1cba27(0x15d)]()),await pauseBot();}else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)](_0x1cba27(0x21d)))logHistory('error',_0x45479b+_0x1cba27(0x25f)+pauseBotMsg),logger[_0x1cba27(0x237)]('Error\x20details:',_0x4740c6),await pauseBot();else{if(_0x4740c6 instanceof ccxt[_0x1cba27(0x2b0)])logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x20b)+pauseBotMsg),logger[_0x1cba27(0x237)](_0x1cba27(0x263),_0x4740c6),await pauseBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()['includes'](_0x1cba27(0x2ae)))logHistory('error',_0x45479b+_0x1cba27(0x19f)),logHistory('error',_0x1cba27(0x1d3)),await killBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()['includes'](_0x1cba27(0x22e)))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x1ec)),logHistory(_0x1cba27(0x1d5),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)]('AuthenticationError'))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x15b)),logHistory(_0x1cba27(0x1d5),_0x1cba27(0x1d3)),await killBot();else{if(_0x4740c6['toString']()[_0x1cba27(0x242)](_0x1cba27(0x142)))logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x208)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4740c6[_0x1cba27(0x15d)]()[_0x1cba27(0x242)](_0x1cba27(0x16b)))logHistory(_0x1cba27(0x1d5),_0x1cba27(0x17c)+_0x3bb1e6);else _0x4740c6 instanceof ccxt[_0x1cba27(0x235)]?(logHistory(_0x1cba27(0x1d5),_0x45479b+_0x1cba27(0x287)),logger[_0x1cba27(0x237)](_0x1cba27(0x263),_0x4740c6)):(logHistory(_0x1cba27(0x1d5),_0x1cba27(0x277)+pauseBotMsg),logger[_0x1cba27(0x237)](_0x1cba27(0x263),_0x4740c6),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x13874b,_0x2228e4){const _0x301807=_0xc95087;return parseFloat(_0x13874b[_0x301807(0x11d)](_0x2228e4));}function formatResultTruncate(_0x24a825,_0x1e85b5){const _0x46a19b=_0xc95087;let _0x4a19fc=formatResultString(_0x24a825,0xa),_0x38e897=_0x4a19fc[_0x46a19b(0x204)]('.');return _0x38e897!=-0x1&&(_0x4a19fc=_0x4a19fc[_0x46a19b(0x13b)](0x0,_0x38e897+_0x1e85b5+0x1)),Number(_0x4a19fc);}function formatResultString(_0x4cb912,_0x173b35){const _0x5a442f=_0xc95087;let _0x540f49;if(!(''+_0x4cb912)['includes']('e'))_0x540f49=+(Math['round'](_0x4cb912+'e+'+_0x173b35)+'e-'+_0x173b35);else{let _0x1b8d54=(''+_0x4cb912)[_0x5a442f(0x24c)]('e'),_0x47217b='';+_0x1b8d54[0x1]+_0x173b35>0x0&&(_0x47217b='+'),_0x540f49=+(Math[_0x5a442f(0x191)](+_0x1b8d54[0x0]+'e'+_0x47217b+(+_0x1b8d54[0x1]+_0x173b35))+'e-'+_0x173b35);}return Number(_0x540f49)[_0x5a442f(0x11d)](_0x173b35);}function getServerTime(){const _0x5819d4=_0xc95087,_0x205926=new Date();return _0x205926['getFullYear']()+'/'+(_0x205926[_0x5819d4(0x1ad)]()+0x1)['toString']()[_0x5819d4(0x210)](0x2,'0')+'/'+_0x205926[_0x5819d4(0x216)]()[_0x5819d4(0x15d)]()[_0x5819d4(0x210)](0x2,'0')+'\x20'+_0x205926[_0x5819d4(0x283)]()[_0x5819d4(0x15d)]()[_0x5819d4(0x210)](0x2,'0')+':'+_0x205926[_0x5819d4(0x1e2)]()[_0x5819d4(0x15d)]()['padStart'](0x2,'0')+':'+_0x205926[_0x5819d4(0x1bb)]()['toString']()[_0x5819d4(0x210)](0x2,'0');}function getTimeStamp(){const _0x48cc0c=_0xc95087,_0x411f79=shiftedTime();return _0x411f79[_0x48cc0c(0x168)]()+'/'+(_0x411f79[_0x48cc0c(0x1ad)]()+0x1)[_0x48cc0c(0x15d)]()[_0x48cc0c(0x210)](0x2,'0')+'/'+_0x411f79[_0x48cc0c(0x216)]()['toString']()[_0x48cc0c(0x210)](0x2,'0')+'\x20'+_0x411f79[_0x48cc0c(0x283)]()[_0x48cc0c(0x15d)]()[_0x48cc0c(0x210)](0x2,'0')+':'+_0x411f79['getMinutes']()[_0x48cc0c(0x15d)]()[_0x48cc0c(0x210)](0x2,'0')+':'+_0x411f79['getSeconds']()[_0x48cc0c(0x15d)]()['padStart'](0x2,'0');}function getDate(){const _0x41b133=_0xc95087,_0x5ce478=shiftedTime();return _0x5ce478[_0x41b133(0x168)]()+'/'+(_0x5ce478[_0x41b133(0x1ad)]()+0x1)[_0x41b133(0x15d)]()['padStart'](0x2,'0')+'/'+_0x5ce478[_0x41b133(0x216)]()['toString']()[_0x41b133(0x210)](0x2,'0');}function getHour(){const _0x3712ce=_0xc95087,_0x3dead2=shiftedTime();return _0x3dead2[_0x3712ce(0x283)]()[_0x3712ce(0x15d)]()[_0x3712ce(0x210)](0x2,'0');}function sleep(_0x35fab7){return new Promise(_0x5bf08d=>setTimeout(_0x5bf08d,_0x35fab7));}function shiftedTime(){const _0x537d37=_0xc95087,_0x4b626a=new Date();let _0x4446f2=_0x4b626a;if(config&&config['timeshift']!==0x0)_0x4446f2=fns[_0x537d37(0x1f2)](_0x4b626a,{'hours':config[_0x537d37(0x254)]});return _0x4446f2;}function timer(_0x48d75d){const _0x1bd42f=_0xc95087,_0x5b158e=new Date();!lasttime?console[_0x1bd42f(0x1a4)](getTimeStamp()+_0x1bd42f(0x293),_0x48d75d,_0x5b158e):console[_0x1bd42f(0x1a4)](getTimeStamp()+_0x1bd42f(0x293),_0x48d75d,(_0x5b158e-lasttime)/0x3e8),lasttime=_0x5b158e;}