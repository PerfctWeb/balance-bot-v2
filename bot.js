const _0x3d0aaf=_0x2a29;(function(_0x4f3925,_0x3605c2){const _0x4776e2=_0x2a29,_0x4d6830=_0x4f3925();while(!![]){try{const _0xa5da11=parseInt(_0x4776e2(0x30f))/0x1*(parseInt(_0x4776e2(0x235))/0x2)+parseInt(_0x4776e2(0x1ea))/0x3+-parseInt(_0x4776e2(0x2eb))/0x4*(parseInt(_0x4776e2(0x20b))/0x5)+-parseInt(_0x4776e2(0x20c))/0x6+-parseInt(_0x4776e2(0x313))/0x7*(-parseInt(_0x4776e2(0x202))/0x8)+-parseInt(_0x4776e2(0x2bd))/0x9+-parseInt(_0x4776e2(0x1ee))/0xa;if(_0xa5da11===_0x3605c2)break;else _0x4d6830['push'](_0x4d6830['shift']());}catch(_0x556373){_0x4d6830['push'](_0x4d6830['shift']());}}}(_0x21d4,0x34725));const _0x4ef7c1=function(){let _0x16e57e=!![];return function(_0x243864,_0x3a76fc){const _0x3f6ccd=_0x16e57e?function(){const _0x11d851=_0x2a29;if(_0x3a76fc){const _0x2eed8d=_0x3a76fc[_0x11d851(0x22f)](_0x243864,arguments);return _0x3a76fc=null,_0x2eed8d;}}:function(){};return _0x16e57e=![],_0x3f6ccd;};}(),_0x21a147=_0x4ef7c1(this,function(){const _0x6d5c30=_0x2a29;return _0x21a147[_0x6d5c30(0x26f)]()[_0x6d5c30(0x26e)](_0x6d5c30(0x2dd))['toString']()[_0x6d5c30(0x2f6)](_0x21a147)[_0x6d5c30(0x26e)](_0x6d5c30(0x2dd));});_0x21a147();'use strict';const ccxt=require(_0x3d0aaf(0x29e))['pro'],low=require(_0x3d0aaf(0x29b)),FileSync=require(_0x3d0aaf(0x24b)),fs=require('fs'),fns=require(_0x3d0aaf(0x209)),Crypt=require(_0x3d0aaf(0x264))[_0x3d0aaf(0x1e9)],util=require(_0x3d0aaf(0x28b));let exchange;global[_0x3d0aaf(0x215)]={},global['change']={};const exceptions=[_0x3d0aaf(0x1f0),_0x3d0aaf(0x1dc),_0x3d0aaf(0x212),_0x3d0aaf(0x30a),_0x3d0aaf(0x1eb),'YOYOW/'];let debugLoggingScreen=!![],config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3d0aaf(0x1ef)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x3d0aaf(0x25c))['version'],botID=process[_0x3d0aaf(0x205)][0x2]||_0x3d0aaf(0x219),pattern=/^[0-9]{3}$/;!pattern[_0x3d0aaf(0x2c5)](botID)&&(console['log'](_0x3d0aaf(0x2ab)+botID+_0x3d0aaf(0x29c)),killBot());const userID=process[_0x3d0aaf(0x205)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3d0aaf(0x2b8),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x3d0aaf(0x2a1)](logspath+_0x3d0aaf(0x25d),{'flags':'a'});!fs[_0x3d0aaf(0x324)](configpath)&&fs[_0x3d0aaf(0x30c)](configpath);!fs['existsSync'](logspath)&&fs[_0x3d0aaf(0x30c)](logspath);const configfile=configpath+'bot-'+botID+_0x3d0aaf(0x281),logfile=configpath+_0x3d0aaf(0x320)+botID+_0x3d0aaf(0x30e),performancefile=configpath+_0x3d0aaf(0x320)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x3d0aaf(0x241),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x3d0aaf(0x2e7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3d0aaf(0x296)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3d0aaf(0x296)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3d0aaf(0x296)]({'coins':[]})[_0x3d0aaf(0x2e7)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3676c2=>{console['log'](_0x3676c2);},'simple':_0x17c255=>{const _0x19e576=_0x3d0aaf;console[_0x19e576(0x20d)](_0x17c255),loggerfile[_0x19e576(0x2e7)](util[_0x19e576(0x2e0)](_0x17c255)+'\x0a');},'full':async(_0x356a64,_0x16c6f0='')=>{const _0x4a5044=_0x3d0aaf;let _0x3d0c14;if(config[_0x4a5044(0x23e)])_0x3d0c14=getTimeStamp()+':\x20'+config[_0x4a5044(0x1e3)]+_0x4a5044(0x20a)+_0x356a64;else _0x3d0c14=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x356a64;console[_0x4a5044(0x20d)](_0x3d0c14),loggerfile[_0x4a5044(0x2e7)](util[_0x4a5044(0x2e0)](_0x3d0c14)+'\x0a'),_0x16c6f0&&(console[_0x4a5044(0x20d)](_0x16c6f0),loggerfile[_0x4a5044(0x2e7)](util[_0x4a5044(0x2e0)](_0x16c6f0)+'\x0a'));},'debug':async(_0x2e1aee,_0x494eb7='')=>{const _0x4526d5=_0x3d0aaf;let _0x48a8ce;if(config[_0x4526d5(0x23e)])_0x48a8ce=getTimeStamp()+':\x20'+config[_0x4526d5(0x1e3)]+_0x4526d5(0x309)+_0x2e1aee;else _0x48a8ce=getTimeStamp()+':\x20Bot\x20'+botID+_0x4526d5(0x309)+_0x2e1aee;if(debugLoggingScreen)console[_0x4526d5(0x20d)](_0x48a8ce);loggerfile[_0x4526d5(0x2e7)](util[_0x4526d5(0x2e0)](_0x48a8ce)+'\x0a');if(_0x494eb7){if(debugLoggingScreen)console[_0x4526d5(0x20d)](_0x494eb7);loggerfile[_0x4526d5(0x2e7)](util['format'](_0x494eb7)+'\x0a');}}};process['on']('uncaughtException',function(_0x154890){logger['simple'](_0x154890);});settings['timeshift']!=config[_0x3d0aaf(0x295)]&&updateTimeshift(settings[_0x3d0aaf(0x295)]);process[_0x3d0aaf(0x24c)]({'started':_0x3d0aaf(0x268)},_0x1d58f0=>{}),initializeProcessListeners();function proxyEmit(_0x514a91,_0x5dc186=null){process['send']({'function':_0x514a91,'args':_0x5dc186},_0x49dc8f=>{});}function initializeProcessListeners(){const _0x472fe7=_0x3d0aaf;process['on'](_0x472fe7(0x2fa),_0x53b1c6=>{const _0x4b6f3c=_0x472fe7;switch(Object[_0x4b6f3c(0x256)](_0x53b1c6)[0x0]){case _0x4b6f3c(0x295):_0x53b1c6[_0x4b6f3c(0x295)]!=undefined&&(settings['timeshift']=_0x53b1c6['timeshift'],updateTimeshift(settings[_0x4b6f3c(0x295)]));break;case _0x4b6f3c(0x20f):switch(_0x53b1c6[_0x4b6f3c(0x20f)]){case _0x4b6f3c(0x299):initclient();break;case _0x4b6f3c(0x23a):toggleBotMode();break;case _0x4b6f3c(0x257):emitHistory(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x1fe):deleteHistoryAlerts(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x2f2):getPortfolio(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x2f9):storeConfiguration(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x1d8):storeHeadless(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x213):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x53b1c6[_0x4b6f3c(0x31c)]);break;case _0x4b6f3c(0x2d7):cancelLoading();break;case _0x4b6f3c(0x22c):showConfig();break;case _0x4b6f3c(0x2a8):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x6fb0cc=null){const _0x36e4ba=_0x3d0aaf;if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);lastCoinsToBalance='',coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0x36e4ba(0x312)]!=''&&config[_0x36e4ba(0x312)]!=_0x36e4ba(0x317)){await initExchange(config[_0x36e4ba(0x2d9)],config[_0x36e4ba(0x312)],config[_0x36e4ba(0x252)]);let _0x2b70a1=![];try{_0x2b70a1=await loadSymbols();}catch(_0x1598a0){handleError(_0x1598a0,_0x36e4ba(0x30b));}if(_0x2b70a1){adjustStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x6fb0cc),exchangeStopped=![];if(lastOrders[_0x36e4ba(0x2ca)]==0x0&&allOpenOrders[_0x36e4ba(0x2ca)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),initbot();}}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function initExchange(_0xb97b62,_0xef811d,_0x157990){const _0x138699=_0x3d0aaf;exchange&&await stopExchange();!supportedExchanges()[_0x138699(0x2e1)](_0xb97b62)&&(logger['full'](_0x138699(0x2d2)+_0xb97b62+_0x138699(0x271)),killBot());const _0x247a96=ccxt[_0xb97b62[_0x138699(0x28d)]()];exchange=new _0x247a96({'apiKey':_0xef811d,'secret':_0x157990,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});}function adjustStableCoins(){const _0x10d1f6=_0x3d0aaf;let _0x2dae7b=config[_0x10d1f6(0x208)]==_0x10d1f6(0x27a)?_0x10d1f6(0x27a):_0x10d1f6(0x2a4),_0x5dfae5=!allSymbols['includes'](_0x2dae7b+_0x10d1f6(0x267))?_0x10d1f6(0x217):_0x10d1f6(0x302),_0x8fd835=!allSymbols[_0x10d1f6(0x2e1)](_0x2dae7b+'/USD')?_0x10d1f6(0x217):_0x10d1f6(0x2e6);stablecoins={'eur':{'coin':''+_0x2dae7b+_0x5dfae5,'symbol':_0x2dae7b+'/'+_0x5dfae5},'usd':{'coin':''+_0x2dae7b+_0x8fd835,'symbol':_0x2dae7b+'/'+_0x8fd835}};}async function initwsCcxt(_0x2e52b6){const _0x166db2=_0x3d0aaf;if(_0x2e52b6==null){_0x2e52b6=[],currentCoins[_0x166db2(0x216)](_0x311693=>{const _0x53e511=_0x166db2;if(_0x311693['coin']!=config[_0x53e511(0x208)])_0x2e52b6[_0x53e511(0x2f4)](_0x311693[_0x53e511(0x301)]);});if(!_0x2e52b6['includes'](stablecoins['eur'][_0x166db2(0x301)]))_0x2e52b6[_0x166db2(0x2f4)](stablecoins[_0x166db2(0x24d)][_0x166db2(0x301)]);if(!_0x2e52b6[_0x166db2(0x2e1)](stablecoins[_0x166db2(0x2ba)][_0x166db2(0x301)]))_0x2e52b6[_0x166db2(0x2f4)](stablecoins[_0x166db2(0x2ba)][_0x166db2(0x301)]);if(!_0x2e52b6[_0x166db2(0x2e1)](_0x166db2(0x2c4)+config[_0x166db2(0x208)]))_0x2e52b6[_0x166db2(0x2f4)]('BNB/'+config['basecoin']);}loadCoins(_0x2e52b6);const _0x56b890=async _0x433e8=>{const _0x4fd618=_0x166db2,_0x3f904b=await exchange[_0x4fd618(0x2b5)](_0x433e8);global[_0x4fd618(0x215)][noslash(_0x3f904b['symbol'])]=_0x3f904b[_0x4fd618(0x2dc)];while(!![]){if(!botPaused)try{const _0x442769=await exchange[_0x4fd618(0x323)](_0x433e8);global[_0x4fd618(0x215)][noslash(_0x442769[0x0][_0x4fd618(0x301)])]=_0x442769[0x0]['price'],await sleep(0x3e8);}catch(_0xb7f831){if(!exchangeStopped)await handleError(_0xb7f831,'watchTrades',_0x433e8);}else await sleep(0x3e8);}},_0x5c6d63=async _0x52952=>{const _0x23c773=_0x166db2;while(!![]){if(!botPaused)try{const _0x217d4c=await exchange['fetchTicker'](_0x52952);global[_0x23c773(0x1ec)][_0x217d4c[_0x23c773(0x301)]]=_0x217d4c[_0x23c773(0x2c1)],await sleep(0x2710);}catch(_0x5c696f){if(!exchangeStopped)await handleError(_0x5c696f,'fetchTickers',_0x52952);}else await sleep(0x3e8);}},_0x5e52a5=async()=>{const _0x36a202=_0x166db2;while(!![]){if(!botPaused)try{const _0x3961e0=await exchange['watchOrders']();_0x3961e0[_0x36a202(0x216)](_0x4a60a6=>{updateNumberCoinsCcxt(_0x4a60a6);});}catch(_0xa8f737){if(!exchangeStopped)await handleError(_0xa8f737,'watchOrders');}else await sleep(0x3e8);}};_0x2e52b6[_0x166db2(0x216)](async _0x1d7dc5=>{_0x56b890(_0x1d7dc5),_0x5c6d63(_0x1d7dc5);}),!wsEventsSet&&(wsEventsSet=!![],_0x5e52a5());}async function loadSymbols(){const _0x1d971c=_0x3d0aaf;if(allSymbols)return!![];let _0x15ea39=![];try{markets=await exchange[_0x1d971c(0x2f0)](),allSymbols=exchange['symbols'][_0x1d971c(0x1f7)](_0x40ef34=>{const _0x17845f=_0x1d971c;let _0x1545b1=![];return exceptions[_0x17845f(0x216)](_0x42f050=>{const _0x224a6f=_0x17845f;if(_0x40ef34[_0x224a6f(0x2e1)](_0x42f050))_0x1545b1=!![];}),!_0x1545b1;}),_0x15ea39=!![];}catch(_0x29ddc0){_0x15ea39=![];throw _0x29ddc0;}return _0x15ea39;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x13456a=_0x3d0aaf;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x13456a(0x258),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x31f84d=getNormalizedPerformance();emitPerformance(_0x31f84d),await getStartingBalances(_0x31f84d);}async function toggleBotMode(){const _0x537722=_0x3d0aaf;let _0x38a80c=dbConfig['get'](_0x537722(0x2c7))[_0x537722(0x328)]({'botID':botID})[_0x537722(0x25b)]();if(_0x38a80c){const _0x3349e3=!_0x38a80c[_0x537722(0x2cf)];dbConfig[_0x537722(0x332)]('bot')['find']({'botID':botID})[_0x537722(0x2e9)]({'headless':_0x3349e3})[_0x537722(0x2e7)](),config['headless']=_0x3349e3,proxyEmit(_0x537722(0x1f2),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4b9306=_0x3d0aaf;process[_0x4b9306(0x24c)]({'updatebotmanager':!![]},_0x18d821=>{});}async function loadCoins(_0x4e71d5){const _0x72c23a=_0x3d0aaf;let _0x47ca2a,_0x39ff72=0x0;loading[_0x72c23a(0x2fe)]=[];let _0x567569=0x0;_0x4e71d5[_0x72c23a(0x216)](_0x2cc0c7=>{const _0x348c1a=_0x72c23a;loading['remainingSymbols'][_0x348c1a(0x2f4)](_0x2cc0c7);}),loadingCanceled=![];let _0x5655be=![];while(_0x47ca2a!=_0x4e71d5[_0x72c23a(0x2ca)]){_0x47ca2a=0x0,_0x4e71d5['forEach'](_0xd1c5de=>{const _0x2cbd53=_0x72c23a;global[_0x2cbd53(0x215)][noslash(_0xd1c5de)]&&(loading['remainingSymbols']=loading[_0x2cbd53(0x2fe)][_0x2cbd53(0x1f7)](_0x331796=>_0x331796!=_0xd1c5de),_0x47ca2a++);}),loading[_0x72c23a(0x307)]=Math[_0x72c23a(0x25f)](_0x47ca2a/_0x4e71d5['length']*0x64);loading[_0x72c23a(0x307)]!=0x64&&(_0x567569>0x1e*0x5&&(loading[_0x72c23a(0x1f6)]=!![],emitLoadingProgress()),_0x567569>0x78*0x5&&!_0x5655be&&(loading[_0x72c23a(0x21c)]=!![],emitLoadingProgress(),_0x5655be=!![],logHistory(_0x72c23a(0x210),_0x72c23a(0x2ef)+loading[_0x72c23a(0x2fe)][_0x72c23a(0x2b4)](',\x20')+_0x72c23a(0x22b)),logHistory(_0x72c23a(0x210),_0x72c23a(0x237)+loadCoinsRetryInterval/0xea60+_0x72c23a(0x27d)),pidCoinReloading=setTimeout(()=>{const _0x46209a=_0x72c23a;process[_0x46209a(0x24c)]({'stop':_0x46209a(0x29f)},_0x1dd8df=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x72c23a(0x21c)]=!![],emitLoadingProgress();break;}else _0x47ca2a!=_0x39ff72&&(_0x39ff72=_0x47ca2a,emitLoadingProgress()),_0x567569++,await sleep(0xc8);}_0x47ca2a==_0x4e71d5['length']&&(coinsLoaded=!![],_0x5655be&&logHistory(_0x72c23a(0x226),_0x72c23a(0x2af)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x550c3a=_0x3d0aaf;proxyEmit(_0x550c3a(0x1f2),{...emittedConfiguration(),'configstate':_0x550c3a(0x270)});}function emitLoadingProgress(){const _0x12d8e3=_0x3d0aaf;proxyEmit(_0x12d8e3(0x1e5),loading);}async function getFiat(){const _0x4115f7=_0x3d0aaf;let _0x324422=0x0,_0xfcab33=0x0;try{_0x324422=global[_0x4115f7(0x215)][stablecoins[_0x4115f7(0x24d)]['coin']],_0xfcab33=global['ticker'][stablecoins[_0x4115f7(0x2ba)][_0x4115f7(0x27e)]];}catch(_0x3cc9c4){await handleError(_0x3cc9c4,_0x4115f7(0x249));}return{'eur':Number(_0x324422),'usd':Number(_0xfcab33)};}function capitalize(_0x4c7e39){const _0x1eed1d=_0x3d0aaf;return _0x4c7e39[_0x1eed1d(0x21a)](0x0,0x1)[_0x1eed1d(0x28c)]()+_0x4c7e39[_0x1eed1d(0x21a)](0x1);}function supportedExchanges(){const _0x12c80d=_0x3d0aaf,_0x35e263=['ws',_0x12c80d(0x2ec),_0x12c80d(0x2b5),_0x12c80d(0x323),_0x12c80d(0x2d8),_0x12c80d(0x2b2),'createOrder',_0x12c80d(0x2d1),_0x12c80d(0x21f),_0x12c80d(0x25e)];let _0xe4874d=[];const _0x5e69e4=ccxt[_0x12c80d(0x1de)][_0x12c80d(0x26b)](_0x538cbe=>new ccxt[_0x538cbe]())[_0x12c80d(0x1f7)](_0x43a908=>_0x43a908['has']['ws']);return _0x5e69e4['forEach'](_0x1eb2a3=>{const _0x331758=_0x12c80d;let _0x332c5d=0x0;_0x35e263[_0x331758(0x216)](_0x21dd91=>{const _0x1a2a89=_0x331758;_0x21dd91 in _0x1eb2a3['has']&&_0x1eb2a3[_0x1a2a89(0x22e)][_0x21dd91]&&_0x332c5d++;}),_0x332c5d==_0x35e263[_0x331758(0x2ca)]&&_0xe4874d[_0x331758(0x2f4)](capitalize(_0x1eb2a3['id']));}),_0xe4874d;}function setStartDatePerformance(){const _0x349847=_0x3d0aaf;if(config&&config[_0x349847(0x321)][0x0][_0x349847(0x1fa)][_0x349847(0x2ca)]!=0x0){const _0x27af38=config[_0x349847(0x321)][0x0][_0x349847(0x1fa)];dbPerformance[_0x349847(0x332)](_0x349847(0x26c))[_0x349847(0x328)]({'date':config['startdate']})[_0x349847(0x2e9)]({'coins':_0x27af38})[_0x349847(0x2e7)]();}}async function recreateCoinResults(){const _0x3dccbd=_0x3d0aaf;let _0x4fb114,_0x203924=[];try{const _0xef6826=fns[_0x3dccbd(0x2e0)](fns['parseISO'](config[_0x3dccbd(0x2f5)][_0x3dccbd(0x1dd)](/\//g,'-')),_0x3dccbd(0x333));for(const _0x27de33 of currentCoins){if(_0x27de33[_0x3dccbd(0x27e)]!=config[_0x3dccbd(0x208)]){let _0x24237f=0x0,_0x2d6e68,_0x1ff2cf;_0x4fb114=await getAllEventOrders(_0x27de33[_0x3dccbd(0x301)]);if(_0x4fb114[_0x3dccbd(0x2ca)]>0x0)_0x4fb114['forEach'](_0x2b854f=>{const _0x5d711a=_0x3dccbd,_0x14d663=_0x27de33[_0x5d711a(0x301)][_0x5d711a(0x2e1)](config['basecoin']+'/');_0x203924[_0x5d711a(0x2f4)]({'datetime':_0x2b854f[_0x5d711a(0x236)],'coin':_0x27de33['coin'],'symbol':_0x27de33['symbol'],'side':_0x2b854f['side'],'reverse':_0x14d663,'amount':formatResult(_0x2b854f[_0x5d711a(0x2e8)],0x8),'filled':formatResult(_0x2b854f[_0x5d711a(0x2e8)],0x8),'price':formatResult(_0x2b854f[_0x5d711a(0x2bf)],0x8)}),_0x24237f=_0x2b854f[_0x5d711a(0x243)]==_0x5d711a(0x2b1)?_0x24237f+_0x2b854f[_0x5d711a(0x2e8)]:_0x24237f-_0x2b854f['filled'];if(!_0x1ff2cf)_0x1ff2cf=_0x2b854f[_0x5d711a(0x2bf)];});_0x2d6e68=_0x27de33[_0x3dccbd(0x32d)]-_0x24237f;let _0x595d52;config['liquidity']['forEach'](_0xb6469a=>{const _0x121149=_0x3dccbd;!_0x595d52&&(_0x595d52=_0xb6469a[_0x121149(0x1fa)][_0x121149(0x328)](_0x30c969=>_0x30c969[_0x121149(0x27e)]==_0x27de33[_0x121149(0x27e)]),_0x595d52&&(_0x2d6e68=_0x595d52['number'],_0x1ff2cf=_0x595d52['price']));});let _0x4ec501=dbCoinResults[_0x3dccbd(0x332)](_0x3dccbd(0x220))[_0x3dccbd(0x328)]({'coin':_0x27de33['coin']})[_0x3dccbd(0x25b)]();_0x4ec501={'coin':_0x27de33[_0x3dccbd(0x27e)],'number':_0x2d6e68,'breakeven':_0x1ff2cf,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3dccbd(0x332)](_0x3dccbd(0x220))['find']({'coin':_0x27de33[_0x3dccbd(0x27e)]})[_0x3dccbd(0x2e9)](_0x4ec501)['write']();}}_0x203924[_0x3dccbd(0x2f1)]((_0x448e64,_0x162fef)=>_0x448e64['datetime']>_0x162fef[_0x3dccbd(0x236)]?0x1:_0x162fef['datetime']>_0x448e64[_0x3dccbd(0x236)]?-0x1:0x0);let _0x3ad49c=0x0;for(let _0x5b01da of _0x203924){await updateCoinResults(_0x5b01da,!![]);}}catch(_0x14405a){await handleError(_0x14405a,_0x3dccbd(0x27c));}}async function getAllEventOrders(_0x3b4f3d){const _0x4c0241=_0x3d0aaf;let _0xebf7be=[],_0xa6e143=dbLogs[_0x4c0241(0x332)](_0x4c0241(0x316))[_0x4c0241(0x1f7)](_0x3acfe9=>{const _0x4fac77=_0x4c0241,_0x4997f9=_0x3acfe9['event']['toLowerCase']();return _0x4997f9[_0x4fac77(0x2e1)](_0x3b4f3d[_0x4fac77(0x28d)]())&&(_0x4997f9['includes']('market')&&_0x4997f9[_0x4fac77(0x2e1)](_0x4fac77(0x1d7))||_0x4997f9[_0x4fac77(0x2e1)](_0x4fac77(0x2e8))&&_0x4997f9[_0x4fac77(0x2e1)](_0x4fac77(0x1d7)));})[_0x4c0241(0x1e6)](_0x4c0241(0x2b7))[_0x4c0241(0x25b)]();return _0xa6e143[_0x4c0241(0x216)](_0x5efd51=>{const _0x151086=_0x4c0241,_0x214960=_0x5efd51['event']['includes'](_0x151086(0x32c))?'sell':'buy',_0x118840=/#([0-9]|\.)+\s/i,_0x3d0d36=Number(_0x118840[_0x151086(0x231)](_0x5efd51[_0x151086(0x2d4)])[0x0][_0x151086(0x1d6)](0x1)),_0x49587d=/@([0-9]|\.)+$/i,_0x542966=Number(_0x49587d[_0x151086(0x231)](_0x5efd51['event'])[0x0][_0x151086(0x1d6)](0x1));_0xebf7be['push']({'datetime':_0x5efd51['time'],'coin':symbolToCoin(_0x3b4f3d),'symbol':_0x3b4f3d,'side':_0x214960,'amount':_0x3d0d36,'filled':_0x3d0d36,'price':_0x542966});}),_0xebf7be;}async function getAllOrders(_0x1b1c51,_0x13a9b0){const _0x348e9c=_0x3d0aaf;let _0x248cf1=[];while(_0x13a9b0<exchange[_0x348e9c(0x282)]()){const _0xfeff35=0x1f4,_0x5ed175=await exchange[_0x348e9c(0x21f)](_0x1b1c51,_0x13a9b0,_0xfeff35);if(_0x5ed175[_0x348e9c(0x2ca)])_0x13a9b0=_0x5ed175[_0x5ed175[_0x348e9c(0x2ca)]-0x1][_0x348e9c(0x23d)]+0x1,_0x248cf1=_0x248cf1[_0x348e9c(0x29a)](_0x5ed175);else break;}return _0x248cf1;}async function validate24hChanges(){const _0x4ebf51=_0x3d0aaf;let _0x33afa4;for(const _0x2a5d22 of currentCoins){if(_0x2a5d22['coin']!=config[_0x4ebf51(0x208)]){let _0x166fb9;_0x2a5d22[_0x4ebf51(0x28a)]?_0x166fb9=formatResult((0x1/(global['change'][noslash(_0x2a5d22[_0x4ebf51(0x301)])]/0x64+0x1)-0x1)*0x64,0x3):_0x166fb9=global[_0x4ebf51(0x1ec)][noslash(_0x2a5d22[_0x4ebf51(0x301)])],_0x166fb9<config[_0x4ebf51(0x246)]&&(logHistory(_0x4ebf51(0x210),_0x2a5d22[_0x4ebf51(0x27e)]+_0x4ebf51(0x23b)+_0x166fb9+'%'),logHistory('error',_0x4ebf51(0x28f)),logHistory(_0x4ebf51(0x210),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x38ebc3=_0x3d0aaf;let _0x55d5e6=dbLogs[_0x38ebc3(0x332)](_0x38ebc3(0x244))['value']();if(_0x55d5e6!=_0x38ebc3(0x2aa)){dbLogs[_0x38ebc3(0x2ed)](_0x38ebc3(0x244),_0x38ebc3(0x2aa))['write']();let _0x43f230=[];const _0x406109=dbLogs[_0x38ebc3(0x332)](_0x38ebc3(0x316))[_0x38ebc3(0x25b)]();_0x406109['forEach'](_0x3f9afe=>{const _0x42108d=_0x38ebc3;_0x43f230['push']({'time':_0x3f9afe[_0x42108d(0x2b7)],'type':_0x3f9afe[_0x42108d(0x277)],'event':_0x3f9afe['event']});}),dbLogs[_0x38ebc3(0x332)](_0x38ebc3(0x316))[_0x38ebc3(0x2e9)](_0x43f230)[_0x38ebc3(0x2e7)]();}let _0x98350f=dbConfig['get'](_0x38ebc3(0x244))['value']();if(_0x98350f!='2.3.5'){dbConfig[_0x38ebc3(0x2ed)](_0x38ebc3(0x244),_0x38ebc3(0x2aa))[_0x38ebc3(0x2e7)]();let _0x66fcba=dbConfig[_0x38ebc3(0x332)](_0x38ebc3(0x2c7))[_0x38ebc3(0x328)]({'botID':botID})['value']();if(_0x66fcba){let _0x303d86=[];_0x66fcba[_0x38ebc3(0x1da)][_0x38ebc3(0x216)](_0xe476d1=>{const _0x543521=_0x38ebc3;_0x303d86[_0x543521(0x2f4)]({'coin':_0xe476d1[_0x543521(0x27e)],'number':_0xe476d1[_0x543521(0x214)],'price':_0xe476d1[_0x543521(0x2e2)]}),delete _0xe476d1[_0x543521(0x214)],delete _0xe476d1[_0x543521(0x2e2)];});if(_0x303d86[_0x38ebc3(0x2ca)]!==0x0)fs['writeFile'](configbackuppath+(_0x38ebc3(0x24e)+botID+_0x38ebc3(0x2a9)),JSON['stringify'](_0x303d86,null,0x4),function(_0x11e8a6){if(_0x11e8a6){}});const _0x522d2d=(_0x2ddc0e,_0x2ce6c5)=>{const _0xb209db=_0x38ebc3;let _0x373c51=[];_0x2ce6c5[_0xb209db(0x216)](_0x57ecfd=>{const _0x59066e=_0xb209db,_0x3ab267=_0x2ddc0e[_0x59066e(0x328)](_0x47fce1=>_0x47fce1[_0x59066e(0x27e)]==_0x57ecfd[_0x59066e(0x27e)]);if(!_0x3ab267)_0x373c51[_0x59066e(0x2f4)](_0x57ecfd);});let _0x393391=[];return _0x2ddc0e['forEach'](_0xa4b0c1=>{const _0x5da416=_0xb209db,_0x4c8bc2=_0x2ce6c5[_0x5da416(0x328)](_0x9b826d=>_0x9b826d[_0x5da416(0x27e)]==_0xa4b0c1['coin']);if(!_0x4c8bc2||_0x4c8bc2[_0x5da416(0x32d)]==0x0&&_0xa4b0c1[_0x5da416(0x32d)]!=0x0)_0x393391['push'](_0xa4b0c1);}),{'missingDay1':_0x373c51,'notInDay2':_0x393391};},_0x265761=dbPerformance[_0x38ebc3(0x332)]('data')[_0x38ebc3(0x1e7)]()['value']();if(_0x265761[_0x38ebc3(0x2ca)]>0x1){const {missingDay1:_0x164c76,notInDay2:_0x24aaab}=_0x522d2d(_0x303d86,_0x265761[0x1][_0x38ebc3(0x220)]);_0x303d86=[..._0x303d86,..._0x164c76],_0x24aaab[_0x38ebc3(0x216)](_0x2a4d85=>{const _0x42fd33=_0x38ebc3;let _0x59cd0d=_0x303d86[_0x42fd33(0x2c0)](_0x33dcb8=>_0x33dcb8['coin']==_0x2a4d85[_0x42fd33(0x27e)]);_0x59cd0d!=-0x1&&_0x303d86[_0x42fd33(0x2cc)](_0x59cd0d,0x1);});}_0x303d86[_0x38ebc3(0x2f1)]((_0x175249,_0x473582)=>_0x175249['coin']>_0x473582[_0x38ebc3(0x27e)]?0x1:_0x473582['coin']>_0x175249[_0x38ebc3(0x27e)]?-0x1:0x0);let _0x5b06db=[{'date':_0x66fcba['startdate'],'changes':_0x303d86}];_0x265761[_0x38ebc3(0x2ca)]>0x2&&_0x265761[_0x38ebc3(0x216)]((_0x37af92,_0x31fdbb)=>{const _0x1b81f3=_0x38ebc3;if(_0x31fdbb>0x0&&_0x31fdbb<_0x265761[_0x1b81f3(0x2ca)]-0x1){const {missingDay1:_0x124201,notInDay2:_0x1b708d}=_0x522d2d(_0x265761[_0x31fdbb][_0x1b81f3(0x220)],_0x265761[_0x31fdbb+0x1]['coins']);_0x303d86=[],(_0x124201[_0x1b81f3(0x2ca)]!=0x0||_0x1b708d['length']!=0x0)&&(_0x124201[_0x1b81f3(0x2ca)]!=0x0&&_0x303d86[_0x1b81f3(0x2f4)](..._0x124201),_0x1b708d[_0x1b81f3(0x2ca)]!=0x0&&(_0x1b708d['forEach'](_0x3a7981=>{const _0x55b6e2=_0x1b81f3;_0x3a7981[_0x55b6e2(0x32d)]=-_0x3a7981[_0x55b6e2(0x32d)];}),_0x303d86['push'](..._0x1b708d)),_0x303d86[_0x1b81f3(0x2f1)]((_0x224781,_0x4399bf)=>_0x224781[_0x1b81f3(0x27e)]>_0x4399bf['coin']?0x1:_0x4399bf[_0x1b81f3(0x27e)]>_0x224781[_0x1b81f3(0x27e)]?-0x1:0x0),_0x5b06db[_0x1b81f3(0x2f4)]({'date':_0x265761[_0x31fdbb+0x1][_0x1b81f3(0x28e)],'changes':_0x303d86}));}}),dbConfig[_0x38ebc3(0x332)](_0x38ebc3(0x2c7))['find']({'botID':botID})[_0x38ebc3(0x2e9)]({..._0x66fcba,'liquidity':_0x5b06db})[_0x38ebc3(0x2e7)]();}}_0x98350f=dbConfig[_0x38ebc3(0x332)](_0x38ebc3(0x244))[_0x38ebc3(0x25b)]();if(_0x98350f!='2.6.0'){dbConfig['set']('version',_0x38ebc3(0x318))[_0x38ebc3(0x2e7)]();let _0x1cff06=dbConfig[_0x38ebc3(0x332)](_0x38ebc3(0x2c7))['find']({'botID':botID})[_0x38ebc3(0x25b)]();if(_0x1cff06){const _0x21bca9=_0x1cff06[_0x38ebc3(0x2d9)],_0x7e9a40=_0x21bca9?capitalize(_0x21bca9):'Binance';dbConfig[_0x38ebc3(0x332)](_0x38ebc3(0x2c7))[_0x38ebc3(0x328)]({'botID':botID})[_0x38ebc3(0x2e9)]({'exchange':_0x7e9a40})[_0x38ebc3(0x2e7)]();}}config=getConfiguration(botID);let _0x3da79f=dbPerformance[_0x38ebc3(0x332)]('version')[_0x38ebc3(0x25b)]();_0x3da79f!=_0x38ebc3(0x2aa)&&(dbPerformance[_0x38ebc3(0x2ed)](_0x38ebc3(0x244),_0x38ebc3(0x2aa))[_0x38ebc3(0x2e7)](),setStartDatePerformance());let _0x1e1a19=dbCoinResults[_0x38ebc3(0x332)]('version')['value']();if(_0x1e1a19!=_0x38ebc3(0x250)){dbCoinResults[_0x38ebc3(0x2ed)]('version',_0x38ebc3(0x250))[_0x38ebc3(0x2e7)]();let _0x4fe18b=dbCoinResults[_0x38ebc3(0x332)](_0x38ebc3(0x220))[_0x38ebc3(0x25b)]();if(_0x4fe18b[_0x38ebc3(0x2ca)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x181dfa){const _0x5f09d2=_0x3d0aaf;let _0x3b9d16=dbConfig['get'](_0x5f09d2(0x2c7))['find']({'botID':_0x181dfa})[_0x5f09d2(0x25b)]();if(_0x3b9d16){let _0x4d989c=![];typeof _0x3b9d16['threshold']==_0x5f09d2(0x2e5)&&(_0x3b9d16={..._0x3b9d16,'threshold':Number(_0x3b9d16[_0x5f09d2(0x330)])},_0x4d989c=!![]),_0x3b9d16[_0x5f09d2(0x246)]==null&&(_0x3b9d16={..._0x3b9d16,'change24h':-0x14},_0x4d989c=!![]),_0x4d989c&&(_0x3b9d16={'botID':_0x3b9d16[_0x5f09d2(0x234)],'exchange':_0x3b9d16[_0x5f09d2(0x2d9)],'apiKey':_0x3b9d16['apiKey'],'apiSecret':_0x3b9d16['apiSecret'],'basecoin':_0x3b9d16[_0x5f09d2(0x208)],'botname':_0x3b9d16[_0x5f09d2(0x1e3)],'showname':_0x3b9d16[_0x5f09d2(0x23e)],'threshold':_0x3b9d16['threshold'],'ordertype':_0x3b9d16['ordertype'],'timeout':_0x3b9d16[_0x5f09d2(0x1f6)],'startdate':_0x3b9d16[_0x5f09d2(0x2f5)],'recreate':_0x3b9d16[_0x5f09d2(0x25a)],'timeshift':_0x3b9d16[_0x5f09d2(0x295)],'headless':_0x3b9d16['headless'],'cooldown':_0x3b9d16['cooldown'],'change24h':_0x3b9d16[_0x5f09d2(0x246)],'emojibuy':_0x3b9d16[_0x5f09d2(0x2d6)],'emojisell':_0x3b9d16[_0x5f09d2(0x21d)],'portfolio':_0x3b9d16['portfolio'],'liquidity':_0x3b9d16['liquidity']},dbConfig['get'](_0x5f09d2(0x2c7))[_0x5f09d2(0x222)]()[_0x5f09d2(0x2e7)](),dbConfig[_0x5f09d2(0x332)](_0x5f09d2(0x2c7))[_0x5f09d2(0x2f4)](_0x3b9d16)[_0x5f09d2(0x2e7)]());}else _0x3b9d16={'botID':_0x181dfa,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x5f09d2(0x275)+_0x181dfa,'showname':![],'threshold':0x3,'ordertype':_0x5f09d2(0x2cb),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x3b9d16;}function emittedConfiguration(){const _0x123a72=_0x3d0aaf;let _0x4f72c3;if(config[_0x123a72(0x312)]=='')_0x4f72c3={...config,'configstate':_0x123a72(0x2fc)};else config[_0x123a72(0x312)]==_0x123a72(0x317)?_0x4f72c3={...config,'configstate':_0x123a72(0x287)}:_0x4f72c3={...config,'apiKey':_0x123a72(0x31a),'apiSecret':_0x123a72(0x31a)};return _0x4f72c3;}function getSettings(){const _0x3fe4cd=_0x3d0aaf;return dbSettings[_0x3fe4cd(0x332)](_0x3fe4cd(0x272))[_0x3fe4cd(0x25b)]();}function getSecure(){const _0x332459=_0x3d0aaf;return dbSecure[_0x332459(0x332)](_0x332459(0x315))[_0x332459(0x25b)]()||{};}function updateTimeshift(_0x1cbf6e){const _0x41d882=_0x3d0aaf;let _0x139a9b=dbConfig['get'](_0x41d882(0x2c7))[_0x41d882(0x328)]({'botID':botID})[_0x41d882(0x25b)]();_0x139a9b&&dbConfig['get'](_0x41d882(0x2c7))['find']({'botID':botID})[_0x41d882(0x2e9)]({'timeshift':_0x1cbf6e})[_0x41d882(0x2e7)](),config[_0x41d882(0x295)]=_0x1cbf6e,proxyEmit(_0x41d882(0x1f2),emittedConfiguration());}async function storeConfiguration(_0x3172e0){const _0x247f1f=_0x3d0aaf;let _0x16f1ed=[],_0xc3e7b9=[];_0x3172e0[_0x247f1f(0x1da)][_0x247f1f(0x216)](_0x21618f=>{const _0xde796b=_0x247f1f;if(!_0x21618f[_0xde796b(0x29d)]&&_0x21618f[_0xde796b(0x27e)]!=_0x3172e0[_0xde796b(0x208)])_0xc3e7b9['push'](_0x21618f[_0xde796b(0x301)]);});currentCoins[_0x247f1f(0x2ca)]==0x0?_0x16f1ed=_0xc3e7b9:_0xc3e7b9[_0x247f1f(0x216)](_0x448828=>{const _0x3e4e31=_0x247f1f,_0x49f7d1=currentCoins[_0x3e4e31(0x328)](_0x4811cb=>_0x4811cb[_0x3e4e31(0x301)]==_0x448828);!_0x49f7d1&&_0x16f1ed[_0x3e4e31(0x2f4)](_0x448828);});let _0x4dbff4=dbConfig[_0x247f1f(0x332)](_0x247f1f(0x2c7))[_0x247f1f(0x328)]({'botID':botID})[_0x247f1f(0x25b)]();_0x3172e0={..._0x3172e0,'apiKey':crypt[_0x247f1f(0x1e0)](secure['privateKey'],_0x3172e0[_0x247f1f(0x312)])[_0x247f1f(0x2fa)],'apiSecret':crypt[_0x247f1f(0x1e0)](secure[_0x247f1f(0x245)],_0x3172e0['apiSecret'])[_0x247f1f(0x2fa)]};if(_0x4dbff4){if(_0x3172e0[_0x247f1f(0x312)]=='************')_0x3172e0[_0x247f1f(0x312)]=config[_0x247f1f(0x312)];if(_0x3172e0[_0x247f1f(0x252)]==_0x247f1f(0x31a))_0x3172e0[_0x247f1f(0x252)]=config[_0x247f1f(0x252)];dbConfig[_0x247f1f(0x332)](_0x247f1f(0x2c7))[_0x247f1f(0x328)]({'botID':botID})[_0x247f1f(0x2e9)](_0x3172e0)[_0x247f1f(0x2e7)]();}else dbConfig[_0x247f1f(0x332)](_0x247f1f(0x2c7))[_0x247f1f(0x2f4)](_0x3172e0)[_0x247f1f(0x2e7)](),process[_0x247f1f(0x24c)]({'status':_0x247f1f(0x2fd),'live':'running'},_0x16a455=>{});config={..._0x3172e0},setStartDatePerformance(),process[_0x247f1f(0x24c)]({'botname':_0x3172e0['botname']},_0x2e6728=>{}),updateBotManager();const _0x298a7a=getNormalizedPerformance();getStartingBalances(_0x298a7a),emitPerformance(_0x298a7a),proxyEmit('configuration-stored'),await initCoinResults(),reset(_0x16f1ed);}async function storeHeadless(_0x38bdef){const _0x2a78b3=_0x3d0aaf,_0xeb226={...config,'headless':_0x38bdef['headless']};let _0x13050b=dbConfig['get'](_0x2a78b3(0x2c7))[_0x2a78b3(0x328)]({'botID':botID})[_0x2a78b3(0x25b)]();_0x13050b&&dbConfig[_0x2a78b3(0x332)](_0x2a78b3(0x2c7))['find']({'botID':botID})[_0x2a78b3(0x2e9)](_0xeb226)[_0x2a78b3(0x2e7)](),config={..._0xeb226},updateBotManager(),proxyEmit(_0x2a78b3(0x1f2),emittedConfiguration());}function noslash(_0xde660c){const _0x200832=_0x3d0aaf;return _0xde660c[_0x200832(0x1dd)]('/','');}async function updateNumberCoinsCcxt(_0x107f38){const _0x32caaa=_0x3d0aaf;logger[_0x32caaa(0x238)]('0\x20-\x20EXECUTION:\x20'+_0x107f38[_0x32caaa(0x301)]+_0x32caaa(0x200)+_0x107f38[_0x32caaa(0x230)]+'\x20|\x20'+_0x107f38['id']+_0x32caaa(0x200)+_0x107f38['clientOrderId']);let _0x47ea77=_0x107f38['status'],_0xce9ab4=![];currentCoins[_0x32caaa(0x216)](_0x4132e6=>{const _0x30beac=_0x32caaa;_0x4132e6[_0x30beac(0x301)]==_0x107f38['symbol']&&(_0xce9ab4=!![]);});if(!_0xce9ab4)return;const _0x20abf0=currentCoins[_0x32caaa(0x328)](_0x15b74c=>_0x15b74c[_0x32caaa(0x301)]==_0x107f38['symbol']),_0x1ddaf1=_0x33735d=>{const _0x434278=_0x32caaa;if(_0x20abf0)_0x20abf0[_0x434278(0x1f3)]=_0x33735d;};if(_0x47ea77==_0x32caaa(0x227))_0x1ddaf1(_0x32caaa(0x227));else{if(_0x47ea77=='canceled')_0x1ddaf1('canceled'),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x47ea77==_0x32caaa(0x255)){logger[_0x32caaa(0x238)]('1\x20-\x20FILLED:\x20'+_0x107f38[_0x32caaa(0x301)]+_0x32caaa(0x200)+_0x107f38[_0x32caaa(0x2e8)]+_0x32caaa(0x200)+_0x107f38['id']+_0x32caaa(0x200)+_0x107f38[_0x32caaa(0x303)]);let _0x36956d=![];if(lastOrders)lastOrders['forEach'](async _0x26db6c=>{const _0x3bdf46=_0x32caaa;if(_0x26db6c[_0x3bdf46(0x27b)]==_0x107f38[_0x3bdf46(0x303)]){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x107f38['clientOrderId']),_0x36956d=!![];if(_0x26db6c[_0x3bdf46(0x2e8)]==0x0){logger[_0x3bdf46(0x238)](_0x3bdf46(0x2a5)+_0x107f38['clientOrderId']),_0x26db6c['price']=_0x107f38[_0x3bdf46(0x314)],_0x26db6c[_0x3bdf46(0x2e8)]=_0x107f38['filled'],_0x26db6c[_0x3bdf46(0x276)]={'cost':_0x107f38[_0x3bdf46(0x276)][_0x3bdf46(0x1ff)],'currency':_0x107f38[_0x3bdf46(0x276)]['currency']},_0x1ddaf1(_0x3bdf46(0x2e8)),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x26db6c);}}});!_0x36956d&&(logger[_0x32caaa(0x238)](_0x32caaa(0x211)+_0x107f38['id']),_0x1ddaf1(_0x32caaa(0x2e8)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x350391=JSON[_0x32caaa(0x240)](lastBalances[_0x32caaa(0x1da)]);const _0x2b3e01=_0x350391[_0x32caaa(0x328)](_0x6218e4=>_0x6218e4[_0x32caaa(0x301)]==_0x107f38['symbol']);if(_0x2b3e01){if(_0x47ea77=='open')_0x2b3e01['orderstatus']=_0x2b3e01[_0x32caaa(0x1f3)]==_0x32caaa(0x2e8)?_0x32caaa(0x2e8):_0x32caaa(0x227);else{if(_0x47ea77==_0x32caaa(0x223))_0x2b3e01[_0x32caaa(0x1f3)]=_0x2b3e01[_0x32caaa(0x1f3)]==_0x32caaa(0x2e8)?_0x32caaa(0x2e8):_0x32caaa(0x223);else _0x47ea77==_0x32caaa(0x255)&&(_0x2b3e01[_0x32caaa(0x1f3)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x350391)},proxyEmit(_0x32caaa(0x258),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x56068e=![],_0x4162b0=!![],_0x20ab14=config[_0x3d0aaf(0x208)]){const _0x151242=_0x3d0aaf;let _0x4e4a0b,_0x5977b6=[],_0x634a86=[],_0x45fb41=[];try{_0x4e4a0b=await exchange[_0x151242(0x25e)](),mybalances=_0x4e4a0b[_0x151242(0x31b)];if(!_0x4162b0)for(const [_0x59a849,_0x27746e]of Object[_0x151242(0x2e3)](mybalances)){_0x45fb41[_0x151242(0x2f4)](_0x59a849);}else config['portfolio'][_0x151242(0x216)](_0x432d45=>{const _0x757b79=_0x151242;if(!_0x432d45[_0x757b79(0x29d)])_0x45fb41[_0x757b79(0x2f4)](_0x432d45[_0x757b79(0x27e)]);});if(_0x20ab14=='')for(const [_0xbce0c2,_0xddab34]of Object[_0x151242(0x2e3)](mybalances)){_0xddab34[_0x151242(0x26f)]()!=0x0&&_0x634a86['push']({'coin':_0xbce0c2});}else{if(_0x56068e)await getOpenOrders();let _0x512cb8=![];for(const [_0x563743,_0x4a1f46]of Object[_0x151242(0x2e3)](mybalances)){if(_0x45fb41['includes'](_0x563743)){const _0x556bb4=config['portfolio'][_0x151242(0x328)](_0xf7b381=>_0xf7b381[_0x151242(0x27e)]==_0x563743),_0x420798=_0x563743+'/'+_0x20ab14,_0x3a550=_0x20ab14+'/'+_0x563743,_0x1f8a83=currentCoins[_0x151242(0x328)](_0x30ee57=>_0x30ee57[_0x151242(0x27e)]==_0x563743);_0x512cb8=![];_0x56068e&&(_0x512cb8=allOpenOrders[_0x151242(0x328)](_0x3b181f=>_0x3b181f[_0x151242(0x301)]==_0x556bb4[_0x151242(0x301)]));if((_0x4a1f46[_0x151242(0x26f)]()!=0x0||_0x556bb4)&&(allSymbols['includes'](_0x420798)||_0x563743==_0x20ab14))_0x563743!=_0x20ab14&&_0x5977b6[_0x151242(0x2f4)](_0x420798),_0x634a86[_0x151242(0x2f4)]({'coin':_0x563743,'symbol':_0x420798,'reverse':![],'number':Math[_0x151242(0x253)](_0x4a1f46+(_0x556bb4&&_0x556bb4[_0x151242(0x248)]||0x0),0x0),'orderstatus':_0x56068e?_0x512cb8?_0x151242(0x227):_0x151242(0x329):_0x1f8a83?_0x1f8a83['orderstatus']:_0x151242(0x329)});else(_0x4a1f46[_0x151242(0x26f)]()!=0x0||_0x556bb4)&&allSymbols[_0x151242(0x2e1)](_0x3a550)&&(_0x563743!=_0x20ab14&&_0x5977b6[_0x151242(0x2f4)](_0x3a550),_0x634a86[_0x151242(0x2f4)]({'coin':_0x563743,'symbol':_0x3a550,'reverse':!![],'number':Math[_0x151242(0x253)](_0x4a1f46+(_0x556bb4&&_0x556bb4[_0x151242(0x248)]||0x0),0x0),'orderstatus':_0x56068e?_0x512cb8?'open':_0x151242(0x329):_0x1f8a83?_0x1f8a83[_0x151242(0x1f3)]:_0x151242(0x329)}));}}}}catch(_0x4bc27f){if(!_0x4162b0)handleErrorNoStop(_0x4bc27f,_0x151242(0x2ac));else await handleError(_0x4bc27f,_0x151242(0x2ac));}return _0x634a86;}async function getCoinNumber(_0x5d1eb1){const _0x284011=_0x3d0aaf;let _0x5ad1bd;try{const _0x4af8f9=await exchange['fetchBalance']();_0x5ad1bd=_0x4af8f9['total'][_0x5d1eb1];}catch(_0x4c5880){await handleError(_0x4c5880,_0x284011(0x242));}return _0x5ad1bd;}async function getOpenOrders(){const _0x555b88=_0x3d0aaf;let _0x589ad7;allOpenOrders=[];try{for(const _0x1b9f5c of config['portfolio']){!_0x1b9f5c[_0x555b88(0x29d)]&&_0x1b9f5c[_0x555b88(0x27e)]!=config[_0x555b88(0x208)]&&(_0x589ad7=await exchange[_0x555b88(0x2d1)](_0x1b9f5c[_0x555b88(0x301)]),_0x589ad7[_0x555b88(0x2ca)]>0x0&&allOpenOrders[_0x555b88(0x2f4)](_0x589ad7[0x0]));}}catch(_0x2d4315){await handleError(_0x2d4315,_0x555b88(0x247));}}async function handleOpenOrders(_0x3d5ecf=0x0){const _0x3deb4d=_0x3d0aaf;allOpenOrders[_0x3deb4d(0x2ca)]==0x0&&lockOrders==ORDERS[_0x3deb4d(0x20e)]&&allOrdersPlaced&&(_0x3d5ecf==0x0?(logger[_0x3deb4d(0x238)](_0x3deb4d(0x2a7)),_0x3d5ecf++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3deb4d(0x238)](_0x3deb4d(0x1e8)),validateOrders(_0x3deb4d(0x1f5))));}function _0x21d4(){const _0x5b5662=['balancing\x20resumes\x20when\x20cooldown\x20ends','lowdb/adapters/FileSync','send','eur','starting-balance-','AuthenticationError','2.5.0','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','apiSecret','max','distribution','closed','keys','emitHistory','balances','Order\x20filled:\x20','recreate','value','./version.json','/output-000.log','fetchBalance','round','net-fiat','cancelOrders()','performance','starting-balances','hybrid-crypto-js','UNLOCKING','\x20hour','/EUR','running','Market','toFixed','map','data','1\x20-\x20Validate\x20orders:\x20','search','toString','loading-canceled','\x20exchange','settings','<pre>','UNLOCKED','Bot\x20','fee','type','Order(s)\x20validated\x20-\x20','cooldown','ETH','customId','recreateCoinResults()','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','coin','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','valid','-config.json','milliseconds','limits','ordertype','InvalidNonce','ongoing','recovery','API-key\x20format\x20invalid','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','reverse','util','toUpperCase','toLowerCase','date','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','limit-high','ExchangeNotAvailable','delta','stringify','openOrders','timeshift','defaults','Manual\x20balancing\x20required','abs','initclient','concat','lowdb',',\x20must\x20be\x20a\x203\x20digit\x20number','excluded','ccxt','restart','getHours','createWriteStream','breakeven','warning','BTC','3\x20-\x20handling\x20FILLED\x20order:\x20','InsufficientFunds','1\x20-\x20Handle\x20open\x20orders','sendPortfolioTelegram','.json','2.3.5','Error:\x20Invalid\x20argument\x20','getCoins()','fees','\x20orders\x20in\x20less\x20than\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','netoffset','buy','cancelOrder','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','join','fetchTicker','final','time','./config/','getDate','usd','Unfilled\x20order(s)\x20canceled\x20after\x20','buys','1014165AUGfkE','Order(s)\x20not\x20validated\x20after\x20','price','findIndex','percentage','shift','</pre>','BNB/','test','event-history','bot','orderId','getMinutes','length','market','splice','padStart','sells','headless','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fetchOpenOrders','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20change','event','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','emojibuy','cancelLoading','watchOrders','exchange','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','leftTxt','last','(((.+)+)+)+$','\x20:\x20','placeOrder()','format','includes','startprice','entries','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','string','USD','write','filled','assign','fiat','161608bASQmS','fetchTickers','set','indexOf','Failed\x20to\x20load\x20coin\x20data\x20for\x20','loadMarkets','sort','getPortfolio','getTime','push','startdate','constructor','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fromCodePoint','storeConfiguration','message','Cooldown\x20ended\x20-\x20balancing\x20resumed','initial','enabled','remainingSymbols','Limit\x20(low-margin)','No\x20more\x20open\x20orders\x20-\x20','symbol','EUR','clientOrderId','\x20portfolio:</b>\x20\x0a\x0a','MIN_NOTIONAL','limit','progress','ORDERS.UNLOCKING','\x20>\x20[DEBUG]\x20','XEM/BUSD','loadSymbols()','mkdirSync','currency','-events.json','45405BZCbDG','\x20|\x20lock\x20orders:\x20','getSeconds','apiKey','20272Mfhnqm','average','secure','logs','***','2.6.0','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','************','total','args','trade','Net\x20effect','Limit\x20(high-margin)','bot-','liquidity','\x20value','watchTrades','existsSync','2\x20-\x20Orders\x20unlocked','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','full','find','none','rightTxt','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','sell','number','Order(s)\x20filled\x20-\x20','realized','threshold','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','get','yyyy-MM-dd\x27T\x27HH:mm:ss','slice','order','storeHeadless','\x20API\x20key\x20is\x20invalid','portfolio','yyyy/MM/dd','HOT/BTC','replace','exchanges','OrderNotFound','decrypt','Unknown\x20error\x20occured','ask','botname','BNB','coin-loading-progress','sortBy','cloneDeep','2\x20-\x20Handled\x20open\x20orders','Crypt','597282FoFVjh','NANO/','change','net-basecoin','788540bEfvIu','freeze','DAI/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','configuration','orderstatus','split','no\x20open\x20orders','timeout','filter','\x20not\x20available','ORDERS.UNLOCKED','changes','RequestTimeout','amount','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','deleteHistoryAlerts','cost','\x20|\x20','getFullYear','568aSrgvT','Order\x20amount\x20is\x20invalid:\x20','target','argv','getMonth','\x20|\x20Error\x20details:\x20','basecoin','date-fns','\x20>\x20','25wzJiox','685050cyrhZk','log','LOCKED','function','error','2\x20-\x20FILLED\x20unknown\x20order:\x20','HOT/EUR','getStartingBalances','startnumber','ticker','forEach','USDT','\x20minutes\x20-\x20','001','substring','%\x20\x0a','cancel','emojisell','BUSD','fetchClosedOrders','coins','balancing\x20resumed','remove','canceled','-------------------------------\x0a','add','success','open','2\x20-\x20Validate\x20orders:\x20','\x20order:\x20','min','\x20-\x20bot\x20not\x20started','showConfig','\x20API\x20secret\x20is\x20invalid','has','apply','status','exec','<b>','timer:','botID','14OagPiD','datetime','Pausing\x20for\x20','debug','differenceInSeconds','toggleBotMode','\x20has\x20a\x2024h\x20drop\x20of\x20','DDoSProtection','timestamp','showname','Net\x20effect\x20(','parse','bb-settings.json','getCoinNumber()','side','version','privateKey','change24h','getOpenOrders()','offset','getFiat()'];_0x21d4=function(){return _0x5b5662;};return _0x21d4();}async function getPortfolio(_0x65be4f){const _0x381154=_0x3d0aaf;let _0x4cb7ce=[],_0x1a91fc=[],_0x3803fb,_0x523f7b=[],_0x53f88c=![];if(_0x65be4f[_0x381154(0x312)]===_0x381154(0x31a)||_0x65be4f[_0x381154(0x252)]===_0x381154(0x31a))_0x53f88c=!![];else{await initExchange(_0x65be4f['exchange'],_0x65be4f[_0x381154(0x312)],_0x65be4f[_0x381154(0x252)]);try{_0x53f88c=await loadSymbols();}catch(_0x36a5a3){_0x53f88c=![],handleErrorNoStop(_0x36a5a3,_0x381154(0x30b));}}if(_0x53f88c){_0x523f7b=await getCoins(![],![],_0x65be4f[_0x381154(0x208)]);if(_0x523f7b===![])proxyEmit(_0x381154(0x1da),![]);else{if(_0x65be4f[_0x381154(0x208)]=='')proxyEmit('portfolio',_0x523f7b);else{_0x523f7b['forEach'](_0x132455=>{const _0x566150=_0x381154;if(_0x132455['coin']!=_0x65be4f[_0x566150(0x208)])_0x4cb7ce[_0x566150(0x2f4)](_0x132455[_0x566150(0x301)]);});try{_0x1a91fc=await exchange[_0x381154(0x2ec)](_0x4cb7ce);}catch(_0x1d59a5){await handleError(_0x1d59a5,'getPortfolio()');}_0x523f7b[_0x381154(0x216)](_0xc8a538=>{const _0x200b71=_0x381154;_0xc8a538[_0x200b71(0x27e)]!=_0x65be4f[_0x200b71(0x208)]?_0x3803fb=_0xc8a538['reverse']?0x1/_0x1a91fc[_0xc8a538[_0x200b71(0x301)]][_0x200b71(0x2dc)]:_0x1a91fc[_0xc8a538[_0x200b71(0x301)]][_0x200b71(0x2dc)]:_0x3803fb=0x1,_0xc8a538[_0x200b71(0x2bf)]=formatResult(_0x3803fb,0x8);}),proxyEmit('portfolio',_0x523f7b);}}}else proxyEmit(_0x381154(0x1da),![]);}function checkMinimums(_0x10c9d1){const _0x406419=_0x3d0aaf;let _0x5c2cff=!![];const _0x75a81=!_0x10c9d1[_0x406419(0x28a)]?markets[_0x10c9d1[_0x406419(0x301)]]['limits'][_0x406419(0x1fc)]['min']:markets[_0x10c9d1[_0x406419(0x301)]][_0x406419(0x283)][_0x406419(0x1ff)]['min'],_0x2487fe=!_0x10c9d1[_0x406419(0x28a)]?markets[_0x10c9d1[_0x406419(0x301)]][_0x406419(0x283)]['cost'][_0x406419(0x22a)]:markets[_0x10c9d1[_0x406419(0x301)]]['limits'][_0x406419(0x1fc)][_0x406419(0x22a)],_0x4584a7=markets[_0x10c9d1['symbol']]['precision']['amount'];_0x10c9d1['trade']=formatResultTruncate(_0x10c9d1[_0x406419(0x31d)],_0x4584a7);if(Math[_0x406419(0x298)](_0x10c9d1[_0x406419(0x31d)])<_0x75a81)_0x5c2cff=![];if(Math[_0x406419(0x298)](_0x10c9d1[_0x406419(0x31d)])*_0x10c9d1[_0x406419(0x2dc)]<_0x2487fe)_0x5c2cff=![];if(_0x10c9d1['side']==_0x406419(0x32c)){let _0x18c318=config[_0x406419(0x1da)]['find'](_0x58cfad=>_0x58cfad['coin']==_0x10c9d1[_0x406419(0x27e)]);if(_0x18c318[_0x406419(0x248)]>0x0){if(Math['abs'](_0x10c9d1[_0x406419(0x31d)])>_0x10c9d1[_0x406419(0x32d)]-_0x18c318[_0x406419(0x248)])_0x5c2cff=![];}else{if(Math['abs'](_0x10c9d1[_0x406419(0x31d)])>_0x10c9d1[_0x406419(0x32d)])_0x5c2cff=![];}}if(_0x10c9d1['side']==_0x406419(0x2b1)){let _0x142c35=config[_0x406419(0x1da)]['find'](_0x2248be=>_0x2248be['coin']==config['basecoin']),_0x192b7f=currentCoins[_0x406419(0x328)](_0x41a20f=>_0x41a20f[_0x406419(0x27e)]==config[_0x406419(0x208)]);if(_0x142c35[_0x406419(0x248)]>0x0){if(Math[_0x406419(0x298)](_0x10c9d1['trade'])*_0x10c9d1[_0x406419(0x2dc)]>_0x192b7f['number']-_0x142c35[_0x406419(0x248)])_0x5c2cff=![];}else{if(Math['abs'](_0x10c9d1[_0x406419(0x31d)])*_0x10c9d1[_0x406419(0x2dc)]>_0x192b7f[_0x406419(0x32d)])_0x5c2cff=![];}}return _0x5c2cff;}async function getBalances(){const _0x5c2542=_0x3d0aaf;let _0x342730=0x0,_0x39bb00;const _0x614fc1=config[_0x5c2542(0x330)];if(config[_0x5c2542(0x2cf)]&&config[_0x5c2542(0x246)]<0x0)await validate24hChanges();currentCoins[_0x5c2542(0x216)](_0x501e54=>{const _0x20d6f9=_0x5c2542;if(_0x501e54['coin']!=config[_0x20d6f9(0x208)]){let _0xa2ce54=global[_0x20d6f9(0x215)][noslash(_0x501e54['symbol'])];_0x39bb00=_0x501e54[_0x20d6f9(0x28a)]?0x1/_0xa2ce54:_0xa2ce54;}else _0x39bb00=0x1;let _0x3b5797=_0x501e54['number']*_0x39bb00;_0x342730+=_0x3b5797,_0x501e54['last']=formatResult(Number(_0x39bb00),0x8),_0x501e54['value']=_0x3b5797;}),currentCoins[_0x5c2542(0x216)](_0x599223=>{const _0x5af28b=_0x5c2542;let _0x251904=config[_0x5af28b(0x1da)]['find'](_0x19c5e2=>_0x19c5e2[_0x5af28b(0x27e)]==_0x599223['coin']),_0x538c31=Number(_0x251904[_0x5af28b(0x254)]),_0xc3e2ff=_0x599223[_0x5af28b(0x25b)]/_0x342730*0x64,_0x45f46d=_0x538c31*_0x342730/0x64/_0x599223[_0x5af28b(0x2dc)]-_0x599223[_0x5af28b(0x32d)];_0x599223['distribution']=formatResult(_0xc3e2ff,0x3),_0x599223[_0x5af28b(0x204)]=formatResult(_0x538c31,0x3),_0x599223[_0x5af28b(0x31d)]=formatResult(_0x45f46d,0x8),_0x599223[_0x5af28b(0x243)]='',_0x599223[_0x5af28b(0x280)]=![];if(_0x599223[_0x5af28b(0x27e)]!=config[_0x5af28b(0x208)]){if(_0x599223[_0x5af28b(0x254)]>_0x538c31)_0x599223[_0x5af28b(0x243)]=_0x5af28b(0x32c),_0x599223['valid']=checkMinimums(_0x599223);else _0x599223['distribution']<_0x538c31&&(_0x599223[_0x5af28b(0x243)]=_0x5af28b(0x2b1),_0x599223[_0x5af28b(0x280)]=checkMinimums(_0x599223));}_0x599223[_0x5af28b(0x292)]=_0x599223[_0x5af28b(0x254)]/_0x599223[_0x5af28b(0x204)]-0x1;if(_0x599223[_0x5af28b(0x1f3)]==_0x5af28b(0x2e8)||_0x599223[_0x5af28b(0x1f3)]=='canceled')_0x599223[_0x5af28b(0x1f3)]='none';}),currentCoins['sort']((_0x308f97,_0xf61827)=>_0x308f97[_0x5c2542(0x292)]<_0xf61827['delta']?0x1:_0xf61827[_0x5c2542(0x292)]<_0x308f97['delta']?-0x1:0x0);const _0x3c35cc=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3c35cc[_0x5c2542(0x24d)],'usd':_0x3c35cc[_0x5c2542(0x2ba)],'portfolio':JSON[_0x5c2542(0x293)](currentCoins),'threshold':_0x614fc1},proxyEmit(_0x5c2542(0x258),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5c2542(0x2cf)])headlessMode({'portfolio':currentCoins,'threshold':_0x614fc1});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x614fc1});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x33b146=_0x3d0aaf;if(!lastBalances)return;let _0x25560b=[],_0x2a4c28,_0x22c5ee=JSON[_0x33b146(0x240)](lastBalances[_0x33b146(0x1da)]);_0x22c5ee[_0x33b146(0x2f1)]((_0x2e4733,_0x2ad5eb)=>_0x2e4733[_0x33b146(0x27e)]>_0x2ad5eb[_0x33b146(0x27e)]?0x1:_0x2ad5eb[_0x33b146(0x27e)]>_0x2e4733[_0x33b146(0x27e)]?-0x1:0x0),_0x22c5ee[_0x33b146(0x216)](_0x36a7a6=>{const _0x4dbc26=_0x33b146;let _0x14accb={'coin':_0x36a7a6['coin'],'number':_0x36a7a6[_0x4dbc26(0x32d)],'price':_0x36a7a6['last']};_0x25560b[_0x4dbc26(0x2f4)](_0x14accb);});const _0x1d0998=await getFiat();_0x2a4c28={'date':lastBalances[_0x33b146(0x2b7)][_0x33b146(0x1f4)]('\x20')[0x0],'eur':_0x1d0998[_0x33b146(0x24d)],'usd':_0x1d0998[_0x33b146(0x2ba)],'coins':_0x25560b};let _0x28dbbf=dbPerformance[_0x33b146(0x332)](_0x33b146(0x26c))[_0x33b146(0x328)]({'date':_0x2a4c28[_0x33b146(0x28e)]})[_0x33b146(0x25b)]();_0x28dbbf?_0x2a4c28[_0x33b146(0x28e)]!=config['startdate']&&dbPerformance['get'](_0x33b146(0x26c))['find']({'date':_0x2a4c28[_0x33b146(0x28e)]})['assign'](_0x2a4c28)['write']():dbPerformance[_0x33b146(0x332)](_0x33b146(0x26c))['push'](_0x2a4c28)[_0x33b146(0x2e7)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xf9755e=_0x3d0aaf;let _0x126b75=[];if(dbPerformance[_0xf9755e(0x22e)](_0xf9755e(0x26c))[_0xf9755e(0x25b)]()){let _0x44ec81=dbPerformance[_0xf9755e(0x332)](_0xf9755e(0x26c))[_0xf9755e(0x1e7)]()[_0xf9755e(0x1e6)](_0xf9755e(0x28e))[_0xf9755e(0x25b)](),_0x4c8824=[...config[_0xf9755e(0x321)]];_0x4c8824[_0xf9755e(0x2f1)]((_0x486310,_0x8a0abc)=>_0x486310['date']>_0x8a0abc[_0xf9755e(0x28e)]?-0x1:_0x8a0abc['date']>_0x486310[_0xf9755e(0x28e)]?0x1:0x0);let _0x2c4786=0x1,_0x1645c6=[],_0x1d6104=0x0;_0x44ec81[_0xf9755e(0x1d6)]()[_0xf9755e(0x28a)]()['forEach']((_0xc8d4b8,_0x3d6271)=>{const _0xdd8db7=_0xf9755e;if(_0x4c8824[_0x1d6104]){if(_0x44ec81[_0x44ec81[_0xdd8db7(0x2ca)]-_0x3d6271]&&_0x4c8824[_0x1d6104][_0xdd8db7(0x28e)]==_0x44ec81[_0x44ec81['length']-_0x3d6271][_0xdd8db7(0x28e)]){if(_0x3d6271<_0x44ec81['length']){let _0x15e950=0x0,_0x2e4880=0x0;_0x44ec81[_0x44ec81[_0xdd8db7(0x2ca)]-_0x3d6271][_0xdd8db7(0x220)][_0xdd8db7(0x216)](_0x39949b=>{const _0x5d3cd0=_0xdd8db7;_0x2e4880+=_0x39949b[_0x5d3cd0(0x32d)]*_0x39949b[_0x5d3cd0(0x2bf)];}),_0x4c8824[_0x1d6104][_0xdd8db7(0x1fa)][_0xdd8db7(0x216)](_0x3e139e=>{const _0x89996b=_0xdd8db7;_0x15e950+=_0x3e139e[_0x89996b(0x32d)]*_0x3e139e['price'];}),_0x2c4786*=_0x15e950/(_0x2e4880-_0x15e950)+0x1;}_0x1d6104++;}}let _0x2eceea=0x0;_0xc8d4b8[_0xdd8db7(0x220)][_0xdd8db7(0x216)](_0x2b43a8=>{const _0x219f5e=_0xdd8db7;_0x2eceea+=_0x2b43a8['number']*_0x2b43a8[_0x219f5e(0x2bf)];}),_0x1645c6[_0x44ec81['length']-_0x3d6271-0x1]=_0x2eceea*(_0x2c4786-0x1);});let _0x35cef6=[];_0x4c8824=[...config[_0xf9755e(0x321)]]||[];let _0x357f12=0x0;_0x1d6104=0x0,_0x44ec81[_0xf9755e(0x216)]((_0x17132b,_0x3ca3c2)=>{const _0x3cf461=_0xf9755e;if(_0x4c8824[_0x1d6104]){const _0x3f7903=fns['parse'](_0x4c8824[_0x1d6104][_0x3cf461(0x28e)],_0x3cf461(0x1db),new Date()),_0x1397be=fns[_0x3cf461(0x240)](_0x17132b[_0x3cf461(0x28e)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x3f7903,_0x1397be)){let _0x1e213d=0x0;_0x4c8824[_0x1d6104][_0x3cf461(0x1fa)]['forEach'](_0x399d0f=>{const _0x3f41f0=_0x3cf461;!_0x35cef6[_0x399d0f['coin']]?_0x35cef6[_0x399d0f[_0x3f41f0(0x27e)]]=_0x399d0f[_0x3f41f0(0x32d)]:(_0x1e213d=_0x35cef6[_0x399d0f[_0x3f41f0(0x27e)]],_0x35cef6[_0x399d0f[_0x3f41f0(0x27e)]]+=_0x399d0f['number']);const _0x32b70a=_0x17132b[_0x3f41f0(0x220)]['find'](_0xb4569b=>_0xb4569b[_0x3f41f0(0x27e)]==_0x399d0f[_0x3f41f0(0x27e)]);(!_0x32b70a||_0x32b70a['number']==0x0)&&(_0x357f12+=(-_0x399d0f[_0x3f41f0(0x32d)]-_0x1e213d)*_0x399d0f[_0x3f41f0(0x2bf)]);}),_0x1d6104++;}}_0x17132b['coins'][_0x3cf461(0x216)]((_0x3a19ea,_0x20f36e)=>{const _0x496f32=_0x3cf461;_0x35cef6[_0x3a19ea[_0x496f32(0x27e)]]&&(_0x3a19ea={..._0x3a19ea,'initial':_0x35cef6[_0x3a19ea[_0x496f32(0x27e)]]}),_0x17132b[_0x496f32(0x220)][_0x20f36e]=_0x3a19ea;}),_0x126b75[_0x3cf461(0x2f4)]({'date':_0x17132b[_0x3cf461(0x28e)],'eur':_0x17132b[_0x3cf461(0x24d)],'usd':_0x17132b[_0x3cf461(0x2ba)],'offset':_0x1645c6[_0x3ca3c2],'netoffset':_0x357f12,'coins':_0x17132b['coins']});});}return _0x126b75;}function _0x2a29(_0x297d20,_0x69c4d5){const _0x424685=_0x21d4();return _0x2a29=function(_0x21a147,_0x4ef7c1){_0x21a147=_0x21a147-0x1d6;let _0x21d413=_0x424685[_0x21a147];return _0x21d413;},_0x2a29(_0x297d20,_0x69c4d5);}function emitPerformance(_0x14c1cd){const _0x454a19=_0x3d0aaf;_0x14c1cd['length']!==0x0?(proxyEmit(_0x454a19(0x262),_0x14c1cd),lastPerformanceEmitted=getDate()):proxyEmit(_0x454a19(0x262),[]);}function getPerf(_0x5097cb,_0x5a6a80){const _0x20bdd5=_0x3d0aaf;let _0x1cebe4=0x0,_0x560e43=0x0,_0x162cb4=0x0;_0x5097cb[_0x20bdd5(0x220)][_0x20bdd5(0x216)](_0x495015=>{const _0x51a870=_0x20bdd5;_0x1cebe4+=_0x495015[_0x51a870(0x32d)]*_0x495015[_0x51a870(0x2bf)];});_0x5a6a80&&(_0x1cebe4+=_0x5097cb['offset']);if(config['basecoin']===_0x20bdd5(0x2a4)||config[_0x20bdd5(0x208)]===_0x20bdd5(0x27a))_0x560e43=_0x1cebe4*_0x5097cb[_0x20bdd5(0x24d)],_0x162cb4=_0x1cebe4*_0x5097cb[_0x20bdd5(0x2ba)];else{if(config['basecoin']===_0x20bdd5(0x21e)||config[_0x20bdd5(0x208)]===_0x20bdd5(0x217)||config[_0x20bdd5(0x208)]===_0x20bdd5(0x2e6))_0x560e43=_0x1cebe4*_0x5097cb['eur']/_0x5097cb[_0x20bdd5(0x2ba)],_0x162cb4=_0x1cebe4;else config['basecoin']===_0x20bdd5(0x302)&&(_0x560e43=_0x1cebe4,_0x162cb4=_0x1cebe4*_0x5097cb[_0x20bdd5(0x2ba)]/_0x5097cb[_0x20bdd5(0x24d)]);}return[_0x1cebe4,_0x560e43,_0x162cb4];}function getKPIs(_0x11ba17,_0x33c3f2='EUR'){const _0x662431=_0x3d0aaf,_0x42ba3f=config[_0x662431(0x208)],_0x3675a5=config[_0x662431(0x258)],_0x2827ac=currentCoins,_0x36fc70=getNormalizedPerformance(),_0x2e3ada=_0x11ba17===_0x662431(0x208)?_0x42ba3f:_0x11ba17==='fiat'||_0x11ba17===_0x662431(0x260)?_0x33c3f2:'Net\x20'+_0x42ba3f,_0xc5270d=_0x11ba17===_0x662431(0x1ed)?'Net\x20effect':_0x11ba17===_0x662431(0x260)?_0x662431(0x23f)+_0x2e3ada+')':_0x2e3ada+_0x662431(0x322),_0x2d2c74=_0x11ba17===_0x662431(0x1ed)||_0x11ba17===_0x662431(0x260)?_0x662431(0x31e):_0x2e3ada+_0x662431(0x2d3);let _0x24e286=0x0;_0x2827ac['forEach'](_0x51eb30=>{const _0x6d0441=_0x662431;_0x24e286+=_0x51eb30['number']*_0x51eb30[_0x6d0441(0x2dc)];});if(_0x11ba17===_0x662431(0x2ea)||_0x11ba17===_0x662431(0x260)){if(_0x42ba3f===_0x662431(0x2a4)||_0x42ba3f==='ETH')_0x24e286=_0x24e286*(_0x33c3f2==='EUR'?_0x3675a5[_0x662431(0x24d)]:_0x3675a5[_0x662431(0x2ba)]);else{if(_0x42ba3f===_0x662431(0x21e)||_0x42ba3f===_0x662431(0x217)||_0x42ba3f===_0x662431(0x2e6))_0x24e286=_0x24e286*(_0x33c3f2===_0x662431(0x302)?_0x3675a5['eur']/_0x3675a5['usd']:0x1);else _0x42ba3f==='EUR'&&(_0x24e286=_0x24e286*(_0x33c3f2===_0x662431(0x302)?0x1:_0x3675a5[_0x662431(0x2ba)]/_0x3675a5['eur']));}}let _0xdfe25a;if(_0x24e286!==0x0){if(_0x11ba17===_0x662431(0x208))_0xdfe25a=(_0x24e286/startingBalances[_0x662431(0x208)]-0x1)*0x64;else{if(_0x33c3f2===_0x662431(0x302))_0xdfe25a=(_0x24e286/startingBalances[_0x662431(0x24d)]-0x1)*0x64;else _0xdfe25a=(_0x24e286/startingBalances['usd']-0x1)*0x64;}let _0x202249=0x0;if(startingBalances['coins'])_0x2827ac[_0x662431(0x216)](_0x46a73f=>{const _0x5af505=_0x662431;let _0x2132e3=startingBalances[_0x5af505(0x220)][_0x5af505(0x328)](_0x4e563b=>_0x4e563b[_0x5af505(0x27e)]===_0x46a73f[_0x5af505(0x27e)]);if(_0x2132e3&&_0x2132e3[_0x5af505(0x27e)]&&_0x46a73f[_0x5af505(0x32d)]!==0x0)_0x202249+=_0x2132e3[_0x5af505(0x32d)]*_0x46a73f[_0x5af505(0x2dc)];});let _0x3017f6=0x0;if(_0x36fc70[_0x662431(0x2ca)]!==0x0){let _0x556d5a=_0x36fc70[_0x36fc70['length']-0x1];_0x3017f6=_0x556d5a[_0x662431(0x2b0)];}_0x202249-=_0x3017f6;_0x11ba17===_0x662431(0x1ed)&&(_0xdfe25a=(_0x24e286-_0x202249)/startingBalances[_0x662431(0x208)]*0x64,_0x24e286=_0x24e286-_0x202249);if(_0x11ba17===_0x662431(0x260)){let _0x4bb4af=_0x33c3f2==='EUR'?startingBalances['eur']:startingBalances[_0x662431(0x2ba)];if(_0x42ba3f===_0x662431(0x2a4)||_0x42ba3f===_0x662431(0x27a))_0x202249=_0x33c3f2===_0x662431(0x302)?_0x202249*_0x3675a5[_0x662431(0x24d)]:_0x202249*_0x3675a5[_0x662431(0x2ba)];else{if(_0x42ba3f==='BUSD'||_0x42ba3f===_0x662431(0x217)||_0x42ba3f==='USD')_0x202249=_0x33c3f2===_0x662431(0x302)?_0x202249*_0x3675a5['eur']/_0x3675a5[_0x662431(0x2ba)]:_0x202249;else _0x42ba3f===_0x662431(0x302)&&(_0x202249=_0x33c3f2===_0x662431(0x302)?_0x202249:_0x202249*_0x3675a5[_0x662431(0x2ba)]/_0x3675a5['eur']);}_0xdfe25a=(_0x24e286-_0x202249)/_0x4bb4af*0x64,_0x24e286=_0x24e286-_0x202249;}if(_0xdfe25a){if(_0xdfe25a<0x64)_0xdfe25a=_0xdfe25a[_0x662431(0x26a)](0x2);else{if(_0xdfe25a<0x3e8)_0xdfe25a=_0xdfe25a[_0x662431(0x26a)](0x1);else _0xdfe25a=_0xdfe25a[_0x662431(0x26a)](0x0);}}else _0xdfe25a=Number('0')['toFixed'](0x2);if(_0x24e286){if(Math[_0x662431(0x298)](_0x24e286)<0.000001)_0x24e286=_0x24e286['toFixed'](0x2);else{if(Math[_0x662431(0x298)](_0x24e286)<0.1)_0x24e286=_0x24e286['toFixed'](0x6);else{if(Math['abs'](_0x24e286)<0x1)_0x24e286=_0x24e286[_0x662431(0x26a)](0x5);else{if(Math[_0x662431(0x298)](_0x24e286)<0xa)_0x24e286=_0x24e286[_0x662431(0x26a)](0x4);else{if(Math[_0x662431(0x298)](_0x24e286)<0x64)_0x24e286=_0x24e286[_0x662431(0x26a)](0x3);else{if(Math[_0x662431(0x298)](_0x24e286)<0x3e8)_0x24e286=_0x24e286[_0x662431(0x26a)](0x2);else _0x24e286=_0x24e286['toFixed'](0x2);}}}}}}else _0x24e286=Number('0')[_0x662431(0x26a)](0x2);}else _0xdfe25a=Number('0')[_0x662431(0x26a)](0x2);return{'value':_0x24e286,'change':_0xdfe25a,'leftTxt':_0xc5270d,'rightTxt':_0x2d2c74};}async function getStartingBalances(_0x56fbff,_0x172938=!![]){const _0x3a6b4a=_0x3d0aaf;if(_0x56fbff['length']!==0x0){const [_0x1d58d7,_0x231404,_0x591c1d]=getPerf(_0x56fbff[0x0],!![]);let _0x54331d=[];config['portfolio']['forEach'](_0x5c24f5=>{const _0x43c0b1=_0x2a29;let _0x724d6a=0x0,_0x596c63;config[_0x43c0b1(0x321)]['forEach'](_0xf0e09a=>{const _0x177ed1=_0x43c0b1;let _0x9995dc=_0xf0e09a['changes'][_0x177ed1(0x328)](_0x1b4b02=>_0x1b4b02['coin']==_0x5c24f5[_0x177ed1(0x27e)]);if(_0x9995dc){_0x724d6a+=_0x9995dc[_0x177ed1(0x32d)];if(!_0x596c63)_0x596c63=_0x9995dc[_0x177ed1(0x2bf)];}}),_0x54331d[_0x43c0b1(0x2f4)]({'coin':_0x5c24f5[_0x43c0b1(0x27e)],'number':_0x724d6a,'initialprice':_0x596c63});});const _0x5c75d9={'basecoin':_0x1d58d7,'eur':_0x231404,'usd':_0x591c1d,'coins':_0x54331d};if(_0x172938)proxyEmit(_0x3a6b4a(0x263),_0x5c75d9);startingBalances=_0x5c75d9;}}function headlessMode(_0x39ff71){const _0x2f4ded=_0x3d0aaf;let _0x2e48b8=_0x39ff71['portfolio'],_0x11284f=_0x39ff71['threshold'],_0x20086d=[];for(let _0x23027b of _0x2e48b8){if(_0x23027b[_0x2f4ded(0x27e)]!=config[_0x2f4ded(0x208)]){if(_0x23027b[_0x2f4ded(0x292)]>=_0x11284f/0x64){if(_0x23027b['valid'])_0x20086d[_0x2f4ded(0x2f4)](_0x23027b);}else{if(_0x23027b[_0x2f4ded(0x292)]<=-_0x11284f/0x64){if(_0x23027b[_0x2f4ded(0x280)])_0x20086d['push'](_0x23027b);}}}}_0x20086d[_0x2f4ded(0x2ca)]>0x0&&placeOrder(_0x20086d);}function notifyBalance(_0x425b72){const _0x2b2b8c=_0x3d0aaf;let _0x5b4343=_0x425b72['portfolio'],_0x1a3a63=_0x425b72[_0x2b2b8c(0x330)],_0x17bb48=[];for(let _0x55588d of _0x5b4343){if(_0x55588d['coin']!=config[_0x2b2b8c(0x208)]){if(_0x55588d[_0x2b2b8c(0x292)]>=_0x1a3a63/0x64){if(_0x55588d['valid'])_0x17bb48['push'](_0x55588d);}else{if(_0x55588d['delta']<=-_0x1a3a63/0x64){if(_0x55588d[_0x2b2b8c(0x280)])_0x17bb48['push'](_0x55588d);}}}}if(_0x17bb48[_0x2b2b8c(0x2ca)]>0x0){let _0x297b00=_0x17bb48[_0x2b2b8c(0x26b)](_0x1c8714=>_0x1c8714[_0x2b2b8c(0x27e)]);_0x297b00[_0x2b2b8c(0x2f1)]();let _0x4bc356=_0x297b00['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2b2b8c(0x2a3),_0x2b2b8c(0x297));lastCoinsToBalance=_0x4bc356;}}function symbolToCoin(_0x2fdeb9){const _0x7de835=_0x3d0aaf;let _0x14c51f;if(_0x2fdeb9[_0x7de835(0x2e1)]('/'+config[_0x7de835(0x208)]))_0x14c51f=_0x2fdeb9[_0x7de835(0x1dd)]('/'+config[_0x7de835(0x208)],'');if(_0x2fdeb9[_0x7de835(0x2e1)](config[_0x7de835(0x208)]+'/'))_0x14c51f=_0x2fdeb9[_0x7de835(0x1dd)](config[_0x7de835(0x208)]+'/','');return _0x14c51f;}async function unlockOrders(){const _0x18022c=_0x3d0aaf;if(allOrdersPlaced&&lockOrders==ORDERS[_0x18022c(0x20e)]){logger[_0x18022c(0x238)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x18022c(0x265)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x18022c(0x2fc),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x18022c(0x325));}}async function validateOrders(_0x151de4){const _0x36f6f0=_0x3d0aaf;if(_0x151de4)validateOrdersState=_0x151de4;logger['debug'](_0x36f6f0(0x26d)+validateOrdersState+_0x36f6f0(0x310)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x36f6f0(0x308):_0x36f6f0(0x1f9)));let _0x25c36f=[],_0x42e324=config[_0x36f6f0(0x284)]==_0x36f6f0(0x2cb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x36f6f0(0x1f6)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x36f6f0(0x20e)])return;logger[_0x36f6f0(0x238)](_0x36f6f0(0x228)+validateOrdersState),lastOrders[_0x36f6f0(0x216)](_0x3b0c0a=>{const _0x3b9cfc=_0x36f6f0;let _0x3a9540=![];_0x3b0c0a[_0x3b9cfc(0x2e8)]>0x0&&(_0x3a9540=!![]),_0x25c36f[_0x3b9cfc(0x2f4)](_0x3a9540),_0x3a9540&&config[_0x3b9cfc(0x284)]!=_0x3b9cfc(0x2cb)&&logHistory('order',_0x3b9cfc(0x259)+_0x3b0c0a[_0x3b9cfc(0x301)]+'\x20'+_0x3b0c0a[_0x3b9cfc(0x243)]+'\x20#'+formatResult(_0x3b0c0a['filled'],0x8)+'\x20@'+formatResult(_0x3b0c0a[_0x3b9cfc(0x2bf)],0x8));}),_0x25c36f[_0x36f6f0(0x216)]((_0x57c726,_0x569fc2)=>{const _0x57c1f1=_0x36f6f0;if(_0x57c726)lastOrders[_0x57c1f1(0x2cc)](_0x569fc2,0x1);}),persistOpenOrders(lastOrders);const _0x17f222=coolingDown?_0x36f6f0(0x24a):_0x36f6f0(0x221);if(validateOrdersState==_0x36f6f0(0x2fc))validateOrdersState=_0x36f6f0(0x286),_0x25c36f[_0x36f6f0(0x2e1)](![])?config[_0x36f6f0(0x284)]=='market'?logHistory(_0x36f6f0(0x2a3),_0x36f6f0(0x1fd)):logHistory('warning','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x25c36f[_0x36f6f0(0x2e1)](![])){}else allOrdersPlaced&&(config['ordertype']==_0x36f6f0(0x2cb)?logHistory(_0x36f6f0(0x226),_0x36f6f0(0x278)+_0x17f222):logHistory(_0x36f6f0(0x226),_0x36f6f0(0x32e)+_0x17f222),await unlockOrders());}else{if(validateOrdersState==_0x36f6f0(0x2b6))_0x25c36f[_0x36f6f0(0x2e1)](![])&&(config[_0x36f6f0(0x284)]==_0x36f6f0(0x2cb)?logHistory('success',_0x36f6f0(0x2be)+Math[_0x36f6f0(0x25f)](_0x42e324*validateOrderInterval/0xea60)+_0x36f6f0(0x218)+_0x17f222):(await cancelOrders(),logHistory(_0x36f6f0(0x226),_0x36f6f0(0x2bb)+Math[_0x36f6f0(0x25f)](_0x42e324*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x17f222))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x36f6f0(0x284)]!=_0x36f6f0(0x2cb))logHistory(_0x36f6f0(0x226),_0x36f6f0(0x300)+_0x17f222);await unlockOrders();}}}}}async function cancelOrders(){const _0x1b0800=_0x3d0aaf;lastOrders[_0x1b0800(0x216)](async _0x541e68=>{const _0x18a970=_0x1b0800;try{const _0x491e6b=await exchange['cancelOrder'](_0x541e68['orderId'],_0x541e68['symbol']);}catch(_0x4108ef){if(_0x4108ef['toString']()['includes'](_0x18a970(0x1df))){}else await handleError(_0x4108ef,_0x18a970(0x261));}});}async function initCoinResults(){const _0x2975d7=_0x3d0aaf;let _0x3b29a8=[];config[_0x2975d7(0x1da)]['forEach'](_0x409e17=>{const _0x1d6cc2=_0x2975d7;if(!_0x409e17[_0x1d6cc2(0x29d)]&&_0x409e17[_0x1d6cc2(0x27e)]!=config[_0x1d6cc2(0x208)]){let _0x1420a7=dbCoinResults['get'](_0x1d6cc2(0x220))[_0x1d6cc2(0x328)]({'coin':_0x409e17[_0x1d6cc2(0x27e)]})[_0x1d6cc2(0x25b)]();if(!_0x1420a7){const _0x11e014=currentCoins['find'](_0x2a3a86=>_0x2a3a86['coin']==_0x409e17[_0x1d6cc2(0x27e)]),_0x1a363b=global[_0x1d6cc2(0x215)][noslash(_0x409e17[_0x1d6cc2(0x301)])];let _0x49a595=_0x11e014?_0x11e014[_0x1d6cc2(0x32d)]:null,_0x4df5c3=_0x409e17[_0x1d6cc2(0x28a)]?0x1/_0x1a363b:_0x1a363b,_0x5b6f9c;config[_0x1d6cc2(0x321)][_0x1d6cc2(0x216)](_0x58020f=>{const _0x3804d8=_0x1d6cc2;!_0x5b6f9c&&(_0x5b6f9c=_0x58020f['changes'][_0x3804d8(0x328)](_0x43f89a=>_0x43f89a['coin']==_0x409e17[_0x3804d8(0x27e)]),_0x5b6f9c&&(_0x49a595=_0x5b6f9c[_0x3804d8(0x32d)],_0x4df5c3=_0x5b6f9c[_0x3804d8(0x2bf)]));}),_0x3b29a8[_0x1d6cc2(0x2f4)]({'coin':_0x409e17[_0x1d6cc2(0x27e)],'number':_0x49a595,'price':_0x4df5c3});}}}),_0x3b29a8[_0x2975d7(0x216)](_0x4bace5=>{const _0x179af3=_0x2975d7,_0x95a270={'coin':_0x4bace5[_0x179af3(0x27e)],'number':_0x4bace5[_0x179af3(0x32d)],'breakeven':_0x4bace5[_0x179af3(0x2bf)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x179af3(0x220))['push'](_0x95a270)[_0x179af3(0x2e7)]();});}async function updateCoinResults(_0x421ce6,_0x2183b4=![]){const _0xa09132=_0x3d0aaf;let _0x4458f7,_0x4794ce,_0x43675b,_0x55fe91,_0x3a1963,_0x106596,_0x210bdd=dbCoinResults[_0xa09132(0x332)](_0xa09132(0x220))[_0xa09132(0x328)]({'coin':_0x421ce6[_0xa09132(0x27e)]})[_0xa09132(0x25b)]();!_0x210bdd&&await initCoinResults();_0x421ce6[_0xa09132(0x28a)]&&(_0x106596={'filled':_0x421ce6[_0xa09132(0x2e8)]*_0x421ce6['price'],'amount':_0x421ce6[_0xa09132(0x2e8)]*_0x421ce6[_0xa09132(0x2bf)],'side':_0x421ce6[_0xa09132(0x243)]=='sell'?_0xa09132(0x2b1):'sell','price':0x1/_0x421ce6[_0xa09132(0x2bf)]},_0x421ce6={..._0x421ce6,..._0x106596});_0x2183b4?_0x4794ce=_0x421ce6[_0xa09132(0x243)]==_0xa09132(0x2b1)?_0x210bdd['number']+_0x421ce6[_0xa09132(0x2e8)]:_0x210bdd[_0xa09132(0x32d)]-_0x421ce6[_0xa09132(0x2e8)]:_0x4794ce=await getCoinNumber(_0x421ce6['coin']);if(_0x421ce6[_0xa09132(0x276)]&&_0x421ce6['fee'][_0xa09132(0x30d)]==config['basecoin'])_0x4458f7=_0x421ce6[_0xa09132(0x276)][_0xa09132(0x1ff)];else{if(_0x421ce6[_0xa09132(0x276)]&&_0x421ce6['fee'][_0xa09132(0x30d)]==_0xa09132(0x1e4)&&!_0x2183b4)_0x4458f7=_0x421ce6[_0xa09132(0x276)][_0xa09132(0x1ff)]*global[_0xa09132(0x215)][_0xa09132(0x1e4)+config['basecoin']];else _0x4458f7=defaultFee*_0x421ce6[_0xa09132(0x2e8)]*_0x421ce6['price'];}_0x421ce6['side']=='buy'?(_0x43675b=_0x4794ce!=0x0?(_0x210bdd[_0xa09132(0x2a2)]*_0x210bdd[_0xa09132(0x32d)]+_0x421ce6[_0xa09132(0x2bf)]*(_0x4794ce-_0x210bdd['number'])+_0x4458f7)/_0x4794ce:0x0,_0x55fe91=_0x210bdd[_0xa09132(0x32f)]):(_0x43675b=_0x4794ce!=0x0?(_0x210bdd[_0xa09132(0x2a2)]*_0x210bdd[_0xa09132(0x32d)]-_0x421ce6[_0xa09132(0x2bf)]*(_0x210bdd[_0xa09132(0x32d)]-_0x4794ce)+_0x4458f7)/_0x4794ce:0x0,_0x55fe91=_0x210bdd[_0xa09132(0x32f)]+(_0x421ce6[_0xa09132(0x2bf)]-_0x210bdd[_0xa09132(0x2a2)])*_0x421ce6[_0xa09132(0x2e8)]);_0x3a1963=(_0x421ce6['price']-_0x43675b-_0x4458f7/_0x421ce6['filled'])*_0x4794ce;let _0x588145={'coin':_0x421ce6[_0xa09132(0x27e)],'number':_0x4794ce,'breakeven':formatResult(_0x43675b,0x8),'realized':formatResult(_0x55fe91,0x8),'unrealized':formatResult(_0x3a1963,0x8),'fees':formatResult(_0x210bdd[_0xa09132(0x2ad)]+_0x4458f7,0x8),'sells':_0x421ce6[_0xa09132(0x243)]==_0xa09132(0x32c)?_0x210bdd[_0xa09132(0x2ce)]+0x1:_0x210bdd['sells'],'buys':_0x421ce6[_0xa09132(0x243)]==_0xa09132(0x2b1)?_0x210bdd['buys']+0x1:_0x210bdd[_0xa09132(0x2bc)]};dbCoinResults[_0xa09132(0x332)]('coins')[_0xa09132(0x328)]({'coin':_0x421ce6['coin']})['assign'](_0x588145)['write']();if(!_0x2183b4){if(_0x421ce6[_0xa09132(0x276)]&&_0x421ce6['fee'][_0xa09132(0x30d)]==_0xa09132(0x1e4)){const _0x365428=currentCoins[_0xa09132(0x328)](_0x3834f5=>_0x3834f5[_0xa09132(0x27e)]==_0xa09132(0x1e4));if(_0x365428){let _0x23cba4=dbCoinResults[_0xa09132(0x332)]('coins')[_0xa09132(0x328)]({'coin':_0xa09132(0x1e4)})[_0xa09132(0x25b)]();_0x588145={..._0x23cba4,'number':_0x365428[_0xa09132(0x32d)]},dbCoinResults[_0xa09132(0x332)](_0xa09132(0x220))[_0xa09132(0x328)]({'coin':'BNB'})[_0xa09132(0x2e9)](_0x588145)[_0xa09132(0x2e7)]();}}}}async function placeOrder(_0x428b2c){const _0x1df293=_0x3d0aaf,_0x8667ca=config[_0x1df293(0x284)]=='market'?_0x1df293(0x2cb):_0x1df293(0x306);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1df293(0x20e)],allOrdersPlaced=![],validateOrdersState=_0x1df293(0x2fc),lastOrders=[];for(const _0x145e33 of _0x428b2c){let _0x36257e,_0x5125e4,_0x2dc9d1,_0x35a49a,_0x28902d,_0x40bf92=_0x145e33[_0x1df293(0x301)];try{const _0x40fc5c=await exchange['fetchTicker'](_0x40bf92);_0x36257e=_0x145e33[_0x1df293(0x28a)]?0x1/_0x145e33['last']:_0x145e33[_0x1df293(0x2dc)],_0x5125e4=_0x40fc5c['bid'],_0x2dc9d1=_0x40fc5c[_0x1df293(0x1e2)];_0x145e33[_0x1df293(0x28a)]?(_0x35a49a=_0x145e33[_0x1df293(0x243)]==_0x1df293(0x2b1)?_0x1df293(0x32c):_0x1df293(0x2b1),_0x28902d=Math[_0x1df293(0x298)](_0x145e33['trade'])/_0x36257e):(_0x35a49a=_0x145e33['side'],_0x28902d=Math[_0x1df293(0x298)](_0x145e33[_0x1df293(0x31d)]));_0x8667ca=='limit'&&(config['ordertype']=='limit-high'&&(_0x36257e=_0x35a49a==_0x1df293(0x2b1)?_0x5125e4:_0x2dc9d1),config[_0x1df293(0x284)]=='limit-low'&&(_0x36257e=_0x35a49a=='buy'?_0x2dc9d1:_0x5125e4));_0x28902d=formatResult(_0x28902d,0x8),_0x36257e=formatResult(_0x36257e,0x8);const _0x6b952c=_0x35a49a==_0x1df293(0x32c)?config[_0x1df293(0x21d)]?String[_0x1df293(0x2f8)]('0x'+config[_0x1df293(0x21d)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x1df293(0x2d6)])+'\x20':'',_0x51db50=_0x8667ca==_0x1df293(0x2cb)?_0x1df293(0x269):config[_0x1df293(0x284)]==_0x1df293(0x290)?_0x1df293(0x31f):_0x1df293(0x2ff),_0x15f631=new Date()[_0x1df293(0x2f3)]()[_0x1df293(0x26f)]()[_0x1df293(0x1d6)](-0x6)+'-'+Math['random']()['toString']()['slice'](-0x6);lastOrders['push']({'customId':_0x15f631,'symbol':_0x40bf92,'coin':_0x145e33[_0x1df293(0x27e)],'side':_0x35a49a,'reverse':_0x145e33['reverse'],'filled':0x0});if(_0x8667ca==_0x1df293(0x2cb))logHistory(_0x1df293(0x1d7),''+_0x6b952c+_0x51db50+_0x1df293(0x229)+_0x40bf92+'\x20'+_0x35a49a+'\x20#'+formatResult(_0x28902d,0x8)+'\x20@'+formatResult(_0x36257e,0x8));else logHistory('order',''+_0x6b952c+_0x51db50+'\x20order:\x20'+_0x40bf92+'\x20'+_0x35a49a+'\x20#'+formatResult(_0x28902d,0x8)+'\x20@'+formatResult(_0x36257e,0x8));const _0x223f99=await exchange['createOrder'](_0x40bf92,_0x8667ca,_0x35a49a,_0x28902d,_0x36257e,{'clientOrderId':_0x15f631}),_0x984a23=lastOrders[_0x1df293(0x2ca)]-0x1;_0x984a23>=0x0&&lastOrders[_0x984a23][_0x1df293(0x27b)]==_0x15f631&&(lastOrders[_0x984a23]={...lastOrders[_0x984a23],'orderId':_0x223f99['id'],'amount':_0x223f99['amount'],'price':_0x223f99[_0x1df293(0x2bf)],'fee':_0x223f99[_0x1df293(0x276)]});if(config[_0x1df293(0x279)]!=0x0){let _0x58478f=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x58478f=cooldownTracker[_0x1df293(0x2c2)]();const _0x2881cf=getTimeStamp();cooldownTracker[_0x1df293(0x2f4)](_0x2881cf);if(_0x58478f){const _0x447ac2=fns[_0x1df293(0x239)](new Date(_0x2881cf),new Date(_0x58478f));if(_0x447ac2<cooldownInterval){logHistory(_0x1df293(0x210),'Executed\x20'+config[_0x1df293(0x279)]+_0x1df293(0x2ae)+cooldownInterval/0x3c+_0x1df293(0x2f7)+cooldownPeriod/(0xe10*0x3e8)+_0x1df293(0x266)),coolingDown=!![];break;}}}}catch(_0x5c89c9){if(_0x5c89c9['toString']()['includes'](_0x1df293(0x305)))lastOrders=lastOrders[_0x1df293(0x1f7)](_0x301986=>_0x301986[_0x1df293(0x301)]!=_0x40bf92),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x40bf92);else _0x5c89c9['toString']()[_0x1df293(0x2e1)]('Invalid\x20quantity')?(lastOrders=lastOrders[_0x1df293(0x1f7)](_0xa04dbb=>_0xa04dbb[_0x1df293(0x301)]!=_0x40bf92),logHistory(_0x1df293(0x210),_0x1df293(0x203)+_0x40bf92)):(lastOrders=lastOrders[_0x1df293(0x1f7)](_0x3a4cd7=>_0x3a4cd7[_0x1df293(0x301)]!=_0x40bf92),await handleError(_0x5c89c9,_0x1df293(0x2df),_0x40bf92));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1df293(0x2ca)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5411b2=config[_0x1df293(0x284)]==_0x1df293(0x2cb)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x52358c=_0x1df293;validateOrders(_0x52358c(0x2b6));},_0x5411b2);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1df293(0x226),_0x1df293(0x2fb)));}else{if(coolingDown)!config[_0x1df293(0x2cf)]&&logHistory(_0x1df293(0x210),_0x1df293(0x2da));else lockOrders!=ORDERS[_0x1df293(0x274)]&&(!config['headless']&&(config[_0x1df293(0x284)]==_0x1df293(0x2cb)?logHistory(_0x1df293(0x210),_0x1df293(0x1f1)):logHistory('error',_0x1df293(0x319))));}}function persistOpenOrders(_0x4a1045){const _0x4397f2=_0x3d0aaf,_0x5cadcd={...config,'openOrders':_0x4a1045};let _0x5d43c2=dbConfig['get'](_0x4397f2(0x2c7))[_0x4397f2(0x328)]({'botID':botID})['value']();_0x5d43c2&&dbConfig['get'](_0x4397f2(0x2c7))[_0x4397f2(0x328)]({'botID':botID})[_0x4397f2(0x2e9)](_0x5cadcd)[_0x4397f2(0x2e7)]();}function restoreOrders(){const _0x51a501=_0x3d0aaf;let _0x451252;config[_0x51a501(0x294)]&&allOpenOrders[_0x51a501(0x216)](_0xa3f2f2=>{const _0x26be37=_0x51a501,_0x2ebb8e=config[_0x26be37(0x294)][_0x26be37(0x328)](_0x219a1b=>_0x219a1b[_0x26be37(0x2c8)]==_0xa3f2f2['id']);_0x2ebb8e&&(lastOrders['push'](_0x2ebb8e),_0x451252=_0xa3f2f2[_0x26be37(0x23d)]);});if(lastOrders[_0x51a501(0x2ca)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x2593a8=new Date()[_0x51a501(0x2f3)](),_0x4bd3aa=config[_0x51a501(0x284)]==_0x51a501(0x2cb)?validateOrderTimeout*0x3c*0x3e8:config[_0x51a501(0x1f6)]*0x3c*0x3e8;if(_0x451252+_0x4bd3aa>_0x2593a8){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xcaac75=_0x51a501;validateOrders(_0xcaac75(0x2b6));},_0x451252+_0x4bd3aa-_0x2593a8);}else validateOrders(_0x51a501(0x2b6));}}async function sendPortfolioTelegram(){const _0x321af1=_0x3d0aaf;if(loading['progress']!=0x64){process[_0x321af1(0x24c)]({'telegrammsg':_0x321af1(0x32b)},_0x1f8433=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x5c6dea=[_0x321af1(0x302),_0x321af1(0x21e),_0x321af1(0x217)],_0x48e6ad=_0x5c6dea[_0x321af1(0x2e1)](config['basecoin'])?0x2:0x8;let _0x1c6e99='';if(config['showname'])_0x1c6e99=_0x321af1(0x232)+config[_0x321af1(0x1e3)]+_0x321af1(0x304);else _0x1c6e99='<b>Bot\x20'+botID+_0x321af1(0x304);const _0x25924a=getKPIs(_0x321af1(0x208)),_0x4b0d49=getKPIs('net-basecoin');_0x1c6e99+=_0x321af1(0x273),_0x1c6e99+=_0x25924a[_0x321af1(0x2db)]+_0x321af1(0x2de)+_0x25924a[_0x321af1(0x25b)]+'\x20\x0a',_0x1c6e99+=_0x25924a['rightTxt']+':\x20'+_0x25924a[_0x321af1(0x1ec)]+_0x321af1(0x21b),_0x1c6e99+=_0x4b0d49[_0x321af1(0x2db)]+':\x20'+_0x4b0d49[_0x321af1(0x25b)]+'\x20'+config[_0x321af1(0x208)]+'\x0a',_0x1c6e99+=_0x4b0d49[_0x321af1(0x32a)]+':\x20'+_0x4b0d49['change']+'%\x20\x0a',_0x1c6e99+='\x0a',_0x1c6e99+=_0x321af1(0x224),_0x1c6e99+=_0x321af1(0x326),_0x1c6e99+=_0x321af1(0x224),currentCoins[_0x321af1(0x216)](_0x1be3ad=>{const _0xdab2e4=_0x321af1;_0x1c6e99+=_0x1be3ad[_0xdab2e4(0x27e)]['padEnd'](0x7)+'|\x20'+formatPad(_0x1be3ad[_0xdab2e4(0x254)],0x2,0x6)+'|\x20'+formatPad(_0x1be3ad['target'],0x2,0x6)+'|\x20'+formatPad(_0x1be3ad[_0xdab2e4(0x292)]*0x64,0x2,0x6)+'\x0a';}),_0x1c6e99+=_0x321af1(0x2c3),process['send']({'telegrammsg':_0x1c6e99},_0x4db2af=>{});}function formatPad(_0x140ff0,_0x1799ca,_0x27a0e6){const _0x517279=_0x3d0aaf,_0x4e9214=formatResultString(_0x140ff0,_0x1799ca);return _0x4e9214?_0x4e9214['padStart'](_0x27a0e6):''[_0x517279(0x2cd)](_0x27a0e6);}function logHistory(_0x12156d,_0x1004fe,_0x36bb9b=''){const _0x2a5ae6=_0x3d0aaf;let _0x413a8b={'time':getTimeStamp(),'type':_0x12156d,'event':_0x1004fe};dbLogs[_0x2a5ae6(0x332)](_0x2a5ae6(0x316))[_0x2a5ae6(0x2f4)](_0x413a8b)['write']();if(_0x36bb9b=='')_0x36bb9b=_0x1004fe;proxyEmit(_0x2a5ae6(0x2d4),{'log':_0x413a8b,'summary':_0x36bb9b}),process[_0x2a5ae6(0x24c)]({'telegram':{..._0x413a8b,'botname':config[_0x2a5ae6(0x1e3)],'showname':config[_0x2a5ae6(0x23e)]}},_0x4840e9=>{}),logger[_0x2a5ae6(0x327)](''+_0x413a8b[_0x2a5ae6(0x2d4)]);}function emitHistory(_0x41455d={}){const _0x2c6e96=_0x3d0aaf;Object[_0x2c6e96(0x256)](_0x41455d)[_0x2c6e96(0x2ca)]==0x0&&(_0x41455d={'type':[_0x2c6e96(0x1d7),_0x2c6e96(0x2d4)],'event':'','page':0x1});if(_0x41455d['type'][_0x2c6e96(0x2e1)](_0x2c6e96(0x2d4)))_0x41455d[_0x2c6e96(0x277)][_0x2c6e96(0x2cc)](_0x41455d[_0x2c6e96(0x277)][_0x2c6e96(0x2ee)](_0x2c6e96(0x2d4)),0x1,'error',_0x2c6e96(0x226));if(dbLogs[_0x2c6e96(0x22e)](_0x2c6e96(0x316))[_0x2c6e96(0x25b)]()){let _0x455374=dbLogs[_0x2c6e96(0x332)]('logs')[_0x2c6e96(0x1f7)](_0x56a578=>{const _0x5dec62=_0x2c6e96;if(_0x41455d['type'][_0x5dec62(0x2ca)]==0x0)return![];else return _0x41455d[_0x5dec62(0x277)][_0x5dec62(0x2e1)](_0x56a578['type']);})['filter'](_0x42bb2f=>{const _0x3a8e93=_0x2c6e96;if(_0x41455d[_0x3a8e93(0x2d4)]=='')return!![];else return _0x42bb2f[_0x3a8e93(0x2d4)][_0x3a8e93(0x28d)]()[_0x3a8e93(0x2e1)](_0x41455d['event'][_0x3a8e93(0x28d)]());})[_0x2c6e96(0x1e6)](_0x2c6e96(0x2b7)),_0x4fa4d9=_0x455374[_0x2c6e96(0x25b)]()[_0x2c6e96(0x2ca)];_0x455374=_0x455374['reverse']()[_0x2c6e96(0x1d6)]((_0x41455d['page']-0x1)*logPageSize,_0x41455d['page']*logPageSize-0x1)[_0x2c6e96(0x28a)]()['value'](),proxyEmit(_0x2c6e96(0x2c6),{'logs':_0x455374,'total':_0x4fa4d9});}else proxyEmit(_0x2c6e96(0x2c6),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4960ec){const _0x24de04=_0x3d0aaf;if(dbLogs[_0x24de04(0x22e)](_0x24de04(0x316))['value']()){const _0x58fcce=dbLogs[_0x24de04(0x332)](_0x24de04(0x316))['sortBy']('time')[_0x24de04(0x1f7)](_0x101fd2=>{const _0x57dce8=_0x24de04;return _0x101fd2['type']==_0x57dce8(0x1d7);})[_0x24de04(0x25b)]();dbLogs[_0x24de04(0x332)](_0x24de04(0x316))[_0x24de04(0x222)]()[_0x24de04(0x2e7)](),dbLogs[_0x24de04(0x332)](_0x24de04(0x316))[_0x24de04(0x2e9)](_0x58fcce)['write'](),emitHistory(_0x4960ec);}}async function pauseBot(_0x5b142d=''){const _0x247313=_0x3d0aaf,_0x17c773=new Date()[_0x247313(0x2f3)]();if(!lastErrorShown||_0x17c773-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x17c773;!lastBotPause?(lastBotPause=_0x17c773,consecutivePauses=0x1):(_0x17c773-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x247313(0x24c)]({'stop':_0x247313(0x29f)},_0xa5f885=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x5b142d)_0x5b142d+=_0x247313(0x200);logHistory('error',_0x5b142d+_0x247313(0x237)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0xf1c07b=_0x3d0aaf;process[_0xf1c07b(0x24c)]({'stop':'kill'},_0x42414a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x291a7d,_0x4e7761){const _0x1e88e1=_0x3d0aaf;if(_0x291a7d[_0x1e88e1(0x26f)]()[_0x1e88e1(0x2e1)](_0x1e88e1(0x288)))return logHistory(_0x1e88e1(0x210),config[_0x1e88e1(0x2d9)]+_0x1e88e1(0x1d9)),![];else{if(_0x291a7d[_0x1e88e1(0x26f)]()[_0x1e88e1(0x2e1)](_0x1e88e1(0x2d0)))return logHistory('error',config['exchange']+'\x20API\x20secret\x20is\x20invalid'),![];else{if(_0x291a7d[_0x1e88e1(0x26f)]()[_0x1e88e1(0x2e1)](_0x1e88e1(0x24f)))return logHistory(_0x1e88e1(0x210),config[_0x1e88e1(0x2d9)]+_0x1e88e1(0x289)+config[_0x1e88e1(0x2d9)]),![];else await handleError(_0x291a7d,_0x4e7761);}}}async function handleError(_0x34a2df,_0x1df897,_0x1fe30a=''){const _0x2dcc2c=_0x3d0aaf;if(_0x34a2df['toString']()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x23c)))await pauseBot(config['exchange']+'\x20API\x20blocked\x20(DDoS\x20protection)');else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x291)))await pauseBot(config[_0x2dcc2c(0x2d9)]+_0x2dcc2c(0x1f8));else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x1fb)))await pauseBot(config[_0x2dcc2c(0x2d9)]+'\x20not\x20responding');else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x285)))logHistory(_0x2dcc2c(0x210),_0x1df897+_0x2dcc2c(0x2d5)),logHistory('error',_0x2dcc2c(0x2b3)),await killBot();else{if(_0x34a2df[_0x2dcc2c(0x26f)]()['includes'](_0x2dcc2c(0x288)))logHistory('error',_0x1df897+'\x20|\x20'+config[_0x2dcc2c(0x2d9)]+'\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x2d0)))logHistory(_0x2dcc2c(0x210),_0x1df897+_0x2dcc2c(0x200)+config[_0x2dcc2c(0x2d9)]+_0x2dcc2c(0x22d)),logHistory(_0x2dcc2c(0x210),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x24f)))logHistory(_0x2dcc2c(0x210),_0x1df897+_0x2dcc2c(0x200)+config['exchange']+_0x2dcc2c(0x331)+config[_0x2dcc2c(0x2d9)]),logHistory(_0x2dcc2c(0x210),_0x2dcc2c(0x2b3)),await killBot();else{if(_0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x251)))logHistory(_0x2dcc2c(0x210),_0x1df897+_0x2dcc2c(0x2e4)),logHistory(_0x2dcc2c(0x210),_0x2dcc2c(0x2b3)),await killBot();else _0x34a2df[_0x2dcc2c(0x26f)]()[_0x2dcc2c(0x2e1)](_0x2dcc2c(0x2a6))?logHistory('error',_0x1df897+_0x2dcc2c(0x27f)+_0x1fe30a):(logger[_0x2dcc2c(0x327)](_0x1df897+_0x2dcc2c(0x207),_0x34a2df),await pauseBot(_0x2dcc2c(0x1e1)));}}}}}}}}function formatResult(_0x4bc348,_0x979d3b){const _0x30a5e8=_0x3d0aaf;return parseFloat(_0x4bc348[_0x30a5e8(0x26a)](_0x979d3b));}function formatResultTruncate(_0xe7fce2,_0x1fcc98){const _0x22e34d=_0x3d0aaf;let _0xc17345=formatResultString(_0xe7fce2,0xa),_0x369bd0=_0xc17345[_0x22e34d(0x2ee)]('.');return _0x369bd0!=-0x1&&(_0xc17345=_0xc17345['slice'](0x0,_0x369bd0+_0x1fcc98+0x1)),Number(_0xc17345);}function formatResultString(_0x5ce7d4,_0x237c90){const _0x237f72=_0x3d0aaf;let _0x4d48f1;if(!(''+_0x5ce7d4)[_0x237f72(0x2e1)]('e'))_0x4d48f1=+(Math['round'](_0x5ce7d4+'e+'+_0x237c90)+'e-'+_0x237c90);else{let _0x209d69=(''+_0x5ce7d4)[_0x237f72(0x1f4)]('e'),_0x5e49f4='';+_0x209d69[0x1]+_0x237c90>0x0&&(_0x5e49f4='+'),_0x4d48f1=+(Math[_0x237f72(0x25f)](+_0x209d69[0x0]+'e'+_0x5e49f4+(+_0x209d69[0x1]+_0x237c90))+'e-'+_0x237c90);}return Number(_0x4d48f1)[_0x237f72(0x26a)](_0x237c90);}function getServerTime(){const _0x3a70b2=_0x3d0aaf,_0x51ffe6=new Date();return _0x51ffe6['getFullYear']()+'/'+(_0x51ffe6[_0x3a70b2(0x206)]()+0x1)[_0x3a70b2(0x26f)]()[_0x3a70b2(0x2cd)](0x2,'0')+'/'+_0x51ffe6[_0x3a70b2(0x2b9)]()[_0x3a70b2(0x26f)]()[_0x3a70b2(0x2cd)](0x2,'0')+'\x20'+_0x51ffe6[_0x3a70b2(0x2a0)]()[_0x3a70b2(0x26f)]()['padStart'](0x2,'0')+':'+_0x51ffe6[_0x3a70b2(0x2c9)]()[_0x3a70b2(0x26f)]()['padStart'](0x2,'0')+':'+_0x51ffe6[_0x3a70b2(0x311)]()[_0x3a70b2(0x26f)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x17c6c5=_0x3d0aaf,_0x4d9172=shiftedTime();return _0x4d9172[_0x17c6c5(0x201)]()+'/'+(_0x4d9172[_0x17c6c5(0x206)]()+0x1)[_0x17c6c5(0x26f)]()[_0x17c6c5(0x2cd)](0x2,'0')+'/'+_0x4d9172[_0x17c6c5(0x2b9)]()['toString']()[_0x17c6c5(0x2cd)](0x2,'0')+'\x20'+_0x4d9172[_0x17c6c5(0x2a0)]()[_0x17c6c5(0x26f)]()[_0x17c6c5(0x2cd)](0x2,'0')+':'+_0x4d9172['getMinutes']()[_0x17c6c5(0x26f)]()['padStart'](0x2,'0')+':'+_0x4d9172[_0x17c6c5(0x311)]()['toString']()[_0x17c6c5(0x2cd)](0x2,'0');}function getDate(){const _0x3d0bc5=_0x3d0aaf,_0x57f6f0=shiftedTime();return _0x57f6f0[_0x3d0bc5(0x201)]()+'/'+(_0x57f6f0[_0x3d0bc5(0x206)]()+0x1)[_0x3d0bc5(0x26f)]()[_0x3d0bc5(0x2cd)](0x2,'0')+'/'+_0x57f6f0[_0x3d0bc5(0x2b9)]()[_0x3d0bc5(0x26f)]()[_0x3d0bc5(0x2cd)](0x2,'0');}function getHour(){const _0x4e30ca=_0x3d0aaf,_0x3670a2=shiftedTime();return _0x3670a2[_0x4e30ca(0x2a0)]()[_0x4e30ca(0x26f)]()['padStart'](0x2,'0');}function sleep(_0x512b7b){return new Promise(_0x3547d5=>setTimeout(_0x3547d5,_0x512b7b));}function shiftedTime(){const _0x2d39e9=_0x3d0aaf,_0x1aee23=new Date();let _0x481ff5=_0x1aee23;if(config&&config[_0x2d39e9(0x295)]!==0x0)_0x481ff5=fns[_0x2d39e9(0x225)](_0x1aee23,{'hours':config['timeshift']});return _0x481ff5;}function timer(_0x3fb62e){const _0x3d7184=_0x3d0aaf,_0x2f9bf7=new Date();!lasttime?console['log'](_0x3d7184(0x233),_0x3fb62e,_0x2f9bf7):console[_0x3d7184(0x20d)](_0x3d7184(0x233),_0x3fb62e,(_0x2f9bf7-lasttime)/0x3e8),lasttime=_0x2f9bf7;}