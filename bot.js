const _0x1842af=_0x157b;(function(_0x5f1d01,_0x5b8d89){const _0x2d18b6=_0x157b,_0x137bfe=_0x5f1d01();while(!![]){try{const _0x5d54d5=-parseInt(_0x2d18b6(0x284))/0x1*(parseInt(_0x2d18b6(0x285))/0x2)+parseInt(_0x2d18b6(0x281))/0x3+-parseInt(_0x2d18b6(0x1f5))/0x4+parseInt(_0x2d18b6(0x2a9))/0x5+-parseInt(_0x2d18b6(0x2cc))/0x6+-parseInt(_0x2d18b6(0x2c8))/0x7+parseInt(_0x2d18b6(0x2a1))/0x8;if(_0x5d54d5===_0x5b8d89)break;else _0x137bfe['push'](_0x137bfe['shift']());}catch(_0x27ac46){_0x137bfe['push'](_0x137bfe['shift']());}}}(_0x4788,0x217c3));const _0x109bbe=function(){let _0x39f27a=!![];return function(_0x401634,_0x5e051b){const _0x31af4f=_0x39f27a?function(){const _0x50a36a=_0x157b;if(_0x5e051b){const _0x5b17cb=_0x5e051b[_0x50a36a(0x1e9)](_0x401634,arguments);return _0x5e051b=null,_0x5b17cb;}}:function(){};return _0x39f27a=![],_0x31af4f;};}(),_0x189d7b=_0x109bbe(this,function(){const _0x43464b=_0x157b;return _0x189d7b['toString']()[_0x43464b(0x1f9)](_0x43464b(0x23b))[_0x43464b(0x2d2)]()[_0x43464b(0x202)](_0x189d7b)[_0x43464b(0x1f9)](_0x43464b(0x23b));});_0x189d7b();'use strict';const ccxt=require('ccxt'),low=require(_0x1842af(0x246)),FileSync=require(_0x1842af(0x1fc)),fs=require('fs'),fns=require(_0x1842af(0x21c)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require('hybrid-crypto-js')[_0x1842af(0x2d3)];let exchange,wsClient;global[_0x1842af(0x2c5)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1842af(0x21b))[_0x1842af(0x290)],botID=process['argv'][0x2]||_0x1842af(0x219),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console[_0x1842af(0x2d1)](_0x1842af(0x254)+botID+_0x1842af(0x238)),process[_0x1842af(0x20d)](0x1);const userID=process[_0x1842af(0x2b6)][0x3]||'',configpath=userID?_0x1842af(0x22c)+userID+'/':'./config/';!fs[_0x1842af(0x289)](configpath)&&fs[_0x1842af(0x20b)](configpath);const configfile=configpath+_0x1842af(0x2e8)+botID+_0x1842af(0x1e3),logfile=configpath+_0x1842af(0x2e8)+botID+'-events.json',performancefile=configpath+_0x1842af(0x2e8)+botID+_0x1842af(0x1fd),coinresultsfile=configpath+_0x1842af(0x2e8)+botID+'-results.json',settingsfile=configpath+_0x1842af(0x1f4),securefile=configpath+_0x1842af(0x223),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x1842af(0x23f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x1842af(0x23f)]();function _0x4788(){const _0x1a3f63=['success','getCoins()','split','subscribeSpotUserDataStream','send','threshold','Performance\x20recreation\x20completed\x20successfully','900536lrZVxA','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','getFullYear','RSA-OAEP','availableBalance','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','forEach','yyyy/MM/dd','708185WyriYi','toLowerCase','excluded','fetchBalance','emitHistory','sell','total','getTime','price','orderId','cooldown','getStartingBalances','has','argv','\x20|\x20Error\x20details:\x20','parseISO','coin','limit-low','getHours','spot','\x20order:\x20','\x20-\x20','AuthenticationError','recreate','delta','binance','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','MIN_NOTIONAL','ticker','buy','map','576058joxPEg','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','initclient','sells','240864LyjidT','yyyy/MM/dd\x20HH:mm:ss','ask','recreateHistory()','portfolio','log','toString','Crypt','cancelOrder()','LIMIT','getDate','kline','replace','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','getPortfolio','data','filled','cost','padStart','error','stringify','emojibuy','time','distribution','getCloses()','running','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','BTCUSDT','bot-','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','message','wsKey','Binance\x20API\x20secret\x20is\x20invalid','length','BTC','remove','Pausing\x20bot\x20for\x205\x20minutes\x20(','Market','wss://stream.binance.us:9443','exchange','-config.json','InsufficientFunds','assign','eur','************','limit-high','apply','Order\x20filled:\x20','market','trade','startprice','toFixed','event-history','configuration','coins','startnumber','botname','bb-settings.json','105292gZGiGj','API-key\x20format\x20invalid','BTC/USDT','number','search','Binance\x20API\x20key\x20is\x20invalid','sortBy','lowdb/adapters/FileSync','-performance.json','privateKey','timeshift','order','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','constructor','HOT/EUR','basecoin','USDT','initws()','apiSecret','slice','timestamp','find','mkdirSync','symbols','exit','settings','page','Order(s)\x20validated\x20-\x20balancing\x20resumed','format','OrderNotFound','orderType','coinamount','secure','type','apiKey','coin-loading-progress','001','binanceus','./version.json','date-fns','Limit\x20(low-margin)','storeHeadless','restart','decrypt','balances','BTC/EUR','bb-secure.json','currency','min','FILLED','asset','filter','placeOrder()','Unfilled\x20order(s)\x20canceled\x20after\x20','symbol','./config/','BNB','side','progress','\x20minutes\x20-\x20balancing\x20resumed','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','closeWs','outboundAccountPosition','ordertype','reverse','eventType','Order:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','formattedMessage','cancel','(((.+)+)+)+$','Limit\x20(high-margin)',':\x20Bot\x20','get','write','accumulatedQuantity','EUR','amount','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20>\x20','realized','lowdb','Order(s)\x20filled\x20-\x20balancing\x20resumed','offset','fees','limit','valid','getMinutes','includes','push','headless','placeOrder',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cancelOrder','usd','Error:\x20Invalid\x20argument\x20','getSeconds','differenceInSeconds','breakeven','eachDayOfInterval','defaults','emojisell','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','Bot\x20','entries','isArray','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','getFiat()','\x20orders\x20in\x20less\x20than\x20','startdate','showname','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','round','reconnected','value','splice','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sort','enabled','getPortfolio()','wsMarket','RequestTimeout','bid','args','fee','\x20hour','parse','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','fetchTickers','DDoSProtection','target','kill','date','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','BTC/BUSD','event','userData','BTCBUSD','keys','last','171543yDgpNv','function','HOT/BTC','1QyFDet','50938pGYaRm','abs','remainingSymbols','botID','existsSync','limits','BUSD','subscribeSpotKline','executionReport','getMonth','milliseconds','version','fromCodePoint','ExchangeNotAvailable','indexOf','bot','loadMarkets','WebSockets(','logs','timeout','wss://stream.binance.com:9443'];_0x4788=function(){return _0x1a3f63;};return _0x4788();}const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1842af(0x259)]({'bot':[]})[_0x1842af(0x23f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1842af(0x259)]({'coins':[]})[_0x1842af(0x23f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x1842af(0x222)},'usd':{'coin':'BTCUSDT','symbol':_0x1842af(0x1f7)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x205fa2)=>{},'debug':(..._0x192c1c)=>{},'notice':(..._0x25b04c)=>{},'info':(..._0x43dcae)=>{},'warning':(..._0x8c7017)=>{},'error':async function(..._0x3e51e5){const _0x552baf=_0x1842af,_0x23332c=new Date()[_0x552baf(0x2b0)]();if(!lastErrorShown||_0x23332c-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x552baf(0x2b0)](),logHistory(_0x552baf(0x2df),_0x552baf(0x296)+consecutivePauses+_0x552baf(0x251));let _0x53eabf='';if(_0x3e51e5[0x0])_0x53eabf+=_0x3e51e5[0x0];if(_0x3e51e5[0x1]&&_0x3e51e5[0x1][_0x552baf(0x2df)]&&_0x3e51e5[0x1][_0x552baf(0x2df)][_0x552baf(0x2ea)])_0x53eabf+=_0x552baf(0x2be)+_0x3e51e5[0x1][_0x552baf(0x2df)][_0x552baf(0x2ea)];logging(_0x552baf(0x296)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x53eabf),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x1842af(0x2a4)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1842af(0x1ff)]!=config[_0x1842af(0x1ff)]&&updateTimeshift(settings[_0x1842af(0x1ff)]);process[_0x1842af(0x29e)]({'started':_0x1842af(0x2e5)}),initializeProcessListeners();function proxyEmit(_0x10d4be,_0x196603=null){const _0x5efcd2=_0x1842af;process[_0x5efcd2(0x29e)]({'function':_0x10d4be,'args':_0x196603});}function initializeProcessListeners(){const _0x5481c2=_0x1842af;process['on'](_0x5481c2(0x2ea),_0x15ec89=>{const _0x20e7c8=_0x5481c2;switch(Object[_0x20e7c8(0x27f)](_0x15ec89)[0x0]){case _0x20e7c8(0x1ff):_0x15ec89[_0x20e7c8(0x1ff)]!=undefined&&(settings[_0x20e7c8(0x1ff)]=_0x15ec89['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x20e7c8(0x282):switch(_0x15ec89['function']){case _0x20e7c8(0x2ca):initclient();break;case _0x20e7c8(0x2ad):emitHistory(_0x15ec89['args']);break;case _0x20e7c8(0x2da):getPortfolio(_0x15ec89[_0x20e7c8(0x270)]);break;case'storeConfiguration':storeConfiguration(_0x15ec89[_0x20e7c8(0x270)]);break;case _0x20e7c8(0x21e):storeHeadless(_0x15ec89[_0x20e7c8(0x270)]);break;case _0x20e7c8(0x2b4):getStartingBalances();break;case _0x20e7c8(0x250):placeOrder(_0x15ec89[_0x20e7c8(0x270)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();function _0x157b(_0x31a0a9,_0x5074ae){const _0x119ac3=_0x4788();return _0x157b=function(_0x189d7b,_0x109bbe){_0x189d7b=_0x189d7b-0x1de;let _0x4788aa=_0x119ac3[_0x189d7b];return _0x4788aa;},_0x157b(_0x31a0a9,_0x5074ae);}async function headlessStart(){reset();}async function reset(){const _0x45a148=_0x1842af;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x45a148(0x217)],config['apiSecret']);let _0x4bb22c=await loadSymbols();_0x4bb22c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x271ec4,_0x240a4a){const _0x219c3e=_0x1842af,_0x184655=ccxt[config['exchange']];let _0x4d13a2;switch(config[_0x219c3e(0x1e2)]){case _0x219c3e(0x2c2):_0x4d13a2=_0x219c3e(0x299);break;case _0x219c3e(0x21a):_0x4d13a2=_0x219c3e(0x1e1);break;default:_0x4d13a2=_0x219c3e(0x299);}exchange=new _0x184655({'apiKey':_0x271ec4,'secret':_0x240a4a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x271ec4,'api_secret':_0x240a4a,'beautify':!![],'wsUrl':_0x4d13a2},logger),config[_0x219c3e(0x1e2)]==_0x219c3e(0x21a)&&(stablecoins={'eur':{'coin':_0x219c3e(0x27e),'symbol':_0x219c3e(0x27b)},'usd':{'coin':_0x219c3e(0x2e7),'symbol':_0x219c3e(0x1f7)}});}async function loadSymbols(){const _0x549b21=_0x1842af;let _0x2d56b2;try{markets=await exchange[_0x549b21(0x295)]();const _0x2d7a84=['DAI/',_0x549b21(0x283),_0x549b21(0x203)];allSymbols=exchange[_0x549b21(0x20c)][_0x549b21(0x228)](_0x38907b=>{const _0x192c5d=_0x549b21;let _0x15edc7=![];return _0x2d7a84[_0x192c5d(0x2a7)](_0x35837e=>{const _0x47a6fd=_0x192c5d;if(_0x38907b[_0x47a6fd(0x24d)](_0x35837e))_0x15edc7=!![];}),!_0x15edc7;}),_0x2d56b2=!![];}catch(_0x4749d0){await handleError(_0x4749d0,'loadSymbols()'),_0x2d56b2=![];}return _0x2d56b2;}async function initbot(){const _0x138b11=_0x1842af;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1a486d=dbCoinResults[_0x138b11(0x23e)](_0x138b11(0x1f1))[_0x138b11(0x267)]();if(_0x1a486d[_0x138b11(0x2ed)]==0x0)await resetCoinResults();}async function initclient(){const _0x1223b3=_0x1842af;proxyEmit(_0x1223b3(0x1f0),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1223b3(0x221),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5eee28=_0x1842af;wsinitialized=![];ws1&&(ws1['forEach'](_0x4d9425=>{const _0x28468d=_0x157b;try{wsClient[_0x28468d(0x232)](_0x4d9425);}catch(_0x1e9ad4){}}),ws1=[]);if(ws2){try{wsClient[_0x5eee28(0x232)](ws2);}catch(_0x54f244){}ws2=null;}}async function initws(){const _0xd8d4ba=_0x1842af;cleanws();let _0x81a17a=[];currentCoins[_0xd8d4ba(0x2a7)](_0x37ecb1=>{const _0x17ef3b=_0xd8d4ba;if(_0x37ecb1[_0x17ef3b(0x2b9)]!=config[_0x17ef3b(0x204)])_0x81a17a[_0x17ef3b(0x24e)](noslash(_0x37ecb1[_0x17ef3b(0x22b)]));});if(!_0x81a17a[_0xd8d4ba(0x24d)](stablecoins[_0xd8d4ba(0x1e6)][_0xd8d4ba(0x2b9)]))_0x81a17a[_0xd8d4ba(0x24e)](stablecoins[_0xd8d4ba(0x1e6)][_0xd8d4ba(0x2b9)]);if(!_0x81a17a[_0xd8d4ba(0x24d)](stablecoins['usd'][_0xd8d4ba(0x2b9)]))_0x81a17a[_0xd8d4ba(0x24e)](stablecoins[_0xd8d4ba(0x253)][_0xd8d4ba(0x2b9)]);if(!_0x81a17a[_0xd8d4ba(0x24d)](_0xd8d4ba(0x22d)+config['basecoin']))_0x81a17a[_0xd8d4ba(0x24e)]('BNB'+config[_0xd8d4ba(0x204)]);try{_0x81a17a[_0xd8d4ba(0x2a7)]((_0x48d8fd,_0x138981)=>{const _0x18a0ff=_0xd8d4ba;ws1[_0x138981]=wsClient[_0x18a0ff(0x28c)](_0x48d8fd,'1m');}),ws2=wsClient[_0xd8d4ba(0x29d)](),wsClient['on'](_0xd8d4ba(0x239),_0x4d16a6=>{const _0xbea901=_0xd8d4ba;if(!Array[_0xbea901(0x25e)](_0x4d16a6)&&!_0x4d16a6[_0xbea901(0x2eb)][_0xbea901(0x24d)](_0xbea901(0x27d))){if(_0x4d16a6['eventType']===_0xbea901(0x2d7)){global[_0xbea901(0x2c5)][_0x4d16a6[_0xbea901(0x2d7)][_0xbea901(0x22b)]]=_0x4d16a6['kline']['close'];return;}}else{if(!Array['isArray'](_0x4d16a6)&&_0x4d16a6['wsKey'][_0xbea901(0x24d)](_0xbea901(0x27d))){if(_0x4d16a6[_0xbea901(0x26d)]['includes'](_0xbea901(0x2bc))){updateNumberCoins(_0x4d16a6);return;}}}}),wsClient['on'](_0xd8d4ba(0x266),async _0x5c8b30=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x99750e){await handleError(_0x99750e,_0xd8d4ba(0x206));}let _0x2074c3,_0x20ca04=0x0;loading[_0xd8d4ba(0x287)]=[];let _0x2175dd=0x0;currentCoins[_0xd8d4ba(0x2a7)](_0x4bb570=>{const _0x4d9fc1=_0xd8d4ba;if(_0x4bb570[_0x4d9fc1(0x2b9)]!=config[_0x4d9fc1(0x204)])loading['remainingSymbols'][_0x4d9fc1(0x24e)](_0x4bb570[_0x4d9fc1(0x22b)]);}),loadingCanceled=![];while(_0x2074c3!=currentCoins[_0xd8d4ba(0x2ed)]-0x1){_0x2074c3=0x0,currentCoins[_0xd8d4ba(0x2a7)](_0x2ef9ba=>{const _0x479aec=_0xd8d4ba;_0x2ef9ba[_0x479aec(0x2b9)]!=config[_0x479aec(0x204)]&&global[_0x479aec(0x2c5)][noslash(_0x2ef9ba[_0x479aec(0x22b)])]&&(loading[_0x479aec(0x287)]=loading[_0x479aec(0x287)][_0x479aec(0x228)](_0x78d640=>_0x78d640!=_0x2ef9ba[_0x479aec(0x22b)]),_0x2074c3++);}),loading[_0xd8d4ba(0x22f)]=Math[_0xd8d4ba(0x265)](_0x2074c3/(currentCoins[_0xd8d4ba(0x2ed)]-0x1)*0x64);_0x2175dd>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0xd8d4ba(0x23a)]=!![],emitLoadingProgress();break;}else _0x2074c3!=_0x20ca04&&(_0x20ca04=_0x2074c3,emitLoadingProgress()),_0x2175dd++,await sleep(0xc8);}if(_0x2074c3==currentCoins[_0xd8d4ba(0x2ed)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x55728c=_0x1842af;proxyEmit(_0x55728c(0x218),loading);}async function getFiat(){const _0x5489fd=_0x1842af;let _0x6f6e87=0x0,_0x3037c5=0x0;try{_0x6f6e87=global[_0x5489fd(0x2c5)][stablecoins[_0x5489fd(0x1e6)][_0x5489fd(0x2b9)]],_0x3037c5=global[_0x5489fd(0x2c5)][stablecoins['usd'][_0x5489fd(0x2b9)]];}catch(_0x191f7e){await handleError(_0x191f7e,_0x5489fd(0x260));}return{'eur':Number(_0x6f6e87),'usd':Number(_0x3037c5)};}async function setStartDatePerformance(_0x272363){const _0x2e0b6b=_0x1842af,_0x11d284=fns[_0x2e0b6b(0x211)](new Date(_0x272363['startdate']),'yyyy/MM/dd');let _0x1951ce=[];_0x1951ce[stablecoins[_0x2e0b6b(0x1e6)][_0x2e0b6b(0x2b9)]]=await getCloses(stablecoins[_0x2e0b6b(0x1e6)][_0x2e0b6b(0x22b)],new Date(_0x272363[_0x2e0b6b(0x262)]),0x1),_0x1951ce[stablecoins['usd']['coin']]=await getCloses(stablecoins[_0x2e0b6b(0x253)]['symbol'],new Date(_0x272363[_0x2e0b6b(0x262)]),0x1);let _0x4852a2,_0x48879d=[];_0x272363[_0x2e0b6b(0x2d0)]['forEach'](_0x4908bb=>{const _0x5ef239=_0x2e0b6b;!_0x4908bb[_0x5ef239(0x2ab)]&&_0x48879d['push']({'coin':_0x4908bb['coin'],'number':_0x4908bb[_0x5ef239(0x1f2)],'price':_0x4908bb[_0x5ef239(0x1ed)]});}),_0x4852a2={'date':_0x11d284,'eur':_0x1951ce[stablecoins[_0x2e0b6b(0x1e6)]['coin']][0x0],'usd':_0x1951ce[stablecoins[_0x2e0b6b(0x253)]['coin']][0x0],'coins':_0x48879d};let _0x37177a=dbPerformance[_0x2e0b6b(0x23e)]('data')[_0x2e0b6b(0x20a)]({'date':_0x11d284})[_0x2e0b6b(0x267)]();_0x37177a?dbPerformance[_0x2e0b6b(0x23e)](_0x2e0b6b(0x2db))[_0x2e0b6b(0x20a)]({'date':_0x11d284})['assign'](_0x4852a2)[_0x2e0b6b(0x23f)]():dbPerformance[_0x2e0b6b(0x23e)](_0x2e0b6b(0x2db))[_0x2e0b6b(0x24e)](_0x4852a2)['write'](),_0x37177a=dbPerformance['get'](_0x2e0b6b(0x2db))[_0x2e0b6b(0x1fb)]('date')[_0x2e0b6b(0x267)](),_0x37177a[_0x2e0b6b(0x2a7)](_0x5a6019=>{const _0x4f1e2e=_0x2e0b6b;_0x5a6019[_0x4f1e2e(0x279)]<_0x11d284&&dbPerformance[_0x4f1e2e(0x23e)](_0x4f1e2e(0x2db))[_0x4f1e2e(0x1de)]({'date':_0x5a6019[_0x4f1e2e(0x279)]})[_0x4f1e2e(0x23f)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4d9ab8){const _0x2b8e42=_0x1842af;let _0x260abe,_0x3ae1e1=[];logHistory(_0x2b8e42(0x29a),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x4d9ab8['portfolio'][_0x2b8e42(0x2a7)](_0xe392a3=>{const _0x4629=_0x2b8e42;if(_0xe392a3[_0x4629(0x2b9)]!=config[_0x4629(0x204)]&&!_0xe392a3['excluded'])_0x3ae1e1[_0x4629(0x24e)]({'coin':_0xe392a3[_0x4629(0x2b9)],'symbol':_0xe392a3['symbol']});});let _0x49e778=[];try{const _0x1fb2e5=fns['format'](fns[_0x2b8e42(0x2b8)](_0x4d9ab8[_0x2b8e42(0x262)]['replace'](/\//g,'-')),_0x2b8e42(0x243));for(const _0xf803c5 of _0x3ae1e1){if(_0xf803c5[_0x2b8e42(0x2b9)]!=config[_0x2b8e42(0x204)])_0x260abe=await exchange['fetchOrders'](_0xf803c5['symbol'],Date['parse'](_0x1fb2e5));_0x260abe[_0x2b8e42(0x2a7)](_0x209699=>{const _0x555dd4=_0x2b8e42,_0x20a61=_0xf803c5[_0x555dd4(0x22b)]['includes'](config[_0x555dd4(0x204)]+'/'),_0x17551c=fns[_0x555dd4(0x211)](fns[_0x555dd4(0x2b8)](_0x209699['datetime']),_0x555dd4(0x2cd)),_0x5a0314=fns[_0x555dd4(0x211)](fns[_0x555dd4(0x2b8)](_0x209699['datetime']),_0x555dd4(0x2a8));let _0x7cc52f;if(_0x209699[_0x555dd4(0x22e)]==_0x555dd4(0x2c6)&&_0x20a61==![])_0x7cc52f=_0x209699[_0x555dd4(0x242)];if(_0x209699[_0x555dd4(0x22e)]=='buy'&&_0x20a61==!![])_0x7cc52f=-_0x209699[_0x555dd4(0x242)]*_0x209699[_0x555dd4(0x2b1)];if(_0x209699[_0x555dd4(0x22e)]=='sell'&&_0x20a61==![])_0x7cc52f=-_0x209699[_0x555dd4(0x242)];if(_0x209699[_0x555dd4(0x22e)]==_0x555dd4(0x2ae)&&_0x20a61==!![])_0x7cc52f=_0x209699[_0x555dd4(0x242)]*_0x209699[_0x555dd4(0x2b1)];_0x49e778[_0x555dd4(0x24e)]({'timestamp':_0x17551c,'date':_0x5a0314,'coin':_0xf803c5['coin'],'symbol':_0xf803c5[_0x555dd4(0x22b)],'type':_0x209699[_0x555dd4(0x216)],'side':_0x209699[_0x555dd4(0x22e)],'reverse':_0x20a61,'amount':formatResult(_0x209699[_0x555dd4(0x2dc)],0x8),'filled':formatResult(_0x209699[_0x555dd4(0x2dc)],0x8),'coinamount':formatResult(_0x7cc52f,0x8),'price':formatResult(_0x209699['price'],0x8)});let _0x4c0eca;if(_0x209699[_0x555dd4(0x22e)]==_0x555dd4(0x2c6)&&_0x20a61==![])_0x4c0eca=-_0x209699[_0x555dd4(0x242)]*_0x209699['price'];if(_0x209699[_0x555dd4(0x22e)]==_0x555dd4(0x2c6)&&_0x20a61==!![])_0x4c0eca=_0x209699[_0x555dd4(0x242)];if(_0x209699[_0x555dd4(0x22e)]==_0x555dd4(0x2ae)&&_0x20a61==![])_0x4c0eca=_0x209699[_0x555dd4(0x242)]*_0x209699[_0x555dd4(0x2b1)];if(_0x209699[_0x555dd4(0x22e)]=='sell'&&_0x20a61==!![])_0x4c0eca=-_0x209699[_0x555dd4(0x242)];_0x49e778[_0x555dd4(0x24e)]({'date':_0x5a0314,'coin':config[_0x555dd4(0x204)],'coinamount':formatResult(_0x4c0eca,0x8)});});}_0x49e778[_0x2b8e42(0x26a)]((_0x4a480b,_0x317154)=>_0x4a480b[_0x2b8e42(0x209)]>_0x317154[_0x2b8e42(0x209)]?0x1:_0x317154[_0x2b8e42(0x209)]>_0x4a480b[_0x2b8e42(0x209)]?-0x1:0x0),dbLogs[_0x2b8e42(0x23e)](_0x2b8e42(0x297))[_0x2b8e42(0x1de)]()[_0x2b8e42(0x23f)](),_0x49e778[_0x2b8e42(0x2a7)](_0x31f754=>{const _0x19afa8=_0x2b8e42;let _0x597243;_0x31f754[_0x19afa8(0x2b9)]!=config['basecoin']&&(_0x597243={'time':_0x31f754[_0x19afa8(0x209)],'type':_0x19afa8(0x200),'event':_0x19afa8(0x237)+_0x31f754[_0x19afa8(0x22b)]+'\x20'+_0x31f754[_0x19afa8(0x22e)]+'\x20#'+_0x31f754[_0x19afa8(0x242)]+'\x20@'+_0x31f754['price']},dbLogs[_0x19afa8(0x23e)]('logs')[_0x19afa8(0x24e)](_0x597243)[_0x19afa8(0x23f)]());});const _0x1803d0=fns[_0x2b8e42(0x258)]({'start':new Date(_0x4d9ab8['startdate']),'end':new Date()})[_0x2b8e42(0x2c7)](_0x2d252f=>fns[_0x2b8e42(0x211)](_0x2d252f,_0x2b8e42(0x2a8)));let _0x59de98=[];_0x4d9ab8['portfolio'][_0x2b8e42(0x2a7)](_0xa4c4ca=>{const _0x326c10=_0x2b8e42;if(!_0xa4c4ca[_0x326c10(0x2ab)]){_0x59de98[_0xa4c4ca[_0x326c10(0x2b9)]]=[];let _0xc42a21=_0xa4c4ca[_0x326c10(0x1f2)];_0x1803d0[_0x326c10(0x2a7)]((_0x29afd5,_0xd1a09f)=>{const _0x514607=_0x326c10;let _0x136970=_0x49e778[_0x514607(0x228)](_0x1d0083=>_0x1d0083[_0x514607(0x2b9)]==_0xa4c4ca[_0x514607(0x2b9)]&&_0x1d0083[_0x514607(0x279)]==_0x29afd5);if(_0x136970['length']!=0x0){let _0x346200=_0x136970['reduce']((_0x5d1f6f,_0xb4c924)=>{const _0x1b0f9d=_0x514607;return _0x5d1f6f+=_0xb4c924[_0x1b0f9d(0x214)],_0x5d1f6f;},0x0);_0xc42a21+=_0x346200;}_0x59de98[_0xa4c4ca['coin']][_0x29afd5]=_0xc42a21;});}});const _0x2fd6cb=[..._0x3ae1e1];_0x2fd6cb['push']({'coin':stablecoins[_0x2b8e42(0x1e6)][_0x2b8e42(0x2b9)],'symbol':stablecoins[_0x2b8e42(0x1e6)]['symbol']}),_0x2fd6cb[_0x2b8e42(0x24e)]({'coin':stablecoins[_0x2b8e42(0x253)]['coin'],'symbol':stablecoins['usd'][_0x2b8e42(0x22b)]});let _0x572b19=[];for(const _0x4532e6 of _0x2fd6cb){_0x572b19[_0x4532e6[_0x2b8e42(0x2b9)]]=await getCloses(_0x4532e6[_0x2b8e42(0x22b)],new Date(_0x4d9ab8['startdate']));}dbPerformance[_0x2b8e42(0x23e)](_0x2b8e42(0x2db))[_0x2b8e42(0x1de)]()['write'](),_0x1803d0[_0x2b8e42(0x2a7)]((_0x10779f,_0x3ec99f)=>{const _0x509142=_0x2b8e42;let _0xfc8811,_0x145088=[];_0x3ec99f==0x0?(_0x4d9ab8['portfolio'][_0x509142(0x2a7)](_0x369a5f=>{const _0x3514c6=_0x509142;!_0x369a5f['excluded']&&_0x145088[_0x3514c6(0x24e)]({'coin':_0x369a5f[_0x3514c6(0x2b9)],'number':_0x369a5f[_0x3514c6(0x1f2)],'price':_0x369a5f[_0x3514c6(0x1ed)]});}),_0xfc8811={'date':_0x10779f,'eur':_0x572b19[stablecoins[_0x509142(0x1e6)][_0x509142(0x2b9)]][_0x3ec99f],'usd':_0x572b19[stablecoins[_0x509142(0x253)]['coin']][_0x3ec99f],'coins':_0x145088}):(_0x4d9ab8[_0x509142(0x2d0)][_0x509142(0x2a7)](_0x55bc9d=>{const _0x4585e3=_0x509142;!_0x55bc9d[_0x4585e3(0x2ab)]&&_0x145088[_0x4585e3(0x24e)]({'coin':_0x55bc9d['coin'],'number':_0x59de98[_0x55bc9d[_0x4585e3(0x2b9)]][_0x10779f],'price':_0x55bc9d[_0x4585e3(0x2b9)]==config[_0x4585e3(0x204)]?0x1:_0x572b19[_0x55bc9d[_0x4585e3(0x2b9)]][_0x3ec99f]});}),_0xfc8811={'date':_0x10779f,'eur':_0x572b19[stablecoins['eur'][_0x509142(0x2b9)]][_0x3ec99f],'usd':_0x572b19[stablecoins[_0x509142(0x253)][_0x509142(0x2b9)]][_0x3ec99f],'coins':_0x145088}),dbPerformance[_0x509142(0x23e)](_0x509142(0x2db))[_0x509142(0x24e)](_0xfc8811)[_0x509142(0x23f)]();}),emitPerformance(),await resetCoinResults();for(let _0xb53f65 of _0x49e778){_0xb53f65[_0x2b8e42(0x2b9)]!=config['basecoin']&&await updateCoinResults(_0xb53f65);}logHistory(_0x2b8e42(0x29a),_0x2b8e42(0x2a0));}catch(_0x13f473){await handleError(_0x13f473,_0x2b8e42(0x2cf));}}async function getCloses(_0x2ae388,_0x2e42a7,_0x308c6f=undefined){const _0x344979=_0x1842af,_0x2d5b8b='1d';let _0x449d02,_0x2cecf6;const _0x326331=fns['differenceInCalendarDays'](new Date(),_0x2e42a7)+0x1;try{const _0x4a3d2c=exchange[_0x344979(0x28f)]()-_0x326331*0x18*0xe10*0x3e8;_0x449d02=await exchange['fetchOHLCV'](_0x2ae388,_0x2d5b8b,_0x4a3d2c,_0x308c6f),_0x2cecf6=await exchange['fetchTickers'](_0x2ae388);}catch(_0x37f3a0){await handleError(_0x37f3a0,_0x344979(0x2e4));}let _0x254182=ohlcvToCloses(_0x449d02);return _0x254182[_0x344979(0x24e)](_0x2cecf6[_0x2ae388]['last']),_0x254182;}function ohlcvToCloses(_0x39d5f6){let _0x2a2d14=[];return _0x39d5f6['forEach'](function(_0x34cb2b){const _0xc432ed=_0x157b;_0x2a2d14[_0xc432ed(0x24e)](_0x34cb2b[0x4]);}),_0x2a2d14;}function getConfiguration(_0x16b2ab){const _0x19af95=_0x1842af;let _0x51b210=dbConfig[_0x19af95(0x23e)](_0x19af95(0x294))[_0x19af95(0x20a)]({'botID':_0x16b2ab})[_0x19af95(0x267)]();if(_0x51b210){let _0x5c6618=![];!_0x51b210[_0x19af95(0x1e2)]&&(_0x51b210={..._0x51b210,'exchange':_0x19af95(0x2c2)},_0x5c6618=!![]),!_0x51b210[_0x19af95(0x204)]&&(_0x51b210={..._0x51b210,'basecoin':_0x19af95(0x2ee)},_0x5c6618=!![]),!_0x51b210[_0x19af95(0x234)]&&(_0x51b210={..._0x51b210,'ordertype':_0x19af95(0x1eb)},_0x5c6618=!![]),!_0x51b210[_0x19af95(0x298)]&&(_0x51b210={..._0x51b210,'timeout':0x14},_0x5c6618=!![]),!_0x51b210['emojibuy']&&(_0x51b210={..._0x51b210,'emojibuy':''},_0x5c6618=!![]),!_0x51b210[_0x19af95(0x25a)]&&(_0x51b210={..._0x51b210,'emojisell':''},_0x5c6618=!![]),!_0x51b210[_0x19af95(0x263)]&&(_0x51b210={..._0x51b210,'showname':![]},_0x5c6618=!![]),_0x5c6618&&(_0x51b210={'botID':_0x51b210[_0x19af95(0x288)],'exchange':_0x51b210[_0x19af95(0x1e2)],'apiKey':_0x51b210[_0x19af95(0x217)],'apiSecret':_0x51b210[_0x19af95(0x207)],'basecoin':_0x51b210[_0x19af95(0x204)],'botname':_0x51b210[_0x19af95(0x1f3)],'showname':_0x51b210[_0x19af95(0x263)],'threshold':_0x51b210[_0x19af95(0x29f)],'ordertype':_0x51b210['ordertype'],'timeout':_0x51b210[_0x19af95(0x298)],'startdate':_0x51b210[_0x19af95(0x262)],'recreate':_0x51b210[_0x19af95(0x2c0)],'timeshift':_0x51b210[_0x19af95(0x1ff)],'headless':_0x51b210['headless'],'cooldown':_0x51b210[_0x19af95(0x2b3)],'emojibuy':_0x51b210[_0x19af95(0x2e1)],'emojisell':_0x51b210['emojisell'],'portfolio':_0x51b210[_0x19af95(0x2d0)]},dbConfig['get'](_0x19af95(0x294))['remove']()[_0x19af95(0x23f)](),dbConfig['get'](_0x19af95(0x294))[_0x19af95(0x24e)](_0x51b210)[_0x19af95(0x23f)]());}else _0x51b210={'botID':_0x16b2ab,'exchange':_0x19af95(0x2c2),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x19af95(0x25c)+_0x16b2ab,'showname':![],'threshold':'3','ordertype':_0x19af95(0x1eb),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x19af95(0x1ff)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x51b210;}function emittedConfiguration(){const _0x21bc02=_0x1842af;let _0x4633b7;return config[_0x21bc02(0x217)]==''?_0x4633b7=config:_0x4633b7={...config,'apiKey':_0x21bc02(0x1e7),'apiSecret':_0x21bc02(0x1e7)},_0x4633b7;}function getSettings(){const _0xa52c38=_0x1842af;return dbSettings['get'](_0xa52c38(0x20e))['value']();}function getSecure(){const _0x20f0fa=_0x1842af;return dbSecure[_0x20f0fa(0x23e)](_0x20f0fa(0x215))[_0x20f0fa(0x267)]()||{};}function updateTimeshift(_0x1f95fa){const _0x4a0087=_0x1842af;let _0x5c00ea=dbConfig['get'](_0x4a0087(0x294))[_0x4a0087(0x20a)]({'botID':botID})[_0x4a0087(0x267)]();_0x5c00ea&&dbConfig[_0x4a0087(0x23e)](_0x4a0087(0x294))['find']({'botID':botID})[_0x4a0087(0x1e5)]({'timeshift':_0x1f95fa})[_0x4a0087(0x23f)](),config['timeshift']=_0x1f95fa,proxyEmit(_0x4a0087(0x1f0),emittedConfiguration());}async function storeConfiguration(_0x5b0528){const _0x38537b=_0x1842af;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2d0c85=dbConfig[_0x38537b(0x23e)](_0x38537b(0x294))[_0x38537b(0x20a)]({'botID':botID})[_0x38537b(0x267)]();_0x5b0528={..._0x5b0528,'apiKey':crypt['decrypt'](secure[_0x38537b(0x1fe)],_0x5b0528[_0x38537b(0x217)])[_0x38537b(0x2ea)],'apiSecret':crypt[_0x38537b(0x220)](secure[_0x38537b(0x1fe)],_0x5b0528['apiSecret'])[_0x38537b(0x2ea)]};if(_0x2d0c85){if(_0x5b0528[_0x38537b(0x217)]==_0x38537b(0x1e7))_0x5b0528['apiKey']=config[_0x38537b(0x217)];if(_0x5b0528[_0x38537b(0x207)]==_0x38537b(0x1e7))_0x5b0528[_0x38537b(0x207)]=config[_0x38537b(0x207)];dbConfig[_0x38537b(0x23e)](_0x38537b(0x294))[_0x38537b(0x20a)]({'botID':botID})[_0x38537b(0x1e5)](_0x5b0528)[_0x38537b(0x23f)]();}else dbConfig['get'](_0x38537b(0x294))['push'](_0x5b0528)[_0x38537b(0x23f)](),process[_0x38537b(0x29e)]({'status':_0x38537b(0x26b),'live':'running'});config={..._0x5b0528};if(config[_0x38537b(0x2c0)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x5b0528[_0x38537b(0x1f3)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x1d8ca6){const _0x47215c=_0x1842af,_0x438811={...config,'headless':_0x1d8ca6[_0x47215c(0x24f)]};let _0x1a30b0=dbConfig['get'](_0x47215c(0x294))[_0x47215c(0x20a)]({'botID':botID})['value']();_0x1a30b0&&dbConfig[_0x47215c(0x23e)]('bot')[_0x47215c(0x20a)]({'botID':botID})['assign'](_0x438811)[_0x47215c(0x23f)](),config={..._0x438811},proxyEmit(_0x47215c(0x1f0),emittedConfiguration());}function noslash(_0x24ec3a){const _0x465f5e=_0x1842af;return _0x24ec3a[_0x465f5e(0x2d8)]('/','');}function updateNumberCoins(_0x4c20f9){const _0x1e33bf=_0x1842af;_0x4c20f9[_0x1e33bf(0x236)]&&_0x4c20f9[_0x1e33bf(0x236)]==_0x1e33bf(0x233)&&_0x4c20f9[_0x1e33bf(0x221)][_0x1e33bf(0x2a7)](_0xc70bf5=>{const _0x1d2e11=_0x1e33bf;let _0x35916f=currentCoins[_0x1d2e11(0x20a)](_0x14c60b=>_0x14c60b[_0x1d2e11(0x2b9)]==_0xc70bf5[_0x1d2e11(0x227)]),_0x164de1=config[_0x1d2e11(0x2d0)][_0x1d2e11(0x20a)](_0x541aeb=>_0x541aeb[_0x1d2e11(0x2b9)]==_0xc70bf5[_0x1d2e11(0x227)]);if(_0x35916f&&_0x164de1)_0x35916f[_0x1d2e11(0x1f8)]=Number(_0xc70bf5[_0x1d2e11(0x2a5)])+(_0x164de1[_0x1d2e11(0x248)]||0x0);});if(_0x4c20f9[_0x1e33bf(0x236)]&&_0x4c20f9[_0x1e33bf(0x236)]==_0x1e33bf(0x28d)){if(_0x4c20f9[_0x1e33bf(0x213)]==_0x1e33bf(0x2d5)&&_0x4c20f9['orderStatus']==_0x1e33bf(0x226)){if(lastOrders)lastOrders['forEach'](_0x50e88c=>{const _0x10d54f=_0x1e33bf;if(_0x50e88c[_0x10d54f(0x2b2)]==_0x4c20f9[_0x10d54f(0x2b2)]){if(_0x50e88c[_0x10d54f(0x235)])_0x50e88c[_0x10d54f(0x2dc)]=_0x4c20f9[_0x10d54f(0x240)]*_0x50e88c[_0x10d54f(0x2b1)];else _0x50e88c[_0x10d54f(0x2dc)]=_0x4c20f9[_0x10d54f(0x240)];}});}}}async function getCoins(_0x3a5d46=!![],_0x50f0e8=config[_0x1842af(0x204)]){const _0x3438ad=_0x1842af;let _0x30e1e0,_0xa9600a=[],_0x46b8c6=[],_0x224435=[];try{_0x30e1e0=await exchange[_0x3438ad(0x2ac)](),mybalances=_0x30e1e0[_0x3438ad(0x2af)];if(!_0x3a5d46)for(const [_0x254cf1,_0x364867]of Object[_0x3438ad(0x25d)](mybalances)){_0x224435['push'](_0x254cf1);}else config['portfolio']['forEach'](_0x2daf4d=>{const _0x28c3b8=_0x3438ad;if(!_0x2daf4d[_0x28c3b8(0x2ab)])_0x224435[_0x28c3b8(0x24e)](_0x2daf4d['coin']);});if(_0x50f0e8=='')for(const [_0x5920fa,_0x1e6a9d]of Object['entries'](mybalances)){_0x1e6a9d['toString']()!=0x0&&_0x46b8c6[_0x3438ad(0x24e)]({'coin':_0x5920fa});}else for(const [_0x3ed87a,_0x3ff27d]of Object[_0x3438ad(0x25d)](mybalances)){if(_0x224435[_0x3438ad(0x24d)](_0x3ed87a)){const _0x3c137a=config[_0x3438ad(0x2d0)]['find'](_0x2e29f3=>_0x2e29f3[_0x3438ad(0x2b9)]==_0x3ed87a);if((_0x3ff27d[_0x3438ad(0x2d2)]()!=0x0||_0x3c137a)&&(allSymbols[_0x3438ad(0x24d)](_0x3ed87a+'/'+_0x50f0e8)||_0x3ed87a==_0x50f0e8))_0x46b8c6[_0x3438ad(0x24e)]({'coin':_0x3ed87a,'symbol':_0x3ed87a+'/'+_0x50f0e8,'reverse':![],'number':_0x3ff27d+(_0x3c137a['offset']||0x0)}),_0x3ed87a!=_0x50f0e8&&_0xa9600a[_0x3438ad(0x24e)](_0x3ed87a+'/'+_0x50f0e8);else(_0x3ff27d[_0x3438ad(0x2d2)]()!=0x0||_0x3c137a)&&allSymbols[_0x3438ad(0x24d)](_0x50f0e8+'/'+_0x3ed87a)&&(_0x46b8c6[_0x3438ad(0x24e)]({'coin':_0x3ed87a,'symbol':_0x50f0e8+'/'+_0x3ed87a,'reverse':!![],'number':_0x3ff27d+(_0x3c137a[_0x3438ad(0x248)]||0x0)}),_0x3ed87a!=_0x50f0e8&&_0xa9600a[_0x3438ad(0x24e)](_0x50f0e8+'/'+_0x3ed87a));}}}catch(_0x81ec7b){if(!_0x3a5d46){if(_0x81ec7b['toString']()[_0x3438ad(0x24d)](_0x3438ad(0x1f6)))return logHistory(_0x3438ad(0x2df),_0x3438ad(0x1fa)),![];else{if(_0x81ec7b[_0x3438ad(0x2d2)]()[_0x3438ad(0x24d)](_0x3438ad(0x2bf)))return logHistory(_0x3438ad(0x2df),_0x3438ad(0x274)),![];else{if(_0x81ec7b['toString']()[_0x3438ad(0x24d)](_0x3438ad(0x231)))return logHistory(_0x3438ad(0x2df),_0x3438ad(0x2ec)),![];else await handleError(_0x81ec7b,_0x3438ad(0x29b));}}}else await handleError(_0x81ec7b,_0x3438ad(0x29b));}return _0x46b8c6;}async function getPortfolio(_0x2910a4){const _0x3f6b2d=_0x1842af;let _0x30f9aa=[],_0x547461=[],_0x44b39e,_0x2a043f=[],_0x16ef0f,_0x2822e7;_0x2910a4['apiKey']===_0x3f6b2d(0x1e7)||_0x2910a4[_0x3f6b2d(0x207)]===_0x3f6b2d(0x1e7)?(_0x16ef0f=config[_0x3f6b2d(0x217)],_0x2822e7=config[_0x3f6b2d(0x207)]):(_0x16ef0f=_0x2910a4['apiKey'],_0x2822e7=_0x2910a4[_0x3f6b2d(0x207)]);await initExchange(_0x16ef0f,_0x2822e7);let _0x327b38=await loadSymbols();if(_0x327b38){_0x2a043f=await getCoins(![],_0x2910a4['basecoin']);if(_0x2a043f===![])proxyEmit('portfolio',![]);else{if(_0x2910a4['basecoin']=='')proxyEmit('portfolio',_0x2a043f);else{_0x2a043f[_0x3f6b2d(0x2a7)](_0x501bd8=>{const _0x3945dd=_0x3f6b2d;_0x30f9aa[_0x3945dd(0x24e)](_0x501bd8[_0x3945dd(0x22b)]);});try{_0x547461=await exchange[_0x3f6b2d(0x275)](_0x30f9aa);}catch(_0x2601a2){await handleError(_0x2601a2,_0x3f6b2d(0x26c));}_0x2a043f[_0x3f6b2d(0x2a7)](_0x399ae3=>{const _0x446bcf=_0x3f6b2d;_0x399ae3['coin']!=_0x2910a4[_0x446bcf(0x204)]?_0x44b39e=_0x399ae3['reverse']?0x1/_0x547461[_0x399ae3['symbol']]['last']:_0x547461[_0x399ae3[_0x446bcf(0x22b)]]['last']:_0x44b39e=0x1,_0x399ae3[_0x446bcf(0x2b1)]=formatResult(_0x44b39e,0x8);}),proxyEmit(_0x3f6b2d(0x2d0),_0x2a043f);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x863587){const _0x36f723=_0x1842af;let _0x46afcd=!![];const _0x21e2b5=!_0x863587[_0x36f723(0x235)]?markets[_0x863587['symbol']][_0x36f723(0x28a)][_0x36f723(0x242)][_0x36f723(0x225)]:markets[_0x863587[_0x36f723(0x22b)]]['limits'][_0x36f723(0x2dd)][_0x36f723(0x225)],_0x3c0df2=!_0x863587[_0x36f723(0x235)]?markets[_0x863587[_0x36f723(0x22b)]]['limits'][_0x36f723(0x2dd)][_0x36f723(0x225)]:markets[_0x863587[_0x36f723(0x22b)]][_0x36f723(0x28a)][_0x36f723(0x242)][_0x36f723(0x225)];if(Math[_0x36f723(0x286)](_0x863587[_0x36f723(0x1ec)])<_0x21e2b5)_0x46afcd=![];if(Math['abs'](_0x863587['trade'])*_0x863587[_0x36f723(0x280)]<_0x3c0df2)_0x46afcd=![];return _0x46afcd;}async function getBalances(){const _0x4437cb=_0x1842af;let _0x37ffda=0x0,_0x28ba28;const _0x12ff3e=config[_0x4437cb(0x29f)];currentCoins[_0x4437cb(0x2a7)](_0x25d251=>{const _0x65ff30=_0x4437cb;if(_0x25d251[_0x65ff30(0x2b9)]!=config[_0x65ff30(0x204)]){let _0x2395f5=global['ticker'][noslash(_0x25d251[_0x65ff30(0x22b)])];_0x28ba28=_0x25d251['reverse']?0x1/_0x2395f5:_0x2395f5;}else _0x28ba28=0x1;let _0x290f85=_0x25d251[_0x65ff30(0x1f8)]*_0x28ba28;_0x37ffda+=_0x290f85,_0x25d251[_0x65ff30(0x280)]=formatResult(Number(_0x28ba28),0x8),_0x25d251[_0x65ff30(0x267)]=_0x290f85;}),currentCoins[_0x4437cb(0x2a7)](_0xcc60e=>{const _0x249549=_0x4437cb;let _0x5b7cec=config[_0x249549(0x2d0)]['find'](_0x291422=>_0x291422[_0x249549(0x2b9)]==_0xcc60e['coin']),_0x38aaea=Number(_0x5b7cec[_0x249549(0x2e3)]),_0x4f29c8=_0xcc60e['value']/_0x37ffda*0x64,_0x3213cf=_0x38aaea*_0x37ffda/0x64/_0xcc60e[_0x249549(0x280)]-_0xcc60e[_0x249549(0x1f8)];_0xcc60e[_0x249549(0x2e3)]=formatResult(_0x4f29c8,0x3),_0xcc60e[_0x249549(0x277)]=formatResult(_0x38aaea,0x3),_0xcc60e[_0x249549(0x1ec)]=formatResult(_0x3213cf,0x8),_0xcc60e['side']='',_0xcc60e[_0x249549(0x24b)]='';if(_0xcc60e[_0x249549(0x2b9)]!=config[_0x249549(0x204)]){if(_0xcc60e[_0x249549(0x2e3)]>_0x38aaea)_0xcc60e[_0x249549(0x22e)]=_0x249549(0x2ae),_0xcc60e[_0x249549(0x24b)]=checkMinimums(_0xcc60e);else _0xcc60e[_0x249549(0x2e3)]<_0x38aaea&&(_0xcc60e[_0x249549(0x22e)]=_0x249549(0x2c6),_0xcc60e['valid']=checkMinimums(_0xcc60e));}_0xcc60e[_0x249549(0x2c1)]=_0xcc60e['distribution']/_0xcc60e[_0x249549(0x277)]-0x1;}),currentCoins[_0x4437cb(0x26a)]((_0x4ab0d6,_0x25e8d5)=>_0x4ab0d6[_0x4437cb(0x2c1)]<_0x25e8d5[_0x4437cb(0x2c1)]?0x1:_0x25e8d5[_0x4437cb(0x2c1)]<_0x4ab0d6['delta']?-0x1:0x0);const _0x2671f7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2671f7[_0x4437cb(0x1e6)],'usd':_0x2671f7[_0x4437cb(0x253)],'portfolio':JSON[_0x4437cb(0x2e0)](currentCoins),'threshold':_0x12ff3e},proxyEmit(_0x4437cb(0x221),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x12ff3e});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x592789=_0x1842af;if(!lastBalances)return;let _0x43a2b0=await getStartingBalances(![]),_0x43dc8b=[],_0x3e478b;JSON[_0x592789(0x273)](lastBalances[_0x592789(0x2d0)])[_0x592789(0x2a7)](_0x1082de=>{const _0x2e6a3c=_0x592789;let _0x3d897f={'coin':_0x1082de['coin'],'number':_0x1082de[_0x2e6a3c(0x1f8)],'price':_0x1082de[_0x2e6a3c(0x280)]};_0x43dc8b[_0x2e6a3c(0x24e)](_0x3d897f);});const _0xa840d1=await getFiat();_0x3e478b={'date':lastBalances[_0x592789(0x2e2)][_0x592789(0x29c)]('\x20')[0x0],'eur':_0xa840d1[_0x592789(0x1e6)],'usd':_0xa840d1[_0x592789(0x253)],'coins':_0x43dc8b};let _0x2423d4=dbPerformance[_0x592789(0x23e)](_0x592789(0x2db))[_0x592789(0x20a)]({'date':_0x3e478b[_0x592789(0x279)]})[_0x592789(0x267)]();_0x2423d4?dbPerformance['get'](_0x592789(0x2db))[_0x592789(0x20a)]({'date':_0x3e478b[_0x592789(0x279)]})['assign'](_0x3e478b)[_0x592789(0x23f)]():dbPerformance['get'](_0x592789(0x2db))[_0x592789(0x24e)](_0x3e478b)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5970ba=_0x1842af;if(dbPerformance['has'](_0x5970ba(0x2db))[_0x5970ba(0x267)]()){let _0x4c1a54=dbPerformance[_0x5970ba(0x23e)](_0x5970ba(0x2db))['sortBy'](_0x5970ba(0x279))[_0x5970ba(0x267)]();proxyEmit('performance',_0x4c1a54),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0xaf0f9f=!![]){const _0x54cfe6=_0x1842af;let _0x5b4dff=dbPerformance['get'](_0x54cfe6(0x2db))[_0x54cfe6(0x20a)]({'date':config[_0x54cfe6(0x262)]})[_0x54cfe6(0x267)]();config[_0x54cfe6(0x217)]!=''&&!_0x5b4dff&&(await setStartDatePerformance(config),_0x5b4dff=dbPerformance[_0x54cfe6(0x23e)](_0x54cfe6(0x2db))[_0x54cfe6(0x20a)]({'date':config[_0x54cfe6(0x262)]})[_0x54cfe6(0x267)]());if(config[_0x54cfe6(0x217)]==''||!_0x5b4dff)return{};let _0x57cfa2=0x0,_0x3bcb81=0x0,_0x1ee4da=0x0,_0x5b0bda=[],_0x41934b=0x0;config[_0x54cfe6(0x2d0)][_0x54cfe6(0x2a7)](_0x401c76=>{const _0xfa8169=_0x54cfe6;if(!_0x401c76[_0xfa8169(0x2ab)]){_0x5b0bda[_0x41934b]={'coin':_0x401c76[_0xfa8169(0x2b9)],'symbol':_0x401c76[_0xfa8169(0x22b)],'number':_0x401c76[_0xfa8169(0x1f2)],'price':_0x401c76['startprice']},_0x57cfa2+=_0x401c76[_0xfa8169(0x1ed)]*_0x401c76[_0xfa8169(0x1f2)];if(config[_0xfa8169(0x204)]==_0xfa8169(0x2ee))_0x3bcb81+=_0x401c76['startprice']*_0x401c76[_0xfa8169(0x1f2)]*_0x5b4dff[_0xfa8169(0x1e6)],_0x1ee4da+=_0x401c76[_0xfa8169(0x1ed)]*_0x401c76[_0xfa8169(0x1f2)]*_0x5b4dff[_0xfa8169(0x253)];else{if(config['basecoin']==_0xfa8169(0x28b)||config[_0xfa8169(0x204)]==_0xfa8169(0x205)||config['basecoin']=='USDC')_0x3bcb81+=_0x401c76['startprice']*_0x401c76[_0xfa8169(0x1f2)]*_0x5b4dff[_0xfa8169(0x1e6)]/_0x5b4dff[_0xfa8169(0x253)],_0x1ee4da+=_0x401c76[_0xfa8169(0x1ed)]*_0x401c76[_0xfa8169(0x1f2)];else config[_0xfa8169(0x204)]==_0xfa8169(0x241)&&(_0x3bcb81+=_0x401c76[_0xfa8169(0x1ed)]*_0x401c76[_0xfa8169(0x1f2)],_0x1ee4da+=_0x401c76[_0xfa8169(0x1ed)]*_0x401c76[_0xfa8169(0x1f2)]*_0x5b4dff[_0xfa8169(0x253)]/_0x5b4dff[_0xfa8169(0x1e6)]);}_0x41934b++;}});let _0x2ed8fb={'basecoin':_0x57cfa2,'eur':_0x3bcb81,'usd':_0x1ee4da,'coins':_0x5b0bda};if(_0xaf0f9f)proxyEmit('starting-balances',_0x2ed8fb);return _0x2ed8fb;}function headlessMode(_0x49dd5b){const _0x54bcdf=_0x1842af;let _0x1b1060=_0x49dd5b[_0x54bcdf(0x2d0)],_0x469d40=_0x49dd5b[_0x54bcdf(0x29f)],_0x7ef7b9=[];for(let _0x1f7a24 of _0x1b1060){if(_0x1f7a24[_0x54bcdf(0x2b9)]!=config[_0x54bcdf(0x204)]){if(_0x1f7a24[_0x54bcdf(0x2e3)]/_0x1f7a24['target']-0x1>=_0x469d40/0x64){if(_0x1f7a24[_0x54bcdf(0x24b)])_0x7ef7b9[_0x54bcdf(0x24e)](_0x1f7a24);}else{if(_0x1f7a24[_0x54bcdf(0x2e3)]/_0x1f7a24[_0x54bcdf(0x277)]-0x1<=-_0x469d40/0x64){if(_0x1f7a24[_0x54bcdf(0x24b)])_0x7ef7b9['push'](_0x1f7a24);}}}}_0x7ef7b9['length']>0x0&&placeOrder(_0x7ef7b9);}function symbolToCoin(_0x58ae9f){const _0x576f11=_0x1842af;let _0x3854ff;if(_0x58ae9f[_0x576f11(0x24d)]('/'+config['basecoin']))_0x3854ff=_0x58ae9f[_0x576f11(0x2d8)]('/'+config[_0x576f11(0x204)],'');if(_0x58ae9f[_0x576f11(0x24d)](config[_0x576f11(0x204)]+'/'))_0x3854ff=_0x58ae9f['replace'](config['basecoin']+'/','');return _0x3854ff;}async function validateOrders(_0x3edb9b=0x0){const _0x391088=_0x1842af;let _0x2bb183=[],_0x82afcb=config[_0x391088(0x234)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x391088(0x2a7)](_0xbb4c7a=>{const _0x18bd8d=_0x391088;let _0x30a66c=previousCoins[_0x18bd8d(0x20a)](_0x500910=>_0x500910[_0x18bd8d(0x2b9)]==symbolToCoin(_0xbb4c7a['symbol'])),_0x16802b=currentCoins[_0x18bd8d(0x20a)](_0x28296c=>_0x28296c[_0x18bd8d(0x2b9)]==symbolToCoin(_0xbb4c7a['symbol'])),_0x3211dc,_0x3a5c7d;_0xbb4c7a[_0x18bd8d(0x22e)]==_0x18bd8d(0x2c6)&&!_0xbb4c7a[_0x18bd8d(0x235)]||_0xbb4c7a[_0x18bd8d(0x22e)]==_0x18bd8d(0x2ae)&&_0xbb4c7a[_0x18bd8d(0x235)]?(_0x3211dc=_0x30a66c[_0x18bd8d(0x1f8)]+0.9*_0xbb4c7a[_0x18bd8d(0x2dc)],_0x3a5c7d=_0x30a66c[_0x18bd8d(0x1f8)]+1.1*_0xbb4c7a[_0x18bd8d(0x2dc)]):(_0x3211dc=_0x30a66c[_0x18bd8d(0x1f8)]-1.1*_0xbb4c7a[_0x18bd8d(0x2dc)],_0x3a5c7d=_0x30a66c[_0x18bd8d(0x1f8)]-0.9*_0xbb4c7a[_0x18bd8d(0x2dc)]);const _0x2d4a1c=_0xbb4c7a[_0x18bd8d(0x2dc)]!=0x0&&_0x16802b[_0x18bd8d(0x1f8)]>=_0x3211dc&&_0x16802b['number']<=_0x3a5c7d;_0x2bb183[_0x18bd8d(0x24e)](_0x2d4a1c);if(_0x2d4a1c&&config[_0x18bd8d(0x234)]!=_0x18bd8d(0x1eb)){if(_0xbb4c7a[_0x18bd8d(0x235)])logHistory(_0x18bd8d(0x200),_0x18bd8d(0x1ea)+_0xbb4c7a[_0x18bd8d(0x22b)]+'\x20'+_0xbb4c7a[_0x18bd8d(0x22e)]+'\x20#'+formatResult(_0xbb4c7a['filled']/_0xbb4c7a[_0x18bd8d(0x2b1)],0x8)+'\x20@'+formatResult(_0xbb4c7a[_0x18bd8d(0x2b1)],0x8));else logHistory('order',_0x18bd8d(0x1ea)+_0xbb4c7a[_0x18bd8d(0x22b)]+'\x20'+_0xbb4c7a[_0x18bd8d(0x22e)]+'\x20#'+formatResult(_0xbb4c7a[_0x18bd8d(0x2dc)],0x8)+'\x20@'+formatResult(_0xbb4c7a[_0x18bd8d(0x2b1)],0x8));}}),_0x2bb183['forEach']((_0x1b1ab4,_0x471289)=>{const _0x4a6a65=_0x391088;if(_0x1b1ab4)lastOrders[_0x4a6a65(0x268)](_0x471289,0x1);});if(_0x3edb9b<_0x82afcb&&_0x2bb183[_0x391088(0x24d)](![])){if(_0x3edb9b==0x0){config[_0x391088(0x234)]==_0x391088(0x1eb)?logHistory('error',_0x391088(0x2e9)):logHistory(_0x391088(0x2df),_0x391088(0x264));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3edb9b);},0xa*0x3e8);}else{(_0x3edb9b==0x1||_0x3edb9b==Math[_0x391088(0x265)](_0x82afcb/0x2)||_0x3edb9b==_0x82afcb-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3edb9b);},validateOrderInterval);}}else{lockOrders=![];if(_0x3edb9b>0x0&&!_0x2bb183[_0x391088(0x24d)](![]))config[_0x391088(0x234)]==_0x391088(0x1eb)?logHistory(_0x391088(0x29a),_0x391088(0x210)):logHistory(_0x391088(0x29a),_0x391088(0x247));else _0x3edb9b>0x0&&_0x2bb183['includes'](![])&&(config[_0x391088(0x234)]=='market'?logHistory(_0x391088(0x29a),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x391088(0x265)](_0x82afcb*validateOrderInterval/0xea60)+_0x391088(0x230)):(lastOrders[_0x391088(0x2a7)](async _0x302559=>{const _0x5a311e=_0x391088;try{const _0x5cc214=await exchange[_0x5a311e(0x252)](_0x302559[_0x5a311e(0x2b2)],_0x302559['symbol']);}catch(_0x134bcf){if(_0x134bcf[_0x5a311e(0x2d2)]()[_0x5a311e(0x24d)](_0x5a311e(0x212))){}else await handleError(_0x134bcf,_0x5a311e(0x2d4));}}),logHistory(_0x391088(0x29a),_0x391088(0x22a)+Math[_0x391088(0x265)](_0x82afcb*validateOrderInterval/0xea60)+_0x391088(0x230))));}}async function resetCoinResults(){const _0x1d0dfb=_0x1842af;dbCoinResults[_0x1d0dfb(0x23e)]('coins')[_0x1d0dfb(0x1de)]()[_0x1d0dfb(0x23f)]();let _0x18847b=await getStartingBalances(![]);_0x18847b['coins']['forEach'](_0x544498=>{const _0x1c2855=_0x1d0dfb,_0xb2093b=_0x544498[_0x1c2855(0x22b)][_0x1c2855(0x24d)](config[_0x1c2855(0x204)]+'/');if(_0x544498[_0x1c2855(0x2b9)]!=config[_0x1c2855(0x204)]){let _0x137eda={'coin':_0x544498[_0x1c2855(0x2b9)],'number':_0x544498[_0x1c2855(0x1f8)],'breakeven':_0x544498[_0x1c2855(0x2b1)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1c2855(0x23e)](_0x1c2855(0x1f1))['push'](_0x137eda)[_0x1c2855(0x23f)]();}});}async function updateCoinResults(_0x144da3){const _0x5d7201=_0x1842af;let _0x4a0b41,_0x1ba43b,_0x54ca39,_0x55b582,_0x19495d,_0x3d4ccf,_0x4de7cb=dbCoinResults[_0x5d7201(0x23e)](_0x5d7201(0x1f1))[_0x5d7201(0x20a)]({'coin':_0x144da3[_0x5d7201(0x2b9)]})[_0x5d7201(0x267)]();if(!_0x4de7cb)return;if(_0x144da3[_0x5d7201(0x271)]&&_0x144da3[_0x5d7201(0x271)][_0x5d7201(0x224)]==config[_0x5d7201(0x204)])_0x4a0b41=_0x144da3[_0x5d7201(0x271)][_0x5d7201(0x2dd)];else{if(_0x144da3[_0x5d7201(0x271)]&&_0x144da3[_0x5d7201(0x271)][_0x5d7201(0x224)]=='BNB')_0x4a0b41=_0x144da3[_0x5d7201(0x271)][_0x5d7201(0x2dd)]*global[_0x5d7201(0x2c5)]['BNB'+config[_0x5d7201(0x204)]];else _0x4a0b41=0.001*_0x144da3['filled'];}const _0x5137c0=_0x144da3[_0x5d7201(0x22b)][_0x5d7201(0x24d)](config[_0x5d7201(0x204)]+'/');_0x5137c0&&(_0x3d4ccf={'coin':_0x144da3[_0x5d7201(0x2b9)],'symbol':_0x144da3[_0x5d7201(0x22b)],'filled':_0x144da3['filled']*_0x144da3[_0x5d7201(0x2b1)],'side':_0x144da3[_0x5d7201(0x22e)]==_0x5d7201(0x2ae)?_0x5d7201(0x2c6):_0x5d7201(0x2ae),'price':0x1/_0x144da3[_0x5d7201(0x2b1)]},_0x144da3={..._0x3d4ccf});_0x144da3[_0x5d7201(0x22e)]=='buy'?_0x54ca39=(_0x4de7cb[_0x5d7201(0x257)]*_0x4de7cb['number']+_0x144da3['price']*_0x144da3[_0x5d7201(0x2dc)])/(_0x4de7cb[_0x5d7201(0x1f8)]+_0x144da3[_0x5d7201(0x2dc)]):_0x54ca39=(_0x4de7cb['breakeven']*_0x4de7cb[_0x5d7201(0x1f8)]-_0x144da3[_0x5d7201(0x2b1)]*_0x144da3[_0x5d7201(0x2dc)])/(_0x4de7cb[_0x5d7201(0x1f8)]-_0x144da3[_0x5d7201(0x2dc)]);_0x144da3['side']==_0x5d7201(0x2c6)?_0x55b582=_0x4de7cb[_0x5d7201(0x245)]:_0x55b582=_0x4de7cb[_0x5d7201(0x245)]+(_0x144da3[_0x5d7201(0x2b1)]-_0x4de7cb[_0x5d7201(0x257)])*_0x144da3[_0x5d7201(0x2dc)];_0x1ba43b=_0x144da3[_0x5d7201(0x22e)]==_0x5d7201(0x2ae)?_0x4de7cb[_0x5d7201(0x1f8)]-_0x144da3[_0x5d7201(0x2dc)]:_0x4de7cb[_0x5d7201(0x1f8)]+_0x144da3[_0x5d7201(0x2dc)],_0x19495d=(_0x144da3[_0x5d7201(0x2b1)]-_0x54ca39)*_0x1ba43b;let _0x40d88a={'coin':_0x144da3[_0x5d7201(0x2b9)],'number':_0x1ba43b,'breakeven':formatResult(_0x54ca39,0x8),'realized':formatResult(_0x55b582,0x8),'unrealized':formatResult(_0x19495d,0x8),'fees':formatResult(_0x4de7cb[_0x5d7201(0x249)]+_0x4a0b41,0x8),'sells':_0x144da3['side']=='sell'?_0x4de7cb[_0x5d7201(0x2cb)]+0x1:_0x4de7cb['sells'],'buys':_0x144da3[_0x5d7201(0x22e)]==_0x5d7201(0x2c6)?_0x4de7cb['buys']+0x1:_0x4de7cb['buys']};dbCoinResults[_0x5d7201(0x23e)]('coins')['find']({'coin':_0x144da3[_0x5d7201(0x2b9)]})[_0x5d7201(0x1e5)](_0x40d88a)[_0x5d7201(0x23f)]();}async function placeOrder(_0x33b0cb){const _0x439dc2=_0x1842af,_0x1eaf66=config[_0x439dc2(0x234)]==_0x439dc2(0x1eb)?_0x439dc2(0x1eb):_0x439dc2(0x24a);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x439dc2(0x273)](JSON[_0x439dc2(0x2e0)](currentCoins));for(const _0x4c288a of _0x33b0cb){let _0x161d01,_0x1cf316,_0x57b8f8,_0x1e9f0e,_0x38834f,_0x2250d3=_0x4c288a[_0x439dc2(0x22b)];try{const _0x73328d=await exchange[_0x439dc2(0x275)](_0x2250d3),_0x3c9270=_0x73328d[_0x2250d3];_0x161d01=_0x3c9270[_0x439dc2(0x280)],_0x1cf316=_0x3c9270[_0x439dc2(0x26f)],_0x57b8f8=_0x3c9270[_0x439dc2(0x2ce)];_0x4c288a[_0x439dc2(0x235)]?(_0x1e9f0e=_0x4c288a[_0x439dc2(0x22e)]==_0x439dc2(0x2c6)?_0x439dc2(0x2ae):_0x439dc2(0x2c6),_0x38834f=Math[_0x439dc2(0x286)](_0x4c288a[_0x439dc2(0x1ec)])/_0x161d01):(_0x1e9f0e=_0x4c288a[_0x439dc2(0x22e)],_0x38834f=Math[_0x439dc2(0x286)](_0x4c288a[_0x439dc2(0x1ec)]));_0x1eaf66=='limit'&&(config[_0x439dc2(0x234)]=='limit-high'&&(_0x161d01=_0x1e9f0e==_0x439dc2(0x2c6)?_0x1cf316:_0x57b8f8),config[_0x439dc2(0x234)]==_0x439dc2(0x2ba)&&(_0x161d01=_0x1e9f0e==_0x439dc2(0x2c6)?_0x57b8f8:_0x1cf316));_0x38834f=formatResult(_0x38834f,0x8),_0x161d01=formatResult(_0x161d01,0x8);const _0x3f7875=await exchange['createOrder'](_0x2250d3,_0x1eaf66,_0x1e9f0e,_0x38834f,_0x161d01);lastOrders[_0x439dc2(0x24e)]({'orderId':_0x3f7875['id'],'symbol':_0x2250d3,'side':_0x1e9f0e,'reverse':_0x4c288a[_0x439dc2(0x235)],'amount':_0x4c288a[_0x439dc2(0x235)]?_0x3f7875['amount']*_0x3f7875[_0x439dc2(0x2b1)]:_0x3f7875['amount'],'filled':_0x4c288a['reverse']?_0x3f7875[_0x439dc2(0x2dc)]*_0x3f7875[_0x439dc2(0x2b1)]:_0x3f7875[_0x439dc2(0x2dc)],'price':_0x3f7875[_0x439dc2(0x2b1)]});const _0x2c0f9f=_0x1e9f0e=='sell'?config[_0x439dc2(0x25a)]?String[_0x439dc2(0x291)]('0x'+config[_0x439dc2(0x25a)])+'\x20':'':config[_0x439dc2(0x2e1)]?String[_0x439dc2(0x291)]('0x'+config[_0x439dc2(0x2e1)])+'\x20':'',_0x1ec754=_0x1eaf66==_0x439dc2(0x1eb)?_0x439dc2(0x1e0):config[_0x439dc2(0x234)]==_0x439dc2(0x1e8)?_0x439dc2(0x23c):_0x439dc2(0x21d);if(_0x1eaf66==_0x439dc2(0x1eb))logHistory(_0x439dc2(0x200),''+_0x2c0f9f+_0x1ec754+_0x439dc2(0x2bd)+_0x2250d3+'\x20'+_0x1e9f0e+'\x20#'+formatResult(_0x3f7875['filled'],0x8)+'\x20@'+formatResult(_0x3f7875[_0x439dc2(0x2b1)],0x8));else logHistory('order',''+_0x2c0f9f+_0x1ec754+_0x439dc2(0x2bd)+_0x2250d3+'\x20'+_0x1e9f0e+'\x20#'+formatResult(_0x3f7875['amount'],0x8)+'\x20@'+formatResult(_0x3f7875['price'],0x8));_0x3f7875[_0x439dc2(0x2b9)]=_0x4c288a[_0x439dc2(0x2b9)],await updateCoinResults(_0x3f7875);if(config[_0x439dc2(0x2b3)]!=0x0){let _0x131098=null;if(cooldownTracker[_0x439dc2(0x2ed)]==config[_0x439dc2(0x2b3)]-0x1)_0x131098=cooldownTracker['shift']();const _0x10dc2a=getTimeStamp();cooldownTracker[_0x439dc2(0x24e)](_0x10dc2a);if(_0x131098){const _0x3dcdc9=fns[_0x439dc2(0x256)](new Date(_0x10dc2a),new Date(_0x131098));_0x3dcdc9<cooldownInterval&&(logHistory(_0x439dc2(0x2df),'Executed\x20'+config[_0x439dc2(0x2b3)]+_0x439dc2(0x261)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x439dc2(0x272)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x23a5a1){if(_0x23a5a1[_0x439dc2(0x2d2)]()[_0x439dc2(0x24d)](_0x439dc2(0x2c4)))logHistory(_0x439dc2(0x2df),_0x439dc2(0x2a6)+_0x2250d3);else{if(_0x23a5a1['toString']()[_0x439dc2(0x24d)]('Invalid\x20quantity'))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x2250d3);else await handleError(_0x23a5a1,_0x439dc2(0x229));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x439dc2(0x24f)]&&(config['ordertype']==_0x439dc2(0x1eb)?logHistory(_0x439dc2(0x2df),_0x439dc2(0x201)):logHistory(_0x439dc2(0x2df),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x439dc2(0x24f)]&&logHistory(_0x439dc2(0x2df),_0x439dc2(0x2c3)));}}function logHistory(_0x386469,_0x4cb4c5,_0x3fe9bb=''){const _0x178795=_0x1842af;let _0x4d71df={'time':getTimeStamp(),'type':_0x386469,'event':_0x4cb4c5,'botname':config[_0x178795(0x1f3)],'showname':config['showname']};dbLogs[_0x178795(0x23e)](_0x178795(0x297))[_0x178795(0x24e)](_0x4d71df)['write']();if(_0x3fe9bb=='')_0x3fe9bb=_0x4cb4c5;proxyEmit(_0x178795(0x27c),{'log':_0x4d71df,'summary':_0x3fe9bb}),process[_0x178795(0x29e)]({'telegram':_0x4d71df}),logging(''+_0x4d71df[_0x178795(0x27c)]);}function emitHistory(_0x4bc582={}){const _0x103cad=_0x1842af;Object['keys'](_0x4bc582)[_0x103cad(0x2ed)]==0x0&&(_0x4bc582={'type':[_0x103cad(0x200),_0x103cad(0x27c)],'event':'','page':0x1});if(_0x4bc582[_0x103cad(0x216)][_0x103cad(0x24d)](_0x103cad(0x27c)))_0x4bc582[_0x103cad(0x216)][_0x103cad(0x268)](_0x4bc582[_0x103cad(0x216)][_0x103cad(0x293)](_0x103cad(0x27c)),0x1,_0x103cad(0x2df),_0x103cad(0x29a));if(dbLogs[_0x103cad(0x2b5)](_0x103cad(0x297))[_0x103cad(0x267)]()){let _0x3681a8=dbLogs['get']('logs')['filter'](_0xe15d5e=>{const _0x22c1ac=_0x103cad;if(_0x4bc582[_0x22c1ac(0x216)][_0x22c1ac(0x2ed)]==0x0)return![];else return _0x4bc582['type'][_0x22c1ac(0x24d)](_0xe15d5e['type']);})[_0x103cad(0x228)](_0x3b5972=>{const _0x408553=_0x103cad;if(_0x4bc582[_0x408553(0x27c)]=='')return!![];else return _0x3b5972[_0x408553(0x27c)]['toLowerCase']()[_0x408553(0x24d)](_0x4bc582[_0x408553(0x27c)][_0x408553(0x2aa)]());})['sortBy'](_0x103cad(0x2e2)),_0x51a378=_0x3681a8[_0x103cad(0x267)]()[_0x103cad(0x2ed)];_0x3681a8=_0x3681a8['reverse']()[_0x103cad(0x208)]((_0x4bc582[_0x103cad(0x20f)]-0x1)*logPageSize,_0x4bc582['page']*logPageSize-0x1)[_0x103cad(0x235)]()[_0x103cad(0x267)](),proxyEmit(_0x103cad(0x1ef),{'logs':_0x3681a8,'total':_0x51a378});}else proxyEmit(_0x103cad(0x1ef),{'logs':[],'total':0x0});}async function pauseBot(_0x1402bc){const _0x370ea6=_0x1842af,_0x5532f5=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x5532f5-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x370ea6(0x21f)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x370ea6(0x2b0)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x370ea6(0x2df),_0x370ea6(0x1df)+consecutivePauses+')'),await sleep(_0x1402bc),botPaused=![],reset();}}async function handleError(_0x14da9a,_0x3df88e,_0x5eb160=''){const _0x3ed4c9=_0x1842af;if(_0x14da9a[_0x3ed4c9(0x2d2)]()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x276)))logHistory(_0x3ed4c9(0x2df),_0x3df88e+_0x3ed4c9(0x25f)),await pauseBot(pauseBotInterval);else{if(_0x14da9a[_0x3ed4c9(0x2d2)]()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x292)))logHistory(_0x3ed4c9(0x2df),_0x3df88e+_0x3ed4c9(0x2e6)),await pauseBot(pauseBotInterval);else{if(_0x14da9a['toString']()['includes'](_0x3ed4c9(0x26e)))logHistory('error',_0x3df88e+_0x3ed4c9(0x25b)),await pauseBot(pauseBotInterval);else{if(_0x14da9a[_0x3ed4c9(0x2d2)]()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x1f6)))logHistory(_0x3ed4c9(0x2df),_0x3df88e+_0x3ed4c9(0x2d9)),logHistory('error',_0x3ed4c9(0x27a)),process[_0x3ed4c9(0x29e)]({'stop':'kill'});else{if(_0x14da9a[_0x3ed4c9(0x2d2)]()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x2bf)))logHistory('error',_0x3df88e+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x3ed4c9(0x2df),_0x3ed4c9(0x27a)),process['send']({'stop':'kill'});else{if(_0x14da9a['toString']()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x231)))logHistory(_0x3ed4c9(0x2df),_0x3df88e+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3ed4c9(0x2df),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3ed4c9(0x29e)]({'stop':_0x3ed4c9(0x278)});else{if(_0x14da9a[_0x3ed4c9(0x2d2)]()['includes'](_0x3ed4c9(0x2a2)))logHistory(_0x3ed4c9(0x2df),_0x3df88e+_0x3ed4c9(0x269)),logHistory(_0x3ed4c9(0x2df),_0x3ed4c9(0x27a)),process[_0x3ed4c9(0x29e)]({'stop':_0x3ed4c9(0x278)});else{if(_0x14da9a['toString']()['includes']('InvalidNonce'))logHistory('error',_0x3df88e+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'});else _0x14da9a[_0x3ed4c9(0x2d2)]()[_0x3ed4c9(0x24d)](_0x3ed4c9(0x1e4))?logHistory('error',_0x3df88e+_0x3ed4c9(0x2c9)):(logHistory(_0x3ed4c9(0x2df),_0x3df88e+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x3df88e+_0x3ed4c9(0x2b7),_0x14da9a),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3454e2,_0x230375){const _0x387fed=_0x1842af;return parseFloat(_0x3454e2[_0x387fed(0x1ee)](_0x230375));}function logging(_0x52fb3b,_0x46ab31=''){const _0x36bd5f=_0x1842af;if(config[_0x36bd5f(0x263)])console[_0x36bd5f(0x2d1)](getTimeStamp()+':\x20'+config[_0x36bd5f(0x1f3)]+_0x36bd5f(0x244)+_0x52fb3b,_0x46ab31);else console[_0x36bd5f(0x2d1)](getTimeStamp()+_0x36bd5f(0x23d)+botID+_0x36bd5f(0x244)+_0x52fb3b,_0x46ab31);}function getServerTime(){const _0x2a543b=_0x1842af,_0x2e65b0=new Date();return _0x2e65b0[_0x2a543b(0x2a3)]()+'/'+(_0x2e65b0[_0x2a543b(0x28e)]()+0x1)[_0x2a543b(0x2d2)]()[_0x2a543b(0x2de)](0x2,'0')+'/'+_0x2e65b0['getDate']()[_0x2a543b(0x2d2)]()['padStart'](0x2,'0')+'\x20'+_0x2e65b0[_0x2a543b(0x2bb)]()['toString']()['padStart'](0x2,'0')+':'+_0x2e65b0[_0x2a543b(0x24c)]()[_0x2a543b(0x2d2)]()[_0x2a543b(0x2de)](0x2,'0')+':'+_0x2e65b0[_0x2a543b(0x255)]()[_0x2a543b(0x2d2)]()[_0x2a543b(0x2de)](0x2,'0');}function getTimeStamp(){const _0x3f43c7=_0x1842af,_0x402fb6=shiftedTime();return _0x402fb6[_0x3f43c7(0x2a3)]()+'/'+(_0x402fb6[_0x3f43c7(0x28e)]()+0x1)[_0x3f43c7(0x2d2)]()[_0x3f43c7(0x2de)](0x2,'0')+'/'+_0x402fb6[_0x3f43c7(0x2d6)]()[_0x3f43c7(0x2d2)]()[_0x3f43c7(0x2de)](0x2,'0')+'\x20'+_0x402fb6[_0x3f43c7(0x2bb)]()['toString']()[_0x3f43c7(0x2de)](0x2,'0')+':'+_0x402fb6[_0x3f43c7(0x24c)]()[_0x3f43c7(0x2d2)]()[_0x3f43c7(0x2de)](0x2,'0')+':'+_0x402fb6[_0x3f43c7(0x255)]()['toString']()[_0x3f43c7(0x2de)](0x2,'0');}function getDate(){const _0x407e8a=_0x1842af,_0x294119=shiftedTime();return _0x294119[_0x407e8a(0x2a3)]()+'/'+(_0x294119[_0x407e8a(0x28e)]()+0x1)[_0x407e8a(0x2d2)]()[_0x407e8a(0x2de)](0x2,'0')+'/'+_0x294119[_0x407e8a(0x2d6)]()[_0x407e8a(0x2d2)]()[_0x407e8a(0x2de)](0x2,'0');}function getHour(){const _0x159379=_0x1842af,_0x3505b5=shiftedTime();return _0x3505b5[_0x159379(0x2bb)]()[_0x159379(0x2d2)]()[_0x159379(0x2de)](0x2,'0');}function sleep(_0x1731bb){return new Promise(_0x2fffca=>setTimeout(_0x2fffca,_0x1731bb));}function shiftedTime(){const _0x41c6de=_0x1842af,_0x58d262=new Date();let _0x434623=_0x58d262;if(config&&config[_0x41c6de(0x1ff)]!==0x0)_0x434623=fns['add'](_0x58d262,{'hours':config[_0x41c6de(0x1ff)]});return _0x434623;}