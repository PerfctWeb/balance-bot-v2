const _0x239b7f=_0x39f9;(function(_0x1e8e89,_0x33d29b){const _0x398407=_0x39f9,_0x30c2f4=_0x1e8e89();while(!![]){try{const _0x2bfc9f=-parseInt(_0x398407(0x1f7))/0x1+parseInt(_0x398407(0x206))/0x2+-parseInt(_0x398407(0x281))/0x3+-parseInt(_0x398407(0x242))/0x4*(parseInt(_0x398407(0x263))/0x5)+-parseInt(_0x398407(0x197))/0x6*(-parseInt(_0x398407(0x1f4))/0x7)+-parseInt(_0x398407(0x274))/0x8*(-parseInt(_0x398407(0x1a1))/0x9)+parseInt(_0x398407(0x20b))/0xa;if(_0x2bfc9f===_0x33d29b)break;else _0x30c2f4['push'](_0x30c2f4['shift']());}catch(_0x4c9f61){_0x30c2f4['push'](_0x30c2f4['shift']());}}}(_0x25b4,0x22e4f));const _0x2673ae=function(){let _0x546a5e=!![];return function(_0x32b8aa,_0x9965cd){const _0x3e0fc6=_0x546a5e?function(){const _0x5337f2=_0x39f9;if(_0x9965cd){const _0x776642=_0x9965cd[_0x5337f2(0x1cb)](_0x32b8aa,arguments);return _0x9965cd=null,_0x776642;}}:function(){};return _0x546a5e=![],_0x3e0fc6;};}(),_0x432b13=_0x2673ae(this,function(){const _0x1984ec=_0x39f9;return _0x432b13[_0x1984ec(0x218)]()[_0x1984ec(0x275)](_0x1984ec(0x1f2))[_0x1984ec(0x218)]()['constructor'](_0x432b13)[_0x1984ec(0x275)](_0x1984ec(0x1f2));});_0x432b13();'use strict';const ccxt=require(_0x239b7f(0x1df)),low=require('lowdb'),FileSync=require(_0x239b7f(0x26b)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x239b7f(0x189)),Crypt=require(_0x239b7f(0x24a))[_0x239b7f(0x23d)];let exchange,wsClient;global[_0x239b7f(0x287)]={};function _0x39f9(_0x16ae02,_0x328b32){const _0x570a62=_0x25b4();return _0x39f9=function(_0x432b13,_0x2673ae){_0x432b13=_0x432b13-0x175;let _0x25b4d3=_0x570a62[_0x432b13];return _0x25b4d3;},_0x39f9(_0x16ae02,_0x328b32);}let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x239b7f(0x17b)],botID=process[_0x239b7f(0x25d)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x239b7f(0x1be)](botID))return console[_0x239b7f(0x209)]('Error:\x20Invalid\x20argument\x20'+botID+_0x239b7f(0x1e0)),process['exit'](0x1);const userID=process[_0x239b7f(0x25d)][0x3]||'',configpath=userID?_0x239b7f(0x196)+userID+'/':'./config/';!fs[_0x239b7f(0x241)](configpath)&&fs[_0x239b7f(0x25e)](configpath);const configfile=configpath+'bot-'+botID+_0x239b7f(0x24b),logfile=configpath+_0x239b7f(0x1d3)+botID+'-events.json',performancefile=configpath+_0x239b7f(0x1d3)+botID+_0x239b7f(0x1e3),coinresultsfile=configpath+'bot-'+botID+_0x239b7f(0x1a6),settingsfile=configpath+_0x239b7f(0x214),securefile=configpath+_0x239b7f(0x265),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x239b7f(0x219)]({'logs':[]})[_0x239b7f(0x19d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x239b7f(0x219)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x239b7f(0x219)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x239b7f(0x219)]({'coins':[]})[_0x239b7f(0x19d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x239b7f(0x19f),'symbol':_0x239b7f(0x20c)},'usd':{'coin':_0x239b7f(0x18f),'symbol':_0x239b7f(0x1bc)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x590c50)=>{},'debug':(..._0x1560fc)=>{},'notice':(..._0xb70f48)=>{},'info':(..._0x1899e4)=>{},'warning':(..._0x1511ea)=>{},'error':async function(..._0x11e74b){const _0x3306f2=_0x239b7f,_0x34b901=new Date()[_0x3306f2(0x26c)]();if(!lastErrorShown||_0x34b901-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3306f2(0x26c)](),logHistory(_0x3306f2(0x230),_0x3306f2(0x284)+consecutivePauses+_0x3306f2(0x204));let _0x49c9bd='';if(_0x11e74b[0x0])_0x49c9bd+=_0x11e74b[0x0];if(_0x11e74b[0x1]&&_0x11e74b[0x1][_0x3306f2(0x230)]&&_0x11e74b[0x1][_0x3306f2(0x230)][_0x3306f2(0x20d)])_0x49c9bd+=_0x3306f2(0x184)+_0x11e74b[0x1][_0x3306f2(0x230)]['message'];logging(_0x3306f2(0x284)+consecutivePauses+_0x3306f2(0x1c2),''+_0x49c9bd),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x239b7f(0x231),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);function _0x25b4(){const _0x59feff=['apply','differenceInCalendarDays','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','OrderNotFound','cooldown','length','Order\x20filled:\x20','coins','bot-','accumulatedQuantity','\x20orders\x20in\x20less\x20than\x20','max','offset','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','yyyy/MM/dd\x20HH:mm:ss','entries','milliseconds','orderId','exchange','stringify','ccxt',',\x20must\x20be\x20a\x203\x20digit\x20number','format','get','-performance.json','excluded','coin-loading-progress','running','Binance\x20API\x20secret\x20is\x20invalid','balances','Order(s)\x20not\x20validated\x20after\x20','getStartingBalances','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','coinamount','bot','includes','orderStatus','bid','loadMarkets','(((.+)+)+)+$','\x20|\x20Error\x20details:\x20','994tSSiJn','LIMIT','sortBy','238179PSyoMi','API-key\x20format\x20invalid','value','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','eachDayOfInterval','HOT/BTC','delta','\x20order:\x20','breakeven','getMinutes','configuration-stored','spot','type',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','currency','293912luRnPQ','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','has','log','data','4535840hkcNQa','BTC/EUR','message','binanceus','realized',':\x20Bot\x20','date','kline','privateKey','bb-settings.json','wsKey','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','splice','toString','defaults','limit','event-history','round','Limit\x20(high-margin)','Performance\x20recreation\x20completed\x20successfully','InvalidNonce','fetchTickers','toFixed','fee','target','storeConfiguration','\x20>\x20','Order:\x20','Manually\x20balance:\x20','getCoins()','wss://stream.binance.com:9443','filter','reconnected','market','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','reverse','performance','error','sha256','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','MIN_NOTIONAL','close','function','min','join','showname','progress','Invalid\x20quantity','last','basecoin','Crypt','Executed\x20','timeout','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','existsSync','280444UigYee','order','forEach','trade','Binance\x20API\x20key\x20is\x20invalid','filled','page','shift','hybrid-crypto-js','-config.json','availableBalance','configuration','initclient','outboundAccountPosition','fetchBalance','amount','cost','FILLED','startdate','RequestTimeout','cancel','ordertype','fetchOrders','number','usd','Order(s)\x20validated\x20-\x20balancing\x20resumed','limit-high','argv','mkdirSync','logs','valid','decrypt','assign','20wQoIkf','remove','bb-secure.json','restart','secure','coin','eur','success','lowdb/adapters/FileSync','getTime','differenceInSeconds','threshold','fetchOHLCV','split','price','event','isArray','83272FtZYDc','search','DAI/','\x20minutes\x20-\x20balancing\x20resumed','portfolio','find','ExchangeNotAvailable','asset','remainingSymbols','limits','closeWs','getDate','formattedMessage','560919NTqCPB','BTC','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','WebSockets(','\x20|\x20Unknown\x20error\x20occured','parse','ticker','distribution','buys','getCloses()','wsMarket','HOT/EUR','executionReport','version','getFullYear','kill','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','getSeconds','keys','startnumber','startprice','\x20-\x20','sort','cancelOrder()','wss://stream.binance.us:9443','apiSecret','binance','total','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Market','************','BTCBUSD','BTCUSDT','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','padStart','subscribeSpotUserDataStream','apiKey','fromCodePoint','initws()','./config/','1242ufTiwu','toLowerCase','AuthenticationError','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','parseISO','write','sell','BTCEUR','botname','189tgqOCw','recreateHistory()','headless','emitHistory','side','-results.json','timeshift','Bot\x20','timestamp','add','emojisell','BTC/BUSD','settings','args','symbol','loadSymbols()','eventType','emojibuy','send','map','getHours','buy','push','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','recreate','sells','replace','BTC/USDT','indexOf','test','BNB','cancelOrder','storeHeadless',')\x20|\x20Error\x20details:\x20','fees','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','userData','ask','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','datetime','yyyy/MM/dd','getMonth'];_0x25b4=function(){return _0x59feff;};return _0x25b4();}settings[_0x239b7f(0x1a7)]!=config['timeshift']&&updateTimeshift(settings[_0x239b7f(0x1a7)]);process[_0x239b7f(0x1b3)]({'started':_0x239b7f(0x1e6)},_0x2e34ac=>{}),initializeProcessListeners();function proxyEmit(_0x28e985,_0x2c9ded=null){const _0x1b30e7=_0x239b7f;process[_0x1b30e7(0x1b3)]({'function':_0x28e985,'args':_0x2c9ded},_0x3c940f=>{});}function initializeProcessListeners(){const _0x3697cb=_0x239b7f;process['on'](_0x3697cb(0x20d),_0x5647fd=>{const _0x5d2061=_0x3697cb;switch(Object[_0x5d2061(0x181)](_0x5647fd)[0x0]){case _0x5d2061(0x1a7):_0x5647fd[_0x5d2061(0x1a7)]!=undefined&&(settings[_0x5d2061(0x1a7)]=_0x5647fd[_0x5d2061(0x1a7)],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x5647fd[_0x5d2061(0x235)]){case _0x5d2061(0x24e):initclient();break;case _0x5d2061(0x1a4):emitHistory(_0x5647fd[_0x5d2061(0x1ae)]);break;case'getPortfolio':getPortfolio(_0x5647fd['args']);break;case _0x5d2061(0x224):storeConfiguration(_0x5647fd['args']);break;case _0x5d2061(0x1c1):storeHeadless(_0x5647fd[_0x5d2061(0x1ae)]);break;case _0x5d2061(0x1ea):getStartingBalances();break;case'placeOrder':placeOrder(_0x5647fd[_0x5d2061(0x1ae)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x5413e8=_0x239b7f;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config[_0x5413e8(0x188)]);let _0xf7584a=await loadSymbols();_0xf7584a&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x222118,_0xa979d3){const _0x73420b=_0x239b7f,_0x103132=ccxt[config['exchange']];let _0x5d44d8;switch(config[_0x73420b(0x1dd)]){case'binance':_0x5d44d8=_0x73420b(0x229);break;case _0x73420b(0x20e):_0x5d44d8=_0x73420b(0x187);break;default:_0x5d44d8='wss://stream.binance.com:9443';}exchange=new _0x103132({'apiKey':_0x222118,'secret':_0xa979d3,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x222118,'api_secret':_0xa979d3,'beautify':!![],'wsUrl':_0x5d44d8},logger),config[_0x73420b(0x1dd)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x73420b(0x18e),'symbol':_0x73420b(0x1ac)},'usd':{'coin':_0x73420b(0x18f),'symbol':_0x73420b(0x1bc)}});}async function loadSymbols(){const _0x50547b=_0x239b7f;let _0x451564;try{markets=await exchange[_0x50547b(0x1f1)]();const _0x571a4f=[_0x50547b(0x276),_0x50547b(0x1fc),_0x50547b(0x179)];allSymbols=exchange['symbols']['filter'](_0x2d3e84=>{const _0x1110e0=_0x50547b;let _0x4dffd7=![];return _0x571a4f[_0x1110e0(0x244)](_0x262cf4=>{if(_0x2d3e84['includes'](_0x262cf4))_0x4dffd7=!![];}),!_0x4dffd7;}),_0x451564=!![];}catch(_0x3ac578){await handleError(_0x3ac578,_0x50547b(0x1b0)),_0x451564=![];}return _0x451564;}async function initbot(){const _0x4b4e1a=_0x239b7f;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1644b8=dbCoinResults[_0x4b4e1a(0x1e2)]('coins')['value']();if(_0x1644b8[_0x4b4e1a(0x1d0)]==0x0)await resetCoinResults();}async function initclient(){const _0x29c8ec=_0x239b7f;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x29c8ec(0x1e8),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4e0c60=_0x239b7f;wsinitialized=![];ws1&&(ws1[_0x4e0c60(0x244)](_0x2227ed=>{const _0x5ae2b3=_0x4e0c60;try{wsClient[_0x5ae2b3(0x27e)](_0x2227ed);}catch(_0x248f0c){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x19b947){}ws2=null;}}async function initws(){const _0x26228c=_0x239b7f;cleanws();let _0x35d80d=[];currentCoins['forEach'](_0x12c2be=>{const _0x513227=_0x39f9;if(_0x12c2be[_0x513227(0x268)]!=config['basecoin'])_0x35d80d[_0x513227(0x1b7)](noslash(_0x12c2be[_0x513227(0x1af)]));});if(!_0x35d80d[_0x26228c(0x1ee)](stablecoins[_0x26228c(0x269)][_0x26228c(0x268)]))_0x35d80d[_0x26228c(0x1b7)](stablecoins[_0x26228c(0x269)][_0x26228c(0x268)]);if(!_0x35d80d[_0x26228c(0x1ee)](stablecoins[_0x26228c(0x25a)][_0x26228c(0x268)]))_0x35d80d[_0x26228c(0x1b7)](stablecoins['usd']['coin']);if(!_0x35d80d[_0x26228c(0x1ee)]('BNB'+config[_0x26228c(0x23c)]))_0x35d80d[_0x26228c(0x1b7)](_0x26228c(0x1bf)+config[_0x26228c(0x23c)]);try{_0x35d80d[_0x26228c(0x244)]((_0x4690e4,_0x21ecd0)=>{ws1[_0x21ecd0]=wsClient['subscribeSpotKline'](_0x4690e4,'1m');}),ws2=wsClient[_0x26228c(0x192)](),wsClient['on'](_0x26228c(0x280),_0x22aca1=>{const _0x15ebf4=_0x26228c;if(!Array[_0x15ebf4(0x273)](_0x22aca1)&&!_0x22aca1['wsKey'][_0x15ebf4(0x1ee)](_0x15ebf4(0x1c5))){if(_0x22aca1['eventType']===_0x15ebf4(0x212)){global[_0x15ebf4(0x287)][_0x22aca1[_0x15ebf4(0x212)][_0x15ebf4(0x1af)]]=_0x22aca1[_0x15ebf4(0x212)][_0x15ebf4(0x234)];return;}}else{if(!Array[_0x15ebf4(0x273)](_0x22aca1)&&_0x22aca1[_0x15ebf4(0x215)][_0x15ebf4(0x1ee)](_0x15ebf4(0x1c5))){if(_0x22aca1[_0x15ebf4(0x178)][_0x15ebf4(0x1ee)](_0x15ebf4(0x202))){updateNumberCoins(_0x22aca1);return;}}}}),wsClient['on'](_0x26228c(0x22b),async _0x4c10d2=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x4c6428){await handleError(_0x4c6428,_0x26228c(0x195));}let _0x300b02,_0x5b8dba=0x0;loading['remainingSymbols']=[];let _0x5a6fca=0x0;currentCoins[_0x26228c(0x244)](_0x343524=>{const _0x450dec=_0x26228c;if(_0x343524[_0x450dec(0x268)]!=config[_0x450dec(0x23c)])loading[_0x450dec(0x27c)]['push'](_0x343524[_0x450dec(0x1af)]);}),loadingCanceled=![];while(_0x300b02!=currentCoins['length']-0x1){_0x300b02=0x0,currentCoins[_0x26228c(0x244)](_0x57a7c5=>{const _0x5650e4=_0x26228c;_0x57a7c5['coin']!=config['basecoin']&&global[_0x5650e4(0x287)][noslash(_0x57a7c5[_0x5650e4(0x1af)])]&&(loading[_0x5650e4(0x27c)]=loading['remainingSymbols']['filter'](_0xdb240=>_0xdb240!=_0x57a7c5['symbol']),_0x300b02++);}),loading[_0x26228c(0x239)]=Math['round'](_0x300b02/(currentCoins[_0x26228c(0x1d0)]-0x1)*0x64);_0x5a6fca>0x1e*0x5&&(loading[_0x26228c(0x23f)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x26228c(0x256)]=!![],emitLoadingProgress();break;}else _0x300b02!=_0x5b8dba&&(_0x5b8dba=_0x300b02,emitLoadingProgress()),_0x5a6fca++,await sleep(0xc8);}if(_0x300b02==currentCoins[_0x26228c(0x1d0)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x111e69=_0x239b7f;proxyEmit(_0x111e69(0x1e5),loading);}async function getFiat(){const _0x92def8=_0x239b7f;let _0x520a7d=0x0,_0x167b92=0x0;try{_0x520a7d=global[_0x92def8(0x287)][stablecoins[_0x92def8(0x269)][_0x92def8(0x268)]],_0x167b92=global[_0x92def8(0x287)][stablecoins[_0x92def8(0x25a)][_0x92def8(0x268)]];}catch(_0x4b2232){await handleError(_0x4b2232,'getFiat()');}return{'eur':Number(_0x520a7d),'usd':Number(_0x167b92)};}async function setStartDatePerformance(_0x460f7d){const _0xf960cd=_0x239b7f,_0x1d7fa2=fns[_0xf960cd(0x1e1)](new Date(_0x460f7d['startdate']),_0xf960cd(0x1c9));let _0xb11fe=[];_0xb11fe[stablecoins[_0xf960cd(0x269)]['coin']]=await getCloses(stablecoins['eur']['symbol'],new Date(_0x460f7d[_0xf960cd(0x254)]),0x1),_0xb11fe[stablecoins[_0xf960cd(0x25a)]['coin']]=await getCloses(stablecoins[_0xf960cd(0x25a)][_0xf960cd(0x1af)],new Date(_0x460f7d[_0xf960cd(0x254)]),0x1);let _0x13da0f,_0x1194eb=[];_0x460f7d[_0xf960cd(0x278)][_0xf960cd(0x244)](_0x483f44=>{const _0x1a36aa=_0xf960cd;!_0x483f44[_0x1a36aa(0x1e4)]&&_0x1194eb['push']({'coin':_0x483f44['coin'],'number':_0x483f44[_0x1a36aa(0x182)],'price':_0x483f44['startprice']});}),_0x13da0f={'date':_0x1d7fa2,'eur':_0xb11fe[stablecoins[_0xf960cd(0x269)][_0xf960cd(0x268)]][0x0],'usd':_0xb11fe[stablecoins[_0xf960cd(0x25a)][_0xf960cd(0x268)]][0x0],'coins':_0x1194eb};let _0x5ba311=dbPerformance[_0xf960cd(0x1e2)](_0xf960cd(0x20a))[_0xf960cd(0x279)]({'date':_0x1d7fa2})[_0xf960cd(0x1f9)]();_0x5ba311?dbPerformance[_0xf960cd(0x1e2)](_0xf960cd(0x20a))['find']({'date':_0x1d7fa2})[_0xf960cd(0x262)](_0x13da0f)[_0xf960cd(0x19d)]():dbPerformance[_0xf960cd(0x1e2)](_0xf960cd(0x20a))[_0xf960cd(0x1b7)](_0x13da0f)['write'](),_0x5ba311=dbPerformance['get']('data')[_0xf960cd(0x1f6)](_0xf960cd(0x211))[_0xf960cd(0x1f9)](),_0x5ba311[_0xf960cd(0x244)](_0x17695a=>{const _0x23d7e9=_0xf960cd;_0x17695a[_0x23d7e9(0x211)]<_0x1d7fa2&&dbPerformance[_0x23d7e9(0x1e2)](_0x23d7e9(0x20a))[_0x23d7e9(0x264)]({'date':_0x17695a[_0x23d7e9(0x211)]})[_0x23d7e9(0x19d)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x452bf2){const _0x588545=_0x239b7f;let _0x128037,_0x47df6d=[];logHistory('success',_0x588545(0x283)),_0x452bf2['portfolio']['forEach'](_0x433042=>{const _0x14cf6c=_0x588545;if(_0x433042['coin']!=config[_0x14cf6c(0x23c)]&&!_0x433042['excluded'])_0x47df6d[_0x14cf6c(0x1b7)]({'coin':_0x433042[_0x14cf6c(0x268)],'symbol':_0x433042[_0x14cf6c(0x1af)]});});let _0x152ece=[];try{const _0x1d06e6=fns[_0x588545(0x1e1)](fns['parseISO'](_0x452bf2['startdate'][_0x588545(0x1bb)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x301472 of _0x47df6d){if(_0x301472[_0x588545(0x268)]!=config[_0x588545(0x23c)])_0x128037=await exchange[_0x588545(0x258)](_0x301472[_0x588545(0x1af)],Date['parse'](_0x1d06e6));_0x128037[_0x588545(0x244)](_0xd22d1b=>{const _0x238ffd=_0x588545,_0x2ad2aa=_0x301472[_0x238ffd(0x1af)][_0x238ffd(0x1ee)](config['basecoin']+'/'),_0x3c7e8d=fns[_0x238ffd(0x1e1)](fns[_0x238ffd(0x19c)](_0xd22d1b[_0x238ffd(0x1c8)]),_0x238ffd(0x1d9)),_0x57466d=fns[_0x238ffd(0x1e1)](fns['parseISO'](_0xd22d1b['datetime']),_0x238ffd(0x1c9));let _0x46d273;if(_0xd22d1b[_0x238ffd(0x1a5)]=='buy'&&_0x2ad2aa==![])_0x46d273=_0xd22d1b[_0x238ffd(0x251)];if(_0xd22d1b[_0x238ffd(0x1a5)]=='buy'&&_0x2ad2aa==!![])_0x46d273=-_0xd22d1b[_0x238ffd(0x251)]*_0xd22d1b[_0x238ffd(0x271)];if(_0xd22d1b[_0x238ffd(0x1a5)]==_0x238ffd(0x19e)&&_0x2ad2aa==![])_0x46d273=-_0xd22d1b['amount'];if(_0xd22d1b[_0x238ffd(0x1a5)]==_0x238ffd(0x19e)&&_0x2ad2aa==!![])_0x46d273=_0xd22d1b['amount']*_0xd22d1b[_0x238ffd(0x271)];_0x152ece[_0x238ffd(0x1b7)]({'timestamp':_0x3c7e8d,'date':_0x57466d,'coin':_0x301472['coin'],'symbol':_0x301472[_0x238ffd(0x1af)],'type':_0xd22d1b[_0x238ffd(0x203)],'side':_0xd22d1b['side'],'reverse':_0x2ad2aa,'amount':formatResult(_0xd22d1b[_0x238ffd(0x247)],0x8),'filled':formatResult(_0xd22d1b['filled'],0x8),'coinamount':formatResult(_0x46d273,0x8),'price':formatResult(_0xd22d1b[_0x238ffd(0x271)],0x8)});let _0x2fb2ff;if(_0xd22d1b[_0x238ffd(0x1a5)]==_0x238ffd(0x1b6)&&_0x2ad2aa==![])_0x2fb2ff=-_0xd22d1b[_0x238ffd(0x251)]*_0xd22d1b['price'];if(_0xd22d1b['side']==_0x238ffd(0x1b6)&&_0x2ad2aa==!![])_0x2fb2ff=_0xd22d1b[_0x238ffd(0x251)];if(_0xd22d1b[_0x238ffd(0x1a5)]==_0x238ffd(0x19e)&&_0x2ad2aa==![])_0x2fb2ff=_0xd22d1b['amount']*_0xd22d1b['price'];if(_0xd22d1b[_0x238ffd(0x1a5)]==_0x238ffd(0x19e)&&_0x2ad2aa==!![])_0x2fb2ff=-_0xd22d1b['amount'];_0x152ece[_0x238ffd(0x1b7)]({'date':_0x57466d,'coin':config[_0x238ffd(0x23c)],'coinamount':formatResult(_0x2fb2ff,0x8)});});}_0x152ece['sort']((_0x3a0004,_0x6a4530)=>_0x3a0004[_0x588545(0x1a9)]>_0x6a4530[_0x588545(0x1a9)]?0x1:_0x6a4530['timestamp']>_0x3a0004[_0x588545(0x1a9)]?-0x1:0x0),dbLogs[_0x588545(0x1e2)]('logs')[_0x588545(0x264)]()['write'](),_0x152ece['forEach'](_0x1a31bd=>{const _0x3ee02a=_0x588545;let _0x5b125c;_0x1a31bd[_0x3ee02a(0x268)]!=config[_0x3ee02a(0x23c)]&&(_0x5b125c={'time':_0x1a31bd[_0x3ee02a(0x1a9)],'type':_0x3ee02a(0x243),'event':_0x3ee02a(0x226)+_0x1a31bd['symbol']+'\x20'+_0x1a31bd[_0x3ee02a(0x1a5)]+'\x20#'+_0x1a31bd[_0x3ee02a(0x251)]+'\x20@'+_0x1a31bd['price']},dbLogs[_0x3ee02a(0x1e2)](_0x3ee02a(0x25f))[_0x3ee02a(0x1b7)](_0x5b125c)[_0x3ee02a(0x19d)]());});const _0x318c74=fns[_0x588545(0x1fb)]({'start':new Date(_0x452bf2[_0x588545(0x254)]),'end':new Date()})[_0x588545(0x1b4)](_0x3c787d=>fns[_0x588545(0x1e1)](_0x3c787d,_0x588545(0x1c9)));let _0x6c4654=[];_0x452bf2[_0x588545(0x278)][_0x588545(0x244)](_0x8d2700=>{const _0x8a089b=_0x588545;if(!_0x8d2700[_0x8a089b(0x1e4)]){_0x6c4654[_0x8d2700['coin']]=[];let _0x7910e6=_0x8d2700[_0x8a089b(0x182)];_0x318c74[_0x8a089b(0x244)]((_0x28e352,_0xf7b4f2)=>{const _0x239724=_0x8a089b;let _0x5aaf9b=_0x152ece['filter'](_0x3b96b8=>_0x3b96b8[_0x239724(0x268)]==_0x8d2700['coin']&&_0x3b96b8[_0x239724(0x211)]==_0x28e352);if(_0x5aaf9b[_0x239724(0x1d0)]!=0x0){let _0x27eb31=_0x5aaf9b['reduce']((_0x450a44,_0x521b8e)=>{const _0x5b59d5=_0x239724;return _0x450a44+=_0x521b8e[_0x5b59d5(0x1ec)],_0x450a44;},0x0);_0x7910e6+=_0x27eb31;}_0x6c4654[_0x8d2700[_0x239724(0x268)]][_0x28e352]=_0x7910e6;});}});const _0x14dd67=[..._0x47df6d];_0x14dd67[_0x588545(0x1b7)]({'coin':stablecoins['eur'][_0x588545(0x268)],'symbol':stablecoins[_0x588545(0x269)]['symbol']}),_0x14dd67[_0x588545(0x1b7)]({'coin':stablecoins[_0x588545(0x25a)][_0x588545(0x268)],'symbol':stablecoins['usd']['symbol']});let _0x283dcb=[];for(const _0x16596d of _0x14dd67){_0x283dcb[_0x16596d[_0x588545(0x268)]]=await getCloses(_0x16596d[_0x588545(0x1af)],new Date(_0x452bf2['startdate']));}dbPerformance[_0x588545(0x1e2)]('data')[_0x588545(0x264)]()[_0x588545(0x19d)](),_0x318c74[_0x588545(0x244)]((_0x4374f2,_0x553bb1)=>{const _0x31bd31=_0x588545;let _0xdedc9e,_0x3880f5=[];_0x553bb1==0x0?(_0x452bf2[_0x31bd31(0x278)][_0x31bd31(0x244)](_0x41f3a3=>{const _0x417bb3=_0x31bd31;!_0x41f3a3['excluded']&&_0x3880f5[_0x417bb3(0x1b7)]({'coin':_0x41f3a3[_0x417bb3(0x268)],'number':_0x41f3a3[_0x417bb3(0x182)],'price':_0x41f3a3['startprice']});}),_0xdedc9e={'date':_0x4374f2,'eur':_0x283dcb[stablecoins['eur'][_0x31bd31(0x268)]][_0x553bb1],'usd':_0x283dcb[stablecoins[_0x31bd31(0x25a)][_0x31bd31(0x268)]][_0x553bb1],'coins':_0x3880f5}):(_0x452bf2['portfolio']['forEach'](_0x894b47=>{const _0xa3ca3e=_0x31bd31;!_0x894b47['excluded']&&_0x3880f5[_0xa3ca3e(0x1b7)]({'coin':_0x894b47['coin'],'number':_0x6c4654[_0x894b47[_0xa3ca3e(0x268)]][_0x4374f2],'price':_0x894b47[_0xa3ca3e(0x268)]==config[_0xa3ca3e(0x23c)]?0x1:_0x283dcb[_0x894b47[_0xa3ca3e(0x268)]][_0x553bb1]});}),_0xdedc9e={'date':_0x4374f2,'eur':_0x283dcb[stablecoins[_0x31bd31(0x269)][_0x31bd31(0x268)]][_0x553bb1],'usd':_0x283dcb[stablecoins[_0x31bd31(0x25a)]['coin']][_0x553bb1],'coins':_0x3880f5}),dbPerformance[_0x31bd31(0x1e2)](_0x31bd31(0x20a))[_0x31bd31(0x1b7)](_0xdedc9e)[_0x31bd31(0x19d)]();}),emitPerformance(),await resetCoinResults();for(let _0x188141 of _0x152ece){_0x188141[_0x588545(0x268)]!=config[_0x588545(0x23c)]&&await updateCoinResults(_0x188141);}logHistory(_0x588545(0x26a),_0x588545(0x21e));}catch(_0x504eeb){await handleError(_0x504eeb,_0x588545(0x1a2));}}async function getCloses(_0x42b132,_0x9edf78,_0x5ce4ee=undefined){const _0x3429ee=_0x239b7f,_0x3c388d='1d';let _0xdf51e9,_0x3e1502;const _0x26e7bd=fns[_0x3429ee(0x1cc)](new Date(),_0x9edf78)+0x1;try{const _0x33023a=exchange[_0x3429ee(0x1db)]()-_0x26e7bd*0x18*0xe10*0x3e8;_0xdf51e9=await exchange[_0x3429ee(0x26f)](_0x42b132,_0x3c388d,_0x33023a,_0x5ce4ee),_0x3e1502=await exchange[_0x3429ee(0x220)](_0x42b132);}catch(_0xe164a2){await handleError(_0xe164a2,_0x3429ee(0x177));}let _0x226bc5=ohlcvToCloses(_0xdf51e9);return _0x226bc5[_0x3429ee(0x1b7)](_0x3e1502[_0x42b132][_0x3429ee(0x23b)]),_0x226bc5;}function ohlcvToCloses(_0x5d2eab){const _0x1375c2=_0x239b7f;let _0x18b0be=[];return _0x5d2eab[_0x1375c2(0x244)](function(_0x509534){const _0x4ac024=_0x1375c2;_0x18b0be[_0x4ac024(0x1b7)](_0x509534[0x4]);}),_0x18b0be;}function getConfiguration(_0xf6d4a2){const _0x315c74=_0x239b7f;let _0x574d65=dbConfig['get']('bot')['find']({'botID':_0xf6d4a2})[_0x315c74(0x1f9)]();if(_0x574d65){let _0x5ebe36=![];!_0x574d65['exchange']&&(_0x574d65={..._0x574d65,'exchange':_0x315c74(0x189)},_0x5ebe36=!![]),!_0x574d65[_0x315c74(0x23c)]&&(_0x574d65={..._0x574d65,'basecoin':_0x315c74(0x282)},_0x5ebe36=!![]),!_0x574d65[_0x315c74(0x257)]&&(_0x574d65={..._0x574d65,'ordertype':'market'},_0x5ebe36=!![]),!_0x574d65[_0x315c74(0x23f)]&&(_0x574d65={..._0x574d65,'timeout':0x14},_0x5ebe36=!![]),!_0x574d65[_0x315c74(0x1b2)]&&(_0x574d65={..._0x574d65,'emojibuy':''},_0x5ebe36=!![]),!_0x574d65['emojisell']&&(_0x574d65={..._0x574d65,'emojisell':''},_0x5ebe36=!![]),!_0x574d65[_0x315c74(0x238)]&&(_0x574d65={..._0x574d65,'showname':![]},_0x5ebe36=!![]),_0x5ebe36&&(_0x574d65={'botID':_0x574d65['botID'],'exchange':_0x574d65[_0x315c74(0x1dd)],'apiKey':_0x574d65[_0x315c74(0x193)],'apiSecret':_0x574d65[_0x315c74(0x188)],'basecoin':_0x574d65[_0x315c74(0x23c)],'botname':_0x574d65['botname'],'showname':_0x574d65[_0x315c74(0x238)],'threshold':_0x574d65[_0x315c74(0x26e)],'ordertype':_0x574d65[_0x315c74(0x257)],'timeout':_0x574d65[_0x315c74(0x23f)],'startdate':_0x574d65[_0x315c74(0x254)],'recreate':_0x574d65[_0x315c74(0x1b9)],'timeshift':_0x574d65[_0x315c74(0x1a7)],'headless':_0x574d65[_0x315c74(0x1a3)],'cooldown':_0x574d65[_0x315c74(0x1cf)],'emojibuy':_0x574d65['emojibuy'],'emojisell':_0x574d65[_0x315c74(0x1ab)],'portfolio':_0x574d65[_0x315c74(0x278)]},dbConfig[_0x315c74(0x1e2)](_0x315c74(0x1ed))[_0x315c74(0x264)]()[_0x315c74(0x19d)](),dbConfig['get'](_0x315c74(0x1ed))[_0x315c74(0x1b7)](_0x574d65)[_0x315c74(0x19d)]());}else _0x574d65={'botID':_0xf6d4a2,'exchange':_0x315c74(0x189),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x315c74(0x1a8)+_0xf6d4a2,'showname':![],'threshold':'3','ordertype':_0x315c74(0x22c),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x315c74(0x1a7)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x574d65;}function emittedConfiguration(){const _0x3f2658=_0x239b7f;let _0x16b5df;return config[_0x3f2658(0x193)]==''?_0x16b5df=config:_0x16b5df={...config,'apiKey':_0x3f2658(0x18d),'apiSecret':_0x3f2658(0x18d)},_0x16b5df;}function getSettings(){const _0x3bf2ce=_0x239b7f;return dbSettings[_0x3bf2ce(0x1e2)](_0x3bf2ce(0x1ad))[_0x3bf2ce(0x1f9)]();}function getSecure(){const _0x40ee52=_0x239b7f;return dbSecure[_0x40ee52(0x1e2)](_0x40ee52(0x267))[_0x40ee52(0x1f9)]()||{};}function updateTimeshift(_0x3feba8){const _0x3e30a8=_0x239b7f;let _0xa50adc=dbConfig['get'](_0x3e30a8(0x1ed))['find']({'botID':botID})[_0x3e30a8(0x1f9)]();_0xa50adc&&dbConfig[_0x3e30a8(0x1e2)](_0x3e30a8(0x1ed))[_0x3e30a8(0x279)]({'botID':botID})[_0x3e30a8(0x262)]({'timeshift':_0x3feba8})[_0x3e30a8(0x19d)](),config[_0x3e30a8(0x1a7)]=_0x3feba8,proxyEmit(_0x3e30a8(0x24d),emittedConfiguration());}async function storeConfiguration(_0x443bf0){const _0x291878=_0x239b7f;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x337621=dbConfig[_0x291878(0x1e2)]('bot')['find']({'botID':botID})[_0x291878(0x1f9)]();_0x443bf0={..._0x443bf0,'apiKey':crypt[_0x291878(0x261)](secure[_0x291878(0x213)],_0x443bf0[_0x291878(0x193)])[_0x291878(0x20d)],'apiSecret':crypt[_0x291878(0x261)](secure[_0x291878(0x213)],_0x443bf0[_0x291878(0x188)])['message']};if(_0x337621){if(_0x443bf0[_0x291878(0x193)]=='************')_0x443bf0[_0x291878(0x193)]=config[_0x291878(0x193)];if(_0x443bf0['apiSecret']=='************')_0x443bf0[_0x291878(0x188)]=config[_0x291878(0x188)];dbConfig[_0x291878(0x1e2)](_0x291878(0x1ed))['find']({'botID':botID})['assign'](_0x443bf0)[_0x291878(0x19d)]();}else dbConfig[_0x291878(0x1e2)]('bot')['push'](_0x443bf0)['write'](),process[_0x291878(0x1b3)]({'status':'enabled','live':_0x291878(0x1e6)},_0x121eee=>{});config={..._0x443bf0};if(config[_0x291878(0x1b9)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x291878(0x1b3)]({'botname':_0x443bf0[_0x291878(0x1a0)]},_0x474e64=>{}),proxyEmit(_0x291878(0x201)),reset();}async function storeHeadless(_0x2e4e01){const _0x59e709=_0x239b7f,_0x50b71d={...config,'headless':_0x2e4e01[_0x59e709(0x1a3)]};let _0xaaff90=dbConfig['get'](_0x59e709(0x1ed))[_0x59e709(0x279)]({'botID':botID})[_0x59e709(0x1f9)]();_0xaaff90&&dbConfig['get'](_0x59e709(0x1ed))[_0x59e709(0x279)]({'botID':botID})[_0x59e709(0x262)](_0x50b71d)['write'](),config={..._0x50b71d},proxyEmit(_0x59e709(0x24d),emittedConfiguration());}function noslash(_0x1387ae){const _0x1c9784=_0x239b7f;return _0x1387ae[_0x1c9784(0x1bb)]('/','');}function updateNumberCoins(_0x510cce){const _0x4a0849=_0x239b7f;_0x510cce[_0x4a0849(0x1b1)]&&_0x510cce['eventType']==_0x4a0849(0x24f)&&_0x510cce[_0x4a0849(0x1e8)]['forEach'](_0x166acb=>{const _0xbb4889=_0x4a0849;let _0x39b741=currentCoins[_0xbb4889(0x279)](_0x5d7410=>_0x5d7410[_0xbb4889(0x268)]==_0x166acb[_0xbb4889(0x27b)]),_0xde7b28=config[_0xbb4889(0x278)]['find'](_0x15cc01=>_0x15cc01[_0xbb4889(0x268)]==_0x166acb[_0xbb4889(0x27b)]);if(_0x39b741&&_0xde7b28)_0x39b741['number']=Math[_0xbb4889(0x1d6)](Number(_0x166acb[_0xbb4889(0x24c)])+(_0xde7b28[_0xbb4889(0x1d7)]||0x0),0x0);});if(_0x510cce[_0x4a0849(0x1b1)]&&_0x510cce[_0x4a0849(0x1b1)]==_0x4a0849(0x17a)){if(_0x510cce['orderType']==_0x4a0849(0x1f5)&&_0x510cce[_0x4a0849(0x1ef)]==_0x4a0849(0x253)){if(lastOrders)lastOrders['forEach'](_0x47eeb8=>{const _0x80434=_0x4a0849;if(_0x47eeb8[_0x80434(0x1dc)]==_0x510cce[_0x80434(0x1dc)]){if(_0x47eeb8['reverse'])_0x47eeb8['filled']=_0x510cce[_0x80434(0x1d4)]*_0x47eeb8[_0x80434(0x271)];else _0x47eeb8[_0x80434(0x247)]=_0x510cce[_0x80434(0x1d4)];}});}}}async function getCoins(_0x4b85b3=!![],_0x4ea6d4=config[_0x239b7f(0x23c)]){const _0x4ae4a6=_0x239b7f;let _0x3462da,_0x9893ba=[],_0xd6df9f=[],_0x5dfe33=[];try{_0x3462da=await exchange[_0x4ae4a6(0x250)](),mybalances=_0x3462da[_0x4ae4a6(0x18a)];if(!_0x4b85b3)for(const [_0xf0fde9,_0x2bdd77]of Object[_0x4ae4a6(0x1da)](mybalances)){_0x5dfe33[_0x4ae4a6(0x1b7)](_0xf0fde9);}else config[_0x4ae4a6(0x278)][_0x4ae4a6(0x244)](_0x537d5e=>{const _0x5513dd=_0x4ae4a6;if(!_0x537d5e[_0x5513dd(0x1e4)])_0x5dfe33[_0x5513dd(0x1b7)](_0x537d5e['coin']);});if(_0x4ea6d4=='')for(const [_0x538e12,_0x48a6db]of Object[_0x4ae4a6(0x1da)](mybalances)){_0x48a6db[_0x4ae4a6(0x218)]()!=0x0&&_0xd6df9f[_0x4ae4a6(0x1b7)]({'coin':_0x538e12});}else for(const [_0x4aa44a,_0x204f6e]of Object['entries'](mybalances)){if(_0x5dfe33[_0x4ae4a6(0x1ee)](_0x4aa44a)){const _0x3ba8f7=config[_0x4ae4a6(0x278)][_0x4ae4a6(0x279)](_0x41a6a2=>_0x41a6a2[_0x4ae4a6(0x268)]==_0x4aa44a);if((_0x204f6e['toString']()!=0x0||_0x3ba8f7)&&(allSymbols[_0x4ae4a6(0x1ee)](_0x4aa44a+'/'+_0x4ea6d4)||_0x4aa44a==_0x4ea6d4))_0xd6df9f[_0x4ae4a6(0x1b7)]({'coin':_0x4aa44a,'symbol':_0x4aa44a+'/'+_0x4ea6d4,'reverse':![],'number':Math[_0x4ae4a6(0x1d6)](_0x204f6e+(_0x3ba8f7&&_0x3ba8f7[_0x4ae4a6(0x1d7)]||0x0),0x0)}),_0x4aa44a!=_0x4ea6d4&&_0x9893ba[_0x4ae4a6(0x1b7)](_0x4aa44a+'/'+_0x4ea6d4);else(_0x204f6e[_0x4ae4a6(0x218)]()!=0x0||_0x3ba8f7)&&allSymbols[_0x4ae4a6(0x1ee)](_0x4ea6d4+'/'+_0x4aa44a)&&(_0xd6df9f['push']({'coin':_0x4aa44a,'symbol':_0x4ea6d4+'/'+_0x4aa44a,'reverse':!![],'number':Math['max'](_0x204f6e+(_0x3ba8f7&&_0x3ba8f7[_0x4ae4a6(0x1d7)]||0x0),0x0)}),_0x4aa44a!=_0x4ea6d4&&_0x9893ba['push'](_0x4ea6d4+'/'+_0x4aa44a));}}}catch(_0x274a67){if(!_0x4b85b3){if(_0x274a67[_0x4ae4a6(0x218)]()[_0x4ae4a6(0x1ee)](_0x4ae4a6(0x1f8)))return logHistory(_0x4ae4a6(0x230),_0x4ae4a6(0x246)),![];else{if(_0x274a67['toString']()[_0x4ae4a6(0x1ee)](_0x4ae4a6(0x199)))return logHistory(_0x4ae4a6(0x230),_0x4ae4a6(0x216)),![];else{if(_0x274a67['toString']()['includes'](_0x4ae4a6(0x190)))return logHistory(_0x4ae4a6(0x230),_0x4ae4a6(0x1e7)),![];else await handleError(_0x274a67,_0x4ae4a6(0x228));}}}else await handleError(_0x274a67,_0x4ae4a6(0x228));}return _0xd6df9f;}async function getPortfolio(_0x406b2c){const _0x30e1f4=_0x239b7f;let _0x13300b=[],_0x3fb8e6=[],_0x14b5e5,_0x20976c=[],_0x45de76,_0x1c324c;_0x406b2c['apiKey']===_0x30e1f4(0x18d)||_0x406b2c['apiSecret']==='************'?(_0x45de76=config[_0x30e1f4(0x193)],_0x1c324c=config[_0x30e1f4(0x188)]):(_0x45de76=_0x406b2c[_0x30e1f4(0x193)],_0x1c324c=_0x406b2c[_0x30e1f4(0x188)]);await initExchange(_0x45de76,_0x1c324c);let _0x21f017=await loadSymbols();if(_0x21f017){_0x20976c=await getCoins(![],_0x406b2c[_0x30e1f4(0x23c)]);if(_0x20976c===![])proxyEmit(_0x30e1f4(0x278),![]);else{if(_0x406b2c['basecoin']=='')proxyEmit(_0x30e1f4(0x278),_0x20976c);else{_0x20976c['forEach'](_0x58773f=>{const _0x866839=_0x30e1f4;_0x13300b[_0x866839(0x1b7)](_0x58773f[_0x866839(0x1af)]);});try{_0x3fb8e6=await exchange[_0x30e1f4(0x220)](_0x13300b);}catch(_0x45f22d){await handleError(_0x45f22d,'getPortfolio()');}_0x20976c[_0x30e1f4(0x244)](_0x1f0bea=>{const _0x1f290a=_0x30e1f4;_0x1f0bea[_0x1f290a(0x268)]!=_0x406b2c[_0x1f290a(0x23c)]?_0x14b5e5=_0x1f0bea[_0x1f290a(0x22e)]?0x1/_0x3fb8e6[_0x1f0bea[_0x1f290a(0x1af)]]['last']:_0x3fb8e6[_0x1f0bea[_0x1f290a(0x1af)]][_0x1f290a(0x23b)]:_0x14b5e5=0x1,_0x1f0bea[_0x1f290a(0x271)]=formatResult(_0x14b5e5,0x8);}),proxyEmit(_0x30e1f4(0x278),_0x20976c);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x589258){const _0x33bb99=_0x239b7f;let _0x3d5735=!![];const _0x8ef7d6=!_0x589258[_0x33bb99(0x22e)]?markets[_0x589258[_0x33bb99(0x1af)]][_0x33bb99(0x27d)][_0x33bb99(0x251)][_0x33bb99(0x236)]:markets[_0x589258[_0x33bb99(0x1af)]][_0x33bb99(0x27d)][_0x33bb99(0x252)][_0x33bb99(0x236)],_0x81052=!_0x589258[_0x33bb99(0x22e)]?markets[_0x589258[_0x33bb99(0x1af)]][_0x33bb99(0x27d)][_0x33bb99(0x252)][_0x33bb99(0x236)]:markets[_0x589258[_0x33bb99(0x1af)]][_0x33bb99(0x27d)]['amount'][_0x33bb99(0x236)];if(Math['abs'](_0x589258[_0x33bb99(0x245)])<_0x8ef7d6)_0x3d5735=![];if(Math['abs'](_0x589258[_0x33bb99(0x245)])*_0x589258[_0x33bb99(0x23b)]<_0x81052)_0x3d5735=![];let _0x5d36f6=config['portfolio']['find'](_0x585a27=>_0x585a27['coin']==_0x589258[_0x33bb99(0x268)]);if(Math['abs'](_0x589258[_0x33bb99(0x245)])>_0x589258[_0x33bb99(0x259)]-_0x5d36f6[_0x33bb99(0x1d7)])_0x3d5735=![];return _0x3d5735;}async function getBalances(){const _0xb6f582=_0x239b7f;let _0x343c99=0x0,_0x2e9812;const _0x19604a=config[_0xb6f582(0x26e)];currentCoins[_0xb6f582(0x244)](_0x3ddbd8=>{const _0x588823=_0xb6f582;if(_0x3ddbd8[_0x588823(0x268)]!=config[_0x588823(0x23c)]){let _0x304d50=global[_0x588823(0x287)][noslash(_0x3ddbd8[_0x588823(0x1af)])];_0x2e9812=_0x3ddbd8['reverse']?0x1/_0x304d50:_0x304d50;}else _0x2e9812=0x1;let _0x23f80a=_0x3ddbd8[_0x588823(0x259)]*_0x2e9812;_0x343c99+=_0x23f80a,_0x3ddbd8[_0x588823(0x23b)]=formatResult(Number(_0x2e9812),0x8),_0x3ddbd8[_0x588823(0x1f9)]=_0x23f80a;}),currentCoins[_0xb6f582(0x244)](_0x1c1130=>{const _0x282412=_0xb6f582;let _0x2bd8f6=config[_0x282412(0x278)][_0x282412(0x279)](_0x2e5459=>_0x2e5459['coin']==_0x1c1130['coin']),_0x4fa964=Number(_0x2bd8f6['distribution']),_0x1b9867=_0x1c1130[_0x282412(0x1f9)]/_0x343c99*0x64,_0x21bc7a=_0x4fa964*_0x343c99/0x64/_0x1c1130[_0x282412(0x23b)]-_0x1c1130[_0x282412(0x259)];_0x1c1130['distribution']=formatResult(_0x1b9867,0x3),_0x1c1130[_0x282412(0x223)]=formatResult(_0x4fa964,0x3),_0x1c1130['trade']=formatResult(_0x21bc7a,0x8),_0x1c1130[_0x282412(0x1a5)]='',_0x1c1130['valid']='';if(_0x1c1130[_0x282412(0x268)]!=config[_0x282412(0x23c)]){if(_0x1c1130[_0x282412(0x175)]>_0x4fa964)_0x1c1130[_0x282412(0x1a5)]=_0x282412(0x19e),_0x1c1130[_0x282412(0x260)]=checkMinimums(_0x1c1130);else _0x1c1130[_0x282412(0x175)]<_0x4fa964&&(_0x1c1130[_0x282412(0x1a5)]=_0x282412(0x1b6),_0x1c1130[_0x282412(0x260)]=checkMinimums(_0x1c1130));}_0x1c1130[_0x282412(0x1fd)]=_0x1c1130[_0x282412(0x175)]/_0x1c1130['target']-0x1;}),currentCoins[_0xb6f582(0x185)]((_0x1e2de9,_0x285406)=>_0x1e2de9[_0xb6f582(0x1fd)]<_0x285406[_0xb6f582(0x1fd)]?0x1:_0x285406['delta']<_0x1e2de9[_0xb6f582(0x1fd)]?-0x1:0x0);const _0x18db66=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x18db66[_0xb6f582(0x269)],'usd':_0x18db66[_0xb6f582(0x25a)],'portfolio':JSON[_0xb6f582(0x1de)](currentCoins),'threshold':_0x19604a},proxyEmit(_0xb6f582(0x1e8),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x19604a});else notifyBalance({'portfolio':currentCoins,'threshold':_0x19604a});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4a92be=_0x239b7f;if(!lastBalances)return;let _0x3e6b64=[],_0x427ffb;JSON['parse'](lastBalances['portfolio'])['forEach'](_0x3d5076=>{const _0x1ef0f9=_0x39f9;let _0x5a62c0={'coin':_0x3d5076[_0x1ef0f9(0x268)],'number':_0x3d5076[_0x1ef0f9(0x259)],'price':_0x3d5076[_0x1ef0f9(0x23b)]};_0x3e6b64[_0x1ef0f9(0x1b7)](_0x5a62c0);});const _0x46e8f3=await getFiat();_0x427ffb={'date':lastBalances['time'][_0x4a92be(0x270)]('\x20')[0x0],'eur':_0x46e8f3[_0x4a92be(0x269)],'usd':_0x46e8f3[_0x4a92be(0x25a)],'coins':_0x3e6b64};let _0x2728f1=dbPerformance['get'](_0x4a92be(0x20a))[_0x4a92be(0x279)]({'date':_0x427ffb[_0x4a92be(0x211)]})[_0x4a92be(0x1f9)]();_0x2728f1?dbPerformance[_0x4a92be(0x1e2)]('data')[_0x4a92be(0x279)]({'date':_0x427ffb[_0x4a92be(0x211)]})[_0x4a92be(0x262)](_0x427ffb)[_0x4a92be(0x19d)]():dbPerformance[_0x4a92be(0x1e2)](_0x4a92be(0x20a))[_0x4a92be(0x1b7)](_0x427ffb)[_0x4a92be(0x19d)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5ce360=_0x239b7f;if(dbPerformance[_0x5ce360(0x208)](_0x5ce360(0x20a))[_0x5ce360(0x1f9)]()){let _0xe1536e=dbPerformance['get']('data')[_0x5ce360(0x1f6)](_0x5ce360(0x211))[_0x5ce360(0x1f9)]();proxyEmit(_0x5ce360(0x22f),_0xe1536e),lastPerformanceEmitted=getDate();}else proxyEmit(_0x5ce360(0x22f),[]);}async function getStartingBalances(_0x292e70=!![]){const _0x5e094b=_0x239b7f;let _0xfffe71=dbPerformance[_0x5e094b(0x1e2)](_0x5e094b(0x20a))[_0x5e094b(0x279)]({'date':config['startdate']})[_0x5e094b(0x1f9)]();config[_0x5e094b(0x193)]!=''&&!_0xfffe71&&(await setStartDatePerformance(config),_0xfffe71=dbPerformance[_0x5e094b(0x1e2)]('data')[_0x5e094b(0x279)]({'date':config[_0x5e094b(0x254)]})[_0x5e094b(0x1f9)]());if(config[_0x5e094b(0x193)]==''||!_0xfffe71)return{};let _0x35c2b4=0x0,_0x312863=0x0,_0x448ef9=0x0,_0x4fff3a=[],_0x49923d=0x0;config[_0x5e094b(0x278)]['forEach'](_0xbd97d9=>{const _0x4362ad=_0x5e094b;if(!_0xbd97d9[_0x4362ad(0x1e4)]){_0x4fff3a[_0x49923d]={'coin':_0xbd97d9[_0x4362ad(0x268)],'symbol':_0xbd97d9[_0x4362ad(0x1af)],'number':_0xbd97d9['startnumber'],'price':_0xbd97d9[_0x4362ad(0x183)]},_0x35c2b4+=_0xbd97d9['startprice']*_0xbd97d9['startnumber'];if(config[_0x4362ad(0x23c)]=='BTC')_0x312863+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9[_0x4362ad(0x182)]*_0xfffe71[_0x4362ad(0x269)],_0x448ef9+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9[_0x4362ad(0x182)]*_0xfffe71[_0x4362ad(0x25a)];else{if(config['basecoin']=='BUSD'||config['basecoin']=='USDT'||config[_0x4362ad(0x23c)]=='USDC')_0x312863+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9['startnumber']*_0xfffe71[_0x4362ad(0x269)]/_0xfffe71['usd'],_0x448ef9+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9['startnumber'];else config[_0x4362ad(0x23c)]=='EUR'&&(_0x312863+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9[_0x4362ad(0x182)],_0x448ef9+=_0xbd97d9[_0x4362ad(0x183)]*_0xbd97d9[_0x4362ad(0x182)]*_0xfffe71[_0x4362ad(0x25a)]/_0xfffe71[_0x4362ad(0x269)]);}_0x49923d++;}});let _0x3396ce={'basecoin':_0x35c2b4,'eur':_0x312863,'usd':_0x448ef9,'coins':_0x4fff3a};if(_0x292e70)proxyEmit('starting-balances',_0x3396ce);return _0x3396ce;}function headlessMode(_0x2efc02){const _0x919ddd=_0x239b7f;let _0x5ea941=_0x2efc02['portfolio'],_0xdaa341=_0x2efc02['threshold'],_0x478b17=[];for(let _0x51912c of _0x5ea941){if(_0x51912c[_0x919ddd(0x268)]!=config['basecoin']){if(_0x51912c[_0x919ddd(0x175)]/_0x51912c[_0x919ddd(0x223)]-0x1>=_0xdaa341/0x64){if(_0x51912c[_0x919ddd(0x260)])_0x478b17['push'](_0x51912c);}else{if(_0x51912c[_0x919ddd(0x175)]/_0x51912c['target']-0x1<=-_0xdaa341/0x64){if(_0x51912c[_0x919ddd(0x260)])_0x478b17[_0x919ddd(0x1b7)](_0x51912c);}}}}_0x478b17[_0x919ddd(0x1d0)]>0x0&&placeOrder(_0x478b17);}function notifyBalance(_0x964322){const _0x3ef6e1=_0x239b7f;let _0x44d199=_0x964322['portfolio'],_0x3be9d6=_0x964322[_0x3ef6e1(0x26e)],_0x2f1f6c=[];for(let _0x486f68 of _0x44d199){if(_0x486f68[_0x3ef6e1(0x268)]!=config[_0x3ef6e1(0x23c)]){if(_0x486f68[_0x3ef6e1(0x175)]/_0x486f68['target']-0x1>=_0x3be9d6/0x64){if(_0x486f68[_0x3ef6e1(0x260)])_0x2f1f6c[_0x3ef6e1(0x1b7)](_0x486f68);}else{if(_0x486f68[_0x3ef6e1(0x175)]/_0x486f68[_0x3ef6e1(0x223)]-0x1<=-_0x3be9d6/0x64){if(_0x486f68['valid'])_0x2f1f6c['push'](_0x486f68);}}}}if(_0x2f1f6c[_0x3ef6e1(0x1d0)]>0x0){let _0x17f922=_0x2f1f6c[_0x3ef6e1(0x1b4)](_0xc759d4=>_0xc759d4[_0x3ef6e1(0x268)]);_0x17f922['sort']();let _0x4042c0=_0x17f922[_0x3ef6e1(0x237)](',\x20');if(lastCoinsToBalance!==_0x4042c0)logHistory(_0x3ef6e1(0x243),_0x3ef6e1(0x227)+_0x4042c0);lastCoinsToBalance=_0x4042c0;}}function symbolToCoin(_0x106707){const _0x5ee8da=_0x239b7f;let _0x5cdd02;if(_0x106707['includes']('/'+config['basecoin']))_0x5cdd02=_0x106707[_0x5ee8da(0x1bb)]('/'+config[_0x5ee8da(0x23c)],'');if(_0x106707[_0x5ee8da(0x1ee)](config[_0x5ee8da(0x23c)]+'/'))_0x5cdd02=_0x106707[_0x5ee8da(0x1bb)](config['basecoin']+'/','');return _0x5cdd02;}async function validateOrders(_0xca8fbb=0x0){const _0x38561a=_0x239b7f;let _0xbd774b=[],_0x2a31f9=config[_0x38561a(0x257)]==_0x38561a(0x22c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x38561a(0x23f)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x38561a(0x244)](_0x1628eb=>{const _0x132c63=_0x38561a;let _0x31433c=previousCoins['find'](_0x5c1d4a=>_0x5c1d4a[_0x132c63(0x268)]==symbolToCoin(_0x1628eb[_0x132c63(0x1af)])),_0x515920=currentCoins[_0x132c63(0x279)](_0x11523e=>_0x11523e[_0x132c63(0x268)]==symbolToCoin(_0x1628eb['symbol'])),_0x25fb76,_0x589052;_0x1628eb[_0x132c63(0x1a5)]=='buy'&&!_0x1628eb['reverse']||_0x1628eb['side']==_0x132c63(0x19e)&&_0x1628eb[_0x132c63(0x22e)]?(_0x25fb76=_0x31433c[_0x132c63(0x259)]+0.9*_0x1628eb['filled'],_0x589052=_0x31433c[_0x132c63(0x259)]+1.1*_0x1628eb[_0x132c63(0x247)]):(_0x25fb76=_0x31433c['number']-1.1*_0x1628eb[_0x132c63(0x247)],_0x589052=_0x31433c[_0x132c63(0x259)]-0.9*_0x1628eb[_0x132c63(0x247)]);const _0x16c1ab=_0x1628eb[_0x132c63(0x247)]!=0x0&&_0x515920[_0x132c63(0x259)]>=_0x25fb76&&_0x515920[_0x132c63(0x259)]<=_0x589052;_0xbd774b['push'](_0x16c1ab);if(_0x16c1ab&&config[_0x132c63(0x257)]!=_0x132c63(0x22c)){if(_0x1628eb[_0x132c63(0x22e)])logHistory(_0x132c63(0x243),_0x132c63(0x1d1)+_0x1628eb[_0x132c63(0x1af)]+'\x20'+_0x1628eb[_0x132c63(0x1a5)]+'\x20#'+formatResult(_0x1628eb['filled']/_0x1628eb[_0x132c63(0x271)],0x8)+'\x20@'+formatResult(_0x1628eb[_0x132c63(0x271)],0x8));else logHistory(_0x132c63(0x243),'Order\x20filled:\x20'+_0x1628eb['symbol']+'\x20'+_0x1628eb['side']+'\x20#'+formatResult(_0x1628eb[_0x132c63(0x247)],0x8)+'\x20@'+formatResult(_0x1628eb[_0x132c63(0x271)],0x8));}}),_0xbd774b['forEach']((_0x250644,_0xfcf238)=>{const _0x4029f2=_0x38561a;if(_0x250644)lastOrders[_0x4029f2(0x217)](_0xfcf238,0x1);});if(_0xca8fbb<_0x2a31f9&&_0xbd774b[_0x38561a(0x1ee)](![])){if(_0xca8fbb==0x0){config['ordertype']=='market'?logHistory('error',_0x38561a(0x1d8)):logHistory(_0x38561a(0x230),_0x38561a(0x19a));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xca8fbb);},0xa*0x3e8);}else{(_0xca8fbb==0x1||_0xca8fbb==Math[_0x38561a(0x21c)](_0x2a31f9/0x2)||_0xca8fbb==_0x2a31f9-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0xca8fbb);},validateOrderInterval);}}else{lockOrders=![];if(_0xca8fbb>0x0&&!_0xbd774b['includes'](![]))config[_0x38561a(0x257)]==_0x38561a(0x22c)?logHistory('success',_0x38561a(0x25b)):logHistory('success','Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0xca8fbb>0x0&&_0xbd774b[_0x38561a(0x1ee)](![])&&(config['ordertype']=='market'?logHistory(_0x38561a(0x26a),_0x38561a(0x1e9)+Math['round'](_0x2a31f9*validateOrderInterval/0xea60)+_0x38561a(0x277)):(lastOrders[_0x38561a(0x244)](async _0x4332b5=>{const _0x2a1d17=_0x38561a;try{const _0x31ea27=await exchange[_0x2a1d17(0x1c0)](_0x4332b5['orderId'],_0x4332b5[_0x2a1d17(0x1af)]);}catch(_0x277421){if(_0x277421['toString']()[_0x2a1d17(0x1ee)](_0x2a1d17(0x1ce))){}else await handleError(_0x277421,_0x2a1d17(0x186));}}),logHistory(_0x38561a(0x26a),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x2a31f9*validateOrderInterval/0xea60)+_0x38561a(0x277))));}}async function resetCoinResults(){const _0x5733f6=_0x239b7f;dbCoinResults['get'](_0x5733f6(0x1d2))[_0x5733f6(0x264)]()['write']();let _0xba759e=await getStartingBalances(![]);_0xba759e[_0x5733f6(0x1d2)][_0x5733f6(0x244)](_0xf2e4bf=>{const _0x5001fa=_0x5733f6,_0x98a961=_0xf2e4bf[_0x5001fa(0x1af)][_0x5001fa(0x1ee)](config[_0x5001fa(0x23c)]+'/');if(_0xf2e4bf['coin']!=config['basecoin']){let _0x27eb9f={'coin':_0xf2e4bf['coin'],'number':_0xf2e4bf[_0x5001fa(0x259)],'breakeven':_0xf2e4bf[_0x5001fa(0x271)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5001fa(0x1e2)]('coins')[_0x5001fa(0x1b7)](_0x27eb9f)['write']();}});}async function updateCoinResults(_0x4b2c2f){const _0x1e1890=_0x239b7f;let _0x50b79f,_0x241f33,_0x477265,_0x4a20c7,_0x3bb1f4,_0x57edb9,_0x9f806f=dbCoinResults[_0x1e1890(0x1e2)](_0x1e1890(0x1d2))['find']({'coin':_0x4b2c2f['coin']})[_0x1e1890(0x1f9)]();if(!_0x9f806f)return;if(_0x4b2c2f['fee']&&_0x4b2c2f[_0x1e1890(0x222)][_0x1e1890(0x205)]==config[_0x1e1890(0x23c)])_0x50b79f=_0x4b2c2f[_0x1e1890(0x222)][_0x1e1890(0x252)];else{if(_0x4b2c2f[_0x1e1890(0x222)]&&_0x4b2c2f[_0x1e1890(0x222)][_0x1e1890(0x205)]==_0x1e1890(0x1bf))_0x50b79f=_0x4b2c2f[_0x1e1890(0x222)][_0x1e1890(0x252)]*global['ticker'][_0x1e1890(0x1bf)+config[_0x1e1890(0x23c)]];else _0x50b79f=0.001*_0x4b2c2f[_0x1e1890(0x247)];}const _0x2d81ba=_0x4b2c2f[_0x1e1890(0x1af)]['includes'](config[_0x1e1890(0x23c)]+'/');_0x2d81ba&&(_0x57edb9={'coin':_0x4b2c2f['coin'],'symbol':_0x4b2c2f[_0x1e1890(0x1af)],'filled':_0x4b2c2f[_0x1e1890(0x247)]*_0x4b2c2f[_0x1e1890(0x271)],'side':_0x4b2c2f[_0x1e1890(0x1a5)]==_0x1e1890(0x19e)?_0x1e1890(0x1b6):_0x1e1890(0x19e),'price':0x1/_0x4b2c2f[_0x1e1890(0x271)]},_0x4b2c2f={..._0x57edb9});_0x4b2c2f['side']=='buy'?_0x477265=(_0x9f806f[_0x1e1890(0x1ff)]*_0x9f806f[_0x1e1890(0x259)]+_0x4b2c2f[_0x1e1890(0x271)]*_0x4b2c2f[_0x1e1890(0x247)])/(_0x9f806f[_0x1e1890(0x259)]+_0x4b2c2f[_0x1e1890(0x247)]):_0x477265=(_0x9f806f[_0x1e1890(0x1ff)]*_0x9f806f[_0x1e1890(0x259)]-_0x4b2c2f[_0x1e1890(0x271)]*_0x4b2c2f[_0x1e1890(0x247)])/(_0x9f806f[_0x1e1890(0x259)]-_0x4b2c2f[_0x1e1890(0x247)]);_0x4b2c2f[_0x1e1890(0x1a5)]=='buy'?_0x4a20c7=_0x9f806f['realized']:_0x4a20c7=_0x9f806f[_0x1e1890(0x20f)]+(_0x4b2c2f['price']-_0x9f806f[_0x1e1890(0x1ff)])*_0x4b2c2f[_0x1e1890(0x247)];_0x241f33=_0x4b2c2f[_0x1e1890(0x1a5)]==_0x1e1890(0x19e)?_0x9f806f[_0x1e1890(0x259)]-_0x4b2c2f[_0x1e1890(0x247)]:_0x9f806f['number']+_0x4b2c2f['filled'],_0x3bb1f4=(_0x4b2c2f[_0x1e1890(0x271)]-_0x477265)*_0x241f33;let _0x1b1a15={'coin':_0x4b2c2f[_0x1e1890(0x268)],'number':_0x241f33,'breakeven':formatResult(_0x477265,0x8),'realized':formatResult(_0x4a20c7,0x8),'unrealized':formatResult(_0x3bb1f4,0x8),'fees':formatResult(_0x9f806f[_0x1e1890(0x1c3)]+_0x50b79f,0x8),'sells':_0x4b2c2f[_0x1e1890(0x1a5)]==_0x1e1890(0x19e)?_0x9f806f[_0x1e1890(0x1ba)]+0x1:_0x9f806f[_0x1e1890(0x1ba)],'buys':_0x4b2c2f[_0x1e1890(0x1a5)]==_0x1e1890(0x1b6)?_0x9f806f[_0x1e1890(0x176)]+0x1:_0x9f806f[_0x1e1890(0x176)]};dbCoinResults[_0x1e1890(0x1e2)]('coins')['find']({'coin':_0x4b2c2f[_0x1e1890(0x268)]})[_0x1e1890(0x262)](_0x1b1a15)['write']();}async function placeOrder(_0x4fa417){const _0x1bd062=_0x239b7f,_0x430b81=config['ordertype']==_0x1bd062(0x22c)?_0x1bd062(0x22c):_0x1bd062(0x21a);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x1bd062(0x286)](JSON['stringify'](currentCoins));for(const _0x381923 of _0x4fa417){let _0x44ee4f,_0x2438bd,_0x41b23d,_0x479866,_0x409d4a,_0x1b35f3=_0x381923['symbol'];try{const _0x314cdb=await exchange[_0x1bd062(0x220)](_0x1b35f3),_0x307fad=_0x314cdb[_0x1b35f3];_0x44ee4f=_0x307fad[_0x1bd062(0x23b)],_0x2438bd=_0x307fad[_0x1bd062(0x1f0)],_0x41b23d=_0x307fad[_0x1bd062(0x1c6)];_0x381923['reverse']?(_0x479866=_0x381923[_0x1bd062(0x1a5)]==_0x1bd062(0x1b6)?'sell':'buy',_0x409d4a=Math['abs'](_0x381923[_0x1bd062(0x245)])/_0x44ee4f):(_0x479866=_0x381923[_0x1bd062(0x1a5)],_0x409d4a=Math['abs'](_0x381923[_0x1bd062(0x245)]));_0x430b81==_0x1bd062(0x21a)&&(config[_0x1bd062(0x257)]==_0x1bd062(0x25c)&&(_0x44ee4f=_0x479866==_0x1bd062(0x1b6)?_0x2438bd:_0x41b23d),config['ordertype']=='limit-low'&&(_0x44ee4f=_0x479866==_0x1bd062(0x1b6)?_0x41b23d:_0x2438bd));_0x409d4a=formatResult(_0x409d4a,0x8),_0x44ee4f=formatResult(_0x44ee4f,0x8);const _0x26cdfa=await exchange['createOrder'](_0x1b35f3,_0x430b81,_0x479866,_0x409d4a,_0x44ee4f);lastOrders[_0x1bd062(0x1b7)]({'orderId':_0x26cdfa['id'],'symbol':_0x1b35f3,'side':_0x479866,'reverse':_0x381923[_0x1bd062(0x22e)],'amount':_0x381923[_0x1bd062(0x22e)]?_0x26cdfa[_0x1bd062(0x251)]*_0x26cdfa[_0x1bd062(0x271)]:_0x26cdfa[_0x1bd062(0x251)],'filled':_0x381923[_0x1bd062(0x22e)]?_0x26cdfa[_0x1bd062(0x247)]*_0x26cdfa['price']:_0x26cdfa[_0x1bd062(0x247)],'price':_0x26cdfa[_0x1bd062(0x271)]});const _0x5ce5a0=_0x479866=='sell'?config[_0x1bd062(0x1ab)]?String[_0x1bd062(0x194)]('0x'+config[_0x1bd062(0x1ab)])+'\x20':'':config['emojibuy']?String[_0x1bd062(0x194)]('0x'+config[_0x1bd062(0x1b2)])+'\x20':'',_0x15cecb=_0x430b81==_0x1bd062(0x22c)?_0x1bd062(0x18c):config['ordertype']==_0x1bd062(0x25c)?_0x1bd062(0x21d):'Limit\x20(low-margin)';if(_0x430b81=='market')logHistory(_0x1bd062(0x243),''+_0x5ce5a0+_0x15cecb+_0x1bd062(0x1fe)+_0x1b35f3+'\x20'+_0x479866+'\x20#'+formatResult(_0x26cdfa['filled'],0x8)+'\x20@'+formatResult(_0x26cdfa[_0x1bd062(0x271)],0x8));else logHistory('order',''+_0x5ce5a0+_0x15cecb+_0x1bd062(0x1fe)+_0x1b35f3+'\x20'+_0x479866+'\x20#'+formatResult(_0x26cdfa['amount'],0x8)+'\x20@'+formatResult(_0x26cdfa[_0x1bd062(0x271)],0x8));_0x26cdfa[_0x1bd062(0x268)]=_0x381923[_0x1bd062(0x268)],await updateCoinResults(_0x26cdfa);if(config[_0x1bd062(0x1cf)]!=0x0){let _0x5a309f=null;if(cooldownTracker[_0x1bd062(0x1d0)]==config[_0x1bd062(0x1cf)]-0x1)_0x5a309f=cooldownTracker[_0x1bd062(0x249)]();const _0x382257=getTimeStamp();cooldownTracker['push'](_0x382257);if(_0x5a309f){const _0x429ae5=fns[_0x1bd062(0x26d)](new Date(_0x382257),new Date(_0x5a309f));_0x429ae5<cooldownInterval&&(logHistory(_0x1bd062(0x230),_0x1bd062(0x23e)+config['cooldown']+_0x1bd062(0x1d5)+cooldownInterval/0x3c+_0x1bd062(0x1b8)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xd0f31f){if(_0xd0f31f[_0x1bd062(0x218)]()[_0x1bd062(0x1ee)](_0x1bd062(0x233)))logHistory(_0x1bd062(0x230),_0x1bd062(0x1eb)+_0x1b35f3);else{if(_0xd0f31f[_0x1bd062(0x218)]()[_0x1bd062(0x1ee)](_0x1bd062(0x23a)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x1b35f3);else await handleError(_0xd0f31f,'placeOrder()');}}}if(lastOrders[_0x1bd062(0x1d0)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x1bd062(0x1a3)]&&(config[_0x1bd062(0x257)]=='market'?logHistory(_0x1bd062(0x230),_0x1bd062(0x1c4)):logHistory('error',_0x1bd062(0x1fa)));else coolingDown&&(!config[_0x1bd062(0x1a3)]&&logHistory(_0x1bd062(0x230),_0x1bd062(0x232)));}}function logHistory(_0xeb5897,_0x333740,_0x27fb81=''){const _0x233367=_0x239b7f;let _0x14feea={'time':getTimeStamp(),'type':_0xeb5897,'event':_0x333740};dbLogs['get'](_0x233367(0x25f))['push'](_0x14feea)[_0x233367(0x19d)]();if(_0x27fb81=='')_0x27fb81=_0x333740;proxyEmit('event',{'log':_0x14feea,'summary':_0x27fb81}),process[_0x233367(0x1b3)]({'telegram':{..._0x14feea,'botname':config[_0x233367(0x1a0)],'showname':config['showname']}},_0x1e1514=>{}),logging(''+_0x14feea[_0x233367(0x272)]);}function emitHistory(_0x228a66={}){const _0x2466c9=_0x239b7f;Object[_0x2466c9(0x181)](_0x228a66)[_0x2466c9(0x1d0)]==0x0&&(_0x228a66={'type':[_0x2466c9(0x243),'event'],'event':'','page':0x1});if(_0x228a66[_0x2466c9(0x203)]['includes'](_0x2466c9(0x272)))_0x228a66['type'][_0x2466c9(0x217)](_0x228a66[_0x2466c9(0x203)][_0x2466c9(0x1bd)](_0x2466c9(0x272)),0x1,_0x2466c9(0x230),_0x2466c9(0x26a));if(dbLogs[_0x2466c9(0x208)]('logs')[_0x2466c9(0x1f9)]()){let _0xeed915=dbLogs[_0x2466c9(0x1e2)](_0x2466c9(0x25f))[_0x2466c9(0x22a)](_0x445c2c=>{const _0x1ac2a9=_0x2466c9;if(_0x228a66[_0x1ac2a9(0x203)]['length']==0x0)return![];else return _0x228a66[_0x1ac2a9(0x203)][_0x1ac2a9(0x1ee)](_0x445c2c[_0x1ac2a9(0x203)]);})[_0x2466c9(0x22a)](_0x8f5e35=>{const _0x322235=_0x2466c9;if(_0x228a66['event']=='')return!![];else return _0x8f5e35[_0x322235(0x272)][_0x322235(0x198)]()[_0x322235(0x1ee)](_0x228a66[_0x322235(0x272)][_0x322235(0x198)]());})['sortBy']('time'),_0x440070=_0xeed915[_0x2466c9(0x1f9)]()['length'];_0xeed915=_0xeed915[_0x2466c9(0x22e)]()['slice']((_0x228a66['page']-0x1)*logPageSize,_0x228a66[_0x2466c9(0x248)]*logPageSize-0x1)[_0x2466c9(0x22e)]()[_0x2466c9(0x1f9)](),proxyEmit(_0x2466c9(0x21b),{'logs':_0xeed915,'total':_0x440070});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x17dfd9){const _0x2cc5b5=_0x239b7f,_0x57fd90=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x2cc5b5(0x26c)](),consecutivePauses=0x1;else{if(_0x57fd90-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x2cc5b5(0x266)},_0x5eff3b=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2cc5b5(0x230),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x17dfd9),botPaused=![],reset();}}async function handleError(_0x444d2e,_0x2c0c50,_0x539806=''){const _0x70848b=_0x239b7f;if(_0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)]('DDoSProtection'))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x19b)),await pauseBot(pauseBotInterval);else{if(_0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)](_0x70848b(0x27a)))logHistory('error',_0x2c0c50+_0x70848b(0x207)),await pauseBot(pauseBotInterval);else{if(_0x444d2e[_0x70848b(0x218)]()['includes'](_0x70848b(0x255)))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x17f)),await pauseBot(pauseBotInterval);else{if(_0x444d2e['toString']()[_0x70848b(0x1ee)](_0x70848b(0x1f8)))logHistory('error',_0x2c0c50+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x70848b(0x230),_0x70848b(0x1c7)),process['send']({'stop':_0x70848b(0x17d)},_0x5e8cdc=>{});else{if(_0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)]('AuthenticationError'))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x22d)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x70848b(0x1b3)]({'stop':_0x70848b(0x17d)},_0x42d7a3=>{});else{if(_0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)](_0x70848b(0x190)))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x17e)),logHistory(_0x70848b(0x230),_0x70848b(0x1c7)),process[_0x70848b(0x1b3)]({'stop':_0x70848b(0x17d)},_0x45b3d5=>{});else{if(_0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x1cd)),logHistory(_0x70848b(0x230),_0x70848b(0x1c7)),process[_0x70848b(0x1b3)]({'stop':'kill'},_0x9dacb3=>{});else{if(_0x444d2e['toString']()[_0x70848b(0x1ee)](_0x70848b(0x21f)))logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x240)),await pauseBot(pauseBotInterval),process[_0x70848b(0x1b3)]({'stop':_0x70848b(0x266)},_0x336dea=>{});else _0x444d2e[_0x70848b(0x218)]()[_0x70848b(0x1ee)]('InsufficientFunds')?logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x18b)):(logHistory(_0x70848b(0x230),_0x2c0c50+_0x70848b(0x285)),logging(_0x2c0c50+_0x70848b(0x1f3),_0x444d2e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x48a23f,_0x228bc4){const _0x41ce84=_0x239b7f;return parseFloat(_0x48a23f[_0x41ce84(0x221)](_0x228bc4));}function logging(_0x3fb679,_0x183e29=''){const _0x4e1333=_0x239b7f;if(config[_0x4e1333(0x238)])console[_0x4e1333(0x209)](getTimeStamp()+':\x20'+config[_0x4e1333(0x1a0)]+'\x20>\x20'+_0x3fb679,_0x183e29);else console[_0x4e1333(0x209)](getTimeStamp()+_0x4e1333(0x210)+botID+_0x4e1333(0x225)+_0x3fb679,_0x183e29);}function getServerTime(){const _0x11981f=_0x239b7f,_0x4ee415=new Date();return _0x4ee415[_0x11981f(0x17c)]()+'/'+(_0x4ee415[_0x11981f(0x1ca)]()+0x1)[_0x11981f(0x218)]()[_0x11981f(0x191)](0x2,'0')+'/'+_0x4ee415[_0x11981f(0x27f)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4ee415[_0x11981f(0x1b5)]()['toString']()[_0x11981f(0x191)](0x2,'0')+':'+_0x4ee415['getMinutes']()[_0x11981f(0x218)]()[_0x11981f(0x191)](0x2,'0')+':'+_0x4ee415[_0x11981f(0x180)]()['toString']()[_0x11981f(0x191)](0x2,'0');}function getTimeStamp(){const _0x5d924d=_0x239b7f,_0x4614aa=shiftedTime();return _0x4614aa[_0x5d924d(0x17c)]()+'/'+(_0x4614aa[_0x5d924d(0x1ca)]()+0x1)[_0x5d924d(0x218)]()['padStart'](0x2,'0')+'/'+_0x4614aa[_0x5d924d(0x27f)]()[_0x5d924d(0x218)]()[_0x5d924d(0x191)](0x2,'0')+'\x20'+_0x4614aa[_0x5d924d(0x1b5)]()[_0x5d924d(0x218)]()[_0x5d924d(0x191)](0x2,'0')+':'+_0x4614aa[_0x5d924d(0x200)]()[_0x5d924d(0x218)]()['padStart'](0x2,'0')+':'+_0x4614aa[_0x5d924d(0x180)]()[_0x5d924d(0x218)]()[_0x5d924d(0x191)](0x2,'0');}function getDate(){const _0x4a6200=_0x239b7f,_0x145e16=shiftedTime();return _0x145e16['getFullYear']()+'/'+(_0x145e16['getMonth']()+0x1)[_0x4a6200(0x218)]()[_0x4a6200(0x191)](0x2,'0')+'/'+_0x145e16['getDate']()[_0x4a6200(0x218)]()['padStart'](0x2,'0');}function getHour(){const _0x138edf=_0x239b7f,_0x77e929=shiftedTime();return _0x77e929[_0x138edf(0x1b5)]()[_0x138edf(0x218)]()['padStart'](0x2,'0');}function sleep(_0x4845df){return new Promise(_0x5c355b=>setTimeout(_0x5c355b,_0x4845df));}function shiftedTime(){const _0x43f1f2=_0x239b7f,_0x232b59=new Date();let _0x374000=_0x232b59;if(config&&config['timeshift']!==0x0)_0x374000=fns[_0x43f1f2(0x1aa)](_0x232b59,{'hours':config[_0x43f1f2(0x1a7)]});return _0x374000;}