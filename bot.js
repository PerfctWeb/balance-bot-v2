const _0x45c57d=_0x5eac;(function(_0x3f9d6a,_0x1a01b6){const _0x13d3ac=_0x5eac,_0x31f53d=_0x3f9d6a();while(!![]){try{const _0x4608df=parseInt(_0x13d3ac(0x2b8))/0x1*(parseInt(_0x13d3ac(0x21c))/0x2)+parseInt(_0x13d3ac(0x2d6))/0x3*(-parseInt(_0x13d3ac(0x26b))/0x4)+-parseInt(_0x13d3ac(0x269))/0x5+parseInt(_0x13d3ac(0x31b))/0x6+parseInt(_0x13d3ac(0x29d))/0x7+parseInt(_0x13d3ac(0x346))/0x8+-parseInt(_0x13d3ac(0x2fb))/0x9*(parseInt(_0x13d3ac(0x25c))/0xa);if(_0x4608df===_0x1a01b6)break;else _0x31f53d['push'](_0x31f53d['shift']());}catch(_0x516641){_0x31f53d['push'](_0x31f53d['shift']());}}}(_0x5752,0x2dab4));const _0x31708c=function(){let _0x5da997=!![];return function(_0x2f915d,_0x337b41){const _0x19c6fe=_0x5da997?function(){const _0x3fc2cd=_0x5eac;if(_0x337b41){const _0x22fecc=_0x337b41[_0x3fc2cd(0x30e)](_0x2f915d,arguments);return _0x337b41=null,_0x22fecc;}}:function(){};return _0x5da997=![],_0x19c6fe;};}(),_0x5d0060=_0x31708c(this,function(){const _0x2a80cb=_0x5eac;return _0x5d0060[_0x2a80cb(0x2cc)]()[_0x2a80cb(0x1f6)](_0x2a80cb(0x240))[_0x2a80cb(0x2cc)]()[_0x2a80cb(0x1b4)](_0x5d0060)[_0x2a80cb(0x1f6)]('(((.+)+)+)+$');});_0x5d0060();'use strict';const ccxt=require('ccxt'),low=require(_0x45c57d(0x28b)),FileSync=require(_0x45c57d(0x1c6)),fs=require('fs'),fns=require(_0x45c57d(0x27f)),Crypt=require(_0x45c57d(0x268))[_0x45c57d(0x310)],util=require('util'),argv=require(_0x45c57d(0x2b3))(process[_0x45c57d(0x1b8)][_0x45c57d(0x26d)](0x2))[_0x45c57d(0x1b8)],path=require(_0x45c57d(0x247)),axios=require(_0x45c57d(0x232));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x45c57d(0x206),_0x45c57d(0x1eb),'TUSD','USDT',_0x45c57d(0x275),_0x45c57d(0x2ec)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x45c57d(0x315)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x45c57d(0x31c)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x45c57d(0x26f))[_0x45c57d(0x256)],botID=process[_0x45c57d(0x1b8)][0x2]||'001',pattern=/^[0-9]{3}$/;function _0x5eac(_0x4cb57b,_0x1f96e8){const _0x4559f4=_0x5752();return _0x5eac=function(_0x5d0060,_0x31708c){_0x5d0060=_0x5d0060-0x1a3;let _0x57524e=_0x4559f4[_0x5d0060];return _0x57524e;},_0x5eac(_0x4cb57b,_0x1f96e8);}!pattern[_0x45c57d(0x2ae)](botID)&&(console[_0x45c57d(0x2e9)](_0x45c57d(0x27c)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x45c57d(0x1b8)][0x3]||'',configpath=userID?_0x45c57d(0x333)+userID+'/':'./config/',logspath=userID?_0x45c57d(0x354)+userID+'/':_0x45c57d(0x354),loggerfile=fs[_0x45c57d(0x298)](logspath+_0x45c57d(0x311),{'flags':'a'});!fs[_0x45c57d(0x1d5)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x45c57d(0x1d5)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x45c57d(0x2de)+botID+_0x45c57d(0x335),logfile=configpath+_0x45c57d(0x2de)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x45c57d(0x2de)+botID+_0x45c57d(0x2ea),settingsfile=configpath+_0x45c57d(0x248),securefile=configpath+_0x45c57d(0x241),configbackuppath=configpath+_0x45c57d(0x1bd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x45c57d(0x2d8)]({'logs':[],'version':serverversion})[_0x45c57d(0x267)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x45c57d(0x2d8)]({'bot':[],'version':serverversion})[_0x45c57d(0x267)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x45c57d(0x267)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x45c57d(0x34d),'rsaStandard':_0x45c57d(0x336)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2766db=>{console['log'](_0x2766db);},'simple':_0x6bf8d0=>{const _0x28ae81=_0x45c57d;console[_0x28ae81(0x2e9)](_0x6bf8d0),loggerfile[_0x28ae81(0x267)](util[_0x28ae81(0x1b7)](_0x6bf8d0)+'\x0a');},'full':async(_0x510370,_0x3a359a='')=>{const _0x3c287a=_0x45c57d;let _0x5f0af7;if(config[_0x3c287a(0x327)])_0x5f0af7=getTimeStamp()+':\x20'+config[_0x3c287a(0x297)]+_0x3c287a(0x23f)+_0x510370;else _0x5f0af7=getTimeStamp()+':\x20Bot\x20'+botID+_0x3c287a(0x23f)+_0x510370;console[_0x3c287a(0x2e9)](_0x5f0af7),loggerfile[_0x3c287a(0x267)](util[_0x3c287a(0x1b7)](_0x5f0af7)+'\x0a'),_0x3a359a&&(console['log'](_0x3a359a),loggerfile[_0x3c287a(0x267)](util[_0x3c287a(0x1b7)](_0x3a359a)+'\x0a'));},'debug':async(_0x47116e,_0x445e0a='')=>{const _0x57a207=_0x45c57d;let _0x561130;if(config[_0x57a207(0x327)])_0x561130=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x47116e;else _0x561130=getTimeStamp()+':\x20Bot\x20'+botID+_0x57a207(0x20d)+_0x47116e;if(debugging)console[_0x57a207(0x2e9)](_0x561130);loggerfile[_0x57a207(0x267)](util[_0x57a207(0x1b7)](_0x561130)+'\x0a');if(_0x445e0a){if(debugging)console[_0x57a207(0x2e9)](_0x445e0a);loggerfile[_0x57a207(0x267)](util[_0x57a207(0x1b7)](_0x445e0a)+'\x0a');}}};process['on'](_0x45c57d(0x33e),function(_0x357554){const _0x4772d6=_0x45c57d;handleError(_0x357554,_0x4772d6(0x33e));});settings[_0x45c57d(0x283)]!=config['timeshift']&&updateTimeshift(settings[_0x45c57d(0x283)]);settings['onepagemode']!=config[_0x45c57d(0x2c5)]&&updateOnepagemode(settings[_0x45c57d(0x2c5)]);(settings[_0x45c57d(0x2d5)]&&!config[_0x45c57d(0x2d5)]||!settings[_0x45c57d(0x2d5)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x45c57d(0x2d5)]);process[_0x45c57d(0x213)]({'started':_0x45c57d(0x2d0)},_0x1ae257=>{}),initializeProcessListeners();function proxyEmit(_0x51fc78,_0x5a7b4d=null){process['send']({'function':_0x51fc78,'args':_0x5a7b4d},_0xe513b4=>{});}function initializeProcessListeners(){const _0x123c0e=_0x45c57d;process['on'](_0x123c0e(0x29c),_0x59dc1a=>{const _0x145e29=_0x123c0e;switch(Object['keys'](_0x59dc1a)[0x0]){case _0x145e29(0x283):_0x59dc1a[_0x145e29(0x283)]!=undefined&&(settings['timeshift']=_0x59dc1a['timeshift'],updateTimeshift(settings[_0x145e29(0x283)]));break;case _0x145e29(0x2c5):_0x59dc1a[_0x145e29(0x2c5)]!=undefined&&(settings[_0x145e29(0x2c5)]=_0x59dc1a[_0x145e29(0x2c5)],updateOnepagemode(settings[_0x145e29(0x2c5)]));break;case'marketcapApi':_0x59dc1a[_0x145e29(0x2d5)]!=undefined&&(settings[_0x145e29(0x2d5)]=_0x59dc1a[_0x145e29(0x2d5)],updateMarketcapApi(settings[_0x145e29(0x2d5)]));break;case _0x145e29(0x28f):_0x59dc1a[_0x145e29(0x28f)]!=undefined&&(bots=JSON['parse'](_0x59dc1a['bots']),proxyEmit('bots',bots));break;case _0x145e29(0x20c):switch(_0x59dc1a[_0x145e29(0x20c)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x145e29(0x30f):silentRestart();break;case _0x145e29(0x24b):emitHistory(_0x59dc1a[_0x145e29(0x329)]);break;case _0x145e29(0x1ce):deleteHistoryAlerts(_0x59dc1a[_0x145e29(0x329)]);break;case'getPortfolio':getPortfolio(_0x59dc1a[_0x145e29(0x329)]);break;case'storeConfiguration':storeConfiguration(_0x59dc1a[_0x145e29(0x329)]);break;case _0x145e29(0x337):storeHeadless(_0x59dc1a['args']);break;case _0x145e29(0x2b0):storeFiat(_0x59dc1a['args']);break;case'resetHistory':resetHistory();break;case _0x145e29(0x30d):getStartingBalances(getNormalizedPerformance());break;case _0x145e29(0x1fa):placeOrder(_0x59dc1a[_0x145e29(0x329)]);break;case'cancelLoading':cancelLoading();break;case _0x145e29(0x1c3):showConfig();break;case _0x145e29(0x302):sendMetricsTelegram();break;case _0x145e29(0x2b5):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x42eb33=![]){const _0x5062ef=_0x45c57d;logger[_0x5062ef(0x29f)](_0x5062ef(0x262)+(_0x42eb33?_0x5062ef(0x25f):'exchange\x20not\x20reloaded')+_0x5062ef(0x1f7)+config[_0x5062ef(0x32e)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x42eb33)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5062ef(0x207)]!=''&&config[_0x5062ef(0x207)]!=_0x5062ef(0x27e)){loadingProgress=0x0;if(_0x42eb33){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x3f1dd1){handleErrorNoStop(_0x3f1dd1,_0x5062ef(0x1d8));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x28bc04=await getCoins();[currentCoins,currentCoinsAll]=_0x28bc04,blockTransactionDetection=![],getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x5062ef(0x2c4)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5062ef(0x1c8)]==0x0&&allOpenOrders[_0x5062ef(0x1c8)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0xab5a0e){const _0x3db233=_0x45c57d;let _0x21deb7=![];if(_0xab5a0e)_0x21deb7=!![];let _0x3012a5;_0x21deb7?_0x3012a5=_0xab5a0e['map'](_0x1fe162=>_0x1fe162[_0x3db233(0x31e)]):_0x3012a5=currentCoinsAll[_0x3db233(0x1ee)](_0x402fed=>_0x402fed['coin']);if(!config['marketcapApi']||!_0x21deb7&&!config['marketcapEnabled']||_0x3012a5[_0x3db233(0x1c8)]==0x0)return;let _0x3d5e59=null;try{_0x3d5e59=await axios[_0x3db233(0x2ee)](_0x3db233(0x201),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3db233(0x2d5)]},'params':{'symbol':_0x3012a5[_0x3db233(0x2cc)]()}});}catch(_0x4d946c){_0x3d5e59=null,_0x4d946c[_0x3db233(0x2cc)]()[_0x3db233(0x338)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x3db233(0x1f8),emittedConfiguration()),logHistory(_0x3db233(0x314),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory(_0x3db233(0x314),_0x3db233(0x200)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x3db233(0x29f)](_0x3db233(0x235),_0x4d946c['toString']()+_0x3db233(0x263)+_0x4d946c[_0x3db233(0x266)]));}if(_0x3d5e59){let _0x155e9b=0x0;const _0x49080c=_0x3d5e59[_0x3db233(0x23a)];_0x3012a5[_0x3db233(0x1c5)](_0x5d058b=>{const _0xbce7ea=_0x3db233;if(_0x49080c[_0xbce7ea(0x23a)][_0x5d058b][0x0])_0x155e9b+=_0x49080c['data'][_0x5d058b][0x0][_0xbce7ea(0x1cd)][_0xbce7ea(0x206)][_0xbce7ea(0x2a9)];}),_0x3012a5[_0x3db233(0x1c5)](_0xec3328=>{const _0x339407=_0x3db233,_0x4e6e77=_0x49080c[_0x339407(0x23a)][_0xec3328][0x0]?_0x49080c['data'][_0xec3328][0x0][_0x339407(0x1cd)][_0x339407(0x206)]['market_cap']:0x0;if(_0x21deb7){const _0x2ecfba=_0xab5a0e[_0x339407(0x34b)](_0x3cc6e9=>_0x3cc6e9[_0x339407(0x31e)]==_0xec3328);_0x2ecfba&&(_0x2ecfba[_0x339407(0x305)]=_0x4e6e77);}else{const _0x1701b3=currentCoins['find'](_0x256fb9=>_0x256fb9['coin']==_0xec3328);_0x1701b3&&(_0x1701b3[_0x339407(0x305)]=_0x4e6e77);const _0x4555d6=currentCoinsAll['find'](_0x187c43=>_0x187c43['coin']==_0xec3328);_0x4555d6&&(_0x4555d6[_0x339407(0x305)]=_0x4e6e77);}}),!_0x21deb7&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x520bde=_0x45c57d,_0x36f536=0x2;let _0x4f9388=0x0,_0x37eba8=0x0,_0xa0351=0x0,_0x3abae3=0x0,_0x18170d=0x0;config['portfolio'][_0x520bde(0x1c5)](_0xeb1a18=>{const _0x47953f=_0x520bde;if(!_0xeb1a18['excluded']){_0xa0351++,_0x4f9388+=_0xeb1a18[_0x47953f(0x1b3)];if(_0xeb1a18['slider']===-0x1){_0x4f9388++;const _0x568801=currentCoinsAll['find'](_0x223024=>_0x223024['coin']==_0xeb1a18['coin']);_0x568801&&(_0x3abae3+=_0x568801[_0x47953f(0x305)],_0x18170d+=Math['sqrt'](_0x568801[_0x47953f(0x305)]));}if(_0xeb1a18[_0x47953f(0x1b3)]!==-0x1)_0x37eba8++;}});let _0x446d55;const _0x59c73e=0x64-_0x4f9388,_0x5187d6=_0xa0351-_0x37eba8;_0x446d55=_0x5187d6===0x0?_0x4f9388:Math[_0x520bde(0x2bf)](0x64,_0x4f9388),config[_0x520bde(0x1e7)]['forEach'](_0x1c1eb0=>{const _0x45d14=_0x520bde,_0x3ff060=currentCoinsAll[_0x45d14(0x34b)](_0x146878=>_0x146878[_0x45d14(0x31e)]==_0x1c1eb0[_0x45d14(0x31e)]);_0x3ff060&&(_0x1c1eb0[_0x45d14(0x305)]=_0x3ff060['marketcap']);if(!_0x1c1eb0['excluded']){if(_0x446d55<=0x64){if(_0x1c1eb0[_0x45d14(0x1b3)]===-0x1){if(_0x3abae3!==0x0&&config[_0x45d14(0x1d6)]){if(_0x3ff060){if(config['marketcapEnabled']==_0x45d14(0x305))_0x1c1eb0[_0x45d14(0x2e6)]=(_0x59c73e/(_0x3abae3/_0x3ff060[_0x45d14(0x305)]))['toFixed'](_0x36f536);else config[_0x45d14(0x1d6)]=='marketcapsqrt'&&(_0x1c1eb0[_0x45d14(0x2e6)]=(_0x59c73e/(_0x18170d/Math[_0x45d14(0x33f)](_0x3ff060['marketcap'])))['toFixed'](_0x36f536));}}}}}}),updateConfig();}function updateConfig(){const _0x3e227f=_0x45c57d;let _0x5d7450=dbConfig[_0x3e227f(0x2ee)]('bot')[_0x3e227f(0x34b)]({'botID':botID})[_0x3e227f(0x331)]();_0x5d7450&&dbConfig['get']('bot')[_0x3e227f(0x34b)]({'botID':botID})[_0x3e227f(0x34f)](config)[_0x3e227f(0x267)]();}async function startScheduler(){const _0x3a404d=_0x45c57d,_0x1ba4eb=shiftedTime()['getHours'](),_0xbd2dfa=process[_0x3a404d(0x2f8)]()['heapUsed']/0x400/0x400;logger['debug'](_0x3a404d(0x284)+process[_0x3a404d(0x1e5)]+_0x3a404d(0x22f)+_0xbd2dfa+_0x3a404d(0x2f4)),getMarketCap(),(_0x1ba4eb==0x6||_0x1ba4eb==0x12)&&reloadExchange(),await sleep(schedulerInterval),startScheduler();}async function silentRestart(){const _0x34db44=_0x45c57d;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0xa*0x3e8);}process[_0x34db44(0x258)](0x4d);}async function restartBot(_0x1f6115=![]){const _0x691d86=_0x45c57d;logger[_0x691d86(0x29f)](_0x691d86(0x2f1));if(!_0x1f6115){while(lockOrders!=ORDERS[_0x691d86(0x30a)]||coolingDown){await sleep(0xa*0x3e8);}await stopExchange();}process['send']({'stop':'restart'},_0x73327=>{});}async function stopExchange(){const _0x4e00bb=_0x45c57d;if(!exchange)return;exchangeStopped=!![];try{await exchange[_0x4e00bb(0x1ff)]();}catch(_0x5c1256){await handleError(_0x5c1256,_0x4e00bb(0x1d2));}}async function reloadExchange(){const _0x59840c=_0x45c57d;logger[_0x59840c(0x29f)](_0x59840c(0x342));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange(),reset(!![]);}async function initExchange(_0x3c94fd=config['exchange'],_0x279141=config['apiKey'],_0x1780c4=config[_0x45c57d(0x1c2)],_0x296551=config[_0x45c57d(0x264)]){const _0x5eac07=_0x45c57d;await stopExchange();!supportedExchanges()[_0x5eac07(0x338)](_0x3c94fd)&&(logHistory('error',_0x5eac07(0x1fe)+_0x3c94fd+'\x20exchange'),killBot());const _0xf1cbf4=ccxt[_0x5eac07(0x304)][_0x3c94fd[_0x5eac07(0x1fc)]()];exchange=new _0xf1cbf4({'apiKey':_0x279141,'secret':_0x1780c4,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x296551)exchange[_0x5eac07(0x2be)]=_0x296551;}function setStableCoins(){const _0x451650=_0x45c57d;let _0x2987c0=config[_0x451650(0x358)]=='ETH'?_0x451650(0x21f):config[_0x451650(0x358)]==_0x451650(0x1c4)?_0x451650(0x1c4):_0x451650(0x1e2),_0x4534be=!allSymbols[_0x451650(0x338)](_0x2987c0+_0x451650(0x316))?_0x451650(0x1a7):_0x451650(0x206),_0x2aa1a7=!allSymbols[_0x451650(0x338)](_0x2987c0+'/EUR')?_0x4534be:_0x451650(0x2fa);stablecoins={'eur':{'coin':''+_0x2987c0+_0x2aa1a7,'symbol':_0x2987c0+'/'+_0x2aa1a7},'usd':{'coin':''+_0x2987c0+_0x4534be,'symbol':_0x2987c0+'/'+_0x4534be}};}async function initwsCcxt(){const _0x2724be=_0x45c57d;initCycle++;const _0x1fadac=initCycle;let _0x2bd40c=[];config[_0x2724be(0x1e7)][_0x2724be(0x1c5)](_0x42bc05=>{const _0x3b25fb=_0x2724be;if(!_0x42bc05[_0x3b25fb(0x21d)]&&_0x42bc05[_0x3b25fb(0x31e)]!=config[_0x3b25fb(0x358)])_0x2bd40c[_0x3b25fb(0x255)](_0x42bc05[_0x3b25fb(0x1ed)]);});if(!_0x2bd40c[_0x2724be(0x338)](stablecoins[_0x2724be(0x244)]['symbol']))_0x2bd40c[_0x2724be(0x255)](stablecoins['eur'][_0x2724be(0x1ed)]);if(!_0x2bd40c['includes'](stablecoins[_0x2724be(0x2bc)][_0x2724be(0x1ed)]))_0x2bd40c[_0x2724be(0x255)](stablecoins[_0x2724be(0x2bc)][_0x2724be(0x1ed)]);if(config['exchange'][_0x2724be(0x343)](_0x2724be(0x1f1))&&config[_0x2724be(0x358)]!='PAXG'){if(!_0x2bd40c[_0x2724be(0x338)](_0x2724be(0x326)+config[_0x2724be(0x358)]))_0x2bd40c['push'](_0x2724be(0x326)+config[_0x2724be(0x358)]);}loadCoins(_0x2bd40c),_0x2bd40c=validateSymbols(_0x2bd40c);const _0x408874=async _0x596399=>{const _0xab9e59=_0x2724be;let _0x134240;try{const _0x5e2ba6=await getTickers(_0x596399);Object['entries'](_0x5e2ba6)[_0xab9e59(0x1c5)](_0x2accfb=>{const _0x8bd5fa=_0xab9e59;_0x134240=_0x2accfb[0x1]['symbol'],gTicker[noslash(_0x134240)]=_0x2accfb[0x1][_0x8bd5fa(0x2e1)],gChange[_0x134240]=_0x2accfb[0x1][_0x8bd5fa(0x355)];});}catch(_0x5b2317){await handleError(_0x5b2317,'initTickers()',_0x134240);}},_0x30c0bf=async _0x4d9cd1=>{const _0x2aebe2=_0x2724be;while(initCycle==_0x1fadac){if(!botPaused)try{const _0x1fcafc=await exchange['watchTrades'](_0x4d9cd1);gTicker[noslash(_0x1fcafc[0x0][_0x2aebe2(0x1ed)])]=_0x1fcafc[0x0][_0x2aebe2(0x1b0)];}catch(_0x591145){if(!exchangeStopped)await handleError(_0x591145,'watchTrades()',_0x4d9cd1);}else await sleep(0x64);}},_0x12e106=async _0x279f9a=>{const _0x1863cc=_0x2724be;while(initCycle==_0x1fadac){if(!botPaused)try{const _0x5012b7=await exchange[_0x1863cc(0x303)](_0x279f9a),_0x16f1b3=_0x5012b7[_0x1863cc(0x1af)]();gTicker[noslash(_0x16f1b3[_0x1863cc(0x1ed)])]=_0x16f1b3[_0x1863cc(0x1b0)];}catch(_0x128ec5){if(!exchangeStopped)await handleError(_0x128ec5,_0x1863cc(0x1c1),_0x279f9a['toString']());}else await sleep(0x64);}},_0x5e6796=async _0x2823d7=>{const _0x278043=_0x2724be;while(initCycle==_0x1fadac){if(!botPaused){let _0x138128;try{await sleep(0x3c*0x3e8);const _0x1c0b38=await getTickers(_0x2823d7);Object[_0x278043(0x274)](_0x1c0b38)[_0x278043(0x1c5)](_0x2ae7ed=>{_0x138128=_0x2ae7ed[0x1]['symbol'],gChange[_0x138128]=_0x2ae7ed[0x1]['percentage'];});}catch(_0x4632ea){if(!exchangeStopped)await handleError(_0x4632ea,'fetchTickers()',_0x138128);}}else await sleep(0x64);}},_0x4b7776=async _0x1607f7=>{const _0x4c2670=_0x2724be;while(initCycle==_0x1fadac){if(!botPaused)try{const _0x4d8d44=await exchange[_0x4c2670(0x249)](_0x1607f7);initCycle==_0x1fadac&&_0x4d8d44['forEach'](_0x595ba2=>{updateNumberCoinsCcxt(_0x595ba2);});}catch(_0x2190f5){if(!exchangeStopped)await handleError(_0x2190f5,_0x4c2670(0x33a));}else await sleep(0x64);}};_0x408874(_0x2bd40c),_0x5e6796(_0x2bd40c),exchange[_0x2724be(0x1e3)][_0x2724be(0x303)]?_0x12e106(_0x2bd40c):_0x2bd40c[_0x2724be(0x1c5)](_0x5187a5=>{_0x30c0bf(_0x5187a5);}),_0x2bd40c[_0x2724be(0x1c5)](_0x105f35=>{_0x4b7776(_0x105f35);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4d3f1c){const _0x404b3d=_0x45c57d;let _0xd82447={};try{if(config[_0x404b3d(0x32e)]!=_0x404b3d(0x307))_0xd82447=await exchange[_0x404b3d(0x28c)](_0x4d3f1c);else for(const _0xe597aa of _0x4d3f1c){const _0x479eb9=await exchange['fetchTicker'](_0xe597aa);_0xd82447[_0xe597aa]=_0x479eb9;}return _0xd82447;}catch(_0x343d28){throw _0x343d28;}}async function detectLiquidityChange(_0x3e345e=0x0){const _0x4bf8e9=_0x45c57d;transactionDetectionOngoing=!![];try{const _0x5062ae=await getCoins(_0x3e345e),[_0x583ed6,_0x253a9b]=_0x5062ae;let _0x1b0637=[];currentCoins['forEach'](_0x4d58cd=>{const _0x392255=_0x5eac,_0x553fa0=_0x583ed6[_0x392255(0x34b)](_0xa1b657=>_0xa1b657['coin']==_0x4d58cd[_0x392255(0x31e)]);if(_0x553fa0){if(_0x4d58cd[_0x392255(0x313)]!=_0x553fa0['number']){let _0x31a0d0;if(_0x4d58cd[_0x392255(0x31e)]!=config[_0x392255(0x358)]){const _0x2d5e18=gTicker[noslash(_0x4d58cd['symbol'])];_0x31a0d0=_0x4d58cd['reverse']?0x1/_0x2d5e18:_0x2d5e18;}else _0x31a0d0=0x1;_0x1b0637[_0x392255(0x255)]({'coin':_0x4d58cd[_0x392255(0x31e)],'symbol':_0x4d58cd[_0x392255(0x1ed)],'price':_0x31a0d0,'number':Number(formatResult(_0x553fa0['number']-_0x4d58cd[_0x392255(0x313)],0x8)),'basecoinvalue':_0x31a0d0*(_0x553fa0[_0x392255(0x313)]-_0x4d58cd['number'])});}}});if(_0x1b0637['length']>0x0&&!blockTransactionDetection)for(const _0x2c8501 of _0x1b0637){if(config[_0x4bf8e9(0x1c9)]){logger[_0x4bf8e9(0x29f)](_0x4bf8e9(0x1b9)+_0x2c8501[_0x4bf8e9(0x1b5)]+_0x4bf8e9(0x1d3)+lastFees['highest']);if(lastFees[_0x4bf8e9(0x220)]==0x0||Math[_0x4bf8e9(0x300)](_0x2c8501['basecoinvalue'])>lastFees[_0x4bf8e9(0x220)]*1.2){if(config[_0x4bf8e9(0x1c9)]==_0x4bf8e9(0x2b2)){delete _0x2c8501[_0x4bf8e9(0x1ed)],delete _0x2c8501[_0x4bf8e9(0x1b5)];let _0xf49d52=[],_0x757eaa=[...config['liquidity']]||[],_0x3604e3=config['liquidity'];_0x757eaa['sort']((_0x2fc628,_0x2f0868)=>_0x2fc628[_0x4bf8e9(0x2fd)]>_0x2f0868['date']?-0x1:_0x2f0868[_0x4bf8e9(0x2fd)]>_0x2fc628[_0x4bf8e9(0x2fd)]?0x1:0x0);const _0x420d73=getDate();if(_0x757eaa[0x0]){const _0x16cf38=fns[_0x4bf8e9(0x356)](_0x757eaa[0x0][_0x4bf8e9(0x2fd)],_0x4bf8e9(0x344),new Date()),_0x438295=fns[_0x4bf8e9(0x356)](_0x420d73,_0x4bf8e9(0x344),new Date());if(fns[_0x4bf8e9(0x281)](_0x16cf38,_0x438295)){_0xf49d52=_0x757eaa[0x0][_0x4bf8e9(0x243)];const _0x55945b=_0xf49d52[_0x4bf8e9(0x34b)](_0x12939e=>_0x12939e['coin']==_0x2c8501[_0x4bf8e9(0x31e)]);_0x55945b?(_0x55945b[_0x4bf8e9(0x313)]+=_0x2c8501[_0x4bf8e9(0x313)],_0x55945b['number']==0x0&&(_0xf49d52=_0xf49d52[_0x4bf8e9(0x224)](_0xce68b6=>{const _0x2b4991=_0x4bf8e9;return _0xce68b6[_0x2b4991(0x31e)]!=_0x2c8501[_0x2b4991(0x31e)];}))):_0xf49d52[_0x4bf8e9(0x255)](_0x2c8501);const _0x4dd713=_0x3604e3[_0x4bf8e9(0x34b)](_0xa39da8=>_0xa39da8[_0x4bf8e9(0x2fd)]==_0x420d73);_0x4dd713[_0x4bf8e9(0x243)]=_0xf49d52;}else _0x3604e3[_0x4bf8e9(0x255)]({'date':_0x420d73,'changes':[_0x2c8501]});}const _0x2142c6=_0x3604e3[_0x4bf8e9(0x34b)](_0x25058a=>_0x25058a[_0x4bf8e9(0x2fd)]==_0x420d73);if(_0x2142c6){let _0x5c539f=!![];_0x2142c6[_0x4bf8e9(0x243)]['forEach'](_0x4fc651=>{const _0xa5c0d6=_0x4bf8e9;if(_0x4fc651[_0xa5c0d6(0x313)]!=0x0)_0x5c539f=![];}),_0x5c539f&&(_0x3604e3=_0x3604e3[_0x4bf8e9(0x224)](_0x189020=>{const _0x237444=_0x4bf8e9;return _0x189020[_0x237444(0x2fd)]!=_0x420d73;}));}let _0x1a0e11=dbConfig[_0x4bf8e9(0x2ee)]('bot')['find']({'botID':botID})['value']();_0x1a0e11&&(dbConfig['get'](_0x4bf8e9(0x2d7))['find']({'botID':botID})[_0x4bf8e9(0x34f)]({'liquidity':_0x3604e3})[_0x4bf8e9(0x267)](),config[_0x4bf8e9(0x2ca)]=_0x3604e3);logHistory(_0x4bf8e9(0x2e0),_0x4bf8e9(0x24d)+Math[_0x4bf8e9(0x300)](_0x2c8501[_0x4bf8e9(0x313)])+'\x20'+_0x2c8501[_0x4bf8e9(0x31e)]+'\x20'+(_0x2c8501['number']>0x0?_0x4bf8e9(0x260):_0x4bf8e9(0x279))+_0x4bf8e9(0x288)),proxyEmit(_0x4bf8e9(0x1f8),emittedConfiguration());const _0x52a308=getNormalizedPerformance();emitPerformance(_0x52a308),getStartingBalances(_0x52a308),logger['debug']('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config['autoliquidity']==_0x4bf8e9(0x32a)&&(config[_0x4bf8e9(0x1ca)]?(await storeHeadless({'headless':![]}),logHistory(_0x4bf8e9(0x2e0),_0x4bf8e9(0x345)),logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x4bf8e9(0x300)](_0x2c8501[_0x4bf8e9(0x313)])+'\x20'+_0x2c8501[_0x4bf8e9(0x31e)]+'\x20'+(_0x2c8501[_0x4bf8e9(0x313)]>0x0?_0x4bf8e9(0x260):_0x4bf8e9(0x279))+_0x4bf8e9(0x24e))):logger[_0x4bf8e9(0x29f)](_0x4bf8e9(0x24d)+Math[_0x4bf8e9(0x300)](_0x2c8501[_0x4bf8e9(0x313)])+'\x20'+_0x2c8501['coin']+'\x20'+(_0x2c8501[_0x4bf8e9(0x313)]>0x0?'added':'removed')+_0x4bf8e9(0x323)));}else logger[_0x4bf8e9(0x29f)](_0x4bf8e9(0x26c)+Math[_0x4bf8e9(0x300)](_0x2c8501[_0x4bf8e9(0x313)])+'\x20'+_0x2c8501[_0x4bf8e9(0x31e)]+'\x20'+(_0x2c8501[_0x4bf8e9(0x313)]>0x0?_0x4bf8e9(0x260):_0x4bf8e9(0x279)));}else logger['debug'](_0x4bf8e9(0x24d)+Math[_0x4bf8e9(0x300)](_0x2c8501[_0x4bf8e9(0x313)])+'\x20'+_0x2c8501[_0x4bf8e9(0x31e)]+'\x20'+(_0x2c8501[_0x4bf8e9(0x313)]>0x0?_0x4bf8e9(0x260):_0x4bf8e9(0x279))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x583ed6,currentCoinsAll=_0x253a9b;}catch(_0x58a554){if(!exchangeStopped)await handleError(_0x58a554,_0x4bf8e9(0x2f6));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x1be6b1=_0x45c57d;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x1be6b1(0x274)](markets)['forEach'](_0x4a468f=>{const _0x2d6c90=_0x1be6b1;_0x4a468f[0x1][_0x2d6c90(0x31d)]&&_0x4a468f[0x1][_0x2d6c90(0x289)]&&allSymbols[_0x2d6c90(0x255)](_0x4a468f[0x0]);});}catch(_0x5ecec4){throw _0x5ecec4;}}function validateSymbols(_0x577554){let _0x512e58=[];return _0x577554['forEach'](_0x3666e6=>{const _0x59e1f3=_0x5eac;!allSymbols[_0x59e1f3(0x338)](_0x3666e6)?logHistory(_0x59e1f3(0x314),_0x59e1f3(0x2cf)+_0x3666e6+_0x59e1f3(0x2e2)):_0x512e58[_0x59e1f3(0x255)](_0x3666e6);}),_0x512e58;}async function initclient(){const _0x2a30c9=_0x45c57d;proxyEmit(_0x2a30c9(0x1f8),emittedConfiguration()),proxyEmit(_0x2a30c9(0x2c7),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x55e37e=getNormalizedPerformance();emitPerformance(_0x55e37e),getStartingBalances(_0x55e37e);}async function toggleBotMode(){const _0x31583c=_0x45c57d;let _0x349217=dbConfig['get'](_0x31583c(0x2d7))['find']({'botID':botID})[_0x31583c(0x331)]();if(_0x349217){const _0x5dc045=!_0x349217[_0x31583c(0x1ca)];dbConfig['get'](_0x31583c(0x2d7))['find']({'botID':botID})[_0x31583c(0x34f)]({'headless':_0x5dc045})['write'](),config['headless']=_0x5dc045,proxyEmit(_0x31583c(0x1f8),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2f9df0=_0x45c57d;process['send']({'updatebotmanager':!![]},_0x47e7e8=>{}),logger[_0x2f9df0(0x29f)](_0x2f9df0(0x2a0)+config['headless']);}async function loadCoins(_0x5e1aa9){const _0x550ddb=_0x45c57d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x23536f,_0x2be541=0x0,_0x2079dc=0x0;_0x5e1aa9['forEach'](_0x19467f=>{const _0x55210b=_0x5eac;loading[_0x55210b(0x29e)]['push'](_0x19467f);}),loadingCanceled=![];let _0x35137e=![];while(_0x23536f!=_0x5e1aa9[_0x550ddb(0x1c8)]+maxLoadingProgress){_0x23536f=loadingProgress,_0x5e1aa9[_0x550ddb(0x1c5)](_0xf6826b=>{const _0x4a1a46=_0x550ddb;if(gTicker[noslash(_0xf6826b)]){loading[_0x4a1a46(0x29e)]=loading[_0x4a1a46(0x29e)][_0x4a1a46(0x224)](_0x3be08f=>_0x3be08f!=_0xf6826b);if(!watchedSymbols[_0x4a1a46(0x338)](_0xf6826b))watchedSymbols['push'](_0xf6826b);_0x23536f++;}}),loading[_0x550ddb(0x306)]=Math['round'](_0x23536f/(_0x5e1aa9['length']+maxLoadingProgress)*0x64);loading[_0x550ddb(0x306)]!=0x64&&(_0x2079dc>0x1e*0x5&&(loading[_0x550ddb(0x339)]=!![],emitLoadingProgress()),_0x2079dc>0x78*0x5&&!_0x35137e&&(_0x35137e=!![],logHistory(_0x550ddb(0x314),_0x550ddb(0x2f0)+loading['remainingSymbols'][_0x550ddb(0x1dd)](',\x20')+_0x550ddb(0x359)),logHistory(_0x550ddb(0x314),_0x550ddb(0x32c)+loadCoinsRetryInterval/0xea60+_0x550ddb(0x1cf)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x550ddb(0x1e1)]=!![],emitLoadingProgress();break;}else _0x2be541!=loading[_0x550ddb(0x306)]&&(_0x2be541=loading[_0x550ddb(0x306)],emitLoadingProgress()),_0x2079dc++,await sleep(0xc8);}_0x23536f==_0x5e1aa9[_0x550ddb(0x1c8)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x550ddb(0x213)]({'status':_0x550ddb(0x209),'live':'running'},_0x2c2dda=>{}),_0x35137e&&logHistory(_0x550ddb(0x2e0),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4c5852=_0x45c57d;proxyEmit(_0x4c5852(0x1f8),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x216de7=_0x45c57d;proxyEmit(_0x216de7(0x2ef),loading);}async function getFiat(){const _0x12a2e2=_0x45c57d;let _0x54165e=gTicker[stablecoins[_0x12a2e2(0x244)][_0x12a2e2(0x31e)]],_0x4d5262=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x54165e),'usd':Number(_0x4d5262)};}function _0x5752(){const _0x1e5924=['\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','LOCKED','limit-low','stopExchange()','\x20|\x20highest\x20fee:\x20','decrypt','existsSync','marketcapEnabled','getAllOrders()','loadSymbols()','Error\x20while\x20deleting\x20files:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Bot\x20','join','0\x20-\x20EXECUTION:\x20','Huobi','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','cancel','BTC','has','recovery','pid','Trigger:\x20','portfolio','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Net\x20effect','realized','BUSD','\x20orders\x20in\x20less\x20than\x20','symbol','map','1\x20-\x20Unlock\x20orders','\x20metrics:</b>\x20\x0a\x0a','Binance','Transaction\x20detection\x20blocked','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','min','target','search','\x20|\x20exchange:\x20','configuration','add','placeOrder','sell','toLowerCase','NetworkError','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','close','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','ongoing','getHours','Transaction\x20detection\x20unblocked','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','USD','apiKey','orderId','enabled','Limit\x20(high-margin)','cancelOrders()','function','\x20>\x20[DEBUG]\x20','event','page','cancelOrder','OrderNotFound','substring','send','ORDERS.UNLOCKING','fee','ID:\x20','InvalidNonce','InsufficientFunds','performance','ExchangeError','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','26890jXSCVq','excluded','1\x20-\x20FILLED\x20unknown\x20order:\x20','ETH','highest','\x20API\x20key\x20is\x20invalid','Waited\x20','amount','filter','\x20attempts','limit-high','getPortfolio(1)','buy','Order(s)\x20not\x20validated\x20after\x20','leftTxt','toUpperCase','must\x20be\x20greater\x20than\x20minimum\x20amount','balancing\x20resumed','getPortfolio(2)','\x20uses\x20','1\x20-\x20Handle\x20open\x20orders','filled','axios','2\x20-\x20Validate\x20orders:\x20','random','Error\x20details:','openOrders','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','trade','sortBy','data','average','shift','Exchange','\x20:\x20','\x20>\x20','(((.+)+)+)+$','bb-secure.json','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','changes','eur','fetchTicker','yyyy-MM-dd\x27T\x27HH:mm:ss','path','bb-settings.json','watchOrders','\x20change','emitHistory','string','Portfolio\x20change\x20detected:\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','rightTxt','BNB','\x20API\x20secret\x20is\x20invalid','initial','push','version','reverse','exit','replace','type','datetime','2866900mepBAi','PermissionDenied','ordertype','exchange\x20reloaded','added','************','Reset\x20|\x20','\x20-\x20','apiPassword','getMonth','code','write','hybrid-crypto-js','1555325sTQwPR','-------------------------------\x0a','4YMjkYz','Fee\x20discount\x20refund\x20detected:\x20','slice','fiat','./version.json','OnMaintenance','.json','milliseconds','fees','entries','USDC','cloneDeep','MIN_NOTIONAL','Symbol(s):\x20','removed','fetchOpenOrders','ExchangeNotAvailable','Error:\x20Invalid\x20argument\x20','2.6.0','***','date-fns','canceled','isEqual','2.3.5','timeshift','process\x20','valid','2.6.23','1\x20-\x20Validate\x20orders:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','spot','colorscheme','lowdb','fetchTickers','net-fiat','cost','bots','watchTrades','no\x20open\x20orders','orderstatus','stringify','recent20','parseISO','split','botname','createWriteStream','startnumber','event-history','Bybit','message','578326trzqmg','remainingSymbols','debug','Headless:\x20','balances','getSeconds','total','set','breakeven','change24h','timestamp','indexOf','market_cap','final','cooldown','</pre>','\x20|\x20Custom\x20ID:\x20','test','keys','storeFiat','recreate','update-liquidity','yargs/yargs','round','sendPortfolioTelegram','\x20|\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','27nXQdGI','getDate','Initializing\x20coin\x20results','%\x20(','usd','writeFile','password','max','-events.json','getTime','getCoinNumber()','request-time','Loading\x20completed','onepagemode','netoffset','exchanges','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','2\x20-\x20Orders\x20unlocked','liquidity','kill','toString','limits','startdate','Invalid\x20symbol:\x20','running','RETRY\x20-\x20Problem\x20resolved\x20after\x20','sort','2\x20-\x20Handled\x20open\x20orders','balancing\x20resumes\x20when\x20cooldown\x20ends','marketcapApi','502323SlwOOo','bot','defaults','getCoins()','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','Exception\x20thrown\x20in\x20','Invalid\x20quantity','offset','bot-','status','success','last','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','1\x20-\x20FILLED\x20known\x20order:\x20','\x20/\x20','open','distribution','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','2\x20-\x20handling\x20FILLED\x20order:\x20','log','-results.json','Limit\x20(low-margin)','USDP','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','get','coin-loading-progress','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Initiating\x20bot\x20restart','Avoiding\x20continuous\x20order\x20attempts','Resetting\x20coin\x20results:\x20','\x20MB',':\x20timer\x20>','detectLiquidityChange()','emojibuy','memoryUsage','DDoSProtection','EUR','9dxwJRw','\x20minutes\x20-\x20','date','change','<pre>','abs','bid','sendMetricsTelegram','watchTradesForSymbols','pro','marketcap','progress','Cryptocom','RETRY\x20-\x20Error\x20in\x20','unlinkSync','UNLOCKED','\x20order:\x20','RequestTimeout','getStartingBalances','apply','silentRestart','Crypt','/output-000.log','Order\x20amount\x20is\x20invalid:\x20','number','error','freeze','/USD','Order\x20is\x20invalid:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Net\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','2232318PZBwXR','\x20-\x20pausing\x20bot\x20for\x20','active','coin','emojisell','UNLOCKING','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','currency','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','coins','market','BNB/','showname','delta','args','switch-manual','createOrder','Pausing\x20for\x20','warning','exchange','API-key\x20format\x20invalid','-performance.json','value','RateLimitExceeded','./config/','exec','-config.json','RSA-OAEP','storeHeadless','includes','timeout','watchOrders()','InvalidOrder','AuthenticationError','Invalid\x20API\x20key\x20or\x20secret\x20entered','uncaughtException','sqrt','Insufficient\x20funds\x20to\x20execute\x20order:\x20','sells','Executing\x20exchange\x20reload','startsWith','yyyy/MM/dd','Portfolio\x20change\x20detected\x20-\x20bot\x20switched\x20to\x20manual\x20mode','1076560XBRxSb','\x20hour','No\x20more\x20open\x20orders\x20-\x20','time','Unfilled\x20order(s)\x20canceled\x20after\x20','find','fetchClosedOrders','sha256','order','assign','settings','red_yellow_blue','full','none','./logs/','percentage','parse','closed','basecoin','\x20-\x20bot\x20not\x20started','\x20portfolio:</b>\x20\x0a\x0a','getMinutes','\x20network\x20error','botID','limit','USDT','configuration-stored','side','remove','fetchBalance','net-basecoin','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','logs','pop','price','threshold','\x20value','slider','constructor','basecoinvalue','toFixed','format','argv','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','padStart','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20has\x20a\x2024h\x20drop\x20of\x20','/backup/','splice','Resetting\x20bot\x20history','\x20>\x20details:','watchTradesForSymbols()','apiSecret','showConfig','PAXG','forEach','lowdb/adapters/FileSync','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','length','autoliquidity','headless','2.5.0','fromCodePoint','quote','deleteHistoryAlerts'];_0x5752=function(){return _0x1e5924;};return _0x5752();}function capitalize(_0x316ca6){const _0x13532f=_0x45c57d;return _0x316ca6[_0x13532f(0x212)](0x0,0x1)[_0x13532f(0x22b)]()+_0x316ca6[_0x13532f(0x212)](0x1);}function supportedExchanges(){const _0x3eb2ad=_0x45c57d,_0x1c9a13=['ws',_0x3eb2ad(0x28c),_0x3eb2ad(0x245),_0x3eb2ad(0x290),_0x3eb2ad(0x249),_0x3eb2ad(0x210),_0x3eb2ad(0x32b),'fetchOpenOrders',_0x3eb2ad(0x34c),_0x3eb2ad(0x1ab)];let _0x483a6b=[],_0x59ab5b=[],_0x509b48=ccxt['pro'][_0x3eb2ad(0x2c7)];_0x509b48[_0x3eb2ad(0x1c5)](_0x2a404d=>{const _0x200010=_0x3eb2ad;try{const _0x12af38=new ccxt[(_0x200010(0x304))][_0x2a404d]();_0x59ab5b[_0x200010(0x255)](_0x12af38);}catch(_0x3a76a2){}}),_0x59ab5b[_0x3eb2ad(0x1c5)](_0x262970=>{const _0x45b37c=_0x3eb2ad;let _0x589364=0x0;_0x1c9a13[_0x45b37c(0x1c5)](_0x54167a=>{const _0x309363=_0x45b37c;_0x54167a in _0x262970[_0x309363(0x1e3)]&&_0x262970[_0x309363(0x1e3)][_0x54167a]&&_0x589364++;}),_0x589364==_0x1c9a13[_0x45b37c(0x1c8)]&&_0x483a6b[_0x45b37c(0x255)](capitalize(_0x262970['id']));});let _0x2318c5=[];return _0x509b48[_0x3eb2ad(0x1c5)](_0x596269=>{const _0x1f59b0=_0x3eb2ad;_0x596269=capitalize(_0x596269);if(!_0x483a6b['includes'](_0x596269))_0x2318c5[_0x1f59b0(0x255)](_0x596269);}),_0x483a6b;}function setStartDatePerformance(){const _0x3ae1d0=_0x45c57d;if(config&&config[_0x3ae1d0(0x2ca)][0x0][_0x3ae1d0(0x243)][_0x3ae1d0(0x1c8)]!=0x0){const _0x2e50b1=config[_0x3ae1d0(0x2ca)][0x0][_0x3ae1d0(0x243)];dbPerformance[_0x3ae1d0(0x2ee)](_0x3ae1d0(0x23a))['find']({'date':config[_0x3ae1d0(0x2ce)]})['assign']({'coins':_0x2e50b1})[_0x3ae1d0(0x267)]();}}async function recreateCoinResults(){const _0x188a46=_0x45c57d;let _0x5e6b96,_0x19adbd=[];try{const _0x548363=fns[_0x188a46(0x1b7)](fns[_0x188a46(0x295)](config[_0x188a46(0x2ce)]['replace'](/\//g,'-')),_0x188a46(0x246));for(const _0x821adc of currentCoins){if(_0x821adc[_0x188a46(0x31e)]!=config[_0x188a46(0x358)]){let _0x149031=0x0,_0x3e24ea,_0x50d56d;_0x5e6b96=await getAllEventOrders(_0x821adc['symbol']);if(_0x5e6b96[_0x188a46(0x1c8)]>0x0)_0x5e6b96['forEach'](_0x43dfdd=>{const _0x2cb751=_0x188a46,_0x18c9e2=_0x821adc[_0x2cb751(0x1ed)]['includes'](config[_0x2cb751(0x358)]+'/');_0x19adbd['push']({'datetime':_0x43dfdd['datetime'],'coin':_0x821adc[_0x2cb751(0x31e)],'symbol':_0x821adc[_0x2cb751(0x1ed)],'side':_0x43dfdd[_0x2cb751(0x1a9)],'reverse':_0x18c9e2,'amount':formatResult(_0x43dfdd[_0x2cb751(0x231)],0x8),'filled':formatResult(_0x43dfdd[_0x2cb751(0x231)],0x8),'price':formatResult(_0x43dfdd[_0x2cb751(0x1b0)],0x8)}),_0x149031=_0x43dfdd[_0x2cb751(0x1a9)]==_0x2cb751(0x228)?_0x149031+_0x43dfdd[_0x2cb751(0x231)]:_0x149031-_0x43dfdd[_0x2cb751(0x231)];if(!_0x50d56d)_0x50d56d=_0x43dfdd[_0x2cb751(0x1b0)];});_0x3e24ea=_0x821adc[_0x188a46(0x313)]-_0x149031;let _0x454c40;config['liquidity'][_0x188a46(0x1c5)](_0x2cbfee=>{const _0x527989=_0x188a46;!_0x454c40&&(_0x454c40=_0x2cbfee[_0x527989(0x243)]['find'](_0x178673=>_0x178673['coin']==_0x821adc[_0x527989(0x31e)]),_0x454c40&&(_0x3e24ea=_0x454c40['number'],_0x50d56d=_0x454c40[_0x527989(0x1b0)]));});let _0x193dad=dbCoinResults[_0x188a46(0x2ee)]('coins')['find']({'coin':_0x821adc[_0x188a46(0x31e)]})[_0x188a46(0x331)]();_0x193dad={'coin':_0x821adc[_0x188a46(0x31e)],'number':_0x3e24ea,'breakeven':_0x50d56d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x188a46(0x2ee)](_0x188a46(0x324))[_0x188a46(0x34b)]({'coin':_0x821adc[_0x188a46(0x31e)]})[_0x188a46(0x34f)](_0x193dad)[_0x188a46(0x267)]();}}_0x19adbd[_0x188a46(0x2d2)]((_0x3dcc88,_0x5f4562)=>_0x3dcc88[_0x188a46(0x25b)]>_0x5f4562['datetime']?0x1:_0x5f4562[_0x188a46(0x25b)]>_0x3dcc88[_0x188a46(0x25b)]?-0x1:0x0);let _0x126ed7=0x0;for(let _0x1e1baf of _0x19adbd){await updateCoinResults(_0x1e1baf,!![]);}}catch(_0x4955f1){await handleError(_0x4955f1,'recreateCoinResults()');}}async function getAllEventOrders(_0x5cf420){const _0x2a960a=_0x45c57d;let _0x41d487=[],_0x272410=dbLogs['get']('logs')['filter'](_0x4f51f7=>{const _0x343013=_0x5eac,_0x203f91=_0x4f51f7[_0x343013(0x20e)]['toLowerCase']();return _0x203f91['includes'](_0x5cf420[_0x343013(0x1fc)]())&&(_0x203f91[_0x343013(0x338)](_0x343013(0x325))&&_0x203f91[_0x343013(0x338)]('order')||_0x203f91[_0x343013(0x338)]('filled')&&_0x203f91['includes'](_0x343013(0x34e)));})[_0x2a960a(0x239)](_0x2a960a(0x349))[_0x2a960a(0x331)]();return _0x272410[_0x2a960a(0x1c5)](_0x30b6bf=>{const _0x253c76=_0x2a960a,_0xed3c27=_0x30b6bf[_0x253c76(0x20e)][_0x253c76(0x338)]('sell')?_0x253c76(0x1fb):'buy',_0x115834=/#([0-9]|\.)+\s/i,_0x46e634=Number(_0x115834[_0x253c76(0x334)](_0x30b6bf[_0x253c76(0x20e)])[0x0][_0x253c76(0x26d)](0x1)),_0x32d792=/@([0-9]|\.)+$/i,_0x51bc30=Number(_0x32d792['exec'](_0x30b6bf['event'])[0x0][_0x253c76(0x26d)](0x1));_0x41d487[_0x253c76(0x255)]({'datetime':_0x30b6bf[_0x253c76(0x349)],'coin':symbolToCoin(_0x5cf420),'symbol':_0x5cf420,'side':_0xed3c27,'amount':_0x46e634,'filled':_0x46e634,'price':_0x51bc30});}),_0x41d487;}async function getAllOrders(_0x374785,_0x1e185e){const _0x5358e4=_0x45c57d;let _0x45557f=[];while(_0x1e185e<exchange[_0x5358e4(0x272)]()){const _0x381406=0x1f4;try{const _0x31a769=await exchange[_0x5358e4(0x34c)](_0x374785,_0x1e185e,_0x381406);if(_0x31a769['length'])_0x1e185e=_0x31a769[_0x31a769[_0x5358e4(0x1c8)]-0x1][_0x5358e4(0x2a7)]+0x1,_0x45557f=_0x45557f['concat'](_0x31a769);else break;}catch(_0x213b10){await handleError(_0x213b10,_0x5358e4(0x1d7),_0x374785);}}return _0x45557f;}async function validate24hChanges(){const _0x5e4538=_0x45c57d;for(const _0x569152 of currentCoins){if(_0x569152[_0x5e4538(0x31e)]!=config[_0x5e4538(0x358)]){let _0x54299d;_0x569152[_0x5e4538(0x257)]?_0x54299d=formatResult((0x1/(gChange[_0x569152[_0x5e4538(0x1ed)]]/0x64+0x1)-0x1)*0x64,0x3):_0x54299d=gChange[_0x569152[_0x5e4538(0x1ed)]],_0x54299d<config[_0x5e4538(0x2a6)]&&(logHistory(_0x5e4538(0x314),_0x569152[_0x5e4538(0x31e)]+_0x5e4538(0x1bc)+_0x54299d+'%'),logHistory(_0x5e4538(0x314),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x5e4538(0x24f)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1c795b,_0x5ee9e4){const _0x2851b0=_0x45c57d;if(!_0x1c795b)return!![];const _0x5eb802=_0x5ee9e4['split']('.'),_0x584c3d=_0x1c795b[_0x2851b0(0x296)]('.');for(var _0x269feb=0x0;_0x269feb<_0x584c3d['length'];_0x269feb++){const _0x30927c=~~_0x584c3d[_0x269feb],_0xcd9a8f=~~_0x5eb802[_0x269feb];if(_0x30927c<_0xcd9a8f)return!![];if(_0x30927c>_0xcd9a8f)return![];}return![];}async function oneTimeMigration(){const _0x447a76=_0x45c57d;let _0x56954b=dbLogs[_0x447a76(0x2ee)](_0x447a76(0x256))[_0x447a76(0x331)]();if(isOlderVersion(_0x56954b,_0x447a76(0x282))){let _0x45bad8=[];const _0x1ac510=dbLogs[_0x447a76(0x2ee)](_0x447a76(0x1ae))[_0x447a76(0x331)]();_0x1ac510[_0x447a76(0x1c5)](_0x5189eb=>{const _0x13390f=_0x447a76;_0x45bad8[_0x13390f(0x255)]({'time':_0x5189eb[_0x13390f(0x349)],'type':_0x5189eb['type'],'event':_0x5189eb[_0x13390f(0x20e)]});}),dbLogs[_0x447a76(0x2ee)](_0x447a76(0x1ae))['assign'](_0x45bad8)['write']();}let _0x26f090=dbConfig['get'](_0x447a76(0x256))[_0x447a76(0x331)]();if(isOlderVersion(_0x26f090,_0x447a76(0x282))){let _0x7c9ada=dbConfig[_0x447a76(0x2ee)](_0x447a76(0x2d7))[_0x447a76(0x34b)]({'botID':botID})[_0x447a76(0x331)]();if(_0x7c9ada){let _0x295328=[];_0x7c9ada['portfolio'][_0x447a76(0x1c5)](_0x11f817=>{const _0x48af4c=_0x447a76;_0x295328[_0x48af4c(0x255)]({'coin':_0x11f817[_0x48af4c(0x31e)],'number':_0x11f817[_0x48af4c(0x299)],'price':_0x11f817['startprice']}),delete _0x11f817['startnumber'],delete _0x11f817['startprice'];});if(_0x295328[_0x447a76(0x1c8)]!==0x0)fs[_0x447a76(0x2bd)](configbackuppath+('starting-balance-'+botID+_0x447a76(0x271)),JSON['stringify'](_0x295328,null,0x4),function(_0x1b8dff){if(_0x1b8dff){}});const _0x504df0=(_0x1e1eca,_0xb8bce6)=>{const _0x5bdba2=_0x447a76;let _0x37c3ee=[];_0xb8bce6[_0x5bdba2(0x1c5)](_0x1285f8=>{const _0x3fd6e5=_0x5bdba2,_0x53da14=_0x1e1eca[_0x3fd6e5(0x34b)](_0x44dfb1=>_0x44dfb1['coin']==_0x1285f8[_0x3fd6e5(0x31e)]);if(!_0x53da14)_0x37c3ee[_0x3fd6e5(0x255)](_0x1285f8);});let _0x37635e=[];return _0x1e1eca['forEach'](_0x18c8d1=>{const _0x2d657c=_0x5bdba2,_0x3246ef=_0xb8bce6[_0x2d657c(0x34b)](_0x5ba749=>_0x5ba749['coin']==_0x18c8d1[_0x2d657c(0x31e)]);if(!_0x3246ef||_0x3246ef[_0x2d657c(0x313)]==0x0&&_0x18c8d1[_0x2d657c(0x313)]!=0x0)_0x37635e['push'](_0x18c8d1);}),{'missingDay1':_0x37c3ee,'notInDay2':_0x37635e};},_0x1205d8=dbPerformance[_0x447a76(0x2ee)]('data')[_0x447a76(0x276)]()[_0x447a76(0x331)]();if(_0x1205d8[_0x447a76(0x1c8)]>0x1){const {missingDay1:_0x1a67b4,notInDay2:_0xbdef22}=_0x504df0(_0x295328,_0x1205d8[0x1][_0x447a76(0x324)]);_0x295328=[..._0x295328,..._0x1a67b4],_0xbdef22[_0x447a76(0x1c5)](_0xc56a2e=>{const _0x202394=_0x447a76;let _0x1862ad=_0x295328['findIndex'](_0x21b90e=>_0x21b90e[_0x202394(0x31e)]==_0xc56a2e[_0x202394(0x31e)]);_0x1862ad!=-0x1&&_0x295328[_0x202394(0x1be)](_0x1862ad,0x1);});}_0x295328[_0x447a76(0x2d2)]((_0x3616e1,_0x136c46)=>_0x3616e1[_0x447a76(0x31e)]>_0x136c46[_0x447a76(0x31e)]?0x1:_0x136c46['coin']>_0x3616e1[_0x447a76(0x31e)]?-0x1:0x0);let _0x589972=[{'date':_0x7c9ada['startdate'],'changes':_0x295328}];_0x1205d8[_0x447a76(0x1c8)]>0x2&&_0x1205d8[_0x447a76(0x1c5)]((_0x501fbc,_0x36375d)=>{const _0x1a066d=_0x447a76;if(_0x36375d>0x0&&_0x36375d<_0x1205d8['length']-0x1){const {missingDay1:_0x263455,notInDay2:_0x1597fb}=_0x504df0(_0x1205d8[_0x36375d][_0x1a066d(0x324)],_0x1205d8[_0x36375d+0x1][_0x1a066d(0x324)]);_0x295328=[],(_0x263455['length']!=0x0||_0x1597fb[_0x1a066d(0x1c8)]!=0x0)&&(_0x263455[_0x1a066d(0x1c8)]!=0x0&&_0x295328['push'](..._0x263455),_0x1597fb[_0x1a066d(0x1c8)]!=0x0&&(_0x1597fb[_0x1a066d(0x1c5)](_0x2ba192=>{const _0x57e77b=_0x1a066d;_0x2ba192[_0x57e77b(0x313)]=-_0x2ba192[_0x57e77b(0x313)];}),_0x295328[_0x1a066d(0x255)](..._0x1597fb)),_0x295328[_0x1a066d(0x2d2)]((_0x283377,_0x3c5b4e)=>_0x283377[_0x1a066d(0x31e)]>_0x3c5b4e[_0x1a066d(0x31e)]?0x1:_0x3c5b4e[_0x1a066d(0x31e)]>_0x283377[_0x1a066d(0x31e)]?-0x1:0x0),_0x589972[_0x1a066d(0x255)]({'date':_0x1205d8[_0x36375d+0x1]['date'],'changes':_0x295328}));}}),dbConfig[_0x447a76(0x2ee)](_0x447a76(0x2d7))[_0x447a76(0x34b)]({'botID':botID})['assign']({..._0x7c9ada,'liquidity':_0x589972})[_0x447a76(0x267)]();}}if(isOlderVersion(_0x26f090,_0x447a76(0x27d))){let _0x420f91=dbConfig['get']('bot')['find']({'botID':botID})[_0x447a76(0x331)]();if(_0x420f91){const _0x42ac50=_0x420f91[_0x447a76(0x32e)],_0x2a60c0=_0x42ac50?capitalize(_0x42ac50):_0x447a76(0x1f1);dbConfig[_0x447a76(0x2ee)](_0x447a76(0x2d7))[_0x447a76(0x34b)]({'botID':botID})[_0x447a76(0x34f)]({'exchange':_0x2a60c0})[_0x447a76(0x267)]();}}if(isOlderVersion(_0x26f090,'2.6.22')){let _0x2e1df9=dbConfig['get'](_0x447a76(0x2d7))['find']({'botID':botID})[_0x447a76(0x331)]();if(_0x2e1df9){const _0x3e3e89=_0x2e1df9[_0x447a76(0x1d6)],_0x4f19e8=_0x3e3e89?'marketcap':![];dbConfig[_0x447a76(0x2ee)]('bot')[_0x447a76(0x34b)]({'botID':botID})['assign']({'marketcapEnabled':_0x4f19e8})['write']();}}if(isOlderVersion(_0x26f090,_0x447a76(0x286))){let _0xae3f2b=dbConfig[_0x447a76(0x2ee)](_0x447a76(0x2d7))[_0x447a76(0x34b)]({'botID':botID})[_0x447a76(0x331)]();if(_0xae3f2b){const _0x9de233=_0xae3f2b['autoliquidity'],_0x2f8a6d=_0x9de233?_0x447a76(0x2b2):![];dbConfig[_0x447a76(0x2ee)](_0x447a76(0x2d7))[_0x447a76(0x34b)]({'botID':botID})[_0x447a76(0x34f)]({'autoliquidity':_0x2f8a6d})[_0x447a76(0x267)]();}}let _0x3fa189=dbPerformance[_0x447a76(0x2ee)](_0x447a76(0x256))[_0x447a76(0x331)]();isOlderVersion(_0x3fa189,'2.3.5')&&setStartDatePerformance();let _0xbc1d37=dbCoinResults[_0x447a76(0x2ee)](_0x447a76(0x256))[_0x447a76(0x331)]();if(isOlderVersion(_0xbc1d37,_0x447a76(0x1cb))){let _0x4a4f3c=dbCoinResults[_0x447a76(0x2ee)]('coins')[_0x447a76(0x331)]();if(_0x4a4f3c[_0x447a76(0x1c8)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x460699=_0x45c57d;dbConfig[_0x460699(0x2a4)](_0x460699(0x256),serverversion)[_0x460699(0x267)](),dbPerformance['set'](_0x460699(0x256),serverversion)[_0x460699(0x267)](),dbLogs[_0x460699(0x2a4)](_0x460699(0x256),serverversion)[_0x460699(0x267)](),dbCoinResults['set'](_0x460699(0x256),serverversion)[_0x460699(0x267)]();}function getConfiguration(_0x120d68){const _0xae55ea=_0x45c57d;let _0x4381ba=dbConfig[_0xae55ea(0x2ee)](_0xae55ea(0x2d7))[_0xae55ea(0x34b)]({'botID':_0x120d68})[_0xae55ea(0x331)]();if(_0x4381ba){let _0x36ffa8=![];typeof _0x4381ba['threshold']==_0xae55ea(0x24c)&&(_0x4381ba={..._0x4381ba,'threshold':Number(_0x4381ba[_0xae55ea(0x1b1)])},_0x36ffa8=!![]),_0x4381ba[_0xae55ea(0x2a6)]==undefined&&(_0x4381ba={..._0x4381ba,'change24h':-0x14},_0x36ffa8=!![]),_0x4381ba[_0xae55ea(0x26e)]==undefined&&(_0x4381ba={..._0x4381ba,'fiat':_0xae55ea(0x206)},_0x36ffa8=!![]),_0x4381ba[_0xae55ea(0x2c5)]==undefined&&(_0x4381ba={..._0x4381ba,'onepagemode':settings['onepagemode']},_0x36ffa8=!![]),_0x4381ba['colorscheme']==undefined&&(_0x4381ba={..._0x4381ba,'colorscheme':_0xae55ea(0x351)},_0x36ffa8=!![]),_0x4381ba[_0xae55ea(0x1c9)]==undefined&&(_0x4381ba={..._0x4381ba,'autoliquidity':_0xae55ea(0x2b2)},_0x36ffa8=!![]),_0x4381ba[_0xae55ea(0x2d5)]==undefined&&(_0x4381ba={..._0x4381ba,'marketcapApi':settings[_0xae55ea(0x2d5)]?!![]:![]},_0x36ffa8=!![]),_0x4381ba['marketcapEnabled']==undefined&&(_0x4381ba={..._0x4381ba,'marketcapEnabled':![]},_0x36ffa8=!![]),_0x36ffa8&&(_0x4381ba={'botID':_0x4381ba[_0xae55ea(0x1a5)],'exchange':_0x4381ba[_0xae55ea(0x32e)],'apiKey':_0x4381ba[_0xae55ea(0x207)],'apiSecret':_0x4381ba[_0xae55ea(0x1c2)],'apiPassword':_0x4381ba[_0xae55ea(0x264)],'basecoin':_0x4381ba[_0xae55ea(0x358)],'botname':_0x4381ba[_0xae55ea(0x297)],'showname':_0x4381ba[_0xae55ea(0x327)],'threshold':_0x4381ba[_0xae55ea(0x1b1)],'ordertype':_0x4381ba['ordertype'],'timeout':_0x4381ba[_0xae55ea(0x339)],'fiat':_0x4381ba['fiat'],'startdate':_0x4381ba['startdate'],'recreate':_0x4381ba[_0xae55ea(0x2b1)],'timeshift':_0x4381ba[_0xae55ea(0x283)],'onepagemode':_0x4381ba['onepagemode'],'headless':_0x4381ba['headless'],'cooldown':_0x4381ba['cooldown'],'change24h':_0x4381ba[_0xae55ea(0x2a6)],'emojibuy':_0x4381ba['emojibuy'],'emojisell':_0x4381ba[_0xae55ea(0x31f)],'colorscheme':_0x4381ba[_0xae55ea(0x28a)],'marketcapApi':_0x4381ba[_0xae55ea(0x2d5)],'marketcapEnabled':_0x4381ba[_0xae55ea(0x1d6)],'portfolio':_0x4381ba[_0xae55ea(0x1e7)],'autoliquidity':_0x4381ba[_0xae55ea(0x1c9)],'liquidity':_0x4381ba['liquidity'],'openOrders':_0x4381ba[_0xae55ea(0x236)]},dbConfig[_0xae55ea(0x2ee)](_0xae55ea(0x2d7))[_0xae55ea(0x1aa)]()[_0xae55ea(0x267)](),dbConfig[_0xae55ea(0x2ee)](_0xae55ea(0x2d7))[_0xae55ea(0x255)](_0x4381ba)['write']());}else _0x4381ba={'botID':_0x120d68,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xae55ea(0x1dc)+_0x120d68,'showname':![],'threshold':0x3,'ordertype':_0xae55ea(0x325),'timeout':0x14,'fiat':_0xae55ea(0x206),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xae55ea(0x283)],'onepagemode':settings[_0xae55ea(0x2c5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xae55ea(0x351),'marketcapApi':settings[_0xae55ea(0x2d5)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4381ba;}function emittedConfiguration(){const _0x4169c3=_0x45c57d;let _0xdbcfd8;if(config[_0x4169c3(0x207)]=='')_0xdbcfd8={...config,'configstate':_0x4169c3(0x254)};else config[_0x4169c3(0x207)]==_0x4169c3(0x27e)?_0xdbcfd8={...config,'configstate':_0x4169c3(0x1e4)}:(_0xdbcfd8={...config,'apiKey':_0x4169c3(0x261),'apiSecret':'************'},config['apiPassword']&&(_0xdbcfd8[_0x4169c3(0x264)]=_0x4169c3(0x261)));return _0xdbcfd8;}function getSettings(){const _0x5614ad=_0x45c57d;return dbSettings[_0x5614ad(0x2ee)](_0x5614ad(0x350))[_0x5614ad(0x331)]();}function getSecure(){const _0xa2dd23=_0x45c57d;return dbSecure[_0xa2dd23(0x2ee)]('secure')[_0xa2dd23(0x331)]()||{};}function updateTimeshift(_0x55ab7c){const _0x364b26=_0x45c57d;let _0x44c842=dbConfig[_0x364b26(0x2ee)]('bot')[_0x364b26(0x34b)]({'botID':botID})[_0x364b26(0x331)]();_0x44c842&&dbConfig[_0x364b26(0x2ee)]('bot')[_0x364b26(0x34b)]({'botID':botID})[_0x364b26(0x34f)]({'timeshift':_0x55ab7c})[_0x364b26(0x267)](),config[_0x364b26(0x283)]=_0x55ab7c,proxyEmit(_0x364b26(0x1f8),emittedConfiguration());}function updateOnepagemode(_0x4c923f){const _0x5ba7d9=_0x45c57d;let _0x50c9fa=dbConfig[_0x5ba7d9(0x2ee)]('bot')['find']({'botID':botID})[_0x5ba7d9(0x331)]();_0x50c9fa&&dbConfig[_0x5ba7d9(0x2ee)](_0x5ba7d9(0x2d7))[_0x5ba7d9(0x34b)]({'botID':botID})[_0x5ba7d9(0x34f)]({'onepagemode':_0x4c923f})[_0x5ba7d9(0x267)](),config[_0x5ba7d9(0x2c5)]=_0x4c923f,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x23ea17){const _0x2681e0=_0x45c57d,_0x444d24=_0x23ea17?!![]:![];let _0x49fabc=dbConfig[_0x2681e0(0x2ee)](_0x2681e0(0x2d7))[_0x2681e0(0x34b)]({'botID':botID})[_0x2681e0(0x331)]();_0x49fabc&&dbConfig['get'](_0x2681e0(0x2d7))[_0x2681e0(0x34b)]({'botID':botID})[_0x2681e0(0x34f)]({'marketcapApi':_0x444d24})[_0x2681e0(0x267)](),config['marketcapApi']=_0x444d24,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x54d999){const _0x11ae72=_0x45c57d;logger[_0x11ae72(0x29f)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x11ae72(0x1f2));let _0x259ce3=![],_0x4e3c0f=![],_0x418095=[];_0x54d999[_0x11ae72(0x1e7)][_0x11ae72(0x1c5)](_0x5eef2f=>{const _0x4ccca3=_0x11ae72;if(!_0x5eef2f[_0x4ccca3(0x21d)]&&_0x5eef2f['coin']!=_0x54d999['basecoin'])_0x418095[_0x4ccca3(0x255)](_0x5eef2f[_0x4ccca3(0x1ed)]);}),_0x418095[_0x11ae72(0x1c5)](_0x41952e=>{const _0x26313a=_0x11ae72,_0x14489c=currentCoins[_0x26313a(0x34b)](_0x55d606=>_0x55d606['symbol']==_0x41952e);!_0x14489c&&(_0x259ce3=!![]);}),currentCoins['forEach'](_0x331dde=>{const _0x30f90f=_0x11ae72;if(_0x331dde[_0x30f90f(0x31e)]!=config['basecoin']){const _0x36355f=_0x418095['find'](_0x564544=>_0x564544==_0x331dde[_0x30f90f(0x1ed)]);!_0x36355f&&(_0x259ce3=!![]);}}),_0x54d999[_0x11ae72(0x1e7)][_0x11ae72(0x1c5)](_0x4038ac=>{const _0x4f0ad7=_0x11ae72,_0x302ba0=config[_0x4f0ad7(0x1e7)][_0x4f0ad7(0x34b)](_0x1ecb7b=>_0x1ecb7b[_0x4f0ad7(0x31e)]==_0x4038ac[_0x4f0ad7(0x31e)]);if(_0x302ba0&&_0x4038ac[_0x4f0ad7(0x2dd)]!=_0x302ba0[_0x4f0ad7(0x2dd)])_0x4e3c0f=!![];});let _0xe19558=dbConfig[_0x11ae72(0x2ee)](_0x11ae72(0x2d7))['find']({'botID':botID})[_0x11ae72(0x331)]();_0x54d999={..._0x54d999,'apiKey':crypt[_0x11ae72(0x1d4)](secure['privateKey'],_0x54d999[_0x11ae72(0x207)])[_0x11ae72(0x29c)],'apiSecret':crypt[_0x11ae72(0x1d4)](secure['privateKey'],_0x54d999[_0x11ae72(0x1c2)])['message']};_0x54d999[_0x11ae72(0x264)]&&(_0x54d999[_0x11ae72(0x264)]=crypt[_0x11ae72(0x1d4)](secure['privateKey'],_0x54d999[_0x11ae72(0x264)])[_0x11ae72(0x29c)]);let _0x57c00f=![];if(_0xe19558){_0x54d999['apiKey']==_0x11ae72(0x261)?_0x54d999[_0x11ae72(0x207)]=config[_0x11ae72(0x207)]:_0x57c00f=!![];_0x54d999[_0x11ae72(0x1c2)]=='************'?_0x54d999[_0x11ae72(0x1c2)]=config['apiSecret']:_0x57c00f=!![];if(_0x54d999['apiPassword']=='************')_0x54d999[_0x11ae72(0x264)]=config[_0x11ae72(0x264)];else{if(_0x54d999['apiPassword'])_0x57c00f=!![];}dbConfig['get'](_0x11ae72(0x2d7))[_0x11ae72(0x34b)]({'botID':botID})[_0x11ae72(0x34f)](_0x54d999)[_0x11ae72(0x267)]();}else dbConfig['get']('bot')[_0x11ae72(0x255)](_0x54d999)[_0x11ae72(0x267)](),_0x57c00f=!![],process[_0x11ae72(0x213)]({'status':_0x11ae72(0x209),'live':_0x11ae72(0x2d0)},_0x5bc70c=>{});process[_0x11ae72(0x213)]({'botname':_0x54d999[_0x11ae72(0x297)]},_0x5b59c4=>{}),config={..._0x54d999},updateBotManager(),proxyEmit(_0x11ae72(0x1a8)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x57c00f)await reset(!![]);else _0x259ce3||_0x4e3c0f?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x11ae72(0x29f)](_0x11ae72(0x204));}async function storeHeadless(_0x5bde28){const _0x5a9665=_0x45c57d,_0x49ae98={...config,'headless':_0x5bde28['headless']};let _0x390b8b=dbConfig[_0x5a9665(0x2ee)](_0x5a9665(0x2d7))[_0x5a9665(0x34b)]({'botID':botID})[_0x5a9665(0x331)]();_0x390b8b&&dbConfig[_0x5a9665(0x2ee)]('bot')['find']({'botID':botID})[_0x5a9665(0x34f)](_0x49ae98)[_0x5a9665(0x267)](),config={..._0x49ae98},updateBotManager(),proxyEmit(_0x5a9665(0x1f8),emittedConfiguration());}async function storeFiat(_0x493e1b){const _0x42e573=_0x45c57d,_0x501f52={...config,'fiat':_0x493e1b};let _0x1914dc=dbConfig[_0x42e573(0x2ee)]('bot')[_0x42e573(0x34b)]({'botID':botID})[_0x42e573(0x331)]();_0x1914dc&&dbConfig[_0x42e573(0x2ee)]('bot')['find']({'botID':botID})[_0x42e573(0x34f)](_0x501f52)[_0x42e573(0x267)](),config={..._0x501f52},proxyEmit(_0x42e573(0x1f8),emittedConfiguration());}function resetHistory(){const _0x2f62b3=_0x45c57d;logger[_0x2f62b3(0x352)](_0x2f62b3(0x1bf));try{if(fs[_0x2f62b3(0x1d5)](path[_0x2f62b3(0x1dd)](configpath,'bot-'+botID+_0x2f62b3(0x2c0))))fs[_0x2f62b3(0x309)](path[_0x2f62b3(0x1dd)](configpath,_0x2f62b3(0x2de)+botID+'-events.json'));if(fs[_0x2f62b3(0x1d5)](path[_0x2f62b3(0x1dd)](configpath,'bot-'+botID+_0x2f62b3(0x330))))fs[_0x2f62b3(0x309)](path[_0x2f62b3(0x1dd)](configpath,'bot-'+botID+_0x2f62b3(0x330)));if(fs['existsSync'](path['join'](configpath,_0x2f62b3(0x2de)+botID+_0x2f62b3(0x2ea))))fs[_0x2f62b3(0x309)](path[_0x2f62b3(0x1dd)](configpath,_0x2f62b3(0x2de)+botID+_0x2f62b3(0x2ea)));}catch(_0xd2eac1){if(_0xd2eac1)logger[_0x2f62b3(0x352)](_0x2f62b3(0x1d9),_0xd2eac1);}const _0x23ff77=getDate();let _0x2c56e2=[];currentCoins[_0x2f62b3(0x1c5)](_0x223b1e=>{const _0x56dc3b=_0x2f62b3;_0x2c56e2[_0x56dc3b(0x255)]({'coin':_0x223b1e[_0x56dc3b(0x31e)],'number':_0x223b1e['number'],'price':_0x223b1e[_0x56dc3b(0x2e1)]});});let _0x52123a=dbConfig['get'](_0x2f62b3(0x2d7))[_0x2f62b3(0x34b)]({'botID':botID})['value']();_0x52123a&&(dbConfig[_0x2f62b3(0x2ee)](_0x2f62b3(0x2d7))[_0x2f62b3(0x34b)]({'botID':botID})[_0x2f62b3(0x34f)]({'liquidity':[{'date':_0x23ff77,'changes':_0x2c56e2}]})[_0x2f62b3(0x267)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x1dd453){const _0x15ec5d=_0x45c57d;return _0x1dd453[_0x15ec5d(0x259)]('/','');}function updateHighestFee(_0x2c7a93){const _0x1b6430=_0x45c57d;if(_0x2c7a93[_0x1b6430(0x257)]){let _0x15aff3={'filled':_0x2c7a93[_0x1b6430(0x231)]*_0x2c7a93[_0x1b6430(0x1b0)],'amount':_0x2c7a93[_0x1b6430(0x231)]*_0x2c7a93[_0x1b6430(0x1b0)],'side':_0x2c7a93['side']==_0x1b6430(0x1fb)?_0x1b6430(0x228):'sell','price':0x1/_0x2c7a93[_0x1b6430(0x1b0)]};_0x2c7a93={..._0x2c7a93,..._0x15aff3};}const _0x4efad6=defaultFee*_0x2c7a93['filled']*_0x2c7a93['price'];lastFees[_0x1b6430(0x294)][_0x1b6430(0x1c8)]===0x14&&lastFees[_0x1b6430(0x294)]['shift'](),lastFees[_0x1b6430(0x294)]['push'](_0x4efad6),lastFees[_0x1b6430(0x220)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x39191f){const _0x20ef80=_0x45c57d;logger[_0x20ef80(0x29f)](_0x20ef80(0x1de)+_0x39191f[_0x20ef80(0x1ed)]+'\x20|\x20'+_0x39191f[_0x20ef80(0x2df)]+'\x20|\x20'+_0x39191f[_0x20ef80(0x231)]+_0x20ef80(0x2e4)+_0x39191f[_0x20ef80(0x223)]+_0x20ef80(0x2b6)+_0x39191f['id']);_0x39191f[_0x20ef80(0x231)]>0x0&&(blockTransactionDetection=!![]);let _0x29d7d4=_0x39191f[_0x20ef80(0x2df)],_0x40a1e8=![];currentCoins[_0x20ef80(0x1c5)](_0x381bb9=>{const _0xc7ccc0=_0x20ef80;_0x381bb9[_0xc7ccc0(0x1ed)]==_0x39191f[_0xc7ccc0(0x1ed)]&&(_0x40a1e8=!![]);});if(!_0x40a1e8)return;const _0x487af4=currentCoins[_0x20ef80(0x34b)](_0x475044=>_0x475044[_0x20ef80(0x1ed)]==_0x39191f[_0x20ef80(0x1ed)]),_0x3ea77d=_0x2f7fe8=>{const _0x269e57=_0x20ef80;if(_0x487af4)_0x487af4[_0x269e57(0x292)]=_0x2f7fe8;};if(_0x29d7d4=='open')_0x3ea77d(_0x20ef80(0x2e5));else{if(_0x29d7d4==_0x20ef80(0x280)){_0x3ea77d(_0x20ef80(0x280));const _0x3b5668=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b5668,blockTransactionDetection=![],await getOpenOrders(),handleOpenOrders();}else{if(_0x29d7d4=='closed'){let _0x3cf388=![];if(lastOrders)for(const _0x3de998 of lastOrders){const _0xb7acaa=0xc8,_0x20d63b=0x1388;let _0x534891=0x0;while(!_0x3de998[_0x20ef80(0x208)]&&_0x534891*_0xb7acaa<_0x20d63b){_0x534891++,await sleep(_0xb7acaa);}if(_0x534891>0x0)logger[_0x20ef80(0x29f)](_0x20ef80(0x222)+_0x534891*_0xb7acaa/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x3de998[_0x20ef80(0x208)]==_0x39191f['id']){logger[_0x20ef80(0x29f)](_0x20ef80(0x2e3)+_0x39191f['id']),_0x3cf388=!![];if(_0x3de998[_0x20ef80(0x231)]==0x0){logger[_0x20ef80(0x29f)](_0x20ef80(0x2e8)+_0x39191f['id']);if(_0x39191f[_0x20ef80(0x23b)])_0x3de998[_0x20ef80(0x1b0)]=_0x39191f[_0x20ef80(0x23b)];else{if(_0x39191f[_0x20ef80(0x1b0)])_0x3de998['price']=_0x39191f['price'];else{}}_0x3de998['filled']=_0x39191f[_0x20ef80(0x231)],updateHighestFee(_0x3de998),_0x3ea77d(_0x20ef80(0x231)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x4b484d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4b484d,blockTransactionDetection=![];}_0x3de998[_0x20ef80(0x215)]={'currency':_0x39191f['fee']?_0x39191f['fee']['currency']:null,'cost':_0x39191f[_0x20ef80(0x215)]?_0x39191f[_0x20ef80(0x215)][_0x20ef80(0x28e)]:0x0},await updateCoinResults(_0x3de998);}}}!_0x3cf388&&(logger[_0x20ef80(0x29f)](_0x20ef80(0x21e)+_0x39191f['id']),_0x3ea77d(_0x20ef80(0x231)),blockTransactionDetection=![],await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x45750a=JSON[_0x20ef80(0x356)](lastBalances['portfolio']);const _0x32684e=_0x45750a[_0x20ef80(0x34b)](_0xda03cb=>_0xda03cb['symbol']==_0x39191f['symbol']);if(_0x32684e){if(_0x29d7d4==_0x20ef80(0x2e5))_0x32684e[_0x20ef80(0x292)]=_0x32684e[_0x20ef80(0x292)]==_0x20ef80(0x231)?_0x20ef80(0x231):'open';else{if(_0x29d7d4==_0x20ef80(0x280))_0x32684e[_0x20ef80(0x292)]=_0x32684e['orderstatus']==_0x20ef80(0x231)?_0x20ef80(0x231):_0x20ef80(0x280);else _0x29d7d4==_0x20ef80(0x357)&&(_0x32684e[_0x20ef80(0x292)]=_0x20ef80(0x231));}}lastBalances={...lastBalances,'portfolio':JSON[_0x20ef80(0x293)](_0x45750a)},proxyEmit(_0x20ef80(0x2a1),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1985db=_0x45c57d;await getOpenOrders();let _0x10693c=![];currentCoins[_0x1985db(0x1c5)](_0x4db49e=>{const _0x324e6a=_0x1985db;_0x10693c=allOpenOrders[_0x324e6a(0x34b)](_0x59f07a=>_0x59f07a['symbol']==_0x4db49e[_0x324e6a(0x1ed)]),_0x4db49e['orderstatus']=_0x10693c?'open':_0x324e6a(0x353);});}async function getCoins(_0x4645df=0x0,_0x39969b=!![],_0xe394b4=config[_0x45c57d(0x358)]){const _0x1c9e64=_0x45c57d;let _0x5bdcd9,_0x150019=[],_0x27c645=[],_0x4eb656=[];if(_0x4645df)await sleep(_0x4645df);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5bdcd9=await exchange[_0x1c9e64(0x1ab)](),mybalances=_0x5bdcd9[_0x1c9e64(0x2a3)];for(const [_0x5d1d18,_0x5aef4c]of Object[_0x1c9e64(0x274)](mybalances)){_0x4eb656['push'](_0x5d1d18);}config[_0x1c9e64(0x1e7)]['forEach'](_0x323029=>{const _0x4de41d=_0x1c9e64;!_0x4eb656['includes'](_0x323029[_0x4de41d(0x31e)])&&(mybalances[_0x323029[_0x4de41d(0x31e)]]=0x0);});if(_0xe394b4=='')for(const [_0x153706,_0x33d701]of Object['entries'](mybalances)){_0x33d701!=0x0&&_0x150019[_0x1c9e64(0x255)]({'coin':_0x153706});}else for(const [_0x16dffc,_0x30caf3]of Object[_0x1c9e64(0x274)](mybalances)){const _0x353a8b=config[_0x1c9e64(0x1e7)][_0x1c9e64(0x34b)](_0x797e6f=>_0x797e6f[_0x1c9e64(0x31e)]==_0x16dffc),_0x17fa9b=_0x16dffc+'/'+_0xe394b4,_0x5aa8c2=_0xe394b4+'/'+_0x16dffc,_0x2ef6de=currentCoins['find'](_0x407068=>_0x407068[_0x1c9e64(0x31e)]==_0x16dffc);if((_0x30caf3!=0x0||_0x353a8b)&&(allSymbols['includes'](_0x17fa9b)||_0x16dffc==_0xe394b4))_0x2ef6de?_0x150019[_0x1c9e64(0x255)]({..._0x2ef6de,'number':Math[_0x1c9e64(0x2bf)](_0x30caf3+(_0x353a8b&&_0x353a8b[_0x1c9e64(0x2dd)]||0x0),0x0)}):_0x150019[_0x1c9e64(0x255)]({'coin':_0x16dffc,'symbol':_0x17fa9b,'reverse':![],'number':Math[_0x1c9e64(0x2bf)](_0x30caf3+(_0x353a8b&&_0x353a8b[_0x1c9e64(0x2dd)]||0x0),0x0),'orderstatus':_0x1c9e64(0x353)});else{if((_0x30caf3!=0x0||_0x353a8b)&&allSymbols[_0x1c9e64(0x338)](_0x5aa8c2))_0x2ef6de?_0x150019[_0x1c9e64(0x255)]({..._0x2ef6de,'number':Math[_0x1c9e64(0x2bf)](_0x30caf3+(_0x353a8b&&_0x353a8b[_0x1c9e64(0x2dd)]||0x0),0x0)}):_0x150019[_0x1c9e64(0x255)]({'coin':_0x16dffc,'symbol':_0x5aa8c2,'reverse':!![],'number':Math[_0x1c9e64(0x2bf)](_0x30caf3+(_0x353a8b&&_0x353a8b[_0x1c9e64(0x2dd)]||0x0),0x0),'orderstatus':_0x1c9e64(0x353)});else _0x353a8b&&_0x150019[_0x1c9e64(0x255)]({'coin':_0x353a8b['coin'],'symbol':_0x353a8b['symbol'],'reverse':_0x353a8b[_0x1c9e64(0x257)],'number':0x0,'orderstatus':'none'});}}}catch(_0x46f612){if(!_0x39969b)handleErrorNoStop(_0x46f612,_0x1c9e64(0x2d9));else await handleError(_0x46f612,_0x1c9e64(0x2d9));}return _0x150019['sort']((_0x351e5e,_0x56361e)=>_0x351e5e['delta']<_0x56361e['delta']?0x1:_0x56361e[_0x1c9e64(0x328)]<_0x351e5e['delta']?-0x1:0x0),_0x27c645=cloneDeep(_0x150019),_0x150019=_0x150019[_0x1c9e64(0x224)](_0x432723=>{const _0x3f58f2=_0x1c9e64,_0x279666=config[_0x3f58f2(0x1e7)][_0x3f58f2(0x34b)](_0x18ec87=>_0x18ec87[_0x3f58f2(0x31e)]==_0x432723[_0x3f58f2(0x31e)]);return _0x279666&&!_0x279666[_0x3f58f2(0x21d)];}),[_0x150019,_0x27c645];}async function getCoinNumber(_0x5aa6cf){const _0x473aac=_0x45c57d;let _0x43e6a4;try{const _0x3fc7d2=await exchange[_0x473aac(0x1ab)]();_0x43e6a4=_0x3fc7d2[_0x473aac(0x2a3)][_0x5aa6cf];}catch(_0x3f7cab){await handleError(_0x3f7cab,_0x473aac(0x2c2));}return _0x43e6a4;}async function getOpenOrders(){const _0x179ded=_0x45c57d;let _0x5d420f;allOpenOrders=[];try{for(const _0xcbb97e of config['portfolio']){!_0xcbb97e[_0x179ded(0x21d)]&&_0xcbb97e[_0x179ded(0x31e)]!=config[_0x179ded(0x358)]&&(_0x5d420f=await exchange[_0x179ded(0x27a)](_0xcbb97e[_0x179ded(0x1ed)]),_0x5d420f[_0x179ded(0x1c8)]>0x0&&allOpenOrders[_0x179ded(0x255)](_0x5d420f[0x0]));}}catch(_0x135095){await handleError(_0x135095,'getOpenOrders()');}}async function handleOpenOrders(_0x3c7321=0x0){const _0x401d18=_0x45c57d;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x401d18(0x1d0)]&&allOrdersPlaced&&(_0x3c7321==0x0?(logger[_0x401d18(0x29f)](_0x401d18(0x230)),_0x3c7321++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x401d18(0x29f)](_0x401d18(0x2d3)),validateOrders(_0x401d18(0x291))));}async function testAPI(_0x216896){const _0x544b24=_0x45c57d,_0x31af95=ccxt['pro'][_0x216896['exchange']['toLowerCase']()],_0x3ffde1=new _0x31af95({'apiKey':_0x216896[_0x544b24(0x207)],'secret':_0x216896['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x216896[_0x544b24(0x264)])_0x3ffde1[_0x544b24(0x2be)]=_0x216896[_0x544b24(0x264)];try{await _0x3ffde1['loadMarkets']();}catch(_0x228ebc){throw _0x228ebc;}}function cloneDeep(_0x44bd44){const _0x3f58ca=_0x45c57d;return JSON[_0x3f58ca(0x356)](JSON['stringify'](_0x44bd44));}async function getPortfolio(_0x1ae2b4){const _0xa266f4=_0x45c57d;let _0x272daa=[],_0x5bffa9=[],_0x48900a=[],_0x4f18eb;if(_0x1ae2b4['apiKey']!=='************'||_0x1ae2b4[_0xa266f4(0x1c2)]!==_0xa266f4(0x261)||_0x1ae2b4[_0xa266f4(0x264)]&&_0x1ae2b4[_0xa266f4(0x264)]!=='************'){if(config[_0xa266f4(0x32e)]){if(_0x1ae2b4[_0xa266f4(0x207)]==_0xa266f4(0x261))_0x1ae2b4[_0xa266f4(0x207)]=config[_0xa266f4(0x207)];if(_0x1ae2b4[_0xa266f4(0x1c2)]==_0xa266f4(0x261))_0x1ae2b4[_0xa266f4(0x1c2)]=config[_0xa266f4(0x1c2)];if(_0x1ae2b4[_0xa266f4(0x264)]==_0xa266f4(0x261))_0x1ae2b4[_0xa266f4(0x264)]=config['apiPassword'];try{await testAPI(_0x1ae2b4);}catch(_0xb91367){if(_0xb91367[_0xa266f4(0x2cc)]()[_0xa266f4(0x338)](_0xa266f4(0x33c))){logger['debug'](_0xa266f4(0x33d)),proxyEmit(_0xa266f4(0x1e7),![]);return;}else{handleError(_0xb91367,'getPortfolio(0)');return;}}}await initExchange(_0x1ae2b4[_0xa266f4(0x32e)],_0x1ae2b4['apiKey'],_0x1ae2b4[_0xa266f4(0x1c2)],_0x1ae2b4['apiPassword']);try{await loadSymbols();}catch(_0x277070){if(_0x277070[_0xa266f4(0x2cc)]()[_0xa266f4(0x338)](_0xa266f4(0x33c))){proxyEmit(_0xa266f4(0x1e7),![]);return;}else{handleError(_0x277070,_0xa266f4(0x227));return;}}const _0x33ccb5=await getCoins(0x0,![],_0x1ae2b4[_0xa266f4(0x358)]);_0x48900a=cloneDeep(_0x33ccb5[0x1]);}else{const _0x458092=await getCoins();_0x48900a=cloneDeep(_0x458092[0x1]);}if(_0x1ae2b4[_0xa266f4(0x358)]=='')proxyEmit('portfolio',_0x48900a);else{_0x48900a[_0xa266f4(0x1c5)](_0x11ca2a=>{const _0x186743=_0xa266f4;if(_0x11ca2a[_0x186743(0x31e)]!=_0x1ae2b4[_0x186743(0x358)]&&allSymbols[_0x186743(0x338)](_0x11ca2a[_0x186743(0x1ed)]))_0x272daa[_0x186743(0x255)](_0x11ca2a[_0x186743(0x1ed)]);});if(_0x272daa[_0xa266f4(0x1c8)]==0x0)logHistory(_0xa266f4(0x314),_0xa266f4(0x2b7));else{try{_0x5bffa9=await getTickers(_0x272daa);}catch(_0x44dd3b){if(_0x44dd3b[_0xa266f4(0x2cc)]()[_0xa266f4(0x338)](_0xa266f4(0x33c))){proxyEmit(_0xa266f4(0x1e7),![]);return;}else handleError(_0x44dd3b,_0xa266f4(0x22e));}_0x48900a[_0xa266f4(0x1c5)](_0x1e215a=>{const _0x1651b3=_0xa266f4;_0x1e215a[_0x1651b3(0x31e)]!=_0x1ae2b4[_0x1651b3(0x358)]?_0x5bffa9[_0x1e215a[_0x1651b3(0x1ed)]]?_0x4f18eb=_0x1e215a[_0x1651b3(0x257)]?0x1/_0x5bffa9[_0x1e215a['symbol']][_0x1651b3(0x2e1)]:_0x5bffa9[_0x1e215a[_0x1651b3(0x1ed)]][_0x1651b3(0x2e1)]:_0x4f18eb=0x0:_0x4f18eb=0x1,_0x1e215a[_0x1651b3(0x1b0)]=formatResult(_0x4f18eb,0x8);}),await getMarketCap(_0x48900a),proxyEmit(_0xa266f4(0x1e7),_0x48900a);}}}function truncateTradeAmount(_0x521846,_0x4b13c1){let _0x33d9da=0x0;try{_0x33d9da=exchange['amountToPrecision'](_0x521846,_0x4b13c1);}catch(_0x2264a2){}return _0x33d9da;}function checkMinimums(_0x4f2e61){const _0x3eabca=_0x45c57d;let _0x58471f=!![];const _0x523c92=!_0x4f2e61[_0x3eabca(0x257)]?markets[_0x4f2e61['symbol']]['limits'][_0x3eabca(0x223)][_0x3eabca(0x1f4)]:markets[_0x4f2e61[_0x3eabca(0x1ed)]][_0x3eabca(0x2cd)][_0x3eabca(0x28e)][_0x3eabca(0x1f4)],_0x2a7198=!_0x4f2e61[_0x3eabca(0x257)]?markets[_0x4f2e61[_0x3eabca(0x1ed)]]['limits'][_0x3eabca(0x28e)][_0x3eabca(0x1f4)]:markets[_0x4f2e61[_0x3eabca(0x1ed)]][_0x3eabca(0x2cd)]['amount'][_0x3eabca(0x1f4)],_0x1ddbdb=truncateTradeAmount(_0x4f2e61['symbol'],_0x4f2e61['trade']);_0x4f2e61[_0x3eabca(0x238)]=_0x1ddbdb;if(Math[_0x3eabca(0x300)](_0x1ddbdb)<_0x523c92)_0x58471f=![];if(Math['abs'](_0x1ddbdb)*_0x4f2e61[_0x3eabca(0x2e1)]<_0x2a7198)_0x58471f=![];if(_0x4f2e61[_0x3eabca(0x1a9)]==_0x3eabca(0x1fb)){let _0x4bf0b1=config[_0x3eabca(0x1e7)][_0x3eabca(0x34b)](_0x1ababe=>_0x1ababe['coin']==_0x4f2e61['coin']);if(_0x4bf0b1[_0x3eabca(0x2dd)]>0x0){if(Math[_0x3eabca(0x300)](_0x1ddbdb)>_0x4f2e61['number']-_0x4bf0b1[_0x3eabca(0x2dd)])_0x58471f=![];}else{if(Math[_0x3eabca(0x300)](_0x1ddbdb)>_0x4f2e61[_0x3eabca(0x313)])_0x58471f=![];}}if(_0x4f2e61[_0x3eabca(0x1a9)]==_0x3eabca(0x228)){let _0x854ce9=config[_0x3eabca(0x1e7)][_0x3eabca(0x34b)](_0x3f7eb9=>_0x3f7eb9['coin']==config[_0x3eabca(0x358)]),_0x21e087=currentCoins['find'](_0x110bff=>_0x110bff['coin']==config[_0x3eabca(0x358)]);if(_0x854ce9[_0x3eabca(0x2dd)]>0x0){if(Math[_0x3eabca(0x300)](_0x1ddbdb)*_0x4f2e61['last']>_0x21e087['number']-_0x854ce9[_0x3eabca(0x2dd)])_0x58471f=![];}else{if(Math[_0x3eabca(0x300)](_0x1ddbdb)*_0x4f2e61[_0x3eabca(0x2e1)]>_0x21e087['number'])_0x58471f=![];}}return _0x58471f;}async function getBalances(_0x47db29=!![]){const _0x577f50=_0x45c57d;let _0x5d7e77=0x0,_0xf4703;const _0x1b79bf=config[_0x577f50(0x1b1)];if(config[_0x577f50(0x1ca)]&&config[_0x577f50(0x2a6)]<0x0)await validate24hChanges();currentCoins[_0x577f50(0x1c5)](_0x22d918=>{const _0x36452f=_0x577f50;if(_0x22d918[_0x36452f(0x31e)]!=config[_0x36452f(0x358)]){let _0x290169=gTicker[noslash(_0x22d918[_0x36452f(0x1ed)])];_0xf4703=_0x22d918[_0x36452f(0x257)]?0x1/_0x290169:_0x290169;}else _0xf4703=0x1;let _0x49e678=_0x22d918[_0x36452f(0x313)]*_0xf4703;_0x5d7e77+=_0x49e678,_0x22d918['last']=formatResult(Number(_0xf4703),0x8),_0x22d918[_0x36452f(0x331)]=_0x49e678;}),currentCoins['forEach'](_0x249dd4=>{const _0x5aa4c0=_0x577f50;let _0x37b698=config[_0x5aa4c0(0x1e7)][_0x5aa4c0(0x34b)](_0x12104e=>_0x12104e[_0x5aa4c0(0x31e)]==_0x249dd4[_0x5aa4c0(0x31e)]),_0x419967=Number(_0x37b698[_0x5aa4c0(0x2e6)]),_0x588222=_0x249dd4[_0x5aa4c0(0x331)]/_0x5d7e77*0x64,_0x5b69fe=_0x419967*_0x5d7e77/0x64/_0x249dd4[_0x5aa4c0(0x2e1)]-_0x249dd4[_0x5aa4c0(0x313)];_0x249dd4['distribution']=formatResult(_0x588222,0x3),_0x249dd4[_0x5aa4c0(0x1f5)]=formatResult(_0x419967,0x3),_0x249dd4[_0x5aa4c0(0x238)]=formatResult(_0x5b69fe,0x8),_0x249dd4['side']='',_0x249dd4[_0x5aa4c0(0x285)]=![];if(_0x249dd4[_0x5aa4c0(0x31e)]!=config['basecoin']){if(_0x249dd4[_0x5aa4c0(0x2e6)]>_0x419967)_0x249dd4['side']='sell',_0x249dd4[_0x5aa4c0(0x285)]=checkMinimums(_0x249dd4);else _0x249dd4[_0x5aa4c0(0x2e6)]<_0x419967&&(_0x249dd4[_0x5aa4c0(0x1a9)]=_0x5aa4c0(0x228),_0x249dd4[_0x5aa4c0(0x285)]=checkMinimums(_0x249dd4));}_0x249dd4[_0x5aa4c0(0x328)]=_0x249dd4[_0x5aa4c0(0x2e6)]/_0x249dd4['target']-0x1;if(_0x249dd4[_0x5aa4c0(0x292)]==_0x5aa4c0(0x231)||_0x249dd4[_0x5aa4c0(0x292)]==_0x5aa4c0(0x280))_0x249dd4[_0x5aa4c0(0x292)]=_0x5aa4c0(0x353);}),currentCoins['sort']((_0x38aab1,_0x11cbfb)=>_0x38aab1[_0x577f50(0x328)]<_0x11cbfb[_0x577f50(0x328)]?0x1:_0x11cbfb[_0x577f50(0x328)]<_0x38aab1['delta']?-0x1:0x0);const _0x1f351d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1f351d['eur'],'usd':_0x1f351d[_0x577f50(0x2bc)],'portfolio':JSON[_0x577f50(0x293)](currentCoins),'threshold':_0x1b79bf},proxyEmit(_0x577f50(0x2a1),{'serverversion':serverversion,'balances':lastBalances});if(_0x47db29){if(config[_0x577f50(0x1ca)])headlessMode({'portfolio':currentCoins,'threshold':_0x1b79bf});else{if(lockOrders==ORDERS[_0x577f50(0x30a)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1b79bf});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x58e525=getNormalizedPerformance();getStartingBalances(_0x58e525),emitPerformance(_0x58e525);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3fb238=_0x45c57d;if(!lastBalances)return;let _0x53829c=[],_0x466410,_0x5e14c4=JSON[_0x3fb238(0x356)](lastBalances[_0x3fb238(0x1e7)]);_0x5e14c4[_0x3fb238(0x2d2)]((_0x2567d0,_0x43f31c)=>_0x2567d0[_0x3fb238(0x31e)]>_0x43f31c[_0x3fb238(0x31e)]?0x1:_0x43f31c[_0x3fb238(0x31e)]>_0x2567d0[_0x3fb238(0x31e)]?-0x1:0x0),_0x5e14c4['forEach'](_0x2a2f04=>{const _0x48935a=_0x3fb238;let _0x37d3e4={'coin':_0x2a2f04['coin'],'number':_0x2a2f04[_0x48935a(0x313)],'price':_0x2a2f04['last']};_0x53829c['push'](_0x37d3e4);});const _0x1cd688=await getFiat();_0x466410={'date':lastBalances[_0x3fb238(0x349)][_0x3fb238(0x296)]('\x20')[0x0],'eur':_0x1cd688[_0x3fb238(0x244)],'usd':_0x1cd688['usd'],'coins':_0x53829c};let _0xa12e7f=dbPerformance[_0x3fb238(0x2ee)](_0x3fb238(0x23a))['find']({'date':_0x466410[_0x3fb238(0x2fd)]})[_0x3fb238(0x331)]();_0xa12e7f?_0x466410[_0x3fb238(0x2fd)]!=config[_0x3fb238(0x2ce)]&&dbPerformance['get'](_0x3fb238(0x23a))[_0x3fb238(0x34b)]({'date':_0x466410[_0x3fb238(0x2fd)]})[_0x3fb238(0x34f)](_0x466410)[_0x3fb238(0x267)]():dbPerformance[_0x3fb238(0x2ee)](_0x3fb238(0x23a))[_0x3fb238(0x255)](_0x466410)[_0x3fb238(0x267)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x10d312=_0x45c57d;let _0x2f31d8=[];if(dbPerformance[_0x10d312(0x1e3)](_0x10d312(0x23a))['value']()){let _0x22541b=dbPerformance[_0x10d312(0x2ee)](_0x10d312(0x23a))['cloneDeep']()[_0x10d312(0x224)](_0x3ca28f=>{const _0x1021cc=_0x10d312;if(_0x3ca28f[_0x1021cc(0x324)]['length']==0x0)return![];else return!![];})[_0x10d312(0x239)]('date')[_0x10d312(0x331)](),_0xce8002=[...config[_0x10d312(0x2ca)]];_0xce8002[_0x10d312(0x2d2)]((_0xa90491,_0x18a429)=>_0xa90491[_0x10d312(0x2fd)]>_0x18a429[_0x10d312(0x2fd)]?-0x1:_0x18a429[_0x10d312(0x2fd)]>_0xa90491[_0x10d312(0x2fd)]?0x1:0x0);let _0x3894a6=0x1,_0x5597d5=[],_0x446cbe=0x0;_0x22541b[_0x10d312(0x26d)]()[_0x10d312(0x257)]()['forEach']((_0x3ad0ca,_0x29843e)=>{const _0xc933a8=_0x10d312;if(_0xce8002[_0x446cbe]){if(_0x22541b[_0x22541b['length']-_0x29843e]&&_0xce8002[_0x446cbe]['date']==_0x22541b[_0x22541b[_0xc933a8(0x1c8)]-_0x29843e][_0xc933a8(0x2fd)]){if(_0x29843e<_0x22541b['length']){let _0x22246c=0x0,_0x46dafd=0x0;_0x22541b[_0x22541b[_0xc933a8(0x1c8)]-_0x29843e][_0xc933a8(0x324)][_0xc933a8(0x1c5)](_0x32e6fa=>{const _0x1d1d60=_0xc933a8;_0x46dafd+=_0x32e6fa['number']*_0x32e6fa[_0x1d1d60(0x1b0)];}),_0xce8002[_0x446cbe][_0xc933a8(0x243)][_0xc933a8(0x1c5)](_0x15cd05=>{const _0x3ef990=_0xc933a8;_0x22246c+=_0x15cd05[_0x3ef990(0x313)]*_0x15cd05[_0x3ef990(0x1b0)];}),_0x3894a6*=_0x22246c/(_0x46dafd-_0x22246c)+0x1;}_0x446cbe++;}}let _0x9b4978=0x0;_0x3ad0ca[_0xc933a8(0x324)]['forEach'](_0x202fd3=>{const _0x57397a=_0xc933a8;_0x9b4978+=_0x202fd3[_0x57397a(0x313)]*_0x202fd3[_0x57397a(0x1b0)];}),_0x5597d5[_0x22541b[_0xc933a8(0x1c8)]-_0x29843e-0x1]=_0x9b4978*(_0x3894a6-0x1);});let _0x5b1ae3=[];_0xce8002=[...config['liquidity']]||[];let _0x143611=0x0;_0x446cbe=0x0,_0x22541b[_0x10d312(0x1c5)]((_0x4f1f39,_0x25b12c)=>{const _0x2807c8=_0x10d312;if(_0xce8002[_0x446cbe]){const _0x19d7c1=fns[_0x2807c8(0x356)](_0xce8002[_0x446cbe][_0x2807c8(0x2fd)],'yyyy/MM/dd',new Date()),_0x162f8f=fns[_0x2807c8(0x356)](_0x4f1f39[_0x2807c8(0x2fd)],_0x2807c8(0x344),new Date());if(fns[_0x2807c8(0x281)](_0x19d7c1,_0x162f8f)){let _0x268fc0=0x0;_0xce8002[_0x446cbe][_0x2807c8(0x243)][_0x2807c8(0x1c5)](_0x5a96c4=>{const _0x29ddcf=_0x2807c8;!_0x5b1ae3[_0x5a96c4[_0x29ddcf(0x31e)]]?_0x5b1ae3[_0x5a96c4[_0x29ddcf(0x31e)]]=_0x5a96c4[_0x29ddcf(0x313)]:(_0x268fc0=_0x5b1ae3[_0x5a96c4[_0x29ddcf(0x31e)]],_0x5b1ae3[_0x5a96c4[_0x29ddcf(0x31e)]]+=_0x5a96c4[_0x29ddcf(0x313)]);const _0xd52f63=_0x4f1f39[_0x29ddcf(0x324)][_0x29ddcf(0x34b)](_0x110030=>_0x110030[_0x29ddcf(0x31e)]==_0x5a96c4[_0x29ddcf(0x31e)]);(!_0xd52f63||_0xd52f63['number']==0x0)&&(_0x143611+=(-_0x5a96c4[_0x29ddcf(0x313)]-_0x268fc0)*_0x5a96c4[_0x29ddcf(0x1b0)]);}),_0x446cbe++;}}_0x4f1f39['coins'][_0x2807c8(0x1c5)]((_0x1ee599,_0xf5a0ee)=>{const _0x187a06=_0x2807c8;_0x5b1ae3[_0x1ee599[_0x187a06(0x31e)]]&&(_0x1ee599['initial']=_0x5b1ae3[_0x1ee599[_0x187a06(0x31e)]]);}),_0x2f31d8[_0x2807c8(0x255)]({'date':_0x4f1f39[_0x2807c8(0x2fd)],'eur':_0x4f1f39['eur'],'usd':_0x4f1f39['usd'],'offset':_0x5597d5[_0x25b12c],'netoffset':_0x143611,'coins':_0x4f1f39[_0x2807c8(0x324)]});});}return _0x2f31d8;}function emitPerformance(_0x26e674){const _0x4e1eaa=_0x45c57d;_0x26e674['length']!==0x0?(proxyEmit(_0x4e1eaa(0x219),_0x26e674),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x4b7edb,_0x40a0a4){const _0x445ed7=_0x45c57d;let _0x2a5b72=0x0,_0x3c82dc=0x0,_0x379c96=0x0;_0x4b7edb['coins'][_0x445ed7(0x1c5)](_0x6be724=>{const _0x3d7897=_0x445ed7;_0x2a5b72+=_0x6be724[_0x3d7897(0x313)]*_0x6be724[_0x3d7897(0x1b0)];});_0x40a0a4&&(_0x2a5b72+=_0x4b7edb[_0x445ed7(0x2dd)]);if(config[_0x445ed7(0x358)]===_0x445ed7(0x1e2)||config[_0x445ed7(0x358)]==='ETH'||config['basecoin']===_0x445ed7(0x1c4))_0x3c82dc=_0x2a5b72*_0x4b7edb[_0x445ed7(0x244)],_0x379c96=_0x2a5b72*_0x4b7edb[_0x445ed7(0x2bc)];else{if(usdBasecoins[_0x445ed7(0x338)](config['basecoin']))_0x3c82dc=_0x2a5b72*_0x4b7edb[_0x445ed7(0x244)]/_0x4b7edb[_0x445ed7(0x2bc)],_0x379c96=_0x2a5b72;else config[_0x445ed7(0x358)]===_0x445ed7(0x2fa)&&(_0x3c82dc=_0x2a5b72,_0x379c96=_0x2a5b72*_0x4b7edb[_0x445ed7(0x2bc)]/_0x4b7edb['eur']);}return[_0x2a5b72,_0x3c82dc,_0x379c96];}function getKPIs(_0x2175f8,_0x2b2932=_0x45c57d(0x2fa)){const _0x5355f7=_0x45c57d,_0x2f303c=config[_0x5355f7(0x358)],_0x309715=lastBalances,_0x5ba417=currentCoins,_0x2c7f88=getNormalizedPerformance(),_0x392743=_0x2175f8===_0x5355f7(0x358)?_0x2f303c:_0x2175f8===_0x5355f7(0x26e)||_0x2175f8===_0x5355f7(0x28d)?_0x2b2932:_0x5355f7(0x319)+_0x2f303c,_0xc40c2=_0x2175f8===_0x5355f7(0x1ac)?_0x5355f7(0x1e9):_0x2175f8===_0x5355f7(0x28d)?_0x5355f7(0x1e9):_0x392743+_0x5355f7(0x1b2),_0x598cfd=_0x2175f8===_0x5355f7(0x1ac)||_0x2175f8===_0x5355f7(0x28d)?_0x5355f7(0x1e9):_0x392743+_0x5355f7(0x24a);let _0x394792=0x0;_0x5ba417[_0x5355f7(0x1c5)](_0x102f74=>{_0x394792+=_0x102f74['number']*_0x102f74['last'];});if(_0x2175f8===_0x5355f7(0x26e)||_0x2175f8===_0x5355f7(0x28d)){if(_0x2f303c===_0x5355f7(0x1e2)||_0x2f303c===_0x5355f7(0x21f)||_0x2f303c===_0x5355f7(0x1c4))_0x394792=_0x394792*(_0x2b2932===_0x5355f7(0x2fa)?_0x309715['eur']:_0x309715['usd']);else{if(usdBasecoins[_0x5355f7(0x338)](_0x2f303c))_0x394792=_0x394792*(_0x2b2932==='EUR'?_0x309715['eur']/_0x309715[_0x5355f7(0x2bc)]:0x1);else _0x2f303c===_0x5355f7(0x2fa)&&(_0x394792=_0x394792*(_0x2b2932==='EUR'?0x1:_0x309715[_0x5355f7(0x2bc)]/_0x309715[_0x5355f7(0x244)]));}}let _0x48bbb5;if(_0x394792!==0x0){if(_0x2175f8===_0x5355f7(0x358))_0x48bbb5=(_0x394792/startingBalances[_0x5355f7(0x358)]-0x1)*0x64;else{if(_0x2b2932===_0x5355f7(0x2fa))_0x48bbb5=(_0x394792/startingBalances['eur']-0x1)*0x64;else _0x48bbb5=(_0x394792/startingBalances[_0x5355f7(0x2bc)]-0x1)*0x64;}let _0x381c5b=0x0;if(startingBalances['coins'])_0x5ba417[_0x5355f7(0x1c5)](_0x571184=>{const _0x25549d=_0x5355f7;let _0x1189fd=startingBalances[_0x25549d(0x324)][_0x25549d(0x34b)](_0x474e54=>_0x474e54[_0x25549d(0x31e)]===_0x571184[_0x25549d(0x31e)]);if(_0x1189fd&&_0x1189fd[_0x25549d(0x31e)]&&_0x571184['number']!==0x0)_0x381c5b+=_0x1189fd[_0x25549d(0x313)]*_0x571184['last'];});let _0x5f1e42=0x0;if(_0x2c7f88[_0x5355f7(0x1c8)]!==0x0){let _0x568730=_0x2c7f88[_0x2c7f88[_0x5355f7(0x1c8)]-0x1];_0x5f1e42=_0x568730[_0x5355f7(0x2c6)];}_0x381c5b-=_0x5f1e42;_0x2175f8==='net-basecoin'&&(_0x48bbb5=(_0x394792-_0x381c5b)/startingBalances[_0x5355f7(0x358)]*0x64,_0x394792=_0x394792-_0x381c5b);if(_0x2175f8==='net-fiat'){let _0x5019b9=_0x2b2932===_0x5355f7(0x2fa)?startingBalances[_0x5355f7(0x244)]:startingBalances[_0x5355f7(0x2bc)];if(_0x2f303c==='BTC'||_0x2f303c===_0x5355f7(0x21f)||_0x2f303c==='PAXG')_0x381c5b=_0x2b2932==='EUR'?_0x381c5b*_0x309715[_0x5355f7(0x244)]:_0x381c5b*_0x309715[_0x5355f7(0x2bc)];else{if(usdBasecoins[_0x5355f7(0x338)](_0x2f303c))_0x381c5b=_0x2b2932===_0x5355f7(0x2fa)?_0x381c5b*_0x309715[_0x5355f7(0x244)]/_0x309715[_0x5355f7(0x2bc)]:_0x381c5b;else _0x2f303c===_0x5355f7(0x2fa)&&(_0x381c5b=_0x2b2932===_0x5355f7(0x2fa)?_0x381c5b:_0x381c5b*_0x309715[_0x5355f7(0x2bc)]/_0x309715[_0x5355f7(0x244)]);}_0x48bbb5=(_0x394792-_0x381c5b)/_0x5019b9*0x64,_0x394792=_0x394792-_0x381c5b;}if(_0x48bbb5){if(_0x48bbb5<0x64)_0x48bbb5=_0x48bbb5[_0x5355f7(0x1b6)](0x2);else{if(_0x48bbb5<0x3e8)_0x48bbb5=_0x48bbb5['toFixed'](0x1);else _0x48bbb5=_0x48bbb5[_0x5355f7(0x1b6)](0x0);}}else _0x48bbb5=Number('0')[_0x5355f7(0x1b6)](0x2);if(_0x394792){if(Math[_0x5355f7(0x300)](_0x394792)<0.000001)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x2);else{if(Math[_0x5355f7(0x300)](_0x394792)<0.1)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x6);else{if(Math[_0x5355f7(0x300)](_0x394792)<0x1)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x5);else{if(Math[_0x5355f7(0x300)](_0x394792)<0xa)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x4);else{if(Math[_0x5355f7(0x300)](_0x394792)<0x64)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x3);else{if(Math[_0x5355f7(0x300)](_0x394792)<0x3e8)_0x394792=_0x394792[_0x5355f7(0x1b6)](0x2);else _0x394792=_0x394792['toFixed'](0x2);}}}}}}else _0x394792=Number('0')[_0x5355f7(0x1b6)](0x2);}else _0x48bbb5=Number('0')['toFixed'](0x2);return{'value':_0x394792,'change':_0x48bbb5,'leftTxt':_0xc40c2,'rightTxt':_0x598cfd};}async function getStartingBalances(_0x49134d,_0x1fa395=!![]){const _0x4469a6=_0x45c57d;if(_0x49134d[_0x4469a6(0x1c8)]!==0x0){const [_0x4a1023,_0x36d0c7,_0x3e0cc0]=getPerf(_0x49134d[0x0],!![]);let _0x40c5e8=[];config[_0x4469a6(0x1e7)][_0x4469a6(0x1c5)](_0x48af7e=>{const _0x100689=_0x4469a6;let _0x45daed=0x0,_0x3b0e41;config['liquidity'][_0x100689(0x1c5)](_0xbf4214=>{const _0x36b91e=_0x100689;let _0x41ed55=_0xbf4214[_0x36b91e(0x243)]['find'](_0x3ee1ae=>_0x3ee1ae[_0x36b91e(0x31e)]==_0x48af7e['coin']);if(_0x41ed55){_0x45daed+=_0x41ed55['number'];if(!_0x3b0e41)_0x3b0e41=_0x41ed55[_0x36b91e(0x1b0)];}}),_0x40c5e8[_0x100689(0x255)]({'coin':_0x48af7e['coin'],'number':_0x45daed,'initialprice':_0x3b0e41});});const _0x3b675e={'basecoin':_0x4a1023,'eur':_0x36d0c7,'usd':_0x3e0cc0,'coins':_0x40c5e8};if(_0x1fa395)proxyEmit('starting-balances',_0x3b675e);startingBalances=_0x3b675e;}}function headlessMode(_0x5c385e){const _0x4f1368=_0x45c57d;let _0xda9138=_0x5c385e[_0x4f1368(0x1e7)],_0x4fc80e=_0x5c385e[_0x4f1368(0x1b1)],_0x1e8c1b=[];for(let _0x3bab6d of _0xda9138){if(_0x3bab6d[_0x4f1368(0x31e)]!=config[_0x4f1368(0x358)]){if(_0x3bab6d[_0x4f1368(0x328)]>=_0x4fc80e/0x64){if(_0x3bab6d[_0x4f1368(0x285)])_0x1e8c1b['push'](_0x3bab6d);}else{if(_0x3bab6d['delta']<=-_0x4fc80e/0x64){if(_0x3bab6d[_0x4f1368(0x285)])_0x1e8c1b[_0x4f1368(0x255)](_0x3bab6d);}}}}_0x1e8c1b[_0x4f1368(0x1c8)]>0x0&&(lockOrders==ORDERS[_0x4f1368(0x30a)]&&!coolingDown&&_0x1e8c1b[_0x4f1368(0x1c5)](_0x5b9827=>{const _0x47159d=_0x4f1368;logger[_0x47159d(0x29f)](_0x47159d(0x1e6)+_0x5b9827['coin']+'\x20'+_0x5b9827['number']+'\x20'+_0x5b9827[_0x47159d(0x2e1)]+'\x20'+_0x5b9827[_0x47159d(0x2e6)]+'%\x20'+_0x5b9827[_0x47159d(0x1f5)]+'%\x20'+(0x64*_0x5b9827[_0x47159d(0x328)])[_0x47159d(0x1b6)](0x2)+_0x47159d(0x2bb)+_0x4fc80e[_0x47159d(0x1b6)](0x2)+'%)');}),placeOrder(_0x1e8c1b));}function notifyBalance(_0xdd00d7){const _0x4ec4df=_0x45c57d;let _0x708182=_0xdd00d7['portfolio'],_0x51555e=_0xdd00d7[_0x4ec4df(0x1b1)],_0x378b20=[];for(let _0x1179a6 of _0x708182){if(_0x1179a6[_0x4ec4df(0x31e)]!=config[_0x4ec4df(0x358)]){if(_0x1179a6[_0x4ec4df(0x328)]>=_0x51555e/0x64){if(_0x1179a6['valid'])_0x378b20[_0x4ec4df(0x255)](_0x1179a6);}else{if(_0x1179a6[_0x4ec4df(0x328)]<=-_0x51555e/0x64){if(_0x1179a6['valid'])_0x378b20[_0x4ec4df(0x255)](_0x1179a6);}}}}if(_0x378b20['length']>0x0){let _0x41c89e=_0x378b20[_0x4ec4df(0x1ee)](_0x5d4ba1=>_0x5d4ba1['coin']);_0x41c89e[_0x4ec4df(0x2d2)]();let _0x2cb8c4=_0x41c89e['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x4ec4df(0x32d),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x2cb8c4;}}function symbolToCoin(_0x22e01d){const _0x3c1b25=_0x45c57d;let _0x13ab79;if(_0x22e01d[_0x3c1b25(0x338)]('/'+config[_0x3c1b25(0x358)]))_0x13ab79=_0x22e01d[_0x3c1b25(0x259)]('/'+config[_0x3c1b25(0x358)],'');if(_0x22e01d[_0x3c1b25(0x338)](config[_0x3c1b25(0x358)]+'/'))_0x13ab79=_0x22e01d[_0x3c1b25(0x259)](config['basecoin']+'/','');return _0x13ab79;}async function unlockOrders(){const _0x4a22a0=_0x45c57d;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4a22a0(0x1d0)]){logger[_0x4a22a0(0x29f)](_0x4a22a0(0x1ef)),lockOrders=ORDERS[_0x4a22a0(0x320)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x313d61=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x313d61,blockTransactionDetection=![],validateOrdersState=_0x4a22a0(0x254),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4a22a0(0x29f)](_0x4a22a0(0x2c9));}}async function validateOrders(_0x45a332){const _0x38ad87=_0x45c57d;if(_0x45a332)validateOrdersState=_0x45a332;logger['debug'](_0x38ad87(0x287)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x38ad87(0x214):'ORDERS.UNLOCKED'));let _0x1e7035=[],_0x144702=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x38ad87(0x29f)](_0x38ad87(0x233)+validateOrdersState),lastOrders['forEach'](_0x4f5475=>{const _0x4f010f=_0x38ad87;let _0x2c70b1=![];_0x4f5475[_0x4f010f(0x231)]>0x0&&(_0x2c70b1=!![]),_0x1e7035[_0x4f010f(0x255)](_0x2c70b1),_0x2c70b1&&config['ordertype']!=_0x4f010f(0x325)&&logHistory(_0x4f010f(0x34e),'Order\x20filled:\x20'+_0x4f5475['symbol']+'\x20'+_0x4f5475[_0x4f010f(0x1a9)]+'\x20#'+formatResult(_0x4f5475[_0x4f010f(0x231)],0x8)+'\x20@'+formatResult(_0x4f5475[_0x4f010f(0x1b0)],0x8));}),_0x1e7035[_0x38ad87(0x1c5)]((_0x578f35,_0x4ababd)=>{if(_0x578f35)lastOrders['splice'](_0x4ababd,0x1);}),persistOpenOrders(lastOrders);const _0x53368b=coolingDown?_0x38ad87(0x2d4):_0x38ad87(0x22d);if(validateOrdersState=='initial'){validateOrdersState=_0x38ad87(0x202);if(_0x1e7035['includes'](![])){if(config[_0x38ad87(0x25e)]==_0x38ad87(0x325)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x38ad87(0x202)){if(_0x1e7035[_0x38ad87(0x338)](![])){}else{if(allOrdersPlaced){if(config[_0x38ad87(0x25e)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x1e7035['includes'](![])&&(config[_0x38ad87(0x25e)]=='market'?logHistory(_0x38ad87(0x2e0),_0x38ad87(0x229)+Math[_0x38ad87(0x2b4)](_0x144702*validateOrderInterval/0xea60)+_0x38ad87(0x2fc)+_0x53368b):(await cancelOrders(),logHistory('success',_0x38ad87(0x34a)+Math[_0x38ad87(0x2b4)](_0x144702*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x53368b))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!=_0x38ad87(0x325))logHistory(_0x38ad87(0x2e0),_0x38ad87(0x348)+_0x53368b);await unlockOrders();}}}}}async function cancelOrders(){const _0x4969f9=_0x45c57d;lastOrders[_0x4969f9(0x1c5)](async _0x5cce23=>{const _0x158d9e=_0x4969f9;try{const _0x535841=await exchange[_0x158d9e(0x210)](_0x5cce23[_0x158d9e(0x208)],_0x5cce23['symbol']);}catch(_0x3b21d0){if(_0x3b21d0[_0x158d9e(0x2cc)]()[_0x158d9e(0x338)](_0x158d9e(0x211))){}else await handleError(_0x3b21d0,_0x158d9e(0x20b));}});}async function initCoinResults(_0x5a3f87){const _0x16bd40=_0x45c57d;_0x5a3f87?logger[_0x16bd40(0x29f)](_0x16bd40(0x2f3)+_0x5a3f87):logger['debug'](_0x16bd40(0x2ba)),config['portfolio'][_0x16bd40(0x1c5)](_0x36b7f6=>{const _0x50349e=_0x16bd40;if(!_0x36b7f6[_0x50349e(0x21d)]&&_0x36b7f6[_0x50349e(0x31e)]!=config[_0x50349e(0x358)]){const _0x35cf49=currentCoins[_0x50349e(0x34b)](_0x3c80b0=>_0x3c80b0[_0x50349e(0x31e)]==_0x36b7f6[_0x50349e(0x31e)]),_0x19de32=gTicker[noslash(_0x36b7f6[_0x50349e(0x1ed)])];let _0x2f1f42=_0x35cf49?_0x35cf49[_0x50349e(0x313)]:null,_0x18001e=_0x36b7f6[_0x50349e(0x257)]?0x1/_0x19de32:_0x19de32,_0x5bf678;config[_0x50349e(0x2ca)][_0x50349e(0x1c5)](_0x1ea310=>{const _0x42a7d5=_0x50349e;!_0x5bf678&&(_0x5bf678=_0x1ea310[_0x42a7d5(0x243)]['find'](_0x44e506=>_0x44e506[_0x42a7d5(0x31e)]==_0x36b7f6['coin']),_0x5bf678&&(_0x2f1f42=_0x5bf678[_0x42a7d5(0x313)],_0x18001e=_0x5bf678['price']));});let _0x521991=dbCoinResults[_0x50349e(0x2ee)](_0x50349e(0x324))['find']({'coin':_0x36b7f6[_0x50349e(0x31e)]})[_0x50349e(0x331)]();if(!_0x521991){const _0x32be27={'coin':_0x36b7f6[_0x50349e(0x31e)],'number':_0x2f1f42,'breakeven':_0x18001e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x50349e(0x2ee)]('coins')[_0x50349e(0x255)](_0x32be27)[_0x50349e(0x267)]();}else{if(_0x5a3f87&&_0x36b7f6[_0x50349e(0x31e)]==_0x5a3f87){const _0x183c01={'coin':_0x36b7f6['coin'],'number':_0x2f1f42,'breakeven':_0x18001e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x50349e(0x2ee)](_0x50349e(0x324))[_0x50349e(0x34b)]({'coin':_0x36b7f6[_0x50349e(0x31e)]})['assign'](_0x183c01)[_0x50349e(0x267)]();}}}});}async function updateCoinResults(_0x571a81,_0x57c186=![]){const _0x53be19=_0x45c57d;let _0x27a620,_0xd402b0,_0xe64c17,_0x3755d2,_0x3a0b5f,_0x569d1e,_0x120a1f=dbCoinResults[_0x53be19(0x2ee)](_0x53be19(0x324))['find']({'coin':_0x571a81['coin']})[_0x53be19(0x331)](),_0x1be91b=![];_0x120a1f&&Object[_0x53be19(0x274)](_0x120a1f)[_0x53be19(0x1c5)](([_0x2e526a,_0x417648])=>{if(_0x417648==null)_0x1be91b=!![];});(!_0x120a1f||_0x1be91b)&&(await initCoinResults(_0x571a81['coin']),_0x120a1f=dbCoinResults['get']('coins')['find']({'coin':_0x571a81[_0x53be19(0x31e)]})[_0x53be19(0x331)]());_0x571a81[_0x53be19(0x257)]&&(_0x569d1e={'filled':_0x571a81[_0x53be19(0x231)]*_0x571a81[_0x53be19(0x1b0)],'amount':_0x571a81[_0x53be19(0x231)]*_0x571a81[_0x53be19(0x1b0)],'side':_0x571a81[_0x53be19(0x1a9)]=='sell'?_0x53be19(0x228):'sell','price':0x1/_0x571a81['price']},_0x571a81={..._0x571a81,..._0x569d1e});_0x57c186?_0xd402b0=_0x571a81[_0x53be19(0x1a9)]==_0x53be19(0x228)?_0x120a1f['number']+_0x571a81[_0x53be19(0x231)]:_0x120a1f[_0x53be19(0x313)]-_0x571a81[_0x53be19(0x231)]:_0xd402b0=await getCoinNumber(_0x571a81[_0x53be19(0x31e)]);if(_0x571a81[_0x53be19(0x215)]&&_0x571a81[_0x53be19(0x215)][_0x53be19(0x322)]==config[_0x53be19(0x358)])_0x27a620=Number(_0x571a81[_0x53be19(0x215)][_0x53be19(0x28e)]);else{if(_0x571a81[_0x53be19(0x215)]&&_0x571a81[_0x53be19(0x215)][_0x53be19(0x322)]==_0x53be19(0x252)&&!_0x57c186&&config[_0x53be19(0x358)]!=_0x53be19(0x1c4))_0x27a620=Number(_0x571a81[_0x53be19(0x215)][_0x53be19(0x28e)])*gTicker[_0x53be19(0x252)+config[_0x53be19(0x358)]];else _0x27a620=defaultFee*_0x571a81['filled']*_0x571a81[_0x53be19(0x1b0)];}_0x571a81[_0x53be19(0x1a9)]==_0x53be19(0x228)?(_0xe64c17=_0xd402b0!=0x0?(_0x120a1f[_0x53be19(0x2a5)]*_0x120a1f[_0x53be19(0x313)]+_0x571a81[_0x53be19(0x1b0)]*(_0xd402b0-_0x120a1f[_0x53be19(0x313)])+_0x27a620)/_0xd402b0:0x0,_0x3755d2=_0x120a1f[_0x53be19(0x1ea)]):(_0xe64c17=_0xd402b0!=0x0?(_0x120a1f[_0x53be19(0x2a5)]*_0x120a1f[_0x53be19(0x313)]-_0x571a81[_0x53be19(0x1b0)]*(_0x120a1f['number']-_0xd402b0)+_0x27a620)/_0xd402b0:0x0,_0x3755d2=_0x120a1f[_0x53be19(0x1ea)]+(_0x571a81[_0x53be19(0x1b0)]-_0x120a1f[_0x53be19(0x2a5)])*_0x571a81[_0x53be19(0x231)]);_0x3a0b5f=(_0x571a81[_0x53be19(0x1b0)]-_0xe64c17-_0x27a620/_0x571a81[_0x53be19(0x231)])*_0xd402b0;let _0x4f4e08={'coin':_0x571a81['coin'],'number':_0xd402b0,'breakeven':formatResult(_0xe64c17,0x8),'realized':formatResult(_0x3755d2,0x8),'unrealized':formatResult(_0x3a0b5f,0x8),'fees':formatResult(_0x120a1f[_0x53be19(0x273)]+_0x27a620,0x8),'sells':_0x571a81[_0x53be19(0x1a9)]=='sell'?_0x120a1f[_0x53be19(0x341)]+0x1:_0x120a1f['sells'],'buys':_0x571a81[_0x53be19(0x1a9)]==_0x53be19(0x228)?_0x120a1f['buys']+0x1:_0x120a1f['buys']};dbCoinResults[_0x53be19(0x2ee)](_0x53be19(0x324))[_0x53be19(0x34b)]({'coin':_0x571a81['coin']})[_0x53be19(0x34f)](_0x4f4e08)[_0x53be19(0x267)]();if(!_0x57c186){if(_0x571a81['fee']&&_0x571a81['fee'][_0x53be19(0x322)]==_0x53be19(0x252)){const _0x9fd1ed=currentCoins[_0x53be19(0x34b)](_0xe0926d=>_0xe0926d[_0x53be19(0x31e)]==_0x53be19(0x252));if(_0x9fd1ed){let _0x3af470=dbCoinResults[_0x53be19(0x2ee)](_0x53be19(0x324))['find']({'coin':_0x53be19(0x252)})['value']();_0x4f4e08={..._0x3af470,'number':_0x9fd1ed[_0x53be19(0x313)]},dbCoinResults[_0x53be19(0x2ee)]('coins')[_0x53be19(0x34b)]({'coin':'BNB'})[_0x53be19(0x34f)](_0x4f4e08)['write']();}}}}async function placeOrder(_0x87065b){const _0x2aeae7=_0x45c57d,_0x897663=config[_0x2aeae7(0x25e)]==_0x2aeae7(0x325)?_0x2aeae7(0x325):_0x2aeae7(0x1a6);if(lockOrders==ORDERS[_0x2aeae7(0x30a)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x2aeae7(0x1d0)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2aeae7(0x254);let _0xb6f0e2=![];lastOrders=[];for(const _0xdff1b1 of _0x87065b){let _0x306871,_0x498328,_0x345a66,_0x3073d6,_0x1ca03e,_0x1679bf=_0xdff1b1['symbol'];try{const _0x7df534=await exchange[_0x2aeae7(0x245)](_0x1679bf);_0x306871=_0xdff1b1[_0x2aeae7(0x257)]?0x1/_0xdff1b1[_0x2aeae7(0x2e1)]:_0xdff1b1[_0x2aeae7(0x2e1)],_0x498328=_0x7df534[_0x2aeae7(0x301)],_0x345a66=_0x7df534['ask'];_0xdff1b1[_0x2aeae7(0x257)]?(_0x3073d6=_0xdff1b1['side']==_0x2aeae7(0x228)?_0x2aeae7(0x1fb):_0x2aeae7(0x228),_0x1ca03e=Math[_0x2aeae7(0x300)](_0xdff1b1[_0x2aeae7(0x238)])/_0x306871):(_0x3073d6=_0xdff1b1[_0x2aeae7(0x1a9)],_0x1ca03e=Math[_0x2aeae7(0x300)](_0xdff1b1[_0x2aeae7(0x238)]));_0x897663==_0x2aeae7(0x1a6)&&(config[_0x2aeae7(0x25e)]=='limit-high'&&(_0x306871=_0x3073d6==_0x2aeae7(0x228)?_0x498328:_0x345a66),config['ordertype']==_0x2aeae7(0x1d1)&&(_0x306871=_0x3073d6==_0x2aeae7(0x228)?_0x345a66:_0x498328));_0x1ca03e=formatResult(_0x1ca03e,0x8),_0x306871=formatResult(_0x306871,0x8);const _0x26fa8a=_0x3073d6==_0x2aeae7(0x1fb)?config[_0x2aeae7(0x31f)]?String[_0x2aeae7(0x1cc)]('0x'+config[_0x2aeae7(0x31f)])+'\x20':'':config[_0x2aeae7(0x2f7)]?String[_0x2aeae7(0x1cc)]('0x'+config[_0x2aeae7(0x2f7)])+'\x20':'',_0xe524a2=_0x897663==_0x2aeae7(0x325)?'Market':config[_0x2aeae7(0x25e)]==_0x2aeae7(0x226)?_0x2aeae7(0x20a):_0x2aeae7(0x2eb),_0x1c4c93=(Math['floor'](Math[_0x2aeae7(0x234)]()*0x35a4e900)+0x5f5e100)[_0x2aeae7(0x2cc)]();lastOrders[_0x2aeae7(0x255)]({'customId':_0x1c4c93,'symbol':_0x1679bf,'coin':_0xdff1b1['coin'],'amount':_0x1ca03e,'price':_0x306871,'side':_0x3073d6,'reverse':_0xdff1b1[_0x2aeae7(0x257)],'filled':0x0});if(_0x897663=='market')logHistory('order',''+_0x26fa8a+_0xe524a2+_0x2aeae7(0x30b)+_0x1679bf+'\x20'+_0x3073d6+'\x20#'+formatResult(_0x1ca03e,0x8)+'\x20@'+formatResult(_0x306871,0x8));else logHistory('order',''+_0x26fa8a+_0xe524a2+_0x2aeae7(0x30b)+_0x1679bf+'\x20'+_0x3073d6+'\x20#'+formatResult(_0x1ca03e,0x8)+'\x20@'+formatResult(_0x306871,0x8));let _0x1687f9;_0x897663==_0x2aeae7(0x325)?_0x3073d6==_0x2aeae7(0x228)&&[_0x2aeae7(0x29b),'Bitget','Cex',_0x2aeae7(0x1df),'Huobipro'][_0x2aeae7(0x338)](config['exchange'])?_0x1687f9=await exchange[_0x2aeae7(0x32b)](_0x1679bf,_0x897663,_0x3073d6,_0x1ca03e,_0x306871):_0x1687f9=await exchange[_0x2aeae7(0x32b)](_0x1679bf,_0x897663,_0x3073d6,_0x1ca03e,undefined):_0x1687f9=await exchange[_0x2aeae7(0x32b)](_0x1679bf,_0x897663,_0x3073d6,_0x1ca03e,_0x306871);logger['debug'](_0x2aeae7(0x216)+_0x1687f9['id']+_0x2aeae7(0x2ad)+_0x1c4c93);const _0x962d49=lastOrders[_0x2aeae7(0x1c8)]-0x1;if(_0x962d49>=0x0&&lastOrders[_0x962d49]['customId']==_0x1c4c93){lastOrders[_0x962d49][_0x2aeae7(0x208)]=_0x1687f9['id'];if(_0x1687f9[_0x2aeae7(0x223)])lastOrders[_0x962d49]['amount']=_0x1687f9[_0x2aeae7(0x223)];if(_0x1687f9[_0x2aeae7(0x1b0)])lastOrders[_0x962d49]['price']=_0x1687f9[_0x2aeae7(0x1b0)];lastOrders[_0x962d49]['fee']=_0x1687f9['fee'];}if(config[_0x2aeae7(0x2ab)]!=0x0){let _0x2bb925=null;if(cooldownTracker[_0x2aeae7(0x1c8)]==config[_0x2aeae7(0x2ab)]-0x1)_0x2bb925=cooldownTracker[_0x2aeae7(0x23c)]();const _0x575d5e=getTimeStamp();cooldownTracker[_0x2aeae7(0x255)](_0x575d5e);if(_0x2bb925){const _0x43ff03=fns['differenceInSeconds'](new Date(_0x575d5e),new Date(_0x2bb925));if(_0x43ff03<cooldownInterval){logHistory(_0x2aeae7(0x314),'Executed\x20'+config[_0x2aeae7(0x2ab)]+_0x2aeae7(0x1ec)+cooldownInterval/0x3c+_0x2aeae7(0x237)+cooldownPeriod/(0xe10*0x3e8)+_0x2aeae7(0x347)),coolingDown=!![];break;}}}}catch(_0x2e9b75){if(_0x2e9b75[_0x2aeae7(0x2cc)]()[_0x2aeae7(0x338)](_0x2aeae7(0x277)))lastOrders=lastOrders[_0x2aeae7(0x224)](_0x396a48=>_0x396a48[_0x2aeae7(0x1ed)]!=_0x1679bf),logHistory(_0x2aeae7(0x314),_0x2aeae7(0x1db)+_0x1679bf),_0xb6f0e2=!![];else{if(_0x2e9b75[_0x2aeae7(0x2cc)]()[_0x2aeae7(0x338)](_0x2aeae7(0x2dc)))lastOrders=lastOrders[_0x2aeae7(0x224)](_0x40ebcd=>_0x40ebcd[_0x2aeae7(0x1ed)]!=_0x1679bf),logHistory(_0x2aeae7(0x314),_0x2aeae7(0x312)+_0x1679bf),_0xb6f0e2=!![];else{if(_0x2e9b75[_0x2aeae7(0x2cc)]()['includes'](_0x2aeae7(0x33b)))lastOrders=lastOrders[_0x2aeae7(0x224)](_0x4cdcd5=>_0x4cdcd5[_0x2aeae7(0x1ed)]!=_0x1679bf),logHistory(_0x2aeae7(0x314),_0x2aeae7(0x317)+_0x1679bf),logger['debug'](_0x2e9b75),_0xb6f0e2=!![];else _0x2e9b75[_0x2aeae7(0x2cc)]()[_0x2aeae7(0x338)](_0x2aeae7(0x22c))?(lastOrders=lastOrders[_0x2aeae7(0x224)](_0x1afa4f=>_0x1afa4f[_0x2aeae7(0x1ed)]!=_0x1679bf),logHistory(_0x2aeae7(0x314),_0x2aeae7(0x1db)+_0x1679bf),_0xb6f0e2=!![]):(lastOrders=lastOrders[_0x2aeae7(0x224)](_0x5d04ce=>_0x5d04ce[_0x2aeae7(0x1ed)]!=_0x1679bf),await handleError(_0x2e9b75,'placeOrder()',_0x1679bf));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x21c7a9=config[_0x2aeae7(0x25e)]==_0x2aeae7(0x325)?validateOrderTimeout*0x3c*0x3e8:config[_0x2aeae7(0x339)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5bbf1e=_0x2aeae7;validateOrders(_0x5bbf1e(0x2aa));},_0x21c7a9);}else unlockOrders();_0xb6f0e2&&config['headless']&&(logHistory(_0x2aeae7(0x314),_0x2aeae7(0x2f2)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2aeae7(0x2e0),_0x2aeae7(0x31a)));}else{if(coolingDown)!config[_0x2aeae7(0x1ca)]&&logHistory('error',_0x2aeae7(0x1da));else lockOrders!=ORDERS[_0x2aeae7(0x30a)]&&(!config['headless']&&(config[_0x2aeae7(0x25e)]==_0x2aeae7(0x325)?logHistory('error',_0x2aeae7(0x1e0)):logHistory(_0x2aeae7(0x314),_0x2aeae7(0x1e8))));}}function persistOpenOrders(_0x4ba457){const _0x497f58=_0x45c57d,_0x37853a={...config,'openOrders':_0x4ba457};let _0x46d9e7=dbConfig[_0x497f58(0x2ee)](_0x497f58(0x2d7))[_0x497f58(0x34b)]({'botID':botID})[_0x497f58(0x331)]();_0x46d9e7&&dbConfig[_0x497f58(0x2ee)](_0x497f58(0x2d7))[_0x497f58(0x34b)]({'botID':botID})[_0x497f58(0x34f)](_0x37853a)[_0x497f58(0x267)]();}function restoreOrders(){const _0x2c6081=_0x45c57d;let _0x5e2aeb;config[_0x2c6081(0x236)]&&allOpenOrders[_0x2c6081(0x1c5)](_0x420b3d=>{const _0xb55e4e=_0x2c6081,_0x528349=config[_0xb55e4e(0x236)][_0xb55e4e(0x34b)](_0x27a5b9=>_0x27a5b9[_0xb55e4e(0x208)]==_0x420b3d['id']);_0x528349&&(lastOrders['push'](_0x528349),_0x5e2aeb=_0x420b3d[_0xb55e4e(0x2a7)]);});if(lastOrders[_0x2c6081(0x1c8)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x2c6081(0x202),allOrdersPlaced=!![];const _0x128d63=new Date()[_0x2c6081(0x2c1)](),_0x20182f=config[_0x2c6081(0x25e)]==_0x2c6081(0x325)?validateOrderTimeout*0x3c*0x3e8:config[_0x2c6081(0x339)]*0x3c*0x3e8;if(_0x5e2aeb+_0x20182f>_0x128d63){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x120927=_0x2c6081;validateOrders(_0x120927(0x2aa));},_0x5e2aeb+_0x20182f-_0x128d63);}else validateOrders(_0x2c6081(0x2aa));}}async function sendMetricsTelegram(){const _0x440c14=_0x45c57d;if(!coinsLoaded){process['send']({'telegrammsg':_0x440c14(0x1c7)},_0xdf51e9=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4c7985='';if(config[_0x440c14(0x327)])_0x4c7985='<b>'+config[_0x440c14(0x297)]+_0x440c14(0x1f0);else _0x4c7985='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0xbed735=getKPIs(_0x440c14(0x358)),_0x3acc48=getKPIs(_0x440c14(0x26e),config[_0x440c14(0x26e)]),_0x7ea3c6=getKPIs(_0x440c14(0x1ac)),_0x3b23a5=getKPIs(_0x440c14(0x28d),config[_0x440c14(0x26e)]);_0x4c7985+=_0x440c14(0x2ff),_0x4c7985+=_0xbed735[_0x440c14(0x22a)]+_0x440c14(0x23e)+_0xbed735[_0x440c14(0x331)]+'\x0a',_0x4c7985+=_0xbed735[_0x440c14(0x251)]+':\x20'+_0xbed735[_0x440c14(0x2fe)]+'%\x0a',_0x4c7985+=_0x3acc48['leftTxt']+_0x440c14(0x23e)+_0x3acc48['value']+'\x0a',_0x4c7985+=_0x3acc48[_0x440c14(0x251)]+':\x20'+_0x3acc48[_0x440c14(0x2fe)]+'%\x0a',_0x4c7985+=_0x7ea3c6['leftTxt']+':\x20'+_0x7ea3c6[_0x440c14(0x331)]+'\x20('+config[_0x440c14(0x358)]+')\x0a',_0x4c7985+=_0x7ea3c6[_0x440c14(0x251)]+':\x20'+_0x7ea3c6[_0x440c14(0x2fe)]+_0x440c14(0x2bb)+config['basecoin']+')\x0a',_0x4c7985+=_0x3b23a5['leftTxt']+':\x20'+_0x3b23a5[_0x440c14(0x331)]+'\x20('+config['fiat']+')\x0a',_0x4c7985+=_0x3b23a5['rightTxt']+':\x20'+_0x3b23a5['change']+_0x440c14(0x2bb)+config[_0x440c14(0x26e)]+')\x0a',_0x4c7985+='</pre>',process[_0x440c14(0x213)]({'telegrammsg':_0x4c7985},_0x1ddbff=>{});}async function sendPortfolioTelegram(){const _0x414ebb=_0x45c57d;if(!coinsLoaded||!currentCoins[0x0][_0x414ebb(0x2e6)]){process[_0x414ebb(0x213)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x59a1fa=>{});return;}let _0x5f5d50='';if(config[_0x414ebb(0x327)])_0x5f5d50='<b>'+config[_0x414ebb(0x297)]+_0x414ebb(0x35a);else _0x5f5d50='<b>Bot\x20'+botID+_0x414ebb(0x35a);_0x5f5d50+='<pre>',_0x5f5d50+=_0x414ebb(0x26a),_0x5f5d50+=_0x414ebb(0x2ed),_0x5f5d50+=_0x414ebb(0x26a),currentCoins[_0x414ebb(0x1c5)](_0x5f5195=>{const _0xf855a0=_0x414ebb;_0x5f5d50+=_0x5f5195['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x5f5195[_0xf855a0(0x2e6)],0x2,0x6)+'|\x20'+formatPad(_0x5f5195[_0xf855a0(0x1f5)],0x2,0x6)+'|\x20'+formatPad(_0x5f5195['delta']*0x64,0x2,0x6)+'\x0a';}),_0x5f5d50+=_0x414ebb(0x2ac),process[_0x414ebb(0x213)]({'telegrammsg':_0x5f5d50},_0x4dc73f=>{});}function formatPad(_0x225bbc,_0x12b054,_0x58a435){const _0x3f0235=_0x45c57d,_0x43a4b6=formatResultString(_0x225bbc,_0x12b054);return _0x43a4b6?_0x43a4b6[_0x3f0235(0x1ba)](_0x58a435):''[_0x3f0235(0x1ba)](_0x58a435);}function logHistory(_0x40317a,_0x7b8303,_0x399614=''){const _0x21400b=_0x45c57d;logger[_0x21400b(0x352)](''+_0x7b8303);let _0x5b1e97={'time':getTimeStamp(),'type':_0x40317a,'event':_0x7b8303};dbLogs[_0x21400b(0x2ee)]('logs')[_0x21400b(0x255)](_0x5b1e97)[_0x21400b(0x267)]();if(_0x399614=='')_0x399614=_0x7b8303;proxyEmit(_0x21400b(0x20e),{'log':_0x5b1e97,'summary':_0x399614}),process[_0x21400b(0x213)]({'telegram':{..._0x5b1e97,'botname':config[_0x21400b(0x297)],'showname':config[_0x21400b(0x327)]}},_0x2ddfd2=>{});}function emitHistory(_0x17b74d={}){const _0x2e6d0e=_0x45c57d;Object[_0x2e6d0e(0x2af)](_0x17b74d)[_0x2e6d0e(0x1c8)]==0x0&&(_0x17b74d={'type':['order','event'],'event':'','page':0x1});if(_0x17b74d[_0x2e6d0e(0x25a)][_0x2e6d0e(0x338)](_0x2e6d0e(0x20e)))_0x17b74d[_0x2e6d0e(0x25a)][_0x2e6d0e(0x1be)](_0x17b74d['type'][_0x2e6d0e(0x2a8)]('event'),0x1,_0x2e6d0e(0x314),_0x2e6d0e(0x32d),'success');if(dbLogs[_0x2e6d0e(0x1e3)]('logs')[_0x2e6d0e(0x331)]()){let _0x1192d2=dbLogs[_0x2e6d0e(0x2ee)]('logs')[_0x2e6d0e(0x224)](_0x54ec18=>{const _0x32aae2=_0x2e6d0e;if(_0x17b74d[_0x32aae2(0x25a)][_0x32aae2(0x1c8)]==0x0)return![];else return _0x17b74d[_0x32aae2(0x25a)][_0x32aae2(0x338)](_0x54ec18[_0x32aae2(0x25a)]);})[_0x2e6d0e(0x224)](_0x52584b=>{const _0x40057e=_0x2e6d0e;if(_0x17b74d['event']=='')return!![];else return _0x52584b['event']['toLowerCase']()['includes'](_0x17b74d[_0x40057e(0x20e)][_0x40057e(0x1fc)]());})[_0x2e6d0e(0x239)](_0x2e6d0e(0x349)),_0x6f2fdf=_0x1192d2[_0x2e6d0e(0x331)]()['length'];_0x1192d2=_0x1192d2[_0x2e6d0e(0x257)]()['slice']((_0x17b74d[_0x2e6d0e(0x20f)]-0x1)*logPageSize,_0x17b74d[_0x2e6d0e(0x20f)]*logPageSize-0x1)[_0x2e6d0e(0x257)]()[_0x2e6d0e(0x331)](),proxyEmit('event-history',{'logs':_0x1192d2,'total':_0x6f2fdf});}else proxyEmit(_0x2e6d0e(0x29a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x47b629){const _0x4cb4fa=_0x45c57d;if(dbLogs[_0x4cb4fa(0x1e3)]('logs')[_0x4cb4fa(0x331)]()){const _0x5eaa3f=dbLogs[_0x4cb4fa(0x2ee)]('logs')[_0x4cb4fa(0x239)](_0x4cb4fa(0x349))[_0x4cb4fa(0x224)](_0x209c10=>{const _0xa6ecd3=_0x4cb4fa;return _0x209c10[_0xa6ecd3(0x25a)]==_0xa6ecd3(0x34e);})[_0x4cb4fa(0x331)]();dbLogs[_0x4cb4fa(0x2ee)](_0x4cb4fa(0x1ae))[_0x4cb4fa(0x1aa)]()[_0x4cb4fa(0x267)](),dbLogs[_0x4cb4fa(0x2ee)]('logs')[_0x4cb4fa(0x34f)](_0x5eaa3f)[_0x4cb4fa(0x267)](),emitHistory(_0x47b629);}}async function pauseBot(_0x4f4e06=pauseBotIntervalShort,_0x4f36c6){const _0x405ae6=_0x45c57d,_0x2b898a=new Date()[_0x405ae6(0x2c1)]();if(!lastErrorShown||_0x2b898a-lastErrorShown>=_0x4f4e06){lastErrorShown=_0x2b898a;!lastBotPause?(lastBotPause=_0x2b898a,consecutivePauses=0x1):(_0x2b898a-lastBotPause-_0x4f4e06<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x405ae6(0x314),_0x4f36c6+pauseBotMsg),_0x4f4e06=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x2b898a);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x4f4e06),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1b0a0f=_0x45c57d;botPaused=!![],await sleep(0x3e8),process[_0x1b0a0f(0x213)]({'stop':_0x1b0a0f(0x2cb)},_0x8e2ef4=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x120f9d,_0x3b47b6){const _0x45dfcf=_0x45c57d;if(botPaused)return;const _0x556f31=config['exchange']||_0x45dfcf(0x23d);if(_0x3b47b6)logger['debug'](_0x45dfcf(0x2db)+_0x3b47b6);const _0x53d80d=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x120f9d[_0x45dfcf(0x2cc)]()[_0x45dfcf(0x338)]('API-key\x20format\x20invalid'))logHistory(_0x45dfcf(0x314),_0x556f31+_0x45dfcf(0x21b)),_0x53d80d();else{if(_0x120f9d['toString']()[_0x45dfcf(0x338)](_0x45dfcf(0x1ad)))logHistory(_0x45dfcf(0x314),_0x556f31+_0x45dfcf(0x250)),_0x53d80d();else _0x120f9d['toString']()['includes'](_0x45dfcf(0x33c))?(logHistory(_0x45dfcf(0x314),_0x556f31+_0x45dfcf(0x242)),logHistory(_0x45dfcf(0x314),_0x45dfcf(0x1f3)),_0x53d80d()):await handleError(_0x120f9d,null);}}async function handleError(_0x3f6c2e,_0x3423ba,_0x35ef59=''){const _0x175016=_0x45c57d;if(botPaused)return;let _0x3c0dc4;const _0x4bbd00=config[_0x175016(0x32e)]||_0x175016(0x23d);if(_0x3423ba)logger[_0x175016(0x29f)](_0x175016(0x2db)+_0x3423ba);if(_0x3f6c2e['toString']()['includes'](_0x175016(0x2f9)))_0x3c0dc4=_0x4bbd00+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger[_0x175016(0x29f)](_0x3c0dc4+'\x20>\x20details:',_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e[_0x175016(0x2cc)]()['includes'](_0x175016(0x332)))_0x3c0dc4=_0x4bbd00+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)](_0x175016(0x27b))||_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)](_0x175016(0x270)))_0x3c0dc4=_0x4bbd00+_0x175016(0x2da),logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e['toString']()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)](_0x175016(0x30c)))_0x3c0dc4=_0x4bbd00+_0x175016(0x205),logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))_0x3c0dc4=_0x4bbd00+_0x175016(0x1bb),logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e['toString']()[_0x175016(0x1fc)]()[_0x175016(0x338)](_0x175016(0x2a7))||_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x1fc)]()[_0x175016(0x338)](_0x175016(0x2c3)))_0x3c0dc4=_0x175016(0x2e7),logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)](_0x175016(0x217)))_0x3c0dc4=_0x4bbd00+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e['toString']()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e instanceof ccxt[_0x175016(0x1fd)])_0x3c0dc4=_0x4bbd00+_0x175016(0x1a4),logger[_0x175016(0x29f)](_0x3c0dc4+_0x175016(0x1c0),_0x3f6c2e[_0x175016(0x2cc)]()),await pauseBot(undefined,_0x3c0dc4);else{if(_0x3f6c2e['toString']()[_0x175016(0x338)](_0x175016(0x32f)))logHistory(_0x175016(0x314),_0x4bbd00+_0x175016(0x221)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x175016(0x314),_0x4bbd00+_0x175016(0x253)),logHistory(_0x175016(0x314),_0x175016(0x321)),await killBot();else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)]('AuthenticationError'))logHistory(_0x175016(0x314),_0x4bbd00+_0x175016(0x318)),logHistory(_0x175016(0x314),_0x175016(0x321)),await killBot();else{if(_0x3f6c2e[_0x175016(0x2cc)]()[_0x175016(0x338)](_0x175016(0x25d)))logHistory(_0x175016(0x314),_0x4bbd00+_0x175016(0x2c8)),logHistory(_0x175016(0x314),_0x175016(0x321)),await killBot();else{if(_0x3f6c2e[_0x175016(0x2cc)]()['includes'](_0x175016(0x218)))logHistory(_0x175016(0x314),_0x175016(0x340)+_0x35ef59);else{if(_0x3f6c2e instanceof ccxt[_0x175016(0x21a)]){logHistory('error',_0x4bbd00+'\x20exchange\x20error'),logger[_0x175016(0x29f)]('Error\x20details:',_0x3f6c2e);if(_0x35ef59)logger['debug'](_0x175016(0x278)+_0x35ef59);}else{_0x3c0dc4='Unknown\x20error\x20occured',logger[_0x175016(0x29f)](_0x3c0dc4+'\x20>\x20details:',_0x3f6c2e);if(_0x35ef59)logger[_0x175016(0x29f)]('Symbol(s):\x20'+_0x35ef59);await pauseBot(undefined,_0x3c0dc4);}}}}}}}}}}}}}}}async function withRetry(_0x19ade3,_0xdebfee){const _0x30c109=_0x45c57d;let _0x5176a5=![],_0x363d3e=0x0,_0x45e7ac,_0x515d8d;while(_0x363d3e<maxRetries){try{_0x45e7ac=await _0xdebfee();break;}catch(_0x31a7ad){_0x515d8d=_0x31a7ad,!_0x5176a5?(_0x5176a5=!![],logger['debug'](_0x30c109(0x308)+_0x19ade3+':',_0x31a7ad['toString']())):await sleep(retryInterval);}_0x363d3e++;}if(_0x363d3e==0x0)return _0x45e7ac;if(_0x363d3e>=maxRetries)throw _0x515d8d;else return logger['debug'](_0x30c109(0x2d1)+_0x363d3e+_0x30c109(0x225)),_0x45e7ac;}function formatResult(_0x20fc56,_0x2b85d7){const _0x1c82ae=_0x45c57d;return parseFloat(_0x20fc56[_0x1c82ae(0x1b6)](_0x2b85d7));}function formatResultTruncate(_0xa7d390,_0x48f0a3){const _0x4a3eaf=_0x45c57d;let _0x2c9cac=formatResultString(_0xa7d390,0xa),_0x56d726=_0x2c9cac[_0x4a3eaf(0x2a8)]('.');return _0x56d726!=-0x1&&(_0x2c9cac=_0x2c9cac[_0x4a3eaf(0x26d)](0x0,_0x56d726+_0x48f0a3+0x1)),Number(_0x2c9cac);}function formatResultString(_0x119699,_0x5616fc){const _0x5c6cff=_0x45c57d;let _0x43b1dc;if(!(''+_0x119699)[_0x5c6cff(0x338)]('e'))_0x43b1dc=+(Math[_0x5c6cff(0x2b4)](_0x119699+'e+'+_0x5616fc)+'e-'+_0x5616fc);else{let _0x1d5dd9=(''+_0x119699)[_0x5c6cff(0x296)]('e'),_0x442bef='';+_0x1d5dd9[0x1]+_0x5616fc>0x0&&(_0x442bef='+'),_0x43b1dc=+(Math['round'](+_0x1d5dd9[0x0]+'e'+_0x442bef+(+_0x1d5dd9[0x1]+_0x5616fc))+'e-'+_0x5616fc);}return Number(_0x43b1dc)[_0x5c6cff(0x1b6)](_0x5616fc);}function getServerTime(){const _0x1546a2=_0x45c57d,_0xb8ba29=new Date();return _0xb8ba29['getFullYear']()+'/'+(_0xb8ba29[_0x1546a2(0x265)]()+0x1)['toString']()[_0x1546a2(0x1ba)](0x2,'0')+'/'+_0xb8ba29[_0x1546a2(0x2b9)]()[_0x1546a2(0x2cc)]()[_0x1546a2(0x1ba)](0x2,'0')+'\x20'+_0xb8ba29['getHours']()[_0x1546a2(0x2cc)]()[_0x1546a2(0x1ba)](0x2,'0')+':'+_0xb8ba29['getMinutes']()[_0x1546a2(0x2cc)]()[_0x1546a2(0x1ba)](0x2,'0')+':'+_0xb8ba29[_0x1546a2(0x2a2)]()['toString']()[_0x1546a2(0x1ba)](0x2,'0');}function getTimeStamp(){const _0x3e8547=_0x45c57d,_0xb2491=shiftedTime();return _0xb2491['getFullYear']()+'/'+(_0xb2491[_0x3e8547(0x265)]()+0x1)[_0x3e8547(0x2cc)]()[_0x3e8547(0x1ba)](0x2,'0')+'/'+_0xb2491[_0x3e8547(0x2b9)]()['toString']()[_0x3e8547(0x1ba)](0x2,'0')+'\x20'+_0xb2491[_0x3e8547(0x203)]()[_0x3e8547(0x2cc)]()[_0x3e8547(0x1ba)](0x2,'0')+':'+_0xb2491[_0x3e8547(0x1a3)]()['toString']()[_0x3e8547(0x1ba)](0x2,'0')+':'+_0xb2491[_0x3e8547(0x2a2)]()['toString']()[_0x3e8547(0x1ba)](0x2,'0');}function getDate(){const _0x508338=_0x45c57d,_0x2a4e6b=shiftedTime();return _0x2a4e6b['getFullYear']()+'/'+(_0x2a4e6b['getMonth']()+0x1)['toString']()[_0x508338(0x1ba)](0x2,'0')+'/'+_0x2a4e6b[_0x508338(0x2b9)]()['toString']()[_0x508338(0x1ba)](0x2,'0');}function getHour(){const _0x35fc78=_0x45c57d,_0x3593ca=shiftedTime();return _0x3593ca['getHours']()[_0x35fc78(0x2cc)]()['padStart'](0x2,'0');}function sleep(_0x1cbbe0){return new Promise(_0x13ba6d=>setTimeout(_0x13ba6d,_0x1cbbe0));}function shiftedTime(){const _0x58c5c8=_0x45c57d,_0x481cbb=new Date();let _0x264cdb=_0x481cbb;if(config&&config['timeshift']!==0x0)_0x264cdb=fns[_0x58c5c8(0x1f9)](_0x481cbb,{'hours':config[_0x58c5c8(0x283)]});return _0x264cdb;}function timer(_0x1d6ce1){const _0x501179=_0x45c57d,_0x503858=new Date();!lasttime?console[_0x501179(0x2e9)](getTimeStamp()+':\x20timer\x20>',_0x1d6ce1,_0x503858):console[_0x501179(0x2e9)](getTimeStamp()+_0x501179(0x2f5),_0x1d6ce1,(_0x503858-lasttime)/0x3e8),lasttime=_0x503858;}