const _0x23c8d3=_0x1932;(function(_0x295243,_0x2e3368){const _0x5e5106=_0x1932,_0x182a74=_0x295243();while(!![]){try{const _0x27666b=parseInt(_0x5e5106(0x1e2))/0x1+parseInt(_0x5e5106(0x1c6))/0x2*(-parseInt(_0x5e5106(0x1b3))/0x3)+-parseInt(_0x5e5106(0x179))/0x4+parseInt(_0x5e5106(0x172))/0x5+parseInt(_0x5e5106(0x15f))/0x6+parseInt(_0x5e5106(0x1a8))/0x7*(parseInt(_0x5e5106(0x1d2))/0x8)+-parseInt(_0x5e5106(0x1c3))/0x9*(parseInt(_0x5e5106(0x159))/0xa);if(_0x27666b===_0x2e3368)break;else _0x182a74['push'](_0x182a74['shift']());}catch(_0x2bac71){_0x182a74['push'](_0x182a74['shift']());}}}(_0x293e,0x9f13d));const _0x44f813=function(){let _0x337f70=!![];return function(_0x19fa1b,_0x681d38){const _0x43023f=_0x337f70?function(){const _0x1c79e6=_0x1932;if(_0x681d38){const _0x58d646=_0x681d38[_0x1c79e6(0x120)](_0x19fa1b,arguments);return _0x681d38=null,_0x58d646;}}:function(){};return _0x337f70=![],_0x43023f;};}(),_0x179ee8=_0x44f813(this,function(){const _0x594c9b=_0x1932;return _0x179ee8[_0x594c9b(0x116)]()[_0x594c9b(0x1d1)](_0x594c9b(0x1ba))[_0x594c9b(0x116)]()[_0x594c9b(0x12d)](_0x179ee8)['search'](_0x594c9b(0x1ba));});_0x179ee8();'use strict';const ccxt=require(_0x23c8d3(0xd1)),low=require(_0x23c8d3(0x140)),FileSync=require(_0x23c8d3(0x1ed)),fs=require('fs'),fns=require(_0x23c8d3(0x16f)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x23c8d3(0x1e5)),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global['ticker']={},global[_0x23c8d3(0x19a)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x23c8d3(0x119),_0x23c8d3(0x18c),'HOT/EUR','XEM/BUSD',_0x23c8d3(0x13d),_0x23c8d3(0x144)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x23c8d3(0xd3))[_0x23c8d3(0xdc)],botID=process[_0x23c8d3(0x138)][0x2]||_0x23c8d3(0x1b0),pattern=/^[0-9]{3}$/;!pattern[_0x23c8d3(0x17f)](botID)&&(console[_0x23c8d3(0xfd)](_0x23c8d3(0x105)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x23c8d3(0xe9)](0x1));const userID=process['argv'][0x3]||'',configpath=userID?_0x23c8d3(0x1b9)+userID+'/':_0x23c8d3(0x1b9);!fs['existsSync'](configpath)&&fs[_0x23c8d3(0x141)](configpath);const configfile=configpath+_0x23c8d3(0x14f)+botID+'-config.json',logfile=configpath+_0x23c8d3(0x14f)+botID+_0x23c8d3(0x192),performancefile=configpath+'bot-'+botID+_0x23c8d3(0x199),coinresultsfile=configpath+'bot-'+botID+_0x23c8d3(0x17e),settingsfile=configpath+_0x23c8d3(0xea),securefile=configpath+_0x23c8d3(0x117),configbackuppath=configpath+_0x23c8d3(0x17c),adapter=new FileSync(logfile),dbLogs=low(adapter);function _0x293e(){const _0x25009a=['defaults','configuration','wsKey','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','basecoin','Order(s)\x20filled\x20-\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','usd','Order(s)\x20not\x20validated\x20after\x20','No\x20more\x20open\x20orders\x20-\x20','date-fns','storeConfiguration','get','1574070FibrGP','time','accumulatedQuantity','balancing\x20resumed','currency','balancing\x20resumes\x20when\x20cooldown\x20ends','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','1041236ZufbWb','limit-low','stringify','/backup/','FILLED','-results.json','test','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20minutes\x20-\x20','Binance\x20API\x20secret\x20is\x20invalid','Binance\x20not\x20available\x20(1)','loadMarkets','progress','apiKey','fromCodePoint','2.5.0','showname','decrypt','limit','HOT/BTC','kill','coins','BNB','DDoSProtection','fetchClosedOrders','-events.json','emojisell','limits','event-history','round','price','args','-performance.json','change','Binance\x20not\x20available\x20(2)','.json','Cooldown\x20ended\x20-\x20balancing\x20resumed','headless','orderId','BTC','Limit\x20(low-margin)','forEach','portfolio','ordertype','value','cost','Coin\x20results\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20a\x20minute','7vcbfPJ','success','last','format','close','set','data','symbol','001','getCoins()','orderStatus','348cOtfKm','Pausing\x20for\x20','fetchOpenOrders','parse','bot','userData','./config/','(((.+)+)+)+$','findIndex','\x20-\x20bot\x20not\x20started','coin','getPortfolio','timeout','concat','secure','\x20-\x20','25101cTxgBp','datetime','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','818DIhSvK','string','buys','</pre>','getMinutes','emitHistory','createOrder','yyyy-MM-dd\x27T\x27HH:mm:ss','sells','send','privateKey','search','4321432gRjlVJ','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20hour','spot','splice','Unfilled\x20order(s)\x20canceled\x20after\x20','no\x20open\x20orders','MIN_NOTIONAL','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','symbols','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','outboundAccountPosition','Order\x20filled:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','reconnected','page','597584yGBQrJ','USDT','OrderNotFound','binance','eventType','\x20order:\x20','max','cancel','date','initial','\x20|\x20Error\x20details:\x20','lowdb/adapters/FileSync','excluded','eventTime','breakeven','binanceus','Order(s)\x20validated\x20-\x20','keys','Manual\x20balancing\x20required:\x20','wss://stream.binance.com:9443','priceChangePercent','indexOf','storeHeadless','botname','emojibuy','reverse','split','AuthenticationError','ongoing','push','wss://stream.binance.us:9443','ccxt','toFixed','./version.json','cancelOrder','EUR','includes','API-key\x20format\x20invalid','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','InvalidNonce','trade','Binance\x20not\x20responding','version','changes','delta','timestamp','executionReport','parseISO','filled','abs','fetchBalance','slice','order','distribution','getSeconds','exit','bb-settings.json','loadSymbols()','getHours','message','sortBy','startdate','limit-high','performance','sendPortfolioTelegram','<pre>','realized','Recreation\x20completed\x20successfully','replace','getMonth','cumulativeQuoteAssetTransactedQty','final','padStart','threshold','toLowerCase','log','placeOrder','settings','running','\x20|\x20','market','cloneDeep','getDate','Error:\x20Invalid\x20argument\x20','cancelLoading','timeshift','2.3.5','botID','valid','BUSD','getFullYear','starting-balances','ETH','milliseconds','target','starting-balance-','write','exec','sell','add','toString','bb-secure.json','error','DAI/','length','getTime','commissionAsset','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','exchange','filter','apply','Bot\x20','apiSecret','number','cancelOrders()','sha256','subscribeSpotKline','toggleBotMode','Market','find','eur','RSA-OAEP','offset','constructor','kline','shift','entries','join','function',')\x20|\x20Error\x20details:\x20','startnumber','amount','ExchangeNotAvailable','liquidity','argv','************','side','InsufficientFunds','subscribeSpotUserDataStream','NANO/','closeWs','\x20>\x20','lowdb','mkdirSync','assign','getFiat()','YOYOW/','ticker','fee','subscribeSymbol24hrTicker','logs','\x20orders\x20in\x20less\x20than\x20','event','Limit\x20(high-margin)','recreate','getPortfolio()','type','bot-','initclient','WebSockets(','placeOrder()','bid','fees','padEnd','Binance\x20API\x20key\x20is\x20invalid','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','map','5160KkVuts','remainingSymbols','deleteHistoryAlerts','buy','Order\x20amount\x20is\x20invalid:\x20','min','5675286OkGlJu','change24h','sort','balances','cooldown','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'];_0x293e=function(){return _0x25009a;};return _0x293e();}dbLogs[_0x23c8d3(0x165)]({'logs':[]})['write']();function _0x1932(_0x303682,_0x24b9a8){const _0x1fc05=_0x293e();return _0x1932=function(_0x179ee8,_0x44f813){_0x179ee8=_0x179ee8-0xc0;let _0x293e4e=_0x1fc05[_0x179ee8];return _0x293e4e;},_0x1932(_0x303682,_0x24b9a8);}const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x23c8d3(0x165)]({'data':[]})[_0x23c8d3(0x112)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x23c8d3(0x112)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x23c8d3(0x112)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3fc118)=>{},'debug':(..._0x51c887)=>{},'notice':(..._0x4fdaff)=>{},'info':(..._0x33931b)=>{},'warning':(..._0x2cdd7c)=>{},'error':async function(..._0x5a39b2){const _0x15b1ee=_0x23c8d3,_0x15b009=new Date()['getTime']();if(!lastErrorShown||_0x15b009-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x15b1ee(0x11b)]();let _0x1bb1c5='';if(_0x5a39b2[0x0])_0x1bb1c5+=_0x5a39b2[0x0];if(_0x5a39b2[0x1]&&_0x5a39b2[0x1][_0x15b1ee(0x118)]&&_0x5a39b2[0x1][_0x15b1ee(0x118)]['message'])_0x1bb1c5+=_0x15b1ee(0x1c2)+_0x5a39b2[0x1]['error']['message'];logging(_0x15b1ee(0x151)+consecutivePauses+_0x15b1ee(0x133),''+_0x1bb1c5),await pauseBot(_0x15b1ee(0x183));}}},crypt=new Crypt({'md':_0x23c8d3(0x125),'rsaStandard':_0x23c8d3(0x12b)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x23c8d3(0x107)]!=config[_0x23c8d3(0x107)]&&updateTimeshift(settings[_0x23c8d3(0x107)]);process[_0x23c8d3(0x1cf)]({'started':_0x23c8d3(0x100)},_0x580566=>{}),initializeProcessListeners();function proxyEmit(_0xac58a9,_0x33adb7=null){const _0x11b74f=_0x23c8d3;process[_0x11b74f(0x1cf)]({'function':_0xac58a9,'args':_0x33adb7},_0x843712=>{});}function initializeProcessListeners(){const _0x3e01c2=_0x23c8d3;process['on'](_0x3e01c2(0xed),_0x25e444=>{const _0x2eba8d=_0x3e01c2;switch(Object[_0x2eba8d(0xc3)](_0x25e444)[0x0]){case _0x2eba8d(0x107):_0x25e444[_0x2eba8d(0x107)]!=undefined&&(settings['timeshift']=_0x25e444[_0x2eba8d(0x107)],updateTimeshift(settings[_0x2eba8d(0x107)]));break;case _0x2eba8d(0x132):switch(_0x25e444['function']){case _0x2eba8d(0x150):initclient();break;case _0x2eba8d(0x127):toggleBotMode();break;case _0x2eba8d(0x1cb):emitHistory(_0x25e444[_0x2eba8d(0x198)]);break;case _0x2eba8d(0x15b):deleteHistoryAlerts(_0x25e444[_0x2eba8d(0x198)]);break;case _0x2eba8d(0x1be):getPortfolio(_0x25e444[_0x2eba8d(0x198)]);break;case _0x2eba8d(0x170):storeConfiguration(_0x25e444[_0x2eba8d(0x198)]);break;case _0x2eba8d(0xc8):storeHeadless(_0x25e444[_0x2eba8d(0x198)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x2eba8d(0xfe):placeOrder(_0x25e444[_0x2eba8d(0x198)]);break;case _0x2eba8d(0x106):cancelLoading();break;case _0x2eba8d(0xf2):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x4a1c0a=_0x23c8d3;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x4a1c0a(0x186)],config['apiSecret']);let _0x3dab08=await loadSymbols();if(_0x3dab08){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x4a1c0a(0x11a)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x45bcf1,_0x5c21af){const _0x4fc80a=_0x23c8d3,_0x1f18aa=ccxt[config[_0x4fc80a(0x11e)]];let _0x2d4a0b;switch(config['exchange']){case'binance':_0x2d4a0b=_0x4fc80a(0xc5);break;case _0x4fc80a(0xc1):_0x2d4a0b=_0x4fc80a(0xd0);break;default:_0x2d4a0b=_0x4fc80a(0xc5);}exchange=new _0x1f18aa({'apiKey':_0x45bcf1,'secret':_0x5c21af,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x45bcf1,'api_secret':_0x5c21af,'beautify':!![],'wsUrl':_0x2d4a0b},logger);let _0x45a05c=config[_0x4fc80a(0x11e)]==_0x4fc80a(0xc1)?_0x4fc80a(0x1e3):_0x4fc80a(0xd5),_0x3c2061=config[_0x4fc80a(0x169)]==_0x4fc80a(0x10e)?_0x4fc80a(0x10e):_0x4fc80a(0x1a0);stablecoins={'eur':{'coin':''+_0x3c2061+_0x45a05c,'symbol':_0x3c2061+'/'+_0x45a05c},'usd':{'coin':_0x3c2061+_0x4fc80a(0x1e3),'symbol':_0x3c2061+'/USDT'}};}async function loadSymbols(){const _0x116e29=_0x23c8d3;let _0x10bc19;try{markets=await exchange[_0x116e29(0x184)](),allSymbols=exchange[_0x116e29(0x1db)][_0x116e29(0x11f)](_0x3e73ac=>{let _0x2d2a3e=![];return exceptions['forEach'](_0x4939e7=>{const _0xd7833b=_0x1932;if(_0x3e73ac[_0xd7833b(0xd6)](_0x4939e7))_0x2d2a3e=!![];}),!_0x2d2a3e;}),_0x10bc19=!![];}catch(_0x3a453e){await handleError(_0x3a453e,_0x116e29(0xeb)),_0x10bc19=![];}return _0x10bc19;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x406f7a=_0x23c8d3;proxyEmit(_0x406f7a(0x166),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x406f7a(0x162),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x55c547=getNormalizedPerformance();emitPerformance(_0x55c547),await getStartingBalances(_0x55c547);}async function toggleBotMode(){const _0x49569d=_0x23c8d3;let _0x2fd274=dbConfig[_0x49569d(0x171)](_0x49569d(0x1b7))[_0x49569d(0x129)]({'botID':botID})[_0x49569d(0x1a5)]();if(_0x2fd274){const _0xf2bb61=!_0x2fd274[_0x49569d(0x19e)];dbConfig['get']('bot')[_0x49569d(0x129)]({'botID':botID})[_0x49569d(0x142)]({'headless':_0xf2bb61})['write'](),config[_0x49569d(0x19e)]=_0xf2bb61,proxyEmit(_0x49569d(0x166),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x19ead0=_0x23c8d3;process[_0x19ead0(0x1cf)]({'updatebotmanager':!![]},_0x53386c=>{});}function cleanws(){const _0x195570=_0x23c8d3;wsinitialized=![];ws1&&(ws1[_0x195570(0x1a2)](_0xdf2cf7=>{const _0x515a8b=_0x195570;try{wsClient[_0x515a8b(0x13e)](_0xdf2cf7);}catch(_0xdee8d7){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x1c9b24){}ws2=null;}ws3&&(ws3[_0x195570(0x1a2)](_0x23c0ea=>{const _0x1213a1=_0x195570;try{wsClient[_0x1213a1(0x13e)](_0x23c0ea);}catch(_0x5f66c3){}}),ws3=[]);}async function initws(){const _0x2fd5ab=_0x23c8d3;cleanws();let _0x382004=[];currentCoins['forEach'](_0x5e9d9a=>{const _0x23a016=_0x1932;if(_0x5e9d9a['coin']!=config['basecoin'])_0x382004[_0x23a016(0xcf)](_0x5e9d9a[_0x23a016(0x1af)]);});if(!_0x382004[_0x2fd5ab(0xd6)](stablecoins['eur'][_0x2fd5ab(0x1af)]))_0x382004['push'](stablecoins[_0x2fd5ab(0x12a)][_0x2fd5ab(0x1af)]);if(!_0x382004['includes'](stablecoins[_0x2fd5ab(0x16c)][_0x2fd5ab(0x1af)]))_0x382004[_0x2fd5ab(0xcf)](stablecoins[_0x2fd5ab(0x16c)]['symbol']);if(!_0x382004[_0x2fd5ab(0xd6)]('BNB/'+config[_0x2fd5ab(0x169)]))_0x382004[_0x2fd5ab(0xcf)]('BNB/'+config[_0x2fd5ab(0x169)]);try{_0x382004[_0x2fd5ab(0x1a2)]((_0x37c104,_0x31f01e)=>{const _0x3802db=_0x2fd5ab;ws1[_0x31f01e]=wsClient[_0x3802db(0x126)](noslash(_0x37c104),'1m'),ws3[_0x31f01e]=wsClient[_0x3802db(0x147)](noslash(_0x37c104),'spot');}),ws2=wsClient[_0x2fd5ab(0x13c)](),wsClient['on']('formattedMessage',_0x53f614=>{const _0x586c6=_0x2fd5ab;if(isWsFormattedKline(_0x53f614)){global[_0x586c6(0x145)][_0x53f614[_0x586c6(0x12e)][_0x586c6(0x1af)]]=_0x53f614['kline'][_0x586c6(0x1ac)];return;}else{if(isWsFormatted24hrTicker(_0x53f614)){global[_0x586c6(0x19a)][_0x53f614['symbol']]=_0x53f614[_0x586c6(0xc6)];return;}else{if(!Array['isArray'](_0x53f614)&&_0x53f614[_0x586c6(0x167)][_0x586c6(0xd6)](_0x586c6(0x1b8))){if(_0x53f614['wsMarket'][_0x586c6(0xd6)](_0x586c6(0x1d5))){updateNumberCoins(_0x53f614);return;}}}}}),wsClient['on'](_0x2fd5ab(0x1e0),async _0xe95ec2=>{if(!botPaused)currentCoins=await getCoins(!![]);});}catch(_0x48c349){await handleError(_0x48c349,'initws()');}let _0x4412bf,_0x1cdd06=0x0;loading['remainingSymbols']=[];let _0x5cc276=0x0;_0x382004['forEach'](_0x263336=>{const _0x548d38=_0x2fd5ab;loading[_0x548d38(0x15a)][_0x548d38(0xcf)](_0x263336);}),loadingCanceled=![];let _0x282384=![];while(_0x4412bf!=_0x382004[_0x2fd5ab(0x11a)]){_0x4412bf=0x0,_0x382004['forEach'](_0x5676e4=>{const _0x2b5082=_0x2fd5ab;global['ticker'][noslash(_0x5676e4)]&&(loading[_0x2b5082(0x15a)]=loading[_0x2b5082(0x15a)][_0x2b5082(0x11f)](_0x30abca=>_0x30abca!=_0x5676e4),_0x4412bf++);}),loading[_0x2fd5ab(0x185)]=Math[_0x2fd5ab(0x196)](_0x4412bf/_0x382004[_0x2fd5ab(0x11a)]*0x64);loading['progress']!=0x64&&(_0x5cc276>0x1e*0x5&&(loading[_0x2fd5ab(0x1bf)]=!![],emitLoadingProgress()),_0x5cc276>0x3c*0x5&&!_0x282384&&(_0x282384=!![],logHistory(_0x2fd5ab(0x118),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x2fd5ab(0x15a)]+_0x2fd5ab(0x1bc))));if(loadingCanceled){loading[_0x2fd5ab(0x1e9)]=!![],emitLoadingProgress();break;}else _0x4412bf!=_0x1cdd06&&(_0x1cdd06=_0x4412bf,emitLoadingProgress()),_0x5cc276++,await sleep(0xc8);}_0x282384&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started');if(_0x4412bf==_0x382004[_0x2fd5ab(0x11a)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x299123=_0x23c8d3;let _0x30982a=0x0,_0x370a05=0x0;try{_0x30982a=global[_0x299123(0x145)][stablecoins[_0x299123(0x12a)][_0x299123(0x1bd)]],_0x370a05=global[_0x299123(0x145)][stablecoins[_0x299123(0x16c)][_0x299123(0x1bd)]];}catch(_0xa45e08){await handleError(_0xa45e08,_0x299123(0x143));}return{'eur':Number(_0x30982a),'usd':Number(_0x370a05)};}function setStartDatePerformance(){const _0x1a7237=_0x23c8d3;if(config&&config[_0x1a7237(0x137)][0x0][_0x1a7237(0xdd)][_0x1a7237(0x11a)]!=0x0){const _0x1e512b=config[_0x1a7237(0x137)][0x0]['changes'];dbPerformance['get']('data')[_0x1a7237(0x129)]({'date':config['startdate']})[_0x1a7237(0x142)]({'coins':_0x1e512b})[_0x1a7237(0x112)]();}}async function recreateCoinResults(){const _0x216092=_0x23c8d3;let _0x4a9cf1;logHistory(_0x216092(0x1a9),_0x216092(0x1a7));let _0x1b483e=[];try{const _0x58b201=fns[_0x216092(0x1ab)](fns[_0x216092(0xe1)](config['startdate'][_0x216092(0xf6)](/\//g,'-')),_0x216092(0x1cd));for(const _0x49e35d of currentCoins){if(_0x49e35d[_0x216092(0x1bd)]!=config[_0x216092(0x169)]){let _0x25d6bd=0x0,_0x2d8ed1,_0x58c23c;_0x4a9cf1=await getAllEventOrders(_0x49e35d[_0x216092(0x1af)]);if(_0x4a9cf1[_0x216092(0x11a)]>0x0)_0x4a9cf1[_0x216092(0x1a2)](_0x2128db=>{const _0x27e974=_0x216092,_0xd9ca64=_0x49e35d[_0x27e974(0x1af)][_0x27e974(0xd6)](config[_0x27e974(0x169)]+'/');_0x1b483e['push']({'datetime':_0x2128db[_0x27e974(0x1c4)],'coin':_0x49e35d[_0x27e974(0x1bd)],'symbol':_0x49e35d[_0x27e974(0x1af)],'side':_0x2128db[_0x27e974(0x13a)],'reverse':_0xd9ca64,'amount':formatResult(_0x2128db[_0x27e974(0xe2)],0x8),'filled':formatResult(_0x2128db[_0x27e974(0xe2)],0x8),'price':formatResult(_0x2128db[_0x27e974(0x197)],0x8)}),_0x25d6bd=_0x2128db[_0x27e974(0x13a)]==_0x27e974(0x15c)?_0x25d6bd+_0x2128db[_0x27e974(0xe2)]:_0x25d6bd-_0x2128db[_0x27e974(0xe2)];if(!_0x58c23c)_0x58c23c=_0x2128db[_0x27e974(0x197)];});_0x2d8ed1=_0x49e35d[_0x216092(0x123)]-_0x25d6bd;let _0x281252;config[_0x216092(0x137)][_0x216092(0x1a2)](_0x2fcf65=>{const _0x6b236e=_0x216092;!_0x281252&&(_0x281252=_0x2fcf65[_0x6b236e(0xdd)][_0x6b236e(0x129)](_0x446ee8=>_0x446ee8[_0x6b236e(0x1bd)]==_0x49e35d[_0x6b236e(0x1bd)]),_0x281252&&(_0x2d8ed1=_0x281252[_0x6b236e(0x123)],_0x58c23c=_0x281252[_0x6b236e(0x197)]));});let _0x3ccf5b=dbCoinResults[_0x216092(0x171)](_0x216092(0x18e))[_0x216092(0x129)]({'coin':_0x49e35d['coin']})[_0x216092(0x1a5)]();_0x3ccf5b={'coin':_0x49e35d[_0x216092(0x1bd)],'number':_0x2d8ed1,'breakeven':_0x58c23c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x216092(0x171)]('coins')[_0x216092(0x129)]({'coin':_0x49e35d[_0x216092(0x1bd)]})[_0x216092(0x142)](_0x3ccf5b)[_0x216092(0x112)]();}}_0x1b483e['sort']((_0x3e2a1d,_0x37cdf9)=>_0x3e2a1d[_0x216092(0x1c4)]>_0x37cdf9['datetime']?0x1:_0x37cdf9[_0x216092(0x1c4)]>_0x3e2a1d[_0x216092(0x1c4)]?-0x1:0x0);let _0x1e57c0=0x0;for(let _0x312514 of _0x1b483e){await updateCoinResults(_0x312514,!![]);}logHistory('success',_0x216092(0xf5));}catch(_0x4e7cca){await handleError(_0x4e7cca,'recreateCoinResults()');}}async function getAllEventOrders(_0x2cf9fe){const _0x117882=_0x23c8d3;let _0x5ca0f5=[],_0x175eef=dbLogs[_0x117882(0x171)](_0x117882(0x148))['filter'](_0x1b8956=>{const _0x416d40=_0x117882,_0x522986=_0x1b8956[_0x416d40(0x14a)][_0x416d40(0xfc)]();return _0x522986[_0x416d40(0xd6)](_0x2cf9fe[_0x416d40(0xfc)]())&&(_0x522986[_0x416d40(0xd6)](_0x416d40(0x102))&&_0x522986[_0x416d40(0xd6)](_0x416d40(0xe6))||_0x522986[_0x416d40(0xd6)](_0x416d40(0xe2))&&_0x522986[_0x416d40(0xd6)](_0x416d40(0xe6)));})[_0x117882(0xee)]('time')[_0x117882(0x1a5)]();return _0x175eef[_0x117882(0x1a2)](_0x1204f3=>{const _0x38128a=_0x117882,_0x1eeaf5=_0x1204f3[_0x38128a(0x14a)]['includes'](_0x38128a(0x114))?_0x38128a(0x114):_0x38128a(0x15c),_0x3394b7=/#([0-9]|\.)+\s/i,_0xb7e15e=Number(_0x3394b7[_0x38128a(0x113)](_0x1204f3[_0x38128a(0x14a)])[0x0][_0x38128a(0xe5)](0x1)),_0x2d3a4e=/@([0-9]|\.)+$/i,_0x23f297=Number(_0x2d3a4e[_0x38128a(0x113)](_0x1204f3[_0x38128a(0x14a)])[0x0][_0x38128a(0xe5)](0x1));_0x5ca0f5[_0x38128a(0xcf)]({'datetime':_0x1204f3[_0x38128a(0x173)],'coin':symbolToCoin(_0x2cf9fe),'symbol':_0x2cf9fe,'side':_0x1eeaf5,'amount':_0xb7e15e,'filled':_0xb7e15e,'price':_0x23f297});}),_0x5ca0f5;}async function getAllOrders(_0xb86370,_0x4ae6b3){const _0x3b5190=_0x23c8d3;let _0x589c7d=[];while(_0x4ae6b3<exchange[_0x3b5190(0x10f)]()){const _0x455d53=0x1f4,_0x16f8e1=await exchange[_0x3b5190(0x191)](_0xb86370,_0x4ae6b3,_0x455d53);if(_0x16f8e1[_0x3b5190(0x11a)])_0x4ae6b3=_0x16f8e1[_0x16f8e1[_0x3b5190(0x11a)]-0x1][_0x3b5190(0xdf)]+0x1,_0x589c7d=_0x589c7d[_0x3b5190(0x1c0)](_0x16f8e1);else break;}return _0x589c7d;}async function validate24hChanges(){const _0x44a98a=_0x23c8d3;let _0xa6d20a;for(const _0x2882bf of currentCoins){if(_0x2882bf[_0x44a98a(0x1bd)]!=config[_0x44a98a(0x169)]){let _0x406834;_0x2882bf[_0x44a98a(0xcb)]?_0x406834=formatResult((0x1/(global[_0x44a98a(0x19a)][noslash(_0x2882bf[_0x44a98a(0x1af)])]/0x64+0x1)-0x1)*0x64,0x3):_0x406834=global[_0x44a98a(0x19a)][noslash(_0x2882bf[_0x44a98a(0x1af)])],_0x406834<config['change24h']&&(logHistory(_0x44a98a(0x118),_0x2882bf[_0x44a98a(0x1bd)]+_0x44a98a(0x1df)+_0x406834+'%'),logHistory(_0x44a98a(0x118),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x44a98a(0x118),_0x44a98a(0x1da)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x52f914=_0x23c8d3;let _0xd51b1d=dbLogs[_0x52f914(0x171)]('version')[_0x52f914(0x1a5)]();if(_0xd51b1d!='2.3.5'){dbLogs['set'](_0x52f914(0xdc),_0x52f914(0x108))['write']();let _0x2ccac3=[];const _0x303107=dbLogs[_0x52f914(0x171)](_0x52f914(0x148))[_0x52f914(0x1a5)]();_0x303107[_0x52f914(0x1a2)](_0x24739e=>{const _0x1dbb47=_0x52f914;_0x2ccac3[_0x1dbb47(0xcf)]({'time':_0x24739e[_0x1dbb47(0x173)],'type':_0x24739e[_0x1dbb47(0x14e)],'event':_0x24739e[_0x1dbb47(0x14a)]});}),dbLogs[_0x52f914(0x171)](_0x52f914(0x148))['assign'](_0x2ccac3)[_0x52f914(0x112)]();}let _0xdb2690=dbConfig[_0x52f914(0x171)](_0x52f914(0xdc))[_0x52f914(0x1a5)]();if(_0xdb2690!='2.3.5'){dbConfig[_0x52f914(0x1ad)](_0x52f914(0xdc),_0x52f914(0x108))[_0x52f914(0x112)]();let _0x6af539=dbConfig[_0x52f914(0x171)](_0x52f914(0x1b7))[_0x52f914(0x129)]({'botID':botID})[_0x52f914(0x1a5)]();if(_0x6af539){let _0x26c0f7=[];_0x6af539[_0x52f914(0x1a3)][_0x52f914(0x1a2)](_0x3f63b9=>{const _0x30cfe6=_0x52f914;_0x26c0f7[_0x30cfe6(0xcf)]({'coin':_0x3f63b9[_0x30cfe6(0x1bd)],'number':_0x3f63b9['startnumber'],'price':_0x3f63b9['startprice']}),delete _0x3f63b9[_0x30cfe6(0x134)],delete _0x3f63b9['startprice'];});if(_0x26c0f7[_0x52f914(0x11a)]!==0x0)fs['writeFile'](configbackuppath+(_0x52f914(0x111)+botID+_0x52f914(0x19c)),JSON[_0x52f914(0x17b)](_0x26c0f7,null,0x4),function(_0x254ca3){if(_0x254ca3){}});const _0x45fb42=(_0x400129,_0x3fe700)=>{const _0x235dcd=_0x52f914;let _0x16c927=[];_0x3fe700[_0x235dcd(0x1a2)](_0x5002f9=>{const _0x1ccd60=_0x235dcd,_0x1df479=_0x400129[_0x1ccd60(0x129)](_0x971ab0=>_0x971ab0[_0x1ccd60(0x1bd)]==_0x5002f9['coin']);if(!_0x1df479)_0x16c927[_0x1ccd60(0xcf)](_0x5002f9);});let _0xcd3f9f=[];return _0x400129[_0x235dcd(0x1a2)](_0x535fa3=>{const _0x501afe=_0x235dcd,_0x4ca74f=_0x3fe700[_0x501afe(0x129)](_0x3aa5f4=>_0x3aa5f4[_0x501afe(0x1bd)]==_0x535fa3[_0x501afe(0x1bd)]);if(!_0x4ca74f||_0x4ca74f[_0x501afe(0x123)]==0x0&&_0x535fa3[_0x501afe(0x123)]!=0x0)_0xcd3f9f['push'](_0x535fa3);}),{'missingDay1':_0x16c927,'notInDay2':_0xcd3f9f};},_0x3d97e5=dbPerformance[_0x52f914(0x171)](_0x52f914(0x1ae))[_0x52f914(0x103)]()[_0x52f914(0x1a5)]();if(_0x3d97e5[_0x52f914(0x11a)]>0x1){const {missingDay1:_0x546b73,notInDay2:_0x33dc6d}=_0x45fb42(_0x26c0f7,_0x3d97e5[0x1][_0x52f914(0x18e)]);_0x26c0f7=[..._0x26c0f7,..._0x546b73],_0x33dc6d[_0x52f914(0x1a2)](_0x3bbb10=>{const _0x3104e=_0x52f914;let _0x3c2b70=_0x26c0f7[_0x3104e(0x1bb)](_0x8fabde=>_0x8fabde[_0x3104e(0x1bd)]==_0x3bbb10['coin']);_0x3c2b70!=-0x1&&_0x26c0f7[_0x3104e(0x1d6)](_0x3c2b70,0x1);});}_0x26c0f7[_0x52f914(0x161)]((_0x5a66e6,_0xd1e34a)=>_0x5a66e6[_0x52f914(0x1bd)]>_0xd1e34a[_0x52f914(0x1bd)]?0x1:_0xd1e34a[_0x52f914(0x1bd)]>_0x5a66e6[_0x52f914(0x1bd)]?-0x1:0x0);let _0x172f8e=[{'date':_0x6af539[_0x52f914(0xef)],'changes':_0x26c0f7}];_0x3d97e5[_0x52f914(0x11a)]>0x2&&_0x3d97e5[_0x52f914(0x1a2)]((_0x37e318,_0x8b029a)=>{const _0x3c9ddd=_0x52f914;if(_0x8b029a>0x0&&_0x8b029a<_0x3d97e5['length']-0x1){const {missingDay1:_0x3370c9,notInDay2:_0x341c12}=_0x45fb42(_0x3d97e5[_0x8b029a][_0x3c9ddd(0x18e)],_0x3d97e5[_0x8b029a+0x1]['coins']);_0x26c0f7=[],(_0x3370c9['length']!=0x0||_0x341c12[_0x3c9ddd(0x11a)]!=0x0)&&(_0x3370c9[_0x3c9ddd(0x11a)]!=0x0&&_0x26c0f7[_0x3c9ddd(0xcf)](..._0x3370c9),_0x341c12['length']!=0x0&&(_0x341c12[_0x3c9ddd(0x1a2)](_0x409f92=>{const _0x4938d3=_0x3c9ddd;_0x409f92['number']=-_0x409f92[_0x4938d3(0x123)];}),_0x26c0f7[_0x3c9ddd(0xcf)](..._0x341c12)),_0x26c0f7['sort']((_0x138877,_0x5deb3e)=>_0x138877[_0x3c9ddd(0x1bd)]>_0x5deb3e[_0x3c9ddd(0x1bd)]?0x1:_0x5deb3e[_0x3c9ddd(0x1bd)]>_0x138877['coin']?-0x1:0x0),_0x172f8e['push']({'date':_0x3d97e5[_0x8b029a+0x1][_0x3c9ddd(0x1ea)],'changes':_0x26c0f7}));}}),dbConfig['get'](_0x52f914(0x1b7))['find']({'botID':botID})[_0x52f914(0x142)]({..._0x6af539,'liquidity':_0x172f8e})[_0x52f914(0x112)]();}}config=getConfiguration(botID);let _0xde8802=dbPerformance['get'](_0x52f914(0xdc))[_0x52f914(0x1a5)]();_0xde8802!=_0x52f914(0x108)&&(dbPerformance[_0x52f914(0x1ad)](_0x52f914(0xdc),_0x52f914(0x108))[_0x52f914(0x112)](),setStartDatePerformance());let _0x2bf171=dbCoinResults['get'](_0x52f914(0xdc))[_0x52f914(0x1a5)]();if(_0x2bf171!='2.5.0'){dbCoinResults[_0x52f914(0x1ad)]('version',_0x52f914(0x188))['write']();let _0x421068=dbCoinResults[_0x52f914(0x171)]('coins')['value']();if(_0x421068[_0x52f914(0x11a)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x378c39){const _0x1a09d8=_0x23c8d3;let _0x5687d7=dbConfig[_0x1a09d8(0x171)]('bot')[_0x1a09d8(0x129)]({'botID':_0x378c39})[_0x1a09d8(0x1a5)]();if(_0x5687d7){let _0xb4c079=![];typeof _0x5687d7[_0x1a09d8(0xfb)]==_0x1a09d8(0x1c7)&&(_0x5687d7={..._0x5687d7,'threshold':Number(_0x5687d7[_0x1a09d8(0xfb)])},_0xb4c079=!![]),_0x5687d7[_0x1a09d8(0x160)]==null&&(_0x5687d7={..._0x5687d7,'change24h':-0x14},_0xb4c079=!![]),_0xb4c079&&(_0x5687d7={'botID':_0x5687d7[_0x1a09d8(0x109)],'exchange':_0x5687d7[_0x1a09d8(0x11e)],'apiKey':_0x5687d7['apiKey'],'apiSecret':_0x5687d7['apiSecret'],'basecoin':_0x5687d7['basecoin'],'botname':_0x5687d7[_0x1a09d8(0xc9)],'showname':_0x5687d7[_0x1a09d8(0x189)],'threshold':_0x5687d7['threshold'],'ordertype':_0x5687d7[_0x1a09d8(0x1a4)],'timeout':_0x5687d7[_0x1a09d8(0x1bf)],'startdate':_0x5687d7[_0x1a09d8(0xef)],'recreate':_0x5687d7[_0x1a09d8(0x14c)],'timeshift':_0x5687d7['timeshift'],'headless':_0x5687d7[_0x1a09d8(0x19e)],'cooldown':_0x5687d7[_0x1a09d8(0x163)],'change24h':_0x5687d7[_0x1a09d8(0x160)],'emojibuy':_0x5687d7[_0x1a09d8(0xca)],'emojisell':_0x5687d7[_0x1a09d8(0x193)],'portfolio':_0x5687d7[_0x1a09d8(0x1a3)],'liquidity':_0x5687d7[_0x1a09d8(0x137)]},dbConfig[_0x1a09d8(0x171)](_0x1a09d8(0x1b7))['remove']()[_0x1a09d8(0x112)](),dbConfig[_0x1a09d8(0x171)](_0x1a09d8(0x1b7))[_0x1a09d8(0xcf)](_0x5687d7)[_0x1a09d8(0x112)]());}else _0x5687d7={'botID':_0x378c39,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':_0x1a09d8(0x121)+_0x378c39,'showname':![],'threshold':0x3,'ordertype':_0x1a09d8(0x102),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1a09d8(0x107)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x5687d7;}function emittedConfiguration(){const _0x4e573f=_0x23c8d3;let _0x552c8e;return config[_0x4e573f(0x186)]==''?_0x552c8e=config:_0x552c8e={...config,'apiKey':_0x4e573f(0x139),'apiSecret':_0x4e573f(0x139)},_0x552c8e;}function getSettings(){const _0x294d05=_0x23c8d3;return dbSettings['get'](_0x294d05(0xff))[_0x294d05(0x1a5)]();}function getSecure(){const _0x5ee9ed=_0x23c8d3;return dbSecure['get'](_0x5ee9ed(0x1c1))['value']()||{};}function updateTimeshift(_0x48e388){const _0x2aa2cc=_0x23c8d3;let _0x291c26=dbConfig[_0x2aa2cc(0x171)](_0x2aa2cc(0x1b7))[_0x2aa2cc(0x129)]({'botID':botID})[_0x2aa2cc(0x1a5)]();_0x291c26&&dbConfig['get'](_0x2aa2cc(0x1b7))[_0x2aa2cc(0x129)]({'botID':botID})[_0x2aa2cc(0x142)]({'timeshift':_0x48e388})[_0x2aa2cc(0x112)](),config[_0x2aa2cc(0x107)]=_0x48e388,proxyEmit(_0x2aa2cc(0x166),emittedConfiguration());}async function storeConfiguration(_0x1bece5){const _0x1ba60f=_0x23c8d3;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2b52e1=dbConfig['get'](_0x1ba60f(0x1b7))[_0x1ba60f(0x129)]({'botID':botID})[_0x1ba60f(0x1a5)]();_0x1bece5={..._0x1bece5,'apiKey':crypt['decrypt'](secure[_0x1ba60f(0x1d0)],_0x1bece5[_0x1ba60f(0x186)])[_0x1ba60f(0xed)],'apiSecret':crypt[_0x1ba60f(0x18a)](secure['privateKey'],_0x1bece5[_0x1ba60f(0x122)])[_0x1ba60f(0xed)]};if(_0x2b52e1){if(_0x1bece5['apiKey']==_0x1ba60f(0x139))_0x1bece5['apiKey']=config[_0x1ba60f(0x186)];if(_0x1bece5[_0x1ba60f(0x122)]==_0x1ba60f(0x139))_0x1bece5['apiSecret']=config[_0x1ba60f(0x122)];dbConfig['get'](_0x1ba60f(0x1b7))[_0x1ba60f(0x129)]({'botID':botID})[_0x1ba60f(0x142)](_0x1bece5)[_0x1ba60f(0x112)]();}else dbConfig['get'](_0x1ba60f(0x1b7))[_0x1ba60f(0xcf)](_0x1bece5)['write'](),process[_0x1ba60f(0x1cf)]({'status':'enabled','live':_0x1ba60f(0x100)},_0x3439b2=>{});config={..._0x1bece5},setStartDatePerformance(),process[_0x1ba60f(0x1cf)]({'botname':_0x1bece5['botname']},_0x1a143e=>{}),updateBotManager();const _0x39026b=getNormalizedPerformance();getStartingBalances(_0x39026b),emitPerformance(_0x39026b),proxyEmit('configuration-stored'),await initCoinResults(),reset();}async function storeHeadless(_0x2c60d1){const _0x4b0854=_0x23c8d3,_0x46b099={...config,'headless':_0x2c60d1[_0x4b0854(0x19e)]};let _0x404b87=dbConfig[_0x4b0854(0x171)](_0x4b0854(0x1b7))[_0x4b0854(0x129)]({'botID':botID})[_0x4b0854(0x1a5)]();_0x404b87&&dbConfig[_0x4b0854(0x171)](_0x4b0854(0x1b7))[_0x4b0854(0x129)]({'botID':botID})[_0x4b0854(0x142)](_0x46b099)[_0x4b0854(0x112)](),config={..._0x46b099},updateBotManager(),proxyEmit(_0x4b0854(0x166),emittedConfiguration());}function noslash(_0x24c6b1){const _0x815cd=_0x23c8d3;return _0x24c6b1[_0x815cd(0xf6)]('/','');}async function updateNumberCoins(_0x15c7f7){const _0x5e1417=_0x23c8d3;_0x15c7f7[_0x5e1417(0x1e6)]&&_0x15c7f7[_0x5e1417(0x1e6)]==_0x5e1417(0x1dd)&&(_0x15c7f7[_0x5e1417(0x1ef)]!=lastOutboundEventTime&&(lastOutboundEventTime=_0x15c7f7[_0x5e1417(0x1ef)],currentCoins=await getCoins(!![])));if(_0x15c7f7['eventType']&&_0x15c7f7[_0x5e1417(0x1e6)]==_0x5e1417(0xe0)){if(_0x15c7f7[_0x5e1417(0x1b2)]==_0x5e1417(0x17d)){if(lastOrders)lastOrders[_0x5e1417(0x1a2)](async _0xd9ad69=>{const _0x37a43d=_0x5e1417;_0xd9ad69[_0x37a43d(0x19f)]==_0x15c7f7[_0x37a43d(0x19f)]&&_0xd9ad69['filled']==0x0&&(_0xd9ad69[_0x37a43d(0x197)]=_0x15c7f7[_0x37a43d(0xf8)]/_0x15c7f7[_0x37a43d(0x174)],_0xd9ad69[_0x37a43d(0xe2)]=_0x15c7f7[_0x37a43d(0x174)],_0xd9ad69[_0x37a43d(0x146)]={'cost':_0x15c7f7['commission'],'currency':_0x15c7f7[_0x37a43d(0x11c)]},await validateOrders(),await updateCoinResults(_0xd9ad69));});}}}async function getCoins(_0x2d9771=![],_0x424306=!![],_0x49e956=config[_0x23c8d3(0x169)]){const _0x12b2e7=_0x23c8d3;let _0x48a76f,_0xbdd7e5=[],_0xc6413d=[],_0x36ad59=[];try{_0x48a76f=await exchange[_0x12b2e7(0xe4)](),mybalances=_0x48a76f['total'];if(!_0x424306)for(const [_0x2cfc25,_0xed40b]of Object[_0x12b2e7(0x130)](mybalances)){_0x36ad59['push'](_0x2cfc25);}else config['portfolio'][_0x12b2e7(0x1a2)](_0x11ab6c=>{const _0x2e227c=_0x12b2e7;if(!_0x11ab6c[_0x2e227c(0x1ee)])_0x36ad59['push'](_0x11ab6c[_0x2e227c(0x1bd)]);});if(_0x49e956=='')for(const [_0x2aa2fc,_0x225aeb]of Object[_0x12b2e7(0x130)](mybalances)){_0x225aeb[_0x12b2e7(0x116)]()!=0x0&&_0xc6413d[_0x12b2e7(0xcf)]({'coin':_0x2aa2fc});}else{let _0x1d6990=![],_0x134064;allOpenOrders=[];for(const [_0x55a32a,_0x29be12]of Object[_0x12b2e7(0x130)](mybalances)){if(_0x36ad59[_0x12b2e7(0xd6)](_0x55a32a)){const _0x3d62eb=config[_0x12b2e7(0x1a3)][_0x12b2e7(0x129)](_0x15baa6=>_0x15baa6[_0x12b2e7(0x1bd)]==_0x55a32a),_0xf5d7db=_0x55a32a+'/'+_0x49e956,_0x4ce161=_0x49e956+'/'+_0x55a32a;_0x1d6990=![];if((_0x29be12[_0x12b2e7(0x116)]()!=0x0||_0x3d62eb)&&(allSymbols[_0x12b2e7(0xd6)](_0xf5d7db)||_0x55a32a==_0x49e956))_0x55a32a!=_0x49e956&&(_0xbdd7e5[_0x12b2e7(0xcf)](_0xf5d7db),_0x2d9771&&(_0x134064=await exchange[_0x12b2e7(0x1b5)](_0xf5d7db),_0x134064[_0x12b2e7(0x11a)]>0x0&&(_0x1d6990=!![]))),_0xc6413d[_0x12b2e7(0xcf)]({'coin':_0x55a32a,'symbol':_0xf5d7db,'reverse':![],'number':Math[_0x12b2e7(0x1e8)](_0x29be12+(_0x3d62eb&&_0x3d62eb[_0x12b2e7(0x12c)]||0x0),0x0),'order':_0x1d6990});else(_0x29be12[_0x12b2e7(0x116)]()!=0x0||_0x3d62eb)&&allSymbols[_0x12b2e7(0xd6)](_0x4ce161)&&(_0x55a32a!=_0x49e956&&(_0xbdd7e5[_0x12b2e7(0xcf)](_0x4ce161),_0x2d9771&&(_0x134064=await exchange[_0x12b2e7(0x1b5)](_0x4ce161),_0x134064[_0x12b2e7(0x11a)]>0x0&&(_0x1d6990=!![]))),_0xc6413d[_0x12b2e7(0xcf)]({'coin':_0x55a32a,'symbol':_0x4ce161,'reverse':!![],'number':Math['max'](_0x29be12+(_0x3d62eb&&_0x3d62eb['offset']||0x0),0x0),'order':_0x1d6990}));}_0x1d6990&&allOpenOrders[_0x12b2e7(0xcf)](_0x134064[0x0]);}_0x2d9771&&allOpenOrders['length']==0x0&&(lockOrders&&validateOrders('no\x20open\x20orders'));}}catch(_0x2a76c8){if(!_0x424306){if(_0x2a76c8[_0x12b2e7(0x116)]()[_0x12b2e7(0xd6)]('API-key\x20format\x20invalid'))return logHistory(_0x12b2e7(0x118),_0x12b2e7(0x156)),![];else{if(_0x2a76c8[_0x12b2e7(0x116)]()[_0x12b2e7(0xd6)](_0x12b2e7(0xcd)))return logHistory('error',_0x12b2e7(0x1c5)),![];else{if(_0x2a76c8[_0x12b2e7(0x116)]()[_0x12b2e7(0xd6)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x12b2e7(0x118),_0x12b2e7(0x182)),![];else await handleError(_0x2a76c8,'getCoins()');}}}else await handleError(_0x2a76c8,_0x12b2e7(0x1b1));}return _0xc6413d;}async function getPortfolio(_0x429593){const _0x4c70c3=_0x23c8d3;let _0x175462=[],_0x4e90d2=[],_0x1d91b6,_0x398be=[],_0x3e7b99,_0x4b597b;_0x429593[_0x4c70c3(0x186)]==='************'||_0x429593['apiSecret']===_0x4c70c3(0x139)?(_0x3e7b99=config[_0x4c70c3(0x186)],_0x4b597b=config[_0x4c70c3(0x122)]):(_0x3e7b99=_0x429593[_0x4c70c3(0x186)],_0x4b597b=_0x429593[_0x4c70c3(0x122)]);await initExchange(_0x3e7b99,_0x4b597b);let _0x59a468=await loadSymbols();if(_0x59a468){_0x398be=await getCoins(![],![],_0x429593['basecoin']);if(_0x398be===![])proxyEmit(_0x4c70c3(0x1a3),![]);else{if(_0x429593['basecoin']=='')proxyEmit(_0x4c70c3(0x1a3),_0x398be);else{_0x398be['forEach'](_0x3a55b0=>{const _0x4574fb=_0x4c70c3;if(_0x3a55b0[_0x4574fb(0x1bd)]!=_0x429593[_0x4574fb(0x169)])_0x175462[_0x4574fb(0xcf)](_0x3a55b0[_0x4574fb(0x1af)]);});try{_0x4e90d2=await exchange['fetchTickers'](_0x175462);}catch(_0x403999){await handleError(_0x403999,_0x4c70c3(0x14d));}_0x398be[_0x4c70c3(0x1a2)](_0x2afc72=>{const _0x3645fc=_0x4c70c3;_0x2afc72[_0x3645fc(0x1bd)]!=_0x429593[_0x3645fc(0x169)]?_0x1d91b6=_0x2afc72[_0x3645fc(0xcb)]?0x1/_0x4e90d2[_0x2afc72[_0x3645fc(0x1af)]]['last']:_0x4e90d2[_0x2afc72['symbol']]['last']:_0x1d91b6=0x1,_0x2afc72[_0x3645fc(0x197)]=formatResult(_0x1d91b6,0x8);}),proxyEmit(_0x4c70c3(0x1a3),_0x398be);}}}else proxyEmit(_0x4c70c3(0x1a3),![]);}function checkMinimums(_0x47979d){const _0x243693=_0x23c8d3;let _0x147aae=!![];const _0x139559=!_0x47979d['reverse']?markets[_0x47979d[_0x243693(0x1af)]]['limits'][_0x243693(0x135)][_0x243693(0x15e)]:markets[_0x47979d[_0x243693(0x1af)]][_0x243693(0x194)][_0x243693(0x1a6)][_0x243693(0x15e)],_0x1b503d=!_0x47979d['reverse']?markets[_0x47979d[_0x243693(0x1af)]][_0x243693(0x194)]['cost'][_0x243693(0x15e)]:markets[_0x47979d[_0x243693(0x1af)]]['limits'][_0x243693(0x135)][_0x243693(0x15e)],_0xa26f0c=markets[_0x47979d[_0x243693(0x1af)]]['precision'][_0x243693(0x135)];_0x47979d['trade']=formatResultTruncate(_0x47979d[_0x243693(0xda)],_0xa26f0c);if(Math[_0x243693(0xe3)](_0x47979d[_0x243693(0xda)])<_0x139559)_0x147aae=![];if(Math[_0x243693(0xe3)](_0x47979d[_0x243693(0xda)])*_0x47979d['last']<_0x1b503d)_0x147aae=![];if(_0x47979d[_0x243693(0x13a)]==_0x243693(0x114)){let _0xb8471c=config[_0x243693(0x1a3)]['find'](_0x3e3f65=>_0x3e3f65[_0x243693(0x1bd)]==_0x47979d[_0x243693(0x1bd)]);if(_0xb8471c['offset']>0x0){if(Math['abs'](_0x47979d['trade'])>_0x47979d[_0x243693(0x123)]-_0xb8471c[_0x243693(0x12c)])_0x147aae=![];}else{if(Math['abs'](_0x47979d['trade'])>_0x47979d[_0x243693(0x123)])_0x147aae=![];}}if(_0x47979d[_0x243693(0x13a)]==_0x243693(0x15c)){let _0x3525cd=config['portfolio'][_0x243693(0x129)](_0x580ec7=>_0x580ec7[_0x243693(0x1bd)]==config[_0x243693(0x169)]),_0x3ad7ae=currentCoins[_0x243693(0x129)](_0x26d14c=>_0x26d14c['coin']==config[_0x243693(0x169)]);if(_0x3525cd[_0x243693(0x12c)]>0x0){if(Math[_0x243693(0xe3)](_0x47979d[_0x243693(0xda)])*_0x47979d['last']>_0x3ad7ae[_0x243693(0x123)]-_0x3525cd[_0x243693(0x12c)])_0x147aae=![];}else{if(Math[_0x243693(0xe3)](_0x47979d[_0x243693(0xda)])*_0x47979d[_0x243693(0x1aa)]>_0x3ad7ae[_0x243693(0x123)])_0x147aae=![];}}return _0x147aae;}async function getBalances(){const _0x4cf62f=_0x23c8d3;let _0x2fb48f=0x0,_0x37cc84;const _0x47c210=config[_0x4cf62f(0xfb)];if(config[_0x4cf62f(0x19e)]&&config[_0x4cf62f(0x160)]<0x0)await validate24hChanges();currentCoins[_0x4cf62f(0x1a2)](_0x4c57fd=>{const _0x53a2e8=_0x4cf62f;if(_0x4c57fd['coin']!=config[_0x53a2e8(0x169)]){let _0x3ebfc7=global[_0x53a2e8(0x145)][noslash(_0x4c57fd[_0x53a2e8(0x1af)])];_0x37cc84=_0x4c57fd[_0x53a2e8(0xcb)]?0x1/_0x3ebfc7:_0x3ebfc7;}else _0x37cc84=0x1;let _0x27a82f=_0x4c57fd['number']*_0x37cc84;_0x2fb48f+=_0x27a82f,_0x4c57fd[_0x53a2e8(0x1aa)]=formatResult(Number(_0x37cc84),0x8),_0x4c57fd['value']=_0x27a82f;}),currentCoins[_0x4cf62f(0x1a2)](_0x180487=>{const _0x49e095=_0x4cf62f;let _0x214821=config[_0x49e095(0x1a3)][_0x49e095(0x129)](_0x315a5a=>_0x315a5a[_0x49e095(0x1bd)]==_0x180487[_0x49e095(0x1bd)]),_0x99f515=Number(_0x214821[_0x49e095(0xe7)]),_0x5f00db=_0x180487[_0x49e095(0x1a5)]/_0x2fb48f*0x64,_0x3f41fd=_0x99f515*_0x2fb48f/0x64/_0x180487['last']-_0x180487[_0x49e095(0x123)];_0x180487[_0x49e095(0xe7)]=formatResult(_0x5f00db,0x3),_0x180487[_0x49e095(0x110)]=formatResult(_0x99f515,0x3),_0x180487[_0x49e095(0xda)]=formatResult(_0x3f41fd,0x8),_0x180487[_0x49e095(0x13a)]='',_0x180487[_0x49e095(0x10a)]=![];if(_0x180487[_0x49e095(0x1bd)]!=config[_0x49e095(0x169)]){if(_0x180487[_0x49e095(0xe7)]>_0x99f515)_0x180487['side']='sell',_0x180487['valid']=checkMinimums(_0x180487);else _0x180487['distribution']<_0x99f515&&(_0x180487[_0x49e095(0x13a)]='buy',_0x180487[_0x49e095(0x10a)]=checkMinimums(_0x180487));}_0x180487[_0x49e095(0xde)]=_0x180487[_0x49e095(0xe7)]/_0x180487['target']-0x1;}),currentCoins[_0x4cf62f(0x161)]((_0x3dfb61,_0x3e48b1)=>_0x3dfb61[_0x4cf62f(0xde)]<_0x3e48b1[_0x4cf62f(0xde)]?0x1:_0x3e48b1['delta']<_0x3dfb61[_0x4cf62f(0xde)]?-0x1:0x0);const _0x5849b7=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5849b7['eur'],'usd':_0x5849b7[_0x4cf62f(0x16c)],'portfolio':JSON[_0x4cf62f(0x17b)](currentCoins),'threshold':_0x47c210},proxyEmit(_0x4cf62f(0x162),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4cf62f(0x19e)])headlessMode({'portfolio':currentCoins,'threshold':_0x47c210});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x47c210});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x13ddbe=_0x23c8d3;if(!lastBalances)return;let _0x3b7eef=[],_0x3d247a,_0x18bd1d=JSON[_0x13ddbe(0x1b6)](lastBalances[_0x13ddbe(0x1a3)]);_0x18bd1d[_0x13ddbe(0x161)]((_0x5ca39c,_0x4a2f2c)=>_0x5ca39c[_0x13ddbe(0x1bd)]>_0x4a2f2c['coin']?0x1:_0x4a2f2c[_0x13ddbe(0x1bd)]>_0x5ca39c['coin']?-0x1:0x0),_0x18bd1d[_0x13ddbe(0x1a2)](_0x33ba55=>{const _0x305c6a=_0x13ddbe;let _0x112c43={'coin':_0x33ba55['coin'],'number':_0x33ba55[_0x305c6a(0x123)],'price':_0x33ba55['last']};_0x3b7eef['push'](_0x112c43);});const _0x3da9ea=await getFiat();_0x3d247a={'date':lastBalances[_0x13ddbe(0x173)][_0x13ddbe(0xcc)]('\x20')[0x0],'eur':_0x3da9ea[_0x13ddbe(0x12a)],'usd':_0x3da9ea['usd'],'coins':_0x3b7eef};let _0x53246b=dbPerformance['get']('data')[_0x13ddbe(0x129)]({'date':_0x3d247a[_0x13ddbe(0x1ea)]})['value']();_0x53246b?_0x3d247a[_0x13ddbe(0x1ea)]!=config['startdate']&&dbPerformance['get'](_0x13ddbe(0x1ae))[_0x13ddbe(0x129)]({'date':_0x3d247a[_0x13ddbe(0x1ea)]})['assign'](_0x3d247a)[_0x13ddbe(0x112)]():dbPerformance[_0x13ddbe(0x171)](_0x13ddbe(0x1ae))[_0x13ddbe(0xcf)](_0x3d247a)[_0x13ddbe(0x112)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x367975=_0x23c8d3;let _0x2ab0bc=[];if(dbPerformance['has'](_0x367975(0x1ae))[_0x367975(0x1a5)]()){let _0x380272=dbPerformance[_0x367975(0x171)]('data')['cloneDeep']()[_0x367975(0xee)](_0x367975(0x1ea))['value'](),_0x2e0224=[...config['liquidity']];_0x2e0224[_0x367975(0x161)]((_0x469ad6,_0x472c93)=>_0x469ad6['date']>_0x472c93[_0x367975(0x1ea)]?-0x1:_0x472c93[_0x367975(0x1ea)]>_0x469ad6[_0x367975(0x1ea)]?0x1:0x0);let _0x588513=0x1,_0x4292f7=[],_0x3feaeb=0x0;_0x380272[_0x367975(0xe5)]()[_0x367975(0xcb)]()[_0x367975(0x1a2)]((_0x1bf7e1,_0x4b20a8)=>{const _0x252883=_0x367975;if(_0x2e0224[_0x3feaeb]){if(_0x380272[_0x380272['length']-_0x4b20a8]&&_0x2e0224[_0x3feaeb][_0x252883(0x1ea)]==_0x380272[_0x380272[_0x252883(0x11a)]-_0x4b20a8][_0x252883(0x1ea)]){if(_0x4b20a8<_0x380272[_0x252883(0x11a)]){let _0x108526=0x0,_0x20ca24=0x0;_0x380272[_0x380272[_0x252883(0x11a)]-_0x4b20a8][_0x252883(0x18e)][_0x252883(0x1a2)](_0xe73a50=>{const _0x34e2bc=_0x252883;_0x20ca24+=_0xe73a50[_0x34e2bc(0x123)]*_0xe73a50[_0x34e2bc(0x197)];}),_0x2e0224[_0x3feaeb][_0x252883(0xdd)][_0x252883(0x1a2)](_0x474fa3=>{const _0xd8b863=_0x252883;_0x108526+=_0x474fa3[_0xd8b863(0x123)]*_0x474fa3['price'];}),_0x588513*=_0x108526/(_0x20ca24-_0x108526)+0x1;}_0x3feaeb++;}}let _0x4d1056=0x0;_0x1bf7e1[_0x252883(0x18e)][_0x252883(0x1a2)](_0x2734ae=>{const _0x2991cb=_0x252883;_0x4d1056+=_0x2734ae[_0x2991cb(0x123)]*_0x2734ae[_0x2991cb(0x197)];}),_0x4292f7[_0x380272[_0x252883(0x11a)]-_0x4b20a8-0x1]=_0x4d1056*(_0x588513-0x1);});let _0x248d79=[];_0x2e0224=[...config[_0x367975(0x137)]]||[];let _0x452d10=0x0;_0x3feaeb=0x0,_0x380272[_0x367975(0x1a2)]((_0x2e667b,_0x4244c5)=>{const _0x46d10e=_0x367975;if(_0x2e0224[_0x3feaeb]){const _0x2d0a37=fns[_0x46d10e(0x1b6)](_0x2e0224[_0x3feaeb]['date'],'yyyy/MM/dd',new Date()),_0x4fd87=fns[_0x46d10e(0x1b6)](_0x2e667b['date'],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x2d0a37,_0x4fd87)){let _0x4b1b81=0x0;_0x2e0224[_0x3feaeb][_0x46d10e(0xdd)]['forEach'](_0x24bc8f=>{const _0x34c905=_0x46d10e;!_0x248d79[_0x24bc8f['coin']]?_0x248d79[_0x24bc8f[_0x34c905(0x1bd)]]=_0x24bc8f['number']:(_0x4b1b81=_0x248d79[_0x24bc8f['coin']],_0x248d79[_0x24bc8f[_0x34c905(0x1bd)]]+=_0x24bc8f['number']);const _0x20b5a8=_0x2e667b[_0x34c905(0x18e)][_0x34c905(0x129)](_0x4607b2=>_0x4607b2[_0x34c905(0x1bd)]==_0x24bc8f['coin']);(!_0x20b5a8||_0x20b5a8[_0x34c905(0x123)]==0x0)&&(_0x452d10+=(-_0x24bc8f[_0x34c905(0x123)]-_0x4b1b81)*_0x24bc8f[_0x34c905(0x197)]);}),_0x3feaeb++;}}_0x2e667b[_0x46d10e(0x18e)][_0x46d10e(0x1a2)]((_0x10711b,_0x2a0a04)=>{const _0x58fe8a=_0x46d10e;_0x248d79[_0x10711b['coin']]&&(_0x10711b={..._0x10711b,'initial':_0x248d79[_0x10711b['coin']]}),_0x2e667b[_0x58fe8a(0x18e)][_0x2a0a04]=_0x10711b;}),_0x2ab0bc[_0x46d10e(0xcf)]({'date':_0x2e667b[_0x46d10e(0x1ea)],'eur':_0x2e667b[_0x46d10e(0x12a)],'usd':_0x2e667b[_0x46d10e(0x16c)],'offset':_0x4292f7[_0x4244c5],'netoffset':_0x452d10,'coins':_0x2e667b[_0x46d10e(0x18e)]});});}return _0x2ab0bc;}function emitPerformance(_0x39128b){const _0x2d85d1=_0x23c8d3;_0x39128b[_0x2d85d1(0x11a)]!==0x0?(proxyEmit(_0x2d85d1(0xf1),_0x39128b),lastPerformanceEmitted=getDate()):proxyEmit(_0x2d85d1(0xf1),[]);}function getPerf(_0x13173f,_0x515b22){const _0x5a9610=_0x23c8d3;let _0x7d778d=0x0,_0x352ac5=0x0,_0x5da18a=0x0;_0x13173f[_0x5a9610(0x18e)][_0x5a9610(0x1a2)](_0x24b680=>{const _0x171880=_0x5a9610;_0x7d778d+=_0x24b680[_0x171880(0x123)]*_0x24b680['price'];});_0x515b22&&(_0x7d778d+=_0x13173f['offset']);if(config['basecoin']===_0x5a9610(0x1a0)||config['basecoin']===_0x5a9610(0x10e))_0x352ac5=_0x7d778d*_0x13173f[_0x5a9610(0x12a)],_0x5da18a=_0x7d778d*_0x13173f[_0x5a9610(0x16c)];else{if(config['basecoin']===_0x5a9610(0x10b)||config[_0x5a9610(0x169)]===_0x5a9610(0x1e3))_0x352ac5=_0x7d778d*_0x13173f[_0x5a9610(0x12a)]/_0x13173f[_0x5a9610(0x16c)],_0x5da18a=_0x7d778d;else config[_0x5a9610(0x169)]==='EUR'&&(_0x352ac5=_0x7d778d,_0x5da18a=_0x7d778d*_0x13173f[_0x5a9610(0x16c)]/_0x13173f[_0x5a9610(0x12a)]);}return[_0x7d778d,_0x352ac5,_0x5da18a];}async function getStartingBalances(_0x58d6af,_0x4eaa06=!![]){const _0x21ecc9=_0x23c8d3;if(_0x58d6af[_0x21ecc9(0x11a)]!==0x0){const [_0x260b92,_0x393c1d,_0x5681ef]=getPerf(_0x58d6af[0x0],!![]);let _0x4b0a7f=[];config[_0x21ecc9(0x1a3)]['forEach'](_0x4ebdac=>{const _0x52e1b0=_0x21ecc9;let _0x192f87=0x0,_0x50ed41;config[_0x52e1b0(0x137)]['forEach'](_0x2a7493=>{const _0xca0d79=_0x52e1b0;let _0x240324=_0x2a7493[_0xca0d79(0xdd)]['find'](_0x755227=>_0x755227[_0xca0d79(0x1bd)]==_0x4ebdac[_0xca0d79(0x1bd)]);if(_0x240324){_0x192f87+=_0x240324[_0xca0d79(0x123)];if(!_0x50ed41)_0x50ed41=_0x240324[_0xca0d79(0x197)];}}),_0x4b0a7f[_0x52e1b0(0xcf)]({'coin':_0x4ebdac[_0x52e1b0(0x1bd)],'number':_0x192f87,'initialprice':_0x50ed41});});const _0x1264c3={'basecoin':_0x260b92,'eur':_0x393c1d,'usd':_0x5681ef,'coins':_0x4b0a7f};if(_0x4eaa06)proxyEmit(_0x21ecc9(0x10d),_0x1264c3);return _0x1264c3;}}function headlessMode(_0x13d353){const _0x2aefcb=_0x23c8d3;let _0x287c25=_0x13d353[_0x2aefcb(0x1a3)],_0x1196aa=_0x13d353[_0x2aefcb(0xfb)],_0x28c9d7=[];for(let _0x4c01e2 of _0x287c25){if(_0x4c01e2[_0x2aefcb(0x1bd)]!=config['basecoin']){if(_0x4c01e2[_0x2aefcb(0xde)]>=_0x1196aa/0x64){if(_0x4c01e2[_0x2aefcb(0x10a)])_0x28c9d7[_0x2aefcb(0xcf)](_0x4c01e2);}else{if(_0x4c01e2[_0x2aefcb(0xde)]<=-_0x1196aa/0x64){if(_0x4c01e2['valid'])_0x28c9d7[_0x2aefcb(0xcf)](_0x4c01e2);}}}}_0x28c9d7['length']>0x0&&placeOrder(_0x28c9d7);}function notifyBalance(_0x5222db){const _0x55191f=_0x23c8d3;let _0x427870=_0x5222db['portfolio'],_0x4da683=_0x5222db[_0x55191f(0xfb)],_0x56c382=[];for(let _0x51f484 of _0x427870){if(_0x51f484[_0x55191f(0x1bd)]!=config['basecoin']){if(_0x51f484[_0x55191f(0xde)]>=_0x4da683/0x64){if(_0x51f484[_0x55191f(0x10a)])_0x56c382[_0x55191f(0xcf)](_0x51f484);}else{if(_0x51f484['delta']<=-_0x4da683/0x64){if(_0x51f484[_0x55191f(0x10a)])_0x56c382[_0x55191f(0xcf)](_0x51f484);}}}}if(_0x56c382['length']>0x0){let _0x22ce1f=_0x56c382[_0x55191f(0x158)](_0x2f400f=>_0x2f400f[_0x55191f(0x1bd)]);_0x22ce1f[_0x55191f(0x161)]();let _0x16875e=_0x22ce1f[_0x55191f(0x131)](',\x20');if(lastCoinsToBalance!==_0x16875e)logHistory(_0x55191f(0x1a9),_0x55191f(0xc4)+_0x16875e);lastCoinsToBalance=_0x16875e;}}function symbolToCoin(_0xfacd72){const _0x138d98=_0x23c8d3;let _0x46c4c5;if(_0xfacd72[_0x138d98(0xd6)]('/'+config[_0x138d98(0x169)]))_0x46c4c5=_0xfacd72[_0x138d98(0xf6)]('/'+config[_0x138d98(0x169)],'');if(_0xfacd72['includes'](config[_0x138d98(0x169)]+'/'))_0x46c4c5=_0xfacd72[_0x138d98(0xf6)](config[_0x138d98(0x169)]+'/','');return _0x46c4c5;}async function unlockOrders(){const _0x5c5e6d=_0x23c8d3;currentCoins=await getCoins(),validateOrdersState=_0x5c5e6d(0x1eb),lockOrders=![];}async function validateOrders(_0x1a7a51){const _0x3d7c4d=_0x23c8d3;if(_0x1a7a51)validateOrdersState=_0x1a7a51;let _0x33bc13=[],_0x213dfc=config[_0x3d7c4d(0x1a4)]==_0x3d7c4d(0x102)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3d7c4d(0x1bf)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x3d7c4d(0x1a2)](_0xcadc5d=>{const _0x1809c7=_0x3d7c4d;let _0x18b4fe=![];_0xcadc5d[_0x1809c7(0xe2)]>0x0&&(_0x18b4fe=!![]),_0x33bc13[_0x1809c7(0xcf)](_0x18b4fe),_0x18b4fe&&config[_0x1809c7(0x1a4)]!=_0x1809c7(0x102)&&logHistory(_0x1809c7(0xe6),_0x1809c7(0x1de)+_0xcadc5d['symbol']+'\x20'+_0xcadc5d['side']+'\x20#'+formatResult(_0xcadc5d[_0x1809c7(0xe2)],0x8)+'\x20@'+formatResult(_0xcadc5d[_0x1809c7(0x197)],0x8));}),_0x33bc13['forEach']((_0xdbb0d8,_0x15ec35)=>{if(_0xdbb0d8)lastOrders['splice'](_0x15ec35,0x1);});const _0x39d560=coolingDown?_0x3d7c4d(0x177):_0x3d7c4d(0x175);if(validateOrdersState=='initial')validateOrdersState=_0x3d7c4d(0xce),_0x33bc13[_0x3d7c4d(0xd6)](![])?config['ordertype']=='market'?logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x3d7c4d(0x118),_0x3d7c4d(0x1dc)):await unlockOrders();else{if(validateOrdersState==_0x3d7c4d(0xce)){if(_0x33bc13[_0x3d7c4d(0xd6)](![])){}else config[_0x3d7c4d(0x1a4)]==_0x3d7c4d(0x102)?logHistory(_0x3d7c4d(0x1a9),_0x3d7c4d(0xc2)+_0x39d560):logHistory(_0x3d7c4d(0x1a9),_0x3d7c4d(0x16a)+_0x39d560),await unlockOrders();}else{if(validateOrdersState==_0x3d7c4d(0xf9))_0x33bc13['includes'](![])?config[_0x3d7c4d(0x1a4)]==_0x3d7c4d(0x102)?logHistory(_0x3d7c4d(0x1a9),_0x3d7c4d(0x16d)+Math[_0x3d7c4d(0x196)](_0x213dfc*validateOrderInterval/0xea60)+_0x3d7c4d(0x181)+_0x39d560):(await cancelOrders(),logHistory('success',_0x3d7c4d(0x1d7)+Math[_0x3d7c4d(0x196)](_0x213dfc*validateOrderInterval/0xea60)+_0x3d7c4d(0x181)+_0x39d560)):logHistory(_0x3d7c4d(0x1a9),'No\x20more\x20open\x20orders\x20-\x20'+_0x39d560),await unlockOrders();else{if(validateOrdersState==_0x3d7c4d(0x1d8)){if(config[_0x3d7c4d(0x1a4)]!=_0x3d7c4d(0x102))logHistory(_0x3d7c4d(0x1a9),_0x3d7c4d(0x16e)+_0x39d560);await unlockOrders();}}}}}async function cancelOrders(){const _0x73ebdb=_0x23c8d3;lastOrders[_0x73ebdb(0x1a2)](async _0x123a5e=>{const _0x4099ba=_0x73ebdb;try{const _0x4e1b7d=await exchange[_0x4099ba(0xd4)](_0x123a5e[_0x4099ba(0x19f)],_0x123a5e[_0x4099ba(0x1af)]);}catch(_0xdd7420){if(_0xdd7420['toString']()['includes'](_0x4099ba(0x1e4))){}else await handleError(_0xdd7420,_0x4099ba(0x124));}});}async function initCoinResults(){const _0x2ee4fc=_0x23c8d3;let _0x315c47=[];config['portfolio']['forEach'](_0x17f3a6=>{const _0xe52919=_0x1932;if(!_0x17f3a6['excluded']&&_0x17f3a6[_0xe52919(0x1bd)]!=config[_0xe52919(0x169)]){let _0x2a267e=dbCoinResults[_0xe52919(0x171)](_0xe52919(0x18e))[_0xe52919(0x129)]({'coin':_0x17f3a6[_0xe52919(0x1bd)]})[_0xe52919(0x1a5)]();if(!_0x2a267e){const _0x39c626=currentCoins['find'](_0x4dbe49=>_0x4dbe49[_0xe52919(0x1bd)]==_0x17f3a6[_0xe52919(0x1bd)]),_0x55c2b7=global['ticker'][noslash(_0x17f3a6[_0xe52919(0x1af)])];let _0x176b41=_0x39c626?_0x39c626['number']:null,_0xf18a6b=_0x17f3a6[_0xe52919(0xcb)]?0x1/_0x55c2b7:_0x55c2b7,_0x3b209f;config['liquidity'][_0xe52919(0x1a2)](_0x5041ca=>{const _0x2e407b=_0xe52919;!_0x3b209f&&(_0x3b209f=_0x5041ca[_0x2e407b(0xdd)][_0x2e407b(0x129)](_0x5edef1=>_0x5edef1[_0x2e407b(0x1bd)]==_0x17f3a6['coin']),_0x3b209f&&(_0x176b41=_0x3b209f['number'],_0xf18a6b=_0x3b209f[_0x2e407b(0x197)]));}),_0x315c47[_0xe52919(0xcf)]({'coin':_0x17f3a6['coin'],'number':_0x176b41,'price':_0xf18a6b});}}}),_0x315c47[_0x2ee4fc(0x1a2)](_0xbe659d=>{const _0x5f40b5=_0x2ee4fc,_0x244fa7={'coin':_0xbe659d[_0x5f40b5(0x1bd)],'number':_0xbe659d[_0x5f40b5(0x123)],'breakeven':_0xbe659d['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5f40b5(0x18e))[_0x5f40b5(0xcf)](_0x244fa7)[_0x5f40b5(0x112)]();});}async function updateCoinResults(_0x3da894,_0x14d21a=![]){const _0x3e0a72=_0x23c8d3;let _0x3f4a70,_0x3c94ba,_0x5c3b58,_0x373638,_0x2f6dd0,_0x70256e,_0x55c0f3=dbCoinResults[_0x3e0a72(0x171)]('coins')[_0x3e0a72(0x129)]({'coin':_0x3da894[_0x3e0a72(0x1bd)]})['value']();!_0x55c0f3&&await initCoinResults();_0x3da894[_0x3e0a72(0xcb)]&&(_0x70256e={'filled':_0x3da894[_0x3e0a72(0xe2)]*_0x3da894[_0x3e0a72(0x197)],'amount':_0x3da894[_0x3e0a72(0xe2)]*_0x3da894[_0x3e0a72(0x197)],'side':_0x3da894[_0x3e0a72(0x13a)]=='sell'?'buy':_0x3e0a72(0x114),'price':0x1/_0x3da894['price']},_0x3da894={..._0x3da894,..._0x70256e});if(_0x14d21a)_0x3c94ba=_0x3da894[_0x3e0a72(0x13a)]==_0x3e0a72(0x15c)?_0x55c0f3[_0x3e0a72(0x123)]+_0x3da894['filled']:_0x55c0f3[_0x3e0a72(0x123)]-_0x3da894['filled'];else{const _0x509164=currentCoins[_0x3e0a72(0x129)](_0x593a51=>_0x593a51[_0x3e0a72(0x1bd)]==_0x3da894['coin']);_0x3c94ba=_0x509164[_0x3e0a72(0x123)];}if(_0x3da894[_0x3e0a72(0x146)]&&_0x3da894[_0x3e0a72(0x146)]['currency']==config[_0x3e0a72(0x169)])_0x3f4a70=_0x3da894[_0x3e0a72(0x146)][_0x3e0a72(0x1a6)];else{if(_0x3da894[_0x3e0a72(0x146)]&&_0x3da894[_0x3e0a72(0x146)][_0x3e0a72(0x176)]==_0x3e0a72(0x18f)&&!_0x14d21a)_0x3f4a70=_0x3da894[_0x3e0a72(0x146)][_0x3e0a72(0x1a6)]*global['ticker'][_0x3e0a72(0x18f)+config[_0x3e0a72(0x169)]];else _0x3f4a70=defaultFee*_0x3da894[_0x3e0a72(0xe2)]*_0x3da894[_0x3e0a72(0x197)];}_0x3da894['side']==_0x3e0a72(0x15c)?(_0x5c3b58=_0x3c94ba!=0x0?(_0x55c0f3['breakeven']*_0x55c0f3[_0x3e0a72(0x123)]+_0x3da894['price']*(_0x3c94ba-_0x55c0f3[_0x3e0a72(0x123)])+_0x3f4a70)/_0x3c94ba:0x0,_0x373638=_0x55c0f3[_0x3e0a72(0xf4)]):(_0x5c3b58=_0x3c94ba!=0x0?(_0x55c0f3[_0x3e0a72(0xc0)]*_0x55c0f3[_0x3e0a72(0x123)]-_0x3da894[_0x3e0a72(0x197)]*(_0x55c0f3[_0x3e0a72(0x123)]-_0x3c94ba)+_0x3f4a70)/_0x3c94ba:0x0,_0x373638=_0x55c0f3[_0x3e0a72(0xf4)]+(_0x3da894[_0x3e0a72(0x197)]-_0x55c0f3[_0x3e0a72(0xc0)])*_0x3da894[_0x3e0a72(0xe2)]);_0x2f6dd0=(_0x3da894[_0x3e0a72(0x197)]-_0x5c3b58-_0x3f4a70/_0x3da894[_0x3e0a72(0xe2)])*_0x3c94ba;let _0x3320d8={'coin':_0x3da894[_0x3e0a72(0x1bd)],'number':_0x3c94ba,'breakeven':formatResult(_0x5c3b58,0x8),'realized':formatResult(_0x373638,0x8),'unrealized':formatResult(_0x2f6dd0,0x8),'fees':formatResult(_0x55c0f3[_0x3e0a72(0x154)]+_0x3f4a70,0x8),'sells':_0x3da894[_0x3e0a72(0x13a)]==_0x3e0a72(0x114)?_0x55c0f3[_0x3e0a72(0x1ce)]+0x1:_0x55c0f3[_0x3e0a72(0x1ce)],'buys':_0x3da894['side']=='buy'?_0x55c0f3['buys']+0x1:_0x55c0f3[_0x3e0a72(0x1c8)]};dbCoinResults[_0x3e0a72(0x171)](_0x3e0a72(0x18e))[_0x3e0a72(0x129)]({'coin':_0x3da894[_0x3e0a72(0x1bd)]})[_0x3e0a72(0x142)](_0x3320d8)[_0x3e0a72(0x112)]();if(!_0x14d21a){if(_0x3da894[_0x3e0a72(0x146)]&&_0x3da894[_0x3e0a72(0x146)][_0x3e0a72(0x176)]==_0x3e0a72(0x18f)){const _0x58731a=currentCoins[_0x3e0a72(0x129)](_0x49b015=>_0x49b015['coin']=='BNB');if(_0x58731a){let _0xe2fdb9=dbCoinResults[_0x3e0a72(0x171)](_0x3e0a72(0x18e))[_0x3e0a72(0x129)]({'coin':_0x3e0a72(0x18f)})[_0x3e0a72(0x1a5)]();_0x3320d8={..._0xe2fdb9,'number':_0x58731a[_0x3e0a72(0x123)]},dbCoinResults['get'](_0x3e0a72(0x18e))['find']({'coin':_0x3e0a72(0x18f)})['assign'](_0x3320d8)[_0x3e0a72(0x112)]();}}}}async function placeOrder(_0x29695a){const _0x48c100=_0x23c8d3,_0x6edc8b=config['ordertype']==_0x48c100(0x102)?_0x48c100(0x102):_0x48c100(0x18b);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0xfed64f of _0x29695a){let _0x3b2b85,_0x53d7fb,_0xc92117,_0x2c532d,_0x12dc74,_0x13df1e=_0xfed64f[_0x48c100(0x1af)];try{const _0xa769df=await exchange['fetchTickers']([_0x13df1e]),_0x29d778=_0xa769df[_0x13df1e];_0x3b2b85=_0xfed64f['reverse']?0x1/_0xfed64f[_0x48c100(0x1aa)]:_0xfed64f[_0x48c100(0x1aa)],_0x53d7fb=_0x29d778[_0x48c100(0x153)],_0xc92117=_0x29d778['ask'];_0xfed64f['reverse']?(_0x2c532d=_0xfed64f[_0x48c100(0x13a)]==_0x48c100(0x15c)?_0x48c100(0x114):_0x48c100(0x15c),_0x12dc74=Math[_0x48c100(0xe3)](_0xfed64f[_0x48c100(0xda)])/_0x3b2b85):(_0x2c532d=_0xfed64f['side'],_0x12dc74=Math['abs'](_0xfed64f[_0x48c100(0xda)]));_0x6edc8b=='limit'&&(config['ordertype']=='limit-high'&&(_0x3b2b85=_0x2c532d==_0x48c100(0x15c)?_0x53d7fb:_0xc92117),config[_0x48c100(0x1a4)]==_0x48c100(0x17a)&&(_0x3b2b85=_0x2c532d==_0x48c100(0x15c)?_0xc92117:_0x53d7fb));_0x12dc74=formatResult(_0x12dc74,0x8),_0x3b2b85=formatResult(_0x3b2b85,0x8);const _0x4ecb2d=await exchange[_0x48c100(0x1cc)](_0x13df1e,_0x6edc8b,_0x2c532d,_0x12dc74,_0x3b2b85);lastOrders[_0x48c100(0xcf)]({'orderId':_0x4ecb2d['id'],'symbol':_0x13df1e,'coin':_0xfed64f[_0x48c100(0x1bd)],'side':_0x2c532d,'reverse':_0xfed64f[_0x48c100(0xcb)],'amount':_0x4ecb2d[_0x48c100(0x135)],'filled':0x0,'price':_0x4ecb2d[_0x48c100(0x197)],'fee':_0x4ecb2d[_0x48c100(0x146)]});const _0x167df2=_0x2c532d=='sell'?config[_0x48c100(0x193)]?String['fromCodePoint']('0x'+config[_0x48c100(0x193)])+'\x20':'':config[_0x48c100(0xca)]?String[_0x48c100(0x187)]('0x'+config[_0x48c100(0xca)])+'\x20':'',_0x11d798=_0x6edc8b=='market'?_0x48c100(0x128):config[_0x48c100(0x1a4)]==_0x48c100(0xf0)?_0x48c100(0x14b):_0x48c100(0x1a1);if(_0x6edc8b==_0x48c100(0x102))logHistory('order',''+_0x167df2+_0x11d798+_0x48c100(0x1e7)+_0x13df1e+'\x20'+_0x2c532d+'\x20#'+formatResult(_0x4ecb2d[_0x48c100(0xe2)],0x8)+'\x20@'+formatResult(_0x4ecb2d[_0x48c100(0x197)],0x8));else logHistory(_0x48c100(0xe6),''+_0x167df2+_0x11d798+_0x48c100(0x1e7)+_0x13df1e+'\x20'+_0x2c532d+'\x20#'+formatResult(_0x4ecb2d[_0x48c100(0x135)],0x8)+'\x20@'+formatResult(_0x4ecb2d[_0x48c100(0x197)],0x8));let _0x2bd2da=currentCoins[_0x48c100(0x129)](_0x3da1a9=>_0x3da1a9[_0x48c100(0x1bd)]==_0xfed64f['coin']);_0x2bd2da['order']=!![];if(config[_0x48c100(0x163)]!=0x0){let _0x5dec28=null;if(cooldownTracker[_0x48c100(0x11a)]==config[_0x48c100(0x163)]-0x1)_0x5dec28=cooldownTracker[_0x48c100(0x12f)]();const _0x32b1ce=getTimeStamp();cooldownTracker[_0x48c100(0xcf)](_0x32b1ce);if(_0x5dec28){const _0x5ba85f=fns['differenceInSeconds'](new Date(_0x32b1ce),new Date(_0x5dec28));if(_0x5ba85f<cooldownInterval){logHistory(_0x48c100(0x118),'Executed\x20'+config[_0x48c100(0x163)]+_0x48c100(0x149)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x48c100(0x1d4)),coolingDown=!![];break;}}}}catch(_0x175125){if(_0x175125[_0x48c100(0x116)]()['includes'](_0x48c100(0x1d9)))logHistory(_0x48c100(0x118),_0x48c100(0x157)+_0x13df1e);else{if(_0x175125[_0x48c100(0x116)]()['includes']('Invalid\x20quantity'))logHistory(_0x48c100(0x118),_0x48c100(0x15d)+_0x13df1e);else await handleError(_0x175125,_0x48c100(0x152),_0x13df1e);}}}if(lastOrders[_0x48c100(0x11a)]!=0x0){lockOrders=!![],validateOrdersState=_0x48c100(0x1eb),setTimeout(function(){validateOrders();},0x1388);const _0x3fc63e=config['ordertype']==_0x48c100(0x102)?validateOrderTimeout*0x3c*0x3e8:config[_0x48c100(0x1bf)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1c22f6=_0x48c100;validateOrders(_0x1c22f6(0xf9));},_0x3fc63e);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x48c100(0x1a9),_0x48c100(0x19d)));}else{if(coolingDown)!config[_0x48c100(0x19e)]&&logHistory(_0x48c100(0x118),_0x48c100(0x164));else lockOrders&&(!config[_0x48c100(0x19e)]&&(config['ordertype']==_0x48c100(0x102)?logHistory(_0x48c100(0x118),_0x48c100(0x178)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x2d53d2=_0x23c8d3;let _0x1ad0fb;lockOrders=!![],validateOrdersState=_0x2d53d2(0xce),currentCoins[_0x2d53d2(0x1a2)](_0x436a9a=>{const _0x4ea59d=_0x2d53d2,_0x272d14=allOpenOrders[_0x4ea59d(0x129)](_0x5f393b=>_0x5f393b[_0x4ea59d(0x1af)]==_0x436a9a[_0x4ea59d(0x1af)]);_0x272d14&&(lastOrders['push']({'orderId':_0x272d14['id'],'symbol':_0x436a9a[_0x4ea59d(0x1af)],'coin':_0x436a9a['coin'],'side':_0x272d14[_0x4ea59d(0x13a)],'reverse':_0x436a9a[_0x4ea59d(0xcb)],'amount':_0x272d14[_0x4ea59d(0x135)],'filled':0x0,'price':_0x272d14[_0x4ea59d(0x197)],'fee':_0x272d14[_0x4ea59d(0x146)]}),_0x436a9a[_0x4ea59d(0xe6)]=!![],_0x1ad0fb=_0x272d14[_0x4ea59d(0xdf)]);});const _0x57f0c4=new Date()[_0x2d53d2(0x11b)](),_0x53936e=config[_0x2d53d2(0x1a4)]==_0x2d53d2(0x102)?validateOrderTimeout*0x3c*0x3e8:config[_0x2d53d2(0x1bf)]*0x3c*0x3e8;if(_0x1ad0fb+_0x53936e>_0x57f0c4){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x13f030=_0x2d53d2;validateOrders(_0x13f030(0xf9));},_0x1ad0fb+_0x53936e-_0x57f0c4);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x4422bd=_0x23c8d3,_0x465371=[_0x4422bd(0xd5),'BUSD','USDT'],_0x34f138=_0x465371['includes'](config[_0x4422bd(0x169)])?0x2:0x8;let _0x3f2de6='';if(config[_0x4422bd(0x189)])_0x3f2de6=config[_0x4422bd(0xc9)]+'\x20portfolio:\x20\x0a\x0a';else _0x3f2de6='Bot\x20'+botID+'\x20portfolio:\x20\x0a\x0a';_0x3f2de6+=_0x4422bd(0xf3),_0x3f2de6+=_0x4422bd(0x16b),_0x3f2de6+='-------------------------------\x0a',currentCoins[_0x4422bd(0x1a2)](_0xe13c21=>{const _0x2fd784=_0x4422bd;_0x3f2de6+=_0xe13c21[_0x2fd784(0x1bd)][_0x2fd784(0x155)](0x7)+'|\x20'+formatPad(_0xe13c21[_0x2fd784(0xe7)],0x2,0x6)+'|\x20'+formatPad(_0xe13c21[_0x2fd784(0x110)],0x2,0x6)+'|\x20'+formatPad(_0xe13c21[_0x2fd784(0xde)]*0x64,0x2,0x6)+'\x0a';}),_0x3f2de6+=_0x4422bd(0x1c9),process[_0x4422bd(0x1cf)]({'telegrammsg':_0x3f2de6},_0x206591=>{});}function formatPad(_0x195603,_0x582d62,_0x5704e4){const _0xf27c4f=_0x23c8d3,_0xb4afd1=formatResultString(_0x195603,_0x582d62);return _0xb4afd1?_0xb4afd1[_0xf27c4f(0xfa)](_0x5704e4):''[_0xf27c4f(0xfa)](_0x5704e4);}function logHistory(_0x2e6635,_0x62ffb5,_0x29d0f7=''){const _0x2bafc8=_0x23c8d3;let _0x18650d={'time':getTimeStamp(),'type':_0x2e6635,'event':_0x62ffb5};dbLogs[_0x2bafc8(0x171)](_0x2bafc8(0x148))['push'](_0x18650d)[_0x2bafc8(0x112)]();if(_0x29d0f7=='')_0x29d0f7=_0x62ffb5;proxyEmit(_0x2bafc8(0x14a),{'log':_0x18650d,'summary':_0x29d0f7}),process[_0x2bafc8(0x1cf)]({'telegram':{..._0x18650d,'botname':config[_0x2bafc8(0xc9)],'showname':config['showname']}},_0x216ef9=>{}),logging(''+_0x18650d[_0x2bafc8(0x14a)]);}function emitHistory(_0xe124ff={}){const _0x4b9b9a=_0x23c8d3;Object[_0x4b9b9a(0xc3)](_0xe124ff)[_0x4b9b9a(0x11a)]==0x0&&(_0xe124ff={'type':[_0x4b9b9a(0xe6),_0x4b9b9a(0x14a)],'event':'','page':0x1});if(_0xe124ff['type'][_0x4b9b9a(0xd6)](_0x4b9b9a(0x14a)))_0xe124ff['type'][_0x4b9b9a(0x1d6)](_0xe124ff[_0x4b9b9a(0x14e)]['indexOf'](_0x4b9b9a(0x14a)),0x1,'error','success');if(dbLogs['has']('logs')[_0x4b9b9a(0x1a5)]()){let _0x5e0e74=dbLogs[_0x4b9b9a(0x171)](_0x4b9b9a(0x148))['filter'](_0x44dbe0=>{const _0x2a2e84=_0x4b9b9a;if(_0xe124ff[_0x2a2e84(0x14e)][_0x2a2e84(0x11a)]==0x0)return![];else return _0xe124ff[_0x2a2e84(0x14e)][_0x2a2e84(0xd6)](_0x44dbe0['type']);})['filter'](_0x532469=>{const _0xb7d64e=_0x4b9b9a;if(_0xe124ff['event']=='')return!![];else return _0x532469['event'][_0xb7d64e(0xfc)]()['includes'](_0xe124ff[_0xb7d64e(0x14a)][_0xb7d64e(0xfc)]());})[_0x4b9b9a(0xee)](_0x4b9b9a(0x173)),_0x2e60d4=_0x5e0e74[_0x4b9b9a(0x1a5)]()[_0x4b9b9a(0x11a)];_0x5e0e74=_0x5e0e74[_0x4b9b9a(0xcb)]()[_0x4b9b9a(0xe5)]((_0xe124ff[_0x4b9b9a(0x1e1)]-0x1)*logPageSize,_0xe124ff[_0x4b9b9a(0x1e1)]*logPageSize-0x1)[_0x4b9b9a(0xcb)]()['value'](),proxyEmit(_0x4b9b9a(0x195),{'logs':_0x5e0e74,'total':_0x2e60d4});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3b0480){const _0x16fa9a=_0x23c8d3;if(dbLogs['has']('logs')['value']()){const _0x41bf4c=dbLogs[_0x16fa9a(0x171)](_0x16fa9a(0x148))['sortBy']('time')[_0x16fa9a(0x11f)](_0x452852=>{const _0x63c84b=_0x16fa9a;return _0x452852['type']==_0x63c84b(0xe6);})[_0x16fa9a(0x1a5)]();dbLogs[_0x16fa9a(0x171)]('logs')['remove']()[_0x16fa9a(0x112)](),dbLogs['get'](_0x16fa9a(0x148))[_0x16fa9a(0x142)](_0x41bf4c)[_0x16fa9a(0x112)](),emitHistory(_0x3b0480);}}async function pauseBot(_0x4686eb=''){const _0x3de845=_0x23c8d3,_0x4f98da=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x3de845(0x11b)](),consecutivePauses=0x1;else{if(_0x4f98da-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x3de845(0x1cf)]({'stop':'restart'},_0x48240f=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x3de845(0x11b)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x4686eb)_0x4686eb+=_0x3de845(0x101);logHistory(_0x3de845(0x118),_0x4686eb+_0x3de845(0x1b4)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x20cbb7=_0x23c8d3;process[_0x20cbb7(0x1cf)]({'stop':_0x20cbb7(0x18d)},_0x5d6821=>{}),await sleep(0x7d0);}async function handleError(_0x19f142,_0x3fa06c,_0x2c76f2=''){const _0x4f4125=_0x23c8d3;if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)](_0x4f4125(0x190)))await pauseBot('Binance\x20API\x20blocked');else{if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)](_0x4f4125(0x136)))await pauseBot(_0x4f4125(0x19b));else{if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)]('RequestTimeout'))await pauseBot(_0x4f4125(0xdb));else{if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)](_0x4f4125(0xd7)))logHistory(_0x4f4125(0x118),_0x3fa06c+'\x20|\x20Binance\x20API\x20key\x20invalid'),logHistory('error',_0x4f4125(0x180)),await killBot();else{if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)](_0x4f4125(0xcd)))logHistory(_0x4f4125(0x118),_0x3fa06c+_0x4f4125(0x11d)),logHistory(_0x4f4125(0x118),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x19f142[_0x4f4125(0x116)]()[_0x4f4125(0xd6)](_0x4f4125(0x1d3)))logHistory(_0x4f4125(0x118),_0x3fa06c+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x4f4125(0x118),_0x4f4125(0x180)),await killBot();else{if(_0x19f142['toString']()[_0x4f4125(0xd6)](_0x4f4125(0x168)))logHistory(_0x4f4125(0x118),_0x3fa06c+_0x4f4125(0xd8)),logHistory(_0x4f4125(0x118),_0x4f4125(0x180)),await killBot();else{if(_0x19f142[_0x4f4125(0x116)]()['includes'](_0x4f4125(0xd9)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process[_0x4f4125(0x1cf)]({'stop':'restart'},_0x2c5213=>{});else _0x19f142['toString']()[_0x4f4125(0xd6)](_0x4f4125(0x13b))?logHistory(_0x4f4125(0x118),_0x3fa06c+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x2c76f2):(logging(_0x3fa06c+_0x4f4125(0x1ec),_0x19f142),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x162070,_0x388981){const _0x1ca500=_0x23c8d3;return parseFloat(_0x162070[_0x1ca500(0xd2)](_0x388981));}function formatResultTruncate(_0x4da83c,_0x3473a0){const _0x5b6d29=_0x23c8d3;let _0x52244f=formatResultString(_0x4da83c,0xa),_0x27a80a=_0x52244f[_0x5b6d29(0xc7)]('.');return _0x27a80a!=-0x1&&(_0x52244f=_0x52244f['slice'](0x0,_0x27a80a+_0x3473a0+0x1)),Number(_0x52244f);}function formatResultString(_0x5e675b,_0x99dbed){const _0x103191=_0x23c8d3;let _0x31e2c3;if(!(''+_0x5e675b)[_0x103191(0xd6)]('e'))_0x31e2c3=+(Math[_0x103191(0x196)](_0x5e675b+'e+'+_0x99dbed)+'e-'+_0x99dbed);else{let _0x1fd418=(''+_0x5e675b)[_0x103191(0xcc)]('e'),_0x50d90f='';+_0x1fd418[0x1]+_0x99dbed>0x0&&(_0x50d90f='+'),_0x31e2c3=+(Math[_0x103191(0x196)](+_0x1fd418[0x0]+'e'+_0x50d90f+(+_0x1fd418[0x1]+_0x99dbed))+'e-'+_0x99dbed);}return Number(_0x31e2c3)[_0x103191(0xd2)](_0x99dbed);}function logging(_0x49087c,_0xe75cce=''){const _0x5277b6=_0x23c8d3;if(config[_0x5277b6(0x189)])console[_0x5277b6(0xfd)](getTimeStamp()+':\x20'+config[_0x5277b6(0xc9)]+_0x5277b6(0x13f)+_0x49087c,_0xe75cce);else console[_0x5277b6(0xfd)](getTimeStamp()+':\x20Bot\x20'+botID+_0x5277b6(0x13f)+_0x49087c,_0xe75cce);}function getServerTime(){const _0x33700c=_0x23c8d3,_0x4ba05b=new Date();return _0x4ba05b[_0x33700c(0x10c)]()+'/'+(_0x4ba05b[_0x33700c(0xf7)]()+0x1)[_0x33700c(0x116)]()[_0x33700c(0xfa)](0x2,'0')+'/'+_0x4ba05b['getDate']()[_0x33700c(0x116)]()['padStart'](0x2,'0')+'\x20'+_0x4ba05b[_0x33700c(0xec)]()[_0x33700c(0x116)]()[_0x33700c(0xfa)](0x2,'0')+':'+_0x4ba05b[_0x33700c(0x1ca)]()[_0x33700c(0x116)]()[_0x33700c(0xfa)](0x2,'0')+':'+_0x4ba05b[_0x33700c(0xe8)]()[_0x33700c(0x116)]()[_0x33700c(0xfa)](0x2,'0');}function getTimeStamp(){const _0x52cc48=_0x23c8d3,_0x390363=shiftedTime();return _0x390363[_0x52cc48(0x10c)]()+'/'+(_0x390363[_0x52cc48(0xf7)]()+0x1)[_0x52cc48(0x116)]()[_0x52cc48(0xfa)](0x2,'0')+'/'+_0x390363['getDate']()[_0x52cc48(0x116)]()[_0x52cc48(0xfa)](0x2,'0')+'\x20'+_0x390363['getHours']()[_0x52cc48(0x116)]()[_0x52cc48(0xfa)](0x2,'0')+':'+_0x390363[_0x52cc48(0x1ca)]()[_0x52cc48(0x116)]()[_0x52cc48(0xfa)](0x2,'0')+':'+_0x390363[_0x52cc48(0xe8)]()[_0x52cc48(0x116)]()[_0x52cc48(0xfa)](0x2,'0');}function getDate(){const _0x4af23d=_0x23c8d3,_0x1ece75=shiftedTime();return _0x1ece75[_0x4af23d(0x10c)]()+'/'+(_0x1ece75[_0x4af23d(0xf7)]()+0x1)[_0x4af23d(0x116)]()[_0x4af23d(0xfa)](0x2,'0')+'/'+_0x1ece75[_0x4af23d(0x104)]()[_0x4af23d(0x116)]()['padStart'](0x2,'0');}function getHour(){const _0x45dd6a=_0x23c8d3,_0x30bdfc=shiftedTime();return _0x30bdfc[_0x45dd6a(0xec)]()[_0x45dd6a(0x116)]()[_0x45dd6a(0xfa)](0x2,'0');}function sleep(_0x17f1f8){return new Promise(_0x24c165=>setTimeout(_0x24c165,_0x17f1f8));}function shiftedTime(){const _0x5773bf=_0x23c8d3,_0x2ca115=new Date();let _0x47291f=_0x2ca115;if(config&&config['timeshift']!==0x0)_0x47291f=fns[_0x5773bf(0x115)](_0x2ca115,{'hours':config[_0x5773bf(0x107)]});return _0x47291f;}