const _0x3a081a=_0x91ee;(function(_0x554cc7,_0x531f9f){const _0x3d357a=_0x91ee,_0x1e43c2=_0x554cc7();while(!![]){try{const _0xf49770=-parseInt(_0x3d357a(0x126))/0x1+-parseInt(_0x3d357a(0x181))/0x2+parseInt(_0x3d357a(0x1e4))/0x3+-parseInt(_0x3d357a(0x228))/0x4*(-parseInt(_0x3d357a(0xc4))/0x5)+parseInt(_0x3d357a(0x13a))/0x6*(parseInt(_0x3d357a(0x1ee))/0x7)+parseInt(_0x3d357a(0x11a))/0x8+parseInt(_0x3d357a(0xe7))/0x9*(-parseInt(_0x3d357a(0x109))/0xa);if(_0xf49770===_0x531f9f)break;else _0x1e43c2['push'](_0x1e43c2['shift']());}catch(_0x5ba55f){_0x1e43c2['push'](_0x1e43c2['shift']());}}}(_0x4a61,0xcbca8));const _0x690619=function(){let _0x26388c=!![];return function(_0x3bb8c8,_0x16fcfa){const _0x509940=_0x26388c?function(){if(_0x16fcfa){const _0x2c6468=_0x16fcfa['apply'](_0x3bb8c8,arguments);return _0x16fcfa=null,_0x2c6468;}}:function(){};return _0x26388c=![],_0x509940;};}(),_0x3873b8=_0x690619(this,function(){const _0x4d45f9=_0x91ee;return _0x3873b8[_0x4d45f9(0xd5)]()[_0x4d45f9(0xf6)](_0x4d45f9(0x1b6))[_0x4d45f9(0xd5)]()[_0x4d45f9(0x129)](_0x3873b8)[_0x4d45f9(0xf6)](_0x4d45f9(0x1b6));});_0x3873b8();'use strict';const ccxt=require(_0x3a081a(0x191))['pro'],low=require(_0x3a081a(0x1b0)),FileSync=require(_0x3a081a(0x15e)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x3a081a(0xc5))[_0x3a081a(0x194)],util=require('util'),argv=require('yargs/yargs')(process['argv'][_0x3a081a(0x1ec)](0x2))[_0x3a081a(0x133)],path=require(_0x3a081a(0x164));let exchange;global['ticker']={},global[_0x3a081a(0x17f)]={};const usdBasecoins=[_0x3a081a(0x15a),_0x3a081a(0x240),_0x3a081a(0xd7),_0x3a081a(0x1c0),_0x3a081a(0xf2),_0x3a081a(0x184)],exceptions={'binance':['DAI/','HOT/BTC',_0x3a081a(0x141),_0x3a081a(0x1a0),_0x3a081a(0x19c)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3a081a(0x1e5)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3a081a(0x101))[_0x3a081a(0x1df)],botID=process[_0x3a081a(0x133)][0x2]||_0x3a081a(0x158),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console['log'](_0x3a081a(0x11d)+botID+_0x3a081a(0x148)),killBot());const userID=process[_0x3a081a(0x133)][0x3]||'',configpath=userID?_0x3a081a(0xd8)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0x3a081a(0xee),loggerfile=fs[_0x3a081a(0x13b)](logspath+_0x3a081a(0x22d),{'flags':'a'});!fs[_0x3a081a(0x19f)](configpath)&&fs[_0x3a081a(0x204)](configpath);!fs[_0x3a081a(0x19f)](logspath)&&fs[_0x3a081a(0x204)](logspath);const configfile=configpath+_0x3a081a(0x161)+botID+'-config.json',logfile=configpath+_0x3a081a(0x161)+botID+_0x3a081a(0xf3),performancefile=configpath+'bot-'+botID+_0x3a081a(0x1d8),coinresultsfile=configpath+_0x3a081a(0x161)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x3a081a(0x153),configbackuppath=configpath+_0x3a081a(0x178),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3a081a(0x20d)]({'logs':[],'version':serverversion})[_0x3a081a(0xcc)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3a081a(0x20d)]({'data':[],'version':serverversion})[_0x3a081a(0xcc)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3a081a(0x20d)]({'bot':[],'version':serverversion})[_0x3a081a(0xcc)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3a081a(0x20d)]({'coins':[],'version':serverversion})[_0x3a081a(0xcc)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3a081a(0x1a8),'rsaStandard':_0x3a081a(0x115)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x38ff78=>{console['log'](_0x38ff78);},'simple':_0x7be9e6=>{const _0xb1e783=_0x3a081a;console[_0xb1e783(0x1ff)](_0x7be9e6),loggerfile['write'](util['format'](_0x7be9e6)+'\x0a');},'full':async(_0x3b1314,_0x5d97f7='')=>{const _0x37c1d1=_0x3a081a;let _0x2b563f;if(config['showname'])_0x2b563f=getTimeStamp()+':\x20'+config['botname']+_0x37c1d1(0x215)+_0x3b1314;else _0x2b563f=getTimeStamp()+_0x37c1d1(0x173)+botID+'\x20>\x20'+_0x3b1314;console[_0x37c1d1(0x1ff)](_0x2b563f),loggerfile[_0x37c1d1(0xcc)](util[_0x37c1d1(0xf9)](_0x2b563f)+'\x0a'),_0x5d97f7&&(console['log'](_0x5d97f7),loggerfile[_0x37c1d1(0xcc)](util['format'](_0x5d97f7)+'\x0a'));},'debug':async(_0x32a95f,_0x409b59='')=>{const _0x515dd1=_0x3a081a;let _0x5c8744;if(config[_0x515dd1(0x237)])_0x5c8744=getTimeStamp()+':\x20'+config[_0x515dd1(0xe4)]+'\x20>\x20[DEBUG]\x20'+_0x32a95f;else _0x5c8744=getTimeStamp()+_0x515dd1(0x173)+botID+_0x515dd1(0xd0)+_0x32a95f;if(debugging)console[_0x515dd1(0x1ff)](_0x5c8744);loggerfile[_0x515dd1(0xcc)](util[_0x515dd1(0xf9)](_0x5c8744)+'\x0a');if(_0x409b59){if(debugging)console[_0x515dd1(0x1ff)](_0x409b59);loggerfile[_0x515dd1(0xcc)](util[_0x515dd1(0xf9)](_0x409b59)+'\x0a');}}};function _0x4a61(){const _0x33f44f=['split','cooldown','\x20>\x20','Bot\x20','LOCKED','canceled','distribution','getOpenOrders()','UNLOCKING','type','fromCodePoint','eur','Limit\x20(low-margin)','<b>Bot\x20','2.5.0','parse','yyyy/MM/dd','exchange','data','none','1\x20-\x20Handle\x20open\x20orders','6439492NNHgBv','portfolio','number','progress','emojibuy','/output-000.log','leftTxt','message','full','createOrder','offset','sendMetricsTelegram','exchange\x20reloaded','***','\x20API\x20secret\x20is\x20invalid','showname','getSeconds','apiKey','logs','\x20hour','apiSecret','getCoins()','loadSymbols()','length','BUSD','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','assign','apiPassword','keys','close','ORDERS.UNLOCKING','ordertype','5OoxAaG','hybrid-crypto-js','forEach','-results.json','loading-canceled','limit-high','-------------------------------\x0a','\x20portfolio:</b>\x20\x0a\x0a','write','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','padStart','function','\x20>\x20[DEBUG]\x20','Invalid\x20quantity','fetchBalance','************','</pre>','toString','Exchange','TUSD','./config/','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Bybit','stringify','total','max','reverse','%\x20(','coins','getPortfolio(1)','Limit\x20(high-margin)','MIN_NOTIONAL','botname','exec','3\x20-\x20handling\x20FILLED\x20order:\x20','933597BnwXLr','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','starting-balances','amountToPrecision','loadMarkets','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','valid','./logs/','bots','additional\x20symbols\x20','symbol','USDC','-events.json','net-fiat','cloneDeep','search','substring','1\x20-\x20FILLED:\x20','format','symbols','\x20API\x20key\x20is\x20invalid','balancing\x20resumed','Net\x20effect','Waited\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','recovery','./version.json','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20|\x20lock\x20orders:\x20','bid','Error\x20while\x20deleting\x20files:\x20','Market','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','push','10UQnrLj','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','/USD','open','bot','<pre>','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','timeshift','map','BNB','password','indexOf','RSA-OAEP','changes','\x20not\x20responding','filter','threshold','795608CZpHZl','isEqual','last','Error:\x20Invalid\x20argument\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','timestamp','openOrders','\x20order:\x20','exchange\x20not\x20reloaded','concat','privateKey','timeout','1250056ypOYyY','\x20value','getPortfolio(2)','constructor','restart','\x20minutes','\x20has\x20a\x2024h\x20drop\x20of\x20','page','Executing\x20exchange\x20reload','Fees\x20|\x20currency:\x20','closed','includes','storeHeadless','argv','success','balances','breakeven','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','delta','excluded','1014zMqwzA','createWriteStream','args','\x20|\x20highest:\x20','orderId','\x20|\x20','EUR','XEM/BUSD','has','\x20minutes\x20-\x20','.json','\x20|\x20Custom\x20ID:\x20','get','autoliquidity',',\x20must\x20be\x20a\x203\x20digit\x20number','target','writeFile','initial','average','InvalidOrder','getCoinNumber()','deleteHistoryAlerts','fetchTicker','Binance','settings','bb-secure.json','entries','amount','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Fee\x20discount\x20refund\x20detected:\x20','001','orderstatus','USD','getTime','<b>','2.6.0','lowdb/adapters/FileSync','headless','\x20change','bot-','Order\x20is\x20invalid:\x20','debug','path','\x20:\x20','Unknown\x20error\x20occured','event','change24h','usd','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','BNB/','ORDERS.UNLOCKED','balancing\x20resumes\x20when\x20cooldown\x20ends','remainingSymbols','round','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','datetime','status',':\x20Bot\x20','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','getHours','price','buys','/backup/','unlinkSync','fetchTickers','getMonth','watchTrades','rightTxt','showConfig','change','Net\x20','2812738ErHMXW','added','watchTransactions','USDP','getFullYear','sell','warning','ask',':\x20timer\x20>','running','\x20|\x20Exchange:\x20','event-history','2.3.5','recent20','cancelOrder','value','ccxt','OrderNotFound','limits','Crypt','ETH','netoffset','differenceInSeconds','set','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fetchClosedOrders','buy','YOYOW/','options','2\x20-\x20FILLED\x20unknown\x20order:\x20','existsSync','NANO/','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','1\x20-\x20Unlock\x20orders','startnumber','ongoing','emojisell','final','colorscheme','sha256','performance','Executed\x20','configuration-stored','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','fee','error','lowdb','placeOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','cancelOrders()','market','emitHistory','(((.+)+)+)+$','toFixed','spot','find','ExchangeNotAvailable','fetchOpenOrders','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toUpperCase','basecoin','yyyy-MM-dd\x27T\x27HH:mm:ss','USDT','Initiating\x20exchange\x20reload','floor','startprice','\x20closed\x20the\x20connection','highest','Saving\x20configuration','enabled','starting-balance-','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','secure','currency','ORDERS.LOCKED','side','net-basecoin','Pausing\x20for\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getStartingBalances','time','uncaughtException','no\x20open\x20orders','onepagemode','removed','liquidity','-performance.json','\x20exchange','initclient','findIndex','min','sort','Reset\x20|\x20','version','Transaction\x20detection\x20unblocked','cost','API-key\x20format\x20invalid','splice','2296290SoIwxB','UNLOCKED','startsWith','2\x20-\x20Validate\x20orders:\x20','toLowerCase','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','cancel','replace','slice','realized','46396hBBOHa','remove','decrypt','Portfolio\x20change\x20detected:\x20','date','Failed\x20to\x20load\x20coin\x20data\x20for\x20','1\x20-\x20Validate\x20orders:\x20','string','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','configuration','ticker','InsufficientFunds','\x20not\x20available','abs','send','Initializing\x20coin\x20results','BTC','log','startdate','sortBy','coin','trade','mkdirSync','AuthenticationError','join','filled','fiat','add','Unfilled\x20order(s)\x20canceled\x20after\x20','Resetting\x20bot\x20history','watchOrders','defaults','order','sendPortfolioTelegram','coin-loading-progress','getDate','botID'];_0x4a61=function(){return _0x33f44f;};return _0x4a61();}process['on'](_0x3a081a(0x1d3),function(_0x1c7c61){const _0xdee977=_0x3a081a;logger[_0xdee977(0x163)]('Uncaught\x20Exception:',_0x1c7c61);});settings[_0x3a081a(0x110)]!=config[_0x3a081a(0x110)]&&updateTimeshift(settings[_0x3a081a(0x110)]);settings[_0x3a081a(0x1d5)]!=config['onepagemode']&&updateOnepagemode(settings[_0x3a081a(0x1d5)]);process['send']({'started':_0x3a081a(0x18a)},_0x16a697=>{}),initializeProcessListeners();function proxyEmit(_0x3a9bdc,_0x51a750=null){process['send']({'function':_0x3a9bdc,'args':_0x51a750},_0x3c1f7d=>{});}function initializeProcessListeners(){const _0x39de4e=_0x3a081a;process['on'](_0x39de4e(0x22f),_0x587619=>{const _0x29cc56=_0x39de4e;switch(Object[_0x29cc56(0xc0)](_0x587619)[0x0]){case _0x29cc56(0x110):_0x587619[_0x29cc56(0x110)]!=undefined&&(settings[_0x29cc56(0x110)]=_0x587619[_0x29cc56(0x110)],updateTimeshift(settings[_0x29cc56(0x110)]));break;case _0x29cc56(0x1d5):_0x587619[_0x29cc56(0x1d5)]!=undefined&&(settings[_0x29cc56(0x1d5)]=_0x587619[_0x29cc56(0x1d5)],updateOnepagemode(settings[_0x29cc56(0x1d5)]));break;case _0x29cc56(0xef):_0x587619[_0x29cc56(0xef)]!=undefined&&(bots=JSON['parse'](_0x587619[_0x29cc56(0xef)]),proxyEmit('bots',bots));break;case _0x29cc56(0xcf):switch(_0x587619[_0x29cc56(0xcf)]){case _0x29cc56(0x1da):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x29cc56(0x1b5):emitHistory(_0x587619['args']);break;case _0x29cc56(0x14f):deleteHistoryAlerts(_0x587619['args']);break;case'getPortfolio':getPortfolio(_0x587619[_0x29cc56(0x13c)]);break;case'storeConfiguration':storeConfiguration(_0x587619['args']);break;case _0x29cc56(0x132):storeHeadless(_0x587619[_0x29cc56(0x13c)]);break;case'storeFiat':storeFiat(_0x587619[_0x29cc56(0x13c)]);break;case'resetHistory':resetHistory();break;case _0x29cc56(0x1d1):getStartingBalances(getNormalizedPerformance());break;case _0x29cc56(0x1b1):placeOrder(_0x587619['args']);break;case'cancelLoading':cancelLoading();break;case _0x29cc56(0x17e):showConfig();break;case _0x29cc56(0x233):sendMetricsTelegram();break;case _0x29cc56(0x20f):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x38243c=null,_0x3e61e1=![]){const _0x347a25=_0x3a081a;logger[_0x347a25(0x163)](_0x347a25(0x1de)+(_0x38243c&&_0x38243c[_0x347a25(0x23f)]>0x0?_0x347a25(0xf0)+_0x38243c[_0x347a25(0x206)](','):'no\x20additional\x20symbols')+_0x347a25(0x13f)+(_0x3e61e1?_0x347a25(0x234):_0x347a25(0x122))+_0x347a25(0x18b)+config[_0x347a25(0x224)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3e61e1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x347a25(0x239)]!=''&&config[_0x347a25(0x239)]!=_0x347a25(0x235)){if(_0x3e61e1){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1faa4f){handleErrorNoStop(_0x1faa4f,_0x347a25(0x23e));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x38243c);const _0x2f7ccf=await getCoins();[currentCoins,currentCoinsAll]=_0x2f7ccf,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x347a25(0x23f)]==0x0&&allOpenOrders[_0x347a25(0x23f)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xd8e000=_0x3a081a;exchangeStopped=!![],await exchange[_0xd8e000(0xc1)]();}async function reloadExchange(){const _0x1a0fd8=_0x3a081a;logger[_0x1a0fd8(0x163)](_0x1a0fd8(0x1c1));while(lockOrders!=ORDERS[_0x1a0fd8(0x1e5)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1a0fd8(0x163)](_0x1a0fd8(0x12e)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x25b5e1=config['exchange'],_0x3c930f=config[_0x3a081a(0x239)],_0x1a6d3c=config['apiSecret'],_0x548146=config[_0x3a081a(0x243)]){const _0x2edfb0=_0x3a081a;exchange&&await stopExchange();!supportedExchanges()[_0x2edfb0(0x131)](_0x25b5e1)&&(logHistory(_0x2edfb0(0x1af),_0x2edfb0(0xec)+_0x25b5e1+_0x2edfb0(0x1d9)),killBot());const _0x5304cd=ccxt[_0x25b5e1['toLowerCase']()];exchange=new _0x5304cd({'apiKey':_0x3c930f,'secret':_0x1a6d3c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x25b5e1==_0x2edfb0(0xda)&&(exchange['options']={'defaultType':_0x2edfb0(0x1b8),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x548146)exchange[_0x2edfb0(0x113)]=_0x548146;}function setStableCoins(){const _0x319cbe=_0x3a081a;let _0x4b758a=config[_0x319cbe(0x1be)]==_0x319cbe(0x195)?'ETH':'BTC',_0x4e4dec=!allSymbols[_0x319cbe(0x131)](_0x4b758a+_0x319cbe(0x10b))?_0x319cbe(0x1c0):_0x319cbe(0x15a),_0x56d616=!allSymbols[_0x319cbe(0x131)](_0x4b758a+'/EUR')?_0x4e4dec:'EUR';stablecoins={'eur':{'coin':''+_0x4b758a+_0x56d616,'symbol':_0x4b758a+'/'+_0x56d616},'usd':{'coin':''+_0x4b758a+_0x4e4dec,'symbol':_0x4b758a+'/'+_0x4e4dec}};}async function initwsCcxt(_0x137f05){const _0xf4c655=_0x3a081a;_0x137f05==null&&(_0x137f05=[],config['portfolio'][_0xf4c655(0xc6)](_0x489a8c=>{const _0x59a62e=_0xf4c655;if(!_0x489a8c[_0x59a62e(0x139)]&&_0x489a8c[_0x59a62e(0x202)]!=config[_0x59a62e(0x1be)])_0x137f05[_0x59a62e(0x108)](_0x489a8c[_0x59a62e(0xf1)]);}));if(!_0x137f05[_0xf4c655(0x131)](stablecoins['eur']['symbol']))_0x137f05[_0xf4c655(0x108)](stablecoins[_0xf4c655(0x21e)]['symbol']);if(!_0x137f05[_0xf4c655(0x131)](stablecoins[_0xf4c655(0x169)]['symbol']))_0x137f05[_0xf4c655(0x108)](stablecoins['usd'][_0xf4c655(0xf1)]);if(config[_0xf4c655(0x224)][_0xf4c655(0x1e6)](_0xf4c655(0x151))){if(!_0x137f05[_0xf4c655(0x131)]('BNB/'+config['basecoin']))_0x137f05['push'](_0xf4c655(0x16b)+config[_0xf4c655(0x1be)]);}loadCoins(_0x137f05);const _0x46d530=async _0x199f3c=>{const _0x1792aa=_0xf4c655,_0x15ea2b=await exchange[_0x1792aa(0x150)](_0x199f3c);global[_0x1792aa(0x1f8)][noslash(_0x15ea2b[_0x1792aa(0xf1)])]=_0x15ea2b['last'];while(!![]){if(!botPaused)try{const _0x2bb46b=await exchange[_0x1792aa(0x17c)](_0x199f3c);global[_0x1792aa(0x1f8)][noslash(_0x2bb46b[0x0]['symbol'])]=_0x2bb46b[0x0][_0x1792aa(0x176)],await sleep(0x3e8);}catch(_0x3248d6){if(!exchangeStopped)await handleError(_0x3248d6,_0x1792aa(0x17c),_0x199f3c);}else await sleep(0x64);}},_0xaa84bb=async _0x211e06=>{const _0x489901=_0xf4c655;while(!![]){if(!botPaused)try{const _0x13e3b0=await exchange[_0x489901(0x150)](_0x211e06);global['change'][_0x13e3b0[_0x489901(0xf1)]]=_0x13e3b0['percentage'],await sleep(0x3c*0x3e8);}catch(_0x111feb){if(!exchangeStopped)await handleError(_0x111feb,_0x489901(0x17a),_0x211e06);}else await sleep(0x64);}},_0x265153=async()=>{const _0x39e463=_0xf4c655;while(!![]){if(!botPaused)try{const _0x3e62c3=await exchange['watchOrders']();_0x3e62c3[_0x39e463(0xc6)](_0x577324=>{updateNumberCoinsCcxt(_0x577324);});}catch(_0x6fbbab){if(!exchangeStopped)await handleError(_0x6fbbab,_0x39e463(0x20c));}else await sleep(0x64);}};_0x137f05[_0xf4c655(0xc6)](_0x685c21=>{_0x46d530(_0x685c21),_0xaa84bb(_0x685c21);}),!wsEventsSet&&(wsEventsSet=!![],_0x265153(),watchTransactions());}async function watchTransactions(){const _0x328633=_0x3a081a;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2c2d64=await getCoins(),[_0x53b56d,_0x347d16]=_0x2c2d64;let _0x4bedcf=[];currentCoins[_0x328633(0xc6)](_0x5ca8d0=>{const _0x418b74=_0x328633,_0x1a1e98=_0x53b56d[_0x418b74(0x1b9)](_0x5da9af=>_0x5da9af['coin']==_0x5ca8d0[_0x418b74(0x202)]);_0x1a1e98&&(_0x5ca8d0[_0x418b74(0x22a)]!=_0x1a1e98[_0x418b74(0x22a)]&&_0x4bedcf[_0x418b74(0x108)]({'coin':_0x5ca8d0[_0x418b74(0x202)],'symbol':_0x5ca8d0[_0x418b74(0xf1)],'number':Number(formatResult(_0x1a1e98['number']-_0x5ca8d0[_0x418b74(0x22a)],0x8))}));});if(_0x4bedcf[_0x328633(0x23f)]==0x1&&!blockTransactionDetection){if(config[_0x328633(0x147)]){logger[_0x328633(0x163)](_0x328633(0x12f)+lastFees[_0x328633(0x1cb)]+_0x328633(0x13d)+lastFees[_0x328633(0x1c5)]);if(!lastFees[_0x328633(0x1cb)]||_0x4bedcf[0x0][_0x328633(0x202)]!=lastFees[_0x328633(0x1cb)]||_0x4bedcf[0x0][_0x328633(0x22a)]>lastFees[_0x328633(0x1c5)]){let _0x3c16fd;if(_0x4bedcf[0x0]['coin']!=config['basecoin']){let _0x1fcaa5=global[_0x328633(0x1f8)][noslash(_0x4bedcf[0x0]['symbol'])];_0x3c16fd=_0x4bedcf[0x0][_0x328633(0xde)]?0x1/_0x1fcaa5:_0x1fcaa5;}else _0x3c16fd=0x1;_0x4bedcf[0x0][_0x328633(0x176)]=_0x3c16fd,delete _0x4bedcf[0x0][_0x328633(0xf1)];let _0x5c3945=[],_0x549f62=[...config['liquidity']]||[],_0x3bf805=config[_0x328633(0x1d7)];_0x549f62[_0x328633(0x1dd)]((_0x1f85b2,_0x4d2956)=>_0x1f85b2[_0x328633(0x1f2)]>_0x4d2956[_0x328633(0x1f2)]?-0x1:_0x4d2956[_0x328633(0x1f2)]>_0x1f85b2[_0x328633(0x1f2)]?0x1:0x0);const _0x35408f=getDate();if(_0x549f62[0x0]){const _0x5a4358=fns[_0x328633(0x222)](_0x549f62[0x0][_0x328633(0x1f2)],_0x328633(0x223),new Date()),_0x3db7e4=fns['parse'](_0x35408f,_0x328633(0x223),new Date());if(fns[_0x328633(0x11b)](_0x5a4358,_0x3db7e4)){_0x5c3945=_0x549f62[0x0][_0x328633(0x116)];const _0x9f3223=_0x5c3945[_0x328633(0x1b9)](_0x157661=>_0x157661[_0x328633(0x202)]==_0x4bedcf[0x0]['coin']);_0x9f3223?(_0x9f3223[_0x328633(0x22a)]+=_0x4bedcf[0x0][_0x328633(0x22a)],_0x9f3223[_0x328633(0x22a)]==0x0&&(_0x5c3945=_0x5c3945[_0x328633(0x118)](_0x2e4458=>{return _0x2e4458['coin']!=_0x4bedcf[0x0]['coin'];}))):_0x5c3945[_0x328633(0x108)](_0x4bedcf[0x0]);const _0xa05c63=_0x3bf805['find'](_0xe5dfd7=>_0xe5dfd7[_0x328633(0x1f2)]==_0x35408f);_0xa05c63[_0x328633(0x116)]=_0x5c3945;}else _0x3bf805['push']({'date':_0x35408f,'changes':[_0x4bedcf[0x0]]});}const _0x451737=_0x3bf805['find'](_0x2f68a6=>_0x2f68a6[_0x328633(0x1f2)]==_0x35408f);if(_0x451737){let _0x4514fd=!![];_0x451737[_0x328633(0x116)]['forEach'](_0x4e0bd7=>{const _0x4dc52d=_0x328633;if(_0x4e0bd7[_0x4dc52d(0x22a)]!=0x0)_0x4514fd=![];}),_0x4514fd&&(_0x3bf805=_0x3bf805['filter'](_0x4c71f5=>{return _0x4c71f5['date']!=_0x35408f;}));}let _0x395be7=dbConfig[_0x328633(0x146)](_0x328633(0x10d))[_0x328633(0x1b9)]({'botID':botID})[_0x328633(0x190)]();_0x395be7&&(dbConfig['get']('bot')[_0x328633(0x1b9)]({'botID':botID})[_0x328633(0x242)]({'liquidity':_0x3bf805})[_0x328633(0xcc)](),config[_0x328633(0x1d7)]=_0x3bf805),logHistory(_0x328633(0x134),_0x328633(0x1f1)+Math[_0x328633(0x1fb)](_0x4bedcf[0x0][_0x328633(0x22a)])+'\x20'+_0x4bedcf[0x0]['coin']+'\x20'+(_0x4bedcf[0x0][_0x328633(0x22a)]>0x0?_0x328633(0x182):_0x328633(0x1d6))+_0x328633(0x11e)),proxyEmit(_0x328633(0x1f7),emittedConfiguration());}else logger[_0x328633(0x163)](_0x328633(0x157)+Math[_0x328633(0x1fb)](_0x4bedcf[0x0][_0x328633(0x22a)])+'\x20'+_0x4bedcf[0x0]['coin']+'\x20'+(_0x4bedcf[0x0]['number']>0x0?_0x328633(0x182):_0x328633(0x1d6)));transactionDetected=!![],currentCoins=_0x53b56d,currentCoinsAll=_0x347d16;}else logger[_0x328633(0x163)](_0x328633(0x1f1)+Math['abs'](_0x4bedcf[0x0][_0x328633(0x22a)])+'\x20'+_0x4bedcf[0x0][_0x328633(0x202)]+'\x20'+(_0x4bedcf[0x0]['number']>0x0?_0x328633(0x182):_0x328633(0x1d6))+_0x328633(0x10f)),currentCoins=_0x53b56d,currentCoinsAll=_0x347d16;}await sleep(watchTransactionsInterval);}catch(_0x51d463){if(!exchangeStopped)await handleError(_0x51d463,_0x328633(0x183));}else await sleep(0x64);}}async function loadSymbols(_0x7425af=config[_0x3a081a(0x224)],_0x28d3df=![]){const _0x17d97d=_0x3a081a;if(allSymbols&&!_0x28d3df)return;try{markets=await exchange[_0x17d97d(0xeb)](),allSymbols=exchange[_0x17d97d(0xfa)][_0x17d97d(0x118)](_0x5a9bd6=>{const _0x263b25=_0x17d97d;let _0x4a6b29=![];const _0x3633ff=exceptions[_0x7425af[_0x263b25(0x1e8)]()]||[];return _0x3633ff[_0x263b25(0xc6)](_0x584863=>{const _0xcc449f=_0x263b25;if(_0x5a9bd6[_0xcc449f(0x131)](_0x584863))_0x4a6b29=!![];}),!_0x4a6b29;});}catch(_0xb5b46e){throw _0xb5b46e;}}async function initclient(){const _0x19cc5f=_0x3a081a;emitLoadingProgress(),proxyEmit(_0x19cc5f(0x1f7),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3172c9=getNormalizedPerformance();emitPerformance(_0x3172c9),getStartingBalances(_0x3172c9);}function _0x91ee(_0x453bf2,_0x20b7cc){const _0x28f119=_0x4a61();return _0x91ee=function(_0x3873b8,_0x690619){_0x3873b8=_0x3873b8-0xc0;let _0x4a6193=_0x28f119[_0x3873b8];return _0x4a6193;},_0x91ee(_0x453bf2,_0x20b7cc);}async function toggleBotMode(){const _0x58b941=_0x3a081a;let _0x2ab578=dbConfig[_0x58b941(0x146)](_0x58b941(0x10d))[_0x58b941(0x1b9)]({'botID':botID})[_0x58b941(0x190)]();if(_0x2ab578){const _0x4e5d11=!_0x2ab578[_0x58b941(0x15f)];dbConfig[_0x58b941(0x146)]('bot')[_0x58b941(0x1b9)]({'botID':botID})['assign']({'headless':_0x4e5d11})[_0x58b941(0xcc)](),config[_0x58b941(0x15f)]=_0x4e5d11,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1831da=_0x3a081a;process[_0x1831da(0x1fc)]({'updatebotmanager':!![]},_0x1a1d77=>{});}async function loadCoins(_0x3cc2e6){const _0x29e720=_0x3a081a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x43e288,_0x55ac19=0x0,_0x2dde7e=0x0;_0x3cc2e6[_0x29e720(0xc6)](_0x4fd51e=>{const _0x1f55a6=_0x29e720;loading[_0x1f55a6(0x16e)][_0x1f55a6(0x108)](_0x4fd51e);}),loadingCanceled=![];let _0x251533=![];while(_0x43e288!=_0x3cc2e6[_0x29e720(0x23f)]){_0x43e288=0x0,_0x3cc2e6[_0x29e720(0xc6)](_0x40975a=>{const _0x2bde05=_0x29e720;if(global['ticker'][noslash(_0x40975a)]){loading[_0x2bde05(0x16e)]=loading[_0x2bde05(0x16e)][_0x2bde05(0x118)](_0x5c92dc=>_0x5c92dc!=_0x40975a);if(!watchedSymbols[_0x2bde05(0x131)](_0x40975a))watchedSymbols[_0x2bde05(0x108)](_0x40975a);_0x43e288++;}}),loading['progress']=Math[_0x29e720(0x16f)](_0x43e288/_0x3cc2e6[_0x29e720(0x23f)]*0x64);loading[_0x29e720(0x22b)]!=0x64&&(_0x2dde7e>0x1e*0x5&&(loading[_0x29e720(0x125)]=!![],emitLoadingProgress()),_0x2dde7e>0x78*0x5&&!_0x251533&&(loading[_0x29e720(0x1ea)]=!![],emitLoadingProgress(),_0x251533=!![],logHistory('error',_0x29e720(0x1f3)+loading[_0x29e720(0x16e)][_0x29e720(0x206)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x29e720(0x1af),_0x29e720(0x1cf)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x545adb=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x29e720(0x1ea)]=!![],emitLoadingProgress();break;}else _0x43e288!=_0x55ac19&&(_0x55ac19=_0x43e288,emitLoadingProgress()),_0x2dde7e++,await sleep(0xc8);}_0x43e288==_0x3cc2e6[_0x29e720(0x23f)]&&(coinsLoaded=!![],process[_0x29e720(0x1fc)]({'status':_0x29e720(0x1c7),'live':_0x29e720(0x18a)},_0x1f2ca5=>{}),_0x251533&&logHistory(_0x29e720(0x134),_0x29e720(0x102)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5e674f=_0x3a081a;proxyEmit(_0x5e674f(0x1f7),{...emittedConfiguration(),'configstate':_0x5e674f(0xc8)});}function emitLoadingProgress(){const _0x288695=_0x3a081a;proxyEmit(_0x288695(0x210),loading);}async function getFiat(){const _0x1b2105=_0x3a081a;let _0x424422=global[_0x1b2105(0x1f8)][stablecoins[_0x1b2105(0x21e)]['coin']],_0x5ce10e=global[_0x1b2105(0x1f8)][stablecoins[_0x1b2105(0x169)][_0x1b2105(0x202)]];return{'eur':Number(_0x424422),'usd':Number(_0x5ce10e)};}function capitalize(_0x41501b){const _0xb2de05=_0x3a081a;return _0x41501b['substring'](0x0,0x1)[_0xb2de05(0x1bd)]()+_0x41501b[_0xb2de05(0xf7)](0x1);}function supportedExchanges(){const _0x3cd7fa=_0x3a081a,_0x3f4184=['ws',_0x3cd7fa(0x17a),_0x3cd7fa(0x150),_0x3cd7fa(0x17c),'watchOrders',_0x3cd7fa(0x18f),_0x3cd7fa(0x231),_0x3cd7fa(0x1bb),'fetchClosedOrders','fetchBalance'];let _0x784300=[],_0x5a3763=[],_0x289ae7=ccxt['exchanges'];_0x289ae7[_0x3cd7fa(0xc6)](_0x6b8216=>{const _0x50cacf=_0x3cd7fa;try{const _0x4f6bd9=new ccxt[_0x6b8216]();if(_0x4f6bd9[_0x50cacf(0x142)]['ws'])_0x5a3763[_0x50cacf(0x108)](_0x4f6bd9);}catch(_0x295baa){}}),_0x5a3763[_0x3cd7fa(0xc6)](_0x1b1cbd=>{const _0x163b1b=_0x3cd7fa;let _0x57d1a3=0x0;_0x3f4184['forEach'](_0x24bfc3=>{const _0xf8622c=_0x91ee;_0x24bfc3 in _0x1b1cbd['has']&&_0x1b1cbd[_0xf8622c(0x142)][_0x24bfc3]&&_0x57d1a3++;}),_0x57d1a3==_0x3f4184['length']&&_0x784300[_0x163b1b(0x108)](capitalize(_0x1b1cbd['id']));});let _0xaf1816=[];return _0x289ae7['forEach'](_0x13a644=>{const _0x3623d1=_0x3cd7fa;_0x13a644=capitalize(_0x13a644);if(!_0x784300['includes'](_0x13a644))_0xaf1816[_0x3623d1(0x108)](_0x13a644);}),_0x784300;}function setStartDatePerformance(){const _0x166634=_0x3a081a;if(config&&config['liquidity'][0x0][_0x166634(0x116)]['length']!=0x0){const _0x5395f4=config[_0x166634(0x1d7)][0x0][_0x166634(0x116)];dbPerformance[_0x166634(0x146)](_0x166634(0x225))[_0x166634(0x1b9)]({'date':config[_0x166634(0x200)]})[_0x166634(0x242)]({'coins':_0x5395f4})[_0x166634(0xcc)]();}}async function recreateCoinResults(){const _0x3d6870=_0x3a081a;let _0x5a7a27,_0x47faa6=[];try{const _0x14839b=fns[_0x3d6870(0xf9)](fns['parseISO'](config[_0x3d6870(0x200)][_0x3d6870(0x1eb)](/\//g,'-')),_0x3d6870(0x1bf));for(const _0x423d6f of currentCoins){if(_0x423d6f[_0x3d6870(0x202)]!=config[_0x3d6870(0x1be)]){let _0x234c34=0x0,_0x4331af,_0x480a12;_0x5a7a27=await getAllEventOrders(_0x423d6f[_0x3d6870(0xf1)]);if(_0x5a7a27['length']>0x0)_0x5a7a27['forEach'](_0x1f5029=>{const _0x3c1d16=_0x3d6870,_0x52e505=_0x423d6f[_0x3c1d16(0xf1)][_0x3c1d16(0x131)](config[_0x3c1d16(0x1be)]+'/');_0x47faa6[_0x3c1d16(0x108)]({'datetime':_0x1f5029[_0x3c1d16(0x171)],'coin':_0x423d6f[_0x3c1d16(0x202)],'symbol':_0x423d6f[_0x3c1d16(0xf1)],'side':_0x1f5029['side'],'reverse':_0x52e505,'amount':formatResult(_0x1f5029['filled'],0x8),'filled':formatResult(_0x1f5029['filled'],0x8),'price':formatResult(_0x1f5029['price'],0x8)}),_0x234c34=_0x1f5029['side']==_0x3c1d16(0x19b)?_0x234c34+_0x1f5029[_0x3c1d16(0x207)]:_0x234c34-_0x1f5029[_0x3c1d16(0x207)];if(!_0x480a12)_0x480a12=_0x1f5029['price'];});_0x4331af=_0x423d6f['number']-_0x234c34;let _0x10770c;config[_0x3d6870(0x1d7)][_0x3d6870(0xc6)](_0x479200=>{const _0x3fc5d5=_0x3d6870;!_0x10770c&&(_0x10770c=_0x479200[_0x3fc5d5(0x116)][_0x3fc5d5(0x1b9)](_0x21b53f=>_0x21b53f['coin']==_0x423d6f[_0x3fc5d5(0x202)]),_0x10770c&&(_0x4331af=_0x10770c[_0x3fc5d5(0x22a)],_0x480a12=_0x10770c[_0x3fc5d5(0x176)]));});let _0x2439a5=dbCoinResults[_0x3d6870(0x146)](_0x3d6870(0xe0))[_0x3d6870(0x1b9)]({'coin':_0x423d6f[_0x3d6870(0x202)]})['value']();_0x2439a5={'coin':_0x423d6f[_0x3d6870(0x202)],'number':_0x4331af,'breakeven':_0x480a12,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3d6870(0x146)]('coins')[_0x3d6870(0x1b9)]({'coin':_0x423d6f[_0x3d6870(0x202)]})[_0x3d6870(0x242)](_0x2439a5)[_0x3d6870(0xcc)]();}}_0x47faa6[_0x3d6870(0x1dd)]((_0x1d0cb9,_0x4854d3)=>_0x1d0cb9[_0x3d6870(0x171)]>_0x4854d3['datetime']?0x1:_0x4854d3[_0x3d6870(0x171)]>_0x1d0cb9[_0x3d6870(0x171)]?-0x1:0x0);let _0x43f554=0x0;for(let _0x13884e of _0x47faa6){await updateCoinResults(_0x13884e,!![]);}}catch(_0x5a4f5c){await handleError(_0x5a4f5c,'recreateCoinResults()');}}async function getAllEventOrders(_0x45507a){const _0x2eced9=_0x3a081a;let _0x4be0ea=[],_0x21a407=dbLogs[_0x2eced9(0x146)]('logs')['filter'](_0x2875cd=>{const _0x2d5080=_0x2eced9,_0x18aaa4=_0x2875cd['event'][_0x2d5080(0x1e8)]();return _0x18aaa4[_0x2d5080(0x131)](_0x45507a[_0x2d5080(0x1e8)]())&&(_0x18aaa4[_0x2d5080(0x131)](_0x2d5080(0x1b4))&&_0x18aaa4[_0x2d5080(0x131)](_0x2d5080(0x20e))||_0x18aaa4['includes'](_0x2d5080(0x207))&&_0x18aaa4[_0x2d5080(0x131)]('order'));})['sortBy'](_0x2eced9(0x1d2))[_0x2eced9(0x190)]();return _0x21a407[_0x2eced9(0xc6)](_0x56cddd=>{const _0xe1bada=_0x2eced9,_0xbf73fa=_0x56cddd[_0xe1bada(0x167)][_0xe1bada(0x131)](_0xe1bada(0x186))?_0xe1bada(0x186):'buy',_0x1ac0d3=/#([0-9]|\.)+\s/i,_0x1eeb8b=Number(_0x1ac0d3['exec'](_0x56cddd[_0xe1bada(0x167)])[0x0][_0xe1bada(0x1ec)](0x1)),_0x170f32=/@([0-9]|\.)+$/i,_0x39099b=Number(_0x170f32[_0xe1bada(0xe5)](_0x56cddd[_0xe1bada(0x167)])[0x0]['slice'](0x1));_0x4be0ea['push']({'datetime':_0x56cddd['time'],'coin':symbolToCoin(_0x45507a),'symbol':_0x45507a,'side':_0xbf73fa,'amount':_0x1eeb8b,'filled':_0x1eeb8b,'price':_0x39099b});}),_0x4be0ea;}async function getAllOrders(_0x199c37,_0x9f6abc){const _0x177bb9=_0x3a081a;let _0x91c05a=[];while(_0x9f6abc<exchange['milliseconds']()){const _0x1892c7=0x1f4,_0x2c4e30=await exchange[_0x177bb9(0x19a)](_0x199c37,_0x9f6abc,_0x1892c7);if(_0x2c4e30[_0x177bb9(0x23f)])_0x9f6abc=_0x2c4e30[_0x2c4e30[_0x177bb9(0x23f)]-0x1][_0x177bb9(0x11f)]+0x1,_0x91c05a=_0x91c05a[_0x177bb9(0x123)](_0x2c4e30);else break;}return _0x91c05a;}async function validate24hChanges(){const _0x1519f4=_0x3a081a;for(const _0x1bf7d9 of currentCoins){if(_0x1bf7d9[_0x1519f4(0x202)]!=config[_0x1519f4(0x1be)]){let _0x198832;_0x1bf7d9[_0x1519f4(0xde)]?_0x198832=formatResult((0x1/(global[_0x1519f4(0x17f)][noslash(_0x1bf7d9[_0x1519f4(0xf1)])]/0x64+0x1)-0x1)*0x64,0x3):_0x198832=global['change'][noslash(_0x1bf7d9[_0x1519f4(0xf1)])],_0x198832<config[_0x1519f4(0x168)]&&(logHistory(_0x1519f4(0x1af),_0x1bf7d9[_0x1519f4(0x202)]+_0x1519f4(0x12c)+_0x198832+'%'),logHistory(_0x1519f4(0x1af),_0x1519f4(0x1ad)),logHistory(_0x1519f4(0x1af),_0x1519f4(0x241)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x1db4ee,_0x2ce638){const _0x5c831c=_0x3a081a;if(!_0x1db4ee)return!![];const _0x14e18d=_0x2ce638[_0x5c831c(0x213)]('.'),_0xe67670=_0x1db4ee['split']('.');for(var _0x3602a3=0x0;_0x3602a3<_0xe67670[_0x5c831c(0x23f)];_0x3602a3++){const _0x2da5b4=~~_0xe67670[_0x3602a3],_0x29d217=~~_0x14e18d[_0x3602a3];if(_0x2da5b4<_0x29d217)return!![];if(_0x2da5b4>_0x29d217)return![];}return![];}async function oneTimeMigration(){const _0x56e7df=_0x3a081a;let _0x54edd5=dbLogs[_0x56e7df(0x146)]('version')[_0x56e7df(0x190)]();if(isOlderVersion(_0x54edd5,_0x56e7df(0x18d))){let _0xc8d78a=[];const _0x5a28ed=dbLogs[_0x56e7df(0x146)](_0x56e7df(0x23a))[_0x56e7df(0x190)]();_0x5a28ed[_0x56e7df(0xc6)](_0x213a01=>{const _0xffe4cf=_0x56e7df;_0xc8d78a[_0xffe4cf(0x108)]({'time':_0x213a01['time'],'type':_0x213a01[_0xffe4cf(0x21c)],'event':_0x213a01[_0xffe4cf(0x167)]});}),dbLogs[_0x56e7df(0x146)](_0x56e7df(0x23a))['assign'](_0xc8d78a)[_0x56e7df(0xcc)]();}let _0x248099=dbConfig[_0x56e7df(0x146)](_0x56e7df(0x1df))[_0x56e7df(0x190)]();if(isOlderVersion(_0x248099,'2.3.5')){let _0x370f21=dbConfig[_0x56e7df(0x146)](_0x56e7df(0x10d))[_0x56e7df(0x1b9)]({'botID':botID})[_0x56e7df(0x190)]();if(_0x370f21){let _0x37febc=[];_0x370f21['portfolio']['forEach'](_0x27c740=>{const _0x3f95ae=_0x56e7df;_0x37febc[_0x3f95ae(0x108)]({'coin':_0x27c740['coin'],'number':_0x27c740[_0x3f95ae(0x1a3)],'price':_0x27c740[_0x3f95ae(0x1c3)]}),delete _0x27c740[_0x3f95ae(0x1a3)],delete _0x27c740['startprice'];});if(_0x37febc[_0x56e7df(0x23f)]!==0x0)fs[_0x56e7df(0x14a)](configbackuppath+(_0x56e7df(0x1c8)+botID+_0x56e7df(0x144)),JSON[_0x56e7df(0xdb)](_0x37febc,null,0x4),function(_0x112ccb){if(_0x112ccb){}});const _0x2abf51=(_0x44af92,_0x2aad6d)=>{const _0x1730a9=_0x56e7df;let _0x4a2dfc=[];_0x2aad6d[_0x1730a9(0xc6)](_0x1338c1=>{const _0x177d7e=_0x1730a9,_0x40f8e5=_0x44af92[_0x177d7e(0x1b9)](_0x221f10=>_0x221f10[_0x177d7e(0x202)]==_0x1338c1[_0x177d7e(0x202)]);if(!_0x40f8e5)_0x4a2dfc[_0x177d7e(0x108)](_0x1338c1);});let _0x1817db=[];return _0x44af92['forEach'](_0x15ba5d=>{const _0x5c129c=_0x1730a9,_0x5ec2f9=_0x2aad6d[_0x5c129c(0x1b9)](_0x40ec41=>_0x40ec41[_0x5c129c(0x202)]==_0x15ba5d[_0x5c129c(0x202)]);if(!_0x5ec2f9||_0x5ec2f9[_0x5c129c(0x22a)]==0x0&&_0x15ba5d['number']!=0x0)_0x1817db['push'](_0x15ba5d);}),{'missingDay1':_0x4a2dfc,'notInDay2':_0x1817db};},_0x1cac3d=dbPerformance['get'](_0x56e7df(0x225))[_0x56e7df(0xf5)]()[_0x56e7df(0x190)]();if(_0x1cac3d['length']>0x1){const {missingDay1:_0x222394,notInDay2:_0x4dac6d}=_0x2abf51(_0x37febc,_0x1cac3d[0x1][_0x56e7df(0xe0)]);_0x37febc=[..._0x37febc,..._0x222394],_0x4dac6d['forEach'](_0x27fa76=>{const _0x4e8710=_0x56e7df;let _0x44c5fa=_0x37febc[_0x4e8710(0x1db)](_0x461823=>_0x461823['coin']==_0x27fa76[_0x4e8710(0x202)]);_0x44c5fa!=-0x1&&_0x37febc[_0x4e8710(0x1e3)](_0x44c5fa,0x1);});}_0x37febc[_0x56e7df(0x1dd)]((_0x295603,_0x3926db)=>_0x295603[_0x56e7df(0x202)]>_0x3926db[_0x56e7df(0x202)]?0x1:_0x3926db['coin']>_0x295603[_0x56e7df(0x202)]?-0x1:0x0);let _0x192d2b=[{'date':_0x370f21[_0x56e7df(0x200)],'changes':_0x37febc}];_0x1cac3d[_0x56e7df(0x23f)]>0x2&&_0x1cac3d[_0x56e7df(0xc6)]((_0x2e5e10,_0x1dc115)=>{const _0x250c19=_0x56e7df;if(_0x1dc115>0x0&&_0x1dc115<_0x1cac3d[_0x250c19(0x23f)]-0x1){const {missingDay1:_0x4ab556,notInDay2:_0x47ce6d}=_0x2abf51(_0x1cac3d[_0x1dc115][_0x250c19(0xe0)],_0x1cac3d[_0x1dc115+0x1][_0x250c19(0xe0)]);_0x37febc=[],(_0x4ab556[_0x250c19(0x23f)]!=0x0||_0x47ce6d[_0x250c19(0x23f)]!=0x0)&&(_0x4ab556[_0x250c19(0x23f)]!=0x0&&_0x37febc[_0x250c19(0x108)](..._0x4ab556),_0x47ce6d[_0x250c19(0x23f)]!=0x0&&(_0x47ce6d[_0x250c19(0xc6)](_0x1cd4fa=>{const _0x20b7bf=_0x250c19;_0x1cd4fa['number']=-_0x1cd4fa[_0x20b7bf(0x22a)];}),_0x37febc[_0x250c19(0x108)](..._0x47ce6d)),_0x37febc[_0x250c19(0x1dd)]((_0x2bf90d,_0x45c988)=>_0x2bf90d['coin']>_0x45c988['coin']?0x1:_0x45c988[_0x250c19(0x202)]>_0x2bf90d[_0x250c19(0x202)]?-0x1:0x0),_0x192d2b[_0x250c19(0x108)]({'date':_0x1cac3d[_0x1dc115+0x1][_0x250c19(0x1f2)],'changes':_0x37febc}));}}),dbConfig['get']('bot')[_0x56e7df(0x1b9)]({'botID':botID})['assign']({..._0x370f21,'liquidity':_0x192d2b})[_0x56e7df(0xcc)]();}}if(isOlderVersion(_0x248099,_0x56e7df(0x15d))){let _0x17132e=dbConfig[_0x56e7df(0x146)](_0x56e7df(0x10d))['find']({'botID':botID})[_0x56e7df(0x190)]();if(_0x17132e){const _0xf9b8ad=_0x17132e[_0x56e7df(0x224)],_0x344146=_0xf9b8ad?capitalize(_0xf9b8ad):_0x56e7df(0x151);dbConfig[_0x56e7df(0x146)](_0x56e7df(0x10d))[_0x56e7df(0x1b9)]({'botID':botID})[_0x56e7df(0x242)]({'exchange':_0x344146})['write']();}}let _0x36c1b1=dbPerformance['get'](_0x56e7df(0x1df))[_0x56e7df(0x190)]();isOlderVersion(_0x36c1b1,_0x56e7df(0x18d))&&setStartDatePerformance();let _0x170bf4=dbCoinResults['get']('version')[_0x56e7df(0x190)]();if(isOlderVersion(_0x170bf4,_0x56e7df(0x221))){let _0x486300=dbCoinResults['get'](_0x56e7df(0xe0))[_0x56e7df(0x190)]();if(_0x486300[_0x56e7df(0x23f)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3c4173=_0x3a081a;dbConfig[_0x3c4173(0x198)](_0x3c4173(0x1df),serverversion)[_0x3c4173(0xcc)](),dbPerformance[_0x3c4173(0x198)](_0x3c4173(0x1df),serverversion)['write'](),dbLogs[_0x3c4173(0x198)]('version',serverversion)['write'](),dbCoinResults['set']('version',serverversion)[_0x3c4173(0xcc)]();}function getConfiguration(_0x1d6592){const _0x3810c8=_0x3a081a;let _0x46a800=dbConfig[_0x3810c8(0x146)](_0x3810c8(0x10d))[_0x3810c8(0x1b9)]({'botID':_0x1d6592})[_0x3810c8(0x190)]();if(_0x46a800){let _0x1557f7=![];typeof _0x46a800[_0x3810c8(0x119)]==_0x3810c8(0x1f5)&&(_0x46a800={..._0x46a800,'threshold':Number(_0x46a800['threshold'])},_0x1557f7=!![]),_0x46a800['change24h']==null&&(_0x46a800={..._0x46a800,'change24h':-0x14},_0x1557f7=!![]),!_0x46a800[_0x3810c8(0x208)]&&(_0x46a800={..._0x46a800,'fiat':_0x3810c8(0x15a)},_0x1557f7=!![]),!_0x46a800[_0x3810c8(0x1d5)]&&(_0x46a800={..._0x46a800,'onepagemode':settings['onepagemode']},_0x1557f7=!![]),!_0x46a800['colorscheme']&&(_0x46a800={..._0x46a800,'colorscheme':'red_yellow_blue'},_0x1557f7=!![]),!_0x46a800[_0x3810c8(0x147)]&&(_0x46a800={..._0x46a800,'autoliquidity':!![]},_0x1557f7=!![]),_0x1557f7&&(_0x46a800={'botID':_0x46a800[_0x3810c8(0x212)],'exchange':_0x46a800[_0x3810c8(0x224)],'apiKey':_0x46a800['apiKey'],'apiSecret':_0x46a800['apiSecret'],'apiPassword':_0x46a800['apiPassword'],'basecoin':_0x46a800[_0x3810c8(0x1be)],'botname':_0x46a800[_0x3810c8(0xe4)],'showname':_0x46a800['showname'],'threshold':_0x46a800[_0x3810c8(0x119)],'ordertype':_0x46a800[_0x3810c8(0xc3)],'timeout':_0x46a800[_0x3810c8(0x125)],'fiat':_0x46a800[_0x3810c8(0x208)],'startdate':_0x46a800[_0x3810c8(0x200)],'recreate':_0x46a800['recreate'],'timeshift':_0x46a800[_0x3810c8(0x110)],'onepagemode':_0x46a800[_0x3810c8(0x1d5)],'headless':_0x46a800['headless'],'cooldown':_0x46a800[_0x3810c8(0x214)],'change24h':_0x46a800[_0x3810c8(0x168)],'emojibuy':_0x46a800[_0x3810c8(0x22c)],'emojisell':_0x46a800[_0x3810c8(0x1a5)],'colorscheme':_0x46a800[_0x3810c8(0x1a7)],'portfolio':_0x46a800['portfolio'],'autoliquidity':_0x46a800[_0x3810c8(0x147)],'liquidity':_0x46a800[_0x3810c8(0x1d7)],'openOrders':_0x46a800[_0x3810c8(0x120)]},dbConfig[_0x3810c8(0x146)]('bot')[_0x3810c8(0x1ef)]()[_0x3810c8(0xcc)](),dbConfig['get'](_0x3810c8(0x10d))[_0x3810c8(0x108)](_0x46a800)[_0x3810c8(0xcc)]());}else _0x46a800={'botID':_0x1d6592,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3810c8(0x216)+_0x1d6592,'showname':![],'threshold':0x3,'ordertype':_0x3810c8(0x1b4),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x3810c8(0x110)],'onepagemode':settings[_0x3810c8(0x1d5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x46a800;}function emittedConfiguration(){const _0x272823=_0x3a081a;let _0x4343ed;if(config[_0x272823(0x239)]=='')_0x4343ed={...config,'configstate':_0x272823(0x14b)};else config[_0x272823(0x239)]=='***'?_0x4343ed={...config,'configstate':_0x272823(0x100)}:(_0x4343ed={...config,'apiKey':_0x272823(0xd3),'apiSecret':_0x272823(0xd3)},config[_0x272823(0x243)]&&(_0x4343ed[_0x272823(0x243)]=_0x272823(0xd3)));return _0x4343ed;}function getSettings(){const _0x4b082a=_0x3a081a;return dbSettings[_0x4b082a(0x146)](_0x4b082a(0x152))[_0x4b082a(0x190)]();}function getSecure(){const _0xb50652=_0x3a081a;return dbSecure['get'](_0xb50652(0x1ca))[_0xb50652(0x190)]()||{};}function updateTimeshift(_0x31d937){const _0x38973f=_0x3a081a;let _0x2db57b=dbConfig['get'](_0x38973f(0x10d))[_0x38973f(0x1b9)]({'botID':botID})['value']();_0x2db57b&&dbConfig[_0x38973f(0x146)]('bot')[_0x38973f(0x1b9)]({'botID':botID})[_0x38973f(0x242)]({'timeshift':_0x31d937})['write'](),config[_0x38973f(0x110)]=_0x31d937,proxyEmit(_0x38973f(0x1f7),emittedConfiguration());}function updateOnepagemode(_0x5ed98c){const _0xa57bd=_0x3a081a;let _0xb96204=dbConfig['get'](_0xa57bd(0x10d))['find']({'botID':botID})['value']();_0xb96204&&dbConfig[_0xa57bd(0x146)]('bot')[_0xa57bd(0x1b9)]({'botID':botID})[_0xa57bd(0x242)]({'onepagemode':_0x5ed98c})[_0xa57bd(0xcc)](),config[_0xa57bd(0x1d5)]=_0x5ed98c,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x324e42){const _0x57a7d5=_0x3a081a;logger['debug'](_0x57a7d5(0x1c6));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x57a7d5(0x163)]('Transaction\x20detection\x20blocked');let _0x2f9855=[],_0xb1c2f2=![],_0xbebaec=![],_0x20ade6=[];_0x324e42[_0x57a7d5(0x229)][_0x57a7d5(0xc6)](_0x11215b=>{const _0x54bede=_0x57a7d5;if(!_0x11215b[_0x54bede(0x139)]&&_0x11215b[_0x54bede(0x202)]!=_0x324e42[_0x54bede(0x1be)])_0x20ade6[_0x54bede(0x108)](_0x11215b[_0x54bede(0xf1)]);}),_0x20ade6['forEach'](_0x11374f=>{const _0x465498=_0x57a7d5,_0x3d038a=watchedSymbols[_0x465498(0x131)](_0x11374f);!_0x3d038a&&_0x2f9855[_0x465498(0x108)](_0x11374f);}),_0x20ade6[_0x57a7d5(0xc6)](_0x5d12e3=>{const _0x5c55bc=_0x57a7d5,_0x36b4b6=currentCoins[_0x5c55bc(0x1b9)](_0xae7766=>_0xae7766[_0x5c55bc(0xf1)]==_0x5d12e3);!_0x36b4b6&&(_0xb1c2f2=!![]);}),currentCoins[_0x57a7d5(0xc6)](_0x167036=>{const _0x16b989=_0x57a7d5;if(_0x167036[_0x16b989(0x202)]!=config[_0x16b989(0x1be)]){const _0x246d17=_0x20ade6[_0x16b989(0x1b9)](_0x4467d5=>_0x4467d5==_0x167036[_0x16b989(0xf1)]);!_0x246d17&&(_0xb1c2f2=!![]);}}),_0x324e42[_0x57a7d5(0x229)][_0x57a7d5(0xc6)](_0x1ddbe3=>{const _0x5b14ee=_0x57a7d5,_0xc3d8e9=config['portfolio'][_0x5b14ee(0x1b9)](_0x34a58a=>_0x34a58a[_0x5b14ee(0x202)]==_0x1ddbe3['coin']);if(_0xc3d8e9&&_0x1ddbe3[_0x5b14ee(0x232)]!=_0xc3d8e9[_0x5b14ee(0x232)])_0xbebaec=!![];});let _0x58a6ae=dbConfig[_0x57a7d5(0x146)]('bot')['find']({'botID':botID})[_0x57a7d5(0x190)]();_0x324e42={..._0x324e42,'apiKey':crypt[_0x57a7d5(0x1f0)](secure[_0x57a7d5(0x124)],_0x324e42[_0x57a7d5(0x239)])[_0x57a7d5(0x22f)],'apiSecret':crypt[_0x57a7d5(0x1f0)](secure[_0x57a7d5(0x124)],_0x324e42[_0x57a7d5(0x23c)])[_0x57a7d5(0x22f)]};_0x324e42[_0x57a7d5(0x243)]&&(_0x324e42[_0x57a7d5(0x243)]=crypt[_0x57a7d5(0x1f0)](secure[_0x57a7d5(0x124)],_0x324e42['apiPassword'])[_0x57a7d5(0x22f)]);let _0x3f1dd4=![];if(_0x58a6ae){_0x324e42[_0x57a7d5(0x239)]==_0x57a7d5(0xd3)?_0x324e42[_0x57a7d5(0x239)]=config[_0x57a7d5(0x239)]:_0x3f1dd4=!![];_0x324e42[_0x57a7d5(0x23c)]==_0x57a7d5(0xd3)?_0x324e42[_0x57a7d5(0x23c)]=config[_0x57a7d5(0x23c)]:_0x3f1dd4=!![];if(_0x324e42['apiPassword']==_0x57a7d5(0xd3))_0x324e42[_0x57a7d5(0x243)]=config['apiPassword'];else{if(_0x324e42[_0x57a7d5(0x243)])_0x3f1dd4=!![];}dbConfig[_0x57a7d5(0x146)](_0x57a7d5(0x10d))[_0x57a7d5(0x1b9)]({'botID':botID})['assign'](_0x324e42)[_0x57a7d5(0xcc)]();}else dbConfig[_0x57a7d5(0x146)](_0x57a7d5(0x10d))[_0x57a7d5(0x108)](_0x324e42)[_0x57a7d5(0xcc)](),_0x3f1dd4=!![],process[_0x57a7d5(0x1fc)]({'status':_0x57a7d5(0x1c7),'live':'running'},_0xe94030=>{});process['send']({'botname':_0x324e42[_0x57a7d5(0xe4)]},_0x4c33d5=>{}),updateBotManager(),config={..._0x324e42},proxyEmit(_0x57a7d5(0x1ab)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x3f1dd4)await reset(_0x2f9855,!![]);else _0xb1c2f2||_0xbebaec?await reset(_0x2f9855,![]):getBalances();blockTransactionDetection=![],logger[_0x57a7d5(0x163)](_0x57a7d5(0x1e0));}async function storeHeadless(_0x2f1aa9){const _0x59ae3f=_0x3a081a,_0x48815b={...config,'headless':_0x2f1aa9[_0x59ae3f(0x15f)]};let _0x5cfe9e=dbConfig[_0x59ae3f(0x146)]('bot')[_0x59ae3f(0x1b9)]({'botID':botID})[_0x59ae3f(0x190)]();_0x5cfe9e&&dbConfig[_0x59ae3f(0x146)](_0x59ae3f(0x10d))['find']({'botID':botID})[_0x59ae3f(0x242)](_0x48815b)[_0x59ae3f(0xcc)](),config={..._0x48815b},updateBotManager(),proxyEmit(_0x59ae3f(0x1f7),emittedConfiguration());}async function storeFiat(_0x1abb74){const _0x6e2461=_0x3a081a,_0x1beb71={...config,'fiat':_0x1abb74};let _0x185e57=dbConfig[_0x6e2461(0x146)](_0x6e2461(0x10d))[_0x6e2461(0x1b9)]({'botID':botID})['value']();_0x185e57&&dbConfig[_0x6e2461(0x146)]('bot')[_0x6e2461(0x1b9)]({'botID':botID})['assign'](_0x1beb71)[_0x6e2461(0xcc)](),config={..._0x1beb71},proxyEmit(_0x6e2461(0x1f7),emittedConfiguration());}function resetHistory(){const _0x131ba1=_0x3a081a;logger[_0x131ba1(0x230)](_0x131ba1(0x20b));try{if(fs[_0x131ba1(0x19f)](path[_0x131ba1(0x206)](configpath,_0x131ba1(0x161)+botID+_0x131ba1(0xf3))))fs[_0x131ba1(0x179)](path['join'](configpath,_0x131ba1(0x161)+botID+_0x131ba1(0xf3)));if(fs['existsSync'](path[_0x131ba1(0x206)](configpath,_0x131ba1(0x161)+botID+_0x131ba1(0x1d8))))fs['unlinkSync'](path['join'](configpath,_0x131ba1(0x161)+botID+_0x131ba1(0x1d8)));if(fs[_0x131ba1(0x19f)](path[_0x131ba1(0x206)](configpath,_0x131ba1(0x161)+botID+_0x131ba1(0xc7))))fs[_0x131ba1(0x179)](path[_0x131ba1(0x206)](configpath,_0x131ba1(0x161)+botID+'-results.json'));}catch(_0x16e397){if(_0x16e397)logger['full'](_0x131ba1(0x105),_0x16e397);}const _0x4f543a=getDate();let _0x4a7042=[];currentCoins[_0x131ba1(0xc6)](_0x58cfc7=>{const _0x17fc06=_0x131ba1;_0x4a7042[_0x17fc06(0x108)]({'coin':_0x58cfc7['coin'],'number':_0x58cfc7[_0x17fc06(0x22a)],'price':_0x58cfc7[_0x17fc06(0x11c)]});});let _0x547f9e=dbConfig['get'](_0x131ba1(0x10d))[_0x131ba1(0x1b9)]({'botID':botID})[_0x131ba1(0x190)]();_0x547f9e&&(dbConfig[_0x131ba1(0x146)](_0x131ba1(0x10d))[_0x131ba1(0x1b9)]({'botID':botID})['assign']({'liquidity':[{'date':_0x4f543a,'changes':_0x4a7042}]})[_0x131ba1(0xcc)](),config['liquidity']=[]),process[_0x131ba1(0x1fc)]({'stop':_0x131ba1(0x12a)},_0x2d9854=>{});}function noslash(_0x5555a3){const _0x1cfcb1=_0x3a081a;return _0x5555a3[_0x1cfcb1(0x1eb)]('/','');}function updateHighestFee(_0x5df408,_0x1a5c92){const _0x38b589=_0x3a081a;lastFees['currency']=_0x5df408,lastFees[_0x38b589(0x18e)]['length']===0x14&&lastFees['recent20']['shift'](),lastFees[_0x38b589(0x18e)]['push'](_0x1a5c92),lastFees[_0x38b589(0x1c5)]=Math[_0x38b589(0xdd)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4ea894){const _0x25617c=_0x3a081a;logger[_0x25617c(0x163)]('0\x20-\x20EXECUTION:\x20'+_0x4ea894['symbol']+_0x25617c(0x13f)+_0x4ea894[_0x25617c(0x172)]+'\x20|\x20'+_0x4ea894['id']);let _0x38ee90=_0x4ea894[_0x25617c(0x172)],_0x41b785=![];currentCoins[_0x25617c(0xc6)](_0xb9ff8=>{const _0x3ae99d=_0x25617c;_0xb9ff8['symbol']==_0x4ea894[_0x3ae99d(0xf1)]&&(_0x41b785=!![]);});if(!_0x41b785)return;const _0x257c4c=currentCoins['find'](_0x366e27=>_0x366e27[_0x25617c(0xf1)]==_0x4ea894[_0x25617c(0xf1)]),_0x5d38d4=_0x4b29d0=>{if(_0x257c4c)_0x257c4c['orderstatus']=_0x4b29d0;};if(_0x38ee90=='open')_0x5d38d4(_0x25617c(0x10c));else{if(_0x38ee90==_0x25617c(0x218)){_0x5d38d4(_0x25617c(0x218));const _0x17bcff=await getCoins();[currentCoins,currentCoinsAll]=_0x17bcff,await getOpenOrders(),handleOpenOrders();}else{if(_0x38ee90==_0x25617c(0x130)){logger['debug'](_0x25617c(0xf8)+_0x4ea894[_0x25617c(0xf1)]+'\x20|\x20'+_0x4ea894[_0x25617c(0x207)]+_0x25617c(0x13f)+_0x4ea894['id']);let _0x1685ba=![];if(lastOrders)for(const _0x1d022a of lastOrders){const _0xbd75c8=0xc8,_0x1708b8=0x1388;let _0x78860f=0x0;while(!_0x1d022a['orderId']&&_0x78860f*_0xbd75c8<_0x1708b8){_0x78860f++,await sleep(_0xbd75c8);}if(_0x78860f>0x0)logger['debug'](_0x25617c(0xfe)+_0x78860f*_0xbd75c8/0x3e8+_0x25617c(0x1a1));if(_0x1d022a['orderId']==_0x4ea894['id']){logger[_0x25617c(0x163)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x4ea894['id']),_0x1685ba=!![];if(_0x1d022a[_0x25617c(0x207)]==0x0){logger[_0x25617c(0x163)](_0x25617c(0xe6)+_0x4ea894['id']);if(_0x4ea894[_0x25617c(0x14c)])_0x1d022a[_0x25617c(0x176)]=_0x4ea894[_0x25617c(0x14c)];else{if(_0x4ea894[_0x25617c(0x176)])_0x1d022a[_0x25617c(0x176)]=_0x4ea894[_0x25617c(0x176)];else{}}_0x1d022a['filled']=_0x4ea894[_0x25617c(0x207)],_0x1d022a[_0x25617c(0x1ae)]={'currency':_0x4ea894['fee']?_0x4ea894[_0x25617c(0x1ae)][_0x25617c(0x1cb)]:null,'cost':_0x4ea894[_0x25617c(0x1ae)]?_0x4ea894[_0x25617c(0x1ae)][_0x25617c(0x1e1)]:0x0},updateHighestFee(_0x1d022a[_0x25617c(0x1ae)][_0x25617c(0x1cb)],_0x1d022a[_0x25617c(0x1ae)][_0x25617c(0x1e1)]),_0x5d38d4(_0x25617c(0x207)),await validateOrders();if(lockOrders==ORDERS[_0x25617c(0x217)]){const _0xe76027=await getCoins();[currentCoins,currentCoinsAll]=_0xe76027;}await updateCoinResults(_0x1d022a);}}}if(!_0x1685ba){logger[_0x25617c(0x163)](_0x25617c(0x19e)+_0x4ea894['id']),_0x5d38d4(_0x25617c(0x207));const _0x41bdbe=await getCoins();[currentCoins,currentCoinsAll]=_0x41bdbe,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x28bdff=JSON['parse'](lastBalances['portfolio']);const _0x2a3022=_0x28bdff[_0x25617c(0x1b9)](_0x22df09=>_0x22df09[_0x25617c(0xf1)]==_0x4ea894['symbol']);if(_0x2a3022){if(_0x38ee90=='open')_0x2a3022[_0x25617c(0x159)]=_0x2a3022[_0x25617c(0x159)]==_0x25617c(0x207)?'filled':_0x25617c(0x10c);else{if(_0x38ee90=='canceled')_0x2a3022[_0x25617c(0x159)]=_0x2a3022['orderstatus']==_0x25617c(0x207)?'filled':_0x25617c(0x218);else _0x38ee90==_0x25617c(0x130)&&(_0x2a3022[_0x25617c(0x159)]=_0x25617c(0x207));}}lastBalances={...lastBalances,'portfolio':JSON[_0x25617c(0xdb)](_0x28bdff)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xd47c1e=_0x3a081a;await getOpenOrders();let _0x263629=![];currentCoins[_0xd47c1e(0xc6)](_0x19d134=>{const _0x4344e0=_0xd47c1e;_0x263629=allOpenOrders['find'](_0x58c96e=>_0x58c96e[_0x4344e0(0xf1)]==_0x19d134[_0x4344e0(0xf1)]),_0x19d134[_0x4344e0(0x159)]=_0x263629?'open':_0x4344e0(0x226);});}async function getCoins(_0x4c754b=!![],_0x23d80a=config[_0x3a081a(0x1be)]){const _0x82b413=_0x3a081a;let _0x3477a8,_0x2702c5=[],_0x325336=[],_0x1c0878=[],_0x48c553=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3477a8=await exchange[_0x82b413(0xd2)](),mybalances=_0x3477a8['total'];for(const [_0x2d0930,_0x1a10e0]of Object[_0x82b413(0x154)](mybalances)){_0x48c553[_0x82b413(0x108)](_0x2d0930);}if(_0x23d80a=='')for(const [_0x32dcd0,_0xb7bb4d]of Object['entries'](mybalances)){_0xb7bb4d[_0x82b413(0xd5)]()!=0x0&&_0x325336[_0x82b413(0x108)]({'coin':_0x32dcd0});}else{let _0x318e4e=![];for(const [_0xd5f4e1,_0x302ece]of Object[_0x82b413(0x154)](mybalances)){if(_0x48c553[_0x82b413(0x131)](_0xd5f4e1)){const _0x1f47d7=config['portfolio'][_0x82b413(0x1b9)](_0x6c0a6=>_0x6c0a6[_0x82b413(0x202)]==_0xd5f4e1),_0x69d5b9=_0xd5f4e1+'/'+_0x23d80a,_0x3a1c23=_0x23d80a+'/'+_0xd5f4e1,_0x2618de=currentCoins['find'](_0x15472b=>_0x15472b[_0x82b413(0x202)]==_0xd5f4e1);_0x318e4e=![];if((_0x302ece['toString']()!=0x0||_0x1f47d7)&&(allSymbols['includes'](_0x69d5b9)||_0xd5f4e1==_0x23d80a))_0xd5f4e1!=_0x23d80a&&_0x2702c5[_0x82b413(0x108)](_0x69d5b9),_0x325336['push']({'coin':_0xd5f4e1,'symbol':_0x69d5b9,'reverse':![],'number':Math[_0x82b413(0xdd)](_0x302ece+(_0x1f47d7&&_0x1f47d7[_0x82b413(0x232)]||0x0),0x0),'orderstatus':_0x2618de?_0x2618de['orderstatus']:_0x82b413(0x226)});else(_0x302ece['toString']()!=0x0||_0x1f47d7)&&allSymbols['includes'](_0x3a1c23)&&(_0xd5f4e1!=_0x23d80a&&_0x2702c5['push'](_0x3a1c23),_0x325336[_0x82b413(0x108)]({'coin':_0xd5f4e1,'symbol':_0x3a1c23,'reverse':!![],'number':Math[_0x82b413(0xdd)](_0x302ece+(_0x1f47d7&&_0x1f47d7[_0x82b413(0x232)]||0x0),0x0),'orderstatus':_0x2618de?_0x2618de[_0x82b413(0x159)]:_0x82b413(0x226)}));}}}}catch(_0x298604){if(!_0x4c754b)handleErrorNoStop(_0x298604,'getCoins()');else await handleError(_0x298604,_0x82b413(0x23d));}return _0x1c0878=cloneDeep(_0x325336),_0x325336=_0x325336[_0x82b413(0x118)](_0x3142a6=>{const _0x3be321=_0x82b413,_0x54883d=config[_0x3be321(0x229)][_0x3be321(0x1b9)](_0x5a6844=>_0x5a6844['coin']==_0x3142a6[_0x3be321(0x202)]);return _0x54883d&&!_0x54883d[_0x3be321(0x139)];}),[_0x325336,_0x1c0878];}async function getCoinNumber(_0x355fa1){const _0x2f760a=_0x3a081a;let _0x8961e2;try{const _0x4bdd6f=await exchange['fetchBalance']();_0x8961e2=_0x4bdd6f[_0x2f760a(0xdc)][_0x355fa1];}catch(_0x5e21b5){await handleError(_0x5e21b5,_0x2f760a(0x14e));}return _0x8961e2;}async function getOpenOrders(){const _0x3dc890=_0x3a081a;let _0x14f5ee;allOpenOrders=[];try{for(const _0x3cda89 of config[_0x3dc890(0x229)]){!_0x3cda89[_0x3dc890(0x139)]&&_0x3cda89[_0x3dc890(0x202)]!=config[_0x3dc890(0x1be)]&&(_0x14f5ee=await exchange[_0x3dc890(0x1bb)](_0x3cda89[_0x3dc890(0xf1)]),_0x14f5ee[_0x3dc890(0x23f)]>0x0&&allOpenOrders[_0x3dc890(0x108)](_0x14f5ee[0x0]));}}catch(_0x258e54){await handleError(_0x258e54,_0x3dc890(0x21a));}}async function handleOpenOrders(_0x14c0d6=0x0){const _0x3c22d2=_0x3a081a;allOpenOrders[_0x3c22d2(0x23f)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x14c0d6==0x0?(logger[_0x3c22d2(0x163)](_0x3c22d2(0x227)),_0x14c0d6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x3c22d2(0x1d4))));}async function testAPI(_0x2d1baf){const _0x33250e=_0x3a081a,_0xc963d=ccxt[_0x2d1baf[_0x33250e(0x224)][_0x33250e(0x1e8)]()],_0x1a4d41=new _0xc963d({'apiKey':_0x2d1baf['apiKey'],'secret':_0x2d1baf[_0x33250e(0x23c)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x2d1baf['exchange']=='Bybit'&&(_0x1a4d41[_0x33250e(0x19d)]={'defaultType':_0x33250e(0x1b8),'adjustForTimeDifference':!![],'recvWindow':0x1b58});if(_0x2d1baf[_0x33250e(0x243)])_0x1a4d41[_0x33250e(0x113)]=_0x2d1baf[_0x33250e(0x243)];try{await _0x1a4d41[_0x33250e(0xeb)]();}catch(_0x5560d3){throw _0x5560d3;}}function cloneDeep(_0x50b8ed){const _0x2e2dc5=_0x3a081a;return JSON['parse'](JSON[_0x2e2dc5(0xdb)](_0x50b8ed));}async function getPortfolio(_0x4f3beb){const _0x2a8efa=_0x3a081a;let _0x1ba6c5=[],_0x371f67=[],_0x193e19=[],_0x2cd2e6;if(_0x4f3beb[_0x2a8efa(0x239)]!==_0x2a8efa(0xd3)||_0x4f3beb['apiSecret']!==_0x2a8efa(0xd3)||_0x4f3beb[_0x2a8efa(0x243)]&&_0x4f3beb[_0x2a8efa(0x243)]!==_0x2a8efa(0xd3)){if(config[_0x2a8efa(0x224)]){if(_0x4f3beb[_0x2a8efa(0x239)]==_0x2a8efa(0xd3))_0x4f3beb[_0x2a8efa(0x239)]=config['apiKey'];if(_0x4f3beb[_0x2a8efa(0x23c)]==_0x2a8efa(0xd3))_0x4f3beb['apiSecret']=config[_0x2a8efa(0x23c)];if(_0x4f3beb[_0x2a8efa(0x243)]==_0x2a8efa(0xd3))_0x4f3beb[_0x2a8efa(0x243)]=config[_0x2a8efa(0x243)];try{await testAPI(_0x4f3beb);}catch(_0x5878a2){if(_0x5878a2['toString']()['includes']('AuthenticationError')){logger[_0x2a8efa(0x163)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit('portfolio',![]);return;}else{handleError(_0x5878a2,'getPortfolio(0)');return;}}}await initExchange(_0x4f3beb['exchange'],_0x4f3beb['apiKey'],_0x4f3beb[_0x2a8efa(0x23c)],_0x4f3beb[_0x2a8efa(0x243)]);try{await loadSymbols(_0x4f3beb[_0x2a8efa(0x224)],!![]);}catch(_0x5893e9){if(_0x5893e9[_0x2a8efa(0xd5)]()[_0x2a8efa(0x131)](_0x2a8efa(0x205))){proxyEmit(_0x2a8efa(0x229),![]);return;}else{handleError(_0x5893e9,_0x2a8efa(0xe1));return;}}const _0x59e7bf=await getCoins(![],_0x4f3beb[_0x2a8efa(0x1be)]);_0x193e19=cloneDeep(_0x59e7bf[0x1]);}else _0x193e19=cloneDeep(currentCoinsAll);if(_0x4f3beb[_0x2a8efa(0x1be)]=='')proxyEmit(_0x2a8efa(0x229),_0x193e19);else{_0x193e19[_0x2a8efa(0xc6)](_0x4937f8=>{const _0x4d66f9=_0x2a8efa;if(_0x4937f8[_0x4d66f9(0x202)]!=_0x4f3beb[_0x4d66f9(0x1be)])_0x1ba6c5[_0x4d66f9(0x108)](_0x4937f8[_0x4d66f9(0xf1)]);});try{_0x371f67=await exchange[_0x2a8efa(0x17a)](_0x1ba6c5);}catch(_0x23200d){if(_0x23200d[_0x2a8efa(0xd5)]()[_0x2a8efa(0x131)](_0x2a8efa(0x205))){proxyEmit(_0x2a8efa(0x229),![]);return;}else{handleError(_0x23200d,_0x2a8efa(0x128));return;}}_0x193e19['forEach'](_0x4fca58=>{const _0x33b531=_0x2a8efa;_0x4fca58[_0x33b531(0x202)]!=_0x4f3beb[_0x33b531(0x1be)]?_0x2cd2e6=_0x4fca58['reverse']?0x1/_0x371f67[_0x4fca58['symbol']]['last']:_0x371f67[_0x4fca58[_0x33b531(0xf1)]][_0x33b531(0x11c)]:_0x2cd2e6=0x1,_0x4fca58['price']=formatResult(_0x2cd2e6,0x8);}),proxyEmit(_0x2a8efa(0x229),_0x193e19);}}function truncateTradeAmount(_0x41cd2d,_0x5b202a){const _0x4ba110=_0x3a081a;let _0x5a578a=0x0;try{_0x5a578a=exchange[_0x4ba110(0xea)](_0x41cd2d,_0x5b202a);}catch(_0x591e3f){}return _0x5a578a;}function checkMinimums(_0x5b20dc){const _0x3367ec=_0x3a081a;let _0x1dc3c2=!![];const _0x5742d0=!_0x5b20dc[_0x3367ec(0xde)]?markets[_0x5b20dc[_0x3367ec(0xf1)]][_0x3367ec(0x193)][_0x3367ec(0x155)][_0x3367ec(0x1dc)]:markets[_0x5b20dc[_0x3367ec(0xf1)]][_0x3367ec(0x193)][_0x3367ec(0x1e1)][_0x3367ec(0x1dc)],_0x35deff=!_0x5b20dc[_0x3367ec(0xde)]?markets[_0x5b20dc['symbol']][_0x3367ec(0x193)]['cost'][_0x3367ec(0x1dc)]:markets[_0x5b20dc[_0x3367ec(0xf1)]][_0x3367ec(0x193)][_0x3367ec(0x155)]['min'],_0x2406b3=truncateTradeAmount(_0x5b20dc[_0x3367ec(0xf1)],_0x5b20dc[_0x3367ec(0x203)]);_0x5b20dc['trade']=_0x2406b3;if(Math[_0x3367ec(0x1fb)](_0x2406b3)<_0x5742d0)_0x1dc3c2=![];if(Math[_0x3367ec(0x1fb)](_0x2406b3)*_0x5b20dc[_0x3367ec(0x11c)]<_0x35deff)_0x1dc3c2=![];if(_0x5b20dc[_0x3367ec(0x1cd)]==_0x3367ec(0x186)){let _0x28c252=config[_0x3367ec(0x229)]['find'](_0x141446=>_0x141446[_0x3367ec(0x202)]==_0x5b20dc['coin']);if(_0x28c252['offset']>0x0){if(Math['abs'](_0x2406b3)>_0x5b20dc['number']-_0x28c252[_0x3367ec(0x232)])_0x1dc3c2=![];}else{if(Math[_0x3367ec(0x1fb)](_0x2406b3)>_0x5b20dc[_0x3367ec(0x22a)])_0x1dc3c2=![];}}if(_0x5b20dc['side']==_0x3367ec(0x19b)){let _0x32d90b=config[_0x3367ec(0x229)][_0x3367ec(0x1b9)](_0xf2aa33=>_0xf2aa33[_0x3367ec(0x202)]==config['basecoin']),_0x5e9012=currentCoins[_0x3367ec(0x1b9)](_0x5754bf=>_0x5754bf[_0x3367ec(0x202)]==config[_0x3367ec(0x1be)]);if(_0x32d90b['offset']>0x0){if(Math[_0x3367ec(0x1fb)](_0x2406b3)*_0x5b20dc[_0x3367ec(0x11c)]>_0x5e9012[_0x3367ec(0x22a)]-_0x32d90b[_0x3367ec(0x232)])_0x1dc3c2=![];}else{if(Math[_0x3367ec(0x1fb)](_0x2406b3)*_0x5b20dc[_0x3367ec(0x11c)]>_0x5e9012[_0x3367ec(0x22a)])_0x1dc3c2=![];}}return _0x1dc3c2;}async function getBalances(_0x3b3329=!![]){const _0x11d2c4=_0x3a081a;let _0x8bb46b=0x0,_0x424cd4;const _0x526cae=config['threshold'];if(config[_0x11d2c4(0x15f)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x11d2c4(0xc6)](_0x393807=>{const _0x5da6c9=_0x11d2c4;if(_0x393807['coin']!=config['basecoin']){let _0x4860bd=global[_0x5da6c9(0x1f8)][noslash(_0x393807[_0x5da6c9(0xf1)])];_0x424cd4=_0x393807[_0x5da6c9(0xde)]?0x1/_0x4860bd:_0x4860bd;}else _0x424cd4=0x1;let _0x30ce85=_0x393807['number']*_0x424cd4;_0x8bb46b+=_0x30ce85,_0x393807[_0x5da6c9(0x11c)]=formatResult(Number(_0x424cd4),0x8),_0x393807[_0x5da6c9(0x190)]=_0x30ce85;}),currentCoins['forEach'](_0x238257=>{const _0x5800c4=_0x11d2c4;let _0x25fec5=config[_0x5800c4(0x229)][_0x5800c4(0x1b9)](_0x305f0b=>_0x305f0b[_0x5800c4(0x202)]==_0x238257[_0x5800c4(0x202)]),_0x4d28da=Number(_0x25fec5['distribution']),_0x312de7=_0x238257['value']/_0x8bb46b*0x64,_0x3c52c3=_0x4d28da*_0x8bb46b/0x64/_0x238257[_0x5800c4(0x11c)]-_0x238257['number'];_0x238257[_0x5800c4(0x219)]=formatResult(_0x312de7,0x3),_0x238257['target']=formatResult(_0x4d28da,0x3),_0x238257[_0x5800c4(0x203)]=formatResult(_0x3c52c3,0x8),_0x238257[_0x5800c4(0x1cd)]='',_0x238257[_0x5800c4(0xed)]=![];if(_0x238257[_0x5800c4(0x202)]!=config[_0x5800c4(0x1be)]){if(_0x238257[_0x5800c4(0x219)]>_0x4d28da)_0x238257[_0x5800c4(0x1cd)]=_0x5800c4(0x186),_0x238257['valid']=checkMinimums(_0x238257);else _0x238257[_0x5800c4(0x219)]<_0x4d28da&&(_0x238257[_0x5800c4(0x1cd)]=_0x5800c4(0x19b),_0x238257[_0x5800c4(0xed)]=checkMinimums(_0x238257));}_0x238257[_0x5800c4(0x138)]=_0x238257['distribution']/_0x238257[_0x5800c4(0x149)]-0x1;if(_0x238257[_0x5800c4(0x159)]=='filled'||_0x238257[_0x5800c4(0x159)]==_0x5800c4(0x218))_0x238257[_0x5800c4(0x159)]=_0x5800c4(0x226);}),currentCoins[_0x11d2c4(0x1dd)]((_0x499dd3,_0x4f812e)=>_0x499dd3[_0x11d2c4(0x138)]<_0x4f812e[_0x11d2c4(0x138)]?0x1:_0x4f812e[_0x11d2c4(0x138)]<_0x499dd3[_0x11d2c4(0x138)]?-0x1:0x0);const _0x275150=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x275150[_0x11d2c4(0x21e)],'usd':_0x275150[_0x11d2c4(0x169)],'portfolio':JSON[_0x11d2c4(0xdb)](currentCoins),'threshold':_0x526cae},proxyEmit(_0x11d2c4(0x135),{'serverversion':serverversion,'balances':lastBalances});if(_0x3b3329){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x526cae});else{if(lockOrders==ORDERS[_0x11d2c4(0x1e5)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x526cae});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x32d2ff=getNormalizedPerformance();getStartingBalances(_0x32d2ff),emitPerformance(_0x32d2ff);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x39225d=getNormalizedPerformance();emitPerformance(_0x39225d),getStartingBalances(_0x39225d),logger['debug'](_0x11d2c4(0x107));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x411dfe=_0x3a081a;if(!lastBalances)return;let _0x5b5fe1=[],_0x2b0c15,_0x17634b=JSON[_0x411dfe(0x222)](lastBalances[_0x411dfe(0x229)]);_0x17634b[_0x411dfe(0x1dd)]((_0x2d2057,_0x37cbdd)=>_0x2d2057['coin']>_0x37cbdd[_0x411dfe(0x202)]?0x1:_0x37cbdd['coin']>_0x2d2057['coin']?-0x1:0x0),_0x17634b[_0x411dfe(0xc6)](_0x3d2974=>{const _0xc34831=_0x411dfe;let _0x4651b1={'coin':_0x3d2974[_0xc34831(0x202)],'number':_0x3d2974[_0xc34831(0x22a)],'price':_0x3d2974[_0xc34831(0x11c)]};_0x5b5fe1['push'](_0x4651b1);});const _0x7a193b=await getFiat();_0x2b0c15={'date':lastBalances[_0x411dfe(0x1d2)]['split']('\x20')[0x0],'eur':_0x7a193b[_0x411dfe(0x21e)],'usd':_0x7a193b[_0x411dfe(0x169)],'coins':_0x5b5fe1};let _0x47f401=dbPerformance[_0x411dfe(0x146)](_0x411dfe(0x225))[_0x411dfe(0x1b9)]({'date':_0x2b0c15[_0x411dfe(0x1f2)]})[_0x411dfe(0x190)]();_0x47f401?_0x2b0c15[_0x411dfe(0x1f2)]!=config['startdate']&&dbPerformance[_0x411dfe(0x146)](_0x411dfe(0x225))[_0x411dfe(0x1b9)]({'date':_0x2b0c15['date']})[_0x411dfe(0x242)](_0x2b0c15)[_0x411dfe(0xcc)]():dbPerformance[_0x411dfe(0x146)](_0x411dfe(0x225))[_0x411dfe(0x108)](_0x2b0c15)[_0x411dfe(0xcc)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4e035b=_0x3a081a;let _0x18a06e=[];if(dbPerformance[_0x4e035b(0x142)](_0x4e035b(0x225))[_0x4e035b(0x190)]()){let _0x53984b=dbPerformance[_0x4e035b(0x146)](_0x4e035b(0x225))[_0x4e035b(0xf5)]()[_0x4e035b(0x118)](_0x49d23a=>{const _0x710d2=_0x4e035b;if(_0x49d23a['coins'][_0x710d2(0x23f)]==0x0)return![];else return!![];})[_0x4e035b(0x201)](_0x4e035b(0x1f2))[_0x4e035b(0x190)](),_0x433828=[...config[_0x4e035b(0x1d7)]];_0x433828[_0x4e035b(0x1dd)]((_0x448fe8,_0x14ca4b)=>_0x448fe8[_0x4e035b(0x1f2)]>_0x14ca4b[_0x4e035b(0x1f2)]?-0x1:_0x14ca4b[_0x4e035b(0x1f2)]>_0x448fe8[_0x4e035b(0x1f2)]?0x1:0x0);let _0x1e9c7e=0x1,_0x46d6fe=[],_0x32151d=0x0;_0x53984b[_0x4e035b(0x1ec)]()[_0x4e035b(0xde)]()['forEach']((_0x78b218,_0xf080d6)=>{const _0x4f3884=_0x4e035b;if(_0x433828[_0x32151d]){if(_0x53984b[_0x53984b[_0x4f3884(0x23f)]-_0xf080d6]&&_0x433828[_0x32151d][_0x4f3884(0x1f2)]==_0x53984b[_0x53984b[_0x4f3884(0x23f)]-_0xf080d6][_0x4f3884(0x1f2)]){if(_0xf080d6<_0x53984b[_0x4f3884(0x23f)]){let _0x1fb2e3=0x0,_0x4ff2c2=0x0;_0x53984b[_0x53984b[_0x4f3884(0x23f)]-_0xf080d6][_0x4f3884(0xe0)][_0x4f3884(0xc6)](_0x35859e=>{const _0x3cda4d=_0x4f3884;_0x4ff2c2+=_0x35859e[_0x3cda4d(0x22a)]*_0x35859e[_0x3cda4d(0x176)];}),_0x433828[_0x32151d][_0x4f3884(0x116)]['forEach'](_0x20354c=>{const _0x4c23b0=_0x4f3884;_0x1fb2e3+=_0x20354c[_0x4c23b0(0x22a)]*_0x20354c[_0x4c23b0(0x176)];}),_0x1e9c7e*=_0x1fb2e3/(_0x4ff2c2-_0x1fb2e3)+0x1;}_0x32151d++;}}let _0x5115ae=0x0;_0x78b218[_0x4f3884(0xe0)][_0x4f3884(0xc6)](_0x2a10fc=>{const _0x2518fe=_0x4f3884;_0x5115ae+=_0x2a10fc[_0x2518fe(0x22a)]*_0x2a10fc[_0x2518fe(0x176)];}),_0x46d6fe[_0x53984b[_0x4f3884(0x23f)]-_0xf080d6-0x1]=_0x5115ae*(_0x1e9c7e-0x1);});let _0x1911b2=[];_0x433828=[...config['liquidity']]||[];let _0x1de06c=0x0;_0x32151d=0x0,_0x53984b[_0x4e035b(0xc6)]((_0x56d264,_0x139f82)=>{const _0x307ea5=_0x4e035b;if(_0x433828[_0x32151d]){const _0x430325=fns[_0x307ea5(0x222)](_0x433828[_0x32151d][_0x307ea5(0x1f2)],_0x307ea5(0x223),new Date()),_0x1acf7e=fns[_0x307ea5(0x222)](_0x56d264[_0x307ea5(0x1f2)],_0x307ea5(0x223),new Date());if(fns[_0x307ea5(0x11b)](_0x430325,_0x1acf7e)){let _0x3d5ba3=0x0;_0x433828[_0x32151d]['changes'][_0x307ea5(0xc6)](_0x3a6930=>{const _0x4b48c8=_0x307ea5;!_0x1911b2[_0x3a6930[_0x4b48c8(0x202)]]?_0x1911b2[_0x3a6930[_0x4b48c8(0x202)]]=_0x3a6930[_0x4b48c8(0x22a)]:(_0x3d5ba3=_0x1911b2[_0x3a6930[_0x4b48c8(0x202)]],_0x1911b2[_0x3a6930['coin']]+=_0x3a6930[_0x4b48c8(0x22a)]);const _0x24cb07=_0x56d264[_0x4b48c8(0xe0)][_0x4b48c8(0x1b9)](_0xd8e10=>_0xd8e10[_0x4b48c8(0x202)]==_0x3a6930[_0x4b48c8(0x202)]);(!_0x24cb07||_0x24cb07[_0x4b48c8(0x22a)]==0x0)&&(_0x1de06c+=(-_0x3a6930[_0x4b48c8(0x22a)]-_0x3d5ba3)*_0x3a6930[_0x4b48c8(0x176)]);}),_0x32151d++;}}_0x56d264['coins']['forEach']((_0x9a51b,_0x5bf0e5)=>{const _0x387f9a=_0x307ea5;_0x1911b2[_0x9a51b['coin']]&&(_0x9a51b[_0x387f9a(0x14b)]=_0x1911b2[_0x9a51b[_0x387f9a(0x202)]]);}),_0x18a06e[_0x307ea5(0x108)]({'date':_0x56d264[_0x307ea5(0x1f2)],'eur':_0x56d264[_0x307ea5(0x21e)],'usd':_0x56d264['usd'],'offset':_0x46d6fe[_0x139f82],'netoffset':_0x1de06c,'coins':_0x56d264[_0x307ea5(0xe0)]});});}return _0x18a06e;}function emitPerformance(_0x40c69f){const _0x5386c2=_0x3a081a;_0x40c69f[_0x5386c2(0x23f)]!==0x0?(proxyEmit('performance',_0x40c69f),lastPerformanceEmitted=getDate()):proxyEmit(_0x5386c2(0x1a9),[]);}function getPerf(_0x4136ab,_0x32858c){const _0x4ccc35=_0x3a081a;let _0x1884d3=0x0,_0x3ebe27=0x0,_0x48339a=0x0;_0x4136ab[_0x4ccc35(0xe0)][_0x4ccc35(0xc6)](_0x37df30=>{const _0x3c4e36=_0x4ccc35;_0x1884d3+=_0x37df30[_0x3c4e36(0x22a)]*_0x37df30[_0x3c4e36(0x176)];});_0x32858c&&(_0x1884d3+=_0x4136ab[_0x4ccc35(0x232)]);if(config[_0x4ccc35(0x1be)]===_0x4ccc35(0x1fe)||config['basecoin']===_0x4ccc35(0x195))_0x3ebe27=_0x1884d3*_0x4136ab[_0x4ccc35(0x21e)],_0x48339a=_0x1884d3*_0x4136ab[_0x4ccc35(0x169)];else{if(usdBasecoins[_0x4ccc35(0x131)](config[_0x4ccc35(0x1be)]))_0x3ebe27=_0x1884d3*_0x4136ab[_0x4ccc35(0x21e)]/_0x4136ab[_0x4ccc35(0x169)],_0x48339a=_0x1884d3;else config['basecoin']===_0x4ccc35(0x140)&&(_0x3ebe27=_0x1884d3,_0x48339a=_0x1884d3*_0x4136ab['usd']/_0x4136ab[_0x4ccc35(0x21e)]);}return[_0x1884d3,_0x3ebe27,_0x48339a];}function getKPIs(_0x9f4669,_0xdabaa2='EUR'){const _0x274776=_0x3a081a,_0x4222fd=config['basecoin'],_0x55214b=lastBalances,_0x8717fa=currentCoins,_0x1d1697=getNormalizedPerformance(),_0x3d2e33=_0x9f4669===_0x274776(0x1be)?_0x4222fd:_0x9f4669===_0x274776(0x208)||_0x9f4669===_0x274776(0xf4)?_0xdabaa2:_0x274776(0x180)+_0x4222fd,_0x1fc453=_0x9f4669===_0x274776(0x1ce)?_0x274776(0xfd):_0x9f4669===_0x274776(0xf4)?'Net\x20effect':_0x3d2e33+_0x274776(0x127),_0x125e4e=_0x9f4669===_0x274776(0x1ce)||_0x9f4669===_0x274776(0xf4)?_0x274776(0xfd):_0x3d2e33+_0x274776(0x160);let _0x1feca3=0x0;_0x8717fa[_0x274776(0xc6)](_0x565bee=>{const _0x549682=_0x274776;_0x1feca3+=_0x565bee[_0x549682(0x22a)]*_0x565bee['last'];});if(_0x9f4669===_0x274776(0x208)||_0x9f4669===_0x274776(0xf4)){if(_0x4222fd==='BTC'||_0x4222fd==='ETH')_0x1feca3=_0x1feca3*(_0xdabaa2==='EUR'?_0x55214b[_0x274776(0x21e)]:_0x55214b[_0x274776(0x169)]);else{if(usdBasecoins[_0x274776(0x131)](_0x4222fd))_0x1feca3=_0x1feca3*(_0xdabaa2==='EUR'?_0x55214b[_0x274776(0x21e)]/_0x55214b['usd']:0x1);else _0x4222fd===_0x274776(0x140)&&(_0x1feca3=_0x1feca3*(_0xdabaa2===_0x274776(0x140)?0x1:_0x55214b[_0x274776(0x169)]/_0x55214b[_0x274776(0x21e)]));}}let _0x53b506;if(_0x1feca3!==0x0){if(_0x9f4669===_0x274776(0x1be))_0x53b506=(_0x1feca3/startingBalances[_0x274776(0x1be)]-0x1)*0x64;else{if(_0xdabaa2===_0x274776(0x140))_0x53b506=(_0x1feca3/startingBalances['eur']-0x1)*0x64;else _0x53b506=(_0x1feca3/startingBalances[_0x274776(0x169)]-0x1)*0x64;}let _0x56c2ad=0x0;if(startingBalances['coins'])_0x8717fa[_0x274776(0xc6)](_0x508699=>{const _0x3dce32=_0x274776;let _0x47cd43=startingBalances[_0x3dce32(0xe0)]['find'](_0x1e54a5=>_0x1e54a5[_0x3dce32(0x202)]===_0x508699[_0x3dce32(0x202)]);if(_0x47cd43&&_0x47cd43['coin']&&_0x508699[_0x3dce32(0x22a)]!==0x0)_0x56c2ad+=_0x47cd43['number']*_0x508699[_0x3dce32(0x11c)];});let _0x2d6ea9=0x0;if(_0x1d1697[_0x274776(0x23f)]!==0x0){let _0x389aa0=_0x1d1697[_0x1d1697[_0x274776(0x23f)]-0x1];_0x2d6ea9=_0x389aa0[_0x274776(0x196)];}_0x56c2ad-=_0x2d6ea9;_0x9f4669===_0x274776(0x1ce)&&(_0x53b506=(_0x1feca3-_0x56c2ad)/startingBalances[_0x274776(0x1be)]*0x64,_0x1feca3=_0x1feca3-_0x56c2ad);if(_0x9f4669===_0x274776(0xf4)){let _0x2bfa90=_0xdabaa2===_0x274776(0x140)?startingBalances[_0x274776(0x21e)]:startingBalances['usd'];if(_0x4222fd==='BTC'||_0x4222fd===_0x274776(0x195))_0x56c2ad=_0xdabaa2===_0x274776(0x140)?_0x56c2ad*_0x55214b[_0x274776(0x21e)]:_0x56c2ad*_0x55214b[_0x274776(0x169)];else{if(usdBasecoins[_0x274776(0x131)](_0x4222fd))_0x56c2ad=_0xdabaa2==='EUR'?_0x56c2ad*_0x55214b['eur']/_0x55214b[_0x274776(0x169)]:_0x56c2ad;else _0x4222fd==='EUR'&&(_0x56c2ad=_0xdabaa2==='EUR'?_0x56c2ad:_0x56c2ad*_0x55214b[_0x274776(0x169)]/_0x55214b[_0x274776(0x21e)]);}_0x53b506=(_0x1feca3-_0x56c2ad)/_0x2bfa90*0x64,_0x1feca3=_0x1feca3-_0x56c2ad;}if(_0x53b506){if(_0x53b506<0x64)_0x53b506=_0x53b506[_0x274776(0x1b7)](0x2);else{if(_0x53b506<0x3e8)_0x53b506=_0x53b506[_0x274776(0x1b7)](0x1);else _0x53b506=_0x53b506[_0x274776(0x1b7)](0x0);}}else _0x53b506=Number('0')[_0x274776(0x1b7)](0x2);if(_0x1feca3){if(Math[_0x274776(0x1fb)](_0x1feca3)<0.000001)_0x1feca3=_0x1feca3[_0x274776(0x1b7)](0x2);else{if(Math[_0x274776(0x1fb)](_0x1feca3)<0.1)_0x1feca3=_0x1feca3[_0x274776(0x1b7)](0x6);else{if(Math['abs'](_0x1feca3)<0x1)_0x1feca3=_0x1feca3['toFixed'](0x5);else{if(Math[_0x274776(0x1fb)](_0x1feca3)<0xa)_0x1feca3=_0x1feca3[_0x274776(0x1b7)](0x4);else{if(Math[_0x274776(0x1fb)](_0x1feca3)<0x64)_0x1feca3=_0x1feca3[_0x274776(0x1b7)](0x3);else{if(Math['abs'](_0x1feca3)<0x3e8)_0x1feca3=_0x1feca3['toFixed'](0x2);else _0x1feca3=_0x1feca3[_0x274776(0x1b7)](0x2);}}}}}}else _0x1feca3=Number('0')['toFixed'](0x2);}else _0x53b506=Number('0')[_0x274776(0x1b7)](0x2);return{'value':_0x1feca3,'change':_0x53b506,'leftTxt':_0x1fc453,'rightTxt':_0x125e4e};}async function getStartingBalances(_0x546183,_0x2771df=!![]){const _0x3da2a4=_0x3a081a;if(_0x546183[_0x3da2a4(0x23f)]!==0x0){const [_0x43547c,_0x9fa9ff,_0xdae511]=getPerf(_0x546183[0x0],!![]);let _0x46a48b=[];config[_0x3da2a4(0x229)][_0x3da2a4(0xc6)](_0x39083a=>{const _0x145864=_0x3da2a4;let _0x3b95ac=0x0,_0x29a381;config[_0x145864(0x1d7)][_0x145864(0xc6)](_0x4c694c=>{const _0x544a25=_0x145864;let _0x1c835e=_0x4c694c[_0x544a25(0x116)][_0x544a25(0x1b9)](_0x2c52e5=>_0x2c52e5[_0x544a25(0x202)]==_0x39083a[_0x544a25(0x202)]);if(_0x1c835e){_0x3b95ac+=_0x1c835e['number'];if(!_0x29a381)_0x29a381=_0x1c835e['price'];}}),_0x46a48b['push']({'coin':_0x39083a[_0x145864(0x202)],'number':_0x3b95ac,'initialprice':_0x29a381});});const _0x1e5c7e={'basecoin':_0x43547c,'eur':_0x9fa9ff,'usd':_0xdae511,'coins':_0x46a48b};if(_0x2771df)proxyEmit(_0x3da2a4(0xe9),_0x1e5c7e);startingBalances=_0x1e5c7e;}}function headlessMode(_0x2a5ddb){const _0x51e5f0=_0x3a081a;let _0x4716bd=_0x2a5ddb[_0x51e5f0(0x229)],_0x27149f=_0x2a5ddb[_0x51e5f0(0x119)],_0x543dc1=[];for(let _0x4bd683 of _0x4716bd){if(_0x4bd683[_0x51e5f0(0x202)]!=config[_0x51e5f0(0x1be)]){if(_0x4bd683[_0x51e5f0(0x138)]>=_0x27149f/0x64){if(_0x4bd683['valid'])_0x543dc1[_0x51e5f0(0x108)](_0x4bd683);}else{if(_0x4bd683[_0x51e5f0(0x138)]<=-_0x27149f/0x64){if(_0x4bd683['valid'])_0x543dc1['push'](_0x4bd683);}}}}_0x543dc1['length']>0x0&&placeOrder(_0x543dc1);}function notifyBalance(_0x372e45){const _0x15b67a=_0x3a081a;let _0x35ed13=_0x372e45[_0x15b67a(0x229)],_0x104a9f=_0x372e45[_0x15b67a(0x119)],_0x5a9a61=[];for(let _0x1ee107 of _0x35ed13){if(_0x1ee107[_0x15b67a(0x202)]!=config['basecoin']){if(_0x1ee107[_0x15b67a(0x138)]>=_0x104a9f/0x64){if(_0x1ee107[_0x15b67a(0xed)])_0x5a9a61[_0x15b67a(0x108)](_0x1ee107);}else{if(_0x1ee107['delta']<=-_0x104a9f/0x64){if(_0x1ee107[_0x15b67a(0xed)])_0x5a9a61[_0x15b67a(0x108)](_0x1ee107);}}}}if(_0x5a9a61['length']>0x0){let _0x48c81b=_0x5a9a61[_0x15b67a(0x111)](_0x39f982=>_0x39f982[_0x15b67a(0x202)]);_0x48c81b[_0x15b67a(0x1dd)]();let _0x49b2f6=_0x48c81b[_0x15b67a(0x206)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x49b2f6;}}function symbolToCoin(_0x17df30){const _0x4963cb=_0x3a081a;let _0x3dc315;if(_0x17df30['includes']('/'+config[_0x4963cb(0x1be)]))_0x3dc315=_0x17df30[_0x4963cb(0x1eb)]('/'+config[_0x4963cb(0x1be)],'');if(_0x17df30[_0x4963cb(0x131)](config[_0x4963cb(0x1be)]+'/'))_0x3dc315=_0x17df30[_0x4963cb(0x1eb)](config[_0x4963cb(0x1be)]+'/','');return _0x3dc315;}async function unlockOrders(){const _0x17d90a=_0x3a081a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x17d90a(0x217)]){logger['debug'](_0x17d90a(0x1a2)),lockOrders=ORDERS[_0x17d90a(0x21b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x39277a=await getCoins();[currentCoins,currentCoinsAll]=_0x39277a,validateOrdersState=_0x17d90a(0x14b),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x17d90a(0x163)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x13432d){const _0x351359=_0x3a081a;if(_0x13432d)validateOrdersState=_0x13432d;logger[_0x351359(0x163)](_0x351359(0x1f4)+validateOrdersState+_0x351359(0x103)+(lockOrders==0x1?_0x351359(0x1cc):lockOrders==0x2?_0x351359(0xc2):_0x351359(0x16c)));let _0x141fb8=[],_0x2176ea=config[_0x351359(0xc3)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x351359(0x217)])return;logger['debug'](_0x351359(0x1e7)+validateOrdersState),lastOrders[_0x351359(0xc6)](_0x1fcf07=>{const _0x53304d=_0x351359;let _0x2ff0ab=![];_0x1fcf07[_0x53304d(0x207)]>0x0&&(_0x2ff0ab=!![]),_0x141fb8[_0x53304d(0x108)](_0x2ff0ab),_0x2ff0ab&&config[_0x53304d(0xc3)]!=_0x53304d(0x1b4)&&logHistory(_0x53304d(0x20e),'Order\x20filled:\x20'+_0x1fcf07[_0x53304d(0xf1)]+'\x20'+_0x1fcf07[_0x53304d(0x1cd)]+'\x20#'+formatResult(_0x1fcf07['filled'],0x8)+'\x20@'+formatResult(_0x1fcf07[_0x53304d(0x176)],0x8));}),_0x141fb8['forEach']((_0x219298,_0x39a418)=>{const _0x5017a3=_0x351359;if(_0x219298)lastOrders[_0x5017a3(0x1e3)](_0x39a418,0x1);}),persistOpenOrders(lastOrders);const _0xac685b=coolingDown?_0x351359(0x16d):_0x351359(0xfc);if(validateOrdersState==_0x351359(0x14b)){validateOrdersState=_0x351359(0x1a4);if(_0x141fb8[_0x351359(0x131)](![])){if(config[_0x351359(0xc3)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x141fb8['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x351359(0x1b4)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x351359(0x1a6))_0x141fb8[_0x351359(0x131)](![])&&(config[_0x351359(0xc3)]==_0x351359(0x1b4)?logHistory(_0x351359(0x134),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x351359(0x16f)](_0x2176ea*validateOrderInterval/0xea60)+_0x351359(0x143)+_0xac685b):(await cancelOrders(),logHistory('success',_0x351359(0x20a)+Math[_0x351359(0x16f)](_0x2176ea*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0xac685b))),await unlockOrders();else{if(validateOrdersState==_0x351359(0x1d4)){if(config['ordertype']!='market')logHistory(_0x351359(0x134),'No\x20more\x20open\x20orders\x20-\x20'+_0xac685b);await unlockOrders();}}}}}async function cancelOrders(){const _0x2a54df=_0x3a081a;lastOrders[_0x2a54df(0xc6)](async _0x5da5ee=>{const _0x4b5414=_0x2a54df;try{const _0x2b402d=await exchange['cancelOrder'](_0x5da5ee['orderId'],_0x5da5ee['symbol']);}catch(_0x3dbd6a){if(_0x3dbd6a[_0x4b5414(0xd5)]()[_0x4b5414(0x131)](_0x4b5414(0x192))){}else await handleError(_0x3dbd6a,_0x4b5414(0x1b3));}});}async function initCoinResults(_0x171967){const _0x34c974=_0x3a081a;_0x171967?logger[_0x34c974(0x163)]('Resetting\x20coin\x20results:\x20'+_0x171967):logger[_0x34c974(0x163)](_0x34c974(0x1fd)),config['portfolio']['forEach'](_0x39c17e=>{const _0x398ece=_0x34c974;if(!_0x39c17e[_0x398ece(0x139)]&&_0x39c17e[_0x398ece(0x202)]!=config[_0x398ece(0x1be)]){const _0x93cd04=currentCoins[_0x398ece(0x1b9)](_0x158e11=>_0x158e11[_0x398ece(0x202)]==_0x39c17e[_0x398ece(0x202)]),_0x4884fb=global['ticker'][noslash(_0x39c17e[_0x398ece(0xf1)])];let _0x196f1a=_0x93cd04?_0x93cd04[_0x398ece(0x22a)]:null,_0x2f1597=_0x39c17e[_0x398ece(0xde)]?0x1/_0x4884fb:_0x4884fb,_0x2b6d1c;config[_0x398ece(0x1d7)][_0x398ece(0xc6)](_0xb3cac8=>{const _0x2b54da=_0x398ece;!_0x2b6d1c&&(_0x2b6d1c=_0xb3cac8[_0x2b54da(0x116)][_0x2b54da(0x1b9)](_0x4ead9d=>_0x4ead9d[_0x2b54da(0x202)]==_0x39c17e[_0x2b54da(0x202)]),_0x2b6d1c&&(_0x196f1a=_0x2b6d1c['number'],_0x2f1597=_0x2b6d1c[_0x2b54da(0x176)]));});let _0x111cf3=dbCoinResults[_0x398ece(0x146)](_0x398ece(0xe0))['find']({'coin':_0x39c17e[_0x398ece(0x202)]})['value']();if(!_0x111cf3){const _0x115157={'coin':_0x39c17e[_0x398ece(0x202)],'number':_0x196f1a,'breakeven':_0x2f1597,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x398ece(0x146)](_0x398ece(0xe0))[_0x398ece(0x108)](_0x115157)['write']();}else{if(_0x171967&&_0x39c17e[_0x398ece(0x202)]==_0x171967){const _0x1cc355={'coin':_0x39c17e[_0x398ece(0x202)],'number':_0x196f1a,'breakeven':_0x2f1597,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x398ece(0x146)](_0x398ece(0xe0))['find']({'coin':_0x39c17e[_0x398ece(0x202)]})['assign'](_0x1cc355)[_0x398ece(0xcc)]();}}}});}async function updateCoinResults(_0x5a7766,_0x154148=![]){const _0x1ce153=_0x3a081a;let _0x231810,_0x39aba8,_0xbe1547,_0x1d0892,_0x4bd6bf,_0x1d33b8,_0xc8ce1f=dbCoinResults[_0x1ce153(0x146)](_0x1ce153(0xe0))[_0x1ce153(0x1b9)]({'coin':_0x5a7766['coin']})[_0x1ce153(0x190)](),_0x1975cd=![];Object[_0x1ce153(0x154)](_0xc8ce1f)[_0x1ce153(0xc6)](([_0x1bf7f0,_0xc2d0a9])=>{if(_0xc2d0a9==null)_0x1975cd=!![];});(!_0xc8ce1f||_0x1975cd)&&(await initCoinResults(_0x5a7766['coin']),_0xc8ce1f=dbCoinResults['get']('coins')[_0x1ce153(0x1b9)]({'coin':_0x5a7766[_0x1ce153(0x202)]})[_0x1ce153(0x190)]());_0x5a7766[_0x1ce153(0xde)]&&(_0x1d33b8={'filled':_0x5a7766[_0x1ce153(0x207)]*_0x5a7766[_0x1ce153(0x176)],'amount':_0x5a7766[_0x1ce153(0x207)]*_0x5a7766[_0x1ce153(0x176)],'side':_0x5a7766[_0x1ce153(0x1cd)]==_0x1ce153(0x186)?_0x1ce153(0x19b):'sell','price':0x1/_0x5a7766[_0x1ce153(0x176)]},_0x5a7766={..._0x5a7766,..._0x1d33b8});_0x154148?_0x39aba8=_0x5a7766['side']==_0x1ce153(0x19b)?_0xc8ce1f['number']+_0x5a7766[_0x1ce153(0x207)]:_0xc8ce1f[_0x1ce153(0x22a)]-_0x5a7766['filled']:_0x39aba8=await getCoinNumber(_0x5a7766[_0x1ce153(0x202)]);if(_0x5a7766[_0x1ce153(0x1ae)]&&_0x5a7766[_0x1ce153(0x1ae)][_0x1ce153(0x1cb)]==config[_0x1ce153(0x1be)])_0x231810=_0x5a7766[_0x1ce153(0x1ae)]['cost'];else{if(_0x5a7766[_0x1ce153(0x1ae)]&&_0x5a7766[_0x1ce153(0x1ae)][_0x1ce153(0x1cb)]==_0x1ce153(0x112)&&!_0x154148)_0x231810=_0x5a7766['fee']['cost']*global[_0x1ce153(0x1f8)]['BNB'+config[_0x1ce153(0x1be)]];else _0x231810=defaultFee*_0x5a7766['filled']*_0x5a7766['price'];}_0x5a7766['side']==_0x1ce153(0x19b)?(_0xbe1547=_0x39aba8!=0x0?(_0xc8ce1f[_0x1ce153(0x136)]*_0xc8ce1f[_0x1ce153(0x22a)]+_0x5a7766['price']*(_0x39aba8-_0xc8ce1f[_0x1ce153(0x22a)])+_0x231810)/_0x39aba8:0x0,_0x1d0892=_0xc8ce1f[_0x1ce153(0x1ed)]):(_0xbe1547=_0x39aba8!=0x0?(_0xc8ce1f[_0x1ce153(0x136)]*_0xc8ce1f['number']-_0x5a7766[_0x1ce153(0x176)]*(_0xc8ce1f['number']-_0x39aba8)+_0x231810)/_0x39aba8:0x0,_0x1d0892=_0xc8ce1f['realized']+(_0x5a7766[_0x1ce153(0x176)]-_0xc8ce1f[_0x1ce153(0x136)])*_0x5a7766[_0x1ce153(0x207)]);_0x4bd6bf=(_0x5a7766['price']-_0xbe1547-_0x231810/_0x5a7766[_0x1ce153(0x207)])*_0x39aba8;let _0x6745f8={'coin':_0x5a7766[_0x1ce153(0x202)],'number':_0x39aba8,'breakeven':formatResult(_0xbe1547,0x8),'realized':formatResult(_0x1d0892,0x8),'unrealized':formatResult(_0x4bd6bf,0x8),'fees':formatResult(_0xc8ce1f['fees']+_0x231810,0x8),'sells':_0x5a7766['side']==_0x1ce153(0x186)?_0xc8ce1f['sells']+0x1:_0xc8ce1f['sells'],'buys':_0x5a7766[_0x1ce153(0x1cd)]==_0x1ce153(0x19b)?_0xc8ce1f[_0x1ce153(0x177)]+0x1:_0xc8ce1f[_0x1ce153(0x177)]};dbCoinResults[_0x1ce153(0x146)](_0x1ce153(0xe0))[_0x1ce153(0x1b9)]({'coin':_0x5a7766[_0x1ce153(0x202)]})[_0x1ce153(0x242)](_0x6745f8)[_0x1ce153(0xcc)]();if(!_0x154148){if(_0x5a7766['fee']&&_0x5a7766[_0x1ce153(0x1ae)][_0x1ce153(0x1cb)]=='BNB'){const _0x5bb941=currentCoins['find'](_0x9f2b15=>_0x9f2b15[_0x1ce153(0x202)]==_0x1ce153(0x112));if(_0x5bb941){let _0x514cc0=dbCoinResults['get'](_0x1ce153(0xe0))['find']({'coin':_0x1ce153(0x112)})['value']();_0x6745f8={..._0x514cc0,'number':_0x5bb941[_0x1ce153(0x22a)]},dbCoinResults[_0x1ce153(0x146)](_0x1ce153(0xe0))[_0x1ce153(0x1b9)]({'coin':_0x1ce153(0x112)})[_0x1ce153(0x242)](_0x6745f8)[_0x1ce153(0xcc)]();}}}}async function placeOrder(_0x1c1522){const _0x29651d=_0x3a081a,_0x269f58=config[_0x29651d(0xc3)]==_0x29651d(0x1b4)?_0x29651d(0x1b4):'limit';if(lockOrders==ORDERS[_0x29651d(0x1e5)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x29651d(0x217)],allOrdersPlaced=![],validateOrdersState=_0x29651d(0x14b);let _0x30c896=![];lastOrders=[];for(const _0x236fed of _0x1c1522){let _0x4876a2,_0x3e0b10,_0x13aaa1,_0x576fd6,_0x2e8f84,_0xddf55f=_0x236fed['symbol'];try{const _0x482e52=await exchange[_0x29651d(0x150)](_0xddf55f);_0x4876a2=_0x236fed[_0x29651d(0xde)]?0x1/_0x236fed[_0x29651d(0x11c)]:_0x236fed['last'],_0x3e0b10=_0x482e52[_0x29651d(0x104)],_0x13aaa1=_0x482e52[_0x29651d(0x188)];_0x236fed[_0x29651d(0xde)]?(_0x576fd6=_0x236fed[_0x29651d(0x1cd)]==_0x29651d(0x19b)?_0x29651d(0x186):_0x29651d(0x19b),_0x2e8f84=Math[_0x29651d(0x1fb)](_0x236fed[_0x29651d(0x203)])/_0x4876a2):(_0x576fd6=_0x236fed[_0x29651d(0x1cd)],_0x2e8f84=Math['abs'](_0x236fed['trade']));_0x269f58=='limit'&&(config[_0x29651d(0xc3)]=='limit-high'&&(_0x4876a2=_0x576fd6==_0x29651d(0x19b)?_0x3e0b10:_0x13aaa1),config[_0x29651d(0xc3)]=='limit-low'&&(_0x4876a2=_0x576fd6==_0x29651d(0x19b)?_0x13aaa1:_0x3e0b10));_0x2e8f84=formatResult(_0x2e8f84,0x8),_0x4876a2=formatResult(_0x4876a2,0x8);const _0x2a0b76=_0x576fd6=='sell'?config['emojisell']?String[_0x29651d(0x21d)]('0x'+config['emojisell'])+'\x20':'':config[_0x29651d(0x22c)]?String['fromCodePoint']('0x'+config[_0x29651d(0x22c)])+'\x20':'',_0x146a48=_0x269f58==_0x29651d(0x1b4)?_0x29651d(0x106):config['ordertype']==_0x29651d(0xc9)?_0x29651d(0xe2):_0x29651d(0x21f),_0x273281=(Math[_0x29651d(0x1c2)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x29651d(0xd5)]();lastOrders[_0x29651d(0x108)]({'customId':_0x273281,'symbol':_0xddf55f,'coin':_0x236fed[_0x29651d(0x202)],'amount':_0x2e8f84,'price':_0x4876a2,'side':_0x576fd6,'reverse':_0x236fed[_0x29651d(0xde)],'filled':0x0});if(_0x269f58==_0x29651d(0x1b4))logHistory(_0x29651d(0x20e),''+_0x2a0b76+_0x146a48+'\x20order:\x20'+_0xddf55f+'\x20'+_0x576fd6+'\x20#'+formatResult(_0x2e8f84,0x8)+'\x20@'+formatResult(_0x4876a2,0x8));else logHistory(_0x29651d(0x20e),''+_0x2a0b76+_0x146a48+_0x29651d(0x121)+_0xddf55f+'\x20'+_0x576fd6+'\x20#'+formatResult(_0x2e8f84,0x8)+'\x20@'+formatResult(_0x4876a2,0x8));const _0x30120a=await exchange[_0x29651d(0x231)](_0xddf55f,_0x269f58,_0x576fd6,_0x2e8f84,_0x4876a2);logger[_0x29651d(0x163)]('ID:\x20'+_0x30120a['id']+_0x29651d(0x145)+_0x273281);const _0x3a9e92=lastOrders[_0x29651d(0x23f)]-0x1;if(_0x3a9e92>=0x0&&lastOrders[_0x3a9e92]['customId']==_0x273281){lastOrders[_0x3a9e92][_0x29651d(0x13e)]=_0x30120a['id'];if(_0x30120a[_0x29651d(0x155)])lastOrders[_0x3a9e92][_0x29651d(0x155)]=_0x30120a[_0x29651d(0x155)];if(_0x30120a[_0x29651d(0x176)])lastOrders[_0x3a9e92][_0x29651d(0x176)]=_0x30120a[_0x29651d(0x176)];lastOrders[_0x3a9e92][_0x29651d(0x1ae)]=_0x30120a[_0x29651d(0x1ae)];}if(config[_0x29651d(0x214)]!=0x0){let _0x434d6b=null;if(cooldownTracker[_0x29651d(0x23f)]==config[_0x29651d(0x214)]-0x1)_0x434d6b=cooldownTracker['shift']();const _0x521eae=getTimeStamp();cooldownTracker['push'](_0x521eae);if(_0x434d6b){const _0x5adada=fns[_0x29651d(0x197)](new Date(_0x521eae),new Date(_0x434d6b));if(_0x5adada<cooldownInterval){logHistory('error',_0x29651d(0x1aa)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x29651d(0x23b)),coolingDown=!![];break;}}}}catch(_0x1d75db){if(_0x1d75db[_0x29651d(0xd5)]()[_0x29651d(0x131)](_0x29651d(0xe3)))lastOrders=lastOrders[_0x29651d(0x118)](_0x1185ca=>_0x1185ca[_0x29651d(0xf1)]!=_0xddf55f),logHistory('error',_0x29651d(0x1f6)+_0xddf55f),_0x30c896=!![];else{if(_0x1d75db[_0x29651d(0xd5)]()['includes'](_0x29651d(0xd1)))lastOrders=lastOrders[_0x29651d(0x118)](_0x50dac4=>_0x50dac4[_0x29651d(0xf1)]!=_0xddf55f),logHistory(_0x29651d(0x1af),'Order\x20amount\x20is\x20invalid:\x20'+_0xddf55f),_0x30c896=!![];else{if(_0x1d75db[_0x29651d(0xd5)]()[_0x29651d(0x131)](_0x29651d(0x14d)))lastOrders=lastOrders['filter'](_0xa8c34b=>_0xa8c34b[_0x29651d(0xf1)]!=_0xddf55f),logHistory(_0x29651d(0x1af),_0x29651d(0x162)+_0xddf55f),_0x30c896=!![];else _0x1d75db['toString']()[_0x29651d(0x131)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x29651d(0x118)](_0x2aacb8=>_0x2aacb8[_0x29651d(0xf1)]!=_0xddf55f),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0xddf55f),_0x30c896=!![]):(lastOrders=lastOrders[_0x29651d(0x118)](_0xd2a7aa=>_0xd2a7aa[_0x29651d(0xf1)]!=_0xddf55f),await handleError(_0x1d75db,'placeOrder()',_0xddf55f));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1efcc3=config[_0x29651d(0xc3)]==_0x29651d(0x1b4)?validateOrderTimeout*0x3c*0x3e8:config[_0x29651d(0x125)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x31bf0a=_0x29651d;validateOrders(_0x31bf0a(0x1a6));},_0x1efcc3);}else unlockOrders();_0x30c896&&config[_0x29651d(0x15f)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x29651d(0x134),_0x29651d(0xff)));}else{if(coolingDown)!config[_0x29651d(0x15f)]&&logHistory(_0x29651d(0x1af),_0x29651d(0x1d0));else lockOrders!=ORDERS[_0x29651d(0x1e5)]&&(!config[_0x29651d(0x15f)]&&(config[_0x29651d(0xc3)]==_0x29651d(0x1b4)?logHistory(_0x29651d(0x1af),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x29651d(0x1b2))));}}function persistOpenOrders(_0x52e14e){const _0x418d76=_0x3a081a,_0x2eb229={...config,'openOrders':_0x52e14e};let _0x3ecf33=dbConfig[_0x418d76(0x146)](_0x418d76(0x10d))[_0x418d76(0x1b9)]({'botID':botID})[_0x418d76(0x190)]();_0x3ecf33&&dbConfig[_0x418d76(0x146)](_0x418d76(0x10d))['find']({'botID':botID})[_0x418d76(0x242)](_0x2eb229)[_0x418d76(0xcc)]();}function restoreOrders(){const _0x293ca4=_0x3a081a;let _0x120c77;config['openOrders']&&allOpenOrders[_0x293ca4(0xc6)](_0xd4077d=>{const _0x283987=_0x293ca4,_0x2b2465=config[_0x283987(0x120)]['find'](_0x548c35=>_0x548c35[_0x283987(0x13e)]==_0xd4077d['id']);_0x2b2465&&(lastOrders[_0x283987(0x108)](_0x2b2465),_0x120c77=_0xd4077d[_0x283987(0x11f)]);});if(lastOrders[_0x293ca4(0x23f)]>0x0){lockOrders=ORDERS[_0x293ca4(0x217)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5084fb=new Date()['getTime'](),_0x4a165c=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x293ca4(0x125)]*0x3c*0x3e8;if(_0x120c77+_0x4a165c>_0x5084fb){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1a21e4=_0x293ca4;validateOrders(_0x1a21e4(0x1a6));},_0x120c77+_0x4a165c-_0x5084fb);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x403415=_0x3a081a;if(!coinsLoaded){process[_0x403415(0x1fc)]({'telegrammsg':_0x403415(0x174)},_0xe9aa70=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5c068e='';if(config[_0x403415(0x237)])_0x5c068e=_0x403415(0x15c)+config[_0x403415(0xe4)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x5c068e=_0x403415(0x220)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x38a51d=getKPIs(_0x403415(0x1be)),_0x5d4b94=getKPIs(_0x403415(0x208),config[_0x403415(0x208)]),_0x156f81=getKPIs(_0x403415(0x1ce)),_0x46e475=getKPIs(_0x403415(0xf4),config[_0x403415(0x208)]);_0x5c068e+='<pre>',_0x5c068e+=_0x38a51d['leftTxt']+_0x403415(0x165)+_0x38a51d[_0x403415(0x190)]+'\x0a',_0x5c068e+=_0x38a51d[_0x403415(0x17d)]+':\x20'+_0x38a51d[_0x403415(0x17f)]+'%\x0a',_0x5c068e+=_0x5d4b94[_0x403415(0x22e)]+_0x403415(0x165)+_0x5d4b94[_0x403415(0x190)]+'\x0a',_0x5c068e+=_0x5d4b94['rightTxt']+':\x20'+_0x5d4b94['change']+'%\x0a',_0x5c068e+=_0x156f81[_0x403415(0x22e)]+':\x20'+_0x156f81[_0x403415(0x190)]+'\x20('+config['basecoin']+')\x0a',_0x5c068e+=_0x156f81[_0x403415(0x17d)]+':\x20'+_0x156f81[_0x403415(0x17f)]+'%\x20('+config[_0x403415(0x1be)]+')\x0a',_0x5c068e+=_0x46e475[_0x403415(0x22e)]+':\x20'+_0x46e475[_0x403415(0x190)]+'\x20('+config[_0x403415(0x208)]+')\x0a',_0x5c068e+=_0x46e475[_0x403415(0x17d)]+':\x20'+_0x46e475[_0x403415(0x17f)]+_0x403415(0xdf)+config[_0x403415(0x208)]+')\x0a',_0x5c068e+=_0x403415(0xd4),process[_0x403415(0x1fc)]({'telegrammsg':_0x5c068e},_0x566b91=>{});}async function sendPortfolioTelegram(){const _0x419652=_0x3a081a;if(!coinsLoaded){process['send']({'telegrammsg':_0x419652(0x174)},_0x169e88=>{});return;}let _0x2ae449='';if(config['showname'])_0x2ae449=_0x419652(0x15c)+config[_0x419652(0xe4)]+_0x419652(0xcb);else _0x2ae449=_0x419652(0x220)+botID+_0x419652(0xcb);_0x2ae449+=_0x419652(0x10e),_0x2ae449+=_0x419652(0xca),_0x2ae449+=_0x419652(0x10a),_0x2ae449+=_0x419652(0xca),currentCoins[_0x419652(0xc6)](_0x328ce8=>{const _0x74bfe0=_0x419652;_0x2ae449+=_0x328ce8['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x328ce8['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x328ce8[_0x74bfe0(0x149)],0x2,0x6)+'|\x20'+formatPad(_0x328ce8['delta']*0x64,0x2,0x6)+'\x0a';}),_0x2ae449+='</pre>',process['send']({'telegrammsg':_0x2ae449},_0x40ce99=>{});}function formatPad(_0x2cd9a9,_0x929fe4,_0x517e20){const _0x10f265=_0x3a081a,_0x2fca68=formatResultString(_0x2cd9a9,_0x929fe4);return _0x2fca68?_0x2fca68[_0x10f265(0xce)](_0x517e20):''[_0x10f265(0xce)](_0x517e20);}function logHistory(_0x1d970d,_0x5810f5,_0x3f3cd3=''){const _0x5d44fc=_0x3a081a;let _0x4fa2da={'time':getTimeStamp(),'type':_0x1d970d,'event':_0x5810f5};dbLogs[_0x5d44fc(0x146)](_0x5d44fc(0x23a))[_0x5d44fc(0x108)](_0x4fa2da)[_0x5d44fc(0xcc)]();if(_0x3f3cd3=='')_0x3f3cd3=_0x5810f5;proxyEmit(_0x5d44fc(0x167),{'log':_0x4fa2da,'summary':_0x3f3cd3}),process[_0x5d44fc(0x1fc)]({'telegram':{..._0x4fa2da,'botname':config[_0x5d44fc(0xe4)],'showname':config['showname']}},_0x48a26b=>{}),logger['full'](''+_0x4fa2da[_0x5d44fc(0x167)]);}function emitHistory(_0x2a3558={}){const _0x109668=_0x3a081a;Object[_0x109668(0xc0)](_0x2a3558)['length']==0x0&&(_0x2a3558={'type':['order',_0x109668(0x167)],'event':'','page':0x1});if(_0x2a3558[_0x109668(0x21c)][_0x109668(0x131)](_0x109668(0x167)))_0x2a3558[_0x109668(0x21c)][_0x109668(0x1e3)](_0x2a3558['type'][_0x109668(0x114)](_0x109668(0x167)),0x1,_0x109668(0x1af),_0x109668(0x187),_0x109668(0x134));if(dbLogs[_0x109668(0x142)](_0x109668(0x23a))['value']()){let _0x19f7b4=dbLogs['get']('logs')[_0x109668(0x118)](_0x232191=>{const _0xddcc08=_0x109668;if(_0x2a3558['type'][_0xddcc08(0x23f)]==0x0)return![];else return _0x2a3558[_0xddcc08(0x21c)][_0xddcc08(0x131)](_0x232191['type']);})[_0x109668(0x118)](_0x5e0cfa=>{const _0x1d4159=_0x109668;if(_0x2a3558['event']=='')return!![];else return _0x5e0cfa['event'][_0x1d4159(0x1e8)]()[_0x1d4159(0x131)](_0x2a3558[_0x1d4159(0x167)][_0x1d4159(0x1e8)]());})[_0x109668(0x201)](_0x109668(0x1d2)),_0x5d5f16=_0x19f7b4['value']()[_0x109668(0x23f)];_0x19f7b4=_0x19f7b4[_0x109668(0xde)]()[_0x109668(0x1ec)]((_0x2a3558['page']-0x1)*logPageSize,_0x2a3558[_0x109668(0x12d)]*logPageSize-0x1)['reverse']()[_0x109668(0x190)](),proxyEmit('event-history',{'logs':_0x19f7b4,'total':_0x5d5f16});}else proxyEmit(_0x109668(0x18c),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2b8db2){const _0x2af706=_0x3a081a;if(dbLogs[_0x2af706(0x142)]('logs')['value']()){const _0xc8dbdf=dbLogs[_0x2af706(0x146)](_0x2af706(0x23a))[_0x2af706(0x201)](_0x2af706(0x1d2))['filter'](_0x1985fd=>{const _0x1645d4=_0x2af706;return _0x1985fd[_0x1645d4(0x21c)]=='order';})['value']();dbLogs[_0x2af706(0x146)]('logs')['remove']()['write'](),dbLogs['get'](_0x2af706(0x23a))[_0x2af706(0x242)](_0xc8dbdf)[_0x2af706(0xcc)](),emitHistory(_0x2b8db2);}}async function pauseBot(_0x252587=''){const _0x363d9e=_0x3a081a,_0x537e6d=new Date()['getTime']();if(!lastErrorShown||_0x537e6d-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x537e6d;!lastBotPause?(lastBotPause=_0x537e6d,consecutivePauses=0x1):(_0x537e6d-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x363d9e(0x1fc)]({'stop':_0x363d9e(0x12a)},_0x94d1fe=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x363d9e(0x15b)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x252587)_0x252587+=_0x363d9e(0x13f);logHistory('error',_0x252587+_0x363d9e(0x1cf)+pauseBotInterval/0xea60+_0x363d9e(0x12b)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4fb267=_0x3a081a;process[_0x4fb267(0x1fc)]({'stop':'kill'},_0x3a5bab=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x23f5c3,_0x51b1f8){const _0x38e334=_0x3a081a;if(_0x23f5c3[_0x38e334(0xd5)]()[_0x38e334(0x131)]('API-key\x20format\x20invalid'))return logHistory(_0x38e334(0x1af),config[_0x38e334(0x224)]+_0x38e334(0xcd)),![];else{if(_0x23f5c3[_0x38e334(0xd5)]()['includes'](_0x38e334(0xe8)))return logHistory(_0x38e334(0x1af),config[_0x38e334(0x224)]+_0x38e334(0xd9)),![];else{if(_0x23f5c3['toString']()[_0x38e334(0x131)](_0x38e334(0x205)))return logHistory('error',config[_0x38e334(0x224)]+_0x38e334(0x16a)),logHistory(_0x38e334(0x1af),_0x38e334(0x199)),![];else await handleError(_0x23f5c3,_0x51b1f8);}}}async function handleError(_0x25dd52,_0x5b64ec,_0x30d3f5=''){const _0x4721af=_0x3a081a,_0x229c58=config['exchange']||_0x4721af(0xd6);if(_0x25dd52['toString']()[_0x4721af(0x131)]('DDoSProtection'))await pauseBot(config['exchange']+_0x4721af(0x156));else{if(_0x25dd52[_0x4721af(0xd5)]()[_0x4721af(0x131)](_0x4721af(0x1ba)))await pauseBot(config[_0x4721af(0x224)]+_0x4721af(0x1fa));else{if(_0x25dd52['toString']()['includes']('RequestTimeout'))await pauseBot(config[_0x4721af(0x224)]+_0x4721af(0x117));else{if(_0x25dd52['toString']()[_0x4721af(0x131)](_0x4721af(0x1c9)))await pauseBot(config[_0x4721af(0x224)]+_0x4721af(0x1c4));else{if(_0x25dd52[_0x4721af(0xd5)]()[_0x4721af(0x131)](_0x4721af(0x1e9)))logHistory(_0x4721af(0x1af),_0x5b64ec+_0x4721af(0x170)),logHistory(_0x4721af(0x1af),_0x4721af(0x1ac)),await killBot();else{if(_0x25dd52[_0x4721af(0xd5)]()[_0x4721af(0x131)]('InvalidNonce'))logHistory('error',_0x5b64ec+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x4721af(0x1af),_0x4721af(0x1ac)),await killBot();else{if(_0x25dd52[_0x4721af(0xd5)]()[_0x4721af(0x131)](_0x4721af(0x1e2)))logHistory(_0x4721af(0x1af),_0x5b64ec+_0x4721af(0x13f)+config[_0x4721af(0x224)]+_0x4721af(0xfb)),logHistory(_0x4721af(0x1af),_0x4721af(0x1ac)),await killBot();else{if(_0x25dd52[_0x4721af(0xd5)]()['includes'](_0x4721af(0xe8)))logHistory(_0x4721af(0x1af),_0x5b64ec+_0x4721af(0x13f)+config[_0x4721af(0x224)]+_0x4721af(0x236)),logHistory(_0x4721af(0x1af),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x25dd52['toString']()[_0x4721af(0x131)]('AuthenticationError'))logHistory(_0x4721af(0x1af),_0x5b64ec+_0x4721af(0x13f)+config['exchange']+_0x4721af(0x1bc)),logHistory(_0x4721af(0x1af),_0x4721af(0x1ac)),await killBot();else _0x25dd52[_0x4721af(0xd5)]()[_0x4721af(0x131)](_0x4721af(0x1f9))?logHistory(_0x4721af(0x1af),_0x5b64ec+_0x4721af(0x137)+_0x30d3f5):(logger[_0x4721af(0x230)](_0x5b64ec+'\x20|\x20Error\x20details:\x20',_0x25dd52),await pauseBot(_0x4721af(0x166)));}}}}}}}}}function formatResult(_0x5ac992,_0x59b33c){return parseFloat(_0x5ac992['toFixed'](_0x59b33c));}function formatResultTruncate(_0x2ef182,_0x53fa38){const _0xd9967f=_0x3a081a;let _0x3991f8=formatResultString(_0x2ef182,0xa),_0x18b742=_0x3991f8[_0xd9967f(0x114)]('.');return _0x18b742!=-0x1&&(_0x3991f8=_0x3991f8[_0xd9967f(0x1ec)](0x0,_0x18b742+_0x53fa38+0x1)),Number(_0x3991f8);}function formatResultString(_0xcbba52,_0x179ba7){const _0x46c7fa=_0x3a081a;let _0xf47e53;if(!(''+_0xcbba52)[_0x46c7fa(0x131)]('e'))_0xf47e53=+(Math[_0x46c7fa(0x16f)](_0xcbba52+'e+'+_0x179ba7)+'e-'+_0x179ba7);else{let _0x3a9425=(''+_0xcbba52)[_0x46c7fa(0x213)]('e'),_0x3ac771='';+_0x3a9425[0x1]+_0x179ba7>0x0&&(_0x3ac771='+'),_0xf47e53=+(Math[_0x46c7fa(0x16f)](+_0x3a9425[0x0]+'e'+_0x3ac771+(+_0x3a9425[0x1]+_0x179ba7))+'e-'+_0x179ba7);}return Number(_0xf47e53)[_0x46c7fa(0x1b7)](_0x179ba7);}function getServerTime(){const _0x26188a=_0x3a081a,_0x5c1c20=new Date();return _0x5c1c20[_0x26188a(0x185)]()+'/'+(_0x5c1c20[_0x26188a(0x17b)]()+0x1)[_0x26188a(0xd5)]()[_0x26188a(0xce)](0x2,'0')+'/'+_0x5c1c20[_0x26188a(0x211)]()[_0x26188a(0xd5)]()[_0x26188a(0xce)](0x2,'0')+'\x20'+_0x5c1c20[_0x26188a(0x175)]()[_0x26188a(0xd5)]()[_0x26188a(0xce)](0x2,'0')+':'+_0x5c1c20['getMinutes']()['toString']()[_0x26188a(0xce)](0x2,'0')+':'+_0x5c1c20[_0x26188a(0x238)]()[_0x26188a(0xd5)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x220175=_0x3a081a,_0x27cb22=shiftedTime();return _0x27cb22[_0x220175(0x185)]()+'/'+(_0x27cb22[_0x220175(0x17b)]()+0x1)['toString']()[_0x220175(0xce)](0x2,'0')+'/'+_0x27cb22['getDate']()[_0x220175(0xd5)]()[_0x220175(0xce)](0x2,'0')+'\x20'+_0x27cb22[_0x220175(0x175)]()[_0x220175(0xd5)]()['padStart'](0x2,'0')+':'+_0x27cb22['getMinutes']()[_0x220175(0xd5)]()[_0x220175(0xce)](0x2,'0')+':'+_0x27cb22[_0x220175(0x238)]()[_0x220175(0xd5)]()[_0x220175(0xce)](0x2,'0');}function getDate(){const _0x1068a9=_0x3a081a,_0x5949b7=shiftedTime();return _0x5949b7[_0x1068a9(0x185)]()+'/'+(_0x5949b7[_0x1068a9(0x17b)]()+0x1)[_0x1068a9(0xd5)]()['padStart'](0x2,'0')+'/'+_0x5949b7[_0x1068a9(0x211)]()['toString']()[_0x1068a9(0xce)](0x2,'0');}function getHour(){const _0x3ece43=_0x3a081a,_0x3bed7f=shiftedTime();return _0x3bed7f['getHours']()[_0x3ece43(0xd5)]()[_0x3ece43(0xce)](0x2,'0');}function sleep(_0x3eadc2){return new Promise(_0xac1f76=>setTimeout(_0xac1f76,_0x3eadc2));}function shiftedTime(){const _0x42462e=_0x3a081a,_0x233ac5=new Date();let _0x2fee69=_0x233ac5;if(config&&config[_0x42462e(0x110)]!==0x0)_0x2fee69=fns[_0x42462e(0x209)](_0x233ac5,{'hours':config['timeshift']});return _0x2fee69;}function timer(_0xc801a2){const _0x70a887=_0x3a081a,_0x51a614=new Date();!lasttime?console[_0x70a887(0x1ff)](getTimeStamp()+_0x70a887(0x189),_0xc801a2,_0x51a614):console['log'](getTimeStamp()+':\x20timer\x20>',_0xc801a2,(_0x51a614-lasttime)/0x3e8),lasttime=_0x51a614;}