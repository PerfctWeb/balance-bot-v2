const _0x456205=_0x5bf1;(function(_0x22690b,_0x182065){const _0x4eac9b=_0x5bf1,_0x25b0d6=_0x22690b();while(!![]){try{const _0x4006eb=parseInt(_0x4eac9b(0x2a2))/0x1+-parseInt(_0x4eac9b(0x2c0))/0x2*(-parseInt(_0x4eac9b(0x2ed))/0x3)+-parseInt(_0x4eac9b(0x2df))/0x4+parseInt(_0x4eac9b(0x1df))/0x5+parseInt(_0x4eac9b(0x1c2))/0x6+-parseInt(_0x4eac9b(0x1ea))/0x7+parseInt(_0x4eac9b(0x2da))/0x8*(-parseInt(_0x4eac9b(0x25b))/0x9);if(_0x4006eb===_0x182065)break;else _0x25b0d6['push'](_0x25b0d6['shift']());}catch(_0x2803b1){_0x25b0d6['push'](_0x25b0d6['shift']());}}}(_0x263b,0x25063));const _0x5387e7=function(){let _0x119beb=!![];return function(_0x48858b,_0xda2333){const _0x44c8c6=_0x119beb?function(){if(_0xda2333){const _0x533943=_0xda2333['apply'](_0x48858b,arguments);return _0xda2333=null,_0x533943;}}:function(){};return _0x119beb=![],_0x44c8c6;};}(),_0x473d14=_0x5387e7(this,function(){const _0xd685fe=_0x5bf1;return _0x473d14[_0xd685fe(0x245)]()['search'](_0xd685fe(0x2b6))['toString']()[_0xd685fe(0x2ea)](_0x473d14)[_0xd685fe(0x320)](_0xd685fe(0x2b6));});function _0x5bf1(_0x15f0bb,_0x3a269f){const _0x21930e=_0x263b();return _0x5bf1=function(_0x473d14,_0x5387e7){_0x473d14=_0x473d14-0x1ba;let _0x263b00=_0x21930e[_0x473d14];return _0x263b00;},_0x5bf1(_0x15f0bb,_0x3a269f);}_0x473d14();'use strict';const ccxt=require('ccxt'),low=require(_0x456205(0x2d7)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x456205(0x2d9)),Crypt=require(_0x456205(0x253))[_0x456205(0x307)],util=require('util'),argv=require('yargs/yargs')(process[_0x456205(0x33c)][_0x456205(0x26e)](0x2))[_0x456205(0x33c)],path=require(_0x456205(0x1e3));let exchange;global['ticker']={},global[_0x456205(0x2e1)]={};const usdBasecoins=[_0x456205(0x31a),_0x456205(0x2d6),_0x456205(0x274),'USDT',_0x456205(0x33d),_0x456205(0x2f9)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x456205(0x224)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x456205(0x346)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x456205(0x1f3)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x456205(0x1dc))[_0x456205(0x2dd)],botID=process[_0x456205(0x33c)][0x2]||_0x456205(0x258),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x456205(0x20e)]('Error:\x20Invalid\x20argument\x20'+botID+_0x456205(0x29f)),killBot());const userID=process[_0x456205(0x33c)][0x3]||'',configpath=userID?_0x456205(0x303)+userID+'/':'./config/',logspath=userID?_0x456205(0x322)+userID+'/':_0x456205(0x322),loggerfile=fs[_0x456205(0x312)](logspath+_0x456205(0x1c1),{'flags':'a'});!fs[_0x456205(0x26b)](configpath)&&fs[_0x456205(0x21e)](configpath);!fs[_0x456205(0x26b)](logspath)&&fs[_0x456205(0x21e)](logspath);const configfile=configpath+_0x456205(0x1f6)+botID+_0x456205(0x220),logfile=configpath+'bot-'+botID+_0x456205(0x33f),performancefile=configpath+_0x456205(0x1f6)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x456205(0x34a),settingsfile=configpath+_0x456205(0x1c9),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x456205(0x25d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x456205(0x1f7)]({'logs':[],'version':serverversion})[_0x456205(0x2d0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x456205(0x1f7)]({'data':[],'version':serverversion})[_0x456205(0x2d0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x456205(0x2d0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x456205(0x1f7)]({'coins':[],'version':serverversion})[_0x456205(0x2d0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x456205(0x31c),'rsaStandard':_0x456205(0x340)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x12fa28=>{const _0x5964ec=_0x456205;console[_0x5964ec(0x20e)](_0x12fa28);},'simple':_0xb1ad83=>{const _0x2f6154=_0x456205;console['log'](_0xb1ad83),loggerfile[_0x2f6154(0x2d0)](util['format'](_0xb1ad83)+'\x0a');},'full':async(_0x332fdd,_0x6b5739='')=>{const _0x29b1db=_0x456205;let _0x1bd776;if(config[_0x29b1db(0x329)])_0x1bd776=getTimeStamp()+':\x20'+config[_0x29b1db(0x277)]+'\x20>\x20'+_0x332fdd;else _0x1bd776=getTimeStamp()+':\x20Bot\x20'+botID+_0x29b1db(0x1d3)+_0x332fdd;console[_0x29b1db(0x20e)](_0x1bd776),loggerfile[_0x29b1db(0x2d0)](util[_0x29b1db(0x24d)](_0x1bd776)+'\x0a'),_0x6b5739&&(console[_0x29b1db(0x20e)](_0x6b5739),loggerfile[_0x29b1db(0x2d0)](util[_0x29b1db(0x24d)](_0x6b5739)+'\x0a'));},'debug':async(_0x36ed41,_0x143ffb='')=>{const _0x2a62cd=_0x456205;let _0xbca179;if(config[_0x2a62cd(0x329)])_0xbca179=getTimeStamp()+':\x20'+config[_0x2a62cd(0x277)]+_0x2a62cd(0x2d1)+_0x36ed41;else _0xbca179=getTimeStamp()+':\x20Bot\x20'+botID+_0x2a62cd(0x2d1)+_0x36ed41;if(debugging)console[_0x2a62cd(0x20e)](_0xbca179);loggerfile[_0x2a62cd(0x2d0)](util[_0x2a62cd(0x24d)](_0xbca179)+'\x0a');if(_0x143ffb){if(debugging)console[_0x2a62cd(0x20e)](_0x143ffb);loggerfile[_0x2a62cd(0x2d0)](util[_0x2a62cd(0x24d)](_0x143ffb)+'\x0a');}}};process['on'](_0x456205(0x1d1),function(_0x677d6b){const _0x1a21fc=_0x456205;handleError(_0x677d6b,_0x1a21fc(0x1d1));});settings['timeshift']!=config[_0x456205(0x2f2)]&&updateTimeshift(settings[_0x456205(0x2f2)]);settings['onepagemode']!=config[_0x456205(0x325)]&&updateOnepagemode(settings[_0x456205(0x325)]);process[_0x456205(0x2c1)]({'started':_0x456205(0x260)},_0x41ca32=>{}),initializeProcessListeners();function proxyEmit(_0x3594ee,_0x1e0bdb=null){const _0x17458f=_0x456205;process[_0x17458f(0x2c1)]({'function':_0x3594ee,'args':_0x1e0bdb},_0x3f25be=>{});}function initializeProcessListeners(){const _0x2b3776=_0x456205;process['on'](_0x2b3776(0x26f),_0x18ee67=>{const _0x4425d9=_0x2b3776;switch(Object[_0x4425d9(0x1d5)](_0x18ee67)[0x0]){case _0x4425d9(0x2f2):_0x18ee67[_0x4425d9(0x2f2)]!=undefined&&(settings[_0x4425d9(0x2f2)]=_0x18ee67['timeshift'],updateTimeshift(settings[_0x4425d9(0x2f2)]));break;case _0x4425d9(0x325):_0x18ee67[_0x4425d9(0x325)]!=undefined&&(settings[_0x4425d9(0x325)]=_0x18ee67[_0x4425d9(0x325)],updateOnepagemode(settings['onepagemode']));break;case _0x4425d9(0x334):_0x18ee67['bots']!=undefined&&(bots=JSON['parse'](_0x18ee67[_0x4425d9(0x334)]),proxyEmit(_0x4425d9(0x334),bots));break;case _0x4425d9(0x242):switch(_0x18ee67[_0x4425d9(0x242)]){case _0x4425d9(0x319):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x18ee67[_0x4425d9(0x254)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x18ee67[_0x4425d9(0x254)]);break;case _0x4425d9(0x31d):getPortfolio(_0x18ee67[_0x4425d9(0x254)]);break;case'storeConfiguration':storeConfiguration(_0x18ee67['args']);break;case _0x4425d9(0x27f):storeHeadless(_0x18ee67[_0x4425d9(0x254)]);break;case'storeFiat':storeFiat(_0x18ee67[_0x4425d9(0x254)]);break;case _0x4425d9(0x30b):resetHistory();break;case _0x4425d9(0x292):getStartingBalances(getNormalizedPerformance());break;case _0x4425d9(0x328):placeOrder(_0x18ee67[_0x4425d9(0x254)]);break;case _0x4425d9(0x2ef):cancelLoading();break;case _0x4425d9(0x281):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4425d9(0x1cc):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x51e176=![]){const _0x385f5a=_0x456205;logger[_0x385f5a(0x298)](_0x385f5a(0x256)+(_0x51e176?_0x385f5a(0x30e):_0x385f5a(0x20d))+_0x385f5a(0x22e)+config[_0x385f5a(0x1f9)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x51e176)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x385f5a(0x338)]!=_0x385f5a(0x278)){loadingProgress=0x0;if(_0x51e176){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x5ef0cc){handleErrorNoStop(_0x5ef0cc,_0x385f5a(0x23c));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1ffa00=await getCoins();[currentCoins,currentCoinsAll]=_0x1ffa00,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x385f5a(0x298)](_0x385f5a(0x2b8)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x385f5a(0x294)]==0x0&&allOpenOrders[_0x385f5a(0x294)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2d2e69=_0x456205;exchangeStopped=!![];try{await exchange[_0x2d2e69(0x2b4)]();}catch(_0x5f3630){await handleError(_0x5f3630,_0x2d2e69(0x2b5));}}async function reloadExchange(){const _0x58878b=_0x456205;while(lockOrders!=ORDERS[_0x58878b(0x346)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x58878b(0x298)](_0x58878b(0x265)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x731ef4=config[_0x456205(0x1f9)],_0x2343d8=config[_0x456205(0x338)],_0x46722e=config['apiSecret'],_0x48a217=config[_0x456205(0x301)]){const _0x172ca8=_0x456205;exchange&&await stopExchange();!supportedExchanges()[_0x172ca8(0x207)](_0x731ef4)&&(logHistory(_0x172ca8(0x2b3),_0x172ca8(0x2e5)+_0x731ef4+'\x20exchange'),killBot());const _0x47b202=ccxt['pro'][_0x731ef4['toLowerCase']()];exchange=new _0x47b202({'apiKey':_0x2343d8,'secret':_0x46722e,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x48a217)exchange['password']=_0x48a217;}function setStableCoins(){const _0x13fbc2=_0x456205;let _0x147e4d=config['basecoin']==_0x13fbc2(0x2c8)?_0x13fbc2(0x2c8):config['basecoin']==_0x13fbc2(0x24b)?'PAXG':_0x13fbc2(0x22f),_0x3a8a15=!allSymbols[_0x13fbc2(0x207)](_0x147e4d+'/USD')?_0x13fbc2(0x270):_0x13fbc2(0x31a),_0x3e7d86=!allSymbols[_0x13fbc2(0x207)](_0x147e4d+_0x13fbc2(0x251))?_0x3a8a15:_0x13fbc2(0x348);stablecoins={'eur':{'coin':''+_0x147e4d+_0x3e7d86,'symbol':_0x147e4d+'/'+_0x3e7d86},'usd':{'coin':''+_0x147e4d+_0x3a8a15,'symbol':_0x147e4d+'/'+_0x3a8a15}};}async function initwsCcxt(){const _0x60358b=_0x456205;initCycle++;const _0x4f9f19=initCycle;let _0x586e4d=[];config[_0x60358b(0x316)]['forEach'](_0x17ee6e=>{const _0x41aa81=_0x60358b;if(!_0x17ee6e[_0x41aa81(0x1ff)]&&_0x17ee6e[_0x41aa81(0x223)]!=config[_0x41aa81(0x1f4)])_0x586e4d[_0x41aa81(0x335)](_0x17ee6e[_0x41aa81(0x2b0)]);});if(!_0x586e4d[_0x60358b(0x207)](stablecoins[_0x60358b(0x200)][_0x60358b(0x2b0)]))_0x586e4d[_0x60358b(0x335)](stablecoins[_0x60358b(0x200)][_0x60358b(0x2b0)]);if(!_0x586e4d[_0x60358b(0x207)](stablecoins[_0x60358b(0x2cc)]['symbol']))_0x586e4d[_0x60358b(0x335)](stablecoins[_0x60358b(0x2cc)][_0x60358b(0x2b0)]);if(config['exchange']['startsWith']('Binance')&&config['basecoin']!='PAXG'){if(!_0x586e4d['includes'](_0x60358b(0x2b7)+config['basecoin']))_0x586e4d[_0x60358b(0x335)](_0x60358b(0x2b7)+config['basecoin']);}loadCoins(_0x586e4d),_0x586e4d=validateSymbols(_0x586e4d);const _0x3a0a0b=async _0x3b7d2a=>{const _0x4436cc=_0x60358b;let _0x260817;try{const _0x39f530=await getTickers(_0x3b7d2a);Object[_0x4436cc(0x1c8)](_0x39f530)['forEach'](_0x404634=>{const _0x4d3ce9=_0x4436cc;_0x260817=_0x404634[0x1]['symbol'],global[_0x4d3ce9(0x343)][noslash(_0x260817)]=_0x404634[0x1]['last'],global['change'][_0x260817]=_0x404634[0x1][_0x4d3ce9(0x2ce)];});}catch(_0x2cd26d){await handleError(_0x2cd26d,_0x4436cc(0x1e5),_0x260817);}},_0x52e478=async _0x5e6100=>{const _0x4d6441=_0x60358b;while(initCycle==_0x4f9f19){if(!botPaused)try{const _0x2c018e=await exchange['watchTrades'](_0x5e6100);global[_0x4d6441(0x343)][noslash(_0x2c018e[0x0][_0x4d6441(0x2b0)])]=_0x2c018e[0x0]['price'],await sleep(0x3e8);}catch(_0x24fe1d){if(!exchangeStopped)await handleError(_0x24fe1d,_0x4d6441(0x2eb),_0x5e6100);}else await sleep(0x64);}},_0x5c59fb=async _0x16cd6c=>{const _0x38d562=_0x60358b;while(initCycle==_0x4f9f19){if(!botPaused){let _0x4061f0;try{await sleep(0x3c*0x3e8);const _0x18e6b4=await getTickers(_0x16cd6c);Object['entries'](_0x18e6b4)[_0x38d562(0x275)](_0xfa9f9a=>{const _0x20b1dd=_0x38d562;_0x4061f0=_0xfa9f9a[0x1]['symbol'],global[_0x20b1dd(0x2e1)][_0x4061f0]=_0xfa9f9a[0x1]['percentage'];});}catch(_0x3206b3){if(!exchangeStopped)await handleError(_0x3206b3,_0x38d562(0x27a),_0x4061f0);}}else await sleep(0x64);}},_0x186092=async _0x70bfef=>{const _0x579d46=_0x60358b;while(initCycle==_0x4f9f19){if(!botPaused)try{const _0x2e4399=await exchange['watchOrders'](_0x70bfef);initCycle==_0x4f9f19&&_0x2e4399[_0x579d46(0x275)](_0x18ca9a=>{updateNumberCoinsCcxt(_0x18ca9a);});}catch(_0x4ff2ea){if(!exchangeStopped)await handleError(_0x4ff2ea,_0x579d46(0x1d7));}else await sleep(0x64);}};_0x3a0a0b(_0x586e4d),_0x5c59fb(_0x586e4d),_0x586e4d[_0x60358b(0x275)](_0x1f6bad=>{_0x52e478(_0x1f6bad),_0x186092(_0x1f6bad);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xb300c7){const _0x2c9adc=_0x456205;let _0x578ef2={};try{if(config[_0x2c9adc(0x1f9)]!=_0x2c9adc(0x34f))_0x578ef2=await exchange['fetchTickers'](_0xb300c7);else for(const _0x2545ac of _0xb300c7){const _0x32643b=await exchange[_0x2c9adc(0x32e)](_0x2545ac);_0x578ef2[_0x2545ac]=_0x32643b;}return _0x578ef2;}catch(_0x24c7bc){throw _0x24c7bc;}}async function watchTransactions(){const _0x26878e=_0x456205;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4ce56f=await getCoins(),[_0x4da05b,_0x1bdb72]=_0x4ce56f;let _0x1288ef=[];currentCoins[_0x26878e(0x275)](_0xa45002=>{const _0x3be35a=_0x26878e,_0x2fb3d7=_0x4da05b[_0x3be35a(0x2a0)](_0x441a35=>_0x441a35[_0x3be35a(0x223)]==_0xa45002[_0x3be35a(0x223)]);if(_0x2fb3d7){if(_0xa45002[_0x3be35a(0x269)]!=_0x2fb3d7[_0x3be35a(0x269)]){let _0x258e99;if(_0xa45002[_0x3be35a(0x223)]!=config[_0x3be35a(0x1f4)]){const _0x31379f=global[_0x3be35a(0x343)][noslash(_0xa45002['symbol'])];_0x258e99=_0xa45002[_0x3be35a(0x1fd)]?0x1/_0x31379f:_0x31379f;}else _0x258e99=0x1;_0x1288ef[_0x3be35a(0x335)]({'coin':_0xa45002[_0x3be35a(0x223)],'symbol':_0xa45002[_0x3be35a(0x2b0)],'price':_0x258e99,'number':Number(formatResult(_0x2fb3d7[_0x3be35a(0x269)]-_0xa45002['number'],0x8)),'basecoinvalue':_0x258e99*(_0x2fb3d7['number']-_0xa45002[_0x3be35a(0x269)])});}}});if(_0x1288ef['length']==0x1&&!blockTransactionDetection){if(config[_0x26878e(0x1c5)]){logger['debug'](_0x26878e(0x2bc)+_0x1288ef[0x0][_0x26878e(0x272)]+_0x26878e(0x342)+lastFees[_0x26878e(0x210)]);if(lastFees['highest']==0x0||Math['abs'](_0x1288ef[0x0][_0x26878e(0x272)])>lastFees[_0x26878e(0x210)]){delete _0x1288ef[0x0][_0x26878e(0x2b0)],delete _0x1288ef[0x0]['basecoinvalue'];let _0x4d5f15=[],_0x5dad12=[...config[_0x26878e(0x2cf)]]||[],_0x270464=config[_0x26878e(0x2cf)];_0x5dad12[_0x26878e(0x2a9)]((_0x1abe6f,_0xffa186)=>_0x1abe6f[_0x26878e(0x279)]>_0xffa186[_0x26878e(0x279)]?-0x1:_0xffa186[_0x26878e(0x279)]>_0x1abe6f['date']?0x1:0x0);const _0x33bfdd=getDate();if(_0x5dad12[0x0]){const _0x4ebe94=fns[_0x26878e(0x268)](_0x5dad12[0x0][_0x26878e(0x279)],_0x26878e(0x21f),new Date()),_0x36ee12=fns[_0x26878e(0x268)](_0x33bfdd,_0x26878e(0x21f),new Date());if(fns[_0x26878e(0x22d)](_0x4ebe94,_0x36ee12)){_0x4d5f15=_0x5dad12[0x0][_0x26878e(0x2e4)];const _0x2a338a=_0x4d5f15[_0x26878e(0x2a0)](_0x36b1c6=>_0x36b1c6[_0x26878e(0x223)]==_0x1288ef[0x0]['coin']);_0x2a338a?(_0x2a338a[_0x26878e(0x269)]+=_0x1288ef[0x0][_0x26878e(0x269)],_0x2a338a[_0x26878e(0x269)]==0x0&&(_0x4d5f15=_0x4d5f15[_0x26878e(0x1db)](_0x6cc8f1=>{const _0x185997=_0x26878e;return _0x6cc8f1[_0x185997(0x223)]!=_0x1288ef[0x0][_0x185997(0x223)];}))):_0x4d5f15[_0x26878e(0x335)](_0x1288ef[0x0]);const _0x40b2ba=_0x270464[_0x26878e(0x2a0)](_0x6b80d8=>_0x6b80d8[_0x26878e(0x279)]==_0x33bfdd);_0x40b2ba['changes']=_0x4d5f15;}else _0x270464[_0x26878e(0x335)]({'date':_0x33bfdd,'changes':[_0x1288ef[0x0]]});}const _0x2e2a86=_0x270464[_0x26878e(0x2a0)](_0x3a9a6b=>_0x3a9a6b['date']==_0x33bfdd);if(_0x2e2a86){let _0x3fe380=!![];_0x2e2a86[_0x26878e(0x2e4)]['forEach'](_0x5140fa=>{if(_0x5140fa['number']!=0x0)_0x3fe380=![];}),_0x3fe380&&(_0x270464=_0x270464[_0x26878e(0x1db)](_0x257351=>{const _0x186eac=_0x26878e;return _0x257351[_0x186eac(0x279)]!=_0x33bfdd;}));}let _0x17f221=dbConfig['get'](_0x26878e(0x2e7))[_0x26878e(0x2a0)]({'botID':botID})[_0x26878e(0x202)]();_0x17f221&&(dbConfig[_0x26878e(0x1ed)](_0x26878e(0x2e7))[_0x26878e(0x2a0)]({'botID':botID})['assign']({'liquidity':_0x270464})[_0x26878e(0x2d0)](),config[_0x26878e(0x2cf)]=_0x270464),logHistory(_0x26878e(0x261),'Portfolio\x20change\x20detected:\x20'+Math[_0x26878e(0x32c)](_0x1288ef[0x0][_0x26878e(0x269)])+'\x20'+_0x1288ef[0x0][_0x26878e(0x223)]+'\x20'+(_0x1288ef[0x0][_0x26878e(0x269)]>0x0?'added':_0x26878e(0x2d5))+_0x26878e(0x23f)),proxyEmit(_0x26878e(0x2e2),emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x26878e(0x32c)](_0x1288ef[0x0]['number'])+'\x20'+_0x1288ef[0x0][_0x26878e(0x223)]+'\x20'+(_0x1288ef[0x0][_0x26878e(0x269)]>0x0?_0x26878e(0x20c):'removed'));transactionDetected=!![];}else logger[_0x26878e(0x298)](_0x26878e(0x29c)+Math[_0x26878e(0x32c)](_0x1288ef[0x0][_0x26878e(0x269)])+'\x20'+_0x1288ef[0x0]['coin']+'\x20'+(_0x1288ef[0x0][_0x26878e(0x269)]>0x0?_0x26878e(0x20c):'removed')+_0x26878e(0x1f0));}currentCoins=_0x4da05b,currentCoinsAll=_0x1bdb72,await sleep(watchTransactionsInterval);}catch(_0xce4536){if(!exchangeStopped)await handleError(_0xce4536,_0x26878e(0x2bd));}else await sleep(0x64);}}async function loadSymbols(){const _0xcdd294=_0x456205;try{markets=await exchange[_0xcdd294(0x21d)](),allSymbols=[],Object[_0xcdd294(0x1c8)](markets)[_0xcdd294(0x275)](_0x2481fe=>{const _0x584eb6=_0xcdd294;_0x2481fe[0x1][_0x584eb6(0x2fc)]&&_0x2481fe[0x1][_0x584eb6(0x32f)]&&allSymbols[_0x584eb6(0x335)](_0x2481fe[0x0]);});}catch(_0x2e6a8c){throw _0x2e6a8c;}}function validateSymbols(_0x1d7772){let _0x27b560=[];return _0x1d7772['forEach'](_0x52eb17=>{const _0x547009=_0x5bf1;!allSymbols[_0x547009(0x207)](_0x52eb17)?logHistory('error',_0x547009(0x271)+_0x52eb17+_0x547009(0x27b)):_0x27b560[_0x547009(0x335)](_0x52eb17);}),_0x27b560;}async function initclient(){const _0x5082e1=_0x456205;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5082e1(0x27d),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5082e1(0x273),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x280d04=getNormalizedPerformance();emitPerformance(_0x280d04),getStartingBalances(_0x280d04);}async function toggleBotMode(){const _0x43ff25=_0x456205;let _0x3dcbf0=dbConfig[_0x43ff25(0x1ed)](_0x43ff25(0x2e7))[_0x43ff25(0x2a0)]({'botID':botID})['value']();if(_0x3dcbf0){const _0x3cea68=!_0x3dcbf0[_0x43ff25(0x305)];dbConfig[_0x43ff25(0x1ed)](_0x43ff25(0x2e7))[_0x43ff25(0x2a0)]({'botID':botID})[_0x43ff25(0x349)]({'headless':_0x3cea68})[_0x43ff25(0x2d0)](),config[_0x43ff25(0x305)]=_0x3cea68,proxyEmit(_0x43ff25(0x2e2),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x124aa0=_0x456205;process['send']({'updatebotmanager':!![]},_0xeae924=>{}),logger[_0x124aa0(0x298)](_0x124aa0(0x2a4)+config[_0x124aa0(0x305)]);}async function loadCoins(_0x15ff64){const _0x418470=_0x456205;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x49365c,_0x37199d=0x0,_0x2c3a29=0x0;_0x15ff64[_0x418470(0x275)](_0x15f858=>{const _0x5eb49a=_0x418470;loading[_0x5eb49a(0x2e3)]['push'](_0x15f858);}),loadingCanceled=![];let _0x2a86c0=![];while(_0x49365c!=_0x15ff64[_0x418470(0x294)]+maxLoadingProgress){_0x49365c=loadingProgress,_0x15ff64[_0x418470(0x275)](_0x5e8646=>{const _0x313f4d=_0x418470;if(global[_0x313f4d(0x343)][noslash(_0x5e8646)]){loading[_0x313f4d(0x2e3)]=loading[_0x313f4d(0x2e3)][_0x313f4d(0x1db)](_0x1a07fe=>_0x1a07fe!=_0x5e8646);if(!watchedSymbols[_0x313f4d(0x207)](_0x5e8646))watchedSymbols['push'](_0x5e8646);_0x49365c++;}}),loading['progress']=Math[_0x418470(0x225)](_0x49365c/(_0x15ff64[_0x418470(0x294)]+maxLoadingProgress)*0x64);loading[_0x418470(0x1d0)]!=0x64&&(_0x2c3a29>0x1e*0x5&&(loading[_0x418470(0x2fa)]=!![],emitLoadingProgress()),_0x2c3a29>0x78*0x5&&!_0x2a86c0&&(_0x2a86c0=!![],logHistory(_0x418470(0x2b3),_0x418470(0x2c3)+loading[_0x418470(0x2e3)][_0x418470(0x2a3)](',\x20')+_0x418470(0x21b)),logHistory('error',_0x418470(0x1e9)+loadCoinsRetryInterval/0xea60+_0x418470(0x241)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x43dd1b=_0x418470;process[_0x43dd1b(0x2c1)]({'stop':_0x43dd1b(0x215)},_0x3930c6=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x37199d!=loading['progress']&&(_0x37199d=loading[_0x418470(0x1d0)],emitLoadingProgress()),_0x2c3a29++,await sleep(0xc8);}_0x49365c==_0x15ff64[_0x418470(0x294)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x418470(0x260)},_0x7bc39a=>{}),_0x2a86c0&&logHistory(_0x418470(0x261),_0x418470(0x345)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x319eb7=_0x456205;proxyEmit(_0x319eb7(0x2e2),{...emittedConfiguration(),'configstate':_0x319eb7(0x1bb)});}function emitLoadingProgress(){const _0x296a4d=_0x456205;proxyEmit(_0x296a4d(0x1c6),loading);}async function getFiat(){const _0x40b8e3=_0x456205;let _0x52dd20=global['ticker'][stablecoins[_0x40b8e3(0x200)]['coin']],_0x3eedb2=global['ticker'][stablecoins[_0x40b8e3(0x2cc)]['coin']];return{'eur':Number(_0x52dd20),'usd':Number(_0x3eedb2)};}function capitalize(_0x18807d){const _0x555fab=_0x456205;return _0x18807d['substring'](0x0,0x1)[_0x555fab(0x2e6)]()+_0x18807d[_0x555fab(0x27e)](0x1);}function supportedExchanges(){const _0x5239d8=_0x456205,_0x369d98=['ws',_0x5239d8(0x24e),_0x5239d8(0x32e),'watchTrades','watchOrders',_0x5239d8(0x2be),_0x5239d8(0x28a),_0x5239d8(0x2f4),_0x5239d8(0x1ef),'fetchBalance'];let _0x26021d=[],_0xc1f904=[],_0x571c82=ccxt[_0x5239d8(0x1c0)]['exchanges'];_0x571c82[_0x5239d8(0x275)](_0x26c830=>{const _0x17c354=_0x5239d8;try{const _0x1b5809=new ccxt['pro'][_0x26c830]();_0xc1f904[_0x17c354(0x335)](_0x1b5809);}catch(_0x26aeea){}}),_0xc1f904[_0x5239d8(0x275)](_0x5809b4=>{const _0x32981b=_0x5239d8;let _0x488b64=0x0;_0x369d98[_0x32981b(0x275)](_0x56dd2c=>{const _0x55475b=_0x32981b;_0x56dd2c in _0x5809b4[_0x55475b(0x290)]&&_0x5809b4[_0x55475b(0x290)][_0x56dd2c]&&_0x488b64++;}),_0x488b64==_0x369d98[_0x32981b(0x294)]&&_0x26021d[_0x32981b(0x335)](capitalize(_0x5809b4['id']));});let _0x2df630=[];return _0x571c82['forEach'](_0x463ed3=>{const _0x4479a6=_0x5239d8;_0x463ed3=capitalize(_0x463ed3);if(!_0x26021d[_0x4479a6(0x207)](_0x463ed3))_0x2df630['push'](_0x463ed3);}),_0x26021d;}function setStartDatePerformance(){const _0x5a9968=_0x456205;if(config&&config['liquidity'][0x0]['changes'][_0x5a9968(0x294)]!=0x0){const _0x21d502=config[_0x5a9968(0x2cf)][0x0][_0x5a9968(0x2e4)];dbPerformance[_0x5a9968(0x1ed)]('data')['find']({'date':config[_0x5a9968(0x2ca)]})[_0x5a9968(0x349)]({'coins':_0x21d502})['write']();}}async function recreateCoinResults(){const _0x1b09bf=_0x456205;let _0x19e17c,_0x4fff87=[];try{const _0x75fe5b=fns[_0x1b09bf(0x24d)](fns[_0x1b09bf(0x1dd)](config[_0x1b09bf(0x2ca)][_0x1b09bf(0x2fe)](/\//g,'-')),_0x1b09bf(0x2e0));for(const _0x2bdb60 of currentCoins){if(_0x2bdb60[_0x1b09bf(0x223)]!=config[_0x1b09bf(0x1f4)]){let _0x9e04a5=0x0,_0x3bae21,_0x34c98e;_0x19e17c=await getAllEventOrders(_0x2bdb60[_0x1b09bf(0x2b0)]);if(_0x19e17c[_0x1b09bf(0x294)]>0x0)_0x19e17c['forEach'](_0x39c38a=>{const _0xb05891=_0x1b09bf,_0x4ec6fc=_0x2bdb60[_0xb05891(0x2b0)][_0xb05891(0x207)](config[_0xb05891(0x1f4)]+'/');_0x4fff87[_0xb05891(0x335)]({'datetime':_0x39c38a['datetime'],'coin':_0x2bdb60[_0xb05891(0x223)],'symbol':_0x2bdb60[_0xb05891(0x2b0)],'side':_0x39c38a[_0xb05891(0x2d8)],'reverse':_0x4ec6fc,'amount':formatResult(_0x39c38a[_0xb05891(0x226)],0x8),'filled':formatResult(_0x39c38a[_0xb05891(0x226)],0x8),'price':formatResult(_0x39c38a['price'],0x8)}),_0x9e04a5=_0x39c38a[_0xb05891(0x2d8)]==_0xb05891(0x350)?_0x9e04a5+_0x39c38a[_0xb05891(0x226)]:_0x9e04a5-_0x39c38a[_0xb05891(0x226)];if(!_0x34c98e)_0x34c98e=_0x39c38a['price'];});_0x3bae21=_0x2bdb60[_0x1b09bf(0x269)]-_0x9e04a5;let _0x4588e2;config[_0x1b09bf(0x2cf)][_0x1b09bf(0x275)](_0x48ee7c=>{const _0x522985=_0x1b09bf;!_0x4588e2&&(_0x4588e2=_0x48ee7c[_0x522985(0x2e4)][_0x522985(0x2a0)](_0x3bfa7b=>_0x3bfa7b['coin']==_0x2bdb60[_0x522985(0x223)]),_0x4588e2&&(_0x3bae21=_0x4588e2['number'],_0x34c98e=_0x4588e2[_0x522985(0x1e7)]));});let _0x220b56=dbCoinResults[_0x1b09bf(0x1ed)](_0x1b09bf(0x2f0))[_0x1b09bf(0x2a0)]({'coin':_0x2bdb60[_0x1b09bf(0x223)]})[_0x1b09bf(0x202)]();_0x220b56={'coin':_0x2bdb60[_0x1b09bf(0x223)],'number':_0x3bae21,'breakeven':_0x34c98e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1b09bf(0x1ed)](_0x1b09bf(0x2f0))['find']({'coin':_0x2bdb60[_0x1b09bf(0x223)]})['assign'](_0x220b56)['write']();}}_0x4fff87['sort']((_0x5b54e4,_0xb27c7d)=>_0x5b54e4[_0x1b09bf(0x323)]>_0xb27c7d[_0x1b09bf(0x323)]?0x1:_0xb27c7d[_0x1b09bf(0x323)]>_0x5b54e4[_0x1b09bf(0x323)]?-0x1:0x0);let _0x5decea=0x0;for(let _0x3dd4a7 of _0x4fff87){await updateCoinResults(_0x3dd4a7,!![]);}}catch(_0x414532){await handleError(_0x414532,'recreateCoinResults()');}}async function getAllEventOrders(_0xdc5f4d){const _0x3b9979=_0x456205;let _0x3381e2=[],_0x51e504=dbLogs[_0x3b9979(0x1ed)](_0x3b9979(0x2f6))[_0x3b9979(0x1db)](_0x5612d2=>{const _0x560ed4=_0x3b9979,_0x4517f0=_0x5612d2['event']['toLowerCase']();return _0x4517f0[_0x560ed4(0x207)](_0xdc5f4d['toLowerCase']())&&(_0x4517f0[_0x560ed4(0x207)](_0x560ed4(0x2de))&&_0x4517f0[_0x560ed4(0x207)](_0x560ed4(0x209))||_0x4517f0[_0x560ed4(0x207)](_0x560ed4(0x226))&&_0x4517f0['includes'](_0x560ed4(0x209)));})['sortBy'](_0x3b9979(0x2c2))[_0x3b9979(0x202)]();return _0x51e504[_0x3b9979(0x275)](_0x56605e=>{const _0x7ba6f9=_0x3b9979,_0x4bd185=_0x56605e[_0x7ba6f9(0x2ba)][_0x7ba6f9(0x207)](_0x7ba6f9(0x23a))?_0x7ba6f9(0x23a):_0x7ba6f9(0x350),_0x73d7ad=/#([0-9]|\.)+\s/i,_0x78077=Number(_0x73d7ad[_0x7ba6f9(0x296)](_0x56605e[_0x7ba6f9(0x2ba)])[0x0][_0x7ba6f9(0x26e)](0x1)),_0xaad378=/@([0-9]|\.)+$/i,_0x43b106=Number(_0xaad378[_0x7ba6f9(0x296)](_0x56605e['event'])[0x0][_0x7ba6f9(0x26e)](0x1));_0x3381e2[_0x7ba6f9(0x335)]({'datetime':_0x56605e[_0x7ba6f9(0x2c2)],'coin':symbolToCoin(_0xdc5f4d),'symbol':_0xdc5f4d,'side':_0x4bd185,'amount':_0x78077,'filled':_0x78077,'price':_0x43b106});}),_0x3381e2;}async function getAllOrders(_0x577af3,_0x4005f3){const _0x42d22e=_0x456205;let _0x2819f4=[];while(_0x4005f3<exchange[_0x42d22e(0x2dc)]()){const _0x4e2828=0x1f4;try{const _0x293238=await exchange[_0x42d22e(0x1ef)](_0x577af3,_0x4005f3,_0x4e2828);if(_0x293238[_0x42d22e(0x294)])_0x4005f3=_0x293238[_0x293238['length']-0x1][_0x42d22e(0x2bb)]+0x1,_0x2819f4=_0x2819f4['concat'](_0x293238);else break;}catch(_0x1cbb40){await handleError(_0x1cbb40,_0x42d22e(0x2a5),_0x577af3);}}return _0x2819f4;}async function validate24hChanges(){const _0x5344cc=_0x456205;for(const _0x4d09a8 of currentCoins){if(_0x4d09a8[_0x5344cc(0x223)]!=config[_0x5344cc(0x1f4)]){let _0xaf6f59;_0x4d09a8['reverse']?_0xaf6f59=formatResult((0x1/(global['change'][noslash(_0x4d09a8['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0xaf6f59=global['change'][noslash(_0x4d09a8[_0x5344cc(0x2b0)])],_0xaf6f59<config[_0x5344cc(0x1ca)]&&(logHistory(_0x5344cc(0x2b3),_0x4d09a8['coin']+_0x5344cc(0x286)+_0xaf6f59+'%'),logHistory(_0x5344cc(0x2b3),_0x5344cc(0x20b)),logHistory(_0x5344cc(0x2b3),_0x5344cc(0x34d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x49cc11,_0x43b6c1){const _0x3ff888=_0x456205;if(!_0x49cc11)return!![];const _0x7f2dc4=_0x43b6c1[_0x3ff888(0x1f2)]('.'),_0x3341d2=_0x49cc11[_0x3ff888(0x1f2)]('.');for(var _0x43df44=0x0;_0x43df44<_0x3341d2['length'];_0x43df44++){const _0x57fb6c=~~_0x3341d2[_0x43df44],_0xe3a8ba=~~_0x7f2dc4[_0x43df44];if(_0x57fb6c<_0xe3a8ba)return!![];if(_0x57fb6c>_0xe3a8ba)return![];}return![];}async function oneTimeMigration(){const _0x2e1bc4=_0x456205;let _0x28d9ed=dbLogs['get'](_0x2e1bc4(0x2dd))['value']();if(isOlderVersion(_0x28d9ed,_0x2e1bc4(0x2cd))){let _0x50cff5=[];const _0x5953ca=dbLogs[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2f6))['value']();_0x5953ca[_0x2e1bc4(0x275)](_0x1b988f=>{const _0x36076c=_0x2e1bc4;_0x50cff5[_0x36076c(0x335)]({'time':_0x1b988f[_0x36076c(0x2c2)],'type':_0x1b988f[_0x36076c(0x327)],'event':_0x1b988f[_0x36076c(0x2ba)]});}),dbLogs[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2f6))[_0x2e1bc4(0x349)](_0x50cff5)[_0x2e1bc4(0x2d0)]();}let _0x1ed887=dbConfig[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2dd))[_0x2e1bc4(0x202)]();if(isOlderVersion(_0x1ed887,_0x2e1bc4(0x2cd))){let _0x5604d6=dbConfig[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2e7))[_0x2e1bc4(0x2a0)]({'botID':botID})[_0x2e1bc4(0x202)]();if(_0x5604d6){let _0x9b174a=[];_0x5604d6[_0x2e1bc4(0x316)][_0x2e1bc4(0x275)](_0x5abf41=>{const _0x155b1e=_0x2e1bc4;_0x9b174a[_0x155b1e(0x335)]({'coin':_0x5abf41['coin'],'number':_0x5abf41[_0x155b1e(0x1c3)],'price':_0x5abf41[_0x155b1e(0x311)]}),delete _0x5abf41[_0x155b1e(0x1c3)],delete _0x5abf41['startprice'];});if(_0x9b174a[_0x2e1bc4(0x294)]!==0x0)fs[_0x2e1bc4(0x2fb)](configbackuppath+('starting-balance-'+botID+_0x2e1bc4(0x20f)),JSON[_0x2e1bc4(0x28c)](_0x9b174a,null,0x4),function(_0x3d97cc){if(_0x3d97cc){}});const _0x2c0914=(_0x405b94,_0x49e355)=>{const _0x3861a5=_0x2e1bc4;let _0x178f12=[];_0x49e355['forEach'](_0x256475=>{const _0x56c0f5=_0x5bf1,_0x449f33=_0x405b94[_0x56c0f5(0x2a0)](_0x530eea=>_0x530eea[_0x56c0f5(0x223)]==_0x256475[_0x56c0f5(0x223)]);if(!_0x449f33)_0x178f12['push'](_0x256475);});let _0x237d2c=[];return _0x405b94[_0x3861a5(0x275)](_0x2d219f=>{const _0x3c4a4a=_0x3861a5,_0x343183=_0x49e355[_0x3c4a4a(0x2a0)](_0x2de8a7=>_0x2de8a7['coin']==_0x2d219f[_0x3c4a4a(0x223)]);if(!_0x343183||_0x343183['number']==0x0&&_0x2d219f['number']!=0x0)_0x237d2c[_0x3c4a4a(0x335)](_0x2d219f);}),{'missingDay1':_0x178f12,'notInDay2':_0x237d2c};},_0x31190d=dbPerformance[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x262))[_0x2e1bc4(0x291)]()['value']();if(_0x31190d[_0x2e1bc4(0x294)]>0x1){const {missingDay1:_0x229877,notInDay2:_0x298408}=_0x2c0914(_0x9b174a,_0x31190d[0x1][_0x2e1bc4(0x2f0)]);_0x9b174a=[..._0x9b174a,..._0x229877],_0x298408[_0x2e1bc4(0x275)](_0xee4dbc=>{const _0x373d81=_0x2e1bc4;let _0x5e6d89=_0x9b174a['findIndex'](_0x59771c=>_0x59771c['coin']==_0xee4dbc[_0x373d81(0x223)]);_0x5e6d89!=-0x1&&_0x9b174a[_0x373d81(0x315)](_0x5e6d89,0x1);});}_0x9b174a['sort']((_0x49cb8b,_0x4d6b3e)=>_0x49cb8b[_0x2e1bc4(0x223)]>_0x4d6b3e[_0x2e1bc4(0x223)]?0x1:_0x4d6b3e['coin']>_0x49cb8b[_0x2e1bc4(0x223)]?-0x1:0x0);let _0x1c7a55=[{'date':_0x5604d6[_0x2e1bc4(0x2ca)],'changes':_0x9b174a}];_0x31190d[_0x2e1bc4(0x294)]>0x2&&_0x31190d[_0x2e1bc4(0x275)]((_0x36833f,_0x4a197f)=>{const _0x1a53ce=_0x2e1bc4;if(_0x4a197f>0x0&&_0x4a197f<_0x31190d['length']-0x1){const {missingDay1:_0x597a2b,notInDay2:_0x46cd28}=_0x2c0914(_0x31190d[_0x4a197f][_0x1a53ce(0x2f0)],_0x31190d[_0x4a197f+0x1][_0x1a53ce(0x2f0)]);_0x9b174a=[],(_0x597a2b[_0x1a53ce(0x294)]!=0x0||_0x46cd28[_0x1a53ce(0x294)]!=0x0)&&(_0x597a2b['length']!=0x0&&_0x9b174a['push'](..._0x597a2b),_0x46cd28[_0x1a53ce(0x294)]!=0x0&&(_0x46cd28[_0x1a53ce(0x275)](_0x8a356e=>{const _0x20deaa=_0x1a53ce;_0x8a356e[_0x20deaa(0x269)]=-_0x8a356e[_0x20deaa(0x269)];}),_0x9b174a['push'](..._0x46cd28)),_0x9b174a['sort']((_0x21d2aa,_0x479e7e)=>_0x21d2aa[_0x1a53ce(0x223)]>_0x479e7e[_0x1a53ce(0x223)]?0x1:_0x479e7e[_0x1a53ce(0x223)]>_0x21d2aa[_0x1a53ce(0x223)]?-0x1:0x0),_0x1c7a55[_0x1a53ce(0x335)]({'date':_0x31190d[_0x4a197f+0x1][_0x1a53ce(0x279)],'changes':_0x9b174a}));}}),dbConfig[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2e7))[_0x2e1bc4(0x2a0)]({'botID':botID})[_0x2e1bc4(0x349)]({..._0x5604d6,'liquidity':_0x1c7a55})['write']();}}if(isOlderVersion(_0x1ed887,_0x2e1bc4(0x240))){let _0x4cc17f=dbConfig[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2e7))[_0x2e1bc4(0x2a0)]({'botID':botID})[_0x2e1bc4(0x202)]();if(_0x4cc17f){const _0x5ff0f4=_0x4cc17f[_0x2e1bc4(0x1f9)],_0x2a08ed=_0x5ff0f4?capitalize(_0x5ff0f4):_0x2e1bc4(0x2b2);dbConfig[_0x2e1bc4(0x1ed)]('bot')['find']({'botID':botID})['assign']({'exchange':_0x2a08ed})[_0x2e1bc4(0x2d0)]();}}let _0xc38db6=dbPerformance[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2dd))[_0x2e1bc4(0x202)]();isOlderVersion(_0xc38db6,_0x2e1bc4(0x2cd))&&setStartDatePerformance();let _0x38b2fc=dbCoinResults[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2dd))['value']();if(isOlderVersion(_0x38b2fc,_0x2e1bc4(0x257))){let _0x6bea3b=dbCoinResults[_0x2e1bc4(0x1ed)](_0x2e1bc4(0x2f0))['value']();if(_0x6bea3b['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x50bd51=_0x456205;dbConfig[_0x50bd51(0x2e8)]('version',serverversion)['write'](),dbPerformance[_0x50bd51(0x2e8)]('version',serverversion)[_0x50bd51(0x2d0)](),dbLogs[_0x50bd51(0x2e8)]('version',serverversion)[_0x50bd51(0x2d0)](),dbCoinResults[_0x50bd51(0x2e8)]('version',serverversion)[_0x50bd51(0x2d0)]();}function getConfiguration(_0x224207){const _0x1660b1=_0x456205;let _0x41e275=dbConfig[_0x1660b1(0x1ed)](_0x1660b1(0x2e7))['find']({'botID':_0x224207})['value']();if(_0x41e275){let _0x5201d6=![];typeof _0x41e275['threshold']=='string'&&(_0x41e275={..._0x41e275,'threshold':Number(_0x41e275[_0x1660b1(0x24a)])},_0x5201d6=!![]),_0x41e275[_0x1660b1(0x1ca)]==undefined&&(_0x41e275={..._0x41e275,'change24h':-0x14},_0x5201d6=!![]),_0x41e275[_0x1660b1(0x2aa)]==undefined&&(_0x41e275={..._0x41e275,'fiat':_0x1660b1(0x31a)},_0x5201d6=!![]),_0x41e275[_0x1660b1(0x325)]==undefined&&(_0x41e275={..._0x41e275,'onepagemode':settings['onepagemode']},_0x5201d6=!![]),_0x41e275[_0x1660b1(0x29d)]==undefined&&(_0x41e275={..._0x41e275,'colorscheme':_0x1660b1(0x337)},_0x5201d6=!![]),_0x41e275[_0x1660b1(0x1c5)]==undefined&&(_0x41e275={..._0x41e275,'autoliquidity':!![]},_0x5201d6=!![]),_0x5201d6&&(_0x41e275={'botID':_0x41e275[_0x1660b1(0x203)],'exchange':_0x41e275['exchange'],'apiKey':_0x41e275[_0x1660b1(0x338)],'apiSecret':_0x41e275['apiSecret'],'apiPassword':_0x41e275[_0x1660b1(0x301)],'basecoin':_0x41e275['basecoin'],'botname':_0x41e275[_0x1660b1(0x277)],'showname':_0x41e275[_0x1660b1(0x329)],'threshold':_0x41e275[_0x1660b1(0x24a)],'ordertype':_0x41e275[_0x1660b1(0x263)],'timeout':_0x41e275[_0x1660b1(0x2fa)],'fiat':_0x41e275['fiat'],'startdate':_0x41e275[_0x1660b1(0x2ca)],'recreate':_0x41e275['recreate'],'timeshift':_0x41e275[_0x1660b1(0x2f2)],'onepagemode':_0x41e275[_0x1660b1(0x325)],'headless':_0x41e275[_0x1660b1(0x305)],'cooldown':_0x41e275[_0x1660b1(0x33b)],'change24h':_0x41e275[_0x1660b1(0x1ca)],'emojibuy':_0x41e275[_0x1660b1(0x1d8)],'emojisell':_0x41e275[_0x1660b1(0x1fb)],'colorscheme':_0x41e275[_0x1660b1(0x29d)],'portfolio':_0x41e275['portfolio'],'autoliquidity':_0x41e275['autoliquidity'],'liquidity':_0x41e275[_0x1660b1(0x2cf)],'openOrders':_0x41e275[_0x1660b1(0x2b1)]},dbConfig[_0x1660b1(0x1ed)](_0x1660b1(0x2e7))['remove']()[_0x1660b1(0x2d0)](),dbConfig[_0x1660b1(0x1ed)](_0x1660b1(0x2e7))[_0x1660b1(0x335)](_0x41e275)[_0x1660b1(0x2d0)]());}else _0x41e275={'botID':_0x224207,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1660b1(0x230)+_0x224207,'showname':![],'threshold':0x3,'ordertype':_0x1660b1(0x2de),'timeout':0x14,'fiat':_0x1660b1(0x31a),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1660b1(0x2f2)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1660b1(0x337),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x41e275;}function emittedConfiguration(){const _0x344bb0=_0x456205;let _0x1b9439;if(config['apiKey']=='')_0x1b9439={...config,'configstate':_0x344bb0(0x1cf)};else config[_0x344bb0(0x338)]==_0x344bb0(0x278)?_0x1b9439={...config,'configstate':_0x344bb0(0x1f8)}:(_0x1b9439={...config,'apiKey':_0x344bb0(0x317),'apiSecret':_0x344bb0(0x317)},config[_0x344bb0(0x301)]&&(_0x1b9439[_0x344bb0(0x301)]=_0x344bb0(0x317)));return _0x1b9439;}function getSettings(){const _0x293028=_0x456205;return dbSettings['get'](_0x293028(0x331))[_0x293028(0x202)]();}function getSecure(){const _0x5ee14d=_0x456205;return dbSecure['get'](_0x5ee14d(0x208))[_0x5ee14d(0x202)]()||{};}function updateTimeshift(_0x6be9f0){const _0x3f9b9c=_0x456205;let _0x23f7b1=dbConfig[_0x3f9b9c(0x1ed)](_0x3f9b9c(0x2e7))[_0x3f9b9c(0x2a0)]({'botID':botID})[_0x3f9b9c(0x202)]();_0x23f7b1&&dbConfig[_0x3f9b9c(0x1ed)](_0x3f9b9c(0x2e7))[_0x3f9b9c(0x2a0)]({'botID':botID})[_0x3f9b9c(0x349)]({'timeshift':_0x6be9f0})[_0x3f9b9c(0x2d0)](),config[_0x3f9b9c(0x2f2)]=_0x6be9f0,proxyEmit(_0x3f9b9c(0x2e2),emittedConfiguration());}function updateOnepagemode(_0x2306e2){const _0x4f6813=_0x456205;let _0x44c8c4=dbConfig['get'](_0x4f6813(0x2e7))[_0x4f6813(0x2a0)]({'botID':botID})[_0x4f6813(0x202)]();_0x44c8c4&&dbConfig[_0x4f6813(0x1ed)](_0x4f6813(0x2e7))['find']({'botID':botID})[_0x4f6813(0x349)]({'onepagemode':_0x2306e2})[_0x4f6813(0x2d0)](),config[_0x4f6813(0x325)]=_0x2306e2,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x13efc3){const _0x36dd24=_0x456205;logger[_0x36dd24(0x298)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x36dd24(0x298)](_0x36dd24(0x2ec));let _0x359970=![],_0x1a5b09=![],_0x4d7822=[];_0x13efc3[_0x36dd24(0x316)][_0x36dd24(0x275)](_0xbdba0b=>{const _0x3d65b1=_0x36dd24;if(!_0xbdba0b[_0x3d65b1(0x1ff)]&&_0xbdba0b['coin']!=_0x13efc3[_0x3d65b1(0x1f4)])_0x4d7822[_0x3d65b1(0x335)](_0xbdba0b[_0x3d65b1(0x2b0)]);}),_0x4d7822[_0x36dd24(0x275)](_0x55ecf4=>{const _0x1ab7e6=_0x36dd24,_0x58ae40=currentCoins[_0x1ab7e6(0x2a0)](_0x5198d1=>_0x5198d1[_0x1ab7e6(0x2b0)]==_0x55ecf4);!_0x58ae40&&(_0x359970=!![]);}),currentCoins[_0x36dd24(0x275)](_0x1131bc=>{const _0x4e47af=_0x36dd24;if(_0x1131bc[_0x4e47af(0x223)]!=config[_0x4e47af(0x1f4)]){const _0x2bd8f3=_0x4d7822['find'](_0x1cb54d=>_0x1cb54d==_0x1131bc[_0x4e47af(0x2b0)]);!_0x2bd8f3&&(_0x359970=!![]);}}),_0x13efc3['portfolio'][_0x36dd24(0x275)](_0x4a3ffa=>{const _0x518d15=_0x36dd24,_0x2146d9=config[_0x518d15(0x316)]['find'](_0x513a46=>_0x513a46[_0x518d15(0x223)]==_0x4a3ffa[_0x518d15(0x223)]);if(_0x2146d9&&_0x4a3ffa['offset']!=_0x2146d9['offset'])_0x1a5b09=!![];});let _0x256081=dbConfig['get'](_0x36dd24(0x2e7))[_0x36dd24(0x2a0)]({'botID':botID})[_0x36dd24(0x202)]();_0x13efc3={..._0x13efc3,'apiKey':crypt['decrypt'](secure[_0x36dd24(0x205)],_0x13efc3['apiKey'])['message'],'apiSecret':crypt[_0x36dd24(0x287)](secure['privateKey'],_0x13efc3[_0x36dd24(0x326)])[_0x36dd24(0x26f)]};_0x13efc3[_0x36dd24(0x301)]&&(_0x13efc3[_0x36dd24(0x301)]=crypt['decrypt'](secure[_0x36dd24(0x205)],_0x13efc3[_0x36dd24(0x301)])[_0x36dd24(0x26f)]);let _0x1ee3a8=![];if(_0x256081){_0x13efc3[_0x36dd24(0x338)]=='************'?_0x13efc3[_0x36dd24(0x338)]=config[_0x36dd24(0x338)]:_0x1ee3a8=!![];_0x13efc3['apiSecret']=='************'?_0x13efc3[_0x36dd24(0x326)]=config[_0x36dd24(0x326)]:_0x1ee3a8=!![];if(_0x13efc3[_0x36dd24(0x301)]=='************')_0x13efc3['apiPassword']=config[_0x36dd24(0x301)];else{if(_0x13efc3['apiPassword'])_0x1ee3a8=!![];}dbConfig[_0x36dd24(0x1ed)](_0x36dd24(0x2e7))[_0x36dd24(0x2a0)]({'botID':botID})[_0x36dd24(0x349)](_0x13efc3)[_0x36dd24(0x2d0)]();}else dbConfig[_0x36dd24(0x1ed)](_0x36dd24(0x2e7))['push'](_0x13efc3)[_0x36dd24(0x2d0)](),_0x1ee3a8=!![],process['send']({'status':_0x36dd24(0x239),'live':_0x36dd24(0x260)},_0x1d9921=>{});process['send']({'botname':_0x13efc3['botname']},_0x5d47aa=>{}),config={..._0x13efc3},updateBotManager(),proxyEmit(_0x36dd24(0x2c6)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1ee3a8)await reset(!![]);else _0x359970||_0x1a5b09?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x36dd24(0x298)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x2ff5bf){const _0x58170e=_0x456205,_0x2efd91={...config,'headless':_0x2ff5bf[_0x58170e(0x305)]};let _0x3404a4=dbConfig[_0x58170e(0x1ed)](_0x58170e(0x2e7))['find']({'botID':botID})['value']();_0x3404a4&&dbConfig[_0x58170e(0x1ed)](_0x58170e(0x2e7))[_0x58170e(0x2a0)]({'botID':botID})[_0x58170e(0x349)](_0x2efd91)['write'](),config={..._0x2efd91},updateBotManager(),proxyEmit(_0x58170e(0x2e2),emittedConfiguration());}async function storeFiat(_0x33e279){const _0x246289=_0x456205,_0x5751b8={...config,'fiat':_0x33e279};let _0x54c226=dbConfig[_0x246289(0x1ed)]('bot')[_0x246289(0x2a0)]({'botID':botID})[_0x246289(0x202)]();_0x54c226&&dbConfig[_0x246289(0x1ed)](_0x246289(0x2e7))[_0x246289(0x2a0)]({'botID':botID})[_0x246289(0x349)](_0x5751b8)['write'](),config={..._0x5751b8},proxyEmit(_0x246289(0x2e2),emittedConfiguration());}function resetHistory(){const _0x56e3de=_0x456205;logger[_0x56e3de(0x32b)](_0x56e3de(0x344));try{if(fs[_0x56e3de(0x26b)](path[_0x56e3de(0x2a3)](configpath,_0x56e3de(0x1f6)+botID+_0x56e3de(0x33f))))fs[_0x56e3de(0x353)](path[_0x56e3de(0x2a3)](configpath,_0x56e3de(0x1f6)+botID+_0x56e3de(0x33f)));if(fs['existsSync'](path[_0x56e3de(0x2a3)](configpath,_0x56e3de(0x1f6)+botID+_0x56e3de(0x2f8))))fs[_0x56e3de(0x353)](path[_0x56e3de(0x2a3)](configpath,_0x56e3de(0x1f6)+botID+_0x56e3de(0x2f8)));if(fs['existsSync'](path['join'](configpath,_0x56e3de(0x1f6)+botID+_0x56e3de(0x34a))))fs[_0x56e3de(0x353)](path['join'](configpath,'bot-'+botID+_0x56e3de(0x34a)));}catch(_0x3eb9b1){if(_0x3eb9b1)logger['full'](_0x56e3de(0x284),_0x3eb9b1);}const _0x1f8961=getDate();let _0x4aa28d=[];currentCoins['forEach'](_0x43fb8c=>{const _0x54b5c5=_0x56e3de;_0x4aa28d[_0x54b5c5(0x335)]({'coin':_0x43fb8c[_0x54b5c5(0x223)],'number':_0x43fb8c[_0x54b5c5(0x269)],'price':_0x43fb8c[_0x54b5c5(0x1f5)]});});let _0x24c1ac=dbConfig[_0x56e3de(0x1ed)](_0x56e3de(0x2e7))['find']({'botID':botID})['value']();_0x24c1ac&&(dbConfig[_0x56e3de(0x1ed)](_0x56e3de(0x2e7))[_0x56e3de(0x2a0)]({'botID':botID})['assign']({'liquidity':[{'date':_0x1f8961,'changes':_0x4aa28d}]})[_0x56e3de(0x2d0)](),config[_0x56e3de(0x2cf)]=[]),process[_0x56e3de(0x2c1)]({'stop':_0x56e3de(0x215)},_0x2a6805=>{});}function noslash(_0xae17eb){const _0x3fa168=_0x456205;return _0xae17eb[_0x3fa168(0x2fe)]('/','');}function updateHighestFee(_0x4a97b1){const _0x44a881=_0x456205;if(_0x4a97b1[_0x44a881(0x1fd)]){let _0x5dc2ae={'filled':_0x4a97b1[_0x44a881(0x226)]*_0x4a97b1[_0x44a881(0x1e7)],'amount':_0x4a97b1['filled']*_0x4a97b1['price'],'side':_0x4a97b1[_0x44a881(0x2d8)]==_0x44a881(0x23a)?_0x44a881(0x350):'sell','price':0x1/_0x4a97b1[_0x44a881(0x1e7)]};_0x4a97b1={..._0x4a97b1,..._0x5dc2ae};}const _0x3603ba=defaultFee*_0x4a97b1[_0x44a881(0x226)]*_0x4a97b1['price'];lastFees['recent20'][_0x44a881(0x294)]===0x14&&lastFees[_0x44a881(0x330)][_0x44a881(0x25c)](),lastFees[_0x44a881(0x330)][_0x44a881(0x335)](_0x3603ba),lastFees['highest']=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x557e05){const _0x5a8aa8=_0x456205;logger['debug'](_0x5a8aa8(0x31b)+_0x557e05[_0x5a8aa8(0x2b0)]+'\x20|\x20'+_0x557e05[_0x5a8aa8(0x355)]+_0x5a8aa8(0x2cb)+_0x557e05[_0x5a8aa8(0x226)]+_0x5a8aa8(0x2b9)+_0x557e05[_0x5a8aa8(0x300)]+'\x20|\x20'+_0x557e05['id']);let _0x1c919f=_0x557e05[_0x5a8aa8(0x355)],_0x5ca792=![];currentCoins[_0x5a8aa8(0x275)](_0x2f9758=>{const _0x527cd3=_0x5a8aa8;_0x2f9758[_0x527cd3(0x2b0)]==_0x557e05['symbol']&&(_0x5ca792=!![]);});if(!_0x5ca792)return;const _0x34950d=currentCoins[_0x5a8aa8(0x2a0)](_0x2f365a=>_0x2f365a[_0x5a8aa8(0x2b0)]==_0x557e05['symbol']),_0xbf6bec=_0xad7334=>{if(_0x34950d)_0x34950d['orderstatus']=_0xad7334;};if(_0x1c919f==_0x5a8aa8(0x321))_0xbf6bec(_0x5a8aa8(0x321));else{if(_0x1c919f==_0x5a8aa8(0x30a)){_0xbf6bec(_0x5a8aa8(0x30a));const _0x2c9cb5=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2c9cb5,await getOpenOrders(),handleOpenOrders();}else{if(_0x1c919f==_0x5a8aa8(0x2af)){let _0x4080ed=![];if(lastOrders)for(const _0x992df4 of lastOrders){const _0x5bb115=0xc8,_0x476627=0x1388;let _0x401770=0x0;while(!_0x992df4['orderId']&&_0x401770*_0x5bb115<_0x476627){_0x401770++,await sleep(_0x5bb115);}if(_0x401770>0x0)logger[_0x5a8aa8(0x298)]('Waited\x20'+_0x401770*_0x5bb115/0x3e8+_0x5a8aa8(0x237));if(_0x992df4[_0x5a8aa8(0x2db)]==_0x557e05['id']){logger['debug'](_0x5a8aa8(0x1e2)+_0x557e05['id']),_0x4080ed=!![];if(_0x992df4[_0x5a8aa8(0x226)]==0x0){logger[_0x5a8aa8(0x298)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x557e05['id']);if(_0x557e05['average'])_0x992df4[_0x5a8aa8(0x1e7)]=_0x557e05[_0x5a8aa8(0x1c7)];else{if(_0x557e05[_0x5a8aa8(0x1e7)])_0x992df4[_0x5a8aa8(0x1e7)]=_0x557e05['price'];else{}}_0x992df4[_0x5a8aa8(0x226)]=_0x557e05[_0x5a8aa8(0x226)],updateHighestFee(_0x992df4),_0xbf6bec(_0x5a8aa8(0x226)),await validateOrders();if(lockOrders==ORDERS[_0x5a8aa8(0x1bc)]){const _0x4c73cb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4c73cb;}_0x992df4[_0x5a8aa8(0x1ec)]={'currency':_0x557e05[_0x5a8aa8(0x1ec)]?_0x557e05['fee']['currency']:null,'cost':_0x557e05[_0x5a8aa8(0x1ec)]?_0x557e05[_0x5a8aa8(0x1ec)][_0x5a8aa8(0x28b)]:0x0},await updateCoinResults(_0x992df4);}}}if(!_0x4080ed){logger['debug'](_0x5a8aa8(0x231)+_0x557e05['id']),_0xbf6bec(_0x5a8aa8(0x226));const _0x23bbd6=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x23bbd6,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x32b88e=JSON['parse'](lastBalances[_0x5a8aa8(0x316)]);const _0x43cce9=_0x32b88e[_0x5a8aa8(0x2a0)](_0x43c6ae=>_0x43c6ae['symbol']==_0x557e05['symbol']);if(_0x43cce9){if(_0x1c919f==_0x5a8aa8(0x321))_0x43cce9[_0x5a8aa8(0x1e1)]=_0x43cce9[_0x5a8aa8(0x1e1)]==_0x5a8aa8(0x226)?_0x5a8aa8(0x226):'open';else{if(_0x1c919f=='canceled')_0x43cce9[_0x5a8aa8(0x1e1)]=_0x43cce9['orderstatus']=='filled'?_0x5a8aa8(0x226):_0x5a8aa8(0x30a);else _0x1c919f==_0x5a8aa8(0x2af)&&(_0x43cce9[_0x5a8aa8(0x1e1)]=_0x5a8aa8(0x226));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5a8aa8(0x28c)](_0x32b88e)},proxyEmit(_0x5a8aa8(0x273),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x72e8a0=_0x456205;await getOpenOrders();let _0x3b0953=![];currentCoins[_0x72e8a0(0x275)](_0x1f16d7=>{const _0x1b73ab=_0x72e8a0;_0x3b0953=allOpenOrders[_0x1b73ab(0x2a0)](_0x3be629=>_0x3be629[_0x1b73ab(0x2b0)]==_0x1f16d7['symbol']),_0x1f16d7[_0x1b73ab(0x1e1)]=_0x3b0953?_0x1b73ab(0x321):_0x1b73ab(0x229);});}async function getCoins(_0xbf1831=0x0,_0x44f97d=!![],_0x3c0723=config[_0x456205(0x1f4)]){const _0x1e8c58=_0x456205;let _0x38de1e,_0x30981f=[],_0xfa22dc=[],_0x5d6913=[];if(_0xbf1831)await sleep(_0xbf1831);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x38de1e=await exchange[_0x1e8c58(0x211)](),mybalances=_0x38de1e[_0x1e8c58(0x1e8)];for(const [_0x370c01,_0x1c17bf]of Object[_0x1e8c58(0x1c8)](mybalances)){_0x5d6913[_0x1e8c58(0x335)](_0x370c01);}config[_0x1e8c58(0x316)]['forEach'](_0x21ae22=>{const _0x2acb90=_0x1e8c58;!_0x5d6913[_0x2acb90(0x207)](_0x21ae22[_0x2acb90(0x223)])&&(mybalances[_0x21ae22[_0x2acb90(0x223)]]=0x0);});if(_0x3c0723=='')for(const [_0x597101,_0x5ecd16]of Object[_0x1e8c58(0x1c8)](mybalances)){_0x5ecd16!=0x0&&_0x30981f['push']({'coin':_0x597101});}else{let _0x35ed66=![];for(const [_0x1a581c,_0x4191f9]of Object['entries'](mybalances)){const _0x1d2056=config['portfolio'][_0x1e8c58(0x2a0)](_0xc15d35=>_0xc15d35['coin']==_0x1a581c),_0x36d947=_0x1a581c+'/'+_0x3c0723,_0x2e8c8d=_0x3c0723+'/'+_0x1a581c,_0x17847d=currentCoins[_0x1e8c58(0x2a0)](_0x2abdca=>_0x2abdca['coin']==_0x1a581c);_0x35ed66=![];if((_0x4191f9!=0x0||_0x1d2056)&&(allSymbols['includes'](_0x36d947)||_0x1a581c==_0x3c0723))_0x30981f['push']({'coin':_0x1a581c,'symbol':_0x36d947,'reverse':![],'number':Math[_0x1e8c58(0x22a)](_0x4191f9+(_0x1d2056&&_0x1d2056[_0x1e8c58(0x313)]||0x0),0x0),'orderstatus':_0x17847d?_0x17847d[_0x1e8c58(0x1e1)]:_0x1e8c58(0x229)});else{if((_0x4191f9!=0x0||_0x1d2056)&&allSymbols[_0x1e8c58(0x207)](_0x2e8c8d))_0x30981f[_0x1e8c58(0x335)]({'coin':_0x1a581c,'symbol':_0x2e8c8d,'reverse':!![],'number':Math[_0x1e8c58(0x22a)](_0x4191f9+(_0x1d2056&&_0x1d2056['offset']||0x0),0x0),'orderstatus':_0x17847d?_0x17847d['orderstatus']:'none'});else _0x1d2056&&_0x30981f[_0x1e8c58(0x335)]({'coin':_0x1d2056[_0x1e8c58(0x223)],'symbol':_0x1d2056[_0x1e8c58(0x2b0)],'reverse':_0x1d2056[_0x1e8c58(0x1fd)],'number':0x0,'orderstatus':_0x1e8c58(0x229)});}}}}catch(_0x14ce43){if(!_0x44f97d)handleErrorNoStop(_0x14ce43,_0x1e8c58(0x2ac));else await handleError(_0x14ce43,_0x1e8c58(0x2ac));}return _0xfa22dc=cloneDeep(_0x30981f),_0x30981f=_0x30981f[_0x1e8c58(0x1db)](_0x6edb81=>{const _0x572d68=_0x1e8c58,_0x35f110=config[_0x572d68(0x316)][_0x572d68(0x2a0)](_0x156145=>_0x156145[_0x572d68(0x223)]==_0x6edb81[_0x572d68(0x223)]);return _0x35f110&&!_0x35f110[_0x572d68(0x1ff)];}),[_0x30981f,_0xfa22dc];}async function getCoinNumber(_0x9ac6cc){const _0x392a7b=_0x456205;let _0x15b728;try{const _0x5b023d=await exchange['fetchBalance']();_0x15b728=_0x5b023d[_0x392a7b(0x1e8)][_0x9ac6cc];}catch(_0x3fd578){await handleError(_0x3fd578,'getCoinNumber()');}return _0x15b728;}async function getOpenOrders(){const _0x4b370f=_0x456205;let _0xa8a1b1;allOpenOrders=[];try{for(const _0x5af2b6 of config[_0x4b370f(0x316)]){!_0x5af2b6['excluded']&&_0x5af2b6[_0x4b370f(0x223)]!=config[_0x4b370f(0x1f4)]&&(_0xa8a1b1=await exchange['fetchOpenOrders'](_0x5af2b6['symbol']),_0xa8a1b1[_0x4b370f(0x294)]>0x0&&allOpenOrders[_0x4b370f(0x335)](_0xa8a1b1[0x0]));}}catch(_0x433a95){await handleError(_0x433a95,_0x4b370f(0x27c));}}async function handleOpenOrders(_0x12f78b=0x0){const _0x46fe7f=_0x456205;allOpenOrders[_0x46fe7f(0x294)]==0x0&&lockOrders==ORDERS[_0x46fe7f(0x1bc)]&&allOrdersPlaced&&(_0x12f78b==0x0?(logger['debug'](_0x46fe7f(0x24f)),_0x12f78b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x46fe7f(0x298)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x46fe7f(0x264))));}async function testAPI(_0x598224){const _0x5b5862=_0x456205,_0x129dc6=ccxt['pro'][_0x598224[_0x5b5862(0x1f9)][_0x5b5862(0x266)]()],_0x4dc0b1=new _0x129dc6({'apiKey':_0x598224[_0x5b5862(0x338)],'secret':_0x598224['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x598224[_0x5b5862(0x301)])_0x4dc0b1[_0x5b5862(0x26a)]=_0x598224[_0x5b5862(0x301)];try{await _0x4dc0b1[_0x5b5862(0x21d)]();}catch(_0x352610){throw _0x352610;}}function cloneDeep(_0x2f5103){const _0x30a79b=_0x456205;return JSON['parse'](JSON[_0x30a79b(0x28c)](_0x2f5103));}async function getPortfolio(_0x251708){const _0x4139f4=_0x456205;let _0x52920e=[],_0x5856b1=[],_0x57493a=[],_0x42785c;if(_0x251708[_0x4139f4(0x338)]!=='************'||_0x251708[_0x4139f4(0x326)]!==_0x4139f4(0x317)||_0x251708['apiPassword']&&_0x251708[_0x4139f4(0x301)]!==_0x4139f4(0x317)){if(config[_0x4139f4(0x1f9)]){if(_0x251708[_0x4139f4(0x338)]==_0x4139f4(0x317))_0x251708[_0x4139f4(0x338)]=config['apiKey'];if(_0x251708['apiSecret']==_0x4139f4(0x317))_0x251708[_0x4139f4(0x326)]=config[_0x4139f4(0x326)];if(_0x251708[_0x4139f4(0x301)]==_0x4139f4(0x317))_0x251708['apiPassword']=config[_0x4139f4(0x301)];try{await testAPI(_0x251708);}catch(_0x242286){if(_0x242286[_0x4139f4(0x245)]()[_0x4139f4(0x207)](_0x4139f4(0x23e))){logger['debug']('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x4139f4(0x316),![]);return;}else{handleError(_0x242286,_0x4139f4(0x276));return;}}}await initExchange(_0x251708[_0x4139f4(0x1f9)],_0x251708['apiKey'],_0x251708[_0x4139f4(0x326)],_0x251708[_0x4139f4(0x301)]);try{await loadSymbols();}catch(_0xb1c481){if(_0xb1c481[_0x4139f4(0x245)]()['includes'](_0x4139f4(0x23e))){proxyEmit(_0x4139f4(0x316),![]);return;}else{handleError(_0xb1c481,_0x4139f4(0x255));return;}}const _0x52293b=await getCoins(0x0,![],_0x251708['basecoin']);_0x57493a=cloneDeep(_0x52293b[0x1]);}else{const _0x4a9fea=await getCoins();_0x57493a=cloneDeep(_0x4a9fea[0x1]);}if(_0x251708[_0x4139f4(0x1f4)]=='')proxyEmit(_0x4139f4(0x316),_0x57493a);else{_0x57493a['forEach'](_0x1b13a3=>{const _0x3dbd63=_0x4139f4;if(_0x1b13a3[_0x3dbd63(0x223)]!=_0x251708[_0x3dbd63(0x1f4)]&&allSymbols[_0x3dbd63(0x207)](_0x1b13a3[_0x3dbd63(0x2b0)]))_0x52920e[_0x3dbd63(0x335)](_0x1b13a3[_0x3dbd63(0x2b0)]);});if(_0x52920e['length']==0x0)logHistory('error',_0x4139f4(0x33a));else{try{_0x5856b1=await getTickers(_0x52920e);}catch(_0x3a7e45){if(_0x3a7e45[_0x4139f4(0x245)]()[_0x4139f4(0x207)](_0x4139f4(0x23e))){proxyEmit(_0x4139f4(0x316),![]);return;}else handleError(_0x3a7e45,_0x4139f4(0x310));}_0x57493a[_0x4139f4(0x275)](_0x228e60=>{const _0x4a545b=_0x4139f4;_0x228e60[_0x4a545b(0x223)]!=_0x251708[_0x4a545b(0x1f4)]?_0x5856b1[_0x228e60[_0x4a545b(0x2b0)]]?_0x42785c=_0x228e60['reverse']?0x1/_0x5856b1[_0x228e60['symbol']]['last']:_0x5856b1[_0x228e60['symbol']][_0x4a545b(0x1f5)]:_0x42785c=0x0:_0x42785c=0x1,_0x228e60['price']=formatResult(_0x42785c,0x8);}),proxyEmit(_0x4139f4(0x316),_0x57493a);}}}function truncateTradeAmount(_0xdba082,_0x11a882){const _0x410900=_0x456205;let _0x54582e=0x0;try{_0x54582e=exchange[_0x410900(0x213)](_0xdba082,_0x11a882);}catch(_0x58c276){}return _0x54582e;}function checkMinimums(_0x20dac6){const _0x1d41fd=_0x456205;let _0x1fce05=!![];const _0x4a6ead=!_0x20dac6[_0x1d41fd(0x1fd)]?markets[_0x20dac6['symbol']][_0x1d41fd(0x34c)][_0x1d41fd(0x300)][_0x1d41fd(0x29a)]:markets[_0x20dac6[_0x1d41fd(0x2b0)]]['limits']['cost'][_0x1d41fd(0x29a)],_0x1393dd=!_0x20dac6['reverse']?markets[_0x20dac6[_0x1d41fd(0x2b0)]][_0x1d41fd(0x34c)]['cost']['min']:markets[_0x20dac6[_0x1d41fd(0x2b0)]][_0x1d41fd(0x34c)]['amount'][_0x1d41fd(0x29a)],_0x570989=truncateTradeAmount(_0x20dac6['symbol'],_0x20dac6['trade']);_0x20dac6[_0x1d41fd(0x288)]=_0x570989;if(Math[_0x1d41fd(0x32c)](_0x570989)<_0x4a6ead)_0x1fce05=![];if(Math['abs'](_0x570989)*_0x20dac6[_0x1d41fd(0x1f5)]<_0x1393dd)_0x1fce05=![];if(_0x20dac6['side']==_0x1d41fd(0x23a)){let _0x467c33=config[_0x1d41fd(0x316)][_0x1d41fd(0x2a0)](_0x323e53=>_0x323e53[_0x1d41fd(0x223)]==_0x20dac6['coin']);if(_0x467c33[_0x1d41fd(0x313)]>0x0){if(Math[_0x1d41fd(0x32c)](_0x570989)>_0x20dac6['number']-_0x467c33[_0x1d41fd(0x313)])_0x1fce05=![];}else{if(Math[_0x1d41fd(0x32c)](_0x570989)>_0x20dac6['number'])_0x1fce05=![];}}if(_0x20dac6[_0x1d41fd(0x2d8)]=='buy'){let _0x4a8668=config[_0x1d41fd(0x316)][_0x1d41fd(0x2a0)](_0x314a22=>_0x314a22[_0x1d41fd(0x223)]==config[_0x1d41fd(0x1f4)]),_0x3d57b5=currentCoins[_0x1d41fd(0x2a0)](_0xb497b5=>_0xb497b5[_0x1d41fd(0x223)]==config[_0x1d41fd(0x1f4)]);if(_0x4a8668[_0x1d41fd(0x313)]>0x0){if(Math[_0x1d41fd(0x32c)](_0x570989)*_0x20dac6['last']>_0x3d57b5[_0x1d41fd(0x269)]-_0x4a8668[_0x1d41fd(0x313)])_0x1fce05=![];}else{if(Math['abs'](_0x570989)*_0x20dac6[_0x1d41fd(0x1f5)]>_0x3d57b5[_0x1d41fd(0x269)])_0x1fce05=![];}}return _0x1fce05;}async function getBalances(_0x25608a=!![]){const _0x4f35bb=_0x456205;let _0x3cb10b=0x0,_0x4545c0;const _0x11086f=config[_0x4f35bb(0x24a)];if(config['headless']&&config[_0x4f35bb(0x1ca)]<0x0)await validate24hChanges();currentCoins[_0x4f35bb(0x275)](_0x36756a=>{const _0x4d90a0=_0x4f35bb;if(_0x36756a[_0x4d90a0(0x223)]!=config[_0x4d90a0(0x1f4)]){let _0x3a1127=global[_0x4d90a0(0x343)][noslash(_0x36756a[_0x4d90a0(0x2b0)])];_0x4545c0=_0x36756a['reverse']?0x1/_0x3a1127:_0x3a1127;}else _0x4545c0=0x1;let _0x2cfca4=_0x36756a[_0x4d90a0(0x269)]*_0x4545c0;_0x3cb10b+=_0x2cfca4,_0x36756a[_0x4d90a0(0x1f5)]=formatResult(Number(_0x4545c0),0x8),_0x36756a['value']=_0x2cfca4;}),currentCoins[_0x4f35bb(0x275)](_0x48b070=>{const _0x45371e=_0x4f35bb;let _0x36cfd1=config[_0x45371e(0x316)][_0x45371e(0x2a0)](_0x3e9892=>_0x3e9892[_0x45371e(0x223)]==_0x48b070[_0x45371e(0x223)]),_0x4fc72e=Number(_0x36cfd1[_0x45371e(0x1f1)]),_0x1f83ca=_0x48b070[_0x45371e(0x202)]/_0x3cb10b*0x64,_0x1e8dd8=_0x4fc72e*_0x3cb10b/0x64/_0x48b070[_0x45371e(0x1f5)]-_0x48b070['number'];_0x48b070[_0x45371e(0x1f1)]=formatResult(_0x1f83ca,0x3),_0x48b070[_0x45371e(0x347)]=formatResult(_0x4fc72e,0x3),_0x48b070[_0x45371e(0x288)]=formatResult(_0x1e8dd8,0x8),_0x48b070[_0x45371e(0x2d8)]='',_0x48b070[_0x45371e(0x31e)]=![];if(_0x48b070[_0x45371e(0x223)]!=config[_0x45371e(0x1f4)]){if(_0x48b070[_0x45371e(0x1f1)]>_0x4fc72e)_0x48b070[_0x45371e(0x2d8)]='sell',_0x48b070[_0x45371e(0x31e)]=checkMinimums(_0x48b070);else _0x48b070[_0x45371e(0x1f1)]<_0x4fc72e&&(_0x48b070[_0x45371e(0x2d8)]=_0x45371e(0x350),_0x48b070[_0x45371e(0x31e)]=checkMinimums(_0x48b070));}_0x48b070[_0x45371e(0x1d9)]=_0x48b070[_0x45371e(0x1f1)]/_0x48b070[_0x45371e(0x347)]-0x1;if(_0x48b070[_0x45371e(0x1e1)]==_0x45371e(0x226)||_0x48b070[_0x45371e(0x1e1)]=='canceled')_0x48b070['orderstatus']=_0x45371e(0x229);}),currentCoins[_0x4f35bb(0x2a9)]((_0x41d5b1,_0x170899)=>_0x41d5b1[_0x4f35bb(0x1d9)]<_0x170899['delta']?0x1:_0x170899[_0x4f35bb(0x1d9)]<_0x41d5b1[_0x4f35bb(0x1d9)]?-0x1:0x0);const _0x34a5b9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x34a5b9[_0x4f35bb(0x200)],'usd':_0x34a5b9[_0x4f35bb(0x2cc)],'portfolio':JSON[_0x4f35bb(0x28c)](currentCoins),'threshold':_0x11086f},proxyEmit(_0x4f35bb(0x273),{'serverversion':serverversion,'balances':lastBalances});if(_0x25608a){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x11086f});else{if(lockOrders==ORDERS[_0x4f35bb(0x346)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x11086f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x316088=getNormalizedPerformance();getStartingBalances(_0x316088),emitPerformance(_0x316088);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x23869f=getNormalizedPerformance();emitPerformance(_0x23869f),getStartingBalances(_0x23869f),logger[_0x4f35bb(0x298)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x35f2ce=_0x456205;if(!lastBalances)return;let _0x48f0bd=[],_0x3bcba8,_0x5ebbb8=JSON['parse'](lastBalances[_0x35f2ce(0x316)]);_0x5ebbb8['sort']((_0x1413f5,_0x247515)=>_0x1413f5[_0x35f2ce(0x223)]>_0x247515[_0x35f2ce(0x223)]?0x1:_0x247515[_0x35f2ce(0x223)]>_0x1413f5['coin']?-0x1:0x0),_0x5ebbb8[_0x35f2ce(0x275)](_0x4aad9d=>{const _0x363492=_0x35f2ce;let _0x4bce0e={'coin':_0x4aad9d[_0x363492(0x223)],'number':_0x4aad9d[_0x363492(0x269)],'price':_0x4aad9d[_0x363492(0x1f5)]};_0x48f0bd[_0x363492(0x335)](_0x4bce0e);});const _0x33a69e=await getFiat();_0x3bcba8={'date':lastBalances[_0x35f2ce(0x2c2)][_0x35f2ce(0x1f2)]('\x20')[0x0],'eur':_0x33a69e['eur'],'usd':_0x33a69e[_0x35f2ce(0x2cc)],'coins':_0x48f0bd};let _0x4ceea0=dbPerformance[_0x35f2ce(0x1ed)]('data')[_0x35f2ce(0x2a0)]({'date':_0x3bcba8['date']})[_0x35f2ce(0x202)]();_0x4ceea0?_0x3bcba8[_0x35f2ce(0x279)]!=config['startdate']&&dbPerformance[_0x35f2ce(0x1ed)](_0x35f2ce(0x262))['find']({'date':_0x3bcba8[_0x35f2ce(0x279)]})[_0x35f2ce(0x349)](_0x3bcba8)['write']():dbPerformance[_0x35f2ce(0x1ed)](_0x35f2ce(0x262))['push'](_0x3bcba8)[_0x35f2ce(0x2d0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5c0d5b=_0x456205;let _0x38b2fa=[];if(dbPerformance['has'](_0x5c0d5b(0x262))[_0x5c0d5b(0x202)]()){let _0x406f4c=dbPerformance[_0x5c0d5b(0x1ed)]('data')[_0x5c0d5b(0x291)]()[_0x5c0d5b(0x1db)](_0x4db07b=>{const _0x287564=_0x5c0d5b;if(_0x4db07b[_0x287564(0x2f0)][_0x287564(0x294)]==0x0)return![];else return!![];})[_0x5c0d5b(0x233)](_0x5c0d5b(0x279))[_0x5c0d5b(0x202)](),_0x2dbde0=[...config[_0x5c0d5b(0x2cf)]];_0x2dbde0['sort']((_0x422d6a,_0x41b522)=>_0x422d6a['date']>_0x41b522[_0x5c0d5b(0x279)]?-0x1:_0x41b522[_0x5c0d5b(0x279)]>_0x422d6a['date']?0x1:0x0);let _0x1a8c33=0x1,_0x2575a4=[],_0x49f1b4=0x0;_0x406f4c[_0x5c0d5b(0x26e)]()['reverse']()['forEach']((_0x4e5dde,_0x1712ae)=>{const _0x2a11e2=_0x5c0d5b;if(_0x2dbde0[_0x49f1b4]){if(_0x406f4c[_0x406f4c[_0x2a11e2(0x294)]-_0x1712ae]&&_0x2dbde0[_0x49f1b4][_0x2a11e2(0x279)]==_0x406f4c[_0x406f4c[_0x2a11e2(0x294)]-_0x1712ae][_0x2a11e2(0x279)]){if(_0x1712ae<_0x406f4c[_0x2a11e2(0x294)]){let _0x522082=0x0,_0x5cc5b2=0x0;_0x406f4c[_0x406f4c[_0x2a11e2(0x294)]-_0x1712ae][_0x2a11e2(0x2f0)]['forEach'](_0x418d85=>{const _0x2e58ea=_0x2a11e2;_0x5cc5b2+=_0x418d85[_0x2e58ea(0x269)]*_0x418d85[_0x2e58ea(0x1e7)];}),_0x2dbde0[_0x49f1b4][_0x2a11e2(0x2e4)][_0x2a11e2(0x275)](_0x2d0fc5=>{_0x522082+=_0x2d0fc5['number']*_0x2d0fc5['price'];}),_0x1a8c33*=_0x522082/(_0x5cc5b2-_0x522082)+0x1;}_0x49f1b4++;}}let _0x52316f=0x0;_0x4e5dde[_0x2a11e2(0x2f0)][_0x2a11e2(0x275)](_0x26ab54=>{const _0x27e17a=_0x2a11e2;_0x52316f+=_0x26ab54['number']*_0x26ab54[_0x27e17a(0x1e7)];}),_0x2575a4[_0x406f4c[_0x2a11e2(0x294)]-_0x1712ae-0x1]=_0x52316f*(_0x1a8c33-0x1);});let _0x5bcdf6=[];_0x2dbde0=[...config[_0x5c0d5b(0x2cf)]]||[];let _0x2e8d57=0x0;_0x49f1b4=0x0,_0x406f4c[_0x5c0d5b(0x275)]((_0x21d129,_0x3e656f)=>{const _0x2c06e2=_0x5c0d5b;if(_0x2dbde0[_0x49f1b4]){const _0x3c5e8b=fns['parse'](_0x2dbde0[_0x49f1b4][_0x2c06e2(0x279)],_0x2c06e2(0x21f),new Date()),_0x130560=fns[_0x2c06e2(0x268)](_0x21d129['date'],_0x2c06e2(0x21f),new Date());if(fns[_0x2c06e2(0x22d)](_0x3c5e8b,_0x130560)){let _0x1e109d=0x0;_0x2dbde0[_0x49f1b4]['changes'][_0x2c06e2(0x275)](_0x2edbc6=>{const _0x537467=_0x2c06e2;!_0x5bcdf6[_0x2edbc6[_0x537467(0x223)]]?_0x5bcdf6[_0x2edbc6[_0x537467(0x223)]]=_0x2edbc6[_0x537467(0x269)]:(_0x1e109d=_0x5bcdf6[_0x2edbc6['coin']],_0x5bcdf6[_0x2edbc6[_0x537467(0x223)]]+=_0x2edbc6[_0x537467(0x269)]);const _0x20189=_0x21d129['coins'][_0x537467(0x2a0)](_0x4cdd93=>_0x4cdd93[_0x537467(0x223)]==_0x2edbc6[_0x537467(0x223)]);(!_0x20189||_0x20189[_0x537467(0x269)]==0x0)&&(_0x2e8d57+=(-_0x2edbc6['number']-_0x1e109d)*_0x2edbc6['price']);}),_0x49f1b4++;}}_0x21d129[_0x2c06e2(0x2f0)]['forEach']((_0x45430f,_0x1d26dc)=>{const _0x599e03=_0x2c06e2;_0x5bcdf6[_0x45430f['coin']]&&(_0x45430f[_0x599e03(0x1cf)]=_0x5bcdf6[_0x45430f['coin']]);}),_0x38b2fa[_0x2c06e2(0x335)]({'date':_0x21d129[_0x2c06e2(0x279)],'eur':_0x21d129[_0x2c06e2(0x200)],'usd':_0x21d129[_0x2c06e2(0x2cc)],'offset':_0x2575a4[_0x3e656f],'netoffset':_0x2e8d57,'coins':_0x21d129[_0x2c06e2(0x2f0)]});});}return _0x38b2fa;}function emitPerformance(_0x1631b6){const _0x3d9b1c=_0x456205;_0x1631b6[_0x3d9b1c(0x294)]!==0x0?(proxyEmit(_0x3d9b1c(0x2d4),_0x1631b6),lastPerformanceEmitted=getDate()):proxyEmit(_0x3d9b1c(0x2d4),[]);}function getPerf(_0x4400b3,_0x5d5b9a){const _0x4189cf=_0x456205;let _0x39de39=0x0,_0x2a77ef=0x0,_0x35565a=0x0;_0x4400b3[_0x4189cf(0x2f0)][_0x4189cf(0x275)](_0x31775a=>{const _0x960f1c=_0x4189cf;_0x39de39+=_0x31775a[_0x960f1c(0x269)]*_0x31775a[_0x960f1c(0x1e7)];});_0x5d5b9a&&(_0x39de39+=_0x4400b3[_0x4189cf(0x313)]);if(config[_0x4189cf(0x1f4)]===_0x4189cf(0x22f)||config[_0x4189cf(0x1f4)]==='ETH'||config[_0x4189cf(0x1f4)]===_0x4189cf(0x24b))_0x2a77ef=_0x39de39*_0x4400b3['eur'],_0x35565a=_0x39de39*_0x4400b3[_0x4189cf(0x2cc)];else{if(usdBasecoins['includes'](config[_0x4189cf(0x1f4)]))_0x2a77ef=_0x39de39*_0x4400b3[_0x4189cf(0x200)]/_0x4400b3['usd'],_0x35565a=_0x39de39;else config[_0x4189cf(0x1f4)]===_0x4189cf(0x348)&&(_0x2a77ef=_0x39de39,_0x35565a=_0x39de39*_0x4400b3[_0x4189cf(0x2cc)]/_0x4400b3[_0x4189cf(0x200)]);}return[_0x39de39,_0x2a77ef,_0x35565a];}function getKPIs(_0x43308d,_0x60e4db=_0x456205(0x348)){const _0x9f8768=_0x456205,_0x27ca19=config[_0x9f8768(0x1f4)],_0x49a96f=lastBalances,_0x404a4d=currentCoins,_0x581f8a=getNormalizedPerformance(),_0x23deea=_0x43308d==='basecoin'?_0x27ca19:_0x43308d===_0x9f8768(0x2aa)||_0x43308d===_0x9f8768(0x23d)?_0x60e4db:'Net\x20'+_0x27ca19,_0x40c9d6=_0x43308d===_0x9f8768(0x1bd)?_0x9f8768(0x30d):_0x43308d===_0x9f8768(0x23d)?_0x9f8768(0x30d):_0x23deea+_0x9f8768(0x248),_0x3d6888=_0x43308d===_0x9f8768(0x1bd)||_0x43308d===_0x9f8768(0x23d)?'Net\x20effect':_0x23deea+'\x20change';let _0x35c9bf=0x0;_0x404a4d[_0x9f8768(0x275)](_0x287605=>{const _0x56280b=_0x9f8768;_0x35c9bf+=_0x287605['number']*_0x287605[_0x56280b(0x1f5)];});if(_0x43308d===_0x9f8768(0x2aa)||_0x43308d===_0x9f8768(0x23d)){if(_0x27ca19===_0x9f8768(0x22f)||_0x27ca19===_0x9f8768(0x2c8)||_0x27ca19==='PAXG')_0x35c9bf=_0x35c9bf*(_0x60e4db===_0x9f8768(0x348)?_0x49a96f[_0x9f8768(0x200)]:_0x49a96f[_0x9f8768(0x2cc)]);else{if(usdBasecoins[_0x9f8768(0x207)](_0x27ca19))_0x35c9bf=_0x35c9bf*(_0x60e4db===_0x9f8768(0x348)?_0x49a96f[_0x9f8768(0x200)]/_0x49a96f[_0x9f8768(0x2cc)]:0x1);else _0x27ca19===_0x9f8768(0x348)&&(_0x35c9bf=_0x35c9bf*(_0x60e4db===_0x9f8768(0x348)?0x1:_0x49a96f['usd']/_0x49a96f[_0x9f8768(0x200)]));}}let _0x462ca8;if(_0x35c9bf!==0x0){if(_0x43308d===_0x9f8768(0x1f4))_0x462ca8=(_0x35c9bf/startingBalances[_0x9f8768(0x1f4)]-0x1)*0x64;else{if(_0x60e4db===_0x9f8768(0x348))_0x462ca8=(_0x35c9bf/startingBalances['eur']-0x1)*0x64;else _0x462ca8=(_0x35c9bf/startingBalances[_0x9f8768(0x2cc)]-0x1)*0x64;}let _0x5279bf=0x0;if(startingBalances[_0x9f8768(0x2f0)])_0x404a4d['forEach'](_0x509510=>{const _0x5aa974=_0x9f8768;let _0x4a84fb=startingBalances[_0x5aa974(0x2f0)]['find'](_0x156fa8=>_0x156fa8['coin']===_0x509510[_0x5aa974(0x223)]);if(_0x4a84fb&&_0x4a84fb[_0x5aa974(0x223)]&&_0x509510[_0x5aa974(0x269)]!==0x0)_0x5279bf+=_0x4a84fb[_0x5aa974(0x269)]*_0x509510[_0x5aa974(0x1f5)];});let _0x169dab=0x0;if(_0x581f8a[_0x9f8768(0x294)]!==0x0){let _0x2049e4=_0x581f8a[_0x581f8a[_0x9f8768(0x294)]-0x1];_0x169dab=_0x2049e4[_0x9f8768(0x246)];}_0x5279bf-=_0x169dab;_0x43308d===_0x9f8768(0x1bd)&&(_0x462ca8=(_0x35c9bf-_0x5279bf)/startingBalances[_0x9f8768(0x1f4)]*0x64,_0x35c9bf=_0x35c9bf-_0x5279bf);if(_0x43308d===_0x9f8768(0x23d)){let _0x281fef=_0x60e4db===_0x9f8768(0x348)?startingBalances['eur']:startingBalances[_0x9f8768(0x2cc)];if(_0x27ca19==='BTC'||_0x27ca19==='ETH'||_0x27ca19===_0x9f8768(0x24b))_0x5279bf=_0x60e4db===_0x9f8768(0x348)?_0x5279bf*_0x49a96f['eur']:_0x5279bf*_0x49a96f[_0x9f8768(0x2cc)];else{if(usdBasecoins[_0x9f8768(0x207)](_0x27ca19))_0x5279bf=_0x60e4db===_0x9f8768(0x348)?_0x5279bf*_0x49a96f[_0x9f8768(0x200)]/_0x49a96f['usd']:_0x5279bf;else _0x27ca19==='EUR'&&(_0x5279bf=_0x60e4db===_0x9f8768(0x348)?_0x5279bf:_0x5279bf*_0x49a96f[_0x9f8768(0x2cc)]/_0x49a96f[_0x9f8768(0x200)]);}_0x462ca8=(_0x35c9bf-_0x5279bf)/_0x281fef*0x64,_0x35c9bf=_0x35c9bf-_0x5279bf;}if(_0x462ca8){if(_0x462ca8<0x64)_0x462ca8=_0x462ca8[_0x9f8768(0x206)](0x2);else{if(_0x462ca8<0x3e8)_0x462ca8=_0x462ca8['toFixed'](0x1);else _0x462ca8=_0x462ca8[_0x9f8768(0x206)](0x0);}}else _0x462ca8=Number('0')[_0x9f8768(0x206)](0x2);if(_0x35c9bf){if(Math[_0x9f8768(0x32c)](_0x35c9bf)<0.000001)_0x35c9bf=_0x35c9bf[_0x9f8768(0x206)](0x2);else{if(Math[_0x9f8768(0x32c)](_0x35c9bf)<0.1)_0x35c9bf=_0x35c9bf[_0x9f8768(0x206)](0x6);else{if(Math['abs'](_0x35c9bf)<0x1)_0x35c9bf=_0x35c9bf[_0x9f8768(0x206)](0x5);else{if(Math[_0x9f8768(0x32c)](_0x35c9bf)<0xa)_0x35c9bf=_0x35c9bf['toFixed'](0x4);else{if(Math[_0x9f8768(0x32c)](_0x35c9bf)<0x64)_0x35c9bf=_0x35c9bf[_0x9f8768(0x206)](0x3);else{if(Math[_0x9f8768(0x32c)](_0x35c9bf)<0x3e8)_0x35c9bf=_0x35c9bf['toFixed'](0x2);else _0x35c9bf=_0x35c9bf['toFixed'](0x2);}}}}}}else _0x35c9bf=Number('0')[_0x9f8768(0x206)](0x2);}else _0x462ca8=Number('0')[_0x9f8768(0x206)](0x2);return{'value':_0x35c9bf,'change':_0x462ca8,'leftTxt':_0x40c9d6,'rightTxt':_0x3d6888};}async function getStartingBalances(_0x212a93,_0x8960cc=!![]){const _0x32440f=_0x456205;if(_0x212a93[_0x32440f(0x294)]!==0x0){const [_0x2bb2cb,_0x489eca,_0x53bc69]=getPerf(_0x212a93[0x0],!![]);let _0x398d15=[];config[_0x32440f(0x316)][_0x32440f(0x275)](_0x13fb2c=>{const _0x243a41=_0x32440f;let _0x3cdbe9=0x0,_0x37a1f2;config[_0x243a41(0x2cf)]['forEach'](_0x46992e=>{const _0x11bea7=_0x243a41;let _0x5e6a23=_0x46992e[_0x11bea7(0x2e4)][_0x11bea7(0x2a0)](_0x6392f4=>_0x6392f4[_0x11bea7(0x223)]==_0x13fb2c['coin']);if(_0x5e6a23){_0x3cdbe9+=_0x5e6a23['number'];if(!_0x37a1f2)_0x37a1f2=_0x5e6a23[_0x11bea7(0x1e7)];}}),_0x398d15[_0x243a41(0x335)]({'coin':_0x13fb2c['coin'],'number':_0x3cdbe9,'initialprice':_0x37a1f2});});const _0x42f252={'basecoin':_0x2bb2cb,'eur':_0x489eca,'usd':_0x53bc69,'coins':_0x398d15};if(_0x8960cc)proxyEmit('starting-balances',_0x42f252);startingBalances=_0x42f252;}}function headlessMode(_0x2b2f78){const _0x2a7775=_0x456205;let _0x597c0f=_0x2b2f78[_0x2a7775(0x316)],_0x999186=_0x2b2f78[_0x2a7775(0x24a)],_0x282e99=[];for(let _0x435b53 of _0x597c0f){if(_0x435b53[_0x2a7775(0x223)]!=config[_0x2a7775(0x1f4)]){if(_0x435b53[_0x2a7775(0x1d9)]>=_0x999186/0x64){if(_0x435b53[_0x2a7775(0x31e)])_0x282e99[_0x2a7775(0x335)](_0x435b53);}else{if(_0x435b53[_0x2a7775(0x1d9)]<=-_0x999186/0x64){if(_0x435b53[_0x2a7775(0x31e)])_0x282e99[_0x2a7775(0x335)](_0x435b53);}}}}_0x282e99['length']>0x0&&(lockOrders==ORDERS[_0x2a7775(0x346)]&&!coolingDown&&_0x282e99[_0x2a7775(0x275)](_0x41bfe3=>{const _0x571b97=_0x2a7775;logger[_0x571b97(0x298)](_0x571b97(0x2c9)+_0x41bfe3[_0x571b97(0x223)]+'\x20'+_0x41bfe3[_0x571b97(0x269)]+'\x20'+_0x41bfe3[_0x571b97(0x1f5)]+'\x20'+_0x41bfe3[_0x571b97(0x1f1)]+'%\x20'+_0x41bfe3[_0x571b97(0x347)]+'%\x20'+(0x64*_0x41bfe3[_0x571b97(0x1d9)])[_0x571b97(0x206)](0x2)+_0x571b97(0x2c5)+_0x999186[_0x571b97(0x206)](0x2)+'%)');}),placeOrder(_0x282e99));}function notifyBalance(_0x1ba7d8){const _0x2b6b46=_0x456205;let _0x51096b=_0x1ba7d8[_0x2b6b46(0x316)],_0x564d6a=_0x1ba7d8['threshold'],_0x153492=[];for(let _0x4b2e09 of _0x51096b){if(_0x4b2e09[_0x2b6b46(0x223)]!=config[_0x2b6b46(0x1f4)]){if(_0x4b2e09[_0x2b6b46(0x1d9)]>=_0x564d6a/0x64){if(_0x4b2e09['valid'])_0x153492['push'](_0x4b2e09);}else{if(_0x4b2e09['delta']<=-_0x564d6a/0x64){if(_0x4b2e09[_0x2b6b46(0x31e)])_0x153492['push'](_0x4b2e09);}}}}if(_0x153492['length']>0x0){let _0x282094=_0x153492[_0x2b6b46(0x1eb)](_0x5c191e=>_0x5c191e['coin']);_0x282094[_0x2b6b46(0x2a9)]();let _0x43d638=_0x282094[_0x2b6b46(0x2a3)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x2b6b46(0x23b));lastCoinsToBalance=_0x43d638;}}function symbolToCoin(_0x4a049a){const _0x3715f1=_0x456205;let _0x2b8b94;if(_0x4a049a[_0x3715f1(0x207)]('/'+config['basecoin']))_0x2b8b94=_0x4a049a[_0x3715f1(0x2fe)]('/'+config[_0x3715f1(0x1f4)],'');if(_0x4a049a[_0x3715f1(0x207)](config['basecoin']+'/'))_0x2b8b94=_0x4a049a[_0x3715f1(0x2fe)](config[_0x3715f1(0x1f4)]+'/','');return _0x2b8b94;}async function unlockOrders(){const _0x240c3f=_0x456205;if(allOrdersPlaced&&lockOrders==ORDERS[_0x240c3f(0x1bc)]){logger[_0x240c3f(0x298)](_0x240c3f(0x22c)),lockOrders=ORDERS[_0x240c3f(0x30f)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x495d19=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x495d19,validateOrdersState=_0x240c3f(0x1cf),persistOpenOrders([]),lockOrders=ORDERS[_0x240c3f(0x346)],logger['debug'](_0x240c3f(0x2f5));}}async function validateOrders(_0x33c7e3){const _0x343748=_0x456205;if(_0x33c7e3)validateOrdersState=_0x33c7e3;logger[_0x343748(0x298)](_0x343748(0x249)+validateOrdersState+_0x343748(0x285)+(lockOrders==0x1?_0x343748(0x20a):lockOrders==0x2?_0x343748(0x1e6):_0x343748(0x1ba)));let _0x59dcda=[],_0x2820f0=config[_0x343748(0x263)]==_0x343748(0x2de)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x343748(0x2fa)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x343748(0x1bc)])return;logger[_0x343748(0x298)](_0x343748(0x204)+validateOrdersState),lastOrders[_0x343748(0x275)](_0x22c9e0=>{const _0x998f96=_0x343748;let _0x4fd15c=![];_0x22c9e0['filled']>0x0&&(_0x4fd15c=!![]),_0x59dcda['push'](_0x4fd15c),_0x4fd15c&&config['ordertype']!='market'&&logHistory(_0x998f96(0x209),_0x998f96(0x21c)+_0x22c9e0[_0x998f96(0x2b0)]+'\x20'+_0x22c9e0[_0x998f96(0x2d8)]+'\x20#'+formatResult(_0x22c9e0[_0x998f96(0x226)],0x8)+'\x20@'+formatResult(_0x22c9e0[_0x998f96(0x1e7)],0x8));}),_0x59dcda[_0x343748(0x275)]((_0x234d9e,_0x2dc74d)=>{const _0x2ca7a5=_0x343748;if(_0x234d9e)lastOrders[_0x2ca7a5(0x315)](_0x2dc74d,0x1);}),persistOpenOrders(lastOrders);const _0x4864e0=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x343748(0x1cf)){validateOrdersState=_0x343748(0x336);if(_0x59dcda['includes'](![])){if(config['ordertype']==_0x343748(0x2de)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x59dcda['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x343748(0x263)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x343748(0x267))_0x59dcda[_0x343748(0x207)](![])&&(config[_0x343748(0x263)]==_0x343748(0x2de)?logHistory(_0x343748(0x261),_0x343748(0x332)+Math['round'](_0x2820f0*validateOrderInterval/0xea60)+_0x343748(0x234)+_0x4864e0):(await cancelOrders(),logHistory(_0x343748(0x261),_0x343748(0x228)+Math[_0x343748(0x225)](_0x2820f0*validateOrderInterval/0xea60)+_0x343748(0x234)+_0x4864e0))),await unlockOrders();else{if(validateOrdersState==_0x343748(0x264)){if(config['ordertype']!='market')logHistory('success',_0x343748(0x212)+_0x4864e0);await unlockOrders();}}}}}async function cancelOrders(){const _0x2b6533=_0x456205;lastOrders[_0x2b6533(0x275)](async _0x13d5ca=>{const _0x1cdf3a=_0x2b6533;try{const _0x3b1b6f=await exchange[_0x1cdf3a(0x2be)](_0x13d5ca[_0x1cdf3a(0x2db)],_0x13d5ca[_0x1cdf3a(0x2b0)]);}catch(_0xaa5345){if(_0xaa5345['toString']()[_0x1cdf3a(0x207)](_0x1cdf3a(0x295))){}else await handleError(_0xaa5345,_0x1cdf3a(0x243));}});}function _0x263b(){const _0x4a5abb=['red_yellow_blue','apiKey','\x20API\x20secret\x20is\x20invalid','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','cooldown','argv','USDC','\x20exchange\x20error','-events.json','RSA-OAEP','Bitget','\x20|\x20highest\x20fee:\x20','ticker','Resetting\x20bot\x20history','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','UNLOCKED','target','EUR','assign','-results.json','\x20|\x20Custom\x20ID:\x20','limits','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','buys','Cryptocom','buy','RequestTimeout','kill','unlinkSync','rightTxt','status','ORDERS.UNLOCKED','loading-canceled','LOCKED','net-basecoin','Avoiding\x20continuous\x20order\x20attempts','MIN_NOTIONAL','pro','/output-000.log','967386QWYpcz','startnumber','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','autoliquidity','coin-loading-progress','average','entries','bb-settings.json','change24h','breakeven','sendPortfolioTelegram','limit-high','getMinutes','initial','progress','uncaughtException','padStart','\x20>\x20','\x20API\x20key\x20is\x20invalid','keys','Error\x20details:','watchOrders()','emojibuy','delta','ExchangeError','filter','./version.json','parseISO','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','311275ZNopkJ','BNB','orderstatus','1\x20-\x20FILLED\x20known\x20order:\x20','path','fees','initTickers()','ORDERS.UNLOCKING','price','total','Pausing\x20for\x20','436520fWZpyt','map','fee','get','Exchange','fetchClosedOrders','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','distribution','split','\x20-\x20pausing\x20bot\x20for\x20','basecoin','last','bot-','defaults','recovery','exchange','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','emojisell','Limit\x20(low-margin)','reverse','sells','excluded','eur','limit','value','botID','2\x20-\x20Validate\x20orders:\x20','privateKey','toFixed','includes','secure','order','ORDERS.LOCKED','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','added','exchange\x20not\x20reloaded','log','.json','highest','fetchBalance','No\x20more\x20open\x20orders\x20-\x20','amountToPrecision','DDoSProtection','restart','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','PermissionDenied',':\x20timer\x20>','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','\x20network\x20error','\x20-\x20bot\x20not\x20started','Order\x20filled:\x20','loadMarkets','mkdirSync','yyyy/MM/dd','-config.json','</pre>','Cooldown\x20ended\x20-\x20balancing\x20resumed','coin','freeze','round','filled','differenceInSeconds','Unfilled\x20order(s)\x20canceled\x20after\x20','none','max','\x20portfolio:</b>\x20\x0a\x0a','1\x20-\x20Unlock\x20orders','isEqual','\x20|\x20exchange:\x20','BTC','Bot\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','sortBy','\x20minutes\x20-\x20','\x20closed\x20the\x20connection','\x20order:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','<pre>','enabled','sell','Manual\x20balancing\x20required','loadSymbols()','net-fiat','AuthenticationError','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2.6.0','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','function','cancelOrders()','Market','toString','netoffset','getDate','\x20value','1\x20-\x20Validate\x20orders:\x20','threshold','PAXG','Huobi','format','fetchTickers','1\x20-\x20Handle\x20open\x20orders','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','/EUR','OnMaintenance','hybrid-crypto-js','args','getPortfolio(1)','Reset\x20|\x20','2.5.0','001','RateLimitExceeded','getHours','947934ECaJst','shift','/backup/','\x20metrics:</b>\x20\x0a\x0a','realized','running','success','data','ordertype','no\x20open\x20orders','Executing\x20exchange\x20reload','toLowerCase','final','parse','number','password','existsSync','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','InvalidNonce','slice','message','USDT','Invalid\x20symbol:\x20','basecoinvalue','balances','TUSD','forEach','getPortfolio(0)','botname','***','date','fetchTickers()','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','getOpenOrders()','exchanges','substring','storeHeadless','getTime','showConfig','Executed\x20','-------------------------------\x0a','Error\x20while\x20deleting\x20files:\x20','\x20|\x20lock\x20orders:\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','decrypt','trade','\x20not\x20available','createOrder','cost','stringify','Cex','<b>Bot\x20','Huobipro','has','cloneDeep','getStartingBalances','Order\x20amount\x20is\x20invalid:\x20','length','OrderNotFound','exec','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','debug','Bybit','min','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Portfolio\x20change\x20detected:\x20','colorscheme','limit-low',',\x20must\x20be\x20a\x203\x20digit\x20number','find','getMonth','102621sLnsbN','join','Headless:\x20','getAllOrders()','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Exception\x20thrown\x20in\x20','Limit\x20(high-margin)','sort','fiat','Resetting\x20coin\x20results:\x20','getCoins()','ask','random','closed','symbol','openOrders','Binance','error','close','stopExchange()','(((.+)+)+)+$','BNB/','Loading\x20completed','\x20/\x20','event','timestamp','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','watchTransactions()','cancelOrder','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','34haKQEs','send','time','Failed\x20to\x20load\x20coin\x20data\x20for\x20','fromCodePoint','%\x20(','configuration-stored','getFullYear','ETH','Trigger:\x20','startdate','\x20|\x20','usd','2.3.5','percentage','liquidity','write','\x20>\x20[DEBUG]\x20','leftTxt','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','performance','removed','BUSD','lowdb','side','date-fns','8LHJMfz','orderId','milliseconds','version','market','734348fWlnim','yyyy-MM-dd\x27T\x27HH:mm:ss','change','configuration','remainingSymbols','changes','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','toUpperCase','bot','set','<b>','constructor','watchTrades()','Transaction\x20detection\x20blocked','31203SnpwcU','padEnd','cancelLoading','coins','placeOrder()','timeshift','getSeconds','fetchOpenOrders','2\x20-\x20Orders\x20unlocked','logs','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','-performance.json','USDP','timeout','writeFile','active','API-key\x20format\x20invalid','replace','currency','amount','apiPassword','page','./config/','floor','headless','event-history','Crypt','customId','must\x20be\x20greater\x20than\x20minimum\x20amount','canceled','resetHistory','add','Net\x20effect','exchange\x20reloaded','UNLOCKING','getPortfolio(2)','startprice','createWriteStream','offset','\x20:\x20','splice','portfolio','************','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','initclient','USD','0\x20-\x20EXECUTION:\x20','sha256','getPortfolio','valid','InsufficientFunds','search','open','./logs/','datetime','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','onepagemode','apiSecret','type','placeOrder','showname','Order\x20is\x20invalid:\x20','full','abs','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fetchTicker','spot','recent20','settings','Order(s)\x20not\x20validated\x20after\x20','\x20not\x20responding','bots','push','ongoing'];_0x263b=function(){return _0x4a5abb;};return _0x263b();}async function initCoinResults(_0x206560){const _0x2f5dee=_0x456205;_0x206560?logger[_0x2f5dee(0x298)](_0x2f5dee(0x2ab)+_0x206560):logger[_0x2f5dee(0x298)]('Initializing\x20coin\x20results'),config[_0x2f5dee(0x316)][_0x2f5dee(0x275)](_0x4b723d=>{const _0x1c42b4=_0x2f5dee;if(!_0x4b723d[_0x1c42b4(0x1ff)]&&_0x4b723d['coin']!=config[_0x1c42b4(0x1f4)]){const _0x1b95c6=currentCoins[_0x1c42b4(0x2a0)](_0x119880=>_0x119880['coin']==_0x4b723d['coin']),_0x21e4ea=global['ticker'][noslash(_0x4b723d[_0x1c42b4(0x2b0)])];let _0x6fb847=_0x1b95c6?_0x1b95c6[_0x1c42b4(0x269)]:null,_0x3cfdfe=_0x4b723d[_0x1c42b4(0x1fd)]?0x1/_0x21e4ea:_0x21e4ea,_0x37547c;config[_0x1c42b4(0x2cf)][_0x1c42b4(0x275)](_0x507dc7=>{const _0x43cecb=_0x1c42b4;!_0x37547c&&(_0x37547c=_0x507dc7['changes']['find'](_0x1d1dea=>_0x1d1dea[_0x43cecb(0x223)]==_0x4b723d[_0x43cecb(0x223)]),_0x37547c&&(_0x6fb847=_0x37547c['number'],_0x3cfdfe=_0x37547c[_0x43cecb(0x1e7)]));});let _0x7f52db=dbCoinResults[_0x1c42b4(0x1ed)](_0x1c42b4(0x2f0))['find']({'coin':_0x4b723d['coin']})[_0x1c42b4(0x202)]();if(!_0x7f52db){const _0x17b966={'coin':_0x4b723d[_0x1c42b4(0x223)],'number':_0x6fb847,'breakeven':_0x3cfdfe,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['push'](_0x17b966)[_0x1c42b4(0x2d0)]();}else{if(_0x206560&&_0x4b723d[_0x1c42b4(0x223)]==_0x206560){const _0x3cf19c={'coin':_0x4b723d['coin'],'number':_0x6fb847,'breakeven':_0x3cfdfe,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1c42b4(0x1ed)](_0x1c42b4(0x2f0))[_0x1c42b4(0x2a0)]({'coin':_0x4b723d['coin']})['assign'](_0x3cf19c)[_0x1c42b4(0x2d0)]();}}}});}async function updateCoinResults(_0x269308,_0x4891a7=![]){const _0x51de26=_0x456205;let _0x1f1010,_0x1cbd8b,_0x3b9971,_0x3670e5,_0x1bedf5,_0x3e70d8,_0x4db118=dbCoinResults[_0x51de26(0x1ed)](_0x51de26(0x2f0))[_0x51de26(0x2a0)]({'coin':_0x269308['coin']})[_0x51de26(0x202)](),_0x22bf3d=![];_0x4db118&&Object['entries'](_0x4db118)[_0x51de26(0x275)](([_0x223fa6,_0x38c7b2])=>{if(_0x38c7b2==null)_0x22bf3d=!![];});(!_0x4db118||_0x22bf3d)&&(await initCoinResults(_0x269308[_0x51de26(0x223)]),_0x4db118=dbCoinResults[_0x51de26(0x1ed)](_0x51de26(0x2f0))['find']({'coin':_0x269308[_0x51de26(0x223)]})[_0x51de26(0x202)]());_0x269308[_0x51de26(0x1fd)]&&(_0x3e70d8={'filled':_0x269308[_0x51de26(0x226)]*_0x269308[_0x51de26(0x1e7)],'amount':_0x269308[_0x51de26(0x226)]*_0x269308[_0x51de26(0x1e7)],'side':_0x269308[_0x51de26(0x2d8)]==_0x51de26(0x23a)?_0x51de26(0x350):'sell','price':0x1/_0x269308[_0x51de26(0x1e7)]},_0x269308={..._0x269308,..._0x3e70d8});_0x4891a7?_0x1cbd8b=_0x269308[_0x51de26(0x2d8)]==_0x51de26(0x350)?_0x4db118[_0x51de26(0x269)]+_0x269308[_0x51de26(0x226)]:_0x4db118[_0x51de26(0x269)]-_0x269308[_0x51de26(0x226)]:_0x1cbd8b=await getCoinNumber(_0x269308['coin']);if(_0x269308[_0x51de26(0x1ec)]&&_0x269308[_0x51de26(0x1ec)][_0x51de26(0x2ff)]==config['basecoin'])_0x1f1010=_0x269308[_0x51de26(0x1ec)][_0x51de26(0x28b)];else{if(_0x269308[_0x51de26(0x1ec)]&&_0x269308['fee']['currency']=='BNB'&&!_0x4891a7&&config[_0x51de26(0x1f4)]!=_0x51de26(0x24b))_0x1f1010=_0x269308[_0x51de26(0x1ec)][_0x51de26(0x28b)]*global[_0x51de26(0x343)][_0x51de26(0x1e0)+config[_0x51de26(0x1f4)]];else _0x1f1010=defaultFee*_0x269308[_0x51de26(0x226)]*_0x269308[_0x51de26(0x1e7)];}_0x269308[_0x51de26(0x2d8)]==_0x51de26(0x350)?(_0x3b9971=_0x1cbd8b!=0x0?(_0x4db118['breakeven']*_0x4db118['number']+_0x269308[_0x51de26(0x1e7)]*(_0x1cbd8b-_0x4db118[_0x51de26(0x269)])+_0x1f1010)/_0x1cbd8b:0x0,_0x3670e5=_0x4db118[_0x51de26(0x25f)]):(_0x3b9971=_0x1cbd8b!=0x0?(_0x4db118[_0x51de26(0x1cb)]*_0x4db118[_0x51de26(0x269)]-_0x269308['price']*(_0x4db118[_0x51de26(0x269)]-_0x1cbd8b)+_0x1f1010)/_0x1cbd8b:0x0,_0x3670e5=_0x4db118[_0x51de26(0x25f)]+(_0x269308['price']-_0x4db118[_0x51de26(0x1cb)])*_0x269308['filled']);_0x1bedf5=(_0x269308[_0x51de26(0x1e7)]-_0x3b9971-_0x1f1010/_0x269308[_0x51de26(0x226)])*_0x1cbd8b;let _0x5ad4e6={'coin':_0x269308[_0x51de26(0x223)],'number':_0x1cbd8b,'breakeven':formatResult(_0x3b9971,0x8),'realized':formatResult(_0x3670e5,0x8),'unrealized':formatResult(_0x1bedf5,0x8),'fees':formatResult(_0x4db118[_0x51de26(0x1e4)]+_0x1f1010,0x8),'sells':_0x269308['side']==_0x51de26(0x23a)?_0x4db118[_0x51de26(0x1fe)]+0x1:_0x4db118[_0x51de26(0x1fe)],'buys':_0x269308[_0x51de26(0x2d8)]==_0x51de26(0x350)?_0x4db118['buys']+0x1:_0x4db118[_0x51de26(0x34e)]};dbCoinResults[_0x51de26(0x1ed)](_0x51de26(0x2f0))[_0x51de26(0x2a0)]({'coin':_0x269308[_0x51de26(0x223)]})['assign'](_0x5ad4e6)[_0x51de26(0x2d0)]();if(!_0x4891a7){if(_0x269308[_0x51de26(0x1ec)]&&_0x269308[_0x51de26(0x1ec)]['currency']==_0x51de26(0x1e0)){const _0x4f509a=currentCoins['find'](_0xa5628a=>_0xa5628a[_0x51de26(0x223)]==_0x51de26(0x1e0));if(_0x4f509a){let _0x5a584c=dbCoinResults['get'](_0x51de26(0x2f0))[_0x51de26(0x2a0)]({'coin':_0x51de26(0x1e0)})[_0x51de26(0x202)]();_0x5ad4e6={..._0x5a584c,'number':_0x4f509a[_0x51de26(0x269)]},dbCoinResults[_0x51de26(0x1ed)](_0x51de26(0x2f0))['find']({'coin':'BNB'})['assign'](_0x5ad4e6)[_0x51de26(0x2d0)]();}}}}async function placeOrder(_0x6f756a){const _0x3033d8=_0x456205,_0x4c98d2=config[_0x3033d8(0x263)]=='market'?_0x3033d8(0x2de):_0x3033d8(0x201);if(lockOrders==ORDERS[_0x3033d8(0x346)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x3033d8(0x1cf);let _0x62b992=![];lastOrders=[];for(const _0x21f8e4 of _0x6f756a){let _0x4201cc,_0x2925bd,_0x2762da,_0xeb4793,_0x125666,_0x5a3be9=_0x21f8e4['symbol'];try{const _0x40aa21=await exchange[_0x3033d8(0x32e)](_0x5a3be9);_0x4201cc=_0x21f8e4[_0x3033d8(0x1fd)]?0x1/_0x21f8e4[_0x3033d8(0x1f5)]:_0x21f8e4[_0x3033d8(0x1f5)],_0x2925bd=_0x40aa21['bid'],_0x2762da=_0x40aa21[_0x3033d8(0x2ad)];_0x21f8e4[_0x3033d8(0x1fd)]?(_0xeb4793=_0x21f8e4[_0x3033d8(0x2d8)]=='buy'?_0x3033d8(0x23a):_0x3033d8(0x350),_0x125666=Math[_0x3033d8(0x32c)](_0x21f8e4[_0x3033d8(0x288)])/_0x4201cc):(_0xeb4793=_0x21f8e4['side'],_0x125666=Math[_0x3033d8(0x32c)](_0x21f8e4[_0x3033d8(0x288)]));_0x4c98d2==_0x3033d8(0x201)&&(config[_0x3033d8(0x263)]==_0x3033d8(0x1cd)&&(_0x4201cc=_0xeb4793==_0x3033d8(0x350)?_0x2925bd:_0x2762da),config[_0x3033d8(0x263)]==_0x3033d8(0x29e)&&(_0x4201cc=_0xeb4793=='buy'?_0x2762da:_0x2925bd));_0x125666=formatResult(_0x125666,0x8),_0x4201cc=formatResult(_0x4201cc,0x8);const _0x206535=_0xeb4793==_0x3033d8(0x23a)?config[_0x3033d8(0x1fb)]?String[_0x3033d8(0x2c4)]('0x'+config[_0x3033d8(0x1fb)])+'\x20':'':config[_0x3033d8(0x1d8)]?String['fromCodePoint']('0x'+config[_0x3033d8(0x1d8)])+'\x20':'',_0x2c01f4=_0x4c98d2==_0x3033d8(0x2de)?_0x3033d8(0x244):config[_0x3033d8(0x263)]==_0x3033d8(0x1cd)?_0x3033d8(0x2a8):_0x3033d8(0x1fc),_0x26edd0=(Math[_0x3033d8(0x304)](Math[_0x3033d8(0x2ae)]()*0x35a4e900)+0x5f5e100)[_0x3033d8(0x245)]();lastOrders[_0x3033d8(0x335)]({'customId':_0x26edd0,'symbol':_0x5a3be9,'coin':_0x21f8e4[_0x3033d8(0x223)],'amount':_0x125666,'price':_0x4201cc,'side':_0xeb4793,'reverse':_0x21f8e4[_0x3033d8(0x1fd)],'filled':0x0});if(_0x4c98d2==_0x3033d8(0x2de))logHistory(_0x3033d8(0x209),''+_0x206535+_0x2c01f4+_0x3033d8(0x236)+_0x5a3be9+'\x20'+_0xeb4793+'\x20#'+formatResult(_0x125666,0x8)+'\x20@'+formatResult(_0x4201cc,0x8));else logHistory(_0x3033d8(0x209),''+_0x206535+_0x2c01f4+'\x20order:\x20'+_0x5a3be9+'\x20'+_0xeb4793+'\x20#'+formatResult(_0x125666,0x8)+'\x20@'+formatResult(_0x4201cc,0x8));let _0x1cf9bf;_0x4c98d2==_0x3033d8(0x2de)?_0xeb4793=='buy'&&[_0x3033d8(0x299),_0x3033d8(0x341),_0x3033d8(0x28d),_0x3033d8(0x24c),_0x3033d8(0x28f)]['includes'](config[_0x3033d8(0x1f9)])?_0x1cf9bf=await exchange[_0x3033d8(0x28a)](_0x5a3be9,_0x4c98d2,_0xeb4793,_0x125666,_0x4201cc):_0x1cf9bf=await exchange[_0x3033d8(0x28a)](_0x5a3be9,_0x4c98d2,_0xeb4793,_0x125666,undefined):_0x1cf9bf=await exchange[_0x3033d8(0x28a)](_0x5a3be9,_0x4c98d2,_0xeb4793,_0x125666,_0x4201cc);logger['debug']('ID:\x20'+_0x1cf9bf['id']+_0x3033d8(0x34b)+_0x26edd0);const _0xe52007=lastOrders['length']-0x1;if(_0xe52007>=0x0&&lastOrders[_0xe52007][_0x3033d8(0x308)]==_0x26edd0){lastOrders[_0xe52007][_0x3033d8(0x2db)]=_0x1cf9bf['id'];if(_0x1cf9bf[_0x3033d8(0x300)])lastOrders[_0xe52007][_0x3033d8(0x300)]=_0x1cf9bf['amount'];if(_0x1cf9bf[_0x3033d8(0x1e7)])lastOrders[_0xe52007][_0x3033d8(0x1e7)]=_0x1cf9bf[_0x3033d8(0x1e7)];lastOrders[_0xe52007][_0x3033d8(0x1ec)]=_0x1cf9bf[_0x3033d8(0x1ec)];}if(config[_0x3033d8(0x33b)]!=0x0){let _0x3c2c52=null;if(cooldownTracker['length']==config[_0x3033d8(0x33b)]-0x1)_0x3c2c52=cooldownTracker[_0x3033d8(0x25c)]();const _0x59c78f=getTimeStamp();cooldownTracker['push'](_0x59c78f);if(_0x3c2c52){const _0x4b5133=fns[_0x3033d8(0x227)](new Date(_0x59c78f),new Date(_0x3c2c52));if(_0x4b5133<cooldownInterval){logHistory(_0x3033d8(0x2b3),_0x3033d8(0x282)+config[_0x3033d8(0x33b)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x3033d8(0x1fa)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x5d632c){if(_0x5d632c[_0x3033d8(0x245)]()[_0x3033d8(0x207)](_0x3033d8(0x1bf)))lastOrders=lastOrders[_0x3033d8(0x1db)](_0x2b6e0a=>_0x2b6e0a[_0x3033d8(0x2b0)]!=_0x5a3be9),logHistory('error',_0x3033d8(0x232)+_0x5a3be9),_0x62b992=!![];else{if(_0x5d632c[_0x3033d8(0x245)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0x3033d8(0x1db)](_0x427140=>_0x427140[_0x3033d8(0x2b0)]!=_0x5a3be9),logHistory(_0x3033d8(0x2b3),_0x3033d8(0x293)+_0x5a3be9),_0x62b992=!![];else{if(_0x5d632c[_0x3033d8(0x245)]()[_0x3033d8(0x207)]('InvalidOrder'))lastOrders=lastOrders[_0x3033d8(0x1db)](_0x3ac546=>_0x3ac546[_0x3033d8(0x2b0)]!=_0x5a3be9),logHistory(_0x3033d8(0x2b3),_0x3033d8(0x32a)+_0x5a3be9),logger[_0x3033d8(0x298)](_0x5d632c),_0x62b992=!![];else _0x5d632c[_0x3033d8(0x245)]()[_0x3033d8(0x207)](_0x3033d8(0x309))?(lastOrders=lastOrders[_0x3033d8(0x1db)](_0x5b829c=>_0x5b829c[_0x3033d8(0x2b0)]!=_0x5a3be9),logHistory('error',_0x3033d8(0x232)+_0x5a3be9),_0x62b992=!![]):(lastOrders=lastOrders[_0x3033d8(0x1db)](_0x481742=>_0x481742[_0x3033d8(0x2b0)]!=_0x5a3be9),await handleError(_0x5d632c,_0x3033d8(0x2f1),_0x5a3be9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3033d8(0x294)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x52fd08=config[_0x3033d8(0x263)]==_0x3033d8(0x2de)?validateOrderTimeout*0x3c*0x3e8:config[_0x3033d8(0x2fa)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x57d375=_0x3033d8;validateOrders(_0x57d375(0x267));},_0x52fd08);}else unlockOrders();_0x62b992&&config[_0x3033d8(0x305)]&&(logHistory(_0x3033d8(0x2b3),_0x3033d8(0x1be)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3033d8(0x261),_0x3033d8(0x222)));}else{if(coolingDown)!config[_0x3033d8(0x305)]&&logHistory(_0x3033d8(0x2b3),_0x3033d8(0x250));else lockOrders!=ORDERS[_0x3033d8(0x346)]&&(!config['headless']&&(config[_0x3033d8(0x263)]==_0x3033d8(0x2de)?logHistory(_0x3033d8(0x2b3),_0x3033d8(0x2d3)):logHistory(_0x3033d8(0x2b3),_0x3033d8(0x216))));}}function persistOpenOrders(_0x228deb){const _0x1187fa=_0x456205,_0x37f4f2={...config,'openOrders':_0x228deb};let _0x3b8d86=dbConfig[_0x1187fa(0x1ed)](_0x1187fa(0x2e7))[_0x1187fa(0x2a0)]({'botID':botID})['value']();_0x3b8d86&&dbConfig[_0x1187fa(0x1ed)](_0x1187fa(0x2e7))[_0x1187fa(0x2a0)]({'botID':botID})['assign'](_0x37f4f2)[_0x1187fa(0x2d0)]();}function restoreOrders(){const _0x33dee4=_0x456205;let _0x18a52e;config[_0x33dee4(0x2b1)]&&allOpenOrders[_0x33dee4(0x275)](_0x5e4ad4=>{const _0x207cd1=_0x33dee4,_0x82ed44=config[_0x207cd1(0x2b1)][_0x207cd1(0x2a0)](_0x3928e3=>_0x3928e3[_0x207cd1(0x2db)]==_0x5e4ad4['id']);_0x82ed44&&(lastOrders[_0x207cd1(0x335)](_0x82ed44),_0x18a52e=_0x5e4ad4[_0x207cd1(0x2bb)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x33dee4(0x1bc)],validateOrdersState=_0x33dee4(0x336),allOrdersPlaced=!![];const _0xb038ce=new Date()[_0x33dee4(0x280)](),_0x130bfd=config[_0x33dee4(0x263)]==_0x33dee4(0x2de)?validateOrderTimeout*0x3c*0x3e8:config[_0x33dee4(0x2fa)]*0x3c*0x3e8;if(_0x18a52e+_0x130bfd>_0xb038ce){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x18a52e+_0x130bfd-_0xb038ce);}else validateOrders(_0x33dee4(0x267));}}async function sendMetricsTelegram(){const _0xc99bac=_0x456205;if(!coinsLoaded){process['send']({'telegrammsg':_0xc99bac(0x1de)},_0x1bc70e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x20d7c0='';if(config['showname'])_0x20d7c0=_0xc99bac(0x2e9)+config[_0xc99bac(0x277)]+_0xc99bac(0x25e);else _0x20d7c0=_0xc99bac(0x28e)+botID+_0xc99bac(0x25e);const _0x508bc0=getKPIs(_0xc99bac(0x1f4)),_0x1a90cc=getKPIs('fiat',config[_0xc99bac(0x2aa)]),_0xeab3ef=getKPIs(_0xc99bac(0x1bd)),_0x47d0b3=getKPIs(_0xc99bac(0x23d),config[_0xc99bac(0x2aa)]);_0x20d7c0+=_0xc99bac(0x238),_0x20d7c0+=_0x508bc0['leftTxt']+'\x20:\x20'+_0x508bc0[_0xc99bac(0x202)]+'\x0a',_0x20d7c0+=_0x508bc0[_0xc99bac(0x354)]+':\x20'+_0x508bc0['change']+'%\x0a',_0x20d7c0+=_0x1a90cc[_0xc99bac(0x2d2)]+_0xc99bac(0x314)+_0x1a90cc['value']+'\x0a',_0x20d7c0+=_0x1a90cc['rightTxt']+':\x20'+_0x1a90cc['change']+'%\x0a',_0x20d7c0+=_0xeab3ef[_0xc99bac(0x2d2)]+':\x20'+_0xeab3ef[_0xc99bac(0x202)]+'\x20('+config[_0xc99bac(0x1f4)]+')\x0a',_0x20d7c0+=_0xeab3ef[_0xc99bac(0x354)]+':\x20'+_0xeab3ef[_0xc99bac(0x2e1)]+_0xc99bac(0x2c5)+config['basecoin']+')\x0a',_0x20d7c0+=_0x47d0b3[_0xc99bac(0x2d2)]+':\x20'+_0x47d0b3[_0xc99bac(0x202)]+'\x20('+config['fiat']+')\x0a',_0x20d7c0+=_0x47d0b3[_0xc99bac(0x354)]+':\x20'+_0x47d0b3[_0xc99bac(0x2e1)]+_0xc99bac(0x2c5)+config['fiat']+')\x0a',_0x20d7c0+='</pre>',process[_0xc99bac(0x2c1)]({'telegrammsg':_0x20d7c0},_0x3884c5=>{});}async function sendPortfolioTelegram(){const _0x5cdf14=_0x456205;if(!coinsLoaded){process[_0x5cdf14(0x2c1)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5e97cc=>{});return;}let _0x4171b9='';if(config[_0x5cdf14(0x329)])_0x4171b9=_0x5cdf14(0x2e9)+config[_0x5cdf14(0x277)]+_0x5cdf14(0x22b);else _0x4171b9='<b>Bot\x20'+botID+_0x5cdf14(0x22b);_0x4171b9+='<pre>',_0x4171b9+=_0x5cdf14(0x283),_0x4171b9+=_0x5cdf14(0x324),_0x4171b9+='-------------------------------\x0a',currentCoins[_0x5cdf14(0x275)](_0xac2df8=>{const _0x15161c=_0x5cdf14;_0x4171b9+=_0xac2df8[_0x15161c(0x223)][_0x15161c(0x2ee)](0x7)+'|\x20'+formatPad(_0xac2df8[_0x15161c(0x1f1)],0x2,0x6)+'|\x20'+formatPad(_0xac2df8[_0x15161c(0x347)],0x2,0x6)+'|\x20'+formatPad(_0xac2df8[_0x15161c(0x1d9)]*0x64,0x2,0x6)+'\x0a';}),_0x4171b9+=_0x5cdf14(0x221),process[_0x5cdf14(0x2c1)]({'telegrammsg':_0x4171b9},_0x10bf6a=>{});}function formatPad(_0x84a19b,_0x12c735,_0x42f7ca){const _0x3a68e4=_0x456205,_0x26ace3=formatResultString(_0x84a19b,_0x12c735);return _0x26ace3?_0x26ace3[_0x3a68e4(0x1d2)](_0x42f7ca):''[_0x3a68e4(0x1d2)](_0x42f7ca);}function logHistory(_0x51d18b,_0x32c87c,_0x53d946=''){const _0x1f20c9=_0x456205;logger[_0x1f20c9(0x32b)](''+_0x32c87c);let _0x3862da={'time':getTimeStamp(),'type':_0x51d18b,'event':_0x32c87c};dbLogs['get'](_0x1f20c9(0x2f6))['push'](_0x3862da)[_0x1f20c9(0x2d0)]();if(_0x53d946=='')_0x53d946=_0x32c87c;proxyEmit(_0x1f20c9(0x2ba),{'log':_0x3862da,'summary':_0x53d946}),process[_0x1f20c9(0x2c1)]({'telegram':{..._0x3862da,'botname':config[_0x1f20c9(0x277)],'showname':config['showname']}},_0x55c224=>{});}function emitHistory(_0x43a6f7={}){const _0x19d734=_0x456205;Object[_0x19d734(0x1d5)](_0x43a6f7)['length']==0x0&&(_0x43a6f7={'type':[_0x19d734(0x209),_0x19d734(0x2ba)],'event':'','page':0x1});if(_0x43a6f7[_0x19d734(0x327)][_0x19d734(0x207)]('event'))_0x43a6f7['type']['splice'](_0x43a6f7[_0x19d734(0x327)]['indexOf']('event'),0x1,_0x19d734(0x2b3),'warning',_0x19d734(0x261));if(dbLogs[_0x19d734(0x290)](_0x19d734(0x2f6))['value']()){let _0x73570f=dbLogs[_0x19d734(0x1ed)]('logs')[_0x19d734(0x1db)](_0x4501c8=>{const _0x1d2d41=_0x19d734;if(_0x43a6f7[_0x1d2d41(0x327)][_0x1d2d41(0x294)]==0x0)return![];else return _0x43a6f7['type'][_0x1d2d41(0x207)](_0x4501c8[_0x1d2d41(0x327)]);})[_0x19d734(0x1db)](_0xc1f487=>{const _0xd31dd0=_0x19d734;if(_0x43a6f7[_0xd31dd0(0x2ba)]=='')return!![];else return _0xc1f487['event'][_0xd31dd0(0x266)]()[_0xd31dd0(0x207)](_0x43a6f7[_0xd31dd0(0x2ba)][_0xd31dd0(0x266)]());})[_0x19d734(0x233)](_0x19d734(0x2c2)),_0x763fa9=_0x73570f['value']()[_0x19d734(0x294)];_0x73570f=_0x73570f[_0x19d734(0x1fd)]()[_0x19d734(0x26e)]((_0x43a6f7[_0x19d734(0x302)]-0x1)*logPageSize,_0x43a6f7[_0x19d734(0x302)]*logPageSize-0x1)[_0x19d734(0x1fd)]()[_0x19d734(0x202)](),proxyEmit(_0x19d734(0x306),{'logs':_0x73570f,'total':_0x763fa9});}else proxyEmit(_0x19d734(0x306),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4097e1){const _0x2f05fa=_0x456205;if(dbLogs[_0x2f05fa(0x290)]('logs')[_0x2f05fa(0x202)]()){const _0x3efb23=dbLogs[_0x2f05fa(0x1ed)](_0x2f05fa(0x2f6))[_0x2f05fa(0x233)](_0x2f05fa(0x2c2))['filter'](_0x141e1c=>{const _0xaea743=_0x2f05fa;return _0x141e1c['type']==_0xaea743(0x209);})['value']();dbLogs[_0x2f05fa(0x1ed)](_0x2f05fa(0x2f6))['remove']()[_0x2f05fa(0x2d0)](),dbLogs['get'](_0x2f05fa(0x2f6))[_0x2f05fa(0x349)](_0x3efb23)[_0x2f05fa(0x2d0)](),emitHistory(_0x4097e1);}}async function pauseBot(_0x3cf1ac=pauseBotInterval){const _0x5159f0=_0x456205,_0x4a1e2f=new Date()[_0x5159f0(0x280)]();if(!lastErrorShown||_0x4a1e2f-lastErrorShown>=_0x3cf1ac){lastErrorShown=_0x4a1e2f;!lastBotPause?(lastBotPause=_0x4a1e2f,consecutivePauses=0x1):(_0x4a1e2f-lastBotPause-_0x3cf1ac<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x5159f0(0x2c1)]({'stop':_0x5159f0(0x215)},_0x3b8481=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x5159f0(0x280)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x3cf1ac),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1a2cbd=_0x456205;botPaused=!![],await sleep(0x3e8),process[_0x1a2cbd(0x2c1)]({'stop':_0x1a2cbd(0x352)},_0x313805=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x585467,_0x58aa9e){const _0x32ac0e=_0x456205;if(botPaused)return;const _0x5d5d26=config[_0x32ac0e(0x1f9)]||_0x32ac0e(0x1ee);if(_0x58aa9e)logger[_0x32ac0e(0x298)](_0x32ac0e(0x2a7)+_0x58aa9e);const _0x53721d=()=>{const _0x4c1976=_0x32ac0e;loading[_0x4c1976(0x2b3)]=!![],emitLoadingProgress();};if(_0x585467[_0x32ac0e(0x245)]()[_0x32ac0e(0x207)](_0x32ac0e(0x2fd)))logHistory('error',_0x5d5d26+_0x32ac0e(0x2bf)),_0x53721d();else{if(_0x585467[_0x32ac0e(0x245)]()[_0x32ac0e(0x207)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x32ac0e(0x2b3),_0x5d5d26+_0x32ac0e(0x29b)),_0x53721d();else _0x585467['toString']()[_0x32ac0e(0x207)]('AuthenticationError')?(logHistory(_0x32ac0e(0x2b3),_0x5d5d26+_0x32ac0e(0x297)),logHistory(_0x32ac0e(0x2b3),_0x32ac0e(0x1c4)),_0x53721d()):await handleError(_0x585467,null);}}async function handleError(_0x2a0eb5,_0x4a7170,_0x121cb3=''){const _0xe0ed6a=_0x456205;if(botPaused)return;const _0x152af3=config[_0xe0ed6a(0x1f9)]||_0xe0ed6a(0x1ee);if(_0x4a7170)logger[_0xe0ed6a(0x298)](_0xe0ed6a(0x2a7)+_0x4a7170);if(_0x2a0eb5['toString']()[_0xe0ed6a(0x207)](_0xe0ed6a(0x214))||_0x2a0eb5['toString']()[_0xe0ed6a(0x207)](_0xe0ed6a(0x259)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)]('ExchangeNotAvailable')||_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)](_0xe0ed6a(0x252)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x289)+pauseBotMsg),await pauseBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()['includes'](_0xe0ed6a(0x351)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x333)+pauseBotMsg),await pauseBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory('error',_0x152af3+_0xe0ed6a(0x235)+pauseBotMsg),await pauseBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()['toLowerCase']()['includes'](_0xe0ed6a(0x2bb)))logHistory(_0xe0ed6a(0x2b3),_0xe0ed6a(0x2f7)),logHistory(_0xe0ed6a(0x2b3),_0xe0ed6a(0x26c)),await killBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()['includes'](_0xe0ed6a(0x26d)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+'\x20rejected\x20your\x20API\x20request'+pauseBotMsg),await pauseBot();else{if(_0x2a0eb5 instanceof ccxt['NetworkError'])logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x21a)+pauseBotMsg),logger[_0xe0ed6a(0x298)](_0xe0ed6a(0x1d6),_0x2a0eb5),await pauseBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)](_0xe0ed6a(0x2fd)))logHistory('error',_0x152af3+_0xe0ed6a(0x1d4)),logHistory(_0xe0ed6a(0x2b3),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)](_0xe0ed6a(0x32d)))logHistory('error',_0x152af3+_0xe0ed6a(0x339)),logHistory('error',_0xe0ed6a(0x26c)),await killBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)](_0xe0ed6a(0x23e)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x318)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x2a0eb5[_0xe0ed6a(0x245)]()[_0xe0ed6a(0x207)](_0xe0ed6a(0x217)))logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x219)),logHistory(_0xe0ed6a(0x2b3),_0xe0ed6a(0x26c)),await killBot();else{if(_0x2a0eb5['toString']()[_0xe0ed6a(0x207)](_0xe0ed6a(0x31f)))logHistory(_0xe0ed6a(0x2b3),_0xe0ed6a(0x2a6)+_0x121cb3);else _0x2a0eb5 instanceof ccxt[_0xe0ed6a(0x1da)]?(logHistory(_0xe0ed6a(0x2b3),_0x152af3+_0xe0ed6a(0x33e)),logger[_0xe0ed6a(0x298)](_0xe0ed6a(0x1d6),_0x2a0eb5)):(logHistory(_0xe0ed6a(0x2b3),'Unknown\x20error\x20occured'+pauseBotMsg),logger[_0xe0ed6a(0x298)]('Error\x20details:',_0x2a0eb5),await pauseBot());}}}}}}}}}}}}function formatResult(_0x1b2049,_0x532788){const _0x1306da=_0x456205;return parseFloat(_0x1b2049[_0x1306da(0x206)](_0x532788));}function formatResultTruncate(_0x453e2e,_0x240523){const _0x22c2b3=_0x456205;let _0x310b06=formatResultString(_0x453e2e,0xa),_0x2c9850=_0x310b06['indexOf']('.');return _0x2c9850!=-0x1&&(_0x310b06=_0x310b06[_0x22c2b3(0x26e)](0x0,_0x2c9850+_0x240523+0x1)),Number(_0x310b06);}function formatResultString(_0x20d03b,_0x1c67e4){const _0x1cbf32=_0x456205;let _0x4a6638;if(!(''+_0x20d03b)[_0x1cbf32(0x207)]('e'))_0x4a6638=+(Math['round'](_0x20d03b+'e+'+_0x1c67e4)+'e-'+_0x1c67e4);else{let _0x13369d=(''+_0x20d03b)['split']('e'),_0x1a92e2='';+_0x13369d[0x1]+_0x1c67e4>0x0&&(_0x1a92e2='+'),_0x4a6638=+(Math[_0x1cbf32(0x225)](+_0x13369d[0x0]+'e'+_0x1a92e2+(+_0x13369d[0x1]+_0x1c67e4))+'e-'+_0x1c67e4);}return Number(_0x4a6638)[_0x1cbf32(0x206)](_0x1c67e4);}function getServerTime(){const _0x5e6296=_0x456205,_0x31a5cd=new Date();return _0x31a5cd[_0x5e6296(0x2c7)]()+'/'+(_0x31a5cd[_0x5e6296(0x2a1)]()+0x1)[_0x5e6296(0x245)]()[_0x5e6296(0x1d2)](0x2,'0')+'/'+_0x31a5cd['getDate']()[_0x5e6296(0x245)]()[_0x5e6296(0x1d2)](0x2,'0')+'\x20'+_0x31a5cd['getHours']()[_0x5e6296(0x245)]()[_0x5e6296(0x1d2)](0x2,'0')+':'+_0x31a5cd['getMinutes']()[_0x5e6296(0x245)]()[_0x5e6296(0x1d2)](0x2,'0')+':'+_0x31a5cd[_0x5e6296(0x2f3)]()[_0x5e6296(0x245)]()[_0x5e6296(0x1d2)](0x2,'0');}function getTimeStamp(){const _0x3c772c=_0x456205,_0x290d07=shiftedTime();return _0x290d07[_0x3c772c(0x2c7)]()+'/'+(_0x290d07[_0x3c772c(0x2a1)]()+0x1)[_0x3c772c(0x245)]()['padStart'](0x2,'0')+'/'+_0x290d07['getDate']()[_0x3c772c(0x245)]()['padStart'](0x2,'0')+'\x20'+_0x290d07[_0x3c772c(0x25a)]()[_0x3c772c(0x245)]()[_0x3c772c(0x1d2)](0x2,'0')+':'+_0x290d07[_0x3c772c(0x1ce)]()['toString']()['padStart'](0x2,'0')+':'+_0x290d07[_0x3c772c(0x2f3)]()[_0x3c772c(0x245)]()['padStart'](0x2,'0');}function getDate(){const _0x5823d5=_0x456205,_0x39f903=shiftedTime();return _0x39f903[_0x5823d5(0x2c7)]()+'/'+(_0x39f903[_0x5823d5(0x2a1)]()+0x1)['toString']()[_0x5823d5(0x1d2)](0x2,'0')+'/'+_0x39f903[_0x5823d5(0x247)]()['toString']()[_0x5823d5(0x1d2)](0x2,'0');}function getHour(){const _0x2013ab=_0x456205,_0x448443=shiftedTime();return _0x448443[_0x2013ab(0x25a)]()[_0x2013ab(0x245)]()[_0x2013ab(0x1d2)](0x2,'0');}function sleep(_0x3632a4){return new Promise(_0x1bb38b=>setTimeout(_0x1bb38b,_0x3632a4));}function shiftedTime(){const _0x3e4c21=_0x456205,_0x20ff4c=new Date();let _0x53e442=_0x20ff4c;if(config&&config['timeshift']!==0x0)_0x53e442=fns[_0x3e4c21(0x30c)](_0x20ff4c,{'hours':config[_0x3e4c21(0x2f2)]});return _0x53e442;}function timer(_0x387d53){const _0x1b2a38=_0x456205,_0x215235=new Date();!lasttime?console['log'](getTimeStamp()+_0x1b2a38(0x218),_0x387d53,_0x215235):console[_0x1b2a38(0x20e)](getTimeStamp()+_0x1b2a38(0x218),_0x387d53,(_0x215235-lasttime)/0x3e8),lasttime=_0x215235;}