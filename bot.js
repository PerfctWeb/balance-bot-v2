const _0x3ffd09=_0x1b90;(function(_0x355fca,_0x45ae60){const _0x3ef7c7=_0x1b90,_0x26117d=_0x355fca();while(!![]){try{const _0x47b4aa=parseInt(_0x3ef7c7(0x1d6))/0x1+-parseInt(_0x3ef7c7(0x216))/0x2*(parseInt(_0x3ef7c7(0x1c6))/0x3)+-parseInt(_0x3ef7c7(0x231))/0x4*(parseInt(_0x3ef7c7(0x1ba))/0x5)+-parseInt(_0x3ef7c7(0x1e6))/0x6*(parseInt(_0x3ef7c7(0x1fc))/0x7)+parseInt(_0x3ef7c7(0x297))/0x8*(parseInt(_0x3ef7c7(0x28c))/0x9)+parseInt(_0x3ef7c7(0x194))/0xa+parseInt(_0x3ef7c7(0x29e))/0xb;if(_0x47b4aa===_0x45ae60)break;else _0x26117d['push'](_0x26117d['shift']());}catch(_0x36a895){_0x26117d['push'](_0x26117d['shift']());}}}(_0x2f00,0x940fe));const _0x31da54=function(){let _0x164e0a=!![];return function(_0x4e2576,_0x564297){const _0x53cdc0=_0x164e0a?function(){if(_0x564297){const _0x270845=_0x564297['apply'](_0x4e2576,arguments);return _0x564297=null,_0x270845;}}:function(){};return _0x164e0a=![],_0x53cdc0;};}(),_0x5ce727=_0x31da54(this,function(){const _0xed3c82=_0x1b90;return _0x5ce727[_0xed3c82(0x24a)]()[_0xed3c82(0x2d2)](_0xed3c82(0x25b))[_0xed3c82(0x24a)]()['constructor'](_0x5ce727)[_0xed3c82(0x2d2)](_0xed3c82(0x25b));});_0x5ce727();'use strict';const ccxt=require(_0x3ffd09(0x192))['pro'],low=require(_0x3ffd09(0x1dc)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3ffd09(0x2ba)),Crypt=require(_0x3ffd09(0x264))[_0x3ffd09(0x252)],util=require(_0x3ffd09(0x284)),argv=require(_0x3ffd09(0x201))(process['argv']['slice'](0x2))[_0x3ffd09(0x1de)],path=require('path');let exchange;global['ticker']={},global[_0x3ffd09(0x28f)]={};const exceptions={'binance':[_0x3ffd09(0x1eb),'HOT/BTC',_0x3ffd09(0x21f),_0x3ffd09(0x2ce),_0x3ffd09(0x21d)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3ffd09(0x2cc)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3ffd09(0x30f)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3ffd09(0x1d9))[_0x3ffd09(0x212)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3ffd09(0x1c4)](_0x3ffd09(0x228)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3ffd09(0x1de)][0x3]||'',configpath=userID?_0x3ffd09(0x26b)+userID+'/':_0x3ffd09(0x26b),logspath=userID?'./logs/'+userID+'/':_0x3ffd09(0x2bc),loggerfile=fs[_0x3ffd09(0x1b0)](logspath+_0x3ffd09(0x26a),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x3ffd09(0x262)](configpath);!fs[_0x3ffd09(0x19f)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x3ffd09(0x2a2)+botID+'-config.json',logfile=configpath+_0x3ffd09(0x2a2)+botID+_0x3ffd09(0x2f0),performancefile=configpath+_0x3ffd09(0x2a2)+botID+'-performance.json',coinresultsfile=configpath+_0x3ffd09(0x2a2)+botID+'-results.json',settingsfile=configpath+_0x3ffd09(0x2be),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x3ffd09(0x305),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3ffd09(0x20b)]({'logs':[],'version':serverversion})[_0x3ffd09(0x1df)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3ffd09(0x20b)]({'data':[],'version':serverversion})[_0x3ffd09(0x1df)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3ffd09(0x20b)]({'bot':[],'version':serverversion})[_0x3ffd09(0x1df)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x3ffd09(0x1df)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3ffd09(0x277),'rsaStandard':_0x3ffd09(0x1bb)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5a611b=>{console['log'](_0x5a611b);},'simple':_0xaf721e=>{const _0x5a7c3d=_0x3ffd09;console[_0x5a7c3d(0x1c4)](_0xaf721e),loggerfile[_0x5a7c3d(0x1df)](util[_0x5a7c3d(0x19d)](_0xaf721e)+'\x0a');},'full':async(_0x2118bd,_0x22622e='')=>{const _0x375d46=_0x3ffd09;let _0x27ef14;if(config[_0x375d46(0x2e4)])_0x27ef14=getTimeStamp()+':\x20'+config[_0x375d46(0x210)]+_0x375d46(0x2b7)+_0x2118bd;else _0x27ef14=getTimeStamp()+_0x375d46(0x19c)+botID+_0x375d46(0x2b7)+_0x2118bd;console[_0x375d46(0x1c4)](_0x27ef14),loggerfile['write'](util[_0x375d46(0x19d)](_0x27ef14)+'\x0a'),_0x22622e&&(console['log'](_0x22622e),loggerfile[_0x375d46(0x1df)](util[_0x375d46(0x19d)](_0x22622e)+'\x0a'));},'debug':async(_0x21bc1e,_0x33f6bd='')=>{const _0x189555=_0x3ffd09;let _0x49c200;if(config['showname'])_0x49c200=getTimeStamp()+':\x20'+config[_0x189555(0x210)]+'\x20>\x20[DEBUG]\x20'+_0x21bc1e;else _0x49c200=getTimeStamp()+_0x189555(0x19c)+botID+_0x189555(0x1cf)+_0x21bc1e;if(debugging)console[_0x189555(0x1c4)](_0x49c200);loggerfile[_0x189555(0x1df)](util['format'](_0x49c200)+'\x0a');if(_0x33f6bd){if(debugging)console[_0x189555(0x1c4)](_0x33f6bd);loggerfile['write'](util[_0x189555(0x19d)](_0x33f6bd)+'\x0a');}}};process['on'](_0x3ffd09(0x2e1),function(_0x8f0bc3){const _0xdc7896=_0x3ffd09;logger[_0xdc7896(0x25a)](_0x8f0bc3);});settings[_0x3ffd09(0x2f7)]!=config[_0x3ffd09(0x2f7)]&&updateTimeshift(settings[_0x3ffd09(0x2f7)]);settings['onepagemode']!=config[_0x3ffd09(0x256)]&&updateOnepagemode(settings['onepagemode']);process['send']({'started':_0x3ffd09(0x1f5)},_0x52b9a0=>{}),initializeProcessListeners();function proxyEmit(_0x1e488d,_0x237c97=null){const _0x207bc6=_0x3ffd09;process[_0x207bc6(0x255)]({'function':_0x1e488d,'args':_0x237c97},_0x1e4219=>{});}function initializeProcessListeners(){process['on']('message',_0x4ed2ce=>{const _0x7d3f8c=_0x1b90;switch(Object[_0x7d3f8c(0x1b7)](_0x4ed2ce)[0x0]){case _0x7d3f8c(0x2f7):_0x4ed2ce['timeshift']!=undefined&&(settings[_0x7d3f8c(0x2f7)]=_0x4ed2ce[_0x7d3f8c(0x2f7)],updateTimeshift(settings[_0x7d3f8c(0x2f7)]));break;case _0x7d3f8c(0x256):_0x4ed2ce[_0x7d3f8c(0x256)]!=undefined&&(settings[_0x7d3f8c(0x256)]=_0x4ed2ce['onepagemode'],updateOnepagemode(settings[_0x7d3f8c(0x256)]));break;case _0x7d3f8c(0x304):_0x4ed2ce[_0x7d3f8c(0x304)]!=undefined&&(bots=JSON[_0x7d3f8c(0x1b4)](_0x4ed2ce[_0x7d3f8c(0x304)]),proxyEmit(_0x7d3f8c(0x304),bots));break;case _0x7d3f8c(0x2c4):switch(_0x4ed2ce[_0x7d3f8c(0x2c4)]){case _0x7d3f8c(0x2df):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x7d3f8c(0x263):emitHistory(_0x4ed2ce['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x4ed2ce[_0x7d3f8c(0x19a)]);break;case _0x7d3f8c(0x2f9):getPortfolio(_0x4ed2ce['args']);break;case _0x7d3f8c(0x227):storeConfiguration(_0x4ed2ce[_0x7d3f8c(0x19a)]);break;case _0x7d3f8c(0x20f):storeHeadless(_0x4ed2ce[_0x7d3f8c(0x19a)]);break;case _0x7d3f8c(0x208):storeFiat(_0x4ed2ce['args']);break;case _0x7d3f8c(0x1ca):resetHistory();break;case _0x7d3f8c(0x25f):getStartingBalances(getNormalizedPerformance());break;case _0x7d3f8c(0x1f0):placeOrder(_0x4ed2ce['args']);break;case _0x7d3f8c(0x2fe):cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x96ad51=null,_0x710a7b=![]){const _0xb7cefe=_0x3ffd09;logger[_0xb7cefe(0x28e)](_0xb7cefe(0x287)+(_0x96ad51&&_0x96ad51[_0xb7cefe(0x2f3)]>0x0?_0xb7cefe(0x2bd)+_0x96ad51[_0xb7cefe(0x221)](','):_0xb7cefe(0x2c1))+_0xb7cefe(0x1a3)+(_0x710a7b?_0xb7cefe(0x1f9):_0xb7cefe(0x222)));if(pidBalances)clearTimeout(pidBalances);if(!_0x710a7b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xb7cefe(0x1a0)]!=''&&config[_0xb7cefe(0x1a0)]!='***'){if(_0x710a7b){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xab4aa2){handleErrorNoStop(_0xab4aa2,_0xb7cefe(0x23d));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x96ad51);const _0x33a41a=await getCoins();[currentCoins,currentCoinsAll]=_0x33a41a,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(),await updateOpenOrders();if(lastOrders[_0xb7cefe(0x2f3)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x14fa95=_0x3ffd09;exchangeStopped=!![],await exchange[_0x14fa95(0x213)]();}function _0x2f00(){const _0x43324b=['isEqual','added','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','sort','2.3.5','canceled','round','\x20-\x20bot\x20not\x20started','date','Fees\x20|\x20currency:\x20','Limit\x20(high-margin)','ticker','LOCKED','.json','getTime','sell','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','price','1\x20-\x20FILLED:\x20','toLowerCase','\x20>\x20','remove','BNB','date-fns','filter','./logs/','additional\x20symbols\x20','bb-settings.json','event-history','ordertype','no\x20additional\x20symbols','restart','limit','function','replace','Invalid\x20quantity','writeFile','buys','\x20|\x20Error\x20details:\x20','average','net-basecoin','freeze','clientOrderId','NANO/','getOpenOrders()','getPortfolio(0)','Cooldown\x20ended\x20-\x20balancing\x20resumed','search','\x20not\x20responding','data','basecoin','\x20metrics:</b>\x20\x0a\x0a','number','starting-balances','<b>Bot\x20','Transaction\x20detection\x20blocked','push','delta','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20hour','initclient','getHours','uncaughtException','valid','ORDERS.LOCKED','showname','event','BUSD','offset','getDate','open','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','secure','configuration','Executed\x20','highest','includes','-events.json','cancel','fetchClosedOrders','length','DDoSProtection','recovery','logs','timeshift','\x20has\x20a\x2024h\x20drop\x20of\x20','getPortfolio','none','time','order','InvalidNonce','cancelLoading','emojibuy','type','market','Error\x20while\x20deleting\x20files:\x20','splice','bots','/backup/','closed','getMinutes','watchOrders','No\x20more\x20open\x20orders\x20-\x20','filled','Manual\x20balancing\x20required','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ORDERS.UNLOCKED','UNLOCKED','threshold','ccxt','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','7016920JOxYlE','warning','datetime','ORDERS.UNLOCKING','ask','eur','args','\x20minutes',':\x20Bot\x20','format','remainingSymbols','existsSync','apiKey','limit-high','getPortfolio(1)','\x20|\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Exchange','\x20closed\x20the\x20connection','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','value','sortBy','toUpperCase','coins','timer:','Pausing\x20for\x20','exchanges','distribution','createWriteStream','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Binance','precision','parse','map','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','keys','kill','configuration-stored','29910NBLTUc','RSA-OAEP','decrypt','***','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','placeOrder()','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','fee','getSeconds','log','orderstatus','260853fdthne','split','padStart','message','resetHistory','Order(s)\x20not\x20validated\x20after\x20','get','abs','error','\x20>\x20[DEBUG]\x20','last','Initiating\x20exchange\x20reload','watchTransactions','portfolio','Resetting\x20bot\x20history','balances','901799ryoTLW','<b>','\x20change','./version.json','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','lowdb','getCoins()','argv','write','1\x20-\x20Handle\x20open\x20orders','/USD','Limit\x20(low-margin)','startdate','page','bot','192pVoLKL','\x20not\x20available','apiSecret','amount','stringify','DAI/','Avoiding\x20continuous\x20order\x20attempts','balancing\x20resumes\x20when\x20cooldown\x20ends','sells','string','placeOrder','assign','<pre>','2\x20-\x20Handled\x20open\x20orders','-------------------------------\x0a','running','recreateCoinResults()','Net\x20','watchTrades','exchange\x20reloaded','final','\x20orders\x20in\x20less\x20than\x20','197267xGBaUS','symbols','\x20|\x20highest:\x20','3\x20-\x20handling\x20FILLED\x20order:\x20','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','yargs/yargs','EUR','getFullYear','reverse','fetchBalance','target','UNLOCKING','storeFiat','\x20portfolio:</b>\x20\x0a\x0a','progress','defaults','performance','-performance.json','openOrders','storeHeadless','botname','yyyy-MM-dd\x27T\x27HH:mm:ss','version','close','%\x20(','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','22RmGhXa','Bot\x20','recent20','loading-canceled','2.5.0','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server,\x20closing\x20code\x201006','Order\x20filled:\x20','YOYOW/','cloneDeep','XEM/BUSD','2\x20-\x20FILLED\x20known\x20order:\x20','join','exchange\x20not\x20reloaded','leftTxt','change24h','enabled','find','storeConfiguration','Error:\x20Invalid\x20argument\x20','set','/EUR','success','Fee\x20discount\x20refund\x20detected:\x20','status','2.6.0','max','apiPassword','804QLsKAP','findIndex','ongoing','trade','coin','USDT','removed','balancing\x20resumed','startnumber','rightTxt','percentage','2\x20-\x20Orders\x20unlocked','loadSymbols()','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','startprice','getMonth','Net\x20effect','limits','liquidity','has','starting-balance-','toFixed','settings','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','shift','toString','fetchOpenOrders','customId','API-key\x20format\x20invalid','Order\x20amount\x20is\x20invalid:\x20','BNB/','Market','\x20exchange','Crypt','2\x20-\x20Validate\x20orders:\x20','************','send','onepagemode','excluded','fiat','full','simple','(((.+)+)+)+$','Unknown\x20error\x20occured','changes','breakeven','getStartingBalances','timeout','emojisell','mkdirSync','emitHistory','hybrid-crypto-js','fetchTicker','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','fromCodePoint','buy','realized','/output-000.log','./config/','parseISO','netoffset','net-fiat','exec','cancelOrder','BTC','\x20order:\x20','</pre>','milliseconds','no\x20open\x20orders','AuthenticationError','sha256','-results.json','side','coin-loading-progress','yyyy/MM/dd','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','min','OrderNotFound','usd','1\x20-\x20Unlock\x20orders','\x20|\x20lock\x20orders:\x20','forEach','total','util','currency','exchange','Reset\x20|\x20','symbol','cost','initial','1\x20-\x20Validate\x20orders:\x20','1659906dbSgUV','USD','debug','change','getPortfolio(2)','cooldown','random','slice','add','indexOf','fetchTickers','48CfGuRE','ETH','headless','loadMarkets','entries','privateKey','unlinkSync','10527022KtuDyf','\x20:\x20','orderId','timestamp','bot-'];_0x2f00=function(){return _0x43324b;};return _0x2f00();}async function reloadExchange(){const _0x660f47=_0x3ffd09;logger['debug'](_0x660f47(0x1d1));while(lockOrders!=ORDERS[_0x660f47(0x30f)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x660f47(0x28e)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x333ed8=config['exchange'],_0x401017=config[_0x3ffd09(0x1a0)],_0x21111a=config[_0x3ffd09(0x1e8)],_0xc26879=config['apiPassword']){const _0x1e617c=_0x3ffd09;exchange&&await stopExchange();!supportedExchanges()[_0x1e617c(0x2ef)](_0x333ed8)&&(logHistory(_0x1e617c(0x1ce),_0x1e617c(0x215)+_0x333ed8+_0x1e617c(0x251)),killBot());const _0x59272f=ccxt[_0x333ed8['toLowerCase']()];exchange=new _0x59272f({'apiKey':_0x401017,'secret':_0x21111a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0xc26879)exchange['password']=_0xc26879;}function setStableCoins(){const _0x95440c=_0x3ffd09;let _0x119ebd=config[_0x95440c(0x2d5)]==_0x95440c(0x298)?'ETH':_0x95440c(0x271),_0x23736d=!allSymbols['includes'](_0x119ebd+_0x95440c(0x1e1))?_0x95440c(0x236):_0x95440c(0x28d),_0x5beea2=!allSymbols[_0x95440c(0x2ef)](_0x119ebd+_0x95440c(0x22a))?_0x23736d:_0x95440c(0x202);stablecoins={'eur':{'coin':''+_0x119ebd+_0x5beea2,'symbol':_0x119ebd+'/'+_0x5beea2},'usd':{'coin':''+_0x119ebd+_0x23736d,'symbol':_0x119ebd+'/'+_0x23736d}};}async function initwsCcxt(_0xdfc13){const _0x35d8c0=_0x3ffd09;_0xdfc13==null&&(_0xdfc13=[],config[_0x35d8c0(0x1d3)]['forEach'](_0x4d0339=>{const _0x3f8231=_0x35d8c0;if(!_0x4d0339[_0x3f8231(0x257)]&&_0x4d0339[_0x3f8231(0x235)]!=config['basecoin'])_0xdfc13[_0x3f8231(0x2db)](_0x4d0339[_0x3f8231(0x288)]);}));if(!_0xdfc13[_0x35d8c0(0x2ef)](stablecoins[_0x35d8c0(0x199)][_0x35d8c0(0x288)]))_0xdfc13[_0x35d8c0(0x2db)](stablecoins['eur'][_0x35d8c0(0x288)]);if(!_0xdfc13[_0x35d8c0(0x2ef)](stablecoins['usd'][_0x35d8c0(0x288)]))_0xdfc13['push'](stablecoins[_0x35d8c0(0x27f)][_0x35d8c0(0x288)]);if(config['exchange']['startsWith'](_0x35d8c0(0x1b2))){if(!_0xdfc13['includes'](_0x35d8c0(0x24f)+config[_0x35d8c0(0x2d5)]))_0xdfc13[_0x35d8c0(0x2db)](_0x35d8c0(0x24f)+config[_0x35d8c0(0x2d5)]);}loadCoins(_0xdfc13);const _0x31cc72=async _0x36c45e=>{const _0x5d695e=_0x35d8c0,_0xd44a70=await exchange[_0x5d695e(0x265)](_0x36c45e);global['ticker'][noslash(_0xd44a70[_0x5d695e(0x288)])]=_0xd44a70[_0x5d695e(0x1d0)];while(!![]){if(!botPaused)try{const _0x30c0d2=await exchange['watchTrades'](_0x36c45e);global['ticker'][noslash(_0x30c0d2[0x0]['symbol'])]=_0x30c0d2[0x0][_0x5d695e(0x2b4)],await sleep(0x3e8);}catch(_0x1057a6){if(!exchangeStopped)await handleError(_0x1057a6,_0x5d695e(0x1f8),_0x36c45e);}else await sleep(0x3e8);}},_0x115785=async _0x33beee=>{const _0xf626d5=_0x35d8c0;while(!![]){if(!botPaused)try{const _0x12cee1=await exchange[_0xf626d5(0x265)](_0x33beee);global[_0xf626d5(0x28f)][_0x12cee1['symbol']]=_0x12cee1[_0xf626d5(0x23b)],await sleep(0x3c*0x3e8);}catch(_0x93f56){if(!exchangeStopped)await handleError(_0x93f56,_0xf626d5(0x296),_0x33beee);}else await sleep(0x3e8);}},_0x4922a8=async()=>{const _0x1b630b=_0x35d8c0;while(!![]){if(!botPaused)try{const _0x2aefb7=await exchange[_0x1b630b(0x308)]();_0x2aefb7['forEach'](_0xcb751=>{updateNumberCoinsCcxt(_0xcb751);});}catch(_0x3943aa){if(!exchangeStopped)await handleError(_0x3943aa,'watchOrders');}else await sleep(0x3e8);}};_0xdfc13[_0x35d8c0(0x282)](async _0x1e8836=>{_0x31cc72(_0x1e8836),_0x115785(_0x1e8836);}),!wsEventsSet&&(wsEventsSet=!![],_0x4922a8(),watchTransactions());}async function watchTransactions(){const _0x404442=_0x3ffd09;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4bb311=await getCoins(),[_0xb104b1,_0x3b6515]=_0x4bb311;let _0x11c063=[];currentCoins[_0x404442(0x282)](_0x387e21=>{const _0xe594c5=_0x404442,_0x50e4b0=_0xb104b1[_0xe594c5(0x226)](_0x5f2cdd=>_0x5f2cdd[_0xe594c5(0x235)]==_0x387e21[_0xe594c5(0x235)]);_0x50e4b0&&(_0x387e21[_0xe594c5(0x2d7)]!=_0x50e4b0[_0xe594c5(0x2d7)]&&_0x11c063[_0xe594c5(0x2db)]({'coin':_0x387e21['coin'],'symbol':_0x387e21['symbol'],'number':Number(formatResult(_0x50e4b0['number']-_0x387e21[_0xe594c5(0x2d7)],0x8))}));});if(_0x11c063[_0x404442(0x2f3)]==0x1&&!blockTransactionDetection){logger[_0x404442(0x28e)](_0x404442(0x2ac)+lastFees['currency']+_0x404442(0x1fe)+lastFees[_0x404442(0x2ee)]);if(!lastFees[_0x404442(0x285)]||_0x11c063[0x0]['coin']!=lastFees[_0x404442(0x285)]||_0x11c063[0x0]['number']>lastFees[_0x404442(0x2ee)]){let _0x108d91;if(_0x11c063[0x0][_0x404442(0x235)]!=config[_0x404442(0x2d5)]){let _0x57b33b=global[_0x404442(0x2ae)][noslash(_0x11c063[0x0]['symbol'])];_0x108d91=_0x11c063[0x0][_0x404442(0x204)]?0x1/_0x57b33b:_0x57b33b;}else _0x108d91=0x1;_0x11c063[0x0][_0x404442(0x2b4)]=_0x108d91,delete _0x11c063[0x0][_0x404442(0x288)];let _0x1832f9=[],_0x11b4c6=[...config[_0x404442(0x243)]]||[],_0x20c21d=config[_0x404442(0x243)];_0x11b4c6[_0x404442(0x2a6)]((_0x236e7f,_0x1c32aa)=>_0x236e7f[_0x404442(0x2ab)]>_0x1c32aa[_0x404442(0x2ab)]?-0x1:_0x1c32aa[_0x404442(0x2ab)]>_0x236e7f[_0x404442(0x2ab)]?0x1:0x0);const _0x1abb0c=getDate();if(_0x11b4c6[0x0]){const _0x33b5b7=fns[_0x404442(0x1b4)](_0x11b4c6[0x0]['date'],_0x404442(0x27b),new Date()),_0x5d8278=fns[_0x404442(0x1b4)](_0x1abb0c,'yyyy/MM/dd',new Date());if(fns[_0x404442(0x2a3)](_0x33b5b7,_0x5d8278)){_0x1832f9=_0x11b4c6[0x0][_0x404442(0x25d)];const _0x4cefde=_0x1832f9[_0x404442(0x226)](_0x5a6820=>_0x5a6820[_0x404442(0x235)]==_0x11c063[0x0][_0x404442(0x235)]);_0x4cefde?(_0x4cefde[_0x404442(0x2d7)]+=_0x11c063[0x0][_0x404442(0x2d7)],_0x4cefde[_0x404442(0x2d7)]==0x0&&(_0x1832f9=_0x1832f9['filter'](_0xbd2f30=>{const _0x3cd586=_0x404442;return _0xbd2f30[_0x3cd586(0x235)]!=_0x11c063[0x0][_0x3cd586(0x235)];}))):_0x1832f9['push'](_0x11c063[0x0]);const _0x228a8a=_0x20c21d[_0x404442(0x226)](_0x3f26d6=>_0x3f26d6['date']==_0x1abb0c);_0x228a8a[_0x404442(0x25d)]=_0x1832f9;}else _0x20c21d[_0x404442(0x2db)]({'date':_0x1abb0c,'changes':[_0x11c063[0x0]]});}const _0x2de836=_0x20c21d['find'](_0x13ec72=>_0x13ec72['date']==_0x1abb0c);if(_0x2de836){let _0x4223a2=!![];_0x2de836[_0x404442(0x25d)][_0x404442(0x282)](_0x1e1767=>{const _0x9fd2e3=_0x404442;if(_0x1e1767[_0x9fd2e3(0x2d7)]!=0x0)_0x4223a2=![];}),_0x4223a2&&(_0x20c21d=_0x20c21d['filter'](_0x2c20b5=>{const _0x49cfb9=_0x404442;return _0x2c20b5[_0x49cfb9(0x2ab)]!=_0x1abb0c;}));}let _0x3faf09=dbConfig[_0x404442(0x1cc)](_0x404442(0x1e5))[_0x404442(0x226)]({'botID':botID})[_0x404442(0x1a8)]();_0x3faf09&&(dbConfig[_0x404442(0x1cc)](_0x404442(0x1e5))[_0x404442(0x226)]({'botID':botID})[_0x404442(0x1f1)]({'liquidity':_0x20c21d})['write'](),config[_0x404442(0x243)]=_0x20c21d),logHistory(_0x404442(0x22b),'Portfolio\x20change\x20detected:\x20'+Math[_0x404442(0x1cd)](_0x11c063[0x0][_0x404442(0x2d7)])+'\x20'+_0x11c063[0x0][_0x404442(0x235)]+'\x20'+(_0x11c063[0x0][_0x404442(0x2d7)]>0x0?_0x404442(0x2a4):_0x404442(0x237))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x404442(0x2ec),emittedConfiguration());}else logger[_0x404442(0x28e)](_0x404442(0x22c)+Math[_0x404442(0x1cd)](_0x11c063[0x0][_0x404442(0x2d7)])+'\x20'+_0x11c063[0x0]['coin']+'\x20'+(_0x11c063[0x0][_0x404442(0x2d7)]>0x0?_0x404442(0x2a4):_0x404442(0x237)));transactionDetected=!![],currentCoins=_0xb104b1,currentCoinsAll=_0x3b6515;}await sleep(watchTransactionsInterval);}catch(_0x52c90d){if(!exchangeStopped)await handleError(_0x52c90d,_0x404442(0x1d2));}else await sleep(0x3e8);}}async function loadSymbols(_0x1f58b3=config[_0x3ffd09(0x286)],_0x5a7e6c=![]){const _0x2fa937=_0x3ffd09;if(allSymbols&&!_0x5a7e6c)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x2fa937(0x1fd)][_0x2fa937(0x2bb)](_0x5e5665=>{const _0x15f8f4=_0x2fa937;let _0x5ef2c1=![];const _0x53ade7=exceptions[_0x1f58b3[_0x15f8f4(0x2b6)]()]||[];return _0x53ade7[_0x15f8f4(0x282)](_0x5742f8=>{if(_0x5e5665['includes'](_0x5742f8))_0x5ef2c1=!![];}),!_0x5ef2c1;});}catch(_0x48d1b3){throw _0x48d1b3;}}async function initclient(){const _0x3be9c0=_0x3ffd09;emitLoadingProgress(),proxyEmit(_0x3be9c0(0x2ec),emittedConfiguration()),proxyEmit(_0x3be9c0(0x1ae),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xb448a4=getNormalizedPerformance();emitPerformance(_0xb448a4),getStartingBalances(_0xb448a4);}async function toggleBotMode(){const _0x7d51e9=_0x3ffd09;let _0xb0f21f=dbConfig[_0x7d51e9(0x1cc)](_0x7d51e9(0x1e5))[_0x7d51e9(0x226)]({'botID':botID})['value']();if(_0xb0f21f){const _0x252af9=!_0xb0f21f[_0x7d51e9(0x299)];dbConfig[_0x7d51e9(0x1cc)](_0x7d51e9(0x1e5))[_0x7d51e9(0x226)]({'botID':botID})[_0x7d51e9(0x1f1)]({'headless':_0x252af9})['write'](),config[_0x7d51e9(0x299)]=_0x252af9,proxyEmit(_0x7d51e9(0x2ec),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5c5a15=_0x3ffd09;process[_0x5c5a15(0x255)]({'updatebotmanager':!![]},_0xd9e501=>{});}async function loadCoins(_0x21dfcc){const _0x16f47e=_0x3ffd09;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x416593,_0x336759=0x0,_0x338c07=0x0;_0x21dfcc[_0x16f47e(0x282)](_0x2ed681=>{const _0x116112=_0x16f47e;loading[_0x116112(0x19e)][_0x116112(0x2db)](_0x2ed681);}),loadingCanceled=![];let _0x26717e=![];while(_0x416593!=_0x21dfcc['length']){_0x416593=0x0,_0x21dfcc[_0x16f47e(0x282)](_0x1da591=>{const _0x47a923=_0x16f47e;if(global[_0x47a923(0x2ae)][noslash(_0x1da591)]){loading[_0x47a923(0x19e)]=loading[_0x47a923(0x19e)][_0x47a923(0x2bb)](_0x44459c=>_0x44459c!=_0x1da591);if(!watchedSymbols['includes'](_0x1da591))watchedSymbols[_0x47a923(0x2db)](_0x1da591);_0x416593++;}}),loading[_0x16f47e(0x20a)]=Math[_0x16f47e(0x2a9)](_0x416593/_0x21dfcc['length']*0x64);loading[_0x16f47e(0x20a)]!=0x64&&(_0x338c07>0x1e*0x5&&(loading[_0x16f47e(0x260)]=!![],emitLoadingProgress()),_0x338c07>0x78*0x5&&!_0x26717e&&(loading[_0x16f47e(0x2f1)]=!![],emitLoadingProgress(),_0x26717e=!![],logHistory(_0x16f47e(0x1ce),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x16f47e(0x19e)][_0x16f47e(0x221)](',\x20')+_0x16f47e(0x2aa)),logHistory('error',_0x16f47e(0x1ad)+loadCoinsRetryInterval/0xea60+_0x16f47e(0x1bf)),pidCoinReloading=setTimeout(()=>{const _0x1c9094=_0x16f47e;process[_0x1c9094(0x255)]({'stop':_0x1c9094(0x2c2)},_0x53d05e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x16f47e(0x2f1)]=!![],emitLoadingProgress();break;}else _0x416593!=_0x336759&&(_0x336759=_0x416593,emitLoadingProgress()),_0x338c07++,await sleep(0xc8);}_0x416593==_0x21dfcc[_0x16f47e(0x2f3)]&&(coinsLoaded=!![],process['send']({'status':_0x16f47e(0x225),'live':'running'},_0x51318b=>{}),_0x26717e&&logHistory(_0x16f47e(0x22b),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x52b565=_0x3ffd09;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x52b565(0x219)});}function emitLoadingProgress(){const _0x97b4ff=_0x3ffd09;proxyEmit(_0x97b4ff(0x27a),loading);}async function getFiat(){const _0x3db8e6=_0x3ffd09;let _0x17a4ff=global[_0x3db8e6(0x2ae)][stablecoins[_0x3db8e6(0x199)][_0x3db8e6(0x235)]],_0x34f79c=global['ticker'][stablecoins[_0x3db8e6(0x27f)]['coin']];return{'eur':Number(_0x17a4ff),'usd':Number(_0x34f79c)};}function capitalize(_0x3198d9){const _0x17469f=_0x3ffd09;return _0x3198d9['substring'](0x0,0x1)[_0x17469f(0x1aa)]()+_0x3198d9['substring'](0x1);}function supportedExchanges(){const _0x1efd9c=_0x3ffd09,_0x22266b=['ws',_0x1efd9c(0x296),_0x1efd9c(0x265),_0x1efd9c(0x1f8),_0x1efd9c(0x308),_0x1efd9c(0x270),'createOrder','fetchOpenOrders',_0x1efd9c(0x2f2),_0x1efd9c(0x205)];let _0xf50a55=[],_0x585b32=[],_0x201f9e=ccxt[_0x1efd9c(0x1ae)];_0x201f9e['forEach'](_0x4c13c8=>{const _0x542fdb=_0x1efd9c;try{const _0x27a40c=new ccxt[_0x4c13c8]();if(_0x27a40c[_0x542fdb(0x244)]['ws'])_0x585b32[_0x542fdb(0x2db)](_0x27a40c);}catch(_0x2ffdab){}}),_0x585b32[_0x1efd9c(0x282)](_0x28b2ff=>{const _0x45699=_0x1efd9c;let _0x4bb8a1=0x0;_0x22266b[_0x45699(0x282)](_0x186432=>{const _0x165cf9=_0x45699;_0x186432 in _0x28b2ff[_0x165cf9(0x244)]&&_0x28b2ff[_0x165cf9(0x244)][_0x186432]&&_0x4bb8a1++;}),_0x4bb8a1==_0x22266b['length']&&_0xf50a55['push'](capitalize(_0x28b2ff['id']));});let _0x1a8b7a=[];return _0x201f9e[_0x1efd9c(0x282)](_0x186cb2=>{const _0x144749=_0x1efd9c;_0x186cb2=capitalize(_0x186cb2);if(!_0xf50a55['includes'](_0x186cb2))_0x1a8b7a[_0x144749(0x2db)](_0x186cb2);}),_0xf50a55;}function setStartDatePerformance(){const _0x49c126=_0x3ffd09;if(config&&config[_0x49c126(0x243)][0x0]['changes']['length']!=0x0){const _0x43ffba=config[_0x49c126(0x243)][0x0]['changes'];dbPerformance['get'](_0x49c126(0x2d4))[_0x49c126(0x226)]({'date':config['startdate']})[_0x49c126(0x1f1)]({'coins':_0x43ffba})[_0x49c126(0x1df)]();}}async function recreateCoinResults(){const _0x7253fc=_0x3ffd09;let _0x5f5004,_0x250847=[];try{const _0x1b69ca=fns[_0x7253fc(0x19d)](fns[_0x7253fc(0x26c)](config[_0x7253fc(0x1e3)][_0x7253fc(0x2c5)](/\//g,'-')),_0x7253fc(0x211));for(const _0x4746dd of currentCoins){if(_0x4746dd['coin']!=config['basecoin']){let _0x388d18=0x0,_0x17ad39,_0x15be3f;_0x5f5004=await getAllEventOrders(_0x4746dd[_0x7253fc(0x288)]);if(_0x5f5004[_0x7253fc(0x2f3)]>0x0)_0x5f5004[_0x7253fc(0x282)](_0x5f54c5=>{const _0x2ed576=_0x7253fc,_0x45a383=_0x4746dd[_0x2ed576(0x288)][_0x2ed576(0x2ef)](config[_0x2ed576(0x2d5)]+'/');_0x250847[_0x2ed576(0x2db)]({'datetime':_0x5f54c5['datetime'],'coin':_0x4746dd[_0x2ed576(0x235)],'symbol':_0x4746dd[_0x2ed576(0x288)],'side':_0x5f54c5[_0x2ed576(0x279)],'reverse':_0x45a383,'amount':formatResult(_0x5f54c5[_0x2ed576(0x30a)],0x8),'filled':formatResult(_0x5f54c5[_0x2ed576(0x30a)],0x8),'price':formatResult(_0x5f54c5['price'],0x8)}),_0x388d18=_0x5f54c5[_0x2ed576(0x279)]=='buy'?_0x388d18+_0x5f54c5['filled']:_0x388d18-_0x5f54c5[_0x2ed576(0x30a)];if(!_0x15be3f)_0x15be3f=_0x5f54c5[_0x2ed576(0x2b4)];});_0x17ad39=_0x4746dd[_0x7253fc(0x2d7)]-_0x388d18;let _0x1adc0c;config[_0x7253fc(0x243)][_0x7253fc(0x282)](_0x4ce9f7=>{const _0x291e56=_0x7253fc;!_0x1adc0c&&(_0x1adc0c=_0x4ce9f7[_0x291e56(0x25d)][_0x291e56(0x226)](_0x5967fc=>_0x5967fc[_0x291e56(0x235)]==_0x4746dd[_0x291e56(0x235)]),_0x1adc0c&&(_0x17ad39=_0x1adc0c[_0x291e56(0x2d7)],_0x15be3f=_0x1adc0c[_0x291e56(0x2b4)]));});let _0x2c97e4=dbCoinResults[_0x7253fc(0x1cc)](_0x7253fc(0x1ab))['find']({'coin':_0x4746dd['coin']})['value']();_0x2c97e4={'coin':_0x4746dd[_0x7253fc(0x235)],'number':_0x17ad39,'breakeven':_0x15be3f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x7253fc(0x1cc)](_0x7253fc(0x1ab))[_0x7253fc(0x226)]({'coin':_0x4746dd[_0x7253fc(0x235)]})[_0x7253fc(0x1f1)](_0x2c97e4)[_0x7253fc(0x1df)]();}}_0x250847[_0x7253fc(0x2a6)]((_0x2c663a,_0x50b9e8)=>_0x2c663a[_0x7253fc(0x196)]>_0x50b9e8[_0x7253fc(0x196)]?0x1:_0x50b9e8['datetime']>_0x2c663a[_0x7253fc(0x196)]?-0x1:0x0);let _0x2d30c7=0x0;for(let _0x376314 of _0x250847){await updateCoinResults(_0x376314,!![]);}}catch(_0x4e75b4){await handleError(_0x4e75b4,_0x7253fc(0x1f6));}}async function getAllEventOrders(_0x4d1af2){const _0xe57450=_0x3ffd09;let _0x584371=[],_0x315e6b=dbLogs[_0xe57450(0x1cc)](_0xe57450(0x2f6))['filter'](_0x3a2cd7=>{const _0x56aad9=_0xe57450,_0x556bf5=_0x3a2cd7['event']['toLowerCase']();return _0x556bf5[_0x56aad9(0x2ef)](_0x4d1af2[_0x56aad9(0x2b6)]())&&(_0x556bf5['includes']('market')&&_0x556bf5['includes'](_0x56aad9(0x2fc))||_0x556bf5[_0x56aad9(0x2ef)]('filled')&&_0x556bf5[_0x56aad9(0x2ef)]('order'));})[_0xe57450(0x1a9)]('time')['value']();return _0x315e6b[_0xe57450(0x282)](_0x4ae941=>{const _0x274878=_0xe57450,_0x4798d2=_0x4ae941['event']['includes'](_0x274878(0x2b2))?_0x274878(0x2b2):_0x274878(0x268),_0xed4670=/#([0-9]|\.)+\s/i,_0x5b4a47=Number(_0xed4670[_0x274878(0x26f)](_0x4ae941[_0x274878(0x2e5)])[0x0][_0x274878(0x293)](0x1)),_0x218496=/@([0-9]|\.)+$/i,_0x14cd2a=Number(_0x218496['exec'](_0x4ae941['event'])[0x0][_0x274878(0x293)](0x1));_0x584371['push']({'datetime':_0x4ae941['time'],'coin':symbolToCoin(_0x4d1af2),'symbol':_0x4d1af2,'side':_0x4798d2,'amount':_0x5b4a47,'filled':_0x5b4a47,'price':_0x14cd2a});}),_0x584371;}async function getAllOrders(_0xe796f,_0x65b6b){const _0x191362=_0x3ffd09;let _0x42a8b9=[];while(_0x65b6b<exchange[_0x191362(0x274)]()){const _0x5804f4=0x1f4,_0x49fcb8=await exchange['fetchClosedOrders'](_0xe796f,_0x65b6b,_0x5804f4);if(_0x49fcb8['length'])_0x65b6b=_0x49fcb8[_0x49fcb8[_0x191362(0x2f3)]-0x1][_0x191362(0x2a1)]+0x1,_0x42a8b9=_0x42a8b9['concat'](_0x49fcb8);else break;}return _0x42a8b9;}async function validate24hChanges(){const _0x2251bb=_0x3ffd09;for(const _0x121526 of currentCoins){if(_0x121526[_0x2251bb(0x235)]!=config[_0x2251bb(0x2d5)]){let _0x6b6369;_0x121526[_0x2251bb(0x204)]?_0x6b6369=formatResult((0x1/(global[_0x2251bb(0x28f)][noslash(_0x121526[_0x2251bb(0x288)])]/0x64+0x1)-0x1)*0x64,0x3):_0x6b6369=global[_0x2251bb(0x28f)][noslash(_0x121526[_0x2251bb(0x288)])],_0x6b6369<config[_0x2251bb(0x224)]&&(logHistory(_0x2251bb(0x1ce),_0x121526[_0x2251bb(0x235)]+_0x2251bb(0x2f8)+_0x6b6369+'%'),logHistory(_0x2251bb(0x1ce),_0x2251bb(0x23e)),logHistory('error',_0x2251bb(0x30d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x514532,_0x521700){const _0x3fd07b=_0x3ffd09;if(!_0x514532)return!![];const _0x240667=_0x521700[_0x3fd07b(0x1c7)]('.'),_0xaa1650=_0x514532['split']('.');for(var _0x3f6f31=0x0;_0x3f6f31<_0xaa1650[_0x3fd07b(0x2f3)];_0x3f6f31++){const _0x217dc8=~~_0xaa1650[_0x3f6f31],_0x31eb8d=~~_0x240667[_0x3f6f31];if(_0x217dc8<_0x31eb8d)return!![];if(_0x217dc8>_0x31eb8d)return![];}return![];}async function oneTimeMigration(){const _0x23fb6c=_0x3ffd09;let _0x3757ff=dbLogs[_0x23fb6c(0x1cc)](_0x23fb6c(0x212))[_0x23fb6c(0x1a8)]();if(isOlderVersion(_0x3757ff,'2.3.5')){let _0x18c012=[];const _0x5a6546=dbLogs[_0x23fb6c(0x1cc)](_0x23fb6c(0x2f6))['value']();_0x5a6546['forEach'](_0x585ea2=>{const _0x2532e2=_0x23fb6c;_0x18c012[_0x2532e2(0x2db)]({'time':_0x585ea2['time'],'type':_0x585ea2['type'],'event':_0x585ea2[_0x2532e2(0x2e5)]});}),dbLogs[_0x23fb6c(0x1cc)]('logs')[_0x23fb6c(0x1f1)](_0x18c012)[_0x23fb6c(0x1df)]();}let _0x3a1bbb=dbConfig[_0x23fb6c(0x1cc)](_0x23fb6c(0x212))['value']();if(isOlderVersion(_0x3a1bbb,_0x23fb6c(0x2a7))){let _0x5c0512=dbConfig[_0x23fb6c(0x1cc)](_0x23fb6c(0x1e5))[_0x23fb6c(0x226)]({'botID':botID})['value']();if(_0x5c0512){let _0x2275d4=[];_0x5c0512[_0x23fb6c(0x1d3)]['forEach'](_0x3bbfd5=>{const _0x32be28=_0x23fb6c;_0x2275d4[_0x32be28(0x2db)]({'coin':_0x3bbfd5[_0x32be28(0x235)],'number':_0x3bbfd5[_0x32be28(0x239)],'price':_0x3bbfd5[_0x32be28(0x23f)]}),delete _0x3bbfd5[_0x32be28(0x239)],delete _0x3bbfd5[_0x32be28(0x23f)];});if(_0x2275d4['length']!==0x0)fs[_0x23fb6c(0x2c7)](configbackuppath+(_0x23fb6c(0x245)+botID+_0x23fb6c(0x2b0)),JSON['stringify'](_0x2275d4,null,0x4),function(_0x1a2230){if(_0x1a2230){}});const _0x3476e6=(_0x437c44,_0x358c00)=>{const _0x18bc26=_0x23fb6c;let _0x26d8e8=[];_0x358c00['forEach'](_0x54ce36=>{const _0x106802=_0x1b90,_0x3fda38=_0x437c44['find'](_0x1abca5=>_0x1abca5[_0x106802(0x235)]==_0x54ce36['coin']);if(!_0x3fda38)_0x26d8e8[_0x106802(0x2db)](_0x54ce36);});let _0x17ccab=[];return _0x437c44[_0x18bc26(0x282)](_0x47a61d=>{const _0x575a09=_0x18bc26,_0x93d991=_0x358c00[_0x575a09(0x226)](_0xfb9872=>_0xfb9872[_0x575a09(0x235)]==_0x47a61d['coin']);if(!_0x93d991||_0x93d991[_0x575a09(0x2d7)]==0x0&&_0x47a61d[_0x575a09(0x2d7)]!=0x0)_0x17ccab[_0x575a09(0x2db)](_0x47a61d);}),{'missingDay1':_0x26d8e8,'notInDay2':_0x17ccab};},_0x389ee4=dbPerformance[_0x23fb6c(0x1cc)](_0x23fb6c(0x2d4))['cloneDeep']()[_0x23fb6c(0x1a8)]();if(_0x389ee4[_0x23fb6c(0x2f3)]>0x1){const {missingDay1:_0x5c26bd,notInDay2:_0x3c71d0}=_0x3476e6(_0x2275d4,_0x389ee4[0x1][_0x23fb6c(0x1ab)]);_0x2275d4=[..._0x2275d4,..._0x5c26bd],_0x3c71d0[_0x23fb6c(0x282)](_0xea56d4=>{const _0x46f5bd=_0x23fb6c;let _0x3b0a60=_0x2275d4[_0x46f5bd(0x232)](_0x20eb63=>_0x20eb63['coin']==_0xea56d4[_0x46f5bd(0x235)]);_0x3b0a60!=-0x1&&_0x2275d4[_0x46f5bd(0x303)](_0x3b0a60,0x1);});}_0x2275d4[_0x23fb6c(0x2a6)]((_0x41a018,_0x135a2e)=>_0x41a018[_0x23fb6c(0x235)]>_0x135a2e['coin']?0x1:_0x135a2e[_0x23fb6c(0x235)]>_0x41a018['coin']?-0x1:0x0);let _0x5c3e80=[{'date':_0x5c0512[_0x23fb6c(0x1e3)],'changes':_0x2275d4}];_0x389ee4[_0x23fb6c(0x2f3)]>0x2&&_0x389ee4['forEach']((_0x7eae59,_0x234c62)=>{const _0x4fb6c2=_0x23fb6c;if(_0x234c62>0x0&&_0x234c62<_0x389ee4[_0x4fb6c2(0x2f3)]-0x1){const {missingDay1:_0x368555,notInDay2:_0x12626a}=_0x3476e6(_0x389ee4[_0x234c62][_0x4fb6c2(0x1ab)],_0x389ee4[_0x234c62+0x1][_0x4fb6c2(0x1ab)]);_0x2275d4=[],(_0x368555[_0x4fb6c2(0x2f3)]!=0x0||_0x12626a['length']!=0x0)&&(_0x368555[_0x4fb6c2(0x2f3)]!=0x0&&_0x2275d4['push'](..._0x368555),_0x12626a['length']!=0x0&&(_0x12626a['forEach'](_0x575c0f=>{const _0x4a8177=_0x4fb6c2;_0x575c0f[_0x4a8177(0x2d7)]=-_0x575c0f[_0x4a8177(0x2d7)];}),_0x2275d4[_0x4fb6c2(0x2db)](..._0x12626a)),_0x2275d4[_0x4fb6c2(0x2a6)]((_0x18ddd6,_0x21c9ff)=>_0x18ddd6[_0x4fb6c2(0x235)]>_0x21c9ff[_0x4fb6c2(0x235)]?0x1:_0x21c9ff[_0x4fb6c2(0x235)]>_0x18ddd6[_0x4fb6c2(0x235)]?-0x1:0x0),_0x5c3e80['push']({'date':_0x389ee4[_0x234c62+0x1]['date'],'changes':_0x2275d4}));}}),dbConfig['get'](_0x23fb6c(0x1e5))['find']({'botID':botID})[_0x23fb6c(0x1f1)]({..._0x5c0512,'liquidity':_0x5c3e80})[_0x23fb6c(0x1df)]();}}if(isOlderVersion(_0x3a1bbb,_0x23fb6c(0x22e))){let _0x25829a=dbConfig[_0x23fb6c(0x1cc)](_0x23fb6c(0x1e5))['find']({'botID':botID})['value']();if(_0x25829a){const _0x4178e3=_0x25829a[_0x23fb6c(0x286)],_0x3939cf=_0x4178e3?capitalize(_0x4178e3):'Binance';dbConfig[_0x23fb6c(0x1cc)]('bot')[_0x23fb6c(0x226)]({'botID':botID})[_0x23fb6c(0x1f1)]({'exchange':_0x3939cf})['write']();}}let _0x39e6c7=dbPerformance[_0x23fb6c(0x1cc)](_0x23fb6c(0x212))[_0x23fb6c(0x1a8)]();isOlderVersion(_0x39e6c7,_0x23fb6c(0x2a7))&&setStartDatePerformance();let _0x46467b=dbCoinResults[_0x23fb6c(0x1cc)](_0x23fb6c(0x212))[_0x23fb6c(0x1a8)]();if(isOlderVersion(_0x46467b,_0x23fb6c(0x21a))){let _0x3b7531=dbCoinResults[_0x23fb6c(0x1cc)](_0x23fb6c(0x1ab))[_0x23fb6c(0x1a8)]();if(_0x3b7531['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x140410=_0x3ffd09;dbConfig[_0x140410(0x229)](_0x140410(0x212),serverversion)[_0x140410(0x1df)](),dbPerformance[_0x140410(0x229)](_0x140410(0x212),serverversion)[_0x140410(0x1df)](),dbLogs[_0x140410(0x229)](_0x140410(0x212),serverversion)[_0x140410(0x1df)](),dbCoinResults[_0x140410(0x229)](_0x140410(0x212),serverversion)['write']();}function getConfiguration(_0x253b88){const _0x55b2ac=_0x3ffd09;let _0x4a9bee=dbConfig['get'](_0x55b2ac(0x1e5))[_0x55b2ac(0x226)]({'botID':_0x253b88})[_0x55b2ac(0x1a8)]();if(_0x4a9bee){let _0x311b80=![];typeof _0x4a9bee[_0x55b2ac(0x310)]==_0x55b2ac(0x1ef)&&(_0x4a9bee={..._0x4a9bee,'threshold':Number(_0x4a9bee[_0x55b2ac(0x310)])},_0x311b80=!![]),_0x4a9bee[_0x55b2ac(0x224)]==null&&(_0x4a9bee={..._0x4a9bee,'change24h':-0x14},_0x311b80=!![]),!_0x4a9bee[_0x55b2ac(0x258)]&&(_0x4a9bee={..._0x4a9bee,'fiat':_0x55b2ac(0x28d)},_0x311b80=!![]),!_0x4a9bee[_0x55b2ac(0x256)]&&(_0x4a9bee={..._0x4a9bee,'onepagemode':settings[_0x55b2ac(0x256)]},_0x311b80=!![]),_0x311b80&&(_0x4a9bee={'botID':_0x4a9bee['botID'],'exchange':_0x4a9bee[_0x55b2ac(0x286)],'apiKey':_0x4a9bee[_0x55b2ac(0x1a0)],'apiSecret':_0x4a9bee[_0x55b2ac(0x1e8)],'apiPassword':_0x4a9bee[_0x55b2ac(0x230)],'basecoin':_0x4a9bee[_0x55b2ac(0x2d5)],'botname':_0x4a9bee[_0x55b2ac(0x210)],'showname':_0x4a9bee['showname'],'threshold':_0x4a9bee[_0x55b2ac(0x310)],'ordertype':_0x4a9bee['ordertype'],'timeout':_0x4a9bee[_0x55b2ac(0x260)],'fiat':_0x4a9bee[_0x55b2ac(0x258)],'startdate':_0x4a9bee[_0x55b2ac(0x1e3)],'recreate':_0x4a9bee['recreate'],'timeshift':_0x4a9bee[_0x55b2ac(0x2f7)],'onepagemode':_0x4a9bee['onepagemode'],'headless':_0x4a9bee[_0x55b2ac(0x299)],'cooldown':_0x4a9bee[_0x55b2ac(0x291)],'change24h':_0x4a9bee['change24h'],'emojibuy':_0x4a9bee[_0x55b2ac(0x2ff)],'emojisell':_0x4a9bee[_0x55b2ac(0x261)],'portfolio':_0x4a9bee[_0x55b2ac(0x1d3)],'liquidity':_0x4a9bee['liquidity'],'openOrders':_0x4a9bee['openOrders']},dbConfig[_0x55b2ac(0x1cc)]('bot')[_0x55b2ac(0x2b8)]()[_0x55b2ac(0x1df)](),dbConfig[_0x55b2ac(0x1cc)]('bot')[_0x55b2ac(0x2db)](_0x4a9bee)[_0x55b2ac(0x1df)]());}else _0x4a9bee={'botID':_0x253b88,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x55b2ac(0x217)+_0x253b88,'showname':![],'threshold':0x3,'ordertype':_0x55b2ac(0x301),'timeout':0x14,'fiat':_0x55b2ac(0x28d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x55b2ac(0x2f7)],'onepagemode':settings[_0x55b2ac(0x256)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4a9bee;}function emittedConfiguration(){const _0x46bb87=_0x3ffd09;let _0x13f0bb;if(config[_0x46bb87(0x1a0)]=='')_0x13f0bb={...config,'configstate':'initial'};else config[_0x46bb87(0x1a0)]==_0x46bb87(0x1bd)?_0x13f0bb={...config,'configstate':_0x46bb87(0x2f5)}:(_0x13f0bb={...config,'apiKey':'************','apiSecret':_0x46bb87(0x254)},config[_0x46bb87(0x230)]&&(_0x13f0bb[_0x46bb87(0x230)]='************'));return _0x13f0bb;}function getSettings(){const _0x1fe5a8=_0x3ffd09;return dbSettings[_0x1fe5a8(0x1cc)](_0x1fe5a8(0x247))['value']();}function getSecure(){const _0x1a3f3c=_0x3ffd09;return dbSecure[_0x1a3f3c(0x1cc)](_0x1a3f3c(0x2eb))[_0x1a3f3c(0x1a8)]()||{};}function updateTimeshift(_0x4997ad){const _0x69b8fb=_0x3ffd09;let _0x446ff9=dbConfig[_0x69b8fb(0x1cc)]('bot')['find']({'botID':botID})[_0x69b8fb(0x1a8)]();_0x446ff9&&dbConfig['get'](_0x69b8fb(0x1e5))[_0x69b8fb(0x226)]({'botID':botID})[_0x69b8fb(0x1f1)]({'timeshift':_0x4997ad})[_0x69b8fb(0x1df)](),config[_0x69b8fb(0x2f7)]=_0x4997ad,proxyEmit(_0x69b8fb(0x2ec),emittedConfiguration());}function updateOnepagemode(_0x4e3344){const _0xf8f97b=_0x3ffd09;let _0x3ee259=dbConfig['get']('bot')[_0xf8f97b(0x226)]({'botID':botID})[_0xf8f97b(0x1a8)]();_0x3ee259&&dbConfig[_0xf8f97b(0x1cc)](_0xf8f97b(0x1e5))[_0xf8f97b(0x226)]({'botID':botID})[_0xf8f97b(0x1f1)]({'onepagemode':_0x4e3344})[_0xf8f97b(0x1df)](),config[_0xf8f97b(0x256)]=_0x4e3344,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1ea58f){const _0x49dc45=_0x3ffd09;logger['debug']('Saving\x20configuration'),blockTransactionDetection=!![],logger[_0x49dc45(0x28e)](_0x49dc45(0x2da));let _0x5d841c=[],_0x1ed6d7=![],_0x1aa5a1=[];_0x1ea58f[_0x49dc45(0x1d3)][_0x49dc45(0x282)](_0x1021b3=>{const _0x29ae9c=_0x49dc45;if(!_0x1021b3[_0x29ae9c(0x257)]&&_0x1021b3[_0x29ae9c(0x235)]!=_0x1ea58f[_0x29ae9c(0x2d5)])_0x1aa5a1[_0x29ae9c(0x2db)](_0x1021b3[_0x29ae9c(0x288)]);}),_0x1aa5a1[_0x49dc45(0x282)](_0x58a457=>{const _0x50760c=_0x49dc45,_0x453f51=watchedSymbols[_0x50760c(0x2ef)](_0x58a457);!_0x453f51&&_0x5d841c[_0x50760c(0x2db)](_0x58a457);});_0x5d841c[_0x49dc45(0x2f3)]>0x0?_0x1ed6d7=!![]:currentCoins[_0x49dc45(0x282)](_0xb030ba=>{const _0x2ac87e=_0x49dc45;if(_0xb030ba[_0x2ac87e(0x235)]!=config[_0x2ac87e(0x2d5)]){const _0x185863=_0x1aa5a1[_0x2ac87e(0x226)](_0x21047a=>_0x21047a==_0xb030ba[_0x2ac87e(0x288)]);!_0x185863&&(_0x1ed6d7=!![]);}});let _0x1e71b0=dbConfig['get'](_0x49dc45(0x1e5))[_0x49dc45(0x226)]({'botID':botID})[_0x49dc45(0x1a8)]();_0x1ea58f={..._0x1ea58f,'apiKey':crypt[_0x49dc45(0x1bc)](secure['privateKey'],_0x1ea58f[_0x49dc45(0x1a0)])[_0x49dc45(0x1c9)],'apiSecret':crypt[_0x49dc45(0x1bc)](secure[_0x49dc45(0x29c)],_0x1ea58f[_0x49dc45(0x1e8)])[_0x49dc45(0x1c9)]};_0x1ea58f[_0x49dc45(0x230)]&&(_0x1ea58f[_0x49dc45(0x230)]=crypt[_0x49dc45(0x1bc)](secure[_0x49dc45(0x29c)],_0x1ea58f['apiPassword'])[_0x49dc45(0x1c9)]);let _0x468089=![];_0x1e71b0?(_0x1ea58f['apiKey']=='************'?_0x1ea58f[_0x49dc45(0x1a0)]=config['apiKey']:_0x468089=!![],_0x1ea58f[_0x49dc45(0x1e8)]==_0x49dc45(0x254)?_0x1ea58f[_0x49dc45(0x1e8)]=config['apiSecret']:_0x468089=!![],_0x1ea58f['apiPassword']==_0x49dc45(0x254)?_0x1ea58f[_0x49dc45(0x230)]=config[_0x49dc45(0x230)]:_0x468089=!![],dbConfig['get'](_0x49dc45(0x1e5))['find']({'botID':botID})[_0x49dc45(0x1f1)](_0x1ea58f)[_0x49dc45(0x1df)]()):(dbConfig[_0x49dc45(0x1cc)](_0x49dc45(0x1e5))['push'](_0x1ea58f)[_0x49dc45(0x1df)](),_0x468089=!![],process[_0x49dc45(0x255)]({'status':_0x49dc45(0x225),'live':_0x49dc45(0x1f5)},_0xc1a3a3=>{}));config={..._0x1ea58f},setStartDatePerformance(),process[_0x49dc45(0x255)]({'botname':_0x1ea58f[_0x49dc45(0x210)]},_0x178bd4=>{}),updateBotManager(),initialPerformanceStored=![],proxyEmit(_0x49dc45(0x1b9)),await initCoinResults();if(_0x468089)await reset(_0x5d841c,!![]);else{if(_0x1ed6d7)await reset(_0x5d841c,![]);else{if(pidBalances)clearTimeout(pidBalances);getBalances();}}blockTransactionDetection=![],logger[_0x49dc45(0x28e)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x460793){const _0x526a96=_0x3ffd09,_0x56f1c6={...config,'headless':_0x460793[_0x526a96(0x299)]};let _0x232c5b=dbConfig[_0x526a96(0x1cc)](_0x526a96(0x1e5))[_0x526a96(0x226)]({'botID':botID})[_0x526a96(0x1a8)]();_0x232c5b&&dbConfig[_0x526a96(0x1cc)](_0x526a96(0x1e5))['find']({'botID':botID})[_0x526a96(0x1f1)](_0x56f1c6)[_0x526a96(0x1df)](),config={..._0x56f1c6},updateBotManager(),proxyEmit(_0x526a96(0x2ec),emittedConfiguration());}async function storeFiat(_0x283168){const _0x19ca35=_0x3ffd09,_0xf8ca62={...config,'fiat':_0x283168};let _0x5e3cb6=dbConfig[_0x19ca35(0x1cc)](_0x19ca35(0x1e5))['find']({'botID':botID})[_0x19ca35(0x1a8)]();_0x5e3cb6&&dbConfig['get'](_0x19ca35(0x1e5))[_0x19ca35(0x226)]({'botID':botID})['assign'](_0xf8ca62)[_0x19ca35(0x1df)](),config={..._0xf8ca62},proxyEmit(_0x19ca35(0x2ec),emittedConfiguration());}function _0x1b90(_0xe30d7f,_0x3dd8c8){const _0x4c08a3=_0x2f00();return _0x1b90=function(_0x5ce727,_0x31da54){_0x5ce727=_0x5ce727-0x192;let _0x2f0098=_0x4c08a3[_0x5ce727];return _0x2f0098;},_0x1b90(_0xe30d7f,_0x3dd8c8);}function resetHistory(){const _0x50a84d=_0x3ffd09;logger['full'](_0x50a84d(0x1d4));try{if(fs[_0x50a84d(0x19f)](path['join'](configpath,_0x50a84d(0x2a2)+botID+_0x50a84d(0x2f0))))fs['unlinkSync'](path[_0x50a84d(0x221)](configpath,_0x50a84d(0x2a2)+botID+_0x50a84d(0x2f0)));if(fs['existsSync'](path['join'](configpath,_0x50a84d(0x2a2)+botID+_0x50a84d(0x20d))))fs[_0x50a84d(0x29d)](path[_0x50a84d(0x221)](configpath,_0x50a84d(0x2a2)+botID+_0x50a84d(0x20d)));if(fs['existsSync'](path['join'](configpath,_0x50a84d(0x2a2)+botID+_0x50a84d(0x278))))fs[_0x50a84d(0x29d)](path[_0x50a84d(0x221)](configpath,_0x50a84d(0x2a2)+botID+'-results.json'));}catch(_0x285b38){if(_0x285b38)logger[_0x50a84d(0x259)](_0x50a84d(0x302),_0x285b38);}const _0x2a5325=getDate();let _0x3270a4=[];currentCoins[_0x50a84d(0x282)](_0x42f732=>{const _0x3358b3=_0x50a84d;_0x3270a4[_0x3358b3(0x2db)]({'coin':_0x42f732[_0x3358b3(0x235)],'number':_0x42f732['number'],'price':_0x42f732['last']});});let _0xcd36ca=dbConfig[_0x50a84d(0x1cc)](_0x50a84d(0x1e5))[_0x50a84d(0x226)]({'botID':botID})[_0x50a84d(0x1a8)]();_0xcd36ca&&(dbConfig[_0x50a84d(0x1cc)](_0x50a84d(0x1e5))['find']({'botID':botID})[_0x50a84d(0x1f1)]({'liquidity':[{'date':_0x2a5325,'changes':_0x3270a4}]})[_0x50a84d(0x1df)](),config[_0x50a84d(0x243)]=[]),process[_0x50a84d(0x255)]({'stop':_0x50a84d(0x2c2)},_0x49eb51=>{});}function noslash(_0x543327){const _0x1109e3=_0x3ffd09;return _0x543327[_0x1109e3(0x2c5)]('/','');}function updateHighestFee(_0x48e651,_0x5765c){const _0xa110c=_0x3ffd09;lastFees[_0xa110c(0x285)]=_0x48e651,lastFees[_0xa110c(0x218)]['length']===0x14&&lastFees[_0xa110c(0x218)][_0xa110c(0x249)](),lastFees['recent20'][_0xa110c(0x2db)](_0x5765c),lastFees['highest']=Math[_0xa110c(0x22f)](...lastFees[_0xa110c(0x218)]);}async function updateNumberCoinsCcxt(_0x3bf455){const _0xd13806=_0x3ffd09;logger[_0xd13806(0x28e)]('0\x20-\x20EXECUTION:\x20'+_0x3bf455[_0xd13806(0x288)]+'\x20|\x20'+_0x3bf455['status']+'\x20|\x20'+_0x3bf455['id']+_0xd13806(0x1a3)+_0x3bf455[_0xd13806(0x2cd)]);let _0x360bec=_0x3bf455[_0xd13806(0x22d)],_0x1100f0=![];currentCoins[_0xd13806(0x282)](_0x3c20b2=>{const _0x2ebcf3=_0xd13806;_0x3c20b2[_0x2ebcf3(0x288)]==_0x3bf455['symbol']&&(_0x1100f0=!![]);});if(!_0x1100f0)return;const _0x45ec38=currentCoins[_0xd13806(0x226)](_0x407bca=>_0x407bca[_0xd13806(0x288)]==_0x3bf455[_0xd13806(0x288)]),_0x28fd8f=_0x1da8ad=>{const _0x10b22e=_0xd13806;if(_0x45ec38)_0x45ec38[_0x10b22e(0x1c5)]=_0x1da8ad;};if(_0x360bec==_0xd13806(0x2e9))_0x28fd8f('open');else{if(_0x360bec==_0xd13806(0x2a8)){_0x28fd8f('canceled');const _0x295399=await getCoins();[currentCoins,currentCoinsAll]=_0x295399,await getOpenOrders(),handleOpenOrders();}else{if(_0x360bec==_0xd13806(0x306)){logger['debug'](_0xd13806(0x2b5)+_0x3bf455[_0xd13806(0x288)]+_0xd13806(0x1a3)+_0x3bf455[_0xd13806(0x30a)]+_0xd13806(0x1a3)+_0x3bf455['id']+'\x20|\x20'+_0x3bf455[_0xd13806(0x2cd)]);let _0x507f4a=![];if(lastOrders)lastOrders[_0xd13806(0x282)](async _0x4a95cb=>{const _0x1abc32=_0xd13806;if(_0x4a95cb[_0x1abc32(0x24c)]==_0x3bf455['clientOrderId']){logger['debug'](_0x1abc32(0x220)+_0x3bf455[_0x1abc32(0x2cd)]),_0x507f4a=!![];if(_0x4a95cb[_0x1abc32(0x30a)]==0x0){logger[_0x1abc32(0x28e)](_0x1abc32(0x1ff)+_0x3bf455['clientOrderId']);_0x3bf455['average']?_0x4a95cb[_0x1abc32(0x2b4)]=_0x3bf455[_0x1abc32(0x2ca)]:_0x4a95cb[_0x1abc32(0x2b4)]=_0x3bf455[_0x1abc32(0x2b4)];_0x4a95cb[_0x1abc32(0x30a)]=_0x3bf455[_0x1abc32(0x30a)],_0x4a95cb[_0x1abc32(0x1c2)]={'currency':_0x3bf455[_0x1abc32(0x1c2)]?_0x3bf455['fee']['currency']:null,'cost':_0x3bf455[_0x1abc32(0x1c2)]?_0x3bf455[_0x1abc32(0x1c2)][_0x1abc32(0x289)]:0x0},updateHighestFee(_0x4a95cb[_0x1abc32(0x1c2)][_0x1abc32(0x285)],_0x4a95cb[_0x1abc32(0x1c2)][_0x1abc32(0x289)]),_0x28fd8f(_0x1abc32(0x30a)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0xe277b2=await getCoins();[currentCoins,currentCoinsAll]=_0xe277b2;}await updateCoinResults(_0x4a95cb);}}});if(!_0x507f4a){logger[_0xd13806(0x28e)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x3bf455['id']),_0x28fd8f(_0xd13806(0x30a));const _0x5274fc=await getCoins();[currentCoins,currentCoinsAll]=_0x5274fc,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x137680=JSON[_0xd13806(0x1b4)](lastBalances[_0xd13806(0x1d3)]);const _0xa97822=_0x137680['find'](_0x4fb3b1=>_0x4fb3b1[_0xd13806(0x288)]==_0x3bf455[_0xd13806(0x288)]);if(_0xa97822){if(_0x360bec=='open')_0xa97822[_0xd13806(0x1c5)]=_0xa97822[_0xd13806(0x1c5)]==_0xd13806(0x30a)?_0xd13806(0x30a):_0xd13806(0x2e9);else{if(_0x360bec=='canceled')_0xa97822[_0xd13806(0x1c5)]=_0xa97822[_0xd13806(0x1c5)]==_0xd13806(0x30a)?_0xd13806(0x30a):_0xd13806(0x2a8);else _0x360bec==_0xd13806(0x306)&&(_0xa97822[_0xd13806(0x1c5)]=_0xd13806(0x30a));}}lastBalances={...lastBalances,'portfolio':JSON[_0xd13806(0x1ea)](_0x137680)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3a53b2=_0x3ffd09;await getOpenOrders();let _0x4c36ca=![];currentCoins[_0x3a53b2(0x282)](_0x3e184c=>{const _0x29f008=_0x3a53b2;_0x4c36ca=allOpenOrders[_0x29f008(0x226)](_0x3987ba=>_0x3987ba['symbol']==_0x3e184c['symbol']),_0x3e184c['orderstatus']=_0x4c36ca?_0x29f008(0x2e9):_0x29f008(0x2fa);});}async function getCoins(_0x47e831=!![],_0x113102=config[_0x3ffd09(0x2d5)]){const _0x1e4708=_0x3ffd09;let _0x5ce1ec,_0x11afed=[],_0x32060c=[],_0x3326a5=[],_0x2ef864=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5ce1ec=await exchange[_0x1e4708(0x205)](),mybalances=_0x5ce1ec[_0x1e4708(0x283)];for(const [_0x351cf4,_0x3c2028]of Object[_0x1e4708(0x29b)](mybalances)){_0x2ef864[_0x1e4708(0x2db)](_0x351cf4);}if(_0x113102=='')for(const [_0xb30a37,_0x2e1879]of Object[_0x1e4708(0x29b)](mybalances)){_0x2e1879[_0x1e4708(0x24a)]()!=0x0&&_0x32060c['push']({'coin':_0xb30a37});}else{let _0x336847=![];for(const [_0x433042,_0x1f1505]of Object[_0x1e4708(0x29b)](mybalances)){if(_0x2ef864[_0x1e4708(0x2ef)](_0x433042)){const _0x207b4b=config[_0x1e4708(0x1d3)][_0x1e4708(0x226)](_0x482130=>_0x482130['coin']==_0x433042),_0xc7a9fe=_0x433042+'/'+_0x113102,_0x4d5bde=_0x113102+'/'+_0x433042,_0x26768f=currentCoins[_0x1e4708(0x226)](_0x28b0f0=>_0x28b0f0[_0x1e4708(0x235)]==_0x433042);_0x336847=![];if((_0x1f1505['toString']()!=0x0||_0x207b4b)&&(allSymbols['includes'](_0xc7a9fe)||_0x433042==_0x113102))_0x433042!=_0x113102&&_0x11afed[_0x1e4708(0x2db)](_0xc7a9fe),_0x32060c[_0x1e4708(0x2db)]({'coin':_0x433042,'symbol':_0xc7a9fe,'reverse':![],'number':Math[_0x1e4708(0x22f)](_0x1f1505+(_0x207b4b&&_0x207b4b['offset']||0x0),0x0),'orderstatus':_0x26768f?_0x26768f[_0x1e4708(0x1c5)]:_0x1e4708(0x2fa)});else(_0x1f1505[_0x1e4708(0x24a)]()!=0x0||_0x207b4b)&&allSymbols[_0x1e4708(0x2ef)](_0x4d5bde)&&(_0x433042!=_0x113102&&_0x11afed[_0x1e4708(0x2db)](_0x4d5bde),_0x32060c[_0x1e4708(0x2db)]({'coin':_0x433042,'symbol':_0x4d5bde,'reverse':!![],'number':Math['max'](_0x1f1505+(_0x207b4b&&_0x207b4b[_0x1e4708(0x2e7)]||0x0),0x0),'orderstatus':_0x26768f?_0x26768f[_0x1e4708(0x1c5)]:'none'}));}}}}catch(_0x176739){if(!_0x47e831)handleErrorNoStop(_0x176739,_0x1e4708(0x1dd));else await handleError(_0x176739,_0x1e4708(0x1dd));}return _0x3326a5=cloneDeep(_0x32060c),_0x32060c=_0x32060c['filter'](_0x43ed9a=>{const _0x31535c=_0x1e4708,_0x8392a0=config[_0x31535c(0x1d3)][_0x31535c(0x226)](_0x634b02=>_0x634b02[_0x31535c(0x235)]==_0x43ed9a['coin']);return _0x8392a0&&!_0x8392a0['excluded'];}),[_0x32060c,_0x3326a5];}async function getCoinNumber(_0x4b5490){const _0xa17949=_0x3ffd09;let _0x2de7f1;try{const _0x25c6bc=await exchange[_0xa17949(0x205)]();_0x2de7f1=_0x25c6bc[_0xa17949(0x283)][_0x4b5490];}catch(_0x2a9d2){await handleError(_0x2a9d2,'getCoinNumber()');}return _0x2de7f1;}async function getOpenOrders(){const _0x150068=_0x3ffd09;let _0x120916;allOpenOrders=[];try{for(const _0x33ffb9 of config[_0x150068(0x1d3)]){!_0x33ffb9[_0x150068(0x257)]&&_0x33ffb9['coin']!=config[_0x150068(0x2d5)]&&(_0x120916=await exchange[_0x150068(0x24b)](_0x33ffb9['symbol']),_0x120916[_0x150068(0x2f3)]>0x0&&allOpenOrders[_0x150068(0x2db)](_0x120916[0x0]));}}catch(_0x865334){await handleError(_0x865334,_0x150068(0x2cf));}}async function handleOpenOrders(_0x307f13=0x0){const _0x1c44b7=_0x3ffd09;allOpenOrders[_0x1c44b7(0x2f3)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x307f13==0x0?(logger[_0x1c44b7(0x28e)](_0x1c44b7(0x1e0)),_0x307f13++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1c44b7(0x28e)](_0x1c44b7(0x1f3)),validateOrders(_0x1c44b7(0x275))));}async function testAPI(_0x31af42){const _0x3538cf=_0x3ffd09,_0x184579=ccxt[_0x31af42[_0x3538cf(0x286)][_0x3538cf(0x2b6)]()],_0x4eb7c3=new _0x184579({'apiKey':_0x31af42[_0x3538cf(0x1a0)],'secret':_0x31af42[_0x3538cf(0x1e8)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x31af42['apiPassword'])_0x4eb7c3['password']=_0x31af42[_0x3538cf(0x230)];try{await _0x4eb7c3[_0x3538cf(0x29a)]();}catch(_0x2f6b03){throw _0x2f6b03;}}function cloneDeep(_0x26aa1d){const _0xb99f8a=_0x3ffd09;return JSON[_0xb99f8a(0x1b4)](JSON[_0xb99f8a(0x1ea)](_0x26aa1d));}async function getPortfolio(_0x3aa823){const _0x29094c=_0x3ffd09;let _0x1cd8ca=[],_0x1ba9f1=[],_0x1ff571=[],_0x419063;if(_0x3aa823[_0x29094c(0x1a0)]!==_0x29094c(0x254)||_0x3aa823[_0x29094c(0x1e8)]!==_0x29094c(0x254)||_0x3aa823[_0x29094c(0x230)]&&_0x3aa823[_0x29094c(0x230)]!==_0x29094c(0x254)){if(config[_0x29094c(0x286)]){if(_0x3aa823[_0x29094c(0x1a0)]==_0x29094c(0x254))_0x3aa823[_0x29094c(0x1a0)]=config[_0x29094c(0x1a0)];if(_0x3aa823['apiSecret']==_0x29094c(0x254))_0x3aa823[_0x29094c(0x1e8)]=config[_0x29094c(0x1e8)];if(_0x3aa823['apiPassword']==_0x29094c(0x254))_0x3aa823[_0x29094c(0x230)]=config[_0x29094c(0x230)];try{await testAPI(_0x3aa823);}catch(_0x14dc5f){if(_0x14dc5f[_0x29094c(0x24a)]()['includes'](_0x29094c(0x276))){logger[_0x29094c(0x28e)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x29094c(0x1d3),![]);return;}else{handleError(_0x14dc5f,_0x29094c(0x2d0));return;}}}await initExchange(_0x3aa823[_0x29094c(0x286)],_0x3aa823['apiKey'],_0x3aa823['apiSecret'],_0x3aa823['apiPassword']);try{await loadSymbols(_0x3aa823[_0x29094c(0x286)],!![]);}catch(_0x35ce2b){if(_0x35ce2b[_0x29094c(0x24a)]()[_0x29094c(0x2ef)](_0x29094c(0x276))){proxyEmit(_0x29094c(0x1d3),![]);return;}else{handleError(_0x35ce2b,_0x29094c(0x1a2));return;}}const _0x517e83=await getCoins(![],_0x3aa823['basecoin']);_0x1ff571=cloneDeep(_0x517e83[0x1]);}else _0x1ff571=cloneDeep(currentCoinsAll);if(_0x3aa823[_0x29094c(0x2d5)]=='')proxyEmit(_0x29094c(0x1d3),_0x1ff571);else{_0x1ff571['forEach'](_0x12cbfa=>{const _0x18f268=_0x29094c;if(_0x12cbfa[_0x18f268(0x235)]!=_0x3aa823[_0x18f268(0x2d5)])_0x1cd8ca['push'](_0x12cbfa[_0x18f268(0x288)]);});try{_0x1ba9f1=await exchange[_0x29094c(0x296)](_0x1cd8ca);}catch(_0x3bac28){if(_0x3bac28[_0x29094c(0x24a)]()[_0x29094c(0x2ef)](_0x29094c(0x276))){proxyEmit('portfolio',![]);return;}else{handleError(_0x3bac28,_0x29094c(0x290));return;}}_0x1ff571[_0x29094c(0x282)](_0xdc297a=>{const _0x42cb85=_0x29094c;_0xdc297a[_0x42cb85(0x235)]!=_0x3aa823[_0x42cb85(0x2d5)]?_0x419063=_0xdc297a['reverse']?0x1/_0x1ba9f1[_0xdc297a[_0x42cb85(0x288)]][_0x42cb85(0x1d0)]:_0x1ba9f1[_0xdc297a[_0x42cb85(0x288)]][_0x42cb85(0x1d0)]:_0x419063=0x1,_0xdc297a['price']=formatResult(_0x419063,0x8);}),proxyEmit(_0x29094c(0x1d3),_0x1ff571);}}function checkMinimums(_0xd3791c){const _0x50a135=_0x3ffd09;let _0x4142e6=!![];const _0x30eb63=!_0xd3791c[_0x50a135(0x204)]?markets[_0xd3791c[_0x50a135(0x288)]][_0x50a135(0x242)][_0x50a135(0x1e9)][_0x50a135(0x27d)]:markets[_0xd3791c[_0x50a135(0x288)]][_0x50a135(0x242)][_0x50a135(0x289)][_0x50a135(0x27d)],_0x2304f0=!_0xd3791c['reverse']?markets[_0xd3791c['symbol']][_0x50a135(0x242)][_0x50a135(0x289)]['min']:markets[_0xd3791c['symbol']][_0x50a135(0x242)][_0x50a135(0x1e9)][_0x50a135(0x27d)],_0x34fd2d=markets[_0xd3791c['symbol']][_0x50a135(0x1b3)][_0x50a135(0x1e9)];_0xd3791c[_0x50a135(0x234)]=formatResultTruncate(_0xd3791c[_0x50a135(0x234)],_0x34fd2d);if(Math[_0x50a135(0x1cd)](_0xd3791c[_0x50a135(0x234)])<_0x30eb63)_0x4142e6=![];if(Math[_0x50a135(0x1cd)](_0xd3791c[_0x50a135(0x234)])*_0xd3791c[_0x50a135(0x1d0)]<_0x2304f0)_0x4142e6=![];if(_0xd3791c['side']=='sell'){let _0x22dbf0=config[_0x50a135(0x1d3)][_0x50a135(0x226)](_0x106591=>_0x106591[_0x50a135(0x235)]==_0xd3791c[_0x50a135(0x235)]);if(_0x22dbf0['offset']>0x0){if(Math['abs'](_0xd3791c[_0x50a135(0x234)])>_0xd3791c[_0x50a135(0x2d7)]-_0x22dbf0['offset'])_0x4142e6=![];}else{if(Math['abs'](_0xd3791c[_0x50a135(0x234)])>_0xd3791c['number'])_0x4142e6=![];}}if(_0xd3791c[_0x50a135(0x279)]==_0x50a135(0x268)){let _0x107c8d=config['portfolio'][_0x50a135(0x226)](_0x569c01=>_0x569c01[_0x50a135(0x235)]==config['basecoin']),_0x48ed1a=currentCoins[_0x50a135(0x226)](_0x53de88=>_0x53de88[_0x50a135(0x235)]==config[_0x50a135(0x2d5)]);if(_0x107c8d[_0x50a135(0x2e7)]>0x0){if(Math[_0x50a135(0x1cd)](_0xd3791c['trade'])*_0xd3791c['last']>_0x48ed1a[_0x50a135(0x2d7)]-_0x107c8d[_0x50a135(0x2e7)])_0x4142e6=![];}else{if(Math['abs'](_0xd3791c[_0x50a135(0x234)])*_0xd3791c[_0x50a135(0x1d0)]>_0x48ed1a[_0x50a135(0x2d7)])_0x4142e6=![];}}return _0x4142e6;}async function getBalances(){const _0x45d079=_0x3ffd09;let _0x5ddf7a=0x0,_0x43fe49;const _0x3effcb=config[_0x45d079(0x310)];if(config[_0x45d079(0x299)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x45d079(0x282)](_0x1c4586=>{const _0x152286=_0x45d079;if(_0x1c4586[_0x152286(0x235)]!=config['basecoin']){let _0x164712=global[_0x152286(0x2ae)][noslash(_0x1c4586[_0x152286(0x288)])];_0x43fe49=_0x1c4586[_0x152286(0x204)]?0x1/_0x164712:_0x164712;}else _0x43fe49=0x1;let _0x53cb1b=_0x1c4586[_0x152286(0x2d7)]*_0x43fe49;_0x5ddf7a+=_0x53cb1b,_0x1c4586[_0x152286(0x1d0)]=formatResult(Number(_0x43fe49),0x8),_0x1c4586[_0x152286(0x1a8)]=_0x53cb1b;}),currentCoins[_0x45d079(0x282)](_0x15e1ea=>{const _0x380e44=_0x45d079;let _0x36b7fd=config[_0x380e44(0x1d3)][_0x380e44(0x226)](_0x163c2c=>_0x163c2c[_0x380e44(0x235)]==_0x15e1ea[_0x380e44(0x235)]),_0x1becb5=Number(_0x36b7fd[_0x380e44(0x1af)]),_0x948190=_0x15e1ea[_0x380e44(0x1a8)]/_0x5ddf7a*0x64,_0x3909e9=_0x1becb5*_0x5ddf7a/0x64/_0x15e1ea[_0x380e44(0x1d0)]-_0x15e1ea['number'];_0x15e1ea[_0x380e44(0x1af)]=formatResult(_0x948190,0x3),_0x15e1ea[_0x380e44(0x206)]=formatResult(_0x1becb5,0x3),_0x15e1ea[_0x380e44(0x234)]=formatResult(_0x3909e9,0x8),_0x15e1ea['side']='',_0x15e1ea['valid']=![];if(_0x15e1ea[_0x380e44(0x235)]!=config[_0x380e44(0x2d5)]){if(_0x15e1ea[_0x380e44(0x1af)]>_0x1becb5)_0x15e1ea[_0x380e44(0x279)]=_0x380e44(0x2b2),_0x15e1ea[_0x380e44(0x2e2)]=checkMinimums(_0x15e1ea);else _0x15e1ea[_0x380e44(0x1af)]<_0x1becb5&&(_0x15e1ea[_0x380e44(0x279)]='buy',_0x15e1ea[_0x380e44(0x2e2)]=checkMinimums(_0x15e1ea));}_0x15e1ea[_0x380e44(0x2dc)]=_0x15e1ea['distribution']/_0x15e1ea[_0x380e44(0x206)]-0x1;if(_0x15e1ea['orderstatus']==_0x380e44(0x30a)||_0x15e1ea[_0x380e44(0x1c5)]==_0x380e44(0x2a8))_0x15e1ea['orderstatus']=_0x380e44(0x2fa);}),currentCoins['sort']((_0x45df72,_0x3adda3)=>_0x45df72[_0x45d079(0x2dc)]<_0x3adda3[_0x45d079(0x2dc)]?0x1:_0x3adda3[_0x45d079(0x2dc)]<_0x45df72[_0x45d079(0x2dc)]?-0x1:0x0);const _0xd6efea=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xd6efea[_0x45d079(0x199)],'usd':_0xd6efea[_0x45d079(0x27f)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x3effcb},proxyEmit(_0x45d079(0x1d5),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x45d079(0x299)])headlessMode({'portfolio':currentCoins,'threshold':_0x3effcb});else{if(lockOrders==ORDERS[_0x45d079(0x30f)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3effcb});}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x26125d=getNormalizedPerformance();getStartingBalances(_0x26125d),emitPerformance(_0x26125d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x3ecffe=getNormalizedPerformance();emitPerformance(_0x3ecffe),getStartingBalances(_0x3ecffe),logger[_0x45d079(0x28e)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x37a18c=_0x3ffd09;if(!lastBalances)return;let _0x7f31ff=[],_0x4108b0,_0xf6f63f=JSON[_0x37a18c(0x1b4)](lastBalances[_0x37a18c(0x1d3)]);_0xf6f63f[_0x37a18c(0x2a6)]((_0x52ea30,_0xbc3ab6)=>_0x52ea30[_0x37a18c(0x235)]>_0xbc3ab6['coin']?0x1:_0xbc3ab6[_0x37a18c(0x235)]>_0x52ea30['coin']?-0x1:0x0),_0xf6f63f['forEach'](_0x5ae0f2=>{const _0x4b6010=_0x37a18c;let _0x5840fb={'coin':_0x5ae0f2[_0x4b6010(0x235)],'number':_0x5ae0f2[_0x4b6010(0x2d7)],'price':_0x5ae0f2[_0x4b6010(0x1d0)]};_0x7f31ff[_0x4b6010(0x2db)](_0x5840fb);});const _0x3988fa=await getFiat();_0x4108b0={'date':lastBalances[_0x37a18c(0x2fb)][_0x37a18c(0x1c7)]('\x20')[0x0],'eur':_0x3988fa[_0x37a18c(0x199)],'usd':_0x3988fa[_0x37a18c(0x27f)],'coins':_0x7f31ff};let _0x36c889=dbPerformance[_0x37a18c(0x1cc)]('data')['find']({'date':_0x4108b0[_0x37a18c(0x2ab)]})[_0x37a18c(0x1a8)]();_0x36c889?_0x4108b0['date']!=config[_0x37a18c(0x1e3)]&&dbPerformance[_0x37a18c(0x1cc)](_0x37a18c(0x2d4))[_0x37a18c(0x226)]({'date':_0x4108b0[_0x37a18c(0x2ab)]})[_0x37a18c(0x1f1)](_0x4108b0)[_0x37a18c(0x1df)]():dbPerformance[_0x37a18c(0x1cc)](_0x37a18c(0x2d4))[_0x37a18c(0x2db)](_0x4108b0)[_0x37a18c(0x1df)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x14a0e5=_0x3ffd09;let _0x462a53=[];if(dbPerformance[_0x14a0e5(0x244)](_0x14a0e5(0x2d4))[_0x14a0e5(0x1a8)]()){let _0x44dea7=dbPerformance[_0x14a0e5(0x1cc)]('data')[_0x14a0e5(0x21e)]()[_0x14a0e5(0x1a9)]('date')[_0x14a0e5(0x1a8)](),_0x62679f=[...config[_0x14a0e5(0x243)]];_0x62679f[_0x14a0e5(0x2a6)]((_0xeca27c,_0x5e3ecf)=>_0xeca27c[_0x14a0e5(0x2ab)]>_0x5e3ecf[_0x14a0e5(0x2ab)]?-0x1:_0x5e3ecf[_0x14a0e5(0x2ab)]>_0xeca27c[_0x14a0e5(0x2ab)]?0x1:0x0);let _0x414bac=0x1,_0x130896=[],_0xf08d8e=0x0;_0x44dea7[_0x14a0e5(0x293)]()['reverse']()[_0x14a0e5(0x282)]((_0x12c752,_0x36dbad)=>{const _0x8bfb76=_0x14a0e5;if(_0x62679f[_0xf08d8e]){if(_0x44dea7[_0x44dea7[_0x8bfb76(0x2f3)]-_0x36dbad]&&_0x62679f[_0xf08d8e][_0x8bfb76(0x2ab)]==_0x44dea7[_0x44dea7['length']-_0x36dbad][_0x8bfb76(0x2ab)]){if(_0x36dbad<_0x44dea7[_0x8bfb76(0x2f3)]){let _0x19c480=0x0,_0x37611b=0x0;_0x44dea7[_0x44dea7[_0x8bfb76(0x2f3)]-_0x36dbad][_0x8bfb76(0x1ab)][_0x8bfb76(0x282)](_0x8a7a84=>{const _0xe8d085=_0x8bfb76;_0x37611b+=_0x8a7a84[_0xe8d085(0x2d7)]*_0x8a7a84['price'];}),_0x62679f[_0xf08d8e][_0x8bfb76(0x25d)][_0x8bfb76(0x282)](_0x48b5c7=>{const _0x18cf4e=_0x8bfb76;_0x19c480+=_0x48b5c7[_0x18cf4e(0x2d7)]*_0x48b5c7[_0x18cf4e(0x2b4)];}),_0x414bac*=_0x19c480/(_0x37611b-_0x19c480)+0x1;}_0xf08d8e++;}}let _0x1b6741=0x0;_0x12c752['coins'][_0x8bfb76(0x282)](_0x546c7c=>{const _0x22c843=_0x8bfb76;_0x1b6741+=_0x546c7c[_0x22c843(0x2d7)]*_0x546c7c[_0x22c843(0x2b4)];}),_0x130896[_0x44dea7[_0x8bfb76(0x2f3)]-_0x36dbad-0x1]=_0x1b6741*(_0x414bac-0x1);});let _0x1b2585=[];_0x62679f=[...config['liquidity']]||[];let _0x5b99fe=0x0;_0xf08d8e=0x0,_0x44dea7[_0x14a0e5(0x282)]((_0x5b7c6b,_0x611d0c)=>{const _0x1f2f68=_0x14a0e5;if(_0x62679f[_0xf08d8e]){const _0x526586=fns[_0x1f2f68(0x1b4)](_0x62679f[_0xf08d8e][_0x1f2f68(0x2ab)],'yyyy/MM/dd',new Date()),_0x25b177=fns[_0x1f2f68(0x1b4)](_0x5b7c6b[_0x1f2f68(0x2ab)],'yyyy/MM/dd',new Date());if(fns[_0x1f2f68(0x2a3)](_0x526586,_0x25b177)){let _0xebfaef=0x0;_0x62679f[_0xf08d8e][_0x1f2f68(0x25d)][_0x1f2f68(0x282)](_0x2eba68=>{const _0x2aa979=_0x1f2f68;!_0x1b2585[_0x2eba68[_0x2aa979(0x235)]]?_0x1b2585[_0x2eba68[_0x2aa979(0x235)]]=_0x2eba68[_0x2aa979(0x2d7)]:(_0xebfaef=_0x1b2585[_0x2eba68['coin']],_0x1b2585[_0x2eba68[_0x2aa979(0x235)]]+=_0x2eba68['number']);const _0x5d989b=_0x5b7c6b[_0x2aa979(0x1ab)]['find'](_0x4e7e23=>_0x4e7e23[_0x2aa979(0x235)]==_0x2eba68[_0x2aa979(0x235)]);(!_0x5d989b||_0x5d989b[_0x2aa979(0x2d7)]==0x0)&&(_0x5b99fe+=(-_0x2eba68['number']-_0xebfaef)*_0x2eba68[_0x2aa979(0x2b4)]);}),_0xf08d8e++;}}_0x5b7c6b['coins'][_0x1f2f68(0x282)]((_0x224967,_0x5e6668)=>{const _0x360c44=_0x1f2f68;_0x1b2585[_0x224967['coin']]&&(_0x224967[_0x360c44(0x28a)]=_0x1b2585[_0x224967[_0x360c44(0x235)]]);}),_0x462a53[_0x1f2f68(0x2db)]({'date':_0x5b7c6b[_0x1f2f68(0x2ab)],'eur':_0x5b7c6b[_0x1f2f68(0x199)],'usd':_0x5b7c6b[_0x1f2f68(0x27f)],'offset':_0x130896[_0x611d0c],'netoffset':_0x5b99fe,'coins':_0x5b7c6b[_0x1f2f68(0x1ab)]});});}return _0x462a53;}function emitPerformance(_0x4d1d57){const _0x437eea=_0x3ffd09;_0x4d1d57[_0x437eea(0x2f3)]!==0x0?(proxyEmit(_0x437eea(0x20c),_0x4d1d57),lastPerformanceEmitted=getDate()):proxyEmit(_0x437eea(0x20c),[]);}function getPerf(_0x18fa42,_0x5855ba){const _0x3a52f8=_0x3ffd09;let _0x3289fb=0x0,_0x1e48ab=0x0,_0x456865=0x0;_0x18fa42[_0x3a52f8(0x1ab)][_0x3a52f8(0x282)](_0x1944cc=>{const _0x6776c9=_0x3a52f8;_0x3289fb+=_0x1944cc[_0x6776c9(0x2d7)]*_0x1944cc[_0x6776c9(0x2b4)];});_0x5855ba&&(_0x3289fb+=_0x18fa42[_0x3a52f8(0x2e7)]);if(config[_0x3a52f8(0x2d5)]===_0x3a52f8(0x271)||config[_0x3a52f8(0x2d5)]===_0x3a52f8(0x298))_0x1e48ab=_0x3289fb*_0x18fa42[_0x3a52f8(0x199)],_0x456865=_0x3289fb*_0x18fa42[_0x3a52f8(0x27f)];else{if(config[_0x3a52f8(0x2d5)]===_0x3a52f8(0x2e6)||config[_0x3a52f8(0x2d5)]===_0x3a52f8(0x236)||config['basecoin']===_0x3a52f8(0x28d))_0x1e48ab=_0x3289fb*_0x18fa42['eur']/_0x18fa42[_0x3a52f8(0x27f)],_0x456865=_0x3289fb;else config['basecoin']===_0x3a52f8(0x202)&&(_0x1e48ab=_0x3289fb,_0x456865=_0x3289fb*_0x18fa42[_0x3a52f8(0x27f)]/_0x18fa42[_0x3a52f8(0x199)]);}return[_0x3289fb,_0x1e48ab,_0x456865];}function getKPIs(_0xac8d7c,_0x18d1b1='EUR'){const _0x3ae310=_0x3ffd09,_0xb046c3=config[_0x3ae310(0x2d5)],_0x25fca1=lastBalances,_0x109f42=currentCoins,_0x270b56=getNormalizedPerformance(),_0x5983cc=_0xac8d7c==='basecoin'?_0xb046c3:_0xac8d7c===_0x3ae310(0x258)||_0xac8d7c===_0x3ae310(0x26e)?_0x18d1b1:_0x3ae310(0x1f7)+_0xb046c3,_0x3ea3f4=_0xac8d7c===_0x3ae310(0x2cb)?_0x3ae310(0x241):_0xac8d7c===_0x3ae310(0x26e)?_0x3ae310(0x241):_0x5983cc+'\x20value',_0x1134f3=_0xac8d7c===_0x3ae310(0x2cb)||_0xac8d7c===_0x3ae310(0x26e)?_0x3ae310(0x241):_0x5983cc+_0x3ae310(0x1d8);let _0x2b6bef=0x0;_0x109f42[_0x3ae310(0x282)](_0x5a0ff5=>{const _0x4e9ca9=_0x3ae310;_0x2b6bef+=_0x5a0ff5[_0x4e9ca9(0x2d7)]*_0x5a0ff5['last'];});if(_0xac8d7c===_0x3ae310(0x258)||_0xac8d7c==='net-fiat'){if(_0xb046c3===_0x3ae310(0x271)||_0xb046c3==='ETH')_0x2b6bef=_0x2b6bef*(_0x18d1b1===_0x3ae310(0x202)?_0x25fca1[_0x3ae310(0x199)]:_0x25fca1['usd']);else{if(_0xb046c3==='BUSD'||_0xb046c3===_0x3ae310(0x236)||_0xb046c3===_0x3ae310(0x28d))_0x2b6bef=_0x2b6bef*(_0x18d1b1==='EUR'?_0x25fca1[_0x3ae310(0x199)]/_0x25fca1[_0x3ae310(0x27f)]:0x1);else _0xb046c3===_0x3ae310(0x202)&&(_0x2b6bef=_0x2b6bef*(_0x18d1b1===_0x3ae310(0x202)?0x1:_0x25fca1[_0x3ae310(0x27f)]/_0x25fca1['eur']));}}let _0x16b02f;if(_0x2b6bef!==0x0){if(_0xac8d7c===_0x3ae310(0x2d5))_0x16b02f=(_0x2b6bef/startingBalances[_0x3ae310(0x2d5)]-0x1)*0x64;else{if(_0x18d1b1==='EUR')_0x16b02f=(_0x2b6bef/startingBalances[_0x3ae310(0x199)]-0x1)*0x64;else _0x16b02f=(_0x2b6bef/startingBalances[_0x3ae310(0x27f)]-0x1)*0x64;}let _0xe02ace=0x0;if(startingBalances[_0x3ae310(0x1ab)])_0x109f42[_0x3ae310(0x282)](_0x40cdfd=>{const _0x91d543=_0x3ae310;let _0x2512b5=startingBalances[_0x91d543(0x1ab)][_0x91d543(0x226)](_0x7d8e4b=>_0x7d8e4b[_0x91d543(0x235)]===_0x40cdfd[_0x91d543(0x235)]);if(_0x2512b5&&_0x2512b5[_0x91d543(0x235)]&&_0x40cdfd[_0x91d543(0x2d7)]!==0x0)_0xe02ace+=_0x2512b5['number']*_0x40cdfd[_0x91d543(0x1d0)];});let _0x3c627d=0x0;if(_0x270b56[_0x3ae310(0x2f3)]!==0x0){let _0x355296=_0x270b56[_0x270b56[_0x3ae310(0x2f3)]-0x1];_0x3c627d=_0x355296[_0x3ae310(0x26d)];}_0xe02ace-=_0x3c627d;_0xac8d7c===_0x3ae310(0x2cb)&&(_0x16b02f=(_0x2b6bef-_0xe02ace)/startingBalances[_0x3ae310(0x2d5)]*0x64,_0x2b6bef=_0x2b6bef-_0xe02ace);if(_0xac8d7c===_0x3ae310(0x26e)){let _0x405a76=_0x18d1b1===_0x3ae310(0x202)?startingBalances[_0x3ae310(0x199)]:startingBalances['usd'];if(_0xb046c3===_0x3ae310(0x271)||_0xb046c3==='ETH')_0xe02ace=_0x18d1b1===_0x3ae310(0x202)?_0xe02ace*_0x25fca1[_0x3ae310(0x199)]:_0xe02ace*_0x25fca1[_0x3ae310(0x27f)];else{if(_0xb046c3===_0x3ae310(0x2e6)||_0xb046c3===_0x3ae310(0x236)||_0xb046c3===_0x3ae310(0x28d))_0xe02ace=_0x18d1b1===_0x3ae310(0x202)?_0xe02ace*_0x25fca1[_0x3ae310(0x199)]/_0x25fca1[_0x3ae310(0x27f)]:_0xe02ace;else _0xb046c3===_0x3ae310(0x202)&&(_0xe02ace=_0x18d1b1===_0x3ae310(0x202)?_0xe02ace:_0xe02ace*_0x25fca1[_0x3ae310(0x27f)]/_0x25fca1[_0x3ae310(0x199)]);}_0x16b02f=(_0x2b6bef-_0xe02ace)/_0x405a76*0x64,_0x2b6bef=_0x2b6bef-_0xe02ace;}if(_0x16b02f){if(_0x16b02f<0x64)_0x16b02f=_0x16b02f[_0x3ae310(0x246)](0x2);else{if(_0x16b02f<0x3e8)_0x16b02f=_0x16b02f[_0x3ae310(0x246)](0x1);else _0x16b02f=_0x16b02f[_0x3ae310(0x246)](0x0);}}else _0x16b02f=Number('0')[_0x3ae310(0x246)](0x2);if(_0x2b6bef){if(Math[_0x3ae310(0x1cd)](_0x2b6bef)<0.000001)_0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x2);else{if(Math[_0x3ae310(0x1cd)](_0x2b6bef)<0.1)_0x2b6bef=_0x2b6bef['toFixed'](0x6);else{if(Math[_0x3ae310(0x1cd)](_0x2b6bef)<0x1)_0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x5);else{if(Math['abs'](_0x2b6bef)<0xa)_0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x4);else{if(Math[_0x3ae310(0x1cd)](_0x2b6bef)<0x64)_0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x3);else{if(Math[_0x3ae310(0x1cd)](_0x2b6bef)<0x3e8)_0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x2);else _0x2b6bef=_0x2b6bef[_0x3ae310(0x246)](0x2);}}}}}}else _0x2b6bef=Number('0')[_0x3ae310(0x246)](0x2);}else _0x16b02f=Number('0')['toFixed'](0x2);return{'value':_0x2b6bef,'change':_0x16b02f,'leftTxt':_0x3ea3f4,'rightTxt':_0x1134f3};}async function getStartingBalances(_0x2d5b91,_0x53ca8a=!![]){const _0x29c994=_0x3ffd09;if(_0x2d5b91[_0x29c994(0x2f3)]!==0x0){const [_0xf6efd5,_0x292297,_0x3ebf8e]=getPerf(_0x2d5b91[0x0],!![]);let _0x45183e=[];config['portfolio'][_0x29c994(0x282)](_0x436a32=>{const _0x273373=_0x29c994;let _0x3ae2c3=0x0,_0x31d49a;config[_0x273373(0x243)][_0x273373(0x282)](_0x3eca23=>{const _0x5acff0=_0x273373;let _0x317efd=_0x3eca23[_0x5acff0(0x25d)][_0x5acff0(0x226)](_0x59f661=>_0x59f661['coin']==_0x436a32['coin']);if(_0x317efd){_0x3ae2c3+=_0x317efd[_0x5acff0(0x2d7)];if(!_0x31d49a)_0x31d49a=_0x317efd[_0x5acff0(0x2b4)];}}),_0x45183e[_0x273373(0x2db)]({'coin':_0x436a32[_0x273373(0x235)],'number':_0x3ae2c3,'initialprice':_0x31d49a});});const _0x3b6885={'basecoin':_0xf6efd5,'eur':_0x292297,'usd':_0x3ebf8e,'coins':_0x45183e};if(_0x53ca8a)proxyEmit(_0x29c994(0x2d8),_0x3b6885);startingBalances=_0x3b6885;}}function headlessMode(_0x4bb581){const _0x707d73=_0x3ffd09;let _0x4c75ed=_0x4bb581[_0x707d73(0x1d3)],_0xe6a670=_0x4bb581[_0x707d73(0x310)],_0x300dda=[];for(let _0x347781 of _0x4c75ed){if(_0x347781[_0x707d73(0x235)]!=config[_0x707d73(0x2d5)]){if(_0x347781[_0x707d73(0x2dc)]>=_0xe6a670/0x64){if(_0x347781[_0x707d73(0x2e2)])_0x300dda[_0x707d73(0x2db)](_0x347781);}else{if(_0x347781[_0x707d73(0x2dc)]<=-_0xe6a670/0x64){if(_0x347781['valid'])_0x300dda['push'](_0x347781);}}}}_0x300dda[_0x707d73(0x2f3)]>0x0&&placeOrder(_0x300dda);}function notifyBalance(_0x2bdb01){const _0x565491=_0x3ffd09;let _0x1f076c=_0x2bdb01['portfolio'],_0x1d2c44=_0x2bdb01[_0x565491(0x310)],_0x3c6ad6=[];for(let _0xd95481 of _0x1f076c){if(_0xd95481[_0x565491(0x235)]!=config['basecoin']){if(_0xd95481[_0x565491(0x2dc)]>=_0x1d2c44/0x64){if(_0xd95481[_0x565491(0x2e2)])_0x3c6ad6[_0x565491(0x2db)](_0xd95481);}else{if(_0xd95481['delta']<=-_0x1d2c44/0x64){if(_0xd95481[_0x565491(0x2e2)])_0x3c6ad6[_0x565491(0x2db)](_0xd95481);}}}}if(_0x3c6ad6[_0x565491(0x2f3)]>0x0){let _0x35d1b5=_0x3c6ad6[_0x565491(0x1b5)](_0x3ac106=>_0x3ac106[_0x565491(0x235)]);_0x35d1b5[_0x565491(0x2a6)]();let _0x7a1161=_0x35d1b5[_0x565491(0x221)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x565491(0x30b));lastCoinsToBalance=_0x7a1161;}}function symbolToCoin(_0x1628b7){const _0x504411=_0x3ffd09;let _0x443f94;if(_0x1628b7[_0x504411(0x2ef)]('/'+config[_0x504411(0x2d5)]))_0x443f94=_0x1628b7[_0x504411(0x2c5)]('/'+config['basecoin'],'');if(_0x1628b7[_0x504411(0x2ef)](config['basecoin']+'/'))_0x443f94=_0x1628b7[_0x504411(0x2c5)](config[_0x504411(0x2d5)]+'/','');return _0x443f94;}async function unlockOrders(){const _0x27ae45=_0x3ffd09;if(allOrdersPlaced&&lockOrders==ORDERS[_0x27ae45(0x2af)]){logger['debug'](_0x27ae45(0x280)),lockOrders=ORDERS[_0x27ae45(0x207)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4733cd=await getCoins();[currentCoins,currentCoinsAll]=_0x4733cd,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x27ae45(0x30f)],logger['debug'](_0x27ae45(0x23c));}}async function validateOrders(_0x1f669e){const _0x575eaa=_0x3ffd09;if(_0x1f669e)validateOrdersState=_0x1f669e;logger[_0x575eaa(0x28e)](_0x575eaa(0x28b)+validateOrdersState+_0x575eaa(0x281)+(lockOrders==0x1?_0x575eaa(0x2e3):lockOrders==0x2?_0x575eaa(0x197):_0x575eaa(0x30e)));let _0x2ac4fc=[],_0x2dd7bc=config['ordertype']==_0x575eaa(0x301)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x575eaa(0x2af)])return;logger[_0x575eaa(0x28e)](_0x575eaa(0x253)+validateOrdersState),lastOrders[_0x575eaa(0x282)](_0x339ed8=>{const _0x2e96c6=_0x575eaa;let _0x5d3e3f=![];_0x339ed8[_0x2e96c6(0x30a)]>0x0&&(_0x5d3e3f=!![]),_0x2ac4fc['push'](_0x5d3e3f),_0x5d3e3f&&config[_0x2e96c6(0x2c0)]!='market'&&logHistory(_0x2e96c6(0x2fc),_0x2e96c6(0x21c)+_0x339ed8[_0x2e96c6(0x288)]+'\x20'+_0x339ed8[_0x2e96c6(0x279)]+'\x20#'+formatResult(_0x339ed8[_0x2e96c6(0x30a)],0x8)+'\x20@'+formatResult(_0x339ed8['price'],0x8));}),_0x2ac4fc[_0x575eaa(0x282)]((_0x21149f,_0x3d2857)=>{const _0x295438=_0x575eaa;if(_0x21149f)lastOrders[_0x295438(0x303)](_0x3d2857,0x1);}),persistOpenOrders(lastOrders);const _0x22da26=coolingDown?_0x575eaa(0x1ed):_0x575eaa(0x238);if(validateOrdersState==_0x575eaa(0x28a)){validateOrdersState='ongoing';if(_0x2ac4fc[_0x575eaa(0x2ef)](![])){if(config['ordertype']==_0x575eaa(0x301)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x2ac4fc[_0x575eaa(0x2ef)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x575eaa(0x301)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x575eaa(0x1fa))_0x2ac4fc[_0x575eaa(0x2ef)](![])&&(config[_0x575eaa(0x2c0)]=='market'?logHistory('success',_0x575eaa(0x1cb)+Math[_0x575eaa(0x2a9)](_0x2dd7bc*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x22da26):(await cancelOrders(),logHistory('success',_0x575eaa(0x1da)+Math[_0x575eaa(0x2a9)](_0x2dd7bc*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x22da26))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!='market')logHistory(_0x575eaa(0x22b),_0x575eaa(0x309)+_0x22da26);await unlockOrders();}}}}}async function cancelOrders(){const _0x2772e8=_0x3ffd09;lastOrders[_0x2772e8(0x282)](async _0x10ed98=>{const _0x55478f=_0x2772e8;try{const _0x36ef83=await exchange['cancelOrder'](_0x10ed98[_0x55478f(0x2a0)],_0x10ed98[_0x55478f(0x288)]);}catch(_0x68a49){if(_0x68a49[_0x55478f(0x24a)]()[_0x55478f(0x2ef)](_0x55478f(0x27e))){}else await handleError(_0x68a49,'cancelOrders()');}});}async function initCoinResults(){const _0x50a6a9=_0x3ffd09;let _0x480770=[];config[_0x50a6a9(0x1d3)][_0x50a6a9(0x282)](_0x9162e8=>{const _0x2ab535=_0x50a6a9;if(!_0x9162e8[_0x2ab535(0x257)]&&_0x9162e8[_0x2ab535(0x235)]!=config[_0x2ab535(0x2d5)]){let _0x5aeb34=dbCoinResults['get'](_0x2ab535(0x1ab))[_0x2ab535(0x226)]({'coin':_0x9162e8['coin']})['value']();if(!_0x5aeb34){const _0xccf7e5=currentCoins[_0x2ab535(0x226)](_0x49076b=>_0x49076b[_0x2ab535(0x235)]==_0x9162e8['coin']),_0x257b2e=global[_0x2ab535(0x2ae)][noslash(_0x9162e8[_0x2ab535(0x288)])];let _0x54125d=_0xccf7e5?_0xccf7e5[_0x2ab535(0x2d7)]:null,_0x5c6f51=_0x9162e8[_0x2ab535(0x204)]?0x1/_0x257b2e:_0x257b2e,_0x519196;config[_0x2ab535(0x243)][_0x2ab535(0x282)](_0x20fb32=>{const _0xf61fc8=_0x2ab535;!_0x519196&&(_0x519196=_0x20fb32['changes'][_0xf61fc8(0x226)](_0x2471c1=>_0x2471c1[_0xf61fc8(0x235)]==_0x9162e8[_0xf61fc8(0x235)]),_0x519196&&(_0x54125d=_0x519196[_0xf61fc8(0x2d7)],_0x5c6f51=_0x519196[_0xf61fc8(0x2b4)]));}),_0x480770[_0x2ab535(0x2db)]({'coin':_0x9162e8[_0x2ab535(0x235)],'number':_0x54125d,'price':_0x5c6f51});}}}),_0x480770[_0x50a6a9(0x282)](_0x24c9b2=>{const _0x18eec0=_0x50a6a9,_0x28c50e={'coin':_0x24c9b2[_0x18eec0(0x235)],'number':_0x24c9b2[_0x18eec0(0x2d7)],'breakeven':_0x24c9b2[_0x18eec0(0x2b4)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x18eec0(0x1cc)](_0x18eec0(0x1ab))[_0x18eec0(0x2db)](_0x28c50e)[_0x18eec0(0x1df)]();});}async function updateCoinResults(_0x59b0a4,_0x1bf089=![]){const _0x15e4c2=_0x3ffd09;let _0x39371a,_0x19b9d0,_0x10dcf8,_0x12a9c1,_0x2f5eb0,_0x435084,_0x439377=dbCoinResults[_0x15e4c2(0x1cc)](_0x15e4c2(0x1ab))['find']({'coin':_0x59b0a4['coin']})[_0x15e4c2(0x1a8)]();!_0x439377&&await initCoinResults();_0x59b0a4[_0x15e4c2(0x204)]&&(_0x435084={'filled':_0x59b0a4[_0x15e4c2(0x30a)]*_0x59b0a4[_0x15e4c2(0x2b4)],'amount':_0x59b0a4[_0x15e4c2(0x30a)]*_0x59b0a4[_0x15e4c2(0x2b4)],'side':_0x59b0a4[_0x15e4c2(0x279)]=='sell'?'buy':_0x15e4c2(0x2b2),'price':0x1/_0x59b0a4[_0x15e4c2(0x2b4)]},_0x59b0a4={..._0x59b0a4,..._0x435084});_0x1bf089?_0x19b9d0=_0x59b0a4[_0x15e4c2(0x279)]==_0x15e4c2(0x268)?_0x439377[_0x15e4c2(0x2d7)]+_0x59b0a4[_0x15e4c2(0x30a)]:_0x439377[_0x15e4c2(0x2d7)]-_0x59b0a4[_0x15e4c2(0x30a)]:_0x19b9d0=await getCoinNumber(_0x59b0a4[_0x15e4c2(0x235)]);if(_0x59b0a4[_0x15e4c2(0x1c2)]&&_0x59b0a4[_0x15e4c2(0x1c2)]['currency']==config[_0x15e4c2(0x2d5)])_0x39371a=_0x59b0a4['fee']['cost'];else{if(_0x59b0a4[_0x15e4c2(0x1c2)]&&_0x59b0a4[_0x15e4c2(0x1c2)][_0x15e4c2(0x285)]==_0x15e4c2(0x2b9)&&!_0x1bf089)_0x39371a=_0x59b0a4[_0x15e4c2(0x1c2)][_0x15e4c2(0x289)]*global['ticker'][_0x15e4c2(0x2b9)+config['basecoin']];else _0x39371a=defaultFee*_0x59b0a4[_0x15e4c2(0x30a)]*_0x59b0a4[_0x15e4c2(0x2b4)];}_0x59b0a4[_0x15e4c2(0x279)]==_0x15e4c2(0x268)?(_0x10dcf8=_0x19b9d0!=0x0?(_0x439377[_0x15e4c2(0x25e)]*_0x439377[_0x15e4c2(0x2d7)]+_0x59b0a4['price']*(_0x19b9d0-_0x439377[_0x15e4c2(0x2d7)])+_0x39371a)/_0x19b9d0:0x0,_0x12a9c1=_0x439377[_0x15e4c2(0x269)]):(_0x10dcf8=_0x19b9d0!=0x0?(_0x439377[_0x15e4c2(0x25e)]*_0x439377[_0x15e4c2(0x2d7)]-_0x59b0a4[_0x15e4c2(0x2b4)]*(_0x439377['number']-_0x19b9d0)+_0x39371a)/_0x19b9d0:0x0,_0x12a9c1=_0x439377['realized']+(_0x59b0a4[_0x15e4c2(0x2b4)]-_0x439377['breakeven'])*_0x59b0a4['filled']);_0x2f5eb0=(_0x59b0a4['price']-_0x10dcf8-_0x39371a/_0x59b0a4['filled'])*_0x19b9d0;let _0x405793={'coin':_0x59b0a4[_0x15e4c2(0x235)],'number':_0x19b9d0,'breakeven':formatResult(_0x10dcf8,0x8),'realized':formatResult(_0x12a9c1,0x8),'unrealized':formatResult(_0x2f5eb0,0x8),'fees':formatResult(_0x439377['fees']+_0x39371a,0x8),'sells':_0x59b0a4[_0x15e4c2(0x279)]==_0x15e4c2(0x2b2)?_0x439377['sells']+0x1:_0x439377[_0x15e4c2(0x1ee)],'buys':_0x59b0a4[_0x15e4c2(0x279)]=='buy'?_0x439377[_0x15e4c2(0x2c8)]+0x1:_0x439377['buys']};dbCoinResults['get'](_0x15e4c2(0x1ab))[_0x15e4c2(0x226)]({'coin':_0x59b0a4[_0x15e4c2(0x235)]})[_0x15e4c2(0x1f1)](_0x405793)[_0x15e4c2(0x1df)]();if(!_0x1bf089){if(_0x59b0a4[_0x15e4c2(0x1c2)]&&_0x59b0a4[_0x15e4c2(0x1c2)]['currency']==_0x15e4c2(0x2b9)){const _0x7f91de=currentCoins[_0x15e4c2(0x226)](_0x3bebb2=>_0x3bebb2[_0x15e4c2(0x235)]=='BNB');if(_0x7f91de){let _0xc04e22=dbCoinResults[_0x15e4c2(0x1cc)]('coins')[_0x15e4c2(0x226)]({'coin':_0x15e4c2(0x2b9)})['value']();_0x405793={..._0xc04e22,'number':_0x7f91de[_0x15e4c2(0x2d7)]},dbCoinResults[_0x15e4c2(0x1cc)](_0x15e4c2(0x1ab))[_0x15e4c2(0x226)]({'coin':'BNB'})['assign'](_0x405793)['write']();}}}}async function placeOrder(_0x58530d){const _0x3ffe0d=_0x3ffd09,_0x5ac4bf=config[_0x3ffe0d(0x2c0)]==_0x3ffe0d(0x301)?'market':_0x3ffe0d(0x2c3);if(lockOrders==ORDERS[_0x3ffe0d(0x30f)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3ffe0d(0x2af)],allOrdersPlaced=![],validateOrdersState=_0x3ffe0d(0x28a);let _0x2ce4e8=![];lastOrders=[];for(const _0x2c46a3 of _0x58530d){let _0x39747d,_0x570b3e,_0x2ef057,_0x58f3d0,_0x4c9ca1,_0x2a8376=_0x2c46a3[_0x3ffe0d(0x288)];try{const _0x20d446=await exchange[_0x3ffe0d(0x265)](_0x2a8376);_0x39747d=_0x2c46a3['reverse']?0x1/_0x2c46a3[_0x3ffe0d(0x1d0)]:_0x2c46a3[_0x3ffe0d(0x1d0)],_0x570b3e=_0x20d446['bid'],_0x2ef057=_0x20d446[_0x3ffe0d(0x198)];_0x2c46a3[_0x3ffe0d(0x204)]?(_0x58f3d0=_0x2c46a3[_0x3ffe0d(0x279)]==_0x3ffe0d(0x268)?_0x3ffe0d(0x2b2):'buy',_0x4c9ca1=Math['abs'](_0x2c46a3['trade'])/_0x39747d):(_0x58f3d0=_0x2c46a3[_0x3ffe0d(0x279)],_0x4c9ca1=Math['abs'](_0x2c46a3[_0x3ffe0d(0x234)]));_0x5ac4bf==_0x3ffe0d(0x2c3)&&(config[_0x3ffe0d(0x2c0)]=='limit-high'&&(_0x39747d=_0x58f3d0==_0x3ffe0d(0x268)?_0x570b3e:_0x2ef057),config[_0x3ffe0d(0x2c0)]=='limit-low'&&(_0x39747d=_0x58f3d0=='buy'?_0x2ef057:_0x570b3e));_0x4c9ca1=formatResult(_0x4c9ca1,0x8),_0x39747d=formatResult(_0x39747d,0x8);const _0x17307e=_0x58f3d0=='sell'?config[_0x3ffe0d(0x261)]?String[_0x3ffe0d(0x267)]('0x'+config[_0x3ffe0d(0x261)])+'\x20':'':config[_0x3ffe0d(0x2ff)]?String['fromCodePoint']('0x'+config[_0x3ffe0d(0x2ff)])+'\x20':'',_0x2f83ea=_0x5ac4bf==_0x3ffe0d(0x301)?_0x3ffe0d(0x250):config[_0x3ffe0d(0x2c0)]==_0x3ffe0d(0x1a1)?_0x3ffe0d(0x2ad):_0x3ffe0d(0x1e2),_0xa8381e=new Date()[_0x3ffe0d(0x2b1)]()[_0x3ffe0d(0x24a)]()['slice'](-0x6)+'-'+Math[_0x3ffe0d(0x292)]()[_0x3ffe0d(0x24a)]()[_0x3ffe0d(0x293)](-0x6);lastOrders[_0x3ffe0d(0x2db)]({'customId':_0xa8381e,'symbol':_0x2a8376,'coin':_0x2c46a3[_0x3ffe0d(0x235)],'side':_0x58f3d0,'reverse':_0x2c46a3[_0x3ffe0d(0x204)],'filled':0x0});if(_0x5ac4bf==_0x3ffe0d(0x301))logHistory('order',''+_0x17307e+_0x2f83ea+_0x3ffe0d(0x272)+_0x2a8376+'\x20'+_0x58f3d0+'\x20#'+formatResult(_0x4c9ca1,0x8)+'\x20@'+formatResult(_0x39747d,0x8));else logHistory(_0x3ffe0d(0x2fc),''+_0x17307e+_0x2f83ea+_0x3ffe0d(0x272)+_0x2a8376+'\x20'+_0x58f3d0+'\x20#'+formatResult(_0x4c9ca1,0x8)+'\x20@'+formatResult(_0x39747d,0x8));const _0x192e46=await exchange['createOrder'](_0x2a8376,_0x5ac4bf,_0x58f3d0,_0x4c9ca1,_0x39747d,{'clientOrderId':_0xa8381e}),_0x12fe8c=lastOrders[_0x3ffe0d(0x2f3)]-0x1;_0x12fe8c>=0x0&&lastOrders[_0x12fe8c][_0x3ffe0d(0x24c)]==_0xa8381e&&(lastOrders[_0x12fe8c]={...lastOrders[_0x12fe8c],'orderId':_0x192e46['id'],'amount':_0x192e46['amount'],'price':_0x192e46[_0x3ffe0d(0x2b4)],'fee':_0x192e46['fee']});if(config[_0x3ffe0d(0x291)]!=0x0){let _0x54dd51=null;if(cooldownTracker['length']==config[_0x3ffe0d(0x291)]-0x1)_0x54dd51=cooldownTracker['shift']();const _0x4070b6=getTimeStamp();cooldownTracker[_0x3ffe0d(0x2db)](_0x4070b6);if(_0x54dd51){const _0x26128b=fns['differenceInSeconds'](new Date(_0x4070b6),new Date(_0x54dd51));if(_0x26128b<cooldownInterval){logHistory(_0x3ffe0d(0x1ce),_0x3ffe0d(0x2ed)+config[_0x3ffe0d(0x291)]+_0x3ffe0d(0x1fb)+cooldownInterval/0x3c+_0x3ffe0d(0x1a4)+cooldownPeriod/(0xe10*0x3e8)+_0x3ffe0d(0x2de)),coolingDown=!![];break;}}}}catch(_0x3ced1b){if(_0x3ced1b['toString']()[_0x3ffe0d(0x2ef)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x3ffe0d(0x2bb)](_0x129cd9=>_0x129cd9[_0x3ffe0d(0x288)]!=_0x2a8376),logHistory('error',_0x3ffe0d(0x2dd)+_0x2a8376),_0x2ce4e8=!![];else _0x3ced1b[_0x3ffe0d(0x24a)]()[_0x3ffe0d(0x2ef)](_0x3ffe0d(0x2c6))?(lastOrders=lastOrders[_0x3ffe0d(0x2bb)](_0x53058d=>_0x53058d[_0x3ffe0d(0x288)]!=_0x2a8376),logHistory(_0x3ffe0d(0x1ce),_0x3ffe0d(0x24e)+_0x2a8376),_0x2ce4e8=!![]):(lastOrders=lastOrders[_0x3ffe0d(0x2bb)](_0x1569d7=>_0x1569d7[_0x3ffe0d(0x288)]!=_0x2a8376),await handleError(_0x3ced1b,_0x3ffe0d(0x1c0),_0x2a8376));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3ffe0d(0x2f3)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x379e34=config['ordertype']==_0x3ffe0d(0x301)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x15d03e=_0x3ffe0d;validateOrders(_0x15d03e(0x1fa));},_0x379e34);}else unlockOrders();_0x2ce4e8&&config['headless']&&await pauseBot(_0x3ffe0d(0x1ec)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3ffe0d(0x2d1)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x3ffe0d(0x1be));else lockOrders!=ORDERS[_0x3ffe0d(0x30f)]&&(!config[_0x3ffe0d(0x299)]&&(config[_0x3ffe0d(0x2c0)]=='market'?logHistory('error',_0x3ffe0d(0x1a7)):logHistory('error',_0x3ffe0d(0x248))));}}function persistOpenOrders(_0x44aa90){const _0x44b2fd=_0x3ffd09,_0x4e3532={...config,'openOrders':_0x44aa90};let _0xd3800b=dbConfig[_0x44b2fd(0x1cc)](_0x44b2fd(0x1e5))[_0x44b2fd(0x226)]({'botID':botID})[_0x44b2fd(0x1a8)]();_0xd3800b&&dbConfig[_0x44b2fd(0x1cc)](_0x44b2fd(0x1e5))[_0x44b2fd(0x226)]({'botID':botID})[_0x44b2fd(0x1f1)](_0x4e3532)[_0x44b2fd(0x1df)]();}function restoreOrders(){const _0x5b1ac7=_0x3ffd09;let _0x34f7b4;config['openOrders']&&allOpenOrders['forEach'](_0x2e1eb7=>{const _0x20790d=_0x1b90,_0x4291a0=config[_0x20790d(0x20e)]['find'](_0x724cf5=>_0x724cf5[_0x20790d(0x2a0)]==_0x2e1eb7['id']);_0x4291a0&&(lastOrders[_0x20790d(0x2db)](_0x4291a0),_0x34f7b4=_0x2e1eb7[_0x20790d(0x2a1)]);});if(lastOrders[_0x5b1ac7(0x2f3)]>0x0){lockOrders=ORDERS[_0x5b1ac7(0x2af)],validateOrdersState=_0x5b1ac7(0x233),allOrdersPlaced=!![];const _0x2eda20=new Date()[_0x5b1ac7(0x2b1)](),_0x4950b3=config[_0x5b1ac7(0x2c0)]==_0x5b1ac7(0x301)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x34f7b4+_0x4950b3>_0x2eda20){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x6f8223=_0x5b1ac7;validateOrders(_0x6f8223(0x1fa));},_0x34f7b4+_0x4950b3-_0x2eda20);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x57d87c=_0x3ffd09;if(!coinsLoaded){process[_0x57d87c(0x255)]({'telegrammsg':_0x57d87c(0x1b1)},_0x2c42fb=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4e0b8d='';if(config['showname'])_0x4e0b8d='<b>'+config[_0x57d87c(0x210)]+_0x57d87c(0x2d6);else _0x4e0b8d=_0x57d87c(0x2d9)+botID+_0x57d87c(0x2d6);const _0x9b55d8=getKPIs('basecoin'),_0x2428af=getKPIs(_0x57d87c(0x258),config[_0x57d87c(0x258)]),_0x59e35a=getKPIs(_0x57d87c(0x2cb)),_0x2ca657=getKPIs('net-fiat',config[_0x57d87c(0x258)]);_0x4e0b8d+=_0x57d87c(0x1f2),_0x4e0b8d+=_0x9b55d8[_0x57d87c(0x223)]+_0x57d87c(0x29f)+_0x9b55d8[_0x57d87c(0x1a8)]+'\x0a',_0x4e0b8d+=_0x9b55d8[_0x57d87c(0x23a)]+':\x20'+_0x9b55d8[_0x57d87c(0x28f)]+'%\x0a',_0x4e0b8d+=_0x2428af[_0x57d87c(0x223)]+'\x20:\x20'+_0x2428af[_0x57d87c(0x1a8)]+'\x0a',_0x4e0b8d+=_0x2428af[_0x57d87c(0x23a)]+':\x20'+_0x2428af[_0x57d87c(0x28f)]+'%\x0a',_0x4e0b8d+=_0x59e35a[_0x57d87c(0x223)]+':\x20'+_0x59e35a['value']+'\x20('+config[_0x57d87c(0x2d5)]+')\x0a',_0x4e0b8d+=_0x59e35a[_0x57d87c(0x23a)]+':\x20'+_0x59e35a[_0x57d87c(0x28f)]+'%\x20('+config[_0x57d87c(0x2d5)]+')\x0a',_0x4e0b8d+=_0x2ca657[_0x57d87c(0x223)]+':\x20'+_0x2ca657[_0x57d87c(0x1a8)]+'\x20('+config[_0x57d87c(0x258)]+')\x0a',_0x4e0b8d+=_0x2ca657[_0x57d87c(0x23a)]+':\x20'+_0x2ca657[_0x57d87c(0x28f)]+_0x57d87c(0x214)+config[_0x57d87c(0x258)]+')\x0a',_0x4e0b8d+=_0x57d87c(0x273),process[_0x57d87c(0x255)]({'telegrammsg':_0x4e0b8d},_0x10eb2f=>{});}async function sendPortfolioTelegram(){const _0x1b5d0c=_0x3ffd09;if(!coinsLoaded){process[_0x1b5d0c(0x255)]({'telegrammsg':_0x1b5d0c(0x1b1)},_0x56ae78=>{});return;}let _0x1dbdcd='';if(config[_0x1b5d0c(0x2e4)])_0x1dbdcd=_0x1b5d0c(0x1d7)+config['botname']+_0x1b5d0c(0x209);else _0x1dbdcd=_0x1b5d0c(0x2d9)+botID+_0x1b5d0c(0x209);_0x1dbdcd+=_0x1b5d0c(0x1f2),_0x1dbdcd+=_0x1b5d0c(0x1f4),_0x1dbdcd+=_0x1b5d0c(0x30c),_0x1dbdcd+=_0x1b5d0c(0x1f4),currentCoins['forEach'](_0xd290e0=>{const _0x4be824=_0x1b5d0c;_0x1dbdcd+=_0xd290e0[_0x4be824(0x235)]['padEnd'](0x7)+'|\x20'+formatPad(_0xd290e0['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xd290e0[_0x4be824(0x206)],0x2,0x6)+'|\x20'+formatPad(_0xd290e0['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1dbdcd+='</pre>',process[_0x1b5d0c(0x255)]({'telegrammsg':_0x1dbdcd},_0x320059=>{});}function formatPad(_0x18152c,_0x5638ba,_0x46de66){const _0x2db48c=_0x3ffd09,_0xec9938=formatResultString(_0x18152c,_0x5638ba);return _0xec9938?_0xec9938['padStart'](_0x46de66):''[_0x2db48c(0x1c8)](_0x46de66);}function logHistory(_0x50e82b,_0x4b5f62,_0x479f0b=''){const _0x1c1c6c=_0x3ffd09;let _0xbd425b={'time':getTimeStamp(),'type':_0x50e82b,'event':_0x4b5f62};dbLogs[_0x1c1c6c(0x1cc)]('logs')[_0x1c1c6c(0x2db)](_0xbd425b)['write']();if(_0x479f0b=='')_0x479f0b=_0x4b5f62;proxyEmit(_0x1c1c6c(0x2e5),{'log':_0xbd425b,'summary':_0x479f0b}),process[_0x1c1c6c(0x255)]({'telegram':{..._0xbd425b,'botname':config[_0x1c1c6c(0x210)],'showname':config[_0x1c1c6c(0x2e4)]}},_0xb726bf=>{}),logger['full'](''+_0xbd425b[_0x1c1c6c(0x2e5)]);}function emitHistory(_0x210f0c={}){const _0x37f0b6=_0x3ffd09;Object['keys'](_0x210f0c)['length']==0x0&&(_0x210f0c={'type':[_0x37f0b6(0x2fc),'event'],'event':'','page':0x1});if(_0x210f0c['type'][_0x37f0b6(0x2ef)](_0x37f0b6(0x2e5)))_0x210f0c[_0x37f0b6(0x300)][_0x37f0b6(0x303)](_0x210f0c[_0x37f0b6(0x300)][_0x37f0b6(0x295)](_0x37f0b6(0x2e5)),0x1,_0x37f0b6(0x1ce),_0x37f0b6(0x195),'success');if(dbLogs[_0x37f0b6(0x244)](_0x37f0b6(0x2f6))[_0x37f0b6(0x1a8)]()){let _0x3d2918=dbLogs[_0x37f0b6(0x1cc)](_0x37f0b6(0x2f6))['filter'](_0x4da978=>{const _0x21de8e=_0x37f0b6;if(_0x210f0c[_0x21de8e(0x300)][_0x21de8e(0x2f3)]==0x0)return![];else return _0x210f0c[_0x21de8e(0x300)]['includes'](_0x4da978[_0x21de8e(0x300)]);})[_0x37f0b6(0x2bb)](_0x63be34=>{const _0x5c50b3=_0x37f0b6;if(_0x210f0c[_0x5c50b3(0x2e5)]=='')return!![];else return _0x63be34[_0x5c50b3(0x2e5)]['toLowerCase']()[_0x5c50b3(0x2ef)](_0x210f0c['event'][_0x5c50b3(0x2b6)]());})['sortBy'](_0x37f0b6(0x2fb)),_0x57dcc6=_0x3d2918['value']()[_0x37f0b6(0x2f3)];_0x3d2918=_0x3d2918['reverse']()[_0x37f0b6(0x293)]((_0x210f0c[_0x37f0b6(0x1e4)]-0x1)*logPageSize,_0x210f0c[_0x37f0b6(0x1e4)]*logPageSize-0x1)['reverse']()[_0x37f0b6(0x1a8)](),proxyEmit(_0x37f0b6(0x2bf),{'logs':_0x3d2918,'total':_0x57dcc6});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2bcccd){const _0x31f319=_0x3ffd09;if(dbLogs['has'](_0x31f319(0x2f6))[_0x31f319(0x1a8)]()){const _0x538cdd=dbLogs['get']('logs')[_0x31f319(0x1a9)]('time')[_0x31f319(0x2bb)](_0x18b04b=>{const _0x3d17ad=_0x31f319;return _0x18b04b[_0x3d17ad(0x300)]==_0x3d17ad(0x2fc);})[_0x31f319(0x1a8)]();dbLogs[_0x31f319(0x1cc)]('logs')[_0x31f319(0x2b8)]()[_0x31f319(0x1df)](),dbLogs['get'](_0x31f319(0x2f6))[_0x31f319(0x1f1)](_0x538cdd)[_0x31f319(0x1df)](),emitHistory(_0x2bcccd);}}async function pauseBot(_0xb34d90=''){const _0x5f397a=_0x3ffd09,_0x56ed11=new Date()[_0x5f397a(0x2b1)]();if(!lastErrorShown||_0x56ed11-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x56ed11;!lastBotPause?(lastBotPause=_0x56ed11,consecutivePauses=0x1):(_0x56ed11-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x5f397a(0x255)]({'stop':_0x5f397a(0x2c2)},_0x2685c1=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x5f397a(0x2b1)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xb34d90)_0xb34d90+=_0x5f397a(0x1a3);logHistory(_0x5f397a(0x1ce),_0xb34d90+_0x5f397a(0x1ad)+pauseBotInterval/0xea60+_0x5f397a(0x19b)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x368aae=_0x3ffd09;process[_0x368aae(0x255)]({'stop':_0x368aae(0x1b8)},_0x27cfc1=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x482da6,_0x22f714){const _0x155e6c=_0x3ffd09;if(_0x482da6[_0x155e6c(0x24a)]()[_0x155e6c(0x2ef)](_0x155e6c(0x24d)))return logHistory('error',config['exchange']+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x482da6[_0x155e6c(0x24a)]()[_0x155e6c(0x2ef)](_0x155e6c(0x1c1)))return logHistory(_0x155e6c(0x1ce),config[_0x155e6c(0x286)]+_0x155e6c(0x2ea)),![];else{if(_0x482da6[_0x155e6c(0x24a)]()[_0x155e6c(0x2ef)](_0x155e6c(0x276)))return logHistory(_0x155e6c(0x1ce),config[_0x155e6c(0x286)]+_0x155e6c(0x266)),logHistory(_0x155e6c(0x1ce),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x482da6,_0x22f714);}}}async function handleError(_0x3b68bc,_0x185f4e,_0x467399=''){const _0x1fd6e1=_0x3ffd09,_0x51dd51=config[_0x1fd6e1(0x286)]||_0x1fd6e1(0x1a5);if(_0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)](_0x1fd6e1(0x2f4)))await pauseBot(config[_0x1fd6e1(0x286)]+_0x1fd6e1(0x2a5));else{if(_0x3b68bc['toString']()[_0x1fd6e1(0x2ef)]('ExchangeNotAvailable'))await pauseBot(config[_0x1fd6e1(0x286)]+_0x1fd6e1(0x1e7));else{if(_0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)]('RequestTimeout'))await pauseBot(config[_0x1fd6e1(0x286)]+_0x1fd6e1(0x2d3));else{if(_0x3b68bc['toString']()[_0x1fd6e1(0x2ef)](_0x1fd6e1(0x21b)))await pauseBot(config[_0x1fd6e1(0x286)]+_0x1fd6e1(0x1a6));else{if(_0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)](_0x1fd6e1(0x2b3)))logHistory(_0x1fd6e1(0x1ce),_0x185f4e+_0x1fd6e1(0x27c)),logHistory(_0x1fd6e1(0x1ce),_0x1fd6e1(0x193)),await killBot();else{if(_0x3b68bc['toString']()['includes'](_0x1fd6e1(0x2fd)))logHistory(_0x1fd6e1(0x1ce),_0x185f4e+_0x1fd6e1(0x1db)),logHistory(_0x1fd6e1(0x1ce),_0x1fd6e1(0x193)),await killBot();else{if(_0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)](_0x1fd6e1(0x24d)))logHistory('error',_0x185f4e+_0x1fd6e1(0x1a3)+config[_0x1fd6e1(0x286)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x1fd6e1(0x1ce),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)](_0x1fd6e1(0x1c1)))logHistory('error',_0x185f4e+_0x1fd6e1(0x1a3)+config[_0x1fd6e1(0x286)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x1fd6e1(0x1ce),_0x1fd6e1(0x193)),await killBot();else{if(_0x3b68bc[_0x1fd6e1(0x24a)]()['includes'](_0x1fd6e1(0x276)))logHistory(_0x1fd6e1(0x1ce),_0x185f4e+_0x1fd6e1(0x1a3)+config[_0x1fd6e1(0x286)]+_0x1fd6e1(0x1b6)),logHistory(_0x1fd6e1(0x1ce),_0x1fd6e1(0x193)),await killBot();else _0x3b68bc[_0x1fd6e1(0x24a)]()[_0x1fd6e1(0x2ef)]('InsufficientFunds')?logHistory(_0x1fd6e1(0x1ce),_0x185f4e+_0x1fd6e1(0x200)+_0x467399):(logger[_0x1fd6e1(0x259)](_0x185f4e+_0x1fd6e1(0x2c9),_0x3b68bc),await pauseBot(_0x1fd6e1(0x25c)));}}}}}}}}}function formatResult(_0x459aeb,_0x63871f){const _0x157233=_0x3ffd09;return parseFloat(_0x459aeb[_0x157233(0x246)](_0x63871f));}function formatResultTruncate(_0xf81bb1,_0x4ab9c7){const _0xdb196b=_0x3ffd09;let _0x48438e=formatResultString(_0xf81bb1,0xa),_0x1ddea0=_0x48438e[_0xdb196b(0x295)]('.');return _0x1ddea0!=-0x1&&(_0x48438e=_0x48438e[_0xdb196b(0x293)](0x0,_0x1ddea0+_0x4ab9c7+0x1)),Number(_0x48438e);}function formatResultString(_0x19a0dd,_0x22fa75){const _0x1bf00a=_0x3ffd09;let _0x35fb93;if(!(''+_0x19a0dd)[_0x1bf00a(0x2ef)]('e'))_0x35fb93=+(Math[_0x1bf00a(0x2a9)](_0x19a0dd+'e+'+_0x22fa75)+'e-'+_0x22fa75);else{let _0x8f3425=(''+_0x19a0dd)['split']('e'),_0x219c00='';+_0x8f3425[0x1]+_0x22fa75>0x0&&(_0x219c00='+'),_0x35fb93=+(Math['round'](+_0x8f3425[0x0]+'e'+_0x219c00+(+_0x8f3425[0x1]+_0x22fa75))+'e-'+_0x22fa75);}return Number(_0x35fb93)[_0x1bf00a(0x246)](_0x22fa75);}function getServerTime(){const _0xa3fda1=_0x3ffd09,_0x49ba6c=new Date();return _0x49ba6c[_0xa3fda1(0x203)]()+'/'+(_0x49ba6c[_0xa3fda1(0x240)]()+0x1)[_0xa3fda1(0x24a)]()[_0xa3fda1(0x1c8)](0x2,'0')+'/'+_0x49ba6c[_0xa3fda1(0x2e8)]()[_0xa3fda1(0x24a)]()['padStart'](0x2,'0')+'\x20'+_0x49ba6c[_0xa3fda1(0x2e0)]()[_0xa3fda1(0x24a)]()[_0xa3fda1(0x1c8)](0x2,'0')+':'+_0x49ba6c[_0xa3fda1(0x307)]()[_0xa3fda1(0x24a)]()[_0xa3fda1(0x1c8)](0x2,'0')+':'+_0x49ba6c[_0xa3fda1(0x1c3)]()[_0xa3fda1(0x24a)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5aebf1=_0x3ffd09,_0x44eecc=shiftedTime();return _0x44eecc[_0x5aebf1(0x203)]()+'/'+(_0x44eecc['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x44eecc[_0x5aebf1(0x2e8)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x44eecc[_0x5aebf1(0x2e0)]()[_0x5aebf1(0x24a)]()[_0x5aebf1(0x1c8)](0x2,'0')+':'+_0x44eecc[_0x5aebf1(0x307)]()[_0x5aebf1(0x24a)]()[_0x5aebf1(0x1c8)](0x2,'0')+':'+_0x44eecc[_0x5aebf1(0x1c3)]()['toString']()[_0x5aebf1(0x1c8)](0x2,'0');}function getDate(){const _0xb6c307=_0x3ffd09,_0x3a444f=shiftedTime();return _0x3a444f[_0xb6c307(0x203)]()+'/'+(_0x3a444f[_0xb6c307(0x240)]()+0x1)[_0xb6c307(0x24a)]()['padStart'](0x2,'0')+'/'+_0x3a444f['getDate']()[_0xb6c307(0x24a)]()['padStart'](0x2,'0');}function getHour(){const _0x4f2eba=_0x3ffd09,_0x34e0f5=shiftedTime();return _0x34e0f5['getHours']()['toString']()[_0x4f2eba(0x1c8)](0x2,'0');}function sleep(_0x3c181d){return new Promise(_0x3d31f8=>setTimeout(_0x3d31f8,_0x3c181d));}function shiftedTime(){const _0x5662a0=_0x3ffd09,_0x5ef3e2=new Date();let _0x2aa362=_0x5ef3e2;if(config&&config[_0x5662a0(0x2f7)]!==0x0)_0x2aa362=fns[_0x5662a0(0x294)](_0x5ef3e2,{'hours':config[_0x5662a0(0x2f7)]});return _0x2aa362;}function timer(_0x932a3){const _0x1a4c63=_0x3ffd09,_0x3af001=new Date();!lasttime?console[_0x1a4c63(0x1c4)](_0x1a4c63(0x1ac),_0x932a3,_0x3af001):console['log'](_0x1a4c63(0x1ac),_0x932a3,(_0x3af001-lasttime)/0x3e8),lasttime=_0x3af001;}