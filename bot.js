const _0x10a1ec=_0x1fa8;(function(_0x5074d3,_0x4cde87){const _0x41135d=_0x1fa8,_0x44bb27=_0x5074d3();while(!![]){try{const _0x5efb88=parseInt(_0x41135d(0x223))/0x1*(-parseInt(_0x41135d(0x1e2))/0x2)+parseInt(_0x41135d(0x263))/0x3*(parseInt(_0x41135d(0x22d))/0x4)+parseInt(_0x41135d(0x1f2))/0x5*(-parseInt(_0x41135d(0x266))/0x6)+parseInt(_0x41135d(0x240))/0x7*(parseInt(_0x41135d(0x217))/0x8)+parseInt(_0x41135d(0x1e3))/0x9+-parseInt(_0x41135d(0x20b))/0xa+parseInt(_0x41135d(0x206))/0xb;if(_0x5efb88===_0x4cde87)break;else _0x44bb27['push'](_0x44bb27['shift']());}catch(_0x5c0941){_0x44bb27['push'](_0x44bb27['shift']());}}}(_0x4740,0xe3d36));const _0x41313d=function(){let _0x3fa2d5=!![];return function(_0x469d0a,_0x217a81){const _0x1c7fce=_0x3fa2d5?function(){if(_0x217a81){const _0x5575b7=_0x217a81['apply'](_0x469d0a,arguments);return _0x217a81=null,_0x5575b7;}}:function(){};return _0x3fa2d5=![],_0x1c7fce;};}(),_0x4f60f2=_0x41313d(this,function(){const _0x51b49c=_0x1fa8;return _0x4f60f2[_0x51b49c(0x19b)]()[_0x51b49c(0x26b)]('(((.+)+)+)+$')[_0x51b49c(0x19b)]()[_0x51b49c(0x1b1)](_0x4f60f2)[_0x51b49c(0x26b)](_0x51b49c(0x25a));});_0x4f60f2();'use strict';const ccxt=require(_0x10a1ec(0x1fa)),low=require(_0x10a1ec(0x23b)),FileSync=require(_0x10a1ec(0x18d)),fs=require('fs'),fns=require(_0x10a1ec(0x148)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x10a1ec(0x234)),Crypt=require(_0x10a1ec(0x155))['Crypt'];let exchange,wsClient;function _0x1fa8(_0x50e95c,_0x491d2f){const _0x3cf872=_0x4740();return _0x1fa8=function(_0x4f60f2,_0x41313d){_0x4f60f2=_0x4f60f2-0x140;let _0x474010=_0x3cf872[_0x4f60f2];return _0x474010;},_0x1fa8(_0x50e95c,_0x491d2f);}global[_0x10a1ec(0x203)]={},global[_0x10a1ec(0x1d7)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x10a1ec(0x164),_0x10a1ec(0x239),'HOT/EUR',_0x10a1ec(0x22f),'NANO/',_0x10a1ec(0x1ea)];function _0x4740(){const _0xaea9ad=['\x20has\x20a\x2024h\x20drop\x20of\x20','page','4LMlUBN','10701468IpKrTA','getDate','decrypt','storeConfiguration','Order(s)\x20validated\x20-\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','delta','YOYOW/','AuthenticationError','cumulativeQuoteAssetTransactedQty','getSeconds','accumulatedQuantity','limits','slice','yyyy-MM-dd\x27T\x27HH:mm:ss','88975OMIzSn','close','padStart','replace','BUSD','No\x20more\x20open\x20orders\x20-\x20','BNB/','concat','ccxt','getMinutes','date','error','getHours','balancing\x20resumes\x20when\x20cooldown\x20ends','set','coin','privateKey','ticker','apiKey','Invalid\x20quantity','18168722AHXRBT','breakeven','\x20-\x20','includes','InvalidNonce','17330050fdelGi','-performance.json','price','API-key\x20format\x20invalid','args','timeshift','USDT','/USDT','trade','subscribeSymbol24hrTicker','currency','event-history','8ekSDJY','\x20hour','showname','fromCodePoint','valid','success','no\x20open\x20orders','subscribeSpotUserDataStream','limit-high','\x20-\x20bot\x20not\x20started','stringify','defaults','403313kCxZmE','get','coin-loading-progress','Binance\x20not\x20responding','threshold','kill','push','enabled','2.5.0','wsKey','16412HxkBeA','sell','XEM/BUSD','sortBy','getCoins()','remainingSymbols','emojibuy','binance','botname','FILLED','differenceInSeconds','basecoin','HOT/BTC','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','lowdb','wss://stream.binance.us:9443','spot','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','EUR','10712303OfonIy','eur','fetchBalance','filter','last','filled','Unfilled\x20order(s)\x20canceled\x20after\x20','isArray','API\x20or\x20clock\x20sync\x20issue','</pre>','split','getTime','offset','change24h','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','************','event','\x20minutes\x20-\x20','exchange','startnumber','limit-low','join','balances','startdate','Cooldown\x20ended\x20-\x20balancing\x20resumed','precision','(((.+)+)+)+$','fee','headless','getFullYear','kline','getMonth','wsMarket','max','changes','267PpbhVF','value','Limit\x20(high-margin)','426ZLpAre','Binance\x20API\x20secret\x20is\x20invalid','version','milliseconds','BNB','search','running','configuration','starting-balances','cost','min','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','number','sha256','argv','priceChangePercent','createOrder','add','date-fns','2.3.5','liquidity','message','type','deleteHistoryAlerts','log','bb-settings.json','reverse','mkdirSync','./config/','initclient','cloneDeep','hybrid-crypto-js','.json','subscribeSpotKline','cancelOrder','\x20|\x20Binance\x20API\x20key\x20invalid','final','startprice','ETH','-config.json','\x20>\x20','orderStatus','timestamp','data','usd','balancing\x20resumed','DAI/','-results.json','Bot\x20','\x20|\x20Binance\x20API\x20secret\x20invalid','progress','cancelLoading','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','initws()','total','sells','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','find','emojisell','buys','Order\x20amount\x20is\x20invalid:\x20','logs','amount','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','test','has','exec','getPortfolio()','storeHeadless','fetchClosedOrders','Binance\x20not\x20available\x20(1)','realized','writeFile','length','configuration-stored','Binance\x20API\x20key\x20is\x20invalid','RSA-OAEP','entries','indexOf','fetchTickers','sort','eventType','timeout','emitHistory','commissionAsset','wss://stream.binance.com:9443','write','lowdb/adapters/FileSync','formattedMessage','side','Pausing\x20for\x20','toFixed','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','WebSockets(','datetime',',\x20must\x20be\x20a\x203\x20digit\x20number','yyyy/MM/dd','cancelOrders()','fees','Error:\x20Invalid\x20argument\x20','target','toString','toLowerCase','market','\x20portfolio:\x20\x0a\x0a','Manual\x20balancing\x20required:\x20','loadSymbols()','Executed\x20','parse','outboundAccountPosition','format','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit','initial','apiSecret','starting-balance-','coins','eventTime','parseISO','Order\x20filled:\x20','settings','buy','\x20minutes','constructor','BTC','portfolio','forEach','ordertype','splice','cooldown','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','botID','findIndex','orderId','recreateCoinResults()','bot-','Market','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','secure','placeOrder()','order','symbols','MIN_NOTIONAL','string','distribution','Failed\x20to\x20load\x20coin\x20data\x20for\x20','padEnd','\x20order:\x20','Binance\x20API\x20blocked','function','RequestTimeout','./version.json','round',')\x20|\x20Error\x20details:\x20','time','/backup/','restart','\x20orders\x20in\x20less\x20than\x20','abs','-------------------------------\x0a','send','change','Limit\x20(low-margin)','excluded','assign','ongoing','bot','remove','symbol','performance'];_0x4740=function(){return _0xaea9ad;};return _0x4740();}let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x10a1ec(0x1cd))[_0x10a1ec(0x268)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x10a1ec(0x176)](botID)&&(console[_0x10a1ec(0x14e)](_0x10a1ec(0x199)+botID+_0x10a1ec(0x195)),process['exit'](0x1));const userID=process[_0x10a1ec(0x144)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x10a1ec(0x152);!fs['existsSync'](configpath)&&fs[_0x10a1ec(0x151)](configpath);const configfile=configpath+_0x10a1ec(0x1bd)+botID+_0x10a1ec(0x15d),logfile=configpath+_0x10a1ec(0x1bd)+botID+'-events.json',performancefile=configpath+_0x10a1ec(0x1bd)+botID+_0x10a1ec(0x20c),coinresultsfile=configpath+_0x10a1ec(0x1bd)+botID+_0x10a1ec(0x165),settingsfile=configpath+_0x10a1ec(0x14f),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x10a1ec(0x1d1),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x10a1ec(0x222)]({'logs':[]})[_0x10a1ec(0x18c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x10a1ec(0x222)]({'data':[]})[_0x10a1ec(0x18c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x10a1ec(0x222)]({'bot':[]})[_0x10a1ec(0x18c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x10a1ec(0x18c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x33fa25)=>{},'debug':(..._0x758ac5)=>{},'notice':(..._0x2ce659)=>{},'info':(..._0x1e4956)=>{},'warning':(..._0x3af1c)=>{},'error':async function(..._0x229ca0){const _0x3fc77e=_0x10a1ec,_0x4cc8a5=new Date()[_0x3fc77e(0x24b)]();if(!lastErrorShown||_0x4cc8a5-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime']();let _0xce1346='';if(_0x229ca0[0x0])_0xce1346+=_0x229ca0[0x0];if(_0x229ca0[0x1]&&_0x229ca0[0x1]['error']&&_0x229ca0[0x1][_0x3fc77e(0x1fd)][_0x3fc77e(0x14b)])_0xce1346+=_0x3fc77e(0x208)+_0x229ca0[0x1]['error'][_0x3fc77e(0x14b)];logging(_0x3fc77e(0x193)+consecutivePauses+_0x3fc77e(0x1cf),''+_0xce1346),await pauseBot(_0x3fc77e(0x17c));}}},crypt=new Crypt({'md':_0x10a1ec(0x143),'rsaStandard':_0x10a1ec(0x182)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x10a1ec(0x210)]!=config[_0x10a1ec(0x210)]&&updateTimeshift(settings[_0x10a1ec(0x210)]);process['send']({'started':_0x10a1ec(0x26c)},_0x4c75a9=>{}),initializeProcessListeners();function proxyEmit(_0x3e5755,_0x26c97d=null){const _0x583509=_0x10a1ec;process[_0x583509(0x1d6)]({'function':_0x3e5755,'args':_0x26c97d},_0x3a764e=>{});}function initializeProcessListeners(){process['on']('message',_0x53b121=>{const _0x1c44b8=_0x1fa8;switch(Object['keys'](_0x53b121)[0x0]){case'timeshift':_0x53b121[_0x1c44b8(0x210)]!=undefined&&(settings[_0x1c44b8(0x210)]=_0x53b121[_0x1c44b8(0x210)],updateTimeshift(settings[_0x1c44b8(0x210)]));break;case'function':switch(_0x53b121[_0x1c44b8(0x1cb)]){case _0x1c44b8(0x153):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x1c44b8(0x189):emitHistory(_0x53b121[_0x1c44b8(0x20f)]);break;case _0x1c44b8(0x14d):deleteHistoryAlerts(_0x53b121[_0x1c44b8(0x20f)]);break;case'getPortfolio':getPortfolio(_0x53b121[_0x1c44b8(0x20f)]);break;case _0x1c44b8(0x1e6):storeConfiguration(_0x53b121[_0x1c44b8(0x20f)]);break;case _0x1c44b8(0x17a):storeHeadless(_0x53b121[_0x1c44b8(0x20f)]);break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x53b121[_0x1c44b8(0x20f)]);break;case _0x1c44b8(0x169):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x5b6d2e=_0x10a1ec;if(pidBalances)clearTimeout(pidBalances);if(config[_0x5b6d2e(0x204)]!=''){await initExchange(config[_0x5b6d2e(0x204)],config[_0x5b6d2e(0x1a8)]),await initWsEvents();let _0xc1a5d7=await loadSymbols();if(_0xc1a5d7){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x5b6d2e(0x17f)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x5a26d4,_0xa1dabe){const _0x57f0ca=_0x10a1ec,_0xb91637=ccxt[config[_0x57f0ca(0x252)]];let _0x1cacf9;switch(config[_0x57f0ca(0x252)]){case _0x57f0ca(0x234):_0x1cacf9='wss://stream.binance.com:9443';break;case'binanceus':_0x1cacf9=_0x57f0ca(0x23c);break;default:_0x1cacf9=_0x57f0ca(0x18b);}exchange=new _0xb91637({'apiKey':_0x5a26d4,'secret':_0xa1dabe,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5a26d4,'api_secret':_0xa1dabe,'beautify':!![],'wsUrl':_0x1cacf9},logger);let _0x141f81=config[_0x57f0ca(0x252)]=='binanceus'?_0x57f0ca(0x211):'EUR',_0x508fb6=config[_0x57f0ca(0x238)]=='ETH'?_0x57f0ca(0x15c):_0x57f0ca(0x1b2);stablecoins={'eur':{'coin':''+_0x508fb6+_0x141f81,'symbol':_0x508fb6+'/'+_0x141f81},'usd':{'coin':_0x508fb6+_0x57f0ca(0x211),'symbol':_0x508fb6+_0x57f0ca(0x212)}};}async function initWsEvents(){const _0x1da7f1=_0x10a1ec;!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x1da7f1(0x18e),_0x37be38=>{const _0x467f93=_0x1da7f1;if(isWsFormattedKline(_0x37be38)){global['ticker'][_0x37be38[_0x467f93(0x25e)][_0x467f93(0x1de)]]=_0x37be38['kline'][_0x467f93(0x1f3)];return;}else{if(isWsFormatted24hrTicker(_0x37be38)){global[_0x467f93(0x1d7)][_0x37be38[_0x467f93(0x1de)]]=_0x37be38[_0x467f93(0x145)];return;}else{if(!Array[_0x467f93(0x247)](_0x37be38)&&_0x37be38[_0x467f93(0x22c)][_0x467f93(0x209)]('userData')){if(_0x37be38[_0x467f93(0x260)][_0x467f93(0x209)](_0x467f93(0x23d))){updateNumberCoins(_0x37be38);return;}}}}}),wsClient['on']('reconnected',async _0x1a78dd=>{if(!botPaused)currentCoins=await getCoins(!![]);}));}async function loadSymbols(){const _0x164a89=_0x10a1ec;let _0x469432;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x164a89(0x1c3)][_0x164a89(0x243)](_0x47f130=>{const _0x5efde7=_0x164a89;let _0x2ba9d9=![];return exceptions[_0x5efde7(0x1b4)](_0x410dcb=>{const _0x509a26=_0x5efde7;if(_0x47f130[_0x509a26(0x209)](_0x410dcb))_0x2ba9d9=!![];}),!_0x2ba9d9;}),_0x469432=!![];}catch(_0x6ff192){await handleError(_0x6ff192,_0x164a89(0x1a0)),_0x469432=![];}return _0x469432;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x42cf68=_0x10a1ec;proxyEmit(_0x42cf68(0x26d),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x42cf68(0x256),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x69c4e0=getNormalizedPerformance();emitPerformance(_0x69c4e0),await getStartingBalances(_0x69c4e0);}async function toggleBotMode(){const _0x5409d5=_0x10a1ec;let _0x2832f5=dbConfig[_0x5409d5(0x224)]('bot')['find']({'botID':botID})[_0x5409d5(0x264)]();if(_0x2832f5){const _0x3ca361=!_0x2832f5[_0x5409d5(0x25c)];dbConfig[_0x5409d5(0x224)]('bot')['find']({'botID':botID})['assign']({'headless':_0x3ca361})[_0x5409d5(0x18c)](),config[_0x5409d5(0x25c)]=_0x3ca361,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x532fd4=>{});}function cleanws(){const _0x44a174=_0x10a1ec;wsinitialized=![];ws1&&(ws1[_0x44a174(0x1b4)](_0x57c623=>{const _0x15e5a1=_0x44a174;try{wsClient[_0x15e5a1(0x1f3)](_0x57c623);}catch(_0xf4c544){}}),ws1=[]);if(ws2){try{wsClient['close'](ws2);}catch(_0x22482c){}ws2=null;}ws3&&(ws3[_0x44a174(0x1b4)](_0x1fee4e=>{try{wsClient['close'](_0x1fee4e);}catch(_0x35d099){}}),ws3=[]);}async function initws(){const _0x3d2a3b=_0x10a1ec;cleanws();let _0x4bf640=[];currentCoins['forEach'](_0x557128=>{const _0x5ad7f8=_0x1fa8;if(_0x557128['coin']!=config['basecoin'])_0x4bf640[_0x5ad7f8(0x229)](_0x557128[_0x5ad7f8(0x1de)]);});if(!_0x4bf640[_0x3d2a3b(0x209)](stablecoins[_0x3d2a3b(0x241)][_0x3d2a3b(0x1de)]))_0x4bf640['push'](stablecoins[_0x3d2a3b(0x241)][_0x3d2a3b(0x1de)]);if(!_0x4bf640['includes'](stablecoins[_0x3d2a3b(0x162)]['symbol']))_0x4bf640[_0x3d2a3b(0x229)](stablecoins[_0x3d2a3b(0x162)][_0x3d2a3b(0x1de)]);if(!_0x4bf640['includes'](_0x3d2a3b(0x1f8)+config[_0x3d2a3b(0x238)]))_0x4bf640[_0x3d2a3b(0x229)](_0x3d2a3b(0x1f8)+config[_0x3d2a3b(0x238)]);try{_0x4bf640['forEach']((_0x4bff5a,_0x2f48ad)=>{const _0x474c66=_0x3d2a3b;ws1[_0x2f48ad]=wsClient[_0x474c66(0x157)](noslash(_0x4bff5a),'1m'),ws3[_0x2f48ad]=wsClient[_0x474c66(0x214)](noslash(_0x4bff5a),'spot');}),ws2=wsClient[_0x3d2a3b(0x21e)]();}catch(_0x3224a2){await handleError(_0x3224a2,_0x3d2a3b(0x16b));}let _0x53072f,_0x1ee2a0=0x0;loading[_0x3d2a3b(0x232)]=[];let _0x20c2eb=0x0;_0x4bf640[_0x3d2a3b(0x1b4)](_0x45727e=>{const _0x24d814=_0x3d2a3b;loading['remainingSymbols'][_0x24d814(0x229)](_0x45727e);}),loadingCanceled=![];let _0x525978=![];while(_0x53072f!=_0x4bf640['length']){_0x53072f=0x0,_0x4bf640['forEach'](_0x19307f=>{const _0x58e762=_0x3d2a3b;global['ticker'][noslash(_0x19307f)]&&(loading[_0x58e762(0x232)]=loading[_0x58e762(0x232)][_0x58e762(0x243)](_0x44e07d=>_0x44e07d!=_0x19307f),_0x53072f++);}),loading[_0x3d2a3b(0x168)]=Math[_0x3d2a3b(0x1ce)](_0x53072f/_0x4bf640[_0x3d2a3b(0x17f)]*0x64);loading[_0x3d2a3b(0x168)]!=0x64&&(_0x20c2eb>0x1e*0x5&&(loading[_0x3d2a3b(0x188)]=!![],emitLoadingProgress()),_0x20c2eb>0x3c*0x5&&!_0x525978&&(_0x525978=!![],logHistory('error',_0x3d2a3b(0x1c7)+loading[_0x3d2a3b(0x232)][_0x3d2a3b(0x255)](',\x20')+_0x3d2a3b(0x220))));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x53072f!=_0x1ee2a0&&(_0x1ee2a0=_0x53072f,emitLoadingProgress()),_0x20c2eb++,await sleep(0xc8);}_0x525978&&logHistory(_0x3d2a3b(0x21c),_0x3d2a3b(0x1e8));if(_0x53072f==_0x4bf640['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x583a5f=_0x10a1ec;proxyEmit(_0x583a5f(0x225),loading);}async function getFiat(){const _0xb4a31f=_0x10a1ec;let _0x15bb5b=0x0,_0x1e7bde=0x0;try{_0x15bb5b=global['ticker'][stablecoins[_0xb4a31f(0x241)]['coin']],_0x1e7bde=global[_0xb4a31f(0x203)][stablecoins[_0xb4a31f(0x162)]['coin']];}catch(_0x3f88f5){await handleError(_0x3f88f5,'getFiat()');}return{'eur':Number(_0x15bb5b),'usd':Number(_0x1e7bde)};}function setStartDatePerformance(){const _0x26659e=_0x10a1ec;if(config&&config[_0x26659e(0x14a)][0x0][_0x26659e(0x262)][_0x26659e(0x17f)]!=0x0){const _0x12870f=config[_0x26659e(0x14a)][0x0][_0x26659e(0x262)];dbPerformance[_0x26659e(0x224)](_0x26659e(0x161))[_0x26659e(0x16f)]({'date':config[_0x26659e(0x257)]})[_0x26659e(0x1da)]({'coins':_0x12870f})[_0x26659e(0x18c)]();}}async function recreateCoinResults(){const _0x565e08=_0x10a1ec;let _0x5b37b1,_0x180213=[];try{const _0x1575f5=fns[_0x565e08(0x1a4)](fns[_0x565e08(0x1ac)](config[_0x565e08(0x257)][_0x565e08(0x1f5)](/\//g,'-')),_0x565e08(0x1f1));for(const _0x172334 of currentCoins){if(_0x172334[_0x565e08(0x201)]!=config[_0x565e08(0x238)]){let _0x371f42=0x0,_0x10e034,_0x3974a5;_0x5b37b1=await getAllEventOrders(_0x172334['symbol']);if(_0x5b37b1['length']>0x0)_0x5b37b1['forEach'](_0xd0727=>{const _0x34e9df=_0x565e08,_0x459494=_0x172334['symbol'][_0x34e9df(0x209)](config['basecoin']+'/');_0x180213[_0x34e9df(0x229)]({'datetime':_0xd0727[_0x34e9df(0x194)],'coin':_0x172334[_0x34e9df(0x201)],'symbol':_0x172334['symbol'],'side':_0xd0727['side'],'reverse':_0x459494,'amount':formatResult(_0xd0727['filled'],0x8),'filled':formatResult(_0xd0727['filled'],0x8),'price':formatResult(_0xd0727[_0x34e9df(0x20d)],0x8)}),_0x371f42=_0xd0727[_0x34e9df(0x18f)]==_0x34e9df(0x1af)?_0x371f42+_0xd0727['filled']:_0x371f42-_0xd0727[_0x34e9df(0x245)];if(!_0x3974a5)_0x3974a5=_0xd0727[_0x34e9df(0x20d)];});_0x10e034=_0x172334[_0x565e08(0x142)]-_0x371f42;let _0x1db13d;config['liquidity'][_0x565e08(0x1b4)](_0x11bb61=>{const _0x62332=_0x565e08;!_0x1db13d&&(_0x1db13d=_0x11bb61['changes'][_0x62332(0x16f)](_0x902d92=>_0x902d92['coin']==_0x172334['coin']),_0x1db13d&&(_0x10e034=_0x1db13d['number'],_0x3974a5=_0x1db13d[_0x62332(0x20d)]));});let _0x986cd7=dbCoinResults[_0x565e08(0x224)]('coins')[_0x565e08(0x16f)]({'coin':_0x172334[_0x565e08(0x201)]})[_0x565e08(0x264)]();_0x986cd7={'coin':_0x172334[_0x565e08(0x201)],'number':_0x10e034,'breakeven':_0x3974a5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x565e08(0x224)](_0x565e08(0x1aa))[_0x565e08(0x16f)]({'coin':_0x172334[_0x565e08(0x201)]})['assign'](_0x986cd7)[_0x565e08(0x18c)]();}}_0x180213[_0x565e08(0x186)]((_0x15c979,_0x1f41ae)=>_0x15c979['datetime']>_0x1f41ae['datetime']?0x1:_0x1f41ae[_0x565e08(0x194)]>_0x15c979[_0x565e08(0x194)]?-0x1:0x0);let _0x1f33d2=0x0;for(let _0x274392 of _0x180213){await updateCoinResults(_0x274392,!![]);}}catch(_0x21ed7c){await handleError(_0x21ed7c,_0x565e08(0x1bc));}}async function getAllEventOrders(_0x1b1ff8){const _0x484ce5=_0x10a1ec;let _0x41bd6f=[],_0x4d851a=dbLogs[_0x484ce5(0x224)](_0x484ce5(0x173))['filter'](_0x1174e0=>{const _0x4b8dad=_0x484ce5,_0x17e738=_0x1174e0[_0x4b8dad(0x250)][_0x4b8dad(0x19c)]();return _0x17e738[_0x4b8dad(0x209)](_0x1b1ff8[_0x4b8dad(0x19c)]())&&(_0x17e738[_0x4b8dad(0x209)](_0x4b8dad(0x19d))&&_0x17e738[_0x4b8dad(0x209)](_0x4b8dad(0x1c2))||_0x17e738[_0x4b8dad(0x209)](_0x4b8dad(0x245))&&_0x17e738[_0x4b8dad(0x209)](_0x4b8dad(0x1c2)));})['sortBy'](_0x484ce5(0x1d0))[_0x484ce5(0x264)]();return _0x4d851a['forEach'](_0x2324f1=>{const _0x4a543a=_0x484ce5,_0x11d5a6=_0x2324f1[_0x4a543a(0x250)][_0x4a543a(0x209)](_0x4a543a(0x22e))?'sell':_0x4a543a(0x1af),_0x1e68e0=/#([0-9]|\.)+\s/i,_0xa2c100=Number(_0x1e68e0[_0x4a543a(0x178)](_0x2324f1[_0x4a543a(0x250)])[0x0][_0x4a543a(0x1f0)](0x1)),_0x1b5575=/@([0-9]|\.)+$/i,_0x1f81fe=Number(_0x1b5575[_0x4a543a(0x178)](_0x2324f1[_0x4a543a(0x250)])[0x0][_0x4a543a(0x1f0)](0x1));_0x41bd6f['push']({'datetime':_0x2324f1['time'],'coin':symbolToCoin(_0x1b1ff8),'symbol':_0x1b1ff8,'side':_0x11d5a6,'amount':_0xa2c100,'filled':_0xa2c100,'price':_0x1f81fe});}),_0x41bd6f;}async function getAllOrders(_0x3aa86b,_0x496e6c){const _0x1780b6=_0x10a1ec;let _0x1800fc=[];while(_0x496e6c<exchange[_0x1780b6(0x269)]()){const _0x5baa99=0x1f4,_0x3cefdc=await exchange[_0x1780b6(0x17b)](_0x3aa86b,_0x496e6c,_0x5baa99);if(_0x3cefdc[_0x1780b6(0x17f)])_0x496e6c=_0x3cefdc[_0x3cefdc['length']-0x1][_0x1780b6(0x160)]+0x1,_0x1800fc=_0x1800fc[_0x1780b6(0x1f9)](_0x3cefdc);else break;}return _0x1800fc;}async function validate24hChanges(){const _0xc141ff=_0x10a1ec;let _0x51a9c4;for(const _0x4c0d3c of currentCoins){if(_0x4c0d3c['coin']!=config['basecoin']){let _0x2486c1;_0x4c0d3c['reverse']?_0x2486c1=formatResult((0x1/(global[_0xc141ff(0x1d7)][noslash(_0x4c0d3c['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x2486c1=global[_0xc141ff(0x1d7)][noslash(_0x4c0d3c[_0xc141ff(0x1de)])],_0x2486c1<config['change24h']&&(logHistory(_0xc141ff(0x1fd),_0x4c0d3c[_0xc141ff(0x201)]+_0xc141ff(0x1e0)+_0x2486c1+'%'),logHistory('error','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0xc141ff(0x23e)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x3afb10=_0x10a1ec;let _0x5264a7=dbLogs['get'](_0x3afb10(0x268))[_0x3afb10(0x264)]();if(_0x5264a7!=_0x3afb10(0x149)){dbLogs[_0x3afb10(0x200)](_0x3afb10(0x268),_0x3afb10(0x149))[_0x3afb10(0x18c)]();let _0xcc575e=[];const _0x3a3d55=dbLogs['get']('logs')[_0x3afb10(0x264)]();_0x3a3d55[_0x3afb10(0x1b4)](_0x1a155d=>{const _0x446abf=_0x3afb10;_0xcc575e[_0x446abf(0x229)]({'time':_0x1a155d[_0x446abf(0x1d0)],'type':_0x1a155d[_0x446abf(0x14c)],'event':_0x1a155d[_0x446abf(0x250)]});}),dbLogs[_0x3afb10(0x224)](_0x3afb10(0x173))[_0x3afb10(0x1da)](_0xcc575e)[_0x3afb10(0x18c)]();}let _0x4137a8=dbConfig[_0x3afb10(0x224)]('version')[_0x3afb10(0x264)]();if(_0x4137a8!=_0x3afb10(0x149)){dbConfig['set'](_0x3afb10(0x268),_0x3afb10(0x149))[_0x3afb10(0x18c)]();let _0x292799=dbConfig[_0x3afb10(0x224)](_0x3afb10(0x1dc))[_0x3afb10(0x16f)]({'botID':botID})[_0x3afb10(0x264)]();if(_0x292799){let _0x18607e=[];_0x292799[_0x3afb10(0x1b3)][_0x3afb10(0x1b4)](_0x19d8cd=>{const _0x5bb05d=_0x3afb10;_0x18607e['push']({'coin':_0x19d8cd[_0x5bb05d(0x201)],'number':_0x19d8cd[_0x5bb05d(0x253)],'price':_0x19d8cd[_0x5bb05d(0x15b)]}),delete _0x19d8cd['startnumber'],delete _0x19d8cd[_0x5bb05d(0x15b)];});if(_0x18607e[_0x3afb10(0x17f)]!==0x0)fs[_0x3afb10(0x17e)](configbackuppath+(_0x3afb10(0x1a9)+botID+_0x3afb10(0x156)),JSON[_0x3afb10(0x221)](_0x18607e,null,0x4),function(_0x447399){if(_0x447399){}});const _0x5d9b09=(_0x94f83d,_0x511e8f)=>{const _0x597367=_0x3afb10;let _0xcbaa3d=[];_0x511e8f[_0x597367(0x1b4)](_0x2443a1=>{const _0x414e8e=_0x597367,_0x5d92c9=_0x94f83d[_0x414e8e(0x16f)](_0x5aa0df=>_0x5aa0df[_0x414e8e(0x201)]==_0x2443a1[_0x414e8e(0x201)]);if(!_0x5d92c9)_0xcbaa3d[_0x414e8e(0x229)](_0x2443a1);});let _0x3005f4=[];return _0x94f83d[_0x597367(0x1b4)](_0x5484c2=>{const _0x269bd1=_0x597367,_0x43fb3b=_0x511e8f[_0x269bd1(0x16f)](_0x408ec3=>_0x408ec3['coin']==_0x5484c2[_0x269bd1(0x201)]);if(!_0x43fb3b||_0x43fb3b[_0x269bd1(0x142)]==0x0&&_0x5484c2[_0x269bd1(0x142)]!=0x0)_0x3005f4['push'](_0x5484c2);}),{'missingDay1':_0xcbaa3d,'notInDay2':_0x3005f4};},_0x306758=dbPerformance[_0x3afb10(0x224)]('data')[_0x3afb10(0x154)]()['value']();if(_0x306758['length']>0x1){const {missingDay1:_0x139dea,notInDay2:_0x311a57}=_0x5d9b09(_0x18607e,_0x306758[0x1][_0x3afb10(0x1aa)]);_0x18607e=[..._0x18607e,..._0x139dea],_0x311a57[_0x3afb10(0x1b4)](_0x1788cd=>{const _0x2b392d=_0x3afb10;let _0x49046f=_0x18607e[_0x2b392d(0x1ba)](_0x1f4827=>_0x1f4827[_0x2b392d(0x201)]==_0x1788cd['coin']);_0x49046f!=-0x1&&_0x18607e[_0x2b392d(0x1b6)](_0x49046f,0x1);});}_0x18607e['sort']((_0x35442b,_0x354e13)=>_0x35442b['coin']>_0x354e13['coin']?0x1:_0x354e13['coin']>_0x35442b[_0x3afb10(0x201)]?-0x1:0x0);let _0xafbc7a=[{'date':_0x292799['startdate'],'changes':_0x18607e}];_0x306758[_0x3afb10(0x17f)]>0x2&&_0x306758[_0x3afb10(0x1b4)]((_0x7f05ff,_0x35011b)=>{const _0xc748e9=_0x3afb10;if(_0x35011b>0x0&&_0x35011b<_0x306758[_0xc748e9(0x17f)]-0x1){const {missingDay1:_0x17f0c5,notInDay2:_0x3e8a34}=_0x5d9b09(_0x306758[_0x35011b]['coins'],_0x306758[_0x35011b+0x1][_0xc748e9(0x1aa)]);_0x18607e=[],(_0x17f0c5[_0xc748e9(0x17f)]!=0x0||_0x3e8a34[_0xc748e9(0x17f)]!=0x0)&&(_0x17f0c5[_0xc748e9(0x17f)]!=0x0&&_0x18607e[_0xc748e9(0x229)](..._0x17f0c5),_0x3e8a34[_0xc748e9(0x17f)]!=0x0&&(_0x3e8a34[_0xc748e9(0x1b4)](_0x1ccac7=>{const _0x1eeb82=_0xc748e9;_0x1ccac7[_0x1eeb82(0x142)]=-_0x1ccac7[_0x1eeb82(0x142)];}),_0x18607e[_0xc748e9(0x229)](..._0x3e8a34)),_0x18607e[_0xc748e9(0x186)]((_0xf39eb5,_0x2c1120)=>_0xf39eb5[_0xc748e9(0x201)]>_0x2c1120[_0xc748e9(0x201)]?0x1:_0x2c1120['coin']>_0xf39eb5['coin']?-0x1:0x0),_0xafbc7a[_0xc748e9(0x229)]({'date':_0x306758[_0x35011b+0x1][_0xc748e9(0x1fc)],'changes':_0x18607e}));}}),dbConfig[_0x3afb10(0x224)](_0x3afb10(0x1dc))[_0x3afb10(0x16f)]({'botID':botID})['assign']({..._0x292799,'liquidity':_0xafbc7a})[_0x3afb10(0x18c)]();}}config=getConfiguration(botID);let _0x2f5198=dbPerformance[_0x3afb10(0x224)]('version')[_0x3afb10(0x264)]();_0x2f5198!=_0x3afb10(0x149)&&(dbPerformance[_0x3afb10(0x200)]('version',_0x3afb10(0x149))[_0x3afb10(0x18c)](),setStartDatePerformance());let _0x2e3f89=dbCoinResults['get'](_0x3afb10(0x268))[_0x3afb10(0x264)]();if(_0x2e3f89!='2.5.0'){dbCoinResults['set'](_0x3afb10(0x268),_0x3afb10(0x22b))[_0x3afb10(0x18c)]();let _0x3af407=dbCoinResults[_0x3afb10(0x224)](_0x3afb10(0x1aa))[_0x3afb10(0x264)]();if(_0x3af407[_0x3afb10(0x17f)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x3401b4){const _0x264ba5=_0x10a1ec;let _0x3d9a85=dbConfig['get'](_0x264ba5(0x1dc))['find']({'botID':_0x3401b4})['value']();if(_0x3d9a85){let _0x1f6243=![];typeof _0x3d9a85[_0x264ba5(0x227)]==_0x264ba5(0x1c5)&&(_0x3d9a85={..._0x3d9a85,'threshold':Number(_0x3d9a85['threshold'])},_0x1f6243=!![]),_0x3d9a85[_0x264ba5(0x24d)]==null&&(_0x3d9a85={..._0x3d9a85,'change24h':-0x14},_0x1f6243=!![]),_0x1f6243&&(_0x3d9a85={'botID':_0x3d9a85[_0x264ba5(0x1b9)],'exchange':_0x3d9a85[_0x264ba5(0x252)],'apiKey':_0x3d9a85['apiKey'],'apiSecret':_0x3d9a85['apiSecret'],'basecoin':_0x3d9a85[_0x264ba5(0x238)],'botname':_0x3d9a85[_0x264ba5(0x235)],'showname':_0x3d9a85['showname'],'threshold':_0x3d9a85['threshold'],'ordertype':_0x3d9a85['ordertype'],'timeout':_0x3d9a85[_0x264ba5(0x188)],'startdate':_0x3d9a85['startdate'],'recreate':_0x3d9a85['recreate'],'timeshift':_0x3d9a85[_0x264ba5(0x210)],'headless':_0x3d9a85[_0x264ba5(0x25c)],'cooldown':_0x3d9a85[_0x264ba5(0x1b7)],'change24h':_0x3d9a85[_0x264ba5(0x24d)],'emojibuy':_0x3d9a85[_0x264ba5(0x233)],'emojisell':_0x3d9a85[_0x264ba5(0x170)],'portfolio':_0x3d9a85[_0x264ba5(0x1b3)],'liquidity':_0x3d9a85[_0x264ba5(0x14a)]},dbConfig[_0x264ba5(0x224)](_0x264ba5(0x1dc))[_0x264ba5(0x1dd)]()[_0x264ba5(0x18c)](),dbConfig[_0x264ba5(0x224)](_0x264ba5(0x1dc))['push'](_0x3d9a85)[_0x264ba5(0x18c)]());}else _0x3d9a85={'botID':_0x3401b4,'exchange':_0x264ba5(0x234),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x264ba5(0x166)+_0x3401b4,'showname':![],'threshold':0x3,'ordertype':_0x264ba5(0x19d),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x3d9a85;}function emittedConfiguration(){const _0x32acba=_0x10a1ec;let _0x3ea4bb;return config[_0x32acba(0x204)]==''?_0x3ea4bb=config:_0x3ea4bb={...config,'apiKey':'************','apiSecret':_0x32acba(0x24f)},_0x3ea4bb;}function getSettings(){const _0x2cb278=_0x10a1ec;return dbSettings['get'](_0x2cb278(0x1ae))[_0x2cb278(0x264)]();}function getSecure(){const _0x34ddf8=_0x10a1ec;return dbSecure[_0x34ddf8(0x224)](_0x34ddf8(0x1c0))[_0x34ddf8(0x264)]()||{};}function updateTimeshift(_0x91a099){const _0xe928d=_0x10a1ec;let _0x1e00ad=dbConfig['get'](_0xe928d(0x1dc))[_0xe928d(0x16f)]({'botID':botID})[_0xe928d(0x264)]();_0x1e00ad&&dbConfig[_0xe928d(0x224)](_0xe928d(0x1dc))[_0xe928d(0x16f)]({'botID':botID})[_0xe928d(0x1da)]({'timeshift':_0x91a099})[_0xe928d(0x18c)](),config['timeshift']=_0x91a099,proxyEmit(_0xe928d(0x26d),emittedConfiguration());}async function storeConfiguration(_0x586183){const _0x107c33=_0x10a1ec;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x23fa97=dbConfig[_0x107c33(0x224)]('bot')[_0x107c33(0x16f)]({'botID':botID})[_0x107c33(0x264)]();_0x586183={..._0x586183,'apiKey':crypt['decrypt'](secure[_0x107c33(0x202)],_0x586183['apiKey'])[_0x107c33(0x14b)],'apiSecret':crypt[_0x107c33(0x1e5)](secure[_0x107c33(0x202)],_0x586183[_0x107c33(0x1a8)])[_0x107c33(0x14b)]};if(_0x23fa97){if(_0x586183['apiKey']==_0x107c33(0x24f))_0x586183[_0x107c33(0x204)]=config['apiKey'];if(_0x586183['apiSecret']==_0x107c33(0x24f))_0x586183[_0x107c33(0x1a8)]=config[_0x107c33(0x1a8)];dbConfig[_0x107c33(0x224)](_0x107c33(0x1dc))[_0x107c33(0x16f)]({'botID':botID})['assign'](_0x586183)[_0x107c33(0x18c)]();}else dbConfig[_0x107c33(0x224)](_0x107c33(0x1dc))[_0x107c33(0x229)](_0x586183)[_0x107c33(0x18c)](),process[_0x107c33(0x1d6)]({'status':_0x107c33(0x22a),'live':_0x107c33(0x26c)},_0x57fe69=>{});config={..._0x586183},setStartDatePerformance(),process[_0x107c33(0x1d6)]({'botname':_0x586183[_0x107c33(0x235)]},_0x4a355f=>{}),updateBotManager();const _0x3adae5=getNormalizedPerformance();getStartingBalances(_0x3adae5),emitPerformance(_0x3adae5),proxyEmit(_0x107c33(0x180)),await initCoinResults(),reset();}async function storeHeadless(_0x41f646){const _0x33caac=_0x10a1ec,_0x38e137={...config,'headless':_0x41f646[_0x33caac(0x25c)]};let _0x4d3378=dbConfig[_0x33caac(0x224)]('bot')['find']({'botID':botID})[_0x33caac(0x264)]();_0x4d3378&&dbConfig[_0x33caac(0x224)](_0x33caac(0x1dc))[_0x33caac(0x16f)]({'botID':botID})[_0x33caac(0x1da)](_0x38e137)['write'](),config={..._0x38e137},updateBotManager(),proxyEmit(_0x33caac(0x26d),emittedConfiguration());}function noslash(_0x33e53e){const _0x58ead0=_0x10a1ec;return _0x33e53e[_0x58ead0(0x1f5)]('/','');}async function updateNumberCoins(_0x85a4d5){const _0x58d3f4=_0x10a1ec;if(_0x85a4d5[_0x58d3f4(0x187)]&&_0x85a4d5[_0x58d3f4(0x187)]==_0x58d3f4(0x1a3)){if(_0x85a4d5[_0x58d3f4(0x1ab)]!=lastOutboundEventTime){lastOutboundEventTime=_0x85a4d5['eventTime'],currentCoins=await getCoins(!![]);if(lastBalances){let _0x583a70=JSON[_0x58d3f4(0x1a2)](lastBalances[_0x58d3f4(0x1b3)]);_0x583a70[_0x58d3f4(0x1b4)](_0x276775=>{const _0x1efa68=_0x58d3f4,_0x196b3d=currentCoins[_0x1efa68(0x16f)](_0x57cd72=>_0x57cd72['coin']==_0x276775[_0x1efa68(0x201)]);if(_0x196b3d[_0x1efa68(0x1c2)])_0x276775['order']=_0x196b3d[_0x1efa68(0x1c2)];}),lastBalances={...lastBalances,'portfolio':JSON[_0x58d3f4(0x221)](_0x583a70)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x85a4d5['eventType']&&_0x85a4d5['eventType']=='executionReport'){if(_0x85a4d5[_0x58d3f4(0x15f)]==_0x58d3f4(0x236)){if(lastOrders)lastOrders[_0x58d3f4(0x1b4)](async _0x40c04c=>{const _0x5ae7f4=_0x58d3f4;_0x40c04c[_0x5ae7f4(0x1bb)]==_0x85a4d5[_0x5ae7f4(0x1bb)]&&_0x40c04c['filled']==0x0&&(_0x40c04c[_0x5ae7f4(0x20d)]=_0x85a4d5[_0x5ae7f4(0x1ec)]/_0x85a4d5[_0x5ae7f4(0x1ee)],_0x40c04c[_0x5ae7f4(0x245)]=_0x85a4d5[_0x5ae7f4(0x1ee)],_0x40c04c[_0x5ae7f4(0x25b)]={'cost':_0x85a4d5['commission'],'currency':_0x85a4d5[_0x5ae7f4(0x18a)]},await validateOrders(),await updateCoinResults(_0x40c04c));});}}}async function getCoins(_0x37ea00=![],_0x2879b0=!![],_0x4cddfb=config[_0x10a1ec(0x238)]){const _0x37965f=_0x10a1ec;let _0x3bf424,_0x1db432=[],_0x5439c9=[],_0x3cab9d=[];try{_0x3bf424=await exchange[_0x37965f(0x242)](),mybalances=_0x3bf424[_0x37965f(0x16c)];if(!_0x2879b0)for(const [_0x31f76b,_0x195984]of Object[_0x37965f(0x183)](mybalances)){_0x3cab9d['push'](_0x31f76b);}else config[_0x37965f(0x1b3)][_0x37965f(0x1b4)](_0xcb68e3=>{const _0x4ee06a=_0x37965f;if(!_0xcb68e3[_0x4ee06a(0x1d9)])_0x3cab9d['push'](_0xcb68e3['coin']);});if(_0x4cddfb=='')for(const [_0x3ff17d,_0x2cc36c]of Object[_0x37965f(0x183)](mybalances)){_0x2cc36c[_0x37965f(0x19b)]()!=0x0&&_0x5439c9[_0x37965f(0x229)]({'coin':_0x3ff17d});}else{let _0xc21177=![],_0x3e1659;allOpenOrders=[];for(const [_0x548463,_0x4f8471]of Object[_0x37965f(0x183)](mybalances)){if(_0x3cab9d[_0x37965f(0x209)](_0x548463)){const _0x4baf44=config[_0x37965f(0x1b3)]['find'](_0x4807b9=>_0x4807b9[_0x37965f(0x201)]==_0x548463),_0x26899b=_0x548463+'/'+_0x4cddfb,_0x394421=_0x4cddfb+'/'+_0x548463;_0xc21177=![];if((_0x4f8471['toString']()!=0x0||_0x4baf44)&&(allSymbols['includes'](_0x26899b)||_0x548463==_0x4cddfb))_0x548463!=_0x4cddfb&&(_0x1db432[_0x37965f(0x229)](_0x26899b),_0x37ea00&&(_0x3e1659=await exchange['fetchOpenOrders'](_0x26899b),_0x3e1659[_0x37965f(0x17f)]>0x0&&(_0xc21177=!![]))),_0x5439c9[_0x37965f(0x229)]({'coin':_0x548463,'symbol':_0x26899b,'reverse':![],'number':Math[_0x37965f(0x261)](_0x4f8471+(_0x4baf44&&_0x4baf44[_0x37965f(0x24c)]||0x0),0x0),'order':_0xc21177});else(_0x4f8471[_0x37965f(0x19b)]()!=0x0||_0x4baf44)&&allSymbols[_0x37965f(0x209)](_0x394421)&&(_0x548463!=_0x4cddfb&&(_0x1db432[_0x37965f(0x229)](_0x394421),_0x37ea00&&(_0x3e1659=await exchange['fetchOpenOrders'](_0x394421),_0x3e1659['length']>0x0&&(_0xc21177=!![]))),_0x5439c9[_0x37965f(0x229)]({'coin':_0x548463,'symbol':_0x394421,'reverse':!![],'number':Math[_0x37965f(0x261)](_0x4f8471+(_0x4baf44&&_0x4baf44[_0x37965f(0x24c)]||0x0),0x0),'order':_0xc21177}));}_0xc21177&&allOpenOrders[_0x37965f(0x229)](_0x3e1659[0x0]);}_0x37ea00&&allOpenOrders[_0x37965f(0x17f)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x37965f(0x21d))));}}catch(_0x3a4d40){if(!_0x2879b0){if(_0x3a4d40[_0x37965f(0x19b)]()[_0x37965f(0x209)]('API-key\x20format\x20invalid'))return logHistory(_0x37965f(0x1fd),_0x37965f(0x181)),![];else{if(_0x3a4d40['toString']()[_0x37965f(0x209)](_0x37965f(0x1eb)))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x3a4d40[_0x37965f(0x19b)]()[_0x37965f(0x209)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x37965f(0x1fd),_0x37965f(0x267)),![];else await handleError(_0x3a4d40,_0x37965f(0x231));}}}else await handleError(_0x3a4d40,_0x37965f(0x231));}return _0x5439c9;}async function getPortfolio(_0x4755a7){const _0x1a04c5=_0x10a1ec;let _0x5dd93a=[],_0x303bed=[],_0x3e4ca6,_0x182418=[],_0x24eac8,_0x33980e;_0x4755a7[_0x1a04c5(0x204)]==='************'||_0x4755a7[_0x1a04c5(0x1a8)]===_0x1a04c5(0x24f)?(_0x24eac8=config[_0x1a04c5(0x204)],_0x33980e=config['apiSecret']):(_0x24eac8=_0x4755a7['apiKey'],_0x33980e=_0x4755a7[_0x1a04c5(0x1a8)]);await initExchange(_0x24eac8,_0x33980e);let _0x5efb6d=await loadSymbols();if(_0x5efb6d){_0x182418=await getCoins(![],![],_0x4755a7[_0x1a04c5(0x238)]);if(_0x182418===![])proxyEmit(_0x1a04c5(0x1b3),![]);else{if(_0x4755a7[_0x1a04c5(0x238)]=='')proxyEmit('portfolio',_0x182418);else{_0x182418[_0x1a04c5(0x1b4)](_0xe45213=>{const _0xfde440=_0x1a04c5;if(_0xe45213[_0xfde440(0x201)]!=_0x4755a7[_0xfde440(0x238)])_0x5dd93a[_0xfde440(0x229)](_0xe45213['symbol']);});try{_0x303bed=await exchange[_0x1a04c5(0x185)](_0x5dd93a);}catch(_0x45b102){await handleError(_0x45b102,_0x1a04c5(0x179));}_0x182418[_0x1a04c5(0x1b4)](_0x23bc1c=>{const _0x397ad4=_0x1a04c5;_0x23bc1c['coin']!=_0x4755a7[_0x397ad4(0x238)]?_0x3e4ca6=_0x23bc1c[_0x397ad4(0x150)]?0x1/_0x303bed[_0x23bc1c[_0x397ad4(0x1de)]][_0x397ad4(0x244)]:_0x303bed[_0x23bc1c[_0x397ad4(0x1de)]][_0x397ad4(0x244)]:_0x3e4ca6=0x1,_0x23bc1c[_0x397ad4(0x20d)]=formatResult(_0x3e4ca6,0x8);}),proxyEmit(_0x1a04c5(0x1b3),_0x182418);}}}else proxyEmit(_0x1a04c5(0x1b3),![]);}function checkMinimums(_0x2b2795){const _0x10daf1=_0x10a1ec;let _0x9c9880=!![];const _0x8849b7=!_0x2b2795[_0x10daf1(0x150)]?markets[_0x2b2795[_0x10daf1(0x1de)]]['limits']['amount'][_0x10daf1(0x140)]:markets[_0x2b2795[_0x10daf1(0x1de)]][_0x10daf1(0x1ef)][_0x10daf1(0x26f)][_0x10daf1(0x140)],_0x179e0b=!_0x2b2795[_0x10daf1(0x150)]?markets[_0x2b2795['symbol']]['limits'][_0x10daf1(0x26f)]['min']:markets[_0x2b2795['symbol']][_0x10daf1(0x1ef)][_0x10daf1(0x174)][_0x10daf1(0x140)],_0x508001=markets[_0x2b2795[_0x10daf1(0x1de)]][_0x10daf1(0x259)][_0x10daf1(0x174)];_0x2b2795[_0x10daf1(0x213)]=formatResultTruncate(_0x2b2795[_0x10daf1(0x213)],_0x508001);if(Math[_0x10daf1(0x1d4)](_0x2b2795['trade'])<_0x8849b7)_0x9c9880=![];if(Math[_0x10daf1(0x1d4)](_0x2b2795[_0x10daf1(0x213)])*_0x2b2795[_0x10daf1(0x244)]<_0x179e0b)_0x9c9880=![];if(_0x2b2795['side']==_0x10daf1(0x22e)){let _0x59dd3c=config[_0x10daf1(0x1b3)][_0x10daf1(0x16f)](_0x4703f9=>_0x4703f9[_0x10daf1(0x201)]==_0x2b2795[_0x10daf1(0x201)]);if(_0x59dd3c[_0x10daf1(0x24c)]>0x0){if(Math[_0x10daf1(0x1d4)](_0x2b2795[_0x10daf1(0x213)])>_0x2b2795[_0x10daf1(0x142)]-_0x59dd3c[_0x10daf1(0x24c)])_0x9c9880=![];}else{if(Math[_0x10daf1(0x1d4)](_0x2b2795[_0x10daf1(0x213)])>_0x2b2795[_0x10daf1(0x142)])_0x9c9880=![];}}if(_0x2b2795[_0x10daf1(0x18f)]==_0x10daf1(0x1af)){let _0x1e0877=config[_0x10daf1(0x1b3)][_0x10daf1(0x16f)](_0x13c9e7=>_0x13c9e7['coin']==config['basecoin']),_0x5c6b09=currentCoins[_0x10daf1(0x16f)](_0x3668b6=>_0x3668b6[_0x10daf1(0x201)]==config['basecoin']);if(_0x1e0877[_0x10daf1(0x24c)]>0x0){if(Math[_0x10daf1(0x1d4)](_0x2b2795[_0x10daf1(0x213)])*_0x2b2795['last']>_0x5c6b09[_0x10daf1(0x142)]-_0x1e0877['offset'])_0x9c9880=![];}else{if(Math[_0x10daf1(0x1d4)](_0x2b2795['trade'])*_0x2b2795[_0x10daf1(0x244)]>_0x5c6b09['number'])_0x9c9880=![];}}return _0x9c9880;}async function getBalances(){const _0x203a63=_0x10a1ec;let _0x1d0f33=0x0,_0x4924d;const _0x363b90=config['threshold'];if(config[_0x203a63(0x25c)]&&config[_0x203a63(0x24d)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x44d35f=>{const _0x850678=_0x203a63;if(_0x44d35f[_0x850678(0x201)]!=config[_0x850678(0x238)]){let _0x4cc66c=global['ticker'][noslash(_0x44d35f[_0x850678(0x1de)])];_0x4924d=_0x44d35f[_0x850678(0x150)]?0x1/_0x4cc66c:_0x4cc66c;}else _0x4924d=0x1;let _0x1a9af7=_0x44d35f[_0x850678(0x142)]*_0x4924d;_0x1d0f33+=_0x1a9af7,_0x44d35f['last']=formatResult(Number(_0x4924d),0x8),_0x44d35f[_0x850678(0x264)]=_0x1a9af7;}),currentCoins[_0x203a63(0x1b4)](_0x3594bc=>{const _0x4ee52c=_0x203a63;let _0x3d6ec9=config['portfolio'][_0x4ee52c(0x16f)](_0x440e2d=>_0x440e2d[_0x4ee52c(0x201)]==_0x3594bc[_0x4ee52c(0x201)]),_0x5d7714=Number(_0x3d6ec9['distribution']),_0x301ff7=_0x3594bc[_0x4ee52c(0x264)]/_0x1d0f33*0x64,_0x25943e=_0x5d7714*_0x1d0f33/0x64/_0x3594bc[_0x4ee52c(0x244)]-_0x3594bc['number'];_0x3594bc[_0x4ee52c(0x1c6)]=formatResult(_0x301ff7,0x3),_0x3594bc[_0x4ee52c(0x19a)]=formatResult(_0x5d7714,0x3),_0x3594bc[_0x4ee52c(0x213)]=formatResult(_0x25943e,0x8),_0x3594bc[_0x4ee52c(0x18f)]='',_0x3594bc[_0x4ee52c(0x21b)]=![];if(_0x3594bc['coin']!=config[_0x4ee52c(0x238)]){if(_0x3594bc['distribution']>_0x5d7714)_0x3594bc[_0x4ee52c(0x18f)]=_0x4ee52c(0x22e),_0x3594bc['valid']=checkMinimums(_0x3594bc);else _0x3594bc[_0x4ee52c(0x1c6)]<_0x5d7714&&(_0x3594bc[_0x4ee52c(0x18f)]=_0x4ee52c(0x1af),_0x3594bc['valid']=checkMinimums(_0x3594bc));}_0x3594bc[_0x4ee52c(0x1e9)]=_0x3594bc[_0x4ee52c(0x1c6)]/_0x3594bc['target']-0x1;}),currentCoins['sort']((_0x1f9c34,_0x45ce74)=>_0x1f9c34[_0x203a63(0x1e9)]<_0x45ce74[_0x203a63(0x1e9)]?0x1:_0x45ce74['delta']<_0x1f9c34[_0x203a63(0x1e9)]?-0x1:0x0);const _0x274057=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x274057[_0x203a63(0x241)],'usd':_0x274057[_0x203a63(0x162)],'portfolio':JSON[_0x203a63(0x221)](currentCoins),'threshold':_0x363b90},proxyEmit(_0x203a63(0x256),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x203a63(0x25c)])headlessMode({'portfolio':currentCoins,'threshold':_0x363b90});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x363b90});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x584e7b=_0x10a1ec;if(!lastBalances)return;let _0x56e5ef=[],_0x3fab0b,_0x15234c=JSON['parse'](lastBalances['portfolio']);_0x15234c[_0x584e7b(0x186)]((_0x250b28,_0x40fb87)=>_0x250b28[_0x584e7b(0x201)]>_0x40fb87['coin']?0x1:_0x40fb87[_0x584e7b(0x201)]>_0x250b28[_0x584e7b(0x201)]?-0x1:0x0),_0x15234c[_0x584e7b(0x1b4)](_0x2ee793=>{const _0x521cdf=_0x584e7b;let _0x51a795={'coin':_0x2ee793[_0x521cdf(0x201)],'number':_0x2ee793['number'],'price':_0x2ee793[_0x521cdf(0x244)]};_0x56e5ef[_0x521cdf(0x229)](_0x51a795);});const _0x356b41=await getFiat();_0x3fab0b={'date':lastBalances[_0x584e7b(0x1d0)]['split']('\x20')[0x0],'eur':_0x356b41[_0x584e7b(0x241)],'usd':_0x356b41[_0x584e7b(0x162)],'coins':_0x56e5ef};let _0x203c02=dbPerformance[_0x584e7b(0x224)](_0x584e7b(0x161))['find']({'date':_0x3fab0b['date']})['value']();_0x203c02?_0x3fab0b[_0x584e7b(0x1fc)]!=config['startdate']&&dbPerformance['get'](_0x584e7b(0x161))[_0x584e7b(0x16f)]({'date':_0x3fab0b[_0x584e7b(0x1fc)]})[_0x584e7b(0x1da)](_0x3fab0b)[_0x584e7b(0x18c)]():dbPerformance[_0x584e7b(0x224)](_0x584e7b(0x161))[_0x584e7b(0x229)](_0x3fab0b)[_0x584e7b(0x18c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x295c64=_0x10a1ec;let _0x10ab07=[];if(dbPerformance[_0x295c64(0x177)](_0x295c64(0x161))[_0x295c64(0x264)]()){let _0x4dfcf6=dbPerformance[_0x295c64(0x224)](_0x295c64(0x161))['cloneDeep']()[_0x295c64(0x230)](_0x295c64(0x1fc))[_0x295c64(0x264)](),_0x5aee86=[...config['liquidity']];_0x5aee86[_0x295c64(0x186)]((_0x3da5a1,_0x55b454)=>_0x3da5a1[_0x295c64(0x1fc)]>_0x55b454[_0x295c64(0x1fc)]?-0x1:_0x55b454[_0x295c64(0x1fc)]>_0x3da5a1[_0x295c64(0x1fc)]?0x1:0x0);let _0x3fda0f=0x1,_0x424221=[],_0x256807=0x0;_0x4dfcf6[_0x295c64(0x1f0)]()[_0x295c64(0x150)]()[_0x295c64(0x1b4)]((_0x328537,_0x209b8e)=>{const _0x428dde=_0x295c64;if(_0x5aee86[_0x256807]){if(_0x4dfcf6[_0x4dfcf6[_0x428dde(0x17f)]-_0x209b8e]&&_0x5aee86[_0x256807][_0x428dde(0x1fc)]==_0x4dfcf6[_0x4dfcf6['length']-_0x209b8e]['date']){if(_0x209b8e<_0x4dfcf6[_0x428dde(0x17f)]){let _0x3857b5=0x0,_0x4824ff=0x0;_0x4dfcf6[_0x4dfcf6['length']-_0x209b8e][_0x428dde(0x1aa)][_0x428dde(0x1b4)](_0x294195=>{const _0x23fed2=_0x428dde;_0x4824ff+=_0x294195[_0x23fed2(0x142)]*_0x294195[_0x23fed2(0x20d)];}),_0x5aee86[_0x256807]['changes'][_0x428dde(0x1b4)](_0x551d69=>{const _0x5e971d=_0x428dde;_0x3857b5+=_0x551d69[_0x5e971d(0x142)]*_0x551d69[_0x5e971d(0x20d)];}),_0x3fda0f*=_0x3857b5/(_0x4824ff-_0x3857b5)+0x1;}_0x256807++;}}let _0x3d457b=0x0;_0x328537[_0x428dde(0x1aa)][_0x428dde(0x1b4)](_0x37bc49=>{const _0x13ce8d=_0x428dde;_0x3d457b+=_0x37bc49[_0x13ce8d(0x142)]*_0x37bc49['price'];}),_0x424221[_0x4dfcf6[_0x428dde(0x17f)]-_0x209b8e-0x1]=_0x3d457b*(_0x3fda0f-0x1);});let _0x4eb391=[];_0x5aee86=[...config[_0x295c64(0x14a)]]||[];let _0x3ca35c=0x0;_0x256807=0x0,_0x4dfcf6['forEach']((_0x5cc565,_0x446d82)=>{const _0x493699=_0x295c64;if(_0x5aee86[_0x256807]){const _0x49473d=fns[_0x493699(0x1a2)](_0x5aee86[_0x256807][_0x493699(0x1fc)],_0x493699(0x196),new Date()),_0x2bfee7=fns[_0x493699(0x1a2)](_0x5cc565[_0x493699(0x1fc)],_0x493699(0x196),new Date());if(fns['isEqual'](_0x49473d,_0x2bfee7)){let _0x2e5eb4=0x0;_0x5aee86[_0x256807][_0x493699(0x262)][_0x493699(0x1b4)](_0x102be1=>{const _0x37fd38=_0x493699;!_0x4eb391[_0x102be1['coin']]?_0x4eb391[_0x102be1['coin']]=_0x102be1[_0x37fd38(0x142)]:(_0x2e5eb4=_0x4eb391[_0x102be1[_0x37fd38(0x201)]],_0x4eb391[_0x102be1[_0x37fd38(0x201)]]+=_0x102be1[_0x37fd38(0x142)]);const _0x3334c9=_0x5cc565[_0x37fd38(0x1aa)]['find'](_0x3df0ee=>_0x3df0ee[_0x37fd38(0x201)]==_0x102be1[_0x37fd38(0x201)]);(!_0x3334c9||_0x3334c9[_0x37fd38(0x142)]==0x0)&&(_0x3ca35c+=(-_0x102be1[_0x37fd38(0x142)]-_0x2e5eb4)*_0x102be1['price']);}),_0x256807++;}}_0x5cc565[_0x493699(0x1aa)]['forEach']((_0x23a7c0,_0x190691)=>{const _0x2cb9f0=_0x493699;_0x4eb391[_0x23a7c0['coin']]&&(_0x23a7c0={..._0x23a7c0,'initial':_0x4eb391[_0x23a7c0[_0x2cb9f0(0x201)]]}),_0x5cc565['coins'][_0x190691]=_0x23a7c0;}),_0x10ab07[_0x493699(0x229)]({'date':_0x5cc565['date'],'eur':_0x5cc565[_0x493699(0x241)],'usd':_0x5cc565['usd'],'offset':_0x424221[_0x446d82],'netoffset':_0x3ca35c,'coins':_0x5cc565[_0x493699(0x1aa)]});});}return _0x10ab07;}function emitPerformance(_0x27ebc5){const _0x55b557=_0x10a1ec;_0x27ebc5[_0x55b557(0x17f)]!==0x0?(proxyEmit(_0x55b557(0x1df),_0x27ebc5),lastPerformanceEmitted=getDate()):proxyEmit(_0x55b557(0x1df),[]);}function getPerf(_0x1a21ac,_0x418f9b){const _0x1c8f2e=_0x10a1ec;let _0x3722c9=0x0,_0x498590=0x0,_0x3d1619=0x0;_0x1a21ac[_0x1c8f2e(0x1aa)][_0x1c8f2e(0x1b4)](_0x3739c1=>{const _0x1a24b4=_0x1c8f2e;_0x3722c9+=_0x3739c1['number']*_0x3739c1[_0x1a24b4(0x20d)];});_0x418f9b&&(_0x3722c9+=_0x1a21ac[_0x1c8f2e(0x24c)]);if(config[_0x1c8f2e(0x238)]===_0x1c8f2e(0x1b2)||config[_0x1c8f2e(0x238)]==='ETH')_0x498590=_0x3722c9*_0x1a21ac[_0x1c8f2e(0x241)],_0x3d1619=_0x3722c9*_0x1a21ac[_0x1c8f2e(0x162)];else{if(config[_0x1c8f2e(0x238)]==='BUSD'||config[_0x1c8f2e(0x238)]===_0x1c8f2e(0x211))_0x498590=_0x3722c9*_0x1a21ac[_0x1c8f2e(0x241)]/_0x1a21ac['usd'],_0x3d1619=_0x3722c9;else config[_0x1c8f2e(0x238)]===_0x1c8f2e(0x23f)&&(_0x498590=_0x3722c9,_0x3d1619=_0x3722c9*_0x1a21ac[_0x1c8f2e(0x162)]/_0x1a21ac['eur']);}return[_0x3722c9,_0x498590,_0x3d1619];}async function getStartingBalances(_0x2b7419,_0x38fed6=!![]){const _0x413ea5=_0x10a1ec;if(_0x2b7419[_0x413ea5(0x17f)]!==0x0){const [_0x1d5add,_0x584c92,_0x2069df]=getPerf(_0x2b7419[0x0],!![]);let _0x16bd5d=[];config['portfolio'][_0x413ea5(0x1b4)](_0x124df4=>{const _0x2bbd01=_0x413ea5;let _0x4d5208=0x0,_0xca3ff1;config['liquidity']['forEach'](_0x845f86=>{const _0x45b93a=_0x1fa8;let _0x5786b4=_0x845f86[_0x45b93a(0x262)][_0x45b93a(0x16f)](_0x1f9950=>_0x1f9950[_0x45b93a(0x201)]==_0x124df4[_0x45b93a(0x201)]);if(_0x5786b4){_0x4d5208+=_0x5786b4[_0x45b93a(0x142)];if(!_0xca3ff1)_0xca3ff1=_0x5786b4[_0x45b93a(0x20d)];}}),_0x16bd5d[_0x2bbd01(0x229)]({'coin':_0x124df4[_0x2bbd01(0x201)],'number':_0x4d5208,'initialprice':_0xca3ff1});});const _0x45e45b={'basecoin':_0x1d5add,'eur':_0x584c92,'usd':_0x2069df,'coins':_0x16bd5d};if(_0x38fed6)proxyEmit(_0x413ea5(0x26e),_0x45e45b);return _0x45e45b;}}function headlessMode(_0x3f8b83){const _0x4cf945=_0x10a1ec;let _0xe4643d=_0x3f8b83[_0x4cf945(0x1b3)],_0x1a35ea=_0x3f8b83[_0x4cf945(0x227)],_0xc774b3=[];for(let _0x4c5020 of _0xe4643d){if(_0x4c5020[_0x4cf945(0x201)]!=config[_0x4cf945(0x238)]){if(_0x4c5020[_0x4cf945(0x1e9)]>=_0x1a35ea/0x64){if(_0x4c5020[_0x4cf945(0x21b)])_0xc774b3[_0x4cf945(0x229)](_0x4c5020);}else{if(_0x4c5020[_0x4cf945(0x1e9)]<=-_0x1a35ea/0x64){if(_0x4c5020[_0x4cf945(0x21b)])_0xc774b3['push'](_0x4c5020);}}}}_0xc774b3[_0x4cf945(0x17f)]>0x0&&(allOrdersPlaced=![],placeOrder(_0xc774b3));}function notifyBalance(_0x2a9743){const _0x5c03ff=_0x10a1ec;let _0x5203aa=_0x2a9743[_0x5c03ff(0x1b3)],_0x4712db=_0x2a9743[_0x5c03ff(0x227)],_0x3a00d1=[];for(let _0x439e02 of _0x5203aa){if(_0x439e02['coin']!=config[_0x5c03ff(0x238)]){if(_0x439e02[_0x5c03ff(0x1e9)]>=_0x4712db/0x64){if(_0x439e02[_0x5c03ff(0x21b)])_0x3a00d1['push'](_0x439e02);}else{if(_0x439e02['delta']<=-_0x4712db/0x64){if(_0x439e02[_0x5c03ff(0x21b)])_0x3a00d1[_0x5c03ff(0x229)](_0x439e02);}}}}if(_0x3a00d1[_0x5c03ff(0x17f)]>0x0){let _0x52d373=_0x3a00d1['map'](_0x24b393=>_0x24b393[_0x5c03ff(0x201)]);_0x52d373[_0x5c03ff(0x186)]();let _0x34b02c=_0x52d373[_0x5c03ff(0x255)](',\x20');if(lastCoinsToBalance!==_0x34b02c)logHistory('success',_0x5c03ff(0x19f)+_0x34b02c);lastCoinsToBalance=_0x34b02c;}}function symbolToCoin(_0x42d4a5){const _0xdb2a8e=_0x10a1ec;let _0x16817c;if(_0x42d4a5[_0xdb2a8e(0x209)]('/'+config[_0xdb2a8e(0x238)]))_0x16817c=_0x42d4a5[_0xdb2a8e(0x1f5)]('/'+config[_0xdb2a8e(0x238)],'');if(_0x42d4a5[_0xdb2a8e(0x209)](config['basecoin']+'/'))_0x16817c=_0x42d4a5[_0xdb2a8e(0x1f5)](config[_0xdb2a8e(0x238)]+'/','');return _0x16817c;}async function unlockOrders(){const _0x4ec7f5=_0x10a1ec;currentCoins=await getCoins(),validateOrdersState=_0x4ec7f5(0x1a7);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0xbb6bce){const _0x12bafa=_0x10a1ec;if(_0xbb6bce)validateOrdersState=_0xbb6bce;let _0x58b025=[],_0x13a7bd=config[_0x12bafa(0x1b5)]==_0x12bafa(0x19d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders['forEach'](_0x2d7eff=>{const _0x392fa4=_0x12bafa;let _0x59c594=![];_0x2d7eff['filled']>0x0&&(_0x59c594=!![]),_0x58b025[_0x392fa4(0x229)](_0x59c594),_0x59c594&&config[_0x392fa4(0x1b5)]!='market'&&logHistory(_0x392fa4(0x1c2),_0x392fa4(0x1ad)+_0x2d7eff[_0x392fa4(0x1de)]+'\x20'+_0x2d7eff[_0x392fa4(0x18f)]+'\x20#'+formatResult(_0x2d7eff[_0x392fa4(0x245)],0x8)+'\x20@'+formatResult(_0x2d7eff['price'],0x8));}),_0x58b025[_0x12bafa(0x1b4)]((_0x237d12,_0x55718c)=>{const _0x43e19a=_0x12bafa;if(_0x237d12)lastOrders[_0x43e19a(0x1b6)](_0x55718c,0x1);});const _0x4d0692=coolingDown?_0x12bafa(0x1ff):_0x12bafa(0x163);if(validateOrdersState==_0x12bafa(0x1a7))validateOrdersState=_0x12bafa(0x1db),_0x58b025[_0x12bafa(0x209)](![])?config[_0x12bafa(0x1b5)]==_0x12bafa(0x19d)?logHistory(_0x12bafa(0x1fd),_0x12bafa(0x24e)):logHistory(_0x12bafa(0x1fd),_0x12bafa(0x192)):await unlockOrders();else{if(validateOrdersState==_0x12bafa(0x1db)){if(_0x58b025[_0x12bafa(0x209)](![])){}else config[_0x12bafa(0x1b5)]=='market'?logHistory(_0x12bafa(0x21c),_0x12bafa(0x1e7)+_0x4d0692):logHistory(_0x12bafa(0x21c),'Order(s)\x20filled\x20-\x20'+_0x4d0692),await unlockOrders();}else{if(validateOrdersState==_0x12bafa(0x15a))_0x58b025[_0x12bafa(0x209)](![])?config['ordertype']=='market'?logHistory(_0x12bafa(0x21c),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x12bafa(0x1ce)](_0x13a7bd*validateOrderInterval/0xea60)+_0x12bafa(0x251)+_0x4d0692):(await cancelOrders(),logHistory(_0x12bafa(0x21c),_0x12bafa(0x246)+Math[_0x12bafa(0x1ce)](_0x13a7bd*validateOrderInterval/0xea60)+_0x12bafa(0x251)+_0x4d0692)):logHistory(_0x12bafa(0x21c),_0x12bafa(0x1f7)+_0x4d0692),await unlockOrders();else{if(validateOrdersState==_0x12bafa(0x21d)){if(config[_0x12bafa(0x1b5)]!='market')logHistory('success',_0x12bafa(0x1f7)+_0x4d0692);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x147869=>{const _0x4dec63=_0x1fa8;try{const _0x5ae935=await exchange[_0x4dec63(0x158)](_0x147869['orderId'],_0x147869[_0x4dec63(0x1de)]);}catch(_0xa5128c){if(_0xa5128c[_0x4dec63(0x19b)]()['includes']('OrderNotFound')){}else await handleError(_0xa5128c,_0x4dec63(0x197));}});}async function initCoinResults(){const _0x3552c3=_0x10a1ec;let _0x4610c4=[];config[_0x3552c3(0x1b3)]['forEach'](_0x295d1a=>{const _0x5ce8b7=_0x3552c3;if(!_0x295d1a[_0x5ce8b7(0x1d9)]&&_0x295d1a[_0x5ce8b7(0x201)]!=config[_0x5ce8b7(0x238)]){let _0x32c569=dbCoinResults[_0x5ce8b7(0x224)](_0x5ce8b7(0x1aa))['find']({'coin':_0x295d1a[_0x5ce8b7(0x201)]})[_0x5ce8b7(0x264)]();if(!_0x32c569){const _0x904489=currentCoins[_0x5ce8b7(0x16f)](_0x12d1a0=>_0x12d1a0[_0x5ce8b7(0x201)]==_0x295d1a[_0x5ce8b7(0x201)]),_0x4c05e7=global['ticker'][noslash(_0x295d1a[_0x5ce8b7(0x1de)])];let _0x488c8f=_0x904489?_0x904489[_0x5ce8b7(0x142)]:null,_0x31ce0b=_0x295d1a[_0x5ce8b7(0x150)]?0x1/_0x4c05e7:_0x4c05e7,_0x53cf7a;config[_0x5ce8b7(0x14a)][_0x5ce8b7(0x1b4)](_0x2e37d9=>{const _0x4abdd6=_0x5ce8b7;!_0x53cf7a&&(_0x53cf7a=_0x2e37d9[_0x4abdd6(0x262)][_0x4abdd6(0x16f)](_0x51d3c7=>_0x51d3c7[_0x4abdd6(0x201)]==_0x295d1a[_0x4abdd6(0x201)]),_0x53cf7a&&(_0x488c8f=_0x53cf7a['number'],_0x31ce0b=_0x53cf7a[_0x4abdd6(0x20d)]));}),_0x4610c4[_0x5ce8b7(0x229)]({'coin':_0x295d1a[_0x5ce8b7(0x201)],'number':_0x488c8f,'price':_0x31ce0b});}}}),_0x4610c4[_0x3552c3(0x1b4)](_0x44efd8=>{const _0x4fecec=_0x3552c3,_0x194cb9={'coin':_0x44efd8[_0x4fecec(0x201)],'number':_0x44efd8[_0x4fecec(0x142)],'breakeven':_0x44efd8[_0x4fecec(0x20d)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4fecec(0x224)]('coins')[_0x4fecec(0x229)](_0x194cb9)['write']();});}async function updateCoinResults(_0x2a6c72,_0x22e019=![]){const _0x5f3f48=_0x10a1ec;let _0x156908,_0x1621cd,_0x51b55d,_0x18fcd8,_0x549fa0,_0x169b96,_0x4fd3ef=dbCoinResults[_0x5f3f48(0x224)](_0x5f3f48(0x1aa))[_0x5f3f48(0x16f)]({'coin':_0x2a6c72[_0x5f3f48(0x201)]})[_0x5f3f48(0x264)]();!_0x4fd3ef&&await initCoinResults();_0x2a6c72[_0x5f3f48(0x150)]&&(_0x169b96={'filled':_0x2a6c72['filled']*_0x2a6c72[_0x5f3f48(0x20d)],'amount':_0x2a6c72['filled']*_0x2a6c72['price'],'side':_0x2a6c72[_0x5f3f48(0x18f)]==_0x5f3f48(0x22e)?'buy':_0x5f3f48(0x22e),'price':0x1/_0x2a6c72[_0x5f3f48(0x20d)]},_0x2a6c72={..._0x2a6c72,..._0x169b96});if(_0x22e019)_0x1621cd=_0x2a6c72['side']=='buy'?_0x4fd3ef['number']+_0x2a6c72[_0x5f3f48(0x245)]:_0x4fd3ef[_0x5f3f48(0x142)]-_0x2a6c72[_0x5f3f48(0x245)];else{const _0x4d4c23=currentCoins[_0x5f3f48(0x16f)](_0x5c7be7=>_0x5c7be7[_0x5f3f48(0x201)]==_0x2a6c72[_0x5f3f48(0x201)]);_0x1621cd=_0x4d4c23[_0x5f3f48(0x142)];}if(_0x2a6c72['fee']&&_0x2a6c72[_0x5f3f48(0x25b)][_0x5f3f48(0x215)]==config[_0x5f3f48(0x238)])_0x156908=_0x2a6c72['fee'][_0x5f3f48(0x26f)];else{if(_0x2a6c72[_0x5f3f48(0x25b)]&&_0x2a6c72['fee'][_0x5f3f48(0x215)]==_0x5f3f48(0x26a)&&!_0x22e019)_0x156908=_0x2a6c72[_0x5f3f48(0x25b)][_0x5f3f48(0x26f)]*global[_0x5f3f48(0x203)]['BNB'+config[_0x5f3f48(0x238)]];else _0x156908=defaultFee*_0x2a6c72['filled']*_0x2a6c72[_0x5f3f48(0x20d)];}_0x2a6c72[_0x5f3f48(0x18f)]==_0x5f3f48(0x1af)?(_0x51b55d=_0x1621cd!=0x0?(_0x4fd3ef[_0x5f3f48(0x207)]*_0x4fd3ef[_0x5f3f48(0x142)]+_0x2a6c72[_0x5f3f48(0x20d)]*(_0x1621cd-_0x4fd3ef[_0x5f3f48(0x142)])+_0x156908)/_0x1621cd:0x0,_0x18fcd8=_0x4fd3ef[_0x5f3f48(0x17d)]):(_0x51b55d=_0x1621cd!=0x0?(_0x4fd3ef[_0x5f3f48(0x207)]*_0x4fd3ef['number']-_0x2a6c72[_0x5f3f48(0x20d)]*(_0x4fd3ef[_0x5f3f48(0x142)]-_0x1621cd)+_0x156908)/_0x1621cd:0x0,_0x18fcd8=_0x4fd3ef[_0x5f3f48(0x17d)]+(_0x2a6c72[_0x5f3f48(0x20d)]-_0x4fd3ef[_0x5f3f48(0x207)])*_0x2a6c72[_0x5f3f48(0x245)]);_0x549fa0=(_0x2a6c72[_0x5f3f48(0x20d)]-_0x51b55d-_0x156908/_0x2a6c72['filled'])*_0x1621cd;let _0x54a9ed={'coin':_0x2a6c72['coin'],'number':_0x1621cd,'breakeven':formatResult(_0x51b55d,0x8),'realized':formatResult(_0x18fcd8,0x8),'unrealized':formatResult(_0x549fa0,0x8),'fees':formatResult(_0x4fd3ef[_0x5f3f48(0x198)]+_0x156908,0x8),'sells':_0x2a6c72[_0x5f3f48(0x18f)]==_0x5f3f48(0x22e)?_0x4fd3ef[_0x5f3f48(0x16d)]+0x1:_0x4fd3ef['sells'],'buys':_0x2a6c72['side']==_0x5f3f48(0x1af)?_0x4fd3ef['buys']+0x1:_0x4fd3ef[_0x5f3f48(0x171)]};dbCoinResults[_0x5f3f48(0x224)]('coins')[_0x5f3f48(0x16f)]({'coin':_0x2a6c72[_0x5f3f48(0x201)]})[_0x5f3f48(0x1da)](_0x54a9ed)['write']();if(!_0x22e019){if(_0x2a6c72[_0x5f3f48(0x25b)]&&_0x2a6c72[_0x5f3f48(0x25b)][_0x5f3f48(0x215)]==_0x5f3f48(0x26a)){const _0x22f0ec=currentCoins['find'](_0xfc40f7=>_0xfc40f7['coin']==_0x5f3f48(0x26a));if(_0x22f0ec){let _0x3813ca=dbCoinResults[_0x5f3f48(0x224)]('coins')[_0x5f3f48(0x16f)]({'coin':'BNB'})['value']();_0x54a9ed={..._0x3813ca,'number':_0x22f0ec[_0x5f3f48(0x142)]},dbCoinResults[_0x5f3f48(0x224)]('coins')[_0x5f3f48(0x16f)]({'coin':_0x5f3f48(0x26a)})['assign'](_0x54a9ed)[_0x5f3f48(0x18c)]();}}}}async function placeOrder(_0x4c6679){const _0x530292=_0x10a1ec,_0x48506e=config[_0x530292(0x1b5)]==_0x530292(0x19d)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x4678ad of _0x4c6679){let _0x55e99d,_0x31af80,_0x8aa33d,_0x1c22e4,_0x23297d,_0x4bae4d=_0x4678ad['symbol'];try{const _0x145e08=await exchange['fetchTickers']([_0x4bae4d]),_0x2a9094=_0x145e08[_0x4bae4d];_0x55e99d=_0x4678ad[_0x530292(0x150)]?0x1/_0x4678ad[_0x530292(0x244)]:_0x4678ad[_0x530292(0x244)],_0x31af80=_0x2a9094['bid'],_0x8aa33d=_0x2a9094['ask'];_0x4678ad[_0x530292(0x150)]?(_0x1c22e4=_0x4678ad['side']=='buy'?_0x530292(0x22e):_0x530292(0x1af),_0x23297d=Math[_0x530292(0x1d4)](_0x4678ad[_0x530292(0x213)])/_0x55e99d):(_0x1c22e4=_0x4678ad['side'],_0x23297d=Math[_0x530292(0x1d4)](_0x4678ad[_0x530292(0x213)]));_0x48506e==_0x530292(0x1a6)&&(config[_0x530292(0x1b5)]==_0x530292(0x21f)&&(_0x55e99d=_0x1c22e4==_0x530292(0x1af)?_0x31af80:_0x8aa33d),config[_0x530292(0x1b5)]==_0x530292(0x254)&&(_0x55e99d=_0x1c22e4==_0x530292(0x1af)?_0x8aa33d:_0x31af80));_0x23297d=formatResult(_0x23297d,0x8),_0x55e99d=formatResult(_0x55e99d,0x8);const _0xe593d0=await exchange[_0x530292(0x146)](_0x4bae4d,_0x48506e,_0x1c22e4,_0x23297d,_0x55e99d);lastOrders['push']({'orderId':_0xe593d0['id'],'symbol':_0x4bae4d,'coin':_0x4678ad[_0x530292(0x201)],'side':_0x1c22e4,'reverse':_0x4678ad[_0x530292(0x150)],'amount':_0xe593d0[_0x530292(0x174)],'filled':0x0,'price':_0xe593d0[_0x530292(0x20d)],'fee':_0xe593d0[_0x530292(0x25b)]});const _0x12f6af=_0x1c22e4==_0x530292(0x22e)?config[_0x530292(0x170)]?String[_0x530292(0x21a)]('0x'+config[_0x530292(0x170)])+'\x20':'':config[_0x530292(0x233)]?String[_0x530292(0x21a)]('0x'+config[_0x530292(0x233)])+'\x20':'',_0x2e0f4f=_0x48506e==_0x530292(0x19d)?_0x530292(0x1be):config[_0x530292(0x1b5)]==_0x530292(0x21f)?_0x530292(0x265):_0x530292(0x1d8);if(_0x48506e==_0x530292(0x19d))logHistory(_0x530292(0x1c2),''+_0x12f6af+_0x2e0f4f+_0x530292(0x1c9)+_0x4bae4d+'\x20'+_0x1c22e4+'\x20#'+formatResult(_0xe593d0['filled'],0x8)+'\x20@'+formatResult(_0xe593d0['price'],0x8));else logHistory(_0x530292(0x1c2),''+_0x12f6af+_0x2e0f4f+_0x530292(0x1c9)+_0x4bae4d+'\x20'+_0x1c22e4+'\x20#'+formatResult(_0xe593d0[_0x530292(0x174)],0x8)+'\x20@'+formatResult(_0xe593d0['price'],0x8));let _0x1b5625=currentCoins[_0x530292(0x16f)](_0x1c1d1f=>_0x1c1d1f[_0x530292(0x201)]==_0x4678ad[_0x530292(0x201)]);_0x1b5625[_0x530292(0x1c2)]=!![];if(config['cooldown']!=0x0){let _0x1e0281=null;if(cooldownTracker[_0x530292(0x17f)]==config[_0x530292(0x1b7)]-0x1)_0x1e0281=cooldownTracker['shift']();const _0x479f75=getTimeStamp();cooldownTracker[_0x530292(0x229)](_0x479f75);if(_0x1e0281){const _0x441068=fns[_0x530292(0x237)](new Date(_0x479f75),new Date(_0x1e0281));if(_0x441068<cooldownInterval){logHistory(_0x530292(0x1fd),_0x530292(0x1a1)+config[_0x530292(0x1b7)]+_0x530292(0x1d3)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x530292(0x218)),coolingDown=!![];break;}}}}catch(_0x528a38){if(_0x528a38['toString']()[_0x530292(0x209)](_0x530292(0x1c4)))logHistory(_0x530292(0x1fd),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4bae4d);else{if(_0x528a38['toString']()[_0x530292(0x209)](_0x530292(0x205)))logHistory(_0x530292(0x1fd),_0x530292(0x172)+_0x4bae4d);else await handleError(_0x528a38,_0x530292(0x1c1),_0x4bae4d);}}}allOrdersPlaced=!![];if(lastOrders[_0x530292(0x17f)]!=0x0){lockOrders=!![],validateOrdersState=_0x530292(0x1a7),setTimeout(function(){validateOrders();},0x1388);const _0x3afd55=config[_0x530292(0x1b5)]==_0x530292(0x19d)?validateOrderTimeout*0x3c*0x3e8:config[_0x530292(0x188)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3afd55);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x530292(0x21c),_0x530292(0x258)));}else{if(coolingDown)!config[_0x530292(0x25c)]&&logHistory(_0x530292(0x1fd),_0x530292(0x16a));else lockOrders&&(!config[_0x530292(0x25c)]&&(config[_0x530292(0x1b5)]==_0x530292(0x19d)?logHistory(_0x530292(0x1fd),_0x530292(0x16e)):logHistory('error',_0x530292(0x175))));}}function restoreOrders(){const _0x5d66ff=_0x10a1ec;let _0x50fee1;lockOrders=!![],validateOrdersState=_0x5d66ff(0x1db),currentCoins[_0x5d66ff(0x1b4)](_0x475ca1=>{const _0x23145f=_0x5d66ff,_0x369095=allOpenOrders[_0x23145f(0x16f)](_0x14d5c3=>_0x14d5c3[_0x23145f(0x1de)]==_0x475ca1[_0x23145f(0x1de)]);_0x369095&&(lastOrders[_0x23145f(0x229)]({'orderId':_0x369095['id'],'symbol':_0x475ca1[_0x23145f(0x1de)],'coin':_0x475ca1[_0x23145f(0x201)],'side':_0x369095[_0x23145f(0x18f)],'reverse':_0x475ca1[_0x23145f(0x150)],'amount':_0x369095[_0x23145f(0x174)],'filled':0x0,'price':_0x369095[_0x23145f(0x20d)],'fee':_0x369095[_0x23145f(0x25b)]}),_0x475ca1['order']=!![],_0x50fee1=_0x369095['timestamp']);});const _0x37fc3b=new Date()[_0x5d66ff(0x24b)](),_0x3591bc=config[_0x5d66ff(0x1b5)]==_0x5d66ff(0x19d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x50fee1+_0x3591bc>_0x37fc3b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4eaba6=_0x5d66ff;validateOrders(_0x4eaba6(0x15a));},_0x50fee1+_0x3591bc-_0x37fc3b);}else validateOrders(_0x5d66ff(0x15a));}function sendPortfolioTelegram(){const _0x4b545e=_0x10a1ec,_0x1481a6=[_0x4b545e(0x23f),_0x4b545e(0x1f6),_0x4b545e(0x211)],_0x219e00=_0x1481a6[_0x4b545e(0x209)](config[_0x4b545e(0x238)])?0x2:0x8;let _0x19b7e6='';if(config['showname'])_0x19b7e6=config[_0x4b545e(0x235)]+_0x4b545e(0x19e);else _0x19b7e6=_0x4b545e(0x166)+botID+_0x4b545e(0x19e);_0x19b7e6+='<pre>',_0x19b7e6+=_0x4b545e(0x1b8),_0x19b7e6+=_0x4b545e(0x1d5),currentCoins[_0x4b545e(0x1b4)](_0x5c489a=>{const _0x5ad26e=_0x4b545e;_0x19b7e6+=_0x5c489a[_0x5ad26e(0x201)][_0x5ad26e(0x1c8)](0x7)+'|\x20'+formatPad(_0x5c489a[_0x5ad26e(0x1c6)],0x2,0x6)+'|\x20'+formatPad(_0x5c489a[_0x5ad26e(0x19a)],0x2,0x6)+'|\x20'+formatPad(_0x5c489a[_0x5ad26e(0x1e9)]*0x64,0x2,0x6)+'\x0a';}),_0x19b7e6+=_0x4b545e(0x249),process[_0x4b545e(0x1d6)]({'telegrammsg':_0x19b7e6},_0x3e894a=>{});}function formatPad(_0x261cff,_0x56c8b1,_0x1a581a){const _0x4bfbb4=_0x10a1ec,_0x3fd574=formatResultString(_0x261cff,_0x56c8b1);return _0x3fd574?_0x3fd574['padStart'](_0x1a581a):''[_0x4bfbb4(0x1f4)](_0x1a581a);}function logHistory(_0x127388,_0x2910f7,_0x149ddc=''){const _0x5ad8fa=_0x10a1ec;let _0x56e427={'time':getTimeStamp(),'type':_0x127388,'event':_0x2910f7};dbLogs['get'](_0x5ad8fa(0x173))[_0x5ad8fa(0x229)](_0x56e427)[_0x5ad8fa(0x18c)]();if(_0x149ddc=='')_0x149ddc=_0x2910f7;proxyEmit('event',{'log':_0x56e427,'summary':_0x149ddc}),process[_0x5ad8fa(0x1d6)]({'telegram':{..._0x56e427,'botname':config[_0x5ad8fa(0x235)],'showname':config[_0x5ad8fa(0x219)]}},_0x18b5be=>{}),logging(''+_0x56e427[_0x5ad8fa(0x250)]);}function emitHistory(_0x1e6f53={}){const _0x54ee4a=_0x10a1ec;Object['keys'](_0x1e6f53)[_0x54ee4a(0x17f)]==0x0&&(_0x1e6f53={'type':['order',_0x54ee4a(0x250)],'event':'','page':0x1});if(_0x1e6f53[_0x54ee4a(0x14c)][_0x54ee4a(0x209)](_0x54ee4a(0x250)))_0x1e6f53[_0x54ee4a(0x14c)][_0x54ee4a(0x1b6)](_0x1e6f53[_0x54ee4a(0x14c)][_0x54ee4a(0x184)](_0x54ee4a(0x250)),0x1,_0x54ee4a(0x1fd),_0x54ee4a(0x21c));if(dbLogs['has']('logs')['value']()){let _0x13faf3=dbLogs[_0x54ee4a(0x224)](_0x54ee4a(0x173))[_0x54ee4a(0x243)](_0x33902a=>{const _0x2ed989=_0x54ee4a;if(_0x1e6f53[_0x2ed989(0x14c)][_0x2ed989(0x17f)]==0x0)return![];else return _0x1e6f53[_0x2ed989(0x14c)][_0x2ed989(0x209)](_0x33902a['type']);})['filter'](_0x491ecc=>{const _0x5928d6=_0x54ee4a;if(_0x1e6f53[_0x5928d6(0x250)]=='')return!![];else return _0x491ecc['event']['toLowerCase']()['includes'](_0x1e6f53[_0x5928d6(0x250)]['toLowerCase']());})['sortBy'](_0x54ee4a(0x1d0)),_0x5d8965=_0x13faf3[_0x54ee4a(0x264)]()[_0x54ee4a(0x17f)];_0x13faf3=_0x13faf3[_0x54ee4a(0x150)]()['slice']((_0x1e6f53['page']-0x1)*logPageSize,_0x1e6f53[_0x54ee4a(0x1e1)]*logPageSize-0x1)['reverse']()[_0x54ee4a(0x264)](),proxyEmit('event-history',{'logs':_0x13faf3,'total':_0x5d8965});}else proxyEmit(_0x54ee4a(0x216),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x182703){const _0x31409e=_0x10a1ec;if(dbLogs[_0x31409e(0x177)](_0x31409e(0x173))[_0x31409e(0x264)]()){const _0x2a0a67=dbLogs[_0x31409e(0x224)](_0x31409e(0x173))['sortBy'](_0x31409e(0x1d0))[_0x31409e(0x243)](_0x3590a7=>{const _0x3997ea=_0x31409e;return _0x3590a7[_0x3997ea(0x14c)]=='order';})['value']();dbLogs[_0x31409e(0x224)](_0x31409e(0x173))[_0x31409e(0x1dd)]()[_0x31409e(0x18c)](),dbLogs['get'](_0x31409e(0x173))[_0x31409e(0x1da)](_0x2a0a67)[_0x31409e(0x18c)](),emitHistory(_0x182703);}}async function pauseBot(_0x42b574=''){const _0x38b258=_0x10a1ec,_0x27d131=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x38b258(0x24b)](),consecutivePauses=0x1;else{if(_0x27d131-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x38b258(0x1d6)]({'stop':_0x38b258(0x1d2)},_0x330b0f=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x38b258(0x24b)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x42b574)_0x42b574+='\x20|\x20';logHistory('error',_0x42b574+_0x38b258(0x190)+pauseBotInterval/0xea60+_0x38b258(0x1b0)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x424e11=_0x10a1ec;process[_0x424e11(0x1d6)]({'stop':_0x424e11(0x228)},_0x585d92=>{}),await sleep(0x7d0);}async function handleError(_0x36fe66,_0x2bf199,_0x952009=''){const _0x35d191=_0x10a1ec;if(_0x36fe66[_0x35d191(0x19b)]()['includes']('DDoSProtection'))await pauseBot(_0x35d191(0x1ca));else{if(_0x36fe66['toString']()[_0x35d191(0x209)]('ExchangeNotAvailable'))await pauseBot('Binance\x20not\x20available\x20(2)');else{if(_0x36fe66['toString']()[_0x35d191(0x209)](_0x35d191(0x1cc)))await pauseBot(_0x35d191(0x226));else{if(_0x36fe66[_0x35d191(0x19b)]()[_0x35d191(0x209)](_0x35d191(0x20e)))logHistory(_0x35d191(0x1fd),_0x2bf199+_0x35d191(0x159)),logHistory('error',_0x35d191(0x1bf)),await killBot();else{if(_0x36fe66['toString']()[_0x35d191(0x209)](_0x35d191(0x1eb)))logHistory('error',_0x2bf199+_0x35d191(0x23a)),logHistory('error',_0x35d191(0x1bf)),await killBot();else{if(_0x36fe66[_0x35d191(0x19b)]()[_0x35d191(0x209)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x35d191(0x1fd),_0x2bf199+_0x35d191(0x167)),logHistory('error',_0x35d191(0x1bf)),await killBot();else{if(_0x36fe66[_0x35d191(0x19b)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x35d191(0x1fd),_0x2bf199+_0x35d191(0x1a5)),logHistory('error',_0x35d191(0x1bf)),await killBot();else{if(_0x36fe66[_0x35d191(0x19b)]()['includes'](_0x35d191(0x20a)))await pauseBot(_0x35d191(0x248)),process[_0x35d191(0x1d6)]({'stop':'restart'},_0x10f572=>{});else _0x36fe66[_0x35d191(0x19b)]()[_0x35d191(0x209)]('InsufficientFunds')?logHistory('error',_0x2bf199+_0x35d191(0x141)+_0x952009):(logging(_0x2bf199+'\x20|\x20Error\x20details:\x20',_0x36fe66),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x2284a5,_0x388808){const _0x12e60c=_0x10a1ec;return parseFloat(_0x2284a5[_0x12e60c(0x191)](_0x388808));}function formatResultTruncate(_0x3fd71c,_0x160d55){const _0x319510=_0x10a1ec;let _0x955038=formatResultString(_0x3fd71c,0xa),_0x1a8313=_0x955038[_0x319510(0x184)]('.');return _0x1a8313!=-0x1&&(_0x955038=_0x955038[_0x319510(0x1f0)](0x0,_0x1a8313+_0x160d55+0x1)),Number(_0x955038);}function formatResultString(_0x3dd826,_0x4d18df){const _0x4c20b1=_0x10a1ec;let _0xbef64d;if(!(''+_0x3dd826)[_0x4c20b1(0x209)]('e'))_0xbef64d=+(Math[_0x4c20b1(0x1ce)](_0x3dd826+'e+'+_0x4d18df)+'e-'+_0x4d18df);else{let _0xa749e9=(''+_0x3dd826)[_0x4c20b1(0x24a)]('e'),_0x5830ba='';+_0xa749e9[0x1]+_0x4d18df>0x0&&(_0x5830ba='+'),_0xbef64d=+(Math[_0x4c20b1(0x1ce)](+_0xa749e9[0x0]+'e'+_0x5830ba+(+_0xa749e9[0x1]+_0x4d18df))+'e-'+_0x4d18df);}return Number(_0xbef64d)[_0x4c20b1(0x191)](_0x4d18df);}function logging(_0x330b8a,_0x327e72=''){const _0x45e8da=_0x10a1ec;if(config['showname'])console[_0x45e8da(0x14e)](getTimeStamp()+':\x20'+config[_0x45e8da(0x235)]+_0x45e8da(0x15e)+_0x330b8a,_0x327e72);else console[_0x45e8da(0x14e)](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x330b8a,_0x327e72);}function getServerTime(){const _0x471e8e=_0x10a1ec,_0x504772=new Date();return _0x504772[_0x471e8e(0x25d)]()+'/'+(_0x504772[_0x471e8e(0x25f)]()+0x1)[_0x471e8e(0x19b)]()['padStart'](0x2,'0')+'/'+_0x504772[_0x471e8e(0x1e4)]()[_0x471e8e(0x19b)]()[_0x471e8e(0x1f4)](0x2,'0')+'\x20'+_0x504772[_0x471e8e(0x1fe)]()[_0x471e8e(0x19b)]()['padStart'](0x2,'0')+':'+_0x504772[_0x471e8e(0x1fb)]()[_0x471e8e(0x19b)]()[_0x471e8e(0x1f4)](0x2,'0')+':'+_0x504772[_0x471e8e(0x1ed)]()[_0x471e8e(0x19b)]()[_0x471e8e(0x1f4)](0x2,'0');}function getTimeStamp(){const _0x357f7f=_0x10a1ec,_0x37fd64=shiftedTime();return _0x37fd64[_0x357f7f(0x25d)]()+'/'+(_0x37fd64[_0x357f7f(0x25f)]()+0x1)[_0x357f7f(0x19b)]()['padStart'](0x2,'0')+'/'+_0x37fd64[_0x357f7f(0x1e4)]()[_0x357f7f(0x19b)]()['padStart'](0x2,'0')+'\x20'+_0x37fd64[_0x357f7f(0x1fe)]()[_0x357f7f(0x19b)]()[_0x357f7f(0x1f4)](0x2,'0')+':'+_0x37fd64['getMinutes']()[_0x357f7f(0x19b)]()[_0x357f7f(0x1f4)](0x2,'0')+':'+_0x37fd64['getSeconds']()['toString']()[_0x357f7f(0x1f4)](0x2,'0');}function getDate(){const _0x4bce70=_0x10a1ec,_0x2188ac=shiftedTime();return _0x2188ac['getFullYear']()+'/'+(_0x2188ac[_0x4bce70(0x25f)]()+0x1)[_0x4bce70(0x19b)]()['padStart'](0x2,'0')+'/'+_0x2188ac['getDate']()[_0x4bce70(0x19b)]()[_0x4bce70(0x1f4)](0x2,'0');}function getHour(){const _0x368e48=_0x10a1ec,_0x313ad8=shiftedTime();return _0x313ad8[_0x368e48(0x1fe)]()[_0x368e48(0x19b)]()[_0x368e48(0x1f4)](0x2,'0');}function sleep(_0x45057c){return new Promise(_0xd7a534=>setTimeout(_0xd7a534,_0x45057c));}function shiftedTime(){const _0x5d26f0=_0x10a1ec,_0x46c4b7=new Date();let _0x40393b=_0x46c4b7;if(config&&config[_0x5d26f0(0x210)]!==0x0)_0x40393b=fns[_0x5d26f0(0x147)](_0x46c4b7,{'hours':config['timeshift']});return _0x40393b;}