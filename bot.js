const _0x52b960=_0xc036;(function(_0x14a707,_0x509feb){const _0x55edfb=_0xc036,_0x56d20d=_0x14a707();while(!![]){try{const _0x2f9993=-parseInt(_0x55edfb(0xc0))/0x1+parseInt(_0x55edfb(0x155))/0x2*(parseInt(_0x55edfb(0xdc))/0x3)+-parseInt(_0x55edfb(0x119))/0x4*(parseInt(_0x55edfb(0xb7))/0x5)+parseInt(_0x55edfb(0x133))/0x6+parseInt(_0x55edfb(0x14d))/0x7+-parseInt(_0x55edfb(0x156))/0x8+-parseInt(_0x55edfb(0x13f))/0x9;if(_0x2f9993===_0x509feb)break;else _0x56d20d['push'](_0x56d20d['shift']());}catch(_0x4b2cb2){_0x56d20d['push'](_0x56d20d['shift']());}}}(_0x444c,0xdd001));const _0x50058a=function(){let _0xbee506=!![];return function(_0x37cf33,_0x1e6ae7){const _0x3a1d31=_0xbee506?function(){const _0x43534e=_0xc036;if(_0x1e6ae7){const _0x4d5823=_0x1e6ae7[_0x43534e(0xb5)](_0x37cf33,arguments);return _0x1e6ae7=null,_0x4d5823;}}:function(){};return _0xbee506=![],_0x3a1d31;};}(),_0x5c4329=_0x50058a(this,function(){const _0x16a7f6=_0xc036;return _0x5c4329['toString']()['search'](_0x16a7f6(0x9a))[_0x16a7f6(0x10b)]()['constructor'](_0x5c4329)[_0x16a7f6(0xe7)]('(((.+)+)+)+$');});_0x5c4329();'use strict';const ccxt=require(_0x52b960(0x131)),low=require('lowdb'),FileSync=require(_0x52b960(0xf1)),fs=require('fs'),fns=require(_0x52b960(0x151)),{WebsocketClient,DefaultLogger}=require(_0x52b960(0xd8)),Crypt=require(_0x52b960(0x7c))[_0x52b960(0x67)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;function _0xc036(_0x432f94,_0x5031a3){const _0x2adad2=_0x444c();return _0xc036=function(_0x5c4329,_0x50058a){_0x5c4329=_0x5c4329-0x66;let _0x444cdd=_0x2adad2[_0x5c4329];return _0x444cdd;},_0xc036(_0x432f94,_0x5031a3);}let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x52b960(0x10f))[_0x52b960(0x6b)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x52b960(0x162)](botID))return console[_0x52b960(0xf3)](_0x52b960(0x159)+botID+_0x52b960(0xaa)),process[_0x52b960(0xb6)](0x1);const configpath=_0x52b960(0xa9);!fs[_0x52b960(0x165)](configpath)&&fs[_0x52b960(0x13d)](configpath);const configfile=configpath+_0x52b960(0xf2)+botID+'-config.json',logfile=configpath+_0x52b960(0xf2)+botID+_0x52b960(0xce),performancefile=configpath+'bot-'+botID+_0x52b960(0x10d),coinresultsfile=configpath+_0x52b960(0xf2)+botID+_0x52b960(0xac),settingsfile=configpath+_0x52b960(0xae),securefile=configpath+_0x52b960(0x7e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x52b960(0x139)]({'data':[]})[_0x52b960(0x6d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x52b960(0x139)]({'bot':[]})[_0x52b960(0x6d)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x52b960(0x6d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x52b960(0xe9),'symbol':'BTC/EUR'},'usd':{'coin':_0x52b960(0xb8),'symbol':_0x52b960(0x14e)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x28db43)=>{},'debug':(..._0x4aa2a2)=>{},'notice':(..._0x1af2ae)=>{},'info':(..._0x2db9ef)=>{},'warning':(..._0x54115f)=>{},'error':async function(..._0x16e114){const _0x5ee0a0=_0x52b960,_0x1ea31a=new Date()[_0x5ee0a0(0x96)]();if(!lastErrorShown||_0x1ea31a-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x5ee0a0(0xe1),'WebSockets('+consecutivePauses+_0x5ee0a0(0xea));let _0x4a6f5e='';if(_0x16e114[0x0])_0x4a6f5e+=_0x16e114[0x0];if(_0x16e114[0x1]&&_0x16e114[0x1]['error']&&_0x16e114[0x1][_0x5ee0a0(0xe1)]['message'])_0x4a6f5e+=_0x5ee0a0(0x147)+_0x16e114[0x1]['error'][_0x5ee0a0(0xd1)];logging(_0x5ee0a0(0x125)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x4a6f5e),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x52b960(0x152),'rsaStandard':_0x52b960(0x8d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x52b960(0xfb)]!=config[_0x52b960(0xfb)]&&updateTimeshift(settings[_0x52b960(0xfb)]);process[_0x52b960(0x124)]({'started':_0x52b960(0xe0)}),initializeProcessListeners();function proxyEmit(_0x3d5f7a,_0x4c06ce=null){const _0x38525c=_0x52b960;process[_0x38525c(0x124)]({'function':_0x3d5f7a,'args':_0x4c06ce});}function initializeProcessListeners(){process['on']('message',_0xbcc59e=>{const _0xe6bc9b=_0xc036;switch(Object[_0xe6bc9b(0x8f)](_0xbcc59e)[0x0]){case _0xe6bc9b(0xfb):_0xbcc59e[_0xe6bc9b(0xfb)]!=undefined&&(settings[_0xe6bc9b(0xfb)]=_0xbcc59e[_0xe6bc9b(0xfb)],updateTimeshift(settings[_0xe6bc9b(0xfb)]));break;case'function':switch(_0xbcc59e['function']){case _0xe6bc9b(0xd0):initclient();break;case'emitHistory':emitHistory(_0xbcc59e[_0xe6bc9b(0x12c)]);break;case _0xe6bc9b(0x105):getPortfolio(_0xbcc59e[_0xe6bc9b(0x12c)]);break;case _0xe6bc9b(0x168):storeConfiguration(_0xbcc59e[_0xe6bc9b(0x12c)]);break;case'storeHeadless':storeHeadless(_0xbcc59e[_0xe6bc9b(0x12c)]);break;case _0xe6bc9b(0x136):getStartingBalances();break;case _0xe6bc9b(0x120):placeOrder(_0xbcc59e[_0xe6bc9b(0x12c)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2cb895=_0x52b960;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2cb895(0x81)],config['apiSecret']);let _0x4cba50=await loadSymbols();_0x4cba50&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x272c12,_0x2d806d){const _0x28183c=_0x52b960,_0x586beb=ccxt[config[_0x28183c(0xeb)]];let _0x25877b;switch(config[_0x28183c(0xeb)]){case'binance':_0x25877b=_0x28183c(0xf6);break;case _0x28183c(0x78):_0x25877b=_0x28183c(0x13b);break;default:_0x25877b=_0x28183c(0xf6);}exchange=new _0x586beb({'apiKey':_0x272c12,'secret':_0x2d806d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x272c12,'api_secret':_0x2d806d,'beautify':!![],'wsUrl':_0x25877b},logger),config[_0x28183c(0xeb)]==_0x28183c(0x78)&&(stablecoins={'eur':{'coin':_0x28183c(0x153),'symbol':'BTC/BUSD'},'usd':{'coin':_0x28183c(0xb8),'symbol':_0x28183c(0x14e)}});}async function loadSymbols(){const _0x6af15f=_0x52b960;let _0xe7cfe;try{markets=await exchange[_0x6af15f(0x7b)](),allSymbols=exchange[_0x6af15f(0x97)][_0x6af15f(0x126)](_0x3d1bb4=>{const _0x171ca8=_0x6af15f;return!_0x3d1bb4[_0x171ca8(0x80)](_0x171ca8(0xd4));}),_0xe7cfe=!![];}catch(_0x37c36e){await handleError(_0x37c36e,'loadSymbols()'),_0xe7cfe=![];}return _0xe7cfe;}async function initbot(){const _0x15d284=_0x52b960;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x15451d=dbCoinResults['get'](_0x15d284(0x15a))['value']();if(_0x15451d[_0x15d284(0x13a)]==0x0)await resetCoinResults();}async function initclient(){const _0x3a220f=_0x52b960;proxyEmit('configuration',emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3a220f(0x123),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0xddbd97=_0x52b960;wsinitialized=![];ws1&&(ws1['forEach'](_0x432a8c=>{const _0x4a92db=_0xc036;try{wsClient[_0x4a92db(0xbd)](_0x432a8c);}catch(_0x2f9db7){}}),ws1=[]);if(ws2){try{wsClient[_0xddbd97(0xbd)](ws2);}catch(_0x38e880){}ws2=null;}}async function initws(){const _0x47e72b=_0x52b960;cleanws();let _0x200e6d=[];currentCoins[_0x47e72b(0x121)](_0x2248a0=>{const _0x4b788b=_0x47e72b;if(_0x2248a0[_0x4b788b(0x163)]!=config[_0x4b788b(0x106)])_0x200e6d['push'](noslash(_0x2248a0[_0x4b788b(0x114)]));});if(!_0x200e6d['includes'](stablecoins['eur']['coin']))_0x200e6d[_0x47e72b(0xde)](stablecoins['eur'][_0x47e72b(0x163)]);if(!_0x200e6d['includes'](stablecoins['usd'][_0x47e72b(0x163)]))_0x200e6d[_0x47e72b(0xde)](stablecoins[_0x47e72b(0x12f)][_0x47e72b(0x163)]);if(!_0x200e6d[_0x47e72b(0x80)](_0x47e72b(0xef)+config[_0x47e72b(0x106)]))_0x200e6d['push']('BNB'+config[_0x47e72b(0x106)]);try{_0x200e6d[_0x47e72b(0x121)]((_0x30744f,_0x232c7b)=>{const _0x98754f=_0x47e72b;ws1[_0x232c7b]=wsClient[_0x98754f(0x8e)](_0x30744f,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0x44857b=>{const _0x8dd367=_0x47e72b;if(!Array[_0x8dd367(0xc4)](_0x44857b)&&!_0x44857b[_0x8dd367(0x14b)]['includes'](_0x8dd367(0x150))){if(_0x44857b[_0x8dd367(0xa6)]==='kline'){global[_0x8dd367(0x11f)][_0x44857b[_0x8dd367(0x12a)][_0x8dd367(0x114)]]=_0x44857b[_0x8dd367(0x12a)][_0x8dd367(0xfa)];return;}}else{if(!Array[_0x8dd367(0xc4)](_0x44857b)&&_0x44857b[_0x8dd367(0x14b)][_0x8dd367(0x80)](_0x8dd367(0x150))){if(_0x44857b[_0x8dd367(0xba)][_0x8dd367(0x80)](_0x8dd367(0xb2))){updateNumberCoins(_0x44857b);return;}}}}),wsClient['on'](_0x47e72b(0x99),async _0x5b6007=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x308cf3){await handleError(_0x308cf3,_0x47e72b(0x88));}let _0x5037c5;while(_0x5037c5!=currentCoins['length']-0x1){_0x5037c5=0x0,currentCoins['forEach'](_0x2ff55b=>{const _0x52d5b1=_0x47e72b;if(_0x2ff55b[_0x52d5b1(0x163)]!=config[_0x52d5b1(0x106)]&&global[_0x52d5b1(0x11f)][noslash(_0x2ff55b[_0x52d5b1(0x114)])])_0x5037c5++;});let _0x48ddcc=Math[_0x47e72b(0x77)](_0x5037c5/(currentCoins[_0x47e72b(0x13a)]-0x1)*0x64);proxyEmit(_0x47e72b(0xaf),_0x48ddcc),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x440a50=_0x52b960;let _0x1d5f01=0x0,_0x20099d=0x0;try{_0x1d5f01=global[_0x440a50(0x11f)][stablecoins[_0x440a50(0xcd)][_0x440a50(0x163)]],_0x20099d=global[_0x440a50(0x11f)][stablecoins[_0x440a50(0x12f)][_0x440a50(0x163)]];}catch(_0x181a43){await handleError(_0x181a43,_0x440a50(0x82));}return{'eur':Number(_0x1d5f01),'usd':Number(_0x20099d)};}async function setStartDatePerformance(_0x4c0066){const _0x363cde=_0x52b960,_0x44c267=fns[_0x363cde(0x72)](new Date(_0x4c0066[_0x363cde(0x164)]),'yyyy/MM/dd');let _0x39d3dc=[];_0x39d3dc[stablecoins[_0x363cde(0xcd)][_0x363cde(0x163)]]=await getCloses(stablecoins[_0x363cde(0xcd)][_0x363cde(0x114)],new Date(_0x4c0066[_0x363cde(0x164)]),0x1),_0x39d3dc[stablecoins[_0x363cde(0x12f)][_0x363cde(0x163)]]=await getCloses(stablecoins[_0x363cde(0x12f)]['symbol'],new Date(_0x4c0066[_0x363cde(0x164)]),0x1);let _0x35bbc3,_0x3346bc=[];_0x4c0066['portfolio'][_0x363cde(0x121)](_0x2cce65=>{const _0x1b5d22=_0x363cde;!_0x2cce65[_0x1b5d22(0x144)]&&_0x3346bc[_0x1b5d22(0xde)]({'coin':_0x2cce65[_0x1b5d22(0x163)],'number':_0x2cce65[_0x1b5d22(0x86)],'price':_0x2cce65[_0x1b5d22(0xf8)]});}),_0x35bbc3={'date':_0x44c267,'eur':_0x39d3dc[stablecoins[_0x363cde(0xcd)]['coin']][0x0],'usd':_0x39d3dc[stablecoins[_0x363cde(0x12f)]['coin']][0x0],'coins':_0x3346bc};let _0x224426=dbPerformance[_0x363cde(0x140)]('data')[_0x363cde(0x8b)]({'date':_0x44c267})[_0x363cde(0x122)]();_0x224426?dbPerformance['get'](_0x363cde(0xe3))[_0x363cde(0x8b)]({'date':_0x44c267})['assign'](_0x35bbc3)[_0x363cde(0x6d)]():dbPerformance[_0x363cde(0x140)](_0x363cde(0xe3))['push'](_0x35bbc3)[_0x363cde(0x6d)](),_0x224426=dbPerformance[_0x363cde(0x140)](_0x363cde(0xe3))['sortBy'](_0x363cde(0x70))[_0x363cde(0x122)](),_0x224426['forEach'](_0x5abdd4=>{const _0x4d9b2c=_0x363cde;_0x5abdd4[_0x4d9b2c(0x70)]<_0x44c267&&dbPerformance[_0x4d9b2c(0x140)](_0x4d9b2c(0xe3))['remove']({'date':_0x5abdd4[_0x4d9b2c(0x70)]})[_0x4d9b2c(0x6d)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4ab16c){const _0x1dd6a0=_0x52b960;let _0x131693,_0x40a752=[];logHistory(_0x1dd6a0(0xfe),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x4ab16c[_0x1dd6a0(0x7a)][_0x1dd6a0(0x121)](_0x4db57a=>{const _0x1b7f56=_0x1dd6a0;if(_0x4db57a[_0x1b7f56(0x163)]!=config[_0x1b7f56(0x106)]&&!_0x4db57a[_0x1b7f56(0x144)])_0x40a752[_0x1b7f56(0xde)]({'coin':_0x4db57a[_0x1b7f56(0x163)],'symbol':_0x4db57a[_0x1b7f56(0x114)]});});let _0x333c0c=[];try{const _0x17c735=fns['format'](fns[_0x1dd6a0(0x75)](_0x4ab16c[_0x1dd6a0(0x164)][_0x1dd6a0(0x15e)](/\//g,'-')),_0x1dd6a0(0x73));for(const _0x58edbf of _0x40a752){if(_0x58edbf[_0x1dd6a0(0x163)]!=config[_0x1dd6a0(0x106)])_0x131693=await exchange[_0x1dd6a0(0x14a)](_0x58edbf[_0x1dd6a0(0x114)],Date[_0x1dd6a0(0x92)](_0x17c735));_0x131693['forEach'](_0xeb3f5a=>{const _0x310687=_0x1dd6a0,_0x40ab62=_0x58edbf['symbol'][_0x310687(0x80)](config['basecoin']+'/'),_0x4d2d0f=fns[_0x310687(0x72)](fns[_0x310687(0x75)](_0xeb3f5a[_0x310687(0x100)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x251b7d=fns[_0x310687(0x72)](fns[_0x310687(0x75)](_0xeb3f5a[_0x310687(0x100)]),_0x310687(0xa2));let _0x3469f7;if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0x110)&&_0x40ab62==![])_0x3469f7=_0xeb3f5a[_0x310687(0xcf)];if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0x110)&&_0x40ab62==!![])_0x3469f7=-_0xeb3f5a[_0x310687(0xcf)]*_0xeb3f5a['price'];if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0xca)&&_0x40ab62==![])_0x3469f7=-_0xeb3f5a['amount'];if(_0xeb3f5a['side']==_0x310687(0xca)&&_0x40ab62==!![])_0x3469f7=_0xeb3f5a[_0x310687(0xcf)]*_0xeb3f5a[_0x310687(0x7d)];_0x333c0c['push']({'timestamp':_0x4d2d0f,'date':_0x251b7d,'coin':_0x58edbf['coin'],'symbol':_0x58edbf[_0x310687(0x114)],'type':_0xeb3f5a[_0x310687(0x98)],'side':_0xeb3f5a['side'],'reverse':_0x40ab62,'amount':formatResult(_0xeb3f5a['filled'],0x8),'filled':formatResult(_0xeb3f5a[_0x310687(0x143)],0x8),'coinamount':formatResult(_0x3469f7,0x8),'price':formatResult(_0xeb3f5a['price'],0x8)});let _0x166edb;if(_0xeb3f5a[_0x310687(0x6a)]=='buy'&&_0x40ab62==![])_0x166edb=-_0xeb3f5a[_0x310687(0xcf)]*_0xeb3f5a[_0x310687(0x7d)];if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0x110)&&_0x40ab62==!![])_0x166edb=_0xeb3f5a[_0x310687(0xcf)];if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0xca)&&_0x40ab62==![])_0x166edb=_0xeb3f5a[_0x310687(0xcf)]*_0xeb3f5a[_0x310687(0x7d)];if(_0xeb3f5a[_0x310687(0x6a)]==_0x310687(0xca)&&_0x40ab62==!![])_0x166edb=-_0xeb3f5a[_0x310687(0xcf)];_0x333c0c[_0x310687(0xde)]({'date':_0x251b7d,'coin':config[_0x310687(0x106)],'coinamount':formatResult(_0x166edb,0x8)});});}_0x333c0c[_0x1dd6a0(0x167)]((_0x43f02d,_0x470efe)=>_0x43f02d[_0x1dd6a0(0x113)]>_0x470efe[_0x1dd6a0(0x113)]?0x1:_0x470efe[_0x1dd6a0(0x113)]>_0x43f02d[_0x1dd6a0(0x113)]?-0x1:0x0),dbLogs[_0x1dd6a0(0x140)](_0x1dd6a0(0xfc))[_0x1dd6a0(0x107)]()['write'](),_0x333c0c[_0x1dd6a0(0x121)](_0x2c9d9f=>{const _0x5a8c06=_0x1dd6a0;let _0xb31932;_0x2c9d9f[_0x5a8c06(0x163)]!=config[_0x5a8c06(0x106)]&&(_0xb31932={'time':_0x2c9d9f[_0x5a8c06(0x113)],'type':_0x5a8c06(0x69),'event':_0x5a8c06(0xc1)+_0x2c9d9f[_0x5a8c06(0x114)]+'\x20'+_0x2c9d9f[_0x5a8c06(0x6a)]+'\x20#'+_0x2c9d9f[_0x5a8c06(0xcf)]+'\x20@'+_0x2c9d9f[_0x5a8c06(0x7d)]},dbLogs['get'](_0x5a8c06(0xfc))[_0x5a8c06(0xde)](_0xb31932)[_0x5a8c06(0x6d)]());});const _0x30509d=fns['eachDayOfInterval']({'start':new Date(_0x4ab16c['startdate']),'end':new Date()})[_0x1dd6a0(0xa0)](_0x17ac83=>fns['format'](_0x17ac83,_0x1dd6a0(0xa2)));let _0x54dfac=[];_0x4ab16c[_0x1dd6a0(0x7a)][_0x1dd6a0(0x121)](_0x515fda=>{const _0x578652=_0x1dd6a0;if(!_0x515fda[_0x578652(0x144)]){_0x54dfac[_0x515fda[_0x578652(0x163)]]=[];let _0x409c9d=_0x515fda[_0x578652(0x86)];_0x30509d['forEach']((_0x1945b7,_0x3e1412)=>{const _0x16d051=_0x578652;let _0x771fe8=_0x333c0c[_0x16d051(0x126)](_0x4f3908=>_0x4f3908['coin']==_0x515fda['coin']&&_0x4f3908[_0x16d051(0x70)]==_0x1945b7);if(_0x771fe8[_0x16d051(0x13a)]!=0x0){let _0x53ca1f=_0x771fe8[_0x16d051(0x149)]((_0x539233,_0x48f9dd)=>{return _0x539233+=_0x48f9dd['coinamount'],_0x539233;},0x0);_0x409c9d+=_0x53ca1f;}_0x54dfac[_0x515fda[_0x16d051(0x163)]][_0x1945b7]=_0x409c9d;});}});const _0x90f698=[..._0x40a752];_0x90f698[_0x1dd6a0(0xde)]({'coin':stablecoins[_0x1dd6a0(0xcd)][_0x1dd6a0(0x163)],'symbol':stablecoins['eur'][_0x1dd6a0(0x114)]}),_0x90f698[_0x1dd6a0(0xde)]({'coin':stablecoins[_0x1dd6a0(0x12f)][_0x1dd6a0(0x163)],'symbol':stablecoins[_0x1dd6a0(0x12f)][_0x1dd6a0(0x114)]});let _0x1db9de=[];for(const _0x267fe3 of _0x90f698){_0x1db9de[_0x267fe3[_0x1dd6a0(0x163)]]=await getCloses(_0x267fe3[_0x1dd6a0(0x114)],new Date(_0x4ab16c[_0x1dd6a0(0x164)]));}dbPerformance[_0x1dd6a0(0x140)](_0x1dd6a0(0xe3))['remove']()['write'](),_0x30509d[_0x1dd6a0(0x121)]((_0x2947b9,_0x175da5)=>{const _0x1c7495=_0x1dd6a0;let _0x1edea8,_0x479207=[];_0x175da5==0x0?(_0x4ab16c[_0x1c7495(0x7a)][_0x1c7495(0x121)](_0x2ca9b9=>{const _0x540a27=_0x1c7495;!_0x2ca9b9[_0x540a27(0x144)]&&_0x479207['push']({'coin':_0x2ca9b9[_0x540a27(0x163)],'number':_0x2ca9b9[_0x540a27(0x86)],'price':_0x2ca9b9[_0x540a27(0xf8)]});}),_0x1edea8={'date':_0x2947b9,'eur':_0x1db9de[stablecoins[_0x1c7495(0xcd)][_0x1c7495(0x163)]][_0x175da5],'usd':_0x1db9de[stablecoins[_0x1c7495(0x12f)][_0x1c7495(0x163)]][_0x175da5],'coins':_0x479207}):(_0x4ab16c[_0x1c7495(0x7a)]['forEach'](_0x30b5c0=>{const _0x1931ad=_0x1c7495;!_0x30b5c0[_0x1931ad(0x144)]&&_0x479207[_0x1931ad(0xde)]({'coin':_0x30b5c0[_0x1931ad(0x163)],'number':_0x54dfac[_0x30b5c0[_0x1931ad(0x163)]][_0x2947b9],'price':_0x30b5c0['coin']==config['basecoin']?0x1:_0x1db9de[_0x30b5c0[_0x1931ad(0x163)]][_0x175da5]});}),_0x1edea8={'date':_0x2947b9,'eur':_0x1db9de[stablecoins[_0x1c7495(0xcd)]['coin']][_0x175da5],'usd':_0x1db9de[stablecoins['usd']['coin']][_0x175da5],'coins':_0x479207}),dbPerformance[_0x1c7495(0x140)](_0x1c7495(0xe3))[_0x1c7495(0xde)](_0x1edea8)[_0x1c7495(0x6d)]();}),emitPerformance(),await resetCoinResults();for(let _0x23a859 of _0x333c0c){_0x23a859[_0x1dd6a0(0x163)]!=config[_0x1dd6a0(0x106)]&&await updateCoinResults(_0x23a859);}logHistory(_0x1dd6a0(0xfe),_0x1dd6a0(0x154));}catch(_0x51ee2d){await handleError(_0x51ee2d,_0x1dd6a0(0xed));}}async function getCloses(_0x1236ea,_0xa3a993,_0x1c7fde=undefined){const _0xc26dc0=_0x52b960,_0x13631e='1d';let _0x6bfb61,_0x4c100e;const _0x2cebf6=fns[_0xc26dc0(0x135)](new Date(),_0xa3a993)+0x1;try{const _0xb71247=exchange['milliseconds']()-_0x2cebf6*0x18*0xe10*0x3e8;_0x6bfb61=await exchange[_0xc26dc0(0x12b)](_0x1236ea,_0x13631e,_0xb71247,_0x1c7fde),_0x4c100e=await exchange['fetchTickers'](_0x1236ea);}catch(_0x413e73){await handleError(_0x413e73,'getCloses()');}let _0x12da43=ohlcvToCloses(_0x6bfb61);return _0x12da43[_0xc26dc0(0xde)](_0x4c100e[_0x1236ea][_0xc26dc0(0x130)]),_0x12da43;}function ohlcvToCloses(_0x138d83){const _0x285d9b=_0x52b960;let _0xe103ff=[];return _0x138d83[_0x285d9b(0x121)](function(_0x182fa4){const _0x1ff602=_0x285d9b;_0xe103ff[_0x1ff602(0xde)](_0x182fa4[0x4]);}),_0xe103ff;}function getConfiguration(_0x1f3a5c){const _0x59ec71=_0x52b960;let _0x51ed17=dbConfig[_0x59ec71(0x140)]('bot')[_0x59ec71(0x8b)]({'botID':_0x1f3a5c})['value']();if(_0x51ed17){let _0x3e1cf2=![];!_0x51ed17[_0x59ec71(0xeb)]&&(_0x51ed17={..._0x51ed17,'exchange':'binance'},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0x106)]&&(_0x51ed17={..._0x51ed17,'basecoin':'BTC'},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0xb3)]&&(_0x51ed17={..._0x51ed17,'ordertype':_0x59ec71(0x84)},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0x15f)]&&(_0x51ed17={..._0x51ed17,'timeout':0x14},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0x15d)]&&(_0x51ed17={..._0x51ed17,'emojibuy':''},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0x112)]&&(_0x51ed17={..._0x51ed17,'emojisell':''},_0x3e1cf2=!![]),!_0x51ed17[_0x59ec71(0x148)]&&(_0x51ed17={..._0x51ed17,'showname':![]},_0x3e1cf2=!![]),_0x3e1cf2&&(_0x51ed17={'botID':_0x51ed17['botID'],'exchange':_0x51ed17['exchange'],'apiKey':_0x51ed17[_0x59ec71(0x81)],'apiSecret':_0x51ed17[_0x59ec71(0x79)],'basecoin':_0x51ed17['basecoin'],'botname':_0x51ed17[_0x59ec71(0x137)],'showname':_0x51ed17[_0x59ec71(0x148)],'threshold':_0x51ed17[_0x59ec71(0xff)],'ordertype':_0x51ed17[_0x59ec71(0xb3)],'timeout':_0x51ed17[_0x59ec71(0x15f)],'startdate':_0x51ed17['startdate'],'recreate':_0x51ed17['recreate'],'timeshift':_0x51ed17['timeshift'],'headless':_0x51ed17[_0x59ec71(0x127)],'cooldown':_0x51ed17['cooldown'],'emojibuy':_0x51ed17[_0x59ec71(0x15d)],'emojisell':_0x51ed17['emojisell'],'portfolio':_0x51ed17[_0x59ec71(0x7a)]},dbConfig[_0x59ec71(0x140)](_0x59ec71(0x142))['remove']()['write'](),dbConfig[_0x59ec71(0x140)](_0x59ec71(0x142))[_0x59ec71(0xde)](_0x51ed17)[_0x59ec71(0x6d)]());}else _0x51ed17={'botID':_0x1f3a5c,'exchange':_0x59ec71(0xd8),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x59ec71(0xd6)+_0x1f3a5c,'showname':![],'threshold':'3','ordertype':_0x59ec71(0x84),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x51ed17;}function emittedConfiguration(){const _0x4526c2=_0x52b960;let _0x1590b6;return config[_0x4526c2(0x81)]==''?_0x1590b6=config:_0x1590b6={...config,'apiKey':'************','apiSecret':_0x4526c2(0xe8)},_0x1590b6;}function getSettings(){const _0x22d5ab=_0x52b960;return dbSettings['get'](_0x22d5ab(0x146))[_0x22d5ab(0x122)]();}function getSecure(){const _0xe1c2e9=_0x52b960;return dbSecure[_0xe1c2e9(0x140)](_0xe1c2e9(0x109))[_0xe1c2e9(0x122)]()||{};}function updateTimeshift(_0x4b14ad){const _0x435fb2=_0x52b960;let _0x8c238b=dbConfig[_0x435fb2(0x140)](_0x435fb2(0x142))[_0x435fb2(0x8b)]({'botID':botID})[_0x435fb2(0x122)]();_0x8c238b&&dbConfig[_0x435fb2(0x140)](_0x435fb2(0x142))[_0x435fb2(0x8b)]({'botID':botID})[_0x435fb2(0xd2)]({'timeshift':_0x4b14ad})[_0x435fb2(0x6d)](),config[_0x435fb2(0xfb)]=_0x4b14ad,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3cb2c5){const _0x268506=_0x52b960;let _0x11ff37=dbConfig[_0x268506(0x140)](_0x268506(0x142))['find']({'botID':botID})['value']();_0x3cb2c5={..._0x3cb2c5,'apiKey':crypt['decrypt'](secure['privateKey'],_0x3cb2c5[_0x268506(0x81)])['message'],'apiSecret':crypt[_0x268506(0x8c)](secure[_0x268506(0xf9)],_0x3cb2c5[_0x268506(0x79)])[_0x268506(0xd1)]};if(_0x11ff37){if(_0x3cb2c5['apiKey']==_0x268506(0xe8))_0x3cb2c5[_0x268506(0x81)]=config['apiKey'];if(_0x3cb2c5[_0x268506(0x79)]=='************')_0x3cb2c5[_0x268506(0x79)]=config['apiSecret'];dbConfig[_0x268506(0x140)](_0x268506(0x142))['find']({'botID':botID})[_0x268506(0xd2)](_0x3cb2c5)[_0x268506(0x6d)]();}else dbConfig[_0x268506(0x140)](_0x268506(0x142))[_0x268506(0xde)](_0x3cb2c5)[_0x268506(0x6d)](),process[_0x268506(0x124)]({'status':'enabled','live':'running'});config={..._0x3cb2c5};if(config[_0x268506(0x103)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x268506(0x124)]({'botname':_0x3cb2c5[_0x268506(0x137)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x212423){const _0x54653a=_0x52b960,_0x5774ba={...config,'headless':_0x212423['headless']};let _0x1ef6b1=dbConfig[_0x54653a(0x140)]('bot')[_0x54653a(0x8b)]({'botID':botID})[_0x54653a(0x122)]();_0x1ef6b1&&dbConfig[_0x54653a(0x140)](_0x54653a(0x142))[_0x54653a(0x8b)]({'botID':botID})[_0x54653a(0xd2)](_0x5774ba)['write'](),config={..._0x5774ba},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x2b6504){return _0x2b6504['replace']('/','');}function updateNumberCoins(_0x3fa7ae){const _0x91d114=_0x52b960;_0x3fa7ae[_0x91d114(0xa6)]&&_0x3fa7ae[_0x91d114(0xa6)]=='outboundAccountPosition'&&_0x3fa7ae[_0x91d114(0x123)][_0x91d114(0x121)](_0xdc627=>{const _0x5c2136=_0x91d114;let _0x11a168=currentCoins[_0x5c2136(0x8b)](_0x4af2cd=>_0x4af2cd[_0x5c2136(0x163)]==_0xdc627[_0x5c2136(0x14f)]);if(_0x11a168)_0x11a168['number']=Number(_0xdc627['availableBalance']);}),_0x3fa7ae[_0x91d114(0xa6)]&&_0x3fa7ae[_0x91d114(0xa6)]=='executionReport'&&(_0x3fa7ae[_0x91d114(0xe4)]=='LIMIT'&&_0x3fa7ae['orderStatus']=='FILLED'&&lastOrders[_0x91d114(0x121)](_0x4ef74c=>{const _0x5ad239=_0x91d114;if(_0x4ef74c[_0x5ad239(0xd3)]==_0x3fa7ae[_0x5ad239(0xd3)]){if(_0x4ef74c[_0x5ad239(0x104)])_0x4ef74c['filled']=_0x3fa7ae['accumulatedQuantity']*_0x4ef74c['price'];else _0x4ef74c[_0x5ad239(0x143)]=_0x3fa7ae[_0x5ad239(0x6f)];}}));}async function getCoins(_0x468c86=!![],_0x290b3b=config['basecoin']){const _0x764b39=_0x52b960;let _0x52b2e5,_0x167e97=[],_0x5d87e9=[],_0x2f269a=[];try{_0x52b2e5=await exchange[_0x764b39(0xc8)](),mybalances=_0x52b2e5[_0x764b39(0xfd)];if(!_0x468c86)for(const [_0x8725ff,_0xbe6059]of Object['entries'](mybalances)){_0x2f269a[_0x764b39(0xde)](_0x8725ff);}else config[_0x764b39(0x7a)][_0x764b39(0x121)](_0x290d73=>{const _0x15a8e5=_0x764b39;if(!_0x290d73[_0x15a8e5(0x144)])_0x2f269a[_0x15a8e5(0xde)](_0x290d73[_0x15a8e5(0x163)]);});if(_0x290b3b=='')for(const [_0x3306c1,_0x4d66fb]of Object[_0x764b39(0x134)](mybalances)){_0x4d66fb['toString']()!=0x0&&_0x5d87e9[_0x764b39(0xde)]({'coin':_0x3306c1});}else for(const [_0x966813,_0x289558]of Object['entries'](mybalances)){if(_0x2f269a[_0x764b39(0x80)](_0x966813)){if((_0x289558[_0x764b39(0x10b)]()!=0x0||config['portfolio']['find'](_0x1ae82=>_0x1ae82['coin']==_0x966813))&&(allSymbols[_0x764b39(0x80)](_0x966813+'/'+_0x290b3b)||_0x966813==_0x290b3b))_0x5d87e9[_0x764b39(0xde)]({'coin':_0x966813,'symbol':_0x966813+'/'+_0x290b3b,'reverse':![],'number':_0x289558}),_0x966813!=_0x290b3b&&_0x167e97['push'](_0x966813+'/'+_0x290b3b);else(_0x289558[_0x764b39(0x10b)]()!=0x0||config[_0x764b39(0x7a)][_0x764b39(0x8b)](_0x2e8f34=>_0x2e8f34['coin']==_0x966813))&&allSymbols[_0x764b39(0x80)](_0x290b3b+'/'+_0x966813)&&(_0x5d87e9[_0x764b39(0xde)]({'coin':_0x966813,'symbol':_0x290b3b+'/'+_0x966813,'reverse':!![],'number':_0x289558}),_0x966813!=_0x290b3b&&_0x167e97[_0x764b39(0xde)](_0x290b3b+'/'+_0x966813));}}}catch(_0x38399e){if(!_0x468c86){if(_0x38399e[_0x764b39(0x10b)]()[_0x764b39(0x80)](_0x764b39(0x9e)))return logHistory('error',_0x764b39(0x11d)),![];else{if(_0x38399e['toString']()[_0x764b39(0x80)](_0x764b39(0x11a)))return logHistory(_0x764b39(0xe1),_0x764b39(0x9b)),![];else{if(_0x38399e[_0x764b39(0x10b)]()[_0x764b39(0x80)](_0x764b39(0x118)))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x38399e,_0x764b39(0x169));}}}else await handleError(_0x38399e,_0x764b39(0x169));}return _0x5d87e9;}async function getPortfolio(_0x55be56){const _0xa06092=_0x52b960;let _0x3d9c50=[],_0x48e2a7=[],_0x6326a5,_0x5e0fd2=[],_0x4aff57,_0x584b21;_0x55be56['apiKey']===_0xa06092(0xe8)||_0x55be56['apiSecret']===_0xa06092(0xe8)?(_0x4aff57=config[_0xa06092(0x81)],_0x584b21=config[_0xa06092(0x79)]):(_0x4aff57=_0x55be56['apiKey'],_0x584b21=_0x55be56['apiSecret']);await initExchange(_0x4aff57,_0x584b21);let _0x38d22c=await loadSymbols();if(_0x38d22c){_0x5e0fd2=await getCoins(![],_0x55be56['basecoin']);if(_0x5e0fd2===![])proxyEmit('portfolio',![]);else{if(_0x55be56[_0xa06092(0x106)]=='')proxyEmit(_0xa06092(0x7a),_0x5e0fd2);else{_0x5e0fd2[_0xa06092(0x121)](_0x173038=>{const _0x477cc6=_0xa06092;_0x3d9c50[_0x477cc6(0xde)](_0x173038[_0x477cc6(0x114)]);});try{_0x48e2a7=await exchange['fetchTickers'](_0x3d9c50);}catch(_0x30021d){await handleError(_0x30021d,_0xa06092(0xee));}_0x5e0fd2[_0xa06092(0x121)](_0x2d3968=>{const _0x3c29f8=_0xa06092;_0x2d3968['coin']!=_0x55be56[_0x3c29f8(0x106)]?_0x6326a5=_0x2d3968[_0x3c29f8(0x104)]?0x1/_0x48e2a7[_0x2d3968[_0x3c29f8(0x114)]]['last']:_0x48e2a7[_0x2d3968[_0x3c29f8(0x114)]][_0x3c29f8(0x130)]:_0x6326a5=0x1,_0x2d3968['price']=formatResult(_0x6326a5,0x8);}),proxyEmit(_0xa06092(0x7a),_0x5e0fd2);}}}else proxyEmit(_0xa06092(0x7a),![]);}function checkMinimums(_0x468d2e){const _0x3f47fb=_0x52b960;let _0x2e4c26=!![];const _0xfad680=!_0x468d2e['reverse']?markets[_0x468d2e[_0x3f47fb(0x114)]][_0x3f47fb(0xa8)][_0x3f47fb(0xcf)]['min']:markets[_0x468d2e['symbol']]['limits'][_0x3f47fb(0xdd)][_0x3f47fb(0x129)],_0x26bdb2=!_0x468d2e[_0x3f47fb(0x104)]?markets[_0x468d2e[_0x3f47fb(0x114)]][_0x3f47fb(0xa8)][_0x3f47fb(0xdd)][_0x3f47fb(0x129)]:markets[_0x468d2e[_0x3f47fb(0x114)]][_0x3f47fb(0xa8)][_0x3f47fb(0xcf)][_0x3f47fb(0x129)];if(Math[_0x3f47fb(0x85)](_0x468d2e[_0x3f47fb(0xc6)])<_0xfad680)_0x2e4c26=![];if(Math[_0x3f47fb(0x85)](_0x468d2e[_0x3f47fb(0xc6)])*_0x468d2e[_0x3f47fb(0x130)]<_0x26bdb2)_0x2e4c26=![];return _0x2e4c26;}async function getBalances(){const _0x5e9ff2=_0x52b960;let _0x1e8cab=0x0,_0x1f029d;const _0x5cf194=config[_0x5e9ff2(0xff)];currentCoins['forEach'](_0xa12b1c=>{const _0x58d14b=_0x5e9ff2;if(_0xa12b1c['coin']!=config[_0x58d14b(0x106)]){let _0x567671=global[_0x58d14b(0x11f)][noslash(_0xa12b1c['symbol'])];_0x1f029d=_0xa12b1c[_0x58d14b(0x104)]?0x1/_0x567671:_0x567671;}else _0x1f029d=0x1;let _0x29e9b1=_0xa12b1c[_0x58d14b(0xf0)]*_0x1f029d;_0x1e8cab+=_0x29e9b1,_0xa12b1c[_0x58d14b(0x130)]=formatResult(Number(_0x1f029d),0x8),_0xa12b1c[_0x58d14b(0x122)]=_0x29e9b1;}),currentCoins['forEach'](_0x9299ac=>{const _0x195eb9=_0x5e9ff2;let _0xa0bf31=config['portfolio'][_0x195eb9(0x8b)](_0x1fcf52=>_0x1fcf52['coin']==_0x9299ac[_0x195eb9(0x163)]),_0x37658a=Number(_0xa0bf31[_0x195eb9(0xf5)]),_0x47b5b7=_0x9299ac[_0x195eb9(0x122)]/_0x1e8cab*0x64,_0x50309b=_0x37658a*_0x1e8cab/0x64/_0x9299ac[_0x195eb9(0x130)]-_0x9299ac[_0x195eb9(0xf0)];_0x9299ac[_0x195eb9(0xf5)]=formatResult(_0x47b5b7,0x3),_0x9299ac[_0x195eb9(0x128)]=formatResult(_0x37658a,0x3),_0x9299ac[_0x195eb9(0xc6)]=formatResult(_0x50309b,0x8),_0x9299ac[_0x195eb9(0x6a)]='',_0x9299ac[_0x195eb9(0xc3)]='';if(_0x9299ac['coin']!=config[_0x195eb9(0x106)]){if(_0x9299ac[_0x195eb9(0xf5)]>_0x37658a)_0x9299ac[_0x195eb9(0x6a)]=_0x195eb9(0xca),_0x9299ac[_0x195eb9(0xc3)]=checkMinimums(_0x9299ac);else _0x9299ac[_0x195eb9(0xf5)]<_0x37658a&&(_0x9299ac['side']=_0x195eb9(0x110),_0x9299ac[_0x195eb9(0xc3)]=checkMinimums(_0x9299ac));}_0x9299ac['delta']=_0x9299ac[_0x195eb9(0xf5)]/_0x9299ac[_0x195eb9(0x128)]-0x1;}),currentCoins['sort']((_0x257375,_0x208bfd)=>_0x257375[_0x5e9ff2(0x94)]<_0x208bfd[_0x5e9ff2(0x94)]?0x1:_0x208bfd[_0x5e9ff2(0x94)]<_0x257375['delta']?-0x1:0x0);const _0x59252b=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x59252b[_0x5e9ff2(0xcd)],'usd':_0x59252b[_0x5e9ff2(0x12f)],'portfolio':JSON[_0x5e9ff2(0x7f)](currentCoins),'threshold':_0x5cf194},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5e9ff2(0x127)])headlessMode({'portfolio':currentCoins,'threshold':_0x5cf194});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x41b079=_0x52b960;if(!lastBalances)return;let _0x2639ff=await getStartingBalances(![]),_0x3507b3=[],_0x1b4fd5=[],_0x4d183c;JSON[_0x41b079(0x92)](lastBalances['portfolio'])[_0x41b079(0x121)](_0x3978fa=>{const _0x5b76f1=_0x41b079;let _0x259421={'coin':_0x3978fa['coin'],'number':_0x3978fa[_0x5b76f1(0xf0)],'price':_0x3978fa[_0x5b76f1(0x130)]};_0x3507b3['push'](_0x259421);if(!_0x2639ff[_0x5b76f1(0x15a)]||!_0x2639ff[_0x5b76f1(0x15a)]['find'](_0x8ce239=>_0x8ce239['coin']==_0x3978fa[_0x5b76f1(0x163)]&&_0x8ce239[_0x5b76f1(0xf0)]!=0x0))_0x1b4fd5[_0x5b76f1(0xde)](_0x259421);});const _0x4488f1=await getFiat();_0x4d183c={'date':lastBalances[_0x41b079(0xcb)]['split']('\x20')[0x0],'eur':_0x4488f1['eur'],'usd':_0x4488f1[_0x41b079(0x12f)],'coins':_0x3507b3};let _0x526ea9=dbPerformance['get']('data')[_0x41b079(0x8b)]({'date':_0x4d183c[_0x41b079(0x70)]})[_0x41b079(0x122)]();_0x526ea9?dbPerformance[_0x41b079(0x140)](_0x41b079(0xe3))[_0x41b079(0x8b)]({'date':_0x4d183c[_0x41b079(0x70)]})['assign'](_0x4d183c)[_0x41b079(0x6d)]():dbPerformance[_0x41b079(0x140)](_0x41b079(0xe3))[_0x41b079(0xde)](_0x4d183c)[_0x41b079(0x6d)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x54cf2b=_0x52b960;if(dbPerformance[_0x54cf2b(0x6e)]('data')['value']()){let _0x4a3328=dbPerformance[_0x54cf2b(0x140)]('data')[_0x54cf2b(0x111)]('date')['value']();proxyEmit(_0x54cf2b(0x91),_0x4a3328),lastPerformanceEmitted=getDate();}else proxyEmit(_0x54cf2b(0x91),[]);}async function getStartingBalances(_0x414279=!![]){const _0x2d0386=_0x52b960;let _0x40ba53=dbPerformance[_0x2d0386(0x140)](_0x2d0386(0xe3))[_0x2d0386(0x8b)]({'date':config[_0x2d0386(0x164)]})[_0x2d0386(0x122)]();config[_0x2d0386(0x81)]!=''&&!_0x40ba53&&(await setStartDatePerformance(config),_0x40ba53=dbPerformance[_0x2d0386(0x140)](_0x2d0386(0xe3))['find']({'date':config[_0x2d0386(0x164)]})[_0x2d0386(0x122)]());if(config[_0x2d0386(0x81)]==''||!_0x40ba53)return{};let _0x28250f=0x0,_0xec5223=0x0,_0xeb480=0x0,_0x22a8e9=[],_0x1dcbd5=0x0;config[_0x2d0386(0x7a)][_0x2d0386(0x121)](_0x1497d5=>{const _0x1b3c51=_0x2d0386;if(!_0x1497d5[_0x1b3c51(0x144)]){_0x22a8e9[_0x1dcbd5]={'coin':_0x1497d5['coin'],'symbol':_0x1497d5['symbol'],'number':_0x1497d5[_0x1b3c51(0x86)],'price':_0x1497d5[_0x1b3c51(0xf8)]},_0x28250f+=_0x1497d5[_0x1b3c51(0xf8)]*_0x1497d5[_0x1b3c51(0x86)];if(config['basecoin']==_0x1b3c51(0xbe))_0xec5223+=_0x1497d5[_0x1b3c51(0xf8)]*_0x1497d5[_0x1b3c51(0x86)]*_0x40ba53[_0x1b3c51(0xcd)],_0xeb480+=_0x1497d5['startprice']*_0x1497d5[_0x1b3c51(0x86)]*_0x40ba53['usd'];else{if(config['basecoin']==_0x1b3c51(0xbb)||config[_0x1b3c51(0x106)]==_0x1b3c51(0x10e)||config[_0x1b3c51(0x106)]==_0x1b3c51(0x93))_0xec5223+=_0x1497d5[_0x1b3c51(0xf8)]*_0x1497d5[_0x1b3c51(0x86)]*_0x40ba53[_0x1b3c51(0xcd)]/_0x40ba53[_0x1b3c51(0x12f)],_0xeb480+=_0x1497d5['startprice']*_0x1497d5[_0x1b3c51(0x86)];else config['basecoin']==_0x1b3c51(0xa4)&&(_0xec5223+=_0x1497d5[_0x1b3c51(0xf8)]*_0x1497d5[_0x1b3c51(0x86)],_0xeb480+=_0x1497d5[_0x1b3c51(0xf8)]*_0x1497d5[_0x1b3c51(0x86)]*_0x40ba53[_0x1b3c51(0x12f)]/_0x40ba53['eur']);}_0x1dcbd5++;}});let _0x3d807f={'basecoin':_0x28250f,'eur':_0xec5223,'usd':_0xeb480,'coins':_0x22a8e9};if(_0x414279)proxyEmit(_0x2d0386(0x160),_0x3d807f);return _0x3d807f;}function _0x444c(){const _0x4ceec5=['send','WebSockets(','filter','headless','target','min','kline','fetchOHLCV','args','page','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','usd','last','ccxt','add','10458288AqTCIq','entries','differenceInCalendarDays','getStartingBalances','botname','Limit\x20(low-margin)','defaults','length','wss://stream.binance.us:9443','Limit\x20(high-margin)','mkdirSync','slice','8040726QdBkfE','get','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','bot','filled','excluded','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','settings','\x20-\x20','showname','reduce','fetchOrders','wsKey','Order(s)\x20filled\x20-\x20balancing\x20resumed','1802255WDjQwa','BTC/USDT','asset','userData','date-fns','sha256','BTCBUSD','Performance\x20recreation\x20completed\x20successfully','118626UUZqWZ','7753520CqJyrp','breakeven','sells','Error:\x20Invalid\x20argument\x20','coins','placeOrder()','cooldown','emojibuy','replace','timeout','starting-balances','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','test','coin','startdate','existsSync','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','sort','storeConfiguration','getCoins()','DDoSProtection','Crypt',':\x20Bot\x20','order','side','version','MIN_NOTIONAL','write','has','accumulatedQuantity','date','getFullYear','format','yyyy-MM-dd\x27T\x27HH:mm:ss','buys','parseISO','limit-high','round','binanceus','apiSecret','portfolio','loadMarkets','hybrid-crypto-js','price','bb-secure.json','stringify','includes','apiKey','getFiat()','currency','market','abs','startnumber','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','initws()','fees','realized','find','decrypt','RSA-OAEP','subscribeSpotKline','keys','fee','performance','parse','USDC','delta','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','getTime','symbols','type','reconnected','(((.+)+)+)+$','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','event-history','getHours','API-key\x20format\x20invalid','Invalid\x20quantity','map','splice','yyyy/MM/dd','bid','EUR','getMinutes','eventType','toFixed','limits','./config/',',\x20must\x20be\x20a\x203\x20digit\x20number','RequestTimeout','-results.json','Pausing\x20bot\x20for\x205\x20minutes\x20(','bb-settings.json','coin-loading-progress','OrderNotFound','getMonth','spot','ordertype','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','apply','exit','5XSrpyp','BTCUSDT','Market','wsMarket','BUSD','indexOf','closeWs','BTC','Executed\x20','142463HLXZtI','Order:\x20','kill','valid','isArray','InvalidNonce','trade','Order(s)\x20validated\x20-\x20balancing\x20resumed','fetchBalance','restart','sell','time','toLowerCase','eur','-events.json','amount','initclient','message','assign','orderId','DAI/','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Bot\x20','\x20order:\x20','binance','createOrder','\x20>\x20','limit','63vGUMHt','cost','push','cancelOrder()','running','error','getDate','data','orderType','ask','padStart','search','************','BTCEUR',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','exchange','\x20minutes\x20-\x20balancing\x20resumed','recreateHistory()','getPortfolio()','BNB','number','lowdb/adapters/FileSync','bot-','log','Order\x20filled:\x20','distribution','wss://stream.binance.com:9443','fetchTickers','startprice','privateKey','close','timeshift','logs','total','success','threshold','datetime','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','recreate','reverse','getPortfolio','basecoin','remove','shift','secure','getSeconds','toString','fromCodePoint','-performance.json','USDT','./version.json','buy','sortBy','emojisell','timestamp','symbol','Order\x20amount\x20is\x20invalid:\x20','InsufficientFunds','event','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','1343208mDMiSK','AuthenticationError','limit-low','differenceInSeconds','Binance\x20API\x20key\x20is\x20invalid','Order(s)\x20not\x20validated\x20after\x20','ticker','placeOrder','forEach','value','balances'];_0x444c=function(){return _0x4ceec5;};return _0x444c();}function headlessMode(_0x4d69f7){const _0x514983=_0x52b960;let _0xe7afba=_0x4d69f7[_0x514983(0x7a)],_0x472e0e=_0x4d69f7[_0x514983(0xff)],_0x296f1f=[];for(let _0x4d6aae of _0xe7afba){if(_0x4d6aae['coin']!=config['basecoin']){if(_0x4d6aae['distribution']/_0x4d6aae[_0x514983(0x128)]-0x1>=_0x472e0e/0x64){if(_0x4d6aae[_0x514983(0xc3)])_0x296f1f['push'](_0x4d6aae);}else{if(_0x4d6aae[_0x514983(0xf5)]/_0x4d6aae[_0x514983(0x128)]-0x1<=-_0x472e0e/0x64){if(_0x4d6aae['valid'])_0x296f1f[_0x514983(0xde)](_0x4d6aae);}}}}_0x296f1f[_0x514983(0x13a)]>0x0&&placeOrder(_0x296f1f);}function symbolToCoin(_0x1ba739){const _0x1f0394=_0x52b960;let _0x1ef5eb;if(_0x1ba739['includes']('/'+config['basecoin']))_0x1ef5eb=_0x1ba739[_0x1f0394(0x15e)]('/'+config[_0x1f0394(0x106)],'');if(_0x1ba739[_0x1f0394(0x80)](config[_0x1f0394(0x106)]+'/'))_0x1ef5eb=_0x1ba739[_0x1f0394(0x15e)](config['basecoin']+'/','');return _0x1ef5eb;}async function validateOrders(_0x4c7e7b=0x0){const _0xf5eb43=_0x52b960;let _0x11265b=[],_0x388f97=config[_0xf5eb43(0xb3)]==_0xf5eb43(0x84)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xf5eb43(0x15f)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xf5eb43(0x121)](_0x4a864a=>{const _0x2adde2=_0xf5eb43;let _0x3a9fe7=previousCoins[_0x2adde2(0x8b)](_0x4f8efe=>_0x4f8efe['coin']==symbolToCoin(_0x4a864a[_0x2adde2(0x114)])),_0x2ac61c=currentCoins[_0x2adde2(0x8b)](_0x32a3ce=>_0x32a3ce['coin']==symbolToCoin(_0x4a864a[_0x2adde2(0x114)])),_0x205580,_0x5ca138;_0x4a864a[_0x2adde2(0x6a)]==_0x2adde2(0x110)&&!_0x4a864a[_0x2adde2(0x104)]||_0x4a864a[_0x2adde2(0x6a)]=='sell'&&_0x4a864a[_0x2adde2(0x104)]?(_0x205580=_0x3a9fe7[_0x2adde2(0xf0)]+0.9*_0x4a864a[_0x2adde2(0x143)],_0x5ca138=_0x3a9fe7[_0x2adde2(0xf0)]+1.1*_0x4a864a['filled']):(_0x205580=_0x3a9fe7[_0x2adde2(0xf0)]-1.1*_0x4a864a[_0x2adde2(0x143)],_0x5ca138=_0x3a9fe7[_0x2adde2(0xf0)]-0.9*_0x4a864a[_0x2adde2(0x143)]);const _0x52b6fc=_0x4a864a[_0x2adde2(0x143)]!=0x0&&_0x2ac61c['number']>=_0x205580&&_0x2ac61c[_0x2adde2(0xf0)]<=_0x5ca138;_0x11265b[_0x2adde2(0xde)](_0x52b6fc);if(_0x52b6fc&&config[_0x2adde2(0xb3)]!=_0x2adde2(0x84)){if(_0x4a864a['reverse'])logHistory(_0x2adde2(0x69),'Order\x20filled:\x20'+_0x4a864a[_0x2adde2(0x114)]+'\x20'+_0x4a864a[_0x2adde2(0x6a)]+'\x20#'+formatResult(_0x4a864a[_0x2adde2(0x143)]/_0x4a864a[_0x2adde2(0x7d)],0x8)+'\x20@'+formatResult(_0x4a864a['price'],0x8));else logHistory(_0x2adde2(0x69),_0x2adde2(0xf4)+_0x4a864a['symbol']+'\x20'+_0x4a864a[_0x2adde2(0x6a)]+'\x20#'+formatResult(_0x4a864a[_0x2adde2(0x143)],0x8)+'\x20@'+formatResult(_0x4a864a['price'],0x8));}}),_0x11265b['forEach']((_0x52a377,_0x2f6fb3)=>{const _0x2c27c4=_0xf5eb43;if(_0x52a377)lastOrders[_0x2c27c4(0xa1)](_0x2f6fb3,0x1);});if(_0x4c7e7b<_0x388f97&&_0x11265b['includes'](![])){if(_0x4c7e7b==0x0){config[_0xf5eb43(0xb3)]==_0xf5eb43(0x84)?logHistory(_0xf5eb43(0xe1),_0xf5eb43(0x95)):logHistory(_0xf5eb43(0xe1),_0xf5eb43(0xb4));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4c7e7b);},0xa*0x3e8);}else{(_0x4c7e7b==0x1||_0x4c7e7b==Math[_0xf5eb43(0x77)](_0x388f97/0x2)||_0x4c7e7b==_0x388f97-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4c7e7b);},validateOrderInterval);}}else{lockOrders=![];if(_0x4c7e7b>0x0&&!_0x11265b['includes'](![]))config[_0xf5eb43(0xb3)]==_0xf5eb43(0x84)?logHistory('success',_0xf5eb43(0xc7)):logHistory(_0xf5eb43(0xfe),_0xf5eb43(0x14c));else _0x4c7e7b>0x0&&_0x11265b[_0xf5eb43(0x80)](![])&&(config[_0xf5eb43(0xb3)]==_0xf5eb43(0x84)?logHistory(_0xf5eb43(0xfe),_0xf5eb43(0x11e)+Math[_0xf5eb43(0x77)](_0x388f97*validateOrderInterval/0xea60)+_0xf5eb43(0xec)):(lastOrders[_0xf5eb43(0x121)](async _0x5c5f16=>{const _0x5e98fa=_0xf5eb43;try{const _0x47cc2c=await exchange['cancelOrder'](_0x5c5f16[_0x5e98fa(0xd3)],_0x5c5f16['symbol']);}catch(_0x2beea7){if(_0x2beea7[_0x5e98fa(0x10b)]()[_0x5e98fa(0x80)](_0x5e98fa(0xb0))){}else await handleError(_0x2beea7,_0x5e98fa(0xdf));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0xf5eb43(0x77)](_0x388f97*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x11f546=_0x52b960;dbCoinResults[_0x11f546(0x140)](_0x11f546(0x15a))[_0x11f546(0x107)]()[_0x11f546(0x6d)]();let _0xc7e519=await getStartingBalances(![]);_0xc7e519[_0x11f546(0x15a)]['forEach'](_0x26ebd2=>{const _0x30b3f3=_0x11f546,_0x41ade2=_0x26ebd2[_0x30b3f3(0x114)][_0x30b3f3(0x80)](config[_0x30b3f3(0x106)]+'/');if(_0x26ebd2[_0x30b3f3(0x163)]!=config[_0x30b3f3(0x106)]){let _0x5a2810={'coin':_0x26ebd2[_0x30b3f3(0x163)],'number':_0x26ebd2[_0x30b3f3(0xf0)],'breakeven':_0x26ebd2['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x30b3f3(0x140)](_0x30b3f3(0x15a))[_0x30b3f3(0xde)](_0x5a2810)[_0x30b3f3(0x6d)]();}});}async function updateCoinResults(_0x33fd77){const _0x5da145=_0x52b960;let _0x1cb58e,_0x1a3ef7,_0x5ba0a7,_0xed555,_0x315321,_0x154b66,_0x27aeec=dbCoinResults[_0x5da145(0x140)](_0x5da145(0x15a))[_0x5da145(0x8b)]({'coin':_0x33fd77['coin']})[_0x5da145(0x122)]();if(!_0x27aeec)return;if(_0x33fd77['fee']&&_0x33fd77[_0x5da145(0x90)][_0x5da145(0x83)]==config['basecoin'])_0x1cb58e=_0x33fd77[_0x5da145(0x90)]['cost'];else{if(_0x33fd77['fee']&&_0x33fd77[_0x5da145(0x90)][_0x5da145(0x83)]==_0x5da145(0xef))_0x1cb58e=_0x33fd77['fee'][_0x5da145(0xdd)]*global['ticker'][_0x5da145(0xef)+config[_0x5da145(0x106)]];else _0x1cb58e=0.001*_0x33fd77[_0x5da145(0x143)];}const _0x478f76=_0x33fd77[_0x5da145(0x114)][_0x5da145(0x80)](config[_0x5da145(0x106)]+'/');_0x478f76&&(_0x154b66={'coin':_0x33fd77['coin'],'symbol':_0x33fd77[_0x5da145(0x114)],'filled':_0x33fd77[_0x5da145(0x143)]*_0x33fd77[_0x5da145(0x7d)],'side':_0x33fd77[_0x5da145(0x6a)]==_0x5da145(0xca)?_0x5da145(0x110):'sell','price':0x1/_0x33fd77[_0x5da145(0x7d)]},_0x33fd77={..._0x154b66});_0x33fd77[_0x5da145(0x6a)]==_0x5da145(0x110)?_0x5ba0a7=(_0x27aeec[_0x5da145(0x157)]*_0x27aeec[_0x5da145(0xf0)]+_0x33fd77[_0x5da145(0x7d)]*_0x33fd77['filled'])/(_0x27aeec[_0x5da145(0xf0)]+_0x33fd77[_0x5da145(0x143)]):_0x5ba0a7=(_0x27aeec['breakeven']*_0x27aeec[_0x5da145(0xf0)]-_0x33fd77[_0x5da145(0x7d)]*_0x33fd77[_0x5da145(0x143)])/(_0x27aeec['number']-_0x33fd77['filled']);_0x33fd77['side']==_0x5da145(0x110)?_0xed555=_0x27aeec['realized']:_0xed555=_0x27aeec[_0x5da145(0x8a)]+(_0x33fd77[_0x5da145(0x7d)]-_0x27aeec['breakeven'])*_0x33fd77[_0x5da145(0x143)];_0x1a3ef7=_0x33fd77['side']==_0x5da145(0xca)?_0x27aeec[_0x5da145(0xf0)]-_0x33fd77[_0x5da145(0x143)]:_0x27aeec[_0x5da145(0xf0)]+_0x33fd77['filled'],_0x315321=(_0x33fd77[_0x5da145(0x7d)]-_0x5ba0a7)*_0x1a3ef7;let _0x2e2e44={'coin':_0x33fd77[_0x5da145(0x163)],'number':_0x1a3ef7,'breakeven':formatResult(_0x5ba0a7,0x8),'realized':formatResult(_0xed555,0x8),'unrealized':formatResult(_0x315321,0x8),'fees':formatResult(_0x27aeec[_0x5da145(0x89)]+_0x1cb58e,0x8),'sells':_0x33fd77[_0x5da145(0x6a)]=='sell'?_0x27aeec[_0x5da145(0x158)]+0x1:_0x27aeec[_0x5da145(0x158)],'buys':_0x33fd77[_0x5da145(0x6a)]=='buy'?_0x27aeec['buys']+0x1:_0x27aeec[_0x5da145(0x74)]};dbCoinResults[_0x5da145(0x140)](_0x5da145(0x15a))[_0x5da145(0x8b)]({'coin':_0x33fd77['coin']})[_0x5da145(0xd2)](_0x2e2e44)['write']();}async function placeOrder(_0x2f36d9){const _0xc09a82=_0x52b960,_0x508bdb=config[_0xc09a82(0xb3)]==_0xc09a82(0x84)?_0xc09a82(0x84):_0xc09a82(0xdb);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0xc09a82(0x92)](JSON[_0xc09a82(0x7f)](currentCoins));for(const _0x30b3e4 of _0x2f36d9){let _0x1c5476,_0x5ad71d,_0x13fe4d,_0x4ba696,_0x3b21f8,_0x2d1483=_0x30b3e4['symbol'];try{const _0x539bbb=await exchange[_0xc09a82(0xf7)](_0x2d1483),_0x5d3cf2=_0x539bbb[_0x2d1483];_0x1c5476=_0x5d3cf2[_0xc09a82(0x130)],_0x5ad71d=_0x5d3cf2[_0xc09a82(0xa3)],_0x13fe4d=_0x5d3cf2[_0xc09a82(0xe5)];_0x30b3e4['reverse']?(_0x4ba696=_0x30b3e4[_0xc09a82(0x6a)]=='buy'?_0xc09a82(0xca):_0xc09a82(0x110),_0x3b21f8=Math[_0xc09a82(0x85)](_0x30b3e4[_0xc09a82(0xc6)])/_0x1c5476):(_0x4ba696=_0x30b3e4[_0xc09a82(0x6a)],_0x3b21f8=Math['abs'](_0x30b3e4[_0xc09a82(0xc6)]));_0x508bdb==_0xc09a82(0xdb)&&(config[_0xc09a82(0xb3)]==_0xc09a82(0x76)&&(_0x1c5476=_0x4ba696==_0xc09a82(0x110)?_0x5ad71d:_0x13fe4d),config['ordertype']==_0xc09a82(0x11b)&&(_0x1c5476=_0x4ba696=='buy'?_0x13fe4d:_0x5ad71d));_0x3b21f8=formatResult(_0x3b21f8,0x8),_0x1c5476=formatResult(_0x1c5476,0x8);const _0x1e3eba=await exchange[_0xc09a82(0xd9)](_0x2d1483,_0x508bdb,_0x4ba696,_0x3b21f8,_0x1c5476);lastOrders['push']({'orderId':_0x1e3eba['id'],'symbol':_0x2d1483,'side':_0x4ba696,'reverse':_0x30b3e4[_0xc09a82(0x104)],'amount':_0x30b3e4[_0xc09a82(0x104)]?_0x1e3eba[_0xc09a82(0xcf)]*_0x1e3eba[_0xc09a82(0x7d)]:_0x1e3eba[_0xc09a82(0xcf)],'filled':_0x30b3e4['reverse']?_0x1e3eba[_0xc09a82(0x143)]*_0x1e3eba[_0xc09a82(0x7d)]:_0x1e3eba['filled'],'price':_0x1e3eba[_0xc09a82(0x7d)]});const _0x4daf6d=_0x4ba696==_0xc09a82(0xca)?config[_0xc09a82(0x112)]?String[_0xc09a82(0x10c)]('0x'+config[_0xc09a82(0x112)])+'\x20':'':config[_0xc09a82(0x15d)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x3945c0=_0x508bdb==_0xc09a82(0x84)?_0xc09a82(0xb9):config[_0xc09a82(0xb3)]==_0xc09a82(0x76)?_0xc09a82(0x13c):_0xc09a82(0x138);if(_0x508bdb==_0xc09a82(0x84))logHistory(_0xc09a82(0x69),''+_0x4daf6d+_0x3945c0+_0xc09a82(0xd7)+_0x2d1483+'\x20'+_0x4ba696+'\x20#'+formatResult(_0x1e3eba['filled'],0x8)+'\x20@'+formatResult(_0x1e3eba[_0xc09a82(0x7d)],0x8));else logHistory(_0xc09a82(0x69),''+_0x4daf6d+_0x3945c0+_0xc09a82(0xd7)+_0x2d1483+'\x20'+_0x4ba696+'\x20#'+formatResult(_0x1e3eba['amount'],0x8)+'\x20@'+formatResult(_0x1e3eba['price'],0x8));_0x1e3eba[_0xc09a82(0x163)]=_0x30b3e4[_0xc09a82(0x163)],await updateCoinResults(_0x1e3eba);if(config[_0xc09a82(0x15c)]!=0x0){let _0xf02977=null;if(cooldownTracker[_0xc09a82(0x13a)]==config[_0xc09a82(0x15c)]-0x1)_0xf02977=cooldownTracker[_0xc09a82(0x108)]();const _0x95ed00=getTimeStamp();cooldownTracker[_0xc09a82(0xde)](_0x95ed00);if(_0xf02977){const _0x244284=fns[_0xc09a82(0x11c)](new Date(_0x95ed00),new Date(_0xf02977));_0x244284<cooldownInterval&&(logHistory(_0xc09a82(0xe1),_0xc09a82(0xbf)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xc09a82(0x102)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x12519e){if(_0x12519e[_0xc09a82(0x10b)]()[_0xc09a82(0x80)](_0xc09a82(0x6c)))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2d1483);else{if(_0x12519e[_0xc09a82(0x10b)]()[_0xc09a82(0x80)](_0xc09a82(0x9f)))logHistory('error',_0xc09a82(0x115)+_0x2d1483);else await handleError(_0x12519e,_0xc09a82(0x15b));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0xc09a82(0x127)]&&(config[_0xc09a82(0xb3)]==_0xc09a82(0x84)?logHistory(_0xc09a82(0xe1),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xc09a82(0xe1),_0xc09a82(0x166)));else coolingDown&&(!config[_0xc09a82(0x127)]&&logHistory(_0xc09a82(0xe1),_0xc09a82(0x161)));}}function logHistory(_0x3f2cd4,_0x3d4e87,_0x51eb43=''){const _0x1041cb=_0x52b960;let _0x44ce04={'time':getTimeStamp(),'type':_0x3f2cd4,'event':_0x3d4e87,'botname':config['botname'],'showname':config[_0x1041cb(0x148)]};dbLogs[_0x1041cb(0x140)](_0x1041cb(0xfc))[_0x1041cb(0xde)](_0x44ce04)[_0x1041cb(0x6d)]();if(_0x51eb43=='')_0x51eb43=_0x3d4e87;proxyEmit(_0x1041cb(0x117),{'log':_0x44ce04,'summary':_0x51eb43}),process[_0x1041cb(0x124)]({'telegram':_0x44ce04}),logging(''+_0x44ce04[_0x1041cb(0x117)]);}function emitHistory(_0x3de927={}){const _0x591e61=_0x52b960;Object[_0x591e61(0x8f)](_0x3de927)[_0x591e61(0x13a)]==0x0&&(_0x3de927={'type':[_0x591e61(0x69),_0x591e61(0x117)],'event':'','page':0x1});if(_0x3de927[_0x591e61(0x98)][_0x591e61(0x80)](_0x591e61(0x117)))_0x3de927[_0x591e61(0x98)][_0x591e61(0xa1)](_0x3de927[_0x591e61(0x98)][_0x591e61(0xbc)](_0x591e61(0x117)),0x1,_0x591e61(0xe1),'success');if(dbLogs[_0x591e61(0x6e)](_0x591e61(0xfc))[_0x591e61(0x122)]()){let _0x25ff9f=dbLogs[_0x591e61(0x140)]('logs')[_0x591e61(0x126)](_0x179190=>{const _0x3f0e81=_0x591e61;if(_0x3de927[_0x3f0e81(0x98)]['length']==0x0)return![];else return _0x3de927[_0x3f0e81(0x98)][_0x3f0e81(0x80)](_0x179190[_0x3f0e81(0x98)]);})[_0x591e61(0x126)](_0x2a2b50=>{const _0x39923e=_0x591e61;if(_0x3de927[_0x39923e(0x117)]=='')return!![];else return _0x2a2b50[_0x39923e(0x117)][_0x39923e(0xcc)]()['includes'](_0x3de927['event'][_0x39923e(0xcc)]());})[_0x591e61(0x111)]('time'),_0x5b8fb1=_0x25ff9f[_0x591e61(0x122)]()[_0x591e61(0x13a)];_0x25ff9f=_0x25ff9f[_0x591e61(0x104)]()[_0x591e61(0x13e)]((_0x3de927[_0x591e61(0x12d)]-0x1)*logPageSize,_0x3de927[_0x591e61(0x12d)]*logPageSize-0x1)[_0x591e61(0x104)]()[_0x591e61(0x122)](),proxyEmit('event-history',{'logs':_0x25ff9f,'total':_0x5b8fb1});}else proxyEmit(_0x591e61(0x9c),{'logs':[],'total':0x0});}async function pauseBot(_0x29aa05){const _0xfbc865=_0x52b960,_0x209910=new Date()[_0xfbc865(0x96)]();if(!lastBotPause)lastBotPause=new Date()[_0xfbc865(0x96)](),consecutivePauses=0x1;else{if(_0x209910-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0xfbc865(0x124)]({'stop':_0xfbc865(0xc9)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0xfbc865(0x96)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0xfbc865(0xe1),_0xfbc865(0xad)+consecutivePauses+')'),await sleep(_0x29aa05),botPaused=![],reset();}}async function handleError(_0x45e1b7,_0x4d5756,_0x4bf52d=''){const _0x3faba3=_0x52b960;if(_0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)](_0x3faba3(0x66)))logHistory(_0x3faba3(0xe1),_0x4d5756+_0x3faba3(0x87)),await pauseBot(pauseBotInterval);else{if(_0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)]('ExchangeNotAvailable'))logHistory('error',_0x4d5756+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x45e1b7[_0x3faba3(0x10b)]()['includes'](_0x3faba3(0xab)))logHistory(_0x3faba3(0xe1),_0x4d5756+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)](_0x3faba3(0x9e)))logHistory('error',_0x4d5756+_0x3faba3(0x141)),logHistory(_0x3faba3(0xe1),_0x3faba3(0x145)),process[_0x3faba3(0x124)]({'stop':'kill'});else{if(_0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)](_0x3faba3(0x11a)))logHistory('error',_0x4d5756+_0x3faba3(0x101)),logHistory(_0x3faba3(0xe1),_0x3faba3(0x145)),process[_0x3faba3(0x124)]({'stop':_0x3faba3(0xc2)});else{if(_0x45e1b7['toString']()[_0x3faba3(0x80)](_0x3faba3(0x118)))logHistory(_0x3faba3(0xe1),_0x4d5756+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x3faba3(0x145)),process[_0x3faba3(0x124)]({'stop':_0x3faba3(0xc2)});else{if(_0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3faba3(0xe1),_0x4d5756+_0x3faba3(0x12e)),logHistory(_0x3faba3(0xe1),_0x3faba3(0x145)),process[_0x3faba3(0x124)]({'stop':_0x3faba3(0xc2)});else{if(_0x45e1b7['toString']()[_0x3faba3(0x80)](_0x3faba3(0xc5)))logHistory('error',_0x4d5756+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process[_0x3faba3(0x124)]({'stop':_0x3faba3(0xc9)});else _0x45e1b7[_0x3faba3(0x10b)]()[_0x3faba3(0x80)](_0x3faba3(0x116))?logHistory(_0x3faba3(0xe1),_0x4d5756+_0x3faba3(0xd5)):(logHistory('error',_0x4d5756+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x4d5756+'\x20|\x20Error\x20details:\x20',_0x45e1b7),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x5ac969,_0x3a3ba2){const _0x55c8ac=_0x52b960;return parseFloat(_0x5ac969[_0x55c8ac(0xa7)](_0x3a3ba2));}function logging(_0x36f6c2,_0x44bfb6=''){const _0x5b257f=_0x52b960;if(config[_0x5b257f(0x148)])console['log'](getTimeStamp()+':\x20'+config[_0x5b257f(0x137)]+_0x5b257f(0xda)+_0x36f6c2,_0x44bfb6);else console['log'](getTimeStamp()+_0x5b257f(0x68)+botID+_0x5b257f(0xda)+_0x36f6c2,_0x44bfb6);}function getServerTime(){const _0x54d02c=_0x52b960,_0x3f2b4e=new Date();return _0x3f2b4e[_0x54d02c(0x71)]()+'/'+(_0x3f2b4e['getMonth']()+0x1)['toString']()[_0x54d02c(0xe6)](0x2,'0')+'/'+_0x3f2b4e[_0x54d02c(0xe2)]()[_0x54d02c(0x10b)]()[_0x54d02c(0xe6)](0x2,'0')+'\x20'+_0x3f2b4e[_0x54d02c(0x9d)]()['toString']()[_0x54d02c(0xe6)](0x2,'0')+':'+_0x3f2b4e[_0x54d02c(0xa5)]()[_0x54d02c(0x10b)]()[_0x54d02c(0xe6)](0x2,'0')+':'+_0x3f2b4e[_0x54d02c(0x10a)]()['toString']()[_0x54d02c(0xe6)](0x2,'0');}function getTimeStamp(){const _0x47251b=_0x52b960,_0x4e2ebb=shiftedTime();return _0x4e2ebb[_0x47251b(0x71)]()+'/'+(_0x4e2ebb['getMonth']()+0x1)['toString']()[_0x47251b(0xe6)](0x2,'0')+'/'+_0x4e2ebb[_0x47251b(0xe2)]()['toString']()[_0x47251b(0xe6)](0x2,'0')+'\x20'+_0x4e2ebb[_0x47251b(0x9d)]()[_0x47251b(0x10b)]()[_0x47251b(0xe6)](0x2,'0')+':'+_0x4e2ebb[_0x47251b(0xa5)]()['toString']()[_0x47251b(0xe6)](0x2,'0')+':'+_0x4e2ebb[_0x47251b(0x10a)]()[_0x47251b(0x10b)]()[_0x47251b(0xe6)](0x2,'0');}function getDate(){const _0x21e39e=_0x52b960,_0x232140=shiftedTime();return _0x232140[_0x21e39e(0x71)]()+'/'+(_0x232140[_0x21e39e(0xb1)]()+0x1)['toString']()[_0x21e39e(0xe6)](0x2,'0')+'/'+_0x232140[_0x21e39e(0xe2)]()['toString']()[_0x21e39e(0xe6)](0x2,'0');}function getHour(){const _0x4c4fd2=_0x52b960,_0x55a6dc=shiftedTime();return _0x55a6dc['getHours']()[_0x4c4fd2(0x10b)]()[_0x4c4fd2(0xe6)](0x2,'0');}function sleep(_0x17872c){return new Promise(_0xdf85d6=>setTimeout(_0xdf85d6,_0x17872c));}function shiftedTime(){const _0x2f2a4c=_0x52b960,_0x829636=new Date();let _0x1c3184=_0x829636;if(config&&config[_0x2f2a4c(0xfb)]!==0x0)_0x1c3184=fns[_0x2f2a4c(0x132)](_0x829636,{'hours':config['timeshift']});return _0x1c3184;}