const _0x4ee1e7=_0x2529;(function(_0x121566,_0x49612c){const _0x5e6ddf=_0x2529,_0x3379d6=_0x121566();while(!![]){try{const _0x3332fc=-parseInt(_0x5e6ddf(0x240))/0x1*(-parseInt(_0x5e6ddf(0x1cb))/0x2)+-parseInt(_0x5e6ddf(0x27c))/0x3*(-parseInt(_0x5e6ddf(0x256))/0x4)+-parseInt(_0x5e6ddf(0x20d))/0x5+-parseInt(_0x5e6ddf(0x214))/0x6+-parseInt(_0x5e6ddf(0x284))/0x7*(-parseInt(_0x5e6ddf(0x221))/0x8)+parseInt(_0x5e6ddf(0x1cc))/0x9*(parseInt(_0x5e6ddf(0x1d0))/0xa)+-parseInt(_0x5e6ddf(0x18d))/0xb;if(_0x3332fc===_0x49612c)break;else _0x3379d6['push'](_0x3379d6['shift']());}catch(_0x1a459c){_0x3379d6['push'](_0x3379d6['shift']());}}}(_0x3aca,0xa8798));const _0x1fd513=function(){let _0x56cfed=!![];return function(_0x395140,_0x2d4581){const _0x1c8dfe=_0x56cfed?function(){const _0x272b6c=_0x2529;if(_0x2d4581){const _0x41a592=_0x2d4581[_0x272b6c(0x288)](_0x395140,arguments);return _0x2d4581=null,_0x41a592;}}:function(){};return _0x56cfed=![],_0x1c8dfe;};}(),_0x4d5a75=_0x1fd513(this,function(){const _0x2aace0=_0x2529;return _0x4d5a75[_0x2aace0(0x1e4)]()[_0x2aace0(0x197)](_0x2aace0(0x17e))[_0x2aace0(0x1e4)]()[_0x2aace0(0x278)](_0x4d5a75)['search'](_0x2aace0(0x17e));});_0x4d5a75();'use strict';const ccxt=require('ccxt'),low=require(_0x4ee1e7(0x206)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4ee1e7(0x22e)),{WebsocketClient,DefaultLogger}=require(_0x4ee1e7(0x1d1)),Crypt=require(_0x4ee1e7(0x194))[_0x4ee1e7(0x1a7)];let exchange,wsClient;global[_0x4ee1e7(0x20f)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4ee1e7(0x1dd))[_0x4ee1e7(0x1b9)],botID=process[_0x4ee1e7(0x1a2)][0x2]||_0x4ee1e7(0x1f3),pattern=/^[0-9]{3}$/;if(!pattern[_0x4ee1e7(0x1a4)](botID))return console[_0x4ee1e7(0x243)](_0x4ee1e7(0x1ed)+botID+_0x4ee1e7(0x21b)),process['exit'](0x1);const userID=process[_0x4ee1e7(0x1a2)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x4ee1e7(0x19e);!fs[_0x4ee1e7(0x211)](configpath)&&fs[_0x4ee1e7(0x241)](configpath);const configfile=configpath+_0x4ee1e7(0x1ab)+botID+_0x4ee1e7(0x1e6),logfile=configpath+_0x4ee1e7(0x1ab)+botID+'-events.json',performancefile=configpath+_0x4ee1e7(0x1ab)+botID+_0x4ee1e7(0x1b3),coinresultsfile=configpath+_0x4ee1e7(0x1ab)+botID+_0x4ee1e7(0x1ad),settingsfile=configpath+_0x4ee1e7(0x23c),securefile=configpath+_0x4ee1e7(0x232),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x4ee1e7(0x1e0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);function _0x3aca(){const _0x3213d8=['add','padStart','outboundAccountPosition','sortBy','filled','subscribeSpotKline','RequestTimeout','slice','fetchTickers','splice','bot','date-fns','ordertype','configuration','remove','bb-secure.json','cancel','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','getPortfolio()','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','createOrder','\x20>\x20','date','differenceInCalendarDays','valid','bb-settings.json','order','orderStatus','InsufficientFunds','742305fIoWOG','mkdirSync','function','log','getDate','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','FILLED','get','Market','side','entries','showname','milliseconds','cost','BNB','HOT/BTC','forEach','placeOrder','privateKey','fetchOrders','starting-balances','remainingSymbols','281388LTidOR','Unfilled\x20order(s)\x20canceled\x20after\x20','ask','kill','timeout',':\x20Bot\x20','startnumber','yyyy/MM/dd\x20HH:mm:ss','botname','getSeconds','fee','amount','defaults','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','coins','accumulatedQuantity','target','type','DDoSProtection','************','sha256','performance','reduce','reconnected','apiSecret','threshold','API-key\x20format\x20invalid','length','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','secure','Invalid\x20quantity','emojibuy','delta','headless','constructor','getTime','data','formattedMessage','12HIFJRt','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','timeshift','startprice','page','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Binance\x20API\x20key\x20is\x20invalid','binanceus','119ZidAAO','excluded','parse','parseISO','apply','limit','\x20orders\x20in\x20less\x20than\x20','EUR','Executed\x20','usd','(((.+)+)+)+$','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','wsMarket','buys','BTCEUR','limit-high','message','push','exchange','storeHeadless','success','getMinutes','\x20-\x20','symbol','\x20order:\x20','9981785KzKGFh','event','breakeven','subscribeSpotUserDataStream','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','Performance\x20recreation\x20completed\x20successfully','recreateHistory()','hybrid-crypto-js','getHours','timestamp','search','basecoin','restart','getCloses()','emitHistory',')\x20|\x20Error\x20details:\x20','find','./config/','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','round','asset','argv','MIN_NOTIONAL','test','trade','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Crypt','WebSockets(','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','number','bot-','BTC','-results.json','storeConfiguration','wsKey','\x20|\x20Unknown\x20error\x20occured','cancelOrder','sort','-performance.json','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','toFixed','stringify','\x20minutes\x20-\x20balancing\x20resumed','send','version','shift','market','BTC/USDT','AuthenticationError','min','Order:\x20','limits','includes','loadSymbols()','filter','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Binance\x20API\x20secret\x20is\x20invalid','map','portfolio','coin-loading-progress','split','value','2urXIIA','234PWKXGd','wss://stream.binance.us:9443','sells','args','168010xUfxyB','binance','toLowerCase',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','close','fees','last','sell','getCoins()','eur','HOT/EUR','coinamount','USDT','./version.json','spot','fetchBalance','write','symbols','orderId','distribution','toString','replace','-config.json','logs','RSA-OAEP','coin','event-history','progress','closeWs','Error:\x20Invalid\x20argument\x20','userData','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','enabled','wss://stream.binance.com:9443','fromCodePoint','001','DAI/','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Order(s)\x20filled\x20-\x20balancing\x20resumed','executionReport','BTCBUSD','buy','isArray','Bot\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','keys','kline','getFullYear','getMonth','format','balances','placeOrder()','BTCUSDT','price','lowdb','eventType','OrderNotFound','Order\x20filled:\x20','error','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','apiKey','2804065tupUwy','limit-low','ticker','realized','existsSync','assign','BUSD','3929538tJuoIv','differenceInSeconds','yyyy/MM/dd','reverse','getPortfolio','cancelOrder()','cancelLoading',',\x20must\x20be\x20a\x203\x20digit\x20number','emojisell','startdate','initclient','cooldown','running','636576AHmdhy','datetime'];_0x3aca=function(){return _0x3213d8;};return _0x3aca();}dbPerformance['defaults']({'data':[]})[_0x4ee1e7(0x1e0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4ee1e7(0x262)]({'bot':[]})[_0x4ee1e7(0x1e0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4ee1e7(0x262)]({'coins':[]})[_0x4ee1e7(0x1e0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x4ee1e7(0x182),'symbol':'BTC/EUR'},'usd':{'coin':_0x4ee1e7(0x204),'symbol':_0x4ee1e7(0x1bc)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x21b3e6)=>{},'debug':(..._0x33bd56)=>{},'notice':(..._0x51e54d)=>{},'info':(..._0x30e2fa)=>{},'warning':(..._0x2039bf)=>{},'error':async function(..._0x171ac2){const _0x1159c8=_0x4ee1e7,_0x329506=new Date()[_0x1159c8(0x279)]();if(!lastErrorShown||_0x329506-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1159c8(0x279)](),logHistory(_0x1159c8(0x20a),_0x1159c8(0x1a8)+consecutivePauses+_0x1159c8(0x1d3));let _0x28b0ab='';if(_0x171ac2[0x0])_0x28b0ab+=_0x171ac2[0x0];if(_0x171ac2[0x1]&&_0x171ac2[0x1][_0x1159c8(0x20a)]&&_0x171ac2[0x1][_0x1159c8(0x20a)]['message'])_0x28b0ab+=_0x1159c8(0x18a)+_0x171ac2[0x1][_0x1159c8(0x20a)][_0x1159c8(0x184)];logging(_0x1159c8(0x1a8)+consecutivePauses+_0x1159c8(0x19c),''+_0x28b0ab),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x4ee1e7(0x26a),'rsaStandard':_0x4ee1e7(0x1e8)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x4ee1e7(0x27e)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process['send']({'started':_0x4ee1e7(0x220)}),initializeProcessListeners();function proxyEmit(_0xc736a,_0x5a9dd5=null){process['send']({'function':_0xc736a,'args':_0x5a9dd5});}function initializeProcessListeners(){const _0x22921e=_0x4ee1e7;process['on'](_0x22921e(0x184),_0x595e1e=>{const _0xfd9e95=_0x22921e;switch(Object[_0xfd9e95(0x1fd)](_0x595e1e)[0x0]){case _0xfd9e95(0x27e):_0x595e1e[_0xfd9e95(0x27e)]!=undefined&&(settings[_0xfd9e95(0x27e)]=_0x595e1e['timeshift'],updateTimeshift(settings['timeshift']));break;case _0xfd9e95(0x242):switch(_0x595e1e['function']){case _0xfd9e95(0x21e):initclient();break;case _0xfd9e95(0x19b):emitHistory(_0x595e1e[_0xfd9e95(0x1cf)]);break;case _0xfd9e95(0x218):getPortfolio(_0x595e1e[_0xfd9e95(0x1cf)]);break;case _0xfd9e95(0x1ae):storeConfiguration(_0x595e1e[_0xfd9e95(0x1cf)]);break;case _0xfd9e95(0x187):storeHeadless(_0x595e1e[_0xfd9e95(0x1cf)]);break;case'getStartingBalances':getStartingBalances();break;case _0xfd9e95(0x251):placeOrder(_0x595e1e[_0xfd9e95(0x1cf)]);break;case _0xfd9e95(0x21a):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x5dfc53=_0x4ee1e7;if(pidBalances)clearTimeout(pidBalances);if(config[_0x5dfc53(0x20c)]!=''){await initExchange(config[_0x5dfc53(0x20c)],config['apiSecret']);let _0x21e5ec=await loadSymbols();_0x21e5ec&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x2d07d3,_0x270206){const _0x48f336=_0x4ee1e7,_0x38b6ee=ccxt[config[_0x48f336(0x186)]];let _0x5bdbda;switch(config[_0x48f336(0x186)]){case'binance':_0x5bdbda=_0x48f336(0x1f1);break;case'binanceus':_0x5bdbda=_0x48f336(0x1cd);break;default:_0x5bdbda=_0x48f336(0x1f1);}exchange=new _0x38b6ee({'apiKey':_0x2d07d3,'secret':_0x270206,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2d07d3,'api_secret':_0x270206,'beautify':!![],'wsUrl':_0x5bdbda},logger),config[_0x48f336(0x186)]==_0x48f336(0x283)&&(stablecoins={'eur':{'coin':_0x48f336(0x1f8),'symbol':'BTC/BUSD'},'usd':{'coin':_0x48f336(0x204),'symbol':_0x48f336(0x1bc)}});}async function loadSymbols(){const _0x5f1254=_0x4ee1e7;let _0x2aed2a;try{markets=await exchange['loadMarkets']();const _0x1e1d29=[_0x5f1254(0x1f4),_0x5f1254(0x24f),_0x5f1254(0x1da)];allSymbols=exchange[_0x5f1254(0x1e1)][_0x5f1254(0x1c3)](_0x5707f1=>{const _0x59e12d=_0x5f1254;let _0x3b408e=![];return _0x1e1d29[_0x59e12d(0x250)](_0x10810e=>{const _0x594549=_0x59e12d;if(_0x5707f1[_0x594549(0x1c1)](_0x10810e))_0x3b408e=!![];}),!_0x3b408e;}),_0x2aed2a=!![];}catch(_0x51e95f){await handleError(_0x51e95f,_0x5f1254(0x1c2)),_0x2aed2a=![];}return _0x2aed2a;}async function initbot(){const _0x47d4bf=_0x4ee1e7;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1873ec=dbCoinResults[_0x47d4bf(0x247)](_0x47d4bf(0x264))[_0x47d4bf(0x1ca)]();if(_0x1873ec[_0x47d4bf(0x271)]==0x0)await resetCoinResults();}async function initclient(){const _0x54c61b=_0x4ee1e7;proxyEmit(_0x54c61b(0x230),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x54c61b(0x202),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4fd6e0=_0x4ee1e7;wsinitialized=![];ws1&&(ws1[_0x4fd6e0(0x250)](_0x5c82f3=>{try{wsClient['closeWs'](_0x5c82f3);}catch(_0x284f2){}}),ws1=[]);if(ws2){try{wsClient[_0x4fd6e0(0x1ec)](ws2);}catch(_0x584004){}ws2=null;}}async function initws(){const _0x7de6ac=_0x4ee1e7;cleanws();let _0x38fef2=[];currentCoins[_0x7de6ac(0x250)](_0x3004df=>{const _0x55594f=_0x7de6ac;if(_0x3004df[_0x55594f(0x1e9)]!=config[_0x55594f(0x198)])_0x38fef2['push'](noslash(_0x3004df[_0x55594f(0x18b)]));});if(!_0x38fef2[_0x7de6ac(0x1c1)](stablecoins[_0x7de6ac(0x1d9)][_0x7de6ac(0x1e9)]))_0x38fef2[_0x7de6ac(0x185)](stablecoins['eur'][_0x7de6ac(0x1e9)]);if(!_0x38fef2[_0x7de6ac(0x1c1)](stablecoins[_0x7de6ac(0x17d)][_0x7de6ac(0x1e9)]))_0x38fef2[_0x7de6ac(0x185)](stablecoins[_0x7de6ac(0x17d)][_0x7de6ac(0x1e9)]);if(!_0x38fef2['includes'](_0x7de6ac(0x24e)+config[_0x7de6ac(0x198)]))_0x38fef2[_0x7de6ac(0x185)](_0x7de6ac(0x24e)+config[_0x7de6ac(0x198)]);try{_0x38fef2['forEach']((_0x4a751d,_0x556d8a)=>{const _0x1f280a=_0x7de6ac;ws1[_0x556d8a]=wsClient[_0x1f280a(0x228)](_0x4a751d,'1m');}),ws2=wsClient[_0x7de6ac(0x190)](),wsClient['on'](_0x7de6ac(0x27b),_0x3d057a=>{const _0xd6a840=_0x7de6ac;if(!Array['isArray'](_0x3d057a)&&!_0x3d057a[_0xd6a840(0x1af)]['includes']('userData')){if(_0x3d057a[_0xd6a840(0x207)]==='kline'){global[_0xd6a840(0x20f)][_0x3d057a['kline'][_0xd6a840(0x18b)]]=_0x3d057a[_0xd6a840(0x1fe)][_0xd6a840(0x1d4)];return;}}else{if(!Array[_0xd6a840(0x1fa)](_0x3d057a)&&_0x3d057a[_0xd6a840(0x1af)][_0xd6a840(0x1c1)](_0xd6a840(0x1ee))){if(_0x3d057a[_0xd6a840(0x180)][_0xd6a840(0x1c1)](_0xd6a840(0x1de))){updateNumberCoins(_0x3d057a);return;}}}}),wsClient['on'](_0x7de6ac(0x26d),async _0x4177de=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x576819){await handleError(_0x576819,'initws()');}let _0x26740d,_0x3ac21d=0x0;loading[_0x7de6ac(0x255)]=[];let _0xd4352f=0x0;currentCoins[_0x7de6ac(0x250)](_0x28832c=>{const _0x17b098=_0x7de6ac;if(_0x28832c[_0x17b098(0x1e9)]!=config[_0x17b098(0x198)])loading[_0x17b098(0x255)]['push'](_0x28832c['symbol']);}),loadingCanceled=![];while(_0x26740d!=currentCoins[_0x7de6ac(0x271)]-0x1){_0x26740d=0x0,currentCoins[_0x7de6ac(0x250)](_0xb7e4c1=>{const _0x5f2e85=_0x7de6ac;_0xb7e4c1[_0x5f2e85(0x1e9)]!=config['basecoin']&&global[_0x5f2e85(0x20f)][noslash(_0xb7e4c1[_0x5f2e85(0x18b)])]&&(loading[_0x5f2e85(0x255)]=loading[_0x5f2e85(0x255)]['filter'](_0xf7a1ba=>_0xf7a1ba!=_0xb7e4c1['symbol']),_0x26740d++);}),loading[_0x7de6ac(0x1eb)]=Math['round'](_0x26740d/(currentCoins[_0x7de6ac(0x271)]-0x1)*0x64);_0xd4352f>0x1e*0x5&&(loading[_0x7de6ac(0x25a)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x7de6ac(0x233)]=!![],emitLoadingProgress();break;}else _0x26740d!=_0x3ac21d&&(_0x3ac21d=_0x26740d,emitLoadingProgress()),_0xd4352f++,await sleep(0xc8);}if(_0x26740d==currentCoins[_0x7de6ac(0x271)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x5e1175=_0x4ee1e7;proxyEmit(_0x5e1175(0x1c8),loading);}async function getFiat(){const _0x1b42d5=_0x4ee1e7;let _0x3a09c5=0x0,_0x13adc1=0x0;try{_0x3a09c5=global[_0x1b42d5(0x20f)][stablecoins['eur']['coin']],_0x13adc1=global[_0x1b42d5(0x20f)][stablecoins['usd'][_0x1b42d5(0x1e9)]];}catch(_0x35adbe){await handleError(_0x35adbe,'getFiat()');}return{'eur':Number(_0x3a09c5),'usd':Number(_0x13adc1)};}async function setStartDatePerformance(_0x38bd85){const _0x1e9efa=_0x4ee1e7,_0x396d5a=fns[_0x1e9efa(0x201)](new Date(_0x38bd85[_0x1e9efa(0x21d)]),_0x1e9efa(0x216));let _0x41e583=[];_0x41e583[stablecoins[_0x1e9efa(0x1d9)][_0x1e9efa(0x1e9)]]=await getCloses(stablecoins[_0x1e9efa(0x1d9)][_0x1e9efa(0x18b)],new Date(_0x38bd85[_0x1e9efa(0x21d)]),0x1),_0x41e583[stablecoins['usd'][_0x1e9efa(0x1e9)]]=await getCloses(stablecoins[_0x1e9efa(0x17d)]['symbol'],new Date(_0x38bd85[_0x1e9efa(0x21d)]),0x1);let _0x45bb3a,_0x248971=[];_0x38bd85[_0x1e9efa(0x1c7)][_0x1e9efa(0x250)](_0x4eb67e=>{const _0x3d1807=_0x1e9efa;!_0x4eb67e[_0x3d1807(0x285)]&&_0x248971[_0x3d1807(0x185)]({'coin':_0x4eb67e[_0x3d1807(0x1e9)],'number':_0x4eb67e['startnumber'],'price':_0x4eb67e[_0x3d1807(0x27f)]});}),_0x45bb3a={'date':_0x396d5a,'eur':_0x41e583[stablecoins[_0x1e9efa(0x1d9)][_0x1e9efa(0x1e9)]][0x0],'usd':_0x41e583[stablecoins[_0x1e9efa(0x17d)][_0x1e9efa(0x1e9)]][0x0],'coins':_0x248971};let _0x16f064=dbPerformance[_0x1e9efa(0x247)](_0x1e9efa(0x27a))[_0x1e9efa(0x19d)]({'date':_0x396d5a})['value']();_0x16f064?dbPerformance[_0x1e9efa(0x247)](_0x1e9efa(0x27a))[_0x1e9efa(0x19d)]({'date':_0x396d5a})[_0x1e9efa(0x212)](_0x45bb3a)[_0x1e9efa(0x1e0)]():dbPerformance[_0x1e9efa(0x247)](_0x1e9efa(0x27a))[_0x1e9efa(0x185)](_0x45bb3a)['write'](),_0x16f064=dbPerformance[_0x1e9efa(0x247)](_0x1e9efa(0x27a))[_0x1e9efa(0x226)](_0x1e9efa(0x239))[_0x1e9efa(0x1ca)](),_0x16f064[_0x1e9efa(0x250)](_0x5e3594=>{const _0x2d9b68=_0x1e9efa;_0x5e3594[_0x2d9b68(0x239)]<_0x396d5a&&dbPerformance[_0x2d9b68(0x247)](_0x2d9b68(0x27a))[_0x2d9b68(0x231)]({'date':_0x5e3594[_0x2d9b68(0x239)]})[_0x2d9b68(0x1e0)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x2ed6ca){const _0x35010b=_0x4ee1e7;let _0x203b11,_0x180817=[];logHistory('success',_0x35010b(0x20b)),_0x2ed6ca['portfolio'][_0x35010b(0x250)](_0x36c2df=>{const _0x1f12fe=_0x35010b;if(_0x36c2df[_0x1f12fe(0x1e9)]!=config[_0x1f12fe(0x198)]&&!_0x36c2df[_0x1f12fe(0x285)])_0x180817[_0x1f12fe(0x185)]({'coin':_0x36c2df[_0x1f12fe(0x1e9)],'symbol':_0x36c2df[_0x1f12fe(0x18b)]});});let _0xdc602a=[];try{const _0x2aee3a=fns[_0x35010b(0x201)](fns['parseISO'](_0x2ed6ca[_0x35010b(0x21d)][_0x35010b(0x1e5)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x40642b of _0x180817){if(_0x40642b['coin']!=config['basecoin'])_0x203b11=await exchange[_0x35010b(0x253)](_0x40642b['symbol'],Date['parse'](_0x2aee3a));_0x203b11['forEach'](_0x24c819=>{const _0x581ce6=_0x35010b,_0x217cb4=_0x40642b[_0x581ce6(0x18b)]['includes'](config[_0x581ce6(0x198)]+'/'),_0x24f3c3=fns['format'](fns[_0x581ce6(0x287)](_0x24c819[_0x581ce6(0x222)]),_0x581ce6(0x25d)),_0x24a86f=fns[_0x581ce6(0x201)](fns['parseISO'](_0x24c819['datetime']),_0x581ce6(0x216));let _0x17912d;if(_0x24c819[_0x581ce6(0x249)]==_0x581ce6(0x1f9)&&_0x217cb4==![])_0x17912d=_0x24c819[_0x581ce6(0x261)];if(_0x24c819[_0x581ce6(0x249)]==_0x581ce6(0x1f9)&&_0x217cb4==!![])_0x17912d=-_0x24c819['amount']*_0x24c819[_0x581ce6(0x205)];if(_0x24c819[_0x581ce6(0x249)]=='sell'&&_0x217cb4==![])_0x17912d=-_0x24c819[_0x581ce6(0x261)];if(_0x24c819['side']==_0x581ce6(0x1d7)&&_0x217cb4==!![])_0x17912d=_0x24c819[_0x581ce6(0x261)]*_0x24c819[_0x581ce6(0x205)];_0xdc602a[_0x581ce6(0x185)]({'timestamp':_0x24f3c3,'date':_0x24a86f,'coin':_0x40642b[_0x581ce6(0x1e9)],'symbol':_0x40642b[_0x581ce6(0x18b)],'type':_0x24c819[_0x581ce6(0x267)],'side':_0x24c819['side'],'reverse':_0x217cb4,'amount':formatResult(_0x24c819['filled'],0x8),'filled':formatResult(_0x24c819[_0x581ce6(0x227)],0x8),'coinamount':formatResult(_0x17912d,0x8),'price':formatResult(_0x24c819[_0x581ce6(0x205)],0x8)});let _0x2da841;if(_0x24c819[_0x581ce6(0x249)]==_0x581ce6(0x1f9)&&_0x217cb4==![])_0x2da841=-_0x24c819[_0x581ce6(0x261)]*_0x24c819[_0x581ce6(0x205)];if(_0x24c819['side']==_0x581ce6(0x1f9)&&_0x217cb4==!![])_0x2da841=_0x24c819[_0x581ce6(0x261)];if(_0x24c819[_0x581ce6(0x249)]=='sell'&&_0x217cb4==![])_0x2da841=_0x24c819[_0x581ce6(0x261)]*_0x24c819[_0x581ce6(0x205)];if(_0x24c819[_0x581ce6(0x249)]==_0x581ce6(0x1d7)&&_0x217cb4==!![])_0x2da841=-_0x24c819['amount'];_0xdc602a[_0x581ce6(0x185)]({'date':_0x24a86f,'coin':config[_0x581ce6(0x198)],'coinamount':formatResult(_0x2da841,0x8)});});}_0xdc602a[_0x35010b(0x1b2)]((_0x45d9a9,_0x1f7aff)=>_0x45d9a9[_0x35010b(0x196)]>_0x1f7aff[_0x35010b(0x196)]?0x1:_0x1f7aff[_0x35010b(0x196)]>_0x45d9a9[_0x35010b(0x196)]?-0x1:0x0),dbLogs[_0x35010b(0x247)](_0x35010b(0x1e7))[_0x35010b(0x231)]()[_0x35010b(0x1e0)](),_0xdc602a[_0x35010b(0x250)](_0x4b7bf0=>{const _0x4d40b9=_0x35010b;let _0x1f77c8;_0x4b7bf0[_0x4d40b9(0x1e9)]!=config[_0x4d40b9(0x198)]&&(_0x1f77c8={'time':_0x4b7bf0[_0x4d40b9(0x196)],'type':_0x4d40b9(0x23d),'event':_0x4d40b9(0x1bf)+_0x4b7bf0['symbol']+'\x20'+_0x4b7bf0[_0x4d40b9(0x249)]+'\x20#'+_0x4b7bf0[_0x4d40b9(0x261)]+'\x20@'+_0x4b7bf0['price']},dbLogs['get'](_0x4d40b9(0x1e7))[_0x4d40b9(0x185)](_0x1f77c8)[_0x4d40b9(0x1e0)]());});const _0x364125=fns['eachDayOfInterval']({'start':new Date(_0x2ed6ca['startdate']),'end':new Date()})[_0x35010b(0x1c6)](_0x4e3ee9=>fns[_0x35010b(0x201)](_0x4e3ee9,'yyyy/MM/dd'));let _0x2658b2=[];_0x2ed6ca['portfolio'][_0x35010b(0x250)](_0x11e64b=>{const _0xd524a5=_0x35010b;if(!_0x11e64b[_0xd524a5(0x285)]){_0x2658b2[_0x11e64b[_0xd524a5(0x1e9)]]=[];let _0xff9cf6=_0x11e64b[_0xd524a5(0x25c)];_0x364125[_0xd524a5(0x250)]((_0x4dc673,_0x30ef3b)=>{const _0x2cd8f2=_0xd524a5;let _0x41a374=_0xdc602a['filter'](_0x93faea=>_0x93faea['coin']==_0x11e64b['coin']&&_0x93faea['date']==_0x4dc673);if(_0x41a374[_0x2cd8f2(0x271)]!=0x0){let _0x436c7c=_0x41a374[_0x2cd8f2(0x26c)]((_0x136c3f,_0x4c6402)=>{const _0x196d70=_0x2cd8f2;return _0x136c3f+=_0x4c6402[_0x196d70(0x1db)],_0x136c3f;},0x0);_0xff9cf6+=_0x436c7c;}_0x2658b2[_0x11e64b[_0x2cd8f2(0x1e9)]][_0x4dc673]=_0xff9cf6;});}});const _0x3b5141=[..._0x180817];_0x3b5141['push']({'coin':stablecoins[_0x35010b(0x1d9)]['coin'],'symbol':stablecoins[_0x35010b(0x1d9)][_0x35010b(0x18b)]}),_0x3b5141[_0x35010b(0x185)]({'coin':stablecoins[_0x35010b(0x17d)][_0x35010b(0x1e9)],'symbol':stablecoins[_0x35010b(0x17d)][_0x35010b(0x18b)]});let _0x439487=[];for(const _0x415aa2 of _0x3b5141){_0x439487[_0x415aa2[_0x35010b(0x1e9)]]=await getCloses(_0x415aa2[_0x35010b(0x18b)],new Date(_0x2ed6ca[_0x35010b(0x21d)]));}dbPerformance[_0x35010b(0x247)](_0x35010b(0x27a))[_0x35010b(0x231)]()['write'](),_0x364125[_0x35010b(0x250)]((_0x32696d,_0x2987f0)=>{const _0x57ca4d=_0x35010b;let _0x44cbb9,_0x3d9135=[];_0x2987f0==0x0?(_0x2ed6ca[_0x57ca4d(0x1c7)]['forEach'](_0x555661=>{const _0x2916b0=_0x57ca4d;!_0x555661['excluded']&&_0x3d9135['push']({'coin':_0x555661[_0x2916b0(0x1e9)],'number':_0x555661['startnumber'],'price':_0x555661[_0x2916b0(0x27f)]});}),_0x44cbb9={'date':_0x32696d,'eur':_0x439487[stablecoins['eur'][_0x57ca4d(0x1e9)]][_0x2987f0],'usd':_0x439487[stablecoins[_0x57ca4d(0x17d)][_0x57ca4d(0x1e9)]][_0x2987f0],'coins':_0x3d9135}):(_0x2ed6ca[_0x57ca4d(0x1c7)][_0x57ca4d(0x250)](_0x38daab=>{const _0x29b368=_0x57ca4d;!_0x38daab[_0x29b368(0x285)]&&_0x3d9135[_0x29b368(0x185)]({'coin':_0x38daab[_0x29b368(0x1e9)],'number':_0x2658b2[_0x38daab[_0x29b368(0x1e9)]][_0x32696d],'price':_0x38daab['coin']==config[_0x29b368(0x198)]?0x1:_0x439487[_0x38daab['coin']][_0x2987f0]});}),_0x44cbb9={'date':_0x32696d,'eur':_0x439487[stablecoins['eur'][_0x57ca4d(0x1e9)]][_0x2987f0],'usd':_0x439487[stablecoins[_0x57ca4d(0x17d)][_0x57ca4d(0x1e9)]][_0x2987f0],'coins':_0x3d9135}),dbPerformance[_0x57ca4d(0x247)](_0x57ca4d(0x27a))[_0x57ca4d(0x185)](_0x44cbb9)[_0x57ca4d(0x1e0)]();}),emitPerformance(),await resetCoinResults();for(let _0x58298d of _0xdc602a){_0x58298d[_0x35010b(0x1e9)]!=config[_0x35010b(0x198)]&&await updateCoinResults(_0x58298d);}logHistory(_0x35010b(0x188),_0x35010b(0x192));}catch(_0x138fd7){await handleError(_0x138fd7,_0x35010b(0x193));}}async function getCloses(_0x41ad4f,_0x57f038,_0xdc38b8=undefined){const _0x336f52=_0x4ee1e7,_0x4413bb='1d';let _0x301fa5,_0x5540f2;const _0x3e190d=fns[_0x336f52(0x23a)](new Date(),_0x57f038)+0x1;try{const _0x141831=exchange[_0x336f52(0x24c)]()-_0x3e190d*0x18*0xe10*0x3e8;_0x301fa5=await exchange['fetchOHLCV'](_0x41ad4f,_0x4413bb,_0x141831,_0xdc38b8),_0x5540f2=await exchange[_0x336f52(0x22b)](_0x41ad4f);}catch(_0xef1a0d){await handleError(_0xef1a0d,_0x336f52(0x19a));}let _0x2a83c8=ohlcvToCloses(_0x301fa5);return _0x2a83c8[_0x336f52(0x185)](_0x5540f2[_0x41ad4f][_0x336f52(0x1d6)]),_0x2a83c8;}function ohlcvToCloses(_0x28e229){const _0x34c9c2=_0x4ee1e7;let _0xe7bad9=[];return _0x28e229[_0x34c9c2(0x250)](function(_0x305422){const _0x564dc4=_0x34c9c2;_0xe7bad9[_0x564dc4(0x185)](_0x305422[0x4]);}),_0xe7bad9;}function getConfiguration(_0xda2e6a){const _0x6c8548=_0x4ee1e7;let _0x1625c2=dbConfig[_0x6c8548(0x247)](_0x6c8548(0x22d))[_0x6c8548(0x19d)]({'botID':_0xda2e6a})[_0x6c8548(0x1ca)]();if(_0x1625c2){let _0xcbdd21=![];!_0x1625c2[_0x6c8548(0x186)]&&(_0x1625c2={..._0x1625c2,'exchange':_0x6c8548(0x1d1)},_0xcbdd21=!![]),!_0x1625c2[_0x6c8548(0x198)]&&(_0x1625c2={..._0x1625c2,'basecoin':_0x6c8548(0x1ac)},_0xcbdd21=!![]),!_0x1625c2['ordertype']&&(_0x1625c2={..._0x1625c2,'ordertype':_0x6c8548(0x1bb)},_0xcbdd21=!![]),!_0x1625c2[_0x6c8548(0x25a)]&&(_0x1625c2={..._0x1625c2,'timeout':0x14},_0xcbdd21=!![]),!_0x1625c2[_0x6c8548(0x275)]&&(_0x1625c2={..._0x1625c2,'emojibuy':''},_0xcbdd21=!![]),!_0x1625c2[_0x6c8548(0x21c)]&&(_0x1625c2={..._0x1625c2,'emojisell':''},_0xcbdd21=!![]),!_0x1625c2['showname']&&(_0x1625c2={..._0x1625c2,'showname':![]},_0xcbdd21=!![]),_0xcbdd21&&(_0x1625c2={'botID':_0x1625c2['botID'],'exchange':_0x1625c2[_0x6c8548(0x186)],'apiKey':_0x1625c2[_0x6c8548(0x20c)],'apiSecret':_0x1625c2['apiSecret'],'basecoin':_0x1625c2[_0x6c8548(0x198)],'botname':_0x1625c2[_0x6c8548(0x25e)],'showname':_0x1625c2['showname'],'threshold':_0x1625c2['threshold'],'ordertype':_0x1625c2['ordertype'],'timeout':_0x1625c2[_0x6c8548(0x25a)],'startdate':_0x1625c2['startdate'],'recreate':_0x1625c2['recreate'],'timeshift':_0x1625c2[_0x6c8548(0x27e)],'headless':_0x1625c2[_0x6c8548(0x277)],'cooldown':_0x1625c2['cooldown'],'emojibuy':_0x1625c2[_0x6c8548(0x275)],'emojisell':_0x1625c2[_0x6c8548(0x21c)],'portfolio':_0x1625c2[_0x6c8548(0x1c7)]},dbConfig[_0x6c8548(0x247)]('bot')[_0x6c8548(0x231)]()[_0x6c8548(0x1e0)](),dbConfig['get'](_0x6c8548(0x22d))[_0x6c8548(0x185)](_0x1625c2)[_0x6c8548(0x1e0)]());}else _0x1625c2={'botID':_0xda2e6a,'exchange':_0x6c8548(0x1d1),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x6c8548(0x1fb)+_0xda2e6a,'showname':![],'threshold':'3','ordertype':_0x6c8548(0x1bb),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x6c8548(0x27e)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1625c2;}function emittedConfiguration(){const _0x3fbca3=_0x4ee1e7;let _0x508161;return config['apiKey']==''?_0x508161=config:_0x508161={...config,'apiKey':_0x3fbca3(0x269),'apiSecret':'************'},_0x508161;}function getSettings(){const _0x17081d=_0x4ee1e7;return dbSettings['get']('settings')[_0x17081d(0x1ca)]();}function getSecure(){const _0x3b1cb4=_0x4ee1e7;return dbSecure[_0x3b1cb4(0x247)](_0x3b1cb4(0x273))[_0x3b1cb4(0x1ca)]()||{};}function updateTimeshift(_0x309267){const _0x5608b0=_0x4ee1e7;let _0x5536d1=dbConfig[_0x5608b0(0x247)]('bot')[_0x5608b0(0x19d)]({'botID':botID})[_0x5608b0(0x1ca)]();_0x5536d1&&dbConfig[_0x5608b0(0x247)](_0x5608b0(0x22d))[_0x5608b0(0x19d)]({'botID':botID})[_0x5608b0(0x212)]({'timeshift':_0x309267})[_0x5608b0(0x1e0)](),config[_0x5608b0(0x27e)]=_0x309267,proxyEmit(_0x5608b0(0x230),emittedConfiguration());}async function storeConfiguration(_0x38c8af){const _0x3f6a9d=_0x4ee1e7;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3176c2=dbConfig[_0x3f6a9d(0x247)](_0x3f6a9d(0x22d))['find']({'botID':botID})['value']();_0x38c8af={..._0x38c8af,'apiKey':crypt['decrypt'](secure[_0x3f6a9d(0x252)],_0x38c8af[_0x3f6a9d(0x20c)])['message'],'apiSecret':crypt['decrypt'](secure[_0x3f6a9d(0x252)],_0x38c8af[_0x3f6a9d(0x26e)])[_0x3f6a9d(0x184)]};if(_0x3176c2){if(_0x38c8af[_0x3f6a9d(0x20c)]==_0x3f6a9d(0x269))_0x38c8af[_0x3f6a9d(0x20c)]=config[_0x3f6a9d(0x20c)];if(_0x38c8af['apiSecret']==_0x3f6a9d(0x269))_0x38c8af[_0x3f6a9d(0x26e)]=config['apiSecret'];dbConfig[_0x3f6a9d(0x247)](_0x3f6a9d(0x22d))[_0x3f6a9d(0x19d)]({'botID':botID})[_0x3f6a9d(0x212)](_0x38c8af)[_0x3f6a9d(0x1e0)]();}else dbConfig[_0x3f6a9d(0x247)](_0x3f6a9d(0x22d))[_0x3f6a9d(0x185)](_0x38c8af)[_0x3f6a9d(0x1e0)](),process[_0x3f6a9d(0x1b8)]({'status':_0x3f6a9d(0x1f0),'live':'running'});config={..._0x38c8af};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x3f6a9d(0x1b8)]({'botname':_0x38c8af['botname']}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x3505fb){const _0x28adbb=_0x4ee1e7,_0x4c0645={...config,'headless':_0x3505fb[_0x28adbb(0x277)]};let _0x45a502=dbConfig[_0x28adbb(0x247)](_0x28adbb(0x22d))['find']({'botID':botID})['value']();_0x45a502&&dbConfig[_0x28adbb(0x247)](_0x28adbb(0x22d))[_0x28adbb(0x19d)]({'botID':botID})[_0x28adbb(0x212)](_0x4c0645)[_0x28adbb(0x1e0)](),config={..._0x4c0645},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x17cb09){const _0x338901=_0x4ee1e7;return _0x17cb09[_0x338901(0x1e5)]('/','');}function updateNumberCoins(_0x3bdd7d){const _0x11085e=_0x4ee1e7;_0x3bdd7d[_0x11085e(0x207)]&&_0x3bdd7d[_0x11085e(0x207)]==_0x11085e(0x225)&&_0x3bdd7d['balances'][_0x11085e(0x250)](_0x58a1d7=>{const _0x6cd1e4=_0x11085e;let _0x4c79d5=currentCoins[_0x6cd1e4(0x19d)](_0x17f1ec=>_0x17f1ec[_0x6cd1e4(0x1e9)]==_0x58a1d7[_0x6cd1e4(0x1a1)]);if(_0x4c79d5)_0x4c79d5[_0x6cd1e4(0x1aa)]=Number(_0x58a1d7['availableBalance']);});if(_0x3bdd7d[_0x11085e(0x207)]&&_0x3bdd7d[_0x11085e(0x207)]==_0x11085e(0x1f7)){if(_0x3bdd7d['orderType']=='LIMIT'&&_0x3bdd7d[_0x11085e(0x23e)]==_0x11085e(0x246)){if(lastOrders)lastOrders[_0x11085e(0x250)](_0x352740=>{const _0x180602=_0x11085e;if(_0x352740[_0x180602(0x1e2)]==_0x3bdd7d[_0x180602(0x1e2)]){if(_0x352740[_0x180602(0x217)])_0x352740[_0x180602(0x227)]=_0x3bdd7d[_0x180602(0x265)]*_0x352740[_0x180602(0x205)];else _0x352740[_0x180602(0x227)]=_0x3bdd7d[_0x180602(0x265)];}});}}}async function getCoins(_0x237fa1=!![],_0x37e303=config[_0x4ee1e7(0x198)]){const _0x1e07f7=_0x4ee1e7;let _0x89b2c1,_0x3d5b6d=[],_0x3057e5=[],_0x49b9c4=[];try{_0x89b2c1=await exchange[_0x1e07f7(0x1df)](),mybalances=_0x89b2c1['total'];if(!_0x237fa1)for(const [_0x18db4d,_0x378ff3]of Object[_0x1e07f7(0x24a)](mybalances)){_0x49b9c4[_0x1e07f7(0x185)](_0x18db4d);}else config[_0x1e07f7(0x1c7)]['forEach'](_0x369349=>{const _0x4e7bb2=_0x1e07f7;if(!_0x369349[_0x4e7bb2(0x285)])_0x49b9c4[_0x4e7bb2(0x185)](_0x369349[_0x4e7bb2(0x1e9)]);});if(_0x37e303=='')for(const [_0x5ec8fb,_0x5ed222]of Object['entries'](mybalances)){_0x5ed222[_0x1e07f7(0x1e4)]()!=0x0&&_0x3057e5[_0x1e07f7(0x185)]({'coin':_0x5ec8fb});}else for(const [_0x308303,_0xdbb595]of Object['entries'](mybalances)){if(_0x49b9c4[_0x1e07f7(0x1c1)](_0x308303)){if((_0xdbb595[_0x1e07f7(0x1e4)]()!=0x0||config[_0x1e07f7(0x1c7)]['find'](_0x1ad043=>_0x1ad043['coin']==_0x308303))&&(allSymbols[_0x1e07f7(0x1c1)](_0x308303+'/'+_0x37e303)||_0x308303==_0x37e303))_0x3057e5['push']({'coin':_0x308303,'symbol':_0x308303+'/'+_0x37e303,'reverse':![],'number':_0xdbb595}),_0x308303!=_0x37e303&&_0x3d5b6d['push'](_0x308303+'/'+_0x37e303);else(_0xdbb595[_0x1e07f7(0x1e4)]()!=0x0||config[_0x1e07f7(0x1c7)][_0x1e07f7(0x19d)](_0x1fac79=>_0x1fac79[_0x1e07f7(0x1e9)]==_0x308303))&&allSymbols[_0x1e07f7(0x1c1)](_0x37e303+'/'+_0x308303)&&(_0x3057e5[_0x1e07f7(0x185)]({'coin':_0x308303,'symbol':_0x37e303+'/'+_0x308303,'reverse':!![],'number':_0xdbb595}),_0x308303!=_0x37e303&&_0x3d5b6d[_0x1e07f7(0x185)](_0x37e303+'/'+_0x308303));}}}catch(_0x41ac47){if(!_0x237fa1){if(_0x41ac47[_0x1e07f7(0x1e4)]()[_0x1e07f7(0x1c1)](_0x1e07f7(0x270)))return logHistory(_0x1e07f7(0x20a),_0x1e07f7(0x282)),![];else{if(_0x41ac47['toString']()[_0x1e07f7(0x1c1)](_0x1e07f7(0x1bd)))return logHistory(_0x1e07f7(0x20a),_0x1e07f7(0x1c4)),![];else{if(_0x41ac47[_0x1e07f7(0x1e4)]()[_0x1e07f7(0x1c1)](_0x1e07f7(0x236)))return logHistory(_0x1e07f7(0x20a),_0x1e07f7(0x1c5)),![];else await handleError(_0x41ac47,'getCoins()');}}}else await handleError(_0x41ac47,_0x1e07f7(0x1d8));}return _0x3057e5;}async function getPortfolio(_0x8b180d){const _0x1c8a9b=_0x4ee1e7;let _0x2e4a0b=[],_0x550afb=[],_0x5b6c91,_0xd9eb64=[],_0xcc460d,_0x1d319e;_0x8b180d[_0x1c8a9b(0x20c)]==='************'||_0x8b180d[_0x1c8a9b(0x26e)]===_0x1c8a9b(0x269)?(_0xcc460d=config[_0x1c8a9b(0x20c)],_0x1d319e=config['apiSecret']):(_0xcc460d=_0x8b180d[_0x1c8a9b(0x20c)],_0x1d319e=_0x8b180d[_0x1c8a9b(0x26e)]);await initExchange(_0xcc460d,_0x1d319e);let _0x1f878f=await loadSymbols();if(_0x1f878f){_0xd9eb64=await getCoins(![],_0x8b180d[_0x1c8a9b(0x198)]);if(_0xd9eb64===![])proxyEmit(_0x1c8a9b(0x1c7),![]);else{if(_0x8b180d[_0x1c8a9b(0x198)]=='')proxyEmit(_0x1c8a9b(0x1c7),_0xd9eb64);else{_0xd9eb64['forEach'](_0x5acf09=>{const _0x459dc9=_0x1c8a9b;_0x2e4a0b[_0x459dc9(0x185)](_0x5acf09['symbol']);});try{_0x550afb=await exchange[_0x1c8a9b(0x22b)](_0x2e4a0b);}catch(_0x3997dc){await handleError(_0x3997dc,_0x1c8a9b(0x235));}_0xd9eb64[_0x1c8a9b(0x250)](_0x54fee8=>{const _0xc6d7a2=_0x1c8a9b;_0x54fee8[_0xc6d7a2(0x1e9)]!=_0x8b180d[_0xc6d7a2(0x198)]?_0x5b6c91=_0x54fee8[_0xc6d7a2(0x217)]?0x1/_0x550afb[_0x54fee8[_0xc6d7a2(0x18b)]][_0xc6d7a2(0x1d6)]:_0x550afb[_0x54fee8[_0xc6d7a2(0x18b)]][_0xc6d7a2(0x1d6)]:_0x5b6c91=0x1,_0x54fee8[_0xc6d7a2(0x205)]=formatResult(_0x5b6c91,0x8);}),proxyEmit(_0x1c8a9b(0x1c7),_0xd9eb64);}}}else proxyEmit(_0x1c8a9b(0x1c7),![]);}function checkMinimums(_0x3bd06c){const _0x466754=_0x4ee1e7;let _0x551ff4=!![];const _0xd2e669=!_0x3bd06c[_0x466754(0x217)]?markets[_0x3bd06c[_0x466754(0x18b)]]['limits']['amount'][_0x466754(0x1be)]:markets[_0x3bd06c['symbol']][_0x466754(0x1c0)][_0x466754(0x24d)][_0x466754(0x1be)],_0x3e203b=!_0x3bd06c[_0x466754(0x217)]?markets[_0x3bd06c['symbol']]['limits'][_0x466754(0x24d)][_0x466754(0x1be)]:markets[_0x3bd06c[_0x466754(0x18b)]][_0x466754(0x1c0)][_0x466754(0x261)]['min'];if(Math['abs'](_0x3bd06c[_0x466754(0x1a5)])<_0xd2e669)_0x551ff4=![];if(Math['abs'](_0x3bd06c['trade'])*_0x3bd06c[_0x466754(0x1d6)]<_0x3e203b)_0x551ff4=![];return _0x551ff4;}async function getBalances(){const _0xa65303=_0x4ee1e7;let _0x348b4f=0x0,_0x320ffc;const _0x1aaa2a=config[_0xa65303(0x26f)];currentCoins['forEach'](_0x51a558=>{const _0x372b3c=_0xa65303;if(_0x51a558[_0x372b3c(0x1e9)]!=config[_0x372b3c(0x198)]){let _0x207f73=global[_0x372b3c(0x20f)][noslash(_0x51a558[_0x372b3c(0x18b)])];_0x320ffc=_0x51a558[_0x372b3c(0x217)]?0x1/_0x207f73:_0x207f73;}else _0x320ffc=0x1;let _0x2553c8=_0x51a558['number']*_0x320ffc;_0x348b4f+=_0x2553c8,_0x51a558[_0x372b3c(0x1d6)]=formatResult(Number(_0x320ffc),0x8),_0x51a558[_0x372b3c(0x1ca)]=_0x2553c8;}),currentCoins[_0xa65303(0x250)](_0xc4e0ea=>{const _0x1bcd47=_0xa65303;let _0x1d5f48=config['portfolio']['find'](_0x3f6e4f=>_0x3f6e4f[_0x1bcd47(0x1e9)]==_0xc4e0ea[_0x1bcd47(0x1e9)]),_0x4a2d03=Number(_0x1d5f48[_0x1bcd47(0x1e3)]),_0xf2386b=_0xc4e0ea[_0x1bcd47(0x1ca)]/_0x348b4f*0x64,_0xb4469e=_0x4a2d03*_0x348b4f/0x64/_0xc4e0ea[_0x1bcd47(0x1d6)]-_0xc4e0ea[_0x1bcd47(0x1aa)];_0xc4e0ea['distribution']=formatResult(_0xf2386b,0x3),_0xc4e0ea[_0x1bcd47(0x266)]=formatResult(_0x4a2d03,0x3),_0xc4e0ea[_0x1bcd47(0x1a5)]=formatResult(_0xb4469e,0x8),_0xc4e0ea['side']='',_0xc4e0ea[_0x1bcd47(0x23b)]='';if(_0xc4e0ea[_0x1bcd47(0x1e9)]!=config['basecoin']){if(_0xc4e0ea['distribution']>_0x4a2d03)_0xc4e0ea['side']=_0x1bcd47(0x1d7),_0xc4e0ea[_0x1bcd47(0x23b)]=checkMinimums(_0xc4e0ea);else _0xc4e0ea[_0x1bcd47(0x1e3)]<_0x4a2d03&&(_0xc4e0ea[_0x1bcd47(0x249)]=_0x1bcd47(0x1f9),_0xc4e0ea['valid']=checkMinimums(_0xc4e0ea));}_0xc4e0ea[_0x1bcd47(0x276)]=_0xc4e0ea['distribution']/_0xc4e0ea[_0x1bcd47(0x266)]-0x1;}),currentCoins['sort']((_0x1d1de7,_0x439242)=>_0x1d1de7['delta']<_0x439242[_0xa65303(0x276)]?0x1:_0x439242[_0xa65303(0x276)]<_0x1d1de7[_0xa65303(0x276)]?-0x1:0x0);const _0x1b3ab5=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1b3ab5[_0xa65303(0x1d9)],'usd':_0x1b3ab5[_0xa65303(0x17d)],'portfolio':JSON[_0xa65303(0x1b6)](currentCoins),'threshold':_0x1aaa2a},proxyEmit(_0xa65303(0x202),{'serverversion':serverversion,'balances':lastBalances});if(config[_0xa65303(0x277)])headlessMode({'portfolio':currentCoins,'threshold':_0x1aaa2a});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x222683=_0x4ee1e7;if(!lastBalances)return;let _0x2ad41c=await getStartingBalances(![]),_0x306b76=[],_0x49cd56=[],_0x1274e0;JSON['parse'](lastBalances['portfolio'])['forEach'](_0x106277=>{const _0x10bb97=_0x2529;let _0x4f3ee3={'coin':_0x106277['coin'],'number':_0x106277[_0x10bb97(0x1aa)],'price':_0x106277[_0x10bb97(0x1d6)]};_0x306b76[_0x10bb97(0x185)](_0x4f3ee3);if(!_0x2ad41c['coins']||!_0x2ad41c[_0x10bb97(0x264)][_0x10bb97(0x19d)](_0x58577e=>_0x58577e[_0x10bb97(0x1e9)]==_0x106277[_0x10bb97(0x1e9)]&&_0x58577e[_0x10bb97(0x1aa)]!=0x0))_0x49cd56[_0x10bb97(0x185)](_0x4f3ee3);});const _0x1f5a0f=await getFiat();_0x1274e0={'date':lastBalances['time'][_0x222683(0x1c9)]('\x20')[0x0],'eur':_0x1f5a0f[_0x222683(0x1d9)],'usd':_0x1f5a0f[_0x222683(0x17d)],'coins':_0x306b76};let _0x33bb20=dbPerformance[_0x222683(0x247)](_0x222683(0x27a))[_0x222683(0x19d)]({'date':_0x1274e0[_0x222683(0x239)]})[_0x222683(0x1ca)]();_0x33bb20?dbPerformance[_0x222683(0x247)](_0x222683(0x27a))[_0x222683(0x19d)]({'date':_0x1274e0[_0x222683(0x239)]})[_0x222683(0x212)](_0x1274e0)[_0x222683(0x1e0)]():dbPerformance['get'](_0x222683(0x27a))[_0x222683(0x185)](_0x1274e0)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x38f359=_0x4ee1e7;if(dbPerformance['has']('data')[_0x38f359(0x1ca)]()){let _0x592d51=dbPerformance[_0x38f359(0x247)](_0x38f359(0x27a))['sortBy'](_0x38f359(0x239))[_0x38f359(0x1ca)]();proxyEmit('performance',_0x592d51),lastPerformanceEmitted=getDate();}else proxyEmit(_0x38f359(0x26b),[]);}async function getStartingBalances(_0x57bff6=!![]){const _0x17815f=_0x4ee1e7;let _0x4f15c3=dbPerformance[_0x17815f(0x247)](_0x17815f(0x27a))[_0x17815f(0x19d)]({'date':config[_0x17815f(0x21d)]})[_0x17815f(0x1ca)]();config['apiKey']!=''&&!_0x4f15c3&&(await setStartDatePerformance(config),_0x4f15c3=dbPerformance[_0x17815f(0x247)]('data')['find']({'date':config[_0x17815f(0x21d)]})[_0x17815f(0x1ca)]());if(config[_0x17815f(0x20c)]==''||!_0x4f15c3)return{};let _0x405e2f=0x0,_0x3f3414=0x0,_0x2f7d1b=0x0,_0x258f9a=[],_0x5effde=0x0;config['portfolio'][_0x17815f(0x250)](_0x4839ef=>{const _0x5f102e=_0x17815f;if(!_0x4839ef['excluded']){_0x258f9a[_0x5effde]={'coin':_0x4839ef[_0x5f102e(0x1e9)],'symbol':_0x4839ef['symbol'],'number':_0x4839ef['startnumber'],'price':_0x4839ef[_0x5f102e(0x27f)]},_0x405e2f+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef[_0x5f102e(0x25c)];if(config['basecoin']==_0x5f102e(0x1ac))_0x3f3414+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef[_0x5f102e(0x25c)]*_0x4f15c3['eur'],_0x2f7d1b+=_0x4839ef['startprice']*_0x4839ef[_0x5f102e(0x25c)]*_0x4f15c3['usd'];else{if(config['basecoin']==_0x5f102e(0x213)||config[_0x5f102e(0x198)]==_0x5f102e(0x1dc)||config[_0x5f102e(0x198)]=='USDC')_0x3f3414+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef[_0x5f102e(0x25c)]*_0x4f15c3[_0x5f102e(0x1d9)]/_0x4f15c3[_0x5f102e(0x17d)],_0x2f7d1b+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef[_0x5f102e(0x25c)];else config[_0x5f102e(0x198)]==_0x5f102e(0x17b)&&(_0x3f3414+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef['startnumber'],_0x2f7d1b+=_0x4839ef[_0x5f102e(0x27f)]*_0x4839ef[_0x5f102e(0x25c)]*_0x4f15c3['usd']/_0x4f15c3[_0x5f102e(0x1d9)]);}_0x5effde++;}});let _0x85bd6d={'basecoin':_0x405e2f,'eur':_0x3f3414,'usd':_0x2f7d1b,'coins':_0x258f9a};if(_0x57bff6)proxyEmit(_0x17815f(0x254),_0x85bd6d);return _0x85bd6d;}function headlessMode(_0x7585ca){const _0x2bc04e=_0x4ee1e7;let _0x3ba301=_0x7585ca[_0x2bc04e(0x1c7)],_0xf2165c=_0x7585ca[_0x2bc04e(0x26f)],_0x444168=[];for(let _0x3e1304 of _0x3ba301){if(_0x3e1304[_0x2bc04e(0x1e9)]!=config[_0x2bc04e(0x198)]){if(_0x3e1304[_0x2bc04e(0x1e3)]/_0x3e1304[_0x2bc04e(0x266)]-0x1>=_0xf2165c/0x64){if(_0x3e1304['valid'])_0x444168[_0x2bc04e(0x185)](_0x3e1304);}else{if(_0x3e1304[_0x2bc04e(0x1e3)]/_0x3e1304['target']-0x1<=-_0xf2165c/0x64){if(_0x3e1304[_0x2bc04e(0x23b)])_0x444168[_0x2bc04e(0x185)](_0x3e1304);}}}}_0x444168[_0x2bc04e(0x271)]>0x0&&placeOrder(_0x444168);}function symbolToCoin(_0x3b9f8d){const _0x3ffc26=_0x4ee1e7;let _0x398e91;if(_0x3b9f8d[_0x3ffc26(0x1c1)]('/'+config[_0x3ffc26(0x198)]))_0x398e91=_0x3b9f8d['replace']('/'+config['basecoin'],'');if(_0x3b9f8d[_0x3ffc26(0x1c1)](config[_0x3ffc26(0x198)]+'/'))_0x398e91=_0x3b9f8d[_0x3ffc26(0x1e5)](config[_0x3ffc26(0x198)]+'/','');return _0x398e91;}async function validateOrders(_0x5bccad=0x0){const _0x52ae31=_0x4ee1e7;let _0x68b528=[],_0x3a922b=config[_0x52ae31(0x22f)]==_0x52ae31(0x1bb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x1779bc=>{const _0x39f34e=_0x52ae31;let _0x1297e0=previousCoins[_0x39f34e(0x19d)](_0x11d405=>_0x11d405['coin']==symbolToCoin(_0x1779bc[_0x39f34e(0x18b)])),_0x38b555=currentCoins['find'](_0x5ad8ba=>_0x5ad8ba[_0x39f34e(0x1e9)]==symbolToCoin(_0x1779bc['symbol'])),_0x5739e3,_0x540174;_0x1779bc['side']=='buy'&&!_0x1779bc[_0x39f34e(0x217)]||_0x1779bc[_0x39f34e(0x249)]=='sell'&&_0x1779bc[_0x39f34e(0x217)]?(_0x5739e3=_0x1297e0[_0x39f34e(0x1aa)]+0.9*_0x1779bc[_0x39f34e(0x227)],_0x540174=_0x1297e0['number']+1.1*_0x1779bc[_0x39f34e(0x227)]):(_0x5739e3=_0x1297e0['number']-1.1*_0x1779bc['filled'],_0x540174=_0x1297e0[_0x39f34e(0x1aa)]-0.9*_0x1779bc['filled']);const _0xdaac74=_0x1779bc[_0x39f34e(0x227)]!=0x0&&_0x38b555['number']>=_0x5739e3&&_0x38b555[_0x39f34e(0x1aa)]<=_0x540174;_0x68b528['push'](_0xdaac74);if(_0xdaac74&&config[_0x39f34e(0x22f)]!='market'){if(_0x1779bc[_0x39f34e(0x217)])logHistory(_0x39f34e(0x23d),_0x39f34e(0x209)+_0x1779bc[_0x39f34e(0x18b)]+'\x20'+_0x1779bc['side']+'\x20#'+formatResult(_0x1779bc['filled']/_0x1779bc[_0x39f34e(0x205)],0x8)+'\x20@'+formatResult(_0x1779bc['price'],0x8));else logHistory('order',_0x39f34e(0x209)+_0x1779bc['symbol']+'\x20'+_0x1779bc[_0x39f34e(0x249)]+'\x20#'+formatResult(_0x1779bc['filled'],0x8)+'\x20@'+formatResult(_0x1779bc['price'],0x8));}}),_0x68b528[_0x52ae31(0x250)]((_0x3f7a2b,_0x35eb58)=>{if(_0x3f7a2b)lastOrders['splice'](_0x35eb58,0x1);});if(_0x5bccad<_0x3a922b&&_0x68b528[_0x52ae31(0x1c1)](![])){if(_0x5bccad==0x0){config[_0x52ae31(0x22f)]=='market'?logHistory(_0x52ae31(0x20a),_0x52ae31(0x234)):logHistory('error',_0x52ae31(0x1fc));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x5bccad);},0xa*0x3e8);}else{(_0x5bccad==0x1||_0x5bccad==Math[_0x52ae31(0x1a0)](_0x3a922b/0x2)||_0x5bccad==_0x3a922b-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x5bccad);},validateOrderInterval);}}else{lockOrders=![];if(_0x5bccad>0x0&&!_0x68b528[_0x52ae31(0x1c1)](![]))config[_0x52ae31(0x22f)]==_0x52ae31(0x1bb)?logHistory(_0x52ae31(0x188),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x52ae31(0x188),_0x52ae31(0x1f6));else _0x5bccad>0x0&&_0x68b528['includes'](![])&&(config[_0x52ae31(0x22f)]=='market'?logHistory(_0x52ae31(0x188),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x52ae31(0x1a0)](_0x3a922b*validateOrderInterval/0xea60)+_0x52ae31(0x1b7)):(lastOrders['forEach'](async _0x1259d7=>{const _0x1ef0ee=_0x52ae31;try{const _0x3a2af3=await exchange[_0x1ef0ee(0x1b1)](_0x1259d7['orderId'],_0x1259d7[_0x1ef0ee(0x18b)]);}catch(_0x58bcb7){if(_0x58bcb7[_0x1ef0ee(0x1e4)]()[_0x1ef0ee(0x1c1)](_0x1ef0ee(0x208))){}else await handleError(_0x58bcb7,_0x1ef0ee(0x219));}}),logHistory('success',_0x52ae31(0x257)+Math[_0x52ae31(0x1a0)](_0x3a922b*validateOrderInterval/0xea60)+_0x52ae31(0x1b7))));}}async function resetCoinResults(){const _0x812a6a=_0x4ee1e7;dbCoinResults[_0x812a6a(0x247)]('coins')[_0x812a6a(0x231)]()['write']();let _0x4e880c=await getStartingBalances(![]);_0x4e880c['coins'][_0x812a6a(0x250)](_0x587342=>{const _0x5e6a04=_0x812a6a,_0x5579ff=_0x587342[_0x5e6a04(0x18b)][_0x5e6a04(0x1c1)](config[_0x5e6a04(0x198)]+'/');if(_0x587342[_0x5e6a04(0x1e9)]!=config['basecoin']){let _0x1eb54b={'coin':_0x587342[_0x5e6a04(0x1e9)],'number':_0x587342[_0x5e6a04(0x1aa)],'breakeven':_0x587342[_0x5e6a04(0x205)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5e6a04(0x247)](_0x5e6a04(0x264))[_0x5e6a04(0x185)](_0x1eb54b)[_0x5e6a04(0x1e0)]();}});}async function updateCoinResults(_0x2ca72e){const _0x6e47be=_0x4ee1e7;let _0x1ffd5c,_0x409f84,_0x207356,_0x1aed56,_0x2f8a08,_0x3dbce1,_0x2b531a=dbCoinResults[_0x6e47be(0x247)]('coins')[_0x6e47be(0x19d)]({'coin':_0x2ca72e['coin']})[_0x6e47be(0x1ca)]();if(!_0x2b531a)return;if(_0x2ca72e[_0x6e47be(0x260)]&&_0x2ca72e[_0x6e47be(0x260)]['currency']==config[_0x6e47be(0x198)])_0x1ffd5c=_0x2ca72e[_0x6e47be(0x260)]['cost'];else{if(_0x2ca72e[_0x6e47be(0x260)]&&_0x2ca72e[_0x6e47be(0x260)]['currency']==_0x6e47be(0x24e))_0x1ffd5c=_0x2ca72e['fee']['cost']*global[_0x6e47be(0x20f)][_0x6e47be(0x24e)+config[_0x6e47be(0x198)]];else _0x1ffd5c=0.001*_0x2ca72e['filled'];}const _0x1907cc=_0x2ca72e[_0x6e47be(0x18b)][_0x6e47be(0x1c1)](config[_0x6e47be(0x198)]+'/');_0x1907cc&&(_0x3dbce1={'coin':_0x2ca72e['coin'],'symbol':_0x2ca72e[_0x6e47be(0x18b)],'filled':_0x2ca72e[_0x6e47be(0x227)]*_0x2ca72e['price'],'side':_0x2ca72e[_0x6e47be(0x249)]==_0x6e47be(0x1d7)?_0x6e47be(0x1f9):_0x6e47be(0x1d7),'price':0x1/_0x2ca72e[_0x6e47be(0x205)]},_0x2ca72e={..._0x3dbce1});_0x2ca72e[_0x6e47be(0x249)]==_0x6e47be(0x1f9)?_0x207356=(_0x2b531a[_0x6e47be(0x18f)]*_0x2b531a['number']+_0x2ca72e['price']*_0x2ca72e[_0x6e47be(0x227)])/(_0x2b531a[_0x6e47be(0x1aa)]+_0x2ca72e[_0x6e47be(0x227)]):_0x207356=(_0x2b531a['breakeven']*_0x2b531a[_0x6e47be(0x1aa)]-_0x2ca72e[_0x6e47be(0x205)]*_0x2ca72e['filled'])/(_0x2b531a[_0x6e47be(0x1aa)]-_0x2ca72e[_0x6e47be(0x227)]);_0x2ca72e['side']=='buy'?_0x1aed56=_0x2b531a[_0x6e47be(0x210)]:_0x1aed56=_0x2b531a[_0x6e47be(0x210)]+(_0x2ca72e['price']-_0x2b531a[_0x6e47be(0x18f)])*_0x2ca72e[_0x6e47be(0x227)];_0x409f84=_0x2ca72e[_0x6e47be(0x249)]==_0x6e47be(0x1d7)?_0x2b531a[_0x6e47be(0x1aa)]-_0x2ca72e['filled']:_0x2b531a['number']+_0x2ca72e[_0x6e47be(0x227)],_0x2f8a08=(_0x2ca72e['price']-_0x207356)*_0x409f84;let _0x117209={'coin':_0x2ca72e[_0x6e47be(0x1e9)],'number':_0x409f84,'breakeven':formatResult(_0x207356,0x8),'realized':formatResult(_0x1aed56,0x8),'unrealized':formatResult(_0x2f8a08,0x8),'fees':formatResult(_0x2b531a[_0x6e47be(0x1d5)]+_0x1ffd5c,0x8),'sells':_0x2ca72e['side']==_0x6e47be(0x1d7)?_0x2b531a[_0x6e47be(0x1ce)]+0x1:_0x2b531a[_0x6e47be(0x1ce)],'buys':_0x2ca72e[_0x6e47be(0x249)]==_0x6e47be(0x1f9)?_0x2b531a[_0x6e47be(0x181)]+0x1:_0x2b531a[_0x6e47be(0x181)]};dbCoinResults[_0x6e47be(0x247)](_0x6e47be(0x264))[_0x6e47be(0x19d)]({'coin':_0x2ca72e[_0x6e47be(0x1e9)]})[_0x6e47be(0x212)](_0x117209)['write']();}async function placeOrder(_0x3e0a6f){const _0xab6123=_0x4ee1e7,_0x3901e0=config[_0xab6123(0x22f)]==_0xab6123(0x1bb)?'market':'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0xab6123(0x286)](JSON[_0xab6123(0x1b6)](currentCoins));for(const _0x2adb46 of _0x3e0a6f){let _0x373b7b,_0x20e9ba,_0x10aec9,_0x4ae457,_0x540dc6,_0x362687=_0x2adb46[_0xab6123(0x18b)];try{const _0xfd1411=await exchange['fetchTickers'](_0x362687),_0x57a3dc=_0xfd1411[_0x362687];_0x373b7b=_0x57a3dc['last'],_0x20e9ba=_0x57a3dc['bid'],_0x10aec9=_0x57a3dc[_0xab6123(0x258)];_0x2adb46[_0xab6123(0x217)]?(_0x4ae457=_0x2adb46[_0xab6123(0x249)]=='buy'?'sell':_0xab6123(0x1f9),_0x540dc6=Math['abs'](_0x2adb46['trade'])/_0x373b7b):(_0x4ae457=_0x2adb46[_0xab6123(0x249)],_0x540dc6=Math['abs'](_0x2adb46['trade']));_0x3901e0==_0xab6123(0x289)&&(config[_0xab6123(0x22f)]==_0xab6123(0x183)&&(_0x373b7b=_0x4ae457==_0xab6123(0x1f9)?_0x20e9ba:_0x10aec9),config[_0xab6123(0x22f)]==_0xab6123(0x20e)&&(_0x373b7b=_0x4ae457=='buy'?_0x10aec9:_0x20e9ba));_0x540dc6=formatResult(_0x540dc6,0x8),_0x373b7b=formatResult(_0x373b7b,0x8);const _0x205208=await exchange[_0xab6123(0x237)](_0x362687,_0x3901e0,_0x4ae457,_0x540dc6,_0x373b7b);lastOrders[_0xab6123(0x185)]({'orderId':_0x205208['id'],'symbol':_0x362687,'side':_0x4ae457,'reverse':_0x2adb46[_0xab6123(0x217)],'amount':_0x2adb46['reverse']?_0x205208[_0xab6123(0x261)]*_0x205208[_0xab6123(0x205)]:_0x205208[_0xab6123(0x261)],'filled':_0x2adb46[_0xab6123(0x217)]?_0x205208['filled']*_0x205208[_0xab6123(0x205)]:_0x205208[_0xab6123(0x227)],'price':_0x205208[_0xab6123(0x205)]});const _0x186936=_0x4ae457==_0xab6123(0x1d7)?config[_0xab6123(0x21c)]?String[_0xab6123(0x1f2)]('0x'+config[_0xab6123(0x21c)])+'\x20':'':config[_0xab6123(0x275)]?String[_0xab6123(0x1f2)]('0x'+config[_0xab6123(0x275)])+'\x20':'',_0x7e839f=_0x3901e0=='market'?_0xab6123(0x248):config[_0xab6123(0x22f)]==_0xab6123(0x183)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x3901e0==_0xab6123(0x1bb))logHistory(_0xab6123(0x23d),''+_0x186936+_0x7e839f+_0xab6123(0x18c)+_0x362687+'\x20'+_0x4ae457+'\x20#'+formatResult(_0x205208[_0xab6123(0x227)],0x8)+'\x20@'+formatResult(_0x205208[_0xab6123(0x205)],0x8));else logHistory(_0xab6123(0x23d),''+_0x186936+_0x7e839f+'\x20order:\x20'+_0x362687+'\x20'+_0x4ae457+'\x20#'+formatResult(_0x205208[_0xab6123(0x261)],0x8)+'\x20@'+formatResult(_0x205208[_0xab6123(0x205)],0x8));_0x205208[_0xab6123(0x1e9)]=_0x2adb46[_0xab6123(0x1e9)],await updateCoinResults(_0x205208);if(config[_0xab6123(0x21f)]!=0x0){let _0x81711d=null;if(cooldownTracker['length']==config[_0xab6123(0x21f)]-0x1)_0x81711d=cooldownTracker[_0xab6123(0x1ba)]();const _0x3b9116=getTimeStamp();cooldownTracker[_0xab6123(0x185)](_0x3b9116);if(_0x81711d){const _0x33d90f=fns[_0xab6123(0x215)](new Date(_0x3b9116),new Date(_0x81711d));_0x33d90f<cooldownInterval&&(logHistory(_0xab6123(0x20a),_0xab6123(0x17c)+config['cooldown']+_0xab6123(0x28a)+cooldownInterval/0x3c+_0xab6123(0x1a9)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xf49f6d){if(_0xf49f6d[_0xab6123(0x1e4)]()[_0xab6123(0x1c1)](_0xab6123(0x1a3)))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x362687);else{if(_0xf49f6d[_0xab6123(0x1e4)]()[_0xab6123(0x1c1)](_0xab6123(0x274)))logHistory(_0xab6123(0x20a),'Order\x20amount\x20is\x20invalid:\x20'+_0x362687);else await handleError(_0xf49f6d,_0xab6123(0x203));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0xab6123(0x277)]&&(config[_0xab6123(0x22f)]==_0xab6123(0x1bb)?logHistory(_0xab6123(0x20a),_0xab6123(0x17f)):logHistory(_0xab6123(0x20a),_0xab6123(0x1a6)));else coolingDown&&(!config[_0xab6123(0x277)]&&logHistory(_0xab6123(0x20a),_0xab6123(0x1ef)));}}function logHistory(_0x56febe,_0x237de9,_0x5a8822=''){const _0x2c91f9=_0x4ee1e7;let _0x5aa64e={'time':getTimeStamp(),'type':_0x56febe,'event':_0x237de9,'botname':config[_0x2c91f9(0x25e)],'showname':config['showname']};dbLogs[_0x2c91f9(0x247)]('logs')[_0x2c91f9(0x185)](_0x5aa64e)[_0x2c91f9(0x1e0)]();if(_0x5a8822=='')_0x5a8822=_0x237de9;proxyEmit(_0x2c91f9(0x18e),{'log':_0x5aa64e,'summary':_0x5a8822}),process[_0x2c91f9(0x1b8)]({'telegram':_0x5aa64e}),logging(''+_0x5aa64e['event']);}function emitHistory(_0x15f773={}){const _0xdefbc2=_0x4ee1e7;Object[_0xdefbc2(0x1fd)](_0x15f773)['length']==0x0&&(_0x15f773={'type':[_0xdefbc2(0x23d),_0xdefbc2(0x18e)],'event':'','page':0x1});if(_0x15f773['type']['includes'](_0xdefbc2(0x18e)))_0x15f773[_0xdefbc2(0x267)][_0xdefbc2(0x22c)](_0x15f773[_0xdefbc2(0x267)]['indexOf']('event'),0x1,_0xdefbc2(0x20a),_0xdefbc2(0x188));if(dbLogs['has']('logs')[_0xdefbc2(0x1ca)]()){let _0x45a5f1=dbLogs[_0xdefbc2(0x247)](_0xdefbc2(0x1e7))[_0xdefbc2(0x1c3)](_0x4cb6dd=>{const _0x34245d=_0xdefbc2;if(_0x15f773[_0x34245d(0x267)][_0x34245d(0x271)]==0x0)return![];else return _0x15f773[_0x34245d(0x267)]['includes'](_0x4cb6dd[_0x34245d(0x267)]);})['filter'](_0xddf2a4=>{const _0x535ff2=_0xdefbc2;if(_0x15f773[_0x535ff2(0x18e)]=='')return!![];else return _0xddf2a4['event'][_0x535ff2(0x1d2)]()[_0x535ff2(0x1c1)](_0x15f773[_0x535ff2(0x18e)]['toLowerCase']());})[_0xdefbc2(0x226)]('time'),_0xdc6686=_0x45a5f1[_0xdefbc2(0x1ca)]()['length'];_0x45a5f1=_0x45a5f1[_0xdefbc2(0x217)]()[_0xdefbc2(0x22a)]((_0x15f773[_0xdefbc2(0x280)]-0x1)*logPageSize,_0x15f773[_0xdefbc2(0x280)]*logPageSize-0x1)[_0xdefbc2(0x217)]()[_0xdefbc2(0x1ca)](),proxyEmit(_0xdefbc2(0x1ea),{'logs':_0x45a5f1,'total':_0xdc6686});}else proxyEmit(_0xdefbc2(0x1ea),{'logs':[],'total':0x0});}async function pauseBot(_0x292d34){const _0x1b4f84=_0x4ee1e7,_0x5b9d2c=new Date()[_0x1b4f84(0x279)]();if(!lastBotPause)lastBotPause=new Date()[_0x1b4f84(0x279)](),consecutivePauses=0x1;else{if(_0x5b9d2c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x1b4f84(0x279)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x1b4f84(0x20a),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x292d34),botPaused=![],reset();}}async function handleError(_0x44f490,_0x3311a6,_0x486a90=''){const _0x5aba99=_0x4ee1e7;if(_0x44f490[_0x5aba99(0x1e4)]()[_0x5aba99(0x1c1)](_0x5aba99(0x268)))logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x1b4)),await pauseBot(pauseBotInterval);else{if(_0x44f490[_0x5aba99(0x1e4)]()[_0x5aba99(0x1c1)]('ExchangeNotAvailable'))logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x272)),await pauseBot(pauseBotInterval);else{if(_0x44f490['toString']()[_0x5aba99(0x1c1)](_0x5aba99(0x229)))logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x191)),await pauseBot(pauseBotInterval);else{if(_0x44f490['toString']()[_0x5aba99(0x1c1)](_0x5aba99(0x270)))logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x245)),logHistory(_0x5aba99(0x20a),_0x5aba99(0x281)),process[_0x5aba99(0x1b8)]({'stop':'kill'});else{if(_0x44f490[_0x5aba99(0x1e4)]()['includes'](_0x5aba99(0x1bd)))logHistory(_0x5aba99(0x20a),_0x3311a6+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5aba99(0x1b8)]({'stop':'kill'});else{if(_0x44f490['toString']()[_0x5aba99(0x1c1)](_0x5aba99(0x236)))logHistory('error',_0x3311a6+_0x5aba99(0x27d)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5aba99(0x1b8)]({'stop':'kill'});else{if(_0x44f490[_0x5aba99(0x1e4)]()['includes'](_0x5aba99(0x263)))logHistory('error',_0x3311a6+_0x5aba99(0x19f)),logHistory('error',_0x5aba99(0x281)),process[_0x5aba99(0x1b8)]({'stop':_0x5aba99(0x259)});else{if(_0x44f490[_0x5aba99(0x1e4)]()[_0x5aba99(0x1c1)]('InvalidNonce'))logHistory(_0x5aba99(0x20a),_0x3311a6+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':_0x5aba99(0x199)});else _0x44f490[_0x5aba99(0x1e4)]()[_0x5aba99(0x1c1)](_0x5aba99(0x23f))?logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x1f5)):(logHistory(_0x5aba99(0x20a),_0x3311a6+_0x5aba99(0x1b0)),logging(_0x3311a6+'\x20|\x20Error\x20details:\x20',_0x44f490),await pauseBot(pauseBotInterval));}}}}}}}}function _0x2529(_0x41b5b2,_0x226021){const _0x422bd1=_0x3aca();return _0x2529=function(_0x4d5a75,_0x1fd513){_0x4d5a75=_0x4d5a75-0x17b;let _0x3aca58=_0x422bd1[_0x4d5a75];return _0x3aca58;},_0x2529(_0x41b5b2,_0x226021);}function formatResult(_0x7db081,_0x5dae66){const _0x255383=_0x4ee1e7;return parseFloat(_0x7db081[_0x255383(0x1b5)](_0x5dae66));}function logging(_0x699dab,_0x49b13d=''){const _0x18413e=_0x4ee1e7;if(config[_0x18413e(0x24b)])console[_0x18413e(0x243)](getTimeStamp()+':\x20'+config[_0x18413e(0x25e)]+_0x18413e(0x238)+_0x699dab,_0x49b13d);else console[_0x18413e(0x243)](getTimeStamp()+_0x18413e(0x25b)+botID+_0x18413e(0x238)+_0x699dab,_0x49b13d);}function getServerTime(){const _0xf04ae2=_0x4ee1e7,_0x5e52da=new Date();return _0x5e52da[_0xf04ae2(0x1ff)]()+'/'+(_0x5e52da[_0xf04ae2(0x200)]()+0x1)[_0xf04ae2(0x1e4)]()[_0xf04ae2(0x224)](0x2,'0')+'/'+_0x5e52da[_0xf04ae2(0x244)]()[_0xf04ae2(0x1e4)]()[_0xf04ae2(0x224)](0x2,'0')+'\x20'+_0x5e52da['getHours']()['toString']()[_0xf04ae2(0x224)](0x2,'0')+':'+_0x5e52da[_0xf04ae2(0x189)]()[_0xf04ae2(0x1e4)]()[_0xf04ae2(0x224)](0x2,'0')+':'+_0x5e52da[_0xf04ae2(0x25f)]()[_0xf04ae2(0x1e4)]()[_0xf04ae2(0x224)](0x2,'0');}function getTimeStamp(){const _0x8679cd=_0x4ee1e7,_0x39cc4d=shiftedTime();return _0x39cc4d[_0x8679cd(0x1ff)]()+'/'+(_0x39cc4d[_0x8679cd(0x200)]()+0x1)[_0x8679cd(0x1e4)]()[_0x8679cd(0x224)](0x2,'0')+'/'+_0x39cc4d[_0x8679cd(0x244)]()[_0x8679cd(0x1e4)]()[_0x8679cd(0x224)](0x2,'0')+'\x20'+_0x39cc4d[_0x8679cd(0x195)]()[_0x8679cd(0x1e4)]()['padStart'](0x2,'0')+':'+_0x39cc4d['getMinutes']()[_0x8679cd(0x1e4)]()[_0x8679cd(0x224)](0x2,'0')+':'+_0x39cc4d[_0x8679cd(0x25f)]()[_0x8679cd(0x1e4)]()[_0x8679cd(0x224)](0x2,'0');}function getDate(){const _0x2c7376=_0x4ee1e7,_0x49f4ce=shiftedTime();return _0x49f4ce[_0x2c7376(0x1ff)]()+'/'+(_0x49f4ce['getMonth']()+0x1)[_0x2c7376(0x1e4)]()['padStart'](0x2,'0')+'/'+_0x49f4ce[_0x2c7376(0x244)]()[_0x2c7376(0x1e4)]()[_0x2c7376(0x224)](0x2,'0');}function getHour(){const _0x56e833=_0x4ee1e7,_0x9f3624=shiftedTime();return _0x9f3624['getHours']()[_0x56e833(0x1e4)]()[_0x56e833(0x224)](0x2,'0');}function sleep(_0x1c43cc){return new Promise(_0x2fe2fd=>setTimeout(_0x2fe2fd,_0x1c43cc));}function shiftedTime(){const _0xd51a70=_0x4ee1e7,_0x30fe58=new Date();let _0x509e9b=_0x30fe58;if(config&&config[_0xd51a70(0x27e)]!==0x0)_0x509e9b=fns[_0xd51a70(0x223)](_0x30fe58,{'hours':config[_0xd51a70(0x27e)]});return _0x509e9b;}