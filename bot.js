const _0x47c7eb=_0x4a45;(function(_0x541a2a,_0x212281){const _0x42845b=_0x4a45,_0x1dc9e2=_0x541a2a();while(!![]){try{const _0x4b289d=parseInt(_0x42845b(0x25f))/0x1*(-parseInt(_0x42845b(0x264))/0x2)+-parseInt(_0x42845b(0x207))/0x3*(-parseInt(_0x42845b(0x254))/0x4)+-parseInt(_0x42845b(0x1f5))/0x5+-parseInt(_0x42845b(0x1b4))/0x6+parseInt(_0x42845b(0x195))/0x7+-parseInt(_0x42845b(0x217))/0x8*(-parseInt(_0x42845b(0x234))/0x9)+parseInt(_0x42845b(0x21e))/0xa;if(_0x4b289d===_0x212281)break;else _0x1dc9e2['push'](_0x1dc9e2['shift']());}catch(_0x2f7924){_0x1dc9e2['push'](_0x1dc9e2['shift']());}}}(_0x5b43,0xdb346));const _0x1b625a=function(){let _0x648592=!![];return function(_0x333da5,_0x336325){const _0x1f9913=_0x648592?function(){const _0x13d8d2=_0x4a45;if(_0x336325){const _0x6d9f42=_0x336325[_0x13d8d2(0x193)](_0x333da5,arguments);return _0x336325=null,_0x6d9f42;}}:function(){};return _0x648592=![],_0x1f9913;};}(),_0xeab920=_0x1b625a(this,function(){const _0x32f880=_0x4a45;return _0xeab920[_0x32f880(0x16b)]()['search']('(((.+)+)+)+$')[_0x32f880(0x16b)]()[_0x32f880(0x197)](_0xeab920)[_0x32f880(0x17f)]('(((.+)+)+)+$');});_0xeab920();'use strict';const ccxt=require(_0x47c7eb(0x155)),low=require(_0x47c7eb(0x240)),FileSync=require(_0x47c7eb(0x23a)),fs=require('fs'),fns=require(_0x47c7eb(0x225)),{WebsocketClient,DefaultLogger}=require(_0x47c7eb(0x178)),Crypt=require('hybrid-crypto-js')[_0x47c7eb(0x221)];let exchange,wsClient;global[_0x47c7eb(0x17e)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x47c7eb(0x1ed))[_0x47c7eb(0x166)],botID=process[_0x47c7eb(0x228)][0x2]||_0x47c7eb(0x180),pattern=/^[0-9]{3}$/;if(!pattern[_0x47c7eb(0x172)](botID))return console[_0x47c7eb(0x250)](_0x47c7eb(0x164)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x47c7eb(0x1e9)](0x1);const userID=process[_0x47c7eb(0x228)][0x3]||'',configpath=userID?_0x47c7eb(0x218)+userID+'/':_0x47c7eb(0x218);!fs[_0x47c7eb(0x243)](configpath)&&fs[_0x47c7eb(0x1e0)](configpath);const configfile=configpath+_0x47c7eb(0x210)+botID+'-config.json',logfile=configpath+_0x47c7eb(0x210)+botID+_0x47c7eb(0x158),performancefile=configpath+_0x47c7eb(0x210)+botID+_0x47c7eb(0x205),coinresultsfile=configpath+_0x47c7eb(0x210)+botID+_0x47c7eb(0x16c),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x47c7eb(0x162)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x47c7eb(0x269)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x47c7eb(0x162)]({'bot':[]})[_0x47c7eb(0x269)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x47c7eb(0x162)]({'coins':[]})[_0x47c7eb(0x269)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x47c7eb(0x233),'symbol':_0x47c7eb(0x25c)},'usd':{'coin':_0x47c7eb(0x24a),'symbol':_0x47c7eb(0x17c)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x223985)=>{},'debug':(..._0x36f05e)=>{},'notice':(..._0x3e086a)=>{},'info':(..._0x59b742)=>{},'warning':(..._0xc746c4)=>{},'error':async function(..._0x1a9d91){const _0x255c1b=_0x47c7eb,_0x1e129=new Date()[_0x255c1b(0x252)]();if(!lastErrorShown||_0x1e129-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x255c1b(0x252)](),logHistory(_0x255c1b(0x1d4),'WebSockets('+consecutivePauses+_0x255c1b(0x1ba));let _0x456567='';if(_0x1a9d91[0x0])_0x456567+=_0x1a9d91[0x0];if(_0x1a9d91[0x1]&&_0x1a9d91[0x1][_0x255c1b(0x1d4)]&&_0x1a9d91[0x1]['error']['message'])_0x456567+='\x20-\x20'+_0x1a9d91[0x1][_0x255c1b(0x1d4)][_0x255c1b(0x1dd)];logging('WebSockets('+consecutivePauses+_0x255c1b(0x18e),''+_0x456567),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x47c7eb(0x232),'rsaStandard':_0x47c7eb(0x1c7)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x47c7eb(0x1a1)]!=config[_0x47c7eb(0x1a1)]&&updateTimeshift(settings[_0x47c7eb(0x1a1)]);process[_0x47c7eb(0x163)]({'started':_0x47c7eb(0x1e2)}),initializeProcessListeners();function proxyEmit(_0x20f721,_0x399a12=null){const _0x544e05=_0x47c7eb;process[_0x544e05(0x163)]({'function':_0x20f721,'args':_0x399a12},_0x29404c=>{});}function initializeProcessListeners(){const _0x5dde31=_0x47c7eb;process['on'](_0x5dde31(0x1dd),_0x124e7a=>{const _0x17caa0=_0x5dde31;switch(Object[_0x17caa0(0x1a3)](_0x124e7a)[0x0]){case'timeshift':_0x124e7a[_0x17caa0(0x1a1)]!=undefined&&(settings[_0x17caa0(0x1a1)]=_0x124e7a['timeshift'],updateTimeshift(settings[_0x17caa0(0x1a1)]));break;case _0x17caa0(0x15c):switch(_0x124e7a[_0x17caa0(0x15c)]){case _0x17caa0(0x1d0):initclient();break;case _0x17caa0(0x251):emitHistory(_0x124e7a['args']);break;case _0x17caa0(0x177):getPortfolio(_0x124e7a[_0x17caa0(0x1f6)]);break;case _0x17caa0(0x21f):storeConfiguration(_0x124e7a[_0x17caa0(0x1f6)]);break;case _0x17caa0(0x245):storeHeadless(_0x124e7a[_0x17caa0(0x1f6)]);break;case _0x17caa0(0x208):getStartingBalances();break;case _0x17caa0(0x220):placeOrder(_0x124e7a[_0x17caa0(0x1f6)]);break;case _0x17caa0(0x265):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x31b41f=_0x47c7eb;if(pidBalances)clearTimeout(pidBalances);if(config[_0x31b41f(0x248)]!=''){await initExchange(config[_0x31b41f(0x248)],config[_0x31b41f(0x181)]);let _0x445311=await loadSymbols();_0x445311&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0xa8a49a,_0x446584){const _0x265baf=_0x47c7eb,_0x184793=ccxt[config['exchange']];let _0x1b745b;switch(config[_0x265baf(0x1cf)]){case _0x265baf(0x178):_0x1b745b=_0x265baf(0x182);break;case'binanceus':_0x1b745b=_0x265baf(0x1f3);break;default:_0x1b745b=_0x265baf(0x182);}exchange=new _0x184793({'apiKey':_0xa8a49a,'secret':_0x446584,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0xa8a49a,'api_secret':_0x446584,'beautify':!![],'wsUrl':_0x1b745b},logger),config[_0x265baf(0x1cf)]==_0x265baf(0x16a)&&(stablecoins={'eur':{'coin':_0x265baf(0x21a),'symbol':'BTC/BUSD'},'usd':{'coin':_0x265baf(0x24a),'symbol':_0x265baf(0x17c)}});}async function loadSymbols(){const _0x495e40=_0x47c7eb;let _0x2b6d07;try{markets=await exchange[_0x495e40(0x17d)]();const _0x358ac6=[_0x495e40(0x1e7),_0x495e40(0x15e),'HOT/EUR'];allSymbols=exchange['symbols'][_0x495e40(0x1b2)](_0x5f29d3=>{let _0x15126a=![];return _0x358ac6['forEach'](_0x539399=>{const _0x2e958d=_0x4a45;if(_0x5f29d3[_0x2e958d(0x1b9)](_0x539399))_0x15126a=!![];}),!_0x15126a;}),_0x2b6d07=!![];}catch(_0x16a9fe){await handleError(_0x16a9fe,'loadSymbols()'),_0x2b6d07=![];}return _0x2b6d07;}async function initbot(){const _0x179154=_0x47c7eb;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1dcddb=dbCoinResults['get'](_0x179154(0x1b0))[_0x179154(0x23f)]();if(_0x1dcddb[_0x179154(0x20d)]==0x0)await resetCoinResults();}async function initclient(){const _0x34ab07=_0x47c7eb;proxyEmit(_0x34ab07(0x263),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x34ab07(0x175),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){wsinitialized=![];ws1&&(ws1['forEach'](_0x2d6d0f=>{const _0x3d8136=_0x4a45;try{wsClient[_0x3d8136(0x231)](_0x2d6d0f);}catch(_0x1d4485){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x2f6969){}ws2=null;}}async function initws(){const _0x2cd7d3=_0x47c7eb;cleanws();let _0x382cd7=[];currentCoins['forEach'](_0x10fe8f=>{const _0x57f617=_0x4a45;if(_0x10fe8f[_0x57f617(0x216)]!=config['basecoin'])_0x382cd7['push'](noslash(_0x10fe8f[_0x57f617(0x226)]));});if(!_0x382cd7['includes'](stablecoins[_0x2cd7d3(0x1a0)][_0x2cd7d3(0x216)]))_0x382cd7[_0x2cd7d3(0x20c)](stablecoins[_0x2cd7d3(0x1a0)]['coin']);if(!_0x382cd7['includes'](stablecoins[_0x2cd7d3(0x22f)][_0x2cd7d3(0x216)]))_0x382cd7['push'](stablecoins[_0x2cd7d3(0x22f)][_0x2cd7d3(0x216)]);if(!_0x382cd7[_0x2cd7d3(0x1b9)](_0x2cd7d3(0x267)+config[_0x2cd7d3(0x268)]))_0x382cd7[_0x2cd7d3(0x20c)](_0x2cd7d3(0x267)+config[_0x2cd7d3(0x268)]);try{_0x382cd7[_0x2cd7d3(0x157)]((_0xe8dced,_0x3f4421)=>{const _0x552401=_0x2cd7d3;ws1[_0x3f4421]=wsClient[_0x552401(0x1eb)](_0xe8dced,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x2cd7d3(0x161),_0x2aa3e6=>{const _0x40f750=_0x2cd7d3;if(!Array[_0x40f750(0x1d8)](_0x2aa3e6)&&!_0x2aa3e6[_0x40f750(0x24f)][_0x40f750(0x1b9)]('userData')){if(_0x2aa3e6[_0x40f750(0x249)]===_0x40f750(0x1cd)){global['ticker'][_0x2aa3e6[_0x40f750(0x1cd)][_0x40f750(0x226)]]=_0x2aa3e6[_0x40f750(0x1cd)][_0x40f750(0x188)];return;}}else{if(!Array[_0x40f750(0x1d8)](_0x2aa3e6)&&_0x2aa3e6[_0x40f750(0x24f)]['includes'](_0x40f750(0x260))){if(_0x2aa3e6[_0x40f750(0x174)][_0x40f750(0x1b9)]('spot')){updateNumberCoins(_0x2aa3e6);return;}}}}),wsClient['on'](_0x2cd7d3(0x1ac),async _0x4a7885=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x32b7f8){await handleError(_0x32b7f8,_0x2cd7d3(0x244));}let _0x5ccb2d,_0x56abbc=0x0;loading['remainingSymbols']=[];let _0x552d02=0x0;currentCoins['forEach'](_0x4c6e8a=>{const _0x2e906d=_0x2cd7d3;if(_0x4c6e8a[_0x2e906d(0x216)]!=config['basecoin'])loading[_0x2e906d(0x24c)][_0x2e906d(0x20c)](_0x4c6e8a['symbol']);}),loadingCanceled=![];while(_0x5ccb2d!=currentCoins[_0x2cd7d3(0x20d)]-0x1){_0x5ccb2d=0x0,currentCoins[_0x2cd7d3(0x157)](_0x2f891d=>{const _0x90694f=_0x2cd7d3;_0x2f891d['coin']!=config[_0x90694f(0x268)]&&global[_0x90694f(0x17e)][noslash(_0x2f891d[_0x90694f(0x226)])]&&(loading['remainingSymbols']=loading['remainingSymbols'][_0x90694f(0x1b2)](_0x538f78=>_0x538f78!=_0x2f891d[_0x90694f(0x226)]),_0x5ccb2d++);}),loading[_0x2cd7d3(0x186)]=Math[_0x2cd7d3(0x24e)](_0x5ccb2d/(currentCoins[_0x2cd7d3(0x20d)]-0x1)*0x64);_0x552d02>0x1e*0x5&&(loading[_0x2cd7d3(0x184)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x5ccb2d!=_0x56abbc&&(_0x56abbc=_0x5ccb2d,emitLoadingProgress()),_0x552d02++,await sleep(0xc8);}if(_0x5ccb2d==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x44e96a=_0x47c7eb;let _0x2f3a54=0x0,_0x55a7aa=0x0;try{_0x2f3a54=global[_0x44e96a(0x17e)][stablecoins['eur']['coin']],_0x55a7aa=global['ticker'][stablecoins[_0x44e96a(0x22f)]['coin']];}catch(_0x5afcb2){await handleError(_0x5afcb2,'getFiat()');}return{'eur':Number(_0x2f3a54),'usd':Number(_0x55a7aa)};}async function setStartDatePerformance(_0x29e9ad){const _0x4e5357=_0x47c7eb,_0x4c7c16=fns[_0x4e5357(0x1fe)](new Date(_0x29e9ad[_0x4e5357(0x194)]),'yyyy/MM/dd');let _0x187534=[];_0x187534[stablecoins[_0x4e5357(0x1a0)][_0x4e5357(0x216)]]=await getCloses(stablecoins[_0x4e5357(0x1a0)][_0x4e5357(0x226)],new Date(_0x29e9ad['startdate']),0x1),_0x187534[stablecoins[_0x4e5357(0x22f)][_0x4e5357(0x216)]]=await getCloses(stablecoins[_0x4e5357(0x22f)][_0x4e5357(0x226)],new Date(_0x29e9ad[_0x4e5357(0x194)]),0x1);let _0x43025d,_0x413648=[];_0x29e9ad[_0x4e5357(0x1cb)]['forEach'](_0x59083e=>{const _0x5e810a=_0x4e5357;!_0x59083e[_0x5e810a(0x1e3)]&&_0x413648[_0x5e810a(0x20c)]({'coin':_0x59083e[_0x5e810a(0x216)],'number':_0x59083e[_0x5e810a(0x23e)],'price':_0x59083e[_0x5e810a(0x21c)]});}),_0x43025d={'date':_0x4c7c16,'eur':_0x187534[stablecoins['eur'][_0x4e5357(0x216)]][0x0],'usd':_0x187534[stablecoins[_0x4e5357(0x22f)][_0x4e5357(0x216)]][0x0],'coins':_0x413648};let _0x4653b1=dbPerformance[_0x4e5357(0x1c5)](_0x4e5357(0x165))[_0x4e5357(0x201)]({'date':_0x4c7c16})[_0x4e5357(0x23f)]();_0x4653b1?dbPerformance['get'](_0x4e5357(0x165))['find']({'date':_0x4c7c16})['assign'](_0x43025d)[_0x4e5357(0x269)]():dbPerformance[_0x4e5357(0x1c5)](_0x4e5357(0x165))[_0x4e5357(0x20c)](_0x43025d)['write'](),_0x4653b1=dbPerformance[_0x4e5357(0x1c5)](_0x4e5357(0x165))['sortBy'](_0x4e5357(0x1dc))['value'](),_0x4653b1[_0x4e5357(0x157)](_0x4d700e=>{const _0x5820a8=_0x4e5357;_0x4d700e[_0x5820a8(0x1dc)]<_0x4c7c16&&dbPerformance[_0x5820a8(0x1c5)]('data')[_0x5820a8(0x236)]({'date':_0x4d700e[_0x5820a8(0x1dc)]})[_0x5820a8(0x269)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x5a6daa){const _0x14d2bc=_0x47c7eb;let _0x52af3b,_0x539be9=[];logHistory(_0x14d2bc(0x1b1),_0x14d2bc(0x1c2)),_0x5a6daa[_0x14d2bc(0x1cb)][_0x14d2bc(0x157)](_0x4c94ae=>{const _0x32c4fc=_0x14d2bc;if(_0x4c94ae['coin']!=config[_0x32c4fc(0x268)]&&!_0x4c94ae['excluded'])_0x539be9['push']({'coin':_0x4c94ae[_0x32c4fc(0x216)],'symbol':_0x4c94ae[_0x32c4fc(0x226)]});});let _0x3704eb=[];try{const _0x45e0aa=fns['format'](fns['parseISO'](_0x5a6daa[_0x14d2bc(0x194)][_0x14d2bc(0x19a)](/\//g,'-')),_0x14d2bc(0x15b));for(const _0x933f89 of _0x539be9){if(_0x933f89[_0x14d2bc(0x216)]!=config['basecoin'])_0x52af3b=await exchange[_0x14d2bc(0x168)](_0x933f89[_0x14d2bc(0x226)],Date[_0x14d2bc(0x192)](_0x45e0aa));_0x52af3b['forEach'](_0x3f5987=>{const _0x3317b7=_0x14d2bc,_0x491ea0=_0x933f89[_0x3317b7(0x226)][_0x3317b7(0x1b9)](config['basecoin']+'/'),_0x25c5fb=fns['format'](fns[_0x3317b7(0x22c)](_0x3f5987['datetime']),_0x3317b7(0x1aa)),_0x154939=fns[_0x3317b7(0x1fe)](fns['parseISO'](_0x3f5987['datetime']),_0x3317b7(0x20a));let _0xbbb4c0;if(_0x3f5987[_0x3317b7(0x21b)]==_0x3317b7(0x19b)&&_0x491ea0==![])_0xbbb4c0=_0x3f5987[_0x3317b7(0x235)];if(_0x3f5987[_0x3317b7(0x21b)]==_0x3317b7(0x19b)&&_0x491ea0==!![])_0xbbb4c0=-_0x3f5987['amount']*_0x3f5987[_0x3317b7(0x24b)];if(_0x3f5987['side']==_0x3317b7(0x1bd)&&_0x491ea0==![])_0xbbb4c0=-_0x3f5987['amount'];if(_0x3f5987[_0x3317b7(0x21b)]=='sell'&&_0x491ea0==!![])_0xbbb4c0=_0x3f5987[_0x3317b7(0x235)]*_0x3f5987[_0x3317b7(0x24b)];_0x3704eb['push']({'timestamp':_0x25c5fb,'date':_0x154939,'coin':_0x933f89[_0x3317b7(0x216)],'symbol':_0x933f89['symbol'],'type':_0x3f5987['type'],'side':_0x3f5987['side'],'reverse':_0x491ea0,'amount':formatResult(_0x3f5987[_0x3317b7(0x1ca)],0x8),'filled':formatResult(_0x3f5987[_0x3317b7(0x1ca)],0x8),'coinamount':formatResult(_0xbbb4c0,0x8),'price':formatResult(_0x3f5987['price'],0x8)});let _0x2e2daf;if(_0x3f5987[_0x3317b7(0x21b)]=='buy'&&_0x491ea0==![])_0x2e2daf=-_0x3f5987['amount']*_0x3f5987[_0x3317b7(0x24b)];if(_0x3f5987[_0x3317b7(0x21b)]==_0x3317b7(0x19b)&&_0x491ea0==!![])_0x2e2daf=_0x3f5987[_0x3317b7(0x235)];if(_0x3f5987[_0x3317b7(0x21b)]==_0x3317b7(0x1bd)&&_0x491ea0==![])_0x2e2daf=_0x3f5987[_0x3317b7(0x235)]*_0x3f5987[_0x3317b7(0x24b)];if(_0x3f5987['side']==_0x3317b7(0x1bd)&&_0x491ea0==!![])_0x2e2daf=-_0x3f5987[_0x3317b7(0x235)];_0x3704eb[_0x3317b7(0x20c)]({'date':_0x154939,'coin':config['basecoin'],'coinamount':formatResult(_0x2e2daf,0x8)});});}_0x3704eb[_0x14d2bc(0x227)]((_0x3c143a,_0x4bb6b5)=>_0x3c143a[_0x14d2bc(0x185)]>_0x4bb6b5[_0x14d2bc(0x185)]?0x1:_0x4bb6b5[_0x14d2bc(0x185)]>_0x3c143a['timestamp']?-0x1:0x0),dbLogs['get'](_0x14d2bc(0x1ad))[_0x14d2bc(0x236)]()['write'](),_0x3704eb[_0x14d2bc(0x157)](_0x371b2d=>{const _0x18015f=_0x14d2bc;let _0x1812fd;_0x371b2d[_0x18015f(0x216)]!=config['basecoin']&&(_0x1812fd={'time':_0x371b2d[_0x18015f(0x185)],'type':_0x18015f(0x1d5),'event':_0x18015f(0x259)+_0x371b2d[_0x18015f(0x226)]+'\x20'+_0x371b2d[_0x18015f(0x21b)]+'\x20#'+_0x371b2d[_0x18015f(0x235)]+'\x20@'+_0x371b2d[_0x18015f(0x24b)]},dbLogs[_0x18015f(0x1c5)](_0x18015f(0x1ad))[_0x18015f(0x20c)](_0x1812fd)[_0x18015f(0x269)]());});const _0x4701cf=fns[_0x14d2bc(0x1ee)]({'start':new Date(_0x5a6daa['startdate']),'end':new Date()})[_0x14d2bc(0x239)](_0x3e1c0f=>fns['format'](_0x3e1c0f,'yyyy/MM/dd'));let _0x250f51=[];_0x5a6daa[_0x14d2bc(0x1cb)]['forEach'](_0x5d64dc=>{const _0x5daf30=_0x14d2bc;if(!_0x5d64dc[_0x5daf30(0x1e3)]){_0x250f51[_0x5d64dc['coin']]=[];let _0x2910ef=_0x5d64dc['startnumber'];_0x4701cf[_0x5daf30(0x157)]((_0x5ad6fc,_0x4bfa05)=>{const _0x3b3a7f=_0x5daf30;let _0x19f213=_0x3704eb[_0x3b3a7f(0x1b2)](_0x3c7c65=>_0x3c7c65[_0x3b3a7f(0x216)]==_0x5d64dc[_0x3b3a7f(0x216)]&&_0x3c7c65['date']==_0x5ad6fc);if(_0x19f213[_0x3b3a7f(0x20d)]!=0x0){let _0x253da3=_0x19f213[_0x3b3a7f(0x159)]((_0x4df496,_0x297bc8)=>{return _0x4df496+=_0x297bc8['coinamount'],_0x4df496;},0x0);_0x2910ef+=_0x253da3;}_0x250f51[_0x5d64dc[_0x3b3a7f(0x216)]][_0x5ad6fc]=_0x2910ef;});}});const _0x4e5a84=[..._0x539be9];_0x4e5a84['push']({'coin':stablecoins[_0x14d2bc(0x1a0)][_0x14d2bc(0x216)],'symbol':stablecoins['eur'][_0x14d2bc(0x226)]}),_0x4e5a84[_0x14d2bc(0x20c)]({'coin':stablecoins[_0x14d2bc(0x22f)]['coin'],'symbol':stablecoins[_0x14d2bc(0x22f)][_0x14d2bc(0x226)]});let _0x16fe2e=[];for(const _0x516d1e of _0x4e5a84){_0x16fe2e[_0x516d1e[_0x14d2bc(0x216)]]=await getCloses(_0x516d1e[_0x14d2bc(0x226)],new Date(_0x5a6daa['startdate']));}dbPerformance[_0x14d2bc(0x1c5)](_0x14d2bc(0x165))[_0x14d2bc(0x236)]()[_0x14d2bc(0x269)](),_0x4701cf[_0x14d2bc(0x157)]((_0x5c7173,_0x1f5dac)=>{const _0x11d9d8=_0x14d2bc;let _0x448525,_0x5908c5=[];_0x1f5dac==0x0?(_0x5a6daa[_0x11d9d8(0x1cb)][_0x11d9d8(0x157)](_0x18809c=>{const _0x1c6bcb=_0x11d9d8;!_0x18809c[_0x1c6bcb(0x1e3)]&&_0x5908c5[_0x1c6bcb(0x20c)]({'coin':_0x18809c[_0x1c6bcb(0x216)],'number':_0x18809c[_0x1c6bcb(0x23e)],'price':_0x18809c[_0x1c6bcb(0x21c)]});}),_0x448525={'date':_0x5c7173,'eur':_0x16fe2e[stablecoins[_0x11d9d8(0x1a0)][_0x11d9d8(0x216)]][_0x1f5dac],'usd':_0x16fe2e[stablecoins[_0x11d9d8(0x22f)]['coin']][_0x1f5dac],'coins':_0x5908c5}):(_0x5a6daa[_0x11d9d8(0x1cb)][_0x11d9d8(0x157)](_0x46a9d0=>{const _0x1591c5=_0x11d9d8;!_0x46a9d0[_0x1591c5(0x1e3)]&&_0x5908c5['push']({'coin':_0x46a9d0[_0x1591c5(0x216)],'number':_0x250f51[_0x46a9d0[_0x1591c5(0x216)]][_0x5c7173],'price':_0x46a9d0['coin']==config[_0x1591c5(0x268)]?0x1:_0x16fe2e[_0x46a9d0['coin']][_0x1f5dac]});}),_0x448525={'date':_0x5c7173,'eur':_0x16fe2e[stablecoins[_0x11d9d8(0x1a0)][_0x11d9d8(0x216)]][_0x1f5dac],'usd':_0x16fe2e[stablecoins[_0x11d9d8(0x22f)][_0x11d9d8(0x216)]][_0x1f5dac],'coins':_0x5908c5}),dbPerformance[_0x11d9d8(0x1c5)](_0x11d9d8(0x165))[_0x11d9d8(0x20c)](_0x448525)[_0x11d9d8(0x269)]();}),emitPerformance(),await resetCoinResults();for(let _0x390e72 of _0x3704eb){_0x390e72[_0x14d2bc(0x216)]!=config[_0x14d2bc(0x268)]&&await updateCoinResults(_0x390e72);}logHistory(_0x14d2bc(0x1b1),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x72634a){await handleError(_0x72634a,_0x14d2bc(0x24d));}}async function getCloses(_0xb50a43,_0x4a34a5,_0x1b563e=undefined){const _0x102a5f=_0x47c7eb,_0x4cb078='1d';let _0x13f338,_0x3ea8a3;const _0x393cfe=fns[_0x102a5f(0x242)](new Date(),_0x4a34a5)+0x1;try{const _0x5d6f8f=exchange['milliseconds']()-_0x393cfe*0x18*0xe10*0x3e8;_0x13f338=await exchange[_0x102a5f(0x209)](_0xb50a43,_0x4cb078,_0x5d6f8f,_0x1b563e),_0x3ea8a3=await exchange[_0x102a5f(0x247)](_0xb50a43);}catch(_0x41623e){await handleError(_0x41623e,_0x102a5f(0x1ce));}let _0x3285ea=ohlcvToCloses(_0x13f338);return _0x3285ea['push'](_0x3ea8a3[_0xb50a43]['last']),_0x3285ea;}function ohlcvToCloses(_0x4e929f){let _0x564615=[];return _0x4e929f['forEach'](function(_0x3513a3){const _0x48091d=_0x4a45;_0x564615[_0x48091d(0x20c)](_0x3513a3[0x4]);}),_0x564615;}function getConfiguration(_0xd95611){const _0x31570e=_0x47c7eb;let _0x2ba4d8=dbConfig[_0x31570e(0x1c5)](_0x31570e(0x237))[_0x31570e(0x201)]({'botID':_0xd95611})[_0x31570e(0x23f)]();if(_0x2ba4d8){let _0x38071f=![];!_0x2ba4d8[_0x31570e(0x1cf)]&&(_0x2ba4d8={..._0x2ba4d8,'exchange':_0x31570e(0x178)},_0x38071f=!![]),!_0x2ba4d8[_0x31570e(0x268)]&&(_0x2ba4d8={..._0x2ba4d8,'basecoin':'BTC'},_0x38071f=!![]),!_0x2ba4d8[_0x31570e(0x1b8)]&&(_0x2ba4d8={..._0x2ba4d8,'ordertype':_0x31570e(0x16f)},_0x38071f=!![]),!_0x2ba4d8['timeout']&&(_0x2ba4d8={..._0x2ba4d8,'timeout':0x14},_0x38071f=!![]),!_0x2ba4d8['emojibuy']&&(_0x2ba4d8={..._0x2ba4d8,'emojibuy':''},_0x38071f=!![]),!_0x2ba4d8[_0x31570e(0x230)]&&(_0x2ba4d8={..._0x2ba4d8,'emojisell':''},_0x38071f=!![]),!_0x2ba4d8[_0x31570e(0x204)]&&(_0x2ba4d8={..._0x2ba4d8,'showname':![]},_0x38071f=!![]),_0x38071f&&(_0x2ba4d8={'botID':_0x2ba4d8['botID'],'exchange':_0x2ba4d8[_0x31570e(0x1cf)],'apiKey':_0x2ba4d8[_0x31570e(0x248)],'apiSecret':_0x2ba4d8[_0x31570e(0x181)],'basecoin':_0x2ba4d8[_0x31570e(0x268)],'botname':_0x2ba4d8[_0x31570e(0x1b7)],'showname':_0x2ba4d8[_0x31570e(0x204)],'threshold':_0x2ba4d8[_0x31570e(0x1df)],'ordertype':_0x2ba4d8[_0x31570e(0x1b8)],'timeout':_0x2ba4d8[_0x31570e(0x184)],'startdate':_0x2ba4d8[_0x31570e(0x194)],'recreate':_0x2ba4d8['recreate'],'timeshift':_0x2ba4d8[_0x31570e(0x1a1)],'headless':_0x2ba4d8['headless'],'cooldown':_0x2ba4d8[_0x31570e(0x1bb)],'emojibuy':_0x2ba4d8[_0x31570e(0x211)],'emojisell':_0x2ba4d8['emojisell'],'portfolio':_0x2ba4d8[_0x31570e(0x1cb)]},dbConfig[_0x31570e(0x1c5)](_0x31570e(0x237))['remove']()[_0x31570e(0x269)](),dbConfig[_0x31570e(0x1c5)](_0x31570e(0x237))[_0x31570e(0x20c)](_0x2ba4d8)[_0x31570e(0x269)]());}else _0x2ba4d8={'botID':_0xd95611,'exchange':_0x31570e(0x178),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x31570e(0x214)+_0xd95611,'showname':![],'threshold':'3','ordertype':_0x31570e(0x16f),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x31570e(0x1a1)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2ba4d8;}function emittedConfiguration(){const _0x3a3691=_0x47c7eb;let _0x565746;return config[_0x3a3691(0x248)]==''?_0x565746=config:_0x565746={...config,'apiKey':_0x3a3691(0x15a),'apiSecret':_0x3a3691(0x15a)},_0x565746;}function getSettings(){const _0x5b5b28=_0x47c7eb;return dbSettings['get'](_0x5b5b28(0x253))[_0x5b5b28(0x23f)]();}function getSecure(){const _0x2ed1a2=_0x47c7eb;return dbSecure[_0x2ed1a2(0x1c5)](_0x2ed1a2(0x25a))['value']()||{};}function updateTimeshift(_0x416b01){const _0x5ca88a=_0x47c7eb;let _0x4d3526=dbConfig[_0x5ca88a(0x1c5)]('bot')[_0x5ca88a(0x201)]({'botID':botID})['value']();_0x4d3526&&dbConfig[_0x5ca88a(0x1c5)]('bot')[_0x5ca88a(0x201)]({'botID':botID})[_0x5ca88a(0x16d)]({'timeshift':_0x416b01})[_0x5ca88a(0x269)](),config['timeshift']=_0x416b01,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3331df){const _0x2096a4=_0x47c7eb;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x3abe93=dbConfig[_0x2096a4(0x1c5)](_0x2096a4(0x237))[_0x2096a4(0x201)]({'botID':botID})[_0x2096a4(0x23f)]();_0x3331df={..._0x3331df,'apiKey':crypt[_0x2096a4(0x1ff)](secure['privateKey'],_0x3331df[_0x2096a4(0x248)])[_0x2096a4(0x1dd)],'apiSecret':crypt[_0x2096a4(0x1ff)](secure['privateKey'],_0x3331df['apiSecret'])[_0x2096a4(0x1dd)]};if(_0x3abe93){if(_0x3331df[_0x2096a4(0x248)]==_0x2096a4(0x15a))_0x3331df[_0x2096a4(0x248)]=config[_0x2096a4(0x248)];if(_0x3331df[_0x2096a4(0x181)]==_0x2096a4(0x15a))_0x3331df[_0x2096a4(0x181)]=config[_0x2096a4(0x181)];dbConfig['get'](_0x2096a4(0x237))[_0x2096a4(0x201)]({'botID':botID})['assign'](_0x3331df)[_0x2096a4(0x269)]();}else dbConfig[_0x2096a4(0x1c5)]('bot')[_0x2096a4(0x20c)](_0x3331df)['write'](),process[_0x2096a4(0x163)]({'status':_0x2096a4(0x19d),'live':_0x2096a4(0x1e2)});config={..._0x3331df};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x2096a4(0x163)]({'botname':_0x3331df[_0x2096a4(0x1b7)]}),proxyEmit(_0x2096a4(0x1c0)),reset();}async function storeHeadless(_0x594cd6){const _0x37200e=_0x47c7eb,_0x5ae1d9={...config,'headless':_0x594cd6[_0x37200e(0x1ea)]};let _0x251e36=dbConfig[_0x37200e(0x1c5)](_0x37200e(0x237))['find']({'botID':botID})[_0x37200e(0x23f)]();_0x251e36&&dbConfig[_0x37200e(0x1c5)](_0x37200e(0x237))['find']({'botID':botID})[_0x37200e(0x16d)](_0x5ae1d9)[_0x37200e(0x269)](),config={..._0x5ae1d9},proxyEmit(_0x37200e(0x263),emittedConfiguration());}function noslash(_0x2e83a1){const _0x331137=_0x47c7eb;return _0x2e83a1[_0x331137(0x19a)]('/','');}function updateNumberCoins(_0x314de4){const _0x4d20cc=_0x47c7eb;_0x314de4['eventType']&&_0x314de4[_0x4d20cc(0x249)]==_0x4d20cc(0x173)&&_0x314de4['balances']['forEach'](_0x9e8948=>{const _0x2552e7=_0x4d20cc;let _0x5466ec=currentCoins[_0x2552e7(0x201)](_0x1d7f35=>_0x1d7f35[_0x2552e7(0x216)]==_0x9e8948['asset']),_0x42a0c7=config[_0x2552e7(0x1cb)]['find'](_0x2668c6=>_0x2668c6['coin']==_0x9e8948[_0x2552e7(0x257)]);if(_0x5466ec&&_0x42a0c7)_0x5466ec[_0x2552e7(0x20b)]=Math[_0x2552e7(0x187)](Number(_0x9e8948[_0x2552e7(0x1d7)])+(_0x42a0c7[_0x2552e7(0x18a)]||0x0),0x0);});if(_0x314de4[_0x4d20cc(0x249)]&&_0x314de4[_0x4d20cc(0x249)]==_0x4d20cc(0x160)){if(_0x314de4[_0x4d20cc(0x171)]==_0x4d20cc(0x19c)&&_0x314de4[_0x4d20cc(0x16e)]==_0x4d20cc(0x1f7)){if(lastOrders)lastOrders[_0x4d20cc(0x157)](_0x3d32a0=>{const _0x44fe56=_0x4d20cc;if(_0x3d32a0[_0x44fe56(0x1bf)]==_0x314de4[_0x44fe56(0x1bf)]){if(_0x3d32a0['reverse'])_0x3d32a0[_0x44fe56(0x1ca)]=_0x314de4['accumulatedQuantity']*_0x3d32a0[_0x44fe56(0x24b)];else _0x3d32a0['filled']=_0x314de4[_0x44fe56(0x256)];}});}}}async function getCoins(_0xe0d9d1=!![],_0x468d46=config[_0x47c7eb(0x268)]){const _0x1cf3e0=_0x47c7eb;let _0x2a80ce,_0x3a3a64=[],_0x457f03=[],_0x5d90a5=[];try{_0x2a80ce=await exchange[_0x1cf3e0(0x1e6)](),mybalances=_0x2a80ce[_0x1cf3e0(0x21d)];if(!_0xe0d9d1)for(const [_0x4b53d5,_0x5de7da]of Object[_0x1cf3e0(0x1a9)](mybalances)){_0x5d90a5[_0x1cf3e0(0x20c)](_0x4b53d5);}else config['portfolio'][_0x1cf3e0(0x157)](_0x1d2b7a=>{const _0x5669c6=_0x1cf3e0;if(!_0x1d2b7a['excluded'])_0x5d90a5[_0x5669c6(0x20c)](_0x1d2b7a[_0x5669c6(0x216)]);});if(_0x468d46=='')for(const [_0xfc4be3,_0x1f0519]of Object[_0x1cf3e0(0x1a9)](mybalances)){_0x1f0519[_0x1cf3e0(0x16b)]()!=0x0&&_0x457f03[_0x1cf3e0(0x20c)]({'coin':_0xfc4be3});}else for(const [_0xfb127a,_0x5d1136]of Object[_0x1cf3e0(0x1a9)](mybalances)){if(_0x5d90a5[_0x1cf3e0(0x1b9)](_0xfb127a)){const _0x90c35d=config[_0x1cf3e0(0x1cb)][_0x1cf3e0(0x201)](_0x251750=>_0x251750[_0x1cf3e0(0x216)]==_0xfb127a);if((_0x5d1136[_0x1cf3e0(0x16b)]()!=0x0||_0x90c35d)&&(allSymbols[_0x1cf3e0(0x1b9)](_0xfb127a+'/'+_0x468d46)||_0xfb127a==_0x468d46))_0x457f03[_0x1cf3e0(0x20c)]({'coin':_0xfb127a,'symbol':_0xfb127a+'/'+_0x468d46,'reverse':![],'number':Math[_0x1cf3e0(0x187)](_0x5d1136+(_0x90c35d&&_0x90c35d['offset']||0x0),0x0)}),_0xfb127a!=_0x468d46&&_0x3a3a64[_0x1cf3e0(0x20c)](_0xfb127a+'/'+_0x468d46);else(_0x5d1136['toString']()!=0x0||_0x90c35d)&&allSymbols['includes'](_0x468d46+'/'+_0xfb127a)&&(_0x457f03['push']({'coin':_0xfb127a,'symbol':_0x468d46+'/'+_0xfb127a,'reverse':!![],'number':Math['max'](_0x5d1136+(_0x90c35d&&_0x90c35d[_0x1cf3e0(0x18a)]||0x0),0x0)}),_0xfb127a!=_0x468d46&&_0x3a3a64[_0x1cf3e0(0x20c)](_0x468d46+'/'+_0xfb127a));}}}catch(_0x3bf5ae){if(!_0xe0d9d1){if(_0x3bf5ae[_0x1cf3e0(0x16b)]()[_0x1cf3e0(0x1b9)](_0x1cf3e0(0x199)))return logHistory(_0x1cf3e0(0x1d4),_0x1cf3e0(0x191)),![];else{if(_0x3bf5ae[_0x1cf3e0(0x16b)]()[_0x1cf3e0(0x1b9)]('AuthenticationError'))return logHistory(_0x1cf3e0(0x1d4),_0x1cf3e0(0x1e1)),![];else{if(_0x3bf5ae[_0x1cf3e0(0x16b)]()[_0x1cf3e0(0x1b9)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x1cf3e0(0x1d4),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x3bf5ae,'getCoins()');}}}else await handleError(_0x3bf5ae,_0x1cf3e0(0x1c6));}return _0x457f03;}function _0x4a45(_0x4240a5,_0x3a0c38){const _0x10329e=_0x5b43();return _0x4a45=function(_0xeab920,_0x1b625a){_0xeab920=_0xeab920-0x155;let _0x5b43e7=_0x10329e[_0xeab920];return _0x5b43e7;},_0x4a45(_0x4240a5,_0x3a0c38);}async function getPortfolio(_0x1c862c){const _0x4cc0e1=_0x47c7eb;let _0x35c119=[],_0x208b87=[],_0x1cf18f,_0x3e8ff5=[],_0x4854d2,_0xe474ff;_0x1c862c[_0x4cc0e1(0x248)]===_0x4cc0e1(0x15a)||_0x1c862c['apiSecret']===_0x4cc0e1(0x15a)?(_0x4854d2=config[_0x4cc0e1(0x248)],_0xe474ff=config[_0x4cc0e1(0x181)]):(_0x4854d2=_0x1c862c[_0x4cc0e1(0x248)],_0xe474ff=_0x1c862c[_0x4cc0e1(0x181)]);await initExchange(_0x4854d2,_0xe474ff);let _0x4444f5=await loadSymbols();if(_0x4444f5){_0x3e8ff5=await getCoins(![],_0x1c862c['basecoin']);if(_0x3e8ff5===![])proxyEmit(_0x4cc0e1(0x1cb),![]);else{if(_0x1c862c[_0x4cc0e1(0x268)]=='')proxyEmit('portfolio',_0x3e8ff5);else{_0x3e8ff5[_0x4cc0e1(0x157)](_0x3d5009=>{const _0x3f2014=_0x4cc0e1;_0x35c119[_0x3f2014(0x20c)](_0x3d5009[_0x3f2014(0x226)]);});try{_0x208b87=await exchange[_0x4cc0e1(0x247)](_0x35c119);}catch(_0x39b424){await handleError(_0x39b424,_0x4cc0e1(0x241));}_0x3e8ff5[_0x4cc0e1(0x157)](_0x1c869b=>{const _0x105a5c=_0x4cc0e1;_0x1c869b[_0x105a5c(0x216)]!=_0x1c862c[_0x105a5c(0x268)]?_0x1cf18f=_0x1c869b[_0x105a5c(0x258)]?0x1/_0x208b87[_0x1c869b[_0x105a5c(0x226)]][_0x105a5c(0x20e)]:_0x208b87[_0x1c869b['symbol']][_0x105a5c(0x20e)]:_0x1cf18f=0x1,_0x1c869b[_0x105a5c(0x24b)]=formatResult(_0x1cf18f,0x8);}),proxyEmit(_0x4cc0e1(0x1cb),_0x3e8ff5);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x556a97){const _0x4abefe=_0x47c7eb;let _0x102274=!![];const _0xb016e6=!_0x556a97[_0x4abefe(0x258)]?markets[_0x556a97[_0x4abefe(0x226)]][_0x4abefe(0x18c)]['amount'][_0x4abefe(0x203)]:markets[_0x556a97[_0x4abefe(0x226)]][_0x4abefe(0x18c)][_0x4abefe(0x206)][_0x4abefe(0x203)],_0x22fd23=!_0x556a97[_0x4abefe(0x258)]?markets[_0x556a97[_0x4abefe(0x226)]][_0x4abefe(0x18c)][_0x4abefe(0x206)][_0x4abefe(0x203)]:markets[_0x556a97[_0x4abefe(0x226)]]['limits'][_0x4abefe(0x235)][_0x4abefe(0x203)];if(Math['abs'](_0x556a97[_0x4abefe(0x1ef)])<_0xb016e6)_0x102274=![];if(Math['abs'](_0x556a97[_0x4abefe(0x1ef)])*_0x556a97[_0x4abefe(0x20e)]<_0x22fd23)_0x102274=![];return _0x102274;}async function getBalances(){const _0x5f2928=_0x47c7eb;let _0x5c2d01=0x0,_0x3c3fbc;const _0x372ba8=config[_0x5f2928(0x1df)];currentCoins[_0x5f2928(0x157)](_0x2a56f7=>{const _0x4e59ee=_0x5f2928;if(_0x2a56f7[_0x4e59ee(0x216)]!=config[_0x4e59ee(0x268)]){let _0x3a9c09=global[_0x4e59ee(0x17e)][noslash(_0x2a56f7[_0x4e59ee(0x226)])];_0x3c3fbc=_0x2a56f7['reverse']?0x1/_0x3a9c09:_0x3a9c09;}else _0x3c3fbc=0x1;let _0x4a0bd2=_0x2a56f7[_0x4e59ee(0x20b)]*_0x3c3fbc;_0x5c2d01+=_0x4a0bd2,_0x2a56f7['last']=formatResult(Number(_0x3c3fbc),0x8),_0x2a56f7['value']=_0x4a0bd2;}),currentCoins[_0x5f2928(0x157)](_0x51963d=>{const _0xe5e5bc=_0x5f2928;let _0x3c9a0b=config['portfolio'][_0xe5e5bc(0x201)](_0x20d79b=>_0x20d79b['coin']==_0x51963d['coin']),_0x2ffa21=Number(_0x3c9a0b[_0xe5e5bc(0x1ec)]),_0x40acb2=_0x51963d[_0xe5e5bc(0x23f)]/_0x5c2d01*0x64,_0x1ef19b=_0x2ffa21*_0x5c2d01/0x64/_0x51963d[_0xe5e5bc(0x20e)]-_0x51963d[_0xe5e5bc(0x20b)];_0x51963d[_0xe5e5bc(0x1ec)]=formatResult(_0x40acb2,0x3),_0x51963d[_0xe5e5bc(0x1d1)]=formatResult(_0x2ffa21,0x3),_0x51963d[_0xe5e5bc(0x1ef)]=formatResult(_0x1ef19b,0x8),_0x51963d['side']='',_0x51963d['valid']='';if(_0x51963d['coin']!=config[_0xe5e5bc(0x268)]){if(_0x51963d['distribution']>_0x2ffa21)_0x51963d[_0xe5e5bc(0x21b)]='sell',_0x51963d[_0xe5e5bc(0x167)]=checkMinimums(_0x51963d);else _0x51963d['distribution']<_0x2ffa21&&(_0x51963d[_0xe5e5bc(0x21b)]=_0xe5e5bc(0x19b),_0x51963d['valid']=checkMinimums(_0x51963d));}_0x51963d[_0xe5e5bc(0x1b3)]=_0x51963d[_0xe5e5bc(0x1ec)]/_0x51963d[_0xe5e5bc(0x1d1)]-0x1;}),currentCoins[_0x5f2928(0x227)]((_0x1a1834,_0x450b4a)=>_0x1a1834[_0x5f2928(0x1b3)]<_0x450b4a[_0x5f2928(0x1b3)]?0x1:_0x450b4a[_0x5f2928(0x1b3)]<_0x1a1834[_0x5f2928(0x1b3)]?-0x1:0x0);const _0x33b142=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x33b142[_0x5f2928(0x1a0)],'usd':_0x33b142['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x372ba8},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x372ba8});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1e3d8f=_0x47c7eb;if(!lastBalances)return;let _0x5cb24f=await getStartingBalances(![]),_0xec0c98=[],_0x43065e;JSON[_0x1e3d8f(0x192)](lastBalances['portfolio'])[_0x1e3d8f(0x157)](_0x29c1a0=>{const _0x130551=_0x1e3d8f;let _0x3d9457={'coin':_0x29c1a0['coin'],'number':_0x29c1a0[_0x130551(0x20b)],'price':_0x29c1a0[_0x130551(0x20e)]};_0xec0c98['push'](_0x3d9457);});const _0x23be2f=await getFiat();_0x43065e={'date':lastBalances[_0x1e3d8f(0x23d)][_0x1e3d8f(0x25b)]('\x20')[0x0],'eur':_0x23be2f['eur'],'usd':_0x23be2f[_0x1e3d8f(0x22f)],'coins':_0xec0c98};let _0x3629ab=dbPerformance['get'](_0x1e3d8f(0x165))[_0x1e3d8f(0x201)]({'date':_0x43065e['date']})[_0x1e3d8f(0x23f)]();_0x3629ab?dbPerformance[_0x1e3d8f(0x1c5)](_0x1e3d8f(0x165))[_0x1e3d8f(0x201)]({'date':_0x43065e[_0x1e3d8f(0x1dc)]})[_0x1e3d8f(0x16d)](_0x43065e)[_0x1e3d8f(0x269)]():dbPerformance[_0x1e3d8f(0x1c5)](_0x1e3d8f(0x165))[_0x1e3d8f(0x20c)](_0x43065e)[_0x1e3d8f(0x269)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0xa26967=_0x47c7eb;if(dbPerformance[_0xa26967(0x190)](_0xa26967(0x165))['value']()){let _0x2bc49d=dbPerformance['get'](_0xa26967(0x165))[_0xa26967(0x17a)](_0xa26967(0x1dc))['value']();proxyEmit(_0xa26967(0x1d6),_0x2bc49d),lastPerformanceEmitted=getDate();}else proxyEmit(_0xa26967(0x1d6),[]);}async function getStartingBalances(_0x2f1f12=!![]){const _0x574654=_0x47c7eb;let _0x286dd3=dbPerformance[_0x574654(0x1c5)](_0x574654(0x165))[_0x574654(0x201)]({'date':config[_0x574654(0x194)]})[_0x574654(0x23f)]();config[_0x574654(0x248)]!=''&&!_0x286dd3&&(await setStartDatePerformance(config),_0x286dd3=dbPerformance[_0x574654(0x1c5)](_0x574654(0x165))[_0x574654(0x201)]({'date':config[_0x574654(0x194)]})[_0x574654(0x23f)]());if(config[_0x574654(0x248)]==''||!_0x286dd3)return{};let _0x73900b=0x0,_0x32f606=0x0,_0x37d697=0x0,_0x1e5091=[],_0x270df3=0x0;config['portfolio'][_0x574654(0x157)](_0x59160a=>{const _0x1c87ad=_0x574654;if(!_0x59160a[_0x1c87ad(0x1e3)]){_0x1e5091[_0x270df3]={'coin':_0x59160a['coin'],'symbol':_0x59160a[_0x1c87ad(0x226)],'number':_0x59160a[_0x1c87ad(0x23e)],'price':_0x59160a[_0x1c87ad(0x21c)]},_0x73900b+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a['startnumber'];if(config['basecoin']==_0x1c87ad(0x1cc))_0x32f606+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a[_0x1c87ad(0x23e)]*_0x286dd3[_0x1c87ad(0x1a0)],_0x37d697+=_0x59160a['startprice']*_0x59160a[_0x1c87ad(0x23e)]*_0x286dd3[_0x1c87ad(0x22f)];else{if(config[_0x1c87ad(0x268)]==_0x1c87ad(0x1de)||config[_0x1c87ad(0x268)]==_0x1c87ad(0x1b5)||config[_0x1c87ad(0x268)]==_0x1c87ad(0x1a2))_0x32f606+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a[_0x1c87ad(0x23e)]*_0x286dd3['eur']/_0x286dd3[_0x1c87ad(0x22f)],_0x37d697+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a['startnumber'];else config['basecoin']==_0x1c87ad(0x1c8)&&(_0x32f606+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a[_0x1c87ad(0x23e)],_0x37d697+=_0x59160a[_0x1c87ad(0x21c)]*_0x59160a[_0x1c87ad(0x23e)]*_0x286dd3['usd']/_0x286dd3['eur']);}_0x270df3++;}});let _0x51975d={'basecoin':_0x73900b,'eur':_0x32f606,'usd':_0x37d697,'coins':_0x1e5091};if(_0x2f1f12)proxyEmit('starting-balances',_0x51975d);return _0x51975d;}function headlessMode(_0x1f9660){const _0x274f09=_0x47c7eb;let _0x2d5e59=_0x1f9660[_0x274f09(0x1cb)],_0x50f1ba=_0x1f9660[_0x274f09(0x1df)],_0x53221e=[];for(let _0x44d16a of _0x2d5e59){if(_0x44d16a[_0x274f09(0x216)]!=config[_0x274f09(0x268)]){if(_0x44d16a[_0x274f09(0x1ec)]/_0x44d16a['target']-0x1>=_0x50f1ba/0x64){if(_0x44d16a[_0x274f09(0x167)])_0x53221e[_0x274f09(0x20c)](_0x44d16a);}else{if(_0x44d16a[_0x274f09(0x1ec)]/_0x44d16a[_0x274f09(0x1d1)]-0x1<=-_0x50f1ba/0x64){if(_0x44d16a[_0x274f09(0x167)])_0x53221e['push'](_0x44d16a);}}}}_0x53221e['length']>0x0&&placeOrder(_0x53221e);}function symbolToCoin(_0x421db1){const _0x39d252=_0x47c7eb;let _0x32fdc9;if(_0x421db1[_0x39d252(0x1b9)]('/'+config[_0x39d252(0x268)]))_0x32fdc9=_0x421db1[_0x39d252(0x19a)]('/'+config[_0x39d252(0x268)],'');if(_0x421db1[_0x39d252(0x1b9)](config['basecoin']+'/'))_0x32fdc9=_0x421db1[_0x39d252(0x19a)](config[_0x39d252(0x268)]+'/','');return _0x32fdc9;}async function validateOrders(_0x3a9451=0x0){const _0x208d7a=_0x47c7eb;let _0x368c45=[],_0x2f0cd8=config[_0x208d7a(0x1b8)]==_0x208d7a(0x16f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x1ab508=>{const _0x279097=_0x208d7a;let _0xa5d6c3=previousCoins[_0x279097(0x201)](_0x3b7cff=>_0x3b7cff[_0x279097(0x216)]==symbolToCoin(_0x1ab508[_0x279097(0x226)])),_0x5ef50b=currentCoins[_0x279097(0x201)](_0x161f39=>_0x161f39[_0x279097(0x216)]==symbolToCoin(_0x1ab508['symbol'])),_0x34f54e,_0x66a66;_0x1ab508[_0x279097(0x21b)]==_0x279097(0x19b)&&!_0x1ab508[_0x279097(0x258)]||_0x1ab508[_0x279097(0x21b)]==_0x279097(0x1bd)&&_0x1ab508[_0x279097(0x258)]?(_0x34f54e=_0xa5d6c3[_0x279097(0x20b)]+0.9*_0x1ab508[_0x279097(0x1ca)],_0x66a66=_0xa5d6c3[_0x279097(0x20b)]+1.1*_0x1ab508['filled']):(_0x34f54e=_0xa5d6c3[_0x279097(0x20b)]-1.1*_0x1ab508[_0x279097(0x1ca)],_0x66a66=_0xa5d6c3['number']-0.9*_0x1ab508[_0x279097(0x1ca)]);const _0x257420=_0x1ab508[_0x279097(0x1ca)]!=0x0&&_0x5ef50b['number']>=_0x34f54e&&_0x5ef50b[_0x279097(0x20b)]<=_0x66a66;_0x368c45[_0x279097(0x20c)](_0x257420);if(_0x257420&&config[_0x279097(0x1b8)]!=_0x279097(0x16f)){if(_0x1ab508[_0x279097(0x258)])logHistory('order',_0x279097(0x222)+_0x1ab508['symbol']+'\x20'+_0x1ab508[_0x279097(0x21b)]+'\x20#'+formatResult(_0x1ab508[_0x279097(0x1ca)]/_0x1ab508[_0x279097(0x24b)],0x8)+'\x20@'+formatResult(_0x1ab508['price'],0x8));else logHistory('order','Order\x20filled:\x20'+_0x1ab508['symbol']+'\x20'+_0x1ab508[_0x279097(0x21b)]+'\x20#'+formatResult(_0x1ab508[_0x279097(0x1ca)],0x8)+'\x20@'+formatResult(_0x1ab508[_0x279097(0x24b)],0x8));}}),_0x368c45[_0x208d7a(0x157)]((_0x2e489e,_0x15097a)=>{const _0x45d24e=_0x208d7a;if(_0x2e489e)lastOrders[_0x45d24e(0x1fd)](_0x15097a,0x1);});if(_0x3a9451<_0x2f0cd8&&_0x368c45[_0x208d7a(0x1b9)](![])){if(_0x3a9451==0x0){config[_0x208d7a(0x1b8)]=='market'?logHistory(_0x208d7a(0x1d4),_0x208d7a(0x215)):logHistory('error',_0x208d7a(0x1a5));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3a9451);},0xa*0x3e8);}else{(_0x3a9451==0x1||_0x3a9451==Math[_0x208d7a(0x24e)](_0x2f0cd8/0x2)||_0x3a9451==_0x2f0cd8-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x3a9451);},validateOrderInterval);}}else{lockOrders=![];if(_0x3a9451>0x0&&!_0x368c45[_0x208d7a(0x1b9)](![]))config[_0x208d7a(0x1b8)]==_0x208d7a(0x16f)?logHistory(_0x208d7a(0x1b1),_0x208d7a(0x22a)):logHistory(_0x208d7a(0x1b1),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x3a9451>0x0&&_0x368c45[_0x208d7a(0x1b9)](![])&&(config[_0x208d7a(0x1b8)]==_0x208d7a(0x16f)?logHistory(_0x208d7a(0x1b1),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x2f0cd8*validateOrderInterval/0xea60)+_0x208d7a(0x17b)):(lastOrders[_0x208d7a(0x157)](async _0x22d758=>{const _0x5f2d42=_0x208d7a;try{const _0x134704=await exchange[_0x5f2d42(0x22d)](_0x22d758[_0x5f2d42(0x1bf)],_0x22d758['symbol']);}catch(_0x2cc749){if(_0x2cc749[_0x5f2d42(0x16b)]()[_0x5f2d42(0x1b9)](_0x5f2d42(0x23c))){}else await handleError(_0x2cc749,_0x5f2d42(0x224));}}),logHistory(_0x208d7a(0x1b1),_0x208d7a(0x1e5)+Math[_0x208d7a(0x24e)](_0x2f0cd8*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x5c565d=_0x47c7eb;dbCoinResults[_0x5c565d(0x1c5)]('coins')[_0x5c565d(0x236)]()[_0x5c565d(0x269)]();let _0x423835=await getStartingBalances(![]);_0x423835[_0x5c565d(0x1b0)][_0x5c565d(0x157)](_0x57e500=>{const _0x4e046b=_0x5c565d,_0x4370fc=_0x57e500[_0x4e046b(0x226)][_0x4e046b(0x1b9)](config[_0x4e046b(0x268)]+'/');if(_0x57e500[_0x4e046b(0x216)]!=config[_0x4e046b(0x268)]){let _0x96ef84={'coin':_0x57e500['coin'],'number':_0x57e500[_0x4e046b(0x20b)],'breakeven':_0x57e500[_0x4e046b(0x24b)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4e046b(0x1c5)]('coins')[_0x4e046b(0x20c)](_0x96ef84)['write']();}});}function _0x5b43(){const _0x568936=['Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Limit\x20(high-margin)','get','getCoins()','RSA-OAEP','EUR','Pausing\x20bot\x20for\x205\x20minutes\x20(','filled','portfolio','BTC','kline','getCloses()','exchange','initclient','target','InvalidNonce','event-history','error','order','performance','availableBalance','isArray','\x20order:\x20','limit-high','fees','date','message','BUSD','threshold','mkdirSync','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','running','excluded','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','Unfilled\x20order(s)\x20canceled\x20after\x20','fetchBalance','DAI/','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','exit','headless','subscribeSpotKline','distribution','./version.json','eachDayOfInterval','trade','breakeven','event','bid','wss://stream.binance.us:9443','getFullYear','3648280zweApj','args','FILLED','fee','getMonth','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','createOrder','splice','format','decrypt','kill','find','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','min','showname','-performance.json','cost','24dOVZqO','getStartingBalances','fetchOHLCV','yyyy/MM/dd','number','push','length','last','\x20>\x20','bot-','emojibuy','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','AuthenticationError','Bot\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','coin','377224BqCotc','./config/','RequestTimeout','BTCBUSD','side','startprice','total','21325090cZJdhN','storeConfiguration','placeOrder','Crypt','Order\x20filled:\x20','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cancelOrder()','date-fns','symbol','sort','argv','page','Order(s)\x20validated\x20-\x20balancing\x20resumed','MIN_NOTIONAL','parseISO','cancelOrder','Order\x20amount\x20is\x20invalid:\x20','usd','emojisell','closeWs','sha256','BTCEUR','54pEGmPG','amount','remove','bot','padStart','map','lowdb/adapters/FileSync','toLowerCase','OrderNotFound','time','startnumber','value','lowdb','getPortfolio()','differenceInCalendarDays','existsSync','initws()','storeHeadless','stringify','fetchTickers','apiKey','eventType','BTCUSDT','price','remainingSymbols','recreateHistory()','round','wsKey','log','emitHistory','getTime','settings','426296MhedwR','restart','accumulatedQuantity','asset','reverse','Order:\x20','secure','split','BTC/EUR','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fromCodePoint','5218mgGiGq','userData','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Invalid\x20quantity','configuration','302BcmHCq','cancelLoading','\x20hour','BNB','basecoin','write','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','ccxt','InsufficientFunds','forEach','-events.json','reduce','************','yyyy-MM-dd\x27T\x27HH:mm:ss','function',':\x20Bot\x20','HOT/BTC','type','executionReport','formattedMessage','defaults','send','Error:\x20Invalid\x20argument\x20','data','version','valid','fetchOrders','ask','binanceus','toString','-results.json','assign','orderStatus','market','getMinutes','orderType','test','outboundAccountPosition','wsMarket','balances','getHours','getPortfolio','binance','\x20|\x20Error\x20details:\x20','sortBy','\x20minutes\x20-\x20balancing\x20resumed','BTC/USDT','loadMarkets','ticker','search','001','apiSecret','wss://stream.binance.com:9443','DDoSProtection','timeout','timestamp','progress','max','close','sells','offset','limit-low','limits','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid',')\x20|\x20Error\x20details:\x20','abs','has','Binance\x20API\x20key\x20is\x20invalid','parse','apply','startdate','3353378TXtVTp','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','constructor','Market','API-key\x20format\x20invalid','replace','buy','LIMIT','enabled','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','realized','eur','timeshift','USDC','keys','differenceInSeconds','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20|\x20Unknown\x20error\x20occured','getDate','entries','yyyy/MM/dd\x20HH:mm:ss','getSeconds','reconnected','logs','slice','currency','coins','success','filter','delta','7989822wAmhuz','USDT','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','botname','ordertype','includes',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cooldown','limit','sell','add','orderId','configuration-stored','\x20orders\x20in\x20less\x20than\x20'];_0x5b43=function(){return _0x568936;};return _0x5b43();}async function updateCoinResults(_0xa5c9ef){const _0x3113e8=_0x47c7eb;let _0x181649,_0x3445c9,_0x212056,_0x823e1d,_0x3a78f1,_0x115d6b,_0x2e6d2b=dbCoinResults[_0x3113e8(0x1c5)](_0x3113e8(0x1b0))[_0x3113e8(0x201)]({'coin':_0xa5c9ef['coin']})[_0x3113e8(0x23f)]();if(!_0x2e6d2b)return;if(_0xa5c9ef[_0x3113e8(0x1f8)]&&_0xa5c9ef[_0x3113e8(0x1f8)][_0x3113e8(0x1af)]==config[_0x3113e8(0x268)])_0x181649=_0xa5c9ef['fee'][_0x3113e8(0x206)];else{if(_0xa5c9ef[_0x3113e8(0x1f8)]&&_0xa5c9ef[_0x3113e8(0x1f8)]['currency']==_0x3113e8(0x267))_0x181649=_0xa5c9ef['fee'][_0x3113e8(0x206)]*global[_0x3113e8(0x17e)][_0x3113e8(0x267)+config[_0x3113e8(0x268)]];else _0x181649=0.001*_0xa5c9ef[_0x3113e8(0x1ca)];}const _0x5c02ca=_0xa5c9ef['symbol'][_0x3113e8(0x1b9)](config[_0x3113e8(0x268)]+'/');_0x5c02ca&&(_0x115d6b={'coin':_0xa5c9ef[_0x3113e8(0x216)],'symbol':_0xa5c9ef['symbol'],'filled':_0xa5c9ef[_0x3113e8(0x1ca)]*_0xa5c9ef['price'],'side':_0xa5c9ef[_0x3113e8(0x21b)]=='sell'?_0x3113e8(0x19b):'sell','price':0x1/_0xa5c9ef[_0x3113e8(0x24b)]},_0xa5c9ef={..._0x115d6b});_0xa5c9ef[_0x3113e8(0x21b)]=='buy'?_0x212056=(_0x2e6d2b[_0x3113e8(0x1f0)]*_0x2e6d2b[_0x3113e8(0x20b)]+_0xa5c9ef['price']*_0xa5c9ef['filled'])/(_0x2e6d2b[_0x3113e8(0x20b)]+_0xa5c9ef['filled']):_0x212056=(_0x2e6d2b[_0x3113e8(0x1f0)]*_0x2e6d2b[_0x3113e8(0x20b)]-_0xa5c9ef['price']*_0xa5c9ef[_0x3113e8(0x1ca)])/(_0x2e6d2b[_0x3113e8(0x20b)]-_0xa5c9ef[_0x3113e8(0x1ca)]);_0xa5c9ef[_0x3113e8(0x21b)]=='buy'?_0x823e1d=_0x2e6d2b[_0x3113e8(0x19f)]:_0x823e1d=_0x2e6d2b['realized']+(_0xa5c9ef[_0x3113e8(0x24b)]-_0x2e6d2b[_0x3113e8(0x1f0)])*_0xa5c9ef[_0x3113e8(0x1ca)];_0x3445c9=_0xa5c9ef[_0x3113e8(0x21b)]=='sell'?_0x2e6d2b[_0x3113e8(0x20b)]-_0xa5c9ef[_0x3113e8(0x1ca)]:_0x2e6d2b['number']+_0xa5c9ef[_0x3113e8(0x1ca)],_0x3a78f1=(_0xa5c9ef[_0x3113e8(0x24b)]-_0x212056)*_0x3445c9;let _0x9c46dc={'coin':_0xa5c9ef[_0x3113e8(0x216)],'number':_0x3445c9,'breakeven':formatResult(_0x212056,0x8),'realized':formatResult(_0x823e1d,0x8),'unrealized':formatResult(_0x3a78f1,0x8),'fees':formatResult(_0x2e6d2b[_0x3113e8(0x1db)]+_0x181649,0x8),'sells':_0xa5c9ef[_0x3113e8(0x21b)]==_0x3113e8(0x1bd)?_0x2e6d2b[_0x3113e8(0x189)]+0x1:_0x2e6d2b[_0x3113e8(0x189)],'buys':_0xa5c9ef[_0x3113e8(0x21b)]==_0x3113e8(0x19b)?_0x2e6d2b['buys']+0x1:_0x2e6d2b['buys']};dbCoinResults[_0x3113e8(0x1c5)](_0x3113e8(0x1b0))[_0x3113e8(0x201)]({'coin':_0xa5c9ef[_0x3113e8(0x216)]})[_0x3113e8(0x16d)](_0x9c46dc)[_0x3113e8(0x269)]();}async function placeOrder(_0x53fcda){const _0x5eb995=_0x47c7eb,_0x2701d6=config['ordertype']==_0x5eb995(0x16f)?'market':_0x5eb995(0x1bc);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5eb995(0x192)](JSON[_0x5eb995(0x246)](currentCoins));for(const _0x380756 of _0x53fcda){let _0x4b848d,_0x24c956,_0x590e55,_0x74b308,_0x546146,_0x4033fc=_0x380756['symbol'];try{const _0x1ac7ad=await exchange[_0x5eb995(0x247)](_0x4033fc),_0x520a07=_0x1ac7ad[_0x4033fc];_0x4b848d=_0x520a07[_0x5eb995(0x20e)],_0x24c956=_0x520a07[_0x5eb995(0x1f2)],_0x590e55=_0x520a07[_0x5eb995(0x169)];_0x380756[_0x5eb995(0x258)]?(_0x74b308=_0x380756[_0x5eb995(0x21b)]==_0x5eb995(0x19b)?_0x5eb995(0x1bd):'buy',_0x546146=Math['abs'](_0x380756['trade'])/_0x4b848d):(_0x74b308=_0x380756[_0x5eb995(0x21b)],_0x546146=Math[_0x5eb995(0x18f)](_0x380756['trade']));_0x2701d6=='limit'&&(config['ordertype']==_0x5eb995(0x1da)&&(_0x4b848d=_0x74b308==_0x5eb995(0x19b)?_0x24c956:_0x590e55),config[_0x5eb995(0x1b8)]==_0x5eb995(0x18b)&&(_0x4b848d=_0x74b308==_0x5eb995(0x19b)?_0x590e55:_0x24c956));_0x546146=formatResult(_0x546146,0x8),_0x4b848d=formatResult(_0x4b848d,0x8);const _0xeef7b=await exchange[_0x5eb995(0x1fc)](_0x4033fc,_0x2701d6,_0x74b308,_0x546146,_0x4b848d);lastOrders[_0x5eb995(0x20c)]({'orderId':_0xeef7b['id'],'symbol':_0x4033fc,'side':_0x74b308,'reverse':_0x380756[_0x5eb995(0x258)],'amount':_0x380756['reverse']?_0xeef7b['amount']*_0xeef7b[_0x5eb995(0x24b)]:_0xeef7b[_0x5eb995(0x235)],'filled':_0x380756['reverse']?_0xeef7b[_0x5eb995(0x1ca)]*_0xeef7b[_0x5eb995(0x24b)]:_0xeef7b[_0x5eb995(0x1ca)],'price':_0xeef7b[_0x5eb995(0x24b)]});const _0x3b8fa1=_0x74b308==_0x5eb995(0x1bd)?config[_0x5eb995(0x230)]?String['fromCodePoint']('0x'+config[_0x5eb995(0x230)])+'\x20':'':config[_0x5eb995(0x211)]?String[_0x5eb995(0x25e)]('0x'+config[_0x5eb995(0x211)])+'\x20':'',_0x2bcfad=_0x2701d6=='market'?_0x5eb995(0x198):config[_0x5eb995(0x1b8)]=='limit-high'?_0x5eb995(0x1c4):'Limit\x20(low-margin)';if(_0x2701d6==_0x5eb995(0x16f))logHistory(_0x5eb995(0x1d5),''+_0x3b8fa1+_0x2bcfad+_0x5eb995(0x1d9)+_0x4033fc+'\x20'+_0x74b308+'\x20#'+formatResult(_0xeef7b[_0x5eb995(0x1ca)],0x8)+'\x20@'+formatResult(_0xeef7b['price'],0x8));else logHistory(_0x5eb995(0x1d5),''+_0x3b8fa1+_0x2bcfad+_0x5eb995(0x1d9)+_0x4033fc+'\x20'+_0x74b308+'\x20#'+formatResult(_0xeef7b[_0x5eb995(0x235)],0x8)+'\x20@'+formatResult(_0xeef7b[_0x5eb995(0x24b)],0x8));_0xeef7b[_0x5eb995(0x216)]=_0x380756[_0x5eb995(0x216)],await updateCoinResults(_0xeef7b);if(config[_0x5eb995(0x1bb)]!=0x0){let _0x1b595a=null;if(cooldownTracker['length']==config[_0x5eb995(0x1bb)]-0x1)_0x1b595a=cooldownTracker['shift']();const _0x344222=getTimeStamp();cooldownTracker[_0x5eb995(0x20c)](_0x344222);if(_0x1b595a){const _0x2997e1=fns[_0x5eb995(0x1a4)](new Date(_0x344222),new Date(_0x1b595a));_0x2997e1<cooldownInterval&&(logHistory(_0x5eb995(0x1d4),'Executed\x20'+config[_0x5eb995(0x1bb)]+_0x5eb995(0x1c1)+cooldownInterval/0x3c+_0x5eb995(0x1e8)+cooldownPeriod/(0xe10*0x3e8)+_0x5eb995(0x266)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x470060){if(_0x470060[_0x5eb995(0x16b)]()[_0x5eb995(0x1b9)](_0x5eb995(0x22b)))logHistory(_0x5eb995(0x1d4),_0x5eb995(0x196)+_0x4033fc);else{if(_0x470060[_0x5eb995(0x16b)]()['includes'](_0x5eb995(0x262)))logHistory(_0x5eb995(0x1d4),_0x5eb995(0x22e)+_0x4033fc);else await handleError(_0x470060,'placeOrder()');}}}if(lastOrders[_0x5eb995(0x20d)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5eb995(0x1ea)]&&(config['ordertype']==_0x5eb995(0x16f)?logHistory('error',_0x5eb995(0x1fb)):logHistory(_0x5eb995(0x1d4),_0x5eb995(0x25d)));else coolingDown&&(!config[_0x5eb995(0x1ea)]&&logHistory('error',_0x5eb995(0x1fa)));}}function logHistory(_0xed1fd0,_0x3e1c63,_0x2ba5fb=''){const _0x408aee=_0x47c7eb;let _0x596e23={'time':getTimeStamp(),'type':_0xed1fd0,'event':_0x3e1c63,'botname':config[_0x408aee(0x1b7)],'showname':config[_0x408aee(0x204)]};dbLogs[_0x408aee(0x1c5)](_0x408aee(0x1ad))[_0x408aee(0x20c)](_0x596e23)['write']();if(_0x2ba5fb=='')_0x2ba5fb=_0x3e1c63;proxyEmit('event',{'log':_0x596e23,'summary':_0x2ba5fb}),process[_0x408aee(0x163)]({'telegram':_0x596e23}),logging(''+_0x596e23[_0x408aee(0x1f1)]);}function emitHistory(_0x4506b5={}){const _0x2cf0a1=_0x47c7eb;Object[_0x2cf0a1(0x1a3)](_0x4506b5)[_0x2cf0a1(0x20d)]==0x0&&(_0x4506b5={'type':[_0x2cf0a1(0x1d5),_0x2cf0a1(0x1f1)],'event':'','page':0x1});if(_0x4506b5[_0x2cf0a1(0x15f)][_0x2cf0a1(0x1b9)](_0x2cf0a1(0x1f1)))_0x4506b5[_0x2cf0a1(0x15f)][_0x2cf0a1(0x1fd)](_0x4506b5[_0x2cf0a1(0x15f)]['indexOf']('event'),0x1,'error','success');if(dbLogs[_0x2cf0a1(0x190)](_0x2cf0a1(0x1ad))['value']()){let _0x1c9a2b=dbLogs[_0x2cf0a1(0x1c5)](_0x2cf0a1(0x1ad))[_0x2cf0a1(0x1b2)](_0x22bfcf=>{const _0x19ebd9=_0x2cf0a1;if(_0x4506b5[_0x19ebd9(0x15f)][_0x19ebd9(0x20d)]==0x0)return![];else return _0x4506b5[_0x19ebd9(0x15f)][_0x19ebd9(0x1b9)](_0x22bfcf[_0x19ebd9(0x15f)]);})['filter'](_0xbe3737=>{const _0x4f9c18=_0x2cf0a1;if(_0x4506b5['event']=='')return!![];else return _0xbe3737[_0x4f9c18(0x1f1)][_0x4f9c18(0x23b)]()['includes'](_0x4506b5['event'][_0x4f9c18(0x23b)]());})[_0x2cf0a1(0x17a)](_0x2cf0a1(0x23d)),_0x670c2a=_0x1c9a2b[_0x2cf0a1(0x23f)]()[_0x2cf0a1(0x20d)];_0x1c9a2b=_0x1c9a2b[_0x2cf0a1(0x258)]()[_0x2cf0a1(0x1ae)]((_0x4506b5[_0x2cf0a1(0x229)]-0x1)*logPageSize,_0x4506b5[_0x2cf0a1(0x229)]*logPageSize-0x1)[_0x2cf0a1(0x258)]()[_0x2cf0a1(0x23f)](),proxyEmit(_0x2cf0a1(0x1d3),{'logs':_0x1c9a2b,'total':_0x670c2a});}else proxyEmit(_0x2cf0a1(0x1d3),{'logs':[],'total':0x0});}async function pauseBot(_0x536fca){const _0x53fc0d=_0x47c7eb,_0x131f6f=new Date()[_0x53fc0d(0x252)]();if(!lastBotPause)lastBotPause=new Date()[_0x53fc0d(0x252)](),consecutivePauses=0x1;else{if(_0x131f6f-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x53fc0d(0x163)]({'stop':_0x53fc0d(0x255)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x53fc0d(0x252)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x53fc0d(0x1d4),_0x53fc0d(0x1c9)+consecutivePauses+')'),await sleep(_0x536fca),botPaused=![],reset();}}async function handleError(_0x2a885f,_0x99ab1a,_0x56d774=''){const _0x3bba89=_0x47c7eb;if(_0x2a885f[_0x3bba89(0x16b)]()[_0x3bba89(0x1b9)](_0x3bba89(0x183)))logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x202)),await pauseBot(pauseBotInterval);else{if(_0x2a885f['toString']()[_0x3bba89(0x1b9)]('ExchangeNotAvailable'))logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x223)),await pauseBot(pauseBotInterval);else{if(_0x2a885f[_0x3bba89(0x16b)]()['includes'](_0x3bba89(0x219)))logHistory('error',_0x99ab1a+_0x3bba89(0x1e4)),await pauseBot(pauseBotInterval);else{if(_0x2a885f[_0x3bba89(0x16b)]()[_0x3bba89(0x1b9)](_0x3bba89(0x199)))logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x212)),logHistory(_0x3bba89(0x1d4),_0x3bba89(0x1a6)),process[_0x3bba89(0x163)]({'stop':_0x3bba89(0x200)});else{if(_0x2a885f[_0x3bba89(0x16b)]()[_0x3bba89(0x1b9)](_0x3bba89(0x213)))logHistory('error',_0x99ab1a+_0x3bba89(0x261)),logHistory('error',_0x3bba89(0x1a6)),process[_0x3bba89(0x163)]({'stop':_0x3bba89(0x200)});else{if(_0x2a885f['toString']()[_0x3bba89(0x1b9)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x99ab1a+_0x3bba89(0x18d)),logHistory('error',_0x3bba89(0x1a6)),process[_0x3bba89(0x163)]({'stop':_0x3bba89(0x200)});else{if(_0x2a885f['toString']()[_0x3bba89(0x1b9)](_0x3bba89(0x1c3)))logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x19e)),logHistory(_0x3bba89(0x1d4),_0x3bba89(0x1a6)),process[_0x3bba89(0x163)]({'stop':'kill'});else{if(_0x2a885f[_0x3bba89(0x16b)]()[_0x3bba89(0x1b9)](_0x3bba89(0x1d2)))logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x1b6)),await pauseBot(pauseBotInterval),process[_0x3bba89(0x163)]({'stop':_0x3bba89(0x255)});else _0x2a885f[_0x3bba89(0x16b)]()['includes'](_0x3bba89(0x156))?logHistory(_0x3bba89(0x1d4),_0x99ab1a+_0x3bba89(0x26a)):(logHistory('error',_0x99ab1a+_0x3bba89(0x1a7)),logging(_0x99ab1a+_0x3bba89(0x179),_0x2a885f),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x2c7137,_0x1b0e6f){return parseFloat(_0x2c7137['toFixed'](_0x1b0e6f));}function logging(_0x31f814,_0x3b3877=''){const _0x322c8c=_0x47c7eb;if(config[_0x322c8c(0x204)])console[_0x322c8c(0x250)](getTimeStamp()+':\x20'+config[_0x322c8c(0x1b7)]+_0x322c8c(0x20f)+_0x31f814,_0x3b3877);else console[_0x322c8c(0x250)](getTimeStamp()+_0x322c8c(0x15d)+botID+_0x322c8c(0x20f)+_0x31f814,_0x3b3877);}function getServerTime(){const _0x12c26f=_0x47c7eb,_0x2f16b0=new Date();return _0x2f16b0[_0x12c26f(0x1f4)]()+'/'+(_0x2f16b0[_0x12c26f(0x1f9)]()+0x1)[_0x12c26f(0x16b)]()['padStart'](0x2,'0')+'/'+_0x2f16b0[_0x12c26f(0x1a8)]()[_0x12c26f(0x16b)]()[_0x12c26f(0x238)](0x2,'0')+'\x20'+_0x2f16b0[_0x12c26f(0x176)]()[_0x12c26f(0x16b)]()[_0x12c26f(0x238)](0x2,'0')+':'+_0x2f16b0['getMinutes']()[_0x12c26f(0x16b)]()[_0x12c26f(0x238)](0x2,'0')+':'+_0x2f16b0[_0x12c26f(0x1ab)]()[_0x12c26f(0x16b)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x827a16=_0x47c7eb,_0x5962db=shiftedTime();return _0x5962db[_0x827a16(0x1f4)]()+'/'+(_0x5962db[_0x827a16(0x1f9)]()+0x1)[_0x827a16(0x16b)]()[_0x827a16(0x238)](0x2,'0')+'/'+_0x5962db[_0x827a16(0x1a8)]()['toString']()[_0x827a16(0x238)](0x2,'0')+'\x20'+_0x5962db['getHours']()[_0x827a16(0x16b)]()[_0x827a16(0x238)](0x2,'0')+':'+_0x5962db[_0x827a16(0x170)]()[_0x827a16(0x16b)]()['padStart'](0x2,'0')+':'+_0x5962db[_0x827a16(0x1ab)]()[_0x827a16(0x16b)]()[_0x827a16(0x238)](0x2,'0');}function getDate(){const _0xd2fb35=_0x47c7eb,_0x5cea0b=shiftedTime();return _0x5cea0b[_0xd2fb35(0x1f4)]()+'/'+(_0x5cea0b['getMonth']()+0x1)[_0xd2fb35(0x16b)]()[_0xd2fb35(0x238)](0x2,'0')+'/'+_0x5cea0b[_0xd2fb35(0x1a8)]()[_0xd2fb35(0x16b)]()[_0xd2fb35(0x238)](0x2,'0');}function getHour(){const _0x4245ae=_0x47c7eb,_0x24397d=shiftedTime();return _0x24397d[_0x4245ae(0x176)]()[_0x4245ae(0x16b)]()[_0x4245ae(0x238)](0x2,'0');}function sleep(_0x5aa23d){return new Promise(_0x45826e=>setTimeout(_0x45826e,_0x5aa23d));}function shiftedTime(){const _0x12cb76=_0x47c7eb,_0xb330ea=new Date();let _0x517925=_0xb330ea;if(config&&config[_0x12cb76(0x1a1)]!==0x0)_0x517925=fns[_0x12cb76(0x1be)](_0xb330ea,{'hours':config[_0x12cb76(0x1a1)]});return _0x517925;}