const _0x1bc41c=_0x49d1;(function(_0x3c3e0c,_0xab0960){const _0x391ea3=_0x49d1,_0x4bb516=_0x3c3e0c();while(!![]){try{const _0x56567c=parseInt(_0x391ea3(0x18b))/0x1+-parseInt(_0x391ea3(0x1dc))/0x2*(parseInt(_0x391ea3(0x174))/0x3)+-parseInt(_0x391ea3(0x193))/0x4+parseInt(_0x391ea3(0x1c7))/0x5*(parseInt(_0x391ea3(0x226))/0x6)+-parseInt(_0x391ea3(0x23a))/0x7+-parseInt(_0x391ea3(0x206))/0x8+parseInt(_0x391ea3(0x22c))/0x9*(parseInt(_0x391ea3(0x172))/0xa);if(_0x56567c===_0xab0960)break;else _0x4bb516['push'](_0x4bb516['shift']());}catch(_0x51de4b){_0x4bb516['push'](_0x4bb516['shift']());}}}(_0x245d,0x8ade5));const _0x43c1b9=function(){let _0x2bf4d2=!![];return function(_0x2b6a5a,_0x463563){const _0x4fab09=_0x2bf4d2?function(){const _0x154679=_0x49d1;if(_0x463563){const _0x4b8082=_0x463563[_0x154679(0x19a)](_0x2b6a5a,arguments);return _0x463563=null,_0x4b8082;}}:function(){};return _0x2bf4d2=![],_0x4fab09;};}(),_0x2115da=_0x43c1b9(this,function(){const _0x2987c4=_0x49d1;return _0x2115da[_0x2987c4(0x1be)]()[_0x2987c4(0x179)](_0x2987c4(0x229))[_0x2987c4(0x1be)]()[_0x2987c4(0x21f)](_0x2115da)[_0x2987c4(0x179)](_0x2987c4(0x229));});_0x2115da();'use strict';const ccxt=require(_0x1bc41c(0x24c)),low=require(_0x1bc41c(0x25d)),FileSync=require(_0x1bc41c(0x1ef)),fs=require('fs'),fns=require(_0x1bc41c(0x1f5)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x1bc41c(0x1fb))['Crypt'];let exchange,wsClient;global[_0x1bc41c(0x170)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;function _0x49d1(_0x204ce0,_0x29f70b){const _0x3d73c5=_0x245d();return _0x49d1=function(_0x2115da,_0x43c1b9){_0x2115da=_0x2115da-0x159;let _0x245d40=_0x3d73c5[_0x2115da];return _0x245d40;},_0x49d1(_0x204ce0,_0x29f70b);}let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x1bc41c(0x1e4)],botID=process[_0x1bc41c(0x249)][0x2]||_0x1bc41c(0x162),pattern=/^[0-9]{3}$/;if(!pattern[_0x1bc41c(0x17a)](botID))return console[_0x1bc41c(0x1bd)](_0x1bc41c(0x259)+botID+_0x1bc41c(0x236)),process[_0x1bc41c(0x22e)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x1bc41c(0x1bb)+userID+'/':'./config/';function _0x245d(){const _0x334c32=['entries','recreate','map','forEach','milliseconds','privateKey','apply','order','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','type','yyyy-MM-dd\x27T\x27HH:mm:ss','coins','last','parseISO','fee','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','createOrder','cost','message','logs','error','spot','realized','time','basecoin','apiSecret','padStart','BTC/USDT','running','bot-','eventType','wss://stream.binance.us:9443','\x20hour','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','round','valid',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','threshold','fetchOHLCV','./config/','page','log','toString','\x20minutes\x20-\x20balancing\x20resumed','wsMarket','-results.json','AuthenticationError','orderId','datetime','cancel','find','230NmImoS','parse','Bot\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Order\x20filled:\x20','cancelLoading','API-key\x20format\x20invalid','emitHistory','loadMarkets','limits','InvalidNonce','BNB','symbols','length','min','defaults','WebSockets(','-performance.json','-events.json','orderStatus','buys','100546yRTRDj','side','has','USDC','FILLED','getMonth','storeConfiguration','getFullYear','version','BTC','\x20|\x20Unknown\x20error\x20occured','number','mkdirSync','InsufficientFunds','send','splice','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','toLowerCase','yyyy/MM/dd','lowdb/adapters/FileSync','Unfilled\x20order(s)\x20canceled\x20after\x20','getDate','cooldown','existsSync','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','date-fns','price','Order(s)\x20not\x20validated\x20after\x20','offset','Market','getCloses()','hybrid-crypto-js','filter','total','startprice','headless','remainingSymbols','sha256','executionReport','botID','\x20>\x20','\x20|\x20Error\x20details:\x20','5643080ZhpKdd','ordertype','Order(s)\x20validated\x20-\x20balancing\x20resumed','shift','buy','excluded','isArray','bb-settings.json','apiKey','DAI/','botname','differenceInSeconds','getTime','enabled','Order\x20amount\x20is\x20invalid:\x20','Executed\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','fees','emojibuy','coinamount','storeHeadless','join','BTCUSDT','close','coin','constructor','fromCodePoint','getStartingBalances','BTC/BUSD','args','portfolio','data','52866OGDiqY','remove','getMinutes','(((.+)+)+)+$','Manually\x20balance:\x20','Limit\x20(high-margin)','7542aLXfkc','availableBalance','exit','eachDayOfInterval','Order:\x20','binanceus','formattedMessage','USDT','userData','event-history',',\x20must\x20be\x20a\x203\x20digit\x20number','split','filled','progress','1643509NAXVCG','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','limit-high','accumulatedQuantity','target','-config.json','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','wss://stream.binance.com:9443','BUSD','reverse','amount','outboundAccountPosition','************','push','argv','exchange','delta','ccxt','initws()','BTCBUSD','restart','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','balances','initclient','market','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','startnumber','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','keys','Error:\x20Invalid\x20argument\x20','HOT/BTC','showname','timeout','lowdb','loadSymbols()','trade','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','fetchOrders','emojisell','yyyy/MM/dd\x20HH:mm:ss','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','asset','reduce','limit-low','abs','sells','fetchTickers','closeWs','timeshift','value','bid','usd','get','write','differenceInCalendarDays','date','Binance\x20API\x20key\x20is\x20invalid','sortBy','assign','001','breakeven','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Invalid\x20quantity','format','toFixed','starting-balances','kill','getPortfolio','event','sell','startdate','subscribeSpotUserDataStream','secure','ticker','sort','23810fkfjwy','Binance\x20API\x20secret\x20is\x20invalid','48UdQEPk','eur','bot','includes','binance','search','test','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','OrderNotFound','DDoSProtection','currency','timestamp','add','indexOf','settings','slice','success','ExchangeNotAvailable','distribution','decrypt','max','symbol','getCoins()','214663Ypjyzm','limit','function','kline','LIMIT','cancelOrder','replace',')\x20|\x20Error\x20details:\x20','1207608hHfecV'];_0x245d=function(){return _0x334c32;};return _0x245d();}!fs[_0x1bc41c(0x1f3)](configpath)&&fs[_0x1bc41c(0x1e8)](configpath);const configfile=configpath+_0x1bc41c(0x1b1)+botID+_0x1bc41c(0x240),logfile=configpath+_0x1bc41c(0x1b1)+botID+_0x1bc41c(0x1d9),performancefile=configpath+_0x1bc41c(0x1b1)+botID+_0x1bc41c(0x1d8),coinresultsfile=configpath+_0x1bc41c(0x1b1)+botID+_0x1bc41c(0x1c1),settingsfile=configpath+_0x1bc41c(0x20d),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1bc41c(0x1d6)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1bc41c(0x1d6)]({'data':[]})[_0x1bc41c(0x15c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1bc41c(0x1d6)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1bc41c(0x1d6)]({'coins':[]})[_0x1bc41c(0x15c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':'BTC/EUR'},'usd':{'coin':_0x1bc41c(0x21c),'symbol':_0x1bc41c(0x1af)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3c33a8)=>{},'debug':(..._0x6bc9b8)=>{},'notice':(..._0x57fddd)=>{},'info':(..._0xd24ad5)=>{},'warning':(..._0x324283)=>{},'error':async function(..._0x3dd38f){const _0x3aab0c=_0x1bc41c,_0x414f65=new Date()[_0x3aab0c(0x212)]();if(!lastErrorShown||_0x414f65-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3aab0c(0x212)](),logHistory('error',_0x3aab0c(0x1d7)+consecutivePauses+_0x3aab0c(0x1b8));let _0x172d41='';if(_0x3dd38f[0x0])_0x172d41+=_0x3dd38f[0x0];if(_0x3dd38f[0x1]&&_0x3dd38f[0x1][_0x3aab0c(0x1a8)]&&_0x3dd38f[0x1]['error'][_0x3aab0c(0x1a6)])_0x172d41+='\x20-\x20'+_0x3dd38f[0x1][_0x3aab0c(0x1a8)][_0x3aab0c(0x1a6)];logging(_0x3aab0c(0x1d7)+consecutivePauses+_0x3aab0c(0x192),''+_0x172d41),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1bc41c(0x201),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x1bc41c(0x26d)]&&updateTimeshift(settings[_0x1bc41c(0x26d)]);process[_0x1bc41c(0x1ea)]({'started':'running'},_0x4e5d86=>{}),initializeProcessListeners();function proxyEmit(_0x41e7af,_0x5a3ca4=null){const _0x502073=_0x1bc41c;process[_0x502073(0x1ea)]({'function':_0x41e7af,'args':_0x5a3ca4},_0x1e9836=>{});}function initializeProcessListeners(){const _0x583bad=_0x1bc41c;process['on'](_0x583bad(0x1a6),_0x1448a7=>{const _0x3ae949=_0x583bad;switch(Object[_0x3ae949(0x258)](_0x1448a7)[0x0]){case'timeshift':_0x1448a7[_0x3ae949(0x26d)]!=undefined&&(settings[_0x3ae949(0x26d)]=_0x1448a7['timeshift'],updateTimeshift(settings[_0x3ae949(0x26d)]));break;case'function':switch(_0x1448a7[_0x3ae949(0x18d)]){case _0x3ae949(0x252):initclient();break;case _0x3ae949(0x1ce):emitHistory(_0x1448a7[_0x3ae949(0x223)]);break;case _0x3ae949(0x16a):getPortfolio(_0x1448a7[_0x3ae949(0x223)]);break;case _0x3ae949(0x1e2):storeConfiguration(_0x1448a7[_0x3ae949(0x223)]);break;case _0x3ae949(0x21a):storeHeadless(_0x1448a7['args']);break;case _0x3ae949(0x221):getStartingBalances();break;case'placeOrder':placeOrder(_0x1448a7['args']);break;case _0x3ae949(0x1cc):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1e348d=_0x1bc41c;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x1e348d(0x20e)],config['apiSecret']);let _0x5e0d89=await loadSymbols();_0x5e0d89&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x57e23e,_0x28c62a){const _0x1516d8=_0x1bc41c,_0x2deb6b=ccxt[config[_0x1516d8(0x24a)]];let _0x2fef50;switch(config['exchange']){case _0x1516d8(0x178):_0x2fef50='wss://stream.binance.com:9443';break;case'binanceus':_0x2fef50=_0x1516d8(0x1b3);break;default:_0x2fef50=_0x1516d8(0x242);}exchange=new _0x2deb6b({'apiKey':_0x57e23e,'secret':_0x28c62a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x57e23e,'api_secret':_0x28c62a,'beautify':!![],'wsUrl':_0x2fef50},logger),config[_0x1516d8(0x24a)]==_0x1516d8(0x231)&&(stablecoins={'eur':{'coin':_0x1516d8(0x24e),'symbol':_0x1516d8(0x222)},'usd':{'coin':_0x1516d8(0x21c),'symbol':_0x1516d8(0x1af)}});}async function loadSymbols(){const _0x938a=_0x1bc41c;let _0x375ba7;try{markets=await exchange[_0x938a(0x1cf)]();const _0x5ebfe5=[_0x938a(0x20f),_0x938a(0x25a),'HOT/EUR'];allSymbols=exchange[_0x938a(0x1d3)][_0x938a(0x1fc)](_0x3ebad6=>{const _0xeef21c=_0x938a;let _0xddc60a=![];return _0x5ebfe5[_0xeef21c(0x197)](_0x58c017=>{const _0x14b25f=_0xeef21c;if(_0x3ebad6[_0x14b25f(0x177)](_0x58c017))_0xddc60a=!![];}),!_0xddc60a;}),_0x375ba7=!![];}catch(_0x1d1112){await handleError(_0x1d1112,_0x938a(0x25e)),_0x375ba7=![];}return _0x375ba7;}async function initbot(){const _0x457792=_0x1bc41c;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x37107e=dbCoinResults[_0x457792(0x15b)](_0x457792(0x19f))['value']();if(_0x37107e[_0x457792(0x1d4)]==0x0)await resetCoinResults();}async function initclient(){const _0x1c04f4=_0x1bc41c;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1c04f4(0x251),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x77f80f=_0x1bc41c;wsinitialized=![];ws1&&(ws1[_0x77f80f(0x197)](_0x106a1d=>{const _0xff95be=_0x77f80f;try{wsClient[_0xff95be(0x26c)](_0x106a1d);}catch(_0x1440f1){}}),ws1=[]);if(ws2){try{wsClient[_0x77f80f(0x26c)](ws2);}catch(_0x5e4215){}ws2=null;}}async function initws(){const _0x5f5bf5=_0x1bc41c;cleanws();let _0x3890b0=[];currentCoins[_0x5f5bf5(0x197)](_0x35672b=>{const _0x5b7f4f=_0x5f5bf5;if(_0x35672b[_0x5b7f4f(0x21e)]!=config[_0x5b7f4f(0x1ac)])_0x3890b0[_0x5b7f4f(0x248)](noslash(_0x35672b[_0x5b7f4f(0x189)]));});if(!_0x3890b0[_0x5f5bf5(0x177)](stablecoins[_0x5f5bf5(0x175)][_0x5f5bf5(0x21e)]))_0x3890b0[_0x5f5bf5(0x248)](stablecoins[_0x5f5bf5(0x175)][_0x5f5bf5(0x21e)]);if(!_0x3890b0['includes'](stablecoins[_0x5f5bf5(0x15a)][_0x5f5bf5(0x21e)]))_0x3890b0['push'](stablecoins['usd'][_0x5f5bf5(0x21e)]);if(!_0x3890b0[_0x5f5bf5(0x177)](_0x5f5bf5(0x1d2)+config[_0x5f5bf5(0x1ac)]))_0x3890b0['push'](_0x5f5bf5(0x1d2)+config[_0x5f5bf5(0x1ac)]);try{_0x3890b0[_0x5f5bf5(0x197)]((_0xf905ed,_0x5e4881)=>{ws1[_0x5e4881]=wsClient['subscribeSpotKline'](_0xf905ed,'1m');}),ws2=wsClient[_0x5f5bf5(0x16e)](),wsClient['on'](_0x5f5bf5(0x232),_0x53d507=>{const _0x713faa=_0x5f5bf5;if(!Array[_0x713faa(0x20c)](_0x53d507)&&!_0x53d507['wsKey'][_0x713faa(0x177)](_0x713faa(0x234))){if(_0x53d507[_0x713faa(0x1b2)]===_0x713faa(0x18e)){global[_0x713faa(0x170)][_0x53d507[_0x713faa(0x18e)][_0x713faa(0x189)]]=_0x53d507[_0x713faa(0x18e)][_0x713faa(0x21d)];return;}}else{if(!Array[_0x713faa(0x20c)](_0x53d507)&&_0x53d507['wsKey'][_0x713faa(0x177)](_0x713faa(0x234))){if(_0x53d507[_0x713faa(0x1c0)][_0x713faa(0x177)](_0x713faa(0x1a9))){updateNumberCoins(_0x53d507);return;}}}}),wsClient['on']('reconnected',async _0x56f543=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1bf3b7){await handleError(_0x1bf3b7,_0x5f5bf5(0x24d));}let _0xc9cd27,_0x498bea=0x0;loading[_0x5f5bf5(0x200)]=[];let _0x5c9b20=0x0;currentCoins['forEach'](_0x4bc07d=>{const _0x2fb952=_0x5f5bf5;if(_0x4bc07d[_0x2fb952(0x21e)]!=config[_0x2fb952(0x1ac)])loading['remainingSymbols'][_0x2fb952(0x248)](_0x4bc07d[_0x2fb952(0x189)]);}),loadingCanceled=![];while(_0xc9cd27!=currentCoins['length']-0x1){_0xc9cd27=0x0,currentCoins[_0x5f5bf5(0x197)](_0xd4c32=>{const _0x4bcd8a=_0x5f5bf5;_0xd4c32[_0x4bcd8a(0x21e)]!=config[_0x4bcd8a(0x1ac)]&&global[_0x4bcd8a(0x170)][noslash(_0xd4c32[_0x4bcd8a(0x189)])]&&(loading[_0x4bcd8a(0x200)]=loading['remainingSymbols']['filter'](_0x378b05=>_0x378b05!=_0xd4c32[_0x4bcd8a(0x189)]),_0xc9cd27++);}),loading[_0x5f5bf5(0x239)]=Math[_0x5f5bf5(0x1b6)](_0xc9cd27/(currentCoins['length']-0x1)*0x64);_0x5c9b20>0x1e*0x5&&(loading[_0x5f5bf5(0x25c)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x5f5bf5(0x1c5)]=!![],emitLoadingProgress();break;}else _0xc9cd27!=_0x498bea&&(_0x498bea=_0xc9cd27,emitLoadingProgress()),_0x5c9b20++,await sleep(0xc8);}if(_0xc9cd27==currentCoins[_0x5f5bf5(0x1d4)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5a2a83=_0x1bc41c;let _0x27eb59=0x0,_0x2d8f67=0x0;try{_0x27eb59=global[_0x5a2a83(0x170)][stablecoins[_0x5a2a83(0x175)]['coin']],_0x2d8f67=global['ticker'][stablecoins['usd'][_0x5a2a83(0x21e)]];}catch(_0x6f0d73){await handleError(_0x6f0d73,'getFiat()');}return{'eur':Number(_0x27eb59),'usd':Number(_0x2d8f67)};}async function setStartDatePerformance(_0x304db3){const _0x5d1c5d=_0x1bc41c,_0x592c64=fns['format'](new Date(_0x304db3[_0x5d1c5d(0x16d)]),_0x5d1c5d(0x1ee));let _0x2b3a3d=[];_0x2b3a3d[stablecoins[_0x5d1c5d(0x175)][_0x5d1c5d(0x21e)]]=await getCloses(stablecoins[_0x5d1c5d(0x175)][_0x5d1c5d(0x189)],new Date(_0x304db3[_0x5d1c5d(0x16d)]),0x1),_0x2b3a3d[stablecoins['usd'][_0x5d1c5d(0x21e)]]=await getCloses(stablecoins['usd'][_0x5d1c5d(0x189)],new Date(_0x304db3[_0x5d1c5d(0x16d)]),0x1);let _0x54fc86,_0x17e2ad=[];_0x304db3[_0x5d1c5d(0x224)][_0x5d1c5d(0x197)](_0x5c9362=>{const _0x2cec32=_0x5d1c5d;!_0x5c9362[_0x2cec32(0x20b)]&&_0x17e2ad[_0x2cec32(0x248)]({'coin':_0x5c9362['coin'],'number':_0x5c9362[_0x2cec32(0x256)],'price':_0x5c9362['startprice']});}),_0x54fc86={'date':_0x592c64,'eur':_0x2b3a3d[stablecoins[_0x5d1c5d(0x175)][_0x5d1c5d(0x21e)]][0x0],'usd':_0x2b3a3d[stablecoins['usd'][_0x5d1c5d(0x21e)]][0x0],'coins':_0x17e2ad};let _0x384368=dbPerformance[_0x5d1c5d(0x15b)](_0x5d1c5d(0x225))[_0x5d1c5d(0x1c6)]({'date':_0x592c64})['value']();_0x384368?dbPerformance['get'](_0x5d1c5d(0x225))[_0x5d1c5d(0x1c6)]({'date':_0x592c64})[_0x5d1c5d(0x161)](_0x54fc86)[_0x5d1c5d(0x15c)]():dbPerformance[_0x5d1c5d(0x15b)]('data')['push'](_0x54fc86)[_0x5d1c5d(0x15c)](),_0x384368=dbPerformance[_0x5d1c5d(0x15b)](_0x5d1c5d(0x225))[_0x5d1c5d(0x160)](_0x5d1c5d(0x15e))['value'](),_0x384368[_0x5d1c5d(0x197)](_0x157bd2=>{const _0x2a6592=_0x5d1c5d;_0x157bd2['date']<_0x592c64&&dbPerformance[_0x2a6592(0x15b)](_0x2a6592(0x225))[_0x2a6592(0x227)]({'date':_0x157bd2['date']})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x56137d){const _0x4c09cc=_0x1bc41c;let _0x4ed6b7,_0x14affa=[];logHistory(_0x4c09cc(0x184),_0x4c09cc(0x265)),_0x56137d[_0x4c09cc(0x224)][_0x4c09cc(0x197)](_0x56fed3=>{const _0x5d960c=_0x4c09cc;if(_0x56fed3[_0x5d960c(0x21e)]!=config[_0x5d960c(0x1ac)]&&!_0x56fed3['excluded'])_0x14affa[_0x5d960c(0x248)]({'coin':_0x56fed3[_0x5d960c(0x21e)],'symbol':_0x56fed3[_0x5d960c(0x189)]});});let _0x1fa832=[];try{const _0xa57a39=fns[_0x4c09cc(0x166)](fns[_0x4c09cc(0x1a1)](_0x56137d['startdate'][_0x4c09cc(0x191)](/\//g,'-')),_0x4c09cc(0x19e));for(const _0x4ec75a of _0x14affa){if(_0x4ec75a[_0x4c09cc(0x21e)]!=config[_0x4c09cc(0x1ac)])_0x4ed6b7=await exchange[_0x4c09cc(0x261)](_0x4ec75a[_0x4c09cc(0x189)],Date[_0x4c09cc(0x1c8)](_0xa57a39));_0x4ed6b7[_0x4c09cc(0x197)](_0x215485=>{const _0x1a08b8=_0x4c09cc,_0x2fe915=_0x4ec75a[_0x1a08b8(0x189)][_0x1a08b8(0x177)](config['basecoin']+'/'),_0x230cc9=fns['format'](fns['parseISO'](_0x215485[_0x1a08b8(0x1c4)]),_0x1a08b8(0x263)),_0xdb57e1=fns[_0x1a08b8(0x166)](fns[_0x1a08b8(0x1a1)](_0x215485[_0x1a08b8(0x1c4)]),_0x1a08b8(0x1ee));let _0x526523;if(_0x215485[_0x1a08b8(0x1dd)]=='buy'&&_0x2fe915==![])_0x526523=_0x215485[_0x1a08b8(0x245)];if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x20a)&&_0x2fe915==!![])_0x526523=-_0x215485['amount']*_0x215485[_0x1a08b8(0x1f6)];if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x16c)&&_0x2fe915==![])_0x526523=-_0x215485['amount'];if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x16c)&&_0x2fe915==!![])_0x526523=_0x215485[_0x1a08b8(0x245)]*_0x215485[_0x1a08b8(0x1f6)];_0x1fa832[_0x1a08b8(0x248)]({'timestamp':_0x230cc9,'date':_0xdb57e1,'coin':_0x4ec75a[_0x1a08b8(0x21e)],'symbol':_0x4ec75a['symbol'],'type':_0x215485[_0x1a08b8(0x19d)],'side':_0x215485[_0x1a08b8(0x1dd)],'reverse':_0x2fe915,'amount':formatResult(_0x215485[_0x1a08b8(0x238)],0x8),'filled':formatResult(_0x215485[_0x1a08b8(0x238)],0x8),'coinamount':formatResult(_0x526523,0x8),'price':formatResult(_0x215485[_0x1a08b8(0x1f6)],0x8)});let _0x4bcb7c;if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x20a)&&_0x2fe915==![])_0x4bcb7c=-_0x215485[_0x1a08b8(0x245)]*_0x215485[_0x1a08b8(0x1f6)];if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x20a)&&_0x2fe915==!![])_0x4bcb7c=_0x215485[_0x1a08b8(0x245)];if(_0x215485[_0x1a08b8(0x1dd)]==_0x1a08b8(0x16c)&&_0x2fe915==![])_0x4bcb7c=_0x215485[_0x1a08b8(0x245)]*_0x215485['price'];if(_0x215485['side']==_0x1a08b8(0x16c)&&_0x2fe915==!![])_0x4bcb7c=-_0x215485[_0x1a08b8(0x245)];_0x1fa832['push']({'date':_0xdb57e1,'coin':config[_0x1a08b8(0x1ac)],'coinamount':formatResult(_0x4bcb7c,0x8)});});}_0x1fa832[_0x4c09cc(0x171)]((_0x5e9767,_0x429526)=>_0x5e9767[_0x4c09cc(0x17f)]>_0x429526[_0x4c09cc(0x17f)]?0x1:_0x429526[_0x4c09cc(0x17f)]>_0x5e9767[_0x4c09cc(0x17f)]?-0x1:0x0),dbLogs[_0x4c09cc(0x15b)]('logs')['remove']()[_0x4c09cc(0x15c)](),_0x1fa832['forEach'](_0x3f9c26=>{const _0x23a6b7=_0x4c09cc;let _0x31a674;_0x3f9c26[_0x23a6b7(0x21e)]!=config[_0x23a6b7(0x1ac)]&&(_0x31a674={'time':_0x3f9c26['timestamp'],'type':_0x23a6b7(0x19b),'event':_0x23a6b7(0x230)+_0x3f9c26[_0x23a6b7(0x189)]+'\x20'+_0x3f9c26[_0x23a6b7(0x1dd)]+'\x20#'+_0x3f9c26[_0x23a6b7(0x245)]+'\x20@'+_0x3f9c26[_0x23a6b7(0x1f6)]},dbLogs[_0x23a6b7(0x15b)](_0x23a6b7(0x1a7))[_0x23a6b7(0x248)](_0x31a674)[_0x23a6b7(0x15c)]());});const _0x5e5196=fns[_0x4c09cc(0x22f)]({'start':new Date(_0x56137d[_0x4c09cc(0x16d)]),'end':new Date()})[_0x4c09cc(0x196)](_0x35146c=>fns[_0x4c09cc(0x166)](_0x35146c,'yyyy/MM/dd'));let _0x1471a6=[];_0x56137d[_0x4c09cc(0x224)][_0x4c09cc(0x197)](_0x335f7c=>{const _0x5b5b9c=_0x4c09cc;if(!_0x335f7c['excluded']){_0x1471a6[_0x335f7c['coin']]=[];let _0x1d549c=_0x335f7c[_0x5b5b9c(0x256)];_0x5e5196[_0x5b5b9c(0x197)]((_0x26b4ef,_0xf15928)=>{const _0x52f8fb=_0x5b5b9c;let _0x59fe8c=_0x1fa832['filter'](_0x3139a1=>_0x3139a1[_0x52f8fb(0x21e)]==_0x335f7c[_0x52f8fb(0x21e)]&&_0x3139a1['date']==_0x26b4ef);if(_0x59fe8c[_0x52f8fb(0x1d4)]!=0x0){let _0x26b38f=_0x59fe8c[_0x52f8fb(0x267)]((_0x3f1383,_0x2ec250)=>{const _0x4d0759=_0x52f8fb;return _0x3f1383+=_0x2ec250[_0x4d0759(0x219)],_0x3f1383;},0x0);_0x1d549c+=_0x26b38f;}_0x1471a6[_0x335f7c[_0x52f8fb(0x21e)]][_0x26b4ef]=_0x1d549c;});}});const _0x1f7290=[..._0x14affa];_0x1f7290[_0x4c09cc(0x248)]({'coin':stablecoins['eur']['coin'],'symbol':stablecoins[_0x4c09cc(0x175)][_0x4c09cc(0x189)]}),_0x1f7290['push']({'coin':stablecoins[_0x4c09cc(0x15a)][_0x4c09cc(0x21e)],'symbol':stablecoins[_0x4c09cc(0x15a)][_0x4c09cc(0x189)]});let _0x3a958d=[];for(const _0x1e7d51 of _0x1f7290){_0x3a958d[_0x1e7d51['coin']]=await getCloses(_0x1e7d51[_0x4c09cc(0x189)],new Date(_0x56137d['startdate']));}dbPerformance['get'](_0x4c09cc(0x225))[_0x4c09cc(0x227)]()[_0x4c09cc(0x15c)](),_0x5e5196[_0x4c09cc(0x197)]((_0x125074,_0x3aaf3a)=>{const _0x121c7a=_0x4c09cc;let _0x5eea31,_0x33875a=[];_0x3aaf3a==0x0?(_0x56137d[_0x121c7a(0x224)][_0x121c7a(0x197)](_0xf8009f=>{const _0x155a21=_0x121c7a;!_0xf8009f[_0x155a21(0x20b)]&&_0x33875a['push']({'coin':_0xf8009f[_0x155a21(0x21e)],'number':_0xf8009f[_0x155a21(0x256)],'price':_0xf8009f[_0x155a21(0x1fe)]});}),_0x5eea31={'date':_0x125074,'eur':_0x3a958d[stablecoins[_0x121c7a(0x175)][_0x121c7a(0x21e)]][_0x3aaf3a],'usd':_0x3a958d[stablecoins[_0x121c7a(0x15a)][_0x121c7a(0x21e)]][_0x3aaf3a],'coins':_0x33875a}):(_0x56137d[_0x121c7a(0x224)][_0x121c7a(0x197)](_0x191dcf=>{const _0x319e1f=_0x121c7a;!_0x191dcf[_0x319e1f(0x20b)]&&_0x33875a[_0x319e1f(0x248)]({'coin':_0x191dcf[_0x319e1f(0x21e)],'number':_0x1471a6[_0x191dcf[_0x319e1f(0x21e)]][_0x125074],'price':_0x191dcf['coin']==config[_0x319e1f(0x1ac)]?0x1:_0x3a958d[_0x191dcf[_0x319e1f(0x21e)]][_0x3aaf3a]});}),_0x5eea31={'date':_0x125074,'eur':_0x3a958d[stablecoins['eur'][_0x121c7a(0x21e)]][_0x3aaf3a],'usd':_0x3a958d[stablecoins[_0x121c7a(0x15a)][_0x121c7a(0x21e)]][_0x3aaf3a],'coins':_0x33875a}),dbPerformance['get'](_0x121c7a(0x225))[_0x121c7a(0x248)](_0x5eea31)[_0x121c7a(0x15c)]();}),emitPerformance(),await resetCoinResults();for(let _0x244824 of _0x1fa832){_0x244824[_0x4c09cc(0x21e)]!=config[_0x4c09cc(0x1ac)]&&await updateCoinResults(_0x244824);}logHistory('success','Performance\x20recreation\x20completed\x20successfully');}catch(_0x1e201e){await handleError(_0x1e201e,'recreateHistory()');}}async function getCloses(_0x2e0a84,_0x3312e4,_0x58a2c8=undefined){const _0x4afd48=_0x1bc41c,_0xe4e4ee='1d';let _0x50a191,_0x3f1645;const _0xdb2279=fns[_0x4afd48(0x15d)](new Date(),_0x3312e4)+0x1;try{const _0x5a4760=exchange[_0x4afd48(0x198)]()-_0xdb2279*0x18*0xe10*0x3e8;_0x50a191=await exchange[_0x4afd48(0x1ba)](_0x2e0a84,_0xe4e4ee,_0x5a4760,_0x58a2c8),_0x3f1645=await exchange[_0x4afd48(0x26b)](_0x2e0a84);}catch(_0x562010){await handleError(_0x562010,_0x4afd48(0x1fa));}let _0x958146=ohlcvToCloses(_0x50a191);return _0x958146[_0x4afd48(0x248)](_0x3f1645[_0x2e0a84]['last']),_0x958146;}function ohlcvToCloses(_0x1f8bb7){const _0x5312fc=_0x1bc41c;let _0x58dea4=[];return _0x1f8bb7[_0x5312fc(0x197)](function(_0x3ca382){const _0x88e141=_0x5312fc;_0x58dea4[_0x88e141(0x248)](_0x3ca382[0x4]);}),_0x58dea4;}function getConfiguration(_0x1df88c){const _0x5a9e9c=_0x1bc41c;let _0x127cec=dbConfig[_0x5a9e9c(0x15b)](_0x5a9e9c(0x176))['find']({'botID':_0x1df88c})['value']();if(_0x127cec){let _0x1f95b6=![];!_0x127cec[_0x5a9e9c(0x24a)]&&(_0x127cec={..._0x127cec,'exchange':_0x5a9e9c(0x178)},_0x1f95b6=!![]),!_0x127cec[_0x5a9e9c(0x1ac)]&&(_0x127cec={..._0x127cec,'basecoin':_0x5a9e9c(0x1e5)},_0x1f95b6=!![]),!_0x127cec[_0x5a9e9c(0x207)]&&(_0x127cec={..._0x127cec,'ordertype':'market'},_0x1f95b6=!![]),!_0x127cec['timeout']&&(_0x127cec={..._0x127cec,'timeout':0x14},_0x1f95b6=!![]),!_0x127cec[_0x5a9e9c(0x218)]&&(_0x127cec={..._0x127cec,'emojibuy':''},_0x1f95b6=!![]),!_0x127cec['emojisell']&&(_0x127cec={..._0x127cec,'emojisell':''},_0x1f95b6=!![]),!_0x127cec[_0x5a9e9c(0x25b)]&&(_0x127cec={..._0x127cec,'showname':![]},_0x1f95b6=!![]),_0x1f95b6&&(_0x127cec={'botID':_0x127cec[_0x5a9e9c(0x203)],'exchange':_0x127cec['exchange'],'apiKey':_0x127cec['apiKey'],'apiSecret':_0x127cec['apiSecret'],'basecoin':_0x127cec[_0x5a9e9c(0x1ac)],'botname':_0x127cec[_0x5a9e9c(0x210)],'showname':_0x127cec['showname'],'threshold':_0x127cec[_0x5a9e9c(0x1b9)],'ordertype':_0x127cec[_0x5a9e9c(0x207)],'timeout':_0x127cec['timeout'],'startdate':_0x127cec[_0x5a9e9c(0x16d)],'recreate':_0x127cec[_0x5a9e9c(0x195)],'timeshift':_0x127cec[_0x5a9e9c(0x26d)],'headless':_0x127cec['headless'],'cooldown':_0x127cec[_0x5a9e9c(0x1f2)],'emojibuy':_0x127cec[_0x5a9e9c(0x218)],'emojisell':_0x127cec[_0x5a9e9c(0x262)],'portfolio':_0x127cec[_0x5a9e9c(0x224)]},dbConfig[_0x5a9e9c(0x15b)]('bot')[_0x5a9e9c(0x227)]()[_0x5a9e9c(0x15c)](),dbConfig['get']('bot')[_0x5a9e9c(0x248)](_0x127cec)['write']());}else _0x127cec={'botID':_0x1df88c,'exchange':_0x5a9e9c(0x178),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x5a9e9c(0x1c9)+_0x1df88c,'showname':![],'threshold':'3','ordertype':_0x5a9e9c(0x253),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5a9e9c(0x26d)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x127cec;}function emittedConfiguration(){const _0x202304=_0x1bc41c;let _0x48ce89;return config[_0x202304(0x20e)]==''?_0x48ce89=config:_0x48ce89={...config,'apiKey':_0x202304(0x247),'apiSecret':_0x202304(0x247)},_0x48ce89;}function getSettings(){const _0x2d5985=_0x1bc41c;return dbSettings[_0x2d5985(0x15b)](_0x2d5985(0x182))[_0x2d5985(0x26e)]();}function getSecure(){const _0x2f23f9=_0x1bc41c;return dbSecure[_0x2f23f9(0x15b)](_0x2f23f9(0x16f))[_0x2f23f9(0x26e)]()||{};}function updateTimeshift(_0x54e6fd){const _0x10d8ad=_0x1bc41c;let _0x235bd5=dbConfig[_0x10d8ad(0x15b)](_0x10d8ad(0x176))[_0x10d8ad(0x1c6)]({'botID':botID})[_0x10d8ad(0x26e)]();_0x235bd5&&dbConfig[_0x10d8ad(0x15b)](_0x10d8ad(0x176))[_0x10d8ad(0x1c6)]({'botID':botID})[_0x10d8ad(0x161)]({'timeshift':_0x54e6fd})['write'](),config['timeshift']=_0x54e6fd,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x14b96d){const _0xdc36=_0x1bc41c;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x472c3d=dbConfig[_0xdc36(0x15b)](_0xdc36(0x176))[_0xdc36(0x1c6)]({'botID':botID})['value']();_0x14b96d={..._0x14b96d,'apiKey':crypt[_0xdc36(0x187)](secure['privateKey'],_0x14b96d[_0xdc36(0x20e)])[_0xdc36(0x1a6)],'apiSecret':crypt['decrypt'](secure[_0xdc36(0x199)],_0x14b96d[_0xdc36(0x1ad)])[_0xdc36(0x1a6)]};if(_0x472c3d){if(_0x14b96d[_0xdc36(0x20e)]==_0xdc36(0x247))_0x14b96d[_0xdc36(0x20e)]=config['apiKey'];if(_0x14b96d[_0xdc36(0x1ad)]==_0xdc36(0x247))_0x14b96d['apiSecret']=config['apiSecret'];dbConfig[_0xdc36(0x15b)](_0xdc36(0x176))['find']({'botID':botID})[_0xdc36(0x161)](_0x14b96d)[_0xdc36(0x15c)]();}else dbConfig[_0xdc36(0x15b)](_0xdc36(0x176))[_0xdc36(0x248)](_0x14b96d)[_0xdc36(0x15c)](),process[_0xdc36(0x1ea)]({'status':_0xdc36(0x213),'live':_0xdc36(0x1b0)},_0x2e4d64=>{});config={..._0x14b96d};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xdc36(0x1ea)]({'botname':_0x14b96d['botname']},_0x30246a=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x27fc9c){const _0x3ea066=_0x1bc41c,_0x2cc0e0={...config,'headless':_0x27fc9c[_0x3ea066(0x1ff)]};let _0x1288b5=dbConfig[_0x3ea066(0x15b)]('bot')['find']({'botID':botID})['value']();_0x1288b5&&dbConfig[_0x3ea066(0x15b)]('bot')[_0x3ea066(0x1c6)]({'botID':botID})[_0x3ea066(0x161)](_0x2cc0e0)[_0x3ea066(0x15c)](),config={..._0x2cc0e0},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x113f55){const _0x77705b=_0x1bc41c;return _0x113f55[_0x77705b(0x191)]('/','');}function updateNumberCoins(_0x2dd596){const _0xaf2a67=_0x1bc41c;_0x2dd596['eventType']&&_0x2dd596[_0xaf2a67(0x1b2)]==_0xaf2a67(0x246)&&_0x2dd596[_0xaf2a67(0x251)][_0xaf2a67(0x197)](_0x417dd7=>{const _0x4b7684=_0xaf2a67;let _0x83c945=currentCoins['find'](_0x2fc4e1=>_0x2fc4e1[_0x4b7684(0x21e)]==_0x417dd7[_0x4b7684(0x266)]),_0x355c0f=config[_0x4b7684(0x224)]['find'](_0x589c93=>_0x589c93[_0x4b7684(0x21e)]==_0x417dd7['asset']);if(_0x83c945&&_0x355c0f)_0x83c945[_0x4b7684(0x1e7)]=Math[_0x4b7684(0x188)](Number(_0x417dd7[_0x4b7684(0x22d)])+(_0x355c0f[_0x4b7684(0x1f8)]||0x0),0x0);});if(_0x2dd596[_0xaf2a67(0x1b2)]&&_0x2dd596[_0xaf2a67(0x1b2)]==_0xaf2a67(0x202)){if(_0x2dd596['orderType']==_0xaf2a67(0x18f)&&_0x2dd596[_0xaf2a67(0x1da)]==_0xaf2a67(0x1e0)){if(lastOrders)lastOrders[_0xaf2a67(0x197)](_0x7d3467=>{const _0x4da522=_0xaf2a67;if(_0x7d3467[_0x4da522(0x1c3)]==_0x2dd596[_0x4da522(0x1c3)]){if(_0x7d3467[_0x4da522(0x244)])_0x7d3467[_0x4da522(0x238)]=_0x2dd596[_0x4da522(0x23e)]*_0x7d3467[_0x4da522(0x1f6)];else _0x7d3467['filled']=_0x2dd596['accumulatedQuantity'];}});}}}async function getCoins(_0x557a00=!![],_0x394ccc=config[_0x1bc41c(0x1ac)]){const _0x2fa05b=_0x1bc41c;let _0x5f2ed0,_0x5e2dd4=[],_0x1a89ca=[],_0xf5a603=[];try{_0x5f2ed0=await exchange['fetchBalance'](),mybalances=_0x5f2ed0[_0x2fa05b(0x1fd)];if(!_0x557a00)for(const [_0x4cfbfc,_0x62e9f1]of Object['entries'](mybalances)){_0xf5a603['push'](_0x4cfbfc);}else config['portfolio']['forEach'](_0x4cf583=>{const _0x532c72=_0x2fa05b;if(!_0x4cf583[_0x532c72(0x20b)])_0xf5a603[_0x532c72(0x248)](_0x4cf583[_0x532c72(0x21e)]);});if(_0x394ccc=='')for(const [_0xbf6b33,_0x14533a]of Object[_0x2fa05b(0x194)](mybalances)){_0x14533a[_0x2fa05b(0x1be)]()!=0x0&&_0x1a89ca['push']({'coin':_0xbf6b33});}else for(const [_0x4b76c0,_0x3e903a]of Object[_0x2fa05b(0x194)](mybalances)){if(_0xf5a603[_0x2fa05b(0x177)](_0x4b76c0)){const _0x5149b1=config[_0x2fa05b(0x224)][_0x2fa05b(0x1c6)](_0x3d0425=>_0x3d0425['coin']==_0x4b76c0);if((_0x3e903a[_0x2fa05b(0x1be)]()!=0x0||_0x5149b1)&&(allSymbols[_0x2fa05b(0x177)](_0x4b76c0+'/'+_0x394ccc)||_0x4b76c0==_0x394ccc))_0x1a89ca[_0x2fa05b(0x248)]({'coin':_0x4b76c0,'symbol':_0x4b76c0+'/'+_0x394ccc,'reverse':![],'number':Math[_0x2fa05b(0x188)](_0x3e903a+(_0x5149b1&&_0x5149b1[_0x2fa05b(0x1f8)]||0x0),0x0)}),_0x4b76c0!=_0x394ccc&&_0x5e2dd4['push'](_0x4b76c0+'/'+_0x394ccc);else(_0x3e903a[_0x2fa05b(0x1be)]()!=0x0||_0x5149b1)&&allSymbols[_0x2fa05b(0x177)](_0x394ccc+'/'+_0x4b76c0)&&(_0x1a89ca['push']({'coin':_0x4b76c0,'symbol':_0x394ccc+'/'+_0x4b76c0,'reverse':!![],'number':Math[_0x2fa05b(0x188)](_0x3e903a+(_0x5149b1&&_0x5149b1[_0x2fa05b(0x1f8)]||0x0),0x0)}),_0x4b76c0!=_0x394ccc&&_0x5e2dd4['push'](_0x394ccc+'/'+_0x4b76c0));}}}catch(_0x17ec57){if(!_0x557a00){if(_0x17ec57['toString']()['includes'](_0x2fa05b(0x1cd)))return logHistory(_0x2fa05b(0x1a8),_0x2fa05b(0x15f)),![];else{if(_0x17ec57[_0x2fa05b(0x1be)]()[_0x2fa05b(0x177)](_0x2fa05b(0x1c2)))return logHistory(_0x2fa05b(0x1a8),_0x2fa05b(0x264)),![];else{if(_0x17ec57[_0x2fa05b(0x1be)]()[_0x2fa05b(0x177)](_0x2fa05b(0x250)))return logHistory(_0x2fa05b(0x1a8),_0x2fa05b(0x173)),![];else await handleError(_0x17ec57,_0x2fa05b(0x18a));}}}else await handleError(_0x17ec57,'getCoins()');}return _0x1a89ca;}async function getPortfolio(_0xd8671){const _0x3f79a4=_0x1bc41c;let _0x2315a4=[],_0x41cfb2=[],_0x33f287,_0x15417c=[],_0x6de3e6,_0x5707ec;_0xd8671[_0x3f79a4(0x20e)]===_0x3f79a4(0x247)||_0xd8671[_0x3f79a4(0x1ad)]===_0x3f79a4(0x247)?(_0x6de3e6=config[_0x3f79a4(0x20e)],_0x5707ec=config[_0x3f79a4(0x1ad)]):(_0x6de3e6=_0xd8671[_0x3f79a4(0x20e)],_0x5707ec=_0xd8671[_0x3f79a4(0x1ad)]);await initExchange(_0x6de3e6,_0x5707ec);let _0x39c03a=await loadSymbols();if(_0x39c03a){_0x15417c=await getCoins(![],_0xd8671[_0x3f79a4(0x1ac)]);if(_0x15417c===![])proxyEmit(_0x3f79a4(0x224),![]);else{if(_0xd8671[_0x3f79a4(0x1ac)]=='')proxyEmit('portfolio',_0x15417c);else{_0x15417c[_0x3f79a4(0x197)](_0x57b41f=>{const _0x1e46cf=_0x3f79a4;_0x2315a4[_0x1e46cf(0x248)](_0x57b41f[_0x1e46cf(0x189)]);});try{_0x41cfb2=await exchange[_0x3f79a4(0x26b)](_0x2315a4);}catch(_0x4184a5){await handleError(_0x4184a5,'getPortfolio()');}_0x15417c[_0x3f79a4(0x197)](_0x15935c=>{const _0x4650c0=_0x3f79a4;_0x15935c['coin']!=_0xd8671[_0x4650c0(0x1ac)]?_0x33f287=_0x15935c[_0x4650c0(0x244)]?0x1/_0x41cfb2[_0x15935c['symbol']][_0x4650c0(0x1a0)]:_0x41cfb2[_0x15935c[_0x4650c0(0x189)]][_0x4650c0(0x1a0)]:_0x33f287=0x1,_0x15935c[_0x4650c0(0x1f6)]=formatResult(_0x33f287,0x8);}),proxyEmit(_0x3f79a4(0x224),_0x15417c);}}}else proxyEmit(_0x3f79a4(0x224),![]);}function checkMinimums(_0x39c4e8){const _0x2a0445=_0x1bc41c;let _0x1e90d2=!![];const _0x58b80f=!_0x39c4e8[_0x2a0445(0x244)]?markets[_0x39c4e8[_0x2a0445(0x189)]]['limits'][_0x2a0445(0x245)][_0x2a0445(0x1d5)]:markets[_0x39c4e8[_0x2a0445(0x189)]][_0x2a0445(0x1d0)][_0x2a0445(0x1a5)][_0x2a0445(0x1d5)],_0x10c66c=!_0x39c4e8[_0x2a0445(0x244)]?markets[_0x39c4e8['symbol']][_0x2a0445(0x1d0)][_0x2a0445(0x1a5)][_0x2a0445(0x1d5)]:markets[_0x39c4e8['symbol']][_0x2a0445(0x1d0)][_0x2a0445(0x245)][_0x2a0445(0x1d5)];if(Math[_0x2a0445(0x269)](_0x39c4e8[_0x2a0445(0x25f)])<_0x58b80f)_0x1e90d2=![];if(Math[_0x2a0445(0x269)](_0x39c4e8[_0x2a0445(0x25f)])*_0x39c4e8[_0x2a0445(0x1a0)]<_0x10c66c)_0x1e90d2=![];let _0x564fed=config[_0x2a0445(0x224)][_0x2a0445(0x1c6)](_0x13d822=>_0x13d822['coin']==_0x39c4e8[_0x2a0445(0x21e)]);if(Math[_0x2a0445(0x269)](_0x39c4e8[_0x2a0445(0x25f)])>_0x39c4e8[_0x2a0445(0x1e7)]-_0x564fed['offset'])_0x1e90d2=![];return _0x1e90d2;}async function getBalances(){const _0x31d8b0=_0x1bc41c;let _0x46b65e=0x0,_0x77ea7;const _0x97169c=config[_0x31d8b0(0x1b9)];currentCoins[_0x31d8b0(0x197)](_0x48947d=>{const _0x2c4d73=_0x31d8b0;if(_0x48947d[_0x2c4d73(0x21e)]!=config['basecoin']){let _0x2f0dc1=global['ticker'][noslash(_0x48947d[_0x2c4d73(0x189)])];_0x77ea7=_0x48947d['reverse']?0x1/_0x2f0dc1:_0x2f0dc1;}else _0x77ea7=0x1;let _0x3bf1fe=_0x48947d['number']*_0x77ea7;_0x46b65e+=_0x3bf1fe,_0x48947d[_0x2c4d73(0x1a0)]=formatResult(Number(_0x77ea7),0x8),_0x48947d['value']=_0x3bf1fe;}),currentCoins['forEach'](_0x32200c=>{const _0x3cae26=_0x31d8b0;let _0x74baef=config[_0x3cae26(0x224)][_0x3cae26(0x1c6)](_0x341c76=>_0x341c76[_0x3cae26(0x21e)]==_0x32200c[_0x3cae26(0x21e)]),_0x48a777=Number(_0x74baef[_0x3cae26(0x186)]),_0x3def1c=_0x32200c['value']/_0x46b65e*0x64,_0x1afbc9=_0x48a777*_0x46b65e/0x64/_0x32200c[_0x3cae26(0x1a0)]-_0x32200c['number'];_0x32200c['distribution']=formatResult(_0x3def1c,0x3),_0x32200c[_0x3cae26(0x23f)]=formatResult(_0x48a777,0x3),_0x32200c['trade']=formatResult(_0x1afbc9,0x8),_0x32200c['side']='',_0x32200c[_0x3cae26(0x1b7)]='';if(_0x32200c['coin']!=config[_0x3cae26(0x1ac)]){if(_0x32200c[_0x3cae26(0x186)]>_0x48a777)_0x32200c[_0x3cae26(0x1dd)]=_0x3cae26(0x16c),_0x32200c[_0x3cae26(0x1b7)]=checkMinimums(_0x32200c);else _0x32200c['distribution']<_0x48a777&&(_0x32200c['side']='buy',_0x32200c[_0x3cae26(0x1b7)]=checkMinimums(_0x32200c));}_0x32200c[_0x3cae26(0x24b)]=_0x32200c[_0x3cae26(0x186)]/_0x32200c[_0x3cae26(0x23f)]-0x1;}),currentCoins[_0x31d8b0(0x171)]((_0x509351,_0x4fa7d7)=>_0x509351['delta']<_0x4fa7d7[_0x31d8b0(0x24b)]?0x1:_0x4fa7d7[_0x31d8b0(0x24b)]<_0x509351[_0x31d8b0(0x24b)]?-0x1:0x0);const _0x187533=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x187533['eur'],'usd':_0x187533['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x97169c},proxyEmit(_0x31d8b0(0x251),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x31d8b0(0x1ff)])headlessMode({'portfolio':currentCoins,'threshold':_0x97169c});else notifyBalance({'portfolio':currentCoins,'threshold':_0x97169c});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2b0a91=_0x1bc41c;if(!lastBalances)return;let _0x4f81f4=[],_0x222d7e;JSON[_0x2b0a91(0x1c8)](lastBalances[_0x2b0a91(0x224)])[_0x2b0a91(0x197)](_0x433ae4=>{const _0x3a2666=_0x2b0a91;let _0x104b93={'coin':_0x433ae4[_0x3a2666(0x21e)],'number':_0x433ae4['number'],'price':_0x433ae4['last']};_0x4f81f4['push'](_0x104b93);});const _0x331141=await getFiat();_0x222d7e={'date':lastBalances[_0x2b0a91(0x1ab)][_0x2b0a91(0x237)]('\x20')[0x0],'eur':_0x331141[_0x2b0a91(0x175)],'usd':_0x331141[_0x2b0a91(0x15a)],'coins':_0x4f81f4};let _0x487a15=dbPerformance[_0x2b0a91(0x15b)](_0x2b0a91(0x225))[_0x2b0a91(0x1c6)]({'date':_0x222d7e[_0x2b0a91(0x15e)]})[_0x2b0a91(0x26e)]();_0x487a15?dbPerformance[_0x2b0a91(0x15b)](_0x2b0a91(0x225))[_0x2b0a91(0x1c6)]({'date':_0x222d7e[_0x2b0a91(0x15e)]})['assign'](_0x222d7e)[_0x2b0a91(0x15c)]():dbPerformance[_0x2b0a91(0x15b)]('data')['push'](_0x222d7e)[_0x2b0a91(0x15c)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x147e50=_0x1bc41c;if(dbPerformance[_0x147e50(0x1de)]('data')[_0x147e50(0x26e)]()){let _0xaf8590=dbPerformance[_0x147e50(0x15b)](_0x147e50(0x225))[_0x147e50(0x160)]('date')[_0x147e50(0x26e)]();proxyEmit('performance',_0xaf8590),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x1c2e7c=!![]){const _0x126758=_0x1bc41c;let _0xc2d6b5=dbPerformance[_0x126758(0x15b)]('data')[_0x126758(0x1c6)]({'date':config['startdate']})[_0x126758(0x26e)]();config['apiKey']!=''&&!_0xc2d6b5&&(await setStartDatePerformance(config),_0xc2d6b5=dbPerformance[_0x126758(0x15b)](_0x126758(0x225))[_0x126758(0x1c6)]({'date':config['startdate']})[_0x126758(0x26e)]());if(config[_0x126758(0x20e)]==''||!_0xc2d6b5)return{};let _0x3f3e69=0x0,_0x4ff122=0x0,_0x3b6aa9=0x0,_0xf6795a=[],_0x4f6ece=0x0;config['portfolio'][_0x126758(0x197)](_0x492eba=>{const _0x482b59=_0x126758;if(!_0x492eba[_0x482b59(0x20b)]){_0xf6795a[_0x4f6ece]={'coin':_0x492eba['coin'],'symbol':_0x492eba[_0x482b59(0x189)],'number':_0x492eba[_0x482b59(0x256)],'price':_0x492eba[_0x482b59(0x1fe)]},_0x3f3e69+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba['startnumber'];if(config[_0x482b59(0x1ac)]=='BTC')_0x4ff122+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba['startnumber']*_0xc2d6b5[_0x482b59(0x175)],_0x3b6aa9+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba['startnumber']*_0xc2d6b5[_0x482b59(0x15a)];else{if(config[_0x482b59(0x1ac)]==_0x482b59(0x243)||config['basecoin']==_0x482b59(0x233)||config[_0x482b59(0x1ac)]==_0x482b59(0x1df))_0x4ff122+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba[_0x482b59(0x256)]*_0xc2d6b5['eur']/_0xc2d6b5[_0x482b59(0x15a)],_0x3b6aa9+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba[_0x482b59(0x256)];else config[_0x482b59(0x1ac)]=='EUR'&&(_0x4ff122+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba[_0x482b59(0x256)],_0x3b6aa9+=_0x492eba[_0x482b59(0x1fe)]*_0x492eba[_0x482b59(0x256)]*_0xc2d6b5[_0x482b59(0x15a)]/_0xc2d6b5[_0x482b59(0x175)]);}_0x4f6ece++;}});let _0x2d87b0={'basecoin':_0x3f3e69,'eur':_0x4ff122,'usd':_0x3b6aa9,'coins':_0xf6795a};if(_0x1c2e7c)proxyEmit(_0x126758(0x168),_0x2d87b0);return _0x2d87b0;}function headlessMode(_0x5488f6){const _0x5cd462=_0x1bc41c;let _0x13fc95=_0x5488f6[_0x5cd462(0x224)],_0x1d2809=_0x5488f6[_0x5cd462(0x1b9)],_0xfa16af=[];for(let _0x4af230 of _0x13fc95){if(_0x4af230[_0x5cd462(0x21e)]!=config[_0x5cd462(0x1ac)]){if(_0x4af230[_0x5cd462(0x186)]/_0x4af230[_0x5cd462(0x23f)]-0x1>=_0x1d2809/0x64){if(_0x4af230[_0x5cd462(0x1b7)])_0xfa16af['push'](_0x4af230);}else{if(_0x4af230[_0x5cd462(0x186)]/_0x4af230[_0x5cd462(0x23f)]-0x1<=-_0x1d2809/0x64){if(_0x4af230['valid'])_0xfa16af[_0x5cd462(0x248)](_0x4af230);}}}}_0xfa16af[_0x5cd462(0x1d4)]>0x0&&placeOrder(_0xfa16af);}function notifyBalance(_0x51e588){const _0x25d491=_0x1bc41c;let _0x14ec0e=_0x51e588[_0x25d491(0x224)],_0x15efc9=_0x51e588['threshold'],_0x1e3777=[];for(let _0x2b3c3f of _0x14ec0e){if(_0x2b3c3f[_0x25d491(0x21e)]!=config[_0x25d491(0x1ac)]){if(_0x2b3c3f['distribution']/_0x2b3c3f['target']-0x1>=_0x15efc9/0x64){if(_0x2b3c3f[_0x25d491(0x1b7)])_0x1e3777[_0x25d491(0x248)](_0x2b3c3f);}else{if(_0x2b3c3f[_0x25d491(0x186)]/_0x2b3c3f[_0x25d491(0x23f)]-0x1<=-_0x15efc9/0x64){if(_0x2b3c3f[_0x25d491(0x1b7)])_0x1e3777[_0x25d491(0x248)](_0x2b3c3f);}}}}if(_0x1e3777[_0x25d491(0x1d4)]>0x0){let _0x16bf77=_0x1e3777[_0x25d491(0x196)](_0x4cb28f=>_0x4cb28f[_0x25d491(0x21e)]);_0x16bf77['sort']();let _0x2b3246=_0x16bf77[_0x25d491(0x21b)](',\x20');if(lastCoinsToBalance!==_0x2b3246)logHistory('order',_0x25d491(0x22a)+_0x2b3246);lastCoinsToBalance=_0x2b3246;}}function symbolToCoin(_0x46ccba){const _0x27c102=_0x1bc41c;let _0x473f0d;if(_0x46ccba[_0x27c102(0x177)]('/'+config[_0x27c102(0x1ac)]))_0x473f0d=_0x46ccba['replace']('/'+config[_0x27c102(0x1ac)],'');if(_0x46ccba['includes'](config[_0x27c102(0x1ac)]+'/'))_0x473f0d=_0x46ccba[_0x27c102(0x191)](config[_0x27c102(0x1ac)]+'/','');return _0x473f0d;}async function validateOrders(_0x46bca6=0x0){const _0x3a9393=_0x1bc41c;let _0x5b7dbd=[],_0x2141ab=config[_0x3a9393(0x207)]==_0x3a9393(0x253)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3a9393(0x25c)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x3a9393(0x197)](_0x3a8539=>{const _0x5dbea6=_0x3a9393;let _0x259080=previousCoins['find'](_0x512e79=>_0x512e79[_0x5dbea6(0x21e)]==symbolToCoin(_0x3a8539[_0x5dbea6(0x189)])),_0x842e49=currentCoins['find'](_0x5808f6=>_0x5808f6['coin']==symbolToCoin(_0x3a8539[_0x5dbea6(0x189)])),_0x33882d,_0x52b8f6;_0x3a8539['side']==_0x5dbea6(0x20a)&&!_0x3a8539[_0x5dbea6(0x244)]||_0x3a8539[_0x5dbea6(0x1dd)]==_0x5dbea6(0x16c)&&_0x3a8539[_0x5dbea6(0x244)]?(_0x33882d=_0x259080[_0x5dbea6(0x1e7)]+0.9*_0x3a8539[_0x5dbea6(0x238)],_0x52b8f6=_0x259080['number']+1.1*_0x3a8539['filled']):(_0x33882d=_0x259080[_0x5dbea6(0x1e7)]-1.1*_0x3a8539[_0x5dbea6(0x238)],_0x52b8f6=_0x259080['number']-0.9*_0x3a8539['filled']);const _0x231014=_0x3a8539[_0x5dbea6(0x238)]!=0x0&&_0x842e49[_0x5dbea6(0x1e7)]>=_0x33882d&&_0x842e49[_0x5dbea6(0x1e7)]<=_0x52b8f6;_0x5b7dbd[_0x5dbea6(0x248)](_0x231014);if(_0x231014&&config['ordertype']!=_0x5dbea6(0x253)){if(_0x3a8539[_0x5dbea6(0x244)])logHistory(_0x5dbea6(0x19b),'Order\x20filled:\x20'+_0x3a8539['symbol']+'\x20'+_0x3a8539[_0x5dbea6(0x1dd)]+'\x20#'+formatResult(_0x3a8539[_0x5dbea6(0x238)]/_0x3a8539[_0x5dbea6(0x1f6)],0x8)+'\x20@'+formatResult(_0x3a8539[_0x5dbea6(0x1f6)],0x8));else logHistory(_0x5dbea6(0x19b),_0x5dbea6(0x1cb)+_0x3a8539['symbol']+'\x20'+_0x3a8539['side']+'\x20#'+formatResult(_0x3a8539[_0x5dbea6(0x238)],0x8)+'\x20@'+formatResult(_0x3a8539[_0x5dbea6(0x1f6)],0x8));}}),_0x5b7dbd[_0x3a9393(0x197)]((_0x4484a0,_0x32e3b5)=>{const _0x1345c7=_0x3a9393;if(_0x4484a0)lastOrders[_0x1345c7(0x1eb)](_0x32e3b5,0x1);});if(_0x46bca6<_0x2141ab&&_0x5b7dbd[_0x3a9393(0x177)](![])){if(_0x46bca6==0x0){config[_0x3a9393(0x207)]=='market'?logHistory(_0x3a9393(0x1a8),_0x3a9393(0x255)):logHistory(_0x3a9393(0x1a8),_0x3a9393(0x1a3));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x46bca6);},0xa*0x3e8);}else{(_0x46bca6==0x1||_0x46bca6==Math[_0x3a9393(0x1b6)](_0x2141ab/0x2)||_0x46bca6==_0x2141ab-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x46bca6);},validateOrderInterval);}}else{lockOrders=![];if(_0x46bca6>0x0&&!_0x5b7dbd['includes'](![]))config[_0x3a9393(0x207)]==_0x3a9393(0x253)?logHistory('success',_0x3a9393(0x208)):logHistory(_0x3a9393(0x184),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x46bca6>0x0&&_0x5b7dbd['includes'](![])&&(config[_0x3a9393(0x207)]==_0x3a9393(0x253)?logHistory('success',_0x3a9393(0x1f7)+Math[_0x3a9393(0x1b6)](_0x2141ab*validateOrderInterval/0xea60)+_0x3a9393(0x1bf)):(lastOrders[_0x3a9393(0x197)](async _0x1afd3a=>{const _0x3dbe7b=_0x3a9393;try{const _0x50582d=await exchange[_0x3dbe7b(0x190)](_0x1afd3a[_0x3dbe7b(0x1c3)],_0x1afd3a[_0x3dbe7b(0x189)]);}catch(_0x527cd1){if(_0x527cd1[_0x3dbe7b(0x1be)]()[_0x3dbe7b(0x177)](_0x3dbe7b(0x17c))){}else await handleError(_0x527cd1,'cancelOrder()');}}),logHistory(_0x3a9393(0x184),_0x3a9393(0x1f0)+Math['round'](_0x2141ab*validateOrderInterval/0xea60)+_0x3a9393(0x1bf))));}}async function resetCoinResults(){const _0x45fac0=_0x1bc41c;dbCoinResults[_0x45fac0(0x15b)](_0x45fac0(0x19f))[_0x45fac0(0x227)]()[_0x45fac0(0x15c)]();let _0x436f57=await getStartingBalances(![]);_0x436f57[_0x45fac0(0x19f)][_0x45fac0(0x197)](_0xfe2ae3=>{const _0x722528=_0x45fac0,_0x52c645=_0xfe2ae3[_0x722528(0x189)][_0x722528(0x177)](config['basecoin']+'/');if(_0xfe2ae3['coin']!=config[_0x722528(0x1ac)]){let _0x29bd8b={'coin':_0xfe2ae3[_0x722528(0x21e)],'number':_0xfe2ae3['number'],'breakeven':_0xfe2ae3[_0x722528(0x1f6)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x722528(0x15b)](_0x722528(0x19f))[_0x722528(0x248)](_0x29bd8b)['write']();}});}async function updateCoinResults(_0x36cb7e){const _0x2e35e6=_0x1bc41c;let _0x1b6a61,_0x5ad7fe,_0x2b103f,_0x2faeb6,_0x341e15,_0x3d59c7,_0x2f60d8=dbCoinResults[_0x2e35e6(0x15b)](_0x2e35e6(0x19f))['find']({'coin':_0x36cb7e[_0x2e35e6(0x21e)]})[_0x2e35e6(0x26e)]();if(!_0x2f60d8)return;if(_0x36cb7e['fee']&&_0x36cb7e[_0x2e35e6(0x1a2)][_0x2e35e6(0x17e)]==config[_0x2e35e6(0x1ac)])_0x1b6a61=_0x36cb7e[_0x2e35e6(0x1a2)]['cost'];else{if(_0x36cb7e[_0x2e35e6(0x1a2)]&&_0x36cb7e[_0x2e35e6(0x1a2)][_0x2e35e6(0x17e)]==_0x2e35e6(0x1d2))_0x1b6a61=_0x36cb7e[_0x2e35e6(0x1a2)]['cost']*global[_0x2e35e6(0x170)][_0x2e35e6(0x1d2)+config[_0x2e35e6(0x1ac)]];else _0x1b6a61=0.001*_0x36cb7e[_0x2e35e6(0x238)];}const _0x36f494=_0x36cb7e['symbol'][_0x2e35e6(0x177)](config['basecoin']+'/');_0x36f494&&(_0x3d59c7={'coin':_0x36cb7e[_0x2e35e6(0x21e)],'symbol':_0x36cb7e['symbol'],'filled':_0x36cb7e['filled']*_0x36cb7e[_0x2e35e6(0x1f6)],'side':_0x36cb7e['side']==_0x2e35e6(0x16c)?_0x2e35e6(0x20a):'sell','price':0x1/_0x36cb7e['price']},_0x36cb7e={..._0x3d59c7});_0x36cb7e[_0x2e35e6(0x1dd)]=='buy'?_0x2b103f=(_0x2f60d8[_0x2e35e6(0x163)]*_0x2f60d8[_0x2e35e6(0x1e7)]+_0x36cb7e[_0x2e35e6(0x1f6)]*_0x36cb7e[_0x2e35e6(0x238)])/(_0x2f60d8[_0x2e35e6(0x1e7)]+_0x36cb7e[_0x2e35e6(0x238)]):_0x2b103f=(_0x2f60d8[_0x2e35e6(0x163)]*_0x2f60d8['number']-_0x36cb7e[_0x2e35e6(0x1f6)]*_0x36cb7e['filled'])/(_0x2f60d8[_0x2e35e6(0x1e7)]-_0x36cb7e[_0x2e35e6(0x238)]);_0x36cb7e[_0x2e35e6(0x1dd)]==_0x2e35e6(0x20a)?_0x2faeb6=_0x2f60d8[_0x2e35e6(0x1aa)]:_0x2faeb6=_0x2f60d8[_0x2e35e6(0x1aa)]+(_0x36cb7e[_0x2e35e6(0x1f6)]-_0x2f60d8[_0x2e35e6(0x163)])*_0x36cb7e[_0x2e35e6(0x238)];_0x5ad7fe=_0x36cb7e[_0x2e35e6(0x1dd)]==_0x2e35e6(0x16c)?_0x2f60d8[_0x2e35e6(0x1e7)]-_0x36cb7e[_0x2e35e6(0x238)]:_0x2f60d8['number']+_0x36cb7e[_0x2e35e6(0x238)],_0x341e15=(_0x36cb7e[_0x2e35e6(0x1f6)]-_0x2b103f)*_0x5ad7fe;let _0x46feb9={'coin':_0x36cb7e['coin'],'number':_0x5ad7fe,'breakeven':formatResult(_0x2b103f,0x8),'realized':formatResult(_0x2faeb6,0x8),'unrealized':formatResult(_0x341e15,0x8),'fees':formatResult(_0x2f60d8[_0x2e35e6(0x217)]+_0x1b6a61,0x8),'sells':_0x36cb7e[_0x2e35e6(0x1dd)]=='sell'?_0x2f60d8[_0x2e35e6(0x26a)]+0x1:_0x2f60d8[_0x2e35e6(0x26a)],'buys':_0x36cb7e[_0x2e35e6(0x1dd)]=='buy'?_0x2f60d8[_0x2e35e6(0x1db)]+0x1:_0x2f60d8[_0x2e35e6(0x1db)]};dbCoinResults['get'](_0x2e35e6(0x19f))[_0x2e35e6(0x1c6)]({'coin':_0x36cb7e['coin']})[_0x2e35e6(0x161)](_0x46feb9)[_0x2e35e6(0x15c)]();}async function placeOrder(_0x336a58){const _0x50e80a=_0x1bc41c,_0x337e0a=config[_0x50e80a(0x207)]=='market'?_0x50e80a(0x253):_0x50e80a(0x18c);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x207bee of _0x336a58){let _0x1a6b5b,_0x276201,_0x219df0,_0x45871b,_0x42b3ad,_0x369f73=_0x207bee['symbol'];try{const _0x239bb2=await exchange[_0x50e80a(0x26b)](_0x369f73),_0x32ce62=_0x239bb2[_0x369f73];_0x1a6b5b=_0x32ce62['last'],_0x276201=_0x32ce62[_0x50e80a(0x159)],_0x219df0=_0x32ce62['ask'];_0x207bee[_0x50e80a(0x244)]?(_0x45871b=_0x207bee[_0x50e80a(0x1dd)]=='buy'?_0x50e80a(0x16c):_0x50e80a(0x20a),_0x42b3ad=Math[_0x50e80a(0x269)](_0x207bee[_0x50e80a(0x25f)])/_0x1a6b5b):(_0x45871b=_0x207bee['side'],_0x42b3ad=Math[_0x50e80a(0x269)](_0x207bee['trade']));_0x337e0a==_0x50e80a(0x18c)&&(config['ordertype']==_0x50e80a(0x23d)&&(_0x1a6b5b=_0x45871b==_0x50e80a(0x20a)?_0x276201:_0x219df0),config[_0x50e80a(0x207)]==_0x50e80a(0x268)&&(_0x1a6b5b=_0x45871b==_0x50e80a(0x20a)?_0x219df0:_0x276201));_0x42b3ad=formatResult(_0x42b3ad,0x8),_0x1a6b5b=formatResult(_0x1a6b5b,0x8);const _0x34bb36=await exchange[_0x50e80a(0x1a4)](_0x369f73,_0x337e0a,_0x45871b,_0x42b3ad,_0x1a6b5b);lastOrders['push']({'orderId':_0x34bb36['id'],'symbol':_0x369f73,'side':_0x45871b,'reverse':_0x207bee['reverse'],'amount':_0x207bee[_0x50e80a(0x244)]?_0x34bb36[_0x50e80a(0x245)]*_0x34bb36[_0x50e80a(0x1f6)]:_0x34bb36[_0x50e80a(0x245)],'filled':_0x207bee[_0x50e80a(0x244)]?_0x34bb36[_0x50e80a(0x238)]*_0x34bb36[_0x50e80a(0x1f6)]:_0x34bb36[_0x50e80a(0x238)],'price':_0x34bb36[_0x50e80a(0x1f6)]});const _0x1d1bd1=_0x45871b==_0x50e80a(0x16c)?config[_0x50e80a(0x262)]?String[_0x50e80a(0x220)]('0x'+config[_0x50e80a(0x262)])+'\x20':'':config[_0x50e80a(0x218)]?String[_0x50e80a(0x220)]('0x'+config[_0x50e80a(0x218)])+'\x20':'',_0x55cb51=_0x337e0a==_0x50e80a(0x253)?_0x50e80a(0x1f9):config[_0x50e80a(0x207)]==_0x50e80a(0x23d)?_0x50e80a(0x22b):'Limit\x20(low-margin)';if(_0x337e0a==_0x50e80a(0x253))logHistory('order',''+_0x1d1bd1+_0x55cb51+'\x20order:\x20'+_0x369f73+'\x20'+_0x45871b+'\x20#'+formatResult(_0x34bb36[_0x50e80a(0x238)],0x8)+'\x20@'+formatResult(_0x34bb36['price'],0x8));else logHistory(_0x50e80a(0x19b),''+_0x1d1bd1+_0x55cb51+'\x20order:\x20'+_0x369f73+'\x20'+_0x45871b+'\x20#'+formatResult(_0x34bb36[_0x50e80a(0x245)],0x8)+'\x20@'+formatResult(_0x34bb36[_0x50e80a(0x1f6)],0x8));_0x34bb36[_0x50e80a(0x21e)]=_0x207bee[_0x50e80a(0x21e)],await updateCoinResults(_0x34bb36);if(config[_0x50e80a(0x1f2)]!=0x0){let _0xfc3bb6=null;if(cooldownTracker[_0x50e80a(0x1d4)]==config[_0x50e80a(0x1f2)]-0x1)_0xfc3bb6=cooldownTracker[_0x50e80a(0x209)]();const _0x4c0fa5=getTimeStamp();cooldownTracker[_0x50e80a(0x248)](_0x4c0fa5);if(_0xfc3bb6){const _0x59608f=fns[_0x50e80a(0x211)](new Date(_0x4c0fa5),new Date(_0xfc3bb6));_0x59608f<cooldownInterval&&(logHistory(_0x50e80a(0x1a8),_0x50e80a(0x215)+config[_0x50e80a(0x1f2)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x50e80a(0x1f4)+cooldownPeriod/(0xe10*0x3e8)+_0x50e80a(0x1b4)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x21ecee){if(_0x21ecee[_0x50e80a(0x1be)]()[_0x50e80a(0x177)]('MIN_NOTIONAL'))logHistory(_0x50e80a(0x1a8),_0x50e80a(0x216)+_0x369f73);else{if(_0x21ecee[_0x50e80a(0x1be)]()[_0x50e80a(0x177)](_0x50e80a(0x165)))logHistory(_0x50e80a(0x1a8),_0x50e80a(0x214)+_0x369f73);else await handleError(_0x21ecee,'placeOrder()');}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x50e80a(0x207)]==_0x50e80a(0x253)?logHistory(_0x50e80a(0x1a8),_0x50e80a(0x19c)):logHistory(_0x50e80a(0x1a8),_0x50e80a(0x1ec)));else coolingDown&&(!config['headless']&&logHistory(_0x50e80a(0x1a8),_0x50e80a(0x1b5)));}}function logHistory(_0x104461,_0x1ea4a9,_0x41fd4f=''){const _0x26c44f=_0x1bc41c;let _0x5269a1={'time':getTimeStamp(),'type':_0x104461,'event':_0x1ea4a9};dbLogs['get']('logs')[_0x26c44f(0x248)](_0x5269a1)[_0x26c44f(0x15c)]();if(_0x41fd4f=='')_0x41fd4f=_0x1ea4a9;proxyEmit(_0x26c44f(0x16b),{'log':_0x5269a1,'summary':_0x41fd4f}),process['send']({'telegram':{..._0x5269a1,'botname':config[_0x26c44f(0x210)],'showname':config[_0x26c44f(0x25b)]}},_0x277fba=>{}),logging(''+_0x5269a1[_0x26c44f(0x16b)]);}function emitHistory(_0x1b7109={}){const _0x3b2065=_0x1bc41c;Object[_0x3b2065(0x258)](_0x1b7109)[_0x3b2065(0x1d4)]==0x0&&(_0x1b7109={'type':['order',_0x3b2065(0x16b)],'event':'','page':0x1});if(_0x1b7109[_0x3b2065(0x19d)][_0x3b2065(0x177)](_0x3b2065(0x16b)))_0x1b7109[_0x3b2065(0x19d)]['splice'](_0x1b7109[_0x3b2065(0x19d)][_0x3b2065(0x181)](_0x3b2065(0x16b)),0x1,'error','success');if(dbLogs['has'](_0x3b2065(0x1a7))[_0x3b2065(0x26e)]()){let _0x522b36=dbLogs[_0x3b2065(0x15b)](_0x3b2065(0x1a7))['filter'](_0x58382a=>{const _0x2e473a=_0x3b2065;if(_0x1b7109[_0x2e473a(0x19d)][_0x2e473a(0x1d4)]==0x0)return![];else return _0x1b7109[_0x2e473a(0x19d)][_0x2e473a(0x177)](_0x58382a[_0x2e473a(0x19d)]);})[_0x3b2065(0x1fc)](_0x357c0a=>{const _0x192f1c=_0x3b2065;if(_0x1b7109['event']=='')return!![];else return _0x357c0a[_0x192f1c(0x16b)][_0x192f1c(0x1ed)]()[_0x192f1c(0x177)](_0x1b7109[_0x192f1c(0x16b)][_0x192f1c(0x1ed)]());})['sortBy'](_0x3b2065(0x1ab)),_0x28b12b=_0x522b36[_0x3b2065(0x26e)]()[_0x3b2065(0x1d4)];_0x522b36=_0x522b36[_0x3b2065(0x244)]()[_0x3b2065(0x183)]((_0x1b7109['page']-0x1)*logPageSize,_0x1b7109[_0x3b2065(0x1bc)]*logPageSize-0x1)[_0x3b2065(0x244)]()[_0x3b2065(0x26e)](),proxyEmit('event-history',{'logs':_0x522b36,'total':_0x28b12b});}else proxyEmit(_0x3b2065(0x235),{'logs':[],'total':0x0});}async function pauseBot(_0x25e619){const _0x27c3c6=_0x1bc41c,_0x4f5170=new Date()[_0x27c3c6(0x212)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x4f5170-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x27c3c6(0x1ea)]({'stop':_0x27c3c6(0x24f)},_0x2c3ed3=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x27c3c6(0x212)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error','Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x25e619),botPaused=![],reset();}}async function handleError(_0x2744f2,_0xa35777,_0x1ce289=''){const _0x40724f=_0x1bc41c;if(_0x2744f2['toString']()[_0x40724f(0x177)](_0x40724f(0x17d)))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x254)),await pauseBot(pauseBotInterval);else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)](_0x40724f(0x185)))logHistory(_0x40724f(0x1a8),_0xa35777+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)]('RequestTimeout'))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x260)),await pauseBot(pauseBotInterval);else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)](_0x40724f(0x1cd)))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x241)),logHistory(_0x40724f(0x1a8),_0x40724f(0x1ca)),process[_0x40724f(0x1ea)]({'stop':_0x40724f(0x169)},_0x84d593=>{});else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)](_0x40724f(0x1c2)))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x17b)),logHistory(_0x40724f(0x1a8),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x40724f(0x1ea)]({'stop':'kill'},_0x4ef516=>{});else{if(_0x2744f2['toString']()['includes'](_0x40724f(0x250)))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x257)),logHistory(_0x40724f(0x1a8),_0x40724f(0x1ca)),process['send']({'stop':'kill'},_0x108865=>{});else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)](_0x40724f(0x23c)))logHistory('error',_0xa35777+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x40724f(0x1a8),_0x40724f(0x1ca)),process[_0x40724f(0x1ea)]({'stop':_0x40724f(0x169)},_0x4e30f0=>{});else{if(_0x2744f2[_0x40724f(0x1be)]()[_0x40724f(0x177)](_0x40724f(0x1d1)))logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x23b)),await pauseBot(pauseBotInterval),process[_0x40724f(0x1ea)]({'stop':'restart'},_0x102f81=>{});else _0x2744f2['toString']()[_0x40724f(0x177)](_0x40724f(0x1e9))?logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x164)):(logHistory(_0x40724f(0x1a8),_0xa35777+_0x40724f(0x1e6)),logging(_0xa35777+_0x40724f(0x205),_0x2744f2),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xc0c3b0,_0xa39a72){const _0x317ca0=_0x1bc41c;return parseFloat(_0xc0c3b0[_0x317ca0(0x167)](_0xa39a72));}function logging(_0x583499,_0x571873=''){const _0x1d4916=_0x1bc41c;if(config[_0x1d4916(0x25b)])console['log'](getTimeStamp()+':\x20'+config[_0x1d4916(0x210)]+_0x1d4916(0x204)+_0x583499,_0x571873);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x1d4916(0x204)+_0x583499,_0x571873);}function getServerTime(){const _0x904f92=_0x1bc41c,_0x3c2491=new Date();return _0x3c2491['getFullYear']()+'/'+(_0x3c2491[_0x904f92(0x1e1)]()+0x1)[_0x904f92(0x1be)]()[_0x904f92(0x1ae)](0x2,'0')+'/'+_0x3c2491[_0x904f92(0x1f1)]()['toString']()[_0x904f92(0x1ae)](0x2,'0')+'\x20'+_0x3c2491['getHours']()['toString']()[_0x904f92(0x1ae)](0x2,'0')+':'+_0x3c2491[_0x904f92(0x228)]()[_0x904f92(0x1be)]()[_0x904f92(0x1ae)](0x2,'0')+':'+_0x3c2491['getSeconds']()[_0x904f92(0x1be)]()[_0x904f92(0x1ae)](0x2,'0');}function getTimeStamp(){const _0xfb2f5c=_0x1bc41c,_0x4ee336=shiftedTime();return _0x4ee336['getFullYear']()+'/'+(_0x4ee336[_0xfb2f5c(0x1e1)]()+0x1)[_0xfb2f5c(0x1be)]()[_0xfb2f5c(0x1ae)](0x2,'0')+'/'+_0x4ee336['getDate']()[_0xfb2f5c(0x1be)]()[_0xfb2f5c(0x1ae)](0x2,'0')+'\x20'+_0x4ee336['getHours']()['toString']()[_0xfb2f5c(0x1ae)](0x2,'0')+':'+_0x4ee336[_0xfb2f5c(0x228)]()['toString']()[_0xfb2f5c(0x1ae)](0x2,'0')+':'+_0x4ee336['getSeconds']()['toString']()[_0xfb2f5c(0x1ae)](0x2,'0');}function getDate(){const _0x456883=_0x1bc41c,_0x2b6144=shiftedTime();return _0x2b6144[_0x456883(0x1e3)]()+'/'+(_0x2b6144['getMonth']()+0x1)[_0x456883(0x1be)]()[_0x456883(0x1ae)](0x2,'0')+'/'+_0x2b6144[_0x456883(0x1f1)]()[_0x456883(0x1be)]()[_0x456883(0x1ae)](0x2,'0');}function getHour(){const _0x38b006=_0x1bc41c,_0xca2f6c=shiftedTime();return _0xca2f6c['getHours']()[_0x38b006(0x1be)]()[_0x38b006(0x1ae)](0x2,'0');}function sleep(_0x3c0601){return new Promise(_0x25346c=>setTimeout(_0x25346c,_0x3c0601));}function shiftedTime(){const _0x1fca2f=_0x1bc41c,_0x2f4ec6=new Date();let _0x2b27ae=_0x2f4ec6;if(config&&config[_0x1fca2f(0x26d)]!==0x0)_0x2b27ae=fns[_0x1fca2f(0x180)](_0x2f4ec6,{'hours':config[_0x1fca2f(0x26d)]});return _0x2b27ae;}