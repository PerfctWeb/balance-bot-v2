const _0x38f10f=_0x4f09;(function(_0x259d09,_0xdc1255){const _0x1cfe0d=_0x4f09,_0x3f9189=_0x259d09();while(!![]){try{const _0x2c0648=parseInt(_0x1cfe0d(0x1e5))/0x1*(parseInt(_0x1cfe0d(0x13e))/0x2)+-parseInt(_0x1cfe0d(0x1f3))/0x3+parseInt(_0x1cfe0d(0x1b5))/0x4+parseInt(_0x1cfe0d(0x92))/0x5+parseInt(_0x1cfe0d(0x10d))/0x6*(-parseInt(_0x1cfe0d(0x1b7))/0x7)+parseInt(_0x1cfe0d(0x151))/0x8+-parseInt(_0x1cfe0d(0x129))/0x9*(-parseInt(_0x1cfe0d(0xe4))/0xa);if(_0x2c0648===_0xdc1255)break;else _0x3f9189['push'](_0x3f9189['shift']());}catch(_0x4b594e){_0x3f9189['push'](_0x3f9189['shift']());}}}(_0x36da,0xd1db5));const _0x3b19eb=function(){let _0xd19080=!![];return function(_0x22aa94,_0xb19058){const _0x329aac=_0xd19080?function(){const _0xda9a86=_0x4f09;if(_0xb19058){const _0xef8d08=_0xb19058[_0xda9a86(0x1d6)](_0x22aa94,arguments);return _0xb19058=null,_0xef8d08;}}:function(){};return _0xd19080=![],_0x329aac;};}(),_0x3a8e47=_0x3b19eb(this,function(){const _0x1bd7aa=_0x4f09;return _0x3a8e47[_0x1bd7aa(0xf1)]()['search'](_0x1bd7aa(0x96))['toString']()['constructor'](_0x3a8e47)[_0x1bd7aa(0xc9)](_0x1bd7aa(0x96));});_0x3a8e47();'use strict';const ccxt=require(_0x38f10f(0xb6))[_0x38f10f(0x12c)],low=require(_0x38f10f(0x99)),FileSync=require(_0x38f10f(0xea)),fs=require('fs'),fns=require(_0x38f10f(0x12b)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require('util'),argv=require(_0x38f10f(0x94))(process['argv'][_0x38f10f(0x16e)](0x2))[_0x38f10f(0x88)],path=require(_0x38f10f(0x1d5));let exchange;global['ticker']={},global[_0x38f10f(0x194)]={};const usdBasecoins=[_0x38f10f(0x1d1),_0x38f10f(0x1b3),_0x38f10f(0x11b),_0x38f10f(0x175),'USDC',_0x38f10f(0xa6)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x38f10f(0x13c))[_0x38f10f(0xa2)],botID=process['argv'][0x2]||_0x38f10f(0x1ef),pattern=/^[0-9]{3}$/;!pattern[_0x38f10f(0xdf)](botID)&&(console[_0x38f10f(0x7a)](_0x38f10f(0x12e)+botID+_0x38f10f(0x160)),killBot());const userID=process[_0x38f10f(0x88)][0x3]||'',configpath=userID?_0x38f10f(0x1eb)+userID+'/':'./config/',logspath=userID?_0x38f10f(0x126)+userID+'/':_0x38f10f(0x126),loggerfile=fs[_0x38f10f(0x1a9)](logspath+_0x38f10f(0x1b8),{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x38f10f(0x1e9)](logspath)&&fs[_0x38f10f(0x1da)](logspath);const configfile=configpath+_0x38f10f(0xb2)+botID+_0x38f10f(0x91),logfile=configpath+'bot-'+botID+_0x38f10f(0x162),performancefile=configpath+_0x38f10f(0xb2)+botID+'-performance.json',coinresultsfile=configpath+_0x38f10f(0xb2)+botID+_0x38f10f(0xaa),settingsfile=configpath+_0x38f10f(0x1ea),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x38f10f(0x122),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x38f10f(0x1e8)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x38f10f(0x185)]({'data':[],'version':serverversion})[_0x38f10f(0x1e8)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x38f10f(0x185)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x38f10f(0x185)]({'coins':[],'version':serverversion})[_0x38f10f(0x1e8)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x38f10f(0x19e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4a997c=>{const _0x5a056f=_0x38f10f;console[_0x5a056f(0x7a)](_0x4a997c);},'simple':_0xebff4d=>{const _0x105e67=_0x38f10f;console[_0x105e67(0x7a)](_0xebff4d),loggerfile[_0x105e67(0x1e8)](util[_0x105e67(0x111)](_0xebff4d)+'\x0a');},'full':async(_0x5b8501,_0x3319b3='')=>{const _0x21c7b0=_0x38f10f;let _0xb3333d;if(config[_0x21c7b0(0x1a4)])_0xb3333d=getTimeStamp()+':\x20'+config[_0x21c7b0(0xbe)]+_0x21c7b0(0x146)+_0x5b8501;else _0xb3333d=getTimeStamp()+_0x21c7b0(0x8a)+botID+_0x21c7b0(0x146)+_0x5b8501;console[_0x21c7b0(0x7a)](_0xb3333d),loggerfile[_0x21c7b0(0x1e8)](util[_0x21c7b0(0x111)](_0xb3333d)+'\x0a'),_0x3319b3&&(console[_0x21c7b0(0x7a)](_0x3319b3),loggerfile['write'](util[_0x21c7b0(0x111)](_0x3319b3)+'\x0a'));},'debug':async(_0x2e3634,_0x5ad9b9='')=>{const _0x1bb0fa=_0x38f10f;let _0x509287;if(config['showname'])_0x509287=getTimeStamp()+':\x20'+config[_0x1bb0fa(0xbe)]+_0x1bb0fa(0x167)+_0x2e3634;else _0x509287=getTimeStamp()+':\x20Bot\x20'+botID+_0x1bb0fa(0x167)+_0x2e3634;if(debugging)console[_0x1bb0fa(0x7a)](_0x509287);loggerfile[_0x1bb0fa(0x1e8)](util[_0x1bb0fa(0x111)](_0x509287)+'\x0a');if(_0x5ad9b9){if(debugging)console[_0x1bb0fa(0x7a)](_0x5ad9b9);loggerfile[_0x1bb0fa(0x1e8)](util[_0x1bb0fa(0x111)](_0x5ad9b9)+'\x0a');}}};process['on']('uncaughtException',function(_0x5a0929){const _0x506f1e=_0x38f10f;logHistory(_0x506f1e(0x1d7),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x506f1e(0x14b)](_0x506f1e(0xa8),_0x5a0929);});settings[_0x38f10f(0x10f)]!=config[_0x38f10f(0x10f)]&&updateTimeshift(settings[_0x38f10f(0x10f)]);settings[_0x38f10f(0x8e)]!=config[_0x38f10f(0x8e)]&&updateOnepagemode(settings[_0x38f10f(0x8e)]);process[_0x38f10f(0xaf)]({'started':_0x38f10f(0x1c2)},_0x5a6e73=>{}),initializeProcessListeners();function proxyEmit(_0x127b68,_0x471813=null){const _0x16fa05=_0x38f10f;process[_0x16fa05(0xaf)]({'function':_0x127b68,'args':_0x471813},_0x4adaea=>{});}function initializeProcessListeners(){const _0x1db790=_0x38f10f;process['on'](_0x1db790(0xef),_0x584aed=>{const _0x3eb291=_0x1db790;switch(Object[_0x3eb291(0x17c)](_0x584aed)[0x0]){case'timeshift':_0x584aed[_0x3eb291(0x10f)]!=undefined&&(settings[_0x3eb291(0x10f)]=_0x584aed['timeshift'],updateTimeshift(settings[_0x3eb291(0x10f)]));break;case _0x3eb291(0x8e):_0x584aed['onepagemode']!=undefined&&(settings['onepagemode']=_0x584aed[_0x3eb291(0x8e)],updateOnepagemode(settings[_0x3eb291(0x8e)]));break;case _0x3eb291(0x19c):_0x584aed[_0x3eb291(0x19c)]!=undefined&&(bots=JSON[_0x3eb291(0xbf)](_0x584aed[_0x3eb291(0x19c)]),proxyEmit(_0x3eb291(0x19c),bots));break;case _0x3eb291(0xca):switch(_0x584aed[_0x3eb291(0xca)]){case _0x3eb291(0x74):initclient();break;case _0x3eb291(0xee):toggleBotMode();break;case'emitHistory':emitHistory(_0x584aed[_0x3eb291(0x11f)]);break;case _0x3eb291(0x1b4):deleteHistoryAlerts(_0x584aed[_0x3eb291(0x11f)]);break;case'getPortfolio':getPortfolio(_0x584aed[_0x3eb291(0x11f)]);break;case'storeConfiguration':storeConfiguration(_0x584aed['args']);break;case'storeHeadless':storeHeadless(_0x584aed[_0x3eb291(0x11f)]);break;case _0x3eb291(0x118):storeFiat(_0x584aed[_0x3eb291(0x11f)]);break;case _0x3eb291(0x16d):resetHistory();break;case _0x3eb291(0x123):getStartingBalances(getNormalizedPerformance());break;case _0x3eb291(0x1ae):placeOrder(_0x584aed[_0x3eb291(0x11f)]);break;case _0x3eb291(0xd9):cancelLoading();break;case _0x3eb291(0x174):showConfig();break;case _0x3eb291(0x153):sendMetricsTelegram();break;case _0x3eb291(0x1be):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x528ae9=null,_0xa53691=![]){const _0xff4008=_0x38f10f;logger['debug']('Reset\x20|\x20'+(_0x528ae9&&_0x528ae9[_0xff4008(0x137)]>0x0?_0xff4008(0x1e2)+_0x528ae9[_0xff4008(0x152)](','):_0xff4008(0x81))+_0xff4008(0x157)+(_0xa53691?_0xff4008(0x75):_0xff4008(0x78))+_0xff4008(0x18d)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0xa53691)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0xff4008(0x124)]!='***'){if(_0xa53691){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x4907ba){handleErrorNoStop(_0x4907ba,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x528ae9);const _0x27d046=await getCoins();[currentCoins,currentCoinsAll]=_0x27d046,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0xff4008(0x137)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1cf4f9=_0x38f10f;exchangeStopped=!![],await exchange[_0x1cf4f9(0x19a)]();}async function reloadExchange(){const _0x467f87=_0x38f10f;logger[_0x467f87(0x14b)](_0x467f87(0x14a));while(lockOrders!=ORDERS[_0x467f87(0x14d)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x467f87(0x14b)](_0x467f87(0x13a)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x300053=config[_0x38f10f(0xd7)],_0x3e2a6f=config[_0x38f10f(0x124)],_0xc72588=config[_0x38f10f(0x18b)],_0x3896ce=config['apiPassword']){const _0x5b05dd=_0x38f10f;exchange&&await stopExchange();!supportedExchanges()[_0x5b05dd(0x172)](_0x300053)&&(logHistory('error',_0x5b05dd(0x135)+_0x300053+_0x5b05dd(0x168)),killBot());const _0x2a8703=ccxt[_0x300053[_0x5b05dd(0x7f)]()];exchange=new _0x2a8703({'apiKey':_0x3e2a6f,'secret':_0xc72588,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5b05dd(0xac)}});if(_0x3896ce)exchange[_0x5b05dd(0x147)]=_0x3896ce;}function setStableCoins(){const _0x4ec6a0=_0x38f10f;let _0x3a1141=config['basecoin']==_0x4ec6a0(0x87)?_0x4ec6a0(0x87):_0x4ec6a0(0xf4),_0x403f14=!allSymbols['includes'](_0x3a1141+_0x4ec6a0(0xd4))?_0x4ec6a0(0x175):_0x4ec6a0(0x1d1),_0x1c0ec7=!allSymbols[_0x4ec6a0(0x172)](_0x3a1141+_0x4ec6a0(0xb5))?_0x403f14:'EUR';stablecoins={'eur':{'coin':''+_0x3a1141+_0x1c0ec7,'symbol':_0x3a1141+'/'+_0x1c0ec7},'usd':{'coin':''+_0x3a1141+_0x403f14,'symbol':_0x3a1141+'/'+_0x403f14}};}async function initwsCcxt(_0x6c547){const _0x583b68=_0x38f10f;_0x6c547==null&&(_0x6c547=[],config['portfolio']['forEach'](_0x45197f=>{const _0xe0193d=_0x4f09;if(!_0x45197f['excluded']&&_0x45197f[_0xe0193d(0x139)]!=config[_0xe0193d(0xbd)])_0x6c547[_0xe0193d(0x9e)](_0x45197f[_0xe0193d(0xcb)]);}));if(!_0x6c547['includes'](stablecoins['eur'][_0x583b68(0xcb)]))_0x6c547[_0x583b68(0x9e)](stablecoins[_0x583b68(0x8d)][_0x583b68(0xcb)]);if(!_0x6c547['includes'](stablecoins['usd'][_0x583b68(0xcb)]))_0x6c547[_0x583b68(0x9e)](stablecoins[_0x583b68(0x15b)]['symbol']);if(config[_0x583b68(0xd7)][_0x583b68(0x1ad)](_0x583b68(0x177))){if(!_0x6c547[_0x583b68(0x172)]('BNB/'+config[_0x583b68(0xbd)]))_0x6c547['push'](_0x583b68(0x1d3)+config[_0x583b68(0xbd)]);}loadCoins(_0x6c547);const _0x4674da=async _0x4b314f=>{const _0x5ea89c=_0x583b68,_0x1a2a38=await exchange[_0x5ea89c(0x7b)](_0x4b314f);global['ticker'][noslash(_0x1a2a38[_0x5ea89c(0xcb)])]=_0x1a2a38[_0x5ea89c(0x95)];while(!![]){if(!botPaused)try{const _0xc02cad=await exchange[_0x5ea89c(0xe7)](_0x4b314f);global[_0x5ea89c(0x9f)][noslash(_0xc02cad[0x0]['symbol'])]=_0xc02cad[0x0]['price'],await sleep(0x3e8);}catch(_0x1c715b){if(!exchangeStopped)await handleError(_0x1c715b,_0x5ea89c(0xe7),_0x4b314f);}else await sleep(0x64);}},_0x55f241=async _0x1987bb=>{const _0x2d24e4=_0x583b68;while(!![]){if(!botPaused)try{const _0x3d07eb=await exchange[_0x2d24e4(0x7b)](_0x1987bb);global[_0x2d24e4(0x194)][_0x3d07eb[_0x2d24e4(0xcb)]]=_0x3d07eb['percentage'],await sleep(0x3c*0x3e8);}catch(_0x32d267){if(!exchangeStopped)await handleError(_0x32d267,'fetchTickers',_0x1987bb);}else await sleep(0x64);}},_0x3bb0bd=async()=>{const _0x288d9a=_0x583b68;while(!![]){if(!botPaused)try{const _0x7cf2ba=await exchange['watchOrders']();_0x7cf2ba[_0x288d9a(0x140)](_0x2dc3df=>{updateNumberCoinsCcxt(_0x2dc3df);});}catch(_0x5a4d0c){if(!exchangeStopped)await handleError(_0x5a4d0c,_0x288d9a(0x84));}else await sleep(0x64);}};_0x6c547['forEach'](_0x1c9194=>{_0x4674da(_0x1c9194),_0x55f241(_0x1c9194);}),!wsEventsSet&&(wsEventsSet=!![],_0x3bb0bd(),watchTransactions());}async function watchTransactions(){const _0x51de06=_0x38f10f;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x567d6e=await getCoins(),[_0x1d4d52,_0x176d6b]=_0x567d6e;let _0x108bf3=[];currentCoins[_0x51de06(0x140)](_0xc7c6a9=>{const _0x38a8b8=_0x51de06,_0x223098=_0x1d4d52[_0x38a8b8(0xc1)](_0x5d3905=>_0x5d3905[_0x38a8b8(0x139)]==_0xc7c6a9[_0x38a8b8(0x139)]);if(_0x223098){if(_0xc7c6a9[_0x38a8b8(0x70)]!=_0x223098['number']){let _0x532142;if(_0xc7c6a9['coin']!=config[_0x38a8b8(0xbd)]){const _0xd4e963=global['ticker'][noslash(_0xc7c6a9[_0x38a8b8(0xcb)])];_0x532142=_0xc7c6a9[_0x38a8b8(0x1e7)]?0x1/_0xd4e963:_0xd4e963;}else _0x532142=0x1;_0x108bf3[_0x38a8b8(0x9e)]({'coin':_0xc7c6a9['coin'],'symbol':_0xc7c6a9[_0x38a8b8(0xcb)],'price':_0x532142,'number':Number(formatResult(_0x223098[_0x38a8b8(0x70)]-_0xc7c6a9[_0x38a8b8(0x70)],0x8)),'basecoinvalue':_0x532142*(_0x223098[_0x38a8b8(0x70)]-_0xc7c6a9['number'])});}}});if(_0x108bf3['length']==0x1&&!blockTransactionDetection){if(config[_0x51de06(0xa5)]){logger[_0x51de06(0x14b)](_0x51de06(0xd1)+_0x108bf3[0x0][_0x51de06(0x144)]+_0x51de06(0x11e)+lastFees[_0x51de06(0x183)]);if(lastFees[_0x51de06(0x183)]==0x0||Math['abs'](_0x108bf3[0x0][_0x51de06(0x144)])>lastFees[_0x51de06(0x183)]){delete _0x108bf3[0x0][_0x51de06(0xcb)],delete _0x108bf3[0x0][_0x51de06(0x144)];let _0x13b6af=[],_0x248604=[...config[_0x51de06(0x89)]]||[],_0x3372f5=config[_0x51de06(0x89)];_0x248604[_0x51de06(0x16b)]((_0x40022c,_0x5000b4)=>_0x40022c['date']>_0x5000b4[_0x51de06(0x134)]?-0x1:_0x5000b4[_0x51de06(0x134)]>_0x40022c[_0x51de06(0x134)]?0x1:0x0);const _0x59ffd5=getDate();if(_0x248604[0x0]){const _0x3808b5=fns[_0x51de06(0xbf)](_0x248604[0x0]['date'],_0x51de06(0xba),new Date()),_0x389286=fns['parse'](_0x59ffd5,_0x51de06(0xba),new Date());if(fns['isEqual'](_0x3808b5,_0x389286)){_0x13b6af=_0x248604[0x0][_0x51de06(0xc2)];const _0x1e5dd7=_0x13b6af['find'](_0x5b738e=>_0x5b738e[_0x51de06(0x139)]==_0x108bf3[0x0][_0x51de06(0x139)]);_0x1e5dd7?(_0x1e5dd7[_0x51de06(0x70)]+=_0x108bf3[0x0]['number'],_0x1e5dd7['number']==0x0&&(_0x13b6af=_0x13b6af['filter'](_0xe72729=>{const _0x305f56=_0x51de06;return _0xe72729[_0x305f56(0x139)]!=_0x108bf3[0x0]['coin'];}))):_0x13b6af[_0x51de06(0x9e)](_0x108bf3[0x0]);const _0xa2a9e7=_0x3372f5[_0x51de06(0xc1)](_0x545c0c=>_0x545c0c['date']==_0x59ffd5);_0xa2a9e7[_0x51de06(0xc2)]=_0x13b6af;}else _0x3372f5['push']({'date':_0x59ffd5,'changes':[_0x108bf3[0x0]]});}const _0x464ed2=_0x3372f5['find'](_0x3469e5=>_0x3469e5[_0x51de06(0x134)]==_0x59ffd5);if(_0x464ed2){let _0x41dbe9=!![];_0x464ed2['changes'][_0x51de06(0x140)](_0x58f661=>{if(_0x58f661['number']!=0x0)_0x41dbe9=![];}),_0x41dbe9&&(_0x3372f5=_0x3372f5[_0x51de06(0x1ee)](_0x4e3c39=>{const _0x4ef117=_0x51de06;return _0x4e3c39[_0x4ef117(0x134)]!=_0x59ffd5;}));}let _0x59a0e5=dbConfig[_0x51de06(0x143)](_0x51de06(0x9d))[_0x51de06(0xc1)]({'botID':botID})[_0x51de06(0x188)]();_0x59a0e5&&(dbConfig['get'](_0x51de06(0x9d))[_0x51de06(0xc1)]({'botID':botID})[_0x51de06(0x1b1)]({'liquidity':_0x3372f5})[_0x51de06(0x1e8)](),config['liquidity']=_0x3372f5),logHistory('success',_0x51de06(0x1e0)+Math['abs'](_0x108bf3[0x0][_0x51de06(0x70)])+'\x20'+_0x108bf3[0x0]['coin']+'\x20'+(_0x108bf3[0x0]['number']>0x0?_0x51de06(0x150):_0x51de06(0x193))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x51de06(0x149),emittedConfiguration());}else logger[_0x51de06(0x14b)](_0x51de06(0x130)+Math['abs'](_0x108bf3[0x0][_0x51de06(0x70)])+'\x20'+_0x108bf3[0x0][_0x51de06(0x139)]+'\x20'+(_0x108bf3[0x0][_0x51de06(0x70)]>0x0?'added':'removed'));transactionDetected=!![],currentCoins=_0x1d4d52,currentCoinsAll=_0x176d6b;}else logger['debug'](_0x51de06(0x1e0)+Math[_0x51de06(0x154)](_0x108bf3[0x0][_0x51de06(0x70)])+'\x20'+_0x108bf3[0x0][_0x51de06(0x139)]+'\x20'+(_0x108bf3[0x0]['number']>0x0?'added':_0x51de06(0x193))+_0x51de06(0xf2)),currentCoins=_0x1d4d52,currentCoinsAll=_0x176d6b;}await sleep(watchTransactionsInterval);}catch(_0xa824bd){if(!exchangeStopped)await handleError(_0xa824bd,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0xaf57c7=config[_0x38f10f(0xd7)],_0x2a7adf=![]){const _0x49cce6=_0x38f10f;if(allSymbols&&!_0x2a7adf)return;try{markets=await exchange[_0x49cce6(0x1de)](),allSymbols=[],Object[_0x49cce6(0x1bc)](markets)[_0x49cce6(0x140)](_0x200ba0=>{const _0xaf0dec=_0x49cce6;_0x200ba0[0x1][_0xaf0dec(0x192)]&&_0x200ba0[0x1][_0xaf0dec(0xac)]&&allSymbols[_0xaf0dec(0x9e)](_0x200ba0[0x0]);});}catch(_0x3f3a37){throw _0x3f3a37;}}async function initclient(){const _0x3ab0ed=_0x38f10f;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x3ab0ed(0x17d),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x154aec=getNormalizedPerformance();emitPerformance(_0x154aec),getStartingBalances(_0x154aec);}async function toggleBotMode(){const _0x5d0b45=_0x38f10f;let _0x1d3939=dbConfig[_0x5d0b45(0x143)]('bot')[_0x5d0b45(0xc1)]({'botID':botID})['value']();if(_0x1d3939){const _0x3eea39=!_0x1d3939[_0x5d0b45(0xce)];dbConfig['get'](_0x5d0b45(0x9d))['find']({'botID':botID})[_0x5d0b45(0x1b1)]({'headless':_0x3eea39})[_0x5d0b45(0x1e8)](),config[_0x5d0b45(0xce)]=_0x3eea39,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4f8b5f=_0x38f10f;process[_0x4f8b5f(0xaf)]({'updatebotmanager':!![]},_0x7dfbbb=>{});}async function loadCoins(_0x4805c5){const _0x404a10=_0x38f10f;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x62a44e,_0xb21b23=0x0,_0x2340c9=0x0;_0x4805c5['forEach'](_0x5db770=>{const _0x503f85=_0x4f09;loading[_0x503f85(0x165)][_0x503f85(0x9e)](_0x5db770);}),loadingCanceled=![];let _0x321d00=![];while(_0x62a44e!=_0x4805c5[_0x404a10(0x137)]){_0x62a44e=0x0,_0x4805c5[_0x404a10(0x140)](_0x51011e=>{const _0x42ed8a=_0x404a10;if(global[_0x42ed8a(0x9f)][noslash(_0x51011e)]){loading[_0x42ed8a(0x165)]=loading[_0x42ed8a(0x165)][_0x42ed8a(0x1ee)](_0x8adfae=>_0x8adfae!=_0x51011e);if(!watchedSymbols[_0x42ed8a(0x172)](_0x51011e))watchedSymbols[_0x42ed8a(0x9e)](_0x51011e);_0x62a44e++;}}),loading[_0x404a10(0xc3)]=Math['round'](_0x62a44e/_0x4805c5[_0x404a10(0x137)]*0x64);loading[_0x404a10(0xc3)]!=0x64&&(_0x2340c9>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x2340c9>0x78*0x5&&!_0x321d00&&(loading[_0x404a10(0x106)]=!![],emitLoadingProgress(),_0x321d00=!![],logHistory(_0x404a10(0x1d7),_0x404a10(0x12f)+loading[_0x404a10(0x165)][_0x404a10(0x152)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x404a10(0x1d7),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x404a10(0x191)),pidCoinReloading=setTimeout(()=>{const _0x414214=_0x404a10;process[_0x414214(0xaf)]({'stop':'restart'},_0x5ea2c0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x404a10(0x106)]=!![],emitLoadingProgress();break;}else _0x62a44e!=_0xb21b23&&(_0xb21b23=_0x62a44e,emitLoadingProgress()),_0x2340c9++,await sleep(0xc8);}_0x62a44e==_0x4805c5[_0x404a10(0x137)]&&(coinsLoaded=!![],process[_0x404a10(0xaf)]({'status':_0x404a10(0x121),'live':_0x404a10(0x1c2)},_0x494e95=>{}),_0x321d00&&logHistory(_0x404a10(0x156),_0x404a10(0xd6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x40cd98=_0x38f10f;proxyEmit(_0x40cd98(0x149),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x14781d=_0x38f10f;proxyEmit(_0x14781d(0x14e),loading);}async function getFiat(){const _0x320d2e=_0x38f10f;let _0x13f069=global[_0x320d2e(0x9f)][stablecoins[_0x320d2e(0x8d)][_0x320d2e(0x139)]],_0x5670a2=global[_0x320d2e(0x9f)][stablecoins[_0x320d2e(0x15b)]['coin']];return{'eur':Number(_0x13f069),'usd':Number(_0x5670a2)};}function capitalize(_0x361a98){const _0x1214aa=_0x38f10f;return _0x361a98[_0x1214aa(0x170)](0x0,0x1)[_0x1214aa(0xec)]()+_0x361a98[_0x1214aa(0x170)](0x1);}function supportedExchanges(){const _0x42ffff=_0x38f10f,_0x1e10ce=['ws','fetchTickers',_0x42ffff(0x7b),_0x42ffff(0xe7),_0x42ffff(0x84),_0x42ffff(0xb3),_0x42ffff(0xfb),_0x42ffff(0x197),_0x42ffff(0x77),'fetchBalance'];let _0x4118d5=[],_0x3cfff4=[],_0x59fe15=ccxt[_0x42ffff(0x17d)];_0x59fe15[_0x42ffff(0x140)](_0x1e1137=>{try{const _0x1e680d=new ccxt[_0x1e1137]();if(_0x1e680d['has']['ws'])_0x3cfff4['push'](_0x1e680d);}catch(_0x51098c){}}),_0x3cfff4[_0x42ffff(0x140)](_0x24afe9=>{const _0x116fd=_0x42ffff;let _0x49c527=0x0;_0x1e10ce[_0x116fd(0x140)](_0x48bbad=>{const _0x398d51=_0x116fd;_0x48bbad in _0x24afe9[_0x398d51(0x73)]&&_0x24afe9['has'][_0x48bbad]&&_0x49c527++;}),_0x49c527==_0x1e10ce[_0x116fd(0x137)]&&_0x4118d5[_0x116fd(0x9e)](capitalize(_0x24afe9['id']));});let _0x1fea47=[];return _0x59fe15[_0x42ffff(0x140)](_0x1ad93d=>{const _0x58e69c=_0x42ffff;_0x1ad93d=capitalize(_0x1ad93d);if(!_0x4118d5[_0x58e69c(0x172)](_0x1ad93d))_0x1fea47[_0x58e69c(0x9e)](_0x1ad93d);}),_0x4118d5;}function setStartDatePerformance(){const _0x7c992b=_0x38f10f;if(config&&config['liquidity'][0x0][_0x7c992b(0xc2)][_0x7c992b(0x137)]!=0x0){const _0x373db9=config['liquidity'][0x0][_0x7c992b(0xc2)];dbPerformance[_0x7c992b(0x143)]('data')[_0x7c992b(0xc1)]({'date':config['startdate']})[_0x7c992b(0x1b1)]({'coins':_0x373db9})['write']();}}async function recreateCoinResults(){const _0x3c5bf7=_0x38f10f;let _0x9bf6bc,_0x3e9058=[];try{const _0x18e98c=fns[_0x3c5bf7(0x111)](fns[_0x3c5bf7(0x7e)](config[_0x3c5bf7(0xe3)][_0x3c5bf7(0x142)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x535414 of currentCoins){if(_0x535414['coin']!=config[_0x3c5bf7(0xbd)]){let _0x4e3109=0x0,_0x28dd29,_0x16ab25;_0x9bf6bc=await getAllEventOrders(_0x535414[_0x3c5bf7(0xcb)]);if(_0x9bf6bc['length']>0x0)_0x9bf6bc[_0x3c5bf7(0x140)](_0x422c07=>{const _0x4c308f=_0x3c5bf7,_0x835875=_0x535414[_0x4c308f(0xcb)][_0x4c308f(0x172)](config[_0x4c308f(0xbd)]+'/');_0x3e9058[_0x4c308f(0x9e)]({'datetime':_0x422c07['datetime'],'coin':_0x535414[_0x4c308f(0x139)],'symbol':_0x535414[_0x4c308f(0xcb)],'side':_0x422c07[_0x4c308f(0xc5)],'reverse':_0x835875,'amount':formatResult(_0x422c07['filled'],0x8),'filled':formatResult(_0x422c07['filled'],0x8),'price':formatResult(_0x422c07[_0x4c308f(0x189)],0x8)}),_0x4e3109=_0x422c07[_0x4c308f(0xc5)]==_0x4c308f(0x163)?_0x4e3109+_0x422c07[_0x4c308f(0x8c)]:_0x4e3109-_0x422c07[_0x4c308f(0x8c)];if(!_0x16ab25)_0x16ab25=_0x422c07[_0x4c308f(0x189)];});_0x28dd29=_0x535414[_0x3c5bf7(0x70)]-_0x4e3109;let _0x29d519;config['liquidity'][_0x3c5bf7(0x140)](_0x4a5ed7=>{const _0x409cca=_0x3c5bf7;!_0x29d519&&(_0x29d519=_0x4a5ed7[_0x409cca(0xc2)]['find'](_0x55f192=>_0x55f192['coin']==_0x535414[_0x409cca(0x139)]),_0x29d519&&(_0x28dd29=_0x29d519[_0x409cca(0x70)],_0x16ab25=_0x29d519[_0x409cca(0x189)]));});let _0x561418=dbCoinResults['get'](_0x3c5bf7(0xab))[_0x3c5bf7(0xc1)]({'coin':_0x535414[_0x3c5bf7(0x139)]})[_0x3c5bf7(0x188)]();_0x561418={'coin':_0x535414[_0x3c5bf7(0x139)],'number':_0x28dd29,'breakeven':_0x16ab25,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3c5bf7(0x143)](_0x3c5bf7(0xab))[_0x3c5bf7(0xc1)]({'coin':_0x535414[_0x3c5bf7(0x139)]})[_0x3c5bf7(0x1b1)](_0x561418)['write']();}}_0x3e9058['sort']((_0x5056bb,_0x509ebb)=>_0x5056bb['datetime']>_0x509ebb['datetime']?0x1:_0x509ebb[_0x3c5bf7(0xeb)]>_0x5056bb[_0x3c5bf7(0xeb)]?-0x1:0x0);let _0x28cfdc=0x0;for(let _0x4e4a40 of _0x3e9058){await updateCoinResults(_0x4e4a40,!![]);}}catch(_0x3331ce){await handleError(_0x3331ce,_0x3c5bf7(0x1cd));}}async function getAllEventOrders(_0x402585){const _0x5f20b2=_0x38f10f;let _0x14e3da=[],_0x5924fc=dbLogs[_0x5f20b2(0x143)](_0x5f20b2(0xc6))[_0x5f20b2(0x1ee)](_0x40e55c=>{const _0x54e9ee=_0x5f20b2,_0x52dfd2=_0x40e55c[_0x54e9ee(0x8f)]['toLowerCase']();return _0x52dfd2['includes'](_0x402585[_0x54e9ee(0x7f)]())&&(_0x52dfd2['includes'](_0x54e9ee(0xf5))&&_0x52dfd2[_0x54e9ee(0x172)]('order')||_0x52dfd2[_0x54e9ee(0x172)](_0x54e9ee(0x8c))&&_0x52dfd2[_0x54e9ee(0x172)](_0x54e9ee(0xad)));})['sortBy'](_0x5f20b2(0xd3))['value']();return _0x5924fc[_0x5f20b2(0x140)](_0x47fa22=>{const _0x2d6e82=_0x5f20b2,_0x2e836a=_0x47fa22['event'][_0x2d6e82(0x172)](_0x2d6e82(0x1f1))?_0x2d6e82(0x1f1):_0x2d6e82(0x163),_0x3d4b4c=/#([0-9]|\.)+\s/i,_0xde9e1e=Number(_0x3d4b4c[_0x2d6e82(0x1b9)](_0x47fa22[_0x2d6e82(0x8f)])[0x0][_0x2d6e82(0x16e)](0x1)),_0x4bf697=/@([0-9]|\.)+$/i,_0x5d2409=Number(_0x4bf697[_0x2d6e82(0x1b9)](_0x47fa22[_0x2d6e82(0x8f)])[0x0]['slice'](0x1));_0x14e3da['push']({'datetime':_0x47fa22['time'],'coin':symbolToCoin(_0x402585),'symbol':_0x402585,'side':_0x2e836a,'amount':_0xde9e1e,'filled':_0xde9e1e,'price':_0x5d2409});}),_0x14e3da;}async function getAllOrders(_0x4586de,_0x14d1fd){const _0x1a9ab2=_0x38f10f;let _0x3a6aa2=[];while(_0x14d1fd<exchange[_0x1a9ab2(0x8b)]()){const _0x330863=0x1f4,_0x203e53=await exchange['fetchClosedOrders'](_0x4586de,_0x14d1fd,_0x330863);if(_0x203e53[_0x1a9ab2(0x137)])_0x14d1fd=_0x203e53[_0x203e53[_0x1a9ab2(0x137)]-0x1][_0x1a9ab2(0x1cf)]+0x1,_0x3a6aa2=_0x3a6aa2['concat'](_0x203e53);else break;}return _0x3a6aa2;}async function validate24hChanges(){const _0x273e92=_0x38f10f;for(const _0x38b60f of currentCoins){if(_0x38b60f[_0x273e92(0x139)]!=config[_0x273e92(0xbd)]){let _0x27f37d;_0x38b60f['reverse']?_0x27f37d=formatResult((0x1/(global[_0x273e92(0x194)][noslash(_0x38b60f[_0x273e92(0xcb)])]/0x64+0x1)-0x1)*0x64,0x3):_0x27f37d=global['change'][noslash(_0x38b60f[_0x273e92(0xcb)])],_0x27f37d<config[_0x273e92(0x108)]&&(logHistory('error',_0x38b60f[_0x273e92(0x139)]+_0x273e92(0xdd)+_0x27f37d+'%'),logHistory('error',_0x273e92(0x113)),logHistory('error',_0x273e92(0x15d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x185128,_0x117967){const _0x1ed86a=_0x38f10f;if(!_0x185128)return!![];const _0x3ad862=_0x117967[_0x1ed86a(0x132)]('.'),_0x218f9f=_0x185128[_0x1ed86a(0x132)]('.');for(var _0x4809d5=0x0;_0x4809d5<_0x218f9f[_0x1ed86a(0x137)];_0x4809d5++){const _0x367836=~~_0x218f9f[_0x4809d5],_0x2dc127=~~_0x3ad862[_0x4809d5];if(_0x367836<_0x2dc127)return!![];if(_0x367836>_0x2dc127)return![];}return![];}async function oneTimeMigration(){const _0x426930=_0x38f10f;let _0x24e83e=dbLogs['get'](_0x426930(0xa2))[_0x426930(0x188)]();if(isOlderVersion(_0x24e83e,_0x426930(0x98))){let _0x5a244c=[];const _0x4b0c2d=dbLogs[_0x426930(0x143)](_0x426930(0xc6))[_0x426930(0x188)]();_0x4b0c2d['forEach'](_0x561cb4=>{const _0x4f0c8e=_0x426930;_0x5a244c[_0x4f0c8e(0x9e)]({'time':_0x561cb4[_0x4f0c8e(0xd3)],'type':_0x561cb4['type'],'event':_0x561cb4[_0x4f0c8e(0x8f)]});}),dbLogs[_0x426930(0x143)](_0x426930(0xc6))['assign'](_0x5a244c)[_0x426930(0x1e8)]();}let _0x408257=dbConfig['get'](_0x426930(0xa2))[_0x426930(0x188)]();if(isOlderVersion(_0x408257,_0x426930(0x98))){let _0x43c7b2=dbConfig['get'](_0x426930(0x9d))['find']({'botID':botID})['value']();if(_0x43c7b2){let _0x33197d=[];_0x43c7b2[_0x426930(0xae)][_0x426930(0x140)](_0x5c12e9=>{const _0x35e481=_0x426930;_0x33197d[_0x35e481(0x9e)]({'coin':_0x5c12e9[_0x35e481(0x139)],'number':_0x5c12e9['startnumber'],'price':_0x5c12e9[_0x35e481(0x17f)]}),delete _0x5c12e9['startnumber'],delete _0x5c12e9[_0x35e481(0x17f)];});if(_0x33197d[_0x426930(0x137)]!==0x0)fs[_0x426930(0x1af)](configbackuppath+(_0x426930(0x112)+botID+'.json'),JSON['stringify'](_0x33197d,null,0x4),function(_0xac5185){if(_0xac5185){}});const _0x593ca1=(_0x23aae6,_0x9fd2d8)=>{let _0x43ac17=[];_0x9fd2d8['forEach'](_0x468862=>{const _0x3d8a54=_0x4f09,_0x1565c1=_0x23aae6[_0x3d8a54(0xc1)](_0x1df5b6=>_0x1df5b6[_0x3d8a54(0x139)]==_0x468862[_0x3d8a54(0x139)]);if(!_0x1565c1)_0x43ac17['push'](_0x468862);});let _0x3ebdaa=[];return _0x23aae6['forEach'](_0x9d436=>{const _0x74a06=_0x4f09,_0x1e5220=_0x9fd2d8[_0x74a06(0xc1)](_0x5aa033=>_0x5aa033[_0x74a06(0x139)]==_0x9d436[_0x74a06(0x139)]);if(!_0x1e5220||_0x1e5220[_0x74a06(0x70)]==0x0&&_0x9d436[_0x74a06(0x70)]!=0x0)_0x3ebdaa[_0x74a06(0x9e)](_0x9d436);}),{'missingDay1':_0x43ac17,'notInDay2':_0x3ebdaa};},_0x4a387a=dbPerformance[_0x426930(0x143)](_0x426930(0x1f0))[_0x426930(0x1d9)]()[_0x426930(0x188)]();if(_0x4a387a['length']>0x1){const {missingDay1:_0x41ba79,notInDay2:_0x3e2949}=_0x593ca1(_0x33197d,_0x4a387a[0x1][_0x426930(0xab)]);_0x33197d=[..._0x33197d,..._0x41ba79],_0x3e2949[_0x426930(0x140)](_0x55e95d=>{const _0x18d263=_0x426930;let _0x15f8c2=_0x33197d[_0x18d263(0x180)](_0x4fea6b=>_0x4fea6b[_0x18d263(0x139)]==_0x55e95d[_0x18d263(0x139)]);_0x15f8c2!=-0x1&&_0x33197d[_0x18d263(0x116)](_0x15f8c2,0x1);});}_0x33197d[_0x426930(0x16b)]((_0x161514,_0x3fbfcb)=>_0x161514[_0x426930(0x139)]>_0x3fbfcb['coin']?0x1:_0x3fbfcb[_0x426930(0x139)]>_0x161514[_0x426930(0x139)]?-0x1:0x0);let _0x247e17=[{'date':_0x43c7b2[_0x426930(0xe3)],'changes':_0x33197d}];_0x4a387a[_0x426930(0x137)]>0x2&&_0x4a387a['forEach']((_0x14929e,_0x472c8a)=>{const _0x2abac4=_0x426930;if(_0x472c8a>0x0&&_0x472c8a<_0x4a387a['length']-0x1){const {missingDay1:_0x286ad0,notInDay2:_0x306072}=_0x593ca1(_0x4a387a[_0x472c8a][_0x2abac4(0xab)],_0x4a387a[_0x472c8a+0x1][_0x2abac4(0xab)]);_0x33197d=[],(_0x286ad0['length']!=0x0||_0x306072[_0x2abac4(0x137)]!=0x0)&&(_0x286ad0[_0x2abac4(0x137)]!=0x0&&_0x33197d[_0x2abac4(0x9e)](..._0x286ad0),_0x306072[_0x2abac4(0x137)]!=0x0&&(_0x306072[_0x2abac4(0x140)](_0x2fddfe=>{_0x2fddfe['number']=-_0x2fddfe['number'];}),_0x33197d['push'](..._0x306072)),_0x33197d['sort']((_0x298ab5,_0x2e94d1)=>_0x298ab5[_0x2abac4(0x139)]>_0x2e94d1[_0x2abac4(0x139)]?0x1:_0x2e94d1[_0x2abac4(0x139)]>_0x298ab5['coin']?-0x1:0x0),_0x247e17[_0x2abac4(0x9e)]({'date':_0x4a387a[_0x472c8a+0x1][_0x2abac4(0x134)],'changes':_0x33197d}));}}),dbConfig['get'](_0x426930(0x9d))[_0x426930(0xc1)]({'botID':botID})['assign']({..._0x43c7b2,'liquidity':_0x247e17})[_0x426930(0x1e8)]();}}if(isOlderVersion(_0x408257,_0x426930(0x15c))){let _0x435b83=dbConfig['get'](_0x426930(0x9d))[_0x426930(0xc1)]({'botID':botID})[_0x426930(0x188)]();if(_0x435b83){const _0x3d0317=_0x435b83[_0x426930(0xd7)],_0x38c12d=_0x3d0317?capitalize(_0x3d0317):'Binance';dbConfig[_0x426930(0x143)]('bot')[_0x426930(0xc1)]({'botID':botID})[_0x426930(0x1b1)]({'exchange':_0x38c12d})[_0x426930(0x1e8)]();}}let _0x1be32e=dbPerformance[_0x426930(0x143)](_0x426930(0xa2))[_0x426930(0x188)]();isOlderVersion(_0x1be32e,_0x426930(0x98))&&setStartDatePerformance();let _0x3105a5=dbCoinResults[_0x426930(0x143)](_0x426930(0xa2))['value']();if(isOlderVersion(_0x3105a5,_0x426930(0x16c))){let _0xf0acf4=dbCoinResults[_0x426930(0x143)](_0x426930(0xab))[_0x426930(0x188)]();if(_0xf0acf4[_0x426930(0x137)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x22479a=_0x38f10f;dbConfig[_0x22479a(0x15f)](_0x22479a(0xa2),serverversion)[_0x22479a(0x1e8)](),dbPerformance[_0x22479a(0x15f)]('version',serverversion)[_0x22479a(0x1e8)](),dbLogs[_0x22479a(0x15f)](_0x22479a(0xa2),serverversion)[_0x22479a(0x1e8)](),dbCoinResults[_0x22479a(0x15f)](_0x22479a(0xa2),serverversion)[_0x22479a(0x1e8)]();}function getConfiguration(_0x119837){const _0x39b6ac=_0x38f10f;let _0x366698=dbConfig['get'](_0x39b6ac(0x9d))[_0x39b6ac(0xc1)]({'botID':_0x119837})[_0x39b6ac(0x188)]();if(_0x366698){let _0x4bf3fc=![];typeof _0x366698['threshold']==_0x39b6ac(0x141)&&(_0x366698={..._0x366698,'threshold':Number(_0x366698['threshold'])},_0x4bf3fc=!![]),_0x366698[_0x39b6ac(0x108)]==null&&(_0x366698={..._0x366698,'change24h':-0x14},_0x4bf3fc=!![]),!_0x366698[_0x39b6ac(0x10b)]&&(_0x366698={..._0x366698,'fiat':_0x39b6ac(0x1d1)},_0x4bf3fc=!![]),!_0x366698[_0x39b6ac(0x8e)]&&(_0x366698={..._0x366698,'onepagemode':settings[_0x39b6ac(0x8e)]},_0x4bf3fc=!![]),!_0x366698[_0x39b6ac(0x173)]&&(_0x366698={..._0x366698,'colorscheme':_0x39b6ac(0xf0)},_0x4bf3fc=!![]),!_0x366698['autoliquidity']&&(_0x366698={..._0x366698,'autoliquidity':!![]},_0x4bf3fc=!![]),_0x4bf3fc&&(_0x366698={'botID':_0x366698[_0x39b6ac(0xe6)],'exchange':_0x366698[_0x39b6ac(0xd7)],'apiKey':_0x366698[_0x39b6ac(0x124)],'apiSecret':_0x366698[_0x39b6ac(0x18b)],'apiPassword':_0x366698[_0x39b6ac(0x1c4)],'basecoin':_0x366698['basecoin'],'botname':_0x366698[_0x39b6ac(0xbe)],'showname':_0x366698[_0x39b6ac(0x1a4)],'threshold':_0x366698[_0x39b6ac(0x128)],'ordertype':_0x366698['ordertype'],'timeout':_0x366698[_0x39b6ac(0xf8)],'fiat':_0x366698['fiat'],'startdate':_0x366698[_0x39b6ac(0xe3)],'recreate':_0x366698[_0x39b6ac(0xff)],'timeshift':_0x366698[_0x39b6ac(0x10f)],'onepagemode':_0x366698['onepagemode'],'headless':_0x366698[_0x39b6ac(0xce)],'cooldown':_0x366698[_0x39b6ac(0x101)],'change24h':_0x366698[_0x39b6ac(0x108)],'emojibuy':_0x366698[_0x39b6ac(0x1ab)],'emojisell':_0x366698[_0x39b6ac(0xa1)],'colorscheme':_0x366698[_0x39b6ac(0x173)],'portfolio':_0x366698[_0x39b6ac(0xae)],'autoliquidity':_0x366698[_0x39b6ac(0xa5)],'liquidity':_0x366698[_0x39b6ac(0x89)],'openOrders':_0x366698[_0x39b6ac(0xdc)]},dbConfig[_0x39b6ac(0x143)](_0x39b6ac(0x9d))[_0x39b6ac(0x90)]()['write'](),dbConfig['get'](_0x39b6ac(0x9d))[_0x39b6ac(0x9e)](_0x366698)[_0x39b6ac(0x1e8)]());}else _0x366698={'botID':_0x119837,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x119837,'showname':![],'threshold':0x3,'ordertype':_0x39b6ac(0xf5),'timeout':0x14,'fiat':_0x39b6ac(0x1d1),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x39b6ac(0x10f)],'onepagemode':settings[_0x39b6ac(0x8e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x39b6ac(0xf0),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x366698;}function emittedConfiguration(){const _0x48f6f3=_0x38f10f;let _0x1d4ab5;if(config[_0x48f6f3(0x124)]=='')_0x1d4ab5={...config,'configstate':_0x48f6f3(0x19b)};else config['apiKey']=='***'?_0x1d4ab5={...config,'configstate':'recovery'}:(_0x1d4ab5={...config,'apiKey':_0x48f6f3(0x131),'apiSecret':_0x48f6f3(0x131)},config[_0x48f6f3(0x1c4)]&&(_0x1d4ab5[_0x48f6f3(0x1c4)]=_0x48f6f3(0x131)));return _0x1d4ab5;}function getSettings(){const _0x1414e5=_0x38f10f;return dbSettings[_0x1414e5(0x143)]('settings')[_0x1414e5(0x188)]();}function getSecure(){const _0x17fd04=_0x38f10f;return dbSecure['get'](_0x17fd04(0x169))['value']()||{};}function updateTimeshift(_0x79a39a){const _0x9a855=_0x38f10f;let _0x4de14e=dbConfig[_0x9a855(0x143)](_0x9a855(0x9d))[_0x9a855(0xc1)]({'botID':botID})[_0x9a855(0x188)]();_0x4de14e&&dbConfig[_0x9a855(0x143)](_0x9a855(0x9d))[_0x9a855(0xc1)]({'botID':botID})[_0x9a855(0x1b1)]({'timeshift':_0x79a39a})[_0x9a855(0x1e8)](),config[_0x9a855(0x10f)]=_0x79a39a,proxyEmit(_0x9a855(0x149),emittedConfiguration());}function updateOnepagemode(_0x3a615d){const _0x19cf20=_0x38f10f;let _0x573d77=dbConfig[_0x19cf20(0x143)](_0x19cf20(0x9d))['find']({'botID':botID})[_0x19cf20(0x188)]();_0x573d77&&dbConfig[_0x19cf20(0x143)](_0x19cf20(0x9d))['find']({'botID':botID})[_0x19cf20(0x1b1)]({'onepagemode':_0x3a615d})[_0x19cf20(0x1e8)](),config[_0x19cf20(0x8e)]=_0x3a615d,proxyEmit(_0x19cf20(0x149),emittedConfiguration());}async function storeConfiguration(_0x2f46a6){const _0x2b42bd=_0x38f10f;logger[_0x2b42bd(0x14b)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x489cd1=[],_0x5c8a3e=![],_0x56ca2a=![],_0xe87fdc=[];_0x2f46a6[_0x2b42bd(0xae)][_0x2b42bd(0x140)](_0x4f529a=>{const _0x348ad3=_0x2b42bd;if(!_0x4f529a[_0x348ad3(0x17b)]&&_0x4f529a[_0x348ad3(0x139)]!=_0x2f46a6['basecoin'])_0xe87fdc[_0x348ad3(0x9e)](_0x4f529a['symbol']);}),_0xe87fdc[_0x2b42bd(0x140)](_0x50648c=>{const _0x3c7d67=_0x2b42bd,_0x9d4bbe=watchedSymbols[_0x3c7d67(0x172)](_0x50648c);!_0x9d4bbe&&_0x489cd1[_0x3c7d67(0x9e)](_0x50648c);}),_0xe87fdc['forEach'](_0x56f772=>{const _0x2e8f82=_0x2b42bd,_0x3ef2ff=currentCoins[_0x2e8f82(0xc1)](_0x1b6007=>_0x1b6007[_0x2e8f82(0xcb)]==_0x56f772);!_0x3ef2ff&&(_0x5c8a3e=!![]);}),currentCoins['forEach'](_0x388210=>{const _0x4f2811=_0x2b42bd;if(_0x388210[_0x4f2811(0x139)]!=config[_0x4f2811(0xbd)]){const _0x564704=_0xe87fdc[_0x4f2811(0xc1)](_0xa55af0=>_0xa55af0==_0x388210['symbol']);!_0x564704&&(_0x5c8a3e=!![]);}}),_0x2f46a6['portfolio'][_0x2b42bd(0x140)](_0x1b28b8=>{const _0x58214c=_0x2b42bd,_0x62da87=config[_0x58214c(0xae)]['find'](_0x4093eb=>_0x4093eb['coin']==_0x1b28b8['coin']);if(_0x62da87&&_0x1b28b8[_0x58214c(0xc8)]!=_0x62da87[_0x58214c(0xc8)])_0x56ca2a=!![];});let _0x2bea76=dbConfig[_0x2b42bd(0x143)]('bot')['find']({'botID':botID})['value']();_0x2f46a6={..._0x2f46a6,'apiKey':crypt[_0x2b42bd(0xd2)](secure[_0x2b42bd(0x11c)],_0x2f46a6['apiKey'])[_0x2b42bd(0xef)],'apiSecret':crypt[_0x2b42bd(0xd2)](secure['privateKey'],_0x2f46a6[_0x2b42bd(0x18b)])[_0x2b42bd(0xef)]};_0x2f46a6[_0x2b42bd(0x1c4)]&&(_0x2f46a6['apiPassword']=crypt[_0x2b42bd(0xd2)](secure[_0x2b42bd(0x11c)],_0x2f46a6[_0x2b42bd(0x1c4)])['message']);let _0x1bc029=![];if(_0x2bea76){_0x2f46a6[_0x2b42bd(0x124)]==_0x2b42bd(0x131)?_0x2f46a6['apiKey']=config[_0x2b42bd(0x124)]:_0x1bc029=!![];_0x2f46a6['apiSecret']==_0x2b42bd(0x131)?_0x2f46a6['apiSecret']=config[_0x2b42bd(0x18b)]:_0x1bc029=!![];if(_0x2f46a6[_0x2b42bd(0x1c4)]=='************')_0x2f46a6[_0x2b42bd(0x1c4)]=config['apiPassword'];else{if(_0x2f46a6[_0x2b42bd(0x1c4)])_0x1bc029=!![];}dbConfig[_0x2b42bd(0x143)](_0x2b42bd(0x9d))[_0x2b42bd(0xc1)]({'botID':botID})[_0x2b42bd(0x1b1)](_0x2f46a6)[_0x2b42bd(0x1e8)]();}else dbConfig[_0x2b42bd(0x143)](_0x2b42bd(0x9d))['push'](_0x2f46a6)[_0x2b42bd(0x1e8)](),_0x1bc029=!![],process['send']({'status':_0x2b42bd(0x121),'live':'running'},_0x110294=>{});process['send']({'botname':_0x2f46a6[_0x2b42bd(0xbe)]},_0x1615a3=>{}),updateBotManager(),config={..._0x2f46a6},proxyEmit(_0x2b42bd(0xe8)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1bc029)await reset(_0x489cd1,!![]);else _0x5c8a3e||_0x56ca2a?await reset(_0x489cd1,![]):getBalances();blockTransactionDetection=![],logger[_0x2b42bd(0x14b)](_0x2b42bd(0xfe));}async function storeHeadless(_0x5b9bba){const _0x28e2a3=_0x38f10f,_0x5fa99d={...config,'headless':_0x5b9bba[_0x28e2a3(0xce)]};let _0x2be643=dbConfig[_0x28e2a3(0x143)](_0x28e2a3(0x9d))['find']({'botID':botID})[_0x28e2a3(0x188)]();_0x2be643&&dbConfig[_0x28e2a3(0x143)]('bot')[_0x28e2a3(0xc1)]({'botID':botID})[_0x28e2a3(0x1b1)](_0x5fa99d)[_0x28e2a3(0x1e8)](),config={..._0x5fa99d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x45fcca){const _0x527553=_0x38f10f,_0x5a4e99={...config,'fiat':_0x45fcca};let _0x150073=dbConfig[_0x527553(0x143)]('bot')['find']({'botID':botID})[_0x527553(0x188)]();_0x150073&&dbConfig[_0x527553(0x143)](_0x527553(0x9d))[_0x527553(0xc1)]({'botID':botID})[_0x527553(0x1b1)](_0x5a4e99)[_0x527553(0x1e8)](),config={..._0x5a4e99},proxyEmit(_0x527553(0x149),emittedConfiguration());}function resetHistory(){const _0x22f513=_0x38f10f;logger['full'](_0x22f513(0x18f));try{if(fs['existsSync'](path[_0x22f513(0x152)](configpath,_0x22f513(0xb2)+botID+_0x22f513(0x162))))fs[_0x22f513(0x107)](path[_0x22f513(0x152)](configpath,_0x22f513(0xb2)+botID+_0x22f513(0x162)));if(fs[_0x22f513(0x1e9)](path[_0x22f513(0x152)](configpath,'bot-'+botID+'-performance.json')))fs[_0x22f513(0x107)](path[_0x22f513(0x152)](configpath,_0x22f513(0xb2)+botID+'-performance.json'));if(fs[_0x22f513(0x1e9)](path[_0x22f513(0x152)](configpath,_0x22f513(0xb2)+botID+_0x22f513(0xaa))))fs[_0x22f513(0x107)](path['join'](configpath,_0x22f513(0xb2)+botID+'-results.json'));}catch(_0x449dcc){if(_0x449dcc)logger[_0x22f513(0xe9)](_0x22f513(0x133),_0x449dcc);}const _0x439c33=getDate();let _0x22a4fc=[];currentCoins[_0x22f513(0x140)](_0x3c25d6=>{const _0x14009f=_0x22f513;_0x22a4fc[_0x14009f(0x9e)]({'coin':_0x3c25d6[_0x14009f(0x139)],'number':_0x3c25d6['number'],'price':_0x3c25d6[_0x14009f(0x95)]});});let _0x21ac76=dbConfig[_0x22f513(0x143)]('bot')['find']({'botID':botID})[_0x22f513(0x188)]();_0x21ac76&&(dbConfig['get'](_0x22f513(0x9d))[_0x22f513(0xc1)]({'botID':botID})[_0x22f513(0x1b1)]({'liquidity':[{'date':_0x439c33,'changes':_0x22a4fc}]})[_0x22f513(0x1e8)](),config[_0x22f513(0x89)]=[]),process[_0x22f513(0xaf)]({'stop':'restart'},_0x59a884=>{});}function noslash(_0x3aa4fc){const _0x14591e=_0x38f10f;return _0x3aa4fc[_0x14591e(0x142)]('/','');}function updateHighestFee(_0x329a23){const _0xe8c456=_0x38f10f;if(_0x329a23['reverse']){let _0x460f42={'filled':_0x329a23[_0xe8c456(0x8c)]*_0x329a23[_0xe8c456(0x189)],'amount':_0x329a23[_0xe8c456(0x8c)]*_0x329a23[_0xe8c456(0x189)],'side':_0x329a23[_0xe8c456(0xc5)]==_0xe8c456(0x1f1)?_0xe8c456(0x163):_0xe8c456(0x1f1),'price':0x1/_0x329a23['price']};_0x329a23={..._0x329a23,..._0x460f42};}const _0x416e84=defaultFee*_0x329a23[_0xe8c456(0x8c)]*_0x329a23[_0xe8c456(0x189)];lastFees['recent20'][_0xe8c456(0x137)]===0x14&&lastFees[_0xe8c456(0x1b0)][_0xe8c456(0x80)](),lastFees[_0xe8c456(0x1b0)][_0xe8c456(0x9e)](_0x416e84),lastFees['highest']=Math[_0xe8c456(0x1a7)](...lastFees[_0xe8c456(0x1b0)]);}async function updateNumberCoinsCcxt(_0x434076){const _0x1f4cae=_0x38f10f;logger[_0x1f4cae(0x14b)](_0x1f4cae(0x76)+_0x434076[_0x1f4cae(0xcb)]+_0x1f4cae(0x157)+_0x434076[_0x1f4cae(0x85)]+_0x1f4cae(0x157)+_0x434076['id']);let _0x1b0104=_0x434076[_0x1f4cae(0x85)],_0x4a055a=![];currentCoins['forEach'](_0x4fef67=>{const _0x5a15ea=_0x1f4cae;_0x4fef67[_0x5a15ea(0xcb)]==_0x434076[_0x5a15ea(0xcb)]&&(_0x4a055a=!![]);});if(!_0x4a055a)return;const _0x3b9343=currentCoins['find'](_0x24c0fb=>_0x24c0fb[_0x1f4cae(0xcb)]==_0x434076[_0x1f4cae(0xcb)]),_0x170b72=_0x1a4a62=>{if(_0x3b9343)_0x3b9343['orderstatus']=_0x1a4a62;};if(_0x1b0104==_0x1f4cae(0x182))_0x170b72(_0x1f4cae(0x182));else{if(_0x1b0104=='canceled'){_0x170b72('canceled');const _0x6e0633=await getCoins();[currentCoins,currentCoinsAll]=_0x6e0633,await getOpenOrders(),handleOpenOrders();}else{if(_0x1b0104=='closed'){logger[_0x1f4cae(0x14b)]('1\x20-\x20FILLED:\x20'+_0x434076['symbol']+_0x1f4cae(0x157)+_0x434076[_0x1f4cae(0x8c)]+'\x20|\x20'+_0x434076['id']);let _0x471f16=![];if(lastOrders)for(const _0x219800 of lastOrders){const _0xe0e565=0xc8,_0x37abc6=0x1388;let _0x3b611e=0x0;while(!_0x219800['orderId']&&_0x3b611e*_0xe0e565<_0x37abc6){_0x3b611e++,await sleep(_0xe0e565);}if(_0x3b611e>0x0)logger[_0x1f4cae(0x14b)](_0x1f4cae(0x1ca)+_0x3b611e*_0xe0e565/0x3e8+_0x1f4cae(0x179));if(_0x219800[_0x1f4cae(0xa7)]==_0x434076['id']){logger[_0x1f4cae(0x14b)](_0x1f4cae(0xc7)+_0x434076['id']),_0x471f16=!![];if(_0x219800['filled']==0x0){logger[_0x1f4cae(0x14b)](_0x1f4cae(0x10a)+_0x434076['id']);if(_0x434076[_0x1f4cae(0xf9)])_0x219800[_0x1f4cae(0x189)]=_0x434076[_0x1f4cae(0xf9)];else{if(_0x434076['price'])_0x219800['price']=_0x434076[_0x1f4cae(0x189)];else{}}_0x219800[_0x1f4cae(0x8c)]=_0x434076[_0x1f4cae(0x8c)],updateHighestFee(_0x219800),_0x170b72('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x5c9d30=await getCoins();[currentCoins,currentCoinsAll]=_0x5c9d30;}_0x219800[_0x1f4cae(0x198)]={'currency':_0x434076[_0x1f4cae(0x198)]?_0x434076[_0x1f4cae(0x198)][_0x1f4cae(0x17a)]:null,'cost':_0x434076[_0x1f4cae(0x198)]?_0x434076[_0x1f4cae(0x198)]['cost']:0x0},await updateCoinResults(_0x219800);}}}if(!_0x471f16){logger[_0x1f4cae(0x14b)](_0x1f4cae(0xfa)+_0x434076['id']),_0x170b72(_0x1f4cae(0x8c));const _0x22c7c7=await getCoins();[currentCoins,currentCoinsAll]=_0x22c7c7,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x24c7f6=JSON[_0x1f4cae(0xbf)](lastBalances[_0x1f4cae(0xae)]);const _0x4638bc=_0x24c7f6[_0x1f4cae(0xc1)](_0x3dc5cd=>_0x3dc5cd['symbol']==_0x434076[_0x1f4cae(0xcb)]);if(_0x4638bc){if(_0x1b0104=='open')_0x4638bc[_0x1f4cae(0x1a0)]=_0x4638bc['orderstatus']==_0x1f4cae(0x8c)?'filled':_0x1f4cae(0x182);else{if(_0x1b0104==_0x1f4cae(0xb9))_0x4638bc[_0x1f4cae(0x1a0)]=_0x4638bc[_0x1f4cae(0x1a0)]==_0x1f4cae(0x8c)?_0x1f4cae(0x8c):_0x1f4cae(0xb9);else _0x1b0104==_0x1f4cae(0x12d)&&(_0x4638bc[_0x1f4cae(0x1a0)]=_0x1f4cae(0x8c));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1f4cae(0xcd)](_0x24c7f6)},proxyEmit(_0x1f4cae(0x1ec),{'serverversion':serverversion,'balances':lastBalances});}}function _0x4f09(_0x3073b8,_0x129845){const _0xe48434=_0x36da();return _0x4f09=function(_0x3a8e47,_0x3b19eb){_0x3a8e47=_0x3a8e47-0x6f;let _0x36dad0=_0xe48434[_0x3a8e47];return _0x36dad0;},_0x4f09(_0x3073b8,_0x129845);}async function updateOpenOrders(){const _0x2cac72=_0x38f10f;await getOpenOrders();let _0x31440e=![];currentCoins[_0x2cac72(0x140)](_0x33deaa=>{const _0x37777c=_0x2cac72;_0x31440e=allOpenOrders[_0x37777c(0xc1)](_0x418173=>_0x418173[_0x37777c(0xcb)]==_0x33deaa[_0x37777c(0xcb)]),_0x33deaa[_0x37777c(0x1a0)]=_0x31440e?_0x37777c(0x182):'none';});}async function getCoins(_0x517b84=!![],_0x233a69=config[_0x38f10f(0xbd)]){const _0x4f0ee3=_0x38f10f;let _0xf67853,_0x2dc1a5=[],_0x557869=[],_0x4acca6=[],_0x468198=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0xf67853=await exchange['fetchBalance'](),mybalances=_0xf67853[_0x4f0ee3(0x1aa)];for(const [_0x3b66f2,_0x44d82b]of Object['entries'](mybalances)){_0x468198[_0x4f0ee3(0x9e)](_0x3b66f2);}if(_0x233a69=='')for(const [_0x57dffb,_0x144e03]of Object[_0x4f0ee3(0x1bc)](mybalances)){_0x144e03!=0x0&&_0x557869[_0x4f0ee3(0x9e)]({'coin':_0x57dffb});}else{let _0x1528e6=![];for(const [_0x4ad891,_0x5ebd2f]of Object['entries'](mybalances)){if(_0x468198['includes'](_0x4ad891)){const _0x444bd9=config[_0x4f0ee3(0xae)]['find'](_0x407697=>_0x407697['coin']==_0x4ad891),_0x328f1d=_0x4ad891+'/'+_0x233a69,_0x27ee5d=_0x233a69+'/'+_0x4ad891,_0x393244=currentCoins[_0x4f0ee3(0xc1)](_0xa6b74e=>_0xa6b74e[_0x4f0ee3(0x139)]==_0x4ad891);_0x1528e6=![];if((_0x5ebd2f!=0x0||_0x444bd9)&&(allSymbols[_0x4f0ee3(0x172)](_0x328f1d)||_0x4ad891==_0x233a69))_0x4ad891!=_0x233a69&&_0x2dc1a5[_0x4f0ee3(0x9e)](_0x328f1d),_0x557869['push']({'coin':_0x4ad891,'symbol':_0x328f1d,'reverse':![],'number':Math['max'](_0x5ebd2f+(_0x444bd9&&_0x444bd9[_0x4f0ee3(0xc8)]||0x0),0x0),'orderstatus':_0x393244?_0x393244['orderstatus']:_0x4f0ee3(0x93)});else(_0x5ebd2f!=0x0||_0x444bd9)&&allSymbols[_0x4f0ee3(0x172)](_0x27ee5d)&&(_0x4ad891!=_0x233a69&&_0x2dc1a5[_0x4f0ee3(0x9e)](_0x27ee5d),_0x557869['push']({'coin':_0x4ad891,'symbol':_0x27ee5d,'reverse':!![],'number':Math[_0x4f0ee3(0x1a7)](_0x5ebd2f+(_0x444bd9&&_0x444bd9[_0x4f0ee3(0xc8)]||0x0),0x0),'orderstatus':_0x393244?_0x393244[_0x4f0ee3(0x1a0)]:'none'}));}}}}catch(_0x465e00){if(!_0x517b84)handleErrorNoStop(_0x465e00,_0x4f0ee3(0xf6));else await handleError(_0x465e00,_0x4f0ee3(0xf6));}return _0x4acca6=cloneDeep(_0x557869),_0x557869=_0x557869['filter'](_0x1899da=>{const _0x5ecd20=_0x4f0ee3,_0x159291=config[_0x5ecd20(0xae)][_0x5ecd20(0xc1)](_0x267446=>_0x267446[_0x5ecd20(0x139)]==_0x1899da[_0x5ecd20(0x139)]);return _0x159291&&!_0x159291['excluded'];}),[_0x557869,_0x4acca6];}async function getCoinNumber(_0x38b5ab){const _0xc6f046=_0x38f10f;let _0x258d4d;try{const _0x1fce44=await exchange[_0xc6f046(0x1d2)]();_0x258d4d=_0x1fce44['total'][_0x38b5ab];}catch(_0x2a6aa8){await handleError(_0x2a6aa8,'getCoinNumber()');}return _0x258d4d;}async function getOpenOrders(){const _0x4bc88c=_0x38f10f;let _0x4a6ad1;allOpenOrders=[];try{for(const _0x28c964 of config[_0x4bc88c(0xae)]){!_0x28c964['excluded']&&_0x28c964[_0x4bc88c(0x139)]!=config[_0x4bc88c(0xbd)]&&(_0x4a6ad1=await exchange['fetchOpenOrders'](_0x28c964[_0x4bc88c(0xcb)]),_0x4a6ad1[_0x4bc88c(0x137)]>0x0&&allOpenOrders[_0x4bc88c(0x9e)](_0x4a6ad1[0x0]));}}catch(_0x3aac44){await handleError(_0x3aac44,_0x4bc88c(0x1cc));}}async function handleOpenOrders(_0x2f6eab=0x0){const _0x3fc3e6=_0x38f10f;allOpenOrders[_0x3fc3e6(0x137)]==0x0&&lockOrders==ORDERS[_0x3fc3e6(0xb7)]&&allOrdersPlaced&&(_0x2f6eab==0x0?(logger[_0x3fc3e6(0x14b)]('1\x20-\x20Handle\x20open\x20orders'),_0x2f6eab++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3fc3e6(0x14b)](_0x3fc3e6(0xe2)),validateOrders(_0x3fc3e6(0x1df))));}async function testAPI(_0x116873){const _0x49bcbd=_0x38f10f,_0x441846=ccxt[_0x116873[_0x49bcbd(0xd7)][_0x49bcbd(0x7f)]()],_0x2af393=new _0x441846({'apiKey':_0x116873[_0x49bcbd(0x124)],'secret':_0x116873[_0x49bcbd(0x18b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x116873[_0x49bcbd(0x1c4)])_0x2af393[_0x49bcbd(0x147)]=_0x116873['apiPassword'];try{await _0x2af393[_0x49bcbd(0x1de)]();}catch(_0x3a5cca){throw _0x3a5cca;}}function cloneDeep(_0x160a40){const _0x2d3f1a=_0x38f10f;return JSON[_0x2d3f1a(0xbf)](JSON[_0x2d3f1a(0xcd)](_0x160a40));}async function getPortfolio(_0x47cff4){const _0x1cba4b=_0x38f10f;let _0x4cf17b=[],_0x539220=[],_0x346a25=[],_0x2fec42;if(_0x47cff4[_0x1cba4b(0x124)]!=='************'||_0x47cff4[_0x1cba4b(0x18b)]!==_0x1cba4b(0x131)||_0x47cff4[_0x1cba4b(0x1c4)]&&_0x47cff4['apiPassword']!=='************'){if(config[_0x1cba4b(0xd7)]){if(_0x47cff4['apiKey']=='************')_0x47cff4[_0x1cba4b(0x124)]=config['apiKey'];if(_0x47cff4[_0x1cba4b(0x18b)]==_0x1cba4b(0x131))_0x47cff4[_0x1cba4b(0x18b)]=config['apiSecret'];if(_0x47cff4[_0x1cba4b(0x1c4)]==_0x1cba4b(0x131))_0x47cff4[_0x1cba4b(0x1c4)]=config['apiPassword'];try{await testAPI(_0x47cff4);}catch(_0x1eaa98){if(_0x1eaa98[_0x1cba4b(0xf1)]()['includes'](_0x1cba4b(0x136))){logger[_0x1cba4b(0x14b)](_0x1cba4b(0x164)),proxyEmit(_0x1cba4b(0xae),![]);return;}else{handleError(_0x1eaa98,'getPortfolio(0)');return;}}}await initExchange(_0x47cff4[_0x1cba4b(0xd7)],_0x47cff4[_0x1cba4b(0x124)],_0x47cff4[_0x1cba4b(0x18b)],_0x47cff4['apiPassword']);try{await loadSymbols(_0x47cff4[_0x1cba4b(0xd7)],!![]);}catch(_0x1e0f0d){if(_0x1e0f0d[_0x1cba4b(0xf1)]()['includes'](_0x1cba4b(0x136))){proxyEmit(_0x1cba4b(0xae),![]);return;}else{handleError(_0x1e0f0d,_0x1cba4b(0x1e1));return;}}const _0x310ad1=await getCoins(![],_0x47cff4[_0x1cba4b(0xbd)]);_0x346a25=cloneDeep(_0x310ad1[0x1]);}else _0x346a25=cloneDeep(currentCoinsAll);if(_0x47cff4[_0x1cba4b(0xbd)]=='')proxyEmit(_0x1cba4b(0xae),_0x346a25);else{_0x346a25['forEach'](_0xfd117=>{const _0x3ca641=_0x1cba4b;if(_0xfd117[_0x3ca641(0x139)]!=_0x47cff4[_0x3ca641(0xbd)])_0x4cf17b['push'](_0xfd117[_0x3ca641(0xcb)]);});try{_0x539220=await exchange[_0x1cba4b(0x17e)](_0x4cf17b);}catch(_0x2fa6c8){if(_0x2fa6c8['toString']()['includes'](_0x1cba4b(0x136))){proxyEmit(_0x1cba4b(0xae),![]);return;}else{handleError(_0x2fa6c8,'getPortfolio(2)');return;}}_0x346a25[_0x1cba4b(0x140)](_0x50730b=>{const _0x492412=_0x1cba4b;_0x50730b[_0x492412(0x139)]!=_0x47cff4['basecoin']?_0x2fec42=_0x50730b[_0x492412(0x1e7)]?0x1/_0x539220[_0x50730b['symbol']][_0x492412(0x95)]:_0x539220[_0x50730b[_0x492412(0xcb)]][_0x492412(0x95)]:_0x2fec42=0x1,_0x50730b[_0x492412(0x189)]=formatResult(_0x2fec42,0x8);}),proxyEmit(_0x1cba4b(0xae),_0x346a25);}}function truncateTradeAmount(_0x495c81,_0x170a57){const _0x35d9f5=_0x38f10f;let _0x1b51f9=0x0;try{_0x1b51f9=exchange[_0x35d9f5(0x103)](_0x495c81,_0x170a57);}catch(_0x257b46){}return _0x1b51f9;}function checkMinimums(_0x2a3cff){const _0x1803f1=_0x38f10f;let _0x9e2a01=!![];const _0x1089fb=!_0x2a3cff[_0x1803f1(0x1e7)]?markets[_0x2a3cff[_0x1803f1(0xcb)]][_0x1803f1(0x1ac)][_0x1803f1(0x145)]['min']:markets[_0x2a3cff[_0x1803f1(0xcb)]][_0x1803f1(0x1ac)]['cost']['min'],_0x2963ee=!_0x2a3cff[_0x1803f1(0x1e7)]?markets[_0x2a3cff[_0x1803f1(0xcb)]]['limits'][_0x1803f1(0x1a2)][_0x1803f1(0xe1)]:markets[_0x2a3cff[_0x1803f1(0xcb)]][_0x1803f1(0x1ac)][_0x1803f1(0x145)][_0x1803f1(0xe1)],_0x2b10d5=truncateTradeAmount(_0x2a3cff['symbol'],_0x2a3cff[_0x1803f1(0x159)]);_0x2a3cff[_0x1803f1(0x159)]=_0x2b10d5;if(Math[_0x1803f1(0x154)](_0x2b10d5)<_0x1089fb)_0x9e2a01=![];if(Math[_0x1803f1(0x154)](_0x2b10d5)*_0x2a3cff[_0x1803f1(0x95)]<_0x2963ee)_0x9e2a01=![];if(_0x2a3cff[_0x1803f1(0xc5)]==_0x1803f1(0x1f1)){let _0x1e54e6=config[_0x1803f1(0xae)][_0x1803f1(0xc1)](_0x5cd69a=>_0x5cd69a[_0x1803f1(0x139)]==_0x2a3cff['coin']);if(_0x1e54e6[_0x1803f1(0xc8)]>0x0){if(Math['abs'](_0x2b10d5)>_0x2a3cff[_0x1803f1(0x70)]-_0x1e54e6['offset'])_0x9e2a01=![];}else{if(Math[_0x1803f1(0x154)](_0x2b10d5)>_0x2a3cff[_0x1803f1(0x70)])_0x9e2a01=![];}}if(_0x2a3cff[_0x1803f1(0xc5)]=='buy'){let _0x341b56=config[_0x1803f1(0xae)][_0x1803f1(0xc1)](_0x76eff6=>_0x76eff6[_0x1803f1(0x139)]==config[_0x1803f1(0xbd)]),_0x1d0680=currentCoins[_0x1803f1(0xc1)](_0x18c97d=>_0x18c97d[_0x1803f1(0x139)]==config['basecoin']);if(_0x341b56[_0x1803f1(0xc8)]>0x0){if(Math[_0x1803f1(0x154)](_0x2b10d5)*_0x2a3cff[_0x1803f1(0x95)]>_0x1d0680['number']-_0x341b56[_0x1803f1(0xc8)])_0x9e2a01=![];}else{if(Math['abs'](_0x2b10d5)*_0x2a3cff[_0x1803f1(0x95)]>_0x1d0680[_0x1803f1(0x70)])_0x9e2a01=![];}}return _0x9e2a01;}async function getBalances(_0x3f8ab8=!![]){const _0x549346=_0x38f10f;let _0x21f5bb=0x0,_0x1d3c5a;const _0x5c473f=config[_0x549346(0x128)];if(config[_0x549346(0xce)]&&config[_0x549346(0x108)]<0x0)await validate24hChanges();currentCoins[_0x549346(0x140)](_0x46ab71=>{const _0x292077=_0x549346;if(_0x46ab71[_0x292077(0x139)]!=config[_0x292077(0xbd)]){let _0x34bed3=global[_0x292077(0x9f)][noslash(_0x46ab71['symbol'])];_0x1d3c5a=_0x46ab71[_0x292077(0x1e7)]?0x1/_0x34bed3:_0x34bed3;}else _0x1d3c5a=0x1;let _0x42e251=_0x46ab71[_0x292077(0x70)]*_0x1d3c5a;_0x21f5bb+=_0x42e251,_0x46ab71['last']=formatResult(Number(_0x1d3c5a),0x8),_0x46ab71[_0x292077(0x188)]=_0x42e251;}),currentCoins['forEach'](_0x550322=>{const _0x5d17b7=_0x549346;let _0x4e11dd=config['portfolio'][_0x5d17b7(0xc1)](_0x64b293=>_0x64b293[_0x5d17b7(0x139)]==_0x550322[_0x5d17b7(0x139)]),_0x598ce2=Number(_0x4e11dd[_0x5d17b7(0x1b2)]),_0x75df58=_0x550322[_0x5d17b7(0x188)]/_0x21f5bb*0x64,_0x553ffc=_0x598ce2*_0x21f5bb/0x64/_0x550322[_0x5d17b7(0x95)]-_0x550322[_0x5d17b7(0x70)];_0x550322[_0x5d17b7(0x1b2)]=formatResult(_0x75df58,0x3),_0x550322[_0x5d17b7(0x15e)]=formatResult(_0x598ce2,0x3),_0x550322[_0x5d17b7(0x159)]=formatResult(_0x553ffc,0x8),_0x550322[_0x5d17b7(0xc5)]='',_0x550322[_0x5d17b7(0x110)]=![];if(_0x550322[_0x5d17b7(0x139)]!=config['basecoin']){if(_0x550322[_0x5d17b7(0x1b2)]>_0x598ce2)_0x550322[_0x5d17b7(0xc5)]=_0x5d17b7(0x1f1),_0x550322['valid']=checkMinimums(_0x550322);else _0x550322[_0x5d17b7(0x1b2)]<_0x598ce2&&(_0x550322[_0x5d17b7(0xc5)]=_0x5d17b7(0x163),_0x550322[_0x5d17b7(0x110)]=checkMinimums(_0x550322));}_0x550322[_0x5d17b7(0x1e4)]=_0x550322[_0x5d17b7(0x1b2)]/_0x550322[_0x5d17b7(0x15e)]-0x1;if(_0x550322[_0x5d17b7(0x1a0)]==_0x5d17b7(0x8c)||_0x550322[_0x5d17b7(0x1a0)]==_0x5d17b7(0xb9))_0x550322[_0x5d17b7(0x1a0)]='none';}),currentCoins[_0x549346(0x16b)]((_0x5c82f3,_0x51f28a)=>_0x5c82f3[_0x549346(0x1e4)]<_0x51f28a[_0x549346(0x1e4)]?0x1:_0x51f28a['delta']<_0x5c82f3[_0x549346(0x1e4)]?-0x1:0x0);const _0x2f9052=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2f9052[_0x549346(0x8d)],'usd':_0x2f9052['usd'],'portfolio':JSON[_0x549346(0xcd)](currentCoins),'threshold':_0x5c473f},proxyEmit(_0x549346(0x1ec),{'serverversion':serverversion,'balances':lastBalances});if(_0x3f8ab8){if(config[_0x549346(0xce)])headlessMode({'portfolio':currentCoins,'threshold':_0x5c473f});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5c473f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4702db=getNormalizedPerformance();getStartingBalances(_0x4702db),emitPerformance(_0x4702db);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4a8980=getNormalizedPerformance();emitPerformance(_0x4a8980),getStartingBalances(_0x4a8980),logger[_0x549346(0x14b)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x29b15b=_0x38f10f;if(!lastBalances)return;let _0x33970e=[],_0x4af68f,_0x3936eb=JSON[_0x29b15b(0xbf)](lastBalances[_0x29b15b(0xae)]);_0x3936eb[_0x29b15b(0x16b)]((_0x9056fa,_0x4339b5)=>_0x9056fa[_0x29b15b(0x139)]>_0x4339b5[_0x29b15b(0x139)]?0x1:_0x4339b5[_0x29b15b(0x139)]>_0x9056fa[_0x29b15b(0x139)]?-0x1:0x0),_0x3936eb[_0x29b15b(0x140)](_0xb4ba36=>{const _0x4d35d3=_0x29b15b;let _0x47c1a8={'coin':_0xb4ba36[_0x4d35d3(0x139)],'number':_0xb4ba36[_0x4d35d3(0x70)],'price':_0xb4ba36['last']};_0x33970e['push'](_0x47c1a8);});const _0x59f725=await getFiat();_0x4af68f={'date':lastBalances[_0x29b15b(0xd3)]['split']('\x20')[0x0],'eur':_0x59f725['eur'],'usd':_0x59f725[_0x29b15b(0x15b)],'coins':_0x33970e};let _0x46c7c3=dbPerformance[_0x29b15b(0x143)]('data')['find']({'date':_0x4af68f[_0x29b15b(0x134)]})['value']();_0x46c7c3?_0x4af68f[_0x29b15b(0x134)]!=config[_0x29b15b(0xe3)]&&dbPerformance[_0x29b15b(0x143)](_0x29b15b(0x1f0))[_0x29b15b(0xc1)]({'date':_0x4af68f[_0x29b15b(0x134)]})[_0x29b15b(0x1b1)](_0x4af68f)['write']():dbPerformance['get'](_0x29b15b(0x1f0))[_0x29b15b(0x9e)](_0x4af68f)[_0x29b15b(0x1e8)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3a539a=_0x38f10f;let _0x266d84=[];if(dbPerformance['has'](_0x3a539a(0x1f0))[_0x3a539a(0x188)]()){let _0x5d80b5=dbPerformance[_0x3a539a(0x143)](_0x3a539a(0x1f0))[_0x3a539a(0x1d9)]()['filter'](_0x26ae22=>{const _0x5d3edc=_0x3a539a;if(_0x26ae22[_0x5d3edc(0xab)][_0x5d3edc(0x137)]==0x0)return![];else return!![];})[_0x3a539a(0x115)](_0x3a539a(0x134))[_0x3a539a(0x188)](),_0x48255b=[...config[_0x3a539a(0x89)]];_0x48255b[_0x3a539a(0x16b)]((_0x3c5fb9,_0x4b0951)=>_0x3c5fb9[_0x3a539a(0x134)]>_0x4b0951[_0x3a539a(0x134)]?-0x1:_0x4b0951[_0x3a539a(0x134)]>_0x3c5fb9['date']?0x1:0x0);let _0x19c9c3=0x1,_0x4c2d9d=[],_0x1ae774=0x0;_0x5d80b5[_0x3a539a(0x16e)]()['reverse']()[_0x3a539a(0x140)]((_0x10d559,_0x5af481)=>{const _0x2172c9=_0x3a539a;if(_0x48255b[_0x1ae774]){if(_0x5d80b5[_0x5d80b5[_0x2172c9(0x137)]-_0x5af481]&&_0x48255b[_0x1ae774][_0x2172c9(0x134)]==_0x5d80b5[_0x5d80b5['length']-_0x5af481][_0x2172c9(0x134)]){if(_0x5af481<_0x5d80b5[_0x2172c9(0x137)]){let _0x48003a=0x0,_0xfb307c=0x0;_0x5d80b5[_0x5d80b5[_0x2172c9(0x137)]-_0x5af481][_0x2172c9(0xab)]['forEach'](_0x3df2e2=>{const _0x59426a=_0x2172c9;_0xfb307c+=_0x3df2e2[_0x59426a(0x70)]*_0x3df2e2['price'];}),_0x48255b[_0x1ae774][_0x2172c9(0xc2)][_0x2172c9(0x140)](_0xc41522=>{const _0x56faf0=_0x2172c9;_0x48003a+=_0xc41522[_0x56faf0(0x70)]*_0xc41522[_0x56faf0(0x189)];}),_0x19c9c3*=_0x48003a/(_0xfb307c-_0x48003a)+0x1;}_0x1ae774++;}}let _0x21c796=0x0;_0x10d559[_0x2172c9(0xab)][_0x2172c9(0x140)](_0x4ba975=>{const _0x95b82b=_0x2172c9;_0x21c796+=_0x4ba975[_0x95b82b(0x70)]*_0x4ba975[_0x95b82b(0x189)];}),_0x4c2d9d[_0x5d80b5['length']-_0x5af481-0x1]=_0x21c796*(_0x19c9c3-0x1);});let _0x85012e=[];_0x48255b=[...config[_0x3a539a(0x89)]]||[];let _0xb25c85=0x0;_0x1ae774=0x0,_0x5d80b5['forEach']((_0x298193,_0x2a402f)=>{const _0x24530e=_0x3a539a;if(_0x48255b[_0x1ae774]){const _0x519b80=fns[_0x24530e(0xbf)](_0x48255b[_0x1ae774][_0x24530e(0x134)],_0x24530e(0xba),new Date()),_0x7ac678=fns[_0x24530e(0xbf)](_0x298193[_0x24530e(0x134)],_0x24530e(0xba),new Date());if(fns[_0x24530e(0x71)](_0x519b80,_0x7ac678)){let _0x111085=0x0;_0x48255b[_0x1ae774][_0x24530e(0xc2)][_0x24530e(0x140)](_0x24c3bd=>{const _0x7baff1=_0x24530e;!_0x85012e[_0x24c3bd[_0x7baff1(0x139)]]?_0x85012e[_0x24c3bd[_0x7baff1(0x139)]]=_0x24c3bd[_0x7baff1(0x70)]:(_0x111085=_0x85012e[_0x24c3bd[_0x7baff1(0x139)]],_0x85012e[_0x24c3bd[_0x7baff1(0x139)]]+=_0x24c3bd['number']);const _0x1a447f=_0x298193[_0x7baff1(0xab)]['find'](_0x10f3cc=>_0x10f3cc[_0x7baff1(0x139)]==_0x24c3bd['coin']);(!_0x1a447f||_0x1a447f[_0x7baff1(0x70)]==0x0)&&(_0xb25c85+=(-_0x24c3bd['number']-_0x111085)*_0x24c3bd[_0x7baff1(0x189)]);}),_0x1ae774++;}}_0x298193[_0x24530e(0xab)][_0x24530e(0x140)]((_0x1c7bb9,_0x8e2caf)=>{const _0x3fdd28=_0x24530e;_0x85012e[_0x1c7bb9[_0x3fdd28(0x139)]]&&(_0x1c7bb9['initial']=_0x85012e[_0x1c7bb9['coin']]);}),_0x266d84[_0x24530e(0x9e)]({'date':_0x298193[_0x24530e(0x134)],'eur':_0x298193[_0x24530e(0x8d)],'usd':_0x298193[_0x24530e(0x15b)],'offset':_0x4c2d9d[_0x2a402f],'netoffset':_0xb25c85,'coins':_0x298193[_0x24530e(0xab)]});});}return _0x266d84;}function emitPerformance(_0x36505a){const _0x4690de=_0x38f10f;_0x36505a[_0x4690de(0x137)]!==0x0?(proxyEmit(_0x4690de(0x1dd),_0x36505a),lastPerformanceEmitted=getDate()):proxyEmit(_0x4690de(0x1dd),[]);}function getPerf(_0x3eb084,_0x590ca2){const _0x2df5c6=_0x38f10f;let _0xbc98c6=0x0,_0x4d27e1=0x0,_0x39fa95=0x0;_0x3eb084[_0x2df5c6(0xab)][_0x2df5c6(0x140)](_0x115586=>{const _0x3c295b=_0x2df5c6;_0xbc98c6+=_0x115586[_0x3c295b(0x70)]*_0x115586[_0x3c295b(0x189)];});_0x590ca2&&(_0xbc98c6+=_0x3eb084['offset']);if(config['basecoin']==='BTC'||config[_0x2df5c6(0xbd)]===_0x2df5c6(0x87))_0x4d27e1=_0xbc98c6*_0x3eb084[_0x2df5c6(0x8d)],_0x39fa95=_0xbc98c6*_0x3eb084[_0x2df5c6(0x15b)];else{if(usdBasecoins[_0x2df5c6(0x172)](config[_0x2df5c6(0xbd)]))_0x4d27e1=_0xbc98c6*_0x3eb084[_0x2df5c6(0x8d)]/_0x3eb084[_0x2df5c6(0x15b)],_0x39fa95=_0xbc98c6;else config[_0x2df5c6(0xbd)]===_0x2df5c6(0x13b)&&(_0x4d27e1=_0xbc98c6,_0x39fa95=_0xbc98c6*_0x3eb084[_0x2df5c6(0x15b)]/_0x3eb084[_0x2df5c6(0x8d)]);}return[_0xbc98c6,_0x4d27e1,_0x39fa95];}function getKPIs(_0x3fac5b,_0x2c69c6='EUR'){const _0xa2de0=_0x38f10f,_0x49ffdb=config[_0xa2de0(0xbd)],_0x589ed0=lastBalances,_0x22e51b=currentCoins,_0x32d680=getNormalizedPerformance(),_0x2888e7=_0x3fac5b===_0xa2de0(0xbd)?_0x49ffdb:_0x3fac5b===_0xa2de0(0x10b)||_0x3fac5b==='net-fiat'?_0x2c69c6:_0xa2de0(0xda)+_0x49ffdb,_0x3e4099=_0x3fac5b==='net-basecoin'?_0xa2de0(0xb1):_0x3fac5b===_0xa2de0(0x187)?_0xa2de0(0xb1):_0x2888e7+_0xa2de0(0x1a3),_0x2ecc63=_0x3fac5b===_0xa2de0(0x199)||_0x3fac5b===_0xa2de0(0x187)?_0xa2de0(0xb1):_0x2888e7+_0xa2de0(0xbb);let _0x1469f6=0x0;_0x22e51b['forEach'](_0x288776=>{const _0x59085e=_0xa2de0;_0x1469f6+=_0x288776[_0x59085e(0x70)]*_0x288776['last'];});if(_0x3fac5b===_0xa2de0(0x10b)||_0x3fac5b===_0xa2de0(0x187)){if(_0x49ffdb===_0xa2de0(0xf4)||_0x49ffdb===_0xa2de0(0x87))_0x1469f6=_0x1469f6*(_0x2c69c6===_0xa2de0(0x13b)?_0x589ed0['eur']:_0x589ed0[_0xa2de0(0x15b)]);else{if(usdBasecoins[_0xa2de0(0x172)](_0x49ffdb))_0x1469f6=_0x1469f6*(_0x2c69c6===_0xa2de0(0x13b)?_0x589ed0['eur']/_0x589ed0[_0xa2de0(0x15b)]:0x1);else _0x49ffdb===_0xa2de0(0x13b)&&(_0x1469f6=_0x1469f6*(_0x2c69c6==='EUR'?0x1:_0x589ed0[_0xa2de0(0x15b)]/_0x589ed0[_0xa2de0(0x8d)]));}}let _0x50414c;if(_0x1469f6!==0x0){if(_0x3fac5b===_0xa2de0(0xbd))_0x50414c=(_0x1469f6/startingBalances[_0xa2de0(0xbd)]-0x1)*0x64;else{if(_0x2c69c6===_0xa2de0(0x13b))_0x50414c=(_0x1469f6/startingBalances[_0xa2de0(0x8d)]-0x1)*0x64;else _0x50414c=(_0x1469f6/startingBalances[_0xa2de0(0x15b)]-0x1)*0x64;}let _0x51375d=0x0;if(startingBalances[_0xa2de0(0xab)])_0x22e51b[_0xa2de0(0x140)](_0x43397b=>{const _0x534e11=_0xa2de0;let _0x3cb44f=startingBalances['coins'][_0x534e11(0xc1)](_0x8f8ada=>_0x8f8ada['coin']===_0x43397b[_0x534e11(0x139)]);if(_0x3cb44f&&_0x3cb44f['coin']&&_0x43397b[_0x534e11(0x70)]!==0x0)_0x51375d+=_0x3cb44f[_0x534e11(0x70)]*_0x43397b['last'];});let _0x2cbbe5=0x0;if(_0x32d680[_0xa2de0(0x137)]!==0x0){let _0x2829bd=_0x32d680[_0x32d680['length']-0x1];_0x2cbbe5=_0x2829bd[_0xa2de0(0x1a1)];}_0x51375d-=_0x2cbbe5;_0x3fac5b===_0xa2de0(0x199)&&(_0x50414c=(_0x1469f6-_0x51375d)/startingBalances[_0xa2de0(0xbd)]*0x64,_0x1469f6=_0x1469f6-_0x51375d);if(_0x3fac5b===_0xa2de0(0x187)){let _0x255487=_0x2c69c6===_0xa2de0(0x13b)?startingBalances[_0xa2de0(0x8d)]:startingBalances[_0xa2de0(0x15b)];if(_0x49ffdb==='BTC'||_0x49ffdb===_0xa2de0(0x87))_0x51375d=_0x2c69c6===_0xa2de0(0x13b)?_0x51375d*_0x589ed0[_0xa2de0(0x8d)]:_0x51375d*_0x589ed0['usd'];else{if(usdBasecoins[_0xa2de0(0x172)](_0x49ffdb))_0x51375d=_0x2c69c6===_0xa2de0(0x13b)?_0x51375d*_0x589ed0['eur']/_0x589ed0[_0xa2de0(0x15b)]:_0x51375d;else _0x49ffdb===_0xa2de0(0x13b)&&(_0x51375d=_0x2c69c6==='EUR'?_0x51375d:_0x51375d*_0x589ed0[_0xa2de0(0x15b)]/_0x589ed0[_0xa2de0(0x8d)]);}_0x50414c=(_0x1469f6-_0x51375d)/_0x255487*0x64,_0x1469f6=_0x1469f6-_0x51375d;}if(_0x50414c){if(_0x50414c<0x64)_0x50414c=_0x50414c[_0xa2de0(0x158)](0x2);else{if(_0x50414c<0x3e8)_0x50414c=_0x50414c[_0xa2de0(0x158)](0x1);else _0x50414c=_0x50414c[_0xa2de0(0x158)](0x0);}}else _0x50414c=Number('0')['toFixed'](0x2);if(_0x1469f6){if(Math[_0xa2de0(0x154)](_0x1469f6)<0.000001)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x2);else{if(Math[_0xa2de0(0x154)](_0x1469f6)<0.1)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x6);else{if(Math[_0xa2de0(0x154)](_0x1469f6)<0x1)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x5);else{if(Math[_0xa2de0(0x154)](_0x1469f6)<0xa)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x4);else{if(Math[_0xa2de0(0x154)](_0x1469f6)<0x64)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x3);else{if(Math['abs'](_0x1469f6)<0x3e8)_0x1469f6=_0x1469f6[_0xa2de0(0x158)](0x2);else _0x1469f6=_0x1469f6['toFixed'](0x2);}}}}}}else _0x1469f6=Number('0')[_0xa2de0(0x158)](0x2);}else _0x50414c=Number('0')[_0xa2de0(0x158)](0x2);return{'value':_0x1469f6,'change':_0x50414c,'leftTxt':_0x3e4099,'rightTxt':_0x2ecc63};}async function getStartingBalances(_0x4f8d10,_0x5e4669=!![]){const _0x343687=_0x38f10f;if(_0x4f8d10['length']!==0x0){const [_0x494700,_0x319c63,_0x5c6031]=getPerf(_0x4f8d10[0x0],!![]);let _0x4e04ad=[];config[_0x343687(0xae)][_0x343687(0x140)](_0x56fe9f=>{const _0x4d5795=_0x343687;let _0x53c7a7=0x0,_0x4218d1;config[_0x4d5795(0x89)][_0x4d5795(0x140)](_0x20da2b=>{const _0x39032b=_0x4d5795;let _0x1059dd=_0x20da2b[_0x39032b(0xc2)][_0x39032b(0xc1)](_0x36df1f=>_0x36df1f['coin']==_0x56fe9f[_0x39032b(0x139)]);if(_0x1059dd){_0x53c7a7+=_0x1059dd['number'];if(!_0x4218d1)_0x4218d1=_0x1059dd['price'];}}),_0x4e04ad['push']({'coin':_0x56fe9f[_0x4d5795(0x139)],'number':_0x53c7a7,'initialprice':_0x4218d1});});const _0x18629c={'basecoin':_0x494700,'eur':_0x319c63,'usd':_0x5c6031,'coins':_0x4e04ad};if(_0x5e4669)proxyEmit(_0x343687(0x1ce),_0x18629c);startingBalances=_0x18629c;}}function headlessMode(_0x3eb60f){const _0x2911a1=_0x38f10f;let _0x1d0f94=_0x3eb60f[_0x2911a1(0xae)],_0x13deb9=_0x3eb60f[_0x2911a1(0x128)],_0x311cfd=[];for(let _0x4191ed of _0x1d0f94){if(_0x4191ed[_0x2911a1(0x139)]!=config[_0x2911a1(0xbd)]){if(_0x4191ed['delta']>=_0x13deb9/0x64){if(_0x4191ed['valid'])_0x311cfd[_0x2911a1(0x9e)](_0x4191ed);}else{if(_0x4191ed[_0x2911a1(0x1e4)]<=-_0x13deb9/0x64){if(_0x4191ed[_0x2911a1(0x110)])_0x311cfd[_0x2911a1(0x9e)](_0x4191ed);}}}}_0x311cfd[_0x2911a1(0x137)]>0x0&&placeOrder(_0x311cfd);}function notifyBalance(_0x52ae6f){const _0x2f20d0=_0x38f10f;let _0x147b0d=_0x52ae6f['portfolio'],_0x20a7fc=_0x52ae6f[_0x2f20d0(0x128)],_0x59cbfc=[];for(let _0x588e80 of _0x147b0d){if(_0x588e80[_0x2f20d0(0x139)]!=config[_0x2f20d0(0xbd)]){if(_0x588e80['delta']>=_0x20a7fc/0x64){if(_0x588e80[_0x2f20d0(0x110)])_0x59cbfc[_0x2f20d0(0x9e)](_0x588e80);}else{if(_0x588e80['delta']<=-_0x20a7fc/0x64){if(_0x588e80['valid'])_0x59cbfc[_0x2f20d0(0x9e)](_0x588e80);}}}}if(_0x59cbfc[_0x2f20d0(0x137)]>0x0){let _0xb81e48=_0x59cbfc[_0x2f20d0(0x9a)](_0xfdf056=>_0xfdf056[_0x2f20d0(0x139)]);_0xb81e48[_0x2f20d0(0x16b)]();let _0x53afe5=_0xb81e48[_0x2f20d0(0x152)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2f20d0(0x102),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x53afe5;}}function symbolToCoin(_0x48a2f0){const _0x3d5057=_0x38f10f;let _0x536737;if(_0x48a2f0[_0x3d5057(0x172)]('/'+config['basecoin']))_0x536737=_0x48a2f0[_0x3d5057(0x142)]('/'+config[_0x3d5057(0xbd)],'');if(_0x48a2f0[_0x3d5057(0x172)](config[_0x3d5057(0xbd)]+'/'))_0x536737=_0x48a2f0['replace'](config[_0x3d5057(0xbd)]+'/','');return _0x536737;}async function unlockOrders(){const _0x41a6ad=_0x38f10f;if(allOrdersPlaced&&lockOrders==ORDERS[_0x41a6ad(0xb7)]){logger[_0x41a6ad(0x14b)](_0x41a6ad(0x117)),lockOrders=ORDERS[_0x41a6ad(0x79)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x33c0f5=await getCoins();[currentCoins,currentCoinsAll]=_0x33c0f5,validateOrdersState=_0x41a6ad(0x19b),persistOpenOrders([]),lockOrders=ORDERS[_0x41a6ad(0x14d)],logger[_0x41a6ad(0x14b)](_0x41a6ad(0x1dc));}}async function validateOrders(_0x1cbea5){const _0x3bb2b3=_0x38f10f;if(_0x1cbea5)validateOrdersState=_0x1cbea5;logger[_0x3bb2b3(0x14b)](_0x3bb2b3(0x1f4)+validateOrdersState+_0x3bb2b3(0x12a)+(lockOrders==0x1?_0x3bb2b3(0x19d):lockOrders==0x2?_0x3bb2b3(0xc0):'ORDERS.UNLOCKED'));let _0x2b69ee=[],_0x45ad1d=config[_0x3bb2b3(0x86)]==_0x3bb2b3(0xf5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3bb2b3(0xf8)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3bb2b3(0xb7)])return;logger[_0x3bb2b3(0x14b)](_0x3bb2b3(0xf7)+validateOrdersState),lastOrders[_0x3bb2b3(0x140)](_0x2aecae=>{const _0x3f8188=_0x3bb2b3;let _0x19714d=![];_0x2aecae[_0x3f8188(0x8c)]>0x0&&(_0x19714d=!![]),_0x2b69ee[_0x3f8188(0x9e)](_0x19714d),_0x19714d&&config[_0x3f8188(0x86)]!='market'&&logHistory(_0x3f8188(0xad),_0x3f8188(0x1bb)+_0x2aecae[_0x3f8188(0xcb)]+'\x20'+_0x2aecae[_0x3f8188(0xc5)]+'\x20#'+formatResult(_0x2aecae[_0x3f8188(0x8c)],0x8)+'\x20@'+formatResult(_0x2aecae[_0x3f8188(0x189)],0x8));}),_0x2b69ee[_0x3bb2b3(0x140)]((_0x1943c9,_0x207e7c)=>{const _0x7505=_0x3bb2b3;if(_0x1943c9)lastOrders[_0x7505(0x116)](_0x207e7c,0x1);}),persistOpenOrders(lastOrders);const _0x46fe8d=coolingDown?_0x3bb2b3(0xbc):_0x3bb2b3(0x6f);if(validateOrdersState==_0x3bb2b3(0x19b)){validateOrdersState='ongoing';if(_0x2b69ee['includes'](![])){if(config[_0x3bb2b3(0x86)]==_0x3bb2b3(0xf5)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3bb2b3(0x10c)){if(_0x2b69ee[_0x3bb2b3(0x172)](![])){}else{if(allOrdersPlaced){if(config[_0x3bb2b3(0x86)]==_0x3bb2b3(0xf5)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3bb2b3(0x1ba))_0x2b69ee[_0x3bb2b3(0x172)](![])&&(config[_0x3bb2b3(0x86)]==_0x3bb2b3(0xf5)?logHistory(_0x3bb2b3(0x156),_0x3bb2b3(0x14f)+Math[_0x3bb2b3(0x1b6)](_0x45ad1d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x46fe8d):(await cancelOrders(),logHistory(_0x3bb2b3(0x156),_0x3bb2b3(0x1c7)+Math[_0x3bb2b3(0x1b6)](_0x45ad1d*validateOrderInterval/0xea60)+_0x3bb2b3(0x11d)+_0x46fe8d))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x3bb2b3(0x86)]!='market')logHistory('success',_0x3bb2b3(0x1c1)+_0x46fe8d);await unlockOrders();}}}}}async function cancelOrders(){const _0x8bb099=_0x38f10f;lastOrders[_0x8bb099(0x140)](async _0x6fd5c2=>{const _0xad2280=_0x8bb099;try{const _0x47c99c=await exchange[_0xad2280(0xb3)](_0x6fd5c2[_0xad2280(0xa7)],_0x6fd5c2[_0xad2280(0xcb)]);}catch(_0x318211){if(_0x318211['toString']()[_0xad2280(0x172)]('OrderNotFound')){}else await handleError(_0x318211,_0xad2280(0xe5));}});}async function initCoinResults(_0x3e5e89){const _0x36f74b=_0x38f10f;_0x3e5e89?logger[_0x36f74b(0x14b)](_0x36f74b(0x114)+_0x3e5e89):logger[_0x36f74b(0x14b)](_0x36f74b(0x10e)),config[_0x36f74b(0xae)][_0x36f74b(0x140)](_0x57ee78=>{const _0x3dcffa=_0x36f74b;if(!_0x57ee78[_0x3dcffa(0x17b)]&&_0x57ee78[_0x3dcffa(0x139)]!=config[_0x3dcffa(0xbd)]){const _0x39579a=currentCoins[_0x3dcffa(0xc1)](_0x2054d8=>_0x2054d8['coin']==_0x57ee78[_0x3dcffa(0x139)]),_0x19efe9=global[_0x3dcffa(0x9f)][noslash(_0x57ee78[_0x3dcffa(0xcb)])];let _0x516fe3=_0x39579a?_0x39579a[_0x3dcffa(0x70)]:null,_0x50b572=_0x57ee78['reverse']?0x1/_0x19efe9:_0x19efe9,_0x380c6b;config[_0x3dcffa(0x89)][_0x3dcffa(0x140)](_0x5bf3e5=>{const _0x4a1505=_0x3dcffa;!_0x380c6b&&(_0x380c6b=_0x5bf3e5[_0x4a1505(0xc2)][_0x4a1505(0xc1)](_0x51c7aa=>_0x51c7aa[_0x4a1505(0x139)]==_0x57ee78[_0x4a1505(0x139)]),_0x380c6b&&(_0x516fe3=_0x380c6b[_0x4a1505(0x70)],_0x50b572=_0x380c6b[_0x4a1505(0x189)]));});let _0x191f27=dbCoinResults[_0x3dcffa(0x143)]('coins')[_0x3dcffa(0xc1)]({'coin':_0x57ee78['coin']})['value']();if(!_0x191f27){const _0x21dd86={'coin':_0x57ee78[_0x3dcffa(0x139)],'number':_0x516fe3,'breakeven':_0x50b572,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3dcffa(0x143)](_0x3dcffa(0xab))[_0x3dcffa(0x9e)](_0x21dd86)[_0x3dcffa(0x1e8)]();}else{if(_0x3e5e89&&_0x57ee78[_0x3dcffa(0x139)]==_0x3e5e89){const _0x2ef5f1={'coin':_0x57ee78[_0x3dcffa(0x139)],'number':_0x516fe3,'breakeven':_0x50b572,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3dcffa(0x143)](_0x3dcffa(0xab))[_0x3dcffa(0xc1)]({'coin':_0x57ee78['coin']})[_0x3dcffa(0x1b1)](_0x2ef5f1)[_0x3dcffa(0x1e8)]();}}}});}async function updateCoinResults(_0x2a1435,_0x54504b=![]){const _0x1c0011=_0x38f10f;let _0x1fd2e8,_0x472ba9,_0x52627b,_0xd9275,_0x108a1f,_0x4920bb,_0xcf7a77=dbCoinResults[_0x1c0011(0x143)](_0x1c0011(0xab))[_0x1c0011(0xc1)]({'coin':_0x2a1435['coin']})[_0x1c0011(0x188)](),_0x29def0=![];Object['entries'](_0xcf7a77)[_0x1c0011(0x140)](([_0x39df49,_0x47562c])=>{if(_0x47562c==null)_0x29def0=!![];});(!_0xcf7a77||_0x29def0)&&(await initCoinResults(_0x2a1435[_0x1c0011(0x139)]),_0xcf7a77=dbCoinResults[_0x1c0011(0x143)](_0x1c0011(0xab))['find']({'coin':_0x2a1435[_0x1c0011(0x139)]})['value']());_0x2a1435['reverse']&&(_0x4920bb={'filled':_0x2a1435['filled']*_0x2a1435[_0x1c0011(0x189)],'amount':_0x2a1435[_0x1c0011(0x8c)]*_0x2a1435[_0x1c0011(0x189)],'side':_0x2a1435['side']==_0x1c0011(0x1f1)?_0x1c0011(0x163):_0x1c0011(0x1f1),'price':0x1/_0x2a1435[_0x1c0011(0x189)]},_0x2a1435={..._0x2a1435,..._0x4920bb});_0x54504b?_0x472ba9=_0x2a1435[_0x1c0011(0xc5)]=='buy'?_0xcf7a77[_0x1c0011(0x70)]+_0x2a1435[_0x1c0011(0x8c)]:_0xcf7a77[_0x1c0011(0x70)]-_0x2a1435['filled']:_0x472ba9=await getCoinNumber(_0x2a1435['coin']);if(_0x2a1435[_0x1c0011(0x198)]&&_0x2a1435['fee'][_0x1c0011(0x17a)]==config[_0x1c0011(0xbd)])_0x1fd2e8=_0x2a1435['fee'][_0x1c0011(0x1a2)];else{if(_0x2a1435['fee']&&_0x2a1435[_0x1c0011(0x198)][_0x1c0011(0x17a)]==_0x1c0011(0x181)&&!_0x54504b)_0x1fd2e8=_0x2a1435[_0x1c0011(0x198)][_0x1c0011(0x1a2)]*global[_0x1c0011(0x9f)][_0x1c0011(0x181)+config[_0x1c0011(0xbd)]];else _0x1fd2e8=defaultFee*_0x2a1435['filled']*_0x2a1435[_0x1c0011(0x189)];}_0x2a1435[_0x1c0011(0xc5)]=='buy'?(_0x52627b=_0x472ba9!=0x0?(_0xcf7a77[_0x1c0011(0x7c)]*_0xcf7a77[_0x1c0011(0x70)]+_0x2a1435['price']*(_0x472ba9-_0xcf7a77[_0x1c0011(0x70)])+_0x1fd2e8)/_0x472ba9:0x0,_0xd9275=_0xcf7a77[_0x1c0011(0x1a6)]):(_0x52627b=_0x472ba9!=0x0?(_0xcf7a77['breakeven']*_0xcf7a77[_0x1c0011(0x70)]-_0x2a1435['price']*(_0xcf7a77[_0x1c0011(0x70)]-_0x472ba9)+_0x1fd2e8)/_0x472ba9:0x0,_0xd9275=_0xcf7a77[_0x1c0011(0x1a6)]+(_0x2a1435['price']-_0xcf7a77[_0x1c0011(0x7c)])*_0x2a1435[_0x1c0011(0x8c)]);_0x108a1f=(_0x2a1435[_0x1c0011(0x189)]-_0x52627b-_0x1fd2e8/_0x2a1435['filled'])*_0x472ba9;let _0x15ec16={'coin':_0x2a1435[_0x1c0011(0x139)],'number':_0x472ba9,'breakeven':formatResult(_0x52627b,0x8),'realized':formatResult(_0xd9275,0x8),'unrealized':formatResult(_0x108a1f,0x8),'fees':formatResult(_0xcf7a77[_0x1c0011(0x1c5)]+_0x1fd2e8,0x8),'sells':_0x2a1435[_0x1c0011(0xc5)]==_0x1c0011(0x1f1)?_0xcf7a77[_0x1c0011(0xd0)]+0x1:_0xcf7a77[_0x1c0011(0xd0)],'buys':_0x2a1435['side']==_0x1c0011(0x163)?_0xcf7a77['buys']+0x1:_0xcf7a77['buys']};dbCoinResults[_0x1c0011(0x143)](_0x1c0011(0xab))[_0x1c0011(0xc1)]({'coin':_0x2a1435['coin']})[_0x1c0011(0x1b1)](_0x15ec16)['write']();if(!_0x54504b){if(_0x2a1435['fee']&&_0x2a1435[_0x1c0011(0x198)]['currency']==_0x1c0011(0x181)){const _0x571b36=currentCoins[_0x1c0011(0xc1)](_0x2e5127=>_0x2e5127[_0x1c0011(0x139)]==_0x1c0011(0x181));if(_0x571b36){let _0x512780=dbCoinResults['get'](_0x1c0011(0xab))[_0x1c0011(0xc1)]({'coin':_0x1c0011(0x181)})[_0x1c0011(0x188)]();_0x15ec16={..._0x512780,'number':_0x571b36[_0x1c0011(0x70)]},dbCoinResults[_0x1c0011(0x143)](_0x1c0011(0xab))[_0x1c0011(0xc1)]({'coin':'BNB'})['assign'](_0x15ec16)['write']();}}}}async function placeOrder(_0x1fee41){const _0x5f2185=_0x38f10f,_0x3edc41=config[_0x5f2185(0x86)]==_0x5f2185(0xf5)?_0x5f2185(0xf5):'limit';if(lockOrders==ORDERS[_0x5f2185(0x14d)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x5f2185(0x19b);let _0x35b4ab=![];lastOrders=[];for(const _0x214342 of _0x1fee41){let _0x2ab479,_0x1b9499,_0x569dcf,_0x558dd1,_0x1ef15c,_0x2d4aaa=_0x214342[_0x5f2185(0xcb)];try{const _0xd3b4a=await exchange[_0x5f2185(0x7b)](_0x2d4aaa);_0x2ab479=_0x214342[_0x5f2185(0x1e7)]?0x1/_0x214342[_0x5f2185(0x95)]:_0x214342[_0x5f2185(0x95)],_0x1b9499=_0xd3b4a['bid'],_0x569dcf=_0xd3b4a[_0x5f2185(0x125)];_0x214342[_0x5f2185(0x1e7)]?(_0x558dd1=_0x214342[_0x5f2185(0xc5)]==_0x5f2185(0x163)?'sell':'buy',_0x1ef15c=Math[_0x5f2185(0x154)](_0x214342[_0x5f2185(0x159)])/_0x2ab479):(_0x558dd1=_0x214342[_0x5f2185(0xc5)],_0x1ef15c=Math[_0x5f2185(0x154)](_0x214342[_0x5f2185(0x159)]));_0x3edc41==_0x5f2185(0x127)&&(config[_0x5f2185(0x86)]==_0x5f2185(0x1c3)&&(_0x2ab479=_0x558dd1=='buy'?_0x1b9499:_0x569dcf),config[_0x5f2185(0x86)]==_0x5f2185(0x138)&&(_0x2ab479=_0x558dd1==_0x5f2185(0x163)?_0x569dcf:_0x1b9499));_0x1ef15c=formatResult(_0x1ef15c,0x8),_0x2ab479=formatResult(_0x2ab479,0x8);const _0x3423bb=_0x558dd1==_0x5f2185(0x1f1)?config['emojisell']?String[_0x5f2185(0x1d0)]('0x'+config[_0x5f2185(0xa1)])+'\x20':'':config[_0x5f2185(0x1ab)]?String[_0x5f2185(0x1d0)]('0x'+config['emojibuy'])+'\x20':'',_0x158d1d=_0x3edc41==_0x5f2185(0xf5)?_0x5f2185(0x119):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x5f2185(0x1cb),_0x1db3fc=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x1db3fc,'symbol':_0x2d4aaa,'coin':_0x214342['coin'],'amount':_0x1ef15c,'price':_0x2ab479,'side':_0x558dd1,'reverse':_0x214342['reverse'],'filled':0x0});if(_0x3edc41==_0x5f2185(0xf5))logHistory(_0x5f2185(0xad),''+_0x3423bb+_0x158d1d+_0x5f2185(0xcc)+_0x2d4aaa+'\x20'+_0x558dd1+'\x20#'+formatResult(_0x1ef15c,0x8)+'\x20@'+formatResult(_0x2ab479,0x8));else logHistory('order',''+_0x3423bb+_0x158d1d+_0x5f2185(0xcc)+_0x2d4aaa+'\x20'+_0x558dd1+'\x20#'+formatResult(_0x1ef15c,0x8)+'\x20@'+formatResult(_0x2ab479,0x8));const _0x2f825c=await exchange[_0x5f2185(0xfb)](_0x2d4aaa,_0x3edc41,_0x558dd1,_0x1ef15c,_0x2ab479);logger[_0x5f2185(0x14b)](_0x5f2185(0x82)+_0x2f825c['id']+_0x5f2185(0x104)+_0x1db3fc);const _0x1afd28=lastOrders[_0x5f2185(0x137)]-0x1;if(_0x1afd28>=0x0&&lastOrders[_0x1afd28][_0x5f2185(0x1db)]==_0x1db3fc){lastOrders[_0x1afd28][_0x5f2185(0xa7)]=_0x2f825c['id'];if(_0x2f825c[_0x5f2185(0x145)])lastOrders[_0x1afd28]['amount']=_0x2f825c[_0x5f2185(0x145)];if(_0x2f825c[_0x5f2185(0x189)])lastOrders[_0x1afd28][_0x5f2185(0x189)]=_0x2f825c[_0x5f2185(0x189)];lastOrders[_0x1afd28][_0x5f2185(0x198)]=_0x2f825c[_0x5f2185(0x198)];}if(config[_0x5f2185(0x101)]!=0x0){let _0x4bd5e9=null;if(cooldownTracker['length']==config[_0x5f2185(0x101)]-0x1)_0x4bd5e9=cooldownTracker[_0x5f2185(0x80)]();const _0x2acb3a=getTimeStamp();cooldownTracker[_0x5f2185(0x9e)](_0x2acb3a);if(_0x4bd5e9){const _0x853ab7=fns['differenceInSeconds'](new Date(_0x2acb3a),new Date(_0x4bd5e9));if(_0x853ab7<cooldownInterval){logHistory('error','Executed\x20'+config[_0x5f2185(0x101)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x1f9ed4){if(_0x1f9ed4[_0x5f2185(0xf1)]()[_0x5f2185(0x172)](_0x5f2185(0x9c)))lastOrders=lastOrders[_0x5f2185(0x1ee)](_0x32a4dd=>_0x32a4dd['symbol']!=_0x2d4aaa),logHistory(_0x5f2185(0x1d7),_0x5f2185(0xa4)+_0x2d4aaa),_0x35b4ab=!![];else{if(_0x1f9ed4[_0x5f2185(0xf1)]()[_0x5f2185(0x172)](_0x5f2185(0xd5)))lastOrders=lastOrders[_0x5f2185(0x1ee)](_0x454ab5=>_0x454ab5[_0x5f2185(0xcb)]!=_0x2d4aaa),logHistory(_0x5f2185(0x1d7),_0x5f2185(0xc4)+_0x2d4aaa),_0x35b4ab=!![];else{if(_0x1f9ed4[_0x5f2185(0xf1)]()[_0x5f2185(0x172)](_0x5f2185(0x109)))lastOrders=lastOrders[_0x5f2185(0x1ee)](_0x2db5da=>_0x2db5da[_0x5f2185(0xcb)]!=_0x2d4aaa),logHistory(_0x5f2185(0x1d7),'Order\x20is\x20invalid:\x20'+_0x2d4aaa),_0x35b4ab=!![];else _0x1f9ed4[_0x5f2185(0xf1)]()[_0x5f2185(0x172)](_0x5f2185(0xb0))?(lastOrders=lastOrders[_0x5f2185(0x1ee)](_0x827d46=>_0x827d46[_0x5f2185(0xcb)]!=_0x2d4aaa),logHistory(_0x5f2185(0x1d7),_0x5f2185(0xa4)+_0x2d4aaa),_0x35b4ab=!![]):(lastOrders=lastOrders[_0x5f2185(0x1ee)](_0x2ee185=>_0x2ee185[_0x5f2185(0xcb)]!=_0x2d4aaa),await handleError(_0x1f9ed4,_0x5f2185(0xa3),_0x2d4aaa));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5f2185(0x137)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x11a9e7=config[_0x5f2185(0x86)]==_0x5f2185(0xf5)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x11a9e7);}else unlockOrders();_0x35b4ab&&config[_0x5f2185(0xce)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5f2185(0x156),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x5f2185(0xce)]&&logHistory(_0x5f2185(0x1d7),_0x5f2185(0x16f));else lockOrders!=ORDERS[_0x5f2185(0x14d)]&&(!config[_0x5f2185(0xce)]&&(config[_0x5f2185(0x86)]==_0x5f2185(0xf5)?logHistory('error',_0x5f2185(0xa0)):logHistory('error',_0x5f2185(0xe0))));}}function persistOpenOrders(_0x360ade){const _0x1ee20d=_0x38f10f,_0x37c15d={...config,'openOrders':_0x360ade};let _0x58010d=dbConfig[_0x1ee20d(0x143)](_0x1ee20d(0x9d))['find']({'botID':botID})[_0x1ee20d(0x188)]();_0x58010d&&dbConfig[_0x1ee20d(0x143)]('bot')[_0x1ee20d(0xc1)]({'botID':botID})[_0x1ee20d(0x1b1)](_0x37c15d)[_0x1ee20d(0x1e8)]();}function restoreOrders(){const _0x5101bf=_0x38f10f;let _0x32c3b4;config[_0x5101bf(0xdc)]&&allOpenOrders['forEach'](_0x4366ca=>{const _0x4950d7=_0x5101bf,_0x3b3924=config[_0x4950d7(0xdc)]['find'](_0x28b86a=>_0x28b86a[_0x4950d7(0xa7)]==_0x4366ca['id']);_0x3b3924&&(lastOrders[_0x4950d7(0x9e)](_0x3b3924),_0x32c3b4=_0x4366ca['timestamp']);});if(lastOrders[_0x5101bf(0x137)]>0x0){lockOrders=ORDERS[_0x5101bf(0xb7)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x46e008=new Date()[_0x5101bf(0x186)](),_0x434751=config['ordertype']==_0x5101bf(0xf5)?validateOrderTimeout*0x3c*0x3e8:config[_0x5101bf(0xf8)]*0x3c*0x3e8;if(_0x32c3b4+_0x434751>_0x46e008){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x32c3b4+_0x434751-_0x46e008);}else validateOrders(_0x5101bf(0x1ba));}}async function sendMetricsTelegram(){const _0xf28f59=_0x38f10f;if(!coinsLoaded){process[_0xf28f59(0xaf)]({'telegrammsg':_0xf28f59(0x184)},_0x451314=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x43be5f='';if(config['showname'])_0x43be5f=_0xf28f59(0x148)+config[_0xf28f59(0xbe)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x43be5f=_0xf28f59(0x72)+botID+_0xf28f59(0xd8);const _0x3f55ac=getKPIs(_0xf28f59(0xbd)),_0x1ba8a3=getKPIs(_0xf28f59(0x10b),config[_0xf28f59(0x10b)]),_0x318a24=getKPIs(_0xf28f59(0x199)),_0x585c72=getKPIs('net-fiat',config[_0xf28f59(0x10b)]);_0x43be5f+=_0xf28f59(0x14c),_0x43be5f+=_0x3f55ac[_0xf28f59(0x18a)]+'\x20:\x20'+_0x3f55ac[_0xf28f59(0x188)]+'\x0a',_0x43be5f+=_0x3f55ac['rightTxt']+':\x20'+_0x3f55ac['change']+'%\x0a',_0x43be5f+=_0x1ba8a3[_0xf28f59(0x18a)]+_0xf28f59(0x11a)+_0x1ba8a3[_0xf28f59(0x188)]+'\x0a',_0x43be5f+=_0x1ba8a3[_0xf28f59(0x1ed)]+':\x20'+_0x1ba8a3[_0xf28f59(0x194)]+'%\x0a',_0x43be5f+=_0x318a24['leftTxt']+':\x20'+_0x318a24[_0xf28f59(0x188)]+'\x20('+config[_0xf28f59(0xbd)]+')\x0a',_0x43be5f+=_0x318a24['rightTxt']+':\x20'+_0x318a24[_0xf28f59(0x194)]+_0xf28f59(0x83)+config[_0xf28f59(0xbd)]+')\x0a',_0x43be5f+=_0x585c72[_0xf28f59(0x18a)]+':\x20'+_0x585c72[_0xf28f59(0x188)]+'\x20('+config['fiat']+')\x0a',_0x43be5f+=_0x585c72[_0xf28f59(0x1ed)]+':\x20'+_0x585c72[_0xf28f59(0x194)]+_0xf28f59(0x83)+config[_0xf28f59(0x10b)]+')\x0a',_0x43be5f+=_0xf28f59(0xed),process['send']({'telegrammsg':_0x43be5f},_0x1c9cff=>{});}async function sendPortfolioTelegram(){const _0x24cf02=_0x38f10f;if(!coinsLoaded){process['send']({'telegrammsg':_0x24cf02(0x184)},_0x1d79d8=>{});return;}let _0x321559='';if(config['showname'])_0x321559=_0x24cf02(0x148)+config[_0x24cf02(0xbe)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x321559='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x321559+=_0x24cf02(0x14c),_0x321559+=_0x24cf02(0x1c0),_0x321559+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x321559+=_0x24cf02(0x1c0),currentCoins[_0x24cf02(0x140)](_0x22d702=>{const _0x4aa632=_0x24cf02;_0x321559+=_0x22d702[_0x4aa632(0x139)]['padEnd'](0x7)+'|\x20'+formatPad(_0x22d702[_0x4aa632(0x1b2)],0x2,0x6)+'|\x20'+formatPad(_0x22d702['target'],0x2,0x6)+'|\x20'+formatPad(_0x22d702[_0x4aa632(0x1e4)]*0x64,0x2,0x6)+'\x0a';}),_0x321559+=_0x24cf02(0xed),process[_0x24cf02(0xaf)]({'telegrammsg':_0x321559},_0x3588b2=>{});}function formatPad(_0x33e4b0,_0x353cf0,_0x16d7c9){const _0x2017ec=_0x38f10f,_0x2280e0=formatResultString(_0x33e4b0,_0x353cf0);return _0x2280e0?_0x2280e0[_0x2017ec(0x166)](_0x16d7c9):''['padStart'](_0x16d7c9);}function logHistory(_0x4941dd,_0x382f39,_0x4f1234=''){const _0x9713b7=_0x38f10f;let _0x25f237={'time':getTimeStamp(),'type':_0x4941dd,'event':_0x382f39};dbLogs[_0x9713b7(0x143)](_0x9713b7(0xc6))[_0x9713b7(0x9e)](_0x25f237)[_0x9713b7(0x1e8)]();if(_0x4f1234=='')_0x4f1234=_0x382f39;proxyEmit(_0x9713b7(0x8f),{'log':_0x25f237,'summary':_0x4f1234}),process[_0x9713b7(0xaf)]({'telegram':{..._0x25f237,'botname':config['botname'],'showname':config[_0x9713b7(0x1a4)]}},_0x6a2826=>{}),logger['full'](''+_0x25f237[_0x9713b7(0x8f)]);}function emitHistory(_0x2fe244={}){const _0x5e4df7=_0x38f10f;Object['keys'](_0x2fe244)[_0x5e4df7(0x137)]==0x0&&(_0x2fe244={'type':[_0x5e4df7(0xad),_0x5e4df7(0x8f)],'event':'','page':0x1});if(_0x2fe244[_0x5e4df7(0x1bd)][_0x5e4df7(0x172)](_0x5e4df7(0x8f)))_0x2fe244['type'][_0x5e4df7(0x116)](_0x2fe244[_0x5e4df7(0x1bd)][_0x5e4df7(0x195)](_0x5e4df7(0x8f)),0x1,'error',_0x5e4df7(0x102),_0x5e4df7(0x156));if(dbLogs[_0x5e4df7(0x73)](_0x5e4df7(0xc6))['value']()){let _0x3bafbc=dbLogs[_0x5e4df7(0x143)](_0x5e4df7(0xc6))[_0x5e4df7(0x1ee)](_0x5aa589=>{const _0x2756e1=_0x5e4df7;if(_0x2fe244[_0x2756e1(0x1bd)][_0x2756e1(0x137)]==0x0)return![];else return _0x2fe244[_0x2756e1(0x1bd)][_0x2756e1(0x172)](_0x5aa589['type']);})[_0x5e4df7(0x1ee)](_0x5e86cb=>{const _0x36e5d6=_0x5e4df7;if(_0x2fe244[_0x36e5d6(0x8f)]=='')return!![];else return _0x5e86cb[_0x36e5d6(0x8f)][_0x36e5d6(0x7f)]()[_0x36e5d6(0x172)](_0x2fe244[_0x36e5d6(0x8f)][_0x36e5d6(0x7f)]());})['sortBy'](_0x5e4df7(0xd3)),_0x4335b1=_0x3bafbc[_0x5e4df7(0x188)]()[_0x5e4df7(0x137)];_0x3bafbc=_0x3bafbc[_0x5e4df7(0x1e7)]()[_0x5e4df7(0x16e)]((_0x2fe244[_0x5e4df7(0xfc)]-0x1)*logPageSize,_0x2fe244[_0x5e4df7(0xfc)]*logPageSize-0x1)[_0x5e4df7(0x1e7)]()[_0x5e4df7(0x188)](),proxyEmit(_0x5e4df7(0x97),{'logs':_0x3bafbc,'total':_0x4335b1});}else proxyEmit(_0x5e4df7(0x97),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1c1a21){const _0x4a6f4d=_0x38f10f;if(dbLogs['has'](_0x4a6f4d(0xc6))[_0x4a6f4d(0x188)]()){const _0x35bb93=dbLogs['get'](_0x4a6f4d(0xc6))[_0x4a6f4d(0x115)](_0x4a6f4d(0xd3))[_0x4a6f4d(0x1ee)](_0x5374fd=>{const _0x52a31d=_0x4a6f4d;return _0x5374fd[_0x52a31d(0x1bd)]=='order';})[_0x4a6f4d(0x188)]();dbLogs['get'](_0x4a6f4d(0xc6))[_0x4a6f4d(0x90)]()[_0x4a6f4d(0x1e8)](),dbLogs[_0x4a6f4d(0x143)](_0x4a6f4d(0xc6))[_0x4a6f4d(0x1b1)](_0x35bb93)[_0x4a6f4d(0x1e8)](),emitHistory(_0x1c1a21);}}async function pauseBot(_0x3ed0e6=''){const _0x562c3f=_0x38f10f,_0x1ac3a6=new Date()[_0x562c3f(0x186)]();if(!lastErrorShown||_0x1ac3a6-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1ac3a6;!lastBotPause?(lastBotPause=_0x1ac3a6,consecutivePauses=0x1):(_0x1ac3a6-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x562c3f(0xaf)]({'stop':'restart'},_0x544505=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x562c3f(0x186)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3ed0e6)_0x3ed0e6+=_0x562c3f(0x157);logHistory(_0x562c3f(0x1d7),_0x3ed0e6+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x562c3f(0x19f)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4dab65=_0x38f10f;process[_0x4dab65(0xaf)]({'stop':_0x4dab65(0x176)},_0x3d1f54=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x70fa1f,_0x1e82ec){const _0x56ed58=_0x38f10f;if(_0x70fa1f[_0x56ed58(0xf1)]()[_0x56ed58(0x172)]('API-key\x20format\x20invalid'))return logHistory('error',config[_0x56ed58(0xd7)]+_0x56ed58(0x13f)),![];else{if(_0x70fa1f['toString']()[_0x56ed58(0x172)](_0x56ed58(0x161)))return logHistory(_0x56ed58(0x1d7),config['exchange']+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x70fa1f[_0x56ed58(0xf1)]()[_0x56ed58(0x172)](_0x56ed58(0x136)))return logHistory(_0x56ed58(0x1d7),config[_0x56ed58(0xd7)]+_0x56ed58(0xcf)),logHistory(_0x56ed58(0x1d7),_0x56ed58(0x155)),![];else await handleError(_0x70fa1f,_0x1e82ec);}}}async function handleError(_0x4a9033,_0x40dc11,_0x3afc06=''){const _0x403f1e=_0x38f10f,_0x36e82b=config[_0x403f1e(0xd7)]||_0x403f1e(0x1d4);if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)]('DDoSProtection')||_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0xde)))await pauseBot(config['exchange']+_0x403f1e(0xb4));else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x9b))||_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x120)))await pauseBot(config[_0x403f1e(0xd7)]+_0x403f1e(0x1a8));else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x7d)))await pauseBot(config[_0x403f1e(0xd7)]+'\x20not\x20responding');else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x403f1e(0xd7)]+'\x20closed\x20the\x20connection');else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x171)))logger[_0x403f1e(0x14b)](_0x403f1e(0x190),_0x4a9033),await pauseBot(config['exchange']+_0x403f1e(0x1e6));else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x1c6)))logHistory(_0x403f1e(0x1d7),_0x40dc11+_0x403f1e(0x13d)),logHistory(_0x403f1e(0x1d7),_0x403f1e(0x178)),await killBot();else{if(_0x4a9033['toString']()[_0x403f1e(0x172)]('InvalidNonce'))logHistory(_0x403f1e(0x1d7),_0x40dc11+_0x403f1e(0x1f2)),logHistory('error',_0x403f1e(0x178)),await killBot();else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x1c8)))logHistory(_0x403f1e(0x1d7),_0x40dc11+'\x20|\x20'+config['exchange']+_0x403f1e(0xdb)),logHistory('error',_0x403f1e(0x178)),await killBot();else{if(_0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x161)))logHistory(_0x403f1e(0x1d7),_0x40dc11+'\x20|\x20'+config[_0x403f1e(0xd7)]+_0x403f1e(0x18e)),logHistory(_0x403f1e(0x1d7),_0x403f1e(0x178)),await killBot();else{if(_0x4a9033['toString']()[_0x403f1e(0x172)](_0x403f1e(0x136)))logHistory('error',_0x40dc11+'\x20|\x20'+config[_0x403f1e(0xd7)]+_0x403f1e(0x18c)),logHistory('error',_0x403f1e(0x178)),await killBot();else{if(_0x4a9033['toString']()[_0x403f1e(0x172)](_0x403f1e(0xfd)))logHistory(_0x403f1e(0x1d7),_0x40dc11+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x3afc06);else _0x4a9033[_0x403f1e(0xf1)]()[_0x403f1e(0x172)](_0x403f1e(0x196))?(logger[_0x403f1e(0x14b)](_0x403f1e(0x15a),_0x4a9033),logHistory(_0x403f1e(0x1d7),_0x40dc11+_0x403f1e(0x157)+config[_0x403f1e(0xd7)]+_0x403f1e(0x105))):(logger[_0x403f1e(0xe9)](_0x40dc11+_0x403f1e(0x1d8),_0x4a9033),await pauseBot(_0x403f1e(0x1e3)));}}}}}}}}}}}function formatResult(_0x161ad3,_0xbb7660){const _0x69aec8=_0x38f10f;return parseFloat(_0x161ad3[_0x69aec8(0x158)](_0xbb7660));}function formatResultTruncate(_0x11b19c,_0x1ffe12){const _0x59a7e8=_0x38f10f;let _0x45f20c=formatResultString(_0x11b19c,0xa),_0x8db741=_0x45f20c[_0x59a7e8(0x195)]('.');return _0x8db741!=-0x1&&(_0x45f20c=_0x45f20c[_0x59a7e8(0x16e)](0x0,_0x8db741+_0x1ffe12+0x1)),Number(_0x45f20c);}function formatResultString(_0x4d0b45,_0x1816f6){const _0x1c0b4d=_0x38f10f;let _0x2ee544;if(!(''+_0x4d0b45)['includes']('e'))_0x2ee544=+(Math['round'](_0x4d0b45+'e+'+_0x1816f6)+'e-'+_0x1816f6);else{let _0x1ef171=(''+_0x4d0b45)[_0x1c0b4d(0x132)]('e'),_0x7777eb='';+_0x1ef171[0x1]+_0x1816f6>0x0&&(_0x7777eb='+'),_0x2ee544=+(Math[_0x1c0b4d(0x1b6)](+_0x1ef171[0x0]+'e'+_0x7777eb+(+_0x1ef171[0x1]+_0x1816f6))+'e-'+_0x1816f6);}return Number(_0x2ee544)[_0x1c0b4d(0x158)](_0x1816f6);}function getServerTime(){const _0xd8ad51=_0x38f10f,_0x2787c4=new Date();return _0x2787c4[_0xd8ad51(0x1bf)]()+'/'+(_0x2787c4[_0xd8ad51(0x1c9)]()+0x1)[_0xd8ad51(0xf1)]()[_0xd8ad51(0x166)](0x2,'0')+'/'+_0x2787c4[_0xd8ad51(0xa9)]()[_0xd8ad51(0xf1)]()['padStart'](0x2,'0')+'\x20'+_0x2787c4[_0xd8ad51(0x1a5)]()['toString']()[_0xd8ad51(0x166)](0x2,'0')+':'+_0x2787c4[_0xd8ad51(0x100)]()[_0xd8ad51(0xf1)]()[_0xd8ad51(0x166)](0x2,'0')+':'+_0x2787c4[_0xd8ad51(0x16a)]()[_0xd8ad51(0xf1)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x139740=_0x38f10f,_0x681f72=shiftedTime();return _0x681f72[_0x139740(0x1bf)]()+'/'+(_0x681f72[_0x139740(0x1c9)]()+0x1)[_0x139740(0xf1)]()[_0x139740(0x166)](0x2,'0')+'/'+_0x681f72[_0x139740(0xa9)]()[_0x139740(0xf1)]()[_0x139740(0x166)](0x2,'0')+'\x20'+_0x681f72[_0x139740(0x1a5)]()[_0x139740(0xf1)]()[_0x139740(0x166)](0x2,'0')+':'+_0x681f72[_0x139740(0x100)]()['toString']()[_0x139740(0x166)](0x2,'0')+':'+_0x681f72[_0x139740(0x16a)]()[_0x139740(0xf1)]()[_0x139740(0x166)](0x2,'0');}function getDate(){const _0x3d323e=_0x38f10f,_0x442fbb=shiftedTime();return _0x442fbb[_0x3d323e(0x1bf)]()+'/'+(_0x442fbb[_0x3d323e(0x1c9)]()+0x1)[_0x3d323e(0xf1)]()[_0x3d323e(0x166)](0x2,'0')+'/'+_0x442fbb['getDate']()[_0x3d323e(0xf1)]()['padStart'](0x2,'0');}function getHour(){const _0x16efbf=_0x38f10f,_0x150415=shiftedTime();return _0x150415['getHours']()[_0x16efbf(0xf1)]()[_0x16efbf(0x166)](0x2,'0');}function _0x36da(){const _0x4ddf60=['\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','4868418nWkTBK','1\x20-\x20Validate\x20orders:\x20','balancing\x20resumed','number','isEqual','<b>Bot\x20','has','initclient','exchange\x20reloaded','0\x20-\x20EXECUTION:\x20','fetchClosedOrders','exchange\x20not\x20reloaded','UNLOCKING','log','fetchTicker','breakeven','RequestTimeout','parseISO','toLowerCase','shift','no\x20additional\x20symbols','ID:\x20','%\x20(','watchOrders','status','ordertype','ETH','argv','liquidity',':\x20Bot\x20','milliseconds','filled','eur','onepagemode','event','remove','-config.json','341705ZCuHRp','none','yargs/yargs','last','(((.+)+)+)+$','event-history','2.3.5','lowdb','map','ExchangeNotAvailable','MIN_NOTIONAL','bot','push','ticker','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','emojisell','version','placeOrder()','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','autoliquidity','USDP','orderId','Uncaught\x20Exception:','getDate','-results.json','coins','spot','order','portfolio','send','must\x20be\x20greater\x20than\x20minimum\x20amount','Net\x20effect','bot-','cancelOrder','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','/EUR','ccxt','LOCKED',':\x20timer\x20>','canceled','yyyy/MM/dd','\x20change','balancing\x20resumes\x20when\x20cooldown\x20ends','basecoin','botname','parse','ORDERS.UNLOCKING','find','changes','progress','Order\x20amount\x20is\x20invalid:\x20','side','logs','2\x20-\x20FILLED\x20known\x20order:\x20','offset','search','function','symbol','\x20order:\x20','stringify','headless','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','sells','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','decrypt','time','/USD','Invalid\x20quantity','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','exchange','\x20metrics:</b>\x20\x0a\x0a','cancelLoading','Net\x20','\x20API\x20key\x20is\x20invalid','openOrders','\x20has\x20a\x2024h\x20drop\x20of\x20','RateLimitExceeded','test','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','min','2\x20-\x20Handled\x20open\x20orders','startdate','10eNqiIt','cancelOrders()','botID','watchTrades','configuration-stored','full','lowdb/adapters/FileSync','datetime','toUpperCase','</pre>','toggleBotMode','message','red_yellow_blue','toString','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','add','BTC','market','getCoins()','2\x20-\x20Validate\x20orders:\x20','timeout','average','2\x20-\x20FILLED\x20unknown\x20order:\x20','createOrder','page','InsufficientFunds','Transaction\x20detection\x20unblocked','recreate','getMinutes','cooldown','warning','amountToPrecision','\x20|\x20Custom\x20ID:\x20','\x20exchange\x20error','cancel','unlinkSync','change24h','InvalidOrder','3\x20-\x20handling\x20FILLED\x20order:\x20','fiat','ongoing','564jchkVZ','Initializing\x20coin\x20results','timeshift','valid','format','starting-balance-','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Resetting\x20coin\x20results:\x20','sortBy','splice','1\x20-\x20Unlock\x20orders','storeFiat','Market','\x20:\x20','TUSD','privateKey','\x20minutes\x20-\x20','\x20|\x20highest\x20fee:\x20','args','OnMaintenance','enabled','/backup/','getStartingBalances','apiKey','ask','./logs/','limit','threshold','19155213OblrFQ','\x20|\x20lock\x20orders:\x20','date-fns','pro','closed','Error:\x20Invalid\x20argument\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Fee\x20discount\x20refund\x20detected:\x20','************','split','Error\x20while\x20deleting\x20files:\x20','date','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','AuthenticationError','length','limit-low','coin','Executing\x20exchange\x20reload','EUR','./version.json','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','4AOGEsv','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','forEach','string','replace','get','basecoinvalue','amount','\x20>\x20','password','<b>','configuration','Initiating\x20exchange\x20reload','debug','<pre>','UNLOCKED','coin-loading-progress','Order(s)\x20not\x20validated\x20after\x20','added','279304uAIAKU','join','sendMetricsTelegram','abs','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','success','\x20|\x20','toFixed','trade','Uncaught\x20ExchangeError:','usd','2.6.0','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','target','set',',\x20must\x20be\x20a\x203\x20digit\x20number','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','-events.json','buy','Invalid\x20API\x20key\x20or\x20secret\x20entered','remainingSymbols','padStart','\x20>\x20[DEBUG]\x20','\x20exchange','secure','getSeconds','sort','2.5.0','resetHistory','slice','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','substring','NetworkError','includes','colorscheme','showConfig','USDT','kill','Binance','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','currency','excluded','keys','exchanges','fetchTickers','startprice','findIndex','BNB','open','highest','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','defaults','getTime','net-fiat','value','price','leftTxt','apiSecret','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20exchange:\x20','\x20API\x20secret\x20is\x20invalid','Resetting\x20bot\x20history','Uncaught\x20NetworkError:','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','active','removed','change','indexOf','ExchangeError','fetchOpenOrders','fee','net-basecoin','close','initial','bots','ORDERS.LOCKED','RSA-OAEP','\x20minutes','orderstatus','netoffset','cost','\x20value','showname','getHours','realized','max','\x20not\x20available','createWriteStream','total','emojibuy','limits','startsWith','placeOrder','writeFile','recent20','assign','distribution','BUSD','deleteHistoryAlerts','6730512otZOmh','round','113743XsPWAX','/output-000.log','exec','final','Order\x20filled:\x20','entries','type','sendPortfolioTelegram','getFullYear','-------------------------------\x0a','No\x20more\x20open\x20orders\x20-\x20','running','limit-high','apiPassword','fees','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Unfilled\x20order(s)\x20canceled\x20after\x20','API-key\x20format\x20invalid','getMonth','Waited\x20','Limit\x20(low-margin)','getOpenOrders()','recreateCoinResults()','starting-balances','timestamp','fromCodePoint','USD','fetchBalance','BNB/','Exchange','path','apply','error','\x20|\x20Error\x20details:\x20','cloneDeep','mkdirSync','customId','2\x20-\x20Orders\x20unlocked','performance','loadMarkets','no\x20open\x20orders','Portfolio\x20change\x20detected:\x20','getPortfolio(1)','additional\x20symbols\x20','Unknown\x20error\x20occured','delta','47773ASexDe','\x20network\x20error','reverse','write','existsSync','bb-settings.json','./config/','balances','rightTxt','filter','001','data','sell'];_0x36da=function(){return _0x4ddf60;};return _0x36da();}function sleep(_0x341b73){return new Promise(_0x3b9cb7=>setTimeout(_0x3b9cb7,_0x341b73));}function shiftedTime(){const _0x54c9ec=_0x38f10f,_0x3997a3=new Date();let _0x5397ff=_0x3997a3;if(config&&config[_0x54c9ec(0x10f)]!==0x0)_0x5397ff=fns[_0x54c9ec(0xf3)](_0x3997a3,{'hours':config[_0x54c9ec(0x10f)]});return _0x5397ff;}function timer(_0x2ddd8d){const _0x4b2fe0=_0x38f10f,_0x25ae4f=new Date();!lasttime?console[_0x4b2fe0(0x7a)](getTimeStamp()+_0x4b2fe0(0xb8),_0x2ddd8d,_0x25ae4f):console['log'](getTimeStamp()+':\x20timer\x20>',_0x2ddd8d,(_0x25ae4f-lasttime)/0x3e8),lasttime=_0x25ae4f;}