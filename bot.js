const _0x521a92=_0x1fd5;(function(_0x32fe94,_0x10ec4f){const _0x30bb3f=_0x1fd5,_0x5ecd4f=_0x32fe94();while(!![]){try{const _0x5f30b6=-parseInt(_0x30bb3f(0x2c3))/0x1+-parseInt(_0x30bb3f(0x2d4))/0x2*(parseInt(_0x30bb3f(0x326))/0x3)+-parseInt(_0x30bb3f(0x217))/0x4+parseInt(_0x30bb3f(0x274))/0x5*(parseInt(_0x30bb3f(0x2bb))/0x6)+-parseInt(_0x30bb3f(0x212))/0x7*(parseInt(_0x30bb3f(0x2f3))/0x8)+-parseInt(_0x30bb3f(0x278))/0x9*(parseInt(_0x30bb3f(0x24b))/0xa)+parseInt(_0x30bb3f(0x1ec))/0xb;if(_0x5f30b6===_0x10ec4f)break;else _0x5ecd4f['push'](_0x5ecd4f['shift']());}catch(_0x197a59){_0x5ecd4f['push'](_0x5ecd4f['shift']());}}}(_0x3a90,0x9c9f3));const _0x58f701=function(){let _0x1f3cb0=!![];return function(_0x38ef72,_0x3e3d3c){const _0x1d4a1c=_0x1f3cb0?function(){const _0x3766d9=_0x1fd5;if(_0x3e3d3c){const _0x4ef636=_0x3e3d3c[_0x3766d9(0x2db)](_0x38ef72,arguments);return _0x3e3d3c=null,_0x4ef636;}}:function(){};return _0x1f3cb0=![],_0x1d4a1c;};}(),_0x590f8a=_0x58f701(this,function(){const _0x1bd6da=_0x1fd5;return _0x590f8a[_0x1bd6da(0x205)]()[_0x1bd6da(0x2af)]('(((.+)+)+)+$')[_0x1bd6da(0x205)]()[_0x1bd6da(0x1f1)](_0x590f8a)['search']('(((.+)+)+)+$');});_0x590f8a();'use strict';const ccxt=require(_0x521a92(0x2e2)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x521a92(0x29c)),Crypt=require(_0x521a92(0x2a8))[_0x521a92(0x339)],util=require(_0x521a92(0x2f0)),argv=require(_0x521a92(0x1b8))(process[_0x521a92(0x2c4)]['slice'](0x2))['argv'],path=require(_0x521a92(0x27f)),axios=require(_0x521a92(0x251));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x521a92(0x202),'BUSD',_0x521a92(0x219),_0x521a92(0x168),_0x521a92(0x2b6),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x521a92(0x1ab)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x521a92(0x24d)+pauseBotInterval/0xea60+_0x521a92(0x240),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x521a92(0x2d1))['version'],environment=require('./version.json')[_0x521a92(0x252)]||_0x521a92(0x25a),botID=process['argv'][0x2]||_0x521a92(0x293),pattern=/^[0-9]{3}$/;!pattern[_0x521a92(0x2f8)](botID)&&(console[_0x521a92(0x31e)](_0x521a92(0x239)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x521a92(0x2c4)][0x3]||'',configpath=userID?_0x521a92(0x319)+userID+'/':'./config/',logspath=userID?_0x521a92(0x328)+userID+'/':_0x521a92(0x328),loggerfile=fs[_0x521a92(0x1c5)](logspath+_0x521a92(0x316),{'flags':'a'});!fs[_0x521a92(0x2d6)](configpath)&&fs[_0x521a92(0x2fe)](configpath);!fs[_0x521a92(0x2d6)](logspath)&&fs[_0x521a92(0x2fe)](logspath);const configfile=configpath+_0x521a92(0x1e1)+botID+_0x521a92(0x1a4),logfile=configpath+'bot-'+botID+_0x521a92(0x1f5),performancefile=configpath+_0x521a92(0x1e1)+botID+_0x521a92(0x1b5),coinresultsfile=configpath+_0x521a92(0x1e1)+botID+_0x521a92(0x2d0),settingsfile=configpath+_0x521a92(0x286),securefile=configpath+_0x521a92(0x2ed),configbackuppath=configpath+_0x521a92(0x215),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x521a92(0x255)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x521a92(0x19d)]({'data':[],'version':serverversion})[_0x521a92(0x255)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x521a92(0x19d)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x521a92(0x24e)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x27960e=>{const _0x4bf74b=_0x521a92;console[_0x4bf74b(0x31e)](_0x27960e);},'simple':_0x5717f8=>{const _0x1cbda9=_0x521a92;console[_0x1cbda9(0x31e)](_0x5717f8),loggerfile[_0x1cbda9(0x255)](util[_0x1cbda9(0x266)](_0x5717f8)+'\x0a');},'full':async(_0x9eced6,_0x488471='')=>{const _0x3d24a8=_0x521a92;let _0x2e3770;if(config['showname'])_0x2e3770=getTimeStamp()+':\x20'+config[_0x3d24a8(0x321)]+_0x3d24a8(0x310)+_0x9eced6;else _0x2e3770=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x9eced6;console[_0x3d24a8(0x31e)](_0x2e3770),loggerfile[_0x3d24a8(0x255)](util[_0x3d24a8(0x266)](_0x2e3770)+'\x0a'),_0x488471&&(console[_0x3d24a8(0x31e)](_0x488471),loggerfile[_0x3d24a8(0x255)](util['format'](_0x488471)+'\x0a'));},'debug':async(_0x37da8f,_0x51ffb0='')=>{const _0x3cb786=_0x521a92;let _0x21245c;if(config[_0x3cb786(0x2fb)])_0x21245c=getTimeStamp()+':\x20'+config[_0x3cb786(0x321)]+_0x3cb786(0x236)+_0x37da8f;else _0x21245c=getTimeStamp()+_0x3cb786(0x2a7)+botID+_0x3cb786(0x236)+_0x37da8f;if(debugging)console[_0x3cb786(0x31e)](_0x21245c);loggerfile['write'](util['format'](_0x21245c)+'\x0a');if(_0x51ffb0){if(debugging)console[_0x3cb786(0x31e)](_0x51ffb0);loggerfile[_0x3cb786(0x255)](util[_0x3cb786(0x266)](_0x51ffb0)+'\x0a');}}};process['on'](_0x521a92(0x1ca),function(_0x4a2202){const _0x54005e=_0x521a92;handleError(_0x4a2202,_0x54005e(0x1ca));});settings[_0x521a92(0x226)]!=config[_0x521a92(0x226)]&&updateTimeshift(settings[_0x521a92(0x226)]);settings[_0x521a92(0x201)]!=config[_0x521a92(0x201)]&&updateOnepagemode(settings[_0x521a92(0x201)]);(settings[_0x521a92(0x169)]&&!config['marketcapApi']||!settings[_0x521a92(0x169)]&&config[_0x521a92(0x169)])&&updateMarketcapApi(settings[_0x521a92(0x169)]);process[_0x521a92(0x233)]({'started':_0x521a92(0x221)},_0x28c10e=>{}),initializeProcessListeners();function proxyEmit(_0x2a2fa5,_0x4c4887=null){const _0x321719=_0x521a92;process[_0x321719(0x233)]({'function':_0x2a2fa5,'args':_0x4c4887},_0x55fb98=>{});}function initializeProcessListeners(){process['on']('message',_0xfc5289=>{const _0x272d62=_0x1fd5;switch(Object[_0x272d62(0x1fd)](_0xfc5289)[0x0]){case _0x272d62(0x226):_0xfc5289[_0x272d62(0x226)]!=undefined&&(settings[_0x272d62(0x226)]=_0xfc5289[_0x272d62(0x226)],updateTimeshift(settings['timeshift']));break;case _0x272d62(0x201):_0xfc5289[_0x272d62(0x201)]!=undefined&&(settings['onepagemode']=_0xfc5289[_0x272d62(0x201)],updateOnepagemode(settings[_0x272d62(0x201)]));break;case _0x272d62(0x169):_0xfc5289['marketcapApi']!=undefined&&(settings['marketcapApi']=_0xfc5289[_0x272d62(0x169)],updateMarketcapApi(settings['marketcapApi']));break;case _0x272d62(0x269):_0xfc5289[_0x272d62(0x269)]!=undefined&&(bots=JSON[_0x272d62(0x22a)](_0xfc5289[_0x272d62(0x269)]),proxyEmit('bots',bots));break;case _0x272d62(0x1d7):switch(_0xfc5289['function']){case _0x272d62(0x20a):initclient();break;case _0x272d62(0x16d):toggleBotMode();break;case'emitHistory':emitHistory(_0xfc5289[_0x272d62(0x2e1)]);break;case _0x272d62(0x27e):deleteHistoryAlerts(_0xfc5289[_0x272d62(0x2e1)]);break;case _0x272d62(0x223):getPortfolio(_0xfc5289['args']);break;case _0x272d62(0x17d):storeConfiguration(_0xfc5289[_0x272d62(0x2e1)]);break;case'storeHeadless':storeHeadless(_0xfc5289[_0x272d62(0x2e1)]);break;case _0x272d62(0x268):storeFiat(_0xfc5289['args']);break;case _0x272d62(0x188):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x272d62(0x213):placeOrder(_0xfc5289['args']);break;case _0x272d62(0x21b):cancelLoading();break;case _0x272d62(0x30e):showConfig();break;case _0x272d62(0x1f7):sendMetricsTelegram();break;case _0x272d62(0x279):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x341ab2=![]){const _0x13e34d=_0x521a92;logger['debug'](_0x13e34d(0x172)+(_0x341ab2?_0x13e34d(0x1c4):_0x13e34d(0x30a))+_0x13e34d(0x2e4)+config[_0x13e34d(0x1b1)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x341ab2)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x13e34d(0x1ba)]!=''&&config[_0x13e34d(0x1ba)]!='***'){loadingProgress=0x0;_0x341ab2&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![]);const _0x4086cc=await getCoins();[currentCoins,currentCoinsAll]=_0x4086cc,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x13e34d(0x1d0)](_0x13e34d(0x20b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x13e34d(0x20f)]==0x0&&allOpenOrders[_0x13e34d(0x20f)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x294e20=![]){const _0x4c8c8d=_0x521a92;logger[_0x4c8c8d(0x1d0)](_0x4c8c8d(0x267)+(_0x294e20?_0x4c8c8d(0x2fc):'complete')+_0x4c8c8d(0x19e)+config[_0x4c8c8d(0x1b1)]);if(pidBalances)clearTimeout(pidBalances);if(_0x294e20){getBalances();return;}coinsLoaded=![];if(config[_0x4c8c8d(0x1ba)]!=''&&config[_0x4c8c8d(0x1ba)]!=_0x4c8c8d(0x23e)){loadingProgress=0x1;const _0x177eb4=await getCoins();[currentCoins,currentCoinsAll]=_0x177eb4,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4c8c8d(0x1d0)](_0x4c8c8d(0x20b)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c8c8d(0x20f)]==0x0&&allOpenOrders[_0x4c8c8d(0x20f)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x1bee7a){const _0x3864c6=_0x521a92;let _0x2ca61c=![];if(_0x1bee7a)_0x2ca61c=!![];let _0x4220a0;_0x2ca61c?_0x4220a0=_0x1bee7a['map'](_0x4ce1b9=>_0x4ce1b9[_0x3864c6(0x242)]):_0x4220a0=currentCoinsAll[_0x3864c6(0x19c)](_0x573994=>_0x573994[_0x3864c6(0x242)]);if(!config[_0x3864c6(0x169)]||!_0x2ca61c&&!config[_0x3864c6(0x1fe)]||_0x4220a0[_0x3864c6(0x20f)]==0x0)return;let _0x15cc8e=null;try{_0x15cc8e=await axios['get'](_0x3864c6(0x308),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x3864c6(0x169)]},'params':{'symbol':_0x4220a0[_0x3864c6(0x205)]()}});}catch(_0x188df5){_0x15cc8e=null,_0x188df5[_0x3864c6(0x205)]()[_0x3864c6(0x243)](_0x3864c6(0x296))?(config[_0x3864c6(0x169)]=![],updateConfig(),proxyEmit(_0x3864c6(0x2e9),emittedConfiguration()),logHistory('error',_0x3864c6(0x1c6))):(logHistory('error',_0x3864c6(0x2b4)+schedulerInterval/(0x3c*0x3e8)+_0x3864c6(0x240)),logger[_0x3864c6(0x1d0)](_0x3864c6(0x2ba),_0x188df5[_0x3864c6(0x205)]()+_0x3864c6(0x28c)+_0x188df5[_0x3864c6(0x1a0)]));}if(_0x15cc8e){let _0x54d1fb=0x0;const _0x573afe=_0x15cc8e['data'];_0x4220a0[_0x3864c6(0x30d)](_0xcf9297=>{const _0x58e5ed=_0x3864c6;if(_0x573afe[_0x58e5ed(0x2b0)][_0xcf9297][0x0])_0x54d1fb+=_0x573afe['data'][_0xcf9297][0x0][_0x58e5ed(0x1be)]['USD']['market_cap'];}),_0x4220a0[_0x3864c6(0x30d)](_0x5e9a92=>{const _0x1a611c=_0x3864c6,_0xdfc69d=_0x573afe[_0x1a611c(0x2b0)][_0x5e9a92][0x0]?_0x573afe[_0x1a611c(0x2b0)][_0x5e9a92][0x0]['quote'][_0x1a611c(0x202)][_0x1a611c(0x2cc)]:0x0;if(_0x2ca61c){const _0x1575e8=_0x1bee7a[_0x1a611c(0x198)](_0x549a72=>_0x549a72[_0x1a611c(0x242)]==_0x5e9a92);_0x1575e8&&(_0x1575e8['marketcap']=_0xdfc69d);}else{const _0x229172=currentCoins['find'](_0x4df437=>_0x4df437[_0x1a611c(0x242)]==_0x5e9a92);_0x229172&&(_0x229172[_0x1a611c(0x248)]=_0xdfc69d);const _0x4c2715=currentCoinsAll[_0x1a611c(0x198)](_0x8ff4d=>_0x8ff4d[_0x1a611c(0x242)]==_0x5e9a92);_0x4c2715&&(_0x4c2715[_0x1a611c(0x248)]=_0xdfc69d);}}),!_0x2ca61c&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x56f2f4=_0x521a92,_0x3cce91=0x2;let _0x59865b=0x0,_0x259157=0x0,_0x4d3e02=0x0,_0x5d0d51=0x0,_0x58fa18=0x0;config[_0x56f2f4(0x2c6)][_0x56f2f4(0x30d)](_0x4779e4=>{const _0x4d5a52=_0x56f2f4;if(!_0x4779e4[_0x4d5a52(0x2cb)]){_0x4d3e02++,_0x59865b+=_0x4779e4[_0x4d5a52(0x200)];if(_0x4779e4[_0x4d5a52(0x200)]===-0x1){_0x59865b++;const _0x4b9afb=currentCoinsAll['find'](_0xda7d83=>_0xda7d83[_0x4d5a52(0x242)]==_0x4779e4['coin']);_0x4b9afb&&(_0x5d0d51+=_0x4b9afb[_0x4d5a52(0x248)],_0x58fa18+=Math[_0x4d5a52(0x1a1)](_0x4b9afb[_0x4d5a52(0x248)]));}if(_0x4779e4[_0x4d5a52(0x200)]!==-0x1)_0x259157++;}});let _0x128ea8;const _0x59b0a8=0x64-_0x59865b,_0x443b4c=_0x4d3e02-_0x259157;_0x128ea8=_0x443b4c===0x0?_0x59865b:Math[_0x56f2f4(0x2e7)](0x64,_0x59865b),config[_0x56f2f4(0x2c6)][_0x56f2f4(0x30d)](_0x1a0a2c=>{const _0x297b04=_0x56f2f4,_0x2ca2dd=currentCoinsAll[_0x297b04(0x198)](_0x2e9070=>_0x2e9070['coin']==_0x1a0a2c['coin']);_0x2ca2dd&&(_0x1a0a2c[_0x297b04(0x248)]=_0x2ca2dd['marketcap']);if(!_0x1a0a2c[_0x297b04(0x2cb)]){if(_0x128ea8<=0x64){if(_0x1a0a2c[_0x297b04(0x200)]===-0x1){if(_0x5d0d51!==0x0&&config[_0x297b04(0x1fe)]){if(_0x2ca2dd){if(config[_0x297b04(0x1fe)]==_0x297b04(0x248))_0x1a0a2c[_0x297b04(0x32a)]=(_0x59b0a8/(_0x5d0d51/_0x2ca2dd[_0x297b04(0x248)]))[_0x297b04(0x2cd)](_0x3cce91);else config[_0x297b04(0x1fe)]=='marketcapsqrt'&&(_0x1a0a2c[_0x297b04(0x32a)]=(_0x59b0a8/(_0x58fa18/Math[_0x297b04(0x1a1)](_0x2ca2dd[_0x297b04(0x248)])))[_0x297b04(0x2cd)](_0x3cce91));}}}}}}),updateConfig();}function updateConfig(){const _0x41047f=_0x521a92;let _0x21fca9=dbConfig[_0x41047f(0x29b)]('bot')['find']({'botID':botID})[_0x41047f(0x218)]();_0x21fca9&&dbConfig['get'](_0x41047f(0x2d8))[_0x41047f(0x198)]({'botID':botID})[_0x41047f(0x2c5)](config)[_0x41047f(0x255)]();}function logMemory(){const _0x19b045=_0x521a92;if(environment!=_0x19b045(0x1ee))return;const _0x22bba1=process[_0x19b045(0x261)]()[_0x19b045(0x207)]/0x400/0x400;logger[_0x19b045(0x1d0)](_0x19b045(0x25d)+process[_0x19b045(0x24f)]+_0x19b045(0x1aa)+formatResult(_0x22bba1,0x1)+_0x19b045(0x2da));}async function startScheduler(){const _0x5b4d70=_0x521a92,_0x26220d=shiftedTime()[_0x5b4d70(0x260)]();getMarketCap(),_0x26220d==0x1&&logMemory(),(_0x26220d==0x2||_0x26220d==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x37f1aa=![]){const _0x1fa039=_0x521a92;logger[_0x1fa039(0x1d0)]('Initiating\x20bot\x20restart');if(!_0x37f1aa)while(lockOrders!=ORDERS[_0x1fa039(0x2b1)]||coolingDown){await sleep(0x3e8);}process[_0x1fa039(0x233)]({'stop':_0x1fa039(0x2dc)},_0x306d90=>{});}async function initExchange(_0x5cf81b=config[_0x521a92(0x1b1)],_0x416c4a=config[_0x521a92(0x1ba)],_0x18a3f8=config[_0x521a92(0x238)],_0x5d100a=config['apiPassword']){const _0x555487=_0x521a92;if(exchange){logger['debug']('Initializing\x20exchange:\x20already\x20done');return;}logger[_0x555487(0x1d0)](_0x555487(0x1fa));!supportedExchanges()[_0x555487(0x243)](_0x5cf81b)&&(logHistory('error',_0x555487(0x323)+_0x5cf81b+_0x555487(0x2e3)),killBot());const _0x4b8157=ccxt[_0x555487(0x2a0)][_0x5cf81b['toLowerCase']()];exchange=new _0x4b8157({'apiKey':_0x416c4a,'secret':_0x18a3f8,'options':{'defaultType':_0x555487(0x21e)}});if(_0x5d100a)exchange[_0x555487(0x294)]=_0x5d100a;}function updateExchange(_0x52be99,_0xb0d4c1,_0x4e8f2f=null){const _0x926976=_0x521a92;exchange[_0x926976(0x1ba)]=_0x52be99,exchange[_0x926976(0x238)]=_0xb0d4c1,exchange[_0x926976(0x1fb)]=_0x4e8f2f,logger[_0x926976(0x1d0)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x511279=_0x521a92;let _0x8d2557=config[_0x511279(0x249)]==_0x511279(0x27b)?_0x511279(0x27b):config[_0x511279(0x249)]==_0x511279(0x178)?_0x511279(0x178):_0x511279(0x253),_0x491c42=!allSymbols[_0x511279(0x243)](_0x8d2557+'/USD')?'USDT':_0x511279(0x202),_0x104e80=!allSymbols[_0x511279(0x243)](_0x8d2557+_0x511279(0x2c1))?_0x491c42:_0x511279(0x26b);stablecoins={'eur':{'coin':''+_0x8d2557+_0x104e80,'symbol':_0x8d2557+'/'+_0x104e80},'usd':{'coin':''+_0x8d2557+_0x491c42,'symbol':_0x8d2557+'/'+_0x491c42}};}async function initwsCcxt(){const _0x27c30b=_0x521a92;initCycle++;const _0x31682c=initCycle;let _0x5d1405=[];config['portfolio'][_0x27c30b(0x30d)](_0x4fb144=>{const _0xa82a09=_0x27c30b;if(!_0x4fb144[_0xa82a09(0x2cb)]&&_0x4fb144[_0xa82a09(0x242)]!=config[_0xa82a09(0x249)])_0x5d1405['push'](_0x4fb144[_0xa82a09(0x314)]);});if(!_0x5d1405[_0x27c30b(0x243)](stablecoins[_0x27c30b(0x1af)][_0x27c30b(0x314)]))_0x5d1405[_0x27c30b(0x2b5)](stablecoins['eur'][_0x27c30b(0x314)]);if(!_0x5d1405[_0x27c30b(0x243)](stablecoins[_0x27c30b(0x1e8)][_0x27c30b(0x314)]))_0x5d1405[_0x27c30b(0x2b5)](stablecoins[_0x27c30b(0x1e8)]['symbol']);if(config[_0x27c30b(0x1b1)][_0x27c30b(0x272)]('Binance')&&config[_0x27c30b(0x249)]!=_0x27c30b(0x178)){if(!_0x5d1405[_0x27c30b(0x243)](_0x27c30b(0x290)+config[_0x27c30b(0x249)]))_0x5d1405[_0x27c30b(0x2b5)](_0x27c30b(0x290)+config[_0x27c30b(0x249)]);}loadCoins(_0x5d1405),_0x5d1405=validateSymbols(_0x5d1405);const _0x41187a=async _0x57b12e=>{const _0x103a1d=_0x27c30b;let _0x55b571;try{const _0x20c7c6=await getTickers(_0x57b12e);Object[_0x103a1d(0x2ce)](_0x20c7c6)[_0x103a1d(0x30d)](_0x5c2960=>{const _0x3adbfe=_0x103a1d;_0x55b571=_0x5c2960[0x1]['symbol'],gTicker[noslash(_0x55b571)]=_0x5c2960[0x1][_0x3adbfe(0x196)],gChange[_0x55b571]=_0x5c2960[0x1][_0x3adbfe(0x1c1)];});}catch(_0x37b2fb){await handleError(_0x37b2fb,_0x103a1d(0x2cf),_0x55b571);}},_0x4a6acc=async _0x2ff0db=>{const _0x16077f=_0x27c30b;while(initCycle==_0x31682c){if(!botPaused)try{const _0x1f401c=await exchange[_0x16077f(0x203)](_0x2ff0db);gTicker[noslash(_0x1f401c[0x0][_0x16077f(0x314)])]=_0x1f401c[0x0][_0x16077f(0x1ed)];}catch(_0xb1b26b){if(!exchangeStopped)await handleError(_0xb1b26b,_0x16077f(0x1f6),_0x2ff0db);}else await sleep(0x64);}},_0x417424=async _0x2df8c2=>{const _0x1dce35=_0x27c30b;while(initCycle==_0x31682c){if(!botPaused)try{const _0x4727bd=await exchange[_0x1dce35(0x2f6)](_0x2df8c2),_0x3494aa=_0x4727bd['pop']();gTicker[noslash(_0x3494aa[_0x1dce35(0x314)])]=_0x3494aa[_0x1dce35(0x1ed)];}catch(_0x4f5802){if(!exchangeStopped)await handleError(_0x4f5802,_0x1dce35(0x30c),_0x2df8c2['toString']());}else await sleep(0x64);}},_0x28c5fb=async _0x4b2bdd=>{const _0x403c57=_0x27c30b;while(initCycle==_0x31682c){if(!botPaused){let _0x5c053c;try{await sleep(0x3c*0x3e8);const _0x306b6e=await getTickers(_0x4b2bdd);Object[_0x403c57(0x2ce)](_0x306b6e)[_0x403c57(0x30d)](_0x22b93d=>{const _0x434857=_0x403c57;_0x5c053c=_0x22b93d[0x1]['symbol'],gChange[_0x5c053c]=_0x22b93d[0x1][_0x434857(0x1c1)];});}catch(_0x3e9045){if(!exchangeStopped)await handleError(_0x3e9045,_0x403c57(0x2a9),_0x5c053c);}}else await sleep(0x64);}},_0x27942b=async _0x5b97c6=>{const _0x299fd5=_0x27c30b;while(initCycle==_0x31682c){if(!botPaused)try{const _0xb07e4d=await exchange[_0x299fd5(0x184)](_0x5b97c6);initCycle==_0x31682c&&_0xb07e4d[_0x299fd5(0x30d)](_0xab1efd=>{updateNumberCoinsCcxt(_0xab1efd);});}catch(_0xa3fcbb){if(!exchangeStopped)await handleError(_0xa3fcbb,_0x299fd5(0x33a));}else await sleep(0x64);}};_0x41187a(_0x5d1405),_0x28c5fb(_0x5d1405),exchange[_0x27c30b(0x17b)]['watchTradesForSymbols']&&!(config[_0x27c30b(0x1b1)]==_0x27c30b(0x25c)&&_0x5d1405['length']>0xa)?_0x417424(_0x5d1405):_0x5d1405[_0x27c30b(0x30d)](_0x2cdcf4=>{_0x4a6acc(_0x2cdcf4);}),_0x5d1405[_0x27c30b(0x30d)](_0x8384f0=>{_0x27942b(_0x8384f0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x54afc6){const _0x45cf0a=_0x521a92;let _0x3900e8={};try{if(config[_0x45cf0a(0x1b1)]!=_0x45cf0a(0x1cb))_0x3900e8=await exchange[_0x45cf0a(0x1e2)](_0x54afc6);else for(const _0xc93633 of _0x54afc6){const _0xf45afc=await exchange[_0x45cf0a(0x2fd)](_0xc93633);_0x3900e8[_0xc93633]=_0xf45afc;}return _0x3900e8;}catch(_0x4e5177){throw _0x4e5177;}}function setBlockTransactionDetection(_0x309565){const _0x266e1b=_0x521a92;blockTransactionDetection=_0x309565,logger[_0x266e1b(0x1d0)](_0x266e1b(0x174)+blockTransactionDetection);}async function detectLiquidityChange(_0xad8f11=0x0){const _0x4c5f09=_0x521a92;transactionDetectionOngoing=!![];try{const _0x19d1e3=await getCoins(_0xad8f11),[_0x3a9979,_0x37ab05]=_0x19d1e3;let _0x3571ac=[];currentCoins[_0x4c5f09(0x30d)](_0x18e772=>{const _0x4816f4=_0x4c5f09,_0xd4142c=_0x3a9979['find'](_0x8b0071=>_0x8b0071[_0x4816f4(0x242)]==_0x18e772[_0x4816f4(0x242)]);if(_0xd4142c){if(_0x18e772['number']!=_0xd4142c[_0x4816f4(0x16c)]){let _0x3320c;if(_0x18e772[_0x4816f4(0x242)]!=config['basecoin']){const _0x238369=gTicker[noslash(_0x18e772[_0x4816f4(0x314)])];_0x3320c=_0x18e772[_0x4816f4(0x208)]?0x1/_0x238369:_0x238369;}else _0x3320c=0x1;_0x3571ac[_0x4816f4(0x2b5)]({'coin':_0x18e772['coin'],'symbol':_0x18e772[_0x4816f4(0x314)],'price':_0x3320c,'number':Number(formatResult(_0xd4142c[_0x4816f4(0x16c)]-_0x18e772[_0x4816f4(0x16c)],0x8)),'basecoinvalue':_0x3320c*(_0xd4142c[_0x4816f4(0x16c)]-_0x18e772['number'])});}}});if(_0x3571ac[_0x4c5f09(0x20f)]>0x0&&!blockTransactionDetection)for(const _0x15ab9c of _0x3571ac){if(config['autoliquidity']){logger[_0x4c5f09(0x1d0)](_0x4c5f09(0x2e8)+_0x15ab9c[_0x4c5f09(0x1e6)]+_0x4c5f09(0x2f2)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x4c5f09(0x32d)](_0x15ab9c[_0x4c5f09(0x1e6)])>lastFees[_0x4c5f09(0x275)]*1.2){if(config['autoliquidity']==_0x4c5f09(0x284)){delete _0x15ab9c[_0x4c5f09(0x314)],delete _0x15ab9c[_0x4c5f09(0x1e6)];let _0x5b37b4=[],_0x531d63=[...config[_0x4c5f09(0x259)]]||[],_0x42b290=config[_0x4c5f09(0x259)];_0x531d63[_0x4c5f09(0x2d3)]((_0x10df28,_0x134735)=>_0x10df28[_0x4c5f09(0x2d2)]>_0x134735['date']?-0x1:_0x134735['date']>_0x10df28['date']?0x1:0x0);const _0x3cb160=getDate();if(_0x531d63[0x0]){const _0x5887da=fns[_0x4c5f09(0x22a)](_0x531d63[0x0][_0x4c5f09(0x2d2)],'yyyy/MM/dd',new Date()),_0x529bc6=fns[_0x4c5f09(0x22a)](_0x3cb160,_0x4c5f09(0x258),new Date());if(fns[_0x4c5f09(0x333)](_0x5887da,_0x529bc6)){_0x5b37b4=_0x531d63[0x0]['changes'];const _0x29cf5d=_0x5b37b4[_0x4c5f09(0x198)](_0x50f21d=>_0x50f21d['coin']==_0x15ab9c[_0x4c5f09(0x242)]);_0x29cf5d?(_0x29cf5d[_0x4c5f09(0x16c)]+=_0x15ab9c[_0x4c5f09(0x16c)],_0x29cf5d[_0x4c5f09(0x16c)]==0x0&&(_0x5b37b4=_0x5b37b4['filter'](_0x5778e5=>{const _0x49e810=_0x4c5f09;return _0x5778e5['coin']!=_0x15ab9c[_0x49e810(0x242)];}))):_0x5b37b4[_0x4c5f09(0x2b5)](_0x15ab9c);const _0x2518a6=_0x42b290[_0x4c5f09(0x198)](_0x1734a5=>_0x1734a5[_0x4c5f09(0x2d2)]==_0x3cb160);_0x2518a6[_0x4c5f09(0x1dc)]=_0x5b37b4;}else _0x42b290[_0x4c5f09(0x2b5)]({'date':_0x3cb160,'changes':[_0x15ab9c]});}const _0x2d5de6=_0x42b290['find'](_0x5ae24c=>_0x5ae24c[_0x4c5f09(0x2d2)]==_0x3cb160);if(_0x2d5de6){let _0x322f7e=!![];_0x2d5de6[_0x4c5f09(0x1dc)][_0x4c5f09(0x30d)](_0x1610a3=>{const _0x250cda=_0x4c5f09;if(_0x1610a3[_0x250cda(0x16c)]!=0x0)_0x322f7e=![];}),_0x322f7e&&(_0x42b290=_0x42b290[_0x4c5f09(0x265)](_0x5a5d8e=>{const _0xb4b9cb=_0x4c5f09;return _0x5a5d8e[_0xb4b9cb(0x2d2)]!=_0x3cb160;}));}let _0x25c870=dbConfig['get'](_0x4c5f09(0x2d8))['find']({'botID':botID})['value']();_0x25c870&&(dbConfig[_0x4c5f09(0x29b)](_0x4c5f09(0x2d8))[_0x4c5f09(0x198)]({'botID':botID})[_0x4c5f09(0x2c5)]({'liquidity':_0x42b290})['write'](),config['liquidity']=_0x42b290);logHistory(_0x4c5f09(0x257),_0x4c5f09(0x2ca)+Math[_0x4c5f09(0x32d)](_0x15ab9c[_0x4c5f09(0x16c)])+'\x20'+_0x15ab9c['coin']+'\x20'+(_0x15ab9c[_0x4c5f09(0x16c)]>0x0?'added':_0x4c5f09(0x16f))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x4c5f09(0x2e9),emittedConfiguration());const _0x5f1954=getNormalizedPerformance();emitPerformance(_0x5f1954),getStartingBalances(_0x5f1954),logger[_0x4c5f09(0x1d0)](_0x4c5f09(0x1ce));}else config[_0x4c5f09(0x299)]=='switch-manual'&&(config[_0x4c5f09(0x262)]?(await storeHeadless({'headless':![]}),logHistory(_0x4c5f09(0x257),_0x4c5f09(0x2ca)+Math['abs'](_0x15ab9c[_0x4c5f09(0x16c)])+'\x20'+_0x15ab9c[_0x4c5f09(0x242)]+'\x20'+(_0x15ab9c[_0x4c5f09(0x16c)]>0x0?'added':'removed')+_0x4c5f09(0x1d9))):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x4c5f09(0x32d)](_0x15ab9c['number'])+'\x20'+_0x15ab9c[_0x4c5f09(0x242)]+'\x20'+(_0x15ab9c['number']>0x0?_0x4c5f09(0x1d5):'removed')+_0x4c5f09(0x16e)));}else logger[_0x4c5f09(0x1d0)](_0x4c5f09(0x32b)+Math[_0x4c5f09(0x32d)](_0x15ab9c[_0x4c5f09(0x16c)])+'\x20'+_0x15ab9c['coin']+'\x20'+(_0x15ab9c[_0x4c5f09(0x16c)]>0x0?'added':_0x4c5f09(0x16f)));}else logger[_0x4c5f09(0x1d0)](_0x4c5f09(0x2ca)+Math[_0x4c5f09(0x32d)](_0x15ab9c['number'])+'\x20'+_0x15ab9c[_0x4c5f09(0x242)]+'\x20'+(_0x15ab9c[_0x4c5f09(0x16c)]>0x0?'added':'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x3a9979,currentCoinsAll=_0x37ab05;}catch(_0x193de6){if(!exchangeStopped)await handleError(_0x193de6,_0x4c5f09(0x2d7));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0xcee7cf=_0x521a92;logger[_0xcee7cf(0x1d0)](_0xcee7cf(0x307));try{markets=await exchange[_0xcee7cf(0x1b2)]();}catch(_0x19480){logger[_0xcee7cf(0x1d0)](_0xcee7cf(0x2c8)+_0x19480[_0xcee7cf(0x205)]());if(markets){}else logHistory(_0xcee7cf(0x2fa),_0xcee7cf(0x1a3)),logHistory(_0xcee7cf(0x2fa),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0xcee7cf(0x21f)),logger['debug']('Error\x20details:',_0x19480),loading[_0xcee7cf(0x30f)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0xcee7cf(0x2ce)](markets)[_0xcee7cf(0x30d)](_0x2a0d6f=>{const _0x52baef=_0xcee7cf;_0x2a0d6f[0x1]['active']&&_0x2a0d6f[0x1][_0x52baef(0x21e)]&&allSymbols[_0x52baef(0x2b5)](_0x2a0d6f[0x0]);});}function validateSymbols(_0x3e0674){const _0x2069ac=_0x521a92;let _0x5db161=[];return _0x3e0674[_0x2069ac(0x30d)](_0x5cd0cc=>{const _0x13e9ef=_0x2069ac;!allSymbols[_0x13e9ef(0x243)](_0x5cd0cc)?logHistory(_0x13e9ef(0x2fa),'Invalid\x20symbol:\x20'+_0x5cd0cc+_0x13e9ef(0x298)):_0x5db161[_0x13e9ef(0x2b5)](_0x5cd0cc);}),_0x5db161;}async function initclient(){const _0x3b5dbf=_0x521a92;proxyEmit(_0x3b5dbf(0x2e9),emittedConfiguration()),proxyEmit(_0x3b5dbf(0x338),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3b5dbf(0x288),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x501ef3=getNormalizedPerformance();emitPerformance(_0x501ef3),getStartingBalances(_0x501ef3);}async function toggleBotMode(){const _0x598ef8=_0x521a92;let _0x22703f=dbConfig[_0x598ef8(0x29b)](_0x598ef8(0x2d8))[_0x598ef8(0x198)]({'botID':botID})[_0x598ef8(0x218)]();if(_0x22703f){const _0x4377f4=!_0x22703f[_0x598ef8(0x262)];dbConfig[_0x598ef8(0x29b)](_0x598ef8(0x2d8))[_0x598ef8(0x198)]({'botID':botID})[_0x598ef8(0x2c5)]({'headless':_0x4377f4})[_0x598ef8(0x255)](),config['headless']=_0x4377f4,proxyEmit(_0x598ef8(0x2e9),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2714d6=_0x521a92;process[_0x2714d6(0x233)]({'updatebotmanager':!![]},_0x238136=>{}),logger[_0x2714d6(0x1d0)](_0x2714d6(0x2ec)+config[_0x2714d6(0x262)]);}async function loadCoins(_0x3ae8a0){const _0xdb0344=_0x521a92;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x211bf0,_0x483abe=0x0,_0x310747=0x0;_0x3ae8a0[_0xdb0344(0x30d)](_0x110c19=>{const _0x3b5fa9=_0xdb0344;loading[_0x3b5fa9(0x1b7)][_0x3b5fa9(0x2b5)](_0x110c19);}),loadingCanceled=![];let _0x1a8ef6=![];while(_0x211bf0!=_0x3ae8a0[_0xdb0344(0x20f)]+maxLoadingProgress){_0x211bf0=loadingProgress,_0x3ae8a0[_0xdb0344(0x30d)](_0x40b0b4=>{const _0x2679b7=_0xdb0344;if(gTicker[noslash(_0x40b0b4)]){loading[_0x2679b7(0x1b7)]=loading[_0x2679b7(0x1b7)][_0x2679b7(0x265)](_0x5f0e46=>_0x5f0e46!=_0x40b0b4);if(!watchedSymbols[_0x2679b7(0x243)](_0x40b0b4))watchedSymbols[_0x2679b7(0x2b5)](_0x40b0b4);_0x211bf0++;}}),loading[_0xdb0344(0x1d1)]=Math[_0xdb0344(0x2a4)](_0x211bf0/(_0x3ae8a0[_0xdb0344(0x20f)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x310747>0x1e*0x5&&(loading[_0xdb0344(0x1e7)]=!![],emitLoadingProgress()),_0x310747>0x78*0x5&&!_0x1a8ef6&&(_0x1a8ef6=!![],logHistory(_0xdb0344(0x2fa),_0xdb0344(0x20e)+loading['remainingSymbols'][_0xdb0344(0x1de)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0xdb0344(0x2fa),_0xdb0344(0x1bd)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0xdb0344(0x30f)]=!![],emitLoadingProgress();break;}else _0x483abe!=loading[_0xdb0344(0x1d1)]&&(_0x483abe=loading[_0xdb0344(0x1d1)],emitLoadingProgress()),_0x310747++,await sleep(0xc8);}_0x211bf0==_0x3ae8a0[_0xdb0344(0x20f)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xdb0344(0x233)]({'status':'enabled','live':'running'},_0x8e4945=>{}),_0x1a8ef6&&logHistory(_0xdb0344(0x257),_0xdb0344(0x2b8)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x89ee51=_0x521a92;proxyEmit(_0x89ee51(0x2e9),{...emittedConfiguration(),'configstate':_0x89ee51(0x193)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x3e264d=_0x521a92;let _0xf1fe6b=gTicker[stablecoins[_0x3e264d(0x1af)]['coin']],_0x3f912b=gTicker[stablecoins[_0x3e264d(0x1e8)][_0x3e264d(0x242)]];return{'eur':Number(_0xf1fe6b),'usd':Number(_0x3f912b)};}function capitalize(_0x16b2f4){const _0x235e56=_0x521a92;return _0x16b2f4['substring'](0x0,0x1)[_0x235e56(0x280)]()+_0x16b2f4['substring'](0x1);}function supportedExchanges(){const _0x451ffb=_0x521a92,_0xc4d48d=['ws',_0x451ffb(0x1e2),_0x451ffb(0x2fd),'watchTrades',_0x451ffb(0x184),'cancelOrder',_0x451ffb(0x16b),'fetchOpenOrders','fetchClosedOrders',_0x451ffb(0x25f)];let _0x32b8ee=[],_0x3bd358=[],_0x2dcdbd=ccxt[_0x451ffb(0x2a0)]['exchanges'];_0x2dcdbd[_0x451ffb(0x30d)](_0x268aa8=>{const _0x3cbce0=_0x451ffb;try{const _0x2f6908=new ccxt[(_0x3cbce0(0x2a0))][_0x268aa8]();_0x3bd358[_0x3cbce0(0x2b5)](_0x2f6908);}catch(_0x462e91){}}),_0x3bd358['forEach'](_0x159af5=>{const _0x17df22=_0x451ffb;let _0x27e75d=0x0;_0xc4d48d[_0x17df22(0x30d)](_0x5ecbcf=>{const _0x2b606f=_0x17df22;_0x5ecbcf in _0x159af5[_0x2b606f(0x17b)]&&_0x159af5[_0x2b606f(0x17b)][_0x5ecbcf]&&_0x27e75d++;}),_0x27e75d==_0xc4d48d['length']&&_0x32b8ee[_0x17df22(0x2b5)](capitalize(_0x159af5['id']));});let _0x1b3a84=[];return _0x2dcdbd[_0x451ffb(0x30d)](_0x1ceb88=>{const _0x142e09=_0x451ffb;_0x1ceb88=capitalize(_0x1ceb88);if(!_0x32b8ee['includes'](_0x1ceb88))_0x1b3a84[_0x142e09(0x2b5)](_0x1ceb88);}),_0x32b8ee;}function setStartDatePerformance(){const _0x23d934=_0x521a92;if(config&&config[_0x23d934(0x259)][0x0][_0x23d934(0x1dc)][_0x23d934(0x20f)]!=0x0){const _0x18a168=config[_0x23d934(0x259)][0x0][_0x23d934(0x1dc)];dbPerformance[_0x23d934(0x29b)](_0x23d934(0x2b0))[_0x23d934(0x198)]({'date':config[_0x23d934(0x297)]})[_0x23d934(0x2c5)]({'coins':_0x18a168})[_0x23d934(0x255)]();}}async function recreateCoinResults(){const _0x19b36a=_0x521a92;recreationNeeded=![];let _0x5f3e77,_0x5422fc=[];try{for(const _0x3305f5 of currentCoins){if(_0x3305f5[_0x19b36a(0x242)]!=config[_0x19b36a(0x249)]){let _0x13ef67=0x0,_0x110b37,_0xfeb846;_0x5f3e77=await getAllEventOrders(_0x3305f5[_0x19b36a(0x314)]);if(_0x5f3e77[_0x19b36a(0x20f)]>0x0)_0x5f3e77[_0x19b36a(0x30d)](_0xdb57fa=>{const _0x48c79e=_0x19b36a,_0x22acc0=_0x3305f5[_0x48c79e(0x314)][_0x48c79e(0x243)](config[_0x48c79e(0x249)]+'/');_0x5422fc[_0x48c79e(0x2b5)]({'datetime':_0xdb57fa[_0x48c79e(0x327)],'coin':_0x3305f5[_0x48c79e(0x242)],'symbol':_0x3305f5[_0x48c79e(0x314)],'side':_0xdb57fa['side'],'reverse':_0x22acc0,'amount':formatResult(_0xdb57fa['filled'],0x8),'filled':formatResult(_0xdb57fa['filled'],0x8),'price':formatResult(_0xdb57fa[_0x48c79e(0x1ed)],0x8)}),_0x13ef67=_0xdb57fa['side']==_0x48c79e(0x2de)?_0x13ef67+_0xdb57fa[_0x48c79e(0x173)]:_0x13ef67-_0xdb57fa[_0x48c79e(0x173)];if(!_0xfeb846)_0xfeb846=_0xdb57fa[_0x48c79e(0x1ed)];});_0x110b37=_0x3305f5[_0x19b36a(0x16c)]-_0x13ef67;let _0xaf16e9;config['liquidity'][_0x19b36a(0x30d)](_0x40605b=>{const _0x4ced42=_0x19b36a;!_0xaf16e9&&(_0xaf16e9=_0x40605b[_0x4ced42(0x1dc)][_0x4ced42(0x198)](_0x183dea=>_0x183dea[_0x4ced42(0x242)]==_0x3305f5[_0x4ced42(0x242)]),_0xaf16e9&&(_0x110b37=_0xaf16e9[_0x4ced42(0x16c)],_0xfeb846=_0xaf16e9[_0x4ced42(0x1ed)]));});let _0x5dac8b=dbCoinResults['get'](_0x19b36a(0x194))[_0x19b36a(0x198)]({'coin':_0x3305f5[_0x19b36a(0x242)]})[_0x19b36a(0x218)]();_0x5dac8b={'coin':_0x3305f5[_0x19b36a(0x242)],'number':_0x110b37,'breakeven':_0xfeb846,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x19b36a(0x29b)](_0x19b36a(0x194))[_0x19b36a(0x198)]({'coin':_0x3305f5[_0x19b36a(0x242)]})[_0x19b36a(0x2c5)](_0x5dac8b)[_0x19b36a(0x255)]();}}_0x5422fc[_0x19b36a(0x2d3)]((_0x2bb98c,_0x555b64)=>_0x2bb98c['datetime']>_0x555b64[_0x19b36a(0x327)]?0x1:_0x555b64[_0x19b36a(0x327)]>_0x2bb98c[_0x19b36a(0x327)]?-0x1:0x0);let _0xefd24e=0x0;for(let _0x625417 of _0x5422fc){await updateCoinResults(_0x625417,!![]);}}catch(_0x17104c){await handleError(_0x17104c,_0x19b36a(0x2b3));}}async function getAllEventOrders(_0x3df8ee){const _0x17fb5a=_0x521a92;let _0x56f054=[],_0x132a05=dbLogs[_0x17fb5a(0x29b)](_0x17fb5a(0x1eb))[_0x17fb5a(0x265)](_0x19e342=>{const _0x4d567c=_0x17fb5a,_0x3dbf4c=_0x19e342[_0x4d567c(0x231)]['toLowerCase']();return _0x3dbf4c[_0x4d567c(0x243)](_0x3df8ee[_0x4d567c(0x285)]())&&(_0x3dbf4c[_0x4d567c(0x243)]('market')&&_0x3dbf4c[_0x4d567c(0x243)]('order')||_0x3dbf4c[_0x4d567c(0x243)](_0x4d567c(0x173))&&_0x3dbf4c['includes']('order'));})[_0x17fb5a(0x28b)](_0x17fb5a(0x235))[_0x17fb5a(0x218)]();return _0x132a05[_0x17fb5a(0x30d)](_0x52fae3=>{const _0x2e52c4=_0x17fb5a,_0x21b026=_0x52fae3[_0x2e52c4(0x231)]['includes'](_0x2e52c4(0x2a6))?_0x2e52c4(0x2a6):_0x2e52c4(0x2de),_0xadb226=/#([0-9]|\.)+\s/i,_0x3d1e2d=Number(_0xadb226[_0x2e52c4(0x1db)](_0x52fae3[_0x2e52c4(0x231)])[0x0][_0x2e52c4(0x1c0)](0x1)),_0x216651=/@([0-9]|\.)+$/i,_0x47204b=Number(_0x216651[_0x2e52c4(0x1db)](_0x52fae3[_0x2e52c4(0x231)])[0x0]['slice'](0x1));_0x56f054[_0x2e52c4(0x2b5)]({'datetime':_0x52fae3[_0x2e52c4(0x235)],'coin':symbolToCoin(_0x3df8ee),'symbol':_0x3df8ee,'side':_0x21b026,'amount':_0x3d1e2d,'filled':_0x3d1e2d,'price':_0x47204b});}),_0x56f054;}async function getAllOrders(_0x387d54,_0x272c96){const _0x594864=_0x521a92;let _0x56d69f=[];while(_0x272c96<exchange[_0x594864(0x1d6)]()){const _0x679f82=0x1f4;try{const _0x1772b7=await exchange[_0x594864(0x289)](_0x387d54,_0x272c96,_0x679f82);if(_0x1772b7[_0x594864(0x20f)])_0x272c96=_0x1772b7[_0x1772b7[_0x594864(0x20f)]-0x1][_0x594864(0x318)]+0x1,_0x56d69f=_0x56d69f[_0x594864(0x31d)](_0x1772b7);else break;}catch(_0x30d731){await handleError(_0x30d731,_0x594864(0x337),_0x387d54);}}return _0x56d69f;}async function validate24hChanges(){const _0x429d06=_0x521a92;for(const _0x5eede6 of currentCoins){if(_0x5eede6['coin']!=config[_0x429d06(0x249)]){let _0x5cacbc;_0x5eede6[_0x429d06(0x208)]?_0x5cacbc=formatResult((0x1/(gChange[_0x5eede6['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x5cacbc=gChange[_0x5eede6[_0x429d06(0x314)]],_0x5cacbc<config[_0x429d06(0x227)]&&(logHistory(_0x429d06(0x2fa),_0x5eede6['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x5cacbc+'%'),logHistory(_0x429d06(0x2fa),_0x429d06(0x283)),logHistory(_0x429d06(0x2fa),_0x429d06(0x210)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x7c7418,_0x1f264a){const _0x52f1ba=_0x521a92;if(!_0x7c7418)return!![];const _0x42712e=_0x1f264a[_0x52f1ba(0x2c0)]('.'),_0x44a3f0=_0x7c7418['split']('.');for(var _0x14729d=0x0;_0x14729d<_0x44a3f0[_0x52f1ba(0x20f)];_0x14729d++){const _0x1b6109=~~_0x44a3f0[_0x14729d],_0x46257c=~~_0x42712e[_0x14729d];if(_0x1b6109<_0x46257c)return!![];if(_0x1b6109>_0x46257c)return![];}return![];}async function oneTimeMigration(){const _0x2df4c4=_0x521a92;let _0x2500d2=dbLogs[_0x2df4c4(0x29b)](_0x2df4c4(0x2eb))[_0x2df4c4(0x218)]();if(isOlderVersion(_0x2500d2,_0x2df4c4(0x2d9))){let _0x35fd6e=[];const _0x14425a=dbLogs['get'](_0x2df4c4(0x1eb))[_0x2df4c4(0x218)]();_0x14425a[_0x2df4c4(0x30d)](_0x432dfc=>{const _0x2ae2d3=_0x2df4c4;_0x35fd6e[_0x2ae2d3(0x2b5)]({'time':_0x432dfc[_0x2ae2d3(0x235)],'type':_0x432dfc[_0x2ae2d3(0x225)],'event':_0x432dfc[_0x2ae2d3(0x231)]});}),dbLogs[_0x2df4c4(0x29b)](_0x2df4c4(0x1eb))['assign'](_0x35fd6e)['write']();}let _0x5bf577=dbConfig[_0x2df4c4(0x29b)]('version')['value']();if(isOlderVersion(_0x5bf577,'2.3.5')){let _0x1b02df=dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})['value']();if(_0x1b02df){let _0x49cce1=[];_0x1b02df[_0x2df4c4(0x2c6)][_0x2df4c4(0x30d)](_0x49fc0e=>{const _0x4abead=_0x2df4c4;_0x49cce1[_0x4abead(0x2b5)]({'coin':_0x49fc0e['coin'],'number':_0x49fc0e[_0x4abead(0x320)],'price':_0x49fc0e[_0x4abead(0x191)]}),delete _0x49fc0e[_0x4abead(0x320)],delete _0x49fc0e[_0x4abead(0x191)];});if(_0x49cce1[_0x2df4c4(0x20f)]!==0x0)fs[_0x2df4c4(0x292)](configbackuppath+(_0x2df4c4(0x330)+botID+_0x2df4c4(0x1f0)),JSON[_0x2df4c4(0x209)](_0x49cce1,null,0x4),function(_0x4438d8){if(_0x4438d8){}});const _0x2411ee=(_0x649ac4,_0x410f0f)=>{const _0x51c8d9=_0x2df4c4;let _0x15b52d=[];_0x410f0f['forEach'](_0x5645b9=>{const _0x1102f1=_0x1fd5,_0x153f18=_0x649ac4[_0x1102f1(0x198)](_0x5af6d4=>_0x5af6d4['coin']==_0x5645b9[_0x1102f1(0x242)]);if(!_0x153f18)_0x15b52d[_0x1102f1(0x2b5)](_0x5645b9);});let _0x239bf6=[];return _0x649ac4[_0x51c8d9(0x30d)](_0x16118d=>{const _0x564698=_0x51c8d9,_0xc017ea=_0x410f0f[_0x564698(0x198)](_0x29e900=>_0x29e900[_0x564698(0x242)]==_0x16118d[_0x564698(0x242)]);if(!_0xc017ea||_0xc017ea[_0x564698(0x16c)]==0x0&&_0x16118d[_0x564698(0x16c)]!=0x0)_0x239bf6[_0x564698(0x2b5)](_0x16118d);}),{'missingDay1':_0x15b52d,'notInDay2':_0x239bf6};},_0x25cd7c=dbPerformance['get'](_0x2df4c4(0x2b0))['cloneDeep']()[_0x2df4c4(0x218)]();if(_0x25cd7c['length']>0x1){const {missingDay1:_0x4b0f6b,notInDay2:_0x128285}=_0x2411ee(_0x49cce1,_0x25cd7c[0x1][_0x2df4c4(0x194)]);_0x49cce1=[..._0x49cce1,..._0x4b0f6b],_0x128285[_0x2df4c4(0x30d)](_0x332345=>{const _0x4a3afd=_0x2df4c4;let _0x1db78e=_0x49cce1['findIndex'](_0x19b4e9=>_0x19b4e9['coin']==_0x332345[_0x4a3afd(0x242)]);_0x1db78e!=-0x1&&_0x49cce1['splice'](_0x1db78e,0x1);});}_0x49cce1[_0x2df4c4(0x2d3)]((_0x54f054,_0x675444)=>_0x54f054[_0x2df4c4(0x242)]>_0x675444['coin']?0x1:_0x675444[_0x2df4c4(0x242)]>_0x54f054[_0x2df4c4(0x242)]?-0x1:0x0);let _0x5d59a8=[{'date':_0x1b02df['startdate'],'changes':_0x49cce1}];_0x25cd7c[_0x2df4c4(0x20f)]>0x2&&_0x25cd7c[_0x2df4c4(0x30d)]((_0x7de48f,_0x363e50)=>{const _0x216ff1=_0x2df4c4;if(_0x363e50>0x0&&_0x363e50<_0x25cd7c['length']-0x1){const {missingDay1:_0x302600,notInDay2:_0x175f06}=_0x2411ee(_0x25cd7c[_0x363e50][_0x216ff1(0x194)],_0x25cd7c[_0x363e50+0x1]['coins']);_0x49cce1=[],(_0x302600[_0x216ff1(0x20f)]!=0x0||_0x175f06[_0x216ff1(0x20f)]!=0x0)&&(_0x302600[_0x216ff1(0x20f)]!=0x0&&_0x49cce1['push'](..._0x302600),_0x175f06[_0x216ff1(0x20f)]!=0x0&&(_0x175f06[_0x216ff1(0x30d)](_0x2e2064=>{const _0x2004be=_0x216ff1;_0x2e2064[_0x2004be(0x16c)]=-_0x2e2064[_0x2004be(0x16c)];}),_0x49cce1[_0x216ff1(0x2b5)](..._0x175f06)),_0x49cce1['sort']((_0x1c8f08,_0xe8c623)=>_0x1c8f08[_0x216ff1(0x242)]>_0xe8c623[_0x216ff1(0x242)]?0x1:_0xe8c623[_0x216ff1(0x242)]>_0x1c8f08[_0x216ff1(0x242)]?-0x1:0x0),_0x5d59a8[_0x216ff1(0x2b5)]({'date':_0x25cd7c[_0x363e50+0x1][_0x216ff1(0x2d2)],'changes':_0x49cce1}));}}),dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})['assign']({..._0x1b02df,'liquidity':_0x5d59a8})[_0x2df4c4(0x255)]();}}if(isOlderVersion(_0x5bf577,_0x2df4c4(0x2ac))){let _0x40d13e=dbConfig['get'](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})[_0x2df4c4(0x218)]();if(_0x40d13e){const _0x5268b3=_0x40d13e[_0x2df4c4(0x1b1)],_0x1a27df=_0x5268b3?capitalize(_0x5268b3):_0x2df4c4(0x18a);dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})[_0x2df4c4(0x2c5)]({'exchange':_0x1a27df})[_0x2df4c4(0x255)]();}}if(isOlderVersion(_0x5bf577,_0x2df4c4(0x2b9))){let _0x1e55ae=dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})[_0x2df4c4(0x218)]();if(_0x1e55ae){const _0x2deffa=_0x1e55ae[_0x2df4c4(0x1fe)],_0x3fc560=_0x2deffa?_0x2df4c4(0x248):![];dbConfig[_0x2df4c4(0x29b)]('bot')[_0x2df4c4(0x198)]({'botID':botID})['assign']({'marketcapEnabled':_0x3fc560})[_0x2df4c4(0x255)]();}}if(isOlderVersion(_0x5bf577,_0x2df4c4(0x190))){let _0x4e1d84=dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})[_0x2df4c4(0x218)]();if(_0x4e1d84){const _0x1705f5=_0x4e1d84[_0x2df4c4(0x299)],_0x5d4449=_0x1705f5?'update-liquidity':![];dbConfig[_0x2df4c4(0x29b)](_0x2df4c4(0x2d8))[_0x2df4c4(0x198)]({'botID':botID})['assign']({'autoliquidity':_0x5d4449})[_0x2df4c4(0x255)]();}}let _0x5ac51f=dbPerformance[_0x2df4c4(0x29b)](_0x2df4c4(0x2eb))[_0x2df4c4(0x218)]();isOlderVersion(_0x5ac51f,'2.3.5')&&setStartDatePerformance();let _0x34841b=dbCoinResults[_0x2df4c4(0x29b)](_0x2df4c4(0x2eb))[_0x2df4c4(0x218)]();if(isOlderVersion(_0x34841b,'2.5.0')){let _0x16dcfa=dbCoinResults[_0x2df4c4(0x29b)]('coins')[_0x2df4c4(0x218)]();if(_0x16dcfa[_0x2df4c4(0x20f)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4ff272=_0x521a92;dbConfig['set'](_0x4ff272(0x2eb),serverversion)[_0x4ff272(0x255)](),dbPerformance[_0x4ff272(0x273)](_0x4ff272(0x2eb),serverversion)[_0x4ff272(0x255)](),dbLogs['set'](_0x4ff272(0x2eb),serverversion)[_0x4ff272(0x255)](),dbCoinResults[_0x4ff272(0x273)](_0x4ff272(0x2eb),serverversion)[_0x4ff272(0x255)]();}function getConfiguration(_0x419cf7){const _0x5f3dc8=_0x521a92;let _0x4f145a=dbConfig['get'](_0x5f3dc8(0x2d8))[_0x5f3dc8(0x198)]({'botID':_0x419cf7})['value']();if(_0x4f145a){let _0xe4f9b5=![];typeof _0x4f145a['threshold']==_0x5f3dc8(0x302)&&(_0x4f145a={..._0x4f145a,'threshold':Number(_0x4f145a[_0x5f3dc8(0x1df)])},_0xe4f9b5=!![]),_0x4f145a['change24h']==undefined&&(_0x4f145a={..._0x4f145a,'change24h':-0x14},_0xe4f9b5=!![]),_0x4f145a[_0x5f3dc8(0x23d)]==undefined&&(_0x4f145a={..._0x4f145a,'fiat':_0x5f3dc8(0x202)},_0xe4f9b5=!![]),_0x4f145a[_0x5f3dc8(0x201)]==undefined&&(_0x4f145a={..._0x4f145a,'onepagemode':settings[_0x5f3dc8(0x201)]},_0xe4f9b5=!![]),_0x4f145a[_0x5f3dc8(0x2ef)]==undefined&&(_0x4f145a={..._0x4f145a,'colorscheme':'red_yellow_blue'},_0xe4f9b5=!![]),_0x4f145a['autoliquidity']==undefined&&(_0x4f145a={..._0x4f145a,'autoliquidity':_0x5f3dc8(0x284)},_0xe4f9b5=!![]),_0x4f145a['marketcapApi']==undefined&&(_0x4f145a={..._0x4f145a,'marketcapApi':settings['marketcapApi']?!![]:![]},_0xe4f9b5=!![]),_0x4f145a[_0x5f3dc8(0x1fe)]==undefined&&(_0x4f145a={..._0x4f145a,'marketcapEnabled':![]},_0xe4f9b5=!![]),_0xe4f9b5&&(_0x4f145a={'botID':_0x4f145a[_0x5f3dc8(0x2b7)],'exchange':_0x4f145a[_0x5f3dc8(0x1b1)],'apiKey':_0x4f145a[_0x5f3dc8(0x1ba)],'apiSecret':_0x4f145a[_0x5f3dc8(0x238)],'apiPassword':_0x4f145a[_0x5f3dc8(0x1fb)],'basecoin':_0x4f145a[_0x5f3dc8(0x249)],'botname':_0x4f145a['botname'],'showname':_0x4f145a[_0x5f3dc8(0x2fb)],'threshold':_0x4f145a[_0x5f3dc8(0x1df)],'ordertype':_0x4f145a[_0x5f3dc8(0x2ff)],'timeout':_0x4f145a['timeout'],'fiat':_0x4f145a[_0x5f3dc8(0x23d)],'startdate':_0x4f145a['startdate'],'recreate':_0x4f145a[_0x5f3dc8(0x26e)],'timeshift':_0x4f145a[_0x5f3dc8(0x226)],'onepagemode':_0x4f145a[_0x5f3dc8(0x201)],'headless':_0x4f145a['headless'],'cooldown':_0x4f145a['cooldown'],'change24h':_0x4f145a[_0x5f3dc8(0x227)],'emojibuy':_0x4f145a[_0x5f3dc8(0x303)],'emojisell':_0x4f145a[_0x5f3dc8(0x2e5)],'colorscheme':_0x4f145a[_0x5f3dc8(0x2ef)],'marketcapApi':_0x4f145a[_0x5f3dc8(0x169)],'marketcapEnabled':_0x4f145a[_0x5f3dc8(0x1fe)],'portfolio':_0x4f145a['portfolio'],'autoliquidity':_0x4f145a[_0x5f3dc8(0x299)],'liquidity':_0x4f145a[_0x5f3dc8(0x259)],'openOrders':_0x4f145a[_0x5f3dc8(0x195)]},dbConfig['get'](_0x5f3dc8(0x2d8))[_0x5f3dc8(0x29f)]()['write'](),dbConfig['get']('bot')[_0x5f3dc8(0x2b5)](_0x4f145a)[_0x5f3dc8(0x255)]());}else _0x4f145a={'botID':_0x419cf7,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5f3dc8(0x222)+_0x419cf7,'showname':![],'threshold':0x3,'ordertype':_0x5f3dc8(0x19a),'timeout':0x14,'fiat':_0x5f3dc8(0x202),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x5f3dc8(0x201)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','marketcapApi':settings[_0x5f3dc8(0x169)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x5f3dc8(0x284),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4f145a;}function emittedConfiguration(){const _0x490479=_0x521a92;let _0x3c9036;if(config[_0x490479(0x1ba)]=='')_0x3c9036={...config,'configstate':_0x490479(0x1cc)};else config[_0x490479(0x1ba)]==_0x490479(0x23e)?_0x3c9036={...config,'configstate':_0x490479(0x17a)}:(_0x3c9036={...config,'apiKey':_0x490479(0x28e),'apiSecret':'************'},config[_0x490479(0x1fb)]&&(_0x3c9036[_0x490479(0x1fb)]='************'));return _0x3c9036;}function getSettings(){const _0x4dd7c1=_0x521a92;return dbSettings[_0x4dd7c1(0x29b)](_0x4dd7c1(0x189))['value']();}function getSecure(){const _0x3ee491=_0x521a92;return dbSecure[_0x3ee491(0x29b)](_0x3ee491(0x1b6))[_0x3ee491(0x218)]()||{};}function updateTimeshift(_0x19152e){const _0x46bd6e=_0x521a92;let _0x2e4978=dbConfig['get'](_0x46bd6e(0x2d8))[_0x46bd6e(0x198)]({'botID':botID})['value']();_0x2e4978&&dbConfig[_0x46bd6e(0x29b)](_0x46bd6e(0x2d8))[_0x46bd6e(0x198)]({'botID':botID})[_0x46bd6e(0x2c5)]({'timeshift':_0x19152e})[_0x46bd6e(0x255)](),config[_0x46bd6e(0x226)]=_0x19152e,proxyEmit(_0x46bd6e(0x2e9),emittedConfiguration());}function updateOnepagemode(_0x4c2899){const _0x27831c=_0x521a92;let _0x1d47a1=dbConfig['get'](_0x27831c(0x2d8))['find']({'botID':botID})['value']();_0x1d47a1&&dbConfig[_0x27831c(0x29b)](_0x27831c(0x2d8))['find']({'botID':botID})['assign']({'onepagemode':_0x4c2899})[_0x27831c(0x255)](),config[_0x27831c(0x201)]=_0x4c2899,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x2aa372){const _0x1d4cea=_0x521a92,_0x541557=_0x2aa372?!![]:![];let _0x1bfdef=dbConfig[_0x1d4cea(0x29b)](_0x1d4cea(0x2d8))[_0x1d4cea(0x198)]({'botID':botID})['value']();_0x1bfdef&&dbConfig[_0x1d4cea(0x29b)](_0x1d4cea(0x2d8))[_0x1d4cea(0x198)]({'botID':botID})[_0x1d4cea(0x2c5)]({'marketcapApi':_0x541557})['write'](),config[_0x1d4cea(0x169)]=_0x541557,getMarketCap(),proxyEmit(_0x1d4cea(0x2e9),emittedConfiguration());}async function storeConfiguration(_0x234118){const _0x4fdb8b=_0x521a92;logger[_0x4fdb8b(0x1d0)](_0x4fdb8b(0x232));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4cbc05=![],_0x394b7f=![],_0xe19811=[];_0x234118[_0x4fdb8b(0x2c6)][_0x4fdb8b(0x30d)](_0x148230=>{const _0x27bd4d=_0x4fdb8b;if(!_0x148230['excluded']&&_0x148230[_0x27bd4d(0x242)]!=_0x234118[_0x27bd4d(0x249)])_0xe19811['push'](_0x148230[_0x27bd4d(0x314)]);}),_0xe19811['forEach'](_0xd0f68b=>{const _0x4f9cc9=_0x4fdb8b,_0x25b03c=currentCoins[_0x4f9cc9(0x198)](_0x444d18=>_0x444d18[_0x4f9cc9(0x314)]==_0xd0f68b);!_0x25b03c&&(_0x4cbc05=!![]);}),currentCoins[_0x4fdb8b(0x30d)](_0x112d9d=>{const _0x475a75=_0x4fdb8b;if(_0x112d9d[_0x475a75(0x242)]!=config[_0x475a75(0x249)]){const _0x3f3efa=_0xe19811[_0x475a75(0x198)](_0x472c37=>_0x472c37==_0x112d9d[_0x475a75(0x314)]);!_0x3f3efa&&(_0x4cbc05=!![]);}}),_0x234118[_0x4fdb8b(0x2c6)][_0x4fdb8b(0x30d)](_0x3b3ee8=>{const _0x3ff0e6=_0x4fdb8b,_0x385c5b=config[_0x3ff0e6(0x2c6)][_0x3ff0e6(0x198)](_0xe7967d=>_0xe7967d[_0x3ff0e6(0x242)]==_0x3b3ee8[_0x3ff0e6(0x242)]);if(_0x385c5b&&_0x3b3ee8[_0x3ff0e6(0x312)]!=_0x385c5b[_0x3ff0e6(0x312)])_0x394b7f=!![];});let _0x47a56f=dbConfig['get']('bot')['find']({'botID':botID})[_0x4fdb8b(0x218)]();_0x234118={..._0x234118,'apiKey':crypt[_0x4fdb8b(0x21d)](secure['privateKey'],_0x234118[_0x4fdb8b(0x1ba)])[_0x4fdb8b(0x1d4)],'apiSecret':crypt['decrypt'](secure[_0x4fdb8b(0x234)],_0x234118[_0x4fdb8b(0x238)])[_0x4fdb8b(0x1d4)]};_0x234118[_0x4fdb8b(0x1fb)]&&(_0x234118[_0x4fdb8b(0x1fb)]=crypt['decrypt'](secure[_0x4fdb8b(0x234)],_0x234118[_0x4fdb8b(0x1fb)])[_0x4fdb8b(0x1d4)]);let _0x169c72=![];if(_0x47a56f){_0x234118[_0x4fdb8b(0x1ba)]==_0x4fdb8b(0x28e)?_0x234118['apiKey']=config['apiKey']:_0x169c72=!![];_0x234118[_0x4fdb8b(0x238)]=='************'?_0x234118[_0x4fdb8b(0x238)]=config[_0x4fdb8b(0x238)]:_0x169c72=!![];if(_0x234118['apiPassword']==_0x4fdb8b(0x28e))_0x234118['apiPassword']=config[_0x4fdb8b(0x1fb)];else{if(_0x234118[_0x4fdb8b(0x1fb)])_0x169c72=!![];}dbConfig[_0x4fdb8b(0x29b)](_0x4fdb8b(0x2d8))['find']({'botID':botID})[_0x4fdb8b(0x2c5)](_0x234118)[_0x4fdb8b(0x255)]();}else dbConfig['get'](_0x4fdb8b(0x2d8))[_0x4fdb8b(0x2b5)](_0x234118)['write'](),_0x169c72=!![],process[_0x4fdb8b(0x233)]({'status':'enabled','live':_0x4fdb8b(0x221)},_0x1e69f5=>{});process[_0x4fdb8b(0x233)]({'botname':_0x234118[_0x4fdb8b(0x321)]},_0x16a01b=>{}),config={..._0x234118},updateBotManager(),proxyEmit(_0x4fdb8b(0x23b)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x169c72)!_0x47a56f?await reset(!![]):getBalances();else _0x4cbc05||_0x394b7f?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x4d851f){const _0x5326a7=_0x521a92,_0x4af931={...config,'headless':_0x4d851f[_0x5326a7(0x262)]};let _0x3fe9ed=dbConfig[_0x5326a7(0x29b)]('bot')[_0x5326a7(0x198)]({'botID':botID})[_0x5326a7(0x218)]();_0x3fe9ed&&dbConfig[_0x5326a7(0x29b)]('bot')[_0x5326a7(0x198)]({'botID':botID})[_0x5326a7(0x2c5)](_0x4af931)['write'](),config={..._0x4af931},updateBotManager(),proxyEmit(_0x5326a7(0x2e9),emittedConfiguration());}async function storeFiat(_0x52ef0f){const _0x2823ae=_0x521a92,_0x38f033={...config,'fiat':_0x52ef0f};let _0x20a5ef=dbConfig[_0x2823ae(0x29b)](_0x2823ae(0x2d8))[_0x2823ae(0x198)]({'botID':botID})['value']();_0x20a5ef&&dbConfig['get'](_0x2823ae(0x2d8))[_0x2823ae(0x198)]({'botID':botID})[_0x2823ae(0x2c5)](_0x38f033)[_0x2823ae(0x255)](),config={..._0x38f033},proxyEmit(_0x2823ae(0x2e9),emittedConfiguration());}function resetHistory(){const _0x1afa49=_0x521a92;logger['full'](_0x1afa49(0x24a));try{if(fs[_0x1afa49(0x2d6)](path[_0x1afa49(0x1de)](configpath,_0x1afa49(0x1e1)+botID+_0x1afa49(0x1f5))))fs[_0x1afa49(0x2c9)](path[_0x1afa49(0x1de)](configpath,_0x1afa49(0x1e1)+botID+_0x1afa49(0x1f5)));if(fs[_0x1afa49(0x2d6)](path[_0x1afa49(0x1de)](configpath,_0x1afa49(0x1e1)+botID+_0x1afa49(0x1b5))))fs[_0x1afa49(0x2c9)](path[_0x1afa49(0x1de)](configpath,'bot-'+botID+_0x1afa49(0x1b5)));if(fs['existsSync'](path[_0x1afa49(0x1de)](configpath,_0x1afa49(0x1e1)+botID+_0x1afa49(0x2d0))))fs['unlinkSync'](path[_0x1afa49(0x1de)](configpath,'bot-'+botID+_0x1afa49(0x2d0)));}catch(_0x4023b3){if(_0x4023b3)logger[_0x1afa49(0x1cd)](_0x1afa49(0x22f),_0x4023b3);}const _0x112543=getDate();let _0xd96ad9=[];currentCoins[_0x1afa49(0x30d)](_0x414526=>{const _0x1a1783=_0x1afa49;_0xd96ad9[_0x1a1783(0x2b5)]({'coin':_0x414526[_0x1a1783(0x242)],'number':_0x414526[_0x1a1783(0x16c)],'price':_0x414526[_0x1a1783(0x196)]});});let _0x58c45c=dbConfig['get'](_0x1afa49(0x2d8))[_0x1afa49(0x198)]({'botID':botID})[_0x1afa49(0x218)]();_0x58c45c&&(dbConfig['get'](_0x1afa49(0x2d8))[_0x1afa49(0x198)]({'botID':botID})[_0x1afa49(0x2c5)]({'liquidity':[{'date':_0x112543,'changes':_0xd96ad9}]})[_0x1afa49(0x255)](),config[_0x1afa49(0x259)]=[]),restartBot(!![]);}function noslash(_0x261590){const _0x4a2405=_0x521a92;return _0x261590[_0x4a2405(0x19f)]('/','');}function updateHighestFee(_0x36d02b){const _0x44cb4d=_0x521a92;if(_0x36d02b[_0x44cb4d(0x208)]){let _0x4d8cae={'filled':_0x36d02b[_0x44cb4d(0x173)]*_0x36d02b[_0x44cb4d(0x1ed)],'amount':_0x36d02b[_0x44cb4d(0x173)]*_0x36d02b[_0x44cb4d(0x1ed)],'side':_0x36d02b[_0x44cb4d(0x17c)]==_0x44cb4d(0x2a6)?_0x44cb4d(0x2de):'sell','price':0x1/_0x36d02b[_0x44cb4d(0x1ed)]};_0x36d02b={..._0x36d02b,..._0x4d8cae};}const _0x88f59b=defaultFee*_0x36d02b[_0x44cb4d(0x173)]*_0x36d02b['price'];lastFees['recent20'][_0x44cb4d(0x20f)]===0x14&&lastFees[_0x44cb4d(0x1f9)]['shift'](),lastFees[_0x44cb4d(0x1f9)][_0x44cb4d(0x2b5)](_0x88f59b),lastFees['highest']=Math['max'](...lastFees[_0x44cb4d(0x1f9)]);}async function updateNumberCoinsCcxt(_0x191e38){const _0x569d57=_0x521a92;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x191e38[_0x569d57(0x314)]+_0x569d57(0x2ab)+_0x191e38['status']+'\x20|\x20'+_0x191e38['filled']+_0x569d57(0x322)+_0x191e38['amount']+_0x569d57(0x2ab)+_0x191e38['id']);let _0x20d86a=_0x191e38['status'],_0x334c21=![];currentCoins[_0x569d57(0x30d)](_0x250393=>{const _0xad0878=_0x569d57;_0x250393[_0xad0878(0x314)]==_0x191e38[_0xad0878(0x314)]&&(_0x334c21=!![]);});if(!_0x334c21)return;const _0x3800ad=currentCoins[_0x569d57(0x198)](_0x10a4bf=>_0x10a4bf['symbol']==_0x191e38[_0x569d57(0x314)]),_0x2659a3=_0x3abb50=>{const _0x17cb3f=_0x569d57;if(_0x3800ad)_0x3800ad[_0x17cb3f(0x31a)]=_0x3abb50;};let _0x5ca1ad=![];for(const _0x1c4a23 of lastOrders){const _0x2f2aa6=0x64,_0x398880=0x1388;let _0xda1bcb=0x0;while(!_0x1c4a23[_0x569d57(0x287)]&&_0xda1bcb*_0x2f2aa6<_0x398880){_0xda1bcb++,await sleep(_0x2f2aa6);}if(_0xda1bcb>0x0)logger[_0x569d57(0x1d0)](_0x569d57(0x2f9)+_0xda1bcb*_0x2f2aa6/0x3e8+_0x569d57(0x1a2));_0x1c4a23[_0x569d57(0x287)]==_0x191e38['id']&&(_0x5ca1ad=!![]);}if(_0x20d86a==_0x569d57(0x23f)){_0x2659a3('open');if(_0x191e38[_0x569d57(0x173)]>0x0){if(_0x5ca1ad){setBlockTransactionDetection(!![]),logger[_0x569d57(0x1d0)]('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x191e38['id']);const _0x39b725=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x39b725,setBlockTransactionDetection(![]);}else logger['debug'](_0x569d57(0x1b4)+_0x191e38['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x20d86a==_0x569d57(0x26f)){_0x2659a3(_0x569d57(0x26f));const _0x5680c9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5680c9,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x20d86a==_0x569d57(0x336)){if(lastOrders)for(const _0x372ea0 of lastOrders){if(_0x372ea0[_0x569d57(0x287)]==_0x191e38['id']){logger['debug'](_0x569d57(0x2f5)+_0x191e38['id']),_0x5ca1ad=!![];if(_0x372ea0[_0x569d57(0x173)]==0x0){setBlockTransactionDetection(!![]),logger[_0x569d57(0x1d0)](_0x569d57(0x28f)+_0x191e38['id']);if(_0x191e38[_0x569d57(0x241)])_0x372ea0[_0x569d57(0x1ed)]=_0x191e38[_0x569d57(0x241)];else{if(_0x191e38[_0x569d57(0x1ed)])_0x372ea0[_0x569d57(0x1ed)]=_0x191e38['price'];else{}}_0x372ea0[_0x569d57(0x173)]=_0x191e38[_0x569d57(0x173)],updateHighestFee(_0x372ea0),_0x2659a3('filled'),await validateOrders();if(lockOrders==ORDERS[_0x569d57(0x311)]){const _0x42eb65=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x42eb65,setBlockTransactionDetection(![]);}_0x372ea0[_0x569d57(0x282)]={'currency':_0x191e38['fee']?_0x191e38[_0x569d57(0x282)]['currency']:null,'cost':_0x191e38[_0x569d57(0x282)]?_0x191e38['fee'][_0x569d57(0x177)]:0x0},await updateCoinResults(_0x372ea0);}}}!_0x5ca1ad&&(logger[_0x569d57(0x1d0)](_0x569d57(0x1c2)+_0x191e38['id']),_0x2659a3(_0x569d57(0x173)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x40d5be=JSON[_0x569d57(0x22a)](lastBalances[_0x569d57(0x2c6)]);const _0x2a935d=_0x40d5be[_0x569d57(0x198)](_0x2bdcba=>_0x2bdcba[_0x569d57(0x314)]==_0x191e38[_0x569d57(0x314)]);if(_0x2a935d){if(_0x20d86a=='open')_0x2a935d[_0x569d57(0x31a)]=_0x2a935d['orderstatus']==_0x569d57(0x173)?'filled':'open';else{if(_0x20d86a==_0x569d57(0x26f))_0x2a935d['orderstatus']=_0x2a935d[_0x569d57(0x31a)]==_0x569d57(0x173)?_0x569d57(0x173):_0x569d57(0x26f);else _0x20d86a==_0x569d57(0x336)&&(_0x2a935d[_0x569d57(0x31a)]=_0x569d57(0x173));}}lastBalances={...lastBalances,'portfolio':JSON[_0x569d57(0x209)](_0x40d5be)},proxyEmit(_0x569d57(0x288),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1012d9=_0x521a92;await getOpenOrders();let _0x5c219d=![];currentCoins[_0x1012d9(0x30d)](_0xb4ce28=>{const _0x2463ea=_0x1012d9;_0x5c219d=allOpenOrders[_0x2463ea(0x198)](_0x5d4638=>_0x5d4638[_0x2463ea(0x314)]==_0xb4ce28[_0x2463ea(0x314)]),_0xb4ce28[_0x2463ea(0x31a)]=_0x5c219d?'open':_0x2463ea(0x295);});}async function getCoins(_0x1aadc2=0x0,_0xe3578=!![],_0x2b5dc7=config[_0x521a92(0x249)]){const _0x47c875=_0x521a92;let _0x1f4f99,_0x101c40=[],_0x28755f=[],_0x8ad0e=[];if(_0x1aadc2)await sleep(_0x1aadc2);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1f4f99=await exchange['fetchBalance'](),mybalances=_0x1f4f99[_0x47c875(0x211)];for(const [_0x31352c,_0x3ba3f0]of Object[_0x47c875(0x2ce)](mybalances)){_0x8ad0e[_0x47c875(0x2b5)](_0x31352c);}config['portfolio'][_0x47c875(0x30d)](_0x3120ab=>{const _0x53a629=_0x47c875;!_0x8ad0e[_0x53a629(0x243)](_0x3120ab[_0x53a629(0x242)])&&(mybalances[_0x3120ab[_0x53a629(0x242)]]=0x0);});if(_0x2b5dc7=='')for(const [_0x3ad5f2,_0x3e90f4]of Object[_0x47c875(0x2ce)](mybalances)){_0x3e90f4!=0x0&&_0x101c40[_0x47c875(0x2b5)]({'coin':_0x3ad5f2});}else for(const [_0x2a1330,_0x3e1dd6]of Object[_0x47c875(0x2ce)](mybalances)){const _0xfb54df=config['portfolio'][_0x47c875(0x198)](_0x3089bd=>_0x3089bd[_0x47c875(0x242)]==_0x2a1330),_0xc47a6b=_0x2a1330+'/'+_0x2b5dc7,_0x4d2f6f=_0x2b5dc7+'/'+_0x2a1330,_0x2bc71c=currentCoins[_0x47c875(0x198)](_0x44d39b=>_0x44d39b[_0x47c875(0x242)]==_0x2a1330);if((_0x3e1dd6!=0x0||_0xfb54df)&&(allSymbols[_0x47c875(0x243)](_0xc47a6b)||_0x2a1330==_0x2b5dc7))_0x2bc71c?_0x101c40[_0x47c875(0x2b5)]({..._0x2bc71c,'number':Math[_0x47c875(0x2e7)](_0x3e1dd6+(_0xfb54df&&_0xfb54df['offset']||0x0),0x0)}):_0x101c40[_0x47c875(0x2b5)]({'coin':_0x2a1330,'symbol':_0xc47a6b,'reverse':![],'number':Math[_0x47c875(0x2e7)](_0x3e1dd6+(_0xfb54df&&_0xfb54df[_0x47c875(0x312)]||0x0),0x0),'orderstatus':_0x47c875(0x295)});else{if((_0x3e1dd6!=0x0||_0xfb54df)&&allSymbols[_0x47c875(0x243)](_0x4d2f6f))_0x2bc71c?_0x101c40['push']({..._0x2bc71c,'number':Math[_0x47c875(0x2e7)](_0x3e1dd6+(_0xfb54df&&_0xfb54df['offset']||0x0),0x0)}):_0x101c40[_0x47c875(0x2b5)]({'coin':_0x2a1330,'symbol':_0x4d2f6f,'reverse':!![],'number':Math['max'](_0x3e1dd6+(_0xfb54df&&_0xfb54df[_0x47c875(0x312)]||0x0),0x0),'orderstatus':'none'});else _0xfb54df&&_0x101c40['push']({'coin':_0xfb54df[_0x47c875(0x242)],'symbol':_0xfb54df['symbol'],'reverse':_0xfb54df[_0x47c875(0x208)],'number':0x0,'orderstatus':_0x47c875(0x295)});}}}catch(_0x4e6402){if(!_0xe3578)handleErrorNoStop(_0x4e6402,_0x47c875(0x2f1));else await handleError(_0x4e6402,_0x47c875(0x2f1));}return _0x101c40[_0x47c875(0x2d3)]((_0x3abfe8,_0x3a911c)=>_0x3abfe8[_0x47c875(0x22c)]<_0x3a911c['delta']?0x1:_0x3a911c[_0x47c875(0x22c)]<_0x3abfe8[_0x47c875(0x22c)]?-0x1:0x0),_0x28755f=cloneDeep(_0x101c40),_0x101c40=_0x101c40[_0x47c875(0x265)](_0x5aacc2=>{const _0x336829=_0x47c875,_0x23dd91=config[_0x336829(0x2c6)][_0x336829(0x198)](_0x4cc3d6=>_0x4cc3d6[_0x336829(0x242)]==_0x5aacc2[_0x336829(0x242)]);return _0x23dd91&&!_0x23dd91[_0x336829(0x2cb)];}),[_0x101c40,_0x28755f];}async function getCoinNumber(_0x4468ef){const _0x57e326=_0x521a92;let _0x467d08;try{const _0x1eb494=await exchange[_0x57e326(0x25f)]();_0x467d08=_0x1eb494['total'][_0x4468ef];}catch(_0x2af386){await handleError(_0x2af386,_0x57e326(0x29e));}return _0x467d08;}async function getOpenOrders(){const _0x4ce669=_0x521a92;let _0x299997;allOpenOrders=[];try{for(const _0x1b61b4 of config[_0x4ce669(0x2c6)]){!_0x1b61b4[_0x4ce669(0x2cb)]&&_0x1b61b4['coin']!=config[_0x4ce669(0x249)]&&(_0x299997=await exchange[_0x4ce669(0x1d8)](_0x1b61b4[_0x4ce669(0x314)]),_0x299997[_0x4ce669(0x20f)]>0x0&&allOpenOrders[_0x4ce669(0x2b5)](_0x299997[0x0]));}}catch(_0x1b5378){await handleError(_0x1b5378,_0x4ce669(0x24c));}}async function handleOpenOrders(_0x20bf4c=0x0){const _0x39d6c1=_0x521a92;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x39d6c1(0x311)]&&allOrdersPlaced&&(_0x20bf4c==0x0?(logger[_0x39d6c1(0x1d0)](_0x39d6c1(0x31f)),_0x20bf4c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x39d6c1(0x29d)),validateOrders(_0x39d6c1(0x176))));}async function testAPI(_0x4bf680){const _0x1e2e1b=_0x521a92,_0x186bd7=ccxt['pro'][_0x4bf680['exchange'][_0x1e2e1b(0x285)]()],_0x49698f=new _0x186bd7({'apiKey':_0x4bf680[_0x1e2e1b(0x1ba)],'secret':_0x4bf680['apiSecret'],'options':{'defaultType':'spot'}});if(_0x4bf680['apiPassword'])_0x49698f[_0x1e2e1b(0x294)]=_0x4bf680['apiPassword'];try{await _0x49698f['fetchBalance']();}catch(_0x5e394c){logger[_0x1e2e1b(0x1d0)](_0x1e2e1b(0x1cf)+_0x5e394c[_0x1e2e1b(0x205)]());throw _0x5e394c;}}function cloneDeep(_0x3c6a9f){const _0x488166=_0x521a92;return JSON[_0x488166(0x22a)](JSON[_0x488166(0x209)](_0x3c6a9f));}async function getPortfolio(_0x6628be){const _0x394541=_0x521a92;let _0x59ff47=[],_0x4503ec=[],_0x1cba55=[],_0x28d9da;_0x6628be[_0x394541(0x1ba)]=crypt[_0x394541(0x21d)](secure[_0x394541(0x234)],_0x6628be[_0x394541(0x1ba)])[_0x394541(0x1d4)],_0x6628be[_0x394541(0x238)]=crypt[_0x394541(0x21d)](secure[_0x394541(0x234)],_0x6628be['apiSecret'])[_0x394541(0x1d4)],_0x6628be[_0x394541(0x1fb)]=crypt[_0x394541(0x21d)](secure[_0x394541(0x234)],_0x6628be[_0x394541(0x1fb)])[_0x394541(0x1d4)];if(_0x6628be[_0x394541(0x1ba)]!==_0x394541(0x28e)||_0x6628be['apiSecret']!==_0x394541(0x28e)||_0x6628be[_0x394541(0x1fb)]&&_0x6628be['apiPassword']!==_0x394541(0x28e)){if(config[_0x394541(0x1b1)]){if(_0x6628be[_0x394541(0x1ba)]==_0x394541(0x28e))_0x6628be['apiKey']=config[_0x394541(0x1ba)];if(_0x6628be[_0x394541(0x238)]==_0x394541(0x28e))_0x6628be['apiSecret']=config['apiSecret'];if(_0x6628be['apiPassword']==_0x394541(0x28e))_0x6628be[_0x394541(0x1fb)]=config['apiPassword'];}try{await testAPI(_0x6628be);}catch(_0x3e850c){if(_0x3e850c[_0x394541(0x205)]()[_0x394541(0x243)](_0x394541(0x1ae))){logHistory(_0x394541(0x2fa),_0x394541(0x306)),proxyEmit('portfolio1',![]);return;}else{logHistory(_0x394541(0x2fa),_0x394541(0x25e)),logger['debug']('Error\x20details\x20(0):',_0x3e850c),proxyEmit(_0x394541(0x264),![]);return;}}exchange?updateExchange(_0x6628be[_0x394541(0x1ba)],_0x6628be[_0x394541(0x238)],_0x6628be[_0x394541(0x1fb)]):await initExchange(_0x6628be[_0x394541(0x1b1)],_0x6628be['apiKey'],_0x6628be[_0x394541(0x238)],_0x6628be[_0x394541(0x1fb)]);await loadSymbols();const _0x316aec=await getCoins(0x0,![],_0x6628be['basecoin']);_0x1cba55=cloneDeep(_0x316aec[0x1]);}else{const _0x3e72dc=await getCoins();_0x1cba55=cloneDeep(_0x3e72dc[0x1]);}if(_0x6628be[_0x394541(0x249)]=='')proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x1cba55);else{_0x1cba55[_0x394541(0x30d)](_0x37c369=>{const _0x3de33a=_0x394541;if(_0x37c369['coin']!=_0x6628be[_0x3de33a(0x249)]&&allSymbols['includes'](_0x37c369[_0x3de33a(0x314)]))_0x59ff47['push'](_0x37c369[_0x3de33a(0x314)]);});if(_0x59ff47['length']==0x0)logHistory(_0x394541(0x2fa),_0x394541(0x271));else{try{_0x4503ec=await getTickers(_0x59ff47);}catch(_0x3caaee){logHistory(_0x394541(0x2fa),_0x394541(0x25e)),logger[_0x394541(0x1d0)](_0x394541(0x1a8),_0x3caaee),proxyEmit(_0x394541(0x264),![]);return;}_0x1cba55[_0x394541(0x30d)](_0x21746c=>{const _0x5af59a=_0x394541;_0x21746c[_0x5af59a(0x242)]!=_0x6628be[_0x5af59a(0x249)]?_0x4503ec[_0x21746c[_0x5af59a(0x314)]]?_0x28d9da=_0x21746c['reverse']?0x1/_0x4503ec[_0x21746c[_0x5af59a(0x314)]]['last']:_0x4503ec[_0x21746c[_0x5af59a(0x314)]][_0x5af59a(0x196)]:_0x28d9da=0x0:_0x28d9da=0x1,_0x21746c[_0x5af59a(0x1ed)]=formatResult(_0x28d9da,0x8);}),await getMarketCap(_0x1cba55),proxyEmit(_0x394541(0x264),!![]),proxyEmit(_0x394541(0x315),_0x1cba55);}}}function truncateTradeAmount(_0x575e4e,_0x52e5c1){const _0x52fe9e=_0x521a92;let _0x5c9d09=0x0;try{_0x5c9d09=exchange[_0x52fe9e(0x2a3)](_0x575e4e,_0x52e5c1);}catch(_0x15f825){}return _0x5c9d09;}function checkMinimums(_0x3ce797){const _0x11e894=_0x521a92;let _0x1f5f77=!![];const _0x250e38=!_0x3ce797[_0x11e894(0x208)]?markets[_0x3ce797[_0x11e894(0x314)]][_0x11e894(0x27a)][_0x11e894(0x317)][_0x11e894(0x335)]:markets[_0x3ce797['symbol']][_0x11e894(0x27a)][_0x11e894(0x177)][_0x11e894(0x335)],_0x541cf4=!_0x3ce797[_0x11e894(0x208)]?markets[_0x3ce797[_0x11e894(0x314)]][_0x11e894(0x27a)]['cost'][_0x11e894(0x335)]:markets[_0x3ce797[_0x11e894(0x314)]][_0x11e894(0x27a)][_0x11e894(0x317)][_0x11e894(0x335)],_0x375a29=truncateTradeAmount(_0x3ce797[_0x11e894(0x314)],_0x3ce797[_0x11e894(0x23a)]);_0x3ce797['trade']=_0x375a29;if(Math['abs'](_0x375a29)<_0x250e38)_0x1f5f77=![];if(Math[_0x11e894(0x32d)](_0x375a29)*_0x3ce797[_0x11e894(0x196)]<_0x541cf4)_0x1f5f77=![];if(_0x3ce797[_0x11e894(0x17c)]==_0x11e894(0x2a6)){let _0x1b66bb=config[_0x11e894(0x2c6)][_0x11e894(0x198)](_0xa5bbd2=>_0xa5bbd2[_0x11e894(0x242)]==_0x3ce797['coin']);if(_0x1b66bb['offset']>0x0){if(Math[_0x11e894(0x32d)](_0x375a29)>_0x3ce797[_0x11e894(0x16c)]-_0x1b66bb['offset'])_0x1f5f77=![];}else{if(Math[_0x11e894(0x32d)](_0x375a29)>_0x3ce797[_0x11e894(0x16c)])_0x1f5f77=![];}}if(_0x3ce797[_0x11e894(0x17c)]==_0x11e894(0x2de)){let _0x4b61a6=config[_0x11e894(0x2c6)][_0x11e894(0x198)](_0x191f83=>_0x191f83[_0x11e894(0x242)]==config[_0x11e894(0x249)]),_0x57f516=currentCoins[_0x11e894(0x198)](_0x227edd=>_0x227edd[_0x11e894(0x242)]==config['basecoin']);if(_0x4b61a6['offset']>0x0){if(Math[_0x11e894(0x32d)](_0x375a29)*_0x3ce797['last']>_0x57f516['number']-_0x4b61a6['offset'])_0x1f5f77=![];}else{if(Math[_0x11e894(0x32d)](_0x375a29)*_0x3ce797[_0x11e894(0x196)]>_0x57f516[_0x11e894(0x16c)])_0x1f5f77=![];}}return _0x1f5f77;}async function getBalances(_0x367bc5=!![]){const _0x5bff94=_0x521a92;let _0x861092=0x0,_0x181031;const _0x24a652=config[_0x5bff94(0x1df)];if(config['headless']&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x5bff94(0x30d)](_0xb202a3=>{const _0x426164=_0x5bff94;if(_0xb202a3[_0x426164(0x242)]!=config[_0x426164(0x249)]){let _0xa46b=gTicker[noslash(_0xb202a3[_0x426164(0x314)])];_0x181031=_0xb202a3['reverse']?0x1/_0xa46b:_0xa46b;}else _0x181031=0x1;let _0x572e15=_0xb202a3['number']*_0x181031;_0x861092+=_0x572e15,_0xb202a3[_0x426164(0x196)]=formatResult(Number(_0x181031),0x8),_0xb202a3['value']=_0x572e15;}),currentCoins[_0x5bff94(0x30d)](_0xae9e69=>{const _0x32de6e=_0x5bff94;let _0x5354fc=config[_0x32de6e(0x2c6)][_0x32de6e(0x198)](_0x1d51c0=>_0x1d51c0['coin']==_0xae9e69[_0x32de6e(0x242)]),_0x1a7a59=Number(_0x5354fc[_0x32de6e(0x32a)]),_0x25d8a7=_0xae9e69[_0x32de6e(0x218)]/_0x861092*0x64,_0x5b08fe=_0x1a7a59*_0x861092/0x64/_0xae9e69['last']-_0xae9e69[_0x32de6e(0x16c)];_0xae9e69['distribution']=formatResult(_0x25d8a7,0x3),_0xae9e69[_0x32de6e(0x244)]=formatResult(_0x1a7a59,0x3),_0xae9e69['trade']=formatResult(_0x5b08fe,0x8),_0xae9e69[_0x32de6e(0x17c)]='',_0xae9e69[_0x32de6e(0x2aa)]=![];if(_0xae9e69[_0x32de6e(0x242)]!=config['basecoin']){if(_0xae9e69[_0x32de6e(0x32a)]>_0x1a7a59)_0xae9e69[_0x32de6e(0x17c)]=_0x32de6e(0x2a6),_0xae9e69[_0x32de6e(0x2aa)]=checkMinimums(_0xae9e69);else _0xae9e69[_0x32de6e(0x32a)]<_0x1a7a59&&(_0xae9e69[_0x32de6e(0x17c)]='buy',_0xae9e69[_0x32de6e(0x2aa)]=checkMinimums(_0xae9e69));}_0xae9e69[_0x32de6e(0x22c)]=_0xae9e69[_0x32de6e(0x32a)]/_0xae9e69[_0x32de6e(0x244)]-0x1;if(_0xae9e69[_0x32de6e(0x31a)]==_0x32de6e(0x173)||_0xae9e69[_0x32de6e(0x31a)]==_0x32de6e(0x26f))_0xae9e69[_0x32de6e(0x31a)]='none';}),currentCoins[_0x5bff94(0x2d3)]((_0x3ac43e,_0x3a777f)=>_0x3ac43e[_0x5bff94(0x22c)]<_0x3a777f[_0x5bff94(0x22c)]?0x1:_0x3a777f[_0x5bff94(0x22c)]<_0x3ac43e['delta']?-0x1:0x0);const _0x19cad6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x19cad6[_0x5bff94(0x1af)],'usd':_0x19cad6['usd'],'portfolio':JSON[_0x5bff94(0x209)](currentCoins),'threshold':_0x24a652},proxyEmit(_0x5bff94(0x288),{'serverversion':serverversion,'balances':lastBalances});if(_0x367bc5){if(config[_0x5bff94(0x262)])headlessMode({'portfolio':currentCoins,'threshold':_0x24a652});else{if(lockOrders==ORDERS[_0x5bff94(0x2b1)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x24a652});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x283b02=getNormalizedPerformance();getStartingBalances(_0x283b02),emitPerformance(_0x283b02);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x209600=_0x521a92;if(!lastBalances)return;let _0x1f47f4=[],_0x44528a,_0xf9bb0c=JSON[_0x209600(0x22a)](lastBalances[_0x209600(0x2c6)]);_0xf9bb0c[_0x209600(0x2d3)]((_0x4c132e,_0x397dbc)=>_0x4c132e[_0x209600(0x242)]>_0x397dbc[_0x209600(0x242)]?0x1:_0x397dbc['coin']>_0x4c132e['coin']?-0x1:0x0),_0xf9bb0c[_0x209600(0x30d)](_0x55a1cf=>{const _0x465e51=_0x209600;let _0x38ec95={'coin':_0x55a1cf['coin'],'number':_0x55a1cf[_0x465e51(0x16c)],'price':_0x55a1cf[_0x465e51(0x196)]};_0x1f47f4[_0x465e51(0x2b5)](_0x38ec95);});const _0x540aa7=await getFiat();_0x44528a={'date':lastBalances[_0x209600(0x235)][_0x209600(0x2c0)]('\x20')[0x0],'eur':_0x540aa7[_0x209600(0x1af)],'usd':_0x540aa7[_0x209600(0x1e8)],'coins':_0x1f47f4};let _0xff6be3=dbPerformance['get'](_0x209600(0x2b0))['find']({'date':_0x44528a[_0x209600(0x2d2)]})[_0x209600(0x218)]();_0xff6be3?_0x44528a[_0x209600(0x2d2)]!=config[_0x209600(0x297)]&&dbPerformance[_0x209600(0x29b)](_0x209600(0x2b0))[_0x209600(0x198)]({'date':_0x44528a[_0x209600(0x2d2)]})[_0x209600(0x2c5)](_0x44528a)[_0x209600(0x255)]():dbPerformance['get']('data')['push'](_0x44528a)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x57780b=_0x521a92;let _0x1d14e0=[];if(dbPerformance[_0x57780b(0x17b)](_0x57780b(0x2b0))['value']()){let _0x3b3066=dbPerformance[_0x57780b(0x29b)](_0x57780b(0x2b0))[_0x57780b(0x245)]()[_0x57780b(0x265)](_0x206118=>{const _0x2fda80=_0x57780b;if(_0x206118[_0x2fda80(0x194)]['length']==0x0)return![];else return!![];})[_0x57780b(0x28b)](_0x57780b(0x2d2))[_0x57780b(0x218)](),_0x2e01af=[...config[_0x57780b(0x259)]];_0x2e01af[_0x57780b(0x2d3)]((_0x220258,_0x82963f)=>_0x220258[_0x57780b(0x2d2)]>_0x82963f[_0x57780b(0x2d2)]?-0x1:_0x82963f[_0x57780b(0x2d2)]>_0x220258[_0x57780b(0x2d2)]?0x1:0x0);let _0xfb9d7c=0x1,_0x30bc6f=[],_0x123bb8=0x0;_0x3b3066[_0x57780b(0x1c0)]()[_0x57780b(0x208)]()[_0x57780b(0x30d)]((_0x56ba41,_0x5e3a5d)=>{const _0x1d802d=_0x57780b;if(_0x2e01af[_0x123bb8]){if(_0x3b3066[_0x3b3066[_0x1d802d(0x20f)]-_0x5e3a5d]&&_0x2e01af[_0x123bb8]['date']==_0x3b3066[_0x3b3066[_0x1d802d(0x20f)]-_0x5e3a5d]['date']){if(_0x5e3a5d<_0x3b3066['length']){let _0x5d59e6=0x0,_0x4bd0df=0x0;_0x3b3066[_0x3b3066[_0x1d802d(0x20f)]-_0x5e3a5d][_0x1d802d(0x194)]['forEach'](_0x39bd05=>{const _0x57185e=_0x1d802d;_0x4bd0df+=_0x39bd05[_0x57185e(0x16c)]*_0x39bd05[_0x57185e(0x1ed)];}),_0x2e01af[_0x123bb8]['changes'][_0x1d802d(0x30d)](_0x4a2083=>{const _0x4b3dfa=_0x1d802d;_0x5d59e6+=_0x4a2083['number']*_0x4a2083[_0x4b3dfa(0x1ed)];}),_0xfb9d7c*=_0x5d59e6/(_0x4bd0df-_0x5d59e6)+0x1;}_0x123bb8++;}}let _0x2cb18b=0x0;_0x56ba41['coins'][_0x1d802d(0x30d)](_0x14379d=>{const _0x5a7ffc=_0x1d802d;_0x2cb18b+=_0x14379d[_0x5a7ffc(0x16c)]*_0x14379d['price'];}),_0x30bc6f[_0x3b3066[_0x1d802d(0x20f)]-_0x5e3a5d-0x1]=_0x2cb18b*(_0xfb9d7c-0x1);});let _0x1f0ed1=[];_0x2e01af=[...config[_0x57780b(0x259)]]||[];let _0xd4c399=0x0;_0x123bb8=0x0,_0x3b3066[_0x57780b(0x30d)]((_0xde3044,_0x196c49)=>{const _0x5cc707=_0x57780b;if(_0x2e01af[_0x123bb8]){const _0x54c11a=fns[_0x5cc707(0x22a)](_0x2e01af[_0x123bb8]['date'],_0x5cc707(0x258),new Date()),_0x3431b4=fns[_0x5cc707(0x22a)](_0xde3044[_0x5cc707(0x2d2)],_0x5cc707(0x258),new Date());if(fns['isEqual'](_0x54c11a,_0x3431b4)){let _0x1d1a5b=0x0;_0x2e01af[_0x123bb8][_0x5cc707(0x1dc)]['forEach'](_0x2f17eb=>{const _0x506c82=_0x5cc707;!_0x1f0ed1[_0x2f17eb[_0x506c82(0x242)]]?_0x1f0ed1[_0x2f17eb[_0x506c82(0x242)]]=_0x2f17eb[_0x506c82(0x16c)]:(_0x1d1a5b=_0x1f0ed1[_0x2f17eb[_0x506c82(0x242)]],_0x1f0ed1[_0x2f17eb[_0x506c82(0x242)]]+=_0x2f17eb[_0x506c82(0x16c)]);const _0x2d81e8=_0xde3044[_0x506c82(0x194)][_0x506c82(0x198)](_0x3f8d0f=>_0x3f8d0f['coin']==_0x2f17eb['coin']);(!_0x2d81e8||_0x2d81e8[_0x506c82(0x16c)]==0x0)&&(_0xd4c399+=(-_0x2f17eb[_0x506c82(0x16c)]-_0x1d1a5b)*_0x2f17eb[_0x506c82(0x1ed)]);}),_0x123bb8++;}}_0xde3044[_0x5cc707(0x194)][_0x5cc707(0x30d)]((_0x4b791d,_0x1038d2)=>{const _0x2450f2=_0x5cc707;_0x1f0ed1[_0x4b791d[_0x2450f2(0x242)]]&&(_0x4b791d[_0x2450f2(0x1cc)]=_0x1f0ed1[_0x4b791d['coin']]);}),_0x1d14e0[_0x5cc707(0x2b5)]({'date':_0xde3044[_0x5cc707(0x2d2)],'eur':_0xde3044['eur'],'usd':_0xde3044['usd'],'offset':_0x30bc6f[_0x196c49],'netoffset':_0xd4c399,'coins':_0xde3044[_0x5cc707(0x194)]});});}return _0x1d14e0;}function emitPerformance(_0x1ff746){const _0x2ed63f=_0x521a92;_0x1ff746['length']!==0x0?(proxyEmit('performance',_0x1ff746),lastPerformanceEmitted=getDate()):proxyEmit(_0x2ed63f(0x309),[]);}function getPerf(_0x429f81,_0x28de8e){const _0x1c2467=_0x521a92;let _0x3fe77e=0x0,_0x48df0c=0x0,_0x68ddec=0x0;_0x429f81['coins']['forEach'](_0x44515f=>{const _0xd88bc1=_0x1fd5;_0x3fe77e+=_0x44515f[_0xd88bc1(0x16c)]*_0x44515f[_0xd88bc1(0x1ed)];});_0x28de8e&&(_0x3fe77e+=_0x429f81[_0x1c2467(0x312)]);if(config[_0x1c2467(0x249)]===_0x1c2467(0x253)||config[_0x1c2467(0x249)]===_0x1c2467(0x27b)||config[_0x1c2467(0x249)]===_0x1c2467(0x178))_0x48df0c=_0x3fe77e*_0x429f81[_0x1c2467(0x1af)],_0x68ddec=_0x3fe77e*_0x429f81[_0x1c2467(0x1e8)];else{if(usdBasecoins[_0x1c2467(0x243)](config[_0x1c2467(0x249)]))_0x48df0c=_0x3fe77e*_0x429f81[_0x1c2467(0x1af)]/_0x429f81[_0x1c2467(0x1e8)],_0x68ddec=_0x3fe77e;else config[_0x1c2467(0x249)]===_0x1c2467(0x26b)&&(_0x48df0c=_0x3fe77e,_0x68ddec=_0x3fe77e*_0x429f81[_0x1c2467(0x1e8)]/_0x429f81['eur']);}return[_0x3fe77e,_0x48df0c,_0x68ddec];}function getKPIs(_0x368146,_0x181ccb=_0x521a92(0x26b)){const _0x335941=_0x521a92,_0x4a5501=config[_0x335941(0x249)],_0x3392c8=lastBalances,_0x3ffaf4=currentCoins,_0x440616=getNormalizedPerformance(),_0x5a6a61=_0x368146===_0x335941(0x249)?_0x4a5501:_0x368146==='fiat'||_0x368146===_0x335941(0x1ad)?_0x181ccb:_0x335941(0x22b)+_0x4a5501,_0x20b615=_0x368146===_0x335941(0x18c)?_0x335941(0x26a):_0x368146===_0x335941(0x1ad)?'Net\x20effect':_0x5a6a61+_0x335941(0x304),_0x47b33e=_0x368146===_0x335941(0x18c)||_0x368146===_0x335941(0x1ad)?_0x335941(0x26a):_0x5a6a61+_0x335941(0x175);let _0x1197bc=0x0;_0x3ffaf4['forEach'](_0x5238d9=>{_0x1197bc+=_0x5238d9['number']*_0x5238d9['last'];});if(_0x368146===_0x335941(0x23d)||_0x368146==='net-fiat'){if(_0x4a5501==='BTC'||_0x4a5501===_0x335941(0x27b)||_0x4a5501===_0x335941(0x178))_0x1197bc=_0x1197bc*(_0x181ccb==='EUR'?_0x3392c8[_0x335941(0x1af)]:_0x3392c8[_0x335941(0x1e8)]);else{if(usdBasecoins[_0x335941(0x243)](_0x4a5501))_0x1197bc=_0x1197bc*(_0x181ccb===_0x335941(0x26b)?_0x3392c8[_0x335941(0x1af)]/_0x3392c8[_0x335941(0x1e8)]:0x1);else _0x4a5501==='EUR'&&(_0x1197bc=_0x1197bc*(_0x181ccb==='EUR'?0x1:_0x3392c8[_0x335941(0x1e8)]/_0x3392c8['eur']));}}let _0x1b0111;if(_0x1197bc!==0x0){if(_0x368146===_0x335941(0x249))_0x1b0111=(_0x1197bc/startingBalances[_0x335941(0x249)]-0x1)*0x64;else{if(_0x181ccb===_0x335941(0x26b))_0x1b0111=(_0x1197bc/startingBalances[_0x335941(0x1af)]-0x1)*0x64;else _0x1b0111=(_0x1197bc/startingBalances[_0x335941(0x1e8)]-0x1)*0x64;}let _0x3f6420=0x0;if(startingBalances['coins'])_0x3ffaf4['forEach'](_0x5333bb=>{const _0x573e73=_0x335941;let _0x5a1053=startingBalances[_0x573e73(0x194)][_0x573e73(0x198)](_0x432860=>_0x432860[_0x573e73(0x242)]===_0x5333bb[_0x573e73(0x242)]);if(_0x5a1053&&_0x5a1053[_0x573e73(0x242)]&&_0x5333bb['number']!==0x0)_0x3f6420+=_0x5a1053[_0x573e73(0x16c)]*_0x5333bb[_0x573e73(0x196)];});let _0x567b48=0x0;if(_0x440616[_0x335941(0x20f)]!==0x0){let _0x3b4e32=_0x440616[_0x440616[_0x335941(0x20f)]-0x1];_0x567b48=_0x3b4e32[_0x335941(0x1b9)];}_0x3f6420-=_0x567b48;_0x368146===_0x335941(0x18c)&&(_0x1b0111=(_0x1197bc-_0x3f6420)/startingBalances['basecoin']*0x64,_0x1197bc=_0x1197bc-_0x3f6420);if(_0x368146==='net-fiat'){let _0x128618=_0x181ccb===_0x335941(0x26b)?startingBalances[_0x335941(0x1af)]:startingBalances[_0x335941(0x1e8)];if(_0x4a5501==='BTC'||_0x4a5501===_0x335941(0x27b)||_0x4a5501===_0x335941(0x178))_0x3f6420=_0x181ccb===_0x335941(0x26b)?_0x3f6420*_0x3392c8[_0x335941(0x1af)]:_0x3f6420*_0x3392c8[_0x335941(0x1e8)];else{if(usdBasecoins[_0x335941(0x243)](_0x4a5501))_0x3f6420=_0x181ccb==='EUR'?_0x3f6420*_0x3392c8[_0x335941(0x1af)]/_0x3392c8[_0x335941(0x1e8)]:_0x3f6420;else _0x4a5501===_0x335941(0x26b)&&(_0x3f6420=_0x181ccb==='EUR'?_0x3f6420:_0x3f6420*_0x3392c8[_0x335941(0x1e8)]/_0x3392c8[_0x335941(0x1af)]);}_0x1b0111=(_0x1197bc-_0x3f6420)/_0x128618*0x64,_0x1197bc=_0x1197bc-_0x3f6420;}if(_0x1b0111){if(_0x1b0111<0x64)_0x1b0111=_0x1b0111[_0x335941(0x2cd)](0x2);else{if(_0x1b0111<0x3e8)_0x1b0111=_0x1b0111['toFixed'](0x1);else _0x1b0111=_0x1b0111[_0x335941(0x2cd)](0x0);}}else _0x1b0111=Number('0')['toFixed'](0x2);if(_0x1197bc){if(Math[_0x335941(0x32d)](_0x1197bc)<0.000001)_0x1197bc=_0x1197bc['toFixed'](0x2);else{if(Math[_0x335941(0x32d)](_0x1197bc)<0.1)_0x1197bc=_0x1197bc[_0x335941(0x2cd)](0x6);else{if(Math[_0x335941(0x32d)](_0x1197bc)<0x1)_0x1197bc=_0x1197bc[_0x335941(0x2cd)](0x5);else{if(Math[_0x335941(0x32d)](_0x1197bc)<0xa)_0x1197bc=_0x1197bc[_0x335941(0x2cd)](0x4);else{if(Math[_0x335941(0x32d)](_0x1197bc)<0x64)_0x1197bc=_0x1197bc[_0x335941(0x2cd)](0x3);else{if(Math['abs'](_0x1197bc)<0x3e8)_0x1197bc=_0x1197bc['toFixed'](0x2);else _0x1197bc=_0x1197bc[_0x335941(0x2cd)](0x2);}}}}}}else _0x1197bc=Number('0')[_0x335941(0x2cd)](0x2);}else _0x1b0111=Number('0')[_0x335941(0x2cd)](0x2);return{'value':_0x1197bc,'change':_0x1b0111,'leftTxt':_0x20b615,'rightTxt':_0x47b33e};}async function getStartingBalances(_0x1ac110,_0x5ab91e=!![]){const _0x714e83=_0x521a92;if(_0x1ac110['length']!==0x0){const [_0x6ac522,_0x1cbe44,_0x42ed00]=getPerf(_0x1ac110[0x0],!![]);let _0xf2be49=[];config[_0x714e83(0x2c6)][_0x714e83(0x30d)](_0x8fab81=>{const _0x1b23ee=_0x714e83;let _0x1ed213=0x0,_0x4a1349;config['liquidity'][_0x1b23ee(0x30d)](_0x229736=>{const _0x22ace8=_0x1b23ee;let _0x36486e=_0x229736[_0x22ace8(0x1dc)]['find'](_0x551d42=>_0x551d42['coin']==_0x8fab81[_0x22ace8(0x242)]);if(_0x36486e){_0x1ed213+=_0x36486e[_0x22ace8(0x16c)];if(!_0x4a1349)_0x4a1349=_0x36486e[_0x22ace8(0x1ed)];}}),_0xf2be49[_0x1b23ee(0x2b5)]({'coin':_0x8fab81[_0x1b23ee(0x242)],'number':_0x1ed213,'initialprice':_0x4a1349});});const _0x17188d={'basecoin':_0x6ac522,'eur':_0x1cbe44,'usd':_0x42ed00,'coins':_0xf2be49};if(_0x5ab91e)proxyEmit(_0x714e83(0x27d),_0x17188d);startingBalances=_0x17188d;}}function headlessMode(_0x58a19a){const _0x4d04a5=_0x521a92;let _0x3756ad=_0x58a19a[_0x4d04a5(0x2c6)],_0x136045=_0x58a19a[_0x4d04a5(0x1df)],_0x5624ba=[];for(let _0x201cac of _0x3756ad){if(_0x201cac[_0x4d04a5(0x242)]!=config[_0x4d04a5(0x249)]){if(_0x201cac[_0x4d04a5(0x22c)]>=_0x136045/0x64){if(_0x201cac[_0x4d04a5(0x2aa)])_0x5624ba[_0x4d04a5(0x2b5)](_0x201cac);}else{if(_0x201cac[_0x4d04a5(0x22c)]<=-_0x136045/0x64){if(_0x201cac['valid'])_0x5624ba[_0x4d04a5(0x2b5)](_0x201cac);}}}}_0x5624ba[_0x4d04a5(0x20f)]>0x0&&(lockOrders==ORDERS[_0x4d04a5(0x2b1)]&&!coolingDown&&_0x5624ba['forEach'](_0x5997a4=>{const _0x54de5a=_0x4d04a5;logger[_0x54de5a(0x1d0)](_0x54de5a(0x23c)+_0x5997a4[_0x54de5a(0x242)]+'\x20'+_0x5997a4['number']+'\x20'+_0x5997a4[_0x54de5a(0x196)]+'\x20'+_0x5997a4[_0x54de5a(0x32a)]+'%\x20'+_0x5997a4[_0x54de5a(0x244)]+'%\x20'+(0x64*_0x5997a4['delta'])[_0x54de5a(0x2cd)](0x2)+_0x54de5a(0x1dd)+_0x136045[_0x54de5a(0x2cd)](0x2)+'%)');}),placeOrder(_0x5624ba));}function notifyBalance(_0x2fc74a){const _0x1d4f2b=_0x521a92;let _0x69c89d=_0x2fc74a['portfolio'],_0x11ef17=_0x2fc74a[_0x1d4f2b(0x1df)],_0x1d75d5=[];for(let _0x58d572 of _0x69c89d){if(_0x58d572[_0x1d4f2b(0x242)]!=config[_0x1d4f2b(0x249)]){if(_0x58d572[_0x1d4f2b(0x22c)]>=_0x11ef17/0x64){if(_0x58d572[_0x1d4f2b(0x2aa)])_0x1d75d5['push'](_0x58d572);}else{if(_0x58d572[_0x1d4f2b(0x22c)]<=-_0x11ef17/0x64){if(_0x58d572[_0x1d4f2b(0x2aa)])_0x1d75d5['push'](_0x58d572);}}}}if(_0x1d75d5[_0x1d4f2b(0x20f)]>0x0){let _0x48e282=_0x1d75d5['map'](_0x19ba2e=>_0x19ba2e[_0x1d4f2b(0x242)]);_0x48e282['sort']();let _0x3b0cf9=_0x48e282[_0x1d4f2b(0x1de)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1d4f2b(0x1b0),_0x1d4f2b(0x1ea));lastCoinsToBalance=_0x3b0cf9;}}function symbolToCoin(_0x3934f7){const _0x47d60e=_0x521a92;let _0xa17c47;if(_0x3934f7[_0x47d60e(0x243)]('/'+config['basecoin']))_0xa17c47=_0x3934f7['replace']('/'+config[_0x47d60e(0x249)],'');if(_0x3934f7[_0x47d60e(0x243)](config['basecoin']+'/'))_0xa17c47=_0x3934f7[_0x47d60e(0x19f)](config[_0x47d60e(0x249)]+'/','');return _0xa17c47;}async function unlockOrders(){const _0x5a50fc=_0x521a92;if(allOrdersPlaced&&lockOrders==ORDERS[_0x5a50fc(0x311)]){logger[_0x5a50fc(0x1d0)](_0x5a50fc(0x246)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xfca292=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xfca292,setBlockTransactionDetection(![]),validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x5a50fc(0x2b1)],logger[_0x5a50fc(0x1d0)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x7fd540){const _0x2bfb85=_0x521a92;if(_0x7fd540)validateOrdersState=_0x7fd540;logger['debug'](_0x2bfb85(0x1bb)+validateOrdersState+_0x2bfb85(0x1e5)+(lockOrders==0x1?_0x2bfb85(0x224):lockOrders==0x2?_0x2bfb85(0x229):_0x2bfb85(0x250)));let _0x5a5b08=[],_0x3a5507=config[_0x2bfb85(0x2ff)]==_0x2bfb85(0x19a)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2bfb85(0x1e7)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x2bfb85(0x311)])return;logger[_0x2bfb85(0x1d0)](_0x2bfb85(0x313)+validateOrdersState),lastOrders['forEach'](_0x288697=>{const _0x3f4dae=_0x2bfb85;let _0x502f08=![];_0x288697[_0x3f4dae(0x173)]>0x0&&(_0x502f08=!![]),_0x5a5b08[_0x3f4dae(0x2b5)](_0x502f08),_0x502f08&&config['ordertype']!=_0x3f4dae(0x19a)&&logHistory('order','Order\x20filled:\x20'+_0x288697[_0x3f4dae(0x314)]+'\x20'+_0x288697[_0x3f4dae(0x17c)]+'\x20#'+formatResult(_0x288697[_0x3f4dae(0x173)],0x8)+'\x20@'+formatResult(_0x288697['price'],0x8));}),_0x5a5b08['forEach']((_0x1a6096,_0x2c403c)=>{const _0x4efb89=_0x2bfb85;if(_0x1a6096)lastOrders[_0x4efb89(0x247)](_0x2c403c,0x1);}),persistOpenOrders(lastOrders);const _0x4d29d8=coolingDown?_0x2bfb85(0x1a7):_0x2bfb85(0x214);if(validateOrdersState=='initial'){validateOrdersState=_0x2bfb85(0x28d);if(_0x5a5b08[_0x2bfb85(0x243)](![])){if(config[_0x2bfb85(0x2ff)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x2bfb85(0x28d)){if(_0x5a5b08['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x2bfb85(0x2ff)]==_0x2bfb85(0x19a)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x2bfb85(0x2a1))_0x5a5b08[_0x2bfb85(0x243)](![])&&(config['ordertype']==_0x2bfb85(0x19a)?logHistory(_0x2bfb85(0x257),_0x2bfb85(0x32e)+Math[_0x2bfb85(0x2a4)](_0x3a5507*validateOrderInterval/0xea60)+_0x2bfb85(0x1bc)+_0x4d29d8):(await cancelOrders(),logHistory(_0x2bfb85(0x257),_0x2bfb85(0x1c7)+Math[_0x2bfb85(0x2a4)](_0x3a5507*validateOrderInterval/0xea60)+_0x2bfb85(0x1bc)+_0x4d29d8))),await unlockOrders();else{if(validateOrdersState==_0x2bfb85(0x176)){if(config['ordertype']!=_0x2bfb85(0x19a))logHistory(_0x2bfb85(0x257),'No\x20more\x20open\x20orders\x20-\x20'+_0x4d29d8);await unlockOrders();}}}}}async function cancelOrders(){const _0x2438db=_0x521a92;lastOrders[_0x2438db(0x30d)](async _0x1e35b8=>{const _0x35d149=_0x2438db;try{const _0x2c54b7=await exchange[_0x35d149(0x1a6)](_0x1e35b8[_0x35d149(0x287)],_0x1e35b8['symbol']);}catch(_0x57c575){if(_0x57c575[_0x35d149(0x205)]()[_0x35d149(0x243)]('OrderNotFound')){}else await handleError(_0x57c575,_0x35d149(0x29a));}});}async function initCoinResults(_0x4a3e08){const _0x13cd8e=_0x521a92;_0x4a3e08?logger[_0x13cd8e(0x1d0)](_0x13cd8e(0x237)+_0x4a3e08):logger[_0x13cd8e(0x1d0)]('Initializing\x20coin\x20results'),config[_0x13cd8e(0x2c6)][_0x13cd8e(0x30d)](_0x1f55fe=>{const _0xb61302=_0x13cd8e;if(!_0x1f55fe['excluded']&&_0x1f55fe[_0xb61302(0x242)]!=config[_0xb61302(0x249)]){const _0x4e7653=currentCoins['find'](_0x345a4a=>_0x345a4a['coin']==_0x1f55fe[_0xb61302(0x242)]),_0x47a327=gTicker[noslash(_0x1f55fe['symbol'])];let _0xf60b44=_0x4e7653?_0x4e7653[_0xb61302(0x16c)]:null,_0x32bbfa=_0x1f55fe['reverse']?0x1/_0x47a327:_0x47a327,_0x1b2d25;config[_0xb61302(0x259)]['forEach'](_0x5728d0=>{const _0x5d5e33=_0xb61302;!_0x1b2d25&&(_0x1b2d25=_0x5728d0[_0x5d5e33(0x1dc)]['find'](_0x1b0f80=>_0x1b0f80[_0x5d5e33(0x242)]==_0x1f55fe[_0x5d5e33(0x242)]),_0x1b2d25&&(_0xf60b44=_0x1b2d25['number'],_0x32bbfa=_0x1b2d25[_0x5d5e33(0x1ed)]));});let _0xbe56f4=dbCoinResults[_0xb61302(0x29b)](_0xb61302(0x194))['find']({'coin':_0x1f55fe[_0xb61302(0x242)]})[_0xb61302(0x218)]();if(!_0xbe56f4){const _0x1a1e66={'coin':_0x1f55fe[_0xb61302(0x242)],'number':_0xf60b44,'breakeven':_0x32bbfa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xb61302(0x29b)](_0xb61302(0x194))[_0xb61302(0x2b5)](_0x1a1e66)[_0xb61302(0x255)]();}else{if(_0x4a3e08&&_0x1f55fe[_0xb61302(0x242)]==_0x4a3e08){const _0x37b998={'coin':_0x1f55fe[_0xb61302(0x242)],'number':_0xf60b44,'breakeven':_0x32bbfa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0xb61302(0x194))[_0xb61302(0x198)]({'coin':_0x1f55fe['coin']})[_0xb61302(0x2c5)](_0x37b998)[_0xb61302(0x255)]();}}}});}async function updateCoinResults(_0x402ddb,_0x31bae0=![]){const _0x44da98=_0x521a92;let _0x406710,_0x199ace,_0x406551,_0x34e9a0,_0x43b06d,_0x172ed9,_0x18d305=dbCoinResults[_0x44da98(0x29b)](_0x44da98(0x194))['find']({'coin':_0x402ddb[_0x44da98(0x242)]})[_0x44da98(0x218)](),_0x3d12c9=![];_0x18d305&&Object[_0x44da98(0x2ce)](_0x18d305)['forEach'](([_0x555020,_0x18a7c2])=>{if(_0x18a7c2==null)_0x3d12c9=!![];});(!_0x18d305||_0x3d12c9)&&(await initCoinResults(_0x402ddb['coin']),_0x18d305=dbCoinResults[_0x44da98(0x29b)](_0x44da98(0x194))[_0x44da98(0x198)]({'coin':_0x402ddb['coin']})[_0x44da98(0x218)]());_0x402ddb[_0x44da98(0x208)]&&(_0x172ed9={'filled':_0x402ddb[_0x44da98(0x173)]*_0x402ddb[_0x44da98(0x1ed)],'amount':_0x402ddb['filled']*_0x402ddb[_0x44da98(0x1ed)],'side':_0x402ddb[_0x44da98(0x17c)]=='sell'?_0x44da98(0x2de):_0x44da98(0x2a6),'price':0x1/_0x402ddb[_0x44da98(0x1ed)]},_0x402ddb={..._0x402ddb,..._0x172ed9});_0x31bae0?_0x199ace=_0x402ddb[_0x44da98(0x17c)]==_0x44da98(0x2de)?_0x18d305[_0x44da98(0x16c)]+_0x402ddb[_0x44da98(0x173)]:_0x18d305[_0x44da98(0x16c)]-_0x402ddb[_0x44da98(0x173)]:_0x199ace=await getCoinNumber(_0x402ddb[_0x44da98(0x242)]);if(_0x402ddb[_0x44da98(0x282)]&&_0x402ddb[_0x44da98(0x282)][_0x44da98(0x1f8)]==config[_0x44da98(0x249)])_0x406710=Number(_0x402ddb[_0x44da98(0x282)]['cost']);else{if(_0x402ddb['fee']&&_0x402ddb[_0x44da98(0x282)][_0x44da98(0x1f8)]=='BNB'&&!_0x31bae0&&config[_0x44da98(0x249)]!=_0x44da98(0x178))_0x406710=Number(_0x402ddb['fee'][_0x44da98(0x177)])*gTicker[_0x44da98(0x2bc)+config[_0x44da98(0x249)]];else _0x406710=defaultFee*_0x402ddb[_0x44da98(0x173)]*_0x402ddb[_0x44da98(0x1ed)];}_0x402ddb[_0x44da98(0x17c)]==_0x44da98(0x2de)?(_0x406551=_0x199ace!=0x0?(_0x18d305[_0x44da98(0x183)]*_0x18d305[_0x44da98(0x16c)]+_0x402ddb[_0x44da98(0x1ed)]*(_0x199ace-_0x18d305[_0x44da98(0x16c)])+_0x406710)/_0x199ace:0x0,_0x34e9a0=_0x18d305[_0x44da98(0x1e0)]):(_0x406551=_0x199ace!=0x0?(_0x18d305['breakeven']*_0x18d305[_0x44da98(0x16c)]-_0x402ddb[_0x44da98(0x1ed)]*(_0x18d305['number']-_0x199ace)+_0x406710)/_0x199ace:0x0,_0x34e9a0=_0x18d305[_0x44da98(0x1e0)]+(_0x402ddb[_0x44da98(0x1ed)]-_0x18d305['breakeven'])*_0x402ddb[_0x44da98(0x173)]);_0x43b06d=(_0x402ddb['price']-_0x406551-_0x406710/_0x402ddb[_0x44da98(0x173)])*_0x199ace;let _0x400949={'coin':_0x402ddb[_0x44da98(0x242)],'number':_0x199ace,'breakeven':formatResult(_0x406551,0x8),'realized':formatResult(_0x34e9a0,0x8),'unrealized':formatResult(_0x43b06d,0x8),'fees':formatResult(_0x18d305[_0x44da98(0x1f4)]+_0x406710,0x8),'sells':_0x402ddb[_0x44da98(0x17c)]==_0x44da98(0x2a6)?_0x18d305[_0x44da98(0x329)]+0x1:_0x18d305[_0x44da98(0x329)],'buys':_0x402ddb[_0x44da98(0x17c)]==_0x44da98(0x2de)?_0x18d305[_0x44da98(0x276)]+0x1:_0x18d305[_0x44da98(0x276)]};dbCoinResults['get']('coins')[_0x44da98(0x198)]({'coin':_0x402ddb[_0x44da98(0x242)]})[_0x44da98(0x2c5)](_0x400949)[_0x44da98(0x255)]();if(!_0x31bae0){if(_0x402ddb[_0x44da98(0x282)]&&_0x402ddb[_0x44da98(0x282)][_0x44da98(0x1f8)]==_0x44da98(0x2bc)){const _0xfdd7f2=currentCoins[_0x44da98(0x198)](_0x176a3e=>_0x176a3e['coin']==_0x44da98(0x2bc));if(_0xfdd7f2){let _0x47d3f6=dbCoinResults[_0x44da98(0x29b)]('coins')[_0x44da98(0x198)]({'coin':_0x44da98(0x2bc)})[_0x44da98(0x218)]();_0x400949={..._0x47d3f6,'number':_0xfdd7f2[_0x44da98(0x16c)]},dbCoinResults[_0x44da98(0x29b)](_0x44da98(0x194))[_0x44da98(0x198)]({'coin':_0x44da98(0x2bc)})[_0x44da98(0x2c5)](_0x400949)[_0x44da98(0x255)]();}}}}async function placeOrder(_0x1bc5af){const _0x2ec4a1=_0x521a92,_0x3a2341=config[_0x2ec4a1(0x2ff)]==_0x2ec4a1(0x19a)?_0x2ec4a1(0x19a):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x2ec4a1(0x311)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x2ec4a1(0x1cc);let _0x206fcc=![];lastOrders=[];for(const _0x41c9a4 of _0x1bc5af){let _0x4498ce,_0x13bcc1,_0x590d0d,_0x790c89,_0x4364de,_0x40dbd9=_0x41c9a4[_0x2ec4a1(0x314)];try{const _0x2e5845=await exchange[_0x2ec4a1(0x2fd)](_0x40dbd9);_0x4498ce=_0x41c9a4[_0x2ec4a1(0x208)]?0x1/_0x41c9a4[_0x2ec4a1(0x196)]:_0x41c9a4[_0x2ec4a1(0x196)],_0x13bcc1=_0x2e5845[_0x2ec4a1(0x1ef)],_0x590d0d=_0x2e5845[_0x2ec4a1(0x300)];_0x41c9a4[_0x2ec4a1(0x208)]?(_0x790c89=_0x41c9a4[_0x2ec4a1(0x17c)]==_0x2ec4a1(0x2de)?_0x2ec4a1(0x2a6):_0x2ec4a1(0x2de),_0x4364de=Math[_0x2ec4a1(0x32d)](_0x41c9a4[_0x2ec4a1(0x23a)])/_0x4498ce):(_0x790c89=_0x41c9a4[_0x2ec4a1(0x17c)],_0x4364de=Math[_0x2ec4a1(0x32d)](_0x41c9a4[_0x2ec4a1(0x23a)]));_0x3a2341==_0x2ec4a1(0x2a5)&&(config['ordertype']==_0x2ec4a1(0x1fc)&&(_0x4498ce=_0x790c89==_0x2ec4a1(0x2de)?_0x13bcc1:_0x590d0d),config[_0x2ec4a1(0x2ff)]==_0x2ec4a1(0x220)&&(_0x4498ce=_0x790c89=='buy'?_0x590d0d:_0x13bcc1));_0x4364de=formatResult(_0x4364de,0x8),_0x4498ce=formatResult(_0x4498ce,0x8);const _0x4f0b18=_0x790c89==_0x2ec4a1(0x2a6)?config['emojisell']?String[_0x2ec4a1(0x1d3)]('0x'+config['emojisell'])+'\x20':'':config[_0x2ec4a1(0x303)]?String[_0x2ec4a1(0x1d3)]('0x'+config[_0x2ec4a1(0x303)])+'\x20':'',_0x9e57c0=_0x3a2341==_0x2ec4a1(0x19a)?'Market':config[_0x2ec4a1(0x2ff)]==_0x2ec4a1(0x1fc)?_0x2ec4a1(0x26d):_0x2ec4a1(0x26c),_0x5afc26=(Math[_0x2ec4a1(0x305)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x2ec4a1(0x205)]();lastOrders[_0x2ec4a1(0x2b5)]({'customId':_0x5afc26,'symbol':_0x40dbd9,'coin':_0x41c9a4[_0x2ec4a1(0x242)],'amount':_0x4364de,'price':_0x4498ce,'side':_0x790c89,'reverse':_0x41c9a4[_0x2ec4a1(0x208)],'filled':0x0});if(_0x3a2341=='market')logHistory(_0x2ec4a1(0x199),''+_0x4f0b18+_0x9e57c0+_0x2ec4a1(0x171)+_0x40dbd9+'\x20'+_0x790c89+'\x20#'+formatResult(_0x4364de,0x8)+'\x20@'+formatResult(_0x4498ce,0x8));else logHistory('order',''+_0x4f0b18+_0x9e57c0+_0x2ec4a1(0x171)+_0x40dbd9+'\x20'+_0x790c89+'\x20#'+formatResult(_0x4364de,0x8)+'\x20@'+formatResult(_0x4498ce,0x8));let _0x44127e;_0x3a2341==_0x2ec4a1(0x19a)?_0x790c89==_0x2ec4a1(0x2de)&&['Bybit',_0x2ec4a1(0x192),'Cex',_0x2ec4a1(0x2c7),_0x2ec4a1(0x25b)][_0x2ec4a1(0x243)](config[_0x2ec4a1(0x1b1)])?_0x44127e=await exchange[_0x2ec4a1(0x16b)](_0x40dbd9,_0x3a2341,_0x790c89,_0x4364de,_0x4498ce):_0x44127e=await exchange[_0x2ec4a1(0x16b)](_0x40dbd9,_0x3a2341,_0x790c89,_0x4364de,undefined):_0x44127e=await exchange[_0x2ec4a1(0x16b)](_0x40dbd9,_0x3a2341,_0x790c89,_0x4364de,_0x4498ce);logger[_0x2ec4a1(0x1d0)](_0x2ec4a1(0x204)+_0x44127e['id']+_0x2ec4a1(0x1ac)+_0x5afc26);const _0x4bcdae=lastOrders[_0x2ec4a1(0x20f)]-0x1;if(_0x4bcdae>=0x0&&lastOrders[_0x4bcdae][_0x2ec4a1(0x256)]==_0x5afc26){lastOrders[_0x4bcdae][_0x2ec4a1(0x287)]=_0x44127e['id'];if(_0x44127e[_0x2ec4a1(0x317)])lastOrders[_0x4bcdae][_0x2ec4a1(0x317)]=_0x44127e[_0x2ec4a1(0x317)];if(_0x44127e[_0x2ec4a1(0x1ed)])lastOrders[_0x4bcdae]['price']=_0x44127e[_0x2ec4a1(0x1ed)];lastOrders[_0x4bcdae][_0x2ec4a1(0x282)]=_0x44127e[_0x2ec4a1(0x282)];}if(config['cooldown']!=0x0){let _0x107f67=null;if(cooldownTracker[_0x2ec4a1(0x20f)]==config['cooldown']-0x1)_0x107f67=cooldownTracker[_0x2ec4a1(0x1e9)]();const _0x5f3c31=getTimeStamp();cooldownTracker[_0x2ec4a1(0x2b5)](_0x5f3c31);if(_0x107f67){const _0x18f994=fns[_0x2ec4a1(0x2d5)](new Date(_0x5f3c31),new Date(_0x107f67));if(_0x18f994<cooldownInterval){logHistory(_0x2ec4a1(0x2fa),_0x2ec4a1(0x228)+config[_0x2ec4a1(0x20c)]+_0x2ec4a1(0x2ad)+cooldownInterval/0x3c+_0x2ec4a1(0x17e)+cooldownPeriod/(0xe10*0x3e8)+_0x2ec4a1(0x181)),coolingDown=!![];break;}}}}catch(_0x43bacd){if(_0x43bacd[_0x2ec4a1(0x205)]()[_0x2ec4a1(0x243)](_0x2ec4a1(0x1c9)))lastOrders=lastOrders[_0x2ec4a1(0x265)](_0x58fcc6=>_0x58fcc6[_0x2ec4a1(0x314)]!=_0x40dbd9),logHistory(_0x2ec4a1(0x2fa),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x40dbd9),_0x206fcc=!![];else{if(_0x43bacd[_0x2ec4a1(0x205)]()[_0x2ec4a1(0x243)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x2ec4a1(0x265)](_0x29d52a=>_0x29d52a[_0x2ec4a1(0x314)]!=_0x40dbd9),logHistory(_0x2ec4a1(0x2fa),_0x2ec4a1(0x21a)+_0x40dbd9),_0x206fcc=!![];else{if(_0x43bacd[_0x2ec4a1(0x205)]()[_0x2ec4a1(0x243)](_0x2ec4a1(0x216)))lastOrders=lastOrders[_0x2ec4a1(0x265)](_0x266dc8=>_0x266dc8[_0x2ec4a1(0x314)]!=_0x40dbd9),logHistory('error',_0x2ec4a1(0x2ae)+_0x40dbd9),logger[_0x2ec4a1(0x1d0)](_0x43bacd),_0x206fcc=!![];else _0x43bacd[_0x2ec4a1(0x205)]()[_0x2ec4a1(0x243)](_0x2ec4a1(0x2be))?(lastOrders=lastOrders['filter'](_0xc9f628=>_0xc9f628[_0x2ec4a1(0x314)]!=_0x40dbd9),logHistory(_0x2ec4a1(0x2fa),_0x2ec4a1(0x22d)+_0x40dbd9),_0x206fcc=!![]):(lastOrders=lastOrders['filter'](_0x54de45=>_0x54de45[_0x2ec4a1(0x314)]!=_0x40dbd9),await handleError(_0x43bacd,'placeOrder()',_0x40dbd9));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2ec4a1(0x20f)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x42df1a=config[_0x2ec4a1(0x2ff)]==_0x2ec4a1(0x19a)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1f1f30=_0x2ec4a1;validateOrders(_0x1f1f30(0x2a1));},_0x42df1a);}else unlockOrders();_0x206fcc&&config[_0x2ec4a1(0x262)]&&(logHistory(_0x2ec4a1(0x2fa),_0x2ec4a1(0x2e6)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x2ec4a1(0x281)));}else{if(coolingDown)!config[_0x2ec4a1(0x262)]&&logHistory(_0x2ec4a1(0x2fa),_0x2ec4a1(0x2b2));else lockOrders!=ORDERS[_0x2ec4a1(0x2b1)]&&(!config[_0x2ec4a1(0x262)]&&(config[_0x2ec4a1(0x2ff)]==_0x2ec4a1(0x19a)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x2ec4a1(0x301))));}}function persistOpenOrders(_0x3d583b){const _0x1a5944=_0x521a92,_0x3a7ec6={...config,'openOrders':_0x3d583b};let _0x519fac=dbConfig[_0x1a5944(0x29b)]('bot')[_0x1a5944(0x198)]({'botID':botID})[_0x1a5944(0x218)]();_0x519fac&&dbConfig['get'](_0x1a5944(0x2d8))[_0x1a5944(0x198)]({'botID':botID})[_0x1a5944(0x2c5)](_0x3a7ec6)['write']();}function restoreOrders(){const _0x320b38=_0x521a92;let _0x2ab4de;config[_0x320b38(0x195)]&&allOpenOrders[_0x320b38(0x30d)](_0xa2fec3=>{const _0x1d24b8=_0x320b38,_0x42f1ab=config[_0x1d24b8(0x195)][_0x1d24b8(0x198)](_0x417d05=>_0x417d05['orderId']==_0xa2fec3['id']);_0x42f1ab&&(lastOrders[_0x1d24b8(0x2b5)](_0x42f1ab),_0x2ab4de=_0xa2fec3[_0x1d24b8(0x318)]);});if(lastOrders[_0x320b38(0x20f)]>0x0){lockOrders=ORDERS[_0x320b38(0x311)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1e4e15=new Date()['getTime'](),_0x373dd8=config[_0x320b38(0x2ff)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x320b38(0x1e7)]*0x3c*0x3e8;if(_0x2ab4de+_0x373dd8>_0x1e4e15){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xb562c6=_0x320b38;validateOrders(_0xb562c6(0x2a1));},_0x2ab4de+_0x373dd8-_0x1e4e15);}else validateOrders(_0x320b38(0x2a1));}}async function sendMetricsTelegram(){const _0x166ef6=_0x521a92;if(!coinsLoaded){process[_0x166ef6(0x233)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x423cc7=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x22346b='';if(config[_0x166ef6(0x2fb)])_0x22346b='<b>'+config[_0x166ef6(0x321)]+_0x166ef6(0x1b3);else _0x22346b=_0x166ef6(0x1a9)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x3a080a=getKPIs(_0x166ef6(0x249)),_0x5bc9e1=getKPIs(_0x166ef6(0x23d),config[_0x166ef6(0x23d)]),_0x1788b4=getKPIs(_0x166ef6(0x18c)),_0x2ab096=getKPIs(_0x166ef6(0x1ad),config[_0x166ef6(0x23d)]);_0x22346b+=_0x166ef6(0x1ff),_0x22346b+=_0x3a080a[_0x166ef6(0x230)]+_0x166ef6(0x2ee)+_0x3a080a[_0x166ef6(0x218)]+'\x0a',_0x22346b+=_0x3a080a['rightTxt']+':\x20'+_0x3a080a[_0x166ef6(0x32c)]+'%\x0a',_0x22346b+=_0x5bc9e1[_0x166ef6(0x230)]+'\x20:\x20'+_0x5bc9e1[_0x166ef6(0x218)]+'\x0a',_0x22346b+=_0x5bc9e1[_0x166ef6(0x18b)]+':\x20'+_0x5bc9e1[_0x166ef6(0x32c)]+'%\x0a',_0x22346b+=_0x1788b4['leftTxt']+':\x20'+_0x1788b4['value']+'\x20('+config[_0x166ef6(0x249)]+')\x0a',_0x22346b+=_0x1788b4['rightTxt']+':\x20'+_0x1788b4['change']+_0x166ef6(0x1dd)+config['basecoin']+')\x0a',_0x22346b+=_0x2ab096[_0x166ef6(0x230)]+':\x20'+_0x2ab096['value']+'\x20('+config[_0x166ef6(0x23d)]+')\x0a',_0x22346b+=_0x2ab096[_0x166ef6(0x18b)]+':\x20'+_0x2ab096[_0x166ef6(0x32c)]+_0x166ef6(0x1dd)+config[_0x166ef6(0x23d)]+')\x0a',_0x22346b+=_0x166ef6(0x332),process[_0x166ef6(0x233)]({'telegrammsg':_0x22346b},_0x5768ac=>{});}async function sendPortfolioTelegram(){const _0x48ee76=_0x521a92;if(!coinsLoaded||!currentCoins[0x0][_0x48ee76(0x32a)]){process['send']({'telegrammsg':_0x48ee76(0x270)},_0x14503f=>{});return;}let _0x538766='';if(config[_0x48ee76(0x2fb)])_0x538766=_0x48ee76(0x21c)+config[_0x48ee76(0x321)]+_0x48ee76(0x16a);else _0x538766='<b>Bot\x20'+botID+_0x48ee76(0x16a);_0x538766+=_0x48ee76(0x1ff),_0x538766+=_0x48ee76(0x28a),_0x538766+=_0x48ee76(0x187),_0x538766+=_0x48ee76(0x28a),currentCoins['forEach'](_0x49901f=>{const _0x38184d=_0x48ee76;_0x538766+=_0x49901f['coin'][_0x38184d(0x2c2)](0x7)+'|\x20'+formatPad(_0x49901f[_0x38184d(0x32a)],0x2,0x6)+'|\x20'+formatPad(_0x49901f[_0x38184d(0x244)],0x2,0x6)+'|\x20'+formatPad(_0x49901f[_0x38184d(0x22c)]*0x64,0x2,0x6)+'\x0a';}),_0x538766+='</pre>',process[_0x48ee76(0x233)]({'telegrammsg':_0x538766},_0x3cc0e5=>{});}function formatPad(_0x12b149,_0x4d14e2,_0x2b7c16){const _0x2bf1a2=_0x521a92,_0x2c14f2=formatResultString(_0x12b149,_0x4d14e2);return _0x2c14f2?_0x2c14f2[_0x2bf1a2(0x1e3)](_0x2b7c16):''[_0x2bf1a2(0x1e3)](_0x2b7c16);}function logHistory(_0x3e8f85,_0x1ca906,_0x45d8f2=''){const _0xb27e48=_0x521a92;logger['full'](''+_0x1ca906);let _0x1933c1={'time':getTimeStamp(),'type':_0x3e8f85,'event':_0x1ca906};dbLogs['get'](_0xb27e48(0x1eb))[_0xb27e48(0x2b5)](_0x1933c1)['write']();if(_0x45d8f2=='')_0x45d8f2=_0x1ca906;proxyEmit('event',{'log':_0x1933c1,'summary':_0x45d8f2}),process[_0xb27e48(0x233)]({'telegram':{..._0x1933c1,'botname':config[_0xb27e48(0x321)],'showname':config['showname']}},_0x2f3d46=>{});}function emitHistory(_0x47ef00={}){const _0x3640d3=_0x521a92;Object[_0x3640d3(0x1fd)](_0x47ef00)[_0x3640d3(0x20f)]==0x0&&(_0x47ef00={'type':[_0x3640d3(0x199),_0x3640d3(0x231)],'event':'','page':0x1});if(_0x47ef00[_0x3640d3(0x225)][_0x3640d3(0x243)]('event'))_0x47ef00[_0x3640d3(0x225)]['splice'](_0x47ef00[_0x3640d3(0x225)]['indexOf'](_0x3640d3(0x231)),0x1,_0x3640d3(0x2fa),_0x3640d3(0x1b0),_0x3640d3(0x257));if(dbLogs[_0x3640d3(0x17b)](_0x3640d3(0x1eb))[_0x3640d3(0x218)]()){let _0x333bdb=dbLogs[_0x3640d3(0x29b)]('logs')[_0x3640d3(0x265)](_0x1c165f=>{const _0x40054a=_0x3640d3;if(_0x47ef00[_0x40054a(0x225)][_0x40054a(0x20f)]==0x0)return![];else return _0x47ef00[_0x40054a(0x225)]['includes'](_0x1c165f['type']);})[_0x3640d3(0x265)](_0x28ec6e=>{const _0x1a8b1c=_0x3640d3;if(_0x47ef00[_0x1a8b1c(0x231)]=='')return!![];else return _0x28ec6e[_0x1a8b1c(0x231)][_0x1a8b1c(0x285)]()[_0x1a8b1c(0x243)](_0x47ef00['event'][_0x1a8b1c(0x285)]());})[_0x3640d3(0x28b)](_0x3640d3(0x235)),_0x19e58b=_0x333bdb['value']()[_0x3640d3(0x20f)];_0x333bdb=_0x333bdb['reverse']()[_0x3640d3(0x1c0)]((_0x47ef00['page']-0x1)*logPageSize,_0x47ef00['page']*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x3640d3(0x27c),{'logs':_0x333bdb,'total':_0x19e58b});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2cec4d){const _0x16c520=_0x521a92;if(dbLogs['has'](_0x16c520(0x1eb))[_0x16c520(0x218)]()){const _0x2f3b6b=dbLogs[_0x16c520(0x29b)](_0x16c520(0x1eb))[_0x16c520(0x28b)]('time')[_0x16c520(0x265)](_0x24323a=>{const _0x5d48e7=_0x16c520;return _0x24323a[_0x5d48e7(0x225)]==_0x5d48e7(0x199);})['value']();dbLogs[_0x16c520(0x29b)](_0x16c520(0x1eb))[_0x16c520(0x29f)]()[_0x16c520(0x255)](),dbLogs['get'](_0x16c520(0x1eb))[_0x16c520(0x2c5)](_0x2f3b6b)[_0x16c520(0x255)](),emitHistory(_0x2cec4d);}}async function pauseBot(_0x356aad=pauseBotIntervalShort,_0x58a4da,_0x4d193e,_0x5ae20e=![]){const _0x47806e=_0x521a92,_0x175db0=new Date()[_0x47806e(0x1f2)]();if(!lastErrorShown||_0x175db0-lastErrorShown>=_0x356aad){lastErrorShown=_0x175db0;if(!lastBotPause)lastBotPause=_0x175db0,consecutivePauses=0x1;else{if(_0x175db0-lastBotPause-_0x356aad<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x5ae20e){logHistory(_0x47806e(0x2fa),_0x58a4da+_0x47806e(0x1d2)),await killBot();return;}else logHistory(_0x47806e(0x2fa),_0x58a4da+pauseBotMsg),_0x356aad=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x175db0;}_0x4d193e?logger[_0x47806e(0x1d0)]('('+consecutivePauses+')\x20'+_0x58a4da+_0x47806e(0x170),_0x4d193e):logger[_0x47806e(0x1d0)]('('+consecutivePauses+')\x20'+_0x58a4da);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x356aad),botPaused=![],_0x356aad==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x26bf8e=_0x521a92;botPaused=!![],await sleep(0x3e8),process[_0x26bf8e(0x233)]({'stop':_0x26bf8e(0x18e)},_0x48e73e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x712c05,_0x129b60){const _0x2cd236=_0x521a92;if(botPaused)return;const _0x3102b6=config[_0x2cd236(0x1b1)]||_0x2cd236(0x30b);if(_0x129b60)logger['debug'](_0x2cd236(0x324)+_0x129b60);const _0x6a2061=()=>{const _0x87affa=_0x2cd236;loading[_0x87affa(0x2fa)]=!![],emitLoadingProgress();};if(_0x712c05[_0x2cd236(0x205)]()[_0x2cd236(0x243)](_0x2cd236(0x1f3)))logHistory(_0x2cd236(0x2fa),_0x3102b6+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x6a2061();else{if(_0x712c05['toString']()[_0x2cd236(0x243)](_0x2cd236(0x186)))logHistory('error',_0x3102b6+_0x2cd236(0x17f)),_0x6a2061();else _0x712c05[_0x2cd236(0x205)]()[_0x2cd236(0x243)](_0x2cd236(0x1ae))?(logHistory(_0x2cd236(0x2fa),_0x3102b6+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x2cd236(0x2fa),_0x2cd236(0x2dd)),_0x6a2061()):await handleError(_0x712c05,null);}}async function handleError(_0x57be0d,_0x50d069,_0x3878a6=''){const _0x364cdd=_0x521a92;if(botPaused)return;let _0x21fdc7;const _0x3ad282=config[_0x364cdd(0x1b1)]||_0x364cdd(0x30b);if(_0x50d069)logger[_0x364cdd(0x1d0)](_0x364cdd(0x324)+_0x50d069);if(_0x57be0d['toString']()[_0x364cdd(0x243)]('DDoSProtection'))_0x21fdc7=_0x3ad282+_0x364cdd(0x2ea),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x325)))_0x21fdc7=_0x3ad282+_0x364cdd(0x1c3),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x2a2))||_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)]('OnMaintenance'))_0x21fdc7=_0x3ad282+_0x364cdd(0x1c8),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)]('RequestTimeout'))_0x21fdc7=_0x3ad282+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x31c)))_0x21fdc7=_0x3ad282+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x285)]()[_0x364cdd(0x243)](_0x364cdd(0x318))||_0x57be0d['toString']()['toLowerCase']()[_0x364cdd(0x243)](_0x364cdd(0x2f4)))_0x21fdc7=_0x364cdd(0x22e),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x263)))_0x21fdc7=_0x3ad282+_0x364cdd(0x18d),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d instanceof ccxt[_0x364cdd(0x2f7)])_0x21fdc7=_0x3ad282+'\x20network\x20error:\x20'+_0x57be0d['toString'](),logger[_0x364cdd(0x1d0)]('Network\x20error\x20details:',_0x57be0d),await pauseBot(undefined,_0x21fdc7,_0x57be0d);else{if(_0x57be0d['toString']()[_0x364cdd(0x243)](_0x364cdd(0x1f3)))logHistory(_0x364cdd(0x2fa),_0x3ad282+_0x364cdd(0x331)),logHistory('error',_0x364cdd(0x31b)),await killBot();else{if(_0x57be0d['toString']()[_0x364cdd(0x243)](_0x364cdd(0x186)))logHistory('error',_0x3ad282+_0x364cdd(0x32f)),logHistory(_0x364cdd(0x2fa),_0x364cdd(0x31b)),await killBot();else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x1ae))&&_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x20d)))_0x21fdc7=_0x3ad282+_0x364cdd(0x1a5),await pauseBot(undefined,_0x21fdc7,_0x57be0d,!![]);else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)]('AuthenticationError'))config[_0x364cdd(0x1fb)]?_0x21fdc7=_0x3ad282+_0x364cdd(0x291):_0x21fdc7=_0x3ad282+_0x364cdd(0x19b),logHistory(_0x364cdd(0x2fa),_0x21fdc7),logHistory('error',_0x364cdd(0x31b)),await killBot();else{if(_0x57be0d['toString']()[_0x364cdd(0x243)](_0x364cdd(0x254)))logHistory('error',_0x3ad282+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory('error',_0x364cdd(0x31b)),await killBot();else{if(_0x57be0d[_0x364cdd(0x205)]()[_0x364cdd(0x243)](_0x364cdd(0x18f)))logHistory(_0x364cdd(0x2fa),_0x364cdd(0x179)+_0x3878a6);else{if(_0x57be0d instanceof ccxt[_0x364cdd(0x1bf)]){_0x21fdc7=_0x3ad282+_0x364cdd(0x206)+_0x57be0d[_0x364cdd(0x205)](),logHistory(_0x364cdd(0x2fa),_0x21fdc7),logger[_0x364cdd(0x1d0)](_0x364cdd(0x1e4),_0x57be0d);if(_0x3878a6)logger[_0x364cdd(0x1d0)]('Symbol(s):\x20'+_0x3878a6);await pauseBot(undefined,_0x21fdc7,_0x57be0d);}else{_0x21fdc7='Unknown\x20error:\x20'+_0x57be0d[_0x364cdd(0x205)](),logHistory(_0x364cdd(0x2fa),_0x21fdc7),logger[_0x364cdd(0x1d0)](_0x21fdc7+_0x364cdd(0x170),_0x57be0d);if(_0x3878a6)logger[_0x364cdd(0x1d0)]('Symbol(s):\x20'+_0x3878a6);await pauseBot(undefined,_0x21fdc7);}}}}}}}}}}}}}}}}async function withRetry(_0x5b7e67,_0x1cfeaf){const _0x13d38e=_0x521a92;let _0x2fde64=![],_0x19c2ba=0x0,_0x3fe3a0,_0x144ce0;while(_0x19c2ba<maxRetries){try{_0x3fe3a0=await _0x1cfeaf();break;}catch(_0x152966){_0x144ce0=_0x152966,!_0x2fde64?(_0x2fde64=!![],logger['debug'](_0x13d38e(0x1da)+_0x5b7e67+':',_0x152966[_0x13d38e(0x205)]())):await sleep(retryInterval);}_0x19c2ba++;}if(_0x19c2ba==0x0)return _0x3fe3a0;if(_0x19c2ba>=maxRetries)throw _0x144ce0;else return logger[_0x13d38e(0x1d0)](_0x13d38e(0x182)+_0x19c2ba+_0x13d38e(0x2df)),_0x3fe3a0;}function _0x1fd5(_0x301422,_0x31ee7f){const _0x16a354=_0x3a90();return _0x1fd5=function(_0x590f8a,_0x58f701){_0x590f8a=_0x590f8a-0x168;let _0x3a90b2=_0x16a354[_0x590f8a];return _0x3a90b2;},_0x1fd5(_0x301422,_0x31ee7f);}function formatResult(_0x5b0560,_0x4cf65e){return parseFloat(_0x5b0560['toFixed'](_0x4cf65e));}function formatResultTruncate(_0x59e329,_0x3b5ee4){const _0x418f47=_0x521a92;let _0x26c00c=formatResultString(_0x59e329,0xa),_0x274924=_0x26c00c[_0x418f47(0x2bd)]('.');return _0x274924!=-0x1&&(_0x26c00c=_0x26c00c[_0x418f47(0x1c0)](0x0,_0x274924+_0x3b5ee4+0x1)),Number(_0x26c00c);}function formatResultString(_0x390c69,_0x2a5bda){const _0x84e681=_0x521a92;let _0x1eec97;if(!(''+_0x390c69)[_0x84e681(0x243)]('e'))_0x1eec97=+(Math['round'](_0x390c69+'e+'+_0x2a5bda)+'e-'+_0x2a5bda);else{let _0x49b792=(''+_0x390c69)[_0x84e681(0x2c0)]('e'),_0x351821='';+_0x49b792[0x1]+_0x2a5bda>0x0&&(_0x351821='+'),_0x1eec97=+(Math[_0x84e681(0x2a4)](+_0x49b792[0x0]+'e'+_0x351821+(+_0x49b792[0x1]+_0x2a5bda))+'e-'+_0x2a5bda);}return Number(_0x1eec97)[_0x84e681(0x2cd)](_0x2a5bda);}function getServerTime(){const _0x4200ee=_0x521a92,_0x219ea3=new Date();return _0x219ea3[_0x4200ee(0x2e0)]()+'/'+(_0x219ea3['getMonth']()+0x1)[_0x4200ee(0x205)]()['padStart'](0x2,'0')+'/'+_0x219ea3[_0x4200ee(0x277)]()['toString']()[_0x4200ee(0x1e3)](0x2,'0')+'\x20'+_0x219ea3['getHours']()['toString']()[_0x4200ee(0x1e3)](0x2,'0')+':'+_0x219ea3[_0x4200ee(0x185)]()[_0x4200ee(0x205)]()[_0x4200ee(0x1e3)](0x2,'0')+':'+_0x219ea3[_0x4200ee(0x2bf)]()[_0x4200ee(0x205)]()[_0x4200ee(0x1e3)](0x2,'0');}function getTimeStamp(){const _0x2d4921=_0x521a92,_0x491a6f=shiftedTime();return _0x491a6f['getFullYear']()+'/'+(_0x491a6f['getMonth']()+0x1)[_0x2d4921(0x205)]()[_0x2d4921(0x1e3)](0x2,'0')+'/'+_0x491a6f[_0x2d4921(0x277)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x491a6f[_0x2d4921(0x260)]()[_0x2d4921(0x205)]()['padStart'](0x2,'0')+':'+_0x491a6f[_0x2d4921(0x185)]()[_0x2d4921(0x205)]()[_0x2d4921(0x1e3)](0x2,'0')+':'+_0x491a6f[_0x2d4921(0x2bf)]()[_0x2d4921(0x205)]()[_0x2d4921(0x1e3)](0x2,'0');}function _0x3a90(){const _0x28f689=['\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','limit-low','running','Bot\x20','getPortfolio','ORDERS.LOCKED','type','timeshift','change24h','Executed\x20','ORDERS.UNLOCKING','parse','Net\x20','delta','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','Error\x20while\x20deleting\x20files:\x20','leftTxt','event','Saving\x20configuration','send','privateKey','time','\x20>\x20[DEBUG]\x20','Resetting\x20coin\x20results:\x20','apiSecret','Error:\x20Invalid\x20argument\x20','trade','configuration-stored','Trigger:\x20','fiat','***','open','\x20minutes','average','coin','includes','target','cloneDeep','1\x20-\x20Unlock\x20orders','splice','marketcap','basecoin','Resetting\x20bot\x20history','800FlwWmV','getOpenOrders()','\x20>\x20pausing\x20bot\x20for\x20','RSA-OAEP','pid','ORDERS.UNLOCKED','axios','environment','BTC','PermissionDenied','write','customId','success','yyyy/MM/dd','liquidity','production','Huobipro','Bybit','process\x20','Unknown\x20error\x20-\x20check\x20logs','fetchBalance','getHours','memoryUsage','headless','InvalidNonce','portfolio1','filter','format','Resuming\x20(','storeFiat','bots','Net\x20effect','EUR','Limit\x20(low-margin)','Limit\x20(high-margin)','recreate','canceled','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','startsWith','set','5sChqRw','highest','buys','getDate','89793nFflgu','sendPortfolioTelegram','limits','ETH','event-history','starting-balances','deleteHistoryAlerts','path','toUpperCase','Cooldown\x20ended\x20-\x20balancing\x20resumed','fee','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','update-liquidity','toLowerCase','bb-settings.json','orderId','balances','fetchClosedOrders','-------------------------------\x0a','sortBy','\x20-\x20','ongoing','************','2\x20-\x20handling\x20FILLED\x20order:\x20','BNB/','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','writeFile','001','password','none','status\x20code\x20401','startdate','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','autoliquidity','cancelOrders()','get','date-fns','2\x20-\x20Handled\x20open\x20orders','getCoinNumber()','remove','pro','final','ExchangeNotAvailable','amountToPrecision','round','limit','sell',':\x20Bot\x20','hybrid-crypto-js','fetchTickers()','valid','\x20|\x20','2.6.0','\x20orders\x20in\x20less\x20than\x20','Order\x20is\x20invalid:\x20','search','data','UNLOCKED','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','recreateCoinResults()','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','push','USDC','botID','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.22','Error\x20details:','6056934YBfJUA','BNB','indexOf','must\x20be\x20greater\x20than\x20minimum\x20amount','getSeconds','split','/EUR','padEnd','780492TxaHwi','argv','assign','portfolio','Huobi','Error\x20in\x20loadSymbols():\x20','unlinkSync','Portfolio\x20change\x20detected:\x20','excluded','market_cap','toFixed','entries','initTickers()','-results.json','./version.json','date','sort','148EgDNBE','differenceInSeconds','existsSync','detectLiquidityChange()','bot','2.3.5','\x20MB','apply','restart','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','buy','\x20attempts','getFullYear','args','ccxt','\x20exchange','\x20|\x20exchange:\x20','emojisell','Avoiding\x20continuous\x20order\x20attempts','max','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','configuration','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','version','Headless:\x20','bb-secure.json','\x20:\x20','colorscheme','util','getCoins()','\x20|\x20highest\x20fee:\x20','432zjLoSR','request-time','1\x20-\x20FILLED\x20known\x20order:\x20','watchTradesForSymbols','NetworkError','test','Waited\x20','error','showname','quick','fetchTicker','mkdirSync','ordertype','ask','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','string','emojibuy','\x20value','floor','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Loading\x20symbols','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','performance','no\x20exchange\x20reloaded','Exchange','watchTradesForSymbols()','forEach','showConfig','cancel','\x20>\x20','LOCKED','offset','2\x20-\x20Validate\x20orders:\x20','symbol','portfolio2','/output-000.log','amount','timestamp','./config/','orderstatus','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','concat','log','1\x20-\x20Handle\x20open\x20orders','startnumber','botname','\x20/\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Exception\x20thrown\x20in\x20','RateLimitExceeded','39198mwVCoP','datetime','./logs/','sells','distribution','Fee\x20discount\x20refund\x20detected:\x20','change','abs','Order(s)\x20not\x20validated\x20after\x20','\x20API\x20secret\x20is\x20invalid','starting-balance-','\x20API\x20key\x20is\x20invalid','</pre>','isEqual',':\x20timer\x20>','min','closed','getAllOrders()','exchanges','Crypt','watchOrders()','USDT','marketcapApi','\x20portfolio:</b>\x20\x0a\x0a','createOrder','number','toggleBotMode','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','removed','\x20>\x20details:','\x20order:\x20','Reset\x20|\x20','filled','Block\x20transaction\x20detection:\x20','\x20change','no\x20open\x20orders','cost','PAXG','Insufficient\x20funds\x20to\x20execute\x20order:\x20','recovery','has','side','storeConfiguration','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','getMonth','\x20hour','RETRY\x20-\x20Problem\x20resolved\x20after\x20','breakeven','watchOrders','getMinutes','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','resetHistory','settings','Binance','rightTxt','net-basecoin','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','kill','InsufficientFunds','2.6.23','startprice','Bitget','loading-canceled','coins','openOrders','last','add','find','order','market','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','map','defaults',')\x20|\x20exchange:\x20','replace','code','sqrt','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','-config.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','cancelOrder','balancing\x20resumes\x20when\x20cooldown\x20ends','Error\x20details\x20(1):','<b>Bot\x20','\x20uses\x20','freeze','\x20|\x20Custom\x20ID:\x20','net-fiat','AuthenticationError','eur','warning','exchange','loadMarkets','\x20metrics:</b>\x20\x0a\x0a','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','-performance.json','secure','remainingSymbols','yargs/yargs','netoffset','apiKey','1\x20-\x20Validate\x20orders:\x20','\x20minutes\x20-\x20','Pausing\x20for\x20','quote','ExchangeError','slice','percentage','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','exchange\x20reload','createWriteStream','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','MIN_NOTIONAL','uncaughtException','Cryptocom','initial','full','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Error\x20in\x20testAPI():\x20','debug','progress','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fromCodePoint','message','added','milliseconds','function','fetchOpenOrders','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','RETRY\x20-\x20Error\x20in\x20','exec','changes','%\x20(','join','threshold','realized','bot-','fetchTickers','padStart','Exchange\x20error\x20details:','\x20|\x20lock\x20orders:\x20','basecoinvalue','timeout','usd','shift','Manual\x20balancing\x20required','logs','38100326zMnAsf','price','staging','bid','.json','constructor','getTime','API-key\x20format\x20invalid','fees','-events.json','watchTrades()','sendMetricsTelegram','currency','recent20','Initializing\x20exchange','apiPassword','limit-high','keys','marketcapEnabled','<pre>','slider','onepagemode','USD','watchTrades','ID:\x20','toString','\x20exchange\x20error:\x20','heapUsed','reverse','stringify','initclient','Loading\x20completed','cooldown','token\x20is\x20expired','Failed\x20to\x20load\x20coin\x20data\x20for\x20','length','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','total','21133tCWIZU','placeOrder','balancing\x20resumed','/backup/','InvalidOrder','4492280eUseOg','value','TUSD','Order\x20amount\x20is\x20invalid:\x20','cancelLoading','<b>','decrypt','spot'];_0x3a90=function(){return _0x28f689;};return _0x3a90();}function getDate(){const _0x7f5218=_0x521a92,_0x4096a2=shiftedTime();return _0x4096a2[_0x7f5218(0x2e0)]()+'/'+(_0x4096a2[_0x7f5218(0x180)]()+0x1)[_0x7f5218(0x205)]()[_0x7f5218(0x1e3)](0x2,'0')+'/'+_0x4096a2['getDate']()[_0x7f5218(0x205)]()[_0x7f5218(0x1e3)](0x2,'0');}function getHour(){const _0x3fdca7=_0x521a92,_0x745ee7=shiftedTime();return _0x745ee7[_0x3fdca7(0x260)]()[_0x3fdca7(0x205)]()['padStart'](0x2,'0');}function sleep(_0x1324c){return new Promise(_0x37cb76=>setTimeout(_0x37cb76,_0x1324c));}function shiftedTime(){const _0x537709=_0x521a92,_0x12f144=new Date();let _0x5ae7e2=_0x12f144;if(config&&config[_0x537709(0x226)]!==0x0)_0x5ae7e2=fns[_0x537709(0x197)](_0x12f144,{'hours':config[_0x537709(0x226)]});return _0x5ae7e2;}function timer(_0x112209){const _0x202d9f=_0x521a92,_0x3f0f61=new Date();!lasttime?console[_0x202d9f(0x31e)](getTimeStamp()+':\x20timer\x20>',_0x112209,_0x3f0f61):console['log'](getTimeStamp()+_0x202d9f(0x334),_0x112209,(_0x3f0f61-lasttime)/0x3e8),lasttime=_0x3f0f61;}