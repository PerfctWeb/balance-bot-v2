const _0x4be4ff=_0x1531;(function(_0x504df4,_0x121da6){const _0x5d8030=_0x1531,_0x4a83f9=_0x504df4();while(!![]){try{const _0xa5602a=parseInt(_0x5d8030(0x2db))/0x1*(parseInt(_0x5d8030(0x1ef))/0x2)+parseInt(_0x5d8030(0x355))/0x3+parseInt(_0x5d8030(0x360))/0x4*(-parseInt(_0x5d8030(0x346))/0x5)+-parseInt(_0x5d8030(0x2a4))/0x6*(-parseInt(_0x5d8030(0x2cd))/0x7)+-parseInt(_0x5d8030(0x248))/0x8+-parseInt(_0x5d8030(0x1e4))/0x9*(-parseInt(_0x5d8030(0x2d9))/0xa)+-parseInt(_0x5d8030(0x2fd))/0xb;if(_0xa5602a===_0x121da6)break;else _0x4a83f9['push'](_0x4a83f9['shift']());}catch(_0x2191f1){_0x4a83f9['push'](_0x4a83f9['shift']());}}}(_0x55ba,0x412fc));const _0x246a23=function(){let _0x396700=!![];return function(_0x5dcfc6,_0x20192b){const _0x44a9b3=_0x396700?function(){const _0x3a1f9f=_0x1531;if(_0x20192b){const _0x68f2b0=_0x20192b[_0x3a1f9f(0x308)](_0x5dcfc6,arguments);return _0x20192b=null,_0x68f2b0;}}:function(){};return _0x396700=![],_0x44a9b3;};}(),_0x1cc4b8=_0x246a23(this,function(){const _0x464d4d=_0x1531;return _0x1cc4b8['toString']()[_0x464d4d(0x216)](_0x464d4d(0x26a))[_0x464d4d(0x2bd)]()[_0x464d4d(0x334)](_0x1cc4b8)[_0x464d4d(0x216)](_0x464d4d(0x26a));});_0x1cc4b8();'use strict';const ccxt=require(_0x4be4ff(0x28d))['pro'],low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4be4ff(0x34c)),Crypt=require(_0x4be4ff(0x341))[_0x4be4ff(0x2a6)],util=require('util'),argv=require(_0x4be4ff(0x34e))(process[_0x4be4ff(0x203)]['slice'](0x2))['argv'],path=require(_0x4be4ff(0x2ed));let exchange;global['ticker']={},global['change']={};const usdBasecoins=[_0x4be4ff(0x226),_0x4be4ff(0x21a),_0x4be4ff(0x2ee),_0x4be4ff(0x2ef),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4be4ff(0x359)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4be4ff(0x227)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x4be4ff(0x2d8))[_0x4be4ff(0x2e3)],botID=process[_0x4be4ff(0x203)][0x2]||_0x4be4ff(0x284),pattern=/^[0-9]{3}$/;!pattern[_0x4be4ff(0x2cf)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x4be4ff(0x27a)),killBot());const userID=process[_0x4be4ff(0x203)][0x3]||'',configpath=userID?_0x4be4ff(0x2fb)+userID+'/':_0x4be4ff(0x2fb),logspath=userID?_0x4be4ff(0x23c)+userID+'/':'./logs/',loggerfile=fs[_0x4be4ff(0x336)](logspath+_0x4be4ff(0x270),{'flags':'a'});!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x4be4ff(0x27e)](logspath)&&fs[_0x4be4ff(0x354)](logspath);const configfile=configpath+_0x4be4ff(0x28e)+botID+_0x4be4ff(0x326),logfile=configpath+_0x4be4ff(0x28e)+botID+_0x4be4ff(0x24d),performancefile=configpath+_0x4be4ff(0x28e)+botID+_0x4be4ff(0x31f),coinresultsfile=configpath+'bot-'+botID+_0x4be4ff(0x294),settingsfile=configpath+_0x4be4ff(0x1ea),securefile=configpath+_0x4be4ff(0x30d),configbackuppath=configpath+_0x4be4ff(0x23d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4be4ff(0x231)]({'logs':[],'version':serverversion})[_0x4be4ff(0x33d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4be4ff(0x231)]({'data':[],'version':serverversion})[_0x4be4ff(0x33d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);function _0x1531(_0xf02522,_0x4e07c9){const _0x24d486=_0x55ba();return _0x1531=function(_0x1cc4b8,_0x246a23){_0x1cc4b8=_0x1cc4b8-0x1df;let _0x55ba28=_0x24d486[_0x1cc4b8];return _0x55ba28;},_0x1531(_0xf02522,_0x4e07c9);}dbConfig[_0x4be4ff(0x231)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4be4ff(0x231)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4be4ff(0x261),'rsaStandard':_0x4be4ff(0x2f6)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x45d1ca=>{const _0x577712=_0x4be4ff;console[_0x577712(0x24f)](_0x45d1ca);},'simple':_0x1a1491=>{const _0x4227f5=_0x4be4ff;console['log'](_0x1a1491),loggerfile['write'](util[_0x4227f5(0x266)](_0x1a1491)+'\x0a');},'full':async(_0x38ad37,_0x5048c2='')=>{const _0x4e5de2=_0x4be4ff;let _0x3aa088;if(config[_0x4e5de2(0x2f2)])_0x3aa088=getTimeStamp()+':\x20'+config['botname']+_0x4e5de2(0x22a)+_0x38ad37;else _0x3aa088=getTimeStamp()+_0x4e5de2(0x276)+botID+_0x4e5de2(0x22a)+_0x38ad37;console[_0x4e5de2(0x24f)](_0x3aa088),loggerfile[_0x4e5de2(0x33d)](util['format'](_0x3aa088)+'\x0a'),_0x5048c2&&(console[_0x4e5de2(0x24f)](_0x5048c2),loggerfile[_0x4e5de2(0x33d)](util[_0x4e5de2(0x266)](_0x5048c2)+'\x0a'));},'debug':async(_0x2306b4,_0x3a4e5e='')=>{const _0x52d1f4=_0x4be4ff;let _0x5adda6;if(config[_0x52d1f4(0x2f2)])_0x5adda6=getTimeStamp()+':\x20'+config[_0x52d1f4(0x317)]+_0x52d1f4(0x31d)+_0x2306b4;else _0x5adda6=getTimeStamp()+_0x52d1f4(0x276)+botID+_0x52d1f4(0x31d)+_0x2306b4;if(debugging)console['log'](_0x5adda6);loggerfile['write'](util['format'](_0x5adda6)+'\x0a');if(_0x3a4e5e){if(debugging)console['log'](_0x3a4e5e);loggerfile[_0x52d1f4(0x33d)](util[_0x52d1f4(0x266)](_0x3a4e5e)+'\x0a');}}};process['on'](_0x4be4ff(0x247),function(_0x5dc21d){const _0x45f2f8=_0x4be4ff;logHistory('error',_0x45f2f8(0x28a)),logger['debug'](_0x45f2f8(0x21c),_0x5dc21d);});settings[_0x4be4ff(0x33f)]!=config[_0x4be4ff(0x33f)]&&updateTimeshift(settings[_0x4be4ff(0x33f)]);settings[_0x4be4ff(0x316)]!=config[_0x4be4ff(0x316)]&&updateOnepagemode(settings['onepagemode']);process[_0x4be4ff(0x2a3)]({'started':'running'},_0x39c85a=>{}),initializeProcessListeners();function proxyEmit(_0x2e4d1a,_0x2315d9=null){process['send']({'function':_0x2e4d1a,'args':_0x2315d9},_0x258df8=>{});}function initializeProcessListeners(){process['on']('message',_0x482fad=>{const _0xb1fb6=_0x1531;switch(Object['keys'](_0x482fad)[0x0]){case _0xb1fb6(0x33f):_0x482fad[_0xb1fb6(0x33f)]!=undefined&&(settings[_0xb1fb6(0x33f)]=_0x482fad['timeshift'],updateTimeshift(settings[_0xb1fb6(0x33f)]));break;case'onepagemode':_0x482fad[_0xb1fb6(0x316)]!=undefined&&(settings['onepagemode']=_0x482fad[_0xb1fb6(0x316)],updateOnepagemode(settings[_0xb1fb6(0x316)]));break;case'bots':_0x482fad[_0xb1fb6(0x306)]!=undefined&&(bots=JSON[_0xb1fb6(0x262)](_0x482fad['bots']),proxyEmit(_0xb1fb6(0x306),bots));break;case'function':switch(_0x482fad[_0xb1fb6(0x283)]){case'initclient':initclient();break;case _0xb1fb6(0x1f0):toggleBotMode();break;case _0xb1fb6(0x215):emitHistory(_0x482fad[_0xb1fb6(0x25e)]);break;case _0xb1fb6(0x2eb):deleteHistoryAlerts(_0x482fad[_0xb1fb6(0x25e)]);break;case'getPortfolio':getPortfolio(_0x482fad['args']);break;case'storeConfiguration':storeConfiguration(_0x482fad[_0xb1fb6(0x25e)]);break;case _0xb1fb6(0x24c):storeHeadless(_0x482fad[_0xb1fb6(0x25e)]);break;case _0xb1fb6(0x222):storeFiat(_0x482fad['args']);break;case _0xb1fb6(0x325):resetHistory();break;case _0xb1fb6(0x25b):getStartingBalances(getNormalizedPerformance());break;case _0xb1fb6(0x1eb):placeOrder(_0x482fad[_0xb1fb6(0x25e)]);break;case _0xb1fb6(0x2df):cancelLoading();break;case'showConfig':showConfig();break;case _0xb1fb6(0x2b1):sendMetricsTelegram();break;case _0xb1fb6(0x282):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3a7d2c=null,_0x428b40=![]){const _0xa5c7e3=_0x4be4ff;logger[_0xa5c7e3(0x364)](_0xa5c7e3(0x33a)+(_0x3a7d2c&&_0x3a7d2c['length']>0x0?_0xa5c7e3(0x233)+_0x3a7d2c['join'](','):_0xa5c7e3(0x223))+'\x20|\x20'+(_0x428b40?_0xa5c7e3(0x2e5):_0xa5c7e3(0x32d))+'\x20|\x20exchange:\x20'+config[_0xa5c7e3(0x2c0)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x428b40)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xa5c7e3(0x205)]!=''&&config['apiKey']!=_0xa5c7e3(0x2e8)){if(_0x428b40){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x495750){handleErrorNoStop(_0x495750,_0xa5c7e3(0x239));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3a7d2c);const _0x189785=await getCoins();[currentCoins,currentCoinsAll]=_0x189785,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0xa5c7e3(0x2c8)]==0x0&&allOpenOrders[_0xa5c7e3(0x2c8)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x5608cd=_0x4be4ff;logger['debug'](_0x5608cd(0x30f));while(lockOrders!=ORDERS[_0x5608cd(0x227)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5608cd(0x364)](_0x5608cd(0x32c)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x1f23b5=config[_0x4be4ff(0x2c0)],_0x27911a=config[_0x4be4ff(0x205)],_0x488d53=config[_0x4be4ff(0x2a5)],_0x51af2f=config['apiPassword']){const _0x25a386=_0x4be4ff;exchange&&await stopExchange();!supportedExchanges()[_0x25a386(0x234)](_0x1f23b5)&&(logHistory(_0x25a386(0x2f5),_0x25a386(0x2c7)+_0x1f23b5+_0x25a386(0x1f8)),killBot());const _0x4a8f3c=ccxt[_0x1f23b5[_0x25a386(0x27f)]()];exchange=new _0x4a8f3c({'apiKey':_0x27911a,'secret':_0x488d53,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x25a386(0x21b)}});if(_0x51af2f)exchange[_0x25a386(0x229)]=_0x51af2f;}function setStableCoins(){const _0x14602a=_0x4be4ff;let _0x257960=config['basecoin']==_0x14602a(0x343)?_0x14602a(0x343):_0x14602a(0x22d),_0x575509=!allSymbols[_0x14602a(0x234)](_0x257960+_0x14602a(0x211))?_0x14602a(0x2ef):_0x14602a(0x226),_0x4e26a2=!allSymbols[_0x14602a(0x234)](_0x257960+'/EUR')?_0x575509:_0x14602a(0x249);stablecoins={'eur':{'coin':''+_0x257960+_0x4e26a2,'symbol':_0x257960+'/'+_0x4e26a2},'usd':{'coin':''+_0x257960+_0x575509,'symbol':_0x257960+'/'+_0x575509}};}async function initwsCcxt(_0x1f2b83){const _0x3d6ee9=_0x4be4ff;_0x1f2b83==null&&(_0x1f2b83=[],config[_0x3d6ee9(0x287)]['forEach'](_0x4966b4=>{const _0x4d7852=_0x3d6ee9;if(!_0x4966b4[_0x4d7852(0x2d6)]&&_0x4966b4[_0x4d7852(0x243)]!=config[_0x4d7852(0x31c)])_0x1f2b83[_0x4d7852(0x2d3)](_0x4966b4['symbol']);}));if(!_0x1f2b83['includes'](stablecoins[_0x3d6ee9(0x31a)][_0x3d6ee9(0x292)]))_0x1f2b83[_0x3d6ee9(0x2d3)](stablecoins['eur'][_0x3d6ee9(0x292)]);if(!_0x1f2b83[_0x3d6ee9(0x234)](stablecoins[_0x3d6ee9(0x351)]['symbol']))_0x1f2b83['push'](stablecoins[_0x3d6ee9(0x351)]['symbol']);if(config[_0x3d6ee9(0x2c0)][_0x3d6ee9(0x28b)]('Binance')){if(!_0x1f2b83['includes']('BNB/'+config[_0x3d6ee9(0x31c)]))_0x1f2b83[_0x3d6ee9(0x2d3)](_0x3d6ee9(0x2d5)+config[_0x3d6ee9(0x31c)]);}loadCoins(_0x1f2b83);const _0xf5de57=async _0x2f10e9=>{const _0x5e200a=_0x3d6ee9,_0x544e2c=await exchange[_0x5e200a(0x23f)](_0x2f10e9);global[_0x5e200a(0x2f9)][noslash(_0x544e2c[_0x5e200a(0x292)])]=_0x544e2c[_0x5e200a(0x1e3)];while(!![]){if(!botPaused)try{const _0x529f52=await exchange[_0x5e200a(0x1e7)](_0x2f10e9);global[_0x5e200a(0x2f9)][noslash(_0x529f52[0x0]['symbol'])]=_0x529f52[0x0][_0x5e200a(0x221)],await sleep(0x3e8);}catch(_0x4a4ce0){if(!exchangeStopped)await handleError(_0x4a4ce0,_0x5e200a(0x1e7),_0x2f10e9);}else await sleep(0x64);}},_0xa325ea=async _0x595ebd=>{const _0x1e0400=_0x3d6ee9;while(!![]){if(!botPaused)try{const _0x3e8f5a=await exchange[_0x1e0400(0x23f)](_0x595ebd);global['change'][_0x3e8f5a['symbol']]=_0x3e8f5a[_0x1e0400(0x1fc)],await sleep(0x3c*0x3e8);}catch(_0x4f79ba){if(!exchangeStopped)await handleError(_0x4f79ba,_0x1e0400(0x22e),_0x595ebd);}else await sleep(0x64);}},_0x379fd7=async()=>{const _0x3dee15=_0x3d6ee9;while(!![]){if(!botPaused)try{const _0xebec7e=await exchange[_0x3dee15(0x311)]();_0xebec7e[_0x3dee15(0x1ff)](_0x22718=>{updateNumberCoinsCcxt(_0x22718);});}catch(_0x2c3e1d){if(!exchangeStopped)await handleError(_0x2c3e1d,_0x3dee15(0x311));}else await sleep(0x64);}};_0x1f2b83['forEach'](_0x4634fd=>{_0xf5de57(_0x4634fd),_0xa325ea(_0x4634fd);}),!wsEventsSet&&(wsEventsSet=!![],_0x379fd7(),watchTransactions());}async function watchTransactions(){const _0x32d774=_0x4be4ff;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2e126e=await getCoins(),[_0x3bd091,_0x5d8e5e]=_0x2e126e;let _0x1ce241=[];currentCoins[_0x32d774(0x1ff)](_0xcc2cc5=>{const _0x11ff37=_0x32d774,_0x3cd806=_0x3bd091['find'](_0x56695a=>_0x56695a['coin']==_0xcc2cc5[_0x11ff37(0x243)]);if(_0x3cd806){if(_0xcc2cc5[_0x11ff37(0x34d)]!=_0x3cd806[_0x11ff37(0x34d)]){let _0x1bfee5;if(_0xcc2cc5[_0x11ff37(0x243)]!=config[_0x11ff37(0x31c)]){const _0x1b4046=global['ticker'][noslash(_0xcc2cc5[_0x11ff37(0x292)])];_0x1bfee5=_0xcc2cc5[_0x11ff37(0x344)]?0x1/_0x1b4046:_0x1b4046;}else _0x1bfee5=0x1;_0x1ce241[_0x11ff37(0x2d3)]({'coin':_0xcc2cc5[_0x11ff37(0x243)],'symbol':_0xcc2cc5[_0x11ff37(0x292)],'price':_0x1bfee5,'number':Number(formatResult(_0x3cd806[_0x11ff37(0x34d)]-_0xcc2cc5[_0x11ff37(0x34d)],0x8)),'basecoinvalue':_0x1bfee5*(_0x3cd806['number']-_0xcc2cc5[_0x11ff37(0x34d)])});}}});if(_0x1ce241['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x32d774(0x364)](_0x32d774(0x1fd)+_0x1ce241[0x0]['basecoinvalue']+_0x32d774(0x25f)+lastFees[_0x32d774(0x369)]);if(lastFees[_0x32d774(0x369)]==0x0||Math[_0x32d774(0x24a)](_0x1ce241[0x0][_0x32d774(0x2d4)])>lastFees[_0x32d774(0x369)]){delete _0x1ce241[0x0][_0x32d774(0x292)],delete _0x1ce241[0x0][_0x32d774(0x2d4)];let _0xf87fa1=[],_0x254727=[...config[_0x32d774(0x2fc)]]||[],_0x54170b=config['liquidity'];_0x254727[_0x32d774(0x2e6)]((_0x1b0ba0,_0x30baff)=>_0x1b0ba0[_0x32d774(0x209)]>_0x30baff[_0x32d774(0x209)]?-0x1:_0x30baff[_0x32d774(0x209)]>_0x1b0ba0[_0x32d774(0x209)]?0x1:0x0);const _0x411173=getDate();if(_0x254727[0x0]){const _0x4a3f62=fns['parse'](_0x254727[0x0]['date'],_0x32d774(0x293),new Date()),_0x1af7e8=fns['parse'](_0x411173,_0x32d774(0x293),new Date());if(fns[_0x32d774(0x1e9)](_0x4a3f62,_0x1af7e8)){_0xf87fa1=_0x254727[0x0][_0x32d774(0x352)];const _0x42cbe1=_0xf87fa1[_0x32d774(0x230)](_0x2ad5b9=>_0x2ad5b9['coin']==_0x1ce241[0x0]['coin']);_0x42cbe1?(_0x42cbe1[_0x32d774(0x34d)]+=_0x1ce241[0x0]['number'],_0x42cbe1[_0x32d774(0x34d)]==0x0&&(_0xf87fa1=_0xf87fa1['filter'](_0x536bda=>{const _0x545b14=_0x32d774;return _0x536bda[_0x545b14(0x243)]!=_0x1ce241[0x0][_0x545b14(0x243)];}))):_0xf87fa1[_0x32d774(0x2d3)](_0x1ce241[0x0]);const _0x3f8d35=_0x54170b[_0x32d774(0x230)](_0x4ed468=>_0x4ed468[_0x32d774(0x209)]==_0x411173);_0x3f8d35['changes']=_0xf87fa1;}else _0x54170b[_0x32d774(0x2d3)]({'date':_0x411173,'changes':[_0x1ce241[0x0]]});}const _0x589cbb=_0x54170b['find'](_0x5ae196=>_0x5ae196[_0x32d774(0x209)]==_0x411173);if(_0x589cbb){let _0x5957e3=!![];_0x589cbb[_0x32d774(0x352)][_0x32d774(0x1ff)](_0x96df9f=>{const _0x1c4183=_0x32d774;if(_0x96df9f[_0x1c4183(0x34d)]!=0x0)_0x5957e3=![];}),_0x5957e3&&(_0x54170b=_0x54170b['filter'](_0x1d0150=>{const _0x316d47=_0x32d774;return _0x1d0150[_0x316d47(0x209)]!=_0x411173;}));}let _0x638953=dbConfig[_0x32d774(0x29d)]('bot')[_0x32d774(0x230)]({'botID':botID})[_0x32d774(0x2dd)]();_0x638953&&(dbConfig[_0x32d774(0x29d)](_0x32d774(0x2e4))[_0x32d774(0x230)]({'botID':botID})[_0x32d774(0x353)]({'liquidity':_0x54170b})[_0x32d774(0x33d)](),config[_0x32d774(0x2fc)]=_0x54170b),logHistory(_0x32d774(0x1e8),_0x32d774(0x22f)+Math[_0x32d774(0x24a)](_0x1ce241[0x0][_0x32d774(0x34d)])+'\x20'+_0x1ce241[0x0][_0x32d774(0x243)]+'\x20'+(_0x1ce241[0x0][_0x32d774(0x34d)]>0x0?_0x32d774(0x345):'removed')+_0x32d774(0x2a0)),proxyEmit(_0x32d774(0x2c6),emittedConfiguration());}else logger[_0x32d774(0x364)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x1ce241[0x0][_0x32d774(0x34d)])+'\x20'+_0x1ce241[0x0][_0x32d774(0x243)]+'\x20'+(_0x1ce241[0x0][_0x32d774(0x34d)]>0x0?'added':_0x32d774(0x23a)));transactionDetected=!![],currentCoins=_0x3bd091,currentCoinsAll=_0x5d8e5e;}else logger['debug'](_0x32d774(0x22f)+Math[_0x32d774(0x24a)](_0x1ce241[0x0][_0x32d774(0x34d)])+'\x20'+_0x1ce241[0x0][_0x32d774(0x243)]+'\x20'+(_0x1ce241[0x0][_0x32d774(0x34d)]>0x0?_0x32d774(0x345):'removed')+_0x32d774(0x30b)),currentCoins=_0x3bd091,currentCoinsAll=_0x5d8e5e;}await sleep(watchTransactionsInterval);}catch(_0x4fce7c){if(!exchangeStopped)await handleError(_0x4fce7c,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x131b5c=config[_0x4be4ff(0x2c0)],_0x4b1fc0=![]){const _0x575a70=_0x4be4ff;if(allSymbols&&!_0x4b1fc0)return;try{markets=await exchange[_0x575a70(0x300)](),allSymbols=[],Object[_0x575a70(0x319)](markets)['forEach'](_0x371544=>{const _0x2d10e8=_0x575a70;_0x371544[0x1][_0x2d10e8(0x2e0)]&&_0x371544[0x1][_0x2d10e8(0x21b)]&&allSymbols[_0x2d10e8(0x2d3)](_0x371544[0x0]);});}catch(_0x4f6cb3){throw _0x4f6cb3;}}async function initclient(){const _0x3761f5=_0x4be4ff;emitLoadingProgress(),proxyEmit(_0x3761f5(0x2c6),emittedConfiguration()),proxyEmit(_0x3761f5(0x2fe),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3761f5(0x20f),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2e6709=getNormalizedPerformance();emitPerformance(_0x2e6709),getStartingBalances(_0x2e6709);}async function toggleBotMode(){const _0x45afd3=_0x4be4ff;let _0x5606b6=dbConfig[_0x45afd3(0x29d)](_0x45afd3(0x2e4))[_0x45afd3(0x230)]({'botID':botID})[_0x45afd3(0x2dd)]();if(_0x5606b6){const _0x108fd5=!_0x5606b6['headless'];dbConfig[_0x45afd3(0x29d)](_0x45afd3(0x2e4))[_0x45afd3(0x230)]({'botID':botID})[_0x45afd3(0x353)]({'headless':_0x108fd5})['write'](),config[_0x45afd3(0x20a)]=_0x108fd5,proxyEmit(_0x45afd3(0x2c6),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x267a72=_0x4be4ff;process[_0x267a72(0x2a3)]({'updatebotmanager':!![]},_0x50e7eb=>{});}async function loadCoins(_0x3aeedf){const _0x4e1f3c=_0x4be4ff;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x5e9f12,_0x240344=0x0,_0x254305=0x0;_0x3aeedf['forEach'](_0x6b45de=>{const _0x3bb974=_0x1531;loading['remainingSymbols'][_0x3bb974(0x2d3)](_0x6b45de);}),loadingCanceled=![];let _0x195ac2=![];while(_0x5e9f12!=_0x3aeedf['length']){_0x5e9f12=0x0,_0x3aeedf[_0x4e1f3c(0x1ff)](_0x18f55c=>{const _0x533be1=_0x4e1f3c;if(global[_0x533be1(0x2f9)][noslash(_0x18f55c)]){loading[_0x533be1(0x228)]=loading[_0x533be1(0x228)][_0x533be1(0x368)](_0x23b7ed=>_0x23b7ed!=_0x18f55c);if(!watchedSymbols[_0x533be1(0x234)](_0x18f55c))watchedSymbols['push'](_0x18f55c);_0x5e9f12++;}}),loading[_0x4e1f3c(0x35a)]=Math['round'](_0x5e9f12/_0x3aeedf['length']*0x64);loading[_0x4e1f3c(0x35a)]!=0x64&&(_0x254305>0x1e*0x5&&(loading[_0x4e1f3c(0x31b)]=!![],emitLoadingProgress()),_0x254305>0x78*0x5&&!_0x195ac2&&(loading[_0x4e1f3c(0x2f3)]=!![],emitLoadingProgress(),_0x195ac2=!![],logHistory(_0x4e1f3c(0x2f5),_0x4e1f3c(0x1f4)+loading[_0x4e1f3c(0x228)][_0x4e1f3c(0x29f)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x4e1f3c(0x2f5),_0x4e1f3c(0x28c)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0xf5d687=_0x4e1f3c;process['send']({'stop':_0xf5d687(0x2be)},_0x186be3=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4e1f3c(0x2f3)]=!![],emitLoadingProgress();break;}else _0x5e9f12!=_0x240344&&(_0x240344=_0x5e9f12,emitLoadingProgress()),_0x254305++,await sleep(0xc8);}_0x5e9f12==_0x3aeedf['length']&&(coinsLoaded=!![],process[_0x4e1f3c(0x2a3)]({'status':_0x4e1f3c(0x35e),'live':'running'},_0x1dabb6=>{}),_0x195ac2&&logHistory(_0x4e1f3c(0x1e8),_0x4e1f3c(0x340)));}function cancelLoading(){loadingCanceled=!![];}function _0x55ba(){const _0x104df0=['Executed\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','average','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','get','\x20value','join','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','emojibuy','\x20hour','send','186BxqjKL','apiSecret','Crypt','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','openOrders','startnumber','privateKey','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','2.3.5','fetchOpenOrders','getMinutes','ordertype','2\x20-\x20Orders\x20unlocked','sendMetricsTelegram','BNB','indexOf','type','initial','Avoiding\x20continuous\x20order\x20attempts','event-history','amountToPrecision','open','set','\x20:\x20','cost','toString','restart','fee','exchange','target','Uncaught\x20NetworkError:','getSeconds','event','kill','configuration','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','length','split','limit-high','no\x20open\x20orders','ID:\x20','64925DFhRgz','Unknown\x20error\x20occured','test','leftTxt','cooldown','Order\x20is\x20invalid:\x20','push','basecoinvalue','BNB/','excluded','sells','./version.json','2110ieIXHT','min','1WyHJwi','\x20API\x20secret\x20is\x20invalid','value','fetchBalance','cancelLoading','active','\x20has\x20a\x2024h\x20drop\x20of\x20','has','version','bot','exchange\x20reloaded','sort','cancelOrder','***','round','closed','deleteHistoryAlerts','Uncaught\x20ExchangeError:','path','TUSD','USDT','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','2\x20-\x20Handled\x20open\x20orders','showname','cancel','\x20API\x20key\x20is\x20invalid','error','RSA-OAEP','starting-balances','LOCKED','ticker','remove','./config/','liquidity','4126661JgIjRW','exchanges','UNLOCKING','loadMarkets','startprice','getHours','getPortfolio(0)','map','datetime','bots','customId','apply','delta','Binance','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','substring','bb-secure.json','unlinkSync','Initiating\x20exchange\x20reload','warning','watchOrders','startdate','exec','amount','currency','onepagemode','botname','1\x20-\x20FILLED:\x20','entries','eur','timeout','basecoin','\x20>\x20[DEBUG]\x20','RateLimitExceeded','-performance.json','performance','\x20|\x20','\x20portfolio:</b>\x20\x0a\x0a','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','order','resetHistory','-config.json','getCoins()','breakeven','getMonth','replace','-------------------------------\x0a','Executing\x20exchange\x20reload','exchange\x20not\x20reloaded','secure','getFullYear','Market','keys','net-fiat','1\x20-\x20Validate\x20orders:\x20','constructor','limits','createWriteStream','change24h','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','fees','Reset\x20|\x20','market','ORDERS.LOCKED','write','page','timeshift','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','hybrid-crypto-js','shift','ETH','reverse','added','10GRxjaA','2.6.0','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','AuthenticationError','max','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','date-fns','number','yargs/yargs','timestamp','recreateCoinResults()','usd','changes','assign','mkdirSync','277884UVcfGh','ExchangeNotAvailable','\x20minutes\x20-\x20','\x20|\x20Error\x20details:\x20','freeze','progress','starting-balance-','decrypt','orderId','enabled','Initializing\x20coin\x20results','398624zDkjOA','toFixed','API-key\x20format\x20invalid','change','debug','sortBy','message','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','filter','highest','milliseconds','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','yyyy-MM-dd\x27T\x27HH:mm:ss','ExchangeError','final','add','OrderNotFound','last','11673iofXtK','************','\x20not\x20responding','watchTrades','success','isEqual','bb-settings.json','placeOrder','stringify','createOrder','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','617698omwBLN','toggleBotMode','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','1\x20-\x20Handle\x20open\x20orders','must\x20be\x20greater\x20than\x20minimum\x20amount','Failed\x20to\x20load\x20coin\x20data\x20for\x20','limit','\x20|\x20lock\x20orders:\x20','colorscheme','\x20exchange','data','DDoSProtection','side','percentage','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Manual\x20balancing\x20required','forEach','limit-low','Cooldown\x20ended\x20-\x20balancing\x20resumed','Invalid\x20API\x20key\x20or\x20secret\x20entered','argv','apiPassword','apiKey','\x20change','2\x20-\x20Validate\x20orders:\x20','2.5.0','date','headless','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','coins','status','settings','balances','filled','/USD','NetworkError','recovery','total','emitHistory','search','\x20closed\x20the\x20connection','slice','valid','BUSD','spot','Uncaught\x20Exception:',':\x20timer\x20>','logs','Order\x20amount\x20is\x20invalid:\x20','Resetting\x20bot\x20history','price','storeFiat','no\x20additional\x20symbols','emojisell','0\x20-\x20EXECUTION:\x20','USD','UNLOCKED','remainingSymbols','password','\x20>\x20','ongoing','\x20order:\x20','BTC','fetchTickers','Portfolio\x20change\x20detected:\x20','find','defaults','none','additional\x20symbols\x20','includes','\x20network\x20error','autoliquidity','Unfilled\x20order(s)\x20canceled\x20after\x20','distribution','loadSymbols()','removed','\x20exchange\x20error','./logs/','/backup/','<b>','fetchTicker','offset','Net\x20','orderstatus','coin','sell','time','botID','uncaughtException','969616SRsmIf','EUR','abs','net-basecoin','storeHeadless','-events.json','2\x20-\x20FILLED\x20unknown\x20order:\x20','log','full','rightTxt','cloneDeep','<b>Bot\x20','buy','%\x20(','placeOrder()','ORDERS.UNLOCKING','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','</pre>','red_yellow_blue','getStartingBalances','fromCodePoint','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','args','\x20|\x20highest\x20fee:\x20','splice','sha256','parse','recreate','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20not\x20available','format','Net\x20effect','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Exchange','(((.+)+)+)+$','<pre>','InsufficientFunds','fiat','string','differenceInSeconds','/output-000.log','getTime','toUpperCase','3\x20-\x20handling\x20FILLED\x20order:\x20','trade','getCoinNumber()',':\x20Bot\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','bid','recent20',',\x20must\x20be\x20a\x203\x20digit\x20number','Limit\x20(low-margin)','realized','canceled','existsSync','toLowerCase','buys','\x20minutes','sendPortfolioTelegram','function','001','getDate','Limit\x20(high-margin)','portfolio','getOpenOrders()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','startsWith','Pausing\x20for\x20','ccxt','bot-','\x20metrics:</b>\x20\x0a\x0a','1\x20-\x20Unlock\x20orders','Bot\x20','symbol','yyyy/MM/dd','-results.json','threshold','MIN_NOTIONAL','padStart','Resetting\x20coin\x20results:\x20'];_0x55ba=function(){return _0x104df0;};return _0x55ba();}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x164b5b=_0x4be4ff;let _0x3b09db=global[_0x164b5b(0x2f9)][stablecoins[_0x164b5b(0x31a)]['coin']],_0x1e5330=global[_0x164b5b(0x2f9)][stablecoins['usd'][_0x164b5b(0x243)]];return{'eur':Number(_0x3b09db),'usd':Number(_0x1e5330)};}function capitalize(_0xa783dd){const _0x3f7382=_0x4be4ff;return _0xa783dd[_0x3f7382(0x30c)](0x0,0x1)[_0x3f7382(0x272)]()+_0xa783dd['substring'](0x1);}function supportedExchanges(){const _0x3eea5f=_0x4be4ff,_0x1c235c=['ws',_0x3eea5f(0x22e),'fetchTicker',_0x3eea5f(0x1e7),'watchOrders',_0x3eea5f(0x2e7),_0x3eea5f(0x1ed),'fetchOpenOrders','fetchClosedOrders',_0x3eea5f(0x2de)];let _0x1e0f2c=[],_0x54d9ed=[],_0x2ad0dd=ccxt[_0x3eea5f(0x2fe)];_0x2ad0dd[_0x3eea5f(0x1ff)](_0x4da3ca=>{const _0x34054c=_0x3eea5f;try{const _0x1eda30=new ccxt[_0x4da3ca]();if(_0x1eda30[_0x34054c(0x2e2)]['ws'])_0x54d9ed[_0x34054c(0x2d3)](_0x1eda30);}catch(_0x11bb7f){}}),_0x54d9ed['forEach'](_0x57995c=>{const _0x1e2334=_0x3eea5f;let _0x2fafca=0x0;_0x1c235c[_0x1e2334(0x1ff)](_0x58cd78=>{const _0x46dff3=_0x1e2334;_0x58cd78 in _0x57995c[_0x46dff3(0x2e2)]&&_0x57995c[_0x46dff3(0x2e2)][_0x58cd78]&&_0x2fafca++;}),_0x2fafca==_0x1c235c[_0x1e2334(0x2c8)]&&_0x1e0f2c[_0x1e2334(0x2d3)](capitalize(_0x57995c['id']));});let _0x57ba72=[];return _0x2ad0dd['forEach'](_0x54cef6=>{const _0x4ff24d=_0x3eea5f;_0x54cef6=capitalize(_0x54cef6);if(!_0x1e0f2c[_0x4ff24d(0x234)](_0x54cef6))_0x57ba72[_0x4ff24d(0x2d3)](_0x54cef6);}),_0x1e0f2c;}function setStartDatePerformance(){const _0x26eb37=_0x4be4ff;if(config&&config['liquidity'][0x0][_0x26eb37(0x352)][_0x26eb37(0x2c8)]!=0x0){const _0x3ee87f=config[_0x26eb37(0x2fc)][0x0]['changes'];dbPerformance['get']('data')[_0x26eb37(0x230)]({'date':config[_0x26eb37(0x312)]})[_0x26eb37(0x353)]({'coins':_0x3ee87f})[_0x26eb37(0x33d)]();}}async function recreateCoinResults(){const _0x48ee3d=_0x4be4ff;let _0x148cdb,_0x3573b3=[];try{const _0x536dd3=fns[_0x48ee3d(0x266)](fns['parseISO'](config[_0x48ee3d(0x312)][_0x48ee3d(0x32a)](/\//g,'-')),_0x48ee3d(0x36c));for(const _0x458589 of currentCoins){if(_0x458589[_0x48ee3d(0x243)]!=config[_0x48ee3d(0x31c)]){let _0xacb13c=0x0,_0x4f1963,_0x3bd63b;_0x148cdb=await getAllEventOrders(_0x458589[_0x48ee3d(0x292)]);if(_0x148cdb[_0x48ee3d(0x2c8)]>0x0)_0x148cdb[_0x48ee3d(0x1ff)](_0x593254=>{const _0x471de7=_0x48ee3d,_0x1cd368=_0x458589['symbol'][_0x471de7(0x234)](config[_0x471de7(0x31c)]+'/');_0x3573b3[_0x471de7(0x2d3)]({'datetime':_0x593254['datetime'],'coin':_0x458589['coin'],'symbol':_0x458589[_0x471de7(0x292)],'side':_0x593254[_0x471de7(0x1fb)],'reverse':_0x1cd368,'amount':formatResult(_0x593254[_0x471de7(0x210)],0x8),'filled':formatResult(_0x593254[_0x471de7(0x210)],0x8),'price':formatResult(_0x593254[_0x471de7(0x221)],0x8)}),_0xacb13c=_0x593254[_0x471de7(0x1fb)]==_0x471de7(0x254)?_0xacb13c+_0x593254[_0x471de7(0x210)]:_0xacb13c-_0x593254[_0x471de7(0x210)];if(!_0x3bd63b)_0x3bd63b=_0x593254['price'];});_0x4f1963=_0x458589[_0x48ee3d(0x34d)]-_0xacb13c;let _0x5c71ef;config['liquidity'][_0x48ee3d(0x1ff)](_0x1d85c9=>{const _0x53d891=_0x48ee3d;!_0x5c71ef&&(_0x5c71ef=_0x1d85c9[_0x53d891(0x352)][_0x53d891(0x230)](_0x178488=>_0x178488[_0x53d891(0x243)]==_0x458589[_0x53d891(0x243)]),_0x5c71ef&&(_0x4f1963=_0x5c71ef[_0x53d891(0x34d)],_0x3bd63b=_0x5c71ef[_0x53d891(0x221)]));});let _0x2c5bff=dbCoinResults[_0x48ee3d(0x29d)](_0x48ee3d(0x20c))[_0x48ee3d(0x230)]({'coin':_0x458589[_0x48ee3d(0x243)]})['value']();_0x2c5bff={'coin':_0x458589['coin'],'number':_0x4f1963,'breakeven':_0x3bd63b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x48ee3d(0x230)]({'coin':_0x458589['coin']})['assign'](_0x2c5bff)['write']();}}_0x3573b3[_0x48ee3d(0x2e6)]((_0x2bc060,_0xae3e93)=>_0x2bc060[_0x48ee3d(0x305)]>_0xae3e93[_0x48ee3d(0x305)]?0x1:_0xae3e93[_0x48ee3d(0x305)]>_0x2bc060[_0x48ee3d(0x305)]?-0x1:0x0);let _0x4606fb=0x0;for(let _0x58e5ad of _0x3573b3){await updateCoinResults(_0x58e5ad,!![]);}}catch(_0x10e9bc){await handleError(_0x10e9bc,_0x48ee3d(0x350));}}async function getAllEventOrders(_0x57c80d){const _0x565b4b=_0x4be4ff;let _0x856ceb=[],_0x40aa18=dbLogs[_0x565b4b(0x29d)]('logs')['filter'](_0x5ecbed=>{const _0x44879d=_0x565b4b,_0x2c3424=_0x5ecbed['event'][_0x44879d(0x27f)]();return _0x2c3424[_0x44879d(0x234)](_0x57c80d[_0x44879d(0x27f)]())&&(_0x2c3424[_0x44879d(0x234)](_0x44879d(0x33b))&&_0x2c3424[_0x44879d(0x234)](_0x44879d(0x324))||_0x2c3424['includes'](_0x44879d(0x210))&&_0x2c3424[_0x44879d(0x234)]('order'));})['sortBy'](_0x565b4b(0x245))[_0x565b4b(0x2dd)]();return _0x40aa18['forEach'](_0x5e06b0=>{const _0x3e1e8c=_0x565b4b,_0x3dc410=_0x5e06b0[_0x3e1e8c(0x2c4)][_0x3e1e8c(0x234)](_0x3e1e8c(0x244))?_0x3e1e8c(0x244):_0x3e1e8c(0x254),_0x658d90=/#([0-9]|\.)+\s/i,_0x35d21c=Number(_0x658d90[_0x3e1e8c(0x313)](_0x5e06b0[_0x3e1e8c(0x2c4)])[0x0][_0x3e1e8c(0x218)](0x1)),_0x4eea39=/@([0-9]|\.)+$/i,_0x1a59ba=Number(_0x4eea39[_0x3e1e8c(0x313)](_0x5e06b0[_0x3e1e8c(0x2c4)])[0x0]['slice'](0x1));_0x856ceb['push']({'datetime':_0x5e06b0[_0x3e1e8c(0x245)],'coin':symbolToCoin(_0x57c80d),'symbol':_0x57c80d,'side':_0x3dc410,'amount':_0x35d21c,'filled':_0x35d21c,'price':_0x1a59ba});}),_0x856ceb;}async function getAllOrders(_0x587765,_0x493315){const _0x5316be=_0x4be4ff;let _0x565b00=[];while(_0x493315<exchange[_0x5316be(0x36a)]()){const _0x1dfaea=0x1f4,_0x5ecc4f=await exchange['fetchClosedOrders'](_0x587765,_0x493315,_0x1dfaea);if(_0x5ecc4f['length'])_0x493315=_0x5ecc4f[_0x5ecc4f[_0x5316be(0x2c8)]-0x1][_0x5316be(0x34f)]+0x1,_0x565b00=_0x565b00['concat'](_0x5ecc4f);else break;}return _0x565b00;}async function validate24hChanges(){const _0x1be5d8=_0x4be4ff;for(const _0x91b723 of currentCoins){if(_0x91b723[_0x1be5d8(0x243)]!=config['basecoin']){let _0x1c0646;_0x91b723[_0x1be5d8(0x344)]?_0x1c0646=formatResult((0x1/(global[_0x1be5d8(0x363)][noslash(_0x91b723['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1c0646=global[_0x1be5d8(0x363)][noslash(_0x91b723[_0x1be5d8(0x292)])],_0x1c0646<config[_0x1be5d8(0x337)]&&(logHistory('error',_0x91b723[_0x1be5d8(0x243)]+_0x1be5d8(0x2e1)+_0x1c0646+'%'),logHistory(_0x1be5d8(0x2f5),_0x1be5d8(0x34b)),logHistory(_0x1be5d8(0x2f5),_0x1be5d8(0x2f0)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5a25fc,_0x5891bc){const _0x34c245=_0x4be4ff;if(!_0x5a25fc)return!![];const _0x2e890b=_0x5891bc[_0x34c245(0x2c9)]('.'),_0x199d13=_0x5a25fc['split']('.');for(var _0x55fdde=0x0;_0x55fdde<_0x199d13['length'];_0x55fdde++){const _0x4e3ba9=~~_0x199d13[_0x55fdde],_0x3e1f9a=~~_0x2e890b[_0x55fdde];if(_0x4e3ba9<_0x3e1f9a)return!![];if(_0x4e3ba9>_0x3e1f9a)return![];}return![];}async function oneTimeMigration(){const _0x47ca2b=_0x4be4ff;let _0x27c5ac=dbLogs[_0x47ca2b(0x29d)](_0x47ca2b(0x2e3))['value']();if(isOlderVersion(_0x27c5ac,_0x47ca2b(0x2ac))){let _0x13a91a=[];const _0x5e49b6=dbLogs[_0x47ca2b(0x29d)](_0x47ca2b(0x21e))[_0x47ca2b(0x2dd)]();_0x5e49b6['forEach'](_0xba24b2=>{const _0x494fc2=_0x47ca2b;_0x13a91a['push']({'time':_0xba24b2[_0x494fc2(0x245)],'type':_0xba24b2['type'],'event':_0xba24b2[_0x494fc2(0x2c4)]});}),dbLogs[_0x47ca2b(0x29d)](_0x47ca2b(0x21e))[_0x47ca2b(0x353)](_0x13a91a)[_0x47ca2b(0x33d)]();}let _0x598f5f=dbConfig[_0x47ca2b(0x29d)](_0x47ca2b(0x2e3))[_0x47ca2b(0x2dd)]();if(isOlderVersion(_0x598f5f,_0x47ca2b(0x2ac))){let _0x24c1a1=dbConfig[_0x47ca2b(0x29d)]('bot')[_0x47ca2b(0x230)]({'botID':botID})[_0x47ca2b(0x2dd)]();if(_0x24c1a1){let _0x2b69c1=[];_0x24c1a1['portfolio']['forEach'](_0x2a1925=>{const _0xed4ae1=_0x47ca2b;_0x2b69c1[_0xed4ae1(0x2d3)]({'coin':_0x2a1925['coin'],'number':_0x2a1925[_0xed4ae1(0x2a9)],'price':_0x2a1925[_0xed4ae1(0x301)]}),delete _0x2a1925[_0xed4ae1(0x2a9)],delete _0x2a1925['startprice'];});if(_0x2b69c1[_0x47ca2b(0x2c8)]!==0x0)fs['writeFile'](configbackuppath+(_0x47ca2b(0x35b)+botID+'.json'),JSON[_0x47ca2b(0x1ec)](_0x2b69c1,null,0x4),function(_0x3764d1){if(_0x3764d1){}});const _0x132896=(_0x2d59d3,_0x165a7a)=>{const _0x4553c6=_0x47ca2b;let _0x19d0e4=[];_0x165a7a[_0x4553c6(0x1ff)](_0x28fdb2=>{const _0x36c7d4=_0x4553c6,_0x4b8c26=_0x2d59d3[_0x36c7d4(0x230)](_0x2be7fa=>_0x2be7fa[_0x36c7d4(0x243)]==_0x28fdb2[_0x36c7d4(0x243)]);if(!_0x4b8c26)_0x19d0e4['push'](_0x28fdb2);});let _0x28a806=[];return _0x2d59d3[_0x4553c6(0x1ff)](_0xc5881f=>{const _0x40899a=_0x4553c6,_0x4dd04c=_0x165a7a[_0x40899a(0x230)](_0x396abb=>_0x396abb[_0x40899a(0x243)]==_0xc5881f[_0x40899a(0x243)]);if(!_0x4dd04c||_0x4dd04c[_0x40899a(0x34d)]==0x0&&_0xc5881f[_0x40899a(0x34d)]!=0x0)_0x28a806[_0x40899a(0x2d3)](_0xc5881f);}),{'missingDay1':_0x19d0e4,'notInDay2':_0x28a806};},_0x537fe2=dbPerformance[_0x47ca2b(0x29d)](_0x47ca2b(0x1f9))['cloneDeep']()[_0x47ca2b(0x2dd)]();if(_0x537fe2[_0x47ca2b(0x2c8)]>0x1){const {missingDay1:_0x20dd14,notInDay2:_0x28043e}=_0x132896(_0x2b69c1,_0x537fe2[0x1][_0x47ca2b(0x20c)]);_0x2b69c1=[..._0x2b69c1,..._0x20dd14],_0x28043e[_0x47ca2b(0x1ff)](_0x4f967e=>{const _0x4f0777=_0x47ca2b;let _0x25cf5a=_0x2b69c1['findIndex'](_0x292b6d=>_0x292b6d[_0x4f0777(0x243)]==_0x4f967e[_0x4f0777(0x243)]);_0x25cf5a!=-0x1&&_0x2b69c1[_0x4f0777(0x260)](_0x25cf5a,0x1);});}_0x2b69c1[_0x47ca2b(0x2e6)]((_0x26a285,_0x2e7c48)=>_0x26a285[_0x47ca2b(0x243)]>_0x2e7c48[_0x47ca2b(0x243)]?0x1:_0x2e7c48[_0x47ca2b(0x243)]>_0x26a285[_0x47ca2b(0x243)]?-0x1:0x0);let _0x46315c=[{'date':_0x24c1a1[_0x47ca2b(0x312)],'changes':_0x2b69c1}];_0x537fe2[_0x47ca2b(0x2c8)]>0x2&&_0x537fe2['forEach']((_0x10c6ff,_0x3bf998)=>{const _0xc183bf=_0x47ca2b;if(_0x3bf998>0x0&&_0x3bf998<_0x537fe2[_0xc183bf(0x2c8)]-0x1){const {missingDay1:_0xcb120e,notInDay2:_0x24fabc}=_0x132896(_0x537fe2[_0x3bf998][_0xc183bf(0x20c)],_0x537fe2[_0x3bf998+0x1][_0xc183bf(0x20c)]);_0x2b69c1=[],(_0xcb120e['length']!=0x0||_0x24fabc[_0xc183bf(0x2c8)]!=0x0)&&(_0xcb120e[_0xc183bf(0x2c8)]!=0x0&&_0x2b69c1['push'](..._0xcb120e),_0x24fabc['length']!=0x0&&(_0x24fabc[_0xc183bf(0x1ff)](_0x5c4c=>{const _0xbf5fd2=_0xc183bf;_0x5c4c[_0xbf5fd2(0x34d)]=-_0x5c4c['number'];}),_0x2b69c1[_0xc183bf(0x2d3)](..._0x24fabc)),_0x2b69c1['sort']((_0x76893c,_0x11a836)=>_0x76893c['coin']>_0x11a836[_0xc183bf(0x243)]?0x1:_0x11a836[_0xc183bf(0x243)]>_0x76893c[_0xc183bf(0x243)]?-0x1:0x0),_0x46315c['push']({'date':_0x537fe2[_0x3bf998+0x1][_0xc183bf(0x209)],'changes':_0x2b69c1}));}}),dbConfig[_0x47ca2b(0x29d)](_0x47ca2b(0x2e4))[_0x47ca2b(0x230)]({'botID':botID})[_0x47ca2b(0x353)]({..._0x24c1a1,'liquidity':_0x46315c})[_0x47ca2b(0x33d)]();}}if(isOlderVersion(_0x598f5f,_0x47ca2b(0x347))){let _0x5f49c9=dbConfig[_0x47ca2b(0x29d)]('bot')[_0x47ca2b(0x230)]({'botID':botID})[_0x47ca2b(0x2dd)]();if(_0x5f49c9){const _0x21a9c2=_0x5f49c9[_0x47ca2b(0x2c0)],_0x3ecd3b=_0x21a9c2?capitalize(_0x21a9c2):_0x47ca2b(0x30a);dbConfig[_0x47ca2b(0x29d)]('bot')[_0x47ca2b(0x230)]({'botID':botID})[_0x47ca2b(0x353)]({'exchange':_0x3ecd3b})['write']();}}let _0x416373=dbPerformance['get'](_0x47ca2b(0x2e3))[_0x47ca2b(0x2dd)]();isOlderVersion(_0x416373,'2.3.5')&&setStartDatePerformance();let _0x1d693f=dbCoinResults[_0x47ca2b(0x29d)](_0x47ca2b(0x2e3))[_0x47ca2b(0x2dd)]();if(isOlderVersion(_0x1d693f,_0x47ca2b(0x208))){let _0x167d44=dbCoinResults[_0x47ca2b(0x29d)]('coins')[_0x47ca2b(0x2dd)]();if(_0x167d44[_0x47ca2b(0x2c8)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x449789=_0x4be4ff;dbConfig[_0x449789(0x2ba)](_0x449789(0x2e3),serverversion)['write'](),dbPerformance[_0x449789(0x2ba)](_0x449789(0x2e3),serverversion)[_0x449789(0x33d)](),dbLogs[_0x449789(0x2ba)]('version',serverversion)['write'](),dbCoinResults[_0x449789(0x2ba)](_0x449789(0x2e3),serverversion)[_0x449789(0x33d)]();}function getConfiguration(_0x5e7cf6){const _0x2bcca6=_0x4be4ff;let _0x21ffb7=dbConfig['get'](_0x2bcca6(0x2e4))[_0x2bcca6(0x230)]({'botID':_0x5e7cf6})[_0x2bcca6(0x2dd)]();if(_0x21ffb7){let _0x289294=![];typeof _0x21ffb7[_0x2bcca6(0x295)]==_0x2bcca6(0x26e)&&(_0x21ffb7={..._0x21ffb7,'threshold':Number(_0x21ffb7['threshold'])},_0x289294=!![]),_0x21ffb7[_0x2bcca6(0x337)]==null&&(_0x21ffb7={..._0x21ffb7,'change24h':-0x14},_0x289294=!![]),!_0x21ffb7[_0x2bcca6(0x26d)]&&(_0x21ffb7={..._0x21ffb7,'fiat':'USD'},_0x289294=!![]),!_0x21ffb7['onepagemode']&&(_0x21ffb7={..._0x21ffb7,'onepagemode':settings[_0x2bcca6(0x316)]},_0x289294=!![]),!_0x21ffb7[_0x2bcca6(0x1f7)]&&(_0x21ffb7={..._0x21ffb7,'colorscheme':_0x2bcca6(0x25a)},_0x289294=!![]),!_0x21ffb7[_0x2bcca6(0x236)]&&(_0x21ffb7={..._0x21ffb7,'autoliquidity':!![]},_0x289294=!![]),_0x289294&&(_0x21ffb7={'botID':_0x21ffb7[_0x2bcca6(0x246)],'exchange':_0x21ffb7[_0x2bcca6(0x2c0)],'apiKey':_0x21ffb7[_0x2bcca6(0x205)],'apiSecret':_0x21ffb7[_0x2bcca6(0x2a5)],'apiPassword':_0x21ffb7[_0x2bcca6(0x204)],'basecoin':_0x21ffb7['basecoin'],'botname':_0x21ffb7['botname'],'showname':_0x21ffb7[_0x2bcca6(0x2f2)],'threshold':_0x21ffb7[_0x2bcca6(0x295)],'ordertype':_0x21ffb7[_0x2bcca6(0x2af)],'timeout':_0x21ffb7[_0x2bcca6(0x31b)],'fiat':_0x21ffb7[_0x2bcca6(0x26d)],'startdate':_0x21ffb7[_0x2bcca6(0x312)],'recreate':_0x21ffb7[_0x2bcca6(0x263)],'timeshift':_0x21ffb7['timeshift'],'onepagemode':_0x21ffb7[_0x2bcca6(0x316)],'headless':_0x21ffb7[_0x2bcca6(0x20a)],'cooldown':_0x21ffb7[_0x2bcca6(0x2d1)],'change24h':_0x21ffb7['change24h'],'emojibuy':_0x21ffb7[_0x2bcca6(0x2a1)],'emojisell':_0x21ffb7[_0x2bcca6(0x224)],'colorscheme':_0x21ffb7[_0x2bcca6(0x1f7)],'portfolio':_0x21ffb7[_0x2bcca6(0x287)],'autoliquidity':_0x21ffb7[_0x2bcca6(0x236)],'liquidity':_0x21ffb7[_0x2bcca6(0x2fc)],'openOrders':_0x21ffb7['openOrders']},dbConfig[_0x2bcca6(0x29d)](_0x2bcca6(0x2e4))[_0x2bcca6(0x2fa)]()['write'](),dbConfig[_0x2bcca6(0x29d)](_0x2bcca6(0x2e4))[_0x2bcca6(0x2d3)](_0x21ffb7)[_0x2bcca6(0x33d)]());}else _0x21ffb7={'botID':_0x5e7cf6,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2bcca6(0x291)+_0x5e7cf6,'showname':![],'threshold':0x3,'ordertype':_0x2bcca6(0x33b),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x2bcca6(0x33f)],'onepagemode':settings[_0x2bcca6(0x316)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2bcca6(0x25a),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x21ffb7;}function emittedConfiguration(){const _0x27f456=_0x4be4ff;let _0x14f1b0;if(config['apiKey']=='')_0x14f1b0={...config,'configstate':_0x27f456(0x2b5)};else config[_0x27f456(0x205)]=='***'?_0x14f1b0={...config,'configstate':_0x27f456(0x213)}:(_0x14f1b0={...config,'apiKey':_0x27f456(0x1e5),'apiSecret':'************'},config[_0x27f456(0x204)]&&(_0x14f1b0[_0x27f456(0x204)]='************'));return _0x14f1b0;}function getSettings(){const _0x5c447c=_0x4be4ff;return dbSettings[_0x5c447c(0x29d)](_0x5c447c(0x20e))[_0x5c447c(0x2dd)]();}function getSecure(){const _0x184daa=_0x4be4ff;return dbSecure['get'](_0x184daa(0x32e))[_0x184daa(0x2dd)]()||{};}function updateTimeshift(_0x18a93c){const _0x1f9e38=_0x4be4ff;let _0x1b4397=dbConfig['get'](_0x1f9e38(0x2e4))['find']({'botID':botID})[_0x1f9e38(0x2dd)]();_0x1b4397&&dbConfig[_0x1f9e38(0x29d)](_0x1f9e38(0x2e4))[_0x1f9e38(0x230)]({'botID':botID})['assign']({'timeshift':_0x18a93c})['write'](),config[_0x1f9e38(0x33f)]=_0x18a93c,proxyEmit(_0x1f9e38(0x2c6),emittedConfiguration());}function updateOnepagemode(_0x59dc95){const _0x2a88c5=_0x4be4ff;let _0x2ace91=dbConfig[_0x2a88c5(0x29d)]('bot')[_0x2a88c5(0x230)]({'botID':botID})[_0x2a88c5(0x2dd)]();_0x2ace91&&dbConfig[_0x2a88c5(0x29d)](_0x2a88c5(0x2e4))['find']({'botID':botID})['assign']({'onepagemode':_0x59dc95})['write'](),config[_0x2a88c5(0x316)]=_0x59dc95,proxyEmit(_0x2a88c5(0x2c6),emittedConfiguration());}async function storeConfiguration(_0x8190d8){const _0x37fd47=_0x4be4ff;logger[_0x37fd47(0x364)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x37fd47(0x364)]('Transaction\x20detection\x20blocked');let _0xd88c01=[],_0x447b4a=![],_0x5545e1=![],_0x13ffa9=[];_0x8190d8[_0x37fd47(0x287)][_0x37fd47(0x1ff)](_0x734fb8=>{const _0x71c78=_0x37fd47;if(!_0x734fb8[_0x71c78(0x2d6)]&&_0x734fb8[_0x71c78(0x243)]!=_0x8190d8[_0x71c78(0x31c)])_0x13ffa9[_0x71c78(0x2d3)](_0x734fb8[_0x71c78(0x292)]);}),_0x13ffa9[_0x37fd47(0x1ff)](_0x15c6d8=>{const _0x1214a0=_0x37fd47,_0x167b12=watchedSymbols[_0x1214a0(0x234)](_0x15c6d8);!_0x167b12&&_0xd88c01[_0x1214a0(0x2d3)](_0x15c6d8);}),_0x13ffa9[_0x37fd47(0x1ff)](_0x137232=>{const _0x553e58=_0x37fd47,_0x3da2ea=currentCoins[_0x553e58(0x230)](_0x51030b=>_0x51030b['symbol']==_0x137232);!_0x3da2ea&&(_0x447b4a=!![]);}),currentCoins[_0x37fd47(0x1ff)](_0x2e5bae=>{const _0x1c33db=_0x37fd47;if(_0x2e5bae['coin']!=config[_0x1c33db(0x31c)]){const _0x3d10b1=_0x13ffa9[_0x1c33db(0x230)](_0x51096b=>_0x51096b==_0x2e5bae['symbol']);!_0x3d10b1&&(_0x447b4a=!![]);}}),_0x8190d8['portfolio'][_0x37fd47(0x1ff)](_0x14668f=>{const _0x114f93=_0x37fd47,_0x4f6d64=config[_0x114f93(0x287)][_0x114f93(0x230)](_0x215721=>_0x215721[_0x114f93(0x243)]==_0x14668f[_0x114f93(0x243)]);if(_0x4f6d64&&_0x14668f['offset']!=_0x4f6d64[_0x114f93(0x240)])_0x5545e1=!![];});let _0x63ffc2=dbConfig[_0x37fd47(0x29d)](_0x37fd47(0x2e4))[_0x37fd47(0x230)]({'botID':botID})[_0x37fd47(0x2dd)]();_0x8190d8={..._0x8190d8,'apiKey':crypt[_0x37fd47(0x35c)](secure[_0x37fd47(0x2aa)],_0x8190d8[_0x37fd47(0x205)])[_0x37fd47(0x366)],'apiSecret':crypt['decrypt'](secure[_0x37fd47(0x2aa)],_0x8190d8[_0x37fd47(0x2a5)])[_0x37fd47(0x366)]};_0x8190d8[_0x37fd47(0x204)]&&(_0x8190d8[_0x37fd47(0x204)]=crypt[_0x37fd47(0x35c)](secure[_0x37fd47(0x2aa)],_0x8190d8[_0x37fd47(0x204)])['message']);let _0x68d888=![];if(_0x63ffc2){_0x8190d8[_0x37fd47(0x205)]==_0x37fd47(0x1e5)?_0x8190d8[_0x37fd47(0x205)]=config[_0x37fd47(0x205)]:_0x68d888=!![];_0x8190d8['apiSecret']==_0x37fd47(0x1e5)?_0x8190d8['apiSecret']=config[_0x37fd47(0x2a5)]:_0x68d888=!![];if(_0x8190d8[_0x37fd47(0x204)]==_0x37fd47(0x1e5))_0x8190d8['apiPassword']=config['apiPassword'];else{if(_0x8190d8[_0x37fd47(0x204)])_0x68d888=!![];}dbConfig[_0x37fd47(0x29d)](_0x37fd47(0x2e4))['find']({'botID':botID})[_0x37fd47(0x353)](_0x8190d8)[_0x37fd47(0x33d)]();}else dbConfig[_0x37fd47(0x29d)]('bot')[_0x37fd47(0x2d3)](_0x8190d8)['write'](),_0x68d888=!![],process[_0x37fd47(0x2a3)]({'status':_0x37fd47(0x35e),'live':'running'},_0x268169=>{});process['send']({'botname':_0x8190d8[_0x37fd47(0x317)]},_0x3a0754=>{}),updateBotManager(),config={..._0x8190d8},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x68d888)await reset(_0xd88c01,!![]);else _0x447b4a||_0x5545e1?await reset(_0xd88c01,![]):getBalances();blockTransactionDetection=![],logger[_0x37fd47(0x364)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x1b3394){const _0x4faf68=_0x4be4ff,_0x34526f={...config,'headless':_0x1b3394[_0x4faf68(0x20a)]};let _0x5a7172=dbConfig[_0x4faf68(0x29d)](_0x4faf68(0x2e4))[_0x4faf68(0x230)]({'botID':botID})['value']();_0x5a7172&&dbConfig['get'](_0x4faf68(0x2e4))[_0x4faf68(0x230)]({'botID':botID})['assign'](_0x34526f)['write'](),config={..._0x34526f},updateBotManager(),proxyEmit(_0x4faf68(0x2c6),emittedConfiguration());}async function storeFiat(_0x48b42e){const _0x360d16=_0x4be4ff,_0x2773ec={...config,'fiat':_0x48b42e};let _0x32deba=dbConfig[_0x360d16(0x29d)](_0x360d16(0x2e4))[_0x360d16(0x230)]({'botID':botID})[_0x360d16(0x2dd)]();_0x32deba&&dbConfig[_0x360d16(0x29d)](_0x360d16(0x2e4))['find']({'botID':botID})[_0x360d16(0x353)](_0x2773ec)['write'](),config={..._0x2773ec},proxyEmit(_0x360d16(0x2c6),emittedConfiguration());}function resetHistory(){const _0xe5b085=_0x4be4ff;logger['full'](_0xe5b085(0x220));try{if(fs[_0xe5b085(0x27e)](path[_0xe5b085(0x29f)](configpath,_0xe5b085(0x28e)+botID+_0xe5b085(0x24d))))fs[_0xe5b085(0x30e)](path[_0xe5b085(0x29f)](configpath,'bot-'+botID+'-events.json'));if(fs[_0xe5b085(0x27e)](path['join'](configpath,_0xe5b085(0x28e)+botID+'-performance.json')))fs[_0xe5b085(0x30e)](path['join'](configpath,_0xe5b085(0x28e)+botID+_0xe5b085(0x31f)));if(fs[_0xe5b085(0x27e)](path['join'](configpath,_0xe5b085(0x28e)+botID+'-results.json')))fs[_0xe5b085(0x30e)](path[_0xe5b085(0x29f)](configpath,_0xe5b085(0x28e)+botID+'-results.json'));}catch(_0xf2cfd6){if(_0xf2cfd6)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0xf2cfd6);}const _0x2dee41=getDate();let _0x1abbf6=[];currentCoins[_0xe5b085(0x1ff)](_0x513fe6=>{const _0x88e160=_0xe5b085;_0x1abbf6[_0x88e160(0x2d3)]({'coin':_0x513fe6[_0x88e160(0x243)],'number':_0x513fe6['number'],'price':_0x513fe6['last']});});let _0x4cbe88=dbConfig[_0xe5b085(0x29d)](_0xe5b085(0x2e4))[_0xe5b085(0x230)]({'botID':botID})[_0xe5b085(0x2dd)]();_0x4cbe88&&(dbConfig[_0xe5b085(0x29d)](_0xe5b085(0x2e4))[_0xe5b085(0x230)]({'botID':botID})['assign']({'liquidity':[{'date':_0x2dee41,'changes':_0x1abbf6}]})[_0xe5b085(0x33d)](),config[_0xe5b085(0x2fc)]=[]),process['send']({'stop':'restart'},_0x40ab7c=>{});}function noslash(_0x26c315){return _0x26c315['replace']('/','');}function updateHighestFee(_0x5aa7cd){const _0x5871c5=_0x4be4ff;if(_0x5aa7cd[_0x5871c5(0x344)]){let _0x22274c={'filled':_0x5aa7cd[_0x5871c5(0x210)]*_0x5aa7cd['price'],'amount':_0x5aa7cd[_0x5871c5(0x210)]*_0x5aa7cd[_0x5871c5(0x221)],'side':_0x5aa7cd['side']==_0x5871c5(0x244)?_0x5871c5(0x254):_0x5871c5(0x244),'price':0x1/_0x5aa7cd['price']};_0x5aa7cd={..._0x5aa7cd,..._0x22274c};}const _0x1ac387=defaultFee*_0x5aa7cd[_0x5871c5(0x210)]*_0x5aa7cd[_0x5871c5(0x221)];lastFees[_0x5871c5(0x279)][_0x5871c5(0x2c8)]===0x14&&lastFees['recent20'][_0x5871c5(0x342)](),lastFees[_0x5871c5(0x279)]['push'](_0x1ac387),lastFees['highest']=Math[_0x5871c5(0x34a)](...lastFees[_0x5871c5(0x279)]);}async function updateNumberCoinsCcxt(_0x1fb21e){const _0x3aefd7=_0x4be4ff;logger[_0x3aefd7(0x364)](_0x3aefd7(0x225)+_0x1fb21e[_0x3aefd7(0x292)]+_0x3aefd7(0x321)+_0x1fb21e[_0x3aefd7(0x20d)]+_0x3aefd7(0x321)+_0x1fb21e['id']);let _0x20007f=_0x1fb21e['status'],_0x3c921d=![];currentCoins[_0x3aefd7(0x1ff)](_0x4aac31=>{const _0x247b2d=_0x3aefd7;_0x4aac31[_0x247b2d(0x292)]==_0x1fb21e[_0x247b2d(0x292)]&&(_0x3c921d=!![]);});if(!_0x3c921d)return;const _0x151f62=currentCoins[_0x3aefd7(0x230)](_0x1c2e33=>_0x1c2e33[_0x3aefd7(0x292)]==_0x1fb21e['symbol']),_0xaa0c03=_0x1c691e=>{const _0x440f8c=_0x3aefd7;if(_0x151f62)_0x151f62[_0x440f8c(0x242)]=_0x1c691e;};if(_0x20007f==_0x3aefd7(0x2b9))_0xaa0c03(_0x3aefd7(0x2b9));else{if(_0x20007f==_0x3aefd7(0x27d)){_0xaa0c03(_0x3aefd7(0x27d));const _0x6e1fd8=await getCoins();[currentCoins,currentCoinsAll]=_0x6e1fd8,await getOpenOrders(),handleOpenOrders();}else{if(_0x20007f=='closed'){logger[_0x3aefd7(0x364)](_0x3aefd7(0x318)+_0x1fb21e[_0x3aefd7(0x292)]+'\x20|\x20'+_0x1fb21e[_0x3aefd7(0x210)]+'\x20|\x20'+_0x1fb21e['id']);let _0x3896b4=![];if(lastOrders)for(const _0x556be2 of lastOrders){const _0x454123=0xc8,_0x39bfa4=0x1388;let _0x2e2248=0x0;while(!_0x556be2['orderId']&&_0x2e2248*_0x454123<_0x39bfa4){_0x2e2248++,await sleep(_0x454123);}if(_0x2e2248>0x0)logger[_0x3aefd7(0x364)]('Waited\x20'+_0x2e2248*_0x454123/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x556be2['orderId']==_0x1fb21e['id']){logger[_0x3aefd7(0x364)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x1fb21e['id']),_0x3896b4=!![];if(_0x556be2[_0x3aefd7(0x210)]==0x0){logger[_0x3aefd7(0x364)](_0x3aefd7(0x273)+_0x1fb21e['id']);if(_0x1fb21e[_0x3aefd7(0x29b)])_0x556be2['price']=_0x1fb21e['average'];else{if(_0x1fb21e[_0x3aefd7(0x221)])_0x556be2[_0x3aefd7(0x221)]=_0x1fb21e[_0x3aefd7(0x221)];else{}}_0x556be2[_0x3aefd7(0x210)]=_0x1fb21e[_0x3aefd7(0x210)],updateHighestFee(_0x556be2),_0xaa0c03('filled'),await validateOrders();if(lockOrders==ORDERS[_0x3aefd7(0x2f8)]){const _0x343ed4=await getCoins();[currentCoins,currentCoinsAll]=_0x343ed4;}_0x556be2[_0x3aefd7(0x2bf)]={'currency':_0x1fb21e['fee']?_0x1fb21e[_0x3aefd7(0x2bf)]['currency']:null,'cost':_0x1fb21e[_0x3aefd7(0x2bf)]?_0x1fb21e[_0x3aefd7(0x2bf)][_0x3aefd7(0x2bc)]:0x0},await updateCoinResults(_0x556be2);}}}if(!_0x3896b4){logger['debug'](_0x3aefd7(0x24e)+_0x1fb21e['id']),_0xaa0c03(_0x3aefd7(0x210));const _0x99b24c=await getCoins();[currentCoins,currentCoinsAll]=_0x99b24c,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x386c28=JSON[_0x3aefd7(0x262)](lastBalances[_0x3aefd7(0x287)]);const _0x477689=_0x386c28[_0x3aefd7(0x230)](_0x24b6fb=>_0x24b6fb[_0x3aefd7(0x292)]==_0x1fb21e[_0x3aefd7(0x292)]);if(_0x477689){if(_0x20007f==_0x3aefd7(0x2b9))_0x477689[_0x3aefd7(0x242)]=_0x477689[_0x3aefd7(0x242)]==_0x3aefd7(0x210)?_0x3aefd7(0x210):_0x3aefd7(0x2b9);else{if(_0x20007f=='canceled')_0x477689[_0x3aefd7(0x242)]=_0x477689[_0x3aefd7(0x242)]=='filled'?_0x3aefd7(0x210):_0x3aefd7(0x27d);else _0x20007f==_0x3aefd7(0x2ea)&&(_0x477689[_0x3aefd7(0x242)]=_0x3aefd7(0x210));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3aefd7(0x1ec)](_0x386c28)},proxyEmit(_0x3aefd7(0x20f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x474ea9=_0x4be4ff;await getOpenOrders();let _0x379f7a=![];currentCoins[_0x474ea9(0x1ff)](_0x10cc2e=>{const _0x48c33d=_0x474ea9;_0x379f7a=allOpenOrders[_0x48c33d(0x230)](_0x47cb91=>_0x47cb91[_0x48c33d(0x292)]==_0x10cc2e[_0x48c33d(0x292)]),_0x10cc2e[_0x48c33d(0x242)]=_0x379f7a?_0x48c33d(0x2b9):_0x48c33d(0x232);});}async function getCoins(_0x3adef9=!![],_0x346233=config[_0x4be4ff(0x31c)]){const _0x506b74=_0x4be4ff;let _0x309874,_0x3b9420=[],_0x1f2320=[],_0x5cfe75=[],_0x2e36eb=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x309874=await exchange[_0x506b74(0x2de)](),mybalances=_0x309874[_0x506b74(0x214)];for(const [_0x50aca5,_0x34c2e3]of Object[_0x506b74(0x319)](mybalances)){_0x2e36eb[_0x506b74(0x2d3)](_0x50aca5);}if(_0x346233=='')for(const [_0x36c4bb,_0x282f62]of Object[_0x506b74(0x319)](mybalances)){_0x282f62!=0x0&&_0x1f2320[_0x506b74(0x2d3)]({'coin':_0x36c4bb});}else{let _0x547103=![];for(const [_0x19e741,_0x5e0abe]of Object['entries'](mybalances)){if(_0x2e36eb['includes'](_0x19e741)){const _0x4f0894=config[_0x506b74(0x287)]['find'](_0x2464e0=>_0x2464e0[_0x506b74(0x243)]==_0x19e741),_0x1d2b36=_0x19e741+'/'+_0x346233,_0x2c94a4=_0x346233+'/'+_0x19e741,_0x300dad=currentCoins['find'](_0x9ffc0e=>_0x9ffc0e['coin']==_0x19e741);_0x547103=![];if((_0x5e0abe!=0x0||_0x4f0894)&&(allSymbols['includes'](_0x1d2b36)||_0x19e741==_0x346233))_0x19e741!=_0x346233&&_0x3b9420[_0x506b74(0x2d3)](_0x1d2b36),_0x1f2320[_0x506b74(0x2d3)]({'coin':_0x19e741,'symbol':_0x1d2b36,'reverse':![],'number':Math[_0x506b74(0x34a)](_0x5e0abe+(_0x4f0894&&_0x4f0894['offset']||0x0),0x0),'orderstatus':_0x300dad?_0x300dad[_0x506b74(0x242)]:_0x506b74(0x232)});else(_0x5e0abe!=0x0||_0x4f0894)&&allSymbols[_0x506b74(0x234)](_0x2c94a4)&&(_0x19e741!=_0x346233&&_0x3b9420['push'](_0x2c94a4),_0x1f2320[_0x506b74(0x2d3)]({'coin':_0x19e741,'symbol':_0x2c94a4,'reverse':!![],'number':Math['max'](_0x5e0abe+(_0x4f0894&&_0x4f0894[_0x506b74(0x240)]||0x0),0x0),'orderstatus':_0x300dad?_0x300dad['orderstatus']:_0x506b74(0x232)}));}}}}catch(_0x1525b4){if(!_0x3adef9)handleErrorNoStop(_0x1525b4,_0x506b74(0x327));else await handleError(_0x1525b4,_0x506b74(0x327));}return _0x5cfe75=cloneDeep(_0x1f2320),_0x1f2320=_0x1f2320[_0x506b74(0x368)](_0x567d03=>{const _0x203a1f=_0x506b74,_0x76c1d6=config['portfolio'][_0x203a1f(0x230)](_0x4edbb4=>_0x4edbb4[_0x203a1f(0x243)]==_0x567d03[_0x203a1f(0x243)]);return _0x76c1d6&&!_0x76c1d6[_0x203a1f(0x2d6)];}),[_0x1f2320,_0x5cfe75];}async function getCoinNumber(_0x5c4a7b){const _0x5d5b88=_0x4be4ff;let _0x161c90;try{const _0x9ebb08=await exchange[_0x5d5b88(0x2de)]();_0x161c90=_0x9ebb08['total'][_0x5c4a7b];}catch(_0x15b4b6){await handleError(_0x15b4b6,_0x5d5b88(0x275));}return _0x161c90;}async function getOpenOrders(){const _0x39d131=_0x4be4ff;let _0x3a6311;allOpenOrders=[];try{for(const _0x28bae0 of config[_0x39d131(0x287)]){!_0x28bae0['excluded']&&_0x28bae0[_0x39d131(0x243)]!=config[_0x39d131(0x31c)]&&(_0x3a6311=await exchange[_0x39d131(0x2ad)](_0x28bae0[_0x39d131(0x292)]),_0x3a6311[_0x39d131(0x2c8)]>0x0&&allOpenOrders['push'](_0x3a6311[0x0]));}}catch(_0x3f61e9){await handleError(_0x3f61e9,_0x39d131(0x288));}}async function handleOpenOrders(_0xde8fc0=0x0){const _0x1d3d4b=_0x4be4ff;allOpenOrders[_0x1d3d4b(0x2c8)]==0x0&&lockOrders==ORDERS[_0x1d3d4b(0x2f8)]&&allOrdersPlaced&&(_0xde8fc0==0x0?(logger[_0x1d3d4b(0x364)](_0x1d3d4b(0x1f2)),_0xde8fc0++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1d3d4b(0x364)](_0x1d3d4b(0x2f1)),validateOrders(_0x1d3d4b(0x2cb))));}async function testAPI(_0x4d0a45){const _0xcada0f=_0x4be4ff,_0x2b2db3=ccxt[_0x4d0a45['exchange'][_0xcada0f(0x27f)]()],_0x1ead80=new _0x2b2db3({'apiKey':_0x4d0a45[_0xcada0f(0x205)],'secret':_0x4d0a45[_0xcada0f(0x2a5)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xcada0f(0x21b)}});if(_0x4d0a45[_0xcada0f(0x204)])_0x1ead80[_0xcada0f(0x229)]=_0x4d0a45['apiPassword'];try{await _0x1ead80['loadMarkets']();}catch(_0x6d9d07){throw _0x6d9d07;}}function cloneDeep(_0xfc5eb7){const _0x4eeecd=_0x4be4ff;return JSON[_0x4eeecd(0x262)](JSON[_0x4eeecd(0x1ec)](_0xfc5eb7));}async function getPortfolio(_0x2c7675){const _0x142af0=_0x4be4ff;let _0x3d9c3f=[],_0x2497d7=[],_0x432784=[],_0x38abbe;if(_0x2c7675[_0x142af0(0x205)]!=='************'||_0x2c7675['apiSecret']!=='************'||_0x2c7675[_0x142af0(0x204)]&&_0x2c7675['apiPassword']!==_0x142af0(0x1e5)){if(config[_0x142af0(0x2c0)]){if(_0x2c7675['apiKey']=='************')_0x2c7675[_0x142af0(0x205)]=config[_0x142af0(0x205)];if(_0x2c7675['apiSecret']==_0x142af0(0x1e5))_0x2c7675[_0x142af0(0x2a5)]=config[_0x142af0(0x2a5)];if(_0x2c7675[_0x142af0(0x204)]==_0x142af0(0x1e5))_0x2c7675[_0x142af0(0x204)]=config['apiPassword'];try{await testAPI(_0x2c7675);}catch(_0x5c9db7){if(_0x5c9db7[_0x142af0(0x2bd)]()[_0x142af0(0x234)](_0x142af0(0x349))){logger[_0x142af0(0x364)](_0x142af0(0x202)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5c9db7,_0x142af0(0x303));return;}}}await initExchange(_0x2c7675[_0x142af0(0x2c0)],_0x2c7675[_0x142af0(0x205)],_0x2c7675[_0x142af0(0x2a5)],_0x2c7675[_0x142af0(0x204)]);try{await loadSymbols(_0x2c7675['exchange'],!![]);}catch(_0x135398){if(_0x135398[_0x142af0(0x2bd)]()[_0x142af0(0x234)](_0x142af0(0x349))){proxyEmit(_0x142af0(0x287),![]);return;}else{handleError(_0x135398,'getPortfolio(1)');return;}}const _0x6d80c=await getCoins(![],_0x2c7675[_0x142af0(0x31c)]);_0x432784=cloneDeep(_0x6d80c[0x1]);}else _0x432784=cloneDeep(currentCoinsAll);if(_0x2c7675[_0x142af0(0x31c)]=='')proxyEmit(_0x142af0(0x287),_0x432784);else{_0x432784[_0x142af0(0x1ff)](_0x4296c6=>{const _0x3152ea=_0x142af0;if(_0x4296c6[_0x3152ea(0x243)]!=_0x2c7675[_0x3152ea(0x31c)])_0x3d9c3f[_0x3152ea(0x2d3)](_0x4296c6['symbol']);});try{_0x2497d7=await exchange['fetchTickers'](_0x3d9c3f);}catch(_0x38ed5d){if(_0x38ed5d[_0x142af0(0x2bd)]()[_0x142af0(0x234)](_0x142af0(0x349))){proxyEmit('portfolio',![]);return;}else{handleError(_0x38ed5d,'getPortfolio(2)');return;}}_0x432784[_0x142af0(0x1ff)](_0x389b3f=>{const _0x1b25d6=_0x142af0;_0x389b3f[_0x1b25d6(0x243)]!=_0x2c7675[_0x1b25d6(0x31c)]?_0x38abbe=_0x389b3f[_0x1b25d6(0x344)]?0x1/_0x2497d7[_0x389b3f[_0x1b25d6(0x292)]][_0x1b25d6(0x1e3)]:_0x2497d7[_0x389b3f[_0x1b25d6(0x292)]]['last']:_0x38abbe=0x1,_0x389b3f[_0x1b25d6(0x221)]=formatResult(_0x38abbe,0x8);}),proxyEmit('portfolio',_0x432784);}}function truncateTradeAmount(_0x42c280,_0x29c694){const _0x2e4c60=_0x4be4ff;let _0xcaa69c=0x0;try{_0xcaa69c=exchange[_0x2e4c60(0x2b8)](_0x42c280,_0x29c694);}catch(_0x481d6a){}return _0xcaa69c;}function checkMinimums(_0x24c08c){const _0x139f37=_0x4be4ff;let _0x42f950=!![];const _0x32851c=!_0x24c08c[_0x139f37(0x344)]?markets[_0x24c08c[_0x139f37(0x292)]]['limits'][_0x139f37(0x314)][_0x139f37(0x2da)]:markets[_0x24c08c[_0x139f37(0x292)]][_0x139f37(0x335)][_0x139f37(0x2bc)]['min'],_0x18a2af=!_0x24c08c[_0x139f37(0x344)]?markets[_0x24c08c[_0x139f37(0x292)]][_0x139f37(0x335)][_0x139f37(0x2bc)][_0x139f37(0x2da)]:markets[_0x24c08c[_0x139f37(0x292)]][_0x139f37(0x335)][_0x139f37(0x314)]['min'],_0x414caa=truncateTradeAmount(_0x24c08c[_0x139f37(0x292)],_0x24c08c[_0x139f37(0x274)]);_0x24c08c[_0x139f37(0x274)]=_0x414caa;if(Math[_0x139f37(0x24a)](_0x414caa)<_0x32851c)_0x42f950=![];if(Math['abs'](_0x414caa)*_0x24c08c[_0x139f37(0x1e3)]<_0x18a2af)_0x42f950=![];if(_0x24c08c[_0x139f37(0x1fb)]==_0x139f37(0x244)){let _0x4303a3=config[_0x139f37(0x287)][_0x139f37(0x230)](_0x402f73=>_0x402f73[_0x139f37(0x243)]==_0x24c08c[_0x139f37(0x243)]);if(_0x4303a3[_0x139f37(0x240)]>0x0){if(Math[_0x139f37(0x24a)](_0x414caa)>_0x24c08c[_0x139f37(0x34d)]-_0x4303a3[_0x139f37(0x240)])_0x42f950=![];}else{if(Math[_0x139f37(0x24a)](_0x414caa)>_0x24c08c['number'])_0x42f950=![];}}if(_0x24c08c[_0x139f37(0x1fb)]=='buy'){let _0x3907c3=config[_0x139f37(0x287)]['find'](_0x393584=>_0x393584[_0x139f37(0x243)]==config[_0x139f37(0x31c)]),_0x4d68ea=currentCoins[_0x139f37(0x230)](_0xe5010a=>_0xe5010a[_0x139f37(0x243)]==config[_0x139f37(0x31c)]);if(_0x3907c3[_0x139f37(0x240)]>0x0){if(Math[_0x139f37(0x24a)](_0x414caa)*_0x24c08c[_0x139f37(0x1e3)]>_0x4d68ea[_0x139f37(0x34d)]-_0x3907c3['offset'])_0x42f950=![];}else{if(Math[_0x139f37(0x24a)](_0x414caa)*_0x24c08c[_0x139f37(0x1e3)]>_0x4d68ea['number'])_0x42f950=![];}}return _0x42f950;}async function getBalances(_0x4eed02=!![]){const _0x57df49=_0x4be4ff;let _0x543622=0x0,_0x3f9a57;const _0x4f1c4e=config['threshold'];if(config[_0x57df49(0x20a)]&&config[_0x57df49(0x337)]<0x0)await validate24hChanges();currentCoins[_0x57df49(0x1ff)](_0x28ede0=>{const _0x185af8=_0x57df49;if(_0x28ede0[_0x185af8(0x243)]!=config[_0x185af8(0x31c)]){let _0x1fc556=global['ticker'][noslash(_0x28ede0['symbol'])];_0x3f9a57=_0x28ede0[_0x185af8(0x344)]?0x1/_0x1fc556:_0x1fc556;}else _0x3f9a57=0x1;let _0x2af79e=_0x28ede0[_0x185af8(0x34d)]*_0x3f9a57;_0x543622+=_0x2af79e,_0x28ede0[_0x185af8(0x1e3)]=formatResult(Number(_0x3f9a57),0x8),_0x28ede0[_0x185af8(0x2dd)]=_0x2af79e;}),currentCoins[_0x57df49(0x1ff)](_0x43fc23=>{const _0x23bdf6=_0x57df49;let _0x5d9a35=config[_0x23bdf6(0x287)]['find'](_0x24d849=>_0x24d849['coin']==_0x43fc23[_0x23bdf6(0x243)]),_0x456f94=Number(_0x5d9a35[_0x23bdf6(0x238)]),_0x57db91=_0x43fc23[_0x23bdf6(0x2dd)]/_0x543622*0x64,_0x39a529=_0x456f94*_0x543622/0x64/_0x43fc23[_0x23bdf6(0x1e3)]-_0x43fc23[_0x23bdf6(0x34d)];_0x43fc23[_0x23bdf6(0x238)]=formatResult(_0x57db91,0x3),_0x43fc23[_0x23bdf6(0x2c1)]=formatResult(_0x456f94,0x3),_0x43fc23['trade']=formatResult(_0x39a529,0x8),_0x43fc23['side']='',_0x43fc23[_0x23bdf6(0x219)]=![];if(_0x43fc23[_0x23bdf6(0x243)]!=config[_0x23bdf6(0x31c)]){if(_0x43fc23[_0x23bdf6(0x238)]>_0x456f94)_0x43fc23[_0x23bdf6(0x1fb)]='sell',_0x43fc23[_0x23bdf6(0x219)]=checkMinimums(_0x43fc23);else _0x43fc23[_0x23bdf6(0x238)]<_0x456f94&&(_0x43fc23[_0x23bdf6(0x1fb)]=_0x23bdf6(0x254),_0x43fc23[_0x23bdf6(0x219)]=checkMinimums(_0x43fc23));}_0x43fc23[_0x23bdf6(0x309)]=_0x43fc23[_0x23bdf6(0x238)]/_0x43fc23[_0x23bdf6(0x2c1)]-0x1;if(_0x43fc23[_0x23bdf6(0x242)]=='filled'||_0x43fc23[_0x23bdf6(0x242)]==_0x23bdf6(0x27d))_0x43fc23['orderstatus']=_0x23bdf6(0x232);}),currentCoins[_0x57df49(0x2e6)]((_0x1586d8,_0x23b133)=>_0x1586d8[_0x57df49(0x309)]<_0x23b133[_0x57df49(0x309)]?0x1:_0x23b133['delta']<_0x1586d8[_0x57df49(0x309)]?-0x1:0x0);const _0x3687b6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3687b6['eur'],'usd':_0x3687b6['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x4f1c4e},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x4eed02){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4f1c4e});else{if(lockOrders==ORDERS[_0x57df49(0x227)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4f1c4e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2bfb33=getNormalizedPerformance();getStartingBalances(_0x2bfb33),emitPerformance(_0x2bfb33);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x3109b7=getNormalizedPerformance();emitPerformance(_0x3109b7),getStartingBalances(_0x3109b7),logger[_0x57df49(0x364)](_0x57df49(0x348));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x223755=_0x4be4ff;if(!lastBalances)return;let _0x167984=[],_0x39061a,_0x4d0389=JSON[_0x223755(0x262)](lastBalances[_0x223755(0x287)]);_0x4d0389[_0x223755(0x2e6)]((_0x4b8970,_0x26c873)=>_0x4b8970['coin']>_0x26c873[_0x223755(0x243)]?0x1:_0x26c873[_0x223755(0x243)]>_0x4b8970[_0x223755(0x243)]?-0x1:0x0),_0x4d0389['forEach'](_0x5966ac=>{const _0x106ca9=_0x223755;let _0x993478={'coin':_0x5966ac['coin'],'number':_0x5966ac[_0x106ca9(0x34d)],'price':_0x5966ac[_0x106ca9(0x1e3)]};_0x167984[_0x106ca9(0x2d3)](_0x993478);});const _0x1bf598=await getFiat();_0x39061a={'date':lastBalances[_0x223755(0x245)]['split']('\x20')[0x0],'eur':_0x1bf598[_0x223755(0x31a)],'usd':_0x1bf598[_0x223755(0x351)],'coins':_0x167984};let _0x323e71=dbPerformance[_0x223755(0x29d)]('data')['find']({'date':_0x39061a[_0x223755(0x209)]})['value']();_0x323e71?_0x39061a[_0x223755(0x209)]!=config[_0x223755(0x312)]&&dbPerformance['get'](_0x223755(0x1f9))[_0x223755(0x230)]({'date':_0x39061a[_0x223755(0x209)]})[_0x223755(0x353)](_0x39061a)[_0x223755(0x33d)]():dbPerformance[_0x223755(0x29d)](_0x223755(0x1f9))[_0x223755(0x2d3)](_0x39061a)[_0x223755(0x33d)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4d0c6b=_0x4be4ff;let _0x50be0f=[];if(dbPerformance['has'](_0x4d0c6b(0x1f9))[_0x4d0c6b(0x2dd)]()){let _0x3f1d13=dbPerformance[_0x4d0c6b(0x29d)](_0x4d0c6b(0x1f9))[_0x4d0c6b(0x252)]()[_0x4d0c6b(0x368)](_0x5b17c6=>{const _0x4ccc42=_0x4d0c6b;if(_0x5b17c6[_0x4ccc42(0x20c)][_0x4ccc42(0x2c8)]==0x0)return![];else return!![];})[_0x4d0c6b(0x365)]('date')[_0x4d0c6b(0x2dd)](),_0x966598=[...config['liquidity']];_0x966598['sort']((_0x5dc65e,_0x1ad2c2)=>_0x5dc65e['date']>_0x1ad2c2['date']?-0x1:_0x1ad2c2[_0x4d0c6b(0x209)]>_0x5dc65e[_0x4d0c6b(0x209)]?0x1:0x0);let _0x246c84=0x1,_0x4025e8=[],_0x1afac4=0x0;_0x3f1d13[_0x4d0c6b(0x218)]()[_0x4d0c6b(0x344)]()['forEach']((_0x124580,_0x10e2d7)=>{const _0x210776=_0x4d0c6b;if(_0x966598[_0x1afac4]){if(_0x3f1d13[_0x3f1d13['length']-_0x10e2d7]&&_0x966598[_0x1afac4]['date']==_0x3f1d13[_0x3f1d13[_0x210776(0x2c8)]-_0x10e2d7][_0x210776(0x209)]){if(_0x10e2d7<_0x3f1d13[_0x210776(0x2c8)]){let _0x1ac2f4=0x0,_0x157b60=0x0;_0x3f1d13[_0x3f1d13[_0x210776(0x2c8)]-_0x10e2d7][_0x210776(0x20c)][_0x210776(0x1ff)](_0x19aec7=>{const _0x5b899d=_0x210776;_0x157b60+=_0x19aec7[_0x5b899d(0x34d)]*_0x19aec7[_0x5b899d(0x221)];}),_0x966598[_0x1afac4]['changes'][_0x210776(0x1ff)](_0x19ce2c=>{const _0x41edd2=_0x210776;_0x1ac2f4+=_0x19ce2c[_0x41edd2(0x34d)]*_0x19ce2c['price'];}),_0x246c84*=_0x1ac2f4/(_0x157b60-_0x1ac2f4)+0x1;}_0x1afac4++;}}let _0x30cb01=0x0;_0x124580[_0x210776(0x20c)]['forEach'](_0x3f27c7=>{const _0x21495f=_0x210776;_0x30cb01+=_0x3f27c7[_0x21495f(0x34d)]*_0x3f27c7['price'];}),_0x4025e8[_0x3f1d13[_0x210776(0x2c8)]-_0x10e2d7-0x1]=_0x30cb01*(_0x246c84-0x1);});let _0x2eb909=[];_0x966598=[...config[_0x4d0c6b(0x2fc)]]||[];let _0x157c33=0x0;_0x1afac4=0x0,_0x3f1d13[_0x4d0c6b(0x1ff)]((_0x4e343b,_0x256c1b)=>{const _0x301b02=_0x4d0c6b;if(_0x966598[_0x1afac4]){const _0x2b2b25=fns['parse'](_0x966598[_0x1afac4][_0x301b02(0x209)],_0x301b02(0x293),new Date()),_0x9e1080=fns[_0x301b02(0x262)](_0x4e343b['date'],_0x301b02(0x293),new Date());if(fns[_0x301b02(0x1e9)](_0x2b2b25,_0x9e1080)){let _0x9ac248=0x0;_0x966598[_0x1afac4][_0x301b02(0x352)][_0x301b02(0x1ff)](_0x4ec987=>{const _0x4768aa=_0x301b02;!_0x2eb909[_0x4ec987[_0x4768aa(0x243)]]?_0x2eb909[_0x4ec987[_0x4768aa(0x243)]]=_0x4ec987[_0x4768aa(0x34d)]:(_0x9ac248=_0x2eb909[_0x4ec987[_0x4768aa(0x243)]],_0x2eb909[_0x4ec987[_0x4768aa(0x243)]]+=_0x4ec987[_0x4768aa(0x34d)]);const _0x396ee7=_0x4e343b[_0x4768aa(0x20c)][_0x4768aa(0x230)](_0x43d7cc=>_0x43d7cc[_0x4768aa(0x243)]==_0x4ec987[_0x4768aa(0x243)]);(!_0x396ee7||_0x396ee7['number']==0x0)&&(_0x157c33+=(-_0x4ec987['number']-_0x9ac248)*_0x4ec987[_0x4768aa(0x221)]);}),_0x1afac4++;}}_0x4e343b['coins'][_0x301b02(0x1ff)]((_0x3acbd7,_0x180fd5)=>{const _0x24a94b=_0x301b02;_0x2eb909[_0x3acbd7['coin']]&&(_0x3acbd7[_0x24a94b(0x2b5)]=_0x2eb909[_0x3acbd7['coin']]);}),_0x50be0f[_0x301b02(0x2d3)]({'date':_0x4e343b[_0x301b02(0x209)],'eur':_0x4e343b[_0x301b02(0x31a)],'usd':_0x4e343b[_0x301b02(0x351)],'offset':_0x4025e8[_0x256c1b],'netoffset':_0x157c33,'coins':_0x4e343b[_0x301b02(0x20c)]});});}return _0x50be0f;}function emitPerformance(_0x37f32f){const _0x427a6c=_0x4be4ff;_0x37f32f[_0x427a6c(0x2c8)]!==0x0?(proxyEmit(_0x427a6c(0x320),_0x37f32f),lastPerformanceEmitted=getDate()):proxyEmit(_0x427a6c(0x320),[]);}function getPerf(_0x206363,_0xd58d2d){const _0x68dd69=_0x4be4ff;let _0x4c6906=0x0,_0x1ebba5=0x0,_0x5825c5=0x0;_0x206363[_0x68dd69(0x20c)][_0x68dd69(0x1ff)](_0x986e5b=>{const _0x41cdb7=_0x68dd69;_0x4c6906+=_0x986e5b[_0x41cdb7(0x34d)]*_0x986e5b[_0x41cdb7(0x221)];});_0xd58d2d&&(_0x4c6906+=_0x206363[_0x68dd69(0x240)]);if(config['basecoin']==='BTC'||config[_0x68dd69(0x31c)]===_0x68dd69(0x343))_0x1ebba5=_0x4c6906*_0x206363[_0x68dd69(0x31a)],_0x5825c5=_0x4c6906*_0x206363[_0x68dd69(0x351)];else{if(usdBasecoins[_0x68dd69(0x234)](config[_0x68dd69(0x31c)]))_0x1ebba5=_0x4c6906*_0x206363['eur']/_0x206363[_0x68dd69(0x351)],_0x5825c5=_0x4c6906;else config[_0x68dd69(0x31c)]===_0x68dd69(0x249)&&(_0x1ebba5=_0x4c6906,_0x5825c5=_0x4c6906*_0x206363[_0x68dd69(0x351)]/_0x206363[_0x68dd69(0x31a)]);}return[_0x4c6906,_0x1ebba5,_0x5825c5];}function getKPIs(_0x5c0233,_0x14ea26=_0x4be4ff(0x249)){const _0x5657fd=_0x4be4ff,_0x254714=config[_0x5657fd(0x31c)],_0xbcd8a0=lastBalances,_0x3594af=currentCoins,_0x3b97e2=getNormalizedPerformance(),_0x5a8f96=_0x5c0233===_0x5657fd(0x31c)?_0x254714:_0x5c0233===_0x5657fd(0x26d)||_0x5c0233===_0x5657fd(0x332)?_0x14ea26:_0x5657fd(0x241)+_0x254714,_0x23f01d=_0x5c0233===_0x5657fd(0x24b)?_0x5657fd(0x267):_0x5c0233==='net-fiat'?_0x5657fd(0x267):_0x5a8f96+_0x5657fd(0x29e),_0x32e141=_0x5c0233==='net-basecoin'||_0x5c0233===_0x5657fd(0x332)?_0x5657fd(0x267):_0x5a8f96+_0x5657fd(0x206);let _0xf3172e=0x0;_0x3594af[_0x5657fd(0x1ff)](_0x4663b0=>{const _0x5c0cf4=_0x5657fd;_0xf3172e+=_0x4663b0[_0x5c0cf4(0x34d)]*_0x4663b0[_0x5c0cf4(0x1e3)];});if(_0x5c0233===_0x5657fd(0x26d)||_0x5c0233===_0x5657fd(0x332)){if(_0x254714===_0x5657fd(0x22d)||_0x254714===_0x5657fd(0x343))_0xf3172e=_0xf3172e*(_0x14ea26===_0x5657fd(0x249)?_0xbcd8a0['eur']:_0xbcd8a0['usd']);else{if(usdBasecoins[_0x5657fd(0x234)](_0x254714))_0xf3172e=_0xf3172e*(_0x14ea26===_0x5657fd(0x249)?_0xbcd8a0['eur']/_0xbcd8a0['usd']:0x1);else _0x254714==='EUR'&&(_0xf3172e=_0xf3172e*(_0x14ea26===_0x5657fd(0x249)?0x1:_0xbcd8a0[_0x5657fd(0x351)]/_0xbcd8a0[_0x5657fd(0x31a)]));}}let _0x23ff71;if(_0xf3172e!==0x0){if(_0x5c0233===_0x5657fd(0x31c))_0x23ff71=(_0xf3172e/startingBalances[_0x5657fd(0x31c)]-0x1)*0x64;else{if(_0x14ea26===_0x5657fd(0x249))_0x23ff71=(_0xf3172e/startingBalances[_0x5657fd(0x31a)]-0x1)*0x64;else _0x23ff71=(_0xf3172e/startingBalances[_0x5657fd(0x351)]-0x1)*0x64;}let _0x29b0f2=0x0;if(startingBalances[_0x5657fd(0x20c)])_0x3594af[_0x5657fd(0x1ff)](_0x458197=>{const _0x345eb7=_0x5657fd;let _0xc5e895=startingBalances[_0x345eb7(0x20c)]['find'](_0x2cca92=>_0x2cca92[_0x345eb7(0x243)]===_0x458197['coin']);if(_0xc5e895&&_0xc5e895[_0x345eb7(0x243)]&&_0x458197[_0x345eb7(0x34d)]!==0x0)_0x29b0f2+=_0xc5e895[_0x345eb7(0x34d)]*_0x458197[_0x345eb7(0x1e3)];});let _0x2c6d15=0x0;if(_0x3b97e2[_0x5657fd(0x2c8)]!==0x0){let _0x1f5661=_0x3b97e2[_0x3b97e2[_0x5657fd(0x2c8)]-0x1];_0x2c6d15=_0x1f5661['netoffset'];}_0x29b0f2-=_0x2c6d15;_0x5c0233==='net-basecoin'&&(_0x23ff71=(_0xf3172e-_0x29b0f2)/startingBalances[_0x5657fd(0x31c)]*0x64,_0xf3172e=_0xf3172e-_0x29b0f2);if(_0x5c0233===_0x5657fd(0x332)){let _0x47c6e9=_0x14ea26===_0x5657fd(0x249)?startingBalances[_0x5657fd(0x31a)]:startingBalances[_0x5657fd(0x351)];if(_0x254714===_0x5657fd(0x22d)||_0x254714==='ETH')_0x29b0f2=_0x14ea26===_0x5657fd(0x249)?_0x29b0f2*_0xbcd8a0[_0x5657fd(0x31a)]:_0x29b0f2*_0xbcd8a0[_0x5657fd(0x351)];else{if(usdBasecoins[_0x5657fd(0x234)](_0x254714))_0x29b0f2=_0x14ea26===_0x5657fd(0x249)?_0x29b0f2*_0xbcd8a0[_0x5657fd(0x31a)]/_0xbcd8a0[_0x5657fd(0x351)]:_0x29b0f2;else _0x254714===_0x5657fd(0x249)&&(_0x29b0f2=_0x14ea26===_0x5657fd(0x249)?_0x29b0f2:_0x29b0f2*_0xbcd8a0[_0x5657fd(0x351)]/_0xbcd8a0[_0x5657fd(0x31a)]);}_0x23ff71=(_0xf3172e-_0x29b0f2)/_0x47c6e9*0x64,_0xf3172e=_0xf3172e-_0x29b0f2;}if(_0x23ff71){if(_0x23ff71<0x64)_0x23ff71=_0x23ff71[_0x5657fd(0x361)](0x2);else{if(_0x23ff71<0x3e8)_0x23ff71=_0x23ff71[_0x5657fd(0x361)](0x1);else _0x23ff71=_0x23ff71[_0x5657fd(0x361)](0x0);}}else _0x23ff71=Number('0')[_0x5657fd(0x361)](0x2);if(_0xf3172e){if(Math[_0x5657fd(0x24a)](_0xf3172e)<0.000001)_0xf3172e=_0xf3172e[_0x5657fd(0x361)](0x2);else{if(Math[_0x5657fd(0x24a)](_0xf3172e)<0.1)_0xf3172e=_0xf3172e[_0x5657fd(0x361)](0x6);else{if(Math[_0x5657fd(0x24a)](_0xf3172e)<0x1)_0xf3172e=_0xf3172e['toFixed'](0x5);else{if(Math[_0x5657fd(0x24a)](_0xf3172e)<0xa)_0xf3172e=_0xf3172e[_0x5657fd(0x361)](0x4);else{if(Math['abs'](_0xf3172e)<0x64)_0xf3172e=_0xf3172e[_0x5657fd(0x361)](0x3);else{if(Math[_0x5657fd(0x24a)](_0xf3172e)<0x3e8)_0xf3172e=_0xf3172e[_0x5657fd(0x361)](0x2);else _0xf3172e=_0xf3172e['toFixed'](0x2);}}}}}}else _0xf3172e=Number('0')['toFixed'](0x2);}else _0x23ff71=Number('0')[_0x5657fd(0x361)](0x2);return{'value':_0xf3172e,'change':_0x23ff71,'leftTxt':_0x23f01d,'rightTxt':_0x32e141};}async function getStartingBalances(_0x482e50,_0x8b5543=!![]){const _0xb00db1=_0x4be4ff;if(_0x482e50['length']!==0x0){const [_0x380f1f,_0x355e61,_0x2edf27]=getPerf(_0x482e50[0x0],!![]);let _0x275527=[];config[_0xb00db1(0x287)][_0xb00db1(0x1ff)](_0x12fbba=>{const _0x419d2d=_0xb00db1;let _0x27875b=0x0,_0x101127;config[_0x419d2d(0x2fc)]['forEach'](_0x6d3870=>{const _0x178b04=_0x419d2d;let _0x1b7dff=_0x6d3870[_0x178b04(0x352)]['find'](_0xb52a2f=>_0xb52a2f[_0x178b04(0x243)]==_0x12fbba[_0x178b04(0x243)]);if(_0x1b7dff){_0x27875b+=_0x1b7dff[_0x178b04(0x34d)];if(!_0x101127)_0x101127=_0x1b7dff[_0x178b04(0x221)];}}),_0x275527[_0x419d2d(0x2d3)]({'coin':_0x12fbba[_0x419d2d(0x243)],'number':_0x27875b,'initialprice':_0x101127});});const _0x4b3318={'basecoin':_0x380f1f,'eur':_0x355e61,'usd':_0x2edf27,'coins':_0x275527};if(_0x8b5543)proxyEmit(_0xb00db1(0x2f7),_0x4b3318);startingBalances=_0x4b3318;}}function headlessMode(_0x10edb6){const _0x72dc25=_0x4be4ff;let _0x54a1e6=_0x10edb6[_0x72dc25(0x287)],_0x47284f=_0x10edb6[_0x72dc25(0x295)],_0x9e409c=[];for(let _0x4472cb of _0x54a1e6){if(_0x4472cb[_0x72dc25(0x243)]!=config[_0x72dc25(0x31c)]){if(_0x4472cb['delta']>=_0x47284f/0x64){if(_0x4472cb[_0x72dc25(0x219)])_0x9e409c['push'](_0x4472cb);}else{if(_0x4472cb[_0x72dc25(0x309)]<=-_0x47284f/0x64){if(_0x4472cb[_0x72dc25(0x219)])_0x9e409c[_0x72dc25(0x2d3)](_0x4472cb);}}}}_0x9e409c[_0x72dc25(0x2c8)]>0x0&&placeOrder(_0x9e409c);}function notifyBalance(_0x3aaa93){const _0x4215b1=_0x4be4ff;let _0x463acb=_0x3aaa93[_0x4215b1(0x287)],_0x28337e=_0x3aaa93[_0x4215b1(0x295)],_0x518958=[];for(let _0x2422a8 of _0x463acb){if(_0x2422a8[_0x4215b1(0x243)]!=config[_0x4215b1(0x31c)]){if(_0x2422a8[_0x4215b1(0x309)]>=_0x28337e/0x64){if(_0x2422a8['valid'])_0x518958[_0x4215b1(0x2d3)](_0x2422a8);}else{if(_0x2422a8[_0x4215b1(0x309)]<=-_0x28337e/0x64){if(_0x2422a8[_0x4215b1(0x219)])_0x518958[_0x4215b1(0x2d3)](_0x2422a8);}}}}if(_0x518958[_0x4215b1(0x2c8)]>0x0){let _0x50d1d6=_0x518958[_0x4215b1(0x304)](_0x5c15a2=>_0x5c15a2[_0x4215b1(0x243)]);_0x50d1d6[_0x4215b1(0x2e6)]();let _0x4b5ae2=_0x50d1d6[_0x4215b1(0x29f)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4215b1(0x310),_0x4215b1(0x1fe));lastCoinsToBalance=_0x4b5ae2;}}function symbolToCoin(_0x4a0a02){const _0xebb121=_0x4be4ff;let _0x22c9dd;if(_0x4a0a02['includes']('/'+config[_0xebb121(0x31c)]))_0x22c9dd=_0x4a0a02[_0xebb121(0x32a)]('/'+config[_0xebb121(0x31c)],'');if(_0x4a0a02[_0xebb121(0x234)](config['basecoin']+'/'))_0x22c9dd=_0x4a0a02[_0xebb121(0x32a)](config[_0xebb121(0x31c)]+'/','');return _0x22c9dd;}async function unlockOrders(){const _0x32c30e=_0x4be4ff;if(allOrdersPlaced&&lockOrders==ORDERS[_0x32c30e(0x2f8)]){logger[_0x32c30e(0x364)](_0x32c30e(0x290)),lockOrders=ORDERS[_0x32c30e(0x2ff)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3b796f=await getCoins();[currentCoins,currentCoinsAll]=_0x3b796f,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x32c30e(0x227)],logger[_0x32c30e(0x364)](_0x32c30e(0x2b0));}}async function validateOrders(_0x301e67){const _0x19ba5e=_0x4be4ff;if(_0x301e67)validateOrdersState=_0x301e67;logger[_0x19ba5e(0x364)](_0x19ba5e(0x333)+validateOrdersState+_0x19ba5e(0x1f6)+(lockOrders==0x1?_0x19ba5e(0x33c):lockOrders==0x2?_0x19ba5e(0x257):'ORDERS.UNLOCKED'));let _0x290a74=[],_0x58bd7c=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x19ba5e(0x31b)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x19ba5e(0x2f8)])return;logger[_0x19ba5e(0x364)](_0x19ba5e(0x207)+validateOrdersState),lastOrders[_0x19ba5e(0x1ff)](_0x456a8c=>{const _0x4004bd=_0x19ba5e;let _0x4e0328=![];_0x456a8c[_0x4004bd(0x210)]>0x0&&(_0x4e0328=!![]),_0x290a74[_0x4004bd(0x2d3)](_0x4e0328),_0x4e0328&&config[_0x4004bd(0x2af)]!=_0x4004bd(0x33b)&&logHistory('order','Order\x20filled:\x20'+_0x456a8c['symbol']+'\x20'+_0x456a8c[_0x4004bd(0x1fb)]+'\x20#'+formatResult(_0x456a8c['filled'],0x8)+'\x20@'+formatResult(_0x456a8c[_0x4004bd(0x221)],0x8));}),_0x290a74['forEach']((_0x1acf56,_0x2c7d2d)=>{const _0xe04552=_0x19ba5e;if(_0x1acf56)lastOrders[_0xe04552(0x260)](_0x2c7d2d,0x1);}),persistOpenOrders(lastOrders);const _0x22a45b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x19ba5e(0x2b5)){validateOrdersState=_0x19ba5e(0x22b);if(_0x290a74['includes'](![])){if(config['ordertype']==_0x19ba5e(0x33b)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x290a74['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x19ba5e(0x2af)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x19ba5e(0x1e0))_0x290a74[_0x19ba5e(0x234)](![])&&(config['ordertype']==_0x19ba5e(0x33b)?logHistory(_0x19ba5e(0x1e8),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x58bd7c*validateOrderInterval/0xea60)+_0x19ba5e(0x357)+_0x22a45b):(await cancelOrders(),logHistory('success',_0x19ba5e(0x237)+Math[_0x19ba5e(0x2e9)](_0x58bd7c*validateOrderInterval/0xea60)+_0x19ba5e(0x357)+_0x22a45b))),await unlockOrders();else{if(validateOrdersState==_0x19ba5e(0x2cb)){if(config[_0x19ba5e(0x2af)]!='market')logHistory(_0x19ba5e(0x1e8),'No\x20more\x20open\x20orders\x20-\x20'+_0x22a45b);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2bf10e=>{const _0x4982ab=_0x1531;try{const _0x3250be=await exchange[_0x4982ab(0x2e7)](_0x2bf10e[_0x4982ab(0x35d)],_0x2bf10e[_0x4982ab(0x292)]);}catch(_0x32443c){if(_0x32443c['toString']()[_0x4982ab(0x234)](_0x4982ab(0x1e2))){}else await handleError(_0x32443c,'cancelOrders()');}});}async function initCoinResults(_0x351737){const _0x3af4c0=_0x4be4ff;_0x351737?logger['debug'](_0x3af4c0(0x298)+_0x351737):logger[_0x3af4c0(0x364)](_0x3af4c0(0x35f)),config[_0x3af4c0(0x287)]['forEach'](_0x110409=>{const _0x47c7ed=_0x3af4c0;if(!_0x110409[_0x47c7ed(0x2d6)]&&_0x110409['coin']!=config[_0x47c7ed(0x31c)]){const _0x367757=currentCoins[_0x47c7ed(0x230)](_0x2ad557=>_0x2ad557['coin']==_0x110409['coin']),_0xd0ccdd=global[_0x47c7ed(0x2f9)][noslash(_0x110409[_0x47c7ed(0x292)])];let _0x537845=_0x367757?_0x367757['number']:null,_0x27e148=_0x110409['reverse']?0x1/_0xd0ccdd:_0xd0ccdd,_0x2fc4fa;config[_0x47c7ed(0x2fc)][_0x47c7ed(0x1ff)](_0x29eebf=>{const _0x14e100=_0x47c7ed;!_0x2fc4fa&&(_0x2fc4fa=_0x29eebf['changes'][_0x14e100(0x230)](_0x4da040=>_0x4da040[_0x14e100(0x243)]==_0x110409[_0x14e100(0x243)]),_0x2fc4fa&&(_0x537845=_0x2fc4fa[_0x14e100(0x34d)],_0x27e148=_0x2fc4fa[_0x14e100(0x221)]));});let _0x5c9cda=dbCoinResults['get'](_0x47c7ed(0x20c))['find']({'coin':_0x110409[_0x47c7ed(0x243)]})[_0x47c7ed(0x2dd)]();if(!_0x5c9cda){const _0x400e33={'coin':_0x110409[_0x47c7ed(0x243)],'number':_0x537845,'breakeven':_0x27e148,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x47c7ed(0x29d)]('coins')['push'](_0x400e33)[_0x47c7ed(0x33d)]();}else{if(_0x351737&&_0x110409[_0x47c7ed(0x243)]==_0x351737){const _0x84eedd={'coin':_0x110409[_0x47c7ed(0x243)],'number':_0x537845,'breakeven':_0x27e148,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x47c7ed(0x29d)](_0x47c7ed(0x20c))[_0x47c7ed(0x230)]({'coin':_0x110409['coin']})['assign'](_0x84eedd)['write']();}}}});}async function updateCoinResults(_0x1b7b50,_0x345162=![]){const _0x45607f=_0x4be4ff;let _0x344fff,_0x5a1afc,_0x13890e,_0x240e1b,_0x3bc2ca,_0x5023ab,_0x239da9=dbCoinResults['get'](_0x45607f(0x20c))[_0x45607f(0x230)]({'coin':_0x1b7b50[_0x45607f(0x243)]})[_0x45607f(0x2dd)](),_0x198091=![];Object['entries'](_0x239da9)[_0x45607f(0x1ff)](([_0x2b9d5e,_0x148c9c])=>{if(_0x148c9c==null)_0x198091=!![];});(!_0x239da9||_0x198091)&&(await initCoinResults(_0x1b7b50[_0x45607f(0x243)]),_0x239da9=dbCoinResults[_0x45607f(0x29d)]('coins')[_0x45607f(0x230)]({'coin':_0x1b7b50['coin']})[_0x45607f(0x2dd)]());_0x1b7b50[_0x45607f(0x344)]&&(_0x5023ab={'filled':_0x1b7b50['filled']*_0x1b7b50[_0x45607f(0x221)],'amount':_0x1b7b50[_0x45607f(0x210)]*_0x1b7b50[_0x45607f(0x221)],'side':_0x1b7b50[_0x45607f(0x1fb)]==_0x45607f(0x244)?_0x45607f(0x254):_0x45607f(0x244),'price':0x1/_0x1b7b50['price']},_0x1b7b50={..._0x1b7b50,..._0x5023ab});_0x345162?_0x5a1afc=_0x1b7b50['side']==_0x45607f(0x254)?_0x239da9[_0x45607f(0x34d)]+_0x1b7b50[_0x45607f(0x210)]:_0x239da9[_0x45607f(0x34d)]-_0x1b7b50[_0x45607f(0x210)]:_0x5a1afc=await getCoinNumber(_0x1b7b50[_0x45607f(0x243)]);if(_0x1b7b50[_0x45607f(0x2bf)]&&_0x1b7b50[_0x45607f(0x2bf)][_0x45607f(0x315)]==config[_0x45607f(0x31c)])_0x344fff=_0x1b7b50[_0x45607f(0x2bf)][_0x45607f(0x2bc)];else{if(_0x1b7b50[_0x45607f(0x2bf)]&&_0x1b7b50[_0x45607f(0x2bf)][_0x45607f(0x315)]==_0x45607f(0x2b2)&&!_0x345162)_0x344fff=_0x1b7b50[_0x45607f(0x2bf)]['cost']*global[_0x45607f(0x2f9)][_0x45607f(0x2b2)+config['basecoin']];else _0x344fff=defaultFee*_0x1b7b50[_0x45607f(0x210)]*_0x1b7b50[_0x45607f(0x221)];}_0x1b7b50['side']=='buy'?(_0x13890e=_0x5a1afc!=0x0?(_0x239da9['breakeven']*_0x239da9['number']+_0x1b7b50[_0x45607f(0x221)]*(_0x5a1afc-_0x239da9[_0x45607f(0x34d)])+_0x344fff)/_0x5a1afc:0x0,_0x240e1b=_0x239da9['realized']):(_0x13890e=_0x5a1afc!=0x0?(_0x239da9[_0x45607f(0x328)]*_0x239da9[_0x45607f(0x34d)]-_0x1b7b50[_0x45607f(0x221)]*(_0x239da9[_0x45607f(0x34d)]-_0x5a1afc)+_0x344fff)/_0x5a1afc:0x0,_0x240e1b=_0x239da9[_0x45607f(0x27c)]+(_0x1b7b50[_0x45607f(0x221)]-_0x239da9[_0x45607f(0x328)])*_0x1b7b50[_0x45607f(0x210)]);_0x3bc2ca=(_0x1b7b50[_0x45607f(0x221)]-_0x13890e-_0x344fff/_0x1b7b50['filled'])*_0x5a1afc;let _0x4e2a72={'coin':_0x1b7b50['coin'],'number':_0x5a1afc,'breakeven':formatResult(_0x13890e,0x8),'realized':formatResult(_0x240e1b,0x8),'unrealized':formatResult(_0x3bc2ca,0x8),'fees':formatResult(_0x239da9[_0x45607f(0x339)]+_0x344fff,0x8),'sells':_0x1b7b50['side']=='sell'?_0x239da9[_0x45607f(0x2d7)]+0x1:_0x239da9[_0x45607f(0x2d7)],'buys':_0x1b7b50['side']==_0x45607f(0x254)?_0x239da9['buys']+0x1:_0x239da9[_0x45607f(0x280)]};dbCoinResults[_0x45607f(0x29d)](_0x45607f(0x20c))['find']({'coin':_0x1b7b50['coin']})['assign'](_0x4e2a72)[_0x45607f(0x33d)]();if(!_0x345162){if(_0x1b7b50[_0x45607f(0x2bf)]&&_0x1b7b50['fee'][_0x45607f(0x315)]==_0x45607f(0x2b2)){const _0x10824=currentCoins[_0x45607f(0x230)](_0x3e49aa=>_0x3e49aa[_0x45607f(0x243)]==_0x45607f(0x2b2));if(_0x10824){let _0x25e479=dbCoinResults[_0x45607f(0x29d)](_0x45607f(0x20c))['find']({'coin':'BNB'})['value']();_0x4e2a72={..._0x25e479,'number':_0x10824[_0x45607f(0x34d)]},dbCoinResults['get'](_0x45607f(0x20c))[_0x45607f(0x230)]({'coin':_0x45607f(0x2b2)})[_0x45607f(0x353)](_0x4e2a72)[_0x45607f(0x33d)]();}}}}async function placeOrder(_0x59854b){const _0x490f38=_0x4be4ff,_0x3f818a=config['ordertype']==_0x490f38(0x33b)?'market':_0x490f38(0x1f5);if(lockOrders==ORDERS[_0x490f38(0x227)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x490f38(0x2f8)],allOrdersPlaced=![],validateOrdersState=_0x490f38(0x2b5);let _0x155474=![];lastOrders=[];for(const _0x3f7e8e of _0x59854b){let _0x1e66cf,_0x40b763,_0x402aac,_0x3edcd0,_0x1165ba,_0x14581e=_0x3f7e8e['symbol'];try{const _0x2d73e8=await exchange[_0x490f38(0x23f)](_0x14581e);_0x1e66cf=_0x3f7e8e[_0x490f38(0x344)]?0x1/_0x3f7e8e[_0x490f38(0x1e3)]:_0x3f7e8e[_0x490f38(0x1e3)],_0x40b763=_0x2d73e8[_0x490f38(0x278)],_0x402aac=_0x2d73e8['ask'];_0x3f7e8e['reverse']?(_0x3edcd0=_0x3f7e8e[_0x490f38(0x1fb)]=='buy'?_0x490f38(0x244):'buy',_0x1165ba=Math['abs'](_0x3f7e8e['trade'])/_0x1e66cf):(_0x3edcd0=_0x3f7e8e[_0x490f38(0x1fb)],_0x1165ba=Math[_0x490f38(0x24a)](_0x3f7e8e[_0x490f38(0x274)]));_0x3f818a==_0x490f38(0x1f5)&&(config[_0x490f38(0x2af)]=='limit-high'&&(_0x1e66cf=_0x3edcd0==_0x490f38(0x254)?_0x40b763:_0x402aac),config[_0x490f38(0x2af)]==_0x490f38(0x200)&&(_0x1e66cf=_0x3edcd0=='buy'?_0x402aac:_0x40b763));_0x1165ba=formatResult(_0x1165ba,0x8),_0x1e66cf=formatResult(_0x1e66cf,0x8);const _0x56b77f=_0x3edcd0=='sell'?config[_0x490f38(0x224)]?String[_0x490f38(0x25c)]('0x'+config[_0x490f38(0x224)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x1881aa=_0x3f818a=='market'?_0x490f38(0x330):config[_0x490f38(0x2af)]==_0x490f38(0x2ca)?_0x490f38(0x286):_0x490f38(0x27b),_0x58aa38=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x490f38(0x2d3)]({'customId':_0x58aa38,'symbol':_0x14581e,'coin':_0x3f7e8e['coin'],'amount':_0x1165ba,'price':_0x1e66cf,'side':_0x3edcd0,'reverse':_0x3f7e8e[_0x490f38(0x344)],'filled':0x0});if(_0x3f818a==_0x490f38(0x33b))logHistory('order',''+_0x56b77f+_0x1881aa+_0x490f38(0x22c)+_0x14581e+'\x20'+_0x3edcd0+'\x20#'+formatResult(_0x1165ba,0x8)+'\x20@'+formatResult(_0x1e66cf,0x8));else logHistory(_0x490f38(0x324),''+_0x56b77f+_0x1881aa+_0x490f38(0x22c)+_0x14581e+'\x20'+_0x3edcd0+'\x20#'+formatResult(_0x1165ba,0x8)+'\x20@'+formatResult(_0x1e66cf,0x8));const _0x8c48dd=await exchange['createOrder'](_0x14581e,_0x3f818a,_0x3edcd0,_0x1165ba,_0x1e66cf);logger[_0x490f38(0x364)](_0x490f38(0x2cc)+_0x8c48dd['id']+'\x20|\x20Custom\x20ID:\x20'+_0x58aa38);const _0x2b5945=lastOrders[_0x490f38(0x2c8)]-0x1;if(_0x2b5945>=0x0&&lastOrders[_0x2b5945][_0x490f38(0x307)]==_0x58aa38){lastOrders[_0x2b5945][_0x490f38(0x35d)]=_0x8c48dd['id'];if(_0x8c48dd[_0x490f38(0x314)])lastOrders[_0x2b5945][_0x490f38(0x314)]=_0x8c48dd['amount'];if(_0x8c48dd[_0x490f38(0x221)])lastOrders[_0x2b5945]['price']=_0x8c48dd[_0x490f38(0x221)];lastOrders[_0x2b5945][_0x490f38(0x2bf)]=_0x8c48dd[_0x490f38(0x2bf)];}if(config[_0x490f38(0x2d1)]!=0x0){let _0x24116e=null;if(cooldownTracker['length']==config[_0x490f38(0x2d1)]-0x1)_0x24116e=cooldownTracker['shift']();const _0x8ae145=getTimeStamp();cooldownTracker[_0x490f38(0x2d3)](_0x8ae145);if(_0x24116e){const _0x4d536a=fns[_0x490f38(0x26f)](new Date(_0x8ae145),new Date(_0x24116e));if(_0x4d536a<cooldownInterval){logHistory('error',_0x490f38(0x299)+config[_0x490f38(0x2d1)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x490f38(0x289)+cooldownPeriod/(0xe10*0x3e8)+_0x490f38(0x2a2)),coolingDown=!![];break;}}}}catch(_0x4c6217){if(_0x4c6217[_0x490f38(0x2bd)]()[_0x490f38(0x234)](_0x490f38(0x296)))lastOrders=lastOrders[_0x490f38(0x368)](_0x2112c2=>_0x2112c2[_0x490f38(0x292)]!=_0x14581e),logHistory(_0x490f38(0x2f5),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x14581e),_0x155474=!![];else{if(_0x4c6217['toString']()[_0x490f38(0x234)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x490f38(0x368)](_0xb759ad=>_0xb759ad['symbol']!=_0x14581e),logHistory(_0x490f38(0x2f5),_0x490f38(0x21f)+_0x14581e),_0x155474=!![];else{if(_0x4c6217[_0x490f38(0x2bd)]()[_0x490f38(0x234)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x2046a6=>_0x2046a6['symbol']!=_0x14581e),logHistory(_0x490f38(0x2f5),_0x490f38(0x2d2)+_0x14581e),_0x155474=!![];else _0x4c6217['toString']()['includes'](_0x490f38(0x1f3))?(lastOrders=lastOrders[_0x490f38(0x368)](_0x1076bb=>_0x1076bb[_0x490f38(0x292)]!=_0x14581e),logHistory(_0x490f38(0x2f5),_0x490f38(0x323)+_0x14581e),_0x155474=!![]):(lastOrders=lastOrders['filter'](_0x105eb1=>_0x105eb1[_0x490f38(0x292)]!=_0x14581e),await handleError(_0x4c6217,_0x490f38(0x256),_0x14581e));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x612e5b=config[_0x490f38(0x2af)]==_0x490f38(0x33b)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5da36f=_0x490f38;validateOrders(_0x5da36f(0x1e0));},_0x612e5b);}else unlockOrders();_0x155474&&config[_0x490f38(0x20a)]&&await pauseBot(_0x490f38(0x2b6)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x490f38(0x1e8),_0x490f38(0x201)));}else{if(coolingDown)!config['headless']&&logHistory(_0x490f38(0x2f5),_0x490f38(0x1ee));else lockOrders!=ORDERS[_0x490f38(0x227)]&&(!config[_0x490f38(0x20a)]&&(config[_0x490f38(0x2af)]=='market'?logHistory(_0x490f38(0x2f5),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x490f38(0x264))));}}function persistOpenOrders(_0x2b2fbc){const _0x1da58b=_0x4be4ff,_0x3e41cc={...config,'openOrders':_0x2b2fbc};let _0x5706ee=dbConfig[_0x1da58b(0x29d)](_0x1da58b(0x2e4))[_0x1da58b(0x230)]({'botID':botID})['value']();_0x5706ee&&dbConfig[_0x1da58b(0x29d)]('bot')[_0x1da58b(0x230)]({'botID':botID})[_0x1da58b(0x353)](_0x3e41cc)['write']();}function restoreOrders(){const _0x57d6bb=_0x4be4ff;let _0x146523;config[_0x57d6bb(0x2a8)]&&allOpenOrders[_0x57d6bb(0x1ff)](_0x4b9afe=>{const _0x34d813=_0x57d6bb,_0x1ad222=config[_0x34d813(0x2a8)][_0x34d813(0x230)](_0x49edcc=>_0x49edcc[_0x34d813(0x35d)]==_0x4b9afe['id']);_0x1ad222&&(lastOrders[_0x34d813(0x2d3)](_0x1ad222),_0x146523=_0x4b9afe[_0x34d813(0x34f)]);});if(lastOrders[_0x57d6bb(0x2c8)]>0x0){lockOrders=ORDERS[_0x57d6bb(0x2f8)],validateOrdersState=_0x57d6bb(0x22b),allOrdersPlaced=!![];const _0x132eec=new Date()[_0x57d6bb(0x271)](),_0x934d97=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x57d6bb(0x31b)]*0x3c*0x3e8;if(_0x146523+_0x934d97>_0x132eec){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x146523+_0x934d97-_0x132eec);}else validateOrders(_0x57d6bb(0x1e0));}}async function sendMetricsTelegram(){const _0x5ec67a=_0x4be4ff;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3cdc53=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1c3f24='';if(config[_0x5ec67a(0x2f2)])_0x1c3f24='<b>'+config[_0x5ec67a(0x317)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x1c3f24=_0x5ec67a(0x253)+botID+_0x5ec67a(0x28f);const _0x48d7c0=getKPIs(_0x5ec67a(0x31c)),_0x2cf032=getKPIs(_0x5ec67a(0x26d),config[_0x5ec67a(0x26d)]),_0x3110fe=getKPIs(_0x5ec67a(0x24b)),_0x152dfa=getKPIs('net-fiat',config[_0x5ec67a(0x26d)]);_0x1c3f24+=_0x5ec67a(0x26b),_0x1c3f24+=_0x48d7c0[_0x5ec67a(0x2d0)]+_0x5ec67a(0x2bb)+_0x48d7c0[_0x5ec67a(0x2dd)]+'\x0a',_0x1c3f24+=_0x48d7c0[_0x5ec67a(0x251)]+':\x20'+_0x48d7c0[_0x5ec67a(0x363)]+'%\x0a',_0x1c3f24+=_0x2cf032[_0x5ec67a(0x2d0)]+_0x5ec67a(0x2bb)+_0x2cf032[_0x5ec67a(0x2dd)]+'\x0a',_0x1c3f24+=_0x2cf032[_0x5ec67a(0x251)]+':\x20'+_0x2cf032[_0x5ec67a(0x363)]+'%\x0a',_0x1c3f24+=_0x3110fe[_0x5ec67a(0x2d0)]+':\x20'+_0x3110fe[_0x5ec67a(0x2dd)]+'\x20('+config['basecoin']+')\x0a',_0x1c3f24+=_0x3110fe[_0x5ec67a(0x251)]+':\x20'+_0x3110fe[_0x5ec67a(0x363)]+_0x5ec67a(0x255)+config['basecoin']+')\x0a',_0x1c3f24+=_0x152dfa[_0x5ec67a(0x2d0)]+':\x20'+_0x152dfa['value']+'\x20('+config['fiat']+')\x0a',_0x1c3f24+=_0x152dfa[_0x5ec67a(0x251)]+':\x20'+_0x152dfa[_0x5ec67a(0x363)]+_0x5ec67a(0x255)+config[_0x5ec67a(0x26d)]+')\x0a',_0x1c3f24+=_0x5ec67a(0x259),process[_0x5ec67a(0x2a3)]({'telegrammsg':_0x1c3f24},_0x54aa8d=>{});}async function sendPortfolioTelegram(){const _0x1b49ad=_0x4be4ff;if(!coinsLoaded){process['send']({'telegrammsg':_0x1b49ad(0x1f1)},_0x2d4e73=>{});return;}let _0x22b212='';if(config['showname'])_0x22b212=_0x1b49ad(0x23e)+config[_0x1b49ad(0x317)]+_0x1b49ad(0x322);else _0x22b212=_0x1b49ad(0x253)+botID+_0x1b49ad(0x322);_0x22b212+='<pre>',_0x22b212+=_0x1b49ad(0x32b),_0x22b212+=_0x1b49ad(0x2ab),_0x22b212+=_0x1b49ad(0x32b),currentCoins[_0x1b49ad(0x1ff)](_0x33ebae=>{const _0x893e0c=_0x1b49ad;_0x22b212+=_0x33ebae[_0x893e0c(0x243)]['padEnd'](0x7)+'|\x20'+formatPad(_0x33ebae['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x33ebae[_0x893e0c(0x2c1)],0x2,0x6)+'|\x20'+formatPad(_0x33ebae[_0x893e0c(0x309)]*0x64,0x2,0x6)+'\x0a';}),_0x22b212+='</pre>',process[_0x1b49ad(0x2a3)]({'telegrammsg':_0x22b212},_0x74fcf6=>{});}function formatPad(_0x482b0f,_0x2e59e1,_0x21d76c){const _0xd80163=_0x4be4ff,_0x512ac3=formatResultString(_0x482b0f,_0x2e59e1);return _0x512ac3?_0x512ac3[_0xd80163(0x297)](_0x21d76c):''[_0xd80163(0x297)](_0x21d76c);}function logHistory(_0x157a5d,_0x21c9cc,_0x1b1d50=''){const _0x4b24a5=_0x4be4ff;let _0x5f68bb={'time':getTimeStamp(),'type':_0x157a5d,'event':_0x21c9cc};dbLogs['get'](_0x4b24a5(0x21e))[_0x4b24a5(0x2d3)](_0x5f68bb)[_0x4b24a5(0x33d)]();if(_0x1b1d50=='')_0x1b1d50=_0x21c9cc;proxyEmit(_0x4b24a5(0x2c4),{'log':_0x5f68bb,'summary':_0x1b1d50}),process[_0x4b24a5(0x2a3)]({'telegram':{..._0x5f68bb,'botname':config[_0x4b24a5(0x317)],'showname':config['showname']}},_0x1a75d5=>{}),logger[_0x4b24a5(0x250)](''+_0x5f68bb[_0x4b24a5(0x2c4)]);}function emitHistory(_0x9aee5a={}){const _0xa177d8=_0x4be4ff;Object[_0xa177d8(0x331)](_0x9aee5a)[_0xa177d8(0x2c8)]==0x0&&(_0x9aee5a={'type':[_0xa177d8(0x324),_0xa177d8(0x2c4)],'event':'','page':0x1});if(_0x9aee5a['type'][_0xa177d8(0x234)]('event'))_0x9aee5a[_0xa177d8(0x2b4)][_0xa177d8(0x260)](_0x9aee5a[_0xa177d8(0x2b4)][_0xa177d8(0x2b3)](_0xa177d8(0x2c4)),0x1,_0xa177d8(0x2f5),'warning',_0xa177d8(0x1e8));if(dbLogs[_0xa177d8(0x2e2)](_0xa177d8(0x21e))[_0xa177d8(0x2dd)]()){let _0x1cfd8c=dbLogs[_0xa177d8(0x29d)](_0xa177d8(0x21e))[_0xa177d8(0x368)](_0x486ebb=>{const _0x54dbbd=_0xa177d8;if(_0x9aee5a['type'][_0x54dbbd(0x2c8)]==0x0)return![];else return _0x9aee5a[_0x54dbbd(0x2b4)]['includes'](_0x486ebb[_0x54dbbd(0x2b4)]);})[_0xa177d8(0x368)](_0x3b9d39=>{const _0x166a42=_0xa177d8;if(_0x9aee5a[_0x166a42(0x2c4)]=='')return!![];else return _0x3b9d39[_0x166a42(0x2c4)][_0x166a42(0x27f)]()[_0x166a42(0x234)](_0x9aee5a[_0x166a42(0x2c4)][_0x166a42(0x27f)]());})[_0xa177d8(0x365)](_0xa177d8(0x245)),_0x12f5be=_0x1cfd8c[_0xa177d8(0x2dd)]()[_0xa177d8(0x2c8)];_0x1cfd8c=_0x1cfd8c['reverse']()['slice']((_0x9aee5a[_0xa177d8(0x33e)]-0x1)*logPageSize,_0x9aee5a['page']*logPageSize-0x1)[_0xa177d8(0x344)]()[_0xa177d8(0x2dd)](),proxyEmit(_0xa177d8(0x2b7),{'logs':_0x1cfd8c,'total':_0x12f5be});}else proxyEmit(_0xa177d8(0x2b7),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x351183){const _0x5daf2a=_0x4be4ff;if(dbLogs['has'](_0x5daf2a(0x21e))['value']()){const _0x56b4b1=dbLogs['get'](_0x5daf2a(0x21e))['sortBy'](_0x5daf2a(0x245))[_0x5daf2a(0x368)](_0x5ccbfc=>{const _0x5c407d=_0x5daf2a;return _0x5ccbfc[_0x5c407d(0x2b4)]==_0x5c407d(0x324);})['value']();dbLogs[_0x5daf2a(0x29d)](_0x5daf2a(0x21e))[_0x5daf2a(0x2fa)]()[_0x5daf2a(0x33d)](),dbLogs[_0x5daf2a(0x29d)]('logs')['assign'](_0x56b4b1)[_0x5daf2a(0x33d)](),emitHistory(_0x351183);}}async function pauseBot(_0x57cb02=''){const _0x42eb58=_0x4be4ff,_0x5c99c6=new Date()[_0x42eb58(0x271)]();if(!lastErrorShown||_0x5c99c6-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x5c99c6;!lastBotPause?(lastBotPause=_0x5c99c6,consecutivePauses=0x1):(_0x5c99c6-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x42eb58(0x2a3)]({'stop':_0x42eb58(0x2be)},_0x460fcf=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x57cb02)_0x57cb02+=_0x42eb58(0x321);logHistory(_0x42eb58(0x2f5),_0x57cb02+_0x42eb58(0x28c)+pauseBotInterval/0xea60+_0x42eb58(0x281)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x298628=_0x4be4ff;process[_0x298628(0x2a3)]({'stop':_0x298628(0x2c5)},_0x2832b0=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x28ff4b,_0x307b9e){const _0x3aa93e=_0x4be4ff;if(_0x28ff4b[_0x3aa93e(0x2bd)]()['includes'](_0x3aa93e(0x362)))return logHistory(_0x3aa93e(0x2f5),config[_0x3aa93e(0x2c0)]+_0x3aa93e(0x29c)),![];else{if(_0x28ff4b[_0x3aa93e(0x2bd)]()[_0x3aa93e(0x234)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',config[_0x3aa93e(0x2c0)]+_0x3aa93e(0x2a7)),![];else{if(_0x28ff4b[_0x3aa93e(0x2bd)]()['includes'](_0x3aa93e(0x349)))return logHistory('error',config[_0x3aa93e(0x2c0)]+_0x3aa93e(0x36b)),logHistory(_0x3aa93e(0x2f5),_0x3aa93e(0x258)),![];else await handleError(_0x28ff4b,_0x307b9e);}}}async function handleError(_0x12b23d,_0x4b948f,_0x5ac2ee=''){const _0x139f44=_0x4be4ff,_0x450730=config[_0x139f44(0x2c0)]||_0x139f44(0x269);if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)](_0x139f44(0x1fa))||_0x12b23d['toString']()['includes'](_0x139f44(0x31e)))await pauseBot(config[_0x139f44(0x2c0)]+_0x139f44(0x268));else{if(_0x12b23d['toString']()[_0x139f44(0x234)](_0x139f44(0x356))||_0x12b23d['toString']()[_0x139f44(0x234)]('OnMaintenance'))await pauseBot(config['exchange']+_0x139f44(0x265));else{if(_0x12b23d['toString']()[_0x139f44(0x234)]('RequestTimeout'))await pauseBot(config[_0x139f44(0x2c0)]+_0x139f44(0x1e6));else{if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config['exchange']+_0x139f44(0x217));else{if(_0x12b23d[_0x139f44(0x2bd)]()['includes'](_0x139f44(0x367)))logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x25d)),logHistory(_0x139f44(0x2f5),_0x139f44(0x29a)),await killBot();else{if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)]('InvalidNonce'))logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x20b)),logHistory(_0x139f44(0x2f5),_0x139f44(0x29a)),await killBot();else{if(_0x12b23d instanceof ccxt[_0x139f44(0x212)])logger['debug'](_0x139f44(0x2c2),_0x12b23d),await pauseBot(config[_0x139f44(0x2c0)]+_0x139f44(0x235));else{if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)](_0x139f44(0x362)))logHistory('error',_0x4b948f+'\x20|\x20'+config[_0x139f44(0x2c0)]+_0x139f44(0x2f4)),logHistory(_0x139f44(0x2f5),_0x139f44(0x29a)),await killBot();else{if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x321)+config['exchange']+_0x139f44(0x2dc)),logHistory(_0x139f44(0x2f5),_0x139f44(0x29a)),await killBot();else{if(_0x12b23d[_0x139f44(0x2bd)]()[_0x139f44(0x234)]('AuthenticationError'))logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x321)+config[_0x139f44(0x2c0)]+_0x139f44(0x277)),logHistory('error',_0x139f44(0x29a)),await killBot();else{if(_0x12b23d[_0x139f44(0x2bd)]()['includes'](_0x139f44(0x26c)))logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x338)+_0x5ac2ee);else _0x12b23d instanceof ccxt[_0x139f44(0x1df)]?(logger[_0x139f44(0x364)](_0x139f44(0x2ec),_0x12b23d),logHistory(_0x139f44(0x2f5),_0x4b948f+_0x139f44(0x321)+config[_0x139f44(0x2c0)]+_0x139f44(0x23b))):(logger[_0x139f44(0x250)](_0x4b948f+_0x139f44(0x358),_0x12b23d),await pauseBot(_0x139f44(0x2ce)));}}}}}}}}}}}function formatResult(_0x328776,_0x53e905){return parseFloat(_0x328776['toFixed'](_0x53e905));}function formatResultTruncate(_0x3b06c3,_0x52f46e){const _0x2c5b4f=_0x4be4ff;let _0x11996c=formatResultString(_0x3b06c3,0xa),_0xf74b3d=_0x11996c[_0x2c5b4f(0x2b3)]('.');return _0xf74b3d!=-0x1&&(_0x11996c=_0x11996c[_0x2c5b4f(0x218)](0x0,_0xf74b3d+_0x52f46e+0x1)),Number(_0x11996c);}function formatResultString(_0x53a809,_0x15890c){const _0x1db6ae=_0x4be4ff;let _0x3530f6;if(!(''+_0x53a809)[_0x1db6ae(0x234)]('e'))_0x3530f6=+(Math[_0x1db6ae(0x2e9)](_0x53a809+'e+'+_0x15890c)+'e-'+_0x15890c);else{let _0x1a198c=(''+_0x53a809)[_0x1db6ae(0x2c9)]('e'),_0x296fa5='';+_0x1a198c[0x1]+_0x15890c>0x0&&(_0x296fa5='+'),_0x3530f6=+(Math[_0x1db6ae(0x2e9)](+_0x1a198c[0x0]+'e'+_0x296fa5+(+_0x1a198c[0x1]+_0x15890c))+'e-'+_0x15890c);}return Number(_0x3530f6)[_0x1db6ae(0x361)](_0x15890c);}function getServerTime(){const _0x5ad871=_0x4be4ff,_0x47a056=new Date();return _0x47a056['getFullYear']()+'/'+(_0x47a056['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x47a056[_0x5ad871(0x285)]()[_0x5ad871(0x2bd)]()[_0x5ad871(0x297)](0x2,'0')+'\x20'+_0x47a056['getHours']()[_0x5ad871(0x2bd)]()[_0x5ad871(0x297)](0x2,'0')+':'+_0x47a056[_0x5ad871(0x2ae)]()[_0x5ad871(0x2bd)]()[_0x5ad871(0x297)](0x2,'0')+':'+_0x47a056[_0x5ad871(0x2c3)]()[_0x5ad871(0x2bd)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5b2fc0=_0x4be4ff,_0x2fa2ae=shiftedTime();return _0x2fa2ae['getFullYear']()+'/'+(_0x2fa2ae[_0x5b2fc0(0x329)]()+0x1)[_0x5b2fc0(0x2bd)]()['padStart'](0x2,'0')+'/'+_0x2fa2ae[_0x5b2fc0(0x285)]()[_0x5b2fc0(0x2bd)]()['padStart'](0x2,'0')+'\x20'+_0x2fa2ae[_0x5b2fc0(0x302)]()[_0x5b2fc0(0x2bd)]()[_0x5b2fc0(0x297)](0x2,'0')+':'+_0x2fa2ae[_0x5b2fc0(0x2ae)]()['toString']()[_0x5b2fc0(0x297)](0x2,'0')+':'+_0x2fa2ae[_0x5b2fc0(0x2c3)]()[_0x5b2fc0(0x2bd)]()['padStart'](0x2,'0');}function getDate(){const _0x27d552=_0x4be4ff,_0x529670=shiftedTime();return _0x529670[_0x27d552(0x32f)]()+'/'+(_0x529670[_0x27d552(0x329)]()+0x1)['toString']()[_0x27d552(0x297)](0x2,'0')+'/'+_0x529670[_0x27d552(0x285)]()[_0x27d552(0x2bd)]()[_0x27d552(0x297)](0x2,'0');}function getHour(){const _0x29fc1e=_0x4be4ff,_0xc7f72f=shiftedTime();return _0xc7f72f['getHours']()[_0x29fc1e(0x2bd)]()[_0x29fc1e(0x297)](0x2,'0');}function sleep(_0x53a1e1){return new Promise(_0x26fc79=>setTimeout(_0x26fc79,_0x53a1e1));}function shiftedTime(){const _0x1c5659=_0x4be4ff,_0x357fa9=new Date();let _0x3e477a=_0x357fa9;if(config&&config[_0x1c5659(0x33f)]!==0x0)_0x3e477a=fns[_0x1c5659(0x1e1)](_0x357fa9,{'hours':config[_0x1c5659(0x33f)]});return _0x3e477a;}function timer(_0x45fb46){const _0x31a8fe=_0x4be4ff,_0x3cc3ca=new Date();!lasttime?console['log'](getTimeStamp()+_0x31a8fe(0x21d),_0x45fb46,_0x3cc3ca):console[_0x31a8fe(0x24f)](getTimeStamp()+':\x20timer\x20>',_0x45fb46,(_0x3cc3ca-lasttime)/0x3e8),lasttime=_0x3cc3ca;}