const _0x3015fe=_0x5958;(function(_0x55b740,_0x11d949){const _0x2ad5f5=_0x5958,_0x617405=_0x55b740();while(!![]){try{const _0x1a137a=parseInt(_0x2ad5f5(0x13c))/0x1+-parseInt(_0x2ad5f5(0x1e8))/0x2*(-parseInt(_0x2ad5f5(0x19a))/0x3)+-parseInt(_0x2ad5f5(0x1ef))/0x4*(-parseInt(_0x2ad5f5(0xce))/0x5)+parseInt(_0x2ad5f5(0x1fc))/0x6+parseInt(_0x2ad5f5(0xdb))/0x7*(-parseInt(_0x2ad5f5(0xf1))/0x8)+parseInt(_0x2ad5f5(0x1e0))/0x9+parseInt(_0x2ad5f5(0x1a0))/0xa*(-parseInt(_0x2ad5f5(0x123))/0xb);if(_0x1a137a===_0x11d949)break;else _0x617405['push'](_0x617405['shift']());}catch(_0x52357b){_0x617405['push'](_0x617405['shift']());}}}(_0x2646,0xc4a2c));const _0x4f6dae=function(){let _0x18babe=!![];return function(_0x4882a0,_0x47c465){const _0x5bcaef=_0x18babe?function(){const _0x33144f=_0x5958;if(_0x47c465){const _0x32f25d=_0x47c465[_0x33144f(0x147)](_0x4882a0,arguments);return _0x47c465=null,_0x32f25d;}}:function(){};return _0x18babe=![],_0x5bcaef;};}(),_0x13d5e1=_0x4f6dae(this,function(){const _0x590853=_0x5958;return _0x13d5e1['toString']()[_0x590853(0xd8)](_0x590853(0x1b9))[_0x590853(0x1d3)]()['constructor'](_0x13d5e1)[_0x590853(0xd8)](_0x590853(0x1b9));});_0x13d5e1();'use strict';const ccxt=require(_0x3015fe(0x1a9))[_0x3015fe(0xcd)],low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x3015fe(0x214)],util=require(_0x3015fe(0xe6)),argv=require(_0x3015fe(0x176))(process[_0x3015fe(0x126)][_0x3015fe(0x11d)](0x2))[_0x3015fe(0x126)],path=require(_0x3015fe(0x1af));let exchange;global[_0x3015fe(0x186)]={},global[_0x3015fe(0x197)]={};const usdBasecoins=[_0x3015fe(0x1bd),'BUSD','TUSD','USDT',_0x3015fe(0x161),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3015fe(0xfb)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3015fe(0x215)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x3015fe(0x1e3))[_0x3015fe(0x251)],botID=process[_0x3015fe(0x126)][0x2]||_0x3015fe(0x221),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3015fe(0x24f)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x3015fe(0x126)][0x3]||'',configpath=userID?_0x3015fe(0x212)+userID+'/':_0x3015fe(0x212),logspath=userID?_0x3015fe(0x1ec)+userID+'/':_0x3015fe(0x1ec),loggerfile=fs[_0x3015fe(0x1fb)](logspath+_0x3015fe(0x104),{'flags':'a'});!fs[_0x3015fe(0xfa)](configpath)&&fs[_0x3015fe(0x15c)](configpath);!fs[_0x3015fe(0xfa)](logspath)&&fs[_0x3015fe(0x15c)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x3015fe(0x15d)+botID+_0x3015fe(0xda),performancefile=configpath+_0x3015fe(0x15d)+botID+_0x3015fe(0x146),coinresultsfile=configpath+_0x3015fe(0x15d)+botID+_0x3015fe(0x15e),settingsfile=configpath+_0x3015fe(0x185),securefile=configpath+_0x3015fe(0x205),configbackuppath=configpath+_0x3015fe(0x216),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3015fe(0x14d)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3015fe(0x14d)]({'bot':[],'version':serverversion})[_0x3015fe(0xed)]();function _0x2646(){const _0x46c78f=['***','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','added','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','balancing\x20resumed','placeOrder','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','realized','rightTxt','showConfig','\x20minutes\x20-\x20','sortBy','coin','removed','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Waited\x20','\x20network\x20error','apiKey','\x20exchange',':\x20Bot\x20','customId','openOrders','leftTxt','usd','balancing\x20resumes\x20when\x20cooldown\x20ends','coin-loading-progress','red_yellow_blue','writeFile','No\x20more\x20open\x20orders\x20-\x20','2\x20-\x20Handled\x20open\x20orders','value','random','recovery','average','RateLimitExceeded','entries','buys','performance','fetchOpenOrders','final','2\x20-\x20Orders\x20unlocked','eur','Cooldown\x20ended\x20-\x20balancing\x20resumed','log','\x20API\x20secret\x20is\x20invalid','version','timeout','last','date','BNB/','orderId','target','floor','pro','5VmIvIM','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','fetchBalance','portfolio','fiat','ExchangeNotAvailable','bot','emojisell','change24h','getCoinNumber()','search','getFullYear','-events.json','1874215Ehbnay','total','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','1\x20-\x20Handle\x20open\x20orders','spot','<pre>','\x20not\x20responding','yyyy-MM-dd\x27T\x27HH:mm:ss','remove','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','unlinkSync','util','\x20change','ordertype','\x20>\x20[DEBUG]\x20','cost','Initializing\x20coin\x20results','</pre>','write','exchange\x20reloaded','findIndex','exec','40njMbPH','Unfilled\x20order(s)\x20canceled\x20after\x20','<b>','Uncaught\x20ExchangeError:','forEach','Market','getDate','amount','timeshift','existsSync','freeze','add','.json','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20hour','sendMetricsTelegram','/USD','Reset\x20|\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','/output-000.log','type','recent20','split','\x20value','apiPassword','get','getPortfolio','limit','headless','emitHistory','createOrder','restart','no\x20additional\x20symbols','botname','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','fetchTicker','getCoins()','timestamp','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','<b>Bot\x20','fetchClosedOrders','concat','additional\x20symbols\x20','running','slice','fee','datetime','BTC','delta','0\x20-\x20EXECUTION:\x20','88biMscl','ID:\x20','colorscheme','argv','Executing\x20exchange\x20reload','Uncaught\x20Exception:','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','startprice','event-history','filled','function','set','\x20|\x20exchange:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','yyyy/MM/dd','getOpenOrders()','distribution','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','showname','getTime','Transaction\x20detection\x20unblocked','full','orderstatus','InvalidOrder','storeFiat','339252ISMzsS','valid','emojibuy','buy','replace','OnMaintenance','\x20minutes','threshold','no\x20open\x20orders','storeHeadless','-performance.json','apply','getPortfolio(0)','2.3.5','has','UNLOCKING','sha256','defaults','1\x20-\x20FILLED:\x20','uncaughtException','Order\x20is\x20invalid:\x20','currency','\x20|\x20lock\x20orders:\x20','Resetting\x20coin\x20results:\x20','indexOf','bid','highest','Uncaught\x20NetworkError:','args','toLowerCase','%\x20(','LOCKED','mkdirSync','bot-','-results.json','recreate','market','USDC','Resetting\x20bot\x20history','RSA-OAEP','ETH','canceled','\x20closed\x20the\x20connection','push','\x20|\x20Custom\x20ID:\x20','active','progress','secure','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20not\x20available','\x20>\x20','stringify','OrderNotFound','onepagemode','USDT','substring','amountToPrecision','basecoinvalue','yargs/yargs','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Bot\x20','1\x20-\x20Validate\x20orders:\x20','keys','open','net-basecoin','send','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','success','Initiating\x20exchange\x20reload','ongoing','ask','bb-settings.json','ticker','initial','min','\x20|\x20','fees','basecoin','isEqual','data','balances','sells','Order\x20amount\x20is\x20invalid:\x20','Order(s)\x20not\x20validated\x20after\x20','starting-balances','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','fetchTickers','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','side','change','resetHistory','privateKey','11457PBSEYg','InsufficientFunds','\x20exchange\x20error','parse','bots','close','1255890JInafy','limit-low','length','getSeconds','AuthenticationError','DDoSProtection','getStartingBalances','\x20|\x20Error\x20details:\x20','\x20metrics:</b>\x20\x0a\x0a','ccxt','password','watchOrders','EUR','autoliquidity','sell','path','order','assign','splice','error','price','getHours','sort','1\x20-\x20Unlock\x20orders','format','(((.+)+)+)+$','shift','find','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','USD','event','RequestTimeout','filter','API-key\x20format\x20invalid','cancelOrder','time','settings','kill','remainingSymbols','configuration-stored','apiSecret','trade','limits','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ExchangeError','Net\x20effect','join','liquidity','Order\x20filled:\x20','cancel','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','toString','decrypt','loadSymbols()','warning','padStart','startdate','Saving\x20configuration','configuration','\x20-\x20bot\x20not\x20started','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','status','************','2\x20-\x20Validate\x20orders:\x20','9533970PCYGLq','netoffset','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','./version.json','starting-balance-','\x20order:\x20','BNB','2.6.0','544IvEztV','cancelLoading','none','cooldown','./logs/','Invalid\x20API\x20key\x20or\x20secret\x20entered','placeOrder()','883420ouBmxe','abs','breakeven','excluded','3\x20-\x20handling\x20FILLED\x20order:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Pausing\x20for\x20','\x20:\x20','getMinutes','differenceInSeconds','page','max','createWriteStream','2943912rOElgk','limit-high','closed','round','storeConfiguration','ORDERS.LOCKED','symbol','\x20API\x20key\x20is\x20invalid',':\x20timer\x20>','bb-secure.json','Binance','enabled','changes','offset','watchTrades','reverse','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','logs','getMonth','Manual\x20balancing\x20required','Fee\x20discount\x20refund\x20detected:\x20','Net\x20','./config/','net-fiat','Crypt','UNLOCKED','/backup/','number','deleteHistoryAlerts','cloneDeep','exchange','message','debug','fromCodePoint','coins','cancelOrders()','includes','001','toFixed','Invalid\x20quantity'];_0x2646=function(){return _0x46c78f;};return _0x2646();}const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3015fe(0x14d)]({'coins':[],'version':serverversion})[_0x3015fe(0xed)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3015fe(0x14c),'rsaStandard':_0x3015fe(0x163)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2dbc4b=>{const _0x30fa52=_0x3015fe;console[_0x30fa52(0x24f)](_0x2dbc4b);},'simple':_0x6a63d1=>{const _0x4fc6e1=_0x3015fe;console['log'](_0x6a63d1),loggerfile[_0x4fc6e1(0xed)](util['format'](_0x6a63d1)+'\x0a');},'full':async(_0x28d87e,_0x5301b7='')=>{const _0x38a6e9=_0x3015fe;let _0x4f6916;if(config['showname'])_0x4f6916=getTimeStamp()+':\x20'+config[_0x38a6e9(0x112)]+_0x38a6e9(0x16e)+_0x28d87e;else _0x4f6916=getTimeStamp()+_0x38a6e9(0x237)+botID+_0x38a6e9(0x16e)+_0x28d87e;console[_0x38a6e9(0x24f)](_0x4f6916),loggerfile['write'](util['format'](_0x4f6916)+'\x0a'),_0x5301b7&&(console['log'](_0x5301b7),loggerfile['write'](util['format'](_0x5301b7)+'\x0a'));},'debug':async(_0x36eca7,_0x197f10='')=>{const _0x3dd0dd=_0x3015fe;let _0x6f5da;if(config[_0x3dd0dd(0x135)])_0x6f5da=getTimeStamp()+':\x20'+config['botname']+_0x3dd0dd(0xe9)+_0x36eca7;else _0x6f5da=getTimeStamp()+_0x3dd0dd(0x237)+botID+_0x3dd0dd(0xe9)+_0x36eca7;if(debugging)console[_0x3dd0dd(0x24f)](_0x6f5da);loggerfile[_0x3dd0dd(0xed)](util[_0x3dd0dd(0x1b8)](_0x6f5da)+'\x0a');if(_0x197f10){if(debugging)console[_0x3dd0dd(0x24f)](_0x197f10);loggerfile[_0x3dd0dd(0xed)](util[_0x3dd0dd(0x1b8)](_0x197f10)+'\x0a');}}};process['on'](_0x3015fe(0x14f),function(_0xf2b8d){const _0x4edb4c=_0x3015fe;logHistory(_0x4edb4c(0x1b3),_0x4edb4c(0x1d2)),logger[_0x4edb4c(0x21c)](_0x4edb4c(0x128),_0xf2b8d);});settings[_0x3015fe(0xf9)]!=config['timeshift']&&updateTimeshift(settings[_0x3015fe(0xf9)]);settings['onepagemode']!=config[_0x3015fe(0x171)]&&updateOnepagemode(settings[_0x3015fe(0x171)]);process[_0x3015fe(0x17e)]({'started':'running'},_0x34e83b=>{}),initializeProcessListeners();function proxyEmit(_0x6edecd,_0x8a67a3=null){const _0x681fee=_0x3015fe;process[_0x681fee(0x17e)]({'function':_0x6edecd,'args':_0x8a67a3},_0x34aac9=>{});}function initializeProcessListeners(){const _0x5f5077=_0x3015fe;process['on'](_0x5f5077(0x21b),_0x364034=>{const _0x803294=_0x5f5077;switch(Object[_0x803294(0x17b)](_0x364034)[0x0]){case _0x803294(0xf9):_0x364034['timeshift']!=undefined&&(settings[_0x803294(0xf9)]=_0x364034[_0x803294(0xf9)],updateTimeshift(settings[_0x803294(0xf9)]));break;case _0x803294(0x171):_0x364034['onepagemode']!=undefined&&(settings[_0x803294(0x171)]=_0x364034[_0x803294(0x171)],updateOnepagemode(settings[_0x803294(0x171)]));break;case _0x803294(0x19e):_0x364034['bots']!=undefined&&(bots=JSON[_0x803294(0x19d)](_0x364034[_0x803294(0x19e)]),proxyEmit(_0x803294(0x19e),bots));break;case _0x803294(0x12d):switch(_0x364034[_0x803294(0x12d)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x803294(0x10e):emitHistory(_0x364034['args']);break;case _0x803294(0x218):deleteHistoryAlerts(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x10b):getPortfolio(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x200):storeConfiguration(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x145):storeHeadless(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x13b):storeFiat(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x198):resetHistory();break;case _0x803294(0x1a6):getStartingBalances(getNormalizedPerformance());break;case _0x803294(0x229):placeOrder(_0x364034[_0x803294(0x158)]);break;case _0x803294(0x1e9):cancelLoading();break;case _0x803294(0x22d):showConfig();break;case _0x803294(0x100):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x39a5a4=null,_0x127d58=![]){const _0x6201e1=_0x3015fe;logger['debug'](_0x6201e1(0x102)+(_0x39a5a4&&_0x39a5a4[_0x6201e1(0x1a2)]>0x0?_0x6201e1(0x11b)+_0x39a5a4[_0x6201e1(0x1ce)](','):_0x6201e1(0x111))+'\x20|\x20'+(_0x127d58?_0x6201e1(0xee):'exchange\x20not\x20reloaded')+_0x6201e1(0x12f)+config[_0x6201e1(0x21a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x127d58)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x6201e1(0x235)]!=''&&config['apiKey']!='***'){if(_0x127d58){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x5a052b){handleErrorNoStop(_0x5a052b,_0x6201e1(0x1d5));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x39a5a4);const _0x51ba2e=await getCoins();[currentCoins,currentCoinsAll]=_0x51ba2e,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x6201e1(0x1a2)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x59d0eb=_0x3015fe;exchangeStopped=!![],await exchange[_0x59d0eb(0x19f)]();}async function reloadExchange(){const _0x8dc8bb=_0x3015fe;logger[_0x8dc8bb(0x21c)](_0x8dc8bb(0x182));while(lockOrders!=ORDERS[_0x8dc8bb(0x215)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x8dc8bb(0x21c)](_0x8dc8bb(0x127)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x1aae36=config[_0x3015fe(0x21a)],_0x129ee2=config[_0x3015fe(0x235)],_0x438e4a=config[_0x3015fe(0x1c8)],_0x35bd84=config['apiPassword']){const _0x24e68f=_0x3015fe;exchange&&await stopExchange();!supportedExchanges()[_0x24e68f(0x220)](_0x1aae36)&&(logHistory(_0x24e68f(0x1b3),_0x24e68f(0x20c)+_0x1aae36+_0x24e68f(0x236)),killBot());const _0x5b220c=ccxt[_0x1aae36[_0x24e68f(0x159)]()];exchange=new _0x5b220c({'apiKey':_0x129ee2,'secret':_0x438e4a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x35bd84)exchange[_0x24e68f(0x1aa)]=_0x35bd84;}function setStableCoins(){const _0x476931=_0x3015fe;let _0xa01e26=config['basecoin']=='ETH'?_0x476931(0x164):'BTC',_0x56f05a=!allSymbols[_0x476931(0x220)](_0xa01e26+_0x476931(0x101))?_0x476931(0x172):_0x476931(0x1bd),_0x24d67d=!allSymbols['includes'](_0xa01e26+'/EUR')?_0x56f05a:_0x476931(0x1ac);stablecoins={'eur':{'coin':''+_0xa01e26+_0x24d67d,'symbol':_0xa01e26+'/'+_0x24d67d},'usd':{'coin':''+_0xa01e26+_0x56f05a,'symbol':_0xa01e26+'/'+_0x56f05a}};}async function initwsCcxt(_0x2e3aa6){const _0x3bf6f1=_0x3015fe;_0x2e3aa6==null&&(_0x2e3aa6=[],config[_0x3bf6f1(0xd1)][_0x3bf6f1(0xf5)](_0xbf2ef3=>{const _0xa2d154=_0x3bf6f1;if(!_0xbf2ef3[_0xa2d154(0x1f2)]&&_0xbf2ef3[_0xa2d154(0x230)]!=config[_0xa2d154(0x18b)])_0x2e3aa6[_0xa2d154(0x167)](_0xbf2ef3['symbol']);}));if(!_0x2e3aa6[_0x3bf6f1(0x220)](stablecoins['eur'][_0x3bf6f1(0x202)]))_0x2e3aa6['push'](stablecoins[_0x3bf6f1(0x24d)][_0x3bf6f1(0x202)]);if(!_0x2e3aa6[_0x3bf6f1(0x220)](stablecoins[_0x3bf6f1(0x23b)][_0x3bf6f1(0x202)]))_0x2e3aa6[_0x3bf6f1(0x167)](stablecoins[_0x3bf6f1(0x23b)][_0x3bf6f1(0x202)]);if(config[_0x3bf6f1(0x21a)]['startsWith'](_0x3bf6f1(0x206))){if(!_0x2e3aa6[_0x3bf6f1(0x220)](_0x3bf6f1(0xc9)+config[_0x3bf6f1(0x18b)]))_0x2e3aa6[_0x3bf6f1(0x167)](_0x3bf6f1(0xc9)+config['basecoin']);}loadCoins(_0x2e3aa6);const _0x411724=async _0x4df5a8=>{const _0x27e35d=_0x3bf6f1,_0x38568a=await exchange[_0x27e35d(0x114)](_0x4df5a8);global['ticker'][noslash(_0x38568a['symbol'])]=_0x38568a[_0x27e35d(0xc7)];while(!![]){if(!botPaused)try{const _0x586169=await exchange[_0x27e35d(0x20a)](_0x4df5a8);global['ticker'][noslash(_0x586169[0x0][_0x27e35d(0x202)])]=_0x586169[0x0]['price'],await sleep(0x3e8);}catch(_0x1fe771){if(!exchangeStopped)await handleError(_0x1fe771,'watchTrades',_0x4df5a8);}else await sleep(0x64);}},_0x10bf40=async _0x50eeb9=>{const _0x15bf62=_0x3bf6f1;while(!![]){if(!botPaused)try{const _0x1f366f=await exchange['fetchTicker'](_0x50eeb9);global[_0x15bf62(0x197)][_0x1f366f[_0x15bf62(0x202)]]=_0x1f366f['percentage'],await sleep(0x3c*0x3e8);}catch(_0xb9e1ec){if(!exchangeStopped)await handleError(_0xb9e1ec,_0x15bf62(0x194),_0x50eeb9);}else await sleep(0x64);}},_0x193fe9=async()=>{const _0xa8c530=_0x3bf6f1;while(!![]){if(!botPaused)try{const _0x21b8fe=await exchange[_0xa8c530(0x1ab)]();_0x21b8fe[_0xa8c530(0xf5)](_0x3ecfd2=>{updateNumberCoinsCcxt(_0x3ecfd2);});}catch(_0x28e13b){if(!exchangeStopped)await handleError(_0x28e13b,_0xa8c530(0x1ab));}else await sleep(0x64);}};_0x2e3aa6[_0x3bf6f1(0xf5)](_0x1db236=>{_0x411724(_0x1db236),_0x10bf40(_0x1db236);}),!wsEventsSet&&(wsEventsSet=!![],_0x193fe9(),watchTransactions());}async function watchTransactions(){const _0x173b08=_0x3015fe;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x21c97b=await getCoins(),[_0x31fe89,_0x1dc4da]=_0x21c97b;let _0x3ecd96=[];currentCoins['forEach'](_0x15e9c1=>{const _0x150242=_0x5958,_0x430ea4=_0x31fe89[_0x150242(0x1bb)](_0x43e080=>_0x43e080['coin']==_0x15e9c1['coin']);if(_0x430ea4){if(_0x15e9c1[_0x150242(0x217)]!=_0x430ea4[_0x150242(0x217)]){let _0x537574;if(_0x15e9c1[_0x150242(0x230)]!=config[_0x150242(0x18b)]){const _0x3b8c3d=global['ticker'][noslash(_0x15e9c1[_0x150242(0x202)])];_0x537574=_0x15e9c1[_0x150242(0x20b)]?0x1/_0x3b8c3d:_0x3b8c3d;}else _0x537574=0x1;_0x3ecd96['push']({'coin':_0x15e9c1[_0x150242(0x230)],'symbol':_0x15e9c1['symbol'],'price':_0x537574,'number':Number(formatResult(_0x430ea4[_0x150242(0x217)]-_0x15e9c1[_0x150242(0x217)],0x8)),'basecoinvalue':_0x537574*(_0x430ea4['number']-_0x15e9c1[_0x150242(0x217)])});}}});if(_0x3ecd96[_0x173b08(0x1a2)]==0x1&&!blockTransactionDetection){if(config[_0x173b08(0x1ad)]){logger['debug'](_0x173b08(0x178)+_0x3ecd96[0x0][_0x173b08(0x175)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x173b08(0x156)]);if(lastFees[_0x173b08(0x156)]==0x0||Math['abs'](_0x3ecd96[0x0][_0x173b08(0x175)])>lastFees[_0x173b08(0x156)]){delete _0x3ecd96[0x0][_0x173b08(0x202)],delete _0x3ecd96[0x0]['basecoinvalue'];let _0x2e5e0f=[],_0x39b368=[...config[_0x173b08(0x1cf)]]||[],_0x4f2453=config[_0x173b08(0x1cf)];_0x39b368[_0x173b08(0x1b6)]((_0x326632,_0x23346a)=>_0x326632[_0x173b08(0xc8)]>_0x23346a[_0x173b08(0xc8)]?-0x1:_0x23346a['date']>_0x326632[_0x173b08(0xc8)]?0x1:0x0);const _0x5639f2=getDate();if(_0x39b368[0x0]){const _0x2eec17=fns[_0x173b08(0x19d)](_0x39b368[0x0][_0x173b08(0xc8)],_0x173b08(0x131),new Date()),_0x55c328=fns[_0x173b08(0x19d)](_0x5639f2,'yyyy/MM/dd',new Date());if(fns[_0x173b08(0x18c)](_0x2eec17,_0x55c328)){_0x2e5e0f=_0x39b368[0x0][_0x173b08(0x208)];const _0x44a836=_0x2e5e0f['find'](_0x443e57=>_0x443e57['coin']==_0x3ecd96[0x0][_0x173b08(0x230)]);_0x44a836?(_0x44a836[_0x173b08(0x217)]+=_0x3ecd96[0x0][_0x173b08(0x217)],_0x44a836[_0x173b08(0x217)]==0x0&&(_0x2e5e0f=_0x2e5e0f[_0x173b08(0x1c0)](_0x5c394f=>{const _0x11887f=_0x173b08;return _0x5c394f['coin']!=_0x3ecd96[0x0][_0x11887f(0x230)];}))):_0x2e5e0f[_0x173b08(0x167)](_0x3ecd96[0x0]);const _0x336a58=_0x4f2453[_0x173b08(0x1bb)](_0x23bf37=>_0x23bf37[_0x173b08(0xc8)]==_0x5639f2);_0x336a58[_0x173b08(0x208)]=_0x2e5e0f;}else _0x4f2453[_0x173b08(0x167)]({'date':_0x5639f2,'changes':[_0x3ecd96[0x0]]});}const _0xe2d14e=_0x4f2453[_0x173b08(0x1bb)](_0xe8761e=>_0xe8761e[_0x173b08(0xc8)]==_0x5639f2);if(_0xe2d14e){let _0x4eb47f=!![];_0xe2d14e['changes'][_0x173b08(0xf5)](_0x3d0f88=>{const _0x5cc3d3=_0x173b08;if(_0x3d0f88[_0x5cc3d3(0x217)]!=0x0)_0x4eb47f=![];}),_0x4eb47f&&(_0x4f2453=_0x4f2453[_0x173b08(0x1c0)](_0x4305b3=>{const _0x3f96b6=_0x173b08;return _0x4305b3[_0x3f96b6(0xc8)]!=_0x5639f2;}));}let _0x5d81f8=dbConfig['get'](_0x173b08(0xd4))['find']({'botID':botID})[_0x173b08(0x242)]();_0x5d81f8&&(dbConfig[_0x173b08(0x10a)](_0x173b08(0xd4))[_0x173b08(0x1bb)]({'botID':botID})[_0x173b08(0x1b1)]({'liquidity':_0x4f2453})['write'](),config['liquidity']=_0x4f2453),logHistory(_0x173b08(0x181),'Portfolio\x20change\x20detected:\x20'+Math[_0x173b08(0x1f0)](_0x3ecd96[0x0]['number'])+'\x20'+_0x3ecd96[0x0][_0x173b08(0x230)]+'\x20'+(_0x3ecd96[0x0][_0x173b08(0x217)]>0x0?_0x173b08(0x226):_0x173b08(0x231))+_0x173b08(0x113)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x173b08(0x21c)](_0x173b08(0x210)+Math[_0x173b08(0x1f0)](_0x3ecd96[0x0][_0x173b08(0x217)])+'\x20'+_0x3ecd96[0x0]['coin']+'\x20'+(_0x3ecd96[0x0][_0x173b08(0x217)]>0x0?_0x173b08(0x226):_0x173b08(0x231)));transactionDetected=!![],currentCoins=_0x31fe89,currentCoinsAll=_0x1dc4da;}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x173b08(0x1f0)](_0x3ecd96[0x0][_0x173b08(0x217)])+'\x20'+_0x3ecd96[0x0][_0x173b08(0x230)]+'\x20'+(_0x3ecd96[0x0][_0x173b08(0x217)]>0x0?'added':_0x173b08(0x231))+_0x173b08(0xdd)),currentCoins=_0x31fe89,currentCoinsAll=_0x1dc4da;}await sleep(watchTransactionsInterval);}catch(_0x1f8b5e){if(!exchangeStopped)await handleError(_0x1f8b5e,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x1cdbaf=config['exchange'],_0xf1452a=![]){const _0x298807=_0x3015fe;if(allSymbols&&!_0xf1452a)return;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x298807(0x247)](markets)[_0x298807(0xf5)](_0x162941=>{const _0x56936d=_0x298807;_0x162941[0x1][_0x56936d(0x169)]&&_0x162941[0x1][_0x56936d(0xdf)]&&allSymbols['push'](_0x162941[0x0]);});}catch(_0x44d59c){throw _0x44d59c;}}async function initclient(){const _0xf5df8=_0x3015fe;emitLoadingProgress(),proxyEmit(_0xf5df8(0x1da),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x26998f=getNormalizedPerformance();emitPerformance(_0x26998f),getStartingBalances(_0x26998f);}async function toggleBotMode(){const _0x59b943=_0x3015fe;let _0x4d16f3=dbConfig[_0x59b943(0x10a)](_0x59b943(0xd4))[_0x59b943(0x1bb)]({'botID':botID})[_0x59b943(0x242)]();if(_0x4d16f3){const _0x2f88ed=!_0x4d16f3[_0x59b943(0x10d)];dbConfig[_0x59b943(0x10a)]('bot')[_0x59b943(0x1bb)]({'botID':botID})['assign']({'headless':_0x2f88ed})[_0x59b943(0xed)](),config['headless']=_0x2f88ed,proxyEmit(_0x59b943(0x1da),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x52e63b=_0x3015fe;process[_0x52e63b(0x17e)]({'updatebotmanager':!![]},_0x1971d6=>{});}async function loadCoins(_0x4c2605){const _0x28ec7f=_0x3015fe;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1b0a31,_0x750cbb=0x0,_0x1f8ad1=0x0;_0x4c2605[_0x28ec7f(0xf5)](_0x1deffb=>{const _0x3f63d6=_0x28ec7f;loading['remainingSymbols'][_0x3f63d6(0x167)](_0x1deffb);}),loadingCanceled=![];let _0x475b34=![];while(_0x1b0a31!=_0x4c2605[_0x28ec7f(0x1a2)]){_0x1b0a31=0x0,_0x4c2605[_0x28ec7f(0xf5)](_0x4dc89d=>{const _0x575651=_0x28ec7f;if(global[_0x575651(0x186)][noslash(_0x4dc89d)]){loading[_0x575651(0x1c6)]=loading[_0x575651(0x1c6)][_0x575651(0x1c0)](_0x23a4a1=>_0x23a4a1!=_0x4dc89d);if(!watchedSymbols[_0x575651(0x220)](_0x4dc89d))watchedSymbols['push'](_0x4dc89d);_0x1b0a31++;}}),loading[_0x28ec7f(0x16a)]=Math[_0x28ec7f(0x1ff)](_0x1b0a31/_0x4c2605['length']*0x64);loading['progress']!=0x64&&(_0x1f8ad1>0x1e*0x5&&(loading[_0x28ec7f(0x252)]=!![],emitLoadingProgress()),_0x1f8ad1>0x78*0x5&&!_0x475b34&&(loading[_0x28ec7f(0x1d1)]=!![],emitLoadingProgress(),_0x475b34=!![],logHistory('error',_0x28ec7f(0x177)+loading['remainingSymbols'][_0x28ec7f(0x1ce)](',\x20')+_0x28ec7f(0x1db)),logHistory(_0x28ec7f(0x1b3),_0x28ec7f(0x1f5)+loadCoinsRetryInterval/0xea60+_0x28ec7f(0x225)),pidCoinReloading=setTimeout(()=>{const _0x30d98d=_0x28ec7f;process[_0x30d98d(0x17e)]({'stop':'restart'},_0x2ff8ca=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1b0a31!=_0x750cbb&&(_0x750cbb=_0x1b0a31,emitLoadingProgress()),_0x1f8ad1++,await sleep(0xc8);}_0x1b0a31==_0x4c2605[_0x28ec7f(0x1a2)]&&(coinsLoaded=!![],process[_0x28ec7f(0x17e)]({'status':_0x28ec7f(0x207),'live':_0x28ec7f(0x11c)},_0x8473e3=>{}),_0x475b34&&logHistory(_0x28ec7f(0x181),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x518e89=_0x3015fe;proxyEmit(_0x518e89(0x1da),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x29a3f2=_0x3015fe;proxyEmit(_0x29a3f2(0x23d),loading);}async function getFiat(){const _0x3526bc=_0x3015fe;let _0x990de0=global['ticker'][stablecoins['eur']['coin']],_0x56a19d=global['ticker'][stablecoins[_0x3526bc(0x23b)][_0x3526bc(0x230)]];return{'eur':Number(_0x990de0),'usd':Number(_0x56a19d)};}function capitalize(_0x38502d){const _0x312e2f=_0x3015fe;return _0x38502d[_0x312e2f(0x173)](0x0,0x1)['toUpperCase']()+_0x38502d['substring'](0x1);}function supportedExchanges(){const _0x574e70=_0x3015fe,_0x4342ba=['ws',_0x574e70(0x194),_0x574e70(0x114),'watchTrades',_0x574e70(0x1ab),_0x574e70(0x1c2),_0x574e70(0x10f),_0x574e70(0x24a),_0x574e70(0x119),_0x574e70(0xd0)];let _0x1e672d=[],_0x1fdf79=[],_0x1febf3=ccxt['exchanges'];_0x1febf3[_0x574e70(0xf5)](_0x2f5561=>{const _0xc12bfe=_0x574e70;try{const _0x4b00e6=new ccxt[_0x2f5561]();if(_0x4b00e6[_0xc12bfe(0x14a)]['ws'])_0x1fdf79[_0xc12bfe(0x167)](_0x4b00e6);}catch(_0x3dfa80){}}),_0x1fdf79['forEach'](_0x52cb5e=>{const _0xb6baaa=_0x574e70;let _0x36c482=0x0;_0x4342ba[_0xb6baaa(0xf5)](_0x2d8c7c=>{const _0x21d498=_0xb6baaa;_0x2d8c7c in _0x52cb5e['has']&&_0x52cb5e[_0x21d498(0x14a)][_0x2d8c7c]&&_0x36c482++;}),_0x36c482==_0x4342ba[_0xb6baaa(0x1a2)]&&_0x1e672d[_0xb6baaa(0x167)](capitalize(_0x52cb5e['id']));});let _0x7fd443=[];return _0x1febf3['forEach'](_0x45b77a=>{const _0xd5b24a=_0x574e70;_0x45b77a=capitalize(_0x45b77a);if(!_0x1e672d[_0xd5b24a(0x220)](_0x45b77a))_0x7fd443[_0xd5b24a(0x167)](_0x45b77a);}),_0x1e672d;}function setStartDatePerformance(){const _0x4087c=_0x3015fe;if(config&&config[_0x4087c(0x1cf)][0x0][_0x4087c(0x208)][_0x4087c(0x1a2)]!=0x0){const _0x56efd2=config[_0x4087c(0x1cf)][0x0][_0x4087c(0x208)];dbPerformance['get'](_0x4087c(0x18d))[_0x4087c(0x1bb)]({'date':config[_0x4087c(0x1d8)]})['assign']({'coins':_0x56efd2})[_0x4087c(0xed)]();}}async function recreateCoinResults(){const _0x731a9d=_0x3015fe;let _0x52b50f,_0x3a4a51=[];try{const _0x281f42=fns[_0x731a9d(0x1b8)](fns['parseISO'](config[_0x731a9d(0x1d8)][_0x731a9d(0x140)](/\//g,'-')),_0x731a9d(0xe2));for(const _0x1c371e of currentCoins){if(_0x1c371e[_0x731a9d(0x230)]!=config[_0x731a9d(0x18b)]){let _0x2e4a27=0x0,_0x52cce9,_0x486fcf;_0x52b50f=await getAllEventOrders(_0x1c371e[_0x731a9d(0x202)]);if(_0x52b50f['length']>0x0)_0x52b50f[_0x731a9d(0xf5)](_0xf66884=>{const _0x51c65c=_0x731a9d,_0x30cee6=_0x1c371e['symbol']['includes'](config[_0x51c65c(0x18b)]+'/');_0x3a4a51['push']({'datetime':_0xf66884[_0x51c65c(0x11f)],'coin':_0x1c371e['coin'],'symbol':_0x1c371e[_0x51c65c(0x202)],'side':_0xf66884[_0x51c65c(0x196)],'reverse':_0x30cee6,'amount':formatResult(_0xf66884['filled'],0x8),'filled':formatResult(_0xf66884['filled'],0x8),'price':formatResult(_0xf66884['price'],0x8)}),_0x2e4a27=_0xf66884['side']=='buy'?_0x2e4a27+_0xf66884[_0x51c65c(0x12c)]:_0x2e4a27-_0xf66884[_0x51c65c(0x12c)];if(!_0x486fcf)_0x486fcf=_0xf66884[_0x51c65c(0x1b4)];});_0x52cce9=_0x1c371e[_0x731a9d(0x217)]-_0x2e4a27;let _0x59d4ef;config[_0x731a9d(0x1cf)]['forEach'](_0x4c1919=>{const _0x140e29=_0x731a9d;!_0x59d4ef&&(_0x59d4ef=_0x4c1919['changes'][_0x140e29(0x1bb)](_0x46cba6=>_0x46cba6[_0x140e29(0x230)]==_0x1c371e[_0x140e29(0x230)]),_0x59d4ef&&(_0x52cce9=_0x59d4ef[_0x140e29(0x217)],_0x486fcf=_0x59d4ef[_0x140e29(0x1b4)]));});let _0x20eff9=dbCoinResults['get'](_0x731a9d(0x21e))[_0x731a9d(0x1bb)]({'coin':_0x1c371e['coin']})[_0x731a9d(0x242)]();_0x20eff9={'coin':_0x1c371e[_0x731a9d(0x230)],'number':_0x52cce9,'breakeven':_0x486fcf,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x731a9d(0x21e))['find']({'coin':_0x1c371e[_0x731a9d(0x230)]})[_0x731a9d(0x1b1)](_0x20eff9)[_0x731a9d(0xed)]();}}_0x3a4a51['sort']((_0x35f58d,_0x284ea3)=>_0x35f58d[_0x731a9d(0x11f)]>_0x284ea3[_0x731a9d(0x11f)]?0x1:_0x284ea3[_0x731a9d(0x11f)]>_0x35f58d[_0x731a9d(0x11f)]?-0x1:0x0);let _0x27a1c8=0x0;for(let _0xc5e159 of _0x3a4a51){await updateCoinResults(_0xc5e159,!![]);}}catch(_0x5db3db){await handleError(_0x5db3db,'recreateCoinResults()');}}async function getAllEventOrders(_0x20ee96){const _0x5dccac=_0x3015fe;let _0x561f25=[],_0x2780f1=dbLogs[_0x5dccac(0x10a)](_0x5dccac(0x20d))['filter'](_0x42d7f8=>{const _0x33f3b8=_0x5dccac,_0x4b132e=_0x42d7f8[_0x33f3b8(0x1be)][_0x33f3b8(0x159)]();return _0x4b132e[_0x33f3b8(0x220)](_0x20ee96[_0x33f3b8(0x159)]())&&(_0x4b132e['includes'](_0x33f3b8(0x160))&&_0x4b132e[_0x33f3b8(0x220)](_0x33f3b8(0x1b0))||_0x4b132e[_0x33f3b8(0x220)](_0x33f3b8(0x12c))&&_0x4b132e[_0x33f3b8(0x220)](_0x33f3b8(0x1b0)));})[_0x5dccac(0x22f)](_0x5dccac(0x1c3))['value']();return _0x2780f1[_0x5dccac(0xf5)](_0xbf73c6=>{const _0x540c3c=_0x5dccac,_0x544824=_0xbf73c6[_0x540c3c(0x1be)][_0x540c3c(0x220)](_0x540c3c(0x1ae))?'sell':_0x540c3c(0x13f),_0x2383fb=/#([0-9]|\.)+\s/i,_0x302d7a=Number(_0x2383fb[_0x540c3c(0xf0)](_0xbf73c6[_0x540c3c(0x1be)])[0x0][_0x540c3c(0x11d)](0x1)),_0x1cbcd2=/@([0-9]|\.)+$/i,_0x43f01a=Number(_0x1cbcd2[_0x540c3c(0xf0)](_0xbf73c6[_0x540c3c(0x1be)])[0x0][_0x540c3c(0x11d)](0x1));_0x561f25[_0x540c3c(0x167)]({'datetime':_0xbf73c6[_0x540c3c(0x1c3)],'coin':symbolToCoin(_0x20ee96),'symbol':_0x20ee96,'side':_0x544824,'amount':_0x302d7a,'filled':_0x302d7a,'price':_0x43f01a});}),_0x561f25;}async function getAllOrders(_0x203f99,_0x4e40bf){const _0x5d6cc2=_0x3015fe;let _0x254faf=[];while(_0x4e40bf<exchange['milliseconds']()){const _0x3a82ec=0x1f4,_0x3b743f=await exchange['fetchClosedOrders'](_0x203f99,_0x4e40bf,_0x3a82ec);if(_0x3b743f[_0x5d6cc2(0x1a2)])_0x4e40bf=_0x3b743f[_0x3b743f[_0x5d6cc2(0x1a2)]-0x1][_0x5d6cc2(0x116)]+0x1,_0x254faf=_0x254faf[_0x5d6cc2(0x11a)](_0x3b743f);else break;}return _0x254faf;}async function validate24hChanges(){const _0xa78c6a=_0x3015fe;for(const _0x32bf0a of currentCoins){if(_0x32bf0a[_0xa78c6a(0x230)]!=config[_0xa78c6a(0x18b)]){let _0x1c863d;_0x32bf0a[_0xa78c6a(0x20b)]?_0x1c863d=formatResult((0x1/(global[_0xa78c6a(0x197)][noslash(_0x32bf0a['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1c863d=global['change'][noslash(_0x32bf0a['symbol'])],_0x1c863d<config[_0xa78c6a(0xd6)]&&(logHistory(_0xa78c6a(0x1b3),_0x32bf0a['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x1c863d+'%'),logHistory(_0xa78c6a(0x1b3),_0xa78c6a(0x117)),logHistory(_0xa78c6a(0x1b3),_0xa78c6a(0xfe)),await storeHeadless({'headless':![]}));}}}function _0x5958(_0x5617c9,_0xc5ec25){const _0x514907=_0x2646();return _0x5958=function(_0x13d5e1,_0x4f6dae){_0x13d5e1=_0x13d5e1-0xc7;let _0x2646bc=_0x514907[_0x13d5e1];return _0x2646bc;},_0x5958(_0x5617c9,_0xc5ec25);}function isOlderVersion(_0x3865a2,_0x3495cf){const _0x3433c6=_0x3015fe;if(!_0x3865a2)return!![];const _0x1fdfe0=_0x3495cf[_0x3433c6(0x107)]('.'),_0x34240a=_0x3865a2[_0x3433c6(0x107)]('.');for(var _0x4820e7=0x0;_0x4820e7<_0x34240a[_0x3433c6(0x1a2)];_0x4820e7++){const _0x4331ca=~~_0x34240a[_0x4820e7],_0x83ec15=~~_0x1fdfe0[_0x4820e7];if(_0x4331ca<_0x83ec15)return!![];if(_0x4331ca>_0x83ec15)return![];}return![];}async function oneTimeMigration(){const _0x559375=_0x3015fe;let _0x4437f5=dbLogs[_0x559375(0x10a)](_0x559375(0x251))['value']();if(isOlderVersion(_0x4437f5,_0x559375(0x149))){let _0x4f6fca=[];const _0x4418e2=dbLogs['get']('logs')[_0x559375(0x242)]();_0x4418e2[_0x559375(0xf5)](_0x3dce8e=>{const _0x54ba68=_0x559375;_0x4f6fca[_0x54ba68(0x167)]({'time':_0x3dce8e[_0x54ba68(0x1c3)],'type':_0x3dce8e[_0x54ba68(0x105)],'event':_0x3dce8e[_0x54ba68(0x1be)]});}),dbLogs[_0x559375(0x10a)]('logs')[_0x559375(0x1b1)](_0x4f6fca)['write']();}let _0x404f97=dbConfig['get']('version')[_0x559375(0x242)]();if(isOlderVersion(_0x404f97,_0x559375(0x149))){let _0x99d400=dbConfig[_0x559375(0x10a)](_0x559375(0xd4))[_0x559375(0x1bb)]({'botID':botID})[_0x559375(0x242)]();if(_0x99d400){let _0x3bcc9c=[];_0x99d400[_0x559375(0xd1)][_0x559375(0xf5)](_0x1c9f31=>{const _0x4413cc=_0x559375;_0x3bcc9c[_0x4413cc(0x167)]({'coin':_0x1c9f31['coin'],'number':_0x1c9f31['startnumber'],'price':_0x1c9f31[_0x4413cc(0x12a)]}),delete _0x1c9f31['startnumber'],delete _0x1c9f31[_0x4413cc(0x12a)];});if(_0x3bcc9c[_0x559375(0x1a2)]!==0x0)fs[_0x559375(0x23f)](configbackuppath+(_0x559375(0x1e4)+botID+_0x559375(0xfd)),JSON[_0x559375(0x16f)](_0x3bcc9c,null,0x4),function(_0x5aaf9d){if(_0x5aaf9d){}});const _0x51e076=(_0x2d9dcf,_0x2404da)=>{let _0x23cf40=[];_0x2404da['forEach'](_0x403858=>{const _0xb107db=_0x5958,_0x5ef8a7=_0x2d9dcf[_0xb107db(0x1bb)](_0x3b7139=>_0x3b7139['coin']==_0x403858['coin']);if(!_0x5ef8a7)_0x23cf40[_0xb107db(0x167)](_0x403858);});let _0x597d7c=[];return _0x2d9dcf['forEach'](_0x4a1e76=>{const _0x6ae99d=_0x5958,_0x3ff51b=_0x2404da['find'](_0x24529d=>_0x24529d[_0x6ae99d(0x230)]==_0x4a1e76[_0x6ae99d(0x230)]);if(!_0x3ff51b||_0x3ff51b[_0x6ae99d(0x217)]==0x0&&_0x4a1e76[_0x6ae99d(0x217)]!=0x0)_0x597d7c['push'](_0x4a1e76);}),{'missingDay1':_0x23cf40,'notInDay2':_0x597d7c};},_0x3f20a4=dbPerformance['get'](_0x559375(0x18d))[_0x559375(0x219)]()[_0x559375(0x242)]();if(_0x3f20a4[_0x559375(0x1a2)]>0x1){const {missingDay1:_0x228b03,notInDay2:_0xf2009f}=_0x51e076(_0x3bcc9c,_0x3f20a4[0x1][_0x559375(0x21e)]);_0x3bcc9c=[..._0x3bcc9c,..._0x228b03],_0xf2009f[_0x559375(0xf5)](_0x19c6fe=>{const _0x5ed775=_0x559375;let _0x26bba6=_0x3bcc9c[_0x5ed775(0xef)](_0x238ead=>_0x238ead[_0x5ed775(0x230)]==_0x19c6fe['coin']);_0x26bba6!=-0x1&&_0x3bcc9c[_0x5ed775(0x1b2)](_0x26bba6,0x1);});}_0x3bcc9c[_0x559375(0x1b6)]((_0x57e62b,_0x38d2ee)=>_0x57e62b[_0x559375(0x230)]>_0x38d2ee[_0x559375(0x230)]?0x1:_0x38d2ee[_0x559375(0x230)]>_0x57e62b[_0x559375(0x230)]?-0x1:0x0);let _0x521d31=[{'date':_0x99d400[_0x559375(0x1d8)],'changes':_0x3bcc9c}];_0x3f20a4[_0x559375(0x1a2)]>0x2&&_0x3f20a4[_0x559375(0xf5)]((_0x564a57,_0x332cc1)=>{const _0x1cd3a8=_0x559375;if(_0x332cc1>0x0&&_0x332cc1<_0x3f20a4[_0x1cd3a8(0x1a2)]-0x1){const {missingDay1:_0x596ea8,notInDay2:_0xb1e7c1}=_0x51e076(_0x3f20a4[_0x332cc1][_0x1cd3a8(0x21e)],_0x3f20a4[_0x332cc1+0x1][_0x1cd3a8(0x21e)]);_0x3bcc9c=[],(_0x596ea8['length']!=0x0||_0xb1e7c1[_0x1cd3a8(0x1a2)]!=0x0)&&(_0x596ea8[_0x1cd3a8(0x1a2)]!=0x0&&_0x3bcc9c[_0x1cd3a8(0x167)](..._0x596ea8),_0xb1e7c1[_0x1cd3a8(0x1a2)]!=0x0&&(_0xb1e7c1[_0x1cd3a8(0xf5)](_0x7763f=>{const _0x49d3be=_0x1cd3a8;_0x7763f[_0x49d3be(0x217)]=-_0x7763f['number'];}),_0x3bcc9c[_0x1cd3a8(0x167)](..._0xb1e7c1)),_0x3bcc9c['sort']((_0x50faff,_0xbe0402)=>_0x50faff['coin']>_0xbe0402[_0x1cd3a8(0x230)]?0x1:_0xbe0402['coin']>_0x50faff[_0x1cd3a8(0x230)]?-0x1:0x0),_0x521d31[_0x1cd3a8(0x167)]({'date':_0x3f20a4[_0x332cc1+0x1][_0x1cd3a8(0xc8)],'changes':_0x3bcc9c}));}}),dbConfig[_0x559375(0x10a)](_0x559375(0xd4))['find']({'botID':botID})[_0x559375(0x1b1)]({..._0x99d400,'liquidity':_0x521d31})[_0x559375(0xed)]();}}if(isOlderVersion(_0x404f97,_0x559375(0x1e7))){let _0x40153d=dbConfig[_0x559375(0x10a)](_0x559375(0xd4))['find']({'botID':botID})[_0x559375(0x242)]();if(_0x40153d){const _0x1bf0e6=_0x40153d[_0x559375(0x21a)],_0xb46f13=_0x1bf0e6?capitalize(_0x1bf0e6):_0x559375(0x206);dbConfig['get']('bot')[_0x559375(0x1bb)]({'botID':botID})[_0x559375(0x1b1)]({'exchange':_0xb46f13})[_0x559375(0xed)]();}}let _0x4d83f0=dbPerformance[_0x559375(0x10a)](_0x559375(0x251))[_0x559375(0x242)]();isOlderVersion(_0x4d83f0,_0x559375(0x149))&&setStartDatePerformance();let _0x401c41=dbCoinResults[_0x559375(0x10a)]('version')[_0x559375(0x242)]();if(isOlderVersion(_0x401c41,'2.5.0')){let _0x1229f3=dbCoinResults[_0x559375(0x10a)](_0x559375(0x21e))[_0x559375(0x242)]();if(_0x1229f3['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x55c07c=_0x3015fe;dbConfig[_0x55c07c(0x12e)](_0x55c07c(0x251),serverversion)[_0x55c07c(0xed)](),dbPerformance[_0x55c07c(0x12e)](_0x55c07c(0x251),serverversion)[_0x55c07c(0xed)](),dbLogs[_0x55c07c(0x12e)]('version',serverversion)[_0x55c07c(0xed)](),dbCoinResults['set'](_0x55c07c(0x251),serverversion)['write']();}function getConfiguration(_0x405575){const _0x113396=_0x3015fe;let _0x50bf90=dbConfig['get'](_0x113396(0xd4))[_0x113396(0x1bb)]({'botID':_0x405575})['value']();if(_0x50bf90){let _0x462bbd=![];typeof _0x50bf90[_0x113396(0x143)]=='string'&&(_0x50bf90={..._0x50bf90,'threshold':Number(_0x50bf90['threshold'])},_0x462bbd=!![]),_0x50bf90[_0x113396(0xd6)]==null&&(_0x50bf90={..._0x50bf90,'change24h':-0x14},_0x462bbd=!![]),!_0x50bf90[_0x113396(0xd2)]&&(_0x50bf90={..._0x50bf90,'fiat':_0x113396(0x1bd)},_0x462bbd=!![]),!_0x50bf90[_0x113396(0x171)]&&(_0x50bf90={..._0x50bf90,'onepagemode':settings[_0x113396(0x171)]},_0x462bbd=!![]),!_0x50bf90[_0x113396(0x125)]&&(_0x50bf90={..._0x50bf90,'colorscheme':_0x113396(0x23e)},_0x462bbd=!![]),!_0x50bf90[_0x113396(0x1ad)]&&(_0x50bf90={..._0x50bf90,'autoliquidity':!![]},_0x462bbd=!![]),_0x462bbd&&(_0x50bf90={'botID':_0x50bf90['botID'],'exchange':_0x50bf90[_0x113396(0x21a)],'apiKey':_0x50bf90[_0x113396(0x235)],'apiSecret':_0x50bf90[_0x113396(0x1c8)],'apiPassword':_0x50bf90['apiPassword'],'basecoin':_0x50bf90[_0x113396(0x18b)],'botname':_0x50bf90[_0x113396(0x112)],'showname':_0x50bf90['showname'],'threshold':_0x50bf90[_0x113396(0x143)],'ordertype':_0x50bf90['ordertype'],'timeout':_0x50bf90[_0x113396(0x252)],'fiat':_0x50bf90['fiat'],'startdate':_0x50bf90[_0x113396(0x1d8)],'recreate':_0x50bf90[_0x113396(0x15f)],'timeshift':_0x50bf90[_0x113396(0xf9)],'onepagemode':_0x50bf90[_0x113396(0x171)],'headless':_0x50bf90[_0x113396(0x10d)],'cooldown':_0x50bf90[_0x113396(0x1eb)],'change24h':_0x50bf90[_0x113396(0xd6)],'emojibuy':_0x50bf90['emojibuy'],'emojisell':_0x50bf90[_0x113396(0xd5)],'colorscheme':_0x50bf90[_0x113396(0x125)],'portfolio':_0x50bf90[_0x113396(0xd1)],'autoliquidity':_0x50bf90['autoliquidity'],'liquidity':_0x50bf90[_0x113396(0x1cf)],'openOrders':_0x50bf90[_0x113396(0x239)]},dbConfig['get'](_0x113396(0xd4))[_0x113396(0xe3)]()[_0x113396(0xed)](),dbConfig[_0x113396(0x10a)]('bot')[_0x113396(0x167)](_0x50bf90)[_0x113396(0xed)]());}else _0x50bf90={'botID':_0x405575,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x113396(0x179)+_0x405575,'showname':![],'threshold':0x3,'ordertype':_0x113396(0x160),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x113396(0xf9)],'onepagemode':settings[_0x113396(0x171)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x50bf90;}function emittedConfiguration(){const _0x28767c=_0x3015fe;let _0x2cba02;if(config[_0x28767c(0x235)]=='')_0x2cba02={...config,'configstate':'initial'};else config[_0x28767c(0x235)]==_0x28767c(0x224)?_0x2cba02={...config,'configstate':_0x28767c(0x244)}:(_0x2cba02={...config,'apiKey':_0x28767c(0x1de),'apiSecret':_0x28767c(0x1de)},config[_0x28767c(0x109)]&&(_0x2cba02[_0x28767c(0x109)]='************'));return _0x2cba02;}function getSettings(){const _0x39f6bf=_0x3015fe;return dbSettings[_0x39f6bf(0x10a)](_0x39f6bf(0x1c4))[_0x39f6bf(0x242)]();}function getSecure(){const _0x59a4b9=_0x3015fe;return dbSecure[_0x59a4b9(0x10a)](_0x59a4b9(0x16b))[_0x59a4b9(0x242)]()||{};}function updateTimeshift(_0x1d1b1b){const _0x420591=_0x3015fe;let _0x5d2e44=dbConfig['get'](_0x420591(0xd4))['find']({'botID':botID})['value']();_0x5d2e44&&dbConfig[_0x420591(0x10a)](_0x420591(0xd4))[_0x420591(0x1bb)]({'botID':botID})['assign']({'timeshift':_0x1d1b1b})[_0x420591(0xed)](),config[_0x420591(0xf9)]=_0x1d1b1b,proxyEmit(_0x420591(0x1da),emittedConfiguration());}function updateOnepagemode(_0x22844b){const _0x176dbc=_0x3015fe;let _0x2b65ac=dbConfig['get'](_0x176dbc(0xd4))['find']({'botID':botID})[_0x176dbc(0x242)]();_0x2b65ac&&dbConfig[_0x176dbc(0x10a)](_0x176dbc(0xd4))['find']({'botID':botID})[_0x176dbc(0x1b1)]({'onepagemode':_0x22844b})['write'](),config[_0x176dbc(0x171)]=_0x22844b,proxyEmit(_0x176dbc(0x1da),emittedConfiguration());}async function storeConfiguration(_0x5d1aa8){const _0x4ee60a=_0x3015fe;logger[_0x4ee60a(0x21c)](_0x4ee60a(0x1d9));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug']('Transaction\x20detection\x20blocked');let _0x28bcc5=[],_0x3844e1=![],_0x19bd92=![],_0x3e2a1a=[];_0x5d1aa8[_0x4ee60a(0xd1)][_0x4ee60a(0xf5)](_0x4ecb13=>{const _0x1f2883=_0x4ee60a;if(!_0x4ecb13['excluded']&&_0x4ecb13[_0x1f2883(0x230)]!=_0x5d1aa8['basecoin'])_0x3e2a1a[_0x1f2883(0x167)](_0x4ecb13[_0x1f2883(0x202)]);}),_0x3e2a1a[_0x4ee60a(0xf5)](_0x2e09bc=>{const _0x4f61f8=_0x4ee60a,_0x191a56=watchedSymbols[_0x4f61f8(0x220)](_0x2e09bc);!_0x191a56&&_0x28bcc5[_0x4f61f8(0x167)](_0x2e09bc);}),_0x3e2a1a[_0x4ee60a(0xf5)](_0x2ba230=>{const _0x5b0966=_0x4ee60a,_0x426916=currentCoins[_0x5b0966(0x1bb)](_0x1623fa=>_0x1623fa[_0x5b0966(0x202)]==_0x2ba230);!_0x426916&&(_0x3844e1=!![]);}),currentCoins[_0x4ee60a(0xf5)](_0x1ebe6a=>{const _0x9ca2c5=_0x4ee60a;if(_0x1ebe6a[_0x9ca2c5(0x230)]!=config[_0x9ca2c5(0x18b)]){const _0x3650cf=_0x3e2a1a[_0x9ca2c5(0x1bb)](_0x296607=>_0x296607==_0x1ebe6a[_0x9ca2c5(0x202)]);!_0x3650cf&&(_0x3844e1=!![]);}}),_0x5d1aa8[_0x4ee60a(0xd1)]['forEach'](_0x17c173=>{const _0x1d4f0b=_0x4ee60a,_0x3e8d03=config[_0x1d4f0b(0xd1)][_0x1d4f0b(0x1bb)](_0x490f26=>_0x490f26['coin']==_0x17c173[_0x1d4f0b(0x230)]);if(_0x3e8d03&&_0x17c173[_0x1d4f0b(0x209)]!=_0x3e8d03[_0x1d4f0b(0x209)])_0x19bd92=!![];});let _0x435027=dbConfig[_0x4ee60a(0x10a)](_0x4ee60a(0xd4))[_0x4ee60a(0x1bb)]({'botID':botID})[_0x4ee60a(0x242)]();_0x5d1aa8={..._0x5d1aa8,'apiKey':crypt[_0x4ee60a(0x1d4)](secure[_0x4ee60a(0x199)],_0x5d1aa8[_0x4ee60a(0x235)])[_0x4ee60a(0x21b)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x5d1aa8[_0x4ee60a(0x1c8)])[_0x4ee60a(0x21b)]};_0x5d1aa8['apiPassword']&&(_0x5d1aa8[_0x4ee60a(0x109)]=crypt[_0x4ee60a(0x1d4)](secure[_0x4ee60a(0x199)],_0x5d1aa8['apiPassword'])[_0x4ee60a(0x21b)]);let _0x5b3733=![];if(_0x435027){_0x5d1aa8[_0x4ee60a(0x235)]=='************'?_0x5d1aa8[_0x4ee60a(0x235)]=config['apiKey']:_0x5b3733=!![];_0x5d1aa8[_0x4ee60a(0x1c8)]==_0x4ee60a(0x1de)?_0x5d1aa8[_0x4ee60a(0x1c8)]=config['apiSecret']:_0x5b3733=!![];if(_0x5d1aa8['apiPassword']==_0x4ee60a(0x1de))_0x5d1aa8[_0x4ee60a(0x109)]=config[_0x4ee60a(0x109)];else{if(_0x5d1aa8[_0x4ee60a(0x109)])_0x5b3733=!![];}dbConfig[_0x4ee60a(0x10a)](_0x4ee60a(0xd4))[_0x4ee60a(0x1bb)]({'botID':botID})[_0x4ee60a(0x1b1)](_0x5d1aa8)[_0x4ee60a(0xed)]();}else dbConfig[_0x4ee60a(0x10a)]('bot')['push'](_0x5d1aa8)[_0x4ee60a(0xed)](),_0x5b3733=!![],process[_0x4ee60a(0x17e)]({'status':_0x4ee60a(0x207),'live':_0x4ee60a(0x11c)},_0x54c174=>{});process['send']({'botname':_0x5d1aa8[_0x4ee60a(0x112)]},_0x2333e5=>{}),updateBotManager(),config={..._0x5d1aa8},proxyEmit(_0x4ee60a(0x1c7)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5b3733)await reset(_0x28bcc5,!![]);else _0x3844e1||_0x19bd92?await reset(_0x28bcc5,![]):getBalances();blockTransactionDetection=![],logger[_0x4ee60a(0x21c)](_0x4ee60a(0x137));}async function storeHeadless(_0x59f7d9){const _0x280164=_0x3015fe,_0x499643={...config,'headless':_0x59f7d9[_0x280164(0x10d)]};let _0x1d6b2a=dbConfig[_0x280164(0x10a)](_0x280164(0xd4))[_0x280164(0x1bb)]({'botID':botID})[_0x280164(0x242)]();_0x1d6b2a&&dbConfig[_0x280164(0x10a)](_0x280164(0xd4))[_0x280164(0x1bb)]({'botID':botID})[_0x280164(0x1b1)](_0x499643)[_0x280164(0xed)](),config={..._0x499643},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x431b9e){const _0x2d1b88=_0x3015fe,_0x228e8f={...config,'fiat':_0x431b9e};let _0x440d75=dbConfig[_0x2d1b88(0x10a)]('bot')[_0x2d1b88(0x1bb)]({'botID':botID})['value']();_0x440d75&&dbConfig[_0x2d1b88(0x10a)](_0x2d1b88(0xd4))[_0x2d1b88(0x1bb)]({'botID':botID})[_0x2d1b88(0x1b1)](_0x228e8f)[_0x2d1b88(0xed)](),config={..._0x228e8f},proxyEmit(_0x2d1b88(0x1da),emittedConfiguration());}function resetHistory(){const _0x11095a=_0x3015fe;logger[_0x11095a(0x138)](_0x11095a(0x162));try{if(fs[_0x11095a(0xfa)](path['join'](configpath,_0x11095a(0x15d)+botID+_0x11095a(0xda))))fs[_0x11095a(0xe5)](path[_0x11095a(0x1ce)](configpath,_0x11095a(0x15d)+botID+_0x11095a(0xda)));if(fs[_0x11095a(0xfa)](path[_0x11095a(0x1ce)](configpath,_0x11095a(0x15d)+botID+'-performance.json')))fs[_0x11095a(0xe5)](path['join'](configpath,_0x11095a(0x15d)+botID+'-performance.json'));if(fs[_0x11095a(0xfa)](path[_0x11095a(0x1ce)](configpath,_0x11095a(0x15d)+botID+_0x11095a(0x15e))))fs[_0x11095a(0xe5)](path[_0x11095a(0x1ce)](configpath,'bot-'+botID+_0x11095a(0x15e)));}catch(_0x32f67c){if(_0x32f67c)logger['full']('Error\x20while\x20deleting\x20files:\x20',_0x32f67c);}const _0x1ed9eb=getDate();let _0x25e7ad=[];currentCoins['forEach'](_0x2563f0=>{const _0xa53faf=_0x11095a;_0x25e7ad[_0xa53faf(0x167)]({'coin':_0x2563f0['coin'],'number':_0x2563f0[_0xa53faf(0x217)],'price':_0x2563f0[_0xa53faf(0xc7)]});});let _0x4fbd28=dbConfig[_0x11095a(0x10a)]('bot')[_0x11095a(0x1bb)]({'botID':botID})[_0x11095a(0x242)]();_0x4fbd28&&(dbConfig[_0x11095a(0x10a)](_0x11095a(0xd4))[_0x11095a(0x1bb)]({'botID':botID})[_0x11095a(0x1b1)]({'liquidity':[{'date':_0x1ed9eb,'changes':_0x25e7ad}]})[_0x11095a(0xed)](),config[_0x11095a(0x1cf)]=[]),process['send']({'stop':_0x11095a(0x110)},_0x51673e=>{});}function noslash(_0x576e86){return _0x576e86['replace']('/','');}function updateHighestFee(_0x1d3e62){const _0x4f913d=_0x3015fe;if(_0x1d3e62[_0x4f913d(0x20b)]){let _0x460d4d={'filled':_0x1d3e62[_0x4f913d(0x12c)]*_0x1d3e62[_0x4f913d(0x1b4)],'amount':_0x1d3e62[_0x4f913d(0x12c)]*_0x1d3e62['price'],'side':_0x1d3e62['side']==_0x4f913d(0x1ae)?_0x4f913d(0x13f):_0x4f913d(0x1ae),'price':0x1/_0x1d3e62[_0x4f913d(0x1b4)]};_0x1d3e62={..._0x1d3e62,..._0x460d4d};}const _0x2ed627=defaultFee*_0x1d3e62[_0x4f913d(0x12c)]*_0x1d3e62[_0x4f913d(0x1b4)];lastFees[_0x4f913d(0x106)][_0x4f913d(0x1a2)]===0x14&&lastFees[_0x4f913d(0x106)]['shift'](),lastFees[_0x4f913d(0x106)][_0x4f913d(0x167)](_0x2ed627),lastFees[_0x4f913d(0x156)]=Math[_0x4f913d(0x1fa)](...lastFees[_0x4f913d(0x106)]);}async function updateNumberCoinsCcxt(_0x571e7d){const _0x3160a1=_0x3015fe;logger[_0x3160a1(0x21c)](_0x3160a1(0x122)+_0x571e7d[_0x3160a1(0x202)]+'\x20|\x20'+_0x571e7d['status']+_0x3160a1(0x189)+_0x571e7d['id']);let _0x4a90df=_0x571e7d[_0x3160a1(0x1dd)],_0x313f2f=![];currentCoins[_0x3160a1(0xf5)](_0x3cc5f7=>{const _0x385a47=_0x3160a1;_0x3cc5f7[_0x385a47(0x202)]==_0x571e7d['symbol']&&(_0x313f2f=!![]);});if(!_0x313f2f)return;const _0x257e8b=currentCoins[_0x3160a1(0x1bb)](_0x1fe055=>_0x1fe055[_0x3160a1(0x202)]==_0x571e7d['symbol']),_0x51b5eb=_0x15ea9e=>{if(_0x257e8b)_0x257e8b['orderstatus']=_0x15ea9e;};if(_0x4a90df==_0x3160a1(0x17c))_0x51b5eb('open');else{if(_0x4a90df=='canceled'){_0x51b5eb(_0x3160a1(0x165));const _0x120a3f=await getCoins();[currentCoins,currentCoinsAll]=_0x120a3f,await getOpenOrders(),handleOpenOrders();}else{if(_0x4a90df=='closed'){logger[_0x3160a1(0x21c)](_0x3160a1(0x14e)+_0x571e7d[_0x3160a1(0x202)]+_0x3160a1(0x189)+_0x571e7d[_0x3160a1(0x12c)]+_0x3160a1(0x189)+_0x571e7d['id']);let _0x22b4a4=![];if(lastOrders)for(const _0x12b815 of lastOrders){const _0x3398dc=0xc8,_0x2f5c92=0x1388;let _0x296bfa=0x0;while(!_0x12b815['orderId']&&_0x296bfa*_0x3398dc<_0x2f5c92){_0x296bfa++,await sleep(_0x3398dc);}if(_0x296bfa>0x0)logger[_0x3160a1(0x21c)](_0x3160a1(0x233)+_0x296bfa*_0x3398dc/0x3e8+_0x3160a1(0xcf));if(_0x12b815[_0x3160a1(0xca)]==_0x571e7d['id']){logger[_0x3160a1(0x21c)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x571e7d['id']),_0x22b4a4=!![];if(_0x12b815['filled']==0x0){logger[_0x3160a1(0x21c)](_0x3160a1(0x1f3)+_0x571e7d['id']);if(_0x571e7d[_0x3160a1(0x245)])_0x12b815[_0x3160a1(0x1b4)]=_0x571e7d[_0x3160a1(0x245)];else{if(_0x571e7d[_0x3160a1(0x1b4)])_0x12b815[_0x3160a1(0x1b4)]=_0x571e7d[_0x3160a1(0x1b4)];else{}}_0x12b815[_0x3160a1(0x12c)]=_0x571e7d[_0x3160a1(0x12c)],updateHighestFee(_0x12b815),_0x51b5eb(_0x3160a1(0x12c)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x6d5d6c=await getCoins();[currentCoins,currentCoinsAll]=_0x6d5d6c;}_0x12b815[_0x3160a1(0x11e)]={'currency':_0x571e7d['fee']?_0x571e7d[_0x3160a1(0x11e)][_0x3160a1(0x151)]:null,'cost':_0x571e7d[_0x3160a1(0x11e)]?_0x571e7d[_0x3160a1(0x11e)][_0x3160a1(0xea)]:0x0},await updateCoinResults(_0x12b815);}}}if(!_0x22b4a4){logger['debug']('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x571e7d['id']),_0x51b5eb('filled');const _0x571c40=await getCoins();[currentCoins,currentCoinsAll]=_0x571c40,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1a06ad=JSON[_0x3160a1(0x19d)](lastBalances[_0x3160a1(0xd1)]);const _0xfe2c61=_0x1a06ad[_0x3160a1(0x1bb)](_0x48b58b=>_0x48b58b[_0x3160a1(0x202)]==_0x571e7d[_0x3160a1(0x202)]);if(_0xfe2c61){if(_0x4a90df==_0x3160a1(0x17c))_0xfe2c61[_0x3160a1(0x139)]=_0xfe2c61['orderstatus']==_0x3160a1(0x12c)?_0x3160a1(0x12c):'open';else{if(_0x4a90df==_0x3160a1(0x165))_0xfe2c61[_0x3160a1(0x139)]=_0xfe2c61[_0x3160a1(0x139)]==_0x3160a1(0x12c)?_0x3160a1(0x12c):'canceled';else _0x4a90df==_0x3160a1(0x1fe)&&(_0xfe2c61[_0x3160a1(0x139)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x1a06ad)},proxyEmit(_0x3160a1(0x18e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3fd4a3=_0x3015fe;await getOpenOrders();let _0x572756=![];currentCoins[_0x3fd4a3(0xf5)](_0x1bf667=>{const _0x243825=_0x3fd4a3;_0x572756=allOpenOrders['find'](_0x1c78bb=>_0x1c78bb['symbol']==_0x1bf667['symbol']),_0x1bf667[_0x243825(0x139)]=_0x572756?_0x243825(0x17c):_0x243825(0x1ea);});}async function getCoins(_0x445952=!![],_0x56ed2c=config[_0x3015fe(0x18b)]){const _0x4974b3=_0x3015fe;let _0x53e1c7,_0x1cf06b=[],_0x50fcc6=[],_0x326276=[],_0x257160=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x53e1c7=await exchange[_0x4974b3(0xd0)](),mybalances=_0x53e1c7[_0x4974b3(0xdc)];for(const [_0x3dbace,_0xb1ce1f]of Object['entries'](mybalances)){_0x257160[_0x4974b3(0x167)](_0x3dbace);}if(_0x56ed2c=='')for(const [_0x39f425,_0x192811]of Object[_0x4974b3(0x247)](mybalances)){_0x192811!=0x0&&_0x50fcc6[_0x4974b3(0x167)]({'coin':_0x39f425});}else{let _0x155d12=![];for(const [_0xf109f5,_0x43d924]of Object[_0x4974b3(0x247)](mybalances)){if(_0x257160[_0x4974b3(0x220)](_0xf109f5)){const _0x1777f6=config[_0x4974b3(0xd1)]['find'](_0x49e8ac=>_0x49e8ac[_0x4974b3(0x230)]==_0xf109f5),_0x328b11=_0xf109f5+'/'+_0x56ed2c,_0x1cb452=_0x56ed2c+'/'+_0xf109f5,_0x19efca=currentCoins[_0x4974b3(0x1bb)](_0x2209e2=>_0x2209e2[_0x4974b3(0x230)]==_0xf109f5);_0x155d12=![];if((_0x43d924!=0x0||_0x1777f6)&&(allSymbols[_0x4974b3(0x220)](_0x328b11)||_0xf109f5==_0x56ed2c))_0xf109f5!=_0x56ed2c&&_0x1cf06b[_0x4974b3(0x167)](_0x328b11),_0x50fcc6['push']({'coin':_0xf109f5,'symbol':_0x328b11,'reverse':![],'number':Math[_0x4974b3(0x1fa)](_0x43d924+(_0x1777f6&&_0x1777f6[_0x4974b3(0x209)]||0x0),0x0),'orderstatus':_0x19efca?_0x19efca['orderstatus']:_0x4974b3(0x1ea)});else(_0x43d924!=0x0||_0x1777f6)&&allSymbols['includes'](_0x1cb452)&&(_0xf109f5!=_0x56ed2c&&_0x1cf06b[_0x4974b3(0x167)](_0x1cb452),_0x50fcc6[_0x4974b3(0x167)]({'coin':_0xf109f5,'symbol':_0x1cb452,'reverse':!![],'number':Math[_0x4974b3(0x1fa)](_0x43d924+(_0x1777f6&&_0x1777f6[_0x4974b3(0x209)]||0x0),0x0),'orderstatus':_0x19efca?_0x19efca[_0x4974b3(0x139)]:_0x4974b3(0x1ea)}));}}}}catch(_0x303475){if(!_0x445952)handleErrorNoStop(_0x303475,_0x4974b3(0x115));else await handleError(_0x303475,'getCoins()');}return _0x326276=cloneDeep(_0x50fcc6),_0x50fcc6=_0x50fcc6['filter'](_0x35f478=>{const _0x2814e9=_0x4974b3,_0x194539=config['portfolio'][_0x2814e9(0x1bb)](_0x152ce7=>_0x152ce7[_0x2814e9(0x230)]==_0x35f478[_0x2814e9(0x230)]);return _0x194539&&!_0x194539[_0x2814e9(0x1f2)];}),[_0x50fcc6,_0x326276];}async function getCoinNumber(_0x38f6e5){const _0x53fb6d=_0x3015fe;let _0x1584c1;try{const _0x35099e=await exchange['fetchBalance']();_0x1584c1=_0x35099e[_0x53fb6d(0xdc)][_0x38f6e5];}catch(_0x3ed0c4){await handleError(_0x3ed0c4,_0x53fb6d(0xd7));}return _0x1584c1;}async function getOpenOrders(){const _0x9c619f=_0x3015fe;let _0x3ee923;allOpenOrders=[];try{for(const _0x3e3c7c of config[_0x9c619f(0xd1)]){!_0x3e3c7c[_0x9c619f(0x1f2)]&&_0x3e3c7c[_0x9c619f(0x230)]!=config['basecoin']&&(_0x3ee923=await exchange[_0x9c619f(0x24a)](_0x3e3c7c[_0x9c619f(0x202)]),_0x3ee923[_0x9c619f(0x1a2)]>0x0&&allOpenOrders[_0x9c619f(0x167)](_0x3ee923[0x0]));}}catch(_0x3c168c){await handleError(_0x3c168c,_0x9c619f(0x132));}}async function handleOpenOrders(_0x4237d6=0x0){const _0x224171=_0x3015fe;allOpenOrders[_0x224171(0x1a2)]==0x0&&lockOrders==ORDERS[_0x224171(0x15b)]&&allOrdersPlaced&&(_0x4237d6==0x0?(logger[_0x224171(0x21c)](_0x224171(0xde)),_0x4237d6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x224171(0x241)),validateOrders(_0x224171(0x144))));}async function testAPI(_0x1c1da1){const _0x57b23d=_0x3015fe,_0x3d9443=ccxt[_0x1c1da1[_0x57b23d(0x21a)][_0x57b23d(0x159)]()],_0x29b88f=new _0x3d9443({'apiKey':_0x1c1da1[_0x57b23d(0x235)],'secret':_0x1c1da1[_0x57b23d(0x1c8)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x57b23d(0xdf)}});if(_0x1c1da1[_0x57b23d(0x109)])_0x29b88f['password']=_0x1c1da1[_0x57b23d(0x109)];try{await _0x29b88f['loadMarkets']();}catch(_0x52839e){throw _0x52839e;}}function cloneDeep(_0x422ad3){const _0x2e4c5e=_0x3015fe;return JSON['parse'](JSON[_0x2e4c5e(0x16f)](_0x422ad3));}async function getPortfolio(_0x2015a9){const _0xd60e22=_0x3015fe;let _0x44323d=[],_0x1ccab0=[],_0x148f85=[],_0x29c0e2;if(_0x2015a9[_0xd60e22(0x235)]!==_0xd60e22(0x1de)||_0x2015a9[_0xd60e22(0x1c8)]!=='************'||_0x2015a9[_0xd60e22(0x109)]&&_0x2015a9[_0xd60e22(0x109)]!==_0xd60e22(0x1de)){if(config[_0xd60e22(0x21a)]){if(_0x2015a9[_0xd60e22(0x235)]==_0xd60e22(0x1de))_0x2015a9[_0xd60e22(0x235)]=config['apiKey'];if(_0x2015a9[_0xd60e22(0x1c8)]=='************')_0x2015a9[_0xd60e22(0x1c8)]=config[_0xd60e22(0x1c8)];if(_0x2015a9[_0xd60e22(0x109)]==_0xd60e22(0x1de))_0x2015a9[_0xd60e22(0x109)]=config[_0xd60e22(0x109)];try{await testAPI(_0x2015a9);}catch(_0x54dd08){if(_0x54dd08['toString']()[_0xd60e22(0x220)](_0xd60e22(0x1a4))){logger['debug'](_0xd60e22(0x1ed)),proxyEmit(_0xd60e22(0xd1),![]);return;}else{handleError(_0x54dd08,_0xd60e22(0x148));return;}}}await initExchange(_0x2015a9['exchange'],_0x2015a9[_0xd60e22(0x235)],_0x2015a9[_0xd60e22(0x1c8)],_0x2015a9[_0xd60e22(0x109)]);try{await loadSymbols(_0x2015a9[_0xd60e22(0x21a)],!![]);}catch(_0x4df314){if(_0x4df314[_0xd60e22(0x1d3)]()[_0xd60e22(0x220)](_0xd60e22(0x1a4))){proxyEmit(_0xd60e22(0xd1),![]);return;}else{handleError(_0x4df314,'getPortfolio(1)');return;}}const _0x159485=await getCoins(![],_0x2015a9['basecoin']);_0x148f85=cloneDeep(_0x159485[0x1]);}else _0x148f85=cloneDeep(currentCoinsAll);if(_0x2015a9[_0xd60e22(0x18b)]=='')proxyEmit(_0xd60e22(0xd1),_0x148f85);else{_0x148f85[_0xd60e22(0xf5)](_0xe96fb7=>{const _0x670ca0=_0xd60e22;if(_0xe96fb7['coin']!=_0x2015a9[_0x670ca0(0x18b)])_0x44323d[_0x670ca0(0x167)](_0xe96fb7['symbol']);});try{_0x1ccab0=await exchange[_0xd60e22(0x194)](_0x44323d);}catch(_0x312fd1){if(_0x312fd1['toString']()[_0xd60e22(0x220)](_0xd60e22(0x1a4))){proxyEmit(_0xd60e22(0xd1),![]);return;}else{handleError(_0x312fd1,'getPortfolio(2)');return;}}_0x148f85[_0xd60e22(0xf5)](_0x36db36=>{const _0x1e8701=_0xd60e22;_0x36db36[_0x1e8701(0x230)]!=_0x2015a9['basecoin']?_0x29c0e2=_0x36db36[_0x1e8701(0x20b)]?0x1/_0x1ccab0[_0x36db36[_0x1e8701(0x202)]][_0x1e8701(0xc7)]:_0x1ccab0[_0x36db36[_0x1e8701(0x202)]]['last']:_0x29c0e2=0x1,_0x36db36['price']=formatResult(_0x29c0e2,0x8);}),proxyEmit(_0xd60e22(0xd1),_0x148f85);}}function truncateTradeAmount(_0x4360d9,_0x968f8d){const _0x4f62bc=_0x3015fe;let _0x121cd8=0x0;try{_0x121cd8=exchange[_0x4f62bc(0x174)](_0x4360d9,_0x968f8d);}catch(_0xe7b412){}return _0x121cd8;}function checkMinimums(_0x17a184){const _0x296e9c=_0x3015fe;let _0x3fb415=!![];const _0x56c104=!_0x17a184[_0x296e9c(0x20b)]?markets[_0x17a184['symbol']]['limits']['amount']['min']:markets[_0x17a184[_0x296e9c(0x202)]][_0x296e9c(0x1ca)][_0x296e9c(0xea)]['min'],_0x27bea8=!_0x17a184['reverse']?markets[_0x17a184[_0x296e9c(0x202)]]['limits'][_0x296e9c(0xea)][_0x296e9c(0x188)]:markets[_0x17a184[_0x296e9c(0x202)]][_0x296e9c(0x1ca)]['amount']['min'],_0x33456a=truncateTradeAmount(_0x17a184[_0x296e9c(0x202)],_0x17a184[_0x296e9c(0x1c9)]);_0x17a184[_0x296e9c(0x1c9)]=_0x33456a;if(Math['abs'](_0x33456a)<_0x56c104)_0x3fb415=![];if(Math[_0x296e9c(0x1f0)](_0x33456a)*_0x17a184[_0x296e9c(0xc7)]<_0x27bea8)_0x3fb415=![];if(_0x17a184['side']==_0x296e9c(0x1ae)){let _0x2264c4=config[_0x296e9c(0xd1)][_0x296e9c(0x1bb)](_0x5788d4=>_0x5788d4['coin']==_0x17a184['coin']);if(_0x2264c4[_0x296e9c(0x209)]>0x0){if(Math['abs'](_0x33456a)>_0x17a184[_0x296e9c(0x217)]-_0x2264c4['offset'])_0x3fb415=![];}else{if(Math[_0x296e9c(0x1f0)](_0x33456a)>_0x17a184[_0x296e9c(0x217)])_0x3fb415=![];}}if(_0x17a184[_0x296e9c(0x196)]==_0x296e9c(0x13f)){let _0x67535f=config[_0x296e9c(0xd1)][_0x296e9c(0x1bb)](_0x292bb0=>_0x292bb0[_0x296e9c(0x230)]==config[_0x296e9c(0x18b)]),_0x4f4a06=currentCoins[_0x296e9c(0x1bb)](_0x4834bc=>_0x4834bc['coin']==config[_0x296e9c(0x18b)]);if(_0x67535f[_0x296e9c(0x209)]>0x0){if(Math['abs'](_0x33456a)*_0x17a184[_0x296e9c(0xc7)]>_0x4f4a06[_0x296e9c(0x217)]-_0x67535f[_0x296e9c(0x209)])_0x3fb415=![];}else{if(Math[_0x296e9c(0x1f0)](_0x33456a)*_0x17a184[_0x296e9c(0xc7)]>_0x4f4a06['number'])_0x3fb415=![];}}return _0x3fb415;}async function getBalances(_0x58065f=!![]){const _0x1cfbd0=_0x3015fe;let _0x16618e=0x0,_0x5a666e;const _0x560c27=config['threshold'];if(config[_0x1cfbd0(0x10d)]&&config[_0x1cfbd0(0xd6)]<0x0)await validate24hChanges();currentCoins[_0x1cfbd0(0xf5)](_0x5bf58d=>{const _0x417ef0=_0x1cfbd0;if(_0x5bf58d[_0x417ef0(0x230)]!=config[_0x417ef0(0x18b)]){let _0x2bfa60=global[_0x417ef0(0x186)][noslash(_0x5bf58d[_0x417ef0(0x202)])];_0x5a666e=_0x5bf58d['reverse']?0x1/_0x2bfa60:_0x2bfa60;}else _0x5a666e=0x1;let _0x9a5d58=_0x5bf58d[_0x417ef0(0x217)]*_0x5a666e;_0x16618e+=_0x9a5d58,_0x5bf58d['last']=formatResult(Number(_0x5a666e),0x8),_0x5bf58d[_0x417ef0(0x242)]=_0x9a5d58;}),currentCoins['forEach'](_0x3a346c=>{const _0x17d372=_0x1cfbd0;let _0x1fd08c=config[_0x17d372(0xd1)][_0x17d372(0x1bb)](_0x19dcaa=>_0x19dcaa['coin']==_0x3a346c[_0x17d372(0x230)]),_0x4230d5=Number(_0x1fd08c[_0x17d372(0x133)]),_0x37a6a1=_0x3a346c[_0x17d372(0x242)]/_0x16618e*0x64,_0x3b7929=_0x4230d5*_0x16618e/0x64/_0x3a346c[_0x17d372(0xc7)]-_0x3a346c[_0x17d372(0x217)];_0x3a346c[_0x17d372(0x133)]=formatResult(_0x37a6a1,0x3),_0x3a346c['target']=formatResult(_0x4230d5,0x3),_0x3a346c[_0x17d372(0x1c9)]=formatResult(_0x3b7929,0x8),_0x3a346c[_0x17d372(0x196)]='',_0x3a346c[_0x17d372(0x13d)]=![];if(_0x3a346c[_0x17d372(0x230)]!=config[_0x17d372(0x18b)]){if(_0x3a346c['distribution']>_0x4230d5)_0x3a346c['side']='sell',_0x3a346c[_0x17d372(0x13d)]=checkMinimums(_0x3a346c);else _0x3a346c[_0x17d372(0x133)]<_0x4230d5&&(_0x3a346c[_0x17d372(0x196)]='buy',_0x3a346c['valid']=checkMinimums(_0x3a346c));}_0x3a346c['delta']=_0x3a346c[_0x17d372(0x133)]/_0x3a346c[_0x17d372(0xcb)]-0x1;if(_0x3a346c[_0x17d372(0x139)]==_0x17d372(0x12c)||_0x3a346c[_0x17d372(0x139)]==_0x17d372(0x165))_0x3a346c['orderstatus']=_0x17d372(0x1ea);}),currentCoins[_0x1cfbd0(0x1b6)]((_0x3246ff,_0xf9e572)=>_0x3246ff['delta']<_0xf9e572['delta']?0x1:_0xf9e572[_0x1cfbd0(0x121)]<_0x3246ff[_0x1cfbd0(0x121)]?-0x1:0x0);const _0x3a7918=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a7918[_0x1cfbd0(0x24d)],'usd':_0x3a7918[_0x1cfbd0(0x23b)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x560c27},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x58065f){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x560c27});else{if(lockOrders==ORDERS[_0x1cfbd0(0x215)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x560c27});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x9d9308=getNormalizedPerformance();getStartingBalances(_0x9d9308),emitPerformance(_0x9d9308);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x46b655=getNormalizedPerformance();emitPerformance(_0x46b655),getStartingBalances(_0x46b655),logger[_0x1cfbd0(0x21c)](_0x1cfbd0(0x103));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1ba07a=_0x3015fe;if(!lastBalances)return;let _0x350f21=[],_0x1092e0,_0x32377f=JSON[_0x1ba07a(0x19d)](lastBalances['portfolio']);_0x32377f[_0x1ba07a(0x1b6)]((_0xd4aa52,_0x2b321b)=>_0xd4aa52['coin']>_0x2b321b[_0x1ba07a(0x230)]?0x1:_0x2b321b[_0x1ba07a(0x230)]>_0xd4aa52['coin']?-0x1:0x0),_0x32377f[_0x1ba07a(0xf5)](_0x3e1181=>{const _0x3bcb1f=_0x1ba07a;let _0x59b63e={'coin':_0x3e1181[_0x3bcb1f(0x230)],'number':_0x3e1181['number'],'price':_0x3e1181[_0x3bcb1f(0xc7)]};_0x350f21[_0x3bcb1f(0x167)](_0x59b63e);});const _0x8bff26=await getFiat();_0x1092e0={'date':lastBalances[_0x1ba07a(0x1c3)]['split']('\x20')[0x0],'eur':_0x8bff26[_0x1ba07a(0x24d)],'usd':_0x8bff26[_0x1ba07a(0x23b)],'coins':_0x350f21};let _0x289e6a=dbPerformance[_0x1ba07a(0x10a)](_0x1ba07a(0x18d))[_0x1ba07a(0x1bb)]({'date':_0x1092e0[_0x1ba07a(0xc8)]})[_0x1ba07a(0x242)]();_0x289e6a?_0x1092e0[_0x1ba07a(0xc8)]!=config[_0x1ba07a(0x1d8)]&&dbPerformance['get']('data')[_0x1ba07a(0x1bb)]({'date':_0x1092e0[_0x1ba07a(0xc8)]})[_0x1ba07a(0x1b1)](_0x1092e0)[_0x1ba07a(0xed)]():dbPerformance[_0x1ba07a(0x10a)](_0x1ba07a(0x18d))[_0x1ba07a(0x167)](_0x1092e0)[_0x1ba07a(0xed)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5aa94d=_0x3015fe;let _0x56d952=[];if(dbPerformance['has'](_0x5aa94d(0x18d))[_0x5aa94d(0x242)]()){let _0x2eea60=dbPerformance[_0x5aa94d(0x10a)](_0x5aa94d(0x18d))[_0x5aa94d(0x219)]()['filter'](_0xc4e752=>{const _0x1529ec=_0x5aa94d;if(_0xc4e752[_0x1529ec(0x21e)][_0x1529ec(0x1a2)]==0x0)return![];else return!![];})[_0x5aa94d(0x22f)](_0x5aa94d(0xc8))[_0x5aa94d(0x242)](),_0x139df4=[...config[_0x5aa94d(0x1cf)]];_0x139df4[_0x5aa94d(0x1b6)]((_0x5f0a18,_0x1e447b)=>_0x5f0a18[_0x5aa94d(0xc8)]>_0x1e447b[_0x5aa94d(0xc8)]?-0x1:_0x1e447b[_0x5aa94d(0xc8)]>_0x5f0a18[_0x5aa94d(0xc8)]?0x1:0x0);let _0x1a027c=0x1,_0x268ad5=[],_0x7710bd=0x0;_0x2eea60[_0x5aa94d(0x11d)]()['reverse']()[_0x5aa94d(0xf5)]((_0x189028,_0x2b94c9)=>{const _0x460aa4=_0x5aa94d;if(_0x139df4[_0x7710bd]){if(_0x2eea60[_0x2eea60[_0x460aa4(0x1a2)]-_0x2b94c9]&&_0x139df4[_0x7710bd]['date']==_0x2eea60[_0x2eea60[_0x460aa4(0x1a2)]-_0x2b94c9][_0x460aa4(0xc8)]){if(_0x2b94c9<_0x2eea60[_0x460aa4(0x1a2)]){let _0x305c51=0x0,_0x407eb4=0x0;_0x2eea60[_0x2eea60[_0x460aa4(0x1a2)]-_0x2b94c9][_0x460aa4(0x21e)]['forEach'](_0x443ffa=>{const _0x52f6eb=_0x460aa4;_0x407eb4+=_0x443ffa[_0x52f6eb(0x217)]*_0x443ffa[_0x52f6eb(0x1b4)];}),_0x139df4[_0x7710bd][_0x460aa4(0x208)][_0x460aa4(0xf5)](_0x114ee0=>{const _0x2f1663=_0x460aa4;_0x305c51+=_0x114ee0[_0x2f1663(0x217)]*_0x114ee0['price'];}),_0x1a027c*=_0x305c51/(_0x407eb4-_0x305c51)+0x1;}_0x7710bd++;}}let _0x52c8b5=0x0;_0x189028[_0x460aa4(0x21e)][_0x460aa4(0xf5)](_0x120d8b=>{const _0x4aba5e=_0x460aa4;_0x52c8b5+=_0x120d8b[_0x4aba5e(0x217)]*_0x120d8b[_0x4aba5e(0x1b4)];}),_0x268ad5[_0x2eea60[_0x460aa4(0x1a2)]-_0x2b94c9-0x1]=_0x52c8b5*(_0x1a027c-0x1);});let _0x454b8a=[];_0x139df4=[...config[_0x5aa94d(0x1cf)]]||[];let _0x2c9824=0x0;_0x7710bd=0x0,_0x2eea60[_0x5aa94d(0xf5)]((_0x43c021,_0x314426)=>{const _0x343527=_0x5aa94d;if(_0x139df4[_0x7710bd]){const _0x40e449=fns[_0x343527(0x19d)](_0x139df4[_0x7710bd][_0x343527(0xc8)],_0x343527(0x131),new Date()),_0x3bb24d=fns[_0x343527(0x19d)](_0x43c021[_0x343527(0xc8)],_0x343527(0x131),new Date());if(fns[_0x343527(0x18c)](_0x40e449,_0x3bb24d)){let _0x3eefb5=0x0;_0x139df4[_0x7710bd][_0x343527(0x208)][_0x343527(0xf5)](_0x4c67c7=>{const _0x213921=_0x343527;!_0x454b8a[_0x4c67c7['coin']]?_0x454b8a[_0x4c67c7[_0x213921(0x230)]]=_0x4c67c7[_0x213921(0x217)]:(_0x3eefb5=_0x454b8a[_0x4c67c7[_0x213921(0x230)]],_0x454b8a[_0x4c67c7[_0x213921(0x230)]]+=_0x4c67c7[_0x213921(0x217)]);const _0x292cba=_0x43c021[_0x213921(0x21e)][_0x213921(0x1bb)](_0x28651a=>_0x28651a[_0x213921(0x230)]==_0x4c67c7[_0x213921(0x230)]);(!_0x292cba||_0x292cba['number']==0x0)&&(_0x2c9824+=(-_0x4c67c7[_0x213921(0x217)]-_0x3eefb5)*_0x4c67c7[_0x213921(0x1b4)]);}),_0x7710bd++;}}_0x43c021['coins'][_0x343527(0xf5)]((_0x4e416f,_0x59b758)=>{const _0x5654a2=_0x343527;_0x454b8a[_0x4e416f[_0x5654a2(0x230)]]&&(_0x4e416f[_0x5654a2(0x187)]=_0x454b8a[_0x4e416f[_0x5654a2(0x230)]]);}),_0x56d952[_0x343527(0x167)]({'date':_0x43c021['date'],'eur':_0x43c021['eur'],'usd':_0x43c021['usd'],'offset':_0x268ad5[_0x314426],'netoffset':_0x2c9824,'coins':_0x43c021[_0x343527(0x21e)]});});}return _0x56d952;}function emitPerformance(_0x18f85a){const _0x46672f=_0x3015fe;_0x18f85a['length']!==0x0?(proxyEmit(_0x46672f(0x249),_0x18f85a),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x3e463e,_0x5cecc4){const _0x225acc=_0x3015fe;let _0x2aea3e=0x0,_0x53f688=0x0,_0x2e6c25=0x0;_0x3e463e[_0x225acc(0x21e)]['forEach'](_0x56f7a8=>{const _0x1d9639=_0x225acc;_0x2aea3e+=_0x56f7a8['number']*_0x56f7a8[_0x1d9639(0x1b4)];});_0x5cecc4&&(_0x2aea3e+=_0x3e463e['offset']);if(config[_0x225acc(0x18b)]==='BTC'||config[_0x225acc(0x18b)]===_0x225acc(0x164))_0x53f688=_0x2aea3e*_0x3e463e[_0x225acc(0x24d)],_0x2e6c25=_0x2aea3e*_0x3e463e[_0x225acc(0x23b)];else{if(usdBasecoins[_0x225acc(0x220)](config[_0x225acc(0x18b)]))_0x53f688=_0x2aea3e*_0x3e463e[_0x225acc(0x24d)]/_0x3e463e[_0x225acc(0x23b)],_0x2e6c25=_0x2aea3e;else config[_0x225acc(0x18b)]===_0x225acc(0x1ac)&&(_0x53f688=_0x2aea3e,_0x2e6c25=_0x2aea3e*_0x3e463e[_0x225acc(0x23b)]/_0x3e463e[_0x225acc(0x24d)]);}return[_0x2aea3e,_0x53f688,_0x2e6c25];}function getKPIs(_0xdd172c,_0x49b228=_0x3015fe(0x1ac)){const _0x2ef8a4=_0x3015fe,_0x4d9c1e=config[_0x2ef8a4(0x18b)],_0x5e0c92=lastBalances,_0x285156=currentCoins,_0x44e7b6=getNormalizedPerformance(),_0x70a00d=_0xdd172c===_0x2ef8a4(0x18b)?_0x4d9c1e:_0xdd172c===_0x2ef8a4(0xd2)||_0xdd172c===_0x2ef8a4(0x213)?_0x49b228:_0x2ef8a4(0x211)+_0x4d9c1e,_0x246597=_0xdd172c===_0x2ef8a4(0x17d)?'Net\x20effect':_0xdd172c==='net-fiat'?'Net\x20effect':_0x70a00d+_0x2ef8a4(0x108),_0x83164d=_0xdd172c===_0x2ef8a4(0x17d)||_0xdd172c===_0x2ef8a4(0x213)?_0x2ef8a4(0x1cd):_0x70a00d+_0x2ef8a4(0xe7);let _0x45b5b2=0x0;_0x285156[_0x2ef8a4(0xf5)](_0x52fac3=>{const _0x1f8b57=_0x2ef8a4;_0x45b5b2+=_0x52fac3['number']*_0x52fac3[_0x1f8b57(0xc7)];});if(_0xdd172c==='fiat'||_0xdd172c==='net-fiat'){if(_0x4d9c1e===_0x2ef8a4(0x120)||_0x4d9c1e===_0x2ef8a4(0x164))_0x45b5b2=_0x45b5b2*(_0x49b228===_0x2ef8a4(0x1ac)?_0x5e0c92[_0x2ef8a4(0x24d)]:_0x5e0c92[_0x2ef8a4(0x23b)]);else{if(usdBasecoins[_0x2ef8a4(0x220)](_0x4d9c1e))_0x45b5b2=_0x45b5b2*(_0x49b228===_0x2ef8a4(0x1ac)?_0x5e0c92[_0x2ef8a4(0x24d)]/_0x5e0c92[_0x2ef8a4(0x23b)]:0x1);else _0x4d9c1e==='EUR'&&(_0x45b5b2=_0x45b5b2*(_0x49b228===_0x2ef8a4(0x1ac)?0x1:_0x5e0c92['usd']/_0x5e0c92[_0x2ef8a4(0x24d)]));}}let _0x585d98;if(_0x45b5b2!==0x0){if(_0xdd172c===_0x2ef8a4(0x18b))_0x585d98=(_0x45b5b2/startingBalances[_0x2ef8a4(0x18b)]-0x1)*0x64;else{if(_0x49b228===_0x2ef8a4(0x1ac))_0x585d98=(_0x45b5b2/startingBalances['eur']-0x1)*0x64;else _0x585d98=(_0x45b5b2/startingBalances[_0x2ef8a4(0x23b)]-0x1)*0x64;}let _0x22dd62=0x0;if(startingBalances[_0x2ef8a4(0x21e)])_0x285156[_0x2ef8a4(0xf5)](_0x502756=>{const _0x4b9d80=_0x2ef8a4;let _0x8b06e4=startingBalances[_0x4b9d80(0x21e)][_0x4b9d80(0x1bb)](_0x46ae5e=>_0x46ae5e['coin']===_0x502756[_0x4b9d80(0x230)]);if(_0x8b06e4&&_0x8b06e4[_0x4b9d80(0x230)]&&_0x502756[_0x4b9d80(0x217)]!==0x0)_0x22dd62+=_0x8b06e4[_0x4b9d80(0x217)]*_0x502756['last'];});let _0x295adb=0x0;if(_0x44e7b6[_0x2ef8a4(0x1a2)]!==0x0){let _0x55c280=_0x44e7b6[_0x44e7b6['length']-0x1];_0x295adb=_0x55c280[_0x2ef8a4(0x1e1)];}_0x22dd62-=_0x295adb;_0xdd172c==='net-basecoin'&&(_0x585d98=(_0x45b5b2-_0x22dd62)/startingBalances[_0x2ef8a4(0x18b)]*0x64,_0x45b5b2=_0x45b5b2-_0x22dd62);if(_0xdd172c===_0x2ef8a4(0x213)){let _0xbaccc=_0x49b228==='EUR'?startingBalances[_0x2ef8a4(0x24d)]:startingBalances['usd'];if(_0x4d9c1e===_0x2ef8a4(0x120)||_0x4d9c1e===_0x2ef8a4(0x164))_0x22dd62=_0x49b228===_0x2ef8a4(0x1ac)?_0x22dd62*_0x5e0c92[_0x2ef8a4(0x24d)]:_0x22dd62*_0x5e0c92['usd'];else{if(usdBasecoins['includes'](_0x4d9c1e))_0x22dd62=_0x49b228===_0x2ef8a4(0x1ac)?_0x22dd62*_0x5e0c92[_0x2ef8a4(0x24d)]/_0x5e0c92[_0x2ef8a4(0x23b)]:_0x22dd62;else _0x4d9c1e===_0x2ef8a4(0x1ac)&&(_0x22dd62=_0x49b228==='EUR'?_0x22dd62:_0x22dd62*_0x5e0c92['usd']/_0x5e0c92[_0x2ef8a4(0x24d)]);}_0x585d98=(_0x45b5b2-_0x22dd62)/_0xbaccc*0x64,_0x45b5b2=_0x45b5b2-_0x22dd62;}if(_0x585d98){if(_0x585d98<0x64)_0x585d98=_0x585d98[_0x2ef8a4(0x222)](0x2);else{if(_0x585d98<0x3e8)_0x585d98=_0x585d98[_0x2ef8a4(0x222)](0x1);else _0x585d98=_0x585d98['toFixed'](0x0);}}else _0x585d98=Number('0')[_0x2ef8a4(0x222)](0x2);if(_0x45b5b2){if(Math[_0x2ef8a4(0x1f0)](_0x45b5b2)<0.000001)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x2);else{if(Math[_0x2ef8a4(0x1f0)](_0x45b5b2)<0.1)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x6);else{if(Math[_0x2ef8a4(0x1f0)](_0x45b5b2)<0x1)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x5);else{if(Math['abs'](_0x45b5b2)<0xa)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x4);else{if(Math['abs'](_0x45b5b2)<0x64)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x3);else{if(Math[_0x2ef8a4(0x1f0)](_0x45b5b2)<0x3e8)_0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x2);else _0x45b5b2=_0x45b5b2[_0x2ef8a4(0x222)](0x2);}}}}}}else _0x45b5b2=Number('0')[_0x2ef8a4(0x222)](0x2);}else _0x585d98=Number('0')['toFixed'](0x2);return{'value':_0x45b5b2,'change':_0x585d98,'leftTxt':_0x246597,'rightTxt':_0x83164d};}async function getStartingBalances(_0x577617,_0x144407=!![]){const _0x46a5a9=_0x3015fe;if(_0x577617[_0x46a5a9(0x1a2)]!==0x0){const [_0x391769,_0x3c79b6,_0x1446aa]=getPerf(_0x577617[0x0],!![]);let _0x1855e4=[];config[_0x46a5a9(0xd1)]['forEach'](_0x4e6085=>{const _0x18cb14=_0x46a5a9;let _0x59d780=0x0,_0x54f3fa;config[_0x18cb14(0x1cf)][_0x18cb14(0xf5)](_0x3abcf4=>{const _0x415687=_0x18cb14;let _0x5dbdb9=_0x3abcf4[_0x415687(0x208)][_0x415687(0x1bb)](_0x2f0f06=>_0x2f0f06[_0x415687(0x230)]==_0x4e6085[_0x415687(0x230)]);if(_0x5dbdb9){_0x59d780+=_0x5dbdb9[_0x415687(0x217)];if(!_0x54f3fa)_0x54f3fa=_0x5dbdb9[_0x415687(0x1b4)];}}),_0x1855e4[_0x18cb14(0x167)]({'coin':_0x4e6085['coin'],'number':_0x59d780,'initialprice':_0x54f3fa});});const _0x40dcb2={'basecoin':_0x391769,'eur':_0x3c79b6,'usd':_0x1446aa,'coins':_0x1855e4};if(_0x144407)proxyEmit(_0x46a5a9(0x192),_0x40dcb2);startingBalances=_0x40dcb2;}}function headlessMode(_0x40bac3){const _0x1e52cc=_0x3015fe;let _0x206fca=_0x40bac3[_0x1e52cc(0xd1)],_0xa840df=_0x40bac3[_0x1e52cc(0x143)],_0x7a8dd7=[];for(let _0x253a3f of _0x206fca){if(_0x253a3f[_0x1e52cc(0x230)]!=config[_0x1e52cc(0x18b)]){if(_0x253a3f['delta']>=_0xa840df/0x64){if(_0x253a3f[_0x1e52cc(0x13d)])_0x7a8dd7['push'](_0x253a3f);}else{if(_0x253a3f['delta']<=-_0xa840df/0x64){if(_0x253a3f['valid'])_0x7a8dd7[_0x1e52cc(0x167)](_0x253a3f);}}}}_0x7a8dd7[_0x1e52cc(0x1a2)]>0x0&&placeOrder(_0x7a8dd7);}function notifyBalance(_0x441cd9){const _0x551fdd=_0x3015fe;let _0x2ca2d5=_0x441cd9['portfolio'],_0x4cee22=_0x441cd9[_0x551fdd(0x143)],_0x51ed2a=[];for(let _0xc9e4bb of _0x2ca2d5){if(_0xc9e4bb[_0x551fdd(0x230)]!=config[_0x551fdd(0x18b)]){if(_0xc9e4bb[_0x551fdd(0x121)]>=_0x4cee22/0x64){if(_0xc9e4bb[_0x551fdd(0x13d)])_0x51ed2a[_0x551fdd(0x167)](_0xc9e4bb);}else{if(_0xc9e4bb[_0x551fdd(0x121)]<=-_0x4cee22/0x64){if(_0xc9e4bb['valid'])_0x51ed2a[_0x551fdd(0x167)](_0xc9e4bb);}}}}if(_0x51ed2a['length']>0x0){let _0x54e1dd=_0x51ed2a['map'](_0x412f52=>_0x412f52[_0x551fdd(0x230)]);_0x54e1dd[_0x551fdd(0x1b6)]();let _0x59e43b=_0x54e1dd[_0x551fdd(0x1ce)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x551fdd(0x20f));lastCoinsToBalance=_0x59e43b;}}function symbolToCoin(_0x16784b){const _0x1362ce=_0x3015fe;let _0x1c804d;if(_0x16784b[_0x1362ce(0x220)]('/'+config[_0x1362ce(0x18b)]))_0x1c804d=_0x16784b[_0x1362ce(0x140)]('/'+config[_0x1362ce(0x18b)],'');if(_0x16784b['includes'](config[_0x1362ce(0x18b)]+'/'))_0x1c804d=_0x16784b[_0x1362ce(0x140)](config['basecoin']+'/','');return _0x1c804d;}async function unlockOrders(){const _0x312612=_0x3015fe;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x312612(0x21c)](_0x312612(0x1b7)),lockOrders=ORDERS[_0x312612(0x14b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3de0b1=await getCoins();[currentCoins,currentCoinsAll]=_0x3de0b1,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x312612(0x21c)](_0x312612(0x24c));}}async function validateOrders(_0x15a46d){const _0x27cb50=_0x3015fe;if(_0x15a46d)validateOrdersState=_0x15a46d;logger[_0x27cb50(0x21c)](_0x27cb50(0x17a)+validateOrdersState+_0x27cb50(0x152)+(lockOrders==0x1?_0x27cb50(0x201):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x1ca58a=[],_0x79b69a=config[_0x27cb50(0xe8)]==_0x27cb50(0x160)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x27cb50(0x252)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x27cb50(0x1df)+validateOrdersState),lastOrders[_0x27cb50(0xf5)](_0x5a710c=>{const _0x480954=_0x27cb50;let _0x52b7ef=![];_0x5a710c['filled']>0x0&&(_0x52b7ef=!![]),_0x1ca58a[_0x480954(0x167)](_0x52b7ef),_0x52b7ef&&config[_0x480954(0xe8)]!='market'&&logHistory(_0x480954(0x1b0),_0x480954(0x1d0)+_0x5a710c['symbol']+'\x20'+_0x5a710c[_0x480954(0x196)]+'\x20#'+formatResult(_0x5a710c[_0x480954(0x12c)],0x8)+'\x20@'+formatResult(_0x5a710c['price'],0x8));}),_0x1ca58a['forEach']((_0x4976b1,_0x590f93)=>{const _0x4ed8da=_0x27cb50;if(_0x4976b1)lastOrders[_0x4ed8da(0x1b2)](_0x590f93,0x1);}),persistOpenOrders(lastOrders);const _0x5eab9a=coolingDown?_0x27cb50(0x23c):_0x27cb50(0x228);if(validateOrdersState==_0x27cb50(0x187)){validateOrdersState=_0x27cb50(0x183);if(_0x1ca58a[_0x27cb50(0x220)](![])){if(config[_0x27cb50(0xe8)]==_0x27cb50(0x160)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x27cb50(0x183)){if(_0x1ca58a['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x27cb50(0xe8)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x27cb50(0x24b))_0x1ca58a[_0x27cb50(0x220)](![])&&(config['ordertype']==_0x27cb50(0x160)?logHistory(_0x27cb50(0x181),_0x27cb50(0x191)+Math[_0x27cb50(0x1ff)](_0x79b69a*validateOrderInterval/0xea60)+_0x27cb50(0x22e)+_0x5eab9a):(await cancelOrders(),logHistory(_0x27cb50(0x181),_0x27cb50(0xf2)+Math[_0x27cb50(0x1ff)](_0x79b69a*validateOrderInterval/0xea60)+_0x27cb50(0x22e)+_0x5eab9a))),await unlockOrders();else{if(validateOrdersState==_0x27cb50(0x144)){if(config[_0x27cb50(0xe8)]!=_0x27cb50(0x160))logHistory(_0x27cb50(0x181),_0x27cb50(0x240)+_0x5eab9a);await unlockOrders();}}}}}async function cancelOrders(){const _0x5afa16=_0x3015fe;lastOrders[_0x5afa16(0xf5)](async _0x546e55=>{const _0x35ebca=_0x5afa16;try{const _0xd09d30=await exchange[_0x35ebca(0x1c2)](_0x546e55['orderId'],_0x546e55[_0x35ebca(0x202)]);}catch(_0x298d4e){if(_0x298d4e[_0x35ebca(0x1d3)]()['includes'](_0x35ebca(0x170))){}else await handleError(_0x298d4e,_0x35ebca(0x21f));}});}async function initCoinResults(_0x4e561a){const _0x3a0db3=_0x3015fe;_0x4e561a?logger[_0x3a0db3(0x21c)](_0x3a0db3(0x153)+_0x4e561a):logger[_0x3a0db3(0x21c)](_0x3a0db3(0xeb)),config['portfolio'][_0x3a0db3(0xf5)](_0x327059=>{const _0x55f59b=_0x3a0db3;if(!_0x327059['excluded']&&_0x327059[_0x55f59b(0x230)]!=config['basecoin']){const _0x25f922=currentCoins[_0x55f59b(0x1bb)](_0x31abf1=>_0x31abf1[_0x55f59b(0x230)]==_0x327059[_0x55f59b(0x230)]),_0x21f594=global[_0x55f59b(0x186)][noslash(_0x327059[_0x55f59b(0x202)])];let _0x574b9c=_0x25f922?_0x25f922[_0x55f59b(0x217)]:null,_0x5aa90a=_0x327059[_0x55f59b(0x20b)]?0x1/_0x21f594:_0x21f594,_0xf2aa90;config['liquidity'][_0x55f59b(0xf5)](_0x192e03=>{const _0x141e60=_0x55f59b;!_0xf2aa90&&(_0xf2aa90=_0x192e03[_0x141e60(0x208)][_0x141e60(0x1bb)](_0x173fb3=>_0x173fb3[_0x141e60(0x230)]==_0x327059[_0x141e60(0x230)]),_0xf2aa90&&(_0x574b9c=_0xf2aa90['number'],_0x5aa90a=_0xf2aa90[_0x141e60(0x1b4)]));});let _0x498792=dbCoinResults[_0x55f59b(0x10a)](_0x55f59b(0x21e))[_0x55f59b(0x1bb)]({'coin':_0x327059[_0x55f59b(0x230)]})['value']();if(!_0x498792){const _0x485172={'coin':_0x327059['coin'],'number':_0x574b9c,'breakeven':_0x5aa90a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x55f59b(0x10a)](_0x55f59b(0x21e))[_0x55f59b(0x167)](_0x485172)['write']();}else{if(_0x4e561a&&_0x327059[_0x55f59b(0x230)]==_0x4e561a){const _0x4f02c5={'coin':_0x327059[_0x55f59b(0x230)],'number':_0x574b9c,'breakeven':_0x5aa90a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x55f59b(0x10a)](_0x55f59b(0x21e))[_0x55f59b(0x1bb)]({'coin':_0x327059[_0x55f59b(0x230)]})[_0x55f59b(0x1b1)](_0x4f02c5)['write']();}}}});}async function updateCoinResults(_0x561ce5,_0x26e2d9=![]){const _0x5c007d=_0x3015fe;let _0x4aa659,_0x2368da,_0x1c00ef,_0x2bdd7f,_0x30bfad,_0x3dbade,_0x421e79=dbCoinResults[_0x5c007d(0x10a)](_0x5c007d(0x21e))[_0x5c007d(0x1bb)]({'coin':_0x561ce5['coin']})['value'](),_0x4b5e87=![];Object[_0x5c007d(0x247)](_0x421e79)[_0x5c007d(0xf5)](([_0x43e4af,_0x41944b])=>{if(_0x41944b==null)_0x4b5e87=!![];});(!_0x421e79||_0x4b5e87)&&(await initCoinResults(_0x561ce5[_0x5c007d(0x230)]),_0x421e79=dbCoinResults['get'](_0x5c007d(0x21e))[_0x5c007d(0x1bb)]({'coin':_0x561ce5[_0x5c007d(0x230)]})[_0x5c007d(0x242)]());_0x561ce5['reverse']&&(_0x3dbade={'filled':_0x561ce5[_0x5c007d(0x12c)]*_0x561ce5[_0x5c007d(0x1b4)],'amount':_0x561ce5[_0x5c007d(0x12c)]*_0x561ce5[_0x5c007d(0x1b4)],'side':_0x561ce5[_0x5c007d(0x196)]==_0x5c007d(0x1ae)?'buy':_0x5c007d(0x1ae),'price':0x1/_0x561ce5[_0x5c007d(0x1b4)]},_0x561ce5={..._0x561ce5,..._0x3dbade});_0x26e2d9?_0x2368da=_0x561ce5['side']==_0x5c007d(0x13f)?_0x421e79[_0x5c007d(0x217)]+_0x561ce5[_0x5c007d(0x12c)]:_0x421e79['number']-_0x561ce5[_0x5c007d(0x12c)]:_0x2368da=await getCoinNumber(_0x561ce5[_0x5c007d(0x230)]);if(_0x561ce5[_0x5c007d(0x11e)]&&_0x561ce5[_0x5c007d(0x11e)]['currency']==config[_0x5c007d(0x18b)])_0x4aa659=_0x561ce5[_0x5c007d(0x11e)]['cost'];else{if(_0x561ce5[_0x5c007d(0x11e)]&&_0x561ce5[_0x5c007d(0x11e)][_0x5c007d(0x151)]==_0x5c007d(0x1e6)&&!_0x26e2d9)_0x4aa659=_0x561ce5['fee'][_0x5c007d(0xea)]*global[_0x5c007d(0x186)]['BNB'+config[_0x5c007d(0x18b)]];else _0x4aa659=defaultFee*_0x561ce5[_0x5c007d(0x12c)]*_0x561ce5[_0x5c007d(0x1b4)];}_0x561ce5[_0x5c007d(0x196)]=='buy'?(_0x1c00ef=_0x2368da!=0x0?(_0x421e79[_0x5c007d(0x1f1)]*_0x421e79[_0x5c007d(0x217)]+_0x561ce5['price']*(_0x2368da-_0x421e79[_0x5c007d(0x217)])+_0x4aa659)/_0x2368da:0x0,_0x2bdd7f=_0x421e79[_0x5c007d(0x22b)]):(_0x1c00ef=_0x2368da!=0x0?(_0x421e79['breakeven']*_0x421e79[_0x5c007d(0x217)]-_0x561ce5[_0x5c007d(0x1b4)]*(_0x421e79[_0x5c007d(0x217)]-_0x2368da)+_0x4aa659)/_0x2368da:0x0,_0x2bdd7f=_0x421e79[_0x5c007d(0x22b)]+(_0x561ce5[_0x5c007d(0x1b4)]-_0x421e79[_0x5c007d(0x1f1)])*_0x561ce5[_0x5c007d(0x12c)]);_0x30bfad=(_0x561ce5[_0x5c007d(0x1b4)]-_0x1c00ef-_0x4aa659/_0x561ce5[_0x5c007d(0x12c)])*_0x2368da;let _0xbea423={'coin':_0x561ce5['coin'],'number':_0x2368da,'breakeven':formatResult(_0x1c00ef,0x8),'realized':formatResult(_0x2bdd7f,0x8),'unrealized':formatResult(_0x30bfad,0x8),'fees':formatResult(_0x421e79[_0x5c007d(0x18a)]+_0x4aa659,0x8),'sells':_0x561ce5[_0x5c007d(0x196)]==_0x5c007d(0x1ae)?_0x421e79[_0x5c007d(0x18f)]+0x1:_0x421e79[_0x5c007d(0x18f)],'buys':_0x561ce5[_0x5c007d(0x196)]==_0x5c007d(0x13f)?_0x421e79[_0x5c007d(0x248)]+0x1:_0x421e79[_0x5c007d(0x248)]};dbCoinResults[_0x5c007d(0x10a)](_0x5c007d(0x21e))['find']({'coin':_0x561ce5[_0x5c007d(0x230)]})[_0x5c007d(0x1b1)](_0xbea423)[_0x5c007d(0xed)]();if(!_0x26e2d9){if(_0x561ce5[_0x5c007d(0x11e)]&&_0x561ce5[_0x5c007d(0x11e)][_0x5c007d(0x151)]==_0x5c007d(0x1e6)){const _0x56f109=currentCoins[_0x5c007d(0x1bb)](_0x482e05=>_0x482e05['coin']=='BNB');if(_0x56f109){let _0x44f2b4=dbCoinResults[_0x5c007d(0x10a)](_0x5c007d(0x21e))['find']({'coin':'BNB'})[_0x5c007d(0x242)]();_0xbea423={..._0x44f2b4,'number':_0x56f109['number']},dbCoinResults[_0x5c007d(0x10a)](_0x5c007d(0x21e))[_0x5c007d(0x1bb)]({'coin':_0x5c007d(0x1e6)})[_0x5c007d(0x1b1)](_0xbea423)[_0x5c007d(0xed)]();}}}}async function placeOrder(_0x3a0d47){const _0x4fc7e5=_0x3015fe,_0x5c5b07=config[_0x4fc7e5(0xe8)]==_0x4fc7e5(0x160)?_0x4fc7e5(0x160):_0x4fc7e5(0x10c);if(lockOrders==ORDERS[_0x4fc7e5(0x215)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4fc7e5(0x15b)],allOrdersPlaced=![],validateOrdersState=_0x4fc7e5(0x187);let _0x2e3dc5=![];lastOrders=[];for(const _0x28fce2 of _0x3a0d47){let _0x5b792f,_0x2eb18f,_0x5e252c,_0xd8c20e,_0xc25232,_0x22dc8f=_0x28fce2[_0x4fc7e5(0x202)];try{const _0x2430b4=await exchange[_0x4fc7e5(0x114)](_0x22dc8f);_0x5b792f=_0x28fce2[_0x4fc7e5(0x20b)]?0x1/_0x28fce2[_0x4fc7e5(0xc7)]:_0x28fce2['last'],_0x2eb18f=_0x2430b4[_0x4fc7e5(0x155)],_0x5e252c=_0x2430b4[_0x4fc7e5(0x184)];_0x28fce2[_0x4fc7e5(0x20b)]?(_0xd8c20e=_0x28fce2[_0x4fc7e5(0x196)]=='buy'?_0x4fc7e5(0x1ae):_0x4fc7e5(0x13f),_0xc25232=Math['abs'](_0x28fce2[_0x4fc7e5(0x1c9)])/_0x5b792f):(_0xd8c20e=_0x28fce2[_0x4fc7e5(0x196)],_0xc25232=Math[_0x4fc7e5(0x1f0)](_0x28fce2[_0x4fc7e5(0x1c9)]));_0x5c5b07=='limit'&&(config['ordertype']==_0x4fc7e5(0x1fd)&&(_0x5b792f=_0xd8c20e==_0x4fc7e5(0x13f)?_0x2eb18f:_0x5e252c),config[_0x4fc7e5(0xe8)]==_0x4fc7e5(0x1a1)&&(_0x5b792f=_0xd8c20e==_0x4fc7e5(0x13f)?_0x5e252c:_0x2eb18f));_0xc25232=formatResult(_0xc25232,0x8),_0x5b792f=formatResult(_0x5b792f,0x8);const _0x27fc06=_0xd8c20e=='sell'?config[_0x4fc7e5(0xd5)]?String['fromCodePoint']('0x'+config[_0x4fc7e5(0xd5)])+'\x20':'':config['emojibuy']?String[_0x4fc7e5(0x21d)]('0x'+config[_0x4fc7e5(0x13e)])+'\x20':'',_0x11b57b=_0x5c5b07==_0x4fc7e5(0x160)?_0x4fc7e5(0xf6):config['ordertype']==_0x4fc7e5(0x1fd)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x11e531=(Math[_0x4fc7e5(0xcc)](Math[_0x4fc7e5(0x243)]()*0x35a4e900)+0x5f5e100)[_0x4fc7e5(0x1d3)]();lastOrders[_0x4fc7e5(0x167)]({'customId':_0x11e531,'symbol':_0x22dc8f,'coin':_0x28fce2[_0x4fc7e5(0x230)],'amount':_0xc25232,'price':_0x5b792f,'side':_0xd8c20e,'reverse':_0x28fce2['reverse'],'filled':0x0});if(_0x5c5b07=='market')logHistory('order',''+_0x27fc06+_0x11b57b+_0x4fc7e5(0x1e5)+_0x22dc8f+'\x20'+_0xd8c20e+'\x20#'+formatResult(_0xc25232,0x8)+'\x20@'+formatResult(_0x5b792f,0x8));else logHistory('order',''+_0x27fc06+_0x11b57b+'\x20order:\x20'+_0x22dc8f+'\x20'+_0xd8c20e+'\x20#'+formatResult(_0xc25232,0x8)+'\x20@'+formatResult(_0x5b792f,0x8));const _0x849098=await exchange[_0x4fc7e5(0x10f)](_0x22dc8f,_0x5c5b07,_0xd8c20e,_0xc25232,_0x5b792f);logger[_0x4fc7e5(0x21c)](_0x4fc7e5(0x124)+_0x849098['id']+_0x4fc7e5(0x168)+_0x11e531);const _0x478a1d=lastOrders[_0x4fc7e5(0x1a2)]-0x1;if(_0x478a1d>=0x0&&lastOrders[_0x478a1d][_0x4fc7e5(0x238)]==_0x11e531){lastOrders[_0x478a1d][_0x4fc7e5(0xca)]=_0x849098['id'];if(_0x849098[_0x4fc7e5(0xf8)])lastOrders[_0x478a1d]['amount']=_0x849098[_0x4fc7e5(0xf8)];if(_0x849098[_0x4fc7e5(0x1b4)])lastOrders[_0x478a1d][_0x4fc7e5(0x1b4)]=_0x849098['price'];lastOrders[_0x478a1d][_0x4fc7e5(0x11e)]=_0x849098[_0x4fc7e5(0x11e)];}if(config[_0x4fc7e5(0x1eb)]!=0x0){let _0x3cd144=null;if(cooldownTracker[_0x4fc7e5(0x1a2)]==config[_0x4fc7e5(0x1eb)]-0x1)_0x3cd144=cooldownTracker[_0x4fc7e5(0x1ba)]();const _0x1b24f2=getTimeStamp();cooldownTracker['push'](_0x1b24f2);if(_0x3cd144){const _0x5c4c01=fns[_0x4fc7e5(0x1f8)](new Date(_0x1b24f2),new Date(_0x3cd144));if(_0x5c4c01<cooldownInterval){logHistory(_0x4fc7e5(0x1b3),'Executed\x20'+config[_0x4fc7e5(0x1eb)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4fc7e5(0xff)),coolingDown=!![];break;}}}}catch(_0x47ad4e){if(_0x47ad4e[_0x4fc7e5(0x1d3)]()[_0x4fc7e5(0x220)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4fc7e5(0x1c0)](_0xaf743f=>_0xaf743f[_0x4fc7e5(0x202)]!=_0x22dc8f),logHistory('error',_0x4fc7e5(0x130)+_0x22dc8f),_0x2e3dc5=!![];else{if(_0x47ad4e[_0x4fc7e5(0x1d3)]()[_0x4fc7e5(0x220)](_0x4fc7e5(0x223)))lastOrders=lastOrders[_0x4fc7e5(0x1c0)](_0x26a775=>_0x26a775[_0x4fc7e5(0x202)]!=_0x22dc8f),logHistory(_0x4fc7e5(0x1b3),_0x4fc7e5(0x190)+_0x22dc8f),_0x2e3dc5=!![];else{if(_0x47ad4e[_0x4fc7e5(0x1d3)]()['includes'](_0x4fc7e5(0x13a)))lastOrders=lastOrders[_0x4fc7e5(0x1c0)](_0x402f02=>_0x402f02[_0x4fc7e5(0x202)]!=_0x22dc8f),logHistory(_0x4fc7e5(0x1b3),_0x4fc7e5(0x150)+_0x22dc8f),_0x2e3dc5=!![];else _0x47ad4e[_0x4fc7e5(0x1d3)]()[_0x4fc7e5(0x220)](_0x4fc7e5(0x16c))?(lastOrders=lastOrders['filter'](_0x4b47c3=>_0x4b47c3[_0x4fc7e5(0x202)]!=_0x22dc8f),logHistory(_0x4fc7e5(0x1b3),_0x4fc7e5(0x130)+_0x22dc8f),_0x2e3dc5=!![]):(lastOrders=lastOrders['filter'](_0x17d280=>_0x17d280[_0x4fc7e5(0x202)]!=_0x22dc8f),await handleError(_0x47ad4e,_0x4fc7e5(0x1ee),_0x22dc8f));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4fc7e5(0x1a2)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x44f2e8=config[_0x4fc7e5(0xe8)]==_0x4fc7e5(0x160)?validateOrderTimeout*0x3c*0x3e8:config[_0x4fc7e5(0x252)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2fd082=_0x4fc7e5;validateOrders(_0x2fd082(0x24b));},_0x44f2e8);}else unlockOrders();_0x2e3dc5&&config[_0x4fc7e5(0x10d)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4fc7e5(0x181),_0x4fc7e5(0x24e)));}else{if(coolingDown)!config[_0x4fc7e5(0x10d)]&&logHistory('error',_0x4fc7e5(0x129));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0x4fc7e5(0xe8)]==_0x4fc7e5(0x160)?logHistory(_0x4fc7e5(0x1b3),_0x4fc7e5(0x1dc)):logHistory(_0x4fc7e5(0x1b3),_0x4fc7e5(0x1f4))));}}function persistOpenOrders(_0x56780e){const _0x150518=_0x3015fe,_0x25cd06={...config,'openOrders':_0x56780e};let _0x127995=dbConfig[_0x150518(0x10a)](_0x150518(0xd4))[_0x150518(0x1bb)]({'botID':botID})['value']();_0x127995&&dbConfig[_0x150518(0x10a)](_0x150518(0xd4))[_0x150518(0x1bb)]({'botID':botID})[_0x150518(0x1b1)](_0x25cd06)[_0x150518(0xed)]();}function restoreOrders(){const _0x2fad8f=_0x3015fe;let _0x5940cb;config['openOrders']&&allOpenOrders[_0x2fad8f(0xf5)](_0x4668e9=>{const _0x2f034b=_0x2fad8f,_0x599e68=config[_0x2f034b(0x239)][_0x2f034b(0x1bb)](_0xb50274=>_0xb50274[_0x2f034b(0xca)]==_0x4668e9['id']);_0x599e68&&(lastOrders[_0x2f034b(0x167)](_0x599e68),_0x5940cb=_0x4668e9[_0x2f034b(0x116)]);});if(lastOrders[_0x2fad8f(0x1a2)]>0x0){lockOrders=ORDERS[_0x2fad8f(0x15b)],validateOrdersState=_0x2fad8f(0x183),allOrdersPlaced=!![];const _0x9a1734=new Date()[_0x2fad8f(0x136)](),_0x2a634e=config[_0x2fad8f(0xe8)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x2fad8f(0x252)]*0x3c*0x3e8;if(_0x5940cb+_0x2a634e>_0x9a1734){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1c1836=_0x2fad8f;validateOrders(_0x1c1836(0x24b));},_0x5940cb+_0x2a634e-_0x9a1734);}else validateOrders(_0x2fad8f(0x24b));}}async function sendMetricsTelegram(){const _0x2cd18b=_0x3015fe;if(!coinsLoaded){process[_0x2cd18b(0x17e)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x98b660=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5899fc='';if(config[_0x2cd18b(0x135)])_0x5899fc='<b>'+config[_0x2cd18b(0x112)]+_0x2cd18b(0x1a8);else _0x5899fc=_0x2cd18b(0x118)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x49752f=getKPIs('basecoin'),_0x407213=getKPIs('fiat',config['fiat']),_0x4cfca2=getKPIs(_0x2cd18b(0x17d)),_0x42b8c3=getKPIs(_0x2cd18b(0x213),config[_0x2cd18b(0xd2)]);_0x5899fc+=_0x2cd18b(0xe0),_0x5899fc+=_0x49752f[_0x2cd18b(0x23a)]+_0x2cd18b(0x1f6)+_0x49752f['value']+'\x0a',_0x5899fc+=_0x49752f['rightTxt']+':\x20'+_0x49752f[_0x2cd18b(0x197)]+'%\x0a',_0x5899fc+=_0x407213[_0x2cd18b(0x23a)]+_0x2cd18b(0x1f6)+_0x407213[_0x2cd18b(0x242)]+'\x0a',_0x5899fc+=_0x407213['rightTxt']+':\x20'+_0x407213[_0x2cd18b(0x197)]+'%\x0a',_0x5899fc+=_0x4cfca2[_0x2cd18b(0x23a)]+':\x20'+_0x4cfca2['value']+'\x20('+config[_0x2cd18b(0x18b)]+')\x0a',_0x5899fc+=_0x4cfca2[_0x2cd18b(0x22c)]+':\x20'+_0x4cfca2[_0x2cd18b(0x197)]+'%\x20('+config['basecoin']+')\x0a',_0x5899fc+=_0x42b8c3[_0x2cd18b(0x23a)]+':\x20'+_0x42b8c3[_0x2cd18b(0x242)]+'\x20('+config['fiat']+')\x0a',_0x5899fc+=_0x42b8c3[_0x2cd18b(0x22c)]+':\x20'+_0x42b8c3['change']+_0x2cd18b(0x15a)+config['fiat']+')\x0a',_0x5899fc+=_0x2cd18b(0xec),process['send']({'telegrammsg':_0x5899fc},_0x677b9=>{});}async function sendPortfolioTelegram(){const _0x1f9558=_0x3015fe;if(!coinsLoaded){process[_0x1f9558(0x17e)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4097f3=>{});return;}let _0x53b971='';if(config[_0x1f9558(0x135)])_0x53b971=_0x1f9558(0xf3)+config[_0x1f9558(0x112)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x53b971=_0x1f9558(0x118)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x53b971+=_0x1f9558(0xe0),_0x53b971+='-------------------------------\x0a',_0x53b971+=_0x1f9558(0x193),_0x53b971+='-------------------------------\x0a',currentCoins[_0x1f9558(0xf5)](_0x4ce186=>{const _0xcfe3f5=_0x1f9558;_0x53b971+=_0x4ce186[_0xcfe3f5(0x230)]['padEnd'](0x7)+'|\x20'+formatPad(_0x4ce186['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x4ce186[_0xcfe3f5(0xcb)],0x2,0x6)+'|\x20'+formatPad(_0x4ce186[_0xcfe3f5(0x121)]*0x64,0x2,0x6)+'\x0a';}),_0x53b971+=_0x1f9558(0xec),process[_0x1f9558(0x17e)]({'telegrammsg':_0x53b971},_0x5729b6=>{});}function formatPad(_0x461426,_0x27588e,_0x49df19){const _0x530b37=_0x3015fe,_0x2bbb10=formatResultString(_0x461426,_0x27588e);return _0x2bbb10?_0x2bbb10[_0x530b37(0x1d7)](_0x49df19):''[_0x530b37(0x1d7)](_0x49df19);}function logHistory(_0x2222df,_0x222cfd,_0x18f4ea=''){const _0x1406ff=_0x3015fe;let _0x10c542={'time':getTimeStamp(),'type':_0x2222df,'event':_0x222cfd};dbLogs[_0x1406ff(0x10a)](_0x1406ff(0x20d))['push'](_0x10c542)['write']();if(_0x18f4ea=='')_0x18f4ea=_0x222cfd;proxyEmit(_0x1406ff(0x1be),{'log':_0x10c542,'summary':_0x18f4ea}),process[_0x1406ff(0x17e)]({'telegram':{..._0x10c542,'botname':config['botname'],'showname':config[_0x1406ff(0x135)]}},_0x191da5=>{}),logger[_0x1406ff(0x138)](''+_0x10c542[_0x1406ff(0x1be)]);}function emitHistory(_0x5c56c6={}){const _0x529a89=_0x3015fe;Object['keys'](_0x5c56c6)[_0x529a89(0x1a2)]==0x0&&(_0x5c56c6={'type':[_0x529a89(0x1b0),_0x529a89(0x1be)],'event':'','page':0x1});if(_0x5c56c6[_0x529a89(0x105)][_0x529a89(0x220)](_0x529a89(0x1be)))_0x5c56c6['type'][_0x529a89(0x1b2)](_0x5c56c6['type'][_0x529a89(0x154)](_0x529a89(0x1be)),0x1,_0x529a89(0x1b3),_0x529a89(0x1d6),_0x529a89(0x181));if(dbLogs[_0x529a89(0x14a)](_0x529a89(0x20d))[_0x529a89(0x242)]()){let _0x4d9e48=dbLogs[_0x529a89(0x10a)](_0x529a89(0x20d))[_0x529a89(0x1c0)](_0x371f80=>{const _0x32fe63=_0x529a89;if(_0x5c56c6[_0x32fe63(0x105)]['length']==0x0)return![];else return _0x5c56c6[_0x32fe63(0x105)]['includes'](_0x371f80['type']);})['filter'](_0xb126a9=>{const _0x19137d=_0x529a89;if(_0x5c56c6[_0x19137d(0x1be)]=='')return!![];else return _0xb126a9[_0x19137d(0x1be)][_0x19137d(0x159)]()['includes'](_0x5c56c6[_0x19137d(0x1be)][_0x19137d(0x159)]());})['sortBy'](_0x529a89(0x1c3)),_0x466f91=_0x4d9e48[_0x529a89(0x242)]()[_0x529a89(0x1a2)];_0x4d9e48=_0x4d9e48[_0x529a89(0x20b)]()[_0x529a89(0x11d)]((_0x5c56c6[_0x529a89(0x1f9)]-0x1)*logPageSize,_0x5c56c6[_0x529a89(0x1f9)]*logPageSize-0x1)[_0x529a89(0x20b)]()[_0x529a89(0x242)](),proxyEmit(_0x529a89(0x12b),{'logs':_0x4d9e48,'total':_0x466f91});}else proxyEmit(_0x529a89(0x12b),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5d17bb){const _0x2812a5=_0x3015fe;if(dbLogs[_0x2812a5(0x14a)]('logs')[_0x2812a5(0x242)]()){const _0x168e26=dbLogs['get'](_0x2812a5(0x20d))[_0x2812a5(0x22f)](_0x2812a5(0x1c3))[_0x2812a5(0x1c0)](_0x1dc8e4=>{const _0x250635=_0x2812a5;return _0x1dc8e4['type']==_0x250635(0x1b0);})['value']();dbLogs[_0x2812a5(0x10a)](_0x2812a5(0x20d))[_0x2812a5(0xe3)]()[_0x2812a5(0xed)](),dbLogs[_0x2812a5(0x10a)](_0x2812a5(0x20d))[_0x2812a5(0x1b1)](_0x168e26)['write'](),emitHistory(_0x5d17bb);}}async function pauseBot(_0xf0b308=''){const _0x599631=_0x3015fe,_0x243972=new Date()[_0x599631(0x136)]();if(!lastErrorShown||_0x243972-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x243972;!lastBotPause?(lastBotPause=_0x243972,consecutivePauses=0x1):(_0x243972-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x599631(0x17e)]({'stop':_0x599631(0x110)},_0x8a44db=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x599631(0x136)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xf0b308)_0xf0b308+='\x20|\x20';logHistory(_0x599631(0x1b3),_0xf0b308+_0x599631(0x1f5)+pauseBotInterval/0xea60+_0x599631(0x142)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x28cffc=_0x3015fe;process['send']({'stop':_0x28cffc(0x1c5)},_0x1c3e07=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3f2a7b,_0x8fdc05){const _0x500da9=_0x3015fe;if(_0x3f2a7b[_0x500da9(0x1d3)]()[_0x500da9(0x220)](_0x500da9(0x1c1)))return logHistory(_0x500da9(0x1b3),config[_0x500da9(0x21a)]+_0x500da9(0x227)),![];else{if(_0x3f2a7b['toString']()[_0x500da9(0x220)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x500da9(0x1b3),config[_0x500da9(0x21a)]+_0x500da9(0x232)),![];else{if(_0x3f2a7b['toString']()['includes']('AuthenticationError'))return logHistory('error',config['exchange']+_0x500da9(0x1bc)),logHistory(_0x500da9(0x1b3),_0x500da9(0x195)),![];else await handleError(_0x3f2a7b,_0x8fdc05);}}}async function handleError(_0x56a5da,_0x2b8ecb,_0x34c21b=''){const _0xb64d59=_0x3015fe,_0x12b5ae=config[_0xb64d59(0x21a)]||'Exchange';if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x1a5))||_0x56a5da['toString']()['includes'](_0xb64d59(0x246)))await pauseBot(config['exchange']+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0xd3))||_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x141)))await pauseBot(config[_0xb64d59(0x21a)]+_0xb64d59(0x16d));else{if(_0x56a5da['toString']()[_0xb64d59(0x220)](_0xb64d59(0x1bf)))await pauseBot(config['exchange']+_0xb64d59(0xe1));else{if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x17f)))await pauseBot(config[_0xb64d59(0x21a)]+_0xb64d59(0x166));else{if(_0x56a5da['toString']()[_0xb64d59(0x220)]('NetworkError'))logger[_0xb64d59(0x21c)](_0xb64d59(0x157),_0x56a5da),await pauseBot(config['exchange']+_0xb64d59(0x234));else{if(_0x56a5da['toString']()['includes'](_0xb64d59(0x180)))logHistory(_0xb64d59(0x1b3),_0x2b8ecb+_0xb64d59(0xe4)),logHistory('error',_0xb64d59(0x22a)),await killBot();else{if(_0x56a5da[_0xb64d59(0x1d3)]()['includes']('InvalidNonce'))logHistory('error',_0x2b8ecb+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0xb64d59(0x1b3),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x56a5da['toString']()[_0xb64d59(0x220)](_0xb64d59(0x1c1)))logHistory(_0xb64d59(0x1b3),_0x2b8ecb+_0xb64d59(0x189)+config[_0xb64d59(0x21a)]+_0xb64d59(0x203)),logHistory(_0xb64d59(0x1b3),_0xb64d59(0x22a)),await killBot();else{if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x1cb)))logHistory(_0xb64d59(0x1b3),_0x2b8ecb+_0xb64d59(0x189)+config['exchange']+_0xb64d59(0x250)),logHistory(_0xb64d59(0x1b3),_0xb64d59(0x22a)),await killBot();else{if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)]('AuthenticationError'))logHistory(_0xb64d59(0x1b3),_0x2b8ecb+_0xb64d59(0x189)+config[_0xb64d59(0x21a)]+_0xb64d59(0x134)),logHistory(_0xb64d59(0x1b3),_0xb64d59(0x22a)),await killBot();else{if(_0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x19b)))logHistory('error',_0x2b8ecb+_0xb64d59(0x1e2)+_0x34c21b);else _0x56a5da[_0xb64d59(0x1d3)]()[_0xb64d59(0x220)](_0xb64d59(0x1cc))?(logger[_0xb64d59(0x21c)](_0xb64d59(0xf4),_0x56a5da),logHistory(_0xb64d59(0x1b3),_0x2b8ecb+_0xb64d59(0x189)+config[_0xb64d59(0x21a)]+_0xb64d59(0x19c))):(logger[_0xb64d59(0x138)](_0x2b8ecb+_0xb64d59(0x1a7),_0x56a5da),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}}}function formatResult(_0x4a08e6,_0x3872b5){const _0xe5ed9a=_0x3015fe;return parseFloat(_0x4a08e6[_0xe5ed9a(0x222)](_0x3872b5));}function formatResultTruncate(_0x2adeea,_0x5d58cc){const _0x1b4c5c=_0x3015fe;let _0x32386b=formatResultString(_0x2adeea,0xa),_0x299930=_0x32386b[_0x1b4c5c(0x154)]('.');return _0x299930!=-0x1&&(_0x32386b=_0x32386b[_0x1b4c5c(0x11d)](0x0,_0x299930+_0x5d58cc+0x1)),Number(_0x32386b);}function formatResultString(_0x542ac0,_0xc571f8){const _0x256263=_0x3015fe;let _0x384dbd;if(!(''+_0x542ac0)[_0x256263(0x220)]('e'))_0x384dbd=+(Math[_0x256263(0x1ff)](_0x542ac0+'e+'+_0xc571f8)+'e-'+_0xc571f8);else{let _0x462e7c=(''+_0x542ac0)[_0x256263(0x107)]('e'),_0x456630='';+_0x462e7c[0x1]+_0xc571f8>0x0&&(_0x456630='+'),_0x384dbd=+(Math['round'](+_0x462e7c[0x0]+'e'+_0x456630+(+_0x462e7c[0x1]+_0xc571f8))+'e-'+_0xc571f8);}return Number(_0x384dbd)[_0x256263(0x222)](_0xc571f8);}function getServerTime(){const _0x19bf3b=_0x3015fe,_0xeee77f=new Date();return _0xeee77f['getFullYear']()+'/'+(_0xeee77f[_0x19bf3b(0x20e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0xeee77f[_0x19bf3b(0xf7)]()[_0x19bf3b(0x1d3)]()[_0x19bf3b(0x1d7)](0x2,'0')+'\x20'+_0xeee77f[_0x19bf3b(0x1b5)]()[_0x19bf3b(0x1d3)]()[_0x19bf3b(0x1d7)](0x2,'0')+':'+_0xeee77f[_0x19bf3b(0x1f7)]()[_0x19bf3b(0x1d3)]()[_0x19bf3b(0x1d7)](0x2,'0')+':'+_0xeee77f[_0x19bf3b(0x1a3)]()[_0x19bf3b(0x1d3)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x279aa1=_0x3015fe,_0x4f14fa=shiftedTime();return _0x4f14fa[_0x279aa1(0xd9)]()+'/'+(_0x4f14fa['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4f14fa[_0x279aa1(0xf7)]()[_0x279aa1(0x1d3)]()[_0x279aa1(0x1d7)](0x2,'0')+'\x20'+_0x4f14fa['getHours']()[_0x279aa1(0x1d3)]()['padStart'](0x2,'0')+':'+_0x4f14fa[_0x279aa1(0x1f7)]()[_0x279aa1(0x1d3)]()['padStart'](0x2,'0')+':'+_0x4f14fa[_0x279aa1(0x1a3)]()['toString']()[_0x279aa1(0x1d7)](0x2,'0');}function getDate(){const _0x5887b3=_0x3015fe,_0x442e45=shiftedTime();return _0x442e45[_0x5887b3(0xd9)]()+'/'+(_0x442e45[_0x5887b3(0x20e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x442e45['getDate']()[_0x5887b3(0x1d3)]()['padStart'](0x2,'0');}function getHour(){const _0x13e0ce=_0x3015fe,_0x625898=shiftedTime();return _0x625898['getHours']()[_0x13e0ce(0x1d3)]()['padStart'](0x2,'0');}function sleep(_0x113c54){return new Promise(_0x3cd330=>setTimeout(_0x3cd330,_0x113c54));}function shiftedTime(){const _0x5c98df=_0x3015fe,_0x369b3f=new Date();let _0x5f06e1=_0x369b3f;if(config&&config['timeshift']!==0x0)_0x5f06e1=fns[_0x5c98df(0xfc)](_0x369b3f,{'hours':config['timeshift']});return _0x5f06e1;}function timer(_0x37a908){const _0x2790a3=_0x3015fe,_0x3d49f5=new Date();!lasttime?console[_0x2790a3(0x24f)](getTimeStamp()+':\x20timer\x20>',_0x37a908,_0x3d49f5):console['log'](getTimeStamp()+_0x2790a3(0x204),_0x37a908,(_0x3d49f5-lasttime)/0x3e8),lasttime=_0x3d49f5;}