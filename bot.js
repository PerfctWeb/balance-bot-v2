const _0x182ee2=_0x3a20;(function(_0x3ab9ad,_0x119bf4){const _0xeb28fc=_0x3a20,_0x1f8215=_0x3ab9ad();while(!![]){try{const _0x1a294a=-parseInt(_0xeb28fc(0x254))/0x1+parseInt(_0xeb28fc(0x1af))/0x2*(parseInt(_0xeb28fc(0x1ac))/0x3)+parseInt(_0xeb28fc(0x1c8))/0x4*(-parseInt(_0xeb28fc(0x230))/0x5)+-parseInt(_0xeb28fc(0x239))/0x6*(parseInt(_0xeb28fc(0x1bd))/0x7)+-parseInt(_0xeb28fc(0x245))/0x8+parseInt(_0xeb28fc(0x204))/0x9*(parseInt(_0xeb28fc(0x1b5))/0xa)+parseInt(_0xeb28fc(0x266))/0xb*(parseInt(_0xeb28fc(0x183))/0xc);if(_0x1a294a===_0x119bf4)break;else _0x1f8215['push'](_0x1f8215['shift']());}catch(_0x140620){_0x1f8215['push'](_0x1f8215['shift']());}}}(_0x14c8,0x7dee9));const _0xba7f8a=function(){let _0x3c75a6=!![];return function(_0xbd3b65,_0x3b6d76){const _0x578b5b=_0x3c75a6?function(){if(_0x3b6d76){const _0x1d2b3b=_0x3b6d76['apply'](_0xbd3b65,arguments);return _0x3b6d76=null,_0x1d2b3b;}}:function(){};return _0x3c75a6=![],_0x578b5b;};}(),_0x4dfdf5=_0xba7f8a(this,function(){const _0x4cf2f6=_0x3a20;return _0x4dfdf5[_0x4cf2f6(0x237)]()['search'](_0x4cf2f6(0x177))[_0x4cf2f6(0x237)]()[_0x4cf2f6(0x205)](_0x4dfdf5)['search'](_0x4cf2f6(0x177));});_0x4dfdf5();'use strict';const ccxt=require(_0x182ee2(0x1d0)),low=require('lowdb'),FileSync=require(_0x182ee2(0x1e1)),fs=require('fs'),fns=require(_0x182ee2(0x26b)),{WebsocketClient,DefaultLogger}=require(_0x182ee2(0x1aa)),Crypt=require(_0x182ee2(0x26f))[_0x182ee2(0x1b6)];let exchange,wsClient;global[_0x182ee2(0x26c)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x182ee2(0x249))[_0x182ee2(0x171)],botID=process[_0x182ee2(0x243)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x182ee2(0x235)](botID))return console[_0x182ee2(0x211)](_0x182ee2(0x22c)+botID+_0x182ee2(0x1bb)),process[_0x182ee2(0x173)](0x1);const userID=process[_0x182ee2(0x243)][0x3]||'',configpath=userID?_0x182ee2(0x21e)+userID+'/':_0x182ee2(0x21e);!fs[_0x182ee2(0x1a5)](configpath)&&fs[_0x182ee2(0x21c)](configpath);const configfile=configpath+_0x182ee2(0x20d)+botID+_0x182ee2(0x1e9),logfile=configpath+_0x182ee2(0x20d)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x182ee2(0x17e),coinresultsfile=configpath+_0x182ee2(0x20d)+botID+_0x182ee2(0x187),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x182ee2(0x219),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x182ee2(0x172)]({'logs':[]})[_0x182ee2(0x203)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x182ee2(0x172)]({'data':[]})[_0x182ee2(0x203)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x182ee2(0x203)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x182ee2(0x172)]({'coins':[]})[_0x182ee2(0x203)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x182ee2(0x227),'symbol':_0x182ee2(0x175)},'usd':{'coin':_0x182ee2(0x1d9),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3b0c4b)=>{},'debug':(..._0x4d54c9)=>{},'notice':(..._0x123248)=>{},'info':(..._0x6e25ab)=>{},'warning':(..._0x212ace)=>{},'error':async function(..._0x22b441){const _0x3d4483=_0x182ee2,_0x1463be=new Date()[_0x3d4483(0x24a)]();if(!lastErrorShown||_0x1463be-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3d4483(0x24a)](),logHistory(_0x3d4483(0x265),_0x3d4483(0x1b2)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x58da69='';if(_0x22b441[0x0])_0x58da69+=_0x22b441[0x0];if(_0x22b441[0x1]&&_0x22b441[0x1][_0x3d4483(0x265)]&&_0x22b441[0x1]['error']['message'])_0x58da69+='\x20-\x20'+_0x22b441[0x1][_0x3d4483(0x265)][_0x3d4483(0x1c0)];logging(_0x3d4483(0x1b2)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x58da69),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x182ee2(0x1ba),'rsaStandard':_0x182ee2(0x1fd)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x182ee2(0x1ab)]!=config[_0x182ee2(0x1ab)]&&updateTimeshift(settings[_0x182ee2(0x1ab)]);process[_0x182ee2(0x257)]({'started':_0x182ee2(0x208)},_0x53570e=>{}),initializeProcessListeners();function proxyEmit(_0x299468,_0x338447=null){const _0x2fd556=_0x182ee2;process[_0x2fd556(0x257)]({'function':_0x299468,'args':_0x338447},_0x58df01=>{});}function initializeProcessListeners(){const _0x1ee4d3=_0x182ee2;process['on'](_0x1ee4d3(0x1c0),_0x29cf14=>{const _0x491aa8=_0x1ee4d3;switch(Object[_0x491aa8(0x225)](_0x29cf14)[0x0]){case _0x491aa8(0x1ab):_0x29cf14[_0x491aa8(0x1ab)]!=undefined&&(settings[_0x491aa8(0x1ab)]=_0x29cf14['timeshift'],updateTimeshift(settings[_0x491aa8(0x1ab)]));break;case _0x491aa8(0x238):switch(_0x29cf14['function']){case'initclient':initclient();break;case _0x491aa8(0x1e4):emitHistory(_0x29cf14[_0x491aa8(0x199)]);break;case _0x491aa8(0x179):getPortfolio(_0x29cf14[_0x491aa8(0x199)]);break;case'storeConfiguration':storeConfiguration(_0x29cf14[_0x491aa8(0x199)]);break;case'storeHeadless':storeHeadless(_0x29cf14[_0x491aa8(0x199)]);break;case _0x491aa8(0x242):getStartingBalances();break;case'placeOrder':placeOrder(_0x29cf14[_0x491aa8(0x199)]);break;case _0x491aa8(0x1c9):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1d282a=_0x182ee2;if(pidBalances)clearTimeout(pidBalances);if(config[_0x1d282a(0x1d5)]!=''){await initExchange(config['apiKey'],config[_0x1d282a(0x241)]);let _0x294f02=await loadSymbols();_0x294f02&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3e46d5,_0x24304e){const _0xe7534e=_0x182ee2,_0x43bd4c=ccxt[config[_0xe7534e(0x1b1)]];let _0x50c1b9;switch(config[_0xe7534e(0x1b1)]){case _0xe7534e(0x1aa):_0x50c1b9=_0xe7534e(0x19d);break;case'binanceus':_0x50c1b9='wss://stream.binance.us:9443';break;default:_0x50c1b9=_0xe7534e(0x19d);}exchange=new _0x43bd4c({'apiKey':_0x3e46d5,'secret':_0x24304e,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3e46d5,'api_secret':_0x24304e,'beautify':!![],'wsUrl':_0x50c1b9},logger),config[_0xe7534e(0x1b1)]==_0xe7534e(0x1ea)&&(stablecoins={'eur':{'coin':_0xe7534e(0x1eb),'symbol':_0xe7534e(0x189)},'usd':{'coin':_0xe7534e(0x1d9),'symbol':_0xe7534e(0x195)}});}async function loadSymbols(){const _0x112cf2=_0x182ee2;let _0x401b41;try{markets=await exchange['loadMarkets']();const _0x17de91=[_0x112cf2(0x229),'HOT/BTC','HOT/EUR'];allSymbols=exchange[_0x112cf2(0x262)][_0x112cf2(0x272)](_0x4fa80c=>{const _0x16ba9e=_0x112cf2;let _0x4c5ef3=![];return _0x17de91[_0x16ba9e(0x194)](_0x5cea65=>{const _0x3a361a=_0x16ba9e;if(_0x4fa80c[_0x3a361a(0x16f)](_0x5cea65))_0x4c5ef3=!![];}),!_0x4c5ef3;}),_0x401b41=!![];}catch(_0x5cae71){await handleError(_0x5cae71,_0x112cf2(0x221)),_0x401b41=![];}return _0x401b41;}async function initbot(){const _0x16b3d1=_0x182ee2;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x53ddd6=dbCoinResults['get'](_0x16b3d1(0x223))['value']();if(_0x53ddd6['length']==0x0)await resetCoinResults();}async function initclient(){const _0x59eecc=_0x182ee2;proxyEmit(_0x59eecc(0x275),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x59eecc(0x1d4),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x1bf484=_0x182ee2;wsinitialized=![];ws1&&(ws1['forEach'](_0x2deddc=>{const _0x273940=_0x3a20;try{wsClient[_0x273940(0x217)](_0x2deddc);}catch(_0x38787b){}}),ws1=[]);if(ws2){try{wsClient[_0x1bf484(0x217)](ws2);}catch(_0xa2b8c7){}ws2=null;}}function _0x14c8(){const _0x4f4f7f=['AuthenticationError','wss://stream.binance.com:9443','cancelOrder()','subscribeSpotKline','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','Market','orderStatus','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','existsSync','currency','limit-high','decrypt','fee','binance','timeshift','27sKkdEm','Pausing\x20bot\x20for\x205\x20minutes\x20(','isArray','173046nFBZJo','fetchBalance','exchange','WebSockets(','OrderNotFound','coin','388770OFYRbt','Crypt','shift','excluded','accumulatedQuantity','sha256',',\x20must\x20be\x20a\x203\x20digit\x20number','sort','42CrQoJn','sortBy','milliseconds','message','initws()','spot','fees','type','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','\x20minutes\x20-\x20balancing\x20resumed','Performance\x20recreation\x20completed\x20successfully','8vOgJfS','cancelLoading','secure','recreateHistory()','privateKey','Order:\x20','parseISO','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ccxt','starting-balances','cost','InvalidNonce','balances','apiKey','getDate','placeOrder()','filled','BTCUSDT','BTC','value','Binance\x20API\x20key\x20is\x20invalid','getHours','\x20order:\x20','timeout','get','lowdb/adapters/FileSync','datetime','valid','emitHistory','executionReport','split','number','fetchOHLCV','-config.json','binanceus','BTCBUSD','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','usd','startdate','InsufficientFunds','breakeven','limit-low','************','EUR','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','threshold','Limit\x20(high-margin)','toFixed','performance','remainingSymbols','amount','side','Order(s)\x20filled\x20-\x20balancing\x20resumed','RSA-OAEP','orderType','trade','price','yyyy/MM/dd\x20HH:mm:ss','orderId','write','45Gfpqam','constructor','getMonth','userData','running','find','botname','portfolio','splice','bot-','RequestTimeout','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','headless','log','limit','bid','getPortfolio()','Unfilled\x20order(s)\x20canceled\x20after\x20','round','closeWs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','bb-secure.json','Binance\x20API\x20secret\x20is\x20invalid','startprice','mkdirSync','Invalid\x20quantity','./config/','limits','ordertype','loadSymbols()','cancel','coins','bot','keys','coinamount','BTCEUR','outboundAccountPosition','DAI/','wsKey','page','Error:\x20Invalid\x20argument\x20','delta','logs','remove','1878565LfRxDJ','reduce','eventType','length','Order(s)\x20not\x20validated\x20after\x20','test','reconnected','toString','function','237702Vjxkhd','event','assign','time','sells','USDC','Order(s)\x20validated\x20-\x20balancing\x20resumed','realized','apiSecret','getStartingBalances','argv','reverse','4785784PVAtqr','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','event-history','getMinutes','./version.json','getTime','order','getFullYear','API-key\x20format\x20invalid','cooldown','parse','formattedMessage','has','close','\x20orders\x20in\x20less\x20than\x20','715349NwewsC','createOrder','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','send','kill','progress','total','eur','abs','format','fromCodePoint','buy','distribution','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','symbols','success','entries','error','8371pBinGf','asset','BUSD','Order\x20filled:\x20','padStart','date-fns','ticker','Order\x20amount\x20is\x20invalid:\x20','sell','hybrid-crypto-js','symbol','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','filter','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','emojisell','configuration','settings','add','enabled','replace','market','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','last','kline','includes','recreate','version','defaults','exit','showname','BTC/EUR','startnumber','(((.+)+)+)+$','DDoSProtection','getPortfolio','FILLED','data','timestamp','toLowerCase','-performance.json','getCoins()','yyyy/MM/dd','basecoin','min','29100CnyEZn','emojibuy','fetchOrders','getFiat()','-results.json','target','BTC/BUSD','max','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','offset','differenceInSeconds','buys','date','botID','fetchTickers','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','configuration-stored','forEach','BTC/USDT','\x20>\x20','BNB','map','args','restart','push'];_0x14c8=function(){return _0x4f4f7f;};return _0x14c8();}async function initws(){const _0x47aa97=_0x182ee2;cleanws();let _0x18698c=[];currentCoins[_0x47aa97(0x194)](_0x36ebbd=>{const _0x3a1768=_0x47aa97;if(_0x36ebbd[_0x3a1768(0x1b4)]!=config[_0x3a1768(0x181)])_0x18698c[_0x3a1768(0x19b)](noslash(_0x36ebbd[_0x3a1768(0x270)]));});if(!_0x18698c[_0x47aa97(0x16f)](stablecoins[_0x47aa97(0x25b)][_0x47aa97(0x1b4)]))_0x18698c[_0x47aa97(0x19b)](stablecoins[_0x47aa97(0x25b)][_0x47aa97(0x1b4)]);if(!_0x18698c[_0x47aa97(0x16f)](stablecoins['usd'][_0x47aa97(0x1b4)]))_0x18698c[_0x47aa97(0x19b)](stablecoins[_0x47aa97(0x1ed)][_0x47aa97(0x1b4)]);if(!_0x18698c['includes'](_0x47aa97(0x197)+config[_0x47aa97(0x181)]))_0x18698c[_0x47aa97(0x19b)](_0x47aa97(0x197)+config[_0x47aa97(0x181)]);try{_0x18698c['forEach']((_0x2aeb6f,_0x538562)=>{const _0x2c451f=_0x47aa97;ws1[_0x538562]=wsClient[_0x2c451f(0x19f)](_0x2aeb6f,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x47aa97(0x250),_0x50bb81=>{const _0x5ecaf7=_0x47aa97;if(!Array[_0x5ecaf7(0x1ae)](_0x50bb81)&&!_0x50bb81['wsKey'][_0x5ecaf7(0x16f)](_0x5ecaf7(0x207))){if(_0x50bb81[_0x5ecaf7(0x232)]===_0x5ecaf7(0x16e)){global[_0x5ecaf7(0x26c)][_0x50bb81[_0x5ecaf7(0x16e)][_0x5ecaf7(0x270)]]=_0x50bb81['kline'][_0x5ecaf7(0x252)];return;}}else{if(!Array['isArray'](_0x50bb81)&&_0x50bb81[_0x5ecaf7(0x22a)][_0x5ecaf7(0x16f)](_0x5ecaf7(0x207))){if(_0x50bb81['wsMarket']['includes'](_0x5ecaf7(0x1c2))){updateNumberCoins(_0x50bb81);return;}}}}),wsClient['on'](_0x47aa97(0x236),async _0x155fa8=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0xcdaeaa){await handleError(_0xcdaeaa,_0x47aa97(0x1c1));}let _0x5f0fb4,_0x165a8d=0x0;loading[_0x47aa97(0x1f9)]=[];let _0x47a27b=0x0;currentCoins[_0x47aa97(0x194)](_0x1cdcb5=>{const _0xad3aab=_0x47aa97;if(_0x1cdcb5['coin']!=config[_0xad3aab(0x181)])loading[_0xad3aab(0x1f9)][_0xad3aab(0x19b)](_0x1cdcb5[_0xad3aab(0x270)]);}),loadingCanceled=![];while(_0x5f0fb4!=currentCoins[_0x47aa97(0x233)]-0x1){_0x5f0fb4=0x0,currentCoins[_0x47aa97(0x194)](_0x513e10=>{const _0x5ab226=_0x47aa97;_0x513e10[_0x5ab226(0x1b4)]!=config[_0x5ab226(0x181)]&&global[_0x5ab226(0x26c)][noslash(_0x513e10['symbol'])]&&(loading[_0x5ab226(0x1f9)]=loading[_0x5ab226(0x1f9)][_0x5ab226(0x272)](_0x3019a2=>_0x3019a2!=_0x513e10[_0x5ab226(0x270)]),_0x5f0fb4++);}),loading[_0x47aa97(0x259)]=Math[_0x47aa97(0x216)](_0x5f0fb4/(currentCoins['length']-0x1)*0x64);_0x47a27b>0x1e*0x5&&(loading[_0x47aa97(0x1df)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x47aa97(0x222)]=!![],emitLoadingProgress();break;}else _0x5f0fb4!=_0x165a8d&&(_0x165a8d=_0x5f0fb4,emitLoadingProgress()),_0x47a27b++,await sleep(0xc8);}if(_0x5f0fb4==currentCoins[_0x47aa97(0x233)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x71159b=_0x182ee2;let _0x2df020=0x0,_0x51d675=0x0;try{_0x2df020=global['ticker'][stablecoins[_0x71159b(0x25b)]['coin']],_0x51d675=global['ticker'][stablecoins['usd'][_0x71159b(0x1b4)]];}catch(_0x11f2c9){await handleError(_0x11f2c9,_0x71159b(0x186));}return{'eur':Number(_0x2df020),'usd':Number(_0x51d675)};}async function setStartDatePerformance(_0x3644c3){const _0x3e88d4=_0x182ee2,_0x1ea5db=fns[_0x3e88d4(0x25d)](new Date(_0x3644c3[_0x3e88d4(0x1ee)]),'yyyy/MM/dd');let _0x33f5d3=[];_0x33f5d3[stablecoins['eur'][_0x3e88d4(0x1b4)]]=await getCloses(stablecoins[_0x3e88d4(0x25b)]['symbol'],new Date(_0x3644c3[_0x3e88d4(0x1ee)]),0x1),_0x33f5d3[stablecoins[_0x3e88d4(0x1ed)][_0x3e88d4(0x1b4)]]=await getCloses(stablecoins[_0x3e88d4(0x1ed)][_0x3e88d4(0x270)],new Date(_0x3644c3[_0x3e88d4(0x1ee)]),0x1);let _0x3bbd9d,_0x4aa2bc=[];_0x3644c3[_0x3e88d4(0x20b)]['forEach'](_0x9a9d40=>{const _0x1d3886=_0x3e88d4;!_0x9a9d40[_0x1d3886(0x1b8)]&&_0x4aa2bc[_0x1d3886(0x19b)]({'coin':_0x9a9d40[_0x1d3886(0x1b4)],'number':_0x9a9d40[_0x1d3886(0x176)],'price':_0x9a9d40[_0x1d3886(0x21b)]});}),_0x3bbd9d={'date':_0x1ea5db,'eur':_0x33f5d3[stablecoins[_0x3e88d4(0x25b)][_0x3e88d4(0x1b4)]][0x0],'usd':_0x33f5d3[stablecoins[_0x3e88d4(0x1ed)][_0x3e88d4(0x1b4)]][0x0],'coins':_0x4aa2bc};let _0x40c9b4=dbPerformance[_0x3e88d4(0x1e0)](_0x3e88d4(0x17b))['find']({'date':_0x1ea5db})[_0x3e88d4(0x1db)]();_0x40c9b4?dbPerformance['get'](_0x3e88d4(0x17b))[_0x3e88d4(0x209)]({'date':_0x1ea5db})[_0x3e88d4(0x23b)](_0x3bbd9d)[_0x3e88d4(0x203)]():dbPerformance['get'](_0x3e88d4(0x17b))['push'](_0x3bbd9d)[_0x3e88d4(0x203)](),_0x40c9b4=dbPerformance[_0x3e88d4(0x1e0)]('data')[_0x3e88d4(0x1be)]('date')['value'](),_0x40c9b4[_0x3e88d4(0x194)](_0x3ef15b=>{const _0x7a1f4c=_0x3e88d4;_0x3ef15b[_0x7a1f4c(0x18f)]<_0x1ea5db&&dbPerformance[_0x7a1f4c(0x1e0)](_0x7a1f4c(0x17b))[_0x7a1f4c(0x22f)]({'date':_0x3ef15b[_0x7a1f4c(0x18f)]})[_0x7a1f4c(0x203)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x35f29a){const _0x88a07=_0x182ee2;let _0x2e4254,_0x158483=[];logHistory(_0x88a07(0x263),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x35f29a[_0x88a07(0x20b)][_0x88a07(0x194)](_0x39f691=>{const _0x395de4=_0x88a07;if(_0x39f691[_0x395de4(0x1b4)]!=config[_0x395de4(0x181)]&&!_0x39f691['excluded'])_0x158483[_0x395de4(0x19b)]({'coin':_0x39f691[_0x395de4(0x1b4)],'symbol':_0x39f691[_0x395de4(0x270)]});});let _0x47f63d=[];try{const _0x183b96=fns[_0x88a07(0x25d)](fns['parseISO'](_0x35f29a[_0x88a07(0x1ee)][_0x88a07(0x279)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x52fee5 of _0x158483){if(_0x52fee5[_0x88a07(0x1b4)]!=config[_0x88a07(0x181)])_0x2e4254=await exchange[_0x88a07(0x185)](_0x52fee5['symbol'],Date[_0x88a07(0x24f)](_0x183b96));_0x2e4254[_0x88a07(0x194)](_0x51bc66=>{const _0x1045d6=_0x88a07,_0x5a64bb=_0x52fee5[_0x1045d6(0x270)][_0x1045d6(0x16f)](config[_0x1045d6(0x181)]+'/'),_0x1386e7=fns[_0x1045d6(0x25d)](fns[_0x1045d6(0x1ce)](_0x51bc66[_0x1045d6(0x1e2)]),_0x1045d6(0x201)),_0x43ce1b=fns[_0x1045d6(0x25d)](fns[_0x1045d6(0x1ce)](_0x51bc66[_0x1045d6(0x1e2)]),'yyyy/MM/dd');let _0xc9af6e;if(_0x51bc66['side']==_0x1045d6(0x25f)&&_0x5a64bb==![])_0xc9af6e=_0x51bc66[_0x1045d6(0x1fa)];if(_0x51bc66[_0x1045d6(0x1fb)]==_0x1045d6(0x25f)&&_0x5a64bb==!![])_0xc9af6e=-_0x51bc66['amount']*_0x51bc66['price'];if(_0x51bc66[_0x1045d6(0x1fb)]==_0x1045d6(0x26e)&&_0x5a64bb==![])_0xc9af6e=-_0x51bc66['amount'];if(_0x51bc66[_0x1045d6(0x1fb)]==_0x1045d6(0x26e)&&_0x5a64bb==!![])_0xc9af6e=_0x51bc66['amount']*_0x51bc66[_0x1045d6(0x200)];_0x47f63d[_0x1045d6(0x19b)]({'timestamp':_0x1386e7,'date':_0x43ce1b,'coin':_0x52fee5[_0x1045d6(0x1b4)],'symbol':_0x52fee5[_0x1045d6(0x270)],'type':_0x51bc66[_0x1045d6(0x1c4)],'side':_0x51bc66[_0x1045d6(0x1fb)],'reverse':_0x5a64bb,'amount':formatResult(_0x51bc66['filled'],0x8),'filled':formatResult(_0x51bc66[_0x1045d6(0x1d8)],0x8),'coinamount':formatResult(_0xc9af6e,0x8),'price':formatResult(_0x51bc66[_0x1045d6(0x200)],0x8)});let _0x6b760f;if(_0x51bc66[_0x1045d6(0x1fb)]==_0x1045d6(0x25f)&&_0x5a64bb==![])_0x6b760f=-_0x51bc66[_0x1045d6(0x1fa)]*_0x51bc66[_0x1045d6(0x200)];if(_0x51bc66[_0x1045d6(0x1fb)]=='buy'&&_0x5a64bb==!![])_0x6b760f=_0x51bc66[_0x1045d6(0x1fa)];if(_0x51bc66['side']==_0x1045d6(0x26e)&&_0x5a64bb==![])_0x6b760f=_0x51bc66['amount']*_0x51bc66['price'];if(_0x51bc66[_0x1045d6(0x1fb)]==_0x1045d6(0x26e)&&_0x5a64bb==!![])_0x6b760f=-_0x51bc66[_0x1045d6(0x1fa)];_0x47f63d[_0x1045d6(0x19b)]({'date':_0x43ce1b,'coin':config[_0x1045d6(0x181)],'coinamount':formatResult(_0x6b760f,0x8)});});}_0x47f63d[_0x88a07(0x1bc)]((_0x2ccec9,_0x13c95f)=>_0x2ccec9[_0x88a07(0x17c)]>_0x13c95f['timestamp']?0x1:_0x13c95f[_0x88a07(0x17c)]>_0x2ccec9[_0x88a07(0x17c)]?-0x1:0x0),dbLogs[_0x88a07(0x1e0)](_0x88a07(0x22e))['remove']()[_0x88a07(0x203)](),_0x47f63d[_0x88a07(0x194)](_0xc9dcfd=>{const _0x54b70e=_0x88a07;let _0x5f2784;_0xc9dcfd['coin']!=config[_0x54b70e(0x181)]&&(_0x5f2784={'time':_0xc9dcfd[_0x54b70e(0x17c)],'type':_0x54b70e(0x24b),'event':_0x54b70e(0x1cd)+_0xc9dcfd[_0x54b70e(0x270)]+'\x20'+_0xc9dcfd[_0x54b70e(0x1fb)]+'\x20#'+_0xc9dcfd[_0x54b70e(0x1fa)]+'\x20@'+_0xc9dcfd['price']},dbLogs[_0x54b70e(0x1e0)](_0x54b70e(0x22e))['push'](_0x5f2784)[_0x54b70e(0x203)]());});const _0x17e116=fns['eachDayOfInterval']({'start':new Date(_0x35f29a[_0x88a07(0x1ee)]),'end':new Date()})[_0x88a07(0x198)](_0x4a7c25=>fns[_0x88a07(0x25d)](_0x4a7c25,_0x88a07(0x180)));let _0x4e78d9=[];_0x35f29a['portfolio'][_0x88a07(0x194)](_0x219b1f=>{const _0x41a3be=_0x88a07;if(!_0x219b1f[_0x41a3be(0x1b8)]){_0x4e78d9[_0x219b1f['coin']]=[];let _0xdc2135=_0x219b1f[_0x41a3be(0x176)];_0x17e116[_0x41a3be(0x194)]((_0x49304b,_0x109c1d)=>{const _0xabfcd1=_0x41a3be;let _0x510b55=_0x47f63d[_0xabfcd1(0x272)](_0x332e59=>_0x332e59[_0xabfcd1(0x1b4)]==_0x219b1f[_0xabfcd1(0x1b4)]&&_0x332e59['date']==_0x49304b);if(_0x510b55[_0xabfcd1(0x233)]!=0x0){let _0x4bcd38=_0x510b55[_0xabfcd1(0x231)]((_0x1ca41b,_0x29b9f6)=>{const _0x448dd1=_0xabfcd1;return _0x1ca41b+=_0x29b9f6[_0x448dd1(0x226)],_0x1ca41b;},0x0);_0xdc2135+=_0x4bcd38;}_0x4e78d9[_0x219b1f['coin']][_0x49304b]=_0xdc2135;});}});const _0x324914=[..._0x158483];_0x324914[_0x88a07(0x19b)]({'coin':stablecoins[_0x88a07(0x25b)]['coin'],'symbol':stablecoins[_0x88a07(0x25b)][_0x88a07(0x270)]}),_0x324914[_0x88a07(0x19b)]({'coin':stablecoins[_0x88a07(0x1ed)][_0x88a07(0x1b4)],'symbol':stablecoins['usd'][_0x88a07(0x270)]});let _0x443d04=[];for(const _0x46dd21 of _0x324914){_0x443d04[_0x46dd21[_0x88a07(0x1b4)]]=await getCloses(_0x46dd21[_0x88a07(0x270)],new Date(_0x35f29a[_0x88a07(0x1ee)]));}dbPerformance['get'](_0x88a07(0x17b))[_0x88a07(0x22f)]()[_0x88a07(0x203)](),_0x17e116['forEach']((_0x4856da,_0x1c31d8)=>{const _0x2c5d52=_0x88a07;let _0xd55f45,_0x2cdb2c=[];_0x1c31d8==0x0?(_0x35f29a[_0x2c5d52(0x20b)][_0x2c5d52(0x194)](_0x13e899=>{const _0x4b2977=_0x2c5d52;!_0x13e899[_0x4b2977(0x1b8)]&&_0x2cdb2c[_0x4b2977(0x19b)]({'coin':_0x13e899[_0x4b2977(0x1b4)],'number':_0x13e899['startnumber'],'price':_0x13e899[_0x4b2977(0x21b)]});}),_0xd55f45={'date':_0x4856da,'eur':_0x443d04[stablecoins[_0x2c5d52(0x25b)][_0x2c5d52(0x1b4)]][_0x1c31d8],'usd':_0x443d04[stablecoins[_0x2c5d52(0x1ed)][_0x2c5d52(0x1b4)]][_0x1c31d8],'coins':_0x2cdb2c}):(_0x35f29a[_0x2c5d52(0x20b)][_0x2c5d52(0x194)](_0x38e366=>{const _0x535d1d=_0x2c5d52;!_0x38e366[_0x535d1d(0x1b8)]&&_0x2cdb2c[_0x535d1d(0x19b)]({'coin':_0x38e366[_0x535d1d(0x1b4)],'number':_0x4e78d9[_0x38e366[_0x535d1d(0x1b4)]][_0x4856da],'price':_0x38e366[_0x535d1d(0x1b4)]==config['basecoin']?0x1:_0x443d04[_0x38e366[_0x535d1d(0x1b4)]][_0x1c31d8]});}),_0xd55f45={'date':_0x4856da,'eur':_0x443d04[stablecoins[_0x2c5d52(0x25b)][_0x2c5d52(0x1b4)]][_0x1c31d8],'usd':_0x443d04[stablecoins[_0x2c5d52(0x1ed)]['coin']][_0x1c31d8],'coins':_0x2cdb2c}),dbPerformance[_0x2c5d52(0x1e0)](_0x2c5d52(0x17b))['push'](_0xd55f45)[_0x2c5d52(0x203)]();}),emitPerformance(),await resetCoinResults();for(let _0x18ffbe of _0x47f63d){_0x18ffbe[_0x88a07(0x1b4)]!=config[_0x88a07(0x181)]&&await updateCoinResults(_0x18ffbe);}logHistory(_0x88a07(0x263),_0x88a07(0x1c7));}catch(_0x40b70b){await handleError(_0x40b70b,_0x88a07(0x1cb));}}async function getCloses(_0x4546f4,_0x3d71e9,_0xc1ce26=undefined){const _0x17466e=_0x182ee2,_0x18d2e2='1d';let _0x2fbdb6,_0x2b2a70;const _0x16bb79=fns['differenceInCalendarDays'](new Date(),_0x3d71e9)+0x1;try{const _0x443ebc=exchange[_0x17466e(0x1bf)]()-_0x16bb79*0x18*0xe10*0x3e8;_0x2fbdb6=await exchange[_0x17466e(0x1e8)](_0x4546f4,_0x18d2e2,_0x443ebc,_0xc1ce26),_0x2b2a70=await exchange[_0x17466e(0x191)](_0x4546f4);}catch(_0x1f0f83){await handleError(_0x1f0f83,'getCloses()');}let _0x50e6c6=ohlcvToCloses(_0x2fbdb6);return _0x50e6c6[_0x17466e(0x19b)](_0x2b2a70[_0x4546f4][_0x17466e(0x16d)]),_0x50e6c6;}function ohlcvToCloses(_0x158236){let _0x42c9a4=[];return _0x158236['forEach'](function(_0x4bd910){const _0x44ab96=_0x3a20;_0x42c9a4[_0x44ab96(0x19b)](_0x4bd910[0x4]);}),_0x42c9a4;}function getConfiguration(_0x530f26){const _0x4986b7=_0x182ee2;let _0x28eef5=dbConfig[_0x4986b7(0x1e0)]('bot')[_0x4986b7(0x209)]({'botID':_0x530f26})[_0x4986b7(0x1db)]();if(_0x28eef5){let _0x58cd40=![];!_0x28eef5[_0x4986b7(0x1b1)]&&(_0x28eef5={..._0x28eef5,'exchange':'binance'},_0x58cd40=!![]),!_0x28eef5[_0x4986b7(0x181)]&&(_0x28eef5={..._0x28eef5,'basecoin':_0x4986b7(0x1da)},_0x58cd40=!![]),!_0x28eef5['ordertype']&&(_0x28eef5={..._0x28eef5,'ordertype':_0x4986b7(0x27a)},_0x58cd40=!![]),!_0x28eef5[_0x4986b7(0x1df)]&&(_0x28eef5={..._0x28eef5,'timeout':0x14},_0x58cd40=!![]),!_0x28eef5['emojibuy']&&(_0x28eef5={..._0x28eef5,'emojibuy':''},_0x58cd40=!![]),!_0x28eef5[_0x4986b7(0x274)]&&(_0x28eef5={..._0x28eef5,'emojisell':''},_0x58cd40=!![]),!_0x28eef5['showname']&&(_0x28eef5={..._0x28eef5,'showname':![]},_0x58cd40=!![]),_0x58cd40&&(_0x28eef5={'botID':_0x28eef5[_0x4986b7(0x190)],'exchange':_0x28eef5['exchange'],'apiKey':_0x28eef5[_0x4986b7(0x1d5)],'apiSecret':_0x28eef5[_0x4986b7(0x241)],'basecoin':_0x28eef5[_0x4986b7(0x181)],'botname':_0x28eef5[_0x4986b7(0x20a)],'showname':_0x28eef5[_0x4986b7(0x174)],'threshold':_0x28eef5['threshold'],'ordertype':_0x28eef5[_0x4986b7(0x220)],'timeout':_0x28eef5[_0x4986b7(0x1df)],'startdate':_0x28eef5[_0x4986b7(0x1ee)],'recreate':_0x28eef5['recreate'],'timeshift':_0x28eef5['timeshift'],'headless':_0x28eef5['headless'],'cooldown':_0x28eef5[_0x4986b7(0x24e)],'emojibuy':_0x28eef5[_0x4986b7(0x184)],'emojisell':_0x28eef5[_0x4986b7(0x274)],'portfolio':_0x28eef5['portfolio']},dbConfig[_0x4986b7(0x1e0)](_0x4986b7(0x224))['remove']()[_0x4986b7(0x203)](),dbConfig[_0x4986b7(0x1e0)]('bot')[_0x4986b7(0x19b)](_0x28eef5)[_0x4986b7(0x203)]());}else _0x28eef5={'botID':_0x530f26,'exchange':_0x4986b7(0x1aa),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x530f26,'showname':![],'threshold':'3','ordertype':_0x4986b7(0x27a),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4986b7(0x1ab)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x28eef5;}function emittedConfiguration(){const _0x20121a=_0x182ee2;let _0x1c150e;return config[_0x20121a(0x1d5)]==''?_0x1c150e=config:_0x1c150e={...config,'apiKey':'************','apiSecret':'************'},_0x1c150e;}function getSettings(){const _0x67e0f=_0x182ee2;return dbSettings['get'](_0x67e0f(0x276))[_0x67e0f(0x1db)]();}function getSecure(){const _0x3911d3=_0x182ee2;return dbSecure[_0x3911d3(0x1e0)](_0x3911d3(0x1ca))[_0x3911d3(0x1db)]()||{};}function _0x3a20(_0x2444b2,_0xb2dd98){const _0x221b8a=_0x14c8();return _0x3a20=function(_0x4dfdf5,_0xba7f8a){_0x4dfdf5=_0x4dfdf5-0x16c;let _0x14c8aa=_0x221b8a[_0x4dfdf5];return _0x14c8aa;},_0x3a20(_0x2444b2,_0xb2dd98);}function updateTimeshift(_0x2439ce){const _0x252d17=_0x182ee2;let _0x510c4a=dbConfig['get'](_0x252d17(0x224))[_0x252d17(0x209)]({'botID':botID})[_0x252d17(0x1db)]();_0x510c4a&&dbConfig['get']('bot')[_0x252d17(0x209)]({'botID':botID})['assign']({'timeshift':_0x2439ce})[_0x252d17(0x203)](),config[_0x252d17(0x1ab)]=_0x2439ce,proxyEmit(_0x252d17(0x275),emittedConfiguration());}async function storeConfiguration(_0x24b3d3){const _0x495d08=_0x182ee2;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x5e01d9=dbConfig[_0x495d08(0x1e0)](_0x495d08(0x224))[_0x495d08(0x209)]({'botID':botID})[_0x495d08(0x1db)]();_0x24b3d3={..._0x24b3d3,'apiKey':crypt[_0x495d08(0x1a8)](secure[_0x495d08(0x1cc)],_0x24b3d3[_0x495d08(0x1d5)])[_0x495d08(0x1c0)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x24b3d3[_0x495d08(0x241)])[_0x495d08(0x1c0)]};if(_0x5e01d9){if(_0x24b3d3[_0x495d08(0x1d5)]==_0x495d08(0x1f2))_0x24b3d3[_0x495d08(0x1d5)]=config[_0x495d08(0x1d5)];if(_0x24b3d3[_0x495d08(0x241)]==_0x495d08(0x1f2))_0x24b3d3[_0x495d08(0x241)]=config[_0x495d08(0x241)];dbConfig[_0x495d08(0x1e0)]('bot')[_0x495d08(0x209)]({'botID':botID})[_0x495d08(0x23b)](_0x24b3d3)[_0x495d08(0x203)]();}else dbConfig[_0x495d08(0x1e0)](_0x495d08(0x224))['push'](_0x24b3d3)['write'](),process[_0x495d08(0x257)]({'status':_0x495d08(0x278),'live':'running'},_0x6012=>{});config={..._0x24b3d3};if(config[_0x495d08(0x170)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x495d08(0x257)]({'botname':_0x24b3d3['botname']},_0x783098=>{}),proxyEmit(_0x495d08(0x193)),reset();}async function storeHeadless(_0x115b54){const _0x156da8=_0x182ee2,_0x3aced5={...config,'headless':_0x115b54[_0x156da8(0x210)]};let _0x459a35=dbConfig['get']('bot')[_0x156da8(0x209)]({'botID':botID})[_0x156da8(0x1db)]();_0x459a35&&dbConfig['get'](_0x156da8(0x224))[_0x156da8(0x209)]({'botID':botID})['assign'](_0x3aced5)[_0x156da8(0x203)](),config={..._0x3aced5},proxyEmit(_0x156da8(0x275),emittedConfiguration());}function noslash(_0x5835fc){const _0x51c16d=_0x182ee2;return _0x5835fc[_0x51c16d(0x279)]('/','');}function updateNumberCoins(_0x34eec8){const _0x1da0e0=_0x182ee2;_0x34eec8[_0x1da0e0(0x232)]&&_0x34eec8[_0x1da0e0(0x232)]==_0x1da0e0(0x228)&&_0x34eec8['balances']['forEach'](_0x2b4ae0=>{const _0x4febbe=_0x1da0e0;let _0x54b5cf=currentCoins[_0x4febbe(0x209)](_0x78d7f6=>_0x78d7f6[_0x4febbe(0x1b4)]==_0x2b4ae0['asset']),_0x1a3d25=config[_0x4febbe(0x20b)][_0x4febbe(0x209)](_0x2a7431=>_0x2a7431[_0x4febbe(0x1b4)]==_0x2b4ae0[_0x4febbe(0x267)]);if(_0x54b5cf&&_0x1a3d25)_0x54b5cf['number']=Math[_0x4febbe(0x18a)](Number(_0x2b4ae0['availableBalance'])+(_0x1a3d25[_0x4febbe(0x18c)]||0x0),0x0);});if(_0x34eec8[_0x1da0e0(0x232)]&&_0x34eec8[_0x1da0e0(0x232)]==_0x1da0e0(0x1e5)){if(_0x34eec8[_0x1da0e0(0x1fe)]=='LIMIT'&&_0x34eec8[_0x1da0e0(0x1a3)]==_0x1da0e0(0x17a)){if(lastOrders)lastOrders[_0x1da0e0(0x194)](_0x8f042c=>{const _0x5d6d3e=_0x1da0e0;if(_0x8f042c[_0x5d6d3e(0x202)]==_0x34eec8['orderId']){if(_0x8f042c[_0x5d6d3e(0x244)])_0x8f042c[_0x5d6d3e(0x1d8)]=_0x34eec8[_0x5d6d3e(0x1b9)]*_0x8f042c[_0x5d6d3e(0x200)];else _0x8f042c[_0x5d6d3e(0x1d8)]=_0x34eec8[_0x5d6d3e(0x1b9)];}});}}}async function getCoins(_0x2aaafc=!![],_0x774c9=config['basecoin']){const _0x35e5ee=_0x182ee2;let _0x580f5b,_0x279619=[],_0x53c99f=[],_0x3aa660=[];try{_0x580f5b=await exchange[_0x35e5ee(0x1b0)](),mybalances=_0x580f5b[_0x35e5ee(0x25a)];if(!_0x2aaafc)for(const [_0x4b2931,_0x3f91a3]of Object[_0x35e5ee(0x264)](mybalances)){_0x3aa660[_0x35e5ee(0x19b)](_0x4b2931);}else config['portfolio']['forEach'](_0x22b75e=>{const _0x61ad9e=_0x35e5ee;if(!_0x22b75e[_0x61ad9e(0x1b8)])_0x3aa660[_0x61ad9e(0x19b)](_0x22b75e[_0x61ad9e(0x1b4)]);});if(_0x774c9=='')for(const [_0x52c7ed,_0x31a8da]of Object[_0x35e5ee(0x264)](mybalances)){_0x31a8da[_0x35e5ee(0x237)]()!=0x0&&_0x53c99f['push']({'coin':_0x52c7ed});}else for(const [_0x561167,_0x19719f]of Object[_0x35e5ee(0x264)](mybalances)){if(_0x3aa660[_0x35e5ee(0x16f)](_0x561167)){const _0x2c16d2=config['portfolio']['find'](_0x4033b2=>_0x4033b2[_0x35e5ee(0x1b4)]==_0x561167);if((_0x19719f['toString']()!=0x0||_0x2c16d2)&&(allSymbols[_0x35e5ee(0x16f)](_0x561167+'/'+_0x774c9)||_0x561167==_0x774c9))_0x53c99f[_0x35e5ee(0x19b)]({'coin':_0x561167,'symbol':_0x561167+'/'+_0x774c9,'reverse':![],'number':Math[_0x35e5ee(0x18a)](_0x19719f+(_0x2c16d2&&_0x2c16d2[_0x35e5ee(0x18c)]||0x0),0x0)}),_0x561167!=_0x774c9&&_0x279619[_0x35e5ee(0x19b)](_0x561167+'/'+_0x774c9);else(_0x19719f[_0x35e5ee(0x237)]()!=0x0||_0x2c16d2)&&allSymbols[_0x35e5ee(0x16f)](_0x774c9+'/'+_0x561167)&&(_0x53c99f[_0x35e5ee(0x19b)]({'coin':_0x561167,'symbol':_0x774c9+'/'+_0x561167,'reverse':!![],'number':Math[_0x35e5ee(0x18a)](_0x19719f+(_0x2c16d2&&_0x2c16d2[_0x35e5ee(0x18c)]||0x0),0x0)}),_0x561167!=_0x774c9&&_0x279619[_0x35e5ee(0x19b)](_0x774c9+'/'+_0x561167));}}}catch(_0x147b31){if(!_0x2aaafc){if(_0x147b31['toString']()[_0x35e5ee(0x16f)](_0x35e5ee(0x24d)))return logHistory(_0x35e5ee(0x265),_0x35e5ee(0x1dc)),![];else{if(_0x147b31[_0x35e5ee(0x237)]()['includes']('AuthenticationError'))return logHistory(_0x35e5ee(0x265),_0x35e5ee(0x1a4)),![];else{if(_0x147b31['toString']()[_0x35e5ee(0x16f)](_0x35e5ee(0x20f)))return logHistory(_0x35e5ee(0x265),_0x35e5ee(0x21a)),![];else await handleError(_0x147b31,_0x35e5ee(0x17f));}}}else await handleError(_0x147b31,_0x35e5ee(0x17f));}return _0x53c99f;}async function getPortfolio(_0x14ad89){const _0x503455=_0x182ee2;let _0x51fedf=[],_0x1eaa2d=[],_0x3f5beb,_0xc120ef=[],_0x27d9e8,_0x1584f7;_0x14ad89[_0x503455(0x1d5)]===_0x503455(0x1f2)||_0x14ad89['apiSecret']===_0x503455(0x1f2)?(_0x27d9e8=config[_0x503455(0x1d5)],_0x1584f7=config['apiSecret']):(_0x27d9e8=_0x14ad89[_0x503455(0x1d5)],_0x1584f7=_0x14ad89['apiSecret']);await initExchange(_0x27d9e8,_0x1584f7);let _0x147c8e=await loadSymbols();if(_0x147c8e){_0xc120ef=await getCoins(![],_0x14ad89['basecoin']);if(_0xc120ef===![])proxyEmit(_0x503455(0x20b),![]);else{if(_0x14ad89[_0x503455(0x181)]=='')proxyEmit('portfolio',_0xc120ef);else{_0xc120ef[_0x503455(0x194)](_0x261d3c=>{const _0x50f109=_0x503455;_0x51fedf[_0x50f109(0x19b)](_0x261d3c[_0x50f109(0x270)]);});try{_0x1eaa2d=await exchange['fetchTickers'](_0x51fedf);}catch(_0x3c2392){await handleError(_0x3c2392,_0x503455(0x214));}_0xc120ef['forEach'](_0x30b09a=>{const _0x1ea059=_0x503455;_0x30b09a[_0x1ea059(0x1b4)]!=_0x14ad89[_0x1ea059(0x181)]?_0x3f5beb=_0x30b09a['reverse']?0x1/_0x1eaa2d[_0x30b09a['symbol']][_0x1ea059(0x16d)]:_0x1eaa2d[_0x30b09a[_0x1ea059(0x270)]][_0x1ea059(0x16d)]:_0x3f5beb=0x1,_0x30b09a[_0x1ea059(0x200)]=formatResult(_0x3f5beb,0x8);}),proxyEmit(_0x503455(0x20b),_0xc120ef);}}}else proxyEmit(_0x503455(0x20b),![]);}function checkMinimums(_0x2360f8){const _0x196e3c=_0x182ee2;let _0x2ea129=!![];const _0x1d6711=!_0x2360f8['reverse']?markets[_0x2360f8[_0x196e3c(0x270)]][_0x196e3c(0x21f)][_0x196e3c(0x1fa)][_0x196e3c(0x182)]:markets[_0x2360f8[_0x196e3c(0x270)]][_0x196e3c(0x21f)][_0x196e3c(0x1d2)][_0x196e3c(0x182)],_0x321d2e=!_0x2360f8[_0x196e3c(0x244)]?markets[_0x2360f8[_0x196e3c(0x270)]][_0x196e3c(0x21f)]['cost'][_0x196e3c(0x182)]:markets[_0x2360f8['symbol']][_0x196e3c(0x21f)][_0x196e3c(0x1fa)][_0x196e3c(0x182)];if(Math[_0x196e3c(0x25c)](_0x2360f8[_0x196e3c(0x1ff)])<_0x1d6711)_0x2ea129=![];if(Math[_0x196e3c(0x25c)](_0x2360f8[_0x196e3c(0x1ff)])*_0x2360f8[_0x196e3c(0x16d)]<_0x321d2e)_0x2ea129=![];return _0x2ea129;}async function getBalances(){const _0x266a3e=_0x182ee2;let _0x33ee18=0x0,_0x562421;const _0x1cb992=config['threshold'];currentCoins['forEach'](_0x4f4741=>{const _0x564200=_0x3a20;if(_0x4f4741[_0x564200(0x1b4)]!=config[_0x564200(0x181)]){let _0x29926f=global[_0x564200(0x26c)][noslash(_0x4f4741['symbol'])];_0x562421=_0x4f4741[_0x564200(0x244)]?0x1/_0x29926f:_0x29926f;}else _0x562421=0x1;let _0x145d3a=_0x4f4741[_0x564200(0x1e7)]*_0x562421;_0x33ee18+=_0x145d3a,_0x4f4741[_0x564200(0x16d)]=formatResult(Number(_0x562421),0x8),_0x4f4741[_0x564200(0x1db)]=_0x145d3a;}),currentCoins[_0x266a3e(0x194)](_0xd6f4ed=>{const _0x162cbd=_0x266a3e;let _0x13c256=config[_0x162cbd(0x20b)][_0x162cbd(0x209)](_0x1b88b4=>_0x1b88b4['coin']==_0xd6f4ed[_0x162cbd(0x1b4)]),_0x3fcb46=Number(_0x13c256['distribution']),_0x23ebf4=_0xd6f4ed['value']/_0x33ee18*0x64,_0x4ac295=_0x3fcb46*_0x33ee18/0x64/_0xd6f4ed[_0x162cbd(0x16d)]-_0xd6f4ed[_0x162cbd(0x1e7)];_0xd6f4ed[_0x162cbd(0x260)]=formatResult(_0x23ebf4,0x3),_0xd6f4ed['target']=formatResult(_0x3fcb46,0x3),_0xd6f4ed[_0x162cbd(0x1ff)]=formatResult(_0x4ac295,0x8),_0xd6f4ed['side']='',_0xd6f4ed[_0x162cbd(0x1e3)]='';if(_0xd6f4ed[_0x162cbd(0x1b4)]!=config['basecoin']){if(_0xd6f4ed[_0x162cbd(0x260)]>_0x3fcb46)_0xd6f4ed[_0x162cbd(0x1fb)]='sell',_0xd6f4ed[_0x162cbd(0x1e3)]=checkMinimums(_0xd6f4ed);else _0xd6f4ed['distribution']<_0x3fcb46&&(_0xd6f4ed[_0x162cbd(0x1fb)]=_0x162cbd(0x25f),_0xd6f4ed[_0x162cbd(0x1e3)]=checkMinimums(_0xd6f4ed));}_0xd6f4ed[_0x162cbd(0x22d)]=_0xd6f4ed[_0x162cbd(0x260)]/_0xd6f4ed[_0x162cbd(0x188)]-0x1;}),currentCoins['sort']((_0x5c3361,_0x35f989)=>_0x5c3361[_0x266a3e(0x22d)]<_0x35f989[_0x266a3e(0x22d)]?0x1:_0x35f989['delta']<_0x5c3361['delta']?-0x1:0x0);const _0x50d6cc=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x50d6cc[_0x266a3e(0x25b)],'usd':_0x50d6cc['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1cb992},proxyEmit(_0x266a3e(0x1d4),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x266a3e(0x210)])headlessMode({'portfolio':currentCoins,'threshold':_0x1cb992});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x544018=_0x182ee2;if(!lastBalances)return;let _0x48b908=await getStartingBalances(![]),_0x231d89=[],_0x7605bd;JSON[_0x544018(0x24f)](lastBalances[_0x544018(0x20b)])[_0x544018(0x194)](_0x31af9a=>{const _0x490014=_0x544018;let _0x474598={'coin':_0x31af9a[_0x490014(0x1b4)],'number':_0x31af9a[_0x490014(0x1e7)],'price':_0x31af9a[_0x490014(0x16d)]};_0x231d89[_0x490014(0x19b)](_0x474598);});const _0x2cefe1=await getFiat();_0x7605bd={'date':lastBalances[_0x544018(0x23c)][_0x544018(0x1e6)]('\x20')[0x0],'eur':_0x2cefe1['eur'],'usd':_0x2cefe1['usd'],'coins':_0x231d89};let _0x15eacf=dbPerformance[_0x544018(0x1e0)](_0x544018(0x17b))['find']({'date':_0x7605bd[_0x544018(0x18f)]})[_0x544018(0x1db)]();_0x15eacf?dbPerformance[_0x544018(0x1e0)](_0x544018(0x17b))[_0x544018(0x209)]({'date':_0x7605bd['date']})[_0x544018(0x23b)](_0x7605bd)[_0x544018(0x203)]():dbPerformance[_0x544018(0x1e0)]('data')[_0x544018(0x19b)](_0x7605bd)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x27debb=_0x182ee2;if(dbPerformance['has'](_0x27debb(0x17b))['value']()){let _0x4fc8c9=dbPerformance[_0x27debb(0x1e0)]('data')[_0x27debb(0x1be)]('date')[_0x27debb(0x1db)]();proxyEmit(_0x27debb(0x1f8),_0x4fc8c9),lastPerformanceEmitted=getDate();}else proxyEmit(_0x27debb(0x1f8),[]);}async function getStartingBalances(_0x9bd74d=!![]){const _0x38d9ef=_0x182ee2;let _0x5dc3b0=dbPerformance[_0x38d9ef(0x1e0)](_0x38d9ef(0x17b))['find']({'date':config[_0x38d9ef(0x1ee)]})[_0x38d9ef(0x1db)]();config[_0x38d9ef(0x1d5)]!=''&&!_0x5dc3b0&&(await setStartDatePerformance(config),_0x5dc3b0=dbPerformance[_0x38d9ef(0x1e0)](_0x38d9ef(0x17b))[_0x38d9ef(0x209)]({'date':config[_0x38d9ef(0x1ee)]})[_0x38d9ef(0x1db)]());if(config['apiKey']==''||!_0x5dc3b0)return{};let _0x4f78c5=0x0,_0x150925=0x0,_0x16aea2=0x0,_0x1167f4=[],_0x564e27=0x0;config[_0x38d9ef(0x20b)][_0x38d9ef(0x194)](_0x4c4f4a=>{const _0x5ef026=_0x38d9ef;if(!_0x4c4f4a['excluded']){_0x1167f4[_0x564e27]={'coin':_0x4c4f4a[_0x5ef026(0x1b4)],'symbol':_0x4c4f4a[_0x5ef026(0x270)],'number':_0x4c4f4a['startnumber'],'price':_0x4c4f4a[_0x5ef026(0x21b)]},_0x4f78c5+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a['startnumber'];if(config['basecoin']==_0x5ef026(0x1da))_0x150925+=_0x4c4f4a['startprice']*_0x4c4f4a['startnumber']*_0x5dc3b0[_0x5ef026(0x25b)],_0x16aea2+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a[_0x5ef026(0x176)]*_0x5dc3b0[_0x5ef026(0x1ed)];else{if(config[_0x5ef026(0x181)]==_0x5ef026(0x268)||config[_0x5ef026(0x181)]=='USDT'||config[_0x5ef026(0x181)]==_0x5ef026(0x23e))_0x150925+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a['startnumber']*_0x5dc3b0['eur']/_0x5dc3b0[_0x5ef026(0x1ed)],_0x16aea2+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a['startnumber'];else config[_0x5ef026(0x181)]==_0x5ef026(0x1f3)&&(_0x150925+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a[_0x5ef026(0x176)],_0x16aea2+=_0x4c4f4a[_0x5ef026(0x21b)]*_0x4c4f4a[_0x5ef026(0x176)]*_0x5dc3b0[_0x5ef026(0x1ed)]/_0x5dc3b0[_0x5ef026(0x25b)]);}_0x564e27++;}});let _0x5981ff={'basecoin':_0x4f78c5,'eur':_0x150925,'usd':_0x16aea2,'coins':_0x1167f4};if(_0x9bd74d)proxyEmit(_0x38d9ef(0x1d1),_0x5981ff);return _0x5981ff;}function headlessMode(_0x4631ae){const _0x3518ff=_0x182ee2;let _0x434ccf=_0x4631ae['portfolio'],_0x24b570=_0x4631ae[_0x3518ff(0x1f5)],_0x415e03=[];for(let _0x4783c3 of _0x434ccf){if(_0x4783c3[_0x3518ff(0x1b4)]!=config['basecoin']){if(_0x4783c3['distribution']/_0x4783c3[_0x3518ff(0x188)]-0x1>=_0x24b570/0x64){if(_0x4783c3[_0x3518ff(0x1e3)])_0x415e03[_0x3518ff(0x19b)](_0x4783c3);}else{if(_0x4783c3['distribution']/_0x4783c3[_0x3518ff(0x188)]-0x1<=-_0x24b570/0x64){if(_0x4783c3[_0x3518ff(0x1e3)])_0x415e03[_0x3518ff(0x19b)](_0x4783c3);}}}}_0x415e03[_0x3518ff(0x233)]>0x0&&placeOrder(_0x415e03);}function symbolToCoin(_0x3fcd55){const _0x45a0ca=_0x182ee2;let _0x2576ab;if(_0x3fcd55[_0x45a0ca(0x16f)]('/'+config[_0x45a0ca(0x181)]))_0x2576ab=_0x3fcd55[_0x45a0ca(0x279)]('/'+config[_0x45a0ca(0x181)],'');if(_0x3fcd55['includes'](config[_0x45a0ca(0x181)]+'/'))_0x2576ab=_0x3fcd55['replace'](config[_0x45a0ca(0x181)]+'/','');return _0x2576ab;}async function validateOrders(_0x1c3e74=0x0){const _0x322ff3=_0x182ee2;let _0x2c89f6=[],_0x392c2d=config[_0x322ff3(0x220)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x322ff3(0x1df)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x7cbce6=>{const _0x3134c7=_0x322ff3;let _0xc8c1ad=previousCoins[_0x3134c7(0x209)](_0x1ba517=>_0x1ba517[_0x3134c7(0x1b4)]==symbolToCoin(_0x7cbce6[_0x3134c7(0x270)])),_0x2cf930=currentCoins[_0x3134c7(0x209)](_0xecd0fd=>_0xecd0fd[_0x3134c7(0x1b4)]==symbolToCoin(_0x7cbce6[_0x3134c7(0x270)])),_0x365205,_0x510420;_0x7cbce6[_0x3134c7(0x1fb)]==_0x3134c7(0x25f)&&!_0x7cbce6[_0x3134c7(0x244)]||_0x7cbce6[_0x3134c7(0x1fb)]==_0x3134c7(0x26e)&&_0x7cbce6[_0x3134c7(0x244)]?(_0x365205=_0xc8c1ad[_0x3134c7(0x1e7)]+0.9*_0x7cbce6[_0x3134c7(0x1d8)],_0x510420=_0xc8c1ad[_0x3134c7(0x1e7)]+1.1*_0x7cbce6[_0x3134c7(0x1d8)]):(_0x365205=_0xc8c1ad[_0x3134c7(0x1e7)]-1.1*_0x7cbce6[_0x3134c7(0x1d8)],_0x510420=_0xc8c1ad[_0x3134c7(0x1e7)]-0.9*_0x7cbce6[_0x3134c7(0x1d8)]);const _0x4f41fe=_0x7cbce6[_0x3134c7(0x1d8)]!=0x0&&_0x2cf930[_0x3134c7(0x1e7)]>=_0x365205&&_0x2cf930[_0x3134c7(0x1e7)]<=_0x510420;_0x2c89f6[_0x3134c7(0x19b)](_0x4f41fe);if(_0x4f41fe&&config[_0x3134c7(0x220)]!='market'){if(_0x7cbce6[_0x3134c7(0x244)])logHistory(_0x3134c7(0x24b),'Order\x20filled:\x20'+_0x7cbce6[_0x3134c7(0x270)]+'\x20'+_0x7cbce6[_0x3134c7(0x1fb)]+'\x20#'+formatResult(_0x7cbce6[_0x3134c7(0x1d8)]/_0x7cbce6[_0x3134c7(0x200)],0x8)+'\x20@'+formatResult(_0x7cbce6[_0x3134c7(0x200)],0x8));else logHistory(_0x3134c7(0x24b),_0x3134c7(0x269)+_0x7cbce6[_0x3134c7(0x270)]+'\x20'+_0x7cbce6[_0x3134c7(0x1fb)]+'\x20#'+formatResult(_0x7cbce6[_0x3134c7(0x1d8)],0x8)+'\x20@'+formatResult(_0x7cbce6['price'],0x8));}}),_0x2c89f6[_0x322ff3(0x194)]((_0x331b15,_0xe5d71a)=>{const _0x58c5ae=_0x322ff3;if(_0x331b15)lastOrders[_0x58c5ae(0x20c)](_0xe5d71a,0x1);});if(_0x1c3e74<_0x392c2d&&_0x2c89f6[_0x322ff3(0x16f)](![])){if(_0x1c3e74==0x0){config[_0x322ff3(0x220)]==_0x322ff3(0x27a)?logHistory('error',_0x322ff3(0x273)):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1c3e74);},0xa*0x3e8);}else{(_0x1c3e74==0x1||_0x1c3e74==Math[_0x322ff3(0x216)](_0x392c2d/0x2)||_0x1c3e74==_0x392c2d-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1c3e74);},validateOrderInterval);}}else{lockOrders=![];if(_0x1c3e74>0x0&&!_0x2c89f6['includes'](![]))config[_0x322ff3(0x220)]==_0x322ff3(0x27a)?logHistory(_0x322ff3(0x263),_0x322ff3(0x23f)):logHistory('success',_0x322ff3(0x1fc));else _0x1c3e74>0x0&&_0x2c89f6[_0x322ff3(0x16f)](![])&&(config[_0x322ff3(0x220)]==_0x322ff3(0x27a)?logHistory(_0x322ff3(0x263),_0x322ff3(0x234)+Math['round'](_0x392c2d*validateOrderInterval/0xea60)+_0x322ff3(0x1c6)):(lastOrders[_0x322ff3(0x194)](async _0x5727fe=>{const _0x3d9730=_0x322ff3;try{const _0x36917a=await exchange['cancelOrder'](_0x5727fe[_0x3d9730(0x202)],_0x5727fe[_0x3d9730(0x270)]);}catch(_0x222e9b){if(_0x222e9b['toString']()[_0x3d9730(0x16f)](_0x3d9730(0x1b3))){}else await handleError(_0x222e9b,_0x3d9730(0x19e));}}),logHistory(_0x322ff3(0x263),_0x322ff3(0x215)+Math[_0x322ff3(0x216)](_0x392c2d*validateOrderInterval/0xea60)+_0x322ff3(0x1c6))));}}async function resetCoinResults(){const _0x1ccac0=_0x182ee2;dbCoinResults['get']('coins')[_0x1ccac0(0x22f)]()[_0x1ccac0(0x203)]();let _0x5c8e1d=await getStartingBalances(![]);_0x5c8e1d[_0x1ccac0(0x223)][_0x1ccac0(0x194)](_0x399a8f=>{const _0x515d53=_0x1ccac0,_0x2aa7f8=_0x399a8f['symbol'][_0x515d53(0x16f)](config['basecoin']+'/');if(_0x399a8f[_0x515d53(0x1b4)]!=config[_0x515d53(0x181)]){let _0x5b8da5={'coin':_0x399a8f[_0x515d53(0x1b4)],'number':_0x399a8f[_0x515d53(0x1e7)],'breakeven':_0x399a8f[_0x515d53(0x200)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x515d53(0x223))[_0x515d53(0x19b)](_0x5b8da5)['write']();}});}async function updateCoinResults(_0x2394a8){const _0x9d1de=_0x182ee2;let _0x42e510,_0x52785d,_0x320733,_0x54548c,_0x330b69,_0x1ac09a,_0x212d0f=dbCoinResults[_0x9d1de(0x1e0)](_0x9d1de(0x223))[_0x9d1de(0x209)]({'coin':_0x2394a8[_0x9d1de(0x1b4)]})[_0x9d1de(0x1db)]();if(!_0x212d0f)return;if(_0x2394a8['fee']&&_0x2394a8[_0x9d1de(0x1a9)]['currency']==config['basecoin'])_0x42e510=_0x2394a8[_0x9d1de(0x1a9)][_0x9d1de(0x1d2)];else{if(_0x2394a8[_0x9d1de(0x1a9)]&&_0x2394a8[_0x9d1de(0x1a9)][_0x9d1de(0x1a6)]==_0x9d1de(0x197))_0x42e510=_0x2394a8[_0x9d1de(0x1a9)][_0x9d1de(0x1d2)]*global['ticker'][_0x9d1de(0x197)+config['basecoin']];else _0x42e510=0.001*_0x2394a8[_0x9d1de(0x1d8)];}const _0x45aebb=_0x2394a8[_0x9d1de(0x270)]['includes'](config['basecoin']+'/');_0x45aebb&&(_0x1ac09a={'coin':_0x2394a8[_0x9d1de(0x1b4)],'symbol':_0x2394a8[_0x9d1de(0x270)],'filled':_0x2394a8[_0x9d1de(0x1d8)]*_0x2394a8[_0x9d1de(0x200)],'side':_0x2394a8[_0x9d1de(0x1fb)]==_0x9d1de(0x26e)?_0x9d1de(0x25f):'sell','price':0x1/_0x2394a8[_0x9d1de(0x200)]},_0x2394a8={..._0x1ac09a});_0x2394a8[_0x9d1de(0x1fb)]=='buy'?_0x320733=(_0x212d0f[_0x9d1de(0x1f0)]*_0x212d0f[_0x9d1de(0x1e7)]+_0x2394a8['price']*_0x2394a8['filled'])/(_0x212d0f['number']+_0x2394a8[_0x9d1de(0x1d8)]):_0x320733=(_0x212d0f[_0x9d1de(0x1f0)]*_0x212d0f[_0x9d1de(0x1e7)]-_0x2394a8['price']*_0x2394a8[_0x9d1de(0x1d8)])/(_0x212d0f[_0x9d1de(0x1e7)]-_0x2394a8[_0x9d1de(0x1d8)]);_0x2394a8[_0x9d1de(0x1fb)]==_0x9d1de(0x25f)?_0x54548c=_0x212d0f['realized']:_0x54548c=_0x212d0f[_0x9d1de(0x240)]+(_0x2394a8[_0x9d1de(0x200)]-_0x212d0f[_0x9d1de(0x1f0)])*_0x2394a8[_0x9d1de(0x1d8)];_0x52785d=_0x2394a8[_0x9d1de(0x1fb)]==_0x9d1de(0x26e)?_0x212d0f[_0x9d1de(0x1e7)]-_0x2394a8['filled']:_0x212d0f['number']+_0x2394a8[_0x9d1de(0x1d8)],_0x330b69=(_0x2394a8[_0x9d1de(0x200)]-_0x320733)*_0x52785d;let _0x472b30={'coin':_0x2394a8[_0x9d1de(0x1b4)],'number':_0x52785d,'breakeven':formatResult(_0x320733,0x8),'realized':formatResult(_0x54548c,0x8),'unrealized':formatResult(_0x330b69,0x8),'fees':formatResult(_0x212d0f[_0x9d1de(0x1c3)]+_0x42e510,0x8),'sells':_0x2394a8[_0x9d1de(0x1fb)]==_0x9d1de(0x26e)?_0x212d0f['sells']+0x1:_0x212d0f[_0x9d1de(0x23d)],'buys':_0x2394a8[_0x9d1de(0x1fb)]==_0x9d1de(0x25f)?_0x212d0f[_0x9d1de(0x18e)]+0x1:_0x212d0f[_0x9d1de(0x18e)]};dbCoinResults[_0x9d1de(0x1e0)](_0x9d1de(0x223))[_0x9d1de(0x209)]({'coin':_0x2394a8[_0x9d1de(0x1b4)]})[_0x9d1de(0x23b)](_0x472b30)[_0x9d1de(0x203)]();}async function placeOrder(_0x1cb904){const _0x4cce9b=_0x182ee2,_0x5a1083=config[_0x4cce9b(0x220)]=='market'?_0x4cce9b(0x27a):_0x4cce9b(0x212);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x106a4b of _0x1cb904){let _0x29e4f3,_0x3d5d91,_0x146082,_0x5c6cb8,_0x4082ba,_0x4fa15d=_0x106a4b[_0x4cce9b(0x270)];try{const _0xe225ea=await exchange['fetchTickers'](_0x4fa15d),_0x35d4c5=_0xe225ea[_0x4fa15d];_0x29e4f3=_0x35d4c5['last'],_0x3d5d91=_0x35d4c5[_0x4cce9b(0x213)],_0x146082=_0x35d4c5['ask'];_0x106a4b[_0x4cce9b(0x244)]?(_0x5c6cb8=_0x106a4b[_0x4cce9b(0x1fb)]==_0x4cce9b(0x25f)?_0x4cce9b(0x26e):_0x4cce9b(0x25f),_0x4082ba=Math[_0x4cce9b(0x25c)](_0x106a4b[_0x4cce9b(0x1ff)])/_0x29e4f3):(_0x5c6cb8=_0x106a4b['side'],_0x4082ba=Math[_0x4cce9b(0x25c)](_0x106a4b['trade']));_0x5a1083==_0x4cce9b(0x212)&&(config[_0x4cce9b(0x220)]==_0x4cce9b(0x1a7)&&(_0x29e4f3=_0x5c6cb8==_0x4cce9b(0x25f)?_0x3d5d91:_0x146082),config[_0x4cce9b(0x220)]==_0x4cce9b(0x1f1)&&(_0x29e4f3=_0x5c6cb8==_0x4cce9b(0x25f)?_0x146082:_0x3d5d91));_0x4082ba=formatResult(_0x4082ba,0x8),_0x29e4f3=formatResult(_0x29e4f3,0x8);const _0x587559=await exchange[_0x4cce9b(0x255)](_0x4fa15d,_0x5a1083,_0x5c6cb8,_0x4082ba,_0x29e4f3);lastOrders['push']({'orderId':_0x587559['id'],'symbol':_0x4fa15d,'side':_0x5c6cb8,'reverse':_0x106a4b[_0x4cce9b(0x244)],'amount':_0x106a4b[_0x4cce9b(0x244)]?_0x587559[_0x4cce9b(0x1fa)]*_0x587559['price']:_0x587559[_0x4cce9b(0x1fa)],'filled':_0x106a4b[_0x4cce9b(0x244)]?_0x587559[_0x4cce9b(0x1d8)]*_0x587559[_0x4cce9b(0x200)]:_0x587559[_0x4cce9b(0x1d8)],'price':_0x587559[_0x4cce9b(0x200)]});const _0x2d469b=_0x5c6cb8==_0x4cce9b(0x26e)?config[_0x4cce9b(0x274)]?String[_0x4cce9b(0x25e)]('0x'+config[_0x4cce9b(0x274)])+'\x20':'':config['emojibuy']?String[_0x4cce9b(0x25e)]('0x'+config[_0x4cce9b(0x184)])+'\x20':'',_0x363f8c=_0x5a1083==_0x4cce9b(0x27a)?_0x4cce9b(0x1a2):config[_0x4cce9b(0x220)]==_0x4cce9b(0x1a7)?_0x4cce9b(0x1f6):'Limit\x20(low-margin)';if(_0x5a1083==_0x4cce9b(0x27a))logHistory(_0x4cce9b(0x24b),''+_0x2d469b+_0x363f8c+_0x4cce9b(0x1de)+_0x4fa15d+'\x20'+_0x5c6cb8+'\x20#'+formatResult(_0x587559[_0x4cce9b(0x1d8)],0x8)+'\x20@'+formatResult(_0x587559[_0x4cce9b(0x200)],0x8));else logHistory('order',''+_0x2d469b+_0x363f8c+'\x20order:\x20'+_0x4fa15d+'\x20'+_0x5c6cb8+'\x20#'+formatResult(_0x587559['amount'],0x8)+'\x20@'+formatResult(_0x587559[_0x4cce9b(0x200)],0x8));_0x587559[_0x4cce9b(0x1b4)]=_0x106a4b[_0x4cce9b(0x1b4)],await updateCoinResults(_0x587559);if(config['cooldown']!=0x0){let _0x44ee8b=null;if(cooldownTracker[_0x4cce9b(0x233)]==config['cooldown']-0x1)_0x44ee8b=cooldownTracker[_0x4cce9b(0x1b7)]();const _0x4612e7=getTimeStamp();cooldownTracker[_0x4cce9b(0x19b)](_0x4612e7);if(_0x44ee8b){const _0x77c097=fns[_0x4cce9b(0x18d)](new Date(_0x4612e7),new Date(_0x44ee8b));_0x77c097<cooldownInterval&&(logHistory(_0x4cce9b(0x265),'Executed\x20'+config[_0x4cce9b(0x24e)]+_0x4cce9b(0x253)+cooldownInterval/0x3c+_0x4cce9b(0x218)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x2c50c3){if(_0x2c50c3[_0x4cce9b(0x237)]()[_0x4cce9b(0x16f)]('MIN_NOTIONAL'))logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4fa15d);else{if(_0x2c50c3[_0x4cce9b(0x237)]()['includes'](_0x4cce9b(0x21d)))logHistory(_0x4cce9b(0x265),_0x4cce9b(0x26d)+_0x4fa15d);else await handleError(_0x2c50c3,_0x4cce9b(0x1d7));}}}if(lastOrders[_0x4cce9b(0x233)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x4cce9b(0x210)]&&(config[_0x4cce9b(0x220)]==_0x4cce9b(0x27a)?logHistory(_0x4cce9b(0x265),_0x4cce9b(0x261)):logHistory(_0x4cce9b(0x265),_0x4cce9b(0x192)));else coolingDown&&(!config[_0x4cce9b(0x210)]&&logHistory(_0x4cce9b(0x265),_0x4cce9b(0x1cf)));}}function logHistory(_0x1cc91f,_0x1a158c,_0x3f5753=''){const _0x480957=_0x182ee2;let _0x19be14={'time':getTimeStamp(),'type':_0x1cc91f,'event':_0x1a158c,'botname':config[_0x480957(0x20a)],'showname':config[_0x480957(0x174)]};dbLogs[_0x480957(0x1e0)](_0x480957(0x22e))['push'](_0x19be14)[_0x480957(0x203)]();if(_0x3f5753=='')_0x3f5753=_0x1a158c;proxyEmit('event',{'log':_0x19be14,'summary':_0x3f5753}),process['send']({'telegram':_0x19be14},_0xb61be5=>{}),logging(''+_0x19be14[_0x480957(0x23a)]);}function emitHistory(_0x149899={}){const _0x16927a=_0x182ee2;Object[_0x16927a(0x225)](_0x149899)[_0x16927a(0x233)]==0x0&&(_0x149899={'type':[_0x16927a(0x24b),'event'],'event':'','page':0x1});if(_0x149899[_0x16927a(0x1c4)][_0x16927a(0x16f)]('event'))_0x149899[_0x16927a(0x1c4)][_0x16927a(0x20c)](_0x149899[_0x16927a(0x1c4)]['indexOf'](_0x16927a(0x23a)),0x1,_0x16927a(0x265),_0x16927a(0x263));if(dbLogs[_0x16927a(0x251)]('logs')['value']()){let _0x5d6e0b=dbLogs[_0x16927a(0x1e0)]('logs')[_0x16927a(0x272)](_0x36f6bb=>{const _0x29bbeb=_0x16927a;if(_0x149899[_0x29bbeb(0x1c4)]['length']==0x0)return![];else return _0x149899[_0x29bbeb(0x1c4)][_0x29bbeb(0x16f)](_0x36f6bb[_0x29bbeb(0x1c4)]);})[_0x16927a(0x272)](_0x93a54=>{const _0xac65eb=_0x16927a;if(_0x149899[_0xac65eb(0x23a)]=='')return!![];else return _0x93a54[_0xac65eb(0x23a)][_0xac65eb(0x17d)]()[_0xac65eb(0x16f)](_0x149899[_0xac65eb(0x23a)]['toLowerCase']());})['sortBy'](_0x16927a(0x23c)),_0x1934c6=_0x5d6e0b[_0x16927a(0x1db)]()['length'];_0x5d6e0b=_0x5d6e0b[_0x16927a(0x244)]()['slice']((_0x149899[_0x16927a(0x22b)]-0x1)*logPageSize,_0x149899[_0x16927a(0x22b)]*logPageSize-0x1)[_0x16927a(0x244)]()[_0x16927a(0x1db)](),proxyEmit(_0x16927a(0x247),{'logs':_0x5d6e0b,'total':_0x1934c6});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x415db4){const _0x2af8ed=_0x182ee2,_0x168ab9=new Date()[_0x2af8ed(0x24a)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x168ab9-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x2af8ed(0x19a)},_0x1674d4=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x2af8ed(0x24a)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2af8ed(0x265),_0x2af8ed(0x1ad)+consecutivePauses+')'),await sleep(_0x415db4),botPaused=![],reset();}}async function handleError(_0x23fb50,_0x367d7c,_0x4b99d7=''){const _0x498847=_0x182ee2;if(_0x23fb50[_0x498847(0x237)]()[_0x498847(0x16f)](_0x498847(0x178)))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x1a1)),await pauseBot(pauseBotInterval);else{if(_0x23fb50[_0x498847(0x237)]()['includes']('ExchangeNotAvailable'))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x1ec)),await pauseBot(pauseBotInterval);else{if(_0x23fb50[_0x498847(0x237)]()[_0x498847(0x16f)](_0x498847(0x20e)))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x1c5)),await pauseBot(pauseBotInterval);else{if(_0x23fb50[_0x498847(0x237)]()[_0x498847(0x16f)](_0x498847(0x24d)))logHistory('error',_0x367d7c+_0x498847(0x246)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x498847(0x257)]({'stop':_0x498847(0x258)},_0x34d619=>{});else{if(_0x23fb50[_0x498847(0x237)]()[_0x498847(0x16f)](_0x498847(0x19c)))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x1a0)),logHistory(_0x498847(0x265),_0x498847(0x18b)),process[_0x498847(0x257)]({'stop':_0x498847(0x258)},_0x5a6521=>{});else{if(_0x23fb50[_0x498847(0x237)]()['includes'](_0x498847(0x20f)))logHistory('error',_0x367d7c+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x498847(0x257)]({'stop':_0x498847(0x258)},_0x23ed8e=>{});else{if(_0x23fb50[_0x498847(0x237)]()[_0x498847(0x16f)](_0x498847(0x16c)))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x1f4)),logHistory(_0x498847(0x265),_0x498847(0x18b)),process['send']({'stop':_0x498847(0x258)},_0x4bcd1b=>{});else{if(_0x23fb50['toString']()[_0x498847(0x16f)](_0x498847(0x1d3)))logHistory(_0x498847(0x265),_0x367d7c+_0x498847(0x256)),await pauseBot(pauseBotInterval),process[_0x498847(0x257)]({'stop':_0x498847(0x19a)},_0x16d350=>{});else _0x23fb50['toString']()['includes'](_0x498847(0x1ef))?logHistory('error',_0x367d7c+_0x498847(0x271)):(logHistory(_0x498847(0x265),_0x367d7c+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x367d7c+'\x20|\x20Error\x20details:\x20',_0x23fb50),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x25ea89,_0x1e333f){const _0x3a9f4f=_0x182ee2;return parseFloat(_0x25ea89[_0x3a9f4f(0x1f7)](_0x1e333f));}function logging(_0x1becbf,_0x4ec695=''){const _0x43cd64=_0x182ee2;if(config[_0x43cd64(0x174)])console[_0x43cd64(0x211)](getTimeStamp()+':\x20'+config[_0x43cd64(0x20a)]+'\x20>\x20'+_0x1becbf,_0x4ec695);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+_0x43cd64(0x196)+_0x1becbf,_0x4ec695);}function getServerTime(){const _0x1f31b2=_0x182ee2,_0x5384b4=new Date();return _0x5384b4[_0x1f31b2(0x24c)]()+'/'+(_0x5384b4[_0x1f31b2(0x206)]()+0x1)[_0x1f31b2(0x237)]()[_0x1f31b2(0x26a)](0x2,'0')+'/'+_0x5384b4['getDate']()['toString']()[_0x1f31b2(0x26a)](0x2,'0')+'\x20'+_0x5384b4[_0x1f31b2(0x1dd)]()[_0x1f31b2(0x237)]()[_0x1f31b2(0x26a)](0x2,'0')+':'+_0x5384b4[_0x1f31b2(0x248)]()[_0x1f31b2(0x237)]()[_0x1f31b2(0x26a)](0x2,'0')+':'+_0x5384b4['getSeconds']()[_0x1f31b2(0x237)]()[_0x1f31b2(0x26a)](0x2,'0');}function getTimeStamp(){const _0x4018d2=_0x182ee2,_0x3a24ef=shiftedTime();return _0x3a24ef[_0x4018d2(0x24c)]()+'/'+(_0x3a24ef[_0x4018d2(0x206)]()+0x1)[_0x4018d2(0x237)]()[_0x4018d2(0x26a)](0x2,'0')+'/'+_0x3a24ef['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3a24ef['getHours']()['toString']()[_0x4018d2(0x26a)](0x2,'0')+':'+_0x3a24ef[_0x4018d2(0x248)]()[_0x4018d2(0x237)]()[_0x4018d2(0x26a)](0x2,'0')+':'+_0x3a24ef['getSeconds']()[_0x4018d2(0x237)]()[_0x4018d2(0x26a)](0x2,'0');}function getDate(){const _0x16f449=_0x182ee2,_0x2e3a3a=shiftedTime();return _0x2e3a3a[_0x16f449(0x24c)]()+'/'+(_0x2e3a3a[_0x16f449(0x206)]()+0x1)[_0x16f449(0x237)]()[_0x16f449(0x26a)](0x2,'0')+'/'+_0x2e3a3a[_0x16f449(0x1d6)]()['toString']()[_0x16f449(0x26a)](0x2,'0');}function getHour(){const _0x3574c4=_0x182ee2,_0x4cc173=shiftedTime();return _0x4cc173['getHours']()['toString']()[_0x3574c4(0x26a)](0x2,'0');}function sleep(_0x768fd0){return new Promise(_0x347c03=>setTimeout(_0x347c03,_0x768fd0));}function shiftedTime(){const _0x5401ac=_0x182ee2,_0xd034a9=new Date();let _0x4966cc=_0xd034a9;if(config&&config[_0x5401ac(0x1ab)]!==0x0)_0x4966cc=fns[_0x5401ac(0x277)](_0xd034a9,{'hours':config[_0x5401ac(0x1ab)]});return _0x4966cc;}