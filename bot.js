const _0x2c7e2a=_0x54e0;(function(_0x416a9e,_0x17549c){const _0x2eec8f=_0x54e0,_0x494cd9=_0x416a9e();while(!![]){try{const _0x5a8332=parseInt(_0x2eec8f(0x2a1))/0x1*(-parseInt(_0x2eec8f(0x17f))/0x2)+parseInt(_0x2eec8f(0x1be))/0x3*(parseInt(_0x2eec8f(0x205))/0x4)+-parseInt(_0x2eec8f(0x19e))/0x5+-parseInt(_0x2eec8f(0x245))/0x6+parseInt(_0x2eec8f(0x1cb))/0x7*(parseInt(_0x2eec8f(0x116))/0x8)+-parseInt(_0x2eec8f(0x193))/0x9*(-parseInt(_0x2eec8f(0x1cc))/0xa)+parseInt(_0x2eec8f(0x2ac))/0xb*(-parseInt(_0x2eec8f(0x219))/0xc);if(_0x5a8332===_0x17549c)break;else _0x494cd9['push'](_0x494cd9['shift']());}catch(_0x2dc6fa){_0x494cd9['push'](_0x494cd9['shift']());}}}(_0x5bbc,0x47a01));const _0x48fa2d=function(){let _0xbf103e=!![];return function(_0x9c00b0,_0x364773){const _0x3d3ba8=_0xbf103e?function(){if(_0x364773){const _0x37e350=_0x364773['apply'](_0x9c00b0,arguments);return _0x364773=null,_0x37e350;}}:function(){};return _0xbf103e=![],_0x3d3ba8;};}(),_0x39d9a4=_0x48fa2d(this,function(){const _0xb55461=_0x54e0;return _0x39d9a4['toString']()['search'](_0xb55461(0x255))[_0xb55461(0x22b)]()[_0xb55461(0x14a)](_0x39d9a4)[_0xb55461(0x1db)](_0xb55461(0x255));});_0x39d9a4();'use strict';function _0x5bbc(){const _0x522c67=['loadMarkets','data','2\x20-\x20Handled\x20open\x20orders','enabled','limits','Kucoin','threshold','timeout','ongoing','configuration-stored','ccxt','Saving\x20configuration','BTC','full','exchanges','status','InsufficientFunds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','sha256','max','Bot\x20','coin','balances','fetchTickers','sell','\x20:\x20','cooldown','Cryptocom','value','request-time','last','argv','distribution','Huobipro','write','hybrid-crypto-js','onepagemode','botID','path','Pausing\x20for\x20','BNB/','watchTrades','Mexc','uncaughtException','<pre>','balancing\x20resumes\x20when\x20cooldown\x20ends','autoliquidity','No\x20more\x20open\x20orders\x20-\x20','orderId','createOrder','************','leftTxt','canceled','colorscheme','liquidity','59597ZrcsBr','UNLOCKED','added','open','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20>\x20','Manual\x20balancing\x20required','args','RateLimitExceeded','USDC','shift','11UUXmBS','privateKey','getPortfolio(0)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limit','filled',',\x20must\x20be\x20a\x203\x20digit\x20number','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','loadSymbols()','message','USD','./config/','indexOf','2285240REPZVP','floor','Portfolio\x20change\x20detected:\x20','\x20/\x20','recent20','\x20closed\x20the\x20connection','replace','***','Exchange','exchange\x20not\x20reloaded','lowdb','RSA-OAEP','none','fromCodePoint','amount','kill','bot-','average','stringify','getPortfolio','forEach','\x20minutes','active','API-key\x20format\x20invalid','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20minutes\x20-\x20','\x20-\x20pausing\x20bot\x20for\x20','getPortfolio(2)','close','highest','Net\x20effect','openOrders','watchTransactions()','ticker','length','placeOrder','startdate','UNLOCKING','page','fetchTickers()','isEqual','Exception\x20thrown\x20in\x20','ExchangeNotAvailable','secure','Error:\x20Invalid\x20argument\x20','sendMetricsTelegram','changes','ID:\x20','Error\x20details:','warning','cancelLoading','timeshift','constructor','Unfilled\x20order(s)\x20canceled\x20after\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','1\x20-\x20FILLED\x20unknown\x20order:\x20','showConfig','symbol','-events.json','1\x20-\x20FILLED\x20known\x20order:\x20','logs','Mexc3','test','./version.json','getHours','filter','Failed\x20to\x20load\x20coin\x20data\x20for\x20','yargs/yargs','currency','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2.6.0','event','\x20order:\x20','/output-000.log','\x20metrics:</b>\x20\x0a\x0a','fetchOpenOrders','configuration','padEnd','cancelOrders()','splice','-results.json','Order(s)\x20not\x20validated\x20after\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','sells','parse','padStart','toUpperCase','Invalid\x20symbol:\x20','getCoinNumber()','storeHeadless','Bybit','resetHistory','2\x20-\x20Orders\x20unlocked','recreateCoinResults()','\x20orders\x20in\x20less\x20than\x20','existsSync','pro','percentage','breakeven','basecoin','order','bid','running','exec','change','8FDJqJp','keys','stopExchange()','./logs/','Order\x20is\x20invalid:\x20','001','side','yyyy/MM/dd','botname','total','USDP','restart','USDT','starting-balances','util','TUSD','Timestamp\x20for\x20this\x20request\x20is\x20outside\x20of\x20the\x20recvWindow','must\x20be\x20greater\x20than\x20minimum\x20amount','bots','has','5270337lllUAZ','AuthenticationError','add','Net\x20','getFullYear','%\x20(','Resetting\x20coin\x20results:\x20','<b>','<b>Bot\x20','\x20>\x20[DEBUG]\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','999945JnMuxu','Avoiding\x20continuous\x20order\x20attempts','removed','offset','send','Transaction\x20detection\x20unblocked','remainingSymbols','fetchClosedOrders','startprice','DDoSProtection','findIndex','split','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20|\x20highest\x20fee:\x20','writeFile','no\x20open\x20orders','headless','assign','watchOrders','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Unknown\x20error\x20occured','orderstatus','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','progress','\x20network\x20error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','date','basecoinvalue','Bitget','/USD','getDate','95907SziLpE','get','cost','\x20|\x20Custom\x20ID:\x20','startsWith','excluded','includes','1\x20-\x20Handle\x20open\x20orders','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','2\x20-\x20handling\x20FILLED\x20order:\x20','cancelOrder','type','market','14nVZKuM','10OrPSYU','Reset\x20|\x20','getSeconds','round','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','number','version','rightTxt','Transaction\x20detection\x20blocked','decrypt','coins','watchTrades()','toLowerCase','Limit\x20(low-margin)','\x20rejected\x20your\x20API\x20request','search','random','Executed\x20','error','Loading\x20completed','\x20portfolio:</b>\x20\x0a\x0a','set','fiat','2.5.0','toFixed','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead\x20of\x20the\x20server\x27s\x20time','</pre>','target','getCoins()','\x20API\x20secret\x20is\x20invalid','initial','loading-canceled','fee','toggleBotMode','ask','abs','bot','LOCKED','sendPortfolioTelegram','debug','sortBy','defaults','performance','portfolio','spot','NetworkError','ordertype','emitHistory','eur','usd','datetime','-performance.json','showname','differenceInSeconds','emojibuy','function','event-history','60LHGUMw','\x20|\x20exchange:\x20','trade','settings','Waited\x20','\x20|\x20','limit-high','-config.json','invalid\x20Request-Time','initTickers()','net-basecoin','net-fiat','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','remove','MIN_NOTIONAL','fees','emojisell','realized','ORDERS.UNLOCKED','red_yellow_blue','5753868QopuVP','bb-settings.json','fetchBalance',':\x20Bot\x20','Headless:\x20','password','Binance','success','cloneDeep','find','apiSecret','-------------------------------\x0a','Insufficient\x20funds\x20to\x20execute\x20order:\x20','getMinutes','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','starting-balance-','deleteHistoryAlerts','push','toString','BNB','final','0\x20-\x20EXECUTION:\x20',':\x20timer\x20>','milliseconds','exchange','getStartingBalances','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','exchange\x20reloaded','ETH','change24h','/backup/','InvalidNonce','join','apiPassword','InvalidOrder','mkdirSync','fetchTicker','customId','placeOrder()','\x20hour','substring','EUR','2.3.5','getMonth','2551170JCmkXE','slice','\x20API\x20key\x20is\x20invalid','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20clock\x20if\x20the\x20problem\x20remains','createWriteStream','entries','time','map','unlinkSync','bb-secure.json','price','\x20change','min','reverse','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','delta','(((.+)+)+)+$','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','PAXG','freeze','timestamp','1\x20-\x20Validate\x20orders:\x20','coin-loading-progress','lowdb/adapters/FileSync','log','sort','apiKey','getPortfolio(1)','buys','buy','format','Trigger:\x20','ORDERS.UNLOCKING','getTime','valid','closed','1\x20-\x20Unlock\x20orders'];_0x5bbc=function(){return _0x522c67;};return _0x5bbc();}const ccxt=require(_0x2c7e2a(0x274)),low=require(_0x2c7e2a(0x120)),FileSync=require(_0x2c7e2a(0x25c)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x2c7e2a(0x28d))['Crypt'],util=require(_0x2c7e2a(0x18d)),argv=require(_0x2c7e2a(0x159))(process[_0x2c7e2a(0x289)][_0x2c7e2a(0x246)](0x2))[_0x2c7e2a(0x289)],path=require(_0x2c7e2a(0x290));let exchange;global[_0x2c7e2a(0x137)]={},global[_0x2c7e2a(0x17e)]={};const usdBasecoins=[_0x2c7e2a(0x113),'BUSD',_0x2c7e2a(0x18e),_0x2c7e2a(0x18b),_0x2c7e2a(0x2aa),_0x2c7e2a(0x189)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2c7e2a(0x258)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2c7e2a(0x2a2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x2c7e2a(0x130)+pauseBotInterval/0xea60+_0x2c7e2a(0x12b),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x2c7e2a(0x155))[_0x2c7e2a(0x1d2)],botID=process[_0x2c7e2a(0x289)][0x2]||_0x2c7e2a(0x184),pattern=/^[0-9]{3}$/;!pattern[_0x2c7e2a(0x154)](botID)&&(console['log'](_0x2c7e2a(0x142)+botID+_0x2c7e2a(0x10f)),killBot());const userID=process[_0x2c7e2a(0x289)][0x3]||'',configpath=userID?_0x2c7e2a(0x114)+userID+'/':_0x2c7e2a(0x114),logspath=userID?_0x2c7e2a(0x182)+userID+'/':'./logs/',loggerfile=fs[_0x2c7e2a(0x249)](logspath+_0x2c7e2a(0x15f),{'flags':'a'});!fs[_0x2c7e2a(0x175)](configpath)&&fs[_0x2c7e2a(0x23c)](configpath);!fs[_0x2c7e2a(0x175)](logspath)&&fs[_0x2c7e2a(0x23c)](logspath);const configfile=configpath+_0x2c7e2a(0x126)+botID+_0x2c7e2a(0x20c),logfile=configpath+'bot-'+botID+_0x2c7e2a(0x150),performancefile=configpath+_0x2c7e2a(0x126)+botID+_0x2c7e2a(0x1ff),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x2c7e2a(0x21a),securefile=configpath+_0x2c7e2a(0x24e),configbackuppath=configpath+_0x2c7e2a(0x237),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2c7e2a(0x1f5)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2c7e2a(0x1f5)]({'data':[],'version':serverversion})[_0x2c7e2a(0x28c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2c7e2a(0x1f5)]({'bot':[],'version':serverversion})[_0x2c7e2a(0x28c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2c7e2a(0x1f5)]({'coins':[],'version':serverversion})[_0x2c7e2a(0x28c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2c7e2a(0x27c),'rsaStandard':_0x2c7e2a(0x121)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x567d0b=>{const _0x280988=_0x2c7e2a;console[_0x280988(0x25d)](_0x567d0b);},'simple':_0x4ddaa6=>{const _0x55ee29=_0x2c7e2a;console[_0x55ee29(0x25d)](_0x4ddaa6),loggerfile[_0x55ee29(0x28c)](util[_0x55ee29(0x263)](_0x4ddaa6)+'\x0a');},'full':async(_0x13595d,_0x582e2e='')=>{const _0x4a05ca=_0x2c7e2a;let _0x1eaeab;if(config[_0x4a05ca(0x200)])_0x1eaeab=getTimeStamp()+':\x20'+config[_0x4a05ca(0x187)]+_0x4a05ca(0x2a6)+_0x13595d;else _0x1eaeab=getTimeStamp()+_0x4a05ca(0x21c)+botID+'\x20>\x20'+_0x13595d;console[_0x4a05ca(0x25d)](_0x1eaeab),loggerfile['write'](util[_0x4a05ca(0x263)](_0x1eaeab)+'\x0a'),_0x582e2e&&(console['log'](_0x582e2e),loggerfile[_0x4a05ca(0x28c)](util['format'](_0x582e2e)+'\x0a'));},'debug':async(_0x14e000,_0x158d06='')=>{const _0x4df4b0=_0x2c7e2a;let _0x4c9424;if(config['showname'])_0x4c9424=getTimeStamp()+':\x20'+config[_0x4df4b0(0x187)]+_0x4df4b0(0x19c)+_0x14e000;else _0x4c9424=getTimeStamp()+_0x4df4b0(0x21c)+botID+'\x20>\x20[DEBUG]\x20'+_0x14e000;if(debugging)console[_0x4df4b0(0x25d)](_0x4c9424);loggerfile['write'](util['format'](_0x4c9424)+'\x0a');if(_0x158d06){if(debugging)console[_0x4df4b0(0x25d)](_0x158d06);loggerfile[_0x4df4b0(0x28c)](util['format'](_0x158d06)+'\x0a');}}};process['on'](_0x2c7e2a(0x295),function(_0x412909){const _0x26b112=_0x2c7e2a;handleError(_0x412909,_0x26b112(0x295));});settings[_0x2c7e2a(0x149)]!=config[_0x2c7e2a(0x149)]&&updateTimeshift(settings[_0x2c7e2a(0x149)]);settings[_0x2c7e2a(0x28e)]!=config['onepagemode']&&updateOnepagemode(settings[_0x2c7e2a(0x28e)]);process['send']({'started':_0x2c7e2a(0x17c)},_0x4ee5c7=>{}),initializeProcessListeners();function proxyEmit(_0x45d3da,_0x9e6461=null){const _0x476a0b=_0x2c7e2a;process[_0x476a0b(0x1a2)]({'function':_0x45d3da,'args':_0x9e6461},_0x588c42=>{});}function initializeProcessListeners(){const _0x5c21da=_0x2c7e2a;process['on'](_0x5c21da(0x112),_0x5a4402=>{const _0x49d5be=_0x5c21da;switch(Object[_0x49d5be(0x180)](_0x5a4402)[0x0]){case _0x49d5be(0x149):_0x5a4402['timeshift']!=undefined&&(settings['timeshift']=_0x5a4402[_0x49d5be(0x149)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x5a4402[_0x49d5be(0x28e)]!=undefined&&(settings[_0x49d5be(0x28e)]=_0x5a4402[_0x49d5be(0x28e)],updateOnepagemode(settings[_0x49d5be(0x28e)]));break;case'bots':_0x5a4402['bots']!=undefined&&(bots=JSON['parse'](_0x5a4402[_0x49d5be(0x191)]),proxyEmit(_0x49d5be(0x191),bots));break;case _0x49d5be(0x203):switch(_0x5a4402[_0x49d5be(0x203)]){case'initclient':initclient();break;case _0x49d5be(0x1ed):toggleBotMode();break;case _0x49d5be(0x1fb):emitHistory(_0x5a4402[_0x49d5be(0x2a8)]);break;case _0x49d5be(0x229):deleteHistoryAlerts(_0x5a4402[_0x49d5be(0x2a8)]);break;case _0x49d5be(0x129):getPortfolio(_0x5a4402[_0x49d5be(0x2a8)]);break;case'storeConfiguration':storeConfiguration(_0x5a4402['args']);break;case _0x49d5be(0x16f):storeHeadless(_0x5a4402['args']);break;case'storeFiat':storeFiat(_0x5a4402[_0x49d5be(0x2a8)]);break;case _0x49d5be(0x171):resetHistory();break;case _0x49d5be(0x232):getStartingBalances(getNormalizedPerformance());break;case _0x49d5be(0x139):placeOrder(_0x5a4402[_0x49d5be(0x2a8)]);break;case _0x49d5be(0x148):cancelLoading();break;case _0x49d5be(0x14e):showConfig();break;case _0x49d5be(0x143):sendMetricsTelegram();break;case _0x49d5be(0x1f2):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x323fb1=![]){const _0x29e798=_0x2c7e2a;logger[_0x29e798(0x1f3)](_0x29e798(0x1cd)+(_0x323fb1?_0x29e798(0x234):_0x29e798(0x11f))+_0x29e798(0x206)+config[_0x29e798(0x231)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x323fb1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x29e798(0x25f)]!=''&&config[_0x29e798(0x25f)]!=_0x29e798(0x11d)){loadingProgress=0x0;if(_0x323fb1){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x336142){handleErrorNoStop(_0x336142,_0x29e798(0x111));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xecc540=await getCoins();[currentCoins,currentCoinsAll]=_0xecc540,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x29e798(0x1f3)](_0x29e798(0x1df)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x29e798(0x138)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2ea9f1=_0x2c7e2a;exchangeStopped=!![];try{await exchange[_0x2ea9f1(0x132)]();}catch(_0x27fefb){await handleError(_0x27fefb,_0x2ea9f1(0x181));}}async function reloadExchange(){const _0x48aa71=_0x2c7e2a;while(lockOrders!=ORDERS[_0x48aa71(0x2a2)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x48aa71(0x1f3)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x391dfd=config[_0x2c7e2a(0x231)],_0x7c595a=config[_0x2c7e2a(0x25f)],_0x560b5d=config[_0x2c7e2a(0x223)],_0x465091=config[_0x2c7e2a(0x23a)]){const _0x554806=_0x2c7e2a;exchange&&await stopExchange();!supportedExchanges()[_0x554806(0x1c4)](_0x391dfd)&&(logHistory('error',_0x554806(0x227)+_0x391dfd+'\x20exchange'),killBot());const _0xbe24a1=ccxt[_0x554806(0x176)][_0x391dfd['toLowerCase']()];exchange=new _0xbe24a1({'apiKey':_0x7c595a,'secret':_0x560b5d,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x554806(0x1f8)}});if(_0x465091)exchange[_0x554806(0x21e)]=_0x465091;}function setStableCoins(){const _0x15e42e=_0x2c7e2a;let _0x1f6105=config[_0x15e42e(0x179)]==_0x15e42e(0x235)?_0x15e42e(0x235):config[_0x15e42e(0x179)]==_0x15e42e(0x257)?'PAXG':_0x15e42e(0x276),_0x24e733=!allSymbols['includes'](_0x1f6105+_0x15e42e(0x1bc))?_0x15e42e(0x18b):_0x15e42e(0x113),_0x1cde2b=!allSymbols[_0x15e42e(0x1c4)](_0x1f6105+'/EUR')?_0x24e733:_0x15e42e(0x242);stablecoins={'eur':{'coin':''+_0x1f6105+_0x1cde2b,'symbol':_0x1f6105+'/'+_0x1cde2b},'usd':{'coin':''+_0x1f6105+_0x24e733,'symbol':_0x1f6105+'/'+_0x24e733}};}async function initwsCcxt(){const _0x53b957=_0x2c7e2a;initCycle++;const _0x4174cc=initCycle;let _0x48bbca=[];config[_0x53b957(0x1f7)][_0x53b957(0x12a)](_0x27df36=>{const _0x28362b=_0x53b957;if(!_0x27df36['excluded']&&_0x27df36[_0x28362b(0x27f)]!=config[_0x28362b(0x179)])_0x48bbca[_0x28362b(0x22a)](_0x27df36[_0x28362b(0x14f)]);});if(!_0x48bbca[_0x53b957(0x1c4)](stablecoins[_0x53b957(0x1fc)][_0x53b957(0x14f)]))_0x48bbca[_0x53b957(0x22a)](stablecoins[_0x53b957(0x1fc)][_0x53b957(0x14f)]);if(!_0x48bbca[_0x53b957(0x1c4)](stablecoins[_0x53b957(0x1fd)][_0x53b957(0x14f)]))_0x48bbca[_0x53b957(0x22a)](stablecoins['usd'][_0x53b957(0x14f)]);if(config[_0x53b957(0x231)][_0x53b957(0x1c2)](_0x53b957(0x21f))&&config[_0x53b957(0x179)]!=_0x53b957(0x257)){if(!_0x48bbca['includes'](_0x53b957(0x292)+config[_0x53b957(0x179)]))_0x48bbca[_0x53b957(0x22a)]('BNB/'+config['basecoin']);}loadCoins(_0x48bbca),_0x48bbca=validateSymbols(_0x48bbca);const _0x45c7f9=async _0x528a1c=>{const _0x159fc6=_0x53b957;let _0x2454d9;try{const _0xbd8eb5=await getTickers(_0x528a1c);Object['entries'](_0xbd8eb5)[_0x159fc6(0x12a)](_0x31f84a=>{const _0x320ff0=_0x159fc6;_0x2454d9=_0x31f84a[0x1]['symbol'],global[_0x320ff0(0x137)][noslash(_0x2454d9)]=_0x31f84a[0x1]['last'],global[_0x320ff0(0x17e)][_0x2454d9]=_0x31f84a[0x1][_0x320ff0(0x177)];});}catch(_0x2a4f5a){await handleError(_0x2a4f5a,_0x159fc6(0x20e),_0x2454d9);}},_0x343a92=async _0x50139a=>{const _0x421ee6=_0x53b957;while(initCycle==_0x4174cc){if(!botPaused)try{const _0x5cf1ed=await exchange[_0x421ee6(0x293)](_0x50139a);global[_0x421ee6(0x137)][noslash(_0x5cf1ed[0x0][_0x421ee6(0x14f)])]=_0x5cf1ed[0x0]['price'],await sleep(0x3e8);}catch(_0x3dcf52){if(!exchangeStopped)await handleError(_0x3dcf52,_0x421ee6(0x1d7),_0x50139a);}else await sleep(0x64);}},_0x4e079b=async _0x4dc472=>{const _0x465eae=_0x53b957;while(initCycle==_0x4174cc){if(!botPaused){let _0x100b76;try{await sleep(0x3c*0x3e8);const _0x5e8480=await getTickers(_0x4dc472);Object[_0x465eae(0x24a)](_0x5e8480)[_0x465eae(0x12a)](_0x10da28=>{const _0x2d9612=_0x465eae;_0x100b76=_0x10da28[0x1][_0x2d9612(0x14f)],global['change'][_0x100b76]=_0x10da28[0x1][_0x2d9612(0x177)];});}catch(_0x321f23){if(!exchangeStopped)await handleError(_0x321f23,_0x465eae(0x13d),_0x100b76);}}else await sleep(0x64);}},_0x27e7be=async _0x2f5ef1=>{const _0x28e1a9=_0x53b957;while(initCycle==_0x4174cc){if(!botPaused)try{const _0x489277=await exchange[_0x28e1a9(0x1b0)](_0x2f5ef1);initCycle==_0x4174cc&&_0x489277[_0x28e1a9(0x12a)](_0x1f3016=>{updateNumberCoinsCcxt(_0x1f3016);});}catch(_0x1b62fd){if(!exchangeStopped)await handleError(_0x1b62fd,'watchOrders()');}else await sleep(0x64);}};_0x45c7f9(_0x48bbca),_0x4e079b(_0x48bbca),_0x48bbca[_0x53b957(0x12a)](_0x3bbe81=>{_0x343a92(_0x3bbe81),_0x27e7be(_0x3bbe81);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x328d1e){const _0x2e80b5=_0x2c7e2a;let _0x2b5dc4={};try{if(config[_0x2e80b5(0x231)]!=_0x2e80b5(0x285))_0x2b5dc4=await exchange[_0x2e80b5(0x281)](_0x328d1e);else for(const _0x7d3ced of _0x328d1e){const _0x2ebebd=await exchange[_0x2e80b5(0x23d)](_0x7d3ced);_0x2b5dc4[_0x7d3ced]=_0x2ebebd;}return _0x2b5dc4;}catch(_0x576a71){throw _0x576a71;}}async function watchTransactions(){const _0x23f66a=_0x2c7e2a;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x3debd8=await getCoins(),[_0xfdb674,_0x1a3eaa]=_0x3debd8;let _0x50d0ff=[];currentCoins['forEach'](_0x25daee=>{const _0x528a51=_0x54e0,_0x4a916d=_0xfdb674[_0x528a51(0x222)](_0x2c662c=>_0x2c662c[_0x528a51(0x27f)]==_0x25daee[_0x528a51(0x27f)]);if(_0x4a916d){if(_0x25daee[_0x528a51(0x1d1)]!=_0x4a916d[_0x528a51(0x1d1)]){let _0x2f3af2;if(_0x25daee[_0x528a51(0x27f)]!=config[_0x528a51(0x179)]){const _0x3bea2a=global[_0x528a51(0x137)][noslash(_0x25daee[_0x528a51(0x14f)])];_0x2f3af2=_0x25daee[_0x528a51(0x252)]?0x1/_0x3bea2a:_0x3bea2a;}else _0x2f3af2=0x1;_0x50d0ff['push']({'coin':_0x25daee[_0x528a51(0x27f)],'symbol':_0x25daee[_0x528a51(0x14f)],'price':_0x2f3af2,'number':Number(formatResult(_0x4a916d[_0x528a51(0x1d1)]-_0x25daee['number'],0x8)),'basecoinvalue':_0x2f3af2*(_0x4a916d['number']-_0x25daee[_0x528a51(0x1d1)])});}}});if(_0x50d0ff[_0x23f66a(0x138)]==0x1&&!blockTransactionDetection){if(config[_0x23f66a(0x298)]){logger[_0x23f66a(0x1f3)](_0x23f66a(0x2a5)+_0x50d0ff[0x0][_0x23f66a(0x1ba)]+_0x23f66a(0x1ab)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0x23f66a(0x1ef)](_0x50d0ff[0x0][_0x23f66a(0x1ba)])>lastFees[_0x23f66a(0x133)]){delete _0x50d0ff[0x0]['symbol'],delete _0x50d0ff[0x0]['basecoinvalue'];let _0x1e1206=[],_0x25c435=[...config[_0x23f66a(0x2a0)]]||[],_0xb937a6=config['liquidity'];_0x25c435[_0x23f66a(0x25e)]((_0x24fb26,_0x56448c)=>_0x24fb26[_0x23f66a(0x1b9)]>_0x56448c['date']?-0x1:_0x56448c['date']>_0x24fb26['date']?0x1:0x0);const _0x56c8d2=getDate();if(_0x25c435[0x0]){const _0x5b3ad9=fns[_0x23f66a(0x16a)](_0x25c435[0x0][_0x23f66a(0x1b9)],'yyyy/MM/dd',new Date()),_0x313ade=fns['parse'](_0x56c8d2,_0x23f66a(0x186),new Date());if(fns[_0x23f66a(0x13e)](_0x5b3ad9,_0x313ade)){_0x1e1206=_0x25c435[0x0]['changes'];const _0x12cad6=_0x1e1206[_0x23f66a(0x222)](_0x340dc7=>_0x340dc7['coin']==_0x50d0ff[0x0][_0x23f66a(0x27f)]);_0x12cad6?(_0x12cad6[_0x23f66a(0x1d1)]+=_0x50d0ff[0x0][_0x23f66a(0x1d1)],_0x12cad6[_0x23f66a(0x1d1)]==0x0&&(_0x1e1206=_0x1e1206['filter'](_0x41f21a=>{const _0x2949d3=_0x23f66a;return _0x41f21a[_0x2949d3(0x27f)]!=_0x50d0ff[0x0]['coin'];}))):_0x1e1206[_0x23f66a(0x22a)](_0x50d0ff[0x0]);const _0x1d5474=_0xb937a6[_0x23f66a(0x222)](_0x419a36=>_0x419a36['date']==_0x56c8d2);_0x1d5474['changes']=_0x1e1206;}else _0xb937a6[_0x23f66a(0x22a)]({'date':_0x56c8d2,'changes':[_0x50d0ff[0x0]]});}const _0x2a99ef=_0xb937a6[_0x23f66a(0x222)](_0x4e4900=>_0x4e4900[_0x23f66a(0x1b9)]==_0x56c8d2);if(_0x2a99ef){let _0x4d0497=!![];_0x2a99ef[_0x23f66a(0x144)]['forEach'](_0x444936=>{const _0x25d107=_0x23f66a;if(_0x444936[_0x25d107(0x1d1)]!=0x0)_0x4d0497=![];}),_0x4d0497&&(_0xb937a6=_0xb937a6[_0x23f66a(0x157)](_0x29add9=>{return _0x29add9['date']!=_0x56c8d2;}));}let _0x384f5b=dbConfig['get'](_0x23f66a(0x1f0))['find']({'botID':botID})[_0x23f66a(0x286)]();_0x384f5b&&(dbConfig[_0x23f66a(0x1bf)](_0x23f66a(0x1f0))['find']({'botID':botID})['assign']({'liquidity':_0xb937a6})[_0x23f66a(0x28c)](),config['liquidity']=_0xb937a6),logHistory(_0x23f66a(0x220),_0x23f66a(0x118)+Math['abs'](_0x50d0ff[0x0][_0x23f66a(0x1d1)])+'\x20'+_0x50d0ff[0x0]['coin']+'\x20'+(_0x50d0ff[0x0][_0x23f66a(0x1d1)]>0x0?_0x23f66a(0x2a3):'removed')+_0x23f66a(0x15b)),proxyEmit(_0x23f66a(0x162),emittedConfiguration());}else logger[_0x23f66a(0x1f3)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x23f66a(0x1ef)](_0x50d0ff[0x0][_0x23f66a(0x1d1)])+'\x20'+_0x50d0ff[0x0][_0x23f66a(0x27f)]+'\x20'+(_0x50d0ff[0x0][_0x23f66a(0x1d1)]>0x0?_0x23f66a(0x2a3):_0x23f66a(0x1a0)));transactionDetected=!![];}else logger[_0x23f66a(0x1f3)]('Portfolio\x20change\x20detected:\x20'+Math[_0x23f66a(0x1ef)](_0x50d0ff[0x0][_0x23f66a(0x1d1)])+'\x20'+_0x50d0ff[0x0][_0x23f66a(0x27f)]+'\x20'+(_0x50d0ff[0x0][_0x23f66a(0x1d1)]>0x0?_0x23f66a(0x2a3):_0x23f66a(0x1a0))+_0x23f66a(0x1aa));}currentCoins=_0xfdb674,currentCoinsAll=_0x1a3eaa,await sleep(watchTransactionsInterval);}catch(_0x4231e3){if(!exchangeStopped)await handleError(_0x4231e3,_0x23f66a(0x136));}else await sleep(0x64);}}async function loadSymbols(){const _0x3f589c=_0x2c7e2a;try{markets=await exchange[_0x3f589c(0x26a)](),allSymbols=[],Object[_0x3f589c(0x24a)](markets)[_0x3f589c(0x12a)](_0x5db694=>{const _0x40d257=_0x3f589c;_0x5db694[0x1][_0x40d257(0x12c)]&&_0x5db694[0x1][_0x40d257(0x1f8)]&&allSymbols[_0x40d257(0x22a)](_0x5db694[0x0]);});}catch(_0x3d1291){throw _0x3d1291;}}function validateSymbols(_0x48f7df){const _0x4f48cd=_0x2c7e2a;let _0x4a1ffb=[];return _0x48f7df[_0x4f48cd(0x12a)](_0x24ca5b=>{const _0x20b97f=_0x4f48cd;!allSymbols[_0x20b97f(0x1c4)](_0x24ca5b)?logHistory(_0x20b97f(0x1de),_0x20b97f(0x16d)+_0x24ca5b+_0x20b97f(0x1d0)):_0x4a1ffb['push'](_0x24ca5b);}),_0x4a1ffb;}async function initclient(){const _0x36c8c7=_0x2c7e2a;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x36c8c7(0x278),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x36c8c7(0x280),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2a7c05=getNormalizedPerformance();emitPerformance(_0x2a7c05),getStartingBalances(_0x2a7c05);}async function toggleBotMode(){const _0x1fd6ca=_0x2c7e2a;let _0xacc4c0=dbConfig[_0x1fd6ca(0x1bf)](_0x1fd6ca(0x1f0))['find']({'botID':botID})[_0x1fd6ca(0x286)]();if(_0xacc4c0){const _0x33e9db=!_0xacc4c0[_0x1fd6ca(0x1ae)];dbConfig['get'](_0x1fd6ca(0x1f0))[_0x1fd6ca(0x222)]({'botID':botID})[_0x1fd6ca(0x1af)]({'headless':_0x33e9db})['write'](),config[_0x1fd6ca(0x1ae)]=_0x33e9db,proxyEmit(_0x1fd6ca(0x162),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4861f7=_0x2c7e2a;process[_0x4861f7(0x1a2)]({'updatebotmanager':!![]},_0x579a31=>{}),logger['debug'](_0x4861f7(0x21d)+config[_0x4861f7(0x1ae)]);}async function loadCoins(_0x1f1a5e){const _0xd25d0a=_0x2c7e2a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x364db0,_0x2a8b8e=0x0,_0x379cdb=0x0;_0x1f1a5e[_0xd25d0a(0x12a)](_0xa563e1=>{const _0x67de24=_0xd25d0a;loading[_0x67de24(0x1a4)][_0x67de24(0x22a)](_0xa563e1);}),loadingCanceled=![];let _0x18b926=![];while(_0x364db0!=_0x1f1a5e[_0xd25d0a(0x138)]+maxLoadingProgress){_0x364db0=loadingProgress,_0x1f1a5e[_0xd25d0a(0x12a)](_0x2d903c=>{const _0x12a188=_0xd25d0a;if(global[_0x12a188(0x137)][noslash(_0x2d903c)]){loading[_0x12a188(0x1a4)]=loading[_0x12a188(0x1a4)][_0x12a188(0x157)](_0x39949b=>_0x39949b!=_0x2d903c);if(!watchedSymbols[_0x12a188(0x1c4)](_0x2d903c))watchedSymbols[_0x12a188(0x22a)](_0x2d903c);_0x364db0++;}}),loading['progress']=Math[_0xd25d0a(0x1cf)](_0x364db0/(_0x1f1a5e[_0xd25d0a(0x138)]+maxLoadingProgress)*0x64);loading[_0xd25d0a(0x1b5)]!=0x64&&(_0x379cdb>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x379cdb>0x78*0x5&&!_0x18b926&&(_0x18b926=!![],logHistory(_0xd25d0a(0x1de),_0xd25d0a(0x158)+loading[_0xd25d0a(0x1a4)][_0xd25d0a(0x239)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0xd25d0a(0x1de),_0xd25d0a(0x291)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x3729fa=_0xd25d0a;process[_0x3729fa(0x1a2)]({'stop':'restart'},_0x5d839d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x2a8b8e!=loading[_0xd25d0a(0x1b5)]&&(_0x2a8b8e=loading[_0xd25d0a(0x1b5)],emitLoadingProgress()),_0x379cdb++,await sleep(0xc8);}_0x364db0==_0x1f1a5e[_0xd25d0a(0x138)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xd25d0a(0x1a2)]({'status':_0xd25d0a(0x26d),'live':_0xd25d0a(0x17c)},_0x5021e0=>{}),_0x18b926&&logHistory(_0xd25d0a(0x220),_0xd25d0a(0x19d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x7667e2=_0x2c7e2a;proxyEmit(_0x7667e2(0x162),{...emittedConfiguration(),'configstate':_0x7667e2(0x1eb)});}function emitLoadingProgress(){const _0x33ee91=_0x2c7e2a;proxyEmit(_0x33ee91(0x25b),loading);}async function getFiat(){const _0xfa66be=_0x2c7e2a;let _0x4ea465=global['ticker'][stablecoins[_0xfa66be(0x1fc)][_0xfa66be(0x27f)]],_0x568d80=global[_0xfa66be(0x137)][stablecoins['usd'][_0xfa66be(0x27f)]];return{'eur':Number(_0x4ea465),'usd':Number(_0x568d80)};}function capitalize(_0x17037b){const _0x4780cc=_0x2c7e2a;return _0x17037b['substring'](0x0,0x1)[_0x4780cc(0x16c)]()+_0x17037b[_0x4780cc(0x241)](0x1);}function supportedExchanges(){const _0x44192c=_0x2c7e2a,_0x51e265=['ws',_0x44192c(0x281),_0x44192c(0x23d),'watchTrades',_0x44192c(0x1b0),'cancelOrder',_0x44192c(0x29b),_0x44192c(0x161),_0x44192c(0x1a5),'fetchBalance'];let _0x142c19=[],_0x504927=[],_0x39fc97=ccxt['pro']['exchanges'];_0x39fc97[_0x44192c(0x12a)](_0x278d35=>{const _0x480c71=_0x44192c;try{const _0x589d3f=new ccxt['pro'][_0x278d35]();_0x504927[_0x480c71(0x22a)](_0x589d3f);}catch(_0x3c3129){}}),_0x504927[_0x44192c(0x12a)](_0x4cffe5=>{const _0x103078=_0x44192c;let _0x1a378a=0x0;_0x51e265[_0x103078(0x12a)](_0x53233f=>{const _0xbde3ab=_0x103078;_0x53233f in _0x4cffe5[_0xbde3ab(0x192)]&&_0x4cffe5['has'][_0x53233f]&&_0x1a378a++;}),_0x1a378a==_0x51e265[_0x103078(0x138)]&&_0x142c19[_0x103078(0x22a)](capitalize(_0x4cffe5['id']));});let _0x620d38=[];return _0x39fc97['forEach'](_0x18b589=>{const _0x13e9c7=_0x44192c;_0x18b589=capitalize(_0x18b589);if(!_0x142c19[_0x13e9c7(0x1c4)](_0x18b589))_0x620d38[_0x13e9c7(0x22a)](_0x18b589);}),_0x142c19;}function setStartDatePerformance(){const _0x3ddf3b=_0x2c7e2a;if(config&&config[_0x3ddf3b(0x2a0)][0x0][_0x3ddf3b(0x144)][_0x3ddf3b(0x138)]!=0x0){const _0x3e7e6e=config['liquidity'][0x0]['changes'];dbPerformance[_0x3ddf3b(0x1bf)](_0x3ddf3b(0x26b))[_0x3ddf3b(0x222)]({'date':config[_0x3ddf3b(0x13a)]})[_0x3ddf3b(0x1af)]({'coins':_0x3e7e6e})[_0x3ddf3b(0x28c)]();}}async function recreateCoinResults(){const _0x1afc00=_0x2c7e2a;let _0x20eed7,_0x4bbafd=[];try{const _0x2c0cd0=fns[_0x1afc00(0x263)](fns['parseISO'](config['startdate'][_0x1afc00(0x11c)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x26897e of currentCoins){if(_0x26897e[_0x1afc00(0x27f)]!=config[_0x1afc00(0x179)]){let _0x55abf4=0x0,_0x2721cb,_0x325f93;_0x20eed7=await getAllEventOrders(_0x26897e[_0x1afc00(0x14f)]);if(_0x20eed7['length']>0x0)_0x20eed7[_0x1afc00(0x12a)](_0x5cdeb4=>{const _0x5048a7=_0x1afc00,_0x8f8787=_0x26897e[_0x5048a7(0x14f)][_0x5048a7(0x1c4)](config['basecoin']+'/');_0x4bbafd['push']({'datetime':_0x5cdeb4[_0x5048a7(0x1fe)],'coin':_0x26897e[_0x5048a7(0x27f)],'symbol':_0x26897e[_0x5048a7(0x14f)],'side':_0x5cdeb4[_0x5048a7(0x185)],'reverse':_0x8f8787,'amount':formatResult(_0x5cdeb4[_0x5048a7(0x2b2)],0x8),'filled':formatResult(_0x5cdeb4[_0x5048a7(0x2b2)],0x8),'price':formatResult(_0x5cdeb4[_0x5048a7(0x24f)],0x8)}),_0x55abf4=_0x5cdeb4[_0x5048a7(0x185)]==_0x5048a7(0x262)?_0x55abf4+_0x5cdeb4[_0x5048a7(0x2b2)]:_0x55abf4-_0x5cdeb4[_0x5048a7(0x2b2)];if(!_0x325f93)_0x325f93=_0x5cdeb4['price'];});_0x2721cb=_0x26897e[_0x1afc00(0x1d1)]-_0x55abf4;let _0x221b87;config[_0x1afc00(0x2a0)]['forEach'](_0x12a7e=>{const _0x3e721d=_0x1afc00;!_0x221b87&&(_0x221b87=_0x12a7e[_0x3e721d(0x144)][_0x3e721d(0x222)](_0x3987cb=>_0x3987cb[_0x3e721d(0x27f)]==_0x26897e[_0x3e721d(0x27f)]),_0x221b87&&(_0x2721cb=_0x221b87['number'],_0x325f93=_0x221b87[_0x3e721d(0x24f)]));});let _0x547411=dbCoinResults[_0x1afc00(0x1bf)](_0x1afc00(0x1d6))[_0x1afc00(0x222)]({'coin':_0x26897e[_0x1afc00(0x27f)]})[_0x1afc00(0x286)]();_0x547411={'coin':_0x26897e['coin'],'number':_0x2721cb,'breakeven':_0x325f93,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1afc00(0x1bf)]('coins')[_0x1afc00(0x222)]({'coin':_0x26897e[_0x1afc00(0x27f)]})['assign'](_0x547411)['write']();}}_0x4bbafd['sort']((_0xf71cae,_0x954166)=>_0xf71cae[_0x1afc00(0x1fe)]>_0x954166[_0x1afc00(0x1fe)]?0x1:_0x954166[_0x1afc00(0x1fe)]>_0xf71cae[_0x1afc00(0x1fe)]?-0x1:0x0);let _0x19f72d=0x0;for(let _0x433d81 of _0x4bbafd){await updateCoinResults(_0x433d81,!![]);}}catch(_0x22f870){await handleError(_0x22f870,_0x1afc00(0x173));}}async function getAllEventOrders(_0x5d527e){const _0x45de2d=_0x2c7e2a;let _0x2f7c6b=[],_0x20e1f6=dbLogs[_0x45de2d(0x1bf)]('logs')[_0x45de2d(0x157)](_0x5d062c=>{const _0x25f88b=_0x45de2d,_0x2d3360=_0x5d062c[_0x25f88b(0x15d)]['toLowerCase']();return _0x2d3360['includes'](_0x5d527e[_0x25f88b(0x1d8)]())&&(_0x2d3360['includes'](_0x25f88b(0x1ca))&&_0x2d3360[_0x25f88b(0x1c4)](_0x25f88b(0x17a))||_0x2d3360[_0x25f88b(0x1c4)](_0x25f88b(0x2b2))&&_0x2d3360[_0x25f88b(0x1c4)](_0x25f88b(0x17a)));})[_0x45de2d(0x1f4)](_0x45de2d(0x24b))[_0x45de2d(0x286)]();return _0x20e1f6[_0x45de2d(0x12a)](_0x32f7c6=>{const _0x1dbb41=_0x45de2d,_0x5d441b=_0x32f7c6[_0x1dbb41(0x15d)][_0x1dbb41(0x1c4)](_0x1dbb41(0x282))?'sell':_0x1dbb41(0x262),_0xf44df2=/#([0-9]|\.)+\s/i,_0x4d15a2=Number(_0xf44df2[_0x1dbb41(0x17d)](_0x32f7c6[_0x1dbb41(0x15d)])[0x0][_0x1dbb41(0x246)](0x1)),_0x19cde8=/@([0-9]|\.)+$/i,_0x3d6ced=Number(_0x19cde8[_0x1dbb41(0x17d)](_0x32f7c6[_0x1dbb41(0x15d)])[0x0][_0x1dbb41(0x246)](0x1));_0x2f7c6b['push']({'datetime':_0x32f7c6['time'],'coin':symbolToCoin(_0x5d527e),'symbol':_0x5d527e,'side':_0x5d441b,'amount':_0x4d15a2,'filled':_0x4d15a2,'price':_0x3d6ced});}),_0x2f7c6b;}async function getAllOrders(_0x3997b8,_0x1d7737){const _0x1a8eba=_0x2c7e2a;let _0x1fe1df=[];while(_0x1d7737<exchange[_0x1a8eba(0x230)]()){const _0x5bb3c1=0x1f4;try{const _0x3ed73b=await exchange[_0x1a8eba(0x1a5)](_0x3997b8,_0x1d7737,_0x5bb3c1);if(_0x3ed73b[_0x1a8eba(0x138)])_0x1d7737=_0x3ed73b[_0x3ed73b['length']-0x1]['timestamp']+0x1,_0x1fe1df=_0x1fe1df['concat'](_0x3ed73b);else break;}catch(_0x32bf34){await handleError(_0x32bf34,'getAllOrders()',_0x3997b8);}}return _0x1fe1df;}async function validate24hChanges(){const _0x15f70a=_0x2c7e2a;for(const _0xd68ecd of currentCoins){if(_0xd68ecd[_0x15f70a(0x27f)]!=config['basecoin']){let _0x41c3e2;_0xd68ecd[_0x15f70a(0x252)]?_0x41c3e2=formatResult((0x1/(global[_0x15f70a(0x17e)][noslash(_0xd68ecd[_0x15f70a(0x14f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x41c3e2=global[_0x15f70a(0x17e)][noslash(_0xd68ecd[_0x15f70a(0x14f)])],_0x41c3e2<config[_0x15f70a(0x236)]&&(logHistory(_0x15f70a(0x1de),_0xd68ecd['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x41c3e2+'%'),logHistory(_0x15f70a(0x1de),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x15f70a(0x1de),_0x15f70a(0x14c)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x442c96,_0x469e2a){const _0x4a66e=_0x2c7e2a;if(!_0x442c96)return!![];const _0x261d28=_0x469e2a[_0x4a66e(0x1a9)]('.'),_0x2161ac=_0x442c96['split']('.');for(var _0x33cb09=0x0;_0x33cb09<_0x2161ac['length'];_0x33cb09++){const _0x2500d2=~~_0x2161ac[_0x33cb09],_0x462e98=~~_0x261d28[_0x33cb09];if(_0x2500d2<_0x462e98)return!![];if(_0x2500d2>_0x462e98)return![];}return![];}async function oneTimeMigration(){const _0x15e777=_0x2c7e2a;let _0x44a02c=dbLogs[_0x15e777(0x1bf)](_0x15e777(0x1d2))[_0x15e777(0x286)]();if(isOlderVersion(_0x44a02c,_0x15e777(0x243))){let _0x1e97ba=[];const _0x3ef361=dbLogs[_0x15e777(0x1bf)](_0x15e777(0x152))[_0x15e777(0x286)]();_0x3ef361[_0x15e777(0x12a)](_0x1e5eee=>{const _0x2eb872=_0x15e777;_0x1e97ba[_0x2eb872(0x22a)]({'time':_0x1e5eee[_0x2eb872(0x24b)],'type':_0x1e5eee[_0x2eb872(0x1c9)],'event':_0x1e5eee[_0x2eb872(0x15d)]});}),dbLogs['get'](_0x15e777(0x152))[_0x15e777(0x1af)](_0x1e97ba)['write']();}let _0x19e9d0=dbConfig[_0x15e777(0x1bf)](_0x15e777(0x1d2))['value']();if(isOlderVersion(_0x19e9d0,'2.3.5')){let _0x1b19fc=dbConfig[_0x15e777(0x1bf)](_0x15e777(0x1f0))[_0x15e777(0x222)]({'botID':botID})[_0x15e777(0x286)]();if(_0x1b19fc){let _0x540439=[];_0x1b19fc['portfolio'][_0x15e777(0x12a)](_0x9617f2=>{const _0x2fb9df=_0x15e777;_0x540439[_0x2fb9df(0x22a)]({'coin':_0x9617f2[_0x2fb9df(0x27f)],'number':_0x9617f2['startnumber'],'price':_0x9617f2[_0x2fb9df(0x1a6)]}),delete _0x9617f2['startnumber'],delete _0x9617f2[_0x2fb9df(0x1a6)];});if(_0x540439[_0x15e777(0x138)]!==0x0)fs[_0x15e777(0x1ac)](configbackuppath+(_0x15e777(0x228)+botID+'.json'),JSON[_0x15e777(0x128)](_0x540439,null,0x4),function(_0x4c5221){if(_0x4c5221){}});const _0x46819e=(_0x363519,_0x15fee6)=>{const _0x5bdf02=_0x15e777;let _0x72d17b=[];_0x15fee6[_0x5bdf02(0x12a)](_0x4a5638=>{const _0x50215b=_0x5bdf02,_0x2be5f6=_0x363519[_0x50215b(0x222)](_0x976f17=>_0x976f17[_0x50215b(0x27f)]==_0x4a5638[_0x50215b(0x27f)]);if(!_0x2be5f6)_0x72d17b[_0x50215b(0x22a)](_0x4a5638);});let _0x398798=[];return _0x363519[_0x5bdf02(0x12a)](_0x521914=>{const _0x4bd56c=_0x5bdf02,_0x1ea39f=_0x15fee6[_0x4bd56c(0x222)](_0x4a0fbc=>_0x4a0fbc[_0x4bd56c(0x27f)]==_0x521914[_0x4bd56c(0x27f)]);if(!_0x1ea39f||_0x1ea39f[_0x4bd56c(0x1d1)]==0x0&&_0x521914[_0x4bd56c(0x1d1)]!=0x0)_0x398798[_0x4bd56c(0x22a)](_0x521914);}),{'missingDay1':_0x72d17b,'notInDay2':_0x398798};},_0x90afa6=dbPerformance[_0x15e777(0x1bf)]('data')[_0x15e777(0x221)]()['value']();if(_0x90afa6[_0x15e777(0x138)]>0x1){const {missingDay1:_0x23465d,notInDay2:_0xd310e9}=_0x46819e(_0x540439,_0x90afa6[0x1][_0x15e777(0x1d6)]);_0x540439=[..._0x540439,..._0x23465d],_0xd310e9['forEach'](_0x4abb4c=>{const _0x9ebf99=_0x15e777;let _0x325758=_0x540439[_0x9ebf99(0x1a8)](_0x52e325=>_0x52e325[_0x9ebf99(0x27f)]==_0x4abb4c[_0x9ebf99(0x27f)]);_0x325758!=-0x1&&_0x540439[_0x9ebf99(0x165)](_0x325758,0x1);});}_0x540439[_0x15e777(0x25e)]((_0x117848,_0x5367b4)=>_0x117848[_0x15e777(0x27f)]>_0x5367b4[_0x15e777(0x27f)]?0x1:_0x5367b4['coin']>_0x117848[_0x15e777(0x27f)]?-0x1:0x0);let _0x246830=[{'date':_0x1b19fc[_0x15e777(0x13a)],'changes':_0x540439}];_0x90afa6['length']>0x2&&_0x90afa6['forEach']((_0x506367,_0x149873)=>{const _0x351676=_0x15e777;if(_0x149873>0x0&&_0x149873<_0x90afa6[_0x351676(0x138)]-0x1){const {missingDay1:_0x3971a8,notInDay2:_0x56073b}=_0x46819e(_0x90afa6[_0x149873][_0x351676(0x1d6)],_0x90afa6[_0x149873+0x1][_0x351676(0x1d6)]);_0x540439=[],(_0x3971a8[_0x351676(0x138)]!=0x0||_0x56073b[_0x351676(0x138)]!=0x0)&&(_0x3971a8['length']!=0x0&&_0x540439[_0x351676(0x22a)](..._0x3971a8),_0x56073b[_0x351676(0x138)]!=0x0&&(_0x56073b[_0x351676(0x12a)](_0x592e3d=>{const _0x2aad63=_0x351676;_0x592e3d[_0x2aad63(0x1d1)]=-_0x592e3d['number'];}),_0x540439['push'](..._0x56073b)),_0x540439['sort']((_0x5519bf,_0xd94921)=>_0x5519bf['coin']>_0xd94921[_0x351676(0x27f)]?0x1:_0xd94921[_0x351676(0x27f)]>_0x5519bf[_0x351676(0x27f)]?-0x1:0x0),_0x246830[_0x351676(0x22a)]({'date':_0x90afa6[_0x149873+0x1][_0x351676(0x1b9)],'changes':_0x540439}));}}),dbConfig[_0x15e777(0x1bf)](_0x15e777(0x1f0))[_0x15e777(0x222)]({'botID':botID})[_0x15e777(0x1af)]({..._0x1b19fc,'liquidity':_0x246830})[_0x15e777(0x28c)]();}}if(isOlderVersion(_0x19e9d0,_0x15e777(0x15c))){let _0x3e95ba=dbConfig[_0x15e777(0x1bf)](_0x15e777(0x1f0))[_0x15e777(0x222)]({'botID':botID})['value']();if(_0x3e95ba){const _0x5ed898=_0x3e95ba['exchange'],_0x515119=_0x5ed898?capitalize(_0x5ed898):'Binance';dbConfig[_0x15e777(0x1bf)]('bot')[_0x15e777(0x222)]({'botID':botID})[_0x15e777(0x1af)]({'exchange':_0x515119})[_0x15e777(0x28c)]();}}let _0x29b733=dbPerformance[_0x15e777(0x1bf)]('version')[_0x15e777(0x286)]();isOlderVersion(_0x29b733,_0x15e777(0x243))&&setStartDatePerformance();let _0x352575=dbCoinResults[_0x15e777(0x1bf)](_0x15e777(0x1d2))[_0x15e777(0x286)]();if(isOlderVersion(_0x352575,_0x15e777(0x1e3))){let _0x26e23f=dbCoinResults[_0x15e777(0x1bf)]('coins')[_0x15e777(0x286)]();if(_0x26e23f['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5a3836=_0x2c7e2a;dbConfig[_0x5a3836(0x1e1)](_0x5a3836(0x1d2),serverversion)[_0x5a3836(0x28c)](),dbPerformance[_0x5a3836(0x1e1)]('version',serverversion)[_0x5a3836(0x28c)](),dbLogs['set'](_0x5a3836(0x1d2),serverversion)[_0x5a3836(0x28c)](),dbCoinResults[_0x5a3836(0x1e1)](_0x5a3836(0x1d2),serverversion)[_0x5a3836(0x28c)]();}function getConfiguration(_0x36ce23){const _0x1c2451=_0x2c7e2a;let _0x1147dc=dbConfig[_0x1c2451(0x1bf)](_0x1c2451(0x1f0))[_0x1c2451(0x222)]({'botID':_0x36ce23})[_0x1c2451(0x286)]();if(_0x1147dc){let _0x2180a8=![];typeof _0x1147dc[_0x1c2451(0x270)]=='string'&&(_0x1147dc={..._0x1147dc,'threshold':Number(_0x1147dc['threshold'])},_0x2180a8=!![]),_0x1147dc[_0x1c2451(0x236)]==undefined&&(_0x1147dc={..._0x1147dc,'change24h':-0x14},_0x2180a8=!![]),_0x1147dc['fiat']==undefined&&(_0x1147dc={..._0x1147dc,'fiat':_0x1c2451(0x113)},_0x2180a8=!![]),_0x1147dc[_0x1c2451(0x28e)]==undefined&&(_0x1147dc={..._0x1147dc,'onepagemode':settings['onepagemode']},_0x2180a8=!![]),_0x1147dc[_0x1c2451(0x29f)]==undefined&&(_0x1147dc={..._0x1147dc,'colorscheme':_0x1c2451(0x218)},_0x2180a8=!![]),_0x1147dc['autoliquidity']==undefined&&(_0x1147dc={..._0x1147dc,'autoliquidity':!![]},_0x2180a8=!![]),_0x2180a8&&(_0x1147dc={'botID':_0x1147dc[_0x1c2451(0x28f)],'exchange':_0x1147dc[_0x1c2451(0x231)],'apiKey':_0x1147dc['apiKey'],'apiSecret':_0x1147dc[_0x1c2451(0x223)],'apiPassword':_0x1147dc[_0x1c2451(0x23a)],'basecoin':_0x1147dc[_0x1c2451(0x179)],'botname':_0x1147dc[_0x1c2451(0x187)],'showname':_0x1147dc[_0x1c2451(0x200)],'threshold':_0x1147dc['threshold'],'ordertype':_0x1147dc[_0x1c2451(0x1fa)],'timeout':_0x1147dc[_0x1c2451(0x271)],'fiat':_0x1147dc[_0x1c2451(0x1e2)],'startdate':_0x1147dc['startdate'],'recreate':_0x1147dc['recreate'],'timeshift':_0x1147dc[_0x1c2451(0x149)],'onepagemode':_0x1147dc[_0x1c2451(0x28e)],'headless':_0x1147dc[_0x1c2451(0x1ae)],'cooldown':_0x1147dc[_0x1c2451(0x284)],'change24h':_0x1147dc['change24h'],'emojibuy':_0x1147dc[_0x1c2451(0x202)],'emojisell':_0x1147dc[_0x1c2451(0x215)],'colorscheme':_0x1147dc[_0x1c2451(0x29f)],'portfolio':_0x1147dc[_0x1c2451(0x1f7)],'autoliquidity':_0x1147dc[_0x1c2451(0x298)],'liquidity':_0x1147dc[_0x1c2451(0x2a0)],'openOrders':_0x1147dc[_0x1c2451(0x135)]},dbConfig[_0x1c2451(0x1bf)]('bot')[_0x1c2451(0x212)]()['write'](),dbConfig[_0x1c2451(0x1bf)](_0x1c2451(0x1f0))[_0x1c2451(0x22a)](_0x1147dc)['write']());}else _0x1147dc={'botID':_0x36ce23,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1c2451(0x27e)+_0x36ce23,'showname':![],'threshold':0x3,'ordertype':_0x1c2451(0x1ca),'timeout':0x14,'fiat':_0x1c2451(0x113),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1c2451(0x149)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1c2451(0x218),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1147dc;}function emittedConfiguration(){const _0x44317e=_0x2c7e2a;let _0x9b238a;if(config[_0x44317e(0x25f)]=='')_0x9b238a={...config,'configstate':_0x44317e(0x1ea)};else config[_0x44317e(0x25f)]==_0x44317e(0x11d)?_0x9b238a={...config,'configstate':'recovery'}:(_0x9b238a={...config,'apiKey':'************','apiSecret':_0x44317e(0x29c)},config[_0x44317e(0x23a)]&&(_0x9b238a[_0x44317e(0x23a)]=_0x44317e(0x29c)));return _0x9b238a;}function getSettings(){const _0xe5b98e=_0x2c7e2a;return dbSettings['get'](_0xe5b98e(0x208))[_0xe5b98e(0x286)]();}function getSecure(){const _0x62460a=_0x2c7e2a;return dbSecure[_0x62460a(0x1bf)](_0x62460a(0x141))[_0x62460a(0x286)]()||{};}function updateTimeshift(_0x4bf1b5){const _0x4b71f8=_0x2c7e2a;let _0x453be4=dbConfig[_0x4b71f8(0x1bf)](_0x4b71f8(0x1f0))[_0x4b71f8(0x222)]({'botID':botID})[_0x4b71f8(0x286)]();_0x453be4&&dbConfig[_0x4b71f8(0x1bf)](_0x4b71f8(0x1f0))[_0x4b71f8(0x222)]({'botID':botID})[_0x4b71f8(0x1af)]({'timeshift':_0x4bf1b5})[_0x4b71f8(0x28c)](),config[_0x4b71f8(0x149)]=_0x4bf1b5,proxyEmit(_0x4b71f8(0x162),emittedConfiguration());}function updateOnepagemode(_0x2b79de){const _0x264163=_0x2c7e2a;let _0x42a7f0=dbConfig[_0x264163(0x1bf)](_0x264163(0x1f0))[_0x264163(0x222)]({'botID':botID})['value']();_0x42a7f0&&dbConfig[_0x264163(0x1bf)](_0x264163(0x1f0))[_0x264163(0x222)]({'botID':botID})[_0x264163(0x1af)]({'onepagemode':_0x2b79de})['write'](),config[_0x264163(0x28e)]=_0x2b79de,proxyEmit(_0x264163(0x162),emittedConfiguration());}async function storeConfiguration(_0x40e827){const _0x4ff926=_0x2c7e2a;logger[_0x4ff926(0x1f3)](_0x4ff926(0x275));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4ff926(0x1f3)](_0x4ff926(0x1d4));let _0x29f6cc=![],_0x5c2950=![],_0x31dba3=[];_0x40e827[_0x4ff926(0x1f7)]['forEach'](_0x408a69=>{const _0x574726=_0x4ff926;if(!_0x408a69['excluded']&&_0x408a69['coin']!=_0x40e827[_0x574726(0x179)])_0x31dba3[_0x574726(0x22a)](_0x408a69[_0x574726(0x14f)]);}),_0x31dba3['forEach'](_0x2505d2=>{const _0x337b01=_0x4ff926,_0xbfb94f=currentCoins[_0x337b01(0x222)](_0x4efa7b=>_0x4efa7b[_0x337b01(0x14f)]==_0x2505d2);!_0xbfb94f&&(_0x29f6cc=!![]);}),currentCoins[_0x4ff926(0x12a)](_0x2a3691=>{const _0x18c85d=_0x4ff926;if(_0x2a3691[_0x18c85d(0x27f)]!=config[_0x18c85d(0x179)]){const _0x12b03f=_0x31dba3[_0x18c85d(0x222)](_0x513fb0=>_0x513fb0==_0x2a3691[_0x18c85d(0x14f)]);!_0x12b03f&&(_0x29f6cc=!![]);}}),_0x40e827[_0x4ff926(0x1f7)]['forEach'](_0x27de41=>{const _0x17ddb6=_0x4ff926,_0x5aff16=config['portfolio']['find'](_0x5304f6=>_0x5304f6[_0x17ddb6(0x27f)]==_0x27de41[_0x17ddb6(0x27f)]);if(_0x5aff16&&_0x27de41['offset']!=_0x5aff16[_0x17ddb6(0x1a1)])_0x5c2950=!![];});let _0x4663cc=dbConfig[_0x4ff926(0x1bf)](_0x4ff926(0x1f0))[_0x4ff926(0x222)]({'botID':botID})[_0x4ff926(0x286)]();_0x40e827={..._0x40e827,'apiKey':crypt['decrypt'](secure[_0x4ff926(0x2ad)],_0x40e827[_0x4ff926(0x25f)])[_0x4ff926(0x112)],'apiSecret':crypt[_0x4ff926(0x1d5)](secure[_0x4ff926(0x2ad)],_0x40e827['apiSecret'])['message']};_0x40e827['apiPassword']&&(_0x40e827[_0x4ff926(0x23a)]=crypt[_0x4ff926(0x1d5)](secure[_0x4ff926(0x2ad)],_0x40e827[_0x4ff926(0x23a)])['message']);let _0x164ff6=![];if(_0x4663cc){_0x40e827[_0x4ff926(0x25f)]==_0x4ff926(0x29c)?_0x40e827[_0x4ff926(0x25f)]=config[_0x4ff926(0x25f)]:_0x164ff6=!![];_0x40e827[_0x4ff926(0x223)]==_0x4ff926(0x29c)?_0x40e827[_0x4ff926(0x223)]=config[_0x4ff926(0x223)]:_0x164ff6=!![];if(_0x40e827['apiPassword']==_0x4ff926(0x29c))_0x40e827[_0x4ff926(0x23a)]=config[_0x4ff926(0x23a)];else{if(_0x40e827[_0x4ff926(0x23a)])_0x164ff6=!![];}dbConfig[_0x4ff926(0x1bf)](_0x4ff926(0x1f0))['find']({'botID':botID})[_0x4ff926(0x1af)](_0x40e827)[_0x4ff926(0x28c)]();}else dbConfig[_0x4ff926(0x1bf)](_0x4ff926(0x1f0))[_0x4ff926(0x22a)](_0x40e827)[_0x4ff926(0x28c)](),_0x164ff6=!![],process[_0x4ff926(0x1a2)]({'status':_0x4ff926(0x26d),'live':_0x4ff926(0x17c)},_0x500782=>{});process[_0x4ff926(0x1a2)]({'botname':_0x40e827[_0x4ff926(0x187)]},_0x5a26e0=>{}),config={..._0x40e827},updateBotManager(),proxyEmit(_0x4ff926(0x273)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x164ff6)await reset(!![]);else _0x29f6cc||_0x5c2950?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x4ff926(0x1f3)](_0x4ff926(0x1a3));}async function storeHeadless(_0x1d2b47){const _0x2f6bdc=_0x2c7e2a,_0x31e9f9={...config,'headless':_0x1d2b47['headless']};let _0x4d4b08=dbConfig[_0x2f6bdc(0x1bf)](_0x2f6bdc(0x1f0))['find']({'botID':botID})['value']();_0x4d4b08&&dbConfig['get']('bot')[_0x2f6bdc(0x222)]({'botID':botID})[_0x2f6bdc(0x1af)](_0x31e9f9)[_0x2f6bdc(0x28c)](),config={..._0x31e9f9},updateBotManager(),proxyEmit(_0x2f6bdc(0x162),emittedConfiguration());}async function storeFiat(_0xa5a865){const _0x9217a0=_0x2c7e2a,_0x32aec7={...config,'fiat':_0xa5a865};let _0xa05824=dbConfig[_0x9217a0(0x1bf)](_0x9217a0(0x1f0))[_0x9217a0(0x222)]({'botID':botID})['value']();_0xa05824&&dbConfig[_0x9217a0(0x1bf)](_0x9217a0(0x1f0))[_0x9217a0(0x222)]({'botID':botID})[_0x9217a0(0x1af)](_0x32aec7)[_0x9217a0(0x28c)](),config={..._0x32aec7},proxyEmit(_0x9217a0(0x162),emittedConfiguration());}function resetHistory(){const _0x59fc46=_0x2c7e2a;logger[_0x59fc46(0x277)]('Resetting\x20bot\x20history');try{if(fs[_0x59fc46(0x175)](path[_0x59fc46(0x239)](configpath,'bot-'+botID+'-events.json')))fs[_0x59fc46(0x24d)](path[_0x59fc46(0x239)](configpath,_0x59fc46(0x126)+botID+_0x59fc46(0x150)));if(fs[_0x59fc46(0x175)](path[_0x59fc46(0x239)](configpath,_0x59fc46(0x126)+botID+_0x59fc46(0x1ff))))fs[_0x59fc46(0x24d)](path['join'](configpath,_0x59fc46(0x126)+botID+_0x59fc46(0x1ff)));if(fs['existsSync'](path[_0x59fc46(0x239)](configpath,_0x59fc46(0x126)+botID+'-results.json')))fs[_0x59fc46(0x24d)](path[_0x59fc46(0x239)](configpath,_0x59fc46(0x126)+botID+_0x59fc46(0x166)));}catch(_0x474204){if(_0x474204)logger[_0x59fc46(0x277)]('Error\x20while\x20deleting\x20files:\x20',_0x474204);}const _0x116e2f=getDate();let _0x17be73=[];currentCoins[_0x59fc46(0x12a)](_0x7586e5=>{const _0x47bfd1=_0x59fc46;_0x17be73[_0x47bfd1(0x22a)]({'coin':_0x7586e5[_0x47bfd1(0x27f)],'number':_0x7586e5['number'],'price':_0x7586e5[_0x47bfd1(0x288)]});});let _0x55b061=dbConfig[_0x59fc46(0x1bf)](_0x59fc46(0x1f0))[_0x59fc46(0x222)]({'botID':botID})['value']();_0x55b061&&(dbConfig[_0x59fc46(0x1bf)](_0x59fc46(0x1f0))[_0x59fc46(0x222)]({'botID':botID})[_0x59fc46(0x1af)]({'liquidity':[{'date':_0x116e2f,'changes':_0x17be73}]})['write'](),config[_0x59fc46(0x2a0)]=[]),process['send']({'stop':_0x59fc46(0x18a)},_0xcd165a=>{});}function noslash(_0x3a575f){return _0x3a575f['replace']('/','');}function updateHighestFee(_0x4f5d4e){const _0x5859c8=_0x2c7e2a;if(_0x4f5d4e[_0x5859c8(0x252)]){let _0xf21b22={'filled':_0x4f5d4e[_0x5859c8(0x2b2)]*_0x4f5d4e['price'],'amount':_0x4f5d4e[_0x5859c8(0x2b2)]*_0x4f5d4e[_0x5859c8(0x24f)],'side':_0x4f5d4e[_0x5859c8(0x185)]==_0x5859c8(0x282)?_0x5859c8(0x262):'sell','price':0x1/_0x4f5d4e[_0x5859c8(0x24f)]};_0x4f5d4e={..._0x4f5d4e,..._0xf21b22};}const _0x475d1d=defaultFee*_0x4f5d4e[_0x5859c8(0x2b2)]*_0x4f5d4e['price'];lastFees['recent20'][_0x5859c8(0x138)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x5859c8(0x11a)][_0x5859c8(0x22a)](_0x475d1d),lastFees[_0x5859c8(0x133)]=Math[_0x5859c8(0x27d)](...lastFees[_0x5859c8(0x11a)]);}async function updateNumberCoinsCcxt(_0x435f94){const _0x65a25c=_0x2c7e2a;logger['debug'](_0x65a25c(0x22e)+_0x435f94[_0x65a25c(0x14f)]+_0x65a25c(0x20a)+_0x435f94[_0x65a25c(0x279)]+_0x65a25c(0x20a)+_0x435f94['filled']+_0x65a25c(0x119)+_0x435f94[_0x65a25c(0x124)]+_0x65a25c(0x20a)+_0x435f94['id']);let _0x451bdc=_0x435f94['status'],_0x1e60fb=![];currentCoins[_0x65a25c(0x12a)](_0x27e42f=>{_0x27e42f['symbol']==_0x435f94['symbol']&&(_0x1e60fb=!![]);});if(!_0x1e60fb)return;const _0x2aa421=currentCoins[_0x65a25c(0x222)](_0x5d8d39=>_0x5d8d39[_0x65a25c(0x14f)]==_0x435f94[_0x65a25c(0x14f)]),_0x15eeef=_0x2af995=>{const _0x42a8a9=_0x65a25c;if(_0x2aa421)_0x2aa421[_0x42a8a9(0x1b3)]=_0x2af995;};if(_0x451bdc==_0x65a25c(0x2a4))_0x15eeef(_0x65a25c(0x2a4));else{if(_0x451bdc==_0x65a25c(0x29e)){_0x15eeef(_0x65a25c(0x29e));const _0x56ef8c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x56ef8c,await getOpenOrders(),handleOpenOrders();}else{if(_0x451bdc==_0x65a25c(0x268)){let _0x5009a2=![];if(lastOrders)for(const _0x386e7f of lastOrders){const _0x561de9=0xc8,_0x544e9d=0x1388;let _0x5b814f=0x0;while(!_0x386e7f['orderId']&&_0x5b814f*_0x561de9<_0x544e9d){_0x5b814f++,await sleep(_0x561de9);}if(_0x5b814f>0x0)logger[_0x65a25c(0x1f3)](_0x65a25c(0x209)+_0x5b814f*_0x561de9/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x386e7f['orderId']==_0x435f94['id']){logger[_0x65a25c(0x1f3)](_0x65a25c(0x151)+_0x435f94['id']),_0x5009a2=!![];if(_0x386e7f[_0x65a25c(0x2b2)]==0x0){logger[_0x65a25c(0x1f3)](_0x65a25c(0x1c7)+_0x435f94['id']);if(_0x435f94[_0x65a25c(0x127)])_0x386e7f['price']=_0x435f94[_0x65a25c(0x127)];else{if(_0x435f94[_0x65a25c(0x24f)])_0x386e7f['price']=_0x435f94[_0x65a25c(0x24f)];else{}}_0x386e7f[_0x65a25c(0x2b2)]=_0x435f94[_0x65a25c(0x2b2)],updateHighestFee(_0x386e7f),_0x15eeef(_0x65a25c(0x2b2)),await validateOrders();if(lockOrders==ORDERS[_0x65a25c(0x1f1)]){const _0x491e50=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x491e50;}_0x386e7f[_0x65a25c(0x1ec)]={'currency':_0x435f94[_0x65a25c(0x1ec)]?_0x435f94['fee'][_0x65a25c(0x15a)]:null,'cost':_0x435f94['fee']?_0x435f94[_0x65a25c(0x1ec)][_0x65a25c(0x1c0)]:0x0},await updateCoinResults(_0x386e7f);}}}if(!_0x5009a2){logger['debug'](_0x65a25c(0x14d)+_0x435f94['id']),_0x15eeef('filled');const _0xa221a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xa221a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x7b71e3=JSON['parse'](lastBalances['portfolio']);const _0x336c51=_0x7b71e3['find'](_0x475c79=>_0x475c79[_0x65a25c(0x14f)]==_0x435f94[_0x65a25c(0x14f)]);if(_0x336c51){if(_0x451bdc==_0x65a25c(0x2a4))_0x336c51[_0x65a25c(0x1b3)]=_0x336c51[_0x65a25c(0x1b3)]=='filled'?_0x65a25c(0x2b2):_0x65a25c(0x2a4);else{if(_0x451bdc==_0x65a25c(0x29e))_0x336c51['orderstatus']=_0x336c51['orderstatus']=='filled'?_0x65a25c(0x2b2):_0x65a25c(0x29e);else _0x451bdc==_0x65a25c(0x268)&&(_0x336c51[_0x65a25c(0x1b3)]=_0x65a25c(0x2b2));}}lastBalances={...lastBalances,'portfolio':JSON[_0x65a25c(0x128)](_0x7b71e3)},proxyEmit(_0x65a25c(0x280),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x51fd67=![];currentCoins['forEach'](_0xc98646=>{const _0x49240c=_0x54e0;_0x51fd67=allOpenOrders[_0x49240c(0x222)](_0x5c48d6=>_0x5c48d6[_0x49240c(0x14f)]==_0xc98646[_0x49240c(0x14f)]),_0xc98646['orderstatus']=_0x51fd67?_0x49240c(0x2a4):_0x49240c(0x122);});}async function getCoins(_0x26ef76=0x0,_0x478fd6=!![],_0x241902=config['basecoin']){const _0xc3642=_0x2c7e2a;let _0x56fb7e,_0x27ea91=[],_0x42a3a3=[],_0xab1dba=[];if(_0x26ef76)await sleep(_0x26ef76);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x56fb7e=await exchange[_0xc3642(0x21b)](),mybalances=_0x56fb7e[_0xc3642(0x188)];for(const [_0x50d8cb,_0x55680e]of Object['entries'](mybalances)){_0xab1dba['push'](_0x50d8cb);}config[_0xc3642(0x1f7)][_0xc3642(0x12a)](_0x12ac60=>{const _0x2995fd=_0xc3642;!_0xab1dba[_0x2995fd(0x1c4)](_0x12ac60[_0x2995fd(0x27f)])&&(mybalances[_0x12ac60[_0x2995fd(0x27f)]]=0x0);});if(_0x241902=='')for(const [_0x5933d7,_0x27c4ea]of Object[_0xc3642(0x24a)](mybalances)){_0x27c4ea!=0x0&&_0x27ea91[_0xc3642(0x22a)]({'coin':_0x5933d7});}else{let _0x51e363=![];for(const [_0x932283,_0x1e5476]of Object[_0xc3642(0x24a)](mybalances)){const _0x4b77b6=config[_0xc3642(0x1f7)][_0xc3642(0x222)](_0x174e71=>_0x174e71[_0xc3642(0x27f)]==_0x932283),_0x341481=_0x932283+'/'+_0x241902,_0x5c654e=_0x241902+'/'+_0x932283,_0x3caa87=currentCoins[_0xc3642(0x222)](_0x3e2327=>_0x3e2327[_0xc3642(0x27f)]==_0x932283);_0x51e363=![];if((_0x1e5476!=0x0||_0x4b77b6)&&(allSymbols[_0xc3642(0x1c4)](_0x341481)||_0x932283==_0x241902))_0x27ea91[_0xc3642(0x22a)]({'coin':_0x932283,'symbol':_0x341481,'reverse':![],'number':Math[_0xc3642(0x27d)](_0x1e5476+(_0x4b77b6&&_0x4b77b6[_0xc3642(0x1a1)]||0x0),0x0),'orderstatus':_0x3caa87?_0x3caa87[_0xc3642(0x1b3)]:_0xc3642(0x122)});else{if((_0x1e5476!=0x0||_0x4b77b6)&&allSymbols[_0xc3642(0x1c4)](_0x5c654e))_0x27ea91[_0xc3642(0x22a)]({'coin':_0x932283,'symbol':_0x5c654e,'reverse':!![],'number':Math[_0xc3642(0x27d)](_0x1e5476+(_0x4b77b6&&_0x4b77b6[_0xc3642(0x1a1)]||0x0),0x0),'orderstatus':_0x3caa87?_0x3caa87['orderstatus']:_0xc3642(0x122)});else _0x4b77b6&&_0x27ea91[_0xc3642(0x22a)]({'coin':_0x4b77b6[_0xc3642(0x27f)],'symbol':_0x4b77b6[_0xc3642(0x14f)],'reverse':_0x4b77b6[_0xc3642(0x252)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x5aa90c){if(!_0x478fd6)handleErrorNoStop(_0x5aa90c,_0xc3642(0x1e8));else await handleError(_0x5aa90c,'getCoins()');}return _0x42a3a3=cloneDeep(_0x27ea91),_0x27ea91=_0x27ea91[_0xc3642(0x157)](_0x593f81=>{const _0x481deb=_0xc3642,_0x3b30a5=config[_0x481deb(0x1f7)]['find'](_0xce63fe=>_0xce63fe[_0x481deb(0x27f)]==_0x593f81[_0x481deb(0x27f)]);return _0x3b30a5&&!_0x3b30a5[_0x481deb(0x1c3)];}),[_0x27ea91,_0x42a3a3];}async function getCoinNumber(_0x5ffc17){const _0x44dd31=_0x2c7e2a;let _0x5c0938;try{const _0x1669af=await exchange[_0x44dd31(0x21b)]();_0x5c0938=_0x1669af['total'][_0x5ffc17];}catch(_0x523761){await handleError(_0x523761,_0x44dd31(0x16e));}return _0x5c0938;}async function getOpenOrders(){const _0x12330f=_0x2c7e2a;let _0x5f4f93;allOpenOrders=[];try{for(const _0x22e54d of config['portfolio']){!_0x22e54d['excluded']&&_0x22e54d[_0x12330f(0x27f)]!=config[_0x12330f(0x179)]&&(_0x5f4f93=await exchange[_0x12330f(0x161)](_0x22e54d[_0x12330f(0x14f)]),_0x5f4f93[_0x12330f(0x138)]>0x0&&allOpenOrders[_0x12330f(0x22a)](_0x5f4f93[0x0]));}}catch(_0x110d0c){await handleError(_0x110d0c,'getOpenOrders()');}}async function handleOpenOrders(_0x4ffb41=0x0){const _0xc19b41=_0x2c7e2a;allOpenOrders[_0xc19b41(0x138)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x4ffb41==0x0?(logger[_0xc19b41(0x1f3)](_0xc19b41(0x1c5)),_0x4ffb41++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xc19b41(0x1f3)](_0xc19b41(0x26c)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x55454c){const _0x598302=_0x2c7e2a,_0x163402=ccxt[_0x598302(0x176)][_0x55454c[_0x598302(0x231)][_0x598302(0x1d8)]()],_0x386567=new _0x163402({'apiKey':_0x55454c[_0x598302(0x25f)],'secret':_0x55454c[_0x598302(0x223)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x598302(0x1f8)}});if(_0x55454c[_0x598302(0x23a)])_0x386567[_0x598302(0x21e)]=_0x55454c[_0x598302(0x23a)];try{await _0x386567['loadMarkets']();}catch(_0x2a94e9){throw _0x2a94e9;}}function cloneDeep(_0x38adac){const _0x29b2a1=_0x2c7e2a;return JSON[_0x29b2a1(0x16a)](JSON['stringify'](_0x38adac));}async function getPortfolio(_0x281765){const _0xf3b0c5=_0x2c7e2a;let _0xe6f228=[],_0x5a22ee=[],_0x181613=[],_0x48b773;if(_0x281765[_0xf3b0c5(0x25f)]!==_0xf3b0c5(0x29c)||_0x281765[_0xf3b0c5(0x223)]!==_0xf3b0c5(0x29c)||_0x281765[_0xf3b0c5(0x23a)]&&_0x281765['apiPassword']!==_0xf3b0c5(0x29c)){if(config['exchange']){if(_0x281765[_0xf3b0c5(0x25f)]==_0xf3b0c5(0x29c))_0x281765[_0xf3b0c5(0x25f)]=config['apiKey'];if(_0x281765[_0xf3b0c5(0x223)]==_0xf3b0c5(0x29c))_0x281765[_0xf3b0c5(0x223)]=config['apiSecret'];if(_0x281765[_0xf3b0c5(0x23a)]==_0xf3b0c5(0x29c))_0x281765['apiPassword']=config['apiPassword'];try{await testAPI(_0x281765);}catch(_0x2ecbae){if(_0x2ecbae[_0xf3b0c5(0x22b)]()[_0xf3b0c5(0x1c4)]('AuthenticationError')){logger['debug']('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0xf3b0c5(0x1f7),![]);return;}else{handleError(_0x2ecbae,_0xf3b0c5(0x2ae));return;}}}await initExchange(_0x281765[_0xf3b0c5(0x231)],_0x281765[_0xf3b0c5(0x25f)],_0x281765[_0xf3b0c5(0x223)],_0x281765[_0xf3b0c5(0x23a)]);try{await loadSymbols();}catch(_0x1bec55){if(_0x1bec55[_0xf3b0c5(0x22b)]()[_0xf3b0c5(0x1c4)]('AuthenticationError')){proxyEmit(_0xf3b0c5(0x1f7),![]);return;}else{handleError(_0x1bec55,_0xf3b0c5(0x260));return;}}const _0x492b9e=await getCoins(0x0,![],_0x281765[_0xf3b0c5(0x179)]);_0x181613=cloneDeep(_0x492b9e[0x1]);}else{const _0x2181f5=await getCoins();_0x181613=cloneDeep(_0x2181f5[0x1]);}if(_0x281765['basecoin']=='')proxyEmit(_0xf3b0c5(0x1f7),_0x181613);else{_0x181613[_0xf3b0c5(0x12a)](_0x248029=>{const _0x113be4=_0xf3b0c5;if(_0x248029[_0x113be4(0x27f)]!=_0x281765[_0x113be4(0x179)]&&allSymbols[_0x113be4(0x1c4)](_0x248029[_0x113be4(0x14f)]))_0xe6f228[_0x113be4(0x22a)](_0x248029[_0x113be4(0x14f)]);});if(_0xe6f228['length']==0x0)logHistory(_0xf3b0c5(0x1de),_0xf3b0c5(0x2b0));else{try{_0x5a22ee=await getTickers(_0xe6f228);}catch(_0x345e05){if(_0x345e05[_0xf3b0c5(0x22b)]()[_0xf3b0c5(0x1c4)](_0xf3b0c5(0x194))){proxyEmit(_0xf3b0c5(0x1f7),![]);return;}else handleError(_0x345e05,_0xf3b0c5(0x131));}_0x181613[_0xf3b0c5(0x12a)](_0x5ced41=>{const _0x17cf21=_0xf3b0c5;_0x5ced41[_0x17cf21(0x27f)]!=_0x281765[_0x17cf21(0x179)]?_0x5a22ee[_0x5ced41[_0x17cf21(0x14f)]]?_0x48b773=_0x5ced41[_0x17cf21(0x252)]?0x1/_0x5a22ee[_0x5ced41[_0x17cf21(0x14f)]][_0x17cf21(0x288)]:_0x5a22ee[_0x5ced41[_0x17cf21(0x14f)]][_0x17cf21(0x288)]:_0x48b773=0x0:_0x48b773=0x1,_0x5ced41[_0x17cf21(0x24f)]=formatResult(_0x48b773,0x8);}),proxyEmit('portfolio',_0x181613);}}}function truncateTradeAmount(_0x12b89f,_0xd11fc7){let _0x42eb48=0x0;try{_0x42eb48=exchange['amountToPrecision'](_0x12b89f,_0xd11fc7);}catch(_0x191382){}return _0x42eb48;}function checkMinimums(_0x1161aa){const _0x414d22=_0x2c7e2a;let _0x120931=!![];const _0x5cee1d=!_0x1161aa[_0x414d22(0x252)]?markets[_0x1161aa['symbol']][_0x414d22(0x26e)]['amount'][_0x414d22(0x251)]:markets[_0x1161aa[_0x414d22(0x14f)]][_0x414d22(0x26e)]['cost']['min'],_0x5e4d5c=!_0x1161aa[_0x414d22(0x252)]?markets[_0x1161aa[_0x414d22(0x14f)]][_0x414d22(0x26e)][_0x414d22(0x1c0)]['min']:markets[_0x1161aa['symbol']][_0x414d22(0x26e)][_0x414d22(0x124)][_0x414d22(0x251)],_0x412b5b=truncateTradeAmount(_0x1161aa[_0x414d22(0x14f)],_0x1161aa[_0x414d22(0x207)]);_0x1161aa['trade']=_0x412b5b;if(Math[_0x414d22(0x1ef)](_0x412b5b)<_0x5cee1d)_0x120931=![];if(Math[_0x414d22(0x1ef)](_0x412b5b)*_0x1161aa[_0x414d22(0x288)]<_0x5e4d5c)_0x120931=![];if(_0x1161aa[_0x414d22(0x185)]==_0x414d22(0x282)){let _0x2bbc9f=config[_0x414d22(0x1f7)]['find'](_0x341fae=>_0x341fae[_0x414d22(0x27f)]==_0x1161aa['coin']);if(_0x2bbc9f[_0x414d22(0x1a1)]>0x0){if(Math[_0x414d22(0x1ef)](_0x412b5b)>_0x1161aa[_0x414d22(0x1d1)]-_0x2bbc9f['offset'])_0x120931=![];}else{if(Math['abs'](_0x412b5b)>_0x1161aa['number'])_0x120931=![];}}if(_0x1161aa['side']==_0x414d22(0x262)){let _0x5e6545=config['portfolio'][_0x414d22(0x222)](_0x3ca413=>_0x3ca413['coin']==config[_0x414d22(0x179)]),_0x494ae8=currentCoins[_0x414d22(0x222)](_0x5c0a2e=>_0x5c0a2e[_0x414d22(0x27f)]==config[_0x414d22(0x179)]);if(_0x5e6545[_0x414d22(0x1a1)]>0x0){if(Math['abs'](_0x412b5b)*_0x1161aa[_0x414d22(0x288)]>_0x494ae8[_0x414d22(0x1d1)]-_0x5e6545[_0x414d22(0x1a1)])_0x120931=![];}else{if(Math[_0x414d22(0x1ef)](_0x412b5b)*_0x1161aa[_0x414d22(0x288)]>_0x494ae8[_0x414d22(0x1d1)])_0x120931=![];}}return _0x120931;}async function getBalances(_0x44ccc0=!![]){const _0xb2eaeb=_0x2c7e2a;let _0x34f892=0x0,_0x4233c2;const _0x5595b5=config[_0xb2eaeb(0x270)];if(config[_0xb2eaeb(0x1ae)]&&config[_0xb2eaeb(0x236)]<0x0)await validate24hChanges();currentCoins[_0xb2eaeb(0x12a)](_0x1bb874=>{const _0x423c5a=_0xb2eaeb;if(_0x1bb874['coin']!=config[_0x423c5a(0x179)]){let _0x278bfa=global[_0x423c5a(0x137)][noslash(_0x1bb874[_0x423c5a(0x14f)])];_0x4233c2=_0x1bb874['reverse']?0x1/_0x278bfa:_0x278bfa;}else _0x4233c2=0x1;let _0x8b5d0f=_0x1bb874[_0x423c5a(0x1d1)]*_0x4233c2;_0x34f892+=_0x8b5d0f,_0x1bb874[_0x423c5a(0x288)]=formatResult(Number(_0x4233c2),0x8),_0x1bb874[_0x423c5a(0x286)]=_0x8b5d0f;}),currentCoins['forEach'](_0x24bd28=>{const _0x3cdf77=_0xb2eaeb;let _0x274922=config['portfolio'][_0x3cdf77(0x222)](_0x2afe51=>_0x2afe51[_0x3cdf77(0x27f)]==_0x24bd28[_0x3cdf77(0x27f)]),_0x276bd3=Number(_0x274922[_0x3cdf77(0x28a)]),_0x363feb=_0x24bd28[_0x3cdf77(0x286)]/_0x34f892*0x64,_0x1208b0=_0x276bd3*_0x34f892/0x64/_0x24bd28[_0x3cdf77(0x288)]-_0x24bd28[_0x3cdf77(0x1d1)];_0x24bd28[_0x3cdf77(0x28a)]=formatResult(_0x363feb,0x3),_0x24bd28[_0x3cdf77(0x1e7)]=formatResult(_0x276bd3,0x3),_0x24bd28[_0x3cdf77(0x207)]=formatResult(_0x1208b0,0x8),_0x24bd28['side']='',_0x24bd28[_0x3cdf77(0x267)]=![];if(_0x24bd28['coin']!=config[_0x3cdf77(0x179)]){if(_0x24bd28[_0x3cdf77(0x28a)]>_0x276bd3)_0x24bd28[_0x3cdf77(0x185)]=_0x3cdf77(0x282),_0x24bd28[_0x3cdf77(0x267)]=checkMinimums(_0x24bd28);else _0x24bd28[_0x3cdf77(0x28a)]<_0x276bd3&&(_0x24bd28[_0x3cdf77(0x185)]=_0x3cdf77(0x262),_0x24bd28[_0x3cdf77(0x267)]=checkMinimums(_0x24bd28));}_0x24bd28['delta']=_0x24bd28['distribution']/_0x24bd28[_0x3cdf77(0x1e7)]-0x1;if(_0x24bd28[_0x3cdf77(0x1b3)]==_0x3cdf77(0x2b2)||_0x24bd28['orderstatus']==_0x3cdf77(0x29e))_0x24bd28[_0x3cdf77(0x1b3)]=_0x3cdf77(0x122);}),currentCoins[_0xb2eaeb(0x25e)]((_0x5bb250,_0x341395)=>_0x5bb250['delta']<_0x341395[_0xb2eaeb(0x254)]?0x1:_0x341395['delta']<_0x5bb250[_0xb2eaeb(0x254)]?-0x1:0x0);const _0x5a3743=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5a3743[_0xb2eaeb(0x1fc)],'usd':_0x5a3743['usd'],'portfolio':JSON[_0xb2eaeb(0x128)](currentCoins),'threshold':_0x5595b5},proxyEmit(_0xb2eaeb(0x280),{'serverversion':serverversion,'balances':lastBalances});if(_0x44ccc0){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x5595b5});else{if(lockOrders==ORDERS[_0xb2eaeb(0x2a2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5595b5});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x934c9=getNormalizedPerformance();getStartingBalances(_0x934c9),emitPerformance(_0x934c9);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x21303c=getNormalizedPerformance();emitPerformance(_0x21303c),getStartingBalances(_0x21303c),logger[_0xb2eaeb(0x1f3)](_0xb2eaeb(0x1b1));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x54e0(_0x1a6323,_0x5d7144){const _0x445ed2=_0x5bbc();return _0x54e0=function(_0x39d9a4,_0x48fa2d){_0x39d9a4=_0x39d9a4-0x10f;let _0x5bbcc2=_0x445ed2[_0x39d9a4];return _0x5bbcc2;},_0x54e0(_0x1a6323,_0x5d7144);}async function storePerformance(){const _0x210ddc=_0x2c7e2a;if(!lastBalances)return;let _0x544e8e=[],_0x579afb,_0x28471e=JSON[_0x210ddc(0x16a)](lastBalances[_0x210ddc(0x1f7)]);_0x28471e[_0x210ddc(0x25e)]((_0x4b36b7,_0x4fefb0)=>_0x4b36b7[_0x210ddc(0x27f)]>_0x4fefb0[_0x210ddc(0x27f)]?0x1:_0x4fefb0[_0x210ddc(0x27f)]>_0x4b36b7[_0x210ddc(0x27f)]?-0x1:0x0),_0x28471e[_0x210ddc(0x12a)](_0x1d6aff=>{const _0xfce32e=_0x210ddc;let _0x16195d={'coin':_0x1d6aff[_0xfce32e(0x27f)],'number':_0x1d6aff[_0xfce32e(0x1d1)],'price':_0x1d6aff[_0xfce32e(0x288)]};_0x544e8e[_0xfce32e(0x22a)](_0x16195d);});const _0xd4bb68=await getFiat();_0x579afb={'date':lastBalances[_0x210ddc(0x24b)][_0x210ddc(0x1a9)]('\x20')[0x0],'eur':_0xd4bb68[_0x210ddc(0x1fc)],'usd':_0xd4bb68[_0x210ddc(0x1fd)],'coins':_0x544e8e};let _0x4ab88c=dbPerformance[_0x210ddc(0x1bf)](_0x210ddc(0x26b))[_0x210ddc(0x222)]({'date':_0x579afb[_0x210ddc(0x1b9)]})[_0x210ddc(0x286)]();_0x4ab88c?_0x579afb[_0x210ddc(0x1b9)]!=config[_0x210ddc(0x13a)]&&dbPerformance['get'](_0x210ddc(0x26b))[_0x210ddc(0x222)]({'date':_0x579afb[_0x210ddc(0x1b9)]})[_0x210ddc(0x1af)](_0x579afb)['write']():dbPerformance[_0x210ddc(0x1bf)](_0x210ddc(0x26b))[_0x210ddc(0x22a)](_0x579afb)[_0x210ddc(0x28c)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x411c86=_0x2c7e2a;let _0x344ba8=[];if(dbPerformance['has'](_0x411c86(0x26b))[_0x411c86(0x286)]()){let _0xb25527=dbPerformance[_0x411c86(0x1bf)](_0x411c86(0x26b))[_0x411c86(0x221)]()[_0x411c86(0x157)](_0x397c69=>{const _0x15a740=_0x411c86;if(_0x397c69[_0x15a740(0x1d6)][_0x15a740(0x138)]==0x0)return![];else return!![];})[_0x411c86(0x1f4)](_0x411c86(0x1b9))[_0x411c86(0x286)](),_0x2ac4b8=[...config[_0x411c86(0x2a0)]];_0x2ac4b8[_0x411c86(0x25e)]((_0x498808,_0x14ad7d)=>_0x498808[_0x411c86(0x1b9)]>_0x14ad7d[_0x411c86(0x1b9)]?-0x1:_0x14ad7d['date']>_0x498808[_0x411c86(0x1b9)]?0x1:0x0);let _0x38a221=0x1,_0x1c13a0=[],_0x4d6d57=0x0;_0xb25527['slice']()[_0x411c86(0x252)]()['forEach']((_0x21f7d9,_0xabeeab)=>{const _0x43dd95=_0x411c86;if(_0x2ac4b8[_0x4d6d57]){if(_0xb25527[_0xb25527[_0x43dd95(0x138)]-_0xabeeab]&&_0x2ac4b8[_0x4d6d57][_0x43dd95(0x1b9)]==_0xb25527[_0xb25527[_0x43dd95(0x138)]-_0xabeeab][_0x43dd95(0x1b9)]){if(_0xabeeab<_0xb25527[_0x43dd95(0x138)]){let _0x16cb85=0x0,_0x5031a2=0x0;_0xb25527[_0xb25527[_0x43dd95(0x138)]-_0xabeeab][_0x43dd95(0x1d6)][_0x43dd95(0x12a)](_0x4ff28b=>{const _0x2d86aa=_0x43dd95;_0x5031a2+=_0x4ff28b['number']*_0x4ff28b[_0x2d86aa(0x24f)];}),_0x2ac4b8[_0x4d6d57][_0x43dd95(0x144)][_0x43dd95(0x12a)](_0x2c574a=>{const _0x464b6e=_0x43dd95;_0x16cb85+=_0x2c574a['number']*_0x2c574a[_0x464b6e(0x24f)];}),_0x38a221*=_0x16cb85/(_0x5031a2-_0x16cb85)+0x1;}_0x4d6d57++;}}let _0x2f4dff=0x0;_0x21f7d9[_0x43dd95(0x1d6)][_0x43dd95(0x12a)](_0x1baca8=>{const _0x31ecd8=_0x43dd95;_0x2f4dff+=_0x1baca8[_0x31ecd8(0x1d1)]*_0x1baca8[_0x31ecd8(0x24f)];}),_0x1c13a0[_0xb25527[_0x43dd95(0x138)]-_0xabeeab-0x1]=_0x2f4dff*(_0x38a221-0x1);});let _0x4ea146=[];_0x2ac4b8=[...config[_0x411c86(0x2a0)]]||[];let _0x395a54=0x0;_0x4d6d57=0x0,_0xb25527[_0x411c86(0x12a)]((_0x50098b,_0x43edd8)=>{const _0x43cbe0=_0x411c86;if(_0x2ac4b8[_0x4d6d57]){const _0x416232=fns[_0x43cbe0(0x16a)](_0x2ac4b8[_0x4d6d57]['date'],'yyyy/MM/dd',new Date()),_0x2eb094=fns[_0x43cbe0(0x16a)](_0x50098b['date'],_0x43cbe0(0x186),new Date());if(fns[_0x43cbe0(0x13e)](_0x416232,_0x2eb094)){let _0x4c506d=0x0;_0x2ac4b8[_0x4d6d57][_0x43cbe0(0x144)]['forEach'](_0x1d7ca1=>{const _0x121fd7=_0x43cbe0;!_0x4ea146[_0x1d7ca1[_0x121fd7(0x27f)]]?_0x4ea146[_0x1d7ca1[_0x121fd7(0x27f)]]=_0x1d7ca1[_0x121fd7(0x1d1)]:(_0x4c506d=_0x4ea146[_0x1d7ca1[_0x121fd7(0x27f)]],_0x4ea146[_0x1d7ca1[_0x121fd7(0x27f)]]+=_0x1d7ca1[_0x121fd7(0x1d1)]);const _0x136961=_0x50098b['coins'][_0x121fd7(0x222)](_0x169328=>_0x169328[_0x121fd7(0x27f)]==_0x1d7ca1[_0x121fd7(0x27f)]);(!_0x136961||_0x136961[_0x121fd7(0x1d1)]==0x0)&&(_0x395a54+=(-_0x1d7ca1[_0x121fd7(0x1d1)]-_0x4c506d)*_0x1d7ca1[_0x121fd7(0x24f)]);}),_0x4d6d57++;}}_0x50098b[_0x43cbe0(0x1d6)][_0x43cbe0(0x12a)]((_0x5a96e0,_0x288442)=>{const _0x4e1abf=_0x43cbe0;_0x4ea146[_0x5a96e0[_0x4e1abf(0x27f)]]&&(_0x5a96e0[_0x4e1abf(0x1ea)]=_0x4ea146[_0x5a96e0[_0x4e1abf(0x27f)]]);}),_0x344ba8[_0x43cbe0(0x22a)]({'date':_0x50098b[_0x43cbe0(0x1b9)],'eur':_0x50098b[_0x43cbe0(0x1fc)],'usd':_0x50098b[_0x43cbe0(0x1fd)],'offset':_0x1c13a0[_0x43edd8],'netoffset':_0x395a54,'coins':_0x50098b[_0x43cbe0(0x1d6)]});});}return _0x344ba8;}function emitPerformance(_0x17c216){const _0x239a13=_0x2c7e2a;_0x17c216['length']!==0x0?(proxyEmit(_0x239a13(0x1f6),_0x17c216),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0xcb12fa,_0x11ab08){const _0x1c778e=_0x2c7e2a;let _0x37e3b5=0x0,_0x2ffb88=0x0,_0x189394=0x0;_0xcb12fa['coins'][_0x1c778e(0x12a)](_0x562acf=>{const _0x3fc100=_0x1c778e;_0x37e3b5+=_0x562acf[_0x3fc100(0x1d1)]*_0x562acf[_0x3fc100(0x24f)];});_0x11ab08&&(_0x37e3b5+=_0xcb12fa[_0x1c778e(0x1a1)]);if(config[_0x1c778e(0x179)]===_0x1c778e(0x276)||config[_0x1c778e(0x179)]===_0x1c778e(0x235)||config[_0x1c778e(0x179)]===_0x1c778e(0x257))_0x2ffb88=_0x37e3b5*_0xcb12fa['eur'],_0x189394=_0x37e3b5*_0xcb12fa['usd'];else{if(usdBasecoins[_0x1c778e(0x1c4)](config[_0x1c778e(0x179)]))_0x2ffb88=_0x37e3b5*_0xcb12fa[_0x1c778e(0x1fc)]/_0xcb12fa[_0x1c778e(0x1fd)],_0x189394=_0x37e3b5;else config['basecoin']==='EUR'&&(_0x2ffb88=_0x37e3b5,_0x189394=_0x37e3b5*_0xcb12fa['usd']/_0xcb12fa['eur']);}return[_0x37e3b5,_0x2ffb88,_0x189394];}function getKPIs(_0x120fb9,_0x39d8a9=_0x2c7e2a(0x242)){const _0x5dae76=_0x2c7e2a,_0x293722=config[_0x5dae76(0x179)],_0x546aec=lastBalances,_0xec231b=currentCoins,_0x7c35b2=getNormalizedPerformance(),_0x10cc02=_0x120fb9===_0x5dae76(0x179)?_0x293722:_0x120fb9===_0x5dae76(0x1e2)||_0x120fb9===_0x5dae76(0x210)?_0x39d8a9:_0x5dae76(0x196)+_0x293722,_0xd14809=_0x120fb9===_0x5dae76(0x20f)?_0x5dae76(0x134):_0x120fb9===_0x5dae76(0x210)?'Net\x20effect':_0x10cc02+'\x20value',_0x8dacb5=_0x120fb9==='net-basecoin'||_0x120fb9===_0x5dae76(0x210)?'Net\x20effect':_0x10cc02+_0x5dae76(0x250);let _0x4cc910=0x0;_0xec231b[_0x5dae76(0x12a)](_0x41fb88=>{const _0x51a725=_0x5dae76;_0x4cc910+=_0x41fb88[_0x51a725(0x1d1)]*_0x41fb88[_0x51a725(0x288)];});if(_0x120fb9===_0x5dae76(0x1e2)||_0x120fb9===_0x5dae76(0x210)){if(_0x293722===_0x5dae76(0x276)||_0x293722===_0x5dae76(0x235)||_0x293722===_0x5dae76(0x257))_0x4cc910=_0x4cc910*(_0x39d8a9===_0x5dae76(0x242)?_0x546aec[_0x5dae76(0x1fc)]:_0x546aec[_0x5dae76(0x1fd)]);else{if(usdBasecoins[_0x5dae76(0x1c4)](_0x293722))_0x4cc910=_0x4cc910*(_0x39d8a9==='EUR'?_0x546aec[_0x5dae76(0x1fc)]/_0x546aec[_0x5dae76(0x1fd)]:0x1);else _0x293722===_0x5dae76(0x242)&&(_0x4cc910=_0x4cc910*(_0x39d8a9===_0x5dae76(0x242)?0x1:_0x546aec['usd']/_0x546aec['eur']));}}let _0x50df15;if(_0x4cc910!==0x0){if(_0x120fb9===_0x5dae76(0x179))_0x50df15=(_0x4cc910/startingBalances['basecoin']-0x1)*0x64;else{if(_0x39d8a9==='EUR')_0x50df15=(_0x4cc910/startingBalances[_0x5dae76(0x1fc)]-0x1)*0x64;else _0x50df15=(_0x4cc910/startingBalances['usd']-0x1)*0x64;}let _0x36392b=0x0;if(startingBalances[_0x5dae76(0x1d6)])_0xec231b[_0x5dae76(0x12a)](_0x1a3828=>{const _0xcbb531=_0x5dae76;let _0x12f304=startingBalances['coins'][_0xcbb531(0x222)](_0xa3259=>_0xa3259[_0xcbb531(0x27f)]===_0x1a3828[_0xcbb531(0x27f)]);if(_0x12f304&&_0x12f304[_0xcbb531(0x27f)]&&_0x1a3828['number']!==0x0)_0x36392b+=_0x12f304['number']*_0x1a3828[_0xcbb531(0x288)];});let _0x10ae0d=0x0;if(_0x7c35b2[_0x5dae76(0x138)]!==0x0){let _0x1f2385=_0x7c35b2[_0x7c35b2[_0x5dae76(0x138)]-0x1];_0x10ae0d=_0x1f2385['netoffset'];}_0x36392b-=_0x10ae0d;_0x120fb9===_0x5dae76(0x20f)&&(_0x50df15=(_0x4cc910-_0x36392b)/startingBalances[_0x5dae76(0x179)]*0x64,_0x4cc910=_0x4cc910-_0x36392b);if(_0x120fb9===_0x5dae76(0x210)){let _0x5053c6=_0x39d8a9==='EUR'?startingBalances[_0x5dae76(0x1fc)]:startingBalances['usd'];if(_0x293722===_0x5dae76(0x276)||_0x293722===_0x5dae76(0x235)||_0x293722===_0x5dae76(0x257))_0x36392b=_0x39d8a9===_0x5dae76(0x242)?_0x36392b*_0x546aec[_0x5dae76(0x1fc)]:_0x36392b*_0x546aec[_0x5dae76(0x1fd)];else{if(usdBasecoins[_0x5dae76(0x1c4)](_0x293722))_0x36392b=_0x39d8a9===_0x5dae76(0x242)?_0x36392b*_0x546aec[_0x5dae76(0x1fc)]/_0x546aec['usd']:_0x36392b;else _0x293722===_0x5dae76(0x242)&&(_0x36392b=_0x39d8a9==='EUR'?_0x36392b:_0x36392b*_0x546aec['usd']/_0x546aec[_0x5dae76(0x1fc)]);}_0x50df15=(_0x4cc910-_0x36392b)/_0x5053c6*0x64,_0x4cc910=_0x4cc910-_0x36392b;}if(_0x50df15){if(_0x50df15<0x64)_0x50df15=_0x50df15[_0x5dae76(0x1e4)](0x2);else{if(_0x50df15<0x3e8)_0x50df15=_0x50df15[_0x5dae76(0x1e4)](0x1);else _0x50df15=_0x50df15[_0x5dae76(0x1e4)](0x0);}}else _0x50df15=Number('0')[_0x5dae76(0x1e4)](0x2);if(_0x4cc910){if(Math[_0x5dae76(0x1ef)](_0x4cc910)<0.000001)_0x4cc910=_0x4cc910['toFixed'](0x2);else{if(Math[_0x5dae76(0x1ef)](_0x4cc910)<0.1)_0x4cc910=_0x4cc910['toFixed'](0x6);else{if(Math[_0x5dae76(0x1ef)](_0x4cc910)<0x1)_0x4cc910=_0x4cc910[_0x5dae76(0x1e4)](0x5);else{if(Math['abs'](_0x4cc910)<0xa)_0x4cc910=_0x4cc910['toFixed'](0x4);else{if(Math['abs'](_0x4cc910)<0x64)_0x4cc910=_0x4cc910['toFixed'](0x3);else{if(Math[_0x5dae76(0x1ef)](_0x4cc910)<0x3e8)_0x4cc910=_0x4cc910['toFixed'](0x2);else _0x4cc910=_0x4cc910[_0x5dae76(0x1e4)](0x2);}}}}}}else _0x4cc910=Number('0')['toFixed'](0x2);}else _0x50df15=Number('0')[_0x5dae76(0x1e4)](0x2);return{'value':_0x4cc910,'change':_0x50df15,'leftTxt':_0xd14809,'rightTxt':_0x8dacb5};}async function getStartingBalances(_0x333920,_0xe3fa41=!![]){const _0x202a5a=_0x2c7e2a;if(_0x333920['length']!==0x0){const [_0x30d02f,_0x40f44a,_0x15e111]=getPerf(_0x333920[0x0],!![]);let _0xcdcfac=[];config[_0x202a5a(0x1f7)][_0x202a5a(0x12a)](_0x1cd1e3=>{const _0x1d2253=_0x202a5a;let _0x30ddd5=0x0,_0x5a1898;config[_0x1d2253(0x2a0)][_0x1d2253(0x12a)](_0x1cf809=>{const _0x4d7ae1=_0x1d2253;let _0x503447=_0x1cf809[_0x4d7ae1(0x144)][_0x4d7ae1(0x222)](_0x489b6b=>_0x489b6b['coin']==_0x1cd1e3[_0x4d7ae1(0x27f)]);if(_0x503447){_0x30ddd5+=_0x503447[_0x4d7ae1(0x1d1)];if(!_0x5a1898)_0x5a1898=_0x503447[_0x4d7ae1(0x24f)];}}),_0xcdcfac[_0x1d2253(0x22a)]({'coin':_0x1cd1e3[_0x1d2253(0x27f)],'number':_0x30ddd5,'initialprice':_0x5a1898});});const _0x450c19={'basecoin':_0x30d02f,'eur':_0x40f44a,'usd':_0x15e111,'coins':_0xcdcfac};if(_0xe3fa41)proxyEmit(_0x202a5a(0x18c),_0x450c19);startingBalances=_0x450c19;}}function headlessMode(_0x37908){const _0xa8fb7b=_0x2c7e2a;let _0x2bebf8=_0x37908['portfolio'],_0x3690bf=_0x37908['threshold'],_0xd49f3d=[];for(let _0x262da6 of _0x2bebf8){if(_0x262da6['coin']!=config[_0xa8fb7b(0x179)]){if(_0x262da6['delta']>=_0x3690bf/0x64){if(_0x262da6[_0xa8fb7b(0x267)])_0xd49f3d[_0xa8fb7b(0x22a)](_0x262da6);}else{if(_0x262da6[_0xa8fb7b(0x254)]<=-_0x3690bf/0x64){if(_0x262da6[_0xa8fb7b(0x267)])_0xd49f3d[_0xa8fb7b(0x22a)](_0x262da6);}}}}_0xd49f3d[_0xa8fb7b(0x138)]>0x0&&(lockOrders==ORDERS[_0xa8fb7b(0x2a2)]&&!coolingDown&&_0xd49f3d[_0xa8fb7b(0x12a)](_0x537c8e=>{const _0x185fbe=_0xa8fb7b;logger['debug'](_0x185fbe(0x264)+_0x537c8e[_0x185fbe(0x27f)]+'\x20'+_0x537c8e['number']+'\x20'+_0x537c8e['last']+'\x20'+_0x537c8e[_0x185fbe(0x28a)]+'%\x20'+_0x537c8e[_0x185fbe(0x1e7)]+'%\x20'+(0x64*_0x537c8e['delta'])[_0x185fbe(0x1e4)](0x2)+_0x185fbe(0x198)+_0x3690bf[_0x185fbe(0x1e4)](0x2)+'%)');}),placeOrder(_0xd49f3d));}function notifyBalance(_0x45ad3f){const _0x4eee28=_0x2c7e2a;let _0x38a5cd=_0x45ad3f['portfolio'],_0x5f1ea3=_0x45ad3f[_0x4eee28(0x270)],_0x1add91=[];for(let _0x206835 of _0x38a5cd){if(_0x206835[_0x4eee28(0x27f)]!=config[_0x4eee28(0x179)]){if(_0x206835[_0x4eee28(0x254)]>=_0x5f1ea3/0x64){if(_0x206835['valid'])_0x1add91[_0x4eee28(0x22a)](_0x206835);}else{if(_0x206835['delta']<=-_0x5f1ea3/0x64){if(_0x206835['valid'])_0x1add91[_0x4eee28(0x22a)](_0x206835);}}}}if(_0x1add91['length']>0x0){let _0x5e9de9=_0x1add91[_0x4eee28(0x24c)](_0x238f57=>_0x238f57[_0x4eee28(0x27f)]);_0x5e9de9['sort']();let _0x24a018=_0x5e9de9[_0x4eee28(0x239)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4eee28(0x147),_0x4eee28(0x2a7));lastCoinsToBalance=_0x24a018;}}function symbolToCoin(_0x415eda){const _0x4d14dc=_0x2c7e2a;let _0x34a720;if(_0x415eda[_0x4d14dc(0x1c4)]('/'+config['basecoin']))_0x34a720=_0x415eda[_0x4d14dc(0x11c)]('/'+config[_0x4d14dc(0x179)],'');if(_0x415eda[_0x4d14dc(0x1c4)](config['basecoin']+'/'))_0x34a720=_0x415eda[_0x4d14dc(0x11c)](config['basecoin']+'/','');return _0x34a720;}async function unlockOrders(){const _0x1e0029=_0x2c7e2a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1e0029(0x1f1)]){logger[_0x1e0029(0x1f3)](_0x1e0029(0x269)),lockOrders=ORDERS[_0x1e0029(0x13b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0xf11c03=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xf11c03,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x1e0029(0x2a2)],logger[_0x1e0029(0x1f3)](_0x1e0029(0x172));}}async function validateOrders(_0x228854){const _0x49a652=_0x2c7e2a;if(_0x228854)validateOrdersState=_0x228854;logger[_0x49a652(0x1f3)](_0x49a652(0x25a)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x49a652(0x265):_0x49a652(0x217)));let _0x5bb7c4=[],_0x359531=config[_0x49a652(0x1fa)]==_0x49a652(0x1ca)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x49a652(0x271)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x49a652(0x1f1)])return;logger[_0x49a652(0x1f3)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x1cd530=>{const _0x19b454=_0x49a652;let _0x4d1020=![];_0x1cd530['filled']>0x0&&(_0x4d1020=!![]),_0x5bb7c4['push'](_0x4d1020),_0x4d1020&&config[_0x19b454(0x1fa)]!=_0x19b454(0x1ca)&&logHistory('order','Order\x20filled:\x20'+_0x1cd530['symbol']+'\x20'+_0x1cd530[_0x19b454(0x185)]+'\x20#'+formatResult(_0x1cd530[_0x19b454(0x2b2)],0x8)+'\x20@'+formatResult(_0x1cd530[_0x19b454(0x24f)],0x8));}),_0x5bb7c4[_0x49a652(0x12a)]((_0x251493,_0x44131e)=>{const _0x3abade=_0x49a652;if(_0x251493)lastOrders[_0x3abade(0x165)](_0x44131e,0x1);}),persistOpenOrders(lastOrders);const _0x336a91=coolingDown?_0x49a652(0x297):'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x5bb7c4['includes'](![])){if(config[_0x49a652(0x1fa)]==_0x49a652(0x1ca)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x49a652(0x272)){if(_0x5bb7c4[_0x49a652(0x1c4)](![])){}else{if(allOrdersPlaced){if(config[_0x49a652(0x1fa)]==_0x49a652(0x1ca)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x49a652(0x22d))_0x5bb7c4[_0x49a652(0x1c4)](![])&&(config[_0x49a652(0x1fa)]==_0x49a652(0x1ca)?logHistory(_0x49a652(0x220),_0x49a652(0x167)+Math[_0x49a652(0x1cf)](_0x359531*validateOrderInterval/0xea60)+_0x49a652(0x12f)+_0x336a91):(await cancelOrders(),logHistory(_0x49a652(0x220),_0x49a652(0x14b)+Math[_0x49a652(0x1cf)](_0x359531*validateOrderInterval/0xea60)+_0x49a652(0x12f)+_0x336a91))),await unlockOrders();else{if(validateOrdersState==_0x49a652(0x1ad)){if(config[_0x49a652(0x1fa)]!=_0x49a652(0x1ca))logHistory('success',_0x49a652(0x299)+_0x336a91);await unlockOrders();}}}}}async function cancelOrders(){const _0x5a8086=_0x2c7e2a;lastOrders[_0x5a8086(0x12a)](async _0x32ec63=>{const _0x203d0b=_0x5a8086;try{const _0x109566=await exchange[_0x203d0b(0x1c8)](_0x32ec63[_0x203d0b(0x29a)],_0x32ec63[_0x203d0b(0x14f)]);}catch(_0x3b37a1){if(_0x3b37a1[_0x203d0b(0x22b)]()[_0x203d0b(0x1c4)]('OrderNotFound')){}else await handleError(_0x3b37a1,_0x203d0b(0x164));}});}async function initCoinResults(_0x3bef4a){const _0x4c5eea=_0x2c7e2a;_0x3bef4a?logger[_0x4c5eea(0x1f3)](_0x4c5eea(0x199)+_0x3bef4a):logger[_0x4c5eea(0x1f3)]('Initializing\x20coin\x20results'),config[_0x4c5eea(0x1f7)][_0x4c5eea(0x12a)](_0x4de101=>{const _0x12bba1=_0x4c5eea;if(!_0x4de101['excluded']&&_0x4de101[_0x12bba1(0x27f)]!=config['basecoin']){const _0x50969e=currentCoins[_0x12bba1(0x222)](_0x52c375=>_0x52c375[_0x12bba1(0x27f)]==_0x4de101[_0x12bba1(0x27f)]),_0x300e58=global[_0x12bba1(0x137)][noslash(_0x4de101[_0x12bba1(0x14f)])];let _0x3fac67=_0x50969e?_0x50969e[_0x12bba1(0x1d1)]:null,_0x3428a9=_0x4de101['reverse']?0x1/_0x300e58:_0x300e58,_0x970f53;config[_0x12bba1(0x2a0)][_0x12bba1(0x12a)](_0x10eded=>{const _0x2a04b7=_0x12bba1;!_0x970f53&&(_0x970f53=_0x10eded['changes'][_0x2a04b7(0x222)](_0x13a058=>_0x13a058[_0x2a04b7(0x27f)]==_0x4de101[_0x2a04b7(0x27f)]),_0x970f53&&(_0x3fac67=_0x970f53['number'],_0x3428a9=_0x970f53['price']));});let _0x16c34d=dbCoinResults['get']('coins')[_0x12bba1(0x222)]({'coin':_0x4de101['coin']})['value']();if(!_0x16c34d){const _0x221f02={'coin':_0x4de101[_0x12bba1(0x27f)],'number':_0x3fac67,'breakeven':_0x3428a9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x12bba1(0x1bf)](_0x12bba1(0x1d6))['push'](_0x221f02)[_0x12bba1(0x28c)]();}else{if(_0x3bef4a&&_0x4de101[_0x12bba1(0x27f)]==_0x3bef4a){const _0x2711cc={'coin':_0x4de101[_0x12bba1(0x27f)],'number':_0x3fac67,'breakeven':_0x3428a9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x12bba1(0x1bf)](_0x12bba1(0x1d6))[_0x12bba1(0x222)]({'coin':_0x4de101['coin']})[_0x12bba1(0x1af)](_0x2711cc)[_0x12bba1(0x28c)]();}}}});}async function updateCoinResults(_0x54a15c,_0x22b9e4=![]){const _0x5867cb=_0x2c7e2a;let _0x1ec37e,_0x39a8c8,_0x59831c,_0xc39009,_0x2e976a,_0x9830e5,_0x2dfa0e=dbCoinResults[_0x5867cb(0x1bf)](_0x5867cb(0x1d6))[_0x5867cb(0x222)]({'coin':_0x54a15c['coin']})['value'](),_0x1cc8aa=![];_0x2dfa0e&&Object[_0x5867cb(0x24a)](_0x2dfa0e)[_0x5867cb(0x12a)](([_0x427380,_0x1f78dc])=>{if(_0x1f78dc==null)_0x1cc8aa=!![];});(!_0x2dfa0e||_0x1cc8aa)&&(await initCoinResults(_0x54a15c[_0x5867cb(0x27f)]),_0x2dfa0e=dbCoinResults[_0x5867cb(0x1bf)](_0x5867cb(0x1d6))[_0x5867cb(0x222)]({'coin':_0x54a15c[_0x5867cb(0x27f)]})['value']());_0x54a15c[_0x5867cb(0x252)]&&(_0x9830e5={'filled':_0x54a15c[_0x5867cb(0x2b2)]*_0x54a15c['price'],'amount':_0x54a15c[_0x5867cb(0x2b2)]*_0x54a15c['price'],'side':_0x54a15c[_0x5867cb(0x185)]==_0x5867cb(0x282)?'buy':'sell','price':0x1/_0x54a15c['price']},_0x54a15c={..._0x54a15c,..._0x9830e5});_0x22b9e4?_0x39a8c8=_0x54a15c['side']==_0x5867cb(0x262)?_0x2dfa0e[_0x5867cb(0x1d1)]+_0x54a15c[_0x5867cb(0x2b2)]:_0x2dfa0e[_0x5867cb(0x1d1)]-_0x54a15c[_0x5867cb(0x2b2)]:_0x39a8c8=await getCoinNumber(_0x54a15c[_0x5867cb(0x27f)]);if(_0x54a15c[_0x5867cb(0x1ec)]&&_0x54a15c[_0x5867cb(0x1ec)][_0x5867cb(0x15a)]==config[_0x5867cb(0x179)])_0x1ec37e=_0x54a15c[_0x5867cb(0x1ec)][_0x5867cb(0x1c0)];else{if(_0x54a15c[_0x5867cb(0x1ec)]&&_0x54a15c['fee'][_0x5867cb(0x15a)]==_0x5867cb(0x22c)&&!_0x22b9e4&&config[_0x5867cb(0x179)]!='PAXG')_0x1ec37e=_0x54a15c[_0x5867cb(0x1ec)][_0x5867cb(0x1c0)]*global[_0x5867cb(0x137)]['BNB'+config[_0x5867cb(0x179)]];else _0x1ec37e=defaultFee*_0x54a15c[_0x5867cb(0x2b2)]*_0x54a15c[_0x5867cb(0x24f)];}_0x54a15c[_0x5867cb(0x185)]=='buy'?(_0x59831c=_0x39a8c8!=0x0?(_0x2dfa0e['breakeven']*_0x2dfa0e['number']+_0x54a15c[_0x5867cb(0x24f)]*(_0x39a8c8-_0x2dfa0e[_0x5867cb(0x1d1)])+_0x1ec37e)/_0x39a8c8:0x0,_0xc39009=_0x2dfa0e[_0x5867cb(0x216)]):(_0x59831c=_0x39a8c8!=0x0?(_0x2dfa0e[_0x5867cb(0x178)]*_0x2dfa0e[_0x5867cb(0x1d1)]-_0x54a15c['price']*(_0x2dfa0e['number']-_0x39a8c8)+_0x1ec37e)/_0x39a8c8:0x0,_0xc39009=_0x2dfa0e[_0x5867cb(0x216)]+(_0x54a15c[_0x5867cb(0x24f)]-_0x2dfa0e['breakeven'])*_0x54a15c[_0x5867cb(0x2b2)]);_0x2e976a=(_0x54a15c[_0x5867cb(0x24f)]-_0x59831c-_0x1ec37e/_0x54a15c[_0x5867cb(0x2b2)])*_0x39a8c8;let _0x3b6f49={'coin':_0x54a15c[_0x5867cb(0x27f)],'number':_0x39a8c8,'breakeven':formatResult(_0x59831c,0x8),'realized':formatResult(_0xc39009,0x8),'unrealized':formatResult(_0x2e976a,0x8),'fees':formatResult(_0x2dfa0e[_0x5867cb(0x214)]+_0x1ec37e,0x8),'sells':_0x54a15c[_0x5867cb(0x185)]==_0x5867cb(0x282)?_0x2dfa0e[_0x5867cb(0x169)]+0x1:_0x2dfa0e[_0x5867cb(0x169)],'buys':_0x54a15c[_0x5867cb(0x185)]==_0x5867cb(0x262)?_0x2dfa0e[_0x5867cb(0x261)]+0x1:_0x2dfa0e[_0x5867cb(0x261)]};dbCoinResults[_0x5867cb(0x1bf)]('coins')[_0x5867cb(0x222)]({'coin':_0x54a15c['coin']})['assign'](_0x3b6f49)[_0x5867cb(0x28c)]();if(!_0x22b9e4){if(_0x54a15c['fee']&&_0x54a15c['fee'][_0x5867cb(0x15a)]=='BNB'){const _0x438dd3=currentCoins[_0x5867cb(0x222)](_0x1a882b=>_0x1a882b[_0x5867cb(0x27f)]==_0x5867cb(0x22c));if(_0x438dd3){let _0xc87a9=dbCoinResults[_0x5867cb(0x1bf)]('coins')[_0x5867cb(0x222)]({'coin':_0x5867cb(0x22c)})[_0x5867cb(0x286)]();_0x3b6f49={..._0xc87a9,'number':_0x438dd3['number']},dbCoinResults[_0x5867cb(0x1bf)](_0x5867cb(0x1d6))['find']({'coin':_0x5867cb(0x22c)})['assign'](_0x3b6f49)[_0x5867cb(0x28c)]();}}}}async function placeOrder(_0x1a442c){const _0x4dd0fe=_0x2c7e2a,_0x553b19=config[_0x4dd0fe(0x1fa)]==_0x4dd0fe(0x1ca)?_0x4dd0fe(0x1ca):'limit';if(lockOrders==ORDERS[_0x4dd0fe(0x2a2)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x43bc53=![];lastOrders=[];for(const _0x3ee1ed of _0x1a442c){let _0x2f8818,_0x470590,_0x5c678a,_0x33c37f,_0x5a6d1a,_0x106608=_0x3ee1ed[_0x4dd0fe(0x14f)];try{const _0x4532e6=await exchange[_0x4dd0fe(0x23d)](_0x106608);_0x2f8818=_0x3ee1ed[_0x4dd0fe(0x252)]?0x1/_0x3ee1ed[_0x4dd0fe(0x288)]:_0x3ee1ed[_0x4dd0fe(0x288)],_0x470590=_0x4532e6[_0x4dd0fe(0x17b)],_0x5c678a=_0x4532e6[_0x4dd0fe(0x1ee)];_0x3ee1ed['reverse']?(_0x33c37f=_0x3ee1ed['side']=='buy'?_0x4dd0fe(0x282):'buy',_0x5a6d1a=Math[_0x4dd0fe(0x1ef)](_0x3ee1ed[_0x4dd0fe(0x207)])/_0x2f8818):(_0x33c37f=_0x3ee1ed[_0x4dd0fe(0x185)],_0x5a6d1a=Math['abs'](_0x3ee1ed[_0x4dd0fe(0x207)]));_0x553b19==_0x4dd0fe(0x2b1)&&(config[_0x4dd0fe(0x1fa)]==_0x4dd0fe(0x20b)&&(_0x2f8818=_0x33c37f==_0x4dd0fe(0x262)?_0x470590:_0x5c678a),config['ordertype']=='limit-low'&&(_0x2f8818=_0x33c37f==_0x4dd0fe(0x262)?_0x5c678a:_0x470590));_0x5a6d1a=formatResult(_0x5a6d1a,0x8),_0x2f8818=formatResult(_0x2f8818,0x8);const _0x42a7fb=_0x33c37f==_0x4dd0fe(0x282)?config[_0x4dd0fe(0x215)]?String[_0x4dd0fe(0x123)]('0x'+config[_0x4dd0fe(0x215)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x4dd0fe(0x202)])+'\x20':'',_0xac68d5=_0x553b19=='market'?'Market':config['ordertype']==_0x4dd0fe(0x20b)?'Limit\x20(high-margin)':_0x4dd0fe(0x1d9),_0x29ee65=(Math[_0x4dd0fe(0x117)](Math[_0x4dd0fe(0x1dc)]()*0x35a4e900)+0x5f5e100)[_0x4dd0fe(0x22b)]();lastOrders[_0x4dd0fe(0x22a)]({'customId':_0x29ee65,'symbol':_0x106608,'coin':_0x3ee1ed[_0x4dd0fe(0x27f)],'amount':_0x5a6d1a,'price':_0x2f8818,'side':_0x33c37f,'reverse':_0x3ee1ed[_0x4dd0fe(0x252)],'filled':0x0});if(_0x553b19=='market')logHistory(_0x4dd0fe(0x17a),''+_0x42a7fb+_0xac68d5+'\x20order:\x20'+_0x106608+'\x20'+_0x33c37f+'\x20#'+formatResult(_0x5a6d1a,0x8)+'\x20@'+formatResult(_0x2f8818,0x8));else logHistory(_0x4dd0fe(0x17a),''+_0x42a7fb+_0xac68d5+_0x4dd0fe(0x15e)+_0x106608+'\x20'+_0x33c37f+'\x20#'+formatResult(_0x5a6d1a,0x8)+'\x20@'+formatResult(_0x2f8818,0x8));let _0x26fef3;_0x553b19==_0x4dd0fe(0x1ca)?_0x33c37f==_0x4dd0fe(0x262)&&['Bybit',_0x4dd0fe(0x1bb),'Cex','Huobi',_0x4dd0fe(0x28b)][_0x4dd0fe(0x1c4)](config['exchange'])?_0x26fef3=await exchange[_0x4dd0fe(0x29b)](_0x106608,_0x553b19,_0x33c37f,_0x5a6d1a,_0x2f8818):_0x26fef3=await exchange[_0x4dd0fe(0x29b)](_0x106608,_0x553b19,_0x33c37f,_0x5a6d1a,undefined):_0x26fef3=await exchange['createOrder'](_0x106608,_0x553b19,_0x33c37f,_0x5a6d1a,_0x2f8818);logger[_0x4dd0fe(0x1f3)](_0x4dd0fe(0x145)+_0x26fef3['id']+_0x4dd0fe(0x1c1)+_0x29ee65);const _0x3a80e0=lastOrders[_0x4dd0fe(0x138)]-0x1;if(_0x3a80e0>=0x0&&lastOrders[_0x3a80e0][_0x4dd0fe(0x23e)]==_0x29ee65){lastOrders[_0x3a80e0]['orderId']=_0x26fef3['id'];if(_0x26fef3[_0x4dd0fe(0x124)])lastOrders[_0x3a80e0][_0x4dd0fe(0x124)]=_0x26fef3[_0x4dd0fe(0x124)];if(_0x26fef3[_0x4dd0fe(0x24f)])lastOrders[_0x3a80e0]['price']=_0x26fef3['price'];lastOrders[_0x3a80e0][_0x4dd0fe(0x1ec)]=_0x26fef3[_0x4dd0fe(0x1ec)];}if(config['cooldown']!=0x0){let _0x22ad90=null;if(cooldownTracker[_0x4dd0fe(0x138)]==config[_0x4dd0fe(0x284)]-0x1)_0x22ad90=cooldownTracker[_0x4dd0fe(0x2ab)]();const _0xa9509d=getTimeStamp();cooldownTracker[_0x4dd0fe(0x22a)](_0xa9509d);if(_0x22ad90){const _0x3cb0b0=fns[_0x4dd0fe(0x201)](new Date(_0xa9509d),new Date(_0x22ad90));if(_0x3cb0b0<cooldownInterval){logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x1dd)+config[_0x4dd0fe(0x284)]+_0x4dd0fe(0x174)+cooldownInterval/0x3c+_0x4dd0fe(0x256)+cooldownPeriod/(0xe10*0x3e8)+_0x4dd0fe(0x240)),coolingDown=!![];break;}}}}catch(_0x4899e7){if(_0x4899e7[_0x4dd0fe(0x22b)]()[_0x4dd0fe(0x1c4)](_0x4dd0fe(0x213)))lastOrders=lastOrders[_0x4dd0fe(0x157)](_0x308121=>_0x308121[_0x4dd0fe(0x14f)]!=_0x106608),logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x2af)+_0x106608),_0x43bc53=!![];else{if(_0x4899e7[_0x4dd0fe(0x22b)]()[_0x4dd0fe(0x1c4)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x28e669=>_0x28e669[_0x4dd0fe(0x14f)]!=_0x106608),logHistory(_0x4dd0fe(0x1de),'Order\x20amount\x20is\x20invalid:\x20'+_0x106608),_0x43bc53=!![];else{if(_0x4899e7['toString']()['includes'](_0x4dd0fe(0x23b)))lastOrders=lastOrders[_0x4dd0fe(0x157)](_0x4bf195=>_0x4bf195[_0x4dd0fe(0x14f)]!=_0x106608),logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x183)+_0x106608),logger[_0x4dd0fe(0x1f3)](_0x4899e7),_0x43bc53=!![];else _0x4899e7['toString']()[_0x4dd0fe(0x1c4)](_0x4dd0fe(0x190))?(lastOrders=lastOrders[_0x4dd0fe(0x157)](_0x3963a2=>_0x3963a2[_0x4dd0fe(0x14f)]!=_0x106608),logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x2af)+_0x106608),_0x43bc53=!![]):(lastOrders=lastOrders[_0x4dd0fe(0x157)](_0x4dc2e5=>_0x4dc2e5['symbol']!=_0x106608),await handleError(_0x4899e7,_0x4dd0fe(0x23f),_0x106608));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x201986=config[_0x4dd0fe(0x1fa)]==_0x4dd0fe(0x1ca)?validateOrderTimeout*0x3c*0x3e8:config[_0x4dd0fe(0x271)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x44ff73=_0x4dd0fe;validateOrders(_0x44ff73(0x22d));},_0x201986);}else unlockOrders();_0x43bc53&&config[_0x4dd0fe(0x1ae)]&&(logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x19f)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4dd0fe(0x220),_0x4dd0fe(0x12e)));}else{if(coolingDown)!config['headless']&&logHistory(_0x4dd0fe(0x1de),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x4dd0fe(0x2a2)]&&(!config['headless']&&(config[_0x4dd0fe(0x1fa)]==_0x4dd0fe(0x1ca)?logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x1b8)):logHistory(_0x4dd0fe(0x1de),_0x4dd0fe(0x27b))));}}function persistOpenOrders(_0x2035fd){const _0x286565=_0x2c7e2a,_0x855985={...config,'openOrders':_0x2035fd};let _0x2b13ee=dbConfig[_0x286565(0x1bf)]('bot')[_0x286565(0x222)]({'botID':botID})['value']();_0x2b13ee&&dbConfig[_0x286565(0x1bf)](_0x286565(0x1f0))['find']({'botID':botID})['assign'](_0x855985)['write']();}function restoreOrders(){const _0x245f11=_0x2c7e2a;let _0x196240;config[_0x245f11(0x135)]&&allOpenOrders[_0x245f11(0x12a)](_0x4c283d=>{const _0x134e44=_0x245f11,_0x69163=config[_0x134e44(0x135)][_0x134e44(0x222)](_0x5979e3=>_0x5979e3['orderId']==_0x4c283d['id']);_0x69163&&(lastOrders[_0x134e44(0x22a)](_0x69163),_0x196240=_0x4c283d[_0x134e44(0x259)]);});if(lastOrders[_0x245f11(0x138)]>0x0){lockOrders=ORDERS[_0x245f11(0x1f1)],validateOrdersState=_0x245f11(0x272),allOrdersPlaced=!![];const _0x271bb9=new Date()[_0x245f11(0x266)](),_0x450902=config[_0x245f11(0x1fa)]==_0x245f11(0x1ca)?validateOrderTimeout*0x3c*0x3e8:config[_0x245f11(0x271)]*0x3c*0x3e8;if(_0x196240+_0x450902>_0x271bb9){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x127bd4=_0x245f11;validateOrders(_0x127bd4(0x22d));},_0x196240+_0x450902-_0x271bb9);}else validateOrders(_0x245f11(0x22d));}}async function sendMetricsTelegram(){const _0x5a52ad=_0x2c7e2a;if(!coinsLoaded){process[_0x5a52ad(0x1a2)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x331f13=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x58047b='';if(config['showname'])_0x58047b=_0x5a52ad(0x19a)+config[_0x5a52ad(0x187)]+_0x5a52ad(0x160);else _0x58047b=_0x5a52ad(0x19b)+botID+_0x5a52ad(0x160);const _0x54ff7c=getKPIs(_0x5a52ad(0x179)),_0x531f05=getKPIs(_0x5a52ad(0x1e2),config[_0x5a52ad(0x1e2)]),_0x112bf8=getKPIs(_0x5a52ad(0x20f)),_0xb2aff5=getKPIs('net-fiat',config[_0x5a52ad(0x1e2)]);_0x58047b+=_0x5a52ad(0x296),_0x58047b+=_0x54ff7c[_0x5a52ad(0x29d)]+'\x20:\x20'+_0x54ff7c[_0x5a52ad(0x286)]+'\x0a',_0x58047b+=_0x54ff7c['rightTxt']+':\x20'+_0x54ff7c[_0x5a52ad(0x17e)]+'%\x0a',_0x58047b+=_0x531f05[_0x5a52ad(0x29d)]+_0x5a52ad(0x283)+_0x531f05[_0x5a52ad(0x286)]+'\x0a',_0x58047b+=_0x531f05[_0x5a52ad(0x1d3)]+':\x20'+_0x531f05[_0x5a52ad(0x17e)]+'%\x0a',_0x58047b+=_0x112bf8[_0x5a52ad(0x29d)]+':\x20'+_0x112bf8[_0x5a52ad(0x286)]+'\x20('+config[_0x5a52ad(0x179)]+')\x0a',_0x58047b+=_0x112bf8['rightTxt']+':\x20'+_0x112bf8[_0x5a52ad(0x17e)]+_0x5a52ad(0x198)+config[_0x5a52ad(0x179)]+')\x0a',_0x58047b+=_0xb2aff5[_0x5a52ad(0x29d)]+':\x20'+_0xb2aff5[_0x5a52ad(0x286)]+'\x20('+config[_0x5a52ad(0x1e2)]+')\x0a',_0x58047b+=_0xb2aff5['rightTxt']+':\x20'+_0xb2aff5[_0x5a52ad(0x17e)]+_0x5a52ad(0x198)+config[_0x5a52ad(0x1e2)]+')\x0a',_0x58047b+=_0x5a52ad(0x1e6),process['send']({'telegrammsg':_0x58047b},_0x288179=>{});}async function sendPortfolioTelegram(){const _0x5fa733=_0x2c7e2a;if(!coinsLoaded){process[_0x5fa733(0x1a2)]({'telegrammsg':_0x5fa733(0x211)},_0x182ea7=>{});return;}let _0x4e6d34='';if(config['showname'])_0x4e6d34=_0x5fa733(0x19a)+config[_0x5fa733(0x187)]+_0x5fa733(0x1e0);else _0x4e6d34=_0x5fa733(0x19b)+botID+_0x5fa733(0x1e0);_0x4e6d34+=_0x5fa733(0x296),_0x4e6d34+=_0x5fa733(0x224),_0x4e6d34+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4e6d34+=_0x5fa733(0x224),currentCoins[_0x5fa733(0x12a)](_0x5c9444=>{const _0x48e3b3=_0x5fa733;_0x4e6d34+=_0x5c9444[_0x48e3b3(0x27f)][_0x48e3b3(0x163)](0x7)+'|\x20'+formatPad(_0x5c9444[_0x48e3b3(0x28a)],0x2,0x6)+'|\x20'+formatPad(_0x5c9444['target'],0x2,0x6)+'|\x20'+formatPad(_0x5c9444[_0x48e3b3(0x254)]*0x64,0x2,0x6)+'\x0a';}),_0x4e6d34+=_0x5fa733(0x1e6),process['send']({'telegrammsg':_0x4e6d34},_0x101cba=>{});}function formatPad(_0x1eed0c,_0x4d1cbb,_0x5b0d8b){const _0x5289c8=_0x2c7e2a,_0x28c277=formatResultString(_0x1eed0c,_0x4d1cbb);return _0x28c277?_0x28c277[_0x5289c8(0x16b)](_0x5b0d8b):''[_0x5289c8(0x16b)](_0x5b0d8b);}function logHistory(_0x28634f,_0x3ec971,_0x5baca0=''){const _0x168948=_0x2c7e2a;logger[_0x168948(0x277)](''+_0x3ec971);let _0x324e21={'time':getTimeStamp(),'type':_0x28634f,'event':_0x3ec971};dbLogs[_0x168948(0x1bf)]('logs')[_0x168948(0x22a)](_0x324e21)['write']();if(_0x5baca0=='')_0x5baca0=_0x3ec971;proxyEmit(_0x168948(0x15d),{'log':_0x324e21,'summary':_0x5baca0}),process[_0x168948(0x1a2)]({'telegram':{..._0x324e21,'botname':config[_0x168948(0x187)],'showname':config[_0x168948(0x200)]}},_0x1c74ab=>{});}function emitHistory(_0x2e867b={}){const _0x493664=_0x2c7e2a;Object['keys'](_0x2e867b)[_0x493664(0x138)]==0x0&&(_0x2e867b={'type':[_0x493664(0x17a),'event'],'event':'','page':0x1});if(_0x2e867b[_0x493664(0x1c9)][_0x493664(0x1c4)](_0x493664(0x15d)))_0x2e867b[_0x493664(0x1c9)][_0x493664(0x165)](_0x2e867b['type'][_0x493664(0x115)](_0x493664(0x15d)),0x1,'error','warning',_0x493664(0x220));if(dbLogs['has'](_0x493664(0x152))['value']()){let _0x325e2a=dbLogs['get']('logs')[_0x493664(0x157)](_0x1ff82f=>{const _0x284811=_0x493664;if(_0x2e867b['type']['length']==0x0)return![];else return _0x2e867b['type']['includes'](_0x1ff82f[_0x284811(0x1c9)]);})[_0x493664(0x157)](_0xb7d422=>{const _0x3834ec=_0x493664;if(_0x2e867b[_0x3834ec(0x15d)]=='')return!![];else return _0xb7d422[_0x3834ec(0x15d)][_0x3834ec(0x1d8)]()[_0x3834ec(0x1c4)](_0x2e867b[_0x3834ec(0x15d)]['toLowerCase']());})[_0x493664(0x1f4)]('time'),_0x3c8045=_0x325e2a[_0x493664(0x286)]()[_0x493664(0x138)];_0x325e2a=_0x325e2a[_0x493664(0x252)]()['slice']((_0x2e867b['page']-0x1)*logPageSize,_0x2e867b[_0x493664(0x13c)]*logPageSize-0x1)['reverse']()[_0x493664(0x286)](),proxyEmit(_0x493664(0x204),{'logs':_0x325e2a,'total':_0x3c8045});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x56febf){const _0x3a6d57=_0x2c7e2a;if(dbLogs[_0x3a6d57(0x192)](_0x3a6d57(0x152))[_0x3a6d57(0x286)]()){const _0x45bd2f=dbLogs[_0x3a6d57(0x1bf)](_0x3a6d57(0x152))[_0x3a6d57(0x1f4)](_0x3a6d57(0x24b))[_0x3a6d57(0x157)](_0xba0913=>{const _0x909b58=_0x3a6d57;return _0xba0913[_0x909b58(0x1c9)]==_0x909b58(0x17a);})[_0x3a6d57(0x286)]();dbLogs[_0x3a6d57(0x1bf)](_0x3a6d57(0x152))['remove']()[_0x3a6d57(0x28c)](),dbLogs['get'](_0x3a6d57(0x152))[_0x3a6d57(0x1af)](_0x45bd2f)[_0x3a6d57(0x28c)](),emitHistory(_0x56febf);}}async function pauseBot(_0x2a8abc=pauseBotInterval){const _0x822868=_0x2c7e2a,_0x599392=new Date()[_0x822868(0x266)]();if(!lastErrorShown||_0x599392-lastErrorShown>=_0x2a8abc){lastErrorShown=_0x599392;!lastBotPause?(lastBotPause=_0x599392,consecutivePauses=0x1):(_0x599392-lastBotPause-_0x2a8abc<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x822868(0x1a2)]({'stop':_0x822868(0x18a)},_0x3a1fa6=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x822868(0x266)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x2a8abc),botPaused=![],reset(!![]);}}}async function killBot(){const _0x17d976=_0x2c7e2a;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x17d976(0x125)},_0x53430e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x503467,_0x397077){const _0x3b7eeb=_0x2c7e2a;if(botPaused)return;const _0x129d94=config[_0x3b7eeb(0x231)]||'Exchange';if(_0x397077)logger[_0x3b7eeb(0x1f3)](_0x3b7eeb(0x13f)+_0x397077);const _0x26f77e=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x503467[_0x3b7eeb(0x22b)]()[_0x3b7eeb(0x1c4)](_0x3b7eeb(0x12d)))logHistory('error',_0x129d94+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x26f77e();else{if(_0x503467[_0x3b7eeb(0x22b)]()[_0x3b7eeb(0x1c4)](_0x3b7eeb(0x168)))logHistory(_0x3b7eeb(0x1de),_0x129d94+_0x3b7eeb(0x1c6)),_0x26f77e();else _0x503467[_0x3b7eeb(0x22b)]()['includes'](_0x3b7eeb(0x194))?(logHistory('error',_0x129d94+_0x3b7eeb(0x233)),logHistory(_0x3b7eeb(0x1de),_0x3b7eeb(0x1b7)),_0x26f77e()):await handleError(_0x503467,null);}}async function handleError(_0x31301b,_0xc185a6,_0x1851a4=''){const _0x21cd70=_0x2c7e2a;if(botPaused)return;const _0x4c301f=config['exchange']||_0x21cd70(0x11e);if(_0xc185a6)logger['debug'](_0x21cd70(0x13f)+_0xc185a6);if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)](_0x21cd70(0x1a7))||_0x31301b[_0x21cd70(0x22b)]()['includes'](_0x21cd70(0x2a9)))logHistory(_0x21cd70(0x1de),_0x4c301f+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)](_0x21cd70(0x140))||_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)]('OnMaintenance'))logHistory(_0x21cd70(0x1de),_0x4c301f+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x31301b[_0x21cd70(0x22b)]()['includes']('RequestTimeout'))logHistory(_0x21cd70(0x1de),_0x4c301f+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x31301b[_0x21cd70(0x22b)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x21cd70(0x1de),_0x4c301f+_0x21cd70(0x11b)+pauseBotMsg),await pauseBot();else{if(_0x31301b[_0x21cd70(0x22b)]()['toLowerCase']()[_0x21cd70(0x1c4)](_0x21cd70(0x259))||_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1d8)]()[_0x21cd70(0x1c4)](_0x21cd70(0x287))){const _0x5d88eb=_0x31301b['toString']()[_0x21cd70(0x1d8)]();let _0x39274a=![];if((config['exchange']==_0x21cd70(0x21f)||config[_0x21cd70(0x231)]=='Binanceus')&&(_0x5d88eb[_0x21cd70(0x1c4)](_0x21cd70(0x18f)[_0x21cd70(0x1d8)]())||_0x5d88eb[_0x21cd70(0x1c4)](_0x21cd70(0x1e5)[_0x21cd70(0x1d8)]())))_0x39274a=!![];if(config[_0x21cd70(0x231)]==_0x21cd70(0x26f)&&_0x5d88eb[_0x21cd70(0x1c4)]('KC-API-TIMESTAMP\x20Invalid'['toLowerCase']()))_0x39274a=!![];if(config[_0x21cd70(0x231)]==_0x21cd70(0x170)&&_0x5d88eb['includes']('invalid\x20request,\x20please\x20check\x20your\x20server\x20timestamp\x20or\x20recv_window\x20param'[_0x21cd70(0x1d8)]()))_0x39274a=!![];if(config[_0x21cd70(0x231)]==_0x21cd70(0x1bb)&&_0x5d88eb[_0x21cd70(0x1c4)]('Invalid\x20ACCESS_TIMESTAMP'[_0x21cd70(0x1d8)]()))_0x39274a=!![];if((config[_0x21cd70(0x231)]==_0x21cd70(0x294)||config[_0x21cd70(0x231)]==_0x21cd70(0x153))&&_0x5d88eb['includes'](_0x21cd70(0x20d)[_0x21cd70(0x1d8)]()))_0x39274a=!![];_0x39274a?logHistory(_0x21cd70(0x1de),_0x21cd70(0x110)+pauseBotMsg):logHistory('error',_0x21cd70(0x248)+pauseBotMsg),logger[_0x21cd70(0x1f3)](_0x21cd70(0x146),_0x31301b['toString']()),await pauseBot();}else{if(_0x31301b['toString']()[_0x21cd70(0x1c4)](_0x21cd70(0x238)))logHistory('error',_0x4c301f+_0x21cd70(0x1da)+pauseBotMsg),logger[_0x21cd70(0x1f3)]('Error\x20details:',_0x31301b),await pauseBot();else{if(_0x31301b instanceof ccxt[_0x21cd70(0x1f9)])logHistory(_0x21cd70(0x1de),_0x4c301f+_0x21cd70(0x1b6)+pauseBotMsg),logger[_0x21cd70(0x1f3)](_0x21cd70(0x146),_0x31301b),await pauseBot();else{if(_0x31301b[_0x21cd70(0x22b)]()['includes'](_0x21cd70(0x12d)))logHistory('error',_0x4c301f+_0x21cd70(0x247)),logHistory(_0x21cd70(0x1de),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)](_0x21cd70(0x168)))logHistory(_0x21cd70(0x1de),_0x4c301f+_0x21cd70(0x1e9)),logHistory(_0x21cd70(0x1de),_0x21cd70(0x1b4)),await killBot();else{if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)](_0x21cd70(0x194)))logHistory('error',_0x4c301f+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x21cd70(0x1b4)),await killBot();else{if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)]('PermissionDenied'))logHistory(_0x21cd70(0x1de),_0x4c301f+_0x21cd70(0x253)),logHistory(_0x21cd70(0x1de),_0x21cd70(0x1b4)),await killBot();else{if(_0x31301b[_0x21cd70(0x22b)]()[_0x21cd70(0x1c4)](_0x21cd70(0x27a)))logHistory(_0x21cd70(0x1de),_0x21cd70(0x225)+_0x1851a4);else _0x31301b instanceof ccxt['ExchangeError']?(logHistory(_0x21cd70(0x1de),_0x4c301f+'\x20exchange\x20error'),logger['debug'](_0x21cd70(0x146),_0x31301b)):(logHistory('error',_0x21cd70(0x1b2)+pauseBotMsg),logger['debug'](_0x21cd70(0x146),_0x31301b),await pauseBot());}}}}}}}}}}}}function formatResult(_0x23cbfe,_0x3dddfc){const _0x91d139=_0x2c7e2a;return parseFloat(_0x23cbfe[_0x91d139(0x1e4)](_0x3dddfc));}function formatResultTruncate(_0x426c90,_0x6fcf2c){const _0x41d596=_0x2c7e2a;let _0x266334=formatResultString(_0x426c90,0xa),_0x4b8aa9=_0x266334[_0x41d596(0x115)]('.');return _0x4b8aa9!=-0x1&&(_0x266334=_0x266334['slice'](0x0,_0x4b8aa9+_0x6fcf2c+0x1)),Number(_0x266334);}function formatResultString(_0x13bc1b,_0x470f47){const _0x2acf9e=_0x2c7e2a;let _0xb14758;if(!(''+_0x13bc1b)[_0x2acf9e(0x1c4)]('e'))_0xb14758=+(Math['round'](_0x13bc1b+'e+'+_0x470f47)+'e-'+_0x470f47);else{let _0x3c34cb=(''+_0x13bc1b)['split']('e'),_0x7f9241='';+_0x3c34cb[0x1]+_0x470f47>0x0&&(_0x7f9241='+'),_0xb14758=+(Math[_0x2acf9e(0x1cf)](+_0x3c34cb[0x0]+'e'+_0x7f9241+(+_0x3c34cb[0x1]+_0x470f47))+'e-'+_0x470f47);}return Number(_0xb14758)['toFixed'](_0x470f47);}function getServerTime(){const _0x42f48f=_0x2c7e2a,_0x117aa3=new Date();return _0x117aa3[_0x42f48f(0x197)]()+'/'+(_0x117aa3[_0x42f48f(0x244)]()+0x1)[_0x42f48f(0x22b)]()[_0x42f48f(0x16b)](0x2,'0')+'/'+_0x117aa3[_0x42f48f(0x1bd)]()[_0x42f48f(0x22b)]()[_0x42f48f(0x16b)](0x2,'0')+'\x20'+_0x117aa3[_0x42f48f(0x156)]()['toString']()[_0x42f48f(0x16b)](0x2,'0')+':'+_0x117aa3['getMinutes']()['toString']()[_0x42f48f(0x16b)](0x2,'0')+':'+_0x117aa3[_0x42f48f(0x1ce)]()[_0x42f48f(0x22b)]()[_0x42f48f(0x16b)](0x2,'0');}function getTimeStamp(){const _0x4e5e0a=_0x2c7e2a,_0x3bd411=shiftedTime();return _0x3bd411[_0x4e5e0a(0x197)]()+'/'+(_0x3bd411[_0x4e5e0a(0x244)]()+0x1)[_0x4e5e0a(0x22b)]()[_0x4e5e0a(0x16b)](0x2,'0')+'/'+_0x3bd411[_0x4e5e0a(0x1bd)]()[_0x4e5e0a(0x22b)]()[_0x4e5e0a(0x16b)](0x2,'0')+'\x20'+_0x3bd411[_0x4e5e0a(0x156)]()['toString']()[_0x4e5e0a(0x16b)](0x2,'0')+':'+_0x3bd411[_0x4e5e0a(0x226)]()[_0x4e5e0a(0x22b)]()[_0x4e5e0a(0x16b)](0x2,'0')+':'+_0x3bd411[_0x4e5e0a(0x1ce)]()[_0x4e5e0a(0x22b)]()[_0x4e5e0a(0x16b)](0x2,'0');}function getDate(){const _0x3bb103=_0x2c7e2a,_0x3611d3=shiftedTime();return _0x3611d3['getFullYear']()+'/'+(_0x3611d3['getMonth']()+0x1)[_0x3bb103(0x22b)]()[_0x3bb103(0x16b)](0x2,'0')+'/'+_0x3611d3[_0x3bb103(0x1bd)]()[_0x3bb103(0x22b)]()[_0x3bb103(0x16b)](0x2,'0');}function getHour(){const _0x1d6c87=_0x2c7e2a,_0x549dd1=shiftedTime();return _0x549dd1[_0x1d6c87(0x156)]()['toString']()[_0x1d6c87(0x16b)](0x2,'0');}function sleep(_0x30a779){return new Promise(_0x2e4559=>setTimeout(_0x2e4559,_0x30a779));}function shiftedTime(){const _0x14ac80=_0x2c7e2a,_0x3687cf=new Date();let _0x290906=_0x3687cf;if(config&&config[_0x14ac80(0x149)]!==0x0)_0x290906=fns[_0x14ac80(0x195)](_0x3687cf,{'hours':config[_0x14ac80(0x149)]});return _0x290906;}function timer(_0x40f740){const _0x4a1818=_0x2c7e2a,_0x149b71=new Date();!lasttime?console[_0x4a1818(0x25d)](getTimeStamp()+':\x20timer\x20>',_0x40f740,_0x149b71):console['log'](getTimeStamp()+_0x4a1818(0x22f),_0x40f740,(_0x149b71-lasttime)/0x3e8),lasttime=_0x149b71;}