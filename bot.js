const _0x2dd61a=_0x3ee9;(function(_0x57a6ea,_0x40c9dd){const _0x502684=_0x3ee9,_0x166496=_0x57a6ea();while(!![]){try{const _0x332e2c=-parseInt(_0x502684(0x2b7))/0x1*(-parseInt(_0x502684(0x261))/0x2)+-parseInt(_0x502684(0x2c1))/0x3*(-parseInt(_0x502684(0x215))/0x4)+-parseInt(_0x502684(0x227))/0x5+-parseInt(_0x502684(0x1f5))/0x6*(parseInt(_0x502684(0x285))/0x7)+-parseInt(_0x502684(0x2e2))/0x8*(-parseInt(_0x502684(0x23c))/0x9)+-parseInt(_0x502684(0x2ca))/0xa+-parseInt(_0x502684(0x29b))/0xb*(-parseInt(_0x502684(0x287))/0xc);if(_0x332e2c===_0x40c9dd)break;else _0x166496['push'](_0x166496['shift']());}catch(_0x3ca6cd){_0x166496['push'](_0x166496['shift']());}}}(_0x1f12,0x92800));const _0x27e8ed=function(){let _0x5da518=!![];return function(_0x13488a,_0x5b4361){const _0x455695=_0x5da518?function(){const _0xddc664=_0x3ee9;if(_0x5b4361){const _0xf929ab=_0x5b4361[_0xddc664(0x295)](_0x13488a,arguments);return _0x5b4361=null,_0xf929ab;}}:function(){};return _0x5da518=![],_0x455695;};}(),_0x5f03c3=_0x27e8ed(this,function(){const _0x3fddcc=_0x3ee9;return _0x5f03c3[_0x3fddcc(0x29a)]()[_0x3fddcc(0x286)](_0x3fddcc(0x2bd))[_0x3fddcc(0x29a)]()[_0x3fddcc(0x21a)](_0x5f03c3)[_0x3fddcc(0x286)]('(((.+)+)+)+$');});_0x5f03c3();'use strict';const ccxt=require(_0x2dd61a(0x26b)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x2dd61a(0x210)),Crypt=require(_0x2dd61a(0x1a1))[_0x2dd61a(0x1f0)],util=require('util'),argv=require(_0x2dd61a(0x2f1))(process[_0x2dd61a(0x222)][_0x2dd61a(0x260)](0x2))[_0x2dd61a(0x222)],path=require('path');let exchange;global[_0x2dd61a(0x201)]={},global[_0x2dd61a(0x288)]={};const usdBasecoins=['USD',_0x2dd61a(0x187),_0x2dd61a(0x17d),'USDT',_0x2dd61a(0x1dc),_0x2dd61a(0x2d8)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2dd61a(0x20f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x2dd61a(0x1ac))[_0x2dd61a(0x2f2)],botID=process['argv'][0x2]||_0x2dd61a(0x290),pattern=/^[0-9]{3}$/;!pattern[_0x2dd61a(0x2f3)](botID)&&(console[_0x2dd61a(0x2db)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x2dd61a(0x222)][0x3]||'',configpath=userID?_0x2dd61a(0x2d6)+userID+'/':_0x2dd61a(0x2d6),logspath=userID?_0x2dd61a(0x2bc)+userID+'/':_0x2dd61a(0x2bc),loggerfile=fs[_0x2dd61a(0x2b0)](logspath+_0x2dd61a(0x184),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x2dd61a(0x195)](configpath);!fs[_0x2dd61a(0x279)](logspath)&&fs[_0x2dd61a(0x195)](logspath);const configfile=configpath+_0x2dd61a(0x25f)+botID+_0x2dd61a(0x25a),logfile=configpath+'bot-'+botID+_0x2dd61a(0x254),performancefile=configpath+_0x2dd61a(0x25f)+botID+_0x2dd61a(0x1fb),coinresultsfile=configpath+_0x2dd61a(0x25f)+botID+_0x2dd61a(0x19c),settingsfile=configpath+_0x2dd61a(0x274),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2dd61a(0x197)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2dd61a(0x197)]({'data':[],'version':serverversion})[_0x2dd61a(0x2e0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2dd61a(0x197)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2dd61a(0x197)]({'coins':[],'version':serverversion})[_0x2dd61a(0x2e0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2dd61a(0x2b8),'rsaStandard':_0x2dd61a(0x19d)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x13bef2=>{const _0x14c3fb=_0x2dd61a;console[_0x14c3fb(0x2db)](_0x13bef2);},'simple':_0x1b1f6c=>{const _0x12a46f=_0x2dd61a;console[_0x12a46f(0x2db)](_0x1b1f6c),loggerfile[_0x12a46f(0x2e0)](util[_0x12a46f(0x258)](_0x1b1f6c)+'\x0a');},'full':async(_0x522e75,_0x130808='')=>{const _0x1c6a6d=_0x2dd61a;let _0x3d3cbb;if(config[_0x1c6a6d(0x255)])_0x3d3cbb=getTimeStamp()+':\x20'+config['botname']+_0x1c6a6d(0x25d)+_0x522e75;else _0x3d3cbb=getTimeStamp()+_0x1c6a6d(0x232)+botID+_0x1c6a6d(0x25d)+_0x522e75;console['log'](_0x3d3cbb),loggerfile[_0x1c6a6d(0x2e0)](util[_0x1c6a6d(0x258)](_0x3d3cbb)+'\x0a'),_0x130808&&(console['log'](_0x130808),loggerfile[_0x1c6a6d(0x2e0)](util[_0x1c6a6d(0x258)](_0x130808)+'\x0a'));},'debug':async(_0x11ba5a,_0x2860fc='')=>{const _0x42541d=_0x2dd61a;let _0x65f41c;if(config[_0x42541d(0x255)])_0x65f41c=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x11ba5a;else _0x65f41c=getTimeStamp()+_0x42541d(0x232)+botID+_0x42541d(0x1a2)+_0x11ba5a;if(debugging)console[_0x42541d(0x2db)](_0x65f41c);loggerfile[_0x42541d(0x2e0)](util[_0x42541d(0x258)](_0x65f41c)+'\x0a');if(_0x2860fc){if(debugging)console[_0x42541d(0x2db)](_0x2860fc);loggerfile[_0x42541d(0x2e0)](util['format'](_0x2860fc)+'\x0a');}}};process['on'](_0x2dd61a(0x24b),function(_0x5a2355){const _0x55e971=_0x2dd61a;logHistory(_0x55e971(0x205),_0x55e971(0x2a5)),logger['debug'](_0x55e971(0x28a),_0x5a2355);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x2dd61a(0x1de)]);settings[_0x2dd61a(0x1e9)]!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);process[_0x2dd61a(0x2a7)]({'started':_0x2dd61a(0x29c)},_0x4c3401=>{}),initializeProcessListeners();function proxyEmit(_0x249756,_0x1afa8d=null){const _0x1f1afe=_0x2dd61a;process[_0x1f1afe(0x2a7)]({'function':_0x249756,'args':_0x1afa8d},_0xd6070a=>{});}function initializeProcessListeners(){process['on']('message',_0x94ecb3=>{const _0x3fc4e6=_0x3ee9;switch(Object[_0x3fc4e6(0x2cd)](_0x94ecb3)[0x0]){case _0x3fc4e6(0x1de):_0x94ecb3[_0x3fc4e6(0x1de)]!=undefined&&(settings[_0x3fc4e6(0x1de)]=_0x94ecb3[_0x3fc4e6(0x1de)],updateTimeshift(settings[_0x3fc4e6(0x1de)]));break;case'onepagemode':_0x94ecb3['onepagemode']!=undefined&&(settings[_0x3fc4e6(0x1e9)]=_0x94ecb3[_0x3fc4e6(0x1e9)],updateOnepagemode(settings[_0x3fc4e6(0x1e9)]));break;case _0x3fc4e6(0x1cb):_0x94ecb3[_0x3fc4e6(0x1cb)]!=undefined&&(bots=JSON['parse'](_0x94ecb3[_0x3fc4e6(0x1cb)]),proxyEmit(_0x3fc4e6(0x1cb),bots));break;case _0x3fc4e6(0x1a7):switch(_0x94ecb3[_0x3fc4e6(0x1a7)]){case _0x3fc4e6(0x2c6):initclient();break;case _0x3fc4e6(0x209):toggleBotMode();break;case _0x3fc4e6(0x1a4):emitHistory(_0x94ecb3['args']);break;case _0x3fc4e6(0x1f1):deleteHistoryAlerts(_0x94ecb3[_0x3fc4e6(0x25c)]);break;case _0x3fc4e6(0x278):getPortfolio(_0x94ecb3[_0x3fc4e6(0x25c)]);break;case _0x3fc4e6(0x26c):storeConfiguration(_0x94ecb3['args']);break;case _0x3fc4e6(0x1fd):storeHeadless(_0x94ecb3['args']);break;case'storeFiat':storeFiat(_0x94ecb3[_0x3fc4e6(0x25c)]);break;case _0x3fc4e6(0x2bf):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x3fc4e6(0x1ae):placeOrder(_0x94ecb3[_0x3fc4e6(0x25c)]);break;case _0x3fc4e6(0x189):cancelLoading();break;case _0x3fc4e6(0x23b):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x3fc4e6(0x2a8):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x1fbc5c=null,_0x260919=![]){const _0x2872f3=_0x2dd61a;logger[_0x2872f3(0x2c8)]('Reset\x20|\x20'+(_0x1fbc5c&&_0x1fbc5c['length']>0x0?_0x2872f3(0x2f7)+_0x1fbc5c[_0x2872f3(0x2a6)](','):_0x2872f3(0x190))+_0x2872f3(0x22b)+(_0x260919?_0x2872f3(0x271):_0x2872f3(0x1be))+_0x2872f3(0x2d7)+config[_0x2872f3(0x291)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x260919)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x2872f3(0x1c2)]!=''&&config[_0x2872f3(0x1c2)]!='***'){if(_0x260919){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x328164){handleErrorNoStop(_0x328164,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1fbc5c);const _0x1c8dfc=await getCoins();[currentCoins,currentCoinsAll]=_0x1c8dfc,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2872f3(0x1ec)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3716b3=_0x2dd61a;exchangeStopped=!![],await exchange[_0x3716b3(0x2b3)]();}async function reloadExchange(){const _0x137e20=_0x2dd61a;logger[_0x137e20(0x2c8)](_0x137e20(0x220));while(lockOrders!=ORDERS[_0x137e20(0x2a1)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x137e20(0x2c8)](_0x137e20(0x28c)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xe55715=config[_0x2dd61a(0x291)],_0x3dc736=config[_0x2dd61a(0x1c2)],_0x1267c6=config[_0x2dd61a(0x27b)],_0xb818b5=config[_0x2dd61a(0x252)]){const _0xa8722e=_0x2dd61a;exchange&&await stopExchange();!supportedExchanges()[_0xa8722e(0x19a)](_0xe55715)&&(logHistory(_0xa8722e(0x205),_0xa8722e(0x2ef)+_0xe55715+_0xa8722e(0x212)),killBot());const _0x378637=ccxt[_0xa8722e(0x21c)][_0xe55715[_0xa8722e(0x1d0)]()];exchange=new _0x378637({'apiKey':_0x3dc736,'secret':_0x1267c6,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xa8722e(0x1c8)}});if(_0xb818b5)exchange[_0xa8722e(0x266)]=_0xb818b5;}function setStableCoins(){const _0x43b9f9=_0x2dd61a;let _0x2eca49=config[_0x43b9f9(0x2ab)]=='ETH'?'ETH':'BTC',_0x32694a=!allSymbols['includes'](_0x2eca49+_0x43b9f9(0x19e))?'USDT':_0x43b9f9(0x1c3),_0x38879e=!allSymbols['includes'](_0x2eca49+'/EUR')?_0x32694a:_0x43b9f9(0x2c9);stablecoins={'eur':{'coin':''+_0x2eca49+_0x38879e,'symbol':_0x2eca49+'/'+_0x38879e},'usd':{'coin':''+_0x2eca49+_0x32694a,'symbol':_0x2eca49+'/'+_0x32694a}};}async function initwsCcxt(_0x349477){const _0x32d3a0=_0x2dd61a;_0x349477==null&&(_0x349477=[],config['portfolio'][_0x32d3a0(0x280)](_0x16c5d5=>{const _0x540484=_0x32d3a0;if(!_0x16c5d5[_0x540484(0x250)]&&_0x16c5d5['coin']!=config[_0x540484(0x2ab)])_0x349477[_0x540484(0x20b)](_0x16c5d5[_0x540484(0x245)]);}));if(!_0x349477['includes'](stablecoins[_0x32d3a0(0x1ad)]['symbol']))_0x349477[_0x32d3a0(0x20b)](stablecoins[_0x32d3a0(0x1ad)][_0x32d3a0(0x245)]);if(!_0x349477['includes'](stablecoins[_0x32d3a0(0x206)][_0x32d3a0(0x245)]))_0x349477[_0x32d3a0(0x20b)](stablecoins['usd']['symbol']);if(config[_0x32d3a0(0x291)]['startsWith'](_0x32d3a0(0x18f))){if(!_0x349477[_0x32d3a0(0x19a)](_0x32d3a0(0x1a0)+config[_0x32d3a0(0x2ab)]))_0x349477[_0x32d3a0(0x20b)](_0x32d3a0(0x1a0)+config[_0x32d3a0(0x2ab)]);}loadCoins(_0x349477);const _0x1a2cb9=async _0x3badef=>{const _0xad1f8d=_0x32d3a0,_0x381e07=await exchange[_0xad1f8d(0x198)](_0x3badef);global[_0xad1f8d(0x201)][noslash(_0x381e07['symbol'])]=_0x381e07[_0xad1f8d(0x27f)];while(!![]){if(!botPaused)try{const _0x2c5ab9=await exchange['watchTrades'](_0x3badef);global['ticker'][noslash(_0x2c5ab9[0x0][_0xad1f8d(0x245)])]=_0x2c5ab9[0x0]['price'],await sleep(0x3e8);}catch(_0x179262){if(!exchangeStopped)await handleError(_0x179262,_0xad1f8d(0x1d6),_0x3badef);}else await sleep(0x64);}},_0x386404=async _0x18171b=>{const _0x25bcbb=_0x32d3a0;while(!![]){if(!botPaused)try{const _0x41948b=await exchange[_0x25bcbb(0x198)](_0x18171b);global[_0x25bcbb(0x288)][_0x41948b[_0x25bcbb(0x245)]]=_0x41948b['percentage'],await sleep(0x3c*0x3e8);}catch(_0x1a6eae){if(!exchangeStopped)await handleError(_0x1a6eae,'fetchTickers',_0x18171b);}else await sleep(0x64);}},_0x3f4f04=async()=>{const _0x46c00d=_0x32d3a0;while(!![]){if(!botPaused)try{const _0x1f95cc=await exchange[_0x46c00d(0x2ba)]();_0x1f95cc[_0x46c00d(0x280)](_0xdb95a5=>{updateNumberCoinsCcxt(_0xdb95a5);});}catch(_0x59a229){if(!exchangeStopped)await handleError(_0x59a229,'watchOrders');}else await sleep(0x64);}};_0x349477[_0x32d3a0(0x280)](_0x16101b=>{_0x1a2cb9(_0x16101b),_0x386404(_0x16101b);}),!wsEventsSet&&(wsEventsSet=!![],_0x3f4f04(),watchTransactions());}async function watchTransactions(){const _0x24672e=_0x2dd61a;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x392747=await getCoins(),[_0x394a1f,_0xb5c9cc]=_0x392747;let _0x1e084b=[];currentCoins[_0x24672e(0x280)](_0x373602=>{const _0x1d8b9d=_0x24672e,_0x1b09ba=_0x394a1f[_0x1d8b9d(0x18d)](_0x50adba=>_0x50adba[_0x1d8b9d(0x1a6)]==_0x373602['coin']);if(_0x1b09ba){if(_0x373602['number']!=_0x1b09ba[_0x1d8b9d(0x22f)]){let _0x1aaa5b;if(_0x373602[_0x1d8b9d(0x1a6)]!=config['basecoin']){const _0x2bd168=global[_0x1d8b9d(0x201)][noslash(_0x373602[_0x1d8b9d(0x245)])];_0x1aaa5b=_0x373602[_0x1d8b9d(0x28f)]?0x1/_0x2bd168:_0x2bd168;}else _0x1aaa5b=0x1;_0x1e084b['push']({'coin':_0x373602[_0x1d8b9d(0x1a6)],'symbol':_0x373602[_0x1d8b9d(0x245)],'price':_0x1aaa5b,'number':Number(formatResult(_0x1b09ba[_0x1d8b9d(0x22f)]-_0x373602[_0x1d8b9d(0x22f)],0x8)),'basecoinvalue':_0x1aaa5b*(_0x1b09ba['number']-_0x373602['number'])});}}});if(_0x1e084b[_0x24672e(0x1ec)]==0x1&&!blockTransactionDetection){if(config[_0x24672e(0x1b0)]){logger[_0x24672e(0x2c8)](_0x24672e(0x22d)+_0x1e084b[0x0][_0x24672e(0x17f)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x24672e(0x20c)]);if(lastFees['highest']==0x0||Math['abs'](_0x1e084b[0x0][_0x24672e(0x17f)])>lastFees['highest']){delete _0x1e084b[0x0][_0x24672e(0x245)],delete _0x1e084b[0x0]['basecoinvalue'];let _0x1f1aa3=[],_0x3fb89=[...config[_0x24672e(0x2b1)]]||[],_0x1a014e=config['liquidity'];_0x3fb89[_0x24672e(0x2dc)]((_0x329cd1,_0x2a09a3)=>_0x329cd1[_0x24672e(0x2de)]>_0x2a09a3[_0x24672e(0x2de)]?-0x1:_0x2a09a3[_0x24672e(0x2de)]>_0x329cd1[_0x24672e(0x2de)]?0x1:0x0);const _0xb68f4a=getDate();if(_0x3fb89[0x0]){const _0x4708df=fns[_0x24672e(0x1b1)](_0x3fb89[0x0]['date'],_0x24672e(0x18b),new Date()),_0x17d1bb=fns['parse'](_0xb68f4a,_0x24672e(0x18b),new Date());if(fns[_0x24672e(0x1af)](_0x4708df,_0x17d1bb)){_0x1f1aa3=_0x3fb89[0x0][_0x24672e(0x2f9)];const _0x4e480e=_0x1f1aa3['find'](_0x52c6c9=>_0x52c6c9['coin']==_0x1e084b[0x0]['coin']);_0x4e480e?(_0x4e480e[_0x24672e(0x22f)]+=_0x1e084b[0x0]['number'],_0x4e480e[_0x24672e(0x22f)]==0x0&&(_0x1f1aa3=_0x1f1aa3[_0x24672e(0x1dd)](_0x289f46=>{const _0x2daa2d=_0x24672e;return _0x289f46[_0x2daa2d(0x1a6)]!=_0x1e084b[0x0]['coin'];}))):_0x1f1aa3['push'](_0x1e084b[0x0]);const _0x23e12d=_0x1a014e[_0x24672e(0x18d)](_0x4bdde4=>_0x4bdde4[_0x24672e(0x2de)]==_0xb68f4a);_0x23e12d['changes']=_0x1f1aa3;}else _0x1a014e[_0x24672e(0x20b)]({'date':_0xb68f4a,'changes':[_0x1e084b[0x0]]});}const _0x29b61d=_0x1a014e['find'](_0x208c36=>_0x208c36[_0x24672e(0x2de)]==_0xb68f4a);if(_0x29b61d){let _0x223658=!![];_0x29b61d[_0x24672e(0x2f9)][_0x24672e(0x280)](_0xd5d2dd=>{const _0x24a256=_0x24672e;if(_0xd5d2dd[_0x24a256(0x22f)]!=0x0)_0x223658=![];}),_0x223658&&(_0x1a014e=_0x1a014e[_0x24672e(0x1dd)](_0x109a8b=>{const _0x48caf0=_0x24672e;return _0x109a8b[_0x48caf0(0x2de)]!=_0xb68f4a;}));}let _0xc6788a=dbConfig[_0x24672e(0x2ce)](_0x24672e(0x238))['find']({'botID':botID})[_0x24672e(0x297)]();_0xc6788a&&(dbConfig['get'](_0x24672e(0x238))['find']({'botID':botID})['assign']({'liquidity':_0x1a014e})[_0x24672e(0x2e0)](),config[_0x24672e(0x2b1)]=_0x1a014e),logHistory(_0x24672e(0x235),_0x24672e(0x20e)+Math[_0x24672e(0x180)](_0x1e084b[0x0]['number'])+'\x20'+_0x1e084b[0x0][_0x24672e(0x1a6)]+'\x20'+(_0x1e084b[0x0][_0x24672e(0x22f)]>0x0?'added':_0x24672e(0x2cf))+_0x24672e(0x216)),proxyEmit(_0x24672e(0x1c0),emittedConfiguration());}else logger[_0x24672e(0x2c8)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x1e084b[0x0][_0x24672e(0x22f)])+'\x20'+_0x1e084b[0x0]['coin']+'\x20'+(_0x1e084b[0x0]['number']>0x0?_0x24672e(0x1fe):_0x24672e(0x2cf)));transactionDetected=!![],currentCoins=_0x394a1f,currentCoinsAll=_0xb5c9cc;}else logger[_0x24672e(0x2c8)](_0x24672e(0x20e)+Math[_0x24672e(0x180)](_0x1e084b[0x0]['number'])+'\x20'+_0x1e084b[0x0]['coin']+'\x20'+(_0x1e084b[0x0][_0x24672e(0x22f)]>0x0?_0x24672e(0x1fe):'removed')+_0x24672e(0x24e)),currentCoins=_0x394a1f,currentCoinsAll=_0xb5c9cc;}await sleep(watchTransactionsInterval);}catch(_0x2d3c47){if(!exchangeStopped)await handleError(_0x2d3c47,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x568f3d=config[_0x2dd61a(0x291)],_0x251513=![]){const _0x2bae77=_0x2dd61a;if(allSymbols&&!_0x251513)return;try{markets=await exchange[_0x2bae77(0x2c7)](),allSymbols=[],Object[_0x2bae77(0x194)](markets)[_0x2bae77(0x280)](_0x1cfce9=>{const _0x1a7300=_0x2bae77;_0x1cfce9[0x1]['active']&&_0x1cfce9[0x1][_0x1a7300(0x1c8)]&&allSymbols[_0x1a7300(0x20b)](_0x1cfce9[0x0]);});}catch(_0x3d583d){throw _0x3d583d;}}async function initclient(){const _0x257a70=_0x2dd61a;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x257a70(0x1c1),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2cd664=getNormalizedPerformance();emitPerformance(_0x2cd664),getStartingBalances(_0x2cd664);}function _0x1f12(){const _0x1c8486=['Unknown\x20error\x20occured','error','usd','getPortfolio(2)','remove','toggleBotMode','orderId','push','highest','startnumber','Portfolio\x20change\x20detected:\x20','freeze','date-fns','colorscheme','\x20exchange','set','************','1484172HsLedp','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20network\x20error','cancel','sells','constructor','privateKey','pro','timeout','fetchClosedOrders','balances','Initiating\x20exchange\x20reload','ExchangeNotAvailable','argv','split','getMonth','\x20not\x20available','MIN_NOTIONAL','2801590ikbnVb','data','decrypt','-------------------------------\x0a','\x20|\x20','change24h','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','emojibuy','number','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','leftTxt',':\x20Bot\x20','min','Limit\x20(low-margin)','success','botID','timestamp','bot','amountToPrecision','rightTxt','showConfig','3201732xPojGe','Manual\x20balancing\x20required','\x20metrics:</b>\x20\x0a\x0a','\x20-\x20bot\x20not\x20started','buy','startdate','ORDERS.UNLOCKING','Net\x20effect','valid','symbol','final','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','cooldown','progress','startprice','uncaughtException','Executed\x20','</pre>','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','delta','excluded','1\x20-\x20Unlock\x20orders','apiPassword','offset','-events.json','showname','Exchange','assign','format','AuthenticationError','-config.json','sell','args','\x20>\x20','getMinutes','bot-','slice','14brKJQA','2\x20-\x20Validate\x20orders:\x20','orderstatus','fee','getCoins()','password','padEnd','net-fiat','milliseconds','%\x20(','ccxt','storeConfiguration','logs','event-history','Market','loading-canceled','exchange\x20reloaded','target','\x20value','bb-settings.json','Order\x20is\x20invalid:\x20','\x20:\x20','indexOf','getPortfolio','existsSync','ID:\x20','apiSecret','trade','shift','breakeven','last','forEach','time','\x20portfolio:</b>\x20\x0a\x0a','fetchTickers','Resetting\x20coin\x20results:\x20','329OThxQw','search','24kOqVaP','change','2.3.5','Uncaught\x20Exception:','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Executing\x20exchange\x20reload','OrderNotFound','random','reverse','001','exchange','\x20minutes\x20-\x20','total','LOCKED','apply','fiat','value','status','page','toString','6666792bVnPNg','running','\x20|\x20Error\x20details:\x20','full','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','createOrder','UNLOCKED','recreateCoinResults()','API-key\x20format\x20invalid','ORDERS.UNLOCKED','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','join','send','sendPortfolioTelegram','balancing\x20resumed','secure','basecoin','parseISO','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Invalid\x20quantity','map','createWriteStream','liquidity','filled','close','netoffset','recreate','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','11927mZXbJS','sha256','openOrders','watchOrders','sortBy','./logs/','(((.+)+)+)+$','none','resetHistory','fromCodePoint','3aklASu','open','Uncaught\x20ExchangeError:','Initializing\x20coin\x20results','net-basecoin','initclient','loadMarkets','debug','EUR','4780990ShslFP','market','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','keys','get','removed','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','restart','InvalidOrder','limit-low','type','ExchangeError','./config/','\x20|\x20exchange:\x20','USDP','add','closed','log','sort','has','date','realized','write','ordertype','8qKYAWU','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','replace','No\x20more\x20open\x20orders\x20-\x20','performance','limit-high','2\x20-\x20Handled\x20open\x20orders','threshold','\x20closed\x20the\x20connection','fetchOpenOrders','balancing\x20resumes\x20when\x20cooldown\x20ends','initial','red_yellow_blue','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Pausing\x20for\x20','yargs/yargs','version','test','Waited\x20','2\x20-\x20FILLED\x20unknown\x20order:\x20','toUpperCase','additional\x20symbols\x20','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','changes','TUSD','1\x20-\x20Validate\x20orders:\x20','basecoinvalue','abs','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','differenceInSeconds','\x20API\x20key\x20is\x20invalid','/output-000.log','canceled','\x20not\x20responding','BUSD','substring','cancelLoading','limit','yyyy/MM/dd','recent20','find','getTime','Binance','no\x20additional\x20symbols','stringify','currency','1\x20-\x20Handle\x20open\x20orders','entries','mkdirSync','2\x20-\x20FILLED\x20known\x20order:\x20','defaults','fetchTicker','price','includes','order','-results.json','RSA-OAEP','/USD','unlinkSync','BNB/','hybrid-crypto-js','\x20>\x20[DEBUG]\x20','getFullYear','emitHistory','buys','coin','function','ETH','BNB','round','writeFile','./version.json','eur','placeOrder','isEqual','autoliquidity','parse','\x20has\x20a\x2024h\x20drop\x20of\x20','toFixed','OnMaintenance','getOpenOrders()','botname','getDate','BTC','\x20|\x20lock\x20orders:\x20','warning','Net\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20change','exchange\x20not\x20reloaded','must\x20be\x20greater\x20than\x20minimum\x20amount','configuration','exchanges','apiKey','USD','<pre>','configuration-stored','amount','getHours','spot','getSeconds','limits','bots','recovery','distribution','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','headless','toLowerCase','remainingSymbols','\x20minutes','customId','datetime','max','watchTrades','exec','enabled','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20exchange\x20error','fees','USDC','filter','timeshift','emojisell','padStart','Invalid\x20API\x20key\x20or\x20secret\x20entered','coin-loading-progress','splice','message','string','***',':\x20timer\x20>','\x20hour','onepagemode','Saving\x20configuration','average','length','Error\x20while\x20deleting\x20files:\x20','floor','side','Crypt','deleteHistoryAlerts','cost','2.6.0','portfolio','49014BBrcMl','fetchBalance','cancelOrders()','NetworkError','2.5.0','settings','-performance.json','\x20order:\x20','storeHeadless','added','coins','UNLOCKING','ticker','.json','event'];_0x1f12=function(){return _0x1c8486;};return _0x1f12();}async function toggleBotMode(){const _0x31e7a7=_0x2dd61a;let _0xe3088=dbConfig[_0x31e7a7(0x2ce)](_0x31e7a7(0x238))[_0x31e7a7(0x18d)]({'botID':botID})['value']();if(_0xe3088){const _0x296e93=!_0xe3088[_0x31e7a7(0x1cf)];dbConfig[_0x31e7a7(0x2ce)](_0x31e7a7(0x238))[_0x31e7a7(0x18d)]({'botID':botID})[_0x31e7a7(0x257)]({'headless':_0x296e93})[_0x31e7a7(0x2e0)](),config['headless']=_0x296e93,proxyEmit(_0x31e7a7(0x1c0),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4aaede=_0x2dd61a;process[_0x4aaede(0x2a7)]({'updatebotmanager':!![]},_0xdbac64=>{});}async function loadCoins(_0x38d291){const _0x2a86dd=_0x2dd61a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x17f2dd,_0x5d9fde=0x0,_0x2b836a=0x0;_0x38d291[_0x2a86dd(0x280)](_0x1ea7a7=>{const _0x36b3b7=_0x2a86dd;loading[_0x36b3b7(0x1d1)][_0x36b3b7(0x20b)](_0x1ea7a7);}),loadingCanceled=![];let _0x4892b2=![];while(_0x17f2dd!=_0x38d291[_0x2a86dd(0x1ec)]){_0x17f2dd=0x0,_0x38d291[_0x2a86dd(0x280)](_0x45aa7c=>{const _0x295814=_0x2a86dd;if(global['ticker'][noslash(_0x45aa7c)]){loading[_0x295814(0x1d1)]=loading[_0x295814(0x1d1)][_0x295814(0x1dd)](_0x3ffd9c=>_0x3ffd9c!=_0x45aa7c);if(!watchedSymbols[_0x295814(0x19a)](_0x45aa7c))watchedSymbols[_0x295814(0x20b)](_0x45aa7c);_0x17f2dd++;}}),loading[_0x2a86dd(0x249)]=Math[_0x2a86dd(0x1aa)](_0x17f2dd/_0x38d291[_0x2a86dd(0x1ec)]*0x64);loading[_0x2a86dd(0x249)]!=0x64&&(_0x2b836a>0x1e*0x5&&(loading[_0x2a86dd(0x21d)]=!![],emitLoadingProgress()),_0x2b836a>0x78*0x5&&!_0x4892b2&&(loading[_0x2a86dd(0x218)]=!![],emitLoadingProgress(),_0x4892b2=!![],logHistory(_0x2a86dd(0x205),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x2a86dd(0x1d1)]['join'](',\x20')+_0x2a86dd(0x23f)),logHistory('error',_0x2a86dd(0x2f0)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x193baf=_0x2a86dd;process[_0x193baf(0x2a7)]({'stop':_0x193baf(0x2d1)},_0x4b603e=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x2a86dd(0x218)]=!![],emitLoadingProgress();break;}else _0x17f2dd!=_0x5d9fde&&(_0x5d9fde=_0x17f2dd,emitLoadingProgress()),_0x2b836a++,await sleep(0xc8);}_0x17f2dd==_0x38d291[_0x2a86dd(0x1ec)]&&(coinsLoaded=!![],process[_0x2a86dd(0x2a7)]({'status':'enabled','live':_0x2a86dd(0x29c)},_0x61803c=>{}),_0x4892b2&&logHistory('success',_0x2a86dd(0x2cc)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5e3243=_0x2dd61a;proxyEmit(_0x5e3243(0x1c0),{...emittedConfiguration(),'configstate':_0x5e3243(0x270)});}function emitLoadingProgress(){const _0x46fcd5=_0x2dd61a;proxyEmit(_0x46fcd5(0x1e2),loading);}async function getFiat(){const _0x56f586=_0x2dd61a;let _0x42a8ff=global[_0x56f586(0x201)][stablecoins[_0x56f586(0x1ad)][_0x56f586(0x1a6)]],_0x34e993=global[_0x56f586(0x201)][stablecoins[_0x56f586(0x206)][_0x56f586(0x1a6)]];return{'eur':Number(_0x42a8ff),'usd':Number(_0x34e993)};}function capitalize(_0x5aaa45){const _0x197085=_0x2dd61a;return _0x5aaa45[_0x197085(0x188)](0x0,0x1)[_0x197085(0x2f6)]()+_0x5aaa45[_0x197085(0x188)](0x1);}function supportedExchanges(){const _0x59a60c=_0x2dd61a,_0x1e8f26=['ws',_0x59a60c(0x283),_0x59a60c(0x198),_0x59a60c(0x1d6),_0x59a60c(0x2ba),'cancelOrder',_0x59a60c(0x2a0),_0x59a60c(0x2eb),_0x59a60c(0x21e),_0x59a60c(0x1f6)];let _0x51a5a7=[],_0x7b0de=[],_0x42e7bb=ccxt[_0x59a60c(0x21c)]['exchanges'];_0x42e7bb[_0x59a60c(0x280)](_0xb3ab86=>{const _0x4fdb84=_0x59a60c;try{const _0x4ec014=new ccxt[(_0x4fdb84(0x21c))][_0xb3ab86]();if(_0x4ec014[_0x4fdb84(0x2dd)]['ws'])_0x7b0de['push'](_0x4ec014);}catch(_0x54ac45){}}),_0x7b0de[_0x59a60c(0x280)](_0x2fa86b=>{const _0xd32570=_0x59a60c;let _0x545e86=0x0;_0x1e8f26[_0xd32570(0x280)](_0x59344f=>{const _0x54cd44=_0xd32570;_0x59344f in _0x2fa86b[_0x54cd44(0x2dd)]&&_0x2fa86b[_0x54cd44(0x2dd)][_0x59344f]&&_0x545e86++;}),_0x545e86==_0x1e8f26[_0xd32570(0x1ec)]&&_0x51a5a7[_0xd32570(0x20b)](capitalize(_0x2fa86b['id']));});let _0x2e91ff=[];return _0x42e7bb[_0x59a60c(0x280)](_0x362b0c=>{const _0x3fe2ee=_0x59a60c;_0x362b0c=capitalize(_0x362b0c);if(!_0x51a5a7[_0x3fe2ee(0x19a)](_0x362b0c))_0x2e91ff[_0x3fe2ee(0x20b)](_0x362b0c);}),_0x51a5a7;}function setStartDatePerformance(){const _0x4c0d85=_0x2dd61a;if(config&&config[_0x4c0d85(0x2b1)][0x0][_0x4c0d85(0x2f9)][_0x4c0d85(0x1ec)]!=0x0){const _0x2e0f22=config[_0x4c0d85(0x2b1)][0x0][_0x4c0d85(0x2f9)];dbPerformance['get']('data')[_0x4c0d85(0x18d)]({'date':config[_0x4c0d85(0x241)]})['assign']({'coins':_0x2e0f22})[_0x4c0d85(0x2e0)]();}}async function recreateCoinResults(){const _0x24379=_0x2dd61a;let _0x103036,_0xcafecb=[];try{const _0x534cc3=fns['format'](fns[_0x24379(0x2ac)](config['startdate']['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x147667 of currentCoins){if(_0x147667[_0x24379(0x1a6)]!=config[_0x24379(0x2ab)]){let _0x4788af=0x0,_0x51ce75,_0x188549;_0x103036=await getAllEventOrders(_0x147667[_0x24379(0x245)]);if(_0x103036[_0x24379(0x1ec)]>0x0)_0x103036[_0x24379(0x280)](_0x1c87ec=>{const _0x5740f4=_0x24379,_0x4c5644=_0x147667['symbol'][_0x5740f4(0x19a)](config[_0x5740f4(0x2ab)]+'/');_0xcafecb[_0x5740f4(0x20b)]({'datetime':_0x1c87ec['datetime'],'coin':_0x147667[_0x5740f4(0x1a6)],'symbol':_0x147667[_0x5740f4(0x245)],'side':_0x1c87ec['side'],'reverse':_0x4c5644,'amount':formatResult(_0x1c87ec[_0x5740f4(0x2b2)],0x8),'filled':formatResult(_0x1c87ec[_0x5740f4(0x2b2)],0x8),'price':formatResult(_0x1c87ec[_0x5740f4(0x199)],0x8)}),_0x4788af=_0x1c87ec[_0x5740f4(0x1ef)]=='buy'?_0x4788af+_0x1c87ec['filled']:_0x4788af-_0x1c87ec[_0x5740f4(0x2b2)];if(!_0x188549)_0x188549=_0x1c87ec[_0x5740f4(0x199)];});_0x51ce75=_0x147667[_0x24379(0x22f)]-_0x4788af;let _0x200745;config[_0x24379(0x2b1)][_0x24379(0x280)](_0x4921f5=>{const _0x2e1cc7=_0x24379;!_0x200745&&(_0x200745=_0x4921f5[_0x2e1cc7(0x2f9)][_0x2e1cc7(0x18d)](_0x37430c=>_0x37430c[_0x2e1cc7(0x1a6)]==_0x147667['coin']),_0x200745&&(_0x51ce75=_0x200745[_0x2e1cc7(0x22f)],_0x188549=_0x200745[_0x2e1cc7(0x199)]));});let _0xd45781=dbCoinResults[_0x24379(0x2ce)](_0x24379(0x1ff))[_0x24379(0x18d)]({'coin':_0x147667['coin']})[_0x24379(0x297)]();_0xd45781={'coin':_0x147667['coin'],'number':_0x51ce75,'breakeven':_0x188549,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x24379(0x2ce)](_0x24379(0x1ff))[_0x24379(0x18d)]({'coin':_0x147667[_0x24379(0x1a6)]})[_0x24379(0x257)](_0xd45781)['write']();}}_0xcafecb[_0x24379(0x2dc)]((_0x59e1c1,_0x2da89e)=>_0x59e1c1['datetime']>_0x2da89e[_0x24379(0x1d4)]?0x1:_0x2da89e[_0x24379(0x1d4)]>_0x59e1c1[_0x24379(0x1d4)]?-0x1:0x0);let _0x29c297=0x0;for(let _0x550201 of _0xcafecb){await updateCoinResults(_0x550201,!![]);}}catch(_0x235386){await handleError(_0x235386,_0x24379(0x2a2));}}async function getAllEventOrders(_0x2f19f3){const _0x1ee50f=_0x2dd61a;let _0x3ac2c3=[],_0x1f7e75=dbLogs[_0x1ee50f(0x2ce)](_0x1ee50f(0x26d))[_0x1ee50f(0x1dd)](_0x85a4ed=>{const _0x4901b1=_0x1ee50f,_0x26f285=_0x85a4ed['event'][_0x4901b1(0x1d0)]();return _0x26f285['includes'](_0x2f19f3[_0x4901b1(0x1d0)]())&&(_0x26f285['includes'](_0x4901b1(0x2cb))&&_0x26f285['includes'](_0x4901b1(0x19b))||_0x26f285[_0x4901b1(0x19a)](_0x4901b1(0x2b2))&&_0x26f285[_0x4901b1(0x19a)]('order'));})['sortBy'](_0x1ee50f(0x281))['value']();return _0x1f7e75[_0x1ee50f(0x280)](_0x487817=>{const _0x52bf4b=_0x1ee50f,_0x29c9fe=_0x487817['event'][_0x52bf4b(0x19a)](_0x52bf4b(0x25b))?_0x52bf4b(0x25b):'buy',_0x59426=/#([0-9]|\.)+\s/i,_0x195ebb=Number(_0x59426[_0x52bf4b(0x1d7)](_0x487817[_0x52bf4b(0x203)])[0x0]['slice'](0x1)),_0x231388=/@([0-9]|\.)+$/i,_0x305775=Number(_0x231388[_0x52bf4b(0x1d7)](_0x487817[_0x52bf4b(0x203)])[0x0][_0x52bf4b(0x260)](0x1));_0x3ac2c3[_0x52bf4b(0x20b)]({'datetime':_0x487817[_0x52bf4b(0x281)],'coin':symbolToCoin(_0x2f19f3),'symbol':_0x2f19f3,'side':_0x29c9fe,'amount':_0x195ebb,'filled':_0x195ebb,'price':_0x305775});}),_0x3ac2c3;}async function getAllOrders(_0x2b6b17,_0x21ab44){const _0x5e25aa=_0x2dd61a;let _0x160866=[];while(_0x21ab44<exchange[_0x5e25aa(0x269)]()){const _0x4e0247=0x1f4,_0x20df2f=await exchange['fetchClosedOrders'](_0x2b6b17,_0x21ab44,_0x4e0247);if(_0x20df2f['length'])_0x21ab44=_0x20df2f[_0x20df2f['length']-0x1][_0x5e25aa(0x237)]+0x1,_0x160866=_0x160866['concat'](_0x20df2f);else break;}return _0x160866;}async function validate24hChanges(){const _0x2caeff=_0x2dd61a;for(const _0x34e455 of currentCoins){if(_0x34e455[_0x2caeff(0x1a6)]!=config[_0x2caeff(0x2ab)]){let _0x130dab;_0x34e455[_0x2caeff(0x28f)]?_0x130dab=formatResult((0x1/(global[_0x2caeff(0x288)][noslash(_0x34e455['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x130dab=global[_0x2caeff(0x288)][noslash(_0x34e455[_0x2caeff(0x245)])],_0x130dab<config[_0x2caeff(0x22c)]&&(logHistory(_0x2caeff(0x205),_0x34e455['coin']+_0x2caeff(0x1b2)+_0x130dab+'%'),logHistory(_0x2caeff(0x205),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x2caeff(0x205),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x45c348,_0x48fd0a){const _0x40a113=_0x2dd61a;if(!_0x45c348)return!![];const _0x350b39=_0x48fd0a[_0x40a113(0x223)]('.'),_0x1ddf2d=_0x45c348[_0x40a113(0x223)]('.');for(var _0x20659c=0x0;_0x20659c<_0x1ddf2d[_0x40a113(0x1ec)];_0x20659c++){const _0x3816be=~~_0x1ddf2d[_0x20659c],_0x4d48c8=~~_0x350b39[_0x20659c];if(_0x3816be<_0x4d48c8)return!![];if(_0x3816be>_0x4d48c8)return![];}return![];}async function oneTimeMigration(){const _0x54c103=_0x2dd61a;let _0x10ff80=dbLogs['get']('version')[_0x54c103(0x297)]();if(isOlderVersion(_0x10ff80,_0x54c103(0x289))){let _0x195e39=[];const _0x1b593f=dbLogs[_0x54c103(0x2ce)]('logs')[_0x54c103(0x297)]();_0x1b593f[_0x54c103(0x280)](_0x5dbe0c=>{const _0x15802b=_0x54c103;_0x195e39['push']({'time':_0x5dbe0c[_0x15802b(0x281)],'type':_0x5dbe0c[_0x15802b(0x2d4)],'event':_0x5dbe0c[_0x15802b(0x203)]});}),dbLogs[_0x54c103(0x2ce)]('logs')[_0x54c103(0x257)](_0x195e39)[_0x54c103(0x2e0)]();}let _0x501c12=dbConfig[_0x54c103(0x2ce)](_0x54c103(0x2f2))[_0x54c103(0x297)]();if(isOlderVersion(_0x501c12,_0x54c103(0x289))){let _0x90810d=dbConfig[_0x54c103(0x2ce)](_0x54c103(0x238))[_0x54c103(0x18d)]({'botID':botID})[_0x54c103(0x297)]();if(_0x90810d){let _0x3ad66e=[];_0x90810d[_0x54c103(0x1f4)][_0x54c103(0x280)](_0x343134=>{const _0x5a1add=_0x54c103;_0x3ad66e[_0x5a1add(0x20b)]({'coin':_0x343134[_0x5a1add(0x1a6)],'number':_0x343134['startnumber'],'price':_0x343134['startprice']}),delete _0x343134[_0x5a1add(0x20d)],delete _0x343134[_0x5a1add(0x24a)];});if(_0x3ad66e['length']!==0x0)fs[_0x54c103(0x1ab)](configbackuppath+('starting-balance-'+botID+_0x54c103(0x202)),JSON[_0x54c103(0x191)](_0x3ad66e,null,0x4),function(_0x53e7f7){if(_0x53e7f7){}});const _0x3639ea=(_0x339427,_0x505206)=>{const _0x30dc65=_0x54c103;let _0x3783ad=[];_0x505206[_0x30dc65(0x280)](_0x55973a=>{const _0x5e2644=_0x30dc65,_0x1c7b80=_0x339427[_0x5e2644(0x18d)](_0x29f90c=>_0x29f90c['coin']==_0x55973a[_0x5e2644(0x1a6)]);if(!_0x1c7b80)_0x3783ad[_0x5e2644(0x20b)](_0x55973a);});let _0x370362=[];return _0x339427[_0x30dc65(0x280)](_0x811c3d=>{const _0x5724b3=_0x30dc65,_0x1ff330=_0x505206[_0x5724b3(0x18d)](_0x3d0677=>_0x3d0677[_0x5724b3(0x1a6)]==_0x811c3d[_0x5724b3(0x1a6)]);if(!_0x1ff330||_0x1ff330[_0x5724b3(0x22f)]==0x0&&_0x811c3d[_0x5724b3(0x22f)]!=0x0)_0x370362[_0x5724b3(0x20b)](_0x811c3d);}),{'missingDay1':_0x3783ad,'notInDay2':_0x370362};},_0x227793=dbPerformance[_0x54c103(0x2ce)](_0x54c103(0x228))['cloneDeep']()[_0x54c103(0x297)]();if(_0x227793[_0x54c103(0x1ec)]>0x1){const {missingDay1:_0x54a09c,notInDay2:_0x35a423}=_0x3639ea(_0x3ad66e,_0x227793[0x1][_0x54c103(0x1ff)]);_0x3ad66e=[..._0x3ad66e,..._0x54a09c],_0x35a423[_0x54c103(0x280)](_0x142e53=>{const _0x5c2c74=_0x54c103;let _0x232441=_0x3ad66e['findIndex'](_0x4a5aa8=>_0x4a5aa8[_0x5c2c74(0x1a6)]==_0x142e53['coin']);_0x232441!=-0x1&&_0x3ad66e[_0x5c2c74(0x1e3)](_0x232441,0x1);});}_0x3ad66e[_0x54c103(0x2dc)]((_0x5085a7,_0x54df95)=>_0x5085a7['coin']>_0x54df95[_0x54c103(0x1a6)]?0x1:_0x54df95[_0x54c103(0x1a6)]>_0x5085a7['coin']?-0x1:0x0);let _0x361142=[{'date':_0x90810d[_0x54c103(0x241)],'changes':_0x3ad66e}];_0x227793['length']>0x2&&_0x227793[_0x54c103(0x280)]((_0x30882e,_0x310b12)=>{const _0x2b8f9c=_0x54c103;if(_0x310b12>0x0&&_0x310b12<_0x227793[_0x2b8f9c(0x1ec)]-0x1){const {missingDay1:_0x1b2c81,notInDay2:_0x12d6dd}=_0x3639ea(_0x227793[_0x310b12][_0x2b8f9c(0x1ff)],_0x227793[_0x310b12+0x1][_0x2b8f9c(0x1ff)]);_0x3ad66e=[],(_0x1b2c81['length']!=0x0||_0x12d6dd['length']!=0x0)&&(_0x1b2c81[_0x2b8f9c(0x1ec)]!=0x0&&_0x3ad66e['push'](..._0x1b2c81),_0x12d6dd[_0x2b8f9c(0x1ec)]!=0x0&&(_0x12d6dd[_0x2b8f9c(0x280)](_0xc109b9=>{const _0x55e73c=_0x2b8f9c;_0xc109b9[_0x55e73c(0x22f)]=-_0xc109b9[_0x55e73c(0x22f)];}),_0x3ad66e[_0x2b8f9c(0x20b)](..._0x12d6dd)),_0x3ad66e['sort']((_0x5793a5,_0x4a021b)=>_0x5793a5[_0x2b8f9c(0x1a6)]>_0x4a021b[_0x2b8f9c(0x1a6)]?0x1:_0x4a021b[_0x2b8f9c(0x1a6)]>_0x5793a5[_0x2b8f9c(0x1a6)]?-0x1:0x0),_0x361142['push']({'date':_0x227793[_0x310b12+0x1][_0x2b8f9c(0x2de)],'changes':_0x3ad66e}));}}),dbConfig['get'](_0x54c103(0x238))[_0x54c103(0x18d)]({'botID':botID})['assign']({..._0x90810d,'liquidity':_0x361142})[_0x54c103(0x2e0)]();}}if(isOlderVersion(_0x501c12,_0x54c103(0x1f3))){let _0x12b7aa=dbConfig[_0x54c103(0x2ce)](_0x54c103(0x238))['find']({'botID':botID})[_0x54c103(0x297)]();if(_0x12b7aa){const _0x5cb813=_0x12b7aa['exchange'],_0x3761ed=_0x5cb813?capitalize(_0x5cb813):_0x54c103(0x18f);dbConfig[_0x54c103(0x2ce)](_0x54c103(0x238))[_0x54c103(0x18d)]({'botID':botID})[_0x54c103(0x257)]({'exchange':_0x3761ed})[_0x54c103(0x2e0)]();}}let _0x11e370=dbPerformance[_0x54c103(0x2ce)](_0x54c103(0x2f2))[_0x54c103(0x297)]();isOlderVersion(_0x11e370,_0x54c103(0x289))&&setStartDatePerformance();let _0x603fd4=dbCoinResults[_0x54c103(0x2ce)](_0x54c103(0x2f2))['value']();if(isOlderVersion(_0x603fd4,_0x54c103(0x1f9))){let _0x391a41=dbCoinResults[_0x54c103(0x2ce)]('coins')[_0x54c103(0x297)]();if(_0x391a41[_0x54c103(0x1ec)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5db9b8=_0x2dd61a;dbConfig[_0x5db9b8(0x213)](_0x5db9b8(0x2f2),serverversion)[_0x5db9b8(0x2e0)](),dbPerformance['set']('version',serverversion)[_0x5db9b8(0x2e0)](),dbLogs[_0x5db9b8(0x213)](_0x5db9b8(0x2f2),serverversion)[_0x5db9b8(0x2e0)](),dbCoinResults['set'](_0x5db9b8(0x2f2),serverversion)['write']();}function getConfiguration(_0xd55351){const _0x4b0bff=_0x2dd61a;let _0x4143cf=dbConfig['get']('bot')['find']({'botID':_0xd55351})[_0x4b0bff(0x297)]();if(_0x4143cf){let _0x145c6f=![];typeof _0x4143cf['threshold']==_0x4b0bff(0x1e5)&&(_0x4143cf={..._0x4143cf,'threshold':Number(_0x4143cf[_0x4b0bff(0x2e9)])},_0x145c6f=!![]),_0x4143cf[_0x4b0bff(0x22c)]==null&&(_0x4143cf={..._0x4143cf,'change24h':-0x14},_0x145c6f=!![]),!_0x4143cf[_0x4b0bff(0x296)]&&(_0x4143cf={..._0x4143cf,'fiat':'USD'},_0x145c6f=!![]),!_0x4143cf[_0x4b0bff(0x1e9)]&&(_0x4143cf={..._0x4143cf,'onepagemode':settings['onepagemode']},_0x145c6f=!![]),!_0x4143cf[_0x4b0bff(0x211)]&&(_0x4143cf={..._0x4143cf,'colorscheme':'red_yellow_blue'},_0x145c6f=!![]),!_0x4143cf[_0x4b0bff(0x1b0)]&&(_0x4143cf={..._0x4143cf,'autoliquidity':!![]},_0x145c6f=!![]),_0x145c6f&&(_0x4143cf={'botID':_0x4143cf[_0x4b0bff(0x236)],'exchange':_0x4143cf[_0x4b0bff(0x291)],'apiKey':_0x4143cf[_0x4b0bff(0x1c2)],'apiSecret':_0x4143cf[_0x4b0bff(0x27b)],'apiPassword':_0x4143cf[_0x4b0bff(0x252)],'basecoin':_0x4143cf[_0x4b0bff(0x2ab)],'botname':_0x4143cf[_0x4b0bff(0x1b6)],'showname':_0x4143cf['showname'],'threshold':_0x4143cf['threshold'],'ordertype':_0x4143cf['ordertype'],'timeout':_0x4143cf['timeout'],'fiat':_0x4143cf[_0x4b0bff(0x296)],'startdate':_0x4143cf[_0x4b0bff(0x241)],'recreate':_0x4143cf[_0x4b0bff(0x2b5)],'timeshift':_0x4143cf[_0x4b0bff(0x1de)],'onepagemode':_0x4143cf[_0x4b0bff(0x1e9)],'headless':_0x4143cf[_0x4b0bff(0x1cf)],'cooldown':_0x4143cf[_0x4b0bff(0x248)],'change24h':_0x4143cf[_0x4b0bff(0x22c)],'emojibuy':_0x4143cf[_0x4b0bff(0x22e)],'emojisell':_0x4143cf[_0x4b0bff(0x1df)],'colorscheme':_0x4143cf[_0x4b0bff(0x211)],'portfolio':_0x4143cf[_0x4b0bff(0x1f4)],'autoliquidity':_0x4143cf[_0x4b0bff(0x1b0)],'liquidity':_0x4143cf[_0x4b0bff(0x2b1)],'openOrders':_0x4143cf[_0x4b0bff(0x2b9)]},dbConfig['get'](_0x4b0bff(0x238))['remove']()[_0x4b0bff(0x2e0)](),dbConfig[_0x4b0bff(0x2ce)](_0x4b0bff(0x238))[_0x4b0bff(0x20b)](_0x4143cf)['write']());}else _0x4143cf={'botID':_0xd55351,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0xd55351,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x4b0bff(0x1c3),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x4b0bff(0x1e9)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4b0bff(0x2ee),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4143cf;}function emittedConfiguration(){const _0x159e1c=_0x2dd61a;let _0x2a134e;if(config[_0x159e1c(0x1c2)]=='')_0x2a134e={...config,'configstate':_0x159e1c(0x2ed)};else config[_0x159e1c(0x1c2)]==_0x159e1c(0x1e6)?_0x2a134e={...config,'configstate':_0x159e1c(0x1cc)}:(_0x2a134e={...config,'apiKey':_0x159e1c(0x214),'apiSecret':_0x159e1c(0x214)},config[_0x159e1c(0x252)]&&(_0x2a134e[_0x159e1c(0x252)]='************'));return _0x2a134e;}function getSettings(){const _0x427052=_0x2dd61a;return dbSettings[_0x427052(0x2ce)](_0x427052(0x1fa))['value']();}function getSecure(){const _0x2c9f76=_0x2dd61a;return dbSecure['get'](_0x2c9f76(0x2aa))['value']()||{};}function updateTimeshift(_0xb9e4f3){const _0x5406f0=_0x2dd61a;let _0x4e65be=dbConfig[_0x5406f0(0x2ce)](_0x5406f0(0x238))['find']({'botID':botID})[_0x5406f0(0x297)]();_0x4e65be&&dbConfig[_0x5406f0(0x2ce)]('bot')[_0x5406f0(0x18d)]({'botID':botID})['assign']({'timeshift':_0xb9e4f3})[_0x5406f0(0x2e0)](),config[_0x5406f0(0x1de)]=_0xb9e4f3,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x242bf4){const _0x565d55=_0x2dd61a;let _0x587dd7=dbConfig[_0x565d55(0x2ce)](_0x565d55(0x238))[_0x565d55(0x18d)]({'botID':botID})['value']();_0x587dd7&&dbConfig[_0x565d55(0x2ce)]('bot')[_0x565d55(0x18d)]({'botID':botID})[_0x565d55(0x257)]({'onepagemode':_0x242bf4})[_0x565d55(0x2e0)](),config[_0x565d55(0x1e9)]=_0x242bf4,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x29d1b4){const _0x3b72ee=_0x2dd61a;logger[_0x3b72ee(0x2c8)](_0x3b72ee(0x1ea));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x3b72ee(0x2c8)]('Transaction\x20detection\x20blocked');let _0x4f8a29=[],_0xf6e231=![],_0x238f41=![],_0x1410ee=[];_0x29d1b4[_0x3b72ee(0x1f4)][_0x3b72ee(0x280)](_0x2dab42=>{const _0x117ff7=_0x3b72ee;if(!_0x2dab42[_0x117ff7(0x250)]&&_0x2dab42[_0x117ff7(0x1a6)]!=_0x29d1b4['basecoin'])_0x1410ee[_0x117ff7(0x20b)](_0x2dab42[_0x117ff7(0x245)]);}),_0x1410ee[_0x3b72ee(0x280)](_0x340e3e=>{const _0x221794=_0x3b72ee,_0x4d0dcf=watchedSymbols[_0x221794(0x19a)](_0x340e3e);!_0x4d0dcf&&_0x4f8a29[_0x221794(0x20b)](_0x340e3e);}),_0x1410ee[_0x3b72ee(0x280)](_0x172683=>{const _0x456d81=_0x3b72ee,_0x47d7bc=currentCoins['find'](_0x1ef3cf=>_0x1ef3cf[_0x456d81(0x245)]==_0x172683);!_0x47d7bc&&(_0xf6e231=!![]);}),currentCoins['forEach'](_0xcb01a3=>{const _0xd36d4b=_0x3b72ee;if(_0xcb01a3['coin']!=config[_0xd36d4b(0x2ab)]){const _0x29e348=_0x1410ee['find'](_0x1da657=>_0x1da657==_0xcb01a3[_0xd36d4b(0x245)]);!_0x29e348&&(_0xf6e231=!![]);}}),_0x29d1b4['portfolio']['forEach'](_0x4979a0=>{const _0x168cd5=_0x3b72ee,_0x483fd8=config['portfolio']['find'](_0x57a6d1=>_0x57a6d1[_0x168cd5(0x1a6)]==_0x4979a0[_0x168cd5(0x1a6)]);if(_0x483fd8&&_0x4979a0[_0x168cd5(0x253)]!=_0x483fd8['offset'])_0x238f41=!![];});let _0x493bba=dbConfig[_0x3b72ee(0x2ce)](_0x3b72ee(0x238))[_0x3b72ee(0x18d)]({'botID':botID})[_0x3b72ee(0x297)]();_0x29d1b4={..._0x29d1b4,'apiKey':crypt[_0x3b72ee(0x229)](secure[_0x3b72ee(0x21b)],_0x29d1b4[_0x3b72ee(0x1c2)])['message'],'apiSecret':crypt[_0x3b72ee(0x229)](secure[_0x3b72ee(0x21b)],_0x29d1b4['apiSecret'])['message']};_0x29d1b4[_0x3b72ee(0x252)]&&(_0x29d1b4[_0x3b72ee(0x252)]=crypt[_0x3b72ee(0x229)](secure[_0x3b72ee(0x21b)],_0x29d1b4[_0x3b72ee(0x252)])[_0x3b72ee(0x1e4)]);let _0x16821e=![];if(_0x493bba){_0x29d1b4[_0x3b72ee(0x1c2)]==_0x3b72ee(0x214)?_0x29d1b4[_0x3b72ee(0x1c2)]=config[_0x3b72ee(0x1c2)]:_0x16821e=!![];_0x29d1b4[_0x3b72ee(0x27b)]==_0x3b72ee(0x214)?_0x29d1b4['apiSecret']=config[_0x3b72ee(0x27b)]:_0x16821e=!![];if(_0x29d1b4[_0x3b72ee(0x252)]==_0x3b72ee(0x214))_0x29d1b4['apiPassword']=config[_0x3b72ee(0x252)];else{if(_0x29d1b4[_0x3b72ee(0x252)])_0x16821e=!![];}dbConfig['get'](_0x3b72ee(0x238))[_0x3b72ee(0x18d)]({'botID':botID})[_0x3b72ee(0x257)](_0x29d1b4)[_0x3b72ee(0x2e0)]();}else dbConfig[_0x3b72ee(0x2ce)](_0x3b72ee(0x238))['push'](_0x29d1b4)[_0x3b72ee(0x2e0)](),_0x16821e=!![],process[_0x3b72ee(0x2a7)]({'status':_0x3b72ee(0x1d8),'live':_0x3b72ee(0x29c)},_0x1ac26b=>{});process['send']({'botname':_0x29d1b4['botname']},_0x2e5f85=>{}),updateBotManager(),config={..._0x29d1b4},proxyEmit(_0x3b72ee(0x1c5)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x16821e)await reset(_0x4f8a29,!![]);else _0xf6e231||_0x238f41?await reset(_0x4f8a29,![]):getBalances();blockTransactionDetection=![],logger[_0x3b72ee(0x2c8)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x148fb3){const _0x2bb194=_0x2dd61a,_0x3b86bc={...config,'headless':_0x148fb3['headless']};let _0x3f8264=dbConfig[_0x2bb194(0x2ce)](_0x2bb194(0x238))[_0x2bb194(0x18d)]({'botID':botID})[_0x2bb194(0x297)]();_0x3f8264&&dbConfig[_0x2bb194(0x2ce)](_0x2bb194(0x238))[_0x2bb194(0x18d)]({'botID':botID})[_0x2bb194(0x257)](_0x3b86bc)[_0x2bb194(0x2e0)](),config={..._0x3b86bc},updateBotManager(),proxyEmit(_0x2bb194(0x1c0),emittedConfiguration());}async function storeFiat(_0x16f03f){const _0x381cee=_0x2dd61a,_0xa8895={...config,'fiat':_0x16f03f};let _0x418e05=dbConfig['get'](_0x381cee(0x238))[_0x381cee(0x18d)]({'botID':botID})[_0x381cee(0x297)]();_0x418e05&&dbConfig['get'](_0x381cee(0x238))[_0x381cee(0x18d)]({'botID':botID})[_0x381cee(0x257)](_0xa8895)[_0x381cee(0x2e0)](),config={..._0xa8895},proxyEmit(_0x381cee(0x1c0),emittedConfiguration());}function resetHistory(){const _0x16bc5a=_0x2dd61a;logger[_0x16bc5a(0x29e)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x16bc5a(0x254))))fs[_0x16bc5a(0x19f)](path[_0x16bc5a(0x2a6)](configpath,_0x16bc5a(0x25f)+botID+_0x16bc5a(0x254)));if(fs['existsSync'](path[_0x16bc5a(0x2a6)](configpath,_0x16bc5a(0x25f)+botID+_0x16bc5a(0x1fb))))fs['unlinkSync'](path[_0x16bc5a(0x2a6)](configpath,_0x16bc5a(0x25f)+botID+'-performance.json'));if(fs['existsSync'](path[_0x16bc5a(0x2a6)](configpath,_0x16bc5a(0x25f)+botID+_0x16bc5a(0x19c))))fs[_0x16bc5a(0x19f)](path[_0x16bc5a(0x2a6)](configpath,_0x16bc5a(0x25f)+botID+_0x16bc5a(0x19c)));}catch(_0x29112d){if(_0x29112d)logger[_0x16bc5a(0x29e)](_0x16bc5a(0x1ed),_0x29112d);}const _0x453d73=getDate();let _0xf9fe6c=[];currentCoins[_0x16bc5a(0x280)](_0x1674b3=>{_0xf9fe6c['push']({'coin':_0x1674b3['coin'],'number':_0x1674b3['number'],'price':_0x1674b3['last']});});let _0x41cccb=dbConfig[_0x16bc5a(0x2ce)](_0x16bc5a(0x238))[_0x16bc5a(0x18d)]({'botID':botID})[_0x16bc5a(0x297)]();_0x41cccb&&(dbConfig[_0x16bc5a(0x2ce)](_0x16bc5a(0x238))[_0x16bc5a(0x18d)]({'botID':botID})[_0x16bc5a(0x257)]({'liquidity':[{'date':_0x453d73,'changes':_0xf9fe6c}]})[_0x16bc5a(0x2e0)](),config[_0x16bc5a(0x2b1)]=[]),process[_0x16bc5a(0x2a7)]({'stop':_0x16bc5a(0x2d1)},_0x4cb1b2=>{});}function noslash(_0x1ada70){const _0x2e6160=_0x2dd61a;return _0x1ada70[_0x2e6160(0x2e4)]('/','');}function updateHighestFee(_0x50c568){const _0x1d31e6=_0x2dd61a;if(_0x50c568['reverse']){let _0x46413e={'filled':_0x50c568[_0x1d31e6(0x2b2)]*_0x50c568[_0x1d31e6(0x199)],'amount':_0x50c568['filled']*_0x50c568[_0x1d31e6(0x199)],'side':_0x50c568[_0x1d31e6(0x1ef)]==_0x1d31e6(0x25b)?_0x1d31e6(0x240):_0x1d31e6(0x25b),'price':0x1/_0x50c568[_0x1d31e6(0x199)]};_0x50c568={..._0x50c568,..._0x46413e};}const _0x426275=defaultFee*_0x50c568[_0x1d31e6(0x2b2)]*_0x50c568['price'];lastFees[_0x1d31e6(0x18c)][_0x1d31e6(0x1ec)]===0x14&&lastFees[_0x1d31e6(0x18c)][_0x1d31e6(0x27d)](),lastFees[_0x1d31e6(0x18c)][_0x1d31e6(0x20b)](_0x426275),lastFees[_0x1d31e6(0x20c)]=Math[_0x1d31e6(0x1d5)](...lastFees[_0x1d31e6(0x18c)]);}async function updateNumberCoinsCcxt(_0x13a5be){const _0x325f28=_0x2dd61a;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x13a5be['symbol']+'\x20|\x20'+_0x13a5be['status']+_0x325f28(0x22b)+_0x13a5be['id']);let _0x2e690a=_0x13a5be[_0x325f28(0x298)],_0x1c1066=![];currentCoins[_0x325f28(0x280)](_0x394c00=>{const _0x3decf3=_0x325f28;_0x394c00['symbol']==_0x13a5be[_0x3decf3(0x245)]&&(_0x1c1066=!![]);});if(!_0x1c1066)return;const _0x517995=currentCoins['find'](_0x3be77c=>_0x3be77c[_0x325f28(0x245)]==_0x13a5be['symbol']),_0x34f2e8=_0x40eb7b=>{const _0x5bdb83=_0x325f28;if(_0x517995)_0x517995[_0x5bdb83(0x263)]=_0x40eb7b;};if(_0x2e690a==_0x325f28(0x2c2))_0x34f2e8(_0x325f28(0x2c2));else{if(_0x2e690a==_0x325f28(0x185)){_0x34f2e8(_0x325f28(0x185));const _0x296c6a=await getCoins();[currentCoins,currentCoinsAll]=_0x296c6a,await getOpenOrders(),handleOpenOrders();}else{if(_0x2e690a==_0x325f28(0x2da)){logger[_0x325f28(0x2c8)]('1\x20-\x20FILLED:\x20'+_0x13a5be['symbol']+_0x325f28(0x22b)+_0x13a5be[_0x325f28(0x2b2)]+_0x325f28(0x22b)+_0x13a5be['id']);let _0x3d4a15=![];if(lastOrders)for(const _0x69c596 of lastOrders){const _0x359057=0xc8,_0x1ad438=0x1388;let _0x4492c4=0x0;while(!_0x69c596[_0x325f28(0x20a)]&&_0x4492c4*_0x359057<_0x1ad438){_0x4492c4++,await sleep(_0x359057);}if(_0x4492c4>0x0)logger[_0x325f28(0x2c8)](_0x325f28(0x2f4)+_0x4492c4*_0x359057/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x69c596[_0x325f28(0x20a)]==_0x13a5be['id']){logger['debug'](_0x325f28(0x196)+_0x13a5be['id']),_0x3d4a15=!![];if(_0x69c596[_0x325f28(0x2b2)]==0x0){logger['debug']('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x13a5be['id']);if(_0x13a5be[_0x325f28(0x1eb)])_0x69c596['price']=_0x13a5be['average'];else{if(_0x13a5be['price'])_0x69c596['price']=_0x13a5be['price'];else{}}_0x69c596[_0x325f28(0x2b2)]=_0x13a5be['filled'],updateHighestFee(_0x69c596),_0x34f2e8('filled'),await validateOrders();if(lockOrders==ORDERS[_0x325f28(0x294)]){const _0x10d893=await getCoins();[currentCoins,currentCoinsAll]=_0x10d893;}_0x69c596['fee']={'currency':_0x13a5be[_0x325f28(0x264)]?_0x13a5be[_0x325f28(0x264)][_0x325f28(0x192)]:null,'cost':_0x13a5be['fee']?_0x13a5be[_0x325f28(0x264)][_0x325f28(0x1f2)]:0x0},await updateCoinResults(_0x69c596);}}}if(!_0x3d4a15){logger['debug'](_0x325f28(0x2f5)+_0x13a5be['id']),_0x34f2e8(_0x325f28(0x2b2));const _0x4a7407=await getCoins();[currentCoins,currentCoinsAll]=_0x4a7407,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xb4ade0=JSON[_0x325f28(0x1b1)](lastBalances[_0x325f28(0x1f4)]);const _0x1cd050=_0xb4ade0['find'](_0x2645d8=>_0x2645d8[_0x325f28(0x245)]==_0x13a5be[_0x325f28(0x245)]);if(_0x1cd050){if(_0x2e690a==_0x325f28(0x2c2))_0x1cd050[_0x325f28(0x263)]=_0x1cd050[_0x325f28(0x263)]=='filled'?'filled':_0x325f28(0x2c2);else{if(_0x2e690a==_0x325f28(0x185))_0x1cd050[_0x325f28(0x263)]=_0x1cd050[_0x325f28(0x263)]=='filled'?_0x325f28(0x2b2):_0x325f28(0x185);else _0x2e690a=='closed'&&(_0x1cd050[_0x325f28(0x263)]=_0x325f28(0x2b2));}}lastBalances={...lastBalances,'portfolio':JSON[_0x325f28(0x191)](_0xb4ade0)},proxyEmit(_0x325f28(0x21f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x265598=_0x2dd61a;await getOpenOrders();let _0x51965f=![];currentCoins[_0x265598(0x280)](_0x4d1548=>{const _0x4885b8=_0x265598;_0x51965f=allOpenOrders[_0x4885b8(0x18d)](_0x934ad7=>_0x934ad7['symbol']==_0x4d1548['symbol']),_0x4d1548[_0x4885b8(0x263)]=_0x51965f?_0x4885b8(0x2c2):_0x4885b8(0x2be);});}async function getCoins(_0x4ea3cb=!![],_0x6d288a=config[_0x2dd61a(0x2ab)]){const _0x3b3c37=_0x2dd61a;let _0x326611,_0x3af69b=[],_0x47c2f4=[],_0x218aa9=[],_0x17d0b2=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x326611=await exchange[_0x3b3c37(0x1f6)](),mybalances=_0x326611[_0x3b3c37(0x293)];for(const [_0x4876c9,_0x3297d8]of Object['entries'](mybalances)){_0x17d0b2[_0x3b3c37(0x20b)](_0x4876c9);}if(_0x6d288a=='')for(const [_0x252b0e,_0x3f15f5]of Object[_0x3b3c37(0x194)](mybalances)){_0x3f15f5!=0x0&&_0x47c2f4[_0x3b3c37(0x20b)]({'coin':_0x252b0e});}else{let _0x260fdd=![];for(const [_0x20401f,_0x3a081d]of Object[_0x3b3c37(0x194)](mybalances)){if(_0x17d0b2[_0x3b3c37(0x19a)](_0x20401f)){const _0x4b7c95=config[_0x3b3c37(0x1f4)]['find'](_0x2ab150=>_0x2ab150[_0x3b3c37(0x1a6)]==_0x20401f),_0x3516be=_0x20401f+'/'+_0x6d288a,_0x287bf6=_0x6d288a+'/'+_0x20401f,_0x481e0d=currentCoins[_0x3b3c37(0x18d)](_0x125038=>_0x125038['coin']==_0x20401f);_0x260fdd=![];if((_0x3a081d!=0x0||_0x4b7c95)&&(allSymbols[_0x3b3c37(0x19a)](_0x3516be)||_0x20401f==_0x6d288a))_0x20401f!=_0x6d288a&&_0x3af69b[_0x3b3c37(0x20b)](_0x3516be),_0x47c2f4[_0x3b3c37(0x20b)]({'coin':_0x20401f,'symbol':_0x3516be,'reverse':![],'number':Math[_0x3b3c37(0x1d5)](_0x3a081d+(_0x4b7c95&&_0x4b7c95[_0x3b3c37(0x253)]||0x0),0x0),'orderstatus':_0x481e0d?_0x481e0d[_0x3b3c37(0x263)]:_0x3b3c37(0x2be)});else(_0x3a081d!=0x0||_0x4b7c95)&&allSymbols[_0x3b3c37(0x19a)](_0x287bf6)&&(_0x20401f!=_0x6d288a&&_0x3af69b[_0x3b3c37(0x20b)](_0x287bf6),_0x47c2f4[_0x3b3c37(0x20b)]({'coin':_0x20401f,'symbol':_0x287bf6,'reverse':!![],'number':Math[_0x3b3c37(0x1d5)](_0x3a081d+(_0x4b7c95&&_0x4b7c95[_0x3b3c37(0x253)]||0x0),0x0),'orderstatus':_0x481e0d?_0x481e0d[_0x3b3c37(0x263)]:_0x3b3c37(0x2be)}));}}}}catch(_0x386373){if(!_0x4ea3cb)handleErrorNoStop(_0x386373,_0x3b3c37(0x265));else await handleError(_0x386373,'getCoins()');}return _0x218aa9=cloneDeep(_0x47c2f4),_0x47c2f4=_0x47c2f4[_0x3b3c37(0x1dd)](_0x307843=>{const _0x3ff34f=_0x3b3c37,_0x3415ba=config[_0x3ff34f(0x1f4)][_0x3ff34f(0x18d)](_0x30a665=>_0x30a665[_0x3ff34f(0x1a6)]==_0x307843[_0x3ff34f(0x1a6)]);return _0x3415ba&&!_0x3415ba['excluded'];}),[_0x47c2f4,_0x218aa9];}async function getCoinNumber(_0x32fd8b){const _0x4d4568=_0x2dd61a;let _0x173ef3;try{const _0x57889a=await exchange[_0x4d4568(0x1f6)]();_0x173ef3=_0x57889a[_0x4d4568(0x293)][_0x32fd8b];}catch(_0x794bf){await handleError(_0x794bf,'getCoinNumber()');}return _0x173ef3;}async function getOpenOrders(){const _0x3a8ab7=_0x2dd61a;let _0x4af802;allOpenOrders=[];try{for(const _0x21ec44 of config[_0x3a8ab7(0x1f4)]){!_0x21ec44['excluded']&&_0x21ec44[_0x3a8ab7(0x1a6)]!=config[_0x3a8ab7(0x2ab)]&&(_0x4af802=await exchange[_0x3a8ab7(0x2eb)](_0x21ec44[_0x3a8ab7(0x245)]),_0x4af802[_0x3a8ab7(0x1ec)]>0x0&&allOpenOrders[_0x3a8ab7(0x20b)](_0x4af802[0x0]));}}catch(_0x595bc3){await handleError(_0x595bc3,_0x3a8ab7(0x1b5));}}async function handleOpenOrders(_0x1d6fff=0x0){const _0x565f6c=_0x2dd61a;allOpenOrders[_0x565f6c(0x1ec)]==0x0&&lockOrders==ORDERS[_0x565f6c(0x294)]&&allOrdersPlaced&&(_0x1d6fff==0x0?(logger['debug'](_0x565f6c(0x193)),_0x1d6fff++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x565f6c(0x2c8)](_0x565f6c(0x2e8)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x5ce8ea){const _0x1c34f6=_0x2dd61a,_0x37251b=ccxt[_0x1c34f6(0x21c)][_0x5ce8ea[_0x1c34f6(0x291)]['toLowerCase']()],_0x58a84f=new _0x37251b({'apiKey':_0x5ce8ea[_0x1c34f6(0x1c2)],'secret':_0x5ce8ea[_0x1c34f6(0x27b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1c34f6(0x1c8)}});if(_0x5ce8ea['apiPassword'])_0x58a84f[_0x1c34f6(0x266)]=_0x5ce8ea[_0x1c34f6(0x252)];try{await _0x58a84f['loadMarkets']();}catch(_0x58f74f){throw _0x58f74f;}}function cloneDeep(_0x4bee96){const _0x16918e=_0x2dd61a;return JSON[_0x16918e(0x1b1)](JSON[_0x16918e(0x191)](_0x4bee96));}async function getPortfolio(_0x97ba84){const _0x5ee1a7=_0x2dd61a;let _0x187066=[],_0xb12910=[],_0x1ca1e7=[],_0x29218a;if(_0x97ba84['apiKey']!==_0x5ee1a7(0x214)||_0x97ba84[_0x5ee1a7(0x27b)]!==_0x5ee1a7(0x214)||_0x97ba84['apiPassword']&&_0x97ba84[_0x5ee1a7(0x252)]!==_0x5ee1a7(0x214)){if(config[_0x5ee1a7(0x291)]){if(_0x97ba84[_0x5ee1a7(0x1c2)]==_0x5ee1a7(0x214))_0x97ba84['apiKey']=config[_0x5ee1a7(0x1c2)];if(_0x97ba84[_0x5ee1a7(0x27b)]=='************')_0x97ba84[_0x5ee1a7(0x27b)]=config[_0x5ee1a7(0x27b)];if(_0x97ba84['apiPassword']=='************')_0x97ba84[_0x5ee1a7(0x252)]=config[_0x5ee1a7(0x252)];try{await testAPI(_0x97ba84);}catch(_0x34237e){if(_0x34237e[_0x5ee1a7(0x29a)]()[_0x5ee1a7(0x19a)](_0x5ee1a7(0x259))){logger[_0x5ee1a7(0x2c8)](_0x5ee1a7(0x1e1)),proxyEmit(_0x5ee1a7(0x1f4),![]);return;}else{handleError(_0x34237e,'getPortfolio(0)');return;}}}await initExchange(_0x97ba84[_0x5ee1a7(0x291)],_0x97ba84[_0x5ee1a7(0x1c2)],_0x97ba84[_0x5ee1a7(0x27b)],_0x97ba84[_0x5ee1a7(0x252)]);try{await loadSymbols(_0x97ba84[_0x5ee1a7(0x291)],!![]);}catch(_0x53930f){if(_0x53930f[_0x5ee1a7(0x29a)]()[_0x5ee1a7(0x19a)]('AuthenticationError')){proxyEmit(_0x5ee1a7(0x1f4),![]);return;}else{handleError(_0x53930f,'getPortfolio(1)');return;}}const _0x5dac54=await getCoins(![],_0x97ba84[_0x5ee1a7(0x2ab)]);_0x1ca1e7=cloneDeep(_0x5dac54[0x1]);}else _0x1ca1e7=cloneDeep(currentCoinsAll);if(_0x97ba84[_0x5ee1a7(0x2ab)]=='')proxyEmit(_0x5ee1a7(0x1f4),_0x1ca1e7);else{_0x1ca1e7['forEach'](_0x2681e0=>{const _0x1568a3=_0x5ee1a7;if(_0x2681e0['coin']!=_0x97ba84['basecoin'])_0x187066['push'](_0x2681e0[_0x1568a3(0x245)]);});try{_0xb12910=await exchange[_0x5ee1a7(0x283)](_0x187066);}catch(_0x1515df){if(_0x1515df[_0x5ee1a7(0x29a)]()[_0x5ee1a7(0x19a)]('AuthenticationError')){proxyEmit('portfolio',![]);return;}else{handleError(_0x1515df,_0x5ee1a7(0x207));return;}}_0x1ca1e7[_0x5ee1a7(0x280)](_0x231c1f=>{const _0x5e6e2f=_0x5ee1a7;_0x231c1f[_0x5e6e2f(0x1a6)]!=_0x97ba84[_0x5e6e2f(0x2ab)]?_0x29218a=_0x231c1f[_0x5e6e2f(0x28f)]?0x1/_0xb12910[_0x231c1f[_0x5e6e2f(0x245)]]['last']:_0xb12910[_0x231c1f['symbol']][_0x5e6e2f(0x27f)]:_0x29218a=0x1,_0x231c1f[_0x5e6e2f(0x199)]=formatResult(_0x29218a,0x8);}),proxyEmit('portfolio',_0x1ca1e7);}}function truncateTradeAmount(_0x547620,_0x593206){const _0x4d56dc=_0x2dd61a;let _0x3bc795=0x0;try{_0x3bc795=exchange[_0x4d56dc(0x239)](_0x547620,_0x593206);}catch(_0x174c34){}return _0x3bc795;}function checkMinimums(_0x57d946){const _0x2e95d9=_0x2dd61a;let _0x2715a0=!![];const _0x25d60e=!_0x57d946[_0x2e95d9(0x28f)]?markets[_0x57d946[_0x2e95d9(0x245)]][_0x2e95d9(0x1ca)][_0x2e95d9(0x1c6)][_0x2e95d9(0x233)]:markets[_0x57d946[_0x2e95d9(0x245)]][_0x2e95d9(0x1ca)][_0x2e95d9(0x1f2)][_0x2e95d9(0x233)],_0x300b93=!_0x57d946[_0x2e95d9(0x28f)]?markets[_0x57d946[_0x2e95d9(0x245)]][_0x2e95d9(0x1ca)][_0x2e95d9(0x1f2)]['min']:markets[_0x57d946[_0x2e95d9(0x245)]][_0x2e95d9(0x1ca)]['amount']['min'],_0x4e24a5=truncateTradeAmount(_0x57d946['symbol'],_0x57d946[_0x2e95d9(0x27c)]);_0x57d946['trade']=_0x4e24a5;if(Math[_0x2e95d9(0x180)](_0x4e24a5)<_0x25d60e)_0x2715a0=![];if(Math[_0x2e95d9(0x180)](_0x4e24a5)*_0x57d946[_0x2e95d9(0x27f)]<_0x300b93)_0x2715a0=![];if(_0x57d946[_0x2e95d9(0x1ef)]==_0x2e95d9(0x25b)){let _0x40de00=config[_0x2e95d9(0x1f4)]['find'](_0x2ccf7a=>_0x2ccf7a[_0x2e95d9(0x1a6)]==_0x57d946[_0x2e95d9(0x1a6)]);if(_0x40de00['offset']>0x0){if(Math[_0x2e95d9(0x180)](_0x4e24a5)>_0x57d946[_0x2e95d9(0x22f)]-_0x40de00[_0x2e95d9(0x253)])_0x2715a0=![];}else{if(Math['abs'](_0x4e24a5)>_0x57d946[_0x2e95d9(0x22f)])_0x2715a0=![];}}if(_0x57d946[_0x2e95d9(0x1ef)]==_0x2e95d9(0x240)){let _0x230ebb=config[_0x2e95d9(0x1f4)]['find'](_0x1a38fc=>_0x1a38fc[_0x2e95d9(0x1a6)]==config[_0x2e95d9(0x2ab)]),_0x3bd20c=currentCoins[_0x2e95d9(0x18d)](_0x278bb8=>_0x278bb8['coin']==config['basecoin']);if(_0x230ebb['offset']>0x0){if(Math[_0x2e95d9(0x180)](_0x4e24a5)*_0x57d946[_0x2e95d9(0x27f)]>_0x3bd20c['number']-_0x230ebb['offset'])_0x2715a0=![];}else{if(Math[_0x2e95d9(0x180)](_0x4e24a5)*_0x57d946[_0x2e95d9(0x27f)]>_0x3bd20c['number'])_0x2715a0=![];}}return _0x2715a0;}async function getBalances(_0x755e2b=!![]){const _0x3a6293=_0x2dd61a;let _0x20cc32=0x0,_0x392600;const _0x33d520=config[_0x3a6293(0x2e9)];if(config[_0x3a6293(0x1cf)]&&config[_0x3a6293(0x22c)]<0x0)await validate24hChanges();currentCoins[_0x3a6293(0x280)](_0x97d89d=>{const _0x1506de=_0x3a6293;if(_0x97d89d[_0x1506de(0x1a6)]!=config[_0x1506de(0x2ab)]){let _0x592348=global[_0x1506de(0x201)][noslash(_0x97d89d[_0x1506de(0x245)])];_0x392600=_0x97d89d[_0x1506de(0x28f)]?0x1/_0x592348:_0x592348;}else _0x392600=0x1;let _0x37ec39=_0x97d89d['number']*_0x392600;_0x20cc32+=_0x37ec39,_0x97d89d['last']=formatResult(Number(_0x392600),0x8),_0x97d89d[_0x1506de(0x297)]=_0x37ec39;}),currentCoins[_0x3a6293(0x280)](_0x4c03e3=>{const _0x1eb0dc=_0x3a6293;let _0x4816a2=config[_0x1eb0dc(0x1f4)]['find'](_0x4f4b66=>_0x4f4b66[_0x1eb0dc(0x1a6)]==_0x4c03e3['coin']),_0x335931=Number(_0x4816a2[_0x1eb0dc(0x1cd)]),_0x2b97f8=_0x4c03e3[_0x1eb0dc(0x297)]/_0x20cc32*0x64,_0x33249c=_0x335931*_0x20cc32/0x64/_0x4c03e3[_0x1eb0dc(0x27f)]-_0x4c03e3['number'];_0x4c03e3['distribution']=formatResult(_0x2b97f8,0x3),_0x4c03e3[_0x1eb0dc(0x272)]=formatResult(_0x335931,0x3),_0x4c03e3['trade']=formatResult(_0x33249c,0x8),_0x4c03e3['side']='',_0x4c03e3[_0x1eb0dc(0x244)]=![];if(_0x4c03e3[_0x1eb0dc(0x1a6)]!=config[_0x1eb0dc(0x2ab)]){if(_0x4c03e3[_0x1eb0dc(0x1cd)]>_0x335931)_0x4c03e3[_0x1eb0dc(0x1ef)]=_0x1eb0dc(0x25b),_0x4c03e3[_0x1eb0dc(0x244)]=checkMinimums(_0x4c03e3);else _0x4c03e3[_0x1eb0dc(0x1cd)]<_0x335931&&(_0x4c03e3[_0x1eb0dc(0x1ef)]=_0x1eb0dc(0x240),_0x4c03e3[_0x1eb0dc(0x244)]=checkMinimums(_0x4c03e3));}_0x4c03e3[_0x1eb0dc(0x24f)]=_0x4c03e3['distribution']/_0x4c03e3[_0x1eb0dc(0x272)]-0x1;if(_0x4c03e3['orderstatus']==_0x1eb0dc(0x2b2)||_0x4c03e3[_0x1eb0dc(0x263)]=='canceled')_0x4c03e3['orderstatus']=_0x1eb0dc(0x2be);}),currentCoins[_0x3a6293(0x2dc)]((_0x4173ee,_0x327aaf)=>_0x4173ee['delta']<_0x327aaf[_0x3a6293(0x24f)]?0x1:_0x327aaf[_0x3a6293(0x24f)]<_0x4173ee['delta']?-0x1:0x0);const _0x579177=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x579177['eur'],'usd':_0x579177[_0x3a6293(0x206)],'portfolio':JSON[_0x3a6293(0x191)](currentCoins),'threshold':_0x33d520},proxyEmit(_0x3a6293(0x21f),{'serverversion':serverversion,'balances':lastBalances});if(_0x755e2b){if(config[_0x3a6293(0x1cf)])headlessMode({'portfolio':currentCoins,'threshold':_0x33d520});else{if(lockOrders==ORDERS[_0x3a6293(0x2a1)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x33d520});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x49407d=getNormalizedPerformance();getStartingBalances(_0x49407d),emitPerformance(_0x49407d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4b8f5f=getNormalizedPerformance();emitPerformance(_0x4b8f5f),getStartingBalances(_0x4b8f5f),logger[_0x3a6293(0x2c8)](_0x3a6293(0x2d0));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x291c55=_0x2dd61a;if(!lastBalances)return;let _0x14d591=[],_0x3cc93a,_0x2a168e=JSON['parse'](lastBalances[_0x291c55(0x1f4)]);_0x2a168e[_0x291c55(0x2dc)]((_0x32aeb3,_0x3aeeb7)=>_0x32aeb3[_0x291c55(0x1a6)]>_0x3aeeb7[_0x291c55(0x1a6)]?0x1:_0x3aeeb7[_0x291c55(0x1a6)]>_0x32aeb3[_0x291c55(0x1a6)]?-0x1:0x0),_0x2a168e[_0x291c55(0x280)](_0xc6f100=>{const _0x3defda=_0x291c55;let _0xdcc2d4={'coin':_0xc6f100[_0x3defda(0x1a6)],'number':_0xc6f100[_0x3defda(0x22f)],'price':_0xc6f100[_0x3defda(0x27f)]};_0x14d591['push'](_0xdcc2d4);});const _0x1792bc=await getFiat();_0x3cc93a={'date':lastBalances['time'][_0x291c55(0x223)]('\x20')[0x0],'eur':_0x1792bc['eur'],'usd':_0x1792bc[_0x291c55(0x206)],'coins':_0x14d591};let _0x56bddc=dbPerformance[_0x291c55(0x2ce)](_0x291c55(0x228))[_0x291c55(0x18d)]({'date':_0x3cc93a[_0x291c55(0x2de)]})['value']();_0x56bddc?_0x3cc93a[_0x291c55(0x2de)]!=config['startdate']&&dbPerformance[_0x291c55(0x2ce)](_0x291c55(0x228))[_0x291c55(0x18d)]({'date':_0x3cc93a[_0x291c55(0x2de)]})['assign'](_0x3cc93a)[_0x291c55(0x2e0)]():dbPerformance[_0x291c55(0x2ce)](_0x291c55(0x228))['push'](_0x3cc93a)[_0x291c55(0x2e0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x56ec57=_0x2dd61a;let _0x549c5b=[];if(dbPerformance[_0x56ec57(0x2dd)](_0x56ec57(0x228))[_0x56ec57(0x297)]()){let _0x241a63=dbPerformance[_0x56ec57(0x2ce)](_0x56ec57(0x228))['cloneDeep']()[_0x56ec57(0x1dd)](_0x13bfba=>{const _0x3554df=_0x56ec57;if(_0x13bfba['coins'][_0x3554df(0x1ec)]==0x0)return![];else return!![];})[_0x56ec57(0x2bb)](_0x56ec57(0x2de))[_0x56ec57(0x297)](),_0x473894=[...config[_0x56ec57(0x2b1)]];_0x473894[_0x56ec57(0x2dc)]((_0x59727f,_0x1fd909)=>_0x59727f['date']>_0x1fd909[_0x56ec57(0x2de)]?-0x1:_0x1fd909[_0x56ec57(0x2de)]>_0x59727f['date']?0x1:0x0);let _0x3a5eb4=0x1,_0x5e2a3f=[],_0x1ac1f2=0x0;_0x241a63[_0x56ec57(0x260)]()['reverse']()['forEach']((_0x23cb42,_0x4e9c0d)=>{const _0x142f22=_0x56ec57;if(_0x473894[_0x1ac1f2]){if(_0x241a63[_0x241a63[_0x142f22(0x1ec)]-_0x4e9c0d]&&_0x473894[_0x1ac1f2][_0x142f22(0x2de)]==_0x241a63[_0x241a63[_0x142f22(0x1ec)]-_0x4e9c0d]['date']){if(_0x4e9c0d<_0x241a63[_0x142f22(0x1ec)]){let _0x3cdd28=0x0,_0x5bc811=0x0;_0x241a63[_0x241a63[_0x142f22(0x1ec)]-_0x4e9c0d][_0x142f22(0x1ff)]['forEach'](_0x50c56b=>{const _0x3aaf7f=_0x142f22;_0x5bc811+=_0x50c56b[_0x3aaf7f(0x22f)]*_0x50c56b[_0x3aaf7f(0x199)];}),_0x473894[_0x1ac1f2]['changes'][_0x142f22(0x280)](_0x1dd541=>{const _0x5443d8=_0x142f22;_0x3cdd28+=_0x1dd541[_0x5443d8(0x22f)]*_0x1dd541[_0x5443d8(0x199)];}),_0x3a5eb4*=_0x3cdd28/(_0x5bc811-_0x3cdd28)+0x1;}_0x1ac1f2++;}}let _0x100774=0x0;_0x23cb42[_0x142f22(0x1ff)]['forEach'](_0x2aa426=>{const _0x2ea8b0=_0x142f22;_0x100774+=_0x2aa426[_0x2ea8b0(0x22f)]*_0x2aa426[_0x2ea8b0(0x199)];}),_0x5e2a3f[_0x241a63['length']-_0x4e9c0d-0x1]=_0x100774*(_0x3a5eb4-0x1);});let _0x1194da=[];_0x473894=[...config[_0x56ec57(0x2b1)]]||[];let _0x2a5e22=0x0;_0x1ac1f2=0x0,_0x241a63['forEach']((_0x654485,_0x3bafc4)=>{const _0x47c68a=_0x56ec57;if(_0x473894[_0x1ac1f2]){const _0x4978bc=fns[_0x47c68a(0x1b1)](_0x473894[_0x1ac1f2]['date'],_0x47c68a(0x18b),new Date()),_0x100e90=fns[_0x47c68a(0x1b1)](_0x654485['date'],_0x47c68a(0x18b),new Date());if(fns[_0x47c68a(0x1af)](_0x4978bc,_0x100e90)){let _0x195bac=0x0;_0x473894[_0x1ac1f2]['changes'][_0x47c68a(0x280)](_0xe2dce9=>{const _0x336ff4=_0x47c68a;!_0x1194da[_0xe2dce9[_0x336ff4(0x1a6)]]?_0x1194da[_0xe2dce9['coin']]=_0xe2dce9['number']:(_0x195bac=_0x1194da[_0xe2dce9[_0x336ff4(0x1a6)]],_0x1194da[_0xe2dce9[_0x336ff4(0x1a6)]]+=_0xe2dce9[_0x336ff4(0x22f)]);const _0x479aa1=_0x654485['coins'][_0x336ff4(0x18d)](_0xd4b500=>_0xd4b500[_0x336ff4(0x1a6)]==_0xe2dce9[_0x336ff4(0x1a6)]);(!_0x479aa1||_0x479aa1[_0x336ff4(0x22f)]==0x0)&&(_0x2a5e22+=(-_0xe2dce9[_0x336ff4(0x22f)]-_0x195bac)*_0xe2dce9[_0x336ff4(0x199)]);}),_0x1ac1f2++;}}_0x654485[_0x47c68a(0x1ff)][_0x47c68a(0x280)]((_0x92a608,_0x241482)=>{const _0x7b6654=_0x47c68a;_0x1194da[_0x92a608[_0x7b6654(0x1a6)]]&&(_0x92a608['initial']=_0x1194da[_0x92a608[_0x7b6654(0x1a6)]]);}),_0x549c5b[_0x47c68a(0x20b)]({'date':_0x654485[_0x47c68a(0x2de)],'eur':_0x654485[_0x47c68a(0x1ad)],'usd':_0x654485[_0x47c68a(0x206)],'offset':_0x5e2a3f[_0x3bafc4],'netoffset':_0x2a5e22,'coins':_0x654485['coins']});});}return _0x549c5b;}function emitPerformance(_0x3adcbc){const _0x29dd5e=_0x2dd61a;_0x3adcbc[_0x29dd5e(0x1ec)]!==0x0?(proxyEmit(_0x29dd5e(0x2e6),_0x3adcbc),lastPerformanceEmitted=getDate()):proxyEmit(_0x29dd5e(0x2e6),[]);}function getPerf(_0xa9bc6c,_0x2957ac){const _0x38d2b4=_0x2dd61a;let _0x2ec313=0x0,_0x31e679=0x0,_0x5c7c76=0x0;_0xa9bc6c['coins'][_0x38d2b4(0x280)](_0x586377=>{const _0xafc7b2=_0x38d2b4;_0x2ec313+=_0x586377['number']*_0x586377[_0xafc7b2(0x199)];});_0x2957ac&&(_0x2ec313+=_0xa9bc6c[_0x38d2b4(0x253)]);if(config[_0x38d2b4(0x2ab)]==='BTC'||config[_0x38d2b4(0x2ab)]===_0x38d2b4(0x1a8))_0x31e679=_0x2ec313*_0xa9bc6c[_0x38d2b4(0x1ad)],_0x5c7c76=_0x2ec313*_0xa9bc6c[_0x38d2b4(0x206)];else{if(usdBasecoins['includes'](config[_0x38d2b4(0x2ab)]))_0x31e679=_0x2ec313*_0xa9bc6c[_0x38d2b4(0x1ad)]/_0xa9bc6c[_0x38d2b4(0x206)],_0x5c7c76=_0x2ec313;else config['basecoin']===_0x38d2b4(0x2c9)&&(_0x31e679=_0x2ec313,_0x5c7c76=_0x2ec313*_0xa9bc6c[_0x38d2b4(0x206)]/_0xa9bc6c[_0x38d2b4(0x1ad)]);}return[_0x2ec313,_0x31e679,_0x5c7c76];}function getKPIs(_0x20d6c2,_0x18194c=_0x2dd61a(0x2c9)){const _0x145b87=_0x2dd61a,_0x34dca6=config['basecoin'],_0x24e80f=lastBalances,_0x327799=currentCoins,_0x5d204b=getNormalizedPerformance(),_0x4164d9=_0x20d6c2===_0x145b87(0x2ab)?_0x34dca6:_0x20d6c2===_0x145b87(0x296)||_0x20d6c2===_0x145b87(0x268)?_0x18194c:_0x145b87(0x1bb)+_0x34dca6,_0xec884c=_0x20d6c2===_0x145b87(0x2c5)?_0x145b87(0x243):_0x20d6c2===_0x145b87(0x268)?_0x145b87(0x243):_0x4164d9+_0x145b87(0x273),_0x393a23=_0x20d6c2===_0x145b87(0x2c5)||_0x20d6c2===_0x145b87(0x268)?'Net\x20effect':_0x4164d9+_0x145b87(0x1bd);let _0xd3aaed=0x0;_0x327799[_0x145b87(0x280)](_0x3aa13e=>{const _0x1af840=_0x145b87;_0xd3aaed+=_0x3aa13e['number']*_0x3aa13e[_0x1af840(0x27f)];});if(_0x20d6c2===_0x145b87(0x296)||_0x20d6c2==='net-fiat'){if(_0x34dca6===_0x145b87(0x1b8)||_0x34dca6===_0x145b87(0x1a8))_0xd3aaed=_0xd3aaed*(_0x18194c===_0x145b87(0x2c9)?_0x24e80f[_0x145b87(0x1ad)]:_0x24e80f[_0x145b87(0x206)]);else{if(usdBasecoins[_0x145b87(0x19a)](_0x34dca6))_0xd3aaed=_0xd3aaed*(_0x18194c===_0x145b87(0x2c9)?_0x24e80f[_0x145b87(0x1ad)]/_0x24e80f['usd']:0x1);else _0x34dca6===_0x145b87(0x2c9)&&(_0xd3aaed=_0xd3aaed*(_0x18194c===_0x145b87(0x2c9)?0x1:_0x24e80f[_0x145b87(0x206)]/_0x24e80f[_0x145b87(0x1ad)]));}}let _0x1ad881;if(_0xd3aaed!==0x0){if(_0x20d6c2===_0x145b87(0x2ab))_0x1ad881=(_0xd3aaed/startingBalances[_0x145b87(0x2ab)]-0x1)*0x64;else{if(_0x18194c==='EUR')_0x1ad881=(_0xd3aaed/startingBalances[_0x145b87(0x1ad)]-0x1)*0x64;else _0x1ad881=(_0xd3aaed/startingBalances[_0x145b87(0x206)]-0x1)*0x64;}let _0x499452=0x0;if(startingBalances[_0x145b87(0x1ff)])_0x327799[_0x145b87(0x280)](_0x5bdc03=>{const _0x527b42=_0x145b87;let _0x1b4302=startingBalances[_0x527b42(0x1ff)][_0x527b42(0x18d)](_0x27fce9=>_0x27fce9[_0x527b42(0x1a6)]===_0x5bdc03['coin']);if(_0x1b4302&&_0x1b4302['coin']&&_0x5bdc03[_0x527b42(0x22f)]!==0x0)_0x499452+=_0x1b4302[_0x527b42(0x22f)]*_0x5bdc03[_0x527b42(0x27f)];});let _0xee2a02=0x0;if(_0x5d204b[_0x145b87(0x1ec)]!==0x0){let _0x603f5a=_0x5d204b[_0x5d204b[_0x145b87(0x1ec)]-0x1];_0xee2a02=_0x603f5a[_0x145b87(0x2b4)];}_0x499452-=_0xee2a02;_0x20d6c2==='net-basecoin'&&(_0x1ad881=(_0xd3aaed-_0x499452)/startingBalances[_0x145b87(0x2ab)]*0x64,_0xd3aaed=_0xd3aaed-_0x499452);if(_0x20d6c2===_0x145b87(0x268)){let _0x13566b=_0x18194c===_0x145b87(0x2c9)?startingBalances[_0x145b87(0x1ad)]:startingBalances[_0x145b87(0x206)];if(_0x34dca6===_0x145b87(0x1b8)||_0x34dca6==='ETH')_0x499452=_0x18194c==='EUR'?_0x499452*_0x24e80f[_0x145b87(0x1ad)]:_0x499452*_0x24e80f[_0x145b87(0x206)];else{if(usdBasecoins['includes'](_0x34dca6))_0x499452=_0x18194c==='EUR'?_0x499452*_0x24e80f[_0x145b87(0x1ad)]/_0x24e80f[_0x145b87(0x206)]:_0x499452;else _0x34dca6==='EUR'&&(_0x499452=_0x18194c===_0x145b87(0x2c9)?_0x499452:_0x499452*_0x24e80f[_0x145b87(0x206)]/_0x24e80f[_0x145b87(0x1ad)]);}_0x1ad881=(_0xd3aaed-_0x499452)/_0x13566b*0x64,_0xd3aaed=_0xd3aaed-_0x499452;}if(_0x1ad881){if(_0x1ad881<0x64)_0x1ad881=_0x1ad881[_0x145b87(0x1b3)](0x2);else{if(_0x1ad881<0x3e8)_0x1ad881=_0x1ad881['toFixed'](0x1);else _0x1ad881=_0x1ad881['toFixed'](0x0);}}else _0x1ad881=Number('0')[_0x145b87(0x1b3)](0x2);if(_0xd3aaed){if(Math[_0x145b87(0x180)](_0xd3aaed)<0.000001)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x2);else{if(Math[_0x145b87(0x180)](_0xd3aaed)<0.1)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x6);else{if(Math[_0x145b87(0x180)](_0xd3aaed)<0x1)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x5);else{if(Math[_0x145b87(0x180)](_0xd3aaed)<0xa)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x4);else{if(Math[_0x145b87(0x180)](_0xd3aaed)<0x64)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x3);else{if(Math[_0x145b87(0x180)](_0xd3aaed)<0x3e8)_0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x2);else _0xd3aaed=_0xd3aaed[_0x145b87(0x1b3)](0x2);}}}}}}else _0xd3aaed=Number('0')[_0x145b87(0x1b3)](0x2);}else _0x1ad881=Number('0')[_0x145b87(0x1b3)](0x2);return{'value':_0xd3aaed,'change':_0x1ad881,'leftTxt':_0xec884c,'rightTxt':_0x393a23};}async function getStartingBalances(_0x4ffb1a,_0x272215=!![]){const _0x562394=_0x2dd61a;if(_0x4ffb1a[_0x562394(0x1ec)]!==0x0){const [_0x554b82,_0x2c9cdb,_0x506e7c]=getPerf(_0x4ffb1a[0x0],!![]);let _0x17d874=[];config[_0x562394(0x1f4)][_0x562394(0x280)](_0x301aa0=>{const _0x35f6ed=_0x562394;let _0x39cbd5=0x0,_0x2f6c1;config[_0x35f6ed(0x2b1)]['forEach'](_0x237ff2=>{const _0x375c15=_0x35f6ed;let _0x14208e=_0x237ff2[_0x375c15(0x2f9)][_0x375c15(0x18d)](_0x4e5149=>_0x4e5149[_0x375c15(0x1a6)]==_0x301aa0['coin']);if(_0x14208e){_0x39cbd5+=_0x14208e['number'];if(!_0x2f6c1)_0x2f6c1=_0x14208e[_0x375c15(0x199)];}}),_0x17d874[_0x35f6ed(0x20b)]({'coin':_0x301aa0[_0x35f6ed(0x1a6)],'number':_0x39cbd5,'initialprice':_0x2f6c1});});const _0x369e4e={'basecoin':_0x554b82,'eur':_0x2c9cdb,'usd':_0x506e7c,'coins':_0x17d874};if(_0x272215)proxyEmit('starting-balances',_0x369e4e);startingBalances=_0x369e4e;}}function headlessMode(_0x477361){const _0x1c232d=_0x2dd61a;let _0x254a76=_0x477361[_0x1c232d(0x1f4)],_0x2bd361=_0x477361[_0x1c232d(0x2e9)],_0x16f01b=[];for(let _0xd2f362 of _0x254a76){if(_0xd2f362[_0x1c232d(0x1a6)]!=config[_0x1c232d(0x2ab)]){if(_0xd2f362[_0x1c232d(0x24f)]>=_0x2bd361/0x64){if(_0xd2f362[_0x1c232d(0x244)])_0x16f01b[_0x1c232d(0x20b)](_0xd2f362);}else{if(_0xd2f362[_0x1c232d(0x24f)]<=-_0x2bd361/0x64){if(_0xd2f362[_0x1c232d(0x244)])_0x16f01b[_0x1c232d(0x20b)](_0xd2f362);}}}}_0x16f01b['length']>0x0&&placeOrder(_0x16f01b);}function notifyBalance(_0x2a4509){const _0x25a3c3=_0x2dd61a;let _0x49f45a=_0x2a4509[_0x25a3c3(0x1f4)],_0x1f7090=_0x2a4509['threshold'],_0x146944=[];for(let _0x1cd3db of _0x49f45a){if(_0x1cd3db[_0x25a3c3(0x1a6)]!=config[_0x25a3c3(0x2ab)]){if(_0x1cd3db[_0x25a3c3(0x24f)]>=_0x1f7090/0x64){if(_0x1cd3db[_0x25a3c3(0x244)])_0x146944[_0x25a3c3(0x20b)](_0x1cd3db);}else{if(_0x1cd3db[_0x25a3c3(0x24f)]<=-_0x1f7090/0x64){if(_0x1cd3db['valid'])_0x146944[_0x25a3c3(0x20b)](_0x1cd3db);}}}}if(_0x146944[_0x25a3c3(0x1ec)]>0x0){let _0x57dc59=_0x146944[_0x25a3c3(0x2af)](_0x1aa622=>_0x1aa622[_0x25a3c3(0x1a6)]);_0x57dc59['sort']();let _0x56a877=_0x57dc59[_0x25a3c3(0x2a6)](',\x20');if(!lastCoinsToBalance)logHistory(_0x25a3c3(0x1ba),_0x25a3c3(0x23d));lastCoinsToBalance=_0x56a877;}}function symbolToCoin(_0x970e03){const _0x1f0a5b=_0x2dd61a;let _0x2d52ae;if(_0x970e03[_0x1f0a5b(0x19a)]('/'+config[_0x1f0a5b(0x2ab)]))_0x2d52ae=_0x970e03[_0x1f0a5b(0x2e4)]('/'+config[_0x1f0a5b(0x2ab)],'');if(_0x970e03[_0x1f0a5b(0x19a)](config['basecoin']+'/'))_0x2d52ae=_0x970e03[_0x1f0a5b(0x2e4)](config[_0x1f0a5b(0x2ab)]+'/','');return _0x2d52ae;}async function unlockOrders(){const _0x8289b4=_0x2dd61a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x8289b4(0x294)]){logger[_0x8289b4(0x2c8)](_0x8289b4(0x251)),lockOrders=ORDERS[_0x8289b4(0x200)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3a2078=await getCoins();[currentCoins,currentCoinsAll]=_0x3a2078,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x8289b4(0x2a1)],logger[_0x8289b4(0x2c8)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x56fd03){const _0x1e3c2d=_0x2dd61a;if(_0x56fd03)validateOrdersState=_0x56fd03;logger[_0x1e3c2d(0x2c8)](_0x1e3c2d(0x17e)+validateOrdersState+_0x1e3c2d(0x1b9)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x1e3c2d(0x242):_0x1e3c2d(0x2a4)));let _0x1179e2=[],_0x149fde=config[_0x1e3c2d(0x2e1)]==_0x1e3c2d(0x2cb)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1e3c2d(0x21d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1e3c2d(0x294)])return;logger[_0x1e3c2d(0x2c8)](_0x1e3c2d(0x262)+validateOrdersState),lastOrders['forEach'](_0x5e491d=>{const _0x38f375=_0x1e3c2d;let _0x24dbea=![];_0x5e491d[_0x38f375(0x2b2)]>0x0&&(_0x24dbea=!![]),_0x1179e2['push'](_0x24dbea),_0x24dbea&&config[_0x38f375(0x2e1)]!=_0x38f375(0x2cb)&&logHistory('order','Order\x20filled:\x20'+_0x5e491d['symbol']+'\x20'+_0x5e491d[_0x38f375(0x1ef)]+'\x20#'+formatResult(_0x5e491d[_0x38f375(0x2b2)],0x8)+'\x20@'+formatResult(_0x5e491d['price'],0x8));}),_0x1179e2[_0x1e3c2d(0x280)]((_0xa032b9,_0x40dfbd)=>{const _0x4089b4=_0x1e3c2d;if(_0xa032b9)lastOrders[_0x4089b4(0x1e3)](_0x40dfbd,0x1);}),persistOpenOrders(lastOrders);const _0x337726=coolingDown?_0x1e3c2d(0x2ec):_0x1e3c2d(0x2a9);if(validateOrdersState==_0x1e3c2d(0x2ed)){validateOrdersState='ongoing';if(_0x1179e2[_0x1e3c2d(0x19a)](![])){if(config[_0x1e3c2d(0x2e1)]==_0x1e3c2d(0x2cb)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x1179e2[_0x1e3c2d(0x19a)](![])){}else{if(allOrdersPlaced){if(config[_0x1e3c2d(0x2e1)]==_0x1e3c2d(0x2cb)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x1e3c2d(0x246))_0x1179e2[_0x1e3c2d(0x19a)](![])&&(config[_0x1e3c2d(0x2e1)]==_0x1e3c2d(0x2cb)?logHistory(_0x1e3c2d(0x235),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x1e3c2d(0x1aa)](_0x149fde*validateOrderInterval/0xea60)+_0x1e3c2d(0x292)+_0x337726):(await cancelOrders(),logHistory(_0x1e3c2d(0x235),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x149fde*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x337726))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!='market')logHistory(_0x1e3c2d(0x235),_0x1e3c2d(0x2e5)+_0x337726);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2dce5a=>{const _0x2e57fe=_0x3ee9;try{const _0x3a6697=await exchange['cancelOrder'](_0x2dce5a[_0x2e57fe(0x20a)],_0x2dce5a[_0x2e57fe(0x245)]);}catch(_0x17ef02){if(_0x17ef02['toString']()['includes'](_0x2e57fe(0x28d))){}else await handleError(_0x17ef02,_0x2e57fe(0x1f7));}});}async function initCoinResults(_0x5a438f){const _0x1e48ad=_0x2dd61a;_0x5a438f?logger[_0x1e48ad(0x2c8)](_0x1e48ad(0x284)+_0x5a438f):logger[_0x1e48ad(0x2c8)](_0x1e48ad(0x2c4)),config['portfolio'][_0x1e48ad(0x280)](_0x362b19=>{const _0x1951ff=_0x1e48ad;if(!_0x362b19['excluded']&&_0x362b19['coin']!=config['basecoin']){const _0x14df67=currentCoins[_0x1951ff(0x18d)](_0x20bc37=>_0x20bc37[_0x1951ff(0x1a6)]==_0x362b19[_0x1951ff(0x1a6)]),_0xf51683=global[_0x1951ff(0x201)][noslash(_0x362b19[_0x1951ff(0x245)])];let _0x39817c=_0x14df67?_0x14df67[_0x1951ff(0x22f)]:null,_0x10c3ac=_0x362b19[_0x1951ff(0x28f)]?0x1/_0xf51683:_0xf51683,_0x2d139b;config[_0x1951ff(0x2b1)][_0x1951ff(0x280)](_0x28591e=>{const _0x3e356c=_0x1951ff;!_0x2d139b&&(_0x2d139b=_0x28591e[_0x3e356c(0x2f9)][_0x3e356c(0x18d)](_0x58427d=>_0x58427d[_0x3e356c(0x1a6)]==_0x362b19[_0x3e356c(0x1a6)]),_0x2d139b&&(_0x39817c=_0x2d139b[_0x3e356c(0x22f)],_0x10c3ac=_0x2d139b[_0x3e356c(0x199)]));});let _0x180cde=dbCoinResults[_0x1951ff(0x2ce)](_0x1951ff(0x1ff))[_0x1951ff(0x18d)]({'coin':_0x362b19['coin']})[_0x1951ff(0x297)]();if(!_0x180cde){const _0x1b5581={'coin':_0x362b19['coin'],'number':_0x39817c,'breakeven':_0x10c3ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1951ff(0x2ce)](_0x1951ff(0x1ff))[_0x1951ff(0x20b)](_0x1b5581)[_0x1951ff(0x2e0)]();}else{if(_0x5a438f&&_0x362b19[_0x1951ff(0x1a6)]==_0x5a438f){const _0x396464={'coin':_0x362b19[_0x1951ff(0x1a6)],'number':_0x39817c,'breakeven':_0x10c3ac,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1951ff(0x1ff))[_0x1951ff(0x18d)]({'coin':_0x362b19[_0x1951ff(0x1a6)]})[_0x1951ff(0x257)](_0x396464)['write']();}}}});}async function updateCoinResults(_0x5d04f9,_0x5355bc=![]){const _0x432efe=_0x2dd61a;let _0x37c0fb,_0x145f0f,_0x2dcb8f,_0x424eeb,_0x43b06c,_0x33ca15,_0xbcb131=dbCoinResults[_0x432efe(0x2ce)](_0x432efe(0x1ff))['find']({'coin':_0x5d04f9['coin']})['value'](),_0x5d57e9=![];Object[_0x432efe(0x194)](_0xbcb131)[_0x432efe(0x280)](([_0xcc6c8f,_0xd33ad9])=>{if(_0xd33ad9==null)_0x5d57e9=!![];});(!_0xbcb131||_0x5d57e9)&&(await initCoinResults(_0x5d04f9[_0x432efe(0x1a6)]),_0xbcb131=dbCoinResults[_0x432efe(0x2ce)](_0x432efe(0x1ff))[_0x432efe(0x18d)]({'coin':_0x5d04f9[_0x432efe(0x1a6)]})[_0x432efe(0x297)]());_0x5d04f9[_0x432efe(0x28f)]&&(_0x33ca15={'filled':_0x5d04f9[_0x432efe(0x2b2)]*_0x5d04f9['price'],'amount':_0x5d04f9[_0x432efe(0x2b2)]*_0x5d04f9[_0x432efe(0x199)],'side':_0x5d04f9['side']==_0x432efe(0x25b)?_0x432efe(0x240):_0x432efe(0x25b),'price':0x1/_0x5d04f9[_0x432efe(0x199)]},_0x5d04f9={..._0x5d04f9,..._0x33ca15});_0x5355bc?_0x145f0f=_0x5d04f9['side']==_0x432efe(0x240)?_0xbcb131[_0x432efe(0x22f)]+_0x5d04f9[_0x432efe(0x2b2)]:_0xbcb131[_0x432efe(0x22f)]-_0x5d04f9[_0x432efe(0x2b2)]:_0x145f0f=await getCoinNumber(_0x5d04f9[_0x432efe(0x1a6)]);if(_0x5d04f9[_0x432efe(0x264)]&&_0x5d04f9['fee'][_0x432efe(0x192)]==config[_0x432efe(0x2ab)])_0x37c0fb=_0x5d04f9[_0x432efe(0x264)]['cost'];else{if(_0x5d04f9[_0x432efe(0x264)]&&_0x5d04f9['fee'][_0x432efe(0x192)]==_0x432efe(0x1a9)&&!_0x5355bc)_0x37c0fb=_0x5d04f9[_0x432efe(0x264)][_0x432efe(0x1f2)]*global[_0x432efe(0x201)][_0x432efe(0x1a9)+config['basecoin']];else _0x37c0fb=defaultFee*_0x5d04f9[_0x432efe(0x2b2)]*_0x5d04f9['price'];}_0x5d04f9['side']==_0x432efe(0x240)?(_0x2dcb8f=_0x145f0f!=0x0?(_0xbcb131[_0x432efe(0x27e)]*_0xbcb131['number']+_0x5d04f9['price']*(_0x145f0f-_0xbcb131['number'])+_0x37c0fb)/_0x145f0f:0x0,_0x424eeb=_0xbcb131[_0x432efe(0x2df)]):(_0x2dcb8f=_0x145f0f!=0x0?(_0xbcb131[_0x432efe(0x27e)]*_0xbcb131['number']-_0x5d04f9[_0x432efe(0x199)]*(_0xbcb131[_0x432efe(0x22f)]-_0x145f0f)+_0x37c0fb)/_0x145f0f:0x0,_0x424eeb=_0xbcb131['realized']+(_0x5d04f9[_0x432efe(0x199)]-_0xbcb131['breakeven'])*_0x5d04f9[_0x432efe(0x2b2)]);_0x43b06c=(_0x5d04f9[_0x432efe(0x199)]-_0x2dcb8f-_0x37c0fb/_0x5d04f9[_0x432efe(0x2b2)])*_0x145f0f;let _0x53b65f={'coin':_0x5d04f9[_0x432efe(0x1a6)],'number':_0x145f0f,'breakeven':formatResult(_0x2dcb8f,0x8),'realized':formatResult(_0x424eeb,0x8),'unrealized':formatResult(_0x43b06c,0x8),'fees':formatResult(_0xbcb131[_0x432efe(0x1db)]+_0x37c0fb,0x8),'sells':_0x5d04f9[_0x432efe(0x1ef)]==_0x432efe(0x25b)?_0xbcb131[_0x432efe(0x219)]+0x1:_0xbcb131['sells'],'buys':_0x5d04f9[_0x432efe(0x1ef)]==_0x432efe(0x240)?_0xbcb131[_0x432efe(0x1a5)]+0x1:_0xbcb131[_0x432efe(0x1a5)]};dbCoinResults[_0x432efe(0x2ce)](_0x432efe(0x1ff))[_0x432efe(0x18d)]({'coin':_0x5d04f9[_0x432efe(0x1a6)]})['assign'](_0x53b65f)[_0x432efe(0x2e0)]();if(!_0x5355bc){if(_0x5d04f9[_0x432efe(0x264)]&&_0x5d04f9[_0x432efe(0x264)]['currency']==_0x432efe(0x1a9)){const _0x223b5d=currentCoins[_0x432efe(0x18d)](_0x4d016c=>_0x4d016c['coin']=='BNB');if(_0x223b5d){let _0x4a203b=dbCoinResults[_0x432efe(0x2ce)](_0x432efe(0x1ff))[_0x432efe(0x18d)]({'coin':_0x432efe(0x1a9)})[_0x432efe(0x297)]();_0x53b65f={..._0x4a203b,'number':_0x223b5d[_0x432efe(0x22f)]},dbCoinResults['get'](_0x432efe(0x1ff))[_0x432efe(0x18d)]({'coin':_0x432efe(0x1a9)})[_0x432efe(0x257)](_0x53b65f)['write']();}}}}function _0x3ee9(_0x30b13f,_0x4eeacb){const _0x536686=_0x1f12();return _0x3ee9=function(_0x5f03c3,_0x27e8ed){_0x5f03c3=_0x5f03c3-0x17d;let _0x1f124b=_0x536686[_0x5f03c3];return _0x1f124b;},_0x3ee9(_0x30b13f,_0x4eeacb);}async function placeOrder(_0x43a1e5){const _0xbcc353=_0x2dd61a,_0x132958=config[_0xbcc353(0x2e1)]==_0xbcc353(0x2cb)?_0xbcc353(0x2cb):_0xbcc353(0x18a);if(lockOrders==ORDERS[_0xbcc353(0x2a1)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0xbcc353(0x2ed);let _0x44f474=![];lastOrders=[];for(const _0x4cacf0 of _0x43a1e5){let _0x70ca7,_0x453db6,_0x1d030b,_0xfe4ccb,_0x3acb29,_0x4f45ec=_0x4cacf0[_0xbcc353(0x245)];try{const _0x332ecb=await exchange[_0xbcc353(0x198)](_0x4f45ec);_0x70ca7=_0x4cacf0[_0xbcc353(0x28f)]?0x1/_0x4cacf0[_0xbcc353(0x27f)]:_0x4cacf0[_0xbcc353(0x27f)],_0x453db6=_0x332ecb['bid'],_0x1d030b=_0x332ecb['ask'];_0x4cacf0['reverse']?(_0xfe4ccb=_0x4cacf0['side']==_0xbcc353(0x240)?_0xbcc353(0x25b):_0xbcc353(0x240),_0x3acb29=Math[_0xbcc353(0x180)](_0x4cacf0['trade'])/_0x70ca7):(_0xfe4ccb=_0x4cacf0[_0xbcc353(0x1ef)],_0x3acb29=Math[_0xbcc353(0x180)](_0x4cacf0['trade']));_0x132958==_0xbcc353(0x18a)&&(config[_0xbcc353(0x2e1)]==_0xbcc353(0x2e7)&&(_0x70ca7=_0xfe4ccb==_0xbcc353(0x240)?_0x453db6:_0x1d030b),config['ordertype']==_0xbcc353(0x2d3)&&(_0x70ca7=_0xfe4ccb=='buy'?_0x1d030b:_0x453db6));_0x3acb29=formatResult(_0x3acb29,0x8),_0x70ca7=formatResult(_0x70ca7,0x8);const _0x4c523a=_0xfe4ccb==_0xbcc353(0x25b)?config[_0xbcc353(0x1df)]?String[_0xbcc353(0x2c0)]('0x'+config[_0xbcc353(0x1df)])+'\x20':'':config['emojibuy']?String[_0xbcc353(0x2c0)]('0x'+config[_0xbcc353(0x22e)])+'\x20':'',_0x5da585=_0x132958==_0xbcc353(0x2cb)?_0xbcc353(0x26f):config[_0xbcc353(0x2e1)]==_0xbcc353(0x2e7)?'Limit\x20(high-margin)':_0xbcc353(0x234),_0x591e2f=(Math[_0xbcc353(0x1ee)](Math[_0xbcc353(0x28e)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0xbcc353(0x20b)]({'customId':_0x591e2f,'symbol':_0x4f45ec,'coin':_0x4cacf0[_0xbcc353(0x1a6)],'amount':_0x3acb29,'price':_0x70ca7,'side':_0xfe4ccb,'reverse':_0x4cacf0['reverse'],'filled':0x0});if(_0x132958==_0xbcc353(0x2cb))logHistory(_0xbcc353(0x19b),''+_0x4c523a+_0x5da585+_0xbcc353(0x1fc)+_0x4f45ec+'\x20'+_0xfe4ccb+'\x20#'+formatResult(_0x3acb29,0x8)+'\x20@'+formatResult(_0x70ca7,0x8));else logHistory(_0xbcc353(0x19b),''+_0x4c523a+_0x5da585+'\x20order:\x20'+_0x4f45ec+'\x20'+_0xfe4ccb+'\x20#'+formatResult(_0x3acb29,0x8)+'\x20@'+formatResult(_0x70ca7,0x8));const _0x17e903=await exchange[_0xbcc353(0x2a0)](_0x4f45ec,_0x132958,_0xfe4ccb,_0x3acb29,_0x70ca7);logger[_0xbcc353(0x2c8)](_0xbcc353(0x27a)+_0x17e903['id']+'\x20|\x20Custom\x20ID:\x20'+_0x591e2f);const _0x3b4b7a=lastOrders[_0xbcc353(0x1ec)]-0x1;if(_0x3b4b7a>=0x0&&lastOrders[_0x3b4b7a][_0xbcc353(0x1d3)]==_0x591e2f){lastOrders[_0x3b4b7a][_0xbcc353(0x20a)]=_0x17e903['id'];if(_0x17e903['amount'])lastOrders[_0x3b4b7a][_0xbcc353(0x1c6)]=_0x17e903['amount'];if(_0x17e903['price'])lastOrders[_0x3b4b7a][_0xbcc353(0x199)]=_0x17e903[_0xbcc353(0x199)];lastOrders[_0x3b4b7a][_0xbcc353(0x264)]=_0x17e903[_0xbcc353(0x264)];}if(config[_0xbcc353(0x248)]!=0x0){let _0x25a48d=null;if(cooldownTracker[_0xbcc353(0x1ec)]==config[_0xbcc353(0x248)]-0x1)_0x25a48d=cooldownTracker[_0xbcc353(0x27d)]();const _0x55caf6=getTimeStamp();cooldownTracker['push'](_0x55caf6);if(_0x25a48d){const _0x939a88=fns[_0xbcc353(0x182)](new Date(_0x55caf6),new Date(_0x25a48d));if(_0x939a88<cooldownInterval){logHistory(_0xbcc353(0x205),_0xbcc353(0x24c)+config[_0xbcc353(0x248)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xbcc353(0x1e8)),coolingDown=!![];break;}}}}catch(_0x323267){if(_0x323267['toString']()[_0xbcc353(0x19a)](_0xbcc353(0x226)))lastOrders=lastOrders['filter'](_0x3466ed=>_0x3466ed[_0xbcc353(0x245)]!=_0x4f45ec),logHistory('error',_0xbcc353(0x28b)+_0x4f45ec),_0x44f474=!![];else{if(_0x323267[_0xbcc353(0x29a)]()[_0xbcc353(0x19a)](_0xbcc353(0x2ae)))lastOrders=lastOrders[_0xbcc353(0x1dd)](_0x1d69aa=>_0x1d69aa[_0xbcc353(0x245)]!=_0x4f45ec),logHistory(_0xbcc353(0x205),'Order\x20amount\x20is\x20invalid:\x20'+_0x4f45ec),_0x44f474=!![];else{if(_0x323267[_0xbcc353(0x29a)]()['includes'](_0xbcc353(0x2d2)))lastOrders=lastOrders[_0xbcc353(0x1dd)](_0x4e527d=>_0x4e527d['symbol']!=_0x4f45ec),logHistory(_0xbcc353(0x205),_0xbcc353(0x275)+_0x4f45ec),_0x44f474=!![];else _0x323267[_0xbcc353(0x29a)]()[_0xbcc353(0x19a)](_0xbcc353(0x1bf))?(lastOrders=lastOrders[_0xbcc353(0x1dd)](_0x2a8990=>_0x2a8990[_0xbcc353(0x245)]!=_0x4f45ec),logHistory('error',_0xbcc353(0x28b)+_0x4f45ec),_0x44f474=!![]):(lastOrders=lastOrders[_0xbcc353(0x1dd)](_0x121fd4=>_0x121fd4['symbol']!=_0x4f45ec),await handleError(_0x323267,'placeOrder()',_0x4f45ec));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xbcc353(0x1ec)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x20b61d=config[_0xbcc353(0x2e1)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xbcc353(0x21d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x20b61d);}else unlockOrders();_0x44f474&&config['headless']&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xbcc353(0x235),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0xbcc353(0x1cf)]&&logHistory('error',_0xbcc353(0x1d9));else lockOrders!=ORDERS[_0xbcc353(0x2a1)]&&(!config[_0xbcc353(0x1cf)]&&(config[_0xbcc353(0x2e1)]=='market'?logHistory(_0xbcc353(0x205),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0xbcc353(0x205),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x5531c0){const _0x248e28=_0x2dd61a,_0x28dbef={...config,'openOrders':_0x5531c0};let _0x474b83=dbConfig[_0x248e28(0x2ce)](_0x248e28(0x238))[_0x248e28(0x18d)]({'botID':botID})[_0x248e28(0x297)]();_0x474b83&&dbConfig[_0x248e28(0x2ce)](_0x248e28(0x238))['find']({'botID':botID})['assign'](_0x28dbef)[_0x248e28(0x2e0)]();}function restoreOrders(){const _0x4cb926=_0x2dd61a;let _0x295daf;config[_0x4cb926(0x2b9)]&&allOpenOrders[_0x4cb926(0x280)](_0x59644e=>{const _0x10942d=_0x4cb926,_0x4e45ef=config['openOrders']['find'](_0x25864c=>_0x25864c[_0x10942d(0x20a)]==_0x59644e['id']);_0x4e45ef&&(lastOrders[_0x10942d(0x20b)](_0x4e45ef),_0x295daf=_0x59644e[_0x10942d(0x237)]);});if(lastOrders[_0x4cb926(0x1ec)]>0x0){lockOrders=ORDERS[_0x4cb926(0x294)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5a64ad=new Date()[_0x4cb926(0x18e)](),_0x139197=config['ordertype']==_0x4cb926(0x2cb)?validateOrderTimeout*0x3c*0x3e8:config[_0x4cb926(0x21d)]*0x3c*0x3e8;if(_0x295daf+_0x139197>_0x5a64ad){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xfc8bb4=_0x4cb926;validateOrders(_0xfc8bb4(0x246));},_0x295daf+_0x139197-_0x5a64ad);}else validateOrders(_0x4cb926(0x246));}}async function sendMetricsTelegram(){const _0x52fc27=_0x2dd61a;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x23e62c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x14991d='';if(config['showname'])_0x14991d='<b>'+config[_0x52fc27(0x1b6)]+_0x52fc27(0x23e);else _0x14991d='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x127337=getKPIs('basecoin'),_0x17fb06=getKPIs(_0x52fc27(0x296),config[_0x52fc27(0x296)]),_0x1d1365=getKPIs(_0x52fc27(0x2c5)),_0x2f1517=getKPIs(_0x52fc27(0x268),config[_0x52fc27(0x296)]);_0x14991d+=_0x52fc27(0x1c4),_0x14991d+=_0x127337[_0x52fc27(0x231)]+'\x20:\x20'+_0x127337['value']+'\x0a',_0x14991d+=_0x127337[_0x52fc27(0x23a)]+':\x20'+_0x127337['change']+'%\x0a',_0x14991d+=_0x17fb06['leftTxt']+_0x52fc27(0x276)+_0x17fb06[_0x52fc27(0x297)]+'\x0a',_0x14991d+=_0x17fb06['rightTxt']+':\x20'+_0x17fb06[_0x52fc27(0x288)]+'%\x0a',_0x14991d+=_0x1d1365['leftTxt']+':\x20'+_0x1d1365[_0x52fc27(0x297)]+'\x20('+config[_0x52fc27(0x2ab)]+')\x0a',_0x14991d+=_0x1d1365[_0x52fc27(0x23a)]+':\x20'+_0x1d1365[_0x52fc27(0x288)]+_0x52fc27(0x26a)+config[_0x52fc27(0x2ab)]+')\x0a',_0x14991d+=_0x2f1517['leftTxt']+':\x20'+_0x2f1517[_0x52fc27(0x297)]+'\x20('+config[_0x52fc27(0x296)]+')\x0a',_0x14991d+=_0x2f1517['rightTxt']+':\x20'+_0x2f1517['change']+'%\x20('+config[_0x52fc27(0x296)]+')\x0a',_0x14991d+=_0x52fc27(0x24d),process[_0x52fc27(0x2a7)]({'telegrammsg':_0x14991d},_0x3593a9=>{});}async function sendPortfolioTelegram(){const _0x1567cb=_0x2dd61a;if(!coinsLoaded){process[_0x1567cb(0x2a7)]({'telegrammsg':_0x1567cb(0x2f8)},_0xebad8b=>{});return;}let _0x3d474f='';if(config['showname'])_0x3d474f='<b>'+config['botname']+_0x1567cb(0x282);else _0x3d474f='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x3d474f+=_0x1567cb(0x1c4),_0x3d474f+=_0x1567cb(0x22a),_0x3d474f+=_0x1567cb(0x247),_0x3d474f+=_0x1567cb(0x22a),currentCoins[_0x1567cb(0x280)](_0x5ed6c3=>{const _0x3436cd=_0x1567cb;_0x3d474f+=_0x5ed6c3[_0x3436cd(0x1a6)][_0x3436cd(0x267)](0x7)+'|\x20'+formatPad(_0x5ed6c3[_0x3436cd(0x1cd)],0x2,0x6)+'|\x20'+formatPad(_0x5ed6c3['target'],0x2,0x6)+'|\x20'+formatPad(_0x5ed6c3[_0x3436cd(0x24f)]*0x64,0x2,0x6)+'\x0a';}),_0x3d474f+=_0x1567cb(0x24d),process[_0x1567cb(0x2a7)]({'telegrammsg':_0x3d474f},_0x5bb249=>{});}function formatPad(_0x583405,_0x100cdc,_0x4d82f7){const _0x5bfe8c=_0x2dd61a,_0x435665=formatResultString(_0x583405,_0x100cdc);return _0x435665?_0x435665['padStart'](_0x4d82f7):''[_0x5bfe8c(0x1e0)](_0x4d82f7);}function logHistory(_0x3404f0,_0x4997bb,_0x2935d3=''){const _0x187dc0=_0x2dd61a;let _0x22c8f9={'time':getTimeStamp(),'type':_0x3404f0,'event':_0x4997bb};dbLogs[_0x187dc0(0x2ce)](_0x187dc0(0x26d))[_0x187dc0(0x20b)](_0x22c8f9)['write']();if(_0x2935d3=='')_0x2935d3=_0x4997bb;proxyEmit('event',{'log':_0x22c8f9,'summary':_0x2935d3}),process[_0x187dc0(0x2a7)]({'telegram':{..._0x22c8f9,'botname':config[_0x187dc0(0x1b6)],'showname':config[_0x187dc0(0x255)]}},_0x4c5c2=>{}),logger[_0x187dc0(0x29e)](''+_0x22c8f9[_0x187dc0(0x203)]);}function emitHistory(_0x84f21b={}){const _0x112508=_0x2dd61a;Object['keys'](_0x84f21b)[_0x112508(0x1ec)]==0x0&&(_0x84f21b={'type':[_0x112508(0x19b),_0x112508(0x203)],'event':'','page':0x1});if(_0x84f21b['type'][_0x112508(0x19a)]('event'))_0x84f21b[_0x112508(0x2d4)][_0x112508(0x1e3)](_0x84f21b[_0x112508(0x2d4)][_0x112508(0x277)](_0x112508(0x203)),0x1,_0x112508(0x205),_0x112508(0x1ba),_0x112508(0x235));if(dbLogs[_0x112508(0x2dd)]('logs')[_0x112508(0x297)]()){let _0x4f7339=dbLogs[_0x112508(0x2ce)]('logs')[_0x112508(0x1dd)](_0x433634=>{const _0x3f1870=_0x112508;if(_0x84f21b['type']['length']==0x0)return![];else return _0x84f21b[_0x3f1870(0x2d4)]['includes'](_0x433634[_0x3f1870(0x2d4)]);})['filter'](_0x24adb8=>{const _0x2305f7=_0x112508;if(_0x84f21b[_0x2305f7(0x203)]=='')return!![];else return _0x24adb8['event']['toLowerCase']()[_0x2305f7(0x19a)](_0x84f21b['event'][_0x2305f7(0x1d0)]());})['sortBy']('time'),_0x41d84b=_0x4f7339[_0x112508(0x297)]()[_0x112508(0x1ec)];_0x4f7339=_0x4f7339[_0x112508(0x28f)]()[_0x112508(0x260)]((_0x84f21b[_0x112508(0x299)]-0x1)*logPageSize,_0x84f21b[_0x112508(0x299)]*logPageSize-0x1)[_0x112508(0x28f)]()[_0x112508(0x297)](),proxyEmit(_0x112508(0x26e),{'logs':_0x4f7339,'total':_0x41d84b});}else proxyEmit(_0x112508(0x26e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x150b58){const _0x570614=_0x2dd61a;if(dbLogs[_0x570614(0x2dd)](_0x570614(0x26d))[_0x570614(0x297)]()){const _0x133cbf=dbLogs[_0x570614(0x2ce)](_0x570614(0x26d))[_0x570614(0x2bb)](_0x570614(0x281))[_0x570614(0x1dd)](_0x46a351=>{const _0x1cd35a=_0x570614;return _0x46a351['type']==_0x1cd35a(0x19b);})[_0x570614(0x297)]();dbLogs[_0x570614(0x2ce)](_0x570614(0x26d))[_0x570614(0x208)]()['write'](),dbLogs['get'](_0x570614(0x26d))['assign'](_0x133cbf)[_0x570614(0x2e0)](),emitHistory(_0x150b58);}}async function pauseBot(_0x7da2f0=''){const _0x3945fb=_0x2dd61a,_0x143c4e=new Date()[_0x3945fb(0x18e)]();if(!lastErrorShown||_0x143c4e-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x143c4e;!lastBotPause?(lastBotPause=_0x143c4e,consecutivePauses=0x1):(_0x143c4e-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3945fb(0x2a7)]({'stop':_0x3945fb(0x2d1)},_0x4caefe=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3945fb(0x18e)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x7da2f0)_0x7da2f0+='\x20|\x20';logHistory(_0x3945fb(0x205),_0x7da2f0+_0x3945fb(0x2f0)+pauseBotInterval/0xea60+_0x3945fb(0x1d2)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){process['send']({'stop':'kill'},_0x57272a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2834d2,_0x243545){const _0x32b5ee=_0x2dd61a;if(_0x2834d2[_0x32b5ee(0x29a)]()[_0x32b5ee(0x19a)](_0x32b5ee(0x2a3)))return logHistory(_0x32b5ee(0x205),config[_0x32b5ee(0x291)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x2834d2['toString']()[_0x32b5ee(0x19a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x32b5ee(0x205),config[_0x32b5ee(0x291)]+_0x32b5ee(0x181)),![];else{if(_0x2834d2['toString']()['includes']('AuthenticationError'))return logHistory(_0x32b5ee(0x205),config['exchange']+_0x32b5ee(0x2b6)),logHistory(_0x32b5ee(0x205),_0x32b5ee(0x2e3)),![];else await handleError(_0x2834d2,_0x243545);}}}async function handleError(_0x4176dd,_0x1f565e,_0x45caeb=''){const _0x2a47d3=_0x2dd61a,_0x2c5600=config[_0x2a47d3(0x291)]||_0x2a47d3(0x256);if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)]('DDoSProtection')||_0x4176dd[_0x2a47d3(0x29a)]()['includes']('RateLimitExceeded'))await pauseBot(config[_0x2a47d3(0x291)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)](_0x2a47d3(0x221))||_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)](_0x2a47d3(0x1b4)))await pauseBot(config[_0x2a47d3(0x291)]+_0x2a47d3(0x225));else{if(_0x4176dd[_0x2a47d3(0x29a)]()['includes']('RequestTimeout'))await pauseBot(config[_0x2a47d3(0x291)]+_0x2a47d3(0x186));else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)](_0x2a47d3(0x1bc)))await pauseBot(config[_0x2a47d3(0x291)]+_0x2a47d3(0x2ea));else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x2a47d3(0x205),_0x1f565e+_0x2a47d3(0x230)),logHistory(_0x2a47d3(0x205),_0x2a47d3(0x2ad)),await killBot();else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)]('InvalidNonce'))logHistory(_0x2a47d3(0x205),_0x1f565e+_0x2a47d3(0x29f)),logHistory(_0x2a47d3(0x205),_0x2a47d3(0x2ad)),await killBot();else{if(_0x4176dd instanceof ccxt[_0x2a47d3(0x1f8)])logger[_0x2a47d3(0x2c8)]('Uncaught\x20NetworkError:',_0x4176dd),await pauseBot(config['exchange']+_0x2a47d3(0x217));else{if(_0x4176dd['toString']()['includes'](_0x2a47d3(0x2a3)))logHistory(_0x2a47d3(0x205),_0x1f565e+'\x20|\x20'+config[_0x2a47d3(0x291)]+_0x2a47d3(0x183)),logHistory('error',_0x2a47d3(0x2ad)),await killBot();else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x2a47d3(0x205),_0x1f565e+_0x2a47d3(0x22b)+config[_0x2a47d3(0x291)]+'\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)](_0x2a47d3(0x259)))logHistory('error',_0x1f565e+_0x2a47d3(0x22b)+config[_0x2a47d3(0x291)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2a47d3(0x205),_0x2a47d3(0x2ad)),await killBot();else{if(_0x4176dd[_0x2a47d3(0x29a)]()[_0x2a47d3(0x19a)]('InsufficientFunds'))logHistory(_0x2a47d3(0x205),_0x1f565e+_0x2a47d3(0x1ce)+_0x45caeb);else _0x4176dd instanceof ccxt[_0x2a47d3(0x2d5)]?(logger[_0x2a47d3(0x2c8)](_0x2a47d3(0x2c3),_0x4176dd),logHistory(_0x2a47d3(0x205),_0x1f565e+_0x2a47d3(0x22b)+config[_0x2a47d3(0x291)]+_0x2a47d3(0x1da))):(logger[_0x2a47d3(0x29e)](_0x1f565e+_0x2a47d3(0x29d),_0x4176dd),await pauseBot(_0x2a47d3(0x204)));}}}}}}}}}}}function formatResult(_0x4bc966,_0x585a1a){const _0xb1a204=_0x2dd61a;return parseFloat(_0x4bc966[_0xb1a204(0x1b3)](_0x585a1a));}function formatResultTruncate(_0x369fda,_0x506ec6){let _0x1bd407=formatResultString(_0x369fda,0xa),_0x19be0b=_0x1bd407['indexOf']('.');return _0x19be0b!=-0x1&&(_0x1bd407=_0x1bd407['slice'](0x0,_0x19be0b+_0x506ec6+0x1)),Number(_0x1bd407);}function formatResultString(_0x541a7f,_0x564e6c){const _0x4790f3=_0x2dd61a;let _0xffcc6a;if(!(''+_0x541a7f)[_0x4790f3(0x19a)]('e'))_0xffcc6a=+(Math['round'](_0x541a7f+'e+'+_0x564e6c)+'e-'+_0x564e6c);else{let _0xb5a5ac=(''+_0x541a7f)[_0x4790f3(0x223)]('e'),_0x415de2='';+_0xb5a5ac[0x1]+_0x564e6c>0x0&&(_0x415de2='+'),_0xffcc6a=+(Math['round'](+_0xb5a5ac[0x0]+'e'+_0x415de2+(+_0xb5a5ac[0x1]+_0x564e6c))+'e-'+_0x564e6c);}return Number(_0xffcc6a)[_0x4790f3(0x1b3)](_0x564e6c);}function getServerTime(){const _0x430d22=_0x2dd61a,_0x58decc=new Date();return _0x58decc['getFullYear']()+'/'+(_0x58decc[_0x430d22(0x224)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x58decc[_0x430d22(0x1b7)]()[_0x430d22(0x29a)]()[_0x430d22(0x1e0)](0x2,'0')+'\x20'+_0x58decc['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x58decc[_0x430d22(0x25e)]()[_0x430d22(0x29a)]()['padStart'](0x2,'0')+':'+_0x58decc[_0x430d22(0x1c9)]()[_0x430d22(0x29a)]()[_0x430d22(0x1e0)](0x2,'0');}function getTimeStamp(){const _0x467a1f=_0x2dd61a,_0x16976d=shiftedTime();return _0x16976d[_0x467a1f(0x1a3)]()+'/'+(_0x16976d[_0x467a1f(0x224)]()+0x1)['toString']()[_0x467a1f(0x1e0)](0x2,'0')+'/'+_0x16976d[_0x467a1f(0x1b7)]()['toString']()[_0x467a1f(0x1e0)](0x2,'0')+'\x20'+_0x16976d[_0x467a1f(0x1c7)]()[_0x467a1f(0x29a)]()[_0x467a1f(0x1e0)](0x2,'0')+':'+_0x16976d[_0x467a1f(0x25e)]()[_0x467a1f(0x29a)]()[_0x467a1f(0x1e0)](0x2,'0')+':'+_0x16976d[_0x467a1f(0x1c9)]()[_0x467a1f(0x29a)]()[_0x467a1f(0x1e0)](0x2,'0');}function getDate(){const _0x270ff6=_0x2dd61a,_0x5431ab=shiftedTime();return _0x5431ab[_0x270ff6(0x1a3)]()+'/'+(_0x5431ab[_0x270ff6(0x224)]()+0x1)[_0x270ff6(0x29a)]()['padStart'](0x2,'0')+'/'+_0x5431ab[_0x270ff6(0x1b7)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x4cf488=_0x2dd61a,_0x31442f=shiftedTime();return _0x31442f['getHours']()['toString']()[_0x4cf488(0x1e0)](0x2,'0');}function sleep(_0x81bffe){return new Promise(_0x18896f=>setTimeout(_0x18896f,_0x81bffe));}function shiftedTime(){const _0x5424d5=_0x2dd61a,_0x56508a=new Date();let _0x1c1ef6=_0x56508a;if(config&&config['timeshift']!==0x0)_0x1c1ef6=fns[_0x5424d5(0x2d9)](_0x56508a,{'hours':config['timeshift']});return _0x1c1ef6;}function timer(_0x52b1a6){const _0x59808b=_0x2dd61a,_0x4395be=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x52b1a6,_0x4395be):console[_0x59808b(0x2db)](getTimeStamp()+_0x59808b(0x1e7),_0x52b1a6,(_0x4395be-lasttime)/0x3e8),lasttime=_0x4395be;}