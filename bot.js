const _0x11e5b5=_0x3b48;(function(_0x3564c0,_0x16934a){const _0xd2a289=_0x3b48,_0x4788bd=_0x3564c0();while(!![]){try{const _0x3021f8=parseInt(_0xd2a289(0x18d))/0x1*(parseInt(_0xd2a289(0x27b))/0x2)+-parseInt(_0xd2a289(0x168))/0x3+parseInt(_0xd2a289(0x175))/0x4*(parseInt(_0xd2a289(0x142))/0x5)+parseInt(_0xd2a289(0x199))/0x6+parseInt(_0xd2a289(0x15d))/0x7+-parseInt(_0xd2a289(0x1f7))/0x8*(parseInt(_0xd2a289(0x20e))/0x9)+parseInt(_0xd2a289(0x1e7))/0xa*(-parseInt(_0xd2a289(0x211))/0xb);if(_0x3021f8===_0x16934a)break;else _0x4788bd['push'](_0x4788bd['shift']());}catch(_0x1c4733){_0x4788bd['push'](_0x4788bd['shift']());}}}(_0x1a4a,0xc37b2));const _0x36ee2e=function(){let _0x41159e=!![];return function(_0x3cae61,_0x41509b){const _0x84dd5a=_0x41159e?function(){const _0x2965d0=_0x3b48;if(_0x41509b){const _0x428dc6=_0x41509b[_0x2965d0(0x146)](_0x3cae61,arguments);return _0x41509b=null,_0x428dc6;}}:function(){};return _0x41159e=![],_0x84dd5a;};}(),_0x232d15=_0x36ee2e(this,function(){const _0x13b7f4=_0x3b48;return _0x232d15[_0x13b7f4(0x149)]()[_0x13b7f4(0x1fc)](_0x13b7f4(0x130))['toString']()['constructor'](_0x232d15)[_0x13b7f4(0x1fc)](_0x13b7f4(0x130));});_0x232d15();'use strict';const ccxt=require(_0x11e5b5(0x1f4))[_0x11e5b5(0x203)],low=require(_0x11e5b5(0x19a)),FileSync=require(_0x11e5b5(0x25c)),fs=require('fs'),fns=require(_0x11e5b5(0x1ef)),Crypt=require(_0x11e5b5(0x273))[_0x11e5b5(0x253)],util=require(_0x11e5b5(0x1a6)),argv=require(_0x11e5b5(0x20b))(process[_0x11e5b5(0x1c8)][_0x11e5b5(0x222)](0x2))[_0x11e5b5(0x1c8)],path=require(_0x11e5b5(0x152));let exchange;global['ticker']={},global['change']={};const usdBasecoins=['USD','BUSD','TUSD','USDT',_0x11e5b5(0x19e),_0x11e5b5(0x1c0)],exceptions={'binance':[_0x11e5b5(0x1fa),'HOT/BTC',_0x11e5b5(0x162),'NANO/','YOYOW/']},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x11e5b5(0x228)],botID=process[_0x11e5b5(0x1c8)][0x2]||_0x11e5b5(0x283),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x11e5b5(0x16e)](_0x11e5b5(0x138)+botID+_0x11e5b5(0x20c)),killBot());const userID=process[_0x11e5b5(0x1c8)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x11e5b5(0x1b0),logspath=userID?_0x11e5b5(0x278)+userID+'/':_0x11e5b5(0x278),loggerfile=fs[_0x11e5b5(0x234)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x11e5b5(0x2a7)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x11e5b5(0x1a0)](logspath);const configfile=configpath+_0x11e5b5(0x2a9)+botID+_0x11e5b5(0x2b9),logfile=configpath+_0x11e5b5(0x2a9)+botID+_0x11e5b5(0x164),performancefile=configpath+_0x11e5b5(0x2a9)+botID+_0x11e5b5(0x242),coinresultsfile=configpath+'bot-'+botID+_0x11e5b5(0x169),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x11e5b5(0x14a),configbackuppath=configpath+_0x11e5b5(0x2c4),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x11e5b5(0x261)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x11e5b5(0x277)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x11e5b5(0x261)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x11e5b5(0x227),'rsaStandard':_0x11e5b5(0x163)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x546245=>{console['log'](_0x546245);},'simple':_0xa795a1=>{const _0xa7d0dd=_0x11e5b5;console[_0xa7d0dd(0x16e)](_0xa795a1),loggerfile[_0xa7d0dd(0x277)](util['format'](_0xa795a1)+'\x0a');},'full':async(_0x3aaa85,_0x5f260d='')=>{const _0x334e20=_0x11e5b5;let _0x445c1b;if(config['showname'])_0x445c1b=getTimeStamp()+':\x20'+config[_0x334e20(0x1ec)]+'\x20>\x20'+_0x3aaa85;else _0x445c1b=getTimeStamp()+_0x334e20(0x1cc)+botID+_0x334e20(0x2b0)+_0x3aaa85;console['log'](_0x445c1b),loggerfile['write'](util[_0x334e20(0x281)](_0x445c1b)+'\x0a'),_0x5f260d&&(console[_0x334e20(0x16e)](_0x5f260d),loggerfile[_0x334e20(0x277)](util[_0x334e20(0x281)](_0x5f260d)+'\x0a'));},'debug':async(_0x510a18,_0x519a7f='')=>{const _0x59eb5b=_0x11e5b5;let _0x46aa79;if(config[_0x59eb5b(0x167)])_0x46aa79=getTimeStamp()+':\x20'+config[_0x59eb5b(0x1ec)]+_0x59eb5b(0x14d)+_0x510a18;else _0x46aa79=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x510a18;if(debugging)console[_0x59eb5b(0x16e)](_0x46aa79);loggerfile[_0x59eb5b(0x277)](util[_0x59eb5b(0x281)](_0x46aa79)+'\x0a');if(_0x519a7f){if(debugging)console[_0x59eb5b(0x16e)](_0x519a7f);loggerfile[_0x59eb5b(0x277)](util[_0x59eb5b(0x281)](_0x519a7f)+'\x0a');}}};process['on'](_0x11e5b5(0x17b),function(_0x2c3056){const _0x5828d8=_0x11e5b5;logger[_0x5828d8(0x1eb)](_0x5828d8(0x27f),_0x2c3056);});settings[_0x11e5b5(0x256)]!=config[_0x11e5b5(0x256)]&&updateTimeshift(settings[_0x11e5b5(0x256)]);settings[_0x11e5b5(0x276)]!=config[_0x11e5b5(0x276)]&&updateOnepagemode(settings[_0x11e5b5(0x276)]);process['send']({'started':_0x11e5b5(0x238)},_0x65c8b1=>{}),initializeProcessListeners();function proxyEmit(_0xb2de45,_0x15f5f7=null){const _0x46ad91=_0x11e5b5;process[_0x46ad91(0x17a)]({'function':_0xb2de45,'args':_0x15f5f7},_0x5b85b4=>{});}function initializeProcessListeners(){const _0x296fda=_0x11e5b5;process['on'](_0x296fda(0x140),_0xba83fd=>{const _0x240d6f=_0x296fda;switch(Object[_0x240d6f(0x20f)](_0xba83fd)[0x0]){case _0x240d6f(0x256):_0xba83fd['timeshift']!=undefined&&(settings[_0x240d6f(0x256)]=_0xba83fd[_0x240d6f(0x256)],updateTimeshift(settings[_0x240d6f(0x256)]));break;case'onepagemode':_0xba83fd[_0x240d6f(0x276)]!=undefined&&(settings[_0x240d6f(0x276)]=_0xba83fd['onepagemode'],updateOnepagemode(settings[_0x240d6f(0x276)]));break;case _0x240d6f(0x247):_0xba83fd[_0x240d6f(0x247)]!=undefined&&(bots=JSON[_0x240d6f(0x1e0)](_0xba83fd[_0x240d6f(0x247)]),proxyEmit(_0x240d6f(0x247),bots));break;case _0x240d6f(0x19f):switch(_0xba83fd['function']){case _0x240d6f(0x23b):initclient();break;case _0x240d6f(0x188):toggleBotMode();break;case _0x240d6f(0x262):emitHistory(_0xba83fd[_0x240d6f(0x284)]);break;case _0x240d6f(0x2bd):deleteHistoryAlerts(_0xba83fd[_0x240d6f(0x284)]);break;case _0x240d6f(0x233):getPortfolio(_0xba83fd[_0x240d6f(0x284)]);break;case'storeConfiguration':storeConfiguration(_0xba83fd[_0x240d6f(0x284)]);break;case _0x240d6f(0x1d9):storeHeadless(_0xba83fd['args']);break;case _0x240d6f(0x1d0):storeFiat(_0xba83fd[_0x240d6f(0x284)]);break;case _0x240d6f(0x23c):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x240d6f(0x298):placeOrder(_0xba83fd[_0x240d6f(0x284)]);break;case _0x240d6f(0x1c1):cancelLoading();break;case _0x240d6f(0x258):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x12169b=null,_0x5254df=![]){const _0x122624=_0x11e5b5;logger[_0x122624(0x1eb)]('Reset\x20|\x20'+(_0x12169b&&_0x12169b['length']>0x0?_0x122624(0x1e3)+_0x12169b[_0x122624(0x1b6)](','):'no\x20additional\x20symbols')+_0x122624(0x1bb)+(_0x5254df?_0x122624(0x171):_0x122624(0x141))+'\x20|\x20Exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x5254df)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x122624(0x286)]!='***'){if(_0x5254df){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3feb47){handleErrorNoStop(_0x3feb47,_0x122624(0x1ea));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x12169b);const _0x52466e=await getCoins();[currentCoins,currentCoinsAll]=_0x52466e,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x122624(0x1e5)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x25de99=_0x11e5b5;exchangeStopped=!![],await exchange[_0x25de99(0x26c)]();}async function reloadExchange(){const _0x2d4c2f=_0x11e5b5;logger[_0x2d4c2f(0x1eb)](_0x2d4c2f(0x18f));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x2d4c2f(0x1eb)](_0x2d4c2f(0x1fe)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5d75d8=config['exchange'],_0x1162e9=config[_0x11e5b5(0x286)],_0x25ff43=config[_0x11e5b5(0x14f)],_0xb9f807=config[_0x11e5b5(0x282)]){const _0x4236a1=_0x11e5b5;exchange&&await stopExchange();!supportedExchanges()[_0x4236a1(0x1af)](_0x5d75d8)&&(logHistory(_0x4236a1(0x2bc),_0x4236a1(0x1e8)+_0x5d75d8+_0x4236a1(0x1cf)),killBot());const _0x54460e=ccxt[_0x5d75d8[_0x4236a1(0x190)]()];exchange=new _0x54460e({'apiKey':_0x1162e9,'secret':_0x25ff43,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x5d75d8==_0x4236a1(0x2a0)&&(exchange[_0x4236a1(0x2ba)]={'defaultType':_0x4236a1(0x24f)});if(_0xb9f807)exchange[_0x4236a1(0x134)]=_0xb9f807;}function setStableCoins(){const _0xca8ad9=_0x11e5b5;let _0x325e84=config[_0xca8ad9(0x251)]==_0xca8ad9(0x1d2)?_0xca8ad9(0x1d2):_0xca8ad9(0x209),_0x68aad4=!allSymbols[_0xca8ad9(0x1af)](_0x325e84+_0xca8ad9(0x21f))?_0xca8ad9(0x2bb):_0xca8ad9(0x268),_0x1af11c=!allSymbols['includes'](_0x325e84+_0xca8ad9(0x285))?_0x68aad4:_0xca8ad9(0x1a3);stablecoins={'eur':{'coin':''+_0x325e84+_0x1af11c,'symbol':_0x325e84+'/'+_0x1af11c},'usd':{'coin':''+_0x325e84+_0x68aad4,'symbol':_0x325e84+'/'+_0x68aad4}};}async function initwsCcxt(_0x50d556){const _0x3a0fe2=_0x11e5b5;_0x50d556==null&&(_0x50d556=[],config['portfolio'][_0x3a0fe2(0x25d)](_0x4196b3=>{const _0x1b7466=_0x3a0fe2;if(!_0x4196b3[_0x1b7466(0x1c6)]&&_0x4196b3['coin']!=config[_0x1b7466(0x251)])_0x50d556[_0x1b7466(0x22e)](_0x4196b3[_0x1b7466(0x201)]);}));if(!_0x50d556['includes'](stablecoins[_0x3a0fe2(0x22d)][_0x3a0fe2(0x201)]))_0x50d556[_0x3a0fe2(0x22e)](stablecoins[_0x3a0fe2(0x22d)][_0x3a0fe2(0x201)]);if(!_0x50d556[_0x3a0fe2(0x1af)](stablecoins[_0x3a0fe2(0x1dc)][_0x3a0fe2(0x201)]))_0x50d556['push'](stablecoins[_0x3a0fe2(0x1dc)][_0x3a0fe2(0x201)]);if(config[_0x3a0fe2(0x2a2)][_0x3a0fe2(0x22a)]('Binance')){if(!_0x50d556[_0x3a0fe2(0x1af)](_0x3a0fe2(0x26e)+config[_0x3a0fe2(0x251)]))_0x50d556[_0x3a0fe2(0x22e)](_0x3a0fe2(0x26e)+config[_0x3a0fe2(0x251)]);}loadCoins(_0x50d556);const _0x62ec9=async _0x4bd349=>{const _0x1bc311=_0x3a0fe2,_0x5c1d4e=await exchange[_0x1bc311(0x181)](_0x4bd349);global['ticker'][noslash(_0x5c1d4e[_0x1bc311(0x201)])]=_0x5c1d4e[_0x1bc311(0x154)];while(!![]){if(!botPaused)try{const _0x28fd21=await exchange[_0x1bc311(0x230)](_0x4bd349);global[_0x1bc311(0x18a)][noslash(_0x28fd21[0x0]['symbol'])]=_0x28fd21[0x0]['price'],await sleep(0x3e8);}catch(_0x43adf2){if(!exchangeStopped)await handleError(_0x43adf2,_0x1bc311(0x230),_0x4bd349);}else await sleep(0x64);}},_0x71cc55=async _0x645dd7=>{const _0x5733bd=_0x3a0fe2;while(!![]){if(!botPaused)try{const _0x369c0a=await exchange['fetchTicker'](_0x645dd7);global['change'][_0x369c0a[_0x5733bd(0x201)]]=_0x369c0a['percentage'],await sleep(0x3c*0x3e8);}catch(_0x48a824){if(!exchangeStopped)await handleError(_0x48a824,_0x5733bd(0x1f3),_0x645dd7);}else await sleep(0x64);}},_0x231c88=async()=>{const _0x266c88=_0x3a0fe2;while(!![]){if(!botPaused)try{const _0x143b78=await exchange[_0x266c88(0x2a3)]();_0x143b78['forEach'](_0x24cbbe=>{updateNumberCoinsCcxt(_0x24cbbe);});}catch(_0x290bfc){if(!exchangeStopped)await handleError(_0x290bfc,'watchOrders');}else await sleep(0x64);}};_0x50d556['forEach'](_0x34bb8d=>{_0x62ec9(_0x34bb8d),_0x71cc55(_0x34bb8d);}),!wsEventsSet&&(wsEventsSet=!![],_0x231c88(),watchTransactions());}async function watchTransactions(){const _0x53e3a8=_0x11e5b5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xc7ea12=await getCoins(),[_0x4360a0,_0x2879da]=_0xc7ea12;let _0x1d4ffd=[];currentCoins[_0x53e3a8(0x25d)](_0x35d9e2=>{const _0x1d0e97=_0x53e3a8,_0x41ea13=_0x4360a0[_0x1d0e97(0x135)](_0x24abb5=>_0x24abb5[_0x1d0e97(0x293)]==_0x35d9e2[_0x1d0e97(0x293)]);_0x41ea13&&(_0x35d9e2[_0x1d0e97(0x1a5)]!=_0x41ea13[_0x1d0e97(0x1a5)]&&_0x1d4ffd[_0x1d0e97(0x22e)]({'coin':_0x35d9e2[_0x1d0e97(0x293)],'symbol':_0x35d9e2[_0x1d0e97(0x201)],'number':Number(formatResult(_0x41ea13['number']-_0x35d9e2[_0x1d0e97(0x1a5)],0x8))}));});if(_0x1d4ffd[_0x53e3a8(0x1e5)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0x53e3a8(0x1fb)+lastFees[_0x53e3a8(0x26d)]+_0x53e3a8(0x24d)+lastFees[_0x53e3a8(0x20a)]);if(!lastFees[_0x53e3a8(0x26d)]||_0x1d4ffd[0x0]['coin']!=lastFees[_0x53e3a8(0x26d)]||_0x1d4ffd[0x0]['number']>lastFees[_0x53e3a8(0x20a)]){let _0x31d4ac;if(_0x1d4ffd[0x0][_0x53e3a8(0x293)]!=config['basecoin']){let _0x542d07=global['ticker'][noslash(_0x1d4ffd[0x0][_0x53e3a8(0x201)])];_0x31d4ac=_0x1d4ffd[0x0]['reverse']?0x1/_0x542d07:_0x542d07;}else _0x31d4ac=0x1;_0x1d4ffd[0x0][_0x53e3a8(0x24c)]=_0x31d4ac,delete _0x1d4ffd[0x0][_0x53e3a8(0x201)];let _0x428dbe=[],_0x358065=[...config[_0x53e3a8(0x204)]]||[],_0xeba38c=config[_0x53e3a8(0x204)];_0x358065[_0x53e3a8(0x1ca)]((_0x51ee35,_0x52ad86)=>_0x51ee35[_0x53e3a8(0x198)]>_0x52ad86['date']?-0x1:_0x52ad86['date']>_0x51ee35[_0x53e3a8(0x198)]?0x1:0x0);const _0x3021ca=getDate();if(_0x358065[0x0]){const _0x15fcf4=fns['parse'](_0x358065[0x0][_0x53e3a8(0x198)],_0x53e3a8(0x295),new Date()),_0x126494=fns['parse'](_0x3021ca,_0x53e3a8(0x295),new Date());if(fns[_0x53e3a8(0x244)](_0x15fcf4,_0x126494)){_0x428dbe=_0x358065[0x0][_0x53e3a8(0x28a)];const _0x367cc2=_0x428dbe[_0x53e3a8(0x135)](_0x3604f9=>_0x3604f9[_0x53e3a8(0x293)]==_0x1d4ffd[0x0][_0x53e3a8(0x293)]);_0x367cc2?(_0x367cc2[_0x53e3a8(0x1a5)]+=_0x1d4ffd[0x0][_0x53e3a8(0x1a5)],_0x367cc2[_0x53e3a8(0x1a5)]==0x0&&(_0x428dbe=_0x428dbe[_0x53e3a8(0x194)](_0x57db25=>{const _0x208138=_0x53e3a8;return _0x57db25[_0x208138(0x293)]!=_0x1d4ffd[0x0][_0x208138(0x293)];}))):_0x428dbe['push'](_0x1d4ffd[0x0]);const _0x36ecfc=_0xeba38c['find'](_0x2fa201=>_0x2fa201[_0x53e3a8(0x198)]==_0x3021ca);_0x36ecfc[_0x53e3a8(0x28a)]=_0x428dbe;}else _0xeba38c[_0x53e3a8(0x22e)]({'date':_0x3021ca,'changes':[_0x1d4ffd[0x0]]});}const _0x22d6e6=_0xeba38c[_0x53e3a8(0x135)](_0x2aad38=>_0x2aad38[_0x53e3a8(0x198)]==_0x3021ca);if(_0x22d6e6){let _0x57e784=!![];_0x22d6e6['changes'][_0x53e3a8(0x25d)](_0x28ecb8=>{if(_0x28ecb8['number']!=0x0)_0x57e784=![];}),_0x57e784&&(_0xeba38c=_0xeba38c['filter'](_0x33c727=>{return _0x33c727['date']!=_0x3021ca;}));}let _0x51964f=dbConfig['get'](_0x53e3a8(0x155))['find']({'botID':botID})[_0x53e3a8(0x28d)]();_0x51964f&&(dbConfig[_0x53e3a8(0x1bd)]('bot')['find']({'botID':botID})[_0x53e3a8(0x27c)]({'liquidity':_0xeba38c})['write'](),config[_0x53e3a8(0x204)]=_0xeba38c),logHistory('success',_0x53e3a8(0x1a9)+Math[_0x53e3a8(0x290)](_0x1d4ffd[0x0][_0x53e3a8(0x1a5)])+'\x20'+_0x1d4ffd[0x0]['coin']+'\x20'+(_0x1d4ffd[0x0]['number']>0x0?_0x53e3a8(0x2c0):_0x53e3a8(0x145))+_0x53e3a8(0x269)),proxyEmit(_0x53e3a8(0x179),emittedConfiguration());}else logger[_0x53e3a8(0x1eb)](_0x53e3a8(0x14e)+Math[_0x53e3a8(0x290)](_0x1d4ffd[0x0][_0x53e3a8(0x1a5)])+'\x20'+_0x1d4ffd[0x0]['coin']+'\x20'+(_0x1d4ffd[0x0]['number']>0x0?_0x53e3a8(0x2c0):_0x53e3a8(0x145)));transactionDetected=!![],currentCoins=_0x4360a0,currentCoinsAll=_0x2879da;}else logger[_0x53e3a8(0x1eb)](_0x53e3a8(0x1a9)+Math[_0x53e3a8(0x290)](_0x1d4ffd[0x0]['number'])+'\x20'+_0x1d4ffd[0x0][_0x53e3a8(0x293)]+'\x20'+(_0x1d4ffd[0x0][_0x53e3a8(0x1a5)]>0x0?_0x53e3a8(0x2c0):_0x53e3a8(0x145))+_0x53e3a8(0x2b1)),currentCoins=_0x4360a0,currentCoinsAll=_0x2879da;}await sleep(watchTransactionsInterval);}catch(_0x327a25){if(!exchangeStopped)await handleError(_0x327a25,_0x53e3a8(0x151));}else await sleep(0x64);}}async function loadSymbols(_0x35df62=config[_0x11e5b5(0x2a2)],_0x483b8c=![]){const _0x5a71f5=_0x11e5b5;if(allSymbols&&!_0x483b8c)return;try{markets=await exchange[_0x5a71f5(0x13e)](),allSymbols=exchange['symbols'][_0x5a71f5(0x194)](_0x4ca24c=>{const _0x3a30b9=_0x5a71f5;let _0x17c0db=![];const _0x2825cf=exceptions[_0x35df62['toLowerCase']()]||[];return _0x2825cf[_0x3a30b9(0x25d)](_0xe4836b=>{const _0x236f59=_0x3a30b9;if(_0x4ca24c[_0x236f59(0x1af)](_0xe4836b))_0x17c0db=!![];}),!_0x17c0db;});}catch(_0x4e51c9){throw _0x4e51c9;}}async function initclient(){const _0x5f3265=_0x11e5b5;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5f3265(0x2ad),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5f3265(0x14b),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x472ebc=getNormalizedPerformance();emitPerformance(_0x472ebc),getStartingBalances(_0x472ebc);}async function toggleBotMode(){const _0x3c37a2=_0x11e5b5;let _0x495c5=dbConfig[_0x3c37a2(0x1bd)](_0x3c37a2(0x155))['find']({'botID':botID})[_0x3c37a2(0x28d)]();if(_0x495c5){const _0x350092=!_0x495c5['headless'];dbConfig[_0x3c37a2(0x1bd)](_0x3c37a2(0x155))[_0x3c37a2(0x135)]({'botID':botID})[_0x3c37a2(0x27c)]({'headless':_0x350092})[_0x3c37a2(0x277)](),config['headless']=_0x350092,proxyEmit(_0x3c37a2(0x179),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x436f6c=_0x11e5b5;process[_0x436f6c(0x17a)]({'updatebotmanager':!![]},_0x4124ae=>{});}async function loadCoins(_0x4b0c4){const _0x48a7ae=_0x11e5b5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x787691,_0x143267=0x0,_0x5bc82f=0x0;_0x4b0c4['forEach'](_0x3dd324=>{const _0x2c3fe8=_0x3b48;loading[_0x2c3fe8(0x158)][_0x2c3fe8(0x22e)](_0x3dd324);}),loadingCanceled=![];let _0x5b40af=![];while(_0x787691!=_0x4b0c4[_0x48a7ae(0x1e5)]){_0x787691=0x0,_0x4b0c4[_0x48a7ae(0x25d)](_0x188fd7=>{const _0x22a2ec=_0x48a7ae;if(global[_0x22a2ec(0x18a)][noslash(_0x188fd7)]){loading[_0x22a2ec(0x158)]=loading[_0x22a2ec(0x158)]['filter'](_0x4c6d08=>_0x4c6d08!=_0x188fd7);if(!watchedSymbols[_0x22a2ec(0x1af)](_0x188fd7))watchedSymbols[_0x22a2ec(0x22e)](_0x188fd7);_0x787691++;}}),loading[_0x48a7ae(0x1f9)]=Math['round'](_0x787691/_0x4b0c4['length']*0x64);loading[_0x48a7ae(0x1f9)]!=0x64&&(_0x5bc82f>0x1e*0x5&&(loading[_0x48a7ae(0x23d)]=!![],emitLoadingProgress()),_0x5bc82f>0x78*0x5&&!_0x5b40af&&(loading[_0x48a7ae(0x2ae)]=!![],emitLoadingProgress(),_0x5b40af=!![],logHistory('error',_0x48a7ae(0x1f1)+loading[_0x48a7ae(0x158)][_0x48a7ae(0x1b6)](',\x20')+_0x48a7ae(0x272)),logHistory(_0x48a7ae(0x2bc),_0x48a7ae(0x15b)+loadCoinsRetryInterval/0xea60+_0x48a7ae(0x13b)),pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x17f89c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x787691!=_0x143267&&(_0x143267=_0x787691,emitLoadingProgress()),_0x5bc82f++,await sleep(0xc8);}_0x787691==_0x4b0c4['length']&&(coinsLoaded=!![],process[_0x48a7ae(0x17a)]({'status':_0x48a7ae(0x2ac),'live':_0x48a7ae(0x238)},_0x3a3735=>{}),_0x5b40af&&logHistory(_0x48a7ae(0x1b4),_0x48a7ae(0x1fd)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x234092=_0x11e5b5;proxyEmit(_0x234092(0x179),{...emittedConfiguration(),'configstate':'loading-canceled'});}function _0x1a4a(){const _0x28638f=['Failed\x20to\x20load\x20coin\x20data\x20for\x20','valid','fetchTickers','ccxt','market','set','506568rnYELp','\x20closed\x20the\x20connection','progress','DAI/','Fees\x20|\x20currency:\x20','search','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Executing\x20exchange\x20reload','total','ongoing','symbol','random','pro','liquidity','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','InvalidOrder','reverse','fiat','BTC','highest','yargs/yargs',',\x20must\x20be\x20a\x203\x20digit\x20number','Exchange','27OjUaUf','keys','balancing\x20resumed','11924zDhEeV','2.6.0','AuthenticationError','************','Limit\x20(low-margin)','toFixed','toUpperCase','Order\x20is\x20invalid:\x20','getPortfolio(0)','Bot\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','yyyy-MM-dd\x27T\x27HH:mm:ss','getSeconds','leftTxt','/USD','initial','Unfilled\x20order(s)\x20canceled\x20after\x20','slice','has','orderId','Order\x20amount\x20is\x20invalid:\x20','</pre>','sha256','version','padStart','startsWith','2\x20-\x20FILLED\x20known\x20order:\x20','sell','eur','push','privateKey','watchTrades','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','target','getPortfolio','createWriteStream','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getTime','getHours','running','startprice','2\x20-\x20FILLED\x20unknown\x20order:\x20','initclient','resetHistory','timeout','getCoins()','buys','shift','2.3.5','-performance.json','\x20API\x20secret\x20is\x20invalid','isEqual','<b>Bot\x20','\x20hour','bots','buy','exec','Resetting\x20coin\x20results:\x20','ordertype','price','\x20|\x20highest:\x20','status','spot','coins','basecoin','substring','Crypt','bid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','timeshift','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','showConfig','startnumber','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','side','lowdb/adapters/FileSync','forEach','starting-balance-','cost','sells','defaults','emitHistory','Unknown\x20error\x20occured','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','recent20','entries','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','USD','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','fee','Net\x20effect','close','currency','BNB/','InsufficientFunds','portfolio','\x20orders\x20in\x20less\x20than\x20','\x20-\x20bot\x20not\x20started','hybrid-crypto-js','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order(s)\x20not\x20validated\x20after\x20','onepagemode','write','./logs/','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20API\x20key\x20is\x20invalid','480yjzUqx','assign','performance','emojisell','Uncaught\x20Exception:','fetchOpenOrders','format','apiPassword','001','args','/EUR','apiKey',':\x20timer\x20>','getDate','trade','changes','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','time','value','min','no\x20open\x20orders','abs','findIndex','none','coin','emojibuy','yyyy/MM/dd','MIN_NOTIONAL','No\x20more\x20open\x20orders\x20-\x20','placeOrder','recreateCoinResults()','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','replace','limits','1\x20-\x20Handle\x20open\x20orders','getMonth','full','Bybit','restart','exchange','watchOrders','data','cancelOrder','limit-high','existsSync','change24h','bot-','API-key\x20format\x20invalid','Uncaught\x20NetworkError:','enabled','exchanges','cancel','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20>\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','LOCKED','getMinutes','getPortfolio(1)','milliseconds','InvalidNonce','warning','-config.json','options','USDT','error','deleteHistoryAlerts','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','order','added','timestamp','round','Net\x20','/backup/','(((.+)+)+)+$','1\x20-\x20Validate\x20orders:\x20','botID','offset','password','find','%\x20(','.json','Error:\x20Invalid\x20argument\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','splice','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Avoiding\x20continuous\x20order\x20attempts','loadMarkets','ORDERS.UNLOCKING','message','exchange\x20not\x20reloaded','29695woPuyr','<pre>','0\x20-\x20EXECUTION:\x20','removed','apply','getCoinNumber()','parseISO','toString','bb-secure.json','balances','Manual\x20balancing\x20required','\x20>\x20[DEBUG]\x20','Fee\x20discount\x20refund\x20detected:\x20','apiSecret','\x20|\x20Error\x20details:\x20','watchTransactions','path','cancelOrders()','last','bot','limit','Invalid\x20quantity','remainingSymbols','Waited\x20','writeFile','Pausing\x20for\x20','recreate','8856722IDtGsS','open','\x20order:\x20','add','autoliquidity','XEM/BUSD','RSA-OAEP','-events.json','stringify','getFullYear','showname','784413uGRlBI','-results.json','cloneDeep','canceled','starting-balances','fromCodePoint','log','orderstatus','Resetting\x20bot\x20history','exchange\x20reloaded','\x20minutes\x20-\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','fees','376WCgCkq','breakeven','final','max','configuration','send','uncaughtException','closed','amountToPrecision','headless','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','remove','fetchTicker','average','logs','DDoSProtection','distribution','ask','amount','toggleBotMode','\x20connection\x20problem','ticker','2.5.0','Transaction\x20detection\x20blocked','758wAMJQz','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Initiating\x20exchange\x20reload','toLowerCase','type','sortBy','settings','filter','getPortfolio(2)','realized','change','date','5906064mTaycO','lowdb','netoffset','\x20minutes','threshold','USDC','function','mkdirSync','decrypt','padEnd','EUR','Executed\x20','number','util','red_yellow_blue','Initializing\x20coin\x20results','Portfolio\x20change\x20detected:\x20','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','delta','\x20:\x20','\x20metrics:</b>\x20\x0a\x0a','UNLOCKED','includes','./config/','secure','rightTxt','OrderNotFound','success','filled','join','split','openOrders','ORDERS.LOCKED','cooldown','\x20|\x20','event','get','kill','3\x20-\x20handling\x20FILLED\x20order:\x20','USDP','cancelLoading','BNB','Limit\x20(high-margin)','customId','indexOf','excluded','startdate','argv','Transaction\x20detection\x20unblocked','sort','net-basecoin',':\x20Bot\x20','-------------------------------\x0a','RequestTimeout','\x20exchange','storeFiat','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ETH','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','placeOrder()','createOrder','datetime','Error\x20while\x20deleting\x20files:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','storeHeadless','fetchClosedOrders','1\x20-\x20Unlock\x20orders','usd','Order\x20filled:\x20','unlinkSync','differenceInSeconds','parse','event-history','net-fiat','additional\x20symbols\x20','<b>','length','\x20portfolio:</b>\x20\x0a\x0a','16030CJBHEF','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','fetchBalance','loadSymbols()','debug','botname','colorscheme','2\x20-\x20Orders\x20unlocked','date-fns','recovery'];_0x1a4a=function(){return _0x28638f;};return _0x1a4a();}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x8ace46=_0x11e5b5;let _0x27511a=global[_0x8ace46(0x18a)][stablecoins[_0x8ace46(0x22d)][_0x8ace46(0x293)]],_0x1e749d=global[_0x8ace46(0x18a)][stablecoins[_0x8ace46(0x1dc)][_0x8ace46(0x293)]];return{'eur':Number(_0x27511a),'usd':Number(_0x1e749d)};}function capitalize(_0x480fb9){const _0x46c1d6=_0x11e5b5;return _0x480fb9[_0x46c1d6(0x252)](0x0,0x1)[_0x46c1d6(0x217)]()+_0x480fb9[_0x46c1d6(0x252)](0x1);}function supportedExchanges(){const _0x37d9c3=_0x11e5b5,_0x21af7c=['ws',_0x37d9c3(0x1f3),'fetchTicker',_0x37d9c3(0x230),'watchOrders',_0x37d9c3(0x2a5),_0x37d9c3(0x1d5),'fetchOpenOrders',_0x37d9c3(0x1da),_0x37d9c3(0x1e9)];let _0x26b84d=[],_0x3b82ff=[],_0x345463=ccxt['exchanges'];_0x345463[_0x37d9c3(0x25d)](_0x1de147=>{const _0x15bbe5=_0x37d9c3;try{const _0x36631f=new ccxt[_0x1de147]();if(_0x36631f[_0x15bbe5(0x223)]['ws'])_0x3b82ff['push'](_0x36631f);}catch(_0x26c5c1){}}),_0x3b82ff[_0x37d9c3(0x25d)](_0x43f809=>{const _0x47a4bf=_0x37d9c3;let _0xf49c75=0x0;_0x21af7c[_0x47a4bf(0x25d)](_0x63c8=>{const _0x19d1aa=_0x47a4bf;_0x63c8 in _0x43f809[_0x19d1aa(0x223)]&&_0x43f809[_0x19d1aa(0x223)][_0x63c8]&&_0xf49c75++;}),_0xf49c75==_0x21af7c['length']&&_0x26b84d['push'](capitalize(_0x43f809['id']));});let _0x458fbf=[];return _0x345463[_0x37d9c3(0x25d)](_0x2dc529=>{const _0x5cd2eb=_0x37d9c3;_0x2dc529=capitalize(_0x2dc529);if(!_0x26b84d[_0x5cd2eb(0x1af)](_0x2dc529))_0x458fbf['push'](_0x2dc529);}),_0x26b84d;}function setStartDatePerformance(){const _0x2785f2=_0x11e5b5;if(config&&config[_0x2785f2(0x204)][0x0][_0x2785f2(0x28a)][_0x2785f2(0x1e5)]!=0x0){const _0x140891=config[_0x2785f2(0x204)][0x0][_0x2785f2(0x28a)];dbPerformance[_0x2785f2(0x1bd)](_0x2785f2(0x2a4))[_0x2785f2(0x135)]({'date':config['startdate']})[_0x2785f2(0x27c)]({'coins':_0x140891})[_0x2785f2(0x277)]();}}async function recreateCoinResults(){const _0x39cfde=_0x11e5b5;let _0x2a6065,_0x47fc2e=[];try{const _0x11cafe=fns[_0x39cfde(0x281)](fns[_0x39cfde(0x148)](config['startdate']['replace'](/\//g,'-')),_0x39cfde(0x21c));for(const _0x445f5e of currentCoins){if(_0x445f5e[_0x39cfde(0x293)]!=config[_0x39cfde(0x251)]){let _0x3188bf=0x0,_0x58a820,_0x2204e8;_0x2a6065=await getAllEventOrders(_0x445f5e[_0x39cfde(0x201)]);if(_0x2a6065['length']>0x0)_0x2a6065['forEach'](_0x40d75a=>{const _0x32969f=_0x39cfde,_0x399007=_0x445f5e[_0x32969f(0x201)][_0x32969f(0x1af)](config[_0x32969f(0x251)]+'/');_0x47fc2e[_0x32969f(0x22e)]({'datetime':_0x40d75a[_0x32969f(0x1d6)],'coin':_0x445f5e[_0x32969f(0x293)],'symbol':_0x445f5e['symbol'],'side':_0x40d75a[_0x32969f(0x25b)],'reverse':_0x399007,'amount':formatResult(_0x40d75a[_0x32969f(0x1b5)],0x8),'filled':formatResult(_0x40d75a['filled'],0x8),'price':formatResult(_0x40d75a['price'],0x8)}),_0x3188bf=_0x40d75a[_0x32969f(0x25b)]==_0x32969f(0x248)?_0x3188bf+_0x40d75a[_0x32969f(0x1b5)]:_0x3188bf-_0x40d75a['filled'];if(!_0x2204e8)_0x2204e8=_0x40d75a['price'];});_0x58a820=_0x445f5e[_0x39cfde(0x1a5)]-_0x3188bf;let _0x5dde94;config[_0x39cfde(0x204)]['forEach'](_0x580a22=>{const _0x510be6=_0x39cfde;!_0x5dde94&&(_0x5dde94=_0x580a22[_0x510be6(0x28a)][_0x510be6(0x135)](_0x423a00=>_0x423a00['coin']==_0x445f5e[_0x510be6(0x293)]),_0x5dde94&&(_0x58a820=_0x5dde94[_0x510be6(0x1a5)],_0x2204e8=_0x5dde94[_0x510be6(0x24c)]));});let _0x1051bf=dbCoinResults[_0x39cfde(0x1bd)](_0x39cfde(0x250))['find']({'coin':_0x445f5e[_0x39cfde(0x293)]})[_0x39cfde(0x28d)]();_0x1051bf={'coin':_0x445f5e['coin'],'number':_0x58a820,'breakeven':_0x2204e8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x39cfde(0x250))[_0x39cfde(0x135)]({'coin':_0x445f5e['coin']})[_0x39cfde(0x27c)](_0x1051bf)[_0x39cfde(0x277)]();}}_0x47fc2e[_0x39cfde(0x1ca)]((_0x410339,_0xb0d7aa)=>_0x410339[_0x39cfde(0x1d6)]>_0xb0d7aa['datetime']?0x1:_0xb0d7aa[_0x39cfde(0x1d6)]>_0x410339['datetime']?-0x1:0x0);let _0xc6cff2=0x0;for(let _0x292c35 of _0x47fc2e){await updateCoinResults(_0x292c35,!![]);}}catch(_0x17b54){await handleError(_0x17b54,_0x39cfde(0x299));}}async function getAllEventOrders(_0x286126){const _0x3c5125=_0x11e5b5;let _0x3ee17e=[],_0x2249bd=dbLogs['get'](_0x3c5125(0x183))[_0x3c5125(0x194)](_0x50ccb1=>{const _0x2ea369=_0x3c5125,_0x555216=_0x50ccb1[_0x2ea369(0x1bc)]['toLowerCase']();return _0x555216[_0x2ea369(0x1af)](_0x286126[_0x2ea369(0x190)]())&&(_0x555216['includes'](_0x2ea369(0x1f5))&&_0x555216[_0x2ea369(0x1af)](_0x2ea369(0x2bf))||_0x555216[_0x2ea369(0x1af)]('filled')&&_0x555216['includes'](_0x2ea369(0x2bf)));})[_0x3c5125(0x192)](_0x3c5125(0x28c))[_0x3c5125(0x28d)]();return _0x2249bd[_0x3c5125(0x25d)](_0x4eea3d=>{const _0x3caf7a=_0x3c5125,_0x251f52=_0x4eea3d[_0x3caf7a(0x1bc)]['includes'](_0x3caf7a(0x22c))?_0x3caf7a(0x22c):_0x3caf7a(0x248),_0x29e67d=/#([0-9]|\.)+\s/i,_0x3c1ccc=Number(_0x29e67d[_0x3caf7a(0x249)](_0x4eea3d['event'])[0x0][_0x3caf7a(0x222)](0x1)),_0x793617=/@([0-9]|\.)+$/i,_0x238c61=Number(_0x793617[_0x3caf7a(0x249)](_0x4eea3d['event'])[0x0][_0x3caf7a(0x222)](0x1));_0x3ee17e[_0x3caf7a(0x22e)]({'datetime':_0x4eea3d[_0x3caf7a(0x28c)],'coin':symbolToCoin(_0x286126),'symbol':_0x286126,'side':_0x251f52,'amount':_0x3c1ccc,'filled':_0x3c1ccc,'price':_0x238c61});}),_0x3ee17e;}async function getAllOrders(_0x4c45e9,_0x48bce7){const _0x45c59e=_0x11e5b5;let _0x9b2b3f=[];while(_0x48bce7<exchange[_0x45c59e(0x2b6)]()){const _0x5728a7=0x1f4,_0x34568e=await exchange[_0x45c59e(0x1da)](_0x4c45e9,_0x48bce7,_0x5728a7);if(_0x34568e[_0x45c59e(0x1e5)])_0x48bce7=_0x34568e[_0x34568e[_0x45c59e(0x1e5)]-0x1][_0x45c59e(0x2c1)]+0x1,_0x9b2b3f=_0x9b2b3f['concat'](_0x34568e);else break;}return _0x9b2b3f;}async function validate24hChanges(){const _0x24e259=_0x11e5b5;for(const _0x35bb17 of currentCoins){if(_0x35bb17[_0x24e259(0x293)]!=config['basecoin']){let _0x3df04a;_0x35bb17[_0x24e259(0x207)]?_0x3df04a=formatResult((0x1/(global[_0x24e259(0x197)][noslash(_0x35bb17[_0x24e259(0x201)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3df04a=global[_0x24e259(0x197)][noslash(_0x35bb17[_0x24e259(0x201)])],_0x3df04a<config[_0x24e259(0x2a8)]&&(logHistory(_0x24e259(0x2bc),_0x35bb17[_0x24e259(0x293)]+_0x24e259(0x173)+_0x3df04a+'%'),logHistory(_0x24e259(0x2bc),_0x24e259(0x18e)),logHistory(_0x24e259(0x2bc),_0x24e259(0x2b2)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2645fd,_0x4e190a){const _0x570015=_0x11e5b5;if(!_0x2645fd)return!![];const _0x6b52c8=_0x4e190a['split']('.'),_0x296bb4=_0x2645fd[_0x570015(0x1b7)]('.');for(var _0x15198e=0x0;_0x15198e<_0x296bb4[_0x570015(0x1e5)];_0x15198e++){const _0x20a869=~~_0x296bb4[_0x15198e],_0x1d6add=~~_0x6b52c8[_0x15198e];if(_0x20a869<_0x1d6add)return!![];if(_0x20a869>_0x1d6add)return![];}return![];}async function oneTimeMigration(){const _0x2ca3eb=_0x11e5b5;let _0x1f9e37=dbLogs[_0x2ca3eb(0x1bd)](_0x2ca3eb(0x228))['value']();if(isOlderVersion(_0x1f9e37,'2.3.5')){let _0x1a38c5=[];const _0x54292d=dbLogs[_0x2ca3eb(0x1bd)](_0x2ca3eb(0x183))[_0x2ca3eb(0x28d)]();_0x54292d[_0x2ca3eb(0x25d)](_0x1731d3=>{const _0x24a995=_0x2ca3eb;_0x1a38c5['push']({'time':_0x1731d3[_0x24a995(0x28c)],'type':_0x1731d3['type'],'event':_0x1731d3[_0x24a995(0x1bc)]});}),dbLogs[_0x2ca3eb(0x1bd)]('logs')['assign'](_0x1a38c5)[_0x2ca3eb(0x277)]();}let _0x451efd=dbConfig[_0x2ca3eb(0x1bd)]('version')[_0x2ca3eb(0x28d)]();if(isOlderVersion(_0x451efd,_0x2ca3eb(0x241))){let _0x3f5784=dbConfig['get'](_0x2ca3eb(0x155))[_0x2ca3eb(0x135)]({'botID':botID})[_0x2ca3eb(0x28d)]();if(_0x3f5784){let _0x9e443c=[];_0x3f5784[_0x2ca3eb(0x270)]['forEach'](_0x2696e9=>{const _0x2f1a46=_0x2ca3eb;_0x9e443c[_0x2f1a46(0x22e)]({'coin':_0x2696e9[_0x2f1a46(0x293)],'number':_0x2696e9['startnumber'],'price':_0x2696e9[_0x2f1a46(0x239)]}),delete _0x2696e9[_0x2f1a46(0x259)],delete _0x2696e9[_0x2f1a46(0x239)];});if(_0x9e443c['length']!==0x0)fs[_0x2ca3eb(0x15a)](configbackuppath+(_0x2ca3eb(0x25e)+botID+_0x2ca3eb(0x137)),JSON[_0x2ca3eb(0x165)](_0x9e443c,null,0x4),function(_0x4be4de){if(_0x4be4de){}});const _0x2bc777=(_0x228503,_0x1505e0)=>{const _0x39338a=_0x2ca3eb;let _0x5cb83e=[];_0x1505e0[_0x39338a(0x25d)](_0x4cbca1=>{const _0x5257c6=_0x39338a,_0x2e7824=_0x228503[_0x5257c6(0x135)](_0x37090c=>_0x37090c['coin']==_0x4cbca1[_0x5257c6(0x293)]);if(!_0x2e7824)_0x5cb83e[_0x5257c6(0x22e)](_0x4cbca1);});let _0x4e4c13=[];return _0x228503[_0x39338a(0x25d)](_0x4a3def=>{const _0x34eca9=_0x39338a,_0x16f097=_0x1505e0[_0x34eca9(0x135)](_0x547ff5=>_0x547ff5[_0x34eca9(0x293)]==_0x4a3def[_0x34eca9(0x293)]);if(!_0x16f097||_0x16f097[_0x34eca9(0x1a5)]==0x0&&_0x4a3def['number']!=0x0)_0x4e4c13[_0x34eca9(0x22e)](_0x4a3def);}),{'missingDay1':_0x5cb83e,'notInDay2':_0x4e4c13};},_0x1a27af=dbPerformance['get'](_0x2ca3eb(0x2a4))['cloneDeep']()[_0x2ca3eb(0x28d)]();if(_0x1a27af[_0x2ca3eb(0x1e5)]>0x1){const {missingDay1:_0x99b3ee,notInDay2:_0x5bd34c}=_0x2bc777(_0x9e443c,_0x1a27af[0x1][_0x2ca3eb(0x250)]);_0x9e443c=[..._0x9e443c,..._0x99b3ee],_0x5bd34c[_0x2ca3eb(0x25d)](_0x55173e=>{const _0x504fbf=_0x2ca3eb;let _0x4c9a80=_0x9e443c[_0x504fbf(0x291)](_0x3a6c9d=>_0x3a6c9d[_0x504fbf(0x293)]==_0x55173e[_0x504fbf(0x293)]);_0x4c9a80!=-0x1&&_0x9e443c[_0x504fbf(0x13a)](_0x4c9a80,0x1);});}_0x9e443c[_0x2ca3eb(0x1ca)]((_0x170c21,_0x2a377e)=>_0x170c21[_0x2ca3eb(0x293)]>_0x2a377e[_0x2ca3eb(0x293)]?0x1:_0x2a377e[_0x2ca3eb(0x293)]>_0x170c21[_0x2ca3eb(0x293)]?-0x1:0x0);let _0x1dd158=[{'date':_0x3f5784[_0x2ca3eb(0x1c7)],'changes':_0x9e443c}];_0x1a27af[_0x2ca3eb(0x1e5)]>0x2&&_0x1a27af['forEach']((_0x3d0656,_0x1672ee)=>{const _0x51e889=_0x2ca3eb;if(_0x1672ee>0x0&&_0x1672ee<_0x1a27af[_0x51e889(0x1e5)]-0x1){const {missingDay1:_0x3063fc,notInDay2:_0x20ac34}=_0x2bc777(_0x1a27af[_0x1672ee][_0x51e889(0x250)],_0x1a27af[_0x1672ee+0x1][_0x51e889(0x250)]);_0x9e443c=[],(_0x3063fc[_0x51e889(0x1e5)]!=0x0||_0x20ac34['length']!=0x0)&&(_0x3063fc[_0x51e889(0x1e5)]!=0x0&&_0x9e443c['push'](..._0x3063fc),_0x20ac34[_0x51e889(0x1e5)]!=0x0&&(_0x20ac34[_0x51e889(0x25d)](_0x25d8ee=>{const _0x5564a1=_0x51e889;_0x25d8ee[_0x5564a1(0x1a5)]=-_0x25d8ee[_0x5564a1(0x1a5)];}),_0x9e443c[_0x51e889(0x22e)](..._0x20ac34)),_0x9e443c['sort']((_0x4c427b,_0x1931e5)=>_0x4c427b[_0x51e889(0x293)]>_0x1931e5[_0x51e889(0x293)]?0x1:_0x1931e5[_0x51e889(0x293)]>_0x4c427b[_0x51e889(0x293)]?-0x1:0x0),_0x1dd158[_0x51e889(0x22e)]({'date':_0x1a27af[_0x1672ee+0x1][_0x51e889(0x198)],'changes':_0x9e443c}));}}),dbConfig['get']('bot')['find']({'botID':botID})[_0x2ca3eb(0x27c)]({..._0x3f5784,'liquidity':_0x1dd158})['write']();}}if(isOlderVersion(_0x451efd,_0x2ca3eb(0x212))){let _0x444ffe=dbConfig[_0x2ca3eb(0x1bd)](_0x2ca3eb(0x155))[_0x2ca3eb(0x135)]({'botID':botID})[_0x2ca3eb(0x28d)]();if(_0x444ffe){const _0x57dec9=_0x444ffe[_0x2ca3eb(0x2a2)],_0x3853b2=_0x57dec9?capitalize(_0x57dec9):'Binance';dbConfig[_0x2ca3eb(0x1bd)](_0x2ca3eb(0x155))[_0x2ca3eb(0x135)]({'botID':botID})['assign']({'exchange':_0x3853b2})[_0x2ca3eb(0x277)]();}}let _0x34d2af=dbPerformance['get'](_0x2ca3eb(0x228))[_0x2ca3eb(0x28d)]();isOlderVersion(_0x34d2af,_0x2ca3eb(0x241))&&setStartDatePerformance();let _0x125ebd=dbCoinResults[_0x2ca3eb(0x1bd)]('version')[_0x2ca3eb(0x28d)]();if(isOlderVersion(_0x125ebd,_0x2ca3eb(0x18b))){let _0x523bc8=dbCoinResults[_0x2ca3eb(0x1bd)](_0x2ca3eb(0x250))[_0x2ca3eb(0x28d)]();if(_0x523bc8[_0x2ca3eb(0x1e5)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x16edae=_0x11e5b5;dbConfig[_0x16edae(0x1f6)](_0x16edae(0x228),serverversion)[_0x16edae(0x277)](),dbPerformance[_0x16edae(0x1f6)]('version',serverversion)[_0x16edae(0x277)](),dbLogs[_0x16edae(0x1f6)]('version',serverversion)[_0x16edae(0x277)](),dbCoinResults[_0x16edae(0x1f6)](_0x16edae(0x228),serverversion)[_0x16edae(0x277)]();}function getConfiguration(_0x28f5ea){const _0x5923ce=_0x11e5b5;let _0x5a5d58=dbConfig['get'](_0x5923ce(0x155))[_0x5923ce(0x135)]({'botID':_0x28f5ea})[_0x5923ce(0x28d)]();if(_0x5a5d58){let _0x29f78a=![];typeof _0x5a5d58[_0x5923ce(0x19d)]=='string'&&(_0x5a5d58={..._0x5a5d58,'threshold':Number(_0x5a5d58[_0x5923ce(0x19d)])},_0x29f78a=!![]),_0x5a5d58[_0x5923ce(0x2a8)]==null&&(_0x5a5d58={..._0x5a5d58,'change24h':-0x14},_0x29f78a=!![]),!_0x5a5d58['fiat']&&(_0x5a5d58={..._0x5a5d58,'fiat':_0x5923ce(0x268)},_0x29f78a=!![]),!_0x5a5d58[_0x5923ce(0x276)]&&(_0x5a5d58={..._0x5a5d58,'onepagemode':settings[_0x5923ce(0x276)]},_0x29f78a=!![]),!_0x5a5d58[_0x5923ce(0x1ed)]&&(_0x5a5d58={..._0x5a5d58,'colorscheme':_0x5923ce(0x1a7)},_0x29f78a=!![]),!_0x5a5d58[_0x5923ce(0x161)]&&(_0x5a5d58={..._0x5a5d58,'autoliquidity':!![]},_0x29f78a=!![]),_0x29f78a&&(_0x5a5d58={'botID':_0x5a5d58[_0x5923ce(0x132)],'exchange':_0x5a5d58[_0x5923ce(0x2a2)],'apiKey':_0x5a5d58[_0x5923ce(0x286)],'apiSecret':_0x5a5d58['apiSecret'],'apiPassword':_0x5a5d58['apiPassword'],'basecoin':_0x5a5d58[_0x5923ce(0x251)],'botname':_0x5a5d58[_0x5923ce(0x1ec)],'showname':_0x5a5d58[_0x5923ce(0x167)],'threshold':_0x5a5d58[_0x5923ce(0x19d)],'ordertype':_0x5a5d58[_0x5923ce(0x24b)],'timeout':_0x5a5d58[_0x5923ce(0x23d)],'fiat':_0x5a5d58[_0x5923ce(0x208)],'startdate':_0x5a5d58[_0x5923ce(0x1c7)],'recreate':_0x5a5d58[_0x5923ce(0x15c)],'timeshift':_0x5a5d58[_0x5923ce(0x256)],'onepagemode':_0x5a5d58['onepagemode'],'headless':_0x5a5d58[_0x5923ce(0x17e)],'cooldown':_0x5a5d58[_0x5923ce(0x1ba)],'change24h':_0x5a5d58[_0x5923ce(0x2a8)],'emojibuy':_0x5a5d58[_0x5923ce(0x294)],'emojisell':_0x5a5d58[_0x5923ce(0x27e)],'colorscheme':_0x5a5d58['colorscheme'],'portfolio':_0x5a5d58[_0x5923ce(0x270)],'autoliquidity':_0x5a5d58[_0x5923ce(0x161)],'liquidity':_0x5a5d58[_0x5923ce(0x204)],'openOrders':_0x5a5d58['openOrders']},dbConfig['get'](_0x5923ce(0x155))[_0x5923ce(0x180)]()[_0x5923ce(0x277)](),dbConfig[_0x5923ce(0x1bd)](_0x5923ce(0x155))[_0x5923ce(0x22e)](_0x5a5d58)[_0x5923ce(0x277)]());}else _0x5a5d58={'botID':_0x28f5ea,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5923ce(0x21a)+_0x28f5ea,'showname':![],'threshold':0x3,'ordertype':_0x5923ce(0x1f5),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x5923ce(0x276)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x5923ce(0x1a7),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5a5d58;}function emittedConfiguration(){const _0x516b96=_0x11e5b5;let _0x18244e;if(config[_0x516b96(0x286)]=='')_0x18244e={...config,'configstate':'initial'};else config[_0x516b96(0x286)]=='***'?_0x18244e={...config,'configstate':_0x516b96(0x1f0)}:(_0x18244e={...config,'apiKey':_0x516b96(0x214),'apiSecret':_0x516b96(0x214)},config[_0x516b96(0x282)]&&(_0x18244e[_0x516b96(0x282)]=_0x516b96(0x214)));return _0x18244e;}function getSettings(){const _0x5995bd=_0x11e5b5;return dbSettings['get'](_0x5995bd(0x193))[_0x5995bd(0x28d)]();}function getSecure(){const _0x1c4463=_0x11e5b5;return dbSecure[_0x1c4463(0x1bd)](_0x1c4463(0x1b1))[_0x1c4463(0x28d)]()||{};}function updateTimeshift(_0x3613ce){const _0x4ec623=_0x11e5b5;let _0x469eab=dbConfig[_0x4ec623(0x1bd)]('bot')[_0x4ec623(0x135)]({'botID':botID})[_0x4ec623(0x28d)]();_0x469eab&&dbConfig[_0x4ec623(0x1bd)](_0x4ec623(0x155))[_0x4ec623(0x135)]({'botID':botID})[_0x4ec623(0x27c)]({'timeshift':_0x3613ce})[_0x4ec623(0x277)](),config[_0x4ec623(0x256)]=_0x3613ce,proxyEmit(_0x4ec623(0x179),emittedConfiguration());}function updateOnepagemode(_0x557af7){const _0x3b0326=_0x11e5b5;let _0x5edbb5=dbConfig[_0x3b0326(0x1bd)](_0x3b0326(0x155))[_0x3b0326(0x135)]({'botID':botID})[_0x3b0326(0x28d)]();_0x5edbb5&&dbConfig[_0x3b0326(0x1bd)](_0x3b0326(0x155))['find']({'botID':botID})[_0x3b0326(0x27c)]({'onepagemode':_0x557af7})['write'](),config[_0x3b0326(0x276)]=_0x557af7,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4f7c10){const _0x3efa82=_0x11e5b5;logger[_0x3efa82(0x1eb)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x3efa82(0x18c));let _0x38d8f6=[],_0x4eaf42=![],_0x216d32=![],_0xf50618=[];_0x4f7c10['portfolio'][_0x3efa82(0x25d)](_0x2924db=>{const _0x1d3440=_0x3efa82;if(!_0x2924db[_0x1d3440(0x1c6)]&&_0x2924db[_0x1d3440(0x293)]!=_0x4f7c10['basecoin'])_0xf50618[_0x1d3440(0x22e)](_0x2924db[_0x1d3440(0x201)]);}),_0xf50618[_0x3efa82(0x25d)](_0x433382=>{const _0x72bb55=_0x3efa82,_0x5a8e90=watchedSymbols[_0x72bb55(0x1af)](_0x433382);!_0x5a8e90&&_0x38d8f6[_0x72bb55(0x22e)](_0x433382);}),_0xf50618[_0x3efa82(0x25d)](_0x4af92a=>{const _0x2e14e6=_0x3efa82,_0x1deadb=currentCoins[_0x2e14e6(0x135)](_0x38f79b=>_0x38f79b['symbol']==_0x4af92a);!_0x1deadb&&(_0x4eaf42=!![]);}),currentCoins[_0x3efa82(0x25d)](_0x18aabc=>{const _0x5c0006=_0x3efa82;if(_0x18aabc[_0x5c0006(0x293)]!=config[_0x5c0006(0x251)]){const _0x40a520=_0xf50618['find'](_0x2a10ed=>_0x2a10ed==_0x18aabc[_0x5c0006(0x201)]);!_0x40a520&&(_0x4eaf42=!![]);}}),_0x4f7c10[_0x3efa82(0x270)][_0x3efa82(0x25d)](_0x3a0ad7=>{const _0x4c4755=_0x3efa82,_0x4eb80f=config['portfolio'][_0x4c4755(0x135)](_0x5be126=>_0x5be126[_0x4c4755(0x293)]==_0x3a0ad7['coin']);if(_0x4eb80f&&_0x3a0ad7['offset']!=_0x4eb80f[_0x4c4755(0x133)])_0x216d32=!![];});let _0x4b0580=dbConfig[_0x3efa82(0x1bd)]('bot')[_0x3efa82(0x135)]({'botID':botID})[_0x3efa82(0x28d)]();_0x4f7c10={..._0x4f7c10,'apiKey':crypt[_0x3efa82(0x1a1)](secure['privateKey'],_0x4f7c10['apiKey'])[_0x3efa82(0x140)],'apiSecret':crypt[_0x3efa82(0x1a1)](secure[_0x3efa82(0x22f)],_0x4f7c10[_0x3efa82(0x14f)])[_0x3efa82(0x140)]};_0x4f7c10['apiPassword']&&(_0x4f7c10['apiPassword']=crypt[_0x3efa82(0x1a1)](secure['privateKey'],_0x4f7c10['apiPassword'])[_0x3efa82(0x140)]);let _0x5d26f1=![];if(_0x4b0580){_0x4f7c10['apiKey']==_0x3efa82(0x214)?_0x4f7c10['apiKey']=config['apiKey']:_0x5d26f1=!![];_0x4f7c10['apiSecret']=='************'?_0x4f7c10[_0x3efa82(0x14f)]=config[_0x3efa82(0x14f)]:_0x5d26f1=!![];if(_0x4f7c10['apiPassword']==_0x3efa82(0x214))_0x4f7c10[_0x3efa82(0x282)]=config[_0x3efa82(0x282)];else{if(_0x4f7c10['apiPassword'])_0x5d26f1=!![];}dbConfig[_0x3efa82(0x1bd)](_0x3efa82(0x155))[_0x3efa82(0x135)]({'botID':botID})[_0x3efa82(0x27c)](_0x4f7c10)[_0x3efa82(0x277)]();}else dbConfig[_0x3efa82(0x1bd)](_0x3efa82(0x155))['push'](_0x4f7c10)[_0x3efa82(0x277)](),_0x5d26f1=!![],process[_0x3efa82(0x17a)]({'status':'enabled','live':_0x3efa82(0x238)},_0x34a729=>{});process[_0x3efa82(0x17a)]({'botname':_0x4f7c10['botname']},_0x2b30f7=>{}),updateBotManager(),config={..._0x4f7c10},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5d26f1)await reset(_0x38d8f6,!![]);else _0x4eaf42||_0x216d32?await reset(_0x38d8f6,![]):getBalances();blockTransactionDetection=![],logger[_0x3efa82(0x1eb)](_0x3efa82(0x1c9));}async function storeHeadless(_0x264b17){const _0x5cd43b=_0x11e5b5,_0x2ab3d9={...config,'headless':_0x264b17[_0x5cd43b(0x17e)]};let _0x1b40bd=dbConfig[_0x5cd43b(0x1bd)](_0x5cd43b(0x155))[_0x5cd43b(0x135)]({'botID':botID})[_0x5cd43b(0x28d)]();_0x1b40bd&&dbConfig[_0x5cd43b(0x1bd)](_0x5cd43b(0x155))[_0x5cd43b(0x135)]({'botID':botID})['assign'](_0x2ab3d9)['write'](),config={..._0x2ab3d9},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x50219d){const _0x71b8f3=_0x11e5b5,_0x2f27e0={...config,'fiat':_0x50219d};let _0x388f2a=dbConfig['get']('bot')[_0x71b8f3(0x135)]({'botID':botID})['value']();_0x388f2a&&dbConfig[_0x71b8f3(0x1bd)]('bot')[_0x71b8f3(0x135)]({'botID':botID})[_0x71b8f3(0x27c)](_0x2f27e0)['write'](),config={..._0x2f27e0},proxyEmit(_0x71b8f3(0x179),emittedConfiguration());}function resetHistory(){const _0xe37540=_0x11e5b5;logger[_0xe37540(0x29f)](_0xe37540(0x170));try{if(fs['existsSync'](path[_0xe37540(0x1b6)](configpath,_0xe37540(0x2a9)+botID+_0xe37540(0x164))))fs[_0xe37540(0x1de)](path[_0xe37540(0x1b6)](configpath,_0xe37540(0x2a9)+botID+'-events.json'));if(fs[_0xe37540(0x2a7)](path[_0xe37540(0x1b6)](configpath,_0xe37540(0x2a9)+botID+_0xe37540(0x242))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0xe37540(0x242)));if(fs['existsSync'](path[_0xe37540(0x1b6)](configpath,_0xe37540(0x2a9)+botID+_0xe37540(0x169))))fs[_0xe37540(0x1de)](path[_0xe37540(0x1b6)](configpath,_0xe37540(0x2a9)+botID+'-results.json'));}catch(_0x37575d){if(_0x37575d)logger[_0xe37540(0x29f)](_0xe37540(0x1d7),_0x37575d);}const _0x14c902=getDate();let _0x57eb2f=[];currentCoins[_0xe37540(0x25d)](_0x259ee0=>{const _0x4498c4=_0xe37540;_0x57eb2f[_0x4498c4(0x22e)]({'coin':_0x259ee0[_0x4498c4(0x293)],'number':_0x259ee0[_0x4498c4(0x1a5)],'price':_0x259ee0[_0x4498c4(0x154)]});});let _0x161ea0=dbConfig[_0xe37540(0x1bd)](_0xe37540(0x155))[_0xe37540(0x135)]({'botID':botID})[_0xe37540(0x28d)]();_0x161ea0&&(dbConfig[_0xe37540(0x1bd)](_0xe37540(0x155))['find']({'botID':botID})[_0xe37540(0x27c)]({'liquidity':[{'date':_0x14c902,'changes':_0x57eb2f}]})['write'](),config[_0xe37540(0x204)]=[]),process[_0xe37540(0x17a)]({'stop':_0xe37540(0x2a1)},_0xe9cd3e=>{});}function noslash(_0x4e9318){const _0x36f444=_0x11e5b5;return _0x4e9318[_0x36f444(0x29b)]('/','');}function updateHighestFee(_0x5a6d08,_0x13d142){const _0x11a437=_0x11e5b5;lastFees[_0x11a437(0x26d)]=_0x5a6d08,lastFees[_0x11a437(0x265)][_0x11a437(0x1e5)]===0x14&&lastFees['recent20'][_0x11a437(0x240)](),lastFees[_0x11a437(0x265)][_0x11a437(0x22e)](_0x13d142),lastFees[_0x11a437(0x20a)]=Math[_0x11a437(0x178)](...lastFees[_0x11a437(0x265)]);}async function updateNumberCoinsCcxt(_0x3bcd9c){const _0x98a141=_0x11e5b5;logger[_0x98a141(0x1eb)](_0x98a141(0x144)+_0x3bcd9c['symbol']+_0x98a141(0x1bb)+_0x3bcd9c['status']+_0x98a141(0x1bb)+_0x3bcd9c['id']);let _0x44bc74=_0x3bcd9c[_0x98a141(0x24e)],_0x5ba2a6=![];currentCoins[_0x98a141(0x25d)](_0x5e588f=>{const _0x5f108f=_0x98a141;_0x5e588f[_0x5f108f(0x201)]==_0x3bcd9c[_0x5f108f(0x201)]&&(_0x5ba2a6=!![]);});if(!_0x5ba2a6)return;const _0xe603a8=currentCoins['find'](_0xe0a422=>_0xe0a422[_0x98a141(0x201)]==_0x3bcd9c[_0x98a141(0x201)]),_0x3458cc=_0x38d133=>{const _0x26ac84=_0x98a141;if(_0xe603a8)_0xe603a8[_0x26ac84(0x16f)]=_0x38d133;};if(_0x44bc74=='open')_0x3458cc(_0x98a141(0x15e));else{if(_0x44bc74=='canceled'){_0x3458cc(_0x98a141(0x16b));const _0x10e6b4=await getCoins();[currentCoins,currentCoinsAll]=_0x10e6b4,await getOpenOrders(),handleOpenOrders();}else{if(_0x44bc74=='closed'){logger['debug']('1\x20-\x20FILLED:\x20'+_0x3bcd9c[_0x98a141(0x201)]+_0x98a141(0x1bb)+_0x3bcd9c[_0x98a141(0x1b5)]+_0x98a141(0x1bb)+_0x3bcd9c['id']);let _0x480453=![];if(lastOrders)for(const _0x19b7a3 of lastOrders){const _0x4fab95=0xc8,_0x30962f=0x1388;let _0x5a45be=0x0;while(!_0x19b7a3[_0x98a141(0x224)]&&_0x5a45be*_0x4fab95<_0x30962f){_0x5a45be++,await sleep(_0x4fab95);}if(_0x5a45be>0x0)logger['debug'](_0x98a141(0x159)+_0x5a45be*_0x4fab95/0x3e8+_0x98a141(0x13c));if(_0x19b7a3['orderId']==_0x3bcd9c['id']){logger[_0x98a141(0x1eb)](_0x98a141(0x22b)+_0x3bcd9c['id']),_0x480453=!![];if(_0x19b7a3[_0x98a141(0x1b5)]==0x0){logger['debug'](_0x98a141(0x1bf)+_0x3bcd9c['id']);if(_0x3bcd9c[_0x98a141(0x182)])_0x19b7a3[_0x98a141(0x24c)]=_0x3bcd9c['average'];else{if(_0x3bcd9c[_0x98a141(0x24c)])_0x19b7a3[_0x98a141(0x24c)]=_0x3bcd9c[_0x98a141(0x24c)];else{}}_0x19b7a3['filled']=_0x3bcd9c[_0x98a141(0x1b5)],_0x19b7a3['fee']={'currency':_0x3bcd9c[_0x98a141(0x26a)]?_0x3bcd9c['fee'][_0x98a141(0x26d)]:null,'cost':_0x3bcd9c[_0x98a141(0x26a)]?_0x3bcd9c[_0x98a141(0x26a)]['cost']:0x0},updateHighestFee(_0x19b7a3[_0x98a141(0x26a)]['currency'],_0x19b7a3[_0x98a141(0x26a)][_0x98a141(0x25f)]),_0x3458cc(_0x98a141(0x1b5)),await validateOrders();if(lockOrders==ORDERS[_0x98a141(0x2b3)]){const _0x4abfe6=await getCoins();[currentCoins,currentCoinsAll]=_0x4abfe6;}await updateCoinResults(_0x19b7a3);}}}if(!_0x480453){logger[_0x98a141(0x1eb)](_0x98a141(0x23a)+_0x3bcd9c['id']),_0x3458cc(_0x98a141(0x1b5));const _0x5441a7=await getCoins();[currentCoins,currentCoinsAll]=_0x5441a7,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xb6380b=JSON[_0x98a141(0x1e0)](lastBalances[_0x98a141(0x270)]);const _0x2ded9c=_0xb6380b['find'](_0x41de73=>_0x41de73[_0x98a141(0x201)]==_0x3bcd9c[_0x98a141(0x201)]);if(_0x2ded9c){if(_0x44bc74==_0x98a141(0x15e))_0x2ded9c[_0x98a141(0x16f)]=_0x2ded9c[_0x98a141(0x16f)]=='filled'?'filled':_0x98a141(0x15e);else{if(_0x44bc74==_0x98a141(0x16b))_0x2ded9c[_0x98a141(0x16f)]=_0x2ded9c[_0x98a141(0x16f)]==_0x98a141(0x1b5)?_0x98a141(0x1b5):'canceled';else _0x44bc74==_0x98a141(0x17c)&&(_0x2ded9c[_0x98a141(0x16f)]=_0x98a141(0x1b5));}}lastBalances={...lastBalances,'portfolio':JSON[_0x98a141(0x165)](_0xb6380b)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x601afe=_0x11e5b5;await getOpenOrders();let _0xa66365=![];currentCoins[_0x601afe(0x25d)](_0x547749=>{const _0x1fcd09=_0x601afe;_0xa66365=allOpenOrders[_0x1fcd09(0x135)](_0x4b989a=>_0x4b989a[_0x1fcd09(0x201)]==_0x547749[_0x1fcd09(0x201)]),_0x547749[_0x1fcd09(0x16f)]=_0xa66365?_0x1fcd09(0x15e):_0x1fcd09(0x292);});}async function getCoins(_0x5570ba=!![],_0x253f27=config[_0x11e5b5(0x251)]){const _0x4be948=_0x11e5b5;let _0x4a5581,_0x561398=[],_0x593a17=[],_0x2c5caa=[],_0x44e026=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4a5581=await exchange[_0x4be948(0x1e9)](),mybalances=_0x4a5581['total'];for(const [_0x5d22d4,_0x2935c9]of Object[_0x4be948(0x266)](mybalances)){_0x44e026[_0x4be948(0x22e)](_0x5d22d4);}if(_0x253f27=='')for(const [_0x5a012d,_0x2e4285]of Object[_0x4be948(0x266)](mybalances)){_0x2e4285!=0x0&&_0x593a17[_0x4be948(0x22e)]({'coin':_0x5a012d});}else{let _0x4b6a9c=![];for(const [_0x448159,_0x24da0f]of Object[_0x4be948(0x266)](mybalances)){if(_0x44e026[_0x4be948(0x1af)](_0x448159)){const _0x27d08f=config[_0x4be948(0x270)][_0x4be948(0x135)](_0x31087c=>_0x31087c[_0x4be948(0x293)]==_0x448159),_0x3e8726=_0x448159+'/'+_0x253f27,_0x1d9ee5=_0x253f27+'/'+_0x448159,_0x520103=currentCoins['find'](_0x5956d9=>_0x5956d9[_0x4be948(0x293)]==_0x448159);_0x4b6a9c=![];if((_0x24da0f!=0x0||_0x27d08f)&&(allSymbols[_0x4be948(0x1af)](_0x3e8726)||_0x448159==_0x253f27))_0x448159!=_0x253f27&&_0x561398[_0x4be948(0x22e)](_0x3e8726),_0x593a17[_0x4be948(0x22e)]({'coin':_0x448159,'symbol':_0x3e8726,'reverse':![],'number':Math['max'](_0x24da0f+(_0x27d08f&&_0x27d08f['offset']||0x0),0x0),'orderstatus':_0x520103?_0x520103['orderstatus']:_0x4be948(0x292)});else(_0x24da0f!=0x0||_0x27d08f)&&allSymbols['includes'](_0x1d9ee5)&&(_0x448159!=_0x253f27&&_0x561398['push'](_0x1d9ee5),_0x593a17[_0x4be948(0x22e)]({'coin':_0x448159,'symbol':_0x1d9ee5,'reverse':!![],'number':Math[_0x4be948(0x178)](_0x24da0f+(_0x27d08f&&_0x27d08f[_0x4be948(0x133)]||0x0),0x0),'orderstatus':_0x520103?_0x520103[_0x4be948(0x16f)]:_0x4be948(0x292)}));}}}}catch(_0xc103dc){if(!_0x5570ba)handleErrorNoStop(_0xc103dc,_0x4be948(0x23e));else await handleError(_0xc103dc,_0x4be948(0x23e));}return _0x2c5caa=cloneDeep(_0x593a17),_0x593a17=_0x593a17[_0x4be948(0x194)](_0x4a33b7=>{const _0x529c79=_0x4be948,_0x1d4319=config[_0x529c79(0x270)][_0x529c79(0x135)](_0x1f91b9=>_0x1f91b9[_0x529c79(0x293)]==_0x4a33b7[_0x529c79(0x293)]);return _0x1d4319&&!_0x1d4319[_0x529c79(0x1c6)];}),[_0x593a17,_0x2c5caa];}function _0x3b48(_0x59b6ec,_0x4f72fc){const _0x2d8c49=_0x1a4a();return _0x3b48=function(_0x232d15,_0x36ee2e){_0x232d15=_0x232d15-0x130;let _0x1a4a84=_0x2d8c49[_0x232d15];return _0x1a4a84;},_0x3b48(_0x59b6ec,_0x4f72fc);}async function getCoinNumber(_0x5e3b90){const _0x5c52fc=_0x11e5b5;let _0x5e0bd0;try{const _0x471f89=await exchange[_0x5c52fc(0x1e9)]();_0x5e0bd0=_0x471f89[_0x5c52fc(0x1ff)][_0x5e3b90];}catch(_0x4972f1){await handleError(_0x4972f1,_0x5c52fc(0x147));}return _0x5e0bd0;}async function getOpenOrders(){const _0x62c09b=_0x11e5b5;let _0x5aa27d;allOpenOrders=[];try{for(const _0x1c5467 of config['portfolio']){!_0x1c5467[_0x62c09b(0x1c6)]&&_0x1c5467[_0x62c09b(0x293)]!=config[_0x62c09b(0x251)]&&(_0x5aa27d=await exchange[_0x62c09b(0x280)](_0x1c5467[_0x62c09b(0x201)]),_0x5aa27d[_0x62c09b(0x1e5)]>0x0&&allOpenOrders[_0x62c09b(0x22e)](_0x5aa27d[0x0]));}}catch(_0x3202f7){await handleError(_0x3202f7,'getOpenOrders()');}}async function handleOpenOrders(_0x16010c=0x0){const _0x2b2ee9=_0x11e5b5;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x2b2ee9(0x2b3)]&&allOrdersPlaced&&(_0x16010c==0x0?(logger[_0x2b2ee9(0x1eb)](_0x2b2ee9(0x29d)),_0x16010c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2b2ee9(0x1eb)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x4b091b){const _0x4df0ae=_0x11e5b5,_0x3364c2=ccxt[_0x4b091b[_0x4df0ae(0x2a2)][_0x4df0ae(0x190)]()],_0x1afb75=new _0x3364c2({'apiKey':_0x4b091b['apiKey'],'secret':_0x4b091b[_0x4df0ae(0x14f)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x4b091b['exchange']==_0x4df0ae(0x2a0)&&(_0x1afb75[_0x4df0ae(0x2ba)]={'defaultType':'spot'});if(_0x4b091b[_0x4df0ae(0x282)])_0x1afb75[_0x4df0ae(0x134)]=_0x4b091b[_0x4df0ae(0x282)];try{await _0x1afb75[_0x4df0ae(0x13e)]();}catch(_0x2c38e9){throw _0x2c38e9;}}function cloneDeep(_0x25d95a){const _0x5b6a46=_0x11e5b5;return JSON[_0x5b6a46(0x1e0)](JSON[_0x5b6a46(0x165)](_0x25d95a));}async function getPortfolio(_0x1048a4){const _0x57af40=_0x11e5b5;let _0x1b550c=[],_0x411c8e=[],_0x1b6cc9=[],_0x29ffb7;if(_0x1048a4[_0x57af40(0x286)]!==_0x57af40(0x214)||_0x1048a4['apiSecret']!==_0x57af40(0x214)||_0x1048a4[_0x57af40(0x282)]&&_0x1048a4[_0x57af40(0x282)]!=='************'){if(config[_0x57af40(0x2a2)]){if(_0x1048a4[_0x57af40(0x286)]==_0x57af40(0x214))_0x1048a4[_0x57af40(0x286)]=config[_0x57af40(0x286)];if(_0x1048a4[_0x57af40(0x14f)]==_0x57af40(0x214))_0x1048a4[_0x57af40(0x14f)]=config['apiSecret'];if(_0x1048a4[_0x57af40(0x282)]==_0x57af40(0x214))_0x1048a4[_0x57af40(0x282)]=config['apiPassword'];try{await testAPI(_0x1048a4);}catch(_0x2592d2){if(_0x2592d2[_0x57af40(0x149)]()[_0x57af40(0x1af)](_0x57af40(0x213))){logger[_0x57af40(0x1eb)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x57af40(0x270),![]);return;}else{handleError(_0x2592d2,_0x57af40(0x219));return;}}}await initExchange(_0x1048a4[_0x57af40(0x2a2)],_0x1048a4[_0x57af40(0x286)],_0x1048a4['apiSecret'],_0x1048a4[_0x57af40(0x282)]);try{await loadSymbols(_0x1048a4[_0x57af40(0x2a2)],!![]);}catch(_0x237325){if(_0x237325[_0x57af40(0x149)]()[_0x57af40(0x1af)](_0x57af40(0x213))){proxyEmit('portfolio',![]);return;}else{handleError(_0x237325,_0x57af40(0x2b5));return;}}const _0x2277d8=await getCoins(![],_0x1048a4[_0x57af40(0x251)]);_0x1b6cc9=cloneDeep(_0x2277d8[0x1]);}else _0x1b6cc9=cloneDeep(currentCoinsAll);if(_0x1048a4[_0x57af40(0x251)]=='')proxyEmit(_0x57af40(0x270),_0x1b6cc9);else{_0x1b6cc9['forEach'](_0x4959ce=>{const _0x27d7f7=_0x57af40;if(_0x4959ce[_0x27d7f7(0x293)]!=_0x1048a4[_0x27d7f7(0x251)])_0x1b550c[_0x27d7f7(0x22e)](_0x4959ce[_0x27d7f7(0x201)]);});try{_0x411c8e=await exchange[_0x57af40(0x1f3)](_0x1b550c);}catch(_0x4e3055){if(_0x4e3055[_0x57af40(0x149)]()[_0x57af40(0x1af)](_0x57af40(0x213))){proxyEmit(_0x57af40(0x270),![]);return;}else{handleError(_0x4e3055,_0x57af40(0x195));return;}}_0x1b6cc9[_0x57af40(0x25d)](_0x26cdeb=>{const _0x1bcf62=_0x57af40;_0x26cdeb[_0x1bcf62(0x293)]!=_0x1048a4[_0x1bcf62(0x251)]?_0x29ffb7=_0x26cdeb[_0x1bcf62(0x207)]?0x1/_0x411c8e[_0x26cdeb[_0x1bcf62(0x201)]][_0x1bcf62(0x154)]:_0x411c8e[_0x26cdeb[_0x1bcf62(0x201)]]['last']:_0x29ffb7=0x1,_0x26cdeb[_0x1bcf62(0x24c)]=formatResult(_0x29ffb7,0x8);}),proxyEmit(_0x57af40(0x270),_0x1b6cc9);}}function truncateTradeAmount(_0xf93f74,_0x1fb560){const _0x29fc56=_0x11e5b5;let _0x3dc48b=0x0;try{_0x3dc48b=exchange[_0x29fc56(0x17d)](_0xf93f74,_0x1fb560);}catch(_0x130e55){}return _0x3dc48b;}function checkMinimums(_0xa1f9b1){const _0x847a12=_0x11e5b5;let _0x46d4c4=!![];const _0x27c03c=!_0xa1f9b1[_0x847a12(0x207)]?markets[_0xa1f9b1[_0x847a12(0x201)]][_0x847a12(0x29c)][_0x847a12(0x187)][_0x847a12(0x28e)]:markets[_0xa1f9b1[_0x847a12(0x201)]][_0x847a12(0x29c)][_0x847a12(0x25f)][_0x847a12(0x28e)],_0x1e5ea3=!_0xa1f9b1[_0x847a12(0x207)]?markets[_0xa1f9b1[_0x847a12(0x201)]]['limits'][_0x847a12(0x25f)][_0x847a12(0x28e)]:markets[_0xa1f9b1[_0x847a12(0x201)]][_0x847a12(0x29c)][_0x847a12(0x187)][_0x847a12(0x28e)],_0x6e319f=truncateTradeAmount(_0xa1f9b1[_0x847a12(0x201)],_0xa1f9b1['trade']);_0xa1f9b1[_0x847a12(0x289)]=_0x6e319f;if(Math[_0x847a12(0x290)](_0x6e319f)<_0x27c03c)_0x46d4c4=![];if(Math[_0x847a12(0x290)](_0x6e319f)*_0xa1f9b1[_0x847a12(0x154)]<_0x1e5ea3)_0x46d4c4=![];if(_0xa1f9b1[_0x847a12(0x25b)]==_0x847a12(0x22c)){let _0x345021=config['portfolio']['find'](_0x2393ec=>_0x2393ec['coin']==_0xa1f9b1['coin']);if(_0x345021['offset']>0x0){if(Math[_0x847a12(0x290)](_0x6e319f)>_0xa1f9b1[_0x847a12(0x1a5)]-_0x345021[_0x847a12(0x133)])_0x46d4c4=![];}else{if(Math[_0x847a12(0x290)](_0x6e319f)>_0xa1f9b1[_0x847a12(0x1a5)])_0x46d4c4=![];}}if(_0xa1f9b1[_0x847a12(0x25b)]=='buy'){let _0x1a57d0=config[_0x847a12(0x270)][_0x847a12(0x135)](_0x1b5dcb=>_0x1b5dcb[_0x847a12(0x293)]==config['basecoin']),_0x3a0294=currentCoins[_0x847a12(0x135)](_0x492233=>_0x492233[_0x847a12(0x293)]==config[_0x847a12(0x251)]);if(_0x1a57d0[_0x847a12(0x133)]>0x0){if(Math['abs'](_0x6e319f)*_0xa1f9b1['last']>_0x3a0294['number']-_0x1a57d0[_0x847a12(0x133)])_0x46d4c4=![];}else{if(Math['abs'](_0x6e319f)*_0xa1f9b1[_0x847a12(0x154)]>_0x3a0294['number'])_0x46d4c4=![];}}return _0x46d4c4;}async function getBalances(_0x475349=!![]){const _0x1df6be=_0x11e5b5;let _0x28c978=0x0,_0x4cc888;const _0x415ea6=config['threshold'];if(config[_0x1df6be(0x17e)]&&config[_0x1df6be(0x2a8)]<0x0)await validate24hChanges();currentCoins[_0x1df6be(0x25d)](_0x50225f=>{const _0x1947e8=_0x1df6be;if(_0x50225f[_0x1947e8(0x293)]!=config[_0x1947e8(0x251)]){let _0x4c1960=global[_0x1947e8(0x18a)][noslash(_0x50225f['symbol'])];_0x4cc888=_0x50225f[_0x1947e8(0x207)]?0x1/_0x4c1960:_0x4c1960;}else _0x4cc888=0x1;let _0xc1da71=_0x50225f[_0x1947e8(0x1a5)]*_0x4cc888;_0x28c978+=_0xc1da71,_0x50225f[_0x1947e8(0x154)]=formatResult(Number(_0x4cc888),0x8),_0x50225f[_0x1947e8(0x28d)]=_0xc1da71;}),currentCoins[_0x1df6be(0x25d)](_0x20a0f0=>{const _0x4a21b1=_0x1df6be;let _0x5d7bf1=config['portfolio'][_0x4a21b1(0x135)](_0x4fa728=>_0x4fa728[_0x4a21b1(0x293)]==_0x20a0f0[_0x4a21b1(0x293)]),_0x322409=Number(_0x5d7bf1[_0x4a21b1(0x185)]),_0x1114c0=_0x20a0f0[_0x4a21b1(0x28d)]/_0x28c978*0x64,_0x4748f8=_0x322409*_0x28c978/0x64/_0x20a0f0[_0x4a21b1(0x154)]-_0x20a0f0['number'];_0x20a0f0['distribution']=formatResult(_0x1114c0,0x3),_0x20a0f0['target']=formatResult(_0x322409,0x3),_0x20a0f0[_0x4a21b1(0x289)]=formatResult(_0x4748f8,0x8),_0x20a0f0[_0x4a21b1(0x25b)]='',_0x20a0f0[_0x4a21b1(0x1f2)]=![];if(_0x20a0f0[_0x4a21b1(0x293)]!=config[_0x4a21b1(0x251)]){if(_0x20a0f0[_0x4a21b1(0x185)]>_0x322409)_0x20a0f0[_0x4a21b1(0x25b)]=_0x4a21b1(0x22c),_0x20a0f0[_0x4a21b1(0x1f2)]=checkMinimums(_0x20a0f0);else _0x20a0f0[_0x4a21b1(0x185)]<_0x322409&&(_0x20a0f0[_0x4a21b1(0x25b)]='buy',_0x20a0f0[_0x4a21b1(0x1f2)]=checkMinimums(_0x20a0f0));}_0x20a0f0['delta']=_0x20a0f0[_0x4a21b1(0x185)]/_0x20a0f0[_0x4a21b1(0x232)]-0x1;if(_0x20a0f0[_0x4a21b1(0x16f)]=='filled'||_0x20a0f0[_0x4a21b1(0x16f)]=='canceled')_0x20a0f0['orderstatus']=_0x4a21b1(0x292);}),currentCoins['sort']((_0x1f40e5,_0x25fbc7)=>_0x1f40e5[_0x1df6be(0x1ab)]<_0x25fbc7['delta']?0x1:_0x25fbc7[_0x1df6be(0x1ab)]<_0x1f40e5[_0x1df6be(0x1ab)]?-0x1:0x0);const _0x3c8d22=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3c8d22['eur'],'usd':_0x3c8d22[_0x1df6be(0x1dc)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x415ea6},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x475349){if(config[_0x1df6be(0x17e)])headlessMode({'portfolio':currentCoins,'threshold':_0x415ea6});else{if(lockOrders==ORDERS[_0x1df6be(0x1ae)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x415ea6});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x502d56=getNormalizedPerformance();getStartingBalances(_0x502d56),emitPerformance(_0x502d56);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x12258c=getNormalizedPerformance();emitPerformance(_0x12258c),getStartingBalances(_0x12258c),logger[_0x1df6be(0x1eb)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x58f427=_0x11e5b5;if(!lastBalances)return;let _0x5cf35f=[],_0x165f5b,_0x4f4cb9=JSON[_0x58f427(0x1e0)](lastBalances[_0x58f427(0x270)]);_0x4f4cb9[_0x58f427(0x1ca)]((_0x4074f0,_0x1a96f2)=>_0x4074f0['coin']>_0x1a96f2[_0x58f427(0x293)]?0x1:_0x1a96f2[_0x58f427(0x293)]>_0x4074f0[_0x58f427(0x293)]?-0x1:0x0),_0x4f4cb9[_0x58f427(0x25d)](_0x14dd38=>{const _0x2a8251=_0x58f427;let _0x4c2729={'coin':_0x14dd38[_0x2a8251(0x293)],'number':_0x14dd38[_0x2a8251(0x1a5)],'price':_0x14dd38[_0x2a8251(0x154)]};_0x5cf35f['push'](_0x4c2729);});const _0x567901=await getFiat();_0x165f5b={'date':lastBalances[_0x58f427(0x28c)][_0x58f427(0x1b7)]('\x20')[0x0],'eur':_0x567901['eur'],'usd':_0x567901[_0x58f427(0x1dc)],'coins':_0x5cf35f};let _0x33847d=dbPerformance[_0x58f427(0x1bd)](_0x58f427(0x2a4))['find']({'date':_0x165f5b[_0x58f427(0x198)]})[_0x58f427(0x28d)]();_0x33847d?_0x165f5b[_0x58f427(0x198)]!=config[_0x58f427(0x1c7)]&&dbPerformance[_0x58f427(0x1bd)](_0x58f427(0x2a4))[_0x58f427(0x135)]({'date':_0x165f5b[_0x58f427(0x198)]})['assign'](_0x165f5b)[_0x58f427(0x277)]():dbPerformance[_0x58f427(0x1bd)](_0x58f427(0x2a4))[_0x58f427(0x22e)](_0x165f5b)[_0x58f427(0x277)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xe68030=_0x11e5b5;let _0x4d364b=[];if(dbPerformance[_0xe68030(0x223)](_0xe68030(0x2a4))['value']()){let _0x5f12ca=dbPerformance['get'](_0xe68030(0x2a4))[_0xe68030(0x16a)]()[_0xe68030(0x194)](_0x3b6621=>{const _0x2789c1=_0xe68030;if(_0x3b6621[_0x2789c1(0x250)][_0x2789c1(0x1e5)]==0x0)return![];else return!![];})['sortBy'](_0xe68030(0x198))[_0xe68030(0x28d)](),_0x2e29e1=[...config[_0xe68030(0x204)]];_0x2e29e1[_0xe68030(0x1ca)]((_0x2cb049,_0x32e68f)=>_0x2cb049[_0xe68030(0x198)]>_0x32e68f[_0xe68030(0x198)]?-0x1:_0x32e68f[_0xe68030(0x198)]>_0x2cb049['date']?0x1:0x0);let _0x166ae1=0x1,_0x375221=[],_0x378bbb=0x0;_0x5f12ca[_0xe68030(0x222)]()[_0xe68030(0x207)]()[_0xe68030(0x25d)]((_0x14e830,_0xef5e23)=>{const _0x32d1c7=_0xe68030;if(_0x2e29e1[_0x378bbb]){if(_0x5f12ca[_0x5f12ca[_0x32d1c7(0x1e5)]-_0xef5e23]&&_0x2e29e1[_0x378bbb]['date']==_0x5f12ca[_0x5f12ca['length']-_0xef5e23][_0x32d1c7(0x198)]){if(_0xef5e23<_0x5f12ca[_0x32d1c7(0x1e5)]){let _0x115b06=0x0,_0x5eccc7=0x0;_0x5f12ca[_0x5f12ca[_0x32d1c7(0x1e5)]-_0xef5e23][_0x32d1c7(0x250)]['forEach'](_0x371120=>{const _0x451bd3=_0x32d1c7;_0x5eccc7+=_0x371120[_0x451bd3(0x1a5)]*_0x371120[_0x451bd3(0x24c)];}),_0x2e29e1[_0x378bbb][_0x32d1c7(0x28a)]['forEach'](_0x3d47f0=>{const _0x123414=_0x32d1c7;_0x115b06+=_0x3d47f0[_0x123414(0x1a5)]*_0x3d47f0['price'];}),_0x166ae1*=_0x115b06/(_0x5eccc7-_0x115b06)+0x1;}_0x378bbb++;}}let _0xf684e7=0x0;_0x14e830[_0x32d1c7(0x250)]['forEach'](_0x733077=>{_0xf684e7+=_0x733077['number']*_0x733077['price'];}),_0x375221[_0x5f12ca[_0x32d1c7(0x1e5)]-_0xef5e23-0x1]=_0xf684e7*(_0x166ae1-0x1);});let _0x1ffc46=[];_0x2e29e1=[...config[_0xe68030(0x204)]]||[];let _0x5b4472=0x0;_0x378bbb=0x0,_0x5f12ca[_0xe68030(0x25d)]((_0x499128,_0x33e73c)=>{const _0x39b90a=_0xe68030;if(_0x2e29e1[_0x378bbb]){const _0x2a57a7=fns[_0x39b90a(0x1e0)](_0x2e29e1[_0x378bbb][_0x39b90a(0x198)],_0x39b90a(0x295),new Date()),_0x471f9a=fns[_0x39b90a(0x1e0)](_0x499128[_0x39b90a(0x198)],'yyyy/MM/dd',new Date());if(fns[_0x39b90a(0x244)](_0x2a57a7,_0x471f9a)){let _0x5afd74=0x0;_0x2e29e1[_0x378bbb][_0x39b90a(0x28a)][_0x39b90a(0x25d)](_0x32bfb5=>{const _0x280563=_0x39b90a;!_0x1ffc46[_0x32bfb5['coin']]?_0x1ffc46[_0x32bfb5[_0x280563(0x293)]]=_0x32bfb5[_0x280563(0x1a5)]:(_0x5afd74=_0x1ffc46[_0x32bfb5['coin']],_0x1ffc46[_0x32bfb5[_0x280563(0x293)]]+=_0x32bfb5[_0x280563(0x1a5)]);const _0x4bd8ed=_0x499128['coins'][_0x280563(0x135)](_0x4ed854=>_0x4ed854[_0x280563(0x293)]==_0x32bfb5[_0x280563(0x293)]);(!_0x4bd8ed||_0x4bd8ed[_0x280563(0x1a5)]==0x0)&&(_0x5b4472+=(-_0x32bfb5['number']-_0x5afd74)*_0x32bfb5[_0x280563(0x24c)]);}),_0x378bbb++;}}_0x499128['coins']['forEach']((_0x42b6ce,_0x377aa5)=>{const _0x309aca=_0x39b90a;_0x1ffc46[_0x42b6ce[_0x309aca(0x293)]]&&(_0x42b6ce['initial']=_0x1ffc46[_0x42b6ce[_0x309aca(0x293)]]);}),_0x4d364b[_0x39b90a(0x22e)]({'date':_0x499128[_0x39b90a(0x198)],'eur':_0x499128[_0x39b90a(0x22d)],'usd':_0x499128[_0x39b90a(0x1dc)],'offset':_0x375221[_0x33e73c],'netoffset':_0x5b4472,'coins':_0x499128[_0x39b90a(0x250)]});});}return _0x4d364b;}function emitPerformance(_0x21a45c){const _0x573c6a=_0x11e5b5;_0x21a45c['length']!==0x0?(proxyEmit(_0x573c6a(0x27d),_0x21a45c),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x54dc77,_0x5c8027){const _0x3b28dc=_0x11e5b5;let _0x46d397=0x0,_0x18bce3=0x0,_0x380f4d=0x0;_0x54dc77['coins']['forEach'](_0x480f9d=>{const _0x598e57=_0x3b48;_0x46d397+=_0x480f9d['number']*_0x480f9d[_0x598e57(0x24c)];});_0x5c8027&&(_0x46d397+=_0x54dc77[_0x3b28dc(0x133)]);if(config['basecoin']==='BTC'||config[_0x3b28dc(0x251)]===_0x3b28dc(0x1d2))_0x18bce3=_0x46d397*_0x54dc77[_0x3b28dc(0x22d)],_0x380f4d=_0x46d397*_0x54dc77[_0x3b28dc(0x1dc)];else{if(usdBasecoins[_0x3b28dc(0x1af)](config[_0x3b28dc(0x251)]))_0x18bce3=_0x46d397*_0x54dc77['eur']/_0x54dc77[_0x3b28dc(0x1dc)],_0x380f4d=_0x46d397;else config['basecoin']===_0x3b28dc(0x1a3)&&(_0x18bce3=_0x46d397,_0x380f4d=_0x46d397*_0x54dc77[_0x3b28dc(0x1dc)]/_0x54dc77[_0x3b28dc(0x22d)]);}return[_0x46d397,_0x18bce3,_0x380f4d];}function getKPIs(_0x5acdb6,_0x465c2b=_0x11e5b5(0x1a3)){const _0x3e312b=_0x11e5b5,_0x53acb6=config[_0x3e312b(0x251)],_0x8eecf9=lastBalances,_0x299187=currentCoins,_0x54ea82=getNormalizedPerformance(),_0x28c725=_0x5acdb6===_0x3e312b(0x251)?_0x53acb6:_0x5acdb6===_0x3e312b(0x208)||_0x5acdb6===_0x3e312b(0x1e2)?_0x465c2b:_0x3e312b(0x2c3)+_0x53acb6,_0x9887f0=_0x5acdb6===_0x3e312b(0x1cb)?_0x3e312b(0x26b):_0x5acdb6==='net-fiat'?_0x3e312b(0x26b):_0x28c725+'\x20value',_0x569ed4=_0x5acdb6===_0x3e312b(0x1cb)||_0x5acdb6===_0x3e312b(0x1e2)?'Net\x20effect':_0x28c725+'\x20change';let _0x285d51=0x0;_0x299187[_0x3e312b(0x25d)](_0x1ae1e2=>{const _0x549d44=_0x3e312b;_0x285d51+=_0x1ae1e2[_0x549d44(0x1a5)]*_0x1ae1e2[_0x549d44(0x154)];});if(_0x5acdb6===_0x3e312b(0x208)||_0x5acdb6===_0x3e312b(0x1e2)){if(_0x53acb6===_0x3e312b(0x209)||_0x53acb6===_0x3e312b(0x1d2))_0x285d51=_0x285d51*(_0x465c2b===_0x3e312b(0x1a3)?_0x8eecf9['eur']:_0x8eecf9[_0x3e312b(0x1dc)]);else{if(usdBasecoins['includes'](_0x53acb6))_0x285d51=_0x285d51*(_0x465c2b===_0x3e312b(0x1a3)?_0x8eecf9[_0x3e312b(0x22d)]/_0x8eecf9[_0x3e312b(0x1dc)]:0x1);else _0x53acb6==='EUR'&&(_0x285d51=_0x285d51*(_0x465c2b===_0x3e312b(0x1a3)?0x1:_0x8eecf9[_0x3e312b(0x1dc)]/_0x8eecf9[_0x3e312b(0x22d)]));}}let _0x52960f;if(_0x285d51!==0x0){if(_0x5acdb6===_0x3e312b(0x251))_0x52960f=(_0x285d51/startingBalances[_0x3e312b(0x251)]-0x1)*0x64;else{if(_0x465c2b===_0x3e312b(0x1a3))_0x52960f=(_0x285d51/startingBalances[_0x3e312b(0x22d)]-0x1)*0x64;else _0x52960f=(_0x285d51/startingBalances[_0x3e312b(0x1dc)]-0x1)*0x64;}let _0x12929f=0x0;if(startingBalances['coins'])_0x299187[_0x3e312b(0x25d)](_0x53cf0c=>{const _0x1a8e4a=_0x3e312b;let _0x24b46c=startingBalances[_0x1a8e4a(0x250)][_0x1a8e4a(0x135)](_0x1e4972=>_0x1e4972[_0x1a8e4a(0x293)]===_0x53cf0c[_0x1a8e4a(0x293)]);if(_0x24b46c&&_0x24b46c['coin']&&_0x53cf0c['number']!==0x0)_0x12929f+=_0x24b46c[_0x1a8e4a(0x1a5)]*_0x53cf0c[_0x1a8e4a(0x154)];});let _0x1822a0=0x0;if(_0x54ea82[_0x3e312b(0x1e5)]!==0x0){let _0x55e5b9=_0x54ea82[_0x54ea82[_0x3e312b(0x1e5)]-0x1];_0x1822a0=_0x55e5b9[_0x3e312b(0x19b)];}_0x12929f-=_0x1822a0;_0x5acdb6===_0x3e312b(0x1cb)&&(_0x52960f=(_0x285d51-_0x12929f)/startingBalances[_0x3e312b(0x251)]*0x64,_0x285d51=_0x285d51-_0x12929f);if(_0x5acdb6===_0x3e312b(0x1e2)){let _0x4e0ff2=_0x465c2b===_0x3e312b(0x1a3)?startingBalances[_0x3e312b(0x22d)]:startingBalances['usd'];if(_0x53acb6==='BTC'||_0x53acb6===_0x3e312b(0x1d2))_0x12929f=_0x465c2b===_0x3e312b(0x1a3)?_0x12929f*_0x8eecf9[_0x3e312b(0x22d)]:_0x12929f*_0x8eecf9[_0x3e312b(0x1dc)];else{if(usdBasecoins[_0x3e312b(0x1af)](_0x53acb6))_0x12929f=_0x465c2b==='EUR'?_0x12929f*_0x8eecf9[_0x3e312b(0x22d)]/_0x8eecf9[_0x3e312b(0x1dc)]:_0x12929f;else _0x53acb6===_0x3e312b(0x1a3)&&(_0x12929f=_0x465c2b==='EUR'?_0x12929f:_0x12929f*_0x8eecf9[_0x3e312b(0x1dc)]/_0x8eecf9[_0x3e312b(0x22d)]);}_0x52960f=(_0x285d51-_0x12929f)/_0x4e0ff2*0x64,_0x285d51=_0x285d51-_0x12929f;}if(_0x52960f){if(_0x52960f<0x64)_0x52960f=_0x52960f[_0x3e312b(0x216)](0x2);else{if(_0x52960f<0x3e8)_0x52960f=_0x52960f[_0x3e312b(0x216)](0x1);else _0x52960f=_0x52960f['toFixed'](0x0);}}else _0x52960f=Number('0')[_0x3e312b(0x216)](0x2);if(_0x285d51){if(Math[_0x3e312b(0x290)](_0x285d51)<0.000001)_0x285d51=_0x285d51[_0x3e312b(0x216)](0x2);else{if(Math[_0x3e312b(0x290)](_0x285d51)<0.1)_0x285d51=_0x285d51[_0x3e312b(0x216)](0x6);else{if(Math[_0x3e312b(0x290)](_0x285d51)<0x1)_0x285d51=_0x285d51[_0x3e312b(0x216)](0x5);else{if(Math[_0x3e312b(0x290)](_0x285d51)<0xa)_0x285d51=_0x285d51[_0x3e312b(0x216)](0x4);else{if(Math[_0x3e312b(0x290)](_0x285d51)<0x64)_0x285d51=_0x285d51['toFixed'](0x3);else{if(Math[_0x3e312b(0x290)](_0x285d51)<0x3e8)_0x285d51=_0x285d51['toFixed'](0x2);else _0x285d51=_0x285d51['toFixed'](0x2);}}}}}}else _0x285d51=Number('0')[_0x3e312b(0x216)](0x2);}else _0x52960f=Number('0')[_0x3e312b(0x216)](0x2);return{'value':_0x285d51,'change':_0x52960f,'leftTxt':_0x9887f0,'rightTxt':_0x569ed4};}async function getStartingBalances(_0x272f52,_0x219f33=!![]){const _0x567467=_0x11e5b5;if(_0x272f52[_0x567467(0x1e5)]!==0x0){const [_0x5bcc9d,_0x42dd6b,_0x4c8ab6]=getPerf(_0x272f52[0x0],!![]);let _0x372fa2=[];config[_0x567467(0x270)][_0x567467(0x25d)](_0x18cb53=>{const _0x1c702a=_0x567467;let _0x4c6235=0x0,_0x4bb49e;config['liquidity'][_0x1c702a(0x25d)](_0xa02e02=>{const _0x10b009=_0x1c702a;let _0x329b32=_0xa02e02['changes']['find'](_0xce468c=>_0xce468c[_0x10b009(0x293)]==_0x18cb53[_0x10b009(0x293)]);if(_0x329b32){_0x4c6235+=_0x329b32[_0x10b009(0x1a5)];if(!_0x4bb49e)_0x4bb49e=_0x329b32['price'];}}),_0x372fa2[_0x1c702a(0x22e)]({'coin':_0x18cb53[_0x1c702a(0x293)],'number':_0x4c6235,'initialprice':_0x4bb49e});});const _0x2874d3={'basecoin':_0x5bcc9d,'eur':_0x42dd6b,'usd':_0x4c8ab6,'coins':_0x372fa2};if(_0x219f33)proxyEmit(_0x567467(0x16c),_0x2874d3);startingBalances=_0x2874d3;}}function headlessMode(_0x1ffc5f){const _0x54a275=_0x11e5b5;let _0x48ab2a=_0x1ffc5f['portfolio'],_0x5eda83=_0x1ffc5f[_0x54a275(0x19d)],_0x47d62c=[];for(let _0x4b9b20 of _0x48ab2a){if(_0x4b9b20[_0x54a275(0x293)]!=config[_0x54a275(0x251)]){if(_0x4b9b20[_0x54a275(0x1ab)]>=_0x5eda83/0x64){if(_0x4b9b20[_0x54a275(0x1f2)])_0x47d62c[_0x54a275(0x22e)](_0x4b9b20);}else{if(_0x4b9b20[_0x54a275(0x1ab)]<=-_0x5eda83/0x64){if(_0x4b9b20[_0x54a275(0x1f2)])_0x47d62c[_0x54a275(0x22e)](_0x4b9b20);}}}}_0x47d62c['length']>0x0&&placeOrder(_0x47d62c);}function notifyBalance(_0x549c17){const _0x2906c5=_0x11e5b5;let _0x2fa68e=_0x549c17[_0x2906c5(0x270)],_0x1af301=_0x549c17[_0x2906c5(0x19d)],_0x539f71=[];for(let _0x36f04d of _0x2fa68e){if(_0x36f04d[_0x2906c5(0x293)]!=config['basecoin']){if(_0x36f04d[_0x2906c5(0x1ab)]>=_0x1af301/0x64){if(_0x36f04d['valid'])_0x539f71[_0x2906c5(0x22e)](_0x36f04d);}else{if(_0x36f04d['delta']<=-_0x1af301/0x64){if(_0x36f04d[_0x2906c5(0x1f2)])_0x539f71[_0x2906c5(0x22e)](_0x36f04d);}}}}if(_0x539f71['length']>0x0){let _0x577e0f=_0x539f71['map'](_0x139f10=>_0x139f10[_0x2906c5(0x293)]);_0x577e0f['sort']();let _0x4b6cd6=_0x577e0f[_0x2906c5(0x1b6)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2906c5(0x2b8),_0x2906c5(0x14c));lastCoinsToBalance=_0x4b6cd6;}}function symbolToCoin(_0x2b9236){const _0x391327=_0x11e5b5;let _0x30fe15;if(_0x2b9236[_0x391327(0x1af)]('/'+config[_0x391327(0x251)]))_0x30fe15=_0x2b9236[_0x391327(0x29b)]('/'+config[_0x391327(0x251)],'');if(_0x2b9236[_0x391327(0x1af)](config['basecoin']+'/'))_0x30fe15=_0x2b9236[_0x391327(0x29b)](config['basecoin']+'/','');return _0x30fe15;}async function unlockOrders(){const _0xad80e3=_0x11e5b5;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0xad80e3(0x1db)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4f663d=await getCoins();[currentCoins,currentCoinsAll]=_0x4f663d,validateOrdersState=_0xad80e3(0x220),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0xad80e3(0x1eb)](_0xad80e3(0x1ee));}}async function validateOrders(_0x553ab0){const _0xcae47=_0x11e5b5;if(_0x553ab0)validateOrdersState=_0x553ab0;logger[_0xcae47(0x1eb)](_0xcae47(0x131)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0xcae47(0x1b9):lockOrders==0x2?_0xcae47(0x13f):'ORDERS.UNLOCKED'));let _0x5283af=[],_0x403832=config[_0xcae47(0x24b)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xcae47(0x23d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xcae47(0x2b3)])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0xcae47(0x25d)](_0x5710ae=>{const _0x1b612a=_0xcae47;let _0x35afad=![];_0x5710ae['filled']>0x0&&(_0x35afad=!![]),_0x5283af[_0x1b612a(0x22e)](_0x35afad),_0x35afad&&config[_0x1b612a(0x24b)]!='market'&&logHistory(_0x1b612a(0x2bf),_0x1b612a(0x1dd)+_0x5710ae['symbol']+'\x20'+_0x5710ae['side']+'\x20#'+formatResult(_0x5710ae[_0x1b612a(0x1b5)],0x8)+'\x20@'+formatResult(_0x5710ae[_0x1b612a(0x24c)],0x8));}),_0x5283af[_0xcae47(0x25d)]((_0x2cf60a,_0x48d987)=>{const _0x308f28=_0xcae47;if(_0x2cf60a)lastOrders[_0x308f28(0x13a)](_0x48d987,0x1);}),persistOpenOrders(lastOrders);const _0x471c8b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0xcae47(0x210);if(validateOrdersState==_0xcae47(0x220)){validateOrdersState=_0xcae47(0x200);if(_0x5283af['includes'](![])){if(config[_0xcae47(0x24b)]==_0xcae47(0x1f5)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x5283af[_0xcae47(0x1af)](![])){}else{if(allOrdersPlaced){if(config[_0xcae47(0x24b)]==_0xcae47(0x1f5)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0xcae47(0x177))_0x5283af[_0xcae47(0x1af)](![])&&(config[_0xcae47(0x24b)]=='market'?logHistory('success',_0xcae47(0x275)+Math[_0xcae47(0x2c2)](_0x403832*validateOrderInterval/0xea60)+_0xcae47(0x172)+_0x471c8b):(await cancelOrders(),logHistory(_0xcae47(0x1b4),_0xcae47(0x221)+Math[_0xcae47(0x2c2)](_0x403832*validateOrderInterval/0xea60)+_0xcae47(0x172)+_0x471c8b))),await unlockOrders();else{if(validateOrdersState==_0xcae47(0x28f)){if(config[_0xcae47(0x24b)]!=_0xcae47(0x1f5))logHistory(_0xcae47(0x1b4),_0xcae47(0x297)+_0x471c8b);await unlockOrders();}}}}}async function cancelOrders(){const _0x2b7f89=_0x11e5b5;lastOrders[_0x2b7f89(0x25d)](async _0x22f49f=>{const _0x408908=_0x2b7f89;try{const _0x4cc8f6=await exchange['cancelOrder'](_0x22f49f[_0x408908(0x224)],_0x22f49f[_0x408908(0x201)]);}catch(_0x147008){if(_0x147008[_0x408908(0x149)]()[_0x408908(0x1af)](_0x408908(0x1b3))){}else await handleError(_0x147008,_0x408908(0x153));}});}async function initCoinResults(_0x3a9e0b){const _0x4da8c8=_0x11e5b5;_0x3a9e0b?logger[_0x4da8c8(0x1eb)](_0x4da8c8(0x24a)+_0x3a9e0b):logger[_0x4da8c8(0x1eb)](_0x4da8c8(0x1a8)),config['portfolio'][_0x4da8c8(0x25d)](_0x4c9610=>{const _0x1ebfa8=_0x4da8c8;if(!_0x4c9610[_0x1ebfa8(0x1c6)]&&_0x4c9610[_0x1ebfa8(0x293)]!=config['basecoin']){const _0x1b5b88=currentCoins[_0x1ebfa8(0x135)](_0x1d1cb6=>_0x1d1cb6[_0x1ebfa8(0x293)]==_0x4c9610['coin']),_0x31601f=global['ticker'][noslash(_0x4c9610[_0x1ebfa8(0x201)])];let _0x19ae61=_0x1b5b88?_0x1b5b88['number']:null,_0x2b33be=_0x4c9610['reverse']?0x1/_0x31601f:_0x31601f,_0x68e5d9;config[_0x1ebfa8(0x204)][_0x1ebfa8(0x25d)](_0x5a135a=>{const _0x2ff9e6=_0x1ebfa8;!_0x68e5d9&&(_0x68e5d9=_0x5a135a[_0x2ff9e6(0x28a)][_0x2ff9e6(0x135)](_0xdfdde7=>_0xdfdde7[_0x2ff9e6(0x293)]==_0x4c9610[_0x2ff9e6(0x293)]),_0x68e5d9&&(_0x19ae61=_0x68e5d9['number'],_0x2b33be=_0x68e5d9['price']));});let _0x45af90=dbCoinResults[_0x1ebfa8(0x1bd)](_0x1ebfa8(0x250))[_0x1ebfa8(0x135)]({'coin':_0x4c9610[_0x1ebfa8(0x293)]})[_0x1ebfa8(0x28d)]();if(!_0x45af90){const _0x3c8e20={'coin':_0x4c9610[_0x1ebfa8(0x293)],'number':_0x19ae61,'breakeven':_0x2b33be,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1ebfa8(0x1bd)](_0x1ebfa8(0x250))[_0x1ebfa8(0x22e)](_0x3c8e20)[_0x1ebfa8(0x277)]();}else{if(_0x3a9e0b&&_0x4c9610[_0x1ebfa8(0x293)]==_0x3a9e0b){const _0x1c06f8={'coin':_0x4c9610['coin'],'number':_0x19ae61,'breakeven':_0x2b33be,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1ebfa8(0x1bd)](_0x1ebfa8(0x250))[_0x1ebfa8(0x135)]({'coin':_0x4c9610['coin']})[_0x1ebfa8(0x27c)](_0x1c06f8)['write']();}}}});}async function updateCoinResults(_0x42914c,_0x456f04=![]){const _0x37847a=_0x11e5b5;let _0xb7a938,_0x1121a0,_0x3866c8,_0x2dd960,_0x35c618,_0x4f44e7,_0x537745=dbCoinResults['get'](_0x37847a(0x250))[_0x37847a(0x135)]({'coin':_0x42914c['coin']})[_0x37847a(0x28d)](),_0x29ea9f=![];Object[_0x37847a(0x266)](_0x537745)[_0x37847a(0x25d)](([_0x45d6fc,_0x2b5992])=>{if(_0x2b5992==null)_0x29ea9f=!![];});(!_0x537745||_0x29ea9f)&&(await initCoinResults(_0x42914c['coin']),_0x537745=dbCoinResults['get'](_0x37847a(0x250))['find']({'coin':_0x42914c['coin']})[_0x37847a(0x28d)]());_0x42914c['reverse']&&(_0x4f44e7={'filled':_0x42914c[_0x37847a(0x1b5)]*_0x42914c[_0x37847a(0x24c)],'amount':_0x42914c[_0x37847a(0x1b5)]*_0x42914c[_0x37847a(0x24c)],'side':_0x42914c[_0x37847a(0x25b)]==_0x37847a(0x22c)?_0x37847a(0x248):_0x37847a(0x22c),'price':0x1/_0x42914c['price']},_0x42914c={..._0x42914c,..._0x4f44e7});_0x456f04?_0x1121a0=_0x42914c[_0x37847a(0x25b)]==_0x37847a(0x248)?_0x537745[_0x37847a(0x1a5)]+_0x42914c[_0x37847a(0x1b5)]:_0x537745[_0x37847a(0x1a5)]-_0x42914c[_0x37847a(0x1b5)]:_0x1121a0=await getCoinNumber(_0x42914c[_0x37847a(0x293)]);if(_0x42914c['fee']&&_0x42914c['fee'][_0x37847a(0x26d)]==config[_0x37847a(0x251)])_0xb7a938=_0x42914c[_0x37847a(0x26a)][_0x37847a(0x25f)];else{if(_0x42914c[_0x37847a(0x26a)]&&_0x42914c[_0x37847a(0x26a)][_0x37847a(0x26d)]==_0x37847a(0x1c2)&&!_0x456f04)_0xb7a938=_0x42914c[_0x37847a(0x26a)][_0x37847a(0x25f)]*global[_0x37847a(0x18a)]['BNB'+config[_0x37847a(0x251)]];else _0xb7a938=defaultFee*_0x42914c[_0x37847a(0x1b5)]*_0x42914c[_0x37847a(0x24c)];}_0x42914c[_0x37847a(0x25b)]=='buy'?(_0x3866c8=_0x1121a0!=0x0?(_0x537745[_0x37847a(0x176)]*_0x537745[_0x37847a(0x1a5)]+_0x42914c[_0x37847a(0x24c)]*(_0x1121a0-_0x537745['number'])+_0xb7a938)/_0x1121a0:0x0,_0x2dd960=_0x537745[_0x37847a(0x196)]):(_0x3866c8=_0x1121a0!=0x0?(_0x537745[_0x37847a(0x176)]*_0x537745[_0x37847a(0x1a5)]-_0x42914c[_0x37847a(0x24c)]*(_0x537745['number']-_0x1121a0)+_0xb7a938)/_0x1121a0:0x0,_0x2dd960=_0x537745['realized']+(_0x42914c[_0x37847a(0x24c)]-_0x537745[_0x37847a(0x176)])*_0x42914c[_0x37847a(0x1b5)]);_0x35c618=(_0x42914c[_0x37847a(0x24c)]-_0x3866c8-_0xb7a938/_0x42914c[_0x37847a(0x1b5)])*_0x1121a0;let _0x51c02b={'coin':_0x42914c['coin'],'number':_0x1121a0,'breakeven':formatResult(_0x3866c8,0x8),'realized':formatResult(_0x2dd960,0x8),'unrealized':formatResult(_0x35c618,0x8),'fees':formatResult(_0x537745[_0x37847a(0x174)]+_0xb7a938,0x8),'sells':_0x42914c[_0x37847a(0x25b)]==_0x37847a(0x22c)?_0x537745[_0x37847a(0x260)]+0x1:_0x537745[_0x37847a(0x260)],'buys':_0x42914c[_0x37847a(0x25b)]=='buy'?_0x537745[_0x37847a(0x23f)]+0x1:_0x537745[_0x37847a(0x23f)]};dbCoinResults[_0x37847a(0x1bd)](_0x37847a(0x250))['find']({'coin':_0x42914c[_0x37847a(0x293)]})[_0x37847a(0x27c)](_0x51c02b)[_0x37847a(0x277)]();if(!_0x456f04){if(_0x42914c[_0x37847a(0x26a)]&&_0x42914c[_0x37847a(0x26a)]['currency']==_0x37847a(0x1c2)){const _0x38adaa=currentCoins[_0x37847a(0x135)](_0x355621=>_0x355621['coin']==_0x37847a(0x1c2));if(_0x38adaa){let _0x397b05=dbCoinResults[_0x37847a(0x1bd)](_0x37847a(0x250))[_0x37847a(0x135)]({'coin':_0x37847a(0x1c2)})[_0x37847a(0x28d)]();_0x51c02b={..._0x397b05,'number':_0x38adaa[_0x37847a(0x1a5)]},dbCoinResults[_0x37847a(0x1bd)](_0x37847a(0x250))[_0x37847a(0x135)]({'coin':_0x37847a(0x1c2)})[_0x37847a(0x27c)](_0x51c02b)[_0x37847a(0x277)]();}}}}async function placeOrder(_0x5dad8){const _0x16ef8d=_0x11e5b5,_0x50ea75=config[_0x16ef8d(0x24b)]=='market'?_0x16ef8d(0x1f5):_0x16ef8d(0x156);if(lockOrders==ORDERS[_0x16ef8d(0x1ae)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x16ef8d(0x220);let _0x3bd252=![];lastOrders=[];for(const _0x14c478 of _0x5dad8){let _0x17a120,_0x583db9,_0x285eb9,_0x217040,_0x7254f1,_0x1ccf1d=_0x14c478[_0x16ef8d(0x201)];try{const _0x216449=await exchange[_0x16ef8d(0x181)](_0x1ccf1d);_0x17a120=_0x14c478[_0x16ef8d(0x207)]?0x1/_0x14c478['last']:_0x14c478[_0x16ef8d(0x154)],_0x583db9=_0x216449[_0x16ef8d(0x254)],_0x285eb9=_0x216449[_0x16ef8d(0x186)];_0x14c478[_0x16ef8d(0x207)]?(_0x217040=_0x14c478[_0x16ef8d(0x25b)]==_0x16ef8d(0x248)?_0x16ef8d(0x22c):'buy',_0x7254f1=Math['abs'](_0x14c478[_0x16ef8d(0x289)])/_0x17a120):(_0x217040=_0x14c478[_0x16ef8d(0x25b)],_0x7254f1=Math[_0x16ef8d(0x290)](_0x14c478[_0x16ef8d(0x289)]));_0x50ea75=='limit'&&(config[_0x16ef8d(0x24b)]==_0x16ef8d(0x2a6)&&(_0x17a120=_0x217040==_0x16ef8d(0x248)?_0x583db9:_0x285eb9),config[_0x16ef8d(0x24b)]=='limit-low'&&(_0x17a120=_0x217040=='buy'?_0x285eb9:_0x583db9));_0x7254f1=formatResult(_0x7254f1,0x8),_0x17a120=formatResult(_0x17a120,0x8);const _0x49b813=_0x217040==_0x16ef8d(0x22c)?config[_0x16ef8d(0x27e)]?String['fromCodePoint']('0x'+config[_0x16ef8d(0x27e)])+'\x20':'':config[_0x16ef8d(0x294)]?String[_0x16ef8d(0x16d)]('0x'+config['emojibuy'])+'\x20':'',_0x18ea0e=_0x50ea75==_0x16ef8d(0x1f5)?'Market':config[_0x16ef8d(0x24b)]=='limit-high'?_0x16ef8d(0x1c3):_0x16ef8d(0x215),_0x95d26b=(Math['floor'](Math[_0x16ef8d(0x202)]()*0x35a4e900)+0x5f5e100)[_0x16ef8d(0x149)]();lastOrders[_0x16ef8d(0x22e)]({'customId':_0x95d26b,'symbol':_0x1ccf1d,'coin':_0x14c478[_0x16ef8d(0x293)],'amount':_0x7254f1,'price':_0x17a120,'side':_0x217040,'reverse':_0x14c478[_0x16ef8d(0x207)],'filled':0x0});if(_0x50ea75==_0x16ef8d(0x1f5))logHistory(_0x16ef8d(0x2bf),''+_0x49b813+_0x18ea0e+'\x20order:\x20'+_0x1ccf1d+'\x20'+_0x217040+'\x20#'+formatResult(_0x7254f1,0x8)+'\x20@'+formatResult(_0x17a120,0x8));else logHistory(_0x16ef8d(0x2bf),''+_0x49b813+_0x18ea0e+_0x16ef8d(0x15f)+_0x1ccf1d+'\x20'+_0x217040+'\x20#'+formatResult(_0x7254f1,0x8)+'\x20@'+formatResult(_0x17a120,0x8));const _0xb8bedc=await exchange[_0x16ef8d(0x1d5)](_0x1ccf1d,_0x50ea75,_0x217040,_0x7254f1,_0x17a120);logger['debug']('ID:\x20'+_0xb8bedc['id']+'\x20|\x20Custom\x20ID:\x20'+_0x95d26b);const _0x51dbd8=lastOrders[_0x16ef8d(0x1e5)]-0x1;if(_0x51dbd8>=0x0&&lastOrders[_0x51dbd8][_0x16ef8d(0x1c4)]==_0x95d26b){lastOrders[_0x51dbd8][_0x16ef8d(0x224)]=_0xb8bedc['id'];if(_0xb8bedc[_0x16ef8d(0x187)])lastOrders[_0x51dbd8][_0x16ef8d(0x187)]=_0xb8bedc['amount'];if(_0xb8bedc[_0x16ef8d(0x24c)])lastOrders[_0x51dbd8]['price']=_0xb8bedc[_0x16ef8d(0x24c)];lastOrders[_0x51dbd8][_0x16ef8d(0x26a)]=_0xb8bedc[_0x16ef8d(0x26a)];}if(config[_0x16ef8d(0x1ba)]!=0x0){let _0x6ec0d3=null;if(cooldownTracker[_0x16ef8d(0x1e5)]==config['cooldown']-0x1)_0x6ec0d3=cooldownTracker[_0x16ef8d(0x240)]();const _0x31df02=getTimeStamp();cooldownTracker[_0x16ef8d(0x22e)](_0x31df02);if(_0x6ec0d3){const _0x4fe9d5=fns[_0x16ef8d(0x1df)](new Date(_0x31df02),new Date(_0x6ec0d3));if(_0x4fe9d5<cooldownInterval){logHistory('error',_0x16ef8d(0x1a4)+config[_0x16ef8d(0x1ba)]+_0x16ef8d(0x271)+cooldownInterval/0x3c+_0x16ef8d(0x139)+cooldownPeriod/(0xe10*0x3e8)+_0x16ef8d(0x246)),coolingDown=!![];break;}}}}catch(_0x229d3d){if(_0x229d3d[_0x16ef8d(0x149)]()['includes'](_0x16ef8d(0x296)))lastOrders=lastOrders[_0x16ef8d(0x194)](_0x3c9525=>_0x3c9525[_0x16ef8d(0x201)]!=_0x1ccf1d),logHistory(_0x16ef8d(0x2bc),_0x16ef8d(0x17f)+_0x1ccf1d),_0x3bd252=!![];else{if(_0x229d3d[_0x16ef8d(0x149)]()[_0x16ef8d(0x1af)](_0x16ef8d(0x157)))lastOrders=lastOrders[_0x16ef8d(0x194)](_0x45df6a=>_0x45df6a['symbol']!=_0x1ccf1d),logHistory(_0x16ef8d(0x2bc),_0x16ef8d(0x225)+_0x1ccf1d),_0x3bd252=!![];else{if(_0x229d3d['toString']()[_0x16ef8d(0x1af)](_0x16ef8d(0x206)))lastOrders=lastOrders[_0x16ef8d(0x194)](_0x55a4f7=>_0x55a4f7[_0x16ef8d(0x201)]!=_0x1ccf1d),logHistory(_0x16ef8d(0x2bc),_0x16ef8d(0x218)+_0x1ccf1d),_0x3bd252=!![];else _0x229d3d[_0x16ef8d(0x149)]()[_0x16ef8d(0x1af)](_0x16ef8d(0x1d8))?(lastOrders=lastOrders[_0x16ef8d(0x194)](_0x27efd5=>_0x27efd5['symbol']!=_0x1ccf1d),logHistory(_0x16ef8d(0x2bc),_0x16ef8d(0x17f)+_0x1ccf1d),_0x3bd252=!![]):(lastOrders=lastOrders[_0x16ef8d(0x194)](_0x16416c=>_0x16416c[_0x16ef8d(0x201)]!=_0x1ccf1d),await handleError(_0x229d3d,_0x16ef8d(0x1d4),_0x1ccf1d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x24920e=config[_0x16ef8d(0x24b)]==_0x16ef8d(0x1f5)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x15ce24=_0x16ef8d;validateOrders(_0x15ce24(0x177));},_0x24920e);}else unlockOrders();_0x3bd252&&config[_0x16ef8d(0x17e)]&&await pauseBot(_0x16ef8d(0x13d)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x16ef8d(0x1b4),_0x16ef8d(0x274)));}else{if(coolingDown)!config[_0x16ef8d(0x17e)]&&logHistory('error',_0x16ef8d(0x2af));else lockOrders!=ORDERS[_0x16ef8d(0x1ae)]&&(!config[_0x16ef8d(0x17e)]&&(config['ordertype']==_0x16ef8d(0x1f5)?logHistory('error',_0x16ef8d(0x255)):logHistory(_0x16ef8d(0x2bc),_0x16ef8d(0x21b))));}}function persistOpenOrders(_0x1201a3){const _0x4cc84d=_0x11e5b5,_0x1cc85d={...config,'openOrders':_0x1201a3};let _0x377838=dbConfig['get'](_0x4cc84d(0x155))[_0x4cc84d(0x135)]({'botID':botID})[_0x4cc84d(0x28d)]();_0x377838&&dbConfig[_0x4cc84d(0x1bd)]('bot')[_0x4cc84d(0x135)]({'botID':botID})[_0x4cc84d(0x27c)](_0x1cc85d)[_0x4cc84d(0x277)]();}function restoreOrders(){const _0x12d612=_0x11e5b5;let _0x34443e;config[_0x12d612(0x1b8)]&&allOpenOrders['forEach'](_0x5c6256=>{const _0x5d2369=_0x12d612,_0x2dcd9c=config['openOrders'][_0x5d2369(0x135)](_0x1528db=>_0x1528db[_0x5d2369(0x224)]==_0x5c6256['id']);_0x2dcd9c&&(lastOrders[_0x5d2369(0x22e)](_0x2dcd9c),_0x34443e=_0x5c6256[_0x5d2369(0x2c1)]);});if(lastOrders[_0x12d612(0x1e5)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x12d612(0x200),allOrdersPlaced=!![];const _0xb85e57=new Date()['getTime'](),_0x2c50e4=config['ordertype']==_0x12d612(0x1f5)?validateOrderTimeout*0x3c*0x3e8:config[_0x12d612(0x23d)]*0x3c*0x3e8;if(_0x34443e+_0x2c50e4>_0xb85e57){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x34443e+_0x2c50e4-_0xb85e57);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x12ff2f=_0x11e5b5;if(!coinsLoaded){process[_0x12ff2f(0x17a)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x25c885=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x199abd='';if(config[_0x12ff2f(0x167)])_0x199abd=_0x12ff2f(0x1e4)+config['botname']+_0x12ff2f(0x1ad);else _0x199abd=_0x12ff2f(0x245)+botID+_0x12ff2f(0x1ad);const _0x4e5f96=getKPIs(_0x12ff2f(0x251)),_0x366ab4=getKPIs(_0x12ff2f(0x208),config[_0x12ff2f(0x208)]),_0x1f88c0=getKPIs(_0x12ff2f(0x1cb)),_0x31ba00=getKPIs(_0x12ff2f(0x1e2),config[_0x12ff2f(0x208)]);_0x199abd+=_0x12ff2f(0x143),_0x199abd+=_0x4e5f96[_0x12ff2f(0x21e)]+_0x12ff2f(0x1ac)+_0x4e5f96[_0x12ff2f(0x28d)]+'\x0a',_0x199abd+=_0x4e5f96['rightTxt']+':\x20'+_0x4e5f96[_0x12ff2f(0x197)]+'%\x0a',_0x199abd+=_0x366ab4[_0x12ff2f(0x21e)]+_0x12ff2f(0x1ac)+_0x366ab4[_0x12ff2f(0x28d)]+'\x0a',_0x199abd+=_0x366ab4[_0x12ff2f(0x1b2)]+':\x20'+_0x366ab4[_0x12ff2f(0x197)]+'%\x0a',_0x199abd+=_0x1f88c0['leftTxt']+':\x20'+_0x1f88c0[_0x12ff2f(0x28d)]+'\x20('+config['basecoin']+')\x0a',_0x199abd+=_0x1f88c0[_0x12ff2f(0x1b2)]+':\x20'+_0x1f88c0[_0x12ff2f(0x197)]+'%\x20('+config['basecoin']+')\x0a',_0x199abd+=_0x31ba00[_0x12ff2f(0x21e)]+':\x20'+_0x31ba00[_0x12ff2f(0x28d)]+'\x20('+config[_0x12ff2f(0x208)]+')\x0a',_0x199abd+=_0x31ba00[_0x12ff2f(0x1b2)]+':\x20'+_0x31ba00[_0x12ff2f(0x197)]+_0x12ff2f(0x136)+config[_0x12ff2f(0x208)]+')\x0a',_0x199abd+=_0x12ff2f(0x226),process[_0x12ff2f(0x17a)]({'telegrammsg':_0x199abd},_0xce52bb=>{});}async function sendPortfolioTelegram(){const _0x22758c=_0x11e5b5;if(!coinsLoaded){process['send']({'telegrammsg':_0x22758c(0x28b)},_0x5efe85=>{});return;}let _0x38fa1e='';if(config['showname'])_0x38fa1e='<b>'+config[_0x22758c(0x1ec)]+_0x22758c(0x1e6);else _0x38fa1e=_0x22758c(0x245)+botID+_0x22758c(0x1e6);_0x38fa1e+='<pre>',_0x38fa1e+='-------------------------------\x0a',_0x38fa1e+=_0x22758c(0x2be),_0x38fa1e+=_0x22758c(0x1cd),currentCoins['forEach'](_0x34cfd8=>{const _0x2b087c=_0x22758c;_0x38fa1e+=_0x34cfd8[_0x2b087c(0x293)][_0x2b087c(0x1a2)](0x7)+'|\x20'+formatPad(_0x34cfd8[_0x2b087c(0x185)],0x2,0x6)+'|\x20'+formatPad(_0x34cfd8[_0x2b087c(0x232)],0x2,0x6)+'|\x20'+formatPad(_0x34cfd8[_0x2b087c(0x1ab)]*0x64,0x2,0x6)+'\x0a';}),_0x38fa1e+=_0x22758c(0x226),process[_0x22758c(0x17a)]({'telegrammsg':_0x38fa1e},_0x5c923e=>{});}function formatPad(_0x29b1c6,_0x178472,_0x23913e){const _0x27cafc=_0x11e5b5,_0x58365b=formatResultString(_0x29b1c6,_0x178472);return _0x58365b?_0x58365b['padStart'](_0x23913e):''[_0x27cafc(0x229)](_0x23913e);}function logHistory(_0x1bb189,_0x5498c4,_0x3f9ce2=''){const _0x433337=_0x11e5b5;let _0x24492e={'time':getTimeStamp(),'type':_0x1bb189,'event':_0x5498c4};dbLogs[_0x433337(0x1bd)](_0x433337(0x183))[_0x433337(0x22e)](_0x24492e)['write']();if(_0x3f9ce2=='')_0x3f9ce2=_0x5498c4;proxyEmit(_0x433337(0x1bc),{'log':_0x24492e,'summary':_0x3f9ce2}),process[_0x433337(0x17a)]({'telegram':{..._0x24492e,'botname':config[_0x433337(0x1ec)],'showname':config[_0x433337(0x167)]}},_0x49a05e=>{}),logger[_0x433337(0x29f)](''+_0x24492e['event']);}function emitHistory(_0x2f4bfb={}){const _0x277002=_0x11e5b5;Object[_0x277002(0x20f)](_0x2f4bfb)[_0x277002(0x1e5)]==0x0&&(_0x2f4bfb={'type':[_0x277002(0x2bf),_0x277002(0x1bc)],'event':'','page':0x1});if(_0x2f4bfb['type']['includes'](_0x277002(0x1bc)))_0x2f4bfb['type']['splice'](_0x2f4bfb['type'][_0x277002(0x1c5)]('event'),0x1,_0x277002(0x2bc),_0x277002(0x2b8),'success');if(dbLogs[_0x277002(0x223)]('logs')[_0x277002(0x28d)]()){let _0x193a2a=dbLogs[_0x277002(0x1bd)]('logs')[_0x277002(0x194)](_0x3529fe=>{const _0x3b7924=_0x277002;if(_0x2f4bfb[_0x3b7924(0x191)][_0x3b7924(0x1e5)]==0x0)return![];else return _0x2f4bfb[_0x3b7924(0x191)][_0x3b7924(0x1af)](_0x3529fe[_0x3b7924(0x191)]);})[_0x277002(0x194)](_0x4ebd5e=>{const _0x557362=_0x277002;if(_0x2f4bfb['event']=='')return!![];else return _0x4ebd5e['event']['toLowerCase']()[_0x557362(0x1af)](_0x2f4bfb[_0x557362(0x1bc)][_0x557362(0x190)]());})['sortBy'](_0x277002(0x28c)),_0xfecdd=_0x193a2a[_0x277002(0x28d)]()[_0x277002(0x1e5)];_0x193a2a=_0x193a2a[_0x277002(0x207)]()['slice']((_0x2f4bfb['page']-0x1)*logPageSize,_0x2f4bfb['page']*logPageSize-0x1)[_0x277002(0x207)]()[_0x277002(0x28d)](),proxyEmit('event-history',{'logs':_0x193a2a,'total':_0xfecdd});}else proxyEmit(_0x277002(0x1e1),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1095ce){const _0x282f07=_0x11e5b5;if(dbLogs[_0x282f07(0x223)](_0x282f07(0x183))['value']()){const _0x5d512d=dbLogs[_0x282f07(0x1bd)](_0x282f07(0x183))['sortBy'](_0x282f07(0x28c))[_0x282f07(0x194)](_0x39e88f=>{const _0x186804=_0x282f07;return _0x39e88f[_0x186804(0x191)]=='order';})[_0x282f07(0x28d)]();dbLogs[_0x282f07(0x1bd)]('logs')[_0x282f07(0x180)]()[_0x282f07(0x277)](),dbLogs[_0x282f07(0x1bd)](_0x282f07(0x183))[_0x282f07(0x27c)](_0x5d512d)['write'](),emitHistory(_0x1095ce);}}async function pauseBot(_0x1c3893=''){const _0xa92dac=_0x11e5b5,_0x424c60=new Date()['getTime']();if(!lastErrorShown||_0x424c60-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x424c60;!lastBotPause?(lastBotPause=_0x424c60,consecutivePauses=0x1):(_0x424c60-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0xa92dac(0x2a1)},_0x1a9132=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xa92dac(0x236)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x1c3893)_0x1c3893+=_0xa92dac(0x1bb);logHistory(_0xa92dac(0x2bc),_0x1c3893+_0xa92dac(0x15b)+pauseBotInterval/0xea60+_0xa92dac(0x19c)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5eb7be=_0x11e5b5;process[_0x5eb7be(0x17a)]({'stop':_0x5eb7be(0x1be)},_0x114e04=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x20e92b,_0x33505d){const _0x1db187=_0x11e5b5;if(_0x20e92b['toString']()[_0x1db187(0x1af)]('API-key\x20format\x20invalid'))return logHistory('error',config[_0x1db187(0x2a2)]+_0x1db187(0x29a)),![];else{if(_0x20e92b[_0x1db187(0x149)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x1db187(0x2bc),config[_0x1db187(0x2a2)]+_0x1db187(0x1aa)),![];else{if(_0x20e92b['toString']()[_0x1db187(0x1af)](_0x1db187(0x213)))return logHistory(_0x1db187(0x2bc),config[_0x1db187(0x2a2)]+_0x1db187(0x231)),logHistory(_0x1db187(0x2bc),_0x1db187(0x267)),![];else await handleError(_0x20e92b,_0x33505d);}}}async function handleError(_0x5e5bba,_0x3ae5da,_0x5dc999=''){const _0xc49678=_0x11e5b5,_0x39aee9=config[_0xc49678(0x2a2)]||_0xc49678(0x20d);if(_0x5e5bba[_0xc49678(0x149)]()['includes'](_0xc49678(0x184)))await pauseBot(config['exchange']+_0xc49678(0x1d3));else{if(_0x5e5bba[_0xc49678(0x149)]()[_0xc49678(0x1af)]('ExchangeNotAvailable'))await pauseBot(config['exchange']+'\x20not\x20available');else{if(_0x5e5bba['toString']()[_0xc49678(0x1af)](_0xc49678(0x1ce)))await pauseBot(config[_0xc49678(0x2a2)]+'\x20not\x20responding');else{if(_0x5e5bba[_0xc49678(0x149)]()['includes'](_0xc49678(0x25a)))await pauseBot(config['exchange']+_0xc49678(0x1f8));else{if(_0x5e5bba[_0xc49678(0x149)]()['includes']('NetworkError'))logger[_0xc49678(0x1eb)](_0xc49678(0x2ab),_0x5e5bba),await pauseBot(config[_0xc49678(0x2a2)]+_0xc49678(0x189));else{if(_0x5e5bba['toString']()[_0xc49678(0x1af)](_0xc49678(0x257)))logHistory(_0xc49678(0x2bc),_0x3ae5da+_0xc49678(0x205)),logHistory(_0xc49678(0x2bc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e5bba[_0xc49678(0x149)]()[_0xc49678(0x1af)](_0xc49678(0x2b7)))logHistory(_0xc49678(0x2bc),_0x3ae5da+_0xc49678(0x1d1)),logHistory(_0xc49678(0x2bc),_0xc49678(0x264)),await killBot();else{if(_0x5e5bba[_0xc49678(0x149)]()[_0xc49678(0x1af)](_0xc49678(0x2aa)))logHistory(_0xc49678(0x2bc),_0x3ae5da+'\x20|\x20'+config[_0xc49678(0x2a2)]+_0xc49678(0x27a)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e5bba[_0xc49678(0x149)]()[_0xc49678(0x1af)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xc49678(0x2bc),_0x3ae5da+_0xc49678(0x1bb)+config[_0xc49678(0x2a2)]+_0xc49678(0x243)),logHistory(_0xc49678(0x2bc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5e5bba['toString']()[_0xc49678(0x1af)](_0xc49678(0x213)))logHistory(_0xc49678(0x2bc),_0x3ae5da+_0xc49678(0x1bb)+config[_0xc49678(0x2a2)]+_0xc49678(0x235)),logHistory(_0xc49678(0x2bc),_0xc49678(0x264)),await killBot();else _0x5e5bba[_0xc49678(0x149)]()[_0xc49678(0x1af)](_0xc49678(0x26f))?logHistory(_0xc49678(0x2bc),_0x3ae5da+_0xc49678(0x279)+_0x5dc999):(logger['full'](_0x3ae5da+_0xc49678(0x150),_0x5e5bba),await pauseBot(_0xc49678(0x263)));}}}}}}}}}}function formatResult(_0x43aed5,_0x5ba830){const _0x1f0adb=_0x11e5b5;return parseFloat(_0x43aed5[_0x1f0adb(0x216)](_0x5ba830));}function formatResultTruncate(_0x12bc14,_0x3e03e5){const _0x5bcaed=_0x11e5b5;let _0x116c7d=formatResultString(_0x12bc14,0xa),_0x416386=_0x116c7d[_0x5bcaed(0x1c5)]('.');return _0x416386!=-0x1&&(_0x116c7d=_0x116c7d[_0x5bcaed(0x222)](0x0,_0x416386+_0x3e03e5+0x1)),Number(_0x116c7d);}function formatResultString(_0x5f0d0e,_0x3a1c6c){const _0x4cff39=_0x11e5b5;let _0x3362a5;if(!(''+_0x5f0d0e)[_0x4cff39(0x1af)]('e'))_0x3362a5=+(Math[_0x4cff39(0x2c2)](_0x5f0d0e+'e+'+_0x3a1c6c)+'e-'+_0x3a1c6c);else{let _0x270407=(''+_0x5f0d0e)['split']('e'),_0x392556='';+_0x270407[0x1]+_0x3a1c6c>0x0&&(_0x392556='+'),_0x3362a5=+(Math[_0x4cff39(0x2c2)](+_0x270407[0x0]+'e'+_0x392556+(+_0x270407[0x1]+_0x3a1c6c))+'e-'+_0x3a1c6c);}return Number(_0x3362a5)[_0x4cff39(0x216)](_0x3a1c6c);}function getServerTime(){const _0x9a6be8=_0x11e5b5,_0x4d0db8=new Date();return _0x4d0db8[_0x9a6be8(0x166)]()+'/'+(_0x4d0db8[_0x9a6be8(0x29e)]()+0x1)[_0x9a6be8(0x149)]()[_0x9a6be8(0x229)](0x2,'0')+'/'+_0x4d0db8[_0x9a6be8(0x288)]()[_0x9a6be8(0x149)]()[_0x9a6be8(0x229)](0x2,'0')+'\x20'+_0x4d0db8[_0x9a6be8(0x237)]()[_0x9a6be8(0x149)]()[_0x9a6be8(0x229)](0x2,'0')+':'+_0x4d0db8[_0x9a6be8(0x2b4)]()['toString']()[_0x9a6be8(0x229)](0x2,'0')+':'+_0x4d0db8[_0x9a6be8(0x21d)]()[_0x9a6be8(0x149)]()[_0x9a6be8(0x229)](0x2,'0');}function getTimeStamp(){const _0xb638a5=_0x11e5b5,_0x29bd60=shiftedTime();return _0x29bd60['getFullYear']()+'/'+(_0x29bd60['getMonth']()+0x1)[_0xb638a5(0x149)]()[_0xb638a5(0x229)](0x2,'0')+'/'+_0x29bd60[_0xb638a5(0x288)]()[_0xb638a5(0x149)]()[_0xb638a5(0x229)](0x2,'0')+'\x20'+_0x29bd60[_0xb638a5(0x237)]()[_0xb638a5(0x149)]()[_0xb638a5(0x229)](0x2,'0')+':'+_0x29bd60[_0xb638a5(0x2b4)]()[_0xb638a5(0x149)]()['padStart'](0x2,'0')+':'+_0x29bd60[_0xb638a5(0x21d)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x1c0c17=_0x11e5b5,_0x559fad=shiftedTime();return _0x559fad['getFullYear']()+'/'+(_0x559fad[_0x1c0c17(0x29e)]()+0x1)[_0x1c0c17(0x149)]()['padStart'](0x2,'0')+'/'+_0x559fad[_0x1c0c17(0x288)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x58711a=_0x11e5b5,_0x5c4cf5=shiftedTime();return _0x5c4cf5[_0x58711a(0x237)]()[_0x58711a(0x149)]()[_0x58711a(0x229)](0x2,'0');}function sleep(_0x5e2961){return new Promise(_0x4d4463=>setTimeout(_0x4d4463,_0x5e2961));}function shiftedTime(){const _0x49ea9f=_0x11e5b5,_0x2a6c83=new Date();let _0x587774=_0x2a6c83;if(config&&config[_0x49ea9f(0x256)]!==0x0)_0x587774=fns[_0x49ea9f(0x160)](_0x2a6c83,{'hours':config[_0x49ea9f(0x256)]});return _0x587774;}function timer(_0x2b9e2e){const _0x1b1566=_0x11e5b5,_0x5aaaeb=new Date();!lasttime?console['log'](getTimeStamp()+_0x1b1566(0x287),_0x2b9e2e,_0x5aaaeb):console[_0x1b1566(0x16e)](getTimeStamp()+_0x1b1566(0x287),_0x2b9e2e,(_0x5aaaeb-lasttime)/0x3e8),lasttime=_0x5aaaeb;}