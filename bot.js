const _0x285792=_0x1c7a;(function(_0x2530c5,_0xe99062){const _0x5c0871=_0x1c7a,_0x3823a0=_0x2530c5();while(!![]){try{const _0x4f2677=-parseInt(_0x5c0871(0x129))/0x1*(parseInt(_0x5c0871(0x249))/0x2)+-parseInt(_0x5c0871(0x1b6))/0x3*(-parseInt(_0x5c0871(0x1fc))/0x4)+parseInt(_0x5c0871(0x1b2))/0x5+parseInt(_0x5c0871(0x181))/0x6*(parseInt(_0x5c0871(0x220))/0x7)+-parseInt(_0x5c0871(0x1a6))/0x8+-parseInt(_0x5c0871(0x26b))/0x9+-parseInt(_0x5c0871(0x149))/0xa*(parseInt(_0x5c0871(0x15a))/0xb);if(_0x4f2677===_0xe99062)break;else _0x3823a0['push'](_0x3823a0['shift']());}catch(_0x3746db){_0x3823a0['push'](_0x3823a0['shift']());}}}(_0x16f8,0xd2141));const _0x2732c0=function(){let _0x35d9e5=!![];return function(_0x2328a7,_0xe1132){const _0x2fec29=_0x35d9e5?function(){if(_0xe1132){const _0x3ad780=_0xe1132['apply'](_0x2328a7,arguments);return _0xe1132=null,_0x3ad780;}}:function(){};return _0x35d9e5=![],_0x2fec29;};}(),_0x5e2e03=_0x2732c0(this,function(){const _0x50e7e6=_0x1c7a;return _0x5e2e03[_0x50e7e6(0x202)]()[_0x50e7e6(0x21e)]('(((.+)+)+)+$')[_0x50e7e6(0x202)]()[_0x50e7e6(0x1c4)](_0x5e2e03)[_0x50e7e6(0x21e)](_0x50e7e6(0x269));});function _0x1c7a(_0x34a5c5,_0x153fc7){const _0x43135f=_0x16f8();return _0x1c7a=function(_0x5e2e03,_0x2732c0){_0x5e2e03=_0x5e2e03-0xef;let _0x16f81b=_0x43135f[_0x5e2e03];return _0x16f81b;},_0x1c7a(_0x34a5c5,_0x153fc7);}_0x5e2e03();'use strict';const ccxt=require(_0x285792(0x1dc)),low=require('lowdb'),FileSync=require(_0x285792(0x275)),fs=require('fs'),fns=require(_0x285792(0x208)),Crypt=require(_0x285792(0x221))['Crypt'],util=require(_0x285792(0x1d2)),argv=require(_0x285792(0x165))(process['argv'][_0x285792(0x157)](0x2))[_0x285792(0x13b)],path=require(_0x285792(0x242));let exchange;global[_0x285792(0x23d)]={},global[_0x285792(0x1e2)]={};const usdBasecoins=[_0x285792(0x1e4),_0x285792(0x1e8),_0x285792(0x212),_0x285792(0x1ee),_0x285792(0x155),_0x285792(0x288)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;function _0x16f8(){const _0x338c5f=['watchOrders','Invalid\x20symbol:\x20','distribution','***','final','remove','Cryptocom','kill','/USD','\x20-\x20bot\x20not\x20started','yargs/yargs','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','total','getCoins()','debug','forEach','Insufficient\x20funds\x20to\x20execute\x20order:\x20','restart','%\x20(','\x20not\x20responding','spot','exchange','bid','removed','split','splice','limits','placeOrder','exchange\x20reloaded','timeout','Limit\x20(low-margin)','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20has\x20a\x2024h\x20drop\x20of\x20','floor','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','closed','colorscheme','orderId','6rrHdob','\x20|\x20','Reset\x20|\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','filter','find','fees','get','password','page','watchOrders()','Invalid\x20API\x20key\x20or\x20secret\x20entered','createWriteStream','autoliquidity','coins','change24h','configuration-stored','milliseconds','timeshift','cancelOrder','OrderNotFound','success','red_yellow_blue','-performance.json','InsufficientFunds',':\x20Bot\x20','1\x20-\x20Validate\x20orders:\x20','getStartingBalances','toFixed','initial','Exchange','performance','enabled','stopExchange()','Avoiding\x20continuous\x20order\x20attempts','sort','UNLOCKED','10803280XwNafi','error','cancel','apiPassword','limit-low','exchanges','1\x20-\x20Unlock\x20orders','parseISO','limit','/backup/','DDoSProtection','event','8090780fcRBtT','starting-balance-','MIN_NOTIONAL','\x20>\x20[DEBUG]\x20','1923822AzJZfV','concat','Unfilled\x20order(s)\x20canceled\x20after\x20','data','0\x20-\x20EXECUTION:\x20','stringify','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','last','highest','Trigger:\x20','send','balances','settings','constructor','fetchClosedOrders','basecoin','netoffset','reverse','running','eur','uncaughtException','Market','\x20API\x20secret\x20is\x20invalid','defaults','fee','exchange\x20not\x20reloaded','initclient','util','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','write','getOpenOrders()','basecoinvalue','\x20>\x20','getFullYear','Resetting\x20bot\x20history','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','getSeconds','ccxt','round','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','deleteHistoryAlerts','toLowerCase','showConfig','change','excluded','USD','ExchangeNotAvailable','symbol','threshold','BUSD','starting-balances','2.5.0','leftTxt','assign','indexOf','USDT','getTime','active','configuration','-config.json','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20:\x20','ETH','\x20|\x20Custom\x20ID:\x20','AuthenticationError','sha256','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Error:\x20Invalid\x20argument\x20','padEnd','8sGAaOr','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','BNB/','string','sendMetricsTelegram','\x20blocked\x20your\x20API','toString','bb-settings.json','price','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','buys','differenceInSeconds','date-fns','market','sortBy','ID:\x20','OnMaintenance','warning','canceled','Bot\x20','emitHistory','sell','TUSD','startnumber','getCoinNumber()','amountToPrecision','recent20','2\x20-\x20Handled\x20open\x20orders','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Order(s)\x20not\x20validated\x20after\x20','freeze','\x20portfolio:</b>\x20\x0a\x0a','version','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','search','watchTrades','10434487FpUvXQ','hybrid-crypto-js','test','ExchangeError','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','<b>Bot\x20','format','Order\x20is\x20invalid:\x20','resetHistory','percentage','apiKey','privateKey','none','recreateCoinResults()','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','decrypt','valid','coin-loading-progress','Exception\x20thrown\x20in\x20','replace','log','bb-secure.json','************','startprice','LOCKED','fetchOpenOrders','Unknown\x20error\x20occured','target','ticker','breakeven','rightTxt','exec','fiat','path',',\x20must\x20be\x20a\x203\x20digit\x20number','realized','side','bot','unlinkSync','liquidity','408548wBMkyL','order','orderstatus','Manual\x20balancing\x20required','shift','add','Pausing\x20for\x20','Limit\x20(high-margin)','bot-','getPortfolio(0)','limit-high','2.3.5','2\x20-\x20handling\x20FILLED\x20order:\x20','delta','time','status','ongoing','value','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','portfolio','push','cooldown','entries','PAXG','openOrders','\x20hour','Cooldown\x20ended\x20-\x20balancing\x20resumed','parse','balancing\x20resumed','createOrder','date','placeOrder()','(((.+)+)+)+$','yyyy-MM-dd\x27T\x27HH:mm:ss','10706454TOihbg','Binance','toggleBotMode','Error\x20while\x20deleting\x20files:\x20','No\x20more\x20open\x20orders\x20-\x20','\x20not\x20available','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','net-basecoin','fetchTicker','-------------------------------\x0a','lowdb/adapters/FileSync','bots','showname','Huobi','1\x20-\x20Handle\x20open\x20orders','./logs/','startdate','fetchBalance','cancelLoading','BTC','001','timestamp','type','\x20minutes\x20-\x20','Error\x20details:','join','NetworkError','has','BNB','USDP','Loading\x20completed','remainingSymbols','<b>','\x20-\x20pausing\x20bot\x20for\x20','getDate','keys','must\x20be\x20greater\x20than\x20minimum\x20amount','close','-results.json','max','existsSync','offset','API-key\x20format\x20invalid','Resetting\x20coin\x20results:\x20','filled','ORDERS.LOCKED','min','map','function','no\x20open\x20orders','writeFile','average','ordertype','fromCodePoint','PermissionDenied','ask','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','message','./config/','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','isEqual','number','\x20network\x20error','Initializing\x20coin\x20results','getMonth','emojisell','/output-000.log','cost','buy','Huobipro','logs','coin','fetchTickers','args','Bitget','trade','customId','loadMarkets','cloneDeep','Net\x20','InvalidOrder','loading-canceled','./version.json','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20order:\x20','Order\x20filled:\x20','padStart','\x20metrics:</b>\x20\x0a\x0a','InvalidNonce','\x20orders\x20in\x20less\x20than\x20','progress','Net\x20effect','datetime','getMinutes','initTickers()','amount','\x20|\x20exchange:\x20','substring','added','Transaction\x20detection\x20unblocked','Portfolio\x20change\x20detected:\x20','<pre>','cancelOrders()','1ZHFiOg','recovery','botname','findIndex','</pre>','\x20change','headless','\x20API\x20key\x20is\x20invalid','getHours','storeFiat',':\x20timer\x20>','-events.json','includes','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','RSA-OAEP','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','set','Transaction\x20detection\x20blocked','argv','Cex','currency','yyyy/MM/dd','usd','net-fiat','open','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20exchange\x20error','onepagemode','storeConfiguration','pro','loadSymbols()','Saving\x20configuration','7865740PEkica','storeHeadless','abs','EUR','changes','\x20minutes','Invalid\x20quantity','Fee\x20discount\x20refund\x20detected:\x20','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20value','emojibuy','sendPortfolioTelegram','USDC','apiSecret','slice','length','sells','11SWDYns'];_0x16f8=function(){return _0x338c5f;};return _0x16f8();}const ORDERS=Object[_0x285792(0x21a)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x285792(0x28c)+pauseBotInterval/0xea60+_0x285792(0x14e),pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x285792(0x28c)+pauseBotIntervalLong/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x285792(0x114))[_0x285792(0x21c)],botID=process['argv'][0x2]||_0x285792(0x27f),pattern=/^[0-9]{3}$/;!pattern[_0x285792(0x222)](botID)&&(console[_0x285792(0x235)](_0x285792(0x1fa)+botID+_0x285792(0x243)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x285792(0xfc),logspath=userID?_0x285792(0x27a)+userID+'/':_0x285792(0x27a),loggerfile=fs[_0x285792(0x18d)](logspath+_0x285792(0x104),{'flags':'a'});!fs[_0x285792(0x293)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x285792(0x293)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x285792(0x251)+botID+_0x285792(0x1f2),logfile=configpath+_0x285792(0x251)+botID+'-events.json',performancefile=configpath+_0x285792(0x251)+botID+_0x285792(0x198),coinresultsfile=configpath+_0x285792(0x251)+botID+_0x285792(0x291),settingsfile=configpath+_0x285792(0x203),securefile=configpath+_0x285792(0x236),configbackuppath=configpath+_0x285792(0x1af),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x285792(0x1ce)]({'logs':[],'version':serverversion})[_0x285792(0x1d4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x285792(0x1ce)]({'data':[],'version':serverversion})[_0x285792(0x1d4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x285792(0x1ce)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x285792(0x1f8),'rsaStandard':_0x285792(0x137)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xcd6d12=>{const _0x2709d3=_0x285792;console[_0x2709d3(0x235)](_0xcd6d12);},'simple':_0x27cd2b=>{const _0x5ef152=_0x285792;console[_0x5ef152(0x235)](_0x27cd2b),loggerfile[_0x5ef152(0x1d4)](util['format'](_0x27cd2b)+'\x0a');},'full':async(_0xf68ab8,_0xe8e169='')=>{const _0x25333d=_0x285792;let _0x5f34d0;if(config['showname'])_0x5f34d0=getTimeStamp()+':\x20'+config[_0x25333d(0x12b)]+_0x25333d(0x1d7)+_0xf68ab8;else _0x5f34d0=getTimeStamp()+_0x25333d(0x19a)+botID+'\x20>\x20'+_0xf68ab8;console[_0x25333d(0x235)](_0x5f34d0),loggerfile[_0x25333d(0x1d4)](util['format'](_0x5f34d0)+'\x0a'),_0xe8e169&&(console['log'](_0xe8e169),loggerfile[_0x25333d(0x1d4)](util[_0x25333d(0x226)](_0xe8e169)+'\x0a'));},'debug':async(_0x59bcf7,_0x2172be='')=>{const _0x3897c3=_0x285792;let _0x37c941;if(config['showname'])_0x37c941=getTimeStamp()+':\x20'+config[_0x3897c3(0x12b)]+_0x3897c3(0x1b5)+_0x59bcf7;else _0x37c941=getTimeStamp()+':\x20Bot\x20'+botID+_0x3897c3(0x1b5)+_0x59bcf7;if(debugging)console[_0x3897c3(0x235)](_0x37c941);loggerfile[_0x3897c3(0x1d4)](util[_0x3897c3(0x226)](_0x37c941)+'\x0a');if(_0x2172be){if(debugging)console[_0x3897c3(0x235)](_0x2172be);loggerfile[_0x3897c3(0x1d4)](util[_0x3897c3(0x226)](_0x2172be)+'\x0a');}}};process['on'](_0x285792(0x1cb),function(_0x21b4c3){handleError(_0x21b4c3,'uncaughtException');});settings[_0x285792(0x193)]!=config[_0x285792(0x193)]&&updateTimeshift(settings[_0x285792(0x193)]);settings[_0x285792(0x144)]!=config[_0x285792(0x144)]&&updateOnepagemode(settings[_0x285792(0x144)]);process[_0x285792(0x1c1)]({'started':'running'},_0x1e2f8d=>{}),initializeProcessListeners();function proxyEmit(_0x333847,_0x24bcae=null){const _0x32c76e=_0x285792;process[_0x32c76e(0x1c1)]({'function':_0x333847,'args':_0x24bcae},_0x2ea913=>{});}function initializeProcessListeners(){process['on']('message',_0x2a5cb0=>{const _0x3da3ef=_0x1c7a;switch(Object[_0x3da3ef(0x28e)](_0x2a5cb0)[0x0]){case _0x3da3ef(0x193):_0x2a5cb0[_0x3da3ef(0x193)]!=undefined&&(settings[_0x3da3ef(0x193)]=_0x2a5cb0['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x3da3ef(0x144):_0x2a5cb0[_0x3da3ef(0x144)]!=undefined&&(settings['onepagemode']=_0x2a5cb0[_0x3da3ef(0x144)],updateOnepagemode(settings[_0x3da3ef(0x144)]));break;case'bots':_0x2a5cb0[_0x3da3ef(0x276)]!=undefined&&(bots=JSON['parse'](_0x2a5cb0[_0x3da3ef(0x276)]),proxyEmit(_0x3da3ef(0x276),bots));break;case'function':switch(_0x2a5cb0[_0x3da3ef(0xf2)]){case _0x3da3ef(0x1d1):initclient();break;case _0x3da3ef(0x26d):toggleBotMode();break;case _0x3da3ef(0x210):emitHistory(_0x2a5cb0['args']);break;case _0x3da3ef(0x1df):deleteHistoryAlerts(_0x2a5cb0[_0x3da3ef(0x10b)]);break;case'getPortfolio':getPortfolio(_0x2a5cb0[_0x3da3ef(0x10b)]);break;case _0x3da3ef(0x145):storeConfiguration(_0x2a5cb0['args']);break;case _0x3da3ef(0x14a):storeHeadless(_0x2a5cb0[_0x3da3ef(0x10b)]);break;case _0x3da3ef(0x132):storeFiat(_0x2a5cb0[_0x3da3ef(0x10b)]);break;case _0x3da3ef(0x228):resetHistory();break;case _0x3da3ef(0x19c):getStartingBalances(getNormalizedPerformance());break;case _0x3da3ef(0x176):placeOrder(_0x2a5cb0[_0x3da3ef(0x10b)]);break;case _0x3da3ef(0x27d):cancelLoading();break;case _0x3da3ef(0x1e1):showConfig();break;case _0x3da3ef(0x200):sendMetricsTelegram();break;case _0x3da3ef(0x154):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x97eea0=![]){const _0x5c0c1b=_0x285792;logger[_0x5c0c1b(0x169)](_0x5c0c1b(0x183)+(_0x97eea0?_0x5c0c1b(0x177):_0x5c0c1b(0x1d0))+_0x5c0c1b(0x122)+config[_0x5c0c1b(0x170)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x97eea0)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5c0c1b(0x22a)]!=''&&config[_0x5c0c1b(0x22a)]!=_0x5c0c1b(0x15e)){loadingProgress=0x0;if(_0x97eea0){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x426e6e){handleErrorNoStop(_0x426e6e,_0x5c0c1b(0x147));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x161898=await getCoins();[currentCoins,currentCoinsAll]=_0x161898,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x5c0c1b(0x169)](_0x5c0c1b(0x289)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5c0c1b(0x158)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x2b0da7=_0x285792;exchangeStopped=!![];try{await exchange[_0x2b0da7(0x290)]();}catch(_0x42df35){await handleError(_0x42df35,_0x2b0da7(0x1a2));}}async function reloadExchange(){const _0x19a7d7=_0x285792;while(lockOrders!=ORDERS[_0x19a7d7(0x1a5)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0xd4c555=config['exchange'],_0x29e076=config[_0x285792(0x22a)],_0x2edda2=config[_0x285792(0x156)],_0x4c28a8=config['apiPassword']){const _0x36c603=_0x285792;exchange&&await stopExchange();!supportedExchanges()[_0x36c603(0x135)](_0xd4c555)&&(logHistory(_0x36c603(0x1a7),_0x36c603(0x22f)+_0xd4c555+'\x20exchange'),killBot());const _0x5cbc14=ccxt[_0x36c603(0x146)][_0xd4c555[_0x36c603(0x1e0)]()];exchange=new _0x5cbc14({'apiKey':_0x29e076,'secret':_0x2edda2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x36c603(0x16f)}}),exchange['verbose']=!![];if(_0x4c28a8)exchange['password']=_0x4c28a8;}function setStableCoins(){const _0x6750cf=_0x285792;let _0x1734e6=config[_0x6750cf(0x1c6)]==_0x6750cf(0x1f5)?_0x6750cf(0x1f5):config[_0x6750cf(0x1c6)]==_0x6750cf(0x260)?_0x6750cf(0x260):_0x6750cf(0x27e),_0x242a54=!allSymbols[_0x6750cf(0x135)](_0x1734e6+_0x6750cf(0x163))?_0x6750cf(0x1ee):_0x6750cf(0x1e4),_0x5db911=!allSymbols[_0x6750cf(0x135)](_0x1734e6+'/EUR')?_0x242a54:'EUR';stablecoins={'eur':{'coin':''+_0x1734e6+_0x5db911,'symbol':_0x1734e6+'/'+_0x5db911},'usd':{'coin':''+_0x1734e6+_0x242a54,'symbol':_0x1734e6+'/'+_0x242a54}};}async function initwsCcxt(){const _0x4b2eff=_0x285792;initCycle++;const _0x5bc834=initCycle;let _0x1399fe=[];config[_0x4b2eff(0x25c)]['forEach'](_0xd77d36=>{const _0x24669a=_0x4b2eff;if(!_0xd77d36['excluded']&&_0xd77d36[_0x24669a(0x109)]!=config[_0x24669a(0x1c6)])_0x1399fe['push'](_0xd77d36['symbol']);});if(!_0x1399fe[_0x4b2eff(0x135)](stablecoins['eur'][_0x4b2eff(0x1e6)]))_0x1399fe[_0x4b2eff(0x25d)](stablecoins['eur']['symbol']);if(!_0x1399fe[_0x4b2eff(0x135)](stablecoins['usd'][_0x4b2eff(0x1e6)]))_0x1399fe[_0x4b2eff(0x25d)](stablecoins[_0x4b2eff(0x13f)]['symbol']);if(config[_0x4b2eff(0x170)]['startsWith'](_0x4b2eff(0x26c))&&config[_0x4b2eff(0x1c6)]!=_0x4b2eff(0x260)){if(!_0x1399fe['includes'](_0x4b2eff(0x1fe)+config[_0x4b2eff(0x1c6)]))_0x1399fe['push'](_0x4b2eff(0x1fe)+config[_0x4b2eff(0x1c6)]);}loadCoins(_0x1399fe),_0x1399fe=validateSymbols(_0x1399fe);const _0x5f62a9=async _0x440465=>{const _0x5a1721=_0x4b2eff;let _0x402d2a;try{const _0x5aaca4=await getTickers(_0x440465);Object[_0x5a1721(0x25f)](_0x5aaca4)[_0x5a1721(0x16a)](_0x38e2fd=>{const _0xfafc2d=_0x5a1721;_0x402d2a=_0x38e2fd[0x1][_0xfafc2d(0x1e6)],global[_0xfafc2d(0x23d)][noslash(_0x402d2a)]=_0x38e2fd[0x1]['last'],global[_0xfafc2d(0x1e2)][_0x402d2a]=_0x38e2fd[0x1][_0xfafc2d(0x229)];});}catch(_0x28fd8c){await handleError(_0x28fd8c,_0x5a1721(0x120),_0x402d2a);}},_0x4011f1=async _0x93988d=>{const _0x44ebe7=_0x4b2eff;while(initCycle==_0x5bc834){if(!botPaused)try{const _0x3ae2ee=await exchange[_0x44ebe7(0x21f)](_0x93988d);global[_0x44ebe7(0x23d)][noslash(_0x3ae2ee[0x0][_0x44ebe7(0x1e6)])]=_0x3ae2ee[0x0][_0x44ebe7(0x204)],await sleep(0x3e8);}catch(_0x54caaf){if(!exchangeStopped)await handleError(_0x54caaf,'watchTrades()',_0x93988d);}else await sleep(0x64);}},_0x2cc21e=async _0x548472=>{const _0x137b6b=_0x4b2eff;while(initCycle==_0x5bc834){if(!botPaused){let _0x28ffbe;try{await sleep(0x3c*0x3e8);const _0x57c605=await getTickers(_0x548472);Object[_0x137b6b(0x25f)](_0x57c605)[_0x137b6b(0x16a)](_0x3bcaad=>{const _0x1a2984=_0x137b6b;_0x28ffbe=_0x3bcaad[0x1][_0x1a2984(0x1e6)],global[_0x1a2984(0x1e2)][_0x28ffbe]=_0x3bcaad[0x1][_0x1a2984(0x229)];});}catch(_0x149ac6){if(!exchangeStopped)await handleError(_0x149ac6,'fetchTickers()',_0x28ffbe);}}else await sleep(0x64);}},_0x1bae59=async _0x5260f6=>{const _0x36fd3b=_0x4b2eff;while(initCycle==_0x5bc834){if(!botPaused)try{const _0x34c5d4=await exchange[_0x36fd3b(0x15b)](_0x5260f6);initCycle==_0x5bc834&&_0x34c5d4[_0x36fd3b(0x16a)](_0x256efd=>{updateNumberCoinsCcxt(_0x256efd);});}catch(_0x4bebe0){if(!exchangeStopped)await handleError(_0x4bebe0,_0x36fd3b(0x18b));}else await sleep(0x64);}};_0x5f62a9(_0x1399fe),_0x1399fe['forEach'](_0xe541f=>{_0x1bae59(_0xe541f);}),!wsEventsSet&&(wsEventsSet=!![]);}async function getTickers(_0x5de8a3){const _0x395f33=_0x285792;let _0x213cbb={};try{if(config[_0x395f33(0x170)]!=_0x395f33(0x161))_0x213cbb=await exchange[_0x395f33(0x10a)](_0x5de8a3);else for(const _0x120614 of _0x5de8a3){const _0x4f51b4=await exchange[_0x395f33(0x273)](_0x120614);_0x213cbb[_0x120614]=_0x4f51b4;}return _0x213cbb;}catch(_0x3d1b52){throw _0x3d1b52;}}async function watchTransactions(){const _0x28935a=_0x285792;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x7cd9b=await getCoins(),[_0x32ed0a,_0x435bba]=_0x7cd9b;let _0x5c5e7c=[];currentCoins['forEach'](_0x1a033a=>{const _0x55d8d1=_0x1c7a,_0x31183f=_0x32ed0a[_0x55d8d1(0x186)](_0x3aa3ce=>_0x3aa3ce[_0x55d8d1(0x109)]==_0x1a033a[_0x55d8d1(0x109)]);if(_0x31183f){if(_0x1a033a[_0x55d8d1(0xff)]!=_0x31183f[_0x55d8d1(0xff)]){let _0x32fe3f;if(_0x1a033a['coin']!=config[_0x55d8d1(0x1c6)]){const _0x543ae0=global[_0x55d8d1(0x23d)][noslash(_0x1a033a['symbol'])];_0x32fe3f=_0x1a033a['reverse']?0x1/_0x543ae0:_0x543ae0;}else _0x32fe3f=0x1;_0x5c5e7c[_0x55d8d1(0x25d)]({'coin':_0x1a033a['coin'],'symbol':_0x1a033a['symbol'],'price':_0x32fe3f,'number':Number(formatResult(_0x31183f['number']-_0x1a033a[_0x55d8d1(0xff)],0x8)),'basecoinvalue':_0x32fe3f*(_0x31183f[_0x55d8d1(0xff)]-_0x1a033a['number'])});}}});if(_0x5c5e7c[_0x28935a(0x158)]==0x1&&!blockTransactionDetection){if(config[_0x28935a(0x18e)]){logger['debug'](_0x28935a(0x1da)+_0x5c5e7c[0x0][_0x28935a(0x1d6)]+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x28935a(0x1bf)]==0x0||Math['abs'](_0x5c5e7c[0x0][_0x28935a(0x1d6)])>lastFees['highest']){delete _0x5c5e7c[0x0][_0x28935a(0x1e6)],delete _0x5c5e7c[0x0]['basecoinvalue'];let _0xf6e5b4=[],_0x4e8865=[...config[_0x28935a(0x248)]]||[],_0x1cb630=config['liquidity'];_0x4e8865[_0x28935a(0x1a4)]((_0xfa0e97,_0x3b05b5)=>_0xfa0e97[_0x28935a(0x267)]>_0x3b05b5[_0x28935a(0x267)]?-0x1:_0x3b05b5[_0x28935a(0x267)]>_0xfa0e97[_0x28935a(0x267)]?0x1:0x0);const _0x650756=getDate();if(_0x4e8865[0x0]){const _0x455b6e=fns[_0x28935a(0x264)](_0x4e8865[0x0][_0x28935a(0x267)],_0x28935a(0x13e),new Date()),_0x2e5571=fns[_0x28935a(0x264)](_0x650756,'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x455b6e,_0x2e5571)){_0xf6e5b4=_0x4e8865[0x0]['changes'];const _0x506010=_0xf6e5b4['find'](_0x15a621=>_0x15a621['coin']==_0x5c5e7c[0x0][_0x28935a(0x109)]);_0x506010?(_0x506010[_0x28935a(0xff)]+=_0x5c5e7c[0x0]['number'],_0x506010[_0x28935a(0xff)]==0x0&&(_0xf6e5b4=_0xf6e5b4['filter'](_0x20fade=>{const _0x14f715=_0x28935a;return _0x20fade[_0x14f715(0x109)]!=_0x5c5e7c[0x0][_0x14f715(0x109)];}))):_0xf6e5b4['push'](_0x5c5e7c[0x0]);const _0x270bb3=_0x1cb630[_0x28935a(0x186)](_0x1d914c=>_0x1d914c[_0x28935a(0x267)]==_0x650756);_0x270bb3['changes']=_0xf6e5b4;}else _0x1cb630[_0x28935a(0x25d)]({'date':_0x650756,'changes':[_0x5c5e7c[0x0]]});}const _0x8e37a6=_0x1cb630[_0x28935a(0x186)](_0x23d1fb=>_0x23d1fb[_0x28935a(0x267)]==_0x650756);if(_0x8e37a6){let _0x541189=!![];_0x8e37a6['changes'][_0x28935a(0x16a)](_0x377e27=>{const _0x4bc950=_0x28935a;if(_0x377e27[_0x4bc950(0xff)]!=0x0)_0x541189=![];}),_0x541189&&(_0x1cb630=_0x1cb630['filter'](_0x458ed1=>{const _0x5fa9f3=_0x28935a;return _0x458ed1[_0x5fa9f3(0x267)]!=_0x650756;}));}let _0x1bfc4a=dbConfig[_0x28935a(0x188)](_0x28935a(0x246))[_0x28935a(0x186)]({'botID':botID})[_0x28935a(0x25a)]();_0x1bfc4a&&(dbConfig[_0x28935a(0x188)](_0x28935a(0x246))['find']({'botID':botID})[_0x28935a(0x1ec)]({'liquidity':_0x1cb630})['write'](),config['liquidity']=_0x1cb630),logHistory('success',_0x28935a(0x126)+Math[_0x28935a(0x14b)](_0x5c5e7c[0x0][_0x28935a(0xff)])+'\x20'+_0x5c5e7c[0x0][_0x28935a(0x109)]+'\x20'+(_0x5c5e7c[0x0][_0x28935a(0xff)]>0x0?'added':_0x28935a(0x172))+_0x28935a(0x166)),proxyEmit(_0x28935a(0x1f1),emittedConfiguration());}else logger[_0x28935a(0x169)](_0x28935a(0x150)+Math['abs'](_0x5c5e7c[0x0][_0x28935a(0xff)])+'\x20'+_0x5c5e7c[0x0]['coin']+'\x20'+(_0x5c5e7c[0x0][_0x28935a(0xff)]>0x0?_0x28935a(0x124):_0x28935a(0x172)));transactionDetected=!![];}else logger[_0x28935a(0x169)](_0x28935a(0x126)+Math[_0x28935a(0x14b)](_0x5c5e7c[0x0][_0x28935a(0xff)])+'\x20'+_0x5c5e7c[0x0]['coin']+'\x20'+(_0x5c5e7c[0x0][_0x28935a(0xff)]>0x0?_0x28935a(0x124):_0x28935a(0x172))+_0x28935a(0x138));}currentCoins=_0x32ed0a,currentCoinsAll=_0x435bba,await sleep(watchTransactionsInterval);}catch(_0x2d80aa){if(!exchangeStopped)await handleError(_0x2d80aa,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x4b58d4=_0x285792;try{markets=await exchange[_0x4b58d4(0x10f)](),allSymbols=[],Object['entries'](markets)[_0x4b58d4(0x16a)](_0x4c79a4=>{const _0x44d6e9=_0x4b58d4;_0x4c79a4[0x1][_0x44d6e9(0x1f0)]&&_0x4c79a4[0x1][_0x44d6e9(0x16f)]&&allSymbols[_0x44d6e9(0x25d)](_0x4c79a4[0x0]);});}catch(_0x223855){throw _0x223855;}}function validateSymbols(_0x46cfa6){let _0x5a57f8=[];return _0x46cfa6['forEach'](_0x477142=>{const _0x4db230=_0x1c7a;!allSymbols[_0x4db230(0x135)](_0x477142)?logHistory(_0x4db230(0x1a7),_0x4db230(0x15c)+_0x477142+_0x4db230(0x184)):_0x5a57f8['push'](_0x477142);}),_0x5a57f8;}async function initclient(){const _0x1303ab=_0x285792;proxyEmit(_0x1303ab(0x1f1),emittedConfiguration()),proxyEmit(_0x1303ab(0x1ab),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1303ab(0x1c2),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3c86ba=getNormalizedPerformance();emitPerformance(_0x3c86ba),getStartingBalances(_0x3c86ba);}async function toggleBotMode(){const _0x25a667=_0x285792;let _0x5ce651=dbConfig[_0x25a667(0x188)](_0x25a667(0x246))[_0x25a667(0x186)]({'botID':botID})[_0x25a667(0x25a)]();if(_0x5ce651){const _0x11a4ff=!_0x5ce651[_0x25a667(0x12f)];dbConfig[_0x25a667(0x188)](_0x25a667(0x246))[_0x25a667(0x186)]({'botID':botID})[_0x25a667(0x1ec)]({'headless':_0x11a4ff})[_0x25a667(0x1d4)](),config['headless']=_0x11a4ff,proxyEmit(_0x25a667(0x1f1),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x12d164=_0x285792;process[_0x12d164(0x1c1)]({'updatebotmanager':!![]},_0xe58378=>{}),logger[_0x12d164(0x169)]('Headless:\x20'+config[_0x12d164(0x12f)]);}async function loadCoins(_0x5d2711){const _0x325206=_0x285792;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x312ac0,_0x5773e1=0x0,_0x39c7d3=0x0;_0x5d2711['forEach'](_0x4e7032=>{const _0x29c878=_0x1c7a;loading[_0x29c878(0x28a)][_0x29c878(0x25d)](_0x4e7032);}),loadingCanceled=![];let _0x313233=![];while(_0x312ac0!=_0x5d2711[_0x325206(0x158)]+maxLoadingProgress){_0x312ac0=loadingProgress,_0x5d2711['forEach'](_0x3f349b=>{const _0x17962f=_0x325206;if(global[_0x17962f(0x23d)][noslash(_0x3f349b)]){loading[_0x17962f(0x28a)]=loading[_0x17962f(0x28a)][_0x17962f(0x185)](_0xe96994=>_0xe96994!=_0x3f349b);if(!watchedSymbols[_0x17962f(0x135)](_0x3f349b))watchedSymbols[_0x17962f(0x25d)](_0x3f349b);_0x312ac0++;}}),loading[_0x325206(0x11c)]=Math[_0x325206(0x1dd)](_0x312ac0/(_0x5d2711[_0x325206(0x158)]+maxLoadingProgress)*0x64);loading[_0x325206(0x11c)]!=0x64&&(_0x39c7d3>0x1e*0x5&&(loading[_0x325206(0x178)]=!![],emitLoadingProgress()),_0x39c7d3>0x78*0x5&&!_0x313233&&(_0x313233=!![],logHistory(_0x325206(0x1a7),_0x325206(0x1f3)+loading[_0x325206(0x28a)][_0x325206(0x284)](',\x20')+_0x325206(0x164)),logHistory(_0x325206(0x1a7),_0x325206(0x24f)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x575d4d=_0x325206;process[_0x575d4d(0x1c1)]({'stop':_0x575d4d(0x16c)},_0x4f983c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x325206(0x1a8)]=!![],emitLoadingProgress();break;}else _0x5773e1!=loading['progress']&&(_0x5773e1=loading[_0x325206(0x11c)],emitLoadingProgress()),_0x39c7d3++,await sleep(0xc8);}_0x312ac0==_0x5d2711[_0x325206(0x158)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x325206(0x1a1),'live':'running'},_0x2e1628=>{}),_0x313233&&logHistory(_0x325206(0x196),_0x325206(0x142)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x433de3=_0x285792;proxyEmit(_0x433de3(0x1f1),{...emittedConfiguration(),'configstate':_0x433de3(0x113)});}function emitLoadingProgress(){const _0x1d5407=_0x285792;proxyEmit(_0x1d5407(0x232),loading);}async function getFiat(){const _0xa2504=_0x285792;let _0x34a13a=global[_0xa2504(0x23d)][stablecoins['eur']['coin']],_0x9c4f16=global[_0xa2504(0x23d)][stablecoins[_0xa2504(0x13f)][_0xa2504(0x109)]];return{'eur':Number(_0x34a13a),'usd':Number(_0x9c4f16)};}function capitalize(_0x3bd86b){const _0x150a92=_0x285792;return _0x3bd86b[_0x150a92(0x123)](0x0,0x1)['toUpperCase']()+_0x3bd86b[_0x150a92(0x123)](0x1);}function supportedExchanges(){const _0x2d0e3d=_0x285792,_0x2bd4d8=['ws',_0x2d0e3d(0x10a),'fetchTicker',_0x2d0e3d(0x21f),_0x2d0e3d(0x15b),_0x2d0e3d(0x194),_0x2d0e3d(0x266),'fetchOpenOrders','fetchClosedOrders','fetchBalance'];let _0x5ca562=[],_0x5da54d=[],_0x4d0289=ccxt[_0x2d0e3d(0x146)]['exchanges'];_0x4d0289[_0x2d0e3d(0x16a)](_0x52191b=>{const _0x413882=_0x2d0e3d;try{const _0x419bea=new ccxt[(_0x413882(0x146))][_0x52191b]();_0x5da54d[_0x413882(0x25d)](_0x419bea);}catch(_0x1659aa){}}),_0x5da54d['forEach'](_0x38da28=>{const _0xfdd297=_0x2d0e3d;let _0xf0d527=0x0;_0x2bd4d8[_0xfdd297(0x16a)](_0x5eb226=>{const _0x486a7f=_0xfdd297;_0x5eb226 in _0x38da28[_0x486a7f(0x286)]&&_0x38da28[_0x486a7f(0x286)][_0x5eb226]&&_0xf0d527++;}),_0xf0d527==_0x2bd4d8[_0xfdd297(0x158)]&&_0x5ca562[_0xfdd297(0x25d)](capitalize(_0x38da28['id']));});let _0x21185a=[];return _0x4d0289[_0x2d0e3d(0x16a)](_0x3c989e=>{const _0x37b331=_0x2d0e3d;_0x3c989e=capitalize(_0x3c989e);if(!_0x5ca562[_0x37b331(0x135)](_0x3c989e))_0x21185a[_0x37b331(0x25d)](_0x3c989e);}),_0x5ca562;}function setStartDatePerformance(){const _0x491885=_0x285792;if(config&&config[_0x491885(0x248)][0x0][_0x491885(0x14d)][_0x491885(0x158)]!=0x0){const _0x4aec8e=config[_0x491885(0x248)][0x0][_0x491885(0x14d)];dbPerformance[_0x491885(0x188)](_0x491885(0x1b9))[_0x491885(0x186)]({'date':config[_0x491885(0x27b)]})['assign']({'coins':_0x4aec8e})['write']();}}async function recreateCoinResults(){const _0x3d2077=_0x285792;let _0x1adde0,_0x73d87=[];try{const _0x1a549b=fns['format'](fns[_0x3d2077(0x1ad)](config[_0x3d2077(0x27b)][_0x3d2077(0x234)](/\//g,'-')),_0x3d2077(0x26a));for(const _0x3d962f of currentCoins){if(_0x3d962f[_0x3d2077(0x109)]!=config[_0x3d2077(0x1c6)]){let _0x3b9468=0x0,_0x1a46fc,_0x5949b8;_0x1adde0=await getAllEventOrders(_0x3d962f[_0x3d2077(0x1e6)]);if(_0x1adde0[_0x3d2077(0x158)]>0x0)_0x1adde0[_0x3d2077(0x16a)](_0x4be914=>{const _0x351073=_0x3d2077,_0x1ebc43=_0x3d962f['symbol'][_0x351073(0x135)](config[_0x351073(0x1c6)]+'/');_0x73d87['push']({'datetime':_0x4be914[_0x351073(0x11e)],'coin':_0x3d962f[_0x351073(0x109)],'symbol':_0x3d962f['symbol'],'side':_0x4be914[_0x351073(0x245)],'reverse':_0x1ebc43,'amount':formatResult(_0x4be914[_0x351073(0x297)],0x8),'filled':formatResult(_0x4be914[_0x351073(0x297)],0x8),'price':formatResult(_0x4be914[_0x351073(0x204)],0x8)}),_0x3b9468=_0x4be914['side']=='buy'?_0x3b9468+_0x4be914[_0x351073(0x297)]:_0x3b9468-_0x4be914[_0x351073(0x297)];if(!_0x5949b8)_0x5949b8=_0x4be914[_0x351073(0x204)];});_0x1a46fc=_0x3d962f[_0x3d2077(0xff)]-_0x3b9468;let _0x3f2819;config[_0x3d2077(0x248)][_0x3d2077(0x16a)](_0x241fae=>{const _0xf3c31d=_0x3d2077;!_0x3f2819&&(_0x3f2819=_0x241fae[_0xf3c31d(0x14d)][_0xf3c31d(0x186)](_0xc28f33=>_0xc28f33[_0xf3c31d(0x109)]==_0x3d962f['coin']),_0x3f2819&&(_0x1a46fc=_0x3f2819[_0xf3c31d(0xff)],_0x5949b8=_0x3f2819[_0xf3c31d(0x204)]));});let _0x25c324=dbCoinResults[_0x3d2077(0x188)](_0x3d2077(0x18f))['find']({'coin':_0x3d962f['coin']})[_0x3d2077(0x25a)]();_0x25c324={'coin':_0x3d962f['coin'],'number':_0x1a46fc,'breakeven':_0x5949b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3d2077(0x188)](_0x3d2077(0x18f))[_0x3d2077(0x186)]({'coin':_0x3d962f[_0x3d2077(0x109)]})[_0x3d2077(0x1ec)](_0x25c324)[_0x3d2077(0x1d4)]();}}_0x73d87[_0x3d2077(0x1a4)]((_0x205fc4,_0x28a023)=>_0x205fc4['datetime']>_0x28a023['datetime']?0x1:_0x28a023[_0x3d2077(0x11e)]>_0x205fc4[_0x3d2077(0x11e)]?-0x1:0x0);let _0x469187=0x0;for(let _0x313dae of _0x73d87){await updateCoinResults(_0x313dae,!![]);}}catch(_0x3194c2){await handleError(_0x3194c2,_0x3d2077(0x22d));}}async function getAllEventOrders(_0xb62546){const _0x4e2e1d=_0x285792;let _0x692c6f=[],_0x2a1888=dbLogs[_0x4e2e1d(0x188)](_0x4e2e1d(0x108))[_0x4e2e1d(0x185)](_0x4950b5=>{const _0x2a9a7d=_0x4e2e1d,_0xb97c2a=_0x4950b5[_0x2a9a7d(0x1b1)][_0x2a9a7d(0x1e0)]();return _0xb97c2a[_0x2a9a7d(0x135)](_0xb62546['toLowerCase']())&&(_0xb97c2a[_0x2a9a7d(0x135)](_0x2a9a7d(0x209))&&_0xb97c2a[_0x2a9a7d(0x135)](_0x2a9a7d(0x24a))||_0xb97c2a[_0x2a9a7d(0x135)](_0x2a9a7d(0x297))&&_0xb97c2a[_0x2a9a7d(0x135)]('order'));})[_0x4e2e1d(0x20a)](_0x4e2e1d(0x257))[_0x4e2e1d(0x25a)]();return _0x2a1888[_0x4e2e1d(0x16a)](_0x44a65f=>{const _0x3fe3db=_0x4e2e1d,_0x23b2e3=_0x44a65f['event'][_0x3fe3db(0x135)](_0x3fe3db(0x211))?_0x3fe3db(0x211):_0x3fe3db(0x106),_0xc7da08=/#([0-9]|\.)+\s/i,_0x2f52a1=Number(_0xc7da08['exec'](_0x44a65f['event'])[0x0][_0x3fe3db(0x157)](0x1)),_0x4f0e83=/@([0-9]|\.)+$/i,_0x57d312=Number(_0x4f0e83[_0x3fe3db(0x240)](_0x44a65f[_0x3fe3db(0x1b1)])[0x0]['slice'](0x1));_0x692c6f[_0x3fe3db(0x25d)]({'datetime':_0x44a65f[_0x3fe3db(0x257)],'coin':symbolToCoin(_0xb62546),'symbol':_0xb62546,'side':_0x23b2e3,'amount':_0x2f52a1,'filled':_0x2f52a1,'price':_0x57d312});}),_0x692c6f;}async function getAllOrders(_0x45acad,_0x4dd3bc){const _0xf6247a=_0x285792;let _0x570d76=[];while(_0x4dd3bc<exchange[_0xf6247a(0x192)]()){const _0xbb5535=0x1f4;try{const _0x3ae1c5=await exchange[_0xf6247a(0x1c5)](_0x45acad,_0x4dd3bc,_0xbb5535);if(_0x3ae1c5[_0xf6247a(0x158)])_0x4dd3bc=_0x3ae1c5[_0x3ae1c5['length']-0x1][_0xf6247a(0x280)]+0x1,_0x570d76=_0x570d76[_0xf6247a(0x1b7)](_0x3ae1c5);else break;}catch(_0x1cb47b){await handleError(_0x1cb47b,'getAllOrders()',_0x45acad);}}return _0x570d76;}async function validate24hChanges(){const _0x1ca5e1=_0x285792;for(const _0x1614c1 of currentCoins){if(_0x1614c1[_0x1ca5e1(0x109)]!=config[_0x1ca5e1(0x1c6)]){let _0x1e031b;_0x1614c1[_0x1ca5e1(0x1c8)]?_0x1e031b=formatResult((0x1/(global[_0x1ca5e1(0x1e2)][noslash(_0x1614c1[_0x1ca5e1(0x1e6)])]/0x64+0x1)-0x1)*0x64,0x3):_0x1e031b=global[_0x1ca5e1(0x1e2)][noslash(_0x1614c1[_0x1ca5e1(0x1e6)])],_0x1e031b<config['change24h']&&(logHistory('error',_0x1614c1[_0x1ca5e1(0x109)]+_0x1ca5e1(0x17b)+_0x1e031b+'%'),logHistory(_0x1ca5e1(0x1a7),_0x1ca5e1(0x218)),logHistory(_0x1ca5e1(0x1a7),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x237b26,_0x20c21d){const _0x4ae71e=_0x285792;if(!_0x237b26)return!![];const _0x34d2bc=_0x20c21d[_0x4ae71e(0x173)]('.'),_0x5cd9de=_0x237b26['split']('.');for(var _0x1cf9fb=0x0;_0x1cf9fb<_0x5cd9de[_0x4ae71e(0x158)];_0x1cf9fb++){const _0x24b1bf=~~_0x5cd9de[_0x1cf9fb],_0x32f86d=~~_0x34d2bc[_0x1cf9fb];if(_0x24b1bf<_0x32f86d)return!![];if(_0x24b1bf>_0x32f86d)return![];}return![];}async function oneTimeMigration(){const _0x1da692=_0x285792;let _0x3bb60e=dbLogs[_0x1da692(0x188)](_0x1da692(0x21c))[_0x1da692(0x25a)]();if(isOlderVersion(_0x3bb60e,'2.3.5')){let _0x4c7cf4=[];const _0x3a1f4b=dbLogs[_0x1da692(0x188)](_0x1da692(0x108))[_0x1da692(0x25a)]();_0x3a1f4b[_0x1da692(0x16a)](_0x3d00ce=>{const _0x34d0d5=_0x1da692;_0x4c7cf4[_0x34d0d5(0x25d)]({'time':_0x3d00ce[_0x34d0d5(0x257)],'type':_0x3d00ce[_0x34d0d5(0x281)],'event':_0x3d00ce[_0x34d0d5(0x1b1)]});}),dbLogs[_0x1da692(0x188)](_0x1da692(0x108))[_0x1da692(0x1ec)](_0x4c7cf4)['write']();}let _0x251d80=dbConfig['get'](_0x1da692(0x21c))[_0x1da692(0x25a)]();if(isOlderVersion(_0x251d80,_0x1da692(0x254))){let _0x29eeed=dbConfig['get'](_0x1da692(0x246))[_0x1da692(0x186)]({'botID':botID})[_0x1da692(0x25a)]();if(_0x29eeed){let _0x359dcc=[];_0x29eeed[_0x1da692(0x25c)][_0x1da692(0x16a)](_0xbcaa78=>{const _0x102cc0=_0x1da692;_0x359dcc[_0x102cc0(0x25d)]({'coin':_0xbcaa78['coin'],'number':_0xbcaa78[_0x102cc0(0x213)],'price':_0xbcaa78['startprice']}),delete _0xbcaa78[_0x102cc0(0x213)],delete _0xbcaa78[_0x102cc0(0x238)];});if(_0x359dcc['length']!==0x0)fs[_0x1da692(0xf4)](configbackuppath+(_0x1da692(0x1b3)+botID+'.json'),JSON['stringify'](_0x359dcc,null,0x4),function(_0x25f325){if(_0x25f325){}});const _0x27a514=(_0x17a68c,_0x5e1e98)=>{const _0x258ea1=_0x1da692;let _0x3da87d=[];_0x5e1e98[_0x258ea1(0x16a)](_0x32b8f7=>{const _0x38c6c2=_0x258ea1,_0x1e43a3=_0x17a68c[_0x38c6c2(0x186)](_0x31628c=>_0x31628c[_0x38c6c2(0x109)]==_0x32b8f7[_0x38c6c2(0x109)]);if(!_0x1e43a3)_0x3da87d[_0x38c6c2(0x25d)](_0x32b8f7);});let _0x35a063=[];return _0x17a68c[_0x258ea1(0x16a)](_0xa5f068=>{const _0x36c539=_0x258ea1,_0x4ffb85=_0x5e1e98[_0x36c539(0x186)](_0x51d8b2=>_0x51d8b2[_0x36c539(0x109)]==_0xa5f068[_0x36c539(0x109)]);if(!_0x4ffb85||_0x4ffb85[_0x36c539(0xff)]==0x0&&_0xa5f068[_0x36c539(0xff)]!=0x0)_0x35a063[_0x36c539(0x25d)](_0xa5f068);}),{'missingDay1':_0x3da87d,'notInDay2':_0x35a063};},_0x538fdd=dbPerformance[_0x1da692(0x188)]('data')['cloneDeep']()[_0x1da692(0x25a)]();if(_0x538fdd[_0x1da692(0x158)]>0x1){const {missingDay1:_0x465526,notInDay2:_0x392773}=_0x27a514(_0x359dcc,_0x538fdd[0x1][_0x1da692(0x18f)]);_0x359dcc=[..._0x359dcc,..._0x465526],_0x392773[_0x1da692(0x16a)](_0x2b41de=>{const _0x4428b5=_0x1da692;let _0x2e6aba=_0x359dcc[_0x4428b5(0x12c)](_0x32e95f=>_0x32e95f[_0x4428b5(0x109)]==_0x2b41de[_0x4428b5(0x109)]);_0x2e6aba!=-0x1&&_0x359dcc['splice'](_0x2e6aba,0x1);});}_0x359dcc['sort']((_0x561f3c,_0x5a5b27)=>_0x561f3c[_0x1da692(0x109)]>_0x5a5b27[_0x1da692(0x109)]?0x1:_0x5a5b27[_0x1da692(0x109)]>_0x561f3c[_0x1da692(0x109)]?-0x1:0x0);let _0x13050d=[{'date':_0x29eeed[_0x1da692(0x27b)],'changes':_0x359dcc}];_0x538fdd[_0x1da692(0x158)]>0x2&&_0x538fdd[_0x1da692(0x16a)]((_0x118568,_0x19f5ca)=>{const _0x4e6ce3=_0x1da692;if(_0x19f5ca>0x0&&_0x19f5ca<_0x538fdd[_0x4e6ce3(0x158)]-0x1){const {missingDay1:_0x2ac9a6,notInDay2:_0xbf717a}=_0x27a514(_0x538fdd[_0x19f5ca][_0x4e6ce3(0x18f)],_0x538fdd[_0x19f5ca+0x1]['coins']);_0x359dcc=[],(_0x2ac9a6['length']!=0x0||_0xbf717a[_0x4e6ce3(0x158)]!=0x0)&&(_0x2ac9a6[_0x4e6ce3(0x158)]!=0x0&&_0x359dcc[_0x4e6ce3(0x25d)](..._0x2ac9a6),_0xbf717a[_0x4e6ce3(0x158)]!=0x0&&(_0xbf717a[_0x4e6ce3(0x16a)](_0x112447=>{const _0x12e54b=_0x4e6ce3;_0x112447[_0x12e54b(0xff)]=-_0x112447['number'];}),_0x359dcc[_0x4e6ce3(0x25d)](..._0xbf717a)),_0x359dcc[_0x4e6ce3(0x1a4)]((_0x266b66,_0x5d9ec7)=>_0x266b66[_0x4e6ce3(0x109)]>_0x5d9ec7['coin']?0x1:_0x5d9ec7['coin']>_0x266b66[_0x4e6ce3(0x109)]?-0x1:0x0),_0x13050d['push']({'date':_0x538fdd[_0x19f5ca+0x1][_0x4e6ce3(0x267)],'changes':_0x359dcc}));}}),dbConfig[_0x1da692(0x188)]('bot')[_0x1da692(0x186)]({'botID':botID})[_0x1da692(0x1ec)]({..._0x29eeed,'liquidity':_0x13050d})[_0x1da692(0x1d4)]();}}if(isOlderVersion(_0x251d80,'2.6.0')){let _0x1d1edb=dbConfig[_0x1da692(0x188)]('bot')[_0x1da692(0x186)]({'botID':botID})[_0x1da692(0x25a)]();if(_0x1d1edb){const _0x36f45b=_0x1d1edb[_0x1da692(0x170)],_0x51d403=_0x36f45b?capitalize(_0x36f45b):_0x1da692(0x26c);dbConfig['get'](_0x1da692(0x246))[_0x1da692(0x186)]({'botID':botID})[_0x1da692(0x1ec)]({'exchange':_0x51d403})[_0x1da692(0x1d4)]();}}let _0x2ea493=dbPerformance[_0x1da692(0x188)](_0x1da692(0x21c))[_0x1da692(0x25a)]();isOlderVersion(_0x2ea493,_0x1da692(0x254))&&setStartDatePerformance();let _0x45bb0b=dbCoinResults[_0x1da692(0x188)]('version')[_0x1da692(0x25a)]();if(isOlderVersion(_0x45bb0b,_0x1da692(0x1ea))){let _0x3ab5ff=dbCoinResults[_0x1da692(0x188)](_0x1da692(0x18f))[_0x1da692(0x25a)]();if(_0x3ab5ff[_0x1da692(0x158)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2e25b6=_0x285792;dbConfig[_0x2e25b6(0x139)](_0x2e25b6(0x21c),serverversion)[_0x2e25b6(0x1d4)](),dbPerformance['set'](_0x2e25b6(0x21c),serverversion)['write'](),dbLogs[_0x2e25b6(0x139)](_0x2e25b6(0x21c),serverversion)[_0x2e25b6(0x1d4)](),dbCoinResults[_0x2e25b6(0x139)](_0x2e25b6(0x21c),serverversion)[_0x2e25b6(0x1d4)]();}function getConfiguration(_0x26b4ed){const _0x4138df=_0x285792;let _0x76edc8=dbConfig[_0x4138df(0x188)](_0x4138df(0x246))['find']({'botID':_0x26b4ed})[_0x4138df(0x25a)]();if(_0x76edc8){let _0x3bed40=![];typeof _0x76edc8[_0x4138df(0x1e7)]==_0x4138df(0x1ff)&&(_0x76edc8={..._0x76edc8,'threshold':Number(_0x76edc8[_0x4138df(0x1e7)])},_0x3bed40=!![]),_0x76edc8['change24h']==undefined&&(_0x76edc8={..._0x76edc8,'change24h':-0x14},_0x3bed40=!![]),_0x76edc8[_0x4138df(0x241)]==undefined&&(_0x76edc8={..._0x76edc8,'fiat':_0x4138df(0x1e4)},_0x3bed40=!![]),_0x76edc8['onepagemode']==undefined&&(_0x76edc8={..._0x76edc8,'onepagemode':settings['onepagemode']},_0x3bed40=!![]),_0x76edc8[_0x4138df(0x17f)]==undefined&&(_0x76edc8={..._0x76edc8,'colorscheme':_0x4138df(0x197)},_0x3bed40=!![]),_0x76edc8[_0x4138df(0x18e)]==undefined&&(_0x76edc8={..._0x76edc8,'autoliquidity':!![]},_0x3bed40=!![]),_0x3bed40&&(_0x76edc8={'botID':_0x76edc8['botID'],'exchange':_0x76edc8[_0x4138df(0x170)],'apiKey':_0x76edc8[_0x4138df(0x22a)],'apiSecret':_0x76edc8[_0x4138df(0x156)],'apiPassword':_0x76edc8[_0x4138df(0x1a9)],'basecoin':_0x76edc8[_0x4138df(0x1c6)],'botname':_0x76edc8[_0x4138df(0x12b)],'showname':_0x76edc8['showname'],'threshold':_0x76edc8[_0x4138df(0x1e7)],'ordertype':_0x76edc8[_0x4138df(0xf6)],'timeout':_0x76edc8['timeout'],'fiat':_0x76edc8[_0x4138df(0x241)],'startdate':_0x76edc8[_0x4138df(0x27b)],'recreate':_0x76edc8['recreate'],'timeshift':_0x76edc8['timeshift'],'onepagemode':_0x76edc8['onepagemode'],'headless':_0x76edc8['headless'],'cooldown':_0x76edc8[_0x4138df(0x25e)],'change24h':_0x76edc8['change24h'],'emojibuy':_0x76edc8['emojibuy'],'emojisell':_0x76edc8[_0x4138df(0x103)],'colorscheme':_0x76edc8[_0x4138df(0x17f)],'portfolio':_0x76edc8[_0x4138df(0x25c)],'autoliquidity':_0x76edc8[_0x4138df(0x18e)],'liquidity':_0x76edc8[_0x4138df(0x248)],'openOrders':_0x76edc8[_0x4138df(0x261)]},dbConfig['get']('bot')[_0x4138df(0x160)]()[_0x4138df(0x1d4)](),dbConfig[_0x4138df(0x188)](_0x4138df(0x246))[_0x4138df(0x25d)](_0x76edc8)[_0x4138df(0x1d4)]());}else _0x76edc8={'botID':_0x26b4ed,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4138df(0x20f)+_0x26b4ed,'showname':![],'threshold':0x3,'ordertype':_0x4138df(0x209),'timeout':0x14,'fiat':_0x4138df(0x1e4),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4138df(0x197),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x76edc8;}function emittedConfiguration(){const _0xfedd8c=_0x285792;let _0x38ea1e;if(config[_0xfedd8c(0x22a)]=='')_0x38ea1e={...config,'configstate':_0xfedd8c(0x19e)};else config['apiKey']=='***'?_0x38ea1e={...config,'configstate':_0xfedd8c(0x12a)}:(_0x38ea1e={...config,'apiKey':_0xfedd8c(0x237),'apiSecret':_0xfedd8c(0x237)},config[_0xfedd8c(0x1a9)]&&(_0x38ea1e['apiPassword']=_0xfedd8c(0x237)));return _0x38ea1e;}function getSettings(){const _0x28a18b=_0x285792;return dbSettings[_0x28a18b(0x188)](_0x28a18b(0x1c3))[_0x28a18b(0x25a)]();}function getSecure(){const _0x29e194=_0x285792;return dbSecure[_0x29e194(0x188)]('secure')['value']()||{};}function updateTimeshift(_0x1a4345){const _0x29a7d9=_0x285792;let _0x384413=dbConfig[_0x29a7d9(0x188)](_0x29a7d9(0x246))[_0x29a7d9(0x186)]({'botID':botID})['value']();_0x384413&&dbConfig[_0x29a7d9(0x188)](_0x29a7d9(0x246))['find']({'botID':botID})['assign']({'timeshift':_0x1a4345})[_0x29a7d9(0x1d4)](),config[_0x29a7d9(0x193)]=_0x1a4345,proxyEmit(_0x29a7d9(0x1f1),emittedConfiguration());}function updateOnepagemode(_0x753b48){const _0x4991e3=_0x285792;let _0x27fd85=dbConfig[_0x4991e3(0x188)](_0x4991e3(0x246))[_0x4991e3(0x186)]({'botID':botID})[_0x4991e3(0x25a)]();_0x27fd85&&dbConfig[_0x4991e3(0x188)]('bot')[_0x4991e3(0x186)]({'botID':botID})['assign']({'onepagemode':_0x753b48})['write'](),config[_0x4991e3(0x144)]=_0x753b48,proxyEmit(_0x4991e3(0x1f1),emittedConfiguration());}async function storeConfiguration(_0x156895){const _0xc09945=_0x285792;logger['debug'](_0xc09945(0x148));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xc09945(0x169)](_0xc09945(0x13a));let _0x3ac61c=![],_0x38c8ab=![],_0x4234ac=[];_0x156895[_0xc09945(0x25c)][_0xc09945(0x16a)](_0x38d0ea=>{const _0x6c3037=_0xc09945;if(!_0x38d0ea[_0x6c3037(0x1e3)]&&_0x38d0ea[_0x6c3037(0x109)]!=_0x156895[_0x6c3037(0x1c6)])_0x4234ac[_0x6c3037(0x25d)](_0x38d0ea['symbol']);}),_0x4234ac['forEach'](_0x332d30=>{const _0x4eaa89=_0xc09945,_0x2d9892=currentCoins[_0x4eaa89(0x186)](_0x238d3a=>_0x238d3a['symbol']==_0x332d30);!_0x2d9892&&(_0x3ac61c=!![]);}),currentCoins[_0xc09945(0x16a)](_0xfc8e9e=>{const _0x465bd7=_0xc09945;if(_0xfc8e9e[_0x465bd7(0x109)]!=config['basecoin']){const _0x11e5ff=_0x4234ac[_0x465bd7(0x186)](_0x22ea33=>_0x22ea33==_0xfc8e9e[_0x465bd7(0x1e6)]);!_0x11e5ff&&(_0x3ac61c=!![]);}}),_0x156895[_0xc09945(0x25c)][_0xc09945(0x16a)](_0x4e9227=>{const _0x2f0540=_0xc09945,_0x447543=config[_0x2f0540(0x25c)][_0x2f0540(0x186)](_0x45de21=>_0x45de21[_0x2f0540(0x109)]==_0x4e9227[_0x2f0540(0x109)]);if(_0x447543&&_0x4e9227['offset']!=_0x447543[_0x2f0540(0x294)])_0x38c8ab=!![];});let _0x184731=dbConfig[_0xc09945(0x188)](_0xc09945(0x246))[_0xc09945(0x186)]({'botID':botID})[_0xc09945(0x25a)]();_0x156895={..._0x156895,'apiKey':crypt['decrypt'](secure[_0xc09945(0x22b)],_0x156895[_0xc09945(0x22a)])[_0xc09945(0xfb)],'apiSecret':crypt[_0xc09945(0x230)](secure[_0xc09945(0x22b)],_0x156895[_0xc09945(0x156)])[_0xc09945(0xfb)]};_0x156895[_0xc09945(0x1a9)]&&(_0x156895[_0xc09945(0x1a9)]=crypt[_0xc09945(0x230)](secure[_0xc09945(0x22b)],_0x156895[_0xc09945(0x1a9)])[_0xc09945(0xfb)]);let _0x4270d1=![];if(_0x184731){_0x156895[_0xc09945(0x22a)]==_0xc09945(0x237)?_0x156895[_0xc09945(0x22a)]=config[_0xc09945(0x22a)]:_0x4270d1=!![];_0x156895[_0xc09945(0x156)]==_0xc09945(0x237)?_0x156895[_0xc09945(0x156)]=config['apiSecret']:_0x4270d1=!![];if(_0x156895[_0xc09945(0x1a9)]==_0xc09945(0x237))_0x156895[_0xc09945(0x1a9)]=config['apiPassword'];else{if(_0x156895[_0xc09945(0x1a9)])_0x4270d1=!![];}dbConfig[_0xc09945(0x188)](_0xc09945(0x246))[_0xc09945(0x186)]({'botID':botID})[_0xc09945(0x1ec)](_0x156895)[_0xc09945(0x1d4)]();}else dbConfig[_0xc09945(0x188)](_0xc09945(0x246))[_0xc09945(0x25d)](_0x156895)[_0xc09945(0x1d4)](),_0x4270d1=!![],process[_0xc09945(0x1c1)]({'status':_0xc09945(0x1a1),'live':_0xc09945(0x1c9)},_0x5cf7a1=>{});process[_0xc09945(0x1c1)]({'botname':_0x156895['botname']},_0xa43216=>{}),config={..._0x156895},updateBotManager(),proxyEmit(_0xc09945(0x191)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4270d1)await reset(!![]);else _0x3ac61c||_0x38c8ab?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0xc09945(0x125));}async function storeHeadless(_0x4755e1){const _0x5ee13f=_0x285792,_0x44b120={...config,'headless':_0x4755e1[_0x5ee13f(0x12f)]};let _0x420a76=dbConfig['get'](_0x5ee13f(0x246))[_0x5ee13f(0x186)]({'botID':botID})['value']();_0x420a76&&dbConfig[_0x5ee13f(0x188)](_0x5ee13f(0x246))['find']({'botID':botID})[_0x5ee13f(0x1ec)](_0x44b120)[_0x5ee13f(0x1d4)](),config={..._0x44b120},updateBotManager(),proxyEmit(_0x5ee13f(0x1f1),emittedConfiguration());}async function storeFiat(_0x225165){const _0x24a044=_0x285792,_0x813da={...config,'fiat':_0x225165};let _0x439092=dbConfig[_0x24a044(0x188)]('bot')['find']({'botID':botID})['value']();_0x439092&&dbConfig['get'](_0x24a044(0x246))[_0x24a044(0x186)]({'botID':botID})[_0x24a044(0x1ec)](_0x813da)[_0x24a044(0x1d4)](),config={..._0x813da},proxyEmit(_0x24a044(0x1f1),emittedConfiguration());}function resetHistory(){const _0xe5de9=_0x285792;logger['full'](_0xe5de9(0x1d9));try{if(fs[_0xe5de9(0x293)](path[_0xe5de9(0x284)](configpath,'bot-'+botID+_0xe5de9(0x134))))fs[_0xe5de9(0x247)](path[_0xe5de9(0x284)](configpath,_0xe5de9(0x251)+botID+_0xe5de9(0x134)));if(fs[_0xe5de9(0x293)](path[_0xe5de9(0x284)](configpath,_0xe5de9(0x251)+botID+_0xe5de9(0x198))))fs['unlinkSync'](path[_0xe5de9(0x284)](configpath,'bot-'+botID+'-performance.json'));if(fs[_0xe5de9(0x293)](path[_0xe5de9(0x284)](configpath,_0xe5de9(0x251)+botID+_0xe5de9(0x291))))fs[_0xe5de9(0x247)](path[_0xe5de9(0x284)](configpath,_0xe5de9(0x251)+botID+_0xe5de9(0x291)));}catch(_0x4bf98e){if(_0x4bf98e)logger['full'](_0xe5de9(0x26e),_0x4bf98e);}const _0x162dc2=getDate();let _0x5b7220=[];currentCoins[_0xe5de9(0x16a)](_0x57e72f=>{const _0x277fc5=_0xe5de9;_0x5b7220[_0x277fc5(0x25d)]({'coin':_0x57e72f[_0x277fc5(0x109)],'number':_0x57e72f[_0x277fc5(0xff)],'price':_0x57e72f[_0x277fc5(0x1be)]});});let _0x272a01=dbConfig[_0xe5de9(0x188)](_0xe5de9(0x246))[_0xe5de9(0x186)]({'botID':botID})[_0xe5de9(0x25a)]();_0x272a01&&(dbConfig[_0xe5de9(0x188)](_0xe5de9(0x246))[_0xe5de9(0x186)]({'botID':botID})['assign']({'liquidity':[{'date':_0x162dc2,'changes':_0x5b7220}]})[_0xe5de9(0x1d4)](),config[_0xe5de9(0x248)]=[]),process[_0xe5de9(0x1c1)]({'stop':'restart'},_0x2f48ad=>{});}function noslash(_0x1df7af){const _0x222ffa=_0x285792;return _0x1df7af[_0x222ffa(0x234)]('/','');}function updateHighestFee(_0x32abfb){const _0x462466=_0x285792;if(_0x32abfb[_0x462466(0x1c8)]){let _0x11868f={'filled':_0x32abfb[_0x462466(0x297)]*_0x32abfb[_0x462466(0x204)],'amount':_0x32abfb[_0x462466(0x297)]*_0x32abfb['price'],'side':_0x32abfb['side']=='sell'?'buy':_0x462466(0x211),'price':0x1/_0x32abfb[_0x462466(0x204)]};_0x32abfb={..._0x32abfb,..._0x11868f};}const _0x201e84=defaultFee*_0x32abfb[_0x462466(0x297)]*_0x32abfb['price'];lastFees[_0x462466(0x216)]['length']===0x14&&lastFees[_0x462466(0x216)][_0x462466(0x24d)](),lastFees['recent20']['push'](_0x201e84),lastFees[_0x462466(0x1bf)]=Math[_0x462466(0x292)](...lastFees[_0x462466(0x216)]);}async function updateNumberCoinsCcxt(_0xe95305){const _0x19d8dd=_0x285792;logger[_0x19d8dd(0x169)](_0x19d8dd(0x1ba)+_0xe95305[_0x19d8dd(0x1e6)]+'\x20|\x20'+_0xe95305[_0x19d8dd(0x258)]+_0x19d8dd(0x182)+_0xe95305[_0x19d8dd(0x297)]+'\x20/\x20'+_0xe95305['amount']+_0x19d8dd(0x182)+_0xe95305['id']);let _0xfab578=_0xe95305['status'],_0x1cef9f=![];currentCoins[_0x19d8dd(0x16a)](_0x36c6d8=>{const _0x595187=_0x19d8dd;_0x36c6d8[_0x595187(0x1e6)]==_0xe95305['symbol']&&(_0x1cef9f=!![]);});if(!_0x1cef9f)return;const _0x30dd13=currentCoins[_0x19d8dd(0x186)](_0x3a8610=>_0x3a8610['symbol']==_0xe95305[_0x19d8dd(0x1e6)]),_0x1037e9=_0x2dadd2=>{if(_0x30dd13)_0x30dd13['orderstatus']=_0x2dadd2;};if(_0xfab578==_0x19d8dd(0x141))_0x1037e9(_0x19d8dd(0x141));else{if(_0xfab578=='canceled'){_0x1037e9(_0x19d8dd(0x20e));const _0x380e05=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x380e05,await getOpenOrders(),handleOpenOrders();}else{if(_0xfab578=='closed'){let _0x23859d=![];if(lastOrders)for(const _0xa6c6c5 of lastOrders){const _0x582b2d=0xc8,_0x5b966b=0x1388;let _0x5c2a2b=0x0;while(!_0xa6c6c5[_0x19d8dd(0x180)]&&_0x5c2a2b*_0x582b2d<_0x5b966b){_0x5c2a2b++,await sleep(_0x582b2d);}if(_0x5c2a2b>0x0)logger[_0x19d8dd(0x169)]('Waited\x20'+_0x5c2a2b*_0x582b2d/0x3e8+_0x19d8dd(0x115));if(_0xa6c6c5[_0x19d8dd(0x180)]==_0xe95305['id']){logger[_0x19d8dd(0x169)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0xe95305['id']),_0x23859d=!![];if(_0xa6c6c5['filled']==0x0){logger[_0x19d8dd(0x169)](_0x19d8dd(0x255)+_0xe95305['id']);if(_0xe95305[_0x19d8dd(0xf5)])_0xa6c6c5[_0x19d8dd(0x204)]=_0xe95305[_0x19d8dd(0xf5)];else{if(_0xe95305['price'])_0xa6c6c5[_0x19d8dd(0x204)]=_0xe95305[_0x19d8dd(0x204)];else{}}_0xa6c6c5['filled']=_0xe95305[_0x19d8dd(0x297)],updateHighestFee(_0xa6c6c5),_0x1037e9(_0x19d8dd(0x297)),await validateOrders();if(lockOrders==ORDERS[_0x19d8dd(0x239)]){const _0x545e7e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x545e7e;}_0xa6c6c5[_0x19d8dd(0x1cf)]={'currency':_0xe95305[_0x19d8dd(0x1cf)]?_0xe95305[_0x19d8dd(0x1cf)]['currency']:null,'cost':_0xe95305[_0x19d8dd(0x1cf)]?_0xe95305[_0x19d8dd(0x1cf)]['cost']:0x0},await updateCoinResults(_0xa6c6c5);}}}if(!_0x23859d){logger[_0x19d8dd(0x169)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0xe95305['id']),_0x1037e9(_0x19d8dd(0x297));const _0x2346c9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2346c9,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x314423=JSON['parse'](lastBalances[_0x19d8dd(0x25c)]);const _0x2faf8d=_0x314423[_0x19d8dd(0x186)](_0x11badc=>_0x11badc['symbol']==_0xe95305['symbol']);if(_0x2faf8d){if(_0xfab578==_0x19d8dd(0x141))_0x2faf8d[_0x19d8dd(0x24b)]=_0x2faf8d[_0x19d8dd(0x24b)]=='filled'?_0x19d8dd(0x297):_0x19d8dd(0x141);else{if(_0xfab578==_0x19d8dd(0x20e))_0x2faf8d['orderstatus']=_0x2faf8d[_0x19d8dd(0x24b)]==_0x19d8dd(0x297)?_0x19d8dd(0x297):_0x19d8dd(0x20e);else _0xfab578==_0x19d8dd(0x17e)&&(_0x2faf8d['orderstatus']=_0x19d8dd(0x297));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x314423)},proxyEmit(_0x19d8dd(0x1c2),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4cb257=_0x285792;await getOpenOrders();let _0x565d80=![];currentCoins[_0x4cb257(0x16a)](_0x521ded=>{const _0x5e8875=_0x4cb257;_0x565d80=allOpenOrders[_0x5e8875(0x186)](_0x5a24ae=>_0x5a24ae['symbol']==_0x521ded[_0x5e8875(0x1e6)]),_0x521ded['orderstatus']=_0x565d80?_0x5e8875(0x141):'none';});}async function getCoins(_0x4c3f85=0x0,_0x31e9b5=!![],_0x527073=config['basecoin']){const _0xd8ebd0=_0x285792;let _0x13b6e8,_0x463e73=[],_0xa807ab=[],_0xe43e3a=[];if(_0x4c3f85)await sleep(_0x4c3f85);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x13b6e8=await exchange[_0xd8ebd0(0x27c)](),mybalances=_0x13b6e8[_0xd8ebd0(0x167)];for(const [_0x43588,_0x19f897]of Object[_0xd8ebd0(0x25f)](mybalances)){_0xe43e3a[_0xd8ebd0(0x25d)](_0x43588);}config[_0xd8ebd0(0x25c)][_0xd8ebd0(0x16a)](_0x44da8f=>{const _0x15c64e=_0xd8ebd0;!_0xe43e3a[_0x15c64e(0x135)](_0x44da8f[_0x15c64e(0x109)])&&(mybalances[_0x44da8f[_0x15c64e(0x109)]]=0x0);});if(_0x527073=='')for(const [_0x71261a,_0x48476c]of Object[_0xd8ebd0(0x25f)](mybalances)){_0x48476c!=0x0&&_0x463e73['push']({'coin':_0x71261a});}else{let _0x2ec063=![];for(const [_0x265e3a,_0x57559b]of Object[_0xd8ebd0(0x25f)](mybalances)){const _0x57d43f=config[_0xd8ebd0(0x25c)]['find'](_0x18d7f0=>_0x18d7f0[_0xd8ebd0(0x109)]==_0x265e3a),_0x2fb5b9=_0x265e3a+'/'+_0x527073,_0x5857da=_0x527073+'/'+_0x265e3a,_0x639311=currentCoins[_0xd8ebd0(0x186)](_0x32f465=>_0x32f465['coin']==_0x265e3a);_0x2ec063=![];if((_0x57559b!=0x0||_0x57d43f)&&(allSymbols[_0xd8ebd0(0x135)](_0x2fb5b9)||_0x265e3a==_0x527073))_0x463e73['push']({'coin':_0x265e3a,'symbol':_0x2fb5b9,'reverse':![],'number':Math[_0xd8ebd0(0x292)](_0x57559b+(_0x57d43f&&_0x57d43f[_0xd8ebd0(0x294)]||0x0),0x0),'orderstatus':_0x639311?_0x639311[_0xd8ebd0(0x24b)]:_0xd8ebd0(0x22c)});else{if((_0x57559b!=0x0||_0x57d43f)&&allSymbols[_0xd8ebd0(0x135)](_0x5857da))_0x463e73['push']({'coin':_0x265e3a,'symbol':_0x5857da,'reverse':!![],'number':Math[_0xd8ebd0(0x292)](_0x57559b+(_0x57d43f&&_0x57d43f[_0xd8ebd0(0x294)]||0x0),0x0),'orderstatus':_0x639311?_0x639311[_0xd8ebd0(0x24b)]:_0xd8ebd0(0x22c)});else _0x57d43f&&_0x463e73['push']({'coin':_0x57d43f[_0xd8ebd0(0x109)],'symbol':_0x57d43f[_0xd8ebd0(0x1e6)],'reverse':_0x57d43f['reverse'],'number':0x0,'orderstatus':'none'});}}}}catch(_0x4ef502){if(!_0x31e9b5)handleErrorNoStop(_0x4ef502,'getCoins()');else await handleError(_0x4ef502,_0xd8ebd0(0x168));}return _0xa807ab=cloneDeep(_0x463e73),_0x463e73=_0x463e73['filter'](_0x4cde1c=>{const _0x1af82a=_0xd8ebd0,_0x4cae58=config['portfolio'][_0x1af82a(0x186)](_0x525faa=>_0x525faa[_0x1af82a(0x109)]==_0x4cde1c[_0x1af82a(0x109)]);return _0x4cae58&&!_0x4cae58[_0x1af82a(0x1e3)];}),[_0x463e73,_0xa807ab];}async function getCoinNumber(_0x1989b9){const _0xfa4d9b=_0x285792;let _0x1bf701;try{const _0x299c4e=await exchange['fetchBalance']();_0x1bf701=_0x299c4e[_0xfa4d9b(0x167)][_0x1989b9];}catch(_0x207162){await handleError(_0x207162,_0xfa4d9b(0x214));}return _0x1bf701;}async function getOpenOrders(){const _0xd8e3aa=_0x285792;let _0x43577e;allOpenOrders=[];try{for(const _0x50dd88 of config['portfolio']){!_0x50dd88['excluded']&&_0x50dd88['coin']!=config['basecoin']&&(_0x43577e=await exchange[_0xd8e3aa(0x23a)](_0x50dd88[_0xd8e3aa(0x1e6)]),_0x43577e[_0xd8e3aa(0x158)]>0x0&&allOpenOrders[_0xd8e3aa(0x25d)](_0x43577e[0x0]));}}catch(_0x3494ab){await handleError(_0x3494ab,_0xd8e3aa(0x1d5));}}async function handleOpenOrders(_0x406273=0x0){const _0x1c0ddc=_0x285792;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x1c0ddc(0x239)]&&allOrdersPlaced&&(_0x406273==0x0?(logger[_0x1c0ddc(0x169)](_0x1c0ddc(0x279)),_0x406273++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1c0ddc(0x169)](_0x1c0ddc(0x217)),validateOrders(_0x1c0ddc(0xf3))));}async function testAPI(_0x53bed6){const _0x24ec75=_0x285792,_0x44083c=ccxt[_0x24ec75(0x146)][_0x53bed6['exchange'][_0x24ec75(0x1e0)]()],_0x5d3b7b=new _0x44083c({'apiKey':_0x53bed6[_0x24ec75(0x22a)],'secret':_0x53bed6['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x24ec75(0x16f)}});if(_0x53bed6[_0x24ec75(0x1a9)])_0x5d3b7b[_0x24ec75(0x189)]=_0x53bed6['apiPassword'];try{await _0x5d3b7b[_0x24ec75(0x10f)]();}catch(_0x4916b6){throw _0x4916b6;}}function cloneDeep(_0x40ffda){return JSON['parse'](JSON['stringify'](_0x40ffda));}async function getPortfolio(_0x487ef6){const _0x28195c=_0x285792;let _0xc1e27c=[],_0x49f724=[],_0x4e2ba7=[],_0x533cea;if(_0x487ef6[_0x28195c(0x22a)]!=='************'||_0x487ef6[_0x28195c(0x156)]!==_0x28195c(0x237)||_0x487ef6[_0x28195c(0x1a9)]&&_0x487ef6[_0x28195c(0x1a9)]!==_0x28195c(0x237)){if(config[_0x28195c(0x170)]){if(_0x487ef6[_0x28195c(0x22a)]=='************')_0x487ef6['apiKey']=config[_0x28195c(0x22a)];if(_0x487ef6[_0x28195c(0x156)]=='************')_0x487ef6['apiSecret']=config[_0x28195c(0x156)];if(_0x487ef6[_0x28195c(0x1a9)]==_0x28195c(0x237))_0x487ef6[_0x28195c(0x1a9)]=config['apiPassword'];try{await testAPI(_0x487ef6);}catch(_0x296724){if(_0x296724[_0x28195c(0x202)]()[_0x28195c(0x135)]('AuthenticationError')){logger[_0x28195c(0x169)](_0x28195c(0x18c)),proxyEmit(_0x28195c(0x25c),![]);return;}else{handleError(_0x296724,_0x28195c(0x252));return;}}}await initExchange(_0x487ef6['exchange'],_0x487ef6['apiKey'],_0x487ef6[_0x28195c(0x156)],_0x487ef6[_0x28195c(0x1a9)]);try{await loadSymbols();}catch(_0x340213){if(_0x340213[_0x28195c(0x202)]()['includes'](_0x28195c(0x1f7))){proxyEmit(_0x28195c(0x25c),![]);return;}else{handleError(_0x340213,'getPortfolio(1)');return;}}const _0xfaaed2=await getCoins(0x0,![],_0x487ef6[_0x28195c(0x1c6)]);_0x4e2ba7=cloneDeep(_0xfaaed2[0x1]);}else _0x4e2ba7=cloneDeep(currentCoinsAll);if(_0x487ef6[_0x28195c(0x1c6)]=='')proxyEmit(_0x28195c(0x25c),_0x4e2ba7);else{_0x4e2ba7['forEach'](_0x43e5ed=>{const _0x148f2b=_0x28195c;if(_0x43e5ed[_0x148f2b(0x109)]!=_0x487ef6[_0x148f2b(0x1c6)]&&allSymbols[_0x148f2b(0x135)](_0x43e5ed[_0x148f2b(0x1e6)]))_0xc1e27c[_0x148f2b(0x25d)](_0x43e5ed[_0x148f2b(0x1e6)]);});if(_0xc1e27c['length']==0x0)logHistory(_0x28195c(0x1a7),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x49f724=await getTickers(_0xc1e27c);}catch(_0x4c8e83){if(_0x4c8e83[_0x28195c(0x202)]()[_0x28195c(0x135)]('AuthenticationError')){proxyEmit(_0x28195c(0x25c),![]);return;}else handleError(_0x4c8e83,'getPortfolio(2)');}_0x4e2ba7[_0x28195c(0x16a)](_0x4a154b=>{const _0x2679e7=_0x28195c;_0x4a154b['coin']!=_0x487ef6[_0x2679e7(0x1c6)]?_0x49f724[_0x4a154b[_0x2679e7(0x1e6)]]?_0x533cea=_0x4a154b[_0x2679e7(0x1c8)]?0x1/_0x49f724[_0x4a154b[_0x2679e7(0x1e6)]][_0x2679e7(0x1be)]:_0x49f724[_0x4a154b[_0x2679e7(0x1e6)]][_0x2679e7(0x1be)]:_0x533cea=0x0:_0x533cea=0x1,_0x4a154b[_0x2679e7(0x204)]=formatResult(_0x533cea,0x8);}),proxyEmit(_0x28195c(0x25c),_0x4e2ba7);}}}function truncateTradeAmount(_0x9d42c6,_0x4e9755){const _0xca49c5=_0x285792;let _0x4ed303=0x0;try{_0x4ed303=exchange[_0xca49c5(0x215)](_0x9d42c6,_0x4e9755);}catch(_0x3743e3){}return _0x4ed303;}function checkMinimums(_0x588b35){const _0x81a6fb=_0x285792;let _0x70334c=!![];const _0x5da116=!_0x588b35['reverse']?markets[_0x588b35[_0x81a6fb(0x1e6)]][_0x81a6fb(0x175)]['amount']['min']:markets[_0x588b35[_0x81a6fb(0x1e6)]][_0x81a6fb(0x175)][_0x81a6fb(0x105)][_0x81a6fb(0xf0)],_0x505c8a=!_0x588b35['reverse']?markets[_0x588b35[_0x81a6fb(0x1e6)]][_0x81a6fb(0x175)][_0x81a6fb(0x105)]['min']:markets[_0x588b35[_0x81a6fb(0x1e6)]][_0x81a6fb(0x175)]['amount']['min'],_0x426e19=truncateTradeAmount(_0x588b35[_0x81a6fb(0x1e6)],_0x588b35[_0x81a6fb(0x10d)]);_0x588b35[_0x81a6fb(0x10d)]=_0x426e19;if(Math['abs'](_0x426e19)<_0x5da116)_0x70334c=![];if(Math[_0x81a6fb(0x14b)](_0x426e19)*_0x588b35[_0x81a6fb(0x1be)]<_0x505c8a)_0x70334c=![];if(_0x588b35[_0x81a6fb(0x245)]=='sell'){let _0x586ece=config['portfolio'][_0x81a6fb(0x186)](_0x715180=>_0x715180[_0x81a6fb(0x109)]==_0x588b35['coin']);if(_0x586ece[_0x81a6fb(0x294)]>0x0){if(Math['abs'](_0x426e19)>_0x588b35[_0x81a6fb(0xff)]-_0x586ece['offset'])_0x70334c=![];}else{if(Math['abs'](_0x426e19)>_0x588b35[_0x81a6fb(0xff)])_0x70334c=![];}}if(_0x588b35[_0x81a6fb(0x245)]==_0x81a6fb(0x106)){let _0x714617=config[_0x81a6fb(0x25c)][_0x81a6fb(0x186)](_0x4c9b05=>_0x4c9b05[_0x81a6fb(0x109)]==config[_0x81a6fb(0x1c6)]),_0x3d918a=currentCoins['find'](_0xcc3a0e=>_0xcc3a0e[_0x81a6fb(0x109)]==config[_0x81a6fb(0x1c6)]);if(_0x714617['offset']>0x0){if(Math[_0x81a6fb(0x14b)](_0x426e19)*_0x588b35['last']>_0x3d918a[_0x81a6fb(0xff)]-_0x714617['offset'])_0x70334c=![];}else{if(Math[_0x81a6fb(0x14b)](_0x426e19)*_0x588b35[_0x81a6fb(0x1be)]>_0x3d918a[_0x81a6fb(0xff)])_0x70334c=![];}}return _0x70334c;}async function getBalances(_0x3fe298=!![]){const _0x1e9906=_0x285792;let _0x2fcbcb=0x0,_0x5635ac;const _0x64dfab=config[_0x1e9906(0x1e7)];if(config[_0x1e9906(0x12f)]&&config[_0x1e9906(0x190)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2d3c3f=>{const _0x53a168=_0x1e9906;if(_0x2d3c3f[_0x53a168(0x109)]!=config[_0x53a168(0x1c6)]){let _0xffe9db=global[_0x53a168(0x23d)][noslash(_0x2d3c3f[_0x53a168(0x1e6)])];_0x5635ac=_0x2d3c3f[_0x53a168(0x1c8)]?0x1/_0xffe9db:_0xffe9db;}else _0x5635ac=0x1;let _0x417be3=_0x2d3c3f[_0x53a168(0xff)]*_0x5635ac;_0x2fcbcb+=_0x417be3,_0x2d3c3f[_0x53a168(0x1be)]=formatResult(Number(_0x5635ac),0x8),_0x2d3c3f['value']=_0x417be3;}),currentCoins[_0x1e9906(0x16a)](_0x2e2e86=>{const _0xdb89c8=_0x1e9906;let _0x2306b5=config[_0xdb89c8(0x25c)][_0xdb89c8(0x186)](_0x159244=>_0x159244['coin']==_0x2e2e86[_0xdb89c8(0x109)]),_0x3ef077=Number(_0x2306b5[_0xdb89c8(0x15d)]),_0x40d1f6=_0x2e2e86[_0xdb89c8(0x25a)]/_0x2fcbcb*0x64,_0xde8d8c=_0x3ef077*_0x2fcbcb/0x64/_0x2e2e86[_0xdb89c8(0x1be)]-_0x2e2e86[_0xdb89c8(0xff)];_0x2e2e86[_0xdb89c8(0x15d)]=formatResult(_0x40d1f6,0x3),_0x2e2e86[_0xdb89c8(0x23c)]=formatResult(_0x3ef077,0x3),_0x2e2e86[_0xdb89c8(0x10d)]=formatResult(_0xde8d8c,0x8),_0x2e2e86[_0xdb89c8(0x245)]='',_0x2e2e86[_0xdb89c8(0x231)]=![];if(_0x2e2e86[_0xdb89c8(0x109)]!=config[_0xdb89c8(0x1c6)]){if(_0x2e2e86[_0xdb89c8(0x15d)]>_0x3ef077)_0x2e2e86[_0xdb89c8(0x245)]='sell',_0x2e2e86[_0xdb89c8(0x231)]=checkMinimums(_0x2e2e86);else _0x2e2e86['distribution']<_0x3ef077&&(_0x2e2e86[_0xdb89c8(0x245)]=_0xdb89c8(0x106),_0x2e2e86[_0xdb89c8(0x231)]=checkMinimums(_0x2e2e86));}_0x2e2e86[_0xdb89c8(0x256)]=_0x2e2e86[_0xdb89c8(0x15d)]/_0x2e2e86[_0xdb89c8(0x23c)]-0x1;if(_0x2e2e86[_0xdb89c8(0x24b)]==_0xdb89c8(0x297)||_0x2e2e86[_0xdb89c8(0x24b)]==_0xdb89c8(0x20e))_0x2e2e86['orderstatus']=_0xdb89c8(0x22c);}),currentCoins[_0x1e9906(0x1a4)]((_0x1cf9d7,_0x28455d)=>_0x1cf9d7[_0x1e9906(0x256)]<_0x28455d[_0x1e9906(0x256)]?0x1:_0x28455d[_0x1e9906(0x256)]<_0x1cf9d7[_0x1e9906(0x256)]?-0x1:0x0);const _0x5a16e6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5a16e6[_0x1e9906(0x1ca)],'usd':_0x5a16e6[_0x1e9906(0x13f)],'portfolio':JSON[_0x1e9906(0x1bb)](currentCoins),'threshold':_0x64dfab},proxyEmit(_0x1e9906(0x1c2),{'serverversion':serverversion,'balances':lastBalances});if(_0x3fe298){if(config[_0x1e9906(0x12f)])headlessMode({'portfolio':currentCoins,'threshold':_0x64dfab});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x64dfab});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3ca749=getNormalizedPerformance();getStartingBalances(_0x3ca749),emitPerformance(_0x3ca749);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2e3a35=getNormalizedPerformance();emitPerformance(_0x2e3a35),getStartingBalances(_0x2e3a35),logger['debug'](_0x1e9906(0x271));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1ec638=_0x285792;if(!lastBalances)return;let _0x178548=[],_0x3a5c45,_0x47823e=JSON[_0x1ec638(0x264)](lastBalances[_0x1ec638(0x25c)]);_0x47823e[_0x1ec638(0x1a4)]((_0x8c37b4,_0x235245)=>_0x8c37b4[_0x1ec638(0x109)]>_0x235245['coin']?0x1:_0x235245[_0x1ec638(0x109)]>_0x8c37b4[_0x1ec638(0x109)]?-0x1:0x0),_0x47823e[_0x1ec638(0x16a)](_0x5b450c=>{const _0x5baebd=_0x1ec638;let _0x2e1581={'coin':_0x5b450c[_0x5baebd(0x109)],'number':_0x5b450c[_0x5baebd(0xff)],'price':_0x5b450c['last']};_0x178548[_0x5baebd(0x25d)](_0x2e1581);});const _0x3bd7c6=await getFiat();_0x3a5c45={'date':lastBalances['time'][_0x1ec638(0x173)]('\x20')[0x0],'eur':_0x3bd7c6['eur'],'usd':_0x3bd7c6['usd'],'coins':_0x178548};let _0x30476c=dbPerformance['get']('data')[_0x1ec638(0x186)]({'date':_0x3a5c45[_0x1ec638(0x267)]})[_0x1ec638(0x25a)]();_0x30476c?_0x3a5c45['date']!=config['startdate']&&dbPerformance[_0x1ec638(0x188)](_0x1ec638(0x1b9))[_0x1ec638(0x186)]({'date':_0x3a5c45[_0x1ec638(0x267)]})[_0x1ec638(0x1ec)](_0x3a5c45)[_0x1ec638(0x1d4)]():dbPerformance[_0x1ec638(0x188)](_0x1ec638(0x1b9))[_0x1ec638(0x25d)](_0x3a5c45)[_0x1ec638(0x1d4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x248743=_0x285792;let _0x4cceeb=[];if(dbPerformance[_0x248743(0x286)](_0x248743(0x1b9))[_0x248743(0x25a)]()){let _0x340324=dbPerformance['get']('data')[_0x248743(0x110)]()[_0x248743(0x185)](_0x3cd21e=>{const _0x48076a=_0x248743;if(_0x3cd21e[_0x48076a(0x18f)][_0x48076a(0x158)]==0x0)return![];else return!![];})[_0x248743(0x20a)](_0x248743(0x267))[_0x248743(0x25a)](),_0x2bc5d9=[...config['liquidity']];_0x2bc5d9[_0x248743(0x1a4)]((_0x238810,_0x1cb99a)=>_0x238810['date']>_0x1cb99a[_0x248743(0x267)]?-0x1:_0x1cb99a['date']>_0x238810[_0x248743(0x267)]?0x1:0x0);let _0x5894e2=0x1,_0x19a907=[],_0x5086d4=0x0;_0x340324[_0x248743(0x157)]()[_0x248743(0x1c8)]()[_0x248743(0x16a)]((_0x191e81,_0x1a273f)=>{const _0x4846ef=_0x248743;if(_0x2bc5d9[_0x5086d4]){if(_0x340324[_0x340324[_0x4846ef(0x158)]-_0x1a273f]&&_0x2bc5d9[_0x5086d4][_0x4846ef(0x267)]==_0x340324[_0x340324['length']-_0x1a273f]['date']){if(_0x1a273f<_0x340324[_0x4846ef(0x158)]){let _0x575204=0x0,_0x2f2166=0x0;_0x340324[_0x340324[_0x4846ef(0x158)]-_0x1a273f][_0x4846ef(0x18f)][_0x4846ef(0x16a)](_0x35886c=>{const _0x4f170f=_0x4846ef;_0x2f2166+=_0x35886c[_0x4f170f(0xff)]*_0x35886c[_0x4f170f(0x204)];}),_0x2bc5d9[_0x5086d4][_0x4846ef(0x14d)][_0x4846ef(0x16a)](_0x3545ad=>{const _0x1f634e=_0x4846ef;_0x575204+=_0x3545ad['number']*_0x3545ad[_0x1f634e(0x204)];}),_0x5894e2*=_0x575204/(_0x2f2166-_0x575204)+0x1;}_0x5086d4++;}}let _0x51d4bf=0x0;_0x191e81[_0x4846ef(0x18f)][_0x4846ef(0x16a)](_0x2ae38c=>{const _0x9815f7=_0x4846ef;_0x51d4bf+=_0x2ae38c['number']*_0x2ae38c[_0x9815f7(0x204)];}),_0x19a907[_0x340324['length']-_0x1a273f-0x1]=_0x51d4bf*(_0x5894e2-0x1);});let _0x17da3d=[];_0x2bc5d9=[...config[_0x248743(0x248)]]||[];let _0x2289d5=0x0;_0x5086d4=0x0,_0x340324['forEach']((_0x18e3f7,_0x592fdc)=>{const _0x25dd07=_0x248743;if(_0x2bc5d9[_0x5086d4]){const _0x395053=fns['parse'](_0x2bc5d9[_0x5086d4][_0x25dd07(0x267)],_0x25dd07(0x13e),new Date()),_0x2b0d92=fns[_0x25dd07(0x264)](_0x18e3f7['date'],_0x25dd07(0x13e),new Date());if(fns[_0x25dd07(0xfe)](_0x395053,_0x2b0d92)){let _0x2f0675=0x0;_0x2bc5d9[_0x5086d4][_0x25dd07(0x14d)][_0x25dd07(0x16a)](_0x482962=>{const _0x408e0f=_0x25dd07;!_0x17da3d[_0x482962[_0x408e0f(0x109)]]?_0x17da3d[_0x482962[_0x408e0f(0x109)]]=_0x482962['number']:(_0x2f0675=_0x17da3d[_0x482962[_0x408e0f(0x109)]],_0x17da3d[_0x482962[_0x408e0f(0x109)]]+=_0x482962[_0x408e0f(0xff)]);const _0x3f8768=_0x18e3f7[_0x408e0f(0x18f)][_0x408e0f(0x186)](_0xcd2e56=>_0xcd2e56[_0x408e0f(0x109)]==_0x482962[_0x408e0f(0x109)]);(!_0x3f8768||_0x3f8768[_0x408e0f(0xff)]==0x0)&&(_0x2289d5+=(-_0x482962[_0x408e0f(0xff)]-_0x2f0675)*_0x482962[_0x408e0f(0x204)]);}),_0x5086d4++;}}_0x18e3f7['coins'][_0x25dd07(0x16a)]((_0x2c35bd,_0x293565)=>{const _0x342a85=_0x25dd07;_0x17da3d[_0x2c35bd[_0x342a85(0x109)]]&&(_0x2c35bd[_0x342a85(0x19e)]=_0x17da3d[_0x2c35bd[_0x342a85(0x109)]]);}),_0x4cceeb['push']({'date':_0x18e3f7[_0x25dd07(0x267)],'eur':_0x18e3f7[_0x25dd07(0x1ca)],'usd':_0x18e3f7[_0x25dd07(0x13f)],'offset':_0x19a907[_0x592fdc],'netoffset':_0x2289d5,'coins':_0x18e3f7[_0x25dd07(0x18f)]});});}return _0x4cceeb;}function emitPerformance(_0x2be849){const _0x2a9b76=_0x285792;_0x2be849[_0x2a9b76(0x158)]!==0x0?(proxyEmit('performance',_0x2be849),lastPerformanceEmitted=getDate()):proxyEmit(_0x2a9b76(0x1a0),[]);}function getPerf(_0xa7bb9,_0x5db66b){const _0x57ea16=_0x285792;let _0x2b8a36=0x0,_0x38e5d4=0x0,_0x5f2cfd=0x0;_0xa7bb9['coins']['forEach'](_0x254063=>{const _0x26e397=_0x1c7a;_0x2b8a36+=_0x254063['number']*_0x254063[_0x26e397(0x204)];});_0x5db66b&&(_0x2b8a36+=_0xa7bb9['offset']);if(config['basecoin']===_0x57ea16(0x27e)||config['basecoin']===_0x57ea16(0x1f5)||config['basecoin']===_0x57ea16(0x260))_0x38e5d4=_0x2b8a36*_0xa7bb9['eur'],_0x5f2cfd=_0x2b8a36*_0xa7bb9[_0x57ea16(0x13f)];else{if(usdBasecoins[_0x57ea16(0x135)](config[_0x57ea16(0x1c6)]))_0x38e5d4=_0x2b8a36*_0xa7bb9[_0x57ea16(0x1ca)]/_0xa7bb9[_0x57ea16(0x13f)],_0x5f2cfd=_0x2b8a36;else config[_0x57ea16(0x1c6)]===_0x57ea16(0x14c)&&(_0x38e5d4=_0x2b8a36,_0x5f2cfd=_0x2b8a36*_0xa7bb9[_0x57ea16(0x13f)]/_0xa7bb9[_0x57ea16(0x1ca)]);}return[_0x2b8a36,_0x38e5d4,_0x5f2cfd];}function getKPIs(_0x573720,_0x55ddfc=_0x285792(0x14c)){const _0x4ecb76=_0x285792,_0x1fa732=config[_0x4ecb76(0x1c6)],_0x380499=lastBalances,_0x12432a=currentCoins,_0x244ff9=getNormalizedPerformance(),_0x2506ee=_0x573720===_0x4ecb76(0x1c6)?_0x1fa732:_0x573720==='fiat'||_0x573720===_0x4ecb76(0x140)?_0x55ddfc:_0x4ecb76(0x111)+_0x1fa732,_0x128bd0=_0x573720===_0x4ecb76(0x272)?_0x4ecb76(0x11d):_0x573720===_0x4ecb76(0x140)?'Net\x20effect':_0x2506ee+_0x4ecb76(0x152),_0x1555e5=_0x573720===_0x4ecb76(0x272)||_0x573720===_0x4ecb76(0x140)?_0x4ecb76(0x11d):_0x2506ee+_0x4ecb76(0x12e);let _0x21b06d=0x0;_0x12432a['forEach'](_0x2ba0d4=>{const _0x2d04db=_0x4ecb76;_0x21b06d+=_0x2ba0d4['number']*_0x2ba0d4[_0x2d04db(0x1be)];});if(_0x573720===_0x4ecb76(0x241)||_0x573720===_0x4ecb76(0x140)){if(_0x1fa732==='BTC'||_0x1fa732===_0x4ecb76(0x1f5)||_0x1fa732===_0x4ecb76(0x260))_0x21b06d=_0x21b06d*(_0x55ddfc==='EUR'?_0x380499[_0x4ecb76(0x1ca)]:_0x380499[_0x4ecb76(0x13f)]);else{if(usdBasecoins[_0x4ecb76(0x135)](_0x1fa732))_0x21b06d=_0x21b06d*(_0x55ddfc===_0x4ecb76(0x14c)?_0x380499[_0x4ecb76(0x1ca)]/_0x380499['usd']:0x1);else _0x1fa732===_0x4ecb76(0x14c)&&(_0x21b06d=_0x21b06d*(_0x55ddfc===_0x4ecb76(0x14c)?0x1:_0x380499[_0x4ecb76(0x13f)]/_0x380499[_0x4ecb76(0x1ca)]));}}let _0x1b260d;if(_0x21b06d!==0x0){if(_0x573720===_0x4ecb76(0x1c6))_0x1b260d=(_0x21b06d/startingBalances['basecoin']-0x1)*0x64;else{if(_0x55ddfc===_0x4ecb76(0x14c))_0x1b260d=(_0x21b06d/startingBalances[_0x4ecb76(0x1ca)]-0x1)*0x64;else _0x1b260d=(_0x21b06d/startingBalances[_0x4ecb76(0x13f)]-0x1)*0x64;}let _0x332bc9=0x0;if(startingBalances['coins'])_0x12432a[_0x4ecb76(0x16a)](_0xbaac17=>{const _0x6ff261=_0x4ecb76;let _0x58876b=startingBalances[_0x6ff261(0x18f)][_0x6ff261(0x186)](_0x357c65=>_0x357c65['coin']===_0xbaac17['coin']);if(_0x58876b&&_0x58876b['coin']&&_0xbaac17[_0x6ff261(0xff)]!==0x0)_0x332bc9+=_0x58876b[_0x6ff261(0xff)]*_0xbaac17['last'];});let _0x2a065a=0x0;if(_0x244ff9[_0x4ecb76(0x158)]!==0x0){let _0x37fe9a=_0x244ff9[_0x244ff9[_0x4ecb76(0x158)]-0x1];_0x2a065a=_0x37fe9a[_0x4ecb76(0x1c7)];}_0x332bc9-=_0x2a065a;_0x573720===_0x4ecb76(0x272)&&(_0x1b260d=(_0x21b06d-_0x332bc9)/startingBalances[_0x4ecb76(0x1c6)]*0x64,_0x21b06d=_0x21b06d-_0x332bc9);if(_0x573720===_0x4ecb76(0x140)){let _0xb61014=_0x55ddfc===_0x4ecb76(0x14c)?startingBalances[_0x4ecb76(0x1ca)]:startingBalances['usd'];if(_0x1fa732===_0x4ecb76(0x27e)||_0x1fa732===_0x4ecb76(0x1f5)||_0x1fa732===_0x4ecb76(0x260))_0x332bc9=_0x55ddfc===_0x4ecb76(0x14c)?_0x332bc9*_0x380499['eur']:_0x332bc9*_0x380499[_0x4ecb76(0x13f)];else{if(usdBasecoins[_0x4ecb76(0x135)](_0x1fa732))_0x332bc9=_0x55ddfc==='EUR'?_0x332bc9*_0x380499['eur']/_0x380499[_0x4ecb76(0x13f)]:_0x332bc9;else _0x1fa732===_0x4ecb76(0x14c)&&(_0x332bc9=_0x55ddfc==='EUR'?_0x332bc9:_0x332bc9*_0x380499[_0x4ecb76(0x13f)]/_0x380499['eur']);}_0x1b260d=(_0x21b06d-_0x332bc9)/_0xb61014*0x64,_0x21b06d=_0x21b06d-_0x332bc9;}if(_0x1b260d){if(_0x1b260d<0x64)_0x1b260d=_0x1b260d[_0x4ecb76(0x19d)](0x2);else{if(_0x1b260d<0x3e8)_0x1b260d=_0x1b260d[_0x4ecb76(0x19d)](0x1);else _0x1b260d=_0x1b260d['toFixed'](0x0);}}else _0x1b260d=Number('0')[_0x4ecb76(0x19d)](0x2);if(_0x21b06d){if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0.000001)_0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x2);else{if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0.1)_0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x6);else{if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0x1)_0x21b06d=_0x21b06d['toFixed'](0x5);else{if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0xa)_0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x4);else{if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0x64)_0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x3);else{if(Math[_0x4ecb76(0x14b)](_0x21b06d)<0x3e8)_0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x2);else _0x21b06d=_0x21b06d[_0x4ecb76(0x19d)](0x2);}}}}}}else _0x21b06d=Number('0')[_0x4ecb76(0x19d)](0x2);}else _0x1b260d=Number('0')[_0x4ecb76(0x19d)](0x2);return{'value':_0x21b06d,'change':_0x1b260d,'leftTxt':_0x128bd0,'rightTxt':_0x1555e5};}async function getStartingBalances(_0x1f1842,_0xbf1677=!![]){const _0x2a97f4=_0x285792;if(_0x1f1842[_0x2a97f4(0x158)]!==0x0){const [_0x14caeb,_0x3a42e7,_0x41805f]=getPerf(_0x1f1842[0x0],!![]);let _0x1cbdc5=[];config['portfolio'][_0x2a97f4(0x16a)](_0x4ba598=>{const _0x212dd6=_0x2a97f4;let _0x2a0eb8=0x0,_0x1e5dc7;config[_0x212dd6(0x248)][_0x212dd6(0x16a)](_0xa6d0e=>{const _0xda2ded=_0x212dd6;let _0x38e054=_0xa6d0e[_0xda2ded(0x14d)][_0xda2ded(0x186)](_0x5e57fd=>_0x5e57fd['coin']==_0x4ba598['coin']);if(_0x38e054){_0x2a0eb8+=_0x38e054['number'];if(!_0x1e5dc7)_0x1e5dc7=_0x38e054[_0xda2ded(0x204)];}}),_0x1cbdc5[_0x212dd6(0x25d)]({'coin':_0x4ba598[_0x212dd6(0x109)],'number':_0x2a0eb8,'initialprice':_0x1e5dc7});});const _0x589bd4={'basecoin':_0x14caeb,'eur':_0x3a42e7,'usd':_0x41805f,'coins':_0x1cbdc5};if(_0xbf1677)proxyEmit(_0x2a97f4(0x1e9),_0x589bd4);startingBalances=_0x589bd4;}}function headlessMode(_0x4c1da0){const _0x35bdc4=_0x285792;let _0x34dd67=_0x4c1da0[_0x35bdc4(0x25c)],_0x4f6b88=_0x4c1da0[_0x35bdc4(0x1e7)],_0x5563db=[];for(let _0x5b69d1 of _0x34dd67){if(_0x5b69d1[_0x35bdc4(0x109)]!=config[_0x35bdc4(0x1c6)]){if(_0x5b69d1[_0x35bdc4(0x256)]>=_0x4f6b88/0x64){if(_0x5b69d1[_0x35bdc4(0x231)])_0x5563db[_0x35bdc4(0x25d)](_0x5b69d1);}else{if(_0x5b69d1[_0x35bdc4(0x256)]<=-_0x4f6b88/0x64){if(_0x5b69d1[_0x35bdc4(0x231)])_0x5563db['push'](_0x5b69d1);}}}}_0x5563db[_0x35bdc4(0x158)]>0x0&&(lockOrders==ORDERS[_0x35bdc4(0x1a5)]&&!coolingDown&&_0x5563db[_0x35bdc4(0x16a)](_0x552f62=>{const _0x2d3dbd=_0x35bdc4;logger['debug'](_0x2d3dbd(0x1c0)+_0x552f62[_0x2d3dbd(0x109)]+'\x20'+_0x552f62[_0x2d3dbd(0xff)]+'\x20'+_0x552f62[_0x2d3dbd(0x1be)]+'\x20'+_0x552f62[_0x2d3dbd(0x15d)]+'%\x20'+_0x552f62[_0x2d3dbd(0x23c)]+'%\x20'+(0x64*_0x552f62[_0x2d3dbd(0x256)])[_0x2d3dbd(0x19d)](0x2)+_0x2d3dbd(0x16d)+_0x4f6b88[_0x2d3dbd(0x19d)](0x2)+'%)');}),placeOrder(_0x5563db));}function notifyBalance(_0x297558){const _0x4dc726=_0x285792;let _0x2bda79=_0x297558[_0x4dc726(0x25c)],_0x1ac4b8=_0x297558['threshold'],_0x305566=[];for(let _0x2ff87c of _0x2bda79){if(_0x2ff87c[_0x4dc726(0x109)]!=config[_0x4dc726(0x1c6)]){if(_0x2ff87c['delta']>=_0x1ac4b8/0x64){if(_0x2ff87c[_0x4dc726(0x231)])_0x305566['push'](_0x2ff87c);}else{if(_0x2ff87c[_0x4dc726(0x256)]<=-_0x1ac4b8/0x64){if(_0x2ff87c['valid'])_0x305566['push'](_0x2ff87c);}}}}if(_0x305566[_0x4dc726(0x158)]>0x0){let _0x5d6196=_0x305566[_0x4dc726(0xf1)](_0x528451=>_0x528451['coin']);_0x5d6196['sort']();let _0x26bc29=_0x5d6196[_0x4dc726(0x284)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4dc726(0x20d),_0x4dc726(0x24c));lastCoinsToBalance=_0x26bc29;}}function symbolToCoin(_0x4629e6){const _0x4d1137=_0x285792;let _0x3c71c2;if(_0x4629e6[_0x4d1137(0x135)]('/'+config[_0x4d1137(0x1c6)]))_0x3c71c2=_0x4629e6[_0x4d1137(0x234)]('/'+config[_0x4d1137(0x1c6)],'');if(_0x4629e6[_0x4d1137(0x135)](config[_0x4d1137(0x1c6)]+'/'))_0x3c71c2=_0x4629e6[_0x4d1137(0x234)](config[_0x4d1137(0x1c6)]+'/','');return _0x3c71c2;}async function unlockOrders(){const _0x436ab0=_0x285792;if(allOrdersPlaced&&lockOrders==ORDERS[_0x436ab0(0x239)]){logger[_0x436ab0(0x169)](_0x436ab0(0x1ac)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x26b296=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x26b296,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x436ab0(0x1a5)],logger[_0x436ab0(0x169)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0xfd769f){const _0x43bd3e=_0x285792;if(_0xfd769f)validateOrdersState=_0xfd769f;logger['debug'](_0x43bd3e(0x19b)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x43bd3e(0xef):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x586f7d=[],_0x18b043=config[_0x43bd3e(0xf6)]==_0x43bd3e(0x209)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x43bd3e(0x178)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x43bd3e(0x169)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x43bd3e(0x16a)](_0x86f8a1=>{const _0x3919d8=_0x43bd3e;let _0x3a0fad=![];_0x86f8a1[_0x3919d8(0x297)]>0x0&&(_0x3a0fad=!![]),_0x586f7d[_0x3919d8(0x25d)](_0x3a0fad),_0x3a0fad&&config[_0x3919d8(0xf6)]!=_0x3919d8(0x209)&&logHistory(_0x3919d8(0x24a),_0x3919d8(0x117)+_0x86f8a1[_0x3919d8(0x1e6)]+'\x20'+_0x86f8a1[_0x3919d8(0x245)]+'\x20#'+formatResult(_0x86f8a1[_0x3919d8(0x297)],0x8)+'\x20@'+formatResult(_0x86f8a1[_0x3919d8(0x204)],0x8));}),_0x586f7d[_0x43bd3e(0x16a)]((_0x7c2147,_0x3d95ba)=>{const _0x34fc19=_0x43bd3e;if(_0x7c2147)lastOrders[_0x34fc19(0x174)](_0x3d95ba,0x1);}),persistOpenOrders(lastOrders);const _0x53c695=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x43bd3e(0x265);if(validateOrdersState==_0x43bd3e(0x19e)){validateOrdersState=_0x43bd3e(0x259);if(_0x586f7d['includes'](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x43bd3e(0x259)){if(_0x586f7d['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x43bd3e(0xf6)]==_0x43bd3e(0x209)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x43bd3e(0x15f))_0x586f7d[_0x43bd3e(0x135)](![])&&(config[_0x43bd3e(0xf6)]==_0x43bd3e(0x209)?logHistory(_0x43bd3e(0x196),_0x43bd3e(0x219)+Math['round'](_0x18b043*validateOrderInterval/0xea60)+_0x43bd3e(0x282)+_0x53c695):(await cancelOrders(),logHistory(_0x43bd3e(0x196),_0x43bd3e(0x1b8)+Math[_0x43bd3e(0x1dd)](_0x18b043*validateOrderInterval/0xea60)+_0x43bd3e(0x282)+_0x53c695))),await unlockOrders();else{if(validateOrdersState==_0x43bd3e(0xf3)){if(config[_0x43bd3e(0xf6)]!=_0x43bd3e(0x209))logHistory(_0x43bd3e(0x196),_0x43bd3e(0x26f)+_0x53c695);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x45df12=>{const _0x4a6f32=_0x1c7a;try{const _0xb99658=await exchange['cancelOrder'](_0x45df12[_0x4a6f32(0x180)],_0x45df12[_0x4a6f32(0x1e6)]);}catch(_0x15a01f){if(_0x15a01f[_0x4a6f32(0x202)]()[_0x4a6f32(0x135)](_0x4a6f32(0x195))){}else await handleError(_0x15a01f,_0x4a6f32(0x128));}});}async function initCoinResults(_0xc47474){const _0xdf7efa=_0x285792;_0xc47474?logger[_0xdf7efa(0x169)](_0xdf7efa(0x296)+_0xc47474):logger[_0xdf7efa(0x169)](_0xdf7efa(0x101)),config[_0xdf7efa(0x25c)]['forEach'](_0x125a2b=>{const _0x9f7ab6=_0xdf7efa;if(!_0x125a2b[_0x9f7ab6(0x1e3)]&&_0x125a2b[_0x9f7ab6(0x109)]!=config[_0x9f7ab6(0x1c6)]){const _0x247a2b=currentCoins[_0x9f7ab6(0x186)](_0x5a711d=>_0x5a711d[_0x9f7ab6(0x109)]==_0x125a2b[_0x9f7ab6(0x109)]),_0x1ceb38=global[_0x9f7ab6(0x23d)][noslash(_0x125a2b[_0x9f7ab6(0x1e6)])];let _0x2464f7=_0x247a2b?_0x247a2b[_0x9f7ab6(0xff)]:null,_0x1710ea=_0x125a2b[_0x9f7ab6(0x1c8)]?0x1/_0x1ceb38:_0x1ceb38,_0x16d37f;config[_0x9f7ab6(0x248)]['forEach'](_0x30ed0e=>{const _0x3d221f=_0x9f7ab6;!_0x16d37f&&(_0x16d37f=_0x30ed0e[_0x3d221f(0x14d)][_0x3d221f(0x186)](_0x4b1e02=>_0x4b1e02[_0x3d221f(0x109)]==_0x125a2b[_0x3d221f(0x109)]),_0x16d37f&&(_0x2464f7=_0x16d37f[_0x3d221f(0xff)],_0x1710ea=_0x16d37f[_0x3d221f(0x204)]));});let _0x23a7d9=dbCoinResults[_0x9f7ab6(0x188)](_0x9f7ab6(0x18f))[_0x9f7ab6(0x186)]({'coin':_0x125a2b[_0x9f7ab6(0x109)]})[_0x9f7ab6(0x25a)]();if(!_0x23a7d9){const _0x266fd8={'coin':_0x125a2b[_0x9f7ab6(0x109)],'number':_0x2464f7,'breakeven':_0x1710ea,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x9f7ab6(0x188)](_0x9f7ab6(0x18f))[_0x9f7ab6(0x25d)](_0x266fd8)[_0x9f7ab6(0x1d4)]();}else{if(_0xc47474&&_0x125a2b['coin']==_0xc47474){const _0x227c0c={'coin':_0x125a2b[_0x9f7ab6(0x109)],'number':_0x2464f7,'breakeven':_0x1710ea,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x9f7ab6(0x188)](_0x9f7ab6(0x18f))['find']({'coin':_0x125a2b['coin']})['assign'](_0x227c0c)[_0x9f7ab6(0x1d4)]();}}}});}async function updateCoinResults(_0x437fda,_0x1335b2=![]){const _0x4a5491=_0x285792;let _0x355b56,_0x3e687f,_0x4038de,_0x458c5e,_0x4514a3,_0x490d07,_0x53fbb6=dbCoinResults[_0x4a5491(0x188)]('coins')[_0x4a5491(0x186)]({'coin':_0x437fda[_0x4a5491(0x109)]})[_0x4a5491(0x25a)](),_0x5bce64=![];_0x53fbb6&&Object[_0x4a5491(0x25f)](_0x53fbb6)[_0x4a5491(0x16a)](([_0x35389e,_0x21651f])=>{if(_0x21651f==null)_0x5bce64=!![];});(!_0x53fbb6||_0x5bce64)&&(await initCoinResults(_0x437fda[_0x4a5491(0x109)]),_0x53fbb6=dbCoinResults[_0x4a5491(0x188)](_0x4a5491(0x18f))['find']({'coin':_0x437fda[_0x4a5491(0x109)]})['value']());_0x437fda[_0x4a5491(0x1c8)]&&(_0x490d07={'filled':_0x437fda[_0x4a5491(0x297)]*_0x437fda[_0x4a5491(0x204)],'amount':_0x437fda['filled']*_0x437fda[_0x4a5491(0x204)],'side':_0x437fda[_0x4a5491(0x245)]=='sell'?_0x4a5491(0x106):_0x4a5491(0x211),'price':0x1/_0x437fda['price']},_0x437fda={..._0x437fda,..._0x490d07});_0x1335b2?_0x3e687f=_0x437fda[_0x4a5491(0x245)]==_0x4a5491(0x106)?_0x53fbb6[_0x4a5491(0xff)]+_0x437fda['filled']:_0x53fbb6[_0x4a5491(0xff)]-_0x437fda[_0x4a5491(0x297)]:_0x3e687f=await getCoinNumber(_0x437fda['coin']);if(_0x437fda[_0x4a5491(0x1cf)]&&_0x437fda[_0x4a5491(0x1cf)][_0x4a5491(0x13d)]==config[_0x4a5491(0x1c6)])_0x355b56=_0x437fda['fee'][_0x4a5491(0x105)];else{if(_0x437fda[_0x4a5491(0x1cf)]&&_0x437fda[_0x4a5491(0x1cf)]['currency']==_0x4a5491(0x287)&&!_0x1335b2&&config[_0x4a5491(0x1c6)]!=_0x4a5491(0x260))_0x355b56=_0x437fda['fee'][_0x4a5491(0x105)]*global[_0x4a5491(0x23d)][_0x4a5491(0x287)+config['basecoin']];else _0x355b56=defaultFee*_0x437fda['filled']*_0x437fda['price'];}_0x437fda[_0x4a5491(0x245)]==_0x4a5491(0x106)?(_0x4038de=_0x3e687f!=0x0?(_0x53fbb6[_0x4a5491(0x23e)]*_0x53fbb6[_0x4a5491(0xff)]+_0x437fda[_0x4a5491(0x204)]*(_0x3e687f-_0x53fbb6['number'])+_0x355b56)/_0x3e687f:0x0,_0x458c5e=_0x53fbb6[_0x4a5491(0x244)]):(_0x4038de=_0x3e687f!=0x0?(_0x53fbb6[_0x4a5491(0x23e)]*_0x53fbb6['number']-_0x437fda['price']*(_0x53fbb6[_0x4a5491(0xff)]-_0x3e687f)+_0x355b56)/_0x3e687f:0x0,_0x458c5e=_0x53fbb6['realized']+(_0x437fda['price']-_0x53fbb6[_0x4a5491(0x23e)])*_0x437fda['filled']);_0x4514a3=(_0x437fda['price']-_0x4038de-_0x355b56/_0x437fda[_0x4a5491(0x297)])*_0x3e687f;let _0x149982={'coin':_0x437fda[_0x4a5491(0x109)],'number':_0x3e687f,'breakeven':formatResult(_0x4038de,0x8),'realized':formatResult(_0x458c5e,0x8),'unrealized':formatResult(_0x4514a3,0x8),'fees':formatResult(_0x53fbb6[_0x4a5491(0x187)]+_0x355b56,0x8),'sells':_0x437fda[_0x4a5491(0x245)]==_0x4a5491(0x211)?_0x53fbb6[_0x4a5491(0x159)]+0x1:_0x53fbb6[_0x4a5491(0x159)],'buys':_0x437fda['side']==_0x4a5491(0x106)?_0x53fbb6[_0x4a5491(0x206)]+0x1:_0x53fbb6[_0x4a5491(0x206)]};dbCoinResults[_0x4a5491(0x188)]('coins')['find']({'coin':_0x437fda[_0x4a5491(0x109)]})[_0x4a5491(0x1ec)](_0x149982)['write']();if(!_0x1335b2){if(_0x437fda['fee']&&_0x437fda[_0x4a5491(0x1cf)]['currency']=='BNB'){const _0x38dd14=currentCoins['find'](_0x2d5331=>_0x2d5331[_0x4a5491(0x109)]==_0x4a5491(0x287));if(_0x38dd14){let _0x9759ad=dbCoinResults[_0x4a5491(0x188)]('coins')[_0x4a5491(0x186)]({'coin':_0x4a5491(0x287)})['value']();_0x149982={..._0x9759ad,'number':_0x38dd14[_0x4a5491(0xff)]},dbCoinResults[_0x4a5491(0x188)](_0x4a5491(0x18f))['find']({'coin':_0x4a5491(0x287)})[_0x4a5491(0x1ec)](_0x149982)[_0x4a5491(0x1d4)]();}}}}async function placeOrder(_0x1f800e){const _0x14c151=_0x285792,_0x32cc06=config['ordertype']==_0x14c151(0x209)?_0x14c151(0x209):_0x14c151(0x1ae);if(lockOrders==ORDERS[_0x14c151(0x1a5)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x14c151(0x239)],allOrdersPlaced=![],validateOrdersState='initial';let _0x41c300=![];lastOrders=[];for(const _0x2747fa of _0x1f800e){let _0x4ab946,_0x1bbde2,_0x38a51f,_0x3ecfd1,_0x3a8c36,_0x2be33f=_0x2747fa['symbol'];try{const _0x196da2=await exchange['fetchTicker'](_0x2be33f);_0x4ab946=_0x2747fa[_0x14c151(0x1c8)]?0x1/_0x2747fa[_0x14c151(0x1be)]:_0x2747fa[_0x14c151(0x1be)],_0x1bbde2=_0x196da2[_0x14c151(0x171)],_0x38a51f=_0x196da2[_0x14c151(0xf9)];_0x2747fa[_0x14c151(0x1c8)]?(_0x3ecfd1=_0x2747fa[_0x14c151(0x245)]=='buy'?_0x14c151(0x211):_0x14c151(0x106),_0x3a8c36=Math[_0x14c151(0x14b)](_0x2747fa[_0x14c151(0x10d)])/_0x4ab946):(_0x3ecfd1=_0x2747fa['side'],_0x3a8c36=Math[_0x14c151(0x14b)](_0x2747fa['trade']));_0x32cc06=='limit'&&(config[_0x14c151(0xf6)]==_0x14c151(0x253)&&(_0x4ab946=_0x3ecfd1==_0x14c151(0x106)?_0x1bbde2:_0x38a51f),config[_0x14c151(0xf6)]==_0x14c151(0x1aa)&&(_0x4ab946=_0x3ecfd1=='buy'?_0x38a51f:_0x1bbde2));_0x3a8c36=formatResult(_0x3a8c36,0x8),_0x4ab946=formatResult(_0x4ab946,0x8);const _0x341e0c=_0x3ecfd1==_0x14c151(0x211)?config[_0x14c151(0x103)]?String[_0x14c151(0xf7)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x14c151(0xf7)]('0x'+config[_0x14c151(0x153)])+'\x20':'',_0x413384=_0x32cc06==_0x14c151(0x209)?_0x14c151(0x1cc):config['ordertype']==_0x14c151(0x253)?_0x14c151(0x250):_0x14c151(0x179),_0x5b9702=(Math[_0x14c151(0x17c)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x14c151(0x202)]();lastOrders['push']({'customId':_0x5b9702,'symbol':_0x2be33f,'coin':_0x2747fa[_0x14c151(0x109)],'amount':_0x3a8c36,'price':_0x4ab946,'side':_0x3ecfd1,'reverse':_0x2747fa['reverse'],'filled':0x0});if(_0x32cc06=='market')logHistory('order',''+_0x341e0c+_0x413384+_0x14c151(0x116)+_0x2be33f+'\x20'+_0x3ecfd1+'\x20#'+formatResult(_0x3a8c36,0x8)+'\x20@'+formatResult(_0x4ab946,0x8));else logHistory('order',''+_0x341e0c+_0x413384+_0x14c151(0x116)+_0x2be33f+'\x20'+_0x3ecfd1+'\x20#'+formatResult(_0x3a8c36,0x8)+'\x20@'+formatResult(_0x4ab946,0x8));let _0x2c406d;_0x32cc06==_0x14c151(0x209)?_0x3ecfd1==_0x14c151(0x106)&&['Bybit',_0x14c151(0x10c),_0x14c151(0x13c),_0x14c151(0x278),_0x14c151(0x107)][_0x14c151(0x135)](config[_0x14c151(0x170)])?_0x2c406d=await exchange[_0x14c151(0x266)](_0x2be33f,_0x32cc06,_0x3ecfd1,_0x3a8c36,_0x4ab946):_0x2c406d=await exchange[_0x14c151(0x266)](_0x2be33f,_0x32cc06,_0x3ecfd1,_0x3a8c36,undefined):_0x2c406d=await exchange[_0x14c151(0x266)](_0x2be33f,_0x32cc06,_0x3ecfd1,_0x3a8c36,_0x4ab946);logger[_0x14c151(0x169)](_0x14c151(0x20b)+_0x2c406d['id']+_0x14c151(0x1f6)+_0x5b9702);const _0x787738=lastOrders[_0x14c151(0x158)]-0x1;if(_0x787738>=0x0&&lastOrders[_0x787738][_0x14c151(0x10e)]==_0x5b9702){lastOrders[_0x787738][_0x14c151(0x180)]=_0x2c406d['id'];if(_0x2c406d[_0x14c151(0x121)])lastOrders[_0x787738][_0x14c151(0x121)]=_0x2c406d[_0x14c151(0x121)];if(_0x2c406d[_0x14c151(0x204)])lastOrders[_0x787738][_0x14c151(0x204)]=_0x2c406d[_0x14c151(0x204)];lastOrders[_0x787738]['fee']=_0x2c406d[_0x14c151(0x1cf)];}if(config['cooldown']!=0x0){let _0x4dea20=null;if(cooldownTracker[_0x14c151(0x158)]==config['cooldown']-0x1)_0x4dea20=cooldownTracker[_0x14c151(0x24d)]();const _0x4f4842=getTimeStamp();cooldownTracker[_0x14c151(0x25d)](_0x4f4842);if(_0x4dea20){const _0x47a6fb=fns[_0x14c151(0x207)](new Date(_0x4f4842),new Date(_0x4dea20));if(_0x47a6fb<cooldownInterval){logHistory(_0x14c151(0x1a7),'Executed\x20'+config['cooldown']+_0x14c151(0x11b)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x14c151(0x262)),coolingDown=!![];break;}}}}catch(_0x231b2d){if(_0x231b2d['toString']()[_0x14c151(0x135)](_0x14c151(0x1b4)))lastOrders=lastOrders['filter'](_0x2fac00=>_0x2fac00[_0x14c151(0x1e6)]!=_0x2be33f),logHistory(_0x14c151(0x1a7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2be33f),_0x41c300=!![];else{if(_0x231b2d['toString']()[_0x14c151(0x135)](_0x14c151(0x14f)))lastOrders=lastOrders[_0x14c151(0x185)](_0x305a73=>_0x305a73[_0x14c151(0x1e6)]!=_0x2be33f),logHistory(_0x14c151(0x1a7),'Order\x20amount\x20is\x20invalid:\x20'+_0x2be33f),_0x41c300=!![];else{if(_0x231b2d['toString']()[_0x14c151(0x135)](_0x14c151(0x112)))lastOrders=lastOrders[_0x14c151(0x185)](_0x25c3b1=>_0x25c3b1[_0x14c151(0x1e6)]!=_0x2be33f),logHistory(_0x14c151(0x1a7),_0x14c151(0x227)+_0x2be33f),logger['debug'](_0x231b2d),_0x41c300=!![];else _0x231b2d['toString']()[_0x14c151(0x135)](_0x14c151(0x28f))?(lastOrders=lastOrders[_0x14c151(0x185)](_0x14c9c8=>_0x14c9c8[_0x14c151(0x1e6)]!=_0x2be33f),logHistory('error',_0x14c151(0xfd)+_0x2be33f),_0x41c300=!![]):(lastOrders=lastOrders[_0x14c151(0x185)](_0x22e388=>_0x22e388[_0x14c151(0x1e6)]!=_0x2be33f),await handleError(_0x231b2d,_0x14c151(0x268),_0x2be33f));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x14c151(0x158)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x486e37=config[_0x14c151(0xf6)]==_0x14c151(0x209)?validateOrderTimeout*0x3c*0x3e8:config[_0x14c151(0x178)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x626153=_0x14c151;validateOrders(_0x626153(0x15f));},_0x486e37);}else unlockOrders();_0x41c300&&config[_0x14c151(0x12f)]&&(logHistory('error',_0x14c151(0x1a3)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x14c151(0x196),_0x14c151(0x263)));}else{if(coolingDown)!config[_0x14c151(0x12f)]&&logHistory(_0x14c151(0x1a7),_0x14c151(0x1bd));else lockOrders!=ORDERS[_0x14c151(0x1a5)]&&(!config['headless']&&(config[_0x14c151(0xf6)]==_0x14c151(0x209)?logHistory(_0x14c151(0x1a7),_0x14c151(0xfa)):logHistory(_0x14c151(0x1a7),_0x14c151(0x1de))));}}function persistOpenOrders(_0x410ef7){const _0x37301e=_0x285792,_0x20d9a4={...config,'openOrders':_0x410ef7};let _0x533a36=dbConfig[_0x37301e(0x188)](_0x37301e(0x246))['find']({'botID':botID})[_0x37301e(0x25a)]();_0x533a36&&dbConfig[_0x37301e(0x188)]('bot')[_0x37301e(0x186)]({'botID':botID})['assign'](_0x20d9a4)[_0x37301e(0x1d4)]();}function restoreOrders(){const _0x2e5d75=_0x285792;let _0x49be77;config[_0x2e5d75(0x261)]&&allOpenOrders[_0x2e5d75(0x16a)](_0x357a6e=>{const _0x17ad49=_0x2e5d75,_0x4c00a1=config[_0x17ad49(0x261)][_0x17ad49(0x186)](_0x9e8888=>_0x9e8888['orderId']==_0x357a6e['id']);_0x4c00a1&&(lastOrders[_0x17ad49(0x25d)](_0x4c00a1),_0x49be77=_0x357a6e[_0x17ad49(0x280)]);});if(lastOrders[_0x2e5d75(0x158)]>0x0){lockOrders=ORDERS[_0x2e5d75(0x239)],validateOrdersState=_0x2e5d75(0x259),allOrdersPlaced=!![];const _0x3ee39e=new Date()[_0x2e5d75(0x1ef)](),_0x146572=config[_0x2e5d75(0xf6)]==_0x2e5d75(0x209)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x49be77+_0x146572>_0x3ee39e){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x49be77+_0x146572-_0x3ee39e);}else validateOrders(_0x2e5d75(0x15f));}}async function sendMetricsTelegram(){const _0x2b1615=_0x285792;if(!coinsLoaded){process[_0x2b1615(0x1c1)]({'telegrammsg':_0x2b1615(0x21d)},_0x3fae75=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x59d70d='';if(config['showname'])_0x59d70d=_0x2b1615(0x28b)+config['botname']+_0x2b1615(0x119);else _0x59d70d=_0x2b1615(0x225)+botID+_0x2b1615(0x119);const _0x52c13c=getKPIs(_0x2b1615(0x1c6)),_0x376e2b=getKPIs(_0x2b1615(0x241),config[_0x2b1615(0x241)]),_0x44a039=getKPIs(_0x2b1615(0x272)),_0x3887be=getKPIs(_0x2b1615(0x140),config[_0x2b1615(0x241)]);_0x59d70d+=_0x2b1615(0x127),_0x59d70d+=_0x52c13c[_0x2b1615(0x1eb)]+'\x20:\x20'+_0x52c13c['value']+'\x0a',_0x59d70d+=_0x52c13c['rightTxt']+':\x20'+_0x52c13c[_0x2b1615(0x1e2)]+'%\x0a',_0x59d70d+=_0x376e2b[_0x2b1615(0x1eb)]+_0x2b1615(0x1f4)+_0x376e2b[_0x2b1615(0x25a)]+'\x0a',_0x59d70d+=_0x376e2b[_0x2b1615(0x23f)]+':\x20'+_0x376e2b[_0x2b1615(0x1e2)]+'%\x0a',_0x59d70d+=_0x44a039[_0x2b1615(0x1eb)]+':\x20'+_0x44a039[_0x2b1615(0x25a)]+'\x20('+config[_0x2b1615(0x1c6)]+')\x0a',_0x59d70d+=_0x44a039['rightTxt']+':\x20'+_0x44a039['change']+'%\x20('+config[_0x2b1615(0x1c6)]+')\x0a',_0x59d70d+=_0x3887be['leftTxt']+':\x20'+_0x3887be[_0x2b1615(0x25a)]+'\x20('+config[_0x2b1615(0x241)]+')\x0a',_0x59d70d+=_0x3887be['rightTxt']+':\x20'+_0x3887be[_0x2b1615(0x1e2)]+_0x2b1615(0x16d)+config[_0x2b1615(0x241)]+')\x0a',_0x59d70d+='</pre>',process[_0x2b1615(0x1c1)]({'telegrammsg':_0x59d70d},_0x5d2981=>{});}async function sendPortfolioTelegram(){const _0x74d13=_0x285792;if(!coinsLoaded){process[_0x74d13(0x1c1)]({'telegrammsg':_0x74d13(0x21d)},_0x479f3f=>{});return;}let _0x18934b='';if(config[_0x74d13(0x277)])_0x18934b=_0x74d13(0x28b)+config[_0x74d13(0x12b)]+_0x74d13(0x21b);else _0x18934b=_0x74d13(0x225)+botID+_0x74d13(0x21b);_0x18934b+=_0x74d13(0x127),_0x18934b+=_0x74d13(0x274),_0x18934b+=_0x74d13(0x22e),_0x18934b+=_0x74d13(0x274),currentCoins[_0x74d13(0x16a)](_0x325f02=>{const _0x500ee7=_0x74d13;_0x18934b+=_0x325f02[_0x500ee7(0x109)][_0x500ee7(0x1fb)](0x7)+'|\x20'+formatPad(_0x325f02['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x325f02[_0x500ee7(0x23c)],0x2,0x6)+'|\x20'+formatPad(_0x325f02[_0x500ee7(0x256)]*0x64,0x2,0x6)+'\x0a';}),_0x18934b+=_0x74d13(0x12d),process[_0x74d13(0x1c1)]({'telegrammsg':_0x18934b},_0xfdab62=>{});}function formatPad(_0x63baa0,_0x4d1b73,_0x927ada){const _0x4abd39=_0x285792,_0x38277a=formatResultString(_0x63baa0,_0x4d1b73);return _0x38277a?_0x38277a[_0x4abd39(0x118)](_0x927ada):''[_0x4abd39(0x118)](_0x927ada);}function logHistory(_0x27a021,_0x22d560,_0x1d7272=''){const _0x39f622=_0x285792;logger['full'](''+_0x22d560);let _0x3aac93={'time':getTimeStamp(),'type':_0x27a021,'event':_0x22d560};dbLogs['get'](_0x39f622(0x108))[_0x39f622(0x25d)](_0x3aac93)[_0x39f622(0x1d4)]();if(_0x1d7272=='')_0x1d7272=_0x22d560;proxyEmit(_0x39f622(0x1b1),{'log':_0x3aac93,'summary':_0x1d7272}),process[_0x39f622(0x1c1)]({'telegram':{..._0x3aac93,'botname':config[_0x39f622(0x12b)],'showname':config['showname']}},_0x52e669=>{});}function emitHistory(_0x30ee3b={}){const _0x37bbc0=_0x285792;Object[_0x37bbc0(0x28e)](_0x30ee3b)[_0x37bbc0(0x158)]==0x0&&(_0x30ee3b={'type':[_0x37bbc0(0x24a),_0x37bbc0(0x1b1)],'event':'','page':0x1});if(_0x30ee3b[_0x37bbc0(0x281)][_0x37bbc0(0x135)](_0x37bbc0(0x1b1)))_0x30ee3b[_0x37bbc0(0x281)][_0x37bbc0(0x174)](_0x30ee3b[_0x37bbc0(0x281)][_0x37bbc0(0x1ed)](_0x37bbc0(0x1b1)),0x1,_0x37bbc0(0x1a7),_0x37bbc0(0x20d),'success');if(dbLogs['has'](_0x37bbc0(0x108))[_0x37bbc0(0x25a)]()){let _0x3b836b=dbLogs[_0x37bbc0(0x188)](_0x37bbc0(0x108))[_0x37bbc0(0x185)](_0x58f414=>{const _0x4d9cbd=_0x37bbc0;if(_0x30ee3b[_0x4d9cbd(0x281)][_0x4d9cbd(0x158)]==0x0)return![];else return _0x30ee3b[_0x4d9cbd(0x281)][_0x4d9cbd(0x135)](_0x58f414[_0x4d9cbd(0x281)]);})['filter'](_0x2afbff=>{const _0x4a6088=_0x37bbc0;if(_0x30ee3b[_0x4a6088(0x1b1)]=='')return!![];else return _0x2afbff[_0x4a6088(0x1b1)]['toLowerCase']()[_0x4a6088(0x135)](_0x30ee3b[_0x4a6088(0x1b1)][_0x4a6088(0x1e0)]());})[_0x37bbc0(0x20a)](_0x37bbc0(0x257)),_0x103428=_0x3b836b[_0x37bbc0(0x25a)]()[_0x37bbc0(0x158)];_0x3b836b=_0x3b836b[_0x37bbc0(0x1c8)]()['slice']((_0x30ee3b['page']-0x1)*logPageSize,_0x30ee3b[_0x37bbc0(0x18a)]*logPageSize-0x1)[_0x37bbc0(0x1c8)]()[_0x37bbc0(0x25a)](),proxyEmit('event-history',{'logs':_0x3b836b,'total':_0x103428});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x495d56){const _0x17bd5a=_0x285792;if(dbLogs[_0x17bd5a(0x286)](_0x17bd5a(0x108))[_0x17bd5a(0x25a)]()){const _0x269764=dbLogs['get'](_0x17bd5a(0x108))[_0x17bd5a(0x20a)](_0x17bd5a(0x257))['filter'](_0x15acb6=>{const _0x20b50e=_0x17bd5a;return _0x15acb6[_0x20b50e(0x281)]==_0x20b50e(0x24a);})[_0x17bd5a(0x25a)]();dbLogs[_0x17bd5a(0x188)](_0x17bd5a(0x108))['remove']()[_0x17bd5a(0x1d4)](),dbLogs[_0x17bd5a(0x188)](_0x17bd5a(0x108))['assign'](_0x269764)[_0x17bd5a(0x1d4)](),emitHistory(_0x495d56);}}async function pauseBot(_0x28a89b=pauseBotInterval){const _0x3d96b4=_0x285792,_0x1ad2b0=new Date()[_0x3d96b4(0x1ef)]();if(!lastErrorShown||_0x1ad2b0-lastErrorShown>=_0x28a89b){lastErrorShown=_0x1ad2b0;!lastBotPause?(lastBotPause=_0x1ad2b0,consecutivePauses=0x1):(_0x1ad2b0-lastBotPause-_0x28a89b<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x3d96b4(0x16c)},_0x1bd121=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3d96b4(0x1ef)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x28a89b),botPaused=![],reset(!![]);}}}async function killBot(){const _0x111e31=_0x285792;botPaused=!![],await sleep(0x3e8),process[_0x111e31(0x1c1)]({'stop':_0x111e31(0x162)},_0x5cbbbd=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2e75a8,_0x3cb72f){const _0x2dbcf8=_0x285792;if(botPaused)return;const _0x2e3a30=config['exchange']||_0x2dbcf8(0x19f);if(_0x3cb72f)logger[_0x2dbcf8(0x169)](_0x2dbcf8(0x233)+_0x3cb72f);const _0x5295b3=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x2e75a8[_0x2dbcf8(0x202)]()[_0x2dbcf8(0x135)](_0x2dbcf8(0x295)))logHistory(_0x2dbcf8(0x1a7),_0x2e3a30+_0x2dbcf8(0x1bc)),_0x5295b3();else{if(_0x2e75a8['toString']()['includes'](_0x2dbcf8(0x17d)))logHistory(_0x2dbcf8(0x1a7),_0x2e3a30+_0x2dbcf8(0x1fd)),_0x5295b3();else _0x2e75a8['toString']()[_0x2dbcf8(0x135)](_0x2dbcf8(0x1f7))?(logHistory(_0x2dbcf8(0x1a7),_0x2e3a30+_0x2dbcf8(0x1f9)),logHistory(_0x2dbcf8(0x1a7),_0x2dbcf8(0x205)),_0x5295b3()):await handleError(_0x2e75a8,null);}}async function handleError(_0xad76ca,_0x36c1a9,_0x5d5910=''){const _0x29ad4e=_0x285792;if(botPaused)return;const _0x419f9b=config[_0x29ad4e(0x170)]||_0x29ad4e(0x19f);if(_0x36c1a9)logger[_0x29ad4e(0x169)](_0x29ad4e(0x233)+_0x36c1a9);if(_0xad76ca[_0x29ad4e(0x202)]()['includes'](_0x29ad4e(0x1b0))||_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)]('RateLimitExceeded'))logHistory(_0x29ad4e(0x1a7),_0x419f9b+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x1e5))||_0xad76ca['toString']()[_0x29ad4e(0x135)](_0x29ad4e(0x20c)))logHistory('error',_0x419f9b+_0x29ad4e(0x270)+pauseBotMsg),await pauseBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)]('RequestTimeout'))logHistory(_0x29ad4e(0x1a7),_0x419f9b+_0x29ad4e(0x16e)+pauseBotMsg),await pauseBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x224)))logHistory(_0x29ad4e(0x1a7),_0x419f9b+'\x20closed\x20the\x20connection'+pauseBotMsg),await pauseBot();else{if(_0xad76ca['toString']()[_0x29ad4e(0x135)](_0x29ad4e(0x136)))logHistory('error',_0x29ad4e(0x151)),logHistory(_0x29ad4e(0x1a7),_0x29ad4e(0x1d3)),await killBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x11a)))logHistory(_0x29ad4e(0x1a7),_0x419f9b+_0x29ad4e(0x201)+pauseBotMsgLong),logHistory(_0x29ad4e(0x1a7),'If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync'),await pauseBot(pauseBotIntervalLong);else{if(_0xad76ca instanceof ccxt[_0x29ad4e(0x285)])logHistory('error',_0x419f9b+_0x29ad4e(0x100)+pauseBotMsg),logger[_0x29ad4e(0x169)](_0x29ad4e(0x283),_0xad76ca),await pauseBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x295)))logHistory('error',_0x419f9b+_0x29ad4e(0x130)),logHistory(_0x29ad4e(0x1a7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x17d)))logHistory(_0x29ad4e(0x1a7),_0x419f9b+_0x29ad4e(0x1cd)),logHistory('error',_0x29ad4e(0x1d3)),await killBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x1f7)))logHistory('error',_0x419f9b+_0x29ad4e(0x17a)),logHistory(_0x29ad4e(0x1a7),_0x29ad4e(0x1d3)),await killBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0xf8)))logHistory(_0x29ad4e(0x1a7),_0x419f9b+_0x29ad4e(0x25b)),logHistory(_0x29ad4e(0x1a7),_0x29ad4e(0x1d3)),await killBot();else{if(_0xad76ca[_0x29ad4e(0x202)]()[_0x29ad4e(0x135)](_0x29ad4e(0x199)))logHistory(_0x29ad4e(0x1a7),_0x29ad4e(0x16b)+_0x5d5910);else _0xad76ca instanceof ccxt[_0x29ad4e(0x223)]?(logHistory(_0x29ad4e(0x1a7),_0x419f9b+_0x29ad4e(0x143)),logger[_0x29ad4e(0x169)]('Error\x20details:',_0xad76ca)):(logHistory(_0x29ad4e(0x1a7),_0x29ad4e(0x23b)+pauseBotMsg),logger[_0x29ad4e(0x169)]('Error\x20details:',_0xad76ca),await pauseBot());}}}}}}}}}}}}function formatResult(_0x25d98f,_0xf53299){const _0x11c9db=_0x285792;return parseFloat(_0x25d98f[_0x11c9db(0x19d)](_0xf53299));}function formatResultTruncate(_0x347eba,_0x31f96f){const _0x215c16=_0x285792;let _0x193425=formatResultString(_0x347eba,0xa),_0x2130d5=_0x193425['indexOf']('.');return _0x2130d5!=-0x1&&(_0x193425=_0x193425[_0x215c16(0x157)](0x0,_0x2130d5+_0x31f96f+0x1)),Number(_0x193425);}function formatResultString(_0x1397cb,_0x2958e2){const _0x16198a=_0x285792;let _0x53a3b0;if(!(''+_0x1397cb)['includes']('e'))_0x53a3b0=+(Math[_0x16198a(0x1dd)](_0x1397cb+'e+'+_0x2958e2)+'e-'+_0x2958e2);else{let _0xb6296=(''+_0x1397cb)[_0x16198a(0x173)]('e'),_0x1803d5='';+_0xb6296[0x1]+_0x2958e2>0x0&&(_0x1803d5='+'),_0x53a3b0=+(Math['round'](+_0xb6296[0x0]+'e'+_0x1803d5+(+_0xb6296[0x1]+_0x2958e2))+'e-'+_0x2958e2);}return Number(_0x53a3b0)[_0x16198a(0x19d)](_0x2958e2);}function getServerTime(){const _0x5b4df2=_0x285792,_0x3a24ba=new Date();return _0x3a24ba[_0x5b4df2(0x1d8)]()+'/'+(_0x3a24ba['getMonth']()+0x1)[_0x5b4df2(0x202)]()['padStart'](0x2,'0')+'/'+_0x3a24ba[_0x5b4df2(0x28d)]()[_0x5b4df2(0x202)]()[_0x5b4df2(0x118)](0x2,'0')+'\x20'+_0x3a24ba[_0x5b4df2(0x131)]()['toString']()[_0x5b4df2(0x118)](0x2,'0')+':'+_0x3a24ba[_0x5b4df2(0x11f)]()[_0x5b4df2(0x202)]()['padStart'](0x2,'0')+':'+_0x3a24ba[_0x5b4df2(0x1db)]()[_0x5b4df2(0x202)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4b2bd8=_0x285792,_0x40c490=shiftedTime();return _0x40c490[_0x4b2bd8(0x1d8)]()+'/'+(_0x40c490[_0x4b2bd8(0x102)]()+0x1)[_0x4b2bd8(0x202)]()[_0x4b2bd8(0x118)](0x2,'0')+'/'+_0x40c490['getDate']()[_0x4b2bd8(0x202)]()[_0x4b2bd8(0x118)](0x2,'0')+'\x20'+_0x40c490['getHours']()['toString']()[_0x4b2bd8(0x118)](0x2,'0')+':'+_0x40c490['getMinutes']()[_0x4b2bd8(0x202)]()['padStart'](0x2,'0')+':'+_0x40c490[_0x4b2bd8(0x1db)]()['toString']()[_0x4b2bd8(0x118)](0x2,'0');}function getDate(){const _0x19abdb=_0x285792,_0x4b998f=shiftedTime();return _0x4b998f[_0x19abdb(0x1d8)]()+'/'+(_0x4b998f['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4b998f[_0x19abdb(0x28d)]()['toString']()[_0x19abdb(0x118)](0x2,'0');}function getHour(){const _0x2912d5=_0x285792,_0xd8dd3a=shiftedTime();return _0xd8dd3a[_0x2912d5(0x131)]()['toString']()[_0x2912d5(0x118)](0x2,'0');}function sleep(_0x22f090){return new Promise(_0x56337b=>setTimeout(_0x56337b,_0x22f090));}function shiftedTime(){const _0x1e6d17=_0x285792,_0x369c61=new Date();let _0x5efa67=_0x369c61;if(config&&config['timeshift']!==0x0)_0x5efa67=fns[_0x1e6d17(0x24e)](_0x369c61,{'hours':config[_0x1e6d17(0x193)]});return _0x5efa67;}function timer(_0x38850c){const _0x53c6fd=_0x285792,_0x595eb5=new Date();!lasttime?console[_0x53c6fd(0x235)](getTimeStamp()+':\x20timer\x20>',_0x38850c,_0x595eb5):console[_0x53c6fd(0x235)](getTimeStamp()+_0x53c6fd(0x133),_0x38850c,(_0x595eb5-lasttime)/0x3e8),lasttime=_0x595eb5;}