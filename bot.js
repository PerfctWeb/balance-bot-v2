const _0x1a7456=_0x516b;(function(_0x1f1084,_0x1ce52b){const _0xb0d23a=_0x516b,_0x41f452=_0x1f1084();while(!![]){try{const _0x5ac3c4=parseInt(_0xb0d23a(0x2ae))/0x1+parseInt(_0xb0d23a(0x1fd))/0x2+parseInt(_0xb0d23a(0x2a9))/0x3+-parseInt(_0xb0d23a(0x263))/0x4+parseInt(_0xb0d23a(0x2ea))/0x5+-parseInt(_0xb0d23a(0x287))/0x6+parseInt(_0xb0d23a(0x268))/0x7*(-parseInt(_0xb0d23a(0x274))/0x8);if(_0x5ac3c4===_0x1ce52b)break;else _0x41f452['push'](_0x41f452['shift']());}catch(_0x24d8d4){_0x41f452['push'](_0x41f452['shift']());}}}(_0x158a,0x66181));const _0x56def9=function(){let _0x2a380e=!![];return function(_0x2731b9,_0x442725){const _0x3018c9=_0x2a380e?function(){if(_0x442725){const _0x2b8ff8=_0x442725['apply'](_0x2731b9,arguments);return _0x442725=null,_0x2b8ff8;}}:function(){};return _0x2a380e=![],_0x3018c9;};}(),_0xea873e=_0x56def9(this,function(){const _0x4faa66=_0x516b;return _0xea873e[_0x4faa66(0x23a)]()[_0x4faa66(0x239)](_0x4faa66(0x1ef))[_0x4faa66(0x23a)]()[_0x4faa66(0x249)](_0xea873e)[_0x4faa66(0x239)](_0x4faa66(0x1ef));});_0xea873e();'use strict';const ccxt=require(_0x1a7456(0x28a)),low=require(_0x1a7456(0x26d)),FileSync=require(_0x1a7456(0x241)),fs=require('fs'),fns=require(_0x1a7456(0x29f)),{WebsocketClient,DefaultLogger}=require(_0x1a7456(0x2b3)),Crypt=require(_0x1a7456(0x2d0))['Crypt'];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1a7456(0x20f))[_0x1a7456(0x20d)],botID=process[_0x1a7456(0x1ff)][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x1a7456(0x24f)](botID))return console[_0x1a7456(0x298)](_0x1a7456(0x1f0)+botID+_0x1a7456(0x2c8)),process[_0x1a7456(0x2a6)](0x1);const userID=process[_0x1a7456(0x1ff)][0x3]||'',configpath=userID?_0x1a7456(0x2c9)+userID+'/':_0x1a7456(0x2c9);!fs['existsSync'](configpath)&&fs[_0x1a7456(0x277)](configpath);const configfile=configpath+_0x1a7456(0x285)+botID+_0x1a7456(0x2c6),logfile=configpath+_0x1a7456(0x285)+botID+_0x1a7456(0x2cc),performancefile=configpath+_0x1a7456(0x285)+botID+_0x1a7456(0x267),coinresultsfile=configpath+_0x1a7456(0x285)+botID+'-results.json',settingsfile=configpath+_0x1a7456(0x2ab),securefile=configpath+_0x1a7456(0x2a3),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1a7456(0x28d)]({'logs':[]})[_0x1a7456(0x266)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1a7456(0x28d)]({'data':[]})[_0x1a7456(0x266)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1a7456(0x28d)]({'bot':[]})[_0x1a7456(0x266)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x1a7456(0x266)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1a7456(0x293),'symbol':_0x1a7456(0x273)},'usd':{'coin':_0x1a7456(0x2d2),'symbol':_0x1a7456(0x27b)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x1a2445)=>{},'debug':(..._0x9f9a83)=>{},'notice':(..._0x1ab546)=>{},'info':(..._0x12cfc5)=>{},'warning':(..._0x4482dd)=>{},'error':async function(..._0x4cbb32){const _0x3f2d3a=_0x1a7456,_0x265465=new Date()[_0x3f2d3a(0x2b9)]();if(!lastErrorShown||_0x265465-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3f2d3a(0x2b9)](),logHistory(_0x3f2d3a(0x292),'WebSockets('+consecutivePauses+_0x3f2d3a(0x2e7));let _0x201f79='';if(_0x4cbb32[0x0])_0x201f79+=_0x4cbb32[0x0];if(_0x4cbb32[0x1]&&_0x4cbb32[0x1][_0x3f2d3a(0x292)]&&_0x4cbb32[0x1][_0x3f2d3a(0x292)]['message'])_0x201f79+=_0x3f2d3a(0x23f)+_0x4cbb32[0x1][_0x3f2d3a(0x292)][_0x3f2d3a(0x264)];logging(_0x3f2d3a(0x2a5)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x201f79),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1a7456(0x27c),'rsaStandard':_0x1a7456(0x275)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1a7456(0x27a)]!=config[_0x1a7456(0x27a)]&&updateTimeshift(settings[_0x1a7456(0x27a)]);process[_0x1a7456(0x2e8)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x40c173,_0x4398f2=null){const _0x5f47c8=_0x1a7456;process[_0x5f47c8(0x2e8)]({'function':_0x40c173,'args':_0x4398f2});}function initializeProcessListeners(){process['on']('message',_0x5a5ac6=>{const _0x278d95=_0x516b;switch(Object[_0x278d95(0x26f)](_0x5a5ac6)[0x0]){case'timeshift':_0x5a5ac6[_0x278d95(0x27a)]!=undefined&&(settings[_0x278d95(0x27a)]=_0x5a5ac6[_0x278d95(0x27a)],updateTimeshift(settings[_0x278d95(0x27a)]));break;case _0x278d95(0x257):switch(_0x5a5ac6['function']){case _0x278d95(0x2a2):initclient();break;case _0x278d95(0x216):emitHistory(_0x5a5ac6['args']);break;case'getPortfolio':getPortfolio(_0x5a5ac6[_0x278d95(0x23d)]);break;case _0x278d95(0x2bf):storeConfiguration(_0x5a5ac6[_0x278d95(0x23d)]);break;case _0x278d95(0x2d6):storeHeadless(_0x5a5ac6[_0x278d95(0x23d)]);break;case _0x278d95(0x279):getStartingBalances();break;case _0x278d95(0x2f1):placeOrder(_0x5a5ac6['args']);break;case _0x278d95(0x271):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}function _0x158a(){const _0x46971c=['HOT/BTC','getFullYear','eur','asset','************','BTC','limits','format','FILLED','date','cost','Limit\x20(high-margin)','Market','last','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getSeconds','decrypt','find','padStart','market','ticker','logs','placeOrder()','reconnected','Unfilled\x20order(s)\x20canceled\x20after\x20','time','coins','cancelOrder()','timestamp','push','orderStatus','search','toString','trade','fetchOHLCV','args','slice','\x20-\x20','\x20order:\x20','lowdb/adapters/FileSync','configuration','includes','length','getMinutes','number','timeout','filter','constructor','target','side','yyyy/MM/dd','headless','DAI/','test','accumulatedQuantity','fees','Invalid\x20quantity','toFixed','orderId','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','page','function','assign','filled','toLowerCase','\x20|\x20Error\x20details:\x20','showname','Order:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','success','symbols','datetime','3276824ylOujI','message','breakeven','write','-performance.json','3941JOLFtJ','LIMIT','eventType','threshold','Binance\x20API\x20key\x20is\x20invalid','lowdb','value','keys','AuthenticationError','cancelLoading','differenceInCalendarDays','BTC/EUR','10328LfbmoF','RSA-OAEP','buys','mkdirSync','eachDayOfInterval','getStartingBalances','timeshift','BTC/USDT','sha256','apiKey','exchange','parse','\x20minutes\x20-\x20balancing\x20resumed','BNB','getMonth','ask','enabled','bot-','sort','2936922CnMUXs','data','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ccxt','Pausing\x20bot\x20for\x205\x20minutes\x20(','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','defaults','isArray','type','Order\x20filled:\x20','Performance\x20recreation\x20completed\x20successfully','error','BTCEUR','limit','startprice','parseISO','initws()','log','sells','has','USDT','delta','spot','price','date-fns','remainingSymbols','fee','initclient','bb-secure.json','stringify','WebSockets(','exit','ordertype','BUSD','2416863cgAyAG','limit-low','bb-settings.json','loadSymbols()','bid','609193kBCUvn','progress','min','wsKey','milliseconds','binance','subscribeSpotKline','sortBy','subscribeSpotUserDataStream','forEach','symbol','getTime','distribution','fetchTickers','recreate','cancelOrder','buy','storeConfiguration','startnumber','getCloses()','remove','\x20|\x20Unknown\x20error\x20occured','close','running','-config.json','reverse',',\x20must\x20be\x20a\x203\x20digit\x20number','./config/','add','fetchOrders','-events.json','\x20hour','amount','binanceus','hybrid-crypto-js','startdate','BTCUSDT','InvalidNonce','basecoin','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','storeHeadless','privateKey','getFiat()','abs','coin','coin-loading-progress','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','cooldown','replace','valid','limit-high','userData','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','realized','offset','fetchBalance','wss://stream.binance.com:9443',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','send','indexOf','2502880LqDIRm','emojibuy','bot','settings','currency','emojisell','HOT/EUR','placeOrder','Bot\x20','botID','InsufficientFunds','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','event','createOrder','Order(s)\x20validated\x20-\x20balancing\x20resumed','max','availableBalance','portfolio','(((.+)+)+)+$','Error:\x20Invalid\x20argument\x20','RequestTimeout','usd',':\x20Bot\x20','orderType','MIN_NOTIONAL','get','apiSecret','kline','Limit\x20(low-margin)','configuration-stored','event-history','split','1076626Kuzfbr','botname','argv','kill','outboundAccountPosition','getCoins()','ExchangeNotAvailable','DDoSProtection','excluded','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','formattedMessage','getDate','round','sell','restart','version','splice','./version.json','order','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','performance','balances','entries','getHours','emitHistory','API-key\x20format\x20invalid','fromCodePoint','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'];_0x158a=function(){return _0x46971c;};return _0x158a();}async function reset(){const _0x364468=_0x1a7456;if(pidBalances)clearTimeout(pidBalances);if(config[_0x364468(0x27d)]!=''){await initExchange(config[_0x364468(0x27d)],config[_0x364468(0x1f7)]);let _0x5353ef=await loadSymbols();_0x5353ef&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x42fe8e,_0x1f26ab){const _0x53996e=_0x1a7456,_0x1ef722=ccxt[config[_0x53996e(0x27e)]];let _0x3e6533;switch(config[_0x53996e(0x27e)]){case _0x53996e(0x2b3):_0x3e6533=_0x53996e(0x2e6);break;case _0x53996e(0x2cf):_0x3e6533='wss://stream.binance.us:9443';break;default:_0x3e6533=_0x53996e(0x2e6);}exchange=new _0x1ef722({'apiKey':_0x42fe8e,'secret':_0x1f26ab,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x42fe8e,'api_secret':_0x1f26ab,'beautify':!![],'wsUrl':_0x3e6533},logger),config[_0x53996e(0x27e)]=='binanceus'&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':'BTC/BUSD'},'usd':{'coin':'BTCUSDT','symbol':_0x53996e(0x27b)}});}async function loadSymbols(){const _0xfb955e=_0x1a7456;let _0x26e1c1;try{markets=await exchange['loadMarkets']();const _0x52e810=[_0xfb955e(0x24e),_0xfb955e(0x21a),_0xfb955e(0x2f0)];allSymbols=exchange[_0xfb955e(0x261)][_0xfb955e(0x248)](_0x449c7e=>{const _0x402516=_0xfb955e;let _0x825f03=![];return _0x52e810[_0x402516(0x2b7)](_0x2f13d8=>{const _0x5c9c8b=_0x402516;if(_0x449c7e[_0x5c9c8b(0x243)](_0x2f13d8))_0x825f03=!![];}),!_0x825f03;}),_0x26e1c1=!![];}catch(_0x236049){await handleError(_0x236049,_0xfb955e(0x2ac)),_0x26e1c1=![];}return _0x26e1c1;}async function initbot(){const _0x3ed8da=_0x1a7456;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x33fb5c=dbCoinResults[_0x3ed8da(0x1f6)](_0x3ed8da(0x234))[_0x3ed8da(0x26e)]();if(_0x33fb5c[_0x3ed8da(0x244)]==0x0)await resetCoinResults();}async function initclient(){const _0x312c94=_0x1a7456;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x312c94(0x213),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x434110=_0x1a7456;wsinitialized=![];ws1&&(ws1[_0x434110(0x2b7)](_0x43b5b6=>{try{wsClient['closeWs'](_0x43b5b6);}catch(_0xf694bd){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x58c85d){}ws2=null;}}async function initws(){const _0x5a7458=_0x1a7456;cleanws();let _0x2e3e04=[];currentCoins[_0x5a7458(0x2b7)](_0x54ed39=>{const _0x3f81f1=_0x5a7458;if(_0x54ed39[_0x3f81f1(0x2da)]!=config[_0x3f81f1(0x2d4)])_0x2e3e04[_0x3f81f1(0x237)](noslash(_0x54ed39[_0x3f81f1(0x2b8)]));});if(!_0x2e3e04['includes'](stablecoins[_0x5a7458(0x21c)]['coin']))_0x2e3e04[_0x5a7458(0x237)](stablecoins[_0x5a7458(0x21c)]['coin']);if(!_0x2e3e04[_0x5a7458(0x243)](stablecoins[_0x5a7458(0x1f2)][_0x5a7458(0x2da)]))_0x2e3e04[_0x5a7458(0x237)](stablecoins['usd'][_0x5a7458(0x2da)]);if(!_0x2e3e04[_0x5a7458(0x243)](_0x5a7458(0x281)+config['basecoin']))_0x2e3e04[_0x5a7458(0x237)](_0x5a7458(0x281)+config['basecoin']);try{_0x2e3e04['forEach']((_0x45f396,_0x401b4c)=>{const _0x3da829=_0x5a7458;ws1[_0x401b4c]=wsClient[_0x3da829(0x2b4)](_0x45f396,'1m');}),ws2=wsClient[_0x5a7458(0x2b6)](),wsClient['on'](_0x5a7458(0x208),_0x241204=>{const _0x44d920=_0x5a7458;if(!Array[_0x44d920(0x28e)](_0x241204)&&!_0x241204[_0x44d920(0x2b1)][_0x44d920(0x243)](_0x44d920(0x2e1))){if(_0x241204[_0x44d920(0x26a)]===_0x44d920(0x1f8)){global[_0x44d920(0x22e)][_0x241204['kline']['symbol']]=_0x241204[_0x44d920(0x1f8)][_0x44d920(0x2c4)];return;}}else{if(!Array[_0x44d920(0x28e)](_0x241204)&&_0x241204[_0x44d920(0x2b1)][_0x44d920(0x243)](_0x44d920(0x2e1))){if(_0x241204['wsMarket'][_0x44d920(0x243)](_0x44d920(0x29d))){updateNumberCoins(_0x241204);return;}}}}),wsClient['on'](_0x5a7458(0x231),async _0x2b6c6a=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x502bb5){await handleError(_0x502bb5,_0x5a7458(0x297));}let _0xd188f0,_0x286cd3=0x0;loading[_0x5a7458(0x2a0)]=[];let _0x5df141=0x0;currentCoins[_0x5a7458(0x2b7)](_0x2c9c8d=>{const _0x190fc5=_0x5a7458;if(_0x2c9c8d[_0x190fc5(0x2da)]!=config['basecoin'])loading[_0x190fc5(0x2a0)][_0x190fc5(0x237)](_0x2c9c8d[_0x190fc5(0x2b8)]);}),loadingCanceled=![];while(_0xd188f0!=currentCoins[_0x5a7458(0x244)]-0x1){_0xd188f0=0x0,currentCoins[_0x5a7458(0x2b7)](_0x10edb0=>{const _0x1ca89b=_0x5a7458;_0x10edb0[_0x1ca89b(0x2da)]!=config[_0x1ca89b(0x2d4)]&&global[_0x1ca89b(0x22e)][noslash(_0x10edb0[_0x1ca89b(0x2b8)])]&&(loading[_0x1ca89b(0x2a0)]=loading[_0x1ca89b(0x2a0)][_0x1ca89b(0x248)](_0x4972df=>_0x4972df!=_0x10edb0[_0x1ca89b(0x2b8)]),_0xd188f0++);}),loading[_0x5a7458(0x2af)]=Math[_0x5a7458(0x20a)](_0xd188f0/(currentCoins['length']-0x1)*0x64);_0x5df141>0x1e*0x5&&(loading[_0x5a7458(0x247)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xd188f0!=_0x286cd3&&(_0x286cd3=_0xd188f0,emitLoadingProgress()),_0x5df141++,await sleep(0xc8);}if(_0xd188f0==currentCoins[_0x5a7458(0x244)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x364f09=_0x1a7456;proxyEmit(_0x364f09(0x2db),loading);}async function getFiat(){const _0x3f3013=_0x1a7456;let _0x4320fd=0x0,_0xf6b0e=0x0;try{_0x4320fd=global[_0x3f3013(0x22e)][stablecoins[_0x3f3013(0x21c)][_0x3f3013(0x2da)]],_0xf6b0e=global[_0x3f3013(0x22e)][stablecoins['usd']['coin']];}catch(_0x12aa02){await handleError(_0x12aa02,_0x3f3013(0x2d8));}return{'eur':Number(_0x4320fd),'usd':Number(_0xf6b0e)};}async function setStartDatePerformance(_0x4060d0){const _0x45f4a1=_0x1a7456,_0x54110a=fns[_0x45f4a1(0x221)](new Date(_0x4060d0[_0x45f4a1(0x2d1)]),_0x45f4a1(0x24c));let _0x361653=[];_0x361653[stablecoins[_0x45f4a1(0x21c)][_0x45f4a1(0x2da)]]=await getCloses(stablecoins[_0x45f4a1(0x21c)][_0x45f4a1(0x2b8)],new Date(_0x4060d0['startdate']),0x1),_0x361653[stablecoins['usd'][_0x45f4a1(0x2da)]]=await getCloses(stablecoins[_0x45f4a1(0x1f2)][_0x45f4a1(0x2b8)],new Date(_0x4060d0['startdate']),0x1);let _0x26347f,_0x4ac943=[];_0x4060d0[_0x45f4a1(0x1ee)][_0x45f4a1(0x2b7)](_0x5daa09=>{const _0x92d8dc=_0x45f4a1;!_0x5daa09[_0x92d8dc(0x205)]&&_0x4ac943[_0x92d8dc(0x237)]({'coin':_0x5daa09['coin'],'number':_0x5daa09[_0x92d8dc(0x2c0)],'price':_0x5daa09[_0x92d8dc(0x295)]});}),_0x26347f={'date':_0x54110a,'eur':_0x361653[stablecoins['eur']['coin']][0x0],'usd':_0x361653[stablecoins[_0x45f4a1(0x1f2)][_0x45f4a1(0x2da)]][0x0],'coins':_0x4ac943};let _0x48fef8=dbPerformance['get']('data')[_0x45f4a1(0x22b)]({'date':_0x54110a})[_0x45f4a1(0x26e)]();_0x48fef8?dbPerformance[_0x45f4a1(0x1f6)](_0x45f4a1(0x288))[_0x45f4a1(0x22b)]({'date':_0x54110a})[_0x45f4a1(0x258)](_0x26347f)[_0x45f4a1(0x266)]():dbPerformance['get']('data')[_0x45f4a1(0x237)](_0x26347f)[_0x45f4a1(0x266)](),_0x48fef8=dbPerformance[_0x45f4a1(0x1f6)](_0x45f4a1(0x288))[_0x45f4a1(0x2b5)](_0x45f4a1(0x223))['value'](),_0x48fef8[_0x45f4a1(0x2b7)](_0xe34cf6=>{const _0x3b7958=_0x45f4a1;_0xe34cf6[_0x3b7958(0x223)]<_0x54110a&&dbPerformance[_0x3b7958(0x1f6)](_0x3b7958(0x288))['remove']({'date':_0xe34cf6[_0x3b7958(0x223)]})[_0x3b7958(0x266)]();}),await storePerformance(),emitPerformance();}function _0x516b(_0x23b39f,_0x12363f){const _0x1f99e8=_0x158a();return _0x516b=function(_0xea873e,_0x56def9){_0xea873e=_0xea873e-0x1ec;let _0x158aef=_0x1f99e8[_0xea873e];return _0x158aef;},_0x516b(_0x23b39f,_0x12363f);}async function recreateHistory(_0x4c5b8d){const _0x495074=_0x1a7456;let _0x2d3078,_0x25e904=[];logHistory(_0x495074(0x260),_0x495074(0x2e2)),_0x4c5b8d['portfolio']['forEach'](_0x5de963=>{const _0x1d8524=_0x495074;if(_0x5de963[_0x1d8524(0x2da)]!=config[_0x1d8524(0x2d4)]&&!_0x5de963[_0x1d8524(0x205)])_0x25e904[_0x1d8524(0x237)]({'coin':_0x5de963['coin'],'symbol':_0x5de963[_0x1d8524(0x2b8)]});});let _0x36cbf4=[];try{const _0x1e217d=fns['format'](fns[_0x495074(0x296)](_0x4c5b8d[_0x495074(0x2d1)][_0x495074(0x2de)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x178432 of _0x25e904){if(_0x178432[_0x495074(0x2da)]!=config['basecoin'])_0x2d3078=await exchange[_0x495074(0x2cb)](_0x178432[_0x495074(0x2b8)],Date['parse'](_0x1e217d));_0x2d3078[_0x495074(0x2b7)](_0x47a804=>{const _0x55a00c=_0x495074,_0x166925=_0x178432['symbol'][_0x55a00c(0x243)](config['basecoin']+'/'),_0xf4d2d5=fns['format'](fns[_0x55a00c(0x296)](_0x47a804[_0x55a00c(0x262)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x34b70c=fns[_0x55a00c(0x221)](fns[_0x55a00c(0x296)](_0x47a804['datetime']),_0x55a00c(0x24c));let _0x59470e;if(_0x47a804[_0x55a00c(0x24b)]=='buy'&&_0x166925==![])_0x59470e=_0x47a804[_0x55a00c(0x2ce)];if(_0x47a804[_0x55a00c(0x24b)]=='buy'&&_0x166925==!![])_0x59470e=-_0x47a804[_0x55a00c(0x2ce)]*_0x47a804[_0x55a00c(0x29e)];if(_0x47a804[_0x55a00c(0x24b)]==_0x55a00c(0x20b)&&_0x166925==![])_0x59470e=-_0x47a804[_0x55a00c(0x2ce)];if(_0x47a804[_0x55a00c(0x24b)]==_0x55a00c(0x20b)&&_0x166925==!![])_0x59470e=_0x47a804['amount']*_0x47a804['price'];_0x36cbf4['push']({'timestamp':_0xf4d2d5,'date':_0x34b70c,'coin':_0x178432[_0x55a00c(0x2da)],'symbol':_0x178432[_0x55a00c(0x2b8)],'type':_0x47a804['type'],'side':_0x47a804['side'],'reverse':_0x166925,'amount':formatResult(_0x47a804[_0x55a00c(0x259)],0x8),'filled':formatResult(_0x47a804['filled'],0x8),'coinamount':formatResult(_0x59470e,0x8),'price':formatResult(_0x47a804['price'],0x8)});let _0x38d02d;if(_0x47a804[_0x55a00c(0x24b)]==_0x55a00c(0x2be)&&_0x166925==![])_0x38d02d=-_0x47a804[_0x55a00c(0x2ce)]*_0x47a804['price'];if(_0x47a804[_0x55a00c(0x24b)]==_0x55a00c(0x2be)&&_0x166925==!![])_0x38d02d=_0x47a804[_0x55a00c(0x2ce)];if(_0x47a804[_0x55a00c(0x24b)]=='sell'&&_0x166925==![])_0x38d02d=_0x47a804[_0x55a00c(0x2ce)]*_0x47a804[_0x55a00c(0x29e)];if(_0x47a804[_0x55a00c(0x24b)]=='sell'&&_0x166925==!![])_0x38d02d=-_0x47a804[_0x55a00c(0x2ce)];_0x36cbf4[_0x55a00c(0x237)]({'date':_0x34b70c,'coin':config[_0x55a00c(0x2d4)],'coinamount':formatResult(_0x38d02d,0x8)});});}_0x36cbf4['sort']((_0x1ea666,_0x1de0d1)=>_0x1ea666[_0x495074(0x236)]>_0x1de0d1[_0x495074(0x236)]?0x1:_0x1de0d1[_0x495074(0x236)]>_0x1ea666['timestamp']?-0x1:0x0),dbLogs['get'](_0x495074(0x22f))[_0x495074(0x2c2)]()[_0x495074(0x266)](),_0x36cbf4['forEach'](_0xd5066d=>{const _0x2f96f0=_0x495074;let _0x100ae6;_0xd5066d[_0x2f96f0(0x2da)]!=config[_0x2f96f0(0x2d4)]&&(_0x100ae6={'time':_0xd5066d[_0x2f96f0(0x236)],'type':_0x2f96f0(0x210),'event':_0x2f96f0(0x25d)+_0xd5066d[_0x2f96f0(0x2b8)]+'\x20'+_0xd5066d[_0x2f96f0(0x24b)]+'\x20#'+_0xd5066d[_0x2f96f0(0x2ce)]+'\x20@'+_0xd5066d[_0x2f96f0(0x29e)]},dbLogs[_0x2f96f0(0x1f6)](_0x2f96f0(0x22f))['push'](_0x100ae6)[_0x2f96f0(0x266)]());});const _0x136744=fns[_0x495074(0x278)]({'start':new Date(_0x4c5b8d['startdate']),'end':new Date()})['map'](_0x4ac42f=>fns[_0x495074(0x221)](_0x4ac42f,_0x495074(0x24c)));let _0x4a8bfa=[];_0x4c5b8d['portfolio'][_0x495074(0x2b7)](_0x3f2b5c=>{const _0x494409=_0x495074;if(!_0x3f2b5c[_0x494409(0x205)]){_0x4a8bfa[_0x3f2b5c[_0x494409(0x2da)]]=[];let _0x931a94=_0x3f2b5c[_0x494409(0x2c0)];_0x136744[_0x494409(0x2b7)]((_0x3fca94,_0x45b753)=>{const _0x4ac96e=_0x494409;let _0x56d3f0=_0x36cbf4[_0x4ac96e(0x248)](_0x41b563=>_0x41b563[_0x4ac96e(0x2da)]==_0x3f2b5c[_0x4ac96e(0x2da)]&&_0x41b563[_0x4ac96e(0x223)]==_0x3fca94);if(_0x56d3f0[_0x4ac96e(0x244)]!=0x0){let _0x4bacb1=_0x56d3f0['reduce']((_0x121109,_0x3a4b05)=>{return _0x121109+=_0x3a4b05['coinamount'],_0x121109;},0x0);_0x931a94+=_0x4bacb1;}_0x4a8bfa[_0x3f2b5c['coin']][_0x3fca94]=_0x931a94;});}});const _0x43c95c=[..._0x25e904];_0x43c95c[_0x495074(0x237)]({'coin':stablecoins[_0x495074(0x21c)][_0x495074(0x2da)],'symbol':stablecoins['eur']['symbol']}),_0x43c95c[_0x495074(0x237)]({'coin':stablecoins[_0x495074(0x1f2)][_0x495074(0x2da)],'symbol':stablecoins[_0x495074(0x1f2)][_0x495074(0x2b8)]});let _0x2713cd=[];for(const _0x46ed4f of _0x43c95c){_0x2713cd[_0x46ed4f[_0x495074(0x2da)]]=await getCloses(_0x46ed4f['symbol'],new Date(_0x4c5b8d[_0x495074(0x2d1)]));}dbPerformance[_0x495074(0x1f6)]('data')[_0x495074(0x2c2)]()[_0x495074(0x266)](),_0x136744['forEach']((_0x4c7317,_0x4b7c6b)=>{const _0x13d937=_0x495074;let _0x43538b,_0x2264d5=[];_0x4b7c6b==0x0?(_0x4c5b8d[_0x13d937(0x1ee)][_0x13d937(0x2b7)](_0x3f66e5=>{const _0x1a4363=_0x13d937;!_0x3f66e5[_0x1a4363(0x205)]&&_0x2264d5[_0x1a4363(0x237)]({'coin':_0x3f66e5['coin'],'number':_0x3f66e5[_0x1a4363(0x2c0)],'price':_0x3f66e5['startprice']});}),_0x43538b={'date':_0x4c7317,'eur':_0x2713cd[stablecoins[_0x13d937(0x21c)][_0x13d937(0x2da)]][_0x4b7c6b],'usd':_0x2713cd[stablecoins[_0x13d937(0x1f2)]['coin']][_0x4b7c6b],'coins':_0x2264d5}):(_0x4c5b8d[_0x13d937(0x1ee)][_0x13d937(0x2b7)](_0x474b80=>{const _0x276432=_0x13d937;!_0x474b80[_0x276432(0x205)]&&_0x2264d5[_0x276432(0x237)]({'coin':_0x474b80[_0x276432(0x2da)],'number':_0x4a8bfa[_0x474b80['coin']][_0x4c7317],'price':_0x474b80['coin']==config[_0x276432(0x2d4)]?0x1:_0x2713cd[_0x474b80[_0x276432(0x2da)]][_0x4b7c6b]});}),_0x43538b={'date':_0x4c7317,'eur':_0x2713cd[stablecoins[_0x13d937(0x21c)]['coin']][_0x4b7c6b],'usd':_0x2713cd[stablecoins[_0x13d937(0x1f2)][_0x13d937(0x2da)]][_0x4b7c6b],'coins':_0x2264d5}),dbPerformance['get'](_0x13d937(0x288))[_0x13d937(0x237)](_0x43538b)[_0x13d937(0x266)]();}),emitPerformance(),await resetCoinResults();for(let _0x498aa2 of _0x36cbf4){_0x498aa2[_0x495074(0x2da)]!=config[_0x495074(0x2d4)]&&await updateCoinResults(_0x498aa2);}logHistory(_0x495074(0x260),_0x495074(0x291));}catch(_0x2a6732){await handleError(_0x2a6732,'recreateHistory()');}}async function getCloses(_0x341e4b,_0x1facae,_0x3031ee=undefined){const _0x4d841a=_0x1a7456,_0x3543f3='1d';let _0x54e8e9,_0x63fa8e;const _0x4a093d=fns[_0x4d841a(0x272)](new Date(),_0x1facae)+0x1;try{const _0x56b822=exchange[_0x4d841a(0x2b2)]()-_0x4a093d*0x18*0xe10*0x3e8;_0x54e8e9=await exchange[_0x4d841a(0x23c)](_0x341e4b,_0x3543f3,_0x56b822,_0x3031ee),_0x63fa8e=await exchange[_0x4d841a(0x2bb)](_0x341e4b);}catch(_0x2b00a2){await handleError(_0x2b00a2,_0x4d841a(0x2c1));}let _0x45b697=ohlcvToCloses(_0x54e8e9);return _0x45b697[_0x4d841a(0x237)](_0x63fa8e[_0x341e4b]['last']),_0x45b697;}function ohlcvToCloses(_0x541999){const _0x23a155=_0x1a7456;let _0x415e24=[];return _0x541999[_0x23a155(0x2b7)](function(_0x4f80e2){const _0x490750=_0x23a155;_0x415e24[_0x490750(0x237)](_0x4f80e2[0x4]);}),_0x415e24;}function getConfiguration(_0x1c85a6){const _0x35b111=_0x1a7456;let _0x8887d5=dbConfig[_0x35b111(0x1f6)](_0x35b111(0x2ec))['find']({'botID':_0x1c85a6})[_0x35b111(0x26e)]();if(_0x8887d5){let _0x7c0813=![];!_0x8887d5[_0x35b111(0x27e)]&&(_0x8887d5={..._0x8887d5,'exchange':_0x35b111(0x2b3)},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x2d4)]&&(_0x8887d5={..._0x8887d5,'basecoin':_0x35b111(0x21f)},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x2a7)]&&(_0x8887d5={..._0x8887d5,'ordertype':_0x35b111(0x22d)},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x247)]&&(_0x8887d5={..._0x8887d5,'timeout':0x14},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x2eb)]&&(_0x8887d5={..._0x8887d5,'emojibuy':''},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x2ef)]&&(_0x8887d5={..._0x8887d5,'emojisell':''},_0x7c0813=!![]),!_0x8887d5[_0x35b111(0x25c)]&&(_0x8887d5={..._0x8887d5,'showname':![]},_0x7c0813=!![]),_0x7c0813&&(_0x8887d5={'botID':_0x8887d5[_0x35b111(0x2f3)],'exchange':_0x8887d5[_0x35b111(0x27e)],'apiKey':_0x8887d5[_0x35b111(0x27d)],'apiSecret':_0x8887d5[_0x35b111(0x1f7)],'basecoin':_0x8887d5[_0x35b111(0x2d4)],'botname':_0x8887d5[_0x35b111(0x1fe)],'showname':_0x8887d5[_0x35b111(0x25c)],'threshold':_0x8887d5[_0x35b111(0x26b)],'ordertype':_0x8887d5[_0x35b111(0x2a7)],'timeout':_0x8887d5[_0x35b111(0x247)],'startdate':_0x8887d5[_0x35b111(0x2d1)],'recreate':_0x8887d5['recreate'],'timeshift':_0x8887d5['timeshift'],'headless':_0x8887d5[_0x35b111(0x24d)],'cooldown':_0x8887d5[_0x35b111(0x2dd)],'emojibuy':_0x8887d5[_0x35b111(0x2eb)],'emojisell':_0x8887d5[_0x35b111(0x2ef)],'portfolio':_0x8887d5[_0x35b111(0x1ee)]},dbConfig[_0x35b111(0x1f6)](_0x35b111(0x2ec))[_0x35b111(0x2c2)]()[_0x35b111(0x266)](),dbConfig[_0x35b111(0x1f6)](_0x35b111(0x2ec))['push'](_0x8887d5)['write']());}else _0x8887d5={'botID':_0x1c85a6,'exchange':_0x35b111(0x2b3),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x35b111(0x2f2)+_0x1c85a6,'showname':![],'threshold':'3','ordertype':_0x35b111(0x22d),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x35b111(0x27a)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x8887d5;}function emittedConfiguration(){const _0x3244e9=_0x1a7456;let _0x414bc5;return config[_0x3244e9(0x27d)]==''?_0x414bc5=config:_0x414bc5={...config,'apiKey':'************','apiSecret':_0x3244e9(0x21e)},_0x414bc5;}function getSettings(){const _0x55312d=_0x1a7456;return dbSettings[_0x55312d(0x1f6)](_0x55312d(0x2ed))[_0x55312d(0x26e)]();}function getSecure(){const _0x3927d3=_0x1a7456;return dbSecure[_0x3927d3(0x1f6)]('secure')[_0x3927d3(0x26e)]()||{};}function updateTimeshift(_0x37942a){const _0x39096b=_0x1a7456;let _0x1f1de1=dbConfig[_0x39096b(0x1f6)](_0x39096b(0x2ec))[_0x39096b(0x22b)]({'botID':botID})['value']();_0x1f1de1&&dbConfig[_0x39096b(0x1f6)]('bot')[_0x39096b(0x22b)]({'botID':botID})[_0x39096b(0x258)]({'timeshift':_0x37942a})[_0x39096b(0x266)](),config[_0x39096b(0x27a)]=_0x37942a,proxyEmit(_0x39096b(0x242),emittedConfiguration());}async function storeConfiguration(_0x3da317){const _0x418779=_0x1a7456;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x25051f=dbConfig[_0x418779(0x1f6)](_0x418779(0x2ec))[_0x418779(0x22b)]({'botID':botID})[_0x418779(0x26e)]();_0x3da317={..._0x3da317,'apiKey':crypt[_0x418779(0x22a)](secure[_0x418779(0x2d7)],_0x3da317['apiKey'])[_0x418779(0x264)],'apiSecret':crypt[_0x418779(0x22a)](secure[_0x418779(0x2d7)],_0x3da317[_0x418779(0x1f7)])[_0x418779(0x264)]};if(_0x25051f){if(_0x3da317[_0x418779(0x27d)]==_0x418779(0x21e))_0x3da317[_0x418779(0x27d)]=config[_0x418779(0x27d)];if(_0x3da317[_0x418779(0x1f7)]==_0x418779(0x21e))_0x3da317[_0x418779(0x1f7)]=config['apiSecret'];dbConfig['get'](_0x418779(0x2ec))[_0x418779(0x22b)]({'botID':botID})[_0x418779(0x258)](_0x3da317)['write']();}else dbConfig[_0x418779(0x1f6)](_0x418779(0x2ec))['push'](_0x3da317)[_0x418779(0x266)](),process[_0x418779(0x2e8)]({'status':_0x418779(0x284),'live':_0x418779(0x2c5)});config={..._0x3da317};if(config[_0x418779(0x2bc)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x418779(0x2e8)]({'botname':_0x3da317['botname']}),proxyEmit(_0x418779(0x1fa)),reset();}async function storeHeadless(_0x436657){const _0x31e1f6=_0x1a7456,_0x43868b={...config,'headless':_0x436657[_0x31e1f6(0x24d)]};let _0x466601=dbConfig[_0x31e1f6(0x1f6)](_0x31e1f6(0x2ec))[_0x31e1f6(0x22b)]({'botID':botID})[_0x31e1f6(0x26e)]();_0x466601&&dbConfig[_0x31e1f6(0x1f6)]('bot')[_0x31e1f6(0x22b)]({'botID':botID})[_0x31e1f6(0x258)](_0x43868b)[_0x31e1f6(0x266)](),config={..._0x43868b},proxyEmit(_0x31e1f6(0x242),emittedConfiguration());}function noslash(_0x5cdd4f){const _0x12a027=_0x1a7456;return _0x5cdd4f[_0x12a027(0x2de)]('/','');}function updateNumberCoins(_0x255afb){const _0x4f1462=_0x1a7456;_0x255afb[_0x4f1462(0x26a)]&&_0x255afb[_0x4f1462(0x26a)]==_0x4f1462(0x201)&&_0x255afb[_0x4f1462(0x213)][_0x4f1462(0x2b7)](_0x15affd=>{const _0x1952d7=_0x4f1462;let _0x4711e2=currentCoins[_0x1952d7(0x22b)](_0x4bf765=>_0x4bf765[_0x1952d7(0x2da)]==_0x15affd[_0x1952d7(0x21d)]),_0x45bf89=config[_0x1952d7(0x1ee)]['find'](_0x1837b6=>_0x1837b6[_0x1952d7(0x2da)]==_0x15affd[_0x1952d7(0x21d)]);if(_0x4711e2&&_0x45bf89)_0x4711e2[_0x1952d7(0x246)]=Math[_0x1952d7(0x1ec)](Number(_0x15affd[_0x1952d7(0x1ed)])+(_0x45bf89[_0x1952d7(0x2e4)]||0x0),0x0);});if(_0x255afb[_0x4f1462(0x26a)]&&_0x255afb['eventType']=='executionReport'){if(_0x255afb[_0x4f1462(0x1f4)]==_0x4f1462(0x269)&&_0x255afb[_0x4f1462(0x238)]==_0x4f1462(0x222)){if(lastOrders)lastOrders[_0x4f1462(0x2b7)](_0x2b0cfa=>{const _0xdad775=_0x4f1462;if(_0x2b0cfa[_0xdad775(0x254)]==_0x255afb[_0xdad775(0x254)]){if(_0x2b0cfa[_0xdad775(0x2c7)])_0x2b0cfa[_0xdad775(0x259)]=_0x255afb[_0xdad775(0x250)]*_0x2b0cfa[_0xdad775(0x29e)];else _0x2b0cfa['filled']=_0x255afb['accumulatedQuantity'];}});}}}async function getCoins(_0x164659=!![],_0x32914b=config[_0x1a7456(0x2d4)]){const _0x2fc611=_0x1a7456;let _0x492b05,_0x57c25a=[],_0x3271d2=[],_0x4c58b5=[];try{_0x492b05=await exchange[_0x2fc611(0x2e5)](),mybalances=_0x492b05['total'];if(!_0x164659)for(const [_0x34fb78,_0xda3633]of Object[_0x2fc611(0x214)](mybalances)){_0x4c58b5['push'](_0x34fb78);}else config[_0x2fc611(0x1ee)][_0x2fc611(0x2b7)](_0x48705b=>{const _0x45f498=_0x2fc611;if(!_0x48705b['excluded'])_0x4c58b5['push'](_0x48705b[_0x45f498(0x2da)]);});if(_0x32914b=='')for(const [_0x2d83f8,_0x1071db]of Object[_0x2fc611(0x214)](mybalances)){_0x1071db['toString']()!=0x0&&_0x3271d2[_0x2fc611(0x237)]({'coin':_0x2d83f8});}else for(const [_0x4cd9fe,_0x4c27d4]of Object[_0x2fc611(0x214)](mybalances)){if(_0x4c58b5[_0x2fc611(0x243)](_0x4cd9fe)){const _0x187f86=config[_0x2fc611(0x1ee)][_0x2fc611(0x22b)](_0x40e704=>_0x40e704[_0x2fc611(0x2da)]==_0x4cd9fe);if((_0x4c27d4[_0x2fc611(0x23a)]()!=0x0||_0x187f86)&&(allSymbols[_0x2fc611(0x243)](_0x4cd9fe+'/'+_0x32914b)||_0x4cd9fe==_0x32914b))_0x3271d2[_0x2fc611(0x237)]({'coin':_0x4cd9fe,'symbol':_0x4cd9fe+'/'+_0x32914b,'reverse':![],'number':Math[_0x2fc611(0x1ec)](_0x4c27d4+(_0x187f86&&_0x187f86[_0x2fc611(0x2e4)]||0x0),0x0)}),_0x4cd9fe!=_0x32914b&&_0x57c25a[_0x2fc611(0x237)](_0x4cd9fe+'/'+_0x32914b);else(_0x4c27d4[_0x2fc611(0x23a)]()!=0x0||_0x187f86)&&allSymbols[_0x2fc611(0x243)](_0x32914b+'/'+_0x4cd9fe)&&(_0x3271d2[_0x2fc611(0x237)]({'coin':_0x4cd9fe,'symbol':_0x32914b+'/'+_0x4cd9fe,'reverse':!![],'number':Math[_0x2fc611(0x1ec)](_0x4c27d4+(_0x187f86&&_0x187f86[_0x2fc611(0x2e4)]||0x0),0x0)}),_0x4cd9fe!=_0x32914b&&_0x57c25a[_0x2fc611(0x237)](_0x32914b+'/'+_0x4cd9fe));}}}catch(_0x2eee0f){if(!_0x164659){if(_0x2eee0f[_0x2fc611(0x23a)]()['includes'](_0x2fc611(0x217)))return logHistory(_0x2fc611(0x292),_0x2fc611(0x26c)),![];else{if(_0x2eee0f[_0x2fc611(0x23a)]()[_0x2fc611(0x243)](_0x2fc611(0x270)))return logHistory(_0x2fc611(0x292),_0x2fc611(0x255)),![];else{if(_0x2eee0f[_0x2fc611(0x23a)]()[_0x2fc611(0x243)](_0x2fc611(0x2d5)))return logHistory(_0x2fc611(0x292),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x2eee0f,_0x2fc611(0x202));}}}else await handleError(_0x2eee0f,_0x2fc611(0x202));}return _0x3271d2;}async function getPortfolio(_0x258d5c){const _0x168a89=_0x1a7456;let _0x2ea1b4=[],_0xc4634=[],_0x2d4aee,_0x405412=[],_0x5d987a,_0x5f00e0;_0x258d5c['apiKey']===_0x168a89(0x21e)||_0x258d5c[_0x168a89(0x1f7)]===_0x168a89(0x21e)?(_0x5d987a=config[_0x168a89(0x27d)],_0x5f00e0=config[_0x168a89(0x1f7)]):(_0x5d987a=_0x258d5c[_0x168a89(0x27d)],_0x5f00e0=_0x258d5c['apiSecret']);await initExchange(_0x5d987a,_0x5f00e0);let _0x3add4a=await loadSymbols();if(_0x3add4a){_0x405412=await getCoins(![],_0x258d5c[_0x168a89(0x2d4)]);if(_0x405412===![])proxyEmit(_0x168a89(0x1ee),![]);else{if(_0x258d5c[_0x168a89(0x2d4)]=='')proxyEmit(_0x168a89(0x1ee),_0x405412);else{_0x405412[_0x168a89(0x2b7)](_0xdd2154=>{_0x2ea1b4['push'](_0xdd2154['symbol']);});try{_0xc4634=await exchange[_0x168a89(0x2bb)](_0x2ea1b4);}catch(_0x45a477){await handleError(_0x45a477,'getPortfolio()');}_0x405412[_0x168a89(0x2b7)](_0x2a6208=>{const _0x45e018=_0x168a89;_0x2a6208[_0x45e018(0x2da)]!=_0x258d5c[_0x45e018(0x2d4)]?_0x2d4aee=_0x2a6208['reverse']?0x1/_0xc4634[_0x2a6208[_0x45e018(0x2b8)]]['last']:_0xc4634[_0x2a6208['symbol']][_0x45e018(0x227)]:_0x2d4aee=0x1,_0x2a6208[_0x45e018(0x29e)]=formatResult(_0x2d4aee,0x8);}),proxyEmit(_0x168a89(0x1ee),_0x405412);}}}else proxyEmit(_0x168a89(0x1ee),![]);}function checkMinimums(_0x4f8b67){const _0xfacbc6=_0x1a7456;let _0x45eee0=!![];const _0xabef37=!_0x4f8b67['reverse']?markets[_0x4f8b67[_0xfacbc6(0x2b8)]][_0xfacbc6(0x220)][_0xfacbc6(0x2ce)]['min']:markets[_0x4f8b67[_0xfacbc6(0x2b8)]][_0xfacbc6(0x220)][_0xfacbc6(0x224)][_0xfacbc6(0x2b0)],_0x250ed7=!_0x4f8b67[_0xfacbc6(0x2c7)]?markets[_0x4f8b67[_0xfacbc6(0x2b8)]][_0xfacbc6(0x220)][_0xfacbc6(0x224)][_0xfacbc6(0x2b0)]:markets[_0x4f8b67[_0xfacbc6(0x2b8)]]['limits'][_0xfacbc6(0x2ce)][_0xfacbc6(0x2b0)];if(Math[_0xfacbc6(0x2d9)](_0x4f8b67[_0xfacbc6(0x23b)])<_0xabef37)_0x45eee0=![];if(Math[_0xfacbc6(0x2d9)](_0x4f8b67['trade'])*_0x4f8b67[_0xfacbc6(0x227)]<_0x250ed7)_0x45eee0=![];return _0x45eee0;}async function getBalances(){const _0x23c454=_0x1a7456;let _0x4dfca2=0x0,_0xf4b2a9;const _0x5d3fcb=config[_0x23c454(0x26b)];currentCoins[_0x23c454(0x2b7)](_0x488e5c=>{const _0x327061=_0x23c454;if(_0x488e5c[_0x327061(0x2da)]!=config[_0x327061(0x2d4)]){let _0x4d007c=global[_0x327061(0x22e)][noslash(_0x488e5c[_0x327061(0x2b8)])];_0xf4b2a9=_0x488e5c[_0x327061(0x2c7)]?0x1/_0x4d007c:_0x4d007c;}else _0xf4b2a9=0x1;let _0x1f7ec3=_0x488e5c[_0x327061(0x246)]*_0xf4b2a9;_0x4dfca2+=_0x1f7ec3,_0x488e5c['last']=formatResult(Number(_0xf4b2a9),0x8),_0x488e5c[_0x327061(0x26e)]=_0x1f7ec3;}),currentCoins[_0x23c454(0x2b7)](_0x2ab865=>{const _0x304eaf=_0x23c454;let _0x51a33f=config[_0x304eaf(0x1ee)]['find'](_0x5423b8=>_0x5423b8['coin']==_0x2ab865[_0x304eaf(0x2da)]),_0x322701=Number(_0x51a33f[_0x304eaf(0x2ba)]),_0x27fa07=_0x2ab865[_0x304eaf(0x26e)]/_0x4dfca2*0x64,_0x806ad1=_0x322701*_0x4dfca2/0x64/_0x2ab865[_0x304eaf(0x227)]-_0x2ab865[_0x304eaf(0x246)];_0x2ab865[_0x304eaf(0x2ba)]=formatResult(_0x27fa07,0x3),_0x2ab865['target']=formatResult(_0x322701,0x3),_0x2ab865['trade']=formatResult(_0x806ad1,0x8),_0x2ab865[_0x304eaf(0x24b)]='',_0x2ab865[_0x304eaf(0x2df)]='';if(_0x2ab865[_0x304eaf(0x2da)]!=config['basecoin']){if(_0x2ab865[_0x304eaf(0x2ba)]>_0x322701)_0x2ab865[_0x304eaf(0x24b)]='sell',_0x2ab865['valid']=checkMinimums(_0x2ab865);else _0x2ab865['distribution']<_0x322701&&(_0x2ab865[_0x304eaf(0x24b)]=_0x304eaf(0x2be),_0x2ab865[_0x304eaf(0x2df)]=checkMinimums(_0x2ab865));}_0x2ab865[_0x304eaf(0x29c)]=_0x2ab865[_0x304eaf(0x2ba)]/_0x2ab865['target']-0x1;}),currentCoins[_0x23c454(0x286)]((_0x4bc349,_0x18ddd5)=>_0x4bc349[_0x23c454(0x29c)]<_0x18ddd5[_0x23c454(0x29c)]?0x1:_0x18ddd5[_0x23c454(0x29c)]<_0x4bc349[_0x23c454(0x29c)]?-0x1:0x0);const _0x273481=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x273481['eur'],'usd':_0x273481[_0x23c454(0x1f2)],'portfolio':JSON[_0x23c454(0x2a4)](currentCoins),'threshold':_0x5d3fcb},proxyEmit(_0x23c454(0x213),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x23c454(0x24d)])headlessMode({'portfolio':currentCoins,'threshold':_0x5d3fcb});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x369d59=_0x1a7456;if(!lastBalances)return;let _0x2b105e=await getStartingBalances(![]),_0x3f6ad5=[],_0x3efd57;JSON[_0x369d59(0x27f)](lastBalances[_0x369d59(0x1ee)])['forEach'](_0x24ebdf=>{const _0x306be9=_0x369d59;let _0x17cef2={'coin':_0x24ebdf[_0x306be9(0x2da)],'number':_0x24ebdf[_0x306be9(0x246)],'price':_0x24ebdf[_0x306be9(0x227)]};_0x3f6ad5[_0x306be9(0x237)](_0x17cef2);});const _0x3c41e3=await getFiat();_0x3efd57={'date':lastBalances[_0x369d59(0x233)][_0x369d59(0x1fc)]('\x20')[0x0],'eur':_0x3c41e3[_0x369d59(0x21c)],'usd':_0x3c41e3[_0x369d59(0x1f2)],'coins':_0x3f6ad5};let _0x5a41de=dbPerformance['get'](_0x369d59(0x288))[_0x369d59(0x22b)]({'date':_0x3efd57[_0x369d59(0x223)]})[_0x369d59(0x26e)]();_0x5a41de?dbPerformance[_0x369d59(0x1f6)](_0x369d59(0x288))[_0x369d59(0x22b)]({'date':_0x3efd57[_0x369d59(0x223)]})[_0x369d59(0x258)](_0x3efd57)[_0x369d59(0x266)]():dbPerformance['get'](_0x369d59(0x288))['push'](_0x3efd57)[_0x369d59(0x266)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x221d63=_0x1a7456;if(dbPerformance[_0x221d63(0x29a)](_0x221d63(0x288))[_0x221d63(0x26e)]()){let _0x4ce217=dbPerformance['get'](_0x221d63(0x288))[_0x221d63(0x2b5)](_0x221d63(0x223))[_0x221d63(0x26e)]();proxyEmit('performance',_0x4ce217),lastPerformanceEmitted=getDate();}else proxyEmit(_0x221d63(0x212),[]);}async function getStartingBalances(_0x1bd76d=!![]){const _0x28543b=_0x1a7456;let _0x3182ba=dbPerformance[_0x28543b(0x1f6)](_0x28543b(0x288))['find']({'date':config[_0x28543b(0x2d1)]})[_0x28543b(0x26e)]();config[_0x28543b(0x27d)]!=''&&!_0x3182ba&&(await setStartDatePerformance(config),_0x3182ba=dbPerformance[_0x28543b(0x1f6)](_0x28543b(0x288))[_0x28543b(0x22b)]({'date':config[_0x28543b(0x2d1)]})[_0x28543b(0x26e)]());if(config['apiKey']==''||!_0x3182ba)return{};let _0x2de378=0x0,_0x4fed3d=0x0,_0x518cea=0x0,_0x1aa7cb=[],_0x27fbe1=0x0;config['portfolio'][_0x28543b(0x2b7)](_0xceb22c=>{const _0x29f2ea=_0x28543b;if(!_0xceb22c[_0x29f2ea(0x205)]){_0x1aa7cb[_0x27fbe1]={'coin':_0xceb22c['coin'],'symbol':_0xceb22c[_0x29f2ea(0x2b8)],'number':_0xceb22c[_0x29f2ea(0x2c0)],'price':_0xceb22c[_0x29f2ea(0x295)]},_0x2de378+=_0xceb22c['startprice']*_0xceb22c[_0x29f2ea(0x2c0)];if(config['basecoin']=='BTC')_0x4fed3d+=_0xceb22c[_0x29f2ea(0x295)]*_0xceb22c[_0x29f2ea(0x2c0)]*_0x3182ba[_0x29f2ea(0x21c)],_0x518cea+=_0xceb22c['startprice']*_0xceb22c[_0x29f2ea(0x2c0)]*_0x3182ba[_0x29f2ea(0x1f2)];else{if(config[_0x29f2ea(0x2d4)]==_0x29f2ea(0x2a8)||config[_0x29f2ea(0x2d4)]==_0x29f2ea(0x29b)||config['basecoin']=='USDC')_0x4fed3d+=_0xceb22c[_0x29f2ea(0x295)]*_0xceb22c[_0x29f2ea(0x2c0)]*_0x3182ba[_0x29f2ea(0x21c)]/_0x3182ba[_0x29f2ea(0x1f2)],_0x518cea+=_0xceb22c[_0x29f2ea(0x295)]*_0xceb22c[_0x29f2ea(0x2c0)];else config[_0x29f2ea(0x2d4)]=='EUR'&&(_0x4fed3d+=_0xceb22c[_0x29f2ea(0x295)]*_0xceb22c[_0x29f2ea(0x2c0)],_0x518cea+=_0xceb22c[_0x29f2ea(0x295)]*_0xceb22c[_0x29f2ea(0x2c0)]*_0x3182ba['usd']/_0x3182ba[_0x29f2ea(0x21c)]);}_0x27fbe1++;}});let _0x564fcb={'basecoin':_0x2de378,'eur':_0x4fed3d,'usd':_0x518cea,'coins':_0x1aa7cb};if(_0x1bd76d)proxyEmit('starting-balances',_0x564fcb);return _0x564fcb;}function headlessMode(_0xbe2f1f){const _0x595d96=_0x1a7456;let _0x59826f=_0xbe2f1f[_0x595d96(0x1ee)],_0x1b2822=_0xbe2f1f['threshold'],_0x191432=[];for(let _0x437d9e of _0x59826f){if(_0x437d9e[_0x595d96(0x2da)]!=config[_0x595d96(0x2d4)]){if(_0x437d9e[_0x595d96(0x2ba)]/_0x437d9e[_0x595d96(0x24a)]-0x1>=_0x1b2822/0x64){if(_0x437d9e[_0x595d96(0x2df)])_0x191432[_0x595d96(0x237)](_0x437d9e);}else{if(_0x437d9e[_0x595d96(0x2ba)]/_0x437d9e[_0x595d96(0x24a)]-0x1<=-_0x1b2822/0x64){if(_0x437d9e[_0x595d96(0x2df)])_0x191432[_0x595d96(0x237)](_0x437d9e);}}}}_0x191432[_0x595d96(0x244)]>0x0&&placeOrder(_0x191432);}function symbolToCoin(_0x3e8d9c){const _0x134dca=_0x1a7456;let _0x1b9524;if(_0x3e8d9c[_0x134dca(0x243)]('/'+config[_0x134dca(0x2d4)]))_0x1b9524=_0x3e8d9c['replace']('/'+config[_0x134dca(0x2d4)],'');if(_0x3e8d9c[_0x134dca(0x243)](config[_0x134dca(0x2d4)]+'/'))_0x1b9524=_0x3e8d9c[_0x134dca(0x2de)](config[_0x134dca(0x2d4)]+'/','');return _0x1b9524;}async function validateOrders(_0x11401b=0x0){const _0xd63761=_0x1a7456;let _0x3e0326=[],_0xe01bd1=config[_0xd63761(0x2a7)]==_0xd63761(0x22d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xd63761(0x247)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xd63761(0x2b7)](_0x448544=>{const _0x1b4956=_0xd63761;let _0x552208=previousCoins[_0x1b4956(0x22b)](_0x230342=>_0x230342['coin']==symbolToCoin(_0x448544[_0x1b4956(0x2b8)])),_0x2d70e6=currentCoins[_0x1b4956(0x22b)](_0x1bf99f=>_0x1bf99f[_0x1b4956(0x2da)]==symbolToCoin(_0x448544['symbol'])),_0x498df5,_0x2b5a8b;_0x448544[_0x1b4956(0x24b)]==_0x1b4956(0x2be)&&!_0x448544[_0x1b4956(0x2c7)]||_0x448544[_0x1b4956(0x24b)]=='sell'&&_0x448544['reverse']?(_0x498df5=_0x552208[_0x1b4956(0x246)]+0.9*_0x448544['filled'],_0x2b5a8b=_0x552208[_0x1b4956(0x246)]+1.1*_0x448544['filled']):(_0x498df5=_0x552208[_0x1b4956(0x246)]-1.1*_0x448544[_0x1b4956(0x259)],_0x2b5a8b=_0x552208[_0x1b4956(0x246)]-0.9*_0x448544[_0x1b4956(0x259)]);const _0x454c9b=_0x448544[_0x1b4956(0x259)]!=0x0&&_0x2d70e6[_0x1b4956(0x246)]>=_0x498df5&&_0x2d70e6[_0x1b4956(0x246)]<=_0x2b5a8b;_0x3e0326['push'](_0x454c9b);if(_0x454c9b&&config[_0x1b4956(0x2a7)]!=_0x1b4956(0x22d)){if(_0x448544[_0x1b4956(0x2c7)])logHistory(_0x1b4956(0x210),_0x1b4956(0x290)+_0x448544['symbol']+'\x20'+_0x448544[_0x1b4956(0x24b)]+'\x20#'+formatResult(_0x448544[_0x1b4956(0x259)]/_0x448544[_0x1b4956(0x29e)],0x8)+'\x20@'+formatResult(_0x448544['price'],0x8));else logHistory('order',_0x1b4956(0x290)+_0x448544['symbol']+'\x20'+_0x448544[_0x1b4956(0x24b)]+'\x20#'+formatResult(_0x448544['filled'],0x8)+'\x20@'+formatResult(_0x448544['price'],0x8));}}),_0x3e0326[_0xd63761(0x2b7)]((_0xc47d77,_0x3f7c32)=>{const _0x5c347c=_0xd63761;if(_0xc47d77)lastOrders[_0x5c347c(0x20e)](_0x3f7c32,0x1);});if(_0x11401b<_0xe01bd1&&_0x3e0326[_0xd63761(0x243)](![])){if(_0x11401b==0x0){config['ordertype']==_0xd63761(0x22d)?logHistory(_0xd63761(0x292),_0xd63761(0x207)):logHistory(_0xd63761(0x292),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11401b);},0xa*0x3e8);}else{(_0x11401b==0x1||_0x11401b==Math[_0xd63761(0x20a)](_0xe01bd1/0x2)||_0x11401b==_0xe01bd1-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x11401b);},validateOrderInterval);}}else{lockOrders=![];if(_0x11401b>0x0&&!_0x3e0326[_0xd63761(0x243)](![]))config['ordertype']==_0xd63761(0x22d)?logHistory(_0xd63761(0x260),_0xd63761(0x2f8)):logHistory('success','Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x11401b>0x0&&_0x3e0326['includes'](![])&&(config[_0xd63761(0x2a7)]==_0xd63761(0x22d)?logHistory(_0xd63761(0x260),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0xd63761(0x20a)](_0xe01bd1*validateOrderInterval/0xea60)+_0xd63761(0x280)):(lastOrders['forEach'](async _0x18fab1=>{const _0x53c2fc=_0xd63761;try{const _0x224909=await exchange[_0x53c2fc(0x2bd)](_0x18fab1[_0x53c2fc(0x254)],_0x18fab1[_0x53c2fc(0x2b8)]);}catch(_0x1f63fa){if(_0x1f63fa[_0x53c2fc(0x23a)]()[_0x53c2fc(0x243)]('OrderNotFound')){}else await handleError(_0x1f63fa,_0x53c2fc(0x235));}}),logHistory(_0xd63761(0x260),_0xd63761(0x232)+Math['round'](_0xe01bd1*validateOrderInterval/0xea60)+_0xd63761(0x280))));}}async function resetCoinResults(){const _0x529b98=_0x1a7456;dbCoinResults[_0x529b98(0x1f6)](_0x529b98(0x234))[_0x529b98(0x2c2)]()[_0x529b98(0x266)]();let _0xbc6a5c=await getStartingBalances(![]);_0xbc6a5c['coins'][_0x529b98(0x2b7)](_0x4ba67c=>{const _0x107651=_0x529b98,_0x515f9f=_0x4ba67c['symbol'][_0x107651(0x243)](config[_0x107651(0x2d4)]+'/');if(_0x4ba67c[_0x107651(0x2da)]!=config[_0x107651(0x2d4)]){let _0x4ab6c6={'coin':_0x4ba67c[_0x107651(0x2da)],'number':_0x4ba67c[_0x107651(0x246)],'breakeven':_0x4ba67c['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x107651(0x1f6)]('coins')[_0x107651(0x237)](_0x4ab6c6)['write']();}});}async function updateCoinResults(_0x58c0f9){const _0xffa27=_0x1a7456;let _0x7c15d9,_0x51e021,_0x1287d5,_0x50722a,_0x2bb9e1,_0x2e7f09,_0xaca75f=dbCoinResults['get']('coins')['find']({'coin':_0x58c0f9['coin']})['value']();if(!_0xaca75f)return;if(_0x58c0f9[_0xffa27(0x2a1)]&&_0x58c0f9[_0xffa27(0x2a1)][_0xffa27(0x2ee)]==config[_0xffa27(0x2d4)])_0x7c15d9=_0x58c0f9[_0xffa27(0x2a1)][_0xffa27(0x224)];else{if(_0x58c0f9[_0xffa27(0x2a1)]&&_0x58c0f9['fee']['currency']==_0xffa27(0x281))_0x7c15d9=_0x58c0f9[_0xffa27(0x2a1)][_0xffa27(0x224)]*global[_0xffa27(0x22e)][_0xffa27(0x281)+config[_0xffa27(0x2d4)]];else _0x7c15d9=0.001*_0x58c0f9[_0xffa27(0x259)];}const _0x2da508=_0x58c0f9['symbol']['includes'](config['basecoin']+'/');_0x2da508&&(_0x2e7f09={'coin':_0x58c0f9[_0xffa27(0x2da)],'symbol':_0x58c0f9[_0xffa27(0x2b8)],'filled':_0x58c0f9[_0xffa27(0x259)]*_0x58c0f9[_0xffa27(0x29e)],'side':_0x58c0f9[_0xffa27(0x24b)]==_0xffa27(0x20b)?_0xffa27(0x2be):_0xffa27(0x20b),'price':0x1/_0x58c0f9[_0xffa27(0x29e)]},_0x58c0f9={..._0x2e7f09});_0x58c0f9[_0xffa27(0x24b)]==_0xffa27(0x2be)?_0x1287d5=(_0xaca75f['breakeven']*_0xaca75f[_0xffa27(0x246)]+_0x58c0f9[_0xffa27(0x29e)]*_0x58c0f9['filled'])/(_0xaca75f[_0xffa27(0x246)]+_0x58c0f9['filled']):_0x1287d5=(_0xaca75f['breakeven']*_0xaca75f[_0xffa27(0x246)]-_0x58c0f9[_0xffa27(0x29e)]*_0x58c0f9[_0xffa27(0x259)])/(_0xaca75f[_0xffa27(0x246)]-_0x58c0f9[_0xffa27(0x259)]);_0x58c0f9[_0xffa27(0x24b)]==_0xffa27(0x2be)?_0x50722a=_0xaca75f[_0xffa27(0x2e3)]:_0x50722a=_0xaca75f[_0xffa27(0x2e3)]+(_0x58c0f9[_0xffa27(0x29e)]-_0xaca75f[_0xffa27(0x265)])*_0x58c0f9[_0xffa27(0x259)];_0x51e021=_0x58c0f9[_0xffa27(0x24b)]==_0xffa27(0x20b)?_0xaca75f[_0xffa27(0x246)]-_0x58c0f9['filled']:_0xaca75f[_0xffa27(0x246)]+_0x58c0f9[_0xffa27(0x259)],_0x2bb9e1=(_0x58c0f9[_0xffa27(0x29e)]-_0x1287d5)*_0x51e021;let _0x43649c={'coin':_0x58c0f9[_0xffa27(0x2da)],'number':_0x51e021,'breakeven':formatResult(_0x1287d5,0x8),'realized':formatResult(_0x50722a,0x8),'unrealized':formatResult(_0x2bb9e1,0x8),'fees':formatResult(_0xaca75f[_0xffa27(0x251)]+_0x7c15d9,0x8),'sells':_0x58c0f9[_0xffa27(0x24b)]==_0xffa27(0x20b)?_0xaca75f[_0xffa27(0x299)]+0x1:_0xaca75f[_0xffa27(0x299)],'buys':_0x58c0f9['side']==_0xffa27(0x2be)?_0xaca75f[_0xffa27(0x276)]+0x1:_0xaca75f[_0xffa27(0x276)]};dbCoinResults[_0xffa27(0x1f6)](_0xffa27(0x234))[_0xffa27(0x22b)]({'coin':_0x58c0f9[_0xffa27(0x2da)]})[_0xffa27(0x258)](_0x43649c)[_0xffa27(0x266)]();}async function placeOrder(_0x1a5c84){const _0x569e03=_0x1a7456,_0x214b91=config[_0x569e03(0x2a7)]==_0x569e03(0x22d)?_0x569e03(0x22d):_0x569e03(0x294);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x5dc5bd of _0x1a5c84){let _0xf652dc,_0x34bd9a,_0x418f73,_0x4afb20,_0x42c704,_0x4c4423=_0x5dc5bd['symbol'];try{const _0x4abd64=await exchange['fetchTickers'](_0x4c4423),_0x2cea6d=_0x4abd64[_0x4c4423];_0xf652dc=_0x2cea6d['last'],_0x34bd9a=_0x2cea6d[_0x569e03(0x2ad)],_0x418f73=_0x2cea6d[_0x569e03(0x283)];_0x5dc5bd[_0x569e03(0x2c7)]?(_0x4afb20=_0x5dc5bd[_0x569e03(0x24b)]==_0x569e03(0x2be)?_0x569e03(0x20b):_0x569e03(0x2be),_0x42c704=Math['abs'](_0x5dc5bd[_0x569e03(0x23b)])/_0xf652dc):(_0x4afb20=_0x5dc5bd[_0x569e03(0x24b)],_0x42c704=Math[_0x569e03(0x2d9)](_0x5dc5bd[_0x569e03(0x23b)]));_0x214b91==_0x569e03(0x294)&&(config['ordertype']=='limit-high'&&(_0xf652dc=_0x4afb20=='buy'?_0x34bd9a:_0x418f73),config['ordertype']==_0x569e03(0x2aa)&&(_0xf652dc=_0x4afb20==_0x569e03(0x2be)?_0x418f73:_0x34bd9a));_0x42c704=formatResult(_0x42c704,0x8),_0xf652dc=formatResult(_0xf652dc,0x8);const _0x2c3580=await exchange[_0x569e03(0x2f7)](_0x4c4423,_0x214b91,_0x4afb20,_0x42c704,_0xf652dc);lastOrders['push']({'orderId':_0x2c3580['id'],'symbol':_0x4c4423,'side':_0x4afb20,'reverse':_0x5dc5bd[_0x569e03(0x2c7)],'amount':_0x5dc5bd[_0x569e03(0x2c7)]?_0x2c3580[_0x569e03(0x2ce)]*_0x2c3580[_0x569e03(0x29e)]:_0x2c3580[_0x569e03(0x2ce)],'filled':_0x5dc5bd[_0x569e03(0x2c7)]?_0x2c3580[_0x569e03(0x259)]*_0x2c3580['price']:_0x2c3580[_0x569e03(0x259)],'price':_0x2c3580['price']});const _0x3ae97b=_0x4afb20=='sell'?config['emojisell']?String[_0x569e03(0x218)]('0x'+config[_0x569e03(0x2ef)])+'\x20':'':config[_0x569e03(0x2eb)]?String[_0x569e03(0x218)]('0x'+config[_0x569e03(0x2eb)])+'\x20':'',_0x46b477=_0x214b91==_0x569e03(0x22d)?_0x569e03(0x226):config[_0x569e03(0x2a7)]==_0x569e03(0x2e0)?_0x569e03(0x225):_0x569e03(0x1f9);if(_0x214b91=='market')logHistory(_0x569e03(0x210),''+_0x3ae97b+_0x46b477+_0x569e03(0x240)+_0x4c4423+'\x20'+_0x4afb20+'\x20#'+formatResult(_0x2c3580[_0x569e03(0x259)],0x8)+'\x20@'+formatResult(_0x2c3580[_0x569e03(0x29e)],0x8));else logHistory(_0x569e03(0x210),''+_0x3ae97b+_0x46b477+'\x20order:\x20'+_0x4c4423+'\x20'+_0x4afb20+'\x20#'+formatResult(_0x2c3580['amount'],0x8)+'\x20@'+formatResult(_0x2c3580[_0x569e03(0x29e)],0x8));_0x2c3580[_0x569e03(0x2da)]=_0x5dc5bd[_0x569e03(0x2da)],await updateCoinResults(_0x2c3580);if(config[_0x569e03(0x2dd)]!=0x0){let _0x5a3eb8=null;if(cooldownTracker[_0x569e03(0x244)]==config[_0x569e03(0x2dd)]-0x1)_0x5a3eb8=cooldownTracker['shift']();const _0x4d6bfd=getTimeStamp();cooldownTracker[_0x569e03(0x237)](_0x4d6bfd);if(_0x5a3eb8){const _0x3300f3=fns['differenceInSeconds'](new Date(_0x4d6bfd),new Date(_0x5a3eb8));_0x3300f3<cooldownInterval&&(logHistory(_0x569e03(0x292),'Executed\x20'+config[_0x569e03(0x2dd)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x569e03(0x25e)+cooldownPeriod/(0xe10*0x3e8)+_0x569e03(0x2cd)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x5d7a5c){if(_0x5d7a5c[_0x569e03(0x23a)]()[_0x569e03(0x243)](_0x569e03(0x1f5)))logHistory(_0x569e03(0x292),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4c4423);else{if(_0x5d7a5c[_0x569e03(0x23a)]()[_0x569e03(0x243)](_0x569e03(0x252)))logHistory(_0x569e03(0x292),'Order\x20amount\x20is\x20invalid:\x20'+_0x4c4423);else await handleError(_0x5d7a5c,_0x569e03(0x230));}}}if(lastOrders[_0x569e03(0x244)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x569e03(0x24d)]&&(config[_0x569e03(0x2a7)]==_0x569e03(0x22d)?logHistory(_0x569e03(0x292),_0x569e03(0x289)):logHistory(_0x569e03(0x292),_0x569e03(0x28c)));else coolingDown&&(!config['headless']&&logHistory(_0x569e03(0x292),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x39979b,_0x2bc4c6,_0x13b041=''){const _0x58074a=_0x1a7456;let _0x6492a={'time':getTimeStamp(),'type':_0x39979b,'event':_0x2bc4c6,'botname':config[_0x58074a(0x1fe)],'showname':config[_0x58074a(0x25c)]};dbLogs['get'](_0x58074a(0x22f))[_0x58074a(0x237)](_0x6492a)[_0x58074a(0x266)]();if(_0x13b041=='')_0x13b041=_0x2bc4c6;proxyEmit(_0x58074a(0x2f6),{'log':_0x6492a,'summary':_0x13b041}),process[_0x58074a(0x2e8)]({'telegram':_0x6492a}),logging(''+_0x6492a['event']);}function emitHistory(_0x2ec7d4={}){const _0x2fca0e=_0x1a7456;Object[_0x2fca0e(0x26f)](_0x2ec7d4)['length']==0x0&&(_0x2ec7d4={'type':['order',_0x2fca0e(0x2f6)],'event':'','page':0x1});if(_0x2ec7d4[_0x2fca0e(0x28f)][_0x2fca0e(0x243)]('event'))_0x2ec7d4[_0x2fca0e(0x28f)]['splice'](_0x2ec7d4[_0x2fca0e(0x28f)][_0x2fca0e(0x2e9)](_0x2fca0e(0x2f6)),0x1,_0x2fca0e(0x292),_0x2fca0e(0x260));if(dbLogs['has']('logs')[_0x2fca0e(0x26e)]()){let _0x62f344=dbLogs[_0x2fca0e(0x1f6)](_0x2fca0e(0x22f))[_0x2fca0e(0x248)](_0x980a92=>{const _0x2e78bb=_0x2fca0e;if(_0x2ec7d4[_0x2e78bb(0x28f)][_0x2e78bb(0x244)]==0x0)return![];else return _0x2ec7d4['type'][_0x2e78bb(0x243)](_0x980a92[_0x2e78bb(0x28f)]);})[_0x2fca0e(0x248)](_0x135fd3=>{const _0x263424=_0x2fca0e;if(_0x2ec7d4[_0x263424(0x2f6)]=='')return!![];else return _0x135fd3[_0x263424(0x2f6)]['toLowerCase']()[_0x263424(0x243)](_0x2ec7d4['event'][_0x263424(0x25a)]());})[_0x2fca0e(0x2b5)](_0x2fca0e(0x233)),_0x11ec95=_0x62f344[_0x2fca0e(0x26e)]()['length'];_0x62f344=_0x62f344[_0x2fca0e(0x2c7)]()[_0x2fca0e(0x23e)]((_0x2ec7d4['page']-0x1)*logPageSize,_0x2ec7d4[_0x2fca0e(0x256)]*logPageSize-0x1)[_0x2fca0e(0x2c7)]()[_0x2fca0e(0x26e)](),proxyEmit(_0x2fca0e(0x1fb),{'logs':_0x62f344,'total':_0x11ec95});}else proxyEmit(_0x2fca0e(0x1fb),{'logs':[],'total':0x0});}async function pauseBot(_0x250861){const _0x61c628=_0x1a7456,_0x3b674a=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x61c628(0x2b9)](),consecutivePauses=0x1;else{if(_0x3b674a-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x61c628(0x20c)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x61c628(0x2b9)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x61c628(0x292),_0x61c628(0x28b)+consecutivePauses+')'),await sleep(_0x250861),botPaused=![],reset();}}async function handleError(_0x1c5b49,_0x4426f2,_0x59200c=''){const _0x31dab8=_0x1a7456;if(_0x1c5b49[_0x31dab8(0x23a)]()['includes'](_0x31dab8(0x204)))logHistory('error',_0x4426f2+_0x31dab8(0x219)),await pauseBot(pauseBotInterval);else{if(_0x1c5b49['toString']()['includes'](_0x31dab8(0x203)))logHistory(_0x31dab8(0x292),_0x4426f2+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x1c5b49[_0x31dab8(0x23a)]()[_0x31dab8(0x243)](_0x31dab8(0x1f1)))logHistory(_0x31dab8(0x292),_0x4426f2+_0x31dab8(0x2dc)),await pauseBot(pauseBotInterval);else{if(_0x1c5b49[_0x31dab8(0x23a)]()[_0x31dab8(0x243)](_0x31dab8(0x217)))logHistory('error',_0x4426f2+_0x31dab8(0x25f)),logHistory(_0x31dab8(0x292),_0x31dab8(0x211)),process['send']({'stop':_0x31dab8(0x200)});else{if(_0x1c5b49['toString']()[_0x31dab8(0x243)](_0x31dab8(0x270)))logHistory('error',_0x4426f2+_0x31dab8(0x228)),logHistory(_0x31dab8(0x292),_0x31dab8(0x211)),process['send']({'stop':'kill'});else{if(_0x1c5b49[_0x31dab8(0x23a)]()[_0x31dab8(0x243)](_0x31dab8(0x2d5)))logHistory(_0x31dab8(0x292),_0x4426f2+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x31dab8(0x292),_0x31dab8(0x211)),process[_0x31dab8(0x2e8)]({'stop':'kill'});else{if(_0x1c5b49[_0x31dab8(0x23a)]()[_0x31dab8(0x243)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x4426f2+_0x31dab8(0x206)),logHistory(_0x31dab8(0x292),_0x31dab8(0x211)),process[_0x31dab8(0x2e8)]({'stop':_0x31dab8(0x200)});else{if(_0x1c5b49[_0x31dab8(0x23a)]()[_0x31dab8(0x243)](_0x31dab8(0x2d3)))logHistory(_0x31dab8(0x292),_0x4426f2+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'});else _0x1c5b49['toString']()['includes'](_0x31dab8(0x2f4))?logHistory('error',_0x4426f2+_0x31dab8(0x2f5)):(logHistory(_0x31dab8(0x292),_0x4426f2+_0x31dab8(0x2c3)),logging(_0x4426f2+_0x31dab8(0x25b),_0x1c5b49),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xee01,_0x2a69cf){const _0x39c331=_0x1a7456;return parseFloat(_0xee01[_0x39c331(0x253)](_0x2a69cf));}function logging(_0x4c03ff,_0x1fb22d=''){const _0x40d91a=_0x1a7456;if(config[_0x40d91a(0x25c)])console['log'](getTimeStamp()+':\x20'+config[_0x40d91a(0x1fe)]+'\x20>\x20'+_0x4c03ff,_0x1fb22d);else console[_0x40d91a(0x298)](getTimeStamp()+_0x40d91a(0x1f3)+botID+'\x20>\x20'+_0x4c03ff,_0x1fb22d);}function getServerTime(){const _0xbf66d2=_0x1a7456,_0x167c3e=new Date();return _0x167c3e['getFullYear']()+'/'+(_0x167c3e[_0xbf66d2(0x282)]()+0x1)['toString']()[_0xbf66d2(0x22c)](0x2,'0')+'/'+_0x167c3e[_0xbf66d2(0x209)]()[_0xbf66d2(0x23a)]()['padStart'](0x2,'0')+'\x20'+_0x167c3e[_0xbf66d2(0x215)]()[_0xbf66d2(0x23a)]()[_0xbf66d2(0x22c)](0x2,'0')+':'+_0x167c3e['getMinutes']()['toString']()[_0xbf66d2(0x22c)](0x2,'0')+':'+_0x167c3e[_0xbf66d2(0x229)]()[_0xbf66d2(0x23a)]()[_0xbf66d2(0x22c)](0x2,'0');}function getTimeStamp(){const _0x15be3b=_0x1a7456,_0x4bdaa2=shiftedTime();return _0x4bdaa2[_0x15be3b(0x21b)]()+'/'+(_0x4bdaa2[_0x15be3b(0x282)]()+0x1)['toString']()[_0x15be3b(0x22c)](0x2,'0')+'/'+_0x4bdaa2[_0x15be3b(0x209)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4bdaa2['getHours']()['toString']()[_0x15be3b(0x22c)](0x2,'0')+':'+_0x4bdaa2[_0x15be3b(0x245)]()[_0x15be3b(0x23a)]()['padStart'](0x2,'0')+':'+_0x4bdaa2[_0x15be3b(0x229)]()[_0x15be3b(0x23a)]()[_0x15be3b(0x22c)](0x2,'0');}function getDate(){const _0x17a5fc=_0x1a7456,_0x16c383=shiftedTime();return _0x16c383[_0x17a5fc(0x21b)]()+'/'+(_0x16c383[_0x17a5fc(0x282)]()+0x1)[_0x17a5fc(0x23a)]()[_0x17a5fc(0x22c)](0x2,'0')+'/'+_0x16c383[_0x17a5fc(0x209)]()[_0x17a5fc(0x23a)]()['padStart'](0x2,'0');}function getHour(){const _0x2461a2=_0x1a7456,_0x49032c=shiftedTime();return _0x49032c['getHours']()[_0x2461a2(0x23a)]()[_0x2461a2(0x22c)](0x2,'0');}function sleep(_0x5ccf9d){return new Promise(_0x590522=>setTimeout(_0x590522,_0x5ccf9d));}function shiftedTime(){const _0x2c5004=_0x1a7456,_0x578fba=new Date();let _0x219d0c=_0x578fba;if(config&&config[_0x2c5004(0x27a)]!==0x0)_0x219d0c=fns[_0x2c5004(0x2ca)](_0x578fba,{'hours':config[_0x2c5004(0x27a)]});return _0x219d0c;}