const _0x477922=_0x1159;(function(_0x4332e4,_0x19214b){const _0x478a6a=_0x1159,_0x13c4ee=_0x4332e4();while(!![]){try{const _0x74b52c=parseInt(_0x478a6a(0x218))/0x1*(parseInt(_0x478a6a(0x181))/0x2)+parseInt(_0x478a6a(0x230))/0x3+-parseInt(_0x478a6a(0x23c))/0x4*(-parseInt(_0x478a6a(0x2fb))/0x5)+-parseInt(_0x478a6a(0x1d6))/0x6+parseInt(_0x478a6a(0x1da))/0x7*(-parseInt(_0x478a6a(0x2bf))/0x8)+parseInt(_0x478a6a(0x268))/0x9+-parseInt(_0x478a6a(0x24f))/0xa*(parseInt(_0x478a6a(0x279))/0xb);if(_0x74b52c===_0x19214b)break;else _0x13c4ee['push'](_0x13c4ee['shift']());}catch(_0x40fd40){_0x13c4ee['push'](_0x13c4ee['shift']());}}}(_0x380d,0x30371));const _0x5b7d70=function(){let _0x4f8f54=!![];return function(_0x57f564,_0x34cd6c){const _0x1e76ae=_0x4f8f54?function(){const _0x12a6c7=_0x1159;if(_0x34cd6c){const _0x298fdc=_0x34cd6c[_0x12a6c7(0x1d9)](_0x57f564,arguments);return _0x34cd6c=null,_0x298fdc;}}:function(){};return _0x4f8f54=![],_0x1e76ae;};}(),_0xae01e4=_0x5b7d70(this,function(){const _0x4b0ea2=_0x1159;return _0xae01e4[_0x4b0ea2(0x1cd)]()[_0x4b0ea2(0x273)](_0x4b0ea2(0x1df))['toString']()[_0x4b0ea2(0x2b6)](_0xae01e4)[_0x4b0ea2(0x273)]('(((.+)+)+)+$');});_0xae01e4();'use strict';const ccxt=require(_0x477922(0x196)),low=require(_0x477922(0x2e5)),FileSync=require(_0x477922(0x22f)),fs=require('fs'),fns=require(_0x477922(0x264)),Crypt=require(_0x477922(0x2f8))[_0x477922(0x1d1)],util=require('util'),argv=require(_0x477922(0x211))(process[_0x477922(0x1d5)][_0x477922(0x19b)](0x2))[_0x477922(0x1d5)],path=require(_0x477922(0x1ac));let exchange;global[_0x477922(0x17f)]={},global['change']={};const usdBasecoins=[_0x477922(0x2a0),_0x477922(0x308),_0x477922(0x184),_0x477922(0x1b3),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x477922(0x2da)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x477922(0x2a9)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x477922(0x285))[_0x477922(0x2d1)],botID=process[_0x477922(0x1d5)][0x2]||_0x477922(0x2f6),pattern=/^[0-9]{3}$/;!pattern[_0x477922(0x235)](botID)&&(console['log'](_0x477922(0x1c3)+botID+_0x477922(0x259)),killBot());const userID=process[_0x477922(0x1d5)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x477922(0x1a4),logspath=userID?'./logs/'+userID+'/':_0x477922(0x21e),loggerfile=fs[_0x477922(0x295)](logspath+_0x477922(0x210),{'flags':'a'});!fs[_0x477922(0x27f)](configpath)&&fs[_0x477922(0x1d4)](configpath);!fs[_0x477922(0x27f)](logspath)&&fs[_0x477922(0x1d4)](logspath);const configfile=configpath+'bot-'+botID+_0x477922(0x1e8),logfile=configpath+_0x477922(0x1a7)+botID+_0x477922(0x21f),performancefile=configpath+_0x477922(0x1a7)+botID+_0x477922(0x286),coinresultsfile=configpath+_0x477922(0x1a7)+botID+_0x477922(0x18f),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x477922(0x182),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x477922(0x30d)]({'logs':[],'version':serverversion})[_0x477922(0x2e0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x477922(0x30d)]({'data':[],'version':serverversion})[_0x477922(0x2e0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x477922(0x2e0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x477922(0x2e0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x477922(0x263),'rsaStandard':_0x477922(0x2e8)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x23a8ea=>{const _0x3b3958=_0x477922;console[_0x3b3958(0x1cf)](_0x23a8ea);},'simple':_0x58bcde=>{const _0x16f866=_0x477922;console['log'](_0x58bcde),loggerfile[_0x16f866(0x2e0)](util['format'](_0x58bcde)+'\x0a');},'full':async(_0x193aab,_0xa79381='')=>{const _0x480e2c=_0x477922;let _0x5693b4;if(config[_0x480e2c(0x18a)])_0x5693b4=getTimeStamp()+':\x20'+config['botname']+_0x480e2c(0x242)+_0x193aab;else _0x5693b4=getTimeStamp()+':\x20Bot\x20'+botID+_0x480e2c(0x242)+_0x193aab;console[_0x480e2c(0x1cf)](_0x5693b4),loggerfile[_0x480e2c(0x2e0)](util[_0x480e2c(0x28a)](_0x5693b4)+'\x0a'),_0xa79381&&(console[_0x480e2c(0x1cf)](_0xa79381),loggerfile['write'](util['format'](_0xa79381)+'\x0a'));},'debug':async(_0x73ddcd,_0x513ebc='')=>{const _0x878fe5=_0x477922;let _0x4a3051;if(config['showname'])_0x4a3051=getTimeStamp()+':\x20'+config[_0x878fe5(0x22e)]+_0x878fe5(0x234)+_0x73ddcd;else _0x4a3051=getTimeStamp()+_0x878fe5(0x179)+botID+_0x878fe5(0x234)+_0x73ddcd;if(debugging)console[_0x878fe5(0x1cf)](_0x4a3051);loggerfile['write'](util['format'](_0x4a3051)+'\x0a');if(_0x513ebc){if(debugging)console['log'](_0x513ebc);loggerfile['write'](util[_0x878fe5(0x28a)](_0x513ebc)+'\x0a');}}};process['on'](_0x477922(0x2c8),function(_0xc57606){const _0x3f77fc=_0x477922;logHistory('error',_0x3f77fc(0x1a6)),logger[_0x3f77fc(0x19c)](_0x3f77fc(0x2ce),_0xc57606);});settings[_0x477922(0x1e2)]!=config[_0x477922(0x1e2)]&&updateTimeshift(settings['timeshift']);settings[_0x477922(0x291)]!=config['onepagemode']&&updateOnepagemode(settings[_0x477922(0x291)]);process['send']({'started':_0x477922(0x2fc)},_0x2415a7=>{}),initializeProcessListeners();function proxyEmit(_0x442d47,_0x50e1ba=null){const _0x2a4854=_0x477922;process[_0x2a4854(0x170)]({'function':_0x442d47,'args':_0x50e1ba},_0xdce3ce=>{});}function initializeProcessListeners(){const _0x1e9aa1=_0x477922;process['on'](_0x1e9aa1(0x2fd),_0x578d1c=>{const _0x4c5e68=_0x1e9aa1;switch(Object['keys'](_0x578d1c)[0x0]){case _0x4c5e68(0x1e2):_0x578d1c[_0x4c5e68(0x1e2)]!=undefined&&(settings['timeshift']=_0x578d1c['timeshift'],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x578d1c[_0x4c5e68(0x291)]!=undefined&&(settings[_0x4c5e68(0x291)]=_0x578d1c[_0x4c5e68(0x291)],updateOnepagemode(settings['onepagemode']));break;case _0x4c5e68(0x22b):_0x578d1c[_0x4c5e68(0x22b)]!=undefined&&(bots=JSON[_0x4c5e68(0x266)](_0x578d1c[_0x4c5e68(0x22b)]),proxyEmit(_0x4c5e68(0x22b),bots));break;case'function':switch(_0x578d1c[_0x4c5e68(0x2d7)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x4c5e68(0x2aa):emitHistory(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x267):deleteHistoryAlerts(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x238):getPortfolio(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x16d):storeConfiguration(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x1c1):storeHeadless(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x30f):storeFiat(_0x578d1c['args']);break;case _0x4c5e68(0x1e4):resetHistory();break;case _0x4c5e68(0x1e0):getStartingBalances(getNormalizedPerformance());break;case _0x4c5e68(0x2f9):placeOrder(_0x578d1c[_0x4c5e68(0x180)]);break;case _0x4c5e68(0x22a):cancelLoading();break;case'showConfig':showConfig();break;case _0x4c5e68(0x221):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x37cf91=null,_0xefbe47=![]){const _0x32227f=_0x477922;logger[_0x32227f(0x19c)](_0x32227f(0x239)+(_0x37cf91&&_0x37cf91['length']>0x0?_0x32227f(0x302)+_0x37cf91[_0x32227f(0x1c0)](','):_0x32227f(0x2bc))+_0x32227f(0x2ca)+(_0xefbe47?'exchange\x20reloaded':_0x32227f(0x2b3))+_0x32227f(0x1d8)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0xefbe47)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x32227f(0x177)]!=_0x32227f(0x247)){if(_0xefbe47){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x32a9e2){handleErrorNoStop(_0x32a9e2,_0x32227f(0x1db));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x37cf91);const _0x5b030a=await getCoins();[currentCoins,currentCoinsAll]=_0x5b030a,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x32227f(0x280)]==0x0&&allOpenOrders[_0x32227f(0x280)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x163682=_0x477922;exchangeStopped=!![];try{await exchange[_0x163682(0x25d)]();}catch(_0x1aad14){await handleError(_0x1aad14,_0x163682(0x23a));}}async function reloadExchange(){const _0x5ba06c=_0x477922;logger[_0x5ba06c(0x19c)](_0x5ba06c(0x1cb));while(lockOrders!=ORDERS[_0x5ba06c(0x2a9)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x5ba06c(0x29d)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5d9063=config[_0x477922(0x171)],_0x2f7889=config[_0x477922(0x177)],_0x1624ff=config[_0x477922(0x2f0)],_0x4b55f7=config[_0x477922(0x306)]){const _0x4420ff=_0x477922;exchange&&await stopExchange();!supportedExchanges()[_0x4420ff(0x25b)](_0x5d9063)&&(logHistory(_0x4420ff(0x293),_0x4420ff(0x25e)+_0x5d9063+'\x20exchange'),killBot());const _0x1048ce=ccxt[_0x4420ff(0x20f)][_0x5d9063[_0x4420ff(0x173)]()];exchange=new _0x1048ce({'apiKey':_0x2f7889,'secret':_0x1624ff,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4420ff(0x206)}});if(_0x4b55f7)exchange[_0x4420ff(0x1b0)]=_0x4b55f7;}function setStableCoins(){const _0x910187=_0x477922;let _0x51593a=config[_0x910187(0x2ac)]==_0x910187(0x232)?_0x910187(0x232):_0x910187(0x2d9),_0x37b24c=!allSymbols[_0x910187(0x25b)](_0x51593a+_0x910187(0x29f))?_0x910187(0x1b3):_0x910187(0x2a0),_0x3204e1=!allSymbols[_0x910187(0x25b)](_0x51593a+_0x910187(0x16c))?_0x37b24c:_0x910187(0x304);stablecoins={'eur':{'coin':''+_0x51593a+_0x3204e1,'symbol':_0x51593a+'/'+_0x3204e1},'usd':{'coin':''+_0x51593a+_0x37b24c,'symbol':_0x51593a+'/'+_0x37b24c}};}async function initwsCcxt(_0x1e5277){const _0x1b8d8e=_0x477922;_0x1e5277==null&&(_0x1e5277=[],config[_0x1b8d8e(0x1fd)]['forEach'](_0x34edc5=>{const _0x41f099=_0x1b8d8e;if(!_0x34edc5[_0x41f099(0x2a2)]&&_0x34edc5[_0x41f099(0x17c)]!=config[_0x41f099(0x2ac)])_0x1e5277[_0x41f099(0x2a3)](_0x34edc5['symbol']);}));if(!_0x1e5277['includes'](stablecoins[_0x1b8d8e(0x1a8)][_0x1b8d8e(0x1a3)]))_0x1e5277[_0x1b8d8e(0x2a3)](stablecoins[_0x1b8d8e(0x1a8)][_0x1b8d8e(0x1a3)]);if(!_0x1e5277[_0x1b8d8e(0x25b)](stablecoins['usd']['symbol']))_0x1e5277['push'](stablecoins['usd'][_0x1b8d8e(0x1a3)]);if(config['exchange'][_0x1b8d8e(0x189)](_0x1b8d8e(0x224))){if(!_0x1e5277[_0x1b8d8e(0x25b)]('BNB/'+config[_0x1b8d8e(0x2ac)]))_0x1e5277[_0x1b8d8e(0x2a3)](_0x1b8d8e(0x301)+config[_0x1b8d8e(0x2ac)]);}loadCoins(_0x1e5277);const _0x2e620d=async _0x35e97d=>{const _0x7ce9c7=_0x1b8d8e;try{const _0x539493=await exchange[_0x7ce9c7(0x225)](_0x35e97d);global[_0x7ce9c7(0x17f)][noslash(_0x539493[_0x7ce9c7(0x1a3)])]=_0x539493[_0x7ce9c7(0x24c)];}catch(_0x35b56f){await handleError(_0x35b56f,_0x7ce9c7(0x27e),_0x35e97d);}while(!![]){if(!botPaused)try{const _0x1aaf82=await exchange['watchTrades'](_0x35e97d);global[_0x7ce9c7(0x17f)][noslash(_0x1aaf82[0x0][_0x7ce9c7(0x1a3)])]=_0x1aaf82[0x0][_0x7ce9c7(0x1b2)],await sleep(0x3e8);}catch(_0x51998e){if(!exchangeStopped)await handleError(_0x51998e,_0x7ce9c7(0x240),_0x35e97d);}else await sleep(0x64);}},_0x55bfd1=async _0x41aefe=>{const _0x12fb86=_0x1b8d8e;while(!![]){if(!botPaused)try{const _0x3ffaa3=await exchange[_0x12fb86(0x225)](_0x41aefe);global[_0x12fb86(0x187)][_0x3ffaa3[_0x12fb86(0x1a3)]]=_0x3ffaa3[_0x12fb86(0x2b5)],await sleep(0x3c*0x3e8);}catch(_0xd51891){if(!exchangeStopped)await handleError(_0xd51891,_0x12fb86(0x16f),_0x41aefe);}else await sleep(0x64);}},_0x53b78b=async _0x30dcb5=>{const _0x104333=_0x1b8d8e;while(!![]){if(!botPaused)try{const _0x20a2ed=await exchange['watchOrders'](_0x30dcb5);_0x20a2ed[_0x104333(0x18b)](_0x18c588=>{updateNumberCoinsCcxt(_0x18c588);});}catch(_0x5b4cb6){if(!exchangeStopped)await handleError(_0x5b4cb6,'watchOrders');}else await sleep(0x64);}};_0x1e5277[_0x1b8d8e(0x18b)](_0x3cfe2c=>{_0x2e620d(_0x3cfe2c),_0x55bfd1(_0x3cfe2c),_0x53b78b(_0x3cfe2c);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x295832=_0x477922;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1872a5=await getCoins(),[_0x2e5b2f,_0x66839b]=_0x1872a5;let _0x280895=[];currentCoins[_0x295832(0x18b)](_0x10e9ff=>{const _0x17f5fe=_0x295832,_0x24c7c8=_0x2e5b2f[_0x17f5fe(0x2be)](_0x5e9a09=>_0x5e9a09['coin']==_0x10e9ff[_0x17f5fe(0x17c)]);if(_0x24c7c8){if(_0x10e9ff[_0x17f5fe(0x2fe)]!=_0x24c7c8[_0x17f5fe(0x2fe)]){let _0x32b0bc;if(_0x10e9ff[_0x17f5fe(0x17c)]!=config[_0x17f5fe(0x2ac)]){const _0x4d52c5=global[_0x17f5fe(0x17f)][noslash(_0x10e9ff[_0x17f5fe(0x1a3)])];_0x32b0bc=_0x10e9ff[_0x17f5fe(0x297)]?0x1/_0x4d52c5:_0x4d52c5;}else _0x32b0bc=0x1;_0x280895[_0x17f5fe(0x2a3)]({'coin':_0x10e9ff[_0x17f5fe(0x17c)],'symbol':_0x10e9ff[_0x17f5fe(0x1a3)],'price':_0x32b0bc,'number':Number(formatResult(_0x24c7c8[_0x17f5fe(0x2fe)]-_0x10e9ff[_0x17f5fe(0x2fe)],0x8)),'basecoinvalue':_0x32b0bc*(_0x24c7c8[_0x17f5fe(0x2fe)]-_0x10e9ff['number'])});}}});if(_0x280895[_0x295832(0x280)]==0x1&&!blockTransactionDetection){if(config[_0x295832(0x2ea)]){logger[_0x295832(0x19c)](_0x295832(0x27b)+_0x280895[0x0]['basecoinvalue']+_0x295832(0x2c3)+lastFees[_0x295832(0x201)]);if(lastFees['highest']==0x0||Math[_0x295832(0x21d)](_0x280895[0x0][_0x295832(0x2c1)])>lastFees['highest']){delete _0x280895[0x0][_0x295832(0x1a3)],delete _0x280895[0x0][_0x295832(0x2c1)];let _0x1113e4=[],_0x791ba1=[...config[_0x295832(0x275)]]||[],_0x147a82=config[_0x295832(0x275)];_0x791ba1[_0x295832(0x26e)]((_0x5d8675,_0x70d7a1)=>_0x5d8675[_0x295832(0x272)]>_0x70d7a1[_0x295832(0x272)]?-0x1:_0x70d7a1[_0x295832(0x272)]>_0x5d8675[_0x295832(0x272)]?0x1:0x0);const _0x3560ed=getDate();if(_0x791ba1[0x0]){const _0x5b28c4=fns['parse'](_0x791ba1[0x0][_0x295832(0x272)],_0x295832(0x283),new Date()),_0xe1e486=fns[_0x295832(0x266)](_0x3560ed,_0x295832(0x283),new Date());if(fns[_0x295832(0x1d3)](_0x5b28c4,_0xe1e486)){_0x1113e4=_0x791ba1[0x0]['changes'];const _0x3382b3=_0x1113e4[_0x295832(0x2be)](_0x53f749=>_0x53f749['coin']==_0x280895[0x0][_0x295832(0x17c)]);_0x3382b3?(_0x3382b3[_0x295832(0x2fe)]+=_0x280895[0x0][_0x295832(0x2fe)],_0x3382b3['number']==0x0&&(_0x1113e4=_0x1113e4[_0x295832(0x2a1)](_0x30a3be=>{const _0x1b5b02=_0x295832;return _0x30a3be[_0x1b5b02(0x17c)]!=_0x280895[0x0][_0x1b5b02(0x17c)];}))):_0x1113e4['push'](_0x280895[0x0]);const _0x50dfb7=_0x147a82['find'](_0x444fd2=>_0x444fd2[_0x295832(0x272)]==_0x3560ed);_0x50dfb7['changes']=_0x1113e4;}else _0x147a82[_0x295832(0x2a3)]({'date':_0x3560ed,'changes':[_0x280895[0x0]]});}const _0x167aa9=_0x147a82['find'](_0xf01fba=>_0xf01fba[_0x295832(0x272)]==_0x3560ed);if(_0x167aa9){let _0x3e49c3=!![];_0x167aa9[_0x295832(0x2a4)][_0x295832(0x18b)](_0x5a16f8=>{const _0x43c774=_0x295832;if(_0x5a16f8[_0x43c774(0x2fe)]!=0x0)_0x3e49c3=![];}),_0x3e49c3&&(_0x147a82=_0x147a82[_0x295832(0x2a1)](_0x5dfe55=>{const _0x4ccf20=_0x295832;return _0x5dfe55[_0x4ccf20(0x272)]!=_0x3560ed;}));}let _0x456dab=dbConfig[_0x295832(0x1cc)]('bot')[_0x295832(0x2be)]({'botID':botID})[_0x295832(0x194)]();_0x456dab&&(dbConfig[_0x295832(0x1cc)]('bot')[_0x295832(0x2be)]({'botID':botID})[_0x295832(0x1b8)]({'liquidity':_0x147a82})[_0x295832(0x2e0)](),config['liquidity']=_0x147a82),logHistory(_0x295832(0x246),'Portfolio\x20change\x20detected:\x20'+Math[_0x295832(0x21d)](_0x280895[0x0]['number'])+'\x20'+_0x280895[0x0][_0x295832(0x17c)]+'\x20'+(_0x280895[0x0]['number']>0x0?_0x295832(0x1e1):'removed')+_0x295832(0x2a6)),proxyEmit(_0x295832(0x1a5),emittedConfiguration());}else logger[_0x295832(0x19c)](_0x295832(0x294)+Math[_0x295832(0x21d)](_0x280895[0x0][_0x295832(0x2fe)])+'\x20'+_0x280895[0x0][_0x295832(0x17c)]+'\x20'+(_0x280895[0x0][_0x295832(0x2fe)]>0x0?_0x295832(0x1e1):_0x295832(0x227)));transactionDetected=!![],currentCoins=_0x2e5b2f,currentCoinsAll=_0x66839b;}else logger['debug'](_0x295832(0x310)+Math[_0x295832(0x21d)](_0x280895[0x0]['number'])+'\x20'+_0x280895[0x0][_0x295832(0x17c)]+'\x20'+(_0x280895[0x0][_0x295832(0x2fe)]>0x0?_0x295832(0x1e1):_0x295832(0x227))+_0x295832(0x258)),currentCoins=_0x2e5b2f,currentCoinsAll=_0x66839b;}await sleep(watchTransactionsInterval);}catch(_0x250d83){if(!exchangeStopped)await handleError(_0x250d83,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(){const _0x2e53b9=_0x477922;try{markets=await exchange[_0x2e53b9(0x2f4)](),allSymbols=[],Object[_0x2e53b9(0x1bf)](markets)[_0x2e53b9(0x18b)](_0x781600=>{const _0x80fee2=_0x2e53b9;_0x781600[0x1][_0x80fee2(0x26a)]&&_0x781600[0x1][_0x80fee2(0x206)]&&allSymbols['push'](_0x781600[0x0]);});}catch(_0x481d42){throw _0x481d42;}}async function initclient(){const _0x5df38e=_0x477922;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5df38e(0x271),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5df38e(0x1bd),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xd83592=getNormalizedPerformance();emitPerformance(_0xd83592),getStartingBalances(_0xd83592);}async function toggleBotMode(){const _0x67b2e3=_0x477922;let _0x2949a9=dbConfig['get'](_0x67b2e3(0x22c))['find']({'botID':botID})[_0x67b2e3(0x194)]();if(_0x2949a9){const _0x4c8b65=!_0x2949a9[_0x67b2e3(0x229)];dbConfig[_0x67b2e3(0x1cc)](_0x67b2e3(0x22c))['find']({'botID':botID})['assign']({'headless':_0x4c8b65})[_0x67b2e3(0x2e0)](),config['headless']=_0x4c8b65,proxyEmit(_0x67b2e3(0x1a5),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x2f752b=>{});}async function loadCoins(_0x1840ef){const _0x3e1d55=_0x477922;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x54758c,_0xace897=0x0,_0x5186be=0x0;_0x1840ef['forEach'](_0x1ab754=>{const _0x2ea7b6=_0x1159;loading[_0x2ea7b6(0x26d)][_0x2ea7b6(0x2a3)](_0x1ab754);}),loadingCanceled=![];let _0x26f1bc=![];while(_0x54758c!=_0x1840ef[_0x3e1d55(0x280)]){_0x54758c=0x0,_0x1840ef[_0x3e1d55(0x18b)](_0x2f81a0=>{const _0x3dc430=_0x3e1d55;if(global[_0x3dc430(0x17f)][noslash(_0x2f81a0)]){loading[_0x3dc430(0x26d)]=loading['remainingSymbols']['filter'](_0x376087=>_0x376087!=_0x2f81a0);if(!watchedSymbols['includes'](_0x2f81a0))watchedSymbols[_0x3dc430(0x2a3)](_0x2f81a0);_0x54758c++;}}),loading['progress']=Math['round'](_0x54758c/_0x1840ef[_0x3e1d55(0x280)]*0x64);loading['progress']!=0x64&&(_0x5186be>0x1e*0x5&&(loading[_0x3e1d55(0x21b)]=!![],emitLoadingProgress()),_0x5186be>0x78*0x5&&!_0x26f1bc&&(loading[_0x3e1d55(0x29c)]=!![],emitLoadingProgress(),_0x26f1bc=!![],logHistory(_0x3e1d55(0x293),_0x3e1d55(0x202)+loading[_0x3e1d55(0x26d)]['join'](',\x20')+_0x3e1d55(0x236)),logHistory(_0x3e1d55(0x293),_0x3e1d55(0x254)+loadCoinsRetryInterval/0xea60+_0x3e1d55(0x2eb)),pidCoinReloading=setTimeout(()=>{const _0x5b9749=_0x3e1d55;process[_0x5b9749(0x170)]({'stop':_0x5b9749(0x243)},_0x1ffaa7=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x54758c!=_0xace897&&(_0xace897=_0x54758c,emitLoadingProgress()),_0x5186be++,await sleep(0xc8);}_0x54758c==_0x1840ef[_0x3e1d55(0x280)]&&(coinsLoaded=!![],process[_0x3e1d55(0x170)]({'status':_0x3e1d55(0x2f1),'live':'running'},_0x423f3d=>{}),_0x26f1bc&&logHistory('success',_0x3e1d55(0x195)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x248716=_0x477922;proxyEmit(_0x248716(0x1a5),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0xd42406=_0x477922;proxyEmit(_0xd42406(0x1b1),loading);}async function getFiat(){const _0xb87332=_0x477922;let _0x2a5b51=global[_0xb87332(0x17f)][stablecoins[_0xb87332(0x1a8)]['coin']],_0x2b2f13=global['ticker'][stablecoins[_0xb87332(0x208)][_0xb87332(0x17c)]];return{'eur':Number(_0x2a5b51),'usd':Number(_0x2b2f13)};}function capitalize(_0x19b427){const _0x294101=_0x477922;return _0x19b427['substring'](0x0,0x1)[_0x294101(0x281)]()+_0x19b427[_0x294101(0x296)](0x1);}function supportedExchanges(){const _0x4a64b4=_0x477922,_0x5ce498=['ws',_0x4a64b4(0x16f),'fetchTicker',_0x4a64b4(0x1dd),_0x4a64b4(0x172),'cancelOrder','createOrder',_0x4a64b4(0x290),'fetchClosedOrders',_0x4a64b4(0x284)];let _0x25cb93=[],_0xc9172=[],_0x2ad4b1=ccxt['pro'][_0x4a64b4(0x271)];_0x2ad4b1[_0x4a64b4(0x18b)](_0xd27d7d=>{const _0x1e1bfc=_0x4a64b4;try{const _0x44cfb7=new ccxt[(_0x1e1bfc(0x20f))][_0xd27d7d]();_0xc9172[_0x1e1bfc(0x2a3)](_0x44cfb7);}catch(_0x20ecb3){}}),_0xc9172['forEach'](_0x187508=>{const _0x3ce545=_0x4a64b4;let _0x23c783=0x0;_0x5ce498[_0x3ce545(0x18b)](_0x437b25=>{const _0xd7cce6=_0x3ce545;_0x437b25 in _0x187508['has']&&_0x187508[_0xd7cce6(0x216)][_0x437b25]&&_0x23c783++;}),_0x23c783==_0x5ce498[_0x3ce545(0x280)]&&_0x25cb93[_0x3ce545(0x2a3)](capitalize(_0x187508['id']));});let _0xfdafe7=[];return _0x2ad4b1[_0x4a64b4(0x18b)](_0x596fdc=>{const _0x19cac0=_0x4a64b4;_0x596fdc=capitalize(_0x596fdc);if(!_0x25cb93['includes'](_0x596fdc))_0xfdafe7[_0x19cac0(0x2a3)](_0x596fdc);}),_0x25cb93;}function setStartDatePerformance(){const _0x98f21e=_0x477922;if(config&&config[_0x98f21e(0x275)][0x0][_0x98f21e(0x2a4)][_0x98f21e(0x280)]!=0x0){const _0x478905=config[_0x98f21e(0x275)][0x0][_0x98f21e(0x2a4)];dbPerformance[_0x98f21e(0x1cc)](_0x98f21e(0x2de))[_0x98f21e(0x2be)]({'date':config['startdate']})[_0x98f21e(0x1b8)]({'coins':_0x478905})['write']();}}async function recreateCoinResults(){const _0x57a71f=_0x477922;let _0x156ad1,_0x234239=[];try{const _0x4ba6e1=fns[_0x57a71f(0x28a)](fns[_0x57a71f(0x220)](config[_0x57a71f(0x1c9)][_0x57a71f(0x29e)](/\//g,'-')),_0x57a71f(0x20d));for(const _0x32ff9d of currentCoins){if(_0x32ff9d[_0x57a71f(0x17c)]!=config[_0x57a71f(0x2ac)]){let _0x3c17ca=0x0,_0x3fdbc7,_0x1055b0;_0x156ad1=await getAllEventOrders(_0x32ff9d['symbol']);if(_0x156ad1[_0x57a71f(0x280)]>0x0)_0x156ad1[_0x57a71f(0x18b)](_0x1dda0c=>{const _0x3b4d0b=_0x57a71f,_0x3e4d29=_0x32ff9d['symbol'][_0x3b4d0b(0x25b)](config['basecoin']+'/');_0x234239['push']({'datetime':_0x1dda0c[_0x3b4d0b(0x16e)],'coin':_0x32ff9d['coin'],'symbol':_0x32ff9d[_0x3b4d0b(0x1a3)],'side':_0x1dda0c['side'],'reverse':_0x3e4d29,'amount':formatResult(_0x1dda0c[_0x3b4d0b(0x1e6)],0x8),'filled':formatResult(_0x1dda0c[_0x3b4d0b(0x1e6)],0x8),'price':formatResult(_0x1dda0c[_0x3b4d0b(0x1b2)],0x8)}),_0x3c17ca=_0x1dda0c[_0x3b4d0b(0x24a)]==_0x3b4d0b(0x2b4)?_0x3c17ca+_0x1dda0c['filled']:_0x3c17ca-_0x1dda0c[_0x3b4d0b(0x1e6)];if(!_0x1055b0)_0x1055b0=_0x1dda0c[_0x3b4d0b(0x1b2)];});_0x3fdbc7=_0x32ff9d[_0x57a71f(0x2fe)]-_0x3c17ca;let _0x57bd13;config[_0x57a71f(0x275)][_0x57a71f(0x18b)](_0x248728=>{const _0x482554=_0x57a71f;!_0x57bd13&&(_0x57bd13=_0x248728[_0x482554(0x2a4)]['find'](_0x5c2074=>_0x5c2074[_0x482554(0x17c)]==_0x32ff9d['coin']),_0x57bd13&&(_0x3fdbc7=_0x57bd13[_0x482554(0x2fe)],_0x1055b0=_0x57bd13[_0x482554(0x1b2)]));});let _0x4f4144=dbCoinResults[_0x57a71f(0x1cc)](_0x57a71f(0x2e7))['find']({'coin':_0x32ff9d[_0x57a71f(0x17c)]})['value']();_0x4f4144={'coin':_0x32ff9d[_0x57a71f(0x17c)],'number':_0x3fdbc7,'breakeven':_0x1055b0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x57a71f(0x1cc)](_0x57a71f(0x2e7))[_0x57a71f(0x2be)]({'coin':_0x32ff9d['coin']})[_0x57a71f(0x1b8)](_0x4f4144)[_0x57a71f(0x2e0)]();}}_0x234239[_0x57a71f(0x26e)]((_0x5c6237,_0x5be415)=>_0x5c6237[_0x57a71f(0x16e)]>_0x5be415['datetime']?0x1:_0x5be415[_0x57a71f(0x16e)]>_0x5c6237[_0x57a71f(0x16e)]?-0x1:0x0);let _0x39a0ac=0x0;for(let _0x5ee758 of _0x234239){await updateCoinResults(_0x5ee758,!![]);}}catch(_0x598f1e){await handleError(_0x598f1e,'recreateCoinResults()');}}async function getAllEventOrders(_0x430bf4){const _0x3103ae=_0x477922;let _0x3d003d=[],_0x1c3033=dbLogs['get'](_0x3103ae(0x1f0))[_0x3103ae(0x2a1)](_0x58f897=>{const _0x20b758=_0x3103ae,_0x59442d=_0x58f897[_0x20b758(0x212)][_0x20b758(0x173)]();return _0x59442d['includes'](_0x430bf4[_0x20b758(0x173)]())&&(_0x59442d[_0x20b758(0x25b)]('market')&&_0x59442d[_0x20b758(0x25b)](_0x20b758(0x183))||_0x59442d[_0x20b758(0x25b)](_0x20b758(0x1e6))&&_0x59442d['includes'](_0x20b758(0x183)));})['sortBy'](_0x3103ae(0x18c))['value']();return _0x1c3033[_0x3103ae(0x18b)](_0x58fc76=>{const _0x22b612=_0x3103ae,_0x2c1a9f=_0x58fc76['event'][_0x22b612(0x25b)](_0x22b612(0x213))?_0x22b612(0x213):_0x22b612(0x2b4),_0x18ec93=/#([0-9]|\.)+\s/i,_0x3e83d9=Number(_0x18ec93['exec'](_0x58fc76[_0x22b612(0x212)])[0x0]['slice'](0x1)),_0x43b5ef=/@([0-9]|\.)+$/i,_0x46fdd8=Number(_0x43b5ef['exec'](_0x58fc76[_0x22b612(0x212)])[0x0][_0x22b612(0x19b)](0x1));_0x3d003d[_0x22b612(0x2a3)]({'datetime':_0x58fc76['time'],'coin':symbolToCoin(_0x430bf4),'symbol':_0x430bf4,'side':_0x2c1a9f,'amount':_0x3e83d9,'filled':_0x3e83d9,'price':_0x46fdd8});}),_0x3d003d;}async function getAllOrders(_0x4bda7b,_0x2ba92f){const _0x5b3c57=_0x477922;let _0x1b7af1=[];while(_0x2ba92f<exchange[_0x5b3c57(0x2bb)]()){const _0x3da2e7=0x1f4;try{const _0x18776a=await exchange[_0x5b3c57(0x300)](_0x4bda7b,_0x2ba92f,_0x3da2e7);if(_0x18776a[_0x5b3c57(0x280)])_0x2ba92f=_0x18776a[_0x18776a[_0x5b3c57(0x280)]-0x1][_0x5b3c57(0x1c2)]+0x1,_0x1b7af1=_0x1b7af1[_0x5b3c57(0x217)](_0x18776a);else break;}catch(_0x871196){await handleError(_0x871196,_0x5b3c57(0x299),_0x4bda7b);}}return _0x1b7af1;}async function validate24hChanges(){const _0x2262a0=_0x477922;for(const _0x24da7a of currentCoins){if(_0x24da7a['coin']!=config[_0x2262a0(0x2ac)]){let _0x5e2575;_0x24da7a[_0x2262a0(0x297)]?_0x5e2575=formatResult((0x1/(global[_0x2262a0(0x187)][noslash(_0x24da7a[_0x2262a0(0x1a3)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5e2575=global[_0x2262a0(0x187)][noslash(_0x24da7a[_0x2262a0(0x1a3)])],_0x5e2575<config[_0x2262a0(0x1b9)]&&(logHistory('error',_0x24da7a[_0x2262a0(0x17c)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x5e2575+'%'),logHistory(_0x2262a0(0x293),_0x2262a0(0x2e9)),logHistory(_0x2262a0(0x293),_0x2262a0(0x26c)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x28343b,_0x53bb89){const _0x228107=_0x477922;if(!_0x28343b)return!![];const _0x1f0608=_0x53bb89[_0x228107(0x2d4)]('.'),_0x3d28d0=_0x28343b[_0x228107(0x2d4)]('.');for(var _0x287e24=0x0;_0x287e24<_0x3d28d0[_0x228107(0x280)];_0x287e24++){const _0x5cec3f=~~_0x3d28d0[_0x287e24],_0x368aa8=~~_0x1f0608[_0x287e24];if(_0x5cec3f<_0x368aa8)return!![];if(_0x5cec3f>_0x368aa8)return![];}return![];}async function oneTimeMigration(){const _0x51254b=_0x477922;let _0x45894b=dbLogs['get'](_0x51254b(0x2d1))[_0x51254b(0x194)]();if(isOlderVersion(_0x45894b,_0x51254b(0x1d0))){let _0x4a246d=[];const _0x3cc958=dbLogs[_0x51254b(0x1cc)](_0x51254b(0x1f0))[_0x51254b(0x194)]();_0x3cc958['forEach'](_0x9d78dc=>{const _0x11c3dc=_0x51254b;_0x4a246d['push']({'time':_0x9d78dc['time'],'type':_0x9d78dc[_0x11c3dc(0x2df)],'event':_0x9d78dc[_0x11c3dc(0x212)]});}),dbLogs[_0x51254b(0x1cc)](_0x51254b(0x1f0))[_0x51254b(0x1b8)](_0x4a246d)[_0x51254b(0x2e0)]();}let _0xd5ebe4=dbConfig['get'](_0x51254b(0x2d1))['value']();if(isOlderVersion(_0xd5ebe4,_0x51254b(0x1d0))){let _0xff9f39=dbConfig[_0x51254b(0x1cc)](_0x51254b(0x22c))[_0x51254b(0x2be)]({'botID':botID})['value']();if(_0xff9f39){let _0x5ee198=[];_0xff9f39[_0x51254b(0x1fd)][_0x51254b(0x18b)](_0x4dce29=>{const _0x5d10c0=_0x51254b;_0x5ee198[_0x5d10c0(0x2a3)]({'coin':_0x4dce29['coin'],'number':_0x4dce29[_0x5d10c0(0x251)],'price':_0x4dce29[_0x5d10c0(0x226)]}),delete _0x4dce29[_0x5d10c0(0x251)],delete _0x4dce29[_0x5d10c0(0x226)];});if(_0x5ee198[_0x51254b(0x280)]!==0x0)fs['writeFile'](configbackuppath+(_0x51254b(0x1f3)+botID+_0x51254b(0x185)),JSON[_0x51254b(0x2ba)](_0x5ee198,null,0x4),function(_0x46c650){if(_0x46c650){}});const _0x277b16=(_0x489183,_0x1b29d0)=>{const _0x2d0aa8=_0x51254b;let _0x2e8b9f=[];_0x1b29d0[_0x2d0aa8(0x18b)](_0x35ccbb=>{const _0x4b5558=_0x2d0aa8,_0x548156=_0x489183['find'](_0x133c62=>_0x133c62['coin']==_0x35ccbb[_0x4b5558(0x17c)]);if(!_0x548156)_0x2e8b9f[_0x4b5558(0x2a3)](_0x35ccbb);});let _0x32751e=[];return _0x489183[_0x2d0aa8(0x18b)](_0x3c30a3=>{const _0xf3611b=_0x2d0aa8,_0x3100f5=_0x1b29d0[_0xf3611b(0x2be)](_0x1dcd86=>_0x1dcd86[_0xf3611b(0x17c)]==_0x3c30a3['coin']);if(!_0x3100f5||_0x3100f5[_0xf3611b(0x2fe)]==0x0&&_0x3c30a3[_0xf3611b(0x2fe)]!=0x0)_0x32751e[_0xf3611b(0x2a3)](_0x3c30a3);}),{'missingDay1':_0x2e8b9f,'notInDay2':_0x32751e};},_0x46116f=dbPerformance['get'](_0x51254b(0x2de))['cloneDeep']()[_0x51254b(0x194)]();if(_0x46116f[_0x51254b(0x280)]>0x1){const {missingDay1:_0x462b5f,notInDay2:_0x53db43}=_0x277b16(_0x5ee198,_0x46116f[0x1]['coins']);_0x5ee198=[..._0x5ee198,..._0x462b5f],_0x53db43[_0x51254b(0x18b)](_0x1fafec=>{const _0x4c9787=_0x51254b;let _0x4cbb2d=_0x5ee198['findIndex'](_0x3e0426=>_0x3e0426[_0x4c9787(0x17c)]==_0x1fafec[_0x4c9787(0x17c)]);_0x4cbb2d!=-0x1&&_0x5ee198['splice'](_0x4cbb2d,0x1);});}_0x5ee198[_0x51254b(0x26e)]((_0xfa5a30,_0x51e06d)=>_0xfa5a30[_0x51254b(0x17c)]>_0x51e06d['coin']?0x1:_0x51e06d[_0x51254b(0x17c)]>_0xfa5a30[_0x51254b(0x17c)]?-0x1:0x0);let _0x70c639=[{'date':_0xff9f39[_0x51254b(0x1c9)],'changes':_0x5ee198}];_0x46116f[_0x51254b(0x280)]>0x2&&_0x46116f[_0x51254b(0x18b)]((_0x51fb79,_0x2d8640)=>{const _0xc3d9e=_0x51254b;if(_0x2d8640>0x0&&_0x2d8640<_0x46116f[_0xc3d9e(0x280)]-0x1){const {missingDay1:_0x5140d5,notInDay2:_0x563d54}=_0x277b16(_0x46116f[_0x2d8640][_0xc3d9e(0x2e7)],_0x46116f[_0x2d8640+0x1][_0xc3d9e(0x2e7)]);_0x5ee198=[],(_0x5140d5[_0xc3d9e(0x280)]!=0x0||_0x563d54[_0xc3d9e(0x280)]!=0x0)&&(_0x5140d5['length']!=0x0&&_0x5ee198['push'](..._0x5140d5),_0x563d54[_0xc3d9e(0x280)]!=0x0&&(_0x563d54[_0xc3d9e(0x18b)](_0x43f543=>{const _0x50be1f=_0xc3d9e;_0x43f543[_0x50be1f(0x2fe)]=-_0x43f543[_0x50be1f(0x2fe)];}),_0x5ee198[_0xc3d9e(0x2a3)](..._0x563d54)),_0x5ee198['sort']((_0x1f381f,_0x5ea851)=>_0x1f381f['coin']>_0x5ea851[_0xc3d9e(0x17c)]?0x1:_0x5ea851[_0xc3d9e(0x17c)]>_0x1f381f['coin']?-0x1:0x0),_0x70c639['push']({'date':_0x46116f[_0x2d8640+0x1]['date'],'changes':_0x5ee198}));}}),dbConfig[_0x51254b(0x1cc)](_0x51254b(0x22c))[_0x51254b(0x2be)]({'botID':botID})[_0x51254b(0x1b8)]({..._0xff9f39,'liquidity':_0x70c639})[_0x51254b(0x2e0)]();}}if(isOlderVersion(_0xd5ebe4,_0x51254b(0x1d7))){let _0x36ea23=dbConfig[_0x51254b(0x1cc)](_0x51254b(0x22c))['find']({'botID':botID})[_0x51254b(0x194)]();if(_0x36ea23){const _0x1e594c=_0x36ea23[_0x51254b(0x171)],_0x301ec0=_0x1e594c?capitalize(_0x1e594c):'Binance';dbConfig[_0x51254b(0x1cc)]('bot')[_0x51254b(0x2be)]({'botID':botID})['assign']({'exchange':_0x301ec0})['write']();}}let _0x2b2683=dbPerformance[_0x51254b(0x1cc)]('version')['value']();isOlderVersion(_0x2b2683,_0x51254b(0x1d0))&&setStartDatePerformance();let _0x1e3d2e=dbCoinResults[_0x51254b(0x1cc)](_0x51254b(0x2d1))['value']();if(isOlderVersion(_0x1e3d2e,'2.5.0')){let _0x2d9afa=dbCoinResults['get'](_0x51254b(0x2e7))[_0x51254b(0x194)]();if(_0x2d9afa[_0x51254b(0x280)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x15904b=_0x477922;dbConfig[_0x15904b(0x25f)]('version',serverversion)[_0x15904b(0x2e0)](),dbPerformance['set'](_0x15904b(0x2d1),serverversion)['write'](),dbLogs[_0x15904b(0x25f)](_0x15904b(0x2d1),serverversion)['write'](),dbCoinResults[_0x15904b(0x25f)](_0x15904b(0x2d1),serverversion)[_0x15904b(0x2e0)]();}function getConfiguration(_0x442be7){const _0x3813e0=_0x477922;let _0x340072=dbConfig[_0x3813e0(0x1cc)](_0x3813e0(0x22c))[_0x3813e0(0x2be)]({'botID':_0x442be7})[_0x3813e0(0x194)]();if(_0x340072){let _0x5cd515=![];typeof _0x340072[_0x3813e0(0x2c6)]==_0x3813e0(0x292)&&(_0x340072={..._0x340072,'threshold':Number(_0x340072[_0x3813e0(0x2c6)])},_0x5cd515=!![]),_0x340072[_0x3813e0(0x1b9)]==undefined&&(_0x340072={..._0x340072,'change24h':-0x14},_0x5cd515=!![]),_0x340072[_0x3813e0(0x175)]==undefined&&(_0x340072={..._0x340072,'fiat':_0x3813e0(0x2a0)},_0x5cd515=!![]),_0x340072['onepagemode']==undefined&&(_0x340072={..._0x340072,'onepagemode':settings[_0x3813e0(0x291)]},_0x5cd515=!![]),_0x340072['colorscheme']==undefined&&(_0x340072={..._0x340072,'colorscheme':_0x3813e0(0x20b)},_0x5cd515=!![]),_0x340072[_0x3813e0(0x2ea)]==undefined&&(_0x340072={..._0x340072,'autoliquidity':!![]},_0x5cd515=!![]),_0x5cd515&&(_0x340072={'botID':_0x340072[_0x3813e0(0x2cd)],'exchange':_0x340072[_0x3813e0(0x171)],'apiKey':_0x340072[_0x3813e0(0x177)],'apiSecret':_0x340072[_0x3813e0(0x2f0)],'apiPassword':_0x340072['apiPassword'],'basecoin':_0x340072['basecoin'],'botname':_0x340072[_0x3813e0(0x22e)],'showname':_0x340072[_0x3813e0(0x18a)],'threshold':_0x340072[_0x3813e0(0x2c6)],'ordertype':_0x340072[_0x3813e0(0x303)],'timeout':_0x340072[_0x3813e0(0x21b)],'fiat':_0x340072[_0x3813e0(0x175)],'startdate':_0x340072[_0x3813e0(0x1c9)],'recreate':_0x340072[_0x3813e0(0x289)],'timeshift':_0x340072['timeshift'],'onepagemode':_0x340072[_0x3813e0(0x291)],'headless':_0x340072[_0x3813e0(0x229)],'cooldown':_0x340072[_0x3813e0(0x257)],'change24h':_0x340072['change24h'],'emojibuy':_0x340072[_0x3813e0(0x231)],'emojisell':_0x340072[_0x3813e0(0x1f6)],'colorscheme':_0x340072[_0x3813e0(0x2a5)],'portfolio':_0x340072['portfolio'],'autoliquidity':_0x340072[_0x3813e0(0x2ea)],'liquidity':_0x340072['liquidity'],'openOrders':_0x340072['openOrders']},dbConfig['get'](_0x3813e0(0x22c))[_0x3813e0(0x2ec)]()['write'](),dbConfig['get'](_0x3813e0(0x22c))[_0x3813e0(0x2a3)](_0x340072)[_0x3813e0(0x2e0)]());}else _0x340072={'botID':_0x442be7,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3813e0(0x23b)+_0x442be7,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x3813e0(0x291)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3813e0(0x20b),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x340072;}function emittedConfiguration(){const _0x3b1145=_0x477922;let _0x32f048;if(config[_0x3b1145(0x177)]=='')_0x32f048={...config,'configstate':_0x3b1145(0x30b)};else config[_0x3b1145(0x177)]==_0x3b1145(0x247)?_0x32f048={...config,'configstate':_0x3b1145(0x20e)}:(_0x32f048={...config,'apiKey':'************','apiSecret':_0x3b1145(0x2af)},config[_0x3b1145(0x306)]&&(_0x32f048[_0x3b1145(0x306)]=_0x3b1145(0x2af)));return _0x32f048;}function getSettings(){const _0x74e9de=_0x477922;return dbSettings['get'](_0x74e9de(0x215))[_0x74e9de(0x194)]();}function getSecure(){const _0x50767a=_0x477922;return dbSecure['get'](_0x50767a(0x2b0))[_0x50767a(0x194)]()||{};}function updateTimeshift(_0x58c3b2){const _0x166654=_0x477922;let _0x4d0fdf=dbConfig[_0x166654(0x1cc)]('bot')[_0x166654(0x2be)]({'botID':botID})['value']();_0x4d0fdf&&dbConfig[_0x166654(0x1cc)](_0x166654(0x22c))[_0x166654(0x2be)]({'botID':botID})[_0x166654(0x1b8)]({'timeshift':_0x58c3b2})['write'](),config['timeshift']=_0x58c3b2,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x2e29f7){const _0xbc0ca8=_0x477922;let _0x9717df=dbConfig[_0xbc0ca8(0x1cc)](_0xbc0ca8(0x22c))[_0xbc0ca8(0x2be)]({'botID':botID})[_0xbc0ca8(0x194)]();_0x9717df&&dbConfig['get'](_0xbc0ca8(0x22c))[_0xbc0ca8(0x2be)]({'botID':botID})[_0xbc0ca8(0x1b8)]({'onepagemode':_0x2e29f7})['write'](),config[_0xbc0ca8(0x291)]=_0x2e29f7,proxyEmit(_0xbc0ca8(0x1a5),emittedConfiguration());}async function storeConfiguration(_0x13b5f9){const _0x3fc84e=_0x477922;logger[_0x3fc84e(0x19c)](_0x3fc84e(0x178));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x3fc84e(0x19c)](_0x3fc84e(0x261));let _0x57f89f=[],_0x3ddf86=![],_0x1b5011=![],_0x3c3b61=[];_0x13b5f9[_0x3fc84e(0x1fd)][_0x3fc84e(0x18b)](_0x20309d=>{const _0x169290=_0x3fc84e;if(!_0x20309d[_0x169290(0x2a2)]&&_0x20309d[_0x169290(0x17c)]!=_0x13b5f9[_0x169290(0x2ac)])_0x3c3b61[_0x169290(0x2a3)](_0x20309d[_0x169290(0x1a3)]);}),_0x3c3b61[_0x3fc84e(0x18b)](_0x4d0e3d=>{const _0x1d54e4=_0x3fc84e,_0x13ac92=watchedSymbols[_0x1d54e4(0x25b)](_0x4d0e3d);!_0x13ac92&&_0x57f89f[_0x1d54e4(0x2a3)](_0x4d0e3d);}),_0x3c3b61['forEach'](_0x27115b=>{const _0x5f06e7=_0x3fc84e,_0x7c4947=currentCoins[_0x5f06e7(0x2be)](_0x48508d=>_0x48508d[_0x5f06e7(0x1a3)]==_0x27115b);!_0x7c4947&&(_0x3ddf86=!![]);}),currentCoins[_0x3fc84e(0x18b)](_0x4aa3c2=>{const _0x3e666c=_0x3fc84e;if(_0x4aa3c2[_0x3e666c(0x17c)]!=config[_0x3e666c(0x2ac)]){const _0x4bba65=_0x3c3b61[_0x3e666c(0x2be)](_0x58c37c=>_0x58c37c==_0x4aa3c2['symbol']);!_0x4bba65&&(_0x3ddf86=!![]);}}),_0x13b5f9[_0x3fc84e(0x1fd)]['forEach'](_0x35a08f=>{const _0x3c250f=_0x3fc84e,_0x5bc082=config['portfolio'][_0x3c250f(0x2be)](_0x1ff525=>_0x1ff525['coin']==_0x35a08f['coin']);if(_0x5bc082&&_0x35a08f[_0x3c250f(0x305)]!=_0x5bc082[_0x3c250f(0x305)])_0x1b5011=!![];});let _0x5747f1=dbConfig[_0x3fc84e(0x1cc)](_0x3fc84e(0x22c))[_0x3fc84e(0x2be)]({'botID':botID})['value']();_0x13b5f9={..._0x13b5f9,'apiKey':crypt['decrypt'](secure[_0x3fc84e(0x2dc)],_0x13b5f9['apiKey'])[_0x3fc84e(0x2fd)],'apiSecret':crypt['decrypt'](secure[_0x3fc84e(0x2dc)],_0x13b5f9['apiSecret'])[_0x3fc84e(0x2fd)]};_0x13b5f9['apiPassword']&&(_0x13b5f9['apiPassword']=crypt[_0x3fc84e(0x2c4)](secure[_0x3fc84e(0x2dc)],_0x13b5f9['apiPassword'])[_0x3fc84e(0x2fd)]);let _0x350230=![];if(_0x5747f1){_0x13b5f9['apiKey']==_0x3fc84e(0x2af)?_0x13b5f9[_0x3fc84e(0x177)]=config[_0x3fc84e(0x177)]:_0x350230=!![];_0x13b5f9['apiSecret']==_0x3fc84e(0x2af)?_0x13b5f9[_0x3fc84e(0x2f0)]=config[_0x3fc84e(0x2f0)]:_0x350230=!![];if(_0x13b5f9[_0x3fc84e(0x306)]=='************')_0x13b5f9[_0x3fc84e(0x306)]=config[_0x3fc84e(0x306)];else{if(_0x13b5f9[_0x3fc84e(0x306)])_0x350230=!![];}dbConfig['get'](_0x3fc84e(0x22c))['find']({'botID':botID})[_0x3fc84e(0x1b8)](_0x13b5f9)[_0x3fc84e(0x2e0)]();}else dbConfig[_0x3fc84e(0x1cc)]('bot')[_0x3fc84e(0x2a3)](_0x13b5f9)[_0x3fc84e(0x2e0)](),_0x350230=!![],process[_0x3fc84e(0x170)]({'status':_0x3fc84e(0x2f1),'live':_0x3fc84e(0x2fc)},_0x18d167=>{});process[_0x3fc84e(0x170)]({'botname':_0x13b5f9['botname']},_0x34d223=>{}),updateBotManager(),config={..._0x13b5f9},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x350230)await reset(_0x57f89f,!![]);else _0x3ddf86||_0x1b5011?await reset(_0x57f89f,![]):getBalances();blockTransactionDetection=![],logger[_0x3fc84e(0x19c)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0xe89be8){const _0x60e538=_0x477922,_0xdcd0dc={...config,'headless':_0xe89be8[_0x60e538(0x229)]};let _0x47350a=dbConfig[_0x60e538(0x1cc)](_0x60e538(0x22c))[_0x60e538(0x2be)]({'botID':botID})[_0x60e538(0x194)]();_0x47350a&&dbConfig[_0x60e538(0x1cc)](_0x60e538(0x22c))[_0x60e538(0x2be)]({'botID':botID})[_0x60e538(0x1b8)](_0xdcd0dc)[_0x60e538(0x2e0)](),config={..._0xdcd0dc},updateBotManager(),proxyEmit(_0x60e538(0x1a5),emittedConfiguration());}async function storeFiat(_0x85a324){const _0x2b16cf=_0x477922,_0x336c65={...config,'fiat':_0x85a324};let _0x4ec0bc=dbConfig[_0x2b16cf(0x1cc)](_0x2b16cf(0x22c))[_0x2b16cf(0x2be)]({'botID':botID})[_0x2b16cf(0x194)]();_0x4ec0bc&&dbConfig[_0x2b16cf(0x1cc)](_0x2b16cf(0x22c))[_0x2b16cf(0x2be)]({'botID':botID})[_0x2b16cf(0x1b8)](_0x336c65)[_0x2b16cf(0x2e0)](),config={..._0x336c65},proxyEmit(_0x2b16cf(0x1a5),emittedConfiguration());}function resetHistory(){const _0x2f905c=_0x477922;logger[_0x2f905c(0x2c0)]('Resetting\x20bot\x20history');try{if(fs[_0x2f905c(0x27f)](path[_0x2f905c(0x1c0)](configpath,'bot-'+botID+_0x2f905c(0x21f))))fs[_0x2f905c(0x2c9)](path[_0x2f905c(0x1c0)](configpath,'bot-'+botID+'-events.json'));if(fs[_0x2f905c(0x27f)](path['join'](configpath,'bot-'+botID+'-performance.json')))fs[_0x2f905c(0x2c9)](path[_0x2f905c(0x1c0)](configpath,'bot-'+botID+_0x2f905c(0x286)));if(fs[_0x2f905c(0x27f)](path[_0x2f905c(0x1c0)](configpath,'bot-'+botID+'-results.json')))fs[_0x2f905c(0x2c9)](path[_0x2f905c(0x1c0)](configpath,'bot-'+botID+_0x2f905c(0x18f)));}catch(_0x15128b){if(_0x15128b)logger[_0x2f905c(0x2c0)](_0x2f905c(0x174),_0x15128b);}const _0x10295c=getDate();let _0x2ac61b=[];currentCoins[_0x2f905c(0x18b)](_0x2394d3=>{const _0x2935db=_0x2f905c;_0x2ac61b['push']({'coin':_0x2394d3[_0x2935db(0x17c)],'number':_0x2394d3['number'],'price':_0x2394d3[_0x2935db(0x24c)]});});let _0x437cc3=dbConfig[_0x2f905c(0x1cc)]('bot')['find']({'botID':botID})[_0x2f905c(0x194)]();_0x437cc3&&(dbConfig[_0x2f905c(0x1cc)]('bot')[_0x2f905c(0x2be)]({'botID':botID})[_0x2f905c(0x1b8)]({'liquidity':[{'date':_0x10295c,'changes':_0x2ac61b}]})[_0x2f905c(0x2e0)](),config[_0x2f905c(0x275)]=[]),process[_0x2f905c(0x170)]({'stop':'restart'},_0x531851=>{});}function noslash(_0x5ce8f8){const _0x445cf3=_0x477922;return _0x5ce8f8[_0x445cf3(0x29e)]('/','');}function updateHighestFee(_0x29d282){const _0x3f6261=_0x477922;if(_0x29d282[_0x3f6261(0x297)]){let _0x56672d={'filled':_0x29d282['filled']*_0x29d282[_0x3f6261(0x1b2)],'amount':_0x29d282[_0x3f6261(0x1e6)]*_0x29d282[_0x3f6261(0x1b2)],'side':_0x29d282[_0x3f6261(0x24a)]=='sell'?_0x3f6261(0x2b4):_0x3f6261(0x213),'price':0x1/_0x29d282[_0x3f6261(0x1b2)]};_0x29d282={..._0x29d282,..._0x56672d};}const _0x332ee6=defaultFee*_0x29d282[_0x3f6261(0x1e6)]*_0x29d282['price'];lastFees[_0x3f6261(0x2ed)][_0x3f6261(0x280)]===0x14&&lastFees[_0x3f6261(0x2ed)][_0x3f6261(0x2f2)](),lastFees[_0x3f6261(0x2ed)][_0x3f6261(0x2a3)](_0x332ee6),lastFees[_0x3f6261(0x201)]=Math['max'](...lastFees[_0x3f6261(0x2ed)]);}async function updateNumberCoinsCcxt(_0x4b8d31){const _0x2484d2=_0x477922;logger['debug'](_0x2484d2(0x2c5)+_0x4b8d31['symbol']+_0x2484d2(0x2ca)+_0x4b8d31[_0x2484d2(0x203)]+'\x20|\x20'+_0x4b8d31['id']);let _0x217e73=_0x4b8d31[_0x2484d2(0x203)],_0x101d7d=![];currentCoins[_0x2484d2(0x18b)](_0x3aa7fa=>{_0x3aa7fa['symbol']==_0x4b8d31['symbol']&&(_0x101d7d=!![]);});if(!_0x101d7d)return;const _0x4d4f34=currentCoins[_0x2484d2(0x2be)](_0x25412a=>_0x25412a[_0x2484d2(0x1a3)]==_0x4b8d31[_0x2484d2(0x1a3)]),_0x541eb5=_0x1bf890=>{const _0xcc4465=_0x2484d2;if(_0x4d4f34)_0x4d4f34[_0xcc4465(0x1f9)]=_0x1bf890;};if(_0x217e73=='open')_0x541eb5(_0x2484d2(0x2b7));else{if(_0x217e73==_0x2484d2(0x20c)){_0x541eb5(_0x2484d2(0x20c));const _0x61227b=await getCoins();[currentCoins,currentCoinsAll]=_0x61227b,await getOpenOrders(),handleOpenOrders();}else{if(_0x217e73=='closed'){logger[_0x2484d2(0x19c)]('1\x20-\x20FILLED:\x20'+_0x4b8d31['symbol']+_0x2484d2(0x2ca)+_0x4b8d31[_0x2484d2(0x1e6)]+'\x20|\x20'+_0x4b8d31['id']);let _0x4b7112=![];if(lastOrders)for(const _0x611c1c of lastOrders){const _0x5a62e4=0xc8,_0xc58339=0x1388;let _0x4ea1a2=0x0;while(!_0x611c1c[_0x2484d2(0x190)]&&_0x4ea1a2*_0x5a62e4<_0xc58339){_0x4ea1a2++,await sleep(_0x5a62e4);}if(_0x4ea1a2>0x0)logger[_0x2484d2(0x19c)](_0x2484d2(0x1bb)+_0x4ea1a2*_0x5a62e4/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x611c1c[_0x2484d2(0x190)]==_0x4b8d31['id']){logger[_0x2484d2(0x19c)](_0x2484d2(0x2a7)+_0x4b8d31['id']),_0x4b7112=!![];if(_0x611c1c[_0x2484d2(0x1e6)]==0x0){logger[_0x2484d2(0x19c)](_0x2484d2(0x2f7)+_0x4b8d31['id']);if(_0x4b8d31[_0x2484d2(0x309)])_0x611c1c['price']=_0x4b8d31[_0x2484d2(0x309)];else{if(_0x4b8d31[_0x2484d2(0x1b2)])_0x611c1c[_0x2484d2(0x1b2)]=_0x4b8d31['price'];else{}}_0x611c1c[_0x2484d2(0x1e6)]=_0x4b8d31[_0x2484d2(0x1e6)],updateHighestFee(_0x611c1c),_0x541eb5(_0x2484d2(0x1e6)),await validateOrders();if(lockOrders==ORDERS[_0x2484d2(0x274)]){const _0xff50c3=await getCoins();[currentCoins,currentCoinsAll]=_0xff50c3;}_0x611c1c[_0x2484d2(0x1b4)]={'currency':_0x4b8d31[_0x2484d2(0x1b4)]?_0x4b8d31['fee']['currency']:null,'cost':_0x4b8d31[_0x2484d2(0x1b4)]?_0x4b8d31['fee'][_0x2484d2(0x17a)]:0x0},await updateCoinResults(_0x611c1c);}}}if(!_0x4b7112){logger[_0x2484d2(0x19c)](_0x2484d2(0x28c)+_0x4b8d31['id']),_0x541eb5(_0x2484d2(0x1e6));const _0x34d221=await getCoins();[currentCoins,currentCoinsAll]=_0x34d221,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0xc719f6=JSON[_0x2484d2(0x266)](lastBalances[_0x2484d2(0x1fd)]);const _0x238a77=_0xc719f6[_0x2484d2(0x2be)](_0x5b5c58=>_0x5b5c58[_0x2484d2(0x1a3)]==_0x4b8d31[_0x2484d2(0x1a3)]);if(_0x238a77){if(_0x217e73==_0x2484d2(0x2b7))_0x238a77[_0x2484d2(0x1f9)]=_0x238a77[_0x2484d2(0x1f9)]=='filled'?'filled':'open';else{if(_0x217e73==_0x2484d2(0x20c))_0x238a77[_0x2484d2(0x1f9)]=_0x238a77['orderstatus']==_0x2484d2(0x1e6)?_0x2484d2(0x1e6):_0x2484d2(0x20c);else _0x217e73==_0x2484d2(0x25c)&&(_0x238a77[_0x2484d2(0x1f9)]=_0x2484d2(0x1e6));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2484d2(0x2ba)](_0xc719f6)},proxyEmit(_0x2484d2(0x1bd),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x428738=_0x477922;await getOpenOrders();let _0x5267a9=![];currentCoins[_0x428738(0x18b)](_0x2dec6d=>{const _0x37cf8e=_0x428738;_0x5267a9=allOpenOrders[_0x37cf8e(0x2be)](_0x2cdb71=>_0x2cdb71['symbol']==_0x2dec6d[_0x37cf8e(0x1a3)]),_0x2dec6d[_0x37cf8e(0x1f9)]=_0x5267a9?_0x37cf8e(0x2b7):'none';});}async function getCoins(_0x129658=!![],_0x84b18a=config[_0x477922(0x2ac)]){const _0x284522=_0x477922;let _0xff19ea,_0x558a2f=[],_0x3f08c7=[],_0x46f7af=[],_0x40eb73=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0xff19ea=await exchange[_0x284522(0x284)](),mybalances=_0xff19ea[_0x284522(0x186)];for(const [_0x3beace,_0x298c2c]of Object[_0x284522(0x1bf)](mybalances)){_0x40eb73[_0x284522(0x2a3)](_0x3beace);}if(_0x84b18a=='')for(const [_0x95245c,_0x554812]of Object['entries'](mybalances)){_0x554812!=0x0&&_0x3f08c7[_0x284522(0x2a3)]({'coin':_0x95245c});}else{let _0x1ac6eb=![];for(const [_0x247b0b,_0x23da87]of Object['entries'](mybalances)){if(_0x40eb73[_0x284522(0x25b)](_0x247b0b)){const _0x3f9cb8=config['portfolio'][_0x284522(0x2be)](_0x549a73=>_0x549a73['coin']==_0x247b0b),_0x3159fc=_0x247b0b+'/'+_0x84b18a,_0x4f0a7d=_0x84b18a+'/'+_0x247b0b,_0x49d79e=currentCoins[_0x284522(0x2be)](_0x517462=>_0x517462[_0x284522(0x17c)]==_0x247b0b);_0x1ac6eb=![];if((_0x23da87!=0x0||_0x3f9cb8)&&(allSymbols[_0x284522(0x25b)](_0x3159fc)||_0x247b0b==_0x84b18a))_0x247b0b!=_0x84b18a&&_0x558a2f[_0x284522(0x2a3)](_0x3159fc),_0x3f08c7[_0x284522(0x2a3)]({'coin':_0x247b0b,'symbol':_0x3159fc,'reverse':![],'number':Math[_0x284522(0x1b6)](_0x23da87+(_0x3f9cb8&&_0x3f9cb8[_0x284522(0x305)]||0x0),0x0),'orderstatus':_0x49d79e?_0x49d79e['orderstatus']:'none'});else(_0x23da87!=0x0||_0x3f9cb8)&&allSymbols[_0x284522(0x25b)](_0x4f0a7d)&&(_0x247b0b!=_0x84b18a&&_0x558a2f[_0x284522(0x2a3)](_0x4f0a7d),_0x3f08c7[_0x284522(0x2a3)]({'coin':_0x247b0b,'symbol':_0x4f0a7d,'reverse':!![],'number':Math[_0x284522(0x1b6)](_0x23da87+(_0x3f9cb8&&_0x3f9cb8[_0x284522(0x305)]||0x0),0x0),'orderstatus':_0x49d79e?_0x49d79e[_0x284522(0x1f9)]:_0x284522(0x2d8)}));}}}}catch(_0x1a8bc9){if(!_0x129658)handleErrorNoStop(_0x1a8bc9,'getCoins()');else await handleError(_0x1a8bc9,_0x284522(0x245));}return _0x46f7af=cloneDeep(_0x3f08c7),_0x3f08c7=_0x3f08c7[_0x284522(0x2a1)](_0x2ac2c0=>{const _0x546f52=_0x284522,_0x5927aa=config[_0x546f52(0x1fd)][_0x546f52(0x2be)](_0x4f82b7=>_0x4f82b7['coin']==_0x2ac2c0[_0x546f52(0x17c)]);return _0x5927aa&&!_0x5927aa[_0x546f52(0x2a2)];}),[_0x3f08c7,_0x46f7af];}async function getCoinNumber(_0x3d7eb6){const _0x3d23f0=_0x477922;let _0x11a601;try{const _0x23d54d=await exchange[_0x3d23f0(0x284)]();_0x11a601=_0x23d54d[_0x3d23f0(0x186)][_0x3d7eb6];}catch(_0x503036){await handleError(_0x503036,_0x3d23f0(0x1e9));}return _0x11a601;}async function getOpenOrders(){const _0x545c7f=_0x477922;let _0x5ddf30;allOpenOrders=[];try{for(const _0x3323e7 of config['portfolio']){!_0x3323e7[_0x545c7f(0x2a2)]&&_0x3323e7[_0x545c7f(0x17c)]!=config[_0x545c7f(0x2ac)]&&(_0x5ddf30=await exchange[_0x545c7f(0x290)](_0x3323e7['symbol']),_0x5ddf30[_0x545c7f(0x280)]>0x0&&allOpenOrders[_0x545c7f(0x2a3)](_0x5ddf30[0x0]));}}catch(_0x59b0a6){await handleError(_0x59b0a6,_0x545c7f(0x1af));}}async function handleOpenOrders(_0x313ed8=0x0){const _0x412d5b=_0x477922;allOpenOrders[_0x412d5b(0x280)]==0x0&&lockOrders==ORDERS[_0x412d5b(0x274)]&&allOrdersPlaced&&(_0x313ed8==0x0?(logger[_0x412d5b(0x19c)](_0x412d5b(0x2d5)),_0x313ed8++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x412d5b(0x19c)](_0x412d5b(0x262)),validateOrders(_0x412d5b(0x269))));}function _0x380d(){const _0x17ed52=['UNLOCKING','recreate','format','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','2\x20-\x20FILLED\x20unknown\x20order:\x20','OrderNotFound','ORDERS.UNLOCKING','distribution','fetchOpenOrders','onepagemode','string','error','Fee\x20discount\x20refund\x20detected:\x20','createWriteStream','substring','reverse','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','getAllOrders','event-history','openOrders','cancel','Executing\x20exchange\x20reload','replace','/USD','USD','filter','excluded','push','changes','colorscheme','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','2\x20-\x20FILLED\x20known\x20order:\x20','2\x20-\x20Orders\x20unlocked','UNLOCKED','emitHistory','balancing\x20resumes\x20when\x20cooldown\x20ends','basecoin','BNB','<b>Bot\x20','************','secure','Huobi','net-basecoin','exchange\x20not\x20reloaded','buy','percentage','constructor','open','target','Unfilled\x20order(s)\x20canceled\x20after\x20','stringify','milliseconds','no\x20additional\x20symbols','</pre>','find','2320720ukFMaf','full','basecoinvalue','\x20:\x20','\x20|\x20highest\x20fee:\x20','decrypt','0\x20-\x20EXECUTION:\x20','threshold','must\x20be\x20greater\x20than\x20minimum\x20amount','uncaughtException','unlinkSync','\x20|\x20',':\x20timer\x20>','buys','botID','Uncaught\x20Exception:','fromCodePoint','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','version','add','getPortfolio(2)','split','1\x20-\x20Handle\x20open\x20orders','net-fiat','function','none','BTC','freeze','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','privateKey','\x20|\x20Error\x20details:\x20','data','type','write','\x20orders\x20in\x20less\x20than\x20','map','\x20hour','leftTxt','lowdb','currency','coins','RSA-OAEP','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','autoliquidity','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','remove','recent20','Order\x20is\x20invalid:\x20','\x20change','apiSecret','enabled','shift','padEnd','loadMarkets','Invalid\x20quantity','001','3\x20-\x20handling\x20FILLED\x20order:\x20','hybrid-crypto-js','placeOrder','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','5tokQvs','running','message','number','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','fetchClosedOrders','BNB/','additional\x20symbols\x20','ordertype','EUR','offset','apiPassword','limit-low','BUSD','average','splice','initial','Bybit','defaults','AuthenticationError','storeFiat','Portfolio\x20change\x20detected:\x20','/EUR','storeConfiguration','datetime','fetchTickers','send','exchange','watchOrders','toLowerCase','Error\x20while\x20deleting\x20files:\x20','fiat','\x20not\x20available','apiKey','Saving\x20configuration',':\x20Bot\x20','cost','Exchange','coin','\x20|\x20lock\x20orders:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','ticker','args','16436bNtZlN','/backup/','order','TUSD','.json','total','change','padStart','startsWith','showname','forEach','time','sells','rightTxt','-results.json','orderId','Cex','indexOf','NetworkError','value','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','ccxt','ExchangeNotAvailable','-------------------------------\x0a','Order\x20amount\x20is\x20invalid:\x20','getMonth','slice','debug','Huobipro','<b>','warning','fees','balancing\x20resumed','\x20minutes','symbol','./config/','configuration','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','bot-','eur','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20API\x20key\x20is\x20invalid','path','keys','2\x20-\x20Validate\x20orders:\x20','getOpenOrders()','password','coin-loading-progress','price','USDT','fee','\x20network\x20error','max','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','assign','change24h','page','Waited\x20','Initializing\x20coin\x20results','balances','ORDERS.UNLOCKED','entries','join','storeHeadless','timestamp','Error:\x20Invalid\x20argument\x20','ExchangeError','\x20portfolio:</b>\x20\x0a\x0a','%\x20(','OnMaintenance','getHours','startdate','min','Initiating\x20exchange\x20reload','get','toString','cancelOrders()','log','2.3.5','Crypt','InsufficientFunds','isEqual','mkdirSync','argv','333006wFdgdh','2.6.0','\x20|\x20exchange:\x20','apply','7XAxNcz','loadSymbols()','Unknown\x20error\x20occured','watchTrades','\x20value','(((.+)+)+)+$','getStartingBalances','added','timeshift','Order(s)\x20not\x20validated\x20after\x20','resetHistory','InvalidNonce','filled','Net\x20effect','-config.json','getCoinNumber()','delta','ongoing','Uncaught\x20NetworkError:','Limit\x20(low-margin)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getDate','logs','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Manual\x20balancing\x20required','starting-balance-','cancelOrder','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','emojisell','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','createOrder','orderstatus','differenceInSeconds','breakeven','final','portfolio','\x20API\x20secret\x20is\x20invalid','placeOrder()','performance','highest','Failed\x20to\x20load\x20coin\x20data\x20for\x20','status','Uncaught\x20ExchangeError:','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','spot','ORDERS.LOCKED','usd','1\x20-\x20Unlock\x20orders','<pre>','red_yellow_blue','canceled','yyyy-MM-dd\x27T\x27HH:mm:ss','recovery','pro','/output-000.log','yargs/yargs','event','sell','\x20minutes\x20-\x20','settings','has','concat','41wEjnwU','ID:\x20','limits','timeout','trade','abs','./logs/','-events.json','parseISO','sendMetricsTelegram','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','valid','Binance','fetchTicker','startprice','removed','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','headless','cancelLoading','bots','bot','toFixed','botname','lowdb/adapters/FileSync','998541aZHScJ','emojibuy','ETH','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20>\x20[DEBUG]\x20','test','\x20-\x20bot\x20not\x20started','getPortfolio(1)','getPortfolio','Reset\x20|\x20','stopExchange()','Bot\x20','1067972uzrjoi','getFullYear','Market','Resetting\x20coin\x20results:\x20','watchTrades(2)','\x20metrics:</b>\x20\x0a\x0a','\x20>\x20','restart','amountToPrecision','getCoins()','success','***','\x20closed\x20the\x20connection','API-key\x20format\x20invalid','side','limit','last','market','starting-balances','10gFKIdq','getSeconds','startnumber','amount','No\x20more\x20open\x20orders\x20-\x20','Pausing\x20for\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','round','cooldown','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled',',\x20must\x20be\x20a\x203\x20digit\x20number','limit-high','includes','closed','close','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','set','\x20order:\x20','Transaction\x20detection\x20blocked','2\x20-\x20Handled\x20open\x20orders','sha256','date-fns','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','parse','deleteHistoryAlerts','1087209xCLnCY','no\x20open\x20orders','active','Avoiding\x20continuous\x20order\x20attempts','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','remainingSymbols','sort','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','ask','exchanges','date','search','LOCKED','liquidity','Bitget','realized','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','5659489MXZrwh','random','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','sortBy','getTime','watchTrades(1)','existsSync','length','toUpperCase','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','yyyy/MM/dd','fetchBalance','./version.json','-performance.json','\x20|\x20Custom\x20ID:\x20'];_0x380d=function(){return _0x17ed52;};return _0x380d();}async function testAPI(_0x1d4114){const _0x32a337=_0x477922,_0x3374e1=ccxt['pro'][_0x1d4114[_0x32a337(0x171)][_0x32a337(0x173)]()],_0x1806da=new _0x3374e1({'apiKey':_0x1d4114[_0x32a337(0x177)],'secret':_0x1d4114[_0x32a337(0x2f0)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x32a337(0x206)}});if(_0x1d4114[_0x32a337(0x306)])_0x1806da[_0x32a337(0x1b0)]=_0x1d4114[_0x32a337(0x306)];try{await _0x1806da[_0x32a337(0x2f4)]();}catch(_0x730046){throw _0x730046;}}function cloneDeep(_0x73f1ca){const _0x49529f=_0x477922;return JSON[_0x49529f(0x266)](JSON[_0x49529f(0x2ba)](_0x73f1ca));}async function getPortfolio(_0x52a467){const _0x3bd516=_0x477922;let _0x3c41c9=[],_0xfd4632=[],_0x18cae5=[],_0x38310d;if(_0x52a467[_0x3bd516(0x177)]!==_0x3bd516(0x2af)||_0x52a467[_0x3bd516(0x2f0)]!=='************'||_0x52a467[_0x3bd516(0x306)]&&_0x52a467[_0x3bd516(0x306)]!=='************'){if(config[_0x3bd516(0x171)]){if(_0x52a467['apiKey']==_0x3bd516(0x2af))_0x52a467['apiKey']=config[_0x3bd516(0x177)];if(_0x52a467[_0x3bd516(0x2f0)]=='************')_0x52a467['apiSecret']=config[_0x3bd516(0x2f0)];if(_0x52a467[_0x3bd516(0x306)]=='************')_0x52a467['apiPassword']=config['apiPassword'];try{await testAPI(_0x52a467);}catch(_0x5d7f4a){if(_0x5d7f4a[_0x3bd516(0x1cd)]()[_0x3bd516(0x25b)](_0x3bd516(0x30e))){logger[_0x3bd516(0x19c)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x3bd516(0x1fd),![]);return;}else{handleError(_0x5d7f4a,'getPortfolio(0)');return;}}}await initExchange(_0x52a467['exchange'],_0x52a467['apiKey'],_0x52a467['apiSecret'],_0x52a467['apiPassword']);try{await loadSymbols();}catch(_0x6edf17){if(_0x6edf17[_0x3bd516(0x1cd)]()[_0x3bd516(0x25b)](_0x3bd516(0x30e))){proxyEmit(_0x3bd516(0x1fd),![]);return;}else{handleError(_0x6edf17,_0x3bd516(0x237));return;}}const _0x2b6e99=await getCoins(![],_0x52a467[_0x3bd516(0x2ac)]);_0x18cae5=cloneDeep(_0x2b6e99[0x1]);}else _0x18cae5=cloneDeep(currentCoinsAll);if(_0x52a467[_0x3bd516(0x2ac)]=='')proxyEmit('portfolio',_0x18cae5);else{_0x18cae5[_0x3bd516(0x18b)](_0x2ae8c7=>{const _0x3486ce=_0x3bd516;if(_0x2ae8c7[_0x3486ce(0x17c)]!=_0x52a467[_0x3486ce(0x2ac)])_0x3c41c9['push'](_0x2ae8c7['symbol']);});if(_0x3c41c9[_0x3bd516(0x280)]==0x0)logHistory(_0x3bd516(0x293),_0x3bd516(0x1a9));else{try{_0xfd4632=await exchange[_0x3bd516(0x16f)](_0x3c41c9);}catch(_0x1455f5){if(_0x1455f5[_0x3bd516(0x1cd)]()[_0x3bd516(0x25b)](_0x3bd516(0x30e))){proxyEmit(_0x3bd516(0x1fd),![]);return;}else{handleError(_0x1455f5,_0x3bd516(0x2d3));return;}}_0x18cae5[_0x3bd516(0x18b)](_0x48902c=>{const _0x383274=_0x3bd516;_0x48902c[_0x383274(0x17c)]!=_0x52a467[_0x383274(0x2ac)]?_0x38310d=_0x48902c['reverse']?0x1/_0xfd4632[_0x48902c[_0x383274(0x1a3)]][_0x383274(0x24c)]:_0xfd4632[_0x48902c[_0x383274(0x1a3)]][_0x383274(0x24c)]:_0x38310d=0x1,_0x48902c[_0x383274(0x1b2)]=formatResult(_0x38310d,0x8);}),proxyEmit('portfolio',_0x18cae5);}}}function truncateTradeAmount(_0x183cd2,_0x4c9813){const _0x4d8e9e=_0x477922;let _0x24ead7=0x0;try{_0x24ead7=exchange[_0x4d8e9e(0x244)](_0x183cd2,_0x4c9813);}catch(_0x42c10c){}return _0x24ead7;}function checkMinimums(_0x299f9c){const _0x6b59d7=_0x477922;let _0x1aef83=!![];const _0x195ae4=!_0x299f9c[_0x6b59d7(0x297)]?markets[_0x299f9c[_0x6b59d7(0x1a3)]][_0x6b59d7(0x21a)][_0x6b59d7(0x252)][_0x6b59d7(0x1ca)]:markets[_0x299f9c['symbol']]['limits'][_0x6b59d7(0x17a)][_0x6b59d7(0x1ca)],_0x5ca4d6=!_0x299f9c[_0x6b59d7(0x297)]?markets[_0x299f9c[_0x6b59d7(0x1a3)]][_0x6b59d7(0x21a)]['cost'][_0x6b59d7(0x1ca)]:markets[_0x299f9c['symbol']][_0x6b59d7(0x21a)][_0x6b59d7(0x252)][_0x6b59d7(0x1ca)],_0x47f464=truncateTradeAmount(_0x299f9c['symbol'],_0x299f9c[_0x6b59d7(0x21c)]);_0x299f9c[_0x6b59d7(0x21c)]=_0x47f464;if(Math[_0x6b59d7(0x21d)](_0x47f464)<_0x195ae4)_0x1aef83=![];if(Math[_0x6b59d7(0x21d)](_0x47f464)*_0x299f9c[_0x6b59d7(0x24c)]<_0x5ca4d6)_0x1aef83=![];if(_0x299f9c[_0x6b59d7(0x24a)]==_0x6b59d7(0x213)){let _0x3a423c=config[_0x6b59d7(0x1fd)][_0x6b59d7(0x2be)](_0x2dddd8=>_0x2dddd8[_0x6b59d7(0x17c)]==_0x299f9c[_0x6b59d7(0x17c)]);if(_0x3a423c[_0x6b59d7(0x305)]>0x0){if(Math[_0x6b59d7(0x21d)](_0x47f464)>_0x299f9c[_0x6b59d7(0x2fe)]-_0x3a423c[_0x6b59d7(0x305)])_0x1aef83=![];}else{if(Math[_0x6b59d7(0x21d)](_0x47f464)>_0x299f9c[_0x6b59d7(0x2fe)])_0x1aef83=![];}}if(_0x299f9c[_0x6b59d7(0x24a)]=='buy'){let _0x171498=config[_0x6b59d7(0x1fd)]['find'](_0x3e7b8d=>_0x3e7b8d[_0x6b59d7(0x17c)]==config[_0x6b59d7(0x2ac)]),_0x5ce1fe=currentCoins[_0x6b59d7(0x2be)](_0x62629b=>_0x62629b[_0x6b59d7(0x17c)]==config['basecoin']);if(_0x171498[_0x6b59d7(0x305)]>0x0){if(Math[_0x6b59d7(0x21d)](_0x47f464)*_0x299f9c[_0x6b59d7(0x24c)]>_0x5ce1fe[_0x6b59d7(0x2fe)]-_0x171498[_0x6b59d7(0x305)])_0x1aef83=![];}else{if(Math['abs'](_0x47f464)*_0x299f9c[_0x6b59d7(0x24c)]>_0x5ce1fe[_0x6b59d7(0x2fe)])_0x1aef83=![];}}return _0x1aef83;}async function getBalances(_0x2f1390=!![]){const _0x1c8dca=_0x477922;let _0x5edb13=0x0,_0x1014fd;const _0x782621=config[_0x1c8dca(0x2c6)];if(config[_0x1c8dca(0x229)]&&config[_0x1c8dca(0x1b9)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x19a841=>{const _0x38a440=_0x1c8dca;if(_0x19a841[_0x38a440(0x17c)]!=config[_0x38a440(0x2ac)]){let _0x34469d=global[_0x38a440(0x17f)][noslash(_0x19a841[_0x38a440(0x1a3)])];_0x1014fd=_0x19a841[_0x38a440(0x297)]?0x1/_0x34469d:_0x34469d;}else _0x1014fd=0x1;let _0x19faac=_0x19a841['number']*_0x1014fd;_0x5edb13+=_0x19faac,_0x19a841[_0x38a440(0x24c)]=formatResult(Number(_0x1014fd),0x8),_0x19a841[_0x38a440(0x194)]=_0x19faac;}),currentCoins['forEach'](_0x58995c=>{const _0x7ee71=_0x1c8dca;let _0x29c4af=config[_0x7ee71(0x1fd)]['find'](_0x382944=>_0x382944[_0x7ee71(0x17c)]==_0x58995c['coin']),_0xe9d6d6=Number(_0x29c4af[_0x7ee71(0x28f)]),_0x4ca47b=_0x58995c[_0x7ee71(0x194)]/_0x5edb13*0x64,_0x2f882f=_0xe9d6d6*_0x5edb13/0x64/_0x58995c['last']-_0x58995c[_0x7ee71(0x2fe)];_0x58995c[_0x7ee71(0x28f)]=formatResult(_0x4ca47b,0x3),_0x58995c[_0x7ee71(0x2b8)]=formatResult(_0xe9d6d6,0x3),_0x58995c[_0x7ee71(0x21c)]=formatResult(_0x2f882f,0x8),_0x58995c['side']='',_0x58995c[_0x7ee71(0x223)]=![];if(_0x58995c[_0x7ee71(0x17c)]!=config[_0x7ee71(0x2ac)]){if(_0x58995c[_0x7ee71(0x28f)]>_0xe9d6d6)_0x58995c[_0x7ee71(0x24a)]=_0x7ee71(0x213),_0x58995c['valid']=checkMinimums(_0x58995c);else _0x58995c[_0x7ee71(0x28f)]<_0xe9d6d6&&(_0x58995c[_0x7ee71(0x24a)]=_0x7ee71(0x2b4),_0x58995c[_0x7ee71(0x223)]=checkMinimums(_0x58995c));}_0x58995c[_0x7ee71(0x1ea)]=_0x58995c['distribution']/_0x58995c[_0x7ee71(0x2b8)]-0x1;if(_0x58995c[_0x7ee71(0x1f9)]==_0x7ee71(0x1e6)||_0x58995c['orderstatus']==_0x7ee71(0x20c))_0x58995c[_0x7ee71(0x1f9)]='none';}),currentCoins[_0x1c8dca(0x26e)]((_0xa12bc7,_0x3770a4)=>_0xa12bc7[_0x1c8dca(0x1ea)]<_0x3770a4['delta']?0x1:_0x3770a4['delta']<_0xa12bc7[_0x1c8dca(0x1ea)]?-0x1:0x0);const _0x41fb7d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x41fb7d['eur'],'usd':_0x41fb7d[_0x1c8dca(0x208)],'portfolio':JSON[_0x1c8dca(0x2ba)](currentCoins),'threshold':_0x782621},proxyEmit(_0x1c8dca(0x1bd),{'serverversion':serverversion,'balances':lastBalances});if(_0x2f1390){if(config[_0x1c8dca(0x229)])headlessMode({'portfolio':currentCoins,'threshold':_0x782621});else{if(lockOrders==ORDERS[_0x1c8dca(0x2a9)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x782621});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4872f7=getNormalizedPerformance();getStartingBalances(_0x4872f7),emitPerformance(_0x4872f7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x35c4ea=getNormalizedPerformance();emitPerformance(_0x35c4ea),getStartingBalances(_0x35c4ea),logger['debug'](_0x1c8dca(0x1aa));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x59d8c3=_0x477922;if(!lastBalances)return;let _0x3cfead=[],_0x56bc64,_0x39be8=JSON[_0x59d8c3(0x266)](lastBalances['portfolio']);_0x39be8[_0x59d8c3(0x26e)]((_0x512afb,_0x5c9754)=>_0x512afb['coin']>_0x5c9754['coin']?0x1:_0x5c9754[_0x59d8c3(0x17c)]>_0x512afb[_0x59d8c3(0x17c)]?-0x1:0x0),_0x39be8[_0x59d8c3(0x18b)](_0x4ae4e0=>{const _0x293d1d=_0x59d8c3;let _0x527e85={'coin':_0x4ae4e0['coin'],'number':_0x4ae4e0[_0x293d1d(0x2fe)],'price':_0x4ae4e0[_0x293d1d(0x24c)]};_0x3cfead[_0x293d1d(0x2a3)](_0x527e85);});const _0x1f1ac8=await getFiat();_0x56bc64={'date':lastBalances['time'][_0x59d8c3(0x2d4)]('\x20')[0x0],'eur':_0x1f1ac8[_0x59d8c3(0x1a8)],'usd':_0x1f1ac8[_0x59d8c3(0x208)],'coins':_0x3cfead};let _0x2bda62=dbPerformance[_0x59d8c3(0x1cc)](_0x59d8c3(0x2de))[_0x59d8c3(0x2be)]({'date':_0x56bc64[_0x59d8c3(0x272)]})[_0x59d8c3(0x194)]();_0x2bda62?_0x56bc64[_0x59d8c3(0x272)]!=config[_0x59d8c3(0x1c9)]&&dbPerformance['get'](_0x59d8c3(0x2de))[_0x59d8c3(0x2be)]({'date':_0x56bc64[_0x59d8c3(0x272)]})[_0x59d8c3(0x1b8)](_0x56bc64)['write']():dbPerformance[_0x59d8c3(0x1cc)](_0x59d8c3(0x2de))[_0x59d8c3(0x2a3)](_0x56bc64)[_0x59d8c3(0x2e0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3d4817=_0x477922;let _0x36103e=[];if(dbPerformance[_0x3d4817(0x216)]('data')[_0x3d4817(0x194)]()){let _0x1d6b5f=dbPerformance[_0x3d4817(0x1cc)](_0x3d4817(0x2de))['cloneDeep']()['filter'](_0xaa0d02=>{const _0x14c954=_0x3d4817;if(_0xaa0d02[_0x14c954(0x2e7)][_0x14c954(0x280)]==0x0)return![];else return!![];})['sortBy'](_0x3d4817(0x272))[_0x3d4817(0x194)](),_0x57d76b=[...config[_0x3d4817(0x275)]];_0x57d76b[_0x3d4817(0x26e)]((_0x431d1c,_0x4671b7)=>_0x431d1c[_0x3d4817(0x272)]>_0x4671b7[_0x3d4817(0x272)]?-0x1:_0x4671b7[_0x3d4817(0x272)]>_0x431d1c[_0x3d4817(0x272)]?0x1:0x0);let _0x400cb2=0x1,_0x476d35=[],_0x49c265=0x0;_0x1d6b5f[_0x3d4817(0x19b)]()[_0x3d4817(0x297)]()[_0x3d4817(0x18b)]((_0x344cf4,_0x2b9e16)=>{const _0x4bf39c=_0x3d4817;if(_0x57d76b[_0x49c265]){if(_0x1d6b5f[_0x1d6b5f[_0x4bf39c(0x280)]-_0x2b9e16]&&_0x57d76b[_0x49c265][_0x4bf39c(0x272)]==_0x1d6b5f[_0x1d6b5f[_0x4bf39c(0x280)]-_0x2b9e16][_0x4bf39c(0x272)]){if(_0x2b9e16<_0x1d6b5f[_0x4bf39c(0x280)]){let _0x3c9d28=0x0,_0x51cfe0=0x0;_0x1d6b5f[_0x1d6b5f[_0x4bf39c(0x280)]-_0x2b9e16]['coins'][_0x4bf39c(0x18b)](_0x22a532=>{const _0x38bf9b=_0x4bf39c;_0x51cfe0+=_0x22a532['number']*_0x22a532[_0x38bf9b(0x1b2)];}),_0x57d76b[_0x49c265][_0x4bf39c(0x2a4)]['forEach'](_0x443f6b=>{const _0x283cc9=_0x4bf39c;_0x3c9d28+=_0x443f6b[_0x283cc9(0x2fe)]*_0x443f6b[_0x283cc9(0x1b2)];}),_0x400cb2*=_0x3c9d28/(_0x51cfe0-_0x3c9d28)+0x1;}_0x49c265++;}}let _0xf8aa4e=0x0;_0x344cf4[_0x4bf39c(0x2e7)][_0x4bf39c(0x18b)](_0xdcf6a9=>{const _0xc45e1=_0x4bf39c;_0xf8aa4e+=_0xdcf6a9[_0xc45e1(0x2fe)]*_0xdcf6a9[_0xc45e1(0x1b2)];}),_0x476d35[_0x1d6b5f[_0x4bf39c(0x280)]-_0x2b9e16-0x1]=_0xf8aa4e*(_0x400cb2-0x1);});let _0x120214=[];_0x57d76b=[...config[_0x3d4817(0x275)]]||[];let _0x25da71=0x0;_0x49c265=0x0,_0x1d6b5f[_0x3d4817(0x18b)]((_0xd38260,_0x904cd0)=>{const _0x1e908f=_0x3d4817;if(_0x57d76b[_0x49c265]){const _0x4e0738=fns[_0x1e908f(0x266)](_0x57d76b[_0x49c265][_0x1e908f(0x272)],'yyyy/MM/dd',new Date()),_0x177b27=fns[_0x1e908f(0x266)](_0xd38260[_0x1e908f(0x272)],_0x1e908f(0x283),new Date());if(fns[_0x1e908f(0x1d3)](_0x4e0738,_0x177b27)){let _0x41144a=0x0;_0x57d76b[_0x49c265][_0x1e908f(0x2a4)][_0x1e908f(0x18b)](_0x1bb4e1=>{const _0x49e570=_0x1e908f;!_0x120214[_0x1bb4e1[_0x49e570(0x17c)]]?_0x120214[_0x1bb4e1[_0x49e570(0x17c)]]=_0x1bb4e1[_0x49e570(0x2fe)]:(_0x41144a=_0x120214[_0x1bb4e1[_0x49e570(0x17c)]],_0x120214[_0x1bb4e1[_0x49e570(0x17c)]]+=_0x1bb4e1['number']);const _0x3c1591=_0xd38260[_0x49e570(0x2e7)][_0x49e570(0x2be)](_0x360169=>_0x360169[_0x49e570(0x17c)]==_0x1bb4e1[_0x49e570(0x17c)]);(!_0x3c1591||_0x3c1591[_0x49e570(0x2fe)]==0x0)&&(_0x25da71+=(-_0x1bb4e1[_0x49e570(0x2fe)]-_0x41144a)*_0x1bb4e1[_0x49e570(0x1b2)]);}),_0x49c265++;}}_0xd38260['coins'][_0x1e908f(0x18b)]((_0x50d384,_0x289499)=>{const _0x192d2f=_0x1e908f;_0x120214[_0x50d384[_0x192d2f(0x17c)]]&&(_0x50d384[_0x192d2f(0x30b)]=_0x120214[_0x50d384[_0x192d2f(0x17c)]]);}),_0x36103e['push']({'date':_0xd38260[_0x1e908f(0x272)],'eur':_0xd38260[_0x1e908f(0x1a8)],'usd':_0xd38260['usd'],'offset':_0x476d35[_0x904cd0],'netoffset':_0x25da71,'coins':_0xd38260[_0x1e908f(0x2e7)]});});}return _0x36103e;}function emitPerformance(_0x51ff96){const _0x2160a9=_0x477922;_0x51ff96[_0x2160a9(0x280)]!==0x0?(proxyEmit(_0x2160a9(0x200),_0x51ff96),lastPerformanceEmitted=getDate()):proxyEmit(_0x2160a9(0x200),[]);}function getPerf(_0x5bcc59,_0x159ae4){const _0x33f968=_0x477922;let _0x2620b8=0x0,_0x2e3b04=0x0,_0x4a1ec6=0x0;_0x5bcc59['coins'][_0x33f968(0x18b)](_0x443e8c=>{const _0x54f5e3=_0x33f968;_0x2620b8+=_0x443e8c[_0x54f5e3(0x2fe)]*_0x443e8c['price'];});_0x159ae4&&(_0x2620b8+=_0x5bcc59[_0x33f968(0x305)]);if(config[_0x33f968(0x2ac)]===_0x33f968(0x2d9)||config[_0x33f968(0x2ac)]===_0x33f968(0x232))_0x2e3b04=_0x2620b8*_0x5bcc59[_0x33f968(0x1a8)],_0x4a1ec6=_0x2620b8*_0x5bcc59[_0x33f968(0x208)];else{if(usdBasecoins[_0x33f968(0x25b)](config['basecoin']))_0x2e3b04=_0x2620b8*_0x5bcc59['eur']/_0x5bcc59['usd'],_0x4a1ec6=_0x2620b8;else config[_0x33f968(0x2ac)]===_0x33f968(0x304)&&(_0x2e3b04=_0x2620b8,_0x4a1ec6=_0x2620b8*_0x5bcc59[_0x33f968(0x208)]/_0x5bcc59[_0x33f968(0x1a8)]);}return[_0x2620b8,_0x2e3b04,_0x4a1ec6];}function getKPIs(_0x2b0fe2,_0x3a93e4=_0x477922(0x304)){const _0x544112=_0x477922,_0x25a2ac=config[_0x544112(0x2ac)],_0x5c9f76=lastBalances,_0x2e7189=currentCoins,_0x249068=getNormalizedPerformance(),_0x19a7f9=_0x2b0fe2==='basecoin'?_0x25a2ac:_0x2b0fe2==='fiat'||_0x2b0fe2==='net-fiat'?_0x3a93e4:'Net\x20'+_0x25a2ac,_0x55feff=_0x2b0fe2==='net-basecoin'?'Net\x20effect':_0x2b0fe2===_0x544112(0x2d6)?_0x544112(0x1e7):_0x19a7f9+_0x544112(0x1de),_0x1caba1=_0x2b0fe2==='net-basecoin'||_0x2b0fe2===_0x544112(0x2d6)?'Net\x20effect':_0x19a7f9+_0x544112(0x2ef);let _0x2f1c29=0x0;_0x2e7189['forEach'](_0x3ca359=>{const _0x158ba3=_0x544112;_0x2f1c29+=_0x3ca359[_0x158ba3(0x2fe)]*_0x3ca359[_0x158ba3(0x24c)];});if(_0x2b0fe2==='fiat'||_0x2b0fe2===_0x544112(0x2d6)){if(_0x25a2ac==='BTC'||_0x25a2ac==='ETH')_0x2f1c29=_0x2f1c29*(_0x3a93e4==='EUR'?_0x5c9f76[_0x544112(0x1a8)]:_0x5c9f76[_0x544112(0x208)]);else{if(usdBasecoins[_0x544112(0x25b)](_0x25a2ac))_0x2f1c29=_0x2f1c29*(_0x3a93e4===_0x544112(0x304)?_0x5c9f76[_0x544112(0x1a8)]/_0x5c9f76[_0x544112(0x208)]:0x1);else _0x25a2ac===_0x544112(0x304)&&(_0x2f1c29=_0x2f1c29*(_0x3a93e4===_0x544112(0x304)?0x1:_0x5c9f76[_0x544112(0x208)]/_0x5c9f76[_0x544112(0x1a8)]));}}let _0x571f1d;if(_0x2f1c29!==0x0){if(_0x2b0fe2===_0x544112(0x2ac))_0x571f1d=(_0x2f1c29/startingBalances['basecoin']-0x1)*0x64;else{if(_0x3a93e4===_0x544112(0x304))_0x571f1d=(_0x2f1c29/startingBalances[_0x544112(0x1a8)]-0x1)*0x64;else _0x571f1d=(_0x2f1c29/startingBalances['usd']-0x1)*0x64;}let _0x5d5aa4=0x0;if(startingBalances[_0x544112(0x2e7)])_0x2e7189['forEach'](_0x69069f=>{const _0x331852=_0x544112;let _0x27dc98=startingBalances[_0x331852(0x2e7)]['find'](_0x728068=>_0x728068[_0x331852(0x17c)]===_0x69069f[_0x331852(0x17c)]);if(_0x27dc98&&_0x27dc98['coin']&&_0x69069f[_0x331852(0x2fe)]!==0x0)_0x5d5aa4+=_0x27dc98[_0x331852(0x2fe)]*_0x69069f[_0x331852(0x24c)];});let _0x5c08b6=0x0;if(_0x249068[_0x544112(0x280)]!==0x0){let _0x49daa3=_0x249068[_0x249068[_0x544112(0x280)]-0x1];_0x5c08b6=_0x49daa3['netoffset'];}_0x5d5aa4-=_0x5c08b6;_0x2b0fe2===_0x544112(0x2b2)&&(_0x571f1d=(_0x2f1c29-_0x5d5aa4)/startingBalances[_0x544112(0x2ac)]*0x64,_0x2f1c29=_0x2f1c29-_0x5d5aa4);if(_0x2b0fe2===_0x544112(0x2d6)){let _0x19882e=_0x3a93e4===_0x544112(0x304)?startingBalances[_0x544112(0x1a8)]:startingBalances[_0x544112(0x208)];if(_0x25a2ac===_0x544112(0x2d9)||_0x25a2ac===_0x544112(0x232))_0x5d5aa4=_0x3a93e4===_0x544112(0x304)?_0x5d5aa4*_0x5c9f76['eur']:_0x5d5aa4*_0x5c9f76[_0x544112(0x208)];else{if(usdBasecoins[_0x544112(0x25b)](_0x25a2ac))_0x5d5aa4=_0x3a93e4===_0x544112(0x304)?_0x5d5aa4*_0x5c9f76[_0x544112(0x1a8)]/_0x5c9f76['usd']:_0x5d5aa4;else _0x25a2ac===_0x544112(0x304)&&(_0x5d5aa4=_0x3a93e4===_0x544112(0x304)?_0x5d5aa4:_0x5d5aa4*_0x5c9f76[_0x544112(0x208)]/_0x5c9f76[_0x544112(0x1a8)]);}_0x571f1d=(_0x2f1c29-_0x5d5aa4)/_0x19882e*0x64,_0x2f1c29=_0x2f1c29-_0x5d5aa4;}if(_0x571f1d){if(_0x571f1d<0x64)_0x571f1d=_0x571f1d['toFixed'](0x2);else{if(_0x571f1d<0x3e8)_0x571f1d=_0x571f1d['toFixed'](0x1);else _0x571f1d=_0x571f1d[_0x544112(0x22d)](0x0);}}else _0x571f1d=Number('0')[_0x544112(0x22d)](0x2);if(_0x2f1c29){if(Math[_0x544112(0x21d)](_0x2f1c29)<0.000001)_0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x2);else{if(Math[_0x544112(0x21d)](_0x2f1c29)<0.1)_0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x6);else{if(Math[_0x544112(0x21d)](_0x2f1c29)<0x1)_0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x5);else{if(Math['abs'](_0x2f1c29)<0xa)_0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x4);else{if(Math[_0x544112(0x21d)](_0x2f1c29)<0x64)_0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x3);else{if(Math[_0x544112(0x21d)](_0x2f1c29)<0x3e8)_0x2f1c29=_0x2f1c29['toFixed'](0x2);else _0x2f1c29=_0x2f1c29[_0x544112(0x22d)](0x2);}}}}}}else _0x2f1c29=Number('0')['toFixed'](0x2);}else _0x571f1d=Number('0')[_0x544112(0x22d)](0x2);return{'value':_0x2f1c29,'change':_0x571f1d,'leftTxt':_0x55feff,'rightTxt':_0x1caba1};}async function getStartingBalances(_0x21c3dd,_0x41962e=!![]){const _0x38b0a1=_0x477922;if(_0x21c3dd['length']!==0x0){const [_0x39e564,_0x433aae,_0x208963]=getPerf(_0x21c3dd[0x0],!![]);let _0x394932=[];config[_0x38b0a1(0x1fd)][_0x38b0a1(0x18b)](_0x554ce0=>{const _0x33d0cc=_0x38b0a1;let _0x31d7e5=0x0,_0x2854fe;config[_0x33d0cc(0x275)][_0x33d0cc(0x18b)](_0x59d53d=>{const _0x4e3169=_0x33d0cc;let _0x446e9b=_0x59d53d['changes'][_0x4e3169(0x2be)](_0x12cdfe=>_0x12cdfe['coin']==_0x554ce0[_0x4e3169(0x17c)]);if(_0x446e9b){_0x31d7e5+=_0x446e9b[_0x4e3169(0x2fe)];if(!_0x2854fe)_0x2854fe=_0x446e9b[_0x4e3169(0x1b2)];}}),_0x394932[_0x33d0cc(0x2a3)]({'coin':_0x554ce0['coin'],'number':_0x31d7e5,'initialprice':_0x2854fe});});const _0x1eae54={'basecoin':_0x39e564,'eur':_0x433aae,'usd':_0x208963,'coins':_0x394932};if(_0x41962e)proxyEmit(_0x38b0a1(0x24e),_0x1eae54);startingBalances=_0x1eae54;}}function headlessMode(_0x481bfd){const _0x3f9664=_0x477922;let _0x25182e=_0x481bfd[_0x3f9664(0x1fd)],_0x3a971f=_0x481bfd['threshold'],_0x6f46b=[];for(let _0x2b35c6 of _0x25182e){if(_0x2b35c6[_0x3f9664(0x17c)]!=config[_0x3f9664(0x2ac)]){if(_0x2b35c6[_0x3f9664(0x1ea)]>=_0x3a971f/0x64){if(_0x2b35c6[_0x3f9664(0x223)])_0x6f46b['push'](_0x2b35c6);}else{if(_0x2b35c6[_0x3f9664(0x1ea)]<=-_0x3a971f/0x64){if(_0x2b35c6[_0x3f9664(0x223)])_0x6f46b[_0x3f9664(0x2a3)](_0x2b35c6);}}}}_0x6f46b[_0x3f9664(0x280)]>0x0&&placeOrder(_0x6f46b);}function notifyBalance(_0x3b5f1){const _0x5b8cab=_0x477922;let _0x2fa9bc=_0x3b5f1[_0x5b8cab(0x1fd)],_0x580bb0=_0x3b5f1[_0x5b8cab(0x2c6)],_0x50517a=[];for(let _0x521c95 of _0x2fa9bc){if(_0x521c95['coin']!=config[_0x5b8cab(0x2ac)]){if(_0x521c95[_0x5b8cab(0x1ea)]>=_0x580bb0/0x64){if(_0x521c95[_0x5b8cab(0x223)])_0x50517a[_0x5b8cab(0x2a3)](_0x521c95);}else{if(_0x521c95[_0x5b8cab(0x1ea)]<=-_0x580bb0/0x64){if(_0x521c95['valid'])_0x50517a[_0x5b8cab(0x2a3)](_0x521c95);}}}}if(_0x50517a[_0x5b8cab(0x280)]>0x0){let _0xbe55aa=_0x50517a[_0x5b8cab(0x2e2)](_0x3fb556=>_0x3fb556['coin']);_0xbe55aa[_0x5b8cab(0x26e)]();let _0x3d66b4=_0xbe55aa[_0x5b8cab(0x1c0)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5b8cab(0x1f2));lastCoinsToBalance=_0x3d66b4;}}function symbolToCoin(_0x2bcadd){const _0x25ae74=_0x477922;let _0x388868;if(_0x2bcadd[_0x25ae74(0x25b)]('/'+config[_0x25ae74(0x2ac)]))_0x388868=_0x2bcadd['replace']('/'+config[_0x25ae74(0x2ac)],'');if(_0x2bcadd['includes'](config[_0x25ae74(0x2ac)]+'/'))_0x388868=_0x2bcadd[_0x25ae74(0x29e)](config[_0x25ae74(0x2ac)]+'/','');return _0x388868;}async function unlockOrders(){const _0x394228=_0x477922;if(allOrdersPlaced&&lockOrders==ORDERS[_0x394228(0x274)]){logger[_0x394228(0x19c)](_0x394228(0x209)),lockOrders=ORDERS[_0x394228(0x288)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x30e044=await getCoins();[currentCoins,currentCoinsAll]=_0x30e044,validateOrdersState=_0x394228(0x30b),persistOpenOrders([]),lockOrders=ORDERS[_0x394228(0x2a9)],logger['debug'](_0x394228(0x2a8));}}async function validateOrders(_0x152f50){const _0x35c709=_0x477922;if(_0x152f50)validateOrdersState=_0x152f50;logger[_0x35c709(0x19c)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x35c709(0x17d)+(lockOrders==0x1?_0x35c709(0x207):lockOrders==0x2?_0x35c709(0x28e):_0x35c709(0x1be)));let _0xe22059=[],_0x58a867=config['ordertype']==_0x35c709(0x24d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x35c709(0x274)])return;logger[_0x35c709(0x19c)](_0x35c709(0x1ae)+validateOrdersState),lastOrders[_0x35c709(0x18b)](_0x2185d0=>{const _0x1ecd66=_0x35c709;let _0x149e0a=![];_0x2185d0['filled']>0x0&&(_0x149e0a=!![]),_0xe22059[_0x1ecd66(0x2a3)](_0x149e0a),_0x149e0a&&config[_0x1ecd66(0x303)]!='market'&&logHistory(_0x1ecd66(0x183),'Order\x20filled:\x20'+_0x2185d0[_0x1ecd66(0x1a3)]+'\x20'+_0x2185d0[_0x1ecd66(0x24a)]+'\x20#'+formatResult(_0x2185d0[_0x1ecd66(0x1e6)],0x8)+'\x20@'+formatResult(_0x2185d0[_0x1ecd66(0x1b2)],0x8));}),_0xe22059[_0x35c709(0x18b)]((_0x202298,_0x3ea51a)=>{const _0x78367e=_0x35c709;if(_0x202298)lastOrders[_0x78367e(0x30a)](_0x3ea51a,0x1);}),persistOpenOrders(lastOrders);const _0x389a30=coolingDown?_0x35c709(0x2ab):_0x35c709(0x1a1);if(validateOrdersState==_0x35c709(0x30b)){validateOrdersState=_0x35c709(0x1eb);if(_0xe22059['includes'](![])){if(config[_0x35c709(0x303)]==_0x35c709(0x24d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x35c709(0x1eb)){if(_0xe22059[_0x35c709(0x25b)](![])){}else{if(allOrdersPlaced){if(config[_0x35c709(0x303)]==_0x35c709(0x24d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x35c709(0x1fc))_0xe22059['includes'](![])&&(config[_0x35c709(0x303)]=='market'?logHistory(_0x35c709(0x246),_0x35c709(0x1e3)+Math[_0x35c709(0x256)](_0x58a867*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x389a30):(await cancelOrders(),logHistory(_0x35c709(0x246),_0x35c709(0x2b9)+Math[_0x35c709(0x256)](_0x58a867*validateOrderInterval/0xea60)+_0x35c709(0x214)+_0x389a30))),await unlockOrders();else{if(validateOrdersState==_0x35c709(0x269)){if(config[_0x35c709(0x303)]!=_0x35c709(0x24d))logHistory('success',_0x35c709(0x253)+_0x389a30);await unlockOrders();}}}}}async function cancelOrders(){const _0x4b17d2=_0x477922;lastOrders[_0x4b17d2(0x18b)](async _0x3fe3e1=>{const _0x580b9a=_0x4b17d2;try{const _0x4443bd=await exchange[_0x580b9a(0x1f4)](_0x3fe3e1[_0x580b9a(0x190)],_0x3fe3e1[_0x580b9a(0x1a3)]);}catch(_0x3d33e2){if(_0x3d33e2[_0x580b9a(0x1cd)]()[_0x580b9a(0x25b)](_0x580b9a(0x28d))){}else await handleError(_0x3d33e2,_0x580b9a(0x1ce));}});}async function initCoinResults(_0x25a5a8){const _0x130313=_0x477922;_0x25a5a8?logger[_0x130313(0x19c)](_0x130313(0x23f)+_0x25a5a8):logger[_0x130313(0x19c)](_0x130313(0x1bc)),config['portfolio']['forEach'](_0x332ea3=>{const _0x307b1e=_0x130313;if(!_0x332ea3[_0x307b1e(0x2a2)]&&_0x332ea3['coin']!=config[_0x307b1e(0x2ac)]){const _0x4bb456=currentCoins[_0x307b1e(0x2be)](_0x247f21=>_0x247f21[_0x307b1e(0x17c)]==_0x332ea3['coin']),_0x34570d=global[_0x307b1e(0x17f)][noslash(_0x332ea3[_0x307b1e(0x1a3)])];let _0xa5758c=_0x4bb456?_0x4bb456[_0x307b1e(0x2fe)]:null,_0x288d87=_0x332ea3[_0x307b1e(0x297)]?0x1/_0x34570d:_0x34570d,_0x1d8965;config[_0x307b1e(0x275)][_0x307b1e(0x18b)](_0x10aba2=>{const _0x249910=_0x307b1e;!_0x1d8965&&(_0x1d8965=_0x10aba2['changes'][_0x249910(0x2be)](_0x295b53=>_0x295b53[_0x249910(0x17c)]==_0x332ea3[_0x249910(0x17c)]),_0x1d8965&&(_0xa5758c=_0x1d8965['number'],_0x288d87=_0x1d8965[_0x249910(0x1b2)]));});let _0x3adb19=dbCoinResults[_0x307b1e(0x1cc)](_0x307b1e(0x2e7))[_0x307b1e(0x2be)]({'coin':_0x332ea3[_0x307b1e(0x17c)]})[_0x307b1e(0x194)]();if(!_0x3adb19){const _0x41ce67={'coin':_0x332ea3['coin'],'number':_0xa5758c,'breakeven':_0x288d87,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x307b1e(0x1cc)](_0x307b1e(0x2e7))[_0x307b1e(0x2a3)](_0x41ce67)[_0x307b1e(0x2e0)]();}else{if(_0x25a5a8&&_0x332ea3[_0x307b1e(0x17c)]==_0x25a5a8){const _0x3b5aa1={'coin':_0x332ea3[_0x307b1e(0x17c)],'number':_0xa5758c,'breakeven':_0x288d87,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x307b1e(0x2be)]({'coin':_0x332ea3[_0x307b1e(0x17c)]})[_0x307b1e(0x1b8)](_0x3b5aa1)[_0x307b1e(0x2e0)]();}}}});}async function updateCoinResults(_0x304211,_0x34c842=![]){const _0x42f23c=_0x477922;let _0x97f9ef,_0x4fdd49,_0x39fa1a,_0x5b6520,_0xf555bd,_0x50153d,_0x48990d=dbCoinResults[_0x42f23c(0x1cc)](_0x42f23c(0x2e7))[_0x42f23c(0x2be)]({'coin':_0x304211['coin']})[_0x42f23c(0x194)](),_0x5dd298=![];_0x48990d&&Object['entries'](_0x48990d)[_0x42f23c(0x18b)](([_0x1cbd08,_0x5f51f4])=>{if(_0x5f51f4==null)_0x5dd298=!![];});(!_0x48990d||_0x5dd298)&&(await initCoinResults(_0x304211[_0x42f23c(0x17c)]),_0x48990d=dbCoinResults[_0x42f23c(0x1cc)]('coins')[_0x42f23c(0x2be)]({'coin':_0x304211['coin']})[_0x42f23c(0x194)]());_0x304211['reverse']&&(_0x50153d={'filled':_0x304211[_0x42f23c(0x1e6)]*_0x304211[_0x42f23c(0x1b2)],'amount':_0x304211[_0x42f23c(0x1e6)]*_0x304211[_0x42f23c(0x1b2)],'side':_0x304211[_0x42f23c(0x24a)]==_0x42f23c(0x213)?_0x42f23c(0x2b4):_0x42f23c(0x213),'price':0x1/_0x304211[_0x42f23c(0x1b2)]},_0x304211={..._0x304211,..._0x50153d});_0x34c842?_0x4fdd49=_0x304211[_0x42f23c(0x24a)]==_0x42f23c(0x2b4)?_0x48990d[_0x42f23c(0x2fe)]+_0x304211['filled']:_0x48990d[_0x42f23c(0x2fe)]-_0x304211[_0x42f23c(0x1e6)]:_0x4fdd49=await getCoinNumber(_0x304211[_0x42f23c(0x17c)]);if(_0x304211[_0x42f23c(0x1b4)]&&_0x304211[_0x42f23c(0x1b4)][_0x42f23c(0x2e6)]==config[_0x42f23c(0x2ac)])_0x97f9ef=_0x304211['fee']['cost'];else{if(_0x304211[_0x42f23c(0x1b4)]&&_0x304211['fee'][_0x42f23c(0x2e6)]==_0x42f23c(0x2ad)&&!_0x34c842)_0x97f9ef=_0x304211[_0x42f23c(0x1b4)][_0x42f23c(0x17a)]*global[_0x42f23c(0x17f)]['BNB'+config[_0x42f23c(0x2ac)]];else _0x97f9ef=defaultFee*_0x304211[_0x42f23c(0x1e6)]*_0x304211['price'];}_0x304211[_0x42f23c(0x24a)]=='buy'?(_0x39fa1a=_0x4fdd49!=0x0?(_0x48990d['breakeven']*_0x48990d[_0x42f23c(0x2fe)]+_0x304211[_0x42f23c(0x1b2)]*(_0x4fdd49-_0x48990d[_0x42f23c(0x2fe)])+_0x97f9ef)/_0x4fdd49:0x0,_0x5b6520=_0x48990d['realized']):(_0x39fa1a=_0x4fdd49!=0x0?(_0x48990d[_0x42f23c(0x1fb)]*_0x48990d[_0x42f23c(0x2fe)]-_0x304211[_0x42f23c(0x1b2)]*(_0x48990d['number']-_0x4fdd49)+_0x97f9ef)/_0x4fdd49:0x0,_0x5b6520=_0x48990d[_0x42f23c(0x277)]+(_0x304211['price']-_0x48990d[_0x42f23c(0x1fb)])*_0x304211[_0x42f23c(0x1e6)]);_0xf555bd=(_0x304211[_0x42f23c(0x1b2)]-_0x39fa1a-_0x97f9ef/_0x304211['filled'])*_0x4fdd49;let _0x1a2291={'coin':_0x304211['coin'],'number':_0x4fdd49,'breakeven':formatResult(_0x39fa1a,0x8),'realized':formatResult(_0x5b6520,0x8),'unrealized':formatResult(_0xf555bd,0x8),'fees':formatResult(_0x48990d[_0x42f23c(0x1a0)]+_0x97f9ef,0x8),'sells':_0x304211['side']=='sell'?_0x48990d[_0x42f23c(0x18d)]+0x1:_0x48990d[_0x42f23c(0x18d)],'buys':_0x304211[_0x42f23c(0x24a)]==_0x42f23c(0x2b4)?_0x48990d[_0x42f23c(0x2cc)]+0x1:_0x48990d[_0x42f23c(0x2cc)]};dbCoinResults[_0x42f23c(0x1cc)]('coins')['find']({'coin':_0x304211[_0x42f23c(0x17c)]})[_0x42f23c(0x1b8)](_0x1a2291)[_0x42f23c(0x2e0)]();if(!_0x34c842){if(_0x304211['fee']&&_0x304211['fee'][_0x42f23c(0x2e6)]==_0x42f23c(0x2ad)){const _0x93208c=currentCoins[_0x42f23c(0x2be)](_0x3b563c=>_0x3b563c[_0x42f23c(0x17c)]==_0x42f23c(0x2ad));if(_0x93208c){let _0x340000=dbCoinResults[_0x42f23c(0x1cc)](_0x42f23c(0x2e7))[_0x42f23c(0x2be)]({'coin':_0x42f23c(0x2ad)})[_0x42f23c(0x194)]();_0x1a2291={..._0x340000,'number':_0x93208c[_0x42f23c(0x2fe)]},dbCoinResults[_0x42f23c(0x1cc)](_0x42f23c(0x2e7))[_0x42f23c(0x2be)]({'coin':_0x42f23c(0x2ad)})[_0x42f23c(0x1b8)](_0x1a2291)['write']();}}}}async function placeOrder(_0x3290b2){const _0x416c5f=_0x477922,_0x3dd5ab=config[_0x416c5f(0x303)]=='market'?_0x416c5f(0x24d):_0x416c5f(0x24b);if(lockOrders==ORDERS[_0x416c5f(0x2a9)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x448090=![];lastOrders=[];for(const _0x4d21db of _0x3290b2){let _0xac9c17,_0x14624f,_0x2d694c,_0x180b2f,_0x457aa4,_0x238354=_0x4d21db[_0x416c5f(0x1a3)];try{const _0xfe4154=await exchange[_0x416c5f(0x225)](_0x238354);_0xac9c17=_0x4d21db[_0x416c5f(0x297)]?0x1/_0x4d21db[_0x416c5f(0x24c)]:_0x4d21db[_0x416c5f(0x24c)],_0x14624f=_0xfe4154['bid'],_0x2d694c=_0xfe4154[_0x416c5f(0x270)];_0x4d21db[_0x416c5f(0x297)]?(_0x180b2f=_0x4d21db[_0x416c5f(0x24a)]==_0x416c5f(0x2b4)?_0x416c5f(0x213):_0x416c5f(0x2b4),_0x457aa4=Math[_0x416c5f(0x21d)](_0x4d21db[_0x416c5f(0x21c)])/_0xac9c17):(_0x180b2f=_0x4d21db[_0x416c5f(0x24a)],_0x457aa4=Math[_0x416c5f(0x21d)](_0x4d21db[_0x416c5f(0x21c)]));_0x3dd5ab==_0x416c5f(0x24b)&&(config[_0x416c5f(0x303)]==_0x416c5f(0x25a)&&(_0xac9c17=_0x180b2f==_0x416c5f(0x2b4)?_0x14624f:_0x2d694c),config[_0x416c5f(0x303)]==_0x416c5f(0x307)&&(_0xac9c17=_0x180b2f=='buy'?_0x2d694c:_0x14624f));_0x457aa4=formatResult(_0x457aa4,0x8),_0xac9c17=formatResult(_0xac9c17,0x8);const _0x3c4a27=_0x180b2f==_0x416c5f(0x213)?config[_0x416c5f(0x1f6)]?String[_0x416c5f(0x2cf)]('0x'+config[_0x416c5f(0x1f6)])+'\x20':'':config[_0x416c5f(0x231)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x42f924=_0x3dd5ab=='market'?_0x416c5f(0x23e):config[_0x416c5f(0x303)]==_0x416c5f(0x25a)?'Limit\x20(high-margin)':_0x416c5f(0x1ed),_0x1cf99f=(Math['floor'](Math[_0x416c5f(0x27a)]()*0x35a4e900)+0x5f5e100)[_0x416c5f(0x1cd)]();lastOrders[_0x416c5f(0x2a3)]({'customId':_0x1cf99f,'symbol':_0x238354,'coin':_0x4d21db[_0x416c5f(0x17c)],'amount':_0x457aa4,'price':_0xac9c17,'side':_0x180b2f,'reverse':_0x4d21db[_0x416c5f(0x297)],'filled':0x0});if(_0x3dd5ab==_0x416c5f(0x24d))logHistory('order',''+_0x3c4a27+_0x42f924+'\x20order:\x20'+_0x238354+'\x20'+_0x180b2f+'\x20#'+formatResult(_0x457aa4,0x8)+'\x20@'+formatResult(_0xac9c17,0x8));else logHistory(_0x416c5f(0x183),''+_0x3c4a27+_0x42f924+_0x416c5f(0x260)+_0x238354+'\x20'+_0x180b2f+'\x20#'+formatResult(_0x457aa4,0x8)+'\x20@'+formatResult(_0xac9c17,0x8));let _0x5659f3;_0x3dd5ab==_0x416c5f(0x24d)?_0x180b2f==_0x416c5f(0x2b4)&&[_0x416c5f(0x30c),_0x416c5f(0x276),_0x416c5f(0x191),_0x416c5f(0x2b1),_0x416c5f(0x19d)][_0x416c5f(0x25b)](config[_0x416c5f(0x171)])?_0x5659f3=await exchange['createOrder'](_0x238354,_0x3dd5ab,_0x180b2f,_0x457aa4,_0xac9c17):_0x5659f3=await exchange['createOrder'](_0x238354,_0x3dd5ab,_0x180b2f,_0x457aa4,undefined):_0x5659f3=await exchange[_0x416c5f(0x1f8)](_0x238354,_0x3dd5ab,_0x180b2f,_0x457aa4,_0xac9c17);logger['debug'](_0x416c5f(0x219)+_0x5659f3['id']+_0x416c5f(0x287)+_0x1cf99f);const _0x498da9=lastOrders['length']-0x1;if(_0x498da9>=0x0&&lastOrders[_0x498da9]['customId']==_0x1cf99f){lastOrders[_0x498da9][_0x416c5f(0x190)]=_0x5659f3['id'];if(_0x5659f3[_0x416c5f(0x252)])lastOrders[_0x498da9][_0x416c5f(0x252)]=_0x5659f3[_0x416c5f(0x252)];if(_0x5659f3[_0x416c5f(0x1b2)])lastOrders[_0x498da9]['price']=_0x5659f3[_0x416c5f(0x1b2)];lastOrders[_0x498da9][_0x416c5f(0x1b4)]=_0x5659f3['fee'];}if(config[_0x416c5f(0x257)]!=0x0){let _0x59158b=null;if(cooldownTracker[_0x416c5f(0x280)]==config[_0x416c5f(0x257)]-0x1)_0x59158b=cooldownTracker[_0x416c5f(0x2f2)]();const _0x51f0bf=getTimeStamp();cooldownTracker[_0x416c5f(0x2a3)](_0x51f0bf);if(_0x59158b){const _0x29c31e=fns[_0x416c5f(0x1fa)](new Date(_0x51f0bf),new Date(_0x59158b));if(_0x29c31e<cooldownInterval){logHistory('error','Executed\x20'+config[_0x416c5f(0x257)]+_0x416c5f(0x2e1)+cooldownInterval/0x3c+_0x416c5f(0x2db)+cooldownPeriod/(0xe10*0x3e8)+_0x416c5f(0x2e3)),coolingDown=!![];break;}}}}catch(_0x5cc861){if(_0x5cc861[_0x416c5f(0x1cd)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x15124e=>_0x15124e['symbol']!=_0x238354),logHistory(_0x416c5f(0x293),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x238354),_0x448090=!![];else{if(_0x5cc861[_0x416c5f(0x1cd)]()[_0x416c5f(0x25b)](_0x416c5f(0x2f5)))lastOrders=lastOrders['filter'](_0x46ea96=>_0x46ea96['symbol']!=_0x238354),logHistory('error',_0x416c5f(0x199)+_0x238354),_0x448090=!![];else{if(_0x5cc861[_0x416c5f(0x1cd)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x416c5f(0x2a1)](_0x536e61=>_0x536e61[_0x416c5f(0x1a3)]!=_0x238354),logHistory(_0x416c5f(0x293),_0x416c5f(0x2ee)+_0x238354),logger[_0x416c5f(0x19c)](_0x5cc861),_0x448090=!![];else _0x5cc861[_0x416c5f(0x1cd)]()[_0x416c5f(0x25b)](_0x416c5f(0x2c7))?(lastOrders=lastOrders['filter'](_0x475948=>_0x475948[_0x416c5f(0x1a3)]!=_0x238354),logHistory(_0x416c5f(0x293),_0x416c5f(0x1ee)+_0x238354),_0x448090=!![]):(lastOrders=lastOrders[_0x416c5f(0x2a1)](_0x2ac6f6=>_0x2ac6f6[_0x416c5f(0x1a3)]!=_0x238354),await handleError(_0x5cc861,_0x416c5f(0x1ff),_0x238354));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x416c5f(0x280)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5b432e=config['ordertype']==_0x416c5f(0x24d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xc52c12=_0x416c5f;validateOrders(_0xc52c12(0x1fc));},_0x5b432e);}else unlockOrders();_0x448090&&config[_0x416c5f(0x229)]&&await pauseBot(_0x416c5f(0x26b)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x416c5f(0x246),_0x416c5f(0x255)));}else{if(coolingDown)!config[_0x416c5f(0x229)]&&logHistory('error',_0x416c5f(0x233));else lockOrders!=ORDERS[_0x416c5f(0x2a9)]&&(!config[_0x416c5f(0x229)]&&(config[_0x416c5f(0x303)]==_0x416c5f(0x24d)?logHistory(_0x416c5f(0x293),_0x416c5f(0x26f)):logHistory(_0x416c5f(0x293),_0x416c5f(0x1f1))));}}function persistOpenOrders(_0x1a1f65){const _0x233a60=_0x477922,_0x35d4c3={...config,'openOrders':_0x1a1f65};let _0x4511cc=dbConfig[_0x233a60(0x1cc)](_0x233a60(0x22c))[_0x233a60(0x2be)]({'botID':botID})[_0x233a60(0x194)]();_0x4511cc&&dbConfig[_0x233a60(0x1cc)](_0x233a60(0x22c))[_0x233a60(0x2be)]({'botID':botID})[_0x233a60(0x1b8)](_0x35d4c3)['write']();}function restoreOrders(){const _0xe4f622=_0x477922;let _0x5bbfe9;config[_0xe4f622(0x29b)]&&allOpenOrders['forEach'](_0x3ba657=>{const _0x335072=_0xe4f622,_0x4de5a6=config['openOrders'][_0x335072(0x2be)](_0x5b3d62=>_0x5b3d62[_0x335072(0x190)]==_0x3ba657['id']);_0x4de5a6&&(lastOrders[_0x335072(0x2a3)](_0x4de5a6),_0x5bbfe9=_0x3ba657[_0x335072(0x1c2)]);});if(lastOrders[_0xe4f622(0x280)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0xe4f622(0x1eb),allOrdersPlaced=!![];const _0x62f216=new Date()[_0xe4f622(0x27d)](),_0x4e2bb9=config[_0xe4f622(0x303)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5bbfe9+_0x4e2bb9>_0x62f216){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x335713=_0xe4f622;validateOrders(_0x335713(0x1fc));},_0x5bbfe9+_0x4e2bb9-_0x62f216);}else validateOrders(_0xe4f622(0x1fc));}}async function sendMetricsTelegram(){const _0x43f3cd=_0x477922;if(!coinsLoaded){process['send']({'telegrammsg':_0x43f3cd(0x1f5)},_0x258c08=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5c8df1='';if(config[_0x43f3cd(0x18a)])_0x5c8df1=_0x43f3cd(0x19e)+config[_0x43f3cd(0x22e)]+_0x43f3cd(0x241);else _0x5c8df1=_0x43f3cd(0x2ae)+botID+_0x43f3cd(0x241);const _0x1537a1=getKPIs(_0x43f3cd(0x2ac)),_0x263250=getKPIs('fiat',config[_0x43f3cd(0x175)]),_0x2b0cd5=getKPIs(_0x43f3cd(0x2b2)),_0xe45fac=getKPIs(_0x43f3cd(0x2d6),config['fiat']);_0x5c8df1+=_0x43f3cd(0x20a),_0x5c8df1+=_0x1537a1['leftTxt']+_0x43f3cd(0x2c2)+_0x1537a1[_0x43f3cd(0x194)]+'\x0a',_0x5c8df1+=_0x1537a1['rightTxt']+':\x20'+_0x1537a1[_0x43f3cd(0x187)]+'%\x0a',_0x5c8df1+=_0x263250[_0x43f3cd(0x2e4)]+_0x43f3cd(0x2c2)+_0x263250[_0x43f3cd(0x194)]+'\x0a',_0x5c8df1+=_0x263250[_0x43f3cd(0x18e)]+':\x20'+_0x263250['change']+'%\x0a',_0x5c8df1+=_0x2b0cd5[_0x43f3cd(0x2e4)]+':\x20'+_0x2b0cd5[_0x43f3cd(0x194)]+'\x20('+config[_0x43f3cd(0x2ac)]+')\x0a',_0x5c8df1+=_0x2b0cd5['rightTxt']+':\x20'+_0x2b0cd5['change']+_0x43f3cd(0x1c6)+config[_0x43f3cd(0x2ac)]+')\x0a',_0x5c8df1+=_0xe45fac[_0x43f3cd(0x2e4)]+':\x20'+_0xe45fac[_0x43f3cd(0x194)]+'\x20('+config[_0x43f3cd(0x175)]+')\x0a',_0x5c8df1+=_0xe45fac[_0x43f3cd(0x18e)]+':\x20'+_0xe45fac['change']+_0x43f3cd(0x1c6)+config[_0x43f3cd(0x175)]+')\x0a',_0x5c8df1+=_0x43f3cd(0x2bd),process[_0x43f3cd(0x170)]({'telegrammsg':_0x5c8df1},_0x209386=>{});}async function sendPortfolioTelegram(){const _0x3641d7=_0x477922;if(!coinsLoaded){process['send']({'telegrammsg':_0x3641d7(0x1f5)},_0xe296fd=>{});return;}let _0x4b0975='';if(config[_0x3641d7(0x18a)])_0x4b0975=_0x3641d7(0x19e)+config[_0x3641d7(0x22e)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x4b0975=_0x3641d7(0x2ae)+botID+_0x3641d7(0x1c5);_0x4b0975+='<pre>',_0x4b0975+=_0x3641d7(0x198),_0x4b0975+=_0x3641d7(0x205),_0x4b0975+=_0x3641d7(0x198),currentCoins[_0x3641d7(0x18b)](_0x12ff27=>{const _0x89a857=_0x3641d7;_0x4b0975+=_0x12ff27[_0x89a857(0x17c)][_0x89a857(0x2f3)](0x7)+'|\x20'+formatPad(_0x12ff27['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x12ff27[_0x89a857(0x2b8)],0x2,0x6)+'|\x20'+formatPad(_0x12ff27[_0x89a857(0x1ea)]*0x64,0x2,0x6)+'\x0a';}),_0x4b0975+='</pre>',process['send']({'telegrammsg':_0x4b0975},_0x46af79=>{});}function formatPad(_0x2a0a50,_0x3fffa5,_0x4a0fd5){const _0x443099=formatResultString(_0x2a0a50,_0x3fffa5);return _0x443099?_0x443099['padStart'](_0x4a0fd5):''['padStart'](_0x4a0fd5);}function _0x1159(_0xb824dd,_0x3b6321){const _0x4c9e4d=_0x380d();return _0x1159=function(_0xae01e4,_0x5b7d70){_0xae01e4=_0xae01e4-0x16c;let _0x380db4=_0x4c9e4d[_0xae01e4];return _0x380db4;},_0x1159(_0xb824dd,_0x3b6321);}function logHistory(_0x14b532,_0x2a67d1,_0x350834=''){const _0x41809d=_0x477922;let _0x4942bb={'time':getTimeStamp(),'type':_0x14b532,'event':_0x2a67d1};dbLogs[_0x41809d(0x1cc)](_0x41809d(0x1f0))[_0x41809d(0x2a3)](_0x4942bb)['write']();if(_0x350834=='')_0x350834=_0x2a67d1;proxyEmit(_0x41809d(0x212),{'log':_0x4942bb,'summary':_0x350834}),process[_0x41809d(0x170)]({'telegram':{..._0x4942bb,'botname':config[_0x41809d(0x22e)],'showname':config[_0x41809d(0x18a)]}},_0x512838=>{}),logger[_0x41809d(0x2c0)](''+_0x4942bb['event']);}function emitHistory(_0x59bc6e={}){const _0x477b6e=_0x477922;Object[_0x477b6e(0x1ad)](_0x59bc6e)[_0x477b6e(0x280)]==0x0&&(_0x59bc6e={'type':[_0x477b6e(0x183),_0x477b6e(0x212)],'event':'','page':0x1});if(_0x59bc6e[_0x477b6e(0x2df)][_0x477b6e(0x25b)](_0x477b6e(0x212)))_0x59bc6e[_0x477b6e(0x2df)]['splice'](_0x59bc6e[_0x477b6e(0x2df)][_0x477b6e(0x192)](_0x477b6e(0x212)),0x1,_0x477b6e(0x293),_0x477b6e(0x19f),_0x477b6e(0x246));if(dbLogs[_0x477b6e(0x216)](_0x477b6e(0x1f0))['value']()){let _0x3aee50=dbLogs[_0x477b6e(0x1cc)](_0x477b6e(0x1f0))['filter'](_0x163ff6=>{const _0x4a14d7=_0x477b6e;if(_0x59bc6e[_0x4a14d7(0x2df)]['length']==0x0)return![];else return _0x59bc6e[_0x4a14d7(0x2df)][_0x4a14d7(0x25b)](_0x163ff6[_0x4a14d7(0x2df)]);})[_0x477b6e(0x2a1)](_0x66849a=>{const _0x22d6f2=_0x477b6e;if(_0x59bc6e[_0x22d6f2(0x212)]=='')return!![];else return _0x66849a[_0x22d6f2(0x212)][_0x22d6f2(0x173)]()[_0x22d6f2(0x25b)](_0x59bc6e[_0x22d6f2(0x212)][_0x22d6f2(0x173)]());})[_0x477b6e(0x27c)](_0x477b6e(0x18c)),_0x3f0043=_0x3aee50['value']()[_0x477b6e(0x280)];_0x3aee50=_0x3aee50[_0x477b6e(0x297)]()['slice']((_0x59bc6e[_0x477b6e(0x1ba)]-0x1)*logPageSize,_0x59bc6e[_0x477b6e(0x1ba)]*logPageSize-0x1)[_0x477b6e(0x297)]()['value'](),proxyEmit(_0x477b6e(0x29a),{'logs':_0x3aee50,'total':_0x3f0043});}else proxyEmit(_0x477b6e(0x29a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x505b80){const _0x20a406=_0x477922;if(dbLogs[_0x20a406(0x216)](_0x20a406(0x1f0))['value']()){const _0x438d04=dbLogs['get'](_0x20a406(0x1f0))[_0x20a406(0x27c)](_0x20a406(0x18c))[_0x20a406(0x2a1)](_0x34f1b8=>{const _0x324e0d=_0x20a406;return _0x34f1b8[_0x324e0d(0x2df)]==_0x324e0d(0x183);})['value']();dbLogs['get'](_0x20a406(0x1f0))[_0x20a406(0x2ec)]()['write'](),dbLogs[_0x20a406(0x1cc)](_0x20a406(0x1f0))[_0x20a406(0x1b8)](_0x438d04)['write'](),emitHistory(_0x505b80);}}async function pauseBot(_0x53e417=''){const _0x3cc3b4=_0x477922,_0xa2662d=new Date()[_0x3cc3b4(0x27d)]();if(!lastErrorShown||_0xa2662d-lastErrorShown>=pauseBotInterval){lastErrorShown=_0xa2662d;!lastBotPause?(lastBotPause=_0xa2662d,consecutivePauses=0x1):(_0xa2662d-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3cc3b4(0x170)]({'stop':_0x3cc3b4(0x243)},_0x1ea38c=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3cc3b4(0x27d)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x53e417)_0x53e417+=_0x3cc3b4(0x2ca);logHistory(_0x3cc3b4(0x293),_0x53e417+_0x3cc3b4(0x254)+pauseBotInterval/0xea60+_0x3cc3b4(0x1a2)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x26fc20=_0x477922;process[_0x26fc20(0x170)]({'stop':'kill'},_0x3ee707=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x58f9b3,_0x2bd48d){const _0x43c82b=_0x477922;if(_0x58f9b3['toString']()[_0x43c82b(0x25b)](_0x43c82b(0x249)))return logHistory(_0x43c82b(0x293),config[_0x43c82b(0x171)]+_0x43c82b(0x282)),![];else{if(_0x58f9b3[_0x43c82b(0x1cd)]()[_0x43c82b(0x25b)](_0x43c82b(0x278)))return logHistory('error',config[_0x43c82b(0x171)]+_0x43c82b(0x1f7)),![];else{if(_0x58f9b3[_0x43c82b(0x1cd)]()[_0x43c82b(0x25b)](_0x43c82b(0x30e)))return logHistory(_0x43c82b(0x293),config['exchange']+_0x43c82b(0x2ff)),logHistory(_0x43c82b(0x293),_0x43c82b(0x2fa)),![];else await handleError(_0x58f9b3,_0x2bd48d);}}}async function handleError(_0x1c2795,_0x308929,_0x2bd7bb=''){const _0x3d2dbb=_0x477922,_0x5324ab=config[_0x3d2dbb(0x171)]||_0x3d2dbb(0x17b);if(_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)]('DDoSProtection')||_0x1c2795[_0x3d2dbb(0x1cd)]()['includes']('RateLimitExceeded'))await pauseBot(config[_0x3d2dbb(0x171)]+_0x3d2dbb(0x222));else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()['includes'](_0x3d2dbb(0x197))||_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x1c7)))await pauseBot(config[_0x3d2dbb(0x171)]+_0x3d2dbb(0x176));else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()['includes']('RequestTimeout'))await pauseBot(config[_0x3d2dbb(0x171)]+'\x20not\x20responding');else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x298)))await pauseBot(config[_0x3d2dbb(0x171)]+_0x3d2dbb(0x248));else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x228)))logHistory(_0x3d2dbb(0x293),_0x308929+_0x3d2dbb(0x2d0)),logHistory(_0x3d2dbb(0x293),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()['includes'](_0x3d2dbb(0x1e5)))logHistory(_0x3d2dbb(0x293),_0x308929+_0x3d2dbb(0x28b)),logHistory(_0x3d2dbb(0x293),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1c2795 instanceof ccxt[_0x3d2dbb(0x193)])logger[_0x3d2dbb(0x19c)](_0x3d2dbb(0x1ec),_0x1c2795),await pauseBot(config['exchange']+_0x3d2dbb(0x1b5));else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x249)))logHistory(_0x3d2dbb(0x293),_0x308929+'\x20|\x20'+config['exchange']+_0x3d2dbb(0x1ab)),logHistory(_0x3d2dbb(0x293),_0x3d2dbb(0x1b7)),await killBot();else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x278)))logHistory('error',_0x308929+_0x3d2dbb(0x2ca)+config[_0x3d2dbb(0x171)]+_0x3d2dbb(0x1fe)),logHistory('error',_0x3d2dbb(0x1b7)),await killBot();else{if(_0x1c2795['toString']()[_0x3d2dbb(0x25b)](_0x3d2dbb(0x30e)))logHistory(_0x3d2dbb(0x293),_0x308929+_0x3d2dbb(0x2ca)+config[_0x3d2dbb(0x171)]+_0x3d2dbb(0x17e)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1c2795[_0x3d2dbb(0x1cd)]()['includes'](_0x3d2dbb(0x1d2)))logHistory(_0x3d2dbb(0x293),_0x308929+_0x3d2dbb(0x265)+_0x2bd7bb);else _0x1c2795 instanceof ccxt[_0x3d2dbb(0x1c4)]?(logger[_0x3d2dbb(0x19c)](_0x3d2dbb(0x204),_0x1c2795),logHistory(_0x3d2dbb(0x293),_0x308929+_0x3d2dbb(0x2ca)+config[_0x3d2dbb(0x171)]+'\x20exchange\x20error')):(logger['full'](_0x308929+_0x3d2dbb(0x2dd),_0x1c2795),await pauseBot(_0x3d2dbb(0x1dc)));}}}}}}}}}}}function formatResult(_0x3a0355,_0x2e416e){const _0x5bc8a3=_0x477922;return parseFloat(_0x3a0355[_0x5bc8a3(0x22d)](_0x2e416e));}function formatResultTruncate(_0x11142b,_0x26e8b2){const _0x43c685=_0x477922;let _0x45417a=formatResultString(_0x11142b,0xa),_0x566ef5=_0x45417a[_0x43c685(0x192)]('.');return _0x566ef5!=-0x1&&(_0x45417a=_0x45417a[_0x43c685(0x19b)](0x0,_0x566ef5+_0x26e8b2+0x1)),Number(_0x45417a);}function formatResultString(_0x2fb975,_0x3d9fb9){const _0x29fc33=_0x477922;let _0xb65e3b;if(!(''+_0x2fb975)[_0x29fc33(0x25b)]('e'))_0xb65e3b=+(Math[_0x29fc33(0x256)](_0x2fb975+'e+'+_0x3d9fb9)+'e-'+_0x3d9fb9);else{let _0x46ef78=(''+_0x2fb975)['split']('e'),_0x1e014c='';+_0x46ef78[0x1]+_0x3d9fb9>0x0&&(_0x1e014c='+'),_0xb65e3b=+(Math['round'](+_0x46ef78[0x0]+'e'+_0x1e014c+(+_0x46ef78[0x1]+_0x3d9fb9))+'e-'+_0x3d9fb9);}return Number(_0xb65e3b)['toFixed'](_0x3d9fb9);}function getServerTime(){const _0xcbb245=_0x477922,_0xc808e5=new Date();return _0xc808e5['getFullYear']()+'/'+(_0xc808e5[_0xcbb245(0x19a)]()+0x1)[_0xcbb245(0x1cd)]()[_0xcbb245(0x188)](0x2,'0')+'/'+_0xc808e5['getDate']()[_0xcbb245(0x1cd)]()[_0xcbb245(0x188)](0x2,'0')+'\x20'+_0xc808e5[_0xcbb245(0x1c8)]()[_0xcbb245(0x1cd)]()[_0xcbb245(0x188)](0x2,'0')+':'+_0xc808e5['getMinutes']()[_0xcbb245(0x1cd)]()[_0xcbb245(0x188)](0x2,'0')+':'+_0xc808e5[_0xcbb245(0x250)]()[_0xcbb245(0x1cd)]()[_0xcbb245(0x188)](0x2,'0');}function getTimeStamp(){const _0x449db4=_0x477922,_0xf8ba9d=shiftedTime();return _0xf8ba9d[_0x449db4(0x23d)]()+'/'+(_0xf8ba9d[_0x449db4(0x19a)]()+0x1)[_0x449db4(0x1cd)]()[_0x449db4(0x188)](0x2,'0')+'/'+_0xf8ba9d[_0x449db4(0x1ef)]()[_0x449db4(0x1cd)]()[_0x449db4(0x188)](0x2,'0')+'\x20'+_0xf8ba9d[_0x449db4(0x1c8)]()[_0x449db4(0x1cd)]()[_0x449db4(0x188)](0x2,'0')+':'+_0xf8ba9d['getMinutes']()[_0x449db4(0x1cd)]()[_0x449db4(0x188)](0x2,'0')+':'+_0xf8ba9d['getSeconds']()[_0x449db4(0x1cd)]()[_0x449db4(0x188)](0x2,'0');}function getDate(){const _0x210f01=_0x477922,_0xd545a1=shiftedTime();return _0xd545a1[_0x210f01(0x23d)]()+'/'+(_0xd545a1[_0x210f01(0x19a)]()+0x1)['toString']()[_0x210f01(0x188)](0x2,'0')+'/'+_0xd545a1[_0x210f01(0x1ef)]()[_0x210f01(0x1cd)]()[_0x210f01(0x188)](0x2,'0');}function getHour(){const _0x6c4534=_0x477922,_0x4be0af=shiftedTime();return _0x4be0af['getHours']()[_0x6c4534(0x1cd)]()[_0x6c4534(0x188)](0x2,'0');}function sleep(_0x549d79){return new Promise(_0x28a0b7=>setTimeout(_0x28a0b7,_0x549d79));}function shiftedTime(){const _0x1b2415=_0x477922,_0x49c316=new Date();let _0xd6b5fa=_0x49c316;if(config&&config['timeshift']!==0x0)_0xd6b5fa=fns[_0x1b2415(0x2d2)](_0x49c316,{'hours':config[_0x1b2415(0x1e2)]});return _0xd6b5fa;}function timer(_0x1245e2){const _0x279062=_0x477922,_0x5cd21d=new Date();!lasttime?console['log'](getTimeStamp()+_0x279062(0x2cb),_0x1245e2,_0x5cd21d):console[_0x279062(0x1cf)](getTimeStamp()+_0x279062(0x2cb),_0x1245e2,(_0x5cd21d-lasttime)/0x3e8),lasttime=_0x5cd21d;}