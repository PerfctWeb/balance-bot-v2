const _0x1dc520=_0x2444;(function(_0x92d54c,_0x4f393e){const _0x40666c=_0x2444,_0x25b659=_0x92d54c();while(!![]){try{const _0x5bde96=-parseInt(_0x40666c(0xc2))/0x1+parseInt(_0x40666c(0x158))/0x2+parseInt(_0x40666c(0x1cf))/0x3*(parseInt(_0x40666c(0x137))/0x4)+parseInt(_0x40666c(0x1c2))/0x5*(parseInt(_0x40666c(0x1cb))/0x6)+-parseInt(_0x40666c(0x21d))/0x7*(-parseInt(_0x40666c(0x209))/0x8)+-parseInt(_0x40666c(0x21e))/0x9+-parseInt(_0x40666c(0x148))/0xa*(parseInt(_0x40666c(0x1da))/0xb);if(_0x5bde96===_0x4f393e)break;else _0x25b659['push'](_0x25b659['shift']());}catch(_0x373c7c){_0x25b659['push'](_0x25b659['shift']());}}}(_0x3cb2,0xdb7ec));const _0x147b6d=function(){let _0x2e8352=!![];return function(_0x5e2ac1,_0x4438c1){const _0x46313f=_0x2e8352?function(){const _0x21ec41=_0x2444;if(_0x4438c1){const _0x38b441=_0x4438c1[_0x21ec41(0xac)](_0x5e2ac1,arguments);return _0x4438c1=null,_0x38b441;}}:function(){};return _0x2e8352=![],_0x46313f;};}(),_0x388538=_0x147b6d(this,function(){const _0x2dc955=_0x2444;return _0x388538['toString']()['search'](_0x2dc955(0xd8))[_0x2dc955(0x94)]()[_0x2dc955(0x1b1)](_0x388538)[_0x2dc955(0x10f)](_0x2dc955(0xd8));});_0x388538();'use strict';const ccxt=require(_0x1dc520(0x218)),low=require(_0x1dc520(0x9a)),FileSync=require(_0x1dc520(0xb8)),fs=require('fs'),fns=require(_0x1dc520(0x207)),forge=require(_0x1dc520(0xd4)),util=require(_0x1dc520(0xd0)),argv=require(_0x1dc520(0xa5))(process[_0x1dc520(0xde)][_0x1dc520(0x16b)](0x2))[_0x1dc520(0xde)],path=require(_0x1dc520(0xca)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x1dc520(0x17d),_0x1dc520(0xa1),_0x1dc520(0x17a),_0x1dc520(0xec)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x7d0;let enableFiatToggle,prevAmountAtOrder={};const serverversion=require(_0x1dc520(0x1ef))['version'],environment=require(_0x1dc520(0x1ef))['environment']||_0x1dc520(0x146),botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x1dc520(0xa0)](botID)&&(console[_0x1dc520(0x22a)](_0x1dc520(0x81)+botID+_0x1dc520(0x16f)),killBot());const userID=process[_0x1dc520(0xde)][0x3]||'',configpath=userID?_0x1dc520(0x1cc)+userID+'/':'./config/',logspath=userID?'./logs/'+userID+'/':_0x1dc520(0x215),loggerfile=fs[_0x1dc520(0xa7)](logspath+_0x1dc520(0xc1),{'flags':'a'});!fs[_0x1dc520(0x1b4)](configpath)&&fs[_0x1dc520(0x1db)](configpath);!fs[_0x1dc520(0x1b4)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0x1dc520(0xbe),logfile=configpath+_0x1dc520(0x1e8)+botID+'-events.json',performancefile=configpath+_0x1dc520(0x1e8)+botID+_0x1dc520(0x139),coinresultsfile=configpath+_0x1dc520(0x1e8)+botID+_0x1dc520(0xce),settingsfile=configpath+_0x1dc520(0xbd),securefile=configpath+_0x1dc520(0x213),configbackuppath=configpath+_0x1dc520(0x1e4),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1dc520(0x129)]({'logs':[],'version':serverversion})[_0x1dc520(0xd1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1dc520(0x129)]({'data':[],'version':serverversion})[_0x1dc520(0xd1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x1dc520(0xd1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1dc520(0x129)]({'coins':[],'version':serverversion})[_0x1dc520(0xd1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x569396=>{const _0xa6e20e=_0x1dc520;console[_0xa6e20e(0x22a)](_0x569396);},'simple':_0x576802=>{const _0x5bc83d=_0x1dc520;console['log'](_0x576802),loggerfile[_0x5bc83d(0xd1)](util[_0x5bc83d(0xe1)](_0x576802)+'\x0a');},'full':async(_0x2aa06a,_0x48e16c='')=>{const _0x48a600=_0x1dc520;let _0x443d42;if(config['showname'])_0x443d42=getTimeStamp()+':\x20'+config['botname']+_0x48a600(0x18f)+_0x2aa06a;else _0x443d42=getTimeStamp()+_0x48a600(0x14e)+botID+'\x20>\x20'+_0x2aa06a;console[_0x48a600(0x22a)](_0x443d42),loggerfile[_0x48a600(0xd1)](util['format'](_0x443d42)+'\x0a'),_0x48e16c&&(console[_0x48a600(0x22a)](_0x48e16c),loggerfile[_0x48a600(0xd1)](util[_0x48a600(0xe1)](_0x48e16c)+'\x0a'));},'debug':async(_0x2c7840,_0x1542a2='')=>{const _0x1fb9de=_0x1dc520;let _0x50a4be;if(config[_0x1fb9de(0x12c)])_0x50a4be=getTimeStamp()+':\x20'+config['botname']+_0x1fb9de(0xaa)+_0x2c7840;else _0x50a4be=getTimeStamp()+':\x20Bot\x20'+botID+_0x1fb9de(0xaa)+_0x2c7840;if(debugging)console[_0x1fb9de(0x22a)](_0x50a4be);loggerfile[_0x1fb9de(0xd1)](util[_0x1fb9de(0xe1)](_0x50a4be)+'\x0a');if(_0x1542a2){if(debugging)console[_0x1fb9de(0x22a)](_0x1542a2);loggerfile[_0x1fb9de(0xd1)](util[_0x1fb9de(0xe1)](_0x1542a2)+'\x0a');}}};process['on']('uncaughtException',function(_0x21fe8f){const _0x5af4cf=_0x1dc520;handleError(_0x21fe8f,_0x5af4cf(0x1de));});settings[_0x1dc520(0x20a)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0x1dc520(0x199)]!=config['onepagemode']&&updateOnepagemode(settings[_0x1dc520(0x199)]);(settings['marketcapApi']&&!config['marketcapApi']||!settings[_0x1dc520(0xd9)]&&config[_0x1dc520(0xd9)])&&updateMarketcapApi(settings['marketcapApi']);process['send']({'started':_0x1dc520(0x15d)},_0x49144f=>{}),initializeProcessListeners();function proxyEmit(_0x589042,_0x28f42d=null){process['send']({'function':_0x589042,'args':_0x28f42d},_0x3c26e4=>{});}function initializeProcessListeners(){const _0x495f7c=_0x1dc520;process['on'](_0x495f7c(0x14f),_0x1a8f0a=>{const _0x46103c=_0x495f7c;switch(Object[_0x46103c(0x181)](_0x1a8f0a)[0x0]){case _0x46103c(0x20a):_0x1a8f0a[_0x46103c(0x20a)]!=undefined&&(settings[_0x46103c(0x20a)]=_0x1a8f0a['timeshift'],updateTimeshift(settings[_0x46103c(0x20a)]));break;case _0x46103c(0x199):_0x1a8f0a[_0x46103c(0x199)]!=undefined&&(settings[_0x46103c(0x199)]=_0x1a8f0a[_0x46103c(0x199)],updateOnepagemode(settings[_0x46103c(0x199)]));break;case _0x46103c(0xd9):_0x1a8f0a[_0x46103c(0xd9)]!=undefined&&(settings[_0x46103c(0xd9)]=_0x1a8f0a[_0x46103c(0xd9)],updateMarketcapApi(settings[_0x46103c(0xd9)]));break;case _0x46103c(0xc6):_0x1a8f0a[_0x46103c(0xc6)]!=undefined&&(bots=JSON[_0x46103c(0x149)](_0x1a8f0a[_0x46103c(0xc6)]),proxyEmit(_0x46103c(0xc6),bots));break;case _0x46103c(0x100):switch(_0x1a8f0a[_0x46103c(0x100)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x1a8f0a[_0x46103c(0x1c4)]);break;case _0x46103c(0x1c8):deleteHistoryAlerts(_0x1a8f0a[_0x46103c(0x1c4)]);break;case'getPortfolio':getPortfolio(_0x1a8f0a[_0x46103c(0x1c4)]);break;case _0x46103c(0x115):storeConfiguration(_0x1a8f0a['args']);break;case _0x46103c(0x1ac):storeHeadless(_0x1a8f0a[_0x46103c(0x1c4)]);break;case'storeFiat':storeFiat(_0x1a8f0a[_0x46103c(0x1c4)]);break;case _0x46103c(0xed):resetHistory();break;case _0x46103c(0x122):getStartingBalances(getNormalizedPerformance());break;case _0x46103c(0x1a4):placeOrder(_0x1a8f0a[_0x46103c(0x1c4)]);break;case _0x46103c(0xa2):cancelLoading();break;case _0x46103c(0x1a5):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x46103c(0x184):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2f65a4=![]){const _0x335511=_0x1dc520;logger[_0x335511(0x20c)](_0x335511(0x175)+(_0x2f65a4?_0x335511(0x126):'no\x20exchange\x20reloaded')+_0x335511(0x20e)+config[_0x335511(0x1b5)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2f65a4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x335511(0x189)]!=''&&config[_0x335511(0x189)]!=_0x335511(0x173)){loadingProgress=0x0;_0x2f65a4&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit('configuration',emittedConfiguration()),initialPerformanceStored=![]);const _0x3c3ceb=await getCoins();[currentCoins,currentCoinsAll]=_0x3c3ceb,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x335511(0x20c)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x335511(0xaf)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x2345ae=![]){const _0x24e3a5=_0x1dc520;logger[_0x24e3a5(0x20c)](_0x24e3a5(0x1a3)+(_0x2345ae?_0x24e3a5(0xa9):_0x24e3a5(0xc7))+_0x24e3a5(0x21f)+config[_0x24e3a5(0x1b5)]);if(pidBalances)clearTimeout(pidBalances);if(_0x2345ae){getBalances();return;}coinsLoaded=![];if(config['apiKey']!=''&&config[_0x24e3a5(0x189)]!='***'){loadingProgress=0x1;const _0x375c31=await getCoins();[currentCoins,currentCoinsAll]=_0x375c31,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x24e3a5(0x20c)](_0x24e3a5(0x1d2)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x24e3a5(0xaf)]==0x0&&allOpenOrders[_0x24e3a5(0xaf)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3454a2){const _0x5d5ae8=_0x1dc520;let _0x442853=![];if(_0x3454a2)_0x442853=!![];let _0x2b53ce;_0x442853?_0x2b53ce=_0x3454a2[_0x5d5ae8(0x12a)](_0x265156=>_0x265156[_0x5d5ae8(0x11f)]):_0x2b53ce=currentCoinsAll['map'](_0x3e12a4=>_0x3e12a4['coin']);if(!config[_0x5d5ae8(0xd9)]||!_0x442853&&!config[_0x5d5ae8(0x113)]||_0x2b53ce['length']==0x0)return;let _0x4da42a=null;try{_0x4da42a=await axios[_0x5d5ae8(0xd3)](_0x5d5ae8(0xb4),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x5d5ae8(0xd9)]},'params':{'symbol':_0x2b53ce[_0x5d5ae8(0x94)]()}});}catch(_0x5ba5e4){_0x4da42a=null,_0x5ba5e4[_0x5d5ae8(0x94)]()[_0x5d5ae8(0x1bb)](_0x5d5ae8(0x190))?(config[_0x5d5ae8(0xd9)]=![],updateConfig(),proxyEmit(_0x5d5ae8(0x161),emittedConfiguration()),logHistory(_0x5d5ae8(0x98),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(logHistory('error',_0x5d5ae8(0x16a)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x5d5ae8(0x20c)](_0x5d5ae8(0x86),_0x5ba5e4[_0x5d5ae8(0x94)]()+'\x20-\x20'+_0x5ba5e4[_0x5d5ae8(0x222)]));}if(_0x4da42a){let _0x31100b=0x0;const _0x4a54c8=_0x4da42a['data'];_0x2b53ce[_0x5d5ae8(0x1c7)](_0x46ba0c=>{const _0x37e7ac=_0x5d5ae8;if(_0x4a54c8[_0x37e7ac(0x1ea)][_0x46ba0c][0x0])_0x31100b+=_0x4a54c8[_0x37e7ac(0x1ea)][_0x46ba0c][0x0]['quote'][_0x37e7ac(0xae)]['market_cap'];}),_0x2b53ce[_0x5d5ae8(0x1c7)](_0x75a51=>{const _0x399fdf=_0x5d5ae8,_0x462af4=_0x4a54c8[_0x399fdf(0x1ea)][_0x75a51][0x0]?_0x4a54c8['data'][_0x75a51][0x0][_0x399fdf(0xda)][_0x399fdf(0xae)][_0x399fdf(0x212)]:0x0;if(_0x442853){const _0x4b0ea5=_0x3454a2[_0x399fdf(0xcc)](_0x2b48ad=>_0x2b48ad[_0x399fdf(0x11f)]==_0x75a51);_0x4b0ea5&&(_0x4b0ea5[_0x399fdf(0x76)]=_0x462af4);}else{const _0xf8b833=currentCoins[_0x399fdf(0xcc)](_0x8944cd=>_0x8944cd[_0x399fdf(0x11f)]==_0x75a51);_0xf8b833&&(_0xf8b833[_0x399fdf(0x76)]=_0x462af4);const _0x77b649=currentCoinsAll[_0x399fdf(0xcc)](_0x21cdc4=>_0x21cdc4[_0x399fdf(0x11f)]==_0x75a51);_0x77b649&&(_0x77b649[_0x399fdf(0x76)]=_0x462af4);}}),!_0x442853&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x23354a=_0x1dc520,_0xa542c3=0x2;let _0x45b8f4=0x0,_0x5b3523=0x0,_0x25c32a=0x0,_0x42e0a2=0x0,_0x276157=0x0;config[_0x23354a(0x1c5)]['forEach'](_0x4a6ecc=>{const _0x8c528d=_0x23354a;if(!_0x4a6ecc[_0x8c528d(0xb7)]){_0x25c32a++,_0x45b8f4+=_0x4a6ecc['slider'];if(_0x4a6ecc[_0x8c528d(0x233)]===-0x1){_0x45b8f4++;const _0x37745d=currentCoinsAll[_0x8c528d(0xcc)](_0xe5177f=>_0xe5177f['coin']==_0x4a6ecc[_0x8c528d(0x11f)]);_0x37745d&&(_0x42e0a2+=_0x37745d['marketcap'],_0x276157+=Math[_0x8c528d(0x22e)](_0x37745d[_0x8c528d(0x76)]));}if(_0x4a6ecc[_0x8c528d(0x233)]!==-0x1)_0x5b3523++;}});let _0x4fa99c;const _0x58604b=0x64-_0x45b8f4,_0x3cd819=_0x25c32a-_0x5b3523;_0x4fa99c=_0x3cd819===0x0?_0x45b8f4:Math[_0x23354a(0xa8)](0x64,_0x45b8f4),config[_0x23354a(0x1c5)]['forEach'](_0x5199ae=>{const _0x3ec59a=_0x23354a,_0x15424d=currentCoinsAll['find'](_0xa16631=>_0xa16631[_0x3ec59a(0x11f)]==_0x5199ae[_0x3ec59a(0x11f)]);_0x15424d&&(_0x5199ae[_0x3ec59a(0x76)]=_0x15424d['marketcap']);if(!_0x5199ae[_0x3ec59a(0xb7)]){if(_0x4fa99c<=0x64){if(_0x5199ae['slider']===-0x1){if(_0x42e0a2!==0x0&&config[_0x3ec59a(0x113)]){if(_0x15424d){if(config[_0x3ec59a(0x113)]==_0x3ec59a(0x76))_0x5199ae['distribution']=(_0x58604b/(_0x42e0a2/_0x15424d[_0x3ec59a(0x76)]))[_0x3ec59a(0x1f8)](_0xa542c3);else config[_0x3ec59a(0x113)]==_0x3ec59a(0xbb)&&(_0x5199ae[_0x3ec59a(0x203)]=(_0x58604b/(_0x276157/Math[_0x3ec59a(0x22e)](_0x15424d['marketcap'])))[_0x3ec59a(0x1f8)](_0xa542c3));}}}}}}),updateConfig();}function updateConfig(){const _0x488afc=_0x1dc520;let _0x51352a=dbConfig['get'](_0x488afc(0x1e0))[_0x488afc(0xcc)]({'botID':botID})[_0x488afc(0x1d8)]();_0x51352a&&dbConfig[_0x488afc(0xd3)](_0x488afc(0x1e0))['find']({'botID':botID})['assign'](config)[_0x488afc(0xd1)]();}function logMemory(){const _0x3032c1=_0x1dc520;if(environment!=_0x3032c1(0xb6))return;const _0x526d80=process['memoryUsage']()[_0x3032c1(0x176)]/0x400/0x400;logger[_0x3032c1(0x20c)](_0x3032c1(0xb1)+process['pid']+_0x3032c1(0x7e)+formatResult(_0x526d80,0x1)+_0x3032c1(0x1f7));}async function startScheduler(){const _0x45c5ae=_0x1dc520,_0x41c9c6=shiftedTime()[_0x45c5ae(0x1e3)]();getMarketCap(),_0x41c9c6==0x1&&logMemory(),(_0x41c9c6==0x2||_0x41c9c6==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x200f1e=![]){const _0x587281=_0x1dc520;logger[_0x587281(0x20c)](_0x587281(0xf4));if(!_0x200f1e)while(lockOrders!=ORDERS[_0x587281(0x1cd)]||coolingDown){await sleep(0x3e8);}process[_0x587281(0x19d)]({'stop':_0x587281(0x174)},_0x277307=>{});}async function initExchange(_0x4cc229=config[_0x1dc520(0x1b5)],_0x4177b5=config['apiKey'],_0xa8e9be=config['apiSecret'],_0x5f2969=config[_0x1dc520(0xe7)]){const _0x4d53a4=_0x1dc520;if(exchange){logger['debug'](_0x4d53a4(0x168));return;}logger[_0x4d53a4(0x20c)](_0x4d53a4(0x130));!supportedExchanges()['includes'](_0x4cc229)&&(logHistory(_0x4d53a4(0x98),_0x4d53a4(0x1fd)+_0x4cc229+_0x4d53a4(0x210)),killBot());const _0x2cf9c8=ccxt[_0x4d53a4(0x1c1)][_0x4cc229[_0x4d53a4(0x185)]()];exchange=new _0x2cf9c8({'apiKey':_0x4177b5,'secret':_0xa8e9be,'options':{'defaultType':'spot'}});if(_0x5f2969)exchange['password']=_0x5f2969;}function updateExchange(_0x41f56e,_0x542956,_0x4326b2=null){const _0x13eea2=_0x1dc520;exchange[_0x13eea2(0x189)]=_0x41f56e,exchange['apiSecret']=_0x542956,exchange[_0x13eea2(0xe7)]=_0x4326b2,logger[_0x13eea2(0x20c)](_0x13eea2(0x178));}function setStableCoins(){const _0x5e2aef=_0x1dc520;let _0x453448=config['basecoin']==_0x5e2aef(0xf7)?_0x5e2aef(0xf7):config[_0x5e2aef(0x103)]==_0x5e2aef(0x91)?'PAXG':_0x5e2aef(0x9f),_0xeb001a=allSymbols[_0x5e2aef(0x1bb)](_0x453448+_0x5e2aef(0x9e))?'USD':allSymbols[_0x5e2aef(0x1bb)](_0x453448+_0x5e2aef(0x166))?_0x5e2aef(0xa1):_0x5e2aef(0x121),_0x2df417=allSymbols[_0x5e2aef(0x1bb)](_0x453448+_0x5e2aef(0x9c))?'EUR':_0xeb001a;enableFiatToggle=!![],_0xeb001a=='EUR'&&(enableFiatToggle=![],storeFiat(_0x5e2aef(0x121))),_0x2df417!='EUR'&&(enableFiatToggle=![],storeFiat(_0x5e2aef(0xae))),stablecoins={'eur':{'coin':''+_0x453448+_0x2df417,'symbol':_0x453448+'/'+_0x2df417},'usd':{'coin':''+_0x453448+_0xeb001a,'symbol':_0x453448+'/'+_0xeb001a}};}async function initwsCcxt(){const _0x57460f=_0x1dc520;initCycle++;const _0x15072e=initCycle;let _0x44efb3=[];config[_0x57460f(0x1c5)][_0x57460f(0x1c7)](_0x5db219=>{const _0xf43be4=_0x57460f;if(!_0x5db219['excluded']&&_0x5db219['coin']!=config['basecoin'])_0x44efb3[_0xf43be4(0x1ed)](_0x5db219['symbol']);});if(!_0x44efb3[_0x57460f(0x1bb)](stablecoins[_0x57460f(0x1a1)]['symbol']))_0x44efb3[_0x57460f(0x1ed)](stablecoins['eur'][_0x57460f(0xfa)]);if(!_0x44efb3[_0x57460f(0x1bb)](stablecoins['usd'][_0x57460f(0xfa)]))_0x44efb3['push'](stablecoins[_0x57460f(0x1b0)][_0x57460f(0xfa)]);if(config[_0x57460f(0x1b5)][_0x57460f(0x1ce)](_0x57460f(0x1c6))&&config[_0x57460f(0x103)]!='PAXG'){if(!_0x44efb3[_0x57460f(0x1bb)]('BNB/'+config[_0x57460f(0x103)]))_0x44efb3[_0x57460f(0x1ed)](_0x57460f(0x13c)+config['basecoin']);}loadCoins(_0x44efb3),_0x44efb3=validateSymbols(_0x44efb3);const _0x1fb02b=async _0x1b4e76=>{const _0x5b0369=_0x57460f;let _0x543d30;try{const _0x154676=await getTickers(_0x1b4e76);Object['entries'](_0x154676)[_0x5b0369(0x1c7)](_0x1ed341=>{const _0x4b548b=_0x5b0369;_0x543d30=_0x1ed341[0x1][_0x4b548b(0xfa)],gTicker[noslash(_0x543d30)]=_0x1ed341[0x1][_0x4b548b(0x239)],gChange[_0x543d30]=_0x1ed341[0x1]['percentage'];});}catch(_0xf77726){await handleError(_0xf77726,_0x5b0369(0x1a9),_0x543d30);}},_0xa360e9=async _0x2d9105=>{const _0x53c1b5=_0x57460f;while(initCycle==_0x15072e){if(!botPaused)try{const _0x48c616=await exchange[_0x53c1b5(0x1e7)](_0x2d9105);gTicker[noslash(_0x48c616[0x0]['symbol'])]=_0x48c616[0x0][_0x53c1b5(0xe0)];}catch(_0x2e5bd6){if(!exchangeStopped)await handleError(_0x2e5bd6,_0x53c1b5(0x1d5),_0x2d9105);}else await sleep(0x64);}},_0x2b7aa0=async _0x5375ab=>{const _0x482c13=_0x57460f;while(initCycle==_0x15072e){if(!botPaused)try{const _0x1ed6eb=await exchange[_0x482c13(0x152)](_0x5375ab),_0x39bab8=_0x1ed6eb['pop']();gTicker[noslash(_0x39bab8['symbol'])]=_0x39bab8['price'];}catch(_0x3faaa6){if(!exchangeStopped)await handleError(_0x3faaa6,_0x482c13(0x219),_0x5375ab[_0x482c13(0x94)]());}else await sleep(0x64);}},_0x10ee33=async _0x110a14=>{const _0x15bad1=_0x57460f;while(initCycle==_0x15072e){if(!botPaused){let _0xa82252;try{await sleep(0x3c*0x3e8);const _0x5de8ec=await getTickers(_0x110a14);Object[_0x15bad1(0x1f4)](_0x5de8ec)[_0x15bad1(0x1c7)](_0x4511c8=>{const _0x540e55=_0x15bad1;_0xa82252=_0x4511c8[0x1][_0x540e55(0xfa)],gChange[_0xa82252]=_0x4511c8[0x1][_0x540e55(0xa4)];});}catch(_0x4eb8fc){if(!exchangeStopped)await handleError(_0x4eb8fc,_0x15bad1(0x20b),_0xa82252);}}else await sleep(0x64);}},_0x2c4dc5=async _0xa08819=>{const _0x25ac9c=_0x57460f;while(initCycle==_0x15072e){if(!botPaused)try{const _0x2559ba=await exchange[_0x25ac9c(0x151)](_0xa08819);initCycle==_0x15072e&&_0x2559ba['forEach'](_0x512529=>{updateNumberCoinsCcxt(_0x512529);});}catch(_0x50db51){if(!exchangeStopped)await handleError(_0x50db51,_0x25ac9c(0x95));}else await sleep(0x64);}};_0x1fb02b(_0x44efb3),_0x10ee33(_0x44efb3),exchange[_0x57460f(0xfe)]['watchTradesForSymbols']&&!(config[_0x57460f(0x1b5)]==_0x57460f(0xf9)&&_0x44efb3[_0x57460f(0xaf)]>0xa)?_0x2b7aa0(_0x44efb3):_0x44efb3[_0x57460f(0x1c7)](_0x52ea9d=>{_0xa360e9(_0x52ea9d);}),_0x44efb3[_0x57460f(0x1c7)](_0x4d7ece=>{_0x2c4dc5(_0x4d7ece);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2dd99c){const _0x16ad31=_0x1dc520;let _0x3e93bd={};try{if(config['exchange']!=_0x16ad31(0x1e2))_0x3e93bd=await exchange['fetchTickers'](_0x2dd99c);else for(const _0x197fa0 of _0x2dd99c){const _0x5d1cee=await exchange['fetchTicker'](_0x197fa0);_0x3e93bd[_0x197fa0]=_0x5d1cee;}return _0x3e93bd;}catch(_0x247c58){throw _0x247c58;}}function setBlockTransactionDetection(_0x242f98){const _0x226b00=_0x1dc520;blockTransactionDetection=_0x242f98,logger[_0x226b00(0x20c)](_0x226b00(0x120)+blockTransactionDetection);}async function detectLiquidityChange(_0x23cb86=0x0){const _0x1df84f=_0x1dc520;transactionDetectionOngoing=!![];try{const _0x3f968c=await getCoins(_0x23cb86),[_0x34f11c,_0x79b93c]=_0x3f968c;let _0x58e7c2=[];currentCoins[_0x1df84f(0x1c7)](_0x13465f=>{const _0x3968c3=_0x1df84f,_0xe783ba=_0x34f11c[_0x3968c3(0xcc)](_0x189171=>_0x189171['coin']==_0x13465f['coin']);if(_0xe783ba){if(_0x13465f[_0x3968c3(0x180)]!=_0xe783ba[_0x3968c3(0x180)]){let _0x19446a;if(_0x13465f['coin']!=config['basecoin']){const _0x2b96fe=gTicker[noslash(_0x13465f[_0x3968c3(0xfa)])];_0x19446a=_0x13465f['reverse']?0x1/_0x2b96fe:_0x2b96fe;}else _0x19446a=0x1;_0x58e7c2[_0x3968c3(0x1ed)]({'coin':_0x13465f[_0x3968c3(0x11f)],'symbol':_0x13465f[_0x3968c3(0xfa)],'price':_0x19446a,'number':Number(formatResult(_0xe783ba[_0x3968c3(0x180)]-_0x13465f[_0x3968c3(0x180)],0x8)),'basecoinvalue':_0x19446a*(_0xe783ba[_0x3968c3(0x180)]-_0x13465f[_0x3968c3(0x180)])});}}});if(_0x58e7c2[_0x1df84f(0xaf)]>0x0&&!blockTransactionDetection)for(const _0x484f8c of _0x58e7c2){if(config[_0x1df84f(0x205)]){logger[_0x1df84f(0x20c)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x484f8c['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x1df84f(0x82)]);if(lastFees[_0x1df84f(0x82)]==0x0||Math[_0x1df84f(0x117)](_0x484f8c[_0x1df84f(0x119)])>lastFees[_0x1df84f(0x82)]*0x3){if(config[_0x1df84f(0x205)]==_0x1df84f(0x217)){delete _0x484f8c['symbol'],delete _0x484f8c['basecoinvalue'];let _0x235535=[],_0x3e3262=[...config['liquidity']]||[],_0x5aa78f=config['liquidity'];_0x3e3262[_0x1df84f(0x188)]((_0x4bfdc5,_0xa847e5)=>_0x4bfdc5[_0x1df84f(0x8f)]>_0xa847e5[_0x1df84f(0x8f)]?-0x1:_0xa847e5[_0x1df84f(0x8f)]>_0x4bfdc5[_0x1df84f(0x8f)]?0x1:0x0);const _0x1db1d1=getDate();if(_0x3e3262[0x0]){const _0x275684=fns['parse'](_0x3e3262[0x0][_0x1df84f(0x8f)],_0x1df84f(0x7f),new Date()),_0x266a23=fns[_0x1df84f(0x149)](_0x1db1d1,_0x1df84f(0x7f),new Date());if(fns[_0x1df84f(0xf5)](_0x275684,_0x266a23)){_0x235535=_0x3e3262[0x0][_0x1df84f(0x1fe)];const _0x3de808=_0x235535[_0x1df84f(0xcc)](_0x1597c0=>_0x1597c0[_0x1df84f(0x11f)]==_0x484f8c[_0x1df84f(0x11f)]);_0x3de808?(_0x3de808['number']+=_0x484f8c[_0x1df84f(0x180)],_0x3de808[_0x1df84f(0x180)]==0x0&&(_0x235535=_0x235535['filter'](_0x26b94c=>{const _0x531396=_0x1df84f;return _0x26b94c[_0x531396(0x11f)]!=_0x484f8c['coin'];}))):_0x235535[_0x1df84f(0x1ed)](_0x484f8c);const _0x3f0100=_0x5aa78f[_0x1df84f(0xcc)](_0x18f488=>_0x18f488[_0x1df84f(0x8f)]==_0x1db1d1);_0x3f0100[_0x1df84f(0x1fe)]=_0x235535;}else _0x5aa78f[_0x1df84f(0x1ed)]({'date':_0x1db1d1,'changes':[_0x484f8c]});}const _0x4711=_0x5aa78f[_0x1df84f(0xcc)](_0x239ea7=>_0x239ea7[_0x1df84f(0x8f)]==_0x1db1d1);if(_0x4711){let _0xffa282=!![];_0x4711[_0x1df84f(0x1fe)]['forEach'](_0x48d829=>{if(_0x48d829['number']!=0x0)_0xffa282=![];}),_0xffa282&&(_0x5aa78f=_0x5aa78f[_0x1df84f(0x208)](_0x56bd62=>{const _0xa3ea2b=_0x1df84f;return _0x56bd62[_0xa3ea2b(0x8f)]!=_0x1db1d1;}));}let _0xfa89f1=dbConfig[_0x1df84f(0xd3)](_0x1df84f(0x1e0))[_0x1df84f(0xcc)]({'botID':botID})[_0x1df84f(0x1d8)]();_0xfa89f1&&(dbConfig[_0x1df84f(0xd3)](_0x1df84f(0x1e0))['find']({'botID':botID})[_0x1df84f(0x179)]({'liquidity':_0x5aa78f})[_0x1df84f(0xd1)](),config['liquidity']=_0x5aa78f);logHistory(_0x1df84f(0x78),_0x1df84f(0x138)+Math['abs'](_0x484f8c[_0x1df84f(0x180)])+'\x20'+_0x484f8c['coin']+'\x20'+(_0x484f8c['number']>0x0?_0x1df84f(0x1f0):_0x1df84f(0x1bd))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x1df84f(0x161),emittedConfiguration());const _0xbc8d00=getNormalizedPerformance();emitPerformance(_0xbc8d00),getStartingBalances(_0xbc8d00),logger['debug']('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0x1df84f(0x205)]==_0x1df84f(0x14d)&&(config[_0x1df84f(0x140)]?(await storeHeadless({'headless':![]}),logHistory(_0x1df84f(0x78),_0x1df84f(0x138)+Math[_0x1df84f(0x117)](_0x484f8c[_0x1df84f(0x180)])+'\x20'+_0x484f8c[_0x1df84f(0x11f)]+'\x20'+(_0x484f8c[_0x1df84f(0x180)]>0x0?_0x1df84f(0x1f0):_0x1df84f(0x1bd))+_0x1df84f(0x77))):logger[_0x1df84f(0x20c)]('Portfolio\x20change\x20detected:\x20'+Math[_0x1df84f(0x117)](_0x484f8c[_0x1df84f(0x180)])+'\x20'+_0x484f8c['coin']+'\x20'+(_0x484f8c[_0x1df84f(0x180)]>0x0?_0x1df84f(0x1f0):_0x1df84f(0x1bd))+_0x1df84f(0x169)));}else logger[_0x1df84f(0x20c)](_0x1df84f(0x1f2)+Math[_0x1df84f(0x117)](_0x484f8c[_0x1df84f(0x180)])+'\x20'+_0x484f8c['coin']+'\x20'+(_0x484f8c[_0x1df84f(0x180)]>0x0?_0x1df84f(0x1f0):'removed'));}else logger[_0x1df84f(0x20c)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x484f8c[_0x1df84f(0x180)])+'\x20'+_0x484f8c[_0x1df84f(0x11f)]+'\x20'+(_0x484f8c[_0x1df84f(0x180)]>0x0?_0x1df84f(0x1f0):_0x1df84f(0x1bd))+_0x1df84f(0x1d0));}currentCoins=_0x34f11c,currentCoinsAll=_0x79b93c;}catch(_0x43542c){if(!exchangeStopped)await handleError(_0x43542c,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x551e29=_0x1dc520;logger[_0x551e29(0x20c)](_0x551e29(0x12b));try{markets=await exchange['loadMarkets']();}catch(_0x1f8822){logger[_0x551e29(0x20c)]('Error\x20in\x20loadSymbols():\x20'+_0x1f8822['toString']());if(markets){}else logHistory(_0x551e29(0x98),_0x551e29(0x167)),logHistory(_0x551e29(0x98),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),logger[_0x551e29(0x20c)](_0x551e29(0x86),_0x1f8822),loading[_0x551e29(0x1d6)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object['entries'](markets)[_0x551e29(0x1c7)](_0x3c32d1=>{const _0x4e333e=_0x551e29;_0x3c32d1[0x1][_0x4e333e(0xb5)]&&_0x3c32d1[0x1]['spot']&&allSymbols['push'](_0x3c32d1[0x0]);});}function validateSymbols(_0x100425){const _0x351ffc=_0x1dc520;let _0x3993ae=[];return _0x100425[_0x351ffc(0x1c7)](_0x462a72=>{const _0x8edfd=_0x351ffc;!allSymbols[_0x8edfd(0x1bb)](_0x462a72)?logHistory('error',_0x8edfd(0x13a)+_0x462a72+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x3993ae[_0x8edfd(0x1ed)](_0x462a72);}),_0x3993ae;}async function initclient(){const _0x47a405=_0x1dc520;proxyEmit(_0x47a405(0x161),emittedConfiguration()),proxyEmit(_0x47a405(0x111),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x47a405(0x232),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x19286c=getNormalizedPerformance();emitPerformance(_0x19286c),getStartingBalances(_0x19286c);}async function toggleBotMode(){const _0x1235e6=_0x1dc520;let _0x208cb5=dbConfig[_0x1235e6(0xd3)](_0x1235e6(0x1e0))[_0x1235e6(0xcc)]({'botID':botID})['value']();if(_0x208cb5){const _0x25a9cf=!_0x208cb5[_0x1235e6(0x140)];dbConfig[_0x1235e6(0xd3)](_0x1235e6(0x1e0))[_0x1235e6(0xcc)]({'botID':botID})[_0x1235e6(0x179)]({'headless':_0x25a9cf})[_0x1235e6(0xd1)](),config[_0x1235e6(0x140)]=_0x25a9cf,proxyEmit(_0x1235e6(0x161),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x27ca97=_0x1dc520;process[_0x27ca97(0x19d)]({'updatebotmanager':!![]},_0xab03b4=>{}),logger[_0x27ca97(0x20c)](_0x27ca97(0x1ab)+config['headless']);}async function loadCoins(_0x585eaf){const _0x1bdab5=_0x1dc520;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x4ad29e,_0x23e967=0x0,_0x2e1bea=0x0;_0x585eaf[_0x1bdab5(0x1c7)](_0x2e5c56=>{loading['remainingSymbols']['push'](_0x2e5c56);}),loadingCanceled=![];let _0x23978f=![];while(_0x4ad29e!=_0x585eaf[_0x1bdab5(0xaf)]+maxLoadingProgress){_0x4ad29e=loadingProgress,_0x585eaf[_0x1bdab5(0x1c7)](_0x437c49=>{const _0x55f712=_0x1bdab5;if(gTicker[noslash(_0x437c49)]){loading[_0x55f712(0x112)]=loading[_0x55f712(0x112)][_0x55f712(0x208)](_0x3f0681=>_0x3f0681!=_0x437c49);if(!watchedSymbols[_0x55f712(0x1bb)](_0x437c49))watchedSymbols[_0x55f712(0x1ed)](_0x437c49);_0x4ad29e++;}}),loading[_0x1bdab5(0x172)]=Math[_0x1bdab5(0xc4)](_0x4ad29e/(_0x585eaf[_0x1bdab5(0xaf)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x2e1bea>0x1e*0x5&&(loading[_0x1bdab5(0x11a)]=!![],emitLoadingProgress()),_0x2e1bea>0x78*0x5&&!_0x23978f&&(_0x23978f=!![],logHistory('error',_0x1bdab5(0x8c)+loading[_0x1bdab5(0x112)][_0x1bdab5(0x15e)](',\x20')+_0x1bdab5(0xb2)),logHistory(_0x1bdab5(0x98),_0x1bdab5(0x97)+loadCoinsRetryInterval/0xea60+_0x1bdab5(0x12d)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x1bdab5(0x1d6)]=!![],emitLoadingProgress();break;}else _0x23e967!=loading[_0x1bdab5(0x172)]&&(_0x23e967=loading['progress'],emitLoadingProgress()),_0x2e1bea++,await sleep(0xc8);}_0x4ad29e==_0x585eaf[_0x1bdab5(0xaf)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1bdab5(0x19d)]({'status':_0x1bdab5(0xdd),'live':'running'},_0x59cad9=>{}),_0x23978f&&logHistory('success',_0x1bdab5(0x144)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4b0e1c=_0x1dc520;proxyEmit(_0x4b0e1c(0x161),{...emittedConfiguration(),'configstate':_0x4b0e1c(0x131)});}function emitLoadingProgress(){const _0x193e57=_0x1dc520;proxyEmit(_0x193e57(0x187),loading);}async function getFiat(){const _0x5a92a8=_0x1dc520;let _0x56c28a=gTicker[stablecoins[_0x5a92a8(0x1a1)]['coin']],_0x407fa1=gTicker[stablecoins['usd'][_0x5a92a8(0x11f)]];return{'eur':Number(_0x56c28a),'usd':Number(_0x407fa1)};}function capitalize(_0x55dd83){const _0x18a78a=_0x1dc520;return _0x55dd83[_0x18a78a(0x170)](0x0,0x1)[_0x18a78a(0x141)]()+_0x55dd83[_0x18a78a(0x170)](0x1);}function supportedExchanges(){const _0x4c92de=_0x1dc520,_0x84614a=['ws',_0x4c92de(0x16e),_0x4c92de(0x197),'watchTrades','watchOrders',_0x4c92de(0x1b8),'createOrder',_0x4c92de(0x9b),_0x4c92de(0xcf)];let _0x4ccc27=[],_0x5161ac=[],_0x461fb2=ccxt[_0x4c92de(0x1c1)][_0x4c92de(0x111)];_0x461fb2[_0x4c92de(0x1c7)](_0x4258ab=>{const _0x308858=_0x4c92de;try{const _0x99c094=new ccxt[(_0x308858(0x1c1))][_0x4258ab]();_0x5161ac[_0x308858(0x1ed)](_0x99c094);}catch(_0x2f0f7c){}}),_0x5161ac[_0x4c92de(0x1c7)](_0xc57e19=>{const _0x645124=_0x4c92de;let _0x5e7a10=0x0;_0x84614a[_0x645124(0x1c7)](_0xf3e985=>{const _0x222f70=_0x645124;_0xf3e985 in _0xc57e19[_0x222f70(0xfe)]&&_0xc57e19[_0x222f70(0xfe)][_0xf3e985]&&_0x5e7a10++;}),_0x5e7a10==_0x84614a[_0x645124(0xaf)]&&_0x4ccc27[_0x645124(0x1ed)](capitalize(_0xc57e19['id']));});let _0x530e2d=[];return _0x461fb2['forEach'](_0x294aeb=>{const _0x186997=_0x4c92de;_0x294aeb=capitalize(_0x294aeb);if(!_0x4ccc27[_0x186997(0x1bb)](_0x294aeb))_0x530e2d[_0x186997(0x1ed)](_0x294aeb);}),_0x4ccc27;}function setStartDatePerformance(){const _0x21c96f=_0x1dc520;if(config&&config['liquidity'][0x0][_0x21c96f(0x1fe)][_0x21c96f(0xaf)]!=0x0){const _0x3df3b1=config[_0x21c96f(0x10d)][0x0][_0x21c96f(0x1fe)];dbPerformance[_0x21c96f(0xd3)](_0x21c96f(0x1ea))[_0x21c96f(0xcc)]({'date':config[_0x21c96f(0x1f9)]})[_0x21c96f(0x179)]({'coins':_0x3df3b1})[_0x21c96f(0xd1)]();}}async function recreateCoinResults(){const _0x34f95f=_0x1dc520;recreationNeeded=![];let _0x401a82,_0x14ca5e=[];try{for(const _0x18b93b of currentCoins){if(_0x18b93b[_0x34f95f(0x11f)]!=config[_0x34f95f(0x103)]){let _0x2a8ac6=0x0,_0x50784a,_0x6e40de;_0x401a82=await getAllEventOrders(_0x18b93b[_0x34f95f(0xfa)]);if(_0x401a82[_0x34f95f(0xaf)]>0x0)_0x401a82[_0x34f95f(0x1c7)](_0x2da140=>{const _0x2afa78=_0x34f95f,_0x163531=_0x18b93b['symbol'][_0x2afa78(0x1bb)](config['basecoin']+'/');_0x14ca5e['push']({'datetime':_0x2da140['datetime'],'coin':_0x18b93b[_0x2afa78(0x11f)],'symbol':_0x18b93b[_0x2afa78(0xfa)],'side':_0x2da140[_0x2afa78(0xf2)],'reverse':_0x163531,'amount':formatResult(_0x2da140[_0x2afa78(0x7b)],0x8),'filled':formatResult(_0x2da140['filled'],0x8),'price':formatResult(_0x2da140[_0x2afa78(0xe0)],0x8)}),_0x2a8ac6=_0x2da140[_0x2afa78(0xf2)]==_0x2afa78(0x92)?_0x2a8ac6+_0x2da140[_0x2afa78(0x7b)]:_0x2a8ac6-_0x2da140[_0x2afa78(0x7b)];if(!_0x6e40de)_0x6e40de=_0x2da140[_0x2afa78(0xe0)];});_0x50784a=_0x18b93b['number']-_0x2a8ac6;let _0x24082d;config[_0x34f95f(0x10d)][_0x34f95f(0x1c7)](_0x3aa28c=>{const _0x1a1161=_0x34f95f;!_0x24082d&&(_0x24082d=_0x3aa28c[_0x1a1161(0x1fe)][_0x1a1161(0xcc)](_0x245c53=>_0x245c53[_0x1a1161(0x11f)]==_0x18b93b[_0x1a1161(0x11f)]),_0x24082d&&(_0x50784a=_0x24082d[_0x1a1161(0x180)],_0x6e40de=_0x24082d['price']));});let _0x939658=dbCoinResults[_0x34f95f(0xd3)]('coins')[_0x34f95f(0xcc)]({'coin':_0x18b93b[_0x34f95f(0x11f)]})[_0x34f95f(0x1d8)]();_0x939658={'coin':_0x18b93b['coin'],'number':_0x50784a,'breakeven':_0x6e40de,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x34f95f(0xd3)](_0x34f95f(0x7a))[_0x34f95f(0xcc)]({'coin':_0x18b93b[_0x34f95f(0x11f)]})['assign'](_0x939658)[_0x34f95f(0xd1)]();}}_0x14ca5e[_0x34f95f(0x188)]((_0x32fb11,_0x185f8c)=>_0x32fb11[_0x34f95f(0x11b)]>_0x185f8c[_0x34f95f(0x11b)]?0x1:_0x185f8c[_0x34f95f(0x11b)]>_0x32fb11[_0x34f95f(0x11b)]?-0x1:0x0);let _0x3feaef=0x0;for(let _0xe7ac54 of _0x14ca5e){await updateCoinResults(_0xe7ac54,!![]);}}catch(_0xedf140){await handleError(_0xedf140,_0x34f95f(0x19b));}}async function getAllEventOrders(_0x3ff16c){const _0x53e301=_0x1dc520;let _0x765edc=[],_0x4e013d=dbLogs[_0x53e301(0xd3)](_0x53e301(0xe5))[_0x53e301(0x208)](_0x3bf942=>{const _0x27bb8a=_0x53e301,_0x30ac1a=_0x3bf942[_0x27bb8a(0x1a7)][_0x27bb8a(0x185)]();return _0x30ac1a[_0x27bb8a(0x1bb)](_0x3ff16c[_0x27bb8a(0x185)]())&&(_0x30ac1a['includes'](_0x27bb8a(0x225))&&_0x30ac1a[_0x27bb8a(0x1bb)]('order')||_0x30ac1a[_0x27bb8a(0x1bb)](_0x27bb8a(0x7b))&&_0x30ac1a[_0x27bb8a(0x1bb)](_0x27bb8a(0x155)));})['sortBy'](_0x53e301(0x1be))[_0x53e301(0x1d8)]();return _0x4e013d['forEach'](_0x3f945a=>{const _0x3bbe57=_0x53e301,_0x2ccf38=_0x3f945a[_0x3bbe57(0x1a7)]['includes']('sell')?_0x3bbe57(0xbc):_0x3bbe57(0x92),_0xbf04f2=/#([0-9]|\.)+\s/i,_0x128138=Number(_0xbf04f2[_0x3bbe57(0x226)](_0x3f945a[_0x3bbe57(0x1a7)])[0x0]['slice'](0x1)),_0x48c9b3=/@([0-9]|\.)+$/i,_0x240745=Number(_0x48c9b3[_0x3bbe57(0x226)](_0x3f945a[_0x3bbe57(0x1a7)])[0x0]['slice'](0x1));_0x765edc[_0x3bbe57(0x1ed)]({'datetime':_0x3f945a[_0x3bbe57(0x1be)],'coin':symbolToCoin(_0x3ff16c),'symbol':_0x3ff16c,'side':_0x2ccf38,'amount':_0x128138,'filled':_0x128138,'price':_0x240745});}),_0x765edc;}async function validate24hChanges(){const _0x42ef8=_0x1dc520;for(const _0x122a9 of currentCoins){if(_0x122a9[_0x42ef8(0x11f)]!=config['basecoin']){let _0x5c5d15;_0x122a9['reverse']?_0x5c5d15=formatResult((0x1/(gChange[_0x122a9[_0x42ef8(0xfa)]]/0x64+0x1)-0x1)*0x64,0x3):_0x5c5d15=gChange[_0x122a9['symbol']],_0x5c5d15<config[_0x42ef8(0x164)]&&(logHistory(_0x42ef8(0x98),_0x122a9[_0x42ef8(0x11f)]+_0x42ef8(0xe8)+_0x5c5d15+'%'),logHistory(_0x42ef8(0x98),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x42ef8(0x98),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3894fc,_0x461813){const _0x113e89=_0x1dc520;if(!_0x3894fc)return!![];const _0x33d9f9=_0x461813[_0x113e89(0x1b3)]('.'),_0x2fe46d=_0x3894fc[_0x113e89(0x1b3)]('.');for(var _0x329298=0x0;_0x329298<_0x2fe46d[_0x113e89(0xaf)];_0x329298++){const _0x225b58=~~_0x2fe46d[_0x329298],_0x16c26e=~~_0x33d9f9[_0x329298];if(_0x225b58<_0x16c26e)return!![];if(_0x225b58>_0x16c26e)return![];}return![];}async function oneTimeMigration(){const _0x576a04=_0x1dc520;let _0x27afd1=dbLogs[_0x576a04(0xd3)](_0x576a04(0x1ae))[_0x576a04(0x1d8)]();if(isOlderVersion(_0x27afd1,_0x576a04(0x143))){let _0x1a240d=[];const _0x5114f2=dbLogs[_0x576a04(0xd3)](_0x576a04(0xe5))[_0x576a04(0x1d8)]();_0x5114f2['forEach'](_0x59e86f=>{const _0x2d07e3=_0x576a04;_0x1a240d[_0x2d07e3(0x1ed)]({'time':_0x59e86f[_0x2d07e3(0x1be)],'type':_0x59e86f[_0x2d07e3(0x1e1)],'event':_0x59e86f[_0x2d07e3(0x1a7)]});}),dbLogs[_0x576a04(0xd3)](_0x576a04(0xe5))[_0x576a04(0x179)](_0x1a240d)['write']();}let _0x57aabf=dbConfig[_0x576a04(0xd3)]('version')[_0x576a04(0x1d8)]();if(isOlderVersion(_0x57aabf,_0x576a04(0x143))){let _0x3f541e=dbConfig[_0x576a04(0xd3)]('bot')['find']({'botID':botID})['value']();if(_0x3f541e){let _0x3b97ad=[];_0x3f541e[_0x576a04(0x1c5)][_0x576a04(0x1c7)](_0x4d00f0=>{const _0x272881=_0x576a04;_0x3b97ad[_0x272881(0x1ed)]({'coin':_0x4d00f0[_0x272881(0x11f)],'number':_0x4d00f0[_0x272881(0x15c)],'price':_0x4d00f0[_0x272881(0xfc)]}),delete _0x4d00f0[_0x272881(0x15c)],delete _0x4d00f0['startprice'];});if(_0x3b97ad[_0x576a04(0xaf)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x576a04(0x1a8)),JSON['stringify'](_0x3b97ad,null,0x4),function(_0x110bb1){if(_0x110bb1){}});const _0x54e9c2=(_0x295256,_0x194a60)=>{const _0x16e622=_0x576a04;let _0x1756af=[];_0x194a60[_0x16e622(0x1c7)](_0x1e5720=>{const _0x3e07fa=_0x16e622,_0x3249ce=_0x295256[_0x3e07fa(0xcc)](_0x40dc0c=>_0x40dc0c[_0x3e07fa(0x11f)]==_0x1e5720['coin']);if(!_0x3249ce)_0x1756af[_0x3e07fa(0x1ed)](_0x1e5720);});let _0x233c6a=[];return _0x295256[_0x16e622(0x1c7)](_0x5364fa=>{const _0x493003=_0x16e622,_0x250366=_0x194a60[_0x493003(0xcc)](_0xacd4ac=>_0xacd4ac[_0x493003(0x11f)]==_0x5364fa[_0x493003(0x11f)]);if(!_0x250366||_0x250366[_0x493003(0x180)]==0x0&&_0x5364fa[_0x493003(0x180)]!=0x0)_0x233c6a['push'](_0x5364fa);}),{'missingDay1':_0x1756af,'notInDay2':_0x233c6a};},_0x19fcd3=dbPerformance[_0x576a04(0xd3)](_0x576a04(0x1ea))[_0x576a04(0x1c3)]()[_0x576a04(0x1d8)]();if(_0x19fcd3[_0x576a04(0xaf)]>0x1){const {missingDay1:_0x118c17,notInDay2:_0x3cc8e1}=_0x54e9c2(_0x3b97ad,_0x19fcd3[0x1][_0x576a04(0x7a)]);_0x3b97ad=[..._0x3b97ad,..._0x118c17],_0x3cc8e1[_0x576a04(0x1c7)](_0x149b89=>{const _0x52bb19=_0x576a04;let _0x402c20=_0x3b97ad[_0x52bb19(0x206)](_0x25dcd0=>_0x25dcd0[_0x52bb19(0x11f)]==_0x149b89[_0x52bb19(0x11f)]);_0x402c20!=-0x1&&_0x3b97ad[_0x52bb19(0x194)](_0x402c20,0x1);});}_0x3b97ad[_0x576a04(0x188)]((_0x35ca3a,_0x268be7)=>_0x35ca3a[_0x576a04(0x11f)]>_0x268be7[_0x576a04(0x11f)]?0x1:_0x268be7[_0x576a04(0x11f)]>_0x35ca3a[_0x576a04(0x11f)]?-0x1:0x0);let _0xde2a47=[{'date':_0x3f541e['startdate'],'changes':_0x3b97ad}];_0x19fcd3[_0x576a04(0xaf)]>0x2&&_0x19fcd3[_0x576a04(0x1c7)]((_0x3df096,_0x3325d0)=>{const _0x46b9f5=_0x576a04;if(_0x3325d0>0x0&&_0x3325d0<_0x19fcd3[_0x46b9f5(0xaf)]-0x1){const {missingDay1:_0x25e138,notInDay2:_0x5c48f3}=_0x54e9c2(_0x19fcd3[_0x3325d0][_0x46b9f5(0x7a)],_0x19fcd3[_0x3325d0+0x1][_0x46b9f5(0x7a)]);_0x3b97ad=[],(_0x25e138[_0x46b9f5(0xaf)]!=0x0||_0x5c48f3[_0x46b9f5(0xaf)]!=0x0)&&(_0x25e138[_0x46b9f5(0xaf)]!=0x0&&_0x3b97ad[_0x46b9f5(0x1ed)](..._0x25e138),_0x5c48f3[_0x46b9f5(0xaf)]!=0x0&&(_0x5c48f3['forEach'](_0x393d6f=>{const _0x21b0ee=_0x46b9f5;_0x393d6f['number']=-_0x393d6f[_0x21b0ee(0x180)];}),_0x3b97ad[_0x46b9f5(0x1ed)](..._0x5c48f3)),_0x3b97ad[_0x46b9f5(0x188)]((_0x55ad8f,_0x184b11)=>_0x55ad8f[_0x46b9f5(0x11f)]>_0x184b11['coin']?0x1:_0x184b11[_0x46b9f5(0x11f)]>_0x55ad8f[_0x46b9f5(0x11f)]?-0x1:0x0),_0xde2a47[_0x46b9f5(0x1ed)]({'date':_0x19fcd3[_0x3325d0+0x1][_0x46b9f5(0x8f)],'changes':_0x3b97ad}));}}),dbConfig['get'](_0x576a04(0x1e0))[_0x576a04(0xcc)]({'botID':botID})[_0x576a04(0x179)]({..._0x3f541e,'liquidity':_0xde2a47})[_0x576a04(0xd1)]();}}if(isOlderVersion(_0x57aabf,'2.6.0')){let _0x4ef5c8=dbConfig[_0x576a04(0xd3)]('bot')[_0x576a04(0xcc)]({'botID':botID})['value']();if(_0x4ef5c8){const _0x471594=_0x4ef5c8[_0x576a04(0x1b5)],_0x2add2a=_0x471594?capitalize(_0x471594):_0x576a04(0x1c6);dbConfig[_0x576a04(0xd3)](_0x576a04(0x1e0))[_0x576a04(0xcc)]({'botID':botID})['assign']({'exchange':_0x2add2a})[_0x576a04(0xd1)]();}}if(isOlderVersion(_0x57aabf,_0x576a04(0x7c))){let _0x5171d5=dbConfig[_0x576a04(0xd3)]('bot')[_0x576a04(0xcc)]({'botID':botID})['value']();if(_0x5171d5){const _0x1390bf=_0x5171d5[_0x576a04(0x113)],_0x2da0fd=_0x1390bf?_0x576a04(0x76):![];dbConfig[_0x576a04(0xd3)](_0x576a04(0x1e0))[_0x576a04(0xcc)]({'botID':botID})['assign']({'marketcapEnabled':_0x2da0fd})[_0x576a04(0xd1)]();}}if(isOlderVersion(_0x57aabf,'2.6.23')){let _0x553fbb=dbConfig[_0x576a04(0xd3)](_0x576a04(0x1e0))['find']({'botID':botID})[_0x576a04(0x1d8)]();if(_0x553fbb){const _0x10fce1=_0x553fbb[_0x576a04(0x205)],_0x14d3f6=_0x10fce1?_0x576a04(0x217):![];dbConfig[_0x576a04(0xd3)](_0x576a04(0x1e0))['find']({'botID':botID})[_0x576a04(0x179)]({'autoliquidity':_0x14d3f6})[_0x576a04(0xd1)]();}}let _0x3b9380=dbPerformance['get']('version')['value']();isOlderVersion(_0x3b9380,_0x576a04(0x143))&&setStartDatePerformance();let _0x3135d5=dbCoinResults['get']('version')['value']();if(isOlderVersion(_0x3135d5,'2.5.0')){let _0x43463a=dbCoinResults[_0x576a04(0xd3)](_0x576a04(0x7a))[_0x576a04(0x1d8)]();if(_0x43463a[_0x576a04(0xaf)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x487407=_0x1dc520;dbConfig[_0x487407(0x234)]('version',serverversion)[_0x487407(0xd1)](),dbPerformance[_0x487407(0x234)](_0x487407(0x1ae),serverversion)[_0x487407(0xd1)](),dbLogs[_0x487407(0x234)](_0x487407(0x1ae),serverversion)[_0x487407(0xd1)](),dbCoinResults[_0x487407(0x234)]('version',serverversion)[_0x487407(0xd1)]();}function getConfiguration(_0x40a725){const _0x2c680a=_0x1dc520;let _0x62933=dbConfig[_0x2c680a(0xd3)](_0x2c680a(0x1e0))[_0x2c680a(0xcc)]({'botID':_0x40a725})[_0x2c680a(0x1d8)]();if(_0x62933){let _0x51425b=![];typeof _0x62933[_0x2c680a(0x109)]==_0x2c680a(0x157)&&(_0x62933={..._0x62933,'threshold':Number(_0x62933['threshold'])},_0x51425b=!![]),_0x62933['change24h']==undefined&&(_0x62933={..._0x62933,'change24h':-0x14},_0x51425b=!![]),_0x62933['fiat']==undefined&&(_0x62933={..._0x62933,'fiat':_0x2c680a(0xae)},_0x51425b=!![]),_0x62933[_0x2c680a(0x199)]==undefined&&(_0x62933={..._0x62933,'onepagemode':settings['onepagemode']},_0x51425b=!![]),_0x62933[_0x2c680a(0x99)]==undefined&&(_0x62933={..._0x62933,'colorscheme':_0x2c680a(0x88)},_0x51425b=!![]),_0x62933[_0x2c680a(0x205)]==undefined&&(_0x62933={..._0x62933,'autoliquidity':_0x2c680a(0x217)},_0x51425b=!![]),_0x62933['marketcapApi']==undefined&&(_0x62933={..._0x62933,'marketcapApi':settings[_0x2c680a(0xd9)]?!![]:![]},_0x51425b=!![]),_0x62933[_0x2c680a(0x113)]==undefined&&(_0x62933={..._0x62933,'marketcapEnabled':![]},_0x51425b=!![]),_0x51425b&&(_0x62933={'botID':_0x62933['botID'],'exchange':_0x62933[_0x2c680a(0x1b5)],'apiKey':_0x62933['apiKey'],'apiSecret':_0x62933[_0x2c680a(0xa6)],'apiPassword':_0x62933[_0x2c680a(0xe7)],'basecoin':_0x62933[_0x2c680a(0x103)],'botname':_0x62933[_0x2c680a(0x230)],'showname':_0x62933[_0x2c680a(0x12c)],'threshold':_0x62933[_0x2c680a(0x109)],'ordertype':_0x62933['ordertype'],'timeout':_0x62933[_0x2c680a(0x11a)],'fiat':_0x62933[_0x2c680a(0x159)],'startdate':_0x62933['startdate'],'recreate':_0x62933[_0x2c680a(0x1a0)],'timeshift':_0x62933[_0x2c680a(0x20a)],'onepagemode':_0x62933[_0x2c680a(0x199)],'headless':_0x62933[_0x2c680a(0x140)],'cooldown':_0x62933[_0x2c680a(0x1ee)],'change24h':_0x62933['change24h'],'emojibuy':_0x62933[_0x2c680a(0x133)],'emojisell':_0x62933[_0x2c680a(0x105)],'colorscheme':_0x62933[_0x2c680a(0x99)],'marketcapApi':_0x62933['marketcapApi'],'marketcapEnabled':_0x62933['marketcapEnabled'],'portfolio':_0x62933[_0x2c680a(0x1c5)],'autoliquidity':_0x62933['autoliquidity'],'liquidity':_0x62933[_0x2c680a(0x10d)],'openOrders':_0x62933['openOrders']},dbConfig[_0x2c680a(0xd3)](_0x2c680a(0x1e0))['remove']()[_0x2c680a(0xd1)](),dbConfig['get'](_0x2c680a(0x1e0))[_0x2c680a(0x1ed)](_0x62933)[_0x2c680a(0xd1)]());}else _0x62933={'botID':_0x40a725,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2c680a(0xc3)+_0x40a725,'showname':![],'threshold':0x3,'ordertype':_0x2c680a(0x225),'timeout':0x14,'fiat':_0x2c680a(0xae),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2c680a(0x20a)],'onepagemode':settings[_0x2c680a(0x199)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2c680a(0x88),'marketcapApi':settings[_0x2c680a(0xd9)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x62933;}function emittedConfiguration(){const _0x3efeba=_0x1dc520;let _0x375e55;if(config[_0x3efeba(0x189)]=='')_0x375e55={...config,'configstate':_0x3efeba(0xb9)};else config[_0x3efeba(0x189)]==_0x3efeba(0x173)?_0x375e55={...config,'configstate':'recovery'}:(_0x375e55={...config,'apiKey':'************','apiSecret':'************'},config[_0x3efeba(0xe7)]&&(_0x375e55[_0x3efeba(0xe7)]=_0x3efeba(0x79)));return _0x375e55['enableFiatToggle']=enableFiatToggle,_0x375e55;}function getSettings(){const _0x12cf03=_0x1dc520;return dbSettings['get'](_0x12cf03(0x12f))[_0x12cf03(0x1d8)]();}function getSecure(){const _0x13e9dc=_0x1dc520;return dbSecure[_0x13e9dc(0xd3)]('secure')['value']()||{};}function updateTimeshift(_0x4be6cc){const _0x481bc6=_0x1dc520;let _0x3c7d7f=dbConfig[_0x481bc6(0xd3)](_0x481bc6(0x1e0))[_0x481bc6(0xcc)]({'botID':botID})[_0x481bc6(0x1d8)]();_0x3c7d7f&&dbConfig[_0x481bc6(0xd3)]('bot')[_0x481bc6(0xcc)]({'botID':botID})[_0x481bc6(0x179)]({'timeshift':_0x4be6cc})[_0x481bc6(0xd1)](),config[_0x481bc6(0x20a)]=_0x4be6cc,proxyEmit(_0x481bc6(0x161),emittedConfiguration());}function updateOnepagemode(_0x3f023f){const _0x5b44b4=_0x1dc520;let _0x34e32d=dbConfig[_0x5b44b4(0xd3)](_0x5b44b4(0x1e0))[_0x5b44b4(0xcc)]({'botID':botID})[_0x5b44b4(0x1d8)]();_0x34e32d&&dbConfig[_0x5b44b4(0xd3)](_0x5b44b4(0x1e0))['find']({'botID':botID})[_0x5b44b4(0x179)]({'onepagemode':_0x3f023f})[_0x5b44b4(0xd1)](),config[_0x5b44b4(0x199)]=_0x3f023f,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x4928c1){const _0x352668=_0x1dc520,_0x10c333=_0x4928c1?!![]:![];let _0x6ca6c6=dbConfig['get'](_0x352668(0x1e0))[_0x352668(0xcc)]({'botID':botID})[_0x352668(0x1d8)]();_0x6ca6c6&&dbConfig[_0x352668(0xd3)](_0x352668(0x1e0))['find']({'botID':botID})[_0x352668(0x179)]({'marketcapApi':_0x10c333})[_0x352668(0xd1)](),config['marketcapApi']=_0x10c333,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0xbd5466){const _0x3e0f9e=_0x1dc520;logger[_0x3e0f9e(0x20c)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x108112=![],_0x3c6190=![],_0x2d7f68=[];_0xbd5466[_0x3e0f9e(0x1c5)]['forEach'](_0x5e7970=>{const _0x2a778d=_0x3e0f9e;if(!_0x5e7970[_0x2a778d(0xb7)]&&_0x5e7970[_0x2a778d(0x11f)]!=_0xbd5466[_0x2a778d(0x103)])_0x2d7f68['push'](_0x5e7970['symbol']);}),_0x2d7f68[_0x3e0f9e(0x1c7)](_0x2e1c00=>{const _0x597d7e=_0x3e0f9e,_0x48088b=currentCoins[_0x597d7e(0xcc)](_0x4b7bc8=>_0x4b7bc8[_0x597d7e(0xfa)]==_0x2e1c00);!_0x48088b&&(_0x108112=!![]);}),currentCoins[_0x3e0f9e(0x1c7)](_0x4ed0ce=>{const _0x3193b6=_0x3e0f9e;if(_0x4ed0ce[_0x3193b6(0x11f)]!=config['basecoin']){const _0x4795a3=_0x2d7f68['find'](_0xde859b=>_0xde859b==_0x4ed0ce[_0x3193b6(0xfa)]);!_0x4795a3&&(_0x108112=!![]);}}),_0xbd5466[_0x3e0f9e(0x1c5)]['forEach'](_0x3d9d66=>{const _0xe3be2=_0x3e0f9e,_0x588862=config[_0xe3be2(0x1c5)][_0xe3be2(0xcc)](_0x42dae9=>_0x42dae9[_0xe3be2(0x11f)]==_0x3d9d66[_0xe3be2(0x11f)]);if(_0x588862&&_0x3d9d66[_0xe3be2(0x104)]!=_0x588862[_0xe3be2(0x104)])_0x3c6190=!![];});let _0x131753=dbConfig[_0x3e0f9e(0xd3)](_0x3e0f9e(0x1e0))[_0x3e0f9e(0xcc)]({'botID':botID})['value']();_0xbd5466={..._0xbd5466,'apiKey':decryptRSA(secure[_0x3e0f9e(0x7d)],_0xbd5466[_0x3e0f9e(0x189)]),'apiSecret':decryptRSA(secure[_0x3e0f9e(0x7d)],_0xbd5466[_0x3e0f9e(0xa6)])};_0xbd5466['apiPassword']&&(_0xbd5466[_0x3e0f9e(0xe7)]=decryptRSA(secure['privateKey'],_0xbd5466['apiPassword']));let _0x4bbd04=![];if(_0x131753){_0xbd5466[_0x3e0f9e(0x189)]==_0x3e0f9e(0x79)?_0xbd5466[_0x3e0f9e(0x189)]=config[_0x3e0f9e(0x189)]:_0x4bbd04=!![];_0xbd5466[_0x3e0f9e(0xa6)]==_0x3e0f9e(0x79)?_0xbd5466['apiSecret']=config[_0x3e0f9e(0xa6)]:_0x4bbd04=!![];if(_0xbd5466[_0x3e0f9e(0xe7)]=='************')_0xbd5466[_0x3e0f9e(0xe7)]=config['apiPassword'];else{if(_0xbd5466[_0x3e0f9e(0xe7)])_0x4bbd04=!![];}dbConfig['get'](_0x3e0f9e(0x1e0))['find']({'botID':botID})['assign'](_0xbd5466)[_0x3e0f9e(0xd1)]();}else dbConfig['get'](_0x3e0f9e(0x1e0))[_0x3e0f9e(0x1ed)](_0xbd5466)[_0x3e0f9e(0xd1)](),_0x4bbd04=!![],process[_0x3e0f9e(0x19d)]({'status':_0x3e0f9e(0xdd),'live':_0x3e0f9e(0x15d)},_0x15cbe0=>{});process[_0x3e0f9e(0x19d)]({'botname':_0xbd5466[_0x3e0f9e(0x230)]},_0x32a6a3=>{}),config={..._0xbd5466},updateBotManager(),proxyEmit(_0x3e0f9e(0x202)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4bbd04)!_0x131753?await reset(!![]):getBalances();else _0x108112||_0x3c6190?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x24f869){const _0x5099c6=_0x1dc520,_0x108c1b={...config,'headless':_0x24f869[_0x5099c6(0x140)]};let _0x5bb9f1=dbConfig['get'](_0x5099c6(0x1e0))[_0x5099c6(0xcc)]({'botID':botID})[_0x5099c6(0x1d8)]();_0x5bb9f1&&dbConfig['get'](_0x5099c6(0x1e0))['find']({'botID':botID})[_0x5099c6(0x179)](_0x108c1b)['write'](),config={..._0x108c1b},updateBotManager(),proxyEmit(_0x5099c6(0x161),emittedConfiguration());}async function storeFiat(_0x1932d7){const _0x881adf=_0x1dc520,_0x1b2b00={...config,'fiat':_0x1932d7};let _0x2ab077=dbConfig['get'](_0x881adf(0x1e0))[_0x881adf(0xcc)]({'botID':botID})[_0x881adf(0x1d8)]();_0x2ab077&&dbConfig[_0x881adf(0xd3)]('bot')[_0x881adf(0xcc)]({'botID':botID})[_0x881adf(0x179)](_0x1b2b00)[_0x881adf(0xd1)](),config={..._0x1b2b00},proxyEmit(_0x881adf(0x161),emittedConfiguration());}function resetHistory(){const _0x137fe5=_0x1dc520;logger['full']('Resetting\x20bot\x20history');try{if(fs[_0x137fe5(0x1b4)](path['join'](configpath,_0x137fe5(0x1e8)+botID+_0x137fe5(0x13e))))fs[_0x137fe5(0xef)](path[_0x137fe5(0x15e)](configpath,'bot-'+botID+_0x137fe5(0x13e)));if(fs[_0x137fe5(0x1b4)](path['join'](configpath,_0x137fe5(0x1e8)+botID+_0x137fe5(0x139))))fs[_0x137fe5(0xef)](path[_0x137fe5(0x15e)](configpath,_0x137fe5(0x1e8)+botID+_0x137fe5(0x139)));if(fs[_0x137fe5(0x1b4)](path[_0x137fe5(0x15e)](configpath,_0x137fe5(0x1e8)+botID+'-results.json')))fs[_0x137fe5(0xef)](path['join'](configpath,_0x137fe5(0x1e8)+botID+'-results.json'));}catch(_0x1f25d6){if(_0x1f25d6)logger[_0x137fe5(0x1b9)](_0x137fe5(0x153),_0x1f25d6);}const _0x5e6994=getDate();let _0x245c8c=[];currentCoins[_0x137fe5(0x1c7)](_0x7c0e08=>{const _0x4807d0=_0x137fe5;_0x245c8c[_0x4807d0(0x1ed)]({'coin':_0x7c0e08[_0x4807d0(0x11f)],'number':_0x7c0e08[_0x4807d0(0x180)],'price':_0x7c0e08['last']});});let _0x3981b2=dbConfig[_0x137fe5(0xd3)]('bot')[_0x137fe5(0xcc)]({'botID':botID})['value']();_0x3981b2&&(dbConfig['get'](_0x137fe5(0x1e0))[_0x137fe5(0xcc)]({'botID':botID})[_0x137fe5(0x179)]({'liquidity':[{'date':_0x5e6994,'changes':_0x245c8c}]})[_0x137fe5(0xd1)](),config[_0x137fe5(0x10d)]=[]),restartBot(!![]);}function noslash(_0x3b5dd3){const _0x26843e=_0x1dc520;return _0x3b5dd3[_0x26843e(0x22c)]('/','');}function updateHighestFee(_0x31757f){const _0x4ec440=_0x1dc520;if(_0x31757f[_0x4ec440(0x142)]){let _0x5738a4={'filled':_0x31757f[_0x4ec440(0x7b)]*_0x31757f[_0x4ec440(0xe0)],'amount':_0x31757f[_0x4ec440(0x7b)]*_0x31757f['price'],'side':_0x31757f['side']==_0x4ec440(0xbc)?_0x4ec440(0x92):_0x4ec440(0xbc),'price':0x1/_0x31757f[_0x4ec440(0xe0)]};_0x31757f={..._0x31757f,..._0x5738a4};}const _0x3b445f=defaultFee*_0x31757f[_0x4ec440(0x7b)]*_0x31757f['price'];lastFees[_0x4ec440(0x171)][_0x4ec440(0xaf)]===0x14&&lastFees[_0x4ec440(0x171)]['shift'](),lastFees[_0x4ec440(0x171)][_0x4ec440(0x1ed)](_0x3b445f),lastFees[_0x4ec440(0x82)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x362249){const _0x3fd5ef=_0x1dc520;logger[_0x3fd5ef(0x20c)](_0x3fd5ef(0xff)+_0x362249['symbol']+'\x20|\x20'+_0x362249[_0x3fd5ef(0x191)]+_0x3fd5ef(0x1bc)+_0x362249[_0x3fd5ef(0x7b)]+_0x3fd5ef(0xee)+_0x362249[_0x3fd5ef(0xe9)]+'\x20|\x20'+_0x362249['id']);let _0x5ef33c=_0x362249[_0x3fd5ef(0x191)],_0x5d4a28=![];currentCoins[_0x3fd5ef(0x1c7)](_0x18e479=>{const _0x50fc11=_0x3fd5ef;_0x18e479['symbol']==_0x362249[_0x50fc11(0xfa)]&&(_0x5d4a28=!![]);});if(!_0x5d4a28)return;const _0x388a0c=currentCoins['find'](_0x4916d8=>_0x4916d8[_0x3fd5ef(0xfa)]==_0x362249[_0x3fd5ef(0xfa)]),_0x581632=_0x1ecebe=>{if(_0x388a0c)_0x388a0c['orderstatus']=_0x1ecebe;};let _0xdc1eee=![];for(const _0xa9e404 of lastOrders){const _0x2b679a=0x64,_0x486553=0x1388;let _0x4427d1=0x0;while(!_0xa9e404['orderId']&&_0x4427d1*_0x2b679a<_0x486553){_0x4427d1++,await sleep(_0x2b679a);}if(_0x4427d1>0x0)logger[_0x3fd5ef(0x20c)]('Waited\x20'+_0x4427d1*_0x2b679a/0x3e8+_0x3fd5ef(0x231));_0xa9e404[_0x3fd5ef(0x235)]==_0x362249['id']&&(_0xdc1eee=!![]);}if(_0x5ef33c==_0x3fd5ef(0x1bf)){_0x581632(_0x3fd5ef(0x1bf));if(_0x362249[_0x3fd5ef(0x7b)]>0x0){if(_0xdc1eee){setBlockTransactionDetection(!![]),logger[_0x3fd5ef(0x20c)](_0x3fd5ef(0x18a)+_0x362249['id']);const _0x5e6261=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5e6261,setBlockTransactionDetection(![]);}else logger[_0x3fd5ef(0x20c)](_0x3fd5ef(0xc0)+_0x362249['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5ef33c==_0x3fd5ef(0x8d)){_0x581632('canceled');const _0x3b6454=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b6454,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5ef33c==_0x3fd5ef(0xc8)){if(lastOrders)for(const _0x2b9d69 of lastOrders){if(_0x2b9d69[_0x3fd5ef(0x235)]==_0x362249['id']){logger[_0x3fd5ef(0x20c)](_0x3fd5ef(0xbf)+_0x362249['id']),_0xdc1eee=!![];if(_0x2b9d69[_0x3fd5ef(0x7b)]==0x0){setBlockTransactionDetection(!![]),logger[_0x3fd5ef(0x20c)](_0x3fd5ef(0x1e5)+_0x362249['id']);if(_0x362249['average'])_0x2b9d69[_0x3fd5ef(0xe0)]=_0x362249['average'];else{if(_0x362249[_0x3fd5ef(0xe0)])_0x2b9d69[_0x3fd5ef(0xe0)]=_0x362249[_0x3fd5ef(0xe0)];else{}}_0x2b9d69[_0x3fd5ef(0x7b)]=_0x362249[_0x3fd5ef(0x7b)],updateHighestFee(_0x2b9d69),_0x581632('filled'),await validateOrders();if(lockOrders==ORDERS[_0x3fd5ef(0x1aa)]){const _0x4f6e71=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4f6e71,setBlockTransactionDetection(![]);}_0x2b9d69[_0x3fd5ef(0x20d)]={'currency':_0x362249[_0x3fd5ef(0x20d)]?_0x362249[_0x3fd5ef(0x20d)][_0x3fd5ef(0x18d)]:null,'cost':_0x362249[_0x3fd5ef(0x20d)]?_0x362249[_0x3fd5ef(0x20d)][_0x3fd5ef(0xfd)]:0x0},await updateCoinResults(_0x2b9d69);}}}!_0xdc1eee&&(logger['debug'](_0x3fd5ef(0x1ff)+_0x362249['id']),_0x581632(_0x3fd5ef(0x7b)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0xe746c7=JSON[_0x3fd5ef(0x149)](lastBalances[_0x3fd5ef(0x1c5)]);const _0x4d77d8=_0xe746c7[_0x3fd5ef(0xcc)](_0x581311=>_0x581311[_0x3fd5ef(0xfa)]==_0x362249[_0x3fd5ef(0xfa)]);if(_0x4d77d8){if(_0x5ef33c==_0x3fd5ef(0x1bf))_0x4d77d8[_0x3fd5ef(0xdb)]=_0x4d77d8[_0x3fd5ef(0xdb)]==_0x3fd5ef(0x7b)?_0x3fd5ef(0x7b):_0x3fd5ef(0x1bf);else{if(_0x5ef33c==_0x3fd5ef(0x8d))_0x4d77d8[_0x3fd5ef(0xdb)]=_0x4d77d8[_0x3fd5ef(0xdb)]=='filled'?_0x3fd5ef(0x7b):'canceled';else _0x5ef33c==_0x3fd5ef(0xc8)&&(_0x4d77d8[_0x3fd5ef(0xdb)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x3fd5ef(0xad)](_0xe746c7)},proxyEmit(_0x3fd5ef(0x232),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x488eda=![];currentCoins['forEach'](_0x2e5798=>{const _0x201cb2=_0x2444;_0x488eda=allOpenOrders[_0x201cb2(0xcc)](_0x127e4c=>_0x127e4c[_0x201cb2(0xfa)]==_0x2e5798[_0x201cb2(0xfa)]),_0x2e5798[_0x201cb2(0xdb)]=_0x488eda?_0x201cb2(0x1bf):'none';});}async function getCoins(_0x560971=0x0,_0x1a9585=!![],_0x29e98e=config[_0x1dc520(0x103)]){const _0x19b6f9=_0x1dc520;let _0x49099f,_0x35e44d=[],_0x274864=[],_0x5d4d32=[];if(_0x560971)await sleep(_0x560971);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x49099f=await exchange[_0x19b6f9(0xcf)](),mybalances=_0x49099f[_0x19b6f9(0x1df)];for(const [_0x134911,_0xdb85cf]of Object[_0x19b6f9(0x1f4)](mybalances)){_0x5d4d32[_0x19b6f9(0x1ed)](_0x134911);}config[_0x19b6f9(0x1c5)][_0x19b6f9(0x1c7)](_0x10c88c=>{const _0x4cbd02=_0x19b6f9;!_0x5d4d32[_0x4cbd02(0x1bb)](_0x10c88c['coin'])&&(mybalances[_0x10c88c['coin']]=0x0);});if(_0x29e98e=='')for(const [_0x41c9be,_0x3fbe44]of Object[_0x19b6f9(0x1f4)](mybalances)){_0x3fbe44!=0x0&&_0x35e44d['push']({'coin':_0x41c9be});}else for(const [_0x5e05f0,_0x4a8bca]of Object['entries'](mybalances)){const _0x2e2b39=config[_0x19b6f9(0x1c5)][_0x19b6f9(0xcc)](_0x15a375=>_0x15a375[_0x19b6f9(0x11f)]==_0x5e05f0),_0x12f0d4=_0x5e05f0+'/'+_0x29e98e,_0x26eea3=_0x29e98e+'/'+_0x5e05f0,_0x4d5e5b=currentCoins[_0x19b6f9(0xcc)](_0x325308=>_0x325308[_0x19b6f9(0x11f)]==_0x5e05f0);if((_0x4a8bca!=0x0||_0x2e2b39)&&(allSymbols[_0x19b6f9(0x1bb)](_0x12f0d4)||_0x5e05f0==_0x29e98e))_0x4d5e5b?_0x35e44d[_0x19b6f9(0x1ed)]({..._0x4d5e5b,'number':Math['max'](_0x4a8bca+(_0x2e2b39&&_0x2e2b39[_0x19b6f9(0x104)]||0x0),0x0)}):_0x35e44d[_0x19b6f9(0x1ed)]({'coin':_0x5e05f0,'symbol':_0x12f0d4,'reverse':![],'number':Math[_0x19b6f9(0xa8)](_0x4a8bca+(_0x2e2b39&&_0x2e2b39[_0x19b6f9(0x104)]||0x0),0x0),'orderstatus':_0x19b6f9(0x150)});else{if((_0x4a8bca!=0x0||_0x2e2b39)&&allSymbols['includes'](_0x26eea3))_0x4d5e5b?_0x35e44d['push']({..._0x4d5e5b,'number':Math[_0x19b6f9(0xa8)](_0x4a8bca+(_0x2e2b39&&_0x2e2b39['offset']||0x0),0x0)}):_0x35e44d[_0x19b6f9(0x1ed)]({'coin':_0x5e05f0,'symbol':_0x26eea3,'reverse':!![],'number':Math[_0x19b6f9(0xa8)](_0x4a8bca+(_0x2e2b39&&_0x2e2b39[_0x19b6f9(0x104)]||0x0),0x0),'orderstatus':'none'});else _0x2e2b39&&_0x35e44d[_0x19b6f9(0x1ed)]({'coin':_0x2e2b39[_0x19b6f9(0x11f)],'symbol':_0x2e2b39[_0x19b6f9(0xfa)],'reverse':_0x2e2b39[_0x19b6f9(0x142)],'number':0x0,'orderstatus':_0x19b6f9(0x150)});}}}catch(_0x10e0b2){if(!_0x1a9585)handleErrorNoStop(_0x10e0b2,_0x19b6f9(0xd7));else await handleError(_0x10e0b2,_0x19b6f9(0xd7));}return _0x35e44d[_0x19b6f9(0x188)]((_0x3bd4ca,_0x2b7c96)=>_0x3bd4ca['delta']<_0x2b7c96[_0x19b6f9(0x13d)]?0x1:_0x2b7c96['delta']<_0x3bd4ca['delta']?-0x1:0x0),_0x274864=cloneDeep(_0x35e44d),_0x35e44d=_0x35e44d[_0x19b6f9(0x208)](_0x358c90=>{const _0x2f77c6=_0x19b6f9,_0x3cafd3=config[_0x2f77c6(0x1c5)]['find'](_0x5b108c=>_0x5b108c['coin']==_0x358c90[_0x2f77c6(0x11f)]);return _0x3cafd3&&!_0x3cafd3['excluded'];}),[_0x35e44d,_0x274864];}async function getCoinNumber(_0x5ad5be){const _0x2b8127=_0x1dc520;let _0x153843;try{const _0xdc42bd=await exchange[_0x2b8127(0xcf)]();_0x153843=_0xdc42bd[_0x2b8127(0x1df)][_0x5ad5be];}catch(_0x463f23){await handleError(_0x463f23,_0x2b8127(0x1fa));}return _0x153843;}async function getOpenOrders(){const _0x248535=_0x1dc520;let _0x426fcf;allOpenOrders=[];try{for(const _0x468b26 of config[_0x248535(0x1c5)]){!_0x468b26[_0x248535(0xb7)]&&_0x468b26[_0x248535(0x11f)]!=config[_0x248535(0x103)]&&(_0x426fcf=await exchange[_0x248535(0x9b)](_0x468b26[_0x248535(0xfa)]),_0x426fcf[_0x248535(0xaf)]>0x0&&allOpenOrders[_0x248535(0x1ed)](_0x426fcf[0x0]));}}catch(_0xef969e){await handleError(_0xef969e,_0x248535(0x93));}}async function handleOpenOrders(_0x1befc9=0x0){const _0x103b9e=_0x1dc520;allOpenOrders[_0x103b9e(0xaf)]==0x0&&lockOrders==ORDERS[_0x103b9e(0x1aa)]&&allOrdersPlaced&&(_0x1befc9==0x0?(logger['debug'](_0x103b9e(0x118)),_0x1befc9++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x103b9e(0x20c)](_0x103b9e(0x200)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x3c043b){const _0x36a6a5=_0x1dc520,_0x32c211=ccxt[_0x36a6a5(0x1c1)][_0x3c043b[_0x36a6a5(0x1b5)][_0x36a6a5(0x185)]()],_0x2ba99d=new _0x32c211({'apiKey':_0x3c043b[_0x36a6a5(0x189)],'secret':_0x3c043b[_0x36a6a5(0xa6)],'options':{'defaultType':'spot'}});if(_0x3c043b[_0x36a6a5(0xe7)])_0x2ba99d[_0x36a6a5(0xdc)]=_0x3c043b[_0x36a6a5(0xe7)];try{await _0x2ba99d['fetchBalance']();}catch(_0x2518c1){logger[_0x36a6a5(0x20c)]('Error\x20in\x20testAPI():\x20'+_0x2518c1['toString']());throw _0x2518c1;}}function cloneDeep(_0xab765d){return JSON['parse'](JSON['stringify'](_0xab765d));}async function getPortfolio(_0x2f4b76){const _0x5e1d26=_0x1dc520;let _0x4a2a04=[],_0xee9756=[],_0x569d6d=[],_0x3db963;_0x2f4b76[_0x5e1d26(0x189)]=decryptRSA(secure[_0x5e1d26(0x7d)],_0x2f4b76[_0x5e1d26(0x189)]),_0x2f4b76[_0x5e1d26(0xa6)]=decryptRSA(secure['privateKey'],_0x2f4b76['apiSecret']);if(_0x2f4b76['apiPassword'])_0x2f4b76['apiPassword']=decryptRSA(secure[_0x5e1d26(0x7d)],_0x2f4b76[_0x5e1d26(0xe7)]);if(_0x2f4b76[_0x5e1d26(0x189)]!==_0x5e1d26(0x79)||_0x2f4b76[_0x5e1d26(0xa6)]!==_0x5e1d26(0x79)||_0x2f4b76['apiPassword']&&_0x2f4b76[_0x5e1d26(0xe7)]!==_0x5e1d26(0x79)){if(config[_0x5e1d26(0x1b5)]){if(_0x2f4b76[_0x5e1d26(0x189)]==_0x5e1d26(0x79))_0x2f4b76[_0x5e1d26(0x189)]=config['apiKey'];if(_0x2f4b76['apiSecret']==_0x5e1d26(0x79))_0x2f4b76[_0x5e1d26(0xa6)]=config[_0x5e1d26(0xa6)];if(_0x2f4b76[_0x5e1d26(0xe7)]==_0x5e1d26(0x79))_0x2f4b76[_0x5e1d26(0xe7)]=config['apiPassword'];}try{await testAPI(_0x2f4b76);}catch(_0x23c2e2){if(_0x23c2e2[_0x5e1d26(0x94)]()[_0x5e1d26(0x1bb)](_0x5e1d26(0x101))){logHistory(_0x5e1d26(0x98),_0x5e1d26(0x1a6)),proxyEmit(_0x5e1d26(0x128),![]);return;}else{logHistory(_0x5e1d26(0x98),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x5e1d26(0x20c)](_0x5e1d26(0x12e),_0x23c2e2),proxyEmit(_0x5e1d26(0x128),![]);return;}}exchange?updateExchange(_0x2f4b76[_0x5e1d26(0x189)],_0x2f4b76[_0x5e1d26(0xa6)],_0x2f4b76[_0x5e1d26(0xe7)]):await initExchange(_0x2f4b76['exchange'],_0x2f4b76[_0x5e1d26(0x189)],_0x2f4b76[_0x5e1d26(0xa6)],_0x2f4b76[_0x5e1d26(0xe7)]);await loadSymbols();const _0x3caa3c=await getCoins(0x0,![],_0x2f4b76[_0x5e1d26(0x103)]);_0x569d6d=cloneDeep(_0x3caa3c[0x1]);}else{const _0x5c96bf=await getCoins();_0x569d6d=cloneDeep(_0x5c96bf[0x1]);}if(_0x2f4b76['basecoin']=='')proxyEmit(_0x5e1d26(0x128),!![]),proxyEmit(_0x5e1d26(0x8b),_0x569d6d);else{_0x569d6d[_0x5e1d26(0x1c7)](_0x19809e=>{const _0x7ca07b=_0x5e1d26;if(_0x19809e[_0x7ca07b(0x11f)]!=_0x2f4b76['basecoin']&&allSymbols[_0x7ca07b(0x1bb)](_0x19809e[_0x7ca07b(0xfa)]))_0x4a2a04['push'](_0x19809e['symbol']);});if(_0x4a2a04[_0x5e1d26(0xaf)]==0x0)logHistory(_0x5e1d26(0x98),_0x5e1d26(0xea));else{try{_0xee9756=await getTickers(_0x4a2a04);}catch(_0x348eda){logHistory(_0x5e1d26(0x98),'Unknown\x20error\x20-\x20check\x20logs'),logger[_0x5e1d26(0x20c)](_0x5e1d26(0x18e),_0x348eda),proxyEmit(_0x5e1d26(0x128),![]);return;}_0x569d6d[_0x5e1d26(0x1c7)](_0x459291=>{const _0x3f4404=_0x5e1d26;_0x459291[_0x3f4404(0x11f)]!=_0x2f4b76['basecoin']?_0xee9756[_0x459291['symbol']]?_0x3db963=_0x459291[_0x3f4404(0x142)]?0x1/_0xee9756[_0x459291['symbol']][_0x3f4404(0x239)]:_0xee9756[_0x459291[_0x3f4404(0xfa)]][_0x3f4404(0x239)]:_0x3db963=0x0:_0x3db963=0x1,_0x459291[_0x3f4404(0xe0)]=formatResult(_0x3db963,0x8);}),await getMarketCap(_0x569d6d),proxyEmit('portfolio1',!![]),proxyEmit(_0x5e1d26(0x8b),_0x569d6d);}}}function truncateTradeAmount(_0x3bd9c,_0x16a02c){const _0xa070a3=_0x1dc520;let _0x305d89=0x0;try{_0x305d89=exchange[_0xa070a3(0x22f)](_0x3bd9c,_0x16a02c);}catch(_0x580595){}return _0x305d89;}function checkMinimums(_0x2ece0a){const _0x28497c=_0x1dc520;let _0x3ae7ce=!![];const _0x3f3d72=!_0x2ece0a[_0x28497c(0x142)]?markets[_0x2ece0a[_0x28497c(0xfa)]][_0x28497c(0x1c0)][_0x28497c(0xe9)]['min']:markets[_0x2ece0a['symbol']][_0x28497c(0x1c0)][_0x28497c(0xfd)]['min'],_0x3f8d4a=!_0x2ece0a[_0x28497c(0x142)]?markets[_0x2ece0a['symbol']][_0x28497c(0x1c0)][_0x28497c(0xfd)][_0x28497c(0x1dc)]:markets[_0x2ece0a[_0x28497c(0xfa)]][_0x28497c(0x1c0)][_0x28497c(0xe9)]['min'],_0x565b2f=truncateTradeAmount(_0x2ece0a[_0x28497c(0xfa)],_0x2ece0a[_0x28497c(0x147)]);_0x2ece0a[_0x28497c(0x147)]=_0x565b2f;if(Math[_0x28497c(0x117)](_0x565b2f)<_0x3f3d72)_0x3ae7ce=![];if(Math[_0x28497c(0x117)](_0x565b2f)*_0x2ece0a[_0x28497c(0x239)]<_0x3f8d4a)_0x3ae7ce=![];if(_0x2ece0a[_0x28497c(0xf2)]==_0x28497c(0xbc)){let _0x2bc356=config[_0x28497c(0x1c5)][_0x28497c(0xcc)](_0x464b29=>_0x464b29[_0x28497c(0x11f)]==_0x2ece0a[_0x28497c(0x11f)]);if(_0x2bc356[_0x28497c(0x104)]>0x0){if(Math[_0x28497c(0x117)](_0x565b2f)>_0x2ece0a['number']-_0x2bc356[_0x28497c(0x104)])_0x3ae7ce=![];}else{if(Math[_0x28497c(0x117)](_0x565b2f)>_0x2ece0a['number'])_0x3ae7ce=![];}}if(_0x2ece0a[_0x28497c(0xf2)]==_0x28497c(0x92)){let _0x3eba12=config['portfolio'][_0x28497c(0xcc)](_0x4dce66=>_0x4dce66['coin']==config[_0x28497c(0x103)]),_0x89a84b=currentCoins['find'](_0xb60896=>_0xb60896[_0x28497c(0x11f)]==config[_0x28497c(0x103)]);if(_0x3eba12[_0x28497c(0x104)]>0x0){if(Math[_0x28497c(0x117)](_0x565b2f)*_0x2ece0a['last']>_0x89a84b[_0x28497c(0x180)]-_0x3eba12['offset'])_0x3ae7ce=![];}else{if(Math[_0x28497c(0x117)](_0x565b2f)*_0x2ece0a['last']>_0x89a84b[_0x28497c(0x180)])_0x3ae7ce=![];}}return _0x3ae7ce;}async function getBalances(_0x134348=!![]){const _0x31be30=_0x1dc520;let _0x701437=0x0,_0x353259;const _0x1f135d=config[_0x31be30(0x109)];if(config['headless']&&config[_0x31be30(0x164)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x36de56=>{const _0x400729=_0x31be30;if(_0x36de56[_0x400729(0x11f)]!=config['basecoin']){let _0x4bffad=gTicker[noslash(_0x36de56['symbol'])];_0x353259=_0x36de56[_0x400729(0x142)]?0x1/_0x4bffad:_0x4bffad;}else _0x353259=0x1;let _0x1fba08=_0x36de56[_0x400729(0x180)]*_0x353259;_0x701437+=_0x1fba08,_0x36de56[_0x400729(0x239)]=formatResult(Number(_0x353259),0x8),_0x36de56[_0x400729(0x1d8)]=_0x1fba08;}),currentCoins[_0x31be30(0x1c7)](_0x40dd62=>{const _0x272b0a=_0x31be30;let _0x454acc=config[_0x272b0a(0x1c5)][_0x272b0a(0xcc)](_0x52f782=>_0x52f782['coin']==_0x40dd62['coin']),_0x590180=Number(_0x454acc[_0x272b0a(0x203)]),_0x5b8409=_0x40dd62['value']/_0x701437*0x64,_0xbc7302=_0x590180*_0x701437/0x64/_0x40dd62[_0x272b0a(0x239)]-_0x40dd62[_0x272b0a(0x180)];_0x40dd62[_0x272b0a(0x203)]=formatResult(_0x5b8409,0x3),_0x40dd62[_0x272b0a(0x18c)]=formatResult(_0x590180,0x3),_0x40dd62[_0x272b0a(0x147)]=formatResult(_0xbc7302,0x8),_0x40dd62[_0x272b0a(0xf2)]='',_0x40dd62[_0x272b0a(0x116)]=![];if(_0x40dd62[_0x272b0a(0x11f)]!=config[_0x272b0a(0x103)]){if(_0x40dd62[_0x272b0a(0x203)]>_0x590180)_0x40dd62[_0x272b0a(0xf2)]='sell',_0x40dd62[_0x272b0a(0x116)]=checkMinimums(_0x40dd62);else _0x40dd62[_0x272b0a(0x203)]<_0x590180&&(_0x40dd62[_0x272b0a(0xf2)]=_0x272b0a(0x92),_0x40dd62['valid']=checkMinimums(_0x40dd62));}_0x40dd62[_0x272b0a(0x13d)]=_0x40dd62[_0x272b0a(0x203)]/_0x40dd62[_0x272b0a(0x18c)]-0x1;if(_0x40dd62[_0x272b0a(0xdb)]=='filled'||_0x40dd62[_0x272b0a(0xdb)]==_0x272b0a(0x8d))_0x40dd62[_0x272b0a(0xdb)]=_0x272b0a(0x150);}),currentCoins[_0x31be30(0x188)]((_0x4613ce,_0x30e7bf)=>_0x4613ce[_0x31be30(0x13d)]<_0x30e7bf[_0x31be30(0x13d)]?0x1:_0x30e7bf[_0x31be30(0x13d)]<_0x4613ce[_0x31be30(0x13d)]?-0x1:0x0);const _0x263829=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x263829[_0x31be30(0x1a1)],'usd':_0x263829[_0x31be30(0x1b0)],'portfolio':JSON[_0x31be30(0xad)](currentCoins),'threshold':_0x1f135d},proxyEmit(_0x31be30(0x232),{'serverversion':serverversion,'balances':lastBalances});if(_0x134348){if(config[_0x31be30(0x140)])headlessMode({'portfolio':currentCoins,'threshold':_0x1f135d});else{if(lockOrders==ORDERS[_0x31be30(0x1cd)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1f135d});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3bde2a=getNormalizedPerformance();getStartingBalances(_0x3bde2a),emitPerformance(_0x3bde2a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2ab889=_0x1dc520;if(!lastBalances)return;let _0x18a0f8=[],_0x2bf137,_0x1d59b3=JSON['parse'](lastBalances['portfolio']);_0x1d59b3[_0x2ab889(0x188)]((_0x876af5,_0x22df4d)=>_0x876af5[_0x2ab889(0x11f)]>_0x22df4d['coin']?0x1:_0x22df4d[_0x2ab889(0x11f)]>_0x876af5['coin']?-0x1:0x0),_0x1d59b3[_0x2ab889(0x1c7)](_0x393348=>{const _0x48ed80=_0x2ab889;let _0x36651b={'coin':_0x393348[_0x48ed80(0x11f)],'number':_0x393348[_0x48ed80(0x180)],'price':_0x393348[_0x48ed80(0x239)]};_0x18a0f8[_0x48ed80(0x1ed)](_0x36651b);});const _0x3c825a=await getFiat();_0x2bf137={'date':lastBalances[_0x2ab889(0x1be)][_0x2ab889(0x1b3)]('\x20')[0x0],'eur':_0x3c825a[_0x2ab889(0x1a1)],'usd':_0x3c825a[_0x2ab889(0x1b0)],'coins':_0x18a0f8};let _0x1b2901=dbPerformance[_0x2ab889(0xd3)](_0x2ab889(0x1ea))[_0x2ab889(0xcc)]({'date':_0x2bf137[_0x2ab889(0x8f)]})[_0x2ab889(0x1d8)]();_0x1b2901?_0x2bf137['date']!=config[_0x2ab889(0x1f9)]&&dbPerformance['get']('data')['find']({'date':_0x2bf137['date']})[_0x2ab889(0x179)](_0x2bf137)['write']():dbPerformance[_0x2ab889(0xd3)](_0x2ab889(0x1ea))[_0x2ab889(0x1ed)](_0x2bf137)[_0x2ab889(0xd1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5ad495=_0x1dc520;let _0x598c87=[];if(dbPerformance['has']('data')['value']()){let _0xce94e8=dbPerformance[_0x5ad495(0xd3)](_0x5ad495(0x1ea))['cloneDeep']()['filter'](_0xb68a4d=>{const _0x2eb3a4=_0x5ad495;if(_0xb68a4d[_0x2eb3a4(0x7a)][_0x2eb3a4(0xaf)]==0x0)return![];else return!![];})[_0x5ad495(0x1ad)](_0x5ad495(0x8f))[_0x5ad495(0x1d8)](),_0x234a07=[...config[_0x5ad495(0x10d)]];_0x234a07[_0x5ad495(0x188)]((_0x5b5c93,_0x16e3ac)=>_0x5b5c93[_0x5ad495(0x8f)]>_0x16e3ac['date']?-0x1:_0x16e3ac[_0x5ad495(0x8f)]>_0x5b5c93[_0x5ad495(0x8f)]?0x1:0x0);let _0x13aa19=0x1,_0x3811fa=[],_0x5c37f3=0x0;_0xce94e8[_0x5ad495(0x16b)]()[_0x5ad495(0x142)]()['forEach']((_0x342d,_0x58498e)=>{const _0x4c1a83=_0x5ad495;if(_0x234a07[_0x5c37f3]){if(_0xce94e8[_0xce94e8['length']-_0x58498e]&&_0x234a07[_0x5c37f3][_0x4c1a83(0x8f)]==_0xce94e8[_0xce94e8['length']-_0x58498e][_0x4c1a83(0x8f)]){if(_0x58498e<_0xce94e8[_0x4c1a83(0xaf)]){let _0x291aa4=0x0,_0xcb9a20=0x0;_0xce94e8[_0xce94e8[_0x4c1a83(0xaf)]-_0x58498e][_0x4c1a83(0x7a)]['forEach'](_0x53dcfb=>{const _0x5dd977=_0x4c1a83;_0xcb9a20+=_0x53dcfb[_0x5dd977(0x180)]*_0x53dcfb['price'];}),_0x234a07[_0x5c37f3]['changes'][_0x4c1a83(0x1c7)](_0x51d3ed=>{_0x291aa4+=_0x51d3ed['number']*_0x51d3ed['price'];}),_0x13aa19*=_0x291aa4/(_0xcb9a20-_0x291aa4)+0x1;}_0x5c37f3++;}}let _0xe0dd9d=0x0;_0x342d[_0x4c1a83(0x7a)][_0x4c1a83(0x1c7)](_0x37a8a2=>{const _0x1a3494=_0x4c1a83;_0xe0dd9d+=_0x37a8a2[_0x1a3494(0x180)]*_0x37a8a2['price'];}),_0x3811fa[_0xce94e8[_0x4c1a83(0xaf)]-_0x58498e-0x1]=_0xe0dd9d*(_0x13aa19-0x1);});let _0x417450=[];_0x234a07=[...config[_0x5ad495(0x10d)]]||[];let _0x2c6b34=0x0;_0x5c37f3=0x0,_0xce94e8[_0x5ad495(0x1c7)]((_0x2a83ea,_0x43a664)=>{const _0x43ce6a=_0x5ad495;if(_0x234a07[_0x5c37f3]){const _0x3d033e=fns[_0x43ce6a(0x149)](_0x234a07[_0x5c37f3][_0x43ce6a(0x8f)],_0x43ce6a(0x7f),new Date()),_0x57a73d=fns[_0x43ce6a(0x149)](_0x2a83ea[_0x43ce6a(0x8f)],_0x43ce6a(0x7f),new Date());if(fns['isEqual'](_0x3d033e,_0x57a73d)){let _0x32f47f=0x0;_0x234a07[_0x5c37f3][_0x43ce6a(0x1fe)][_0x43ce6a(0x1c7)](_0x575c38=>{const _0x2d4ecd=_0x43ce6a;!_0x417450[_0x575c38[_0x2d4ecd(0x11f)]]?_0x417450[_0x575c38[_0x2d4ecd(0x11f)]]=_0x575c38[_0x2d4ecd(0x180)]:(_0x32f47f=_0x417450[_0x575c38[_0x2d4ecd(0x11f)]],_0x417450[_0x575c38[_0x2d4ecd(0x11f)]]+=_0x575c38[_0x2d4ecd(0x180)]);const _0x539927=_0x2a83ea['coins']['find'](_0x1de887=>_0x1de887[_0x2d4ecd(0x11f)]==_0x575c38[_0x2d4ecd(0x11f)]);(!_0x539927||_0x539927[_0x2d4ecd(0x180)]==0x0)&&(_0x2c6b34+=(-_0x575c38[_0x2d4ecd(0x180)]-_0x32f47f)*_0x575c38['price']);}),_0x5c37f3++;}}_0x2a83ea['coins']['forEach']((_0x599a00,_0x4bba21)=>{const _0x4086b3=_0x43ce6a;_0x417450[_0x599a00[_0x4086b3(0x11f)]]&&(_0x599a00[_0x4086b3(0xb9)]=_0x417450[_0x599a00['coin']]);}),_0x598c87[_0x43ce6a(0x1ed)]({'date':_0x2a83ea[_0x43ce6a(0x8f)],'eur':_0x2a83ea[_0x43ce6a(0x1a1)],'usd':_0x2a83ea['usd'],'offset':_0x3811fa[_0x43a664],'netoffset':_0x2c6b34,'coins':_0x2a83ea['coins']});});}return _0x598c87;}function emitPerformance(_0x1b06ac){const _0x528e68=_0x1dc520;_0x1b06ac[_0x528e68(0xaf)]!==0x0?(proxyEmit(_0x528e68(0x201),_0x1b06ac),lastPerformanceEmitted=getDate()):proxyEmit(_0x528e68(0x201),[]);}function getPerf(_0x24b846,_0x1a1335){const _0x679841=_0x1dc520;let _0x15625a=0x0,_0x3b5589=0x0,_0x3a6bf1=0x0;_0x24b846[_0x679841(0x7a)][_0x679841(0x1c7)](_0x503cdc=>{const _0x588b7d=_0x679841;_0x15625a+=_0x503cdc[_0x588b7d(0x180)]*_0x503cdc[_0x588b7d(0xe0)];});_0x1a1335&&(_0x15625a+=_0x24b846[_0x679841(0x104)]);if(config['basecoin']===_0x679841(0x9f)||config[_0x679841(0x103)]===_0x679841(0xf7)||config[_0x679841(0x103)]===_0x679841(0x91))_0x3b5589=_0x15625a*_0x24b846['eur'],_0x3a6bf1=_0x15625a*_0x24b846[_0x679841(0x1b0)];else{if(usdBasecoins['includes'](config[_0x679841(0x103)]))_0x3b5589=_0x15625a*_0x24b846['eur']/_0x24b846['usd'],_0x3a6bf1=_0x15625a;else config[_0x679841(0x103)]===_0x679841(0x121)&&(_0x3b5589=_0x15625a,_0x3a6bf1=_0x15625a*_0x24b846[_0x679841(0x1b0)]/_0x24b846['eur']);}return[_0x15625a,_0x3b5589,_0x3a6bf1];}function getKPIs(_0x3d1d8c,_0x2c46a0=_0x1dc520(0x121)){const _0x484326=_0x1dc520,_0x361006=config[_0x484326(0x103)],_0xcce316=lastBalances,_0x38e425=currentCoins,_0x293132=getNormalizedPerformance(),_0x341be2=_0x3d1d8c===_0x484326(0x103)?_0x361006:_0x3d1d8c===_0x484326(0x159)||_0x3d1d8c===_0x484326(0x1e6)?_0x2c46a0:_0x484326(0x10b)+_0x361006,_0x377c72=_0x3d1d8c==='net-basecoin'?_0x484326(0x198):_0x3d1d8c===_0x484326(0x1e6)?_0x484326(0x198):_0x341be2+_0x484326(0x135),_0x19266b=_0x3d1d8c===_0x484326(0x15a)||_0x3d1d8c===_0x484326(0x1e6)?_0x484326(0x198):_0x341be2+'\x20change';let _0x5173de=0x0;_0x38e425[_0x484326(0x1c7)](_0x31747d=>{const _0x49e9f3=_0x484326;_0x5173de+=_0x31747d[_0x49e9f3(0x180)]*_0x31747d[_0x49e9f3(0x239)];});if(_0x3d1d8c===_0x484326(0x159)||_0x3d1d8c===_0x484326(0x1e6)){if(_0x361006===_0x484326(0x9f)||_0x361006==='ETH'||_0x361006===_0x484326(0x91))_0x5173de=_0x5173de*(_0x2c46a0===_0x484326(0x121)?_0xcce316[_0x484326(0x1a1)]:_0xcce316['usd']);else{if(usdBasecoins[_0x484326(0x1bb)](_0x361006))_0x5173de=_0x5173de*(_0x2c46a0===_0x484326(0x121)?_0xcce316[_0x484326(0x1a1)]/_0xcce316[_0x484326(0x1b0)]:0x1);else _0x361006===_0x484326(0x121)&&(_0x5173de=_0x5173de*(_0x2c46a0===_0x484326(0x121)?0x1:_0xcce316[_0x484326(0x1b0)]/_0xcce316['eur']));}}let _0x39549a;if(_0x5173de!==0x0){if(_0x3d1d8c==='basecoin')_0x39549a=(_0x5173de/startingBalances[_0x484326(0x103)]-0x1)*0x64;else{if(_0x2c46a0===_0x484326(0x121))_0x39549a=(_0x5173de/startingBalances[_0x484326(0x1a1)]-0x1)*0x64;else _0x39549a=(_0x5173de/startingBalances[_0x484326(0x1b0)]-0x1)*0x64;}let _0x328006=0x0;if(startingBalances['coins'])_0x38e425['forEach'](_0x276848=>{const _0x2d2529=_0x484326;let _0x4b0db4=startingBalances[_0x2d2529(0x7a)][_0x2d2529(0xcc)](_0x1e7ed7=>_0x1e7ed7[_0x2d2529(0x11f)]===_0x276848[_0x2d2529(0x11f)]);if(_0x4b0db4&&_0x4b0db4[_0x2d2529(0x11f)]&&_0x276848[_0x2d2529(0x180)]!==0x0)_0x328006+=_0x4b0db4[_0x2d2529(0x180)]*_0x276848[_0x2d2529(0x239)];});let _0x58197c=0x0;if(_0x293132[_0x484326(0xaf)]!==0x0){let _0x1f1b52=_0x293132[_0x293132['length']-0x1];_0x58197c=_0x1f1b52['netoffset'];}_0x328006-=_0x58197c;_0x3d1d8c===_0x484326(0x15a)&&(_0x39549a=(_0x5173de-_0x328006)/startingBalances[_0x484326(0x103)]*0x64,_0x5173de=_0x5173de-_0x328006);if(_0x3d1d8c===_0x484326(0x1e6)){let _0x21be6a=_0x2c46a0===_0x484326(0x121)?startingBalances['eur']:startingBalances[_0x484326(0x1b0)];if(_0x361006===_0x484326(0x9f)||_0x361006==='ETH'||_0x361006===_0x484326(0x91))_0x328006=_0x2c46a0===_0x484326(0x121)?_0x328006*_0xcce316[_0x484326(0x1a1)]:_0x328006*_0xcce316[_0x484326(0x1b0)];else{if(usdBasecoins[_0x484326(0x1bb)](_0x361006))_0x328006=_0x2c46a0===_0x484326(0x121)?_0x328006*_0xcce316[_0x484326(0x1a1)]/_0xcce316[_0x484326(0x1b0)]:_0x328006;else _0x361006===_0x484326(0x121)&&(_0x328006=_0x2c46a0===_0x484326(0x121)?_0x328006:_0x328006*_0xcce316[_0x484326(0x1b0)]/_0xcce316[_0x484326(0x1a1)]);}_0x39549a=(_0x5173de-_0x328006)/_0x21be6a*0x64,_0x5173de=_0x5173de-_0x328006;}if(_0x39549a){if(_0x39549a<0x64)_0x39549a=_0x39549a[_0x484326(0x1f8)](0x2);else{if(_0x39549a<0x3e8)_0x39549a=_0x39549a[_0x484326(0x1f8)](0x1);else _0x39549a=_0x39549a[_0x484326(0x1f8)](0x0);}}else _0x39549a=Number('0')['toFixed'](0x2);if(_0x5173de){if(Math[_0x484326(0x117)](_0x5173de)<0.000001)_0x5173de=_0x5173de[_0x484326(0x1f8)](0x2);else{if(Math['abs'](_0x5173de)<0.1)_0x5173de=_0x5173de['toFixed'](0x6);else{if(Math['abs'](_0x5173de)<0x1)_0x5173de=_0x5173de[_0x484326(0x1f8)](0x5);else{if(Math[_0x484326(0x117)](_0x5173de)<0xa)_0x5173de=_0x5173de[_0x484326(0x1f8)](0x4);else{if(Math[_0x484326(0x117)](_0x5173de)<0x64)_0x5173de=_0x5173de[_0x484326(0x1f8)](0x3);else{if(Math[_0x484326(0x117)](_0x5173de)<0x3e8)_0x5173de=_0x5173de[_0x484326(0x1f8)](0x2);else _0x5173de=_0x5173de[_0x484326(0x1f8)](0x2);}}}}}}else _0x5173de=Number('0')[_0x484326(0x1f8)](0x2);}else _0x39549a=Number('0')[_0x484326(0x1f8)](0x2);return{'value':_0x5173de,'change':_0x39549a,'leftTxt':_0x377c72,'rightTxt':_0x19266b};}async function getStartingBalances(_0x52441f,_0x72499f=!![]){const _0x4f4333=_0x1dc520;if(_0x52441f[_0x4f4333(0xaf)]!==0x0){const [_0x1cd549,_0x458fc5,_0x34ee63]=getPerf(_0x52441f[0x0],!![]);let _0xe6c706=[];config[_0x4f4333(0x1c5)][_0x4f4333(0x1c7)](_0x4b9ec8=>{const _0x27f4be=_0x4f4333;let _0xb941fe=0x0,_0x251279;config['liquidity']['forEach'](_0x4bc7e4=>{const _0x473768=_0x2444;let _0x4ca58c=_0x4bc7e4[_0x473768(0x1fe)][_0x473768(0xcc)](_0x569c8e=>_0x569c8e['coin']==_0x4b9ec8[_0x473768(0x11f)]);if(_0x4ca58c){_0xb941fe+=_0x4ca58c[_0x473768(0x180)];if(!_0x251279)_0x251279=_0x4ca58c[_0x473768(0xe0)];}}),_0xe6c706[_0x27f4be(0x1ed)]({'coin':_0x4b9ec8[_0x27f4be(0x11f)],'number':_0xb941fe,'initialprice':_0x251279});});const _0x25903a={'basecoin':_0x1cd549,'eur':_0x458fc5,'usd':_0x34ee63,'coins':_0xe6c706};if(_0x72499f)proxyEmit(_0x4f4333(0x160),_0x25903a);startingBalances=_0x25903a;}}function headlessMode(_0x3b6323){const _0x4a8911=_0x1dc520;let _0xd34cd6=_0x3b6323[_0x4a8911(0x1c5)],_0x30bb59=_0x3b6323[_0x4a8911(0x109)],_0x3ce813=[];for(let _0x99bf9c of _0xd34cd6){if(_0x99bf9c[_0x4a8911(0x11f)]!=config[_0x4a8911(0x103)]){if(_0x99bf9c['delta']>=_0x30bb59/0x64){if(_0x99bf9c[_0x4a8911(0x116)])_0x3ce813['push'](_0x99bf9c);}else{if(_0x99bf9c[_0x4a8911(0x13d)]<=-_0x30bb59/0x64){if(_0x99bf9c[_0x4a8911(0x116)])_0x3ce813['push'](_0x99bf9c);}}}}_0x3ce813[_0x4a8911(0xaf)]>0x0&&(lockOrders==ORDERS[_0x4a8911(0x1cd)]&&!coolingDown&&_0x3ce813[_0x4a8911(0x1c7)](_0x59d745=>{const _0x2d3f22=_0x4a8911;_0x59d745['number']!=prevAmountAtOrder[_0x59d745['coin']]?logger['debug'](_0x2d3f22(0x16d)+_0x59d745[_0x2d3f22(0x11f)]+'\x20'+_0x59d745['number']+'\x20'+_0x59d745[_0x2d3f22(0x239)]+'\x20'+_0x59d745[_0x2d3f22(0x203)]+'%\x20'+_0x59d745['target']+'%\x20'+(0x64*_0x59d745[_0x2d3f22(0x13d)])[_0x2d3f22(0x1f8)](0x2)+'%\x20('+_0x30bb59[_0x2d3f22(0x1f8)](0x2)+'%)'):logger['debug'](_0x2d3f22(0x165)+_0x59d745[_0x2d3f22(0x11f)]+'\x20'+_0x59d745[_0x2d3f22(0x180)]+'\x20'+_0x59d745[_0x2d3f22(0x239)]+'\x20'+_0x59d745[_0x2d3f22(0x203)]+'%\x20'+_0x59d745['target']+'%\x20'+(0x64*_0x59d745['delta'])[_0x2d3f22(0x1f8)](0x2)+_0x2d3f22(0xe3)+_0x30bb59[_0x2d3f22(0x1f8)](0x2)+'%)'),prevAmountAtOrder[_0x59d745[_0x2d3f22(0x11f)]]=_0x59d745[_0x2d3f22(0x180)];}),placeOrder(_0x3ce813));}function notifyBalance(_0x282b83){const _0x2304ba=_0x1dc520;let _0x56978d=_0x282b83[_0x2304ba(0x1c5)],_0x36036f=_0x282b83[_0x2304ba(0x109)],_0x14f654=[];for(let _0x33e275 of _0x56978d){if(_0x33e275[_0x2304ba(0x11f)]!=config[_0x2304ba(0x103)]){if(_0x33e275[_0x2304ba(0x13d)]>=_0x36036f/0x64){if(_0x33e275[_0x2304ba(0x116)])_0x14f654['push'](_0x33e275);}else{if(_0x33e275[_0x2304ba(0x13d)]<=-_0x36036f/0x64){if(_0x33e275['valid'])_0x14f654[_0x2304ba(0x1ed)](_0x33e275);}}}}if(_0x14f654[_0x2304ba(0xaf)]>0x0){let _0x16b193=_0x14f654['map'](_0x3f5f6e=>_0x3f5f6e['coin']);_0x16b193[_0x2304ba(0x188)]();let _0x24a2b8=_0x16b193[_0x2304ba(0x15e)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2304ba(0x125),_0x2304ba(0x220));lastCoinsToBalance=_0x24a2b8;}}function symbolToCoin(_0x5c6dd7){const _0x4a6f91=_0x1dc520;let _0x80eb86;if(_0x5c6dd7[_0x4a6f91(0x1bb)]('/'+config['basecoin']))_0x80eb86=_0x5c6dd7[_0x4a6f91(0x22c)]('/'+config['basecoin'],'');if(_0x5c6dd7[_0x4a6f91(0x1bb)](config[_0x4a6f91(0x103)]+'/'))_0x80eb86=_0x5c6dd7[_0x4a6f91(0x22c)](config[_0x4a6f91(0x103)]+'/','');return _0x80eb86;}async function unlockOrders(){const _0x28186a=_0x1dc520;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x28186a(0x20c)](_0x28186a(0x1ec)),lockOrders=ORDERS[_0x28186a(0x216)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3835d4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3835d4,setBlockTransactionDetection(![]),validateOrdersState=_0x28186a(0xb9),persistOpenOrders([]),lockOrders=ORDERS[_0x28186a(0x1cd)],logger[_0x28186a(0x20c)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x20a22d){const _0x347608=_0x1dc520;if(_0x20a22d)validateOrdersState=_0x20a22d;logger[_0x347608(0x20c)](_0x347608(0xfb)+validateOrdersState+_0x347608(0x214)+(lockOrders==0x1?_0x347608(0x1c9):lockOrders==0x2?_0x347608(0xc5):_0x347608(0x22d)));let _0x10815a=[],_0x324d8b=config[_0x347608(0x236)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x347608(0x11a)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x347608(0x1aa)])return;logger[_0x347608(0x20c)](_0x347608(0x19e)+validateOrdersState),lastOrders[_0x347608(0x1c7)](_0x2b59a9=>{const _0x473107=_0x347608;let _0x550057=![];_0x2b59a9[_0x473107(0x7b)]>0x0&&(_0x550057=!![]),_0x10815a[_0x473107(0x1ed)](_0x550057),_0x550057&&config[_0x473107(0x236)]!=_0x473107(0x225)&&logHistory(_0x473107(0x155),'Order\x20filled:\x20'+_0x2b59a9[_0x473107(0xfa)]+'\x20'+_0x2b59a9['side']+'\x20#'+formatResult(_0x2b59a9[_0x473107(0x7b)],0x8)+'\x20@'+formatResult(_0x2b59a9[_0x473107(0xe0)],0x8));}),_0x10815a[_0x347608(0x1c7)]((_0x2ffb75,_0x29846d)=>{const _0x920779=_0x347608;if(_0x2ffb75)lastOrders[_0x920779(0x194)](_0x29846d,0x1);}),persistOpenOrders(lastOrders);const _0x44ae4a=coolingDown?_0x347608(0x1ba):_0x347608(0x22b);if(validateOrdersState=='initial'){validateOrdersState=_0x347608(0xe2);if(_0x10815a[_0x347608(0x1bb)](![])){if(config[_0x347608(0x236)]==_0x347608(0x225)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x10815a[_0x347608(0x1bb)](![])){}else{if(allOrdersPlaced){if(config[_0x347608(0x236)]==_0x347608(0x225)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x347608(0x1fb))_0x10815a['includes'](![])&&(config['ordertype']==_0x347608(0x225)?logHistory(_0x347608(0x78),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x324d8b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x44ae4a):(await cancelOrders(),logHistory(_0x347608(0x78),_0x347608(0x1b6)+Math['round'](_0x324d8b*validateOrderInterval/0xea60)+_0x347608(0xa3)+_0x44ae4a))),await unlockOrders();else{if(validateOrdersState==_0x347608(0x17f)){if(config[_0x347608(0x236)]!=_0x347608(0x225))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x44ae4a);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5f49bb=>{const _0x321c58=_0x2444;try{const _0x547a80=await exchange['cancelOrder'](_0x5f49bb[_0x321c58(0x235)],_0x5f49bb[_0x321c58(0xfa)]);}catch(_0x5f3f10){if(_0x5f3f10[_0x321c58(0x94)]()[_0x321c58(0x1bb)](_0x321c58(0x1fc))){}else await handleError(_0x5f3f10,_0x321c58(0x136));}});}async function initCoinResults(_0x3a78a3){const _0x3bcf4b=_0x1dc520;_0x3a78a3?logger[_0x3bcf4b(0x20c)](_0x3bcf4b(0x193)+_0x3a78a3):logger['debug']('Initializing\x20coin\x20results'),config[_0x3bcf4b(0x1c5)][_0x3bcf4b(0x1c7)](_0x5ab841=>{const _0x1181de=_0x3bcf4b;if(!_0x5ab841[_0x1181de(0xb7)]&&_0x5ab841[_0x1181de(0x11f)]!=config['basecoin']){const _0x4f8444=currentCoins[_0x1181de(0xcc)](_0x300514=>_0x300514[_0x1181de(0x11f)]==_0x5ab841['coin']),_0x48ded8=gTicker[noslash(_0x5ab841[_0x1181de(0xfa)])];let _0x7cf56d=_0x4f8444?_0x4f8444['number']:null,_0x73ff92=_0x5ab841[_0x1181de(0x142)]?0x1/_0x48ded8:_0x48ded8,_0x36e696;config[_0x1181de(0x10d)][_0x1181de(0x1c7)](_0x3c7ef2=>{const _0x582012=_0x1181de;!_0x36e696&&(_0x36e696=_0x3c7ef2[_0x582012(0x1fe)]['find'](_0x280273=>_0x280273[_0x582012(0x11f)]==_0x5ab841[_0x582012(0x11f)]),_0x36e696&&(_0x7cf56d=_0x36e696[_0x582012(0x180)],_0x73ff92=_0x36e696[_0x582012(0xe0)]));});let _0x58e4f9=dbCoinResults[_0x1181de(0xd3)]('coins')[_0x1181de(0xcc)]({'coin':_0x5ab841['coin']})[_0x1181de(0x1d8)]();if(!_0x58e4f9){const _0xb03ed1={'coin':_0x5ab841[_0x1181de(0x11f)],'number':_0x7cf56d,'breakeven':_0x73ff92,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1181de(0xd3)](_0x1181de(0x7a))[_0x1181de(0x1ed)](_0xb03ed1)[_0x1181de(0xd1)]();}else{if(_0x3a78a3&&_0x5ab841[_0x1181de(0x11f)]==_0x3a78a3){const _0x3a81d6={'coin':_0x5ab841[_0x1181de(0x11f)],'number':_0x7cf56d,'breakeven':_0x73ff92,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['find']({'coin':_0x5ab841['coin']})[_0x1181de(0x179)](_0x3a81d6)[_0x1181de(0xd1)]();}}}});}async function updateCoinResults(_0x41e655,_0x167b1f=![]){const _0xe65724=_0x1dc520;let _0x1adb6f,_0x450829,_0x4636ab,_0x6e0c8f,_0x2dc4c9,_0x2934c0,_0x24d6ce=dbCoinResults[_0xe65724(0xd3)](_0xe65724(0x7a))['find']({'coin':_0x41e655[_0xe65724(0x11f)]})[_0xe65724(0x1d8)](),_0x1d6877=![];_0x24d6ce&&Object[_0xe65724(0x1f4)](_0x24d6ce)[_0xe65724(0x1c7)](([_0x48d25d,_0x30463c])=>{if(_0x30463c==null)_0x1d6877=!![];});(!_0x24d6ce||_0x1d6877)&&(await initCoinResults(_0x41e655['coin']),_0x24d6ce=dbCoinResults['get'](_0xe65724(0x7a))[_0xe65724(0xcc)]({'coin':_0x41e655[_0xe65724(0x11f)]})[_0xe65724(0x1d8)]());_0x41e655[_0xe65724(0x142)]&&(_0x2934c0={'filled':_0x41e655['filled']*_0x41e655['price'],'amount':_0x41e655[_0xe65724(0x7b)]*_0x41e655[_0xe65724(0xe0)],'side':_0x41e655[_0xe65724(0xf2)]==_0xe65724(0xbc)?_0xe65724(0x92):_0xe65724(0xbc),'price':0x1/_0x41e655['price']},_0x41e655={..._0x41e655,..._0x2934c0});_0x167b1f?_0x450829=_0x41e655['side']=='buy'?_0x24d6ce[_0xe65724(0x180)]+_0x41e655[_0xe65724(0x7b)]:_0x24d6ce[_0xe65724(0x180)]-_0x41e655[_0xe65724(0x7b)]:_0x450829=await getCoinNumber(_0x41e655['coin']);if(_0x41e655[_0xe65724(0x20d)]&&_0x41e655[_0xe65724(0x20d)][_0xe65724(0x18d)]==config[_0xe65724(0x103)])_0x1adb6f=Number(_0x41e655[_0xe65724(0x20d)][_0xe65724(0xfd)]);else{if(_0x41e655[_0xe65724(0x20d)]&&_0x41e655[_0xe65724(0x20d)][_0xe65724(0x18d)]==_0xe65724(0x156)&&!_0x167b1f&&config[_0xe65724(0x103)]!=_0xe65724(0x91))_0x1adb6f=Number(_0x41e655[_0xe65724(0x20d)][_0xe65724(0xfd)])*gTicker[_0xe65724(0x156)+config['basecoin']];else _0x1adb6f=defaultFee*_0x41e655[_0xe65724(0x7b)]*_0x41e655[_0xe65724(0xe0)];}_0x41e655[_0xe65724(0xf2)]==_0xe65724(0x92)?(_0x4636ab=_0x450829!=0x0?(_0x24d6ce[_0xe65724(0x1f1)]*_0x24d6ce['number']+_0x41e655[_0xe65724(0xe0)]*(_0x450829-_0x24d6ce[_0xe65724(0x180)])+_0x1adb6f)/_0x450829:0x0,_0x6e0c8f=_0x24d6ce['realized']):(_0x4636ab=_0x450829!=0x0?(_0x24d6ce[_0xe65724(0x1f1)]*_0x24d6ce[_0xe65724(0x180)]-_0x41e655[_0xe65724(0xe0)]*(_0x24d6ce[_0xe65724(0x180)]-_0x450829)+_0x1adb6f)/_0x450829:0x0,_0x6e0c8f=_0x24d6ce[_0xe65724(0x1b2)]+(_0x41e655[_0xe65724(0xe0)]-_0x24d6ce[_0xe65724(0x1f1)])*_0x41e655['filled']);_0x2dc4c9=(_0x41e655['price']-_0x4636ab-_0x1adb6f/_0x41e655[_0xe65724(0x7b)])*_0x450829;let _0x2c033c={'coin':_0x41e655[_0xe65724(0x11f)],'number':_0x450829,'breakeven':formatResult(_0x4636ab,0x8),'realized':formatResult(_0x6e0c8f,0x8),'unrealized':formatResult(_0x2dc4c9,0x8),'fees':formatResult(_0x24d6ce['fees']+_0x1adb6f,0x8),'sells':_0x41e655[_0xe65724(0xf2)]=='sell'?_0x24d6ce[_0xe65724(0x18b)]+0x1:_0x24d6ce['sells'],'buys':_0x41e655[_0xe65724(0xf2)]==_0xe65724(0x92)?_0x24d6ce[_0xe65724(0xcb)]+0x1:_0x24d6ce['buys']};dbCoinResults['get'](_0xe65724(0x7a))['find']({'coin':_0x41e655[_0xe65724(0x11f)]})['assign'](_0x2c033c)['write']();if(!_0x167b1f){if(_0x41e655[_0xe65724(0x20d)]&&_0x41e655['fee'][_0xe65724(0x18d)]==_0xe65724(0x156)){const _0x3d05da=currentCoins[_0xe65724(0xcc)](_0x20ee03=>_0x20ee03[_0xe65724(0x11f)]==_0xe65724(0x156));if(_0x3d05da){let _0x2ed1fd=dbCoinResults['get'](_0xe65724(0x7a))[_0xe65724(0xcc)]({'coin':_0xe65724(0x156)})[_0xe65724(0x1d8)]();_0x2c033c={..._0x2ed1fd,'number':_0x3d05da[_0xe65724(0x180)]},dbCoinResults['get'](_0xe65724(0x7a))[_0xe65724(0xcc)]({'coin':_0xe65724(0x156)})[_0xe65724(0x179)](_0x2c033c)[_0xe65724(0xd1)]();}}}}async function placeOrder(_0x2c8cc4){const _0x32373f=_0x1dc520,_0x4046dd=config[_0x32373f(0x236)]==_0x32373f(0x225)?_0x32373f(0x225):'limit';if(lockOrders==ORDERS[_0x32373f(0x1cd)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x32373f(0xb9);let _0x582591=![];lastOrders=[];for(const _0x36c63f of _0x2c8cc4){let _0x2d859a,_0x4f3c54,_0x297319,_0x42df3b,_0x5bc017,_0xcdec49=_0x36c63f[_0x32373f(0xfa)];try{const _0x14d8d9=await exchange[_0x32373f(0x197)](_0xcdec49);_0x2d859a=_0x36c63f[_0x32373f(0x142)]?0x1/_0x36c63f['last']:_0x36c63f[_0x32373f(0x239)],_0x4f3c54=_0x14d8d9[_0x32373f(0xe4)],_0x297319=_0x14d8d9[_0x32373f(0x17e)];_0x36c63f[_0x32373f(0x142)]?(_0x42df3b=_0x36c63f[_0x32373f(0xf2)]==_0x32373f(0x92)?_0x32373f(0xbc):_0x32373f(0x92),_0x5bc017=Math['abs'](_0x36c63f[_0x32373f(0x147)])/_0x2d859a):(_0x42df3b=_0x36c63f['side'],_0x5bc017=Math[_0x32373f(0x117)](_0x36c63f['trade']));_0x4046dd==_0x32373f(0x21b)&&(config[_0x32373f(0x236)]=='limit-high'&&(_0x2d859a=_0x42df3b=='buy'?_0x4f3c54:_0x297319),config['ordertype']==_0x32373f(0x1f3)&&(_0x2d859a=_0x42df3b==_0x32373f(0x92)?_0x297319:_0x4f3c54));_0x5bc017=formatResult(_0x5bc017,0x8),_0x2d859a=formatResult(_0x2d859a,0x8);const _0x3642b9=_0x42df3b==_0x32373f(0xbc)?config[_0x32373f(0x105)]?String['fromCodePoint']('0x'+config[_0x32373f(0x105)])+'\x20':'':config[_0x32373f(0x133)]?String[_0x32373f(0x229)]('0x'+config[_0x32373f(0x133)])+'\x20':'',_0x1ab108=_0x4046dd==_0x32373f(0x225)?'Market':config[_0x32373f(0x236)]==_0x32373f(0xeb)?'Limit\x20(high-margin)':_0x32373f(0x16c),_0xbccbb1=(Math['floor'](Math[_0x32373f(0x154)]()*0x35a4e900)+0x5f5e100)[_0x32373f(0x94)]();lastOrders['push']({'customId':_0xbccbb1,'symbol':_0xcdec49,'coin':_0x36c63f[_0x32373f(0x11f)],'amount':_0x5bc017,'price':_0x2d859a,'side':_0x42df3b,'reverse':_0x36c63f['reverse'],'filled':0x0});if(_0x4046dd==_0x32373f(0x225))logHistory('order',''+_0x3642b9+_0x1ab108+_0x32373f(0x19f)+_0xcdec49+'\x20'+_0x42df3b+'\x20#'+formatResult(_0x5bc017,0x8)+'\x20@'+formatResult(_0x2d859a,0x8));else logHistory(_0x32373f(0x155),''+_0x3642b9+_0x1ab108+_0x32373f(0x19f)+_0xcdec49+'\x20'+_0x42df3b+'\x20#'+formatResult(_0x5bc017,0x8)+'\x20@'+formatResult(_0x2d859a,0x8));let _0x487454;_0x4046dd=='market'?_0x42df3b=='buy'&&[_0x32373f(0xf9),_0x32373f(0x1d7),_0x32373f(0xf6),'Huobi',_0x32373f(0x196)][_0x32373f(0x1bb)](config[_0x32373f(0x1b5)])?_0x487454=await exchange[_0x32373f(0x19a)](_0xcdec49,_0x4046dd,_0x42df3b,_0x5bc017,_0x2d859a):_0x487454=await exchange[_0x32373f(0x19a)](_0xcdec49,_0x4046dd,_0x42df3b,_0x5bc017,undefined):_0x487454=await exchange[_0x32373f(0x19a)](_0xcdec49,_0x4046dd,_0x42df3b,_0x5bc017,_0x2d859a);logger[_0x32373f(0x20c)](_0x32373f(0xc9)+_0x487454['id']+_0x32373f(0x186)+_0xbccbb1);const _0x2b497d=lastOrders['length']-0x1;if(_0x2b497d>=0x0&&lastOrders[_0x2b497d][_0x32373f(0x17c)]==_0xbccbb1){lastOrders[_0x2b497d][_0x32373f(0x235)]=_0x487454['id'];if(_0x487454[_0x32373f(0xe9)])lastOrders[_0x2b497d][_0x32373f(0xe9)]=_0x487454[_0x32373f(0xe9)];if(_0x487454[_0x32373f(0xe0)])lastOrders[_0x2b497d]['price']=_0x487454[_0x32373f(0xe0)];lastOrders[_0x2b497d]['fee']=_0x487454[_0x32373f(0x20d)];}if(config['cooldown']!=0x0){let _0x47ac75=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x47ac75=cooldownTracker[_0x32373f(0x134)]();const _0x5d12da=getTimeStamp();cooldownTracker['push'](_0x5d12da);if(_0x47ac75){const _0x4d10d1=fns[_0x32373f(0x20f)](new Date(_0x5d12da),new Date(_0x47ac75));if(_0x4d10d1<cooldownInterval){logHistory(_0x32373f(0x98),'Executed\x20'+config[_0x32373f(0x1ee)]+_0x32373f(0x204)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x32373f(0x127)),coolingDown=!![];break;}}}}catch(_0x359029){if(_0x359029['toString']()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x32373f(0x208)](_0x339df0=>_0x339df0['symbol']!=_0xcdec49),logHistory(_0x32373f(0x98),_0x32373f(0x85)+_0xcdec49),_0x582591=!![];else{if(_0x359029[_0x32373f(0x94)]()[_0x32373f(0x1bb)](_0x32373f(0x10c)))lastOrders=lastOrders[_0x32373f(0x208)](_0x3cd9e3=>_0x3cd9e3[_0x32373f(0xfa)]!=_0xcdec49),logHistory('error',_0x32373f(0xf8)+_0xcdec49),_0x582591=!![];else{if(_0x359029[_0x32373f(0x94)]()[_0x32373f(0x1bb)]('InvalidOrder'))lastOrders=lastOrders[_0x32373f(0x208)](_0x240015=>_0x240015['symbol']!=_0xcdec49),logHistory(_0x32373f(0x98),_0x32373f(0x224)+_0xcdec49),logger[_0x32373f(0x20c)](_0x359029),_0x582591=!![];else _0x359029['toString']()[_0x32373f(0x1bb)](_0x32373f(0x10e))?(lastOrders=lastOrders[_0x32373f(0x208)](_0xc79ac8=>_0xc79ac8[_0x32373f(0xfa)]!=_0xcdec49),logHistory(_0x32373f(0x98),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0xcdec49),_0x582591=!![]):(lastOrders=lastOrders['filter'](_0x27f07b=>_0x27f07b[_0x32373f(0xfa)]!=_0xcdec49),await handleError(_0x359029,_0x32373f(0xba),_0xcdec49));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x32373f(0xaf)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4f7a3f=config[_0x32373f(0x236)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x32373f(0x11a)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x26ce5e=_0x32373f;validateOrders(_0x26ce5e(0x1fb));},_0x4f7a3f);}else unlockOrders();_0x582591&&config[_0x32373f(0x140)]&&(logHistory(_0x32373f(0x98),_0x32373f(0x89)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x32373f(0x84)));}else{if(coolingDown)!config[_0x32373f(0x140)]&&logHistory(_0x32373f(0x98),_0x32373f(0xb0));else lockOrders!=ORDERS[_0x32373f(0x1cd)]&&(!config[_0x32373f(0x140)]&&(config['ordertype']==_0x32373f(0x225)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x32373f(0x98),_0x32373f(0x14a))));}}function persistOpenOrders(_0xfd225){const _0x37c630=_0x1dc520,_0x51b5bd={...config,'openOrders':_0xfd225};let _0xebdd75=dbConfig['get'](_0x37c630(0x1e0))[_0x37c630(0xcc)]({'botID':botID})[_0x37c630(0x1d8)]();_0xebdd75&&dbConfig[_0x37c630(0xd3)](_0x37c630(0x1e0))['find']({'botID':botID})[_0x37c630(0x179)](_0x51b5bd)[_0x37c630(0xd1)]();}function restoreOrders(){const _0x378bbe=_0x1dc520;let _0x4fc4f1;config[_0x378bbe(0x1d1)]&&allOpenOrders[_0x378bbe(0x1c7)](_0x25a80d=>{const _0x3551c4=_0x378bbe,_0x5b1353=config['openOrders']['find'](_0x290822=>_0x290822[_0x3551c4(0x235)]==_0x25a80d['id']);_0x5b1353&&(lastOrders[_0x3551c4(0x1ed)](_0x5b1353),_0x4fc4f1=_0x25a80d[_0x3551c4(0xf3)]);});if(lastOrders[_0x378bbe(0xaf)]>0x0){lockOrders=ORDERS[_0x378bbe(0x1aa)],validateOrdersState=_0x378bbe(0xe2),allOrdersPlaced=!![];const _0x24bac7=new Date()['getTime'](),_0x16af6a=config[_0x378bbe(0x236)]==_0x378bbe(0x225)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4fc4f1+_0x16af6a>_0x24bac7){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5ed92e=_0x378bbe;validateOrders(_0x5ed92e(0x1fb));},_0x4fc4f1+_0x16af6a-_0x24bac7);}else validateOrders(_0x378bbe(0x1fb));}}function _0x3cb2(){const _0x17a66e=['Error\x20details\x20(0):','settings','Initializing\x20exchange','loading-canceled','-------------------------------\x0a','emojibuy','shift','\x20value','cancelOrders()','8veamre','Portfolio\x20change\x20detected:\x20','-performance.json','Invalid\x20symbol:\x20',':\x20timer\x20>','BNB/','delta','-events.json','\x20metrics:</b>\x20\x0a\x0a','headless','toUpperCase','reverse','2.3.5','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','RateLimitExceeded','production','trade','18790rdGtAz','parse','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','<pre>','switch-manual',':\x20Bot\x20','message','none','watchOrders','watchTradesForSymbols','Error\x20while\x20deleting\x20files:\x20','random','order','BNB','string','2886888sxrJoz','fiat','net-basecoin','getMinutes','startnumber','running','join','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','starting-balances','configuration','add','<b>Bot\x20','change24h','Invalid\x20trigger:\x20','/USDT','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','Initializing\x20exchange:\x20already\x20done','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','slice','Limit\x20(low-margin)','Valid\x20trigger:\x20','fetchTickers',',\x20must\x20be\x20a\x203\x20digit\x20number','substring','recent20','progress','***','restart','Reset\x20|\x20','heapUsed','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','assign','USDC','decode64','customId','TUSD','ask','no\x20open\x20orders','number','keys','getMonth','change','sendPortfolioTelegram','toLowerCase','\x20|\x20Custom\x20ID:\x20','coin-loading-progress','sort','apiKey','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','sells','target','currency','Error\x20details\x20(1):','\x20>\x20','status\x20code\x20401','status','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Resetting\x20coin\x20results:\x20','splice','remove','Huobipro','fetchTicker','Net\x20effect','onepagemode','createOrder','recreateCoinResults()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','send','2\x20-\x20Validate\x20orders:\x20','\x20order:\x20','recreate','eur','RETRY\x20-\x20Error\x20in\x20','Resuming\x20(','placeOrder','showConfig','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','event','.json','initTickers()','LOCKED','Headless:\x20','storeHeadless','sortBy','version','kill','usd','constructor','realized','split','existsSync','exchange','Unfilled\x20order(s)\x20canceled\x20after\x20','getDate','cancelOrder','full','balancing\x20resumes\x20when\x20cooldown\x20ends','includes','\x20|\x20','removed','time','open','limits','pro','5HmuHPP','cloneDeep','args','portfolio','Binance','forEach','deleteHistoryAlerts','ORDERS.LOCKED','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','9404664CzVbfh','./config/','UNLOCKED','startsWith','1260087oyUGwL','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','openOrders','Loading\x20completed','\x20API\x20secret\x20is\x20invalid','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','watchTrades()','cancel','Bitget','value','ExchangeNotAvailable','2662igphFX','mkdirSync','min','</pre>','uncaughtException','total','bot','type','Cryptocom','getHours','/backup/','2\x20-\x20handling\x20FILLED\x20order:\x20','net-fiat','watchTrades','bot-','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','data','Symbol(s):\x20','1\x20-\x20Unlock\x20orders','push','cooldown','./version.json','added','breakeven','Fee\x20discount\x20refund\x20detected:\x20','limit-low','entries','\x20attempts','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20MB','toFixed','startdate','getCoinNumber()','final','OrderNotFound','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','changes','1\x20-\x20FILLED\x20unknown\x20order:\x20','2\x20-\x20Handled\x20open\x20orders','performance','configuration-stored','distribution','\x20orders\x20in\x20less\x20than\x20','autoliquidity','findIndex','date-fns','filter','14152qTBlix','timeshift','fetchTickers()','debug','fee','\x20|\x20exchange:\x20','differenceInSeconds','\x20exchange','RequestTimeout','market_cap','bb-secure.json','\x20|\x20lock\x20orders:\x20','./logs/','UNLOCKING','update-liquidity','ccxt','watchTradesForSymbols()','padStart','limit','Insufficient\x20funds\x20to\x20execute\x20order:\x20','3598eHOhFH','15202521DQksbr',')\x20|\x20exchange:\x20','Manual\x20balancing\x20required','Unknown\x20error:\x20','code','Exchange\x20error\x20details:','Order\x20is\x20invalid:\x20','market','exec','Exception\x20thrown\x20in\x20','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','fromCodePoint','log','balancing\x20resumed','replace','ORDERS.UNLOCKED','sqrt','amountToPrecision','botname','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','balances','slider','set','orderId','ordertype','OnMaintenance','\x20exchange\x20error:\x20','last','<b>','marketcap','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','success','************','coins','filled','2.6.22','privateKey','\x20uses\x20','yyyy/MM/dd','DDoSProtection','Error:\x20Invalid\x20argument\x20','highest','InsufficientFunds','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Error\x20details:','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','red_yellow_blue','Avoiding\x20continuous\x20order\x20attempts','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','portfolio2','Failed\x20to\x20load\x20coin\x20data\x20for\x20','canceled','decrypt','date','leftTxt','PAXG','buy','getOpenOrders()','toString','watchOrders()','privateKeyFromPem','Pausing\x20for\x20','error','colorscheme','lowdb','fetchOpenOrders','/EUR','\x20>\x20details:','/USD','BTC','test','USDT','cancelLoading','\x20minutes\x20-\x20','percentage','yargs/yargs','apiSecret','createWriteStream','max','quick','\x20>\x20[DEBUG]\x20','\x20:\x20','apply','stringify','USD','length','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','process\x20','\x20-\x20bot\x20not\x20started','indexOf','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','active','staging','excluded','lowdb/adapters/FileSync','initial','placeOrder()','marketcapsqrt','sell','bb-settings.json','-config.json','1\x20-\x20FILLED\x20known\x20order:\x20','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','/output-000.log','1717273octGtu','Bot\x20','round','ORDERS.UNLOCKING','bots','complete','closed','ID:\x20','path','buys','find','rightTxt','-results.json','fetchBalance','util','write','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','get','node-forge','\x20portfolio:</b>\x20\x0a\x0a','sha256','getCoins()','(((.+)+)+)+$','marketcapApi','quote','orderstatus','password','enabled','argv','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','price','format','ongoing','%\x20(','bid','logs','getFullYear','apiPassword','\x20has\x20a\x2024h\x20drop\x20of\x20','amount','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','limit-high','USDP','resetHistory','\x20/\x20','unlinkSync','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','API-key\x20format\x20invalid','side','timestamp','Initiating\x20bot\x20restart','isEqual','Cex','ETH','Order\x20amount\x20is\x20invalid:\x20','Bybit','symbol','1\x20-\x20Validate\x20orders:\x20','startprice','cost','has','0\x20-\x20EXECUTION:\x20','function','AuthenticationError','pki','basecoin','offset','emojisell','\x20API\x20key\x20is\x20invalid','NetworkError','request-time','threshold','event-history','Net\x20','Invalid\x20quantity','liquidity','must\x20be\x20greater\x20than\x20minimum\x20amount','search','token\x20is\x20expired','exchanges','remainingSymbols','marketcapEnabled','getSeconds','storeConfiguration','valid','abs','1\x20-\x20Handle\x20open\x20orders','basecoinvalue','timeout','datetime','getTime','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','coin','Block\x20transaction\x20detection:\x20','EUR','getStartingBalances','RETRY\x20-\x20Problem\x20resolved\x20after\x20','create','warning','exchange\x20reload','\x20hour','portfolio1','defaults','map','Loading\x20symbols','showname','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'];_0x3cb2=function(){return _0x17a66e;};return _0x3cb2();}async function sendMetricsTelegram(){const _0x271bc7=_0x1dc520;if(!coinsLoaded){process[_0x271bc7(0x19d)]({'telegrammsg':_0x271bc7(0x192)},_0x2eca48=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x58dab6='';if(config[_0x271bc7(0x12c)])_0x58dab6='<b>'+config[_0x271bc7(0x230)]+_0x271bc7(0x13f);else _0x58dab6=_0x271bc7(0x163)+botID+_0x271bc7(0x13f);const _0x711088=getKPIs(_0x271bc7(0x103)),_0x5b9a20=getKPIs(_0x271bc7(0x159),config[_0x271bc7(0x159)]),_0x1a6345=getKPIs(_0x271bc7(0x15a)),_0x1e1438=getKPIs(_0x271bc7(0x1e6),config[_0x271bc7(0x159)]);_0x58dab6+=_0x271bc7(0x14c),_0x58dab6+=_0x711088['leftTxt']+_0x271bc7(0xab)+_0x711088[_0x271bc7(0x1d8)]+'\x0a',_0x58dab6+=_0x711088[_0x271bc7(0xcd)]+':\x20'+_0x711088[_0x271bc7(0x183)]+'%\x0a',_0x58dab6+=_0x5b9a20[_0x271bc7(0x90)]+'\x20:\x20'+_0x5b9a20[_0x271bc7(0x1d8)]+'\x0a',_0x58dab6+=_0x5b9a20[_0x271bc7(0xcd)]+':\x20'+_0x5b9a20['change']+'%\x0a',_0x58dab6+=_0x1a6345[_0x271bc7(0x90)]+':\x20'+_0x1a6345['value']+'\x20('+config['basecoin']+')\x0a',_0x58dab6+=_0x1a6345[_0x271bc7(0xcd)]+':\x20'+_0x1a6345[_0x271bc7(0x183)]+_0x271bc7(0xe3)+config[_0x271bc7(0x103)]+')\x0a',_0x58dab6+=_0x1e1438[_0x271bc7(0x90)]+':\x20'+_0x1e1438['value']+'\x20('+config[_0x271bc7(0x159)]+')\x0a',_0x58dab6+=_0x1e1438[_0x271bc7(0xcd)]+':\x20'+_0x1e1438[_0x271bc7(0x183)]+_0x271bc7(0xe3)+config[_0x271bc7(0x159)]+')\x0a',_0x58dab6+=_0x271bc7(0x1dd),process[_0x271bc7(0x19d)]({'telegrammsg':_0x58dab6},_0x2fdf8e=>{});}async function sendPortfolioTelegram(){const _0xa2018a=_0x1dc520;if(!coinsLoaded||!currentCoins[0x0][_0xa2018a(0x203)]){process['send']({'telegrammsg':_0xa2018a(0x192)},_0x65bb1e=>{});return;}let _0x5be666='';if(config[_0xa2018a(0x12c)])_0x5be666=_0xa2018a(0x23a)+config[_0xa2018a(0x230)]+_0xa2018a(0xd5);else _0x5be666='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5be666+=_0xa2018a(0x14c),_0x5be666+='-------------------------------\x0a',_0x5be666+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5be666+=_0xa2018a(0x132),currentCoins['forEach'](_0x55c73f=>{const _0x37fede=_0xa2018a;_0x5be666+=_0x55c73f[_0x37fede(0x11f)]['padEnd'](0x7)+'|\x20'+formatPad(_0x55c73f[_0x37fede(0x203)],0x2,0x6)+'|\x20'+formatPad(_0x55c73f[_0x37fede(0x18c)],0x2,0x6)+'|\x20'+formatPad(_0x55c73f[_0x37fede(0x13d)]*0x64,0x2,0x6)+'\x0a';}),_0x5be666+='</pre>',process[_0xa2018a(0x19d)]({'telegrammsg':_0x5be666},_0x463c92=>{});}function formatPad(_0xd14d5,_0x204610,_0x4d3a6b){const _0x3fbbf7=_0x1dc520,_0x4b2171=formatResultString(_0xd14d5,_0x204610);return _0x4b2171?_0x4b2171[_0x3fbbf7(0x21a)](_0x4d3a6b):''[_0x3fbbf7(0x21a)](_0x4d3a6b);}function logHistory(_0x59833e,_0x54340f,_0x531536=''){const _0x88ccc0=_0x1dc520;logger['full'](''+_0x54340f);let _0x12a6ec={'time':getTimeStamp(),'type':_0x59833e,'event':_0x54340f};dbLogs[_0x88ccc0(0xd3)](_0x88ccc0(0xe5))[_0x88ccc0(0x1ed)](_0x12a6ec)[_0x88ccc0(0xd1)]();if(_0x531536=='')_0x531536=_0x54340f;proxyEmit('event',{'log':_0x12a6ec,'summary':_0x531536}),process[_0x88ccc0(0x19d)]({'telegram':{..._0x12a6ec,'botname':config[_0x88ccc0(0x230)],'showname':config[_0x88ccc0(0x12c)]}},_0x5ace72=>{});}function emitHistory(_0x23c74d={}){const _0x4483e4=_0x1dc520;Object[_0x4483e4(0x181)](_0x23c74d)[_0x4483e4(0xaf)]==0x0&&(_0x23c74d={'type':[_0x4483e4(0x155),_0x4483e4(0x1a7)],'event':'','page':0x1});if(_0x23c74d[_0x4483e4(0x1e1)]['includes'](_0x4483e4(0x1a7)))_0x23c74d[_0x4483e4(0x1e1)][_0x4483e4(0x194)](_0x23c74d[_0x4483e4(0x1e1)][_0x4483e4(0xb3)]('event'),0x1,'error',_0x4483e4(0x125),'success');if(dbLogs[_0x4483e4(0xfe)](_0x4483e4(0xe5))[_0x4483e4(0x1d8)]()){let _0x198551=dbLogs[_0x4483e4(0xd3)](_0x4483e4(0xe5))[_0x4483e4(0x208)](_0x1d3745=>{const _0x38974c=_0x4483e4;if(_0x23c74d[_0x38974c(0x1e1)][_0x38974c(0xaf)]==0x0)return![];else return _0x23c74d['type'][_0x38974c(0x1bb)](_0x1d3745[_0x38974c(0x1e1)]);})[_0x4483e4(0x208)](_0x11ba79=>{const _0x55fd08=_0x4483e4;if(_0x23c74d[_0x55fd08(0x1a7)]=='')return!![];else return _0x11ba79['event'][_0x55fd08(0x185)]()[_0x55fd08(0x1bb)](_0x23c74d['event'][_0x55fd08(0x185)]());})[_0x4483e4(0x1ad)]('time'),_0x5decee=_0x198551['value']()['length'];_0x198551=_0x198551[_0x4483e4(0x142)]()[_0x4483e4(0x16b)]((_0x23c74d['page']-0x1)*logPageSize,_0x23c74d['page']*logPageSize-0x1)[_0x4483e4(0x142)]()[_0x4483e4(0x1d8)](),proxyEmit('event-history',{'logs':_0x198551,'total':_0x5decee});}else proxyEmit(_0x4483e4(0x10a),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x57d082){const _0x29e339=_0x1dc520;if(dbLogs[_0x29e339(0xfe)](_0x29e339(0xe5))[_0x29e339(0x1d8)]()){const _0x40bbc7=dbLogs['get'](_0x29e339(0xe5))[_0x29e339(0x1ad)](_0x29e339(0x1be))[_0x29e339(0x208)](_0x1394e5=>{const _0x1e4fb1=_0x29e339;return _0x1394e5[_0x1e4fb1(0x1e1)]==_0x1e4fb1(0x155);})[_0x29e339(0x1d8)]();dbLogs[_0x29e339(0xd3)]('logs')[_0x29e339(0x195)]()[_0x29e339(0xd1)](),dbLogs[_0x29e339(0xd3)](_0x29e339(0xe5))[_0x29e339(0x179)](_0x40bbc7)[_0x29e339(0xd1)](),emitHistory(_0x57d082);}}async function pauseBot(_0x476938=pauseBotIntervalShort,_0x5b8ed0,_0x56b64e,_0x3bdac4=![]){const _0x11218e=_0x1dc520,_0xe1dcfc=new Date()[_0x11218e(0x11c)]();if(!lastErrorShown||_0xe1dcfc-lastErrorShown>=_0x476938){lastErrorShown=_0xe1dcfc;if(!lastBotPause)lastBotPause=_0xe1dcfc,consecutivePauses=0x1;else{if(_0xe1dcfc-lastBotPause-_0x476938<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x3bdac4){logHistory(_0x11218e(0x98),_0x5b8ed0+_0x11218e(0xdf)),await killBot();return;}else logHistory(_0x11218e(0x98),_0x5b8ed0+pauseBotMsg),_0x476938=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xe1dcfc;}_0x56b64e?logger[_0x11218e(0x20c)]('('+consecutivePauses+')\x20'+_0x5b8ed0+_0x11218e(0x9d),_0x56b64e):logger['debug']('('+consecutivePauses+')\x20'+_0x5b8ed0);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x476938),botPaused=![],_0x476938==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3b9871=_0x1dc520;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x3b9871(0x1af)},_0x2a07f3=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x37af47,_0x7f1475){const _0x328f67=_0x1dc520;if(botPaused)return;const _0x53c1fb=config[_0x328f67(0x1b5)]||'Exchange';if(_0x7f1475)logger[_0x328f67(0x20c)](_0x328f67(0x227)+_0x7f1475);const _0x4dc674=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x37af47['toString']()['includes'](_0x328f67(0xf1)))logHistory(_0x328f67(0x98),_0x53c1fb+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x4dc674();else{if(_0x37af47[_0x328f67(0x94)]()[_0x328f67(0x1bb)](_0x328f67(0x177)))logHistory(_0x328f67(0x98),_0x53c1fb+_0x328f67(0x11d)),_0x4dc674();else _0x37af47[_0x328f67(0x94)]()[_0x328f67(0x1bb)](_0x328f67(0x101))?(logHistory(_0x328f67(0x98),_0x53c1fb+_0x328f67(0x1ca)),logHistory(_0x328f67(0x98),_0x328f67(0x19c)),_0x4dc674()):await handleError(_0x37af47,null);}}function _0x2444(_0x1bf27a,_0xe6c77d){const _0x273923=_0x3cb2();return _0x2444=function(_0x388538,_0x147b6d){_0x388538=_0x388538-0x76;let _0x3cb209=_0x273923[_0x388538];return _0x3cb209;},_0x2444(_0x1bf27a,_0xe6c77d);}async function handleError(_0x417759,_0x143f55,_0x3bfbef=''){const _0xd62c43=_0x1dc520;if(botPaused)return;let _0x27d9ae;const _0xab1bf=config[_0xd62c43(0x1b5)]||'Exchange';if(_0x143f55)logger['debug'](_0xd62c43(0x227)+_0x143f55);if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)](_0xd62c43(0x80)))_0x27d9ae=_0xab1bf+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x27d9ae,_0x417759);else{if(_0x417759['toString']()['includes'](_0xd62c43(0x145)))_0x27d9ae=_0xab1bf+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x27d9ae,_0x417759);else{if(_0x417759['toString']()['includes'](_0xd62c43(0x1d9))||_0x417759[_0xd62c43(0x94)]()['includes'](_0xd62c43(0x237)))_0x27d9ae=_0xab1bf+_0xd62c43(0x11e),await pauseBot(undefined,_0x27d9ae,_0x417759[_0xd62c43(0x94)]());else{if(_0x417759[_0xd62c43(0x94)]()['includes'](_0xd62c43(0x211)))_0x27d9ae=_0xab1bf+_0xd62c43(0x1d4),await pauseBot(undefined,_0x27d9ae,_0x417759[_0xd62c43(0x94)]());else{if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)](_0xd62c43(0x1e9)))_0x27d9ae=_0xab1bf+_0xd62c43(0x1f6),await pauseBot(undefined,_0x27d9ae,_0x417759[_0xd62c43(0x94)]());else{if(_0x417759[_0xd62c43(0x94)]()['toLowerCase']()[_0xd62c43(0x1bb)](_0xd62c43(0xf3))||_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x185)]()[_0xd62c43(0x1bb)](_0xd62c43(0x108)))_0x27d9ae=_0xd62c43(0xf0),await pauseBot(undefined,_0x27d9ae,_0x417759[_0xd62c43(0x94)]());else{if(_0x417759['toString']()[_0xd62c43(0x1bb)]('InvalidNonce'))_0x27d9ae=_0xab1bf+_0xd62c43(0x14b),await pauseBot(undefined,_0x27d9ae,_0x417759[_0xd62c43(0x94)]());else{if(_0x417759 instanceof ccxt[_0xd62c43(0x107)])_0x27d9ae=_0xab1bf+'\x20network\x20error:\x20'+_0x417759[_0xd62c43(0x94)](),logger[_0xd62c43(0x20c)]('Network\x20error\x20details:',_0x417759),await pauseBot(undefined,_0x27d9ae,_0x417759);else{if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)](_0xd62c43(0xf1)))logHistory(_0xd62c43(0x98),_0xab1bf+_0xd62c43(0x106)),logHistory(_0xd62c43(0x98),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)](_0xd62c43(0x177)))logHistory(_0xd62c43(0x98),_0xab1bf+_0xd62c43(0x1d3)),logHistory('error',_0xd62c43(0x15f)),await killBot();else{if(_0x417759[_0xd62c43(0x94)]()['includes'](_0xd62c43(0x101))&&_0x417759['toString']()[_0xd62c43(0x1bb)](_0xd62c43(0x110)))_0x27d9ae=_0xab1bf+_0xd62c43(0xd2),await pauseBot(undefined,_0x27d9ae,_0x417759,!![]);else{if(_0x417759[_0xd62c43(0x94)]()['includes'](_0xd62c43(0x101)))config[_0xd62c43(0xe7)]?_0x27d9ae=_0xab1bf+_0xd62c43(0x228):_0x27d9ae=_0xab1bf+_0xd62c43(0x8a),logHistory(_0xd62c43(0x98),_0x27d9ae),logHistory('error',_0xd62c43(0x15f)),await killBot();else{if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)]('PermissionDenied'))logHistory(_0xd62c43(0x98),_0xab1bf+_0xd62c43(0x87)),logHistory('error',_0xd62c43(0x15f)),await killBot();else{if(_0x417759[_0xd62c43(0x94)]()[_0xd62c43(0x1bb)](_0xd62c43(0x83)))logHistory(_0xd62c43(0x98),_0xd62c43(0x21c)+_0x3bfbef);else{if(_0x417759 instanceof ccxt['ExchangeError']){_0x27d9ae=_0xab1bf+_0xd62c43(0x238)+_0x417759[_0xd62c43(0x94)](),logHistory(_0xd62c43(0x98),_0x27d9ae),logger[_0xd62c43(0x20c)](_0xd62c43(0x223),_0x417759);if(_0x3bfbef)logger['debug'](_0xd62c43(0x1eb)+_0x3bfbef);await pauseBot(undefined,_0x27d9ae,_0x417759);}else{_0x27d9ae=_0xd62c43(0x221)+_0x417759['toString'](),logHistory(_0xd62c43(0x98),_0x27d9ae),logger[_0xd62c43(0x20c)](_0x27d9ae+_0xd62c43(0x9d),_0x417759);if(_0x3bfbef)logger[_0xd62c43(0x20c)]('Symbol(s):\x20'+_0x3bfbef);await pauseBot(undefined,_0x27d9ae);}}}}}}}}}}}}}}}}function decryptRSA(_0x336153,_0x169b86){const _0x18ac00=_0x1dc520,_0x43463d=forge[_0x18ac00(0x102)][_0x18ac00(0x96)](_0x336153),_0x46e268=_0x43463d[_0x18ac00(0x8e)](forge[_0x18ac00(0xd0)][_0x18ac00(0x17b)](_0x169b86),'RSA-OAEP',{'md':forge['md'][_0x18ac00(0xd6)][_0x18ac00(0x124)](),'mgf1':{'md':forge['md']['sha256'][_0x18ac00(0x124)]()}});return _0x46e268;}async function withRetry(_0x55b201,_0x37b789){const _0xd14dfa=_0x1dc520;let _0x1fc176=![],_0x5e6dd6=0x0,_0x50b15b,_0x1d4c1b;while(_0x5e6dd6<maxRetries){try{_0x50b15b=await _0x37b789();break;}catch(_0x85cbf1){_0x1d4c1b=_0x85cbf1,!_0x1fc176?(_0x1fc176=!![],logger[_0xd14dfa(0x20c)](_0xd14dfa(0x1a2)+_0x55b201+':',_0x85cbf1[_0xd14dfa(0x94)]())):await sleep(retryInterval);}_0x5e6dd6++;}if(_0x5e6dd6==0x0)return _0x50b15b;if(_0x5e6dd6>=maxRetries)throw _0x1d4c1b;else return logger[_0xd14dfa(0x20c)](_0xd14dfa(0x123)+_0x5e6dd6+_0xd14dfa(0x1f5)),_0x50b15b;}function formatResult(_0x580361,_0x5a4b8a){const _0x28b605=_0x1dc520;return parseFloat(_0x580361[_0x28b605(0x1f8)](_0x5a4b8a));}function formatResultTruncate(_0x50eace,_0xa02a42){const _0x25f558=_0x1dc520;let _0x37d154=formatResultString(_0x50eace,0xa),_0x2c6672=_0x37d154[_0x25f558(0xb3)]('.');return _0x2c6672!=-0x1&&(_0x37d154=_0x37d154[_0x25f558(0x16b)](0x0,_0x2c6672+_0xa02a42+0x1)),Number(_0x37d154);}function formatResultString(_0x3d949f,_0x53c136){const _0x7f73e0=_0x1dc520;let _0x5addc9;if(!(''+_0x3d949f)[_0x7f73e0(0x1bb)]('e'))_0x5addc9=+(Math[_0x7f73e0(0xc4)](_0x3d949f+'e+'+_0x53c136)+'e-'+_0x53c136);else{let _0x14af91=(''+_0x3d949f)['split']('e'),_0x126541='';+_0x14af91[0x1]+_0x53c136>0x0&&(_0x126541='+'),_0x5addc9=+(Math[_0x7f73e0(0xc4)](+_0x14af91[0x0]+'e'+_0x126541+(+_0x14af91[0x1]+_0x53c136))+'e-'+_0x53c136);}return Number(_0x5addc9)[_0x7f73e0(0x1f8)](_0x53c136);}function getServerTime(){const _0x42c1a1=_0x1dc520,_0xda9bf7=new Date();return _0xda9bf7[_0x42c1a1(0xe6)]()+'/'+(_0xda9bf7[_0x42c1a1(0x182)]()+0x1)['toString']()[_0x42c1a1(0x21a)](0x2,'0')+'/'+_0xda9bf7[_0x42c1a1(0x1b7)]()[_0x42c1a1(0x94)]()[_0x42c1a1(0x21a)](0x2,'0')+'\x20'+_0xda9bf7[_0x42c1a1(0x1e3)]()['toString']()['padStart'](0x2,'0')+':'+_0xda9bf7[_0x42c1a1(0x15b)]()[_0x42c1a1(0x94)]()[_0x42c1a1(0x21a)](0x2,'0')+':'+_0xda9bf7[_0x42c1a1(0x114)]()[_0x42c1a1(0x94)]()[_0x42c1a1(0x21a)](0x2,'0');}function getTimeStamp(){const _0x146f4f=_0x1dc520,_0x190874=shiftedTime();return _0x190874['getFullYear']()+'/'+(_0x190874[_0x146f4f(0x182)]()+0x1)[_0x146f4f(0x94)]()[_0x146f4f(0x21a)](0x2,'0')+'/'+_0x190874[_0x146f4f(0x1b7)]()['toString']()[_0x146f4f(0x21a)](0x2,'0')+'\x20'+_0x190874[_0x146f4f(0x1e3)]()[_0x146f4f(0x94)]()[_0x146f4f(0x21a)](0x2,'0')+':'+_0x190874[_0x146f4f(0x15b)]()['toString']()['padStart'](0x2,'0')+':'+_0x190874[_0x146f4f(0x114)]()['toString']()[_0x146f4f(0x21a)](0x2,'0');}function getDate(){const _0x4f8583=_0x1dc520,_0x4aaed4=shiftedTime();return _0x4aaed4['getFullYear']()+'/'+(_0x4aaed4['getMonth']()+0x1)[_0x4f8583(0x94)]()[_0x4f8583(0x21a)](0x2,'0')+'/'+_0x4aaed4[_0x4f8583(0x1b7)]()[_0x4f8583(0x94)]()[_0x4f8583(0x21a)](0x2,'0');}function getHour(){const _0x361292=_0x1dc520,_0x5a7e87=shiftedTime();return _0x5a7e87[_0x361292(0x1e3)]()[_0x361292(0x94)]()[_0x361292(0x21a)](0x2,'0');}function sleep(_0xc8f5a9){return new Promise(_0xf443ce=>setTimeout(_0xf443ce,_0xc8f5a9));}function shiftedTime(){const _0x1f3c35=_0x1dc520,_0x1fcf54=new Date();let _0x456235=_0x1fcf54;if(config&&config[_0x1f3c35(0x20a)]!==0x0)_0x456235=fns[_0x1f3c35(0x162)](_0x1fcf54,{'hours':config[_0x1f3c35(0x20a)]});return _0x456235;}function timer(_0x1344cb){const _0x1f27fb=_0x1dc520,_0x4abe07=new Date();!lasttime?console['log'](getTimeStamp()+_0x1f27fb(0x13b),_0x1344cb,_0x4abe07):console[_0x1f27fb(0x22a)](getTimeStamp()+':\x20timer\x20>',_0x1344cb,(_0x4abe07-lasttime)/0x3e8),lasttime=_0x4abe07;}