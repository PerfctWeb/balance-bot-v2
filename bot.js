const _0x14f27a=_0x1bc6;(function(_0x5d3c58,_0x55b922){const _0x5193c7=_0x1bc6,_0x3894af=_0x5d3c58();while(!![]){try{const _0x169fca=-parseInt(_0x5193c7(0x22b))/0x1*(parseInt(_0x5193c7(0x285))/0x2)+parseInt(_0x5193c7(0x2f6))/0x3*(-parseInt(_0x5193c7(0x29f))/0x4)+parseInt(_0x5193c7(0x2a5))/0x5*(parseInt(_0x5193c7(0x2ac))/0x6)+parseInt(_0x5193c7(0x18e))/0x7+-parseInt(_0x5193c7(0x1bf))/0x8+parseInt(_0x5193c7(0x1e7))/0x9*(parseInt(_0x5193c7(0x1ad))/0xa)+-parseInt(_0x5193c7(0x26a))/0xb*(-parseInt(_0x5193c7(0x2c5))/0xc);if(_0x169fca===_0x55b922)break;else _0x3894af['push'](_0x3894af['shift']());}catch(_0x1acd06){_0x3894af['push'](_0x3894af['shift']());}}}(_0x20a4,0x2771f));const _0x28f119=function(){let _0xb59768=!![];return function(_0x588df8,_0x2b8c6a){const _0x462be3=_0xb59768?function(){const _0x1f259c=_0x1bc6;if(_0x2b8c6a){const _0x1b57ff=_0x2b8c6a[_0x1f259c(0x278)](_0x588df8,arguments);return _0x2b8c6a=null,_0x1b57ff;}}:function(){};return _0xb59768=![],_0x462be3;};}(),_0x2decec=_0x28f119(this,function(){const _0x3689c7=_0x1bc6;return _0x2decec[_0x3689c7(0x247)]()[_0x3689c7(0x2a6)](_0x3689c7(0x2fc))[_0x3689c7(0x247)]()[_0x3689c7(0x31a)](_0x2decec)['search'](_0x3689c7(0x2fc));});_0x2decec();'use strict';const ccxt=require('ccxt'),low=require(_0x14f27a(0x193)),FileSync=require(_0x14f27a(0x269)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x14f27a(0x1d1))[_0x14f27a(0x194)],util=require(_0x14f27a(0x200)),argv=require('yargs/yargs')(process[_0x14f27a(0x280)][_0x14f27a(0x253)](0x2))[_0x14f27a(0x280)],path=require(_0x14f27a(0x187)),axios=require(_0x14f27a(0x206));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x14f27a(0x27c),_0x14f27a(0x331),_0x14f27a(0x258),_0x14f27a(0x2de),'USDC',_0x14f27a(0x1c7)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x14f27a(0x2a4)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x14f27a(0x259)+pauseBotInterval/0xea60+_0x14f27a(0x30c),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x14f27a(0x207))['version'],botID=process[_0x14f27a(0x280)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x14f27a(0x184)](botID)&&(console['log']('Error:\x20Invalid\x20argument\x20'+botID+_0x14f27a(0x22c)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x14f27a(0x2ce)+userID+'/':_0x14f27a(0x2ce),loggerfile=fs[_0x14f27a(0x1f3)](logspath+_0x14f27a(0x1e2),{'flags':'a'});!fs[_0x14f27a(0x325)](configpath)&&fs[_0x14f27a(0x2dd)](configpath);!fs[_0x14f27a(0x325)](logspath)&&fs[_0x14f27a(0x2dd)](logspath);const configfile=configpath+_0x14f27a(0x17a)+botID+_0x14f27a(0x1ce),logfile=configpath+_0x14f27a(0x17a)+botID+_0x14f27a(0x203),performancefile=configpath+_0x14f27a(0x17a)+botID+_0x14f27a(0x1d9),coinresultsfile=configpath+_0x14f27a(0x17a)+botID+_0x14f27a(0x1fc),settingsfile=configpath+_0x14f27a(0x1ee),securefile=configpath+_0x14f27a(0x32f),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x14f27a(0x284)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x14f27a(0x290)]({'data':[],'version':serverversion})[_0x14f27a(0x284)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x14f27a(0x290)]({'bot':[],'version':serverversion})[_0x14f27a(0x284)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x14f27a(0x290)]({'coins':[],'version':serverversion})[_0x14f27a(0x284)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x14f27a(0x1b4),'rsaStandard':_0x14f27a(0x318)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4b73c1=>{console['log'](_0x4b73c1);},'simple':_0x235795=>{const _0x38e5d7=_0x14f27a;console[_0x38e5d7(0x32b)](_0x235795),loggerfile['write'](util[_0x38e5d7(0x2b2)](_0x235795)+'\x0a');},'full':async(_0x40cab7,_0x4dd102='')=>{const _0x1f54d1=_0x14f27a;let _0x55b951;if(config[_0x1f54d1(0x30f)])_0x55b951=getTimeStamp()+':\x20'+config[_0x1f54d1(0x1cd)]+_0x1f54d1(0x329)+_0x40cab7;else _0x55b951=getTimeStamp()+_0x1f54d1(0x2ae)+botID+_0x1f54d1(0x329)+_0x40cab7;console[_0x1f54d1(0x32b)](_0x55b951),loggerfile[_0x1f54d1(0x284)](util[_0x1f54d1(0x2b2)](_0x55b951)+'\x0a'),_0x4dd102&&(console[_0x1f54d1(0x32b)](_0x4dd102),loggerfile[_0x1f54d1(0x284)](util[_0x1f54d1(0x2b2)](_0x4dd102)+'\x0a'));},'debug':async(_0x1215ce,_0x1d956f='')=>{const _0x3c148f=_0x14f27a;let _0x2880df;if(config[_0x3c148f(0x30f)])_0x2880df=getTimeStamp()+':\x20'+config[_0x3c148f(0x1cd)]+'\x20>\x20[DEBUG]\x20'+_0x1215ce;else _0x2880df=getTimeStamp()+_0x3c148f(0x2ae)+botID+_0x3c148f(0x1b0)+_0x1215ce;if(debugging)console['log'](_0x2880df);loggerfile[_0x3c148f(0x284)](util[_0x3c148f(0x2b2)](_0x2880df)+'\x0a');if(_0x1d956f){if(debugging)console['log'](_0x1d956f);loggerfile[_0x3c148f(0x284)](util[_0x3c148f(0x2b2)](_0x1d956f)+'\x0a');}}};process['on']('uncaughtException',function(_0x1d2c7a){const _0x258b29=_0x14f27a;handleError(_0x1d2c7a,_0x258b29(0x19c));});settings[_0x14f27a(0x2f8)]!=config[_0x14f27a(0x2f8)]&&updateTimeshift(settings['timeshift']);settings[_0x14f27a(0x261)]!=config[_0x14f27a(0x261)]&&updateOnepagemode(settings[_0x14f27a(0x261)]);(settings[_0x14f27a(0x28f)]&&!config[_0x14f27a(0x28f)]||!settings['marketcapApi']&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x14f27a(0x28f)]);process[_0x14f27a(0x204)]({'started':_0x14f27a(0x237)},_0x4867da=>{}),initializeProcessListeners();function proxyEmit(_0x119809,_0x223c61=null){const _0x53391d=_0x14f27a;process[_0x53391d(0x204)]({'function':_0x119809,'args':_0x223c61},_0x53588a=>{});}function initializeProcessListeners(){process['on']('message',_0x2fcf71=>{const _0x3ac44b=_0x1bc6;switch(Object['keys'](_0x2fcf71)[0x0]){case _0x3ac44b(0x2f8):_0x2fcf71['timeshift']!=undefined&&(settings['timeshift']=_0x2fcf71[_0x3ac44b(0x2f8)],updateTimeshift(settings[_0x3ac44b(0x2f8)]));break;case'onepagemode':_0x2fcf71[_0x3ac44b(0x261)]!=undefined&&(settings[_0x3ac44b(0x261)]=_0x2fcf71[_0x3ac44b(0x261)],updateOnepagemode(settings['onepagemode']));break;case _0x3ac44b(0x28f):_0x2fcf71['marketcapApi']!=undefined&&(settings['marketcapApi']=_0x2fcf71['marketcapApi'],updateMarketcapApi(settings['marketcapApi']));break;case _0x3ac44b(0x17b):_0x2fcf71['bots']!=undefined&&(bots=JSON[_0x3ac44b(0x183)](_0x2fcf71['bots']),proxyEmit(_0x3ac44b(0x17b),bots));break;case _0x3ac44b(0x29a):switch(_0x2fcf71['function']){case'initclient':initclient();break;case _0x3ac44b(0x338):toggleBotMode();break;case'emitHistory':emitHistory(_0x2fcf71[_0x3ac44b(0x217)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x2fcf71[_0x3ac44b(0x217)]);break;case _0x3ac44b(0x1c0):getPortfolio(_0x2fcf71[_0x3ac44b(0x217)]);break;case _0x3ac44b(0x2e1):storeConfiguration(_0x2fcf71['args']);break;case _0x3ac44b(0x2ed):storeHeadless(_0x2fcf71[_0x3ac44b(0x217)]);break;case _0x3ac44b(0x1b8):storeFiat(_0x2fcf71[_0x3ac44b(0x217)]);break;case _0x3ac44b(0x178):resetHistory();break;case _0x3ac44b(0x1c5):getStartingBalances(getNormalizedPerformance());break;case _0x3ac44b(0x2d6):placeOrder(_0x2fcf71[_0x3ac44b(0x217)]);break;case _0x3ac44b(0x224):cancelLoading();break;case _0x3ac44b(0x1b2):showConfig();break;case _0x3ac44b(0x2d5):sendMetricsTelegram();break;case _0x3ac44b(0x2a2):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x30c84a=![]){const _0x93cbef=_0x14f27a;logger[_0x93cbef(0x174)](_0x93cbef(0x242)+(_0x30c84a?_0x93cbef(0x1df):_0x93cbef(0x335))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x30c84a)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x93cbef(0x32d)]!='***'){loadingProgress=0x0;if(_0x30c84a){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x39598f){handleErrorNoStop(_0x39598f,_0x93cbef(0x24b));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x23bc9e=await getCoins();[currentCoins,currentCoinsAll]=_0x23bc9e,blockTransactionDetection=![],getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x93cbef(0x174)](_0x93cbef(0x232)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x93cbef(0x250)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0x42ee2d){const _0x4bab7c=_0x14f27a;let _0x4dae1f=![];if(_0x42ee2d)_0x4dae1f=!![];let _0x587598;_0x4dae1f?_0x587598=_0x42ee2d[_0x4bab7c(0x2cc)](_0x22a991=>_0x22a991['coin']):_0x587598=currentCoinsAll[_0x4bab7c(0x2cc)](_0x51779a=>_0x51779a[_0x4bab7c(0x196)]);if(!config[_0x4bab7c(0x28f)]||!_0x4dae1f&&!config[_0x4bab7c(0x1ff)]||_0x587598[_0x4bab7c(0x250)]==0x0)return;let _0x5c7eed=null;try{_0x5c7eed=await axios[_0x4bab7c(0x2ef)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x587598[_0x4bab7c(0x247)]()}});}catch(_0x5bbb2a){_0x5c7eed=null,_0x5bbb2a[_0x4bab7c(0x247)]()[_0x4bab7c(0x25b)](_0x4bab7c(0x176))?(config[_0x4bab7c(0x28f)]=![],updateConfig(),proxyEmit('configuration',emittedConfiguration()),logHistory(_0x4bab7c(0x1f8),_0x4bab7c(0x2e3))):(logHistory(_0x4bab7c(0x1f8),_0x4bab7c(0x2d0)+schedulerInterval/(0x3c*0x3e8)+_0x4bab7c(0x30c)),logger[_0x4bab7c(0x174)](_0x4bab7c(0x323),_0x5bbb2a['toString']()+_0x4bab7c(0x2a3)+_0x5bbb2a['code']));}if(_0x5c7eed){let _0x1c2840=0x0;const _0x4318d7=_0x5c7eed['data'];_0x587598['forEach'](_0x265679=>{const _0x485918=_0x4bab7c;if(_0x4318d7[_0x485918(0x2b9)][_0x265679][0x0])_0x1c2840+=_0x4318d7[_0x485918(0x2b9)][_0x265679][0x0][_0x485918(0x170)]['USD'][_0x485918(0x2d9)];}),_0x587598[_0x4bab7c(0x1a1)](_0x64f005=>{const _0x37ac2f=_0x4bab7c,_0x53395f=_0x4318d7['data'][_0x64f005][0x0]?_0x4318d7[_0x37ac2f(0x2b9)][_0x64f005][0x0]['quote'][_0x37ac2f(0x27c)][_0x37ac2f(0x2d9)]:0x0;if(_0x4dae1f){const _0x761766=_0x42ee2d[_0x37ac2f(0x179)](_0x1d7b6b=>_0x1d7b6b[_0x37ac2f(0x196)]==_0x64f005);_0x761766&&(_0x761766[_0x37ac2f(0x172)]=_0x53395f);}else{const _0x181085=currentCoins[_0x37ac2f(0x179)](_0x48a4c6=>_0x48a4c6[_0x37ac2f(0x196)]==_0x64f005);_0x181085&&(_0x181085['marketcap']=_0x53395f);const _0x534952=currentCoinsAll['find'](_0x13c41b=>_0x13c41b[_0x37ac2f(0x196)]==_0x64f005);_0x534952&&(_0x534952[_0x37ac2f(0x172)]=_0x53395f);}}),!_0x4dae1f&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x42cd14=_0x14f27a,_0xf39be5=0x2;let _0x31038a=0x0,_0x2e08aa=0x0,_0x4bfaac=0x0,_0x3454d6=0x0,_0x4bf97e=0x0;config['portfolio'][_0x42cd14(0x1a1)](_0x5a89a8=>{const _0x21c770=_0x42cd14;if(!_0x5a89a8[_0x21c770(0x20f)]){_0x4bfaac++,_0x31038a+=_0x5a89a8[_0x21c770(0x30b)];if(_0x5a89a8[_0x21c770(0x30b)]===-0x1){_0x31038a++;const _0x5616df=currentCoinsAll[_0x21c770(0x179)](_0x5759ce=>_0x5759ce[_0x21c770(0x196)]==_0x5a89a8[_0x21c770(0x196)]);_0x5616df&&(_0x3454d6+=_0x5616df[_0x21c770(0x172)],_0x4bf97e+=Math[_0x21c770(0x2bf)](_0x5616df[_0x21c770(0x172)]));}if(_0x5a89a8[_0x21c770(0x30b)]!==-0x1)_0x2e08aa++;}});let _0xd68fe9;const _0x8a8d6c=0x64-_0x31038a,_0x5d8c06=_0x4bfaac-_0x2e08aa;_0xd68fe9=_0x5d8c06===0x0?_0x31038a:Math[_0x42cd14(0x27e)](0x64,_0x31038a),config[_0x42cd14(0x2f9)][_0x42cd14(0x1a1)](_0x254e4b=>{const _0x423208=_0x42cd14,_0x224cef=currentCoinsAll[_0x423208(0x179)](_0x377262=>_0x377262[_0x423208(0x196)]==_0x254e4b[_0x423208(0x196)]);_0x224cef&&(_0x254e4b[_0x423208(0x172)]=_0x224cef[_0x423208(0x172)]);if(!_0x254e4b[_0x423208(0x20f)]){if(_0xd68fe9<=0x64){if(_0x254e4b['slider']===-0x1){if(_0x3454d6!==0x0&&config[_0x423208(0x1ff)]){if(_0x224cef){if(config['marketcapEnabled']==_0x423208(0x172))_0x254e4b[_0x423208(0x1ba)]=(_0x8a8d6c/(_0x3454d6/_0x224cef[_0x423208(0x172)]))[_0x423208(0x23e)](_0xf39be5);else config['marketcapEnabled']==_0x423208(0x230)&&(_0x254e4b[_0x423208(0x1ba)]=(_0x8a8d6c/(_0x4bf97e/Math[_0x423208(0x2bf)](_0x224cef[_0x423208(0x172)])))[_0x423208(0x23e)](_0xf39be5));}}}}}}),updateConfig();}function updateConfig(){const _0x45fadf=_0x14f27a;let _0xfdd4d4=dbConfig[_0x45fadf(0x2ef)](_0x45fadf(0x279))[_0x45fadf(0x179)]({'botID':botID})[_0x45fadf(0x254)]();_0xfdd4d4&&dbConfig[_0x45fadf(0x2ef)](_0x45fadf(0x279))[_0x45fadf(0x179)]({'botID':botID})[_0x45fadf(0x29b)](config)[_0x45fadf(0x284)]();}async function startScheduler(){const _0x1e0b0c=_0x14f27a,_0x422884=shiftedTime()['getHours'](),_0x4ff9ec=process[_0x1e0b0c(0x264)]()[_0x1e0b0c(0x27a)]/0x400/0x400;logger[_0x1e0b0c(0x174)](_0x1e0b0c(0x24c)+process['pid']+_0x1e0b0c(0x2db)+_0x4ff9ec+_0x1e0b0c(0x311)),getMarketCap(),_0x422884==0x4&&restartBot(),(_0x422884==0x6||_0x422884==0x12)&&reloadExchange(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x1559c2=![]){const _0x3c0beb=_0x14f27a;logger[_0x3c0beb(0x174)](_0x3c0beb(0x1f5));if(!_0x1559c2){while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange();}process['send']({'stop':'restart'},_0x2a8d2b=>{});}async function stopExchange(){const _0x392935=_0x14f27a;if(!exchange)return;exchangeStopped=!![];try{await exchange[_0x392935(0x30e)]();}catch(_0x262eda){await handleError(_0x262eda,_0x392935(0x255));}}async function reloadExchange(){const _0x1841f5=_0x14f27a;logger[_0x1841f5(0x174)](_0x1841f5(0x19d));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange(),reset(!![]);}async function initExchange(_0x186bc6=config[_0x14f27a(0x2eb)],_0x379895=config[_0x14f27a(0x32d)],_0x15195c=config[_0x14f27a(0x1c9)],_0x2bb7ee=config['apiPassword']){const _0x5cba7c=_0x14f27a;await stopExchange();!supportedExchanges()[_0x5cba7c(0x25b)](_0x186bc6)&&(logHistory(_0x5cba7c(0x1f8),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x186bc6+_0x5cba7c(0x1ae)),killBot());const _0x4faf71=ccxt[_0x5cba7c(0x1f7)][_0x186bc6[_0x5cba7c(0x2d1)]()];exchange=new _0x4faf71({'apiKey':_0x379895,'secret':_0x15195c,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5cba7c(0x257)}});if(_0x2bb7ee)exchange[_0x5cba7c(0x1f2)]=_0x2bb7ee;}function setStableCoins(){const _0x3becaa=_0x14f27a;let _0x5da133=config[_0x3becaa(0x301)]==_0x3becaa(0x226)?'ETH':config[_0x3becaa(0x301)]==_0x3becaa(0x18d)?'PAXG':_0x3becaa(0x185),_0x27bc59=!allSymbols[_0x3becaa(0x25b)](_0x5da133+'/USD')?'USDT':_0x3becaa(0x27c),_0x48955b=!allSymbols[_0x3becaa(0x25b)](_0x5da133+'/EUR')?_0x27bc59:'EUR';stablecoins={'eur':{'coin':''+_0x5da133+_0x48955b,'symbol':_0x5da133+'/'+_0x48955b},'usd':{'coin':''+_0x5da133+_0x27bc59,'symbol':_0x5da133+'/'+_0x27bc59}};}async function initwsCcxt(){const _0x400dec=_0x14f27a;initCycle++;const _0x176712=initCycle;let _0x4ec366=[];config[_0x400dec(0x2f9)][_0x400dec(0x1a1)](_0x33accd=>{const _0x56d206=_0x400dec;if(!_0x33accd[_0x56d206(0x20f)]&&_0x33accd['coin']!=config[_0x56d206(0x301)])_0x4ec366[_0x56d206(0x2df)](_0x33accd[_0x56d206(0x1a7)]);});if(!_0x4ec366[_0x400dec(0x25b)](stablecoins[_0x400dec(0x1d4)][_0x400dec(0x1a7)]))_0x4ec366[_0x400dec(0x2df)](stablecoins['eur']['symbol']);if(!_0x4ec366[_0x400dec(0x25b)](stablecoins[_0x400dec(0x24e)][_0x400dec(0x1a7)]))_0x4ec366[_0x400dec(0x2df)](stablecoins[_0x400dec(0x24e)][_0x400dec(0x1a7)]);if(config[_0x400dec(0x2eb)][_0x400dec(0x271)]('Binance')&&config['basecoin']!=_0x400dec(0x18d)){if(!_0x4ec366[_0x400dec(0x25b)](_0x400dec(0x1e6)+config[_0x400dec(0x301)]))_0x4ec366[_0x400dec(0x2df)](_0x400dec(0x1e6)+config['basecoin']);}loadCoins(_0x4ec366),_0x4ec366=validateSymbols(_0x4ec366);const _0x31bfba=async _0x759021=>{const _0x344200=_0x400dec;let _0x4ae5e2;try{const _0x27f84e=await getTickers(_0x759021);Object[_0x344200(0x1cb)](_0x27f84e)[_0x344200(0x1a1)](_0x13ea78=>{const _0x518007=_0x344200;_0x4ae5e2=_0x13ea78[0x1][_0x518007(0x1a7)],gTicker[noslash(_0x4ae5e2)]=_0x13ea78[0x1][_0x518007(0x208)],gChange[_0x4ae5e2]=_0x13ea78[0x1]['percentage'];});}catch(_0x336446){await handleError(_0x336446,_0x344200(0x299),_0x4ae5e2);}},_0xe3c83a=async _0x268527=>{const _0x5af3b9=_0x400dec;while(initCycle==_0x176712){if(!botPaused)try{const _0x3e77ca=await exchange[_0x5af3b9(0x173)](_0x268527);gTicker[noslash(_0x3e77ca[0x0][_0x5af3b9(0x1a7)])]=_0x3e77ca[0x0][_0x5af3b9(0x2ea)];}catch(_0x56e512){if(!exchangeStopped)await handleError(_0x56e512,_0x5af3b9(0x17d),_0x268527);}else await sleep(0x64);}},_0x5ebee3=async _0x4bb978=>{const _0x388ab1=_0x400dec;while(initCycle==_0x176712){if(!botPaused)try{const _0x87cf96=await exchange[_0x388ab1(0x26b)](_0x4bb978),_0x3bf80d=_0x87cf96[_0x388ab1(0x16f)]();gTicker[noslash(_0x3bf80d[_0x388ab1(0x1a7)])]=_0x3bf80d[_0x388ab1(0x2ea)];}catch(_0x35b0bc){if(!exchangeStopped)await handleError(_0x35b0bc,_0x388ab1(0x1c8),_0x4bb978[_0x388ab1(0x247)]());}else await sleep(0x64);}},_0x24704c=async _0xcb2112=>{const _0x5bfb67=_0x400dec;while(initCycle==_0x176712){if(!botPaused){let _0x44c1f7;try{await sleep(0x3c*0x3e8);const _0x3340dc=await getTickers(_0xcb2112);Object['entries'](_0x3340dc)[_0x5bfb67(0x1a1)](_0x50cccf=>{const _0x5c5d61=_0x5bfb67;_0x44c1f7=_0x50cccf[0x1][_0x5c5d61(0x1a7)],gChange[_0x44c1f7]=_0x50cccf[0x1][_0x5c5d61(0x199)];});}catch(_0x6b343f){if(!exchangeStopped)await handleError(_0x6b343f,_0x5bfb67(0x2f5),_0x44c1f7);}}else await sleep(0x64);}},_0x478dfe=async _0x4b2fb7=>{const _0x14752d=_0x400dec;while(initCycle==_0x176712){if(!botPaused)try{const _0x89497f=await exchange['watchOrders'](_0x4b2fb7);initCycle==_0x176712&&_0x89497f[_0x14752d(0x1a1)](_0x16697d=>{updateNumberCoinsCcxt(_0x16697d);});}catch(_0x2df5cd){if(!exchangeStopped)await handleError(_0x2df5cd,_0x14752d(0x212));}else await sleep(0x64);}};_0x31bfba(_0x4ec366),_0x24704c(_0x4ec366),exchange[_0x400dec(0x243)][_0x400dec(0x26b)]?_0x5ebee3(_0x4ec366):_0x4ec366[_0x400dec(0x1a1)](_0x4c7410=>{_0xe3c83a(_0x4c7410);}),_0x4ec366[_0x400dec(0x1a1)](_0x1dfead=>{_0x478dfe(_0x1dfead);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x8d6096){const _0xb642d4=_0x14f27a;let _0x1cbd2d={};try{if(config[_0xb642d4(0x2eb)]!=_0xb642d4(0x22e))_0x1cbd2d=await exchange[_0xb642d4(0x275)](_0x8d6096);else for(const _0x2fc423 of _0x8d6096){const _0x44f8a5=await exchange[_0xb642d4(0x1d7)](_0x2fc423);_0x1cbd2d[_0x2fc423]=_0x44f8a5;}return _0x1cbd2d;}catch(_0x3a2813){throw _0x3a2813;}}async function detectLiquidityChange(_0x132247=0x0){const _0xd4772d=_0x14f27a;transactionDetectionOngoing=!![];try{const _0x589035=await getCoins(_0x132247),[_0x464e25,_0x2755a6]=_0x589035;let _0x5005aa=[];currentCoins['forEach'](_0x10c2bf=>{const _0x286f3e=_0x1bc6,_0x18c051=_0x464e25[_0x286f3e(0x179)](_0x4e56e3=>_0x4e56e3[_0x286f3e(0x196)]==_0x10c2bf[_0x286f3e(0x196)]);if(_0x18c051){if(_0x10c2bf[_0x286f3e(0x29c)]!=_0x18c051[_0x286f3e(0x29c)]){let _0x1cf124;if(_0x10c2bf['coin']!=config[_0x286f3e(0x301)]){const _0x4d098d=gTicker[noslash(_0x10c2bf[_0x286f3e(0x1a7)])];_0x1cf124=_0x10c2bf[_0x286f3e(0x28e)]?0x1/_0x4d098d:_0x4d098d;}else _0x1cf124=0x1;_0x5005aa[_0x286f3e(0x2df)]({'coin':_0x10c2bf[_0x286f3e(0x196)],'symbol':_0x10c2bf[_0x286f3e(0x1a7)],'price':_0x1cf124,'number':Number(formatResult(_0x18c051[_0x286f3e(0x29c)]-_0x10c2bf[_0x286f3e(0x29c)],0x8)),'basecoinvalue':_0x1cf124*(_0x18c051[_0x286f3e(0x29c)]-_0x10c2bf[_0x286f3e(0x29c)])});}}});if(_0x5005aa[_0xd4772d(0x250)]>0x0&&!blockTransactionDetection)for(const _0xc23026 of _0x5005aa){if(config['autoliquidity']){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0xc23026['basecoinvalue']+_0xd4772d(0x1cf)+lastFees[_0xd4772d(0x18a)]);if(lastFees[_0xd4772d(0x18a)]==0x0||Math[_0xd4772d(0x213)](_0xc23026[_0xd4772d(0x23a)])>lastFees[_0xd4772d(0x18a)]*1.2){if(config[_0xd4772d(0x1e9)]==_0xd4772d(0x171)){delete _0xc23026[_0xd4772d(0x1a7)],delete _0xc23026[_0xd4772d(0x23a)];let _0x5ba5c7=[],_0x250aed=[...config['liquidity']]||[],_0x22df6d=config['liquidity'];_0x250aed[_0xd4772d(0x263)]((_0x234fe6,_0x1fe978)=>_0x234fe6[_0xd4772d(0x1d5)]>_0x1fe978[_0xd4772d(0x1d5)]?-0x1:_0x1fe978[_0xd4772d(0x1d5)]>_0x234fe6[_0xd4772d(0x1d5)]?0x1:0x0);const _0x4164b5=getDate();if(_0x250aed[0x0]){const _0x8ec690=fns[_0xd4772d(0x183)](_0x250aed[0x0][_0xd4772d(0x1d5)],_0xd4772d(0x236),new Date()),_0xcd841e=fns[_0xd4772d(0x183)](_0x4164b5,_0xd4772d(0x236),new Date());if(fns[_0xd4772d(0x2e4)](_0x8ec690,_0xcd841e)){_0x5ba5c7=_0x250aed[0x0][_0xd4772d(0x313)];const _0x9a5f2a=_0x5ba5c7[_0xd4772d(0x179)](_0x32d70a=>_0x32d70a['coin']==_0xc23026[_0xd4772d(0x196)]);_0x9a5f2a?(_0x9a5f2a[_0xd4772d(0x29c)]+=_0xc23026[_0xd4772d(0x29c)],_0x9a5f2a['number']==0x0&&(_0x5ba5c7=_0x5ba5c7[_0xd4772d(0x1dc)](_0x2eedcc=>{const _0x98a83b=_0xd4772d;return _0x2eedcc['coin']!=_0xc23026[_0x98a83b(0x196)];}))):_0x5ba5c7[_0xd4772d(0x2df)](_0xc23026);const _0x54fa56=_0x22df6d[_0xd4772d(0x179)](_0x311ede=>_0x311ede['date']==_0x4164b5);_0x54fa56[_0xd4772d(0x313)]=_0x5ba5c7;}else _0x22df6d['push']({'date':_0x4164b5,'changes':[_0xc23026]});}const _0x2d1eb4=_0x22df6d[_0xd4772d(0x179)](_0x4bb40b=>_0x4bb40b[_0xd4772d(0x1d5)]==_0x4164b5);if(_0x2d1eb4){let _0x4f18b0=!![];_0x2d1eb4[_0xd4772d(0x313)]['forEach'](_0x3aee3c=>{const _0x5d8878=_0xd4772d;if(_0x3aee3c[_0x5d8878(0x29c)]!=0x0)_0x4f18b0=![];}),_0x4f18b0&&(_0x22df6d=_0x22df6d[_0xd4772d(0x1dc)](_0x3d3c04=>{const _0x2b76c1=_0xd4772d;return _0x3d3c04[_0x2b76c1(0x1d5)]!=_0x4164b5;}));}let _0x59c66e=dbConfig[_0xd4772d(0x2ef)](_0xd4772d(0x279))[_0xd4772d(0x179)]({'botID':botID})[_0xd4772d(0x254)]();_0x59c66e&&(dbConfig[_0xd4772d(0x2ef)](_0xd4772d(0x279))['find']({'botID':botID})['assign']({'liquidity':_0x22df6d})[_0xd4772d(0x284)](),config[_0xd4772d(0x2b1)]=_0x22df6d);logHistory(_0xd4772d(0x1a5),'Portfolio\x20change\x20detected:\x20'+Math[_0xd4772d(0x213)](_0xc23026[_0xd4772d(0x29c)])+'\x20'+_0xc23026[_0xd4772d(0x196)]+'\x20'+(_0xc23026[_0xd4772d(0x29c)]>0x0?_0xd4772d(0x1da):_0xd4772d(0x238))+_0xd4772d(0x19f)),proxyEmit(_0xd4772d(0x197),emittedConfiguration());const _0x4991cf=getNormalizedPerformance();emitPerformance(_0x4991cf),getStartingBalances(_0x4991cf),logger['debug'](_0xd4772d(0x182));}else config[_0xd4772d(0x1e9)]==_0xd4772d(0x30a)&&(config[_0xd4772d(0x1b5)]?(await storeHeadless({'headless':![]}),logHistory('success','Portfolio\x20change\x20detected\x20-\x20bot\x20switched\x20to\x20manual\x20mode'),logger[_0xd4772d(0x174)](_0xd4772d(0x2ec)+Math['abs'](_0xc23026[_0xd4772d(0x29c)])+'\x20'+_0xc23026['coin']+'\x20'+(_0xc23026['number']>0x0?_0xd4772d(0x1da):_0xd4772d(0x238))+_0xd4772d(0x306))):logger[_0xd4772d(0x174)](_0xd4772d(0x2ec)+Math[_0xd4772d(0x213)](_0xc23026[_0xd4772d(0x29c)])+'\x20'+_0xc23026[_0xd4772d(0x196)]+'\x20'+(_0xc23026[_0xd4772d(0x29c)]>0x0?'added':_0xd4772d(0x238))+_0xd4772d(0x1f0)));}else logger['debug'](_0xd4772d(0x297)+Math[_0xd4772d(0x213)](_0xc23026[_0xd4772d(0x29c)])+'\x20'+_0xc23026[_0xd4772d(0x196)]+'\x20'+(_0xc23026[_0xd4772d(0x29c)]>0x0?_0xd4772d(0x1da):'removed'));}else logger[_0xd4772d(0x174)](_0xd4772d(0x2ec)+Math[_0xd4772d(0x213)](_0xc23026[_0xd4772d(0x29c)])+'\x20'+_0xc23026['coin']+'\x20'+(_0xc23026[_0xd4772d(0x29c)]>0x0?_0xd4772d(0x1da):'removed')+_0xd4772d(0x2e5));}currentCoins=_0x464e25,currentCoinsAll=_0x2755a6;}catch(_0x33110){if(!exchangeStopped)await handleError(_0x33110,_0xd4772d(0x2ff));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x41d80a=_0x14f27a;try{markets=await exchange[_0x41d80a(0x1a4)](),allSymbols=[],Object[_0x41d80a(0x1cb)](markets)[_0x41d80a(0x1a1)](_0x5c7046=>{const _0x30e9fb=_0x41d80a;_0x5c7046[0x1][_0x30e9fb(0x32a)]&&_0x5c7046[0x1][_0x30e9fb(0x257)]&&allSymbols[_0x30e9fb(0x2df)](_0x5c7046[0x0]);});}catch(_0x28fe29){throw _0x28fe29;}}function validateSymbols(_0x4046d2){const _0x507ee0=_0x14f27a;let _0x266b9c=[];return _0x4046d2[_0x507ee0(0x1a1)](_0x5891e6=>{const _0x2c2d6a=_0x507ee0;!allSymbols[_0x2c2d6a(0x25b)](_0x5891e6)?logHistory(_0x2c2d6a(0x1f8),_0x2c2d6a(0x1b3)+_0x5891e6+_0x2c2d6a(0x2e0)):_0x266b9c[_0x2c2d6a(0x2df)](_0x5891e6);}),_0x266b9c;}async function initclient(){const _0x364a97=_0x14f27a;proxyEmit(_0x364a97(0x197),emittedConfiguration()),proxyEmit(_0x364a97(0x1ab),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x45c04d=getNormalizedPerformance();emitPerformance(_0x45c04d),getStartingBalances(_0x45c04d);}async function toggleBotMode(){const _0x5684e7=_0x14f27a;let _0x4314db=dbConfig[_0x5684e7(0x2ef)](_0x5684e7(0x279))['find']({'botID':botID})[_0x5684e7(0x254)]();if(_0x4314db){const _0x10378e=!_0x4314db[_0x5684e7(0x1b5)];dbConfig[_0x5684e7(0x2ef)](_0x5684e7(0x279))['find']({'botID':botID})[_0x5684e7(0x29b)]({'headless':_0x10378e})['write'](),config[_0x5684e7(0x1b5)]=_0x10378e,proxyEmit(_0x5684e7(0x197),emittedConfiguration()),updateBotManager();}}function _0x1bc6(_0xb16564,_0x1a69ed){const _0x3d5925=_0x20a4();return _0x1bc6=function(_0x2decec,_0x28f119){_0x2decec=_0x2decec-0x16e;let _0x20a4dc=_0x3d5925[_0x2decec];return _0x20a4dc;},_0x1bc6(_0xb16564,_0x1a69ed);}function updateBotManager(){const _0x1fd2f3=_0x14f27a;process[_0x1fd2f3(0x204)]({'updatebotmanager':!![]},_0x4925df=>{}),logger[_0x1fd2f3(0x174)]('Headless:\x20'+config['headless']);}async function loadCoins(_0xf4c55d){const _0x36d9ba=_0x14f27a;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2ef989,_0x500a84=0x0,_0x22fa3e=0x0;_0xf4c55d[_0x36d9ba(0x1a1)](_0x1df652=>{const _0x41972d=_0x36d9ba;loading[_0x41972d(0x1a2)][_0x41972d(0x2df)](_0x1df652);}),loadingCanceled=![];let _0x43d42b=![];while(_0x2ef989!=_0xf4c55d['length']+maxLoadingProgress){_0x2ef989=loadingProgress,_0xf4c55d[_0x36d9ba(0x1a1)](_0x5d95b5=>{const _0x45f858=_0x36d9ba;if(gTicker[noslash(_0x5d95b5)]){loading[_0x45f858(0x1a2)]=loading[_0x45f858(0x1a2)][_0x45f858(0x1dc)](_0x5922c7=>_0x5922c7!=_0x5d95b5);if(!watchedSymbols[_0x45f858(0x25b)](_0x5d95b5))watchedSymbols['push'](_0x5d95b5);_0x2ef989++;}}),loading[_0x36d9ba(0x1a9)]=Math[_0x36d9ba(0x1e8)](_0x2ef989/(_0xf4c55d[_0x36d9ba(0x250)]+maxLoadingProgress)*0x64);loading[_0x36d9ba(0x1a9)]!=0x64&&(_0x22fa3e>0x1e*0x5&&(loading[_0x36d9ba(0x251)]=!![],emitLoadingProgress()),_0x22fa3e>0x78*0x5&&!_0x43d42b&&(_0x43d42b=!![],logHistory(_0x36d9ba(0x1f8),_0x36d9ba(0x293)+loading[_0x36d9ba(0x1a2)][_0x36d9ba(0x283)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x36d9ba(0x1f8),_0x36d9ba(0x1a3)+loadCoinsRetryInterval/0xea60+_0x36d9ba(0x1e4)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x36d9ba(0x1c1)]=!![],emitLoadingProgress();break;}else _0x500a84!=loading[_0x36d9ba(0x1a9)]&&(_0x500a84=loading[_0x36d9ba(0x1a9)],emitLoadingProgress()),_0x22fa3e++,await sleep(0xc8);}_0x2ef989==_0xf4c55d[_0x36d9ba(0x250)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x36d9ba(0x204)]({'status':_0x36d9ba(0x198),'live':_0x36d9ba(0x237)},_0x5b30b1=>{}),_0x43d42b&&logHistory(_0x36d9ba(0x1a5),_0x36d9ba(0x1a0)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x2a917a=_0x14f27a;proxyEmit(_0x2a917a(0x197),{...emittedConfiguration(),'configstate':_0x2a917a(0x308)});}function emitLoadingProgress(){const _0x2b1152=_0x14f27a;proxyEmit(_0x2b1152(0x1de),loading);}async function getFiat(){const _0x247953=_0x14f27a;let _0x2355df=gTicker[stablecoins['eur'][_0x247953(0x196)]],_0x247b9d=gTicker[stablecoins[_0x247953(0x24e)]['coin']];return{'eur':Number(_0x2355df),'usd':Number(_0x247b9d)};}function capitalize(_0xda7f1e){const _0x39250d=_0x14f27a;return _0xda7f1e[_0x39250d(0x225)](0x0,0x1)[_0x39250d(0x28b)]()+_0xda7f1e['substring'](0x1);}function supportedExchanges(){const _0x229153=_0x14f27a,_0x47abc0=['ws','fetchTickers',_0x229153(0x1d7),_0x229153(0x173),'watchOrders',_0x229153(0x17e),'createOrder',_0x229153(0x18f),_0x229153(0x339),_0x229153(0x245)];let _0x491b99=[],_0x2ce98b=[],_0xc64c68=ccxt['pro'][_0x229153(0x1ab)];_0xc64c68[_0x229153(0x1a1)](_0x2d1a3b=>{try{const _0x17d35a=new ccxt['pro'][_0x2d1a3b]();_0x2ce98b['push'](_0x17d35a);}catch(_0x467cae){}}),_0x2ce98b[_0x229153(0x1a1)](_0x729223=>{const _0x1bd4e4=_0x229153;let _0x3a746f=0x0;_0x47abc0[_0x1bd4e4(0x1a1)](_0x2cd520=>{const _0x231579=_0x1bd4e4;_0x2cd520 in _0x729223['has']&&_0x729223[_0x231579(0x243)][_0x2cd520]&&_0x3a746f++;}),_0x3a746f==_0x47abc0['length']&&_0x491b99[_0x1bd4e4(0x2df)](capitalize(_0x729223['id']));});let _0x11c365=[];return _0xc64c68[_0x229153(0x1a1)](_0x34e29d=>{const _0x10befa=_0x229153;_0x34e29d=capitalize(_0x34e29d);if(!_0x491b99[_0x10befa(0x25b)](_0x34e29d))_0x11c365[_0x10befa(0x2df)](_0x34e29d);}),_0x491b99;}function setStartDatePerformance(){const _0x56e230=_0x14f27a;if(config&&config['liquidity'][0x0][_0x56e230(0x313)][_0x56e230(0x250)]!=0x0){const _0x2203b4=config[_0x56e230(0x2b1)][0x0][_0x56e230(0x313)];dbPerformance[_0x56e230(0x2ef)](_0x56e230(0x2b9))[_0x56e230(0x179)]({'date':config[_0x56e230(0x20e)]})[_0x56e230(0x29b)]({'coins':_0x2203b4})[_0x56e230(0x284)]();}}async function recreateCoinResults(){const _0x391053=_0x14f27a;let _0x370732,_0x47f73a=[];try{const _0x430167=fns[_0x391053(0x2b2)](fns[_0x391053(0x20d)](config[_0x391053(0x20e)][_0x391053(0x31f)](/\//g,'-')),_0x391053(0x273));for(const _0x39a3e6 of currentCoins){if(_0x39a3e6[_0x391053(0x196)]!=config[_0x391053(0x301)]){let _0x58e487=0x0,_0x46d0b1,_0x4a5026;_0x370732=await getAllEventOrders(_0x39a3e6[_0x391053(0x1a7)]);if(_0x370732[_0x391053(0x250)]>0x0)_0x370732[_0x391053(0x1a1)](_0x574654=>{const _0x1e64b5=_0x391053,_0x40b05d=_0x39a3e6[_0x1e64b5(0x1a7)][_0x1e64b5(0x25b)](config[_0x1e64b5(0x301)]+'/');_0x47f73a[_0x1e64b5(0x2df)]({'datetime':_0x574654[_0x1e64b5(0x1bc)],'coin':_0x39a3e6[_0x1e64b5(0x196)],'symbol':_0x39a3e6[_0x1e64b5(0x1a7)],'side':_0x574654[_0x1e64b5(0x1dd)],'reverse':_0x40b05d,'amount':formatResult(_0x574654[_0x1e64b5(0x1bd)],0x8),'filled':formatResult(_0x574654[_0x1e64b5(0x1bd)],0x8),'price':formatResult(_0x574654[_0x1e64b5(0x2ea)],0x8)}),_0x58e487=_0x574654[_0x1e64b5(0x1dd)]=='buy'?_0x58e487+_0x574654[_0x1e64b5(0x1bd)]:_0x58e487-_0x574654[_0x1e64b5(0x1bd)];if(!_0x4a5026)_0x4a5026=_0x574654['price'];});_0x46d0b1=_0x39a3e6[_0x391053(0x29c)]-_0x58e487;let _0x5f00b7;config[_0x391053(0x2b1)][_0x391053(0x1a1)](_0x2bdb62=>{const _0x54ca71=_0x391053;!_0x5f00b7&&(_0x5f00b7=_0x2bdb62[_0x54ca71(0x313)][_0x54ca71(0x179)](_0x1e0a5d=>_0x1e0a5d[_0x54ca71(0x196)]==_0x39a3e6['coin']),_0x5f00b7&&(_0x46d0b1=_0x5f00b7[_0x54ca71(0x29c)],_0x4a5026=_0x5f00b7['price']));});let _0x358795=dbCoinResults[_0x391053(0x2ef)](_0x391053(0x2aa))[_0x391053(0x179)]({'coin':_0x39a3e6['coin']})[_0x391053(0x254)]();_0x358795={'coin':_0x39a3e6[_0x391053(0x196)],'number':_0x46d0b1,'breakeven':_0x4a5026,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x391053(0x2aa))['find']({'coin':_0x39a3e6['coin']})[_0x391053(0x29b)](_0x358795)['write']();}}_0x47f73a['sort']((_0x1db358,_0x16a8a7)=>_0x1db358['datetime']>_0x16a8a7[_0x391053(0x1bc)]?0x1:_0x16a8a7[_0x391053(0x1bc)]>_0x1db358['datetime']?-0x1:0x0);let _0x3c9194=0x0;for(let _0x214d37 of _0x47f73a){await updateCoinResults(_0x214d37,!![]);}}catch(_0x4d9fde){await handleError(_0x4d9fde,'recreateCoinResults()');}}async function getAllEventOrders(_0x58aee3){const _0x3adc30=_0x14f27a;let _0x5250cf=[],_0x292a33=dbLogs['get'](_0x3adc30(0x268))['filter'](_0x50077b=>{const _0x21b1b6=_0x3adc30,_0x5cf84e=_0x50077b[_0x21b1b6(0x209)][_0x21b1b6(0x2d1)]();return _0x5cf84e['includes'](_0x58aee3[_0x21b1b6(0x2d1)]())&&(_0x5cf84e['includes'](_0x21b1b6(0x2d2))&&_0x5cf84e[_0x21b1b6(0x25b)](_0x21b1b6(0x27f))||_0x5cf84e[_0x21b1b6(0x25b)](_0x21b1b6(0x1bd))&&_0x5cf84e[_0x21b1b6(0x25b)](_0x21b1b6(0x27f)));})[_0x3adc30(0x25c)]('time')['value']();return _0x292a33[_0x3adc30(0x1a1)](_0x1bef00=>{const _0x2ba029=_0x3adc30,_0xeb4ec6=_0x1bef00[_0x2ba029(0x209)][_0x2ba029(0x25b)](_0x2ba029(0x201))?_0x2ba029(0x201):'buy',_0x52d202=/#([0-9]|\.)+\s/i,_0x47b515=Number(_0x52d202['exec'](_0x1bef00['event'])[0x0][_0x2ba029(0x253)](0x1)),_0x1653d1=/@([0-9]|\.)+$/i,_0x370fdb=Number(_0x1653d1[_0x2ba029(0x2c3)](_0x1bef00[_0x2ba029(0x209)])[0x0]['slice'](0x1));_0x5250cf['push']({'datetime':_0x1bef00['time'],'coin':symbolToCoin(_0x58aee3),'symbol':_0x58aee3,'side':_0xeb4ec6,'amount':_0x47b515,'filled':_0x47b515,'price':_0x370fdb});}),_0x5250cf;}function _0x20a4(){const _0x106b5c=['final','\x20|\x20lock\x20orders:\x20','canceled','must\x20be\x20greater\x20than\x20minimum\x20amount','emojibuy','data','emojisell','recovery','currency','settings','\x20change','sqrt','cancelOrders()','\x20metrics:</b>\x20\x0a\x0a','buys','exec','Error\x20while\x20deleting\x20files:\x20','13272RlnVuO','none','Order\x20is\x20invalid:\x20','status','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','\x20hour','map','sells','./logs/','\x20order:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','toLowerCase','market','ORDERS.UNLOCKED','average','sendMetricsTelegram','placeOrder','orderstatus','\x20/\x20','market_cap','padEnd','\x20uses\x20','delta','mkdirSync','USDT','push','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','storeConfiguration','net-fiat','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','isEqual','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','ordertype','balancing\x20resumes\x20when\x20cooldown\x20ends','orderId','Net\x20effect','price','exchange','Portfolio\x20change\x20detected:\x20','storeHeadless','buy','get','kill','configuration-stored','fees','realized','RequestTimeout','fetchTickers()','448185kMrtpz','RETRY\x20-\x20Problem\x20resolved\x20after\x20','timeshift','portfolio','%\x20(','ongoing','(((.+)+)+)+$','total','Invalid\x20API\x20key\x20or\x20secret\x20entered','detectLiquidityChange()','starting-balance-','basecoin','getFullYear','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','min','\x20orders\x20in\x20less\x20than\x20','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','No\x20more\x20open\x20orders\x20-\x20','loading-canceled','cloneDeep','switch-manual','slider','\x20minutes','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','close','showname','AuthenticationError','\x20MB','fromCodePoint','changes','change','fee','ask','stringify','RSA-OAEP','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','constructor','PermissionDenied','Symbol(s):\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','replace','bid','2.6.23','2\x20-\x20Validate\x20orders:\x20','Error\x20details:','privateKey','existsSync','2\x20-\x20Handled\x20open\x20orders','event-history','findIndex','\x20>\x20','active','log','netoffset','apiKey','NetworkError','bb-secure.json','Cex','BUSD','getMonth','Market','openOrders','exchange\x20not\x20reloaded','0\x20-\x20EXECUTION:\x20','placeOrder()','toggleBotMode','fetchClosedOrders','random','recreate','net-basecoin','Exception\x20thrown\x20in\x20','\x20>\x20details:','pop','quote','update-liquidity','marketcap','watchTrades','debug','full','status\x20code\x20401','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','resetHistory','find','bot-','bots','Cooldown\x20ended\x20-\x20balancing\x20resumed','watchTrades()','cancelOrder','getCoins()','Unfilled\x20order(s)\x20canceled\x20after\x20','timestamp','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','parse','test','BTC','getTime','path','ORDERS.LOCKED','initial','highest','limit-low','red_yellow_blue','PAXG','765408IWWkqh','fetchOpenOrders','Transaction\x20detection\x20blocked','leftTxt','Huobi','lowdb','Crypt','getPortfolio(2)','coin','configuration','enabled','percentage','API-key\x20format\x20invalid','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','uncaughtException','Executing\x20exchange\x20reload','2\x20-\x20Orders\x20unlocked','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','forEach','remainingSymbols','Pausing\x20for\x20','loadMarkets','success','Invalid\x20quantity','symbol','InvalidNonce','progress','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','exchanges','Saving\x20configuration','20mTIynY','\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20>\x20[DEBUG]\x20','UNLOCKING','showConfig','Invalid\x20symbol:\x20','sha256','headless','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','Bot\x20','storeFiat','splice','distribution','***','datetime','filled','<b>Bot\x20','1218984NUJUaq','getPortfolio','cancel','starting-balances','time','getSeconds','getStartingBalances','Insufficient\x20funds\x20to\x20execute\x20order:\x20','USDP','watchTradesForSymbols()','apiSecret','performance','entries','differenceInSeconds','botname','-config.json','\x20|\x20highest\x20fee:\x20','indexOf','hybrid-crypto-js','shift','UNLOCKED','eur','date','\x20:\x20','fetchTicker','EUR','-performance.json','added','add','filter','side','coin-loading-progress','exchange\x20reloaded','string','Executed\x20','/output-000.log','\x20|\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','balances','BNB/','379233XhuYgA','round','autoliquidity','</pre>','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','colorscheme','Order\x20filled:\x20','bb-settings.json','page','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','1\x20-\x20FILLED\x20known\x20order:\x20','password','createWriteStream','open','Executing\x20bot\x20restart','no\x20open\x20orders','pro','error','unlinkSync','Exchange','getPortfolio(0)','-results.json','<pre>','closed','marketcapEnabled','util','sell','2.5.0','-events.json','send','getMinutes','axios','./version.json','last','event','valid','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','limit','parseISO','startdate','excluded','cooldown','request-time','watchOrders()','abs','Bitget','remove','ExchangeError','args','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','warning','MIN_NOTIONAL','padStart','limits','cost','2.3.5','OrderNotFound','Manual\x20balancing\x20required','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Resetting\x20coin\x20results:\x20','Waited\x20','cancelLoading','substring','ETH','getHours','milliseconds','************','offset','2221zsWiCR',',\x20must\x20be\x20a\x203\x20digit\x20number','Net\x20','Cryptocom','balancing\x20resumed','marketcapsqrt','Resetting\x20bot\x20history','Loading\x20completed','BNB','createOrder','.json','yyyy/MM/dd','running','removed','InsufficientFunds','basecoinvalue','getPortfolio(1)','\x20API\x20key\x20is\x20invalid','Unknown\x20error\x20occured','toFixed','type','breakeven','recent20','Reset\x20|\x20','has','customId','fetchBalance','threshold','toString','floor','LOCKED','getCoinNumber()','loadSymbols()','process\x20','getAllOrders()','usd','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','length','timeout','Avoiding\x20continuous\x20order\x20attempts','slice','value','stopExchange()','limit-high','spot','TUSD','\x20-\x20pausing\x20bot\x20for\x20','fiat','includes','sortBy','Limit\x20(low-margin)','apiPassword','getDate','1\x20-\x20FILLED\x20unknown\x20order:\x20','onepagemode','Trigger:\x20','sort','memoryUsage','target','rightTxt','2.6.0','logs','lowdb/adapters/FileSync','1727HJuDwP','watchTradesForSymbols','<b>','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','botID','1\x20-\x20Unlock\x20orders','startprice','startsWith','DDoSProtection','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20minutes\x20-\x20','fetchTickers','set',':\x20timer\x20>','apply','bot','heapUsed','\x20has\x20a\x2024h\x20drop\x20of\x20','USD','1\x20-\x20Handle\x20open\x20orders','max','order','argv','secure','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','join','write','164XiKGVK','RETRY\x20-\x20Error\x20in\x20','ORDERS.UNLOCKING','amount','Huobipro','RateLimitExceeded','toUpperCase','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Transaction\x20detection\x20unblocked','reverse','marketcapApi','defaults','\x20value','message','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Initializing\x20coin\x20results','trade','ID:\x20','Fee\x20discount\x20refund\x20detected:\x20','split','initTickers()','function','assign','number','Binance','decrypt','4TEXFXU','2\x20-\x20handling\x20FILLED\x20order:\x20','version','sendPortfolioTelegram','\x20-\x20','freeze','265XtRxCL','search','amountToPrecision','\x20exchange\x20error','\x20attempts','coins','\x20portfolio:</b>\x20\x0a\x0a','31494VCfupQ','startnumber',':\x20Bot\x20','2.6.22','Bybit','liquidity','format','change24h'];_0x20a4=function(){return _0x106b5c;};return _0x20a4();}async function getAllOrders(_0x1a7a5d,_0x2c475f){const _0x4b15be=_0x14f27a;let _0x24ca2e=[];while(_0x2c475f<exchange[_0x4b15be(0x228)]()){const _0x2db775=0x1f4;try{const _0x269fba=await exchange[_0x4b15be(0x339)](_0x1a7a5d,_0x2c475f,_0x2db775);if(_0x269fba['length'])_0x2c475f=_0x269fba[_0x269fba[_0x4b15be(0x250)]-0x1][_0x4b15be(0x181)]+0x1,_0x24ca2e=_0x24ca2e['concat'](_0x269fba);else break;}catch(_0x53b5dc){await handleError(_0x53b5dc,_0x4b15be(0x24d),_0x1a7a5d);}}return _0x24ca2e;}async function validate24hChanges(){const _0x497766=_0x14f27a;for(const _0xe34453 of currentCoins){if(_0xe34453[_0x497766(0x196)]!=config['basecoin']){let _0x5bfdc2;_0xe34453['reverse']?_0x5bfdc2=formatResult((0x1/(gChange[_0xe34453[_0x497766(0x1a7)]]/0x64+0x1)-0x1)*0x64,0x3):_0x5bfdc2=gChange[_0xe34453['symbol']],_0x5bfdc2<config[_0x497766(0x2b3)]&&(logHistory('error',_0xe34453[_0x497766(0x196)]+_0x497766(0x27b)+_0x5bfdc2+'%'),logHistory('error',_0x497766(0x24f)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x13a09d,_0x198699){if(!_0x13a09d)return!![];const _0x3c9b03=_0x198699['split']('.'),_0x56676a=_0x13a09d['split']('.');for(var _0x2ca603=0x0;_0x2ca603<_0x56676a['length'];_0x2ca603++){const _0x1a4937=~~_0x56676a[_0x2ca603],_0x5244fb=~~_0x3c9b03[_0x2ca603];if(_0x1a4937<_0x5244fb)return!![];if(_0x1a4937>_0x5244fb)return![];}return![];}async function oneTimeMigration(){const _0x4f44d0=_0x14f27a;let _0x1e50fa=dbLogs[_0x4f44d0(0x2ef)](_0x4f44d0(0x2a1))[_0x4f44d0(0x254)]();if(isOlderVersion(_0x1e50fa,_0x4f44d0(0x21e))){let _0x465ef2=[];const _0x180872=dbLogs[_0x4f44d0(0x2ef)](_0x4f44d0(0x268))[_0x4f44d0(0x254)]();_0x180872['forEach'](_0xbb2e47=>{const _0x1e2180=_0x4f44d0;_0x465ef2[_0x1e2180(0x2df)]({'time':_0xbb2e47['time'],'type':_0xbb2e47['type'],'event':_0xbb2e47[_0x1e2180(0x209)]});}),dbLogs[_0x4f44d0(0x2ef)](_0x4f44d0(0x268))['assign'](_0x465ef2)[_0x4f44d0(0x284)]();}let _0x17c308=dbConfig[_0x4f44d0(0x2ef)](_0x4f44d0(0x2a1))[_0x4f44d0(0x254)]();if(isOlderVersion(_0x17c308,_0x4f44d0(0x21e))){let _0x235665=dbConfig[_0x4f44d0(0x2ef)]('bot')[_0x4f44d0(0x179)]({'botID':botID})['value']();if(_0x235665){let _0x386a2c=[];_0x235665['portfolio'][_0x4f44d0(0x1a1)](_0x91cedb=>{const _0x2188d1=_0x4f44d0;_0x386a2c[_0x2188d1(0x2df)]({'coin':_0x91cedb[_0x2188d1(0x196)],'number':_0x91cedb[_0x2188d1(0x2ad)],'price':_0x91cedb[_0x2188d1(0x270)]}),delete _0x91cedb[_0x2188d1(0x2ad)],delete _0x91cedb[_0x2188d1(0x270)];});if(_0x386a2c[_0x4f44d0(0x250)]!==0x0)fs['writeFile'](configbackuppath+(_0x4f44d0(0x300)+botID+_0x4f44d0(0x235)),JSON['stringify'](_0x386a2c,null,0x4),function(_0xac2e1a){if(_0xac2e1a){}});const _0x569785=(_0x4c1d7e,_0xf5262f)=>{const _0x1e1539=_0x4f44d0;let _0x48d6ce=[];_0xf5262f[_0x1e1539(0x1a1)](_0x35c18e=>{const _0x525b50=_0x1e1539,_0x44fbee=_0x4c1d7e[_0x525b50(0x179)](_0x12008b=>_0x12008b[_0x525b50(0x196)]==_0x35c18e[_0x525b50(0x196)]);if(!_0x44fbee)_0x48d6ce['push'](_0x35c18e);});let _0x4b53b6=[];return _0x4c1d7e[_0x1e1539(0x1a1)](_0x17737a=>{const _0x1df7fb=_0x1e1539,_0x2ae11a=_0xf5262f[_0x1df7fb(0x179)](_0x24df4b=>_0x24df4b[_0x1df7fb(0x196)]==_0x17737a[_0x1df7fb(0x196)]);if(!_0x2ae11a||_0x2ae11a['number']==0x0&&_0x17737a[_0x1df7fb(0x29c)]!=0x0)_0x4b53b6['push'](_0x17737a);}),{'missingDay1':_0x48d6ce,'notInDay2':_0x4b53b6};},_0x4a43a8=dbPerformance[_0x4f44d0(0x2ef)](_0x4f44d0(0x2b9))[_0x4f44d0(0x309)]()[_0x4f44d0(0x254)]();if(_0x4a43a8['length']>0x1){const {missingDay1:_0x2ef525,notInDay2:_0x32d518}=_0x569785(_0x386a2c,_0x4a43a8[0x1][_0x4f44d0(0x2aa)]);_0x386a2c=[..._0x386a2c,..._0x2ef525],_0x32d518[_0x4f44d0(0x1a1)](_0x24a442=>{const _0x5d10ab=_0x4f44d0;let _0x655107=_0x386a2c[_0x5d10ab(0x328)](_0x2709ae=>_0x2709ae['coin']==_0x24a442[_0x5d10ab(0x196)]);_0x655107!=-0x1&&_0x386a2c[_0x5d10ab(0x1b9)](_0x655107,0x1);});}_0x386a2c[_0x4f44d0(0x263)]((_0x508584,_0x4946fc)=>_0x508584[_0x4f44d0(0x196)]>_0x4946fc[_0x4f44d0(0x196)]?0x1:_0x4946fc['coin']>_0x508584[_0x4f44d0(0x196)]?-0x1:0x0);let _0x20488b=[{'date':_0x235665[_0x4f44d0(0x20e)],'changes':_0x386a2c}];_0x4a43a8['length']>0x2&&_0x4a43a8[_0x4f44d0(0x1a1)]((_0x56dfd8,_0xeba050)=>{const _0x19f188=_0x4f44d0;if(_0xeba050>0x0&&_0xeba050<_0x4a43a8[_0x19f188(0x250)]-0x1){const {missingDay1:_0x5b8883,notInDay2:_0x3297fc}=_0x569785(_0x4a43a8[_0xeba050][_0x19f188(0x2aa)],_0x4a43a8[_0xeba050+0x1][_0x19f188(0x2aa)]);_0x386a2c=[],(_0x5b8883[_0x19f188(0x250)]!=0x0||_0x3297fc[_0x19f188(0x250)]!=0x0)&&(_0x5b8883[_0x19f188(0x250)]!=0x0&&_0x386a2c[_0x19f188(0x2df)](..._0x5b8883),_0x3297fc[_0x19f188(0x250)]!=0x0&&(_0x3297fc['forEach'](_0x5d65ab=>{const _0x4ab3be=_0x19f188;_0x5d65ab[_0x4ab3be(0x29c)]=-_0x5d65ab[_0x4ab3be(0x29c)];}),_0x386a2c[_0x19f188(0x2df)](..._0x3297fc)),_0x386a2c[_0x19f188(0x263)]((_0x4a7486,_0x39c335)=>_0x4a7486[_0x19f188(0x196)]>_0x39c335[_0x19f188(0x196)]?0x1:_0x39c335[_0x19f188(0x196)]>_0x4a7486['coin']?-0x1:0x0),_0x20488b[_0x19f188(0x2df)]({'date':_0x4a43a8[_0xeba050+0x1][_0x19f188(0x1d5)],'changes':_0x386a2c}));}}),dbConfig[_0x4f44d0(0x2ef)](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})[_0x4f44d0(0x29b)]({..._0x235665,'liquidity':_0x20488b})[_0x4f44d0(0x284)]();}}if(isOlderVersion(_0x17c308,_0x4f44d0(0x267))){let _0x4ac437=dbConfig['get'](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})['value']();if(_0x4ac437){const _0x490a5c=_0x4ac437[_0x4f44d0(0x2eb)],_0x3f6e07=_0x490a5c?capitalize(_0x490a5c):_0x4f44d0(0x29d);dbConfig[_0x4f44d0(0x2ef)](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})[_0x4f44d0(0x29b)]({'exchange':_0x3f6e07})[_0x4f44d0(0x284)]();}}if(isOlderVersion(_0x17c308,_0x4f44d0(0x2af))){let _0x359480=dbConfig['get'](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})[_0x4f44d0(0x254)]();if(_0x359480){const _0x50269b=_0x359480[_0x4f44d0(0x1ff)],_0xb6cdb1=_0x50269b?_0x4f44d0(0x172):![];dbConfig[_0x4f44d0(0x2ef)](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})[_0x4f44d0(0x29b)]({'marketcapEnabled':_0xb6cdb1})[_0x4f44d0(0x284)]();}}if(isOlderVersion(_0x17c308,_0x4f44d0(0x321))){let _0x11785f=dbConfig['get'](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})['value']();if(_0x11785f){const _0x2e5980=_0x11785f[_0x4f44d0(0x1e9)],_0x4be38b=_0x2e5980?_0x4f44d0(0x171):![];dbConfig[_0x4f44d0(0x2ef)](_0x4f44d0(0x279))[_0x4f44d0(0x179)]({'botID':botID})[_0x4f44d0(0x29b)]({'autoliquidity':_0x4be38b})[_0x4f44d0(0x284)]();}}let _0x3ee0de=dbPerformance[_0x4f44d0(0x2ef)](_0x4f44d0(0x2a1))['value']();isOlderVersion(_0x3ee0de,_0x4f44d0(0x21e))&&setStartDatePerformance();let _0xdbb9d8=dbCoinResults[_0x4f44d0(0x2ef)](_0x4f44d0(0x2a1))['value']();if(isOlderVersion(_0xdbb9d8,_0x4f44d0(0x202))){let _0x2da2d3=dbCoinResults[_0x4f44d0(0x2ef)](_0x4f44d0(0x2aa))[_0x4f44d0(0x254)]();if(_0x2da2d3[_0x4f44d0(0x250)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x121bef=_0x14f27a;dbConfig['set']('version',serverversion)['write'](),dbPerformance['set']('version',serverversion)[_0x121bef(0x284)](),dbLogs['set'](_0x121bef(0x2a1),serverversion)[_0x121bef(0x284)](),dbCoinResults[_0x121bef(0x276)](_0x121bef(0x2a1),serverversion)['write']();}function getConfiguration(_0x56126d){const _0x52f127=_0x14f27a;let _0x3e4353=dbConfig['get'](_0x52f127(0x279))['find']({'botID':_0x56126d})[_0x52f127(0x254)]();if(_0x3e4353){let _0x5abb11=![];typeof _0x3e4353[_0x52f127(0x246)]==_0x52f127(0x1e0)&&(_0x3e4353={..._0x3e4353,'threshold':Number(_0x3e4353[_0x52f127(0x246)])},_0x5abb11=!![]),_0x3e4353[_0x52f127(0x2b3)]==undefined&&(_0x3e4353={..._0x3e4353,'change24h':-0x14},_0x5abb11=!![]),_0x3e4353[_0x52f127(0x25a)]==undefined&&(_0x3e4353={..._0x3e4353,'fiat':_0x52f127(0x27c)},_0x5abb11=!![]),_0x3e4353['onepagemode']==undefined&&(_0x3e4353={..._0x3e4353,'onepagemode':settings['onepagemode']},_0x5abb11=!![]),_0x3e4353[_0x52f127(0x1ec)]==undefined&&(_0x3e4353={..._0x3e4353,'colorscheme':_0x52f127(0x18c)},_0x5abb11=!![]),_0x3e4353['autoliquidity']==undefined&&(_0x3e4353={..._0x3e4353,'autoliquidity':_0x52f127(0x171)},_0x5abb11=!![]),_0x3e4353[_0x52f127(0x28f)]==undefined&&(_0x3e4353={..._0x3e4353,'marketcapApi':settings[_0x52f127(0x28f)]?!![]:![]},_0x5abb11=!![]),_0x3e4353['marketcapEnabled']==undefined&&(_0x3e4353={..._0x3e4353,'marketcapEnabled':![]},_0x5abb11=!![]),_0x5abb11&&(_0x3e4353={'botID':_0x3e4353[_0x52f127(0x26e)],'exchange':_0x3e4353['exchange'],'apiKey':_0x3e4353[_0x52f127(0x32d)],'apiSecret':_0x3e4353[_0x52f127(0x1c9)],'apiPassword':_0x3e4353[_0x52f127(0x25e)],'basecoin':_0x3e4353['basecoin'],'botname':_0x3e4353[_0x52f127(0x1cd)],'showname':_0x3e4353['showname'],'threshold':_0x3e4353['threshold'],'ordertype':_0x3e4353[_0x52f127(0x2e6)],'timeout':_0x3e4353[_0x52f127(0x251)],'fiat':_0x3e4353['fiat'],'startdate':_0x3e4353[_0x52f127(0x20e)],'recreate':_0x3e4353[_0x52f127(0x33b)],'timeshift':_0x3e4353['timeshift'],'onepagemode':_0x3e4353['onepagemode'],'headless':_0x3e4353[_0x52f127(0x1b5)],'cooldown':_0x3e4353['cooldown'],'change24h':_0x3e4353['change24h'],'emojibuy':_0x3e4353['emojibuy'],'emojisell':_0x3e4353[_0x52f127(0x2ba)],'colorscheme':_0x3e4353[_0x52f127(0x1ec)],'marketcapApi':_0x3e4353['marketcapApi'],'marketcapEnabled':_0x3e4353[_0x52f127(0x1ff)],'portfolio':_0x3e4353[_0x52f127(0x2f9)],'autoliquidity':_0x3e4353['autoliquidity'],'liquidity':_0x3e4353[_0x52f127(0x2b1)],'openOrders':_0x3e4353['openOrders']},dbConfig[_0x52f127(0x2ef)]('bot')[_0x52f127(0x215)]()[_0x52f127(0x284)](),dbConfig[_0x52f127(0x2ef)](_0x52f127(0x279))[_0x52f127(0x2df)](_0x3e4353)[_0x52f127(0x284)]());}else _0x3e4353={'botID':_0x56126d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x52f127(0x1b7)+_0x56126d,'showname':![],'threshold':0x3,'ordertype':_0x52f127(0x2d2),'timeout':0x14,'fiat':_0x52f127(0x27c),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x52f127(0x261)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x52f127(0x18c),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x52f127(0x171),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3e4353;}function emittedConfiguration(){const _0x5e7259=_0x14f27a;let _0x5e3a51;if(config[_0x5e7259(0x32d)]=='')_0x5e3a51={...config,'configstate':'initial'};else config['apiKey']==_0x5e7259(0x1bb)?_0x5e3a51={...config,'configstate':_0x5e7259(0x2bb)}:(_0x5e3a51={...config,'apiKey':_0x5e7259(0x229),'apiSecret':_0x5e7259(0x229)},config['apiPassword']&&(_0x5e3a51[_0x5e7259(0x25e)]=_0x5e7259(0x229)));return _0x5e3a51;}function getSettings(){const _0xe06cbe=_0x14f27a;return dbSettings[_0xe06cbe(0x2ef)](_0xe06cbe(0x2bd))['value']();}function getSecure(){const _0x56d0b3=_0x14f27a;return dbSecure[_0x56d0b3(0x2ef)](_0x56d0b3(0x281))[_0x56d0b3(0x254)]()||{};}function updateTimeshift(_0x507a38){const _0x22d757=_0x14f27a;let _0x15e2f2=dbConfig[_0x22d757(0x2ef)](_0x22d757(0x279))[_0x22d757(0x179)]({'botID':botID})[_0x22d757(0x254)]();_0x15e2f2&&dbConfig[_0x22d757(0x2ef)]('bot')[_0x22d757(0x179)]({'botID':botID})['assign']({'timeshift':_0x507a38})['write'](),config['timeshift']=_0x507a38,proxyEmit(_0x22d757(0x197),emittedConfiguration());}function updateOnepagemode(_0xd3b966){const _0xb92842=_0x14f27a;let _0x31b6ca=dbConfig[_0xb92842(0x2ef)]('bot')[_0xb92842(0x179)]({'botID':botID})[_0xb92842(0x254)]();_0x31b6ca&&dbConfig[_0xb92842(0x2ef)](_0xb92842(0x279))[_0xb92842(0x179)]({'botID':botID})[_0xb92842(0x29b)]({'onepagemode':_0xd3b966})['write'](),config['onepagemode']=_0xd3b966,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x41d0e7){const _0x1892ff=_0x14f27a,_0x1f235f=_0x41d0e7?!![]:![];let _0x23e6e5=dbConfig['get'](_0x1892ff(0x279))[_0x1892ff(0x179)]({'botID':botID})[_0x1892ff(0x254)]();_0x23e6e5&&dbConfig[_0x1892ff(0x2ef)](_0x1892ff(0x279))['find']({'botID':botID})[_0x1892ff(0x29b)]({'marketcapApi':_0x1f235f})['write'](),config['marketcapApi']=_0x1f235f,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1d2509){const _0xcc901e=_0x14f27a;logger[_0xcc901e(0x174)](_0xcc901e(0x1ac));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xcc901e(0x174)](_0xcc901e(0x190));let _0x318fd2=![],_0x9de98a=![],_0x44d243=[];_0x1d2509[_0xcc901e(0x2f9)][_0xcc901e(0x1a1)](_0x5045b8=>{const _0x26d99d=_0xcc901e;if(!_0x5045b8['excluded']&&_0x5045b8['coin']!=_0x1d2509[_0x26d99d(0x301)])_0x44d243[_0x26d99d(0x2df)](_0x5045b8[_0x26d99d(0x1a7)]);}),_0x44d243[_0xcc901e(0x1a1)](_0x11fc65=>{const _0x68b61a=_0xcc901e,_0x481def=currentCoins[_0x68b61a(0x179)](_0x59450c=>_0x59450c[_0x68b61a(0x1a7)]==_0x11fc65);!_0x481def&&(_0x318fd2=!![]);}),currentCoins['forEach'](_0x5753a9=>{const _0x10b7f5=_0xcc901e;if(_0x5753a9['coin']!=config[_0x10b7f5(0x301)]){const _0x6d9817=_0x44d243[_0x10b7f5(0x179)](_0x308dd3=>_0x308dd3==_0x5753a9['symbol']);!_0x6d9817&&(_0x318fd2=!![]);}}),_0x1d2509[_0xcc901e(0x2f9)]['forEach'](_0x4a44c3=>{const _0x3b6fd2=_0xcc901e,_0x50276c=config[_0x3b6fd2(0x2f9)][_0x3b6fd2(0x179)](_0x51c341=>_0x51c341[_0x3b6fd2(0x196)]==_0x4a44c3[_0x3b6fd2(0x196)]);if(_0x50276c&&_0x4a44c3[_0x3b6fd2(0x22a)]!=_0x50276c[_0x3b6fd2(0x22a)])_0x9de98a=!![];});let _0x3c758f=dbConfig[_0xcc901e(0x2ef)](_0xcc901e(0x279))[_0xcc901e(0x179)]({'botID':botID})[_0xcc901e(0x254)]();_0x1d2509={..._0x1d2509,'apiKey':crypt[_0xcc901e(0x29e)](secure[_0xcc901e(0x324)],_0x1d2509[_0xcc901e(0x32d)])[_0xcc901e(0x292)],'apiSecret':crypt['decrypt'](secure[_0xcc901e(0x324)],_0x1d2509['apiSecret'])[_0xcc901e(0x292)]};_0x1d2509[_0xcc901e(0x25e)]&&(_0x1d2509[_0xcc901e(0x25e)]=crypt[_0xcc901e(0x29e)](secure[_0xcc901e(0x324)],_0x1d2509[_0xcc901e(0x25e)])[_0xcc901e(0x292)]);let _0x1b644a=![];if(_0x3c758f){_0x1d2509['apiKey']=='************'?_0x1d2509[_0xcc901e(0x32d)]=config[_0xcc901e(0x32d)]:_0x1b644a=!![];_0x1d2509[_0xcc901e(0x1c9)]==_0xcc901e(0x229)?_0x1d2509[_0xcc901e(0x1c9)]=config[_0xcc901e(0x1c9)]:_0x1b644a=!![];if(_0x1d2509['apiPassword']==_0xcc901e(0x229))_0x1d2509['apiPassword']=config[_0xcc901e(0x25e)];else{if(_0x1d2509[_0xcc901e(0x25e)])_0x1b644a=!![];}dbConfig[_0xcc901e(0x2ef)](_0xcc901e(0x279))[_0xcc901e(0x179)]({'botID':botID})[_0xcc901e(0x29b)](_0x1d2509)[_0xcc901e(0x284)]();}else dbConfig[_0xcc901e(0x2ef)]('bot')[_0xcc901e(0x2df)](_0x1d2509)[_0xcc901e(0x284)](),_0x1b644a=!![],process[_0xcc901e(0x204)]({'status':_0xcc901e(0x198),'live':_0xcc901e(0x237)},_0x162e33=>{});process[_0xcc901e(0x204)]({'botname':_0x1d2509[_0xcc901e(0x1cd)]},_0x5411e8=>{}),config={..._0x1d2509},updateBotManager(),proxyEmit(_0xcc901e(0x2f1)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1b644a)await reset(!![]);else _0x318fd2||_0x9de98a?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0xcc901e(0x174)](_0xcc901e(0x28d));}async function storeHeadless(_0x3abaae){const _0xbd8b64=_0x14f27a,_0x519009={...config,'headless':_0x3abaae[_0xbd8b64(0x1b5)]};let _0x19ade7=dbConfig[_0xbd8b64(0x2ef)](_0xbd8b64(0x279))[_0xbd8b64(0x179)]({'botID':botID})[_0xbd8b64(0x254)]();_0x19ade7&&dbConfig['get'](_0xbd8b64(0x279))['find']({'botID':botID})[_0xbd8b64(0x29b)](_0x519009)[_0xbd8b64(0x284)](),config={..._0x519009},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5d5fec){const _0x565dd7=_0x14f27a,_0x51b27b={...config,'fiat':_0x5d5fec};let _0xec89ec=dbConfig['get'](_0x565dd7(0x279))[_0x565dd7(0x179)]({'botID':botID})[_0x565dd7(0x254)]();_0xec89ec&&dbConfig[_0x565dd7(0x2ef)]('bot')['find']({'botID':botID})['assign'](_0x51b27b)[_0x565dd7(0x284)](),config={..._0x51b27b},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x173297=_0x14f27a;logger[_0x173297(0x175)](_0x173297(0x231));try{if(fs[_0x173297(0x325)](path[_0x173297(0x283)](configpath,_0x173297(0x17a)+botID+_0x173297(0x203))))fs['unlinkSync'](path[_0x173297(0x283)](configpath,_0x173297(0x17a)+botID+'-events.json'));if(fs[_0x173297(0x325)](path[_0x173297(0x283)](configpath,_0x173297(0x17a)+botID+_0x173297(0x1d9))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x173297(0x1d9)));if(fs['existsSync'](path['join'](configpath,_0x173297(0x17a)+botID+_0x173297(0x1fc))))fs[_0x173297(0x1f9)](path['join'](configpath,_0x173297(0x17a)+botID+_0x173297(0x1fc)));}catch(_0x4916c6){if(_0x4916c6)logger[_0x173297(0x175)](_0x173297(0x2c4),_0x4916c6);}const _0x397d92=getDate();let _0x657881=[];currentCoins[_0x173297(0x1a1)](_0x28a4d5=>{const _0x277f2c=_0x173297;_0x657881[_0x277f2c(0x2df)]({'coin':_0x28a4d5[_0x277f2c(0x196)],'number':_0x28a4d5['number'],'price':_0x28a4d5['last']});});let _0x5d7e58=dbConfig[_0x173297(0x2ef)](_0x173297(0x279))[_0x173297(0x179)]({'botID':botID})[_0x173297(0x254)]();_0x5d7e58&&(dbConfig[_0x173297(0x2ef)]('bot')[_0x173297(0x179)]({'botID':botID})[_0x173297(0x29b)]({'liquidity':[{'date':_0x397d92,'changes':_0x657881}]})[_0x173297(0x284)](),config[_0x173297(0x2b1)]=[]),restartBot(!![]);}function noslash(_0x37919b){const _0x4abe70=_0x14f27a;return _0x37919b[_0x4abe70(0x31f)]('/','');}function updateHighestFee(_0x5d6bb0){const _0x104390=_0x14f27a;if(_0x5d6bb0['reverse']){let _0x36ae67={'filled':_0x5d6bb0[_0x104390(0x1bd)]*_0x5d6bb0[_0x104390(0x2ea)],'amount':_0x5d6bb0[_0x104390(0x1bd)]*_0x5d6bb0[_0x104390(0x2ea)],'side':_0x5d6bb0['side']==_0x104390(0x201)?_0x104390(0x2ee):'sell','price':0x1/_0x5d6bb0[_0x104390(0x2ea)]};_0x5d6bb0={..._0x5d6bb0,..._0x36ae67};}const _0x52a5bc=defaultFee*_0x5d6bb0[_0x104390(0x1bd)]*_0x5d6bb0[_0x104390(0x2ea)];lastFees[_0x104390(0x241)][_0x104390(0x250)]===0x14&&lastFees[_0x104390(0x241)][_0x104390(0x1d2)](),lastFees[_0x104390(0x241)][_0x104390(0x2df)](_0x52a5bc),lastFees[_0x104390(0x18a)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x409b15){const _0x53c3c3=_0x14f27a;logger['debug'](_0x53c3c3(0x336)+_0x409b15['symbol']+_0x53c3c3(0x1e3)+_0x409b15['status']+_0x53c3c3(0x1e3)+_0x409b15[_0x53c3c3(0x1bd)]+_0x53c3c3(0x2d8)+_0x409b15[_0x53c3c3(0x288)]+_0x53c3c3(0x1e3)+_0x409b15['id']);_0x409b15['filled']>0x0&&(blockTransactionDetection=!![]);let _0x3a0cf0=_0x409b15[_0x53c3c3(0x2c8)],_0x2e88a5=![];currentCoins[_0x53c3c3(0x1a1)](_0x101899=>{const _0x286ab9=_0x53c3c3;_0x101899[_0x286ab9(0x1a7)]==_0x409b15[_0x286ab9(0x1a7)]&&(_0x2e88a5=!![]);});if(!_0x2e88a5)return;const _0x5a9e4c=currentCoins[_0x53c3c3(0x179)](_0x196faa=>_0x196faa[_0x53c3c3(0x1a7)]==_0x409b15[_0x53c3c3(0x1a7)]),_0xda4409=_0x538b90=>{const _0x30fb44=_0x53c3c3;if(_0x5a9e4c)_0x5a9e4c[_0x30fb44(0x2d7)]=_0x538b90;};if(_0x3a0cf0==_0x53c3c3(0x1f4))_0xda4409(_0x53c3c3(0x1f4));else{if(_0x3a0cf0==_0x53c3c3(0x2b6)){_0xda4409(_0x53c3c3(0x2b6));const _0x14c9fb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x14c9fb,blockTransactionDetection=![],await getOpenOrders(),handleOpenOrders();}else{if(_0x3a0cf0=='closed'){let _0x3dba18=![];if(lastOrders)for(const _0x4dad6b of lastOrders){const _0xf802fa=0xc8,_0x550566=0x1388;let _0x59fe4a=0x0;while(!_0x4dad6b['orderId']&&_0x59fe4a*_0xf802fa<_0x550566){_0x59fe4a++,await sleep(_0xf802fa);}if(_0x59fe4a>0x0)logger[_0x53c3c3(0x174)](_0x53c3c3(0x223)+_0x59fe4a*_0xf802fa/0x3e8+_0x53c3c3(0x303));if(_0x4dad6b['orderId']==_0x409b15['id']){logger['debug'](_0x53c3c3(0x1f1)+_0x409b15['id']),_0x3dba18=!![];if(_0x4dad6b[_0x53c3c3(0x1bd)]==0x0){logger[_0x53c3c3(0x174)](_0x53c3c3(0x2a0)+_0x409b15['id']);if(_0x409b15['average'])_0x4dad6b[_0x53c3c3(0x2ea)]=_0x409b15[_0x53c3c3(0x2d4)];else{if(_0x409b15[_0x53c3c3(0x2ea)])_0x4dad6b[_0x53c3c3(0x2ea)]=_0x409b15[_0x53c3c3(0x2ea)];else{}}_0x4dad6b[_0x53c3c3(0x1bd)]=_0x409b15[_0x53c3c3(0x1bd)],updateHighestFee(_0x4dad6b),_0xda4409('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x52df82=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x52df82,blockTransactionDetection=![];}_0x4dad6b[_0x53c3c3(0x315)]={'currency':_0x409b15[_0x53c3c3(0x315)]?_0x409b15['fee']['currency']:null,'cost':_0x409b15['fee']?_0x409b15[_0x53c3c3(0x315)][_0x53c3c3(0x21d)]:0x0},await updateCoinResults(_0x4dad6b);}}}!_0x3dba18&&(logger[_0x53c3c3(0x174)](_0x53c3c3(0x260)+_0x409b15['id']),_0xda4409(_0x53c3c3(0x1bd)),blockTransactionDetection=![],await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x33ef50=JSON[_0x53c3c3(0x183)](lastBalances[_0x53c3c3(0x2f9)]);const _0x1d45c5=_0x33ef50[_0x53c3c3(0x179)](_0x1efac9=>_0x1efac9['symbol']==_0x409b15[_0x53c3c3(0x1a7)]);if(_0x1d45c5){if(_0x3a0cf0==_0x53c3c3(0x1f4))_0x1d45c5[_0x53c3c3(0x2d7)]=_0x1d45c5['orderstatus']==_0x53c3c3(0x1bd)?_0x53c3c3(0x1bd):_0x53c3c3(0x1f4);else{if(_0x3a0cf0=='canceled')_0x1d45c5[_0x53c3c3(0x2d7)]=_0x1d45c5[_0x53c3c3(0x2d7)]==_0x53c3c3(0x1bd)?'filled':'canceled';else _0x3a0cf0==_0x53c3c3(0x1fe)&&(_0x1d45c5[_0x53c3c3(0x2d7)]=_0x53c3c3(0x1bd));}}lastBalances={...lastBalances,'portfolio':JSON[_0x53c3c3(0x317)](_0x33ef50)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2a84c2=_0x14f27a;await getOpenOrders();let _0x81de10=![];currentCoins[_0x2a84c2(0x1a1)](_0x11b219=>{const _0x4790b8=_0x2a84c2;_0x81de10=allOpenOrders['find'](_0xe18ff8=>_0xe18ff8['symbol']==_0x11b219[_0x4790b8(0x1a7)]),_0x11b219[_0x4790b8(0x2d7)]=_0x81de10?_0x4790b8(0x1f4):_0x4790b8(0x2c6);});}async function getCoins(_0x2c281e=0x0,_0x3f930d=!![],_0x13882e=config[_0x14f27a(0x301)]){const _0x279962=_0x14f27a;let _0x566ca5,_0x2167e3=[],_0x4a2ba1=[],_0x330cfb=[];if(_0x2c281e)await sleep(_0x2c281e);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x566ca5=await exchange[_0x279962(0x245)](),mybalances=_0x566ca5[_0x279962(0x2fd)];for(const [_0x1262a0,_0x5a1f39]of Object[_0x279962(0x1cb)](mybalances)){_0x330cfb[_0x279962(0x2df)](_0x1262a0);}config['portfolio'][_0x279962(0x1a1)](_0x239aba=>{const _0x25b8dc=_0x279962;!_0x330cfb[_0x25b8dc(0x25b)](_0x239aba[_0x25b8dc(0x196)])&&(mybalances[_0x239aba['coin']]=0x0);});if(_0x13882e=='')for(const [_0x428a0b,_0x15beca]of Object[_0x279962(0x1cb)](mybalances)){_0x15beca!=0x0&&_0x2167e3[_0x279962(0x2df)]({'coin':_0x428a0b});}else for(const [_0x4fbb53,_0x387080]of Object[_0x279962(0x1cb)](mybalances)){const _0x197c37=config[_0x279962(0x2f9)]['find'](_0x4e4b38=>_0x4e4b38['coin']==_0x4fbb53),_0x4c31ec=_0x4fbb53+'/'+_0x13882e,_0x4629e9=_0x13882e+'/'+_0x4fbb53,_0x3fb868=currentCoins[_0x279962(0x179)](_0x4aed52=>_0x4aed52['coin']==_0x4fbb53);if((_0x387080!=0x0||_0x197c37)&&(allSymbols[_0x279962(0x25b)](_0x4c31ec)||_0x4fbb53==_0x13882e))_0x3fb868?_0x2167e3[_0x279962(0x2df)]({..._0x3fb868,'number':Math[_0x279962(0x27e)](_0x387080+(_0x197c37&&_0x197c37['offset']||0x0),0x0)}):_0x2167e3[_0x279962(0x2df)]({'coin':_0x4fbb53,'symbol':_0x4c31ec,'reverse':![],'number':Math[_0x279962(0x27e)](_0x387080+(_0x197c37&&_0x197c37[_0x279962(0x22a)]||0x0),0x0),'orderstatus':_0x279962(0x2c6)});else{if((_0x387080!=0x0||_0x197c37)&&allSymbols[_0x279962(0x25b)](_0x4629e9))_0x3fb868?_0x2167e3[_0x279962(0x2df)]({..._0x3fb868,'number':Math[_0x279962(0x27e)](_0x387080+(_0x197c37&&_0x197c37[_0x279962(0x22a)]||0x0),0x0)}):_0x2167e3[_0x279962(0x2df)]({'coin':_0x4fbb53,'symbol':_0x4629e9,'reverse':!![],'number':Math[_0x279962(0x27e)](_0x387080+(_0x197c37&&_0x197c37[_0x279962(0x22a)]||0x0),0x0),'orderstatus':_0x279962(0x2c6)});else _0x197c37&&_0x2167e3[_0x279962(0x2df)]({'coin':_0x197c37[_0x279962(0x196)],'symbol':_0x197c37[_0x279962(0x1a7)],'reverse':_0x197c37[_0x279962(0x28e)],'number':0x0,'orderstatus':_0x279962(0x2c6)});}}}catch(_0x25d79b){if(!_0x3f930d)handleErrorNoStop(_0x25d79b,_0x279962(0x17f));else await handleError(_0x25d79b,'getCoins()');}return _0x2167e3[_0x279962(0x263)]((_0x5c745e,_0x217093)=>_0x5c745e[_0x279962(0x2dc)]<_0x217093['delta']?0x1:_0x217093[_0x279962(0x2dc)]<_0x5c745e['delta']?-0x1:0x0),_0x4a2ba1=cloneDeep(_0x2167e3),_0x2167e3=_0x2167e3[_0x279962(0x1dc)](_0x211b24=>{const _0x430662=_0x279962,_0x105328=config[_0x430662(0x2f9)]['find'](_0x4e87d5=>_0x4e87d5[_0x430662(0x196)]==_0x211b24[_0x430662(0x196)]);return _0x105328&&!_0x105328[_0x430662(0x20f)];}),[_0x2167e3,_0x4a2ba1];}async function getCoinNumber(_0x501563){const _0x547af8=_0x14f27a;let _0x53c9e9;try{const _0x216fdc=await exchange['fetchBalance']();_0x53c9e9=_0x216fdc[_0x547af8(0x2fd)][_0x501563];}catch(_0x4e4303){await handleError(_0x4e4303,_0x547af8(0x24a));}return _0x53c9e9;}async function getOpenOrders(){const _0x47e59e=_0x14f27a;let _0x352386;allOpenOrders=[];try{for(const _0x1cc3f9 of config[_0x47e59e(0x2f9)]){!_0x1cc3f9[_0x47e59e(0x20f)]&&_0x1cc3f9[_0x47e59e(0x196)]!=config['basecoin']&&(_0x352386=await exchange[_0x47e59e(0x18f)](_0x1cc3f9[_0x47e59e(0x1a7)]),_0x352386[_0x47e59e(0x250)]>0x0&&allOpenOrders[_0x47e59e(0x2df)](_0x352386[0x0]));}}catch(_0x327f8d){await handleError(_0x327f8d,'getOpenOrders()');}}async function handleOpenOrders(_0x272dce=0x0){const _0x42f631=_0x14f27a;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x42f631(0x249)]&&allOrdersPlaced&&(_0x272dce==0x0?(logger[_0x42f631(0x174)](_0x42f631(0x27d)),_0x272dce++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x42f631(0x326)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0xa9a477){const _0xe243e7=_0x14f27a,_0x3d5ac1=ccxt[_0xe243e7(0x1f7)][_0xa9a477[_0xe243e7(0x2eb)][_0xe243e7(0x2d1)]()],_0x3cdfa0=new _0x3d5ac1({'apiKey':_0xa9a477['apiKey'],'secret':_0xa9a477[_0xe243e7(0x1c9)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xe243e7(0x257)}});if(_0xa9a477[_0xe243e7(0x25e)])_0x3cdfa0[_0xe243e7(0x1f2)]=_0xa9a477[_0xe243e7(0x25e)];try{await _0x3cdfa0[_0xe243e7(0x1a4)]();}catch(_0x44a11c){throw _0x44a11c;}}function cloneDeep(_0x2fccfe){const _0x52ec38=_0x14f27a;return JSON[_0x52ec38(0x183)](JSON[_0x52ec38(0x317)](_0x2fccfe));}async function getPortfolio(_0x68eefb){const _0x2dc5d2=_0x14f27a;let _0x3c0753=[],_0x5b6a5b=[],_0xf74f2b=[],_0x479341;if(_0x68eefb['apiKey']!==_0x2dc5d2(0x229)||_0x68eefb['apiSecret']!=='************'||_0x68eefb['apiPassword']&&_0x68eefb[_0x2dc5d2(0x25e)]!=='************'){if(config[_0x2dc5d2(0x2eb)]){if(_0x68eefb['apiKey']==_0x2dc5d2(0x229))_0x68eefb[_0x2dc5d2(0x32d)]=config[_0x2dc5d2(0x32d)];if(_0x68eefb[_0x2dc5d2(0x1c9)]=='************')_0x68eefb[_0x2dc5d2(0x1c9)]=config[_0x2dc5d2(0x1c9)];if(_0x68eefb['apiPassword']==_0x2dc5d2(0x229))_0x68eefb[_0x2dc5d2(0x25e)]=config[_0x2dc5d2(0x25e)];try{await testAPI(_0x68eefb);}catch(_0xf6af77){if(_0xf6af77['toString']()[_0x2dc5d2(0x25b)](_0x2dc5d2(0x310))){logger[_0x2dc5d2(0x174)](_0x2dc5d2(0x2fe)),proxyEmit(_0x2dc5d2(0x2f9),![]);return;}else{handleError(_0xf6af77,_0x2dc5d2(0x1fb));return;}}}await initExchange(_0x68eefb[_0x2dc5d2(0x2eb)],_0x68eefb[_0x2dc5d2(0x32d)],_0x68eefb[_0x2dc5d2(0x1c9)],_0x68eefb[_0x2dc5d2(0x25e)]);try{await loadSymbols();}catch(_0x4ea72){if(_0x4ea72[_0x2dc5d2(0x247)]()[_0x2dc5d2(0x25b)](_0x2dc5d2(0x310))){proxyEmit(_0x2dc5d2(0x2f9),![]);return;}else{handleError(_0x4ea72,_0x2dc5d2(0x23b));return;}}const _0x5d5cf1=await getCoins(0x0,![],_0x68eefb[_0x2dc5d2(0x301)]);_0xf74f2b=cloneDeep(_0x5d5cf1[0x1]);}else{const _0x4b0634=await getCoins();_0xf74f2b=cloneDeep(_0x4b0634[0x1]);}if(_0x68eefb[_0x2dc5d2(0x301)]=='')proxyEmit('portfolio',_0xf74f2b);else{_0xf74f2b['forEach'](_0x5be586=>{const _0xa582=_0x2dc5d2;if(_0x5be586['coin']!=_0x68eefb[_0xa582(0x301)]&&allSymbols[_0xa582(0x25b)](_0x5be586[_0xa582(0x1a7)]))_0x3c0753[_0xa582(0x2df)](_0x5be586[_0xa582(0x1a7)]);});if(_0x3c0753[_0x2dc5d2(0x250)]==0x0)logHistory(_0x2dc5d2(0x1f8),_0x2dc5d2(0x282));else{try{_0x5b6a5b=await getTickers(_0x3c0753);}catch(_0x15370d){if(_0x15370d[_0x2dc5d2(0x247)]()[_0x2dc5d2(0x25b)](_0x2dc5d2(0x310))){proxyEmit(_0x2dc5d2(0x2f9),![]);return;}else handleError(_0x15370d,_0x2dc5d2(0x195));}_0xf74f2b[_0x2dc5d2(0x1a1)](_0x21ffc9=>{const _0x2c153f=_0x2dc5d2;_0x21ffc9['coin']!=_0x68eefb['basecoin']?_0x5b6a5b[_0x21ffc9[_0x2c153f(0x1a7)]]?_0x479341=_0x21ffc9[_0x2c153f(0x28e)]?0x1/_0x5b6a5b[_0x21ffc9[_0x2c153f(0x1a7)]][_0x2c153f(0x208)]:_0x5b6a5b[_0x21ffc9['symbol']]['last']:_0x479341=0x0:_0x479341=0x1,_0x21ffc9[_0x2c153f(0x2ea)]=formatResult(_0x479341,0x8);}),await getMarketCap(_0xf74f2b),proxyEmit('portfolio',_0xf74f2b);}}}function truncateTradeAmount(_0x29d76a,_0x579256){const _0x1cacb1=_0x14f27a;let _0x187535=0x0;try{_0x187535=exchange[_0x1cacb1(0x2a7)](_0x29d76a,_0x579256);}catch(_0x2d9852){}return _0x187535;}function checkMinimums(_0x36ec19){const _0x5fbbe0=_0x14f27a;let _0x13a339=!![];const _0x509989=!_0x36ec19[_0x5fbbe0(0x28e)]?markets[_0x36ec19[_0x5fbbe0(0x1a7)]][_0x5fbbe0(0x21c)]['amount'][_0x5fbbe0(0x304)]:markets[_0x36ec19['symbol']][_0x5fbbe0(0x21c)][_0x5fbbe0(0x21d)][_0x5fbbe0(0x304)],_0x3be69e=!_0x36ec19['reverse']?markets[_0x36ec19[_0x5fbbe0(0x1a7)]][_0x5fbbe0(0x21c)][_0x5fbbe0(0x21d)][_0x5fbbe0(0x304)]:markets[_0x36ec19[_0x5fbbe0(0x1a7)]][_0x5fbbe0(0x21c)]['amount'][_0x5fbbe0(0x304)],_0x187fe6=truncateTradeAmount(_0x36ec19['symbol'],_0x36ec19[_0x5fbbe0(0x295)]);_0x36ec19[_0x5fbbe0(0x295)]=_0x187fe6;if(Math[_0x5fbbe0(0x213)](_0x187fe6)<_0x509989)_0x13a339=![];if(Math[_0x5fbbe0(0x213)](_0x187fe6)*_0x36ec19['last']<_0x3be69e)_0x13a339=![];if(_0x36ec19[_0x5fbbe0(0x1dd)]==_0x5fbbe0(0x201)){let _0x2f24a1=config[_0x5fbbe0(0x2f9)][_0x5fbbe0(0x179)](_0x107105=>_0x107105[_0x5fbbe0(0x196)]==_0x36ec19['coin']);if(_0x2f24a1['offset']>0x0){if(Math[_0x5fbbe0(0x213)](_0x187fe6)>_0x36ec19[_0x5fbbe0(0x29c)]-_0x2f24a1[_0x5fbbe0(0x22a)])_0x13a339=![];}else{if(Math[_0x5fbbe0(0x213)](_0x187fe6)>_0x36ec19[_0x5fbbe0(0x29c)])_0x13a339=![];}}if(_0x36ec19[_0x5fbbe0(0x1dd)]==_0x5fbbe0(0x2ee)){let _0x1a2d25=config[_0x5fbbe0(0x2f9)][_0x5fbbe0(0x179)](_0xbfa13a=>_0xbfa13a[_0x5fbbe0(0x196)]==config[_0x5fbbe0(0x301)]),_0x17af9c=currentCoins[_0x5fbbe0(0x179)](_0x4f4bfa=>_0x4f4bfa[_0x5fbbe0(0x196)]==config[_0x5fbbe0(0x301)]);if(_0x1a2d25[_0x5fbbe0(0x22a)]>0x0){if(Math[_0x5fbbe0(0x213)](_0x187fe6)*_0x36ec19['last']>_0x17af9c['number']-_0x1a2d25[_0x5fbbe0(0x22a)])_0x13a339=![];}else{if(Math[_0x5fbbe0(0x213)](_0x187fe6)*_0x36ec19['last']>_0x17af9c[_0x5fbbe0(0x29c)])_0x13a339=![];}}return _0x13a339;}async function getBalances(_0x1fa2dd=!![]){const _0x5ee42f=_0x14f27a;let _0xbd2625=0x0,_0x3a5a44;const _0x528616=config[_0x5ee42f(0x246)];if(config[_0x5ee42f(0x1b5)]&&config[_0x5ee42f(0x2b3)]<0x0)await validate24hChanges();currentCoins[_0x5ee42f(0x1a1)](_0x1bd65f=>{const _0x5e8790=_0x5ee42f;if(_0x1bd65f['coin']!=config[_0x5e8790(0x301)]){let _0x551348=gTicker[noslash(_0x1bd65f['symbol'])];_0x3a5a44=_0x1bd65f[_0x5e8790(0x28e)]?0x1/_0x551348:_0x551348;}else _0x3a5a44=0x1;let _0x9f71d7=_0x1bd65f[_0x5e8790(0x29c)]*_0x3a5a44;_0xbd2625+=_0x9f71d7,_0x1bd65f[_0x5e8790(0x208)]=formatResult(Number(_0x3a5a44),0x8),_0x1bd65f[_0x5e8790(0x254)]=_0x9f71d7;}),currentCoins[_0x5ee42f(0x1a1)](_0x6b9b7b=>{const _0xd31af4=_0x5ee42f;let _0x1701be=config[_0xd31af4(0x2f9)]['find'](_0x19391a=>_0x19391a[_0xd31af4(0x196)]==_0x6b9b7b[_0xd31af4(0x196)]),_0x487eda=Number(_0x1701be['distribution']),_0x4bcec3=_0x6b9b7b[_0xd31af4(0x254)]/_0xbd2625*0x64,_0x1ec87b=_0x487eda*_0xbd2625/0x64/_0x6b9b7b[_0xd31af4(0x208)]-_0x6b9b7b['number'];_0x6b9b7b[_0xd31af4(0x1ba)]=formatResult(_0x4bcec3,0x3),_0x6b9b7b[_0xd31af4(0x265)]=formatResult(_0x487eda,0x3),_0x6b9b7b[_0xd31af4(0x295)]=formatResult(_0x1ec87b,0x8),_0x6b9b7b['side']='',_0x6b9b7b['valid']=![];if(_0x6b9b7b['coin']!=config[_0xd31af4(0x301)]){if(_0x6b9b7b['distribution']>_0x487eda)_0x6b9b7b['side']=_0xd31af4(0x201),_0x6b9b7b[_0xd31af4(0x20a)]=checkMinimums(_0x6b9b7b);else _0x6b9b7b[_0xd31af4(0x1ba)]<_0x487eda&&(_0x6b9b7b[_0xd31af4(0x1dd)]='buy',_0x6b9b7b[_0xd31af4(0x20a)]=checkMinimums(_0x6b9b7b));}_0x6b9b7b[_0xd31af4(0x2dc)]=_0x6b9b7b['distribution']/_0x6b9b7b['target']-0x1;if(_0x6b9b7b[_0xd31af4(0x2d7)]=='filled'||_0x6b9b7b[_0xd31af4(0x2d7)]==_0xd31af4(0x2b6))_0x6b9b7b[_0xd31af4(0x2d7)]='none';}),currentCoins[_0x5ee42f(0x263)]((_0x1cfdb6,_0x498ffc)=>_0x1cfdb6[_0x5ee42f(0x2dc)]<_0x498ffc['delta']?0x1:_0x498ffc[_0x5ee42f(0x2dc)]<_0x1cfdb6['delta']?-0x1:0x0);const _0x5767c9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5767c9[_0x5ee42f(0x1d4)],'usd':_0x5767c9[_0x5ee42f(0x24e)],'portfolio':JSON[_0x5ee42f(0x317)](currentCoins),'threshold':_0x528616},proxyEmit(_0x5ee42f(0x1e5),{'serverversion':serverversion,'balances':lastBalances});if(_0x1fa2dd){if(config[_0x5ee42f(0x1b5)])headlessMode({'portfolio':currentCoins,'threshold':_0x528616});else{if(lockOrders==ORDERS[_0x5ee42f(0x1d3)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x528616});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x53aa02=getNormalizedPerformance();getStartingBalances(_0x53aa02),emitPerformance(_0x53aa02);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x19b8bc=_0x14f27a;if(!lastBalances)return;let _0x164ea1=[],_0x4602d0,_0x4e353f=JSON['parse'](lastBalances[_0x19b8bc(0x2f9)]);_0x4e353f['sort']((_0x3fcda2,_0x1c682e)=>_0x3fcda2[_0x19b8bc(0x196)]>_0x1c682e[_0x19b8bc(0x196)]?0x1:_0x1c682e[_0x19b8bc(0x196)]>_0x3fcda2[_0x19b8bc(0x196)]?-0x1:0x0),_0x4e353f[_0x19b8bc(0x1a1)](_0x86534f=>{const _0x3c7749=_0x19b8bc;let _0xf510e4={'coin':_0x86534f[_0x3c7749(0x196)],'number':_0x86534f[_0x3c7749(0x29c)],'price':_0x86534f[_0x3c7749(0x208)]};_0x164ea1[_0x3c7749(0x2df)](_0xf510e4);});const _0x4562c3=await getFiat();_0x4602d0={'date':lastBalances[_0x19b8bc(0x1c3)]['split']('\x20')[0x0],'eur':_0x4562c3[_0x19b8bc(0x1d4)],'usd':_0x4562c3[_0x19b8bc(0x24e)],'coins':_0x164ea1};let _0x5890c7=dbPerformance[_0x19b8bc(0x2ef)](_0x19b8bc(0x2b9))[_0x19b8bc(0x179)]({'date':_0x4602d0[_0x19b8bc(0x1d5)]})['value']();_0x5890c7?_0x4602d0['date']!=config[_0x19b8bc(0x20e)]&&dbPerformance[_0x19b8bc(0x2ef)](_0x19b8bc(0x2b9))['find']({'date':_0x4602d0[_0x19b8bc(0x1d5)]})[_0x19b8bc(0x29b)](_0x4602d0)[_0x19b8bc(0x284)]():dbPerformance['get'](_0x19b8bc(0x2b9))[_0x19b8bc(0x2df)](_0x4602d0)[_0x19b8bc(0x284)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x47b3d6=_0x14f27a;let _0x348e2f=[];if(dbPerformance['has'](_0x47b3d6(0x2b9))[_0x47b3d6(0x254)]()){let _0x2aad90=dbPerformance[_0x47b3d6(0x2ef)](_0x47b3d6(0x2b9))[_0x47b3d6(0x309)]()['filter'](_0x1d247c=>{const _0xdd7fb6=_0x47b3d6;if(_0x1d247c[_0xdd7fb6(0x2aa)][_0xdd7fb6(0x250)]==0x0)return![];else return!![];})[_0x47b3d6(0x25c)](_0x47b3d6(0x1d5))[_0x47b3d6(0x254)](),_0x264d4b=[...config[_0x47b3d6(0x2b1)]];_0x264d4b[_0x47b3d6(0x263)]((_0x5f129e,_0x30b5bc)=>_0x5f129e[_0x47b3d6(0x1d5)]>_0x30b5bc[_0x47b3d6(0x1d5)]?-0x1:_0x30b5bc[_0x47b3d6(0x1d5)]>_0x5f129e[_0x47b3d6(0x1d5)]?0x1:0x0);let _0x595742=0x1,_0x58ab50=[],_0x5d0f5d=0x0;_0x2aad90[_0x47b3d6(0x253)]()[_0x47b3d6(0x28e)]()[_0x47b3d6(0x1a1)]((_0x1d5948,_0x1db0b3)=>{const _0x1ee186=_0x47b3d6;if(_0x264d4b[_0x5d0f5d]){if(_0x2aad90[_0x2aad90[_0x1ee186(0x250)]-_0x1db0b3]&&_0x264d4b[_0x5d0f5d][_0x1ee186(0x1d5)]==_0x2aad90[_0x2aad90[_0x1ee186(0x250)]-_0x1db0b3][_0x1ee186(0x1d5)]){if(_0x1db0b3<_0x2aad90[_0x1ee186(0x250)]){let _0x507a3e=0x0,_0x2dd81a=0x0;_0x2aad90[_0x2aad90[_0x1ee186(0x250)]-_0x1db0b3][_0x1ee186(0x2aa)]['forEach'](_0x4be2bb=>{_0x2dd81a+=_0x4be2bb['number']*_0x4be2bb['price'];}),_0x264d4b[_0x5d0f5d][_0x1ee186(0x313)][_0x1ee186(0x1a1)](_0x2dece4=>{const _0x95a935=_0x1ee186;_0x507a3e+=_0x2dece4[_0x95a935(0x29c)]*_0x2dece4['price'];}),_0x595742*=_0x507a3e/(_0x2dd81a-_0x507a3e)+0x1;}_0x5d0f5d++;}}let _0x3b0159=0x0;_0x1d5948['coins'][_0x1ee186(0x1a1)](_0x341c93=>{const _0xd7ec34=_0x1ee186;_0x3b0159+=_0x341c93[_0xd7ec34(0x29c)]*_0x341c93[_0xd7ec34(0x2ea)];}),_0x58ab50[_0x2aad90[_0x1ee186(0x250)]-_0x1db0b3-0x1]=_0x3b0159*(_0x595742-0x1);});let _0x541282=[];_0x264d4b=[...config[_0x47b3d6(0x2b1)]]||[];let _0x2797b9=0x0;_0x5d0f5d=0x0,_0x2aad90['forEach']((_0x56cc18,_0x37c989)=>{const _0x3c8a16=_0x47b3d6;if(_0x264d4b[_0x5d0f5d]){const _0xd4bde0=fns['parse'](_0x264d4b[_0x5d0f5d][_0x3c8a16(0x1d5)],_0x3c8a16(0x236),new Date()),_0x4c1d35=fns[_0x3c8a16(0x183)](_0x56cc18[_0x3c8a16(0x1d5)],_0x3c8a16(0x236),new Date());if(fns['isEqual'](_0xd4bde0,_0x4c1d35)){let _0x49b072=0x0;_0x264d4b[_0x5d0f5d]['changes'][_0x3c8a16(0x1a1)](_0x234e01=>{const _0x3452eb=_0x3c8a16;!_0x541282[_0x234e01[_0x3452eb(0x196)]]?_0x541282[_0x234e01[_0x3452eb(0x196)]]=_0x234e01[_0x3452eb(0x29c)]:(_0x49b072=_0x541282[_0x234e01[_0x3452eb(0x196)]],_0x541282[_0x234e01[_0x3452eb(0x196)]]+=_0x234e01[_0x3452eb(0x29c)]);const _0x1e4475=_0x56cc18[_0x3452eb(0x2aa)]['find'](_0x430488=>_0x430488[_0x3452eb(0x196)]==_0x234e01['coin']);(!_0x1e4475||_0x1e4475[_0x3452eb(0x29c)]==0x0)&&(_0x2797b9+=(-_0x234e01[_0x3452eb(0x29c)]-_0x49b072)*_0x234e01[_0x3452eb(0x2ea)]);}),_0x5d0f5d++;}}_0x56cc18[_0x3c8a16(0x2aa)]['forEach']((_0x219430,_0x1f3749)=>{const _0xdd0581=_0x3c8a16;_0x541282[_0x219430['coin']]&&(_0x219430[_0xdd0581(0x189)]=_0x541282[_0x219430[_0xdd0581(0x196)]]);}),_0x348e2f[_0x3c8a16(0x2df)]({'date':_0x56cc18[_0x3c8a16(0x1d5)],'eur':_0x56cc18['eur'],'usd':_0x56cc18[_0x3c8a16(0x24e)],'offset':_0x58ab50[_0x37c989],'netoffset':_0x2797b9,'coins':_0x56cc18[_0x3c8a16(0x2aa)]});});}return _0x348e2f;}function emitPerformance(_0x4a0dce){const _0x2bbd06=_0x14f27a;_0x4a0dce[_0x2bbd06(0x250)]!==0x0?(proxyEmit(_0x2bbd06(0x1ca),_0x4a0dce),lastPerformanceEmitted=getDate()):proxyEmit(_0x2bbd06(0x1ca),[]);}function getPerf(_0xcb97c7,_0x4af118){const _0x4a0ff8=_0x14f27a;let _0x2ae499=0x0,_0x7462d6=0x0,_0x1f1b87=0x0;_0xcb97c7[_0x4a0ff8(0x2aa)][_0x4a0ff8(0x1a1)](_0x3156d6=>{const _0x1b3ea3=_0x4a0ff8;_0x2ae499+=_0x3156d6[_0x1b3ea3(0x29c)]*_0x3156d6['price'];});_0x4af118&&(_0x2ae499+=_0xcb97c7[_0x4a0ff8(0x22a)]);if(config[_0x4a0ff8(0x301)]===_0x4a0ff8(0x185)||config[_0x4a0ff8(0x301)]===_0x4a0ff8(0x226)||config[_0x4a0ff8(0x301)]==='PAXG')_0x7462d6=_0x2ae499*_0xcb97c7[_0x4a0ff8(0x1d4)],_0x1f1b87=_0x2ae499*_0xcb97c7[_0x4a0ff8(0x24e)];else{if(usdBasecoins[_0x4a0ff8(0x25b)](config[_0x4a0ff8(0x301)]))_0x7462d6=_0x2ae499*_0xcb97c7['eur']/_0xcb97c7[_0x4a0ff8(0x24e)],_0x1f1b87=_0x2ae499;else config[_0x4a0ff8(0x301)]===_0x4a0ff8(0x1d8)&&(_0x7462d6=_0x2ae499,_0x1f1b87=_0x2ae499*_0xcb97c7[_0x4a0ff8(0x24e)]/_0xcb97c7['eur']);}return[_0x2ae499,_0x7462d6,_0x1f1b87];}function getKPIs(_0x27db1c,_0x17bca7=_0x14f27a(0x1d8)){const _0x2e64e3=_0x14f27a,_0x1bf324=config[_0x2e64e3(0x301)],_0x57b2b0=lastBalances,_0x1c2470=currentCoins,_0x1e154f=getNormalizedPerformance(),_0x22fbea=_0x27db1c==='basecoin'?_0x1bf324:_0x27db1c===_0x2e64e3(0x25a)||_0x27db1c===_0x2e64e3(0x2e2)?_0x17bca7:_0x2e64e3(0x22d)+_0x1bf324,_0x5b6fec=_0x27db1c===_0x2e64e3(0x33c)?'Net\x20effect':_0x27db1c==='net-fiat'?_0x2e64e3(0x2e9):_0x22fbea+_0x2e64e3(0x291),_0x43b808=_0x27db1c==='net-basecoin'||_0x27db1c===_0x2e64e3(0x2e2)?_0x2e64e3(0x2e9):_0x22fbea+_0x2e64e3(0x2be);let _0x56037d=0x0;_0x1c2470['forEach'](_0x25e925=>{const _0x11f8cb=_0x2e64e3;_0x56037d+=_0x25e925[_0x11f8cb(0x29c)]*_0x25e925[_0x11f8cb(0x208)];});if(_0x27db1c==='fiat'||_0x27db1c==='net-fiat'){if(_0x1bf324===_0x2e64e3(0x185)||_0x1bf324===_0x2e64e3(0x226)||_0x1bf324==='PAXG')_0x56037d=_0x56037d*(_0x17bca7===_0x2e64e3(0x1d8)?_0x57b2b0[_0x2e64e3(0x1d4)]:_0x57b2b0['usd']);else{if(usdBasecoins[_0x2e64e3(0x25b)](_0x1bf324))_0x56037d=_0x56037d*(_0x17bca7===_0x2e64e3(0x1d8)?_0x57b2b0[_0x2e64e3(0x1d4)]/_0x57b2b0['usd']:0x1);else _0x1bf324==='EUR'&&(_0x56037d=_0x56037d*(_0x17bca7==='EUR'?0x1:_0x57b2b0[_0x2e64e3(0x24e)]/_0x57b2b0[_0x2e64e3(0x1d4)]));}}let _0x3aeed8;if(_0x56037d!==0x0){if(_0x27db1c==='basecoin')_0x3aeed8=(_0x56037d/startingBalances[_0x2e64e3(0x301)]-0x1)*0x64;else{if(_0x17bca7==='EUR')_0x3aeed8=(_0x56037d/startingBalances['eur']-0x1)*0x64;else _0x3aeed8=(_0x56037d/startingBalances[_0x2e64e3(0x24e)]-0x1)*0x64;}let _0xfb22fb=0x0;if(startingBalances[_0x2e64e3(0x2aa)])_0x1c2470['forEach'](_0x3ad8c7=>{const _0x3d4624=_0x2e64e3;let _0x17670f=startingBalances[_0x3d4624(0x2aa)][_0x3d4624(0x179)](_0x42166a=>_0x42166a[_0x3d4624(0x196)]===_0x3ad8c7[_0x3d4624(0x196)]);if(_0x17670f&&_0x17670f[_0x3d4624(0x196)]&&_0x3ad8c7[_0x3d4624(0x29c)]!==0x0)_0xfb22fb+=_0x17670f[_0x3d4624(0x29c)]*_0x3ad8c7['last'];});let _0x4a0604=0x0;if(_0x1e154f[_0x2e64e3(0x250)]!==0x0){let _0x3c4b15=_0x1e154f[_0x1e154f[_0x2e64e3(0x250)]-0x1];_0x4a0604=_0x3c4b15[_0x2e64e3(0x32c)];}_0xfb22fb-=_0x4a0604;_0x27db1c===_0x2e64e3(0x33c)&&(_0x3aeed8=(_0x56037d-_0xfb22fb)/startingBalances['basecoin']*0x64,_0x56037d=_0x56037d-_0xfb22fb);if(_0x27db1c===_0x2e64e3(0x2e2)){let _0x4e03dc=_0x17bca7==='EUR'?startingBalances[_0x2e64e3(0x1d4)]:startingBalances[_0x2e64e3(0x24e)];if(_0x1bf324===_0x2e64e3(0x185)||_0x1bf324==='ETH'||_0x1bf324===_0x2e64e3(0x18d))_0xfb22fb=_0x17bca7==='EUR'?_0xfb22fb*_0x57b2b0[_0x2e64e3(0x1d4)]:_0xfb22fb*_0x57b2b0[_0x2e64e3(0x24e)];else{if(usdBasecoins[_0x2e64e3(0x25b)](_0x1bf324))_0xfb22fb=_0x17bca7===_0x2e64e3(0x1d8)?_0xfb22fb*_0x57b2b0[_0x2e64e3(0x1d4)]/_0x57b2b0[_0x2e64e3(0x24e)]:_0xfb22fb;else _0x1bf324===_0x2e64e3(0x1d8)&&(_0xfb22fb=_0x17bca7===_0x2e64e3(0x1d8)?_0xfb22fb:_0xfb22fb*_0x57b2b0[_0x2e64e3(0x24e)]/_0x57b2b0[_0x2e64e3(0x1d4)]);}_0x3aeed8=(_0x56037d-_0xfb22fb)/_0x4e03dc*0x64,_0x56037d=_0x56037d-_0xfb22fb;}if(_0x3aeed8){if(_0x3aeed8<0x64)_0x3aeed8=_0x3aeed8[_0x2e64e3(0x23e)](0x2);else{if(_0x3aeed8<0x3e8)_0x3aeed8=_0x3aeed8[_0x2e64e3(0x23e)](0x1);else _0x3aeed8=_0x3aeed8[_0x2e64e3(0x23e)](0x0);}}else _0x3aeed8=Number('0')['toFixed'](0x2);if(_0x56037d){if(Math[_0x2e64e3(0x213)](_0x56037d)<0.000001)_0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x2);else{if(Math['abs'](_0x56037d)<0.1)_0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x6);else{if(Math[_0x2e64e3(0x213)](_0x56037d)<0x1)_0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x5);else{if(Math[_0x2e64e3(0x213)](_0x56037d)<0xa)_0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x4);else{if(Math[_0x2e64e3(0x213)](_0x56037d)<0x64)_0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x3);else{if(Math[_0x2e64e3(0x213)](_0x56037d)<0x3e8)_0x56037d=_0x56037d['toFixed'](0x2);else _0x56037d=_0x56037d[_0x2e64e3(0x23e)](0x2);}}}}}}else _0x56037d=Number('0')['toFixed'](0x2);}else _0x3aeed8=Number('0')[_0x2e64e3(0x23e)](0x2);return{'value':_0x56037d,'change':_0x3aeed8,'leftTxt':_0x5b6fec,'rightTxt':_0x43b808};}async function getStartingBalances(_0x3cbbe9,_0xf723ac=!![]){const _0x308120=_0x14f27a;if(_0x3cbbe9[_0x308120(0x250)]!==0x0){const [_0x30f0a9,_0x1264ee,_0x5e8144]=getPerf(_0x3cbbe9[0x0],!![]);let _0x2fe421=[];config['portfolio'][_0x308120(0x1a1)](_0x5c8d2f=>{const _0x699bbe=_0x308120;let _0x1f115f=0x0,_0x168806;config['liquidity'][_0x699bbe(0x1a1)](_0x413fa2=>{const _0x1b6502=_0x699bbe;let _0x29dbf2=_0x413fa2['changes'][_0x1b6502(0x179)](_0x42ec7a=>_0x42ec7a['coin']==_0x5c8d2f[_0x1b6502(0x196)]);if(_0x29dbf2){_0x1f115f+=_0x29dbf2[_0x1b6502(0x29c)];if(!_0x168806)_0x168806=_0x29dbf2[_0x1b6502(0x2ea)];}}),_0x2fe421[_0x699bbe(0x2df)]({'coin':_0x5c8d2f[_0x699bbe(0x196)],'number':_0x1f115f,'initialprice':_0x168806});});const _0x12cd9d={'basecoin':_0x30f0a9,'eur':_0x1264ee,'usd':_0x5e8144,'coins':_0x2fe421};if(_0xf723ac)proxyEmit(_0x308120(0x1c2),_0x12cd9d);startingBalances=_0x12cd9d;}}function headlessMode(_0x58c05e){const _0x26009b=_0x14f27a;let _0x5532bc=_0x58c05e[_0x26009b(0x2f9)],_0x136ff8=_0x58c05e[_0x26009b(0x246)],_0x3c1ddc=[];for(let _0x3f0444 of _0x5532bc){if(_0x3f0444[_0x26009b(0x196)]!=config[_0x26009b(0x301)]){if(_0x3f0444[_0x26009b(0x2dc)]>=_0x136ff8/0x64){if(_0x3f0444['valid'])_0x3c1ddc[_0x26009b(0x2df)](_0x3f0444);}else{if(_0x3f0444['delta']<=-_0x136ff8/0x64){if(_0x3f0444[_0x26009b(0x20a)])_0x3c1ddc[_0x26009b(0x2df)](_0x3f0444);}}}}_0x3c1ddc[_0x26009b(0x250)]>0x0&&(lockOrders==ORDERS[_0x26009b(0x1d3)]&&!coolingDown&&_0x3c1ddc[_0x26009b(0x1a1)](_0x3ff679=>{const _0x465980=_0x26009b;logger[_0x465980(0x174)](_0x465980(0x262)+_0x3ff679[_0x465980(0x196)]+'\x20'+_0x3ff679[_0x465980(0x29c)]+'\x20'+_0x3ff679[_0x465980(0x208)]+'\x20'+_0x3ff679[_0x465980(0x1ba)]+'%\x20'+_0x3ff679[_0x465980(0x265)]+'%\x20'+(0x64*_0x3ff679[_0x465980(0x2dc)])[_0x465980(0x23e)](0x2)+_0x465980(0x2fa)+_0x136ff8[_0x465980(0x23e)](0x2)+'%)');}),placeOrder(_0x3c1ddc));}function notifyBalance(_0x395440){const _0x4555e7=_0x14f27a;let _0x1a4eb0=_0x395440[_0x4555e7(0x2f9)],_0x1af753=_0x395440[_0x4555e7(0x246)],_0x3de1f4=[];for(let _0x271bae of _0x1a4eb0){if(_0x271bae[_0x4555e7(0x196)]!=config[_0x4555e7(0x301)]){if(_0x271bae['delta']>=_0x1af753/0x64){if(_0x271bae[_0x4555e7(0x20a)])_0x3de1f4[_0x4555e7(0x2df)](_0x271bae);}else{if(_0x271bae[_0x4555e7(0x2dc)]<=-_0x1af753/0x64){if(_0x271bae[_0x4555e7(0x20a)])_0x3de1f4[_0x4555e7(0x2df)](_0x271bae);}}}}if(_0x3de1f4[_0x4555e7(0x250)]>0x0){let _0x1a73a7=_0x3de1f4[_0x4555e7(0x2cc)](_0x38207f=>_0x38207f[_0x4555e7(0x196)]);_0x1a73a7[_0x4555e7(0x263)]();let _0x25d2ab=_0x1a73a7[_0x4555e7(0x283)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4555e7(0x219),_0x4555e7(0x220));lastCoinsToBalance=_0x25d2ab;}}function symbolToCoin(_0x653fa1){const _0x459e94=_0x14f27a;let _0xd51210;if(_0x653fa1['includes']('/'+config[_0x459e94(0x301)]))_0xd51210=_0x653fa1[_0x459e94(0x31f)]('/'+config['basecoin'],'');if(_0x653fa1[_0x459e94(0x25b)](config['basecoin']+'/'))_0xd51210=_0x653fa1[_0x459e94(0x31f)](config['basecoin']+'/','');return _0xd51210;}async function unlockOrders(){const _0x96064a=_0x14f27a;if(allOrdersPlaced&&lockOrders==ORDERS[_0x96064a(0x249)]){logger[_0x96064a(0x174)](_0x96064a(0x26f)),lockOrders=ORDERS[_0x96064a(0x1b1)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5c8e49=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5c8e49,blockTransactionDetection=![],validateOrdersState=_0x96064a(0x189),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x96064a(0x174)](_0x96064a(0x19e));}}async function validateOrders(_0x39dcf4){const _0x3861d2=_0x14f27a;if(_0x39dcf4)validateOrdersState=_0x39dcf4;logger[_0x3861d2(0x174)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x3861d2(0x2b5)+(lockOrders==0x1?_0x3861d2(0x188):lockOrders==0x2?_0x3861d2(0x287):_0x3861d2(0x2d3)));let _0x193883=[],_0x48e4a0=config[_0x3861d2(0x2e6)]==_0x3861d2(0x2d2)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3861d2(0x251)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3861d2(0x249)])return;logger[_0x3861d2(0x174)](_0x3861d2(0x322)+validateOrdersState),lastOrders[_0x3861d2(0x1a1)](_0x45edc3=>{const _0x17cb8e=_0x3861d2;let _0x197fb4=![];_0x45edc3[_0x17cb8e(0x1bd)]>0x0&&(_0x197fb4=!![]),_0x193883[_0x17cb8e(0x2df)](_0x197fb4),_0x197fb4&&config[_0x17cb8e(0x2e6)]!=_0x17cb8e(0x2d2)&&logHistory(_0x17cb8e(0x27f),_0x17cb8e(0x1ed)+_0x45edc3[_0x17cb8e(0x1a7)]+'\x20'+_0x45edc3[_0x17cb8e(0x1dd)]+'\x20#'+formatResult(_0x45edc3[_0x17cb8e(0x1bd)],0x8)+'\x20@'+formatResult(_0x45edc3[_0x17cb8e(0x2ea)],0x8));}),_0x193883[_0x3861d2(0x1a1)]((_0x4793c7,_0xdcd8d1)=>{const _0x118dab=_0x3861d2;if(_0x4793c7)lastOrders[_0x118dab(0x1b9)](_0xdcd8d1,0x1);}),persistOpenOrders(lastOrders);const _0x2a560a=coolingDown?_0x3861d2(0x2e7):_0x3861d2(0x22f);if(validateOrdersState==_0x3861d2(0x189)){validateOrdersState=_0x3861d2(0x2fb);if(_0x193883[_0x3861d2(0x25b)](![])){if(config[_0x3861d2(0x2e6)]==_0x3861d2(0x2d2)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x193883[_0x3861d2(0x25b)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x3861d2(0x2d2)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3861d2(0x2b4))_0x193883[_0x3861d2(0x25b)](![])&&(config[_0x3861d2(0x2e6)]=='market'?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3861d2(0x1e8)](_0x48e4a0*validateOrderInterval/0xea60)+_0x3861d2(0x274)+_0x2a560a):(await cancelOrders(),logHistory(_0x3861d2(0x1a5),_0x3861d2(0x180)+Math[_0x3861d2(0x1e8)](_0x48e4a0*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x2a560a))),await unlockOrders();else{if(validateOrdersState==_0x3861d2(0x1f6)){if(config['ordertype']!='market')logHistory(_0x3861d2(0x1a5),_0x3861d2(0x307)+_0x2a560a);await unlockOrders();}}}}}async function cancelOrders(){const _0x101b37=_0x14f27a;lastOrders[_0x101b37(0x1a1)](async _0x51d9d6=>{const _0x1bec96=_0x101b37;try{const _0x2455e4=await exchange[_0x1bec96(0x17e)](_0x51d9d6[_0x1bec96(0x2e8)],_0x51d9d6[_0x1bec96(0x1a7)]);}catch(_0x31213c){if(_0x31213c[_0x1bec96(0x247)]()[_0x1bec96(0x25b)](_0x1bec96(0x21f))){}else await handleError(_0x31213c,_0x1bec96(0x2c0));}});}async function initCoinResults(_0x4732d9){const _0x2fe6fb=_0x14f27a;_0x4732d9?logger[_0x2fe6fb(0x174)](_0x2fe6fb(0x222)+_0x4732d9):logger['debug'](_0x2fe6fb(0x294)),config[_0x2fe6fb(0x2f9)]['forEach'](_0x57c14e=>{const _0x30b766=_0x2fe6fb;if(!_0x57c14e['excluded']&&_0x57c14e[_0x30b766(0x196)]!=config[_0x30b766(0x301)]){const _0x4b4642=currentCoins[_0x30b766(0x179)](_0xfc0cdd=>_0xfc0cdd[_0x30b766(0x196)]==_0x57c14e[_0x30b766(0x196)]),_0x2aa9e6=gTicker[noslash(_0x57c14e[_0x30b766(0x1a7)])];let _0x1763aa=_0x4b4642?_0x4b4642[_0x30b766(0x29c)]:null,_0x409a41=_0x57c14e[_0x30b766(0x28e)]?0x1/_0x2aa9e6:_0x2aa9e6,_0x18c16a;config['liquidity'][_0x30b766(0x1a1)](_0xb1b34a=>{const _0x3f5b1b=_0x30b766;!_0x18c16a&&(_0x18c16a=_0xb1b34a[_0x3f5b1b(0x313)][_0x3f5b1b(0x179)](_0x23abeb=>_0x23abeb['coin']==_0x57c14e['coin']),_0x18c16a&&(_0x1763aa=_0x18c16a[_0x3f5b1b(0x29c)],_0x409a41=_0x18c16a[_0x3f5b1b(0x2ea)]));});let _0x136314=dbCoinResults['get'](_0x30b766(0x2aa))['find']({'coin':_0x57c14e[_0x30b766(0x196)]})[_0x30b766(0x254)]();if(!_0x136314){const _0x7da547={'coin':_0x57c14e[_0x30b766(0x196)],'number':_0x1763aa,'breakeven':_0x409a41,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x30b766(0x2ef)](_0x30b766(0x2aa))[_0x30b766(0x2df)](_0x7da547)['write']();}else{if(_0x4732d9&&_0x57c14e[_0x30b766(0x196)]==_0x4732d9){const _0x496fb8={'coin':_0x57c14e['coin'],'number':_0x1763aa,'breakeven':_0x409a41,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x30b766(0x2ef)](_0x30b766(0x2aa))[_0x30b766(0x179)]({'coin':_0x57c14e['coin']})[_0x30b766(0x29b)](_0x496fb8)['write']();}}}});}async function updateCoinResults(_0x32189a,_0x2d2051=![]){const _0x4a68c8=_0x14f27a;let _0x17f495,_0x19e31d,_0x31973d,_0x40b799,_0x2fea96,_0x4ce820,_0xf971e0=dbCoinResults['get'](_0x4a68c8(0x2aa))['find']({'coin':_0x32189a[_0x4a68c8(0x196)]})[_0x4a68c8(0x254)](),_0x13cf46=![];_0xf971e0&&Object[_0x4a68c8(0x1cb)](_0xf971e0)['forEach'](([_0x412d4f,_0x585bde])=>{if(_0x585bde==null)_0x13cf46=!![];});(!_0xf971e0||_0x13cf46)&&(await initCoinResults(_0x32189a[_0x4a68c8(0x196)]),_0xf971e0=dbCoinResults[_0x4a68c8(0x2ef)](_0x4a68c8(0x2aa))[_0x4a68c8(0x179)]({'coin':_0x32189a[_0x4a68c8(0x196)]})[_0x4a68c8(0x254)]());_0x32189a['reverse']&&(_0x4ce820={'filled':_0x32189a['filled']*_0x32189a[_0x4a68c8(0x2ea)],'amount':_0x32189a[_0x4a68c8(0x1bd)]*_0x32189a[_0x4a68c8(0x2ea)],'side':_0x32189a['side']=='sell'?'buy':_0x4a68c8(0x201),'price':0x1/_0x32189a[_0x4a68c8(0x2ea)]},_0x32189a={..._0x32189a,..._0x4ce820});_0x2d2051?_0x19e31d=_0x32189a['side']=='buy'?_0xf971e0[_0x4a68c8(0x29c)]+_0x32189a[_0x4a68c8(0x1bd)]:_0xf971e0[_0x4a68c8(0x29c)]-_0x32189a[_0x4a68c8(0x1bd)]:_0x19e31d=await getCoinNumber(_0x32189a[_0x4a68c8(0x196)]);if(_0x32189a[_0x4a68c8(0x315)]&&_0x32189a[_0x4a68c8(0x315)]['currency']==config[_0x4a68c8(0x301)])_0x17f495=Number(_0x32189a[_0x4a68c8(0x315)]['cost']);else{if(_0x32189a[_0x4a68c8(0x315)]&&_0x32189a[_0x4a68c8(0x315)][_0x4a68c8(0x2bc)]==_0x4a68c8(0x233)&&!_0x2d2051&&config[_0x4a68c8(0x301)]!=_0x4a68c8(0x18d))_0x17f495=Number(_0x32189a[_0x4a68c8(0x315)][_0x4a68c8(0x21d)])*gTicker[_0x4a68c8(0x233)+config[_0x4a68c8(0x301)]];else _0x17f495=defaultFee*_0x32189a[_0x4a68c8(0x1bd)]*_0x32189a[_0x4a68c8(0x2ea)];}_0x32189a[_0x4a68c8(0x1dd)]==_0x4a68c8(0x2ee)?(_0x31973d=_0x19e31d!=0x0?(_0xf971e0['breakeven']*_0xf971e0[_0x4a68c8(0x29c)]+_0x32189a['price']*(_0x19e31d-_0xf971e0[_0x4a68c8(0x29c)])+_0x17f495)/_0x19e31d:0x0,_0x40b799=_0xf971e0[_0x4a68c8(0x2f3)]):(_0x31973d=_0x19e31d!=0x0?(_0xf971e0[_0x4a68c8(0x240)]*_0xf971e0[_0x4a68c8(0x29c)]-_0x32189a[_0x4a68c8(0x2ea)]*(_0xf971e0['number']-_0x19e31d)+_0x17f495)/_0x19e31d:0x0,_0x40b799=_0xf971e0[_0x4a68c8(0x2f3)]+(_0x32189a['price']-_0xf971e0[_0x4a68c8(0x240)])*_0x32189a[_0x4a68c8(0x1bd)]);_0x2fea96=(_0x32189a[_0x4a68c8(0x2ea)]-_0x31973d-_0x17f495/_0x32189a[_0x4a68c8(0x1bd)])*_0x19e31d;let _0x433e9d={'coin':_0x32189a[_0x4a68c8(0x196)],'number':_0x19e31d,'breakeven':formatResult(_0x31973d,0x8),'realized':formatResult(_0x40b799,0x8),'unrealized':formatResult(_0x2fea96,0x8),'fees':formatResult(_0xf971e0[_0x4a68c8(0x2f2)]+_0x17f495,0x8),'sells':_0x32189a['side']==_0x4a68c8(0x201)?_0xf971e0['sells']+0x1:_0xf971e0[_0x4a68c8(0x2cd)],'buys':_0x32189a['side']=='buy'?_0xf971e0[_0x4a68c8(0x2c2)]+0x1:_0xf971e0['buys']};dbCoinResults['get'](_0x4a68c8(0x2aa))['find']({'coin':_0x32189a[_0x4a68c8(0x196)]})[_0x4a68c8(0x29b)](_0x433e9d)['write']();if(!_0x2d2051){if(_0x32189a[_0x4a68c8(0x315)]&&_0x32189a[_0x4a68c8(0x315)][_0x4a68c8(0x2bc)]==_0x4a68c8(0x233)){const _0x2347b3=currentCoins[_0x4a68c8(0x179)](_0x15ecfb=>_0x15ecfb[_0x4a68c8(0x196)]==_0x4a68c8(0x233));if(_0x2347b3){let _0x359e42=dbCoinResults[_0x4a68c8(0x2ef)](_0x4a68c8(0x2aa))[_0x4a68c8(0x179)]({'coin':'BNB'})[_0x4a68c8(0x254)]();_0x433e9d={..._0x359e42,'number':_0x2347b3[_0x4a68c8(0x29c)]},dbCoinResults[_0x4a68c8(0x2ef)](_0x4a68c8(0x2aa))[_0x4a68c8(0x179)]({'coin':_0x4a68c8(0x233)})[_0x4a68c8(0x29b)](_0x433e9d)[_0x4a68c8(0x284)]();}}}}async function placeOrder(_0x3c6b5e){const _0x159e27=_0x14f27a,_0x180212=config[_0x159e27(0x2e6)]=='market'?'market':_0x159e27(0x20c);if(lockOrders==ORDERS[_0x159e27(0x1d3)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x159e27(0x249)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x159e27(0x189);let _0x505bac=![];lastOrders=[];for(const _0x257187 of _0x3c6b5e){let _0x2440f1,_0x1c8500,_0x168654,_0x5ad47e,_0xce26df,_0x2ba2a5=_0x257187[_0x159e27(0x1a7)];try{const _0x4b2690=await exchange[_0x159e27(0x1d7)](_0x2ba2a5);_0x2440f1=_0x257187['reverse']?0x1/_0x257187['last']:_0x257187['last'],_0x1c8500=_0x4b2690[_0x159e27(0x320)],_0x168654=_0x4b2690[_0x159e27(0x316)];_0x257187['reverse']?(_0x5ad47e=_0x257187[_0x159e27(0x1dd)]=='buy'?_0x159e27(0x201):_0x159e27(0x2ee),_0xce26df=Math[_0x159e27(0x213)](_0x257187[_0x159e27(0x295)])/_0x2440f1):(_0x5ad47e=_0x257187[_0x159e27(0x1dd)],_0xce26df=Math[_0x159e27(0x213)](_0x257187['trade']));_0x180212=='limit'&&(config[_0x159e27(0x2e6)]==_0x159e27(0x256)&&(_0x2440f1=_0x5ad47e==_0x159e27(0x2ee)?_0x1c8500:_0x168654),config[_0x159e27(0x2e6)]==_0x159e27(0x18b)&&(_0x2440f1=_0x5ad47e==_0x159e27(0x2ee)?_0x168654:_0x1c8500));_0xce26df=formatResult(_0xce26df,0x8),_0x2440f1=formatResult(_0x2440f1,0x8);const _0x353049=_0x5ad47e=='sell'?config['emojisell']?String[_0x159e27(0x312)]('0x'+config[_0x159e27(0x2ba)])+'\x20':'':config['emojibuy']?String[_0x159e27(0x312)]('0x'+config[_0x159e27(0x2b8)])+'\x20':'',_0x2aeacb=_0x180212==_0x159e27(0x2d2)?_0x159e27(0x333):config['ordertype']==_0x159e27(0x256)?'Limit\x20(high-margin)':_0x159e27(0x25d),_0x1d6144=(Math[_0x159e27(0x248)](Math[_0x159e27(0x33a)]()*0x35a4e900)+0x5f5e100)[_0x159e27(0x247)]();lastOrders[_0x159e27(0x2df)]({'customId':_0x1d6144,'symbol':_0x2ba2a5,'coin':_0x257187[_0x159e27(0x196)],'amount':_0xce26df,'price':_0x2440f1,'side':_0x5ad47e,'reverse':_0x257187[_0x159e27(0x28e)],'filled':0x0});if(_0x180212=='market')logHistory(_0x159e27(0x27f),''+_0x353049+_0x2aeacb+_0x159e27(0x2cf)+_0x2ba2a5+'\x20'+_0x5ad47e+'\x20#'+formatResult(_0xce26df,0x8)+'\x20@'+formatResult(_0x2440f1,0x8));else logHistory(_0x159e27(0x27f),''+_0x353049+_0x2aeacb+_0x159e27(0x2cf)+_0x2ba2a5+'\x20'+_0x5ad47e+'\x20#'+formatResult(_0xce26df,0x8)+'\x20@'+formatResult(_0x2440f1,0x8));let _0x663e94;_0x180212==_0x159e27(0x2d2)?_0x5ad47e==_0x159e27(0x2ee)&&[_0x159e27(0x2b0),_0x159e27(0x214),_0x159e27(0x330),_0x159e27(0x192),_0x159e27(0x289)][_0x159e27(0x25b)](config[_0x159e27(0x2eb)])?_0x663e94=await exchange[_0x159e27(0x234)](_0x2ba2a5,_0x180212,_0x5ad47e,_0xce26df,_0x2440f1):_0x663e94=await exchange[_0x159e27(0x234)](_0x2ba2a5,_0x180212,_0x5ad47e,_0xce26df,undefined):_0x663e94=await exchange[_0x159e27(0x234)](_0x2ba2a5,_0x180212,_0x5ad47e,_0xce26df,_0x2440f1);logger[_0x159e27(0x174)](_0x159e27(0x296)+_0x663e94['id']+'\x20|\x20Custom\x20ID:\x20'+_0x1d6144);const _0x14a1d6=lastOrders[_0x159e27(0x250)]-0x1;if(_0x14a1d6>=0x0&&lastOrders[_0x14a1d6][_0x159e27(0x244)]==_0x1d6144){lastOrders[_0x14a1d6][_0x159e27(0x2e8)]=_0x663e94['id'];if(_0x663e94['amount'])lastOrders[_0x14a1d6]['amount']=_0x663e94[_0x159e27(0x288)];if(_0x663e94[_0x159e27(0x2ea)])lastOrders[_0x14a1d6][_0x159e27(0x2ea)]=_0x663e94[_0x159e27(0x2ea)];lastOrders[_0x14a1d6]['fee']=_0x663e94[_0x159e27(0x315)];}if(config[_0x159e27(0x210)]!=0x0){let _0x5aa3e9=null;if(cooldownTracker[_0x159e27(0x250)]==config[_0x159e27(0x210)]-0x1)_0x5aa3e9=cooldownTracker[_0x159e27(0x1d2)]();const _0x913596=getTimeStamp();cooldownTracker[_0x159e27(0x2df)](_0x913596);if(_0x5aa3e9){const _0x3d4a5c=fns[_0x159e27(0x1cc)](new Date(_0x913596),new Date(_0x5aa3e9));if(_0x3d4a5c<cooldownInterval){logHistory(_0x159e27(0x1f8),_0x159e27(0x1e1)+config[_0x159e27(0x210)]+_0x159e27(0x305)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x159e27(0x2cb)),coolingDown=!![];break;}}}}catch(_0x132496){if(_0x132496[_0x159e27(0x247)]()[_0x159e27(0x25b)](_0x159e27(0x21a)))lastOrders=lastOrders['filter'](_0x5224d2=>_0x5224d2[_0x159e27(0x1a7)]!=_0x2ba2a5),logHistory(_0x159e27(0x1f8),_0x159e27(0x31d)+_0x2ba2a5),_0x505bac=!![];else{if(_0x132496['toString']()[_0x159e27(0x25b)](_0x159e27(0x1a6)))lastOrders=lastOrders['filter'](_0xdb740c=>_0xdb740c['symbol']!=_0x2ba2a5),logHistory(_0x159e27(0x1f8),'Order\x20amount\x20is\x20invalid:\x20'+_0x2ba2a5),_0x505bac=!![];else{if(_0x132496[_0x159e27(0x247)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x159e27(0x1dc)](_0xafb9ed=>_0xafb9ed['symbol']!=_0x2ba2a5),logHistory(_0x159e27(0x1f8),_0x159e27(0x2c7)+_0x2ba2a5),logger[_0x159e27(0x174)](_0x132496),_0x505bac=!![];else _0x132496[_0x159e27(0x247)]()['includes'](_0x159e27(0x2b7))?(lastOrders=lastOrders[_0x159e27(0x1dc)](_0x2b91a6=>_0x2b91a6[_0x159e27(0x1a7)]!=_0x2ba2a5),logHistory(_0x159e27(0x1f8),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2ba2a5),_0x505bac=!![]):(lastOrders=lastOrders[_0x159e27(0x1dc)](_0x212aaf=>_0x212aaf[_0x159e27(0x1a7)]!=_0x2ba2a5),await handleError(_0x132496,_0x159e27(0x337),_0x2ba2a5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x159e27(0x250)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x388058=config[_0x159e27(0x2e6)]==_0x159e27(0x2d2)?validateOrderTimeout*0x3c*0x3e8:config[_0x159e27(0x251)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x388058);}else unlockOrders();_0x505bac&&config[_0x159e27(0x1b5)]&&(logHistory(_0x159e27(0x1f8),_0x159e27(0x252)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x159e27(0x1a5),_0x159e27(0x17c)));}else{if(coolingDown)!config[_0x159e27(0x1b5)]&&logHistory(_0x159e27(0x1f8),_0x159e27(0x20b));else lockOrders!=ORDERS[_0x159e27(0x1d3)]&&(!config['headless']&&(config[_0x159e27(0x2e6)]==_0x159e27(0x2d2)?logHistory(_0x159e27(0x1f8),_0x159e27(0x1af)):logHistory(_0x159e27(0x1f8),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x4024df){const _0x42783a=_0x14f27a,_0x1ea8ff={...config,'openOrders':_0x4024df};let _0x281b9c=dbConfig['get'](_0x42783a(0x279))[_0x42783a(0x179)]({'botID':botID})[_0x42783a(0x254)]();_0x281b9c&&dbConfig[_0x42783a(0x2ef)](_0x42783a(0x279))[_0x42783a(0x179)]({'botID':botID})[_0x42783a(0x29b)](_0x1ea8ff)[_0x42783a(0x284)]();}function restoreOrders(){const _0x146cc1=_0x14f27a;let _0x45e93f;config[_0x146cc1(0x334)]&&allOpenOrders['forEach'](_0x4bf007=>{const _0x548eb3=_0x146cc1,_0x1896d0=config['openOrders'][_0x548eb3(0x179)](_0x2e9589=>_0x2e9589[_0x548eb3(0x2e8)]==_0x4bf007['id']);_0x1896d0&&(lastOrders[_0x548eb3(0x2df)](_0x1896d0),_0x45e93f=_0x4bf007[_0x548eb3(0x181)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x146cc1(0x2fb),allOrdersPlaced=!![];const _0x32860f=new Date()[_0x146cc1(0x186)](),_0x2f0c02=config[_0x146cc1(0x2e6)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x146cc1(0x251)]*0x3c*0x3e8;if(_0x45e93f+_0x2f0c02>_0x32860f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xd306c0=_0x146cc1;validateOrders(_0xd306c0(0x2b4));},_0x45e93f+_0x2f0c02-_0x32860f);}else validateOrders(_0x146cc1(0x2b4));}}async function sendMetricsTelegram(){const _0x2150f2=_0x14f27a;if(!coinsLoaded){process[_0x2150f2(0x204)]({'telegrammsg':_0x2150f2(0x2c9)},_0x846168=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x23e4e4='';if(config[_0x2150f2(0x30f)])_0x23e4e4=_0x2150f2(0x26c)+config[_0x2150f2(0x1cd)]+_0x2150f2(0x2c1);else _0x23e4e4=_0x2150f2(0x1be)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x35b3cc=getKPIs(_0x2150f2(0x301)),_0x60eaf3=getKPIs(_0x2150f2(0x25a),config[_0x2150f2(0x25a)]),_0x238bbf=getKPIs('net-basecoin'),_0x3f030d=getKPIs('net-fiat',config[_0x2150f2(0x25a)]);_0x23e4e4+=_0x2150f2(0x1fd),_0x23e4e4+=_0x35b3cc[_0x2150f2(0x191)]+_0x2150f2(0x1d6)+_0x35b3cc[_0x2150f2(0x254)]+'\x0a',_0x23e4e4+=_0x35b3cc[_0x2150f2(0x266)]+':\x20'+_0x35b3cc[_0x2150f2(0x314)]+'%\x0a',_0x23e4e4+=_0x60eaf3[_0x2150f2(0x191)]+_0x2150f2(0x1d6)+_0x60eaf3[_0x2150f2(0x254)]+'\x0a',_0x23e4e4+=_0x60eaf3[_0x2150f2(0x266)]+':\x20'+_0x60eaf3[_0x2150f2(0x314)]+'%\x0a',_0x23e4e4+=_0x238bbf[_0x2150f2(0x191)]+':\x20'+_0x238bbf[_0x2150f2(0x254)]+'\x20('+config[_0x2150f2(0x301)]+')\x0a',_0x23e4e4+=_0x238bbf[_0x2150f2(0x266)]+':\x20'+_0x238bbf[_0x2150f2(0x314)]+_0x2150f2(0x2fa)+config[_0x2150f2(0x301)]+')\x0a',_0x23e4e4+=_0x3f030d['leftTxt']+':\x20'+_0x3f030d['value']+'\x20('+config[_0x2150f2(0x25a)]+')\x0a',_0x23e4e4+=_0x3f030d[_0x2150f2(0x266)]+':\x20'+_0x3f030d[_0x2150f2(0x314)]+'%\x20('+config[_0x2150f2(0x25a)]+')\x0a',_0x23e4e4+=_0x2150f2(0x1ea),process[_0x2150f2(0x204)]({'telegrammsg':_0x23e4e4},_0x484433=>{});}async function sendPortfolioTelegram(){const _0x1bbf1c=_0x14f27a;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x1bbf1c(0x204)]({'telegrammsg':_0x1bbf1c(0x2c9)},_0x5081c3=>{});return;}let _0x43f682='';if(config[_0x1bbf1c(0x30f)])_0x43f682=_0x1bbf1c(0x26c)+config[_0x1bbf1c(0x1cd)]+_0x1bbf1c(0x2ab);else _0x43f682=_0x1bbf1c(0x1be)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x43f682+='<pre>',_0x43f682+='-------------------------------\x0a',_0x43f682+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x43f682+='-------------------------------\x0a',currentCoins[_0x1bbf1c(0x1a1)](_0x22634a=>{const _0x2de5cc=_0x1bbf1c;_0x43f682+=_0x22634a[_0x2de5cc(0x196)][_0x2de5cc(0x2da)](0x7)+'|\x20'+formatPad(_0x22634a['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x22634a[_0x2de5cc(0x265)],0x2,0x6)+'|\x20'+formatPad(_0x22634a[_0x2de5cc(0x2dc)]*0x64,0x2,0x6)+'\x0a';}),_0x43f682+=_0x1bbf1c(0x1ea),process['send']({'telegrammsg':_0x43f682},_0xacf5f=>{});}function formatPad(_0x30778f,_0x266171,_0x2f8126){const _0x504cb3=_0x14f27a,_0x3571d1=formatResultString(_0x30778f,_0x266171);return _0x3571d1?_0x3571d1[_0x504cb3(0x21b)](_0x2f8126):''['padStart'](_0x2f8126);}function logHistory(_0x1c88ae,_0x3019a4,_0x4971a7=''){const _0x20a8e6=_0x14f27a;logger[_0x20a8e6(0x175)](''+_0x3019a4);let _0x1fbc8b={'time':getTimeStamp(),'type':_0x1c88ae,'event':_0x3019a4};dbLogs[_0x20a8e6(0x2ef)](_0x20a8e6(0x268))[_0x20a8e6(0x2df)](_0x1fbc8b)['write']();if(_0x4971a7=='')_0x4971a7=_0x3019a4;proxyEmit(_0x20a8e6(0x209),{'log':_0x1fbc8b,'summary':_0x4971a7}),process[_0x20a8e6(0x204)]({'telegram':{..._0x1fbc8b,'botname':config['botname'],'showname':config[_0x20a8e6(0x30f)]}},_0x33dc27=>{});}function emitHistory(_0x1a5f34={}){const _0x3d4413=_0x14f27a;Object['keys'](_0x1a5f34)[_0x3d4413(0x250)]==0x0&&(_0x1a5f34={'type':['order',_0x3d4413(0x209)],'event':'','page':0x1});if(_0x1a5f34['type'][_0x3d4413(0x25b)](_0x3d4413(0x209)))_0x1a5f34[_0x3d4413(0x23f)]['splice'](_0x1a5f34[_0x3d4413(0x23f)][_0x3d4413(0x1d0)](_0x3d4413(0x209)),0x1,_0x3d4413(0x1f8),_0x3d4413(0x219),_0x3d4413(0x1a5));if(dbLogs[_0x3d4413(0x243)](_0x3d4413(0x268))[_0x3d4413(0x254)]()){let _0x1c1d9b=dbLogs[_0x3d4413(0x2ef)](_0x3d4413(0x268))[_0x3d4413(0x1dc)](_0x2dc5e5=>{const _0x2ffc44=_0x3d4413;if(_0x1a5f34[_0x2ffc44(0x23f)][_0x2ffc44(0x250)]==0x0)return![];else return _0x1a5f34['type']['includes'](_0x2dc5e5['type']);})[_0x3d4413(0x1dc)](_0x65cb6a=>{const _0xd8b33b=_0x3d4413;if(_0x1a5f34[_0xd8b33b(0x209)]=='')return!![];else return _0x65cb6a[_0xd8b33b(0x209)][_0xd8b33b(0x2d1)]()['includes'](_0x1a5f34[_0xd8b33b(0x209)][_0xd8b33b(0x2d1)]());})[_0x3d4413(0x25c)](_0x3d4413(0x1c3)),_0x51def7=_0x1c1d9b[_0x3d4413(0x254)]()['length'];_0x1c1d9b=_0x1c1d9b[_0x3d4413(0x28e)]()['slice']((_0x1a5f34[_0x3d4413(0x1ef)]-0x1)*logPageSize,_0x1a5f34[_0x3d4413(0x1ef)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit('event-history',{'logs':_0x1c1d9b,'total':_0x51def7});}else proxyEmit(_0x3d4413(0x327),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x20660b){const _0x2e501d=_0x14f27a;if(dbLogs[_0x2e501d(0x243)](_0x2e501d(0x268))[_0x2e501d(0x254)]()){const _0x266917=dbLogs[_0x2e501d(0x2ef)](_0x2e501d(0x268))[_0x2e501d(0x25c)](_0x2e501d(0x1c3))[_0x2e501d(0x1dc)](_0x4b0f3b=>{const _0x3367aa=_0x2e501d;return _0x4b0f3b[_0x3367aa(0x23f)]==_0x3367aa(0x27f);})['value']();dbLogs[_0x2e501d(0x2ef)](_0x2e501d(0x268))[_0x2e501d(0x215)]()['write'](),dbLogs[_0x2e501d(0x2ef)](_0x2e501d(0x268))[_0x2e501d(0x29b)](_0x266917)[_0x2e501d(0x284)](),emitHistory(_0x20660b);}}async function pauseBot(_0x297f78=pauseBotIntervalShort,_0x1ffb4d){const _0x4f5796=_0x14f27a,_0x4c4228=new Date()['getTime']();if(!lastErrorShown||_0x4c4228-lastErrorShown>=_0x297f78){lastErrorShown=_0x4c4228;!lastBotPause?(lastBotPause=_0x4c4228,consecutivePauses=0x1):(_0x4c4228-lastBotPause-_0x297f78<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x4f5796(0x1f8),_0x1ffb4d+pauseBotMsg),_0x297f78=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x4c4228);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x297f78),botPaused=![],reset(!![]);}}}async function killBot(){const _0x229306=_0x14f27a;botPaused=!![],await sleep(0x3e8),process[_0x229306(0x204)]({'stop':_0x229306(0x2f0)},_0x15e1f3=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5dfe44,_0x3d7b32){const _0x2fae6f=_0x14f27a;if(botPaused)return;const _0x4b9427=config[_0x2fae6f(0x2eb)]||'Exchange';if(_0x3d7b32)logger[_0x2fae6f(0x174)](_0x2fae6f(0x33d)+_0x3d7b32);const _0x484552=()=>{const _0x5ade5b=_0x2fae6f;loading[_0x5ade5b(0x1f8)]=!![],emitLoadingProgress();};if(_0x5dfe44['toString']()[_0x2fae6f(0x25b)]('API-key\x20format\x20invalid'))logHistory(_0x2fae6f(0x1f8),_0x4b9427+_0x2fae6f(0x319)),_0x484552();else{if(_0x5dfe44[_0x2fae6f(0x247)]()[_0x2fae6f(0x25b)](_0x2fae6f(0x31e)))logHistory(_0x2fae6f(0x1f8),_0x4b9427+_0x2fae6f(0x1aa)),_0x484552();else _0x5dfe44['toString']()[_0x2fae6f(0x25b)]('AuthenticationError')?(logHistory(_0x2fae6f(0x1f8),_0x4b9427+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x2fae6f(0x1f8),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x484552()):await handleError(_0x5dfe44,null);}}async function handleError(_0x3db419,_0x230a70,_0x102d00=''){const _0x400790=_0x14f27a;if(botPaused)return;let _0x3d05d0;const _0xfdeb56=config[_0x400790(0x2eb)]||_0x400790(0x1fa);if(_0x230a70)logger['debug'](_0x400790(0x33d)+_0x230a70);if(_0x3db419['toString']()[_0x400790(0x25b)](_0x400790(0x272)))_0x3d05d0=_0xfdeb56+_0x400790(0x26d),logger[_0x400790(0x174)](_0x3d05d0+_0x400790(0x16e),_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419['toString']()[_0x400790(0x25b)](_0x400790(0x28a)))_0x3d05d0=_0xfdeb56+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger['debug'](_0x3d05d0+'\x20>\x20details:',_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419['toString']()[_0x400790(0x25b)]('ExchangeNotAvailable')||_0x3db419[_0x400790(0x247)]()[_0x400790(0x25b)]('OnMaintenance'))_0x3d05d0=_0xfdeb56+_0x400790(0x177),logger['debug'](_0x3d05d0+_0x400790(0x16e),_0x3db419['toString']()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419['toString']()[_0x400790(0x25b)](_0x400790(0x2f4)))_0x3d05d0=_0xfdeb56+_0x400790(0x30d),logger['debug'](_0x3d05d0+_0x400790(0x16e),_0x3db419['toString']()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419[_0x400790(0x247)]()['includes'](_0x400790(0x218)))_0x3d05d0=_0xfdeb56+_0x400790(0x2ca),logger[_0x400790(0x174)](_0x3d05d0+'\x20>\x20details:',_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419[_0x400790(0x247)]()[_0x400790(0x2d1)]()[_0x400790(0x25b)]('timestamp')||_0x3db419[_0x400790(0x247)]()[_0x400790(0x2d1)]()[_0x400790(0x25b)](_0x400790(0x211)))_0x3d05d0=_0x400790(0x1eb),logger['debug'](_0x3d05d0+'\x20>\x20details:',_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419['toString']()['includes'](_0x400790(0x1a8)))_0x3d05d0=_0xfdeb56+_0x400790(0x28c),logger['debug'](_0x3d05d0+_0x400790(0x16e),_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419 instanceof ccxt[_0x400790(0x32e)])_0x3d05d0=_0xfdeb56+'\x20network\x20error',logger[_0x400790(0x174)](_0x3d05d0+_0x400790(0x16e),_0x3db419[_0x400790(0x247)]()),await pauseBot(undefined,_0x3d05d0);else{if(_0x3db419['toString']()[_0x400790(0x25b)](_0x400790(0x19a)))logHistory(_0x400790(0x1f8),_0xfdeb56+_0x400790(0x23c)),logHistory(_0x400790(0x1f8),_0x400790(0x1b6)),await killBot();else{if(_0x3db419[_0x400790(0x247)]()[_0x400790(0x25b)](_0x400790(0x31e)))logHistory('error',_0xfdeb56+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x400790(0x1f8),_0x400790(0x1b6)),await killBot();else{if(_0x3db419[_0x400790(0x247)]()[_0x400790(0x25b)](_0x400790(0x310)))logHistory(_0x400790(0x1f8),_0xfdeb56+_0x400790(0x19b)),logHistory(_0x400790(0x1f8),_0x400790(0x1b6)),await killBot();else{if(_0x3db419[_0x400790(0x247)]()[_0x400790(0x25b)](_0x400790(0x31b)))logHistory(_0x400790(0x1f8),_0xfdeb56+_0x400790(0x221)),logHistory(_0x400790(0x1f8),_0x400790(0x1b6)),await killBot();else{if(_0x3db419[_0x400790(0x247)]()['includes'](_0x400790(0x239)))logHistory(_0x400790(0x1f8),_0x400790(0x1c6)+_0x102d00);else{if(_0x3db419 instanceof ccxt[_0x400790(0x216)]){logHistory(_0x400790(0x1f8),_0xfdeb56+_0x400790(0x2a8)),logger[_0x400790(0x174)]('Error\x20details:',_0x3db419);if(_0x102d00)logger[_0x400790(0x174)](_0x400790(0x31c)+_0x102d00);}else{_0x3d05d0=_0x400790(0x23d),logger[_0x400790(0x174)](_0x3d05d0+_0x400790(0x16e),_0x3db419);if(_0x102d00)logger[_0x400790(0x174)](_0x400790(0x31c)+_0x102d00);await pauseBot(undefined,_0x3d05d0);}}}}}}}}}}}}}}}async function withRetry(_0x3d3b9e,_0x444a4c){const _0x52ffc4=_0x14f27a;let _0x3db756=![],_0xbc551f=0x0,_0x3baaad,_0x2f7002;while(_0xbc551f<maxRetries){try{_0x3baaad=await _0x444a4c();break;}catch(_0x92b5c2){_0x2f7002=_0x92b5c2,!_0x3db756?(_0x3db756=!![],logger[_0x52ffc4(0x174)](_0x52ffc4(0x286)+_0x3d3b9e+':',_0x92b5c2[_0x52ffc4(0x247)]())):await sleep(retryInterval);}_0xbc551f++;}if(_0xbc551f==0x0)return _0x3baaad;if(_0xbc551f>=maxRetries)throw _0x2f7002;else return logger[_0x52ffc4(0x174)](_0x52ffc4(0x2f7)+_0xbc551f+_0x52ffc4(0x2a9)),_0x3baaad;}function formatResult(_0x387056,_0x5534e5){const _0x103e28=_0x14f27a;return parseFloat(_0x387056[_0x103e28(0x23e)](_0x5534e5));}function formatResultTruncate(_0x56437d,_0x5915db){const _0x258475=_0x14f27a;let _0x2adcd2=formatResultString(_0x56437d,0xa),_0x4bb7eb=_0x2adcd2['indexOf']('.');return _0x4bb7eb!=-0x1&&(_0x2adcd2=_0x2adcd2[_0x258475(0x253)](0x0,_0x4bb7eb+_0x5915db+0x1)),Number(_0x2adcd2);}function formatResultString(_0x52056d,_0x8cc78e){const _0x2abba9=_0x14f27a;let _0x4f756a;if(!(''+_0x52056d)[_0x2abba9(0x25b)]('e'))_0x4f756a=+(Math[_0x2abba9(0x1e8)](_0x52056d+'e+'+_0x8cc78e)+'e-'+_0x8cc78e);else{let _0x457781=(''+_0x52056d)[_0x2abba9(0x298)]('e'),_0x415387='';+_0x457781[0x1]+_0x8cc78e>0x0&&(_0x415387='+'),_0x4f756a=+(Math['round'](+_0x457781[0x0]+'e'+_0x415387+(+_0x457781[0x1]+_0x8cc78e))+'e-'+_0x8cc78e);}return Number(_0x4f756a)[_0x2abba9(0x23e)](_0x8cc78e);}function getServerTime(){const _0xb68479=_0x14f27a,_0x1257f2=new Date();return _0x1257f2['getFullYear']()+'/'+(_0x1257f2['getMonth']()+0x1)['toString']()[_0xb68479(0x21b)](0x2,'0')+'/'+_0x1257f2['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x1257f2[_0xb68479(0x227)]()[_0xb68479(0x247)]()[_0xb68479(0x21b)](0x2,'0')+':'+_0x1257f2['getMinutes']()[_0xb68479(0x247)]()[_0xb68479(0x21b)](0x2,'0')+':'+_0x1257f2[_0xb68479(0x1c4)]()['toString']()[_0xb68479(0x21b)](0x2,'0');}function getTimeStamp(){const _0x39e264=_0x14f27a,_0x22aea3=shiftedTime();return _0x22aea3[_0x39e264(0x302)]()+'/'+(_0x22aea3[_0x39e264(0x332)]()+0x1)[_0x39e264(0x247)]()['padStart'](0x2,'0')+'/'+_0x22aea3[_0x39e264(0x25f)]()[_0x39e264(0x247)]()[_0x39e264(0x21b)](0x2,'0')+'\x20'+_0x22aea3[_0x39e264(0x227)]()[_0x39e264(0x247)]()[_0x39e264(0x21b)](0x2,'0')+':'+_0x22aea3[_0x39e264(0x205)]()['toString']()[_0x39e264(0x21b)](0x2,'0')+':'+_0x22aea3[_0x39e264(0x1c4)]()[_0x39e264(0x247)]()[_0x39e264(0x21b)](0x2,'0');}function getDate(){const _0x46f6c0=_0x14f27a,_0x1dcb28=shiftedTime();return _0x1dcb28[_0x46f6c0(0x302)]()+'/'+(_0x1dcb28[_0x46f6c0(0x332)]()+0x1)[_0x46f6c0(0x247)]()[_0x46f6c0(0x21b)](0x2,'0')+'/'+_0x1dcb28[_0x46f6c0(0x25f)]()[_0x46f6c0(0x247)]()[_0x46f6c0(0x21b)](0x2,'0');}function getHour(){const _0x2e3b6f=_0x14f27a,_0x4d5766=shiftedTime();return _0x4d5766[_0x2e3b6f(0x227)]()[_0x2e3b6f(0x247)]()[_0x2e3b6f(0x21b)](0x2,'0');}function sleep(_0x6481a9){return new Promise(_0x515115=>setTimeout(_0x515115,_0x6481a9));}function shiftedTime(){const _0x49fe82=_0x14f27a,_0x3eb884=new Date();let _0x159087=_0x3eb884;if(config&&config[_0x49fe82(0x2f8)]!==0x0)_0x159087=fns[_0x49fe82(0x1db)](_0x3eb884,{'hours':config[_0x49fe82(0x2f8)]});return _0x159087;}function timer(_0x444bf4){const _0x1bd2b2=_0x14f27a,_0x420f6c=new Date();!lasttime?console[_0x1bd2b2(0x32b)](getTimeStamp()+_0x1bd2b2(0x277),_0x444bf4,_0x420f6c):console[_0x1bd2b2(0x32b)](getTimeStamp()+_0x1bd2b2(0x277),_0x444bf4,(_0x420f6c-lasttime)/0x3e8),lasttime=_0x420f6c;}