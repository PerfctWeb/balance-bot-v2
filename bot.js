const _0x12375b=_0x2cd2;(function(_0x298f13,_0x45b64b){const _0x339f6a=_0x2cd2,_0x5713ff=_0x298f13();while(!![]){try{const _0x4e3c9d=-parseInt(_0x339f6a(0x212))/0x1+-parseInt(_0x339f6a(0x9f))/0x2+-parseInt(_0x339f6a(0xbc))/0x3+-parseInt(_0x339f6a(0xb3))/0x4*(-parseInt(_0x339f6a(0x154))/0x5)+parseInt(_0x339f6a(0x20f))/0x6*(-parseInt(_0x339f6a(0x1a9))/0x7)+parseInt(_0x339f6a(0xab))/0x8+-parseInt(_0x339f6a(0x163))/0x9*(-parseInt(_0x339f6a(0x1b5))/0xa);if(_0x4e3c9d===_0x45b64b)break;else _0x5713ff['push'](_0x5713ff['shift']());}catch(_0x3392b8){_0x5713ff['push'](_0x5713ff['shift']());}}}(_0x4a3c,0xac4a9));const _0x1f3e5d=function(){let _0x4f69a9=!![];return function(_0x4265c5,_0x3362cf){const _0x221534=_0x4f69a9?function(){const _0x43b7fd=_0x2cd2;if(_0x3362cf){const _0x3344b5=_0x3362cf[_0x43b7fd(0xfb)](_0x4265c5,arguments);return _0x3362cf=null,_0x3344b5;}}:function(){};return _0x4f69a9=![],_0x221534;};}(),_0x4108c3=_0x1f3e5d(this,function(){const _0x5312ed=_0x2cd2;return _0x4108c3[_0x5312ed(0x1c4)]()[_0x5312ed(0x1fd)](_0x5312ed(0xf4))['toString']()[_0x5312ed(0x1de)](_0x4108c3)[_0x5312ed(0x1fd)](_0x5312ed(0xf4));});_0x4108c3();'use strict';const ccxt=require('ccxt'),low=require(_0x12375b(0xb5)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x12375b(0x184)),Crypt=require(_0x12375b(0x1a4))[_0x12375b(0x1ba)],util=require(_0x12375b(0x1b1)),argv=require(_0x12375b(0xd6))(process[_0x12375b(0x8c)][_0x12375b(0x12c)](0x2))[_0x12375b(0x8c)],path=require('path');let exchange;global[_0x12375b(0x1b2)]={},global[_0x12375b(0x14d)]={};const usdBasecoins=['USD',_0x12375b(0xa8),'TUSD',_0x12375b(0x1ab),_0x12375b(0x13b),_0x12375b(0x15e)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x12375b(0x156)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x12375b(0x118)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x12375b(0x174)+pauseBotInterval/0xea60+_0x12375b(0x166),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x12375b(0x1f6))[_0x12375b(0xd9)],botID=process['argv'][0x2]||_0x12375b(0xd5),pattern=/^[0-9]{3}$/;!pattern[_0x12375b(0xaf)](botID)&&(console[_0x12375b(0x145)]('Error:\x20Invalid\x20argument\x20'+botID+_0x12375b(0xaa)),killBot());function _0x4a3c(){const _0x3d5246=['min','open','liquidity','red_yellow_blue','exec','RateLimitExceeded','secure','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','orderId','Huobi','target',':\x20Bot\x20','EUR','delta','storeFiat','(((.+)+)+)+$','</pre>','side','\x20change','./config/','Market','cost','apply','/output-000.log','timeshift','remainingSymbols','changes','<pre>','orderstatus','concat','Portfolio\x20change\x20detected:\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','1\x20-\x20Validate\x20orders:\x20','trade','coins','-results.json','splice','assign','Saving\x20configuration','starting-balance-','leftTxt','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','\x20exchange\x20error','mkdirSync','Net\x20effect','createOrder','find','headless','MIN_NOTIONAL','ongoing','must\x20be\x20greater\x20than\x20minimum\x20amount','UNLOCKED','ExchangeError','toggleBotMode','existsSync','has','startprice','join','padStart','cancelOrders()','args','eur','2\x20-\x20handling\x20FILLED\x20order:\x20','realized','\x20metrics:</b>\x20\x0a\x0a','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','createWriteStream','botname','yyyy/MM/dd','Unfilled\x20order(s)\x20canceled\x20after\x20','-performance.json','slice','rightTxt','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','progress','Loading\x20completed','usd','getMonth','startdate','round','Cex','ORDERS.LOCKED','1\x20-\x20Handle\x20open\x20orders','last','openOrders','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','USDC','deleteHistoryAlerts','\x20blocked\x20your\x20API\x20-\x20pausing\x20bot\x20for\x2060\x20minutes','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','<b>Bot\x20','restart','sendPortfolioTelegram','fromCodePoint','set','basecoinvalue','log','Order\x20amount\x20is\x20invalid:\x20','market','timeout','loadSymbols()','recent20','showname','net-basecoin','change','Cooldown\x20ended\x20-\x20balancing\x20resumed','No\x20more\x20open\x20orders\x20-\x20','\x20portfolio:</b>\x20\x0a\x0a','API-key\x20format\x20invalid','format','BNB/','30ZMqahm','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','freeze','\x20exchange','2.5.0','removed','defaults','\x20:\x20','buy','customId','USDP','differenceInSeconds','distribution','message','Uncaught\x20Exception:','180GkoPWj','writeFile','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20minutes','data','Invalid\x20quantity','\x20not\x20available','debug','************','fiat','Transaction\x20detection\x20unblocked',':\x20timer\x20>','fee','Fee\x20discount\x20refund\x20detected:\x20','substring','Huobipro','total','\x20-\x20pausing\x20bot\x20for\x20','fetchOpenOrders','spot','unlinkSync','/USD','limit-high','warning','cloneDeep','send','initial','toFixed','exchanges','offset','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','toLowerCase','autoliquidity','date-fns','percentage','map','\x20order:\x20','datetime','net-fiat','initclient','BNB','change24h','success','balancing\x20resumes\x20when\x20cooldown\x20ends','emitHistory','\x20API\x20secret\x20is\x20invalid','apiPassword','excluded','uncaughtException','value','get','shift','stopExchange()','buys','time','padEnd','cancel','error','string','getDate','BTC','Reset\x20|\x20','getOpenOrders()','fetchTickers','2\x20-\x20Orders\x20unlocked','hybrid-crypto-js','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','./logs/','currency','-config.json','42uKFGEQ','loading-canceled','USDT','limit','event','Order\x20filled:\x20','final','includes','util','ticker','Exchange','page','1886750aHnHRn','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','configuration-stored','\x20|\x20highest\x20fee:\x20','privateKey','Crypt','filter','cancelLoading','pro','\x20/\x20','AuthenticationError','getCoins()','fetchClosedOrders','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','decrypt','toString','<b>','limits','findIndex','exchange\x20reloaded','Error\x20while\x20deleting\x20files:\x20','***','kill','bb-settings.json','Cryptocom','exchange','reverse','getTime','Executed\x20','placeOrder()','average','OrderNotFound','1\x20-\x20FILLED\x20known\x20order:\x20','ordertype','getAllOrders()','Waited\x20','\x20|\x20lock\x20orders:\x20','enabled','Resetting\x20bot\x20history','filled','entries','constructor','Transaction\x20detection\x20blocked','getMinutes','ask','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','split','bot','1\x20-\x20FILLED\x20unknown\x20order:\x20','symbol','emojisell','2.3.5','getPortfolio(1)','event-history','startnumber','highest','Error\x20details:','cancelOrder','timestamp','type','function','initTickers()','apiKey','performance','yyyy-MM-dd\x27T\x27HH:mm:ss','./version.json','amountToPrecision','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','placeOrder','logs','cooldown','onepagemode','search','\x20closed\x20the\x20connection','\x20>\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20network\x20error','sendMetricsTelegram','max','apiSecret','price','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','\x20hour','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','number','push','balancing\x20resumed','exchange\x20not\x20reloaded','\x20|\x20','milliseconds','741318dIVvrO','1\x20-\x20Unlock\x20orders','colorscheme','850639xaUKZe','Headless:\x20','balances','loadMarkets','closed','Unknown\x20error\x20occured','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Pausing\x20for\x20','sell','added','argv','canceled','/backup/','emojibuy','toUpperCase','/EUR','watchTrades','sortBy','%\x20(','full','netoffset','2.6.0','Binance','amount','threshold','USD','bot-','parse','botID','2776344DPLlvE','Order\x20is\x20invalid:\x20','fetchTicker','keys','Limit\x20(low-margin)','0\x20-\x20EXECUTION:\x20','fees','watchOrders()','storeConfiguration','BUSD','\x20not\x20responding',',\x20must\x20be\x20a\x203\x20digit\x20number','1856112ooJKGL','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','replace','configuration','test','\x20orders\x20in\x20less\x20than\x20','portfolio','getHours','480988TcBbsY','isEqual','lowdb','write','LOCKED','remove','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','order','ETH','3123486DfGVip','getFullYear','valid','sort','coin','bots','bid','limit-low','status','recreateCoinResults()','breakeven','parseISO','none','.json','Exception\x20thrown\x20in\x20','RSA-OAEP','length','InvalidOrder','basecoin','NetworkError','stringify','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Executing\x20exchange\x20reload','watchOrders','date','001','yargs/yargs','abs','close','version','getSeconds','fetchBalance','storeHeadless','running','indexOf','-events.json','forEach','Order(s)\x20not\x20validated\x20after\x20','\x20minutes\x20-\x20','\x20-\x20bot\x20not\x20started','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'];_0x4a3c=function(){return _0x3d5246;};return _0x4a3c();}const userID=process[_0x12375b(0x8c)][0x3]||'',configpath=userID?_0x12375b(0xf8)+userID+'/':_0x12375b(0xf8),logspath=userID?'./logs/'+userID+'/':_0x12375b(0x1a6),loggerfile=fs[_0x12375b(0x127)](logspath+_0x12375b(0xfc),{'flags':'a'});!fs[_0x12375b(0x11b)](configpath)&&fs[_0x12375b(0x110)](configpath);!fs[_0x12375b(0x11b)](logspath)&&fs[_0x12375b(0x110)](logspath);const configfile=configpath+'bot-'+botID+_0x12375b(0x1a8),logfile=configpath+_0x12375b(0x9c)+botID+'-events.json',performancefile=configpath+_0x12375b(0x9c)+botID+'-performance.json',coinresultsfile=configpath+_0x12375b(0x9c)+botID+_0x12375b(0x108),settingsfile=configpath+_0x12375b(0x1cc),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x12375b(0x8e),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x12375b(0xb6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x12375b(0xb6)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x12375b(0x15a)]({'bot':[],'version':serverversion})[_0x12375b(0xb6)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x12375b(0x15a)]({'coins':[],'version':serverversion})[_0x12375b(0xb6)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x12375b(0xcb)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3bde8b=>{const _0x573bfb=_0x12375b;console[_0x573bfb(0x145)](_0x3bde8b);},'simple':_0x5ce329=>{const _0x171ac5=_0x12375b;console[_0x171ac5(0x145)](_0x5ce329),loggerfile[_0x171ac5(0xb6)](util[_0x171ac5(0x152)](_0x5ce329)+'\x0a');},'full':async(_0x2e4a22,_0x3105e3='')=>{const _0x56ae87=_0x12375b;let _0x34bbf3;if(config[_0x56ae87(0x14b)])_0x34bbf3=getTimeStamp()+':\x20'+config['botname']+_0x56ae87(0x1ff)+_0x2e4a22;else _0x34bbf3=getTimeStamp()+_0x56ae87(0xf0)+botID+_0x56ae87(0x1ff)+_0x2e4a22;console[_0x56ae87(0x145)](_0x34bbf3),loggerfile['write'](util['format'](_0x34bbf3)+'\x0a'),_0x3105e3&&(console[_0x56ae87(0x145)](_0x3105e3),loggerfile[_0x56ae87(0xb6)](util[_0x56ae87(0x152)](_0x3105e3)+'\x0a'));},'debug':async(_0x2e0bb2,_0x107468='')=>{const _0x2b136c=_0x12375b;let _0x542f05;if(config[_0x2b136c(0x14b)])_0x542f05=getTimeStamp()+':\x20'+config[_0x2b136c(0x128)]+'\x20>\x20[DEBUG]\x20'+_0x2e0bb2;else _0x542f05=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x2e0bb2;if(debugging)console[_0x2b136c(0x145)](_0x542f05);loggerfile[_0x2b136c(0xb6)](util[_0x2b136c(0x152)](_0x542f05)+'\x0a');if(_0x107468){if(debugging)console[_0x2b136c(0x145)](_0x107468);loggerfile[_0x2b136c(0xb6)](util[_0x2b136c(0x152)](_0x107468)+'\x0a');}}};process['on'](_0x12375b(0x193),function(_0x582d0b){const _0x55324a=_0x12375b;logHistory(_0x55324a(0x19c),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x55324a(0x16a)](_0x55324a(0x162),_0x582d0b);});settings['timeshift']!=config[_0x12375b(0xfd)]&&updateTimeshift(settings[_0x12375b(0xfd)]);settings[_0x12375b(0x1fc)]!=config[_0x12375b(0x1fc)]&&updateOnepagemode(settings['onepagemode']);process[_0x12375b(0x17c)]({'started':_0x12375b(0xdd)},_0x448a66=>{}),initializeProcessListeners();function proxyEmit(_0x947f07,_0x307296=null){process['send']({'function':_0x947f07,'args':_0x307296},_0x37b14d=>{});}function initializeProcessListeners(){const _0x4cf2d5=_0x12375b;process['on'](_0x4cf2d5(0x161),_0x3add60=>{const _0x394212=_0x4cf2d5;switch(Object[_0x394212(0xa2)](_0x3add60)[0x0]){case'timeshift':_0x3add60[_0x394212(0xfd)]!=undefined&&(settings[_0x394212(0xfd)]=_0x3add60[_0x394212(0xfd)],updateTimeshift(settings[_0x394212(0xfd)]));break;case _0x394212(0x1fc):_0x3add60[_0x394212(0x1fc)]!=undefined&&(settings['onepagemode']=_0x3add60[_0x394212(0x1fc)],updateOnepagemode(settings[_0x394212(0x1fc)]));break;case'bots':_0x3add60[_0x394212(0xc1)]!=undefined&&(bots=JSON['parse'](_0x3add60['bots']),proxyEmit(_0x394212(0xc1),bots));break;case _0x394212(0x1f1):switch(_0x3add60['function']){case _0x394212(0x18a):initclient();break;case _0x394212(0x11a):toggleBotMode();break;case _0x394212(0x18f):emitHistory(_0x3add60[_0x394212(0x121)]);break;case _0x394212(0x13c):deleteHistoryAlerts(_0x3add60[_0x394212(0x121)]);break;case'getPortfolio':getPortfolio(_0x3add60['args']);break;case _0x394212(0xa7):storeConfiguration(_0x3add60[_0x394212(0x121)]);break;case _0x394212(0xdc):storeHeadless(_0x3add60[_0x394212(0x121)]);break;case _0x394212(0xf3):storeFiat(_0x3add60[_0x394212(0x121)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x394212(0x1f9):placeOrder(_0x3add60['args']);break;case _0x394212(0x1bc):cancelLoading();break;case'showConfig':showConfig();break;case _0x394212(0x202):sendMetricsTelegram();break;case _0x394212(0x141):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x498ef2=![]){const _0x4f1de2=_0x12375b;logger[_0x4f1de2(0x16a)](_0x4f1de2(0x1a0)+(_0x498ef2?_0x4f1de2(0x1c8):_0x4f1de2(0x20c))+'\x20|\x20exchange:\x20'+config[_0x4f1de2(0x1ce)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x498ef2)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4f1de2(0x1f3)]!=''&&config[_0x4f1de2(0x1f3)]!=_0x4f1de2(0x1ca)){loadingProgress=0x0;if(_0x498ef2){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x16ea91){handleErrorNoStop(_0x16ea91,_0x4f1de2(0x149));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x55ff19=await getCoins();[currentCoins,currentCoinsAll]=_0x55ff19,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x4f1de2(0x16a)](_0x4f1de2(0x130)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4f1de2(0xcc)]==0x0&&allOpenOrders[_0x4f1de2(0xcc)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}function _0x2cd2(_0x1022d5,_0x3f6e31){const _0x299e9a=_0x4a3c();return _0x2cd2=function(_0x4108c3,_0x1f3e5d){_0x4108c3=_0x4108c3-0x8b;let _0x4a3c1c=_0x299e9a[_0x4108c3];return _0x4a3c1c;},_0x2cd2(_0x1022d5,_0x3f6e31);}async function stopExchange(){const _0x58976f=_0x12375b;exchangeStopped=!![];try{await exchange[_0x58976f(0xd8)]();}catch(_0x39ac5d){await handleError(_0x39ac5d,_0x58976f(0x197));}}async function reloadExchange(){const _0x452917=_0x12375b;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x452917(0x16a)](_0x452917(0xd2)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3c4172=config['exchange'],_0x1bbd03=config['apiKey'],_0x164bdd=config[_0x12375b(0x204)],_0x1ab776=config[_0x12375b(0x191)]){const _0x55d7e9=_0x12375b;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x3c4172)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x3c4172+_0x55d7e9(0x157)),killBot());const _0x4bc5be=ccxt[_0x55d7e9(0x1bd)][_0x3c4172[_0x55d7e9(0x182)]()];exchange=new _0x4bc5be({'apiKey':_0x1bbd03,'secret':_0x164bdd,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x55d7e9(0x176)}});if(_0x1ab776)exchange['password']=_0x1ab776;}function setStableCoins(){const _0xbfab82=_0x12375b;let _0x3a6257=config[_0xbfab82(0xce)]==_0xbfab82(0xbb)?'ETH':_0xbfab82(0x19f),_0x36b945=!allSymbols['includes'](_0x3a6257+_0xbfab82(0x178))?_0xbfab82(0x1ab):'USD',_0x15836a=!allSymbols[_0xbfab82(0x1b0)](_0x3a6257+_0xbfab82(0x91))?_0x36b945:_0xbfab82(0xf1);stablecoins={'eur':{'coin':''+_0x3a6257+_0x15836a,'symbol':_0x3a6257+'/'+_0x15836a},'usd':{'coin':''+_0x3a6257+_0x36b945,'symbol':_0x3a6257+'/'+_0x36b945}};}async function initwsCcxt(){const _0x3092e0=_0x12375b;initCycle++;const _0x489ce6=initCycle;let _0x44cd62=[];config[_0x3092e0(0xb1)][_0x3092e0(0xe0)](_0x391623=>{const _0x12e5e8=_0x3092e0;if(!_0x391623[_0x12e5e8(0x192)]&&_0x391623[_0x12e5e8(0xc0)]!=config['basecoin'])_0x44cd62['push'](_0x391623[_0x12e5e8(0x1e6)]);});if(!_0x44cd62['includes'](stablecoins[_0x3092e0(0x122)][_0x3092e0(0x1e6)]))_0x44cd62['push'](stablecoins[_0x3092e0(0x122)][_0x3092e0(0x1e6)]);if(!_0x44cd62['includes'](stablecoins[_0x3092e0(0x131)][_0x3092e0(0x1e6)]))_0x44cd62['push'](stablecoins[_0x3092e0(0x131)][_0x3092e0(0x1e6)]);if(config[_0x3092e0(0x1ce)]['startsWith'](_0x3092e0(0x98))){if(!_0x44cd62[_0x3092e0(0x1b0)](_0x3092e0(0x153)+config[_0x3092e0(0xce)]))_0x44cd62['push'](_0x3092e0(0x153)+config['basecoin']);}loadCoins(_0x44cd62),_0x44cd62=validateSymbols(_0x44cd62);const _0x43c633=async _0x642d3c=>{const _0x4f3a2f=_0x3092e0;let _0x110f17;try{const _0x57a8a3=await getTickers(_0x642d3c);Object[_0x4f3a2f(0x1dd)](_0x57a8a3)[_0x4f3a2f(0xe0)](_0x49198e=>{const _0x3eb7ae=_0x4f3a2f;_0x110f17=_0x49198e[0x1][_0x3eb7ae(0x1e6)],global[_0x3eb7ae(0x1b2)][noslash(_0x110f17)]=_0x49198e[0x1][_0x3eb7ae(0x138)],global[_0x3eb7ae(0x14d)][_0x110f17]=_0x49198e[0x1][_0x3eb7ae(0x185)];});}catch(_0x310a46){await handleError(_0x310a46,_0x4f3a2f(0x1f2),_0x110f17);}},_0x439dac=async _0x1f8e83=>{const _0x22c347=_0x3092e0;while(initCycle==_0x489ce6){if(!botPaused)try{const _0x5b31c7=await exchange[_0x22c347(0x92)](_0x1f8e83);global[_0x22c347(0x1b2)][noslash(_0x5b31c7[0x0]['symbol'])]=_0x5b31c7[0x0][_0x22c347(0x205)],await sleep(0x3e8);}catch(_0x2edfcf){if(!exchangeStopped)await handleError(_0x2edfcf,'watchTrades()',_0x1f8e83);}else await sleep(0x64);}},_0x1efd1e=async _0x231068=>{const _0x2603de=_0x3092e0;while(initCycle==_0x489ce6){if(!botPaused){let _0x32236a;try{await sleep(0x3c*0x3e8);const _0x1d06a8=await getTickers(_0x231068);Object[_0x2603de(0x1dd)](_0x1d06a8)[_0x2603de(0xe0)](_0x2cf851=>{const _0x3e3b4f=_0x2603de;_0x32236a=_0x2cf851[0x1][_0x3e3b4f(0x1e6)],global[_0x3e3b4f(0x14d)][_0x32236a]=_0x2cf851[0x1][_0x3e3b4f(0x185)];});}catch(_0x25f4ab){if(!exchangeStopped)await handleError(_0x25f4ab,'fetchTickers()',_0x32236a);}}else await sleep(0x64);}},_0x421057=async _0x2275f3=>{const _0x4b7d03=_0x3092e0;while(initCycle==_0x489ce6){if(!botPaused)try{const _0x2249a6=await exchange[_0x4b7d03(0xd3)](_0x2275f3);initCycle==_0x489ce6&&_0x2249a6[_0x4b7d03(0xe0)](_0x539284=>{updateNumberCoinsCcxt(_0x539284);});}catch(_0x4c6d24){if(!exchangeStopped)await handleError(_0x4c6d24,_0x4b7d03(0xa6));}else await sleep(0x64);}};_0x43c633(_0x44cd62),_0x1efd1e(_0x44cd62),_0x44cd62['forEach'](_0x5e49a1=>{_0x439dac(_0x5e49a1),_0x421057(_0x5e49a1);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x381392){const _0x259ce6=_0x12375b;let _0x69231c={};try{if(config[_0x259ce6(0x1ce)]!=_0x259ce6(0x1cd))_0x69231c=await exchange[_0x259ce6(0x1a2)](_0x381392);else for(const _0x479120 of _0x381392){const _0x4e3ce7=await exchange[_0x259ce6(0xa1)](_0x479120);_0x69231c[_0x479120]=_0x4e3ce7;}return _0x69231c;}catch(_0x1c6454){throw _0x1c6454;}}async function watchTransactions(){const _0x51075d=_0x12375b;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x506d98=await getCoins(),[_0x5a8ed8,_0x2cd459]=_0x506d98;let _0x16e69d=[];currentCoins[_0x51075d(0xe0)](_0x43f6b8=>{const _0x1eeb09=_0x51075d,_0x38bf67=_0x5a8ed8[_0x1eeb09(0x113)](_0x325ffa=>_0x325ffa['coin']==_0x43f6b8[_0x1eeb09(0xc0)]);if(_0x38bf67){if(_0x43f6b8[_0x1eeb09(0x209)]!=_0x38bf67[_0x1eeb09(0x209)]){let _0x4588c4;if(_0x43f6b8[_0x1eeb09(0xc0)]!=config[_0x1eeb09(0xce)]){const _0x265c64=global[_0x1eeb09(0x1b2)][noslash(_0x43f6b8[_0x1eeb09(0x1e6)])];_0x4588c4=_0x43f6b8['reverse']?0x1/_0x265c64:_0x265c64;}else _0x4588c4=0x1;_0x16e69d[_0x1eeb09(0x20a)]({'coin':_0x43f6b8[_0x1eeb09(0xc0)],'symbol':_0x43f6b8[_0x1eeb09(0x1e6)],'price':_0x4588c4,'number':Number(formatResult(_0x38bf67['number']-_0x43f6b8[_0x1eeb09(0x209)],0x8)),'basecoinvalue':_0x4588c4*(_0x38bf67[_0x1eeb09(0x209)]-_0x43f6b8['number'])});}}});if(_0x16e69d['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x51075d(0x16a)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x16e69d[0x0][_0x51075d(0x144)]+_0x51075d(0x1b8)+lastFees[_0x51075d(0x1ec)]);if(lastFees[_0x51075d(0x1ec)]==0x0||Math['abs'](_0x16e69d[0x0][_0x51075d(0x144)])>lastFees[_0x51075d(0x1ec)]){delete _0x16e69d[0x0][_0x51075d(0x1e6)],delete _0x16e69d[0x0]['basecoinvalue'];let _0x5459e6=[],_0x4175c9=[...config[_0x51075d(0xe7)]]||[],_0x3e3bdd=config[_0x51075d(0xe7)];_0x4175c9[_0x51075d(0xbf)]((_0x3c64a3,_0x48a1d1)=>_0x3c64a3['date']>_0x48a1d1['date']?-0x1:_0x48a1d1[_0x51075d(0xd4)]>_0x3c64a3['date']?0x1:0x0);const _0x57ef66=getDate();if(_0x4175c9[0x0]){const _0x236eb8=fns['parse'](_0x4175c9[0x0][_0x51075d(0xd4)],_0x51075d(0x129),new Date()),_0x3e7930=fns[_0x51075d(0x9d)](_0x57ef66,_0x51075d(0x129),new Date());if(fns[_0x51075d(0xb4)](_0x236eb8,_0x3e7930)){_0x5459e6=_0x4175c9[0x0][_0x51075d(0xff)];const _0x252330=_0x5459e6['find'](_0x386f9b=>_0x386f9b[_0x51075d(0xc0)]==_0x16e69d[0x0][_0x51075d(0xc0)]);_0x252330?(_0x252330[_0x51075d(0x209)]+=_0x16e69d[0x0][_0x51075d(0x209)],_0x252330['number']==0x0&&(_0x5459e6=_0x5459e6[_0x51075d(0x1bb)](_0x25ceae=>{const _0x502c4d=_0x51075d;return _0x25ceae[_0x502c4d(0xc0)]!=_0x16e69d[0x0][_0x502c4d(0xc0)];}))):_0x5459e6[_0x51075d(0x20a)](_0x16e69d[0x0]);const _0x30abe1=_0x3e3bdd[_0x51075d(0x113)](_0x3ec256=>_0x3ec256[_0x51075d(0xd4)]==_0x57ef66);_0x30abe1[_0x51075d(0xff)]=_0x5459e6;}else _0x3e3bdd[_0x51075d(0x20a)]({'date':_0x57ef66,'changes':[_0x16e69d[0x0]]});}const _0x1994c5=_0x3e3bdd['find'](_0x50fdf3=>_0x50fdf3[_0x51075d(0xd4)]==_0x57ef66);if(_0x1994c5){let _0x3bd734=!![];_0x1994c5[_0x51075d(0xff)][_0x51075d(0xe0)](_0x2e453a=>{if(_0x2e453a['number']!=0x0)_0x3bd734=![];}),_0x3bd734&&(_0x3e3bdd=_0x3e3bdd['filter'](_0x5de56e=>{const _0x4d5b9b=_0x51075d;return _0x5de56e[_0x4d5b9b(0xd4)]!=_0x57ef66;}));}let _0x2a7379=dbConfig[_0x51075d(0x195)](_0x51075d(0x1e4))[_0x51075d(0x113)]({'botID':botID})[_0x51075d(0x194)]();_0x2a7379&&(dbConfig[_0x51075d(0x195)](_0x51075d(0x1e4))['find']({'botID':botID})['assign']({'liquidity':_0x3e3bdd})['write'](),config['liquidity']=_0x3e3bdd),logHistory(_0x51075d(0x18d),_0x51075d(0x103)+Math[_0x51075d(0xd7)](_0x16e69d[0x0][_0x51075d(0x209)])+'\x20'+_0x16e69d[0x0][_0x51075d(0xc0)]+'\x20'+(_0x16e69d[0x0][_0x51075d(0x209)]>0x0?_0x51075d(0x8b):_0x51075d(0x159))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x51075d(0x170)+Math[_0x51075d(0xd7)](_0x16e69d[0x0][_0x51075d(0x209)])+'\x20'+_0x16e69d[0x0][_0x51075d(0xc0)]+'\x20'+(_0x16e69d[0x0][_0x51075d(0x209)]>0x0?_0x51075d(0x8b):_0x51075d(0x159)));transactionDetected=!![];}else logger['debug'](_0x51075d(0x103)+Math[_0x51075d(0xd7)](_0x16e69d[0x0][_0x51075d(0x209)])+'\x20'+_0x16e69d[0x0][_0x51075d(0xc0)]+'\x20'+(_0x16e69d[0x0][_0x51075d(0x209)]>0x0?_0x51075d(0x8b):_0x51075d(0x159))+_0x51075d(0x104));}currentCoins=_0x5a8ed8,currentCoinsAll=_0x2cd459,await sleep(watchTransactionsInterval);}catch(_0x64236d){if(!exchangeStopped)await handleError(_0x64236d,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x220d74=_0x12375b;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x220d74(0x1dd)](markets)[_0x220d74(0xe0)](_0x546492=>{_0x546492[0x1]['active']&&_0x546492[0x1]['spot']&&allSymbols['push'](_0x546492[0x0]);});}catch(_0x80b3d1){throw _0x80b3d1;}}function validateSymbols(_0x42e638){let _0x1e9e52=[];return _0x42e638['forEach'](_0x590893=>{const _0x44a50c=_0x2cd2;!allSymbols[_0x44a50c(0x1b0)](_0x590893)?logHistory(_0x44a50c(0x19c),'Invalid\x20symbol:\x20'+_0x590893+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x1e9e52['push'](_0x590893);}),_0x1e9e52;}async function initclient(){const _0x16c528=_0x12375b;proxyEmit(_0x16c528(0xae),emittedConfiguration()),proxyEmit(_0x16c528(0x17f),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x518528=getNormalizedPerformance();emitPerformance(_0x518528),getStartingBalances(_0x518528);}async function toggleBotMode(){const _0x3badfa=_0x12375b;let _0x1fd974=dbConfig[_0x3badfa(0x195)](_0x3badfa(0x1e4))[_0x3badfa(0x113)]({'botID':botID})[_0x3badfa(0x194)]();if(_0x1fd974){const _0x322a4c=!_0x1fd974[_0x3badfa(0x114)];dbConfig['get'](_0x3badfa(0x1e4))[_0x3badfa(0x113)]({'botID':botID})['assign']({'headless':_0x322a4c})[_0x3badfa(0xb6)](),config[_0x3badfa(0x114)]=_0x322a4c,proxyEmit(_0x3badfa(0xae),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x865fbd=_0x12375b;process[_0x865fbd(0x17c)]({'updatebotmanager':!![]},_0x32ce90=>{}),logger[_0x865fbd(0x16a)](_0x865fbd(0x213)+config[_0x865fbd(0x114)]);}async function loadCoins(_0x4737e6){const _0xc0b365=_0x12375b;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x43977b,_0x3db856=0x0,_0x1c1c6f=0x0;_0x4737e6[_0xc0b365(0xe0)](_0x83cffc=>{const _0x3da002=_0xc0b365;loading['remainingSymbols'][_0x3da002(0x20a)](_0x83cffc);}),loadingCanceled=![];let _0x3f76bb=![];while(_0x43977b!=_0x4737e6['length']+maxLoadingProgress){_0x43977b=loadingProgress,_0x4737e6[_0xc0b365(0xe0)](_0x4af269=>{const _0x59099b=_0xc0b365;if(global[_0x59099b(0x1b2)][noslash(_0x4af269)]){loading[_0x59099b(0xfe)]=loading[_0x59099b(0xfe)][_0x59099b(0x1bb)](_0x52d0fc=>_0x52d0fc!=_0x4af269);if(!watchedSymbols[_0x59099b(0x1b0)](_0x4af269))watchedSymbols[_0x59099b(0x20a)](_0x4af269);_0x43977b++;}}),loading[_0xc0b365(0x12f)]=Math[_0xc0b365(0x134)](_0x43977b/(_0x4737e6[_0xc0b365(0xcc)]+maxLoadingProgress)*0x64);loading[_0xc0b365(0x12f)]!=0x64&&(_0x1c1c6f>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1c1c6f>0x78*0x5&&!_0x3f76bb&&(_0x3f76bb=!![],logHistory(_0xc0b365(0x19c),_0xc0b365(0x218)+loading['remainingSymbols'][_0xc0b365(0x11e)](',\x20')+_0xc0b365(0xe3)),logHistory(_0xc0b365(0x19c),_0xc0b365(0x219)+loadCoinsRetryInterval/0xea60+_0xc0b365(0x1e2)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0xae521a=_0xc0b365;process[_0xae521a(0x17c)]({'stop':'restart'},_0x52e7e9=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0xc0b365(0x19b)]=!![],emitLoadingProgress();break;}else _0x3db856!=loading[_0xc0b365(0x12f)]&&(_0x3db856=loading['progress'],emitLoadingProgress()),_0x1c1c6f++,await sleep(0xc8);}_0x43977b==_0x4737e6[_0xc0b365(0xcc)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0xc0b365(0x17c)]({'status':_0xc0b365(0x1da),'live':_0xc0b365(0xdd)},_0x3cc5c8=>{}),_0x3f76bb&&logHistory(_0xc0b365(0x18d),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3dd6d9=_0x12375b;proxyEmit(_0x3dd6d9(0xae),{...emittedConfiguration(),'configstate':_0x3dd6d9(0x1aa)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x3b6f93=_0x12375b;let _0x58f0cf=global['ticker'][stablecoins[_0x3b6f93(0x122)][_0x3b6f93(0xc0)]],_0x2b63a8=global['ticker'][stablecoins[_0x3b6f93(0x131)][_0x3b6f93(0xc0)]];return{'eur':Number(_0x58f0cf),'usd':Number(_0x2b63a8)};}function capitalize(_0x5bdf8b){const _0x439e87=_0x12375b;return _0x5bdf8b[_0x439e87(0x171)](0x0,0x1)[_0x439e87(0x90)]()+_0x5bdf8b['substring'](0x1);}function supportedExchanges(){const _0xb5e252=_0x12375b,_0x29cfbb=['ws',_0xb5e252(0x1a2),_0xb5e252(0xa1),'watchTrades',_0xb5e252(0xd3),_0xb5e252(0x1ee),_0xb5e252(0x112),_0xb5e252(0x175),_0xb5e252(0x1c1),'fetchBalance'];let _0x12c220=[],_0x142dfc=[],_0x357d33=ccxt[_0xb5e252(0x1bd)][_0xb5e252(0x17f)];_0x357d33['forEach'](_0x132ddd=>{const _0x2bce1b=_0xb5e252;try{const _0x305cba=new ccxt[(_0x2bce1b(0x1bd))][_0x132ddd]();_0x142dfc[_0x2bce1b(0x20a)](_0x305cba);}catch(_0x308c7a){}}),_0x142dfc['forEach'](_0x5839b6=>{const _0x34b892=_0xb5e252;let _0x8a116f=0x0;_0x29cfbb[_0x34b892(0xe0)](_0x2a84eb=>{const _0x23e6f6=_0x34b892;_0x2a84eb in _0x5839b6[_0x23e6f6(0x11c)]&&_0x5839b6['has'][_0x2a84eb]&&_0x8a116f++;}),_0x8a116f==_0x29cfbb[_0x34b892(0xcc)]&&_0x12c220[_0x34b892(0x20a)](capitalize(_0x5839b6['id']));});let _0x19c179=[];return _0x357d33[_0xb5e252(0xe0)](_0x1309e7=>{_0x1309e7=capitalize(_0x1309e7);if(!_0x12c220['includes'](_0x1309e7))_0x19c179['push'](_0x1309e7);}),_0x12c220;}function setStartDatePerformance(){const _0x5e3bf0=_0x12375b;if(config&&config[_0x5e3bf0(0xe7)][0x0][_0x5e3bf0(0xff)][_0x5e3bf0(0xcc)]!=0x0){const _0x15b976=config[_0x5e3bf0(0xe7)][0x0][_0x5e3bf0(0xff)];dbPerformance['get']('data')[_0x5e3bf0(0x113)]({'date':config[_0x5e3bf0(0x133)]})[_0x5e3bf0(0x10a)]({'coins':_0x15b976})[_0x5e3bf0(0xb6)]();}}async function recreateCoinResults(){const _0x239e03=_0x12375b;let _0x257730,_0x2f3c92=[];try{const _0x72886f=fns[_0x239e03(0x152)](fns[_0x239e03(0xc7)](config[_0x239e03(0x133)][_0x239e03(0xad)](/\//g,'-')),_0x239e03(0x1f5));for(const _0x3e1b08 of currentCoins){if(_0x3e1b08[_0x239e03(0xc0)]!=config['basecoin']){let _0x20aa65=0x0,_0x72d2a3,_0x5c69d2;_0x257730=await getAllEventOrders(_0x3e1b08[_0x239e03(0x1e6)]);if(_0x257730[_0x239e03(0xcc)]>0x0)_0x257730[_0x239e03(0xe0)](_0x3ee876=>{const _0x127708=_0x239e03,_0x2169ba=_0x3e1b08[_0x127708(0x1e6)][_0x127708(0x1b0)](config[_0x127708(0xce)]+'/');_0x2f3c92[_0x127708(0x20a)]({'datetime':_0x3ee876[_0x127708(0x188)],'coin':_0x3e1b08[_0x127708(0xc0)],'symbol':_0x3e1b08['symbol'],'side':_0x3ee876[_0x127708(0xf6)],'reverse':_0x2169ba,'amount':formatResult(_0x3ee876[_0x127708(0x1dc)],0x8),'filled':formatResult(_0x3ee876[_0x127708(0x1dc)],0x8),'price':formatResult(_0x3ee876['price'],0x8)}),_0x20aa65=_0x3ee876[_0x127708(0xf6)]==_0x127708(0x15c)?_0x20aa65+_0x3ee876[_0x127708(0x1dc)]:_0x20aa65-_0x3ee876[_0x127708(0x1dc)];if(!_0x5c69d2)_0x5c69d2=_0x3ee876[_0x127708(0x205)];});_0x72d2a3=_0x3e1b08[_0x239e03(0x209)]-_0x20aa65;let _0x8068a8;config['liquidity']['forEach'](_0x54e86e=>{const _0x5f092f=_0x239e03;!_0x8068a8&&(_0x8068a8=_0x54e86e['changes']['find'](_0x219258=>_0x219258[_0x5f092f(0xc0)]==_0x3e1b08['coin']),_0x8068a8&&(_0x72d2a3=_0x8068a8[_0x5f092f(0x209)],_0x5c69d2=_0x8068a8[_0x5f092f(0x205)]));});let _0x3ce3c9=dbCoinResults[_0x239e03(0x195)](_0x239e03(0x107))[_0x239e03(0x113)]({'coin':_0x3e1b08[_0x239e03(0xc0)]})['value']();_0x3ce3c9={'coin':_0x3e1b08['coin'],'number':_0x72d2a3,'breakeven':_0x5c69d2,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x239e03(0x107))[_0x239e03(0x113)]({'coin':_0x3e1b08[_0x239e03(0xc0)]})[_0x239e03(0x10a)](_0x3ce3c9)[_0x239e03(0xb6)]();}}_0x2f3c92[_0x239e03(0xbf)]((_0x19785c,_0x5e1d63)=>_0x19785c[_0x239e03(0x188)]>_0x5e1d63[_0x239e03(0x188)]?0x1:_0x5e1d63[_0x239e03(0x188)]>_0x19785c[_0x239e03(0x188)]?-0x1:0x0);let _0x3874cf=0x0;for(let _0x47dc32 of _0x2f3c92){await updateCoinResults(_0x47dc32,!![]);}}catch(_0x503a62){await handleError(_0x503a62,_0x239e03(0xc5));}}async function getAllEventOrders(_0x173f0c){const _0x4b2cd1=_0x12375b;let _0xba0fb6=[],_0x4a1527=dbLogs[_0x4b2cd1(0x195)](_0x4b2cd1(0x1fa))['filter'](_0x3f71d9=>{const _0x5b9660=_0x4b2cd1,_0x56a670=_0x3f71d9[_0x5b9660(0x1ad)]['toLowerCase']();return _0x56a670['includes'](_0x173f0c[_0x5b9660(0x182)]())&&(_0x56a670[_0x5b9660(0x1b0)](_0x5b9660(0x147))&&_0x56a670[_0x5b9660(0x1b0)](_0x5b9660(0xba))||_0x56a670[_0x5b9660(0x1b0)](_0x5b9660(0x1dc))&&_0x56a670['includes'](_0x5b9660(0xba)));})[_0x4b2cd1(0x93)](_0x4b2cd1(0x199))[_0x4b2cd1(0x194)]();return _0x4a1527[_0x4b2cd1(0xe0)](_0x400d29=>{const _0xf0f2b2=_0x4b2cd1,_0x35e129=_0x400d29[_0xf0f2b2(0x1ad)]['includes'](_0xf0f2b2(0x21a))?_0xf0f2b2(0x21a):_0xf0f2b2(0x15c),_0x8e7cff=/#([0-9]|\.)+\s/i,_0x12ff02=Number(_0x8e7cff['exec'](_0x400d29[_0xf0f2b2(0x1ad)])[0x0][_0xf0f2b2(0x12c)](0x1)),_0x238a56=/@([0-9]|\.)+$/i,_0x4c9fad=Number(_0x238a56[_0xf0f2b2(0xe9)](_0x400d29['event'])[0x0][_0xf0f2b2(0x12c)](0x1));_0xba0fb6[_0xf0f2b2(0x20a)]({'datetime':_0x400d29[_0xf0f2b2(0x199)],'coin':symbolToCoin(_0x173f0c),'symbol':_0x173f0c,'side':_0x35e129,'amount':_0x12ff02,'filled':_0x12ff02,'price':_0x4c9fad});}),_0xba0fb6;}async function getAllOrders(_0x14608,_0x59614c){const _0x20dd93=_0x12375b;let _0x49037f=[];while(_0x59614c<exchange[_0x20dd93(0x20e)]()){const _0x561eb0=0x1f4;try{const _0x58266e=await exchange[_0x20dd93(0x1c1)](_0x14608,_0x59614c,_0x561eb0);if(_0x58266e[_0x20dd93(0xcc)])_0x59614c=_0x58266e[_0x58266e[_0x20dd93(0xcc)]-0x1][_0x20dd93(0x1ef)]+0x1,_0x49037f=_0x49037f[_0x20dd93(0x102)](_0x58266e);else break;}catch(_0x1d6c3c){await handleError(_0x1d6c3c,_0x20dd93(0x1d7),_0x14608);}}return _0x49037f;}async function validate24hChanges(){const _0x609a91=_0x12375b;for(const _0x3fd931 of currentCoins){if(_0x3fd931[_0x609a91(0xc0)]!=config['basecoin']){let _0x222c58;_0x3fd931['reverse']?_0x222c58=formatResult((0x1/(global['change'][noslash(_0x3fd931[_0x609a91(0x1e6)])]/0x64+0x1)-0x1)*0x64,0x3):_0x222c58=global['change'][noslash(_0x3fd931[_0x609a91(0x1e6)])],_0x222c58<config['change24h']&&(logHistory('error',_0x3fd931[_0x609a91(0xc0)]+_0x609a91(0x165)+_0x222c58+'%'),logHistory(_0x609a91(0x19c),_0x609a91(0x1c2)),logHistory(_0x609a91(0x19c),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3da6a1,_0x9d340a){const _0x44e5bc=_0x12375b;if(!_0x3da6a1)return!![];const _0x422d42=_0x9d340a[_0x44e5bc(0x1e3)]('.'),_0x653193=_0x3da6a1['split']('.');for(var _0x334f6b=0x0;_0x334f6b<_0x653193['length'];_0x334f6b++){const _0x1ac17f=~~_0x653193[_0x334f6b],_0x34c5fb=~~_0x422d42[_0x334f6b];if(_0x1ac17f<_0x34c5fb)return!![];if(_0x1ac17f>_0x34c5fb)return![];}return![];}async function oneTimeMigration(){const _0x1e25f4=_0x12375b;let _0x14daef=dbLogs[_0x1e25f4(0x195)]('version')[_0x1e25f4(0x194)]();if(isOlderVersion(_0x14daef,_0x1e25f4(0x1e8))){let _0x353524=[];const _0x187d58=dbLogs[_0x1e25f4(0x195)](_0x1e25f4(0x1fa))[_0x1e25f4(0x194)]();_0x187d58[_0x1e25f4(0xe0)](_0x2cf957=>{const _0x3027ff=_0x1e25f4;_0x353524[_0x3027ff(0x20a)]({'time':_0x2cf957[_0x3027ff(0x199)],'type':_0x2cf957['type'],'event':_0x2cf957[_0x3027ff(0x1ad)]});}),dbLogs[_0x1e25f4(0x195)](_0x1e25f4(0x1fa))[_0x1e25f4(0x10a)](_0x353524)[_0x1e25f4(0xb6)]();}let _0x52ddfd=dbConfig[_0x1e25f4(0x195)](_0x1e25f4(0xd9))['value']();if(isOlderVersion(_0x52ddfd,_0x1e25f4(0x1e8))){let _0x5252dd=dbConfig[_0x1e25f4(0x195)](_0x1e25f4(0x1e4))[_0x1e25f4(0x113)]({'botID':botID})[_0x1e25f4(0x194)]();if(_0x5252dd){let _0x185cdf=[];_0x5252dd[_0x1e25f4(0xb1)][_0x1e25f4(0xe0)](_0x429b4d=>{const _0x58f78b=_0x1e25f4;_0x185cdf[_0x58f78b(0x20a)]({'coin':_0x429b4d[_0x58f78b(0xc0)],'number':_0x429b4d['startnumber'],'price':_0x429b4d[_0x58f78b(0x11d)]}),delete _0x429b4d[_0x58f78b(0x1eb)],delete _0x429b4d[_0x58f78b(0x11d)];});if(_0x185cdf[_0x1e25f4(0xcc)]!==0x0)fs[_0x1e25f4(0x164)](configbackuppath+(_0x1e25f4(0x10c)+botID+_0x1e25f4(0xc9)),JSON[_0x1e25f4(0xd0)](_0x185cdf,null,0x4),function(_0x194cdc){if(_0x194cdc){}});const _0x2162fc=(_0x39a989,_0x44ae1a)=>{const _0xca859e=_0x1e25f4;let _0x23020b=[];_0x44ae1a[_0xca859e(0xe0)](_0x46284e=>{const _0x1679e3=_0xca859e,_0x1f5f79=_0x39a989[_0x1679e3(0x113)](_0x37146b=>_0x37146b[_0x1679e3(0xc0)]==_0x46284e[_0x1679e3(0xc0)]);if(!_0x1f5f79)_0x23020b[_0x1679e3(0x20a)](_0x46284e);});let _0x1cbb72=[];return _0x39a989[_0xca859e(0xe0)](_0x5632cb=>{const _0x2576fb=_0xca859e,_0x2dc62a=_0x44ae1a['find'](_0x45cf79=>_0x45cf79[_0x2576fb(0xc0)]==_0x5632cb[_0x2576fb(0xc0)]);if(!_0x2dc62a||_0x2dc62a[_0x2576fb(0x209)]==0x0&&_0x5632cb[_0x2576fb(0x209)]!=0x0)_0x1cbb72[_0x2576fb(0x20a)](_0x5632cb);}),{'missingDay1':_0x23020b,'notInDay2':_0x1cbb72};},_0x1c88d8=dbPerformance[_0x1e25f4(0x195)](_0x1e25f4(0x167))[_0x1e25f4(0x17b)]()['value']();if(_0x1c88d8['length']>0x1){const {missingDay1:_0x4bca71,notInDay2:_0x2f8be5}=_0x2162fc(_0x185cdf,_0x1c88d8[0x1][_0x1e25f4(0x107)]);_0x185cdf=[..._0x185cdf,..._0x4bca71],_0x2f8be5[_0x1e25f4(0xe0)](_0x1da573=>{const _0x2fd68c=_0x1e25f4;let _0x50aa6b=_0x185cdf[_0x2fd68c(0x1c7)](_0x115c21=>_0x115c21[_0x2fd68c(0xc0)]==_0x1da573[_0x2fd68c(0xc0)]);_0x50aa6b!=-0x1&&_0x185cdf['splice'](_0x50aa6b,0x1);});}_0x185cdf[_0x1e25f4(0xbf)]((_0x580a8c,_0x5416cb)=>_0x580a8c[_0x1e25f4(0xc0)]>_0x5416cb[_0x1e25f4(0xc0)]?0x1:_0x5416cb[_0x1e25f4(0xc0)]>_0x580a8c[_0x1e25f4(0xc0)]?-0x1:0x0);let _0x4183b7=[{'date':_0x5252dd[_0x1e25f4(0x133)],'changes':_0x185cdf}];_0x1c88d8[_0x1e25f4(0xcc)]>0x2&&_0x1c88d8[_0x1e25f4(0xe0)]((_0x46a4a8,_0x3a1284)=>{const _0x373491=_0x1e25f4;if(_0x3a1284>0x0&&_0x3a1284<_0x1c88d8['length']-0x1){const {missingDay1:_0x406c2d,notInDay2:_0x550bd9}=_0x2162fc(_0x1c88d8[_0x3a1284][_0x373491(0x107)],_0x1c88d8[_0x3a1284+0x1]['coins']);_0x185cdf=[],(_0x406c2d[_0x373491(0xcc)]!=0x0||_0x550bd9['length']!=0x0)&&(_0x406c2d[_0x373491(0xcc)]!=0x0&&_0x185cdf['push'](..._0x406c2d),_0x550bd9['length']!=0x0&&(_0x550bd9['forEach'](_0x1f2c09=>{_0x1f2c09['number']=-_0x1f2c09['number'];}),_0x185cdf[_0x373491(0x20a)](..._0x550bd9)),_0x185cdf['sort']((_0x20de36,_0x164872)=>_0x20de36[_0x373491(0xc0)]>_0x164872[_0x373491(0xc0)]?0x1:_0x164872[_0x373491(0xc0)]>_0x20de36[_0x373491(0xc0)]?-0x1:0x0),_0x4183b7['push']({'date':_0x1c88d8[_0x3a1284+0x1][_0x373491(0xd4)],'changes':_0x185cdf}));}}),dbConfig[_0x1e25f4(0x195)](_0x1e25f4(0x1e4))[_0x1e25f4(0x113)]({'botID':botID})[_0x1e25f4(0x10a)]({..._0x5252dd,'liquidity':_0x4183b7})['write']();}}if(isOlderVersion(_0x52ddfd,_0x1e25f4(0x97))){let _0x59aaeb=dbConfig['get'](_0x1e25f4(0x1e4))[_0x1e25f4(0x113)]({'botID':botID})[_0x1e25f4(0x194)]();if(_0x59aaeb){const _0x1bc9e9=_0x59aaeb[_0x1e25f4(0x1ce)],_0x9f3655=_0x1bc9e9?capitalize(_0x1bc9e9):_0x1e25f4(0x98);dbConfig[_0x1e25f4(0x195)]('bot')[_0x1e25f4(0x113)]({'botID':botID})[_0x1e25f4(0x10a)]({'exchange':_0x9f3655})['write']();}}let _0x561008=dbPerformance[_0x1e25f4(0x195)]('version')[_0x1e25f4(0x194)]();isOlderVersion(_0x561008,_0x1e25f4(0x1e8))&&setStartDatePerformance();let _0x15ff55=dbCoinResults[_0x1e25f4(0x195)](_0x1e25f4(0xd9))['value']();if(isOlderVersion(_0x15ff55,_0x1e25f4(0x158))){let _0x3a6562=dbCoinResults[_0x1e25f4(0x195)](_0x1e25f4(0x107))[_0x1e25f4(0x194)]();if(_0x3a6562[_0x1e25f4(0xcc)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x58be05=_0x12375b;dbConfig[_0x58be05(0x143)](_0x58be05(0xd9),serverversion)[_0x58be05(0xb6)](),dbPerformance[_0x58be05(0x143)](_0x58be05(0xd9),serverversion)[_0x58be05(0xb6)](),dbLogs[_0x58be05(0x143)](_0x58be05(0xd9),serverversion)[_0x58be05(0xb6)](),dbCoinResults[_0x58be05(0x143)](_0x58be05(0xd9),serverversion)[_0x58be05(0xb6)]();}function getConfiguration(_0x186560){const _0x27878d=_0x12375b;let _0xbd2b9=dbConfig[_0x27878d(0x195)](_0x27878d(0x1e4))[_0x27878d(0x113)]({'botID':_0x186560})[_0x27878d(0x194)]();if(_0xbd2b9){let _0x50a661=![];typeof _0xbd2b9['threshold']==_0x27878d(0x19d)&&(_0xbd2b9={..._0xbd2b9,'threshold':Number(_0xbd2b9[_0x27878d(0x9a)])},_0x50a661=!![]),_0xbd2b9[_0x27878d(0x18c)]==undefined&&(_0xbd2b9={..._0xbd2b9,'change24h':-0x14},_0x50a661=!![]),_0xbd2b9[_0x27878d(0x16c)]==undefined&&(_0xbd2b9={..._0xbd2b9,'fiat':'USD'},_0x50a661=!![]),_0xbd2b9[_0x27878d(0x1fc)]==undefined&&(_0xbd2b9={..._0xbd2b9,'onepagemode':settings[_0x27878d(0x1fc)]},_0x50a661=!![]),_0xbd2b9[_0x27878d(0x211)]==undefined&&(_0xbd2b9={..._0xbd2b9,'colorscheme':_0x27878d(0xe8)},_0x50a661=!![]),_0xbd2b9[_0x27878d(0x183)]==undefined&&(_0xbd2b9={..._0xbd2b9,'autoliquidity':!![]},_0x50a661=!![]),_0x50a661&&(_0xbd2b9={'botID':_0xbd2b9[_0x27878d(0x9e)],'exchange':_0xbd2b9[_0x27878d(0x1ce)],'apiKey':_0xbd2b9[_0x27878d(0x1f3)],'apiSecret':_0xbd2b9[_0x27878d(0x204)],'apiPassword':_0xbd2b9[_0x27878d(0x191)],'basecoin':_0xbd2b9[_0x27878d(0xce)],'botname':_0xbd2b9[_0x27878d(0x128)],'showname':_0xbd2b9[_0x27878d(0x14b)],'threshold':_0xbd2b9['threshold'],'ordertype':_0xbd2b9['ordertype'],'timeout':_0xbd2b9['timeout'],'fiat':_0xbd2b9[_0x27878d(0x16c)],'startdate':_0xbd2b9['startdate'],'recreate':_0xbd2b9['recreate'],'timeshift':_0xbd2b9[_0x27878d(0xfd)],'onepagemode':_0xbd2b9[_0x27878d(0x1fc)],'headless':_0xbd2b9[_0x27878d(0x114)],'cooldown':_0xbd2b9[_0x27878d(0x1fb)],'change24h':_0xbd2b9[_0x27878d(0x18c)],'emojibuy':_0xbd2b9['emojibuy'],'emojisell':_0xbd2b9[_0x27878d(0x1e7)],'colorscheme':_0xbd2b9[_0x27878d(0x211)],'portfolio':_0xbd2b9[_0x27878d(0xb1)],'autoliquidity':_0xbd2b9['autoliquidity'],'liquidity':_0xbd2b9[_0x27878d(0xe7)],'openOrders':_0xbd2b9[_0x27878d(0x139)]},dbConfig[_0x27878d(0x195)]('bot')[_0x27878d(0xb8)]()[_0x27878d(0xb6)](),dbConfig[_0x27878d(0x195)](_0x27878d(0x1e4))[_0x27878d(0x20a)](_0xbd2b9)[_0x27878d(0xb6)]());}else _0xbd2b9={'botID':_0x186560,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x186560,'showname':![],'threshold':0x3,'ordertype':_0x27878d(0x147),'timeout':0x14,'fiat':_0x27878d(0x9b),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x27878d(0xfd)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xbd2b9;}function emittedConfiguration(){const _0x2195c4=_0x12375b;let _0x38183d;if(config['apiKey']=='')_0x38183d={...config,'configstate':'initial'};else config['apiKey']==_0x2195c4(0x1ca)?_0x38183d={...config,'configstate':'recovery'}:(_0x38183d={...config,'apiKey':_0x2195c4(0x16b),'apiSecret':_0x2195c4(0x16b)},config[_0x2195c4(0x191)]&&(_0x38183d[_0x2195c4(0x191)]=_0x2195c4(0x16b)));return _0x38183d;}function getSettings(){const _0x4927af=_0x12375b;return dbSettings[_0x4927af(0x195)]('settings')[_0x4927af(0x194)]();}function getSecure(){const _0x2b1fd2=_0x12375b;return dbSecure[_0x2b1fd2(0x195)](_0x2b1fd2(0xeb))[_0x2b1fd2(0x194)]()||{};}function updateTimeshift(_0x5f31ee){const _0x1a060e=_0x12375b;let _0x11b4f3=dbConfig['get'](_0x1a060e(0x1e4))[_0x1a060e(0x113)]({'botID':botID})['value']();_0x11b4f3&&dbConfig[_0x1a060e(0x195)]('bot')[_0x1a060e(0x113)]({'botID':botID})['assign']({'timeshift':_0x5f31ee})[_0x1a060e(0xb6)](),config['timeshift']=_0x5f31ee,proxyEmit(_0x1a060e(0xae),emittedConfiguration());}function updateOnepagemode(_0x295285){const _0x594f78=_0x12375b;let _0x598799=dbConfig[_0x594f78(0x195)](_0x594f78(0x1e4))['find']({'botID':botID})['value']();_0x598799&&dbConfig['get']('bot')[_0x594f78(0x113)]({'botID':botID})[_0x594f78(0x10a)]({'onepagemode':_0x295285})[_0x594f78(0xb6)](),config[_0x594f78(0x1fc)]=_0x295285,proxyEmit(_0x594f78(0xae),emittedConfiguration());}async function storeConfiguration(_0x16e0a7){const _0x441c8a=_0x12375b;logger['debug'](_0x441c8a(0x10b));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x441c8a(0x16a)](_0x441c8a(0x1df));let _0x46e2d0=![],_0xf32aaf=![],_0x44196b=[];_0x16e0a7[_0x441c8a(0xb1)][_0x441c8a(0xe0)](_0x1adadb=>{const _0x521be6=_0x441c8a;if(!_0x1adadb[_0x521be6(0x192)]&&_0x1adadb[_0x521be6(0xc0)]!=_0x16e0a7['basecoin'])_0x44196b[_0x521be6(0x20a)](_0x1adadb[_0x521be6(0x1e6)]);}),_0x44196b['forEach'](_0xed9b5b=>{const _0xe45251=_0x441c8a,_0x11a678=currentCoins[_0xe45251(0x113)](_0x47993e=>_0x47993e[_0xe45251(0x1e6)]==_0xed9b5b);!_0x11a678&&(_0x46e2d0=!![]);}),currentCoins[_0x441c8a(0xe0)](_0x1f4110=>{const _0x281ba9=_0x441c8a;if(_0x1f4110[_0x281ba9(0xc0)]!=config[_0x281ba9(0xce)]){const _0x342205=_0x44196b['find'](_0x72a6d0=>_0x72a6d0==_0x1f4110[_0x281ba9(0x1e6)]);!_0x342205&&(_0x46e2d0=!![]);}}),_0x16e0a7[_0x441c8a(0xb1)][_0x441c8a(0xe0)](_0x1e5110=>{const _0x55ccdb=_0x441c8a,_0x29c406=config[_0x55ccdb(0xb1)][_0x55ccdb(0x113)](_0x9a5988=>_0x9a5988[_0x55ccdb(0xc0)]==_0x1e5110[_0x55ccdb(0xc0)]);if(_0x29c406&&_0x1e5110[_0x55ccdb(0x180)]!=_0x29c406[_0x55ccdb(0x180)])_0xf32aaf=!![];});let _0x3da0ac=dbConfig['get'](_0x441c8a(0x1e4))[_0x441c8a(0x113)]({'botID':botID})[_0x441c8a(0x194)]();_0x16e0a7={..._0x16e0a7,'apiKey':crypt[_0x441c8a(0x1c3)](secure[_0x441c8a(0x1b9)],_0x16e0a7[_0x441c8a(0x1f3)])[_0x441c8a(0x161)],'apiSecret':crypt['decrypt'](secure['privateKey'],_0x16e0a7['apiSecret'])[_0x441c8a(0x161)]};_0x16e0a7[_0x441c8a(0x191)]&&(_0x16e0a7[_0x441c8a(0x191)]=crypt[_0x441c8a(0x1c3)](secure[_0x441c8a(0x1b9)],_0x16e0a7[_0x441c8a(0x191)])[_0x441c8a(0x161)]);let _0x47766=![];if(_0x3da0ac){_0x16e0a7[_0x441c8a(0x1f3)]==_0x441c8a(0x16b)?_0x16e0a7[_0x441c8a(0x1f3)]=config['apiKey']:_0x47766=!![];_0x16e0a7[_0x441c8a(0x204)]==_0x441c8a(0x16b)?_0x16e0a7['apiSecret']=config[_0x441c8a(0x204)]:_0x47766=!![];if(_0x16e0a7[_0x441c8a(0x191)]=='************')_0x16e0a7[_0x441c8a(0x191)]=config[_0x441c8a(0x191)];else{if(_0x16e0a7[_0x441c8a(0x191)])_0x47766=!![];}dbConfig[_0x441c8a(0x195)](_0x441c8a(0x1e4))[_0x441c8a(0x113)]({'botID':botID})[_0x441c8a(0x10a)](_0x16e0a7)[_0x441c8a(0xb6)]();}else dbConfig[_0x441c8a(0x195)](_0x441c8a(0x1e4))[_0x441c8a(0x20a)](_0x16e0a7)[_0x441c8a(0xb6)](),_0x47766=!![],process[_0x441c8a(0x17c)]({'status':_0x441c8a(0x1da),'live':_0x441c8a(0xdd)},_0x3152d8=>{});process[_0x441c8a(0x17c)]({'botname':_0x16e0a7[_0x441c8a(0x128)]},_0x5f2cb9=>{}),config={..._0x16e0a7},updateBotManager(),proxyEmit(_0x441c8a(0x1b7)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x47766)await reset(!![]);else _0x46e2d0||_0xf32aaf?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x441c8a(0x16a)](_0x441c8a(0x16d));}async function storeHeadless(_0x2c1059){const _0x35e13e=_0x12375b,_0x59ede4={...config,'headless':_0x2c1059['headless']};let _0x32453f=dbConfig[_0x35e13e(0x195)](_0x35e13e(0x1e4))[_0x35e13e(0x113)]({'botID':botID})[_0x35e13e(0x194)]();_0x32453f&&dbConfig['get'](_0x35e13e(0x1e4))[_0x35e13e(0x113)]({'botID':botID})[_0x35e13e(0x10a)](_0x59ede4)[_0x35e13e(0xb6)](),config={..._0x59ede4},updateBotManager(),proxyEmit(_0x35e13e(0xae),emittedConfiguration());}async function storeFiat(_0x2f4997){const _0x32065e=_0x12375b,_0x4266b1={...config,'fiat':_0x2f4997};let _0x4e7c51=dbConfig['get']('bot')[_0x32065e(0x113)]({'botID':botID})[_0x32065e(0x194)]();_0x4e7c51&&dbConfig[_0x32065e(0x195)](_0x32065e(0x1e4))[_0x32065e(0x113)]({'botID':botID})[_0x32065e(0x10a)](_0x4266b1)[_0x32065e(0xb6)](),config={..._0x4266b1},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x514073=_0x12375b;logger[_0x514073(0x95)](_0x514073(0x1db));try{if(fs['existsSync'](path[_0x514073(0x11e)](configpath,_0x514073(0x9c)+botID+'-events.json')))fs[_0x514073(0x177)](path['join'](configpath,_0x514073(0x9c)+botID+_0x514073(0xdf)));if(fs[_0x514073(0x11b)](path['join'](configpath,_0x514073(0x9c)+botID+_0x514073(0x12b))))fs[_0x514073(0x177)](path[_0x514073(0x11e)](configpath,_0x514073(0x9c)+botID+_0x514073(0x12b)));if(fs['existsSync'](path[_0x514073(0x11e)](configpath,_0x514073(0x9c)+botID+'-results.json')))fs[_0x514073(0x177)](path[_0x514073(0x11e)](configpath,_0x514073(0x9c)+botID+_0x514073(0x108)));}catch(_0x19c389){if(_0x19c389)logger[_0x514073(0x95)](_0x514073(0x1c9),_0x19c389);}const _0x52857a=getDate();let _0x39d98d=[];currentCoins['forEach'](_0x23193d=>{const _0x32f47d=_0x514073;_0x39d98d['push']({'coin':_0x23193d[_0x32f47d(0xc0)],'number':_0x23193d[_0x32f47d(0x209)],'price':_0x23193d[_0x32f47d(0x138)]});});let _0x37ab6d=dbConfig[_0x514073(0x195)](_0x514073(0x1e4))['find']({'botID':botID})[_0x514073(0x194)]();_0x37ab6d&&(dbConfig['get'](_0x514073(0x1e4))[_0x514073(0x113)]({'botID':botID})[_0x514073(0x10a)]({'liquidity':[{'date':_0x52857a,'changes':_0x39d98d}]})['write'](),config[_0x514073(0xe7)]=[]),process[_0x514073(0x17c)]({'stop':_0x514073(0x140)},_0x49420c=>{});}function noslash(_0x182596){const _0x483ea0=_0x12375b;return _0x182596[_0x483ea0(0xad)]('/','');}function updateHighestFee(_0x3f5022){const _0x4d90ff=_0x12375b;if(_0x3f5022['reverse']){let _0x57e3cb={'filled':_0x3f5022[_0x4d90ff(0x1dc)]*_0x3f5022[_0x4d90ff(0x205)],'amount':_0x3f5022[_0x4d90ff(0x1dc)]*_0x3f5022[_0x4d90ff(0x205)],'side':_0x3f5022['side']==_0x4d90ff(0x21a)?_0x4d90ff(0x15c):_0x4d90ff(0x21a),'price':0x1/_0x3f5022[_0x4d90ff(0x205)]};_0x3f5022={..._0x3f5022,..._0x57e3cb};}const _0x29a2e1=defaultFee*_0x3f5022[_0x4d90ff(0x1dc)]*_0x3f5022['price'];lastFees['recent20'][_0x4d90ff(0xcc)]===0x14&&lastFees['recent20'][_0x4d90ff(0x196)](),lastFees[_0x4d90ff(0x14a)][_0x4d90ff(0x20a)](_0x29a2e1),lastFees[_0x4d90ff(0x1ec)]=Math[_0x4d90ff(0x203)](...lastFees[_0x4d90ff(0x14a)]);}async function updateNumberCoinsCcxt(_0x84515f){const _0x44c49c=_0x12375b;logger[_0x44c49c(0x16a)](_0x44c49c(0xa4)+_0x84515f[_0x44c49c(0x1e6)]+_0x44c49c(0x20d)+_0x84515f[_0x44c49c(0xc4)]+_0x44c49c(0x20d)+_0x84515f[_0x44c49c(0x1dc)]+_0x44c49c(0x1be)+_0x84515f['amount']+'\x20|\x20'+_0x84515f['id']);let _0x236efe=_0x84515f[_0x44c49c(0xc4)],_0x468640=![];currentCoins[_0x44c49c(0xe0)](_0x4de8b9=>{const _0x506aec=_0x44c49c;_0x4de8b9['symbol']==_0x84515f[_0x506aec(0x1e6)]&&(_0x468640=!![]);});if(!_0x468640)return;const _0x2e509a=currentCoins['find'](_0x5b6f62=>_0x5b6f62[_0x44c49c(0x1e6)]==_0x84515f['symbol']),_0x1974de=_0xe5140a=>{if(_0x2e509a)_0x2e509a['orderstatus']=_0xe5140a;};if(_0x236efe==_0x44c49c(0xe6))_0x1974de(_0x44c49c(0xe6));else{if(_0x236efe==_0x44c49c(0x8d)){_0x1974de('canceled');const _0x362103=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x362103,await getOpenOrders(),handleOpenOrders();}else{if(_0x236efe==_0x44c49c(0x216)){let _0x36031c=![];if(lastOrders)for(const _0x56b4e9 of lastOrders){const _0x5e34a7=0xc8,_0x577f5c=0x1388;let _0x1f306e=0x0;while(!_0x56b4e9[_0x44c49c(0xed)]&&_0x1f306e*_0x5e34a7<_0x577f5c){_0x1f306e++,await sleep(_0x5e34a7);}if(_0x1f306e>0x0)logger[_0x44c49c(0x16a)](_0x44c49c(0x1d8)+_0x1f306e*_0x5e34a7/0x3e8+_0x44c49c(0x155));if(_0x56b4e9['orderId']==_0x84515f['id']){logger[_0x44c49c(0x16a)](_0x44c49c(0x1d5)+_0x84515f['id']),_0x36031c=!![];if(_0x56b4e9[_0x44c49c(0x1dc)]==0x0){logger[_0x44c49c(0x16a)](_0x44c49c(0x123)+_0x84515f['id']);if(_0x84515f[_0x44c49c(0x1d3)])_0x56b4e9[_0x44c49c(0x205)]=_0x84515f[_0x44c49c(0x1d3)];else{if(_0x84515f[_0x44c49c(0x205)])_0x56b4e9[_0x44c49c(0x205)]=_0x84515f[_0x44c49c(0x205)];else{}}_0x56b4e9[_0x44c49c(0x1dc)]=_0x84515f[_0x44c49c(0x1dc)],updateHighestFee(_0x56b4e9),_0x1974de(_0x44c49c(0x1dc)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x5ccf7a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5ccf7a;}_0x56b4e9['fee']={'currency':_0x84515f[_0x44c49c(0x16f)]?_0x84515f['fee'][_0x44c49c(0x1a7)]:null,'cost':_0x84515f[_0x44c49c(0x16f)]?_0x84515f[_0x44c49c(0x16f)][_0x44c49c(0xfa)]:0x0},await updateCoinResults(_0x56b4e9);}}}if(!_0x36031c){logger['debug'](_0x44c49c(0x1e5)+_0x84515f['id']),_0x1974de(_0x44c49c(0x1dc));const _0x2acc7b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2acc7b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1051c0=JSON[_0x44c49c(0x9d)](lastBalances[_0x44c49c(0xb1)]);const _0x460a7a=_0x1051c0[_0x44c49c(0x113)](_0x1208a6=>_0x1208a6[_0x44c49c(0x1e6)]==_0x84515f['symbol']);if(_0x460a7a){if(_0x236efe==_0x44c49c(0xe6))_0x460a7a['orderstatus']=_0x460a7a['orderstatus']==_0x44c49c(0x1dc)?_0x44c49c(0x1dc):_0x44c49c(0xe6);else{if(_0x236efe==_0x44c49c(0x8d))_0x460a7a[_0x44c49c(0x101)]=_0x460a7a[_0x44c49c(0x101)]=='filled'?'filled':_0x44c49c(0x8d);else _0x236efe==_0x44c49c(0x216)&&(_0x460a7a[_0x44c49c(0x101)]=_0x44c49c(0x1dc));}}lastBalances={...lastBalances,'portfolio':JSON[_0x44c49c(0xd0)](_0x1051c0)},proxyEmit(_0x44c49c(0x214),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5a4c50=![];currentCoins['forEach'](_0x178b99=>{const _0x3e3d74=_0x2cd2;_0x5a4c50=allOpenOrders[_0x3e3d74(0x113)](_0x4b7864=>_0x4b7864[_0x3e3d74(0x1e6)]==_0x178b99[_0x3e3d74(0x1e6)]),_0x178b99['orderstatus']=_0x5a4c50?_0x3e3d74(0xe6):_0x3e3d74(0xc8);});}async function getCoins(_0x50e901=0x0,_0x347b82=!![],_0x52034c=config[_0x12375b(0xce)]){const _0x1d31e3=_0x12375b;let _0x47dba4,_0x24be42=[],_0x4a87da=[],_0x43a82b=[];if(_0x50e901)await sleep(_0x50e901);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x47dba4=await exchange[_0x1d31e3(0xdb)](),mybalances=_0x47dba4[_0x1d31e3(0x173)];for(const [_0xd11827,_0x385729]of Object[_0x1d31e3(0x1dd)](mybalances)){_0x43a82b['push'](_0xd11827);}config[_0x1d31e3(0xb1)][_0x1d31e3(0xe0)](_0x3206c2=>{const _0x21989c=_0x1d31e3;!_0x43a82b[_0x21989c(0x1b0)](_0x3206c2[_0x21989c(0xc0)])&&(mybalances[_0x3206c2[_0x21989c(0xc0)]]=0x0);});if(_0x52034c=='')for(const [_0x2a4640,_0x59de82]of Object[_0x1d31e3(0x1dd)](mybalances)){_0x59de82!=0x0&&_0x24be42[_0x1d31e3(0x20a)]({'coin':_0x2a4640});}else{let _0x4517ef=![];for(const [_0x124fed,_0x104df0]of Object[_0x1d31e3(0x1dd)](mybalances)){const _0x5cc0bb=config[_0x1d31e3(0xb1)][_0x1d31e3(0x113)](_0xabe1bc=>_0xabe1bc[_0x1d31e3(0xc0)]==_0x124fed),_0x1526b5=_0x124fed+'/'+_0x52034c,_0x208888=_0x52034c+'/'+_0x124fed,_0x4cbc19=currentCoins[_0x1d31e3(0x113)](_0x1e32e8=>_0x1e32e8[_0x1d31e3(0xc0)]==_0x124fed);_0x4517ef=![];if((_0x104df0!=0x0||_0x5cc0bb)&&(allSymbols[_0x1d31e3(0x1b0)](_0x1526b5)||_0x124fed==_0x52034c))_0x24be42['push']({'coin':_0x124fed,'symbol':_0x1526b5,'reverse':![],'number':Math['max'](_0x104df0+(_0x5cc0bb&&_0x5cc0bb[_0x1d31e3(0x180)]||0x0),0x0),'orderstatus':_0x4cbc19?_0x4cbc19[_0x1d31e3(0x101)]:_0x1d31e3(0xc8)});else{if((_0x104df0!=0x0||_0x5cc0bb)&&allSymbols[_0x1d31e3(0x1b0)](_0x208888))_0x24be42[_0x1d31e3(0x20a)]({'coin':_0x124fed,'symbol':_0x208888,'reverse':!![],'number':Math[_0x1d31e3(0x203)](_0x104df0+(_0x5cc0bb&&_0x5cc0bb['offset']||0x0),0x0),'orderstatus':_0x4cbc19?_0x4cbc19[_0x1d31e3(0x101)]:_0x1d31e3(0xc8)});else _0x5cc0bb&&_0x24be42[_0x1d31e3(0x20a)]({'coin':_0x5cc0bb[_0x1d31e3(0xc0)],'symbol':_0x5cc0bb['symbol'],'reverse':_0x5cc0bb[_0x1d31e3(0x1cf)],'number':0x0,'orderstatus':_0x1d31e3(0xc8)});}}}}catch(_0x48e611){if(!_0x347b82)handleErrorNoStop(_0x48e611,_0x1d31e3(0x1c0));else await handleError(_0x48e611,_0x1d31e3(0x1c0));}return _0x4a87da=cloneDeep(_0x24be42),_0x24be42=_0x24be42[_0x1d31e3(0x1bb)](_0x60fca3=>{const _0x762440=_0x1d31e3,_0x535162=config[_0x762440(0xb1)][_0x762440(0x113)](_0x4d9c80=>_0x4d9c80[_0x762440(0xc0)]==_0x60fca3[_0x762440(0xc0)]);return _0x535162&&!_0x535162['excluded'];}),[_0x24be42,_0x4a87da];}async function getCoinNumber(_0x1b6b6a){const _0x58ab2c=_0x12375b;let _0xf1c008;try{const _0x2d0ac4=await exchange[_0x58ab2c(0xdb)]();_0xf1c008=_0x2d0ac4[_0x58ab2c(0x173)][_0x1b6b6a];}catch(_0x307678){await handleError(_0x307678,'getCoinNumber()');}return _0xf1c008;}async function getOpenOrders(){const _0x3e90dd=_0x12375b;let _0x481ad1;allOpenOrders=[];try{for(const _0x130fff of config['portfolio']){!_0x130fff[_0x3e90dd(0x192)]&&_0x130fff['coin']!=config['basecoin']&&(_0x481ad1=await exchange[_0x3e90dd(0x175)](_0x130fff['symbol']),_0x481ad1[_0x3e90dd(0xcc)]>0x0&&allOpenOrders[_0x3e90dd(0x20a)](_0x481ad1[0x0]));}}catch(_0x3cefd1){await handleError(_0x3cefd1,_0x3e90dd(0x1a1));}}async function handleOpenOrders(_0xf9f13e=0x0){const _0x3692c9=_0x12375b;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3692c9(0xb7)]&&allOrdersPlaced&&(_0xf9f13e==0x0?(logger[_0x3692c9(0x16a)](_0x3692c9(0x137)),_0xf9f13e++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3692c9(0x16a)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x20d9be){const _0x6eb433=_0x12375b,_0x5d9bd=ccxt['pro'][_0x20d9be[_0x6eb433(0x1ce)][_0x6eb433(0x182)]()],_0x4a4e63=new _0x5d9bd({'apiKey':_0x20d9be[_0x6eb433(0x1f3)],'secret':_0x20d9be['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x20d9be[_0x6eb433(0x191)])_0x4a4e63['password']=_0x20d9be[_0x6eb433(0x191)];try{await _0x4a4e63[_0x6eb433(0x215)]();}catch(_0x22ce16){throw _0x22ce16;}}function cloneDeep(_0x4a1a60){const _0x39c496=_0x12375b;return JSON[_0x39c496(0x9d)](JSON[_0x39c496(0xd0)](_0x4a1a60));}async function getPortfolio(_0x59d181){const _0x2ffa37=_0x12375b;let _0x3a1414=[],_0x3bd5e0=[],_0x5b1984=[],_0x588d91;if(_0x59d181[_0x2ffa37(0x1f3)]!==_0x2ffa37(0x16b)||_0x59d181[_0x2ffa37(0x204)]!==_0x2ffa37(0x16b)||_0x59d181[_0x2ffa37(0x191)]&&_0x59d181[_0x2ffa37(0x191)]!==_0x2ffa37(0x16b)){if(config[_0x2ffa37(0x1ce)]){if(_0x59d181[_0x2ffa37(0x1f3)]==_0x2ffa37(0x16b))_0x59d181['apiKey']=config[_0x2ffa37(0x1f3)];if(_0x59d181[_0x2ffa37(0x204)]=='************')_0x59d181['apiSecret']=config[_0x2ffa37(0x204)];if(_0x59d181[_0x2ffa37(0x191)]==_0x2ffa37(0x16b))_0x59d181[_0x2ffa37(0x191)]=config['apiPassword'];try{await testAPI(_0x59d181);}catch(_0x31802c){if(_0x31802c['toString']()[_0x2ffa37(0x1b0)](_0x2ffa37(0x1bf))){logger[_0x2ffa37(0x16a)](_0x2ffa37(0x200)),proxyEmit(_0x2ffa37(0xb1),![]);return;}else{handleError(_0x31802c,'getPortfolio(0)');return;}}}await initExchange(_0x59d181[_0x2ffa37(0x1ce)],_0x59d181[_0x2ffa37(0x1f3)],_0x59d181[_0x2ffa37(0x204)],_0x59d181[_0x2ffa37(0x191)]);try{await loadSymbols();}catch(_0x5069dd){if(_0x5069dd[_0x2ffa37(0x1c4)]()[_0x2ffa37(0x1b0)](_0x2ffa37(0x1bf))){proxyEmit(_0x2ffa37(0xb1),![]);return;}else{handleError(_0x5069dd,_0x2ffa37(0x1e9));return;}}const _0x1d7a4f=await getCoins(0x0,![],_0x59d181[_0x2ffa37(0xce)]);_0x5b1984=cloneDeep(_0x1d7a4f[0x1]);}else _0x5b1984=cloneDeep(currentCoinsAll);if(_0x59d181['basecoin']=='')proxyEmit(_0x2ffa37(0xb1),_0x5b1984);else{_0x5b1984[_0x2ffa37(0xe0)](_0x481cc5=>{const _0x42cd0c=_0x2ffa37;if(_0x481cc5['coin']!=_0x59d181[_0x42cd0c(0xce)]&&allSymbols['includes'](_0x481cc5[_0x42cd0c(0x1e6)]))_0x3a1414[_0x42cd0c(0x20a)](_0x481cc5[_0x42cd0c(0x1e6)]);});if(_0x3a1414[_0x2ffa37(0xcc)]==0x0)logHistory('error','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x3bd5e0=await getTickers(_0x3a1414);}catch(_0x34411c){if(_0x34411c['toString']()[_0x2ffa37(0x1b0)](_0x2ffa37(0x1bf))){proxyEmit(_0x2ffa37(0xb1),![]);return;}else handleError(_0x34411c,'getPortfolio(2)');}_0x5b1984[_0x2ffa37(0xe0)](_0x1494af=>{const _0x266a13=_0x2ffa37;_0x1494af[_0x266a13(0xc0)]!=_0x59d181[_0x266a13(0xce)]?_0x3bd5e0[_0x1494af[_0x266a13(0x1e6)]]?_0x588d91=_0x1494af[_0x266a13(0x1cf)]?0x1/_0x3bd5e0[_0x1494af['symbol']][_0x266a13(0x138)]:_0x3bd5e0[_0x1494af[_0x266a13(0x1e6)]][_0x266a13(0x138)]:_0x588d91=0x0:_0x588d91=0x1,_0x1494af[_0x266a13(0x205)]=formatResult(_0x588d91,0x8);}),proxyEmit(_0x2ffa37(0xb1),_0x5b1984);}}}function truncateTradeAmount(_0x569033,_0x436ffb){const _0x159444=_0x12375b;let _0x48e28f=0x0;try{_0x48e28f=exchange[_0x159444(0x1f7)](_0x569033,_0x436ffb);}catch(_0xa19aa1){}return _0x48e28f;}function checkMinimums(_0x592f05){const _0x1cae3c=_0x12375b;let _0xd6d3d5=!![];const _0x4b2cfa=!_0x592f05[_0x1cae3c(0x1cf)]?markets[_0x592f05['symbol']][_0x1cae3c(0x1c6)][_0x1cae3c(0x99)][_0x1cae3c(0xe5)]:markets[_0x592f05['symbol']][_0x1cae3c(0x1c6)][_0x1cae3c(0xfa)][_0x1cae3c(0xe5)],_0x24f31a=!_0x592f05['reverse']?markets[_0x592f05['symbol']][_0x1cae3c(0x1c6)]['cost'][_0x1cae3c(0xe5)]:markets[_0x592f05[_0x1cae3c(0x1e6)]]['limits'][_0x1cae3c(0x99)][_0x1cae3c(0xe5)],_0xb69900=truncateTradeAmount(_0x592f05[_0x1cae3c(0x1e6)],_0x592f05[_0x1cae3c(0x106)]);_0x592f05['trade']=_0xb69900;if(Math[_0x1cae3c(0xd7)](_0xb69900)<_0x4b2cfa)_0xd6d3d5=![];if(Math[_0x1cae3c(0xd7)](_0xb69900)*_0x592f05[_0x1cae3c(0x138)]<_0x24f31a)_0xd6d3d5=![];if(_0x592f05[_0x1cae3c(0xf6)]==_0x1cae3c(0x21a)){let _0x526d8f=config['portfolio'][_0x1cae3c(0x113)](_0x24b17b=>_0x24b17b['coin']==_0x592f05[_0x1cae3c(0xc0)]);if(_0x526d8f[_0x1cae3c(0x180)]>0x0){if(Math[_0x1cae3c(0xd7)](_0xb69900)>_0x592f05['number']-_0x526d8f[_0x1cae3c(0x180)])_0xd6d3d5=![];}else{if(Math[_0x1cae3c(0xd7)](_0xb69900)>_0x592f05[_0x1cae3c(0x209)])_0xd6d3d5=![];}}if(_0x592f05[_0x1cae3c(0xf6)]==_0x1cae3c(0x15c)){let _0x33dbe3=config['portfolio'][_0x1cae3c(0x113)](_0x36ad0a=>_0x36ad0a['coin']==config[_0x1cae3c(0xce)]),_0xa28cdd=currentCoins[_0x1cae3c(0x113)](_0xc158e7=>_0xc158e7[_0x1cae3c(0xc0)]==config[_0x1cae3c(0xce)]);if(_0x33dbe3['offset']>0x0){if(Math[_0x1cae3c(0xd7)](_0xb69900)*_0x592f05[_0x1cae3c(0x138)]>_0xa28cdd['number']-_0x33dbe3[_0x1cae3c(0x180)])_0xd6d3d5=![];}else{if(Math[_0x1cae3c(0xd7)](_0xb69900)*_0x592f05[_0x1cae3c(0x138)]>_0xa28cdd['number'])_0xd6d3d5=![];}}return _0xd6d3d5;}async function getBalances(_0x35efcf=!![]){const _0x2eb5d2=_0x12375b;let _0x5e4491=0x0,_0x3448c0;const _0x346b45=config[_0x2eb5d2(0x9a)];if(config[_0x2eb5d2(0x114)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2eb5d2(0xe0)](_0x67cdb4=>{const _0x3e534d=_0x2eb5d2;if(_0x67cdb4[_0x3e534d(0xc0)]!=config[_0x3e534d(0xce)]){let _0x74974b=global[_0x3e534d(0x1b2)][noslash(_0x67cdb4[_0x3e534d(0x1e6)])];_0x3448c0=_0x67cdb4[_0x3e534d(0x1cf)]?0x1/_0x74974b:_0x74974b;}else _0x3448c0=0x1;let _0x4b1730=_0x67cdb4[_0x3e534d(0x209)]*_0x3448c0;_0x5e4491+=_0x4b1730,_0x67cdb4[_0x3e534d(0x138)]=formatResult(Number(_0x3448c0),0x8),_0x67cdb4['value']=_0x4b1730;}),currentCoins[_0x2eb5d2(0xe0)](_0x18e02a=>{const _0x32e25a=_0x2eb5d2;let _0x320209=config[_0x32e25a(0xb1)][_0x32e25a(0x113)](_0xf2d4f4=>_0xf2d4f4[_0x32e25a(0xc0)]==_0x18e02a[_0x32e25a(0xc0)]),_0x24793c=Number(_0x320209[_0x32e25a(0x160)]),_0x4ae440=_0x18e02a['value']/_0x5e4491*0x64,_0x5a4e1d=_0x24793c*_0x5e4491/0x64/_0x18e02a[_0x32e25a(0x138)]-_0x18e02a[_0x32e25a(0x209)];_0x18e02a[_0x32e25a(0x160)]=formatResult(_0x4ae440,0x3),_0x18e02a[_0x32e25a(0xef)]=formatResult(_0x24793c,0x3),_0x18e02a[_0x32e25a(0x106)]=formatResult(_0x5a4e1d,0x8),_0x18e02a[_0x32e25a(0xf6)]='',_0x18e02a[_0x32e25a(0xbe)]=![];if(_0x18e02a[_0x32e25a(0xc0)]!=config[_0x32e25a(0xce)]){if(_0x18e02a[_0x32e25a(0x160)]>_0x24793c)_0x18e02a['side']='sell',_0x18e02a[_0x32e25a(0xbe)]=checkMinimums(_0x18e02a);else _0x18e02a[_0x32e25a(0x160)]<_0x24793c&&(_0x18e02a[_0x32e25a(0xf6)]=_0x32e25a(0x15c),_0x18e02a[_0x32e25a(0xbe)]=checkMinimums(_0x18e02a));}_0x18e02a[_0x32e25a(0xf2)]=_0x18e02a['distribution']/_0x18e02a[_0x32e25a(0xef)]-0x1;if(_0x18e02a[_0x32e25a(0x101)]==_0x32e25a(0x1dc)||_0x18e02a[_0x32e25a(0x101)]=='canceled')_0x18e02a[_0x32e25a(0x101)]=_0x32e25a(0xc8);}),currentCoins['sort']((_0x45d1bf,_0x152811)=>_0x45d1bf[_0x2eb5d2(0xf2)]<_0x152811[_0x2eb5d2(0xf2)]?0x1:_0x152811[_0x2eb5d2(0xf2)]<_0x45d1bf[_0x2eb5d2(0xf2)]?-0x1:0x0);const _0x4915b8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4915b8[_0x2eb5d2(0x122)],'usd':_0x4915b8[_0x2eb5d2(0x131)],'portfolio':JSON[_0x2eb5d2(0xd0)](currentCoins),'threshold':_0x346b45},proxyEmit(_0x2eb5d2(0x214),{'serverversion':serverversion,'balances':lastBalances});if(_0x35efcf){if(config[_0x2eb5d2(0x114)])headlessMode({'portfolio':currentCoins,'threshold':_0x346b45});else{if(lockOrders==ORDERS[_0x2eb5d2(0x118)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x346b45});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3f4769=getNormalizedPerformance();getStartingBalances(_0x3f4769),emitPerformance(_0x3f4769);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4f915f=getNormalizedPerformance();emitPerformance(_0x4f915f),getStartingBalances(_0x4f915f),logger[_0x2eb5d2(0x16a)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xdf410a=_0x12375b;if(!lastBalances)return;let _0x5ab610=[],_0x17b59c,_0x3c4248=JSON[_0xdf410a(0x9d)](lastBalances['portfolio']);_0x3c4248[_0xdf410a(0xbf)]((_0x2c3945,_0x408695)=>_0x2c3945[_0xdf410a(0xc0)]>_0x408695[_0xdf410a(0xc0)]?0x1:_0x408695[_0xdf410a(0xc0)]>_0x2c3945[_0xdf410a(0xc0)]?-0x1:0x0),_0x3c4248['forEach'](_0x508200=>{const _0x3cf99c=_0xdf410a;let _0x2b9852={'coin':_0x508200[_0x3cf99c(0xc0)],'number':_0x508200[_0x3cf99c(0x209)],'price':_0x508200[_0x3cf99c(0x138)]};_0x5ab610['push'](_0x2b9852);});const _0x402821=await getFiat();_0x17b59c={'date':lastBalances[_0xdf410a(0x199)][_0xdf410a(0x1e3)]('\x20')[0x0],'eur':_0x402821[_0xdf410a(0x122)],'usd':_0x402821[_0xdf410a(0x131)],'coins':_0x5ab610};let _0x3d3e01=dbPerformance['get'](_0xdf410a(0x167))[_0xdf410a(0x113)]({'date':_0x17b59c[_0xdf410a(0xd4)]})[_0xdf410a(0x194)]();_0x3d3e01?_0x17b59c['date']!=config[_0xdf410a(0x133)]&&dbPerformance[_0xdf410a(0x195)](_0xdf410a(0x167))['find']({'date':_0x17b59c[_0xdf410a(0xd4)]})[_0xdf410a(0x10a)](_0x17b59c)['write']():dbPerformance[_0xdf410a(0x195)](_0xdf410a(0x167))[_0xdf410a(0x20a)](_0x17b59c)[_0xdf410a(0xb6)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x185729=_0x12375b;let _0x247ef0=[];if(dbPerformance[_0x185729(0x11c)]('data')[_0x185729(0x194)]()){let _0x48f1aa=dbPerformance['get'](_0x185729(0x167))[_0x185729(0x17b)]()[_0x185729(0x1bb)](_0x306d4d=>{const _0x5f4f7c=_0x185729;if(_0x306d4d['coins'][_0x5f4f7c(0xcc)]==0x0)return![];else return!![];})[_0x185729(0x93)](_0x185729(0xd4))['value'](),_0x34cb48=[...config[_0x185729(0xe7)]];_0x34cb48[_0x185729(0xbf)]((_0x1ae60b,_0x5d5801)=>_0x1ae60b[_0x185729(0xd4)]>_0x5d5801['date']?-0x1:_0x5d5801[_0x185729(0xd4)]>_0x1ae60b[_0x185729(0xd4)]?0x1:0x0);let _0x223a31=0x1,_0x4d6114=[],_0x4f3e14=0x0;_0x48f1aa[_0x185729(0x12c)]()['reverse']()[_0x185729(0xe0)]((_0x5d30c5,_0x36bc7c)=>{const _0x5c795e=_0x185729;if(_0x34cb48[_0x4f3e14]){if(_0x48f1aa[_0x48f1aa[_0x5c795e(0xcc)]-_0x36bc7c]&&_0x34cb48[_0x4f3e14][_0x5c795e(0xd4)]==_0x48f1aa[_0x48f1aa[_0x5c795e(0xcc)]-_0x36bc7c][_0x5c795e(0xd4)]){if(_0x36bc7c<_0x48f1aa[_0x5c795e(0xcc)]){let _0xb3cf67=0x0,_0x141c6d=0x0;_0x48f1aa[_0x48f1aa[_0x5c795e(0xcc)]-_0x36bc7c][_0x5c795e(0x107)][_0x5c795e(0xe0)](_0x5e73a0=>{const _0xff4ef3=_0x5c795e;_0x141c6d+=_0x5e73a0[_0xff4ef3(0x209)]*_0x5e73a0[_0xff4ef3(0x205)];}),_0x34cb48[_0x4f3e14][_0x5c795e(0xff)][_0x5c795e(0xe0)](_0x50aa2a=>{const _0x2fe359=_0x5c795e;_0xb3cf67+=_0x50aa2a[_0x2fe359(0x209)]*_0x50aa2a[_0x2fe359(0x205)];}),_0x223a31*=_0xb3cf67/(_0x141c6d-_0xb3cf67)+0x1;}_0x4f3e14++;}}let _0x20eb14=0x0;_0x5d30c5[_0x5c795e(0x107)]['forEach'](_0x1ec2d2=>{const _0x1eb733=_0x5c795e;_0x20eb14+=_0x1ec2d2['number']*_0x1ec2d2[_0x1eb733(0x205)];}),_0x4d6114[_0x48f1aa[_0x5c795e(0xcc)]-_0x36bc7c-0x1]=_0x20eb14*(_0x223a31-0x1);});let _0x26057b=[];_0x34cb48=[...config[_0x185729(0xe7)]]||[];let _0xace0f1=0x0;_0x4f3e14=0x0,_0x48f1aa['forEach']((_0x553e15,_0x2293ca)=>{const _0x58e966=_0x185729;if(_0x34cb48[_0x4f3e14]){const _0x3bfdc7=fns['parse'](_0x34cb48[_0x4f3e14][_0x58e966(0xd4)],_0x58e966(0x129),new Date()),_0x121f43=fns['parse'](_0x553e15[_0x58e966(0xd4)],_0x58e966(0x129),new Date());if(fns['isEqual'](_0x3bfdc7,_0x121f43)){let _0x5693e4=0x0;_0x34cb48[_0x4f3e14]['changes'][_0x58e966(0xe0)](_0x2700b5=>{const _0xb61cac=_0x58e966;!_0x26057b[_0x2700b5[_0xb61cac(0xc0)]]?_0x26057b[_0x2700b5['coin']]=_0x2700b5[_0xb61cac(0x209)]:(_0x5693e4=_0x26057b[_0x2700b5['coin']],_0x26057b[_0x2700b5[_0xb61cac(0xc0)]]+=_0x2700b5[_0xb61cac(0x209)]);const _0x52e0af=_0x553e15['coins'][_0xb61cac(0x113)](_0x3ef54a=>_0x3ef54a[_0xb61cac(0xc0)]==_0x2700b5[_0xb61cac(0xc0)]);(!_0x52e0af||_0x52e0af['number']==0x0)&&(_0xace0f1+=(-_0x2700b5[_0xb61cac(0x209)]-_0x5693e4)*_0x2700b5[_0xb61cac(0x205)]);}),_0x4f3e14++;}}_0x553e15[_0x58e966(0x107)][_0x58e966(0xe0)]((_0x53d8f1,_0x149d0e)=>{const _0x31ea33=_0x58e966;_0x26057b[_0x53d8f1[_0x31ea33(0xc0)]]&&(_0x53d8f1[_0x31ea33(0x17d)]=_0x26057b[_0x53d8f1[_0x31ea33(0xc0)]]);}),_0x247ef0[_0x58e966(0x20a)]({'date':_0x553e15[_0x58e966(0xd4)],'eur':_0x553e15[_0x58e966(0x122)],'usd':_0x553e15[_0x58e966(0x131)],'offset':_0x4d6114[_0x2293ca],'netoffset':_0xace0f1,'coins':_0x553e15[_0x58e966(0x107)]});});}return _0x247ef0;}function emitPerformance(_0x393674){const _0x402824=_0x12375b;_0x393674[_0x402824(0xcc)]!==0x0?(proxyEmit(_0x402824(0x1f4),_0x393674),lastPerformanceEmitted=getDate()):proxyEmit(_0x402824(0x1f4),[]);}function getPerf(_0x5120a7,_0x4236e6){const _0xa47946=_0x12375b;let _0x158ad0=0x0,_0x4557e2=0x0,_0x1ea4f3=0x0;_0x5120a7[_0xa47946(0x107)][_0xa47946(0xe0)](_0x2c1b18=>{const _0x41d74b=_0xa47946;_0x158ad0+=_0x2c1b18[_0x41d74b(0x209)]*_0x2c1b18[_0x41d74b(0x205)];});_0x4236e6&&(_0x158ad0+=_0x5120a7[_0xa47946(0x180)]);if(config[_0xa47946(0xce)]==='BTC'||config[_0xa47946(0xce)]===_0xa47946(0xbb))_0x4557e2=_0x158ad0*_0x5120a7[_0xa47946(0x122)],_0x1ea4f3=_0x158ad0*_0x5120a7[_0xa47946(0x131)];else{if(usdBasecoins[_0xa47946(0x1b0)](config[_0xa47946(0xce)]))_0x4557e2=_0x158ad0*_0x5120a7[_0xa47946(0x122)]/_0x5120a7[_0xa47946(0x131)],_0x1ea4f3=_0x158ad0;else config[_0xa47946(0xce)]===_0xa47946(0xf1)&&(_0x4557e2=_0x158ad0,_0x1ea4f3=_0x158ad0*_0x5120a7['usd']/_0x5120a7[_0xa47946(0x122)]);}return[_0x158ad0,_0x4557e2,_0x1ea4f3];}function getKPIs(_0x1f9447,_0x5c08c0=_0x12375b(0xf1)){const _0x25f892=_0x12375b,_0x2c7ea4=config[_0x25f892(0xce)],_0x44f5a2=lastBalances,_0x3c1e22=currentCoins,_0x4dd802=getNormalizedPerformance(),_0x5d6bb6=_0x1f9447===_0x25f892(0xce)?_0x2c7ea4:_0x1f9447===_0x25f892(0x16c)||_0x1f9447===_0x25f892(0x189)?_0x5c08c0:'Net\x20'+_0x2c7ea4,_0x3a3ec9=_0x1f9447===_0x25f892(0x14c)?_0x25f892(0x111):_0x1f9447===_0x25f892(0x189)?_0x25f892(0x111):_0x5d6bb6+'\x20value',_0x2c19db=_0x1f9447==='net-basecoin'||_0x1f9447===_0x25f892(0x189)?_0x25f892(0x111):_0x5d6bb6+_0x25f892(0xf7);let _0x3709f2=0x0;_0x3c1e22[_0x25f892(0xe0)](_0x362bed=>{const _0x31ce38=_0x25f892;_0x3709f2+=_0x362bed[_0x31ce38(0x209)]*_0x362bed[_0x31ce38(0x138)];});if(_0x1f9447===_0x25f892(0x16c)||_0x1f9447===_0x25f892(0x189)){if(_0x2c7ea4==='BTC'||_0x2c7ea4===_0x25f892(0xbb))_0x3709f2=_0x3709f2*(_0x5c08c0===_0x25f892(0xf1)?_0x44f5a2[_0x25f892(0x122)]:_0x44f5a2[_0x25f892(0x131)]);else{if(usdBasecoins['includes'](_0x2c7ea4))_0x3709f2=_0x3709f2*(_0x5c08c0===_0x25f892(0xf1)?_0x44f5a2[_0x25f892(0x122)]/_0x44f5a2[_0x25f892(0x131)]:0x1);else _0x2c7ea4===_0x25f892(0xf1)&&(_0x3709f2=_0x3709f2*(_0x5c08c0===_0x25f892(0xf1)?0x1:_0x44f5a2[_0x25f892(0x131)]/_0x44f5a2['eur']));}}let _0x3218d7;if(_0x3709f2!==0x0){if(_0x1f9447===_0x25f892(0xce))_0x3218d7=(_0x3709f2/startingBalances[_0x25f892(0xce)]-0x1)*0x64;else{if(_0x5c08c0===_0x25f892(0xf1))_0x3218d7=(_0x3709f2/startingBalances['eur']-0x1)*0x64;else _0x3218d7=(_0x3709f2/startingBalances[_0x25f892(0x131)]-0x1)*0x64;}let _0x5d3006=0x0;if(startingBalances[_0x25f892(0x107)])_0x3c1e22['forEach'](_0x200139=>{const _0x211771=_0x25f892;let _0x33b583=startingBalances[_0x211771(0x107)]['find'](_0x40ff35=>_0x40ff35[_0x211771(0xc0)]===_0x200139[_0x211771(0xc0)]);if(_0x33b583&&_0x33b583['coin']&&_0x200139[_0x211771(0x209)]!==0x0)_0x5d3006+=_0x33b583[_0x211771(0x209)]*_0x200139[_0x211771(0x138)];});let _0x439d81=0x0;if(_0x4dd802['length']!==0x0){let _0x254ebc=_0x4dd802[_0x4dd802['length']-0x1];_0x439d81=_0x254ebc[_0x25f892(0x96)];}_0x5d3006-=_0x439d81;_0x1f9447==='net-basecoin'&&(_0x3218d7=(_0x3709f2-_0x5d3006)/startingBalances['basecoin']*0x64,_0x3709f2=_0x3709f2-_0x5d3006);if(_0x1f9447===_0x25f892(0x189)){let _0x53cae2=_0x5c08c0===_0x25f892(0xf1)?startingBalances[_0x25f892(0x122)]:startingBalances[_0x25f892(0x131)];if(_0x2c7ea4===_0x25f892(0x19f)||_0x2c7ea4==='ETH')_0x5d3006=_0x5c08c0===_0x25f892(0xf1)?_0x5d3006*_0x44f5a2[_0x25f892(0x122)]:_0x5d3006*_0x44f5a2[_0x25f892(0x131)];else{if(usdBasecoins[_0x25f892(0x1b0)](_0x2c7ea4))_0x5d3006=_0x5c08c0==='EUR'?_0x5d3006*_0x44f5a2[_0x25f892(0x122)]/_0x44f5a2[_0x25f892(0x131)]:_0x5d3006;else _0x2c7ea4===_0x25f892(0xf1)&&(_0x5d3006=_0x5c08c0===_0x25f892(0xf1)?_0x5d3006:_0x5d3006*_0x44f5a2[_0x25f892(0x131)]/_0x44f5a2[_0x25f892(0x122)]);}_0x3218d7=(_0x3709f2-_0x5d3006)/_0x53cae2*0x64,_0x3709f2=_0x3709f2-_0x5d3006;}if(_0x3218d7){if(_0x3218d7<0x64)_0x3218d7=_0x3218d7[_0x25f892(0x17e)](0x2);else{if(_0x3218d7<0x3e8)_0x3218d7=_0x3218d7[_0x25f892(0x17e)](0x1);else _0x3218d7=_0x3218d7['toFixed'](0x0);}}else _0x3218d7=Number('0')[_0x25f892(0x17e)](0x2);if(_0x3709f2){if(Math[_0x25f892(0xd7)](_0x3709f2)<0.000001)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x2);else{if(Math[_0x25f892(0xd7)](_0x3709f2)<0.1)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x6);else{if(Math[_0x25f892(0xd7)](_0x3709f2)<0x1)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x5);else{if(Math[_0x25f892(0xd7)](_0x3709f2)<0xa)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x4);else{if(Math[_0x25f892(0xd7)](_0x3709f2)<0x64)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x3);else{if(Math[_0x25f892(0xd7)](_0x3709f2)<0x3e8)_0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x2);else _0x3709f2=_0x3709f2[_0x25f892(0x17e)](0x2);}}}}}}else _0x3709f2=Number('0')[_0x25f892(0x17e)](0x2);}else _0x3218d7=Number('0')[_0x25f892(0x17e)](0x2);return{'value':_0x3709f2,'change':_0x3218d7,'leftTxt':_0x3a3ec9,'rightTxt':_0x2c19db};}async function getStartingBalances(_0x9ce5a0,_0x44d51c=!![]){const _0x2a3e1e=_0x12375b;if(_0x9ce5a0[_0x2a3e1e(0xcc)]!==0x0){const [_0x2d71ca,_0x3be88a,_0x12a96a]=getPerf(_0x9ce5a0[0x0],!![]);let _0x3ec2f5=[];config[_0x2a3e1e(0xb1)][_0x2a3e1e(0xe0)](_0x307be7=>{const _0x27e4fd=_0x2a3e1e;let _0x1b6025=0x0,_0x3d0ec5;config[_0x27e4fd(0xe7)][_0x27e4fd(0xe0)](_0xfb0f9e=>{const _0x32e17a=_0x27e4fd;let _0x4ee212=_0xfb0f9e['changes'][_0x32e17a(0x113)](_0x126018=>_0x126018['coin']==_0x307be7[_0x32e17a(0xc0)]);if(_0x4ee212){_0x1b6025+=_0x4ee212[_0x32e17a(0x209)];if(!_0x3d0ec5)_0x3d0ec5=_0x4ee212[_0x32e17a(0x205)];}}),_0x3ec2f5[_0x27e4fd(0x20a)]({'coin':_0x307be7[_0x27e4fd(0xc0)],'number':_0x1b6025,'initialprice':_0x3d0ec5});});const _0x310411={'basecoin':_0x2d71ca,'eur':_0x3be88a,'usd':_0x12a96a,'coins':_0x3ec2f5};if(_0x44d51c)proxyEmit('starting-balances',_0x310411);startingBalances=_0x310411;}}function headlessMode(_0x4b1fdc){const _0x5c5dcc=_0x12375b;let _0x5c0d8d=_0x4b1fdc['portfolio'],_0x5c2beb=_0x4b1fdc[_0x5c5dcc(0x9a)],_0x11440e=[];for(let _0x5e7f1e of _0x5c0d8d){if(_0x5e7f1e[_0x5c5dcc(0xc0)]!=config[_0x5c5dcc(0xce)]){if(_0x5e7f1e['delta']>=_0x5c2beb/0x64){if(_0x5e7f1e[_0x5c5dcc(0xbe)])_0x11440e[_0x5c5dcc(0x20a)](_0x5e7f1e);}else{if(_0x5e7f1e[_0x5c5dcc(0xf2)]<=-_0x5c2beb/0x64){if(_0x5e7f1e[_0x5c5dcc(0xbe)])_0x11440e[_0x5c5dcc(0x20a)](_0x5e7f1e);}}}}_0x11440e[_0x5c5dcc(0xcc)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x11440e[_0x5c5dcc(0xe0)](_0x643acb=>{const _0xdd4414=_0x5c5dcc;logger[_0xdd4414(0x16a)]('Trigger:\x20'+_0x643acb[_0xdd4414(0xc0)]+'\x20'+_0x643acb[_0xdd4414(0x209)]+'\x20'+_0x643acb[_0xdd4414(0x138)]+'\x20'+_0x643acb[_0xdd4414(0x160)]+'%\x20'+_0x643acb[_0xdd4414(0xef)]+'%\x20'+(0x64*_0x643acb[_0xdd4414(0xf2)])[_0xdd4414(0x17e)](0x2)+_0xdd4414(0x94)+_0x5c2beb[_0xdd4414(0x17e)](0x2)+'%)');}),placeOrder(_0x11440e));}function notifyBalance(_0x340ba2){const _0x12c0a1=_0x12375b;let _0x2c3eee=_0x340ba2['portfolio'],_0x2202ba=_0x340ba2[_0x12c0a1(0x9a)],_0x3f01cf=[];for(let _0x566489 of _0x2c3eee){if(_0x566489['coin']!=config[_0x12c0a1(0xce)]){if(_0x566489[_0x12c0a1(0xf2)]>=_0x2202ba/0x64){if(_0x566489['valid'])_0x3f01cf['push'](_0x566489);}else{if(_0x566489[_0x12c0a1(0xf2)]<=-_0x2202ba/0x64){if(_0x566489[_0x12c0a1(0xbe)])_0x3f01cf[_0x12c0a1(0x20a)](_0x566489);}}}}if(_0x3f01cf[_0x12c0a1(0xcc)]>0x0){let _0x4c5932=_0x3f01cf[_0x12c0a1(0x186)](_0x470c19=>_0x470c19[_0x12c0a1(0xc0)]);_0x4c5932[_0x12c0a1(0xbf)]();let _0x544ea2=_0x4c5932[_0x12c0a1(0x11e)](',\x20');if(!lastCoinsToBalance)logHistory(_0x12c0a1(0x17a),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x544ea2;}}function symbolToCoin(_0x3c4b33){const _0x43c4bd=_0x12375b;let _0x76228e;if(_0x3c4b33['includes']('/'+config[_0x43c4bd(0xce)]))_0x76228e=_0x3c4b33[_0x43c4bd(0xad)]('/'+config[_0x43c4bd(0xce)],'');if(_0x3c4b33[_0x43c4bd(0x1b0)](config[_0x43c4bd(0xce)]+'/'))_0x76228e=_0x3c4b33[_0x43c4bd(0xad)](config[_0x43c4bd(0xce)]+'/','');return _0x76228e;}async function unlockOrders(){const _0x379279=_0x12375b;if(allOrdersPlaced&&lockOrders==ORDERS[_0x379279(0xb7)]){logger[_0x379279(0x16a)](_0x379279(0x210)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x52ec3b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x52ec3b,validateOrdersState=_0x379279(0x17d),persistOpenOrders([]),lockOrders=ORDERS[_0x379279(0x118)],logger[_0x379279(0x16a)](_0x379279(0x1a3));}}async function validateOrders(_0x5eebcf){const _0x42585c=_0x12375b;if(_0x5eebcf)validateOrdersState=_0x5eebcf;logger[_0x42585c(0x16a)](_0x42585c(0x105)+validateOrdersState+_0x42585c(0x1d9)+(lockOrders==0x1?_0x42585c(0x136):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x585235=[],_0x56f91e=config['ordertype']==_0x42585c(0x147)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x42585c(0xb7)])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x42585c(0xe0)](_0x45cfa7=>{const _0x41a16d=_0x42585c;let _0x25aff7=![];_0x45cfa7['filled']>0x0&&(_0x25aff7=!![]),_0x585235[_0x41a16d(0x20a)](_0x25aff7),_0x25aff7&&config['ordertype']!=_0x41a16d(0x147)&&logHistory(_0x41a16d(0xba),_0x41a16d(0x1ae)+_0x45cfa7[_0x41a16d(0x1e6)]+'\x20'+_0x45cfa7['side']+'\x20#'+formatResult(_0x45cfa7['filled'],0x8)+'\x20@'+formatResult(_0x45cfa7['price'],0x8));}),_0x585235[_0x42585c(0xe0)]((_0x5edb25,_0x160b9f)=>{const _0xeda07e=_0x42585c;if(_0x5edb25)lastOrders[_0xeda07e(0x109)](_0x160b9f,0x1);}),persistOpenOrders(lastOrders);const _0x4df193=coolingDown?_0x42585c(0x18e):_0x42585c(0x20b);if(validateOrdersState=='initial'){validateOrdersState=_0x42585c(0x116);if(_0x585235[_0x42585c(0x1b0)](![])){if(config[_0x42585c(0x1d6)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x42585c(0x116)){if(_0x585235[_0x42585c(0x1b0)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x42585c(0x147)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x42585c(0x1af))_0x585235[_0x42585c(0x1b0)](![])&&(config['ordertype']==_0x42585c(0x147)?logHistory('success',_0x42585c(0xe1)+Math[_0x42585c(0x134)](_0x56f91e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4df193):(await cancelOrders(),logHistory('success',_0x42585c(0x12a)+Math['round'](_0x56f91e*validateOrderInterval/0xea60)+_0x42585c(0xe2)+_0x4df193))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x42585c(0x1d6)]!='market')logHistory(_0x42585c(0x18d),_0x42585c(0x14f)+_0x4df193);await unlockOrders();}}}}}async function cancelOrders(){const _0x5b5451=_0x12375b;lastOrders[_0x5b5451(0xe0)](async _0x263810=>{const _0x19d812=_0x5b5451;try{const _0x297528=await exchange[_0x19d812(0x1ee)](_0x263810[_0x19d812(0xed)],_0x263810[_0x19d812(0x1e6)]);}catch(_0x5052d1){if(_0x5052d1[_0x19d812(0x1c4)]()[_0x19d812(0x1b0)](_0x19d812(0x1d4))){}else await handleError(_0x5052d1,_0x19d812(0x120));}});}async function initCoinResults(_0xf023fc){const _0x4c213f=_0x12375b;_0xf023fc?logger[_0x4c213f(0x16a)]('Resetting\x20coin\x20results:\x20'+_0xf023fc):logger[_0x4c213f(0x16a)]('Initializing\x20coin\x20results'),config['portfolio'][_0x4c213f(0xe0)](_0x311e32=>{const _0x173170=_0x4c213f;if(!_0x311e32[_0x173170(0x192)]&&_0x311e32[_0x173170(0xc0)]!=config[_0x173170(0xce)]){const _0x469265=currentCoins[_0x173170(0x113)](_0x19d844=>_0x19d844['coin']==_0x311e32[_0x173170(0xc0)]),_0xee5e94=global[_0x173170(0x1b2)][noslash(_0x311e32[_0x173170(0x1e6)])];let _0x4ecdf0=_0x469265?_0x469265['number']:null,_0x333d10=_0x311e32[_0x173170(0x1cf)]?0x1/_0xee5e94:_0xee5e94,_0x28401b;config[_0x173170(0xe7)][_0x173170(0xe0)](_0x44e5c0=>{const _0x5deadb=_0x173170;!_0x28401b&&(_0x28401b=_0x44e5c0[_0x5deadb(0xff)][_0x5deadb(0x113)](_0x30a277=>_0x30a277[_0x5deadb(0xc0)]==_0x311e32[_0x5deadb(0xc0)]),_0x28401b&&(_0x4ecdf0=_0x28401b[_0x5deadb(0x209)],_0x333d10=_0x28401b['price']));});let _0x165681=dbCoinResults[_0x173170(0x195)](_0x173170(0x107))[_0x173170(0x113)]({'coin':_0x311e32[_0x173170(0xc0)]})['value']();if(!_0x165681){const _0x447f4c={'coin':_0x311e32[_0x173170(0xc0)],'number':_0x4ecdf0,'breakeven':_0x333d10,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x173170(0x195)](_0x173170(0x107))[_0x173170(0x20a)](_0x447f4c)['write']();}else{if(_0xf023fc&&_0x311e32[_0x173170(0xc0)]==_0xf023fc){const _0x2dfc12={'coin':_0x311e32[_0x173170(0xc0)],'number':_0x4ecdf0,'breakeven':_0x333d10,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x173170(0x195)](_0x173170(0x107))[_0x173170(0x113)]({'coin':_0x311e32[_0x173170(0xc0)]})[_0x173170(0x10a)](_0x2dfc12)[_0x173170(0xb6)]();}}}});}async function updateCoinResults(_0x459382,_0x606e3c=![]){const _0x2ae858=_0x12375b;let _0x5ebdcf,_0x11b0f9,_0x3fa97c,_0x1d4d81,_0x53492b,_0x4753e9,_0x88d962=dbCoinResults[_0x2ae858(0x195)](_0x2ae858(0x107))[_0x2ae858(0x113)]({'coin':_0x459382['coin']})['value'](),_0x2de52a=![];_0x88d962&&Object[_0x2ae858(0x1dd)](_0x88d962)[_0x2ae858(0xe0)](([_0x20b2b7,_0x1fb6c1])=>{if(_0x1fb6c1==null)_0x2de52a=!![];});(!_0x88d962||_0x2de52a)&&(await initCoinResults(_0x459382['coin']),_0x88d962=dbCoinResults['get'](_0x2ae858(0x107))['find']({'coin':_0x459382[_0x2ae858(0xc0)]})['value']());_0x459382[_0x2ae858(0x1cf)]&&(_0x4753e9={'filled':_0x459382['filled']*_0x459382['price'],'amount':_0x459382[_0x2ae858(0x1dc)]*_0x459382[_0x2ae858(0x205)],'side':_0x459382['side']==_0x2ae858(0x21a)?'buy':_0x2ae858(0x21a),'price':0x1/_0x459382[_0x2ae858(0x205)]},_0x459382={..._0x459382,..._0x4753e9});_0x606e3c?_0x11b0f9=_0x459382[_0x2ae858(0xf6)]==_0x2ae858(0x15c)?_0x88d962[_0x2ae858(0x209)]+_0x459382[_0x2ae858(0x1dc)]:_0x88d962[_0x2ae858(0x209)]-_0x459382[_0x2ae858(0x1dc)]:_0x11b0f9=await getCoinNumber(_0x459382[_0x2ae858(0xc0)]);if(_0x459382['fee']&&_0x459382['fee'][_0x2ae858(0x1a7)]==config[_0x2ae858(0xce)])_0x5ebdcf=_0x459382[_0x2ae858(0x16f)][_0x2ae858(0xfa)];else{if(_0x459382[_0x2ae858(0x16f)]&&_0x459382[_0x2ae858(0x16f)][_0x2ae858(0x1a7)]==_0x2ae858(0x18b)&&!_0x606e3c)_0x5ebdcf=_0x459382[_0x2ae858(0x16f)][_0x2ae858(0xfa)]*global['ticker'][_0x2ae858(0x18b)+config[_0x2ae858(0xce)]];else _0x5ebdcf=defaultFee*_0x459382['filled']*_0x459382[_0x2ae858(0x205)];}_0x459382[_0x2ae858(0xf6)]==_0x2ae858(0x15c)?(_0x3fa97c=_0x11b0f9!=0x0?(_0x88d962['breakeven']*_0x88d962[_0x2ae858(0x209)]+_0x459382[_0x2ae858(0x205)]*(_0x11b0f9-_0x88d962[_0x2ae858(0x209)])+_0x5ebdcf)/_0x11b0f9:0x0,_0x1d4d81=_0x88d962[_0x2ae858(0x124)]):(_0x3fa97c=_0x11b0f9!=0x0?(_0x88d962[_0x2ae858(0xc6)]*_0x88d962[_0x2ae858(0x209)]-_0x459382[_0x2ae858(0x205)]*(_0x88d962[_0x2ae858(0x209)]-_0x11b0f9)+_0x5ebdcf)/_0x11b0f9:0x0,_0x1d4d81=_0x88d962[_0x2ae858(0x124)]+(_0x459382[_0x2ae858(0x205)]-_0x88d962['breakeven'])*_0x459382['filled']);_0x53492b=(_0x459382['price']-_0x3fa97c-_0x5ebdcf/_0x459382[_0x2ae858(0x1dc)])*_0x11b0f9;let _0x119618={'coin':_0x459382[_0x2ae858(0xc0)],'number':_0x11b0f9,'breakeven':formatResult(_0x3fa97c,0x8),'realized':formatResult(_0x1d4d81,0x8),'unrealized':formatResult(_0x53492b,0x8),'fees':formatResult(_0x88d962[_0x2ae858(0xa5)]+_0x5ebdcf,0x8),'sells':_0x459382[_0x2ae858(0xf6)]==_0x2ae858(0x21a)?_0x88d962['sells']+0x1:_0x88d962['sells'],'buys':_0x459382[_0x2ae858(0xf6)]==_0x2ae858(0x15c)?_0x88d962['buys']+0x1:_0x88d962[_0x2ae858(0x198)]};dbCoinResults[_0x2ae858(0x195)]('coins')[_0x2ae858(0x113)]({'coin':_0x459382[_0x2ae858(0xc0)]})['assign'](_0x119618)[_0x2ae858(0xb6)]();if(!_0x606e3c){if(_0x459382[_0x2ae858(0x16f)]&&_0x459382[_0x2ae858(0x16f)][_0x2ae858(0x1a7)]==_0x2ae858(0x18b)){const _0x441854=currentCoins[_0x2ae858(0x113)](_0x448726=>_0x448726[_0x2ae858(0xc0)]==_0x2ae858(0x18b));if(_0x441854){let _0x5d8c14=dbCoinResults[_0x2ae858(0x195)](_0x2ae858(0x107))['find']({'coin':_0x2ae858(0x18b)})[_0x2ae858(0x194)]();_0x119618={..._0x5d8c14,'number':_0x441854['number']},dbCoinResults['get'](_0x2ae858(0x107))[_0x2ae858(0x113)]({'coin':_0x2ae858(0x18b)})['assign'](_0x119618)[_0x2ae858(0xb6)]();}}}}async function placeOrder(_0x44ba22){const _0x257ce5=_0x12375b,_0x5e57d7=config['ordertype']==_0x257ce5(0x147)?_0x257ce5(0x147):_0x257ce5(0x1ac);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x22bebc=![];lastOrders=[];for(const _0x14c77a of _0x44ba22){let _0x5b4ec9,_0x38cb81,_0x379979,_0x4fb3a5,_0x1e5fdb,_0x152ea5=_0x14c77a['symbol'];try{const _0x266828=await exchange['fetchTicker'](_0x152ea5);_0x5b4ec9=_0x14c77a[_0x257ce5(0x1cf)]?0x1/_0x14c77a[_0x257ce5(0x138)]:_0x14c77a[_0x257ce5(0x138)],_0x38cb81=_0x266828[_0x257ce5(0xc2)],_0x379979=_0x266828[_0x257ce5(0x1e1)];_0x14c77a[_0x257ce5(0x1cf)]?(_0x4fb3a5=_0x14c77a[_0x257ce5(0xf6)]==_0x257ce5(0x15c)?_0x257ce5(0x21a):_0x257ce5(0x15c),_0x1e5fdb=Math[_0x257ce5(0xd7)](_0x14c77a[_0x257ce5(0x106)])/_0x5b4ec9):(_0x4fb3a5=_0x14c77a[_0x257ce5(0xf6)],_0x1e5fdb=Math[_0x257ce5(0xd7)](_0x14c77a['trade']));_0x5e57d7==_0x257ce5(0x1ac)&&(config[_0x257ce5(0x1d6)]==_0x257ce5(0x179)&&(_0x5b4ec9=_0x4fb3a5=='buy'?_0x38cb81:_0x379979),config[_0x257ce5(0x1d6)]==_0x257ce5(0xc3)&&(_0x5b4ec9=_0x4fb3a5==_0x257ce5(0x15c)?_0x379979:_0x38cb81));_0x1e5fdb=formatResult(_0x1e5fdb,0x8),_0x5b4ec9=formatResult(_0x5b4ec9,0x8);const _0x464c39=_0x4fb3a5==_0x257ce5(0x21a)?config[_0x257ce5(0x1e7)]?String[_0x257ce5(0x142)]('0x'+config[_0x257ce5(0x1e7)])+'\x20':'':config[_0x257ce5(0x8f)]?String[_0x257ce5(0x142)]('0x'+config[_0x257ce5(0x8f)])+'\x20':'',_0x59fcc1=_0x5e57d7==_0x257ce5(0x147)?_0x257ce5(0xf9):config['ordertype']=='limit-high'?'Limit\x20(high-margin)':_0x257ce5(0xa3),_0x1f4ca5=(Math['floor'](Math['random']()*0x35a4e900)+0x5f5e100)[_0x257ce5(0x1c4)]();lastOrders[_0x257ce5(0x20a)]({'customId':_0x1f4ca5,'symbol':_0x152ea5,'coin':_0x14c77a[_0x257ce5(0xc0)],'amount':_0x1e5fdb,'price':_0x5b4ec9,'side':_0x4fb3a5,'reverse':_0x14c77a[_0x257ce5(0x1cf)],'filled':0x0});if(_0x5e57d7==_0x257ce5(0x147))logHistory(_0x257ce5(0xba),''+_0x464c39+_0x59fcc1+_0x257ce5(0x187)+_0x152ea5+'\x20'+_0x4fb3a5+'\x20#'+formatResult(_0x1e5fdb,0x8)+'\x20@'+formatResult(_0x5b4ec9,0x8));else logHistory(_0x257ce5(0xba),''+_0x464c39+_0x59fcc1+_0x257ce5(0x187)+_0x152ea5+'\x20'+_0x4fb3a5+'\x20#'+formatResult(_0x1e5fdb,0x8)+'\x20@'+formatResult(_0x5b4ec9,0x8));let _0x3f7dc4;_0x5e57d7==_0x257ce5(0x147)?_0x4fb3a5=='buy'&&['Bybit','Bitget',_0x257ce5(0x135),_0x257ce5(0xee),_0x257ce5(0x172)][_0x257ce5(0x1b0)](config[_0x257ce5(0x1ce)])?_0x3f7dc4=await exchange[_0x257ce5(0x112)](_0x152ea5,_0x5e57d7,_0x4fb3a5,_0x1e5fdb,_0x5b4ec9):_0x3f7dc4=await exchange[_0x257ce5(0x112)](_0x152ea5,_0x5e57d7,_0x4fb3a5,_0x1e5fdb,undefined):_0x3f7dc4=await exchange[_0x257ce5(0x112)](_0x152ea5,_0x5e57d7,_0x4fb3a5,_0x1e5fdb,_0x5b4ec9);logger[_0x257ce5(0x16a)]('ID:\x20'+_0x3f7dc4['id']+'\x20|\x20Custom\x20ID:\x20'+_0x1f4ca5);const _0x15a67=lastOrders['length']-0x1;if(_0x15a67>=0x0&&lastOrders[_0x15a67][_0x257ce5(0x15d)]==_0x1f4ca5){lastOrders[_0x15a67]['orderId']=_0x3f7dc4['id'];if(_0x3f7dc4[_0x257ce5(0x99)])lastOrders[_0x15a67][_0x257ce5(0x99)]=_0x3f7dc4[_0x257ce5(0x99)];if(_0x3f7dc4[_0x257ce5(0x205)])lastOrders[_0x15a67][_0x257ce5(0x205)]=_0x3f7dc4[_0x257ce5(0x205)];lastOrders[_0x15a67][_0x257ce5(0x16f)]=_0x3f7dc4[_0x257ce5(0x16f)];}if(config[_0x257ce5(0x1fb)]!=0x0){let _0x29cd76=null;if(cooldownTracker[_0x257ce5(0xcc)]==config['cooldown']-0x1)_0x29cd76=cooldownTracker['shift']();const _0x5b0b90=getTimeStamp();cooldownTracker['push'](_0x5b0b90);if(_0x29cd76){const _0x34e8f0=fns[_0x257ce5(0x15f)](new Date(_0x5b0b90),new Date(_0x29cd76));if(_0x34e8f0<cooldownInterval){logHistory(_0x257ce5(0x19c),_0x257ce5(0x1d1)+config['cooldown']+_0x257ce5(0xb0)+cooldownInterval/0x3c+_0x257ce5(0x208)+cooldownPeriod/(0xe10*0x3e8)+_0x257ce5(0x207)),coolingDown=!![];break;}}}}catch(_0x2f9980){if(_0x2f9980[_0x257ce5(0x1c4)]()[_0x257ce5(0x1b0)](_0x257ce5(0x115)))lastOrders=lastOrders[_0x257ce5(0x1bb)](_0x5ce0f8=>_0x5ce0f8['symbol']!=_0x152ea5),logHistory(_0x257ce5(0x19c),_0x257ce5(0x1f8)+_0x152ea5),_0x22bebc=!![];else{if(_0x2f9980[_0x257ce5(0x1c4)]()[_0x257ce5(0x1b0)](_0x257ce5(0x168)))lastOrders=lastOrders['filter'](_0x2afeb6=>_0x2afeb6[_0x257ce5(0x1e6)]!=_0x152ea5),logHistory('error',_0x257ce5(0x146)+_0x152ea5),_0x22bebc=!![];else{if(_0x2f9980['toString']()[_0x257ce5(0x1b0)](_0x257ce5(0xcd)))lastOrders=lastOrders['filter'](_0x55cb8=>_0x55cb8[_0x257ce5(0x1e6)]!=_0x152ea5),logHistory(_0x257ce5(0x19c),_0x257ce5(0xa0)+_0x152ea5),logger[_0x257ce5(0x16a)](_0x2f9980),_0x22bebc=!![];else _0x2f9980[_0x257ce5(0x1c4)]()[_0x257ce5(0x1b0)](_0x257ce5(0x117))?(lastOrders=lastOrders['filter'](_0xb0c0e5=>_0xb0c0e5[_0x257ce5(0x1e6)]!=_0x152ea5),logHistory(_0x257ce5(0x19c),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x152ea5),_0x22bebc=!![]):(lastOrders=lastOrders[_0x257ce5(0x1bb)](_0x79fe63=>_0x79fe63[_0x257ce5(0x1e6)]!=_0x152ea5),await handleError(_0x2f9980,_0x257ce5(0x1d2),_0x152ea5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x257ce5(0xcc)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x322642=config[_0x257ce5(0x1d6)]==_0x257ce5(0x147)?validateOrderTimeout*0x3c*0x3e8:config[_0x257ce5(0x148)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x322642);}else unlockOrders();_0x22bebc&&config[_0x257ce5(0x114)]&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x257ce5(0x18d),_0x257ce5(0x14e)));}else{if(coolingDown)!config[_0x257ce5(0x114)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x257ce5(0x114)]&&(config[_0x257ce5(0x1d6)]==_0x257ce5(0x147)?logHistory(_0x257ce5(0x19c),_0x257ce5(0x13a)):logHistory(_0x257ce5(0x19c),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x36fe7e){const _0x5d76b5=_0x12375b,_0x2fe3e6={...config,'openOrders':_0x36fe7e};let _0x2294a0=dbConfig[_0x5d76b5(0x195)]('bot')[_0x5d76b5(0x113)]({'botID':botID})[_0x5d76b5(0x194)]();_0x2294a0&&dbConfig[_0x5d76b5(0x195)](_0x5d76b5(0x1e4))[_0x5d76b5(0x113)]({'botID':botID})['assign'](_0x2fe3e6)['write']();}function restoreOrders(){const _0x40fccf=_0x12375b;let _0x45d2bd;config['openOrders']&&allOpenOrders['forEach'](_0x372509=>{const _0x56b294=_0x2cd2,_0x2cb7b4=config[_0x56b294(0x139)]['find'](_0x204565=>_0x204565[_0x56b294(0xed)]==_0x372509['id']);_0x2cb7b4&&(lastOrders[_0x56b294(0x20a)](_0x2cb7b4),_0x45d2bd=_0x372509[_0x56b294(0x1ef)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x40fccf(0xb7)],validateOrdersState=_0x40fccf(0x116),allOrdersPlaced=!![];const _0x4ff4e5=new Date()[_0x40fccf(0x1d0)](),_0x440da2=config[_0x40fccf(0x1d6)]==_0x40fccf(0x147)?validateOrderTimeout*0x3c*0x3e8:config[_0x40fccf(0x148)]*0x3c*0x3e8;if(_0x45d2bd+_0x440da2>_0x4ff4e5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2567a8=_0x40fccf;validateOrders(_0x2567a8(0x1af));},_0x45d2bd+_0x440da2-_0x4ff4e5);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x407c9d=_0x12375b;if(!coinsLoaded){process[_0x407c9d(0x17c)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3c3811=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x24f941='';if(config[_0x407c9d(0x14b)])_0x24f941=_0x407c9d(0x1c5)+config['botname']+_0x407c9d(0x125);else _0x24f941=_0x407c9d(0x13f)+botID+_0x407c9d(0x125);const _0x5b5e79=getKPIs(_0x407c9d(0xce)),_0x39b7a4=getKPIs(_0x407c9d(0x16c),config[_0x407c9d(0x16c)]),_0x7bf9c7=getKPIs(_0x407c9d(0x14c)),_0x4f4e89=getKPIs(_0x407c9d(0x189),config[_0x407c9d(0x16c)]);_0x24f941+='<pre>',_0x24f941+=_0x5b5e79[_0x407c9d(0x10d)]+_0x407c9d(0x15b)+_0x5b5e79['value']+'\x0a',_0x24f941+=_0x5b5e79['rightTxt']+':\x20'+_0x5b5e79['change']+'%\x0a',_0x24f941+=_0x39b7a4[_0x407c9d(0x10d)]+_0x407c9d(0x15b)+_0x39b7a4['value']+'\x0a',_0x24f941+=_0x39b7a4[_0x407c9d(0x12d)]+':\x20'+_0x39b7a4[_0x407c9d(0x14d)]+'%\x0a',_0x24f941+=_0x7bf9c7[_0x407c9d(0x10d)]+':\x20'+_0x7bf9c7[_0x407c9d(0x194)]+'\x20('+config[_0x407c9d(0xce)]+')\x0a',_0x24f941+=_0x7bf9c7[_0x407c9d(0x12d)]+':\x20'+_0x7bf9c7[_0x407c9d(0x14d)]+_0x407c9d(0x94)+config[_0x407c9d(0xce)]+')\x0a',_0x24f941+=_0x4f4e89[_0x407c9d(0x10d)]+':\x20'+_0x4f4e89[_0x407c9d(0x194)]+'\x20('+config[_0x407c9d(0x16c)]+')\x0a',_0x24f941+=_0x4f4e89[_0x407c9d(0x12d)]+':\x20'+_0x4f4e89[_0x407c9d(0x14d)]+_0x407c9d(0x94)+config[_0x407c9d(0x16c)]+')\x0a',_0x24f941+=_0x407c9d(0xf5),process[_0x407c9d(0x17c)]({'telegrammsg':_0x24f941},_0x238858=>{});}async function sendPortfolioTelegram(){const _0x16e2ea=_0x12375b;if(!coinsLoaded){process[_0x16e2ea(0x17c)]({'telegrammsg':_0x16e2ea(0x10e)},_0x4a416a=>{});return;}let _0x28e3c5='';if(config['showname'])_0x28e3c5=_0x16e2ea(0x1c5)+config[_0x16e2ea(0x128)]+_0x16e2ea(0x150);else _0x28e3c5=_0x16e2ea(0x13f)+botID+_0x16e2ea(0x150);_0x28e3c5+=_0x16e2ea(0x100),_0x28e3c5+='-------------------------------\x0a',_0x28e3c5+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x28e3c5+='-------------------------------\x0a',currentCoins[_0x16e2ea(0xe0)](_0x370343=>{const _0x1455ae=_0x16e2ea;_0x28e3c5+=_0x370343[_0x1455ae(0xc0)][_0x1455ae(0x19a)](0x7)+'|\x20'+formatPad(_0x370343[_0x1455ae(0x160)],0x2,0x6)+'|\x20'+formatPad(_0x370343[_0x1455ae(0xef)],0x2,0x6)+'|\x20'+formatPad(_0x370343[_0x1455ae(0xf2)]*0x64,0x2,0x6)+'\x0a';}),_0x28e3c5+=_0x16e2ea(0xf5),process[_0x16e2ea(0x17c)]({'telegrammsg':_0x28e3c5},_0xd03fe2=>{});}function formatPad(_0x1f5f02,_0x29772d,_0x5a6447){const _0x5149ab=_0x12375b,_0x51c4ad=formatResultString(_0x1f5f02,_0x29772d);return _0x51c4ad?_0x51c4ad[_0x5149ab(0x11f)](_0x5a6447):''[_0x5149ab(0x11f)](_0x5a6447);}function logHistory(_0x320023,_0x40d9db,_0x4e1c1e=''){const _0x56eb81=_0x12375b;logger[_0x56eb81(0x95)](''+_0x40d9db);let _0x30e6ce={'time':getTimeStamp(),'type':_0x320023,'event':_0x40d9db};dbLogs[_0x56eb81(0x195)](_0x56eb81(0x1fa))[_0x56eb81(0x20a)](_0x30e6ce)[_0x56eb81(0xb6)]();if(_0x4e1c1e=='')_0x4e1c1e=_0x40d9db;proxyEmit(_0x56eb81(0x1ad),{'log':_0x30e6ce,'summary':_0x4e1c1e}),process[_0x56eb81(0x17c)]({'telegram':{..._0x30e6ce,'botname':config[_0x56eb81(0x128)],'showname':config[_0x56eb81(0x14b)]}},_0x243d27=>{});}function emitHistory(_0x3bb767={}){const _0x4390f2=_0x12375b;Object[_0x4390f2(0xa2)](_0x3bb767)[_0x4390f2(0xcc)]==0x0&&(_0x3bb767={'type':['order','event'],'event':'','page':0x1});if(_0x3bb767[_0x4390f2(0x1f0)]['includes'](_0x4390f2(0x1ad)))_0x3bb767[_0x4390f2(0x1f0)][_0x4390f2(0x109)](_0x3bb767['type'][_0x4390f2(0xde)]('event'),0x1,_0x4390f2(0x19c),_0x4390f2(0x17a),'success');if(dbLogs['has'](_0x4390f2(0x1fa))[_0x4390f2(0x194)]()){let _0x273730=dbLogs[_0x4390f2(0x195)](_0x4390f2(0x1fa))['filter'](_0x22f839=>{const _0x32fe9a=_0x4390f2;if(_0x3bb767[_0x32fe9a(0x1f0)]['length']==0x0)return![];else return _0x3bb767[_0x32fe9a(0x1f0)][_0x32fe9a(0x1b0)](_0x22f839[_0x32fe9a(0x1f0)]);})[_0x4390f2(0x1bb)](_0x46ade3=>{const _0x44e26a=_0x4390f2;if(_0x3bb767[_0x44e26a(0x1ad)]=='')return!![];else return _0x46ade3[_0x44e26a(0x1ad)]['toLowerCase']()[_0x44e26a(0x1b0)](_0x3bb767[_0x44e26a(0x1ad)]['toLowerCase']());})[_0x4390f2(0x93)](_0x4390f2(0x199)),_0x3f0bd0=_0x273730['value']()['length'];_0x273730=_0x273730[_0x4390f2(0x1cf)]()[_0x4390f2(0x12c)]((_0x3bb767[_0x4390f2(0x1b4)]-0x1)*logPageSize,_0x3bb767[_0x4390f2(0x1b4)]*logPageSize-0x1)['reverse']()[_0x4390f2(0x194)](),proxyEmit(_0x4390f2(0x1ea),{'logs':_0x273730,'total':_0x3f0bd0});}else proxyEmit(_0x4390f2(0x1ea),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x480f33){const _0x30c80f=_0x12375b;if(dbLogs[_0x30c80f(0x11c)](_0x30c80f(0x1fa))[_0x30c80f(0x194)]()){const _0x255d2e=dbLogs[_0x30c80f(0x195)]('logs')[_0x30c80f(0x93)](_0x30c80f(0x199))[_0x30c80f(0x1bb)](_0x3e5b7d=>{const _0x42e1fe=_0x30c80f;return _0x3e5b7d[_0x42e1fe(0x1f0)]==_0x42e1fe(0xba);})[_0x30c80f(0x194)]();dbLogs[_0x30c80f(0x195)](_0x30c80f(0x1fa))[_0x30c80f(0xb8)]()[_0x30c80f(0xb6)](),dbLogs['get'](_0x30c80f(0x1fa))['assign'](_0x255d2e)[_0x30c80f(0xb6)](),emitHistory(_0x480f33);}}async function pauseBot(_0x47aee4=pauseBotInterval){const _0x3a389a=_0x12375b,_0x57f9ef=new Date()[_0x3a389a(0x1d0)]();if(!lastErrorShown||_0x57f9ef-lastErrorShown>=_0x47aee4){lastErrorShown=_0x57f9ef;!lastBotPause?(lastBotPause=_0x57f9ef,consecutivePauses=0x1):(_0x57f9ef-lastBotPause-_0x47aee4<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3a389a(0x17c)]({'stop':_0x3a389a(0x140)},_0x380be9=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3a389a(0x1d0)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x47aee4),botPaused=![],reset(!![]);}}}async function killBot(){const _0x36d7db=_0x12375b;botPaused=!![],await sleep(0x3e8),process[_0x36d7db(0x17c)]({'stop':_0x36d7db(0x1cb)},_0x5bc299=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x41718b,_0x407105){const _0x1ca842=_0x12375b;if(botPaused)return;const _0x4df4a6=config[_0x1ca842(0x1ce)]||_0x1ca842(0x1b3);if(_0x407105)logger['debug'](_0x1ca842(0xca)+_0x407105);const _0x50ba79=()=>{const _0x41b38a=_0x1ca842;loading[_0x41b38a(0x19c)]=!![],emitLoadingProgress();};if(_0x41718b[_0x1ca842(0x1c4)]()[_0x1ca842(0x1b0)](_0x1ca842(0x151)))logHistory(_0x1ca842(0x19c),_0x4df4a6+_0x1ca842(0xec)),_0x50ba79();else{if(_0x41718b['toString']()['includes'](_0x1ca842(0x1b6)))logHistory(_0x1ca842(0x19c),_0x4df4a6+_0x1ca842(0x181)),_0x50ba79();else _0x41718b[_0x1ca842(0x1c4)]()[_0x1ca842(0x1b0)](_0x1ca842(0x1bf))?(logHistory('error',_0x4df4a6+_0x1ca842(0xe4)),logHistory(_0x1ca842(0x19c),_0x1ca842(0xb9)),_0x50ba79()):await handleError(_0x41718b,null);}}async function handleError(_0x35195c,_0x134391,_0x695d6c=''){const _0x3128ef=_0x12375b;if(botPaused)return;const _0x4aa7b8=config[_0x3128ef(0x1ce)]||_0x3128ef(0x1b3);if(_0x134391)logger['debug'](_0x3128ef(0xca)+_0x134391);if(_0x35195c['toString']()[_0x3128ef(0x1b0)]('DDoSProtection')||_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)](_0x3128ef(0xea)))logHistory(_0x3128ef(0x19c),_0x4aa7b8+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x35195c['toString']()['includes']('ExchangeNotAvailable')||_0x35195c['toString']()[_0x3128ef(0x1b0)]('OnMaintenance'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x169)+pauseBotMsg),await pauseBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)]('RequestTimeout'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0xa9)+pauseBotMsg),await pauseBot();else{if(_0x35195c['toString']()['includes'](_0x3128ef(0x13e)))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x1fe)+pauseBotMsg),await pauseBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3128ef(0x19c),_0x3128ef(0xac)),logHistory(_0x3128ef(0x19c),_0x3128ef(0x1a5)),await killBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)]('InvalidNonce'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x13d)),logHistory('error',_0x3128ef(0x12e)),await pauseBot(0x3c);else{if(_0x35195c instanceof ccxt[_0x3128ef(0xcf)])logHistory('error',_0x4aa7b8+_0x3128ef(0x201)+pauseBotMsg),logger[_0x3128ef(0x16a)](_0x3128ef(0x1ed),_0x35195c),await pauseBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+'\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x35195c['toString']()[_0x3128ef(0x1b0)](_0x3128ef(0x1b6)))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x190)),logHistory('error',_0x3128ef(0x1a5)),await killBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)]('AuthenticationError'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x126)),logHistory(_0x3128ef(0x19c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x35195c['toString']()[_0x3128ef(0x1b0)]('PermissionDenied'))logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x206)),logHistory(_0x3128ef(0x19c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x35195c[_0x3128ef(0x1c4)]()[_0x3128ef(0x1b0)]('InsufficientFunds'))logHistory(_0x3128ef(0x19c),_0x3128ef(0xd1)+_0x695d6c);else _0x35195c instanceof ccxt[_0x3128ef(0x119)]?(logHistory(_0x3128ef(0x19c),_0x4aa7b8+_0x3128ef(0x10f)),logger['debug'](_0x3128ef(0x1ed),_0x35195c)):(logHistory(_0x3128ef(0x19c),_0x3128ef(0x217)+pauseBotMsg),logger[_0x3128ef(0x16a)](_0x3128ef(0x1ed),_0x35195c),await pauseBot());}}}}}}}}}}}}function formatResult(_0xb00c7b,_0x50f769){const _0x5f0fbf=_0x12375b;return parseFloat(_0xb00c7b[_0x5f0fbf(0x17e)](_0x50f769));}function formatResultTruncate(_0x192dae,_0x2400f5){const _0x108faf=_0x12375b;let _0x2bcf57=formatResultString(_0x192dae,0xa),_0x2b379a=_0x2bcf57[_0x108faf(0xde)]('.');return _0x2b379a!=-0x1&&(_0x2bcf57=_0x2bcf57[_0x108faf(0x12c)](0x0,_0x2b379a+_0x2400f5+0x1)),Number(_0x2bcf57);}function formatResultString(_0x7f1871,_0x27ba8c){const _0x184d7d=_0x12375b;let _0x180618;if(!(''+_0x7f1871)[_0x184d7d(0x1b0)]('e'))_0x180618=+(Math['round'](_0x7f1871+'e+'+_0x27ba8c)+'e-'+_0x27ba8c);else{let _0x1ed46c=(''+_0x7f1871)[_0x184d7d(0x1e3)]('e'),_0x17764f='';+_0x1ed46c[0x1]+_0x27ba8c>0x0&&(_0x17764f='+'),_0x180618=+(Math[_0x184d7d(0x134)](+_0x1ed46c[0x0]+'e'+_0x17764f+(+_0x1ed46c[0x1]+_0x27ba8c))+'e-'+_0x27ba8c);}return Number(_0x180618)[_0x184d7d(0x17e)](_0x27ba8c);}function getServerTime(){const _0xdd8640=_0x12375b,_0x3fa8dd=new Date();return _0x3fa8dd[_0xdd8640(0xbd)]()+'/'+(_0x3fa8dd[_0xdd8640(0x132)]()+0x1)[_0xdd8640(0x1c4)]()[_0xdd8640(0x11f)](0x2,'0')+'/'+_0x3fa8dd[_0xdd8640(0x19e)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3fa8dd[_0xdd8640(0xb2)]()[_0xdd8640(0x1c4)]()[_0xdd8640(0x11f)](0x2,'0')+':'+_0x3fa8dd[_0xdd8640(0x1e0)]()[_0xdd8640(0x1c4)]()[_0xdd8640(0x11f)](0x2,'0')+':'+_0x3fa8dd[_0xdd8640(0xda)]()['toString']()[_0xdd8640(0x11f)](0x2,'0');}function getTimeStamp(){const _0x405859=_0x12375b,_0x392f0b=shiftedTime();return _0x392f0b[_0x405859(0xbd)]()+'/'+(_0x392f0b[_0x405859(0x132)]()+0x1)[_0x405859(0x1c4)]()['padStart'](0x2,'0')+'/'+_0x392f0b[_0x405859(0x19e)]()[_0x405859(0x1c4)]()[_0x405859(0x11f)](0x2,'0')+'\x20'+_0x392f0b['getHours']()[_0x405859(0x1c4)]()[_0x405859(0x11f)](0x2,'0')+':'+_0x392f0b[_0x405859(0x1e0)]()['toString']()[_0x405859(0x11f)](0x2,'0')+':'+_0x392f0b['getSeconds']()['toString']()[_0x405859(0x11f)](0x2,'0');}function getDate(){const _0x5c0a8d=_0x12375b,_0x21f3dc=shiftedTime();return _0x21f3dc['getFullYear']()+'/'+(_0x21f3dc['getMonth']()+0x1)[_0x5c0a8d(0x1c4)]()[_0x5c0a8d(0x11f)](0x2,'0')+'/'+_0x21f3dc[_0x5c0a8d(0x19e)]()[_0x5c0a8d(0x1c4)]()['padStart'](0x2,'0');}function getHour(){const _0x5295ad=_0x12375b,_0xbd9e19=shiftedTime();return _0xbd9e19[_0x5295ad(0xb2)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x5cedfb){return new Promise(_0x4b1853=>setTimeout(_0x4b1853,_0x5cedfb));}function shiftedTime(){const _0x501b92=_0x12375b,_0x338406=new Date();let _0x16d914=_0x338406;if(config&&config[_0x501b92(0xfd)]!==0x0)_0x16d914=fns['add'](_0x338406,{'hours':config['timeshift']});return _0x16d914;}function timer(_0x1d678f){const _0x9efeb6=_0x12375b,_0x7b82a=new Date();!lasttime?console['log'](getTimeStamp()+_0x9efeb6(0x16e),_0x1d678f,_0x7b82a):console[_0x9efeb6(0x145)](getTimeStamp()+_0x9efeb6(0x16e),_0x1d678f,(_0x7b82a-lasttime)/0x3e8),lasttime=_0x7b82a;}