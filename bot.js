const _0x4781fc=_0x5d85;(function(_0x22e739,_0x393d23){const _0x4996fe=_0x5d85,_0x429e0f=_0x22e739();while(!![]){try{const _0x252ae5=-parseInt(_0x4996fe(0x15d))/0x1+-parseInt(_0x4996fe(0x11a))/0x2+-parseInt(_0x4996fe(0x219))/0x3+parseInt(_0x4996fe(0x1fb))/0x4*(-parseInt(_0x4996fe(0x105))/0x5)+-parseInt(_0x4996fe(0x112))/0x6*(parseInt(_0x4996fe(0xfe))/0x7)+parseInt(_0x4996fe(0x220))/0x8+parseInt(_0x4996fe(0x1aa))/0x9;if(_0x252ae5===_0x393d23)break;else _0x429e0f['push'](_0x429e0f['shift']());}catch(_0x46ac97){_0x429e0f['push'](_0x429e0f['shift']());}}}(_0x31c5,0x86edc));const _0x5c42ef=function(){let _0x1fd55e=!![];return function(_0x2871f5,_0x52ee88){const _0x547916=_0x1fd55e?function(){if(_0x52ee88){const _0x408564=_0x52ee88['apply'](_0x2871f5,arguments);return _0x52ee88=null,_0x408564;}}:function(){};return _0x1fd55e=![],_0x547916;};}(),_0x3f253a=_0x5c42ef(this,function(){const _0x2dad86=_0x5d85;return _0x3f253a[_0x2dad86(0x1c7)]()['search'](_0x2dad86(0x1ca))['toString']()[_0x2dad86(0x1e3)](_0x3f253a)[_0x2dad86(0x20f)](_0x2dad86(0x1ca));});_0x3f253a();'use strict';const ccxt=require(_0x4781fc(0x1f0)),low=require(_0x4781fc(0x217)),FileSync=require(_0x4781fc(0x1c1)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x4781fc(0x173)),Crypt=require(_0x4781fc(0xfd))[_0x4781fc(0x10e)];let exchange,wsClient;global[_0x4781fc(0x171)]={},global[_0x4781fc(0x107)]={};let ws1=[],ws2=null,ws3=[];function _0x31c5(){const _0x2ff939=['parse','./config/','settings','getStartingBalances','169929ldpUAu','remove','target','usd','keys','has','startprice','recreate','running','privateKey','test','fetchOpenOrders','botID','fee','limits','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','emojisell','version','getSeconds','number','ticker','fetchClosedOrders','binance','commission','order','differenceInSeconds','length','yyyy/MM/dd','botname','001','Net\x20effect\x20(','logs','amount','push','liquidity','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','cooldown','%\x20\x0a','USDT','get','success','abs','BNB/','subscribeSymbol24hrTicker','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','\x20|\x20Binance\x20API\x20secret\x20invalid','getMinutes','data','getHours','bot-','Error:\x20Invalid\x20argument\x20','open','defaults','performance','getFiat()','distribution','Binance\x20not\x20available\x20(1)','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','add','\x20orders\x20in\x20less\x20than\x20','progress','\x20|\x20Binance\x20API\x20key\x20invalid','\x20:\x20','write','splice','entries','EUR','round','isArray','valid','binanceus','page','formattedMessage','args','orderId','Binance\x20not\x20responding','limit','26055009ZccLpI','<b>Bot\x20','fiat','initial','breakeven','Executed\x20','ordertype','BTC','final','Order(s)\x20filled\x20-\x20','ask','error','eur','headless','<pre>','changes','sha256','map','assign','type','Order(s)\x20validated\x20-\x20','UNLOCKED','LOCKED','lowdb/adapters/FileSync','exchange','fetchBalance','join','sells','restart','toString','filled','commissionAsset','(((.+)+)+)+$','decrypt','\x20-\x20bot\x20not\x20started','/backup/','fromCodePoint','XEM/BUSD',')\x20|\x20Error\x20details:\x20','rightTxt','delta','sort','coins','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','getTime','Binance\x20API\x20secret\x20is\x20invalid','recreateCoinResults()','function','event-history','Binance\x20API\x20blocked','parseISO','accumulatedQuantity','datetime','\x20portfolio:</b>\x20\x0a\x0a','RequestTimeout','filter','Net\x20','constructor','message','priceChangePercent','API-key\x20format\x20invalid','emitHistory','symbols','<b>','getPortfolio()','placeOrder','none','starting-balance-','getDate','forEach','ccxt','includes','format','Cooldown\x20ended\x20-\x20balancing\x20resumed','coin-loading-progress','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','string','price','cumulativeQuoteAssetTransactedQty','MIN_NOTIONAL','API\x20or\x20clock\x20sync\x20issue','2232VYGOSx','balances','startdate','toLowerCase','cancelOrders()','cloneDeep','isEqual','writeFile','sendPortfolioTelegram','Manual\x20balancing\x20required:\x20','\x20order:\x20','slice','2.5.0','find','sortBy','\x20>\x20','symbol','apiSecret','no\x20open\x20orders','Invalid\x20quantity','search','indexOf','change24h','wss://stream.binance.us:9443','userData','\x20-\x20','toFixed','log','lowdb','toggleBotMode','1734651cylJNb','getCoins()','subscribeSpotUserDataStream','offset','exit','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','value','6130352SqokVs','cancelOrder','net-basecoin','cancel','\x20minutes','Binance\x20API\x20key\x20is\x20invalid','BNB','realized','\x20value','BUSD','kline','basecoin','limit-high','balancing\x20resumed','max','buy','replace','-events.json','yyyy-MM-dd\x27T\x27HH:mm:ss','event','stringify','freeze','wsKey','net-fiat','starting-balances','apiKey','\x20hour','timeshift','HOT/EUR','2.3.5','placeOrder()','close','hybrid-crypto-js','2517298BWAmoj','leftTxt','getOpenOrders()','send','side','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Market','3305DdVtkW','argv','change','startnumber','sell','netoffset','market','Pausing\x20for\x20','canceled','Crypt','InvalidNonce','Order(s)\x20not\x20validated\x20after\x20','CANCELED','18ySahpM','configuration','initws()','mkdirSync','loadMarkets','\x20minutes\x20-\x20','reverse','\x20has\x20a\x2024h\x20drop\x20of\x20','1825602MuUiNC','fetchTickers','orderstatus','configuration-stored','createOrder','Bot\x20','findIndex','fees','wsMarket','min','total','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','threshold','eventType','portfolio','DAI/','buys','trade','OrderNotFound','cancelLoading','AuthenticationError','last','padStart','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Order\x20filled:\x20','************','NEW','exec','coin','emojibuy','remainingSymbols','date','-------------------------------\x0a','FILLED','set','ETH','showname','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','YOYOW/','wss://stream.binance.com:9443','ongoing','cost','\x20change','enabled','bot','initclient','timestamp','kill','currency','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','secure','UNLOCKING','time','balancing\x20resumes\x20when\x20cooldown\x20ends','RSA-OAEP','-performance.json','Net\x20effect','-config.json','shift','getMonth','HOT/BTC','timeout','storeHeadless'];_0x31c5=function(){return _0x2ff939;};return _0x31c5();}const exceptions=[_0x4781fc(0x129),_0x4781fc(0x156),_0x4781fc(0xf9),_0x4781fc(0x1cf),'NANO/',_0x4781fc(0x140)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4781fc(0xf2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4781fc(0x1bf)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x4781fc(0x16e)],botID=process[_0x4781fc(0x106)][0x2]||_0x4781fc(0x17a),pattern=/^[0-9]{3}$/;!pattern[_0x4781fc(0x167)](botID)&&(console['log'](_0x4781fc(0x18f)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x4781fc(0x21d)](0x1));const userID=process[_0x4781fc(0x106)][0x3]||'',configpath=userID?_0x4781fc(0x15a)+userID+'/':_0x4781fc(0x15a);!fs['existsSync'](configpath)&&fs[_0x4781fc(0x115)](configpath);const configfile=configpath+_0x4781fc(0x18e)+botID+_0x4781fc(0x153),logfile=configpath+_0x4781fc(0x18e)+botID+_0x4781fc(0xee),performancefile=configpath+_0x4781fc(0x18e)+botID+_0x4781fc(0x151),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x4781fc(0x1cd),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x4781fc(0x19c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4781fc(0x191)]({'data':[]})[_0x4781fc(0x19c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x4781fc(0x19c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x4781fc(0x19c)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x489f6a)=>{},'debug':(..._0x5a374c)=>{},'notice':(..._0x1db526)=>{},'info':(..._0x408764)=>{},'warning':(..._0x5e9991)=>{},'error':async function(..._0x5d8659){const _0x3547a0=_0x4781fc,_0x1eeb32=new Date()[_0x3547a0(0x1d6)]();if(!lastErrorShown||_0x1eeb32-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3547a0(0x1d6)]();let _0x1c18be='';if(_0x5d8659[0x0])_0x1c18be+=_0x5d8659[0x0];if(_0x5d8659[0x1]&&_0x5d8659[0x1][_0x3547a0(0x1b5)]&&_0x5d8659[0x1][_0x3547a0(0x1b5)][_0x3547a0(0x1e4)])_0x1c18be+=_0x3547a0(0x214)+_0x5d8659[0x1][_0x3547a0(0x1b5)][_0x3547a0(0x1e4)];logging('WebSockets('+consecutivePauses+_0x3547a0(0x1d0),''+_0x1c18be),await pauseBot(_0x3547a0(0x195));}}},crypt=new Crypt({'md':_0x4781fc(0x1ba),'rsaStandard':_0x4781fc(0x150)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings['timeshift']!=config[_0x4781fc(0xf8)]&&updateTimeshift(settings[_0x4781fc(0xf8)]);process[_0x4781fc(0x101)]({'started':_0x4781fc(0x165)},_0x5d81f2=>{}),initializeProcessListeners();function proxyEmit(_0x5b04f8,_0x592f0f=null){const _0x191378=_0x4781fc;process[_0x191378(0x101)]({'function':_0x5b04f8,'args':_0x592f0f},_0x5816ac=>{});}function initializeProcessListeners(){const _0x8458d=_0x4781fc;process['on'](_0x8458d(0x1e4),_0x380095=>{const _0xa2fdf5=_0x8458d;switch(Object[_0xa2fdf5(0x161)](_0x380095)[0x0]){case _0xa2fdf5(0xf8):_0x380095[_0xa2fdf5(0xf8)]!=undefined&&(settings[_0xa2fdf5(0xf8)]=_0x380095['timeshift'],updateTimeshift(settings['timeshift']));break;case _0xa2fdf5(0x1d9):switch(_0x380095[_0xa2fdf5(0x1d9)]){case _0xa2fdf5(0x147):initclient();break;case _0xa2fdf5(0x218):toggleBotMode();break;case _0xa2fdf5(0x1e7):emitHistory(_0x380095[_0xa2fdf5(0x1a6)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x380095[_0xa2fdf5(0x1a6)]);break;case'getPortfolio':getPortfolio(_0x380095[_0xa2fdf5(0x1a6)]);break;case'storeConfiguration':storeConfiguration(_0x380095[_0xa2fdf5(0x1a6)]);break;case _0xa2fdf5(0x158):storeHeadless(_0x380095[_0xa2fdf5(0x1a6)]);break;case _0xa2fdf5(0x15c):getStartingBalances(getNormalizedPerformance());break;case _0xa2fdf5(0x1eb):placeOrder(_0x380095[_0xa2fdf5(0x1a6)]);break;case _0xa2fdf5(0x12d):cancelLoading();break;case _0xa2fdf5(0x203):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x4b9ca3=_0x4781fc;if(pidBalances)clearTimeout(pidBalances);if(config[_0x4b9ca3(0xf6)]!=''){await initExchange(config[_0x4b9ca3(0xf6)],config[_0x4b9ca3(0x20c)]),await initWsEvents();let _0x443bde=await loadSymbols();if(_0x443bde){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x1b7ff6,_0x330548){const _0x1c2739=_0x4781fc,_0x318dc3=ccxt[config[_0x1c2739(0x1c2)]];let _0x143470;switch(config[_0x1c2739(0x1c2)]){case'binance':_0x143470=_0x1c2739(0x141);break;case _0x1c2739(0x1a3):_0x143470=_0x1c2739(0x212);break;default:_0x143470=_0x1c2739(0x141);}exchange=new _0x318dc3({'apiKey':_0x1b7ff6,'secret':_0x330548,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1b7ff6,'api_secret':_0x330548,'beautify':!![],'wsUrl':_0x143470},logger);let _0x105375=config[_0x1c2739(0x1c2)]==_0x1c2739(0x1a3)?_0x1c2739(0x183):_0x1c2739(0x19f),_0x385b30=config['basecoin']==_0x1c2739(0x13d)?_0x1c2739(0x13d):_0x1c2739(0x1b1);stablecoins={'eur':{'coin':''+_0x385b30+_0x105375,'symbol':_0x385b30+'/'+_0x105375},'usd':{'coin':_0x385b30+_0x1c2739(0x183),'symbol':_0x385b30+'/USDT'}};}async function initWsEvents(){const _0x4ce39b=_0x4781fc;!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x4ce39b(0x1a5),_0x73b0d2=>{const _0x1c84ee=_0x4ce39b;if(isWsFormattedKline(_0x73b0d2)){global[_0x1c84ee(0x171)][_0x73b0d2[_0x1c84ee(0x22a)]['symbol']]=_0x73b0d2['kline'][_0x1c84ee(0xfc)];return;}else{if(isWsFormatted24hrTicker(_0x73b0d2)){global[_0x1c84ee(0x107)][_0x73b0d2[_0x1c84ee(0x20b)]]=_0x73b0d2[_0x1c84ee(0x1e5)];return;}else{if(!Array[_0x1c84ee(0x1a1)](_0x73b0d2)&&_0x73b0d2[_0x1c84ee(0xf3)][_0x1c84ee(0x1f1)](_0x1c84ee(0x213))){if(_0x73b0d2[_0x1c84ee(0x122)]['includes']('spot')){updateNumberCoins(_0x73b0d2);return;}}}}}),wsClient['on']('reconnected',async _0x402024=>{currentCoins=await getCoins(!![]),handleOpenOrders();}));}async function loadSymbols(){const _0x421997=_0x4781fc;let _0x4b0e7b;try{markets=await exchange[_0x421997(0x116)](),allSymbols=exchange[_0x421997(0x1e8)][_0x421997(0x1e1)](_0x11f6e6=>{const _0x49c729=_0x421997;let _0x138518=![];return exceptions[_0x49c729(0x1ef)](_0x450ef1=>{if(_0x11f6e6['includes'](_0x450ef1))_0x138518=!![];}),!_0x138518;}),_0x4b0e7b=!![];}catch(_0x470975){await handleError(_0x470975,'loadSymbols()'),_0x4b0e7b=![];}return _0x4b0e7b;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x50ea24=_0x4781fc;proxyEmit(_0x50ea24(0x113),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x50ea24(0x1fc),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x51b2de=getNormalizedPerformance();emitPerformance(_0x51b2de),await getStartingBalances(_0x51b2de);}async function toggleBotMode(){const _0x38987f=_0x4781fc;let _0x99320f=dbConfig[_0x38987f(0x184)]('bot')[_0x38987f(0x208)]({'botID':botID})[_0x38987f(0x21f)]();if(_0x99320f){const _0x5ec170=!_0x99320f[_0x38987f(0x1b7)];dbConfig[_0x38987f(0x184)](_0x38987f(0x146))[_0x38987f(0x208)]({'botID':botID})[_0x38987f(0x1bc)]({'headless':_0x5ec170})[_0x38987f(0x19c)](),config[_0x38987f(0x1b7)]=_0x5ec170,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x41ba6b=_0x4781fc;process[_0x41ba6b(0x101)]({'updatebotmanager':!![]},_0x56cc9c=>{});}function cleanws(){const _0x185b92=_0x4781fc;wsinitialized=![];ws1&&(ws1['forEach'](_0x19cfe8=>{const _0x2f9c6c=_0x5d85;try{wsClient[_0x2f9c6c(0xfc)](_0x19cfe8);}catch(_0x4926c7){}}),ws1=[]);if(ws2){try{wsClient[_0x185b92(0xfc)](ws2);}catch(_0x290933){}ws2=null;}ws3&&(ws3[_0x185b92(0x1ef)](_0x2bb0cc=>{const _0x292079=_0x185b92;try{wsClient[_0x292079(0xfc)](_0x2bb0cc);}catch(_0x3f6de4){}}),ws3=[]);}async function initws(){const _0x3b7614=_0x4781fc;cleanws();let _0x387206=[];currentCoins[_0x3b7614(0x1ef)](_0x309b07=>{const _0x24d095=_0x3b7614;if(_0x309b07[_0x24d095(0x136)]!=config[_0x24d095(0x22b)])_0x387206['push'](_0x309b07[_0x24d095(0x20b)]);});if(!_0x387206[_0x3b7614(0x1f1)](stablecoins[_0x3b7614(0x1b6)][_0x3b7614(0x20b)]))_0x387206[_0x3b7614(0x17e)](stablecoins['eur'][_0x3b7614(0x20b)]);if(!_0x387206[_0x3b7614(0x1f1)](stablecoins[_0x3b7614(0x160)][_0x3b7614(0x20b)]))_0x387206[_0x3b7614(0x17e)](stablecoins[_0x3b7614(0x160)][_0x3b7614(0x20b)]);if(!_0x387206[_0x3b7614(0x1f1)](_0x3b7614(0x187)+config[_0x3b7614(0x22b)]))_0x387206[_0x3b7614(0x17e)](_0x3b7614(0x187)+config[_0x3b7614(0x22b)]);try{_0x387206['forEach']((_0x4033f6,_0x57acd0)=>{const _0x2f91df=_0x3b7614;ws1[_0x57acd0]=wsClient['subscribeSpotKline'](noslash(_0x4033f6),'1m'),ws3[_0x57acd0]=wsClient[_0x2f91df(0x188)](noslash(_0x4033f6),'spot');}),ws2=wsClient[_0x3b7614(0x21b)]();}catch(_0x3be2b4){await handleError(_0x3be2b4,_0x3b7614(0x114));}let _0x50f450,_0x5ead01=0x0;loading[_0x3b7614(0x138)]=[];let _0x2c23f1=0x0;_0x387206['forEach'](_0xd7d8ba=>{const _0x435d9c=_0x3b7614;loading[_0x435d9c(0x138)][_0x435d9c(0x17e)](_0xd7d8ba);}),loadingCanceled=![];let _0x3d488=![];while(_0x50f450!=_0x387206[_0x3b7614(0x177)]){_0x50f450=0x0,_0x387206[_0x3b7614(0x1ef)](_0x38b9d6=>{const _0x3321b3=_0x3b7614;global['ticker'][noslash(_0x38b9d6)]&&(loading[_0x3321b3(0x138)]=loading[_0x3321b3(0x138)][_0x3321b3(0x1e1)](_0x14bfb1=>_0x14bfb1!=_0x38b9d6),_0x50f450++);}),loading[_0x3b7614(0x199)]=Math['round'](_0x50f450/_0x387206[_0x3b7614(0x177)]*0x64);loading['progress']!=0x64&&(_0x2c23f1>0x1e*0x5&&(loading[_0x3b7614(0x157)]=!![],emitLoadingProgress()),_0x2c23f1>0x3c*0x5&&!_0x3d488&&(_0x3d488=!![],logHistory(_0x3b7614(0x1b5),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x3b7614(0x138)][_0x3b7614(0x1c4)](',\x20')+_0x3b7614(0x1cc))));if(loadingCanceled){loading[_0x3b7614(0x223)]=!![],emitLoadingProgress();break;}else _0x50f450!=_0x5ead01&&(_0x5ead01=_0x50f450,emitLoadingProgress()),_0x2c23f1++,await sleep(0xc8);}_0x3d488&&logHistory(_0x3b7614(0x185),_0x3b7614(0x180));if(_0x50f450==_0x387206['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x413682=_0x4781fc;proxyEmit(_0x413682(0x1f4),loading);}async function getFiat(){const _0x5e5897=_0x4781fc;let _0x5c020a=0x0,_0x5c59ad=0x0;try{_0x5c020a=global[_0x5e5897(0x171)][stablecoins[_0x5e5897(0x1b6)][_0x5e5897(0x136)]],_0x5c59ad=global[_0x5e5897(0x171)][stablecoins[_0x5e5897(0x160)]['coin']];}catch(_0x209f86){await handleError(_0x209f86,_0x5e5897(0x193));}return{'eur':Number(_0x5c020a),'usd':Number(_0x5c59ad)};}function setStartDatePerformance(){const _0x44a179=_0x4781fc;if(config&&config[_0x44a179(0x17f)][0x0][_0x44a179(0x1b9)][_0x44a179(0x177)]!=0x0){const _0x598537=config[_0x44a179(0x17f)][0x0][_0x44a179(0x1b9)];dbPerformance['get'](_0x44a179(0x18c))[_0x44a179(0x208)]({'date':config[_0x44a179(0x1fd)]})[_0x44a179(0x1bc)]({'coins':_0x598537})[_0x44a179(0x19c)]();}}async function recreateCoinResults(){const _0x3e5d18=_0x4781fc;let _0x9a0933,_0x5a7109=[];try{const _0xcd8b99=fns[_0x3e5d18(0x1f2)](fns[_0x3e5d18(0x1dc)](config[_0x3e5d18(0x1fd)][_0x3e5d18(0xed)](/\//g,'-')),_0x3e5d18(0xef));for(const _0x24ecec of currentCoins){if(_0x24ecec['coin']!=config[_0x3e5d18(0x22b)]){let _0x101cd2=0x0,_0x15b253,_0xf50e5f;_0x9a0933=await getAllEventOrders(_0x24ecec[_0x3e5d18(0x20b)]);if(_0x9a0933[_0x3e5d18(0x177)]>0x0)_0x9a0933['forEach'](_0x41d28c=>{const _0x3d562e=_0x3e5d18,_0x374588=_0x24ecec[_0x3d562e(0x20b)][_0x3d562e(0x1f1)](config[_0x3d562e(0x22b)]+'/');_0x5a7109[_0x3d562e(0x17e)]({'datetime':_0x41d28c[_0x3d562e(0x1de)],'coin':_0x24ecec[_0x3d562e(0x136)],'symbol':_0x24ecec['symbol'],'side':_0x41d28c[_0x3d562e(0x102)],'reverse':_0x374588,'amount':formatResult(_0x41d28c['filled'],0x8),'filled':formatResult(_0x41d28c[_0x3d562e(0x1c8)],0x8),'price':formatResult(_0x41d28c['price'],0x8)}),_0x101cd2=_0x41d28c[_0x3d562e(0x102)]==_0x3d562e(0xec)?_0x101cd2+_0x41d28c[_0x3d562e(0x1c8)]:_0x101cd2-_0x41d28c[_0x3d562e(0x1c8)];if(!_0xf50e5f)_0xf50e5f=_0x41d28c[_0x3d562e(0x1f7)];});_0x15b253=_0x24ecec[_0x3e5d18(0x170)]-_0x101cd2;let _0x822972;config[_0x3e5d18(0x17f)][_0x3e5d18(0x1ef)](_0x2975a1=>{const _0x2c41e5=_0x3e5d18;!_0x822972&&(_0x822972=_0x2975a1[_0x2c41e5(0x1b9)]['find'](_0x4bbf09=>_0x4bbf09[_0x2c41e5(0x136)]==_0x24ecec['coin']),_0x822972&&(_0x15b253=_0x822972[_0x2c41e5(0x170)],_0xf50e5f=_0x822972['price']));});let _0x21c657=dbCoinResults['get'](_0x3e5d18(0x1d4))[_0x3e5d18(0x208)]({'coin':_0x24ecec[_0x3e5d18(0x136)]})[_0x3e5d18(0x21f)]();_0x21c657={'coin':_0x24ecec[_0x3e5d18(0x136)],'number':_0x15b253,'breakeven':_0xf50e5f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3e5d18(0x184)](_0x3e5d18(0x1d4))['find']({'coin':_0x24ecec[_0x3e5d18(0x136)]})[_0x3e5d18(0x1bc)](_0x21c657)['write']();}}_0x5a7109[_0x3e5d18(0x1d3)]((_0x317ee1,_0x787bcd)=>_0x317ee1[_0x3e5d18(0x1de)]>_0x787bcd[_0x3e5d18(0x1de)]?0x1:_0x787bcd['datetime']>_0x317ee1['datetime']?-0x1:0x0);let _0x7a05a2=0x0;for(let _0x3025b5 of _0x5a7109){await updateCoinResults(_0x3025b5,!![]);}}catch(_0x4b818d){await handleError(_0x4b818d,_0x3e5d18(0x1d8));}}async function getAllEventOrders(_0x1bf7a3){const _0x1b255b=_0x4781fc;let _0x2c2411=[],_0x5e58b1=dbLogs['get'](_0x1b255b(0x17c))[_0x1b255b(0x1e1)](_0x5eefc4=>{const _0x36f8dd=_0x1b255b,_0x4360c2=_0x5eefc4['event'][_0x36f8dd(0x1fe)]();return _0x4360c2['includes'](_0x1bf7a3[_0x36f8dd(0x1fe)]())&&(_0x4360c2[_0x36f8dd(0x1f1)](_0x36f8dd(0x10b))&&_0x4360c2[_0x36f8dd(0x1f1)]('order')||_0x4360c2[_0x36f8dd(0x1f1)](_0x36f8dd(0x1c8))&&_0x4360c2[_0x36f8dd(0x1f1)](_0x36f8dd(0x175)));})[_0x1b255b(0x209)]('time')[_0x1b255b(0x21f)]();return _0x5e58b1[_0x1b255b(0x1ef)](_0x4c9786=>{const _0x446ef0=_0x1b255b,_0x529df7=_0x4c9786['event']['includes'](_0x446ef0(0x109))?'sell':'buy',_0x418303=/#([0-9]|\.)+\s/i,_0x3fe018=Number(_0x418303['exec'](_0x4c9786[_0x446ef0(0xf0)])[0x0]['slice'](0x1)),_0x50f3cc=/@([0-9]|\.)+$/i,_0x48d88c=Number(_0x50f3cc[_0x446ef0(0x135)](_0x4c9786[_0x446ef0(0xf0)])[0x0][_0x446ef0(0x206)](0x1));_0x2c2411[_0x446ef0(0x17e)]({'datetime':_0x4c9786[_0x446ef0(0x14e)],'coin':symbolToCoin(_0x1bf7a3),'symbol':_0x1bf7a3,'side':_0x529df7,'amount':_0x3fe018,'filled':_0x3fe018,'price':_0x48d88c});}),_0x2c2411;}async function getAllOrders(_0x1e3506,_0x2d4afb){const _0x56a422=_0x4781fc;let _0x1fa74d=[];while(_0x2d4afb<exchange['milliseconds']()){const _0x15e276=0x1f4,_0x25f91b=await exchange[_0x56a422(0x172)](_0x1e3506,_0x2d4afb,_0x15e276);if(_0x25f91b['length'])_0x2d4afb=_0x25f91b[_0x25f91b[_0x56a422(0x177)]-0x1][_0x56a422(0x148)]+0x1,_0x1fa74d=_0x1fa74d['concat'](_0x25f91b);else break;}return _0x1fa74d;}async function validate24hChanges(){const _0x3647cf=_0x4781fc;let _0x14ac12;for(const _0x58de69 of currentCoins){if(_0x58de69[_0x3647cf(0x136)]!=config[_0x3647cf(0x22b)]){let _0x4098df;_0x58de69['reverse']?_0x4098df=formatResult((0x1/(global['change'][noslash(_0x58de69[_0x3647cf(0x20b)])]/0x64+0x1)-0x1)*0x64,0x3):_0x4098df=global['change'][noslash(_0x58de69[_0x3647cf(0x20b)])],_0x4098df<config[_0x3647cf(0x211)]&&(logHistory(_0x3647cf(0x1b5),_0x58de69['coin']+_0x3647cf(0x119)+_0x4098df+'%'),logHistory(_0x3647cf(0x1b5),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error',_0x3647cf(0x103)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x103a42=_0x4781fc;let _0x202a7d=dbLogs[_0x103a42(0x184)]('version')[_0x103a42(0x21f)]();if(_0x202a7d!=_0x103a42(0xfa)){dbLogs[_0x103a42(0x13c)](_0x103a42(0x16e),_0x103a42(0xfa))['write']();let _0x6147a1=[];const _0xd40c8d=dbLogs[_0x103a42(0x184)](_0x103a42(0x17c))[_0x103a42(0x21f)]();_0xd40c8d[_0x103a42(0x1ef)](_0x7b0613=>{const _0x1dfa33=_0x103a42;_0x6147a1['push']({'time':_0x7b0613[_0x1dfa33(0x14e)],'type':_0x7b0613[_0x1dfa33(0x1bd)],'event':_0x7b0613[_0x1dfa33(0xf0)]});}),dbLogs[_0x103a42(0x184)](_0x103a42(0x17c))[_0x103a42(0x1bc)](_0x6147a1)[_0x103a42(0x19c)]();}let _0x1f13e1=dbConfig[_0x103a42(0x184)](_0x103a42(0x16e))['value']();if(_0x1f13e1!=_0x103a42(0xfa)){dbConfig['set']('version',_0x103a42(0xfa))[_0x103a42(0x19c)]();let _0xaf3232=dbConfig[_0x103a42(0x184)]('bot')[_0x103a42(0x208)]({'botID':botID})['value']();if(_0xaf3232){let _0x476ac0=[];_0xaf3232[_0x103a42(0x128)][_0x103a42(0x1ef)](_0x27e31b=>{const _0x1ee2e4=_0x103a42;_0x476ac0[_0x1ee2e4(0x17e)]({'coin':_0x27e31b[_0x1ee2e4(0x136)],'number':_0x27e31b[_0x1ee2e4(0x108)],'price':_0x27e31b[_0x1ee2e4(0x163)]}),delete _0x27e31b[_0x1ee2e4(0x108)],delete _0x27e31b[_0x1ee2e4(0x163)];});if(_0x476ac0['length']!==0x0)fs[_0x103a42(0x202)](configbackuppath+(_0x103a42(0x1ed)+botID+'.json'),JSON[_0x103a42(0xf1)](_0x476ac0,null,0x4),function(_0x171c04){if(_0x171c04){}});const _0x6aeaa3=(_0x2f2070,_0x1c66b8)=>{const _0x41dd0c=_0x103a42;let _0x56f64c=[];_0x1c66b8[_0x41dd0c(0x1ef)](_0x4de0a1=>{const _0x5efd1a=_0x41dd0c,_0x118a2a=_0x2f2070[_0x5efd1a(0x208)](_0x2b3403=>_0x2b3403[_0x5efd1a(0x136)]==_0x4de0a1[_0x5efd1a(0x136)]);if(!_0x118a2a)_0x56f64c[_0x5efd1a(0x17e)](_0x4de0a1);});let _0x1e56ef=[];return _0x2f2070[_0x41dd0c(0x1ef)](_0x28a27d=>{const _0x26a0c4=_0x41dd0c,_0x189789=_0x1c66b8['find'](_0x494d26=>_0x494d26[_0x26a0c4(0x136)]==_0x28a27d[_0x26a0c4(0x136)]);if(!_0x189789||_0x189789[_0x26a0c4(0x170)]==0x0&&_0x28a27d[_0x26a0c4(0x170)]!=0x0)_0x1e56ef[_0x26a0c4(0x17e)](_0x28a27d);}),{'missingDay1':_0x56f64c,'notInDay2':_0x1e56ef};},_0xacbae6=dbPerformance[_0x103a42(0x184)](_0x103a42(0x18c))[_0x103a42(0x200)]()[_0x103a42(0x21f)]();if(_0xacbae6[_0x103a42(0x177)]>0x1){const {missingDay1:_0x2a361c,notInDay2:_0x83c29}=_0x6aeaa3(_0x476ac0,_0xacbae6[0x1][_0x103a42(0x1d4)]);_0x476ac0=[..._0x476ac0,..._0x2a361c],_0x83c29[_0x103a42(0x1ef)](_0x4c4b2=>{const _0x33678b=_0x103a42;let _0x4f82fc=_0x476ac0[_0x33678b(0x120)](_0x524dbb=>_0x524dbb[_0x33678b(0x136)]==_0x4c4b2[_0x33678b(0x136)]);_0x4f82fc!=-0x1&&_0x476ac0['splice'](_0x4f82fc,0x1);});}_0x476ac0[_0x103a42(0x1d3)]((_0x5cb057,_0xe12e0c)=>_0x5cb057[_0x103a42(0x136)]>_0xe12e0c[_0x103a42(0x136)]?0x1:_0xe12e0c[_0x103a42(0x136)]>_0x5cb057['coin']?-0x1:0x0);let _0x19f458=[{'date':_0xaf3232[_0x103a42(0x1fd)],'changes':_0x476ac0}];_0xacbae6[_0x103a42(0x177)]>0x2&&_0xacbae6[_0x103a42(0x1ef)]((_0x24b46f,_0x46b3e6)=>{const _0x16eb53=_0x103a42;if(_0x46b3e6>0x0&&_0x46b3e6<_0xacbae6[_0x16eb53(0x177)]-0x1){const {missingDay1:_0x11db5c,notInDay2:_0x2963a3}=_0x6aeaa3(_0xacbae6[_0x46b3e6][_0x16eb53(0x1d4)],_0xacbae6[_0x46b3e6+0x1]['coins']);_0x476ac0=[],(_0x11db5c[_0x16eb53(0x177)]!=0x0||_0x2963a3[_0x16eb53(0x177)]!=0x0)&&(_0x11db5c[_0x16eb53(0x177)]!=0x0&&_0x476ac0['push'](..._0x11db5c),_0x2963a3[_0x16eb53(0x177)]!=0x0&&(_0x2963a3['forEach'](_0xe79f49=>{const _0x8aebe5=_0x16eb53;_0xe79f49[_0x8aebe5(0x170)]=-_0xe79f49['number'];}),_0x476ac0[_0x16eb53(0x17e)](..._0x2963a3)),_0x476ac0[_0x16eb53(0x1d3)]((_0x4531e3,_0x254d89)=>_0x4531e3[_0x16eb53(0x136)]>_0x254d89['coin']?0x1:_0x254d89[_0x16eb53(0x136)]>_0x4531e3['coin']?-0x1:0x0),_0x19f458['push']({'date':_0xacbae6[_0x46b3e6+0x1][_0x16eb53(0x139)],'changes':_0x476ac0}));}}),dbConfig['get'](_0x103a42(0x146))[_0x103a42(0x208)]({'botID':botID})[_0x103a42(0x1bc)]({..._0xaf3232,'liquidity':_0x19f458})[_0x103a42(0x19c)]();}}config=getConfiguration(botID);let _0x4766e5=dbPerformance[_0x103a42(0x184)](_0x103a42(0x16e))[_0x103a42(0x21f)]();_0x4766e5!='2.3.5'&&(dbPerformance[_0x103a42(0x13c)]('version',_0x103a42(0xfa))[_0x103a42(0x19c)](),setStartDatePerformance());let _0xe9c2a=dbCoinResults[_0x103a42(0x184)]('version')[_0x103a42(0x21f)]();if(_0xe9c2a!=_0x103a42(0x207)){dbCoinResults['set']('version','2.5.0')[_0x103a42(0x19c)]();let _0x36c6d0=dbCoinResults[_0x103a42(0x184)](_0x103a42(0x1d4))[_0x103a42(0x21f)]();if(_0x36c6d0['length']!=0x0)recreationNeeded=!![];}}function _0x5d85(_0x47a7a9,_0x1f3df4){const _0x35f532=_0x31c5();return _0x5d85=function(_0x3f253a,_0x5c42ef){_0x3f253a=_0x3f253a-0xeb;let _0x31c5a9=_0x35f532[_0x3f253a];return _0x31c5a9;},_0x5d85(_0x47a7a9,_0x1f3df4);}function getConfiguration(_0x1f15d0){const _0x453e03=_0x4781fc;let _0x51bcee=dbConfig[_0x453e03(0x184)]('bot')[_0x453e03(0x208)]({'botID':_0x1f15d0})['value']();if(_0x51bcee){let _0x4be8a6=![];typeof _0x51bcee[_0x453e03(0x126)]==_0x453e03(0x1f6)&&(_0x51bcee={..._0x51bcee,'threshold':Number(_0x51bcee[_0x453e03(0x126)])},_0x4be8a6=!![]),_0x51bcee['change24h']==null&&(_0x51bcee={..._0x51bcee,'change24h':-0x14},_0x4be8a6=!![]),_0x4be8a6&&(_0x51bcee={'botID':_0x51bcee[_0x453e03(0x169)],'exchange':_0x51bcee[_0x453e03(0x1c2)],'apiKey':_0x51bcee[_0x453e03(0xf6)],'apiSecret':_0x51bcee['apiSecret'],'basecoin':_0x51bcee['basecoin'],'botname':_0x51bcee[_0x453e03(0x179)],'showname':_0x51bcee[_0x453e03(0x13e)],'threshold':_0x51bcee[_0x453e03(0x126)],'ordertype':_0x51bcee[_0x453e03(0x1b0)],'timeout':_0x51bcee[_0x453e03(0x157)],'startdate':_0x51bcee[_0x453e03(0x1fd)],'recreate':_0x51bcee[_0x453e03(0x164)],'timeshift':_0x51bcee[_0x453e03(0xf8)],'headless':_0x51bcee[_0x453e03(0x1b7)],'cooldown':_0x51bcee['cooldown'],'change24h':_0x51bcee[_0x453e03(0x211)],'emojibuy':_0x51bcee[_0x453e03(0x137)],'emojisell':_0x51bcee['emojisell'],'portfolio':_0x51bcee[_0x453e03(0x128)],'liquidity':_0x51bcee[_0x453e03(0x17f)]},dbConfig[_0x453e03(0x184)](_0x453e03(0x146))[_0x453e03(0x15e)]()['write'](),dbConfig[_0x453e03(0x184)](_0x453e03(0x146))[_0x453e03(0x17e)](_0x51bcee)['write']());}else _0x51bcee={'botID':_0x1f15d0,'exchange':_0x453e03(0x173),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x453e03(0x11f)+_0x1f15d0,'showname':![],'threshold':0x3,'ordertype':_0x453e03(0x10b),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x453e03(0xf8)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x51bcee;}function emittedConfiguration(){const _0x584ab1=_0x4781fc;let _0x2dad4b;return config[_0x584ab1(0xf6)]==''?_0x2dad4b=config:_0x2dad4b={...config,'apiKey':_0x584ab1(0x133),'apiSecret':_0x584ab1(0x133)},_0x2dad4b;}function getSettings(){const _0x2fc6c5=_0x4781fc;return dbSettings['get'](_0x2fc6c5(0x15b))['value']();}function getSecure(){const _0xe759d1=_0x4781fc;return dbSecure[_0xe759d1(0x184)](_0xe759d1(0x14c))[_0xe759d1(0x21f)]()||{};}function updateTimeshift(_0x3f34e3){const _0x17de79=_0x4781fc;let _0x5d758b=dbConfig[_0x17de79(0x184)](_0x17de79(0x146))[_0x17de79(0x208)]({'botID':botID})['value']();_0x5d758b&&dbConfig[_0x17de79(0x184)](_0x17de79(0x146))[_0x17de79(0x208)]({'botID':botID})[_0x17de79(0x1bc)]({'timeshift':_0x3f34e3})['write'](),config[_0x17de79(0xf8)]=_0x3f34e3,proxyEmit(_0x17de79(0x113),emittedConfiguration());}async function storeConfiguration(_0x2a0be9){const _0x17346a=_0x4781fc;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2ac2d7=dbConfig[_0x17346a(0x184)](_0x17346a(0x146))[_0x17346a(0x208)]({'botID':botID})[_0x17346a(0x21f)]();_0x2a0be9={..._0x2a0be9,'apiKey':crypt[_0x17346a(0x1cb)](secure['privateKey'],_0x2a0be9['apiKey'])[_0x17346a(0x1e4)],'apiSecret':crypt[_0x17346a(0x1cb)](secure[_0x17346a(0x166)],_0x2a0be9[_0x17346a(0x20c)])[_0x17346a(0x1e4)]};if(_0x2ac2d7){if(_0x2a0be9['apiKey']=='************')_0x2a0be9[_0x17346a(0xf6)]=config['apiKey'];if(_0x2a0be9['apiSecret']=='************')_0x2a0be9[_0x17346a(0x20c)]=config[_0x17346a(0x20c)];dbConfig[_0x17346a(0x184)](_0x17346a(0x146))[_0x17346a(0x208)]({'botID':botID})[_0x17346a(0x1bc)](_0x2a0be9)[_0x17346a(0x19c)]();}else dbConfig[_0x17346a(0x184)](_0x17346a(0x146))['push'](_0x2a0be9)[_0x17346a(0x19c)](),process[_0x17346a(0x101)]({'status':_0x17346a(0x145),'live':'running'},_0x54634c=>{});config={..._0x2a0be9},setStartDatePerformance(),process[_0x17346a(0x101)]({'botname':_0x2a0be9[_0x17346a(0x179)]},_0x2842ff=>{}),updateBotManager();const _0x39684e=getNormalizedPerformance();getStartingBalances(_0x39684e),emitPerformance(_0x39684e),proxyEmit(_0x17346a(0x11d)),await initCoinResults(),reset();}async function storeHeadless(_0x3fbc62){const _0x188666=_0x4781fc,_0x10b25b={...config,'headless':_0x3fbc62[_0x188666(0x1b7)]};let _0x2bb119=dbConfig['get'](_0x188666(0x146))[_0x188666(0x208)]({'botID':botID})['value']();_0x2bb119&&dbConfig['get'](_0x188666(0x146))[_0x188666(0x208)]({'botID':botID})[_0x188666(0x1bc)](_0x10b25b)[_0x188666(0x19c)](),config={..._0x10b25b},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0xcd872){const _0x4b5180=_0x4781fc;return _0xcd872[_0x4b5180(0xed)]('/','');}async function updateNumberCoins(_0xe86c8b){const _0x160a53=_0x4781fc;if(_0xe86c8b[_0x160a53(0x127)]&&_0xe86c8b[_0x160a53(0x127)]=='executionReport'){let _0x2c1c49=_0xe86c8b['orderStatus'],_0x5037c0=![];currentCoins['forEach'](_0x40661b=>{const _0x5e9256=_0x160a53;noslash(_0x40661b[_0x5e9256(0x20b)])==_0xe86c8b[_0x5e9256(0x20b)]&&(_0x5037c0=!![]);});if(!_0x5037c0)return;const _0x75f159=currentCoins[_0x160a53(0x208)](_0x3ba6e2=>noslash(_0x3ba6e2[_0x160a53(0x20b)])==_0xe86c8b[_0x160a53(0x20b)]),_0xa7d0dd=_0x2b3acc=>{const _0x24d4f6=_0x160a53;if(_0x75f159)_0x75f159[_0x24d4f6(0x11c)]=_0x2b3acc;};if(_0x2c1c49==_0x160a53(0x134))_0xa7d0dd(_0x160a53(0x190));else{if(_0x2c1c49=='CANCELED')_0xa7d0dd('canceled'),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x2c1c49==_0x160a53(0x13b)){let _0x5d5fde=![];if(lastOrders)lastOrders[_0x160a53(0x1ef)](async _0x5d1a0c=>{const _0x5d1859=_0x160a53;if(_0x5d1a0c[_0x5d1859(0x1a7)]==_0xe86c8b[_0x5d1859(0x1a7)]){_0x5d5fde=!![];if(_0x5d1a0c[_0x5d1859(0x1c8)]==0x0){_0x5d1a0c['price']=_0xe86c8b[_0x5d1859(0x1f8)]/_0xe86c8b[_0x5d1859(0x1dd)],_0x5d1a0c[_0x5d1859(0x1c8)]=_0xe86c8b['accumulatedQuantity'],_0x5d1a0c[_0x5d1859(0x16a)]={'cost':_0xe86c8b[_0x5d1859(0x174)],'currency':_0xe86c8b[_0x5d1859(0x1c9)]},_0xa7d0dd('filled'),await validateOrders();if(lockOrders==ORDERS[_0x5d1859(0x1c0)])currentCoins=await getCoins();await updateCoinResults(_0x5d1a0c);}}});!_0x5d5fde&&(_0xa7d0dd(_0x160a53(0x1c8)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x2d4dda=JSON[_0x160a53(0x159)](lastBalances[_0x160a53(0x128)]);const _0x111b5e=_0x2d4dda[_0x160a53(0x208)](_0x10a72d=>noslash(_0x10a72d[_0x160a53(0x20b)])==_0xe86c8b['symbol']);if(_0x111b5e){if(_0x2c1c49=='NEW')_0x111b5e[_0x160a53(0x11c)]=_0x111b5e[_0x160a53(0x11c)]==_0x160a53(0x1c8)?_0x160a53(0x1c8):'open';else{if(_0x2c1c49==_0x160a53(0x111))_0x111b5e[_0x160a53(0x11c)]=_0x111b5e[_0x160a53(0x11c)]==_0x160a53(0x1c8)?_0x160a53(0x1c8):_0x160a53(0x10d);else _0x2c1c49==_0x160a53(0x13b)&&(_0x111b5e[_0x160a53(0x11c)]=_0x160a53(0x1c8));}}lastBalances={...lastBalances,'portfolio':JSON[_0x160a53(0xf1)](_0x2d4dda)},proxyEmit(_0x160a53(0x1fc),{'serverversion':serverversion,'balances':lastBalances});}}}async function getCoins(_0x5cd632=![],_0x52de48=!![],_0x40d9e7=config[_0x4781fc(0x22b)]){const _0xbb4476=_0x4781fc;let _0x58e724,_0x4c8d09=[],_0x5ccf61=[],_0x5b070a=[];try{_0x58e724=await exchange[_0xbb4476(0x1c3)](),mybalances=_0x58e724[_0xbb4476(0x124)];if(!_0x52de48)for(const [_0x4b16aa,_0x15bdb2]of Object['entries'](mybalances)){_0x5b070a[_0xbb4476(0x17e)](_0x4b16aa);}else config['portfolio'][_0xbb4476(0x1ef)](_0x5a6f3d=>{const _0x1d23a6=_0xbb4476;if(!_0x5a6f3d['excluded'])_0x5b070a[_0x1d23a6(0x17e)](_0x5a6f3d[_0x1d23a6(0x136)]);});if(_0x40d9e7=='')for(const [_0x3abc47,_0x2e4621]of Object[_0xbb4476(0x19e)](mybalances)){_0x2e4621[_0xbb4476(0x1c7)]()!=0x0&&_0x5ccf61[_0xbb4476(0x17e)]({'coin':_0x3abc47});}else{if(_0x5cd632)await getOpenOrders();let _0x50efec=![];for(const [_0x26afc9,_0x274774]of Object[_0xbb4476(0x19e)](mybalances)){if(_0x5b070a[_0xbb4476(0x1f1)](_0x26afc9)){const _0xd55e81=config[_0xbb4476(0x128)]['find'](_0x331143=>_0x331143['coin']==_0x26afc9),_0x260826=_0x26afc9+'/'+_0x40d9e7,_0x3c6e1d=_0x40d9e7+'/'+_0x26afc9,_0x14aec3=currentCoins['find'](_0x43ec70=>_0x43ec70['coin']==_0x26afc9);_0x50efec=![];_0x5cd632&&(_0x50efec=allOpenOrders[_0xbb4476(0x208)](_0xae7215=>_0xae7215[_0xbb4476(0x20b)]==noslash(_0xd55e81[_0xbb4476(0x20b)])));if((_0x274774[_0xbb4476(0x1c7)]()!=0x0||_0xd55e81)&&(allSymbols[_0xbb4476(0x1f1)](_0x260826)||_0x26afc9==_0x40d9e7))_0x26afc9!=_0x40d9e7&&_0x4c8d09[_0xbb4476(0x17e)](_0x260826),_0x5ccf61[_0xbb4476(0x17e)]({'coin':_0x26afc9,'symbol':_0x260826,'reverse':![],'number':Math[_0xbb4476(0xeb)](_0x274774+(_0xd55e81&&_0xd55e81[_0xbb4476(0x21c)]||0x0),0x0),'orderstatus':_0x5cd632?_0x50efec?_0xbb4476(0x190):'none':_0x14aec3?_0x14aec3['orderstatus']:'none'});else(_0x274774['toString']()!=0x0||_0xd55e81)&&allSymbols[_0xbb4476(0x1f1)](_0x3c6e1d)&&(_0x26afc9!=_0x40d9e7&&_0x4c8d09[_0xbb4476(0x17e)](_0x3c6e1d),_0x5ccf61[_0xbb4476(0x17e)]({'coin':_0x26afc9,'symbol':_0x3c6e1d,'reverse':!![],'number':Math[_0xbb4476(0xeb)](_0x274774+(_0xd55e81&&_0xd55e81[_0xbb4476(0x21c)]||0x0),0x0),'orderstatus':_0x5cd632?_0x50efec?_0xbb4476(0x190):_0xbb4476(0x1ec):_0x14aec3?_0x14aec3[_0xbb4476(0x11c)]:_0xbb4476(0x1ec)}));}}}}catch(_0x5411e7){if(!_0x52de48){if(_0x5411e7[_0xbb4476(0x1c7)]()['includes']('API-key\x20format\x20invalid'))return logHistory('error',_0xbb4476(0x225)),![];else{if(_0x5411e7['toString']()[_0xbb4476(0x1f1)]('AuthenticationError'))return logHistory(_0xbb4476(0x1b5),_0xbb4476(0x14b)),![];else{if(_0x5411e7['toString']()['includes'](_0xbb4476(0x16c)))return logHistory('error',_0xbb4476(0x1d7)),![];else await handleError(_0x5411e7,_0xbb4476(0x21a));}}}else await handleError(_0x5411e7,_0xbb4476(0x21a));}return _0x5ccf61;}async function getCoinNumber(_0x76b569){const _0x2ee71c=_0x4781fc;let _0x5b35;try{const _0x489400=await exchange[_0x2ee71c(0x1c3)]();_0x5b35=_0x489400[_0x2ee71c(0x124)][_0x76b569];}catch(_0x405a61){await handleError(_0x405a61,'getCoinNumber()');}return _0x5b35;}async function getOpenOrders(){const _0x4562c4=_0x4781fc;let _0x2fb8f4;allOpenOrders=[];try{for(const _0x293588 of config[_0x4562c4(0x128)]){!_0x293588['excluded']&&_0x293588[_0x4562c4(0x136)]!=config[_0x4562c4(0x22b)]&&(_0x2fb8f4=await exchange[_0x4562c4(0x168)](_0x293588[_0x4562c4(0x20b)]),_0x2fb8f4[_0x4562c4(0x177)]>0x0&&allOpenOrders['push'](_0x2fb8f4[0x0]));}}catch(_0x3c8359){await handleError(_0x3c8359,_0x4562c4(0x100));}}async function handleOpenOrders(_0x355cf6=0x0){const _0x5671cc=_0x4781fc;allOpenOrders[_0x5671cc(0x177)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x355cf6==0x0?(_0x355cf6++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):validateOrders(_0x5671cc(0x20d)));}async function getPortfolio(_0x4ccd69){const _0x432249=_0x4781fc;let _0x3f568d=[],_0x26f340=[],_0x56ac8f,_0x5b30dc=[],_0x3affd8,_0x6dacf7;_0x4ccd69[_0x432249(0xf6)]==='************'||_0x4ccd69[_0x432249(0x20c)]==='************'?(_0x3affd8=config[_0x432249(0xf6)],_0x6dacf7=config['apiSecret']):(_0x3affd8=_0x4ccd69[_0x432249(0xf6)],_0x6dacf7=_0x4ccd69[_0x432249(0x20c)]);await initExchange(_0x3affd8,_0x6dacf7);let _0x256e7d=await loadSymbols();if(_0x256e7d){_0x5b30dc=await getCoins(![],![],_0x4ccd69[_0x432249(0x22b)]);if(_0x5b30dc===![])proxyEmit(_0x432249(0x128),![]);else{if(_0x4ccd69[_0x432249(0x22b)]=='')proxyEmit('portfolio',_0x5b30dc);else{_0x5b30dc[_0x432249(0x1ef)](_0x2cd6c3=>{const _0x4f1858=_0x432249;if(_0x2cd6c3['coin']!=_0x4ccd69['basecoin'])_0x3f568d[_0x4f1858(0x17e)](_0x2cd6c3['symbol']);});try{_0x26f340=await exchange['fetchTickers'](_0x3f568d);}catch(_0x3181da){await handleError(_0x3181da,_0x432249(0x1ea));}_0x5b30dc[_0x432249(0x1ef)](_0x288c18=>{const _0x4ca99c=_0x432249;_0x288c18['coin']!=_0x4ccd69[_0x4ca99c(0x22b)]?_0x56ac8f=_0x288c18['reverse']?0x1/_0x26f340[_0x288c18[_0x4ca99c(0x20b)]][_0x4ca99c(0x12f)]:_0x26f340[_0x288c18[_0x4ca99c(0x20b)]][_0x4ca99c(0x12f)]:_0x56ac8f=0x1,_0x288c18[_0x4ca99c(0x1f7)]=formatResult(_0x56ac8f,0x8);}),proxyEmit('portfolio',_0x5b30dc);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x47005c){const _0xf72425=_0x4781fc;let _0x337ed5=!![];const _0x1cf76c=!_0x47005c[_0xf72425(0x118)]?markets[_0x47005c['symbol']][_0xf72425(0x16b)][_0xf72425(0x17d)][_0xf72425(0x123)]:markets[_0x47005c[_0xf72425(0x20b)]]['limits'][_0xf72425(0x143)][_0xf72425(0x123)],_0x2b8209=!_0x47005c['reverse']?markets[_0x47005c['symbol']][_0xf72425(0x16b)][_0xf72425(0x143)][_0xf72425(0x123)]:markets[_0x47005c[_0xf72425(0x20b)]]['limits'][_0xf72425(0x17d)]['min'],_0x185a2b=markets[_0x47005c[_0xf72425(0x20b)]]['precision'][_0xf72425(0x17d)];_0x47005c[_0xf72425(0x12b)]=formatResultTruncate(_0x47005c[_0xf72425(0x12b)],_0x185a2b);if(Math['abs'](_0x47005c['trade'])<_0x1cf76c)_0x337ed5=![];if(Math['abs'](_0x47005c[_0xf72425(0x12b)])*_0x47005c[_0xf72425(0x12f)]<_0x2b8209)_0x337ed5=![];if(_0x47005c[_0xf72425(0x102)]==_0xf72425(0x109)){let _0x5d4e12=config['portfolio'][_0xf72425(0x208)](_0x45b401=>_0x45b401[_0xf72425(0x136)]==_0x47005c[_0xf72425(0x136)]);if(_0x5d4e12[_0xf72425(0x21c)]>0x0){if(Math[_0xf72425(0x186)](_0x47005c[_0xf72425(0x12b)])>_0x47005c['number']-_0x5d4e12[_0xf72425(0x21c)])_0x337ed5=![];}else{if(Math[_0xf72425(0x186)](_0x47005c[_0xf72425(0x12b)])>_0x47005c[_0xf72425(0x170)])_0x337ed5=![];}}if(_0x47005c[_0xf72425(0x102)]==_0xf72425(0xec)){let _0x321561=config[_0xf72425(0x128)]['find'](_0x3edfa7=>_0x3edfa7['coin']==config['basecoin']),_0x1203c5=currentCoins[_0xf72425(0x208)](_0x41cd31=>_0x41cd31[_0xf72425(0x136)]==config[_0xf72425(0x22b)]);if(_0x321561['offset']>0x0){if(Math[_0xf72425(0x186)](_0x47005c['trade'])*_0x47005c[_0xf72425(0x12f)]>_0x1203c5[_0xf72425(0x170)]-_0x321561[_0xf72425(0x21c)])_0x337ed5=![];}else{if(Math[_0xf72425(0x186)](_0x47005c[_0xf72425(0x12b)])*_0x47005c[_0xf72425(0x12f)]>_0x1203c5[_0xf72425(0x170)])_0x337ed5=![];}}return _0x337ed5;}async function getBalances(){const _0x4dc48f=_0x4781fc;let _0x5a5859=0x0,_0x417e6a;const _0x524e91=config['threshold'];if(config['headless']&&config[_0x4dc48f(0x211)]<0x0)await validate24hChanges();currentCoins[_0x4dc48f(0x1ef)](_0x266891=>{const _0x4a0bb5=_0x4dc48f;if(_0x266891[_0x4a0bb5(0x136)]!=config[_0x4a0bb5(0x22b)]){let _0x2ea7d1=global[_0x4a0bb5(0x171)][noslash(_0x266891[_0x4a0bb5(0x20b)])];_0x417e6a=_0x266891['reverse']?0x1/_0x2ea7d1:_0x2ea7d1;}else _0x417e6a=0x1;let _0x36af52=_0x266891[_0x4a0bb5(0x170)]*_0x417e6a;_0x5a5859+=_0x36af52,_0x266891[_0x4a0bb5(0x12f)]=formatResult(Number(_0x417e6a),0x8),_0x266891['value']=_0x36af52;}),currentCoins['forEach'](_0x257ab7=>{const _0x3f611c=_0x4dc48f;let _0x1bbdf4=config[_0x3f611c(0x128)]['find'](_0x59e65b=>_0x59e65b[_0x3f611c(0x136)]==_0x257ab7[_0x3f611c(0x136)]),_0x44efa5=Number(_0x1bbdf4[_0x3f611c(0x194)]),_0x2ce10a=_0x257ab7[_0x3f611c(0x21f)]/_0x5a5859*0x64,_0x816ad0=_0x44efa5*_0x5a5859/0x64/_0x257ab7[_0x3f611c(0x12f)]-_0x257ab7[_0x3f611c(0x170)];_0x257ab7[_0x3f611c(0x194)]=formatResult(_0x2ce10a,0x3),_0x257ab7['target']=formatResult(_0x44efa5,0x3),_0x257ab7[_0x3f611c(0x12b)]=formatResult(_0x816ad0,0x8),_0x257ab7[_0x3f611c(0x102)]='',_0x257ab7[_0x3f611c(0x1a2)]=![];if(_0x257ab7[_0x3f611c(0x136)]!=config[_0x3f611c(0x22b)]){if(_0x257ab7[_0x3f611c(0x194)]>_0x44efa5)_0x257ab7[_0x3f611c(0x102)]=_0x3f611c(0x109),_0x257ab7['valid']=checkMinimums(_0x257ab7);else _0x257ab7[_0x3f611c(0x194)]<_0x44efa5&&(_0x257ab7[_0x3f611c(0x102)]='buy',_0x257ab7[_0x3f611c(0x1a2)]=checkMinimums(_0x257ab7));}_0x257ab7[_0x3f611c(0x1d2)]=_0x257ab7[_0x3f611c(0x194)]/_0x257ab7['target']-0x1;if(_0x257ab7[_0x3f611c(0x11c)]=='filled'||_0x257ab7[_0x3f611c(0x11c)]=='canceled')_0x257ab7['orderstatus']=_0x3f611c(0x1ec);}),currentCoins['sort']((_0x3dff04,_0x109d78)=>_0x3dff04['delta']<_0x109d78['delta']?0x1:_0x109d78['delta']<_0x3dff04[_0x4dc48f(0x1d2)]?-0x1:0x0);const _0x354d8e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x354d8e['eur'],'usd':_0x354d8e[_0x4dc48f(0x160)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x524e91},proxyEmit(_0x4dc48f(0x1fc),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4dc48f(0x1b7)])headlessMode({'portfolio':currentCoins,'threshold':_0x524e91});else{if(lockOrders==ORDERS[_0x4dc48f(0x1bf)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x524e91});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x59f6c3=_0x4781fc;if(!lastBalances)return;let _0x5c8cb5=[],_0x9f25b9,_0x13cd47=JSON[_0x59f6c3(0x159)](lastBalances[_0x59f6c3(0x128)]);_0x13cd47['sort']((_0x4cf7fc,_0x3f487b)=>_0x4cf7fc['coin']>_0x3f487b[_0x59f6c3(0x136)]?0x1:_0x3f487b['coin']>_0x4cf7fc[_0x59f6c3(0x136)]?-0x1:0x0),_0x13cd47['forEach'](_0x237653=>{const _0xabed9a=_0x59f6c3;let _0x4818d2={'coin':_0x237653[_0xabed9a(0x136)],'number':_0x237653[_0xabed9a(0x170)],'price':_0x237653[_0xabed9a(0x12f)]};_0x5c8cb5[_0xabed9a(0x17e)](_0x4818d2);});const _0x311569=await getFiat();_0x9f25b9={'date':lastBalances[_0x59f6c3(0x14e)]['split']('\x20')[0x0],'eur':_0x311569[_0x59f6c3(0x1b6)],'usd':_0x311569[_0x59f6c3(0x160)],'coins':_0x5c8cb5};let _0xf82e91=dbPerformance[_0x59f6c3(0x184)](_0x59f6c3(0x18c))[_0x59f6c3(0x208)]({'date':_0x9f25b9['date']})['value']();_0xf82e91?_0x9f25b9[_0x59f6c3(0x139)]!=config['startdate']&&dbPerformance[_0x59f6c3(0x184)](_0x59f6c3(0x18c))['find']({'date':_0x9f25b9[_0x59f6c3(0x139)]})['assign'](_0x9f25b9)[_0x59f6c3(0x19c)]():dbPerformance[_0x59f6c3(0x184)]('data')[_0x59f6c3(0x17e)](_0x9f25b9)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x9914e6=_0x4781fc;let _0x4fc684=[];if(dbPerformance['has']('data')[_0x9914e6(0x21f)]()){let _0x400338=dbPerformance['get'](_0x9914e6(0x18c))[_0x9914e6(0x200)]()[_0x9914e6(0x209)](_0x9914e6(0x139))[_0x9914e6(0x21f)](),_0x43dd7b=[...config[_0x9914e6(0x17f)]];_0x43dd7b[_0x9914e6(0x1d3)]((_0x194766,_0x53c812)=>_0x194766['date']>_0x53c812[_0x9914e6(0x139)]?-0x1:_0x53c812[_0x9914e6(0x139)]>_0x194766['date']?0x1:0x0);let _0x275dbd=0x1,_0x47056e=[],_0x3767fa=0x0;_0x400338[_0x9914e6(0x206)]()[_0x9914e6(0x118)]()['forEach']((_0xbdb873,_0x373a5f)=>{const _0x2657c3=_0x9914e6;if(_0x43dd7b[_0x3767fa]){if(_0x400338[_0x400338[_0x2657c3(0x177)]-_0x373a5f]&&_0x43dd7b[_0x3767fa][_0x2657c3(0x139)]==_0x400338[_0x400338['length']-_0x373a5f][_0x2657c3(0x139)]){if(_0x373a5f<_0x400338[_0x2657c3(0x177)]){let _0x309354=0x0,_0x473f9b=0x0;_0x400338[_0x400338['length']-_0x373a5f][_0x2657c3(0x1d4)][_0x2657c3(0x1ef)](_0x39a3ed=>{const _0x5e1285=_0x2657c3;_0x473f9b+=_0x39a3ed[_0x5e1285(0x170)]*_0x39a3ed[_0x5e1285(0x1f7)];}),_0x43dd7b[_0x3767fa][_0x2657c3(0x1b9)][_0x2657c3(0x1ef)](_0x10424f=>{const _0xcbc83c=_0x2657c3;_0x309354+=_0x10424f[_0xcbc83c(0x170)]*_0x10424f[_0xcbc83c(0x1f7)];}),_0x275dbd*=_0x309354/(_0x473f9b-_0x309354)+0x1;}_0x3767fa++;}}let _0x11b089=0x0;_0xbdb873['coins'][_0x2657c3(0x1ef)](_0x14fd70=>{const _0x3aedb3=_0x2657c3;_0x11b089+=_0x14fd70['number']*_0x14fd70[_0x3aedb3(0x1f7)];}),_0x47056e[_0x400338['length']-_0x373a5f-0x1]=_0x11b089*(_0x275dbd-0x1);});let _0x25cccc=[];_0x43dd7b=[...config['liquidity']]||[];let _0x22ae9c=0x0;_0x3767fa=0x0,_0x400338[_0x9914e6(0x1ef)]((_0x2eb17c,_0x3126b0)=>{const _0x7a2102=_0x9914e6;if(_0x43dd7b[_0x3767fa]){const _0x5a5744=fns[_0x7a2102(0x159)](_0x43dd7b[_0x3767fa][_0x7a2102(0x139)],_0x7a2102(0x178),new Date()),_0x210d8a=fns[_0x7a2102(0x159)](_0x2eb17c[_0x7a2102(0x139)],_0x7a2102(0x178),new Date());if(fns[_0x7a2102(0x201)](_0x5a5744,_0x210d8a)){let _0x594548=0x0;_0x43dd7b[_0x3767fa]['changes'][_0x7a2102(0x1ef)](_0x2b296b=>{const _0x247dad=_0x7a2102;!_0x25cccc[_0x2b296b[_0x247dad(0x136)]]?_0x25cccc[_0x2b296b[_0x247dad(0x136)]]=_0x2b296b[_0x247dad(0x170)]:(_0x594548=_0x25cccc[_0x2b296b['coin']],_0x25cccc[_0x2b296b[_0x247dad(0x136)]]+=_0x2b296b[_0x247dad(0x170)]);const _0x3e7574=_0x2eb17c['coins'][_0x247dad(0x208)](_0x31d169=>_0x31d169[_0x247dad(0x136)]==_0x2b296b[_0x247dad(0x136)]);(!_0x3e7574||_0x3e7574[_0x247dad(0x170)]==0x0)&&(_0x22ae9c+=(-_0x2b296b[_0x247dad(0x170)]-_0x594548)*_0x2b296b[_0x247dad(0x1f7)]);}),_0x3767fa++;}}_0x2eb17c[_0x7a2102(0x1d4)]['forEach']((_0x23b4e8,_0x4d8bdc)=>{const _0x3497e2=_0x7a2102;_0x25cccc[_0x23b4e8[_0x3497e2(0x136)]]&&(_0x23b4e8={..._0x23b4e8,'initial':_0x25cccc[_0x23b4e8[_0x3497e2(0x136)]]}),_0x2eb17c[_0x3497e2(0x1d4)][_0x4d8bdc]=_0x23b4e8;}),_0x4fc684['push']({'date':_0x2eb17c[_0x7a2102(0x139)],'eur':_0x2eb17c[_0x7a2102(0x1b6)],'usd':_0x2eb17c[_0x7a2102(0x160)],'offset':_0x47056e[_0x3126b0],'netoffset':_0x22ae9c,'coins':_0x2eb17c[_0x7a2102(0x1d4)]});});}return _0x4fc684;}function emitPerformance(_0x167edd){const _0x513289=_0x4781fc;_0x167edd[_0x513289(0x177)]!==0x0?(proxyEmit(_0x513289(0x192),_0x167edd),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x4efbf1,_0xc3f095){const _0x54fef9=_0x4781fc;let _0x5d9b1a=0x0,_0x368595=0x0,_0x56bffd=0x0;_0x4efbf1[_0x54fef9(0x1d4)]['forEach'](_0x28150d=>{const _0x1e252f=_0x54fef9;_0x5d9b1a+=_0x28150d['number']*_0x28150d[_0x1e252f(0x1f7)];});_0xc3f095&&(_0x5d9b1a+=_0x4efbf1[_0x54fef9(0x21c)]);if(config[_0x54fef9(0x22b)]===_0x54fef9(0x1b1)||config[_0x54fef9(0x22b)]==='ETH')_0x368595=_0x5d9b1a*_0x4efbf1[_0x54fef9(0x1b6)],_0x56bffd=_0x5d9b1a*_0x4efbf1[_0x54fef9(0x160)];else{if(config['basecoin']===_0x54fef9(0x229)||config[_0x54fef9(0x22b)]==='USDT')_0x368595=_0x5d9b1a*_0x4efbf1[_0x54fef9(0x1b6)]/_0x4efbf1[_0x54fef9(0x160)],_0x56bffd=_0x5d9b1a;else config['basecoin']===_0x54fef9(0x19f)&&(_0x368595=_0x5d9b1a,_0x56bffd=_0x5d9b1a*_0x4efbf1[_0x54fef9(0x160)]/_0x4efbf1[_0x54fef9(0x1b6)]);}return[_0x5d9b1a,_0x368595,_0x56bffd];}function getKPIs(_0x2407f5,_0x46c92e=_0x4781fc(0x19f)){const _0x4a7b5b=_0x4781fc,_0x3b63da=config[_0x4a7b5b(0x22b)],_0x53db28=config[_0x4a7b5b(0x1fc)],_0x35a8ed=currentCoins,_0x11b46f=getNormalizedPerformance(),_0x4ff44f=_0x2407f5===_0x4a7b5b(0x22b)?_0x3b63da:_0x2407f5===_0x4a7b5b(0x1ac)||_0x2407f5===_0x4a7b5b(0xf4)?_0x46c92e:_0x4a7b5b(0x1e2)+_0x3b63da,_0x26c02c=_0x2407f5===_0x4a7b5b(0x222)?'Net\x20effect':_0x2407f5==='net-fiat'?_0x4a7b5b(0x17b)+_0x4ff44f+')':_0x4ff44f+_0x4a7b5b(0x228),_0x11e187=_0x2407f5===_0x4a7b5b(0x222)||_0x2407f5===_0x4a7b5b(0xf4)?_0x4a7b5b(0x152):_0x4ff44f+_0x4a7b5b(0x144);let _0x4f7df9=0x0;_0x35a8ed[_0x4a7b5b(0x1ef)](_0x1264a6=>{const _0x5e7b5a=_0x4a7b5b;_0x4f7df9+=_0x1264a6[_0x5e7b5a(0x170)]*_0x1264a6[_0x5e7b5a(0x12f)];});if(_0x2407f5==='fiat'||_0x2407f5===_0x4a7b5b(0xf4)){if(_0x3b63da===_0x4a7b5b(0x1b1)||_0x3b63da===_0x4a7b5b(0x13d))_0x4f7df9=_0x4f7df9*(_0x46c92e==='EUR'?_0x53db28[_0x4a7b5b(0x1b6)]:_0x53db28[_0x4a7b5b(0x160)]);else{if(_0x3b63da===_0x4a7b5b(0x229)||_0x3b63da===_0x4a7b5b(0x183))_0x4f7df9=_0x4f7df9*(_0x46c92e===_0x4a7b5b(0x19f)?_0x53db28['eur']/_0x53db28[_0x4a7b5b(0x160)]:0x1);else _0x3b63da===_0x4a7b5b(0x19f)&&(_0x4f7df9=_0x4f7df9*(_0x46c92e===_0x4a7b5b(0x19f)?0x1:_0x53db28[_0x4a7b5b(0x160)]/_0x53db28['eur']));}}let _0x482aa5;if(_0x4f7df9!==0x0){if(_0x2407f5===_0x4a7b5b(0x22b))_0x482aa5=(_0x4f7df9/startingBalances[_0x4a7b5b(0x22b)]-0x1)*0x64;else{if(_0x46c92e===_0x4a7b5b(0x19f))_0x482aa5=(_0x4f7df9/startingBalances[_0x4a7b5b(0x1b6)]-0x1)*0x64;else _0x482aa5=(_0x4f7df9/startingBalances[_0x4a7b5b(0x160)]-0x1)*0x64;}let _0x4998d2=0x0;if(startingBalances[_0x4a7b5b(0x1d4)])_0x35a8ed['forEach'](_0x87c585=>{const _0x504628=_0x4a7b5b;let _0x1f2767=startingBalances[_0x504628(0x1d4)][_0x504628(0x208)](_0x22cfc5=>_0x22cfc5['coin']===_0x87c585[_0x504628(0x136)]);if(_0x1f2767&&_0x1f2767[_0x504628(0x136)]&&_0x87c585[_0x504628(0x170)]!==0x0)_0x4998d2+=_0x1f2767[_0x504628(0x170)]*_0x87c585[_0x504628(0x12f)];});let _0x7177ae=0x0;if(_0x11b46f[_0x4a7b5b(0x177)]!==0x0){let _0xa24f42=_0x11b46f[_0x11b46f[_0x4a7b5b(0x177)]-0x1];_0x7177ae=_0xa24f42[_0x4a7b5b(0x10a)];}_0x4998d2-=_0x7177ae;_0x2407f5==='net-basecoin'&&(_0x482aa5=(_0x4f7df9-_0x4998d2)/startingBalances[_0x4a7b5b(0x22b)]*0x64,_0x4f7df9=_0x4f7df9-_0x4998d2);if(_0x2407f5===_0x4a7b5b(0xf4)){let _0x408287=_0x46c92e===_0x4a7b5b(0x19f)?startingBalances[_0x4a7b5b(0x1b6)]:startingBalances['usd'];if(_0x3b63da===_0x4a7b5b(0x1b1)||_0x3b63da===_0x4a7b5b(0x13d))_0x4998d2=_0x46c92e===_0x4a7b5b(0x19f)?_0x4998d2*_0x53db28[_0x4a7b5b(0x1b6)]:_0x4998d2*_0x53db28[_0x4a7b5b(0x160)];else{if(_0x3b63da==='BUSD'||_0x3b63da==='USDT')_0x4998d2=_0x46c92e==='EUR'?_0x4998d2*_0x53db28['eur']/_0x53db28['usd']:_0x4998d2;else _0x3b63da===_0x4a7b5b(0x19f)&&(_0x4998d2=_0x46c92e===_0x4a7b5b(0x19f)?_0x4998d2:_0x4998d2*_0x53db28[_0x4a7b5b(0x160)]/_0x53db28[_0x4a7b5b(0x1b6)]);}_0x482aa5=(_0x4f7df9-_0x4998d2)/_0x408287*0x64,_0x4f7df9=_0x4f7df9-_0x4998d2;}if(_0x482aa5){if(_0x482aa5<0x64)_0x482aa5=_0x482aa5[_0x4a7b5b(0x215)](0x2);else{if(_0x482aa5<0x3e8)_0x482aa5=_0x482aa5[_0x4a7b5b(0x215)](0x1);else _0x482aa5=_0x482aa5[_0x4a7b5b(0x215)](0x0);}}else _0x482aa5=Number('0')[_0x4a7b5b(0x215)](0x2);if(_0x4f7df9){if(Math[_0x4a7b5b(0x186)](_0x4f7df9)<0.000001)_0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x2);else{if(Math['abs'](_0x4f7df9)<0.1)_0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x6);else{if(Math[_0x4a7b5b(0x186)](_0x4f7df9)<0x1)_0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x5);else{if(Math[_0x4a7b5b(0x186)](_0x4f7df9)<0xa)_0x4f7df9=_0x4f7df9['toFixed'](0x4);else{if(Math[_0x4a7b5b(0x186)](_0x4f7df9)<0x64)_0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x3);else{if(Math[_0x4a7b5b(0x186)](_0x4f7df9)<0x3e8)_0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x2);else _0x4f7df9=_0x4f7df9[_0x4a7b5b(0x215)](0x2);}}}}}}else _0x4f7df9=Number('0')[_0x4a7b5b(0x215)](0x2);}else _0x482aa5=Number('0')[_0x4a7b5b(0x215)](0x2);return{'value':_0x4f7df9,'change':_0x482aa5,'leftTxt':_0x26c02c,'rightTxt':_0x11e187};}async function getStartingBalances(_0x43fe25,_0x14a84f=!![]){const _0x3f3983=_0x4781fc;if(_0x43fe25[_0x3f3983(0x177)]!==0x0){const [_0x5bce51,_0x58b66e,_0x59c50]=getPerf(_0x43fe25[0x0],!![]);let _0x3b3c9f=[];config[_0x3f3983(0x128)][_0x3f3983(0x1ef)](_0x12a18a=>{const _0x33cc3f=_0x3f3983;let _0x10e238=0x0,_0xc5e62c;config[_0x33cc3f(0x17f)][_0x33cc3f(0x1ef)](_0x31e7c8=>{const _0x4b2656=_0x33cc3f;let _0x37ae64=_0x31e7c8['changes']['find'](_0x97596b=>_0x97596b['coin']==_0x12a18a[_0x4b2656(0x136)]);if(_0x37ae64){_0x10e238+=_0x37ae64[_0x4b2656(0x170)];if(!_0xc5e62c)_0xc5e62c=_0x37ae64['price'];}}),_0x3b3c9f[_0x33cc3f(0x17e)]({'coin':_0x12a18a[_0x33cc3f(0x136)],'number':_0x10e238,'initialprice':_0xc5e62c});});const _0x5c76e0={'basecoin':_0x5bce51,'eur':_0x58b66e,'usd':_0x59c50,'coins':_0x3b3c9f};if(_0x14a84f)proxyEmit(_0x3f3983(0xf5),_0x5c76e0);startingBalances=_0x5c76e0;}}function headlessMode(_0x4f1df6){const _0x5aaf45=_0x4781fc;let _0x35108e=_0x4f1df6[_0x5aaf45(0x128)],_0x24cf57=_0x4f1df6[_0x5aaf45(0x126)],_0x10fae0=[];for(let _0x3dc778 of _0x35108e){if(_0x3dc778[_0x5aaf45(0x136)]!=config['basecoin']){if(_0x3dc778[_0x5aaf45(0x1d2)]>=_0x24cf57/0x64){if(_0x3dc778[_0x5aaf45(0x1a2)])_0x10fae0[_0x5aaf45(0x17e)](_0x3dc778);}else{if(_0x3dc778['delta']<=-_0x24cf57/0x64){if(_0x3dc778[_0x5aaf45(0x1a2)])_0x10fae0['push'](_0x3dc778);}}}}_0x10fae0['length']>0x0&&placeOrder(_0x10fae0);}function notifyBalance(_0xced985){const _0x104d31=_0x4781fc;let _0x3e6567=_0xced985['portfolio'],_0x4fc289=_0xced985['threshold'],_0x3efcfc=[];for(let _0x3976a3 of _0x3e6567){if(_0x3976a3['coin']!=config[_0x104d31(0x22b)]){if(_0x3976a3[_0x104d31(0x1d2)]>=_0x4fc289/0x64){if(_0x3976a3[_0x104d31(0x1a2)])_0x3efcfc['push'](_0x3976a3);}else{if(_0x3976a3[_0x104d31(0x1d2)]<=-_0x4fc289/0x64){if(_0x3976a3[_0x104d31(0x1a2)])_0x3efcfc['push'](_0x3976a3);}}}}if(_0x3efcfc['length']>0x0){let _0x1f0e7c=_0x3efcfc[_0x104d31(0x1bb)](_0x47f1f3=>_0x47f1f3[_0x104d31(0x136)]);_0x1f0e7c['sort']();let _0x1d793c=_0x1f0e7c[_0x104d31(0x1c4)](',\x20');if(lastCoinsToBalance!==_0x1d793c)logHistory(_0x104d31(0x185),_0x104d31(0x204)+_0x1d793c);lastCoinsToBalance=_0x1d793c;}}function symbolToCoin(_0x3dcb24){const _0x28b045=_0x4781fc;let _0x55372c;if(_0x3dcb24[_0x28b045(0x1f1)]('/'+config[_0x28b045(0x22b)]))_0x55372c=_0x3dcb24[_0x28b045(0xed)]('/'+config[_0x28b045(0x22b)],'');if(_0x3dcb24[_0x28b045(0x1f1)](config[_0x28b045(0x22b)]+'/'))_0x55372c=_0x3dcb24[_0x28b045(0xed)](config[_0x28b045(0x22b)]+'/','');return _0x55372c;}async function unlockOrders(){const _0x5e49d4=_0x4781fc;if(allOrdersPlaced){lockOrders=ORDERS[_0x5e49d4(0x14d)],currentCoins=await getCoins(),validateOrdersState='initial';if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=ORDERS[_0x5e49d4(0x1bf)];}}async function validateOrders(_0x236790){const _0x456978=_0x4781fc;if(_0x236790)validateOrdersState=_0x236790;let _0x14163b=[],_0x5eaf7e=config[_0x456978(0x1b0)]==_0x456978(0x10b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x456978(0x1c0)])return;lastOrders['forEach'](_0x44da3c=>{const _0x11d7db=_0x456978;let _0x3e0d1c=![];_0x44da3c[_0x11d7db(0x1c8)]>0x0&&(_0x3e0d1c=!![]),_0x14163b[_0x11d7db(0x17e)](_0x3e0d1c),_0x3e0d1c&&config[_0x11d7db(0x1b0)]!=_0x11d7db(0x10b)&&logHistory(_0x11d7db(0x175),_0x11d7db(0x132)+_0x44da3c[_0x11d7db(0x20b)]+'\x20'+_0x44da3c[_0x11d7db(0x102)]+'\x20#'+formatResult(_0x44da3c[_0x11d7db(0x1c8)],0x8)+'\x20@'+formatResult(_0x44da3c['price'],0x8));}),_0x14163b[_0x456978(0x1ef)]((_0x55f251,_0x439df3)=>{const _0x1ae36d=_0x456978;if(_0x55f251)lastOrders[_0x1ae36d(0x19d)](_0x439df3,0x1);});const _0x50fb31=coolingDown?_0x456978(0x14f):_0x456978(0x22d);if(validateOrdersState==_0x456978(0x1ad))validateOrdersState='ongoing',_0x14163b[_0x456978(0x1f1)](![])?config[_0x456978(0x1b0)]=='market'?logHistory(_0x456978(0x1b5),_0x456978(0x1d5)):logHistory(_0x456978(0x1b5),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x456978(0x142)){if(_0x14163b[_0x456978(0x1f1)](![])){}else allOrdersPlaced&&(config[_0x456978(0x1b0)]==_0x456978(0x10b)?logHistory(_0x456978(0x185),_0x456978(0x1be)+_0x50fb31):logHistory('success',_0x456978(0x1b3)+_0x50fb31),await unlockOrders());}else{if(validateOrdersState==_0x456978(0x1b2))_0x14163b[_0x456978(0x1f1)](![])&&(config[_0x456978(0x1b0)]==_0x456978(0x10b)?logHistory(_0x456978(0x185),_0x456978(0x110)+Math[_0x456978(0x1a0)](_0x5eaf7e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x50fb31):(await cancelOrders(),logHistory(_0x456978(0x185),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x456978(0x1a0)](_0x5eaf7e*validateOrderInterval/0xea60)+_0x456978(0x117)+_0x50fb31))),await unlockOrders();else{if(validateOrdersState==_0x456978(0x20d)){if(config[_0x456978(0x1b0)]!=_0x456978(0x10b))logHistory(_0x456978(0x185),'No\x20more\x20open\x20orders\x20-\x20'+_0x50fb31);await unlockOrders();}}}}}async function cancelOrders(){const _0x555c89=_0x4781fc;lastOrders[_0x555c89(0x1ef)](async _0x58c934=>{const _0x47a6b3=_0x555c89;try{const _0x83419a=await exchange[_0x47a6b3(0x221)](_0x58c934[_0x47a6b3(0x1a7)],_0x58c934['symbol']);}catch(_0x35c9d4){if(_0x35c9d4[_0x47a6b3(0x1c7)]()[_0x47a6b3(0x1f1)](_0x47a6b3(0x12c))){}else await handleError(_0x35c9d4,_0x47a6b3(0x1ff));}});}async function initCoinResults(){const _0x396ebb=_0x4781fc;let _0x108016=[];config['portfolio'][_0x396ebb(0x1ef)](_0x40fd9d=>{const _0x2a1074=_0x396ebb;if(!_0x40fd9d['excluded']&&_0x40fd9d['coin']!=config[_0x2a1074(0x22b)]){let _0xe98e8d=dbCoinResults[_0x2a1074(0x184)]('coins')[_0x2a1074(0x208)]({'coin':_0x40fd9d[_0x2a1074(0x136)]})[_0x2a1074(0x21f)]();if(!_0xe98e8d){const _0x1c172d=currentCoins[_0x2a1074(0x208)](_0x4c5a85=>_0x4c5a85[_0x2a1074(0x136)]==_0x40fd9d[_0x2a1074(0x136)]),_0x33885e=global[_0x2a1074(0x171)][noslash(_0x40fd9d[_0x2a1074(0x20b)])];let _0x45e970=_0x1c172d?_0x1c172d[_0x2a1074(0x170)]:null,_0x2500a7=_0x40fd9d[_0x2a1074(0x118)]?0x1/_0x33885e:_0x33885e,_0x15118f;config['liquidity'][_0x2a1074(0x1ef)](_0x4003a5=>{const _0x52ef5d=_0x2a1074;!_0x15118f&&(_0x15118f=_0x4003a5[_0x52ef5d(0x1b9)][_0x52ef5d(0x208)](_0x49ea51=>_0x49ea51[_0x52ef5d(0x136)]==_0x40fd9d['coin']),_0x15118f&&(_0x45e970=_0x15118f['number'],_0x2500a7=_0x15118f[_0x52ef5d(0x1f7)]));}),_0x108016['push']({'coin':_0x40fd9d[_0x2a1074(0x136)],'number':_0x45e970,'price':_0x2500a7});}}}),_0x108016[_0x396ebb(0x1ef)](_0x11b91b=>{const _0x219f8b=_0x396ebb,_0x1e2f10={'coin':_0x11b91b['coin'],'number':_0x11b91b[_0x219f8b(0x170)],'breakeven':_0x11b91b[_0x219f8b(0x1f7)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x219f8b(0x184)]('coins')[_0x219f8b(0x17e)](_0x1e2f10)[_0x219f8b(0x19c)]();});}async function updateCoinResults(_0x2a7d12,_0xbc8a2c=![]){const _0x4cac81=_0x4781fc;let _0x5d463c,_0x24a7c6,_0xf50f64,_0x175f03,_0x563284,_0xd301af,_0x164f29=dbCoinResults[_0x4cac81(0x184)](_0x4cac81(0x1d4))['find']({'coin':_0x2a7d12[_0x4cac81(0x136)]})[_0x4cac81(0x21f)]();!_0x164f29&&await initCoinResults();_0x2a7d12[_0x4cac81(0x118)]&&(_0xd301af={'filled':_0x2a7d12[_0x4cac81(0x1c8)]*_0x2a7d12[_0x4cac81(0x1f7)],'amount':_0x2a7d12[_0x4cac81(0x1c8)]*_0x2a7d12[_0x4cac81(0x1f7)],'side':_0x2a7d12['side']==_0x4cac81(0x109)?_0x4cac81(0xec):'sell','price':0x1/_0x2a7d12[_0x4cac81(0x1f7)]},_0x2a7d12={..._0x2a7d12,..._0xd301af});_0xbc8a2c?_0x24a7c6=_0x2a7d12[_0x4cac81(0x102)]==_0x4cac81(0xec)?_0x164f29[_0x4cac81(0x170)]+_0x2a7d12[_0x4cac81(0x1c8)]:_0x164f29['number']-_0x2a7d12[_0x4cac81(0x1c8)]:_0x24a7c6=await getCoinNumber(_0x2a7d12[_0x4cac81(0x136)]);if(_0x2a7d12['fee']&&_0x2a7d12[_0x4cac81(0x16a)][_0x4cac81(0x14a)]==config[_0x4cac81(0x22b)])_0x5d463c=_0x2a7d12[_0x4cac81(0x16a)][_0x4cac81(0x143)];else{if(_0x2a7d12['fee']&&_0x2a7d12[_0x4cac81(0x16a)]['currency']==_0x4cac81(0x226)&&!_0xbc8a2c)_0x5d463c=_0x2a7d12[_0x4cac81(0x16a)]['cost']*global[_0x4cac81(0x171)][_0x4cac81(0x226)+config[_0x4cac81(0x22b)]];else _0x5d463c=defaultFee*_0x2a7d12[_0x4cac81(0x1c8)]*_0x2a7d12[_0x4cac81(0x1f7)];}_0x2a7d12['side']==_0x4cac81(0xec)?(_0xf50f64=_0x24a7c6!=0x0?(_0x164f29[_0x4cac81(0x1ae)]*_0x164f29[_0x4cac81(0x170)]+_0x2a7d12[_0x4cac81(0x1f7)]*(_0x24a7c6-_0x164f29[_0x4cac81(0x170)])+_0x5d463c)/_0x24a7c6:0x0,_0x175f03=_0x164f29[_0x4cac81(0x227)]):(_0xf50f64=_0x24a7c6!=0x0?(_0x164f29[_0x4cac81(0x1ae)]*_0x164f29[_0x4cac81(0x170)]-_0x2a7d12[_0x4cac81(0x1f7)]*(_0x164f29[_0x4cac81(0x170)]-_0x24a7c6)+_0x5d463c)/_0x24a7c6:0x0,_0x175f03=_0x164f29[_0x4cac81(0x227)]+(_0x2a7d12[_0x4cac81(0x1f7)]-_0x164f29['breakeven'])*_0x2a7d12[_0x4cac81(0x1c8)]);_0x563284=(_0x2a7d12[_0x4cac81(0x1f7)]-_0xf50f64-_0x5d463c/_0x2a7d12[_0x4cac81(0x1c8)])*_0x24a7c6;let _0x391b11={'coin':_0x2a7d12[_0x4cac81(0x136)],'number':_0x24a7c6,'breakeven':formatResult(_0xf50f64,0x8),'realized':formatResult(_0x175f03,0x8),'unrealized':formatResult(_0x563284,0x8),'fees':formatResult(_0x164f29[_0x4cac81(0x121)]+_0x5d463c,0x8),'sells':_0x2a7d12[_0x4cac81(0x102)]==_0x4cac81(0x109)?_0x164f29[_0x4cac81(0x1c5)]+0x1:_0x164f29[_0x4cac81(0x1c5)],'buys':_0x2a7d12[_0x4cac81(0x102)]==_0x4cac81(0xec)?_0x164f29[_0x4cac81(0x12a)]+0x1:_0x164f29[_0x4cac81(0x12a)]};dbCoinResults[_0x4cac81(0x184)]('coins')[_0x4cac81(0x208)]({'coin':_0x2a7d12['coin']})['assign'](_0x391b11)[_0x4cac81(0x19c)]();if(!_0xbc8a2c){if(_0x2a7d12[_0x4cac81(0x16a)]&&_0x2a7d12[_0x4cac81(0x16a)]['currency']==_0x4cac81(0x226)){const _0x1903f5=currentCoins['find'](_0xea341b=>_0xea341b[_0x4cac81(0x136)]==_0x4cac81(0x226));if(_0x1903f5){let _0x5a8f37=dbCoinResults[_0x4cac81(0x184)]('coins')[_0x4cac81(0x208)]({'coin':_0x4cac81(0x226)})['value']();_0x391b11={..._0x5a8f37,'number':_0x1903f5[_0x4cac81(0x170)]},dbCoinResults['get']('coins')[_0x4cac81(0x208)]({'coin':_0x4cac81(0x226)})['assign'](_0x391b11)[_0x4cac81(0x19c)]();}}}}async function placeOrder(_0x2fd92e){const _0x129cdb=_0x4781fc,_0x135469=config[_0x129cdb(0x1b0)]==_0x129cdb(0x10b)?_0x129cdb(0x10b):_0x129cdb(0x1a9);if(lockOrders==ORDERS[_0x129cdb(0x1bf)]&&!coolingDown){lockOrders=ORDERS[_0x129cdb(0x1c0)],allOrdersPlaced=![],validateOrdersState='initial',lastOrders=[];for(const _0x1153ab of _0x2fd92e){let _0x5d708f,_0x23f17e,_0x36ac5e,_0x589474,_0x212065,_0x537bf4=_0x1153ab[_0x129cdb(0x20b)];try{const _0x1e0b41=await exchange[_0x129cdb(0x11b)]([_0x537bf4]),_0x4a95be=_0x1e0b41[_0x537bf4];_0x5d708f=_0x1153ab[_0x129cdb(0x118)]?0x1/_0x1153ab[_0x129cdb(0x12f)]:_0x1153ab[_0x129cdb(0x12f)],_0x23f17e=_0x4a95be['bid'],_0x36ac5e=_0x4a95be[_0x129cdb(0x1b4)];_0x1153ab[_0x129cdb(0x118)]?(_0x589474=_0x1153ab[_0x129cdb(0x102)]=='buy'?_0x129cdb(0x109):'buy',_0x212065=Math[_0x129cdb(0x186)](_0x1153ab[_0x129cdb(0x12b)])/_0x5d708f):(_0x589474=_0x1153ab[_0x129cdb(0x102)],_0x212065=Math[_0x129cdb(0x186)](_0x1153ab[_0x129cdb(0x12b)]));_0x135469==_0x129cdb(0x1a9)&&(config['ordertype']=='limit-high'&&(_0x5d708f=_0x589474==_0x129cdb(0xec)?_0x23f17e:_0x36ac5e),config[_0x129cdb(0x1b0)]=='limit-low'&&(_0x5d708f=_0x589474==_0x129cdb(0xec)?_0x36ac5e:_0x23f17e));_0x212065=formatResult(_0x212065,0x8),_0x5d708f=formatResult(_0x5d708f,0x8);const _0x3c3cc1=await exchange[_0x129cdb(0x11e)](_0x537bf4,_0x135469,_0x589474,_0x212065,_0x5d708f);lastOrders[_0x129cdb(0x17e)]({'orderId':_0x3c3cc1['id'],'symbol':_0x537bf4,'coin':_0x1153ab[_0x129cdb(0x136)],'side':_0x589474,'reverse':_0x1153ab[_0x129cdb(0x118)],'amount':_0x3c3cc1[_0x129cdb(0x17d)],'filled':0x0,'price':_0x3c3cc1[_0x129cdb(0x1f7)],'fee':_0x3c3cc1[_0x129cdb(0x16a)]});const _0xfd9590=_0x589474=='sell'?config[_0x129cdb(0x16d)]?String[_0x129cdb(0x1ce)]('0x'+config[_0x129cdb(0x16d)])+'\x20':'':config[_0x129cdb(0x137)]?String[_0x129cdb(0x1ce)]('0x'+config[_0x129cdb(0x137)])+'\x20':'',_0x6286cc=_0x135469==_0x129cdb(0x10b)?_0x129cdb(0x104):config[_0x129cdb(0x1b0)]==_0x129cdb(0x22c)?'Limit\x20(high-margin)':'Limit\x20(low-margin)';if(_0x135469=='market')logHistory(_0x129cdb(0x175),''+_0xfd9590+_0x6286cc+'\x20order:\x20'+_0x537bf4+'\x20'+_0x589474+'\x20#'+formatResult(_0x3c3cc1[_0x129cdb(0x1c8)],0x8)+'\x20@'+formatResult(_0x3c3cc1[_0x129cdb(0x1f7)],0x8));else logHistory(_0x129cdb(0x175),''+_0xfd9590+_0x6286cc+_0x129cdb(0x205)+_0x537bf4+'\x20'+_0x589474+'\x20#'+formatResult(_0x3c3cc1[_0x129cdb(0x17d)],0x8)+'\x20@'+formatResult(_0x3c3cc1[_0x129cdb(0x1f7)],0x8));let _0x4748ac=currentCoins[_0x129cdb(0x208)](_0x438ff3=>_0x438ff3[_0x129cdb(0x136)]==_0x1153ab[_0x129cdb(0x136)]);_0x4748ac[_0x129cdb(0x11c)]=_0x129cdb(0x190);if(config[_0x129cdb(0x181)]!=0x0){let _0x2ecc2f=null;if(cooldownTracker[_0x129cdb(0x177)]==config[_0x129cdb(0x181)]-0x1)_0x2ecc2f=cooldownTracker[_0x129cdb(0x154)]();const _0x49fa49=getTimeStamp();cooldownTracker[_0x129cdb(0x17e)](_0x49fa49);if(_0x2ecc2f){const _0x446e33=fns[_0x129cdb(0x176)](new Date(_0x49fa49),new Date(_0x2ecc2f));if(_0x446e33<cooldownInterval){logHistory(_0x129cdb(0x1b5),_0x129cdb(0x1af)+config['cooldown']+_0x129cdb(0x198)+cooldownInterval/0x3c+_0x129cdb(0x131)+cooldownPeriod/(0xe10*0x3e8)+_0x129cdb(0xf7)),coolingDown=!![];break;}}}}catch(_0x135c0f){if(_0x135c0f[_0x129cdb(0x1c7)]()['includes'](_0x129cdb(0x1f9)))logHistory(_0x129cdb(0x1b5),_0x129cdb(0x13f)+_0x537bf4);else{if(_0x135c0f['toString']()[_0x129cdb(0x1f1)](_0x129cdb(0x20e)))logHistory(_0x129cdb(0x1b5),'Order\x20amount\x20is\x20invalid:\x20'+_0x537bf4);else await handleError(_0x135c0f,_0x129cdb(0xfb),_0x537bf4);}}}allOrdersPlaced=!![],setTimeout(function(){validateOrders();},0x1388);const _0x368ed7=config[_0x129cdb(0x1b0)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x129cdb(0x157)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x411c3d=_0x129cdb;validateOrders(_0x411c3d(0x1b2));},_0x368ed7),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x129cdb(0x185),_0x129cdb(0x1f3)));}else{if(coolingDown)!config[_0x129cdb(0x1b7)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x129cdb(0x1bf)]&&(!config[_0x129cdb(0x1b7)]&&(config[_0x129cdb(0x1b0)]==_0x129cdb(0x10b)?logHistory('error',_0x129cdb(0x189)):logHistory(_0x129cdb(0x1b5),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x52ecc9=_0x4781fc;let _0x5de6f5;lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x52ecc9(0x142),currentCoins[_0x52ecc9(0x1ef)](_0x3a6be8=>{const _0x412d1b=_0x52ecc9,_0x321b4d=allOpenOrders[_0x412d1b(0x208)](_0x50f925=>_0x50f925[_0x412d1b(0x20b)]==_0x3a6be8['symbol']);_0x321b4d&&(lastOrders[_0x412d1b(0x17e)]({'orderId':_0x321b4d['id'],'symbol':_0x3a6be8[_0x412d1b(0x20b)],'coin':_0x3a6be8[_0x412d1b(0x136)],'side':_0x321b4d[_0x412d1b(0x102)],'reverse':_0x3a6be8[_0x412d1b(0x118)],'amount':_0x321b4d[_0x412d1b(0x17d)],'filled':0x0,'price':_0x321b4d[_0x412d1b(0x1f7)],'fee':_0x321b4d[_0x412d1b(0x16a)]}),_0x3a6be8[_0x412d1b(0x11c)]=_0x412d1b(0x190),_0x5de6f5=_0x321b4d[_0x412d1b(0x148)]);}),allOrdersPlaced=!![];const _0x538d7a=new Date()['getTime'](),_0xd11547=config['ordertype']==_0x52ecc9(0x10b)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5de6f5+_0xd11547>_0x538d7a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5de6f5+_0xd11547-_0x538d7a);}else validateOrders(_0x52ecc9(0x1b2));}async function sendPortfolioTelegram(){const _0x291de8=_0x4781fc;if(loading[_0x291de8(0x199)]!=0x64){process['send']({'telegrammsg':_0x291de8(0x21e)},_0x39eb86=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x9a16fb=['EUR','BUSD','USDT'],_0x43bff0=_0x9a16fb[_0x291de8(0x1f1)](config['basecoin'])?0x2:0x8;let _0x14e0d7='';if(config[_0x291de8(0x13e)])_0x14e0d7=_0x291de8(0x1e9)+config['botname']+_0x291de8(0x1df);else _0x14e0d7=_0x291de8(0x1ab)+botID+_0x291de8(0x1df);const _0x4ac7c9=getKPIs(_0x291de8(0x22b)),_0x1a4c5e=getKPIs('net-basecoin');_0x14e0d7+=_0x291de8(0x1b8),_0x14e0d7+=_0x4ac7c9[_0x291de8(0xff)]+_0x291de8(0x19b)+_0x4ac7c9[_0x291de8(0x21f)]+'\x20\x0a',_0x14e0d7+=_0x4ac7c9[_0x291de8(0x1d1)]+':\x20'+_0x4ac7c9[_0x291de8(0x107)]+_0x291de8(0x182),_0x14e0d7+=_0x1a4c5e['leftTxt']+':\x20'+_0x1a4c5e[_0x291de8(0x21f)]+'\x20'+config['basecoin']+'\x0a',_0x14e0d7+=_0x1a4c5e[_0x291de8(0x1d1)]+':\x20'+_0x1a4c5e[_0x291de8(0x107)]+_0x291de8(0x182),_0x14e0d7+='\x0a',_0x14e0d7+=_0x291de8(0x13a),_0x14e0d7+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x14e0d7+=_0x291de8(0x13a),currentCoins['forEach'](_0x249ed3=>{const _0xfb0218=_0x291de8;_0x14e0d7+=_0x249ed3[_0xfb0218(0x136)]['padEnd'](0x7)+'|\x20'+formatPad(_0x249ed3[_0xfb0218(0x194)],0x2,0x6)+'|\x20'+formatPad(_0x249ed3[_0xfb0218(0x15f)],0x2,0x6)+'|\x20'+formatPad(_0x249ed3['delta']*0x64,0x2,0x6)+'\x0a';}),_0x14e0d7+='</pre>',process['send']({'telegrammsg':_0x14e0d7},_0x3d977f=>{});}function formatPad(_0x466568,_0x48e25b,_0x39f757){const _0xf22f79=_0x4781fc,_0x5f46dc=formatResultString(_0x466568,_0x48e25b);return _0x5f46dc?_0x5f46dc[_0xf22f79(0x130)](_0x39f757):''[_0xf22f79(0x130)](_0x39f757);}function logHistory(_0x4da1b6,_0x1a8a1d,_0x44cf20=''){const _0x247386=_0x4781fc;let _0x29b9f4={'time':getTimeStamp(),'type':_0x4da1b6,'event':_0x1a8a1d};dbLogs[_0x247386(0x184)]('logs')['push'](_0x29b9f4)[_0x247386(0x19c)]();if(_0x44cf20=='')_0x44cf20=_0x1a8a1d;proxyEmit(_0x247386(0xf0),{'log':_0x29b9f4,'summary':_0x44cf20}),process[_0x247386(0x101)]({'telegram':{..._0x29b9f4,'botname':config[_0x247386(0x179)],'showname':config[_0x247386(0x13e)]}},_0x5c39ae=>{}),logging(''+_0x29b9f4[_0x247386(0xf0)]);}function emitHistory(_0x49f279={}){const _0x20e093=_0x4781fc;Object[_0x20e093(0x161)](_0x49f279)[_0x20e093(0x177)]==0x0&&(_0x49f279={'type':[_0x20e093(0x175),_0x20e093(0xf0)],'event':'','page':0x1});if(_0x49f279[_0x20e093(0x1bd)][_0x20e093(0x1f1)]('event'))_0x49f279[_0x20e093(0x1bd)][_0x20e093(0x19d)](_0x49f279[_0x20e093(0x1bd)][_0x20e093(0x210)](_0x20e093(0xf0)),0x1,_0x20e093(0x1b5),'success');if(dbLogs[_0x20e093(0x162)](_0x20e093(0x17c))['value']()){let _0x1c9c48=dbLogs[_0x20e093(0x184)](_0x20e093(0x17c))[_0x20e093(0x1e1)](_0x2f5d80=>{const _0x5c05e6=_0x20e093;if(_0x49f279[_0x5c05e6(0x1bd)]['length']==0x0)return![];else return _0x49f279['type'][_0x5c05e6(0x1f1)](_0x2f5d80[_0x5c05e6(0x1bd)]);})[_0x20e093(0x1e1)](_0x5520df=>{const _0x5e9554=_0x20e093;if(_0x49f279[_0x5e9554(0xf0)]=='')return!![];else return _0x5520df[_0x5e9554(0xf0)][_0x5e9554(0x1fe)]()['includes'](_0x49f279[_0x5e9554(0xf0)][_0x5e9554(0x1fe)]());})[_0x20e093(0x209)]('time'),_0xced8d6=_0x1c9c48[_0x20e093(0x21f)]()[_0x20e093(0x177)];_0x1c9c48=_0x1c9c48[_0x20e093(0x118)]()[_0x20e093(0x206)]((_0x49f279[_0x20e093(0x1a4)]-0x1)*logPageSize,_0x49f279[_0x20e093(0x1a4)]*logPageSize-0x1)[_0x20e093(0x118)]()['value'](),proxyEmit(_0x20e093(0x1da),{'logs':_0x1c9c48,'total':_0xced8d6});}else proxyEmit(_0x20e093(0x1da),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x4d5c74){const _0x4c1950=_0x4781fc;if(dbLogs['has']('logs')[_0x4c1950(0x21f)]()){const _0x3f2706=dbLogs[_0x4c1950(0x184)]('logs')[_0x4c1950(0x209)](_0x4c1950(0x14e))[_0x4c1950(0x1e1)](_0x3fc648=>{const _0x2f331b=_0x4c1950;return _0x3fc648[_0x2f331b(0x1bd)]==_0x2f331b(0x175);})['value']();dbLogs['get']('logs')[_0x4c1950(0x15e)]()['write'](),dbLogs[_0x4c1950(0x184)](_0x4c1950(0x17c))['assign'](_0x3f2706)[_0x4c1950(0x19c)](),emitHistory(_0x4d5c74);}}async function pauseBot(_0x204be7=''){const _0x172eab=_0x4781fc,_0x351620=new Date()[_0x172eab(0x1d6)]();if(!lastBotPause)lastBotPause=new Date()[_0x172eab(0x1d6)](),consecutivePauses=0x1;else{if(_0x351620-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x172eab(0x101)]({'stop':'restart'},_0x13b7e5=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x172eab(0x1d6)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x204be7)_0x204be7+='\x20|\x20';logHistory(_0x172eab(0x1b5),_0x204be7+_0x172eab(0x10c)+pauseBotInterval/0xea60+_0x172eab(0x224)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x22c80a=_0x4781fc;process[_0x22c80a(0x101)]({'stop':_0x22c80a(0x149)},_0x265f62=>{}),await sleep(0x7d0);}async function handleError(_0x175b5f,_0x110e22,_0x388bc2=''){const _0xcc4782=_0x4781fc;if(_0x175b5f[_0xcc4782(0x1c7)]()[_0xcc4782(0x1f1)]('DDoSProtection'))await pauseBot(_0xcc4782(0x1db));else{if(_0x175b5f[_0xcc4782(0x1c7)]()[_0xcc4782(0x1f1)]('ExchangeNotAvailable'))await pauseBot('Binance\x20not\x20available\x20(2)');else{if(_0x175b5f['toString']()[_0xcc4782(0x1f1)](_0xcc4782(0x1e0)))await pauseBot(_0xcc4782(0x1a8));else{if(_0x175b5f[_0xcc4782(0x1c7)]()[_0xcc4782(0x1f1)](_0xcc4782(0x1e6)))logHistory(_0xcc4782(0x1b5),_0x110e22+_0xcc4782(0x19a)),logHistory(_0xcc4782(0x1b5),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x175b5f['toString']()[_0xcc4782(0x1f1)](_0xcc4782(0x12e)))logHistory(_0xcc4782(0x1b5),_0x110e22+_0xcc4782(0x125)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x175b5f['toString']()['includes'](_0xcc4782(0x16c)))logHistory('error',_0x110e22+_0xcc4782(0x18a)),logHistory(_0xcc4782(0x1b5),_0xcc4782(0x1f5)),await killBot();else{if(_0x175b5f[_0xcc4782(0x1c7)]()[_0xcc4782(0x1f1)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0xcc4782(0x1b5),_0x110e22+'\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0xcc4782(0x1b5),_0xcc4782(0x1f5)),await killBot();else{if(_0x175b5f[_0xcc4782(0x1c7)]()[_0xcc4782(0x1f1)](_0xcc4782(0x10f)))await pauseBot(_0xcc4782(0x1fa)),process[_0xcc4782(0x101)]({'stop':_0xcc4782(0x1c6)},_0x5b210a=>{});else _0x175b5f['toString']()[_0xcc4782(0x1f1)]('InsufficientFunds')?logHistory(_0xcc4782(0x1b5),_0x110e22+_0xcc4782(0x196)+_0x388bc2):(logging(_0x110e22+'\x20|\x20Error\x20details:\x20',_0x175b5f),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x583d3b,_0x10cef1){const _0x545bb0=_0x4781fc;return parseFloat(_0x583d3b[_0x545bb0(0x215)](_0x10cef1));}function formatResultTruncate(_0x47c75f,_0x212c50){let _0x354978=formatResultString(_0x47c75f,0xa),_0x12551a=_0x354978['indexOf']('.');return _0x12551a!=-0x1&&(_0x354978=_0x354978['slice'](0x0,_0x12551a+_0x212c50+0x1)),Number(_0x354978);}function formatResultString(_0x4b11a5,_0x44fa8e){const _0x266eef=_0x4781fc;let _0x1bc738;if(!(''+_0x4b11a5)['includes']('e'))_0x1bc738=+(Math[_0x266eef(0x1a0)](_0x4b11a5+'e+'+_0x44fa8e)+'e-'+_0x44fa8e);else{let _0x2801e7=(''+_0x4b11a5)['split']('e'),_0x1b840d='';+_0x2801e7[0x1]+_0x44fa8e>0x0&&(_0x1b840d='+'),_0x1bc738=+(Math[_0x266eef(0x1a0)](+_0x2801e7[0x0]+'e'+_0x1b840d+(+_0x2801e7[0x1]+_0x44fa8e))+'e-'+_0x44fa8e);}return Number(_0x1bc738)[_0x266eef(0x215)](_0x44fa8e);}function logging(_0xea2b5c,_0x34c9ca=''){const _0x3289f1=_0x4781fc;if(config[_0x3289f1(0x13e)])console[_0x3289f1(0x216)](getTimeStamp()+':\x20'+config['botname']+_0x3289f1(0x20a)+_0xea2b5c,_0x34c9ca);else console[_0x3289f1(0x216)](getTimeStamp()+':\x20Bot\x20'+botID+_0x3289f1(0x20a)+_0xea2b5c,_0x34c9ca);}function getServerTime(){const _0x1c5175=_0x4781fc,_0xbd8feb=new Date();return _0xbd8feb['getFullYear']()+'/'+(_0xbd8feb[_0x1c5175(0x155)]()+0x1)[_0x1c5175(0x1c7)]()['padStart'](0x2,'0')+'/'+_0xbd8feb[_0x1c5175(0x1ee)]()[_0x1c5175(0x1c7)]()['padStart'](0x2,'0')+'\x20'+_0xbd8feb[_0x1c5175(0x18d)]()['toString']()[_0x1c5175(0x130)](0x2,'0')+':'+_0xbd8feb[_0x1c5175(0x18b)]()[_0x1c5175(0x1c7)]()[_0x1c5175(0x130)](0x2,'0')+':'+_0xbd8feb['getSeconds']()['toString']()[_0x1c5175(0x130)](0x2,'0');}function getTimeStamp(){const _0x11f70e=_0x4781fc,_0x394831=shiftedTime();return _0x394831['getFullYear']()+'/'+(_0x394831[_0x11f70e(0x155)]()+0x1)[_0x11f70e(0x1c7)]()['padStart'](0x2,'0')+'/'+_0x394831[_0x11f70e(0x1ee)]()[_0x11f70e(0x1c7)]()[_0x11f70e(0x130)](0x2,'0')+'\x20'+_0x394831[_0x11f70e(0x18d)]()[_0x11f70e(0x1c7)]()[_0x11f70e(0x130)](0x2,'0')+':'+_0x394831[_0x11f70e(0x18b)]()[_0x11f70e(0x1c7)]()[_0x11f70e(0x130)](0x2,'0')+':'+_0x394831[_0x11f70e(0x16f)]()[_0x11f70e(0x1c7)]()[_0x11f70e(0x130)](0x2,'0');}function getDate(){const _0x4cb535=_0x4781fc,_0x146e1b=shiftedTime();return _0x146e1b['getFullYear']()+'/'+(_0x146e1b[_0x4cb535(0x155)]()+0x1)[_0x4cb535(0x1c7)]()[_0x4cb535(0x130)](0x2,'0')+'/'+_0x146e1b['getDate']()['toString']()[_0x4cb535(0x130)](0x2,'0');}function getHour(){const _0x27a31e=_0x4781fc,_0x4b3f5c=shiftedTime();return _0x4b3f5c[_0x27a31e(0x18d)]()['toString']()[_0x27a31e(0x130)](0x2,'0');}function sleep(_0x50a6c4){return new Promise(_0x32df5f=>setTimeout(_0x32df5f,_0x50a6c4));}function shiftedTime(){const _0x1e3d88=_0x4781fc,_0x52c125=new Date();let _0x3d233d=_0x52c125;if(config&&config[_0x1e3d88(0xf8)]!==0x0)_0x3d233d=fns[_0x1e3d88(0x197)](_0x52c125,{'hours':config['timeshift']});return _0x3d233d;}