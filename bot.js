const _0x2aac11=_0x5bbe;(function(_0x551d66,_0x5ec7e3){const _0xd71eb9=_0x5bbe,_0x4fa6d6=_0x551d66();while(!![]){try{const _0x3852e5=-parseInt(_0xd71eb9(0x21c))/0x1*(parseInt(_0xd71eb9(0x1cf))/0x2)+-parseInt(_0xd71eb9(0x190))/0x3+-parseInt(_0xd71eb9(0x212))/0x4*(parseInt(_0xd71eb9(0x261))/0x5)+parseInt(_0xd71eb9(0x23d))/0x6*(parseInt(_0xd71eb9(0x1f7))/0x7)+-parseInt(_0xd71eb9(0x22f))/0x8*(parseInt(_0xd71eb9(0x268))/0x9)+parseInt(_0xd71eb9(0x25c))/0xa+parseInt(_0xd71eb9(0x23a))/0xb;if(_0x3852e5===_0x5ec7e3)break;else _0x4fa6d6['push'](_0x4fa6d6['shift']());}catch(_0x4137b2){_0x4fa6d6['push'](_0x4fa6d6['shift']());}}}(_0xd341,0x1950e));const _0x592de2=function(){let _0x1b6d0b=!![];return function(_0x518c78,_0x60950a){const _0x2e3bf3=_0x1b6d0b?function(){if(_0x60950a){const _0x3c0b82=_0x60950a['apply'](_0x518c78,arguments);return _0x60950a=null,_0x3c0b82;}}:function(){};return _0x1b6d0b=![],_0x2e3bf3;};}(),_0x5e1eb1=_0x592de2(this,function(){const _0x4aaf27=_0x5bbe;return _0x5e1eb1[_0x4aaf27(0x1ce)]()['search']('(((.+)+)+)+$')[_0x4aaf27(0x1ce)]()[_0x4aaf27(0x223)](_0x5e1eb1)[_0x4aaf27(0x191)](_0x4aaf27(0x20f));});_0x5e1eb1();'use strict';const ccxt=require(_0x2aac11(0x1dd)),low=require(_0x2aac11(0x1c5)),FileSync=require(_0x2aac11(0x1f4)),fs=require('fs'),fns=require(_0x2aac11(0x241)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require('hybrid-crypto-js')[_0x2aac11(0x1a5)];let exchange,wsClient;global[_0x2aac11(0x1eb)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x2aac11(0x1cd))[_0x2aac11(0x296)],botID=process[_0x2aac11(0x19d)][0x2]||_0x2aac11(0x25b),pattern=/^[0-9]{3}$/;if(!pattern[_0x2aac11(0x243)](botID))return console[_0x2aac11(0x216)](_0x2aac11(0x194)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x2aac11(0x19b)](0x1);const userID=process[_0x2aac11(0x19d)][0x3]||'',configpath=userID?_0x2aac11(0x1f2)+userID+'/':_0x2aac11(0x1f2);!fs[_0x2aac11(0x1be)](configpath)&&fs[_0x2aac11(0x189)](configpath);const configfile=configpath+_0x2aac11(0x21a)+botID+_0x2aac11(0x188),logfile=configpath+_0x2aac11(0x21a)+botID+_0x2aac11(0x206),performancefile=configpath+_0x2aac11(0x21a)+botID+'-performance.json',coinresultsfile=configpath+_0x2aac11(0x21a)+botID+_0x2aac11(0x1c7),settingsfile=configpath+_0x2aac11(0x1fe),securefile=configpath+_0x2aac11(0x205),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2aac11(0x1fb)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2aac11(0x1fb)]({'data':[]})[_0x2aac11(0x20a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2aac11(0x1fb)]({'bot':[]})[_0x2aac11(0x20a)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2aac11(0x1fb)]({'coins':[]})[_0x2aac11(0x20a)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x2aac11(0x1a8),'symbol':_0x2aac11(0x1e3)},'usd':{'coin':'BTCUSDT','symbol':_0x2aac11(0x1e2)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5cbbbc)=>{},'debug':(..._0x1f2018)=>{},'notice':(..._0x4e86c3)=>{},'info':(..._0x1d6194)=>{},'warning':(..._0x58ad71)=>{},'error':async function(..._0x1fc9b3){const _0xf48c74=_0x2aac11,_0xc48827=new Date()[_0xf48c74(0x1bd)]();if(!lastErrorShown||_0xc48827-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0xf48c74(0x1bd)](),logHistory(_0xf48c74(0x295),_0xf48c74(0x263)+consecutivePauses+_0xf48c74(0x1b8));let _0x5024f3='';if(_0x1fc9b3[0x0])_0x5024f3+=_0x1fc9b3[0x0];if(_0x1fc9b3[0x1]&&_0x1fc9b3[0x1]['error']&&_0x1fc9b3[0x1][_0xf48c74(0x295)][_0xf48c74(0x245)])_0x5024f3+='\x20-\x20'+_0x1fc9b3[0x1]['error'][_0xf48c74(0x245)];logging(_0xf48c74(0x263)+consecutivePauses+_0xf48c74(0x23b),''+_0x5024f3),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x2aac11(0x1f9),'rsaStandard':_0x2aac11(0x27a)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x2aac11(0x1de)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process[_0x2aac11(0x1d7)]({'started':_0x2aac11(0x1b2)}),initializeProcessListeners();function proxyEmit(_0x5eed89,_0x125af1=null){const _0x2ec46a=_0x2aac11;process[_0x2ec46a(0x1d7)]({'function':_0x5eed89,'args':_0x125af1});}function initializeProcessListeners(){const _0x315a9b=_0x2aac11;process['on'](_0x315a9b(0x245),_0x4f3efb=>{const _0x1a7e50=_0x315a9b;switch(Object['keys'](_0x4f3efb)[0x0]){case'timeshift':_0x4f3efb[_0x1a7e50(0x1de)]!=undefined&&(settings[_0x1a7e50(0x1de)]=_0x4f3efb[_0x1a7e50(0x1de)],updateTimeshift(settings[_0x1a7e50(0x1de)]));break;case _0x1a7e50(0x254):switch(_0x4f3efb[_0x1a7e50(0x254)]){case _0x1a7e50(0x258):initclient();break;case _0x1a7e50(0x210):emitHistory(_0x4f3efb[_0x1a7e50(0x248)]);break;case _0x1a7e50(0x184):getPortfolio(_0x4f3efb[_0x1a7e50(0x248)]);break;case'storeConfiguration':storeConfiguration(_0x4f3efb[_0x1a7e50(0x248)]);break;case _0x1a7e50(0x250):storeHeadless(_0x4f3efb[_0x1a7e50(0x248)]);break;case _0x1a7e50(0x20e):getStartingBalances();break;case'placeOrder':placeOrder(_0x4f3efb[_0x1a7e50(0x248)]);break;case _0x1a7e50(0x233):cancelLoading();break;}}});}headlessStart();function _0xd341(){const _0x12d84e=['recreate','loadSymbols()','limit-low','splice','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','availableBalance','max','target','emojibuy','find','starting-balances','RSA-OAEP','decrypt','logs','stringify','eur','\x20orders\x20in\x20less\x20than\x20','\x20hour','createOrder','toFixed','ask','configuration','limit','length','cost','toLowerCase','Binance\x20API\x20secret\x20is\x20invalid','EUR','eachDayOfInterval','getCoins()','sort','data','\x20order:\x20','spot','buys','Order(s)\x20validated\x20-\x20balancing\x20resumed','botname','coinamount','error','version','settings','fetchBalance','fee','getPortfolio','cooldown','getFiat()','number','-config.json','mkdirSync','kline','milliseconds','Order\x20filled:\x20','OrderNotFound','format','AuthenticationError','154260viaouW','search','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','getMinutes','Error:\x20Invalid\x20argument\x20','has','executionReport','keys','HOT/BTC','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','currency','exit','kill','argv','eventType','ordertype','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','realized','Pausing\x20bot\x20for\x205\x20minutes\x20(','API-key\x20format\x20invalid','symbol','Crypt','MIN_NOTIONAL','getPortfolio()','BTCEUR','apiKey','performance','forEach','total','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','limit-high','distribution','valid','parse','running','configuration-stored','time','amount','Invalid\x20quantity','market',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','InvalidNonce','get','event-history','symbols','getTime','existsSync','orderStatus','page','Bot\x20','orderType','fetchOrders','coins','lowdb','delta','-results.json','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','push','wsKey','excluded','headless','./version.json','toString','140zbdegN','coin','limits','startdate','map','datetime','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','add','send','usd','BTCBUSD','fetchTickers','InsufficientFunds','Binance\x20API\x20key\x20is\x20invalid','ccxt','timeshift','\x20>\x20','timeout','\x20|\x20Error\x20details:\x20','BTC/USDT','BTC/EUR','apiSecret','cancel','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','privateKey','initws()','filled','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ticker','entries','close','USDT','slice','last','getFullYear','./config/','threshold','lowdb/adapters/FileSync','getMonth','binance','77ACthKI','yyyy-MM-dd\x27T\x27HH:mm:ss','sha256','sortBy','defaults','DDoSProtection','shift','bb-settings.json','************','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Performance\x20recreation\x20completed\x20successfully','buy','trade','bb-secure.json','-events.json','fetchOHLCV','portfolio','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','write','bot','min','Order:\x20','getStartingBalances','(((.+)+)+)+$','emitHistory','\x20minutes\x20-\x20balancing\x20resumed','643912FPEOUS','exchange','yyyy/MM/dd','reconnected','log','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','wsMarket','userData','bot-','fees','1088LmVAkA','wss://stream.binance.us:9443','isArray','replace','BNB','filter','reverse','constructor','Order(s)\x20filled\x20-\x20balancing\x20resumed','loadMarkets','breakeven','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','showname','startprice','includes','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','enabled','padStart','assign','639896evgSHb','getDate','balances','success','cancelLoading','remainingSymbols','orderId','sell','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','Limit\x20(high-margin)','side','5713125KhNCtM',')\x20|\x20Error\x20details:\x20','asset','9354rnOjhi','date','fromCodePoint','type','date-fns','abs','test','coin-loading-progress','message','timestamp','Executed\x20','args','getCloses()','accumulatedQuantity','offset','event','binanceus','getHours',':\x20Bot\x20','storeHeadless','Unfilled\x20order(s)\x20canceled\x20after\x20','cancelOrder()','remove','function','basecoin','closeWs','emojisell','initclient','RequestTimeout','placeOrder()','001','157020fGbkMH','Order(s)\x20not\x20validated\x20after\x20','ExchangeNotAvailable','formattedMessage','round','5lElWLe','BTC','WebSockets(','price','value','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','startnumber','18vncVOa','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','parseISO','order','secure','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','subscribeSpotKline'];_0xd341=function(){return _0x12d84e;};return _0xd341();}async function headlessStart(){reset();}async function reset(){const _0x14fc56=_0x2aac11;if(pidBalances)clearTimeout(pidBalances);if(config[_0x14fc56(0x1a9)]!=''){await initExchange(config[_0x14fc56(0x1a9)],config[_0x14fc56(0x1e4)]);let _0x27c39c=await loadSymbols();_0x27c39c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x28c66f,_0x2f7d6e){const _0x32c02d=_0x2aac11,_0x47debf=ccxt[config['exchange']];let _0x1fe6af;switch(config[_0x32c02d(0x213)]){case _0x32c02d(0x1f6):_0x1fe6af='wss://stream.binance.com:9443';break;case'binanceus':_0x1fe6af=_0x32c02d(0x21d);break;default:_0x1fe6af='wss://stream.binance.com:9443';}exchange=new _0x47debf({'apiKey':_0x28c66f,'secret':_0x2f7d6e,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x28c66f,'api_secret':_0x2f7d6e,'beautify':!![],'wsUrl':_0x1fe6af},logger),config[_0x32c02d(0x213)]==_0x32c02d(0x24d)&&(stablecoins={'eur':{'coin':_0x32c02d(0x1d9),'symbol':'BTC/BUSD'},'usd':{'coin':'BTCUSDT','symbol':_0x32c02d(0x1e2)}});}async function loadSymbols(){const _0x48cd36=_0x2aac11;let _0x2dbd5e;try{markets=await exchange[_0x48cd36(0x225)]();const _0x1dbba1=['DAI/',_0x48cd36(0x198),'HOT/EUR'];allSymbols=exchange[_0x48cd36(0x1bc)][_0x48cd36(0x221)](_0xaee7e9=>{const _0x15a651=_0x48cd36;let _0x45b19a=![];return _0x1dbba1[_0x15a651(0x1ab)](_0x56eb4a=>{const _0x4a4422=_0x15a651;if(_0xaee7e9[_0x4a4422(0x22a)](_0x56eb4a))_0x45b19a=!![];}),!_0x45b19a;}),_0x2dbd5e=!![];}catch(_0x21fd44){await handleError(_0x21fd44,_0x48cd36(0x270)),_0x2dbd5e=![];}return _0x2dbd5e;}async function initbot(){const _0x14ffb7=_0x2aac11;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x5c5ea2=dbCoinResults['get']('coins')[_0x14ffb7(0x265)]();if(_0x5c5ea2[_0x14ffb7(0x286)]==0x0)await resetCoinResults();}async function initclient(){const _0x2bb7bf=_0x2aac11;proxyEmit(_0x2bb7bf(0x284),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x206fa1=_0x2aac11;wsinitialized=![];ws1&&(ws1[_0x206fa1(0x1ab)](_0x56f08b=>{try{wsClient['closeWs'](_0x56f08b);}catch(_0xe7bf7e){}}),ws1=[]);if(ws2){try{wsClient[_0x206fa1(0x256)](ws2);}catch(_0x38ae7e){}ws2=null;}}async function initws(){const _0x423ebf=_0x2aac11;cleanws();let _0x45439b=[];currentCoins['forEach'](_0x32e6ff=>{const _0xaf7c4c=_0x5bbe;if(_0x32e6ff[_0xaf7c4c(0x1d0)]!=config[_0xaf7c4c(0x255)])_0x45439b[_0xaf7c4c(0x1c9)](noslash(_0x32e6ff[_0xaf7c4c(0x1a4)]));});if(!_0x45439b[_0x423ebf(0x22a)](stablecoins[_0x423ebf(0x27e)][_0x423ebf(0x1d0)]))_0x45439b[_0x423ebf(0x1c9)](stablecoins['eur'][_0x423ebf(0x1d0)]);if(!_0x45439b[_0x423ebf(0x22a)](stablecoins[_0x423ebf(0x1d8)][_0x423ebf(0x1d0)]))_0x45439b[_0x423ebf(0x1c9)](stablecoins[_0x423ebf(0x1d8)][_0x423ebf(0x1d0)]);if(!_0x45439b['includes'](_0x423ebf(0x220)+config[_0x423ebf(0x255)]))_0x45439b[_0x423ebf(0x1c9)]('BNB'+config[_0x423ebf(0x255)]);try{_0x45439b[_0x423ebf(0x1ab)]((_0x31cdb8,_0x3ffad8)=>{const _0x343b5b=_0x423ebf;ws1[_0x3ffad8]=wsClient[_0x343b5b(0x26e)](_0x31cdb8,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x423ebf(0x25f),_0x3c887e=>{const _0x398682=_0x423ebf;if(!Array[_0x398682(0x21e)](_0x3c887e)&&!_0x3c887e[_0x398682(0x1ca)]['includes'](_0x398682(0x219))){if(_0x3c887e[_0x398682(0x19e)]===_0x398682(0x18a)){global[_0x398682(0x1eb)][_0x3c887e[_0x398682(0x18a)][_0x398682(0x1a4)]]=_0x3c887e[_0x398682(0x18a)][_0x398682(0x1ed)];return;}}else{if(!Array['isArray'](_0x3c887e)&&_0x3c887e['wsKey'][_0x398682(0x22a)]('userData')){if(_0x3c887e[_0x398682(0x218)][_0x398682(0x22a)](_0x398682(0x290))){updateNumberCoins(_0x3c887e);return;}}}}),wsClient['on'](_0x423ebf(0x215),async _0x43a129=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x186d98){await handleError(_0x186d98,_0x423ebf(0x1e8));}let _0x102e07,_0x659649=0x0;loading[_0x423ebf(0x234)]=[];let _0x2bd646=0x0;currentCoins['forEach'](_0x1f5b66=>{const _0x228f54=_0x423ebf;if(_0x1f5b66[_0x228f54(0x1d0)]!=config[_0x228f54(0x255)])loading['remainingSymbols']['push'](_0x1f5b66[_0x228f54(0x1a4)]);}),loadingCanceled=![];while(_0x102e07!=currentCoins[_0x423ebf(0x286)]-0x1){_0x102e07=0x0,currentCoins[_0x423ebf(0x1ab)](_0x315056=>{const _0x2cf2fb=_0x423ebf;_0x315056[_0x2cf2fb(0x1d0)]!=config['basecoin']&&global[_0x2cf2fb(0x1eb)][noslash(_0x315056[_0x2cf2fb(0x1a4)])]&&(loading[_0x2cf2fb(0x234)]=loading[_0x2cf2fb(0x234)][_0x2cf2fb(0x221)](_0x4b350b=>_0x4b350b!=_0x315056[_0x2cf2fb(0x1a4)]),_0x102e07++);}),loading['progress']=Math[_0x423ebf(0x260)](_0x102e07/(currentCoins[_0x423ebf(0x286)]-0x1)*0x64);_0x2bd646>0x1e*0x5&&(loading[_0x423ebf(0x1e0)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x423ebf(0x1e5)]=!![],emitLoadingProgress();break;}else _0x102e07!=_0x659649&&(_0x659649=_0x102e07,emitLoadingProgress()),_0x2bd646++,await sleep(0xc8);}if(_0x102e07==currentCoins[_0x423ebf(0x286)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x5f5676=_0x2aac11;proxyEmit(_0x5f5676(0x244),loading);}async function getFiat(){const _0x527fae=_0x2aac11;let _0x1d6a56=0x0,_0x21777d=0x0;try{_0x1d6a56=global[_0x527fae(0x1eb)][stablecoins[_0x527fae(0x27e)]['coin']],_0x21777d=global[_0x527fae(0x1eb)][stablecoins[_0x527fae(0x1d8)]['coin']];}catch(_0x28564f){await handleError(_0x28564f,_0x527fae(0x186));}return{'eur':Number(_0x1d6a56),'usd':Number(_0x21777d)};}async function setStartDatePerformance(_0x3f5c8d){const _0x9ff69b=_0x2aac11,_0x251a29=fns['format'](new Date(_0x3f5c8d[_0x9ff69b(0x1d2)]),'yyyy/MM/dd');let _0x1040e8=[];_0x1040e8[stablecoins[_0x9ff69b(0x27e)][_0x9ff69b(0x1d0)]]=await getCloses(stablecoins[_0x9ff69b(0x27e)]['symbol'],new Date(_0x3f5c8d[_0x9ff69b(0x1d2)]),0x1),_0x1040e8[stablecoins[_0x9ff69b(0x1d8)]['coin']]=await getCloses(stablecoins[_0x9ff69b(0x1d8)]['symbol'],new Date(_0x3f5c8d[_0x9ff69b(0x1d2)]),0x1);let _0x926542,_0x377c11=[];_0x3f5c8d['portfolio']['forEach'](_0x14701b=>{const _0x1e91db=_0x9ff69b;!_0x14701b[_0x1e91db(0x1cb)]&&_0x377c11[_0x1e91db(0x1c9)]({'coin':_0x14701b[_0x1e91db(0x1d0)],'number':_0x14701b[_0x1e91db(0x267)],'price':_0x14701b['startprice']});}),_0x926542={'date':_0x251a29,'eur':_0x1040e8[stablecoins[_0x9ff69b(0x27e)][_0x9ff69b(0x1d0)]][0x0],'usd':_0x1040e8[stablecoins['usd'][_0x9ff69b(0x1d0)]][0x0],'coins':_0x377c11};let _0x194236=dbPerformance['get'](_0x9ff69b(0x28e))[_0x9ff69b(0x278)]({'date':_0x251a29})['value']();_0x194236?dbPerformance[_0x9ff69b(0x1ba)](_0x9ff69b(0x28e))[_0x9ff69b(0x278)]({'date':_0x251a29})[_0x9ff69b(0x22e)](_0x926542)[_0x9ff69b(0x20a)]():dbPerformance['get'](_0x9ff69b(0x28e))[_0x9ff69b(0x1c9)](_0x926542)[_0x9ff69b(0x20a)](),_0x194236=dbPerformance[_0x9ff69b(0x1ba)](_0x9ff69b(0x28e))[_0x9ff69b(0x1fa)](_0x9ff69b(0x23e))[_0x9ff69b(0x265)](),_0x194236['forEach'](_0x41d629=>{const _0x16a7bb=_0x9ff69b;_0x41d629[_0x16a7bb(0x23e)]<_0x251a29&&dbPerformance['get']('data')[_0x16a7bb(0x253)]({'date':_0x41d629[_0x16a7bb(0x23e)]})[_0x16a7bb(0x20a)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1bff5e){const _0x5f06b1=_0x2aac11;let _0x4640c3,_0x1cdee8=[];logHistory(_0x5f06b1(0x232),_0x5f06b1(0x1d5)),_0x1bff5e[_0x5f06b1(0x208)][_0x5f06b1(0x1ab)](_0x555150=>{const _0x396dd4=_0x5f06b1;if(_0x555150[_0x396dd4(0x1d0)]!=config[_0x396dd4(0x255)]&&!_0x555150['excluded'])_0x1cdee8[_0x396dd4(0x1c9)]({'coin':_0x555150['coin'],'symbol':_0x555150[_0x396dd4(0x1a4)]});});let _0x2e6445=[];try{const _0x2bf3c3=fns['format'](fns['parseISO'](_0x1bff5e[_0x5f06b1(0x1d2)]['replace'](/\//g,'-')),_0x5f06b1(0x1f8));for(const _0x5120fc of _0x1cdee8){if(_0x5120fc[_0x5f06b1(0x1d0)]!=config['basecoin'])_0x4640c3=await exchange[_0x5f06b1(0x1c3)](_0x5120fc[_0x5f06b1(0x1a4)],Date[_0x5f06b1(0x1b1)](_0x2bf3c3));_0x4640c3['forEach'](_0x47aafd=>{const _0x39f040=_0x5f06b1,_0x444724=_0x5120fc[_0x39f040(0x1a4)]['includes'](config[_0x39f040(0x255)]+'/'),_0x22d6f2=fns['format'](fns[_0x39f040(0x26a)](_0x47aafd['datetime']),'yyyy/MM/dd\x20HH:mm:ss'),_0x3387dd=fns[_0x39f040(0x18e)](fns[_0x39f040(0x26a)](_0x47aafd[_0x39f040(0x1d4)]),_0x39f040(0x214));let _0x2fc1b2;if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x203)&&_0x444724==![])_0x2fc1b2=_0x47aafd[_0x39f040(0x1b5)];if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x203)&&_0x444724==!![])_0x2fc1b2=-_0x47aafd['amount']*_0x47aafd[_0x39f040(0x264)];if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x236)&&_0x444724==![])_0x2fc1b2=-_0x47aafd[_0x39f040(0x1b5)];if(_0x47aafd['side']==_0x39f040(0x236)&&_0x444724==!![])_0x2fc1b2=_0x47aafd[_0x39f040(0x1b5)]*_0x47aafd[_0x39f040(0x264)];_0x2e6445[_0x39f040(0x1c9)]({'timestamp':_0x22d6f2,'date':_0x3387dd,'coin':_0x5120fc['coin'],'symbol':_0x5120fc['symbol'],'type':_0x47aafd[_0x39f040(0x240)],'side':_0x47aafd[_0x39f040(0x239)],'reverse':_0x444724,'amount':formatResult(_0x47aafd[_0x39f040(0x1e9)],0x8),'filled':formatResult(_0x47aafd[_0x39f040(0x1e9)],0x8),'coinamount':formatResult(_0x2fc1b2,0x8),'price':formatResult(_0x47aafd[_0x39f040(0x264)],0x8)});let _0xbc3c3e;if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x203)&&_0x444724==![])_0xbc3c3e=-_0x47aafd[_0x39f040(0x1b5)]*_0x47aafd[_0x39f040(0x264)];if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x203)&&_0x444724==!![])_0xbc3c3e=_0x47aafd['amount'];if(_0x47aafd['side']==_0x39f040(0x236)&&_0x444724==![])_0xbc3c3e=_0x47aafd[_0x39f040(0x1b5)]*_0x47aafd[_0x39f040(0x264)];if(_0x47aafd[_0x39f040(0x239)]==_0x39f040(0x236)&&_0x444724==!![])_0xbc3c3e=-_0x47aafd[_0x39f040(0x1b5)];_0x2e6445[_0x39f040(0x1c9)]({'date':_0x3387dd,'coin':config[_0x39f040(0x255)],'coinamount':formatResult(_0xbc3c3e,0x8)});});}_0x2e6445[_0x5f06b1(0x28d)]((_0x313bdc,_0x5db837)=>_0x313bdc[_0x5f06b1(0x246)]>_0x5db837['timestamp']?0x1:_0x5db837[_0x5f06b1(0x246)]>_0x313bdc[_0x5f06b1(0x246)]?-0x1:0x0),dbLogs['get']('logs')[_0x5f06b1(0x253)]()[_0x5f06b1(0x20a)](),_0x2e6445['forEach'](_0x30ab46=>{const _0x577ffd=_0x5f06b1;let _0x122c11;_0x30ab46[_0x577ffd(0x1d0)]!=config['basecoin']&&(_0x122c11={'time':_0x30ab46[_0x577ffd(0x246)],'type':_0x577ffd(0x26b),'event':_0x577ffd(0x20d)+_0x30ab46['symbol']+'\x20'+_0x30ab46[_0x577ffd(0x239)]+'\x20#'+_0x30ab46['amount']+'\x20@'+_0x30ab46['price']},dbLogs[_0x577ffd(0x1ba)](_0x577ffd(0x27c))[_0x577ffd(0x1c9)](_0x122c11)[_0x577ffd(0x20a)]());});const _0x5b1a12=fns[_0x5f06b1(0x28b)]({'start':new Date(_0x1bff5e[_0x5f06b1(0x1d2)]),'end':new Date()})[_0x5f06b1(0x1d3)](_0x1fe5b=>fns['format'](_0x1fe5b,_0x5f06b1(0x214)));let _0xaa7629=[];_0x1bff5e[_0x5f06b1(0x208)][_0x5f06b1(0x1ab)](_0x24a3b5=>{const _0x1355fb=_0x5f06b1;if(!_0x24a3b5[_0x1355fb(0x1cb)]){_0xaa7629[_0x24a3b5[_0x1355fb(0x1d0)]]=[];let _0x2dee36=_0x24a3b5[_0x1355fb(0x267)];_0x5b1a12[_0x1355fb(0x1ab)]((_0x1acb2b,_0x57d509)=>{const _0x4278e=_0x1355fb;let _0x3b4119=_0x2e6445[_0x4278e(0x221)](_0x1f2c03=>_0x1f2c03[_0x4278e(0x1d0)]==_0x24a3b5[_0x4278e(0x1d0)]&&_0x1f2c03['date']==_0x1acb2b);if(_0x3b4119[_0x4278e(0x286)]!=0x0){let _0x133a03=_0x3b4119['reduce']((_0x2a1de1,_0x1fa3d8)=>{const _0x464d75=_0x4278e;return _0x2a1de1+=_0x1fa3d8[_0x464d75(0x294)],_0x2a1de1;},0x0);_0x2dee36+=_0x133a03;}_0xaa7629[_0x24a3b5['coin']][_0x1acb2b]=_0x2dee36;});}});const _0x1c9446=[..._0x1cdee8];_0x1c9446['push']({'coin':stablecoins[_0x5f06b1(0x27e)][_0x5f06b1(0x1d0)],'symbol':stablecoins[_0x5f06b1(0x27e)][_0x5f06b1(0x1a4)]}),_0x1c9446[_0x5f06b1(0x1c9)]({'coin':stablecoins['usd']['coin'],'symbol':stablecoins[_0x5f06b1(0x1d8)]['symbol']});let _0x368a89=[];for(const _0xc239b0 of _0x1c9446){_0x368a89[_0xc239b0[_0x5f06b1(0x1d0)]]=await getCloses(_0xc239b0['symbol'],new Date(_0x1bff5e[_0x5f06b1(0x1d2)]));}dbPerformance['get'](_0x5f06b1(0x28e))[_0x5f06b1(0x253)]()[_0x5f06b1(0x20a)](),_0x5b1a12[_0x5f06b1(0x1ab)]((_0x120254,_0x4d5a88)=>{const _0x5aaeca=_0x5f06b1;let _0x374db5,_0x2bc549=[];_0x4d5a88==0x0?(_0x1bff5e['portfolio'][_0x5aaeca(0x1ab)](_0x19437a=>{const _0x5e8816=_0x5aaeca;!_0x19437a['excluded']&&_0x2bc549[_0x5e8816(0x1c9)]({'coin':_0x19437a[_0x5e8816(0x1d0)],'number':_0x19437a[_0x5e8816(0x267)],'price':_0x19437a[_0x5e8816(0x229)]});}),_0x374db5={'date':_0x120254,'eur':_0x368a89[stablecoins[_0x5aaeca(0x27e)][_0x5aaeca(0x1d0)]][_0x4d5a88],'usd':_0x368a89[stablecoins[_0x5aaeca(0x1d8)][_0x5aaeca(0x1d0)]][_0x4d5a88],'coins':_0x2bc549}):(_0x1bff5e[_0x5aaeca(0x208)][_0x5aaeca(0x1ab)](_0x5c8cc6=>{const _0x11bde0=_0x5aaeca;!_0x5c8cc6[_0x11bde0(0x1cb)]&&_0x2bc549['push']({'coin':_0x5c8cc6[_0x11bde0(0x1d0)],'number':_0xaa7629[_0x5c8cc6[_0x11bde0(0x1d0)]][_0x120254],'price':_0x5c8cc6[_0x11bde0(0x1d0)]==config[_0x11bde0(0x255)]?0x1:_0x368a89[_0x5c8cc6['coin']][_0x4d5a88]});}),_0x374db5={'date':_0x120254,'eur':_0x368a89[stablecoins[_0x5aaeca(0x27e)][_0x5aaeca(0x1d0)]][_0x4d5a88],'usd':_0x368a89[stablecoins[_0x5aaeca(0x1d8)][_0x5aaeca(0x1d0)]][_0x4d5a88],'coins':_0x2bc549}),dbPerformance['get']('data')[_0x5aaeca(0x1c9)](_0x374db5)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x406b29 of _0x2e6445){_0x406b29[_0x5f06b1(0x1d0)]!=config[_0x5f06b1(0x255)]&&await updateCoinResults(_0x406b29);}logHistory(_0x5f06b1(0x232),_0x5f06b1(0x202));}catch(_0x35b31d){await handleError(_0x35b31d,'recreateHistory()');}}async function getCloses(_0x357b1d,_0x4c25c6,_0xf5b04a=undefined){const _0x3f2a2e=_0x2aac11,_0x372d52='1d';let _0x9dbc4f,_0x136539;const _0x17aece=fns['differenceInCalendarDays'](new Date(),_0x4c25c6)+0x1;try{const _0x5b087a=exchange[_0x3f2a2e(0x18b)]()-_0x17aece*0x18*0xe10*0x3e8;_0x9dbc4f=await exchange[_0x3f2a2e(0x207)](_0x357b1d,_0x372d52,_0x5b087a,_0xf5b04a),_0x136539=await exchange[_0x3f2a2e(0x1da)](_0x357b1d);}catch(_0x4fca78){await handleError(_0x4fca78,_0x3f2a2e(0x249));}let _0x17103b=ohlcvToCloses(_0x9dbc4f);return _0x17103b[_0x3f2a2e(0x1c9)](_0x136539[_0x357b1d][_0x3f2a2e(0x1f0)]),_0x17103b;}function ohlcvToCloses(_0x453688){const _0x58a665=_0x2aac11;let _0xd4438e=[];return _0x453688[_0x58a665(0x1ab)](function(_0x508541){const _0x6a7281=_0x58a665;_0xd4438e[_0x6a7281(0x1c9)](_0x508541[0x4]);}),_0xd4438e;}function getConfiguration(_0x4f2d7e){const _0x14403f=_0x2aac11;let _0x155dbf=dbConfig['get'](_0x14403f(0x20b))[_0x14403f(0x278)]({'botID':_0x4f2d7e})[_0x14403f(0x265)]();if(_0x155dbf){let _0x489ca7=![];!_0x155dbf[_0x14403f(0x213)]&&(_0x155dbf={..._0x155dbf,'exchange':_0x14403f(0x1f6)},_0x489ca7=!![]),!_0x155dbf['basecoin']&&(_0x155dbf={..._0x155dbf,'basecoin':_0x14403f(0x262)},_0x489ca7=!![]),!_0x155dbf['ordertype']&&(_0x155dbf={..._0x155dbf,'ordertype':_0x14403f(0x1b7)},_0x489ca7=!![]),!_0x155dbf['timeout']&&(_0x155dbf={..._0x155dbf,'timeout':0x14},_0x489ca7=!![]),!_0x155dbf[_0x14403f(0x277)]&&(_0x155dbf={..._0x155dbf,'emojibuy':''},_0x489ca7=!![]),!_0x155dbf[_0x14403f(0x257)]&&(_0x155dbf={..._0x155dbf,'emojisell':''},_0x489ca7=!![]),!_0x155dbf[_0x14403f(0x228)]&&(_0x155dbf={..._0x155dbf,'showname':![]},_0x489ca7=!![]),_0x489ca7&&(_0x155dbf={'botID':_0x155dbf['botID'],'exchange':_0x155dbf['exchange'],'apiKey':_0x155dbf['apiKey'],'apiSecret':_0x155dbf[_0x14403f(0x1e4)],'basecoin':_0x155dbf[_0x14403f(0x255)],'botname':_0x155dbf[_0x14403f(0x293)],'showname':_0x155dbf['showname'],'threshold':_0x155dbf[_0x14403f(0x1f3)],'ordertype':_0x155dbf[_0x14403f(0x19f)],'timeout':_0x155dbf[_0x14403f(0x1e0)],'startdate':_0x155dbf[_0x14403f(0x1d2)],'recreate':_0x155dbf[_0x14403f(0x26f)],'timeshift':_0x155dbf['timeshift'],'headless':_0x155dbf['headless'],'cooldown':_0x155dbf[_0x14403f(0x185)],'emojibuy':_0x155dbf[_0x14403f(0x277)],'emojisell':_0x155dbf[_0x14403f(0x257)],'portfolio':_0x155dbf[_0x14403f(0x208)]},dbConfig[_0x14403f(0x1ba)](_0x14403f(0x20b))[_0x14403f(0x253)]()[_0x14403f(0x20a)](),dbConfig[_0x14403f(0x1ba)](_0x14403f(0x20b))[_0x14403f(0x1c9)](_0x155dbf)[_0x14403f(0x20a)]());}else _0x155dbf={'botID':_0x4f2d7e,'exchange':_0x14403f(0x1f6),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x14403f(0x1c1)+_0x4f2d7e,'showname':![],'threshold':'3','ordertype':_0x14403f(0x1b7),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x155dbf;}function emittedConfiguration(){const _0x2ba332=_0x2aac11;let _0x5543af;return config[_0x2ba332(0x1a9)]==''?_0x5543af=config:_0x5543af={...config,'apiKey':_0x2ba332(0x1ff),'apiSecret':_0x2ba332(0x1ff)},_0x5543af;}function getSettings(){const _0x411fe0=_0x2aac11;return dbSettings[_0x411fe0(0x1ba)](_0x411fe0(0x297))['value']();}function getSecure(){const _0x1225fb=_0x2aac11;return dbSecure[_0x1225fb(0x1ba)](_0x1225fb(0x26c))[_0x1225fb(0x265)]()||{};}function updateTimeshift(_0x4275b9){const _0x164d3d=_0x2aac11;let _0x42cd5d=dbConfig[_0x164d3d(0x1ba)](_0x164d3d(0x20b))[_0x164d3d(0x278)]({'botID':botID})[_0x164d3d(0x265)]();_0x42cd5d&&dbConfig[_0x164d3d(0x1ba)](_0x164d3d(0x20b))[_0x164d3d(0x278)]({'botID':botID})[_0x164d3d(0x22e)]({'timeshift':_0x4275b9})[_0x164d3d(0x20a)](),config[_0x164d3d(0x1de)]=_0x4275b9,proxyEmit('configuration',emittedConfiguration());}function _0x5bbe(_0x369600,_0x3dd689){const _0x22f40a=_0xd341();return _0x5bbe=function(_0x5e1eb1,_0x592de2){_0x5e1eb1=_0x5e1eb1-0x183;let _0xd341fa=_0x22f40a[_0x5e1eb1];return _0xd341fa;},_0x5bbe(_0x369600,_0x3dd689);}async function storeConfiguration(_0x4745ab){const _0x534afb=_0x2aac11;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x35144a=dbConfig['get'](_0x534afb(0x20b))[_0x534afb(0x278)]({'botID':botID})[_0x534afb(0x265)]();_0x4745ab={..._0x4745ab,'apiKey':crypt['decrypt'](secure['privateKey'],_0x4745ab[_0x534afb(0x1a9)])[_0x534afb(0x245)],'apiSecret':crypt[_0x534afb(0x27b)](secure[_0x534afb(0x1e7)],_0x4745ab['apiSecret'])[_0x534afb(0x245)]};if(_0x35144a){if(_0x4745ab[_0x534afb(0x1a9)]==_0x534afb(0x1ff))_0x4745ab[_0x534afb(0x1a9)]=config[_0x534afb(0x1a9)];if(_0x4745ab['apiSecret']==_0x534afb(0x1ff))_0x4745ab[_0x534afb(0x1e4)]=config['apiSecret'];dbConfig['get'](_0x534afb(0x20b))[_0x534afb(0x278)]({'botID':botID})[_0x534afb(0x22e)](_0x4745ab)['write']();}else dbConfig[_0x534afb(0x1ba)](_0x534afb(0x20b))['push'](_0x4745ab)[_0x534afb(0x20a)](),process[_0x534afb(0x1d7)]({'status':_0x534afb(0x22c),'live':'running'});config={..._0x4745ab};if(config[_0x534afb(0x26f)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x534afb(0x1d7)]({'botname':_0x4745ab['botname']}),proxyEmit(_0x534afb(0x1b3)),reset();}async function storeHeadless(_0x1d802c){const _0x131566=_0x2aac11,_0x24a1d={...config,'headless':_0x1d802c[_0x131566(0x1cc)]};let _0x4fa892=dbConfig[_0x131566(0x1ba)](_0x131566(0x20b))['find']({'botID':botID})[_0x131566(0x265)]();_0x4fa892&&dbConfig[_0x131566(0x1ba)](_0x131566(0x20b))[_0x131566(0x278)]({'botID':botID})[_0x131566(0x22e)](_0x24a1d)[_0x131566(0x20a)](),config={..._0x24a1d},proxyEmit(_0x131566(0x284),emittedConfiguration());}function noslash(_0x63c0d6){const _0x17a0ff=_0x2aac11;return _0x63c0d6[_0x17a0ff(0x21f)]('/','');}function updateNumberCoins(_0x1fe662){const _0x8e9635=_0x2aac11;_0x1fe662[_0x8e9635(0x19e)]&&_0x1fe662[_0x8e9635(0x19e)]=='outboundAccountPosition'&&_0x1fe662['balances'][_0x8e9635(0x1ab)](_0x42f0fa=>{const _0x20118a=_0x8e9635;let _0xa0cf2a=currentCoins['find'](_0x5258af=>_0x5258af['coin']==_0x42f0fa[_0x20118a(0x23c)]),_0x33c631=config['portfolio'][_0x20118a(0x278)](_0x31b088=>_0x31b088['coin']==_0x42f0fa[_0x20118a(0x23c)]);if(_0xa0cf2a&&_0x33c631)_0xa0cf2a['number']=Math[_0x20118a(0x275)](Number(_0x42f0fa[_0x20118a(0x274)])+(_0x33c631[_0x20118a(0x24b)]||0x0),0x0);});if(_0x1fe662[_0x8e9635(0x19e)]&&_0x1fe662['eventType']==_0x8e9635(0x196)){if(_0x1fe662[_0x8e9635(0x1c2)]=='LIMIT'&&_0x1fe662[_0x8e9635(0x1bf)]=='FILLED'){if(lastOrders)lastOrders['forEach'](_0x53431c=>{const _0x2b8215=_0x8e9635;if(_0x53431c[_0x2b8215(0x235)]==_0x1fe662['orderId']){if(_0x53431c[_0x2b8215(0x222)])_0x53431c[_0x2b8215(0x1e9)]=_0x1fe662[_0x2b8215(0x24a)]*_0x53431c[_0x2b8215(0x264)];else _0x53431c[_0x2b8215(0x1e9)]=_0x1fe662[_0x2b8215(0x24a)];}});}}}async function getCoins(_0x140d8d=!![],_0x23d7ff=config['basecoin']){const _0x1ab312=_0x2aac11;let _0x239954,_0x36862c=[],_0x7c9698=[],_0x57a0c3=[];try{_0x239954=await exchange[_0x1ab312(0x298)](),mybalances=_0x239954[_0x1ab312(0x1ac)];if(!_0x140d8d)for(const [_0x4569ee,_0x229efe]of Object['entries'](mybalances)){_0x57a0c3[_0x1ab312(0x1c9)](_0x4569ee);}else config['portfolio'][_0x1ab312(0x1ab)](_0x5be39b=>{const _0x40819f=_0x1ab312;if(!_0x5be39b['excluded'])_0x57a0c3['push'](_0x5be39b[_0x40819f(0x1d0)]);});if(_0x23d7ff=='')for(const [_0x36227b,_0x267085]of Object[_0x1ab312(0x1ec)](mybalances)){_0x267085[_0x1ab312(0x1ce)]()!=0x0&&_0x7c9698[_0x1ab312(0x1c9)]({'coin':_0x36227b});}else for(const [_0x43d6c7,_0x496cac]of Object[_0x1ab312(0x1ec)](mybalances)){if(_0x57a0c3['includes'](_0x43d6c7)){const _0x5e8f42=config[_0x1ab312(0x208)][_0x1ab312(0x278)](_0xa8059b=>_0xa8059b['coin']==_0x43d6c7);if((_0x496cac[_0x1ab312(0x1ce)]()!=0x0||_0x5e8f42)&&(allSymbols[_0x1ab312(0x22a)](_0x43d6c7+'/'+_0x23d7ff)||_0x43d6c7==_0x23d7ff))_0x7c9698['push']({'coin':_0x43d6c7,'symbol':_0x43d6c7+'/'+_0x23d7ff,'reverse':![],'number':Math[_0x1ab312(0x275)](_0x496cac+(_0x5e8f42&&_0x5e8f42[_0x1ab312(0x24b)]||0x0),0x0)}),_0x43d6c7!=_0x23d7ff&&_0x36862c[_0x1ab312(0x1c9)](_0x43d6c7+'/'+_0x23d7ff);else(_0x496cac[_0x1ab312(0x1ce)]()!=0x0||_0x5e8f42)&&allSymbols[_0x1ab312(0x22a)](_0x23d7ff+'/'+_0x43d6c7)&&(_0x7c9698[_0x1ab312(0x1c9)]({'coin':_0x43d6c7,'symbol':_0x23d7ff+'/'+_0x43d6c7,'reverse':!![],'number':Math[_0x1ab312(0x275)](_0x496cac+(_0x5e8f42&&_0x5e8f42['offset']||0x0),0x0)}),_0x43d6c7!=_0x23d7ff&&_0x36862c['push'](_0x23d7ff+'/'+_0x43d6c7));}}}catch(_0x22c958){if(!_0x140d8d){if(_0x22c958['toString']()[_0x1ab312(0x22a)]('API-key\x20format\x20invalid'))return logHistory(_0x1ab312(0x295),_0x1ab312(0x1dc)),![];else{if(_0x22c958[_0x1ab312(0x1ce)]()[_0x1ab312(0x22a)](_0x1ab312(0x18f)))return logHistory(_0x1ab312(0x295),_0x1ab312(0x199)),![];else{if(_0x22c958['toString']()[_0x1ab312(0x22a)](_0x1ab312(0x269)))return logHistory(_0x1ab312(0x295),_0x1ab312(0x289)),![];else await handleError(_0x22c958,_0x1ab312(0x28c));}}}else await handleError(_0x22c958,_0x1ab312(0x28c));}return _0x7c9698;}async function getPortfolio(_0x4e173f){const _0x27fe6e=_0x2aac11;let _0x130f0d=[],_0x19f8b9=[],_0xac2a29,_0x2db1e6=[],_0x4c13cf,_0x8de792;_0x4e173f[_0x27fe6e(0x1a9)]===_0x27fe6e(0x1ff)||_0x4e173f[_0x27fe6e(0x1e4)]==='************'?(_0x4c13cf=config[_0x27fe6e(0x1a9)],_0x8de792=config[_0x27fe6e(0x1e4)]):(_0x4c13cf=_0x4e173f['apiKey'],_0x8de792=_0x4e173f[_0x27fe6e(0x1e4)]);await initExchange(_0x4c13cf,_0x8de792);let _0x1ebf30=await loadSymbols();if(_0x1ebf30){_0x2db1e6=await getCoins(![],_0x4e173f['basecoin']);if(_0x2db1e6===![])proxyEmit('portfolio',![]);else{if(_0x4e173f[_0x27fe6e(0x255)]=='')proxyEmit('portfolio',_0x2db1e6);else{_0x2db1e6[_0x27fe6e(0x1ab)](_0x15cd88=>{const _0x2aaec2=_0x27fe6e;_0x130f0d[_0x2aaec2(0x1c9)](_0x15cd88[_0x2aaec2(0x1a4)]);});try{_0x19f8b9=await exchange[_0x27fe6e(0x1da)](_0x130f0d);}catch(_0x17ed76){await handleError(_0x17ed76,_0x27fe6e(0x1a7));}_0x2db1e6[_0x27fe6e(0x1ab)](_0x24c712=>{const _0x13534f=_0x27fe6e;_0x24c712[_0x13534f(0x1d0)]!=_0x4e173f[_0x13534f(0x255)]?_0xac2a29=_0x24c712[_0x13534f(0x222)]?0x1/_0x19f8b9[_0x24c712[_0x13534f(0x1a4)]][_0x13534f(0x1f0)]:_0x19f8b9[_0x24c712[_0x13534f(0x1a4)]][_0x13534f(0x1f0)]:_0xac2a29=0x1,_0x24c712['price']=formatResult(_0xac2a29,0x8);}),proxyEmit(_0x27fe6e(0x208),_0x2db1e6);}}}else proxyEmit(_0x27fe6e(0x208),![]);}function checkMinimums(_0x421649){const _0x198f59=_0x2aac11;let _0x26ff20=!![];const _0x519e02=!_0x421649['reverse']?markets[_0x421649[_0x198f59(0x1a4)]][_0x198f59(0x1d1)][_0x198f59(0x1b5)][_0x198f59(0x20c)]:markets[_0x421649[_0x198f59(0x1a4)]][_0x198f59(0x1d1)]['cost']['min'],_0x433944=!_0x421649[_0x198f59(0x222)]?markets[_0x421649[_0x198f59(0x1a4)]][_0x198f59(0x1d1)]['cost']['min']:markets[_0x421649['symbol']][_0x198f59(0x1d1)][_0x198f59(0x1b5)][_0x198f59(0x20c)];if(Math[_0x198f59(0x242)](_0x421649[_0x198f59(0x204)])<_0x519e02)_0x26ff20=![];if(Math[_0x198f59(0x242)](_0x421649[_0x198f59(0x204)])*_0x421649[_0x198f59(0x1f0)]<_0x433944)_0x26ff20=![];return _0x26ff20;}async function getBalances(){const _0x11a1ef=_0x2aac11;let _0x14a66c=0x0,_0x22f16b;const _0xb3a99e=config['threshold'];currentCoins[_0x11a1ef(0x1ab)](_0x4d501e=>{const _0x4a8345=_0x11a1ef;if(_0x4d501e[_0x4a8345(0x1d0)]!=config[_0x4a8345(0x255)]){let _0x5f576f=global[_0x4a8345(0x1eb)][noslash(_0x4d501e[_0x4a8345(0x1a4)])];_0x22f16b=_0x4d501e['reverse']?0x1/_0x5f576f:_0x5f576f;}else _0x22f16b=0x1;let _0x271ac6=_0x4d501e[_0x4a8345(0x187)]*_0x22f16b;_0x14a66c+=_0x271ac6,_0x4d501e[_0x4a8345(0x1f0)]=formatResult(Number(_0x22f16b),0x8),_0x4d501e['value']=_0x271ac6;}),currentCoins['forEach'](_0x107b3d=>{const _0x3dd465=_0x11a1ef;let _0x234799=config['portfolio']['find'](_0x3d1310=>_0x3d1310['coin']==_0x107b3d['coin']),_0xfd1915=Number(_0x234799['distribution']),_0x1598eb=_0x107b3d[_0x3dd465(0x265)]/_0x14a66c*0x64,_0x3bb5d2=_0xfd1915*_0x14a66c/0x64/_0x107b3d[_0x3dd465(0x1f0)]-_0x107b3d[_0x3dd465(0x187)];_0x107b3d[_0x3dd465(0x1af)]=formatResult(_0x1598eb,0x3),_0x107b3d['target']=formatResult(_0xfd1915,0x3),_0x107b3d['trade']=formatResult(_0x3bb5d2,0x8),_0x107b3d[_0x3dd465(0x239)]='',_0x107b3d['valid']='';if(_0x107b3d['coin']!=config['basecoin']){if(_0x107b3d['distribution']>_0xfd1915)_0x107b3d['side']=_0x3dd465(0x236),_0x107b3d[_0x3dd465(0x1b0)]=checkMinimums(_0x107b3d);else _0x107b3d[_0x3dd465(0x1af)]<_0xfd1915&&(_0x107b3d['side']='buy',_0x107b3d[_0x3dd465(0x1b0)]=checkMinimums(_0x107b3d));}_0x107b3d['delta']=_0x107b3d[_0x3dd465(0x1af)]/_0x107b3d[_0x3dd465(0x276)]-0x1;}),currentCoins[_0x11a1ef(0x28d)]((_0x2da45c,_0x28136d)=>_0x2da45c['delta']<_0x28136d[_0x11a1ef(0x1c6)]?0x1:_0x28136d[_0x11a1ef(0x1c6)]<_0x2da45c['delta']?-0x1:0x0);const _0x71a2ed=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x71a2ed[_0x11a1ef(0x27e)],'usd':_0x71a2ed[_0x11a1ef(0x1d8)],'portfolio':JSON[_0x11a1ef(0x27d)](currentCoins),'threshold':_0xb3a99e},proxyEmit(_0x11a1ef(0x231),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x11a1ef(0x1cc)])headlessMode({'portfolio':currentCoins,'threshold':_0xb3a99e});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x393a05=_0x2aac11;if(!lastBalances)return;let _0x49db09=await getStartingBalances(![]),_0x491647=[],_0x419fc9;JSON[_0x393a05(0x1b1)](lastBalances['portfolio'])[_0x393a05(0x1ab)](_0x429c60=>{const _0x2f8973=_0x393a05;let _0x41c4b2={'coin':_0x429c60[_0x2f8973(0x1d0)],'number':_0x429c60[_0x2f8973(0x187)],'price':_0x429c60[_0x2f8973(0x1f0)]};_0x491647['push'](_0x41c4b2);});const _0x39c733=await getFiat();_0x419fc9={'date':lastBalances[_0x393a05(0x1b4)]['split']('\x20')[0x0],'eur':_0x39c733[_0x393a05(0x27e)],'usd':_0x39c733[_0x393a05(0x1d8)],'coins':_0x491647};let _0x4d23ad=dbPerformance[_0x393a05(0x1ba)](_0x393a05(0x28e))[_0x393a05(0x278)]({'date':_0x419fc9[_0x393a05(0x23e)]})['value']();_0x4d23ad?dbPerformance['get'](_0x393a05(0x28e))['find']({'date':_0x419fc9[_0x393a05(0x23e)]})[_0x393a05(0x22e)](_0x419fc9)[_0x393a05(0x20a)]():dbPerformance[_0x393a05(0x1ba)](_0x393a05(0x28e))[_0x393a05(0x1c9)](_0x419fc9)[_0x393a05(0x20a)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x4fbebd=_0x2aac11;if(dbPerformance[_0x4fbebd(0x195)](_0x4fbebd(0x28e))[_0x4fbebd(0x265)]()){let _0x3718a9=dbPerformance[_0x4fbebd(0x1ba)](_0x4fbebd(0x28e))[_0x4fbebd(0x1fa)](_0x4fbebd(0x23e))[_0x4fbebd(0x265)]();proxyEmit(_0x4fbebd(0x1aa),_0x3718a9),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x4cb167=!![]){const _0xaa895c=_0x2aac11;let _0xeb37ec=dbPerformance[_0xaa895c(0x1ba)]('data')['find']({'date':config['startdate']})[_0xaa895c(0x265)]();config[_0xaa895c(0x1a9)]!=''&&!_0xeb37ec&&(await setStartDatePerformance(config),_0xeb37ec=dbPerformance['get'](_0xaa895c(0x28e))[_0xaa895c(0x278)]({'date':config[_0xaa895c(0x1d2)]})[_0xaa895c(0x265)]());if(config['apiKey']==''||!_0xeb37ec)return{};let _0x32114e=0x0,_0x5ce4eb=0x0,_0x69a66b=0x0,_0x3b712e=[],_0xa22ccb=0x0;config[_0xaa895c(0x208)][_0xaa895c(0x1ab)](_0x4b1dfa=>{const _0x44ab7c=_0xaa895c;if(!_0x4b1dfa[_0x44ab7c(0x1cb)]){_0x3b712e[_0xa22ccb]={'coin':_0x4b1dfa[_0x44ab7c(0x1d0)],'symbol':_0x4b1dfa[_0x44ab7c(0x1a4)],'number':_0x4b1dfa[_0x44ab7c(0x267)],'price':_0x4b1dfa[_0x44ab7c(0x229)]},_0x32114e+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa[_0x44ab7c(0x267)];if(config['basecoin']=='BTC')_0x5ce4eb+=_0x4b1dfa['startprice']*_0x4b1dfa[_0x44ab7c(0x267)]*_0xeb37ec[_0x44ab7c(0x27e)],_0x69a66b+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa[_0x44ab7c(0x267)]*_0xeb37ec[_0x44ab7c(0x1d8)];else{if(config[_0x44ab7c(0x255)]=='BUSD'||config[_0x44ab7c(0x255)]==_0x44ab7c(0x1ee)||config[_0x44ab7c(0x255)]=='USDC')_0x5ce4eb+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa['startnumber']*_0xeb37ec[_0x44ab7c(0x27e)]/_0xeb37ec['usd'],_0x69a66b+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa['startnumber'];else config[_0x44ab7c(0x255)]==_0x44ab7c(0x28a)&&(_0x5ce4eb+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa[_0x44ab7c(0x267)],_0x69a66b+=_0x4b1dfa[_0x44ab7c(0x229)]*_0x4b1dfa['startnumber']*_0xeb37ec[_0x44ab7c(0x1d8)]/_0xeb37ec[_0x44ab7c(0x27e)]);}_0xa22ccb++;}});let _0x54f383={'basecoin':_0x32114e,'eur':_0x5ce4eb,'usd':_0x69a66b,'coins':_0x3b712e};if(_0x4cb167)proxyEmit(_0xaa895c(0x279),_0x54f383);return _0x54f383;}function headlessMode(_0x2045d9){const _0x49031f=_0x2aac11;let _0x340d35=_0x2045d9[_0x49031f(0x208)],_0x554ffb=_0x2045d9[_0x49031f(0x1f3)],_0x4725a6=[];for(let _0x3fadd5 of _0x340d35){if(_0x3fadd5[_0x49031f(0x1d0)]!=config['basecoin']){if(_0x3fadd5[_0x49031f(0x1af)]/_0x3fadd5[_0x49031f(0x276)]-0x1>=_0x554ffb/0x64){if(_0x3fadd5[_0x49031f(0x1b0)])_0x4725a6[_0x49031f(0x1c9)](_0x3fadd5);}else{if(_0x3fadd5[_0x49031f(0x1af)]/_0x3fadd5[_0x49031f(0x276)]-0x1<=-_0x554ffb/0x64){if(_0x3fadd5[_0x49031f(0x1b0)])_0x4725a6[_0x49031f(0x1c9)](_0x3fadd5);}}}}_0x4725a6['length']>0x0&&placeOrder(_0x4725a6);}function symbolToCoin(_0x643862){const _0x38606e=_0x2aac11;let _0x254208;if(_0x643862[_0x38606e(0x22a)]('/'+config[_0x38606e(0x255)]))_0x254208=_0x643862['replace']('/'+config[_0x38606e(0x255)],'');if(_0x643862[_0x38606e(0x22a)](config[_0x38606e(0x255)]+'/'))_0x254208=_0x643862[_0x38606e(0x21f)](config['basecoin']+'/','');return _0x254208;}async function validateOrders(_0x56577f=0x0){const _0x358219=_0x2aac11;let _0x20f398=[],_0x309f45=config[_0x358219(0x19f)]==_0x358219(0x1b7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x358219(0x1e0)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x358219(0x1ab)](_0x719c1d=>{const _0x51393d=_0x358219;let _0x16d21c=previousCoins['find'](_0x3ee800=>_0x3ee800[_0x51393d(0x1d0)]==symbolToCoin(_0x719c1d['symbol'])),_0x373f82=currentCoins[_0x51393d(0x278)](_0x4050c4=>_0x4050c4['coin']==symbolToCoin(_0x719c1d[_0x51393d(0x1a4)])),_0x5ba719,_0x57be1a;_0x719c1d[_0x51393d(0x239)]=='buy'&&!_0x719c1d[_0x51393d(0x222)]||_0x719c1d['side']==_0x51393d(0x236)&&_0x719c1d['reverse']?(_0x5ba719=_0x16d21c[_0x51393d(0x187)]+0.9*_0x719c1d[_0x51393d(0x1e9)],_0x57be1a=_0x16d21c['number']+1.1*_0x719c1d[_0x51393d(0x1e9)]):(_0x5ba719=_0x16d21c[_0x51393d(0x187)]-1.1*_0x719c1d[_0x51393d(0x1e9)],_0x57be1a=_0x16d21c[_0x51393d(0x187)]-0.9*_0x719c1d[_0x51393d(0x1e9)]);const _0x264099=_0x719c1d[_0x51393d(0x1e9)]!=0x0&&_0x373f82[_0x51393d(0x187)]>=_0x5ba719&&_0x373f82[_0x51393d(0x187)]<=_0x57be1a;_0x20f398[_0x51393d(0x1c9)](_0x264099);if(_0x264099&&config['ordertype']!=_0x51393d(0x1b7)){if(_0x719c1d['reverse'])logHistory(_0x51393d(0x26b),'Order\x20filled:\x20'+_0x719c1d[_0x51393d(0x1a4)]+'\x20'+_0x719c1d[_0x51393d(0x239)]+'\x20#'+formatResult(_0x719c1d['filled']/_0x719c1d[_0x51393d(0x264)],0x8)+'\x20@'+formatResult(_0x719c1d[_0x51393d(0x264)],0x8));else logHistory(_0x51393d(0x26b),_0x51393d(0x18c)+_0x719c1d[_0x51393d(0x1a4)]+'\x20'+_0x719c1d[_0x51393d(0x239)]+'\x20#'+formatResult(_0x719c1d[_0x51393d(0x1e9)],0x8)+'\x20@'+formatResult(_0x719c1d[_0x51393d(0x264)],0x8));}}),_0x20f398[_0x358219(0x1ab)]((_0x87d45f,_0x29ea33)=>{const _0x22fe5a=_0x358219;if(_0x87d45f)lastOrders[_0x22fe5a(0x272)](_0x29ea33,0x1);});if(_0x56577f<_0x309f45&&_0x20f398[_0x358219(0x22a)](![])){if(_0x56577f==0x0){config[_0x358219(0x19f)]==_0x358219(0x1b7)?logHistory(_0x358219(0x295),_0x358219(0x217)):logHistory(_0x358219(0x295),_0x358219(0x237));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x56577f);},0xa*0x3e8);}else{(_0x56577f==0x1||_0x56577f==Math['round'](_0x309f45/0x2)||_0x56577f==_0x309f45-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x56577f);},validateOrderInterval);}}else{lockOrders=![];if(_0x56577f>0x0&&!_0x20f398['includes'](![]))config[_0x358219(0x19f)]=='market'?logHistory(_0x358219(0x232),_0x358219(0x292)):logHistory('success',_0x358219(0x224));else _0x56577f>0x0&&_0x20f398[_0x358219(0x22a)](![])&&(config[_0x358219(0x19f)]=='market'?logHistory(_0x358219(0x232),_0x358219(0x25d)+Math[_0x358219(0x260)](_0x309f45*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x358219(0x1ab)](async _0x1d8835=>{const _0x373773=_0x358219;try{const _0x25f1b3=await exchange['cancelOrder'](_0x1d8835[_0x373773(0x235)],_0x1d8835['symbol']);}catch(_0x1ef743){if(_0x1ef743['toString']()['includes'](_0x373773(0x18d))){}else await handleError(_0x1ef743,_0x373773(0x252));}}),logHistory(_0x358219(0x232),_0x358219(0x251)+Math[_0x358219(0x260)](_0x309f45*validateOrderInterval/0xea60)+_0x358219(0x211))));}}async function resetCoinResults(){const _0x1f9f24=_0x2aac11;dbCoinResults[_0x1f9f24(0x1ba)]('coins')['remove']()[_0x1f9f24(0x20a)]();let _0x14bc3f=await getStartingBalances(![]);_0x14bc3f[_0x1f9f24(0x1c4)][_0x1f9f24(0x1ab)](_0x236c34=>{const _0x2a8c9d=_0x1f9f24,_0x2142d2=_0x236c34[_0x2a8c9d(0x1a4)][_0x2a8c9d(0x22a)](config[_0x2a8c9d(0x255)]+'/');if(_0x236c34[_0x2a8c9d(0x1d0)]!=config[_0x2a8c9d(0x255)]){let _0x12c5fa={'coin':_0x236c34[_0x2a8c9d(0x1d0)],'number':_0x236c34[_0x2a8c9d(0x187)],'breakeven':_0x236c34[_0x2a8c9d(0x264)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2a8c9d(0x1ba)](_0x2a8c9d(0x1c4))[_0x2a8c9d(0x1c9)](_0x12c5fa)[_0x2a8c9d(0x20a)]();}});}async function updateCoinResults(_0xcc6bd8){const _0x1ddb73=_0x2aac11;let _0xbe03ea,_0x58796b,_0x30cf1b,_0x55434e,_0x332281,_0x59ed91,_0x3cda49=dbCoinResults['get'](_0x1ddb73(0x1c4))[_0x1ddb73(0x278)]({'coin':_0xcc6bd8[_0x1ddb73(0x1d0)]})[_0x1ddb73(0x265)]();if(!_0x3cda49)return;if(_0xcc6bd8[_0x1ddb73(0x183)]&&_0xcc6bd8[_0x1ddb73(0x183)][_0x1ddb73(0x19a)]==config[_0x1ddb73(0x255)])_0xbe03ea=_0xcc6bd8[_0x1ddb73(0x183)][_0x1ddb73(0x287)];else{if(_0xcc6bd8[_0x1ddb73(0x183)]&&_0xcc6bd8[_0x1ddb73(0x183)]['currency']==_0x1ddb73(0x220))_0xbe03ea=_0xcc6bd8['fee'][_0x1ddb73(0x287)]*global[_0x1ddb73(0x1eb)][_0x1ddb73(0x220)+config['basecoin']];else _0xbe03ea=0.001*_0xcc6bd8['filled'];}const _0x3d50fd=_0xcc6bd8['symbol']['includes'](config[_0x1ddb73(0x255)]+'/');_0x3d50fd&&(_0x59ed91={'coin':_0xcc6bd8[_0x1ddb73(0x1d0)],'symbol':_0xcc6bd8[_0x1ddb73(0x1a4)],'filled':_0xcc6bd8[_0x1ddb73(0x1e9)]*_0xcc6bd8[_0x1ddb73(0x264)],'side':_0xcc6bd8[_0x1ddb73(0x239)]==_0x1ddb73(0x236)?'buy':_0x1ddb73(0x236),'price':0x1/_0xcc6bd8[_0x1ddb73(0x264)]},_0xcc6bd8={..._0x59ed91});_0xcc6bd8[_0x1ddb73(0x239)]=='buy'?_0x30cf1b=(_0x3cda49[_0x1ddb73(0x226)]*_0x3cda49[_0x1ddb73(0x187)]+_0xcc6bd8[_0x1ddb73(0x264)]*_0xcc6bd8['filled'])/(_0x3cda49[_0x1ddb73(0x187)]+_0xcc6bd8['filled']):_0x30cf1b=(_0x3cda49['breakeven']*_0x3cda49[_0x1ddb73(0x187)]-_0xcc6bd8[_0x1ddb73(0x264)]*_0xcc6bd8[_0x1ddb73(0x1e9)])/(_0x3cda49[_0x1ddb73(0x187)]-_0xcc6bd8['filled']);_0xcc6bd8[_0x1ddb73(0x239)]=='buy'?_0x55434e=_0x3cda49['realized']:_0x55434e=_0x3cda49[_0x1ddb73(0x1a1)]+(_0xcc6bd8['price']-_0x3cda49['breakeven'])*_0xcc6bd8[_0x1ddb73(0x1e9)];_0x58796b=_0xcc6bd8[_0x1ddb73(0x239)]==_0x1ddb73(0x236)?_0x3cda49['number']-_0xcc6bd8[_0x1ddb73(0x1e9)]:_0x3cda49[_0x1ddb73(0x187)]+_0xcc6bd8[_0x1ddb73(0x1e9)],_0x332281=(_0xcc6bd8['price']-_0x30cf1b)*_0x58796b;let _0x3cd902={'coin':_0xcc6bd8['coin'],'number':_0x58796b,'breakeven':formatResult(_0x30cf1b,0x8),'realized':formatResult(_0x55434e,0x8),'unrealized':formatResult(_0x332281,0x8),'fees':formatResult(_0x3cda49[_0x1ddb73(0x21b)]+_0xbe03ea,0x8),'sells':_0xcc6bd8['side']==_0x1ddb73(0x236)?_0x3cda49['sells']+0x1:_0x3cda49['sells'],'buys':_0xcc6bd8[_0x1ddb73(0x239)]==_0x1ddb73(0x203)?_0x3cda49['buys']+0x1:_0x3cda49[_0x1ddb73(0x291)]};dbCoinResults['get'](_0x1ddb73(0x1c4))[_0x1ddb73(0x278)]({'coin':_0xcc6bd8[_0x1ddb73(0x1d0)]})[_0x1ddb73(0x22e)](_0x3cd902)['write']();}async function placeOrder(_0x377bde){const _0x14dde4=_0x2aac11,_0x3a42c0=config['ordertype']==_0x14dde4(0x1b7)?_0x14dde4(0x1b7):_0x14dde4(0x285);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x14dde4(0x1b1)](JSON[_0x14dde4(0x27d)](currentCoins));for(const _0x4960a0 of _0x377bde){let _0x1316d1,_0x1d0820,_0x2d94c3,_0x127485,_0x94b81e,_0x4e3eb1=_0x4960a0[_0x14dde4(0x1a4)];try{const _0x36ea64=await exchange[_0x14dde4(0x1da)](_0x4e3eb1),_0x1c6a3c=_0x36ea64[_0x4e3eb1];_0x1316d1=_0x1c6a3c['last'],_0x1d0820=_0x1c6a3c['bid'],_0x2d94c3=_0x1c6a3c[_0x14dde4(0x283)];_0x4960a0['reverse']?(_0x127485=_0x4960a0[_0x14dde4(0x239)]==_0x14dde4(0x203)?'sell':_0x14dde4(0x203),_0x94b81e=Math['abs'](_0x4960a0[_0x14dde4(0x204)])/_0x1316d1):(_0x127485=_0x4960a0[_0x14dde4(0x239)],_0x94b81e=Math['abs'](_0x4960a0[_0x14dde4(0x204)]));_0x3a42c0=='limit'&&(config[_0x14dde4(0x19f)]==_0x14dde4(0x1ae)&&(_0x1316d1=_0x127485==_0x14dde4(0x203)?_0x1d0820:_0x2d94c3),config[_0x14dde4(0x19f)]==_0x14dde4(0x271)&&(_0x1316d1=_0x127485==_0x14dde4(0x203)?_0x2d94c3:_0x1d0820));_0x94b81e=formatResult(_0x94b81e,0x8),_0x1316d1=formatResult(_0x1316d1,0x8);const _0x287e8d=await exchange[_0x14dde4(0x281)](_0x4e3eb1,_0x3a42c0,_0x127485,_0x94b81e,_0x1316d1);lastOrders[_0x14dde4(0x1c9)]({'orderId':_0x287e8d['id'],'symbol':_0x4e3eb1,'side':_0x127485,'reverse':_0x4960a0[_0x14dde4(0x222)],'amount':_0x4960a0[_0x14dde4(0x222)]?_0x287e8d['amount']*_0x287e8d['price']:_0x287e8d[_0x14dde4(0x1b5)],'filled':_0x4960a0['reverse']?_0x287e8d[_0x14dde4(0x1e9)]*_0x287e8d[_0x14dde4(0x264)]:_0x287e8d[_0x14dde4(0x1e9)],'price':_0x287e8d[_0x14dde4(0x264)]});const _0x47b067=_0x127485==_0x14dde4(0x236)?config[_0x14dde4(0x257)]?String[_0x14dde4(0x23f)]('0x'+config[_0x14dde4(0x257)])+'\x20':'':config[_0x14dde4(0x277)]?String['fromCodePoint']('0x'+config[_0x14dde4(0x277)])+'\x20':'',_0xae53a9=_0x3a42c0==_0x14dde4(0x1b7)?'Market':config[_0x14dde4(0x19f)]=='limit-high'?_0x14dde4(0x238):'Limit\x20(low-margin)';if(_0x3a42c0=='market')logHistory(_0x14dde4(0x26b),''+_0x47b067+_0xae53a9+'\x20order:\x20'+_0x4e3eb1+'\x20'+_0x127485+'\x20#'+formatResult(_0x287e8d['filled'],0x8)+'\x20@'+formatResult(_0x287e8d[_0x14dde4(0x264)],0x8));else logHistory(_0x14dde4(0x26b),''+_0x47b067+_0xae53a9+_0x14dde4(0x28f)+_0x4e3eb1+'\x20'+_0x127485+'\x20#'+formatResult(_0x287e8d['amount'],0x8)+'\x20@'+formatResult(_0x287e8d[_0x14dde4(0x264)],0x8));_0x287e8d[_0x14dde4(0x1d0)]=_0x4960a0[_0x14dde4(0x1d0)],await updateCoinResults(_0x287e8d);if(config['cooldown']!=0x0){let _0x4b2e0e=null;if(cooldownTracker[_0x14dde4(0x286)]==config[_0x14dde4(0x185)]-0x1)_0x4b2e0e=cooldownTracker[_0x14dde4(0x1fd)]();const _0x414bac=getTimeStamp();cooldownTracker[_0x14dde4(0x1c9)](_0x414bac);if(_0x4b2e0e){const _0x5c98c7=fns['differenceInSeconds'](new Date(_0x414bac),new Date(_0x4b2e0e));_0x5c98c7<cooldownInterval&&(logHistory('error',_0x14dde4(0x247)+config[_0x14dde4(0x185)]+_0x14dde4(0x27f)+cooldownInterval/0x3c+_0x14dde4(0x1ea)+cooldownPeriod/(0xe10*0x3e8)+_0x14dde4(0x280)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x17e4c1){if(_0x17e4c1[_0x14dde4(0x1ce)]()[_0x14dde4(0x22a)](_0x14dde4(0x1a6)))logHistory(_0x14dde4(0x295),_0x14dde4(0x200)+_0x4e3eb1);else{if(_0x17e4c1['toString']()['includes'](_0x14dde4(0x1b6)))logHistory(_0x14dde4(0x295),'Order\x20amount\x20is\x20invalid:\x20'+_0x4e3eb1);else await handleError(_0x17e4c1,_0x14dde4(0x25a));}}}if(lastOrders[_0x14dde4(0x286)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x14dde4(0x1cc)]&&(config[_0x14dde4(0x19f)]==_0x14dde4(0x1b7)?logHistory(_0x14dde4(0x295),_0x14dde4(0x273)):logHistory(_0x14dde4(0x295),_0x14dde4(0x22b)));else coolingDown&&(!config[_0x14dde4(0x1cc)]&&logHistory(_0x14dde4(0x295),_0x14dde4(0x201)));}}function logHistory(_0x4ecfa7,_0x1cc182,_0x3e2b54=''){const _0x392799=_0x2aac11;let _0x47ac8b={'time':getTimeStamp(),'type':_0x4ecfa7,'event':_0x1cc182,'botname':config[_0x392799(0x293)],'showname':config['showname']};dbLogs[_0x392799(0x1ba)]('logs')[_0x392799(0x1c9)](_0x47ac8b)['write']();if(_0x3e2b54=='')_0x3e2b54=_0x1cc182;proxyEmit(_0x392799(0x24c),{'log':_0x47ac8b,'summary':_0x3e2b54}),process[_0x392799(0x1d7)]({'telegram':_0x47ac8b}),logging(''+_0x47ac8b[_0x392799(0x24c)]);}function emitHistory(_0x1dd03e={}){const _0xa68482=_0x2aac11;Object[_0xa68482(0x197)](_0x1dd03e)['length']==0x0&&(_0x1dd03e={'type':[_0xa68482(0x26b),_0xa68482(0x24c)],'event':'','page':0x1});if(_0x1dd03e[_0xa68482(0x240)][_0xa68482(0x22a)](_0xa68482(0x24c)))_0x1dd03e[_0xa68482(0x240)][_0xa68482(0x272)](_0x1dd03e[_0xa68482(0x240)]['indexOf'](_0xa68482(0x24c)),0x1,_0xa68482(0x295),_0xa68482(0x232));if(dbLogs[_0xa68482(0x195)](_0xa68482(0x27c))[_0xa68482(0x265)]()){let _0x17f113=dbLogs[_0xa68482(0x1ba)]('logs')[_0xa68482(0x221)](_0x5eaa6a=>{const _0x3349b9=_0xa68482;if(_0x1dd03e[_0x3349b9(0x240)][_0x3349b9(0x286)]==0x0)return![];else return _0x1dd03e[_0x3349b9(0x240)][_0x3349b9(0x22a)](_0x5eaa6a['type']);})['filter'](_0xd98d61=>{const _0xaead2c=_0xa68482;if(_0x1dd03e[_0xaead2c(0x24c)]=='')return!![];else return _0xd98d61['event'][_0xaead2c(0x288)]()[_0xaead2c(0x22a)](_0x1dd03e[_0xaead2c(0x24c)]['toLowerCase']());})[_0xa68482(0x1fa)](_0xa68482(0x1b4)),_0xea6a82=_0x17f113[_0xa68482(0x265)]()[_0xa68482(0x286)];_0x17f113=_0x17f113[_0xa68482(0x222)]()[_0xa68482(0x1ef)]((_0x1dd03e[_0xa68482(0x1c0)]-0x1)*logPageSize,_0x1dd03e[_0xa68482(0x1c0)]*logPageSize-0x1)[_0xa68482(0x222)]()['value'](),proxyEmit('event-history',{'logs':_0x17f113,'total':_0xea6a82});}else proxyEmit(_0xa68482(0x1bb),{'logs':[],'total':0x0});}async function pauseBot(_0x4417b9){const _0x1cf3da=_0x2aac11,_0x117704=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x1cf3da(0x1bd)](),consecutivePauses=0x1;else{if(_0x117704-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x1cf3da(0x1d7)]({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x1cf3da(0x1bd)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x1cf3da(0x295),_0x1cf3da(0x1a2)+consecutivePauses+')'),await sleep(_0x4417b9),botPaused=![],reset();}}async function handleError(_0xf0c9a1,_0x1a317c,_0x59451b=''){const _0xa0fdb3=_0x2aac11;if(_0xf0c9a1['toString']()[_0xa0fdb3(0x22a)](_0xa0fdb3(0x1fc)))logHistory(_0xa0fdb3(0x295),_0x1a317c+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()['includes'](_0xa0fdb3(0x25e)))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x192)),await pauseBot(pauseBotInterval);else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()[_0xa0fdb3(0x22a)](_0xa0fdb3(0x259)))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x266)),await pauseBot(pauseBotInterval);else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()['includes'](_0xa0fdb3(0x1a3)))logHistory(_0xa0fdb3(0x295),_0x1a317c+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0xa0fdb3(0x295),_0xa0fdb3(0x1a0)),process[_0xa0fdb3(0x1d7)]({'stop':_0xa0fdb3(0x19c)});else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()[_0xa0fdb3(0x22a)]('AuthenticationError'))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x209)),logHistory('error',_0xa0fdb3(0x1a0)),process[_0xa0fdb3(0x1d7)]({'stop':_0xa0fdb3(0x19c)});else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()[_0xa0fdb3(0x22a)](_0xa0fdb3(0x269)))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x1c8)),logHistory(_0xa0fdb3(0x295),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0xa0fdb3(0x1d7)]({'stop':_0xa0fdb3(0x19c)});else{if(_0xf0c9a1[_0xa0fdb3(0x1ce)]()[_0xa0fdb3(0x22a)](_0xa0fdb3(0x1e6)))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x227)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0xa0fdb3(0x1d7)]({'stop':'kill'});else{if(_0xf0c9a1['toString']()[_0xa0fdb3(0x22a)](_0xa0fdb3(0x1b9)))logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x1ad)),await pauseBot(pauseBotInterval),process[_0xa0fdb3(0x1d7)]({'stop':'restart'});else _0xf0c9a1[_0xa0fdb3(0x1ce)]()['includes'](_0xa0fdb3(0x1db))?logHistory(_0xa0fdb3(0x295),_0x1a317c+_0xa0fdb3(0x26d)):(logHistory(_0xa0fdb3(0x295),_0x1a317c+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x1a317c+_0xa0fdb3(0x1e1),_0xf0c9a1),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3d98c3,_0x3a7299){const _0x447177=_0x2aac11;return parseFloat(_0x3d98c3[_0x447177(0x282)](_0x3a7299));}function logging(_0xa49936,_0x2cfaf2=''){const _0x45dc19=_0x2aac11;if(config[_0x45dc19(0x228)])console[_0x45dc19(0x216)](getTimeStamp()+':\x20'+config[_0x45dc19(0x293)]+_0x45dc19(0x1df)+_0xa49936,_0x2cfaf2);else console[_0x45dc19(0x216)](getTimeStamp()+_0x45dc19(0x24f)+botID+_0x45dc19(0x1df)+_0xa49936,_0x2cfaf2);}function getServerTime(){const _0x4950d4=_0x2aac11,_0x35d098=new Date();return _0x35d098['getFullYear']()+'/'+(_0x35d098[_0x4950d4(0x1f5)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x35d098['getDate']()[_0x4950d4(0x1ce)]()[_0x4950d4(0x22d)](0x2,'0')+'\x20'+_0x35d098[_0x4950d4(0x24e)]()[_0x4950d4(0x1ce)]()[_0x4950d4(0x22d)](0x2,'0')+':'+_0x35d098[_0x4950d4(0x193)]()['toString']()['padStart'](0x2,'0')+':'+_0x35d098['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x30ed1b=_0x2aac11,_0x1a44c5=shiftedTime();return _0x1a44c5[_0x30ed1b(0x1f1)]()+'/'+(_0x1a44c5[_0x30ed1b(0x1f5)]()+0x1)[_0x30ed1b(0x1ce)]()[_0x30ed1b(0x22d)](0x2,'0')+'/'+_0x1a44c5['getDate']()[_0x30ed1b(0x1ce)]()[_0x30ed1b(0x22d)](0x2,'0')+'\x20'+_0x1a44c5['getHours']()[_0x30ed1b(0x1ce)]()[_0x30ed1b(0x22d)](0x2,'0')+':'+_0x1a44c5[_0x30ed1b(0x193)]()[_0x30ed1b(0x1ce)]()[_0x30ed1b(0x22d)](0x2,'0')+':'+_0x1a44c5['getSeconds']()[_0x30ed1b(0x1ce)]()[_0x30ed1b(0x22d)](0x2,'0');}function getDate(){const _0x19c0f6=_0x2aac11,_0x4ca7d4=shiftedTime();return _0x4ca7d4[_0x19c0f6(0x1f1)]()+'/'+(_0x4ca7d4[_0x19c0f6(0x1f5)]()+0x1)[_0x19c0f6(0x1ce)]()[_0x19c0f6(0x22d)](0x2,'0')+'/'+_0x4ca7d4[_0x19c0f6(0x230)]()['toString']()[_0x19c0f6(0x22d)](0x2,'0');}function getHour(){const _0x4c48ee=_0x2aac11,_0xa0b7f5=shiftedTime();return _0xa0b7f5[_0x4c48ee(0x24e)]()[_0x4c48ee(0x1ce)]()[_0x4c48ee(0x22d)](0x2,'0');}function sleep(_0x2c0e88){return new Promise(_0x44ccb5=>setTimeout(_0x44ccb5,_0x2c0e88));}function shiftedTime(){const _0x174ba6=_0x2aac11,_0x1c9d5e=new Date();let _0x1d6f20=_0x1c9d5e;if(config&&config[_0x174ba6(0x1de)]!==0x0)_0x1d6f20=fns[_0x174ba6(0x1d6)](_0x1c9d5e,{'hours':config[_0x174ba6(0x1de)]});return _0x1d6f20;}