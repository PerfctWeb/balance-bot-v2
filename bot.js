const _0xa381aa=_0x1114;(function(_0x5e23c1,_0x3a18b5){const _0x119f0e=_0x1114,_0x9f75aa=_0x5e23c1();while(!![]){try{const _0x5ab580=-parseInt(_0x119f0e(0x110))/0x1+-parseInt(_0x119f0e(0x9f))/0x2*(parseInt(_0x119f0e(0xdd))/0x3)+parseInt(_0x119f0e(0xff))/0x4+parseInt(_0x119f0e(0xcf))/0x5+-parseInt(_0x119f0e(0x136))/0x6*(parseInt(_0x119f0e(0x9c))/0x7)+-parseInt(_0x119f0e(0x189))/0x8+-parseInt(_0x119f0e(0x13b))/0x9*(-parseInt(_0x119f0e(0x124))/0xa);if(_0x5ab580===_0x3a18b5)break;else _0x9f75aa['push'](_0x9f75aa['shift']());}catch(_0xf80b26){_0x9f75aa['push'](_0x9f75aa['shift']());}}}(_0x2b46,0x8f3d2));const _0x432258=function(){let _0xebd688=!![];return function(_0x554176,_0x4c1e51){const _0x15daa8=_0xebd688?function(){const _0x7d4a2a=_0x1114;if(_0x4c1e51){const _0xc065a2=_0x4c1e51[_0x7d4a2a(0x133)](_0x554176,arguments);return _0x4c1e51=null,_0xc065a2;}}:function(){};return _0xebd688=![],_0x15daa8;};}(),_0x2684ff=_0x432258(this,function(){const _0x51f079=_0x1114;return _0x2684ff[_0x51f079(0x134)]()[_0x51f079(0x165)](_0x51f079(0x19e))[_0x51f079(0x134)]()[_0x51f079(0xc1)](_0x2684ff)['search'](_0x51f079(0x19e));});_0x2684ff();'use strict';const ccxt=require(_0xa381aa(0x15e)),low=require('lowdb'),FileSync=require(_0xa381aa(0x137)),fs=require('fs'),fns=require(_0xa381aa(0x116)),{WebsocketClient,DefaultLogger}=require(_0xa381aa(0x18f)),Crypt=require(_0xa381aa(0xc2))[_0xa381aa(0xc6)];let exchange,wsClient;global[_0xa381aa(0x10e)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0xa381aa(0xe8))['version'],botID=process['argv'][0x2]||_0xa381aa(0xaa),pattern=/^[0-9]{3}$/;function _0x1114(_0x5d306d,_0x1cad40){const _0x93a2ed=_0x2b46();return _0x1114=function(_0x2684ff,_0x432258){_0x2684ff=_0x2684ff-0x92;let _0x2b4636=_0x93a2ed[_0x2684ff];return _0x2b4636;},_0x1114(_0x5d306d,_0x1cad40);}if(!pattern[_0xa381aa(0x92)](botID))return console[_0xa381aa(0x167)]('Error:\x20Invalid\x20argument\x20'+botID+_0xa381aa(0x153)),process['exit'](0x1);const userID=process[_0xa381aa(0x17e)][0x3]||'',configpath=userID?_0xa381aa(0x16e)+userID+'/':_0xa381aa(0x16e);!fs[_0xa381aa(0x17c)](configpath)&&fs[_0xa381aa(0xe0)](configpath);const configfile=configpath+_0xa381aa(0xd8)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0xa381aa(0x176),performancefile=configpath+'bot-'+botID+_0xa381aa(0x13a),coinresultsfile=configpath+_0xa381aa(0xd8)+botID+_0xa381aa(0xb6),settingsfile=configpath+_0xa381aa(0xf2),securefile=configpath+_0xa381aa(0x172),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xa381aa(0x109)]({'logs':[]})[_0xa381aa(0xc8)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xa381aa(0x109)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0xa381aa(0x14d),'symbol':_0xa381aa(0x19c)},'usd':{'coin':_0xa381aa(0x105),'symbol':_0xa381aa(0x14a)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3d0aa3)=>{},'debug':(..._0x372a0c)=>{},'notice':(..._0x3e54c4)=>{},'info':(..._0x528edb)=>{},'warning':(..._0x23e99b)=>{},'error':async function(..._0x28d3e7){const _0x397ef1=_0xa381aa,_0x38d882=new Date()['getTime']();if(!lastErrorShown||_0x38d882-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x397ef1(0xfa)](),logHistory(_0x397ef1(0xcc),_0x397ef1(0xd7)+consecutivePauses+_0x397ef1(0x193));let _0x325bd9='';if(_0x28d3e7[0x0])_0x325bd9+=_0x28d3e7[0x0];if(_0x28d3e7[0x1]&&_0x28d3e7[0x1][_0x397ef1(0xcc)]&&_0x28d3e7[0x1][_0x397ef1(0xcc)][_0x397ef1(0x138)])_0x325bd9+=_0x397ef1(0x15f)+_0x28d3e7[0x1][_0x397ef1(0xcc)]['message'];logging('WebSockets('+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x325bd9),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0xa381aa(0x19a),'rsaStandard':_0xa381aa(0xa0)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0xa381aa(0x12b)]!=config[_0xa381aa(0x12b)]&&updateTimeshift(settings[_0xa381aa(0x12b)]);process[_0xa381aa(0x15a)]({'started':_0xa381aa(0xbf)}),initializeProcessListeners();function proxyEmit(_0x47abe7,_0x49fcc1=null){process['send']({'function':_0x47abe7,'args':_0x49fcc1});}function initializeProcessListeners(){process['on']('message',_0x50f8d7=>{const _0x2c7775=_0x1114;switch(Object[_0x2c7775(0x132)](_0x50f8d7)[0x0]){case _0x2c7775(0x12b):_0x50f8d7['timeshift']!=undefined&&(settings[_0x2c7775(0x12b)]=_0x50f8d7[_0x2c7775(0x12b)],updateTimeshift(settings[_0x2c7775(0x12b)]));break;case'function':switch(_0x50f8d7[_0x2c7775(0x114)]){case _0x2c7775(0x127):initclient();break;case'emitHistory':emitHistory(_0x50f8d7['args']);break;case _0x2c7775(0xb4):getPortfolio(_0x50f8d7['args']);break;case'storeConfiguration':storeConfiguration(_0x50f8d7[_0x2c7775(0x17d)]);break;case _0x2c7775(0x14c):storeHeadless(_0x50f8d7[_0x2c7775(0x17d)]);break;case _0x2c7775(0x106):getStartingBalances();break;case'placeOrder':placeOrder(_0x50f8d7[_0x2c7775(0x17d)]);break;case _0x2c7775(0xb0):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x453689=_0xa381aa;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x453689(0xda)],config['apiSecret']);let _0x5a06c2=await loadSymbols();_0x5a06c2&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x43964c,_0x33d259){const _0x4650a0=_0xa381aa,_0x56fb50=ccxt[config['exchange']];let _0x436d70;switch(config['exchange']){case'binance':_0x436d70=_0x4650a0(0xc0);break;case _0x4650a0(0x16f):_0x436d70=_0x4650a0(0x95);break;default:_0x436d70=_0x4650a0(0xc0);}exchange=new _0x56fb50({'apiKey':_0x43964c,'secret':_0x33d259,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x43964c,'api_secret':_0x33d259,'beautify':!![],'wsUrl':_0x436d70},logger),config[_0x4650a0(0xe2)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x4650a0(0x16a),'symbol':_0x4650a0(0x180)},'usd':{'coin':_0x4650a0(0x105),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x3d50af=_0xa381aa;let _0x536228;try{markets=await exchange[_0x3d50af(0x10c)]();const _0x342eef=[_0x3d50af(0x166),_0x3d50af(0xb3),_0x3d50af(0x175)];allSymbols=exchange['symbols'][_0x3d50af(0x96)](_0x321bcb=>{let _0x2a3259=![];return _0x342eef['forEach'](_0xe104a1=>{const _0x2885e0=_0x1114;if(_0x321bcb[_0x2885e0(0xd5)](_0xe104a1))_0x2a3259=!![];}),!_0x2a3259;}),_0x536228=!![];}catch(_0x340540){await handleError(_0x340540,_0x3d50af(0x19f)),_0x536228=![];}return _0x536228;}async function initbot(){const _0x3f9a21=_0xa381aa;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x1cd4c9=dbCoinResults['get'](_0x3f9a21(0xf7))[_0x3f9a21(0x11f)]();if(_0x1cd4c9[_0x3f9a21(0x148)]==0x0)await resetCoinResults();}async function initclient(){const _0x4c4f13=_0xa381aa;proxyEmit(_0x4c4f13(0xb5),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4c4f13(0x170),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3d6405=_0xa381aa;wsinitialized=![];ws1&&(ws1['forEach'](_0x4717b5=>{const _0x5a7fff=_0x1114;try{wsClient[_0x5a7fff(0xd4)](_0x4717b5);}catch(_0x308227){}}),ws1=[]);if(ws2){try{wsClient[_0x3d6405(0xd4)](ws2);}catch(_0x464b8b){}ws2=null;}}async function initws(){const _0x24eab8=_0xa381aa;cleanws();let _0x1ff4c0=[];currentCoins[_0x24eab8(0xdc)](_0x561e86=>{const _0x1a84c6=_0x24eab8;if(_0x561e86['coin']!=config[_0x1a84c6(0x13d)])_0x1ff4c0[_0x1a84c6(0x15d)](noslash(_0x561e86[_0x1a84c6(0x103)]));});if(!_0x1ff4c0[_0x24eab8(0xd5)](stablecoins[_0x24eab8(0x104)]['coin']))_0x1ff4c0['push'](stablecoins['eur']['coin']);if(!_0x1ff4c0[_0x24eab8(0xd5)](stablecoins[_0x24eab8(0x17f)][_0x24eab8(0x147)]))_0x1ff4c0[_0x24eab8(0x15d)](stablecoins[_0x24eab8(0x17f)]['coin']);if(!_0x1ff4c0['includes'](_0x24eab8(0x186)+config[_0x24eab8(0x13d)]))_0x1ff4c0['push'](_0x24eab8(0x186)+config[_0x24eab8(0x13d)]);try{_0x1ff4c0[_0x24eab8(0xdc)]((_0x1b4ea8,_0xb5d1d1)=>{ws1[_0xb5d1d1]=wsClient['subscribeSpotKline'](_0x1b4ea8,'1m');}),ws2=wsClient[_0x24eab8(0xee)](),wsClient['on'](_0x24eab8(0x111),_0x4c08c8=>{const _0x18f171=_0x24eab8;if(!Array['isArray'](_0x4c08c8)&&!_0x4c08c8['wsKey'][_0x18f171(0xd5)](_0x18f171(0x146))){if(_0x4c08c8['eventType']===_0x18f171(0xf6)){global[_0x18f171(0x10e)][_0x4c08c8['kline']['symbol']]=_0x4c08c8[_0x18f171(0xf6)][_0x18f171(0x12e)];return;}}else{if(!Array['isArray'](_0x4c08c8)&&_0x4c08c8['wsKey']['includes'](_0x18f171(0x146))){if(_0x4c08c8[_0x18f171(0x13c)]['includes'](_0x18f171(0x12d))){updateNumberCoins(_0x4c08c8);return;}}}}),wsClient['on'](_0x24eab8(0x102),async _0x533d78=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x32a384){await handleError(_0x32a384,_0x24eab8(0x16b));}let _0x5bde6c,_0x123523=0x0;loading[_0x24eab8(0x178)]=[];let _0x2ffa71=0x0;currentCoins[_0x24eab8(0xdc)](_0x58ff61=>{const _0x358246=_0x24eab8;if(_0x58ff61['coin']!=config[_0x358246(0x13d)])loading[_0x358246(0x178)][_0x358246(0x15d)](_0x58ff61['symbol']);}),loadingCanceled=![];while(_0x5bde6c!=currentCoins[_0x24eab8(0x148)]-0x1){_0x5bde6c=0x0,currentCoins[_0x24eab8(0xdc)](_0x256260=>{const _0x42055e=_0x24eab8;_0x256260[_0x42055e(0x147)]!=config[_0x42055e(0x13d)]&&global[_0x42055e(0x10e)][noslash(_0x256260[_0x42055e(0x103)])]&&(loading['remainingSymbols']=loading[_0x42055e(0x178)][_0x42055e(0x96)](_0x3905d0=>_0x3905d0!=_0x256260['symbol']),_0x5bde6c++);}),loading['progress']=Math[_0x24eab8(0xe3)](_0x5bde6c/(currentCoins['length']-0x1)*0x64);_0x2ffa71>0x1e*0x5&&(loading[_0x24eab8(0x160)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x24eab8(0x122)]=!![],emitLoadingProgress();break;}else _0x5bde6c!=_0x123523&&(_0x123523=_0x5bde6c,emitLoadingProgress()),_0x2ffa71++,await sleep(0xc8);}if(_0x5bde6c==currentCoins[_0x24eab8(0x148)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x27f13c=_0xa381aa;proxyEmit(_0x27f13c(0x99),loading);}async function getFiat(){const _0xcf98e5=_0xa381aa;let _0x421fb4=0x0,_0x3ec073=0x0;try{_0x421fb4=global[_0xcf98e5(0x10e)][stablecoins[_0xcf98e5(0x104)][_0xcf98e5(0x147)]],_0x3ec073=global[_0xcf98e5(0x10e)][stablecoins[_0xcf98e5(0x17f)]['coin']];}catch(_0xc148a2){await handleError(_0xc148a2,'getFiat()');}return{'eur':Number(_0x421fb4),'usd':Number(_0x3ec073)};}async function setStartDatePerformance(_0x124429){const _0x4fa6e2=_0xa381aa,_0x142450=fns[_0x4fa6e2(0xca)](new Date(_0x124429[_0x4fa6e2(0xfb)]),_0x4fa6e2(0x10a));let _0x2bb467=[];_0x2bb467[stablecoins[_0x4fa6e2(0x104)][_0x4fa6e2(0x147)]]=await getCloses(stablecoins[_0x4fa6e2(0x104)]['symbol'],new Date(_0x124429[_0x4fa6e2(0xfb)]),0x1),_0x2bb467[stablecoins['usd'][_0x4fa6e2(0x147)]]=await getCloses(stablecoins[_0x4fa6e2(0x17f)]['symbol'],new Date(_0x124429[_0x4fa6e2(0xfb)]),0x1);let _0x2f0c0c,_0x31cc40=[];_0x124429[_0x4fa6e2(0xa6)][_0x4fa6e2(0xdc)](_0x164181=>{const _0x28ff28=_0x4fa6e2;!_0x164181['excluded']&&_0x31cc40[_0x28ff28(0x15d)]({'coin':_0x164181[_0x28ff28(0x147)],'number':_0x164181[_0x28ff28(0x131)],'price':_0x164181[_0x28ff28(0x198)]});}),_0x2f0c0c={'date':_0x142450,'eur':_0x2bb467[stablecoins[_0x4fa6e2(0x104)][_0x4fa6e2(0x147)]][0x0],'usd':_0x2bb467[stablecoins[_0x4fa6e2(0x17f)][_0x4fa6e2(0x147)]][0x0],'coins':_0x31cc40};let _0x31d6e8=dbPerformance[_0x4fa6e2(0x140)](_0x4fa6e2(0xfc))[_0x4fa6e2(0xdf)]({'date':_0x142450})[_0x4fa6e2(0x11f)]();_0x31d6e8?dbPerformance[_0x4fa6e2(0x140)](_0x4fa6e2(0xfc))[_0x4fa6e2(0xdf)]({'date':_0x142450})[_0x4fa6e2(0xec)](_0x2f0c0c)['write']():dbPerformance[_0x4fa6e2(0x140)]('data')[_0x4fa6e2(0x15d)](_0x2f0c0c)[_0x4fa6e2(0xc8)](),_0x31d6e8=dbPerformance[_0x4fa6e2(0x140)](_0x4fa6e2(0xfc))[_0x4fa6e2(0xf3)](_0x4fa6e2(0xa1))['value'](),_0x31d6e8[_0x4fa6e2(0xdc)](_0x26c20c=>{const _0x493e39=_0x4fa6e2;_0x26c20c['date']<_0x142450&&dbPerformance[_0x493e39(0x140)](_0x493e39(0xfc))[_0x493e39(0x119)]({'date':_0x26c20c[_0x493e39(0xa1)]})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x166eaa){const _0xcce41f=_0xa381aa;let _0x2ac9ea,_0x38f2f4=[];logHistory(_0xcce41f(0xce),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x166eaa[_0xcce41f(0xa6)][_0xcce41f(0xdc)](_0xda0891=>{const _0x3ef188=_0xcce41f;if(_0xda0891['coin']!=config[_0x3ef188(0x13d)]&&!_0xda0891[_0x3ef188(0x139)])_0x38f2f4['push']({'coin':_0xda0891[_0x3ef188(0x147)],'symbol':_0xda0891['symbol']});});let _0x27567f=[];try{const _0x32269a=fns[_0xcce41f(0xca)](fns[_0xcce41f(0xd9)](_0x166eaa[_0xcce41f(0xfb)][_0xcce41f(0xdb)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x1a9bb4 of _0x38f2f4){if(_0x1a9bb4[_0xcce41f(0x147)]!=config[_0xcce41f(0x13d)])_0x2ac9ea=await exchange[_0xcce41f(0x94)](_0x1a9bb4['symbol'],Date[_0xcce41f(0x143)](_0x32269a));_0x2ac9ea[_0xcce41f(0xdc)](_0x7d42e2=>{const _0x1ddea9=_0xcce41f,_0x14a183=_0x1a9bb4[_0x1ddea9(0x103)]['includes'](config[_0x1ddea9(0x13d)]+'/'),_0x9aad34=fns[_0x1ddea9(0xca)](fns[_0x1ddea9(0xd9)](_0x7d42e2[_0x1ddea9(0x13e)]),_0x1ddea9(0x145)),_0x188317=fns[_0x1ddea9(0xca)](fns[_0x1ddea9(0xd9)](_0x7d42e2[_0x1ddea9(0x13e)]),'yyyy/MM/dd');let _0x2e1fc3;if(_0x7d42e2[_0x1ddea9(0x11e)]==_0x1ddea9(0x199)&&_0x14a183==![])_0x2e1fc3=_0x7d42e2[_0x1ddea9(0x179)];if(_0x7d42e2['side']==_0x1ddea9(0x199)&&_0x14a183==!![])_0x2e1fc3=-_0x7d42e2[_0x1ddea9(0x179)]*_0x7d42e2[_0x1ddea9(0xd6)];if(_0x7d42e2[_0x1ddea9(0x11e)]==_0x1ddea9(0xea)&&_0x14a183==![])_0x2e1fc3=-_0x7d42e2[_0x1ddea9(0x179)];if(_0x7d42e2[_0x1ddea9(0x11e)]==_0x1ddea9(0xea)&&_0x14a183==!![])_0x2e1fc3=_0x7d42e2[_0x1ddea9(0x179)]*_0x7d42e2[_0x1ddea9(0xd6)];_0x27567f[_0x1ddea9(0x15d)]({'timestamp':_0x9aad34,'date':_0x188317,'coin':_0x1a9bb4[_0x1ddea9(0x147)],'symbol':_0x1a9bb4[_0x1ddea9(0x103)],'type':_0x7d42e2[_0x1ddea9(0xc9)],'side':_0x7d42e2[_0x1ddea9(0x11e)],'reverse':_0x14a183,'amount':formatResult(_0x7d42e2[_0x1ddea9(0x192)],0x8),'filled':formatResult(_0x7d42e2[_0x1ddea9(0x192)],0x8),'coinamount':formatResult(_0x2e1fc3,0x8),'price':formatResult(_0x7d42e2['price'],0x8)});let _0x22e118;if(_0x7d42e2[_0x1ddea9(0x11e)]=='buy'&&_0x14a183==![])_0x22e118=-_0x7d42e2['amount']*_0x7d42e2[_0x1ddea9(0xd6)];if(_0x7d42e2['side']==_0x1ddea9(0x199)&&_0x14a183==!![])_0x22e118=_0x7d42e2['amount'];if(_0x7d42e2[_0x1ddea9(0x11e)]==_0x1ddea9(0xea)&&_0x14a183==![])_0x22e118=_0x7d42e2[_0x1ddea9(0x179)]*_0x7d42e2['price'];if(_0x7d42e2[_0x1ddea9(0x11e)]=='sell'&&_0x14a183==!![])_0x22e118=-_0x7d42e2[_0x1ddea9(0x179)];_0x27567f[_0x1ddea9(0x15d)]({'date':_0x188317,'coin':config[_0x1ddea9(0x13d)],'coinamount':formatResult(_0x22e118,0x8)});});}_0x27567f['sort']((_0x74da73,_0x42156d)=>_0x74da73[_0xcce41f(0x151)]>_0x42156d[_0xcce41f(0x151)]?0x1:_0x42156d['timestamp']>_0x74da73[_0xcce41f(0x151)]?-0x1:0x0),dbLogs[_0xcce41f(0x140)](_0xcce41f(0xd3))[_0xcce41f(0x119)]()[_0xcce41f(0xc8)](),_0x27567f[_0xcce41f(0xdc)](_0x3ff894=>{const _0x233112=_0xcce41f;let _0x17137d;_0x3ff894[_0x233112(0x147)]!=config[_0x233112(0x13d)]&&(_0x17137d={'time':_0x3ff894[_0x233112(0x151)],'type':_0x233112(0xc3),'event':_0x233112(0xf4)+_0x3ff894[_0x233112(0x103)]+'\x20'+_0x3ff894['side']+'\x20#'+_0x3ff894[_0x233112(0x179)]+'\x20@'+_0x3ff894[_0x233112(0xd6)]},dbLogs[_0x233112(0x140)]('logs')['push'](_0x17137d)[_0x233112(0xc8)]());});const _0x332cc2=fns[_0xcce41f(0x18e)]({'start':new Date(_0x166eaa[_0xcce41f(0xfb)]),'end':new Date()})['map'](_0x221ed8=>fns[_0xcce41f(0xca)](_0x221ed8,_0xcce41f(0x10a)));let _0x59d7fb=[];_0x166eaa[_0xcce41f(0xa6)][_0xcce41f(0xdc)](_0x20f467=>{const _0x17ed12=_0xcce41f;if(!_0x20f467[_0x17ed12(0x139)]){_0x59d7fb[_0x20f467[_0x17ed12(0x147)]]=[];let _0x55b7f3=_0x20f467[_0x17ed12(0x131)];_0x332cc2[_0x17ed12(0xdc)]((_0x2a4cc8,_0x4414ed)=>{const _0x130509=_0x17ed12;let _0x540626=_0x27567f[_0x130509(0x96)](_0x3e1a3e=>_0x3e1a3e['coin']==_0x20f467[_0x130509(0x147)]&&_0x3e1a3e[_0x130509(0xa1)]==_0x2a4cc8);if(_0x540626[_0x130509(0x148)]!=0x0){let _0x2b6dd5=_0x540626[_0x130509(0xd0)]((_0x33c30d,_0x407df1)=>{return _0x33c30d+=_0x407df1['coinamount'],_0x33c30d;},0x0);_0x55b7f3+=_0x2b6dd5;}_0x59d7fb[_0x20f467[_0x130509(0x147)]][_0x2a4cc8]=_0x55b7f3;});}});const _0x5b220d=[..._0x38f2f4];_0x5b220d[_0xcce41f(0x15d)]({'coin':stablecoins['eur'][_0xcce41f(0x147)],'symbol':stablecoins[_0xcce41f(0x104)][_0xcce41f(0x103)]}),_0x5b220d[_0xcce41f(0x15d)]({'coin':stablecoins[_0xcce41f(0x17f)][_0xcce41f(0x147)],'symbol':stablecoins[_0xcce41f(0x17f)][_0xcce41f(0x103)]});let _0x1035e1=[];for(const _0x54c08e of _0x5b220d){_0x1035e1[_0x54c08e[_0xcce41f(0x147)]]=await getCloses(_0x54c08e[_0xcce41f(0x103)],new Date(_0x166eaa[_0xcce41f(0xfb)]));}dbPerformance[_0xcce41f(0x140)](_0xcce41f(0xfc))[_0xcce41f(0x119)]()[_0xcce41f(0xc8)](),_0x332cc2[_0xcce41f(0xdc)]((_0x4d7946,_0x26b07d)=>{const _0x3addd3=_0xcce41f;let _0x35aac0,_0x26283b=[];_0x26b07d==0x0?(_0x166eaa['portfolio'][_0x3addd3(0xdc)](_0x5e6f47=>{const _0x2ef09b=_0x3addd3;!_0x5e6f47[_0x2ef09b(0x139)]&&_0x26283b['push']({'coin':_0x5e6f47[_0x2ef09b(0x147)],'number':_0x5e6f47[_0x2ef09b(0x131)],'price':_0x5e6f47[_0x2ef09b(0x198)]});}),_0x35aac0={'date':_0x4d7946,'eur':_0x1035e1[stablecoins[_0x3addd3(0x104)][_0x3addd3(0x147)]][_0x26b07d],'usd':_0x1035e1[stablecoins[_0x3addd3(0x17f)]['coin']][_0x26b07d],'coins':_0x26283b}):(_0x166eaa[_0x3addd3(0xa6)][_0x3addd3(0xdc)](_0x5d9dfe=>{const _0x2df01e=_0x3addd3;!_0x5d9dfe[_0x2df01e(0x139)]&&_0x26283b[_0x2df01e(0x15d)]({'coin':_0x5d9dfe['coin'],'number':_0x59d7fb[_0x5d9dfe[_0x2df01e(0x147)]][_0x4d7946],'price':_0x5d9dfe[_0x2df01e(0x147)]==config[_0x2df01e(0x13d)]?0x1:_0x1035e1[_0x5d9dfe[_0x2df01e(0x147)]][_0x26b07d]});}),_0x35aac0={'date':_0x4d7946,'eur':_0x1035e1[stablecoins[_0x3addd3(0x104)][_0x3addd3(0x147)]][_0x26b07d],'usd':_0x1035e1[stablecoins[_0x3addd3(0x17f)][_0x3addd3(0x147)]][_0x26b07d],'coins':_0x26283b}),dbPerformance[_0x3addd3(0x140)](_0x3addd3(0xfc))[_0x3addd3(0x15d)](_0x35aac0)[_0x3addd3(0xc8)]();}),emitPerformance(),await resetCoinResults();for(let _0x4d2b2d of _0x27567f){_0x4d2b2d['coin']!=config[_0xcce41f(0x13d)]&&await updateCoinResults(_0x4d2b2d);}logHistory(_0xcce41f(0xce),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x3edf28){await handleError(_0x3edf28,_0xcce41f(0xf1));}}async function getCloses(_0x4dade9,_0x5af9aa,_0x5b84e6=undefined){const _0x4cf49b=_0xa381aa,_0x4bc46b='1d';let _0xbcfba,_0x4bc1c5;const _0x43bdaf=fns[_0x4cf49b(0x130)](new Date(),_0x5af9aa)+0x1;try{const _0x2fb221=exchange[_0x4cf49b(0xe6)]()-_0x43bdaf*0x18*0xe10*0x3e8;_0xbcfba=await exchange[_0x4cf49b(0x18b)](_0x4dade9,_0x4bc46b,_0x2fb221,_0x5b84e6),_0x4bc1c5=await exchange['fetchTickers'](_0x4dade9);}catch(_0x3517af){await handleError(_0x3517af,_0x4cf49b(0x188));}let _0x3cfd1b=ohlcvToCloses(_0xbcfba);return _0x3cfd1b[_0x4cf49b(0x15d)](_0x4bc1c5[_0x4dade9]['last']),_0x3cfd1b;}function ohlcvToCloses(_0x4321b4){let _0x5c88a8=[];return _0x4321b4['forEach'](function(_0x1ec968){const _0x504be9=_0x1114;_0x5c88a8[_0x504be9(0x15d)](_0x1ec968[0x4]);}),_0x5c88a8;}function getConfiguration(_0x4e7bde){const _0x1edac6=_0xa381aa;let _0x123e5d=dbConfig[_0x1edac6(0x140)](_0x1edac6(0x125))['find']({'botID':_0x4e7bde})[_0x1edac6(0x11f)]();if(_0x123e5d){let _0x5e5fa2=![];!_0x123e5d[_0x1edac6(0xe2)]&&(_0x123e5d={..._0x123e5d,'exchange':'binance'},_0x5e5fa2=!![]),!_0x123e5d[_0x1edac6(0x13d)]&&(_0x123e5d={..._0x123e5d,'basecoin':_0x1edac6(0xa9)},_0x5e5fa2=!![]),!_0x123e5d[_0x1edac6(0x135)]&&(_0x123e5d={..._0x123e5d,'ordertype':_0x1edac6(0x10b)},_0x5e5fa2=!![]),!_0x123e5d['timeout']&&(_0x123e5d={..._0x123e5d,'timeout':0x14},_0x5e5fa2=!![]),!_0x123e5d[_0x1edac6(0x197)]&&(_0x123e5d={..._0x123e5d,'emojibuy':''},_0x5e5fa2=!![]),!_0x123e5d['emojisell']&&(_0x123e5d={..._0x123e5d,'emojisell':''},_0x5e5fa2=!![]),!_0x123e5d['showname']&&(_0x123e5d={..._0x123e5d,'showname':![]},_0x5e5fa2=!![]),_0x5e5fa2&&(_0x123e5d={'botID':_0x123e5d['botID'],'exchange':_0x123e5d['exchange'],'apiKey':_0x123e5d[_0x1edac6(0xda)],'apiSecret':_0x123e5d['apiSecret'],'basecoin':_0x123e5d[_0x1edac6(0x13d)],'botname':_0x123e5d[_0x1edac6(0xbe)],'showname':_0x123e5d['showname'],'threshold':_0x123e5d[_0x1edac6(0x164)],'ordertype':_0x123e5d['ordertype'],'timeout':_0x123e5d[_0x1edac6(0x160)],'startdate':_0x123e5d[_0x1edac6(0xfb)],'recreate':_0x123e5d[_0x1edac6(0x157)],'timeshift':_0x123e5d[_0x1edac6(0x12b)],'headless':_0x123e5d[_0x1edac6(0x100)],'cooldown':_0x123e5d[_0x1edac6(0x161)],'emojibuy':_0x123e5d['emojibuy'],'emojisell':_0x123e5d[_0x1edac6(0x156)],'portfolio':_0x123e5d['portfolio']},dbConfig[_0x1edac6(0x140)]('bot')[_0x1edac6(0x119)]()[_0x1edac6(0xc8)](),dbConfig[_0x1edac6(0x140)]('bot')[_0x1edac6(0x15d)](_0x123e5d)['write']());}else _0x123e5d={'botID':_0x4e7bde,'exchange':_0x1edac6(0x18f),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x1edac6(0x11c)+_0x4e7bde,'showname':![],'threshold':'3','ordertype':_0x1edac6(0x10b),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1edac6(0x12b)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x123e5d;}function emittedConfiguration(){const _0x2b1630=_0xa381aa;let _0x30398d;return config['apiKey']==''?_0x30398d=config:_0x30398d={...config,'apiKey':_0x2b1630(0x19d),'apiSecret':_0x2b1630(0x19d)},_0x30398d;}function getSettings(){const _0x2a9dd1=_0xa381aa;return dbSettings[_0x2a9dd1(0x140)](_0x2a9dd1(0xbc))[_0x2a9dd1(0x11f)]();}function getSecure(){const _0x1e05d9=_0xa381aa;return dbSecure[_0x1e05d9(0x140)]('secure')[_0x1e05d9(0x11f)]()||{};}function updateTimeshift(_0xefba8a){const _0x349596=_0xa381aa;let _0x47b91a=dbConfig[_0x349596(0x140)](_0x349596(0x125))[_0x349596(0xdf)]({'botID':botID})['value']();_0x47b91a&&dbConfig[_0x349596(0x140)](_0x349596(0x125))['find']({'botID':botID})['assign']({'timeshift':_0xefba8a})[_0x349596(0xc8)](),config[_0x349596(0x12b)]=_0xefba8a,proxyEmit(_0x349596(0xb5),emittedConfiguration());}async function storeConfiguration(_0x4bf0e3){const _0xecbbfb=_0xa381aa;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x38f81d=dbConfig['get'](_0xecbbfb(0x125))[_0xecbbfb(0xdf)]({'botID':botID})['value']();_0x4bf0e3={..._0x4bf0e3,'apiKey':crypt['decrypt'](secure['privateKey'],_0x4bf0e3[_0xecbbfb(0xda)])[_0xecbbfb(0x138)],'apiSecret':crypt[_0xecbbfb(0x163)](secure['privateKey'],_0x4bf0e3[_0xecbbfb(0x10f)])[_0xecbbfb(0x138)]};if(_0x38f81d){if(_0x4bf0e3['apiKey']==_0xecbbfb(0x19d))_0x4bf0e3[_0xecbbfb(0xda)]=config[_0xecbbfb(0xda)];if(_0x4bf0e3[_0xecbbfb(0x10f)]==_0xecbbfb(0x19d))_0x4bf0e3[_0xecbbfb(0x10f)]=config[_0xecbbfb(0x10f)];dbConfig[_0xecbbfb(0x140)](_0xecbbfb(0x125))[_0xecbbfb(0xdf)]({'botID':botID})['assign'](_0x4bf0e3)[_0xecbbfb(0xc8)]();}else dbConfig['get']('bot')[_0xecbbfb(0x15d)](_0x4bf0e3)['write'](),process[_0xecbbfb(0x15a)]({'status':_0xecbbfb(0x15c),'live':_0xecbbfb(0xbf)});config={..._0x4bf0e3};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xecbbfb(0x15a)]({'botname':_0x4bf0e3[_0xecbbfb(0xbe)]}),proxyEmit(_0xecbbfb(0xeb)),reset();}async function storeHeadless(_0x5d34fd){const _0x1ce72b=_0xa381aa,_0x5d5b3e={...config,'headless':_0x5d34fd[_0x1ce72b(0x100)]};let _0x4c57ad=dbConfig[_0x1ce72b(0x140)](_0x1ce72b(0x125))[_0x1ce72b(0xdf)]({'botID':botID})[_0x1ce72b(0x11f)]();_0x4c57ad&&dbConfig[_0x1ce72b(0x140)]('bot')['find']({'botID':botID})['assign'](_0x5d5b3e)[_0x1ce72b(0xc8)](),config={..._0x5d5b3e},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x231945){const _0x23f3ba=_0xa381aa;return _0x231945[_0x23f3ba(0xdb)]('/','');}function updateNumberCoins(_0x198cfd){const _0x1e4923=_0xa381aa;_0x198cfd[_0x1e4923(0x129)]&&_0x198cfd['eventType']==_0x1e4923(0xbb)&&_0x198cfd[_0x1e4923(0x170)][_0x1e4923(0xdc)](_0x22d175=>{const _0x573d12=_0x1e4923;let _0x3792f0=currentCoins[_0x573d12(0xdf)](_0x4936c9=>_0x4936c9[_0x573d12(0x147)]==_0x22d175[_0x573d12(0x1a0)]),_0x488227=config['portfolio']['find'](_0x11cb0e=>_0x11cb0e[_0x573d12(0x147)]==_0x22d175['asset']);if(_0x3792f0&&_0x488227)_0x3792f0[_0x573d12(0xa8)]=Math[_0x573d12(0x16d)](Number(_0x22d175[_0x573d12(0xf5)])+(_0x488227[_0x573d12(0x9e)]||0x0),0x0);});if(_0x198cfd[_0x1e4923(0x129)]&&_0x198cfd[_0x1e4923(0x129)]==_0x1e4923(0x11d)){if(_0x198cfd[_0x1e4923(0xc7)]==_0x1e4923(0x9a)&&_0x198cfd[_0x1e4923(0xbd)]==_0x1e4923(0x9b)){if(lastOrders)lastOrders[_0x1e4923(0xdc)](_0x3aaaae=>{const _0x1f2e5f=_0x1e4923;if(_0x3aaaae[_0x1f2e5f(0x168)]==_0x198cfd[_0x1f2e5f(0x168)]){if(_0x3aaaae['reverse'])_0x3aaaae[_0x1f2e5f(0x192)]=_0x198cfd[_0x1f2e5f(0x14f)]*_0x3aaaae[_0x1f2e5f(0xd6)];else _0x3aaaae['filled']=_0x198cfd[_0x1f2e5f(0x14f)];}});}}}async function getCoins(_0x115fa8=!![],_0x49344e=config[_0xa381aa(0x13d)]){const _0x495cfe=_0xa381aa;let _0xf39dc8,_0x3392f8=[],_0x115084=[],_0x4bc16a=[];try{_0xf39dc8=await exchange[_0x495cfe(0x154)](),mybalances=_0xf39dc8[_0x495cfe(0x113)];if(!_0x115fa8)for(const [_0x454d8f,_0xe99976]of Object[_0x495cfe(0x152)](mybalances)){_0x4bc16a[_0x495cfe(0x15d)](_0x454d8f);}else config['portfolio'][_0x495cfe(0xdc)](_0x2a4b5e=>{const _0xac8dcd=_0x495cfe;if(!_0x2a4b5e[_0xac8dcd(0x139)])_0x4bc16a[_0xac8dcd(0x15d)](_0x2a4b5e[_0xac8dcd(0x147)]);});if(_0x49344e=='')for(const [_0x20309a,_0x3aeb10]of Object[_0x495cfe(0x152)](mybalances)){_0x3aeb10['toString']()!=0x0&&_0x115084[_0x495cfe(0x15d)]({'coin':_0x20309a});}else for(const [_0x3a9ba7,_0x75a5b5]of Object[_0x495cfe(0x152)](mybalances)){if(_0x4bc16a[_0x495cfe(0xd5)](_0x3a9ba7)){const _0x211028=config[_0x495cfe(0xa6)][_0x495cfe(0xdf)](_0x25bb5b=>_0x25bb5b[_0x495cfe(0x147)]==_0x3a9ba7);if((_0x75a5b5[_0x495cfe(0x134)]()!=0x0||_0x211028)&&(allSymbols[_0x495cfe(0xd5)](_0x3a9ba7+'/'+_0x49344e)||_0x3a9ba7==_0x49344e))_0x115084[_0x495cfe(0x15d)]({'coin':_0x3a9ba7,'symbol':_0x3a9ba7+'/'+_0x49344e,'reverse':![],'number':Math[_0x495cfe(0x16d)](_0x75a5b5+(_0x211028&&_0x211028[_0x495cfe(0x9e)]||0x0),0x0)}),_0x3a9ba7!=_0x49344e&&_0x3392f8['push'](_0x3a9ba7+'/'+_0x49344e);else(_0x75a5b5[_0x495cfe(0x134)]()!=0x0||_0x211028)&&allSymbols[_0x495cfe(0xd5)](_0x49344e+'/'+_0x3a9ba7)&&(_0x115084[_0x495cfe(0x15d)]({'coin':_0x3a9ba7,'symbol':_0x49344e+'/'+_0x3a9ba7,'reverse':!![],'number':Math[_0x495cfe(0x16d)](_0x75a5b5+(_0x211028&&_0x211028[_0x495cfe(0x9e)]||0x0),0x0)}),_0x3a9ba7!=_0x49344e&&_0x3392f8[_0x495cfe(0x15d)](_0x49344e+'/'+_0x3a9ba7));}}}catch(_0x36fcad){if(!_0x115fa8){if(_0x36fcad['toString']()['includes'](_0x495cfe(0xe1)))return logHistory(_0x495cfe(0xcc),_0x495cfe(0xde)),![];else{if(_0x36fcad['toString']()[_0x495cfe(0xd5)](_0x495cfe(0x107)))return logHistory(_0x495cfe(0xcc),_0x495cfe(0xb2)),![];else{if(_0x36fcad['toString']()[_0x495cfe(0xd5)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x495cfe(0xcc),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x36fcad,_0x495cfe(0x9d));}}}else await handleError(_0x36fcad,_0x495cfe(0x9d));}return _0x115084;}async function getPortfolio(_0x4de79c){const _0x47911b=_0xa381aa;let _0x5db04d=[],_0x31491a=[],_0x40142c,_0x549b53=[],_0x41de7f,_0x1e6bcb;_0x4de79c[_0x47911b(0xda)]==='************'||_0x4de79c[_0x47911b(0x10f)]===_0x47911b(0x19d)?(_0x41de7f=config[_0x47911b(0xda)],_0x1e6bcb=config[_0x47911b(0x10f)]):(_0x41de7f=_0x4de79c[_0x47911b(0xda)],_0x1e6bcb=_0x4de79c[_0x47911b(0x10f)]);await initExchange(_0x41de7f,_0x1e6bcb);let _0x1390d1=await loadSymbols();if(_0x1390d1){_0x549b53=await getCoins(![],_0x4de79c[_0x47911b(0x13d)]);if(_0x549b53===![])proxyEmit(_0x47911b(0xa6),![]);else{if(_0x4de79c[_0x47911b(0x13d)]=='')proxyEmit('portfolio',_0x549b53);else{_0x549b53['forEach'](_0x101107=>{const _0x343c0d=_0x47911b;_0x5db04d['push'](_0x101107[_0x343c0d(0x103)]);});try{_0x31491a=await exchange[_0x47911b(0x17a)](_0x5db04d);}catch(_0x2ba3c5){await handleError(_0x2ba3c5,_0x47911b(0x12f));}_0x549b53[_0x47911b(0xdc)](_0x1cf13c=>{const _0x1f13ca=_0x47911b;_0x1cf13c[_0x1f13ca(0x147)]!=_0x4de79c[_0x1f13ca(0x13d)]?_0x40142c=_0x1cf13c[_0x1f13ca(0xb9)]?0x1/_0x31491a[_0x1cf13c[_0x1f13ca(0x103)]][_0x1f13ca(0xba)]:_0x31491a[_0x1cf13c['symbol']][_0x1f13ca(0xba)]:_0x40142c=0x1,_0x1cf13c['price']=formatResult(_0x40142c,0x8);}),proxyEmit('portfolio',_0x549b53);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x261b45){const _0x55efe2=_0xa381aa;let _0x29725e=!![];const _0x41479c=!_0x261b45[_0x55efe2(0xb9)]?markets[_0x261b45[_0x55efe2(0x103)]][_0x55efe2(0x16c)][_0x55efe2(0x179)][_0x55efe2(0x10d)]:markets[_0x261b45[_0x55efe2(0x103)]][_0x55efe2(0x16c)][_0x55efe2(0xb1)][_0x55efe2(0x10d)],_0x215179=!_0x261b45[_0x55efe2(0xb9)]?markets[_0x261b45[_0x55efe2(0x103)]][_0x55efe2(0x16c)][_0x55efe2(0xb1)][_0x55efe2(0x10d)]:markets[_0x261b45[_0x55efe2(0x103)]][_0x55efe2(0x16c)][_0x55efe2(0x179)]['min'];if(Math[_0x55efe2(0x112)](_0x261b45[_0x55efe2(0x118)])<_0x41479c)_0x29725e=![];if(Math['abs'](_0x261b45[_0x55efe2(0x118)])*_0x261b45[_0x55efe2(0xba)]<_0x215179)_0x29725e=![];return _0x29725e;}async function getBalances(){const _0x24d9d2=_0xa381aa;let _0x4dd7e3=0x0,_0x1c989d;const _0x5eab3f=config[_0x24d9d2(0x164)];currentCoins[_0x24d9d2(0xdc)](_0x42f318=>{const _0x32bad0=_0x24d9d2;if(_0x42f318[_0x32bad0(0x147)]!=config[_0x32bad0(0x13d)]){let _0x563b73=global['ticker'][noslash(_0x42f318[_0x32bad0(0x103)])];_0x1c989d=_0x42f318['reverse']?0x1/_0x563b73:_0x563b73;}else _0x1c989d=0x1;let _0x356a98=_0x42f318[_0x32bad0(0xa8)]*_0x1c989d;_0x4dd7e3+=_0x356a98,_0x42f318[_0x32bad0(0xba)]=formatResult(Number(_0x1c989d),0x8),_0x42f318[_0x32bad0(0x11f)]=_0x356a98;}),currentCoins['forEach'](_0x534d51=>{const _0x5ee68c=_0x24d9d2;let _0x508567=config['portfolio'][_0x5ee68c(0xdf)](_0x5e0d95=>_0x5e0d95['coin']==_0x534d51['coin']),_0x119e35=Number(_0x508567[_0x5ee68c(0x11b)]),_0x3299c0=_0x534d51[_0x5ee68c(0x11f)]/_0x4dd7e3*0x64,_0x1be6c3=_0x119e35*_0x4dd7e3/0x64/_0x534d51[_0x5ee68c(0xba)]-_0x534d51[_0x5ee68c(0xa8)];_0x534d51[_0x5ee68c(0x11b)]=formatResult(_0x3299c0,0x3),_0x534d51[_0x5ee68c(0x93)]=formatResult(_0x119e35,0x3),_0x534d51['trade']=formatResult(_0x1be6c3,0x8),_0x534d51['side']='',_0x534d51[_0x5ee68c(0x158)]='';if(_0x534d51['coin']!=config[_0x5ee68c(0x13d)]){if(_0x534d51[_0x5ee68c(0x11b)]>_0x119e35)_0x534d51[_0x5ee68c(0x11e)]=_0x5ee68c(0xea),_0x534d51[_0x5ee68c(0x158)]=checkMinimums(_0x534d51);else _0x534d51['distribution']<_0x119e35&&(_0x534d51[_0x5ee68c(0x11e)]=_0x5ee68c(0x199),_0x534d51[_0x5ee68c(0x158)]=checkMinimums(_0x534d51));}_0x534d51[_0x5ee68c(0x159)]=_0x534d51[_0x5ee68c(0x11b)]/_0x534d51[_0x5ee68c(0x93)]-0x1;}),currentCoins[_0x24d9d2(0xae)]((_0x274cdc,_0x475ad7)=>_0x274cdc[_0x24d9d2(0x159)]<_0x475ad7['delta']?0x1:_0x475ad7[_0x24d9d2(0x159)]<_0x274cdc[_0x24d9d2(0x159)]?-0x1:0x0);const _0x17b8f3=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x17b8f3[_0x24d9d2(0x104)],'usd':_0x17b8f3[_0x24d9d2(0x17f)],'portfolio':JSON[_0x24d9d2(0x171)](currentCoins),'threshold':_0x5eab3f},proxyEmit(_0x24d9d2(0x170),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x24d9d2(0x100)])headlessMode({'portfolio':currentCoins,'threshold':_0x5eab3f});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5ddcad=_0xa381aa;if(!lastBalances)return;let _0x3462f5=await getStartingBalances(![]),_0x585755=[],_0x28628;JSON[_0x5ddcad(0x143)](lastBalances[_0x5ddcad(0xa6)])[_0x5ddcad(0xdc)](_0x3b4230=>{const _0x33e247=_0x5ddcad;let _0x50a562={'coin':_0x3b4230[_0x33e247(0x147)],'number':_0x3b4230[_0x33e247(0xa8)],'price':_0x3b4230['last']};_0x585755[_0x33e247(0x15d)](_0x50a562);});const _0x18e567=await getFiat();_0x28628={'date':lastBalances['time'][_0x5ddcad(0x142)]('\x20')[0x0],'eur':_0x18e567[_0x5ddcad(0x104)],'usd':_0x18e567['usd'],'coins':_0x585755};let _0x1f0002=dbPerformance[_0x5ddcad(0x140)](_0x5ddcad(0xfc))[_0x5ddcad(0xdf)]({'date':_0x28628[_0x5ddcad(0xa1)]})[_0x5ddcad(0x11f)]();_0x1f0002?dbPerformance[_0x5ddcad(0x140)](_0x5ddcad(0xfc))[_0x5ddcad(0xdf)]({'date':_0x28628[_0x5ddcad(0xa1)]})[_0x5ddcad(0xec)](_0x28628)[_0x5ddcad(0xc8)]():dbPerformance['get'](_0x5ddcad(0xfc))['push'](_0x28628)[_0x5ddcad(0xc8)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x241d02=_0xa381aa;if(dbPerformance[_0x241d02(0x13f)](_0x241d02(0xfc))[_0x241d02(0x11f)]()){let _0x54378d=dbPerformance['get'](_0x241d02(0xfc))['sortBy'](_0x241d02(0xa1))['value']();proxyEmit(_0x241d02(0x14b),_0x54378d),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x26657a=!![]){const _0x1eaeec=_0xa381aa;let _0x3ee8b1=dbPerformance[_0x1eaeec(0x140)](_0x1eaeec(0xfc))[_0x1eaeec(0xdf)]({'date':config[_0x1eaeec(0xfb)]})[_0x1eaeec(0x11f)]();config[_0x1eaeec(0xda)]!=''&&!_0x3ee8b1&&(await setStartDatePerformance(config),_0x3ee8b1=dbPerformance[_0x1eaeec(0x140)](_0x1eaeec(0xfc))['find']({'date':config[_0x1eaeec(0xfb)]})[_0x1eaeec(0x11f)]());if(config['apiKey']==''||!_0x3ee8b1)return{};let _0x5c6239=0x0,_0x290dd2=0x0,_0x474853=0x0,_0x489833=[],_0x5ecaa4=0x0;config[_0x1eaeec(0xa6)][_0x1eaeec(0xdc)](_0x1ecf2c=>{const _0x432474=_0x1eaeec;if(!_0x1ecf2c['excluded']){_0x489833[_0x5ecaa4]={'coin':_0x1ecf2c[_0x432474(0x147)],'symbol':_0x1ecf2c[_0x432474(0x103)],'number':_0x1ecf2c[_0x432474(0x131)],'price':_0x1ecf2c[_0x432474(0x198)]},_0x5c6239+=_0x1ecf2c['startprice']*_0x1ecf2c[_0x432474(0x131)];if(config['basecoin']=='BTC')_0x290dd2+=_0x1ecf2c['startprice']*_0x1ecf2c[_0x432474(0x131)]*_0x3ee8b1[_0x432474(0x104)],_0x474853+=_0x1ecf2c[_0x432474(0x198)]*_0x1ecf2c['startnumber']*_0x3ee8b1[_0x432474(0x17f)];else{if(config['basecoin']==_0x432474(0xc4)||config[_0x432474(0x13d)]==_0x432474(0x190)||config[_0x432474(0x13d)]=='USDC')_0x290dd2+=_0x1ecf2c[_0x432474(0x198)]*_0x1ecf2c['startnumber']*_0x3ee8b1[_0x432474(0x104)]/_0x3ee8b1[_0x432474(0x17f)],_0x474853+=_0x1ecf2c[_0x432474(0x198)]*_0x1ecf2c[_0x432474(0x131)];else config['basecoin']==_0x432474(0x183)&&(_0x290dd2+=_0x1ecf2c[_0x432474(0x198)]*_0x1ecf2c[_0x432474(0x131)],_0x474853+=_0x1ecf2c[_0x432474(0x198)]*_0x1ecf2c['startnumber']*_0x3ee8b1[_0x432474(0x17f)]/_0x3ee8b1[_0x432474(0x104)]);}_0x5ecaa4++;}});let _0x5e78e0={'basecoin':_0x5c6239,'eur':_0x290dd2,'usd':_0x474853,'coins':_0x489833};if(_0x26657a)proxyEmit(_0x1eaeec(0xab),_0x5e78e0);return _0x5e78e0;}function headlessMode(_0x151003){const _0x285133=_0xa381aa;let _0x4f05bf=_0x151003[_0x285133(0xa6)],_0x3f7b9c=_0x151003[_0x285133(0x164)],_0x260fdb=[];for(let _0x26a6e1 of _0x4f05bf){if(_0x26a6e1['coin']!=config[_0x285133(0x13d)]){if(_0x26a6e1[_0x285133(0x11b)]/_0x26a6e1[_0x285133(0x93)]-0x1>=_0x3f7b9c/0x64){if(_0x26a6e1[_0x285133(0x158)])_0x260fdb['push'](_0x26a6e1);}else{if(_0x26a6e1[_0x285133(0x11b)]/_0x26a6e1[_0x285133(0x93)]-0x1<=-_0x3f7b9c/0x64){if(_0x26a6e1[_0x285133(0x158)])_0x260fdb[_0x285133(0x15d)](_0x26a6e1);}}}}_0x260fdb[_0x285133(0x148)]>0x0&&placeOrder(_0x260fdb);}function symbolToCoin(_0x405b76){const _0x3def1f=_0xa381aa;let _0x98a89b;if(_0x405b76[_0x3def1f(0xd5)]('/'+config[_0x3def1f(0x13d)]))_0x98a89b=_0x405b76[_0x3def1f(0xdb)]('/'+config[_0x3def1f(0x13d)],'');if(_0x405b76[_0x3def1f(0xd5)](config['basecoin']+'/'))_0x98a89b=_0x405b76['replace'](config[_0x3def1f(0x13d)]+'/','');return _0x98a89b;}async function validateOrders(_0x2e64a5=0x0){const _0x5b6ec0=_0xa381aa;let _0x4b3613=[],_0x21f84f=config[_0x5b6ec0(0x135)]==_0x5b6ec0(0x10b)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5b6ec0(0x160)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x5b6ec0(0xdc)](_0x4b45f9=>{const _0x4a72fd=_0x5b6ec0;let _0x2a48ff=previousCoins[_0x4a72fd(0xdf)](_0x513b8a=>_0x513b8a[_0x4a72fd(0x147)]==symbolToCoin(_0x4b45f9[_0x4a72fd(0x103)])),_0x661c78=currentCoins[_0x4a72fd(0xdf)](_0x5637c3=>_0x5637c3[_0x4a72fd(0x147)]==symbolToCoin(_0x4b45f9[_0x4a72fd(0x103)])),_0x4cd5ac,_0x1954fc;_0x4b45f9['side']==_0x4a72fd(0x199)&&!_0x4b45f9['reverse']||_0x4b45f9['side']==_0x4a72fd(0xea)&&_0x4b45f9[_0x4a72fd(0xb9)]?(_0x4cd5ac=_0x2a48ff[_0x4a72fd(0xa8)]+0.9*_0x4b45f9[_0x4a72fd(0x192)],_0x1954fc=_0x2a48ff[_0x4a72fd(0xa8)]+1.1*_0x4b45f9[_0x4a72fd(0x192)]):(_0x4cd5ac=_0x2a48ff[_0x4a72fd(0xa8)]-1.1*_0x4b45f9['filled'],_0x1954fc=_0x2a48ff[_0x4a72fd(0xa8)]-0.9*_0x4b45f9[_0x4a72fd(0x192)]);const _0x45f87c=_0x4b45f9[_0x4a72fd(0x192)]!=0x0&&_0x661c78[_0x4a72fd(0xa8)]>=_0x4cd5ac&&_0x661c78[_0x4a72fd(0xa8)]<=_0x1954fc;_0x4b3613[_0x4a72fd(0x15d)](_0x45f87c);if(_0x45f87c&&config[_0x4a72fd(0x135)]!=_0x4a72fd(0x10b)){if(_0x4b45f9[_0x4a72fd(0xb9)])logHistory(_0x4a72fd(0xc3),_0x4a72fd(0x174)+_0x4b45f9[_0x4a72fd(0x103)]+'\x20'+_0x4b45f9[_0x4a72fd(0x11e)]+'\x20#'+formatResult(_0x4b45f9['filled']/_0x4b45f9[_0x4a72fd(0xd6)],0x8)+'\x20@'+formatResult(_0x4b45f9[_0x4a72fd(0xd6)],0x8));else logHistory('order',_0x4a72fd(0x174)+_0x4b45f9[_0x4a72fd(0x103)]+'\x20'+_0x4b45f9['side']+'\x20#'+formatResult(_0x4b45f9[_0x4a72fd(0x192)],0x8)+'\x20@'+formatResult(_0x4b45f9[_0x4a72fd(0xd6)],0x8));}}),_0x4b3613[_0x5b6ec0(0xdc)]((_0x2c4f58,_0x4d32f4)=>{const _0xf6682b=_0x5b6ec0;if(_0x2c4f58)lastOrders[_0xf6682b(0x18d)](_0x4d32f4,0x1);});if(_0x2e64a5<_0x21f84f&&_0x4b3613[_0x5b6ec0(0xd5)](![])){if(_0x2e64a5==0x0){config[_0x5b6ec0(0x135)]==_0x5b6ec0(0x10b)?logHistory(_0x5b6ec0(0xcc),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2e64a5);},0xa*0x3e8);}else{(_0x2e64a5==0x1||_0x2e64a5==Math[_0x5b6ec0(0xe3)](_0x21f84f/0x2)||_0x2e64a5==_0x21f84f-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2e64a5);},validateOrderInterval);}}else{lockOrders=![];if(_0x2e64a5>0x0&&!_0x4b3613[_0x5b6ec0(0xd5)](![]))config[_0x5b6ec0(0x135)]==_0x5b6ec0(0x10b)?logHistory(_0x5b6ec0(0xce),_0x5b6ec0(0x162)):logHistory('success',_0x5b6ec0(0x97));else _0x2e64a5>0x0&&_0x4b3613[_0x5b6ec0(0xd5)](![])&&(config['ordertype']==_0x5b6ec0(0x10b)?logHistory('success',_0x5b6ec0(0xa5)+Math[_0x5b6ec0(0xe3)](_0x21f84f*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x5b6ec0(0xdc)](async _0x5de665=>{const _0x335ab3=_0x5b6ec0;try{const _0x435220=await exchange['cancelOrder'](_0x5de665[_0x335ab3(0x168)],_0x5de665['symbol']);}catch(_0x4305a2){if(_0x4305a2['toString']()[_0x335ab3(0xd5)](_0x335ab3(0x149))){}else await handleError(_0x4305a2,_0x335ab3(0x121));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5b6ec0(0xe3)](_0x21f84f*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0xa97181=_0xa381aa;dbCoinResults['get'](_0xa97181(0xf7))['remove']()['write']();let _0x21af35=await getStartingBalances(![]);_0x21af35[_0xa97181(0xf7)]['forEach'](_0xfa4865=>{const _0x3d6860=_0xa97181,_0x4da762=_0xfa4865[_0x3d6860(0x103)]['includes'](config['basecoin']+'/');if(_0xfa4865[_0x3d6860(0x147)]!=config[_0x3d6860(0x13d)]){let _0x51ebbb={'coin':_0xfa4865['coin'],'number':_0xfa4865[_0x3d6860(0xa8)],'breakeven':_0xfa4865[_0x3d6860(0xd6)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['push'](_0x51ebbb)[_0x3d6860(0xc8)]();}});}async function updateCoinResults(_0x13f141){const _0x2b8b19=_0xa381aa;let _0x4be956,_0x2bef2b,_0x1cb0ab,_0x30fa9c,_0x143bc5,_0x4d39d4,_0xdcb0b6=dbCoinResults[_0x2b8b19(0x140)]('coins')['find']({'coin':_0x13f141[_0x2b8b19(0x147)]})['value']();if(!_0xdcb0b6)return;if(_0x13f141[_0x2b8b19(0x144)]&&_0x13f141[_0x2b8b19(0x144)][_0x2b8b19(0x194)]==config[_0x2b8b19(0x13d)])_0x4be956=_0x13f141[_0x2b8b19(0x144)][_0x2b8b19(0xb1)];else{if(_0x13f141['fee']&&_0x13f141[_0x2b8b19(0x144)][_0x2b8b19(0x194)]==_0x2b8b19(0x186))_0x4be956=_0x13f141[_0x2b8b19(0x144)][_0x2b8b19(0xb1)]*global[_0x2b8b19(0x10e)][_0x2b8b19(0x186)+config[_0x2b8b19(0x13d)]];else _0x4be956=0.001*_0x13f141['filled'];}const _0x11701b=_0x13f141[_0x2b8b19(0x103)][_0x2b8b19(0xd5)](config[_0x2b8b19(0x13d)]+'/');_0x11701b&&(_0x4d39d4={'coin':_0x13f141[_0x2b8b19(0x147)],'symbol':_0x13f141[_0x2b8b19(0x103)],'filled':_0x13f141[_0x2b8b19(0x192)]*_0x13f141['price'],'side':_0x13f141[_0x2b8b19(0x11e)]==_0x2b8b19(0xea)?_0x2b8b19(0x199):'sell','price':0x1/_0x13f141['price']},_0x13f141={..._0x4d39d4});_0x13f141[_0x2b8b19(0x11e)]==_0x2b8b19(0x199)?_0x1cb0ab=(_0xdcb0b6[_0x2b8b19(0xf8)]*_0xdcb0b6[_0x2b8b19(0xa8)]+_0x13f141['price']*_0x13f141[_0x2b8b19(0x192)])/(_0xdcb0b6[_0x2b8b19(0xa8)]+_0x13f141['filled']):_0x1cb0ab=(_0xdcb0b6['breakeven']*_0xdcb0b6[_0x2b8b19(0xa8)]-_0x13f141[_0x2b8b19(0xd6)]*_0x13f141[_0x2b8b19(0x192)])/(_0xdcb0b6[_0x2b8b19(0xa8)]-_0x13f141[_0x2b8b19(0x192)]);_0x13f141[_0x2b8b19(0x11e)]=='buy'?_0x30fa9c=_0xdcb0b6['realized']:_0x30fa9c=_0xdcb0b6[_0x2b8b19(0x19b)]+(_0x13f141[_0x2b8b19(0xd6)]-_0xdcb0b6['breakeven'])*_0x13f141[_0x2b8b19(0x192)];_0x2bef2b=_0x13f141[_0x2b8b19(0x11e)]==_0x2b8b19(0xea)?_0xdcb0b6['number']-_0x13f141[_0x2b8b19(0x192)]:_0xdcb0b6['number']+_0x13f141['filled'],_0x143bc5=(_0x13f141[_0x2b8b19(0xd6)]-_0x1cb0ab)*_0x2bef2b;let _0x473255={'coin':_0x13f141[_0x2b8b19(0x147)],'number':_0x2bef2b,'breakeven':formatResult(_0x1cb0ab,0x8),'realized':formatResult(_0x30fa9c,0x8),'unrealized':formatResult(_0x143bc5,0x8),'fees':formatResult(_0xdcb0b6[_0x2b8b19(0x98)]+_0x4be956,0x8),'sells':_0x13f141[_0x2b8b19(0x11e)]=='sell'?_0xdcb0b6[_0x2b8b19(0x196)]+0x1:_0xdcb0b6[_0x2b8b19(0x196)],'buys':_0x13f141['side']=='buy'?_0xdcb0b6[_0x2b8b19(0x195)]+0x1:_0xdcb0b6[_0x2b8b19(0x195)]};dbCoinResults[_0x2b8b19(0x140)](_0x2b8b19(0xf7))['find']({'coin':_0x13f141[_0x2b8b19(0x147)]})[_0x2b8b19(0xec)](_0x473255)[_0x2b8b19(0xc8)]();}async function placeOrder(_0xa711ff){const _0x47298b=_0xa381aa,_0x3692bc=config[_0x47298b(0x135)]==_0x47298b(0x10b)?'market':_0x47298b(0xa4);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x47298b(0x143)](JSON[_0x47298b(0x171)](currentCoins));for(const _0x4b61c3 of _0xa711ff){let _0x535eff,_0x5d9bbc,_0x5a43be,_0x23b1d3,_0xf10dbe,_0x33dc5f=_0x4b61c3[_0x47298b(0x103)];try{const _0x34e1ea=await exchange[_0x47298b(0x17a)](_0x33dc5f),_0x38cfeb=_0x34e1ea[_0x33dc5f];_0x535eff=_0x38cfeb[_0x47298b(0xba)],_0x5d9bbc=_0x38cfeb['bid'],_0x5a43be=_0x38cfeb[_0x47298b(0xa3)];_0x4b61c3['reverse']?(_0x23b1d3=_0x4b61c3[_0x47298b(0x11e)]==_0x47298b(0x199)?_0x47298b(0xea):_0x47298b(0x199),_0xf10dbe=Math['abs'](_0x4b61c3[_0x47298b(0x118)])/_0x535eff):(_0x23b1d3=_0x4b61c3['side'],_0xf10dbe=Math[_0x47298b(0x112)](_0x4b61c3[_0x47298b(0x118)]));_0x3692bc==_0x47298b(0xa4)&&(config[_0x47298b(0x135)]=='limit-high'&&(_0x535eff=_0x23b1d3==_0x47298b(0x199)?_0x5d9bbc:_0x5a43be),config['ordertype']==_0x47298b(0x177)&&(_0x535eff=_0x23b1d3==_0x47298b(0x199)?_0x5a43be:_0x5d9bbc));_0xf10dbe=formatResult(_0xf10dbe,0x8),_0x535eff=formatResult(_0x535eff,0x8);const _0x447c42=await exchange['createOrder'](_0x33dc5f,_0x3692bc,_0x23b1d3,_0xf10dbe,_0x535eff);lastOrders[_0x47298b(0x15d)]({'orderId':_0x447c42['id'],'symbol':_0x33dc5f,'side':_0x23b1d3,'reverse':_0x4b61c3[_0x47298b(0xb9)],'amount':_0x4b61c3[_0x47298b(0xb9)]?_0x447c42['amount']*_0x447c42[_0x47298b(0xd6)]:_0x447c42[_0x47298b(0x179)],'filled':_0x4b61c3[_0x47298b(0xb9)]?_0x447c42[_0x47298b(0x192)]*_0x447c42[_0x47298b(0xd6)]:_0x447c42['filled'],'price':_0x447c42[_0x47298b(0xd6)]});const _0x2050e2=_0x23b1d3==_0x47298b(0xea)?config[_0x47298b(0x156)]?String['fromCodePoint']('0x'+config[_0x47298b(0x156)])+'\x20':'':config[_0x47298b(0x197)]?String[_0x47298b(0x18c)]('0x'+config[_0x47298b(0x197)])+'\x20':'',_0x581b1d=_0x3692bc=='market'?_0x47298b(0x184):config[_0x47298b(0x135)]=='limit-high'?'Limit\x20(high-margin)':_0x47298b(0xf0);if(_0x3692bc==_0x47298b(0x10b))logHistory(_0x47298b(0xc3),''+_0x2050e2+_0x581b1d+'\x20order:\x20'+_0x33dc5f+'\x20'+_0x23b1d3+'\x20#'+formatResult(_0x447c42[_0x47298b(0x192)],0x8)+'\x20@'+formatResult(_0x447c42['price'],0x8));else logHistory(_0x47298b(0xc3),''+_0x2050e2+_0x581b1d+_0x47298b(0x169)+_0x33dc5f+'\x20'+_0x23b1d3+'\x20#'+formatResult(_0x447c42[_0x47298b(0x179)],0x8)+'\x20@'+formatResult(_0x447c42['price'],0x8));_0x447c42['coin']=_0x4b61c3['coin'],await updateCoinResults(_0x447c42);if(config[_0x47298b(0x161)]!=0x0){let _0x1ec4a9=null;if(cooldownTracker['length']==config[_0x47298b(0x161)]-0x1)_0x1ec4a9=cooldownTracker['shift']();const _0x1e888e=getTimeStamp();cooldownTracker['push'](_0x1e888e);if(_0x1ec4a9){const _0x39f8bb=fns[_0x47298b(0xc5)](new Date(_0x1e888e),new Date(_0x1ec4a9));_0x39f8bb<cooldownInterval&&(logHistory(_0x47298b(0xcc),_0x47298b(0x191)+config[_0x47298b(0x161)]+_0x47298b(0x126)+cooldownInterval/0x3c+_0x47298b(0xef)+cooldownPeriod/(0xe10*0x3e8)+_0x47298b(0x187)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1cf62f){if(_0x1cf62f[_0x47298b(0x134)]()[_0x47298b(0xd5)](_0x47298b(0x182)))logHistory(_0x47298b(0xcc),_0x47298b(0x12c)+_0x33dc5f);else{if(_0x1cf62f[_0x47298b(0x134)]()[_0x47298b(0xd5)](_0x47298b(0x141)))logHistory(_0x47298b(0xcc),_0x47298b(0xac)+_0x33dc5f);else await handleError(_0x1cf62f,_0x47298b(0xcd));}}}if(lastOrders[_0x47298b(0x148)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x47298b(0x100)]&&(config[_0x47298b(0x135)]==_0x47298b(0x10b)?logHistory(_0x47298b(0xcc),_0x47298b(0x181)):logHistory(_0x47298b(0xcc),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config['headless']&&logHistory(_0x47298b(0xcc),_0x47298b(0xfd)));}}function logHistory(_0x448633,_0x108605,_0x5d966c=''){const _0x5b7d2f=_0xa381aa;let _0x5c4cc3={'time':getTimeStamp(),'type':_0x448633,'event':_0x108605,'botname':config[_0x5b7d2f(0xbe)],'showname':config[_0x5b7d2f(0x108)]};dbLogs[_0x5b7d2f(0x140)](_0x5b7d2f(0xd3))[_0x5b7d2f(0x15d)](_0x5c4cc3)['write']();if(_0x5d966c=='')_0x5d966c=_0x108605;proxyEmit(_0x5b7d2f(0x123),{'log':_0x5c4cc3,'summary':_0x5d966c}),process[_0x5b7d2f(0x15a)]({'telegram':_0x5c4cc3}),logging(''+_0x5c4cc3[_0x5b7d2f(0x123)]);}function emitHistory(_0x16a397={}){const _0x474842=_0xa381aa;Object[_0x474842(0x132)](_0x16a397)[_0x474842(0x148)]==0x0&&(_0x16a397={'type':[_0x474842(0xc3),_0x474842(0x123)],'event':'','page':0x1});if(_0x16a397[_0x474842(0xc9)]['includes'](_0x474842(0x123)))_0x16a397[_0x474842(0xc9)][_0x474842(0x18d)](_0x16a397[_0x474842(0xc9)]['indexOf'](_0x474842(0x123)),0x1,_0x474842(0xcc),'success');if(dbLogs['has']('logs')[_0x474842(0x11f)]()){let _0x7efbe5=dbLogs[_0x474842(0x140)](_0x474842(0xd3))[_0x474842(0x96)](_0x33f8c4=>{const _0x457221=_0x474842;if(_0x16a397['type']['length']==0x0)return![];else return _0x16a397['type'][_0x457221(0xd5)](_0x33f8c4['type']);})[_0x474842(0x96)](_0x5c2807=>{const _0x4b436b=_0x474842;if(_0x16a397[_0x4b436b(0x123)]=='')return!![];else return _0x5c2807[_0x4b436b(0x123)]['toLowerCase']()[_0x4b436b(0xd5)](_0x16a397[_0x4b436b(0x123)][_0x4b436b(0xfe)]());})[_0x474842(0xf3)](_0x474842(0xed)),_0x3689cc=_0x7efbe5[_0x474842(0x11f)]()[_0x474842(0x148)];_0x7efbe5=_0x7efbe5['reverse']()[_0x474842(0xa2)]((_0x16a397['page']-0x1)*logPageSize,_0x16a397[_0x474842(0x12a)]*logPageSize-0x1)[_0x474842(0xb9)]()[_0x474842(0x11f)](),proxyEmit('event-history',{'logs':_0x7efbe5,'total':_0x3689cc});}else proxyEmit(_0x474842(0xf9),{'logs':[],'total':0x0});}async function pauseBot(_0x4ae311){const _0x5b26a5=_0xa381aa,_0x231e86=new Date()[_0x5b26a5(0xfa)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x231e86-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x5b26a5(0x15a)]({'stop':_0x5b26a5(0xa7)});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x5b26a5(0xcc),_0x5b26a5(0x150)+consecutivePauses+')'),await sleep(_0x4ae311),botPaused=![],reset();}}async function handleError(_0x1bfe01,_0xf508ef,_0x49b894=''){const _0x1adb49=_0xa381aa;if(_0x1bfe01['toString']()[_0x1adb49(0xd5)](_0x1adb49(0x117)))logHistory(_0x1adb49(0xcc),_0xf508ef+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x1bfe01[_0x1adb49(0x134)]()['includes'](_0x1adb49(0x101)))logHistory('error',_0xf508ef+_0x1adb49(0x18a)),await pauseBot(pauseBotInterval);else{if(_0x1bfe01[_0x1adb49(0x134)]()[_0x1adb49(0xd5)](_0x1adb49(0xd1)))logHistory('error',_0xf508ef+_0x1adb49(0x14e)),await pauseBot(pauseBotInterval);else{if(_0x1bfe01[_0x1adb49(0x134)]()['includes'](_0x1adb49(0xe1)))logHistory(_0x1adb49(0xcc),_0xf508ef+_0x1adb49(0xcb)),logHistory('error',_0x1adb49(0xe5)),process[_0x1adb49(0x15a)]({'stop':_0x1adb49(0xb7)});else{if(_0x1bfe01[_0x1adb49(0x134)]()[_0x1adb49(0xd5)](_0x1adb49(0x107)))logHistory('error',_0xf508ef+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x1adb49(0xcc),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x1adb49(0xb7)});else{if(_0x1bfe01[_0x1adb49(0x134)]()[_0x1adb49(0xd5)](_0x1adb49(0x128)))logHistory(_0x1adb49(0xcc),_0xf508ef+_0x1adb49(0x15b)),logHistory(_0x1adb49(0xcc),_0x1adb49(0xe5)),process['send']({'stop':_0x1adb49(0xb7)});else{if(_0x1bfe01[_0x1adb49(0x134)]()[_0x1adb49(0xd5)](_0x1adb49(0x11a)))logHistory(_0x1adb49(0xcc),_0xf508ef+_0x1adb49(0x173)),logHistory(_0x1adb49(0xcc),_0x1adb49(0xe5)),process[_0x1adb49(0x15a)]({'stop':_0x1adb49(0xb7)});else{if(_0x1bfe01[_0x1adb49(0x134)]()['includes'](_0x1adb49(0xaf)))logHistory(_0x1adb49(0xcc),_0xf508ef+_0x1adb49(0x120)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x1adb49(0xa7)});else _0x1bfe01['toString']()[_0x1adb49(0xd5)]('InsufficientFunds')?logHistory(_0x1adb49(0xcc),_0xf508ef+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x1adb49(0xcc),_0xf508ef+_0x1adb49(0xd2)),logging(_0xf508ef+'\x20|\x20Error\x20details:\x20',_0x1bfe01),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x6c79e5,_0x21ac37){const _0x120e10=_0xa381aa;return parseFloat(_0x6c79e5[_0x120e10(0x185)](_0x21ac37));}function logging(_0x293451,_0x21c4d8=''){const _0x4987c8=_0xa381aa;if(config['showname'])console['log'](getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x293451,_0x21c4d8);else console[_0x4987c8(0x167)](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x293451,_0x21c4d8);}function getServerTime(){const _0x31f77d=_0xa381aa,_0xf0f04d=new Date();return _0xf0f04d[_0x31f77d(0xb8)]()+'/'+(_0xf0f04d['getMonth']()+0x1)['toString']()[_0x31f77d(0x17b)](0x2,'0')+'/'+_0xf0f04d[_0x31f77d(0xe7)]()[_0x31f77d(0x134)]()[_0x31f77d(0x17b)](0x2,'0')+'\x20'+_0xf0f04d[_0x31f77d(0x115)]()['toString']()[_0x31f77d(0x17b)](0x2,'0')+':'+_0xf0f04d[_0x31f77d(0xad)]()[_0x31f77d(0x134)]()['padStart'](0x2,'0')+':'+_0xf0f04d['getSeconds']()[_0x31f77d(0x134)]()[_0x31f77d(0x17b)](0x2,'0');}function getTimeStamp(){const _0x334a71=_0xa381aa,_0x31d248=shiftedTime();return _0x31d248['getFullYear']()+'/'+(_0x31d248['getMonth']()+0x1)[_0x334a71(0x134)]()[_0x334a71(0x17b)](0x2,'0')+'/'+_0x31d248[_0x334a71(0xe7)]()[_0x334a71(0x134)]()[_0x334a71(0x17b)](0x2,'0')+'\x20'+_0x31d248['getHours']()[_0x334a71(0x134)]()['padStart'](0x2,'0')+':'+_0x31d248['getMinutes']()[_0x334a71(0x134)]()[_0x334a71(0x17b)](0x2,'0')+':'+_0x31d248[_0x334a71(0xe9)]()[_0x334a71(0x134)]()[_0x334a71(0x17b)](0x2,'0');}function getDate(){const _0x5189e8=_0xa381aa,_0x478278=shiftedTime();return _0x478278[_0x5189e8(0xb8)]()+'/'+(_0x478278[_0x5189e8(0xe4)]()+0x1)[_0x5189e8(0x134)]()[_0x5189e8(0x17b)](0x2,'0')+'/'+_0x478278['getDate']()[_0x5189e8(0x134)]()[_0x5189e8(0x17b)](0x2,'0');}function _0x2b46(){const _0x416066=['BUSD','differenceInSeconds','Crypt','orderType','write','type','format','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','error','placeOrder()','success','1214095hRLsAS','reduce','RequestTimeout','\x20|\x20Unknown\x20error\x20occured','logs','closeWs','includes','price','WebSockets(','bot-','parseISO','apiKey','replace','forEach','63021rawssF','Binance\x20API\x20key\x20is\x20invalid','find','mkdirSync','API-key\x20format\x20invalid','exchange','round','getMonth','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','milliseconds','getDate','./version.json','getSeconds','sell','configuration-stored','assign','time','subscribeSpotUserDataStream','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Limit\x20(low-margin)','recreateHistory()','bb-settings.json','sortBy','Order:\x20','availableBalance','kline','coins','breakeven','event-history','getTime','startdate','data','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','toLowerCase','235616ISanCx','headless','ExchangeNotAvailable','reconnected','symbol','eur','BTCUSDT','getStartingBalances','AuthenticationError','showname','defaults','yyyy/MM/dd','market','loadMarkets','min','ticker','apiSecret','669833gktTft','formattedMessage','abs','total','function','getHours','date-fns','DDoSProtection','trade','remove','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','distribution','Bot\x20','executionReport','side','value','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','cancelOrder()','cancel','event','19962770kQYrHD','bot','\x20orders\x20in\x20less\x20than\x20','initclient','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','eventType','page','timeshift','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','spot','close','getPortfolio()','differenceInCalendarDays','startnumber','keys','apply','toString','ordertype','246990LStOwm','lowdb/adapters/FileSync','message','excluded','-performance.json','18AsqPCl','wsMarket','basecoin','datetime','has','get','Invalid\x20quantity','split','parse','fee','yyyy/MM/dd\x20HH:mm:ss','userData','coin','length','OrderNotFound','BTC/USDT','performance','storeHeadless','BTCEUR','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','accumulatedQuantity','Pausing\x20bot\x20for\x205\x20minutes\x20(','timestamp','entries',',\x20must\x20be\x20a\x203\x20digit\x20number','fetchBalance','add','emojisell','recreate','valid','delta','send','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','enabled','push','ccxt','\x20-\x20','timeout','cooldown','Order(s)\x20validated\x20-\x20balancing\x20resumed','decrypt','threshold','search','DAI/','log','orderId','\x20order:\x20','BTCBUSD','initws()','limits','max','./config/','binanceus','balances','stringify','bb-secure.json','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Order\x20filled:\x20','HOT/EUR','-events.json','limit-low','remainingSymbols','amount','fetchTickers','padStart','existsSync','args','argv','usd','BTC/BUSD','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','MIN_NOTIONAL','EUR','Market','toFixed','BNB','\x20hour','getCloses()','8472424XVZgVz','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','fetchOHLCV','fromCodePoint','splice','eachDayOfInterval','binance','USDT','Executed\x20','filled',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','currency','buys','sells','emojibuy','startprice','buy','sha256','realized','BTC/EUR','************','(((.+)+)+)+$','loadSymbols()','asset','test','target','fetchOrders','wss://stream.binance.us:9443','filter','Order(s)\x20filled\x20-\x20balancing\x20resumed','fees','coin-loading-progress','LIMIT','FILLED','140hyROSp','getCoins()','offset','110JBXAGP','RSA-OAEP','date','slice','ask','limit','Order(s)\x20not\x20validated\x20after\x20','portfolio','restart','number','BTC','001','starting-balances','Order\x20amount\x20is\x20invalid:\x20','getMinutes','sort','InvalidNonce','cancelLoading','cost','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','HOT/BTC','getPortfolio','configuration','-results.json','kill','getFullYear','reverse','last','outboundAccountPosition','settings','orderStatus','botname','running','wss://stream.binance.com:9443','constructor','hybrid-crypto-js','order'];_0x2b46=function(){return _0x416066;};return _0x2b46();}function getHour(){const _0x4ac47c=_0xa381aa,_0x9bc81f=shiftedTime();return _0x9bc81f[_0x4ac47c(0x115)]()[_0x4ac47c(0x134)]()[_0x4ac47c(0x17b)](0x2,'0');}function sleep(_0x4d0289){return new Promise(_0x11ed39=>setTimeout(_0x11ed39,_0x4d0289));}function shiftedTime(){const _0x5d033c=_0xa381aa,_0x4b8893=new Date();let _0x17716c=_0x4b8893;if(config&&config[_0x5d033c(0x12b)]!==0x0)_0x17716c=fns[_0x5d033c(0x155)](_0x4b8893,{'hours':config[_0x5d033c(0x12b)]});return _0x17716c;}