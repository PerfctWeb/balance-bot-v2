const _0x463318=_0x5cd5;(function(_0x5eff57,_0x3868b7){const _0x40187f=_0x5cd5,_0x51a0ca=_0x5eff57();while(!![]){try{const _0x344622=parseInt(_0x40187f(0x14e))/0x1*(parseInt(_0x40187f(0x173))/0x2)+-parseInt(_0x40187f(0x17b))/0x3+-parseInt(_0x40187f(0x14c))/0x4*(-parseInt(_0x40187f(0x178))/0x5)+parseInt(_0x40187f(0x205))/0x6+parseInt(_0x40187f(0x17c))/0x7*(parseInt(_0x40187f(0x16a))/0x8)+-parseInt(_0x40187f(0x1fe))/0x9*(-parseInt(_0x40187f(0x1d6))/0xa)+-parseInt(_0x40187f(0x152))/0xb;if(_0x344622===_0x3868b7)break;else _0x51a0ca['push'](_0x51a0ca['shift']());}catch(_0x482e87){_0x51a0ca['push'](_0x51a0ca['shift']());}}}(_0x1a19,0xcf731));const _0x43d205=function(){let _0x11f057=!![];return function(_0x33590d,_0x16aee2){const _0x545564=_0x11f057?function(){const _0xc5ffb2=_0x5cd5;if(_0x16aee2){const _0x480307=_0x16aee2[_0xc5ffb2(0x184)](_0x33590d,arguments);return _0x16aee2=null,_0x480307;}}:function(){};return _0x11f057=![],_0x545564;};}(),_0x2d1f1e=_0x43d205(this,function(){const _0x3d76dd=_0x5cd5;return _0x2d1f1e[_0x3d76dd(0x1fb)]()['search'](_0x3d76dd(0x1a8))[_0x3d76dd(0x1fb)]()[_0x3d76dd(0x1b6)](_0x2d1f1e)[_0x3d76dd(0x18d)](_0x3d76dd(0x1a8));});_0x2d1f1e();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require(_0x463318(0x218)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x463318(0x201))[_0x463318(0x183)];let exchange,wsClient;global[_0x463318(0x22d)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x463318(0x18b))[_0x463318(0x1c6)],botID=process[_0x463318(0x21d)][0x2]||_0x463318(0x19d),pattern=/^[0-9]{3}$/;if(!pattern[_0x463318(0x239)](botID))return console['log'](_0x463318(0x1dc)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x463318(0x18a)](0x1);const userID=process[_0x463318(0x21d)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/';!fs[_0x463318(0x1bc)](configpath)&&fs[_0x463318(0x1cc)](configpath);const configfile=configpath+_0x463318(0x1f2)+botID+'-config.json',logfile=configpath+_0x463318(0x1f2)+botID+'-events.json',performancefile=configpath+_0x463318(0x1f2)+botID+'-performance.json',coinresultsfile=configpath+_0x463318(0x1f2)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x463318(0x20d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x463318(0x1c8)]({'logs':[]})[_0x463318(0x1ae)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x463318(0x1c8)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x463318(0x1c8)]({'bot':[]})[_0x463318(0x1ae)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x463318(0x1c8)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x463318(0x15c),'symbol':_0x463318(0x16e)},'usd':{'coin':_0x463318(0x1a2),'symbol':_0x463318(0x1f8)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5459fc)=>{},'debug':(..._0x544282)=>{},'notice':(..._0x2278b6)=>{},'info':(..._0x60a4b9)=>{},'warning':(..._0x7a9333)=>{},'error':async function(..._0x527d08){const _0x5cf4e5=_0x463318,_0x266fa2=new Date()['getTime']();if(!lastErrorShown||_0x266fa2-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x5cf4e5(0x182)](),logHistory(_0x5cf4e5(0x1e1),_0x5cf4e5(0x20b)+consecutivePauses+_0x5cf4e5(0x1a9));let _0xfc6438='';if(_0x527d08[0x0])_0xfc6438+=_0x527d08[0x0];if(_0x527d08[0x1]&&_0x527d08[0x1][_0x5cf4e5(0x1e1)]&&_0x527d08[0x1][_0x5cf4e5(0x1e1)][_0x5cf4e5(0x1b5)])_0xfc6438+=_0x5cf4e5(0x142)+_0x527d08[0x1][_0x5cf4e5(0x1e1)][_0x5cf4e5(0x1b5)];logging(_0x5cf4e5(0x20b)+consecutivePauses+_0x5cf4e5(0x1b0),''+_0xfc6438),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x463318(0x1af),'rsaStandard':_0x463318(0x193)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x463318(0x247)]&&updateTimeshift(settings[_0x463318(0x247)]);process[_0x463318(0x150)]({'started':_0x463318(0x16b)}),initializeProcessListeners();function proxyEmit(_0x10aee6,_0x2cd325=null){const _0x303c09=_0x463318;process[_0x303c09(0x150)]({'function':_0x10aee6,'args':_0x2cd325});}function initializeProcessListeners(){const _0x48fdde=_0x463318;process['on'](_0x48fdde(0x1b5),_0x117d78=>{const _0x1c3fc5=_0x48fdde;switch(Object[_0x1c3fc5(0x203)](_0x117d78)[0x0]){case'timeshift':_0x117d78[_0x1c3fc5(0x247)]!=undefined&&(settings['timeshift']=_0x117d78[_0x1c3fc5(0x247)],updateTimeshift(settings['timeshift']));break;case _0x1c3fc5(0x235):switch(_0x117d78['function']){case _0x1c3fc5(0x1c4):initclient();break;case'emitHistory':emitHistory(_0x117d78['args']);break;case _0x1c3fc5(0x177):getPortfolio(_0x117d78[_0x1c3fc5(0x1c0)]);break;case _0x1c3fc5(0x1f5):storeConfiguration(_0x117d78[_0x1c3fc5(0x1c0)]);break;case _0x1c3fc5(0x245):storeHeadless(_0x117d78['args']);break;case'getStartingBalances':getStartingBalances();break;case _0x1c3fc5(0x1ea):placeOrder(_0x117d78[_0x1c3fc5(0x1c0)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x284b86=_0x463318;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config[_0x284b86(0x216)]);let _0x45773c=await loadSymbols();_0x45773c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x512eb4,_0x4c449d){const _0x53b458=_0x463318,_0x50cceb=ccxt[config[_0x53b458(0x160)]];let _0x2da592;switch(config['exchange']){case _0x53b458(0x1da):_0x2da592=_0x53b458(0x215);break;case _0x53b458(0x213):_0x2da592='wss://stream.binance.us:9443';break;default:_0x2da592=_0x53b458(0x215);}exchange=new _0x50cceb({'apiKey':_0x512eb4,'secret':_0x4c449d,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x512eb4,'api_secret':_0x4c449d,'beautify':!![],'wsUrl':_0x2da592},logger),config[_0x53b458(0x160)]==_0x53b458(0x213)&&(stablecoins={'eur':{'coin':_0x53b458(0x163),'symbol':_0x53b458(0x1a7)},'usd':{'coin':'BTCUSDT','symbol':_0x53b458(0x1f8)}});}async function loadSymbols(){const _0x3dba19=_0x463318;let _0x4cf418;try{markets=await exchange[_0x3dba19(0x19b)]();const _0x3c85b4=[_0x3dba19(0x13c),_0x3dba19(0x1cb),'HOT/EUR'];allSymbols=exchange[_0x3dba19(0x196)][_0x3dba19(0x1ad)](_0x212ca8=>{let _0x28471a=![];return _0x3c85b4['forEach'](_0x4e22ee=>{const _0x29721c=_0x5cd5;if(_0x212ca8[_0x29721c(0x1be)](_0x4e22ee))_0x28471a=!![];}),!_0x28471a;}),_0x4cf418=!![];}catch(_0x36b631){await handleError(_0x36b631,_0x3dba19(0x18c)),_0x4cf418=![];}return _0x4cf418;}async function initbot(){const _0x3f13f9=_0x463318;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x692e77=dbCoinResults['get'](_0x3f13f9(0x207))[_0x3f13f9(0x23c)]();if(_0x692e77[_0x3f13f9(0x211)]==0x0)await resetCoinResults();}async function initclient(){const _0x3ea20b=_0x463318;proxyEmit(_0x3ea20b(0x156),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3ea20b(0x1ff),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function _0x5cd5(_0x16fd4d,_0x4ae5e6){const _0x37e1a2=_0x1a19();return _0x5cd5=function(_0x2d1f1e,_0x43d205){_0x2d1f1e=_0x2d1f1e-0x13b;let _0x1a19f0=_0x37e1a2[_0x2d1f1e];return _0x1a19f0;},_0x5cd5(_0x16fd4d,_0x4ae5e6);}function cleanws(){const _0x4a742b=_0x463318;wsinitialized=![];ws1&&(ws1[_0x4a742b(0x18f)](_0x46672f=>{const _0x4fb326=_0x4a742b;try{wsClient[_0x4fb326(0x1f0)](_0x46672f);}catch(_0x1aa466){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x48d437){}ws2=null;}}async function initws(){const _0x29b55d=_0x463318;cleanws();let _0x2e33ba=[];currentCoins[_0x29b55d(0x18f)](_0x171fad=>{const _0x1c3da0=_0x29b55d;if(_0x171fad[_0x1c3da0(0x1ce)]!=config[_0x1c3da0(0x1d7)])_0x2e33ba[_0x1c3da0(0x18e)](noslash(_0x171fad[_0x1c3da0(0x21e)]));});if(!_0x2e33ba[_0x29b55d(0x1be)](stablecoins[_0x29b55d(0x1ec)][_0x29b55d(0x1ce)]))_0x2e33ba['push'](stablecoins[_0x29b55d(0x1ec)]['coin']);if(!_0x2e33ba[_0x29b55d(0x1be)](stablecoins[_0x29b55d(0x1d8)]['coin']))_0x2e33ba[_0x29b55d(0x18e)](stablecoins['usd'][_0x29b55d(0x1ce)]);if(!_0x2e33ba[_0x29b55d(0x1be)](_0x29b55d(0x217)+config[_0x29b55d(0x1d7)]))_0x2e33ba['push'](_0x29b55d(0x217)+config[_0x29b55d(0x1d7)]);try{_0x2e33ba[_0x29b55d(0x18f)]((_0x53cc49,_0x26c5fb)=>{ws1[_0x26c5fb]=wsClient['subscribeSpotKline'](_0x53cc49,'1m');}),ws2=wsClient[_0x29b55d(0x1b3)](),wsClient['on'](_0x29b55d(0x164),_0xf68e44=>{const _0xb50945=_0x29b55d;if(!Array[_0xb50945(0x1c2)](_0xf68e44)&&!_0xf68e44[_0xb50945(0x19c)][_0xb50945(0x1be)](_0xb50945(0x1d4))){if(_0xf68e44['eventType']===_0xb50945(0x19e)){global[_0xb50945(0x22d)][_0xf68e44['kline']['symbol']]=_0xf68e44[_0xb50945(0x19e)][_0xb50945(0x241)];return;}}else{if(!Array[_0xb50945(0x1c2)](_0xf68e44)&&_0xf68e44[_0xb50945(0x19c)][_0xb50945(0x1be)](_0xb50945(0x1d4))){if(_0xf68e44[_0xb50945(0x240)]['includes'](_0xb50945(0x171))){updateNumberCoins(_0xf68e44);return;}}}}),wsClient['on'](_0x29b55d(0x1a0),async _0x7ac163=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x2b560b){await handleError(_0x2b560b,_0x29b55d(0x1ab));}let _0x314440,_0x52ca66=0x0;loading[_0x29b55d(0x1f4)]=[];let _0x147d9a=0x0;currentCoins[_0x29b55d(0x18f)](_0x117e5e=>{const _0xb47d5f=_0x29b55d;if(_0x117e5e[_0xb47d5f(0x1ce)]!=config[_0xb47d5f(0x1d7)])loading[_0xb47d5f(0x1f4)][_0xb47d5f(0x18e)](_0x117e5e[_0xb47d5f(0x21e)]);}),loadingCanceled=![];while(_0x314440!=currentCoins[_0x29b55d(0x211)]-0x1){_0x314440=0x0,currentCoins[_0x29b55d(0x18f)](_0x1a9a54=>{const _0x5f46a3=_0x29b55d;_0x1a9a54[_0x5f46a3(0x1ce)]!=config[_0x5f46a3(0x1d7)]&&global['ticker'][noslash(_0x1a9a54[_0x5f46a3(0x21e)])]&&(loading[_0x5f46a3(0x1f4)]=loading[_0x5f46a3(0x1f4)][_0x5f46a3(0x1ad)](_0x394179=>_0x394179!=_0x1a9a54[_0x5f46a3(0x21e)]),_0x314440++);}),loading[_0x29b55d(0x22b)]=Math[_0x29b55d(0x242)](_0x314440/(currentCoins['length']-0x1)*0x64);_0x147d9a>0x1e*0x5&&(loading[_0x29b55d(0x146)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x29b55d(0x1a5)]=!![],emitLoadingProgress();break;}else _0x314440!=_0x52ca66&&(_0x52ca66=_0x314440,emitLoadingProgress()),_0x147d9a++,await sleep(0xc8);}if(_0x314440==currentCoins[_0x29b55d(0x211)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x1955f8=_0x463318;proxyEmit(_0x1955f8(0x13f),loading);}async function getFiat(){const _0x2bcaa3=_0x463318;let _0x19a656=0x0,_0x56c606=0x0;try{_0x19a656=global[_0x2bcaa3(0x22d)][stablecoins['eur']['coin']],_0x56c606=global[_0x2bcaa3(0x22d)][stablecoins[_0x2bcaa3(0x1d8)][_0x2bcaa3(0x1ce)]];}catch(_0x43643f){await handleError(_0x43643f,_0x2bcaa3(0x1d0));}return{'eur':Number(_0x19a656),'usd':Number(_0x56c606)};}async function setStartDatePerformance(_0x2e946e){const _0x11601e=_0x463318,_0x2e50eb=fns[_0x11601e(0x1a4)](new Date(_0x2e946e['startdate']),_0x11601e(0x16c));let _0x3c2ea8=[];_0x3c2ea8[stablecoins[_0x11601e(0x1ec)][_0x11601e(0x1ce)]]=await getCloses(stablecoins[_0x11601e(0x1ec)][_0x11601e(0x21e)],new Date(_0x2e946e['startdate']),0x1),_0x3c2ea8[stablecoins['usd'][_0x11601e(0x1ce)]]=await getCloses(stablecoins[_0x11601e(0x1d8)]['symbol'],new Date(_0x2e946e[_0x11601e(0x1e2)]),0x1);let _0x50ba5c,_0x5b2a60=[];_0x2e946e[_0x11601e(0x154)][_0x11601e(0x18f)](_0x20cb32=>{const _0x44dbaf=_0x11601e;!_0x20cb32['excluded']&&_0x5b2a60[_0x44dbaf(0x18e)]({'coin':_0x20cb32[_0x44dbaf(0x1ce)],'number':_0x20cb32[_0x44dbaf(0x1bf)],'price':_0x20cb32[_0x44dbaf(0x212)]});}),_0x50ba5c={'date':_0x2e50eb,'eur':_0x3c2ea8[stablecoins['eur'][_0x11601e(0x1ce)]][0x0],'usd':_0x3c2ea8[stablecoins['usd'][_0x11601e(0x1ce)]][0x0],'coins':_0x5b2a60};let _0x4693f3=dbPerformance['get'](_0x11601e(0x165))[_0x11601e(0x149)]({'date':_0x2e50eb})[_0x11601e(0x23c)]();_0x4693f3?dbPerformance[_0x11601e(0x1e3)](_0x11601e(0x165))[_0x11601e(0x149)]({'date':_0x2e50eb})[_0x11601e(0x1f1)](_0x50ba5c)[_0x11601e(0x1ae)]():dbPerformance[_0x11601e(0x1e3)](_0x11601e(0x165))['push'](_0x50ba5c)['write'](),_0x4693f3=dbPerformance[_0x11601e(0x1e3)](_0x11601e(0x165))[_0x11601e(0x232)](_0x11601e(0x15b))[_0x11601e(0x23c)](),_0x4693f3[_0x11601e(0x18f)](_0x2292a6=>{const _0x5dd5ff=_0x11601e;_0x2292a6['date']<_0x2e50eb&&dbPerformance[_0x5dd5ff(0x1e3)]('data')[_0x5dd5ff(0x144)]({'date':_0x2292a6[_0x5dd5ff(0x15b)]})[_0x5dd5ff(0x1ae)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x579af8){const _0x2fd2ce=_0x463318;let _0x1fc1f0,_0x488a20=[];logHistory(_0x2fd2ce(0x1e5),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x579af8[_0x2fd2ce(0x154)][_0x2fd2ce(0x18f)](_0x308ad2=>{const _0x1dbba1=_0x2fd2ce;if(_0x308ad2[_0x1dbba1(0x1ce)]!=config['basecoin']&&!_0x308ad2[_0x1dbba1(0x17a)])_0x488a20['push']({'coin':_0x308ad2[_0x1dbba1(0x1ce)],'symbol':_0x308ad2[_0x1dbba1(0x21e)]});});let _0xdf4d01=[];try{const _0x5d41ef=fns[_0x2fd2ce(0x1a4)](fns[_0x2fd2ce(0x189)](_0x579af8['startdate'][_0x2fd2ce(0x210)](/\//g,'-')),_0x2fd2ce(0x190));for(const _0x1c709f of _0x488a20){if(_0x1c709f[_0x2fd2ce(0x1ce)]!=config[_0x2fd2ce(0x1d7)])_0x1fc1f0=await exchange['fetchOrders'](_0x1c709f[_0x2fd2ce(0x21e)],Date['parse'](_0x5d41ef));_0x1fc1f0[_0x2fd2ce(0x18f)](_0x1662ce=>{const _0xbc4bc3=_0x2fd2ce,_0x259d8f=_0x1c709f[_0xbc4bc3(0x21e)][_0xbc4bc3(0x1be)](config[_0xbc4bc3(0x1d7)]+'/'),_0xa6c56a=fns[_0xbc4bc3(0x1a4)](fns[_0xbc4bc3(0x189)](_0x1662ce[_0xbc4bc3(0x141)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x3058e9=fns[_0xbc4bc3(0x1a4)](fns[_0xbc4bc3(0x189)](_0x1662ce[_0xbc4bc3(0x141)]),_0xbc4bc3(0x16c));let _0xd019b2;if(_0x1662ce['side']==_0xbc4bc3(0x204)&&_0x259d8f==![])_0xd019b2=_0x1662ce['amount'];if(_0x1662ce['side']=='buy'&&_0x259d8f==!![])_0xd019b2=-_0x1662ce[_0xbc4bc3(0x20f)]*_0x1662ce[_0xbc4bc3(0x179)];if(_0x1662ce[_0xbc4bc3(0x1ed)]==_0xbc4bc3(0x15d)&&_0x259d8f==![])_0xd019b2=-_0x1662ce[_0xbc4bc3(0x20f)];if(_0x1662ce[_0xbc4bc3(0x1ed)]=='sell'&&_0x259d8f==!![])_0xd019b2=_0x1662ce[_0xbc4bc3(0x20f)]*_0x1662ce['price'];_0xdf4d01[_0xbc4bc3(0x18e)]({'timestamp':_0xa6c56a,'date':_0x3058e9,'coin':_0x1c709f['coin'],'symbol':_0x1c709f[_0xbc4bc3(0x21e)],'type':_0x1662ce[_0xbc4bc3(0x199)],'side':_0x1662ce[_0xbc4bc3(0x1ed)],'reverse':_0x259d8f,'amount':formatResult(_0x1662ce[_0xbc4bc3(0x202)],0x8),'filled':formatResult(_0x1662ce[_0xbc4bc3(0x202)],0x8),'coinamount':formatResult(_0xd019b2,0x8),'price':formatResult(_0x1662ce[_0xbc4bc3(0x179)],0x8)});let _0x49237e;if(_0x1662ce['side']==_0xbc4bc3(0x204)&&_0x259d8f==![])_0x49237e=-_0x1662ce[_0xbc4bc3(0x20f)]*_0x1662ce['price'];if(_0x1662ce['side']==_0xbc4bc3(0x204)&&_0x259d8f==!![])_0x49237e=_0x1662ce[_0xbc4bc3(0x20f)];if(_0x1662ce[_0xbc4bc3(0x1ed)]==_0xbc4bc3(0x15d)&&_0x259d8f==![])_0x49237e=_0x1662ce[_0xbc4bc3(0x20f)]*_0x1662ce[_0xbc4bc3(0x179)];if(_0x1662ce['side']==_0xbc4bc3(0x15d)&&_0x259d8f==!![])_0x49237e=-_0x1662ce[_0xbc4bc3(0x20f)];_0xdf4d01[_0xbc4bc3(0x18e)]({'date':_0x3058e9,'coin':config[_0xbc4bc3(0x1d7)],'coinamount':formatResult(_0x49237e,0x8)});});}_0xdf4d01['sort']((_0x4d006b,_0x4736c8)=>_0x4d006b[_0x2fd2ce(0x1a3)]>_0x4736c8[_0x2fd2ce(0x1a3)]?0x1:_0x4736c8['timestamp']>_0x4d006b['timestamp']?-0x1:0x0),dbLogs[_0x2fd2ce(0x1e3)](_0x2fd2ce(0x1de))[_0x2fd2ce(0x144)]()[_0x2fd2ce(0x1ae)](),_0xdf4d01[_0x2fd2ce(0x18f)](_0x1fa69c=>{const _0x24b6a6=_0x2fd2ce;let _0xe1a435;_0x1fa69c[_0x24b6a6(0x1ce)]!=config[_0x24b6a6(0x1d7)]&&(_0xe1a435={'time':_0x1fa69c[_0x24b6a6(0x1a3)],'type':_0x24b6a6(0x23e),'event':_0x24b6a6(0x174)+_0x1fa69c[_0x24b6a6(0x21e)]+'\x20'+_0x1fa69c[_0x24b6a6(0x1ed)]+'\x20#'+_0x1fa69c[_0x24b6a6(0x20f)]+'\x20@'+_0x1fa69c[_0x24b6a6(0x179)]},dbLogs['get'](_0x24b6a6(0x1de))['push'](_0xe1a435)[_0x24b6a6(0x1ae)]());});const _0x4da5e4=fns[_0x2fd2ce(0x1ef)]({'start':new Date(_0x579af8['startdate']),'end':new Date()})[_0x2fd2ce(0x140)](_0x4bbead=>fns[_0x2fd2ce(0x1a4)](_0x4bbead,_0x2fd2ce(0x16c)));let _0x3b1bb9=[];_0x579af8[_0x2fd2ce(0x154)][_0x2fd2ce(0x18f)](_0x216d77=>{const _0x5c3917=_0x2fd2ce;if(!_0x216d77[_0x5c3917(0x17a)]){_0x3b1bb9[_0x216d77[_0x5c3917(0x1ce)]]=[];let _0x278f9f=_0x216d77[_0x5c3917(0x1bf)];_0x4da5e4[_0x5c3917(0x18f)]((_0x2ac6a5,_0x27a782)=>{const _0x321f1c=_0x5c3917;let _0x53beeb=_0xdf4d01[_0x321f1c(0x1ad)](_0x188f51=>_0x188f51['coin']==_0x216d77['coin']&&_0x188f51['date']==_0x2ac6a5);if(_0x53beeb[_0x321f1c(0x211)]!=0x0){let _0x5d43ba=_0x53beeb['reduce']((_0x2f4feb,_0x3632ed)=>{return _0x2f4feb+=_0x3632ed['coinamount'],_0x2f4feb;},0x0);_0x278f9f+=_0x5d43ba;}_0x3b1bb9[_0x216d77[_0x321f1c(0x1ce)]][_0x2ac6a5]=_0x278f9f;});}});const _0x2340df=[..._0x488a20];_0x2340df[_0x2fd2ce(0x18e)]({'coin':stablecoins[_0x2fd2ce(0x1ec)][_0x2fd2ce(0x1ce)],'symbol':stablecoins[_0x2fd2ce(0x1ec)][_0x2fd2ce(0x21e)]}),_0x2340df[_0x2fd2ce(0x18e)]({'coin':stablecoins[_0x2fd2ce(0x1d8)]['coin'],'symbol':stablecoins[_0x2fd2ce(0x1d8)][_0x2fd2ce(0x21e)]});let _0x141280=[];for(const _0x3d4149 of _0x2340df){_0x141280[_0x3d4149[_0x2fd2ce(0x1ce)]]=await getCloses(_0x3d4149[_0x2fd2ce(0x21e)],new Date(_0x579af8[_0x2fd2ce(0x1e2)]));}dbPerformance[_0x2fd2ce(0x1e3)](_0x2fd2ce(0x165))[_0x2fd2ce(0x144)]()[_0x2fd2ce(0x1ae)](),_0x4da5e4[_0x2fd2ce(0x18f)]((_0x402794,_0x1fa76e)=>{const _0x68aaf9=_0x2fd2ce;let _0x3a6810,_0x3a516e=[];_0x1fa76e==0x0?(_0x579af8['portfolio']['forEach'](_0x2776d5=>{const _0x4c28c5=_0x5cd5;!_0x2776d5['excluded']&&_0x3a516e['push']({'coin':_0x2776d5[_0x4c28c5(0x1ce)],'number':_0x2776d5[_0x4c28c5(0x1bf)],'price':_0x2776d5[_0x4c28c5(0x212)]});}),_0x3a6810={'date':_0x402794,'eur':_0x141280[stablecoins[_0x68aaf9(0x1ec)][_0x68aaf9(0x1ce)]][_0x1fa76e],'usd':_0x141280[stablecoins[_0x68aaf9(0x1d8)][_0x68aaf9(0x1ce)]][_0x1fa76e],'coins':_0x3a516e}):(_0x579af8[_0x68aaf9(0x154)]['forEach'](_0x4b4238=>{const _0x33070e=_0x68aaf9;!_0x4b4238['excluded']&&_0x3a516e[_0x33070e(0x18e)]({'coin':_0x4b4238['coin'],'number':_0x3b1bb9[_0x4b4238[_0x33070e(0x1ce)]][_0x402794],'price':_0x4b4238[_0x33070e(0x1ce)]==config[_0x33070e(0x1d7)]?0x1:_0x141280[_0x4b4238[_0x33070e(0x1ce)]][_0x1fa76e]});}),_0x3a6810={'date':_0x402794,'eur':_0x141280[stablecoins[_0x68aaf9(0x1ec)][_0x68aaf9(0x1ce)]][_0x1fa76e],'usd':_0x141280[stablecoins[_0x68aaf9(0x1d8)][_0x68aaf9(0x1ce)]][_0x1fa76e],'coins':_0x3a516e}),dbPerformance[_0x68aaf9(0x1e3)](_0x68aaf9(0x165))[_0x68aaf9(0x18e)](_0x3a6810)[_0x68aaf9(0x1ae)]();}),emitPerformance(),await resetCoinResults();for(let _0x5d56e4 of _0xdf4d01){_0x5d56e4[_0x2fd2ce(0x1ce)]!=config[_0x2fd2ce(0x1d7)]&&await updateCoinResults(_0x5d56e4);}logHistory(_0x2fd2ce(0x1e5),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x207790){await handleError(_0x207790,_0x2fd2ce(0x225));}}async function getCloses(_0x2f16ee,_0x3da461,_0x2bea67=undefined){const _0x5875ba=_0x463318,_0x2e0a22='1d';let _0x57d440,_0x4eeb7e;const _0x33ed44=fns[_0x5875ba(0x1a1)](new Date(),_0x3da461)+0x1;try{const _0x443463=exchange[_0x5875ba(0x1ca)]()-_0x33ed44*0x18*0xe10*0x3e8;_0x57d440=await exchange[_0x5875ba(0x192)](_0x2f16ee,_0x2e0a22,_0x443463,_0x2bea67),_0x4eeb7e=await exchange[_0x5875ba(0x1fa)](_0x2f16ee);}catch(_0x4a715e){await handleError(_0x4a715e,'getCloses()');}let _0x18723c=ohlcvToCloses(_0x57d440);return _0x18723c[_0x5875ba(0x18e)](_0x4eeb7e[_0x2f16ee]['last']),_0x18723c;}function ohlcvToCloses(_0x39df79){let _0x511de6=[];return _0x39df79['forEach'](function(_0x166fba){_0x511de6['push'](_0x166fba[0x4]);}),_0x511de6;}function getConfiguration(_0x5a37d6){const _0x550226=_0x463318;let _0x21cb3e=dbConfig['get'](_0x550226(0x1c7))[_0x550226(0x149)]({'botID':_0x5a37d6})[_0x550226(0x23c)]();if(_0x21cb3e){let _0x2d407a=![];!_0x21cb3e['exchange']&&(_0x21cb3e={..._0x21cb3e,'exchange':_0x550226(0x1da)},_0x2d407a=!![]),!_0x21cb3e[_0x550226(0x1d7)]&&(_0x21cb3e={..._0x21cb3e,'basecoin':'BTC'},_0x2d407a=!![]),!_0x21cb3e[_0x550226(0x1db)]&&(_0x21cb3e={..._0x21cb3e,'ordertype':_0x550226(0x169)},_0x2d407a=!![]),!_0x21cb3e['timeout']&&(_0x21cb3e={..._0x21cb3e,'timeout':0x14},_0x2d407a=!![]),!_0x21cb3e[_0x550226(0x243)]&&(_0x21cb3e={..._0x21cb3e,'emojibuy':''},_0x2d407a=!![]),!_0x21cb3e['emojisell']&&(_0x21cb3e={..._0x21cb3e,'emojisell':''},_0x2d407a=!![]),!_0x21cb3e['showname']&&(_0x21cb3e={..._0x21cb3e,'showname':![]},_0x2d407a=!![]),_0x2d407a&&(_0x21cb3e={'botID':_0x21cb3e['botID'],'exchange':_0x21cb3e[_0x550226(0x160)],'apiKey':_0x21cb3e[_0x550226(0x21c)],'apiSecret':_0x21cb3e[_0x550226(0x216)],'basecoin':_0x21cb3e[_0x550226(0x1d7)],'botname':_0x21cb3e[_0x550226(0x227)],'showname':_0x21cb3e[_0x550226(0x230)],'threshold':_0x21cb3e[_0x550226(0x1b2)],'ordertype':_0x21cb3e[_0x550226(0x1db)],'timeout':_0x21cb3e[_0x550226(0x146)],'startdate':_0x21cb3e[_0x550226(0x1e2)],'recreate':_0x21cb3e[_0x550226(0x22f)],'timeshift':_0x21cb3e[_0x550226(0x247)],'headless':_0x21cb3e[_0x550226(0x1e9)],'cooldown':_0x21cb3e[_0x550226(0x1b4)],'emojibuy':_0x21cb3e[_0x550226(0x243)],'emojisell':_0x21cb3e[_0x550226(0x15f)],'portfolio':_0x21cb3e[_0x550226(0x154)]},dbConfig['get'](_0x550226(0x1c7))[_0x550226(0x144)]()[_0x550226(0x1ae)](),dbConfig[_0x550226(0x1e3)](_0x550226(0x1c7))[_0x550226(0x18e)](_0x21cb3e)[_0x550226(0x1ae)]());}else _0x21cb3e={'botID':_0x5a37d6,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x5a37d6,'showname':![],'threshold':'3','ordertype':_0x550226(0x169),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x550226(0x247)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x21cb3e;}function emittedConfiguration(){const _0x5c22e9=_0x463318;let _0x6447e7;return config[_0x5c22e9(0x21c)]==''?_0x6447e7=config:_0x6447e7={...config,'apiKey':_0x5c22e9(0x13b),'apiSecret':_0x5c22e9(0x13b)},_0x6447e7;}function getSettings(){const _0x1e401f=_0x463318;return dbSettings['get'](_0x1e401f(0x21b))[_0x1e401f(0x23c)]();}function getSecure(){const _0x19192c=_0x463318;return dbSecure[_0x19192c(0x1e3)](_0x19192c(0x14a))[_0x19192c(0x23c)]()||{};}function updateTimeshift(_0x34cfc6){const _0x273fcc=_0x463318;let _0xa842d=dbConfig[_0x273fcc(0x1e3)](_0x273fcc(0x1c7))[_0x273fcc(0x149)]({'botID':botID})[_0x273fcc(0x23c)]();_0xa842d&&dbConfig[_0x273fcc(0x1e3)](_0x273fcc(0x1c7))[_0x273fcc(0x149)]({'botID':botID})[_0x273fcc(0x1f1)]({'timeshift':_0x34cfc6})[_0x273fcc(0x1ae)](),config[_0x273fcc(0x247)]=_0x34cfc6,proxyEmit(_0x273fcc(0x156),emittedConfiguration());}function _0x1a19(){const _0x40fcb8=['outboundAccountPosition','realized','headless','placeOrder','availableBalance','eur','side','Order(s)\x20not\x20validated\x20after\x20','eachDayOfInterval','closeWs','assign','bot-','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','remainingSymbols','storeConfiguration','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','target','BTC/USDT','Limit\x20(low-margin)','fetchTickers','toString','limit-high','Order(s)\x20filled\x20-\x20balancing\x20resumed','27IdSRbB','balances','getSeconds','hybrid-crypto-js','filled','keys','buy','9194022jkXQix','\x20hour','coins','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Binance\x20API\x20key\x20is\x20invalid','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','WebSockets(','privateKey','bb-secure.json','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','amount','replace','length','startprice','binanceus','getPortfolio()','wss://stream.binance.com:9443','apiSecret','BNB','lowdb/adapters/FileSync','time','\x20minutes\x20-\x20balancing\x20resumed','settings','apiKey','argv','symbol','buys','stringify','getHours','number','orderStatus','fromCodePoint','recreateHistory()','getMonth','botname','getDate','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','total','progress','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ticker','padStart','recreate','showname','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','sortBy','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','ask','function','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','add','trade','test','createOrder','offset','value','limits','order','getCoins()','wsMarket','close','round','emojibuy','toLowerCase','storeHeadless','accumulatedQuantity','timeshift','************','DAI/','performance','USDC','coin-loading-progress','map','datetime','\x20-\x20','getMinutes','remove','limit-low','timeout','breakeven','Order\x20amount\x20is\x20invalid:\x20','find','secure','Pausing\x20bot\x20for\x205\x20minutes\x20(','2928rzBZwW','valid','2dltCnb','page','send','entries','35040775CFRZmd','toFixed','portfolio','Order(s)\x20validated\x20-\x20balancing\x20resumed','configuration','cancelOrder','delta','indexOf','event','date','BTCEUR','sell','getFullYear','emojisell','exchange','starting-balances','asset','BTCBUSD','formattedMessage','data','cost','ExchangeNotAvailable','last','market','8imUIFy','running','yyyy/MM/dd','MIN_NOTIONAL','BTC/EUR','API-key\x20format\x20invalid','has','spot','cancelOrder()','487778SWSRaK','Order:\x20','shift','AuthenticationError','getPortfolio','3105SeUdtx','price','excluded','270582FzlxVJ','1045954mCgHrR','slice','limit','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20|\x20Unknown\x20error\x20occured','Binance\x20API\x20secret\x20is\x20invalid','getTime','Crypt','apply','distribution','reverse','EUR','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','parseISO','exit','./version.json','loadSymbols()','search','push','forEach','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fetchOHLCV','RSA-OAEP','\x20order:\x20','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','symbols','InsufficientFunds','placeOrder()','type','max','loadMarkets','wsKey','001','kline','fee','reconnected','differenceInCalendarDays','BTCUSDT','timestamp','format','cancel','split','BTC/BUSD','(((.+)+)+)+$',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Executed\x20','initws()','\x20orders\x20in\x20less\x20than\x20','filter','write','sha256',')\x20|\x20Error\x20details:\x20','DDoSProtection','threshold','subscribeSpotUserDataStream','cooldown','message','constructor',':\x20Bot\x20','currency','Market','abs','Invalid\x20quantity','existsSync','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','includes','startnumber','args','orderType','isArray','orderId','initclient','log','version','bot','defaults','BTC','milliseconds','HOT/BTC','mkdirSync','fees','coin','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','getFiat()','bid','event-history','kill','userData','sells','5004410PRltvE','basecoin','usd','InvalidNonce','binance','ordertype','Error:\x20Invalid\x20argument\x20','eventType','logs','splice','min','error','startdate','get','Limit\x20(high-margin)','success','LIMIT'];_0x1a19=function(){return _0x40fcb8;};return _0x1a19();}async function storeConfiguration(_0x3fa95e){const _0x4631e4=_0x463318;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x4c98e1=dbConfig[_0x4631e4(0x1e3)](_0x4631e4(0x1c7))[_0x4631e4(0x149)]({'botID':botID})[_0x4631e4(0x23c)]();_0x3fa95e={..._0x3fa95e,'apiKey':crypt['decrypt'](secure['privateKey'],_0x3fa95e['apiKey'])['message'],'apiSecret':crypt['decrypt'](secure[_0x4631e4(0x20c)],_0x3fa95e[_0x4631e4(0x216)])['message']};if(_0x4c98e1){if(_0x3fa95e[_0x4631e4(0x21c)]==_0x4631e4(0x13b))_0x3fa95e['apiKey']=config[_0x4631e4(0x21c)];if(_0x3fa95e[_0x4631e4(0x216)]==_0x4631e4(0x13b))_0x3fa95e['apiSecret']=config[_0x4631e4(0x216)];dbConfig['get'](_0x4631e4(0x1c7))['find']({'botID':botID})[_0x4631e4(0x1f1)](_0x3fa95e)[_0x4631e4(0x1ae)]();}else dbConfig[_0x4631e4(0x1e3)](_0x4631e4(0x1c7))['push'](_0x3fa95e)[_0x4631e4(0x1ae)](),process[_0x4631e4(0x150)]({'status':'enabled','live':_0x4631e4(0x16b)});config={..._0x3fa95e};if(config[_0x4631e4(0x22f)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x3fa95e['botname']}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x172723){const _0xd786bb=_0x463318,_0x34ef36={...config,'headless':_0x172723['headless']};let _0x3870f7=dbConfig[_0xd786bb(0x1e3)](_0xd786bb(0x1c7))[_0xd786bb(0x149)]({'botID':botID})[_0xd786bb(0x23c)]();_0x3870f7&&dbConfig[_0xd786bb(0x1e3)]('bot')[_0xd786bb(0x149)]({'botID':botID})[_0xd786bb(0x1f1)](_0x34ef36)[_0xd786bb(0x1ae)](),config={..._0x34ef36},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x4d2cf2){return _0x4d2cf2['replace']('/','');}function updateNumberCoins(_0x50decb){const _0x424c42=_0x463318;_0x50decb['eventType']&&_0x50decb['eventType']==_0x424c42(0x1e7)&&_0x50decb[_0x424c42(0x1ff)][_0x424c42(0x18f)](_0xebb005=>{const _0xb4aedf=_0x424c42;let _0x2c528e=currentCoins['find'](_0x212d0f=>_0x212d0f[_0xb4aedf(0x1ce)]==_0xebb005[_0xb4aedf(0x162)]),_0x4689b5=config['portfolio']['find'](_0x5da317=>_0x5da317[_0xb4aedf(0x1ce)]==_0xebb005[_0xb4aedf(0x162)]);if(_0x2c528e&&_0x4689b5)_0x2c528e[_0xb4aedf(0x222)]=Math[_0xb4aedf(0x19a)](Number(_0xebb005[_0xb4aedf(0x1eb)])+(_0x4689b5[_0xb4aedf(0x23b)]||0x0),0x0);});if(_0x50decb[_0x424c42(0x1dd)]&&_0x50decb['eventType']=='executionReport'){if(_0x50decb[_0x424c42(0x1c1)]==_0x424c42(0x1e6)&&_0x50decb[_0x424c42(0x223)]=='FILLED'){if(lastOrders)lastOrders[_0x424c42(0x18f)](_0x5c88b3=>{const _0x3c8b12=_0x424c42;if(_0x5c88b3['orderId']==_0x50decb['orderId']){if(_0x5c88b3[_0x3c8b12(0x186)])_0x5c88b3[_0x3c8b12(0x202)]=_0x50decb[_0x3c8b12(0x246)]*_0x5c88b3[_0x3c8b12(0x179)];else _0x5c88b3[_0x3c8b12(0x202)]=_0x50decb[_0x3c8b12(0x246)];}});}}}async function getCoins(_0x108e44=!![],_0x58ac0d=config[_0x463318(0x1d7)]){const _0x4e5f10=_0x463318;let _0x544788,_0x40c35f=[],_0x47594a=[],_0x3dce93=[];try{_0x544788=await exchange['fetchBalance'](),mybalances=_0x544788[_0x4e5f10(0x22a)];if(!_0x108e44)for(const [_0x2e7ba6,_0x933f07]of Object[_0x4e5f10(0x151)](mybalances)){_0x3dce93[_0x4e5f10(0x18e)](_0x2e7ba6);}else config[_0x4e5f10(0x154)][_0x4e5f10(0x18f)](_0x59b10e=>{const _0x2c8ac6=_0x4e5f10;if(!_0x59b10e[_0x2c8ac6(0x17a)])_0x3dce93[_0x2c8ac6(0x18e)](_0x59b10e[_0x2c8ac6(0x1ce)]);});if(_0x58ac0d=='')for(const [_0x1b8e49,_0x1c334a]of Object[_0x4e5f10(0x151)](mybalances)){_0x1c334a[_0x4e5f10(0x1fb)]()!=0x0&&_0x47594a[_0x4e5f10(0x18e)]({'coin':_0x1b8e49});}else for(const [_0x4de220,_0x51b34f]of Object[_0x4e5f10(0x151)](mybalances)){if(_0x3dce93[_0x4e5f10(0x1be)](_0x4de220)){const _0x1fe45f=config[_0x4e5f10(0x154)][_0x4e5f10(0x149)](_0x4d1176=>_0x4d1176['coin']==_0x4de220);if((_0x51b34f[_0x4e5f10(0x1fb)]()!=0x0||_0x1fe45f)&&(allSymbols[_0x4e5f10(0x1be)](_0x4de220+'/'+_0x58ac0d)||_0x4de220==_0x58ac0d))_0x47594a[_0x4e5f10(0x18e)]({'coin':_0x4de220,'symbol':_0x4de220+'/'+_0x58ac0d,'reverse':![],'number':Math['max'](_0x51b34f+(_0x1fe45f&&_0x1fe45f[_0x4e5f10(0x23b)]||0x0),0x0)}),_0x4de220!=_0x58ac0d&&_0x40c35f['push'](_0x4de220+'/'+_0x58ac0d);else(_0x51b34f[_0x4e5f10(0x1fb)]()!=0x0||_0x1fe45f)&&allSymbols[_0x4e5f10(0x1be)](_0x58ac0d+'/'+_0x4de220)&&(_0x47594a[_0x4e5f10(0x18e)]({'coin':_0x4de220,'symbol':_0x58ac0d+'/'+_0x4de220,'reverse':!![],'number':Math[_0x4e5f10(0x19a)](_0x51b34f+(_0x1fe45f&&_0x1fe45f[_0x4e5f10(0x23b)]||0x0),0x0)}),_0x4de220!=_0x58ac0d&&_0x40c35f[_0x4e5f10(0x18e)](_0x58ac0d+'/'+_0x4de220));}}}catch(_0x29d218){if(!_0x108e44){if(_0x29d218[_0x4e5f10(0x1fb)]()[_0x4e5f10(0x1be)](_0x4e5f10(0x16f)))return logHistory(_0x4e5f10(0x1e1),_0x4e5f10(0x209)),![];else{if(_0x29d218[_0x4e5f10(0x1fb)]()[_0x4e5f10(0x1be)](_0x4e5f10(0x176)))return logHistory(_0x4e5f10(0x1e1),_0x4e5f10(0x1f6)),![];else{if(_0x29d218['toString']()[_0x4e5f10(0x1be)](_0x4e5f10(0x20a)))return logHistory(_0x4e5f10(0x1e1),_0x4e5f10(0x181)),![];else await handleError(_0x29d218,_0x4e5f10(0x23f));}}}else await handleError(_0x29d218,_0x4e5f10(0x23f));}return _0x47594a;}async function getPortfolio(_0x341e4b){const _0x216396=_0x463318;let _0x4b56ba=[],_0x52608d=[],_0x97a8cd,_0x54015a=[],_0x449815,_0x181efd;_0x341e4b[_0x216396(0x21c)]==='************'||_0x341e4b[_0x216396(0x216)]===_0x216396(0x13b)?(_0x449815=config[_0x216396(0x21c)],_0x181efd=config[_0x216396(0x216)]):(_0x449815=_0x341e4b[_0x216396(0x21c)],_0x181efd=_0x341e4b[_0x216396(0x216)]);await initExchange(_0x449815,_0x181efd);let _0x3756a6=await loadSymbols();if(_0x3756a6){_0x54015a=await getCoins(![],_0x341e4b[_0x216396(0x1d7)]);if(_0x54015a===![])proxyEmit(_0x216396(0x154),![]);else{if(_0x341e4b[_0x216396(0x1d7)]=='')proxyEmit(_0x216396(0x154),_0x54015a);else{_0x54015a[_0x216396(0x18f)](_0x3d4244=>{const _0x2edf9c=_0x216396;_0x4b56ba[_0x2edf9c(0x18e)](_0x3d4244[_0x2edf9c(0x21e)]);});try{_0x52608d=await exchange[_0x216396(0x1fa)](_0x4b56ba);}catch(_0xecfd4){await handleError(_0xecfd4,_0x216396(0x214));}_0x54015a[_0x216396(0x18f)](_0x2803f5=>{const _0x267346=_0x216396;_0x2803f5[_0x267346(0x1ce)]!=_0x341e4b[_0x267346(0x1d7)]?_0x97a8cd=_0x2803f5['reverse']?0x1/_0x52608d[_0x2803f5[_0x267346(0x21e)]][_0x267346(0x168)]:_0x52608d[_0x2803f5[_0x267346(0x21e)]][_0x267346(0x168)]:_0x97a8cd=0x1,_0x2803f5[_0x267346(0x179)]=formatResult(_0x97a8cd,0x8);}),proxyEmit(_0x216396(0x154),_0x54015a);}}}else proxyEmit(_0x216396(0x154),![]);}function checkMinimums(_0x53c248){const _0x2bb885=_0x463318;let _0x9af6a8=!![];const _0x5ce00d=!_0x53c248[_0x2bb885(0x186)]?markets[_0x53c248[_0x2bb885(0x21e)]][_0x2bb885(0x23d)][_0x2bb885(0x20f)][_0x2bb885(0x1e0)]:markets[_0x53c248[_0x2bb885(0x21e)]][_0x2bb885(0x23d)][_0x2bb885(0x166)][_0x2bb885(0x1e0)],_0xd34cb1=!_0x53c248[_0x2bb885(0x186)]?markets[_0x53c248[_0x2bb885(0x21e)]][_0x2bb885(0x23d)][_0x2bb885(0x166)]['min']:markets[_0x53c248[_0x2bb885(0x21e)]][_0x2bb885(0x23d)][_0x2bb885(0x20f)][_0x2bb885(0x1e0)];if(Math['abs'](_0x53c248['trade'])<_0x5ce00d)_0x9af6a8=![];if(Math[_0x2bb885(0x1ba)](_0x53c248[_0x2bb885(0x238)])*_0x53c248[_0x2bb885(0x168)]<_0xd34cb1)_0x9af6a8=![];return _0x9af6a8;}async function getBalances(){const _0x5e7a2a=_0x463318;let _0x335096=0x0,_0x13c793;const _0x2edfb9=config[_0x5e7a2a(0x1b2)];currentCoins[_0x5e7a2a(0x18f)](_0x334d4a=>{const _0x3bd427=_0x5e7a2a;if(_0x334d4a['coin']!=config[_0x3bd427(0x1d7)]){let _0x2b067b=global[_0x3bd427(0x22d)][noslash(_0x334d4a['symbol'])];_0x13c793=_0x334d4a[_0x3bd427(0x186)]?0x1/_0x2b067b:_0x2b067b;}else _0x13c793=0x1;let _0x5d47d3=_0x334d4a[_0x3bd427(0x222)]*_0x13c793;_0x335096+=_0x5d47d3,_0x334d4a[_0x3bd427(0x168)]=formatResult(Number(_0x13c793),0x8),_0x334d4a[_0x3bd427(0x23c)]=_0x5d47d3;}),currentCoins['forEach'](_0x4d4eb0=>{const _0x3320dd=_0x5e7a2a;let _0x5b55ff=config[_0x3320dd(0x154)][_0x3320dd(0x149)](_0x1a887d=>_0x1a887d[_0x3320dd(0x1ce)]==_0x4d4eb0[_0x3320dd(0x1ce)]),_0x8e9593=Number(_0x5b55ff['distribution']),_0x1f7868=_0x4d4eb0['value']/_0x335096*0x64,_0x3fce06=_0x8e9593*_0x335096/0x64/_0x4d4eb0['last']-_0x4d4eb0[_0x3320dd(0x222)];_0x4d4eb0[_0x3320dd(0x185)]=formatResult(_0x1f7868,0x3),_0x4d4eb0['target']=formatResult(_0x8e9593,0x3),_0x4d4eb0[_0x3320dd(0x238)]=formatResult(_0x3fce06,0x8),_0x4d4eb0['side']='',_0x4d4eb0[_0x3320dd(0x14d)]='';if(_0x4d4eb0[_0x3320dd(0x1ce)]!=config['basecoin']){if(_0x4d4eb0[_0x3320dd(0x185)]>_0x8e9593)_0x4d4eb0[_0x3320dd(0x1ed)]=_0x3320dd(0x15d),_0x4d4eb0['valid']=checkMinimums(_0x4d4eb0);else _0x4d4eb0[_0x3320dd(0x185)]<_0x8e9593&&(_0x4d4eb0[_0x3320dd(0x1ed)]='buy',_0x4d4eb0[_0x3320dd(0x14d)]=checkMinimums(_0x4d4eb0));}_0x4d4eb0[_0x3320dd(0x158)]=_0x4d4eb0[_0x3320dd(0x185)]/_0x4d4eb0[_0x3320dd(0x1f7)]-0x1;}),currentCoins['sort']((_0x222152,_0x2f35f3)=>_0x222152[_0x5e7a2a(0x158)]<_0x2f35f3[_0x5e7a2a(0x158)]?0x1:_0x2f35f3[_0x5e7a2a(0x158)]<_0x222152[_0x5e7a2a(0x158)]?-0x1:0x0);const _0x4f665c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4f665c[_0x5e7a2a(0x1ec)],'usd':_0x4f665c['usd'],'portfolio':JSON[_0x5e7a2a(0x220)](currentCoins),'threshold':_0x2edfb9},proxyEmit(_0x5e7a2a(0x1ff),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5e7a2a(0x1e9)])headlessMode({'portfolio':currentCoins,'threshold':_0x2edfb9});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x16eb3f=_0x463318;if(!lastBalances)return;let _0x4ddf63=await getStartingBalances(![]),_0x44d637=[],_0x5c6ba9;JSON['parse'](lastBalances[_0x16eb3f(0x154)])[_0x16eb3f(0x18f)](_0x1d61c1=>{const _0x53cffd=_0x16eb3f;let _0xe3c972={'coin':_0x1d61c1[_0x53cffd(0x1ce)],'number':_0x1d61c1[_0x53cffd(0x222)],'price':_0x1d61c1[_0x53cffd(0x168)]};_0x44d637['push'](_0xe3c972);});const _0x2b6dfe=await getFiat();_0x5c6ba9={'date':lastBalances[_0x16eb3f(0x219)][_0x16eb3f(0x1a6)]('\x20')[0x0],'eur':_0x2b6dfe[_0x16eb3f(0x1ec)],'usd':_0x2b6dfe['usd'],'coins':_0x44d637};let _0x4cfff3=dbPerformance[_0x16eb3f(0x1e3)](_0x16eb3f(0x165))[_0x16eb3f(0x149)]({'date':_0x5c6ba9['date']})[_0x16eb3f(0x23c)]();_0x4cfff3?dbPerformance[_0x16eb3f(0x1e3)](_0x16eb3f(0x165))[_0x16eb3f(0x149)]({'date':_0x5c6ba9[_0x16eb3f(0x15b)]})[_0x16eb3f(0x1f1)](_0x5c6ba9)[_0x16eb3f(0x1ae)]():dbPerformance[_0x16eb3f(0x1e3)](_0x16eb3f(0x165))[_0x16eb3f(0x18e)](_0x5c6ba9)[_0x16eb3f(0x1ae)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x594bac=_0x463318;if(dbPerformance[_0x594bac(0x170)](_0x594bac(0x165))[_0x594bac(0x23c)]()){let _0x4222da=dbPerformance[_0x594bac(0x1e3)](_0x594bac(0x165))['sortBy'](_0x594bac(0x15b))['value']();proxyEmit(_0x594bac(0x13d),_0x4222da),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x2957f1=!![]){const _0x2d9122=_0x463318;let _0x9a3950=dbPerformance[_0x2d9122(0x1e3)](_0x2d9122(0x165))[_0x2d9122(0x149)]({'date':config[_0x2d9122(0x1e2)]})[_0x2d9122(0x23c)]();config[_0x2d9122(0x21c)]!=''&&!_0x9a3950&&(await setStartDatePerformance(config),_0x9a3950=dbPerformance[_0x2d9122(0x1e3)](_0x2d9122(0x165))['find']({'date':config[_0x2d9122(0x1e2)]})[_0x2d9122(0x23c)]());if(config[_0x2d9122(0x21c)]==''||!_0x9a3950)return{};let _0x261b9e=0x0,_0xa6b55a=0x0,_0x576864=0x0,_0x32fe24=[],_0x54e582=0x0;config[_0x2d9122(0x154)][_0x2d9122(0x18f)](_0x1d00cc=>{const _0x4b4f9f=_0x2d9122;if(!_0x1d00cc[_0x4b4f9f(0x17a)]){_0x32fe24[_0x54e582]={'coin':_0x1d00cc[_0x4b4f9f(0x1ce)],'symbol':_0x1d00cc[_0x4b4f9f(0x21e)],'number':_0x1d00cc['startnumber'],'price':_0x1d00cc[_0x4b4f9f(0x212)]},_0x261b9e+=_0x1d00cc[_0x4b4f9f(0x212)]*_0x1d00cc[_0x4b4f9f(0x1bf)];if(config['basecoin']==_0x4b4f9f(0x1c9))_0xa6b55a+=_0x1d00cc[_0x4b4f9f(0x212)]*_0x1d00cc['startnumber']*_0x9a3950[_0x4b4f9f(0x1ec)],_0x576864+=_0x1d00cc[_0x4b4f9f(0x212)]*_0x1d00cc[_0x4b4f9f(0x1bf)]*_0x9a3950[_0x4b4f9f(0x1d8)];else{if(config[_0x4b4f9f(0x1d7)]=='BUSD'||config[_0x4b4f9f(0x1d7)]=='USDT'||config[_0x4b4f9f(0x1d7)]==_0x4b4f9f(0x13e))_0xa6b55a+=_0x1d00cc[_0x4b4f9f(0x212)]*_0x1d00cc[_0x4b4f9f(0x1bf)]*_0x9a3950[_0x4b4f9f(0x1ec)]/_0x9a3950['usd'],_0x576864+=_0x1d00cc[_0x4b4f9f(0x212)]*_0x1d00cc[_0x4b4f9f(0x1bf)];else config[_0x4b4f9f(0x1d7)]==_0x4b4f9f(0x187)&&(_0xa6b55a+=_0x1d00cc['startprice']*_0x1d00cc[_0x4b4f9f(0x1bf)],_0x576864+=_0x1d00cc['startprice']*_0x1d00cc[_0x4b4f9f(0x1bf)]*_0x9a3950[_0x4b4f9f(0x1d8)]/_0x9a3950[_0x4b4f9f(0x1ec)]);}_0x54e582++;}});let _0x2d2671={'basecoin':_0x261b9e,'eur':_0xa6b55a,'usd':_0x576864,'coins':_0x32fe24};if(_0x2957f1)proxyEmit(_0x2d9122(0x161),_0x2d2671);return _0x2d2671;}function headlessMode(_0x4deca4){const _0x4f23d5=_0x463318;let _0x31886b=_0x4deca4['portfolio'],_0x2bfc47=_0x4deca4[_0x4f23d5(0x1b2)],_0x4b326d=[];for(let _0x2d9adc of _0x31886b){if(_0x2d9adc[_0x4f23d5(0x1ce)]!=config['basecoin']){if(_0x2d9adc[_0x4f23d5(0x185)]/_0x2d9adc[_0x4f23d5(0x1f7)]-0x1>=_0x2bfc47/0x64){if(_0x2d9adc['valid'])_0x4b326d[_0x4f23d5(0x18e)](_0x2d9adc);}else{if(_0x2d9adc[_0x4f23d5(0x185)]/_0x2d9adc[_0x4f23d5(0x1f7)]-0x1<=-_0x2bfc47/0x64){if(_0x2d9adc[_0x4f23d5(0x14d)])_0x4b326d[_0x4f23d5(0x18e)](_0x2d9adc);}}}}_0x4b326d[_0x4f23d5(0x211)]>0x0&&placeOrder(_0x4b326d);}function symbolToCoin(_0x1eb997){const _0x45f181=_0x463318;let _0x1f8fd4;if(_0x1eb997[_0x45f181(0x1be)]('/'+config[_0x45f181(0x1d7)]))_0x1f8fd4=_0x1eb997['replace']('/'+config[_0x45f181(0x1d7)],'');if(_0x1eb997[_0x45f181(0x1be)](config['basecoin']+'/'))_0x1f8fd4=_0x1eb997[_0x45f181(0x210)](config[_0x45f181(0x1d7)]+'/','');return _0x1f8fd4;}async function validateOrders(_0x57b575=0x0){const _0x47ea3f=_0x463318;let _0x5e6919=[],_0x154bfb=config[_0x47ea3f(0x1db)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0xc7d364=>{const _0x3bcebc=_0x47ea3f;let _0x272bcc=previousCoins[_0x3bcebc(0x149)](_0x23537e=>_0x23537e[_0x3bcebc(0x1ce)]==symbolToCoin(_0xc7d364[_0x3bcebc(0x21e)])),_0xc869b2=currentCoins[_0x3bcebc(0x149)](_0x4989a7=>_0x4989a7['coin']==symbolToCoin(_0xc7d364[_0x3bcebc(0x21e)])),_0x3adf36,_0x554383;_0xc7d364[_0x3bcebc(0x1ed)]=='buy'&&!_0xc7d364['reverse']||_0xc7d364['side']=='sell'&&_0xc7d364[_0x3bcebc(0x186)]?(_0x3adf36=_0x272bcc[_0x3bcebc(0x222)]+0.9*_0xc7d364['filled'],_0x554383=_0x272bcc[_0x3bcebc(0x222)]+1.1*_0xc7d364[_0x3bcebc(0x202)]):(_0x3adf36=_0x272bcc['number']-1.1*_0xc7d364[_0x3bcebc(0x202)],_0x554383=_0x272bcc[_0x3bcebc(0x222)]-0.9*_0xc7d364[_0x3bcebc(0x202)]);const _0x31fc9a=_0xc7d364['filled']!=0x0&&_0xc869b2[_0x3bcebc(0x222)]>=_0x3adf36&&_0xc869b2['number']<=_0x554383;_0x5e6919[_0x3bcebc(0x18e)](_0x31fc9a);if(_0x31fc9a&&config[_0x3bcebc(0x1db)]!=_0x3bcebc(0x169)){if(_0xc7d364[_0x3bcebc(0x186)])logHistory('order','Order\x20filled:\x20'+_0xc7d364[_0x3bcebc(0x21e)]+'\x20'+_0xc7d364['side']+'\x20#'+formatResult(_0xc7d364[_0x3bcebc(0x202)]/_0xc7d364['price'],0x8)+'\x20@'+formatResult(_0xc7d364[_0x3bcebc(0x179)],0x8));else logHistory(_0x3bcebc(0x23e),'Order\x20filled:\x20'+_0xc7d364[_0x3bcebc(0x21e)]+'\x20'+_0xc7d364['side']+'\x20#'+formatResult(_0xc7d364[_0x3bcebc(0x202)],0x8)+'\x20@'+formatResult(_0xc7d364['price'],0x8));}}),_0x5e6919[_0x47ea3f(0x18f)]((_0x5aaa2c,_0x2078d0)=>{const _0x48b042=_0x47ea3f;if(_0x5aaa2c)lastOrders[_0x48b042(0x1df)](_0x2078d0,0x1);});if(_0x57b575<_0x154bfb&&_0x5e6919[_0x47ea3f(0x1be)](![])){if(_0x57b575==0x0){config['ordertype']==_0x47ea3f(0x169)?logHistory('error',_0x47ea3f(0x208)):logHistory(_0x47ea3f(0x1e1),_0x47ea3f(0x1bd));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x57b575);},0xa*0x3e8);}else{(_0x57b575==0x1||_0x57b575==Math[_0x47ea3f(0x242)](_0x154bfb/0x2)||_0x57b575==_0x154bfb-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x57b575);},validateOrderInterval);}}else{lockOrders=![];if(_0x57b575>0x0&&!_0x5e6919['includes'](![]))config[_0x47ea3f(0x1db)]==_0x47ea3f(0x169)?logHistory('success',_0x47ea3f(0x155)):logHistory(_0x47ea3f(0x1e5),_0x47ea3f(0x1fd));else _0x57b575>0x0&&_0x5e6919['includes'](![])&&(config[_0x47ea3f(0x1db)]=='market'?logHistory(_0x47ea3f(0x1e5),_0x47ea3f(0x1ee)+Math['round'](_0x154bfb*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x47ea3f(0x18f)](async _0x10c081=>{const _0xa4fa72=_0x47ea3f;try{const _0x50d353=await exchange[_0xa4fa72(0x157)](_0x10c081[_0xa4fa72(0x1c3)],_0x10c081[_0xa4fa72(0x21e)]);}catch(_0x414caf){if(_0x414caf['toString']()[_0xa4fa72(0x1be)]('OrderNotFound')){}else await handleError(_0x414caf,_0xa4fa72(0x172));}}),logHistory('success',_0x47ea3f(0x17f)+Math[_0x47ea3f(0x242)](_0x154bfb*validateOrderInterval/0xea60)+_0x47ea3f(0x21a))));}}async function resetCoinResults(){const _0x32ccb7=_0x463318;dbCoinResults[_0x32ccb7(0x1e3)](_0x32ccb7(0x207))['remove']()[_0x32ccb7(0x1ae)]();let _0x4d880e=await getStartingBalances(![]);_0x4d880e[_0x32ccb7(0x207)]['forEach'](_0x347f25=>{const _0x280921=_0x32ccb7,_0x3d6079=_0x347f25[_0x280921(0x21e)][_0x280921(0x1be)](config[_0x280921(0x1d7)]+'/');if(_0x347f25[_0x280921(0x1ce)]!=config['basecoin']){let _0x58ce5e={'coin':_0x347f25[_0x280921(0x1ce)],'number':_0x347f25['number'],'breakeven':_0x347f25[_0x280921(0x179)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x280921(0x207))[_0x280921(0x18e)](_0x58ce5e)['write']();}});}async function updateCoinResults(_0x4fa506){const _0x2d5f6e=_0x463318;let _0x8179d7,_0x560ea7,_0x66159d,_0x2ab99f,_0x384149,_0x1228fc,_0x39884a=dbCoinResults[_0x2d5f6e(0x1e3)](_0x2d5f6e(0x207))['find']({'coin':_0x4fa506[_0x2d5f6e(0x1ce)]})[_0x2d5f6e(0x23c)]();if(!_0x39884a)return;if(_0x4fa506[_0x2d5f6e(0x19f)]&&_0x4fa506[_0x2d5f6e(0x19f)][_0x2d5f6e(0x1b8)]==config[_0x2d5f6e(0x1d7)])_0x8179d7=_0x4fa506[_0x2d5f6e(0x19f)][_0x2d5f6e(0x166)];else{if(_0x4fa506[_0x2d5f6e(0x19f)]&&_0x4fa506[_0x2d5f6e(0x19f)]['currency']=='BNB')_0x8179d7=_0x4fa506[_0x2d5f6e(0x19f)]['cost']*global[_0x2d5f6e(0x22d)][_0x2d5f6e(0x217)+config['basecoin']];else _0x8179d7=0.001*_0x4fa506[_0x2d5f6e(0x202)];}const _0x429387=_0x4fa506[_0x2d5f6e(0x21e)]['includes'](config[_0x2d5f6e(0x1d7)]+'/');_0x429387&&(_0x1228fc={'coin':_0x4fa506[_0x2d5f6e(0x1ce)],'symbol':_0x4fa506['symbol'],'filled':_0x4fa506[_0x2d5f6e(0x202)]*_0x4fa506[_0x2d5f6e(0x179)],'side':_0x4fa506[_0x2d5f6e(0x1ed)]==_0x2d5f6e(0x15d)?_0x2d5f6e(0x204):_0x2d5f6e(0x15d),'price':0x1/_0x4fa506['price']},_0x4fa506={..._0x1228fc});_0x4fa506['side']=='buy'?_0x66159d=(_0x39884a['breakeven']*_0x39884a[_0x2d5f6e(0x222)]+_0x4fa506[_0x2d5f6e(0x179)]*_0x4fa506['filled'])/(_0x39884a['number']+_0x4fa506[_0x2d5f6e(0x202)]):_0x66159d=(_0x39884a[_0x2d5f6e(0x147)]*_0x39884a['number']-_0x4fa506[_0x2d5f6e(0x179)]*_0x4fa506[_0x2d5f6e(0x202)])/(_0x39884a[_0x2d5f6e(0x222)]-_0x4fa506[_0x2d5f6e(0x202)]);_0x4fa506[_0x2d5f6e(0x1ed)]=='buy'?_0x2ab99f=_0x39884a[_0x2d5f6e(0x1e8)]:_0x2ab99f=_0x39884a[_0x2d5f6e(0x1e8)]+(_0x4fa506[_0x2d5f6e(0x179)]-_0x39884a[_0x2d5f6e(0x147)])*_0x4fa506['filled'];_0x560ea7=_0x4fa506[_0x2d5f6e(0x1ed)]=='sell'?_0x39884a['number']-_0x4fa506[_0x2d5f6e(0x202)]:_0x39884a[_0x2d5f6e(0x222)]+_0x4fa506['filled'],_0x384149=(_0x4fa506['price']-_0x66159d)*_0x560ea7;let _0x2ef46d={'coin':_0x4fa506[_0x2d5f6e(0x1ce)],'number':_0x560ea7,'breakeven':formatResult(_0x66159d,0x8),'realized':formatResult(_0x2ab99f,0x8),'unrealized':formatResult(_0x384149,0x8),'fees':formatResult(_0x39884a[_0x2d5f6e(0x1cd)]+_0x8179d7,0x8),'sells':_0x4fa506[_0x2d5f6e(0x1ed)]=='sell'?_0x39884a[_0x2d5f6e(0x1d5)]+0x1:_0x39884a[_0x2d5f6e(0x1d5)],'buys':_0x4fa506[_0x2d5f6e(0x1ed)]=='buy'?_0x39884a[_0x2d5f6e(0x21f)]+0x1:_0x39884a['buys']};dbCoinResults['get'](_0x2d5f6e(0x207))[_0x2d5f6e(0x149)]({'coin':_0x4fa506[_0x2d5f6e(0x1ce)]})[_0x2d5f6e(0x1f1)](_0x2ef46d)[_0x2d5f6e(0x1ae)]();}async function placeOrder(_0x5ca671){const _0x508ad6=_0x463318,_0x2c803c=config[_0x508ad6(0x1db)]==_0x508ad6(0x169)?_0x508ad6(0x169):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x508ad6(0x220)](currentCoins));for(const _0x1d3ee0 of _0x5ca671){let _0x17e988,_0x1e2f8e,_0x507660,_0x39bd87,_0x4400d1,_0x19d887=_0x1d3ee0['symbol'];try{const _0x5a160b=await exchange[_0x508ad6(0x1fa)](_0x19d887),_0x437665=_0x5a160b[_0x19d887];_0x17e988=_0x437665[_0x508ad6(0x168)],_0x1e2f8e=_0x437665[_0x508ad6(0x1d1)],_0x507660=_0x437665[_0x508ad6(0x234)];_0x1d3ee0[_0x508ad6(0x186)]?(_0x39bd87=_0x1d3ee0[_0x508ad6(0x1ed)]==_0x508ad6(0x204)?_0x508ad6(0x15d):'buy',_0x4400d1=Math['abs'](_0x1d3ee0[_0x508ad6(0x238)])/_0x17e988):(_0x39bd87=_0x1d3ee0['side'],_0x4400d1=Math[_0x508ad6(0x1ba)](_0x1d3ee0[_0x508ad6(0x238)]));_0x2c803c==_0x508ad6(0x17e)&&(config[_0x508ad6(0x1db)]==_0x508ad6(0x1fc)&&(_0x17e988=_0x39bd87==_0x508ad6(0x204)?_0x1e2f8e:_0x507660),config[_0x508ad6(0x1db)]==_0x508ad6(0x145)&&(_0x17e988=_0x39bd87=='buy'?_0x507660:_0x1e2f8e));_0x4400d1=formatResult(_0x4400d1,0x8),_0x17e988=formatResult(_0x17e988,0x8);const _0x6380de=await exchange[_0x508ad6(0x23a)](_0x19d887,_0x2c803c,_0x39bd87,_0x4400d1,_0x17e988);lastOrders[_0x508ad6(0x18e)]({'orderId':_0x6380de['id'],'symbol':_0x19d887,'side':_0x39bd87,'reverse':_0x1d3ee0['reverse'],'amount':_0x1d3ee0[_0x508ad6(0x186)]?_0x6380de[_0x508ad6(0x20f)]*_0x6380de[_0x508ad6(0x179)]:_0x6380de['amount'],'filled':_0x1d3ee0[_0x508ad6(0x186)]?_0x6380de[_0x508ad6(0x202)]*_0x6380de[_0x508ad6(0x179)]:_0x6380de['filled'],'price':_0x6380de[_0x508ad6(0x179)]});const _0x595039=_0x39bd87==_0x508ad6(0x15d)?config['emojisell']?String[_0x508ad6(0x224)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x508ad6(0x243)])+'\x20':'',_0x2d8cf0=_0x2c803c==_0x508ad6(0x169)?_0x508ad6(0x1b9):config[_0x508ad6(0x1db)]=='limit-high'?_0x508ad6(0x1e4):_0x508ad6(0x1f9);if(_0x2c803c=='market')logHistory(_0x508ad6(0x23e),''+_0x595039+_0x2d8cf0+_0x508ad6(0x194)+_0x19d887+'\x20'+_0x39bd87+'\x20#'+formatResult(_0x6380de[_0x508ad6(0x202)],0x8)+'\x20@'+formatResult(_0x6380de[_0x508ad6(0x179)],0x8));else logHistory(_0x508ad6(0x23e),''+_0x595039+_0x2d8cf0+_0x508ad6(0x194)+_0x19d887+'\x20'+_0x39bd87+'\x20#'+formatResult(_0x6380de[_0x508ad6(0x20f)],0x8)+'\x20@'+formatResult(_0x6380de[_0x508ad6(0x179)],0x8));_0x6380de[_0x508ad6(0x1ce)]=_0x1d3ee0['coin'],await updateCoinResults(_0x6380de);if(config[_0x508ad6(0x1b4)]!=0x0){let _0x2076ec=null;if(cooldownTracker[_0x508ad6(0x211)]==config[_0x508ad6(0x1b4)]-0x1)_0x2076ec=cooldownTracker[_0x508ad6(0x175)]();const _0x582056=getTimeStamp();cooldownTracker[_0x508ad6(0x18e)](_0x582056);if(_0x2076ec){const _0x4bbad9=fns['differenceInSeconds'](new Date(_0x582056),new Date(_0x2076ec));_0x4bbad9<cooldownInterval&&(logHistory('error',_0x508ad6(0x1aa)+config[_0x508ad6(0x1b4)]+_0x508ad6(0x1ac)+cooldownInterval/0x3c+_0x508ad6(0x191)+cooldownPeriod/(0xe10*0x3e8)+_0x508ad6(0x206)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x6d7597){if(_0x6d7597[_0x508ad6(0x1fb)]()[_0x508ad6(0x1be)](_0x508ad6(0x16d)))logHistory(_0x508ad6(0x1e1),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x19d887);else{if(_0x6d7597[_0x508ad6(0x1fb)]()['includes'](_0x508ad6(0x1bb)))logHistory(_0x508ad6(0x1e1),_0x508ad6(0x148)+_0x19d887);else await handleError(_0x6d7597,_0x508ad6(0x198));}}}if(lastOrders[_0x508ad6(0x211)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x508ad6(0x1e9)]&&(config['ordertype']==_0x508ad6(0x169)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x508ad6(0x1e9)]&&logHistory(_0x508ad6(0x1e1),_0x508ad6(0x20e)));}}function logHistory(_0x1ad468,_0x337fa9,_0x32c691=''){const _0x2a6f3a=_0x463318;let _0x1b7e80={'time':getTimeStamp(),'type':_0x1ad468,'event':_0x337fa9,'botname':config['botname'],'showname':config[_0x2a6f3a(0x230)]};dbLogs[_0x2a6f3a(0x1e3)](_0x2a6f3a(0x1de))[_0x2a6f3a(0x18e)](_0x1b7e80)[_0x2a6f3a(0x1ae)]();if(_0x32c691=='')_0x32c691=_0x337fa9;proxyEmit('event',{'log':_0x1b7e80,'summary':_0x32c691}),process[_0x2a6f3a(0x150)]({'telegram':_0x1b7e80}),logging(''+_0x1b7e80[_0x2a6f3a(0x15a)]);}function emitHistory(_0x24ea6a={}){const _0x418500=_0x463318;Object['keys'](_0x24ea6a)[_0x418500(0x211)]==0x0&&(_0x24ea6a={'type':[_0x418500(0x23e),'event'],'event':'','page':0x1});if(_0x24ea6a[_0x418500(0x199)][_0x418500(0x1be)](_0x418500(0x15a)))_0x24ea6a[_0x418500(0x199)][_0x418500(0x1df)](_0x24ea6a[_0x418500(0x199)][_0x418500(0x159)](_0x418500(0x15a)),0x1,_0x418500(0x1e1),_0x418500(0x1e5));if(dbLogs['has'](_0x418500(0x1de))[_0x418500(0x23c)]()){let _0x1fed3b=dbLogs['get'](_0x418500(0x1de))[_0x418500(0x1ad)](_0x233618=>{const _0x382d92=_0x418500;if(_0x24ea6a[_0x382d92(0x199)]['length']==0x0)return![];else return _0x24ea6a['type'][_0x382d92(0x1be)](_0x233618[_0x382d92(0x199)]);})[_0x418500(0x1ad)](_0x27427a=>{const _0x45aad2=_0x418500;if(_0x24ea6a['event']=='')return!![];else return _0x27427a['event'][_0x45aad2(0x244)]()[_0x45aad2(0x1be)](_0x24ea6a[_0x45aad2(0x15a)][_0x45aad2(0x244)]());})[_0x418500(0x232)]('time'),_0x539e08=_0x1fed3b[_0x418500(0x23c)]()[_0x418500(0x211)];_0x1fed3b=_0x1fed3b[_0x418500(0x186)]()[_0x418500(0x17d)]((_0x24ea6a[_0x418500(0x14f)]-0x1)*logPageSize,_0x24ea6a[_0x418500(0x14f)]*logPageSize-0x1)[_0x418500(0x186)]()[_0x418500(0x23c)](),proxyEmit(_0x418500(0x1d2),{'logs':_0x1fed3b,'total':_0x539e08});}else proxyEmit(_0x418500(0x1d2),{'logs':[],'total':0x0});}async function pauseBot(_0x28f6cb){const _0x5ee11c=_0x463318,_0x143407=new Date()[_0x5ee11c(0x182)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x143407-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x5ee11c(0x150)]({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x5ee11c(0x182)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error',_0x5ee11c(0x14b)+consecutivePauses+')'),await sleep(_0x28f6cb),botPaused=![],reset();}}async function handleError(_0x267719,_0x5247f5,_0x2f1236=''){const _0x2cb5b3=_0x463318;if(_0x267719['toString']()['includes'](_0x2cb5b3(0x1b1)))logHistory(_0x2cb5b3(0x1e1),_0x5247f5+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x267719[_0x2cb5b3(0x1fb)]()['includes'](_0x2cb5b3(0x167)))logHistory(_0x2cb5b3(0x1e1),_0x5247f5+_0x2cb5b3(0x229)),await pauseBot(pauseBotInterval);else{if(_0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)]('RequestTimeout'))logHistory('error',_0x5247f5+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)]('API-key\x20format\x20invalid'))logHistory(_0x2cb5b3(0x1e1),_0x5247f5+_0x2cb5b3(0x1cf)),logHistory(_0x2cb5b3(0x1e1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2cb5b3(0x150)]({'stop':'kill'});else{if(_0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)]('AuthenticationError'))logHistory(_0x2cb5b3(0x1e1),_0x5247f5+_0x2cb5b3(0x233)),logHistory(_0x2cb5b3(0x1e1),_0x2cb5b3(0x188)),process[_0x2cb5b3(0x150)]({'stop':'kill'});else{if(_0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x5247f5+_0x2cb5b3(0x195)),logHistory(_0x2cb5b3(0x1e1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2cb5b3(0x150)]({'stop':_0x2cb5b3(0x1d3)});else{if(_0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)](_0x2cb5b3(0x236)))logHistory('error',_0x5247f5+_0x2cb5b3(0x22c)),logHistory(_0x2cb5b3(0x1e1),_0x2cb5b3(0x188)),process[_0x2cb5b3(0x150)]({'stop':_0x2cb5b3(0x1d3)});else{if(_0x267719[_0x2cb5b3(0x1fb)]()['includes'](_0x2cb5b3(0x1d9)))logHistory(_0x2cb5b3(0x1e1),_0x5247f5+_0x2cb5b3(0x1f3)),await pauseBot(pauseBotInterval),process[_0x2cb5b3(0x150)]({'stop':'restart'});else _0x267719[_0x2cb5b3(0x1fb)]()[_0x2cb5b3(0x1be)](_0x2cb5b3(0x197))?logHistory(_0x2cb5b3(0x1e1),_0x5247f5+_0x2cb5b3(0x231)):(logHistory('error',_0x5247f5+_0x2cb5b3(0x180)),logging(_0x5247f5+'\x20|\x20Error\x20details:\x20',_0x267719),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x24aa88,_0x22b4b3){const _0x185dff=_0x463318;return parseFloat(_0x24aa88[_0x185dff(0x153)](_0x22b4b3));}function logging(_0x145e39,_0x311ad5=''){const _0x4ad5cb=_0x463318;if(config[_0x4ad5cb(0x230)])console['log'](getTimeStamp()+':\x20'+config[_0x4ad5cb(0x227)]+'\x20>\x20'+_0x145e39,_0x311ad5);else console[_0x4ad5cb(0x1c5)](getTimeStamp()+_0x4ad5cb(0x1b7)+botID+'\x20>\x20'+_0x145e39,_0x311ad5);}function getServerTime(){const _0x21fbab=_0x463318,_0x586352=new Date();return _0x586352[_0x21fbab(0x15e)]()+'/'+(_0x586352[_0x21fbab(0x226)]()+0x1)['toString']()[_0x21fbab(0x22e)](0x2,'0')+'/'+_0x586352[_0x21fbab(0x228)]()[_0x21fbab(0x1fb)]()[_0x21fbab(0x22e)](0x2,'0')+'\x20'+_0x586352[_0x21fbab(0x221)]()[_0x21fbab(0x1fb)]()['padStart'](0x2,'0')+':'+_0x586352['getMinutes']()[_0x21fbab(0x1fb)]()['padStart'](0x2,'0')+':'+_0x586352['getSeconds']()[_0x21fbab(0x1fb)]()[_0x21fbab(0x22e)](0x2,'0');}function getTimeStamp(){const _0x240c7f=_0x463318,_0x348258=shiftedTime();return _0x348258[_0x240c7f(0x15e)]()+'/'+(_0x348258['getMonth']()+0x1)[_0x240c7f(0x1fb)]()[_0x240c7f(0x22e)](0x2,'0')+'/'+_0x348258[_0x240c7f(0x228)]()[_0x240c7f(0x1fb)]()['padStart'](0x2,'0')+'\x20'+_0x348258[_0x240c7f(0x221)]()[_0x240c7f(0x1fb)]()['padStart'](0x2,'0')+':'+_0x348258[_0x240c7f(0x143)]()[_0x240c7f(0x1fb)]()['padStart'](0x2,'0')+':'+_0x348258[_0x240c7f(0x200)]()[_0x240c7f(0x1fb)]()[_0x240c7f(0x22e)](0x2,'0');}function getDate(){const _0xb70619=_0x463318,_0x2f151b=shiftedTime();return _0x2f151b[_0xb70619(0x15e)]()+'/'+(_0x2f151b[_0xb70619(0x226)]()+0x1)[_0xb70619(0x1fb)]()[_0xb70619(0x22e)](0x2,'0')+'/'+_0x2f151b[_0xb70619(0x228)]()[_0xb70619(0x1fb)]()['padStart'](0x2,'0');}function getHour(){const _0x5aef73=_0x463318,_0x587b53=shiftedTime();return _0x587b53[_0x5aef73(0x221)]()[_0x5aef73(0x1fb)]()[_0x5aef73(0x22e)](0x2,'0');}function sleep(_0x3ac382){return new Promise(_0x10c211=>setTimeout(_0x10c211,_0x3ac382));}function shiftedTime(){const _0x5827c5=_0x463318,_0x548e70=new Date();let _0x83fad=_0x548e70;if(config&&config[_0x5827c5(0x247)]!==0x0)_0x83fad=fns[_0x5827c5(0x237)](_0x548e70,{'hours':config['timeshift']});return _0x83fad;}