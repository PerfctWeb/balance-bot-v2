const _0x4639fe=_0x19d8;(function(_0x12de7b,_0x31354d){const _0xf840ec=_0x19d8,_0x269b8a=_0x12de7b();while(!![]){try{const _0x257a46=-parseInt(_0xf840ec(0x1dc))/0x1*(parseInt(_0xf840ec(0x261))/0x2)+-parseInt(_0xf840ec(0x197))/0x3+parseInt(_0xf840ec(0x21f))/0x4*(-parseInt(_0xf840ec(0x1f1))/0x5)+parseInt(_0xf840ec(0x1bf))/0x6*(-parseInt(_0xf840ec(0x1eb))/0x7)+parseInt(_0xf840ec(0x1c4))/0x8+parseInt(_0xf840ec(0x1b9))/0x9+-parseInt(_0xf840ec(0x1ab))/0xa*(-parseInt(_0xf840ec(0x223))/0xb);if(_0x257a46===_0x31354d)break;else _0x269b8a['push'](_0x269b8a['shift']());}catch(_0x1946c6){_0x269b8a['push'](_0x269b8a['shift']());}}}(_0x3a84,0x826b6));const _0x593dca=function(){let _0x781ecc=!![];return function(_0x5e56a4,_0x65cbce){const _0x3a6c30=_0x781ecc?function(){if(_0x65cbce){const _0x276786=_0x65cbce['apply'](_0x5e56a4,arguments);return _0x65cbce=null,_0x276786;}}:function(){};return _0x781ecc=![],_0x3a6c30;};}(),_0x30b2b0=_0x593dca(this,function(){const _0x3e06e4=_0x19d8;return _0x30b2b0['toString']()['search'](_0x3e06e4(0x257))[_0x3e06e4(0x18e)]()[_0x3e06e4(0x1da)](_0x30b2b0)[_0x3e06e4(0x258)](_0x3e06e4(0x257));});_0x30b2b0();'use strict';const ccxt=require(_0x4639fe(0x249)),low=require(_0x4639fe(0x1ed)),FileSync=require(_0x4639fe(0x216)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x4639fe(0x201)),Crypt=require(_0x4639fe(0x1cd))[_0x4639fe(0x1f8)];function _0x19d8(_0x14a427,_0x3c4177){const _0x37f708=_0x3a84();return _0x19d8=function(_0x30b2b0,_0x593dca){_0x30b2b0=_0x30b2b0-0x15a;let _0x3a8449=_0x37f708[_0x30b2b0];return _0x3a8449;},_0x19d8(_0x14a427,_0x3c4177);}let exchange,wsClient;global[_0x4639fe(0x26f)]={},global[_0x4639fe(0x203)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x4639fe(0x275),'HOT/BTC',_0x4639fe(0x185),_0x4639fe(0x1d8),'NANO/',_0x4639fe(0x225)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4639fe(0x1b7))[_0x4639fe(0x243)],botID=process[_0x4639fe(0x200)][0x2]||_0x4639fe(0x24a),pattern=/^[0-9]{3}$/;!pattern[_0x4639fe(0x284)](botID)&&(console[_0x4639fe(0x18c)](_0x4639fe(0x23c)+botID+_0x4639fe(0x21b)),process['exit'](0x1));const userID=process[_0x4639fe(0x200)][0x3]||'',configpath=userID?_0x4639fe(0x16a)+userID+'/':'./config/';!fs[_0x4639fe(0x234)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x4639fe(0x1d4)+botID+_0x4639fe(0x276),logfile=configpath+_0x4639fe(0x1d4)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x4639fe(0x1d4)+botID+_0x4639fe(0x202),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4639fe(0x167),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4639fe(0x22d)]({'logs':[]})[_0x4639fe(0x182)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4639fe(0x22d)]({'data':[]})[_0x4639fe(0x182)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4639fe(0x22d)]({'bot':[]})[_0x4639fe(0x182)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4639fe(0x22d)]({'coins':[]})[_0x4639fe(0x182)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x3a84(){const _0x4cc495=['Limit\x20(low-margin)','getPortfolio','get','stringify','balancing\x20resumes\x20when\x20cooldown\x20ends','remainingSymbols','/USDT','logs','success','price','fetchBalance','getDate','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','wsMarket','apiSecret','emojibuy','sha256','write','filled','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','HOT/EUR','valid','placeOrder()','storeConfiguration','enabled','buy','final','log','Binance\x20API\x20secret\x20is\x20invalid','toString','privateKey','bid','ExchangeNotAvailable','add','limit-high','sort','botname','MIN_NOTIONAL','272205ftWUVw','progress','filter','function','\x20|\x20Error\x20details:\x20','performance','toLowerCase','change24h','ongoing','ETH','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','-------------------------------\x0a','target','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','wss://stream.binance.com:9443','last','storeHeadless','************','threshold','getCoins()','1180pElhjS','wsKey','portfolio','set','getTime','time','BUSD','initial','\x20-\x20bot\x20not\x20started','2.5.0','BNB','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','./version.json','sell','5462766wPAuhh','balances','fetchClosedOrders','formattedMessage','remove','EUR','828poUGjV','running','outboundAccountPosition','recreate','</pre>','5608496zrmXxo','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','date','Executed\x20','isEqual','amount','changes','coins','Cooldown\x20ended\x20-\x20balancing\x20resumed','hybrid-crypto-js','concat','secure','emitHistory','Order\x20filled:\x20','BNB/','Unfilled\x20order(s)\x20canceled\x20after\x20','bot-','cost','close','indexOf','XEM/BUSD','data','constructor','startprice','3xspTzB','kill','botID','subscribeSpotKline','decrypt','limit-low','subscribeSpotUserDataStream','configuration-stored','order','round','page','AuthenticationError','entries','accumulatedQuantity','side','4438QknXtb','Binance\x20API\x20blocked','lowdb','ordertype','InvalidNonce','value','34075rAaJly','Binance\x20API\x20key\x20is\x20invalid','symbols','type','\x20minutes','apiKey','cumulativeQuoteAssetTransactedQty','Crypt','cancelOrder','Market','realized','push','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','initclient','fetchOpenOrders','argv','binance','-results.json','change','Binance\x20not\x20available\x20(1)','excluded','splice','distribution','find','usd','trade','\x20|\x20','\x20-\x20','RSA-OAEP','WebSockets(','symbol','\x20|\x20Binance\x20API\x20secret\x20invalid','\x20>\x20','length','\x20minutes\x20-\x20','userData','limit','lowdb/adapters/FileSync','parseISO','exec','\x20hour','eventType',',\x20must\x20be\x20a\x203\x20digit\x20number','eur','Order(s)\x20filled\x20-\x20','yyyy/MM/dd','408TPvrMd','Limit\x20(high-margin)','getPortfolio()','getMonth','75669HNqJZy','kline','YOYOW/','cancelOrders()','forEach','yyyy-MM-dd\x27T\x27HH:mm:ss','headless','\x20order:\x20','starting-balances','subscribeSymbol24hrTicker','defaults','getFullYear','bot','2.3.5','total','breakeven','timestamp','existsSync','API\x20or\x20clock\x20sync\x20issue','sortBy','getSeconds','balancing\x20resumed','no\x20open\x20orders','BTC','No\x20more\x20open\x20orders\x20-\x20','Error:\x20Invalid\x20argument\x20','shift','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','currency','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','includes','keys','version','Bot\x20','timeshift','assign','getStartingBalances','exchange','ccxt','001','replace','fromCodePoint','.json','delta','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','padEnd','min','commissionAsset','max','emojisell','cancelLoading','has','(((.+)+)+)+$','search','market','abs','executionReport','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','Manual\x20balancing\x20required:\x20','send','InsufficientFunds','loadSymbols()','474802uleXaH','Order(s)\x20validated\x20-\x20','settings','Binance\x20not\x20responding','eventTime','getFiat()','showname','orderStatus','sells','\x20portfolio:\x20\x0a\x0a','cooldown','reverse','limits','buys','ticker','starting-balance-','slice','restart','args','binanceus','DAI/','-config.json','error','message','precision','configuration','number','padStart','getHours','event-history','liquidity','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','\x20has\x20a\x2024h\x20drop\x20of\x20','parse','FILLED','test','\x20|\x20Binance\x20API\x20key\x20invalid','fee','startdate','split','event','USDT','API-key\x20format\x20invalid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','offset','timeout','toFixed','basecoin','Order(s)\x20not\x20validated\x20after\x20','bb-secure.json','initws()','orderId','./config/','fees','reconnected','createOrder','isArray','datetime','coin'];_0x3a84=function(){return _0x4cc495;};return _0x3a84();}let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x39e078)=>{},'debug':(..._0x51aea7)=>{},'notice':(..._0x2fcc31)=>{},'info':(..._0x2078ac)=>{},'warning':(..._0x3ad39b)=>{},'error':async function(..._0x2a0120){const _0x190a6b=_0x4639fe,_0x33a055=new Date()[_0x190a6b(0x1af)]();if(!lastErrorShown||_0x33a055-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x190a6b(0x1af)]();let _0x5c80d5='';if(_0x2a0120[0x0])_0x5c80d5+=_0x2a0120[0x0];if(_0x2a0120[0x1]&&_0x2a0120[0x1]['error']&&_0x2a0120[0x1][_0x190a6b(0x277)][_0x190a6b(0x278)])_0x5c80d5+=_0x190a6b(0x20c)+_0x2a0120[0x1][_0x190a6b(0x277)]['message'];logging(_0x190a6b(0x20e)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x5c80d5),await pauseBot(_0x190a6b(0x204));}}},crypt=new Crypt({'md':_0x4639fe(0x181),'rsaStandard':_0x4639fe(0x20d)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings['timeshift']!=config[_0x4639fe(0x245)]&&updateTimeshift(settings[_0x4639fe(0x245)]);process[_0x4639fe(0x25e)]({'started':'running'},_0x149927=>{}),initializeProcessListeners();function proxyEmit(_0x49c4ff,_0x1375b8=null){process['send']({'function':_0x49c4ff,'args':_0x1375b8},_0x1369fc=>{});}function initializeProcessListeners(){process['on']('message',_0x20bbe2=>{const _0x5659ea=_0x19d8;switch(Object['keys'](_0x20bbe2)[0x0]){case _0x5659ea(0x245):_0x20bbe2['timeshift']!=undefined&&(settings['timeshift']=_0x20bbe2['timeshift'],updateTimeshift(settings[_0x5659ea(0x245)]));break;case _0x5659ea(0x19a):switch(_0x20bbe2[_0x5659ea(0x19a)]){case _0x5659ea(0x1fe):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x5659ea(0x1d0):emitHistory(_0x20bbe2['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x20bbe2[_0x5659ea(0x273)]);break;case _0x5659ea(0x172):getPortfolio(_0x20bbe2['args']);break;case _0x5659ea(0x188):storeConfiguration(_0x20bbe2[_0x5659ea(0x273)]);break;case _0x5659ea(0x1a7):storeHeadless(_0x20bbe2[_0x5659ea(0x273)]);break;case _0x5659ea(0x247):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x20bbe2[_0x5659ea(0x273)]);break;case _0x5659ea(0x255):cancelLoading();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x55ad91=_0x4639fe;if(pidBalances)clearTimeout(pidBalances);if(config[_0x55ad91(0x1f6)]!=''){await initExchange(config[_0x55ad91(0x1f6)],config['apiSecret']);let _0x211c42=await loadSymbols();if(_0x211c42){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders['length']!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x5d1c20,_0xbe03b4){const _0x40c73e=_0x4639fe,_0xdb6d8f=ccxt[config[_0x40c73e(0x248)]];let _0x2e9389;switch(config[_0x40c73e(0x248)]){case'binance':_0x2e9389='wss://stream.binance.com:9443';break;case _0x40c73e(0x274):_0x2e9389='wss://stream.binance.us:9443';break;default:_0x2e9389=_0x40c73e(0x1a5);}exchange=new _0xdb6d8f({'apiKey':_0x5d1c20,'secret':_0xbe03b4,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x5d1c20,'api_secret':_0xbe03b4,'beautify':!![],'wsUrl':_0x2e9389},logger);!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0x40c73e(0x1bc),_0x4f5181=>{const _0x355e5e=_0x40c73e;if(isWsFormattedKline(_0x4f5181)){global[_0x355e5e(0x26f)][_0x4f5181[_0x355e5e(0x224)][_0x355e5e(0x20f)]]=_0x4f5181[_0x355e5e(0x224)][_0x355e5e(0x1d6)];return;}else{if(isWsFormatted24hrTicker(_0x4f5181)){global[_0x355e5e(0x203)][_0x4f5181[_0x355e5e(0x20f)]]=_0x4f5181['priceChangePercent'];return;}else{if(!Array[_0x355e5e(0x16e)](_0x4f5181)&&_0x4f5181[_0x355e5e(0x1ac)][_0x355e5e(0x241)](_0x355e5e(0x214))){if(_0x4f5181[_0x355e5e(0x17e)][_0x355e5e(0x241)]('spot')){updateNumberCoins(_0x4f5181);return;}}}}}),wsClient['on'](_0x40c73e(0x16c),async _0x109d16=>{if(!botPaused)currentCoins=await getCoins(!![]);}));let _0x360397=config[_0x40c73e(0x248)]==_0x40c73e(0x274)?'USDT':_0x40c73e(0x1be),_0x2b2a8f=config[_0x40c73e(0x165)]==_0x40c73e(0x1a0)?_0x40c73e(0x1a0):'BTC';stablecoins={'eur':{'coin':''+_0x2b2a8f+_0x360397,'symbol':_0x2b2a8f+'/'+_0x360397},'usd':{'coin':_0x2b2a8f+_0x40c73e(0x15f),'symbol':_0x2b2a8f+_0x40c73e(0x177)}};}async function loadSymbols(){const _0x63be71=_0x4639fe;let _0x545dbb;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x63be71(0x1f3)][_0x63be71(0x199)](_0x273639=>{const _0x5f488c=_0x63be71;let _0x2e6ef2=![];return exceptions[_0x5f488c(0x227)](_0x4482f0=>{const _0xf1d76f=_0x5f488c;if(_0x273639[_0xf1d76f(0x241)](_0x4482f0))_0x2e6ef2=!![];}),!_0x2e6ef2;}),_0x545dbb=!![];}catch(_0x4fb3f6){await handleError(_0x4fb3f6,_0x63be71(0x260)),_0x545dbb=![];}return _0x545dbb;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x276f9c=_0x4639fe;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x276f9c(0x1ba),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3b0e08=getNormalizedPerformance();emitPerformance(_0x3b0e08),await getStartingBalances(_0x3b0e08);}async function toggleBotMode(){const _0x16acaf=_0x4639fe;let _0x24c88d=dbConfig[_0x16acaf(0x173)](_0x16acaf(0x22f))[_0x16acaf(0x208)]({'botID':botID})[_0x16acaf(0x1f0)]();if(_0x24c88d){const _0x3a8ea3=!_0x24c88d[_0x16acaf(0x229)];dbConfig[_0x16acaf(0x173)](_0x16acaf(0x22f))[_0x16acaf(0x208)]({'botID':botID})[_0x16acaf(0x246)]({'headless':_0x3a8ea3})[_0x16acaf(0x182)](),config[_0x16acaf(0x229)]=_0x3a8ea3,proxyEmit(_0x16acaf(0x27a),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4e8f62=_0x4639fe;process[_0x4e8f62(0x25e)]({'updatebotmanager':!![]},_0x5d4376=>{});}function cleanws(){const _0x39ef45=_0x4639fe;wsinitialized=![];ws1&&(ws1[_0x39ef45(0x227)](_0x26d5c8=>{const _0x52a8b7=_0x39ef45;try{wsClient[_0x52a8b7(0x1d6)](_0x26d5c8);}catch(_0x40a57c){}}),ws1=[]);if(ws2){try{wsClient['close'](ws2);}catch(_0x28d03a){}ws2=null;}ws3&&(ws3['forEach'](_0x29da77=>{const _0x432c71=_0x39ef45;try{wsClient[_0x432c71(0x1d6)](_0x29da77);}catch(_0x417969){}}),ws3=[]);}async function initws(){const _0x5c0fb9=_0x4639fe;cleanws();let _0x5ddd9a=[];currentCoins[_0x5c0fb9(0x227)](_0x258529=>{const _0x42276d=_0x5c0fb9;if(_0x258529[_0x42276d(0x170)]!=config['basecoin'])_0x5ddd9a['push'](_0x258529[_0x42276d(0x20f)]);});if(!_0x5ddd9a['includes'](stablecoins[_0x5c0fb9(0x21c)]['symbol']))_0x5ddd9a[_0x5c0fb9(0x1fc)](stablecoins[_0x5c0fb9(0x21c)][_0x5c0fb9(0x20f)]);if(!_0x5ddd9a['includes'](stablecoins[_0x5c0fb9(0x209)][_0x5c0fb9(0x20f)]))_0x5ddd9a[_0x5c0fb9(0x1fc)](stablecoins[_0x5c0fb9(0x209)][_0x5c0fb9(0x20f)]);if(!_0x5ddd9a[_0x5c0fb9(0x241)](_0x5c0fb9(0x1d2)+config['basecoin']))_0x5ddd9a[_0x5c0fb9(0x1fc)](_0x5c0fb9(0x1d2)+config[_0x5c0fb9(0x165)]);try{_0x5ddd9a['forEach']((_0x4142ae,_0x15fbac)=>{const _0xa9f8c=_0x5c0fb9;ws1[_0x15fbac]=wsClient[_0xa9f8c(0x1df)](noslash(_0x4142ae),'1m'),ws3[_0x15fbac]=wsClient[_0xa9f8c(0x22c)](noslash(_0x4142ae),'spot');}),ws2=wsClient[_0x5c0fb9(0x1e2)]();}catch(_0x58fa96){await handleError(_0x58fa96,_0x5c0fb9(0x168));}let _0x490560,_0x595521=0x0;loading[_0x5c0fb9(0x176)]=[];let _0x159f8e=0x0;_0x5ddd9a[_0x5c0fb9(0x227)](_0x489ee2=>{const _0x457cc8=_0x5c0fb9;loading[_0x457cc8(0x176)]['push'](_0x489ee2);}),loadingCanceled=![];let _0xc4d0a4=![];while(_0x490560!=_0x5ddd9a[_0x5c0fb9(0x212)]){_0x490560=0x0,_0x5ddd9a[_0x5c0fb9(0x227)](_0x5a8e95=>{const _0x2ecbb4=_0x5c0fb9;global[_0x2ecbb4(0x26f)][noslash(_0x5a8e95)]&&(loading[_0x2ecbb4(0x176)]=loading[_0x2ecbb4(0x176)][_0x2ecbb4(0x199)](_0x34c192=>_0x34c192!=_0x5a8e95),_0x490560++);}),loading[_0x5c0fb9(0x198)]=Math['round'](_0x490560/_0x5ddd9a['length']*0x64);loading[_0x5c0fb9(0x198)]!=0x64&&(_0x159f8e>0x1e*0x5&&(loading[_0x5c0fb9(0x163)]=!![],emitLoadingProgress()),_0x159f8e>0x3c*0x5&&!_0xc4d0a4&&(_0xc4d0a4=!![],logHistory(_0x5c0fb9(0x277),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x5c0fb9(0x176)]+_0x5c0fb9(0x1b3))));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x490560!=_0x595521&&(_0x595521=_0x490560,emitLoadingProgress()),_0x159f8e++,await sleep(0xc8);}_0xc4d0a4&&logHistory('success',_0x5c0fb9(0x17d));if(_0x490560==_0x5ddd9a[_0x5c0fb9(0x212)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1d93f2=_0x4639fe;let _0x45170e=0x0,_0x165781=0x0;try{_0x45170e=global[_0x1d93f2(0x26f)][stablecoins['eur']['coin']],_0x165781=global['ticker'][stablecoins[_0x1d93f2(0x209)][_0x1d93f2(0x170)]];}catch(_0x554297){await handleError(_0x554297,_0x1d93f2(0x266));}return{'eur':Number(_0x45170e),'usd':Number(_0x165781)};}function setStartDatePerformance(){const _0x59b19c=_0x4639fe;if(config&&config[_0x59b19c(0x27f)][0x0][_0x59b19c(0x1ca)]['length']!=0x0){const _0x36ecbb=config[_0x59b19c(0x27f)][0x0][_0x59b19c(0x1ca)];dbPerformance[_0x59b19c(0x173)](_0x59b19c(0x1d9))[_0x59b19c(0x208)]({'date':config[_0x59b19c(0x15c)]})[_0x59b19c(0x246)]({'coins':_0x36ecbb})[_0x59b19c(0x182)]();}}async function recreateCoinResults(){const _0x2c0b3f=_0x4639fe;let _0x4a70d1,_0x7ebaf0=[];try{const _0x1cc9de=fns['format'](fns[_0x2c0b3f(0x217)](config[_0x2c0b3f(0x15c)][_0x2c0b3f(0x24b)](/\//g,'-')),_0x2c0b3f(0x228));for(const _0xa9a523 of currentCoins){if(_0xa9a523[_0x2c0b3f(0x170)]!=config[_0x2c0b3f(0x165)]){let _0x2a4565=0x0,_0x34ddf4,_0x3028a0;_0x4a70d1=await getAllEventOrders(_0xa9a523[_0x2c0b3f(0x20f)]);if(_0x4a70d1[_0x2c0b3f(0x212)]>0x0)_0x4a70d1[_0x2c0b3f(0x227)](_0x30c7e9=>{const _0x24f5f6=_0x2c0b3f,_0x65468=_0xa9a523['symbol'][_0x24f5f6(0x241)](config[_0x24f5f6(0x165)]+'/');_0x7ebaf0[_0x24f5f6(0x1fc)]({'datetime':_0x30c7e9[_0x24f5f6(0x16f)],'coin':_0xa9a523[_0x24f5f6(0x170)],'symbol':_0xa9a523[_0x24f5f6(0x20f)],'side':_0x30c7e9[_0x24f5f6(0x1ea)],'reverse':_0x65468,'amount':formatResult(_0x30c7e9[_0x24f5f6(0x183)],0x8),'filled':formatResult(_0x30c7e9[_0x24f5f6(0x183)],0x8),'price':formatResult(_0x30c7e9['price'],0x8)}),_0x2a4565=_0x30c7e9[_0x24f5f6(0x1ea)]==_0x24f5f6(0x18a)?_0x2a4565+_0x30c7e9[_0x24f5f6(0x183)]:_0x2a4565-_0x30c7e9['filled'];if(!_0x3028a0)_0x3028a0=_0x30c7e9['price'];});_0x34ddf4=_0xa9a523[_0x2c0b3f(0x27b)]-_0x2a4565;let _0x3acea5;config[_0x2c0b3f(0x27f)][_0x2c0b3f(0x227)](_0x8b0715=>{const _0x482b3e=_0x2c0b3f;!_0x3acea5&&(_0x3acea5=_0x8b0715[_0x482b3e(0x1ca)]['find'](_0x1fb810=>_0x1fb810[_0x482b3e(0x170)]==_0xa9a523[_0x482b3e(0x170)]),_0x3acea5&&(_0x34ddf4=_0x3acea5[_0x482b3e(0x27b)],_0x3028a0=_0x3acea5[_0x482b3e(0x17a)]));});let _0x1667ed=dbCoinResults['get'](_0x2c0b3f(0x1cb))['find']({'coin':_0xa9a523[_0x2c0b3f(0x170)]})[_0x2c0b3f(0x1f0)]();_0x1667ed={'coin':_0xa9a523['coin'],'number':_0x34ddf4,'breakeven':_0x3028a0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2c0b3f(0x173)](_0x2c0b3f(0x1cb))[_0x2c0b3f(0x208)]({'coin':_0xa9a523[_0x2c0b3f(0x170)]})['assign'](_0x1667ed)[_0x2c0b3f(0x182)]();}}_0x7ebaf0[_0x2c0b3f(0x194)]((_0x37dc2f,_0x80e1cc)=>_0x37dc2f[_0x2c0b3f(0x16f)]>_0x80e1cc[_0x2c0b3f(0x16f)]?0x1:_0x80e1cc[_0x2c0b3f(0x16f)]>_0x37dc2f[_0x2c0b3f(0x16f)]?-0x1:0x0);let _0x562ed8=0x0;for(let _0x46e4b4 of _0x7ebaf0){await updateCoinResults(_0x46e4b4,!![]);}}catch(_0x4a0100){await handleError(_0x4a0100,'recreateCoinResults()');}}async function getAllEventOrders(_0x3b2b70){const _0x19d771=_0x4639fe;let _0x1c5ccc=[],_0xc0107c=dbLogs[_0x19d771(0x173)](_0x19d771(0x178))[_0x19d771(0x199)](_0x5b1099=>{const _0xa4df5a=_0x19d771,_0x44ec3=_0x5b1099['event'][_0xa4df5a(0x19d)]();return _0x44ec3[_0xa4df5a(0x241)](_0x3b2b70[_0xa4df5a(0x19d)]())&&(_0x44ec3['includes']('market')&&_0x44ec3[_0xa4df5a(0x241)](_0xa4df5a(0x1e4))||_0x44ec3[_0xa4df5a(0x241)]('filled')&&_0x44ec3[_0xa4df5a(0x241)]('order'));})['sortBy']('time')[_0x19d771(0x1f0)]();return _0xc0107c[_0x19d771(0x227)](_0x9c648=>{const _0x30649f=_0x19d771,_0x253042=_0x9c648[_0x30649f(0x15e)][_0x30649f(0x241)](_0x30649f(0x1b8))?'sell':_0x30649f(0x18a),_0x446485=/#([0-9]|\.)+\s/i,_0x426dd9=Number(_0x446485[_0x30649f(0x218)](_0x9c648['event'])[0x0][_0x30649f(0x271)](0x1)),_0x1da419=/@([0-9]|\.)+$/i,_0x1a2a38=Number(_0x1da419['exec'](_0x9c648['event'])[0x0]['slice'](0x1));_0x1c5ccc[_0x30649f(0x1fc)]({'datetime':_0x9c648['time'],'coin':symbolToCoin(_0x3b2b70),'symbol':_0x3b2b70,'side':_0x253042,'amount':_0x426dd9,'filled':_0x426dd9,'price':_0x1a2a38});}),_0x1c5ccc;}async function getAllOrders(_0x241a86,_0x386740){const _0x3802a1=_0x4639fe;let _0x5430bc=[];while(_0x386740<exchange['milliseconds']()){const _0x5781e6=0x1f4,_0x3f39c2=await exchange[_0x3802a1(0x1bb)](_0x241a86,_0x386740,_0x5781e6);if(_0x3f39c2['length'])_0x386740=_0x3f39c2[_0x3f39c2[_0x3802a1(0x212)]-0x1]['timestamp']+0x1,_0x5430bc=_0x5430bc[_0x3802a1(0x1ce)](_0x3f39c2);else break;}return _0x5430bc;}async function validate24hChanges(){const _0x510261=_0x4639fe;let _0x35ed18;for(const _0x586327 of currentCoins){if(_0x586327[_0x510261(0x170)]!=config['basecoin']){let _0x5e9938;_0x586327[_0x510261(0x26c)]?_0x5e9938=formatResult((0x1/(global['change'][noslash(_0x586327[_0x510261(0x20f)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5e9938=global[_0x510261(0x203)][noslash(_0x586327[_0x510261(0x20f)])],_0x5e9938<config[_0x510261(0x19e)]&&(logHistory(_0x510261(0x277),_0x586327[_0x510261(0x170)]+_0x510261(0x281)+_0x5e9938+'%'),logHistory(_0x510261(0x277),_0x510261(0x184)),logHistory('error',_0x510261(0x1fd)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x498ed4=_0x4639fe;let _0x567bd2=dbLogs[_0x498ed4(0x173)]('version')[_0x498ed4(0x1f0)]();if(_0x567bd2!=_0x498ed4(0x230)){dbLogs[_0x498ed4(0x1ae)](_0x498ed4(0x243),_0x498ed4(0x230))[_0x498ed4(0x182)]();let _0x54616c=[];const _0x36170=dbLogs['get'](_0x498ed4(0x178))['value']();_0x36170[_0x498ed4(0x227)](_0x4bc4d6=>{const _0x2a1dba=_0x498ed4;_0x54616c['push']({'time':_0x4bc4d6[_0x2a1dba(0x1b0)],'type':_0x4bc4d6[_0x2a1dba(0x1f4)],'event':_0x4bc4d6[_0x2a1dba(0x15e)]});}),dbLogs[_0x498ed4(0x173)](_0x498ed4(0x178))[_0x498ed4(0x246)](_0x54616c)['write']();}let _0x3fbeb8=dbConfig[_0x498ed4(0x173)](_0x498ed4(0x243))['value']();if(_0x3fbeb8!=_0x498ed4(0x230)){dbConfig[_0x498ed4(0x1ae)](_0x498ed4(0x243),_0x498ed4(0x230))[_0x498ed4(0x182)]();let _0x4dd039=dbConfig[_0x498ed4(0x173)](_0x498ed4(0x22f))[_0x498ed4(0x208)]({'botID':botID})['value']();if(_0x4dd039){let _0x57dead=[];_0x4dd039[_0x498ed4(0x1ad)]['forEach'](_0x1ea868=>{const _0x4652fc=_0x498ed4;_0x57dead[_0x4652fc(0x1fc)]({'coin':_0x1ea868[_0x4652fc(0x170)],'number':_0x1ea868['startnumber'],'price':_0x1ea868[_0x4652fc(0x1db)]}),delete _0x1ea868['startnumber'],delete _0x1ea868['startprice'];});if(_0x57dead[_0x498ed4(0x212)]!==0x0)fs['writeFile'](configbackuppath+(_0x498ed4(0x270)+botID+_0x498ed4(0x24d)),JSON['stringify'](_0x57dead,null,0x4),function(_0x23e417){if(_0x23e417){}});const _0x52554a=(_0x5725b2,_0x3cb87b)=>{const _0x2a9251=_0x498ed4;let _0x1e7cbc=[];_0x3cb87b[_0x2a9251(0x227)](_0x39288b=>{const _0x2247ca=_0x2a9251,_0xb1d21d=_0x5725b2[_0x2247ca(0x208)](_0x352df7=>_0x352df7[_0x2247ca(0x170)]==_0x39288b[_0x2247ca(0x170)]);if(!_0xb1d21d)_0x1e7cbc[_0x2247ca(0x1fc)](_0x39288b);});let _0x10cd6a=[];return _0x5725b2[_0x2a9251(0x227)](_0x5126dc=>{const _0x504bfc=_0x2a9251,_0x507ca6=_0x3cb87b[_0x504bfc(0x208)](_0x23abd6=>_0x23abd6[_0x504bfc(0x170)]==_0x5126dc[_0x504bfc(0x170)]);if(!_0x507ca6||_0x507ca6[_0x504bfc(0x27b)]==0x0&&_0x5126dc['number']!=0x0)_0x10cd6a[_0x504bfc(0x1fc)](_0x5126dc);}),{'missingDay1':_0x1e7cbc,'notInDay2':_0x10cd6a};},_0x3a47c3=dbPerformance[_0x498ed4(0x173)](_0x498ed4(0x1d9))['cloneDeep']()['value']();if(_0x3a47c3['length']>0x1){const {missingDay1:_0x326aca,notInDay2:_0x104b2c}=_0x52554a(_0x57dead,_0x3a47c3[0x1][_0x498ed4(0x1cb)]);_0x57dead=[..._0x57dead,..._0x326aca],_0x104b2c[_0x498ed4(0x227)](_0x2ddb90=>{const _0x387918=_0x498ed4;let _0x3010d3=_0x57dead['findIndex'](_0x55d536=>_0x55d536['coin']==_0x2ddb90[_0x387918(0x170)]);_0x3010d3!=-0x1&&_0x57dead['splice'](_0x3010d3,0x1);});}_0x57dead[_0x498ed4(0x194)]((_0x1a230b,_0x1fdaef)=>_0x1a230b[_0x498ed4(0x170)]>_0x1fdaef[_0x498ed4(0x170)]?0x1:_0x1fdaef[_0x498ed4(0x170)]>_0x1a230b['coin']?-0x1:0x0);let _0x3e3bd7=[{'date':_0x4dd039['startdate'],'changes':_0x57dead}];_0x3a47c3[_0x498ed4(0x212)]>0x2&&_0x3a47c3[_0x498ed4(0x227)]((_0x2e763b,_0x4ed6f3)=>{const _0x34c855=_0x498ed4;if(_0x4ed6f3>0x0&&_0x4ed6f3<_0x3a47c3[_0x34c855(0x212)]-0x1){const {missingDay1:_0x2ce988,notInDay2:_0xd3c2bb}=_0x52554a(_0x3a47c3[_0x4ed6f3][_0x34c855(0x1cb)],_0x3a47c3[_0x4ed6f3+0x1]['coins']);_0x57dead=[],(_0x2ce988[_0x34c855(0x212)]!=0x0||_0xd3c2bb[_0x34c855(0x212)]!=0x0)&&(_0x2ce988[_0x34c855(0x212)]!=0x0&&_0x57dead[_0x34c855(0x1fc)](..._0x2ce988),_0xd3c2bb[_0x34c855(0x212)]!=0x0&&(_0xd3c2bb[_0x34c855(0x227)](_0x3aa19d=>{const _0x48417e=_0x34c855;_0x3aa19d['number']=-_0x3aa19d[_0x48417e(0x27b)];}),_0x57dead[_0x34c855(0x1fc)](..._0xd3c2bb)),_0x57dead['sort']((_0x50f015,_0x1aec0b)=>_0x50f015['coin']>_0x1aec0b[_0x34c855(0x170)]?0x1:_0x1aec0b[_0x34c855(0x170)]>_0x50f015['coin']?-0x1:0x0),_0x3e3bd7[_0x34c855(0x1fc)]({'date':_0x3a47c3[_0x4ed6f3+0x1][_0x34c855(0x1c6)],'changes':_0x57dead}));}}),dbConfig['get']('bot')[_0x498ed4(0x208)]({'botID':botID})[_0x498ed4(0x246)]({..._0x4dd039,'liquidity':_0x3e3bd7})[_0x498ed4(0x182)]();}}config=getConfiguration(botID);let _0x5267bf=dbPerformance['get']('version')[_0x498ed4(0x1f0)]();_0x5267bf!='2.3.5'&&(dbPerformance[_0x498ed4(0x1ae)](_0x498ed4(0x243),_0x498ed4(0x230))['write'](),setStartDatePerformance());let _0x386539=dbCoinResults['get'](_0x498ed4(0x243))[_0x498ed4(0x1f0)]();if(_0x386539!=_0x498ed4(0x1b4)){dbCoinResults[_0x498ed4(0x1ae)](_0x498ed4(0x243),_0x498ed4(0x1b4))[_0x498ed4(0x182)]();let _0x264765=dbCoinResults['get']('coins')[_0x498ed4(0x1f0)]();if(_0x264765[_0x498ed4(0x212)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x499351){const _0x5b070b=_0x4639fe;let _0x5c61d9=dbConfig['get'](_0x5b070b(0x22f))[_0x5b070b(0x208)]({'botID':_0x499351})[_0x5b070b(0x1f0)]();if(_0x5c61d9){let _0x159f1c=![];typeof _0x5c61d9[_0x5b070b(0x1a9)]=='string'&&(_0x5c61d9={..._0x5c61d9,'threshold':Number(_0x5c61d9[_0x5b070b(0x1a9)])},_0x159f1c=!![]),_0x5c61d9[_0x5b070b(0x19e)]==null&&(_0x5c61d9={..._0x5c61d9,'change24h':-0x14},_0x159f1c=!![]),_0x159f1c&&(_0x5c61d9={'botID':_0x5c61d9[_0x5b070b(0x1de)],'exchange':_0x5c61d9[_0x5b070b(0x248)],'apiKey':_0x5c61d9[_0x5b070b(0x1f6)],'apiSecret':_0x5c61d9['apiSecret'],'basecoin':_0x5c61d9[_0x5b070b(0x165)],'botname':_0x5c61d9[_0x5b070b(0x195)],'showname':_0x5c61d9[_0x5b070b(0x267)],'threshold':_0x5c61d9[_0x5b070b(0x1a9)],'ordertype':_0x5c61d9['ordertype'],'timeout':_0x5c61d9[_0x5b070b(0x163)],'startdate':_0x5c61d9[_0x5b070b(0x15c)],'recreate':_0x5c61d9[_0x5b070b(0x1c2)],'timeshift':_0x5c61d9[_0x5b070b(0x245)],'headless':_0x5c61d9[_0x5b070b(0x229)],'cooldown':_0x5c61d9[_0x5b070b(0x26b)],'change24h':_0x5c61d9['change24h'],'emojibuy':_0x5c61d9['emojibuy'],'emojisell':_0x5c61d9[_0x5b070b(0x254)],'portfolio':_0x5c61d9['portfolio'],'liquidity':_0x5c61d9[_0x5b070b(0x27f)]},dbConfig['get'](_0x5b070b(0x22f))[_0x5b070b(0x1bd)]()[_0x5b070b(0x182)](),dbConfig[_0x5b070b(0x173)]('bot')['push'](_0x5c61d9)[_0x5b070b(0x182)]());}else _0x5c61d9={'botID':_0x499351,'exchange':_0x5b070b(0x201),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x5b070b(0x244)+_0x499351,'showname':![],'threshold':0x3,'ordertype':_0x5b070b(0x259),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5b070b(0x245)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x5c61d9;}function emittedConfiguration(){const _0x201161=_0x4639fe;let _0x14f0d6;return config[_0x201161(0x1f6)]==''?_0x14f0d6=config:_0x14f0d6={...config,'apiKey':_0x201161(0x1a8),'apiSecret':'************'},_0x14f0d6;}function getSettings(){const _0x222db8=_0x4639fe;return dbSettings['get'](_0x222db8(0x263))['value']();}function getSecure(){const _0x137342=_0x4639fe;return dbSecure['get'](_0x137342(0x1cf))[_0x137342(0x1f0)]()||{};}function updateTimeshift(_0x371f0b){const _0x4d2959=_0x4639fe;let _0x70b5c=dbConfig[_0x4d2959(0x173)](_0x4d2959(0x22f))['find']({'botID':botID})[_0x4d2959(0x1f0)]();_0x70b5c&&dbConfig[_0x4d2959(0x173)](_0x4d2959(0x22f))[_0x4d2959(0x208)]({'botID':botID})['assign']({'timeshift':_0x371f0b})[_0x4d2959(0x182)](),config['timeshift']=_0x371f0b,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x1fc3a6){const _0x25d63d=_0x4639fe;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x45b996=dbConfig['get'](_0x25d63d(0x22f))[_0x25d63d(0x208)]({'botID':botID})[_0x25d63d(0x1f0)]();_0x1fc3a6={..._0x1fc3a6,'apiKey':crypt[_0x25d63d(0x1e0)](secure[_0x25d63d(0x18f)],_0x1fc3a6[_0x25d63d(0x1f6)])[_0x25d63d(0x278)],'apiSecret':crypt[_0x25d63d(0x1e0)](secure[_0x25d63d(0x18f)],_0x1fc3a6[_0x25d63d(0x17f)])[_0x25d63d(0x278)]};if(_0x45b996){if(_0x1fc3a6[_0x25d63d(0x1f6)]==_0x25d63d(0x1a8))_0x1fc3a6[_0x25d63d(0x1f6)]=config[_0x25d63d(0x1f6)];if(_0x1fc3a6['apiSecret']==_0x25d63d(0x1a8))_0x1fc3a6['apiSecret']=config[_0x25d63d(0x17f)];dbConfig[_0x25d63d(0x173)]('bot')[_0x25d63d(0x208)]({'botID':botID})[_0x25d63d(0x246)](_0x1fc3a6)['write']();}else dbConfig[_0x25d63d(0x173)](_0x25d63d(0x22f))[_0x25d63d(0x1fc)](_0x1fc3a6)['write'](),process['send']({'status':_0x25d63d(0x189),'live':_0x25d63d(0x1c0)},_0x2281a5=>{});config={..._0x1fc3a6},setStartDatePerformance(),process[_0x25d63d(0x25e)]({'botname':_0x1fc3a6[_0x25d63d(0x195)]},_0x596c9f=>{}),updateBotManager();const _0x194aac=getNormalizedPerformance();getStartingBalances(_0x194aac),emitPerformance(_0x194aac),proxyEmit(_0x25d63d(0x1e3)),await initCoinResults(),reset();}async function storeHeadless(_0x48c635){const _0x52dbe5=_0x4639fe,_0x4c2657={...config,'headless':_0x48c635[_0x52dbe5(0x229)]};let _0x3b7f48=dbConfig[_0x52dbe5(0x173)](_0x52dbe5(0x22f))[_0x52dbe5(0x208)]({'botID':botID})[_0x52dbe5(0x1f0)]();_0x3b7f48&&dbConfig[_0x52dbe5(0x173)](_0x52dbe5(0x22f))['find']({'botID':botID})[_0x52dbe5(0x246)](_0x4c2657)['write'](),config={..._0x4c2657},updateBotManager(),proxyEmit(_0x52dbe5(0x27a),emittedConfiguration());}function noslash(_0x2f3baf){const _0xac4f3e=_0x4639fe;return _0x2f3baf[_0xac4f3e(0x24b)]('/','');}async function updateNumberCoins(_0x371df2){const _0x2c7051=_0x4639fe;console[_0x2c7051(0x18c)](_0x371df2);if(_0x371df2[_0x2c7051(0x21a)]&&_0x371df2[_0x2c7051(0x21a)]==_0x2c7051(0x1c1)){if(_0x371df2[_0x2c7051(0x265)]!=lastOutboundEventTime){lastOutboundEventTime=_0x371df2[_0x2c7051(0x265)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x584504=JSON[_0x2c7051(0x282)](lastBalances[_0x2c7051(0x1ad)]);_0x584504[_0x2c7051(0x227)](_0x2adc9c=>{const _0x17085d=_0x2c7051,_0x1f1288=currentCoins[_0x17085d(0x208)](_0x26d56e=>_0x26d56e[_0x17085d(0x170)]==_0x2adc9c[_0x17085d(0x170)]);if(_0x1f1288['order'])_0x2adc9c[_0x17085d(0x1e4)]=_0x1f1288[_0x17085d(0x1e4)];}),lastBalances={...lastBalances,'portfolio':JSON[_0x2c7051(0x174)](_0x584504)},proxyEmit(_0x2c7051(0x1ba),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x371df2['eventType']&&_0x371df2[_0x2c7051(0x21a)]==_0x2c7051(0x25b)){if(_0x371df2[_0x2c7051(0x268)]==_0x2c7051(0x283)){if(lastOrders)lastOrders[_0x2c7051(0x227)](async _0x31f22a=>{const _0x4f02c5=_0x2c7051;_0x31f22a[_0x4f02c5(0x169)]==_0x371df2[_0x4f02c5(0x169)]&&_0x31f22a[_0x4f02c5(0x183)]==0x0&&(_0x31f22a[_0x4f02c5(0x17a)]=_0x371df2[_0x4f02c5(0x1f7)]/_0x371df2[_0x4f02c5(0x1e9)],_0x31f22a[_0x4f02c5(0x183)]=_0x371df2[_0x4f02c5(0x1e9)],_0x31f22a[_0x4f02c5(0x15b)]={'cost':_0x371df2['commission'],'currency':_0x371df2[_0x4f02c5(0x252)]},await validateOrders(),await updateCoinResults(_0x31f22a));});}}}async function getCoins(_0x23d241=![],_0xc4f58e=!![],_0x382a63=config['basecoin']){const _0x50881e=_0x4639fe;let _0x208e89,_0x56978d=[],_0xbbc46d=[],_0x3cdc8b=[];try{_0x208e89=await exchange[_0x50881e(0x17b)](),mybalances=_0x208e89[_0x50881e(0x231)];if(!_0xc4f58e)for(const [_0xd821c8,_0x4cb58b]of Object[_0x50881e(0x1e8)](mybalances)){_0x3cdc8b[_0x50881e(0x1fc)](_0xd821c8);}else config[_0x50881e(0x1ad)][_0x50881e(0x227)](_0x30c242=>{const _0x48c3e7=_0x50881e;if(!_0x30c242[_0x48c3e7(0x205)])_0x3cdc8b[_0x48c3e7(0x1fc)](_0x30c242[_0x48c3e7(0x170)]);});if(_0x382a63=='')for(const [_0x20d1c5,_0x58419c]of Object[_0x50881e(0x1e8)](mybalances)){_0x58419c[_0x50881e(0x18e)]()!=0x0&&_0xbbc46d[_0x50881e(0x1fc)]({'coin':_0x20d1c5});}else{let _0x18b9b2=![],_0x227d03;allOpenOrders=[];for(const [_0x1df2de,_0x4b2378]of Object[_0x50881e(0x1e8)](mybalances)){if(_0x3cdc8b[_0x50881e(0x241)](_0x1df2de)){const _0x50ac45=config[_0x50881e(0x1ad)]['find'](_0x35f994=>_0x35f994['coin']==_0x1df2de),_0x1f1fa5=_0x1df2de+'/'+_0x382a63,_0x1fb2e9=_0x382a63+'/'+_0x1df2de;_0x18b9b2=![];if((_0x4b2378['toString']()!=0x0||_0x50ac45)&&(allSymbols[_0x50881e(0x241)](_0x1f1fa5)||_0x1df2de==_0x382a63))_0x1df2de!=_0x382a63&&(_0x56978d[_0x50881e(0x1fc)](_0x1f1fa5),_0x23d241&&(_0x227d03=await exchange[_0x50881e(0x1ff)](_0x1f1fa5),_0x227d03[_0x50881e(0x212)]>0x0&&(_0x18b9b2=!![]))),_0xbbc46d[_0x50881e(0x1fc)]({'coin':_0x1df2de,'symbol':_0x1f1fa5,'reverse':![],'number':Math['max'](_0x4b2378+(_0x50ac45&&_0x50ac45[_0x50881e(0x162)]||0x0),0x0),'order':_0x18b9b2});else(_0x4b2378[_0x50881e(0x18e)]()!=0x0||_0x50ac45)&&allSymbols['includes'](_0x1fb2e9)&&(_0x1df2de!=_0x382a63&&(_0x56978d[_0x50881e(0x1fc)](_0x1fb2e9),_0x23d241&&(_0x227d03=await exchange[_0x50881e(0x1ff)](_0x1fb2e9),_0x227d03['length']>0x0&&(_0x18b9b2=!![]))),_0xbbc46d[_0x50881e(0x1fc)]({'coin':_0x1df2de,'symbol':_0x1fb2e9,'reverse':!![],'number':Math[_0x50881e(0x253)](_0x4b2378+(_0x50ac45&&_0x50ac45[_0x50881e(0x162)]||0x0),0x0),'order':_0x18b9b2}));}_0x18b9b2&&allOpenOrders['push'](_0x227d03[0x0]);}_0x23d241&&allOpenOrders[_0x50881e(0x212)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x50881e(0x239))));}}catch(_0x55c547){if(!_0xc4f58e){if(_0x55c547['toString']()['includes'](_0x50881e(0x160)))return logHistory(_0x50881e(0x277),_0x50881e(0x1f2)),![];else{if(_0x55c547[_0x50881e(0x18e)]()[_0x50881e(0x241)](_0x50881e(0x1e7)))return logHistory(_0x50881e(0x277),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x55c547[_0x50881e(0x18e)]()[_0x50881e(0x241)](_0x50881e(0x1a4)))return logHistory('error',_0x50881e(0x18d)),![];else await handleError(_0x55c547,_0x50881e(0x1aa));}}}else await handleError(_0x55c547,_0x50881e(0x1aa));}return _0xbbc46d;}async function getPortfolio(_0x66e08f){const _0x32106a=_0x4639fe;let _0x180e63=[],_0x5557c9=[],_0xc329e5,_0x445818=[],_0x49e5ff,_0xd6ad04;_0x66e08f[_0x32106a(0x1f6)]===_0x32106a(0x1a8)||_0x66e08f[_0x32106a(0x17f)]===_0x32106a(0x1a8)?(_0x49e5ff=config[_0x32106a(0x1f6)],_0xd6ad04=config[_0x32106a(0x17f)]):(_0x49e5ff=_0x66e08f[_0x32106a(0x1f6)],_0xd6ad04=_0x66e08f['apiSecret']);await initExchange(_0x49e5ff,_0xd6ad04);let _0x1a7f89=await loadSymbols();if(_0x1a7f89){_0x445818=await getCoins(![],![],_0x66e08f[_0x32106a(0x165)]);if(_0x445818===![])proxyEmit(_0x32106a(0x1ad),![]);else{if(_0x66e08f['basecoin']=='')proxyEmit(_0x32106a(0x1ad),_0x445818);else{_0x445818[_0x32106a(0x227)](_0x4b3748=>{const _0x5a788d=_0x32106a;if(_0x4b3748[_0x5a788d(0x170)]!=_0x66e08f['basecoin'])_0x180e63[_0x5a788d(0x1fc)](_0x4b3748[_0x5a788d(0x20f)]);});try{_0x5557c9=await exchange['fetchTickers'](_0x180e63);}catch(_0x528ef2){await handleError(_0x528ef2,_0x32106a(0x221));}_0x445818['forEach'](_0x507193=>{const _0x3ee549=_0x32106a;_0x507193[_0x3ee549(0x170)]!=_0x66e08f[_0x3ee549(0x165)]?_0xc329e5=_0x507193['reverse']?0x1/_0x5557c9[_0x507193[_0x3ee549(0x20f)]][_0x3ee549(0x1a6)]:_0x5557c9[_0x507193['symbol']][_0x3ee549(0x1a6)]:_0xc329e5=0x1,_0x507193['price']=formatResult(_0xc329e5,0x8);}),proxyEmit(_0x32106a(0x1ad),_0x445818);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x2c98da){const _0x1b179c=_0x4639fe;let _0x443a68=!![];const _0x480ca0=!_0x2c98da[_0x1b179c(0x26c)]?markets[_0x2c98da[_0x1b179c(0x20f)]][_0x1b179c(0x26d)]['amount'][_0x1b179c(0x251)]:markets[_0x2c98da[_0x1b179c(0x20f)]]['limits'][_0x1b179c(0x1d5)]['min'],_0x414b6b=!_0x2c98da[_0x1b179c(0x26c)]?markets[_0x2c98da['symbol']][_0x1b179c(0x26d)][_0x1b179c(0x1d5)][_0x1b179c(0x251)]:markets[_0x2c98da[_0x1b179c(0x20f)]]['limits'][_0x1b179c(0x1c9)][_0x1b179c(0x251)],_0x4f3b7d=markets[_0x2c98da[_0x1b179c(0x20f)]][_0x1b179c(0x279)][_0x1b179c(0x1c9)];_0x2c98da[_0x1b179c(0x20a)]=formatResultTruncate(_0x2c98da[_0x1b179c(0x20a)],_0x4f3b7d);if(Math[_0x1b179c(0x25a)](_0x2c98da[_0x1b179c(0x20a)])<_0x480ca0)_0x443a68=![];if(Math[_0x1b179c(0x25a)](_0x2c98da['trade'])*_0x2c98da[_0x1b179c(0x1a6)]<_0x414b6b)_0x443a68=![];if(_0x2c98da[_0x1b179c(0x1ea)]=='sell'){let _0x27671d=config[_0x1b179c(0x1ad)][_0x1b179c(0x208)](_0x5e668e=>_0x5e668e[_0x1b179c(0x170)]==_0x2c98da['coin']);if(_0x27671d[_0x1b179c(0x162)]>0x0){if(Math[_0x1b179c(0x25a)](_0x2c98da[_0x1b179c(0x20a)])>_0x2c98da[_0x1b179c(0x27b)]-_0x27671d[_0x1b179c(0x162)])_0x443a68=![];}else{if(Math[_0x1b179c(0x25a)](_0x2c98da[_0x1b179c(0x20a)])>_0x2c98da[_0x1b179c(0x27b)])_0x443a68=![];}}if(_0x2c98da[_0x1b179c(0x1ea)]=='buy'){let _0x97dbe7=config[_0x1b179c(0x1ad)][_0x1b179c(0x208)](_0x339881=>_0x339881[_0x1b179c(0x170)]==config[_0x1b179c(0x165)]),_0x5c369b=currentCoins[_0x1b179c(0x208)](_0x1c0299=>_0x1c0299[_0x1b179c(0x170)]==config['basecoin']);if(_0x97dbe7[_0x1b179c(0x162)]>0x0){if(Math['abs'](_0x2c98da[_0x1b179c(0x20a)])*_0x2c98da[_0x1b179c(0x1a6)]>_0x5c369b[_0x1b179c(0x27b)]-_0x97dbe7[_0x1b179c(0x162)])_0x443a68=![];}else{if(Math['abs'](_0x2c98da[_0x1b179c(0x20a)])*_0x2c98da[_0x1b179c(0x1a6)]>_0x5c369b['number'])_0x443a68=![];}}return _0x443a68;}async function getBalances(){const _0x46d244=_0x4639fe;let _0x2959c4=0x0,_0x355e80;const _0x32f60d=config[_0x46d244(0x1a9)];if(config[_0x46d244(0x229)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x46d244(0x227)](_0x31bd0d=>{const _0x1d2791=_0x46d244;if(_0x31bd0d[_0x1d2791(0x170)]!=config['basecoin']){let _0x456eaa=global['ticker'][noslash(_0x31bd0d[_0x1d2791(0x20f)])];_0x355e80=_0x31bd0d[_0x1d2791(0x26c)]?0x1/_0x456eaa:_0x456eaa;}else _0x355e80=0x1;let _0x964c1e=_0x31bd0d[_0x1d2791(0x27b)]*_0x355e80;_0x2959c4+=_0x964c1e,_0x31bd0d[_0x1d2791(0x1a6)]=formatResult(Number(_0x355e80),0x8),_0x31bd0d[_0x1d2791(0x1f0)]=_0x964c1e;}),currentCoins['forEach'](_0xa2aafb=>{const _0x4f3a01=_0x46d244;let _0x3da243=config[_0x4f3a01(0x1ad)][_0x4f3a01(0x208)](_0x59daa0=>_0x59daa0['coin']==_0xa2aafb[_0x4f3a01(0x170)]),_0x350d6d=Number(_0x3da243[_0x4f3a01(0x207)]),_0xa8dff=_0xa2aafb[_0x4f3a01(0x1f0)]/_0x2959c4*0x64,_0x131b2a=_0x350d6d*_0x2959c4/0x64/_0xa2aafb[_0x4f3a01(0x1a6)]-_0xa2aafb[_0x4f3a01(0x27b)];_0xa2aafb['distribution']=formatResult(_0xa8dff,0x3),_0xa2aafb[_0x4f3a01(0x1a3)]=formatResult(_0x350d6d,0x3),_0xa2aafb['trade']=formatResult(_0x131b2a,0x8),_0xa2aafb['side']='',_0xa2aafb[_0x4f3a01(0x186)]=![];if(_0xa2aafb[_0x4f3a01(0x170)]!=config[_0x4f3a01(0x165)]){if(_0xa2aafb[_0x4f3a01(0x207)]>_0x350d6d)_0xa2aafb[_0x4f3a01(0x1ea)]=_0x4f3a01(0x1b8),_0xa2aafb[_0x4f3a01(0x186)]=checkMinimums(_0xa2aafb);else _0xa2aafb[_0x4f3a01(0x207)]<_0x350d6d&&(_0xa2aafb[_0x4f3a01(0x1ea)]=_0x4f3a01(0x18a),_0xa2aafb[_0x4f3a01(0x186)]=checkMinimums(_0xa2aafb));}_0xa2aafb[_0x4f3a01(0x24e)]=_0xa2aafb[_0x4f3a01(0x207)]/_0xa2aafb[_0x4f3a01(0x1a3)]-0x1;}),currentCoins['sort']((_0x4348b1,_0x312798)=>_0x4348b1[_0x46d244(0x24e)]<_0x312798['delta']?0x1:_0x312798[_0x46d244(0x24e)]<_0x4348b1['delta']?-0x1:0x0);const _0x209caa=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x209caa[_0x46d244(0x21c)],'usd':_0x209caa[_0x46d244(0x209)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x32f60d},proxyEmit(_0x46d244(0x1ba),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x46d244(0x229)])headlessMode({'portfolio':currentCoins,'threshold':_0x32f60d});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x32f60d});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3d944e=_0x4639fe;if(!lastBalances)return;let _0x40d865=[],_0x46b176,_0x14c29c=JSON[_0x3d944e(0x282)](lastBalances['portfolio']);_0x14c29c[_0x3d944e(0x194)]((_0x2d2e77,_0x4a11c2)=>_0x2d2e77[_0x3d944e(0x170)]>_0x4a11c2[_0x3d944e(0x170)]?0x1:_0x4a11c2[_0x3d944e(0x170)]>_0x2d2e77[_0x3d944e(0x170)]?-0x1:0x0),_0x14c29c[_0x3d944e(0x227)](_0x3b7e38=>{const _0x1de96f=_0x3d944e;let _0x1d184f={'coin':_0x3b7e38[_0x1de96f(0x170)],'number':_0x3b7e38[_0x1de96f(0x27b)],'price':_0x3b7e38[_0x1de96f(0x1a6)]};_0x40d865[_0x1de96f(0x1fc)](_0x1d184f);});const _0x38c5a7=await getFiat();_0x46b176={'date':lastBalances[_0x3d944e(0x1b0)][_0x3d944e(0x15d)]('\x20')[0x0],'eur':_0x38c5a7[_0x3d944e(0x21c)],'usd':_0x38c5a7[_0x3d944e(0x209)],'coins':_0x40d865};let _0x19f37e=dbPerformance[_0x3d944e(0x173)]('data')[_0x3d944e(0x208)]({'date':_0x46b176[_0x3d944e(0x1c6)]})['value']();_0x19f37e?_0x46b176[_0x3d944e(0x1c6)]!=config[_0x3d944e(0x15c)]&&dbPerformance[_0x3d944e(0x173)](_0x3d944e(0x1d9))[_0x3d944e(0x208)]({'date':_0x46b176[_0x3d944e(0x1c6)]})[_0x3d944e(0x246)](_0x46b176)[_0x3d944e(0x182)]():dbPerformance['get'](_0x3d944e(0x1d9))['push'](_0x46b176)[_0x3d944e(0x182)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2d4683=_0x4639fe;let _0x51f70c=[];if(dbPerformance[_0x2d4683(0x256)]('data')['value']()){let _0x22309b=dbPerformance[_0x2d4683(0x173)](_0x2d4683(0x1d9))['cloneDeep']()[_0x2d4683(0x236)](_0x2d4683(0x1c6))[_0x2d4683(0x1f0)](),_0x318b30=[...config[_0x2d4683(0x27f)]];_0x318b30[_0x2d4683(0x194)]((_0x16f3ca,_0x2b3793)=>_0x16f3ca[_0x2d4683(0x1c6)]>_0x2b3793[_0x2d4683(0x1c6)]?-0x1:_0x2b3793['date']>_0x16f3ca[_0x2d4683(0x1c6)]?0x1:0x0);let _0x3e62dc=0x1,_0x2cbb46=[],_0x46404c=0x0;_0x22309b[_0x2d4683(0x271)]()[_0x2d4683(0x26c)]()[_0x2d4683(0x227)]((_0x14b453,_0x37c01e)=>{const _0x5137a8=_0x2d4683;if(_0x318b30[_0x46404c]){if(_0x22309b[_0x22309b[_0x5137a8(0x212)]-_0x37c01e]&&_0x318b30[_0x46404c][_0x5137a8(0x1c6)]==_0x22309b[_0x22309b[_0x5137a8(0x212)]-_0x37c01e][_0x5137a8(0x1c6)]){if(_0x37c01e<_0x22309b['length']){let _0x577c9c=0x0,_0x3b4d39=0x0;_0x22309b[_0x22309b[_0x5137a8(0x212)]-_0x37c01e]['coins'][_0x5137a8(0x227)](_0x14af9c=>{const _0x59af9e=_0x5137a8;_0x3b4d39+=_0x14af9c[_0x59af9e(0x27b)]*_0x14af9c[_0x59af9e(0x17a)];}),_0x318b30[_0x46404c]['changes'][_0x5137a8(0x227)](_0x50da5d=>{const _0x516ece=_0x5137a8;_0x577c9c+=_0x50da5d[_0x516ece(0x27b)]*_0x50da5d[_0x516ece(0x17a)];}),_0x3e62dc*=_0x577c9c/(_0x3b4d39-_0x577c9c)+0x1;}_0x46404c++;}}let _0x2ac2df=0x0;_0x14b453[_0x5137a8(0x1cb)][_0x5137a8(0x227)](_0xe49320=>{const _0x2099de=_0x5137a8;_0x2ac2df+=_0xe49320['number']*_0xe49320[_0x2099de(0x17a)];}),_0x2cbb46[_0x22309b[_0x5137a8(0x212)]-_0x37c01e-0x1]=_0x2ac2df*(_0x3e62dc-0x1);});let _0xb759cb=[];_0x318b30=[...config['liquidity']]||[];let _0x42a983=0x0;_0x46404c=0x0,_0x22309b[_0x2d4683(0x227)]((_0x1b3503,_0x1ce739)=>{const _0x54186a=_0x2d4683;if(_0x318b30[_0x46404c]){const _0x462be0=fns[_0x54186a(0x282)](_0x318b30[_0x46404c]['date'],_0x54186a(0x21e),new Date()),_0x323d1d=fns[_0x54186a(0x282)](_0x1b3503[_0x54186a(0x1c6)],'yyyy/MM/dd',new Date());if(fns[_0x54186a(0x1c8)](_0x462be0,_0x323d1d)){let _0x45457c=0x0;_0x318b30[_0x46404c][_0x54186a(0x1ca)][_0x54186a(0x227)](_0x521937=>{const _0x582a51=_0x54186a;!_0xb759cb[_0x521937[_0x582a51(0x170)]]?_0xb759cb[_0x521937[_0x582a51(0x170)]]=_0x521937['number']:(_0x45457c=_0xb759cb[_0x521937[_0x582a51(0x170)]],_0xb759cb[_0x521937[_0x582a51(0x170)]]+=_0x521937['number']);const _0xaec75d=_0x1b3503[_0x582a51(0x1cb)][_0x582a51(0x208)](_0x58f5a4=>_0x58f5a4[_0x582a51(0x170)]==_0x521937[_0x582a51(0x170)]);(!_0xaec75d||_0xaec75d[_0x582a51(0x27b)]==0x0)&&(_0x42a983+=(-_0x521937['number']-_0x45457c)*_0x521937['price']);}),_0x46404c++;}}_0x1b3503['coins']['forEach']((_0x5b9dc2,_0x5bbaef)=>{const _0x11577e=_0x54186a;_0xb759cb[_0x5b9dc2['coin']]&&(_0x5b9dc2={..._0x5b9dc2,'initial':_0xb759cb[_0x5b9dc2[_0x11577e(0x170)]]}),_0x1b3503[_0x11577e(0x1cb)][_0x5bbaef]=_0x5b9dc2;}),_0x51f70c[_0x54186a(0x1fc)]({'date':_0x1b3503[_0x54186a(0x1c6)],'eur':_0x1b3503[_0x54186a(0x21c)],'usd':_0x1b3503['usd'],'offset':_0x2cbb46[_0x1ce739],'netoffset':_0x42a983,'coins':_0x1b3503[_0x54186a(0x1cb)]});});}return _0x51f70c;}function emitPerformance(_0x168c13){const _0x5e71dc=_0x4639fe;_0x168c13['length']!==0x0?(proxyEmit(_0x5e71dc(0x19c),_0x168c13),lastPerformanceEmitted=getDate()):proxyEmit(_0x5e71dc(0x19c),[]);}function getPerf(_0x40aa2a,_0x53a3e3){const _0x49298e=_0x4639fe;let _0x2b033c=0x0,_0x56539b=0x0,_0x1b0674=0x0;_0x40aa2a[_0x49298e(0x1cb)][_0x49298e(0x227)](_0x25459a=>{const _0x265fd8=_0x49298e;_0x2b033c+=_0x25459a[_0x265fd8(0x27b)]*_0x25459a[_0x265fd8(0x17a)];});_0x53a3e3&&(_0x2b033c+=_0x40aa2a[_0x49298e(0x162)]);if(config[_0x49298e(0x165)]===_0x49298e(0x23a)||config[_0x49298e(0x165)]===_0x49298e(0x1a0))_0x56539b=_0x2b033c*_0x40aa2a[_0x49298e(0x21c)],_0x1b0674=_0x2b033c*_0x40aa2a[_0x49298e(0x209)];else{if(config[_0x49298e(0x165)]==='BUSD'||config[_0x49298e(0x165)]===_0x49298e(0x15f))_0x56539b=_0x2b033c*_0x40aa2a[_0x49298e(0x21c)]/_0x40aa2a[_0x49298e(0x209)],_0x1b0674=_0x2b033c;else config[_0x49298e(0x165)]==='EUR'&&(_0x56539b=_0x2b033c,_0x1b0674=_0x2b033c*_0x40aa2a[_0x49298e(0x209)]/_0x40aa2a[_0x49298e(0x21c)]);}return[_0x2b033c,_0x56539b,_0x1b0674];}async function getStartingBalances(_0x1d7e1f,_0x3ecf17=!![]){const _0x37e5f7=_0x4639fe;if(_0x1d7e1f['length']!==0x0){const [_0x48e71c,_0x1e428f,_0xeb7f4d]=getPerf(_0x1d7e1f[0x0],!![]);let _0x5e8616=[];config[_0x37e5f7(0x1ad)][_0x37e5f7(0x227)](_0x5c1eb4=>{const _0x49346c=_0x37e5f7;let _0x37aefe=0x0,_0x34b0d5;config[_0x49346c(0x27f)][_0x49346c(0x227)](_0xe7710a=>{const _0x2450dc=_0x49346c;let _0x18b018=_0xe7710a['changes'][_0x2450dc(0x208)](_0x4a2774=>_0x4a2774[_0x2450dc(0x170)]==_0x5c1eb4[_0x2450dc(0x170)]);if(_0x18b018){_0x37aefe+=_0x18b018[_0x2450dc(0x27b)];if(!_0x34b0d5)_0x34b0d5=_0x18b018[_0x2450dc(0x17a)];}}),_0x5e8616[_0x49346c(0x1fc)]({'coin':_0x5c1eb4[_0x49346c(0x170)],'number':_0x37aefe,'initialprice':_0x34b0d5});});const _0x48d91b={'basecoin':_0x48e71c,'eur':_0x1e428f,'usd':_0xeb7f4d,'coins':_0x5e8616};if(_0x3ecf17)proxyEmit(_0x37e5f7(0x22b),_0x48d91b);return _0x48d91b;}}function headlessMode(_0x352670){const _0x55fbc6=_0x4639fe;let _0x36a161=_0x352670['portfolio'],_0x518a87=_0x352670['threshold'],_0x29c26f=[];for(let _0x291480 of _0x36a161){if(_0x291480[_0x55fbc6(0x170)]!=config[_0x55fbc6(0x165)]){if(_0x291480[_0x55fbc6(0x24e)]>=_0x518a87/0x64){if(_0x291480[_0x55fbc6(0x186)])_0x29c26f[_0x55fbc6(0x1fc)](_0x291480);}else{if(_0x291480['delta']<=-_0x518a87/0x64){if(_0x291480[_0x55fbc6(0x186)])_0x29c26f[_0x55fbc6(0x1fc)](_0x291480);}}}}_0x29c26f['length']>0x0&&(allOrdersPlaced=![],placeOrder(_0x29c26f));}function notifyBalance(_0x420bc8){const _0x3d9545=_0x4639fe;let _0x7a997e=_0x420bc8[_0x3d9545(0x1ad)],_0x396594=_0x420bc8[_0x3d9545(0x1a9)],_0x3c1dbe=[];for(let _0x144f91 of _0x7a997e){if(_0x144f91[_0x3d9545(0x170)]!=config[_0x3d9545(0x165)]){if(_0x144f91[_0x3d9545(0x24e)]>=_0x396594/0x64){if(_0x144f91[_0x3d9545(0x186)])_0x3c1dbe[_0x3d9545(0x1fc)](_0x144f91);}else{if(_0x144f91[_0x3d9545(0x24e)]<=-_0x396594/0x64){if(_0x144f91[_0x3d9545(0x186)])_0x3c1dbe[_0x3d9545(0x1fc)](_0x144f91);}}}}if(_0x3c1dbe[_0x3d9545(0x212)]>0x0){let _0xe9660b=_0x3c1dbe['map'](_0x3285bc=>_0x3285bc[_0x3d9545(0x170)]);_0xe9660b[_0x3d9545(0x194)]();let _0x5f4016=_0xe9660b['join'](',\x20');if(lastCoinsToBalance!==_0x5f4016)logHistory(_0x3d9545(0x179),_0x3d9545(0x25d)+_0x5f4016);lastCoinsToBalance=_0x5f4016;}}function symbolToCoin(_0x13f6bf){const _0x365d54=_0x4639fe;let _0x2198b0;if(_0x13f6bf['includes']('/'+config[_0x365d54(0x165)]))_0x2198b0=_0x13f6bf[_0x365d54(0x24b)]('/'+config[_0x365d54(0x165)],'');if(_0x13f6bf[_0x365d54(0x241)](config['basecoin']+'/'))_0x2198b0=_0x13f6bf[_0x365d54(0x24b)](config[_0x365d54(0x165)]+'/','');return _0x2198b0;}async function unlockOrders(){const _0x1a4682=_0x4639fe;currentCoins=await getCoins(),validateOrdersState=_0x1a4682(0x1b2);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x13495c){const _0x1c6f58=_0x4639fe;if(_0x13495c)validateOrdersState=_0x13495c;let _0xefc68e=[],_0x5c1f19=config[_0x1c6f58(0x1ee)]==_0x1c6f58(0x259)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1c6f58(0x163)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+'\x20-\x20'+_0x13495c),lastOrders[_0x1c6f58(0x227)](_0x3e2f64=>{const _0x18cfe6=_0x1c6f58;let _0x4a3ad8=![];_0x3e2f64['filled']>0x0&&(_0x4a3ad8=!![]),_0xefc68e[_0x18cfe6(0x1fc)](_0x4a3ad8),_0x4a3ad8&&config[_0x18cfe6(0x1ee)]!=_0x18cfe6(0x259)&&logHistory('order',_0x18cfe6(0x1d1)+_0x3e2f64[_0x18cfe6(0x20f)]+'\x20'+_0x3e2f64['side']+'\x20#'+formatResult(_0x3e2f64[_0x18cfe6(0x183)],0x8)+'\x20@'+formatResult(_0x3e2f64['price'],0x8));}),_0xefc68e[_0x1c6f58(0x227)]((_0x35269f,_0x13a430)=>{const _0x50714b=_0x1c6f58;if(_0x35269f)lastOrders[_0x50714b(0x206)](_0x13a430,0x1);});const _0x50cc0d=coolingDown?_0x1c6f58(0x175):_0x1c6f58(0x238);if(validateOrdersState==_0x1c6f58(0x1b2))validateOrdersState=_0x1c6f58(0x19f),_0xefc68e[_0x1c6f58(0x241)](![])?config[_0x1c6f58(0x1ee)]==_0x1c6f58(0x259)?logHistory(_0x1c6f58(0x277),_0x1c6f58(0x280)):logHistory(_0x1c6f58(0x277),_0x1c6f58(0x1a1)):await unlockOrders();else{if(validateOrdersState==_0x1c6f58(0x19f)){if(_0xefc68e[_0x1c6f58(0x241)](![])){}else config[_0x1c6f58(0x1ee)]==_0x1c6f58(0x259)?logHistory(_0x1c6f58(0x179),_0x1c6f58(0x262)+_0x50cc0d):logHistory(_0x1c6f58(0x179),_0x1c6f58(0x21d)+_0x50cc0d),await unlockOrders();}else{if(validateOrdersState==_0x1c6f58(0x18b))_0xefc68e['includes'](![])?config[_0x1c6f58(0x1ee)]==_0x1c6f58(0x259)?logHistory(_0x1c6f58(0x179),_0x1c6f58(0x166)+Math[_0x1c6f58(0x1e5)](_0x5c1f19*validateOrderInterval/0xea60)+_0x1c6f58(0x213)+_0x50cc0d):(await cancelOrders(),logHistory(_0x1c6f58(0x179),_0x1c6f58(0x1d3)+Math[_0x1c6f58(0x1e5)](_0x5c1f19*validateOrderInterval/0xea60)+_0x1c6f58(0x213)+_0x50cc0d)):logHistory('success',_0x1c6f58(0x23b)+_0x50cc0d),await unlockOrders();else{if(validateOrdersState==_0x1c6f58(0x239)){if(config[_0x1c6f58(0x1ee)]!='market')logHistory(_0x1c6f58(0x179),_0x1c6f58(0x23b)+_0x50cc0d);await unlockOrders();}}}}}async function cancelOrders(){const _0x1e023b=_0x4639fe;lastOrders[_0x1e023b(0x227)](async _0x106852=>{const _0x23f690=_0x1e023b;try{const _0x163017=await exchange[_0x23f690(0x1f9)](_0x106852['orderId'],_0x106852[_0x23f690(0x20f)]);}catch(_0x278a6d){if(_0x278a6d[_0x23f690(0x18e)]()[_0x23f690(0x241)]('OrderNotFound')){}else await handleError(_0x278a6d,_0x23f690(0x226));}});}async function initCoinResults(){const _0x239b95=_0x4639fe;let _0x235dc8=[];config['portfolio'][_0x239b95(0x227)](_0x5e03c1=>{const _0x1f5e89=_0x239b95;if(!_0x5e03c1[_0x1f5e89(0x205)]&&_0x5e03c1[_0x1f5e89(0x170)]!=config['basecoin']){let _0x29ab25=dbCoinResults[_0x1f5e89(0x173)](_0x1f5e89(0x1cb))['find']({'coin':_0x5e03c1[_0x1f5e89(0x170)]})['value']();if(!_0x29ab25){const _0x244fa0=currentCoins[_0x1f5e89(0x208)](_0x597daf=>_0x597daf[_0x1f5e89(0x170)]==_0x5e03c1['coin']),_0xc60179=global[_0x1f5e89(0x26f)][noslash(_0x5e03c1['symbol'])];let _0x1bf07c=_0x244fa0?_0x244fa0[_0x1f5e89(0x27b)]:null,_0x1933ac=_0x5e03c1[_0x1f5e89(0x26c)]?0x1/_0xc60179:_0xc60179,_0x14e1ac;config[_0x1f5e89(0x27f)][_0x1f5e89(0x227)](_0x4b9e8f=>{const _0x13a01a=_0x1f5e89;!_0x14e1ac&&(_0x14e1ac=_0x4b9e8f[_0x13a01a(0x1ca)][_0x13a01a(0x208)](_0x54f813=>_0x54f813[_0x13a01a(0x170)]==_0x5e03c1[_0x13a01a(0x170)]),_0x14e1ac&&(_0x1bf07c=_0x14e1ac[_0x13a01a(0x27b)],_0x1933ac=_0x14e1ac['price']));}),_0x235dc8['push']({'coin':_0x5e03c1[_0x1f5e89(0x170)],'number':_0x1bf07c,'price':_0x1933ac});}}}),_0x235dc8['forEach'](_0x4f8f15=>{const _0x4b21e4=_0x239b95,_0x46e92a={'coin':_0x4f8f15[_0x4b21e4(0x170)],'number':_0x4f8f15['number'],'breakeven':_0x4f8f15[_0x4b21e4(0x17a)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4b21e4(0x173)](_0x4b21e4(0x1cb))['push'](_0x46e92a)['write']();});}async function updateCoinResults(_0x5e4347,_0x4287ec=![]){const _0x344db3=_0x4639fe;let _0x1b2004,_0x52f7b1,_0x502d87,_0x372148,_0x4427d7,_0x235801,_0x333bba=dbCoinResults['get'](_0x344db3(0x1cb))['find']({'coin':_0x5e4347[_0x344db3(0x170)]})[_0x344db3(0x1f0)]();!_0x333bba&&await initCoinResults();_0x5e4347['reverse']&&(_0x235801={'filled':_0x5e4347[_0x344db3(0x183)]*_0x5e4347[_0x344db3(0x17a)],'amount':_0x5e4347[_0x344db3(0x183)]*_0x5e4347[_0x344db3(0x17a)],'side':_0x5e4347[_0x344db3(0x1ea)]==_0x344db3(0x1b8)?'buy':'sell','price':0x1/_0x5e4347[_0x344db3(0x17a)]},_0x5e4347={..._0x5e4347,..._0x235801});if(_0x4287ec)_0x52f7b1=_0x5e4347[_0x344db3(0x1ea)]==_0x344db3(0x18a)?_0x333bba[_0x344db3(0x27b)]+_0x5e4347[_0x344db3(0x183)]:_0x333bba[_0x344db3(0x27b)]-_0x5e4347[_0x344db3(0x183)];else{const _0x73eda6=currentCoins[_0x344db3(0x208)](_0x41bc60=>_0x41bc60[_0x344db3(0x170)]==_0x5e4347[_0x344db3(0x170)]);_0x52f7b1=_0x73eda6[_0x344db3(0x27b)];}if(_0x5e4347['fee']&&_0x5e4347[_0x344db3(0x15b)][_0x344db3(0x23f)]==config[_0x344db3(0x165)])_0x1b2004=_0x5e4347[_0x344db3(0x15b)][_0x344db3(0x1d5)];else{if(_0x5e4347['fee']&&_0x5e4347[_0x344db3(0x15b)]['currency']==_0x344db3(0x1b5)&&!_0x4287ec)_0x1b2004=_0x5e4347[_0x344db3(0x15b)][_0x344db3(0x1d5)]*global['ticker'][_0x344db3(0x1b5)+config['basecoin']];else _0x1b2004=defaultFee*_0x5e4347[_0x344db3(0x183)]*_0x5e4347['price'];}_0x5e4347[_0x344db3(0x1ea)]=='buy'?(_0x502d87=_0x52f7b1!=0x0?(_0x333bba[_0x344db3(0x232)]*_0x333bba['number']+_0x5e4347[_0x344db3(0x17a)]*(_0x52f7b1-_0x333bba[_0x344db3(0x27b)])+_0x1b2004)/_0x52f7b1:0x0,_0x372148=_0x333bba[_0x344db3(0x1fb)]):(_0x502d87=_0x52f7b1!=0x0?(_0x333bba[_0x344db3(0x232)]*_0x333bba[_0x344db3(0x27b)]-_0x5e4347[_0x344db3(0x17a)]*(_0x333bba[_0x344db3(0x27b)]-_0x52f7b1)+_0x1b2004)/_0x52f7b1:0x0,_0x372148=_0x333bba[_0x344db3(0x1fb)]+(_0x5e4347['price']-_0x333bba[_0x344db3(0x232)])*_0x5e4347[_0x344db3(0x183)]);_0x4427d7=(_0x5e4347['price']-_0x502d87-_0x1b2004/_0x5e4347[_0x344db3(0x183)])*_0x52f7b1;let _0x5ecb72={'coin':_0x5e4347[_0x344db3(0x170)],'number':_0x52f7b1,'breakeven':formatResult(_0x502d87,0x8),'realized':formatResult(_0x372148,0x8),'unrealized':formatResult(_0x4427d7,0x8),'fees':formatResult(_0x333bba[_0x344db3(0x16b)]+_0x1b2004,0x8),'sells':_0x5e4347[_0x344db3(0x1ea)]==_0x344db3(0x1b8)?_0x333bba[_0x344db3(0x269)]+0x1:_0x333bba[_0x344db3(0x269)],'buys':_0x5e4347[_0x344db3(0x1ea)]==_0x344db3(0x18a)?_0x333bba['buys']+0x1:_0x333bba[_0x344db3(0x26e)]};dbCoinResults[_0x344db3(0x173)](_0x344db3(0x1cb))[_0x344db3(0x208)]({'coin':_0x5e4347[_0x344db3(0x170)]})[_0x344db3(0x246)](_0x5ecb72)['write']();if(!_0x4287ec){if(_0x5e4347[_0x344db3(0x15b)]&&_0x5e4347['fee'][_0x344db3(0x23f)]==_0x344db3(0x1b5)){const _0x1921e=currentCoins[_0x344db3(0x208)](_0x5809f6=>_0x5809f6['coin']==_0x344db3(0x1b5));if(_0x1921e){let _0x3692a3=dbCoinResults[_0x344db3(0x173)](_0x344db3(0x1cb))['find']({'coin':_0x344db3(0x1b5)})[_0x344db3(0x1f0)]();_0x5ecb72={..._0x3692a3,'number':_0x1921e[_0x344db3(0x27b)]},dbCoinResults[_0x344db3(0x173)](_0x344db3(0x1cb))[_0x344db3(0x208)]({'coin':_0x344db3(0x1b5)})['assign'](_0x5ecb72)[_0x344db3(0x182)]();}}}}async function placeOrder(_0x30565d){const _0xe70ec3=_0x4639fe,_0x1c378e=config['ordertype']==_0xe70ec3(0x259)?'market':_0xe70ec3(0x215);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x4e460a of _0x30565d){let _0x59e0c6,_0xab6135,_0x6b4213,_0x173050,_0x215828,_0x8b20ff=_0x4e460a[_0xe70ec3(0x20f)];try{const _0x22fe5f=await exchange['fetchTickers']([_0x8b20ff]),_0x1a92ce=_0x22fe5f[_0x8b20ff];_0x59e0c6=_0x4e460a[_0xe70ec3(0x26c)]?0x1/_0x4e460a['last']:_0x4e460a[_0xe70ec3(0x1a6)],_0xab6135=_0x1a92ce[_0xe70ec3(0x190)],_0x6b4213=_0x1a92ce['ask'];_0x4e460a[_0xe70ec3(0x26c)]?(_0x173050=_0x4e460a[_0xe70ec3(0x1ea)]=='buy'?'sell':_0xe70ec3(0x18a),_0x215828=Math[_0xe70ec3(0x25a)](_0x4e460a['trade'])/_0x59e0c6):(_0x173050=_0x4e460a[_0xe70ec3(0x1ea)],_0x215828=Math[_0xe70ec3(0x25a)](_0x4e460a[_0xe70ec3(0x20a)]));_0x1c378e==_0xe70ec3(0x215)&&(config[_0xe70ec3(0x1ee)]==_0xe70ec3(0x193)&&(_0x59e0c6=_0x173050==_0xe70ec3(0x18a)?_0xab6135:_0x6b4213),config[_0xe70ec3(0x1ee)]==_0xe70ec3(0x1e1)&&(_0x59e0c6=_0x173050==_0xe70ec3(0x18a)?_0x6b4213:_0xab6135));_0x215828=formatResult(_0x215828,0x8),_0x59e0c6=formatResult(_0x59e0c6,0x8);const _0x39d879=await exchange[_0xe70ec3(0x16d)](_0x8b20ff,_0x1c378e,_0x173050,_0x215828,_0x59e0c6);lastOrders[_0xe70ec3(0x1fc)]({'orderId':_0x39d879['id'],'symbol':_0x8b20ff,'coin':_0x4e460a[_0xe70ec3(0x170)],'side':_0x173050,'reverse':_0x4e460a[_0xe70ec3(0x26c)],'amount':_0x39d879['amount'],'filled':0x0,'price':_0x39d879[_0xe70ec3(0x17a)],'fee':_0x39d879[_0xe70ec3(0x15b)]});const _0x2c8adb=_0x173050=='sell'?config[_0xe70ec3(0x254)]?String[_0xe70ec3(0x24c)]('0x'+config['emojisell'])+'\x20':'':config[_0xe70ec3(0x180)]?String['fromCodePoint']('0x'+config[_0xe70ec3(0x180)])+'\x20':'',_0x552da2=_0x1c378e==_0xe70ec3(0x259)?_0xe70ec3(0x1fa):config[_0xe70ec3(0x1ee)]==_0xe70ec3(0x193)?_0xe70ec3(0x220):_0xe70ec3(0x171);if(_0x1c378e==_0xe70ec3(0x259))logHistory(_0xe70ec3(0x1e4),''+_0x2c8adb+_0x552da2+'\x20order:\x20'+_0x8b20ff+'\x20'+_0x173050+'\x20#'+formatResult(_0x39d879[_0xe70ec3(0x183)],0x8)+'\x20@'+formatResult(_0x39d879['price'],0x8));else logHistory(_0xe70ec3(0x1e4),''+_0x2c8adb+_0x552da2+_0xe70ec3(0x22a)+_0x8b20ff+'\x20'+_0x173050+'\x20#'+formatResult(_0x39d879[_0xe70ec3(0x1c9)],0x8)+'\x20@'+formatResult(_0x39d879[_0xe70ec3(0x17a)],0x8));let _0x2dfbfb=currentCoins['find'](_0x1b6ebf=>_0x1b6ebf[_0xe70ec3(0x170)]==_0x4e460a[_0xe70ec3(0x170)]);_0x2dfbfb['order']=!![];if(config[_0xe70ec3(0x26b)]!=0x0){let _0x1d0186=null;if(cooldownTracker[_0xe70ec3(0x212)]==config[_0xe70ec3(0x26b)]-0x1)_0x1d0186=cooldownTracker[_0xe70ec3(0x23d)]();const _0x4020b4=getTimeStamp();cooldownTracker[_0xe70ec3(0x1fc)](_0x4020b4);if(_0x1d0186){const _0x2b9b3d=fns['differenceInSeconds'](new Date(_0x4020b4),new Date(_0x1d0186));if(_0x2b9b3d<cooldownInterval){logHistory(_0xe70ec3(0x277),_0xe70ec3(0x1c7)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xe70ec3(0x219)),coolingDown=!![];break;}}}}catch(_0x136023){if(_0x136023[_0xe70ec3(0x18e)]()[_0xe70ec3(0x241)](_0xe70ec3(0x196)))logHistory(_0xe70ec3(0x277),_0xe70ec3(0x1b6)+_0x8b20ff);else{if(_0x136023[_0xe70ec3(0x18e)]()[_0xe70ec3(0x241)]('Invalid\x20quantity'))logHistory(_0xe70ec3(0x277),'Order\x20amount\x20is\x20invalid:\x20'+_0x8b20ff);else await handleError(_0x136023,_0xe70ec3(0x187),_0x8b20ff);}}}allOrdersPlaced=!![];if(lastOrders['length']!=0x0){lockOrders=!![],validateOrdersState=_0xe70ec3(0x1b2),setTimeout(function(){validateOrders();},0x1388);const _0x1c7ccf=config[_0xe70ec3(0x1ee)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x436b09=_0xe70ec3;validateOrders(_0x436b09(0x18b));},_0x1c7ccf);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0xe70ec3(0x1cc)));}else{if(coolingDown)!config[_0xe70ec3(0x229)]&&logHistory('error',_0xe70ec3(0x24f));else lockOrders&&(!config[_0xe70ec3(0x229)]&&(config[_0xe70ec3(0x1ee)]==_0xe70ec3(0x259)?logHistory(_0xe70ec3(0x277),_0xe70ec3(0x25c)):logHistory(_0xe70ec3(0x277),_0xe70ec3(0x161))));}}function restoreOrders(){const _0x34df22=_0x4639fe;let _0x5272d4;lockOrders=!![],validateOrdersState=_0x34df22(0x19f),currentCoins[_0x34df22(0x227)](_0x13876b=>{const _0x53cf7e=_0x34df22,_0x4fc5ba=allOpenOrders[_0x53cf7e(0x208)](_0x5c2efb=>_0x5c2efb[_0x53cf7e(0x20f)]==_0x13876b[_0x53cf7e(0x20f)]);_0x4fc5ba&&(lastOrders[_0x53cf7e(0x1fc)]({'orderId':_0x4fc5ba['id'],'symbol':_0x13876b[_0x53cf7e(0x20f)],'coin':_0x13876b[_0x53cf7e(0x170)],'side':_0x4fc5ba[_0x53cf7e(0x1ea)],'reverse':_0x13876b['reverse'],'amount':_0x4fc5ba[_0x53cf7e(0x1c9)],'filled':0x0,'price':_0x4fc5ba[_0x53cf7e(0x17a)],'fee':_0x4fc5ba['fee']}),_0x13876b[_0x53cf7e(0x1e4)]=!![],_0x5272d4=_0x4fc5ba[_0x53cf7e(0x233)]);});const _0x2a9874=new Date()['getTime'](),_0x1743c6=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x34df22(0x163)]*0x3c*0x3e8;if(_0x5272d4+_0x1743c6>_0x2a9874){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x427c8d=_0x34df22;validateOrders(_0x427c8d(0x18b));},_0x5272d4+_0x1743c6-_0x2a9874);}else validateOrders('final');}function sendPortfolioTelegram(){const _0x11f7d1=_0x4639fe,_0x37a46d=[_0x11f7d1(0x1be),_0x11f7d1(0x1b1),_0x11f7d1(0x15f)],_0x2e23c3=_0x37a46d['includes'](config[_0x11f7d1(0x165)])?0x2:0x8;let _0x59db04='';if(config[_0x11f7d1(0x267)])_0x59db04=config['botname']+_0x11f7d1(0x26a);else _0x59db04=_0x11f7d1(0x244)+botID+_0x11f7d1(0x26a);_0x59db04+='<pre>',_0x59db04+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x59db04+=_0x11f7d1(0x1a2),currentCoins[_0x11f7d1(0x227)](_0x40bd67=>{const _0x24be82=_0x11f7d1;_0x59db04+=_0x40bd67['coin'][_0x24be82(0x250)](0x7)+'|\x20'+formatPad(_0x40bd67[_0x24be82(0x207)],0x2,0x6)+'|\x20'+formatPad(_0x40bd67[_0x24be82(0x1a3)],0x2,0x6)+'|\x20'+formatPad(_0x40bd67[_0x24be82(0x24e)]*0x64,0x2,0x6)+'\x0a';}),_0x59db04+=_0x11f7d1(0x1c3),process[_0x11f7d1(0x25e)]({'telegrammsg':_0x59db04},_0x3d97e3=>{});}function formatPad(_0x2c73c1,_0x5c3c50,_0x386c3b){const _0x13e6e2=_0x4639fe,_0x13f643=formatResultString(_0x2c73c1,_0x5c3c50);return _0x13f643?_0x13f643[_0x13e6e2(0x27c)](_0x386c3b):''[_0x13e6e2(0x27c)](_0x386c3b);}function logHistory(_0x182459,_0x3ab3a6,_0xd8964e=''){const _0x3c3696=_0x4639fe;let _0x4f55f4={'time':getTimeStamp(),'type':_0x182459,'event':_0x3ab3a6};dbLogs['get'](_0x3c3696(0x178))[_0x3c3696(0x1fc)](_0x4f55f4)['write']();if(_0xd8964e=='')_0xd8964e=_0x3ab3a6;proxyEmit(_0x3c3696(0x15e),{'log':_0x4f55f4,'summary':_0xd8964e}),process[_0x3c3696(0x25e)]({'telegram':{..._0x4f55f4,'botname':config['botname'],'showname':config[_0x3c3696(0x267)]}},_0x54c919=>{}),logging(''+_0x4f55f4[_0x3c3696(0x15e)]);}function emitHistory(_0x41d918={}){const _0x27283f=_0x4639fe;Object[_0x27283f(0x242)](_0x41d918)['length']==0x0&&(_0x41d918={'type':[_0x27283f(0x1e4),'event'],'event':'','page':0x1});if(_0x41d918[_0x27283f(0x1f4)][_0x27283f(0x241)]('event'))_0x41d918['type'][_0x27283f(0x206)](_0x41d918['type'][_0x27283f(0x1d7)](_0x27283f(0x15e)),0x1,'error',_0x27283f(0x179));if(dbLogs['has'](_0x27283f(0x178))[_0x27283f(0x1f0)]()){let _0x49eaa7=dbLogs[_0x27283f(0x173)](_0x27283f(0x178))[_0x27283f(0x199)](_0x35f408=>{const _0x4750b4=_0x27283f;if(_0x41d918[_0x4750b4(0x1f4)][_0x4750b4(0x212)]==0x0)return![];else return _0x41d918['type'][_0x4750b4(0x241)](_0x35f408['type']);})[_0x27283f(0x199)](_0xcd65db=>{const _0xb09d1c=_0x27283f;if(_0x41d918[_0xb09d1c(0x15e)]=='')return!![];else return _0xcd65db[_0xb09d1c(0x15e)][_0xb09d1c(0x19d)]()[_0xb09d1c(0x241)](_0x41d918[_0xb09d1c(0x15e)][_0xb09d1c(0x19d)]());})[_0x27283f(0x236)](_0x27283f(0x1b0)),_0x5f4884=_0x49eaa7[_0x27283f(0x1f0)]()[_0x27283f(0x212)];_0x49eaa7=_0x49eaa7[_0x27283f(0x26c)]()['slice']((_0x41d918['page']-0x1)*logPageSize,_0x41d918[_0x27283f(0x1e6)]*logPageSize-0x1)['reverse']()[_0x27283f(0x1f0)](),proxyEmit(_0x27283f(0x27e),{'logs':_0x49eaa7,'total':_0x5f4884});}else proxyEmit(_0x27283f(0x27e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1a9525){const _0x594522=_0x4639fe;if(dbLogs[_0x594522(0x256)](_0x594522(0x178))[_0x594522(0x1f0)]()){const _0x4547ab=dbLogs[_0x594522(0x173)](_0x594522(0x178))['sortBy'](_0x594522(0x1b0))['filter'](_0x29828c=>{const _0x39af00=_0x594522;return _0x29828c[_0x39af00(0x1f4)]==_0x39af00(0x1e4);})[_0x594522(0x1f0)]();dbLogs[_0x594522(0x173)](_0x594522(0x178))[_0x594522(0x1bd)]()[_0x594522(0x182)](),dbLogs[_0x594522(0x173)](_0x594522(0x178))[_0x594522(0x246)](_0x4547ab)['write'](),emitHistory(_0x1a9525);}}async function pauseBot(_0x40cf83=''){const _0x418567=_0x4639fe,_0xcc4751=new Date()[_0x418567(0x1af)]();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0xcc4751-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0x418567(0x25e)]({'stop':_0x418567(0x272)},_0x4d3416=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x418567(0x1af)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x40cf83)_0x40cf83+=_0x418567(0x20b);logHistory(_0x418567(0x277),_0x40cf83+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x418567(0x1f5)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x34893f=_0x4639fe;process['send']({'stop':_0x34893f(0x1dd)},_0x2be996=>{}),await sleep(0x7d0);}async function handleError(_0x13b5bc,_0x5196a6,_0x459071=''){const _0x4ac0b7=_0x4639fe;if(_0x13b5bc[_0x4ac0b7(0x18e)]()[_0x4ac0b7(0x241)]('DDoSProtection'))await pauseBot(_0x4ac0b7(0x1ec));else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()[_0x4ac0b7(0x241)](_0x4ac0b7(0x191)))await pauseBot('Binance\x20not\x20available\x20(2)');else{if(_0x13b5bc['toString']()[_0x4ac0b7(0x241)]('RequestTimeout'))await pauseBot(_0x4ac0b7(0x264));else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()['includes'](_0x4ac0b7(0x160)))logHistory('error',_0x5196a6+_0x4ac0b7(0x15a)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()['includes'](_0x4ac0b7(0x1e7)))logHistory(_0x4ac0b7(0x277),_0x5196a6+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x4ac0b7(0x277),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()[_0x4ac0b7(0x241)](_0x4ac0b7(0x1a4)))logHistory('error',_0x5196a6+_0x4ac0b7(0x210)),logHistory(_0x4ac0b7(0x277),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()[_0x4ac0b7(0x241)](_0x4ac0b7(0x1c5)))logHistory(_0x4ac0b7(0x277),_0x5196a6+_0x4ac0b7(0x240)),logHistory(_0x4ac0b7(0x277),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x13b5bc[_0x4ac0b7(0x18e)]()[_0x4ac0b7(0x241)](_0x4ac0b7(0x1ef)))await pauseBot(_0x4ac0b7(0x235)),process[_0x4ac0b7(0x25e)]({'stop':'restart'},_0x3d9864=>{});else _0x13b5bc['toString']()[_0x4ac0b7(0x241)](_0x4ac0b7(0x25f))?logHistory(_0x4ac0b7(0x277),_0x5196a6+_0x4ac0b7(0x23e)+_0x459071):(logging(_0x5196a6+_0x4ac0b7(0x19b),_0x13b5bc),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x441b1e,_0x845b87){const _0x531029=_0x4639fe;return parseFloat(_0x441b1e[_0x531029(0x164)](_0x845b87));}function formatResultTruncate(_0x48e46f,_0x55bf2e){const _0x397877=_0x4639fe;let _0x1210ba=formatResultString(_0x48e46f,0xa),_0xda2b86=_0x1210ba[_0x397877(0x1d7)]('.');return _0xda2b86!=-0x1&&(_0x1210ba=_0x1210ba['slice'](0x0,_0xda2b86+_0x55bf2e+0x1)),Number(_0x1210ba);}function formatResultString(_0x357601,_0x2fd701){const _0x553af8=_0x4639fe;let _0x3d5569;if(!(''+_0x357601)[_0x553af8(0x241)]('e'))_0x3d5569=+(Math[_0x553af8(0x1e5)](_0x357601+'e+'+_0x2fd701)+'e-'+_0x2fd701);else{let _0x2d59cd=(''+_0x357601)[_0x553af8(0x15d)]('e'),_0x4bb9cb='';+_0x2d59cd[0x1]+_0x2fd701>0x0&&(_0x4bb9cb='+'),_0x3d5569=+(Math[_0x553af8(0x1e5)](+_0x2d59cd[0x0]+'e'+_0x4bb9cb+(+_0x2d59cd[0x1]+_0x2fd701))+'e-'+_0x2fd701);}return Number(_0x3d5569)[_0x553af8(0x164)](_0x2fd701);}function logging(_0x3a0f2a,_0x8ed5d4=''){const _0x7976d3=_0x4639fe;if(config[_0x7976d3(0x267)])console['log'](getTimeStamp()+':\x20'+config[_0x7976d3(0x195)]+_0x7976d3(0x211)+_0x3a0f2a,_0x8ed5d4);else console[_0x7976d3(0x18c)](getTimeStamp()+':\x20Bot\x20'+botID+_0x7976d3(0x211)+_0x3a0f2a,_0x8ed5d4);}function getServerTime(){const _0x268f64=_0x4639fe,_0x1257d4=new Date();return _0x1257d4[_0x268f64(0x22e)]()+'/'+(_0x1257d4['getMonth']()+0x1)[_0x268f64(0x18e)]()['padStart'](0x2,'0')+'/'+_0x1257d4[_0x268f64(0x17c)]()[_0x268f64(0x18e)]()[_0x268f64(0x27c)](0x2,'0')+'\x20'+_0x1257d4['getHours']()[_0x268f64(0x18e)]()['padStart'](0x2,'0')+':'+_0x1257d4['getMinutes']()[_0x268f64(0x18e)]()[_0x268f64(0x27c)](0x2,'0')+':'+_0x1257d4['getSeconds']()[_0x268f64(0x18e)]()[_0x268f64(0x27c)](0x2,'0');}function getTimeStamp(){const _0x4fe5ca=_0x4639fe,_0x5227ef=shiftedTime();return _0x5227ef[_0x4fe5ca(0x22e)]()+'/'+(_0x5227ef['getMonth']()+0x1)[_0x4fe5ca(0x18e)]()[_0x4fe5ca(0x27c)](0x2,'0')+'/'+_0x5227ef[_0x4fe5ca(0x17c)]()['toString']()[_0x4fe5ca(0x27c)](0x2,'0')+'\x20'+_0x5227ef[_0x4fe5ca(0x27d)]()[_0x4fe5ca(0x18e)]()['padStart'](0x2,'0')+':'+_0x5227ef['getMinutes']()[_0x4fe5ca(0x18e)]()[_0x4fe5ca(0x27c)](0x2,'0')+':'+_0x5227ef[_0x4fe5ca(0x237)]()[_0x4fe5ca(0x18e)]()[_0x4fe5ca(0x27c)](0x2,'0');}function getDate(){const _0x353911=_0x4639fe,_0x222f84=shiftedTime();return _0x222f84[_0x353911(0x22e)]()+'/'+(_0x222f84[_0x353911(0x222)]()+0x1)[_0x353911(0x18e)]()[_0x353911(0x27c)](0x2,'0')+'/'+_0x222f84[_0x353911(0x17c)]()['toString']()[_0x353911(0x27c)](0x2,'0');}function getHour(){const _0x1a8767=_0x4639fe,_0x437631=shiftedTime();return _0x437631[_0x1a8767(0x27d)]()[_0x1a8767(0x18e)]()[_0x1a8767(0x27c)](0x2,'0');}function sleep(_0x4d1c50){return new Promise(_0x4fc54e=>setTimeout(_0x4fc54e,_0x4d1c50));}function shiftedTime(){const _0x2bf99a=_0x4639fe,_0x45da78=new Date();let _0x17a64f=_0x45da78;if(config&&config['timeshift']!==0x0)_0x17a64f=fns[_0x2bf99a(0x192)](_0x45da78,{'hours':config[_0x2bf99a(0x245)]});return _0x17a64f;}