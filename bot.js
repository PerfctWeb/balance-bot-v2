const _0x1c80fc=_0xdd2a;(function(_0x13962e,_0x39e1a7){const _0x24da98=_0xdd2a,_0x1dec0b=_0x13962e();while(!![]){try{const _0x264c76=parseInt(_0x24da98(0x1d9))/0x1+parseInt(_0x24da98(0x366))/0x2+parseInt(_0x24da98(0x2cc))/0x3+parseInt(_0x24da98(0x1e0))/0x4*(parseInt(_0x24da98(0x29a))/0x5)+parseInt(_0x24da98(0x2d3))/0x6*(-parseInt(_0x24da98(0x1fe))/0x7)+parseInt(_0x24da98(0x218))/0x8*(-parseInt(_0x24da98(0x374))/0x9)+-parseInt(_0x24da98(0x22f))/0xa*(parseInt(_0x24da98(0x2d2))/0xb);if(_0x264c76===_0x39e1a7)break;else _0x1dec0b['push'](_0x1dec0b['shift']());}catch(_0xdda17f){_0x1dec0b['push'](_0x1dec0b['shift']());}}}(_0x5203,0x89ec1));const _0x3e43be=function(){let _0x4c4978=!![];return function(_0x511a70,_0x595c61){const _0x4d54bd=_0x4c4978?function(){if(_0x595c61){const _0x23923b=_0x595c61['apply'](_0x511a70,arguments);return _0x595c61=null,_0x23923b;}}:function(){};return _0x4c4978=![],_0x4d54bd;};}(),_0x9c0506=_0x3e43be(this,function(){const _0xad1d57=_0xdd2a;return _0x9c0506[_0xad1d57(0x26e)]()[_0xad1d57(0x2e7)](_0xad1d57(0x284))[_0xad1d57(0x26e)]()[_0xad1d57(0x302)](_0x9c0506)['search'](_0xad1d57(0x284));});_0x9c0506();'use strict';const ccxt=require(_0x1c80fc(0x28a)),low=require(_0x1c80fc(0x2b6)),FileSync=require(_0x1c80fc(0x277)),fs=require('fs'),fns=require(_0x1c80fc(0x1fd)),Crypt=require(_0x1c80fc(0x32e))[_0x1c80fc(0x1e9)],util=require(_0x1c80fc(0x1ea)),argv=require(_0x1c80fc(0x30e))(process[_0x1c80fc(0x282)][_0x1c80fc(0x250)](0x2))[_0x1c80fc(0x282)],path=require('path');let exchange;global[_0x1c80fc(0x361)]={},global[_0x1c80fc(0x36a)]={};const usdBasecoins=[_0x1c80fc(0x2ad),'BUSD','TUSD',_0x1c80fc(0x2ec),_0x1c80fc(0x20e),_0x1c80fc(0x32f)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1c80fc(0x1d5)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x1c80fc(0x237))['version'],botID=process[_0x1c80fc(0x282)][0x2]||_0x1c80fc(0x246),pattern=/^[0-9]{3}$/;!pattern[_0x1c80fc(0x2dd)](botID)&&(console[_0x1c80fc(0x27c)](_0x1c80fc(0x21c)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x1c80fc(0x206)+userID+'/':_0x1c80fc(0x206),logspath=userID?_0x1c80fc(0x2ef)+userID+'/':_0x1c80fc(0x2ef),loggerfile=fs[_0x1c80fc(0x285)](logspath+_0x1c80fc(0x2d5),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x1c80fc(0x26c)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x1c80fc(0x2e2)+botID+_0x1c80fc(0x1ee),logfile=configpath+_0x1c80fc(0x2e2)+botID+'-events.json',performancefile=configpath+_0x1c80fc(0x2e2)+botID+_0x1c80fc(0x295),coinresultsfile=configpath+_0x1c80fc(0x2e2)+botID+_0x1c80fc(0x2c4),settingsfile=configpath+_0x1c80fc(0x30f),securefile=configpath+_0x1c80fc(0x25d),configbackuppath=configpath+_0x1c80fc(0x360),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1c80fc(0x220)]({'logs':[],'version':serverversion})[_0x1c80fc(0x252)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1c80fc(0x220)]({'data':[],'version':serverversion})[_0x1c80fc(0x252)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1c80fc(0x220)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1c80fc(0x279),'rsaStandard':_0x1c80fc(0x2e1)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2f352b=>{console['log'](_0x2f352b);},'simple':_0x37e7ce=>{const _0x566bdc=_0x1c80fc;console[_0x566bdc(0x27c)](_0x37e7ce),loggerfile['write'](util[_0x566bdc(0x346)](_0x37e7ce)+'\x0a');},'full':async(_0x53f11c,_0x1cf607='')=>{const _0x1c3780=_0x1c80fc;let _0x494db1;if(config[_0x1c3780(0x359)])_0x494db1=getTimeStamp()+':\x20'+config[_0x1c3780(0x324)]+_0x1c3780(0x1e1)+_0x53f11c;else _0x494db1=getTimeStamp()+_0x1c3780(0x332)+botID+'\x20>\x20'+_0x53f11c;console[_0x1c3780(0x27c)](_0x494db1),loggerfile[_0x1c3780(0x252)](util[_0x1c3780(0x346)](_0x494db1)+'\x0a'),_0x1cf607&&(console[_0x1c3780(0x27c)](_0x1cf607),loggerfile[_0x1c3780(0x252)](util[_0x1c3780(0x346)](_0x1cf607)+'\x0a'));},'debug':async(_0x478823,_0xc0f35='')=>{const _0x503ec8=_0x1c80fc;let _0x213479;if(config[_0x503ec8(0x359)])_0x213479=getTimeStamp()+':\x20'+config[_0x503ec8(0x324)]+_0x503ec8(0x29d)+_0x478823;else _0x213479=getTimeStamp()+_0x503ec8(0x332)+botID+'\x20>\x20[DEBUG]\x20'+_0x478823;if(debugging)console[_0x503ec8(0x27c)](_0x213479);loggerfile[_0x503ec8(0x252)](util[_0x503ec8(0x346)](_0x213479)+'\x0a');if(_0xc0f35){if(debugging)console[_0x503ec8(0x27c)](_0xc0f35);loggerfile[_0x503ec8(0x252)](util[_0x503ec8(0x346)](_0xc0f35)+'\x0a');}}};process['on'](_0x1c80fc(0x1fb),function(_0x445010){const _0x10e6c3=_0x1c80fc;logHistory(_0x10e6c3(0x1d7),_0x10e6c3(0x2c2)),logger[_0x10e6c3(0x214)](_0x10e6c3(0x1dc),_0x445010);});settings[_0x1c80fc(0x27d)]!=config[_0x1c80fc(0x27d)]&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config[_0x1c80fc(0x23f)]&&updateOnepagemode(settings['onepagemode']);process[_0x1c80fc(0x30a)]({'started':_0x1c80fc(0x253)},_0x349b03=>{}),initializeProcessListeners();function proxyEmit(_0x1366ef,_0x1e4dd7=null){const _0x1f2bd1=_0x1c80fc;process[_0x1f2bd1(0x30a)]({'function':_0x1366ef,'args':_0x1e4dd7},_0x16a6d6=>{});}function initializeProcessListeners(){const _0x39937d=_0x1c80fc;process['on'](_0x39937d(0x274),_0x4bb378=>{const _0x2defd6=_0x39937d;switch(Object[_0x2defd6(0x24c)](_0x4bb378)[0x0]){case _0x2defd6(0x27d):_0x4bb378['timeshift']!=undefined&&(settings[_0x2defd6(0x27d)]=_0x4bb378['timeshift'],updateTimeshift(settings[_0x2defd6(0x27d)]));break;case _0x2defd6(0x23f):_0x4bb378[_0x2defd6(0x23f)]!=undefined&&(settings[_0x2defd6(0x23f)]=_0x4bb378[_0x2defd6(0x23f)],updateOnepagemode(settings[_0x2defd6(0x23f)]));break;case'bots':_0x4bb378[_0x2defd6(0x2e5)]!=undefined&&(bots=JSON[_0x2defd6(0x1d6)](_0x4bb378[_0x2defd6(0x2e5)]),proxyEmit(_0x2defd6(0x2e5),bots));break;case _0x2defd6(0x217):switch(_0x4bb378[_0x2defd6(0x217)]){case'initclient':initclient();break;case _0x2defd6(0x1f3):toggleBotMode();break;case _0x2defd6(0x2b7):emitHistory(_0x4bb378[_0x2defd6(0x2b4)]);break;case _0x2defd6(0x204):deleteHistoryAlerts(_0x4bb378[_0x2defd6(0x2b4)]);break;case _0x2defd6(0x33f):getPortfolio(_0x4bb378['args']);break;case _0x2defd6(0x2a8):storeConfiguration(_0x4bb378[_0x2defd6(0x2b4)]);break;case _0x2defd6(0x1fa):storeHeadless(_0x4bb378['args']);break;case _0x2defd6(0x275):storeFiat(_0x4bb378[_0x2defd6(0x2b4)]);break;case _0x2defd6(0x2f2):resetHistory();break;case _0x2defd6(0x355):getStartingBalances(getNormalizedPerformance());break;case _0x2defd6(0x364):placeOrder(_0x4bb378[_0x2defd6(0x2b4)]);break;case _0x2defd6(0x30d):cancelLoading();break;case _0x2defd6(0x258):showConfig();break;case _0x2defd6(0x2ae):sendMetricsTelegram();break;case _0x2defd6(0x2a9):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x130607=null,_0x4b5cb3=![]){const _0x45e281=_0x1c80fc;logger[_0x45e281(0x214)](_0x45e281(0x25c)+(_0x130607&&_0x130607['length']>0x0?'additional\x20symbols\x20'+_0x130607[_0x45e281(0x1f8)](','):'no\x20additional\x20symbols')+_0x45e281(0x28e)+(_0x4b5cb3?_0x45e281(0x234):'exchange\x20not\x20reloaded')+_0x45e281(0x224)+config[_0x45e281(0x34c)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4b5cb3)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x45e281(0x318)]!=''&&config[_0x45e281(0x318)]!=_0x45e281(0x323)){loadingProgress=0x0;if(_0x4b5cb3){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x107eb1){handleErrorNoStop(_0x107eb1,_0x45e281(0x349));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x130607);const _0xefbfd2=await getCoins();[currentCoins,currentCoinsAll]=_0xefbfd2,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x45e281(0x35d)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x45e281(0x248)]==0x0&&allOpenOrders[_0x45e281(0x248)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x56e9b6=_0x1c80fc;exchangeStopped=!![];try{await exchange[_0x56e9b6(0x34f)]();}catch(_0x29d1c3){await handleError(_0x29d1c3,_0x56e9b6(0x2d0));}}async function reloadExchange(){const _0x319d5d=_0x1c80fc;logger[_0x319d5d(0x214)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x319d5d(0x1d5)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x319d5d(0x27a)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4cdf91=config['exchange'],_0x3618e4=config[_0x1c80fc(0x318)],_0x2f135e=config[_0x1c80fc(0x2fa)],_0x2043b6=config[_0x1c80fc(0x245)]){const _0x2050ea=_0x1c80fc;exchange&&await stopExchange();!supportedExchanges()[_0x2050ea(0x2b8)](_0x4cdf91)&&(logHistory(_0x2050ea(0x1d7),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x4cdf91+_0x2050ea(0x23b)),killBot());const _0x3c5057=ccxt[_0x2050ea(0x315)][_0x4cdf91[_0x2050ea(0x228)]()];exchange=new _0x3c5057({'apiKey':_0x3618e4,'secret':_0x2f135e,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2050ea(0x1fc)}});if(_0x2043b6)exchange[_0x2050ea(0x2c8)]=_0x2043b6;}function setStableCoins(){const _0x28c0a8=_0x1c80fc;let _0x510d93=config[_0x28c0a8(0x260)]==_0x28c0a8(0x329)?_0x28c0a8(0x329):_0x28c0a8(0x334),_0x3a5fba=!allSymbols[_0x28c0a8(0x2b8)](_0x510d93+_0x28c0a8(0x263))?'USDT':_0x28c0a8(0x2ad),_0x58abe2=!allSymbols['includes'](_0x510d93+_0x28c0a8(0x2bd))?_0x3a5fba:_0x28c0a8(0x219);stablecoins={'eur':{'coin':''+_0x510d93+_0x58abe2,'symbol':_0x510d93+'/'+_0x58abe2},'usd':{'coin':''+_0x510d93+_0x3a5fba,'symbol':_0x510d93+'/'+_0x3a5fba}};}async function initwsCcxt(_0x59add3){const _0x4d582a=_0x1c80fc;_0x59add3==null&&(_0x59add3=[],config[_0x4d582a(0x2da)][_0x4d582a(0x210)](_0x1d25c1=>{const _0x3f50f6=_0x4d582a;if(!_0x1d25c1['excluded']&&_0x1d25c1[_0x3f50f6(0x2aa)]!=config[_0x3f50f6(0x260)])_0x59add3['push'](_0x1d25c1[_0x3f50f6(0x339)]);}));if(!_0x59add3[_0x4d582a(0x2b8)](stablecoins['eur'][_0x4d582a(0x339)]))_0x59add3[_0x4d582a(0x338)](stablecoins[_0x4d582a(0x320)][_0x4d582a(0x339)]);if(!_0x59add3[_0x4d582a(0x2b8)](stablecoins[_0x4d582a(0x289)][_0x4d582a(0x339)]))_0x59add3['push'](stablecoins['usd'][_0x4d582a(0x339)]);if(config['exchange']['startsWith'](_0x4d582a(0x358))){if(!_0x59add3[_0x4d582a(0x2b8)](_0x4d582a(0x344)+config[_0x4d582a(0x260)]))_0x59add3['push'](_0x4d582a(0x344)+config['basecoin']);}loadCoins(_0x59add3),_0x59add3=validateSymbols(_0x59add3);const _0x3fe0d2=async _0x24f5a6=>{const _0x25f901=_0x4d582a;let _0x1ac88a;try{const _0x238fd5=await exchange[_0x25f901(0x249)](_0x24f5a6);Object[_0x25f901(0x283)](_0x238fd5)['forEach'](_0x1765c9=>{const _0x4c03f9=_0x25f901;_0x1ac88a=_0x1765c9[0x1][_0x4c03f9(0x339)],global[_0x4c03f9(0x361)][noslash(_0x1ac88a)]=_0x1765c9[0x1][_0x4c03f9(0x223)];});}catch(_0x42ff4f){await handleError(_0x42ff4f,_0x25f901(0x2f9),_0x1ac88a);}},_0x22498a=async _0x3f6008=>{const _0xb000cd=_0x4d582a;while(!![]){if(!botPaused)try{const _0x298558=await exchange[_0xb000cd(0x2ac)](_0x3f6008);global['ticker'][noslash(_0x298558[0x0]['symbol'])]=_0x298558[0x0][_0xb000cd(0x372)],await sleep(0x3e8);}catch(_0x32bfe6){if(!exchangeStopped)await handleError(_0x32bfe6,_0xb000cd(0x31c),_0x3f6008);}else await sleep(0x64);}},_0x4c7dde=async _0x1d9333=>{const _0x6e3c81=_0x4d582a;while(!![]){if(!botPaused)try{const _0x209eb4=await exchange['fetchTicker'](_0x1d9333);global[_0x6e3c81(0x36a)][_0x209eb4[_0x6e3c81(0x339)]]=_0x209eb4['percentage'],await sleep(0x3c*0x3e8);}catch(_0x367d94){if(!exchangeStopped)await handleError(_0x367d94,_0x6e3c81(0x2c1),_0x1d9333);}else await sleep(0x64);}},_0x1148a6=async _0x7ad31e=>{const _0x428c34=_0x4d582a;while(!![]){if(!botPaused)try{const _0x7a384e=await exchange[_0x428c34(0x32c)](_0x7ad31e);_0x7a384e['forEach'](_0x1c5214=>{updateNumberCoinsCcxt(_0x1c5214);});}catch(_0x2f66fc){if(!exchangeStopped)await handleError(_0x2f66fc,_0x428c34(0x333));}else await sleep(0x64);}};_0x3fe0d2(_0x59add3),_0x59add3['forEach'](_0x227242=>{_0x22498a(_0x227242),_0x4c7dde(_0x227242),_0x1148a6(_0x227242);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x38d516=_0x1c80fc;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1d2aee=await getCoins(),[_0x156dc3,_0x109da3]=_0x1d2aee;let _0x194a59=[];currentCoins[_0x38d516(0x210)](_0x40e6fc=>{const _0x569e61=_0x38d516,_0x284945=_0x156dc3[_0x569e61(0x308)](_0x5f6e61=>_0x5f6e61[_0x569e61(0x2aa)]==_0x40e6fc[_0x569e61(0x2aa)]);if(_0x284945){if(_0x40e6fc[_0x569e61(0x202)]!=_0x284945['number']){let _0x47ba10;if(_0x40e6fc[_0x569e61(0x2aa)]!=config[_0x569e61(0x260)]){const _0x126c18=global[_0x569e61(0x361)][noslash(_0x40e6fc[_0x569e61(0x339)])];_0x47ba10=_0x40e6fc['reverse']?0x1/_0x126c18:_0x126c18;}else _0x47ba10=0x1;_0x194a59[_0x569e61(0x338)]({'coin':_0x40e6fc[_0x569e61(0x2aa)],'symbol':_0x40e6fc[_0x569e61(0x339)],'price':_0x47ba10,'number':Number(formatResult(_0x284945['number']-_0x40e6fc['number'],0x8)),'basecoinvalue':_0x47ba10*(_0x284945[_0x569e61(0x202)]-_0x40e6fc['number'])});}}});if(_0x194a59['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x38d516(0x214)](_0x38d516(0x22d)+_0x194a59[0x0][_0x38d516(0x1eb)]+_0x38d516(0x23a)+lastFees[_0x38d516(0x24b)]);if(lastFees['highest']==0x0||Math[_0x38d516(0x2e3)](_0x194a59[0x0][_0x38d516(0x1eb)])>lastFees[_0x38d516(0x24b)]){delete _0x194a59[0x0][_0x38d516(0x339)],delete _0x194a59[0x0][_0x38d516(0x1eb)];let _0x9aeebd=[],_0x5b0f57=[...config[_0x38d516(0x1db)]]||[],_0x12a2ea=config[_0x38d516(0x1db)];_0x5b0f57[_0x38d516(0x33e)]((_0x12cbe2,_0x7bbb2b)=>_0x12cbe2[_0x38d516(0x222)]>_0x7bbb2b['date']?-0x1:_0x7bbb2b[_0x38d516(0x222)]>_0x12cbe2[_0x38d516(0x222)]?0x1:0x0);const _0x9dc0db=getDate();if(_0x5b0f57[0x0]){const _0x30d9c7=fns[_0x38d516(0x1d6)](_0x5b0f57[0x0]['date'],'yyyy/MM/dd',new Date()),_0x4b32d5=fns['parse'](_0x9dc0db,_0x38d516(0x28f),new Date());if(fns[_0x38d516(0x33b)](_0x30d9c7,_0x4b32d5)){_0x9aeebd=_0x5b0f57[0x0][_0x38d516(0x2a5)];const _0x36714f=_0x9aeebd['find'](_0x48c7eb=>_0x48c7eb['coin']==_0x194a59[0x0][_0x38d516(0x2aa)]);_0x36714f?(_0x36714f[_0x38d516(0x202)]+=_0x194a59[0x0]['number'],_0x36714f['number']==0x0&&(_0x9aeebd=_0x9aeebd[_0x38d516(0x2f1)](_0x1ad92e=>{const _0x5753f5=_0x38d516;return _0x1ad92e[_0x5753f5(0x2aa)]!=_0x194a59[0x0][_0x5753f5(0x2aa)];}))):_0x9aeebd[_0x38d516(0x338)](_0x194a59[0x0]);const _0x31c50e=_0x12a2ea[_0x38d516(0x308)](_0x233bb3=>_0x233bb3[_0x38d516(0x222)]==_0x9dc0db);_0x31c50e[_0x38d516(0x2a5)]=_0x9aeebd;}else _0x12a2ea['push']({'date':_0x9dc0db,'changes':[_0x194a59[0x0]]});}const _0x85d68b=_0x12a2ea[_0x38d516(0x308)](_0x4433b1=>_0x4433b1[_0x38d516(0x222)]==_0x9dc0db);if(_0x85d68b){let _0x58d45a=!![];_0x85d68b[_0x38d516(0x2a5)][_0x38d516(0x210)](_0x94999b=>{const _0x4b71b4=_0x38d516;if(_0x94999b[_0x4b71b4(0x202)]!=0x0)_0x58d45a=![];}),_0x58d45a&&(_0x12a2ea=_0x12a2ea['filter'](_0x21d3c4=>{const _0xb563a3=_0x38d516;return _0x21d3c4[_0xb563a3(0x222)]!=_0x9dc0db;}));}let _0x2f4e71=dbConfig[_0x38d516(0x2be)](_0x38d516(0x2db))[_0x38d516(0x308)]({'botID':botID})[_0x38d516(0x2ab)]();_0x2f4e71&&(dbConfig[_0x38d516(0x2be)](_0x38d516(0x2db))['find']({'botID':botID})[_0x38d516(0x2cf)]({'liquidity':_0x12a2ea})[_0x38d516(0x252)](),config[_0x38d516(0x1db)]=_0x12a2ea),logHistory('success','Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x194a59[0x0][_0x38d516(0x202)])+'\x20'+_0x194a59[0x0][_0x38d516(0x2aa)]+'\x20'+(_0x194a59[0x0][_0x38d516(0x202)]>0x0?_0x38d516(0x2ea):_0x38d516(0x261))+_0x38d516(0x2f0)),proxyEmit(_0x38d516(0x235),emittedConfiguration());}else logger[_0x38d516(0x214)](_0x38d516(0x327)+Math[_0x38d516(0x2e3)](_0x194a59[0x0][_0x38d516(0x202)])+'\x20'+_0x194a59[0x0][_0x38d516(0x2aa)]+'\x20'+(_0x194a59[0x0][_0x38d516(0x202)]>0x0?'added':_0x38d516(0x261)));transactionDetected=!![],currentCoins=_0x156dc3,currentCoinsAll=_0x109da3;}else logger['debug'](_0x38d516(0x365)+Math[_0x38d516(0x2e3)](_0x194a59[0x0][_0x38d516(0x202)])+'\x20'+_0x194a59[0x0][_0x38d516(0x2aa)]+'\x20'+(_0x194a59[0x0][_0x38d516(0x202)]>0x0?_0x38d516(0x2ea):_0x38d516(0x261))+_0x38d516(0x32a)),currentCoins=_0x156dc3,currentCoinsAll=_0x109da3;}await sleep(watchTransactionsInterval);}catch(_0x290f86){if(!exchangeStopped)await handleError(_0x290f86,_0x38d516(0x369));}else await sleep(0x64);}}async function loadSymbols(){const _0x3a4d70=_0x1c80fc;try{markets=await exchange[_0x3a4d70(0x35a)](),allSymbols=[],Object[_0x3a4d70(0x283)](markets)['forEach'](_0xdbcbc8=>{const _0x2e6e0d=_0x3a4d70;_0xdbcbc8[0x1][_0x2e6e0d(0x269)]&&_0xdbcbc8[0x1][_0x2e6e0d(0x1fc)]&&allSymbols[_0x2e6e0d(0x338)](_0xdbcbc8[0x0]);});}catch(_0x42fce5){throw _0x42fce5;}}function validateSymbols(_0x1e7388){const _0x7d2f97=_0x1c80fc;let _0x56941d=[];return _0x1e7388[_0x7d2f97(0x210)](_0x27b9ce=>{const _0xdae491=_0x7d2f97;!allSymbols[_0xdae491(0x2b8)](_0x27b9ce)?logHistory('error',_0xdae491(0x2df)+_0x27b9ce+_0xdae491(0x20d)):_0x56941d[_0xdae491(0x338)](_0x27b9ce);}),_0x56941d;}async function initclient(){const _0x231009=_0x1c80fc;proxyEmit(_0x231009(0x235),emittedConfiguration()),proxyEmit(_0x231009(0x2e4),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x231009(0x2f4),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x37c035=getNormalizedPerformance();emitPerformance(_0x37c035),getStartingBalances(_0x37c035);}async function toggleBotMode(){const _0x4d34dc=_0x1c80fc;let _0x304697=dbConfig[_0x4d34dc(0x2be)](_0x4d34dc(0x2db))[_0x4d34dc(0x308)]({'botID':botID})[_0x4d34dc(0x2ab)]();if(_0x304697){const _0x1ba1a6=!_0x304697[_0x4d34dc(0x2b9)];dbConfig[_0x4d34dc(0x2be)](_0x4d34dc(0x2db))['find']({'botID':botID})[_0x4d34dc(0x2cf)]({'headless':_0x1ba1a6})['write'](),config[_0x4d34dc(0x2b9)]=_0x1ba1a6,proxyEmit(_0x4d34dc(0x235),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3ee9ff=_0x1c80fc;process[_0x3ee9ff(0x30a)]({'updatebotmanager':!![]},_0xdab754=>{});}async function loadCoins(_0x148d53){const _0x747922=_0x1c80fc;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x22b8b7,_0x53e4a0=0x0,_0x35fcf1=0x0;_0x148d53['forEach'](_0x2267c6=>{const _0x4ccc9e=_0xdd2a;loading[_0x4ccc9e(0x363)][_0x4ccc9e(0x338)](_0x2267c6);}),loadingCanceled=![];let _0x27963f=![];while(_0x22b8b7!=_0x148d53[_0x747922(0x248)]+maxLoadingProgress){_0x22b8b7=loadingProgress,_0x148d53[_0x747922(0x210)](_0x10281f=>{const _0x30dc46=_0x747922;if(global[_0x30dc46(0x361)][noslash(_0x10281f)]){loading['remainingSymbols']=loading[_0x30dc46(0x363)][_0x30dc46(0x2f1)](_0xa6e67=>_0xa6e67!=_0x10281f);if(!watchedSymbols['includes'](_0x10281f))watchedSymbols[_0x30dc46(0x338)](_0x10281f);_0x22b8b7++;}}),loading[_0x747922(0x1ef)]=Math[_0x747922(0x298)](_0x22b8b7/(_0x148d53[_0x747922(0x248)]+maxLoadingProgress)*0x64);loading[_0x747922(0x1ef)]!=0x64&&(_0x35fcf1>0x1e*0x5&&(loading[_0x747922(0x2a1)]=!![],emitLoadingProgress()),_0x35fcf1>0x78*0x5&&!_0x27963f&&(loading[_0x747922(0x20b)]=!![],emitLoadingProgress(),_0x27963f=!![],logHistory(_0x747922(0x1d7),_0x747922(0x28d)+loading[_0x747922(0x363)][_0x747922(0x1f8)](',\x20')+_0x747922(0x312)),logHistory(_0x747922(0x1d7),_0x747922(0x227)+loadCoinsRetryInterval/0xea60+_0x747922(0x24e)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x11c11c=_0x747922;process[_0x11c11c(0x30a)]({'stop':_0x11c11c(0x203)},_0x1f6cb0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x747922(0x20b)]=!![],emitLoadingProgress();break;}else _0x53e4a0!=loading[_0x747922(0x1ef)]&&(_0x53e4a0=loading[_0x747922(0x1ef)],emitLoadingProgress()),_0x35fcf1++,await sleep(0xc8);}_0x22b8b7==_0x148d53[_0x747922(0x248)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x747922(0x30a)]({'status':_0x747922(0x29e),'live':_0x747922(0x253)},_0x121c28=>{}),_0x27963f&&logHistory(_0x747922(0x36e),_0x747922(0x1ec)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x14a157=_0x1c80fc;proxyEmit(_0x14a157(0x235),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x2487bf=_0x1c80fc;let _0x1a2994=global[_0x2487bf(0x361)][stablecoins[_0x2487bf(0x320)][_0x2487bf(0x2aa)]],_0x187662=global[_0x2487bf(0x361)][stablecoins[_0x2487bf(0x289)][_0x2487bf(0x2aa)]];return{'eur':Number(_0x1a2994),'usd':Number(_0x187662)};}function capitalize(_0x1a7220){const _0x5db2da=_0x1c80fc;return _0x1a7220[_0x5db2da(0x2f8)](0x0,0x1)[_0x5db2da(0x34d)]()+_0x1a7220[_0x5db2da(0x2f8)](0x1);}function supportedExchanges(){const _0x31f003=_0x1c80fc,_0x2fbff6=['ws',_0x31f003(0x249),_0x31f003(0x25f),'watchTrades',_0x31f003(0x32c),_0x31f003(0x336),_0x31f003(0x30b),_0x31f003(0x238),_0x31f003(0x207),_0x31f003(0x2ee)];let _0x5059b0=[],_0x2db7c3=[],_0x1e1278=ccxt[_0x31f003(0x315)][_0x31f003(0x2e4)];_0x1e1278[_0x31f003(0x210)](_0x2c7fa1=>{const _0x18842d=_0x31f003;try{const _0x46153d=new ccxt[(_0x18842d(0x315))][_0x2c7fa1]();_0x2db7c3[_0x18842d(0x338)](_0x46153d);}catch(_0x2a65da){}}),_0x2db7c3[_0x31f003(0x210)](_0x1e3bde=>{const _0x4db31d=_0x31f003;let _0x43741c=0x0;_0x2fbff6[_0x4db31d(0x210)](_0x5519a3=>{const _0xa9cc=_0x4db31d;_0x5519a3 in _0x1e3bde['has']&&_0x1e3bde[_0xa9cc(0x20c)][_0x5519a3]&&_0x43741c++;}),_0x43741c==_0x2fbff6[_0x4db31d(0x248)]&&_0x5059b0[_0x4db31d(0x338)](capitalize(_0x1e3bde['id']));});let _0x5e18a2=[];return _0x1e1278['forEach'](_0x197178=>{_0x197178=capitalize(_0x197178);if(!_0x5059b0['includes'](_0x197178))_0x5e18a2['push'](_0x197178);}),_0x5059b0;}function setStartDatePerformance(){const _0x16fcee=_0x1c80fc;if(config&&config[_0x16fcee(0x1db)][0x0][_0x16fcee(0x2a5)][_0x16fcee(0x248)]!=0x0){const _0x16289b=config[_0x16fcee(0x1db)][0x0]['changes'];dbPerformance[_0x16fcee(0x2be)](_0x16fcee(0x31a))[_0x16fcee(0x308)]({'date':config[_0x16fcee(0x20a)]})['assign']({'coins':_0x16289b})[_0x16fcee(0x252)]();}}async function recreateCoinResults(){const _0x2f37e1=_0x1c80fc;let _0xab5660,_0x32820a=[];try{const _0x5654f1=fns[_0x2f37e1(0x346)](fns['parseISO'](config[_0x2f37e1(0x20a)][_0x2f37e1(0x2d6)](/\//g,'-')),_0x2f37e1(0x2d1));for(const _0x469f00 of currentCoins){if(_0x469f00[_0x2f37e1(0x2aa)]!=config[_0x2f37e1(0x260)]){let _0x544fd2=0x0,_0x46038a,_0x19a5df;_0xab5660=await getAllEventOrders(_0x469f00[_0x2f37e1(0x339)]);if(_0xab5660['length']>0x0)_0xab5660[_0x2f37e1(0x210)](_0x4f7380=>{const _0x485d27=_0x2f37e1,_0x16126c=_0x469f00[_0x485d27(0x339)][_0x485d27(0x2b8)](config[_0x485d27(0x260)]+'/');_0x32820a['push']({'datetime':_0x4f7380[_0x485d27(0x31f)],'coin':_0x469f00['coin'],'symbol':_0x469f00[_0x485d27(0x339)],'side':_0x4f7380[_0x485d27(0x288)],'reverse':_0x16126c,'amount':formatResult(_0x4f7380[_0x485d27(0x27f)],0x8),'filled':formatResult(_0x4f7380[_0x485d27(0x27f)],0x8),'price':formatResult(_0x4f7380[_0x485d27(0x372)],0x8)}),_0x544fd2=_0x4f7380[_0x485d27(0x288)]==_0x485d27(0x1dd)?_0x544fd2+_0x4f7380['filled']:_0x544fd2-_0x4f7380[_0x485d27(0x27f)];if(!_0x19a5df)_0x19a5df=_0x4f7380[_0x485d27(0x372)];});_0x46038a=_0x469f00[_0x2f37e1(0x202)]-_0x544fd2;let _0x3ed5ef;config[_0x2f37e1(0x1db)][_0x2f37e1(0x210)](_0x36d5fc=>{const _0x3aae53=_0x2f37e1;!_0x3ed5ef&&(_0x3ed5ef=_0x36d5fc[_0x3aae53(0x2a5)][_0x3aae53(0x308)](_0x57b76d=>_0x57b76d[_0x3aae53(0x2aa)]==_0x469f00[_0x3aae53(0x2aa)]),_0x3ed5ef&&(_0x46038a=_0x3ed5ef[_0x3aae53(0x202)],_0x19a5df=_0x3ed5ef[_0x3aae53(0x372)]));});let _0x43d62d=dbCoinResults[_0x2f37e1(0x2be)](_0x2f37e1(0x305))['find']({'coin':_0x469f00[_0x2f37e1(0x2aa)]})['value']();_0x43d62d={'coin':_0x469f00[_0x2f37e1(0x2aa)],'number':_0x46038a,'breakeven':_0x19a5df,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2f37e1(0x2be)]('coins')['find']({'coin':_0x469f00['coin']})[_0x2f37e1(0x2cf)](_0x43d62d)[_0x2f37e1(0x252)]();}}_0x32820a[_0x2f37e1(0x33e)]((_0x1ebcf6,_0x320271)=>_0x1ebcf6[_0x2f37e1(0x31f)]>_0x320271['datetime']?0x1:_0x320271[_0x2f37e1(0x31f)]>_0x1ebcf6[_0x2f37e1(0x31f)]?-0x1:0x0);let _0x54fde9=0x0;for(let _0x5b8cee of _0x32820a){await updateCoinResults(_0x5b8cee,!![]);}}catch(_0x3e9026){await handleError(_0x3e9026,_0x2f37e1(0x287));}}async function getAllEventOrders(_0x40b3a3){const _0x5653d3=_0x1c80fc;let _0x2964b0=[],_0x5cde50=dbLogs[_0x5653d3(0x2be)]('logs')[_0x5653d3(0x2f1)](_0x15ae35=>{const _0x12cc5a=_0x5653d3,_0x5d4319=_0x15ae35[_0x12cc5a(0x352)]['toLowerCase']();return _0x5d4319[_0x12cc5a(0x2b8)](_0x40b3a3[_0x12cc5a(0x228)]())&&(_0x5d4319[_0x12cc5a(0x2b8)](_0x12cc5a(0x31d))&&_0x5d4319[_0x12cc5a(0x2b8)](_0x12cc5a(0x1f5))||_0x5d4319['includes']('filled')&&_0x5d4319[_0x12cc5a(0x2b8)](_0x12cc5a(0x1f5)));})[_0x5653d3(0x291)](_0x5653d3(0x21d))['value']();return _0x5cde50['forEach'](_0x2f4cf7=>{const _0x3cd44b=_0x5653d3,_0x38da31=_0x2f4cf7[_0x3cd44b(0x352)][_0x3cd44b(0x2b8)]('sell')?_0x3cd44b(0x251):'buy',_0x2291f5=/#([0-9]|\.)+\s/i,_0x21d84d=Number(_0x2291f5['exec'](_0x2f4cf7[_0x3cd44b(0x352)])[0x0][_0x3cd44b(0x250)](0x1)),_0x5a3044=/@([0-9]|\.)+$/i,_0x323fcc=Number(_0x5a3044[_0x3cd44b(0x367)](_0x2f4cf7['event'])[0x0][_0x3cd44b(0x250)](0x1));_0x2964b0[_0x3cd44b(0x338)]({'datetime':_0x2f4cf7[_0x3cd44b(0x21d)],'coin':symbolToCoin(_0x40b3a3),'symbol':_0x40b3a3,'side':_0x38da31,'amount':_0x21d84d,'filled':_0x21d84d,'price':_0x323fcc});}),_0x2964b0;}async function getAllOrders(_0x15cabe,_0x252a59){const _0x163381=_0x1c80fc;let _0x561e33=[];while(_0x252a59<exchange[_0x163381(0x1ed)]()){const _0x345eda=0x1f4;try{const _0x1a05d3=await exchange[_0x163381(0x207)](_0x15cabe,_0x252a59,_0x345eda);if(_0x1a05d3[_0x163381(0x248)])_0x252a59=_0x1a05d3[_0x1a05d3[_0x163381(0x248)]-0x1][_0x163381(0x1e5)]+0x1,_0x561e33=_0x561e33[_0x163381(0x2fe)](_0x1a05d3);else break;}catch(_0x27f56f){await handleError(_0x27f56f,'getAllOrders()',_0x15cabe);}}return _0x561e33;}async function validate24hChanges(){const _0xc6b46e=_0x1c80fc;for(const _0x5aba2b of currentCoins){if(_0x5aba2b[_0xc6b46e(0x2aa)]!=config[_0xc6b46e(0x260)]){let _0x47de82;_0x5aba2b[_0xc6b46e(0x2dc)]?_0x47de82=formatResult((0x1/(global[_0xc6b46e(0x36a)][noslash(_0x5aba2b[_0xc6b46e(0x339)])]/0x64+0x1)-0x1)*0x64,0x3):_0x47de82=global[_0xc6b46e(0x36a)][noslash(_0x5aba2b['symbol'])],_0x47de82<config['change24h']&&(logHistory(_0xc6b46e(0x1d7),_0x5aba2b[_0xc6b46e(0x2aa)]+_0xc6b46e(0x267)+_0x47de82+'%'),logHistory(_0xc6b46e(0x1d7),_0xc6b46e(0x205)),logHistory(_0xc6b46e(0x1d7),_0xc6b46e(0x2fc)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xf77340,_0x2873c1){const _0x2cce52=_0x1c80fc;if(!_0xf77340)return!![];const _0x52e1a6=_0x2873c1[_0x2cce52(0x354)]('.'),_0x16ba65=_0xf77340[_0x2cce52(0x354)]('.');for(var _0x5c3662=0x0;_0x5c3662<_0x16ba65[_0x2cce52(0x248)];_0x5c3662++){const _0x4ad041=~~_0x16ba65[_0x5c3662],_0x31a3dd=~~_0x52e1a6[_0x5c3662];if(_0x4ad041<_0x31a3dd)return!![];if(_0x4ad041>_0x31a3dd)return![];}return![];}async function oneTimeMigration(){const _0x36f25a=_0x1c80fc;let _0x1e4d9e=dbLogs[_0x36f25a(0x2be)](_0x36f25a(0x24f))[_0x36f25a(0x2ab)]();if(isOlderVersion(_0x1e4d9e,_0x36f25a(0x231))){let _0x425c99=[];const _0x15e50f=dbLogs[_0x36f25a(0x2be)](_0x36f25a(0x371))[_0x36f25a(0x2ab)]();_0x15e50f['forEach'](_0x14db43=>{const _0x4a0604=_0x36f25a;_0x425c99[_0x4a0604(0x338)]({'time':_0x14db43[_0x4a0604(0x21d)],'type':_0x14db43['type'],'event':_0x14db43[_0x4a0604(0x352)]});}),dbLogs['get']('logs')[_0x36f25a(0x2cf)](_0x425c99)[_0x36f25a(0x252)]();}let _0x585352=dbConfig['get'](_0x36f25a(0x24f))['value']();if(isOlderVersion(_0x585352,_0x36f25a(0x231))){let _0x3421a8=dbConfig[_0x36f25a(0x2be)](_0x36f25a(0x2db))[_0x36f25a(0x308)]({'botID':botID})[_0x36f25a(0x2ab)]();if(_0x3421a8){let _0x565105=[];_0x3421a8[_0x36f25a(0x2da)][_0x36f25a(0x210)](_0x25abd3=>{const _0x1c58dc=_0x36f25a;_0x565105['push']({'coin':_0x25abd3[_0x1c58dc(0x2aa)],'number':_0x25abd3[_0x1c58dc(0x2b0)],'price':_0x25abd3[_0x1c58dc(0x293)]}),delete _0x25abd3[_0x1c58dc(0x2b0)],delete _0x25abd3[_0x1c58dc(0x293)];});if(_0x565105[_0x36f25a(0x248)]!==0x0)fs[_0x36f25a(0x2e9)](configbackuppath+('starting-balance-'+botID+_0x36f25a(0x27b)),JSON[_0x36f25a(0x211)](_0x565105,null,0x4),function(_0x3c59a7){if(_0x3c59a7){}});const _0x423815=(_0x51161b,_0x9dd328)=>{const _0x44bbe2=_0x36f25a;let _0x526a17=[];_0x9dd328[_0x44bbe2(0x210)](_0x75908a=>{const _0xc3582f=_0x44bbe2,_0x531e12=_0x51161b[_0xc3582f(0x308)](_0x333226=>_0x333226[_0xc3582f(0x2aa)]==_0x75908a[_0xc3582f(0x2aa)]);if(!_0x531e12)_0x526a17[_0xc3582f(0x338)](_0x75908a);});let _0x184501=[];return _0x51161b[_0x44bbe2(0x210)](_0x2517b9=>{const _0x509041=_0x44bbe2,_0x2b4b72=_0x9dd328[_0x509041(0x308)](_0x401ec6=>_0x401ec6[_0x509041(0x2aa)]==_0x2517b9[_0x509041(0x2aa)]);if(!_0x2b4b72||_0x2b4b72[_0x509041(0x202)]==0x0&&_0x2517b9[_0x509041(0x202)]!=0x0)_0x184501[_0x509041(0x338)](_0x2517b9);}),{'missingDay1':_0x526a17,'notInDay2':_0x184501};},_0x3351d6=dbPerformance[_0x36f25a(0x2be)]('data')[_0x36f25a(0x30c)]()[_0x36f25a(0x2ab)]();if(_0x3351d6['length']>0x1){const {missingDay1:_0x60ba94,notInDay2:_0xc69a82}=_0x423815(_0x565105,_0x3351d6[0x1][_0x36f25a(0x305)]);_0x565105=[..._0x565105,..._0x60ba94],_0xc69a82[_0x36f25a(0x210)](_0x2fcf4f=>{const _0x17b232=_0x36f25a;let _0x249ef6=_0x565105[_0x17b232(0x22b)](_0x36e6da=>_0x36e6da[_0x17b232(0x2aa)]==_0x2fcf4f['coin']);_0x249ef6!=-0x1&&_0x565105[_0x17b232(0x28b)](_0x249ef6,0x1);});}_0x565105['sort']((_0x4277c9,_0x1b9198)=>_0x4277c9[_0x36f25a(0x2aa)]>_0x1b9198[_0x36f25a(0x2aa)]?0x1:_0x1b9198[_0x36f25a(0x2aa)]>_0x4277c9[_0x36f25a(0x2aa)]?-0x1:0x0);let _0x378399=[{'date':_0x3421a8[_0x36f25a(0x20a)],'changes':_0x565105}];_0x3351d6[_0x36f25a(0x248)]>0x2&&_0x3351d6[_0x36f25a(0x210)]((_0x4e1891,_0x10056e)=>{const _0x2e6356=_0x36f25a;if(_0x10056e>0x0&&_0x10056e<_0x3351d6[_0x2e6356(0x248)]-0x1){const {missingDay1:_0x1a2b0f,notInDay2:_0x20eb82}=_0x423815(_0x3351d6[_0x10056e][_0x2e6356(0x305)],_0x3351d6[_0x10056e+0x1][_0x2e6356(0x305)]);_0x565105=[],(_0x1a2b0f['length']!=0x0||_0x20eb82[_0x2e6356(0x248)]!=0x0)&&(_0x1a2b0f[_0x2e6356(0x248)]!=0x0&&_0x565105[_0x2e6356(0x338)](..._0x1a2b0f),_0x20eb82[_0x2e6356(0x248)]!=0x0&&(_0x20eb82[_0x2e6356(0x210)](_0x1c1a72=>{const _0x22a16f=_0x2e6356;_0x1c1a72['number']=-_0x1c1a72[_0x22a16f(0x202)];}),_0x565105[_0x2e6356(0x338)](..._0x20eb82)),_0x565105[_0x2e6356(0x33e)]((_0x1abdce,_0x16c6cf)=>_0x1abdce[_0x2e6356(0x2aa)]>_0x16c6cf[_0x2e6356(0x2aa)]?0x1:_0x16c6cf['coin']>_0x1abdce['coin']?-0x1:0x0),_0x378399[_0x2e6356(0x338)]({'date':_0x3351d6[_0x10056e+0x1][_0x2e6356(0x222)],'changes':_0x565105}));}}),dbConfig[_0x36f25a(0x2be)](_0x36f25a(0x2db))['find']({'botID':botID})['assign']({..._0x3421a8,'liquidity':_0x378399})[_0x36f25a(0x252)]();}}if(isOlderVersion(_0x585352,_0x36f25a(0x221))){let _0x28800e=dbConfig[_0x36f25a(0x2be)](_0x36f25a(0x2db))[_0x36f25a(0x308)]({'botID':botID})['value']();if(_0x28800e){const _0x168e41=_0x28800e[_0x36f25a(0x34c)],_0x4fa9f3=_0x168e41?capitalize(_0x168e41):_0x36f25a(0x358);dbConfig[_0x36f25a(0x2be)](_0x36f25a(0x2db))[_0x36f25a(0x308)]({'botID':botID})['assign']({'exchange':_0x4fa9f3})[_0x36f25a(0x252)]();}}let _0x2dffe9=dbPerformance['get'](_0x36f25a(0x24f))['value']();isOlderVersion(_0x2dffe9,_0x36f25a(0x231))&&setStartDatePerformance();let _0x3da9d6=dbCoinResults[_0x36f25a(0x2be)](_0x36f25a(0x24f))[_0x36f25a(0x2ab)]();if(isOlderVersion(_0x3da9d6,'2.5.0')){let _0x581b3d=dbCoinResults[_0x36f25a(0x2be)](_0x36f25a(0x305))[_0x36f25a(0x2ab)]();if(_0x581b3d[_0x36f25a(0x248)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3b045a=_0x1c80fc;dbConfig[_0x3b045a(0x303)](_0x3b045a(0x24f),serverversion)[_0x3b045a(0x252)](),dbPerformance[_0x3b045a(0x303)](_0x3b045a(0x24f),serverversion)['write'](),dbLogs[_0x3b045a(0x303)]('version',serverversion)['write'](),dbCoinResults[_0x3b045a(0x303)]('version',serverversion)[_0x3b045a(0x252)]();}function getConfiguration(_0x50645f){const _0xa2df9f=_0x1c80fc;let _0x197cdb=dbConfig[_0xa2df9f(0x2be)](_0xa2df9f(0x2db))[_0xa2df9f(0x308)]({'botID':_0x50645f})[_0xa2df9f(0x2ab)]();if(_0x197cdb){let _0xf4e0b1=![];typeof _0x197cdb[_0xa2df9f(0x254)]==_0xa2df9f(0x2eb)&&(_0x197cdb={..._0x197cdb,'threshold':Number(_0x197cdb[_0xa2df9f(0x254)])},_0xf4e0b1=!![]),_0x197cdb[_0xa2df9f(0x22c)]==undefined&&(_0x197cdb={..._0x197cdb,'change24h':-0x14},_0xf4e0b1=!![]),_0x197cdb[_0xa2df9f(0x232)]==undefined&&(_0x197cdb={..._0x197cdb,'fiat':_0xa2df9f(0x2ad)},_0xf4e0b1=!![]),_0x197cdb[_0xa2df9f(0x23f)]==undefined&&(_0x197cdb={..._0x197cdb,'onepagemode':settings['onepagemode']},_0xf4e0b1=!![]),_0x197cdb['colorscheme']==undefined&&(_0x197cdb={..._0x197cdb,'colorscheme':'red_yellow_blue'},_0xf4e0b1=!![]),_0x197cdb[_0xa2df9f(0x29c)]==undefined&&(_0x197cdb={..._0x197cdb,'autoliquidity':!![]},_0xf4e0b1=!![]),_0xf4e0b1&&(_0x197cdb={'botID':_0x197cdb[_0xa2df9f(0x1d3)],'exchange':_0x197cdb['exchange'],'apiKey':_0x197cdb[_0xa2df9f(0x318)],'apiSecret':_0x197cdb[_0xa2df9f(0x2fa)],'apiPassword':_0x197cdb[_0xa2df9f(0x245)],'basecoin':_0x197cdb[_0xa2df9f(0x260)],'botname':_0x197cdb[_0xa2df9f(0x324)],'showname':_0x197cdb[_0xa2df9f(0x359)],'threshold':_0x197cdb[_0xa2df9f(0x254)],'ordertype':_0x197cdb[_0xa2df9f(0x362)],'timeout':_0x197cdb['timeout'],'fiat':_0x197cdb[_0xa2df9f(0x232)],'startdate':_0x197cdb['startdate'],'recreate':_0x197cdb[_0xa2df9f(0x299)],'timeshift':_0x197cdb[_0xa2df9f(0x27d)],'onepagemode':_0x197cdb[_0xa2df9f(0x23f)],'headless':_0x197cdb[_0xa2df9f(0x2b9)],'cooldown':_0x197cdb[_0xa2df9f(0x316)],'change24h':_0x197cdb[_0xa2df9f(0x22c)],'emojibuy':_0x197cdb[_0xa2df9f(0x2d9)],'emojisell':_0x197cdb[_0xa2df9f(0x373)],'colorscheme':_0x197cdb[_0xa2df9f(0x25b)],'portfolio':_0x197cdb['portfolio'],'autoliquidity':_0x197cdb[_0xa2df9f(0x29c)],'liquidity':_0x197cdb[_0xa2df9f(0x1db)],'openOrders':_0x197cdb[_0xa2df9f(0x213)]},dbConfig[_0xa2df9f(0x2be)]('bot')['remove']()['write'](),dbConfig[_0xa2df9f(0x2be)](_0xa2df9f(0x2db))[_0xa2df9f(0x338)](_0x197cdb)[_0xa2df9f(0x252)]());}else _0x197cdb={'botID':_0x50645f,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xa2df9f(0x233)+_0x50645f,'showname':![],'threshold':0x3,'ordertype':_0xa2df9f(0x31d),'timeout':0x14,'fiat':_0xa2df9f(0x2ad),'startdate':getDate(),'recreate':![],'timeshift':settings[_0xa2df9f(0x27d)],'onepagemode':settings[_0xa2df9f(0x23f)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xa2df9f(0x342),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x197cdb;}function emittedConfiguration(){const _0x21f0ba=_0x1c80fc;let _0x1e9dfe;if(config[_0x21f0ba(0x318)]=='')_0x1e9dfe={...config,'configstate':'initial'};else config[_0x21f0ba(0x318)]==_0x21f0ba(0x323)?_0x1e9dfe={...config,'configstate':_0x21f0ba(0x317)}:(_0x1e9dfe={...config,'apiKey':_0x21f0ba(0x25e),'apiSecret':'************'},config['apiPassword']&&(_0x1e9dfe['apiPassword']=_0x21f0ba(0x25e)));return _0x1e9dfe;}function getSettings(){const _0x7da12f=_0x1c80fc;return dbSettings[_0x7da12f(0x2be)](_0x7da12f(0x2bb))[_0x7da12f(0x2ab)]();}function getSecure(){const _0x265625=_0x1c80fc;return dbSecure[_0x265625(0x2be)](_0x265625(0x370))[_0x265625(0x2ab)]()||{};}function updateTimeshift(_0x40bac4){const _0x11bd83=_0x1c80fc;let _0x2ff135=dbConfig[_0x11bd83(0x2be)]('bot')[_0x11bd83(0x308)]({'botID':botID})['value']();_0x2ff135&&dbConfig[_0x11bd83(0x2be)](_0x11bd83(0x2db))[_0x11bd83(0x308)]({'botID':botID})[_0x11bd83(0x2cf)]({'timeshift':_0x40bac4})[_0x11bd83(0x252)](),config[_0x11bd83(0x27d)]=_0x40bac4,proxyEmit(_0x11bd83(0x235),emittedConfiguration());}function updateOnepagemode(_0x576976){const _0x1ac14b=_0x1c80fc;let _0x2e8887=dbConfig[_0x1ac14b(0x2be)](_0x1ac14b(0x2db))[_0x1ac14b(0x308)]({'botID':botID})[_0x1ac14b(0x2ab)]();_0x2e8887&&dbConfig[_0x1ac14b(0x2be)](_0x1ac14b(0x2db))[_0x1ac14b(0x308)]({'botID':botID})['assign']({'onepagemode':_0x576976})[_0x1ac14b(0x252)](),config[_0x1ac14b(0x23f)]=_0x576976,proxyEmit(_0x1ac14b(0x235),emittedConfiguration());}async function storeConfiguration(_0x3e0542){const _0x2b0ca9=_0x1c80fc;logger['debug'](_0x2b0ca9(0x226));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2b0ca9(0x214)](_0x2b0ca9(0x2f3));let _0x4f11d7=[],_0x4e8954=![],_0x4924dc=![],_0x24528b=[];_0x3e0542[_0x2b0ca9(0x2da)][_0x2b0ca9(0x210)](_0x241b09=>{const _0x3a8dce=_0x2b0ca9;if(!_0x241b09['excluded']&&_0x241b09['coin']!=_0x3e0542[_0x3a8dce(0x260)])_0x24528b[_0x3a8dce(0x338)](_0x241b09[_0x3a8dce(0x339)]);}),_0x24528b['forEach'](_0x21fb7f=>{const _0x213645=_0x2b0ca9,_0x102efc=watchedSymbols['includes'](_0x21fb7f);!_0x102efc&&_0x4f11d7[_0x213645(0x338)](_0x21fb7f);}),_0x24528b[_0x2b0ca9(0x210)](_0x29e346=>{const _0x3ebb9b=_0x2b0ca9,_0x163830=currentCoins[_0x3ebb9b(0x308)](_0x259ced=>_0x259ced[_0x3ebb9b(0x339)]==_0x29e346);!_0x163830&&(_0x4e8954=!![]);}),currentCoins[_0x2b0ca9(0x210)](_0x3bf017=>{const _0x4907e5=_0x2b0ca9;if(_0x3bf017['coin']!=config['basecoin']){const _0x1ba0f1=_0x24528b[_0x4907e5(0x308)](_0x2e2432=>_0x2e2432==_0x3bf017[_0x4907e5(0x339)]);!_0x1ba0f1&&(_0x4e8954=!![]);}}),_0x3e0542[_0x2b0ca9(0x2da)][_0x2b0ca9(0x210)](_0x13691f=>{const _0x467de7=_0x2b0ca9,_0x52af97=config[_0x467de7(0x2da)][_0x467de7(0x308)](_0x172196=>_0x172196[_0x467de7(0x2aa)]==_0x13691f[_0x467de7(0x2aa)]);if(_0x52af97&&_0x13691f[_0x467de7(0x343)]!=_0x52af97[_0x467de7(0x343)])_0x4924dc=!![];});let _0x315920=dbConfig[_0x2b0ca9(0x2be)](_0x2b0ca9(0x2db))[_0x2b0ca9(0x308)]({'botID':botID})['value']();_0x3e0542={..._0x3e0542,'apiKey':crypt['decrypt'](secure[_0x2b0ca9(0x296)],_0x3e0542['apiKey'])['message'],'apiSecret':crypt[_0x2b0ca9(0x24d)](secure[_0x2b0ca9(0x296)],_0x3e0542[_0x2b0ca9(0x2fa)])[_0x2b0ca9(0x274)]};_0x3e0542[_0x2b0ca9(0x245)]&&(_0x3e0542[_0x2b0ca9(0x245)]=crypt[_0x2b0ca9(0x24d)](secure['privateKey'],_0x3e0542['apiPassword'])[_0x2b0ca9(0x274)]);let _0x345f3e=![];if(_0x315920){_0x3e0542['apiKey']==_0x2b0ca9(0x25e)?_0x3e0542[_0x2b0ca9(0x318)]=config['apiKey']:_0x345f3e=!![];_0x3e0542['apiSecret']==_0x2b0ca9(0x25e)?_0x3e0542[_0x2b0ca9(0x2fa)]=config[_0x2b0ca9(0x2fa)]:_0x345f3e=!![];if(_0x3e0542['apiPassword']==_0x2b0ca9(0x25e))_0x3e0542[_0x2b0ca9(0x245)]=config[_0x2b0ca9(0x245)];else{if(_0x3e0542[_0x2b0ca9(0x245)])_0x345f3e=!![];}dbConfig[_0x2b0ca9(0x2be)](_0x2b0ca9(0x2db))[_0x2b0ca9(0x308)]({'botID':botID})[_0x2b0ca9(0x2cf)](_0x3e0542)['write']();}else dbConfig['get'](_0x2b0ca9(0x2db))[_0x2b0ca9(0x338)](_0x3e0542)['write'](),_0x345f3e=!![],process[_0x2b0ca9(0x30a)]({'status':_0x2b0ca9(0x29e),'live':'running'},_0x1d1871=>{});process[_0x2b0ca9(0x30a)]({'botname':_0x3e0542[_0x2b0ca9(0x324)]},_0x1fc003=>{}),updateBotManager(),config={..._0x3e0542},proxyEmit(_0x2b0ca9(0x270)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x345f3e)await reset(_0x4f11d7,!![]);else _0x4e8954||_0x4924dc?await reset(_0x4f11d7,![]):getBalances();blockTransactionDetection=![],logger[_0x2b0ca9(0x214)](_0x2b0ca9(0x2b1));}async function storeHeadless(_0x2fd546){const _0x296bc4=_0x1c80fc,_0x31c36d={...config,'headless':_0x2fd546[_0x296bc4(0x2b9)]};let _0x2f9121=dbConfig[_0x296bc4(0x2be)](_0x296bc4(0x2db))[_0x296bc4(0x308)]({'botID':botID})[_0x296bc4(0x2ab)]();_0x2f9121&&dbConfig[_0x296bc4(0x2be)](_0x296bc4(0x2db))['find']({'botID':botID})['assign'](_0x31c36d)[_0x296bc4(0x252)](),config={..._0x31c36d},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5eeaac){const _0x12c663=_0x1c80fc,_0xcd9974={...config,'fiat':_0x5eeaac};let _0xf331ba=dbConfig[_0x12c663(0x2be)](_0x12c663(0x2db))[_0x12c663(0x308)]({'botID':botID})[_0x12c663(0x2ab)]();_0xf331ba&&dbConfig[_0x12c663(0x2be)]('bot')['find']({'botID':botID})['assign'](_0xcd9974)[_0x12c663(0x252)](),config={..._0xcd9974},proxyEmit(_0x12c663(0x235),emittedConfiguration());}function resetHistory(){const _0x3b3e44=_0x1c80fc;logger[_0x3b3e44(0x35d)]('Resetting\x20bot\x20history');try{if(fs[_0x3b3e44(0x2c9)](path[_0x3b3e44(0x1f8)](configpath,_0x3b3e44(0x2e2)+botID+'-events.json')))fs[_0x3b3e44(0x2ce)](path[_0x3b3e44(0x1f8)](configpath,_0x3b3e44(0x2e2)+botID+'-events.json'));if(fs['existsSync'](path[_0x3b3e44(0x1f8)](configpath,'bot-'+botID+_0x3b3e44(0x295))))fs[_0x3b3e44(0x2ce)](path[_0x3b3e44(0x1f8)](configpath,'bot-'+botID+_0x3b3e44(0x295)));if(fs[_0x3b3e44(0x2c9)](path[_0x3b3e44(0x1f8)](configpath,'bot-'+botID+'-results.json')))fs[_0x3b3e44(0x2ce)](path[_0x3b3e44(0x1f8)](configpath,_0x3b3e44(0x2e2)+botID+_0x3b3e44(0x2c4)));}catch(_0x246430){if(_0x246430)logger[_0x3b3e44(0x35d)](_0x3b3e44(0x325),_0x246430);}const _0x432bcb=getDate();let _0xac77df=[];currentCoins['forEach'](_0x4d8621=>{const _0x144f46=_0x3b3e44;_0xac77df['push']({'coin':_0x4d8621[_0x144f46(0x2aa)],'number':_0x4d8621['number'],'price':_0x4d8621[_0x144f46(0x223)]});});let _0x4a4d3b=dbConfig[_0x3b3e44(0x2be)]('bot')[_0x3b3e44(0x308)]({'botID':botID})['value']();_0x4a4d3b&&(dbConfig[_0x3b3e44(0x2be)]('bot')[_0x3b3e44(0x308)]({'botID':botID})['assign']({'liquidity':[{'date':_0x432bcb,'changes':_0xac77df}]})[_0x3b3e44(0x252)](),config[_0x3b3e44(0x1db)]=[]),process[_0x3b3e44(0x30a)]({'stop':_0x3b3e44(0x203)},_0x36a008=>{});}function noslash(_0x21a11){return _0x21a11['replace']('/','');}function updateHighestFee(_0x469e75){const _0x40a19f=_0x1c80fc;if(_0x469e75['reverse']){let _0x126364={'filled':_0x469e75[_0x40a19f(0x27f)]*_0x469e75['price'],'amount':_0x469e75[_0x40a19f(0x27f)]*_0x469e75['price'],'side':_0x469e75[_0x40a19f(0x288)]=='sell'?_0x40a19f(0x1dd):'sell','price':0x1/_0x469e75[_0x40a19f(0x372)]};_0x469e75={..._0x469e75,..._0x126364};}const _0x11a001=defaultFee*_0x469e75['filled']*_0x469e75['price'];lastFees[_0x40a19f(0x268)][_0x40a19f(0x248)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x40a19f(0x268)][_0x40a19f(0x338)](_0x11a001),lastFees[_0x40a19f(0x24b)]=Math['max'](...lastFees[_0x40a19f(0x268)]);}async function updateNumberCoinsCcxt(_0x125826){const _0x598336=_0x1c80fc;logger[_0x598336(0x214)](_0x598336(0x2f7)+_0x125826[_0x598336(0x339)]+_0x598336(0x28e)+_0x125826['status']+_0x598336(0x28e)+_0x125826['id']);let _0x25b57f=_0x125826[_0x598336(0x240)],_0x4f40da=![];currentCoins[_0x598336(0x210)](_0x11669f=>{const _0x55c41c=_0x598336;_0x11669f[_0x55c41c(0x339)]==_0x125826[_0x55c41c(0x339)]&&(_0x4f40da=!![]);});if(!_0x4f40da)return;const _0x642c4b=currentCoins[_0x598336(0x308)](_0x26f78c=>_0x26f78c[_0x598336(0x339)]==_0x125826[_0x598336(0x339)]),_0x3f9832=_0x4e0111=>{if(_0x642c4b)_0x642c4b['orderstatus']=_0x4e0111;};if(_0x25b57f=='open')_0x3f9832(_0x598336(0x212));else{if(_0x25b57f==_0x598336(0x247)){_0x3f9832(_0x598336(0x247));const _0x38f9c9=await getCoins();[currentCoins,currentCoinsAll]=_0x38f9c9,await getOpenOrders(),handleOpenOrders();}else{if(_0x25b57f==_0x598336(0x1da)){logger[_0x598336(0x214)](_0x598336(0x35e)+_0x125826[_0x598336(0x339)]+_0x598336(0x28e)+_0x125826['filled']+_0x598336(0x28e)+_0x125826['id']);let _0x23f130=![];if(lastOrders)for(const _0x47fef9 of lastOrders){const _0x128e27=0xc8,_0x144fdd=0x1388;let _0x635f9a=0x0;while(!_0x47fef9[_0x598336(0x345)]&&_0x635f9a*_0x128e27<_0x144fdd){_0x635f9a++,await sleep(_0x128e27);}if(_0x635f9a>0x0)logger[_0x598336(0x214)](_0x598336(0x273)+_0x635f9a*_0x128e27/0x3e8+_0x598336(0x2cb));if(_0x47fef9[_0x598336(0x345)]==_0x125826['id']){logger['debug'](_0x598336(0x1d8)+_0x125826['id']),_0x23f130=!![];if(_0x47fef9[_0x598336(0x27f)]==0x0){logger[_0x598336(0x214)](_0x598336(0x34e)+_0x125826['id']);if(_0x125826[_0x598336(0x1e6)])_0x47fef9[_0x598336(0x372)]=_0x125826[_0x598336(0x1e6)];else{if(_0x125826[_0x598336(0x372)])_0x47fef9[_0x598336(0x372)]=_0x125826[_0x598336(0x372)];else{}}_0x47fef9[_0x598336(0x27f)]=_0x125826['filled'],updateHighestFee(_0x47fef9),_0x3f9832(_0x598336(0x27f)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x1a2b13=await getCoins();[currentCoins,currentCoinsAll]=_0x1a2b13;}_0x47fef9[_0x598336(0x301)]={'currency':_0x125826[_0x598336(0x301)]?_0x125826['fee']['currency']:null,'cost':_0x125826[_0x598336(0x301)]?_0x125826[_0x598336(0x301)][_0x598336(0x2f5)]:0x0},await updateCoinResults(_0x47fef9);}}}if(!_0x23f130){logger[_0x598336(0x214)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x125826['id']),_0x3f9832('filled');const _0x34dd0b=await getCoins();[currentCoins,currentCoinsAll]=_0x34dd0b,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4964b8=JSON[_0x598336(0x1d6)](lastBalances[_0x598336(0x2da)]);const _0x337bf9=_0x4964b8['find'](_0x142fd6=>_0x142fd6[_0x598336(0x339)]==_0x125826['symbol']);if(_0x337bf9){if(_0x25b57f==_0x598336(0x212))_0x337bf9[_0x598336(0x331)]=_0x337bf9[_0x598336(0x331)]==_0x598336(0x27f)?_0x598336(0x27f):_0x598336(0x212);else{if(_0x25b57f==_0x598336(0x247))_0x337bf9[_0x598336(0x331)]=_0x337bf9['orderstatus']==_0x598336(0x27f)?_0x598336(0x27f):_0x598336(0x247);else _0x25b57f==_0x598336(0x1da)&&(_0x337bf9[_0x598336(0x331)]=_0x598336(0x27f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x598336(0x211)](_0x4964b8)},proxyEmit(_0x598336(0x2f4),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x58d78b=![];currentCoins['forEach'](_0x418ae5=>{const _0x2e6dca=_0xdd2a;_0x58d78b=allOpenOrders[_0x2e6dca(0x308)](_0x549835=>_0x549835['symbol']==_0x418ae5['symbol']),_0x418ae5[_0x2e6dca(0x331)]=_0x58d78b?_0x2e6dca(0x212):'none';});}async function getCoins(_0x1a1351=!![],_0x574deb=config[_0x1c80fc(0x260)]){const _0x2f5141=_0x1c80fc;let _0x21e9f5,_0x255f6d=[],_0x26f32a=[],_0x5726a1=[],_0x34ddfe=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x21e9f5=await exchange[_0x2f5141(0x2ee)](),mybalances=_0x21e9f5[_0x2f5141(0x306)];for(const [_0x41b3e5,_0x3c4514]of Object[_0x2f5141(0x283)](mybalances)){_0x34ddfe['push'](_0x41b3e5);}if(_0x574deb=='')for(const [_0xff529e,_0x60025]of Object[_0x2f5141(0x283)](mybalances)){_0x60025!=0x0&&_0x26f32a[_0x2f5141(0x338)]({'coin':_0xff529e});}else{let _0x4082fa=![];for(const [_0x2e2a12,_0x5e765d]of Object[_0x2f5141(0x283)](mybalances)){if(_0x34ddfe[_0x2f5141(0x2b8)](_0x2e2a12)){const _0x50bac5=config['portfolio'][_0x2f5141(0x308)](_0x3441b4=>_0x3441b4['coin']==_0x2e2a12),_0x39ba18=_0x2e2a12+'/'+_0x574deb,_0x175fec=_0x574deb+'/'+_0x2e2a12,_0xa66108=currentCoins[_0x2f5141(0x308)](_0x4bafbf=>_0x4bafbf[_0x2f5141(0x2aa)]==_0x2e2a12);_0x4082fa=![];if((_0x5e765d!=0x0||_0x50bac5)&&(allSymbols[_0x2f5141(0x2b8)](_0x39ba18)||_0x2e2a12==_0x574deb))_0x2e2a12!=_0x574deb&&_0x255f6d[_0x2f5141(0x338)](_0x39ba18),_0x26f32a['push']({'coin':_0x2e2a12,'symbol':_0x39ba18,'reverse':![],'number':Math[_0x2f5141(0x229)](_0x5e765d+(_0x50bac5&&_0x50bac5[_0x2f5141(0x343)]||0x0),0x0),'orderstatus':_0xa66108?_0xa66108[_0x2f5141(0x331)]:_0x2f5141(0x2c7)});else(_0x5e765d!=0x0||_0x50bac5)&&allSymbols[_0x2f5141(0x2b8)](_0x175fec)&&(_0x2e2a12!=_0x574deb&&_0x255f6d[_0x2f5141(0x338)](_0x175fec),_0x26f32a['push']({'coin':_0x2e2a12,'symbol':_0x175fec,'reverse':!![],'number':Math[_0x2f5141(0x229)](_0x5e765d+(_0x50bac5&&_0x50bac5[_0x2f5141(0x343)]||0x0),0x0),'orderstatus':_0xa66108?_0xa66108[_0x2f5141(0x331)]:_0x2f5141(0x2c7)}));}}}}catch(_0x87057d){if(!_0x1a1351)handleErrorNoStop(_0x87057d,'getCoins()');else await handleError(_0x87057d,_0x2f5141(0x230));}return _0x5726a1=cloneDeep(_0x26f32a),_0x26f32a=_0x26f32a[_0x2f5141(0x2f1)](_0x285e9a=>{const _0x33517a=_0x2f5141,_0x2f8651=config[_0x33517a(0x2da)][_0x33517a(0x308)](_0x1d862a=>_0x1d862a[_0x33517a(0x2aa)]==_0x285e9a[_0x33517a(0x2aa)]);return _0x2f8651&&!_0x2f8651['excluded'];}),[_0x26f32a,_0x5726a1];}async function getCoinNumber(_0x591a29){const _0x4e8784=_0x1c80fc;let _0x1d6c92;try{const _0x339188=await exchange[_0x4e8784(0x2ee)]();_0x1d6c92=_0x339188[_0x4e8784(0x306)][_0x591a29];}catch(_0x22201e){await handleError(_0x22201e,_0x4e8784(0x335));}return _0x1d6c92;}async function getOpenOrders(){const _0xd088e8=_0x1c80fc;let _0x2dd0a4;allOpenOrders=[];try{for(const _0x51cfff of config[_0xd088e8(0x2da)]){!_0x51cfff[_0xd088e8(0x2a7)]&&_0x51cfff['coin']!=config[_0xd088e8(0x260)]&&(_0x2dd0a4=await exchange[_0xd088e8(0x238)](_0x51cfff[_0xd088e8(0x339)]),_0x2dd0a4[_0xd088e8(0x248)]>0x0&&allOpenOrders[_0xd088e8(0x338)](_0x2dd0a4[0x0]));}}catch(_0x1c4935){await handleError(_0x1c4935,'getOpenOrders()');}}async function handleOpenOrders(_0x360bea=0x0){const _0x33c3d4=_0x1c80fc;allOpenOrders[_0x33c3d4(0x248)]==0x0&&lockOrders==ORDERS[_0x33c3d4(0x322)]&&allOrdersPlaced&&(_0x360bea==0x0?(logger[_0x33c3d4(0x214)](_0x33c3d4(0x1d4)),_0x360bea++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x33c3d4(0x241)),validateOrders(_0x33c3d4(0x2ba))));}async function testAPI(_0x2e8e5a){const _0x2b941f=_0x1c80fc,_0x581ba9=ccxt[_0x2b941f(0x315)][_0x2e8e5a[_0x2b941f(0x34c)][_0x2b941f(0x228)]()],_0xe41a54=new _0x581ba9({'apiKey':_0x2e8e5a['apiKey'],'secret':_0x2e8e5a[_0x2b941f(0x2fa)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2b941f(0x1fc)}});if(_0x2e8e5a[_0x2b941f(0x245)])_0xe41a54[_0x2b941f(0x2c8)]=_0x2e8e5a[_0x2b941f(0x245)];try{await _0xe41a54[_0x2b941f(0x35a)]();}catch(_0x1df6f3){throw _0x1df6f3;}}function cloneDeep(_0x3398a0){const _0x395f0a=_0x1c80fc;return JSON[_0x395f0a(0x1d6)](JSON[_0x395f0a(0x211)](_0x3398a0));}async function getPortfolio(_0x205751){const _0x24835c=_0x1c80fc;let _0x5b9a01=[],_0x2d05c1=[],_0x16c2b7=[],_0x2ad61d;if(_0x205751[_0x24835c(0x318)]!=='************'||_0x205751[_0x24835c(0x2fa)]!==_0x24835c(0x25e)||_0x205751[_0x24835c(0x245)]&&_0x205751[_0x24835c(0x245)]!==_0x24835c(0x25e)){if(config[_0x24835c(0x34c)]){if(_0x205751[_0x24835c(0x318)]==_0x24835c(0x25e))_0x205751[_0x24835c(0x318)]=config[_0x24835c(0x318)];if(_0x205751[_0x24835c(0x2fa)]==_0x24835c(0x25e))_0x205751['apiSecret']=config[_0x24835c(0x2fa)];if(_0x205751['apiPassword']=='************')_0x205751[_0x24835c(0x245)]=config[_0x24835c(0x245)];try{await testAPI(_0x205751);}catch(_0x4d7fec){if(_0x4d7fec['toString']()[_0x24835c(0x2b8)](_0x24835c(0x286))){logger[_0x24835c(0x214)](_0x24835c(0x341)),proxyEmit(_0x24835c(0x2da),![]);return;}else{handleError(_0x4d7fec,_0x24835c(0x1e8));return;}}}await initExchange(_0x205751[_0x24835c(0x34c)],_0x205751[_0x24835c(0x318)],_0x205751[_0x24835c(0x2fa)],_0x205751[_0x24835c(0x245)]);try{await loadSymbols();}catch(_0x1823e1){if(_0x1823e1[_0x24835c(0x26e)]()['includes'](_0x24835c(0x286))){proxyEmit('portfolio',![]);return;}else{handleError(_0x1823e1,_0x24835c(0x337));return;}}const _0x183e36=await getCoins(![],_0x205751[_0x24835c(0x260)]);_0x16c2b7=cloneDeep(_0x183e36[0x1]);}else _0x16c2b7=cloneDeep(currentCoinsAll);if(_0x205751['basecoin']=='')proxyEmit(_0x24835c(0x2da),_0x16c2b7);else{_0x16c2b7['forEach'](_0xfd665=>{const _0x10e1bd=_0x24835c;if(_0xfd665[_0x10e1bd(0x2aa)]!=_0x205751[_0x10e1bd(0x260)])_0x5b9a01['push'](_0xfd665['symbol']);});if(_0x5b9a01[_0x24835c(0x248)]==0x0)logHistory(_0x24835c(0x1d7),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x2d05c1=await exchange['fetchTickers'](_0x5b9a01);}catch(_0x5dba77){if(_0x5dba77['toString']()['includes'](_0x24835c(0x286))){proxyEmit('portfolio',![]);return;}else{handleError(_0x5dba77,_0x24835c(0x2a4));return;}}_0x16c2b7[_0x24835c(0x210)](_0x28a16a=>{const _0x36c0a5=_0x24835c;_0x28a16a[_0x36c0a5(0x2aa)]!=_0x205751['basecoin']?_0x2ad61d=_0x28a16a[_0x36c0a5(0x2dc)]?0x1/_0x2d05c1[_0x28a16a['symbol']][_0x36c0a5(0x223)]:_0x2d05c1[_0x28a16a['symbol']][_0x36c0a5(0x223)]:_0x2ad61d=0x1,_0x28a16a[_0x36c0a5(0x372)]=formatResult(_0x2ad61d,0x8);}),proxyEmit(_0x24835c(0x2da),_0x16c2b7);}}}function truncateTradeAmount(_0x468a89,_0x4cef95){const _0x3062c7=_0x1c80fc;let _0x46585a=0x0;try{_0x46585a=exchange[_0x3062c7(0x2c0)](_0x468a89,_0x4cef95);}catch(_0x383ce1){}return _0x46585a;}function checkMinimums(_0x16f93e){const _0x56d4ad=_0x1c80fc;let _0x3fd69f=!![];const _0x5552bf=!_0x16f93e[_0x56d4ad(0x2dc)]?markets[_0x16f93e[_0x56d4ad(0x339)]][_0x56d4ad(0x326)]['amount'][_0x56d4ad(0x271)]:markets[_0x16f93e[_0x56d4ad(0x339)]]['limits'][_0x56d4ad(0x2f5)]['min'],_0x3f4f97=!_0x16f93e[_0x56d4ad(0x2dc)]?markets[_0x16f93e[_0x56d4ad(0x339)]][_0x56d4ad(0x326)][_0x56d4ad(0x2f5)][_0x56d4ad(0x271)]:markets[_0x16f93e[_0x56d4ad(0x339)]]['limits']['amount'][_0x56d4ad(0x271)],_0x51ff55=truncateTradeAmount(_0x16f93e[_0x56d4ad(0x339)],_0x16f93e[_0x56d4ad(0x22e)]);_0x16f93e['trade']=_0x51ff55;if(Math[_0x56d4ad(0x2e3)](_0x51ff55)<_0x5552bf)_0x3fd69f=![];if(Math[_0x56d4ad(0x2e3)](_0x51ff55)*_0x16f93e[_0x56d4ad(0x223)]<_0x3f4f97)_0x3fd69f=![];if(_0x16f93e['side']==_0x56d4ad(0x251)){let _0x26a642=config['portfolio'][_0x56d4ad(0x308)](_0xd69350=>_0xd69350[_0x56d4ad(0x2aa)]==_0x16f93e[_0x56d4ad(0x2aa)]);if(_0x26a642['offset']>0x0){if(Math[_0x56d4ad(0x2e3)](_0x51ff55)>_0x16f93e[_0x56d4ad(0x202)]-_0x26a642['offset'])_0x3fd69f=![];}else{if(Math['abs'](_0x51ff55)>_0x16f93e[_0x56d4ad(0x202)])_0x3fd69f=![];}}if(_0x16f93e['side']==_0x56d4ad(0x1dd)){let _0x4f3adc=config[_0x56d4ad(0x2da)][_0x56d4ad(0x308)](_0x3c13fa=>_0x3c13fa[_0x56d4ad(0x2aa)]==config[_0x56d4ad(0x260)]),_0x212bc1=currentCoins['find'](_0x50a0b5=>_0x50a0b5[_0x56d4ad(0x2aa)]==config[_0x56d4ad(0x260)]);if(_0x4f3adc[_0x56d4ad(0x343)]>0x0){if(Math['abs'](_0x51ff55)*_0x16f93e[_0x56d4ad(0x223)]>_0x212bc1['number']-_0x4f3adc[_0x56d4ad(0x343)])_0x3fd69f=![];}else{if(Math['abs'](_0x51ff55)*_0x16f93e[_0x56d4ad(0x223)]>_0x212bc1[_0x56d4ad(0x202)])_0x3fd69f=![];}}return _0x3fd69f;}async function getBalances(_0x4016a2=!![]){const _0x4105bf=_0x1c80fc;let _0x347e2c=0x0,_0x4cd3f8;const _0x550e33=config[_0x4105bf(0x254)];if(config['headless']&&config[_0x4105bf(0x22c)]<0x0)await validate24hChanges();currentCoins[_0x4105bf(0x210)](_0x53e548=>{const _0x11c9cd=_0x4105bf;if(_0x53e548['coin']!=config[_0x11c9cd(0x260)]){let _0xfdcd0f=global[_0x11c9cd(0x361)][noslash(_0x53e548[_0x11c9cd(0x339)])];_0x4cd3f8=_0x53e548[_0x11c9cd(0x2dc)]?0x1/_0xfdcd0f:_0xfdcd0f;}else _0x4cd3f8=0x1;let _0x3c09e3=_0x53e548[_0x11c9cd(0x202)]*_0x4cd3f8;_0x347e2c+=_0x3c09e3,_0x53e548[_0x11c9cd(0x223)]=formatResult(Number(_0x4cd3f8),0x8),_0x53e548[_0x11c9cd(0x2ab)]=_0x3c09e3;}),currentCoins[_0x4105bf(0x210)](_0x11bc26=>{const _0x1f040e=_0x4105bf;let _0xb36e3=config['portfolio']['find'](_0x472b9d=>_0x472b9d[_0x1f040e(0x2aa)]==_0x11bc26[_0x1f040e(0x2aa)]),_0x387e76=Number(_0xb36e3[_0x1f040e(0x26b)]),_0x24e7d4=_0x11bc26[_0x1f040e(0x2ab)]/_0x347e2c*0x64,_0xd1036f=_0x387e76*_0x347e2c/0x64/_0x11bc26[_0x1f040e(0x223)]-_0x11bc26[_0x1f040e(0x202)];_0x11bc26[_0x1f040e(0x26b)]=formatResult(_0x24e7d4,0x3),_0x11bc26[_0x1f040e(0x20f)]=formatResult(_0x387e76,0x3),_0x11bc26[_0x1f040e(0x22e)]=formatResult(_0xd1036f,0x8),_0x11bc26[_0x1f040e(0x288)]='',_0x11bc26[_0x1f040e(0x280)]=![];if(_0x11bc26[_0x1f040e(0x2aa)]!=config[_0x1f040e(0x260)]){if(_0x11bc26[_0x1f040e(0x26b)]>_0x387e76)_0x11bc26['side']=_0x1f040e(0x251),_0x11bc26[_0x1f040e(0x280)]=checkMinimums(_0x11bc26);else _0x11bc26['distribution']<_0x387e76&&(_0x11bc26['side']='buy',_0x11bc26[_0x1f040e(0x280)]=checkMinimums(_0x11bc26));}_0x11bc26[_0x1f040e(0x330)]=_0x11bc26[_0x1f040e(0x26b)]/_0x11bc26[_0x1f040e(0x20f)]-0x1;if(_0x11bc26[_0x1f040e(0x331)]==_0x1f040e(0x27f)||_0x11bc26['orderstatus']=='canceled')_0x11bc26[_0x1f040e(0x331)]='none';}),currentCoins[_0x4105bf(0x33e)]((_0x26a308,_0x24c393)=>_0x26a308[_0x4105bf(0x330)]<_0x24c393[_0x4105bf(0x330)]?0x1:_0x24c393['delta']<_0x26a308[_0x4105bf(0x330)]?-0x1:0x0);const _0x1f6360=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1f6360[_0x4105bf(0x320)],'usd':_0x1f6360[_0x4105bf(0x289)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x550e33},proxyEmit(_0x4105bf(0x2f4),{'serverversion':serverversion,'balances':lastBalances});if(_0x4016a2){if(config[_0x4105bf(0x2b9)])headlessMode({'portfolio':currentCoins,'threshold':_0x550e33});else{if(lockOrders==ORDERS[_0x4105bf(0x1d5)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x550e33});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x20064c=getNormalizedPerformance();getStartingBalances(_0x20064c),emitPerformance(_0x20064c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x592841=getNormalizedPerformance();emitPerformance(_0x592841),getStartingBalances(_0x592841),logger[_0x4105bf(0x214)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x36a522=_0x1c80fc;if(!lastBalances)return;let _0x1c5993=[],_0x508e5a,_0x175d62=JSON[_0x36a522(0x1d6)](lastBalances[_0x36a522(0x2da)]);_0x175d62['sort']((_0x487da1,_0x401750)=>_0x487da1[_0x36a522(0x2aa)]>_0x401750[_0x36a522(0x2aa)]?0x1:_0x401750[_0x36a522(0x2aa)]>_0x487da1[_0x36a522(0x2aa)]?-0x1:0x0),_0x175d62['forEach'](_0x5bc8d4=>{const _0x26f3fa=_0x36a522;let _0x35a591={'coin':_0x5bc8d4[_0x26f3fa(0x2aa)],'number':_0x5bc8d4[_0x26f3fa(0x202)],'price':_0x5bc8d4[_0x26f3fa(0x223)]};_0x1c5993[_0x26f3fa(0x338)](_0x35a591);});const _0x145633=await getFiat();_0x508e5a={'date':lastBalances[_0x36a522(0x21d)][_0x36a522(0x354)]('\x20')[0x0],'eur':_0x145633[_0x36a522(0x320)],'usd':_0x145633[_0x36a522(0x289)],'coins':_0x1c5993};let _0xc5f5b=dbPerformance['get'](_0x36a522(0x31a))['find']({'date':_0x508e5a['date']})[_0x36a522(0x2ab)]();_0xc5f5b?_0x508e5a[_0x36a522(0x222)]!=config[_0x36a522(0x20a)]&&dbPerformance[_0x36a522(0x2be)](_0x36a522(0x31a))['find']({'date':_0x508e5a['date']})[_0x36a522(0x2cf)](_0x508e5a)[_0x36a522(0x252)]():dbPerformance[_0x36a522(0x2be)]('data')[_0x36a522(0x338)](_0x508e5a)[_0x36a522(0x252)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2198b9=_0x1c80fc;let _0x27334e=[];if(dbPerformance[_0x2198b9(0x20c)]('data')['value']()){let _0x3a77d0=dbPerformance[_0x2198b9(0x2be)](_0x2198b9(0x31a))[_0x2198b9(0x30c)]()[_0x2198b9(0x2f1)](_0x29d823=>{const _0xdd7e86=_0x2198b9;if(_0x29d823['coins'][_0xdd7e86(0x248)]==0x0)return![];else return!![];})[_0x2198b9(0x291)](_0x2198b9(0x222))['value'](),_0x2555df=[...config['liquidity']];_0x2555df['sort']((_0x7898d8,_0x2ced92)=>_0x7898d8[_0x2198b9(0x222)]>_0x2ced92[_0x2198b9(0x222)]?-0x1:_0x2ced92[_0x2198b9(0x222)]>_0x7898d8[_0x2198b9(0x222)]?0x1:0x0);let _0x26d6a3=0x1,_0x853f72=[],_0x3dbb8b=0x0;_0x3a77d0['slice']()[_0x2198b9(0x2dc)]()[_0x2198b9(0x210)]((_0x1bb35f,_0x2e930c)=>{const _0x572b1b=_0x2198b9;if(_0x2555df[_0x3dbb8b]){if(_0x3a77d0[_0x3a77d0['length']-_0x2e930c]&&_0x2555df[_0x3dbb8b][_0x572b1b(0x222)]==_0x3a77d0[_0x3a77d0[_0x572b1b(0x248)]-_0x2e930c][_0x572b1b(0x222)]){if(_0x2e930c<_0x3a77d0[_0x572b1b(0x248)]){let _0x52d7df=0x0,_0x7a2a33=0x0;_0x3a77d0[_0x3a77d0[_0x572b1b(0x248)]-_0x2e930c][_0x572b1b(0x305)][_0x572b1b(0x210)](_0x2f7669=>{const _0x232c1f=_0x572b1b;_0x7a2a33+=_0x2f7669[_0x232c1f(0x202)]*_0x2f7669[_0x232c1f(0x372)];}),_0x2555df[_0x3dbb8b]['changes'][_0x572b1b(0x210)](_0x553eb8=>{const _0x6e22df=_0x572b1b;_0x52d7df+=_0x553eb8[_0x6e22df(0x202)]*_0x553eb8[_0x6e22df(0x372)];}),_0x26d6a3*=_0x52d7df/(_0x7a2a33-_0x52d7df)+0x1;}_0x3dbb8b++;}}let _0x3ae3cd=0x0;_0x1bb35f[_0x572b1b(0x305)]['forEach'](_0x2b4a0a=>{_0x3ae3cd+=_0x2b4a0a['number']*_0x2b4a0a['price'];}),_0x853f72[_0x3a77d0['length']-_0x2e930c-0x1]=_0x3ae3cd*(_0x26d6a3-0x1);});let _0x22222b=[];_0x2555df=[...config['liquidity']]||[];let _0x3bfb09=0x0;_0x3dbb8b=0x0,_0x3a77d0[_0x2198b9(0x210)]((_0xba8705,_0x841875)=>{const _0x4b8e3c=_0x2198b9;if(_0x2555df[_0x3dbb8b]){const _0x19aa0f=fns['parse'](_0x2555df[_0x3dbb8b][_0x4b8e3c(0x222)],'yyyy/MM/dd',new Date()),_0x3f8a88=fns[_0x4b8e3c(0x1d6)](_0xba8705[_0x4b8e3c(0x222)],_0x4b8e3c(0x28f),new Date());if(fns[_0x4b8e3c(0x33b)](_0x19aa0f,_0x3f8a88)){let _0x5038ac=0x0;_0x2555df[_0x3dbb8b][_0x4b8e3c(0x2a5)][_0x4b8e3c(0x210)](_0x2372e8=>{const _0x3855b6=_0x4b8e3c;!_0x22222b[_0x2372e8[_0x3855b6(0x2aa)]]?_0x22222b[_0x2372e8[_0x3855b6(0x2aa)]]=_0x2372e8['number']:(_0x5038ac=_0x22222b[_0x2372e8[_0x3855b6(0x2aa)]],_0x22222b[_0x2372e8['coin']]+=_0x2372e8[_0x3855b6(0x202)]);const _0x5d9238=_0xba8705[_0x3855b6(0x305)]['find'](_0x8abce6=>_0x8abce6['coin']==_0x2372e8[_0x3855b6(0x2aa)]);(!_0x5d9238||_0x5d9238[_0x3855b6(0x202)]==0x0)&&(_0x3bfb09+=(-_0x2372e8['number']-_0x5038ac)*_0x2372e8['price']);}),_0x3dbb8b++;}}_0xba8705[_0x4b8e3c(0x305)][_0x4b8e3c(0x210)]((_0x4cdf31,_0x5775d1)=>{const _0x111ff3=_0x4b8e3c;_0x22222b[_0x4cdf31[_0x111ff3(0x2aa)]]&&(_0x4cdf31[_0x111ff3(0x225)]=_0x22222b[_0x4cdf31[_0x111ff3(0x2aa)]]);}),_0x27334e[_0x4b8e3c(0x338)]({'date':_0xba8705[_0x4b8e3c(0x222)],'eur':_0xba8705[_0x4b8e3c(0x320)],'usd':_0xba8705['usd'],'offset':_0x853f72[_0x841875],'netoffset':_0x3bfb09,'coins':_0xba8705[_0x4b8e3c(0x305)]});});}return _0x27334e;}function emitPerformance(_0x3dd0df){const _0x4faa0e=_0x1c80fc;_0x3dd0df[_0x4faa0e(0x248)]!==0x0?(proxyEmit(_0x4faa0e(0x239),_0x3dd0df),lastPerformanceEmitted=getDate()):proxyEmit(_0x4faa0e(0x239),[]);}function getPerf(_0x5ee276,_0x11b467){const _0x5ae042=_0x1c80fc;let _0xb5da2f=0x0,_0x3c1b77=0x0,_0x460612=0x0;_0x5ee276[_0x5ae042(0x305)]['forEach'](_0x2ec061=>{const _0x19cf82=_0x5ae042;_0xb5da2f+=_0x2ec061[_0x19cf82(0x202)]*_0x2ec061[_0x19cf82(0x372)];});_0x11b467&&(_0xb5da2f+=_0x5ee276['offset']);if(config[_0x5ae042(0x260)]===_0x5ae042(0x334)||config['basecoin']===_0x5ae042(0x329))_0x3c1b77=_0xb5da2f*_0x5ee276[_0x5ae042(0x320)],_0x460612=_0xb5da2f*_0x5ee276[_0x5ae042(0x289)];else{if(usdBasecoins[_0x5ae042(0x2b8)](config[_0x5ae042(0x260)]))_0x3c1b77=_0xb5da2f*_0x5ee276[_0x5ae042(0x320)]/_0x5ee276[_0x5ae042(0x289)],_0x460612=_0xb5da2f;else config[_0x5ae042(0x260)]===_0x5ae042(0x219)&&(_0x3c1b77=_0xb5da2f,_0x460612=_0xb5da2f*_0x5ee276[_0x5ae042(0x289)]/_0x5ee276[_0x5ae042(0x320)]);}return[_0xb5da2f,_0x3c1b77,_0x460612];}function getKPIs(_0x134d57,_0x188895=_0x1c80fc(0x219)){const _0x3f7b32=_0x1c80fc,_0x35a5ce=config[_0x3f7b32(0x260)],_0x3a13e2=lastBalances,_0x551d75=currentCoins,_0x39c5cf=getNormalizedPerformance(),_0x5e6773=_0x134d57==='basecoin'?_0x35a5ce:_0x134d57===_0x3f7b32(0x232)||_0x134d57===_0x3f7b32(0x243)?_0x188895:_0x3f7b32(0x2bf)+_0x35a5ce,_0x4d56b1=_0x134d57==='net-basecoin'?_0x3f7b32(0x23d):_0x134d57===_0x3f7b32(0x243)?'Net\x20effect':_0x5e6773+_0x3f7b32(0x242),_0x424f00=_0x134d57===_0x3f7b32(0x2e8)||_0x134d57===_0x3f7b32(0x243)?'Net\x20effect':_0x5e6773+_0x3f7b32(0x33d);let _0x2a7706=0x0;_0x551d75[_0x3f7b32(0x210)](_0x407f82=>{const _0x3a4d2a=_0x3f7b32;_0x2a7706+=_0x407f82[_0x3a4d2a(0x202)]*_0x407f82[_0x3a4d2a(0x223)];});if(_0x134d57===_0x3f7b32(0x232)||_0x134d57==='net-fiat'){if(_0x35a5ce===_0x3f7b32(0x334)||_0x35a5ce===_0x3f7b32(0x329))_0x2a7706=_0x2a7706*(_0x188895===_0x3f7b32(0x219)?_0x3a13e2[_0x3f7b32(0x320)]:_0x3a13e2[_0x3f7b32(0x289)]);else{if(usdBasecoins[_0x3f7b32(0x2b8)](_0x35a5ce))_0x2a7706=_0x2a7706*(_0x188895===_0x3f7b32(0x219)?_0x3a13e2['eur']/_0x3a13e2[_0x3f7b32(0x289)]:0x1);else _0x35a5ce==='EUR'&&(_0x2a7706=_0x2a7706*(_0x188895===_0x3f7b32(0x219)?0x1:_0x3a13e2[_0x3f7b32(0x289)]/_0x3a13e2[_0x3f7b32(0x320)]));}}let _0x24b485;if(_0x2a7706!==0x0){if(_0x134d57===_0x3f7b32(0x260))_0x24b485=(_0x2a7706/startingBalances[_0x3f7b32(0x260)]-0x1)*0x64;else{if(_0x188895==='EUR')_0x24b485=(_0x2a7706/startingBalances[_0x3f7b32(0x320)]-0x1)*0x64;else _0x24b485=(_0x2a7706/startingBalances[_0x3f7b32(0x289)]-0x1)*0x64;}let _0x58cd58=0x0;if(startingBalances[_0x3f7b32(0x305)])_0x551d75[_0x3f7b32(0x210)](_0x64d794=>{const _0x41b5cc=_0x3f7b32;let _0x58dc3c=startingBalances[_0x41b5cc(0x305)][_0x41b5cc(0x308)](_0x21926c=>_0x21926c[_0x41b5cc(0x2aa)]===_0x64d794[_0x41b5cc(0x2aa)]);if(_0x58dc3c&&_0x58dc3c[_0x41b5cc(0x2aa)]&&_0x64d794[_0x41b5cc(0x202)]!==0x0)_0x58cd58+=_0x58dc3c[_0x41b5cc(0x202)]*_0x64d794[_0x41b5cc(0x223)];});let _0x813b52=0x0;if(_0x39c5cf[_0x3f7b32(0x248)]!==0x0){let _0x3cde9b=_0x39c5cf[_0x39c5cf['length']-0x1];_0x813b52=_0x3cde9b['netoffset'];}_0x58cd58-=_0x813b52;_0x134d57==='net-basecoin'&&(_0x24b485=(_0x2a7706-_0x58cd58)/startingBalances[_0x3f7b32(0x260)]*0x64,_0x2a7706=_0x2a7706-_0x58cd58);if(_0x134d57===_0x3f7b32(0x243)){let _0x18bb2e=_0x188895===_0x3f7b32(0x219)?startingBalances[_0x3f7b32(0x320)]:startingBalances[_0x3f7b32(0x289)];if(_0x35a5ce===_0x3f7b32(0x334)||_0x35a5ce===_0x3f7b32(0x329))_0x58cd58=_0x188895===_0x3f7b32(0x219)?_0x58cd58*_0x3a13e2[_0x3f7b32(0x320)]:_0x58cd58*_0x3a13e2[_0x3f7b32(0x289)];else{if(usdBasecoins[_0x3f7b32(0x2b8)](_0x35a5ce))_0x58cd58=_0x188895===_0x3f7b32(0x219)?_0x58cd58*_0x3a13e2['eur']/_0x3a13e2[_0x3f7b32(0x289)]:_0x58cd58;else _0x35a5ce===_0x3f7b32(0x219)&&(_0x58cd58=_0x188895===_0x3f7b32(0x219)?_0x58cd58:_0x58cd58*_0x3a13e2[_0x3f7b32(0x289)]/_0x3a13e2[_0x3f7b32(0x320)]);}_0x24b485=(_0x2a7706-_0x58cd58)/_0x18bb2e*0x64,_0x2a7706=_0x2a7706-_0x58cd58;}if(_0x24b485){if(_0x24b485<0x64)_0x24b485=_0x24b485['toFixed'](0x2);else{if(_0x24b485<0x3e8)_0x24b485=_0x24b485[_0x3f7b32(0x215)](0x1);else _0x24b485=_0x24b485[_0x3f7b32(0x215)](0x0);}}else _0x24b485=Number('0')[_0x3f7b32(0x215)](0x2);if(_0x2a7706){if(Math['abs'](_0x2a7706)<0.000001)_0x2a7706=_0x2a7706['toFixed'](0x2);else{if(Math[_0x3f7b32(0x2e3)](_0x2a7706)<0.1)_0x2a7706=_0x2a7706['toFixed'](0x6);else{if(Math[_0x3f7b32(0x2e3)](_0x2a7706)<0x1)_0x2a7706=_0x2a7706[_0x3f7b32(0x215)](0x5);else{if(Math['abs'](_0x2a7706)<0xa)_0x2a7706=_0x2a7706[_0x3f7b32(0x215)](0x4);else{if(Math[_0x3f7b32(0x2e3)](_0x2a7706)<0x64)_0x2a7706=_0x2a7706[_0x3f7b32(0x215)](0x3);else{if(Math[_0x3f7b32(0x2e3)](_0x2a7706)<0x3e8)_0x2a7706=_0x2a7706[_0x3f7b32(0x215)](0x2);else _0x2a7706=_0x2a7706[_0x3f7b32(0x215)](0x2);}}}}}}else _0x2a7706=Number('0')[_0x3f7b32(0x215)](0x2);}else _0x24b485=Number('0')[_0x3f7b32(0x215)](0x2);return{'value':_0x2a7706,'change':_0x24b485,'leftTxt':_0x4d56b1,'rightTxt':_0x424f00};}async function getStartingBalances(_0x2a2d7b,_0x1ac2e3=!![]){const _0xb6ece=_0x1c80fc;if(_0x2a2d7b[_0xb6ece(0x248)]!==0x0){const [_0x4fa91c,_0x34e1a4,_0x5827ae]=getPerf(_0x2a2d7b[0x0],!![]);let _0x61b293=[];config[_0xb6ece(0x2da)]['forEach'](_0x12ed85=>{const _0xa6fcea=_0xb6ece;let _0x359c73=0x0,_0x390024;config[_0xa6fcea(0x1db)]['forEach'](_0x388a0f=>{const _0x17c16c=_0xa6fcea;let _0x1d6528=_0x388a0f[_0x17c16c(0x2a5)][_0x17c16c(0x308)](_0x2e6f3f=>_0x2e6f3f[_0x17c16c(0x2aa)]==_0x12ed85[_0x17c16c(0x2aa)]);if(_0x1d6528){_0x359c73+=_0x1d6528[_0x17c16c(0x202)];if(!_0x390024)_0x390024=_0x1d6528[_0x17c16c(0x372)];}}),_0x61b293[_0xa6fcea(0x338)]({'coin':_0x12ed85[_0xa6fcea(0x2aa)],'number':_0x359c73,'initialprice':_0x390024});});const _0x2ae92b={'basecoin':_0x4fa91c,'eur':_0x34e1a4,'usd':_0x5827ae,'coins':_0x61b293};if(_0x1ac2e3)proxyEmit(_0xb6ece(0x353),_0x2ae92b);startingBalances=_0x2ae92b;}}function headlessMode(_0x96e8f7){const _0x5b2092=_0x1c80fc;let _0x4842d7=_0x96e8f7[_0x5b2092(0x2da)],_0x4e49d5=_0x96e8f7[_0x5b2092(0x254)],_0x107991=[];for(let _0x1789a1 of _0x4842d7){if(_0x1789a1['coin']!=config['basecoin']){if(_0x1789a1[_0x5b2092(0x330)]>=_0x4e49d5/0x64){if(_0x1789a1[_0x5b2092(0x280)])_0x107991['push'](_0x1789a1);}else{if(_0x1789a1[_0x5b2092(0x330)]<=-_0x4e49d5/0x64){if(_0x1789a1[_0x5b2092(0x280)])_0x107991[_0x5b2092(0x338)](_0x1789a1);}}}}_0x107991[_0x5b2092(0x248)]>0x0&&placeOrder(_0x107991);}function notifyBalance(_0x1045ec){const _0x2b7998=_0x1c80fc;let _0x3ba801=_0x1045ec[_0x2b7998(0x2da)],_0x2922f7=_0x1045ec[_0x2b7998(0x254)],_0x5ee759=[];for(let _0x1b9b75 of _0x3ba801){if(_0x1b9b75['coin']!=config['basecoin']){if(_0x1b9b75[_0x2b7998(0x330)]>=_0x2922f7/0x64){if(_0x1b9b75[_0x2b7998(0x280)])_0x5ee759[_0x2b7998(0x338)](_0x1b9b75);}else{if(_0x1b9b75[_0x2b7998(0x330)]<=-_0x2922f7/0x64){if(_0x1b9b75['valid'])_0x5ee759[_0x2b7998(0x338)](_0x1b9b75);}}}}if(_0x5ee759[_0x2b7998(0x248)]>0x0){let _0x5cb1db=_0x5ee759[_0x2b7998(0x276)](_0x6cd999=>_0x6cd999[_0x2b7998(0x2aa)]);_0x5cb1db[_0x2b7998(0x33e)]();let _0x5a7dab=_0x5cb1db['join'](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x5a7dab;}}function _0xdd2a(_0x19268e,_0x2e5d47){const _0x58a601=_0x5203();return _0xdd2a=function(_0x9c0506,_0x3e43be){_0x9c0506=_0x9c0506-0x1d3;let _0x520322=_0x58a601[_0x9c0506];return _0x520322;},_0xdd2a(_0x19268e,_0x2e5d47);}function symbolToCoin(_0x501224){const _0xc0028c=_0x1c80fc;let _0x280e44;if(_0x501224['includes']('/'+config[_0xc0028c(0x260)]))_0x280e44=_0x501224['replace']('/'+config[_0xc0028c(0x260)],'');if(_0x501224[_0xc0028c(0x2b8)](config[_0xc0028c(0x260)]+'/'))_0x280e44=_0x501224[_0xc0028c(0x2d6)](config[_0xc0028c(0x260)]+'/','');return _0x280e44;}async function unlockOrders(){const _0x5ad7e6=_0x1c80fc;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x5ad7e6(0x36c)),lockOrders=ORDERS[_0x5ad7e6(0x264)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3cc142=await getCoins();[currentCoins,currentCoinsAll]=_0x3cc142,validateOrdersState=_0x5ad7e6(0x225),persistOpenOrders([]),lockOrders=ORDERS[_0x5ad7e6(0x1d5)],logger[_0x5ad7e6(0x214)](_0x5ad7e6(0x21a));}}async function validateOrders(_0x3034cc){const _0x54a1a5=_0x1c80fc;if(_0x3034cc)validateOrdersState=_0x3034cc;logger[_0x54a1a5(0x214)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x54a1a5(0x35b):lockOrders==0x2?_0x54a1a5(0x278):_0x54a1a5(0x31e)));let _0x4c44e8=[],_0x31c245=config[_0x54a1a5(0x362)]==_0x54a1a5(0x31d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x54a1a5(0x2a1)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x54a1a5(0x210)](_0x9b1f56=>{const _0xee0a01=_0x54a1a5;let _0xa65bab=![];_0x9b1f56[_0xee0a01(0x27f)]>0x0&&(_0xa65bab=!![]),_0x4c44e8[_0xee0a01(0x338)](_0xa65bab),_0xa65bab&&config['ordertype']!=_0xee0a01(0x31d)&&logHistory('order',_0xee0a01(0x209)+_0x9b1f56[_0xee0a01(0x339)]+'\x20'+_0x9b1f56['side']+'\x20#'+formatResult(_0x9b1f56[_0xee0a01(0x27f)],0x8)+'\x20@'+formatResult(_0x9b1f56['price'],0x8));}),_0x4c44e8['forEach']((_0x4cecb7,_0x531d69)=>{const _0x558597=_0x54a1a5;if(_0x4cecb7)lastOrders[_0x558597(0x28b)](_0x531d69,0x1);}),persistOpenOrders(lastOrders);const _0x506db1=coolingDown?_0x54a1a5(0x201):'balancing\x20resumed';if(validateOrdersState==_0x54a1a5(0x225)){validateOrdersState='ongoing';if(_0x4c44e8[_0x54a1a5(0x2b8)](![])){if(config['ordertype']==_0x54a1a5(0x31d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x54a1a5(0x32b)){if(_0x4c44e8['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x54a1a5(0x362)]==_0x54a1a5(0x31d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x54a1a5(0x2af))_0x4c44e8['includes'](![])&&(config['ordertype']=='market'?logHistory(_0x54a1a5(0x36e),_0x54a1a5(0x2d4)+Math['round'](_0x31c245*validateOrderInterval/0xea60)+_0x54a1a5(0x21b)+_0x506db1):(await cancelOrders(),logHistory(_0x54a1a5(0x36e),_0x54a1a5(0x2b2)+Math[_0x54a1a5(0x298)](_0x31c245*validateOrderInterval/0xea60)+_0x54a1a5(0x21b)+_0x506db1))),await unlockOrders();else{if(validateOrdersState==_0x54a1a5(0x2ba)){if(config['ordertype']!=_0x54a1a5(0x31d))logHistory(_0x54a1a5(0x36e),_0x54a1a5(0x375)+_0x506db1);await unlockOrders();}}}}}async function cancelOrders(){const _0x5a2595=_0x1c80fc;lastOrders[_0x5a2595(0x210)](async _0x34be7d=>{const _0x568526=_0x5a2595;try{const _0x2b98bb=await exchange[_0x568526(0x336)](_0x34be7d['orderId'],_0x34be7d[_0x568526(0x339)]);}catch(_0x5886a1){if(_0x5886a1['toString']()[_0x568526(0x2b8)](_0x568526(0x2c6))){}else await handleError(_0x5886a1,'cancelOrders()');}});}async function initCoinResults(_0x1da231){const _0x513f3f=_0x1c80fc;_0x1da231?logger[_0x513f3f(0x214)](_0x513f3f(0x2ed)+_0x1da231):logger[_0x513f3f(0x214)](_0x513f3f(0x348)),config[_0x513f3f(0x2da)]['forEach'](_0x22ceb4=>{const _0x5cd5cf=_0x513f3f;if(!_0x22ceb4[_0x5cd5cf(0x2a7)]&&_0x22ceb4[_0x5cd5cf(0x2aa)]!=config['basecoin']){const _0xf6b2bc=currentCoins[_0x5cd5cf(0x308)](_0x754682=>_0x754682['coin']==_0x22ceb4[_0x5cd5cf(0x2aa)]),_0x12a55c=global['ticker'][noslash(_0x22ceb4[_0x5cd5cf(0x339)])];let _0x1590dd=_0xf6b2bc?_0xf6b2bc[_0x5cd5cf(0x202)]:null,_0x51c172=_0x22ceb4[_0x5cd5cf(0x2dc)]?0x1/_0x12a55c:_0x12a55c,_0x30a7fe;config[_0x5cd5cf(0x1db)][_0x5cd5cf(0x210)](_0x4ecdc6=>{const _0x4ae870=_0x5cd5cf;!_0x30a7fe&&(_0x30a7fe=_0x4ecdc6[_0x4ae870(0x2a5)]['find'](_0x258b32=>_0x258b32[_0x4ae870(0x2aa)]==_0x22ceb4[_0x4ae870(0x2aa)]),_0x30a7fe&&(_0x1590dd=_0x30a7fe['number'],_0x51c172=_0x30a7fe['price']));});let _0x4413ea=dbCoinResults[_0x5cd5cf(0x2be)](_0x5cd5cf(0x305))['find']({'coin':_0x22ceb4['coin']})['value']();if(!_0x4413ea){const _0x587709={'coin':_0x22ceb4[_0x5cd5cf(0x2aa)],'number':_0x1590dd,'breakeven':_0x51c172,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5cd5cf(0x2be)]('coins')[_0x5cd5cf(0x338)](_0x587709)[_0x5cd5cf(0x252)]();}else{if(_0x1da231&&_0x22ceb4[_0x5cd5cf(0x2aa)]==_0x1da231){const _0x27e333={'coin':_0x22ceb4[_0x5cd5cf(0x2aa)],'number':_0x1590dd,'breakeven':_0x51c172,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5cd5cf(0x305))[_0x5cd5cf(0x308)]({'coin':_0x22ceb4[_0x5cd5cf(0x2aa)]})['assign'](_0x27e333)[_0x5cd5cf(0x252)]();}}}});}async function updateCoinResults(_0x181d9f,_0x546987=![]){const _0x328721=_0x1c80fc;let _0x296a02,_0x98333d,_0x563ae7,_0x176e0f,_0x2e93e8,_0x249f95,_0x589952=dbCoinResults['get'](_0x328721(0x305))['find']({'coin':_0x181d9f[_0x328721(0x2aa)]})[_0x328721(0x2ab)](),_0x8166f5=![];_0x589952&&Object[_0x328721(0x283)](_0x589952)['forEach'](([_0x3efb49,_0x139641])=>{if(_0x139641==null)_0x8166f5=!![];});(!_0x589952||_0x8166f5)&&(await initCoinResults(_0x181d9f[_0x328721(0x2aa)]),_0x589952=dbCoinResults['get']('coins')[_0x328721(0x308)]({'coin':_0x181d9f[_0x328721(0x2aa)]})['value']());_0x181d9f[_0x328721(0x2dc)]&&(_0x249f95={'filled':_0x181d9f[_0x328721(0x27f)]*_0x181d9f['price'],'amount':_0x181d9f[_0x328721(0x27f)]*_0x181d9f[_0x328721(0x372)],'side':_0x181d9f[_0x328721(0x288)]==_0x328721(0x251)?_0x328721(0x1dd):'sell','price':0x1/_0x181d9f[_0x328721(0x372)]},_0x181d9f={..._0x181d9f,..._0x249f95});_0x546987?_0x98333d=_0x181d9f[_0x328721(0x288)]==_0x328721(0x1dd)?_0x589952[_0x328721(0x202)]+_0x181d9f[_0x328721(0x27f)]:_0x589952['number']-_0x181d9f[_0x328721(0x27f)]:_0x98333d=await getCoinNumber(_0x181d9f[_0x328721(0x2aa)]);if(_0x181d9f[_0x328721(0x301)]&&_0x181d9f[_0x328721(0x301)][_0x328721(0x307)]==config[_0x328721(0x260)])_0x296a02=_0x181d9f['fee'][_0x328721(0x2f5)];else{if(_0x181d9f['fee']&&_0x181d9f['fee'][_0x328721(0x307)]==_0x328721(0x216)&&!_0x546987)_0x296a02=_0x181d9f[_0x328721(0x301)][_0x328721(0x2f5)]*global['ticker'][_0x328721(0x216)+config['basecoin']];else _0x296a02=defaultFee*_0x181d9f['filled']*_0x181d9f[_0x328721(0x372)];}_0x181d9f[_0x328721(0x288)]=='buy'?(_0x563ae7=_0x98333d!=0x0?(_0x589952[_0x328721(0x2c5)]*_0x589952[_0x328721(0x202)]+_0x181d9f[_0x328721(0x372)]*(_0x98333d-_0x589952[_0x328721(0x202)])+_0x296a02)/_0x98333d:0x0,_0x176e0f=_0x589952[_0x328721(0x2ff)]):(_0x563ae7=_0x98333d!=0x0?(_0x589952[_0x328721(0x2c5)]*_0x589952[_0x328721(0x202)]-_0x181d9f[_0x328721(0x372)]*(_0x589952['number']-_0x98333d)+_0x296a02)/_0x98333d:0x0,_0x176e0f=_0x589952[_0x328721(0x2ff)]+(_0x181d9f[_0x328721(0x372)]-_0x589952['breakeven'])*_0x181d9f['filled']);_0x2e93e8=(_0x181d9f[_0x328721(0x372)]-_0x563ae7-_0x296a02/_0x181d9f['filled'])*_0x98333d;let _0x238452={'coin':_0x181d9f[_0x328721(0x2aa)],'number':_0x98333d,'breakeven':formatResult(_0x563ae7,0x8),'realized':formatResult(_0x176e0f,0x8),'unrealized':formatResult(_0x2e93e8,0x8),'fees':formatResult(_0x589952['fees']+_0x296a02,0x8),'sells':_0x181d9f[_0x328721(0x288)]=='sell'?_0x589952[_0x328721(0x29b)]+0x1:_0x589952[_0x328721(0x29b)],'buys':_0x181d9f['side']==_0x328721(0x1dd)?_0x589952['buys']+0x1:_0x589952['buys']};dbCoinResults['get'](_0x328721(0x305))[_0x328721(0x308)]({'coin':_0x181d9f[_0x328721(0x2aa)]})[_0x328721(0x2cf)](_0x238452)['write']();if(!_0x546987){if(_0x181d9f[_0x328721(0x301)]&&_0x181d9f[_0x328721(0x301)][_0x328721(0x307)]==_0x328721(0x216)){const _0x62bcfa=currentCoins[_0x328721(0x308)](_0x72e6f=>_0x72e6f['coin']==_0x328721(0x216));if(_0x62bcfa){let _0x5dc464=dbCoinResults['get']('coins')['find']({'coin':_0x328721(0x216)})[_0x328721(0x2ab)]();_0x238452={..._0x5dc464,'number':_0x62bcfa[_0x328721(0x202)]},dbCoinResults[_0x328721(0x2be)](_0x328721(0x305))[_0x328721(0x308)]({'coin':'BNB'})[_0x328721(0x2cf)](_0x238452)[_0x328721(0x252)]();}}}}async function placeOrder(_0x2c56f9){const _0x21f15c=_0x1c80fc,_0xfb0033=config['ordertype']==_0x21f15c(0x31d)?_0x21f15c(0x31d):_0x21f15c(0x340);if(lockOrders==ORDERS[_0x21f15c(0x1d5)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x21f15c(0x322)],allOrdersPlaced=![],validateOrdersState='initial';let _0x57eeba=![];lastOrders=[];for(const _0x447e24 of _0x2c56f9){let _0x5e3296,_0x2a9663,_0x1a4d2f,_0x100404,_0x4dbbe9,_0x2cf237=_0x447e24[_0x21f15c(0x339)];try{const _0x43eb48=await exchange['fetchTicker'](_0x2cf237);_0x5e3296=_0x447e24[_0x21f15c(0x2dc)]?0x1/_0x447e24['last']:_0x447e24[_0x21f15c(0x223)],_0x2a9663=_0x43eb48[_0x21f15c(0x200)],_0x1a4d2f=_0x43eb48[_0x21f15c(0x2e6)];_0x447e24['reverse']?(_0x100404=_0x447e24['side']=='buy'?_0x21f15c(0x251):'buy',_0x4dbbe9=Math[_0x21f15c(0x2e3)](_0x447e24['trade'])/_0x5e3296):(_0x100404=_0x447e24[_0x21f15c(0x288)],_0x4dbbe9=Math[_0x21f15c(0x2e3)](_0x447e24[_0x21f15c(0x22e)]));_0xfb0033==_0x21f15c(0x340)&&(config[_0x21f15c(0x362)]=='limit-high'&&(_0x5e3296=_0x100404==_0x21f15c(0x1dd)?_0x2a9663:_0x1a4d2f),config[_0x21f15c(0x362)]==_0x21f15c(0x347)&&(_0x5e3296=_0x100404==_0x21f15c(0x1dd)?_0x1a4d2f:_0x2a9663));_0x4dbbe9=formatResult(_0x4dbbe9,0x8),_0x5e3296=formatResult(_0x5e3296,0x8);const _0x54f7fa=_0x100404==_0x21f15c(0x251)?config['emojisell']?String[_0x21f15c(0x2a3)]('0x'+config[_0x21f15c(0x373)])+'\x20':'':config[_0x21f15c(0x2d9)]?String['fromCodePoint']('0x'+config[_0x21f15c(0x2d9)])+'\x20':'',_0x7e38da=_0xfb0033==_0x21f15c(0x31d)?_0x21f15c(0x356):config[_0x21f15c(0x362)]==_0x21f15c(0x255)?_0x21f15c(0x256):_0x21f15c(0x23c),_0x5a6041=(Math['floor'](Math[_0x21f15c(0x1de)]()*0x35a4e900)+0x5f5e100)[_0x21f15c(0x26e)]();lastOrders[_0x21f15c(0x338)]({'customId':_0x5a6041,'symbol':_0x2cf237,'coin':_0x447e24[_0x21f15c(0x2aa)],'amount':_0x4dbbe9,'price':_0x5e3296,'side':_0x100404,'reverse':_0x447e24[_0x21f15c(0x2dc)],'filled':0x0});if(_0xfb0033==_0x21f15c(0x31d))logHistory(_0x21f15c(0x1f5),''+_0x54f7fa+_0x7e38da+_0x21f15c(0x319)+_0x2cf237+'\x20'+_0x100404+'\x20#'+formatResult(_0x4dbbe9,0x8)+'\x20@'+formatResult(_0x5e3296,0x8));else logHistory(_0x21f15c(0x1f5),''+_0x54f7fa+_0x7e38da+_0x21f15c(0x319)+_0x2cf237+'\x20'+_0x100404+'\x20#'+formatResult(_0x4dbbe9,0x8)+'\x20@'+formatResult(_0x5e3296,0x8));let _0x2fa11b;_0xfb0033==_0x21f15c(0x31d)?_0x100404==_0x21f15c(0x1dd)&&['Bybit',_0x21f15c(0x310),_0x21f15c(0x2ca),_0x21f15c(0x2c3),_0x21f15c(0x304)][_0x21f15c(0x2b8)](config[_0x21f15c(0x34c)])?_0x2fa11b=await exchange[_0x21f15c(0x30b)](_0x2cf237,_0xfb0033,_0x100404,_0x4dbbe9,_0x5e3296):_0x2fa11b=await exchange['createOrder'](_0x2cf237,_0xfb0033,_0x100404,_0x4dbbe9,undefined):_0x2fa11b=await exchange[_0x21f15c(0x30b)](_0x2cf237,_0xfb0033,_0x100404,_0x4dbbe9,_0x5e3296);logger[_0x21f15c(0x214)](_0x21f15c(0x2bc)+_0x2fa11b['id']+_0x21f15c(0x2fb)+_0x5a6041);const _0x4b180f=lastOrders['length']-0x1;if(_0x4b180f>=0x0&&lastOrders[_0x4b180f][_0x21f15c(0x1f2)]==_0x5a6041){lastOrders[_0x4b180f][_0x21f15c(0x345)]=_0x2fa11b['id'];if(_0x2fa11b['amount'])lastOrders[_0x4b180f][_0x21f15c(0x357)]=_0x2fa11b[_0x21f15c(0x357)];if(_0x2fa11b[_0x21f15c(0x372)])lastOrders[_0x4b180f][_0x21f15c(0x372)]=_0x2fa11b[_0x21f15c(0x372)];lastOrders[_0x4b180f]['fee']=_0x2fa11b[_0x21f15c(0x301)];}if(config[_0x21f15c(0x316)]!=0x0){let _0x410944=null;if(cooldownTracker[_0x21f15c(0x248)]==config['cooldown']-0x1)_0x410944=cooldownTracker[_0x21f15c(0x27e)]();const _0x37af1c=getTimeStamp();cooldownTracker['push'](_0x37af1c);if(_0x410944){const _0x249323=fns[_0x21f15c(0x281)](new Date(_0x37af1c),new Date(_0x410944));if(_0x249323<cooldownInterval){logHistory(_0x21f15c(0x1d7),_0x21f15c(0x294)+config[_0x21f15c(0x316)]+_0x21f15c(0x1e7)+cooldownInterval/0x3c+_0x21f15c(0x22a)+cooldownPeriod/(0xe10*0x3e8)+_0x21f15c(0x36f)),coolingDown=!![];break;}}}}catch(_0x13f334){if(_0x13f334[_0x21f15c(0x26e)]()[_0x21f15c(0x2b8)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x372c98=>_0x372c98[_0x21f15c(0x339)]!=_0x2cf237),logHistory(_0x21f15c(0x1d7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2cf237),_0x57eeba=!![];else{if(_0x13f334['toString']()['includes'](_0x21f15c(0x2a2)))lastOrders=lastOrders[_0x21f15c(0x2f1)](_0x466af3=>_0x466af3[_0x21f15c(0x339)]!=_0x2cf237),logHistory(_0x21f15c(0x1d7),_0x21f15c(0x1f9)+_0x2cf237),_0x57eeba=!![];else{if(_0x13f334[_0x21f15c(0x26e)]()[_0x21f15c(0x2b8)]('InvalidOrder'))lastOrders=lastOrders[_0x21f15c(0x2f1)](_0x1afbec=>_0x1afbec[_0x21f15c(0x339)]!=_0x2cf237),logHistory(_0x21f15c(0x1d7),_0x21f15c(0x1f4)+_0x2cf237),logger['debug'](_0x13f334),_0x57eeba=!![];else _0x13f334[_0x21f15c(0x26e)]()[_0x21f15c(0x2b8)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x21f15c(0x2f1)](_0x4fe5ac=>_0x4fe5ac[_0x21f15c(0x339)]!=_0x2cf237),logHistory(_0x21f15c(0x1d7),_0x21f15c(0x1f1)+_0x2cf237),_0x57eeba=!![]):(lastOrders=lastOrders['filter'](_0x29a223=>_0x29a223[_0x21f15c(0x339)]!=_0x2cf237),await handleError(_0x13f334,_0x21f15c(0x259),_0x2cf237));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x21f15c(0x248)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xd692cc=config[_0x21f15c(0x362)]==_0x21f15c(0x31d)?validateOrderTimeout*0x3c*0x3e8:config[_0x21f15c(0x2a1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3d3d0e=_0x21f15c;validateOrders(_0x3d3d0e(0x2af));},_0xd692cc);}else unlockOrders();_0x57eeba&&config['headless']&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x21f15c(0x36e),_0x21f15c(0x1e4)));}else{if(coolingDown)!config[_0x21f15c(0x2b9)]&&logHistory(_0x21f15c(0x1d7),_0x21f15c(0x29f));else lockOrders!=ORDERS[_0x21f15c(0x1d5)]&&(!config[_0x21f15c(0x2b9)]&&(config[_0x21f15c(0x362)]=='market'?logHistory(_0x21f15c(0x1d7),_0x21f15c(0x321)):logHistory('error',_0x21f15c(0x21f))));}}function _0x5203(){const _0x2d21ca=['createWriteStream','AuthenticationError','recreateCoinResults()','side','usd','ccxt','splice','Error\x20details:','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20|\x20','yyyy/MM/dd','padStart','sortBy','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','startprice','Executed\x20','-performance.json','privateKey','<b>','round','recreate','240NNFmHi','sells','autoliquidity','\x20>\x20[DEBUG]\x20','enabled','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getFullYear','timeout','Invalid\x20quantity','fromCodePoint','getPortfolio(2)','changes','page','excluded','storeConfiguration','sendPortfolioTelegram','coin','value','watchTrades','USD','sendMetricsTelegram','final','startnumber','Transaction\x20detection\x20unblocked','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20not\x20responding','args','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','lowdb','emitHistory','includes','headless','no\x20open\x20orders','settings','ID:\x20','/EUR','get','Net\x20','amountToPrecision','fetchTickers()','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Huobi','-results.json','breakeven','OrderNotFound','none','password','existsSync','Cex','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','2336256AkwKQC','\x20:\x20','unlinkSync','assign','stopExchange()','yyyy-MM-dd\x27T\x27HH:mm:ss','957kcYcIA','1902738tNuYvk','Order(s)\x20not\x20validated\x20after\x20','/output-000.log','replace','leftTxt','getTime','emojibuy','portfolio','bot','reverse','test','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Invalid\x20symbol:\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','RSA-OAEP','bot-','abs','exchanges','bots','ask','search','net-basecoin','writeFile','added','string','USDT','Resetting\x20coin\x20results:\x20','fetchBalance','./logs/','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','filter','resetHistory','Transaction\x20detection\x20blocked','balances','cost','kill','0\x20-\x20EXECUTION:\x20','substring','initTickers()','apiSecret','\x20|\x20Custom\x20ID:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','</pre>','concat','realized','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','fee','constructor','set','Huobipro','coins','total','currency','find','rightTxt','send','createOrder','cloneDeep','cancelLoading','yargs/yargs','bb-settings.json','Bitget','DDoSProtection','\x20-\x20bot\x20not\x20started','<pre>','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','pro','cooldown','recovery','apiKey','\x20order:\x20','data','%\x20(','watchTrades()','market','ORDERS.UNLOCKED','datetime','eur','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','LOCKED','***','botname','Error\x20while\x20deleting\x20files:\x20','limits','Fee\x20discount\x20refund\x20detected:\x20','Exchange','ETH','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','ongoing','watchOrders','type','hybrid-crypto-js','USDP','delta','orderstatus',':\x20Bot\x20','watchOrders()','BTC','getCoinNumber()','cancelOrder','getPortfolio(1)','push','symbol','getMinutes','isEqual','RequestTimeout','\x20change','sort','getPortfolio','limit','Invalid\x20API\x20key\x20or\x20secret\x20entered','red_yellow_blue','offset','BNB/','orderId','format','limit-low','Initializing\x20coin\x20results','loadSymbols()','ExchangeError','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','exchange','toUpperCase','3\x20-\x20handling\x20FILLED\x20order:\x20','close','API-key\x20format\x20invalid',':\x20timer\x20>','event','starting-balances','split','getStartingBalances','Market','amount','Binance','showname','loadMarkets','ORDERS.LOCKED','indexOf','full','1\x20-\x20FILLED:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','/backup/','ticker','ordertype','remainingSymbols','placeOrder','Portfolio\x20change\x20detected:\x20','650430nNdyOU','exec','\x20metrics:</b>\x20\x0a\x0a','watchTransactions()','change','\x20closed\x20the\x20connection','1\x20-\x20Unlock\x20orders','getSeconds','success','\x20hour','secure','logs','price','emojisell','14211vVinwJ','No\x20more\x20open\x20orders\x20-\x20','botID','1\x20-\x20Handle\x20open\x20orders','UNLOCKED','parse','error','2\x20-\x20FILLED\x20known\x20order:\x20','844418azXtWa','closed','liquidity','Uncaught\x20Exception:','buy','random','Pausing\x20bot\x20for\x20','87104HaRlXg','\x20>\x20','OnMaintenance','event-history','Cooldown\x20ended\x20-\x20balancing\x20resumed','timestamp','average','\x20orders\x20in\x20less\x20than\x20','getPortfolio(0)','Crypt','util','basecoinvalue','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','milliseconds','-config.json','progress','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','customId','toggleBotMode','Order\x20is\x20invalid:\x20','order','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','-------------------------------\x0a','join','Order\x20amount\x20is\x20invalid:\x20','storeHeadless','uncaughtException','spot','date-fns','21ktVUDv','getMonth','bid','balancing\x20resumes\x20when\x20cooldown\x20ends','number','restart','deleteHistoryAlerts','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','./config/','fetchClosedOrders','\x20portfolio:</b>\x20\x0a\x0a','Order\x20filled:\x20','startdate','cancel','has','\x20-\x20exclude\x20from\x20balancing\x20in\x20the\x20configuration','USDC','target','forEach','stringify','open','openOrders','debug','toFixed','BNB','function','528jUjuda','EUR','2\x20-\x20Orders\x20unlocked','\x20minutes\x20-\x20','Error:\x20Invalid\x20argument\x20','time','RateLimitExceeded','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','defaults','2.6.0','date','last','\x20|\x20exchange:\x20','initial','Saving\x20configuration','Pausing\x20for\x20','toLowerCase','max','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','findIndex','change24h','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','trade','157830MlRFuM','getCoins()','2.3.5','fiat','Bot\x20','exchange\x20reloaded','configuration','getDate','./version.json','fetchOpenOrders','performance','\x20|\x20highest\x20fee:\x20','\x20exchange','Limit\x20(low-margin)','Net\x20effect','\x20not\x20available','onepagemode','status','2\x20-\x20Handled\x20open\x20orders','\x20value','net-fiat','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','apiPassword','001','canceled','length','fetchTickers','NetworkError','highest','keys','decrypt','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','version','slice','sell','write','running','threshold','limit-high','Limit\x20(high-margin)','InsufficientFunds','showConfig','placeOrder()','padEnd','colorscheme','Reset\x20|\x20','bb-secure.json','************','fetchTicker','basecoin','removed','ExchangeNotAvailable','/USD','UNLOCKING','getHours','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20has\x20a\x2024h\x20drop\x20of\x20','recent20','active','\x20minutes','distribution','mkdirSync','<b>Bot\x20','toString','remove','configuration-stored','min','Exception\x20thrown\x20in\x20','Waited\x20','message','storeFiat','map','lowdb/adapters/FileSync','ORDERS.UNLOCKING','sha256','Executing\x20exchange\x20reload','.json','log','timeshift','shift','filled','valid','differenceInSeconds','argv','entries','(((.+)+)+)+$'];_0x5203=function(){return _0x2d21ca;};return _0x5203();}function persistOpenOrders(_0x56a51c){const _0x28eed2=_0x1c80fc,_0x234aa3={...config,'openOrders':_0x56a51c};let _0x34b58b=dbConfig[_0x28eed2(0x2be)](_0x28eed2(0x2db))[_0x28eed2(0x308)]({'botID':botID})[_0x28eed2(0x2ab)]();_0x34b58b&&dbConfig[_0x28eed2(0x2be)](_0x28eed2(0x2db))['find']({'botID':botID})[_0x28eed2(0x2cf)](_0x234aa3)[_0x28eed2(0x252)]();}function restoreOrders(){const _0x2331ea=_0x1c80fc;let _0x88bf4c;config['openOrders']&&allOpenOrders[_0x2331ea(0x210)](_0x5a329c=>{const _0x51f618=_0x2331ea,_0x10a7c1=config[_0x51f618(0x213)][_0x51f618(0x308)](_0x1ac242=>_0x1ac242['orderId']==_0x5a329c['id']);_0x10a7c1&&(lastOrders[_0x51f618(0x338)](_0x10a7c1),_0x88bf4c=_0x5a329c[_0x51f618(0x1e5)]);});if(lastOrders[_0x2331ea(0x248)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x2331ea(0x32b),allOrdersPlaced=!![];const _0x132a50=new Date()[_0x2331ea(0x2d8)](),_0x1f277d=config[_0x2331ea(0x362)]==_0x2331ea(0x31d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x88bf4c+_0x1f277d>_0x132a50){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x88bf4c+_0x1f277d-_0x132a50);}else validateOrders(_0x2331ea(0x2af));}}async function sendMetricsTelegram(){const _0x168e96=_0x1c80fc;if(!coinsLoaded){process['send']({'telegrammsg':_0x168e96(0x34b)},_0x3cc140=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x352aa3='';if(config[_0x168e96(0x359)])_0x352aa3=_0x168e96(0x297)+config['botname']+_0x168e96(0x368);else _0x352aa3=_0x168e96(0x26d)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1bb6cf=getKPIs(_0x168e96(0x260)),_0x5c41fe=getKPIs('fiat',config[_0x168e96(0x232)]),_0x5c58a2=getKPIs(_0x168e96(0x2e8)),_0x4568a4=getKPIs(_0x168e96(0x243),config[_0x168e96(0x232)]);_0x352aa3+=_0x168e96(0x313),_0x352aa3+=_0x1bb6cf[_0x168e96(0x2d7)]+_0x168e96(0x2cd)+_0x1bb6cf[_0x168e96(0x2ab)]+'\x0a',_0x352aa3+=_0x1bb6cf[_0x168e96(0x309)]+':\x20'+_0x1bb6cf[_0x168e96(0x36a)]+'%\x0a',_0x352aa3+=_0x5c41fe['leftTxt']+_0x168e96(0x2cd)+_0x5c41fe['value']+'\x0a',_0x352aa3+=_0x5c41fe[_0x168e96(0x309)]+':\x20'+_0x5c41fe['change']+'%\x0a',_0x352aa3+=_0x5c58a2['leftTxt']+':\x20'+_0x5c58a2[_0x168e96(0x2ab)]+'\x20('+config[_0x168e96(0x260)]+')\x0a',_0x352aa3+=_0x5c58a2[_0x168e96(0x309)]+':\x20'+_0x5c58a2[_0x168e96(0x36a)]+_0x168e96(0x31b)+config[_0x168e96(0x260)]+')\x0a',_0x352aa3+=_0x4568a4[_0x168e96(0x2d7)]+':\x20'+_0x4568a4[_0x168e96(0x2ab)]+'\x20('+config['fiat']+')\x0a',_0x352aa3+=_0x4568a4[_0x168e96(0x309)]+':\x20'+_0x4568a4[_0x168e96(0x36a)]+_0x168e96(0x31b)+config[_0x168e96(0x232)]+')\x0a',_0x352aa3+=_0x168e96(0x2fd),process[_0x168e96(0x30a)]({'telegrammsg':_0x352aa3},_0x1ebb54=>{});}async function sendPortfolioTelegram(){const _0x254027=_0x1c80fc;if(!coinsLoaded){process[_0x254027(0x30a)]({'telegrammsg':_0x254027(0x34b)},_0x13d53c=>{});return;}let _0x3454b9='';if(config[_0x254027(0x359)])_0x3454b9=_0x254027(0x297)+config[_0x254027(0x324)]+_0x254027(0x208);else _0x3454b9='<b>Bot\x20'+botID+_0x254027(0x208);_0x3454b9+=_0x254027(0x313),_0x3454b9+=_0x254027(0x1f7),_0x3454b9+=_0x254027(0x1f0),_0x3454b9+=_0x254027(0x1f7),currentCoins['forEach'](_0x373c9e=>{const _0x4da456=_0x254027;_0x3454b9+=_0x373c9e[_0x4da456(0x2aa)][_0x4da456(0x25a)](0x7)+'|\x20'+formatPad(_0x373c9e[_0x4da456(0x26b)],0x2,0x6)+'|\x20'+formatPad(_0x373c9e['target'],0x2,0x6)+'|\x20'+formatPad(_0x373c9e[_0x4da456(0x330)]*0x64,0x2,0x6)+'\x0a';}),_0x3454b9+=_0x254027(0x2fd),process[_0x254027(0x30a)]({'telegrammsg':_0x3454b9},_0x2d7baa=>{});}function formatPad(_0x52de7b,_0x1e3334,_0x5940c7){const _0x1813c8=_0x1c80fc,_0x4a6fcd=formatResultString(_0x52de7b,_0x1e3334);return _0x4a6fcd?_0x4a6fcd['padStart'](_0x5940c7):''[_0x1813c8(0x290)](_0x5940c7);}function logHistory(_0x113dc2,_0x4d3563,_0x1b7c09=''){const _0x289364=_0x1c80fc;logger[_0x289364(0x35d)](''+_0x4d3563);let _0x105bc={'time':getTimeStamp(),'type':_0x113dc2,'event':_0x4d3563};dbLogs[_0x289364(0x2be)](_0x289364(0x371))[_0x289364(0x338)](_0x105bc)[_0x289364(0x252)]();if(_0x1b7c09=='')_0x1b7c09=_0x4d3563;proxyEmit(_0x289364(0x352),{'log':_0x105bc,'summary':_0x1b7c09}),process[_0x289364(0x30a)]({'telegram':{..._0x105bc,'botname':config[_0x289364(0x324)],'showname':config[_0x289364(0x359)]}},_0x5cdc0d=>{});}function emitHistory(_0x5eb85a={}){const _0x27e763=_0x1c80fc;Object['keys'](_0x5eb85a)[_0x27e763(0x248)]==0x0&&(_0x5eb85a={'type':['order','event'],'event':'','page':0x1});if(_0x5eb85a[_0x27e763(0x32d)][_0x27e763(0x2b8)](_0x27e763(0x352)))_0x5eb85a[_0x27e763(0x32d)][_0x27e763(0x28b)](_0x5eb85a[_0x27e763(0x32d)]['indexOf'](_0x27e763(0x352)),0x1,'error','warning',_0x27e763(0x36e));if(dbLogs[_0x27e763(0x20c)](_0x27e763(0x371))[_0x27e763(0x2ab)]()){let _0x36843a=dbLogs[_0x27e763(0x2be)](_0x27e763(0x371))[_0x27e763(0x2f1)](_0x1d46d1=>{const _0x53b691=_0x27e763;if(_0x5eb85a[_0x53b691(0x32d)][_0x53b691(0x248)]==0x0)return![];else return _0x5eb85a[_0x53b691(0x32d)][_0x53b691(0x2b8)](_0x1d46d1[_0x53b691(0x32d)]);})[_0x27e763(0x2f1)](_0x38ec03=>{const _0x5a8557=_0x27e763;if(_0x5eb85a[_0x5a8557(0x352)]=='')return!![];else return _0x38ec03[_0x5a8557(0x352)][_0x5a8557(0x228)]()[_0x5a8557(0x2b8)](_0x5eb85a[_0x5a8557(0x352)][_0x5a8557(0x228)]());})[_0x27e763(0x291)](_0x27e763(0x21d)),_0x52eafe=_0x36843a[_0x27e763(0x2ab)]()[_0x27e763(0x248)];_0x36843a=_0x36843a[_0x27e763(0x2dc)]()[_0x27e763(0x250)]((_0x5eb85a[_0x27e763(0x2a6)]-0x1)*logPageSize,_0x5eb85a[_0x27e763(0x2a6)]*logPageSize-0x1)[_0x27e763(0x2dc)]()[_0x27e763(0x2ab)](),proxyEmit(_0x27e763(0x1e3),{'logs':_0x36843a,'total':_0x52eafe});}else proxyEmit(_0x27e763(0x1e3),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x43fc25){const _0x2bb0d4=_0x1c80fc;if(dbLogs[_0x2bb0d4(0x20c)]('logs')[_0x2bb0d4(0x2ab)]()){const _0x4d51df=dbLogs[_0x2bb0d4(0x2be)]('logs')[_0x2bb0d4(0x291)](_0x2bb0d4(0x21d))[_0x2bb0d4(0x2f1)](_0x303ec8=>{const _0x5d0672=_0x2bb0d4;return _0x303ec8['type']==_0x5d0672(0x1f5);})[_0x2bb0d4(0x2ab)]();dbLogs[_0x2bb0d4(0x2be)](_0x2bb0d4(0x371))[_0x2bb0d4(0x26f)]()[_0x2bb0d4(0x252)](),dbLogs[_0x2bb0d4(0x2be)](_0x2bb0d4(0x371))[_0x2bb0d4(0x2cf)](_0x4d51df)['write'](),emitHistory(_0x43fc25);}}async function pauseBot(){const _0x29abe7=_0x1c80fc,_0x5e7bf2=new Date()[_0x29abe7(0x2d8)]();if(!lastErrorShown||_0x5e7bf2-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x5e7bf2;!lastBotPause?(lastBotPause=_0x5e7bf2,consecutivePauses=0x1):(_0x5e7bf2-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x29abe7(0x30a)]({'stop':_0x29abe7(0x203)},_0x3ea3ea=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),logHistory('error',_0x29abe7(0x1df)+pauseBotInterval/0xea60+_0x29abe7(0x26a)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x53d383=_0x1c80fc;botPaused=!![],await sleep(0x3e8),process[_0x53d383(0x30a)]({'stop':_0x53d383(0x2f6)},_0x5c49d9=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x312cfa,_0x8b96c8){const _0x1c9ca1=_0x1c80fc;if(botPaused)return;const _0x108874=config[_0x1c9ca1(0x34c)]||_0x1c9ca1(0x328);if(_0x8b96c8)logger['debug'](_0x1c9ca1(0x272)+_0x8b96c8);if(_0x312cfa[_0x1c9ca1(0x26e)]()[_0x1c9ca1(0x2b8)](_0x1c9ca1(0x350)))logHistory(_0x1c9ca1(0x1d7),_0x108874+_0x1c9ca1(0x35f));else{if(_0x312cfa[_0x1c9ca1(0x26e)]()[_0x1c9ca1(0x2b8)](_0x1c9ca1(0x292)))logHistory('error',_0x108874+_0x1c9ca1(0x314));else _0x312cfa[_0x1c9ca1(0x26e)]()['includes'](_0x1c9ca1(0x286))?(logHistory(_0x1c9ca1(0x1d7),_0x108874+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x312cfa,null);}}async function handleError(_0xad77fd,_0x22a740,_0x1e8b12=''){const _0x3e8ace=_0x1c80fc;if(botPaused)return;const _0x248424=config[_0x3e8ace(0x34c)]||_0x3e8ace(0x328);if(_0x22a740)logger[_0x3e8ace(0x214)](_0x3e8ace(0x272)+_0x22a740);if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x311))||_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x21e)))logHistory('error',_0x248424+_0x3e8ace(0x2b5)),await pauseBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x262))||_0xad77fd['toString']()[_0x3e8ace(0x2b8)](_0x3e8ace(0x1e2)))logHistory(_0x3e8ace(0x1d7),_0x248424+_0x3e8ace(0x23e)),await pauseBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()['includes'](_0x3e8ace(0x33c)))logHistory('error',_0x248424+_0x3e8ace(0x2b3)),await pauseBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x300)))logHistory(_0x3e8ace(0x1d7),_0x248424+_0x3e8ace(0x36b)),await pauseBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x244)))logHistory(_0x3e8ace(0x1d7),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x3e8ace(0x1d7),_0x3e8ace(0x266)),await killBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)]('InvalidNonce'))logHistory('error',_0x3e8ace(0x2de)),logHistory(_0x3e8ace(0x1d7),_0x3e8ace(0x266)),await killBot();else{if(_0xad77fd instanceof ccxt[_0x3e8ace(0x24a)])logHistory(_0x3e8ace(0x1d7),_0x248424+'\x20network\x20error'),logger['debug']('Error\x20details:',_0xad77fd),await pauseBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()['includes'](_0x3e8ace(0x350)))logHistory('error',_0x248424+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x3e8ace(0x1d7),_0x3e8ace(0x266)),await killBot();else{if(_0xad77fd['toString']()[_0x3e8ace(0x2b8)](_0x3e8ace(0x292)))logHistory(_0x3e8ace(0x1d7),_0x248424+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x3e8ace(0x266)),await killBot();else{if(_0xad77fd[_0x3e8ace(0x26e)]()[_0x3e8ace(0x2b8)](_0x3e8ace(0x286)))logHistory(_0x3e8ace(0x1d7),_0x248424+_0x3e8ace(0x1f6)),logHistory(_0x3e8ace(0x1d7),_0x3e8ace(0x266)),await killBot();else{if(_0xad77fd['toString']()['includes'](_0x3e8ace(0x257)))logHistory(_0x3e8ace(0x1d7),_0x3e8ace(0x2e0)+_0x1e8b12);else _0xad77fd instanceof ccxt[_0x3e8ace(0x34a)]?(logHistory(_0x3e8ace(0x1d7),_0x248424+'\x20exchange\x20error'),logger['debug'](_0x3e8ace(0x28c),_0xad77fd)):(logHistory('error','Unknown\x20error\x20occured'),logger[_0x3e8ace(0x214)](_0x3e8ace(0x28c),_0xad77fd),await pauseBot());}}}}}}}}}}}function formatResult(_0x660a9b,_0x59dde9){return parseFloat(_0x660a9b['toFixed'](_0x59dde9));}function formatResultTruncate(_0x2890fe,_0x40b427){const _0x481a1a=_0x1c80fc;let _0x2a9662=formatResultString(_0x2890fe,0xa),_0x1ab266=_0x2a9662[_0x481a1a(0x35c)]('.');return _0x1ab266!=-0x1&&(_0x2a9662=_0x2a9662[_0x481a1a(0x250)](0x0,_0x1ab266+_0x40b427+0x1)),Number(_0x2a9662);}function formatResultString(_0x470721,_0x49bc2a){const _0x516e5d=_0x1c80fc;let _0x455c05;if(!(''+_0x470721)[_0x516e5d(0x2b8)]('e'))_0x455c05=+(Math[_0x516e5d(0x298)](_0x470721+'e+'+_0x49bc2a)+'e-'+_0x49bc2a);else{let _0x42c030=(''+_0x470721)[_0x516e5d(0x354)]('e'),_0x484747='';+_0x42c030[0x1]+_0x49bc2a>0x0&&(_0x484747='+'),_0x455c05=+(Math[_0x516e5d(0x298)](+_0x42c030[0x0]+'e'+_0x484747+(+_0x42c030[0x1]+_0x49bc2a))+'e-'+_0x49bc2a);}return Number(_0x455c05)[_0x516e5d(0x215)](_0x49bc2a);}function getServerTime(){const _0x25f54f=_0x1c80fc,_0x3c347b=new Date();return _0x3c347b['getFullYear']()+'/'+(_0x3c347b[_0x25f54f(0x1ff)]()+0x1)['toString']()[_0x25f54f(0x290)](0x2,'0')+'/'+_0x3c347b['getDate']()['toString']()[_0x25f54f(0x290)](0x2,'0')+'\x20'+_0x3c347b['getHours']()[_0x25f54f(0x26e)]()[_0x25f54f(0x290)](0x2,'0')+':'+_0x3c347b[_0x25f54f(0x33a)]()[_0x25f54f(0x26e)]()['padStart'](0x2,'0')+':'+_0x3c347b[_0x25f54f(0x36d)]()[_0x25f54f(0x26e)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x14c6c7=_0x1c80fc,_0x435c9c=shiftedTime();return _0x435c9c[_0x14c6c7(0x2a0)]()+'/'+(_0x435c9c[_0x14c6c7(0x1ff)]()+0x1)[_0x14c6c7(0x26e)]()[_0x14c6c7(0x290)](0x2,'0')+'/'+_0x435c9c['getDate']()[_0x14c6c7(0x26e)]()[_0x14c6c7(0x290)](0x2,'0')+'\x20'+_0x435c9c[_0x14c6c7(0x265)]()[_0x14c6c7(0x26e)]()[_0x14c6c7(0x290)](0x2,'0')+':'+_0x435c9c['getMinutes']()[_0x14c6c7(0x26e)]()['padStart'](0x2,'0')+':'+_0x435c9c[_0x14c6c7(0x36d)]()[_0x14c6c7(0x26e)]()[_0x14c6c7(0x290)](0x2,'0');}function getDate(){const _0x1f93cb=_0x1c80fc,_0x1b4399=shiftedTime();return _0x1b4399[_0x1f93cb(0x2a0)]()+'/'+(_0x1b4399['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1b4399[_0x1f93cb(0x236)]()[_0x1f93cb(0x26e)]()[_0x1f93cb(0x290)](0x2,'0');}function getHour(){const _0xde03a6=_0x1c80fc,_0x5b7d77=shiftedTime();return _0x5b7d77['getHours']()['toString']()[_0xde03a6(0x290)](0x2,'0');}function sleep(_0xd0f4ac){return new Promise(_0x342d79=>setTimeout(_0x342d79,_0xd0f4ac));}function shiftedTime(){const _0x169fee=_0x1c80fc,_0x39bcfb=new Date();let _0x351597=_0x39bcfb;if(config&&config[_0x169fee(0x27d)]!==0x0)_0x351597=fns['add'](_0x39bcfb,{'hours':config[_0x169fee(0x27d)]});return _0x351597;}function timer(_0x32e528){const _0x3ce8f6=_0x1c80fc,_0x331a45=new Date();!lasttime?console[_0x3ce8f6(0x27c)](getTimeStamp()+_0x3ce8f6(0x351),_0x32e528,_0x331a45):console[_0x3ce8f6(0x27c)](getTimeStamp()+_0x3ce8f6(0x351),_0x32e528,(_0x331a45-lasttime)/0x3e8),lasttime=_0x331a45;}