const _0x167be4=_0x1a8c;(function(_0x34436d,_0x3de7e2){const _0x313cb2=_0x1a8c,_0x41e895=_0x34436d();while(!![]){try{const _0x278dab=-parseInt(_0x313cb2(0x196))/0x1*(parseInt(_0x313cb2(0x10e))/0x2)+parseInt(_0x313cb2(0x17e))/0x3+-parseInt(_0x313cb2(0x1f0))/0x4*(parseInt(_0x313cb2(0xfe))/0x5)+-parseInt(_0x313cb2(0x1e4))/0x6*(parseInt(_0x313cb2(0x1d0))/0x7)+-parseInt(_0x313cb2(0x1a2))/0x8+parseInt(_0x313cb2(0x130))/0x9+-parseInt(_0x313cb2(0x116))/0xa*(-parseInt(_0x313cb2(0x142))/0xb);if(_0x278dab===_0x3de7e2)break;else _0x41e895['push'](_0x41e895['shift']());}catch(_0x15e332){_0x41e895['push'](_0x41e895['shift']());}}}(_0x45c1,0x21649));const _0x59421c=function(){let _0x4733fe=!![];return function(_0x3c05d7,_0x1851ae){const _0x3941ec=_0x4733fe?function(){const _0x5937c4=_0x1a8c;if(_0x1851ae){const _0x5624c5=_0x1851ae[_0x5937c4(0x127)](_0x3c05d7,arguments);return _0x1851ae=null,_0x5624c5;}}:function(){};return _0x4733fe=![],_0x3941ec;};}(),_0x23902f=_0x59421c(this,function(){const _0x523abf=_0x1a8c;return _0x23902f[_0x523abf(0x126)]()['search'](_0x523abf(0x1fe))[_0x523abf(0x126)]()['constructor'](_0x23902f)[_0x523abf(0x106)](_0x523abf(0x1fe));});_0x23902f();'use strict';const ccxt=require(_0x167be4(0x109)),low=require(_0x167be4(0x13d)),FileSync=require(_0x167be4(0x13f)),fs=require('fs'),fns=require(_0x167be4(0x150)),{WebsocketClient,DefaultLogger}=require(_0x167be4(0x1fc)),Crypt=require(_0x167be4(0x18d))[_0x167be4(0x152)];let exchange,wsClient;global[_0x167be4(0x1e3)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],lastCoinsToBalance='',loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x167be4(0x1bb))[_0x167be4(0x1f2)],botID=process[_0x167be4(0x20f)][0x2]||_0x167be4(0x128),pattern=/^[0-9]{3}$/;if(!pattern[_0x167be4(0x1f7)](botID))return console[_0x167be4(0x15c)]('Error:\x20Invalid\x20argument\x20'+botID+_0x167be4(0x133)),process['exit'](0x1);const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x167be4(0x110);function _0x45c1(){const _0x305fa5=['\x20order:\x20','Limit\x20(low-margin)','Performance\x20recreation\x20completed\x20successfully','buy','BTC/USDT','createOrder','limit-high','stringify','sortBy','log','value','event','configuration','valid','format','apiSecret','Order:\x20','fees','coins','FILLED','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Unfilled\x20order(s)\x20canceled\x20after\x20','Binance\x20API\x20secret\x20is\x20invalid','showname','symbols','has','apiKey','privateKey','spot','cooldown','last','BTCUSDT','remainingSymbols','Order(s)\x20filled\x20-\x20balancing\x20resumed','offset','datetime','orderType','ask','timeshift','InvalidNonce','amount','recreate','splice','137955hqBqDo','write','ordertype','usd','assign','basecoin','filled','DAI/','map','find','min','Manually\x20balance:\x20','fromCodePoint','startdate','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','hybrid-crypto-js','BTC/BUSD','fetchOHLCV','args','startnumber','\x20-\x20','limits','restart','subscribeSpotUserDataStream','180847QDLtAO','userData','page','message','toFixed','eachDayOfInterval','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','eventType','Order\x20filled:\x20','Invalid\x20quantity','closeWs','wss://stream.binance.com:9443','2144464GEddXg','\x20orders\x20in\x20less\x20than\x20','Order(s)\x20not\x20validated\x20after\x20','getFiat()','coinamount','currency','\x20|\x20Unknown\x20error\x20occured','cancelLoading','BTC','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','isArray','delta','kill','OrderNotFound','headless','buys','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','Pausing\x20bot\x20for\x205\x20minutes\x20(','padStart','fetchTickers','binanceus','bot-','exchange','EUR','split','./version.json','reconnected','length','placeOrder()','recreateHistory()','bot','************','excluded','getCoins()','reduce','breakeven','loadMarkets','WebSockets(','get','outboundAccountPosition','RSA-OAEP','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','cost','date','availableBalance','filter','4501tekcGq','sells','abs','timestamp','botname','replace','function','success','startprice','getPortfolio()','enabled','side','data',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','botID','forEach','orderStatus','fetchBalance','InsufficientFunds','ticker','510oIVZFJ','RequestTimeout','threshold','getHours','existsSync','portfolio','orderId','running','\x20minutes\x20-\x20balancing\x20resumed','defaults','emojisell','market','4UtKTQJ','coin','version','initclient','subscribeSpotKline','fetchOrders','\x20hour','test','toLowerCase','storeHeadless','BNB','type','binance','error','(((.+)+)+)+$','sell','price','HOT/BTC','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','symbol','configuration-stored','API-key\x20format\x20invalid','LIMIT','\x20|\x20Error\x20details:\x20','BTCEUR','reverse','USDC','time','fee','realized','AuthenticationError','argv','sort','841615nCYbnr','getMonth','sha256','round','parse','Market','formattedMessage','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','search','logs','kline','ccxt','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','yyyy/MM/dd','Executed\x20','getDate','2TZaFOi','parseISO','./config/','emojibuy','milliseconds','limit','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','number','212380hmSYwT','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','wss://stream.binance.us:9443','cancelOrder()','executionReport','target','getSeconds','keys','includes','Limit\x20(high-margin)','eur','order','trade','shift',':\x20Bot\x20','-events.json','toString','apply','001','timeout','Order\x20amount\x20is\x20invalid:\x20','HOT/EUR','USDT','cancelOrder','getFullYear','starting-balances','1320957jcTvdp','getTime','-config.json',',\x20must\x20be\x20a\x203\x20digit\x20number','accumulatedQuantity','coin-loading-progress','remove','getPortfolio','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','slice','push','send','getMinutes','lowdb','storeConfiguration','lowdb/adapters/FileSync','distribution','ExchangeNotAvailable','319xtVOgJ','balances','placeOrder','performance',')\x20|\x20Error\x20details:\x20','wsKey','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','BTCBUSD','progress','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','join','entries','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','event-history','date-fns','DDoSProtection','Crypt'];_0x45c1=function(){return _0x305fa5;};return _0x45c1();}!fs[_0x167be4(0x1e8)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x167be4(0x1b7)+botID+_0x167be4(0x132),logfile=configpath+_0x167be4(0x1b7)+botID+_0x167be4(0x125),performancefile=configpath+_0x167be4(0x1b7)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x167be4(0x1ed)]({'logs':[]})[_0x167be4(0x17f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x167be4(0x1ed)]({'data':[]})[_0x167be4(0x17f)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x167be4(0x1ed)]({'bot':[]})[_0x167be4(0x17f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x167be4(0x1ed)]({'coins':[]})[_0x167be4(0x17f)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x167be4(0x208),'symbol':'BTC/EUR'},'usd':{'coin':_0x167be4(0x172),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x406bae)=>{},'debug':(..._0x581956)=>{},'notice':(..._0x364703)=>{},'info':(..._0x132b6b)=>{},'warning':(..._0x2bceaf)=>{},'error':async function(..._0x113ff2){const _0x3cd084=_0x167be4,_0x5a137d=new Date()[_0x3cd084(0x131)]();if(!lastErrorShown||_0x5a137d-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3cd084(0x131)](),logHistory(_0x3cd084(0x1fd),_0x3cd084(0x1c7)+consecutivePauses+_0x3cd084(0x1dd));let _0x65ec14='';if(_0x113ff2[0x0])_0x65ec14+=_0x113ff2[0x0];if(_0x113ff2[0x1]&&_0x113ff2[0x1][_0x3cd084(0x1fd)]&&_0x113ff2[0x1][_0x3cd084(0x1fd)][_0x3cd084(0x199)])_0x65ec14+=_0x3cd084(0x192)+_0x113ff2[0x1][_0x3cd084(0x1fd)][_0x3cd084(0x199)];logging(_0x3cd084(0x1c7)+consecutivePauses+_0x3cd084(0x146),''+_0x65ec14),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x167be4(0x100),'rsaStandard':_0x167be4(0x1ca)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x167be4(0x179)]!=config[_0x167be4(0x179)]&&updateTimeshift(settings[_0x167be4(0x179)]);process['send']({'started':'running'},_0x5519f=>{}),initializeProcessListeners();function proxyEmit(_0x245b88,_0x5c862f=null){const _0x14c847=_0x167be4;process[_0x14c847(0x13b)]({'function':_0x245b88,'args':_0x5c862f},_0x5641ef=>{});}function initializeProcessListeners(){const _0x54ee8e=_0x167be4;process['on'](_0x54ee8e(0x199),_0x1a5878=>{const _0x369593=_0x54ee8e;switch(Object[_0x369593(0x11d)](_0x1a5878)[0x0]){case _0x369593(0x179):_0x1a5878[_0x369593(0x179)]!=undefined&&(settings[_0x369593(0x179)]=_0x1a5878['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x369593(0x1d6):switch(_0x1a5878[_0x369593(0x1d6)]){case _0x369593(0x1f3):initclient();break;case'emitHistory':emitHistory(_0x1a5878[_0x369593(0x190)]);break;case _0x369593(0x137):getPortfolio(_0x1a5878[_0x369593(0x190)]);break;case _0x369593(0x13e):storeConfiguration(_0x1a5878['args']);break;case _0x369593(0x1f9):storeHeadless(_0x1a5878['args']);break;case'getStartingBalances':getStartingBalances();break;case _0x369593(0x144):placeOrder(_0x1a5878['args']);break;case _0x369593(0x1a9):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x337736=_0x167be4;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x337736(0x16d)],config[_0x337736(0x162)]);let _0xc5c346=await loadSymbols();_0xc5c346&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x28421a,_0x43ae57){const _0x2cfa5a=_0x167be4,_0x1ca86d=ccxt[config[_0x2cfa5a(0x1b8)]];let _0x366936;switch(config[_0x2cfa5a(0x1b8)]){case _0x2cfa5a(0x1fc):_0x366936='wss://stream.binance.com:9443';break;case _0x2cfa5a(0x1b6):_0x366936=_0x2cfa5a(0x118);break;default:_0x366936=_0x2cfa5a(0x1a1);}exchange=new _0x1ca86d({'apiKey':_0x28421a,'secret':_0x43ae57,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x28421a,'api_secret':_0x43ae57,'beautify':!![],'wsUrl':_0x366936},logger),config[_0x2cfa5a(0x1b8)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x2cfa5a(0x149),'symbol':_0x2cfa5a(0x18e)},'usd':{'coin':_0x2cfa5a(0x172),'symbol':_0x2cfa5a(0x157)}});}async function loadSymbols(){const _0x4710f2=_0x167be4;let _0x4a380f;try{markets=await exchange[_0x4710f2(0x1c6)]();const _0x472905=[_0x4710f2(0x185),_0x4710f2(0x201),_0x4710f2(0x12b)];allSymbols=exchange[_0x4710f2(0x16b)]['filter'](_0x282f77=>{const _0x180f80=_0x4710f2;let _0x392d2a=![];return _0x472905[_0x180f80(0x1df)](_0x511814=>{const _0x594636=_0x180f80;if(_0x282f77[_0x594636(0x11e)](_0x511814))_0x392d2a=!![];}),!_0x392d2a;}),_0x4a380f=!![];}catch(_0x4e1f12){await handleError(_0x4e1f12,'loadSymbols()'),_0x4a380f=![];}return _0x4a380f;}async function initbot(){const _0x390e47=_0x167be4;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x30362a=dbCoinResults[_0x390e47(0x1c8)](_0x390e47(0x165))[_0x390e47(0x15d)]();if(_0x30362a['length']==0x0)await resetCoinResults();}async function initclient(){const _0x42c3a1=_0x167be4;proxyEmit(_0x42c3a1(0x15f),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x42c3a1(0x143),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x11a6bd=_0x167be4;wsinitialized=![];ws1&&(ws1[_0x11a6bd(0x1df)](_0x46c526=>{try{wsClient['closeWs'](_0x46c526);}catch(_0x18cb9c){}}),ws1=[]);if(ws2){try{wsClient[_0x11a6bd(0x1a0)](ws2);}catch(_0x29d952){}ws2=null;}}async function initws(){const _0x2735e6=_0x167be4;cleanws();let _0x4b8f32=[];currentCoins['forEach'](_0x2a0c2f=>{const _0x1e1d2e=_0x1a8c;if(_0x2a0c2f[_0x1e1d2e(0x1f1)]!=config[_0x1e1d2e(0x183)])_0x4b8f32[_0x1e1d2e(0x13a)](noslash(_0x2a0c2f[_0x1e1d2e(0x203)]));});if(!_0x4b8f32[_0x2735e6(0x11e)](stablecoins[_0x2735e6(0x120)]['coin']))_0x4b8f32[_0x2735e6(0x13a)](stablecoins[_0x2735e6(0x120)][_0x2735e6(0x1f1)]);if(!_0x4b8f32[_0x2735e6(0x11e)](stablecoins[_0x2735e6(0x181)]['coin']))_0x4b8f32[_0x2735e6(0x13a)](stablecoins[_0x2735e6(0x181)][_0x2735e6(0x1f1)]);if(!_0x4b8f32[_0x2735e6(0x11e)]('BNB'+config[_0x2735e6(0x183)]))_0x4b8f32['push'](_0x2735e6(0x1fa)+config[_0x2735e6(0x183)]);try{_0x4b8f32['forEach']((_0x3fa1dd,_0x9fff59)=>{const _0x37ceb9=_0x2735e6;ws1[_0x9fff59]=wsClient[_0x37ceb9(0x1f4)](_0x3fa1dd,'1m');}),ws2=wsClient[_0x2735e6(0x195)](),wsClient['on'](_0x2735e6(0x104),_0x30a72b=>{const _0x22aa86=_0x2735e6;if(!Array[_0x22aa86(0x1ac)](_0x30a72b)&&!_0x30a72b[_0x22aa86(0x147)][_0x22aa86(0x11e)](_0x22aa86(0x197))){if(_0x30a72b[_0x22aa86(0x19d)]===_0x22aa86(0x108)){global[_0x22aa86(0x1e3)][_0x30a72b[_0x22aa86(0x108)][_0x22aa86(0x203)]]=_0x30a72b[_0x22aa86(0x108)]['close'];return;}}else{if(!Array[_0x22aa86(0x1ac)](_0x30a72b)&&_0x30a72b[_0x22aa86(0x147)]['includes'](_0x22aa86(0x197))){if(_0x30a72b['wsMarket']['includes'](_0x22aa86(0x16f))){updateNumberCoins(_0x30a72b);return;}}}}),wsClient['on'](_0x2735e6(0x1bc),async _0x45c41b=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x3d951d){await handleError(_0x3d951d,'initws()');}let _0x23ea89,_0x30a111=0x0;loading['remainingSymbols']=[];let _0x7a90e5=0x0;currentCoins[_0x2735e6(0x1df)](_0x334cca=>{const _0x2dde2b=_0x2735e6;if(_0x334cca[_0x2dde2b(0x1f1)]!=config[_0x2dde2b(0x183)])loading[_0x2dde2b(0x173)]['push'](_0x334cca['symbol']);}),loadingCanceled=![];while(_0x23ea89!=currentCoins[_0x2735e6(0x1bd)]-0x1){_0x23ea89=0x0,currentCoins[_0x2735e6(0x1df)](_0x1d06bc=>{const _0x5b5778=_0x2735e6;_0x1d06bc[_0x5b5778(0x1f1)]!=config[_0x5b5778(0x183)]&&global[_0x5b5778(0x1e3)][noslash(_0x1d06bc[_0x5b5778(0x203)])]&&(loading[_0x5b5778(0x173)]=loading['remainingSymbols'][_0x5b5778(0x1cf)](_0x3cc5d3=>_0x3cc5d3!=_0x1d06bc['symbol']),_0x23ea89++);}),loading[_0x2735e6(0x14a)]=Math[_0x2735e6(0x101)](_0x23ea89/(currentCoins[_0x2735e6(0x1bd)]-0x1)*0x64);_0x7a90e5>0x1e*0x5&&(loading[_0x2735e6(0x129)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x23ea89!=_0x30a111&&(_0x30a111=_0x23ea89,emitLoadingProgress()),_0x7a90e5++,await sleep(0xc8);}if(_0x23ea89==currentCoins[_0x2735e6(0x1bd)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x321bbc=_0x167be4;proxyEmit(_0x321bbc(0x135),loading);}async function getFiat(){const _0x3464ec=_0x167be4;let _0x1d14de=0x0,_0x6ad0c0=0x0;try{_0x1d14de=global[_0x3464ec(0x1e3)][stablecoins['eur'][_0x3464ec(0x1f1)]],_0x6ad0c0=global['ticker'][stablecoins['usd']['coin']];}catch(_0x31a20b){await handleError(_0x31a20b,_0x3464ec(0x1a5));}return{'eur':Number(_0x1d14de),'usd':Number(_0x6ad0c0)};}async function setStartDatePerformance(_0x3aa6e4){const _0x3b4031=_0x167be4,_0x41a5fd=fns['format'](new Date(_0x3aa6e4[_0x3b4031(0x18b)]),_0x3b4031(0x10b));let _0x1cd78b=[];_0x1cd78b[stablecoins['eur'][_0x3b4031(0x1f1)]]=await getCloses(stablecoins['eur'][_0x3b4031(0x203)],new Date(_0x3aa6e4['startdate']),0x1),_0x1cd78b[stablecoins['usd'][_0x3b4031(0x1f1)]]=await getCloses(stablecoins['usd'][_0x3b4031(0x203)],new Date(_0x3aa6e4[_0x3b4031(0x18b)]),0x1);let _0x184890,_0x48372a=[];_0x3aa6e4[_0x3b4031(0x1e9)][_0x3b4031(0x1df)](_0x330a97=>{const _0x37b9c6=_0x3b4031;!_0x330a97[_0x37b9c6(0x1c2)]&&_0x48372a[_0x37b9c6(0x13a)]({'coin':_0x330a97[_0x37b9c6(0x1f1)],'number':_0x330a97[_0x37b9c6(0x191)],'price':_0x330a97[_0x37b9c6(0x1d8)]});}),_0x184890={'date':_0x41a5fd,'eur':_0x1cd78b[stablecoins['eur'][_0x3b4031(0x1f1)]][0x0],'usd':_0x1cd78b[stablecoins[_0x3b4031(0x181)][_0x3b4031(0x1f1)]][0x0],'coins':_0x48372a};let _0x4bde5a=dbPerformance['get'](_0x3b4031(0x1dc))['find']({'date':_0x41a5fd})[_0x3b4031(0x15d)]();_0x4bde5a?dbPerformance[_0x3b4031(0x1c8)]('data')['find']({'date':_0x41a5fd})[_0x3b4031(0x182)](_0x184890)[_0x3b4031(0x17f)]():dbPerformance['get'](_0x3b4031(0x1dc))['push'](_0x184890)[_0x3b4031(0x17f)](),_0x4bde5a=dbPerformance[_0x3b4031(0x1c8)](_0x3b4031(0x1dc))[_0x3b4031(0x15b)]('date')[_0x3b4031(0x15d)](),_0x4bde5a[_0x3b4031(0x1df)](_0x1a20af=>{const _0x37a06a=_0x3b4031;_0x1a20af[_0x37a06a(0x1cd)]<_0x41a5fd&&dbPerformance[_0x37a06a(0x1c8)](_0x37a06a(0x1dc))[_0x37a06a(0x136)]({'date':_0x1a20af[_0x37a06a(0x1cd)]})[_0x37a06a(0x17f)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x476ebc){const _0x34359f=_0x167be4;let _0x249336,_0x46afe5=[];logHistory(_0x34359f(0x1d7),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x476ebc[_0x34359f(0x1e9)][_0x34359f(0x1df)](_0x3b335c=>{const _0x548da9=_0x34359f;if(_0x3b335c[_0x548da9(0x1f1)]!=config[_0x548da9(0x183)]&&!_0x3b335c[_0x548da9(0x1c2)])_0x46afe5[_0x548da9(0x13a)]({'coin':_0x3b335c[_0x548da9(0x1f1)],'symbol':_0x3b335c[_0x548da9(0x203)]});});let _0x515f73=[];try{const _0x5ceb99=fns[_0x34359f(0x161)](fns[_0x34359f(0x10f)](_0x476ebc[_0x34359f(0x18b)]['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0xf595e1 of _0x46afe5){if(_0xf595e1[_0x34359f(0x1f1)]!=config[_0x34359f(0x183)])_0x249336=await exchange[_0x34359f(0x1f5)](_0xf595e1[_0x34359f(0x203)],Date[_0x34359f(0x102)](_0x5ceb99));_0x249336[_0x34359f(0x1df)](_0x26bda9=>{const _0x15fe0=_0x34359f,_0x40f791=_0xf595e1[_0x15fe0(0x203)][_0x15fe0(0x11e)](config['basecoin']+'/'),_0x3a9a2b=fns['format'](fns[_0x15fe0(0x10f)](_0x26bda9['datetime']),'yyyy/MM/dd\x20HH:mm:ss'),_0x4f5b66=fns[_0x15fe0(0x161)](fns['parseISO'](_0x26bda9[_0x15fe0(0x176)]),'yyyy/MM/dd');let _0x492baa;if(_0x26bda9[_0x15fe0(0x1db)]==_0x15fe0(0x156)&&_0x40f791==![])_0x492baa=_0x26bda9[_0x15fe0(0x17b)];if(_0x26bda9[_0x15fe0(0x1db)]=='buy'&&_0x40f791==!![])_0x492baa=-_0x26bda9[_0x15fe0(0x17b)]*_0x26bda9[_0x15fe0(0x200)];if(_0x26bda9[_0x15fe0(0x1db)]==_0x15fe0(0x1ff)&&_0x40f791==![])_0x492baa=-_0x26bda9['amount'];if(_0x26bda9['side']=='sell'&&_0x40f791==!![])_0x492baa=_0x26bda9[_0x15fe0(0x17b)]*_0x26bda9[_0x15fe0(0x200)];_0x515f73['push']({'timestamp':_0x3a9a2b,'date':_0x4f5b66,'coin':_0xf595e1[_0x15fe0(0x1f1)],'symbol':_0xf595e1[_0x15fe0(0x203)],'type':_0x26bda9[_0x15fe0(0x1fb)],'side':_0x26bda9['side'],'reverse':_0x40f791,'amount':formatResult(_0x26bda9[_0x15fe0(0x184)],0x8),'filled':formatResult(_0x26bda9[_0x15fe0(0x184)],0x8),'coinamount':formatResult(_0x492baa,0x8),'price':formatResult(_0x26bda9['price'],0x8)});let _0x331483;if(_0x26bda9['side']=='buy'&&_0x40f791==![])_0x331483=-_0x26bda9[_0x15fe0(0x17b)]*_0x26bda9[_0x15fe0(0x200)];if(_0x26bda9['side']==_0x15fe0(0x156)&&_0x40f791==!![])_0x331483=_0x26bda9[_0x15fe0(0x17b)];if(_0x26bda9[_0x15fe0(0x1db)]=='sell'&&_0x40f791==![])_0x331483=_0x26bda9['amount']*_0x26bda9[_0x15fe0(0x200)];if(_0x26bda9[_0x15fe0(0x1db)]==_0x15fe0(0x1ff)&&_0x40f791==!![])_0x331483=-_0x26bda9[_0x15fe0(0x17b)];_0x515f73[_0x15fe0(0x13a)]({'date':_0x4f5b66,'coin':config[_0x15fe0(0x183)],'coinamount':formatResult(_0x331483,0x8)});});}_0x515f73[_0x34359f(0xfd)]((_0x4cb03e,_0x1c94b3)=>_0x4cb03e[_0x34359f(0x1d3)]>_0x1c94b3['timestamp']?0x1:_0x1c94b3[_0x34359f(0x1d3)]>_0x4cb03e[_0x34359f(0x1d3)]?-0x1:0x0),dbLogs[_0x34359f(0x1c8)]('logs')[_0x34359f(0x136)]()[_0x34359f(0x17f)](),_0x515f73['forEach'](_0x3fe90a=>{const _0x591544=_0x34359f;let _0x1d8ac2;_0x3fe90a['coin']!=config[_0x591544(0x183)]&&(_0x1d8ac2={'time':_0x3fe90a[_0x591544(0x1d3)],'type':_0x591544(0x121),'event':_0x591544(0x163)+_0x3fe90a[_0x591544(0x203)]+'\x20'+_0x3fe90a[_0x591544(0x1db)]+'\x20#'+_0x3fe90a['amount']+'\x20@'+_0x3fe90a[_0x591544(0x200)]},dbLogs['get'](_0x591544(0x107))[_0x591544(0x13a)](_0x1d8ac2)[_0x591544(0x17f)]());});const _0x1e4458=fns[_0x34359f(0x19b)]({'start':new Date(_0x476ebc[_0x34359f(0x18b)]),'end':new Date()})[_0x34359f(0x186)](_0x2d6d4e=>fns[_0x34359f(0x161)](_0x2d6d4e,_0x34359f(0x10b)));let _0x314a73=[];_0x476ebc[_0x34359f(0x1e9)]['forEach'](_0xb86f87=>{const _0x22e119=_0x34359f;if(!_0xb86f87[_0x22e119(0x1c2)]){_0x314a73[_0xb86f87[_0x22e119(0x1f1)]]=[];let _0x11c8ad=_0xb86f87[_0x22e119(0x191)];_0x1e4458[_0x22e119(0x1df)]((_0x91507e,_0x4e4df9)=>{const _0x1a2fba=_0x22e119;let _0x2230c3=_0x515f73[_0x1a2fba(0x1cf)](_0x44075c=>_0x44075c[_0x1a2fba(0x1f1)]==_0xb86f87[_0x1a2fba(0x1f1)]&&_0x44075c[_0x1a2fba(0x1cd)]==_0x91507e);if(_0x2230c3[_0x1a2fba(0x1bd)]!=0x0){let _0x4e6f09=_0x2230c3[_0x1a2fba(0x1c4)]((_0x14e1ed,_0x149fa9)=>{const _0x59f28a=_0x1a2fba;return _0x14e1ed+=_0x149fa9[_0x59f28a(0x1a6)],_0x14e1ed;},0x0);_0x11c8ad+=_0x4e6f09;}_0x314a73[_0xb86f87[_0x1a2fba(0x1f1)]][_0x91507e]=_0x11c8ad;});}});const _0x300d73=[..._0x46afe5];_0x300d73[_0x34359f(0x13a)]({'coin':stablecoins[_0x34359f(0x120)][_0x34359f(0x1f1)],'symbol':stablecoins[_0x34359f(0x120)]['symbol']}),_0x300d73[_0x34359f(0x13a)]({'coin':stablecoins[_0x34359f(0x181)]['coin'],'symbol':stablecoins[_0x34359f(0x181)][_0x34359f(0x203)]});let _0x32b653=[];for(const _0x244bd3 of _0x300d73){_0x32b653[_0x244bd3[_0x34359f(0x1f1)]]=await getCloses(_0x244bd3[_0x34359f(0x203)],new Date(_0x476ebc[_0x34359f(0x18b)]));}dbPerformance[_0x34359f(0x1c8)](_0x34359f(0x1dc))[_0x34359f(0x136)]()[_0x34359f(0x17f)](),_0x1e4458[_0x34359f(0x1df)]((_0x53d3a7,_0x56f67a)=>{const _0x2f021b=_0x34359f;let _0x235413,_0x32a49d=[];_0x56f67a==0x0?(_0x476ebc[_0x2f021b(0x1e9)][_0x2f021b(0x1df)](_0x488bcd=>{const _0x4955e2=_0x2f021b;!_0x488bcd[_0x4955e2(0x1c2)]&&_0x32a49d[_0x4955e2(0x13a)]({'coin':_0x488bcd['coin'],'number':_0x488bcd[_0x4955e2(0x191)],'price':_0x488bcd['startprice']});}),_0x235413={'date':_0x53d3a7,'eur':_0x32b653[stablecoins[_0x2f021b(0x120)][_0x2f021b(0x1f1)]][_0x56f67a],'usd':_0x32b653[stablecoins[_0x2f021b(0x181)]['coin']][_0x56f67a],'coins':_0x32a49d}):(_0x476ebc[_0x2f021b(0x1e9)][_0x2f021b(0x1df)](_0x1b2a08=>{const _0x56efd7=_0x2f021b;!_0x1b2a08[_0x56efd7(0x1c2)]&&_0x32a49d[_0x56efd7(0x13a)]({'coin':_0x1b2a08[_0x56efd7(0x1f1)],'number':_0x314a73[_0x1b2a08[_0x56efd7(0x1f1)]][_0x53d3a7],'price':_0x1b2a08[_0x56efd7(0x1f1)]==config[_0x56efd7(0x183)]?0x1:_0x32b653[_0x1b2a08[_0x56efd7(0x1f1)]][_0x56f67a]});}),_0x235413={'date':_0x53d3a7,'eur':_0x32b653[stablecoins[_0x2f021b(0x120)][_0x2f021b(0x1f1)]][_0x56f67a],'usd':_0x32b653[stablecoins[_0x2f021b(0x181)]['coin']][_0x56f67a],'coins':_0x32a49d}),dbPerformance[_0x2f021b(0x1c8)]('data')[_0x2f021b(0x13a)](_0x235413)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x4b55d8 of _0x515f73){_0x4b55d8[_0x34359f(0x1f1)]!=config[_0x34359f(0x183)]&&await updateCoinResults(_0x4b55d8);}logHistory(_0x34359f(0x1d7),_0x34359f(0x155));}catch(_0x4942ef){await handleError(_0x4942ef,_0x34359f(0x1bf));}}async function getCloses(_0x36ba66,_0x30276b,_0x3d7d68=undefined){const _0x241ee4=_0x167be4,_0xf06453='1d';let _0x2da8f2,_0x25a073;const _0x3a93b5=fns['differenceInCalendarDays'](new Date(),_0x30276b)+0x1;try{const _0x51b324=exchange[_0x241ee4(0x112)]()-_0x3a93b5*0x18*0xe10*0x3e8;_0x2da8f2=await exchange[_0x241ee4(0x18f)](_0x36ba66,_0xf06453,_0x51b324,_0x3d7d68),_0x25a073=await exchange[_0x241ee4(0x1b5)](_0x36ba66);}catch(_0x52808d){await handleError(_0x52808d,'getCloses()');}let _0x5f4bf7=ohlcvToCloses(_0x2da8f2);return _0x5f4bf7[_0x241ee4(0x13a)](_0x25a073[_0x36ba66]['last']),_0x5f4bf7;}function _0x1a8c(_0x17c521,_0x1a8c78){const _0x182390=_0x45c1();return _0x1a8c=function(_0x23902f,_0x59421c){_0x23902f=_0x23902f-0xfd;let _0x45c13d=_0x182390[_0x23902f];return _0x45c13d;},_0x1a8c(_0x17c521,_0x1a8c78);}function ohlcvToCloses(_0x34c986){const _0x4bb0b0=_0x167be4;let _0x1a677b=[];return _0x34c986[_0x4bb0b0(0x1df)](function(_0x42daba){const _0x174fc3=_0x4bb0b0;_0x1a677b[_0x174fc3(0x13a)](_0x42daba[0x4]);}),_0x1a677b;}function getConfiguration(_0x5006d4){const _0x3f10c3=_0x167be4;let _0xaf61e5=dbConfig[_0x3f10c3(0x1c8)](_0x3f10c3(0x1c0))[_0x3f10c3(0x187)]({'botID':_0x5006d4})['value']();if(_0xaf61e5){let _0x5a4825=![];!_0xaf61e5['exchange']&&(_0xaf61e5={..._0xaf61e5,'exchange':'binance'},_0x5a4825=!![]),!_0xaf61e5[_0x3f10c3(0x183)]&&(_0xaf61e5={..._0xaf61e5,'basecoin':_0x3f10c3(0x1aa)},_0x5a4825=!![]),!_0xaf61e5[_0x3f10c3(0x180)]&&(_0xaf61e5={..._0xaf61e5,'ordertype':'market'},_0x5a4825=!![]),!_0xaf61e5[_0x3f10c3(0x129)]&&(_0xaf61e5={..._0xaf61e5,'timeout':0x14},_0x5a4825=!![]),!_0xaf61e5['emojibuy']&&(_0xaf61e5={..._0xaf61e5,'emojibuy':''},_0x5a4825=!![]),!_0xaf61e5['emojisell']&&(_0xaf61e5={..._0xaf61e5,'emojisell':''},_0x5a4825=!![]),!_0xaf61e5['showname']&&(_0xaf61e5={..._0xaf61e5,'showname':![]},_0x5a4825=!![]),_0x5a4825&&(_0xaf61e5={'botID':_0xaf61e5[_0x3f10c3(0x1de)],'exchange':_0xaf61e5[_0x3f10c3(0x1b8)],'apiKey':_0xaf61e5[_0x3f10c3(0x16d)],'apiSecret':_0xaf61e5[_0x3f10c3(0x162)],'basecoin':_0xaf61e5[_0x3f10c3(0x183)],'botname':_0xaf61e5['botname'],'showname':_0xaf61e5[_0x3f10c3(0x16a)],'threshold':_0xaf61e5[_0x3f10c3(0x1e6)],'ordertype':_0xaf61e5[_0x3f10c3(0x180)],'timeout':_0xaf61e5[_0x3f10c3(0x129)],'startdate':_0xaf61e5[_0x3f10c3(0x18b)],'recreate':_0xaf61e5[_0x3f10c3(0x17c)],'timeshift':_0xaf61e5['timeshift'],'headless':_0xaf61e5[_0x3f10c3(0x1b0)],'cooldown':_0xaf61e5[_0x3f10c3(0x170)],'emojibuy':_0xaf61e5['emojibuy'],'emojisell':_0xaf61e5[_0x3f10c3(0x1ee)],'portfolio':_0xaf61e5['portfolio']},dbConfig[_0x3f10c3(0x1c8)](_0x3f10c3(0x1c0))[_0x3f10c3(0x136)]()[_0x3f10c3(0x17f)](),dbConfig['get'](_0x3f10c3(0x1c0))['push'](_0xaf61e5)[_0x3f10c3(0x17f)]());}else _0xaf61e5={'botID':_0x5006d4,'exchange':_0x3f10c3(0x1fc),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x5006d4,'showname':![],'threshold':'3','ordertype':_0x3f10c3(0x1ef),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3f10c3(0x179)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0xaf61e5;}function emittedConfiguration(){const _0x23501b=_0x167be4;let _0x1150bd;return config[_0x23501b(0x16d)]==''?_0x1150bd=config:_0x1150bd={...config,'apiKey':_0x23501b(0x1c1),'apiSecret':_0x23501b(0x1c1)},_0x1150bd;}function getSettings(){const _0x1cb36f=_0x167be4;return dbSettings[_0x1cb36f(0x1c8)]('settings')[_0x1cb36f(0x15d)]();}function getSecure(){const _0x59fa3d=_0x167be4;return dbSecure[_0x59fa3d(0x1c8)]('secure')[_0x59fa3d(0x15d)]()||{};}function updateTimeshift(_0x3aaebd){const _0x4d6e27=_0x167be4;let _0x133254=dbConfig['get']('bot')[_0x4d6e27(0x187)]({'botID':botID})[_0x4d6e27(0x15d)]();_0x133254&&dbConfig[_0x4d6e27(0x1c8)](_0x4d6e27(0x1c0))[_0x4d6e27(0x187)]({'botID':botID})[_0x4d6e27(0x182)]({'timeshift':_0x3aaebd})['write'](),config[_0x4d6e27(0x179)]=_0x3aaebd,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x9be6fb){const _0x5dd571=_0x167be4;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x53b921=dbConfig['get'](_0x5dd571(0x1c0))['find']({'botID':botID})[_0x5dd571(0x15d)]();_0x9be6fb={..._0x9be6fb,'apiKey':crypt['decrypt'](secure[_0x5dd571(0x16e)],_0x9be6fb[_0x5dd571(0x16d)])[_0x5dd571(0x199)],'apiSecret':crypt['decrypt'](secure[_0x5dd571(0x16e)],_0x9be6fb['apiSecret'])[_0x5dd571(0x199)]};if(_0x53b921){if(_0x9be6fb['apiKey']==_0x5dd571(0x1c1))_0x9be6fb[_0x5dd571(0x16d)]=config[_0x5dd571(0x16d)];if(_0x9be6fb[_0x5dd571(0x162)]==_0x5dd571(0x1c1))_0x9be6fb[_0x5dd571(0x162)]=config[_0x5dd571(0x162)];dbConfig['get'](_0x5dd571(0x1c0))[_0x5dd571(0x187)]({'botID':botID})['assign'](_0x9be6fb)[_0x5dd571(0x17f)]();}else dbConfig[_0x5dd571(0x1c8)](_0x5dd571(0x1c0))['push'](_0x9be6fb)[_0x5dd571(0x17f)](),process['send']({'status':_0x5dd571(0x1da),'live':_0x5dd571(0x1eb)},_0x372ce1=>{});config={..._0x9be6fb};if(config[_0x5dd571(0x17c)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x9be6fb['botname']},_0x1abeb3=>{}),proxyEmit(_0x5dd571(0x204)),reset();}async function storeHeadless(_0x4153a8){const _0x47f065=_0x167be4,_0x3f93c3={...config,'headless':_0x4153a8['headless']};let _0x709dd7=dbConfig[_0x47f065(0x1c8)](_0x47f065(0x1c0))[_0x47f065(0x187)]({'botID':botID})[_0x47f065(0x15d)]();_0x709dd7&&dbConfig[_0x47f065(0x1c8)](_0x47f065(0x1c0))[_0x47f065(0x187)]({'botID':botID})[_0x47f065(0x182)](_0x3f93c3)['write'](),config={..._0x3f93c3},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x499a6a){const _0x313edf=_0x167be4;return _0x499a6a[_0x313edf(0x1d5)]('/','');}function updateNumberCoins(_0x166d7c){const _0x2d95d5=_0x167be4;_0x166d7c[_0x2d95d5(0x19d)]&&_0x166d7c[_0x2d95d5(0x19d)]==_0x2d95d5(0x1c9)&&_0x166d7c[_0x2d95d5(0x143)][_0x2d95d5(0x1df)](_0x3ea0c7=>{const _0x23ce3d=_0x2d95d5;let _0x402d10=currentCoins[_0x23ce3d(0x187)](_0x24b410=>_0x24b410[_0x23ce3d(0x1f1)]==_0x3ea0c7['asset']),_0x7ab134=config[_0x23ce3d(0x1e9)][_0x23ce3d(0x187)](_0x560178=>_0x560178[_0x23ce3d(0x1f1)]==_0x3ea0c7['asset']);if(_0x402d10&&_0x7ab134)_0x402d10[_0x23ce3d(0x115)]=Math['max'](Number(_0x3ea0c7[_0x23ce3d(0x1ce)])+(_0x7ab134['offset']||0x0),0x0);});if(_0x166d7c['eventType']&&_0x166d7c[_0x2d95d5(0x19d)]==_0x2d95d5(0x11a)){if(_0x166d7c[_0x2d95d5(0x177)]==_0x2d95d5(0x206)&&_0x166d7c[_0x2d95d5(0x1e0)]==_0x2d95d5(0x166)){if(lastOrders)lastOrders[_0x2d95d5(0x1df)](_0x5c1ce5=>{const _0x1d0de4=_0x2d95d5;if(_0x5c1ce5['orderId']==_0x166d7c[_0x1d0de4(0x1ea)]){if(_0x5c1ce5[_0x1d0de4(0x209)])_0x5c1ce5[_0x1d0de4(0x184)]=_0x166d7c[_0x1d0de4(0x134)]*_0x5c1ce5[_0x1d0de4(0x200)];else _0x5c1ce5[_0x1d0de4(0x184)]=_0x166d7c[_0x1d0de4(0x134)];}});}}}async function getCoins(_0x76680b=!![],_0x6f726=config[_0x167be4(0x183)]){const _0x576609=_0x167be4;let _0x3a88d6,_0x26fbce=[],_0x3b6ae5=[],_0x49e1e1=[];try{_0x3a88d6=await exchange[_0x576609(0x1e1)](),mybalances=_0x3a88d6['total'];if(!_0x76680b)for(const [_0x1d9376,_0x1af532]of Object[_0x576609(0x14d)](mybalances)){_0x49e1e1[_0x576609(0x13a)](_0x1d9376);}else config['portfolio']['forEach'](_0x368acd=>{const _0x4a5453=_0x576609;if(!_0x368acd['excluded'])_0x49e1e1[_0x4a5453(0x13a)](_0x368acd[_0x4a5453(0x1f1)]);});if(_0x6f726=='')for(const [_0x24e0a9,_0x3b953f]of Object[_0x576609(0x14d)](mybalances)){_0x3b953f[_0x576609(0x126)]()!=0x0&&_0x3b6ae5[_0x576609(0x13a)]({'coin':_0x24e0a9});}else for(const [_0x4c9660,_0x1990e5]of Object[_0x576609(0x14d)](mybalances)){if(_0x49e1e1['includes'](_0x4c9660)){const _0x4597ad=config[_0x576609(0x1e9)][_0x576609(0x187)](_0x9ed8e=>_0x9ed8e[_0x576609(0x1f1)]==_0x4c9660);if((_0x1990e5['toString']()!=0x0||_0x4597ad)&&(allSymbols['includes'](_0x4c9660+'/'+_0x6f726)||_0x4c9660==_0x6f726))_0x3b6ae5[_0x576609(0x13a)]({'coin':_0x4c9660,'symbol':_0x4c9660+'/'+_0x6f726,'reverse':![],'number':Math['max'](_0x1990e5+(_0x4597ad&&_0x4597ad['offset']||0x0),0x0)}),_0x4c9660!=_0x6f726&&_0x26fbce[_0x576609(0x13a)](_0x4c9660+'/'+_0x6f726);else(_0x1990e5[_0x576609(0x126)]()!=0x0||_0x4597ad)&&allSymbols['includes'](_0x6f726+'/'+_0x4c9660)&&(_0x3b6ae5[_0x576609(0x13a)]({'coin':_0x4c9660,'symbol':_0x6f726+'/'+_0x4c9660,'reverse':!![],'number':Math['max'](_0x1990e5+(_0x4597ad&&_0x4597ad[_0x576609(0x175)]||0x0),0x0)}),_0x4c9660!=_0x6f726&&_0x26fbce['push'](_0x6f726+'/'+_0x4c9660));}}}catch(_0x5a4106){if(!_0x76680b){if(_0x5a4106[_0x576609(0x126)]()[_0x576609(0x11e)](_0x576609(0x205)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x5a4106[_0x576609(0x126)]()[_0x576609(0x11e)]('AuthenticationError'))return logHistory(_0x576609(0x1fd),_0x576609(0x138)),![];else{if(_0x5a4106[_0x576609(0x126)]()[_0x576609(0x11e)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x576609(0x1fd),_0x576609(0x169)),![];else await handleError(_0x5a4106,_0x576609(0x1c3));}}}else await handleError(_0x5a4106,_0x576609(0x1c3));}return _0x3b6ae5;}async function getPortfolio(_0xf45f7e){const _0x141495=_0x167be4;let _0x35fc3e=[],_0x2e9ff6=[],_0x25a06f,_0x483361=[],_0x2f77bb,_0x9ad01f;_0xf45f7e[_0x141495(0x16d)]==='************'||_0xf45f7e['apiSecret']==='************'?(_0x2f77bb=config[_0x141495(0x16d)],_0x9ad01f=config[_0x141495(0x162)]):(_0x2f77bb=_0xf45f7e[_0x141495(0x16d)],_0x9ad01f=_0xf45f7e['apiSecret']);await initExchange(_0x2f77bb,_0x9ad01f);let _0xd06650=await loadSymbols();if(_0xd06650){_0x483361=await getCoins(![],_0xf45f7e[_0x141495(0x183)]);if(_0x483361===![])proxyEmit('portfolio',![]);else{if(_0xf45f7e[_0x141495(0x183)]=='')proxyEmit('portfolio',_0x483361);else{_0x483361[_0x141495(0x1df)](_0x279308=>{const _0x2aa6aa=_0x141495;_0x35fc3e[_0x2aa6aa(0x13a)](_0x279308['symbol']);});try{_0x2e9ff6=await exchange[_0x141495(0x1b5)](_0x35fc3e);}catch(_0x45882d){await handleError(_0x45882d,_0x141495(0x1d9));}_0x483361[_0x141495(0x1df)](_0x559c7c=>{const _0x1af2af=_0x141495;_0x559c7c[_0x1af2af(0x1f1)]!=_0xf45f7e[_0x1af2af(0x183)]?_0x25a06f=_0x559c7c[_0x1af2af(0x209)]?0x1/_0x2e9ff6[_0x559c7c[_0x1af2af(0x203)]][_0x1af2af(0x171)]:_0x2e9ff6[_0x559c7c[_0x1af2af(0x203)]][_0x1af2af(0x171)]:_0x25a06f=0x1,_0x559c7c[_0x1af2af(0x200)]=formatResult(_0x25a06f,0x8);}),proxyEmit(_0x141495(0x1e9),_0x483361);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x1ea339){const _0x252a5f=_0x167be4;let _0x1e6bb6=!![];const _0x2d2dfa=!_0x1ea339[_0x252a5f(0x209)]?markets[_0x1ea339['symbol']][_0x252a5f(0x193)]['amount'][_0x252a5f(0x188)]:markets[_0x1ea339[_0x252a5f(0x203)]]['limits'][_0x252a5f(0x1cc)][_0x252a5f(0x188)],_0x4574bd=!_0x1ea339[_0x252a5f(0x209)]?markets[_0x1ea339[_0x252a5f(0x203)]]['limits'][_0x252a5f(0x1cc)][_0x252a5f(0x188)]:markets[_0x1ea339[_0x252a5f(0x203)]]['limits'][_0x252a5f(0x17b)][_0x252a5f(0x188)];if(Math['abs'](_0x1ea339[_0x252a5f(0x122)])<_0x2d2dfa)_0x1e6bb6=![];if(Math[_0x252a5f(0x1d2)](_0x1ea339[_0x252a5f(0x122)])*_0x1ea339['last']<_0x4574bd)_0x1e6bb6=![];let _0x17ad03=config[_0x252a5f(0x1e9)][_0x252a5f(0x187)](_0x22b488=>_0x22b488[_0x252a5f(0x1f1)]==_0x1ea339[_0x252a5f(0x1f1)]);if(Math[_0x252a5f(0x1d2)](_0x1ea339[_0x252a5f(0x122)])>_0x1ea339[_0x252a5f(0x115)]-_0x17ad03[_0x252a5f(0x175)])_0x1e6bb6=![];return _0x1e6bb6;}async function getBalances(){const _0x3fd8fd=_0x167be4;let _0x4cb2bd=0x0,_0x4ec015;const _0x5f42f7=config[_0x3fd8fd(0x1e6)];currentCoins['forEach'](_0x175176=>{const _0x1dcf09=_0x3fd8fd;if(_0x175176[_0x1dcf09(0x1f1)]!=config['basecoin']){let _0x1ec175=global[_0x1dcf09(0x1e3)][noslash(_0x175176['symbol'])];_0x4ec015=_0x175176[_0x1dcf09(0x209)]?0x1/_0x1ec175:_0x1ec175;}else _0x4ec015=0x1;let _0x4290ef=_0x175176[_0x1dcf09(0x115)]*_0x4ec015;_0x4cb2bd+=_0x4290ef,_0x175176[_0x1dcf09(0x171)]=formatResult(Number(_0x4ec015),0x8),_0x175176[_0x1dcf09(0x15d)]=_0x4290ef;}),currentCoins[_0x3fd8fd(0x1df)](_0x4961bc=>{const _0x498153=_0x3fd8fd;let _0xc8c2d5=config[_0x498153(0x1e9)][_0x498153(0x187)](_0x39ac78=>_0x39ac78['coin']==_0x4961bc[_0x498153(0x1f1)]),_0x440bc3=Number(_0xc8c2d5['distribution']),_0x222f3e=_0x4961bc[_0x498153(0x15d)]/_0x4cb2bd*0x64,_0x27e077=_0x440bc3*_0x4cb2bd/0x64/_0x4961bc['last']-_0x4961bc[_0x498153(0x115)];_0x4961bc[_0x498153(0x140)]=formatResult(_0x222f3e,0x3),_0x4961bc['target']=formatResult(_0x440bc3,0x3),_0x4961bc[_0x498153(0x122)]=formatResult(_0x27e077,0x8),_0x4961bc[_0x498153(0x1db)]='',_0x4961bc[_0x498153(0x160)]='';if(_0x4961bc[_0x498153(0x1f1)]!=config[_0x498153(0x183)]){if(_0x4961bc[_0x498153(0x140)]>_0x440bc3)_0x4961bc[_0x498153(0x1db)]=_0x498153(0x1ff),_0x4961bc[_0x498153(0x160)]=checkMinimums(_0x4961bc);else _0x4961bc['distribution']<_0x440bc3&&(_0x4961bc[_0x498153(0x1db)]=_0x498153(0x156),_0x4961bc[_0x498153(0x160)]=checkMinimums(_0x4961bc));}_0x4961bc[_0x498153(0x1ad)]=_0x4961bc[_0x498153(0x140)]/_0x4961bc[_0x498153(0x11b)]-0x1;}),currentCoins[_0x3fd8fd(0xfd)]((_0x1661d2,_0x3fab1c)=>_0x1661d2[_0x3fd8fd(0x1ad)]<_0x3fab1c[_0x3fd8fd(0x1ad)]?0x1:_0x3fab1c[_0x3fd8fd(0x1ad)]<_0x1661d2['delta']?-0x1:0x0);const _0x5f1541=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5f1541[_0x3fd8fd(0x120)],'usd':_0x5f1541[_0x3fd8fd(0x181)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5f42f7},proxyEmit(_0x3fd8fd(0x143),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3fd8fd(0x1b0)])headlessMode({'portfolio':currentCoins,'threshold':_0x5f42f7});else notifyBalance({'portfolio':currentCoins,'threshold':_0x5f42f7});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x58649b=_0x167be4;if(!lastBalances)return;let _0x4f9546=await getStartingBalances(![]),_0x14dc13=[],_0x1edbcf;JSON[_0x58649b(0x102)](lastBalances[_0x58649b(0x1e9)])[_0x58649b(0x1df)](_0x10b372=>{const _0x632ee8=_0x58649b;let _0x1cd9c6={'coin':_0x10b372['coin'],'number':_0x10b372[_0x632ee8(0x115)],'price':_0x10b372[_0x632ee8(0x171)]};_0x14dc13[_0x632ee8(0x13a)](_0x1cd9c6);});const _0x5d4c74=await getFiat();_0x1edbcf={'date':lastBalances[_0x58649b(0x20b)][_0x58649b(0x1ba)]('\x20')[0x0],'eur':_0x5d4c74[_0x58649b(0x120)],'usd':_0x5d4c74[_0x58649b(0x181)],'coins':_0x14dc13};let _0xc2b4c4=dbPerformance['get'](_0x58649b(0x1dc))[_0x58649b(0x187)]({'date':_0x1edbcf['date']})[_0x58649b(0x15d)]();_0xc2b4c4?dbPerformance[_0x58649b(0x1c8)]('data')[_0x58649b(0x187)]({'date':_0x1edbcf['date']})[_0x58649b(0x182)](_0x1edbcf)[_0x58649b(0x17f)]():dbPerformance[_0x58649b(0x1c8)](_0x58649b(0x1dc))[_0x58649b(0x13a)](_0x1edbcf)[_0x58649b(0x17f)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x2fcb84=_0x167be4;if(dbPerformance['has']('data')[_0x2fcb84(0x15d)]()){let _0x195927=dbPerformance[_0x2fcb84(0x1c8)](_0x2fcb84(0x1dc))[_0x2fcb84(0x15b)](_0x2fcb84(0x1cd))[_0x2fcb84(0x15d)]();proxyEmit(_0x2fcb84(0x145),_0x195927),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0xddf658=!![]){const _0x37a748=_0x167be4;let _0x151adf=dbPerformance[_0x37a748(0x1c8)](_0x37a748(0x1dc))[_0x37a748(0x187)]({'date':config[_0x37a748(0x18b)]})[_0x37a748(0x15d)]();config[_0x37a748(0x16d)]!=''&&!_0x151adf&&(await setStartDatePerformance(config),_0x151adf=dbPerformance[_0x37a748(0x1c8)](_0x37a748(0x1dc))[_0x37a748(0x187)]({'date':config[_0x37a748(0x18b)]})['value']());if(config[_0x37a748(0x16d)]==''||!_0x151adf)return{};let _0x2069c7=0x0,_0x4634a7=0x0,_0xc4af35=0x0,_0x6bd5d5=[],_0x44d028=0x0;config[_0x37a748(0x1e9)][_0x37a748(0x1df)](_0x1cd147=>{const _0x2172e0=_0x37a748;if(!_0x1cd147[_0x2172e0(0x1c2)]){_0x6bd5d5[_0x44d028]={'coin':_0x1cd147[_0x2172e0(0x1f1)],'symbol':_0x1cd147[_0x2172e0(0x203)],'number':_0x1cd147[_0x2172e0(0x191)],'price':_0x1cd147[_0x2172e0(0x1d8)]},_0x2069c7+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147[_0x2172e0(0x191)];if(config[_0x2172e0(0x183)]==_0x2172e0(0x1aa))_0x4634a7+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147['startnumber']*_0x151adf[_0x2172e0(0x120)],_0xc4af35+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147[_0x2172e0(0x191)]*_0x151adf[_0x2172e0(0x181)];else{if(config['basecoin']=='BUSD'||config[_0x2172e0(0x183)]==_0x2172e0(0x12c)||config[_0x2172e0(0x183)]==_0x2172e0(0x20a))_0x4634a7+=_0x1cd147['startprice']*_0x1cd147[_0x2172e0(0x191)]*_0x151adf[_0x2172e0(0x120)]/_0x151adf[_0x2172e0(0x181)],_0xc4af35+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147['startnumber'];else config['basecoin']==_0x2172e0(0x1b9)&&(_0x4634a7+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147[_0x2172e0(0x191)],_0xc4af35+=_0x1cd147[_0x2172e0(0x1d8)]*_0x1cd147[_0x2172e0(0x191)]*_0x151adf[_0x2172e0(0x181)]/_0x151adf[_0x2172e0(0x120)]);}_0x44d028++;}});let _0x4a0522={'basecoin':_0x2069c7,'eur':_0x4634a7,'usd':_0xc4af35,'coins':_0x6bd5d5};if(_0xddf658)proxyEmit(_0x37a748(0x12f),_0x4a0522);return _0x4a0522;}function headlessMode(_0x33bc74){const _0x2ff3f3=_0x167be4;let _0x280c45=_0x33bc74[_0x2ff3f3(0x1e9)],_0x963a2b=_0x33bc74[_0x2ff3f3(0x1e6)],_0x47ebfc=[];for(let _0x422473 of _0x280c45){if(_0x422473['coin']!=config[_0x2ff3f3(0x183)]){if(_0x422473[_0x2ff3f3(0x140)]/_0x422473[_0x2ff3f3(0x11b)]-0x1>=_0x963a2b/0x64){if(_0x422473[_0x2ff3f3(0x160)])_0x47ebfc[_0x2ff3f3(0x13a)](_0x422473);}else{if(_0x422473[_0x2ff3f3(0x140)]/_0x422473[_0x2ff3f3(0x11b)]-0x1<=-_0x963a2b/0x64){if(_0x422473[_0x2ff3f3(0x160)])_0x47ebfc[_0x2ff3f3(0x13a)](_0x422473);}}}}_0x47ebfc[_0x2ff3f3(0x1bd)]>0x0&&placeOrder(_0x47ebfc);}function notifyBalance(_0x451225){const _0x29fbed=_0x167be4;let _0x53a44a=_0x451225[_0x29fbed(0x1e9)],_0x3e49f5=_0x451225[_0x29fbed(0x1e6)],_0x36a9fd=[];for(let _0xb7e240 of _0x53a44a){if(_0xb7e240[_0x29fbed(0x1f1)]!=config['basecoin']){if(_0xb7e240[_0x29fbed(0x140)]/_0xb7e240[_0x29fbed(0x11b)]-0x1>=_0x3e49f5/0x64){if(_0xb7e240[_0x29fbed(0x160)])_0x36a9fd[_0x29fbed(0x13a)](_0xb7e240);}else{if(_0xb7e240[_0x29fbed(0x140)]/_0xb7e240[_0x29fbed(0x11b)]-0x1<=-_0x3e49f5/0x64){if(_0xb7e240[_0x29fbed(0x160)])_0x36a9fd[_0x29fbed(0x13a)](_0xb7e240);}}}}if(_0x36a9fd[_0x29fbed(0x1bd)]>0x0){let _0x1c7d34=_0x36a9fd['map'](_0x4534bf=>_0x4534bf[_0x29fbed(0x1f1)])[_0x29fbed(0x14c)](',\x20');if(lastCoinsToBalance!==_0x1c7d34)logHistory(_0x29fbed(0x121),_0x29fbed(0x189)+_0x1c7d34);lastCoinsToBalance=_0x1c7d34;}}function symbolToCoin(_0x59a8){const _0x26e5f9=_0x167be4;let _0x124d28;if(_0x59a8['includes']('/'+config[_0x26e5f9(0x183)]))_0x124d28=_0x59a8[_0x26e5f9(0x1d5)]('/'+config[_0x26e5f9(0x183)],'');if(_0x59a8[_0x26e5f9(0x11e)](config[_0x26e5f9(0x183)]+'/'))_0x124d28=_0x59a8['replace'](config[_0x26e5f9(0x183)]+'/','');return _0x124d28;}async function validateOrders(_0x143b9c=0x0){const _0x2b0cb8=_0x167be4;let _0x2f7761=[],_0x54d6c3=config[_0x2b0cb8(0x180)]==_0x2b0cb8(0x1ef)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x2b0cb8(0x129)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x1554ba=>{const _0x62f91a=_0x2b0cb8;let _0x47e563=previousCoins[_0x62f91a(0x187)](_0x1804ce=>_0x1804ce[_0x62f91a(0x1f1)]==symbolToCoin(_0x1554ba['symbol'])),_0x3064b0=currentCoins[_0x62f91a(0x187)](_0x22ecf3=>_0x22ecf3[_0x62f91a(0x1f1)]==symbolToCoin(_0x1554ba[_0x62f91a(0x203)])),_0x443938,_0x1bc0eb;_0x1554ba['side']==_0x62f91a(0x156)&&!_0x1554ba[_0x62f91a(0x209)]||_0x1554ba['side']=='sell'&&_0x1554ba['reverse']?(_0x443938=_0x47e563[_0x62f91a(0x115)]+0.9*_0x1554ba[_0x62f91a(0x184)],_0x1bc0eb=_0x47e563[_0x62f91a(0x115)]+1.1*_0x1554ba[_0x62f91a(0x184)]):(_0x443938=_0x47e563[_0x62f91a(0x115)]-1.1*_0x1554ba['filled'],_0x1bc0eb=_0x47e563[_0x62f91a(0x115)]-0.9*_0x1554ba['filled']);const _0x141170=_0x1554ba['filled']!=0x0&&_0x3064b0['number']>=_0x443938&&_0x3064b0[_0x62f91a(0x115)]<=_0x1bc0eb;_0x2f7761['push'](_0x141170);if(_0x141170&&config[_0x62f91a(0x180)]!=_0x62f91a(0x1ef)){if(_0x1554ba[_0x62f91a(0x209)])logHistory(_0x62f91a(0x121),_0x62f91a(0x19e)+_0x1554ba[_0x62f91a(0x203)]+'\x20'+_0x1554ba[_0x62f91a(0x1db)]+'\x20#'+formatResult(_0x1554ba['filled']/_0x1554ba[_0x62f91a(0x200)],0x8)+'\x20@'+formatResult(_0x1554ba[_0x62f91a(0x200)],0x8));else logHistory(_0x62f91a(0x121),_0x62f91a(0x19e)+_0x1554ba[_0x62f91a(0x203)]+'\x20'+_0x1554ba['side']+'\x20#'+formatResult(_0x1554ba[_0x62f91a(0x184)],0x8)+'\x20@'+formatResult(_0x1554ba[_0x62f91a(0x200)],0x8));}}),_0x2f7761[_0x2b0cb8(0x1df)]((_0x4a3ae6,_0x5ca7e8)=>{if(_0x4a3ae6)lastOrders['splice'](_0x5ca7e8,0x1);});if(_0x143b9c<_0x54d6c3&&_0x2f7761[_0x2b0cb8(0x11e)](![])){if(_0x143b9c==0x0){config['ordertype']=='market'?logHistory(_0x2b0cb8(0x1fd),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x2b0cb8(0x1fd),_0x2b0cb8(0x202));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x143b9c);},0xa*0x3e8);}else{(_0x143b9c==0x1||_0x143b9c==Math['round'](_0x54d6c3/0x2)||_0x143b9c==_0x54d6c3-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x143b9c);},validateOrderInterval);}}else{lockOrders=![];if(_0x143b9c>0x0&&!_0x2f7761['includes'](![]))config[_0x2b0cb8(0x180)]==_0x2b0cb8(0x1ef)?logHistory(_0x2b0cb8(0x1d7),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x2b0cb8(0x1d7),_0x2b0cb8(0x174));else _0x143b9c>0x0&&_0x2f7761[_0x2b0cb8(0x11e)](![])&&(config[_0x2b0cb8(0x180)]==_0x2b0cb8(0x1ef)?logHistory('success',_0x2b0cb8(0x1a4)+Math['round'](_0x54d6c3*validateOrderInterval/0xea60)+_0x2b0cb8(0x1ec)):(lastOrders['forEach'](async _0x5e41f0=>{const _0x3885f4=_0x2b0cb8;try{const _0x231c30=await exchange[_0x3885f4(0x12d)](_0x5e41f0[_0x3885f4(0x1ea)],_0x5e41f0[_0x3885f4(0x203)]);}catch(_0x492b6a){if(_0x492b6a['toString']()[_0x3885f4(0x11e)](_0x3885f4(0x1af))){}else await handleError(_0x492b6a,_0x3885f4(0x119));}}),logHistory('success',_0x2b0cb8(0x168)+Math[_0x2b0cb8(0x101)](_0x54d6c3*validateOrderInterval/0xea60)+_0x2b0cb8(0x1ec))));}}async function resetCoinResults(){const _0x2b1130=_0x167be4;dbCoinResults[_0x2b1130(0x1c8)]('coins')[_0x2b1130(0x136)]()[_0x2b1130(0x17f)]();let _0x2e7c74=await getStartingBalances(![]);_0x2e7c74[_0x2b1130(0x165)][_0x2b1130(0x1df)](_0x53301f=>{const _0x30732f=_0x2b1130,_0x26dddc=_0x53301f['symbol'][_0x30732f(0x11e)](config['basecoin']+'/');if(_0x53301f[_0x30732f(0x1f1)]!=config[_0x30732f(0x183)]){let _0x5e82b4={'coin':_0x53301f[_0x30732f(0x1f1)],'number':_0x53301f[_0x30732f(0x115)],'breakeven':_0x53301f[_0x30732f(0x200)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x30732f(0x13a)](_0x5e82b4)[_0x30732f(0x17f)]();}});}async function updateCoinResults(_0x466255){const _0x419d27=_0x167be4;let _0xf08ba2,_0x1ff5c6,_0x58f030,_0x46fdd8,_0x1d611c,_0x3cae74,_0x21c598=dbCoinResults[_0x419d27(0x1c8)](_0x419d27(0x165))['find']({'coin':_0x466255[_0x419d27(0x1f1)]})['value']();if(!_0x21c598)return;if(_0x466255[_0x419d27(0x20c)]&&_0x466255[_0x419d27(0x20c)][_0x419d27(0x1a7)]==config['basecoin'])_0xf08ba2=_0x466255[_0x419d27(0x20c)][_0x419d27(0x1cc)];else{if(_0x466255[_0x419d27(0x20c)]&&_0x466255['fee']['currency']==_0x419d27(0x1fa))_0xf08ba2=_0x466255['fee']['cost']*global[_0x419d27(0x1e3)]['BNB'+config[_0x419d27(0x183)]];else _0xf08ba2=0.001*_0x466255[_0x419d27(0x184)];}const _0x12f5e4=_0x466255[_0x419d27(0x203)][_0x419d27(0x11e)](config[_0x419d27(0x183)]+'/');_0x12f5e4&&(_0x3cae74={'coin':_0x466255[_0x419d27(0x1f1)],'symbol':_0x466255[_0x419d27(0x203)],'filled':_0x466255['filled']*_0x466255[_0x419d27(0x200)],'side':_0x466255[_0x419d27(0x1db)]==_0x419d27(0x1ff)?_0x419d27(0x156):_0x419d27(0x1ff),'price':0x1/_0x466255['price']},_0x466255={..._0x3cae74});_0x466255['side']==_0x419d27(0x156)?_0x58f030=(_0x21c598['breakeven']*_0x21c598[_0x419d27(0x115)]+_0x466255[_0x419d27(0x200)]*_0x466255[_0x419d27(0x184)])/(_0x21c598[_0x419d27(0x115)]+_0x466255['filled']):_0x58f030=(_0x21c598['breakeven']*_0x21c598[_0x419d27(0x115)]-_0x466255[_0x419d27(0x200)]*_0x466255[_0x419d27(0x184)])/(_0x21c598[_0x419d27(0x115)]-_0x466255[_0x419d27(0x184)]);_0x466255[_0x419d27(0x1db)]==_0x419d27(0x156)?_0x46fdd8=_0x21c598[_0x419d27(0x20d)]:_0x46fdd8=_0x21c598[_0x419d27(0x20d)]+(_0x466255[_0x419d27(0x200)]-_0x21c598[_0x419d27(0x1c5)])*_0x466255[_0x419d27(0x184)];_0x1ff5c6=_0x466255[_0x419d27(0x1db)]==_0x419d27(0x1ff)?_0x21c598[_0x419d27(0x115)]-_0x466255['filled']:_0x21c598[_0x419d27(0x115)]+_0x466255[_0x419d27(0x184)],_0x1d611c=(_0x466255[_0x419d27(0x200)]-_0x58f030)*_0x1ff5c6;let _0x308d35={'coin':_0x466255['coin'],'number':_0x1ff5c6,'breakeven':formatResult(_0x58f030,0x8),'realized':formatResult(_0x46fdd8,0x8),'unrealized':formatResult(_0x1d611c,0x8),'fees':formatResult(_0x21c598[_0x419d27(0x164)]+_0xf08ba2,0x8),'sells':_0x466255['side']==_0x419d27(0x1ff)?_0x21c598[_0x419d27(0x1d1)]+0x1:_0x21c598[_0x419d27(0x1d1)],'buys':_0x466255[_0x419d27(0x1db)]=='buy'?_0x21c598[_0x419d27(0x1b1)]+0x1:_0x21c598[_0x419d27(0x1b1)]};dbCoinResults['get'](_0x419d27(0x165))[_0x419d27(0x187)]({'coin':_0x466255[_0x419d27(0x1f1)]})[_0x419d27(0x182)](_0x308d35)['write']();}async function placeOrder(_0x36b1f7){const _0x5e86a7=_0x167be4,_0x311dcb=config['ordertype']==_0x5e86a7(0x1ef)?_0x5e86a7(0x1ef):_0x5e86a7(0x113);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x5e86a7(0x102)](JSON[_0x5e86a7(0x15a)](currentCoins));for(const _0x4517c3 of _0x36b1f7){let _0x359c0e,_0xa596e6,_0x32e9ae,_0x51fa4d,_0xeac288,_0x3c8939=_0x4517c3[_0x5e86a7(0x203)];try{const _0x43a920=await exchange[_0x5e86a7(0x1b5)](_0x3c8939),_0x18af5b=_0x43a920[_0x3c8939];_0x359c0e=_0x18af5b[_0x5e86a7(0x171)],_0xa596e6=_0x18af5b['bid'],_0x32e9ae=_0x18af5b[_0x5e86a7(0x178)];_0x4517c3['reverse']?(_0x51fa4d=_0x4517c3['side']==_0x5e86a7(0x156)?'sell':_0x5e86a7(0x156),_0xeac288=Math[_0x5e86a7(0x1d2)](_0x4517c3[_0x5e86a7(0x122)])/_0x359c0e):(_0x51fa4d=_0x4517c3[_0x5e86a7(0x1db)],_0xeac288=Math[_0x5e86a7(0x1d2)](_0x4517c3['trade']));_0x311dcb==_0x5e86a7(0x113)&&(config['ordertype']==_0x5e86a7(0x159)&&(_0x359c0e=_0x51fa4d==_0x5e86a7(0x156)?_0xa596e6:_0x32e9ae),config[_0x5e86a7(0x180)]=='limit-low'&&(_0x359c0e=_0x51fa4d==_0x5e86a7(0x156)?_0x32e9ae:_0xa596e6));_0xeac288=formatResult(_0xeac288,0x8),_0x359c0e=formatResult(_0x359c0e,0x8);const _0x519548=await exchange[_0x5e86a7(0x158)](_0x3c8939,_0x311dcb,_0x51fa4d,_0xeac288,_0x359c0e);lastOrders[_0x5e86a7(0x13a)]({'orderId':_0x519548['id'],'symbol':_0x3c8939,'side':_0x51fa4d,'reverse':_0x4517c3['reverse'],'amount':_0x4517c3[_0x5e86a7(0x209)]?_0x519548[_0x5e86a7(0x17b)]*_0x519548[_0x5e86a7(0x200)]:_0x519548[_0x5e86a7(0x17b)],'filled':_0x4517c3[_0x5e86a7(0x209)]?_0x519548['filled']*_0x519548[_0x5e86a7(0x200)]:_0x519548['filled'],'price':_0x519548[_0x5e86a7(0x200)]});const _0x2da47e=_0x51fa4d==_0x5e86a7(0x1ff)?config[_0x5e86a7(0x1ee)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x5e86a7(0x111)]?String[_0x5e86a7(0x18a)]('0x'+config[_0x5e86a7(0x111)])+'\x20':'',_0x543c9a=_0x311dcb==_0x5e86a7(0x1ef)?_0x5e86a7(0x103):config[_0x5e86a7(0x180)]==_0x5e86a7(0x159)?_0x5e86a7(0x11f):_0x5e86a7(0x154);if(_0x311dcb==_0x5e86a7(0x1ef))logHistory('order',''+_0x2da47e+_0x543c9a+'\x20order:\x20'+_0x3c8939+'\x20'+_0x51fa4d+'\x20#'+formatResult(_0x519548[_0x5e86a7(0x184)],0x8)+'\x20@'+formatResult(_0x519548[_0x5e86a7(0x200)],0x8));else logHistory(_0x5e86a7(0x121),''+_0x2da47e+_0x543c9a+_0x5e86a7(0x153)+_0x3c8939+'\x20'+_0x51fa4d+'\x20#'+formatResult(_0x519548[_0x5e86a7(0x17b)],0x8)+'\x20@'+formatResult(_0x519548[_0x5e86a7(0x200)],0x8));_0x519548[_0x5e86a7(0x1f1)]=_0x4517c3[_0x5e86a7(0x1f1)],await updateCoinResults(_0x519548);if(config[_0x5e86a7(0x170)]!=0x0){let _0x53331c=null;if(cooldownTracker[_0x5e86a7(0x1bd)]==config[_0x5e86a7(0x170)]-0x1)_0x53331c=cooldownTracker[_0x5e86a7(0x123)]();const _0x2963ce=getTimeStamp();cooldownTracker['push'](_0x2963ce);if(_0x53331c){const _0x372c22=fns['differenceInSeconds'](new Date(_0x2963ce),new Date(_0x53331c));_0x372c22<cooldownInterval&&(logHistory(_0x5e86a7(0x1fd),_0x5e86a7(0x10c)+config[_0x5e86a7(0x170)]+_0x5e86a7(0x1a3)+cooldownInterval/0x3c+_0x5e86a7(0x19c)+cooldownPeriod/(0xe10*0x3e8)+_0x5e86a7(0x1f6)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x5c38ed){if(_0x5c38ed['toString']()[_0x5e86a7(0x11e)]('MIN_NOTIONAL'))logHistory(_0x5e86a7(0x1fd),_0x5e86a7(0x1ab)+_0x3c8939);else{if(_0x5c38ed[_0x5e86a7(0x126)]()[_0x5e86a7(0x11e)](_0x5e86a7(0x19f)))logHistory(_0x5e86a7(0x1fd),_0x5e86a7(0x12a)+_0x3c8939);else await handleError(_0x5c38ed,_0x5e86a7(0x1be));}}}if(lastOrders[_0x5e86a7(0x1bd)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x5e86a7(0x1b0)]&&(config[_0x5e86a7(0x180)]==_0x5e86a7(0x1ef)?logHistory(_0x5e86a7(0x1fd),_0x5e86a7(0x14e)):logHistory('error',_0x5e86a7(0x148)));else coolingDown&&(!config[_0x5e86a7(0x1b0)]&&logHistory(_0x5e86a7(0x1fd),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x3531c1,_0x28975d,_0x4a0ec2=''){const _0x55cbd4=_0x167be4;let _0x13d313={'time':getTimeStamp(),'type':_0x3531c1,'event':_0x28975d,'botname':config[_0x55cbd4(0x1d4)],'showname':config[_0x55cbd4(0x16a)]};dbLogs[_0x55cbd4(0x1c8)]('logs')[_0x55cbd4(0x13a)](_0x13d313)['write']();if(_0x4a0ec2=='')_0x4a0ec2=_0x28975d;proxyEmit('event',{'log':_0x13d313,'summary':_0x4a0ec2}),process[_0x55cbd4(0x13b)]({'telegram':_0x13d313},_0x465564=>{}),logging(''+_0x13d313[_0x55cbd4(0x15e)]);}function emitHistory(_0x575a62={}){const _0x311a25=_0x167be4;Object['keys'](_0x575a62)[_0x311a25(0x1bd)]==0x0&&(_0x575a62={'type':[_0x311a25(0x121),_0x311a25(0x15e)],'event':'','page':0x1});if(_0x575a62['type'][_0x311a25(0x11e)](_0x311a25(0x15e)))_0x575a62[_0x311a25(0x1fb)][_0x311a25(0x17d)](_0x575a62[_0x311a25(0x1fb)]['indexOf'](_0x311a25(0x15e)),0x1,_0x311a25(0x1fd),_0x311a25(0x1d7));if(dbLogs[_0x311a25(0x16c)](_0x311a25(0x107))[_0x311a25(0x15d)]()){let _0x4e5eaf=dbLogs[_0x311a25(0x1c8)](_0x311a25(0x107))[_0x311a25(0x1cf)](_0xbd1086=>{const _0x174e3e=_0x311a25;if(_0x575a62['type']['length']==0x0)return![];else return _0x575a62[_0x174e3e(0x1fb)][_0x174e3e(0x11e)](_0xbd1086[_0x174e3e(0x1fb)]);})['filter'](_0x44934b=>{const _0x31b38e=_0x311a25;if(_0x575a62[_0x31b38e(0x15e)]=='')return!![];else return _0x44934b[_0x31b38e(0x15e)][_0x31b38e(0x1f8)]()[_0x31b38e(0x11e)](_0x575a62[_0x31b38e(0x15e)][_0x31b38e(0x1f8)]());})[_0x311a25(0x15b)]('time'),_0x275dc1=_0x4e5eaf[_0x311a25(0x15d)]()[_0x311a25(0x1bd)];_0x4e5eaf=_0x4e5eaf['reverse']()[_0x311a25(0x139)]((_0x575a62[_0x311a25(0x198)]-0x1)*logPageSize,_0x575a62[_0x311a25(0x198)]*logPageSize-0x1)[_0x311a25(0x209)]()[_0x311a25(0x15d)](),proxyEmit(_0x311a25(0x14f),{'logs':_0x4e5eaf,'total':_0x275dc1});}else proxyEmit(_0x311a25(0x14f),{'logs':[],'total':0x0});}async function pauseBot(_0x414c73){const _0x2967ef=_0x167be4,_0x5e9fe1=new Date()[_0x2967ef(0x131)]();if(!lastBotPause)lastBotPause=new Date()[_0x2967ef(0x131)](),consecutivePauses=0x1;else{if(_0x5e9fe1-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x2967ef(0x13b)]({'stop':_0x2967ef(0x194)},_0x2e5455=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2967ef(0x1fd),_0x2967ef(0x1b3)+consecutivePauses+')'),await sleep(_0x414c73),botPaused=![],reset();}}async function handleError(_0x376f5c,_0x54ad3d,_0x84122c=''){const _0x5c0d75=_0x167be4;if(_0x376f5c['toString']()[_0x5c0d75(0x11e)](_0x5c0d75(0x151)))logHistory(_0x5c0d75(0x1fd),_0x54ad3d+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x376f5c['toString']()['includes'](_0x5c0d75(0x141)))logHistory(_0x5c0d75(0x1fd),_0x54ad3d+_0x5c0d75(0x114)),await pauseBot(pauseBotInterval);else{if(_0x376f5c['toString']()[_0x5c0d75(0x11e)](_0x5c0d75(0x1e5)))logHistory(_0x5c0d75(0x1fd),_0x54ad3d+_0x5c0d75(0x1cb)),await pauseBot(pauseBotInterval);else{if(_0x376f5c[_0x5c0d75(0x126)]()[_0x5c0d75(0x11e)](_0x5c0d75(0x205)))logHistory(_0x5c0d75(0x1fd),_0x54ad3d+_0x5c0d75(0x117)),logHistory(_0x5c0d75(0x1fd),_0x5c0d75(0x167)),process['send']({'stop':_0x5c0d75(0x1ae)},_0x50ad24=>{});else{if(_0x376f5c['toString']()[_0x5c0d75(0x11e)](_0x5c0d75(0x20e)))logHistory(_0x5c0d75(0x1fd),_0x54ad3d+_0x5c0d75(0x1b2)),logHistory('error',_0x5c0d75(0x167)),process[_0x5c0d75(0x13b)]({'stop':_0x5c0d75(0x1ae)},_0x30bd55=>{});else{if(_0x376f5c['toString']()[_0x5c0d75(0x11e)](_0x5c0d75(0x105)))logHistory('error',_0x54ad3d+_0x5c0d75(0x10a)),logHistory(_0x5c0d75(0x1fd),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5c0d75(0x13b)]({'stop':'kill'},_0x4b02a=>{});else{if(_0x376f5c['toString']()[_0x5c0d75(0x11e)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x54ad3d+_0x5c0d75(0x14b)),logHistory(_0x5c0d75(0x1fd),_0x5c0d75(0x167)),process[_0x5c0d75(0x13b)]({'stop':_0x5c0d75(0x1ae)},_0x20f9f2=>{});else{if(_0x376f5c[_0x5c0d75(0x126)]()[_0x5c0d75(0x11e)](_0x5c0d75(0x17a)))logHistory('error',_0x54ad3d+_0x5c0d75(0x18c)),await pauseBot(pauseBotInterval),process[_0x5c0d75(0x13b)]({'stop':_0x5c0d75(0x194)},_0x4a34d5=>{});else _0x376f5c[_0x5c0d75(0x126)]()[_0x5c0d75(0x11e)](_0x5c0d75(0x1e2))?logHistory('error',_0x54ad3d+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory('error',_0x54ad3d+_0x5c0d75(0x1a8)),logging(_0x54ad3d+_0x5c0d75(0x207),_0x376f5c),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x24e8b0,_0x8ef1b5){const _0x4205fb=_0x167be4;return parseFloat(_0x24e8b0[_0x4205fb(0x19a)](_0x8ef1b5));}function logging(_0x51fecf,_0x362bef=''){const _0x2a8eb3=_0x167be4;if(config[_0x2a8eb3(0x16a)])console['log'](getTimeStamp()+':\x20'+config[_0x2a8eb3(0x1d4)]+'\x20>\x20'+_0x51fecf,_0x362bef);else console['log'](getTimeStamp()+_0x2a8eb3(0x124)+botID+'\x20>\x20'+_0x51fecf,_0x362bef);}function getServerTime(){const _0x56a90f=_0x167be4,_0x155a0c=new Date();return _0x155a0c[_0x56a90f(0x12e)]()+'/'+(_0x155a0c[_0x56a90f(0xff)]()+0x1)[_0x56a90f(0x126)]()[_0x56a90f(0x1b4)](0x2,'0')+'/'+_0x155a0c[_0x56a90f(0x10d)]()[_0x56a90f(0x126)]()[_0x56a90f(0x1b4)](0x2,'0')+'\x20'+_0x155a0c[_0x56a90f(0x1e7)]()[_0x56a90f(0x126)]()[_0x56a90f(0x1b4)](0x2,'0')+':'+_0x155a0c['getMinutes']()['toString']()[_0x56a90f(0x1b4)](0x2,'0')+':'+_0x155a0c[_0x56a90f(0x11c)]()[_0x56a90f(0x126)]()[_0x56a90f(0x1b4)](0x2,'0');}function getTimeStamp(){const _0x5f39bf=_0x167be4,_0x4395a1=shiftedTime();return _0x4395a1[_0x5f39bf(0x12e)]()+'/'+(_0x4395a1[_0x5f39bf(0xff)]()+0x1)[_0x5f39bf(0x126)]()['padStart'](0x2,'0')+'/'+_0x4395a1[_0x5f39bf(0x10d)]()[_0x5f39bf(0x126)]()['padStart'](0x2,'0')+'\x20'+_0x4395a1[_0x5f39bf(0x1e7)]()[_0x5f39bf(0x126)]()[_0x5f39bf(0x1b4)](0x2,'0')+':'+_0x4395a1[_0x5f39bf(0x13c)]()['toString']()[_0x5f39bf(0x1b4)](0x2,'0')+':'+_0x4395a1['getSeconds']()[_0x5f39bf(0x126)]()[_0x5f39bf(0x1b4)](0x2,'0');}function getDate(){const _0x460924=_0x167be4,_0x191679=shiftedTime();return _0x191679[_0x460924(0x12e)]()+'/'+(_0x191679[_0x460924(0xff)]()+0x1)[_0x460924(0x126)]()[_0x460924(0x1b4)](0x2,'0')+'/'+_0x191679[_0x460924(0x10d)]()[_0x460924(0x126)]()[_0x460924(0x1b4)](0x2,'0');}function getHour(){const _0x301f27=_0x167be4,_0x4a2f0c=shiftedTime();return _0x4a2f0c['getHours']()['toString']()[_0x301f27(0x1b4)](0x2,'0');}function sleep(_0x3d70a1){return new Promise(_0x536669=>setTimeout(_0x536669,_0x3d70a1));}function shiftedTime(){const _0x1dfc28=_0x167be4,_0x5e34b2=new Date();let _0x3c16c1=_0x5e34b2;if(config&&config[_0x1dfc28(0x179)]!==0x0)_0x3c16c1=fns['add'](_0x5e34b2,{'hours':config[_0x1dfc28(0x179)]});return _0x3c16c1;}