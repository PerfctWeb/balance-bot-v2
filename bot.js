const _0x28b247=_0xded1;(function(_0x33a2a7,_0x153743){const _0x44b0a3=_0xded1,_0x3f735b=_0x33a2a7();while(!![]){try{const _0x394722=parseInt(_0x44b0a3(0x145))/0x1*(parseInt(_0x44b0a3(0x149))/0x2)+parseInt(_0x44b0a3(0x1e2))/0x3+parseInt(_0x44b0a3(0x125))/0x4*(parseInt(_0x44b0a3(0x1ea))/0x5)+parseInt(_0x44b0a3(0xd0))/0x6+parseInt(_0x44b0a3(0x1eb))/0x7+-parseInt(_0x44b0a3(0xa0))/0x8*(-parseInt(_0x44b0a3(0x167))/0x9)+-parseInt(_0x44b0a3(0x1de))/0xa;if(_0x394722===_0x153743)break;else _0x3f735b['push'](_0x3f735b['shift']());}catch(_0x239c8b){_0x3f735b['push'](_0x3f735b['shift']());}}}(_0x8df1,0x3b2f7));const _0x39a8db=function(){let _0x1189e5=!![];return function(_0x504861,_0x1bc40d){const _0x3a4b6e=_0x1189e5?function(){const _0x44f444=_0xded1;if(_0x1bc40d){const _0xd80588=_0x1bc40d[_0x44f444(0x199)](_0x504861,arguments);return _0x1bc40d=null,_0xd80588;}}:function(){};return _0x1189e5=![],_0x3a4b6e;};}(),_0x13a40b=_0x39a8db(this,function(){const _0x3a0e93=_0xded1;return _0x13a40b[_0x3a0e93(0x10e)]()[_0x3a0e93(0x133)]('(((.+)+)+)+$')[_0x3a0e93(0x10e)]()['constructor'](_0x13a40b)[_0x3a0e93(0x133)](_0x3a0e93(0x1ca));});_0x13a40b();'use strict';const ccxt=require(_0x28b247(0xb8))[_0x28b247(0x15a)],low=require(_0x28b247(0xd1)),FileSync=require(_0x28b247(0x19a)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x28b247(0xa7))[_0x28b247(0x15e)],util=require('util');let exchange;global[_0x28b247(0xee)]={},global['change']={};const exceptions=[_0x28b247(0x187),'HOT/BTC','HOT/EUR',_0x28b247(0x104),_0x28b247(0x1aa),'YOYOW/'];let debugLoggingScreen=![],config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x28b247(0xde)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x28b247(0x193)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require('./version.json')['version'],botID=process[_0x28b247(0x155)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x28b247(0x1db)](botID)&&(console['log'](_0x28b247(0x122)+botID+_0x28b247(0x154)),killBot());const userID=process[_0x28b247(0x155)][0x3]||'',configpath=userID?_0x28b247(0x1e5)+userID+'/':_0x28b247(0x1e5),logspath=userID?'./logs/'+userID+'/':_0x28b247(0x1da),loggerfile=fs[_0x28b247(0x17d)](logspath+_0x28b247(0x1b7),{'flags':'a'});function _0x8df1(){const _0x40962c=['Cooldown\x20ended\x20-\x20balancing\x20resumed','RequestTimeout','ORDERS.UNLOCKING','net-fiat','full','net-basecoin','excluded','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','toUpperCase','ask','padStart','getMinutes','loadSymbols()','\x20orders\x20in\x20less\x20than\x20','createWriteStream','debug','2.6.0','format','valid','buys','shift','open','decrypt','USD','DAI/','storeHeadless','2\x20-\x20FILLED\x20unknown\x20order:\x20','none','fetchBalance','side','emojisell','getStartingBalances','status','BNB/','/USD','exec','UNLOCKED','close','limit','timeshift','basecoin','mkdirSync','apply','lowdb/adapters/FileSync','length','offset','loadMarkets','delta','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','assign','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','getSeconds','RSA-OAEP','cancelOrders()','emojibuy','createOrder','remainingSymbols','yyyy-MM-dd\x27T\x27HH:mm:ss','amount','NANO/','value','headless','enabled','showConfig','simple','Net\x20','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','getFiat()','data','usd','timer:','privateKey','/output-000.log','2.5.0','BUSD','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','reverse','balances','Net\x20effect','startnumber','\x20hour','ORDERS.UNLOCKED','threshold','realized','\x20change','sendPortfolioTelegram','\x20portfolio:</b>\x20\x0a\x0a','coin','apiKey','Order\x20filled:\x20','\x20exchange','(((.+)+)+)+$','existsSync','cancelLoading','BTC','getDate','min','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ExchangeNotAvailable','\x20API\x20blocked\x20(DDoS\x20protection)','ongoing','message','splice','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','change24h','time','initial','./logs/','test','cost','running','4085710grQekW','changes','eur','round','396558mFsmud','-events.json','getCoins()','./config/','write','orderId','yyyy/MM/dd','botID','420765bPGHzc','133133tmFnUB','defaults','coins','random','buy','EUR','Binance','type','openOrders','Order(s)\x20not\x20validated\x20after\x20','2\x20-\x20Validate\x20orders:\x20','push','replace','slice','event-history','InsufficientFunds','8RneoAQ','event','Net\x20effect\x20(','placeOrder()','limit-low','string','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','hybrid-crypto-js','page','\x20>\x20[DEBUG]\x20','\x20not\x20available','number','map','watchOrders','DDoSProtection','currency','sortBy','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','recovery','exchanges','remove','total','loading-canceled','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ccxt','timestamp','\x20API\x20secret\x20is\x20invalid','botname','fiat','MIN_NOTIONAL','final','Manual\x20balancing\x20required','InvalidNonce','balancing\x20resumes\x20when\x20cooldown\x20ends','trade','args','change','<b>Bot\x20','customId','fetchClosedOrders','storeConfiguration','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','filled','\x20>\x20','bot-','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20value','No\x20more\x20open\x20orders\x20-\x20','1685010wotFwp','lowdb','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','includes','ETH','startprice','watchTrades','split','symbol','abs','bb-settings.json','AuthenticationError','get','version','freeze','toFixed','Executed\x20','datetime','configuration','cancel','filter','\x20-\x20bot\x20not\x20started','closed','fromCodePoint','join','apiSecret','milliseconds','last','***','parse','ticker','secure','************','distribution','emitHistory','kill','configuration-stored','isEqual','Order\x20amount\x20is\x20invalid:\x20','send','target','UNLOCKING','initclient','bid','ordertype','warning','has','set','log','limits','bot','max','XEM/BUSD','getPortfolio()','getMonth','stringify','cloneDeep','findIndex','sell','limit-high','toggleBotMode','\x20API\x20key\x20is\x20invalid','toString','\x20minutes','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','uncaughtException','success','no\x20open\x20orders','fetchOpenOrders','date','2\x20-\x20FILLED\x20known\x20order:\x20','starting-balances','cooldown','%\x20\x0a','LOCKED','writeFile','\x20|\x20','entries','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','recreate','ORDERS.LOCKED','recreateCoinResults()','Error:\x20Invalid\x20argument\x20','add','cancelOrder','4PWKSBl','\x20not\x20responding','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','BNB','canceled','padEnd','fetchTickers','\x20order:\x20','order','sells','orderstatus','</pre>','performance','search','timeout','liquidity','0\x20-\x20EXECUTION:\x20','Unknown\x20error\x20occured','clientOrderId','restart','Executing\x20exchange\x20reload','price','Invalid\x20quantity','1\x20-\x20Handle\x20open\x20orders','toLowerCase','2\x20-\x20Orders\x20unlocked','API-key\x20format\x20invalid','USDT','1\x20-\x20Validate\x20orders:\x20','fees','getHours','23308xnDUBz','differenceInSeconds','forEach','2.3.5','2SFDUYV','error','fetchTicker','sort','showname','Pausing\x20for\x20','2\x20-\x20Handled\x20open\x20orders','fee','starting-balance-','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Initiating\x20exchange\x20reload',',\x20must\x20be\x20a\x203\x20digit\x20number','argv','logs','\x20|\x20lock\x20orders:\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','find','pro','progress','exchange','keys','Crypt','\x20minutes\x20-\x20','\x20:\x20','substring','coin-loading-progress','function','-------------------------------\x0a','market','getFullYear','1003437twHpou','deleteHistoryAlerts','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','<b>','getTime','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Limit\x20(high-margin)','portfolio'];_0x8df1=function(){return _0x40962c;};return _0x8df1();}!fs[_0x28b247(0x1cb)](configpath)&&fs[_0x28b247(0x198)](configpath);!fs['existsSync'](logspath)&&fs[_0x28b247(0x198)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x28b247(0x1e3),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x28b247(0xcc)+botID+'-results.json',settingsfile=configpath+_0x28b247(0xda),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x28b247(0x1ec)]({'logs':[],'version':serverversion})[_0x28b247(0x1e6)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x28b247(0x1ec)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x28b247(0x1ec)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x28b247(0x1a3)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5c73cd=>{const _0x3511eb=_0x28b247;console[_0x3511eb(0x100)](_0x5c73cd);},'simple':_0xa7aa98=>{const _0xde4a60=_0x28b247;console[_0xde4a60(0x100)](_0xa7aa98),loggerfile[_0xde4a60(0x1e6)](util['format'](_0xa7aa98)+'\x0a');},'full':async(_0x1a79cf,_0x23acfd='')=>{const _0x1872a8=_0x28b247;let _0x249dc4;if(config['showname'])_0x249dc4=getTimeStamp()+':\x20'+config[_0x1872a8(0xbb)]+'\x20>\x20'+_0x1a79cf;else _0x249dc4=getTimeStamp()+':\x20Bot\x20'+botID+_0x1872a8(0xcb)+_0x1a79cf;console['log'](_0x249dc4),loggerfile[_0x1872a8(0x1e6)](util['format'](_0x249dc4)+'\x0a'),_0x23acfd&&(console[_0x1872a8(0x100)](_0x23acfd),loggerfile['write'](util[_0x1872a8(0x180)](_0x23acfd)+'\x0a'));},'debug':async(_0x542a33,_0x4d6ce0='')=>{const _0x73da6=_0x28b247;let _0x15888b;if(config[_0x73da6(0x14d)])_0x15888b=getTimeStamp()+':\x20'+config[_0x73da6(0xbb)]+'\x20>\x20[DEBUG]\x20'+_0x542a33;else _0x15888b=getTimeStamp()+':\x20Bot\x20'+botID+_0x73da6(0xa9)+_0x542a33;if(debugLoggingScreen)console[_0x73da6(0x100)](_0x15888b);loggerfile[_0x73da6(0x1e6)](util[_0x73da6(0x180)](_0x15888b)+'\x0a');if(_0x4d6ce0){if(debugLoggingScreen)console[_0x73da6(0x100)](_0x4d6ce0);loggerfile[_0x73da6(0x1e6)](util['format'](_0x4d6ce0)+'\x0a');}}};process['on'](_0x28b247(0x111),function(_0x1e8349){const _0x22d4d7=_0x28b247;logger[_0x22d4d7(0x1af)](_0x1e8349);});settings['timeshift']!=config[_0x28b247(0x196)]&&updateTimeshift(settings[_0x28b247(0x196)]);process[_0x28b247(0xf7)]({'started':'running'},_0x3eabb7=>{}),initializeProcessListeners();function proxyEmit(_0x2d4d0f,_0x5ccfa4=null){const _0x17b14d=_0x28b247;process[_0x17b14d(0xf7)]({'function':_0x2d4d0f,'args':_0x5ccfa4},_0x221334=>{});}function initializeProcessListeners(){const _0x24cefa=_0x28b247;process['on'](_0x24cefa(0x1d4),_0x2733e8=>{const _0x4a3ac7=_0x24cefa;switch(Object[_0x4a3ac7(0x15d)](_0x2733e8)[0x0]){case _0x4a3ac7(0x196):_0x2733e8[_0x4a3ac7(0x196)]!=undefined&&(settings[_0x4a3ac7(0x196)]=_0x2733e8[_0x4a3ac7(0x196)],updateTimeshift(settings[_0x4a3ac7(0x196)]));break;case'function':switch(_0x2733e8[_0x4a3ac7(0x163)]){case _0x4a3ac7(0xfa):initclient();break;case _0x4a3ac7(0x10c):toggleBotMode();break;case _0x4a3ac7(0xf2):emitHistory(_0x2733e8[_0x4a3ac7(0xc3)]);break;case _0x4a3ac7(0x168):deleteHistoryAlerts(_0x2733e8['args']);break;case'getPortfolio':getPortfolio(_0x2733e8[_0x4a3ac7(0xc3)]);break;case _0x4a3ac7(0xc8):storeConfiguration(_0x2733e8[_0x4a3ac7(0xc3)]);break;case _0x4a3ac7(0x188):storeHeadless(_0x2733e8[_0x4a3ac7(0xc3)]);break;case _0x4a3ac7(0x18e):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x2733e8[_0x4a3ac7(0xc3)]);break;case _0x4a3ac7(0x1cc):cancelLoading();break;case _0x4a3ac7(0x1ae):showConfig();break;case _0x4a3ac7(0x1c4):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x185351=null,_0x5b442b=![]){const _0x17020b=_0x28b247;if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x5b442b)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config['apiKey']!=''&&config[_0x17020b(0x1c7)]!='***'){await initExchange();let _0x4dd42f=![];_0x4dd42f=await loadSymbols();if(_0x4dd42f){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x185351),exchangeStopped=![];if(lastOrders[_0x17020b(0x19b)]==0x0&&allOpenOrders[_0x17020b(0x19b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x48d0f3=_0x28b247;exchangeStopped=!![],await exchange[_0x48d0f3(0x194)]();}async function reloadExchange(){const _0x12875a=_0x28b247;logger['debug'](_0x12875a(0x153));while(lockOrders!=ORDERS[_0x12875a(0x193)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x12875a(0x13a)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x214970=config[_0x28b247(0x15c)],_0x2006cc=config['apiKey'],_0x5bcdae=config['apiSecret']){const _0x483168=_0x28b247;exchange&&await stopExchange();!supportedExchanges()[_0x483168(0xd3)](_0x214970)&&(logger['full'](_0x483168(0x19f)+_0x214970+_0x483168(0x1c9)),killBot());const _0x5e4d99=ccxt[_0x214970[_0x483168(0x13e)]()];exchange=new _0x5e4d99({'apiKey':_0x2006cc,'secret':_0x5bcdae,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'adjustForTimeDifference':!![]}});}function setStableCoins(){const _0x278251=_0x28b247;let _0x20523e=config[_0x278251(0x197)]==_0x278251(0xd4)?_0x278251(0xd4):_0x278251(0x1cd),_0x3bafff=!allSymbols['includes'](_0x20523e+'/EUR')?_0x278251(0x141):_0x278251(0x1f0),_0xe17505=!allSymbols[_0x278251(0xd3)](_0x20523e+_0x278251(0x191))?'USDT':_0x278251(0x186);stablecoins={'eur':{'coin':''+_0x20523e+_0x3bafff,'symbol':_0x20523e+'/'+_0x3bafff},'usd':{'coin':''+_0x20523e+_0xe17505,'symbol':_0x20523e+'/'+_0xe17505}};}async function initwsCcxt(_0x29d9c7){const _0x31da76=_0x28b247;_0x29d9c7==null&&(_0x29d9c7=[],currentCoins[_0x31da76(0x147)](_0x45051f=>{const _0x2a4d32=_0x31da76;if(_0x45051f[_0x2a4d32(0x1c6)]!=config[_0x2a4d32(0x197)])_0x29d9c7[_0x2a4d32(0x1f6)](_0x45051f['symbol']);}));if(!_0x29d9c7[_0x31da76(0xd3)](stablecoins['eur'][_0x31da76(0xd8)]))_0x29d9c7[_0x31da76(0x1f6)](stablecoins[_0x31da76(0x1e0)][_0x31da76(0xd8)]);if(!_0x29d9c7[_0x31da76(0xd3)](stablecoins[_0x31da76(0x1b4)][_0x31da76(0xd8)]))_0x29d9c7['push'](stablecoins[_0x31da76(0x1b4)][_0x31da76(0xd8)]);if(!_0x29d9c7[_0x31da76(0xd3)](_0x31da76(0x190)+config[_0x31da76(0x197)]))_0x29d9c7[_0x31da76(0x1f6)](_0x31da76(0x190)+config[_0x31da76(0x197)]);loadCoins(_0x29d9c7);const _0x594b68=async _0x21c7b5=>{const _0x2286a7=_0x31da76,_0x16dbec=await exchange[_0x2286a7(0x14b)](_0x21c7b5);global[_0x2286a7(0xee)][noslash(_0x16dbec[_0x2286a7(0xd8)])]=_0x16dbec[_0x2286a7(0xeb)];while(!![]){if(!botPaused)try{const _0x13c928=await exchange[_0x2286a7(0xd6)](_0x21c7b5);global['ticker'][noslash(_0x13c928[0x0][_0x2286a7(0xd8)])]=_0x13c928[0x0][_0x2286a7(0x13b)],await sleep(0x3e8);}catch(_0xd04ea7){if(!exchangeStopped)await handleError(_0xd04ea7,_0x2286a7(0xd6),_0x21c7b5);}else await sleep(0x3e8);}},_0x5bc215=async _0x1bfff6=>{const _0x5c01f8=_0x31da76;while(!![]){if(!botPaused)try{const _0x55acbf=await exchange[_0x5c01f8(0x14b)](_0x1bfff6);global[_0x5c01f8(0xc4)][_0x55acbf['symbol']]=_0x55acbf['percentage'],await sleep(0x2710);}catch(_0x485d7d){if(!exchangeStopped)await handleError(_0x485d7d,_0x5c01f8(0x12c),_0x1bfff6);}else await sleep(0x3e8);}},_0x162e11=async()=>{const _0x12cd0a=_0x31da76;while(!![]){if(!botPaused)try{const _0x12ec4d=await exchange['watchOrders']();_0x12ec4d[_0x12cd0a(0x147)](_0x598378=>{updateNumberCoinsCcxt(_0x598378);});}catch(_0xcbaf80){if(!exchangeStopped)await handleError(_0xcbaf80,_0x12cd0a(0xad));}else await sleep(0x3e8);}};_0x29d9c7['forEach'](async _0x181ad7=>{_0x594b68(_0x181ad7),_0x5bc215(_0x181ad7);}),!wsEventsSet&&(wsEventsSet=!![],_0x162e11());}async function loadSymbols(){const _0x35faeb=_0x28b247;if(allSymbols)return!![];let _0x4b40af=![];try{markets=await exchange[_0x35faeb(0x19d)](),allSymbols=exchange['symbols'][_0x35faeb(0xe4)](_0x398f3d=>{const _0x32b6bc=_0x35faeb;let _0x58f463=![];return exceptions[_0x32b6bc(0x147)](_0x2698b2=>{const _0x2acd12=_0x32b6bc;if(_0x398f3d[_0x2acd12(0xd3)](_0x2698b2))_0x58f463=!![];}),!_0x58f463;}),_0x4b40af=!![];}catch(_0x2895e1){_0x4b40af=![],handleError(_0x2895e1,_0x35faeb(0x17b));}return _0x4b40af;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x172f6b=_0x28b247;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x172f6b(0xb3),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x172f6b(0x1bc),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xaac1a7=getNormalizedPerformance();emitPerformance(_0xaac1a7),await getStartingBalances(_0xaac1a7);}async function toggleBotMode(){const _0x2aa420=_0x28b247;let _0x34336b=dbConfig[_0x2aa420(0xdc)]('bot')['find']({'botID':botID})[_0x2aa420(0x1ab)]();if(_0x34336b){const _0x4b4007=!_0x34336b[_0x2aa420(0x1ac)];dbConfig['get'](_0x2aa420(0x102))[_0x2aa420(0x159)]({'botID':botID})['assign']({'headless':_0x4b4007})['write'](),config[_0x2aa420(0x1ac)]=_0x4b4007,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0xe804fe=_0x28b247;process[_0xe804fe(0xf7)]({'updatebotmanager':!![]},_0x4f4bad=>{});}async function loadCoins(_0xe3db6c){const _0x11844d=_0x28b247;let _0x157616,_0x186c1f=0x0;loading[_0x11844d(0x1a7)]=[];let _0xe7fd01=0x0;_0xe3db6c['forEach'](_0x35194c=>{const _0x4558a5=_0x11844d;loading[_0x4558a5(0x1a7)][_0x4558a5(0x1f6)](_0x35194c);}),loadingCanceled=![];let _0x3b6d9e=![];while(_0x157616!=_0xe3db6c[_0x11844d(0x19b)]){_0x157616=0x0,_0xe3db6c[_0x11844d(0x147)](_0x34083a=>{const _0x225b40=_0x11844d;global['ticker'][noslash(_0x34083a)]&&(loading[_0x225b40(0x1a7)]=loading[_0x225b40(0x1a7)][_0x225b40(0xe4)](_0x577baa=>_0x577baa!=_0x34083a),_0x157616++);}),loading['progress']=Math[_0x11844d(0x1e1)](_0x157616/_0xe3db6c[_0x11844d(0x19b)]*0x64);loading[_0x11844d(0x15b)]!=0x64&&(_0xe7fd01>0x1e*0x5&&(loading[_0x11844d(0x134)]=!![],emitLoadingProgress()),_0xe7fd01>0x78*0x5&&!_0x3b6d9e&&(loading['cancel']=!![],emitLoadingProgress(),_0x3b6d9e=!![],logHistory('error',_0x11844d(0x152)+loading[_0x11844d(0x1a7)]['join'](',\x20')+_0x11844d(0xe5)),logHistory(_0x11844d(0x14a),_0x11844d(0x14e)+loadCoinsRetryInterval/0xea60+_0x11844d(0x110)),pidCoinReloading=setTimeout(()=>{const _0x96a3d6=_0x11844d;process[_0x96a3d6(0xf7)]({'stop':_0x96a3d6(0x139)},_0x35ac8c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x11844d(0xe3)]=!![],emitLoadingProgress();break;}else _0x157616!=_0x186c1f&&(_0x186c1f=_0x157616,emitLoadingProgress()),_0xe7fd01++,await sleep(0xc8);}_0x157616==_0xe3db6c['length']&&(coinsLoaded=!![],_0x3b6d9e&&logHistory('success',_0x11844d(0x127)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x38c34c=_0x28b247;proxyEmit(_0x38c34c(0xe2),{...emittedConfiguration(),'configstate':_0x38c34c(0xb6)});}function emitLoadingProgress(){const _0x22d7f8=_0x28b247;proxyEmit(_0x22d7f8(0x162),loading);}async function getFiat(){const _0x47e405=_0x28b247;let _0x549bce=0x0,_0x199cba=0x0;try{_0x549bce=global[_0x47e405(0xee)][stablecoins[_0x47e405(0x1e0)][_0x47e405(0x1c6)]],_0x199cba=global['ticker'][stablecoins[_0x47e405(0x1b4)]['coin']];}catch(_0x1e9fb1){await handleError(_0x1e9fb1,_0x47e405(0x1b2));}return{'eur':Number(_0x549bce),'usd':Number(_0x199cba)};}function capitalize(_0x22459b){const _0x398e45=_0x28b247;return _0x22459b[_0x398e45(0x161)](0x0,0x1)[_0x398e45(0x177)]()+_0x22459b[_0x398e45(0x161)](0x1);}function supportedExchanges(){const _0x5d0e06=_0x28b247,_0x1ee4a2=['ws',_0x5d0e06(0x12c),_0x5d0e06(0x14b),_0x5d0e06(0xd6),_0x5d0e06(0xad),_0x5d0e06(0x124),_0x5d0e06(0x1a6),_0x5d0e06(0x114),_0x5d0e06(0xc7),'fetchBalance'];let _0x16bcb7=[];const _0x161d92=ccxt[_0x5d0e06(0xb3)][_0x5d0e06(0xac)](_0x195079=>new ccxt[_0x195079]())['filter'](_0x382532=>_0x382532['has']['ws']);return _0x161d92['forEach'](_0x1bff8e=>{const _0x12add6=_0x5d0e06;let _0x4ef994=0x0;_0x1ee4a2[_0x12add6(0x147)](_0x4ebaf0=>{const _0x3f9887=_0x12add6;_0x4ebaf0 in _0x1bff8e[_0x3f9887(0xfe)]&&_0x1bff8e['has'][_0x4ebaf0]&&_0x4ef994++;}),_0x4ef994==_0x1ee4a2[_0x12add6(0x19b)]&&_0x16bcb7[_0x12add6(0x1f6)](capitalize(_0x1bff8e['id']));}),_0x16bcb7;}function setStartDatePerformance(){const _0x58c230=_0x28b247;if(config&&config['liquidity'][0x0][_0x58c230(0x1df)][_0x58c230(0x19b)]!=0x0){const _0x27e305=config[_0x58c230(0x135)][0x0][_0x58c230(0x1df)];dbPerformance[_0x58c230(0xdc)]('data')[_0x58c230(0x159)]({'date':config['startdate']})[_0x58c230(0x1a0)]({'coins':_0x27e305})[_0x58c230(0x1e6)]();}}async function recreateCoinResults(){const _0x2072d4=_0x28b247;let _0x2f1d4e,_0x1357c1=[];try{const _0x368afd=fns['format'](fns['parseISO'](config['startdate']['replace'](/\//g,'-')),_0x2072d4(0x1a8));for(const _0x44fcdc of currentCoins){if(_0x44fcdc['coin']!=config[_0x2072d4(0x197)]){let _0x4b36dd=0x0,_0x22b7fe,_0x5ee861;_0x2f1d4e=await getAllEventOrders(_0x44fcdc[_0x2072d4(0xd8)]);if(_0x2f1d4e[_0x2072d4(0x19b)]>0x0)_0x2f1d4e[_0x2072d4(0x147)](_0x121ba8=>{const _0x54066e=_0x2072d4,_0x1baafd=_0x44fcdc[_0x54066e(0xd8)]['includes'](config[_0x54066e(0x197)]+'/');_0x1357c1[_0x54066e(0x1f6)]({'datetime':_0x121ba8[_0x54066e(0xe1)],'coin':_0x44fcdc[_0x54066e(0x1c6)],'symbol':_0x44fcdc[_0x54066e(0xd8)],'side':_0x121ba8[_0x54066e(0x18c)],'reverse':_0x1baafd,'amount':formatResult(_0x121ba8[_0x54066e(0xca)],0x8),'filled':formatResult(_0x121ba8['filled'],0x8),'price':formatResult(_0x121ba8[_0x54066e(0x13b)],0x8)}),_0x4b36dd=_0x121ba8['side']=='buy'?_0x4b36dd+_0x121ba8[_0x54066e(0xca)]:_0x4b36dd-_0x121ba8[_0x54066e(0xca)];if(!_0x5ee861)_0x5ee861=_0x121ba8[_0x54066e(0x13b)];});_0x22b7fe=_0x44fcdc['number']-_0x4b36dd;let _0x31d998;config[_0x2072d4(0x135)][_0x2072d4(0x147)](_0x28d382=>{const _0x1f1da2=_0x2072d4;!_0x31d998&&(_0x31d998=_0x28d382[_0x1f1da2(0x1df)]['find'](_0x4a4a11=>_0x4a4a11[_0x1f1da2(0x1c6)]==_0x44fcdc['coin']),_0x31d998&&(_0x22b7fe=_0x31d998['number'],_0x5ee861=_0x31d998['price']));});let _0x4c3b18=dbCoinResults[_0x2072d4(0xdc)]('coins')[_0x2072d4(0x159)]({'coin':_0x44fcdc[_0x2072d4(0x1c6)]})['value']();_0x4c3b18={'coin':_0x44fcdc[_0x2072d4(0x1c6)],'number':_0x22b7fe,'breakeven':_0x5ee861,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x2072d4(0xdc)](_0x2072d4(0x1ed))[_0x2072d4(0x159)]({'coin':_0x44fcdc[_0x2072d4(0x1c6)]})[_0x2072d4(0x1a0)](_0x4c3b18)[_0x2072d4(0x1e6)]();}}_0x1357c1[_0x2072d4(0x14c)]((_0x16666c,_0x6f7db1)=>_0x16666c[_0x2072d4(0xe1)]>_0x6f7db1[_0x2072d4(0xe1)]?0x1:_0x6f7db1[_0x2072d4(0xe1)]>_0x16666c[_0x2072d4(0xe1)]?-0x1:0x0);let _0x3df0bc=0x0;for(let _0x5c6709 of _0x1357c1){await updateCoinResults(_0x5c6709,!![]);}}catch(_0x32c7a8){await handleError(_0x32c7a8,_0x2072d4(0x121));}}async function getAllEventOrders(_0x589b6f){const _0x53b419=_0x28b247;let _0x4fb8bc=[],_0x3e397a=dbLogs['get'](_0x53b419(0x156))['filter'](_0x137a05=>{const _0x13cc0b=_0x53b419,_0x50079e=_0x137a05['event'][_0x13cc0b(0x13e)]();return _0x50079e[_0x13cc0b(0xd3)](_0x589b6f[_0x13cc0b(0x13e)]())&&(_0x50079e[_0x13cc0b(0xd3)](_0x13cc0b(0x165))&&_0x50079e[_0x13cc0b(0xd3)](_0x13cc0b(0x12e))||_0x50079e[_0x13cc0b(0xd3)](_0x13cc0b(0xca))&&_0x50079e[_0x13cc0b(0xd3)](_0x13cc0b(0x12e)));})['sortBy'](_0x53b419(0x1d8))[_0x53b419(0x1ab)]();return _0x3e397a['forEach'](_0xb88e5d=>{const _0xc01e57=_0x53b419,_0x353658=_0xb88e5d['event'][_0xc01e57(0xd3)]('sell')?_0xc01e57(0x10a):_0xc01e57(0x1ef),_0x3a91f7=/#([0-9]|\.)+\s/i,_0xb59d58=Number(_0x3a91f7[_0xc01e57(0x192)](_0xb88e5d[_0xc01e57(0xa1)])[0x0][_0xc01e57(0x9d)](0x1)),_0x8b5f5c=/@([0-9]|\.)+$/i,_0x4f0b9e=Number(_0x8b5f5c[_0xc01e57(0x192)](_0xb88e5d['event'])[0x0][_0xc01e57(0x9d)](0x1));_0x4fb8bc[_0xc01e57(0x1f6)]({'datetime':_0xb88e5d['time'],'coin':symbolToCoin(_0x589b6f),'symbol':_0x589b6f,'side':_0x353658,'amount':_0xb59d58,'filled':_0xb59d58,'price':_0x4f0b9e});}),_0x4fb8bc;}async function getAllOrders(_0xba3ef8,_0x274943){const _0xf4d699=_0x28b247;let _0x4b2fdb=[];while(_0x274943<exchange[_0xf4d699(0xea)]()){const _0x16e90c=0x1f4,_0x426dfb=await exchange[_0xf4d699(0xc7)](_0xba3ef8,_0x274943,_0x16e90c);if(_0x426dfb['length'])_0x274943=_0x426dfb[_0x426dfb[_0xf4d699(0x19b)]-0x1]['timestamp']+0x1,_0x4b2fdb=_0x4b2fdb['concat'](_0x426dfb);else break;}return _0x4b2fdb;}async function validate24hChanges(){const _0x4e849f=_0x28b247;let _0x5c92ee;for(const _0x328513 of currentCoins){if(_0x328513[_0x4e849f(0x1c6)]!=config[_0x4e849f(0x197)]){let _0xa0f3e5;_0x328513[_0x4e849f(0x1bb)]?_0xa0f3e5=formatResult((0x1/(global[_0x4e849f(0xc4)][noslash(_0x328513[_0x4e849f(0xd8)])]/0x64+0x1)-0x1)*0x64,0x3):_0xa0f3e5=global[_0x4e849f(0xc4)][noslash(_0x328513['symbol'])],_0xa0f3e5<config[_0x4e849f(0x1d7)]&&(logHistory(_0x4e849f(0x14a),_0x328513[_0x4e849f(0x1c6)]+_0x4e849f(0xcd)+_0xa0f3e5+'%'),logHistory(_0x4e849f(0x14a),_0x4e849f(0x128)),logHistory(_0x4e849f(0x14a),_0x4e849f(0x1d0)),await storeHeadless({'headless':![]}));}}}function isNewerVersion(_0x5b626e,_0x226750){const _0x1e2555=_0x28b247,_0x2d903e=_0x226750[_0x1e2555(0xd7)]('.'),_0x3ec284=_0x5b626e['split']('.');for(var _0x5b65d0=0x0;_0x5b65d0<_0x3ec284[_0x1e2555(0x19b)];_0x5b65d0++){const _0x3a2302=~~_0x3ec284[_0x5b65d0],_0x3c79eb=~~_0x2d903e[_0x5b65d0];if(_0x3a2302>_0x3c79eb)return!![];if(_0x3a2302<_0x3c79eb)return![];}return![];}async function oneTimeMigration(){const _0x3f231b=_0x28b247;let _0x5fb046=dbLogs[_0x3f231b(0xdc)](_0x3f231b(0xdd))['value']();if(!isNewerVersion(_0x5fb046,'2.3.5')){dbLogs[_0x3f231b(0xff)]('version',_0x3f231b(0x148))[_0x3f231b(0x1e6)]();let _0x8c5c37=[];const _0x50a9bb=dbLogs[_0x3f231b(0xdc)](_0x3f231b(0x156))[_0x3f231b(0x1ab)]();_0x50a9bb[_0x3f231b(0x147)](_0x1a73a6=>{const _0x17608f=_0x3f231b;_0x8c5c37[_0x17608f(0x1f6)]({'time':_0x1a73a6[_0x17608f(0x1d8)],'type':_0x1a73a6[_0x17608f(0x1f2)],'event':_0x1a73a6['event']});}),dbLogs[_0x3f231b(0xdc)](_0x3f231b(0x156))[_0x3f231b(0x1a0)](_0x8c5c37)[_0x3f231b(0x1e6)]();}let _0x2c41dc=dbConfig[_0x3f231b(0xdc)](_0x3f231b(0xdd))[_0x3f231b(0x1ab)]();if(!isNewerVersion(_0x2c41dc,_0x3f231b(0x148))){dbConfig[_0x3f231b(0xff)](_0x3f231b(0xdd),_0x3f231b(0x148))[_0x3f231b(0x1e6)]();let _0x9caddf=dbConfig['get'](_0x3f231b(0x102))['find']({'botID':botID})[_0x3f231b(0x1ab)]();if(_0x9caddf){let _0x2a97bc=[];_0x9caddf['portfolio'][_0x3f231b(0x147)](_0x2a9c43=>{const _0x54bf21=_0x3f231b;_0x2a97bc['push']({'coin':_0x2a9c43['coin'],'number':_0x2a9c43[_0x54bf21(0x1be)],'price':_0x2a9c43[_0x54bf21(0xd5)]}),delete _0x2a9c43['startnumber'],delete _0x2a9c43[_0x54bf21(0xd5)];});if(_0x2a97bc['length']!==0x0)fs[_0x3f231b(0x11b)](configbackuppath+(_0x3f231b(0x151)+botID+'.json'),JSON[_0x3f231b(0x107)](_0x2a97bc,null,0x4),function(_0x14dc1f){if(_0x14dc1f){}});const _0x5d7c7e=(_0x238010,_0x403bfb)=>{const _0x38559b=_0x3f231b;let _0x5512f0=[];_0x403bfb[_0x38559b(0x147)](_0x196f7a=>{const _0x55ad58=_0x38559b,_0x59b506=_0x238010[_0x55ad58(0x159)](_0x456bcf=>_0x456bcf[_0x55ad58(0x1c6)]==_0x196f7a[_0x55ad58(0x1c6)]);if(!_0x59b506)_0x5512f0['push'](_0x196f7a);});let _0x36ffbe=[];return _0x238010['forEach'](_0x202090=>{const _0x35301d=_0x38559b,_0x3665e9=_0x403bfb[_0x35301d(0x159)](_0x5584ce=>_0x5584ce[_0x35301d(0x1c6)]==_0x202090[_0x35301d(0x1c6)]);if(!_0x3665e9||_0x3665e9[_0x35301d(0xab)]==0x0&&_0x202090[_0x35301d(0xab)]!=0x0)_0x36ffbe[_0x35301d(0x1f6)](_0x202090);}),{'missingDay1':_0x5512f0,'notInDay2':_0x36ffbe};},_0x37bf9a=dbPerformance['get'](_0x3f231b(0x1b3))[_0x3f231b(0x108)]()[_0x3f231b(0x1ab)]();if(_0x37bf9a[_0x3f231b(0x19b)]>0x1){const {missingDay1:_0x14733e,notInDay2:_0x3ce36c}=_0x5d7c7e(_0x2a97bc,_0x37bf9a[0x1][_0x3f231b(0x1ed)]);_0x2a97bc=[..._0x2a97bc,..._0x14733e],_0x3ce36c[_0x3f231b(0x147)](_0x2f66fc=>{const _0x26b7b1=_0x3f231b;let _0x3a424a=_0x2a97bc[_0x26b7b1(0x109)](_0x3bcf76=>_0x3bcf76[_0x26b7b1(0x1c6)]==_0x2f66fc[_0x26b7b1(0x1c6)]);_0x3a424a!=-0x1&&_0x2a97bc[_0x26b7b1(0x1d5)](_0x3a424a,0x1);});}_0x2a97bc[_0x3f231b(0x14c)]((_0x19bb29,_0x5871d2)=>_0x19bb29['coin']>_0x5871d2[_0x3f231b(0x1c6)]?0x1:_0x5871d2[_0x3f231b(0x1c6)]>_0x19bb29[_0x3f231b(0x1c6)]?-0x1:0x0);let _0x265213=[{'date':_0x9caddf['startdate'],'changes':_0x2a97bc}];_0x37bf9a['length']>0x2&&_0x37bf9a[_0x3f231b(0x147)]((_0x31d9b3,_0x2392ab)=>{const _0x4a8e9c=_0x3f231b;if(_0x2392ab>0x0&&_0x2392ab<_0x37bf9a[_0x4a8e9c(0x19b)]-0x1){const {missingDay1:_0x909031,notInDay2:_0x5bc33e}=_0x5d7c7e(_0x37bf9a[_0x2392ab]['coins'],_0x37bf9a[_0x2392ab+0x1]['coins']);_0x2a97bc=[],(_0x909031[_0x4a8e9c(0x19b)]!=0x0||_0x5bc33e[_0x4a8e9c(0x19b)]!=0x0)&&(_0x909031['length']!=0x0&&_0x2a97bc['push'](..._0x909031),_0x5bc33e[_0x4a8e9c(0x19b)]!=0x0&&(_0x5bc33e[_0x4a8e9c(0x147)](_0x289eec=>{const _0x51ab79=_0x4a8e9c;_0x289eec['number']=-_0x289eec[_0x51ab79(0xab)];}),_0x2a97bc[_0x4a8e9c(0x1f6)](..._0x5bc33e)),_0x2a97bc[_0x4a8e9c(0x14c)]((_0x5cada5,_0x5e74b3)=>_0x5cada5['coin']>_0x5e74b3[_0x4a8e9c(0x1c6)]?0x1:_0x5e74b3[_0x4a8e9c(0x1c6)]>_0x5cada5[_0x4a8e9c(0x1c6)]?-0x1:0x0),_0x265213[_0x4a8e9c(0x1f6)]({'date':_0x37bf9a[_0x2392ab+0x1][_0x4a8e9c(0x115)],'changes':_0x2a97bc}));}}),dbConfig[_0x3f231b(0xdc)](_0x3f231b(0x102))[_0x3f231b(0x159)]({'botID':botID})[_0x3f231b(0x1a0)]({..._0x9caddf,'liquidity':_0x265213})[_0x3f231b(0x1e6)]();}}_0x2c41dc=dbConfig['get'](_0x3f231b(0xdd))[_0x3f231b(0x1ab)]();if(!isNewerVersion(_0x2c41dc,_0x3f231b(0x17f))){dbConfig['set'](_0x3f231b(0xdd),_0x3f231b(0x17f))[_0x3f231b(0x1e6)]();let _0x30c3f8=dbConfig[_0x3f231b(0xdc)](_0x3f231b(0x102))[_0x3f231b(0x159)]({'botID':botID})[_0x3f231b(0x1ab)]();if(_0x30c3f8){const _0x5d6001=_0x30c3f8[_0x3f231b(0x15c)],_0x31b101=_0x5d6001?capitalize(_0x5d6001):_0x3f231b(0x1f1);dbConfig[_0x3f231b(0xdc)]('bot')['find']({'botID':botID})[_0x3f231b(0x1a0)]({'exchange':_0x31b101})[_0x3f231b(0x1e6)]();}}config=getConfiguration(botID);let _0x2687ae=dbPerformance[_0x3f231b(0xdc)](_0x3f231b(0xdd))['value']();!isNewerVersion(_0x2687ae,_0x3f231b(0x148))&&(dbPerformance[_0x3f231b(0xff)]('version',_0x3f231b(0x148))[_0x3f231b(0x1e6)](),setStartDatePerformance());let _0x5609ec=dbCoinResults[_0x3f231b(0xdc)](_0x3f231b(0xdd))[_0x3f231b(0x1ab)]();if(!isNewerVersion(_0x5609ec,'2.5.0')){dbCoinResults[_0x3f231b(0xff)](_0x3f231b(0xdd),_0x3f231b(0x1b8))[_0x3f231b(0x1e6)]();let _0x2deef8=dbCoinResults[_0x3f231b(0xdc)](_0x3f231b(0x1ed))[_0x3f231b(0x1ab)]();if(_0x2deef8[_0x3f231b(0x19b)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x55857a){const _0x260f6b=_0x28b247;let _0x2b1f16=dbConfig[_0x260f6b(0xdc)](_0x260f6b(0x102))[_0x260f6b(0x159)]({'botID':_0x55857a})[_0x260f6b(0x1ab)]();if(_0x2b1f16){let _0x2c2c66=![];typeof _0x2b1f16['threshold']==_0x260f6b(0xa5)&&(_0x2b1f16={..._0x2b1f16,'threshold':Number(_0x2b1f16[_0x260f6b(0x1c1)])},_0x2c2c66=!![]),_0x2b1f16['change24h']==null&&(_0x2b1f16={..._0x2b1f16,'change24h':-0x14},_0x2c2c66=!![]),_0x2c2c66&&(_0x2b1f16={'botID':_0x2b1f16[_0x260f6b(0x1e9)],'exchange':_0x2b1f16['exchange'],'apiKey':_0x2b1f16[_0x260f6b(0x1c7)],'apiSecret':_0x2b1f16[_0x260f6b(0xe9)],'basecoin':_0x2b1f16[_0x260f6b(0x197)],'botname':_0x2b1f16[_0x260f6b(0xbb)],'showname':_0x2b1f16[_0x260f6b(0x14d)],'threshold':_0x2b1f16[_0x260f6b(0x1c1)],'ordertype':_0x2b1f16[_0x260f6b(0xfc)],'timeout':_0x2b1f16[_0x260f6b(0x134)],'startdate':_0x2b1f16['startdate'],'recreate':_0x2b1f16[_0x260f6b(0x11f)],'timeshift':_0x2b1f16['timeshift'],'headless':_0x2b1f16[_0x260f6b(0x1ac)],'cooldown':_0x2b1f16[_0x260f6b(0x118)],'change24h':_0x2b1f16[_0x260f6b(0x1d7)],'emojibuy':_0x2b1f16['emojibuy'],'emojisell':_0x2b1f16[_0x260f6b(0x18d)],'portfolio':_0x2b1f16['portfolio'],'liquidity':_0x2b1f16['liquidity']},dbConfig['get'](_0x260f6b(0x102))[_0x260f6b(0xb4)]()[_0x260f6b(0x1e6)](),dbConfig[_0x260f6b(0xdc)](_0x260f6b(0x102))[_0x260f6b(0x1f6)](_0x2b1f16)[_0x260f6b(0x1e6)]());}else _0x2b1f16={'botID':_0x55857a,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x55857a,'showname':![],'threshold':0x3,'ordertype':_0x260f6b(0x165),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x2b1f16;}function emittedConfiguration(){const _0x3a4386=_0x28b247;let _0x2ea38f;if(config[_0x3a4386(0x1c7)]=='')_0x2ea38f={...config,'configstate':_0x3a4386(0x1d9)};else config[_0x3a4386(0x1c7)]==_0x3a4386(0xec)?_0x2ea38f={...config,'configstate':_0x3a4386(0xb2)}:_0x2ea38f={...config,'apiKey':_0x3a4386(0xf0),'apiSecret':_0x3a4386(0xf0)};return _0x2ea38f;}function getSettings(){const _0x6f0f7c=_0x28b247;return dbSettings[_0x6f0f7c(0xdc)]('settings')[_0x6f0f7c(0x1ab)]();}function getSecure(){const _0x34d608=_0x28b247;return dbSecure['get'](_0x34d608(0xef))[_0x34d608(0x1ab)]()||{};}function updateTimeshift(_0x4ed532){const _0x3cd49d=_0x28b247;let _0x19c33c=dbConfig[_0x3cd49d(0xdc)](_0x3cd49d(0x102))[_0x3cd49d(0x159)]({'botID':botID})['value']();_0x19c33c&&dbConfig[_0x3cd49d(0xdc)]('bot')[_0x3cd49d(0x159)]({'botID':botID})[_0x3cd49d(0x1a0)]({'timeshift':_0x4ed532})[_0x3cd49d(0x1e6)](),config[_0x3cd49d(0x196)]=_0x4ed532,proxyEmit(_0x3cd49d(0xe2),emittedConfiguration());}async function storeConfiguration(_0x22a50b){const _0x188b68=_0x28b247;let _0x3a2d51=[],_0x66c27f=[];_0x22a50b['portfolio'][_0x188b68(0x147)](_0x58f018=>{const _0x26f0a2=_0x188b68;if(!_0x58f018[_0x26f0a2(0x175)]&&_0x58f018['coin']!=_0x22a50b[_0x26f0a2(0x197)])_0x66c27f['push'](_0x58f018['symbol']);});currentCoins['length']==0x0?_0x3a2d51=_0x66c27f:_0x66c27f[_0x188b68(0x147)](_0x309953=>{const _0x1ec418=_0x188b68,_0x4d6d40=currentCoins['find'](_0x1e1045=>_0x1e1045[_0x1ec418(0xd8)]==_0x309953);!_0x4d6d40&&_0x3a2d51[_0x1ec418(0x1f6)](_0x309953);});let _0x30fd01=dbConfig[_0x188b68(0xdc)]('bot')[_0x188b68(0x159)]({'botID':botID})[_0x188b68(0x1ab)]();_0x22a50b={..._0x22a50b,'apiKey':crypt['decrypt'](secure['privateKey'],_0x22a50b['apiKey'])[_0x188b68(0x1d4)],'apiSecret':crypt[_0x188b68(0x185)](secure[_0x188b68(0x1b6)],_0x22a50b[_0x188b68(0xe9)])[_0x188b68(0x1d4)]};if(_0x30fd01){if(_0x22a50b['apiKey']==_0x188b68(0xf0))_0x22a50b['apiKey']=config[_0x188b68(0x1c7)];if(_0x22a50b[_0x188b68(0xe9)]==_0x188b68(0xf0))_0x22a50b['apiSecret']=config[_0x188b68(0xe9)];dbConfig[_0x188b68(0xdc)](_0x188b68(0x102))[_0x188b68(0x159)]({'botID':botID})[_0x188b68(0x1a0)](_0x22a50b)[_0x188b68(0x1e6)]();}else dbConfig[_0x188b68(0xdc)](_0x188b68(0x102))[_0x188b68(0x1f6)](_0x22a50b)[_0x188b68(0x1e6)](),process['send']({'status':_0x188b68(0x1ad),'live':_0x188b68(0x1dd)},_0x2fa05d=>{});config={..._0x22a50b},setStartDatePerformance(),process[_0x188b68(0xf7)]({'botname':_0x22a50b[_0x188b68(0xbb)]},_0xe8d310=>{}),updateBotManager();const _0x13a320=getNormalizedPerformance();getStartingBalances(_0x13a320),emitPerformance(_0x13a320),proxyEmit(_0x188b68(0xf4)),await initCoinResults(),reset(_0x3a2d51);}async function storeHeadless(_0x5b8c91){const _0x26bce0=_0x28b247,_0x433d8c={...config,'headless':_0x5b8c91[_0x26bce0(0x1ac)]};let _0x1c16a3=dbConfig['get'](_0x26bce0(0x102))[_0x26bce0(0x159)]({'botID':botID})[_0x26bce0(0x1ab)]();_0x1c16a3&&dbConfig[_0x26bce0(0xdc)](_0x26bce0(0x102))['find']({'botID':botID})['assign'](_0x433d8c)[_0x26bce0(0x1e6)](),config={..._0x433d8c},updateBotManager(),proxyEmit(_0x26bce0(0xe2),emittedConfiguration());}function noslash(_0xfc19b7){const _0x19d978=_0x28b247;return _0xfc19b7[_0x19d978(0x9c)]('/','');}async function updateNumberCoinsCcxt(_0x404a81){const _0x1d021d=_0x28b247;logger[_0x1d021d(0x17e)](_0x1d021d(0x136)+_0x404a81[_0x1d021d(0xd8)]+_0x1d021d(0x11c)+_0x404a81[_0x1d021d(0x18f)]+_0x1d021d(0x11c)+_0x404a81['id']+_0x1d021d(0x11c)+_0x404a81[_0x1d021d(0x138)]);let _0x4e73bf=_0x404a81[_0x1d021d(0x18f)],_0x22706f=![];currentCoins[_0x1d021d(0x147)](_0x55078a=>{_0x55078a['symbol']==_0x404a81['symbol']&&(_0x22706f=!![]);});if(!_0x22706f)return;const _0x20da62=currentCoins[_0x1d021d(0x159)](_0x153034=>_0x153034[_0x1d021d(0xd8)]==_0x404a81[_0x1d021d(0xd8)]),_0x313c42=_0x1e0e76=>{const _0x1c4397=_0x1d021d;if(_0x20da62)_0x20da62[_0x1c4397(0x130)]=_0x1e0e76;};if(_0x4e73bf==_0x1d021d(0x184))_0x313c42(_0x1d021d(0x184));else{if(_0x4e73bf=='canceled')_0x313c42(_0x1d021d(0x12a)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x4e73bf==_0x1d021d(0xe6)){logger[_0x1d021d(0x17e)]('1\x20-\x20FILLED:\x20'+_0x404a81['symbol']+_0x1d021d(0x11c)+_0x404a81[_0x1d021d(0xca)]+'\x20|\x20'+_0x404a81['id']+_0x1d021d(0x11c)+_0x404a81[_0x1d021d(0x138)]);let _0xcc8077=![];if(lastOrders)lastOrders[_0x1d021d(0x147)](async _0x293cd8=>{const _0x394e32=_0x1d021d;if(_0x293cd8[_0x394e32(0xc6)]==_0x404a81['clientOrderId']){logger['debug'](_0x394e32(0x116)+_0x404a81[_0x394e32(0x138)]),_0xcc8077=!![];if(_0x293cd8[_0x394e32(0xca)]==0x0){logger['debug']('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x404a81[_0x394e32(0x138)]),_0x293cd8[_0x394e32(0x13b)]=_0x404a81['average'],_0x293cd8[_0x394e32(0xca)]=_0x404a81['filled'],_0x293cd8['fee']={'cost':_0x404a81[_0x394e32(0x150)]['cost'],'currency':_0x404a81[_0x394e32(0x150)][_0x394e32(0xaf)]},_0x313c42(_0x394e32(0xca)),await validateOrders();if(lockOrders==ORDERS[_0x394e32(0x11a)])currentCoins=await getCoins();await updateCoinResults(_0x293cd8);}}});!_0xcc8077&&(logger[_0x1d021d(0x17e)](_0x1d021d(0x189)+_0x404a81['id']),_0x313c42(_0x1d021d(0xca)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x4a4dc7=JSON[_0x1d021d(0xed)](lastBalances[_0x1d021d(0x16e)]);const _0x5e676e=_0x4a4dc7[_0x1d021d(0x159)](_0x2005bd=>_0x2005bd[_0x1d021d(0xd8)]==_0x404a81[_0x1d021d(0xd8)]);if(_0x5e676e){if(_0x4e73bf==_0x1d021d(0x184))_0x5e676e[_0x1d021d(0x130)]=_0x5e676e[_0x1d021d(0x130)]==_0x1d021d(0xca)?_0x1d021d(0xca):'open';else{if(_0x4e73bf==_0x1d021d(0x12a))_0x5e676e[_0x1d021d(0x130)]=_0x5e676e[_0x1d021d(0x130)]==_0x1d021d(0xca)?_0x1d021d(0xca):_0x1d021d(0x12a);else _0x4e73bf=='closed'&&(_0x5e676e[_0x1d021d(0x130)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x1d021d(0x107)](_0x4a4dc7)},proxyEmit(_0x1d021d(0x1bc),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x4568b1=![],_0x188cad=!![],_0x4fddf7=config[_0x28b247(0x197)]){const _0x5f2643=_0x28b247;let _0xff54c,_0x4e2577=[],_0x31f706=[],_0x49adff=[];try{_0xff54c=await exchange[_0x5f2643(0x18b)](),mybalances=_0xff54c[_0x5f2643(0xb5)];if(!_0x188cad)for(const [_0x3f604c,_0x2982f9]of Object[_0x5f2643(0x11d)](mybalances)){_0x49adff[_0x5f2643(0x1f6)](_0x3f604c);}else config[_0x5f2643(0x16e)][_0x5f2643(0x147)](_0xd7d6ee=>{const _0x524e3f=_0x5f2643;if(!_0xd7d6ee[_0x524e3f(0x175)])_0x49adff[_0x524e3f(0x1f6)](_0xd7d6ee[_0x524e3f(0x1c6)]);});if(_0x4fddf7=='')for(const [_0x478b45,_0x284ae6]of Object[_0x5f2643(0x11d)](mybalances)){_0x284ae6[_0x5f2643(0x10e)]()!=0x0&&_0x31f706['push']({'coin':_0x478b45});}else{if(_0x4568b1)await getOpenOrders();let _0x2d21ea=![];for(const [_0x396122,_0x404d22]of Object[_0x5f2643(0x11d)](mybalances)){if(_0x49adff[_0x5f2643(0xd3)](_0x396122)){const _0x3b6026=config['portfolio'][_0x5f2643(0x159)](_0x5ae896=>_0x5ae896[_0x5f2643(0x1c6)]==_0x396122),_0x53003f=_0x396122+'/'+_0x4fddf7,_0x310cb6=_0x4fddf7+'/'+_0x396122,_0x1c8cb3=currentCoins['find'](_0x784228=>_0x784228[_0x5f2643(0x1c6)]==_0x396122);_0x2d21ea=![];_0x4568b1&&(_0x2d21ea=allOpenOrders[_0x5f2643(0x159)](_0x5aa2aa=>_0x5aa2aa[_0x5f2643(0xd8)]==_0x3b6026[_0x5f2643(0xd8)]));if((_0x404d22[_0x5f2643(0x10e)]()!=0x0||_0x3b6026)&&(allSymbols[_0x5f2643(0xd3)](_0x53003f)||_0x396122==_0x4fddf7))_0x396122!=_0x4fddf7&&_0x4e2577['push'](_0x53003f),_0x31f706['push']({'coin':_0x396122,'symbol':_0x53003f,'reverse':![],'number':Math[_0x5f2643(0x103)](_0x404d22+(_0x3b6026&&_0x3b6026[_0x5f2643(0x19c)]||0x0),0x0),'orderstatus':_0x4568b1?_0x2d21ea?'open':_0x5f2643(0x18a):_0x1c8cb3?_0x1c8cb3[_0x5f2643(0x130)]:'none'});else(_0x404d22[_0x5f2643(0x10e)]()!=0x0||_0x3b6026)&&allSymbols['includes'](_0x310cb6)&&(_0x396122!=_0x4fddf7&&_0x4e2577[_0x5f2643(0x1f6)](_0x310cb6),_0x31f706['push']({'coin':_0x396122,'symbol':_0x310cb6,'reverse':!![],'number':Math[_0x5f2643(0x103)](_0x404d22+(_0x3b6026&&_0x3b6026['offset']||0x0),0x0),'orderstatus':_0x4568b1?_0x2d21ea?_0x5f2643(0x184):_0x5f2643(0x18a):_0x1c8cb3?_0x1c8cb3['orderstatus']:_0x5f2643(0x18a)}));}}}}catch(_0x540a01){if(!_0x188cad)handleErrorNoStop(_0x540a01,'getCoins()');else await handleError(_0x540a01,_0x5f2643(0x1e4));}return _0x31f706;}async function getCoinNumber(_0x4c4ffd){const _0x105fa0=_0x28b247;let _0x320bfa;try{const _0x4c62ba=await exchange[_0x105fa0(0x18b)]();_0x320bfa=_0x4c62ba[_0x105fa0(0xb5)][_0x4c4ffd];}catch(_0x43f6c9){await handleError(_0x43f6c9,'getCoinNumber()');}return _0x320bfa;}async function getOpenOrders(){const _0x3bdf70=_0x28b247;let _0x395ec7;allOpenOrders=[];try{for(const _0x518250 of config['portfolio']){!_0x518250[_0x3bdf70(0x175)]&&_0x518250[_0x3bdf70(0x1c6)]!=config['basecoin']&&(_0x395ec7=await exchange[_0x3bdf70(0x114)](_0x518250['symbol']),_0x395ec7[_0x3bdf70(0x19b)]>0x0&&allOpenOrders['push'](_0x395ec7[0x0]));}}catch(_0x24438e){await handleError(_0x24438e,'getOpenOrders()');}}async function handleOpenOrders(_0x21a677=0x0){const _0x47105c=_0x28b247;allOpenOrders[_0x47105c(0x19b)]==0x0&&lockOrders==ORDERS[_0x47105c(0x11a)]&&allOrdersPlaced&&(_0x21a677==0x0?(logger[_0x47105c(0x17e)](_0x47105c(0x13d)),_0x21a677++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x47105c(0x14f)),validateOrders(_0x47105c(0x113))));}async function getPortfolio(_0x152a15){const _0x1568c8=_0x28b247;let _0x4c93d1=[],_0x4068be=[],_0x1ee554,_0x602dfe=[],_0x14e0df=![];if(_0x152a15[_0x1568c8(0x1c7)]===_0x1568c8(0xf0)||_0x152a15['apiSecret']===_0x1568c8(0xf0))_0x14e0df=!![];else{await initExchange(_0x152a15['exchange'],_0x152a15[_0x1568c8(0x1c7)],_0x152a15['apiSecret']);try{_0x14e0df=await loadSymbols();}catch(_0x2d64cc){_0x14e0df=![],handleErrorNoStop(_0x2d64cc,'loadSymbols()');}}if(_0x14e0df){_0x602dfe=await getCoins(![],![],_0x152a15[_0x1568c8(0x197)]);if(_0x602dfe===![])proxyEmit('portfolio',![]);else{if(_0x152a15[_0x1568c8(0x197)]=='')proxyEmit(_0x1568c8(0x16e),_0x602dfe);else{_0x602dfe['forEach'](_0x486c1f=>{const _0x54baca=_0x1568c8;if(_0x486c1f[_0x54baca(0x1c6)]!=_0x152a15['basecoin'])_0x4c93d1['push'](_0x486c1f[_0x54baca(0xd8)]);});try{_0x4068be=await exchange[_0x1568c8(0x12c)](_0x4c93d1);}catch(_0x599b61){await handleError(_0x599b61,_0x1568c8(0x105));}_0x602dfe[_0x1568c8(0x147)](_0x2e2f72=>{const _0x102448=_0x1568c8;_0x2e2f72['coin']!=_0x152a15[_0x102448(0x197)]?_0x1ee554=_0x2e2f72[_0x102448(0x1bb)]?0x1/_0x4068be[_0x2e2f72[_0x102448(0xd8)]][_0x102448(0xeb)]:_0x4068be[_0x2e2f72['symbol']]['last']:_0x1ee554=0x1,_0x2e2f72[_0x102448(0x13b)]=formatResult(_0x1ee554,0x8);}),proxyEmit(_0x1568c8(0x16e),_0x602dfe);}}}else proxyEmit(_0x1568c8(0x16e),![]);}function checkMinimums(_0x12a505){const _0xa50407=_0x28b247;let _0x123a8d=!![];const _0x35bb35=!_0x12a505[_0xa50407(0x1bb)]?markets[_0x12a505[_0xa50407(0xd8)]]['limits'][_0xa50407(0x1a9)]['min']:markets[_0x12a505[_0xa50407(0xd8)]][_0xa50407(0x101)]['cost'][_0xa50407(0x1cf)],_0x23d1f2=!_0x12a505[_0xa50407(0x1bb)]?markets[_0x12a505[_0xa50407(0xd8)]][_0xa50407(0x101)][_0xa50407(0x1dc)][_0xa50407(0x1cf)]:markets[_0x12a505[_0xa50407(0xd8)]][_0xa50407(0x101)][_0xa50407(0x1a9)][_0xa50407(0x1cf)],_0x26e086=markets[_0x12a505[_0xa50407(0xd8)]]['precision'][_0xa50407(0x1a9)];_0x12a505[_0xa50407(0xc2)]=formatResultTruncate(_0x12a505[_0xa50407(0xc2)],_0x26e086);if(Math[_0xa50407(0xd9)](_0x12a505[_0xa50407(0xc2)])<_0x35bb35)_0x123a8d=![];if(Math[_0xa50407(0xd9)](_0x12a505[_0xa50407(0xc2)])*_0x12a505[_0xa50407(0xeb)]<_0x23d1f2)_0x123a8d=![];if(_0x12a505[_0xa50407(0x18c)]==_0xa50407(0x10a)){let _0x17bcf5=config[_0xa50407(0x16e)][_0xa50407(0x159)](_0x2788e2=>_0x2788e2[_0xa50407(0x1c6)]==_0x12a505[_0xa50407(0x1c6)]);if(_0x17bcf5[_0xa50407(0x19c)]>0x0){if(Math[_0xa50407(0xd9)](_0x12a505['trade'])>_0x12a505[_0xa50407(0xab)]-_0x17bcf5[_0xa50407(0x19c)])_0x123a8d=![];}else{if(Math['abs'](_0x12a505[_0xa50407(0xc2)])>_0x12a505[_0xa50407(0xab)])_0x123a8d=![];}}if(_0x12a505[_0xa50407(0x18c)]=='buy'){let _0x18ae3b=config[_0xa50407(0x16e)][_0xa50407(0x159)](_0x1d8d14=>_0x1d8d14[_0xa50407(0x1c6)]==config[_0xa50407(0x197)]),_0x59fb0b=currentCoins[_0xa50407(0x159)](_0x355445=>_0x355445[_0xa50407(0x1c6)]==config[_0xa50407(0x197)]);if(_0x18ae3b[_0xa50407(0x19c)]>0x0){if(Math[_0xa50407(0xd9)](_0x12a505[_0xa50407(0xc2)])*_0x12a505[_0xa50407(0xeb)]>_0x59fb0b['number']-_0x18ae3b[_0xa50407(0x19c)])_0x123a8d=![];}else{if(Math['abs'](_0x12a505[_0xa50407(0xc2)])*_0x12a505[_0xa50407(0xeb)]>_0x59fb0b[_0xa50407(0xab)])_0x123a8d=![];}}return _0x123a8d;}async function getBalances(){const _0xcf6e1f=_0x28b247;let _0x520cec=0x0,_0x81ee0d;const _0x571b53=config[_0xcf6e1f(0x1c1)];if(config['headless']&&config[_0xcf6e1f(0x1d7)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x4ab60e=>{const _0x466de0=_0xcf6e1f;if(_0x4ab60e[_0x466de0(0x1c6)]!=config[_0x466de0(0x197)]){let _0x1171e8=global[_0x466de0(0xee)][noslash(_0x4ab60e['symbol'])];_0x81ee0d=_0x4ab60e[_0x466de0(0x1bb)]?0x1/_0x1171e8:_0x1171e8;}else _0x81ee0d=0x1;let _0x5f4ded=_0x4ab60e[_0x466de0(0xab)]*_0x81ee0d;_0x520cec+=_0x5f4ded,_0x4ab60e[_0x466de0(0xeb)]=formatResult(Number(_0x81ee0d),0x8),_0x4ab60e[_0x466de0(0x1ab)]=_0x5f4ded;}),currentCoins[_0xcf6e1f(0x147)](_0x2c1371=>{const _0x3bffb2=_0xcf6e1f;let _0x2aacf1=config['portfolio']['find'](_0x275293=>_0x275293[_0x3bffb2(0x1c6)]==_0x2c1371['coin']),_0x23560a=Number(_0x2aacf1[_0x3bffb2(0xf1)]),_0x4e3cc9=_0x2c1371[_0x3bffb2(0x1ab)]/_0x520cec*0x64,_0x18440e=_0x23560a*_0x520cec/0x64/_0x2c1371[_0x3bffb2(0xeb)]-_0x2c1371[_0x3bffb2(0xab)];_0x2c1371[_0x3bffb2(0xf1)]=formatResult(_0x4e3cc9,0x3),_0x2c1371['target']=formatResult(_0x23560a,0x3),_0x2c1371[_0x3bffb2(0xc2)]=formatResult(_0x18440e,0x8),_0x2c1371[_0x3bffb2(0x18c)]='',_0x2c1371[_0x3bffb2(0x181)]=![];if(_0x2c1371[_0x3bffb2(0x1c6)]!=config[_0x3bffb2(0x197)]){if(_0x2c1371[_0x3bffb2(0xf1)]>_0x23560a)_0x2c1371[_0x3bffb2(0x18c)]=_0x3bffb2(0x10a),_0x2c1371[_0x3bffb2(0x181)]=checkMinimums(_0x2c1371);else _0x2c1371[_0x3bffb2(0xf1)]<_0x23560a&&(_0x2c1371['side']=_0x3bffb2(0x1ef),_0x2c1371[_0x3bffb2(0x181)]=checkMinimums(_0x2c1371));}_0x2c1371['delta']=_0x2c1371[_0x3bffb2(0xf1)]/_0x2c1371[_0x3bffb2(0xf8)]-0x1;if(_0x2c1371[_0x3bffb2(0x130)]==_0x3bffb2(0xca)||_0x2c1371[_0x3bffb2(0x130)]=='canceled')_0x2c1371[_0x3bffb2(0x130)]=_0x3bffb2(0x18a);}),currentCoins[_0xcf6e1f(0x14c)]((_0xf05cfa,_0x16c9f4)=>_0xf05cfa[_0xcf6e1f(0x19e)]<_0x16c9f4[_0xcf6e1f(0x19e)]?0x1:_0x16c9f4[_0xcf6e1f(0x19e)]<_0xf05cfa[_0xcf6e1f(0x19e)]?-0x1:0x0);const _0x47beb9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47beb9[_0xcf6e1f(0x1e0)],'usd':_0x47beb9[_0xcf6e1f(0x1b4)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x571b53},proxyEmit(_0xcf6e1f(0x1bc),{'serverversion':serverversion,'balances':lastBalances});if(config[_0xcf6e1f(0x1ac)])headlessMode({'portfolio':currentCoins,'threshold':_0x571b53});else{if(lockOrders==ORDERS[_0xcf6e1f(0x193)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x571b53});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x188d7b=_0x28b247;if(!lastBalances)return;let _0x1b2a5c=[],_0x248088,_0x341469=JSON[_0x188d7b(0xed)](lastBalances[_0x188d7b(0x16e)]);_0x341469[_0x188d7b(0x14c)]((_0x491989,_0x1a5061)=>_0x491989[_0x188d7b(0x1c6)]>_0x1a5061[_0x188d7b(0x1c6)]?0x1:_0x1a5061['coin']>_0x491989[_0x188d7b(0x1c6)]?-0x1:0x0),_0x341469[_0x188d7b(0x147)](_0x5a1774=>{const _0x5fa2c5=_0x188d7b;let _0x47eac1={'coin':_0x5a1774['coin'],'number':_0x5a1774[_0x5fa2c5(0xab)],'price':_0x5a1774[_0x5fa2c5(0xeb)]};_0x1b2a5c[_0x5fa2c5(0x1f6)](_0x47eac1);});const _0xee5411=await getFiat();_0x248088={'date':lastBalances[_0x188d7b(0x1d8)][_0x188d7b(0xd7)]('\x20')[0x0],'eur':_0xee5411[_0x188d7b(0x1e0)],'usd':_0xee5411[_0x188d7b(0x1b4)],'coins':_0x1b2a5c};let _0x1d6b1d=dbPerformance[_0x188d7b(0xdc)](_0x188d7b(0x1b3))['find']({'date':_0x248088[_0x188d7b(0x115)]})[_0x188d7b(0x1ab)]();_0x1d6b1d?_0x248088[_0x188d7b(0x115)]!=config['startdate']&&dbPerformance[_0x188d7b(0xdc)]('data')[_0x188d7b(0x159)]({'date':_0x248088['date']})['assign'](_0x248088)[_0x188d7b(0x1e6)]():dbPerformance['get'](_0x188d7b(0x1b3))[_0x188d7b(0x1f6)](_0x248088)[_0x188d7b(0x1e6)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5bf245=_0x28b247;let _0x33d7e7=[];if(dbPerformance[_0x5bf245(0xfe)](_0x5bf245(0x1b3))['value']()){let _0x2e7b17=dbPerformance[_0x5bf245(0xdc)]('data')[_0x5bf245(0x108)]()[_0x5bf245(0xb0)](_0x5bf245(0x115))[_0x5bf245(0x1ab)](),_0xc72ed7=[...config[_0x5bf245(0x135)]];_0xc72ed7[_0x5bf245(0x14c)]((_0xaa51bb,_0xe80ab8)=>_0xaa51bb[_0x5bf245(0x115)]>_0xe80ab8['date']?-0x1:_0xe80ab8[_0x5bf245(0x115)]>_0xaa51bb[_0x5bf245(0x115)]?0x1:0x0);let _0x56550d=0x1,_0x386393=[],_0x3eb439=0x0;_0x2e7b17[_0x5bf245(0x9d)]()[_0x5bf245(0x1bb)]()[_0x5bf245(0x147)]((_0x2dfa6a,_0x121a29)=>{const _0x5503b1=_0x5bf245;if(_0xc72ed7[_0x3eb439]){if(_0x2e7b17[_0x2e7b17[_0x5503b1(0x19b)]-_0x121a29]&&_0xc72ed7[_0x3eb439]['date']==_0x2e7b17[_0x2e7b17[_0x5503b1(0x19b)]-_0x121a29][_0x5503b1(0x115)]){if(_0x121a29<_0x2e7b17[_0x5503b1(0x19b)]){let _0x312463=0x0,_0x123ad0=0x0;_0x2e7b17[_0x2e7b17[_0x5503b1(0x19b)]-_0x121a29][_0x5503b1(0x1ed)][_0x5503b1(0x147)](_0x20be07=>{const _0x3214be=_0x5503b1;_0x123ad0+=_0x20be07[_0x3214be(0xab)]*_0x20be07['price'];}),_0xc72ed7[_0x3eb439][_0x5503b1(0x1df)][_0x5503b1(0x147)](_0x165430=>{const _0x4b2f9d=_0x5503b1;_0x312463+=_0x165430['number']*_0x165430[_0x4b2f9d(0x13b)];}),_0x56550d*=_0x312463/(_0x123ad0-_0x312463)+0x1;}_0x3eb439++;}}let _0x495705=0x0;_0x2dfa6a[_0x5503b1(0x1ed)][_0x5503b1(0x147)](_0x28df8b=>{const _0x382486=_0x5503b1;_0x495705+=_0x28df8b[_0x382486(0xab)]*_0x28df8b[_0x382486(0x13b)];}),_0x386393[_0x2e7b17[_0x5503b1(0x19b)]-_0x121a29-0x1]=_0x495705*(_0x56550d-0x1);});let _0x34ccb0=[];_0xc72ed7=[...config[_0x5bf245(0x135)]]||[];let _0x4adb64=0x0;_0x3eb439=0x0,_0x2e7b17[_0x5bf245(0x147)]((_0xad543d,_0x3cd56e)=>{const _0x4ce0fa=_0x5bf245;if(_0xc72ed7[_0x3eb439]){const _0x32698c=fns[_0x4ce0fa(0xed)](_0xc72ed7[_0x3eb439][_0x4ce0fa(0x115)],'yyyy/MM/dd',new Date()),_0x1c5493=fns[_0x4ce0fa(0xed)](_0xad543d[_0x4ce0fa(0x115)],_0x4ce0fa(0x1e8),new Date());if(fns[_0x4ce0fa(0xf5)](_0x32698c,_0x1c5493)){let _0x493d38=0x0;_0xc72ed7[_0x3eb439][_0x4ce0fa(0x1df)][_0x4ce0fa(0x147)](_0x271d91=>{const _0x490741=_0x4ce0fa;!_0x34ccb0[_0x271d91[_0x490741(0x1c6)]]?_0x34ccb0[_0x271d91[_0x490741(0x1c6)]]=_0x271d91[_0x490741(0xab)]:(_0x493d38=_0x34ccb0[_0x271d91['coin']],_0x34ccb0[_0x271d91['coin']]+=_0x271d91[_0x490741(0xab)]);const _0xba18af=_0xad543d[_0x490741(0x1ed)]['find'](_0x3c8347=>_0x3c8347[_0x490741(0x1c6)]==_0x271d91[_0x490741(0x1c6)]);(!_0xba18af||_0xba18af[_0x490741(0xab)]==0x0)&&(_0x4adb64+=(-_0x271d91[_0x490741(0xab)]-_0x493d38)*_0x271d91[_0x490741(0x13b)]);}),_0x3eb439++;}}_0xad543d['coins']['forEach']((_0x14360f,_0x2a9124)=>{const _0x1db5f6=_0x4ce0fa;_0x34ccb0[_0x14360f[_0x1db5f6(0x1c6)]]&&(_0x14360f={..._0x14360f,'initial':_0x34ccb0[_0x14360f['coin']]}),_0xad543d[_0x1db5f6(0x1ed)][_0x2a9124]=_0x14360f;}),_0x33d7e7[_0x4ce0fa(0x1f6)]({'date':_0xad543d[_0x4ce0fa(0x115)],'eur':_0xad543d[_0x4ce0fa(0x1e0)],'usd':_0xad543d['usd'],'offset':_0x386393[_0x3cd56e],'netoffset':_0x4adb64,'coins':_0xad543d[_0x4ce0fa(0x1ed)]});});}return _0x33d7e7;}function emitPerformance(_0x2af140){const _0x2aaa4e=_0x28b247;_0x2af140[_0x2aaa4e(0x19b)]!==0x0?(proxyEmit(_0x2aaa4e(0x132),_0x2af140),lastPerformanceEmitted=getDate()):proxyEmit(_0x2aaa4e(0x132),[]);}function getPerf(_0xcd2052,_0x330b27){const _0x45d7d7=_0x28b247;let _0x47ea44=0x0,_0x22cc42=0x0,_0x352eb5=0x0;_0xcd2052[_0x45d7d7(0x1ed)][_0x45d7d7(0x147)](_0x4d5249=>{const _0xf8a91b=_0x45d7d7;_0x47ea44+=_0x4d5249[_0xf8a91b(0xab)]*_0x4d5249['price'];});_0x330b27&&(_0x47ea44+=_0xcd2052['offset']);if(config[_0x45d7d7(0x197)]===_0x45d7d7(0x1cd)||config['basecoin']===_0x45d7d7(0xd4))_0x22cc42=_0x47ea44*_0xcd2052[_0x45d7d7(0x1e0)],_0x352eb5=_0x47ea44*_0xcd2052[_0x45d7d7(0x1b4)];else{if(config['basecoin']===_0x45d7d7(0x1b9)||config[_0x45d7d7(0x197)]==='USDT'||config[_0x45d7d7(0x197)]===_0x45d7d7(0x186))_0x22cc42=_0x47ea44*_0xcd2052['eur']/_0xcd2052['usd'],_0x352eb5=_0x47ea44;else config[_0x45d7d7(0x197)]===_0x45d7d7(0x1f0)&&(_0x22cc42=_0x47ea44,_0x352eb5=_0x47ea44*_0xcd2052[_0x45d7d7(0x1b4)]/_0xcd2052['eur']);}return[_0x47ea44,_0x22cc42,_0x352eb5];}function getKPIs(_0x3d0b43,_0x29db8d=_0x28b247(0x1f0)){const _0x12dec9=_0x28b247,_0x47987c=config[_0x12dec9(0x197)],_0x9d2c22=config[_0x12dec9(0x1bc)],_0x1eb4a3=currentCoins,_0x1d986b=getNormalizedPerformance(),_0x5da2bc=_0x3d0b43===_0x12dec9(0x197)?_0x47987c:_0x3d0b43===_0x12dec9(0xbc)||_0x3d0b43===_0x12dec9(0x172)?_0x29db8d:_0x12dec9(0x1b0)+_0x47987c,_0x428f4e=_0x3d0b43===_0x12dec9(0x174)?_0x12dec9(0x1bd):_0x3d0b43===_0x12dec9(0x172)?_0x12dec9(0xa2)+_0x5da2bc+')':_0x5da2bc+_0x12dec9(0xce),_0x106c15=_0x3d0b43===_0x12dec9(0x174)||_0x3d0b43===_0x12dec9(0x172)?_0x12dec9(0x1bd):_0x5da2bc+_0x12dec9(0x1c3);let _0x50cc99=0x0;_0x1eb4a3['forEach'](_0xe00d29=>{const _0x23d600=_0x12dec9;_0x50cc99+=_0xe00d29[_0x23d600(0xab)]*_0xe00d29[_0x23d600(0xeb)];});if(_0x3d0b43===_0x12dec9(0xbc)||_0x3d0b43==='net-fiat'){if(_0x47987c===_0x12dec9(0x1cd)||_0x47987c===_0x12dec9(0xd4))_0x50cc99=_0x50cc99*(_0x29db8d===_0x12dec9(0x1f0)?_0x9d2c22[_0x12dec9(0x1e0)]:_0x9d2c22[_0x12dec9(0x1b4)]);else{if(_0x47987c===_0x12dec9(0x1b9)||_0x47987c==='USDT'||_0x47987c===_0x12dec9(0x186))_0x50cc99=_0x50cc99*(_0x29db8d===_0x12dec9(0x1f0)?_0x9d2c22[_0x12dec9(0x1e0)]/_0x9d2c22[_0x12dec9(0x1b4)]:0x1);else _0x47987c==='EUR'&&(_0x50cc99=_0x50cc99*(_0x29db8d===_0x12dec9(0x1f0)?0x1:_0x9d2c22[_0x12dec9(0x1b4)]/_0x9d2c22[_0x12dec9(0x1e0)]));}}let _0x16362c;if(_0x50cc99!==0x0){if(_0x3d0b43==='basecoin')_0x16362c=(_0x50cc99/startingBalances[_0x12dec9(0x197)]-0x1)*0x64;else{if(_0x29db8d===_0x12dec9(0x1f0))_0x16362c=(_0x50cc99/startingBalances[_0x12dec9(0x1e0)]-0x1)*0x64;else _0x16362c=(_0x50cc99/startingBalances['usd']-0x1)*0x64;}let _0x4e5187=0x0;if(startingBalances[_0x12dec9(0x1ed)])_0x1eb4a3[_0x12dec9(0x147)](_0x179f9c=>{const _0x149155=_0x12dec9;let _0xbc4393=startingBalances[_0x149155(0x1ed)][_0x149155(0x159)](_0x389ff8=>_0x389ff8[_0x149155(0x1c6)]===_0x179f9c[_0x149155(0x1c6)]);if(_0xbc4393&&_0xbc4393[_0x149155(0x1c6)]&&_0x179f9c['number']!==0x0)_0x4e5187+=_0xbc4393[_0x149155(0xab)]*_0x179f9c[_0x149155(0xeb)];});let _0x13860b=0x0;if(_0x1d986b['length']!==0x0){let _0x49cbba=_0x1d986b[_0x1d986b[_0x12dec9(0x19b)]-0x1];_0x13860b=_0x49cbba['netoffset'];}_0x4e5187-=_0x13860b;_0x3d0b43===_0x12dec9(0x174)&&(_0x16362c=(_0x50cc99-_0x4e5187)/startingBalances[_0x12dec9(0x197)]*0x64,_0x50cc99=_0x50cc99-_0x4e5187);if(_0x3d0b43==='net-fiat'){let _0x598a15=_0x29db8d===_0x12dec9(0x1f0)?startingBalances[_0x12dec9(0x1e0)]:startingBalances[_0x12dec9(0x1b4)];if(_0x47987c===_0x12dec9(0x1cd)||_0x47987c===_0x12dec9(0xd4))_0x4e5187=_0x29db8d===_0x12dec9(0x1f0)?_0x4e5187*_0x9d2c22[_0x12dec9(0x1e0)]:_0x4e5187*_0x9d2c22[_0x12dec9(0x1b4)];else{if(_0x47987c==='BUSD'||_0x47987c===_0x12dec9(0x141)||_0x47987c==='USD')_0x4e5187=_0x29db8d===_0x12dec9(0x1f0)?_0x4e5187*_0x9d2c22[_0x12dec9(0x1e0)]/_0x9d2c22[_0x12dec9(0x1b4)]:_0x4e5187;else _0x47987c===_0x12dec9(0x1f0)&&(_0x4e5187=_0x29db8d===_0x12dec9(0x1f0)?_0x4e5187:_0x4e5187*_0x9d2c22[_0x12dec9(0x1b4)]/_0x9d2c22['eur']);}_0x16362c=(_0x50cc99-_0x4e5187)/_0x598a15*0x64,_0x50cc99=_0x50cc99-_0x4e5187;}if(_0x16362c){if(_0x16362c<0x64)_0x16362c=_0x16362c[_0x12dec9(0xdf)](0x2);else{if(_0x16362c<0x3e8)_0x16362c=_0x16362c[_0x12dec9(0xdf)](0x1);else _0x16362c=_0x16362c[_0x12dec9(0xdf)](0x0);}}else _0x16362c=Number('0')['toFixed'](0x2);if(_0x50cc99){if(Math['abs'](_0x50cc99)<0.000001)_0x50cc99=_0x50cc99[_0x12dec9(0xdf)](0x2);else{if(Math[_0x12dec9(0xd9)](_0x50cc99)<0.1)_0x50cc99=_0x50cc99['toFixed'](0x6);else{if(Math[_0x12dec9(0xd9)](_0x50cc99)<0x1)_0x50cc99=_0x50cc99[_0x12dec9(0xdf)](0x5);else{if(Math[_0x12dec9(0xd9)](_0x50cc99)<0xa)_0x50cc99=_0x50cc99['toFixed'](0x4);else{if(Math['abs'](_0x50cc99)<0x64)_0x50cc99=_0x50cc99['toFixed'](0x3);else{if(Math[_0x12dec9(0xd9)](_0x50cc99)<0x3e8)_0x50cc99=_0x50cc99[_0x12dec9(0xdf)](0x2);else _0x50cc99=_0x50cc99[_0x12dec9(0xdf)](0x2);}}}}}}else _0x50cc99=Number('0')['toFixed'](0x2);}else _0x16362c=Number('0')[_0x12dec9(0xdf)](0x2);return{'value':_0x50cc99,'change':_0x16362c,'leftTxt':_0x428f4e,'rightTxt':_0x106c15};}function _0xded1(_0x5f1623,_0x5c429d){const _0xfcb934=_0x8df1();return _0xded1=function(_0x13a40b,_0x39a8db){_0x13a40b=_0x13a40b-0x9c;let _0x8df14f=_0xfcb934[_0x13a40b];return _0x8df14f;},_0xded1(_0x5f1623,_0x5c429d);}async function getStartingBalances(_0xfd12ac,_0x1f088e=!![]){const _0x224271=_0x28b247;if(_0xfd12ac[_0x224271(0x19b)]!==0x0){const [_0x11b768,_0x49eed4,_0x540f05]=getPerf(_0xfd12ac[0x0],!![]);let _0x3f24d4=[];config[_0x224271(0x16e)]['forEach'](_0x1d7979=>{const _0x2db780=_0x224271;let _0x2096a3=0x0,_0x28ae81;config[_0x2db780(0x135)]['forEach'](_0x4f6ee8=>{const _0x42bac7=_0x2db780;let _0x2a4a51=_0x4f6ee8[_0x42bac7(0x1df)][_0x42bac7(0x159)](_0x1276ec=>_0x1276ec[_0x42bac7(0x1c6)]==_0x1d7979[_0x42bac7(0x1c6)]);if(_0x2a4a51){_0x2096a3+=_0x2a4a51[_0x42bac7(0xab)];if(!_0x28ae81)_0x28ae81=_0x2a4a51[_0x42bac7(0x13b)];}}),_0x3f24d4[_0x2db780(0x1f6)]({'coin':_0x1d7979['coin'],'number':_0x2096a3,'initialprice':_0x28ae81});});const _0x4399ae={'basecoin':_0x11b768,'eur':_0x49eed4,'usd':_0x540f05,'coins':_0x3f24d4};if(_0x1f088e)proxyEmit(_0x224271(0x117),_0x4399ae);startingBalances=_0x4399ae;}}function headlessMode(_0x14714b){const _0x36fdb6=_0x28b247;let _0x29347e=_0x14714b[_0x36fdb6(0x16e)],_0x29eadf=_0x14714b[_0x36fdb6(0x1c1)],_0x1af0c5=[];for(let _0x9386f7 of _0x29347e){if(_0x9386f7[_0x36fdb6(0x1c6)]!=config[_0x36fdb6(0x197)]){if(_0x9386f7['delta']>=_0x29eadf/0x64){if(_0x9386f7[_0x36fdb6(0x181)])_0x1af0c5['push'](_0x9386f7);}else{if(_0x9386f7[_0x36fdb6(0x19e)]<=-_0x29eadf/0x64){if(_0x9386f7['valid'])_0x1af0c5[_0x36fdb6(0x1f6)](_0x9386f7);}}}}_0x1af0c5[_0x36fdb6(0x19b)]>0x0&&placeOrder(_0x1af0c5);}function notifyBalance(_0x1a5068){const _0x1c78b6=_0x28b247;let _0x4101a9=_0x1a5068['portfolio'],_0x133409=_0x1a5068[_0x1c78b6(0x1c1)],_0x2600df=[];for(let _0x463cdc of _0x4101a9){if(_0x463cdc[_0x1c78b6(0x1c6)]!=config[_0x1c78b6(0x197)]){if(_0x463cdc[_0x1c78b6(0x19e)]>=_0x133409/0x64){if(_0x463cdc[_0x1c78b6(0x181)])_0x2600df[_0x1c78b6(0x1f6)](_0x463cdc);}else{if(_0x463cdc['delta']<=-_0x133409/0x64){if(_0x463cdc['valid'])_0x2600df[_0x1c78b6(0x1f6)](_0x463cdc);}}}}if(_0x2600df['length']>0x0){let _0x42b369=_0x2600df['map'](_0x360725=>_0x360725[_0x1c78b6(0x1c6)]);_0x42b369[_0x1c78b6(0x14c)]();let _0x506de9=_0x42b369[_0x1c78b6(0xe8)](',\x20');if(!lastCoinsToBalance)logHistory(_0x1c78b6(0xfd),_0x1c78b6(0xbf));lastCoinsToBalance=_0x506de9;}}function symbolToCoin(_0x48ae4f){const _0x37f82d=_0x28b247;let _0x3d3a92;if(_0x48ae4f[_0x37f82d(0xd3)]('/'+config[_0x37f82d(0x197)]))_0x3d3a92=_0x48ae4f[_0x37f82d(0x9c)]('/'+config[_0x37f82d(0x197)],'');if(_0x48ae4f[_0x37f82d(0xd3)](config['basecoin']+'/'))_0x3d3a92=_0x48ae4f[_0x37f82d(0x9c)](config[_0x37f82d(0x197)]+'/','');return _0x3d3a92;}async function unlockOrders(){const _0x177259=_0x28b247;if(allOrdersPlaced&&lockOrders==ORDERS[_0x177259(0x11a)]){logger[_0x177259(0x17e)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x177259(0xf9)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x177259(0x1d9),persistOpenOrders([]),lockOrders=ORDERS[_0x177259(0x193)],logger[_0x177259(0x17e)](_0x177259(0x13f));}}async function validateOrders(_0x36e7a4){const _0x46f917=_0x28b247;if(_0x36e7a4)validateOrdersState=_0x36e7a4;logger['debug'](_0x46f917(0x142)+validateOrdersState+_0x46f917(0x157)+(lockOrders==0x1?_0x46f917(0x120):lockOrders==0x2?_0x46f917(0x171):_0x46f917(0x1c0)));let _0x1bef9b=[],_0x53c337=config[_0x46f917(0xfc)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x46f917(0x134)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x46f917(0x11a)])return;logger['debug'](_0x46f917(0x1f5)+validateOrdersState),lastOrders[_0x46f917(0x147)](_0x3cefba=>{const _0x4ff429=_0x46f917;let _0x3e6d5a=![];_0x3cefba[_0x4ff429(0xca)]>0x0&&(_0x3e6d5a=!![]),_0x1bef9b['push'](_0x3e6d5a),_0x3e6d5a&&config[_0x4ff429(0xfc)]!=_0x4ff429(0x165)&&logHistory('order',_0x4ff429(0x1c8)+_0x3cefba['symbol']+'\x20'+_0x3cefba[_0x4ff429(0x18c)]+'\x20#'+formatResult(_0x3cefba[_0x4ff429(0xca)],0x8)+'\x20@'+formatResult(_0x3cefba[_0x4ff429(0x13b)],0x8));}),_0x1bef9b[_0x46f917(0x147)]((_0x517bad,_0x41d971)=>{if(_0x517bad)lastOrders['splice'](_0x41d971,0x1);}),persistOpenOrders(lastOrders);const _0x14e90c=coolingDown?_0x46f917(0xc1):'balancing\x20resumed';if(validateOrdersState==_0x46f917(0x1d9))validateOrdersState=_0x46f917(0x1d3),_0x1bef9b[_0x46f917(0xd3)](![])?config[_0x46f917(0xfc)]==_0x46f917(0x165)?logHistory(_0x46f917(0xfd),_0x46f917(0x16c)):logHistory('warning',_0x46f917(0x158)):await unlockOrders();else{if(validateOrdersState=='ongoing'){if(_0x1bef9b[_0x46f917(0xd3)](![])){}else allOrdersPlaced&&(config[_0x46f917(0xfc)]==_0x46f917(0x165)?logHistory(_0x46f917(0x112),'Order(s)\x20validated\x20-\x20'+_0x14e90c):logHistory(_0x46f917(0x112),'Order(s)\x20filled\x20-\x20'+_0x14e90c),await unlockOrders());}else{if(validateOrdersState==_0x46f917(0xbe))_0x1bef9b[_0x46f917(0xd3)](![])&&(config[_0x46f917(0xfc)]==_0x46f917(0x165)?logHistory('success',_0x46f917(0x1f4)+Math[_0x46f917(0x1e1)](_0x53c337*validateOrderInterval/0xea60)+_0x46f917(0x15f)+_0x14e90c):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x53c337*validateOrderInterval/0xea60)+_0x46f917(0x15f)+_0x14e90c))),await unlockOrders();else{if(validateOrdersState==_0x46f917(0x113)){if(config[_0x46f917(0xfc)]!=_0x46f917(0x165))logHistory(_0x46f917(0x112),_0x46f917(0xcf)+_0x14e90c);await unlockOrders();}}}}}async function cancelOrders(){const _0x5085e1=_0x28b247;lastOrders[_0x5085e1(0x147)](async _0x11ab42=>{const _0x38183c=_0x5085e1;try{const _0x1b4d8b=await exchange[_0x38183c(0x124)](_0x11ab42[_0x38183c(0x1e7)],_0x11ab42[_0x38183c(0xd8)]);}catch(_0x40ec65){if(_0x40ec65[_0x38183c(0x10e)]()[_0x38183c(0xd3)]('OrderNotFound')){}else await handleError(_0x40ec65,_0x38183c(0x1a4));}});}async function initCoinResults(){const _0x24bfc6=_0x28b247;let _0x8d7622=[];config[_0x24bfc6(0x16e)][_0x24bfc6(0x147)](_0x142740=>{const _0x42f578=_0x24bfc6;if(!_0x142740[_0x42f578(0x175)]&&_0x142740[_0x42f578(0x1c6)]!=config[_0x42f578(0x197)]){let _0xbc42a2=dbCoinResults[_0x42f578(0xdc)](_0x42f578(0x1ed))[_0x42f578(0x159)]({'coin':_0x142740[_0x42f578(0x1c6)]})[_0x42f578(0x1ab)]();if(!_0xbc42a2){const _0x381d04=currentCoins[_0x42f578(0x159)](_0x145834=>_0x145834[_0x42f578(0x1c6)]==_0x142740['coin']),_0x1f3b76=global[_0x42f578(0xee)][noslash(_0x142740['symbol'])];let _0x2bbaca=_0x381d04?_0x381d04[_0x42f578(0xab)]:null,_0x1fde18=_0x142740[_0x42f578(0x1bb)]?0x1/_0x1f3b76:_0x1f3b76,_0x54d098;config[_0x42f578(0x135)][_0x42f578(0x147)](_0x2742c3=>{const _0x4dcc2d=_0x42f578;!_0x54d098&&(_0x54d098=_0x2742c3[_0x4dcc2d(0x1df)][_0x4dcc2d(0x159)](_0x165030=>_0x165030[_0x4dcc2d(0x1c6)]==_0x142740[_0x4dcc2d(0x1c6)]),_0x54d098&&(_0x2bbaca=_0x54d098[_0x4dcc2d(0xab)],_0x1fde18=_0x54d098['price']));}),_0x8d7622[_0x42f578(0x1f6)]({'coin':_0x142740[_0x42f578(0x1c6)],'number':_0x2bbaca,'price':_0x1fde18});}}}),_0x8d7622[_0x24bfc6(0x147)](_0x450dec=>{const _0x173354=_0x24bfc6,_0x3d0c9e={'coin':_0x450dec[_0x173354(0x1c6)],'number':_0x450dec[_0x173354(0xab)],'breakeven':_0x450dec['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x173354(0xdc)](_0x173354(0x1ed))['push'](_0x3d0c9e)[_0x173354(0x1e6)]();});}async function updateCoinResults(_0x52c03c,_0xe3db29=![]){const _0x92915c=_0x28b247;let _0x1de7f7,_0x57459e,_0x36f465,_0x207f6f,_0x35e193,_0x9e6997,_0x2ec1d9=dbCoinResults[_0x92915c(0xdc)](_0x92915c(0x1ed))['find']({'coin':_0x52c03c['coin']})[_0x92915c(0x1ab)]();!_0x2ec1d9&&await initCoinResults();_0x52c03c[_0x92915c(0x1bb)]&&(_0x9e6997={'filled':_0x52c03c[_0x92915c(0xca)]*_0x52c03c[_0x92915c(0x13b)],'amount':_0x52c03c['filled']*_0x52c03c[_0x92915c(0x13b)],'side':_0x52c03c[_0x92915c(0x18c)]==_0x92915c(0x10a)?_0x92915c(0x1ef):_0x92915c(0x10a),'price':0x1/_0x52c03c[_0x92915c(0x13b)]},_0x52c03c={..._0x52c03c,..._0x9e6997});_0xe3db29?_0x57459e=_0x52c03c[_0x92915c(0x18c)]==_0x92915c(0x1ef)?_0x2ec1d9[_0x92915c(0xab)]+_0x52c03c[_0x92915c(0xca)]:_0x2ec1d9['number']-_0x52c03c['filled']:_0x57459e=await getCoinNumber(_0x52c03c[_0x92915c(0x1c6)]);if(_0x52c03c[_0x92915c(0x150)]&&_0x52c03c[_0x92915c(0x150)]['currency']==config[_0x92915c(0x197)])_0x1de7f7=_0x52c03c[_0x92915c(0x150)][_0x92915c(0x1dc)];else{if(_0x52c03c[_0x92915c(0x150)]&&_0x52c03c[_0x92915c(0x150)][_0x92915c(0xaf)]==_0x92915c(0x129)&&!_0xe3db29)_0x1de7f7=_0x52c03c['fee'][_0x92915c(0x1dc)]*global[_0x92915c(0xee)][_0x92915c(0x129)+config['basecoin']];else _0x1de7f7=defaultFee*_0x52c03c[_0x92915c(0xca)]*_0x52c03c[_0x92915c(0x13b)];}_0x52c03c[_0x92915c(0x18c)]==_0x92915c(0x1ef)?(_0x36f465=_0x57459e!=0x0?(_0x2ec1d9['breakeven']*_0x2ec1d9[_0x92915c(0xab)]+_0x52c03c[_0x92915c(0x13b)]*(_0x57459e-_0x2ec1d9[_0x92915c(0xab)])+_0x1de7f7)/_0x57459e:0x0,_0x207f6f=_0x2ec1d9[_0x92915c(0x1c2)]):(_0x36f465=_0x57459e!=0x0?(_0x2ec1d9['breakeven']*_0x2ec1d9[_0x92915c(0xab)]-_0x52c03c[_0x92915c(0x13b)]*(_0x2ec1d9[_0x92915c(0xab)]-_0x57459e)+_0x1de7f7)/_0x57459e:0x0,_0x207f6f=_0x2ec1d9[_0x92915c(0x1c2)]+(_0x52c03c['price']-_0x2ec1d9['breakeven'])*_0x52c03c[_0x92915c(0xca)]);_0x35e193=(_0x52c03c[_0x92915c(0x13b)]-_0x36f465-_0x1de7f7/_0x52c03c['filled'])*_0x57459e;let _0x1296b8={'coin':_0x52c03c[_0x92915c(0x1c6)],'number':_0x57459e,'breakeven':formatResult(_0x36f465,0x8),'realized':formatResult(_0x207f6f,0x8),'unrealized':formatResult(_0x35e193,0x8),'fees':formatResult(_0x2ec1d9[_0x92915c(0x143)]+_0x1de7f7,0x8),'sells':_0x52c03c[_0x92915c(0x18c)]==_0x92915c(0x10a)?_0x2ec1d9[_0x92915c(0x12f)]+0x1:_0x2ec1d9[_0x92915c(0x12f)],'buys':_0x52c03c[_0x92915c(0x18c)]==_0x92915c(0x1ef)?_0x2ec1d9[_0x92915c(0x182)]+0x1:_0x2ec1d9[_0x92915c(0x182)]};dbCoinResults['get'](_0x92915c(0x1ed))[_0x92915c(0x159)]({'coin':_0x52c03c[_0x92915c(0x1c6)]})[_0x92915c(0x1a0)](_0x1296b8)[_0x92915c(0x1e6)]();if(!_0xe3db29){if(_0x52c03c[_0x92915c(0x150)]&&_0x52c03c[_0x92915c(0x150)][_0x92915c(0xaf)]==_0x92915c(0x129)){const _0x563a19=currentCoins[_0x92915c(0x159)](_0x5e6a83=>_0x5e6a83[_0x92915c(0x1c6)]==_0x92915c(0x129));if(_0x563a19){let _0x3340ee=dbCoinResults[_0x92915c(0xdc)](_0x92915c(0x1ed))[_0x92915c(0x159)]({'coin':'BNB'})[_0x92915c(0x1ab)]();_0x1296b8={..._0x3340ee,'number':_0x563a19[_0x92915c(0xab)]},dbCoinResults['get'](_0x92915c(0x1ed))[_0x92915c(0x159)]({'coin':_0x92915c(0x129)})['assign'](_0x1296b8)[_0x92915c(0x1e6)]();}}}}async function placeOrder(_0x544a8d){const _0xa6fdfd=_0x28b247,_0x447669=config[_0xa6fdfd(0xfc)]=='market'?'market':'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xa6fdfd(0x11a)],allOrdersPlaced=![],validateOrdersState=_0xa6fdfd(0x1d9),lastOrders=[];for(const _0x489e0e of _0x544a8d){let _0x254586,_0x3bdbca,_0x26471c,_0x2ba00d,_0x35bd02,_0x1cf1c1=_0x489e0e[_0xa6fdfd(0xd8)];try{const _0x5eafd2=await exchange[_0xa6fdfd(0x14b)](_0x1cf1c1);_0x254586=_0x489e0e[_0xa6fdfd(0x1bb)]?0x1/_0x489e0e[_0xa6fdfd(0xeb)]:_0x489e0e[_0xa6fdfd(0xeb)],_0x3bdbca=_0x5eafd2[_0xa6fdfd(0xfb)],_0x26471c=_0x5eafd2[_0xa6fdfd(0x178)];_0x489e0e['reverse']?(_0x2ba00d=_0x489e0e['side']==_0xa6fdfd(0x1ef)?_0xa6fdfd(0x10a):_0xa6fdfd(0x1ef),_0x35bd02=Math[_0xa6fdfd(0xd9)](_0x489e0e[_0xa6fdfd(0xc2)])/_0x254586):(_0x2ba00d=_0x489e0e['side'],_0x35bd02=Math['abs'](_0x489e0e['trade']));_0x447669==_0xa6fdfd(0x195)&&(config[_0xa6fdfd(0xfc)]=='limit-high'&&(_0x254586=_0x2ba00d=='buy'?_0x3bdbca:_0x26471c),config[_0xa6fdfd(0xfc)]==_0xa6fdfd(0xa4)&&(_0x254586=_0x2ba00d==_0xa6fdfd(0x1ef)?_0x26471c:_0x3bdbca));_0x35bd02=formatResult(_0x35bd02,0x8),_0x254586=formatResult(_0x254586,0x8);const _0x46d97a=_0x2ba00d==_0xa6fdfd(0x10a)?config[_0xa6fdfd(0x18d)]?String[_0xa6fdfd(0xe7)]('0x'+config[_0xa6fdfd(0x18d)])+'\x20':'':config[_0xa6fdfd(0x1a5)]?String[_0xa6fdfd(0xe7)]('0x'+config[_0xa6fdfd(0x1a5)])+'\x20':'',_0xc28ec8=_0x447669=='market'?'Market':config[_0xa6fdfd(0xfc)]==_0xa6fdfd(0x10b)?_0xa6fdfd(0x16d):'Limit\x20(low-margin)',_0x702917=new Date()[_0xa6fdfd(0x16b)]()[_0xa6fdfd(0x10e)]()[_0xa6fdfd(0x9d)](-0x6)+'-'+Math[_0xa6fdfd(0x1ee)]()[_0xa6fdfd(0x10e)]()[_0xa6fdfd(0x9d)](-0x6);lastOrders['push']({'customId':_0x702917,'symbol':_0x1cf1c1,'coin':_0x489e0e[_0xa6fdfd(0x1c6)],'side':_0x2ba00d,'reverse':_0x489e0e[_0xa6fdfd(0x1bb)],'filled':0x0});if(_0x447669==_0xa6fdfd(0x165))logHistory(_0xa6fdfd(0x12e),''+_0x46d97a+_0xc28ec8+_0xa6fdfd(0x12d)+_0x1cf1c1+'\x20'+_0x2ba00d+'\x20#'+formatResult(_0x35bd02,0x8)+'\x20@'+formatResult(_0x254586,0x8));else logHistory(_0xa6fdfd(0x12e),''+_0x46d97a+_0xc28ec8+'\x20order:\x20'+_0x1cf1c1+'\x20'+_0x2ba00d+'\x20#'+formatResult(_0x35bd02,0x8)+'\x20@'+formatResult(_0x254586,0x8));const _0x4f5e34=await exchange[_0xa6fdfd(0x1a6)](_0x1cf1c1,_0x447669,_0x2ba00d,_0x35bd02,_0x254586,{'clientOrderId':_0x702917}),_0x320bad=lastOrders[_0xa6fdfd(0x19b)]-0x1;_0x320bad>=0x0&&lastOrders[_0x320bad][_0xa6fdfd(0xc6)]==_0x702917&&(lastOrders[_0x320bad]={...lastOrders[_0x320bad],'orderId':_0x4f5e34['id'],'amount':_0x4f5e34[_0xa6fdfd(0x1a9)],'price':_0x4f5e34[_0xa6fdfd(0x13b)],'fee':_0x4f5e34[_0xa6fdfd(0x150)]});if(config[_0xa6fdfd(0x118)]!=0x0){let _0x10def9=null;if(cooldownTracker['length']==config[_0xa6fdfd(0x118)]-0x1)_0x10def9=cooldownTracker[_0xa6fdfd(0x183)]();const _0x874e5e=getTimeStamp();cooldownTracker['push'](_0x874e5e);if(_0x10def9){const _0x29cd51=fns[_0xa6fdfd(0x146)](new Date(_0x874e5e),new Date(_0x10def9));if(_0x29cd51<cooldownInterval){logHistory(_0xa6fdfd(0x14a),_0xa6fdfd(0xe0)+config['cooldown']+_0xa6fdfd(0x17c)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xa6fdfd(0x1bf)),coolingDown=!![];break;}}}}catch(_0x45d39f){if(_0x45d39f[_0xa6fdfd(0x10e)]()[_0xa6fdfd(0xd3)](_0xa6fdfd(0xbd)))lastOrders=lastOrders[_0xa6fdfd(0xe4)](_0x582704=>_0x582704[_0xa6fdfd(0xd8)]!=_0x1cf1c1),logHistory(_0xa6fdfd(0x14a),_0xa6fdfd(0x176)+_0x1cf1c1);else _0x45d39f[_0xa6fdfd(0x10e)]()[_0xa6fdfd(0xd3)](_0xa6fdfd(0x13c))?(lastOrders=lastOrders[_0xa6fdfd(0xe4)](_0x22dfcf=>_0x22dfcf[_0xa6fdfd(0xd8)]!=_0x1cf1c1),logHistory(_0xa6fdfd(0x14a),_0xa6fdfd(0xf6)+_0x1cf1c1)):(lastOrders=lastOrders['filter'](_0xbbe9b4=>_0xbbe9b4['symbol']!=_0x1cf1c1),await handleError(_0x45d39f,_0xa6fdfd(0xa3),_0x1cf1c1));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x2a71c2=config[_0xa6fdfd(0xfc)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xa6fdfd(0x134)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4ea740=_0xa6fdfd;validateOrders(_0x4ea740(0xbe));},_0x2a71c2);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0xa6fdfd(0x16f)));}else{if(coolingDown)!config[_0xa6fdfd(0x1ac)]&&logHistory(_0xa6fdfd(0x14a),_0xa6fdfd(0x11e));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0xa6fdfd(0x1ac)]&&(config[_0xa6fdfd(0xfc)]==_0xa6fdfd(0x165)?logHistory(_0xa6fdfd(0x14a),_0xa6fdfd(0xc9)):logHistory('error',_0xa6fdfd(0xa6))));}}function persistOpenOrders(_0x1e0c0f){const _0x5219bb=_0x28b247,_0x4aee8b={...config,'openOrders':_0x1e0c0f};let _0x4f8e9e=dbConfig['get'](_0x5219bb(0x102))['find']({'botID':botID})['value']();_0x4f8e9e&&dbConfig[_0x5219bb(0xdc)](_0x5219bb(0x102))[_0x5219bb(0x159)]({'botID':botID})['assign'](_0x4aee8b)[_0x5219bb(0x1e6)]();}function restoreOrders(){const _0x3dc531=_0x28b247;let _0x5c7f1c;config[_0x3dc531(0x1f3)]&&allOpenOrders['forEach'](_0x51d90b=>{const _0xc47418=_0x3dc531,_0x43e876=config[_0xc47418(0x1f3)][_0xc47418(0x159)](_0x117395=>_0x117395[_0xc47418(0x1e7)]==_0x51d90b['id']);_0x43e876&&(lastOrders[_0xc47418(0x1f6)](_0x43e876),_0x5c7f1c=_0x51d90b[_0xc47418(0xb9)]);});if(lastOrders[_0x3dc531(0x19b)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x3dc531(0x1d3),allOrdersPlaced=!![];const _0x863a3a=new Date()[_0x3dc531(0x16b)](),_0x40a796=config[_0x3dc531(0xfc)]==_0x3dc531(0x165)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5c7f1c+_0x40a796>_0x863a3a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x35cff3=_0x3dc531;validateOrders(_0x35cff3(0xbe));},_0x5c7f1c+_0x40a796-_0x863a3a);}else validateOrders(_0x3dc531(0xbe));}}async function sendPortfolioTelegram(){const _0x1c435f=_0x28b247;if(!coinsLoaded){process[_0x1c435f(0xf7)]({'telegrammsg':_0x1c435f(0x1b1)},_0x25ab69=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x15456c=[_0x1c435f(0x1f0),_0x1c435f(0x186),_0x1c435f(0x1b9),_0x1c435f(0x141)],_0x352707=_0x15456c[_0x1c435f(0xd3)](config[_0x1c435f(0x197)])?0x2:0x8;let _0x501e8a='';if(config[_0x1c435f(0x14d)])_0x501e8a=_0x1c435f(0x16a)+config[_0x1c435f(0xbb)]+_0x1c435f(0x1c5);else _0x501e8a=_0x1c435f(0xc5)+botID+_0x1c435f(0x1c5);const _0x5a245f=getKPIs(_0x1c435f(0x197)),_0x12d519=getKPIs(_0x1c435f(0x174));_0x501e8a+='<pre>',_0x501e8a+=_0x5a245f['leftTxt']+_0x1c435f(0x160)+_0x5a245f['value']+'\x20\x0a',_0x501e8a+=_0x5a245f['rightTxt']+':\x20'+_0x5a245f[_0x1c435f(0xc4)]+_0x1c435f(0x119),_0x501e8a+=_0x12d519['leftTxt']+':\x20'+_0x12d519[_0x1c435f(0x1ab)]+'\x20'+config[_0x1c435f(0x197)]+'\x0a',_0x501e8a+=_0x12d519['rightTxt']+':\x20'+_0x12d519[_0x1c435f(0xc4)]+_0x1c435f(0x119),_0x501e8a+='\x0a',_0x501e8a+='-------------------------------\x0a',_0x501e8a+=_0x1c435f(0x1d6),_0x501e8a+=_0x1c435f(0x164),currentCoins[_0x1c435f(0x147)](_0x3adb83=>{const _0x15cbd9=_0x1c435f;_0x501e8a+=_0x3adb83[_0x15cbd9(0x1c6)][_0x15cbd9(0x12b)](0x7)+'|\x20'+formatPad(_0x3adb83['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x3adb83[_0x15cbd9(0xf8)],0x2,0x6)+'|\x20'+formatPad(_0x3adb83[_0x15cbd9(0x19e)]*0x64,0x2,0x6)+'\x0a';}),_0x501e8a+=_0x1c435f(0x131),process[_0x1c435f(0xf7)]({'telegrammsg':_0x501e8a},_0x5c6249=>{});}function formatPad(_0x3cc145,_0x557448,_0x43c6b3){const _0x4b90d7=_0x28b247,_0x11be8f=formatResultString(_0x3cc145,_0x557448);return _0x11be8f?_0x11be8f[_0x4b90d7(0x179)](_0x43c6b3):''['padStart'](_0x43c6b3);}function logHistory(_0x477419,_0x25cfdc,_0x37d94d=''){const _0x299048=_0x28b247;let _0x4b51cc={'time':getTimeStamp(),'type':_0x477419,'event':_0x25cfdc};dbLogs[_0x299048(0xdc)](_0x299048(0x156))[_0x299048(0x1f6)](_0x4b51cc)[_0x299048(0x1e6)]();if(_0x37d94d=='')_0x37d94d=_0x25cfdc;proxyEmit(_0x299048(0xa1),{'log':_0x4b51cc,'summary':_0x37d94d}),process[_0x299048(0xf7)]({'telegram':{..._0x4b51cc,'botname':config[_0x299048(0xbb)],'showname':config['showname']}},_0x9b0907=>{}),logger[_0x299048(0x173)](''+_0x4b51cc['event']);}function emitHistory(_0x1a6546={}){const _0x5e5d8c=_0x28b247;Object[_0x5e5d8c(0x15d)](_0x1a6546)[_0x5e5d8c(0x19b)]==0x0&&(_0x1a6546={'type':['order',_0x5e5d8c(0xa1)],'event':'','page':0x1});if(_0x1a6546[_0x5e5d8c(0x1f2)][_0x5e5d8c(0xd3)](_0x5e5d8c(0xa1)))_0x1a6546['type'][_0x5e5d8c(0x1d5)](_0x1a6546[_0x5e5d8c(0x1f2)]['indexOf']('event'),0x1,_0x5e5d8c(0x14a),_0x5e5d8c(0x112));if(dbLogs[_0x5e5d8c(0xfe)](_0x5e5d8c(0x156))[_0x5e5d8c(0x1ab)]()){let _0x3d5d03=dbLogs[_0x5e5d8c(0xdc)](_0x5e5d8c(0x156))[_0x5e5d8c(0xe4)](_0x49f5e5=>{const _0x15894d=_0x5e5d8c;if(_0x1a6546[_0x15894d(0x1f2)][_0x15894d(0x19b)]==0x0)return![];else return _0x1a6546['type']['includes'](_0x49f5e5[_0x15894d(0x1f2)]);})[_0x5e5d8c(0xe4)](_0xfc7896=>{const _0x33352e=_0x5e5d8c;if(_0x1a6546['event']=='')return!![];else return _0xfc7896['event']['toLowerCase']()[_0x33352e(0xd3)](_0x1a6546[_0x33352e(0xa1)][_0x33352e(0x13e)]());})[_0x5e5d8c(0xb0)](_0x5e5d8c(0x1d8)),_0x9fd26b=_0x3d5d03[_0x5e5d8c(0x1ab)]()[_0x5e5d8c(0x19b)];_0x3d5d03=_0x3d5d03[_0x5e5d8c(0x1bb)]()[_0x5e5d8c(0x9d)]((_0x1a6546[_0x5e5d8c(0xa8)]-0x1)*logPageSize,_0x1a6546[_0x5e5d8c(0xa8)]*logPageSize-0x1)[_0x5e5d8c(0x1bb)]()[_0x5e5d8c(0x1ab)](),proxyEmit(_0x5e5d8c(0x9e),{'logs':_0x3d5d03,'total':_0x9fd26b});}else proxyEmit(_0x5e5d8c(0x9e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5f6641){const _0x45dd5c=_0x28b247;if(dbLogs[_0x45dd5c(0xfe)](_0x45dd5c(0x156))[_0x45dd5c(0x1ab)]()){const _0x536cee=dbLogs['get'](_0x45dd5c(0x156))[_0x45dd5c(0xb0)](_0x45dd5c(0x1d8))[_0x45dd5c(0xe4)](_0x25c7cf=>{const _0x5cdd88=_0x45dd5c;return _0x25c7cf[_0x5cdd88(0x1f2)]=='order';})[_0x45dd5c(0x1ab)]();dbLogs[_0x45dd5c(0xdc)](_0x45dd5c(0x156))[_0x45dd5c(0xb4)]()[_0x45dd5c(0x1e6)](),dbLogs[_0x45dd5c(0xdc)](_0x45dd5c(0x156))['assign'](_0x536cee)[_0x45dd5c(0x1e6)](),emitHistory(_0x5f6641);}}async function pauseBot(_0xb34624=''){const _0x155585=_0x28b247,_0x3c6d0a=new Date()[_0x155585(0x16b)]();if(!lastErrorShown||_0x3c6d0a-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3c6d0a;!lastBotPause?(lastBotPause=_0x3c6d0a,consecutivePauses=0x1):(_0x3c6d0a-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x155585(0xf7)]({'stop':'restart'},_0x190a28=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xb34624)_0xb34624+=_0x155585(0x11c);logHistory(_0x155585(0x14a),_0xb34624+_0x155585(0x14e)+pauseBotInterval/0xea60+_0x155585(0x10f)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x113969=_0x28b247;process[_0x113969(0xf7)]({'stop':_0x113969(0xf3)},_0x3d44fd=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2e69ec,_0x4766f0){const _0x1b10a4=_0x28b247;if(_0x2e69ec['toString']()[_0x1b10a4(0xd3)](_0x1b10a4(0x140)))return logHistory(_0x1b10a4(0x14a),config['exchange']+_0x1b10a4(0x10d)),![];else{if(_0x2e69ec[_0x1b10a4(0x10e)]()[_0x1b10a4(0xd3)](_0x1b10a4(0x169)))return logHistory('error',config[_0x1b10a4(0x15c)]+_0x1b10a4(0xba)),![];else{if(_0x2e69ec[_0x1b10a4(0x10e)]()[_0x1b10a4(0xd3)](_0x1b10a4(0xdb)))return logHistory(_0x1b10a4(0x14a),config[_0x1b10a4(0x15c)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20'+config['exchange']),![];else await handleError(_0x2e69ec,_0x4766f0);}}}async function handleError(_0x7521a,_0x522f95,_0x1d5311=''){const _0x2ddc13=_0x28b247;if(_0x7521a['toString']()[_0x2ddc13(0xd3)](_0x2ddc13(0xae)))await pauseBot(config[_0x2ddc13(0x15c)]+_0x2ddc13(0x1d2));else{if(_0x7521a['toString']()[_0x2ddc13(0xd3)](_0x2ddc13(0x1d1)))await pauseBot(config[_0x2ddc13(0x15c)]+_0x2ddc13(0xaa));else{if(_0x7521a[_0x2ddc13(0x10e)]()[_0x2ddc13(0xd3)](_0x2ddc13(0x170)))await pauseBot(config[_0x2ddc13(0x15c)]+_0x2ddc13(0x126));else{if(_0x7521a['toString']()['includes'](_0x2ddc13(0x1a1)))logHistory('error',_0x522f95+_0x2ddc13(0x1ba)),logHistory(_0x2ddc13(0x14a),_0x2ddc13(0xd2)),await killBot();else{if(_0x7521a[_0x2ddc13(0x10e)]()[_0x2ddc13(0xd3)](_0x2ddc13(0xc0)))logHistory('error',_0x522f95+_0x2ddc13(0xb7)),logHistory(_0x2ddc13(0x14a),_0x2ddc13(0xd2)),await killBot();else{if(_0x7521a[_0x2ddc13(0x10e)]()[_0x2ddc13(0xd3)](_0x2ddc13(0x140)))logHistory(_0x2ddc13(0x14a),_0x522f95+'\x20|\x20'+config[_0x2ddc13(0x15c)]+_0x2ddc13(0x10d)),logHistory(_0x2ddc13(0x14a),_0x2ddc13(0xd2)),await killBot();else{if(_0x7521a[_0x2ddc13(0x10e)]()[_0x2ddc13(0xd3)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x522f95+_0x2ddc13(0x11c)+config[_0x2ddc13(0x15c)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x2ddc13(0x14a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x7521a[_0x2ddc13(0x10e)]()[_0x2ddc13(0xd3)]('AuthenticationError'))logHistory('error',_0x522f95+_0x2ddc13(0x11c)+config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20'+config[_0x2ddc13(0x15c)]),logHistory(_0x2ddc13(0x14a),_0x2ddc13(0xd2)),await killBot();else _0x7521a[_0x2ddc13(0x10e)]()['includes'](_0x2ddc13(0x9f))?logHistory(_0x2ddc13(0x14a),_0x522f95+_0x2ddc13(0xb1)+_0x1d5311):(logger[_0x2ddc13(0x173)](_0x522f95+'\x20|\x20Error\x20details:\x20',_0x7521a),await pauseBot(_0x2ddc13(0x137)));}}}}}}}}function formatResult(_0x48c535,_0xecf714){const _0x4fb018=_0x28b247;return parseFloat(_0x48c535[_0x4fb018(0xdf)](_0xecf714));}function formatResultTruncate(_0x2ed306,_0x43d78e){let _0x36b05b=formatResultString(_0x2ed306,0xa),_0x21e4db=_0x36b05b['indexOf']('.');return _0x21e4db!=-0x1&&(_0x36b05b=_0x36b05b['slice'](0x0,_0x21e4db+_0x43d78e+0x1)),Number(_0x36b05b);}function formatResultString(_0x4e098c,_0x2d96d0){const _0x4a97d6=_0x28b247;let _0x1763ec;if(!(''+_0x4e098c)[_0x4a97d6(0xd3)]('e'))_0x1763ec=+(Math['round'](_0x4e098c+'e+'+_0x2d96d0)+'e-'+_0x2d96d0);else{let _0x42c7f9=(''+_0x4e098c)[_0x4a97d6(0xd7)]('e'),_0x45aad3='';+_0x42c7f9[0x1]+_0x2d96d0>0x0&&(_0x45aad3='+'),_0x1763ec=+(Math[_0x4a97d6(0x1e1)](+_0x42c7f9[0x0]+'e'+_0x45aad3+(+_0x42c7f9[0x1]+_0x2d96d0))+'e-'+_0x2d96d0);}return Number(_0x1763ec)[_0x4a97d6(0xdf)](_0x2d96d0);}function getServerTime(){const _0xed535a=_0x28b247,_0x1e06ca=new Date();return _0x1e06ca[_0xed535a(0x166)]()+'/'+(_0x1e06ca[_0xed535a(0x106)]()+0x1)[_0xed535a(0x10e)]()[_0xed535a(0x179)](0x2,'0')+'/'+_0x1e06ca[_0xed535a(0x1ce)]()[_0xed535a(0x10e)]()[_0xed535a(0x179)](0x2,'0')+'\x20'+_0x1e06ca[_0xed535a(0x144)]()['toString']()[_0xed535a(0x179)](0x2,'0')+':'+_0x1e06ca['getMinutes']()['toString']()[_0xed535a(0x179)](0x2,'0')+':'+_0x1e06ca[_0xed535a(0x1a2)]()[_0xed535a(0x10e)]()[_0xed535a(0x179)](0x2,'0');}function getTimeStamp(){const _0x5ece5a=_0x28b247,_0x4efdf4=shiftedTime();return _0x4efdf4[_0x5ece5a(0x166)]()+'/'+(_0x4efdf4[_0x5ece5a(0x106)]()+0x1)['toString']()[_0x5ece5a(0x179)](0x2,'0')+'/'+_0x4efdf4[_0x5ece5a(0x1ce)]()[_0x5ece5a(0x10e)]()[_0x5ece5a(0x179)](0x2,'0')+'\x20'+_0x4efdf4[_0x5ece5a(0x144)]()[_0x5ece5a(0x10e)]()[_0x5ece5a(0x179)](0x2,'0')+':'+_0x4efdf4[_0x5ece5a(0x17a)]()[_0x5ece5a(0x10e)]()['padStart'](0x2,'0')+':'+_0x4efdf4[_0x5ece5a(0x1a2)]()[_0x5ece5a(0x10e)]()[_0x5ece5a(0x179)](0x2,'0');}function getDate(){const _0x2b8c4d=_0x28b247,_0x5537bc=shiftedTime();return _0x5537bc[_0x2b8c4d(0x166)]()+'/'+(_0x5537bc[_0x2b8c4d(0x106)]()+0x1)[_0x2b8c4d(0x10e)]()[_0x2b8c4d(0x179)](0x2,'0')+'/'+_0x5537bc['getDate']()['toString']()[_0x2b8c4d(0x179)](0x2,'0');}function getHour(){const _0x3bd9d0=_0x28b247,_0x5b4700=shiftedTime();return _0x5b4700['getHours']()['toString']()[_0x3bd9d0(0x179)](0x2,'0');}function sleep(_0x464fa7){return new Promise(_0x47c1f8=>setTimeout(_0x47c1f8,_0x464fa7));}function shiftedTime(){const _0x2a079c=_0x28b247,_0x17f773=new Date();let _0x4349eb=_0x17f773;if(config&&config[_0x2a079c(0x196)]!==0x0)_0x4349eb=fns[_0x2a079c(0x123)](_0x17f773,{'hours':config['timeshift']});return _0x4349eb;}function timer(_0x26d1f7){const _0x7aafe4=_0x28b247,_0x1d691b=new Date();!lasttime?console[_0x7aafe4(0x100)](_0x7aafe4(0x1b5),_0x26d1f7,_0x1d691b):console['log'](_0x7aafe4(0x1b5),_0x26d1f7,(_0x1d691b-lasttime)/0x3e8),lasttime=_0x1d691b;}