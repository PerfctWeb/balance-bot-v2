const _0x249eb2=_0x2416;(function(_0x3127a6,_0x3a5356){const _0x4db36a=_0x2416,_0x3c7c7a=_0x3127a6();while(!![]){try{const _0xa4203b=parseInt(_0x4db36a(0x27a))/0x1+parseInt(_0x4db36a(0x23f))/0x2+-parseInt(_0x4db36a(0x181))/0x3*(-parseInt(_0x4db36a(0x24e))/0x4)+parseInt(_0x4db36a(0x1c8))/0x5+parseInt(_0x4db36a(0x1d8))/0x6*(-parseInt(_0x4db36a(0x1a7))/0x7)+-parseInt(_0x4db36a(0x23d))/0x8*(parseInt(_0x4db36a(0x1b4))/0x9)+-parseInt(_0x4db36a(0x232))/0xa;if(_0xa4203b===_0x3a5356)break;else _0x3c7c7a['push'](_0x3c7c7a['shift']());}catch(_0x34e6c7){_0x3c7c7a['push'](_0x3c7c7a['shift']());}}}(_0x23b6,0x7d0a8));const _0x1d0648=function(){let _0x33856b=!![];return function(_0x727f39,_0x4ba672){const _0x13c580=_0x33856b?function(){if(_0x4ba672){const _0xef5b10=_0x4ba672['apply'](_0x727f39,arguments);return _0x4ba672=null,_0xef5b10;}}:function(){};return _0x33856b=![],_0x13c580;};}(),_0xecdb68=_0x1d0648(this,function(){const _0x37965b=_0x2416;return _0xecdb68[_0x37965b(0x250)]()['search'](_0x37965b(0x21c))['toString']()[_0x37965b(0x22b)](_0xecdb68)[_0x37965b(0x188)](_0x37965b(0x21c));});_0xecdb68();'use strict';const ccxt=require(_0x249eb2(0x286)),low=require(_0x249eb2(0x242)),FileSync=require(_0x249eb2(0x1c3)),fs=require('fs'),fns=require(_0x249eb2(0x223)),{WebsocketClient,DefaultLogger}=require(_0x249eb2(0x212)),Crypt=require(_0x249eb2(0x1d4))[_0x249eb2(0x184)];let exchange,wsClient;global[_0x249eb2(0x1ea)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};function _0x23b6(){const _0x1a85ea=['timeout','927iLnEiV','yyyy-MM-dd\x27T\x27HH:mm:ss','mkdirSync','price','USDT','logs','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','BUSD','emojibuy','\x20order:\x20','Market','startprice','has','asset','cancelLoading','lowdb/adapters/FileSync','buy','getPortfolio()','recreateHistory()','startnumber','3180910mOYXer','showname','outboundAccountPosition','number','remainingSymbols','getTime','get','function','find','OrderNotFound','market','format','hybrid-crypto-js','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','API-key\x20format\x20invalid','Binance\x20API\x20secret\x20is\x20invalid','2355042XizKNi','coin','configuration-stored','event-history','sells','bb-settings.json','distribution','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','Executed\x20','buys','subscribeSpotUserDataStream','apiSecret','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','currency','wss://stream.binance.com:9443','AuthenticationError','botname','ticker','filled','decrypt','yyyy/MM/dd','Performance\x20recreation\x20completed\x20successfully','basecoin','Order(s)\x20filled\x20-\x20balancing\x20resumed','fetchBalance','toFixed','version','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','test','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','************','limit-low','stringify','delta','sell','bot','date','\x20orders\x20in\x20less\x20than\x20','bid','sortBy',')\x20|\x20Error\x20details:\x20','coins','balances','symbols','breakeven','page','apiKey','Invalid\x20quantity','enabled','replace','initclient','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','eur','padStart','type','round','RequestTimeout','binance','BTC/BUSD','\x20minutes\x20-\x20balancing\x20resumed','datetime','eachDayOfInterval','cost','Order\x20amount\x20is\x20invalid:\x20','BNB','coinamount','Order:\x20','(((.+)+)+)+$','wsKey','running','limit','emojisell','ask','BTCBUSD','date-fns','\x20|\x20Error\x20details:\x20','starting-balances','remove','fees','send','bot-','HOT/BTC','constructor','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','success','excluded','kill','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','data','10242930Sctbcq','existsSync','fetchTickers','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','EUR','closeWs','milliseconds','filter','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','cancelOrder','defaults','7224HXtSvf','performance','1278310seInbU','parseISO','getFullYear','lowdb','timestamp','valid','event','storeConfiguration','cooldown','orderStatus','sha256','-results.json','HOT/EUR','BTCUSDT','getSeconds','84mlUSBt',',\x20must\x20be\x20a\x203\x20digit\x20number','toString','differenceInCalendarDays','entries','privateKey','fee','last','differenceInSeconds','LIMIT','\x20>\x20','reconnected','offset','orderId','getCoins()','executionReport','usd','push',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','length','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','threshold','trade','initws()','getMinutes','Pausing\x20bot\x20for\x205\x20minutes\x20(','DAI/','limit-high','getMonth','./version.json','cancelOrder()','\x20-\x20','min','order','binanceus','InsufficientFunds','availableBalance','parse','side','toLowerCase','forEach','createOrder','yyyy/MM/dd\x20HH:mm:ss','bb-secure.json','657iuvNbu','time','abs','amount','portfolio','recreate','split','timeshift','exchange','DDoSProtection','001','progress','ccxt','ordertype','sort','map','secure','getHours','emitHistory','USDC','placeOrder()','BTCEUR','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Order(s)\x20not\x20validated\x20after\x20','write','-config.json','reverse','args','BTC/USDT','106569YqSWvk','fetchOHLCV','Error:\x20Invalid\x20argument\x20','Crypt','max','indexOf','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','search','fetchOrders','WebSockets(','getDate','reduce','kline','subscribeSpotKline','exit','accumulatedQuantity','Limit\x20(high-margin)','isArray','loadMarkets','startdate','restart','value','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','BTC','FILLED','wss://stream.binance.us:9443','symbol','target','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','configuration','getFiat()','includes','RSA-OAEP','userData','error','./config/','MIN_NOTIONAL','getCloses()','7vhIRLa','keys','message','getStartingBalances','Binance\x20API\x20key\x20is\x20invalid','argv','assign','eventType','headless','limits','ExchangeNotAvailable','log'];_0x23b6=function(){return _0x1a85ea;};return _0x23b6();}const serverversion=require(_0x249eb2(0x26b))[_0x249eb2(0x1f3)],botID=process[_0x249eb2(0x1ac)][0x2]||_0x249eb2(0x284),pattern=/^[0-9]{3}$/;if(!pattern[_0x249eb2(0x1f5)](botID))return console[_0x249eb2(0x1b2)](_0x249eb2(0x183)+botID+_0x249eb2(0x24f)),process[_0x249eb2(0x18f)](0x1);const userID=process[_0x249eb2(0x1ac)][0x3]||'',configpath=userID?_0x249eb2(0x1a4)+userID+'/':'./config/';!fs[_0x249eb2(0x233)](configpath)&&fs[_0x249eb2(0x1b6)](configpath);const configfile=configpath+'bot-'+botID+_0x249eb2(0x17d),logfile=configpath+_0x249eb2(0x229)+botID+'-events.json',performancefile=configpath+_0x249eb2(0x229)+botID+'-performance.json',coinresultsfile=configpath+_0x249eb2(0x229)+botID+_0x249eb2(0x24a),settingsfile=configpath+_0x249eb2(0x1dd),securefile=configpath+_0x249eb2(0x279),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x249eb2(0x17c)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x249eb2(0x23c)]({'data':[]})[_0x249eb2(0x17c)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x249eb2(0x17c)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x249eb2(0x23c)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x249eb2(0x179),'symbol':'BTC/EUR'},'usd':{'coin':_0x249eb2(0x24c),'symbol':_0x249eb2(0x180)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x33f8b4)=>{},'debug':(..._0x23960f)=>{},'notice':(..._0x375374)=>{},'info':(..._0x2853fc)=>{},'warning':(..._0x515a67)=>{},'error':async function(..._0x2e9cac){const _0x2cede1=_0x249eb2,_0x440a8e=new Date()['getTime']();if(!lastErrorShown||_0x440a8e-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x2cede1(0x1cd)](),logHistory(_0x2cede1(0x1a3),'WebSockets('+consecutivePauses+_0x2cede1(0x260));let _0x28b486='';if(_0x2e9cac[0x0])_0x28b486+=_0x2e9cac[0x0];if(_0x2e9cac[0x1]&&_0x2e9cac[0x1][_0x2cede1(0x1a3)]&&_0x2e9cac[0x1][_0x2cede1(0x1a3)]['message'])_0x28b486+=_0x2cede1(0x26d)+_0x2e9cac[0x1]['error'][_0x2cede1(0x1a9)];logging(_0x2cede1(0x18a)+consecutivePauses+_0x2cede1(0x201),''+_0x28b486),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x249eb2(0x249),'rsaStandard':_0x249eb2(0x1a1)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);function _0x2416(_0x1b804b,_0xa98445){const _0x4ed770=_0x23b6();return _0x2416=function(_0xecdb68,_0x1d0648){_0xecdb68=_0xecdb68-0x177;let _0x23b637=_0x4ed770[_0xecdb68];return _0x23b637;},_0x2416(_0x1b804b,_0xa98445);}settings[_0x249eb2(0x281)]!=config[_0x249eb2(0x281)]&&updateTimeshift(settings[_0x249eb2(0x281)]);process[_0x249eb2(0x228)]({'started':_0x249eb2(0x21e)},_0x48e6b9=>{}),initializeProcessListeners();function proxyEmit(_0x108f78,_0xd6d92e=null){const _0x141899=_0x249eb2;process[_0x141899(0x228)]({'function':_0x108f78,'args':_0xd6d92e},_0x4a417e=>{});}function initializeProcessListeners(){const _0x6e76d1=_0x249eb2;process['on'](_0x6e76d1(0x1a9),_0x11c4b2=>{const _0x50ca6e=_0x6e76d1;switch(Object[_0x50ca6e(0x1a8)](_0x11c4b2)[0x0]){case _0x50ca6e(0x281):_0x11c4b2[_0x50ca6e(0x281)]!=undefined&&(settings[_0x50ca6e(0x281)]=_0x11c4b2[_0x50ca6e(0x281)],updateTimeshift(settings[_0x50ca6e(0x281)]));break;case _0x50ca6e(0x1cf):switch(_0x11c4b2[_0x50ca6e(0x1cf)]){case _0x50ca6e(0x20b):initclient();break;case _0x50ca6e(0x28c):emitHistory(_0x11c4b2[_0x50ca6e(0x17f)]);break;case'getPortfolio':getPortfolio(_0x11c4b2['args']);break;case _0x50ca6e(0x246):storeConfiguration(_0x11c4b2[_0x50ca6e(0x17f)]);break;case'storeHeadless':storeHeadless(_0x11c4b2[_0x50ca6e(0x17f)]);break;case _0x50ca6e(0x1aa):getStartingBalances();break;case'placeOrder':placeOrder(_0x11c4b2[_0x50ca6e(0x17f)]);break;case _0x50ca6e(0x1c2):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x114406=_0x249eb2;if(pidBalances)clearTimeout(pidBalances);if(config[_0x114406(0x207)]!=''){await initExchange(config['apiKey'],config[_0x114406(0x1e4)]);let _0x113ae4=await loadSymbols();_0x113ae4&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x532ee4,_0x4d1c3c){const _0x57ed8e=_0x249eb2,_0x1c9ac6=ccxt[config[_0x57ed8e(0x282)]];let _0x2c8ab7;switch(config[_0x57ed8e(0x282)]){case'binance':_0x2c8ab7=_0x57ed8e(0x1e7);break;case _0x57ed8e(0x270):_0x2c8ab7=_0x57ed8e(0x19a);break;default:_0x2c8ab7=_0x57ed8e(0x1e7);}exchange=new _0x1c9ac6({'apiKey':_0x532ee4,'secret':_0x4d1c3c,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x532ee4,'api_secret':_0x4d1c3c,'beautify':!![],'wsUrl':_0x2c8ab7},logger),config['exchange']==_0x57ed8e(0x270)&&(stablecoins={'eur':{'coin':_0x57ed8e(0x222),'symbol':_0x57ed8e(0x213)},'usd':{'coin':_0x57ed8e(0x24c),'symbol':_0x57ed8e(0x180)}});}async function loadSymbols(){const _0x4bab51=_0x249eb2;let _0x14d48e;try{markets=await exchange[_0x4bab51(0x193)]();const _0xc7b03=[_0x4bab51(0x268),_0x4bab51(0x22a),_0x4bab51(0x24b)];allSymbols=exchange[_0x4bab51(0x204)][_0x4bab51(0x239)](_0x505797=>{const _0x330f24=_0x4bab51;let _0x204df1=![];return _0xc7b03[_0x330f24(0x276)](_0x2164a8=>{const _0x5712d2=_0x330f24;if(_0x505797[_0x5712d2(0x1a0)](_0x2164a8))_0x204df1=!![];}),!_0x204df1;}),_0x14d48e=!![];}catch(_0x2ed534){await handleError(_0x2ed534,'loadSymbols()'),_0x14d48e=![];}return _0x14d48e;}async function initbot(){const _0x38cacc=_0x249eb2;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x58294b=dbCoinResults['get'](_0x38cacc(0x202))[_0x38cacc(0x196)]();if(_0x58294b[_0x38cacc(0x261)]==0x0)await resetCoinResults();}async function initclient(){const _0x52f5d1=_0x249eb2;proxyEmit(_0x52f5d1(0x19e),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x52f5d1(0x203),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x32c326=_0x249eb2;wsinitialized=![];ws1&&(ws1[_0x32c326(0x276)](_0x5b1770=>{const _0x405801=_0x32c326;try{wsClient[_0x405801(0x237)](_0x5b1770);}catch(_0x36ffbf){}}),ws1=[]);if(ws2){try{wsClient[_0x32c326(0x237)](ws2);}catch(_0x4821f3){}ws2=null;}}async function initws(){const _0x37b81d=_0x249eb2;cleanws();let _0x4ca90e=[];currentCoins[_0x37b81d(0x276)](_0x45cd71=>{const _0x4bf493=_0x37b81d;if(_0x45cd71[_0x4bf493(0x1d9)]!=config['basecoin'])_0x4ca90e[_0x4bf493(0x25f)](noslash(_0x45cd71[_0x4bf493(0x19b)]));});if(!_0x4ca90e[_0x37b81d(0x1a0)](stablecoins[_0x37b81d(0x20d)][_0x37b81d(0x1d9)]))_0x4ca90e[_0x37b81d(0x25f)](stablecoins[_0x37b81d(0x20d)][_0x37b81d(0x1d9)]);if(!_0x4ca90e[_0x37b81d(0x1a0)](stablecoins[_0x37b81d(0x25e)][_0x37b81d(0x1d9)]))_0x4ca90e[_0x37b81d(0x25f)](stablecoins['usd'][_0x37b81d(0x1d9)]);if(!_0x4ca90e[_0x37b81d(0x1a0)](_0x37b81d(0x219)+config['basecoin']))_0x4ca90e[_0x37b81d(0x25f)]('BNB'+config[_0x37b81d(0x1ef)]);try{_0x4ca90e[_0x37b81d(0x276)]((_0x307732,_0x26e20a)=>{const _0x5ba3b7=_0x37b81d;ws1[_0x26e20a]=wsClient[_0x5ba3b7(0x18e)](_0x307732,'1m');}),ws2=wsClient[_0x37b81d(0x1e3)](),wsClient['on']('formattedMessage',_0x37dbb1=>{const _0x3ff6af=_0x37b81d;if(!Array['isArray'](_0x37dbb1)&&!_0x37dbb1[_0x3ff6af(0x21d)][_0x3ff6af(0x1a0)]('userData')){if(_0x37dbb1['eventType']===_0x3ff6af(0x18d)){global[_0x3ff6af(0x1ea)][_0x37dbb1[_0x3ff6af(0x18d)][_0x3ff6af(0x19b)]]=_0x37dbb1[_0x3ff6af(0x18d)]['close'];return;}}else{if(!Array[_0x3ff6af(0x192)](_0x37dbb1)&&_0x37dbb1[_0x3ff6af(0x21d)]['includes'](_0x3ff6af(0x1a2))){if(_0x37dbb1['wsMarket'][_0x3ff6af(0x1a0)]('spot')){updateNumberCoins(_0x37dbb1);return;}}}}),wsClient['on'](_0x37b81d(0x259),async _0x170c47=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x5357fd){await handleError(_0x5357fd,_0x37b81d(0x265));}let _0x9a50a5,_0x47ec31=0x0;loading[_0x37b81d(0x1cc)]=[];let _0x13ea06=0x0;currentCoins[_0x37b81d(0x276)](_0x408604=>{const _0x3a8cb4=_0x37b81d;if(_0x408604[_0x3a8cb4(0x1d9)]!=config['basecoin'])loading['remainingSymbols'][_0x3a8cb4(0x25f)](_0x408604[_0x3a8cb4(0x19b)]);}),loadingCanceled=![];while(_0x9a50a5!=currentCoins[_0x37b81d(0x261)]-0x1){_0x9a50a5=0x0,currentCoins[_0x37b81d(0x276)](_0x4ebfd7=>{const _0x82cbe5=_0x37b81d;_0x4ebfd7[_0x82cbe5(0x1d9)]!=config[_0x82cbe5(0x1ef)]&&global[_0x82cbe5(0x1ea)][noslash(_0x4ebfd7['symbol'])]&&(loading[_0x82cbe5(0x1cc)]=loading[_0x82cbe5(0x1cc)]['filter'](_0x463933=>_0x463933!=_0x4ebfd7[_0x82cbe5(0x19b)]),_0x9a50a5++);}),loading[_0x37b81d(0x285)]=Math[_0x37b81d(0x210)](_0x9a50a5/(currentCoins[_0x37b81d(0x261)]-0x1)*0x64);_0x13ea06>0x1e*0x5&&(loading[_0x37b81d(0x1b3)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x9a50a5!=_0x47ec31&&(_0x47ec31=_0x9a50a5,emitLoadingProgress()),_0x13ea06++,await sleep(0xc8);}if(_0x9a50a5==currentCoins[_0x37b81d(0x261)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x454cef=_0x249eb2;let _0x1bee97=0x0,_0x5f2e99=0x0;try{_0x1bee97=global[_0x454cef(0x1ea)][stablecoins[_0x454cef(0x20d)]['coin']],_0x5f2e99=global[_0x454cef(0x1ea)][stablecoins['usd']['coin']];}catch(_0x4dccc9){await handleError(_0x4dccc9,_0x454cef(0x19f));}return{'eur':Number(_0x1bee97),'usd':Number(_0x5f2e99)};}async function setStartDatePerformance(_0x58f170){const _0x53a902=_0x249eb2,_0x559964=fns[_0x53a902(0x1d3)](new Date(_0x58f170[_0x53a902(0x194)]),_0x53a902(0x1ed));let _0x4f01a2=[];_0x4f01a2[stablecoins['eur'][_0x53a902(0x1d9)]]=await getCloses(stablecoins[_0x53a902(0x20d)][_0x53a902(0x19b)],new Date(_0x58f170[_0x53a902(0x194)]),0x1),_0x4f01a2[stablecoins[_0x53a902(0x25e)]['coin']]=await getCloses(stablecoins[_0x53a902(0x25e)][_0x53a902(0x19b)],new Date(_0x58f170[_0x53a902(0x194)]),0x1);let _0x522a80,_0x3aada6=[];_0x58f170['portfolio']['forEach'](_0x45afd9=>{const _0x47799b=_0x53a902;!_0x45afd9[_0x47799b(0x22e)]&&_0x3aada6[_0x47799b(0x25f)]({'coin':_0x45afd9['coin'],'number':_0x45afd9['startnumber'],'price':_0x45afd9['startprice']});}),_0x522a80={'date':_0x559964,'eur':_0x4f01a2[stablecoins[_0x53a902(0x20d)][_0x53a902(0x1d9)]][0x0],'usd':_0x4f01a2[stablecoins['usd']['coin']][0x0],'coins':_0x3aada6};let _0x366b01=dbPerformance[_0x53a902(0x1ce)]('data')['find']({'date':_0x559964})['value']();_0x366b01?dbPerformance['get'](_0x53a902(0x231))[_0x53a902(0x1d0)]({'date':_0x559964})[_0x53a902(0x1ad)](_0x522a80)[_0x53a902(0x17c)]():dbPerformance[_0x53a902(0x1ce)]('data')[_0x53a902(0x25f)](_0x522a80)[_0x53a902(0x17c)](),_0x366b01=dbPerformance[_0x53a902(0x1ce)](_0x53a902(0x231))[_0x53a902(0x200)]('date')[_0x53a902(0x196)](),_0x366b01['forEach'](_0x47d485=>{const _0x24be5b=_0x53a902;_0x47d485[_0x24be5b(0x1fd)]<_0x559964&&dbPerformance[_0x24be5b(0x1ce)](_0x24be5b(0x231))[_0x24be5b(0x226)]({'date':_0x47d485[_0x24be5b(0x1fd)]})[_0x24be5b(0x17c)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x373264){const _0x55a08f=_0x249eb2;let _0xffbdbb,_0x2e5f59=[];logHistory(_0x55a08f(0x22d),_0x55a08f(0x23a)),_0x373264['portfolio'][_0x55a08f(0x276)](_0x45793e=>{const _0x2738ba=_0x55a08f;if(_0x45793e[_0x2738ba(0x1d9)]!=config[_0x2738ba(0x1ef)]&&!_0x45793e['excluded'])_0x2e5f59[_0x2738ba(0x25f)]({'coin':_0x45793e[_0x2738ba(0x1d9)],'symbol':_0x45793e[_0x2738ba(0x19b)]});});let _0xc8e6c3=[];try{const _0x386287=fns['format'](fns['parseISO'](_0x373264[_0x55a08f(0x194)][_0x55a08f(0x20a)](/\//g,'-')),_0x55a08f(0x1b5));for(const _0x2cc396 of _0x2e5f59){if(_0x2cc396[_0x55a08f(0x1d9)]!=config[_0x55a08f(0x1ef)])_0xffbdbb=await exchange[_0x55a08f(0x189)](_0x2cc396[_0x55a08f(0x19b)],Date[_0x55a08f(0x273)](_0x386287));_0xffbdbb[_0x55a08f(0x276)](_0x5737a2=>{const _0x7d5185=_0x55a08f,_0x1fc874=_0x2cc396[_0x7d5185(0x19b)][_0x7d5185(0x1a0)](config[_0x7d5185(0x1ef)]+'/'),_0x4e6d3f=fns[_0x7d5185(0x1d3)](fns[_0x7d5185(0x240)](_0x5737a2['datetime']),_0x7d5185(0x278)),_0x39d1cf=fns[_0x7d5185(0x1d3)](fns['parseISO'](_0x5737a2[_0x7d5185(0x215)]),_0x7d5185(0x1ed));let _0x56e1b5;if(_0x5737a2[_0x7d5185(0x274)]=='buy'&&_0x1fc874==![])_0x56e1b5=_0x5737a2[_0x7d5185(0x27d)];if(_0x5737a2[_0x7d5185(0x274)]==_0x7d5185(0x1c4)&&_0x1fc874==!![])_0x56e1b5=-_0x5737a2[_0x7d5185(0x27d)]*_0x5737a2['price'];if(_0x5737a2[_0x7d5185(0x274)]==_0x7d5185(0x1fb)&&_0x1fc874==![])_0x56e1b5=-_0x5737a2[_0x7d5185(0x27d)];if(_0x5737a2['side']==_0x7d5185(0x1fb)&&_0x1fc874==!![])_0x56e1b5=_0x5737a2['amount']*_0x5737a2['price'];_0xc8e6c3[_0x7d5185(0x25f)]({'timestamp':_0x4e6d3f,'date':_0x39d1cf,'coin':_0x2cc396['coin'],'symbol':_0x2cc396[_0x7d5185(0x19b)],'type':_0x5737a2[_0x7d5185(0x20f)],'side':_0x5737a2[_0x7d5185(0x274)],'reverse':_0x1fc874,'amount':formatResult(_0x5737a2[_0x7d5185(0x1eb)],0x8),'filled':formatResult(_0x5737a2[_0x7d5185(0x1eb)],0x8),'coinamount':formatResult(_0x56e1b5,0x8),'price':formatResult(_0x5737a2['price'],0x8)});let _0x3afb2b;if(_0x5737a2['side']==_0x7d5185(0x1c4)&&_0x1fc874==![])_0x3afb2b=-_0x5737a2[_0x7d5185(0x27d)]*_0x5737a2['price'];if(_0x5737a2[_0x7d5185(0x274)]==_0x7d5185(0x1c4)&&_0x1fc874==!![])_0x3afb2b=_0x5737a2[_0x7d5185(0x27d)];if(_0x5737a2[_0x7d5185(0x274)]==_0x7d5185(0x1fb)&&_0x1fc874==![])_0x3afb2b=_0x5737a2[_0x7d5185(0x27d)]*_0x5737a2['price'];if(_0x5737a2[_0x7d5185(0x274)]==_0x7d5185(0x1fb)&&_0x1fc874==!![])_0x3afb2b=-_0x5737a2['amount'];_0xc8e6c3[_0x7d5185(0x25f)]({'date':_0x39d1cf,'coin':config[_0x7d5185(0x1ef)],'coinamount':formatResult(_0x3afb2b,0x8)});});}_0xc8e6c3[_0x55a08f(0x288)]((_0x4cad35,_0x394d2a)=>_0x4cad35['timestamp']>_0x394d2a[_0x55a08f(0x243)]?0x1:_0x394d2a['timestamp']>_0x4cad35[_0x55a08f(0x243)]?-0x1:0x0),dbLogs[_0x55a08f(0x1ce)](_0x55a08f(0x1b9))[_0x55a08f(0x226)]()[_0x55a08f(0x17c)](),_0xc8e6c3['forEach'](_0x1d3b9e=>{const _0x44d2e9=_0x55a08f;let _0x375a6d;_0x1d3b9e[_0x44d2e9(0x1d9)]!=config['basecoin']&&(_0x375a6d={'time':_0x1d3b9e[_0x44d2e9(0x243)],'type':_0x44d2e9(0x26f),'event':_0x44d2e9(0x21b)+_0x1d3b9e[_0x44d2e9(0x19b)]+'\x20'+_0x1d3b9e['side']+'\x20#'+_0x1d3b9e[_0x44d2e9(0x27d)]+'\x20@'+_0x1d3b9e[_0x44d2e9(0x1b7)]},dbLogs[_0x44d2e9(0x1ce)](_0x44d2e9(0x1b9))[_0x44d2e9(0x25f)](_0x375a6d)['write']());});const _0x5e676e=fns[_0x55a08f(0x216)]({'start':new Date(_0x373264[_0x55a08f(0x194)]),'end':new Date()})[_0x55a08f(0x289)](_0x3889b8=>fns[_0x55a08f(0x1d3)](_0x3889b8,_0x55a08f(0x1ed)));let _0x17c6c3=[];_0x373264[_0x55a08f(0x27e)][_0x55a08f(0x276)](_0x294c5b=>{const _0xdfbad7=_0x55a08f;if(!_0x294c5b[_0xdfbad7(0x22e)]){_0x17c6c3[_0x294c5b[_0xdfbad7(0x1d9)]]=[];let _0x3b7718=_0x294c5b[_0xdfbad7(0x1c7)];_0x5e676e[_0xdfbad7(0x276)]((_0x2d39f9,_0x34b70f)=>{const _0x22cf95=_0xdfbad7;let _0x4c5066=_0xc8e6c3['filter'](_0x24a9e0=>_0x24a9e0['coin']==_0x294c5b[_0x22cf95(0x1d9)]&&_0x24a9e0[_0x22cf95(0x1fd)]==_0x2d39f9);if(_0x4c5066[_0x22cf95(0x261)]!=0x0){let _0x560a15=_0x4c5066[_0x22cf95(0x18c)]((_0x12bf47,_0x297cbd)=>{const _0x3ac89d=_0x22cf95;return _0x12bf47+=_0x297cbd[_0x3ac89d(0x21a)],_0x12bf47;},0x0);_0x3b7718+=_0x560a15;}_0x17c6c3[_0x294c5b[_0x22cf95(0x1d9)]][_0x2d39f9]=_0x3b7718;});}});const _0x59ac07=[..._0x2e5f59];_0x59ac07[_0x55a08f(0x25f)]({'coin':stablecoins[_0x55a08f(0x20d)]['coin'],'symbol':stablecoins[_0x55a08f(0x20d)][_0x55a08f(0x19b)]}),_0x59ac07[_0x55a08f(0x25f)]({'coin':stablecoins[_0x55a08f(0x25e)][_0x55a08f(0x1d9)],'symbol':stablecoins['usd']['symbol']});let _0x48c0f4=[];for(const _0x49d57f of _0x59ac07){_0x48c0f4[_0x49d57f[_0x55a08f(0x1d9)]]=await getCloses(_0x49d57f[_0x55a08f(0x19b)],new Date(_0x373264['startdate']));}dbPerformance[_0x55a08f(0x1ce)](_0x55a08f(0x231))[_0x55a08f(0x226)]()['write'](),_0x5e676e[_0x55a08f(0x276)]((_0x53c252,_0x2e62f2)=>{const _0x1b3d06=_0x55a08f;let _0x9a9931,_0x525d47=[];_0x2e62f2==0x0?(_0x373264[_0x1b3d06(0x27e)][_0x1b3d06(0x276)](_0x5e6dbf=>{const _0x26980b=_0x1b3d06;!_0x5e6dbf[_0x26980b(0x22e)]&&_0x525d47['push']({'coin':_0x5e6dbf['coin'],'number':_0x5e6dbf['startnumber'],'price':_0x5e6dbf[_0x26980b(0x1bf)]});}),_0x9a9931={'date':_0x53c252,'eur':_0x48c0f4[stablecoins[_0x1b3d06(0x20d)][_0x1b3d06(0x1d9)]][_0x2e62f2],'usd':_0x48c0f4[stablecoins[_0x1b3d06(0x25e)][_0x1b3d06(0x1d9)]][_0x2e62f2],'coins':_0x525d47}):(_0x373264[_0x1b3d06(0x27e)][_0x1b3d06(0x276)](_0x3b3791=>{const _0x2f0426=_0x1b3d06;!_0x3b3791['excluded']&&_0x525d47['push']({'coin':_0x3b3791[_0x2f0426(0x1d9)],'number':_0x17c6c3[_0x3b3791[_0x2f0426(0x1d9)]][_0x53c252],'price':_0x3b3791[_0x2f0426(0x1d9)]==config[_0x2f0426(0x1ef)]?0x1:_0x48c0f4[_0x3b3791[_0x2f0426(0x1d9)]][_0x2e62f2]});}),_0x9a9931={'date':_0x53c252,'eur':_0x48c0f4[stablecoins[_0x1b3d06(0x20d)][_0x1b3d06(0x1d9)]][_0x2e62f2],'usd':_0x48c0f4[stablecoins[_0x1b3d06(0x25e)][_0x1b3d06(0x1d9)]][_0x2e62f2],'coins':_0x525d47}),dbPerformance[_0x1b3d06(0x1ce)](_0x1b3d06(0x231))[_0x1b3d06(0x25f)](_0x9a9931)[_0x1b3d06(0x17c)]();}),emitPerformance(),await resetCoinResults();for(let _0x12693c of _0xc8e6c3){_0x12693c[_0x55a08f(0x1d9)]!=config[_0x55a08f(0x1ef)]&&await updateCoinResults(_0x12693c);}logHistory(_0x55a08f(0x22d),_0x55a08f(0x1ee));}catch(_0x3a4b36){await handleError(_0x3a4b36,_0x55a08f(0x1c6));}}async function getCloses(_0x30d9a3,_0x5bfb4d,_0x26c9a2=undefined){const _0x23cf03=_0x249eb2,_0x25a41c='1d';let _0x590ed1,_0x2a1cb1;const _0x506d3f=fns[_0x23cf03(0x251)](new Date(),_0x5bfb4d)+0x1;try{const _0x4c7b38=exchange[_0x23cf03(0x238)]()-_0x506d3f*0x18*0xe10*0x3e8;_0x590ed1=await exchange[_0x23cf03(0x182)](_0x30d9a3,_0x25a41c,_0x4c7b38,_0x26c9a2),_0x2a1cb1=await exchange[_0x23cf03(0x234)](_0x30d9a3);}catch(_0x411331){await handleError(_0x411331,_0x23cf03(0x1a6));}let _0xe4ea5c=ohlcvToCloses(_0x590ed1);return _0xe4ea5c[_0x23cf03(0x25f)](_0x2a1cb1[_0x30d9a3]['last']),_0xe4ea5c;}function ohlcvToCloses(_0x181741){const _0x99ef26=_0x249eb2;let _0x5d168a=[];return _0x181741[_0x99ef26(0x276)](function(_0x1946bc){const _0x28fad5=_0x99ef26;_0x5d168a[_0x28fad5(0x25f)](_0x1946bc[0x4]);}),_0x5d168a;}function getConfiguration(_0x6296bb){const _0x34910f=_0x249eb2;let _0x273d35=dbConfig[_0x34910f(0x1ce)](_0x34910f(0x1fc))[_0x34910f(0x1d0)]({'botID':_0x6296bb})[_0x34910f(0x196)]();if(_0x273d35){let _0x27572d=![];!_0x273d35[_0x34910f(0x282)]&&(_0x273d35={..._0x273d35,'exchange':_0x34910f(0x212)},_0x27572d=!![]),!_0x273d35[_0x34910f(0x1ef)]&&(_0x273d35={..._0x273d35,'basecoin':_0x34910f(0x198)},_0x27572d=!![]),!_0x273d35[_0x34910f(0x287)]&&(_0x273d35={..._0x273d35,'ordertype':_0x34910f(0x1d2)},_0x27572d=!![]),!_0x273d35[_0x34910f(0x1b3)]&&(_0x273d35={..._0x273d35,'timeout':0x14},_0x27572d=!![]),!_0x273d35[_0x34910f(0x1bc)]&&(_0x273d35={..._0x273d35,'emojibuy':''},_0x27572d=!![]),!_0x273d35['emojisell']&&(_0x273d35={..._0x273d35,'emojisell':''},_0x27572d=!![]),!_0x273d35[_0x34910f(0x1c9)]&&(_0x273d35={..._0x273d35,'showname':![]},_0x27572d=!![]),_0x27572d&&(_0x273d35={'botID':_0x273d35['botID'],'exchange':_0x273d35[_0x34910f(0x282)],'apiKey':_0x273d35['apiKey'],'apiSecret':_0x273d35['apiSecret'],'basecoin':_0x273d35[_0x34910f(0x1ef)],'botname':_0x273d35['botname'],'showname':_0x273d35[_0x34910f(0x1c9)],'threshold':_0x273d35[_0x34910f(0x263)],'ordertype':_0x273d35[_0x34910f(0x287)],'timeout':_0x273d35['timeout'],'startdate':_0x273d35[_0x34910f(0x194)],'recreate':_0x273d35[_0x34910f(0x27f)],'timeshift':_0x273d35['timeshift'],'headless':_0x273d35[_0x34910f(0x1af)],'cooldown':_0x273d35[_0x34910f(0x247)],'emojibuy':_0x273d35[_0x34910f(0x1bc)],'emojisell':_0x273d35[_0x34910f(0x220)],'portfolio':_0x273d35['portfolio']},dbConfig[_0x34910f(0x1ce)](_0x34910f(0x1fc))[_0x34910f(0x226)]()[_0x34910f(0x17c)](),dbConfig['get'](_0x34910f(0x1fc))[_0x34910f(0x25f)](_0x273d35)[_0x34910f(0x17c)]());}else _0x273d35={'botID':_0x6296bb,'exchange':_0x34910f(0x212),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x6296bb,'showname':![],'threshold':'3','ordertype':_0x34910f(0x1d2),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x34910f(0x281)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x273d35;}function emittedConfiguration(){const _0x6c318c=_0x249eb2;let _0x592fa0;return config[_0x6c318c(0x207)]==''?_0x592fa0=config:_0x592fa0={...config,'apiKey':'************','apiSecret':'************'},_0x592fa0;}function getSettings(){const _0x1370cb=_0x249eb2;return dbSettings[_0x1370cb(0x1ce)]('settings')['value']();}function getSecure(){const _0x21292c=_0x249eb2;return dbSecure[_0x21292c(0x1ce)](_0x21292c(0x28a))[_0x21292c(0x196)]()||{};}function updateTimeshift(_0x38642b){const _0x4804fb=_0x249eb2;let _0x15d201=dbConfig[_0x4804fb(0x1ce)]('bot')[_0x4804fb(0x1d0)]({'botID':botID})[_0x4804fb(0x196)]();_0x15d201&&dbConfig[_0x4804fb(0x1ce)](_0x4804fb(0x1fc))[_0x4804fb(0x1d0)]({'botID':botID})['assign']({'timeshift':_0x38642b})[_0x4804fb(0x17c)](),config[_0x4804fb(0x281)]=_0x38642b,proxyEmit(_0x4804fb(0x19e),emittedConfiguration());}async function storeConfiguration(_0x2dbcc3){const _0x319aa4=_0x249eb2;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2bb4ba=dbConfig['get'](_0x319aa4(0x1fc))['find']({'botID':botID})[_0x319aa4(0x196)]();_0x2dbcc3={..._0x2dbcc3,'apiKey':crypt[_0x319aa4(0x1ec)](secure[_0x319aa4(0x253)],_0x2dbcc3['apiKey'])[_0x319aa4(0x1a9)],'apiSecret':crypt[_0x319aa4(0x1ec)](secure[_0x319aa4(0x253)],_0x2dbcc3['apiSecret'])[_0x319aa4(0x1a9)]};if(_0x2bb4ba){if(_0x2dbcc3[_0x319aa4(0x207)]==_0x319aa4(0x1f7))_0x2dbcc3[_0x319aa4(0x207)]=config[_0x319aa4(0x207)];if(_0x2dbcc3[_0x319aa4(0x1e4)]==_0x319aa4(0x1f7))_0x2dbcc3[_0x319aa4(0x1e4)]=config[_0x319aa4(0x1e4)];dbConfig['get'](_0x319aa4(0x1fc))[_0x319aa4(0x1d0)]({'botID':botID})[_0x319aa4(0x1ad)](_0x2dbcc3)[_0x319aa4(0x17c)]();}else dbConfig['get'](_0x319aa4(0x1fc))[_0x319aa4(0x25f)](_0x2dbcc3)[_0x319aa4(0x17c)](),process[_0x319aa4(0x228)]({'status':_0x319aa4(0x209),'live':'running'},_0x33f315=>{});config={..._0x2dbcc3};if(config[_0x319aa4(0x27f)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x2dbcc3[_0x319aa4(0x1e9)]},_0x3581df=>{}),proxyEmit(_0x319aa4(0x1da)),reset();}async function storeHeadless(_0x4dd8b5){const _0x4e5bea=_0x249eb2,_0x24b742={...config,'headless':_0x4dd8b5[_0x4e5bea(0x1af)]};let _0x281b8b=dbConfig[_0x4e5bea(0x1ce)](_0x4e5bea(0x1fc))['find']({'botID':botID})[_0x4e5bea(0x196)]();_0x281b8b&&dbConfig[_0x4e5bea(0x1ce)]('bot')[_0x4e5bea(0x1d0)]({'botID':botID})[_0x4e5bea(0x1ad)](_0x24b742)[_0x4e5bea(0x17c)](),config={..._0x24b742},proxyEmit(_0x4e5bea(0x19e),emittedConfiguration());}function noslash(_0x6be225){const _0xc76c29=_0x249eb2;return _0x6be225[_0xc76c29(0x20a)]('/','');}function updateNumberCoins(_0x4a4856){const _0x428e10=_0x249eb2;_0x4a4856[_0x428e10(0x1ae)]&&_0x4a4856[_0x428e10(0x1ae)]==_0x428e10(0x1ca)&&_0x4a4856[_0x428e10(0x203)][_0x428e10(0x276)](_0x38384c=>{const _0x4a3ed6=_0x428e10;let _0xffada5=currentCoins[_0x4a3ed6(0x1d0)](_0x38696a=>_0x38696a[_0x4a3ed6(0x1d9)]==_0x38384c[_0x4a3ed6(0x1c1)]),_0x3bc36b=config[_0x4a3ed6(0x27e)][_0x4a3ed6(0x1d0)](_0x4bba66=>_0x4bba66[_0x4a3ed6(0x1d9)]==_0x38384c[_0x4a3ed6(0x1c1)]);if(_0xffada5&&_0x3bc36b)_0xffada5['number']=Math[_0x4a3ed6(0x185)](Number(_0x38384c[_0x4a3ed6(0x272)])+(_0x3bc36b[_0x4a3ed6(0x25a)]||0x0),0x0);});if(_0x4a4856[_0x428e10(0x1ae)]&&_0x4a4856[_0x428e10(0x1ae)]==_0x428e10(0x25d)){if(_0x4a4856['orderType']==_0x428e10(0x257)&&_0x4a4856[_0x428e10(0x248)]==_0x428e10(0x199)){if(lastOrders)lastOrders[_0x428e10(0x276)](_0x532209=>{const _0x4ff7e3=_0x428e10;if(_0x532209['orderId']==_0x4a4856['orderId']){if(_0x532209['reverse'])_0x532209[_0x4ff7e3(0x1eb)]=_0x4a4856[_0x4ff7e3(0x190)]*_0x532209[_0x4ff7e3(0x1b7)];else _0x532209[_0x4ff7e3(0x1eb)]=_0x4a4856['accumulatedQuantity'];}});}}}async function getCoins(_0x25f90e=!![],_0x41e538=config[_0x249eb2(0x1ef)]){const _0x329b8b=_0x249eb2;let _0x29e61a,_0x57b318=[],_0x1d720f=[],_0x3f2f07=[];try{_0x29e61a=await exchange[_0x329b8b(0x1f1)](),mybalances=_0x29e61a['total'];if(!_0x25f90e)for(const [_0x1b478e,_0x177f57]of Object['entries'](mybalances)){_0x3f2f07[_0x329b8b(0x25f)](_0x1b478e);}else config[_0x329b8b(0x27e)][_0x329b8b(0x276)](_0x4b00f2=>{const _0x4f8cd7=_0x329b8b;if(!_0x4b00f2[_0x4f8cd7(0x22e)])_0x3f2f07['push'](_0x4b00f2[_0x4f8cd7(0x1d9)]);});if(_0x41e538=='')for(const [_0x4ffade,_0x45f466]of Object[_0x329b8b(0x252)](mybalances)){_0x45f466[_0x329b8b(0x250)]()!=0x0&&_0x1d720f[_0x329b8b(0x25f)]({'coin':_0x4ffade});}else for(const [_0xee5061,_0x32e017]of Object[_0x329b8b(0x252)](mybalances)){if(_0x3f2f07[_0x329b8b(0x1a0)](_0xee5061)){const _0x1f41d5=config[_0x329b8b(0x27e)]['find'](_0x1740da=>_0x1740da[_0x329b8b(0x1d9)]==_0xee5061);if((_0x32e017[_0x329b8b(0x250)]()!=0x0||_0x1f41d5)&&(allSymbols[_0x329b8b(0x1a0)](_0xee5061+'/'+_0x41e538)||_0xee5061==_0x41e538))_0x1d720f[_0x329b8b(0x25f)]({'coin':_0xee5061,'symbol':_0xee5061+'/'+_0x41e538,'reverse':![],'number':Math[_0x329b8b(0x185)](_0x32e017+(_0x1f41d5&&_0x1f41d5[_0x329b8b(0x25a)]||0x0),0x0)}),_0xee5061!=_0x41e538&&_0x57b318[_0x329b8b(0x25f)](_0xee5061+'/'+_0x41e538);else(_0x32e017[_0x329b8b(0x250)]()!=0x0||_0x1f41d5)&&allSymbols[_0x329b8b(0x1a0)](_0x41e538+'/'+_0xee5061)&&(_0x1d720f['push']({'coin':_0xee5061,'symbol':_0x41e538+'/'+_0xee5061,'reverse':!![],'number':Math[_0x329b8b(0x185)](_0x32e017+(_0x1f41d5&&_0x1f41d5[_0x329b8b(0x25a)]||0x0),0x0)}),_0xee5061!=_0x41e538&&_0x57b318['push'](_0x41e538+'/'+_0xee5061));}}}catch(_0x4e52b8){if(!_0x25f90e){if(_0x4e52b8['toString']()[_0x329b8b(0x1a0)](_0x329b8b(0x1d6)))return logHistory(_0x329b8b(0x1a3),_0x329b8b(0x1ab)),![];else{if(_0x4e52b8[_0x329b8b(0x250)]()[_0x329b8b(0x1a0)](_0x329b8b(0x1e8)))return logHistory(_0x329b8b(0x1a3),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x4e52b8['toString']()['includes'](_0x329b8b(0x1f4)))return logHistory(_0x329b8b(0x1a3),_0x329b8b(0x1d7)),![];else await handleError(_0x4e52b8,_0x329b8b(0x25c));}}}else await handleError(_0x4e52b8,_0x329b8b(0x25c));}return _0x1d720f;}async function getPortfolio(_0x4b4f28){const _0x264197=_0x249eb2;let _0x4563fb=[],_0x502964=[],_0x215262,_0x569375=[],_0x1d9b73,_0x29d506;_0x4b4f28[_0x264197(0x207)]===_0x264197(0x1f7)||_0x4b4f28[_0x264197(0x1e4)]===_0x264197(0x1f7)?(_0x1d9b73=config[_0x264197(0x207)],_0x29d506=config['apiSecret']):(_0x1d9b73=_0x4b4f28[_0x264197(0x207)],_0x29d506=_0x4b4f28[_0x264197(0x1e4)]);await initExchange(_0x1d9b73,_0x29d506);let _0x39ff69=await loadSymbols();if(_0x39ff69){_0x569375=await getCoins(![],_0x4b4f28[_0x264197(0x1ef)]);if(_0x569375===![])proxyEmit(_0x264197(0x27e),![]);else{if(_0x4b4f28['basecoin']=='')proxyEmit(_0x264197(0x27e),_0x569375);else{_0x569375[_0x264197(0x276)](_0x2436a9=>{const _0x14ac9a=_0x264197;_0x4563fb[_0x14ac9a(0x25f)](_0x2436a9['symbol']);});try{_0x502964=await exchange[_0x264197(0x234)](_0x4563fb);}catch(_0x5a85a6){await handleError(_0x5a85a6,_0x264197(0x1c5));}_0x569375['forEach'](_0x6ef28f=>{const _0x3d7b76=_0x264197;_0x6ef28f[_0x3d7b76(0x1d9)]!=_0x4b4f28[_0x3d7b76(0x1ef)]?_0x215262=_0x6ef28f[_0x3d7b76(0x17e)]?0x1/_0x502964[_0x6ef28f[_0x3d7b76(0x19b)]][_0x3d7b76(0x255)]:_0x502964[_0x6ef28f[_0x3d7b76(0x19b)]]['last']:_0x215262=0x1,_0x6ef28f['price']=formatResult(_0x215262,0x8);}),proxyEmit('portfolio',_0x569375);}}}else proxyEmit(_0x264197(0x27e),![]);}function checkMinimums(_0x57b517){const _0x35d7c0=_0x249eb2;let _0x5e41c7=!![];const _0x5931dc=!_0x57b517[_0x35d7c0(0x17e)]?markets[_0x57b517['symbol']]['limits'][_0x35d7c0(0x27d)][_0x35d7c0(0x26e)]:markets[_0x57b517[_0x35d7c0(0x19b)]][_0x35d7c0(0x1b0)][_0x35d7c0(0x217)][_0x35d7c0(0x26e)],_0x21b3a6=!_0x57b517[_0x35d7c0(0x17e)]?markets[_0x57b517[_0x35d7c0(0x19b)]][_0x35d7c0(0x1b0)]['cost'][_0x35d7c0(0x26e)]:markets[_0x57b517[_0x35d7c0(0x19b)]][_0x35d7c0(0x1b0)][_0x35d7c0(0x27d)][_0x35d7c0(0x26e)];if(Math[_0x35d7c0(0x27c)](_0x57b517[_0x35d7c0(0x264)])<_0x5931dc)_0x5e41c7=![];if(Math[_0x35d7c0(0x27c)](_0x57b517[_0x35d7c0(0x264)])*_0x57b517['last']<_0x21b3a6)_0x5e41c7=![];return _0x5e41c7;}async function getBalances(){const _0x3a87a8=_0x249eb2;let _0x360cd8=0x0,_0x7ae4a1;const _0x57218c=config[_0x3a87a8(0x263)];currentCoins['forEach'](_0x3c3f20=>{const _0x264a36=_0x3a87a8;if(_0x3c3f20['coin']!=config[_0x264a36(0x1ef)]){let _0x63d659=global[_0x264a36(0x1ea)][noslash(_0x3c3f20[_0x264a36(0x19b)])];_0x7ae4a1=_0x3c3f20[_0x264a36(0x17e)]?0x1/_0x63d659:_0x63d659;}else _0x7ae4a1=0x1;let _0x24f492=_0x3c3f20[_0x264a36(0x1cb)]*_0x7ae4a1;_0x360cd8+=_0x24f492,_0x3c3f20[_0x264a36(0x255)]=formatResult(Number(_0x7ae4a1),0x8),_0x3c3f20[_0x264a36(0x196)]=_0x24f492;}),currentCoins['forEach'](_0x4869bf=>{const _0x4c0d03=_0x3a87a8;let _0x514e9a=config[_0x4c0d03(0x27e)][_0x4c0d03(0x1d0)](_0x55711e=>_0x55711e[_0x4c0d03(0x1d9)]==_0x4869bf[_0x4c0d03(0x1d9)]),_0x4da2f4=Number(_0x514e9a['distribution']),_0x2a3497=_0x4869bf['value']/_0x360cd8*0x64,_0x3ed51a=_0x4da2f4*_0x360cd8/0x64/_0x4869bf[_0x4c0d03(0x255)]-_0x4869bf['number'];_0x4869bf[_0x4c0d03(0x1de)]=formatResult(_0x2a3497,0x3),_0x4869bf[_0x4c0d03(0x19c)]=formatResult(_0x4da2f4,0x3),_0x4869bf[_0x4c0d03(0x264)]=formatResult(_0x3ed51a,0x8),_0x4869bf[_0x4c0d03(0x274)]='',_0x4869bf['valid']='';if(_0x4869bf[_0x4c0d03(0x1d9)]!=config[_0x4c0d03(0x1ef)]){if(_0x4869bf['distribution']>_0x4da2f4)_0x4869bf[_0x4c0d03(0x274)]=_0x4c0d03(0x1fb),_0x4869bf['valid']=checkMinimums(_0x4869bf);else _0x4869bf['distribution']<_0x4da2f4&&(_0x4869bf[_0x4c0d03(0x274)]='buy',_0x4869bf['valid']=checkMinimums(_0x4869bf));}_0x4869bf[_0x4c0d03(0x1fa)]=_0x4869bf[_0x4c0d03(0x1de)]/_0x4869bf[_0x4c0d03(0x19c)]-0x1;}),currentCoins[_0x3a87a8(0x288)]((_0x6964f2,_0x1c63d4)=>_0x6964f2[_0x3a87a8(0x1fa)]<_0x1c63d4[_0x3a87a8(0x1fa)]?0x1:_0x1c63d4[_0x3a87a8(0x1fa)]<_0x6964f2[_0x3a87a8(0x1fa)]?-0x1:0x0);const _0x351374=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x351374[_0x3a87a8(0x20d)],'usd':_0x351374[_0x3a87a8(0x25e)],'portfolio':JSON[_0x3a87a8(0x1f9)](currentCoins),'threshold':_0x57218c},proxyEmit(_0x3a87a8(0x203),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x57218c});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3d0b31=_0x249eb2;if(!lastBalances)return;let _0xefd966=await getStartingBalances(![]),_0x5395df=[],_0x4e2565;JSON[_0x3d0b31(0x273)](lastBalances[_0x3d0b31(0x27e)])[_0x3d0b31(0x276)](_0x5b526e=>{const _0x29838b=_0x3d0b31;let _0x47371a={'coin':_0x5b526e[_0x29838b(0x1d9)],'number':_0x5b526e['number'],'price':_0x5b526e[_0x29838b(0x255)]};_0x5395df[_0x29838b(0x25f)](_0x47371a);});const _0x434304=await getFiat();_0x4e2565={'date':lastBalances[_0x3d0b31(0x27b)][_0x3d0b31(0x280)]('\x20')[0x0],'eur':_0x434304[_0x3d0b31(0x20d)],'usd':_0x434304['usd'],'coins':_0x5395df};let _0x3ff2a4=dbPerformance['get'](_0x3d0b31(0x231))[_0x3d0b31(0x1d0)]({'date':_0x4e2565['date']})[_0x3d0b31(0x196)]();_0x3ff2a4?dbPerformance['get']('data')[_0x3d0b31(0x1d0)]({'date':_0x4e2565[_0x3d0b31(0x1fd)]})['assign'](_0x4e2565)[_0x3d0b31(0x17c)]():dbPerformance[_0x3d0b31(0x1ce)](_0x3d0b31(0x231))[_0x3d0b31(0x25f)](_0x4e2565)[_0x3d0b31(0x17c)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x14b76e=_0x249eb2;if(dbPerformance[_0x14b76e(0x1c0)](_0x14b76e(0x231))[_0x14b76e(0x196)]()){let _0x3eb737=dbPerformance[_0x14b76e(0x1ce)](_0x14b76e(0x231))[_0x14b76e(0x200)]('date')[_0x14b76e(0x196)]();proxyEmit('performance',_0x3eb737),lastPerformanceEmitted=getDate();}else proxyEmit(_0x14b76e(0x23e),[]);}async function getStartingBalances(_0x3f7727=!![]){const _0x439675=_0x249eb2;let _0x4f0b7b=dbPerformance[_0x439675(0x1ce)](_0x439675(0x231))[_0x439675(0x1d0)]({'date':config['startdate']})[_0x439675(0x196)]();config[_0x439675(0x207)]!=''&&!_0x4f0b7b&&(await setStartDatePerformance(config),_0x4f0b7b=dbPerformance[_0x439675(0x1ce)]('data')[_0x439675(0x1d0)]({'date':config[_0x439675(0x194)]})['value']());if(config['apiKey']==''||!_0x4f0b7b)return{};let _0x16f0dc=0x0,_0x4e248f=0x0,_0x26e1a8=0x0,_0x5b815e=[],_0x409c96=0x0;config[_0x439675(0x27e)]['forEach'](_0x373d8e=>{const _0x19c076=_0x439675;if(!_0x373d8e['excluded']){_0x5b815e[_0x409c96]={'coin':_0x373d8e[_0x19c076(0x1d9)],'symbol':_0x373d8e[_0x19c076(0x19b)],'number':_0x373d8e[_0x19c076(0x1c7)],'price':_0x373d8e['startprice']},_0x16f0dc+=_0x373d8e[_0x19c076(0x1bf)]*_0x373d8e[_0x19c076(0x1c7)];if(config[_0x19c076(0x1ef)]==_0x19c076(0x198))_0x4e248f+=_0x373d8e['startprice']*_0x373d8e['startnumber']*_0x4f0b7b[_0x19c076(0x20d)],_0x26e1a8+=_0x373d8e['startprice']*_0x373d8e['startnumber']*_0x4f0b7b[_0x19c076(0x25e)];else{if(config[_0x19c076(0x1ef)]==_0x19c076(0x1bb)||config[_0x19c076(0x1ef)]==_0x19c076(0x1b8)||config['basecoin']==_0x19c076(0x177))_0x4e248f+=_0x373d8e['startprice']*_0x373d8e['startnumber']*_0x4f0b7b[_0x19c076(0x20d)]/_0x4f0b7b[_0x19c076(0x25e)],_0x26e1a8+=_0x373d8e[_0x19c076(0x1bf)]*_0x373d8e[_0x19c076(0x1c7)];else config[_0x19c076(0x1ef)]==_0x19c076(0x236)&&(_0x4e248f+=_0x373d8e[_0x19c076(0x1bf)]*_0x373d8e[_0x19c076(0x1c7)],_0x26e1a8+=_0x373d8e[_0x19c076(0x1bf)]*_0x373d8e['startnumber']*_0x4f0b7b[_0x19c076(0x25e)]/_0x4f0b7b[_0x19c076(0x20d)]);}_0x409c96++;}});let _0xa984a3={'basecoin':_0x16f0dc,'eur':_0x4e248f,'usd':_0x26e1a8,'coins':_0x5b815e};if(_0x3f7727)proxyEmit(_0x439675(0x225),_0xa984a3);return _0xa984a3;}function headlessMode(_0x42b3fe){const _0x3476fa=_0x249eb2;let _0x40b67e=_0x42b3fe[_0x3476fa(0x27e)],_0x46f23e=_0x42b3fe[_0x3476fa(0x263)],_0x5bfcf0=[];for(let _0x3d78b4 of _0x40b67e){if(_0x3d78b4[_0x3476fa(0x1d9)]!=config[_0x3476fa(0x1ef)]){if(_0x3d78b4[_0x3476fa(0x1de)]/_0x3d78b4[_0x3476fa(0x19c)]-0x1>=_0x46f23e/0x64){if(_0x3d78b4['valid'])_0x5bfcf0[_0x3476fa(0x25f)](_0x3d78b4);}else{if(_0x3d78b4[_0x3476fa(0x1de)]/_0x3d78b4[_0x3476fa(0x19c)]-0x1<=-_0x46f23e/0x64){if(_0x3d78b4[_0x3476fa(0x244)])_0x5bfcf0['push'](_0x3d78b4);}}}}_0x5bfcf0[_0x3476fa(0x261)]>0x0&&placeOrder(_0x5bfcf0);}function symbolToCoin(_0x46a60e){const _0x5b9bee=_0x249eb2;let _0x1dc818;if(_0x46a60e[_0x5b9bee(0x1a0)]('/'+config[_0x5b9bee(0x1ef)]))_0x1dc818=_0x46a60e['replace']('/'+config['basecoin'],'');if(_0x46a60e[_0x5b9bee(0x1a0)](config['basecoin']+'/'))_0x1dc818=_0x46a60e[_0x5b9bee(0x20a)](config[_0x5b9bee(0x1ef)]+'/','');return _0x1dc818;}async function validateOrders(_0x42bc65=0x0){const _0x8e536=_0x249eb2;let _0x18a482=[],_0x19091d=config['ordertype']==_0x8e536(0x1d2)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x8e536(0x1b3)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x8e536(0x276)](_0x40e1a1=>{const _0x3856cd=_0x8e536;let _0x40a8fb=previousCoins[_0x3856cd(0x1d0)](_0x4170ad=>_0x4170ad[_0x3856cd(0x1d9)]==symbolToCoin(_0x40e1a1[_0x3856cd(0x19b)])),_0x4abb07=currentCoins['find'](_0xa6207f=>_0xa6207f[_0x3856cd(0x1d9)]==symbolToCoin(_0x40e1a1[_0x3856cd(0x19b)])),_0x5917c4,_0xcae370;_0x40e1a1['side']==_0x3856cd(0x1c4)&&!_0x40e1a1[_0x3856cd(0x17e)]||_0x40e1a1[_0x3856cd(0x274)]==_0x3856cd(0x1fb)&&_0x40e1a1[_0x3856cd(0x17e)]?(_0x5917c4=_0x40a8fb[_0x3856cd(0x1cb)]+0.9*_0x40e1a1[_0x3856cd(0x1eb)],_0xcae370=_0x40a8fb['number']+1.1*_0x40e1a1['filled']):(_0x5917c4=_0x40a8fb[_0x3856cd(0x1cb)]-1.1*_0x40e1a1[_0x3856cd(0x1eb)],_0xcae370=_0x40a8fb['number']-0.9*_0x40e1a1['filled']);const _0x7510d=_0x40e1a1[_0x3856cd(0x1eb)]!=0x0&&_0x4abb07[_0x3856cd(0x1cb)]>=_0x5917c4&&_0x4abb07[_0x3856cd(0x1cb)]<=_0xcae370;_0x18a482[_0x3856cd(0x25f)](_0x7510d);if(_0x7510d&&config[_0x3856cd(0x287)]!=_0x3856cd(0x1d2)){if(_0x40e1a1[_0x3856cd(0x17e)])logHistory(_0x3856cd(0x26f),'Order\x20filled:\x20'+_0x40e1a1[_0x3856cd(0x19b)]+'\x20'+_0x40e1a1[_0x3856cd(0x274)]+'\x20#'+formatResult(_0x40e1a1[_0x3856cd(0x1eb)]/_0x40e1a1['price'],0x8)+'\x20@'+formatResult(_0x40e1a1[_0x3856cd(0x1b7)],0x8));else logHistory(_0x3856cd(0x26f),'Order\x20filled:\x20'+_0x40e1a1[_0x3856cd(0x19b)]+'\x20'+_0x40e1a1[_0x3856cd(0x274)]+'\x20#'+formatResult(_0x40e1a1[_0x3856cd(0x1eb)],0x8)+'\x20@'+formatResult(_0x40e1a1[_0x3856cd(0x1b7)],0x8));}}),_0x18a482[_0x8e536(0x276)]((_0x2c0510,_0x127d0b)=>{if(_0x2c0510)lastOrders['splice'](_0x127d0b,0x1);});if(_0x42bc65<_0x19091d&&_0x18a482[_0x8e536(0x1a0)](![])){if(_0x42bc65==0x0){config[_0x8e536(0x287)]==_0x8e536(0x1d2)?logHistory('error',_0x8e536(0x20c)):logHistory(_0x8e536(0x1a3),_0x8e536(0x235));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x42bc65);},0xa*0x3e8);}else{(_0x42bc65==0x1||_0x42bc65==Math[_0x8e536(0x210)](_0x19091d/0x2)||_0x42bc65==_0x19091d-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x42bc65);},validateOrderInterval);}}else{lockOrders=![];if(_0x42bc65>0x0&&!_0x18a482[_0x8e536(0x1a0)](![]))config[_0x8e536(0x287)]=='market'?logHistory(_0x8e536(0x22d),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x8e536(0x22d),_0x8e536(0x1f0));else _0x42bc65>0x0&&_0x18a482['includes'](![])&&(config[_0x8e536(0x287)]==_0x8e536(0x1d2)?logHistory(_0x8e536(0x22d),_0x8e536(0x17b)+Math['round'](_0x19091d*validateOrderInterval/0xea60)+_0x8e536(0x214)):(lastOrders[_0x8e536(0x276)](async _0x56fa65=>{const _0x2fb321=_0x8e536;try{const _0x229c8b=await exchange[_0x2fb321(0x23b)](_0x56fa65[_0x2fb321(0x25b)],_0x56fa65[_0x2fb321(0x19b)]);}catch(_0x3e0d0b){if(_0x3e0d0b[_0x2fb321(0x250)]()['includes'](_0x2fb321(0x1d1))){}else await handleError(_0x3e0d0b,_0x2fb321(0x26c));}}),logHistory(_0x8e536(0x22d),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x19091d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x4b4634=_0x249eb2;dbCoinResults['get'](_0x4b4634(0x202))[_0x4b4634(0x226)]()['write']();let _0x427aaa=await getStartingBalances(![]);_0x427aaa[_0x4b4634(0x202)][_0x4b4634(0x276)](_0x5e31a9=>{const _0x58780c=_0x4b4634,_0xceff5a=_0x5e31a9[_0x58780c(0x19b)][_0x58780c(0x1a0)](config[_0x58780c(0x1ef)]+'/');if(_0x5e31a9[_0x58780c(0x1d9)]!=config[_0x58780c(0x1ef)]){let _0x3635e0={'coin':_0x5e31a9[_0x58780c(0x1d9)],'number':_0x5e31a9['number'],'breakeven':_0x5e31a9[_0x58780c(0x1b7)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x58780c(0x1ce)](_0x58780c(0x202))[_0x58780c(0x25f)](_0x3635e0)[_0x58780c(0x17c)]();}});}async function updateCoinResults(_0x13609b){const _0x2f5a4a=_0x249eb2;let _0x138d18,_0x46d895,_0x141898,_0x555850,_0x1a91ab,_0x596ade,_0x5a7d24=dbCoinResults[_0x2f5a4a(0x1ce)](_0x2f5a4a(0x202))['find']({'coin':_0x13609b[_0x2f5a4a(0x1d9)]})['value']();if(!_0x5a7d24)return;if(_0x13609b['fee']&&_0x13609b['fee'][_0x2f5a4a(0x1e6)]==config[_0x2f5a4a(0x1ef)])_0x138d18=_0x13609b[_0x2f5a4a(0x254)][_0x2f5a4a(0x217)];else{if(_0x13609b[_0x2f5a4a(0x254)]&&_0x13609b[_0x2f5a4a(0x254)][_0x2f5a4a(0x1e6)]=='BNB')_0x138d18=_0x13609b[_0x2f5a4a(0x254)]['cost']*global[_0x2f5a4a(0x1ea)][_0x2f5a4a(0x219)+config[_0x2f5a4a(0x1ef)]];else _0x138d18=0.001*_0x13609b[_0x2f5a4a(0x1eb)];}const _0x231974=_0x13609b[_0x2f5a4a(0x19b)]['includes'](config[_0x2f5a4a(0x1ef)]+'/');_0x231974&&(_0x596ade={'coin':_0x13609b[_0x2f5a4a(0x1d9)],'symbol':_0x13609b['symbol'],'filled':_0x13609b[_0x2f5a4a(0x1eb)]*_0x13609b[_0x2f5a4a(0x1b7)],'side':_0x13609b[_0x2f5a4a(0x274)]==_0x2f5a4a(0x1fb)?'buy':'sell','price':0x1/_0x13609b[_0x2f5a4a(0x1b7)]},_0x13609b={..._0x596ade});_0x13609b[_0x2f5a4a(0x274)]==_0x2f5a4a(0x1c4)?_0x141898=(_0x5a7d24[_0x2f5a4a(0x205)]*_0x5a7d24[_0x2f5a4a(0x1cb)]+_0x13609b[_0x2f5a4a(0x1b7)]*_0x13609b[_0x2f5a4a(0x1eb)])/(_0x5a7d24[_0x2f5a4a(0x1cb)]+_0x13609b['filled']):_0x141898=(_0x5a7d24[_0x2f5a4a(0x205)]*_0x5a7d24[_0x2f5a4a(0x1cb)]-_0x13609b[_0x2f5a4a(0x1b7)]*_0x13609b['filled'])/(_0x5a7d24[_0x2f5a4a(0x1cb)]-_0x13609b['filled']);_0x13609b[_0x2f5a4a(0x274)]==_0x2f5a4a(0x1c4)?_0x555850=_0x5a7d24['realized']:_0x555850=_0x5a7d24['realized']+(_0x13609b[_0x2f5a4a(0x1b7)]-_0x5a7d24['breakeven'])*_0x13609b['filled'];_0x46d895=_0x13609b[_0x2f5a4a(0x274)]==_0x2f5a4a(0x1fb)?_0x5a7d24[_0x2f5a4a(0x1cb)]-_0x13609b[_0x2f5a4a(0x1eb)]:_0x5a7d24[_0x2f5a4a(0x1cb)]+_0x13609b[_0x2f5a4a(0x1eb)],_0x1a91ab=(_0x13609b['price']-_0x141898)*_0x46d895;let _0x571d0b={'coin':_0x13609b['coin'],'number':_0x46d895,'breakeven':formatResult(_0x141898,0x8),'realized':formatResult(_0x555850,0x8),'unrealized':formatResult(_0x1a91ab,0x8),'fees':formatResult(_0x5a7d24[_0x2f5a4a(0x227)]+_0x138d18,0x8),'sells':_0x13609b[_0x2f5a4a(0x274)]==_0x2f5a4a(0x1fb)?_0x5a7d24[_0x2f5a4a(0x1dc)]+0x1:_0x5a7d24[_0x2f5a4a(0x1dc)],'buys':_0x13609b['side']==_0x2f5a4a(0x1c4)?_0x5a7d24[_0x2f5a4a(0x1e2)]+0x1:_0x5a7d24[_0x2f5a4a(0x1e2)]};dbCoinResults[_0x2f5a4a(0x1ce)](_0x2f5a4a(0x202))[_0x2f5a4a(0x1d0)]({'coin':_0x13609b[_0x2f5a4a(0x1d9)]})[_0x2f5a4a(0x1ad)](_0x571d0b)['write']();}async function placeOrder(_0x53f245){const _0x24ee17=_0x249eb2,_0x240029=config[_0x24ee17(0x287)]==_0x24ee17(0x1d2)?_0x24ee17(0x1d2):_0x24ee17(0x21f);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x24ee17(0x273)](JSON[_0x24ee17(0x1f9)](currentCoins));for(const _0x451479 of _0x53f245){let _0x4ceb9d,_0x30a322,_0x2800aa,_0x2ba690,_0x211a85,_0x487bbb=_0x451479['symbol'];try{const _0x2c17a4=await exchange['fetchTickers'](_0x487bbb),_0x489fcf=_0x2c17a4[_0x487bbb];_0x4ceb9d=_0x489fcf[_0x24ee17(0x255)],_0x30a322=_0x489fcf[_0x24ee17(0x1ff)],_0x2800aa=_0x489fcf[_0x24ee17(0x221)];_0x451479[_0x24ee17(0x17e)]?(_0x2ba690=_0x451479[_0x24ee17(0x274)]==_0x24ee17(0x1c4)?_0x24ee17(0x1fb):_0x24ee17(0x1c4),_0x211a85=Math[_0x24ee17(0x27c)](_0x451479[_0x24ee17(0x264)])/_0x4ceb9d):(_0x2ba690=_0x451479[_0x24ee17(0x274)],_0x211a85=Math[_0x24ee17(0x27c)](_0x451479[_0x24ee17(0x264)]));_0x240029==_0x24ee17(0x21f)&&(config[_0x24ee17(0x287)]==_0x24ee17(0x269)&&(_0x4ceb9d=_0x2ba690==_0x24ee17(0x1c4)?_0x30a322:_0x2800aa),config[_0x24ee17(0x287)]==_0x24ee17(0x1f8)&&(_0x4ceb9d=_0x2ba690==_0x24ee17(0x1c4)?_0x2800aa:_0x30a322));_0x211a85=formatResult(_0x211a85,0x8),_0x4ceb9d=formatResult(_0x4ceb9d,0x8);const _0x12e82c=await exchange[_0x24ee17(0x277)](_0x487bbb,_0x240029,_0x2ba690,_0x211a85,_0x4ceb9d);lastOrders[_0x24ee17(0x25f)]({'orderId':_0x12e82c['id'],'symbol':_0x487bbb,'side':_0x2ba690,'reverse':_0x451479[_0x24ee17(0x17e)],'amount':_0x451479[_0x24ee17(0x17e)]?_0x12e82c[_0x24ee17(0x27d)]*_0x12e82c['price']:_0x12e82c[_0x24ee17(0x27d)],'filled':_0x451479[_0x24ee17(0x17e)]?_0x12e82c[_0x24ee17(0x1eb)]*_0x12e82c[_0x24ee17(0x1b7)]:_0x12e82c['filled'],'price':_0x12e82c[_0x24ee17(0x1b7)]});const _0x12459d=_0x2ba690=='sell'?config[_0x24ee17(0x220)]?String['fromCodePoint']('0x'+config[_0x24ee17(0x220)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x24ee17(0x1bc)])+'\x20':'',_0x2c2a6b=_0x240029==_0x24ee17(0x1d2)?_0x24ee17(0x1be):config['ordertype']==_0x24ee17(0x269)?_0x24ee17(0x191):'Limit\x20(low-margin)';if(_0x240029==_0x24ee17(0x1d2))logHistory(_0x24ee17(0x26f),''+_0x12459d+_0x2c2a6b+_0x24ee17(0x1bd)+_0x487bbb+'\x20'+_0x2ba690+'\x20#'+formatResult(_0x12e82c[_0x24ee17(0x1eb)],0x8)+'\x20@'+formatResult(_0x12e82c[_0x24ee17(0x1b7)],0x8));else logHistory(_0x24ee17(0x26f),''+_0x12459d+_0x2c2a6b+_0x24ee17(0x1bd)+_0x487bbb+'\x20'+_0x2ba690+'\x20#'+formatResult(_0x12e82c[_0x24ee17(0x27d)],0x8)+'\x20@'+formatResult(_0x12e82c[_0x24ee17(0x1b7)],0x8));_0x12e82c[_0x24ee17(0x1d9)]=_0x451479[_0x24ee17(0x1d9)],await updateCoinResults(_0x12e82c);if(config[_0x24ee17(0x247)]!=0x0){let _0x5b0fc6=null;if(cooldownTracker[_0x24ee17(0x261)]==config[_0x24ee17(0x247)]-0x1)_0x5b0fc6=cooldownTracker['shift']();const _0x39ff77=getTimeStamp();cooldownTracker[_0x24ee17(0x25f)](_0x39ff77);if(_0x5b0fc6){const _0xcb2609=fns[_0x24ee17(0x256)](new Date(_0x39ff77),new Date(_0x5b0fc6));_0xcb2609<cooldownInterval&&(logHistory(_0x24ee17(0x1a3),_0x24ee17(0x1e1)+config[_0x24ee17(0x247)]+_0x24ee17(0x1fe)+cooldownInterval/0x3c+_0x24ee17(0x1f6)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4420f1){if(_0x4420f1[_0x24ee17(0x250)]()[_0x24ee17(0x1a0)](_0x24ee17(0x1a5)))logHistory(_0x24ee17(0x1a3),_0x24ee17(0x262)+_0x487bbb);else{if(_0x4420f1[_0x24ee17(0x250)]()[_0x24ee17(0x1a0)](_0x24ee17(0x208)))logHistory('error',_0x24ee17(0x218)+_0x487bbb);else await handleError(_0x4420f1,_0x24ee17(0x178));}}}if(lastOrders[_0x24ee17(0x261)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x24ee17(0x1af)]&&(config[_0x24ee17(0x287)]=='market'?logHistory(_0x24ee17(0x1a3),_0x24ee17(0x19d)):logHistory('error',_0x24ee17(0x1ba)));else coolingDown&&(!config[_0x24ee17(0x1af)]&&logHistory(_0x24ee17(0x1a3),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x1df9a3,_0x2eb8e1,_0x341a63=''){const _0x4d6aa6=_0x249eb2;let _0x2237ab={'time':getTimeStamp(),'type':_0x1df9a3,'event':_0x2eb8e1,'botname':config['botname'],'showname':config[_0x4d6aa6(0x1c9)]};dbLogs[_0x4d6aa6(0x1ce)](_0x4d6aa6(0x1b9))[_0x4d6aa6(0x25f)](_0x2237ab)['write']();if(_0x341a63=='')_0x341a63=_0x2eb8e1;proxyEmit('event',{'log':_0x2237ab,'summary':_0x341a63}),process['send']({'telegram':_0x2237ab},_0x241abc=>{}),logging(''+_0x2237ab[_0x4d6aa6(0x245)]);}function emitHistory(_0x318bd4={}){const _0x1a70fa=_0x249eb2;Object[_0x1a70fa(0x1a8)](_0x318bd4)['length']==0x0&&(_0x318bd4={'type':[_0x1a70fa(0x26f),_0x1a70fa(0x245)],'event':'','page':0x1});if(_0x318bd4['type'][_0x1a70fa(0x1a0)](_0x1a70fa(0x245)))_0x318bd4[_0x1a70fa(0x20f)]['splice'](_0x318bd4[_0x1a70fa(0x20f)][_0x1a70fa(0x186)](_0x1a70fa(0x245)),0x1,_0x1a70fa(0x1a3),_0x1a70fa(0x22d));if(dbLogs['has'](_0x1a70fa(0x1b9))[_0x1a70fa(0x196)]()){let _0x5b0598=dbLogs[_0x1a70fa(0x1ce)](_0x1a70fa(0x1b9))['filter'](_0x71ab0c=>{const _0x32116d=_0x1a70fa;if(_0x318bd4[_0x32116d(0x20f)]['length']==0x0)return![];else return _0x318bd4['type'][_0x32116d(0x1a0)](_0x71ab0c[_0x32116d(0x20f)]);})[_0x1a70fa(0x239)](_0x252d8c=>{const _0x54a254=_0x1a70fa;if(_0x318bd4[_0x54a254(0x245)]=='')return!![];else return _0x252d8c[_0x54a254(0x245)]['toLowerCase']()['includes'](_0x318bd4[_0x54a254(0x245)][_0x54a254(0x275)]());})[_0x1a70fa(0x200)](_0x1a70fa(0x27b)),_0x14e027=_0x5b0598[_0x1a70fa(0x196)]()['length'];_0x5b0598=_0x5b0598[_0x1a70fa(0x17e)]()['slice']((_0x318bd4[_0x1a70fa(0x206)]-0x1)*logPageSize,_0x318bd4[_0x1a70fa(0x206)]*logPageSize-0x1)['reverse']()[_0x1a70fa(0x196)](),proxyEmit(_0x1a70fa(0x1db),{'logs':_0x5b0598,'total':_0x14e027});}else proxyEmit(_0x1a70fa(0x1db),{'logs':[],'total':0x0});}async function pauseBot(_0x4b80a4){const _0x28e24b=_0x249eb2,_0x42e178=new Date()[_0x28e24b(0x1cd)]();if(!lastBotPause)lastBotPause=new Date()[_0x28e24b(0x1cd)](),consecutivePauses=0x1;else{if(_0x42e178-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':'restart'},_0x49140a=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x28e24b(0x1a3),_0x28e24b(0x267)+consecutivePauses+')'),await sleep(_0x4b80a4),botPaused=![],reset();}}async function handleError(_0x2ebc7c,_0x2678a2,_0x523992=''){const _0x5c1447=_0x249eb2;if(_0x2ebc7c[_0x5c1447(0x250)]()['includes'](_0x5c1447(0x283)))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x187)),await pauseBot(pauseBotInterval);else{if(_0x2ebc7c[_0x5c1447(0x250)]()['includes'](_0x5c1447(0x1b1)))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x17a)),await pauseBot(pauseBotInterval);else{if(_0x2ebc7c[_0x5c1447(0x250)]()[_0x5c1447(0x1a0)](_0x5c1447(0x211)))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x1e0)),await pauseBot(pauseBotInterval);else{if(_0x2ebc7c[_0x5c1447(0x250)]()['includes'](_0x5c1447(0x1d6)))logHistory(_0x5c1447(0x1a3),_0x2678a2+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x5c1447(0x1d5)),process[_0x5c1447(0x228)]({'stop':'kill'},_0x2c509b=>{});else{if(_0x2ebc7c['toString']()[_0x5c1447(0x1a0)](_0x5c1447(0x1e8)))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x1e5)),logHistory(_0x5c1447(0x1a3),_0x5c1447(0x1d5)),process[_0x5c1447(0x228)]({'stop':_0x5c1447(0x22f)},_0x479231=>{});else{if(_0x2ebc7c['toString']()[_0x5c1447(0x1a0)](_0x5c1447(0x1f4)))logHistory('error',_0x2678a2+_0x5c1447(0x197)),logHistory(_0x5c1447(0x1a3),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5c1447(0x228)]({'stop':_0x5c1447(0x22f)},_0x56b293=>{});else{if(_0x2ebc7c[_0x5c1447(0x250)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x230)),logHistory(_0x5c1447(0x1a3),_0x5c1447(0x1d5)),process[_0x5c1447(0x228)]({'stop':_0x5c1447(0x22f)},_0x156a00=>{});else{if(_0x2ebc7c[_0x5c1447(0x250)]()[_0x5c1447(0x1a0)]('InvalidNonce'))logHistory(_0x5c1447(0x1a3),_0x2678a2+_0x5c1447(0x1df)),await pauseBot(pauseBotInterval),process[_0x5c1447(0x228)]({'stop':_0x5c1447(0x195)},_0x5af95a=>{});else _0x2ebc7c[_0x5c1447(0x250)]()['includes'](_0x5c1447(0x271))?logHistory('error',_0x2678a2+_0x5c1447(0x22c)):(logHistory(_0x5c1447(0x1a3),_0x2678a2+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x2678a2+_0x5c1447(0x224),_0x2ebc7c),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xd91244,_0x5c98c8){const _0x25b81b=_0x249eb2;return parseFloat(_0xd91244[_0x25b81b(0x1f2)](_0x5c98c8));}function logging(_0x520c53,_0x2318c4=''){const _0x2f834c=_0x249eb2;if(config[_0x2f834c(0x1c9)])console[_0x2f834c(0x1b2)](getTimeStamp()+':\x20'+config[_0x2f834c(0x1e9)]+_0x2f834c(0x258)+_0x520c53,_0x2318c4);else console['log'](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x520c53,_0x2318c4);}function getServerTime(){const _0x41b480=_0x249eb2,_0x39bae5=new Date();return _0x39bae5[_0x41b480(0x241)]()+'/'+(_0x39bae5[_0x41b480(0x26a)]()+0x1)[_0x41b480(0x250)]()[_0x41b480(0x20e)](0x2,'0')+'/'+_0x39bae5['getDate']()['toString']()[_0x41b480(0x20e)](0x2,'0')+'\x20'+_0x39bae5[_0x41b480(0x28b)]()[_0x41b480(0x250)]()[_0x41b480(0x20e)](0x2,'0')+':'+_0x39bae5[_0x41b480(0x266)]()['toString']()[_0x41b480(0x20e)](0x2,'0')+':'+_0x39bae5[_0x41b480(0x24d)]()['toString']()[_0x41b480(0x20e)](0x2,'0');}function getTimeStamp(){const _0x9ead6b=_0x249eb2,_0x16dca4=shiftedTime();return _0x16dca4['getFullYear']()+'/'+(_0x16dca4[_0x9ead6b(0x26a)]()+0x1)['toString']()[_0x9ead6b(0x20e)](0x2,'0')+'/'+_0x16dca4[_0x9ead6b(0x18b)]()[_0x9ead6b(0x250)]()[_0x9ead6b(0x20e)](0x2,'0')+'\x20'+_0x16dca4['getHours']()['toString']()[_0x9ead6b(0x20e)](0x2,'0')+':'+_0x16dca4[_0x9ead6b(0x266)]()['toString']()['padStart'](0x2,'0')+':'+_0x16dca4[_0x9ead6b(0x24d)]()[_0x9ead6b(0x250)]()[_0x9ead6b(0x20e)](0x2,'0');}function getDate(){const _0x4b4b9d=_0x249eb2,_0x2f6e3d=shiftedTime();return _0x2f6e3d[_0x4b4b9d(0x241)]()+'/'+(_0x2f6e3d[_0x4b4b9d(0x26a)]()+0x1)[_0x4b4b9d(0x250)]()['padStart'](0x2,'0')+'/'+_0x2f6e3d['getDate']()['toString']()[_0x4b4b9d(0x20e)](0x2,'0');}function getHour(){const _0x4eee93=_0x249eb2,_0x1fdaab=shiftedTime();return _0x1fdaab[_0x4eee93(0x28b)]()[_0x4eee93(0x250)]()[_0x4eee93(0x20e)](0x2,'0');}function sleep(_0xe64b61){return new Promise(_0x16a717=>setTimeout(_0x16a717,_0xe64b61));}function shiftedTime(){const _0x2647ba=_0x249eb2,_0x87ae3a=new Date();let _0x28c9c1=_0x87ae3a;if(config&&config[_0x2647ba(0x281)]!==0x0)_0x28c9c1=fns['add'](_0x87ae3a,{'hours':config[_0x2647ba(0x281)]});return _0x28c9c1;}