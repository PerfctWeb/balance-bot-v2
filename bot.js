const _0x54b9c5=_0x10ef;(function(_0x25fb4d,_0x2365b1){const _0x11502d=_0x10ef,_0x5a0505=_0x25fb4d();while(!![]){try{const _0x1c847b=-parseInt(_0x11502d(0x2d6))/0x1+-parseInt(_0x11502d(0x2cf))/0x2+parseInt(_0x11502d(0x27c))/0x3*(parseInt(_0x11502d(0x246))/0x4)+parseInt(_0x11502d(0x21e))/0x5*(parseInt(_0x11502d(0x2c2))/0x6)+-parseInt(_0x11502d(0x2e1))/0x7+-parseInt(_0x11502d(0x220))/0x8*(-parseInt(_0x11502d(0x1f1))/0x9)+-parseInt(_0x11502d(0x223))/0xa;if(_0x1c847b===_0x2365b1)break;else _0x5a0505['push'](_0x5a0505['shift']());}catch(_0x210280){_0x5a0505['push'](_0x5a0505['shift']());}}}(_0x1b1f,0xd762f));const _0xf32ec2=function(){let _0x3d4a26=!![];return function(_0x110429,_0x5e362a){const _0x24860a=_0x3d4a26?function(){if(_0x5e362a){const _0x3a6bbd=_0x5e362a['apply'](_0x110429,arguments);return _0x5e362a=null,_0x3a6bbd;}}:function(){};return _0x3d4a26=![],_0x24860a;};}(),_0x39d61c=_0xf32ec2(this,function(){const _0x3fb6a2=_0x10ef;return _0x39d61c[_0x3fb6a2(0x1f5)]()['search'](_0x3fb6a2(0x24f))[_0x3fb6a2(0x1f5)]()['constructor'](_0x39d61c)[_0x3fb6a2(0x260)](_0x3fb6a2(0x24f));});_0x39d61c();'use strict';const ccxt=require(_0x54b9c5(0x241)),low=require(_0x54b9c5(0x23b)),FileSync=require(_0x54b9c5(0x24d)),fs=require('fs'),fns=require(_0x54b9c5(0x29f)),{WebsocketClient,DefaultLogger}=require(_0x54b9c5(0x202)),Crypt=require('hybrid-crypto-js')[_0x54b9c5(0x2af)];let exchange,wsClient;global[_0x54b9c5(0x1fd)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x54b9c5(0x252))[_0x54b9c5(0x1ec)],botID=process[_0x54b9c5(0x23d)][0x2]||_0x54b9c5(0x21b),pattern=/^[0-9]{3}$/;if(!pattern[_0x54b9c5(0x207)](botID))return console[_0x54b9c5(0x25c)](_0x54b9c5(0x2b5)+botID+_0x54b9c5(0x21d)),process['exit'](0x1);const userID=process[_0x54b9c5(0x23d)][0x3]||'',configpath=userID?_0x54b9c5(0x278)+userID+'/':_0x54b9c5(0x278);!fs[_0x54b9c5(0x28d)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x54b9c5(0x210)+botID+_0x54b9c5(0x228),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x54b9c5(0x210)+botID+_0x54b9c5(0x26b),settingsfile=configpath+_0x54b9c5(0x2a7),securefile=configpath+_0x54b9c5(0x20c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x54b9c5(0x238)]({'logs':[]})[_0x54b9c5(0x225)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x54b9c5(0x238)]({'data':[]})[_0x54b9c5(0x225)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x54b9c5(0x238)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x54b9c5(0x225)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x54b9c5(0x291),'symbol':_0x54b9c5(0x2c9)},'usd':{'coin':_0x54b9c5(0x2a8),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x24dbf4)=>{},'debug':(..._0x598e3f)=>{},'notice':(..._0x194e0f)=>{},'info':(..._0x98ed50)=>{},'warning':(..._0x1ac9f6)=>{},'error':async function(..._0x1bb3f9){const _0x2f32b2=_0x54b9c5,_0x209a53=new Date()[_0x2f32b2(0x203)]();if(!lastErrorShown||_0x209a53-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()['getTime'](),logHistory(_0x2f32b2(0x1ff),_0x2f32b2(0x23a)+consecutivePauses+_0x2f32b2(0x287));let _0x31388e='';if(_0x1bb3f9[0x0])_0x31388e+=_0x1bb3f9[0x0];if(_0x1bb3f9[0x1]&&_0x1bb3f9[0x1][_0x2f32b2(0x1ff)]&&_0x1bb3f9[0x1]['error'][_0x2f32b2(0x2b8)])_0x31388e+=_0x2f32b2(0x1db)+_0x1bb3f9[0x1][_0x2f32b2(0x1ff)]['message'];logging('WebSockets('+consecutivePauses+_0x2f32b2(0x230),''+_0x31388e),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x54b9c5(0x263),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x54b9c5(0x251)]!=config[_0x54b9c5(0x251)]&&updateTimeshift(settings['timeshift']);process['send']({'started':'running'},_0x2663c8=>{}),initializeProcessListeners();function proxyEmit(_0x1849b0,_0x44f8c3=null){const _0x518012=_0x54b9c5;process[_0x518012(0x1f4)]({'function':_0x1849b0,'args':_0x44f8c3},_0x56efec=>{});}function initializeProcessListeners(){const _0x5eac86=_0x54b9c5;process['on'](_0x5eac86(0x2b8),_0x5e5b5f=>{const _0x4b24b6=_0x5eac86;switch(Object[_0x4b24b6(0x26a)](_0x5e5b5f)[0x0]){case _0x4b24b6(0x251):_0x5e5b5f[_0x4b24b6(0x251)]!=undefined&&(settings['timeshift']=_0x5e5b5f['timeshift'],updateTimeshift(settings[_0x4b24b6(0x251)]));break;case _0x4b24b6(0x213):switch(_0x5e5b5f[_0x4b24b6(0x213)]){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x5e5b5f[_0x4b24b6(0x2df)]);break;case _0x4b24b6(0x219):getPortfolio(_0x5e5b5f[_0x4b24b6(0x2df)]);break;case _0x4b24b6(0x243):storeConfiguration(_0x5e5b5f['args']);break;case _0x4b24b6(0x22d):storeHeadless(_0x5e5b5f[_0x4b24b6(0x2df)]);break;case _0x4b24b6(0x255):getStartingBalances();break;case _0x4b24b6(0x267):placeOrder(_0x5e5b5f[_0x4b24b6(0x2df)]);break;case _0x4b24b6(0x22e):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x269404=_0x54b9c5;if(pidBalances)clearTimeout(pidBalances);if(config[_0x269404(0x1f8)]!=''){await initExchange(config[_0x269404(0x1f8)],config[_0x269404(0x1e5)]);let _0x46685c=await loadSymbols();_0x46685c&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x39fd21,_0x4f1d23){const _0x1a5712=_0x54b9c5,_0x3651e2=ccxt[config['exchange']];let _0xd1b08c;switch(config['exchange']){case'binance':_0xd1b08c=_0x1a5712(0x229);break;case _0x1a5712(0x2b7):_0xd1b08c=_0x1a5712(0x20b);break;default:_0xd1b08c=_0x1a5712(0x229);}exchange=new _0x3651e2({'apiKey':_0x39fd21,'secret':_0x4f1d23,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x39fd21,'api_secret':_0x4f1d23,'beautify':!![],'wsUrl':_0xd1b08c},logger),config[_0x1a5712(0x28a)]==_0x1a5712(0x2b7)&&(stablecoins={'eur':{'coin':_0x1a5712(0x24e),'symbol':'BTC/BUSD'},'usd':{'coin':_0x1a5712(0x2a8),'symbol':_0x1a5712(0x1f2)}});}async function loadSymbols(){const _0x2e2675=_0x54b9c5;let _0x3321ce;try{markets=await exchange[_0x2e2675(0x2d0)]();const _0x55b133=[_0x2e2675(0x226),_0x2e2675(0x2be),_0x2e2675(0x20f)];allSymbols=exchange['symbols'][_0x2e2675(0x2ab)](_0x57f373=>{const _0x5b6670=_0x2e2675;let _0x3c5698=![];return _0x55b133[_0x5b6670(0x1e7)](_0x2f06e4=>{if(_0x57f373['includes'](_0x2f06e4))_0x3c5698=!![];}),!_0x3c5698;}),_0x3321ce=!![];}catch(_0x3dcba2){await handleError(_0x3dcba2,_0x2e2675(0x2de)),_0x3321ce=![];}return _0x3321ce;}async function initbot(){const _0x369680=_0x54b9c5;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x21a106=dbCoinResults[_0x369680(0x209)]('coins')['value']();if(_0x21a106[_0x369680(0x206)]==0x0)await resetCoinResults();}function _0x10ef(_0xb80fa2,_0x57c5ce){const _0x4e149a=_0x1b1f();return _0x10ef=function(_0x39d61c,_0xf32ec2){_0x39d61c=_0x39d61c-0x1d6;let _0x1b1f84=_0x4e149a[_0x39d61c];return _0x1b1f84;},_0x10ef(_0xb80fa2,_0x57c5ce);}async function initclient(){const _0x1a71cc=_0x54b9c5;proxyEmit(_0x1a71cc(0x2d7),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1a71cc(0x265),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3a2af5=_0x54b9c5;wsinitialized=![];ws1&&(ws1['forEach'](_0xd4332b=>{const _0x21778b=_0x10ef;try{wsClient[_0x21778b(0x1d7)](_0xd4332b);}catch(_0x59595e){}}),ws1=[]);if(ws2){try{wsClient[_0x3a2af5(0x1d7)](ws2);}catch(_0x385a55){}ws2=null;}}async function initws(){const _0x41c3a6=_0x54b9c5;cleanws();let _0x5b6925=[];currentCoins[_0x41c3a6(0x1e7)](_0xf09ef6=>{const _0x4ca4d7=_0x41c3a6;if(_0xf09ef6['coin']!=config[_0x4ca4d7(0x20e)])_0x5b6925['push'](noslash(_0xf09ef6[_0x4ca4d7(0x24c)]));});if(!_0x5b6925['includes'](stablecoins[_0x41c3a6(0x28b)][_0x41c3a6(0x2b6)]))_0x5b6925[_0x41c3a6(0x282)](stablecoins[_0x41c3a6(0x28b)][_0x41c3a6(0x2b6)]);if(!_0x5b6925[_0x41c3a6(0x298)](stablecoins['usd'][_0x41c3a6(0x2b6)]))_0x5b6925['push'](stablecoins[_0x41c3a6(0x292)][_0x41c3a6(0x2b6)]);if(!_0x5b6925['includes'](_0x41c3a6(0x1f6)+config['basecoin']))_0x5b6925[_0x41c3a6(0x282)](_0x41c3a6(0x1f6)+config[_0x41c3a6(0x20e)]);try{_0x5b6925[_0x41c3a6(0x1e7)]((_0x13d120,_0x57aef5)=>{const _0x2340e1=_0x41c3a6;ws1[_0x57aef5]=wsClient[_0x2340e1(0x28c)](_0x13d120,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x41c3a6(0x232),_0x1f1308=>{const _0x41383c=_0x41c3a6;if(!Array[_0x41383c(0x1fe)](_0x1f1308)&&!_0x1f1308[_0x41383c(0x1e1)][_0x41383c(0x298)](_0x41383c(0x25e))){if(_0x1f1308[_0x41383c(0x28f)]===_0x41383c(0x2e6)){global[_0x41383c(0x1fd)][_0x1f1308[_0x41383c(0x2e6)][_0x41383c(0x24c)]]=_0x1f1308[_0x41383c(0x2e6)][_0x41383c(0x218)];return;}}else{if(!Array[_0x41383c(0x1fe)](_0x1f1308)&&_0x1f1308[_0x41383c(0x1e1)]['includes']('userData')){if(_0x1f1308[_0x41383c(0x1ef)][_0x41383c(0x298)](_0x41383c(0x2a9))){updateNumberCoins(_0x1f1308);return;}}}}),wsClient['on'](_0x41c3a6(0x25a),async _0x177523=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x574c5a){await handleError(_0x574c5a,_0x41c3a6(0x2c3));}let _0x97e819,_0x4fac94=0x0;loading[_0x41c3a6(0x257)]=[];let _0x358ba6=0x0;currentCoins[_0x41c3a6(0x1e7)](_0x5b412d=>{const _0x31356a=_0x41c3a6;if(_0x5b412d[_0x31356a(0x2b6)]!=config[_0x31356a(0x20e)])loading[_0x31356a(0x257)]['push'](_0x5b412d[_0x31356a(0x24c)]);}),loadingCanceled=![];while(_0x97e819!=currentCoins[_0x41c3a6(0x206)]-0x1){_0x97e819=0x0,currentCoins[_0x41c3a6(0x1e7)](_0x161528=>{const _0x1602c7=_0x41c3a6;_0x161528[_0x1602c7(0x2b6)]!=config[_0x1602c7(0x20e)]&&global[_0x1602c7(0x1fd)][noslash(_0x161528[_0x1602c7(0x24c)])]&&(loading[_0x1602c7(0x257)]=loading[_0x1602c7(0x257)][_0x1602c7(0x2ab)](_0x5418c6=>_0x5418c6!=_0x161528[_0x1602c7(0x24c)]),_0x97e819++);}),loading[_0x41c3a6(0x2bc)]=Math[_0x41c3a6(0x2b0)](_0x97e819/(currentCoins[_0x41c3a6(0x206)]-0x1)*0x64);_0x358ba6>0x1e*0x5&&(loading[_0x41c3a6(0x284)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x41c3a6(0x212)]=!![],emitLoadingProgress();break;}else _0x97e819!=_0x4fac94&&(_0x4fac94=_0x97e819,emitLoadingProgress()),_0x358ba6++,await sleep(0xc8);}if(_0x97e819==currentCoins[_0x41c3a6(0x206)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x2aec29=_0x54b9c5;proxyEmit(_0x2aec29(0x1f9),loading);}async function getFiat(){const _0x2c9ea2=_0x54b9c5;let _0x280b4d=0x0,_0xbaaa7d=0x0;try{_0x280b4d=global[_0x2c9ea2(0x1fd)][stablecoins[_0x2c9ea2(0x28b)][_0x2c9ea2(0x2b6)]],_0xbaaa7d=global['ticker'][stablecoins[_0x2c9ea2(0x292)][_0x2c9ea2(0x2b6)]];}catch(_0x131b91){await handleError(_0x131b91,_0x2c9ea2(0x275));}return{'eur':Number(_0x280b4d),'usd':Number(_0xbaaa7d)};}async function setStartDatePerformance(_0x23d196){const _0x4d68d8=_0x54b9c5,_0x19482b=fns[_0x4d68d8(0x25d)](new Date(_0x23d196[_0x4d68d8(0x26e)]),_0x4d68d8(0x2a1));let _0x98f21d=[];_0x98f21d[stablecoins[_0x4d68d8(0x28b)]['coin']]=await getCloses(stablecoins['eur']['symbol'],new Date(_0x23d196[_0x4d68d8(0x26e)]),0x1),_0x98f21d[stablecoins[_0x4d68d8(0x292)][_0x4d68d8(0x2b6)]]=await getCloses(stablecoins['usd'][_0x4d68d8(0x24c)],new Date(_0x23d196['startdate']),0x1);let _0x334e16,_0x2eef30=[];_0x23d196[_0x4d68d8(0x2b3)][_0x4d68d8(0x1e7)](_0x3a25e9=>{const _0x13d4a0=_0x4d68d8;!_0x3a25e9[_0x13d4a0(0x2b2)]&&_0x2eef30['push']({'coin':_0x3a25e9[_0x13d4a0(0x2b6)],'number':_0x3a25e9['startnumber'],'price':_0x3a25e9['startprice']});}),_0x334e16={'date':_0x19482b,'eur':_0x98f21d[stablecoins['eur'][_0x4d68d8(0x2b6)]][0x0],'usd':_0x98f21d[stablecoins[_0x4d68d8(0x292)][_0x4d68d8(0x2b6)]][0x0],'coins':_0x2eef30};let _0x47380e=dbPerformance[_0x4d68d8(0x209)]('data')[_0x4d68d8(0x256)]({'date':_0x19482b})['value']();_0x47380e?dbPerformance['get']('data')['find']({'date':_0x19482b})[_0x4d68d8(0x2bb)](_0x334e16)[_0x4d68d8(0x225)]():dbPerformance[_0x4d68d8(0x209)](_0x4d68d8(0x1e0))[_0x4d68d8(0x282)](_0x334e16)[_0x4d68d8(0x225)](),_0x47380e=dbPerformance[_0x4d68d8(0x209)]('data')[_0x4d68d8(0x235)](_0x4d68d8(0x1eb))['value'](),_0x47380e[_0x4d68d8(0x1e7)](_0x1775de=>{const _0x361ed0=_0x4d68d8;_0x1775de['date']<_0x19482b&&dbPerformance[_0x361ed0(0x209)](_0x361ed0(0x1e0))[_0x361ed0(0x224)]({'date':_0x1775de[_0x361ed0(0x1eb)]})[_0x361ed0(0x225)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x5bb948){const _0x5715e6=_0x54b9c5;let _0x2168f7,_0x857195=[];logHistory('success',_0x5715e6(0x269)),_0x5bb948[_0x5715e6(0x2b3)]['forEach'](_0x35b12d=>{const _0x1a4922=_0x5715e6;if(_0x35b12d['coin']!=config[_0x1a4922(0x20e)]&&!_0x35b12d[_0x1a4922(0x2b2)])_0x857195[_0x1a4922(0x282)]({'coin':_0x35b12d[_0x1a4922(0x2b6)],'symbol':_0x35b12d[_0x1a4922(0x24c)]});});let _0x538f23=[];try{const _0x58a14e=fns[_0x5715e6(0x25d)](fns[_0x5715e6(0x2cd)](_0x5bb948[_0x5715e6(0x26e)][_0x5715e6(0x280)](/\//g,'-')),_0x5715e6(0x26d));for(const _0x3c59e1 of _0x857195){if(_0x3c59e1[_0x5715e6(0x2b6)]!=config[_0x5715e6(0x20e)])_0x2168f7=await exchange[_0x5715e6(0x2aa)](_0x3c59e1[_0x5715e6(0x24c)],Date['parse'](_0x58a14e));_0x2168f7['forEach'](_0x47a178=>{const _0x4c5648=_0x5715e6,_0xcd0dca=_0x3c59e1['symbol'][_0x4c5648(0x298)](config[_0x4c5648(0x20e)]+'/'),_0x26134d=fns[_0x4c5648(0x25d)](fns[_0x4c5648(0x2cd)](_0x47a178[_0x4c5648(0x26f)]),_0x4c5648(0x1df)),_0x46e709=fns['format'](fns['parseISO'](_0x47a178['datetime']),_0x4c5648(0x2a1));let _0x30b75f;if(_0x47a178['side']==_0x4c5648(0x2d5)&&_0xcd0dca==![])_0x30b75f=_0x47a178['amount'];if(_0x47a178[_0x4c5648(0x2ad)]==_0x4c5648(0x2d5)&&_0xcd0dca==!![])_0x30b75f=-_0x47a178[_0x4c5648(0x244)]*_0x47a178['price'];if(_0x47a178[_0x4c5648(0x2ad)]==_0x4c5648(0x286)&&_0xcd0dca==![])_0x30b75f=-_0x47a178[_0x4c5648(0x244)];if(_0x47a178[_0x4c5648(0x2ad)]==_0x4c5648(0x286)&&_0xcd0dca==!![])_0x30b75f=_0x47a178[_0x4c5648(0x244)]*_0x47a178['price'];_0x538f23['push']({'timestamp':_0x26134d,'date':_0x46e709,'coin':_0x3c59e1['coin'],'symbol':_0x3c59e1[_0x4c5648(0x24c)],'type':_0x47a178['type'],'side':_0x47a178['side'],'reverse':_0xcd0dca,'amount':formatResult(_0x47a178['filled'],0x8),'filled':formatResult(_0x47a178[_0x4c5648(0x2c5)],0x8),'coinamount':formatResult(_0x30b75f,0x8),'price':formatResult(_0x47a178[_0x4c5648(0x237)],0x8)});let _0x34e35e;if(_0x47a178['side']==_0x4c5648(0x2d5)&&_0xcd0dca==![])_0x34e35e=-_0x47a178[_0x4c5648(0x244)]*_0x47a178[_0x4c5648(0x237)];if(_0x47a178['side']=='buy'&&_0xcd0dca==!![])_0x34e35e=_0x47a178['amount'];if(_0x47a178[_0x4c5648(0x2ad)]==_0x4c5648(0x286)&&_0xcd0dca==![])_0x34e35e=_0x47a178[_0x4c5648(0x244)]*_0x47a178['price'];if(_0x47a178[_0x4c5648(0x2ad)]=='sell'&&_0xcd0dca==!![])_0x34e35e=-_0x47a178[_0x4c5648(0x244)];_0x538f23['push']({'date':_0x46e709,'coin':config[_0x4c5648(0x20e)],'coinamount':formatResult(_0x34e35e,0x8)});});}_0x538f23[_0x5715e6(0x2c4)]((_0x21f437,_0xae994e)=>_0x21f437['timestamp']>_0xae994e[_0x5715e6(0x279)]?0x1:_0xae994e['timestamp']>_0x21f437['timestamp']?-0x1:0x0),dbLogs[_0x5715e6(0x209)](_0x5715e6(0x266))[_0x5715e6(0x224)]()[_0x5715e6(0x225)](),_0x538f23[_0x5715e6(0x1e7)](_0x17b56a=>{const _0x5cbce5=_0x5715e6;let _0xc3b477;_0x17b56a['coin']!=config[_0x5cbce5(0x20e)]&&(_0xc3b477={'time':_0x17b56a[_0x5cbce5(0x279)],'type':_0x5cbce5(0x2b9),'event':'Order:\x20'+_0x17b56a[_0x5cbce5(0x24c)]+'\x20'+_0x17b56a['side']+'\x20#'+_0x17b56a[_0x5cbce5(0x244)]+'\x20@'+_0x17b56a[_0x5cbce5(0x237)]},dbLogs['get']('logs')[_0x5cbce5(0x282)](_0xc3b477)[_0x5cbce5(0x225)]());});const _0x12687f=fns[_0x5715e6(0x222)]({'start':new Date(_0x5bb948[_0x5715e6(0x26e)]),'end':new Date()})['map'](_0x54808a=>fns[_0x5715e6(0x25d)](_0x54808a,'yyyy/MM/dd'));let _0x485ae9=[];_0x5bb948[_0x5715e6(0x2b3)][_0x5715e6(0x1e7)](_0x258f75=>{const _0x59fe98=_0x5715e6;if(!_0x258f75[_0x59fe98(0x2b2)]){_0x485ae9[_0x258f75[_0x59fe98(0x2b6)]]=[];let _0x15f1f1=_0x258f75[_0x59fe98(0x2b4)];_0x12687f[_0x59fe98(0x1e7)]((_0x30acdc,_0x2d7db6)=>{const _0x2af119=_0x59fe98;let _0x1330d6=_0x538f23[_0x2af119(0x2ab)](_0x50c436=>_0x50c436[_0x2af119(0x2b6)]==_0x258f75['coin']&&_0x50c436[_0x2af119(0x1eb)]==_0x30acdc);if(_0x1330d6[_0x2af119(0x206)]!=0x0){let _0x2b9f48=_0x1330d6[_0x2af119(0x250)]((_0xe9ff57,_0x21be21)=>{return _0xe9ff57+=_0x21be21['coinamount'],_0xe9ff57;},0x0);_0x15f1f1+=_0x2b9f48;}_0x485ae9[_0x258f75['coin']][_0x30acdc]=_0x15f1f1;});}});const _0x36fd28=[..._0x857195];_0x36fd28[_0x5715e6(0x282)]({'coin':stablecoins[_0x5715e6(0x28b)][_0x5715e6(0x2b6)],'symbol':stablecoins['eur']['symbol']}),_0x36fd28[_0x5715e6(0x282)]({'coin':stablecoins[_0x5715e6(0x292)]['coin'],'symbol':stablecoins[_0x5715e6(0x292)]['symbol']});let _0x322974=[];for(const _0x644071 of _0x36fd28){_0x322974[_0x644071['coin']]=await getCloses(_0x644071[_0x5715e6(0x24c)],new Date(_0x5bb948[_0x5715e6(0x26e)]));}dbPerformance['get']('data')[_0x5715e6(0x224)]()[_0x5715e6(0x225)](),_0x12687f[_0x5715e6(0x1e7)]((_0x1ff861,_0x2d474f)=>{const _0x8ec57d=_0x5715e6;let _0x4259d2,_0x385f0a=[];_0x2d474f==0x0?(_0x5bb948[_0x8ec57d(0x2b3)][_0x8ec57d(0x1e7)](_0x48e302=>{const _0x958def=_0x8ec57d;!_0x48e302['excluded']&&_0x385f0a[_0x958def(0x282)]({'coin':_0x48e302[_0x958def(0x2b6)],'number':_0x48e302[_0x958def(0x2b4)],'price':_0x48e302['startprice']});}),_0x4259d2={'date':_0x1ff861,'eur':_0x322974[stablecoins[_0x8ec57d(0x28b)]['coin']][_0x2d474f],'usd':_0x322974[stablecoins[_0x8ec57d(0x292)][_0x8ec57d(0x2b6)]][_0x2d474f],'coins':_0x385f0a}):(_0x5bb948[_0x8ec57d(0x2b3)][_0x8ec57d(0x1e7)](_0x409072=>{const _0x59a8cc=_0x8ec57d;!_0x409072[_0x59a8cc(0x2b2)]&&_0x385f0a[_0x59a8cc(0x282)]({'coin':_0x409072[_0x59a8cc(0x2b6)],'number':_0x485ae9[_0x409072[_0x59a8cc(0x2b6)]][_0x1ff861],'price':_0x409072[_0x59a8cc(0x2b6)]==config['basecoin']?0x1:_0x322974[_0x409072[_0x59a8cc(0x2b6)]][_0x2d474f]});}),_0x4259d2={'date':_0x1ff861,'eur':_0x322974[stablecoins[_0x8ec57d(0x28b)][_0x8ec57d(0x2b6)]][_0x2d474f],'usd':_0x322974[stablecoins['usd']['coin']][_0x2d474f],'coins':_0x385f0a}),dbPerformance[_0x8ec57d(0x209)](_0x8ec57d(0x1e0))[_0x8ec57d(0x282)](_0x4259d2)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x1999a4 of _0x538f23){_0x1999a4[_0x5715e6(0x2b6)]!=config[_0x5715e6(0x20e)]&&await updateCoinResults(_0x1999a4);}logHistory(_0x5715e6(0x27e),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x2ff0de){await handleError(_0x2ff0de,'recreateHistory()');}}async function getCloses(_0x560b62,_0x18dba3,_0x2f4ec1=undefined){const _0x2b0b6f=_0x54b9c5,_0x20d326='1d';let _0x204a60,_0x4b0449;const _0x49514a=fns[_0x2b0b6f(0x22a)](new Date(),_0x18dba3)+0x1;try{const _0x2a7ec4=exchange['milliseconds']()-_0x49514a*0x18*0xe10*0x3e8;_0x204a60=await exchange[_0x2b0b6f(0x270)](_0x560b62,_0x20d326,_0x2a7ec4,_0x2f4ec1),_0x4b0449=await exchange[_0x2b0b6f(0x2c8)](_0x560b62);}catch(_0x3a3a9c){await handleError(_0x3a3a9c,'getCloses()');}let _0x4d2bad=ohlcvToCloses(_0x204a60);return _0x4d2bad['push'](_0x4b0449[_0x560b62][_0x2b0b6f(0x1da)]),_0x4d2bad;}function ohlcvToCloses(_0x4685ef){const _0x2c650f=_0x54b9c5;let _0x82bd0f=[];return _0x4685ef[_0x2c650f(0x1e7)](function(_0x4a02a4){const _0x505aba=_0x2c650f;_0x82bd0f[_0x505aba(0x282)](_0x4a02a4[0x4]);}),_0x82bd0f;}function getConfiguration(_0x75bb07){const _0x1db80c=_0x54b9c5;let _0x53facb=dbConfig[_0x1db80c(0x209)](_0x1db80c(0x2a5))[_0x1db80c(0x256)]({'botID':_0x75bb07})['value']();if(_0x53facb){let _0xf9d753=![];!_0x53facb[_0x1db80c(0x28a)]&&(_0x53facb={..._0x53facb,'exchange':_0x1db80c(0x202)},_0xf9d753=!![]),!_0x53facb['basecoin']&&(_0x53facb={..._0x53facb,'basecoin':_0x1db80c(0x21a)},_0xf9d753=!![]),!_0x53facb['ordertype']&&(_0x53facb={..._0x53facb,'ordertype':_0x1db80c(0x2dd)},_0xf9d753=!![]),!_0x53facb[_0x1db80c(0x284)]&&(_0x53facb={..._0x53facb,'timeout':0x14},_0xf9d753=!![]),!_0x53facb[_0x1db80c(0x1e8)]&&(_0x53facb={..._0x53facb,'emojibuy':''},_0xf9d753=!![]),!_0x53facb[_0x1db80c(0x216)]&&(_0x53facb={..._0x53facb,'emojisell':''},_0xf9d753=!![]),!_0x53facb[_0x1db80c(0x2e5)]&&(_0x53facb={..._0x53facb,'showname':![]},_0xf9d753=!![]),_0xf9d753&&(_0x53facb={'botID':_0x53facb[_0x1db80c(0x211)],'exchange':_0x53facb[_0x1db80c(0x28a)],'apiKey':_0x53facb[_0x1db80c(0x1f8)],'apiSecret':_0x53facb['apiSecret'],'basecoin':_0x53facb[_0x1db80c(0x20e)],'botname':_0x53facb[_0x1db80c(0x268)],'showname':_0x53facb[_0x1db80c(0x2e5)],'threshold':_0x53facb[_0x1db80c(0x28e)],'ordertype':_0x53facb[_0x1db80c(0x2e3)],'timeout':_0x53facb['timeout'],'startdate':_0x53facb[_0x1db80c(0x26e)],'recreate':_0x53facb[_0x1db80c(0x27b)],'timeshift':_0x53facb['timeshift'],'headless':_0x53facb[_0x1db80c(0x2da)],'cooldown':_0x53facb['cooldown'],'emojibuy':_0x53facb['emojibuy'],'emojisell':_0x53facb[_0x1db80c(0x216)],'portfolio':_0x53facb[_0x1db80c(0x2b3)]},dbConfig['get'](_0x1db80c(0x2a5))[_0x1db80c(0x224)]()['write'](),dbConfig[_0x1db80c(0x209)](_0x1db80c(0x2a5))[_0x1db80c(0x282)](_0x53facb)[_0x1db80c(0x225)]());}else _0x53facb={'botID':_0x75bb07,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':_0x1db80c(0x29c)+_0x75bb07,'showname':![],'threshold':'3','ordertype':_0x1db80c(0x2dd),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1db80c(0x251)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x53facb;}function emittedConfiguration(){const _0x3c853c=_0x54b9c5;let _0x4625f9;return config[_0x3c853c(0x1f8)]==''?_0x4625f9=config:_0x4625f9={...config,'apiKey':_0x3c853c(0x27d),'apiSecret':_0x3c853c(0x27d)},_0x4625f9;}function getSettings(){const _0x5d3d40=_0x54b9c5;return dbSettings[_0x5d3d40(0x209)](_0x5d3d40(0x24b))[_0x5d3d40(0x2e2)]();}function getSecure(){const _0x3fe14a=_0x54b9c5;return dbSecure['get'](_0x3fe14a(0x26c))[_0x3fe14a(0x2e2)]()||{};}function updateTimeshift(_0x537e77){const _0x4c770e=_0x54b9c5;let _0x123217=dbConfig[_0x4c770e(0x209)]('bot')[_0x4c770e(0x256)]({'botID':botID})[_0x4c770e(0x2e2)]();_0x123217&&dbConfig['get'](_0x4c770e(0x2a5))[_0x4c770e(0x256)]({'botID':botID})[_0x4c770e(0x2bb)]({'timeshift':_0x537e77})[_0x4c770e(0x225)](),config[_0x4c770e(0x251)]=_0x537e77,proxyEmit(_0x4c770e(0x2d7),emittedConfiguration());}async function storeConfiguration(_0x5945c2){const _0x440bc8=_0x54b9c5;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2c116c=dbConfig['get'](_0x440bc8(0x2a5))[_0x440bc8(0x256)]({'botID':botID})[_0x440bc8(0x2e2)]();_0x5945c2={..._0x5945c2,'apiKey':crypt[_0x440bc8(0x2a3)](secure['privateKey'],_0x5945c2['apiKey'])['message'],'apiSecret':crypt[_0x440bc8(0x2a3)](secure[_0x440bc8(0x2a6)],_0x5945c2[_0x440bc8(0x1e5)])[_0x440bc8(0x2b8)]};if(_0x2c116c){if(_0x5945c2[_0x440bc8(0x1f8)]==_0x440bc8(0x27d))_0x5945c2[_0x440bc8(0x1f8)]=config[_0x440bc8(0x1f8)];if(_0x5945c2[_0x440bc8(0x1e5)]==_0x440bc8(0x27d))_0x5945c2[_0x440bc8(0x1e5)]=config[_0x440bc8(0x1e5)];dbConfig['get'](_0x440bc8(0x2a5))[_0x440bc8(0x256)]({'botID':botID})['assign'](_0x5945c2)[_0x440bc8(0x225)]();}else dbConfig['get'](_0x440bc8(0x2a5))[_0x440bc8(0x282)](_0x5945c2)[_0x440bc8(0x225)](),process[_0x440bc8(0x1f4)]({'status':'enabled','live':_0x440bc8(0x299)},_0x39c62a=>{});config={..._0x5945c2};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x5945c2[_0x440bc8(0x268)]},_0x31d3bd=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x4d3aee){const _0x39ffa9=_0x54b9c5,_0x471f95={...config,'headless':_0x4d3aee[_0x39ffa9(0x2da)]};let _0x5df835=dbConfig['get'](_0x39ffa9(0x2a5))['find']({'botID':botID})[_0x39ffa9(0x2e2)]();_0x5df835&&dbConfig[_0x39ffa9(0x209)]('bot')[_0x39ffa9(0x256)]({'botID':botID})[_0x39ffa9(0x2bb)](_0x471f95)[_0x39ffa9(0x225)](),config={..._0x471f95},proxyEmit(_0x39ffa9(0x2d7),emittedConfiguration());}function noslash(_0x2849d8){const _0x1c2701=_0x54b9c5;return _0x2849d8[_0x1c2701(0x280)]('/','');}function updateNumberCoins(_0x3dfcdc){const _0x6f05a3=_0x54b9c5;_0x3dfcdc[_0x6f05a3(0x28f)]&&_0x3dfcdc['eventType']==_0x6f05a3(0x288)&&_0x3dfcdc[_0x6f05a3(0x265)][_0x6f05a3(0x1e7)](_0x917853=>{const _0x3ece20=_0x6f05a3;let _0x2ce2ab=currentCoins[_0x3ece20(0x256)](_0x735c92=>_0x735c92[_0x3ece20(0x2b6)]==_0x917853[_0x3ece20(0x274)]),_0x418b24=config[_0x3ece20(0x2b3)][_0x3ece20(0x256)](_0x8d386f=>_0x8d386f['coin']==_0x917853['asset']);if(_0x2ce2ab&&_0x418b24)_0x2ce2ab[_0x3ece20(0x2d9)]=Math['max'](Number(_0x917853[_0x3ece20(0x1e2)])+(_0x418b24[_0x3ece20(0x273)]||0x0),0x0);});if(_0x3dfcdc[_0x6f05a3(0x28f)]&&_0x3dfcdc[_0x6f05a3(0x28f)]==_0x6f05a3(0x25f)){if(_0x3dfcdc[_0x6f05a3(0x2bf)]==_0x6f05a3(0x1e6)&&_0x3dfcdc[_0x6f05a3(0x2db)]==_0x6f05a3(0x2dc)){if(lastOrders)lastOrders['forEach'](_0x3150e4=>{const _0x217a26=_0x6f05a3;if(_0x3150e4[_0x217a26(0x1ed)]==_0x3dfcdc[_0x217a26(0x1ed)]){if(_0x3150e4[_0x217a26(0x2cb)])_0x3150e4[_0x217a26(0x2c5)]=_0x3dfcdc[_0x217a26(0x1f0)]*_0x3150e4['price'];else _0x3150e4['filled']=_0x3dfcdc[_0x217a26(0x1f0)];}});}}}async function getCoins(_0x2915c4=!![],_0x35ebe5=config[_0x54b9c5(0x20e)]){const _0x1c4f6f=_0x54b9c5;let _0x45259f,_0xacfce2=[],_0x348ee9=[],_0x3b2f51=[];try{_0x45259f=await exchange[_0x1c4f6f(0x214)](),mybalances=_0x45259f[_0x1c4f6f(0x2cc)];if(!_0x2915c4)for(const [_0x3d0df6,_0x13ead4]of Object[_0x1c4f6f(0x2c7)](mybalances)){_0x3b2f51[_0x1c4f6f(0x282)](_0x3d0df6);}else config[_0x1c4f6f(0x2b3)]['forEach'](_0x2edb0d=>{const _0x4ccc81=_0x1c4f6f;if(!_0x2edb0d[_0x4ccc81(0x2b2)])_0x3b2f51[_0x4ccc81(0x282)](_0x2edb0d['coin']);});if(_0x35ebe5=='')for(const [_0x252eae,_0x4cc00a]of Object[_0x1c4f6f(0x2c7)](mybalances)){_0x4cc00a[_0x1c4f6f(0x1f5)]()!=0x0&&_0x348ee9[_0x1c4f6f(0x282)]({'coin':_0x252eae});}else for(const [_0x82e350,_0x28e6c1]of Object['entries'](mybalances)){if(_0x3b2f51['includes'](_0x82e350)){const _0x4320cc=config[_0x1c4f6f(0x2b3)][_0x1c4f6f(0x256)](_0x5c0c24=>_0x5c0c24[_0x1c4f6f(0x2b6)]==_0x82e350);if((_0x28e6c1[_0x1c4f6f(0x1f5)]()!=0x0||_0x4320cc)&&(allSymbols['includes'](_0x82e350+'/'+_0x35ebe5)||_0x82e350==_0x35ebe5))_0x348ee9[_0x1c4f6f(0x282)]({'coin':_0x82e350,'symbol':_0x82e350+'/'+_0x35ebe5,'reverse':![],'number':Math[_0x1c4f6f(0x1dd)](_0x28e6c1+(_0x4320cc&&_0x4320cc[_0x1c4f6f(0x273)]||0x0),0x0)}),_0x82e350!=_0x35ebe5&&_0xacfce2[_0x1c4f6f(0x282)](_0x82e350+'/'+_0x35ebe5);else(_0x28e6c1[_0x1c4f6f(0x1f5)]()!=0x0||_0x4320cc)&&allSymbols['includes'](_0x35ebe5+'/'+_0x82e350)&&(_0x348ee9[_0x1c4f6f(0x282)]({'coin':_0x82e350,'symbol':_0x35ebe5+'/'+_0x82e350,'reverse':!![],'number':Math['max'](_0x28e6c1+(_0x4320cc&&_0x4320cc[_0x1c4f6f(0x273)]||0x0),0x0)}),_0x82e350!=_0x35ebe5&&_0xacfce2[_0x1c4f6f(0x282)](_0x35ebe5+'/'+_0x82e350));}}}catch(_0x31ce08){if(!_0x2915c4){if(_0x31ce08['toString']()['includes'](_0x1c4f6f(0x1fc)))return logHistory(_0x1c4f6f(0x1ff),_0x1c4f6f(0x253)),![];else{if(_0x31ce08[_0x1c4f6f(0x1f5)]()['includes'](_0x1c4f6f(0x236)))return logHistory(_0x1c4f6f(0x1ff),_0x1c4f6f(0x2a4)),![];else{if(_0x31ce08[_0x1c4f6f(0x1f5)]()['includes'](_0x1c4f6f(0x215)))return logHistory(_0x1c4f6f(0x1ff),_0x1c4f6f(0x296)),![];else await handleError(_0x31ce08,_0x1c4f6f(0x24a));}}}else await handleError(_0x31ce08,_0x1c4f6f(0x24a));}return _0x348ee9;}async function getPortfolio(_0xac35cd){const _0x544433=_0x54b9c5;let _0x501d92=[],_0xb7a924=[],_0x38cad2,_0x76f39a=[],_0x838211,_0x47ed58;_0xac35cd[_0x544433(0x1f8)]===_0x544433(0x27d)||_0xac35cd['apiSecret']===_0x544433(0x27d)?(_0x838211=config[_0x544433(0x1f8)],_0x47ed58=config['apiSecret']):(_0x838211=_0xac35cd[_0x544433(0x1f8)],_0x47ed58=_0xac35cd[_0x544433(0x1e5)]);await initExchange(_0x838211,_0x47ed58);let _0x45637f=await loadSymbols();if(_0x45637f){_0x76f39a=await getCoins(![],_0xac35cd[_0x544433(0x20e)]);if(_0x76f39a===![])proxyEmit(_0x544433(0x2b3),![]);else{if(_0xac35cd[_0x544433(0x20e)]=='')proxyEmit(_0x544433(0x2b3),_0x76f39a);else{_0x76f39a[_0x544433(0x1e7)](_0x51c33a=>{const _0x2ec77a=_0x544433;_0x501d92['push'](_0x51c33a[_0x2ec77a(0x24c)]);});try{_0xb7a924=await exchange[_0x544433(0x2c8)](_0x501d92);}catch(_0x5bffa6){await handleError(_0x5bffa6,'getPortfolio()');}_0x76f39a[_0x544433(0x1e7)](_0x2bcf08=>{const _0x1f3b82=_0x544433;_0x2bcf08[_0x1f3b82(0x2b6)]!=_0xac35cd[_0x1f3b82(0x20e)]?_0x38cad2=_0x2bcf08[_0x1f3b82(0x2cb)]?0x1/_0xb7a924[_0x2bcf08[_0x1f3b82(0x24c)]][_0x1f3b82(0x1da)]:_0xb7a924[_0x2bcf08[_0x1f3b82(0x24c)]][_0x1f3b82(0x1da)]:_0x38cad2=0x1,_0x2bcf08['price']=formatResult(_0x38cad2,0x8);}),proxyEmit(_0x544433(0x2b3),_0x76f39a);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x3bea33){const _0x2c038b=_0x54b9c5;let _0x1d6830=!![];const _0x68ff61=!_0x3bea33[_0x2c038b(0x2cb)]?markets[_0x3bea33[_0x2c038b(0x24c)]][_0x2c038b(0x248)]['amount']['min']:markets[_0x3bea33['symbol']]['limits'][_0x2c038b(0x2e0)][_0x2c038b(0x1d6)],_0x2c6d9a=!_0x3bea33[_0x2c038b(0x2cb)]?markets[_0x3bea33['symbol']][_0x2c038b(0x248)]['cost']['min']:markets[_0x3bea33[_0x2c038b(0x24c)]][_0x2c038b(0x248)][_0x2c038b(0x244)][_0x2c038b(0x1d6)];if(Math[_0x2c038b(0x276)](_0x3bea33[_0x2c038b(0x23e)])<_0x68ff61)_0x1d6830=![];if(Math[_0x2c038b(0x276)](_0x3bea33[_0x2c038b(0x23e)])*_0x3bea33[_0x2c038b(0x1da)]<_0x2c6d9a)_0x1d6830=![];let _0x3e80d6=config['portfolio'][_0x2c038b(0x256)](_0x4de79e=>_0x4de79e[_0x2c038b(0x2b6)]==_0x3bea33[_0x2c038b(0x2b6)]);if(Math[_0x2c038b(0x276)](_0x3bea33['trade'])>_0x3bea33[_0x2c038b(0x2d9)]-_0x3e80d6['offset'])_0x1d6830=![];return _0x1d6830;}async function getBalances(){const _0x46623e=_0x54b9c5;let _0x3620ca=0x0,_0x272b35;const _0x5a2c3b=config['threshold'];currentCoins[_0x46623e(0x1e7)](_0x347e76=>{const _0x36a9a2=_0x46623e;if(_0x347e76[_0x36a9a2(0x2b6)]!=config['basecoin']){let _0x14245c=global[_0x36a9a2(0x1fd)][noslash(_0x347e76[_0x36a9a2(0x24c)])];_0x272b35=_0x347e76[_0x36a9a2(0x2cb)]?0x1/_0x14245c:_0x14245c;}else _0x272b35=0x1;let _0xfbd582=_0x347e76[_0x36a9a2(0x2d9)]*_0x272b35;_0x3620ca+=_0xfbd582,_0x347e76[_0x36a9a2(0x1da)]=formatResult(Number(_0x272b35),0x8),_0x347e76[_0x36a9a2(0x2e2)]=_0xfbd582;}),currentCoins[_0x46623e(0x1e7)](_0x2cdf5c=>{const _0xcf6446=_0x46623e;let _0x27a90a=config[_0xcf6446(0x2b3)][_0xcf6446(0x256)](_0x39c250=>_0x39c250[_0xcf6446(0x2b6)]==_0x2cdf5c[_0xcf6446(0x2b6)]),_0x3a7803=Number(_0x27a90a[_0xcf6446(0x1e9)]),_0x1f8647=_0x2cdf5c[_0xcf6446(0x2e2)]/_0x3620ca*0x64,_0x1f9b2e=_0x3a7803*_0x3620ca/0x64/_0x2cdf5c[_0xcf6446(0x1da)]-_0x2cdf5c[_0xcf6446(0x2d9)];_0x2cdf5c[_0xcf6446(0x1e9)]=formatResult(_0x1f8647,0x3),_0x2cdf5c[_0xcf6446(0x247)]=formatResult(_0x3a7803,0x3),_0x2cdf5c[_0xcf6446(0x23e)]=formatResult(_0x1f9b2e,0x8),_0x2cdf5c[_0xcf6446(0x2ad)]='',_0x2cdf5c[_0xcf6446(0x2a2)]='';if(_0x2cdf5c[_0xcf6446(0x2b6)]!=config[_0xcf6446(0x20e)]){if(_0x2cdf5c['distribution']>_0x3a7803)_0x2cdf5c[_0xcf6446(0x2ad)]='sell',_0x2cdf5c['valid']=checkMinimums(_0x2cdf5c);else _0x2cdf5c[_0xcf6446(0x1e9)]<_0x3a7803&&(_0x2cdf5c[_0xcf6446(0x2ad)]=_0xcf6446(0x2d5),_0x2cdf5c['valid']=checkMinimums(_0x2cdf5c));}_0x2cdf5c[_0xcf6446(0x29b)]=_0x2cdf5c[_0xcf6446(0x1e9)]/_0x2cdf5c['target']-0x1;}),currentCoins[_0x46623e(0x2c4)]((_0x1786e9,_0x3f9cd0)=>_0x1786e9[_0x46623e(0x29b)]<_0x3f9cd0[_0x46623e(0x29b)]?0x1:_0x3f9cd0[_0x46623e(0x29b)]<_0x1786e9[_0x46623e(0x29b)]?-0x1:0x0);const _0x22858a=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x22858a[_0x46623e(0x28b)],'usd':_0x22858a['usd'],'portfolio':JSON[_0x46623e(0x242)](currentCoins),'threshold':_0x5a2c3b},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x46623e(0x2da)])headlessMode({'portfolio':currentCoins,'threshold':_0x5a2c3b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1be2e3=_0x54b9c5;if(!lastBalances)return;let _0x372f89=await getStartingBalances(![]),_0x36016e=[],_0x1633a5;JSON[_0x1be2e3(0x205)](lastBalances[_0x1be2e3(0x2b3)])[_0x1be2e3(0x1e7)](_0x146b83=>{const _0x3accbd=_0x1be2e3;let _0x21563c={'coin':_0x146b83[_0x3accbd(0x2b6)],'number':_0x146b83[_0x3accbd(0x2d9)],'price':_0x146b83[_0x3accbd(0x1da)]};_0x36016e[_0x3accbd(0x282)](_0x21563c);});const _0x4f9851=await getFiat();_0x1633a5={'date':lastBalances['time'][_0x1be2e3(0x2d4)]('\x20')[0x0],'eur':_0x4f9851[_0x1be2e3(0x28b)],'usd':_0x4f9851[_0x1be2e3(0x292)],'coins':_0x36016e};let _0xf1130c=dbPerformance[_0x1be2e3(0x209)](_0x1be2e3(0x1e0))['find']({'date':_0x1633a5['date']})['value']();_0xf1130c?dbPerformance['get'](_0x1be2e3(0x1e0))['find']({'date':_0x1633a5[_0x1be2e3(0x1eb)]})[_0x1be2e3(0x2bb)](_0x1633a5)['write']():dbPerformance[_0x1be2e3(0x209)](_0x1be2e3(0x1e0))['push'](_0x1633a5)[_0x1be2e3(0x225)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x422315=_0x54b9c5;if(dbPerformance[_0x422315(0x23c)](_0x422315(0x1e0))[_0x422315(0x2e2)]()){let _0x568a21=dbPerformance[_0x422315(0x209)](_0x422315(0x1e0))[_0x422315(0x235)]('date')[_0x422315(0x2e2)]();proxyEmit(_0x422315(0x1dc),_0x568a21),lastPerformanceEmitted=getDate();}else proxyEmit(_0x422315(0x1dc),[]);}async function getStartingBalances(_0x15b099=!![]){const _0x343665=_0x54b9c5;let _0x21687d=dbPerformance[_0x343665(0x209)](_0x343665(0x1e0))[_0x343665(0x256)]({'date':config[_0x343665(0x26e)]})[_0x343665(0x2e2)]();config[_0x343665(0x1f8)]!=''&&!_0x21687d&&(await setStartDatePerformance(config),_0x21687d=dbPerformance[_0x343665(0x209)]('data')[_0x343665(0x256)]({'date':config['startdate']})['value']());if(config['apiKey']==''||!_0x21687d)return{};let _0x5c9ebf=0x0,_0x4c2bf2=0x0,_0x3e6d83=0x0,_0x5a1e11=[],_0x4753c6=0x0;config['portfolio'][_0x343665(0x1e7)](_0x1aba99=>{const _0x51df1e=_0x343665;if(!_0x1aba99[_0x51df1e(0x2b2)]){_0x5a1e11[_0x4753c6]={'coin':_0x1aba99[_0x51df1e(0x2b6)],'symbol':_0x1aba99[_0x51df1e(0x24c)],'number':_0x1aba99['startnumber'],'price':_0x1aba99[_0x51df1e(0x289)]},_0x5c9ebf+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)];if(config[_0x51df1e(0x20e)]==_0x51df1e(0x21a))_0x4c2bf2+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)]*_0x21687d['eur'],_0x3e6d83+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)]*_0x21687d['usd'];else{if(config['basecoin']==_0x51df1e(0x271)||config[_0x51df1e(0x20e)]==_0x51df1e(0x29d)||config['basecoin']=='USDC')_0x4c2bf2+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)]*_0x21687d[_0x51df1e(0x28b)]/_0x21687d[_0x51df1e(0x292)],_0x3e6d83+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)];else config[_0x51df1e(0x20e)]=='EUR'&&(_0x4c2bf2+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99[_0x51df1e(0x2b4)],_0x3e6d83+=_0x1aba99[_0x51df1e(0x289)]*_0x1aba99['startnumber']*_0x21687d['usd']/_0x21687d[_0x51df1e(0x28b)]);}_0x4753c6++;}});let _0x595a6b={'basecoin':_0x5c9ebf,'eur':_0x4c2bf2,'usd':_0x3e6d83,'coins':_0x5a1e11};if(_0x15b099)proxyEmit(_0x343665(0x231),_0x595a6b);return _0x595a6b;}function headlessMode(_0x4db0e1){const _0x420cbd=_0x54b9c5;let _0xd0f4a4=_0x4db0e1['portfolio'],_0x536b28=_0x4db0e1[_0x420cbd(0x28e)],_0x4361ce=[];for(let _0x198575 of _0xd0f4a4){if(_0x198575[_0x420cbd(0x2b6)]!=config['basecoin']){if(_0x198575['distribution']/_0x198575[_0x420cbd(0x247)]-0x1>=_0x536b28/0x64){if(_0x198575[_0x420cbd(0x2a2)])_0x4361ce['push'](_0x198575);}else{if(_0x198575['distribution']/_0x198575[_0x420cbd(0x247)]-0x1<=-_0x536b28/0x64){if(_0x198575[_0x420cbd(0x2a2)])_0x4361ce[_0x420cbd(0x282)](_0x198575);}}}}_0x4361ce[_0x420cbd(0x206)]>0x0&&placeOrder(_0x4361ce);}function symbolToCoin(_0x4a2ebb){const _0x2284c4=_0x54b9c5;let _0x163d70;if(_0x4a2ebb[_0x2284c4(0x298)]('/'+config[_0x2284c4(0x20e)]))_0x163d70=_0x4a2ebb[_0x2284c4(0x280)]('/'+config[_0x2284c4(0x20e)],'');if(_0x4a2ebb[_0x2284c4(0x298)](config[_0x2284c4(0x20e)]+'/'))_0x163d70=_0x4a2ebb[_0x2284c4(0x280)](config['basecoin']+'/','');return _0x163d70;}async function validateOrders(_0x567289=0x0){const _0xf3c535=_0x54b9c5;let _0x189afe=[],_0x1803e4=config[_0xf3c535(0x2e3)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xf3c535(0x284)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xf3c535(0x1e7)](_0x333a3f=>{const _0x3c706a=_0xf3c535;let _0x568c0b=previousCoins[_0x3c706a(0x256)](_0x5994a5=>_0x5994a5[_0x3c706a(0x2b6)]==symbolToCoin(_0x333a3f['symbol'])),_0x38368c=currentCoins[_0x3c706a(0x256)](_0x1da054=>_0x1da054[_0x3c706a(0x2b6)]==symbolToCoin(_0x333a3f[_0x3c706a(0x24c)])),_0x2a47bc,_0x37dcef;_0x333a3f['side']==_0x3c706a(0x2d5)&&!_0x333a3f[_0x3c706a(0x2cb)]||_0x333a3f[_0x3c706a(0x2ad)]==_0x3c706a(0x286)&&_0x333a3f[_0x3c706a(0x2cb)]?(_0x2a47bc=_0x568c0b[_0x3c706a(0x2d9)]+0.9*_0x333a3f[_0x3c706a(0x2c5)],_0x37dcef=_0x568c0b['number']+1.1*_0x333a3f['filled']):(_0x2a47bc=_0x568c0b[_0x3c706a(0x2d9)]-1.1*_0x333a3f[_0x3c706a(0x2c5)],_0x37dcef=_0x568c0b['number']-0.9*_0x333a3f['filled']);const _0x2f6754=_0x333a3f[_0x3c706a(0x2c5)]!=0x0&&_0x38368c[_0x3c706a(0x2d9)]>=_0x2a47bc&&_0x38368c[_0x3c706a(0x2d9)]<=_0x37dcef;_0x189afe['push'](_0x2f6754);if(_0x2f6754&&config[_0x3c706a(0x2e3)]!=_0x3c706a(0x2dd)){if(_0x333a3f['reverse'])logHistory(_0x3c706a(0x2b9),_0x3c706a(0x2bd)+_0x333a3f[_0x3c706a(0x24c)]+'\x20'+_0x333a3f[_0x3c706a(0x2ad)]+'\x20#'+formatResult(_0x333a3f[_0x3c706a(0x2c5)]/_0x333a3f[_0x3c706a(0x237)],0x8)+'\x20@'+formatResult(_0x333a3f['price'],0x8));else logHistory(_0x3c706a(0x2b9),'Order\x20filled:\x20'+_0x333a3f[_0x3c706a(0x24c)]+'\x20'+_0x333a3f[_0x3c706a(0x2ad)]+'\x20#'+formatResult(_0x333a3f['filled'],0x8)+'\x20@'+formatResult(_0x333a3f[_0x3c706a(0x237)],0x8));}}),_0x189afe[_0xf3c535(0x1e7)]((_0x4eb090,_0x1ee92d)=>{const _0x502ac3=_0xf3c535;if(_0x4eb090)lastOrders[_0x502ac3(0x221)](_0x1ee92d,0x1);});if(_0x567289<_0x1803e4&&_0x189afe[_0xf3c535(0x298)](![])){if(_0x567289==0x0){config[_0xf3c535(0x2e3)]==_0xf3c535(0x2dd)?logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0xf3c535(0x1ff),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x567289);},0xa*0x3e8);}else{(_0x567289==0x1||_0x567289==Math['round'](_0x1803e4/0x2)||_0x567289==_0x1803e4-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x567289);},validateOrderInterval);}}else{lockOrders=![];if(_0x567289>0x0&&!_0x189afe[_0xf3c535(0x298)](![]))config[_0xf3c535(0x2e3)]==_0xf3c535(0x2dd)?logHistory(_0xf3c535(0x27e),_0xf3c535(0x2ce)):logHistory(_0xf3c535(0x27e),_0xf3c535(0x23f));else _0x567289>0x0&&_0x189afe[_0xf3c535(0x298)](![])&&(config[_0xf3c535(0x2e3)]==_0xf3c535(0x2dd)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0xf3c535(0x2b0)](_0x1803e4*validateOrderInterval/0xea60)+_0xf3c535(0x294)):(lastOrders[_0xf3c535(0x1e7)](async _0x28e5f3=>{const _0x4caeb2=_0xf3c535;try{const _0x48b752=await exchange[_0x4caeb2(0x285)](_0x28e5f3[_0x4caeb2(0x1ed)],_0x28e5f3[_0x4caeb2(0x24c)]);}catch(_0x192a89){if(_0x192a89['toString']()[_0x4caeb2(0x298)](_0x4caeb2(0x204))){}else await handleError(_0x192a89,_0x4caeb2(0x1ee));}}),logHistory(_0xf3c535(0x27e),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0xf3c535(0x2b0)](_0x1803e4*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x1d715c=_0x54b9c5;dbCoinResults[_0x1d715c(0x209)](_0x1d715c(0x293))[_0x1d715c(0x224)]()[_0x1d715c(0x225)]();let _0x493e23=await getStartingBalances(![]);_0x493e23[_0x1d715c(0x293)][_0x1d715c(0x1e7)](_0xd1bc0e=>{const _0x4af00f=_0x1d715c,_0x12e679=_0xd1bc0e['symbol'][_0x4af00f(0x298)](config[_0x4af00f(0x20e)]+'/');if(_0xd1bc0e[_0x4af00f(0x2b6)]!=config[_0x4af00f(0x20e)]){let _0x35e2a3={'coin':_0xd1bc0e[_0x4af00f(0x2b6)],'number':_0xd1bc0e['number'],'breakeven':_0xd1bc0e[_0x4af00f(0x237)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4af00f(0x209)](_0x4af00f(0x293))[_0x4af00f(0x282)](_0x35e2a3)[_0x4af00f(0x225)]();}});}async function updateCoinResults(_0x26a7b1){const _0x11db0d=_0x54b9c5;let _0xbf842d,_0x2c86ab,_0x2bda9b,_0x2155d1,_0x58af4f,_0x28742b,_0xd8d372=dbCoinResults['get'](_0x11db0d(0x293))['find']({'coin':_0x26a7b1[_0x11db0d(0x2b6)]})[_0x11db0d(0x2e2)]();if(!_0xd8d372)return;if(_0x26a7b1[_0x11db0d(0x234)]&&_0x26a7b1[_0x11db0d(0x234)]['currency']==config[_0x11db0d(0x20e)])_0xbf842d=_0x26a7b1[_0x11db0d(0x234)][_0x11db0d(0x2e0)];else{if(_0x26a7b1[_0x11db0d(0x234)]&&_0x26a7b1['fee'][_0x11db0d(0x2ca)]=='BNB')_0xbf842d=_0x26a7b1[_0x11db0d(0x234)][_0x11db0d(0x2e0)]*global[_0x11db0d(0x1fd)][_0x11db0d(0x1f6)+config[_0x11db0d(0x20e)]];else _0xbf842d=0.001*_0x26a7b1[_0x11db0d(0x2c5)];}const _0x4b8f3b=_0x26a7b1[_0x11db0d(0x24c)][_0x11db0d(0x298)](config[_0x11db0d(0x20e)]+'/');_0x4b8f3b&&(_0x28742b={'coin':_0x26a7b1[_0x11db0d(0x2b6)],'symbol':_0x26a7b1[_0x11db0d(0x24c)],'filled':_0x26a7b1[_0x11db0d(0x2c5)]*_0x26a7b1[_0x11db0d(0x237)],'side':_0x26a7b1[_0x11db0d(0x2ad)]==_0x11db0d(0x286)?_0x11db0d(0x2d5):_0x11db0d(0x286),'price':0x1/_0x26a7b1[_0x11db0d(0x237)]},_0x26a7b1={..._0x28742b});_0x26a7b1['side']==_0x11db0d(0x2d5)?_0x2bda9b=(_0xd8d372[_0x11db0d(0x259)]*_0xd8d372[_0x11db0d(0x2d9)]+_0x26a7b1[_0x11db0d(0x237)]*_0x26a7b1[_0x11db0d(0x2c5)])/(_0xd8d372['number']+_0x26a7b1[_0x11db0d(0x2c5)]):_0x2bda9b=(_0xd8d372[_0x11db0d(0x259)]*_0xd8d372[_0x11db0d(0x2d9)]-_0x26a7b1[_0x11db0d(0x237)]*_0x26a7b1[_0x11db0d(0x2c5)])/(_0xd8d372['number']-_0x26a7b1[_0x11db0d(0x2c5)]);_0x26a7b1[_0x11db0d(0x2ad)]==_0x11db0d(0x2d5)?_0x2155d1=_0xd8d372[_0x11db0d(0x240)]:_0x2155d1=_0xd8d372['realized']+(_0x26a7b1['price']-_0xd8d372[_0x11db0d(0x259)])*_0x26a7b1[_0x11db0d(0x2c5)];_0x2c86ab=_0x26a7b1[_0x11db0d(0x2ad)]==_0x11db0d(0x286)?_0xd8d372[_0x11db0d(0x2d9)]-_0x26a7b1['filled']:_0xd8d372[_0x11db0d(0x2d9)]+_0x26a7b1[_0x11db0d(0x2c5)],_0x58af4f=(_0x26a7b1[_0x11db0d(0x237)]-_0x2bda9b)*_0x2c86ab;let _0x3385fb={'coin':_0x26a7b1[_0x11db0d(0x2b6)],'number':_0x2c86ab,'breakeven':formatResult(_0x2bda9b,0x8),'realized':formatResult(_0x2155d1,0x8),'unrealized':formatResult(_0x58af4f,0x8),'fees':formatResult(_0xd8d372['fees']+_0xbf842d,0x8),'sells':_0x26a7b1[_0x11db0d(0x2ad)]=='sell'?_0xd8d372[_0x11db0d(0x2ac)]+0x1:_0xd8d372[_0x11db0d(0x2ac)],'buys':_0x26a7b1[_0x11db0d(0x2ad)]==_0x11db0d(0x2d5)?_0xd8d372['buys']+0x1:_0xd8d372['buys']};dbCoinResults[_0x11db0d(0x209)](_0x11db0d(0x293))[_0x11db0d(0x256)]({'coin':_0x26a7b1['coin']})[_0x11db0d(0x2bb)](_0x3385fb)[_0x11db0d(0x225)]();}async function placeOrder(_0x252d12){const _0x4f6510=_0x54b9c5,_0x15861e=config[_0x4f6510(0x2e3)]==_0x4f6510(0x2dd)?_0x4f6510(0x2dd):_0x4f6510(0x22b);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x4f6510(0x205)](JSON[_0x4f6510(0x242)](currentCoins));for(const _0x2a5746 of _0x252d12){let _0x5e6d43,_0x31fc41,_0x437ec8,_0x42ff7e,_0x4551ea,_0xc0ef86=_0x2a5746[_0x4f6510(0x24c)];try{const _0x195265=await exchange['fetchTickers'](_0xc0ef86),_0x50e6bb=_0x195265[_0xc0ef86];_0x5e6d43=_0x50e6bb['last'],_0x31fc41=_0x50e6bb[_0x4f6510(0x2e4)],_0x437ec8=_0x50e6bb[_0x4f6510(0x2d1)];_0x2a5746['reverse']?(_0x42ff7e=_0x2a5746['side']==_0x4f6510(0x2d5)?'sell':_0x4f6510(0x2d5),_0x4551ea=Math[_0x4f6510(0x276)](_0x2a5746[_0x4f6510(0x23e)])/_0x5e6d43):(_0x42ff7e=_0x2a5746[_0x4f6510(0x2ad)],_0x4551ea=Math[_0x4f6510(0x276)](_0x2a5746[_0x4f6510(0x23e)]));_0x15861e=='limit'&&(config['ordertype']=='limit-high'&&(_0x5e6d43=_0x42ff7e==_0x4f6510(0x2d5)?_0x31fc41:_0x437ec8),config[_0x4f6510(0x2e3)]==_0x4f6510(0x233)&&(_0x5e6d43=_0x42ff7e=='buy'?_0x437ec8:_0x31fc41));_0x4551ea=formatResult(_0x4551ea,0x8),_0x5e6d43=formatResult(_0x5e6d43,0x8);const _0x4a6e04=await exchange[_0x4f6510(0x217)](_0xc0ef86,_0x15861e,_0x42ff7e,_0x4551ea,_0x5e6d43);lastOrders['push']({'orderId':_0x4a6e04['id'],'symbol':_0xc0ef86,'side':_0x42ff7e,'reverse':_0x2a5746[_0x4f6510(0x2cb)],'amount':_0x2a5746['reverse']?_0x4a6e04[_0x4f6510(0x244)]*_0x4a6e04[_0x4f6510(0x237)]:_0x4a6e04['amount'],'filled':_0x2a5746[_0x4f6510(0x2cb)]?_0x4a6e04[_0x4f6510(0x2c5)]*_0x4a6e04['price']:_0x4a6e04[_0x4f6510(0x2c5)],'price':_0x4a6e04[_0x4f6510(0x237)]});const _0x454add=_0x42ff7e==_0x4f6510(0x286)?config[_0x4f6510(0x216)]?String[_0x4f6510(0x21f)]('0x'+config['emojisell'])+'\x20':'':config[_0x4f6510(0x1e8)]?String[_0x4f6510(0x21f)]('0x'+config[_0x4f6510(0x1e8)])+'\x20':'',_0x59a45d=_0x15861e==_0x4f6510(0x2dd)?_0x4f6510(0x281):config[_0x4f6510(0x2e3)]=='limit-high'?_0x4f6510(0x1f3):_0x4f6510(0x1d8);if(_0x15861e=='market')logHistory(_0x4f6510(0x2b9),''+_0x454add+_0x59a45d+'\x20order:\x20'+_0xc0ef86+'\x20'+_0x42ff7e+'\x20#'+formatResult(_0x4a6e04[_0x4f6510(0x2c5)],0x8)+'\x20@'+formatResult(_0x4a6e04['price'],0x8));else logHistory('order',''+_0x454add+_0x59a45d+_0x4f6510(0x2ba)+_0xc0ef86+'\x20'+_0x42ff7e+'\x20#'+formatResult(_0x4a6e04[_0x4f6510(0x244)],0x8)+'\x20@'+formatResult(_0x4a6e04[_0x4f6510(0x237)],0x8));_0x4a6e04[_0x4f6510(0x2b6)]=_0x2a5746['coin'],await updateCoinResults(_0x4a6e04);if(config[_0x4f6510(0x2b1)]!=0x0){let _0x10307c=null;if(cooldownTracker[_0x4f6510(0x206)]==config[_0x4f6510(0x2b1)]-0x1)_0x10307c=cooldownTracker[_0x4f6510(0x1f7)]();const _0x46a68f=getTimeStamp();cooldownTracker[_0x4f6510(0x282)](_0x46a68f);if(_0x10307c){const _0x56d312=fns['differenceInSeconds'](new Date(_0x46a68f),new Date(_0x10307c));_0x56d312<cooldownInterval&&(logHistory('error',_0x4f6510(0x297)+config['cooldown']+_0x4f6510(0x201)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4f6510(0x1e4)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xcfae48){if(_0xcfae48['toString']()[_0x4f6510(0x298)](_0x4f6510(0x1fa)))logHistory(_0x4f6510(0x1ff),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0xc0ef86);else{if(_0xcfae48[_0x4f6510(0x1f5)]()[_0x4f6510(0x298)](_0x4f6510(0x290)))logHistory('error',_0x4f6510(0x22f)+_0xc0ef86);else await handleError(_0xcfae48,_0x4f6510(0x22c));}}}if(lastOrders[_0x4f6510(0x206)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x4f6510(0x2e3)]==_0x4f6510(0x2dd)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x4f6510(0x1ff),_0x4f6510(0x200)));else coolingDown&&(!config[_0x4f6510(0x2da)]&&logHistory(_0x4f6510(0x1ff),_0x4f6510(0x2ae)));}}function logHistory(_0x4ff3da,_0x4a8ee4,_0x5010bf=''){const _0x2671cc=_0x54b9c5;let _0x4663ea={'time':getTimeStamp(),'type':_0x4ff3da,'event':_0x4a8ee4,'botname':config[_0x2671cc(0x268)],'showname':config[_0x2671cc(0x2e5)]};dbLogs['get'](_0x2671cc(0x266))['push'](_0x4663ea)[_0x2671cc(0x225)]();if(_0x5010bf=='')_0x5010bf=_0x4a8ee4;proxyEmit(_0x2671cc(0x1e3),{'log':_0x4663ea,'summary':_0x5010bf}),process[_0x2671cc(0x1f4)]({'telegram':_0x4663ea},_0x43b79e=>{}),logging(''+_0x4663ea[_0x2671cc(0x1e3)]);}function emitHistory(_0x5eadf3={}){const _0x48d0e1=_0x54b9c5;Object['keys'](_0x5eadf3)['length']==0x0&&(_0x5eadf3={'type':[_0x48d0e1(0x2b9),'event'],'event':'','page':0x1});if(_0x5eadf3[_0x48d0e1(0x29e)]['includes'](_0x48d0e1(0x1e3)))_0x5eadf3[_0x48d0e1(0x29e)][_0x48d0e1(0x221)](_0x5eadf3[_0x48d0e1(0x29e)][_0x48d0e1(0x27a)](_0x48d0e1(0x1e3)),0x1,_0x48d0e1(0x1ff),_0x48d0e1(0x27e));if(dbLogs[_0x48d0e1(0x23c)](_0x48d0e1(0x266))[_0x48d0e1(0x2e2)]()){let _0x4947e0=dbLogs[_0x48d0e1(0x209)](_0x48d0e1(0x266))[_0x48d0e1(0x2ab)](_0x47da0c=>{const _0x52be6b=_0x48d0e1;if(_0x5eadf3[_0x52be6b(0x29e)][_0x52be6b(0x206)]==0x0)return![];else return _0x5eadf3[_0x52be6b(0x29e)]['includes'](_0x47da0c['type']);})[_0x48d0e1(0x2ab)](_0x2ae213=>{const _0x5546a4=_0x48d0e1;if(_0x5eadf3['event']=='')return!![];else return _0x2ae213[_0x5546a4(0x1e3)][_0x5546a4(0x277)]()['includes'](_0x5eadf3['event'][_0x5546a4(0x277)]());})[_0x48d0e1(0x235)](_0x48d0e1(0x261)),_0x5cb1a4=_0x4947e0['value']()[_0x48d0e1(0x206)];_0x4947e0=_0x4947e0[_0x48d0e1(0x2cb)]()[_0x48d0e1(0x249)]((_0x5eadf3[_0x48d0e1(0x29a)]-0x1)*logPageSize,_0x5eadf3[_0x48d0e1(0x29a)]*logPageSize-0x1)[_0x48d0e1(0x2cb)]()[_0x48d0e1(0x2e2)](),proxyEmit(_0x48d0e1(0x20d),{'logs':_0x4947e0,'total':_0x5cb1a4});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x1f9232){const _0x14b4db=_0x54b9c5,_0x23952c=new Date()[_0x14b4db(0x203)]();if(!lastBotPause)lastBotPause=new Date()[_0x14b4db(0x203)](),consecutivePauses=0x1;else{if(_0x23952c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x14b4db(0x1f4)]({'stop':_0x14b4db(0x264)},_0x3145d2=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x14b4db(0x203)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error',_0x14b4db(0x20a)+consecutivePauses+')'),await sleep(_0x1f9232),botPaused=![],reset();}}async function handleError(_0xb62e9d,_0x50dbee,_0x51aa25=''){const _0xa59161=_0x54b9c5;if(_0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)](_0xa59161(0x2c6)))logHistory('error',_0x50dbee+_0xa59161(0x239)),await pauseBot(pauseBotInterval);else{if(_0xb62e9d[_0xa59161(0x1f5)]()['includes']('ExchangeNotAvailable'))logHistory(_0xa59161(0x1ff),_0x50dbee+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)](_0xa59161(0x2a0)))logHistory(_0xa59161(0x1ff),_0x50dbee+_0xa59161(0x25b)),await pauseBot(pauseBotInterval);else{if(_0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)](_0xa59161(0x1fc)))logHistory(_0xa59161(0x1ff),_0x50dbee+_0xa59161(0x283)),logHistory('error',_0xa59161(0x272)),process[_0xa59161(0x1f4)]({'stop':_0xa59161(0x208)},_0x2a7f2c=>{});else{if(_0xb62e9d['toString']()[_0xa59161(0x298)](_0xa59161(0x236)))logHistory(_0xa59161(0x1ff),_0x50dbee+_0xa59161(0x258)),logHistory('error',_0xa59161(0x272)),process[_0xa59161(0x1f4)]({'stop':_0xa59161(0x208)},_0x273240=>{});else{if(_0xb62e9d[_0xa59161(0x1f5)]()['includes'](_0xa59161(0x215)))logHistory(_0xa59161(0x1ff),_0x50dbee+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0xa59161(0x1ff),_0xa59161(0x272)),process[_0xa59161(0x1f4)]({'stop':'kill'},_0x570194=>{});else{if(_0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x50dbee+_0xa59161(0x254)),logHistory(_0xa59161(0x1ff),_0xa59161(0x272)),process[_0xa59161(0x1f4)]({'stop':'kill'},_0x5c3c7a=>{});else{if(_0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)]('InvalidNonce'))logHistory(_0xa59161(0x1ff),_0x50dbee+_0xa59161(0x2d8)),await pauseBot(pauseBotInterval),process[_0xa59161(0x1f4)]({'stop':_0xa59161(0x264)},_0x234f5c=>{});else _0xb62e9d[_0xa59161(0x1f5)]()[_0xa59161(0x298)](_0xa59161(0x262))?logHistory('error',_0x50dbee+_0xa59161(0x295)):(logHistory('error',_0x50dbee+_0xa59161(0x245)),logging(_0x50dbee+_0xa59161(0x1de),_0xb62e9d),await pauseBot(pauseBotInterval));}}}}}}}}function _0x1b1f(){const _0x47e015=['initws()','sort','filled','DDoSProtection','entries','fetchTickers','BTC/EUR','currency','reverse','total','parseISO','Order(s)\x20validated\x20-\x20balancing\x20resumed','2255170ysFRNQ','loadMarkets','ask','getSeconds','add','split','buy','27417lHovfu','configuration','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','number','headless','orderStatus','FILLED','market','loadSymbols()','args','cost','1017926JBWllm','value','ordertype','bid','showname','kline','min','closeWs','Limit\x20(low-margin)','padStart','last','\x20-\x20','performance','max','\x20|\x20Error\x20details:\x20','yyyy/MM/dd\x20HH:mm:ss','data','wsKey','availableBalance','event','\x20hour','apiSecret','LIMIT','forEach','emojibuy','distribution','\x20>\x20','date','version','orderId','cancelOrder()','wsMarket','accumulatedQuantity','2049921fbpbXQ','BTC/USDT','Limit\x20(high-margin)','send','toString','BNB','shift','apiKey','coin-loading-progress','MIN_NOTIONAL','getMonth','API-key\x20format\x20invalid','ticker','isArray','error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20orders\x20in\x20less\x20than\x20','binance','getTime','OrderNotFound','parse','length','test','kill','get','Pausing\x20bot\x20for\x205\x20minutes\x20(','wss://stream.binance.us:9443','bb-secure.json','event-history','basecoin','HOT/EUR','bot-','botID','cancel','function','fetchBalance','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','emojisell','createOrder','close','getPortfolio','BTC','001','getFullYear',',\x20must\x20be\x20a\x203\x20digit\x20number','219430nKJLdn','fromCodePoint','24VpbBJT','splice','eachDayOfInterval','504080AssFTO','remove','write','DAI/','getDate','-events.json','wss://stream.binance.com:9443','differenceInCalendarDays','limit','placeOrder()','storeHeadless','cancelLoading','Order\x20amount\x20is\x20invalid:\x20',')\x20|\x20Error\x20details:\x20','starting-balances','formattedMessage','limit-low','fee','sortBy','AuthenticationError','price','defaults','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','WebSockets(','lowdb','has','argv','trade','Order(s)\x20filled\x20-\x20balancing\x20resumed','realized','ccxt','stringify','storeConfiguration','amount','\x20|\x20Unknown\x20error\x20occured','2221768kXLYSC','target','limits','slice','getCoins()','settings','symbol','lowdb/adapters/FileSync','BTCBUSD','(((.+)+)+)+$','reduce','timeshift','./version.json','Binance\x20API\x20key\x20is\x20invalid','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','getStartingBalances','find','remainingSymbols','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','breakeven','reconnected','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','log','format','userData','executionReport','search','time','InsufficientFunds','sha256','restart','balances','logs','placeOrder','botname','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','keys','-results.json','secure','yyyy-MM-dd\x27T\x27HH:mm:ss','startdate','datetime','fetchOHLCV','BUSD','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','offset','asset','getFiat()','abs','toLowerCase','./config/','timestamp','indexOf','recreate','6wHKBKA','************','success','getHours','replace','Market','push','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','timeout','cancelOrder','sell',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','outboundAccountPosition','startprice','exchange','eur','subscribeSpotKline','existsSync','threshold','eventType','Invalid\x20quantity','BTCEUR','usd','coins','\x20minutes\x20-\x20balancing\x20resumed','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Binance\x20API\x20secret\x20is\x20invalid','Executed\x20','includes','running','page','delta','Bot\x20','USDT','type','date-fns','RequestTimeout','yyyy/MM/dd','valid','decrypt','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','bot','privateKey','bb-settings.json','BTCUSDT','spot','fetchOrders','filter','sells','side','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Crypt','round','cooldown','excluded','portfolio','startnumber','Error:\x20Invalid\x20argument\x20','coin','binanceus','message','order','\x20order:\x20','assign','progress','Order\x20filled:\x20','HOT/BTC','orderType',':\x20Bot\x20','getMinutes','60JYkSzH'];_0x1b1f=function(){return _0x47e015;};return _0x1b1f();}function formatResult(_0x3e8437,_0x519849){return parseFloat(_0x3e8437['toFixed'](_0x519849));}function logging(_0x2ce61b,_0xa184ef=''){const _0x1ea98b=_0x54b9c5;if(config[_0x1ea98b(0x2e5)])console[_0x1ea98b(0x25c)](getTimeStamp()+':\x20'+config[_0x1ea98b(0x268)]+_0x1ea98b(0x1ea)+_0x2ce61b,_0xa184ef);else console['log'](getTimeStamp()+_0x1ea98b(0x2c0)+botID+_0x1ea98b(0x1ea)+_0x2ce61b,_0xa184ef);}function getServerTime(){const _0x372a21=_0x54b9c5,_0x520bf1=new Date();return _0x520bf1[_0x372a21(0x21c)]()+'/'+(_0x520bf1['getMonth']()+0x1)[_0x372a21(0x1f5)]()[_0x372a21(0x1d9)](0x2,'0')+'/'+_0x520bf1[_0x372a21(0x227)]()['toString']()[_0x372a21(0x1d9)](0x2,'0')+'\x20'+_0x520bf1[_0x372a21(0x27f)]()[_0x372a21(0x1f5)]()[_0x372a21(0x1d9)](0x2,'0')+':'+_0x520bf1['getMinutes']()[_0x372a21(0x1f5)]()[_0x372a21(0x1d9)](0x2,'0')+':'+_0x520bf1[_0x372a21(0x2d2)]()['toString']()[_0x372a21(0x1d9)](0x2,'0');}function getTimeStamp(){const _0x2ac65a=_0x54b9c5,_0x3b911b=shiftedTime();return _0x3b911b['getFullYear']()+'/'+(_0x3b911b[_0x2ac65a(0x1fb)]()+0x1)['toString']()[_0x2ac65a(0x1d9)](0x2,'0')+'/'+_0x3b911b['getDate']()[_0x2ac65a(0x1f5)]()[_0x2ac65a(0x1d9)](0x2,'0')+'\x20'+_0x3b911b[_0x2ac65a(0x27f)]()[_0x2ac65a(0x1f5)]()[_0x2ac65a(0x1d9)](0x2,'0')+':'+_0x3b911b[_0x2ac65a(0x2c1)]()['toString']()[_0x2ac65a(0x1d9)](0x2,'0')+':'+_0x3b911b[_0x2ac65a(0x2d2)]()[_0x2ac65a(0x1f5)]()[_0x2ac65a(0x1d9)](0x2,'0');}function getDate(){const _0x3640d9=_0x54b9c5,_0x2d4a08=shiftedTime();return _0x2d4a08[_0x3640d9(0x21c)]()+'/'+(_0x2d4a08[_0x3640d9(0x1fb)]()+0x1)['toString']()[_0x3640d9(0x1d9)](0x2,'0')+'/'+_0x2d4a08[_0x3640d9(0x227)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x26b40b=_0x54b9c5,_0x41b437=shiftedTime();return _0x41b437['getHours']()['toString']()[_0x26b40b(0x1d9)](0x2,'0');}function sleep(_0x358890){return new Promise(_0x21619d=>setTimeout(_0x21619d,_0x358890));}function shiftedTime(){const _0x4fb498=_0x54b9c5,_0x2d1bf9=new Date();let _0x3704f2=_0x2d1bf9;if(config&&config['timeshift']!==0x0)_0x3704f2=fns[_0x4fb498(0x2d3)](_0x2d1bf9,{'hours':config[_0x4fb498(0x251)]});return _0x3704f2;}