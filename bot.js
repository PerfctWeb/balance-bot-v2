const _0x26a5b4=_0x3764;(function(_0x5e9629,_0x596150){const _0x253724=_0x3764,_0x2e69ee=_0x5e9629();while(!![]){try{const _0x35b0f7=parseInt(_0x253724(0x1d0))/0x1*(parseInt(_0x253724(0x27d))/0x2)+-parseInt(_0x253724(0x253))/0x3+-parseInt(_0x253724(0x231))/0x4*(-parseInt(_0x253724(0x14e))/0x5)+parseInt(_0x253724(0x154))/0x6*(-parseInt(_0x253724(0x128))/0x7)+-parseInt(_0x253724(0x280))/0x8*(-parseInt(_0x253724(0x19d))/0x9)+-parseInt(_0x253724(0x118))/0xa*(parseInt(_0x253724(0x1da))/0xb)+parseInt(_0x253724(0x11c))/0xc*(-parseInt(_0x253724(0x13c))/0xd);if(_0x35b0f7===_0x596150)break;else _0x2e69ee['push'](_0x2e69ee['shift']());}catch(_0x34f3c0){_0x2e69ee['push'](_0x2e69ee['shift']());}}}(_0x16cb,0x5f574));const _0x364104=function(){let _0x4377f1=!![];return function(_0x47849d,_0x4c5a71){const _0x228c15=_0x4377f1?function(){const _0x5a88fc=_0x3764;if(_0x4c5a71){const _0x4fa522=_0x4c5a71[_0x5a88fc(0x12a)](_0x47849d,arguments);return _0x4c5a71=null,_0x4fa522;}}:function(){};return _0x4377f1=![],_0x228c15;};}(),_0x1eb197=_0x364104(this,function(){const _0x94ba2d=_0x3764;return _0x1eb197[_0x94ba2d(0x17a)]()['search'](_0x94ba2d(0x198))[_0x94ba2d(0x17a)]()[_0x94ba2d(0x11a)](_0x1eb197)[_0x94ba2d(0x1a3)](_0x94ba2d(0x198));});_0x1eb197();'use strict';const ccxt=require(_0x26a5b4(0x1df))['pro'],low=require(_0x26a5b4(0x151)),FileSync=require(_0x26a5b4(0x19b)),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0x26a5b4(0x24d)],util=require('util'),argv=require(_0x26a5b4(0x267))(process[_0x26a5b4(0x1fb)][_0x26a5b4(0x236)](0x2))[_0x26a5b4(0x1fb)],path=require('path');let exchange;global[_0x26a5b4(0x211)]={},global[_0x26a5b4(0x232)]={};const exceptions={'binance':[_0x26a5b4(0x1cc),_0x26a5b4(0x13b),'XEM/BUSD',_0x26a5b4(0x135),'YOYOW/']},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x26a5b4(0x238)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'number':0x0,'average':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0xa*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require('./version.json')[_0x26a5b4(0x192)],botID=process[_0x26a5b4(0x1fb)][0x2]||_0x26a5b4(0x288),pattern=/^[0-9]{3}$/;!pattern[_0x26a5b4(0x171)](botID)&&(console[_0x26a5b4(0x223)]('Error:\x20Invalid\x20argument\x20'+botID+_0x26a5b4(0x123)),killBot());const userID=process[_0x26a5b4(0x1fb)][0x3]||'',configpath=userID?_0x26a5b4(0x1bb)+userID+'/':_0x26a5b4(0x1bb),logspath=userID?'./logs/'+userID+'/':_0x26a5b4(0x25e),loggerfile=fs[_0x26a5b4(0x140)](logspath+_0x26a5b4(0x1d6),{'flags':'a'});!fs[_0x26a5b4(0x12c)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x26a5b4(0x12c)](logspath)&&fs[_0x26a5b4(0x1c7)](logspath);const configfile=configpath+_0x26a5b4(0x168)+botID+_0x26a5b4(0x1d5),logfile=configpath+_0x26a5b4(0x168)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x26a5b4(0x168)+botID+_0x26a5b4(0x17b),settingsfile=configpath+_0x26a5b4(0x200),securefile=configpath+_0x26a5b4(0x1c2),configbackuppath=configpath+_0x26a5b4(0x25a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x26a5b4(0x1ed)]({'logs':[],'version':serverversion})[_0x26a5b4(0x162)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x26a5b4(0x1ed)]({'data':[],'version':serverversion})[_0x26a5b4(0x162)]();function _0x16cb(){const _0x490c2d=['exchange','Ascendex','unlinkSync','string','getMinutes','trade','\x20has\x20a\x2024h\x20drop\x20of\x20','parseISO','338206AGXgsD','filter','clientOrderId','8SSZhUw','Coinex','fetchOpenOrders','exchanges','botname','1\x20-\x20FILLED:\x20','yyyy/MM/dd','API-key\x20format\x20invalid','001','showname','last','startnumber','shift','watchTransactions','concat','fetchBalance','EUR','filled','page','getStartingBalances','%\x20(','132970SryfiK','\x20|\x20lock\x20orders:\x20','constructor','startprice','24bRGIyP','Binancecoinm','Resetting\x20bot\x20history','logs','timeout','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Net\x20effect',',\x20must\x20be\x20a\x203\x20digit\x20number','InvalidNonce','Invalid\x20quantity','\x20API\x20secret\x20is\x20invalid','stringify','7DqTFWw','enabled','apply','findIndex','existsSync','balances','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','-------------------------------\x0a','sort','Bitget','Reset\x20|\x20','none','Bittrex','NANO/','padStart','added','timer:','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','forEach','HOT/BTC','1657240ZbThAo','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','-performance.json','getFullYear','createWriteStream','keys','net-basecoin','headless','breakeven','bid','data','join','fees','splice','reverse','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','delta','\x20orders\x20in\x20less\x20than\x20','85qbQXSb',':\x20Bot\x20','1\x20-\x20Validate\x20orders:\x20','lowdb','includes','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','1328964DMLcCq','sendPortfolioTelegram','orderId','Cex','rightTxt','1\x20-\x20Handle\x20open\x20orders','message','cancel','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','initclient','\x20>\x20','limit-low','length','usd','write','bot','Fees\x20|\x20currency:\x20','configuration-stored','Idex','settings','bot-','\x20not\x20available','limit-high','Limit\x20(high-margin)','final','running','Cryptocom','createOrder','orderstatus','test','\x20API\x20key\x20is\x20invalid','simple','liquidity','getDate','sell','2.3.5','\x20|\x20','<pre>','toString','-results.json','portfolio','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','BNB','cancelOrders()','price','UNLOCKING','restart','entries','value','number','0\x20-\x20EXECUTION:\x20','abs','threshold','secure','padEnd','timeshift','target','ordertype','storeFiat','Fee\x20discount\x20refund\x20detected:\x20','privateKey','fetchClosedOrders','version','total','error','recovery','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','canceled','(((.+)+)+)+$','excluded','percentage','lowdb/adapters/FileSync','apiSecret','831501PSMOAq','AuthenticationError','RequestTimeout','substring','buys','set','search','symbol','emojisell','event','removed','ExchangeNotAvailable','cost','Executed\x20','loadSymbols()','toFixed','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.0','getMonth','loading-canceled','replace','buy','Okcoin','no\x20open\x20orders','type','change24h','\x20minutes','split','coin','assign','./config/','success','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','-events.json','netoffset','\x20order:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','bb-secure.json','map','LOCKED','Huobi','min','mkdirSync','fromCodePoint','net-fiat','remove','loadMarkets','DAI/','valid','error\x20while\x20deleting\x20files:\x20','Manual\x20balancing\x20required','1REkCUu','toUpperCase','ETH','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','************','-config.json','/output-000.log','precision','Portfolio\x20change\x20detected:\x20','Order(s)\x20filled\x20-\x20','55igQFjU','uncaughtException','\x20API\x20blocked\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','close','cloneDeep','ccxt','Limit\x20(low-margin)','Bybit','debug','milliseconds','Okx','Bot\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Pausing\x20for\x20','side','Hollaex','decrypt','changes','Failed\x20to\x20load\x20coin\x20data\x20for\x20','defaults','random','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','apiKey','remainingSymbols','cooldown','progress','initial','closed','2\x20-\x20FILLED\x20known\x20order:\x20','cancelOrder','startdate','datetime','offset','argv','getHours','amount','fetchTickers','<b>','bb-settings.json','has','***','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Bitmart','coin-loading-progress','balancing\x20resumed','.json','fetchTicker','Order(s)\x20validated\x20-\x20','open','customId','USD','2\x20-\x20Handled\x20open\x20orders','differenceInSeconds','order','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','ticker','BNB/','warning','Market','getCoins()','emitHistory','getOpenOrders()','status','performance','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','deleteHistoryAlerts','Order\x20filled:\x20','recreateCoinResults()','args','market','realized','push','BTC','log','1\x20-\x20Unlock\x20orders','2.5.0','/USD','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','indexOf','botID','yyyy-MM-dd\x27T\x27HH:mm:ss','average','function','USDT','<b>Bot\x20','\x20metrics:</b>\x20\x0a\x0a','fee','165208PetxtN','change','balancing\x20resumes\x20when\x20cooldown\x20ends','currency','configuration','slice','Binance','UNLOCKED','full','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','basecoin','toggleBotMode','Bitfinex2','2\x20-\x20Validate\x20orders:\x20','\x20-\x20bot\x20not\x20started','format','ongoing','/EUR','Binanceus','parse','DDoSProtection','Kucoin','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','leftTxt','emojibuy','watchOrders','getTime','get','Crypt','timestamp','coins','send','eur','time','90513etfIkI','openOrders','symbols','limit','\x20>\x20[DEBUG]\x20','distribution','event-history','/backup/','\x20minutes\x20-\x20','round','</pre>','./logs/','RSA-OAEP','Gate','add','starting-balances','resetHistory','Coinbaseprime','Transaction\x20detection\x20unblocked','find','yargs/yargs','limits','toLowerCase','sells','sha256','max','Gateio','fiat','watchTrades','Mexc','date','sortBy','exec','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'];_0x16cb=function(){return _0x490c2d;};return _0x16cb();}const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x26a5b4(0x1ed)]({'bot':[],'version':serverversion})[_0x26a5b4(0x162)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x26a5b4(0x1ed)]({'coins':[],'version':serverversion})[_0x26a5b4(0x162)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x26a5b4(0x26b),'rsaStandard':_0x26a5b4(0x25f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1ac7d5=>{const _0x5cf46b=_0x26a5b4;console[_0x5cf46b(0x223)](_0x1ac7d5);},'simple':_0xd4a395=>{const _0x39cb57=_0x26a5b4;console['log'](_0xd4a395),loggerfile[_0x39cb57(0x162)](util['format'](_0xd4a395)+'\x0a');},'full':async(_0x5bd2ee,_0x1509fa='')=>{const _0x436059=_0x26a5b4;let _0x410ac1;if(config[_0x436059(0x289)])_0x410ac1=getTimeStamp()+':\x20'+config[_0x436059(0x284)]+_0x436059(0x15e)+_0x5bd2ee;else _0x410ac1=getTimeStamp()+_0x436059(0x14f)+botID+_0x436059(0x15e)+_0x5bd2ee;console[_0x436059(0x223)](_0x410ac1),loggerfile[_0x436059(0x162)](util[_0x436059(0x240)](_0x410ac1)+'\x0a'),_0x1509fa&&(console[_0x436059(0x223)](_0x1509fa),loggerfile[_0x436059(0x162)](util[_0x436059(0x240)](_0x1509fa)+'\x0a'));},'debug':async(_0x2e36f1,_0x53d528='')=>{const _0x5608cf=_0x26a5b4;let _0x2c7ebb;if(config[_0x5608cf(0x289)])_0x2c7ebb=getTimeStamp()+':\x20'+config['botname']+_0x5608cf(0x257)+_0x2e36f1;else _0x2c7ebb=getTimeStamp()+_0x5608cf(0x14f)+botID+'\x20>\x20[DEBUG]\x20'+_0x2e36f1;if(debugging)console['log'](_0x2c7ebb);loggerfile[_0x5608cf(0x162)](util[_0x5608cf(0x240)](_0x2c7ebb)+'\x0a');if(_0x53d528){if(debugging)console[_0x5608cf(0x223)](_0x53d528);loggerfile[_0x5608cf(0x162)](util['format'](_0x53d528)+'\x0a');}}};process['on'](_0x26a5b4(0x1db),function(_0x1c327b){const _0xf0e68f=_0x26a5b4;logger[_0xf0e68f(0x173)](_0x1c327b);});settings[_0x26a5b4(0x18b)]!=config[_0x26a5b4(0x18b)]&&updateTimeshift(settings[_0x26a5b4(0x18b)]);process[_0x26a5b4(0x250)]({'started':_0x26a5b4(0x16d)},_0x1d2aa3=>{}),initializeProcessListeners();function proxyEmit(_0x510671,_0x42b519=null){const _0x2cc8a1=_0x26a5b4;process[_0x2cc8a1(0x250)]({'function':_0x510671,'args':_0x42b519},_0x22037e=>{});}function initializeProcessListeners(){const _0x1aabc7=_0x26a5b4;process['on'](_0x1aabc7(0x15a),_0x3875f9=>{const _0x4d5e1d=_0x1aabc7;switch(Object[_0x4d5e1d(0x141)](_0x3875f9)[0x0]){case _0x4d5e1d(0x18b):_0x3875f9[_0x4d5e1d(0x18b)]!=undefined&&(settings[_0x4d5e1d(0x18b)]=_0x3875f9[_0x4d5e1d(0x18b)],updateTimeshift(settings[_0x4d5e1d(0x18b)]));break;case _0x4d5e1d(0x22c):switch(_0x3875f9['function']){case _0x4d5e1d(0x15d):initclient();break;case _0x4d5e1d(0x23c):toggleBotMode();break;case _0x4d5e1d(0x216):emitHistory(_0x3875f9[_0x4d5e1d(0x21e)]);break;case _0x4d5e1d(0x21b):deleteHistoryAlerts(_0x3875f9[_0x4d5e1d(0x21e)]);break;case'getPortfolio':getPortfolio(_0x3875f9[_0x4d5e1d(0x21e)]);break;case'storeConfiguration':storeConfiguration(_0x3875f9['args']);break;case'storeHeadless':storeHeadless(_0x3875f9[_0x4d5e1d(0x21e)]);break;case _0x4d5e1d(0x18e):storeFiat(_0x3875f9[_0x4d5e1d(0x21e)]);break;case _0x4d5e1d(0x263):resetHistory();break;case _0x4d5e1d(0x116):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3875f9['args']);break;case'cancelLoading':cancelLoading();break;case'showConfig':showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4d5e1d(0x155):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x15dc31=null,_0x5492cb=![]){const _0x1280a2=_0x26a5b4;logger[_0x1280a2(0x1e2)](_0x1280a2(0x132)+(_0x15dc31!=null)+_0x1280a2(0x178)+_0x5492cb);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x5492cb)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config['apiKey']!=''&&config[_0x1280a2(0x1f0)]!=_0x1280a2(0x202)){await initExchange();let _0x6790c0=![];_0x6790c0=await loadSymbols();if(_0x6790c0){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x15dc31),exchangeStopped=![];if(lastOrders[_0x1280a2(0x160)]==0x0&&allOpenOrders[_0x1280a2(0x160)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x20d407=_0x26a5b4;exchangeStopped=!![],await exchange[_0x20d407(0x1dd)]();}async function reloadExchange(){const _0xea5cd2=_0x26a5b4;logger[_0xea5cd2(0x1e2)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0xea5cd2(0x238)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug']('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x295aaf=config['exchange'],_0x176b42=config['apiKey'],_0x4909e8=config[_0x26a5b4(0x19c)]){const _0x492142=_0x26a5b4;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x295aaf)&&(logHistory(_0x492142(0x194),_0x492142(0x15c)+_0x295aaf+'\x20exchange'),killBot());const _0x178aa0=ccxt[_0x295aaf[_0x492142(0x269)]()];exchange=new _0x178aa0({'apiKey':_0x176b42,'secret':_0x4909e8,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0xa8af3d=_0x26a5b4;let _0xc61c1b=config[_0xa8af3d(0x23b)]==_0xa8af3d(0x1d2)?_0xa8af3d(0x1d2):'BTC',_0x34b879=!allSymbols[_0xa8af3d(0x152)](_0xc61c1b+_0xa8af3d(0x226))?_0xa8af3d(0x22d):_0xa8af3d(0x20c),_0x58f32b=!allSymbols[_0xa8af3d(0x152)](_0xc61c1b+_0xa8af3d(0x242))?_0x34b879:'EUR';stablecoins={'eur':{'coin':''+_0xc61c1b+_0x58f32b,'symbol':_0xc61c1b+'/'+_0x58f32b},'usd':{'coin':''+_0xc61c1b+_0x34b879,'symbol':_0xc61c1b+'/'+_0x34b879}};}async function initwsCcxt(_0x9aa03f){const _0x1800af=_0x26a5b4;_0x9aa03f==null&&(_0x9aa03f=[],currentCoins[_0x1800af(0x13a)](_0x44759c=>{const _0x453d39=_0x1800af;if(_0x44759c[_0x453d39(0x1b9)]!=config['basecoin'])_0x9aa03f[_0x453d39(0x221)](_0x44759c['symbol']);}));if(!_0x9aa03f[_0x1800af(0x152)](stablecoins[_0x1800af(0x251)]['symbol']))_0x9aa03f['push'](stablecoins[_0x1800af(0x251)]['symbol']);if(!_0x9aa03f[_0x1800af(0x152)](stablecoins['usd']['symbol']))_0x9aa03f[_0x1800af(0x221)](stablecoins['usd']['symbol']);if(!_0x9aa03f[_0x1800af(0x152)]('BNB/'+config[_0x1800af(0x23b)]))_0x9aa03f[_0x1800af(0x221)](_0x1800af(0x212)+config[_0x1800af(0x23b)]);loadCoins(_0x9aa03f);const _0x57fb8d=async _0x390397=>{const _0x1f728f=_0x1800af,_0x1f7150=await exchange[_0x1f728f(0x208)](_0x390397);global[_0x1f728f(0x211)][noslash(_0x1f7150[_0x1f728f(0x1a4)])]=_0x1f7150[_0x1f728f(0x28a)];while(!![]){if(!botPaused)try{const _0x3c4c75=await exchange[_0x1f728f(0x26f)](_0x390397);global[_0x1f728f(0x211)][noslash(_0x3c4c75[0x0][_0x1f728f(0x1a4)])]=_0x3c4c75[0x0][_0x1f728f(0x180)],await sleep(0x3e8);}catch(_0x21be2d){if(!exchangeStopped)await handleError(_0x21be2d,_0x1f728f(0x26f),_0x390397);}else await sleep(0x3e8);}},_0x31a952=async _0x305c5b=>{const _0x22a90a=_0x1800af;while(!![]){if(!botPaused)try{const _0x2e2768=await exchange[_0x22a90a(0x208)](_0x305c5b);global[_0x22a90a(0x232)][_0x2e2768[_0x22a90a(0x1a4)]]=_0x2e2768[_0x22a90a(0x19a)],await sleep(0x3c*0x3e8);}catch(_0x54551a){if(!exchangeStopped)await handleError(_0x54551a,_0x22a90a(0x1fe),_0x305c5b);}else await sleep(0x3e8);}},_0x544243=async()=>{const _0x1a2878=_0x1800af;while(!![]){if(!botPaused)try{const _0x3a3a85=await exchange['watchOrders']();_0x3a3a85['forEach'](_0x34c3c9=>{updateNumberCoinsCcxt(_0x34c3c9);});}catch(_0x1a311b){if(!exchangeStopped)await handleError(_0x1a311b,_0x1a2878(0x24a));}else await sleep(0x3e8);}};_0x9aa03f[_0x1800af(0x13a)](async _0x1e6165=>{_0x57fb8d(_0x1e6165),_0x31a952(_0x1e6165);}),!wsEventsSet&&(wsEventsSet=!![],_0x544243(),watchTransactions());}async function watchTransactions(){const _0xa3a421=_0x26a5b4;transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection)try{const _0x48465d=await getCoins();let _0x1080c8=[];currentCoins[_0xa3a421(0x13a)](_0x496bc1=>{const _0x349fd5=_0xa3a421,_0x351461=_0x48465d[_0x349fd5(0x266)](_0x4de0a6=>_0x4de0a6['coin']==_0x496bc1[_0x349fd5(0x1b9)]);_0x351461&&(_0x496bc1[_0x349fd5(0x185)]!=_0x351461['number']&&_0x1080c8[_0x349fd5(0x221)]({'coin':_0x496bc1['coin'],'symbol':_0x496bc1[_0x349fd5(0x1a4)],'number':Number(formatResult(_0x351461['number']-_0x496bc1['number'],0x8))}));});if(_0x1080c8[_0xa3a421(0x160)]==0x1&&!blockTransactionDetection){logger['debug'](_0xa3a421(0x164)+lastFees[_0xa3a421(0x234)]+'\x20|\x20average:\x20'+lastFees[_0xa3a421(0x22b)]);if(!lastFees[_0xa3a421(0x234)]||_0x1080c8[0x0]['coin']!=lastFees[_0xa3a421(0x234)]||_0x1080c8[0x0][_0xa3a421(0x185)]>lastFees[_0xa3a421(0x22b)]){let _0x81a8aa;if(_0x1080c8[0x0][_0xa3a421(0x1b9)]!=config[_0xa3a421(0x23b)]){let _0x15aa03=global['ticker'][noslash(_0x1080c8[0x0][_0xa3a421(0x1a4)])];_0x81a8aa=_0x1080c8[0x0][_0xa3a421(0x14a)]?0x1/_0x15aa03:_0x15aa03;}else _0x81a8aa=0x1;_0x1080c8[0x0][_0xa3a421(0x180)]=_0x81a8aa,delete _0x1080c8[0x0][_0xa3a421(0x1a4)];let _0xcd421b=[],_0xed8b0d=[...config['liquidity']]||[],_0x573a1e=config[_0xa3a421(0x174)];_0xed8b0d[_0xa3a421(0x130)]((_0x1e7b26,_0x31e036)=>_0x1e7b26[_0xa3a421(0x271)]>_0x31e036[_0xa3a421(0x271)]?-0x1:_0x31e036[_0xa3a421(0x271)]>_0x1e7b26['date']?0x1:0x0);const _0x23648f=getDate();if(_0xed8b0d[0x0]){const _0x5731c1=fns[_0xa3a421(0x244)](_0xed8b0d[0x0][_0xa3a421(0x271)],_0xa3a421(0x286),new Date()),_0x5407f4=fns[_0xa3a421(0x244)](_0x23648f,_0xa3a421(0x286),new Date());if(fns['isEqual'](_0x5731c1,_0x5407f4)){_0xcd421b=_0xed8b0d[0x0][_0xa3a421(0x1eb)];const _0x349fd0=_0xcd421b[_0xa3a421(0x266)](_0x3e1a13=>_0x3e1a13[_0xa3a421(0x1b9)]==_0x1080c8[0x0][_0xa3a421(0x1b9)]);_0x349fd0?_0x349fd0[_0xa3a421(0x185)]+=_0x1080c8[0x0]['number']:_0xcd421b['push'](_0x1080c8[0x0]);const _0x4f133b=_0x573a1e[_0xa3a421(0x266)](_0x24bd75=>_0x24bd75['date']==_0x23648f);_0x4f133b[_0xa3a421(0x1eb)]=_0xcd421b;}else _0x573a1e[_0xa3a421(0x221)]({'date':_0x23648f,'changes':[_0x1080c8[0x0]]});}const _0x3bf6c6=_0x573a1e[_0xa3a421(0x266)](_0x48bbb9=>_0x48bbb9[_0xa3a421(0x271)]==_0x23648f);if(_0x3bf6c6){let _0x1569e6=!![];_0x3bf6c6[_0xa3a421(0x1eb)][_0xa3a421(0x13a)](_0x1fec8f=>{if(_0x1fec8f['number']!=0x0)_0x1569e6=![];}),_0x1569e6&&(_0x573a1e=_0x573a1e[_0xa3a421(0x27e)](_0x304f89=>{return _0x304f89['date']!=_0x23648f;}));}let _0x5e4d59=dbConfig[_0xa3a421(0x24c)]('bot')[_0xa3a421(0x266)]({'botID':botID})[_0xa3a421(0x184)]();_0x5e4d59&&(dbConfig[_0xa3a421(0x24c)](_0xa3a421(0x163))[_0xa3a421(0x266)]({'botID':botID})[_0xa3a421(0x1ba)]({'liquidity':_0x573a1e})[_0xa3a421(0x162)](),config['liquidity']=_0x573a1e),logHistory(_0xa3a421(0x1bc),_0xa3a421(0x1d8)+Math[_0xa3a421(0x187)](_0x1080c8[0x0][_0xa3a421(0x185)])+'\x20'+_0x1080c8[0x0]['coin']+'\x20'+(_0x1080c8[0x0][_0xa3a421(0x185)]>0x0?'added':_0xa3a421(0x1a7))+_0xa3a421(0x139)),proxyEmit(_0xa3a421(0x235),emittedConfiguration());}else logger[_0xa3a421(0x1e2)](_0xa3a421(0x18f)+Math[_0xa3a421(0x187)](_0x1080c8[0x0][_0xa3a421(0x185)])+'\x20'+_0x1080c8[0x0]['coin']+'\x20'+(_0x1080c8[0x0][_0xa3a421(0x185)]>0x0?_0xa3a421(0x137):_0xa3a421(0x1a7)));transactionDetected=!![],currentCoins=await getCoins();}await sleep(watchTransactionsInterval);}catch(_0x5942a3){if(!exchangeStopped)await handleError(_0x5942a3,_0xa3a421(0x28d));}else await sleep(0x3e8);}}async function loadSymbols(_0x7fdf2f=config[_0x26a5b4(0x275)]){const _0x25db38=_0x26a5b4;if(allSymbols)return!![];let _0x2370b6=![];try{markets=await exchange[_0x25db38(0x1cb)](),allSymbols=exchange[_0x25db38(0x255)][_0x25db38(0x27e)](_0x441b14=>{const _0x1c4aff=_0x25db38;let _0x9f83d9=![];const _0x473d38=exceptions[_0x7fdf2f[_0x1c4aff(0x269)]()]||[];return _0x473d38[_0x1c4aff(0x13a)](_0x586299=>{const _0x2a96e2=_0x1c4aff;if(_0x441b14[_0x2a96e2(0x152)](_0x586299))_0x9f83d9=!![];}),!_0x9f83d9;}),_0x2370b6=!![];}catch(_0x5392a5){_0x2370b6=![],handleError(_0x5392a5,'loadSymbols()');}return _0x2370b6;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0xc15ac0=_0x26a5b4;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0xc15ac0(0x283),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x52ef3a=getNormalizedPerformance();emitPerformance(_0x52ef3a),await getStartingBalances(_0x52ef3a);}async function toggleBotMode(){const _0x5ef8db=_0x26a5b4;let _0x4fa794=dbConfig[_0x5ef8db(0x24c)](_0x5ef8db(0x163))[_0x5ef8db(0x266)]({'botID':botID})[_0x5ef8db(0x184)]();if(_0x4fa794){const _0x2fe058=!_0x4fa794[_0x5ef8db(0x143)];dbConfig['get']('bot')[_0x5ef8db(0x266)]({'botID':botID})[_0x5ef8db(0x1ba)]({'headless':_0x2fe058})['write'](),config['headless']=_0x2fe058,proxyEmit(_0x5ef8db(0x235),emittedConfiguration()),updateBotManager();}}function _0x3764(_0x9c61a,_0x309862){const _0x3d6a99=_0x16cb();return _0x3764=function(_0x1eb197,_0x364104){_0x1eb197=_0x1eb197-0x114;let _0x16cb45=_0x3d6a99[_0x1eb197];return _0x16cb45;},_0x3764(_0x9c61a,_0x309862);}function updateBotManager(){const _0x14a6e8=_0x26a5b4;process[_0x14a6e8(0x250)]({'updatebotmanager':!![]},_0x32997c=>{});}async function loadCoins(_0x27fb23){const _0x19db13=_0x26a5b4;let _0x228a24,_0x41f0c0=0x0;loading['remainingSymbols']=[];let _0x104f36=0x0;_0x27fb23[_0x19db13(0x13a)](_0xe49540=>{const _0x3017db=_0x19db13;loading['remainingSymbols'][_0x3017db(0x221)](_0xe49540);}),loadingCanceled=![];let _0x50a486=![];while(_0x228a24!=_0x27fb23[_0x19db13(0x160)]){_0x228a24=0x0,_0x27fb23[_0x19db13(0x13a)](_0x383a83=>{const _0x46b874=_0x19db13;global[_0x46b874(0x211)][noslash(_0x383a83)]&&(loading['remainingSymbols']=loading[_0x46b874(0x1f1)][_0x46b874(0x27e)](_0x181208=>_0x181208!=_0x383a83),_0x228a24++);}),loading[_0x19db13(0x1f3)]=Math[_0x19db13(0x25c)](_0x228a24/_0x27fb23[_0x19db13(0x160)]*0x64);loading[_0x19db13(0x1f3)]!=0x64&&(_0x104f36>0x1e*0x5&&(loading[_0x19db13(0x120)]=!![],emitLoadingProgress()),_0x104f36>0x78*0x5&&!_0x50a486&&(loading[_0x19db13(0x15b)]=!![],emitLoadingProgress(),_0x50a486=!![],logHistory('error',_0x19db13(0x1ec)+loading['remainingSymbols'][_0x19db13(0x147)](',\x20')+_0x19db13(0x23f)),logHistory(_0x19db13(0x194),_0x19db13(0x1e7)+loadCoinsRetryInterval/0xea60+_0x19db13(0x247)),pidCoinReloading=setTimeout(()=>{const _0x3ecb0f=_0x19db13;process[_0x3ecb0f(0x250)]({'stop':_0x3ecb0f(0x182)},_0x51d2d1=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x228a24!=_0x41f0c0&&(_0x41f0c0=_0x228a24,emitLoadingProgress()),_0x104f36++,await sleep(0xc8);}_0x228a24==_0x27fb23[_0x19db13(0x160)]&&(coinsLoaded=!![],process[_0x19db13(0x250)]({'status':_0x19db13(0x129),'live':_0x19db13(0x16d)},_0x3681ca=>{}),_0x50a486&&logHistory(_0x19db13(0x1bc),_0x19db13(0x1ad)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x37bbbc=_0x26a5b4;proxyEmit(_0x37bbbc(0x235),{...emittedConfiguration(),'configstate':_0x37bbbc(0x1b0)});}function emitLoadingProgress(){const _0x382e61=_0x26a5b4;proxyEmit(_0x382e61(0x205),loading);}async function getFiat(){const _0x3b65e9=_0x26a5b4;let _0x341079=global[_0x3b65e9(0x211)][stablecoins['eur'][_0x3b65e9(0x1b9)]],_0x45c6a1=global['ticker'][stablecoins[_0x3b65e9(0x161)]['coin']];return{'eur':Number(_0x341079),'usd':Number(_0x45c6a1)};}function capitalize(_0x3e851c){const _0x5d7b96=_0x26a5b4;return _0x3e851c[_0x5d7b96(0x1a0)](0x0,0x1)[_0x5d7b96(0x1d1)]()+_0x3e851c[_0x5d7b96(0x1a0)](0x1);}function supportedExchanges(){const _0x34fcfa=_0x26a5b4,_0x59f75e=[_0x34fcfa(0x276),_0x34fcfa(0x237),_0x34fcfa(0x11d),_0x34fcfa(0x243),'Binanceusdm',_0x34fcfa(0x23d),_0x34fcfa(0x131),_0x34fcfa(0x204),'Bitmex',_0x34fcfa(0x134),_0x34fcfa(0x1e1),_0x34fcfa(0x157),_0x34fcfa(0x264),'Coinbasepro',_0x34fcfa(0x281),_0x34fcfa(0x16e),'Deribit',_0x34fcfa(0x260),_0x34fcfa(0x26d),_0x34fcfa(0x1e9),_0x34fcfa(0x1c5),'Huobipro',_0x34fcfa(0x166),'Kraken',_0x34fcfa(0x246),_0x34fcfa(0x270),_0x34fcfa(0x1b3),'Okex',_0x34fcfa(0x1e4),'Whitebit'];return _0x59f75e;}function setStartDatePerformance(){const _0xe8842c=_0x26a5b4;if(config&&config['liquidity'][0x0]['changes'][_0xe8842c(0x160)]!=0x0){const _0x4fb9bd=config['liquidity'][0x0]['changes'];dbPerformance['get']('data')[_0xe8842c(0x266)]({'date':config[_0xe8842c(0x1f8)]})[_0xe8842c(0x1ba)]({'coins':_0x4fb9bd})['write']();}}async function recreateCoinResults(){const _0x16fe82=_0x26a5b4;let _0x23f832,_0x3a7312=[];try{const _0x187d9a=fns['format'](fns[_0x16fe82(0x27c)](config[_0x16fe82(0x1f8)][_0x16fe82(0x1b1)](/\//g,'-')),_0x16fe82(0x22a));for(const _0x1b5306 of currentCoins){if(_0x1b5306[_0x16fe82(0x1b9)]!=config[_0x16fe82(0x23b)]){let _0x5d54c5=0x0,_0x467f9e,_0x119bae;_0x23f832=await getAllEventOrders(_0x1b5306[_0x16fe82(0x1a4)]);if(_0x23f832[_0x16fe82(0x160)]>0x0)_0x23f832[_0x16fe82(0x13a)](_0x5df215=>{const _0x57d788=_0x16fe82,_0x447a35=_0x1b5306[_0x57d788(0x1a4)][_0x57d788(0x152)](config[_0x57d788(0x23b)]+'/');_0x3a7312['push']({'datetime':_0x5df215[_0x57d788(0x1f9)],'coin':_0x1b5306[_0x57d788(0x1b9)],'symbol':_0x1b5306[_0x57d788(0x1a4)],'side':_0x5df215['side'],'reverse':_0x447a35,'amount':formatResult(_0x5df215[_0x57d788(0x114)],0x8),'filled':formatResult(_0x5df215[_0x57d788(0x114)],0x8),'price':formatResult(_0x5df215['price'],0x8)}),_0x5d54c5=_0x5df215['side']==_0x57d788(0x1b2)?_0x5d54c5+_0x5df215[_0x57d788(0x114)]:_0x5d54c5-_0x5df215[_0x57d788(0x114)];if(!_0x119bae)_0x119bae=_0x5df215[_0x57d788(0x180)];});_0x467f9e=_0x1b5306[_0x16fe82(0x185)]-_0x5d54c5;let _0x32c9df;config[_0x16fe82(0x174)][_0x16fe82(0x13a)](_0x10537f=>{const _0x1f80fe=_0x16fe82;!_0x32c9df&&(_0x32c9df=_0x10537f['changes'][_0x1f80fe(0x266)](_0x41d620=>_0x41d620[_0x1f80fe(0x1b9)]==_0x1b5306[_0x1f80fe(0x1b9)]),_0x32c9df&&(_0x467f9e=_0x32c9df[_0x1f80fe(0x185)],_0x119bae=_0x32c9df[_0x1f80fe(0x180)]));});let _0x34db21=dbCoinResults['get'](_0x16fe82(0x24f))[_0x16fe82(0x266)]({'coin':_0x1b5306[_0x16fe82(0x1b9)]})[_0x16fe82(0x184)]();_0x34db21={'coin':_0x1b5306[_0x16fe82(0x1b9)],'number':_0x467f9e,'breakeven':_0x119bae,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x16fe82(0x24c)](_0x16fe82(0x24f))[_0x16fe82(0x266)]({'coin':_0x1b5306[_0x16fe82(0x1b9)]})['assign'](_0x34db21)['write']();}}_0x3a7312['sort']((_0x21c0e7,_0x15624c)=>_0x21c0e7[_0x16fe82(0x1f9)]>_0x15624c['datetime']?0x1:_0x15624c[_0x16fe82(0x1f9)]>_0x21c0e7[_0x16fe82(0x1f9)]?-0x1:0x0);let _0x5e32b0=0x0;for(let _0x2c7045 of _0x3a7312){await updateCoinResults(_0x2c7045,!![]);}}catch(_0x4c3bf6){await handleError(_0x4c3bf6,_0x16fe82(0x21d));}}async function getAllEventOrders(_0x17478e){const _0x4fa077=_0x26a5b4;let _0xf8af90=[],_0x27db39=dbLogs['get']('logs')['filter'](_0x473ed5=>{const _0x2ea000=_0x3764,_0x1c6394=_0x473ed5[_0x2ea000(0x1a6)][_0x2ea000(0x269)]();return _0x1c6394['includes'](_0x17478e[_0x2ea000(0x269)]())&&(_0x1c6394[_0x2ea000(0x152)]('market')&&_0x1c6394[_0x2ea000(0x152)](_0x2ea000(0x20f))||_0x1c6394[_0x2ea000(0x152)](_0x2ea000(0x114))&&_0x1c6394[_0x2ea000(0x152)](_0x2ea000(0x20f)));})[_0x4fa077(0x272)](_0x4fa077(0x252))[_0x4fa077(0x184)]();return _0x27db39[_0x4fa077(0x13a)](_0x50175d=>{const _0x2f0a7d=_0x4fa077,_0x5c64f6=_0x50175d[_0x2f0a7d(0x1a6)]['includes'](_0x2f0a7d(0x176))?_0x2f0a7d(0x176):'buy',_0x183125=/#([0-9]|\.)+\s/i,_0x1dd666=Number(_0x183125[_0x2f0a7d(0x273)](_0x50175d[_0x2f0a7d(0x1a6)])[0x0][_0x2f0a7d(0x236)](0x1)),_0x44dfe0=/@([0-9]|\.)+$/i,_0x50979c=Number(_0x44dfe0['exec'](_0x50175d[_0x2f0a7d(0x1a6)])[0x0][_0x2f0a7d(0x236)](0x1));_0xf8af90[_0x2f0a7d(0x221)]({'datetime':_0x50175d['time'],'coin':symbolToCoin(_0x17478e),'symbol':_0x17478e,'side':_0x5c64f6,'amount':_0x1dd666,'filled':_0x1dd666,'price':_0x50979c});}),_0xf8af90;}async function getAllOrders(_0x21c650,_0x7538f2){const _0x1fd64a=_0x26a5b4;let _0x1f244c=[];while(_0x7538f2<exchange[_0x1fd64a(0x1e3)]()){const _0x2a3630=0x1f4,_0x3adf95=await exchange[_0x1fd64a(0x191)](_0x21c650,_0x7538f2,_0x2a3630);if(_0x3adf95[_0x1fd64a(0x160)])_0x7538f2=_0x3adf95[_0x3adf95[_0x1fd64a(0x160)]-0x1][_0x1fd64a(0x24e)]+0x1,_0x1f244c=_0x1f244c[_0x1fd64a(0x28e)](_0x3adf95);else break;}return _0x1f244c;}async function validate24hChanges(){const _0x5ab4ee=_0x26a5b4;for(const _0x5480c3 of currentCoins){if(_0x5480c3['coin']!=config[_0x5ab4ee(0x23b)]){let _0x994ace;_0x5480c3[_0x5ab4ee(0x14a)]?_0x994ace=formatResult((0x1/(global[_0x5ab4ee(0x232)][noslash(_0x5480c3[_0x5ab4ee(0x1a4)])]/0x64+0x1)-0x1)*0x64,0x3):_0x994ace=global[_0x5ab4ee(0x232)][noslash(_0x5480c3[_0x5ab4ee(0x1a4)])],_0x994ace<config[_0x5ab4ee(0x1b6)]&&(logHistory('error',_0x5480c3['coin']+_0x5ab4ee(0x27b)+_0x994ace+'%'),logHistory(_0x5ab4ee(0x194),_0x5ab4ee(0x1bd)),logHistory(_0x5ab4ee(0x194),_0x5ab4ee(0x121)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3658a4,_0x3546c1){const _0x245e02=_0x26a5b4;if(!_0x3658a4)return!![];const _0x2867c4=_0x3546c1[_0x245e02(0x1b8)]('.'),_0x22e239=_0x3658a4[_0x245e02(0x1b8)]('.');for(var _0x37c4ff=0x0;_0x37c4ff<_0x22e239[_0x245e02(0x160)];_0x37c4ff++){const _0x453328=~~_0x22e239[_0x37c4ff],_0x363712=~~_0x2867c4[_0x37c4ff];if(_0x453328<_0x363712)return!![];if(_0x453328>_0x363712)return![];}return![];}async function oneTimeMigration(){const _0xabf951=_0x26a5b4;let _0x10e7ea=dbLogs[_0xabf951(0x24c)](_0xabf951(0x192))['value']();if(isOlderVersion(_0x10e7ea,_0xabf951(0x177))){let _0x30679f=[];const _0x3775e4=dbLogs[_0xabf951(0x24c)](_0xabf951(0x11f))['value']();_0x3775e4[_0xabf951(0x13a)](_0x1e0deb=>{const _0x5c56b1=_0xabf951;_0x30679f[_0x5c56b1(0x221)]({'time':_0x1e0deb[_0x5c56b1(0x252)],'type':_0x1e0deb[_0x5c56b1(0x1b5)],'event':_0x1e0deb[_0x5c56b1(0x1a6)]});}),dbLogs['get']('logs')[_0xabf951(0x1ba)](_0x30679f)[_0xabf951(0x162)]();}let _0x494249=dbConfig[_0xabf951(0x24c)](_0xabf951(0x192))[_0xabf951(0x184)]();if(isOlderVersion(_0x494249,_0xabf951(0x177))){let _0x49efe7=dbConfig[_0xabf951(0x24c)](_0xabf951(0x163))['find']({'botID':botID})[_0xabf951(0x184)]();if(_0x49efe7){let _0x598004=[];_0x49efe7[_0xabf951(0x17c)][_0xabf951(0x13a)](_0x45ae32=>{const _0x3bf794=_0xabf951;_0x598004[_0x3bf794(0x221)]({'coin':_0x45ae32[_0x3bf794(0x1b9)],'number':_0x45ae32[_0x3bf794(0x28b)],'price':_0x45ae32['startprice']}),delete _0x45ae32[_0x3bf794(0x28b)],delete _0x45ae32[_0x3bf794(0x11b)];});if(_0x598004['length']!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0xabf951(0x207)),JSON[_0xabf951(0x127)](_0x598004,null,0x4),function(_0x2af79e){if(_0x2af79e){}});const _0x2e98ef=(_0x2e3bd5,_0x3f464d)=>{const _0x4b2ea4=_0xabf951;let _0x4f9e82=[];_0x3f464d[_0x4b2ea4(0x13a)](_0x4b1634=>{const _0x11f0ce=_0x4b2ea4,_0x26ff13=_0x2e3bd5[_0x11f0ce(0x266)](_0x47e83f=>_0x47e83f['coin']==_0x4b1634['coin']);if(!_0x26ff13)_0x4f9e82['push'](_0x4b1634);});let _0x20ab4a=[];return _0x2e3bd5[_0x4b2ea4(0x13a)](_0x20d0e5=>{const _0x3c65f4=_0x4b2ea4,_0x1d66da=_0x3f464d[_0x3c65f4(0x266)](_0x39888b=>_0x39888b[_0x3c65f4(0x1b9)]==_0x20d0e5[_0x3c65f4(0x1b9)]);if(!_0x1d66da||_0x1d66da[_0x3c65f4(0x185)]==0x0&&_0x20d0e5[_0x3c65f4(0x185)]!=0x0)_0x20ab4a[_0x3c65f4(0x221)](_0x20d0e5);}),{'missingDay1':_0x4f9e82,'notInDay2':_0x20ab4a};},_0x194384=dbPerformance['get'](_0xabf951(0x146))[_0xabf951(0x1de)]()['value']();if(_0x194384[_0xabf951(0x160)]>0x1){const {missingDay1:_0x3b3305,notInDay2:_0x53719d}=_0x2e98ef(_0x598004,_0x194384[0x1]['coins']);_0x598004=[..._0x598004,..._0x3b3305],_0x53719d['forEach'](_0xa5a90f=>{const _0x15968f=_0xabf951;let _0x2f351f=_0x598004[_0x15968f(0x12b)](_0xccf05c=>_0xccf05c[_0x15968f(0x1b9)]==_0xa5a90f[_0x15968f(0x1b9)]);_0x2f351f!=-0x1&&_0x598004[_0x15968f(0x149)](_0x2f351f,0x1);});}_0x598004['sort']((_0x5831a8,_0x41e4ed)=>_0x5831a8[_0xabf951(0x1b9)]>_0x41e4ed[_0xabf951(0x1b9)]?0x1:_0x41e4ed[_0xabf951(0x1b9)]>_0x5831a8[_0xabf951(0x1b9)]?-0x1:0x0);let _0x34ae66=[{'date':_0x49efe7[_0xabf951(0x1f8)],'changes':_0x598004}];_0x194384[_0xabf951(0x160)]>0x2&&_0x194384[_0xabf951(0x13a)]((_0x189e9a,_0x34c3d7)=>{const _0x433e0c=_0xabf951;if(_0x34c3d7>0x0&&_0x34c3d7<_0x194384[_0x433e0c(0x160)]-0x1){const {missingDay1:_0xb13ff9,notInDay2:_0x5cdc8a}=_0x2e98ef(_0x194384[_0x34c3d7][_0x433e0c(0x24f)],_0x194384[_0x34c3d7+0x1]['coins']);_0x598004=[],(_0xb13ff9['length']!=0x0||_0x5cdc8a[_0x433e0c(0x160)]!=0x0)&&(_0xb13ff9[_0x433e0c(0x160)]!=0x0&&_0x598004['push'](..._0xb13ff9),_0x5cdc8a[_0x433e0c(0x160)]!=0x0&&(_0x5cdc8a[_0x433e0c(0x13a)](_0x51dd3a=>{const _0x47fda1=_0x433e0c;_0x51dd3a[_0x47fda1(0x185)]=-_0x51dd3a[_0x47fda1(0x185)];}),_0x598004[_0x433e0c(0x221)](..._0x5cdc8a)),_0x598004[_0x433e0c(0x130)]((_0x28e875,_0x3d7359)=>_0x28e875['coin']>_0x3d7359[_0x433e0c(0x1b9)]?0x1:_0x3d7359['coin']>_0x28e875[_0x433e0c(0x1b9)]?-0x1:0x0),_0x34ae66['push']({'date':_0x194384[_0x34c3d7+0x1][_0x433e0c(0x271)],'changes':_0x598004}));}}),dbConfig[_0xabf951(0x24c)](_0xabf951(0x163))[_0xabf951(0x266)]({'botID':botID})[_0xabf951(0x1ba)]({..._0x49efe7,'liquidity':_0x34ae66})[_0xabf951(0x162)]();}}if(isOlderVersion(_0x494249,_0xabf951(0x1ae))){let _0x3bf7aa=dbConfig['get']('bot')[_0xabf951(0x266)]({'botID':botID})['value']();if(_0x3bf7aa){const _0x204ed2=_0x3bf7aa['exchange'],_0x3a42e0=_0x204ed2?capitalize(_0x204ed2):_0xabf951(0x237);dbConfig['get'](_0xabf951(0x163))[_0xabf951(0x266)]({'botID':botID})[_0xabf951(0x1ba)]({'exchange':_0x3a42e0})['write']();}}let _0x5721f5=dbPerformance[_0xabf951(0x24c)](_0xabf951(0x192))['value']();isOlderVersion(_0x5721f5,_0xabf951(0x177))&&setStartDatePerformance();let _0x2e6415=dbCoinResults['get'](_0xabf951(0x192))[_0xabf951(0x184)]();if(isOlderVersion(_0x2e6415,_0xabf951(0x225))){let _0x2ce94b=dbCoinResults[_0xabf951(0x24c)](_0xabf951(0x24f))[_0xabf951(0x184)]();if(_0x2ce94b[_0xabf951(0x160)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4c0357=_0x26a5b4;dbConfig['set'](_0x4c0357(0x192),serverversion)[_0x4c0357(0x162)](),dbPerformance[_0x4c0357(0x1a2)](_0x4c0357(0x192),serverversion)[_0x4c0357(0x162)](),dbLogs[_0x4c0357(0x1a2)](_0x4c0357(0x192),serverversion)[_0x4c0357(0x162)](),dbCoinResults['set']('version',serverversion)['write']();}function getConfiguration(_0x3d290f){const _0x48c76c=_0x26a5b4;let _0x1053b4=dbConfig[_0x48c76c(0x24c)](_0x48c76c(0x163))[_0x48c76c(0x266)]({'botID':_0x3d290f})[_0x48c76c(0x184)]();if(_0x1053b4){let _0x368007=![];typeof _0x1053b4[_0x48c76c(0x188)]==_0x48c76c(0x278)&&(_0x1053b4={..._0x1053b4,'threshold':Number(_0x1053b4[_0x48c76c(0x188)])},_0x368007=!![]),_0x1053b4[_0x48c76c(0x1b6)]==null&&(_0x1053b4={..._0x1053b4,'change24h':-0x14},_0x368007=!![]),!_0x1053b4[_0x48c76c(0x26e)]&&(_0x1053b4={..._0x1053b4,'fiat':_0x48c76c(0x20c)},_0x368007=!![]),_0x368007&&(_0x1053b4={'botID':_0x1053b4[_0x48c76c(0x229)],'exchange':_0x1053b4[_0x48c76c(0x275)],'apiKey':_0x1053b4['apiKey'],'apiSecret':_0x1053b4[_0x48c76c(0x19c)],'basecoin':_0x1053b4['basecoin'],'botname':_0x1053b4[_0x48c76c(0x284)],'showname':_0x1053b4['showname'],'threshold':_0x1053b4[_0x48c76c(0x188)],'ordertype':_0x1053b4[_0x48c76c(0x18d)],'timeout':_0x1053b4[_0x48c76c(0x120)],'fiat':_0x1053b4[_0x48c76c(0x26e)],'startdate':_0x1053b4[_0x48c76c(0x1f8)],'recreate':_0x1053b4['recreate'],'timeshift':_0x1053b4[_0x48c76c(0x18b)],'headless':_0x1053b4['headless'],'cooldown':_0x1053b4[_0x48c76c(0x1f2)],'change24h':_0x1053b4[_0x48c76c(0x1b6)],'emojibuy':_0x1053b4[_0x48c76c(0x249)],'emojisell':_0x1053b4[_0x48c76c(0x1a5)],'portfolio':_0x1053b4[_0x48c76c(0x17c)],'liquidity':_0x1053b4[_0x48c76c(0x174)],'openOrders':_0x1053b4[_0x48c76c(0x254)]},dbConfig[_0x48c76c(0x24c)](_0x48c76c(0x163))[_0x48c76c(0x1ca)]()[_0x48c76c(0x162)](),dbConfig[_0x48c76c(0x24c)](_0x48c76c(0x163))[_0x48c76c(0x221)](_0x1053b4)['write']());}else _0x1053b4={'botID':_0x3d290f,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x48c76c(0x1e5)+_0x3d290f,'showname':![],'threshold':0x3,'ordertype':_0x48c76c(0x21f),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x48c76c(0x18b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1053b4;}function emittedConfiguration(){const _0x4077e5=_0x26a5b4;let _0x4c0719;if(config['apiKey']=='')_0x4c0719={...config,'configstate':_0x4077e5(0x1f4)};else config['apiKey']==_0x4077e5(0x202)?_0x4c0719={...config,'configstate':_0x4077e5(0x195)}:_0x4c0719={...config,'apiKey':_0x4077e5(0x1d4),'apiSecret':_0x4077e5(0x1d4)};return _0x4c0719;}function getSettings(){const _0x5820ae=_0x26a5b4;return dbSettings['get'](_0x5820ae(0x167))[_0x5820ae(0x184)]();}function getSecure(){const _0x4b764e=_0x26a5b4;return dbSecure[_0x4b764e(0x24c)](_0x4b764e(0x189))['value']()||{};}function updateTimeshift(_0x4a480b){const _0x228a03=_0x26a5b4;let _0x132bfc=dbConfig[_0x228a03(0x24c)]('bot')[_0x228a03(0x266)]({'botID':botID})[_0x228a03(0x184)]();_0x132bfc&&dbConfig[_0x228a03(0x24c)](_0x228a03(0x163))[_0x228a03(0x266)]({'botID':botID})[_0x228a03(0x1ba)]({'timeshift':_0x4a480b})[_0x228a03(0x162)](),config['timeshift']=_0x4a480b,proxyEmit(_0x228a03(0x235),emittedConfiguration());}async function storeConfiguration(_0x36af8f){const _0x176769=_0x26a5b4;blockTransactionDetection=!![],logger[_0x176769(0x1e2)]('Transaction\x20detection\x20blocked');let _0xaa14ca=[],_0xed4c52=[];_0x36af8f['portfolio']['forEach'](_0x54ad73=>{const _0x24193c=_0x176769;if(!_0x54ad73['excluded']&&_0x54ad73['coin']!=_0x36af8f[_0x24193c(0x23b)])_0xed4c52[_0x24193c(0x221)](_0x54ad73[_0x24193c(0x1a4)]);});currentCoins['length']==0x0?_0xaa14ca=_0xed4c52:_0xed4c52[_0x176769(0x13a)](_0x10ac49=>{const _0x5040c9=_0x176769,_0x3fd604=currentCoins[_0x5040c9(0x266)](_0x5029b7=>_0x5029b7[_0x5040c9(0x1a4)]==_0x10ac49);!_0x3fd604&&_0xaa14ca[_0x5040c9(0x221)](_0x10ac49);});let _0x120690=dbConfig[_0x176769(0x24c)]('bot')[_0x176769(0x266)]({'botID':botID})['value']();_0x36af8f={..._0x36af8f,'apiKey':crypt[_0x176769(0x1ea)](secure[_0x176769(0x190)],_0x36af8f[_0x176769(0x1f0)])[_0x176769(0x15a)],'apiSecret':crypt['decrypt'](secure[_0x176769(0x190)],_0x36af8f[_0x176769(0x19c)])[_0x176769(0x15a)]};if(_0x120690){if(_0x36af8f[_0x176769(0x1f0)]==_0x176769(0x1d4))_0x36af8f[_0x176769(0x1f0)]=config[_0x176769(0x1f0)];if(_0x36af8f[_0x176769(0x19c)]=='************')_0x36af8f[_0x176769(0x19c)]=config['apiSecret'];dbConfig[_0x176769(0x24c)](_0x176769(0x163))[_0x176769(0x266)]({'botID':botID})[_0x176769(0x1ba)](_0x36af8f)[_0x176769(0x162)]();}else dbConfig['get'](_0x176769(0x163))['push'](_0x36af8f)[_0x176769(0x162)](),process[_0x176769(0x250)]({'status':'enabled','live':_0x176769(0x16d)},_0x21319a=>{});config={..._0x36af8f},currentCoins=await getCoins(),setStartDatePerformance(),process[_0x176769(0x250)]({'botname':_0x36af8f[_0x176769(0x284)]},_0x26079a=>{}),updateBotManager();const _0x2b3d62=getNormalizedPerformance();getStartingBalances(_0x2b3d62),emitPerformance(_0x2b3d62),proxyEmit(_0x176769(0x165)),await initCoinResults(),reset(_0xaa14ca),blockTransactionDetection=![],logger[_0x176769(0x1e2)](_0x176769(0x265));}async function storeHeadless(_0x53fd71){const _0x4429b4=_0x26a5b4,_0x4c2af3={...config,'headless':_0x53fd71[_0x4429b4(0x143)]};let _0x5600e1=dbConfig[_0x4429b4(0x24c)]('bot')[_0x4429b4(0x266)]({'botID':botID})[_0x4429b4(0x184)]();_0x5600e1&&dbConfig['get'](_0x4429b4(0x163))[_0x4429b4(0x266)]({'botID':botID})['assign'](_0x4c2af3)['write'](),config={..._0x4c2af3},updateBotManager(),proxyEmit(_0x4429b4(0x235),emittedConfiguration());}async function storeFiat(_0x50066a){const _0x284838=_0x26a5b4,_0x2230d3={...config,'fiat':_0x50066a};let _0x49ed12=dbConfig[_0x284838(0x24c)](_0x284838(0x163))[_0x284838(0x266)]({'botID':botID})[_0x284838(0x184)]();_0x49ed12&&dbConfig[_0x284838(0x24c)]('bot')[_0x284838(0x266)]({'botID':botID})[_0x284838(0x1ba)](_0x2230d3)[_0x284838(0x162)](),config={..._0x2230d3},proxyEmit(_0x284838(0x235),emittedConfiguration());}function resetHistory(){const _0x5c27de=_0x26a5b4;logger['full'](_0x5c27de(0x11e));try{if(fs[_0x5c27de(0x12c)](path[_0x5c27de(0x147)](configpath,_0x5c27de(0x168)+botID+_0x5c27de(0x1be))))fs[_0x5c27de(0x277)](path['join'](configpath,'bot-'+botID+_0x5c27de(0x1be)));if(fs[_0x5c27de(0x12c)](path[_0x5c27de(0x147)](configpath,_0x5c27de(0x168)+botID+_0x5c27de(0x13e))))fs[_0x5c27de(0x277)](path[_0x5c27de(0x147)](configpath,_0x5c27de(0x168)+botID+_0x5c27de(0x13e)));if(fs[_0x5c27de(0x12c)](path[_0x5c27de(0x147)](configpath,_0x5c27de(0x168)+botID+_0x5c27de(0x17b))))fs['unlinkSync'](path['join'](configpath,_0x5c27de(0x168)+botID+'-results.json'));}catch(_0x14329f){if(_0x14329f)logger[_0x5c27de(0x239)](_0x5c27de(0x1ce),_0x14329f);}const _0x47ec18=getDate();let _0x43edf9=[];currentCoins[_0x5c27de(0x13a)](_0x621243=>{const _0x2eb314=_0x5c27de;_0x43edf9[_0x2eb314(0x221)]({'coin':_0x621243[_0x2eb314(0x1b9)],'number':_0x621243[_0x2eb314(0x185)],'price':_0x621243[_0x2eb314(0x28a)]});});let _0x2356b4=dbConfig[_0x5c27de(0x24c)](_0x5c27de(0x163))[_0x5c27de(0x266)]({'botID':botID})['value']();_0x2356b4&&(dbConfig[_0x5c27de(0x24c)]('bot')[_0x5c27de(0x266)]({'botID':botID})[_0x5c27de(0x1ba)]({'liquidity':[{'date':_0x47ec18,'changes':_0x43edf9}]})[_0x5c27de(0x162)](),config[_0x5c27de(0x174)]=[]),process['send']({'stop':_0x5c27de(0x182)},_0x197902=>{});}function noslash(_0x5d79a0){const _0x1cbf82=_0x26a5b4;return _0x5d79a0[_0x1cbf82(0x1b1)]('/','');}function updateAverageFees(_0x2e69f0,_0x29b349){const _0x54af46=_0x26a5b4;lastFees[_0x54af46(0x234)]=_0x2e69f0,lastFees['average']=(lastFees[_0x54af46(0x22b)]*lastFees[_0x54af46(0x185)]+_0x29b349)/++lastFees[_0x54af46(0x185)];}async function updateNumberCoinsCcxt(_0x3effd8){const _0x22730d=_0x26a5b4;logger[_0x22730d(0x1e2)](_0x22730d(0x186)+_0x3effd8[_0x22730d(0x1a4)]+_0x22730d(0x178)+_0x3effd8[_0x22730d(0x218)]+_0x22730d(0x178)+_0x3effd8['id']+'\x20|\x20'+_0x3effd8[_0x22730d(0x27f)]);let _0x4774e6=_0x3effd8[_0x22730d(0x218)],_0x352c31=![];currentCoins[_0x22730d(0x13a)](_0x2032f9=>{_0x2032f9['symbol']==_0x3effd8['symbol']&&(_0x352c31=!![]);});if(!_0x352c31)return;const _0x5cb2d2=currentCoins[_0x22730d(0x266)](_0x3e9eef=>_0x3e9eef[_0x22730d(0x1a4)]==_0x3effd8[_0x22730d(0x1a4)]),_0x3b0920=_0x292a8c=>{if(_0x5cb2d2)_0x5cb2d2['orderstatus']=_0x292a8c;};if(_0x4774e6==_0x22730d(0x20a))_0x3b0920(_0x22730d(0x20a));else{if(_0x4774e6==_0x22730d(0x197))_0x3b0920(_0x22730d(0x197)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x4774e6==_0x22730d(0x1f5)){logger[_0x22730d(0x1e2)](_0x22730d(0x285)+_0x3effd8[_0x22730d(0x1a4)]+_0x22730d(0x178)+_0x3effd8['filled']+_0x22730d(0x178)+_0x3effd8['id']+_0x22730d(0x178)+_0x3effd8['clientOrderId']);let _0x2a3ce6=![];if(lastOrders)lastOrders['forEach'](async _0x2861f5=>{const _0x249832=_0x22730d;if(_0x2861f5[_0x249832(0x20b)]==_0x3effd8['clientOrderId']){logger['debug'](_0x249832(0x1f6)+_0x3effd8[_0x249832(0x27f)]),_0x2a3ce6=!![];if(_0x2861f5[_0x249832(0x114)]==0x0){logger[_0x249832(0x1e2)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3effd8[_0x249832(0x27f)]),_0x2861f5[_0x249832(0x180)]=_0x3effd8[_0x249832(0x22b)],_0x2861f5['filled']=_0x3effd8[_0x249832(0x114)],_0x2861f5[_0x249832(0x230)]={'cost':_0x3effd8[_0x249832(0x230)]['cost'],'currency':_0x3effd8[_0x249832(0x230)][_0x249832(0x234)]},updateAverageFees(_0x3effd8[_0x249832(0x230)][_0x249832(0x234)],_0x3effd8[_0x249832(0x230)][_0x249832(0x1a9)]),_0x3b0920(_0x249832(0x114)),await validateOrders();if(lockOrders==ORDERS[_0x249832(0x1c4)])currentCoins=await getCoins();await updateCoinResults(_0x2861f5);}}});!_0x2a3ce6&&(logger[_0x22730d(0x1e2)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x3effd8['id']),_0x3b0920(_0x22730d(0x114)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x4c9582=JSON[_0x22730d(0x244)](lastBalances[_0x22730d(0x17c)]);const _0x4fe6f6=_0x4c9582['find'](_0x745d7d=>_0x745d7d['symbol']==_0x3effd8[_0x22730d(0x1a4)]);if(_0x4fe6f6){if(_0x4774e6==_0x22730d(0x20a))_0x4fe6f6[_0x22730d(0x170)]=_0x4fe6f6[_0x22730d(0x170)]==_0x22730d(0x114)?'filled':'open';else{if(_0x4774e6==_0x22730d(0x197))_0x4fe6f6[_0x22730d(0x170)]=_0x4fe6f6['orderstatus']==_0x22730d(0x114)?_0x22730d(0x114):_0x22730d(0x197);else _0x4774e6=='closed'&&(_0x4fe6f6['orderstatus']='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x4c9582)},proxyEmit(_0x22730d(0x12d),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0xfcba4a=![],_0x290874=!![],_0x4365db=config['basecoin']){const _0x331b39=_0x26a5b4;let _0x3e885a,_0x227833=[],_0x203972=[],_0x17894d=[];try{_0x3e885a=await exchange[_0x331b39(0x28f)](),mybalances=_0x3e885a[_0x331b39(0x193)];if(!_0x290874)for(const [_0x719df4,_0x4fd3e2]of Object[_0x331b39(0x183)](mybalances)){_0x17894d[_0x331b39(0x221)](_0x719df4);}else config[_0x331b39(0x17c)][_0x331b39(0x13a)](_0x2b0293=>{const _0x858bd5=_0x331b39;if(!_0x2b0293[_0x858bd5(0x199)])_0x17894d[_0x858bd5(0x221)](_0x2b0293['coin']);});if(_0x4365db=='')for(const [_0x1a78c0,_0x2182ac]of Object[_0x331b39(0x183)](mybalances)){_0x2182ac['toString']()!=0x0&&_0x203972['push']({'coin':_0x1a78c0});}else{if(_0xfcba4a)await getOpenOrders();let _0xc5d7a=![];for(const [_0x5d6ed5,_0x318b64]of Object[_0x331b39(0x183)](mybalances)){if(_0x17894d[_0x331b39(0x152)](_0x5d6ed5)){const _0x2598ec=config[_0x331b39(0x17c)][_0x331b39(0x266)](_0x36ae87=>_0x36ae87[_0x331b39(0x1b9)]==_0x5d6ed5),_0x20954c=_0x5d6ed5+'/'+_0x4365db,_0x4dd5eb=_0x4365db+'/'+_0x5d6ed5,_0x24083a=currentCoins['find'](_0x363596=>_0x363596['coin']==_0x5d6ed5);_0xc5d7a=![];_0xfcba4a&&(_0xc5d7a=allOpenOrders['find'](_0x300f1d=>_0x300f1d[_0x331b39(0x1a4)]==_0x2598ec[_0x331b39(0x1a4)]));if((_0x318b64[_0x331b39(0x17a)]()!=0x0||_0x2598ec)&&(allSymbols[_0x331b39(0x152)](_0x20954c)||_0x5d6ed5==_0x4365db))_0x5d6ed5!=_0x4365db&&_0x227833['push'](_0x20954c),_0x203972[_0x331b39(0x221)]({'coin':_0x5d6ed5,'symbol':_0x20954c,'reverse':![],'number':Math[_0x331b39(0x26c)](_0x318b64+(_0x2598ec&&_0x2598ec['offset']||0x0),0x0),'orderstatus':_0xfcba4a?_0xc5d7a?_0x331b39(0x20a):_0x331b39(0x133):_0x24083a?_0x24083a[_0x331b39(0x170)]:'none'});else(_0x318b64[_0x331b39(0x17a)]()!=0x0||_0x2598ec)&&allSymbols['includes'](_0x4dd5eb)&&(_0x5d6ed5!=_0x4365db&&_0x227833[_0x331b39(0x221)](_0x4dd5eb),_0x203972['push']({'coin':_0x5d6ed5,'symbol':_0x4dd5eb,'reverse':!![],'number':Math[_0x331b39(0x26c)](_0x318b64+(_0x2598ec&&_0x2598ec[_0x331b39(0x1fa)]||0x0),0x0),'orderstatus':_0xfcba4a?_0xc5d7a?_0x331b39(0x20a):_0x331b39(0x133):_0x24083a?_0x24083a['orderstatus']:_0x331b39(0x133)}));}}}}catch(_0x203006){if(!_0x290874)handleErrorNoStop(_0x203006,_0x331b39(0x215));else await handleError(_0x203006,_0x331b39(0x215));}return _0x203972;}async function getCoinNumber(_0xd167f8){const _0x5698d9=_0x26a5b4;let _0x263aa7;try{const _0x4597da=await exchange[_0x5698d9(0x28f)]();_0x263aa7=_0x4597da[_0x5698d9(0x193)][_0xd167f8];}catch(_0x190ba9){await handleError(_0x190ba9,'getCoinNumber()');}return _0x263aa7;}async function getOpenOrders(){const _0x10455d=_0x26a5b4;let _0x3d13fb;allOpenOrders=[];try{for(const _0x4ed8ca of config[_0x10455d(0x17c)]){!_0x4ed8ca['excluded']&&_0x4ed8ca[_0x10455d(0x1b9)]!=config['basecoin']&&(_0x3d13fb=await exchange[_0x10455d(0x282)](_0x4ed8ca[_0x10455d(0x1a4)]),_0x3d13fb[_0x10455d(0x160)]>0x0&&allOpenOrders[_0x10455d(0x221)](_0x3d13fb[0x0]));}}catch(_0x44cfcb){await handleError(_0x44cfcb,_0x10455d(0x217));}}async function handleOpenOrders(_0x1d30ac=0x0){const _0x1a536d=_0x26a5b4;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x1a536d(0x1c4)]&&allOrdersPlaced&&(_0x1d30ac==0x0?(logger[_0x1a536d(0x1e2)](_0x1a536d(0x159)),_0x1d30ac++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1a536d(0x1e2)](_0x1a536d(0x20d)),validateOrders('no\x20open\x20orders')));}async function getPortfolio(_0x274805){const _0x522c3e=_0x26a5b4;let _0x4d2913=[],_0x4e6dd4=[],_0x5c2383,_0x57f3bf=[],_0x4e5ae0=![];if(_0x274805['apiKey']===_0x522c3e(0x1d4)||_0x274805[_0x522c3e(0x19c)]===_0x522c3e(0x1d4))_0x4e5ae0=!![];else{await initExchange(_0x274805['exchange'],_0x274805[_0x522c3e(0x1f0)],_0x274805[_0x522c3e(0x19c)]);try{_0x4e5ae0=await loadSymbols(_0x274805[_0x522c3e(0x275)]);}catch(_0x2b27ba){_0x4e5ae0=![],handleErrorNoStop(_0x2b27ba,_0x522c3e(0x1ab));}}if(_0x4e5ae0){_0x57f3bf=await getCoins(![],![],_0x274805['basecoin']);if(_0x57f3bf===![])proxyEmit(_0x522c3e(0x17c),![]);else{if(_0x274805[_0x522c3e(0x23b)]=='')proxyEmit(_0x522c3e(0x17c),_0x57f3bf);else{_0x57f3bf['forEach'](_0x5c9306=>{const _0x5d64fe=_0x522c3e;if(_0x5c9306[_0x5d64fe(0x1b9)]!=_0x274805[_0x5d64fe(0x23b)])_0x4d2913[_0x5d64fe(0x221)](_0x5c9306[_0x5d64fe(0x1a4)]);});try{_0x4e6dd4=await exchange[_0x522c3e(0x1fe)](_0x4d2913);}catch(_0x3751d2){await handleError(_0x3751d2,'getPortfolio()');}_0x57f3bf[_0x522c3e(0x13a)](_0xd97c43=>{const _0xc6b2fc=_0x522c3e;_0xd97c43[_0xc6b2fc(0x1b9)]!=_0x274805[_0xc6b2fc(0x23b)]?_0x5c2383=_0xd97c43[_0xc6b2fc(0x14a)]?0x1/_0x4e6dd4[_0xd97c43['symbol']][_0xc6b2fc(0x28a)]:_0x4e6dd4[_0xd97c43[_0xc6b2fc(0x1a4)]][_0xc6b2fc(0x28a)]:_0x5c2383=0x1,_0xd97c43[_0xc6b2fc(0x180)]=formatResult(_0x5c2383,0x8);}),proxyEmit('portfolio',_0x57f3bf);}}}else proxyEmit(_0x522c3e(0x17c),![]);}function checkMinimums(_0x2dd9ef){const _0x4a1381=_0x26a5b4;let _0x278f97=!![];const _0x5652ea=!_0x2dd9ef[_0x4a1381(0x14a)]?markets[_0x2dd9ef[_0x4a1381(0x1a4)]][_0x4a1381(0x268)][_0x4a1381(0x1fd)][_0x4a1381(0x1c6)]:markets[_0x2dd9ef['symbol']]['limits'][_0x4a1381(0x1a9)][_0x4a1381(0x1c6)],_0x18731e=!_0x2dd9ef[_0x4a1381(0x14a)]?markets[_0x2dd9ef[_0x4a1381(0x1a4)]]['limits']['cost'][_0x4a1381(0x1c6)]:markets[_0x2dd9ef[_0x4a1381(0x1a4)]][_0x4a1381(0x268)][_0x4a1381(0x1fd)][_0x4a1381(0x1c6)],_0x479c6f=markets[_0x2dd9ef[_0x4a1381(0x1a4)]][_0x4a1381(0x1d7)][_0x4a1381(0x1fd)];_0x2dd9ef[_0x4a1381(0x27a)]=formatResultTruncate(_0x2dd9ef[_0x4a1381(0x27a)],_0x479c6f);if(Math[_0x4a1381(0x187)](_0x2dd9ef['trade'])<_0x5652ea)_0x278f97=![];if(Math[_0x4a1381(0x187)](_0x2dd9ef['trade'])*_0x2dd9ef['last']<_0x18731e)_0x278f97=![];if(_0x2dd9ef[_0x4a1381(0x1e8)]=='sell'){let _0x3c34c9=config[_0x4a1381(0x17c)][_0x4a1381(0x266)](_0x14eff2=>_0x14eff2[_0x4a1381(0x1b9)]==_0x2dd9ef[_0x4a1381(0x1b9)]);if(_0x3c34c9[_0x4a1381(0x1fa)]>0x0){if(Math[_0x4a1381(0x187)](_0x2dd9ef['trade'])>_0x2dd9ef[_0x4a1381(0x185)]-_0x3c34c9[_0x4a1381(0x1fa)])_0x278f97=![];}else{if(Math[_0x4a1381(0x187)](_0x2dd9ef[_0x4a1381(0x27a)])>_0x2dd9ef[_0x4a1381(0x185)])_0x278f97=![];}}if(_0x2dd9ef[_0x4a1381(0x1e8)]==_0x4a1381(0x1b2)){let _0x2a55a4=config[_0x4a1381(0x17c)][_0x4a1381(0x266)](_0x42c5a4=>_0x42c5a4[_0x4a1381(0x1b9)]==config[_0x4a1381(0x23b)]),_0xb05131=currentCoins[_0x4a1381(0x266)](_0x5a22e6=>_0x5a22e6['coin']==config[_0x4a1381(0x23b)]);if(_0x2a55a4[_0x4a1381(0x1fa)]>0x0){if(Math[_0x4a1381(0x187)](_0x2dd9ef[_0x4a1381(0x27a)])*_0x2dd9ef[_0x4a1381(0x28a)]>_0xb05131[_0x4a1381(0x185)]-_0x2a55a4[_0x4a1381(0x1fa)])_0x278f97=![];}else{if(Math[_0x4a1381(0x187)](_0x2dd9ef[_0x4a1381(0x27a)])*_0x2dd9ef[_0x4a1381(0x28a)]>_0xb05131[_0x4a1381(0x185)])_0x278f97=![];}}return _0x278f97;}async function getBalances(){const _0x4fcecb=_0x26a5b4;let _0x29a0a3=0x0,_0x2117e5;const _0x1b26fc=config[_0x4fcecb(0x188)];if(config['headless']&&config[_0x4fcecb(0x1b6)]<0x0)await validate24hChanges();currentCoins['forEach'](_0xe646e5=>{const _0x315af3=_0x4fcecb;if(_0xe646e5[_0x315af3(0x1b9)]!=config[_0x315af3(0x23b)]){let _0x6c3e1=global[_0x315af3(0x211)][noslash(_0xe646e5['symbol'])];_0x2117e5=_0xe646e5[_0x315af3(0x14a)]?0x1/_0x6c3e1:_0x6c3e1;}else _0x2117e5=0x1;let _0x315d71=_0xe646e5[_0x315af3(0x185)]*_0x2117e5;_0x29a0a3+=_0x315d71,_0xe646e5[_0x315af3(0x28a)]=formatResult(Number(_0x2117e5),0x8),_0xe646e5['value']=_0x315d71;}),currentCoins[_0x4fcecb(0x13a)](_0xf5a2d0=>{const _0x52df92=_0x4fcecb;let _0x13e750=config[_0x52df92(0x17c)][_0x52df92(0x266)](_0x4f3180=>_0x4f3180[_0x52df92(0x1b9)]==_0xf5a2d0[_0x52df92(0x1b9)]),_0x523aea=Number(_0x13e750[_0x52df92(0x258)]),_0x4a7151=_0xf5a2d0[_0x52df92(0x184)]/_0x29a0a3*0x64,_0x209144=_0x523aea*_0x29a0a3/0x64/_0xf5a2d0[_0x52df92(0x28a)]-_0xf5a2d0[_0x52df92(0x185)];_0xf5a2d0[_0x52df92(0x258)]=formatResult(_0x4a7151,0x3),_0xf5a2d0['target']=formatResult(_0x523aea,0x3),_0xf5a2d0['trade']=formatResult(_0x209144,0x8),_0xf5a2d0[_0x52df92(0x1e8)]='',_0xf5a2d0['valid']=![];if(_0xf5a2d0[_0x52df92(0x1b9)]!=config['basecoin']){if(_0xf5a2d0['distribution']>_0x523aea)_0xf5a2d0[_0x52df92(0x1e8)]=_0x52df92(0x176),_0xf5a2d0['valid']=checkMinimums(_0xf5a2d0);else _0xf5a2d0[_0x52df92(0x258)]<_0x523aea&&(_0xf5a2d0[_0x52df92(0x1e8)]=_0x52df92(0x1b2),_0xf5a2d0[_0x52df92(0x1cd)]=checkMinimums(_0xf5a2d0));}_0xf5a2d0[_0x52df92(0x14c)]=_0xf5a2d0[_0x52df92(0x258)]/_0xf5a2d0[_0x52df92(0x18c)]-0x1;if(_0xf5a2d0[_0x52df92(0x170)]==_0x52df92(0x114)||_0xf5a2d0[_0x52df92(0x170)]==_0x52df92(0x197))_0xf5a2d0[_0x52df92(0x170)]='none';}),currentCoins[_0x4fcecb(0x130)]((_0x5c2c43,_0x361729)=>_0x5c2c43['delta']<_0x361729[_0x4fcecb(0x14c)]?0x1:_0x361729[_0x4fcecb(0x14c)]<_0x5c2c43[_0x4fcecb(0x14c)]?-0x1:0x0);const _0x1e12de=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1e12de['eur'],'usd':_0x1e12de[_0x4fcecb(0x161)],'portfolio':JSON[_0x4fcecb(0x127)](currentCoins),'threshold':_0x1b26fc},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x1b26fc});else{if(lockOrders==ORDERS[_0x4fcecb(0x238)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1b26fc});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x57d068=getNormalizedPerformance();emitPerformance(_0x57d068),getStartingBalances(_0x57d068),logger['debug'](_0x4fcecb(0x1c1));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1df1ff=_0x26a5b4;if(!lastBalances)return;let _0x29261c=[],_0x4d872d,_0x55a171=JSON[_0x1df1ff(0x244)](lastBalances['portfolio']);_0x55a171[_0x1df1ff(0x130)]((_0x20489a,_0x4ba3a2)=>_0x20489a[_0x1df1ff(0x1b9)]>_0x4ba3a2['coin']?0x1:_0x4ba3a2[_0x1df1ff(0x1b9)]>_0x20489a['coin']?-0x1:0x0),_0x55a171[_0x1df1ff(0x13a)](_0x300a89=>{const _0x51c298=_0x1df1ff;let _0x120f54={'coin':_0x300a89[_0x51c298(0x1b9)],'number':_0x300a89[_0x51c298(0x185)],'price':_0x300a89[_0x51c298(0x28a)]};_0x29261c[_0x51c298(0x221)](_0x120f54);});const _0x518bc1=await getFiat();_0x4d872d={'date':lastBalances[_0x1df1ff(0x252)][_0x1df1ff(0x1b8)]('\x20')[0x0],'eur':_0x518bc1[_0x1df1ff(0x251)],'usd':_0x518bc1[_0x1df1ff(0x161)],'coins':_0x29261c};let _0x18cc8f=dbPerformance[_0x1df1ff(0x24c)](_0x1df1ff(0x146))['find']({'date':_0x4d872d[_0x1df1ff(0x271)]})[_0x1df1ff(0x184)]();_0x18cc8f?_0x4d872d[_0x1df1ff(0x271)]!=config[_0x1df1ff(0x1f8)]&&dbPerformance[_0x1df1ff(0x24c)](_0x1df1ff(0x146))[_0x1df1ff(0x266)]({'date':_0x4d872d[_0x1df1ff(0x271)]})[_0x1df1ff(0x1ba)](_0x4d872d)[_0x1df1ff(0x162)]():dbPerformance[_0x1df1ff(0x24c)]('data')[_0x1df1ff(0x221)](_0x4d872d)[_0x1df1ff(0x162)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5702ab=_0x26a5b4;let _0x52fbc6=[];if(dbPerformance[_0x5702ab(0x201)](_0x5702ab(0x146))[_0x5702ab(0x184)]()){let _0x5d6f64=dbPerformance[_0x5702ab(0x24c)](_0x5702ab(0x146))[_0x5702ab(0x1de)]()['sortBy'](_0x5702ab(0x271))[_0x5702ab(0x184)](),_0x3ecd9d=[...config[_0x5702ab(0x174)]];_0x3ecd9d[_0x5702ab(0x130)]((_0x15ca84,_0x1e9635)=>_0x15ca84[_0x5702ab(0x271)]>_0x1e9635[_0x5702ab(0x271)]?-0x1:_0x1e9635[_0x5702ab(0x271)]>_0x15ca84[_0x5702ab(0x271)]?0x1:0x0);let _0x125ec1=0x1,_0x38b817=[],_0x60562c=0x0;_0x5d6f64['slice']()[_0x5702ab(0x14a)]()[_0x5702ab(0x13a)]((_0x258c94,_0x255b47)=>{const _0x116fd1=_0x5702ab;if(_0x3ecd9d[_0x60562c]){if(_0x5d6f64[_0x5d6f64['length']-_0x255b47]&&_0x3ecd9d[_0x60562c][_0x116fd1(0x271)]==_0x5d6f64[_0x5d6f64[_0x116fd1(0x160)]-_0x255b47][_0x116fd1(0x271)]){if(_0x255b47<_0x5d6f64[_0x116fd1(0x160)]){let _0x5cf9aa=0x0,_0x31969e=0x0;_0x5d6f64[_0x5d6f64['length']-_0x255b47][_0x116fd1(0x24f)][_0x116fd1(0x13a)](_0x37bdb3=>{const _0x2cec53=_0x116fd1;_0x31969e+=_0x37bdb3['number']*_0x37bdb3[_0x2cec53(0x180)];}),_0x3ecd9d[_0x60562c][_0x116fd1(0x1eb)]['forEach'](_0x5c677b=>{const _0x37cdc2=_0x116fd1;_0x5cf9aa+=_0x5c677b[_0x37cdc2(0x185)]*_0x5c677b[_0x37cdc2(0x180)];}),_0x125ec1*=_0x5cf9aa/(_0x31969e-_0x5cf9aa)+0x1;}_0x60562c++;}}let _0x2561e4=0x0;_0x258c94['coins'][_0x116fd1(0x13a)](_0x4d2abd=>{const _0x4b47b3=_0x116fd1;_0x2561e4+=_0x4d2abd[_0x4b47b3(0x185)]*_0x4d2abd[_0x4b47b3(0x180)];}),_0x38b817[_0x5d6f64[_0x116fd1(0x160)]-_0x255b47-0x1]=_0x2561e4*(_0x125ec1-0x1);});let _0x1550cb=[];_0x3ecd9d=[...config['liquidity']]||[];let _0x32b70d=0x0;_0x60562c=0x0,_0x5d6f64[_0x5702ab(0x13a)]((_0x366b4a,_0x29c4b)=>{const _0x45d9f9=_0x5702ab;if(_0x3ecd9d[_0x60562c]){const _0x5cb384=fns[_0x45d9f9(0x244)](_0x3ecd9d[_0x60562c][_0x45d9f9(0x271)],_0x45d9f9(0x286),new Date()),_0x286f37=fns[_0x45d9f9(0x244)](_0x366b4a[_0x45d9f9(0x271)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0x5cb384,_0x286f37)){let _0x1790c1=0x0;_0x3ecd9d[_0x60562c][_0x45d9f9(0x1eb)]['forEach'](_0x1e593a=>{const _0x58f8a5=_0x45d9f9;!_0x1550cb[_0x1e593a[_0x58f8a5(0x1b9)]]?_0x1550cb[_0x1e593a[_0x58f8a5(0x1b9)]]=_0x1e593a[_0x58f8a5(0x185)]:(_0x1790c1=_0x1550cb[_0x1e593a[_0x58f8a5(0x1b9)]],_0x1550cb[_0x1e593a[_0x58f8a5(0x1b9)]]+=_0x1e593a[_0x58f8a5(0x185)]);const _0x423b8d=_0x366b4a[_0x58f8a5(0x24f)][_0x58f8a5(0x266)](_0x5df85f=>_0x5df85f[_0x58f8a5(0x1b9)]==_0x1e593a['coin']);(!_0x423b8d||_0x423b8d[_0x58f8a5(0x185)]==0x0)&&(_0x32b70d+=(-_0x1e593a['number']-_0x1790c1)*_0x1e593a[_0x58f8a5(0x180)]);}),_0x60562c++;}}_0x366b4a[_0x45d9f9(0x24f)][_0x45d9f9(0x13a)]((_0x4bc161,_0x3a8459)=>{const _0x4aaf65=_0x45d9f9;_0x1550cb[_0x4bc161['coin']]&&(_0x4bc161={..._0x4bc161,'initial':_0x1550cb[_0x4bc161[_0x4aaf65(0x1b9)]]}),_0x366b4a['coins'][_0x3a8459]=_0x4bc161;}),_0x52fbc6[_0x45d9f9(0x221)]({'date':_0x366b4a[_0x45d9f9(0x271)],'eur':_0x366b4a[_0x45d9f9(0x251)],'usd':_0x366b4a[_0x45d9f9(0x161)],'offset':_0x38b817[_0x29c4b],'netoffset':_0x32b70d,'coins':_0x366b4a[_0x45d9f9(0x24f)]});});}return _0x52fbc6;}function emitPerformance(_0x154f39){const _0x5c9f76=_0x26a5b4;_0x154f39[_0x5c9f76(0x160)]!==0x0?(proxyEmit(_0x5c9f76(0x219),_0x154f39),lastPerformanceEmitted=getDate()):proxyEmit(_0x5c9f76(0x219),[]);}function getPerf(_0x27f95c,_0x4d8a36){const _0x528424=_0x26a5b4;let _0x417be8=0x0,_0x56a3fd=0x0,_0xace7fe=0x0;_0x27f95c[_0x528424(0x24f)][_0x528424(0x13a)](_0x2e1008=>{const _0x253812=_0x528424;_0x417be8+=_0x2e1008['number']*_0x2e1008[_0x253812(0x180)];});_0x4d8a36&&(_0x417be8+=_0x27f95c[_0x528424(0x1fa)]);if(config[_0x528424(0x23b)]==='BTC'||config['basecoin']==='ETH')_0x56a3fd=_0x417be8*_0x27f95c[_0x528424(0x251)],_0xace7fe=_0x417be8*_0x27f95c[_0x528424(0x161)];else{if(config[_0x528424(0x23b)]==='BUSD'||config['basecoin']===_0x528424(0x22d)||config['basecoin']===_0x528424(0x20c))_0x56a3fd=_0x417be8*_0x27f95c[_0x528424(0x251)]/_0x27f95c[_0x528424(0x161)],_0xace7fe=_0x417be8;else config[_0x528424(0x23b)]==='EUR'&&(_0x56a3fd=_0x417be8,_0xace7fe=_0x417be8*_0x27f95c['usd']/_0x27f95c[_0x528424(0x251)]);}return[_0x417be8,_0x56a3fd,_0xace7fe];}function getKPIs(_0x2550ba,_0x1cfed1='EUR'){const _0x470bb0=_0x26a5b4,_0x2bbade=config[_0x470bb0(0x23b)],_0x22e81b=lastBalances,_0x4cedfc=currentCoins,_0x47074c=getNormalizedPerformance(),_0x42826c=_0x2550ba===_0x470bb0(0x23b)?_0x2bbade:_0x2550ba===_0x470bb0(0x26e)||_0x2550ba==='net-fiat'?_0x1cfed1:'Net\x20'+_0x2bbade,_0x87853f=_0x2550ba===_0x470bb0(0x142)?_0x470bb0(0x122):_0x2550ba==='net-fiat'?_0x470bb0(0x122):_0x42826c+'\x20value',_0x47910b=_0x2550ba===_0x470bb0(0x142)||_0x2550ba==='net-fiat'?_0x470bb0(0x122):_0x42826c+'\x20change';let _0x590ad=0x0;_0x4cedfc['forEach'](_0x43f4d4=>{_0x590ad+=_0x43f4d4['number']*_0x43f4d4['last'];});if(_0x2550ba===_0x470bb0(0x26e)||_0x2550ba===_0x470bb0(0x1c9)){if(_0x2bbade===_0x470bb0(0x222)||_0x2bbade===_0x470bb0(0x1d2))_0x590ad=_0x590ad*(_0x1cfed1===_0x470bb0(0x290)?_0x22e81b[_0x470bb0(0x251)]:_0x22e81b[_0x470bb0(0x161)]);else{if(_0x2bbade==='BUSD'||_0x2bbade===_0x470bb0(0x22d)||_0x2bbade===_0x470bb0(0x20c))_0x590ad=_0x590ad*(_0x1cfed1===_0x470bb0(0x290)?_0x22e81b[_0x470bb0(0x251)]/_0x22e81b['usd']:0x1);else _0x2bbade===_0x470bb0(0x290)&&(_0x590ad=_0x590ad*(_0x1cfed1===_0x470bb0(0x290)?0x1:_0x22e81b[_0x470bb0(0x161)]/_0x22e81b['eur']));}}let _0x3aa8e3;if(_0x590ad!==0x0){if(_0x2550ba===_0x470bb0(0x23b))_0x3aa8e3=(_0x590ad/startingBalances[_0x470bb0(0x23b)]-0x1)*0x64;else{if(_0x1cfed1===_0x470bb0(0x290))_0x3aa8e3=(_0x590ad/startingBalances['eur']-0x1)*0x64;else _0x3aa8e3=(_0x590ad/startingBalances[_0x470bb0(0x161)]-0x1)*0x64;}let _0x586dda=0x0;if(startingBalances[_0x470bb0(0x24f)])_0x4cedfc['forEach'](_0x2c45c4=>{const _0x2cf616=_0x470bb0;let _0x54596d=startingBalances[_0x2cf616(0x24f)]['find'](_0x1a5236=>_0x1a5236['coin']===_0x2c45c4[_0x2cf616(0x1b9)]);if(_0x54596d&&_0x54596d[_0x2cf616(0x1b9)]&&_0x2c45c4['number']!==0x0)_0x586dda+=_0x54596d[_0x2cf616(0x185)]*_0x2c45c4[_0x2cf616(0x28a)];});let _0x478337=0x0;if(_0x47074c['length']!==0x0){let _0x36fcde=_0x47074c[_0x47074c['length']-0x1];_0x478337=_0x36fcde[_0x470bb0(0x1bf)];}_0x586dda-=_0x478337;_0x2550ba==='net-basecoin'&&(_0x3aa8e3=(_0x590ad-_0x586dda)/startingBalances[_0x470bb0(0x23b)]*0x64,_0x590ad=_0x590ad-_0x586dda);if(_0x2550ba===_0x470bb0(0x1c9)){let _0x3b72e3=_0x1cfed1===_0x470bb0(0x290)?startingBalances['eur']:startingBalances[_0x470bb0(0x161)];if(_0x2bbade===_0x470bb0(0x222)||_0x2bbade==='ETH')_0x586dda=_0x1cfed1===_0x470bb0(0x290)?_0x586dda*_0x22e81b['eur']:_0x586dda*_0x22e81b[_0x470bb0(0x161)];else{if(_0x2bbade==='BUSD'||_0x2bbade==='USDT'||_0x2bbade===_0x470bb0(0x20c))_0x586dda=_0x1cfed1===_0x470bb0(0x290)?_0x586dda*_0x22e81b['eur']/_0x22e81b[_0x470bb0(0x161)]:_0x586dda;else _0x2bbade===_0x470bb0(0x290)&&(_0x586dda=_0x1cfed1===_0x470bb0(0x290)?_0x586dda:_0x586dda*_0x22e81b[_0x470bb0(0x161)]/_0x22e81b[_0x470bb0(0x251)]);}_0x3aa8e3=(_0x590ad-_0x586dda)/_0x3b72e3*0x64,_0x590ad=_0x590ad-_0x586dda;}if(_0x3aa8e3){if(_0x3aa8e3<0x64)_0x3aa8e3=_0x3aa8e3[_0x470bb0(0x1ac)](0x2);else{if(_0x3aa8e3<0x3e8)_0x3aa8e3=_0x3aa8e3[_0x470bb0(0x1ac)](0x1);else _0x3aa8e3=_0x3aa8e3[_0x470bb0(0x1ac)](0x0);}}else _0x3aa8e3=Number('0')[_0x470bb0(0x1ac)](0x2);if(_0x590ad){if(Math[_0x470bb0(0x187)](_0x590ad)<0.000001)_0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x2);else{if(Math['abs'](_0x590ad)<0.1)_0x590ad=_0x590ad['toFixed'](0x6);else{if(Math[_0x470bb0(0x187)](_0x590ad)<0x1)_0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x5);else{if(Math[_0x470bb0(0x187)](_0x590ad)<0xa)_0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x4);else{if(Math[_0x470bb0(0x187)](_0x590ad)<0x64)_0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x3);else{if(Math[_0x470bb0(0x187)](_0x590ad)<0x3e8)_0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x2);else _0x590ad=_0x590ad[_0x470bb0(0x1ac)](0x2);}}}}}}else _0x590ad=Number('0')['toFixed'](0x2);}else _0x3aa8e3=Number('0')[_0x470bb0(0x1ac)](0x2);return{'value':_0x590ad,'change':_0x3aa8e3,'leftTxt':_0x87853f,'rightTxt':_0x47910b};}async function getStartingBalances(_0x19e6fc,_0x350036=!![]){const _0x430145=_0x26a5b4;if(_0x19e6fc[_0x430145(0x160)]!==0x0){const [_0xbc9e2,_0xb49f6a,_0x4925e1]=getPerf(_0x19e6fc[0x0],!![]);let _0x25c252=[];config[_0x430145(0x17c)][_0x430145(0x13a)](_0x1328b8=>{const _0x12bac9=_0x430145;let _0x582227=0x0,_0x1c87f1;config[_0x12bac9(0x174)]['forEach'](_0x5d0d4e=>{const _0x3ada9d=_0x12bac9;let _0x5ee446=_0x5d0d4e['changes']['find'](_0x120140=>_0x120140[_0x3ada9d(0x1b9)]==_0x1328b8[_0x3ada9d(0x1b9)]);if(_0x5ee446){_0x582227+=_0x5ee446[_0x3ada9d(0x185)];if(!_0x1c87f1)_0x1c87f1=_0x5ee446[_0x3ada9d(0x180)];}}),_0x25c252[_0x12bac9(0x221)]({'coin':_0x1328b8[_0x12bac9(0x1b9)],'number':_0x582227,'initialprice':_0x1c87f1});});const _0xfcb647={'basecoin':_0xbc9e2,'eur':_0xb49f6a,'usd':_0x4925e1,'coins':_0x25c252};if(_0x350036)proxyEmit(_0x430145(0x262),_0xfcb647);startingBalances=_0xfcb647;}}function headlessMode(_0x3fe974){const _0x26c4aa=_0x26a5b4;let _0x337512=_0x3fe974['portfolio'],_0x35ea=_0x3fe974[_0x26c4aa(0x188)],_0x4ec2cd=[];for(let _0x156859 of _0x337512){if(_0x156859[_0x26c4aa(0x1b9)]!=config['basecoin']){if(_0x156859[_0x26c4aa(0x14c)]>=_0x35ea/0x64){if(_0x156859['valid'])_0x4ec2cd[_0x26c4aa(0x221)](_0x156859);}else{if(_0x156859[_0x26c4aa(0x14c)]<=-_0x35ea/0x64){if(_0x156859[_0x26c4aa(0x1cd)])_0x4ec2cd[_0x26c4aa(0x221)](_0x156859);}}}}_0x4ec2cd[_0x26c4aa(0x160)]>0x0&&placeOrder(_0x4ec2cd);}function notifyBalance(_0x1aa9ce){const _0x5a41a0=_0x26a5b4;let _0x1caf50=_0x1aa9ce[_0x5a41a0(0x17c)],_0x2582d8=_0x1aa9ce['threshold'],_0x1ddc83=[];for(let _0xd05d3 of _0x1caf50){if(_0xd05d3[_0x5a41a0(0x1b9)]!=config['basecoin']){if(_0xd05d3[_0x5a41a0(0x14c)]>=_0x2582d8/0x64){if(_0xd05d3[_0x5a41a0(0x1cd)])_0x1ddc83[_0x5a41a0(0x221)](_0xd05d3);}else{if(_0xd05d3[_0x5a41a0(0x14c)]<=-_0x2582d8/0x64){if(_0xd05d3[_0x5a41a0(0x1cd)])_0x1ddc83['push'](_0xd05d3);}}}}if(_0x1ddc83[_0x5a41a0(0x160)]>0x0){let _0x54a313=_0x1ddc83[_0x5a41a0(0x1c3)](_0x182b56=>_0x182b56[_0x5a41a0(0x1b9)]);_0x54a313['sort']();let _0x2ff6cf=_0x54a313[_0x5a41a0(0x147)](',\x20');if(!lastCoinsToBalance)logHistory(_0x5a41a0(0x213),_0x5a41a0(0x1cf));lastCoinsToBalance=_0x2ff6cf;}}function symbolToCoin(_0x233b6c){const _0x55a4be=_0x26a5b4;let _0x6a9799;if(_0x233b6c['includes']('/'+config[_0x55a4be(0x23b)]))_0x6a9799=_0x233b6c[_0x55a4be(0x1b1)]('/'+config[_0x55a4be(0x23b)],'');if(_0x233b6c['includes'](config[_0x55a4be(0x23b)]+'/'))_0x6a9799=_0x233b6c[_0x55a4be(0x1b1)](config[_0x55a4be(0x23b)]+'/','');return _0x6a9799;}async function unlockOrders(){const _0x158df3=_0x26a5b4;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x158df3(0x224)),lockOrders=ORDERS[_0x158df3(0x181)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x158df3(0x1f4),persistOpenOrders([]),lockOrders=ORDERS[_0x158df3(0x238)],logger['debug']('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x5c2d44){const _0x51b9df=_0x26a5b4;if(_0x5c2d44)validateOrdersState=_0x5c2d44;logger['debug'](_0x51b9df(0x150)+validateOrdersState+_0x51b9df(0x119)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x493450=[],_0x59f262=config['ordertype']==_0x51b9df(0x21f)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x51b9df(0x120)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x51b9df(0x1c4)])return;logger[_0x51b9df(0x1e2)](_0x51b9df(0x23e)+validateOrdersState),lastOrders['forEach'](_0x5e6310=>{const _0x516a21=_0x51b9df;let _0x53bc8b=![];_0x5e6310['filled']>0x0&&(_0x53bc8b=!![]),_0x493450[_0x516a21(0x221)](_0x53bc8b),_0x53bc8b&&config[_0x516a21(0x18d)]!=_0x516a21(0x21f)&&logHistory(_0x516a21(0x20f),_0x516a21(0x21c)+_0x5e6310[_0x516a21(0x1a4)]+'\x20'+_0x5e6310[_0x516a21(0x1e8)]+'\x20#'+formatResult(_0x5e6310[_0x516a21(0x114)],0x8)+'\x20@'+formatResult(_0x5e6310[_0x516a21(0x180)],0x8));}),_0x493450[_0x51b9df(0x13a)]((_0x49614c,_0xb9c3e2)=>{const _0x2e3641=_0x51b9df;if(_0x49614c)lastOrders[_0x2e3641(0x149)](_0xb9c3e2,0x1);}),persistOpenOrders(lastOrders);const _0x4bff71=coolingDown?_0x51b9df(0x233):_0x51b9df(0x206);if(validateOrdersState==_0x51b9df(0x1f4))validateOrdersState=_0x51b9df(0x241),_0x493450['includes'](![])?config[_0x51b9df(0x18d)]==_0x51b9df(0x21f)?logHistory(_0x51b9df(0x213),_0x51b9df(0x13d)):logHistory('warning',_0x51b9df(0x210)):await unlockOrders();else{if(validateOrdersState==_0x51b9df(0x241)){if(_0x493450['includes'](![])){}else allOrdersPlaced&&(config[_0x51b9df(0x18d)]==_0x51b9df(0x21f)?logHistory(_0x51b9df(0x1bc),_0x51b9df(0x209)+_0x4bff71):logHistory(_0x51b9df(0x1bc),_0x51b9df(0x1d9)+_0x4bff71),await unlockOrders());}else{if(validateOrdersState==_0x51b9df(0x16c))_0x493450[_0x51b9df(0x152)](![])&&(config[_0x51b9df(0x18d)]==_0x51b9df(0x21f)?logHistory(_0x51b9df(0x1bc),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x51b9df(0x25c)](_0x59f262*validateOrderInterval/0xea60)+_0x51b9df(0x25b)+_0x4bff71):(await cancelOrders(),logHistory(_0x51b9df(0x1bc),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x51b9df(0x25c)](_0x59f262*validateOrderInterval/0xea60)+_0x51b9df(0x25b)+_0x4bff71))),await unlockOrders();else{if(validateOrdersState==_0x51b9df(0x1b4)){if(config[_0x51b9df(0x18d)]!=_0x51b9df(0x21f))logHistory(_0x51b9df(0x1bc),'No\x20more\x20open\x20orders\x20-\x20'+_0x4bff71);await unlockOrders();}}}}}async function cancelOrders(){const _0xc62e39=_0x26a5b4;lastOrders[_0xc62e39(0x13a)](async _0x5f4325=>{const _0x5a1728=_0xc62e39;try{const _0xeb92ef=await exchange[_0x5a1728(0x1f7)](_0x5f4325[_0x5a1728(0x156)],_0x5f4325['symbol']);}catch(_0x6a06ad){if(_0x6a06ad[_0x5a1728(0x17a)]()['includes']('OrderNotFound')){}else await handleError(_0x6a06ad,_0x5a1728(0x17f));}});}async function initCoinResults(){const _0x13f0ae=_0x26a5b4;let _0x279012=[];config['portfolio'][_0x13f0ae(0x13a)](_0x21e08a=>{const _0x37b02a=_0x13f0ae;if(!_0x21e08a[_0x37b02a(0x199)]&&_0x21e08a[_0x37b02a(0x1b9)]!=config[_0x37b02a(0x23b)]){let _0x53db67=dbCoinResults[_0x37b02a(0x24c)](_0x37b02a(0x24f))[_0x37b02a(0x266)]({'coin':_0x21e08a[_0x37b02a(0x1b9)]})['value']();if(!_0x53db67){const _0x3fd810=currentCoins[_0x37b02a(0x266)](_0x511879=>_0x511879[_0x37b02a(0x1b9)]==_0x21e08a[_0x37b02a(0x1b9)]),_0x191734=global[_0x37b02a(0x211)][noslash(_0x21e08a['symbol'])];let _0x5dc64e=_0x3fd810?_0x3fd810['number']:null,_0x350393=_0x21e08a[_0x37b02a(0x14a)]?0x1/_0x191734:_0x191734,_0x3a127e;config[_0x37b02a(0x174)][_0x37b02a(0x13a)](_0x49eb60=>{const _0x54a5f6=_0x37b02a;!_0x3a127e&&(_0x3a127e=_0x49eb60[_0x54a5f6(0x1eb)]['find'](_0x9cf907=>_0x9cf907['coin']==_0x21e08a[_0x54a5f6(0x1b9)]),_0x3a127e&&(_0x5dc64e=_0x3a127e[_0x54a5f6(0x185)],_0x350393=_0x3a127e[_0x54a5f6(0x180)]));}),_0x279012['push']({'coin':_0x21e08a[_0x37b02a(0x1b9)],'number':_0x5dc64e,'price':_0x350393});}}}),_0x279012[_0x13f0ae(0x13a)](_0x4de282=>{const _0x1ab432=_0x13f0ae,_0x5c5720={'coin':_0x4de282[_0x1ab432(0x1b9)],'number':_0x4de282[_0x1ab432(0x185)],'breakeven':_0x4de282[_0x1ab432(0x180)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1ab432(0x24f))[_0x1ab432(0x221)](_0x5c5720)['write']();});}async function updateCoinResults(_0x1ff9b0,_0x54a507=![]){const _0x371c3b=_0x26a5b4;let _0x452ac3,_0x1152d6,_0x11b4d4,_0x53b367,_0x1f9e14,_0x1bbcdc,_0x26ca2f=dbCoinResults[_0x371c3b(0x24c)](_0x371c3b(0x24f))[_0x371c3b(0x266)]({'coin':_0x1ff9b0[_0x371c3b(0x1b9)]})[_0x371c3b(0x184)]();!_0x26ca2f&&await initCoinResults();_0x1ff9b0[_0x371c3b(0x14a)]&&(_0x1bbcdc={'filled':_0x1ff9b0['filled']*_0x1ff9b0[_0x371c3b(0x180)],'amount':_0x1ff9b0['filled']*_0x1ff9b0[_0x371c3b(0x180)],'side':_0x1ff9b0[_0x371c3b(0x1e8)]==_0x371c3b(0x176)?_0x371c3b(0x1b2):_0x371c3b(0x176),'price':0x1/_0x1ff9b0[_0x371c3b(0x180)]},_0x1ff9b0={..._0x1ff9b0,..._0x1bbcdc});_0x54a507?_0x1152d6=_0x1ff9b0['side']==_0x371c3b(0x1b2)?_0x26ca2f['number']+_0x1ff9b0[_0x371c3b(0x114)]:_0x26ca2f['number']-_0x1ff9b0[_0x371c3b(0x114)]:_0x1152d6=await getCoinNumber(_0x1ff9b0['coin']);if(_0x1ff9b0[_0x371c3b(0x230)]&&_0x1ff9b0['fee'][_0x371c3b(0x234)]==config[_0x371c3b(0x23b)])_0x452ac3=_0x1ff9b0[_0x371c3b(0x230)][_0x371c3b(0x1a9)];else{if(_0x1ff9b0[_0x371c3b(0x230)]&&_0x1ff9b0[_0x371c3b(0x230)]['currency']==_0x371c3b(0x17e)&&!_0x54a507)_0x452ac3=_0x1ff9b0[_0x371c3b(0x230)][_0x371c3b(0x1a9)]*global[_0x371c3b(0x211)][_0x371c3b(0x17e)+config[_0x371c3b(0x23b)]];else _0x452ac3=defaultFee*_0x1ff9b0['filled']*_0x1ff9b0['price'];}_0x1ff9b0[_0x371c3b(0x1e8)]==_0x371c3b(0x1b2)?(_0x11b4d4=_0x1152d6!=0x0?(_0x26ca2f[_0x371c3b(0x144)]*_0x26ca2f['number']+_0x1ff9b0[_0x371c3b(0x180)]*(_0x1152d6-_0x26ca2f[_0x371c3b(0x185)])+_0x452ac3)/_0x1152d6:0x0,_0x53b367=_0x26ca2f[_0x371c3b(0x220)]):(_0x11b4d4=_0x1152d6!=0x0?(_0x26ca2f[_0x371c3b(0x144)]*_0x26ca2f[_0x371c3b(0x185)]-_0x1ff9b0[_0x371c3b(0x180)]*(_0x26ca2f[_0x371c3b(0x185)]-_0x1152d6)+_0x452ac3)/_0x1152d6:0x0,_0x53b367=_0x26ca2f['realized']+(_0x1ff9b0[_0x371c3b(0x180)]-_0x26ca2f[_0x371c3b(0x144)])*_0x1ff9b0[_0x371c3b(0x114)]);_0x1f9e14=(_0x1ff9b0['price']-_0x11b4d4-_0x452ac3/_0x1ff9b0[_0x371c3b(0x114)])*_0x1152d6;let _0x39e6d9={'coin':_0x1ff9b0[_0x371c3b(0x1b9)],'number':_0x1152d6,'breakeven':formatResult(_0x11b4d4,0x8),'realized':formatResult(_0x53b367,0x8),'unrealized':formatResult(_0x1f9e14,0x8),'fees':formatResult(_0x26ca2f[_0x371c3b(0x148)]+_0x452ac3,0x8),'sells':_0x1ff9b0['side']==_0x371c3b(0x176)?_0x26ca2f[_0x371c3b(0x26a)]+0x1:_0x26ca2f[_0x371c3b(0x26a)],'buys':_0x1ff9b0[_0x371c3b(0x1e8)]=='buy'?_0x26ca2f['buys']+0x1:_0x26ca2f[_0x371c3b(0x1a1)]};dbCoinResults['get'](_0x371c3b(0x24f))[_0x371c3b(0x266)]({'coin':_0x1ff9b0[_0x371c3b(0x1b9)]})[_0x371c3b(0x1ba)](_0x39e6d9)[_0x371c3b(0x162)]();if(!_0x54a507){if(_0x1ff9b0[_0x371c3b(0x230)]&&_0x1ff9b0[_0x371c3b(0x230)][_0x371c3b(0x234)]==_0x371c3b(0x17e)){const _0x1c7b62=currentCoins[_0x371c3b(0x266)](_0x528721=>_0x528721[_0x371c3b(0x1b9)]=='BNB');if(_0x1c7b62){let _0x3a5bb7=dbCoinResults[_0x371c3b(0x24c)]('coins')[_0x371c3b(0x266)]({'coin':_0x371c3b(0x17e)})[_0x371c3b(0x184)]();_0x39e6d9={..._0x3a5bb7,'number':_0x1c7b62[_0x371c3b(0x185)]},dbCoinResults[_0x371c3b(0x24c)](_0x371c3b(0x24f))[_0x371c3b(0x266)]({'coin':_0x371c3b(0x17e)})[_0x371c3b(0x1ba)](_0x39e6d9)['write']();}}}}async function placeOrder(_0x440e04){const _0x29bf22=_0x26a5b4,_0x275823=config['ordertype']=='market'?_0x29bf22(0x21f):'limit';if(lockOrders==ORDERS[_0x29bf22(0x238)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x29bf22(0x1f4),lastOrders=[];for(const _0x3e76cf of _0x440e04){let _0x104414,_0x5d499f,_0x3f8a79,_0x48d9a5,_0x10f33b,_0x3f6ad0=_0x3e76cf['symbol'];try{const _0x304ef0=await exchange['fetchTicker'](_0x3f6ad0);_0x104414=_0x3e76cf['reverse']?0x1/_0x3e76cf[_0x29bf22(0x28a)]:_0x3e76cf[_0x29bf22(0x28a)],_0x5d499f=_0x304ef0[_0x29bf22(0x145)],_0x3f8a79=_0x304ef0['ask'];_0x3e76cf[_0x29bf22(0x14a)]?(_0x48d9a5=_0x3e76cf[_0x29bf22(0x1e8)]==_0x29bf22(0x1b2)?'sell':_0x29bf22(0x1b2),_0x10f33b=Math[_0x29bf22(0x187)](_0x3e76cf['trade'])/_0x104414):(_0x48d9a5=_0x3e76cf[_0x29bf22(0x1e8)],_0x10f33b=Math[_0x29bf22(0x187)](_0x3e76cf[_0x29bf22(0x27a)]));_0x275823==_0x29bf22(0x256)&&(config[_0x29bf22(0x18d)]==_0x29bf22(0x16a)&&(_0x104414=_0x48d9a5==_0x29bf22(0x1b2)?_0x5d499f:_0x3f8a79),config[_0x29bf22(0x18d)]==_0x29bf22(0x15f)&&(_0x104414=_0x48d9a5==_0x29bf22(0x1b2)?_0x3f8a79:_0x5d499f));_0x10f33b=formatResult(_0x10f33b,0x8),_0x104414=formatResult(_0x104414,0x8);const _0x1618f0=_0x48d9a5==_0x29bf22(0x176)?config[_0x29bf22(0x1a5)]?String[_0x29bf22(0x1c8)]('0x'+config[_0x29bf22(0x1a5)])+'\x20':'':config[_0x29bf22(0x249)]?String[_0x29bf22(0x1c8)]('0x'+config[_0x29bf22(0x249)])+'\x20':'',_0x435e52=_0x275823==_0x29bf22(0x21f)?_0x29bf22(0x214):config[_0x29bf22(0x18d)]==_0x29bf22(0x16a)?_0x29bf22(0x16b):_0x29bf22(0x1e0),_0x3c49a1=new Date()[_0x29bf22(0x24b)]()[_0x29bf22(0x17a)]()['slice'](-0x6)+'-'+Math[_0x29bf22(0x1ee)]()[_0x29bf22(0x17a)]()[_0x29bf22(0x236)](-0x6);lastOrders[_0x29bf22(0x221)]({'customId':_0x3c49a1,'symbol':_0x3f6ad0,'coin':_0x3e76cf['coin'],'side':_0x48d9a5,'reverse':_0x3e76cf['reverse'],'filled':0x0});if(_0x275823=='market')logHistory('order',''+_0x1618f0+_0x435e52+_0x29bf22(0x1c0)+_0x3f6ad0+'\x20'+_0x48d9a5+'\x20#'+formatResult(_0x10f33b,0x8)+'\x20@'+formatResult(_0x104414,0x8));else logHistory(_0x29bf22(0x20f),''+_0x1618f0+_0x435e52+_0x29bf22(0x1c0)+_0x3f6ad0+'\x20'+_0x48d9a5+'\x20#'+formatResult(_0x10f33b,0x8)+'\x20@'+formatResult(_0x104414,0x8));const _0x45639c=await exchange[_0x29bf22(0x16f)](_0x3f6ad0,_0x275823,_0x48d9a5,_0x10f33b,_0x104414,{'clientOrderId':_0x3c49a1}),_0x732a0d=lastOrders[_0x29bf22(0x160)]-0x1;_0x732a0d>=0x0&&lastOrders[_0x732a0d][_0x29bf22(0x20b)]==_0x3c49a1&&(lastOrders[_0x732a0d]={...lastOrders[_0x732a0d],'orderId':_0x45639c['id'],'amount':_0x45639c['amount'],'price':_0x45639c[_0x29bf22(0x180)],'fee':_0x45639c[_0x29bf22(0x230)]});if(config['cooldown']!=0x0){let _0x398a3d=null;if(cooldownTracker[_0x29bf22(0x160)]==config['cooldown']-0x1)_0x398a3d=cooldownTracker[_0x29bf22(0x28c)]();const _0x141316=getTimeStamp();cooldownTracker[_0x29bf22(0x221)](_0x141316);if(_0x398a3d){const _0x571410=fns[_0x29bf22(0x20e)](new Date(_0x141316),new Date(_0x398a3d));if(_0x571410<cooldownInterval){logHistory(_0x29bf22(0x194),_0x29bf22(0x1aa)+config[_0x29bf22(0x1f2)]+_0x29bf22(0x14d)+cooldownInterval/0x3c+_0x29bf22(0x203)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x36544e){if(_0x36544e[_0x29bf22(0x17a)]()[_0x29bf22(0x152)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x29bf22(0x27e)](_0x2d426b=>_0x2d426b[_0x29bf22(0x1a4)]!=_0x3f6ad0),logHistory(_0x29bf22(0x194),_0x29bf22(0x1e6)+_0x3f6ad0);else _0x36544e['toString']()[_0x29bf22(0x152)](_0x29bf22(0x125))?(lastOrders=lastOrders[_0x29bf22(0x27e)](_0x28f190=>_0x28f190[_0x29bf22(0x1a4)]!=_0x3f6ad0),logHistory(_0x29bf22(0x194),'Order\x20amount\x20is\x20invalid:\x20'+_0x3f6ad0)):(lastOrders=lastOrders[_0x29bf22(0x27e)](_0x17cdba=>_0x17cdba[_0x29bf22(0x1a4)]!=_0x3f6ad0),await handleError(_0x36544e,'placeOrder()',_0x3f6ad0));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0xb75b47=config[_0x29bf22(0x18d)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3d293e=_0x29bf22;validateOrders(_0x3d293e(0x16c));},_0xb75b47);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x29bf22(0x1bc),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x29bf22(0x143)]&&logHistory(_0x29bf22(0x194),_0x29bf22(0x153));else lockOrders!=ORDERS[_0x29bf22(0x238)]&&(!config['headless']&&(config[_0x29bf22(0x18d)]==_0x29bf22(0x21f)?logHistory(_0x29bf22(0x194),_0x29bf22(0x12e)):logHistory(_0x29bf22(0x194),_0x29bf22(0x1ef))));}}function persistOpenOrders(_0x478e2e){const _0x1608d0=_0x26a5b4,_0x1f5e9f={...config,'openOrders':_0x478e2e};let _0x4bc2b5=dbConfig[_0x1608d0(0x24c)](_0x1608d0(0x163))['find']({'botID':botID})[_0x1608d0(0x184)]();_0x4bc2b5&&dbConfig[_0x1608d0(0x24c)]('bot')[_0x1608d0(0x266)]({'botID':botID})[_0x1608d0(0x1ba)](_0x1f5e9f)[_0x1608d0(0x162)]();}function restoreOrders(){const _0x245a3f=_0x26a5b4;let _0x20d97c;config['openOrders']&&allOpenOrders[_0x245a3f(0x13a)](_0x241501=>{const _0x4cd887=_0x245a3f,_0x2f5758=config[_0x4cd887(0x254)]['find'](_0x580817=>_0x580817[_0x4cd887(0x156)]==_0x241501['id']);_0x2f5758&&(lastOrders[_0x4cd887(0x221)](_0x2f5758),_0x20d97c=_0x241501['timestamp']);});if(lastOrders[_0x245a3f(0x160)]>0x0){lockOrders=ORDERS[_0x245a3f(0x1c4)],validateOrdersState=_0x245a3f(0x241),allOrdersPlaced=!![];const _0x3af2c1=new Date()[_0x245a3f(0x24b)](),_0x82f2ab=config[_0x245a3f(0x18d)]==_0x245a3f(0x21f)?validateOrderTimeout*0x3c*0x3e8:config[_0x245a3f(0x120)]*0x3c*0x3e8;if(_0x20d97c+_0x82f2ab>_0x3af2c1){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3c75c9=_0x245a3f;validateOrders(_0x3c75c9(0x16c));},_0x20d97c+_0x82f2ab-_0x3af2c1);}else validateOrders(_0x245a3f(0x16c));}}async function sendMetricsTelegram(){const _0x5e8a90=_0x26a5b4;if(!coinsLoaded){process[_0x5e8a90(0x250)]({'telegrammsg':_0x5e8a90(0x21a)},_0x2c9c17=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x43c7be='';if(config[_0x5e8a90(0x289)])_0x43c7be='<b>'+config[_0x5e8a90(0x284)]+_0x5e8a90(0x22f);else _0x43c7be=_0x5e8a90(0x22e)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x10f942=getKPIs(_0x5e8a90(0x23b)),_0x52c478=getKPIs('fiat',config[_0x5e8a90(0x26e)]),_0x20b42f=getKPIs('net-basecoin'),_0x56e70f=getKPIs(_0x5e8a90(0x1c9),config['fiat']);_0x43c7be+=_0x5e8a90(0x179),_0x43c7be+=_0x10f942[_0x5e8a90(0x248)]+'\x20:\x20'+_0x10f942[_0x5e8a90(0x184)]+'\x0a',_0x43c7be+=_0x10f942['rightTxt']+':\x20'+_0x10f942[_0x5e8a90(0x232)]+'%\x0a',_0x43c7be+=_0x52c478[_0x5e8a90(0x248)]+'\x20:\x20'+_0x52c478['value']+'\x0a',_0x43c7be+=_0x52c478['rightTxt']+':\x20'+_0x52c478['change']+'%\x0a',_0x43c7be+=_0x20b42f[_0x5e8a90(0x248)]+':\x20'+_0x20b42f[_0x5e8a90(0x184)]+'\x20('+config[_0x5e8a90(0x23b)]+')\x0a',_0x43c7be+=_0x20b42f[_0x5e8a90(0x158)]+':\x20'+_0x20b42f[_0x5e8a90(0x232)]+'%\x20('+config[_0x5e8a90(0x23b)]+')\x0a',_0x43c7be+=_0x56e70f[_0x5e8a90(0x248)]+':\x20'+_0x56e70f[_0x5e8a90(0x184)]+'\x20('+config['fiat']+')\x0a',_0x43c7be+=_0x56e70f[_0x5e8a90(0x158)]+':\x20'+_0x56e70f['change']+_0x5e8a90(0x117)+config['fiat']+')\x0a',_0x43c7be+='</pre>',process['send']({'telegrammsg':_0x43c7be},_0x4918de=>{});}async function sendPortfolioTelegram(){const _0x2d72e1=_0x26a5b4;if(!coinsLoaded){process[_0x2d72e1(0x250)]({'telegrammsg':_0x2d72e1(0x21a)},_0x12f5ac=>{});return;}let _0xb9544='';if(config[_0x2d72e1(0x289)])_0xb9544=_0x2d72e1(0x1ff)+config[_0x2d72e1(0x284)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0xb9544=_0x2d72e1(0x22e)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xb9544+=_0x2d72e1(0x179),_0xb9544+=_0x2d72e1(0x12f),_0xb9544+=_0x2d72e1(0x23a),_0xb9544+='-------------------------------\x0a',currentCoins[_0x2d72e1(0x13a)](_0x1661d8=>{const _0x3b0643=_0x2d72e1;_0xb9544+=_0x1661d8[_0x3b0643(0x1b9)][_0x3b0643(0x18a)](0x7)+'|\x20'+formatPad(_0x1661d8[_0x3b0643(0x258)],0x2,0x6)+'|\x20'+formatPad(_0x1661d8[_0x3b0643(0x18c)],0x2,0x6)+'|\x20'+formatPad(_0x1661d8[_0x3b0643(0x14c)]*0x64,0x2,0x6)+'\x0a';}),_0xb9544+=_0x2d72e1(0x25d),process[_0x2d72e1(0x250)]({'telegrammsg':_0xb9544},_0x28c2cb=>{});}function formatPad(_0xddf67a,_0xbb9e9a,_0x5e51e9){const _0x5dddd0=_0x26a5b4,_0x3ee861=formatResultString(_0xddf67a,_0xbb9e9a);return _0x3ee861?_0x3ee861[_0x5dddd0(0x136)](_0x5e51e9):''[_0x5dddd0(0x136)](_0x5e51e9);}function logHistory(_0x4958e,_0x5d55b5,_0x52f98e=''){const _0x3ad944=_0x26a5b4;let _0x161e5d={'time':getTimeStamp(),'type':_0x4958e,'event':_0x5d55b5};dbLogs['get'](_0x3ad944(0x11f))['push'](_0x161e5d)[_0x3ad944(0x162)]();if(_0x52f98e=='')_0x52f98e=_0x5d55b5;proxyEmit('event',{'log':_0x161e5d,'summary':_0x52f98e}),process[_0x3ad944(0x250)]({'telegram':{..._0x161e5d,'botname':config[_0x3ad944(0x284)],'showname':config[_0x3ad944(0x289)]}},_0x1c18b7=>{}),logger['full'](''+_0x161e5d[_0x3ad944(0x1a6)]);}function emitHistory(_0x5335ac={}){const _0x1e4295=_0x26a5b4;Object[_0x1e4295(0x141)](_0x5335ac)[_0x1e4295(0x160)]==0x0&&(_0x5335ac={'type':['order',_0x1e4295(0x1a6)],'event':'','page':0x1});if(_0x5335ac[_0x1e4295(0x1b5)][_0x1e4295(0x152)](_0x1e4295(0x1a6)))_0x5335ac[_0x1e4295(0x1b5)]['splice'](_0x5335ac['type']['indexOf']('event'),0x1,_0x1e4295(0x194),_0x1e4295(0x213),_0x1e4295(0x1bc));if(dbLogs['has'](_0x1e4295(0x11f))[_0x1e4295(0x184)]()){let _0x2bfbdd=dbLogs[_0x1e4295(0x24c)](_0x1e4295(0x11f))[_0x1e4295(0x27e)](_0x4d08b1=>{const _0x18d348=_0x1e4295;if(_0x5335ac['type'][_0x18d348(0x160)]==0x0)return![];else return _0x5335ac['type'][_0x18d348(0x152)](_0x4d08b1['type']);})[_0x1e4295(0x27e)](_0xf16619=>{const _0x5d71aa=_0x1e4295;if(_0x5335ac[_0x5d71aa(0x1a6)]=='')return!![];else return _0xf16619[_0x5d71aa(0x1a6)][_0x5d71aa(0x269)]()[_0x5d71aa(0x152)](_0x5335ac[_0x5d71aa(0x1a6)][_0x5d71aa(0x269)]());})[_0x1e4295(0x272)](_0x1e4295(0x252)),_0xdd7e07=_0x2bfbdd[_0x1e4295(0x184)]()[_0x1e4295(0x160)];_0x2bfbdd=_0x2bfbdd[_0x1e4295(0x14a)]()[_0x1e4295(0x236)]((_0x5335ac[_0x1e4295(0x115)]-0x1)*logPageSize,_0x5335ac[_0x1e4295(0x115)]*logPageSize-0x1)[_0x1e4295(0x14a)]()[_0x1e4295(0x184)](),proxyEmit(_0x1e4295(0x259),{'logs':_0x2bfbdd,'total':_0xdd7e07});}else proxyEmit(_0x1e4295(0x259),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x26bc5d){const _0x5cb781=_0x26a5b4;if(dbLogs['has'](_0x5cb781(0x11f))[_0x5cb781(0x184)]()){const _0x2ab253=dbLogs[_0x5cb781(0x24c)](_0x5cb781(0x11f))[_0x5cb781(0x272)](_0x5cb781(0x252))[_0x5cb781(0x27e)](_0x42c2b0=>{const _0xcdfbf=_0x5cb781;return _0x42c2b0['type']==_0xcdfbf(0x20f);})[_0x5cb781(0x184)]();dbLogs[_0x5cb781(0x24c)]('logs')[_0x5cb781(0x1ca)]()[_0x5cb781(0x162)](),dbLogs['get'](_0x5cb781(0x11f))['assign'](_0x2ab253)[_0x5cb781(0x162)](),emitHistory(_0x26bc5d);}}async function pauseBot(_0x15d644=''){const _0xa56379=_0x26a5b4,_0x11b381=new Date()[_0xa56379(0x24b)]();if(!lastErrorShown||_0x11b381-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x11b381;!lastBotPause?(lastBotPause=_0x11b381,consecutivePauses=0x1):(_0x11b381-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0xa56379(0x250)]({'stop':'restart'},_0x5df17c=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0xa56379(0x24b)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x15d644)_0x15d644+='\x20|\x20';logHistory(_0xa56379(0x194),_0x15d644+_0xa56379(0x1e7)+pauseBotInterval/0xea60+_0xa56379(0x1b7)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x275dfa=_0x26a5b4;process[_0x275dfa(0x250)]({'stop':'kill'},_0xe8210b=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x36bea3,_0x59dfc4){const _0x385494=_0x26a5b4;if(_0x36bea3[_0x385494(0x17a)]()[_0x385494(0x152)](_0x385494(0x287)))return logHistory(_0x385494(0x194),config[_0x385494(0x275)]+'\x20API\x20key\x20is\x20invalid'),![];else{if(_0x36bea3[_0x385494(0x17a)]()[_0x385494(0x152)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',config[_0x385494(0x275)]+_0x385494(0x126)),![];else{if(_0x36bea3['toString']()['includes']('AuthenticationError'))return logHistory('error',config[_0x385494(0x275)]+_0x385494(0x227)+config['exchange']),![];else await handleError(_0x36bea3,_0x59dfc4);}}}async function handleError(_0xfc1d95,_0x287bbd,_0x325da6=''){const _0x281c2c=_0x26a5b4;if(_0xfc1d95[_0x281c2c(0x17a)]()['includes'](_0x281c2c(0x245)))await pauseBot(config[_0x281c2c(0x275)]+_0x281c2c(0x1dc));else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)](_0x281c2c(0x1a8)))await pauseBot(config[_0x281c2c(0x275)]+_0x281c2c(0x169));else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)](_0x281c2c(0x19f)))await pauseBot(config[_0x281c2c(0x275)]+'\x20not\x20responding');else{if(_0xfc1d95[_0x281c2c(0x17a)]()['includes'](_0x281c2c(0x274)))logHistory(_0x281c2c(0x194),_0x287bbd+_0x281c2c(0x1d3)),logHistory(_0x281c2c(0x194),_0x281c2c(0x14b)),await killBot();else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)](_0x281c2c(0x124)))logHistory(_0x281c2c(0x194),_0x287bbd+_0x281c2c(0x196)),logHistory('error',_0x281c2c(0x14b)),await killBot();else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)](_0x281c2c(0x287)))logHistory('error',_0x287bbd+_0x281c2c(0x178)+config[_0x281c2c(0x275)]+_0x281c2c(0x172)),logHistory(_0x281c2c(0x194),_0x281c2c(0x14b)),await killBot();else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x287bbd+_0x281c2c(0x178)+config[_0x281c2c(0x275)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x281c2c(0x194),_0x281c2c(0x14b)),await killBot();else{if(_0xfc1d95[_0x281c2c(0x17a)]()[_0x281c2c(0x152)](_0x281c2c(0x19e)))logHistory(_0x281c2c(0x194),_0x287bbd+_0x281c2c(0x178)+config[_0x281c2c(0x275)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20'+config['exchange']),logHistory(_0x281c2c(0x194),_0x281c2c(0x14b)),await killBot();else _0xfc1d95['toString']()['includes']('InsufficientFunds')?logHistory(_0x281c2c(0x194),_0x287bbd+_0x281c2c(0x17d)+_0x325da6):(logger[_0x281c2c(0x239)](_0x287bbd+'\x20|\x20Error\x20details:\x20',_0xfc1d95),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}function formatResult(_0x5e2cfa,_0xf917a2){return parseFloat(_0x5e2cfa['toFixed'](_0xf917a2));}function formatResultTruncate(_0x367f99,_0x13bb2c){const _0x1a07e5=_0x26a5b4;let _0x413fc1=formatResultString(_0x367f99,0xa),_0x3cee85=_0x413fc1[_0x1a07e5(0x228)]('.');return _0x3cee85!=-0x1&&(_0x413fc1=_0x413fc1[_0x1a07e5(0x236)](0x0,_0x3cee85+_0x13bb2c+0x1)),Number(_0x413fc1);}function formatResultString(_0x5ad57a,_0x329453){const _0x1637ce=_0x26a5b4;let _0x4e5ba3;if(!(''+_0x5ad57a)[_0x1637ce(0x152)]('e'))_0x4e5ba3=+(Math['round'](_0x5ad57a+'e+'+_0x329453)+'e-'+_0x329453);else{let _0x163af0=(''+_0x5ad57a)[_0x1637ce(0x1b8)]('e'),_0x13ab95='';+_0x163af0[0x1]+_0x329453>0x0&&(_0x13ab95='+'),_0x4e5ba3=+(Math['round'](+_0x163af0[0x0]+'e'+_0x13ab95+(+_0x163af0[0x1]+_0x329453))+'e-'+_0x329453);}return Number(_0x4e5ba3)[_0x1637ce(0x1ac)](_0x329453);}function getServerTime(){const _0x58edb0=_0x26a5b4,_0x3694af=new Date();return _0x3694af['getFullYear']()+'/'+(_0x3694af[_0x58edb0(0x1af)]()+0x1)[_0x58edb0(0x17a)]()['padStart'](0x2,'0')+'/'+_0x3694af[_0x58edb0(0x175)]()[_0x58edb0(0x17a)]()[_0x58edb0(0x136)](0x2,'0')+'\x20'+_0x3694af[_0x58edb0(0x1fc)]()['toString']()[_0x58edb0(0x136)](0x2,'0')+':'+_0x3694af[_0x58edb0(0x279)]()['toString']()[_0x58edb0(0x136)](0x2,'0')+':'+_0x3694af['getSeconds']()[_0x58edb0(0x17a)]()[_0x58edb0(0x136)](0x2,'0');}function getTimeStamp(){const _0x44a7c5=_0x26a5b4,_0x1dbcf1=shiftedTime();return _0x1dbcf1[_0x44a7c5(0x13f)]()+'/'+(_0x1dbcf1[_0x44a7c5(0x1af)]()+0x1)['toString']()[_0x44a7c5(0x136)](0x2,'0')+'/'+_0x1dbcf1[_0x44a7c5(0x175)]()[_0x44a7c5(0x17a)]()['padStart'](0x2,'0')+'\x20'+_0x1dbcf1[_0x44a7c5(0x1fc)]()[_0x44a7c5(0x17a)]()[_0x44a7c5(0x136)](0x2,'0')+':'+_0x1dbcf1[_0x44a7c5(0x279)]()[_0x44a7c5(0x17a)]()[_0x44a7c5(0x136)](0x2,'0')+':'+_0x1dbcf1['getSeconds']()['toString']()[_0x44a7c5(0x136)](0x2,'0');}function getDate(){const _0x1aa92f=_0x26a5b4,_0x2f5e97=shiftedTime();return _0x2f5e97[_0x1aa92f(0x13f)]()+'/'+(_0x2f5e97[_0x1aa92f(0x1af)]()+0x1)['toString']()[_0x1aa92f(0x136)](0x2,'0')+'/'+_0x2f5e97['getDate']()[_0x1aa92f(0x17a)]()[_0x1aa92f(0x136)](0x2,'0');}function getHour(){const _0x4fadc2=_0x26a5b4,_0x1bf5b2=shiftedTime();return _0x1bf5b2[_0x4fadc2(0x1fc)]()[_0x4fadc2(0x17a)]()['padStart'](0x2,'0');}function sleep(_0x2cb308){return new Promise(_0x4f888b=>setTimeout(_0x4f888b,_0x2cb308));}function shiftedTime(){const _0xc76a4d=_0x26a5b4,_0x2c9ecc=new Date();let _0x306ccf=_0x2c9ecc;if(config&&config[_0xc76a4d(0x18b)]!==0x0)_0x306ccf=fns[_0xc76a4d(0x261)](_0x2c9ecc,{'hours':config[_0xc76a4d(0x18b)]});return _0x306ccf;}function timer(_0x5336b0){const _0x59ec3b=_0x26a5b4,_0x16516b=new Date();!lasttime?console[_0x59ec3b(0x223)]('timer:',_0x5336b0,_0x16516b):console[_0x59ec3b(0x223)](_0x59ec3b(0x138),_0x5336b0,(_0x16516b-lasttime)/0x3e8),lasttime=_0x16516b;}