const _0x178d1b=_0x3423;(function(_0xf7384,_0x3a11d9){const _0x31623c=_0x3423,_0x27b82f=_0xf7384();while(!![]){try{const _0x16bb91=parseInt(_0x31623c(0x20b))/0x1*(-parseInt(_0x31623c(0x1f8))/0x2)+parseInt(_0x31623c(0xfb))/0x3+-parseInt(_0x31623c(0x16b))/0x4*(parseInt(_0x31623c(0x10c))/0x5)+-parseInt(_0x31623c(0x200))/0x6*(parseInt(_0x31623c(0x1de))/0x7)+-parseInt(_0x31623c(0x1e2))/0x8+parseInt(_0x31623c(0x23e))/0x9*(-parseInt(_0x31623c(0xd7))/0xa)+parseInt(_0x31623c(0x1b7))/0xb*(parseInt(_0x31623c(0x21a))/0xc);if(_0x16bb91===_0x3a11d9)break;else _0x27b82f['push'](_0x27b82f['shift']());}catch(_0x25df2f){_0x27b82f['push'](_0x27b82f['shift']());}}}(_0x2c51,0x293db));const _0x399f55=function(){let _0x272156=!![];return function(_0x4ec21b,_0x4c472d){const _0x19dd42=_0x272156?function(){const _0x8e5bd=_0x3423;if(_0x4c472d){const _0x2cb6b2=_0x4c472d[_0x8e5bd(0xd6)](_0x4ec21b,arguments);return _0x4c472d=null,_0x2cb6b2;}}:function(){};return _0x272156=![],_0x19dd42;};}(),_0x340e19=_0x399f55(this,function(){const _0x4458a8=_0x3423;return _0x340e19[_0x4458a8(0x268)]()[_0x4458a8(0x204)]('(((.+)+)+)+$')[_0x4458a8(0x268)]()[_0x4458a8(0x11b)](_0x340e19)[_0x4458a8(0x204)](_0x4458a8(0x1be));});_0x340e19();'use strict';const ccxt=require(_0x178d1b(0x250)),low=require(_0x178d1b(0x187)),FileSync=require(_0x178d1b(0x140)),fs=require('fs'),fns=require(_0x178d1b(0x1cf)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require(_0x178d1b(0xd4)),argv=require(_0x178d1b(0x253))(process[_0x178d1b(0x1e1)][_0x178d1b(0x178)](0x2))[_0x178d1b(0x1e1)],path=require(_0x178d1b(0xe7));let exchange;global[_0x178d1b(0x144)]={},global[_0x178d1b(0x158)]={};const usdBasecoins=['USD',_0x178d1b(0x1a8),_0x178d1b(0x111),'USDT','USDC',_0x178d1b(0x132)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x178d1b(0x15b)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x178d1b(0x122)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x178d1b(0x244)+pauseBotInterval/0xea60+_0x178d1b(0x23a),pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x178d1b(0x244)+pauseBotIntervalLong/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;function _0x3423(_0x428739,_0x5492ab){const _0x1f591d=_0x2c51();return _0x3423=function(_0x340e19,_0x399f55){_0x340e19=_0x340e19-0xc8;let _0x2c5143=_0x1f591d[_0x340e19];return _0x2c5143;},_0x3423(_0x428739,_0x5492ab);}const balanceUpdateDelay=0x3e8,serverversion=require(_0x178d1b(0x183))['version'],botID=process[_0x178d1b(0x1e1)][0x2]||_0x178d1b(0x1d7),pattern=/^[0-9]{3}$/;!pattern[_0x178d1b(0x127)](botID)&&(console[_0x178d1b(0x150)](_0x178d1b(0x1c2)+botID+_0x178d1b(0x13e)),killBot());const userID=process[_0x178d1b(0x1e1)][0x3]||'',configpath=userID?_0x178d1b(0xed)+userID+'/':_0x178d1b(0xed),logspath=userID?'./logs/'+userID+'/':_0x178d1b(0xe2),loggerfile=fs[_0x178d1b(0x1b9)](logspath+_0x178d1b(0x1c5),{'flags':'a'});!fs[_0x178d1b(0x1c6)](configpath)&&fs[_0x178d1b(0x131)](configpath);!fs[_0x178d1b(0x1c6)](logspath)&&fs[_0x178d1b(0x131)](logspath);const configfile=configpath+_0x178d1b(0x1ca)+botID+_0x178d1b(0xd9),logfile=configpath+_0x178d1b(0x1ca)+botID+_0x178d1b(0x149),performancefile=configpath+_0x178d1b(0x1ca)+botID+_0x178d1b(0x189),coinresultsfile=configpath+_0x178d1b(0x1ca)+botID+_0x178d1b(0x195),settingsfile=configpath+_0x178d1b(0x238),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x178d1b(0x245),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x178d1b(0x226)]({'logs':[],'version':serverversion})[_0x178d1b(0x11a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x178d1b(0x11a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x178d1b(0x226)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x178d1b(0x1cb),'rsaStandard':_0x178d1b(0x252)});function _0x2c51(){const _0x1de2af=['Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','emojibuy','\x20-\x20pausing\x20bot\x20for\x20','/backup/','basecoin','ongoing','writeFile','page','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','remainingSymbols','Pausing\x20for\x20','Exception\x20thrown\x20in\x20','Order\x20is\x20invalid:\x20','format','ccxt','decrypt','RSA-OAEP','yargs/yargs','reverse','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','split','ExchangeError','logs','BNB/','buys','price','limit','\x20blocked\x20your\x20API','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Headless:\x20','\x20API\x20secret\x20is\x20invalid','distribution','resetHistory','Net\x20effect','Huobi','Resetting\x20bot\x20history','function','InvalidNonce','toString','Initializing\x20coin\x20results','cost','USDT','forEach','floor','AuthenticationError','<b>Bot\x20','getMonth','coins','No\x20more\x20open\x20orders\x20-\x20','usd','pro','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ORDERS.LOCKED','get','portfolio','emojisell','colorscheme','symbol','cancelLoading','/USD','kill','coin-loading-progress','util','event-history','apply','9670fvJSFj','cloneDeep','-config.json','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','cancel','ETH','Fee\x20discount\x20refund\x20detected:\x20','Executing\x20exchange\x20reload','getMinutes','1\x20-\x20FILLED\x20known\x20order:\x20','apiPassword','./logs/','performance','fee','fiat','\x20-\x20bot\x20not\x20started','path','realized','\x20portfolio:</b>\x20\x0a\x0a','buy','Failed\x20to\x20load\x20coin\x20data\x20for\x20','keys','./config/','getPortfolio','showConfig','Saving\x20configuration','ID:\x20','\x20closed\x20the\x20connection','starting-balance-','Loading\x20completed','debug','toUpperCase','\x20exchange','entries','join','order','774750OyqCit','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','percentage','none','Unfilled\x20order(s)\x20canceled\x20after\x20','time','orderId','\x20minutes\x20-\x20','padStart','openOrders','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','market','trade','args','full','find','1150ZPqwXO','startprice','basecoinvalue','1\x20-\x20Handle\x20open\x20orders','random','TUSD','target','liquidity','send','open','apiSecret','storeConfiguration','fromCodePoint','storeFiat','write','constructor','watchTrades','OrderNotFound','Error\x20while\x20deleting\x20files:\x20','offset','getAllOrders()','Transaction\x20detection\x20blocked','UNLOCKED','toFixed','fetchTicker','map','ORDERS.UNLOCKED','test','watchOrders','padEnd','value','Unknown\x20error\x20occured','\x20has\x20a\x2024h\x20drop\x20of\x20','fetchOpenOrders','abs','balancing\x20resumed','yyyy/MM/dd','mkdirSync','USDP','timeshift','canceled','message','watchOrders()','\x20|\x20highest\x20fee:\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','watchTransactions()','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','loading-canceled','has','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange',',\x20must\x20be\x20a\x203\x20digit\x20number','net-basecoin','lowdb/adapters/FileSync','Exchange','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','breakeven','ticker','UNLOCKING','2\x20-\x20handling\x20FILLED\x20order:\x20','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20|\x20Custom\x20ID:\x20','-events.json','sort','2\x20-\x20Orders\x20unlocked','fetchTickers','initclient','bots','\x20hour','log','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','exchange','filled','ORDERS.UNLOCKING',':\x20timer\x20>','final','timeout','change','type','amount','freeze','getPortfolio(0)','Portfolio\x20change\x20detected:\x20','\x20orders\x20in\x20less\x20than\x20','uncaughtException','1\x20-\x20Validate\x20orders:\x20','active','ordertype','startnumber','getDate','Transaction\x20detection\x20unblocked','-------------------------------\x0a','Limit\x20(low-margin)','loadMarkets','ask','\x20|\x20lock\x20orders:\x20','692FmUDyB','headless','cooldown','\x20>\x20','NetworkError','toLowerCase','Bybit','isEqual','set','remove','2.3.5','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','limits','slice','ExchangeNotAvailable','version','\x20order:\x20','exec','RateLimitExceeded','indexOf','cancelOrder','length','Invalid\x20symbol:\x20','shift','./version.json','round','placeOrder()','API-key\x20format\x20invalid','lowdb','event','-performance.json','recent20','removed','total','Manual\x20balancing\x20required','\x20/\x20','starting-balances','min','unlinkSync','spot','orderstatus','\x20exchange\x20error','-results.json','Reset\x20|\x20','number','settings','configuration','Trigger:\x20','close','string','includes','privateKey','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','push','bid','\x20not\x20responding','fetchTickers()','apiKey','getCoins()','getHours','no\x20open\x20orders','BUSD','Huobipro','balancing\x20resumes\x20when\x20cooldown\x20ends','getStartingBalances','eur','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','startsWith','exchange\x20reloaded','side','initial','recreateCoinResults()','EUR','differenceInSeconds','1\x20-\x20FILLED\x20unknown\x20order:\x20','autoliquidity','1113849Oavjwi','2\x20-\x20Handled\x20open\x20orders','createWriteStream','fetchBalance','bot','recreate','***','(((.+)+)+)+$','filter','stopExchange()','valid','Error:\x20Invalid\x20argument\x20','assign','getPortfolio(1)','/output-000.log','existsSync','Limit\x20(high-margin)','InsufficientFunds','highest','bot-','sha256','2.5.0','data','</pre>','date-fns','add','Cooldown\x20ended\x20-\x20balancing\x20resumed','BNB','Market','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','sells','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','001','\x20|\x20','balances','USD','password','\x20API\x20key\x20is\x20invalid','replace','717094oDnvbh','\x20>\x20[DEBUG]\x20','threshold','argv','220608lahGpP','warning','Error\x20details:','added','currency','deleteHistoryAlerts','Waited\x20','average','rightTxt','success','red_yellow_blue','timestamp','onepagemode','emitHistory','amountToPrecision','sendMetricsTelegram','PAXG','netoffset','excluded','change24h','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','milliseconds','16XuXIkf','Binance','datetime','leftTxt','Order(s)\x20not\x20validated\x20after\x20','createOrder','delta','RequestTimeout','6sPSMkI','\x20:\x20','exchanges','Executed\x20','search','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','coin','%\x20(','getOpenOrders()','customId','botname','5222OYHIFJ',':\x20Bot\x20','fetchClosedOrders','OnMaintenance','last','************','cancelOrders()','max','date','Invalid\x20quantity','stringify','sortBy','limit-high','error','progress','24ADeXud','Bitget','changes','BTC','LOCKED','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','initTickers()','net-fiat','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','limit-low','<pre>','parse','defaults','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','getTime','loadSymbols()','botID','storeHeadless','placeOrder','restart','Insufficient\x20funds\x20to\x20execute\x20order:\x20','DDoSProtection','splice','startdate','substring','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','concat','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','0\x20-\x20EXECUTION:\x20','watchTrades()','bb-settings.json','getFullYear','\x20minutes','showname','running','sell','747imflen','\x20metrics:</b>\x20\x0a\x0a','<b>','\x20|\x20exchange:\x20'];_0x2c51=function(){return _0x1de2af;};return _0x2c51();}let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1b7e15=>{console['log'](_0x1b7e15);},'simple':_0x2e10ec=>{const _0x284216=_0x178d1b;console[_0x284216(0x150)](_0x2e10ec),loggerfile[_0x284216(0x11a)](util[_0x284216(0x24f)](_0x2e10ec)+'\x0a');},'full':async(_0x2d2fb8,_0x47c699='')=>{const _0x3b2dde=_0x178d1b;let _0x39b7c2;if(config[_0x3b2dde(0x23b)])_0x39b7c2=getTimeStamp()+':\x20'+config[_0x3b2dde(0x20a)]+'\x20>\x20'+_0x2d2fb8;else _0x39b7c2=getTimeStamp()+':\x20Bot\x20'+botID+_0x3b2dde(0x16e)+_0x2d2fb8;console['log'](_0x39b7c2),loggerfile[_0x3b2dde(0x11a)](util[_0x3b2dde(0x24f)](_0x39b7c2)+'\x0a'),_0x47c699&&(console['log'](_0x47c699),loggerfile[_0x3b2dde(0x11a)](util[_0x3b2dde(0x24f)](_0x47c699)+'\x0a'));},'debug':async(_0x488ed1,_0x1c612c='')=>{const _0x148184=_0x178d1b;let _0xa24245;if(config[_0x148184(0x23b)])_0xa24245=getTimeStamp()+':\x20'+config['botname']+_0x148184(0x1df)+_0x488ed1;else _0xa24245=getTimeStamp()+_0x148184(0x20c)+botID+_0x148184(0x1df)+_0x488ed1;if(debugging)console[_0x148184(0x150)](_0xa24245);loggerfile[_0x148184(0x11a)](util[_0x148184(0x24f)](_0xa24245)+'\x0a');if(_0x1c612c){if(debugging)console[_0x148184(0x150)](_0x1c612c);loggerfile[_0x148184(0x11a)](util[_0x148184(0x24f)](_0x1c612c)+'\x0a');}}};process['on'](_0x178d1b(0x15f),function(_0x494173){const _0x34248a=_0x178d1b;logHistory('error',_0x34248a(0x142)),logger[_0x34248a(0xf5)]('Uncaught\x20Exception:',_0x494173);});settings['timeshift']!=config[_0x178d1b(0x133)]&&updateTimeshift(settings[_0x178d1b(0x133)]);settings['onepagemode']!=config[_0x178d1b(0x1ee)]&&updateOnepagemode(settings[_0x178d1b(0x1ee)]);process[_0x178d1b(0x114)]({'started':_0x178d1b(0x23c)},_0xaae238=>{}),initializeProcessListeners();function proxyEmit(_0xaa1147,_0x51bf2b=null){const _0x193988=_0x178d1b;process[_0x193988(0x114)]({'function':_0xaa1147,'args':_0x51bf2b},_0x264050=>{});}function initializeProcessListeners(){process['on']('message',_0x2f6725=>{const _0x2eefd8=_0x3423;switch(Object[_0x2eefd8(0xec)](_0x2f6725)[0x0]){case'timeshift':_0x2f6725[_0x2eefd8(0x133)]!=undefined&&(settings[_0x2eefd8(0x133)]=_0x2f6725['timeshift'],updateTimeshift(settings[_0x2eefd8(0x133)]));break;case _0x2eefd8(0x1ee):_0x2f6725['onepagemode']!=undefined&&(settings[_0x2eefd8(0x1ee)]=_0x2f6725[_0x2eefd8(0x1ee)],updateOnepagemode(settings[_0x2eefd8(0x1ee)]));break;case _0x2eefd8(0x14e):_0x2f6725[_0x2eefd8(0x14e)]!=undefined&&(bots=JSON[_0x2eefd8(0x225)](_0x2f6725[_0x2eefd8(0x14e)]),proxyEmit('bots',bots));break;case _0x2eefd8(0x266):switch(_0x2f6725[_0x2eefd8(0x266)]){case _0x2eefd8(0x14d):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x2eefd8(0x1ef):emitHistory(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0x1e7):deleteHistoryAlerts(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0xee):getPortfolio(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0x117):storeConfiguration(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0x22b):storeHeadless(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0x119):storeFiat(_0x2f6725['args']);break;case _0x2eefd8(0x262):resetHistory();break;case _0x2eefd8(0x1ab):getStartingBalances(getNormalizedPerformance());break;case _0x2eefd8(0x22c):placeOrder(_0x2f6725[_0x2eefd8(0x109)]);break;case _0x2eefd8(0xd0):cancelLoading();break;case _0x2eefd8(0xef):showConfig();break;case _0x2eefd8(0x1f1):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x42cfe6=![]){const _0x262781=_0x178d1b;logger[_0x262781(0xf5)](_0x262781(0x196)+(_0x42cfe6?_0x262781(0x1af):'exchange\x20not\x20reloaded')+_0x262781(0x241)+config[_0x262781(0x152)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x42cfe6)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x262781(0x1a4)]!=''&&config['apiKey']!=_0x262781(0x1bd)){loadingProgress=0x0;if(_0x42cfe6){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x28eb1f){handleErrorNoStop(_0x28eb1f,_0x262781(0x229));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4593c0=await getCoins();[currentCoins,currentCoinsAll]=_0x4593c0,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x262781(0xf5)](_0x262781(0xf4)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x262781(0x180)]==0x0&&allOpenOrders[_0x262781(0x180)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x4a8dae=_0x178d1b;exchangeStopped=!![];try{await exchange[_0x4a8dae(0x19b)]();}catch(_0x5cd6d3){await handleError(_0x5cd6d3,_0x4a8dae(0x1c0));}}async function reloadExchange(){const _0x1f4225=_0x178d1b;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x1f4225(0xde)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x2800bb=config[_0x178d1b(0x152)],_0x3fee8e=config[_0x178d1b(0x1a4)],_0xfdd70d=config[_0x178d1b(0x116)],_0x3474de=config[_0x178d1b(0xe1)]){const _0x510949=_0x178d1b;exchange&&await stopExchange();!supportedExchanges()[_0x510949(0x19d)](_0x2800bb)&&(logHistory(_0x510949(0x218),_0x510949(0x222)+_0x2800bb+_0x510949(0xf7)),killBot());const _0x26fae0=ccxt['pro'][_0x2800bb[_0x510949(0x170)]()];exchange=new _0x26fae0({'apiKey':_0x3fee8e,'secret':_0xfdd70d,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x3474de)exchange[_0x510949(0x1db)]=_0x3474de;}function setStableCoins(){const _0x17216c=_0x178d1b;let _0x149a3d=config['basecoin']==_0x17216c(0xdc)?_0x17216c(0xdc):config[_0x17216c(0x246)]==_0x17216c(0x1f2)?_0x17216c(0x1f2):_0x17216c(0x21d),_0x221889=!allSymbols['includes'](_0x149a3d+_0x17216c(0xd1))?_0x17216c(0x26b):_0x17216c(0x1da),_0x264f4f=!allSymbols[_0x17216c(0x19d)](_0x149a3d+'/EUR')?_0x221889:'EUR';stablecoins={'eur':{'coin':''+_0x149a3d+_0x264f4f,'symbol':_0x149a3d+'/'+_0x264f4f},'usd':{'coin':''+_0x149a3d+_0x221889,'symbol':_0x149a3d+'/'+_0x221889}};}async function initwsCcxt(){const _0x3d3f27=_0x178d1b;initCycle++;const _0x33214c=initCycle;let _0x3e45e4=[];config[_0x3d3f27(0xcc)]['forEach'](_0x3d26c8=>{const _0x422e7d=_0x3d3f27;if(!_0x3d26c8[_0x422e7d(0x1f4)]&&_0x3d26c8[_0x422e7d(0x206)]!=config['basecoin'])_0x3e45e4[_0x422e7d(0x1a0)](_0x3d26c8[_0x422e7d(0xcf)]);});if(!_0x3e45e4[_0x3d3f27(0x19d)](stablecoins[_0x3d3f27(0x1ac)][_0x3d3f27(0xcf)]))_0x3e45e4[_0x3d3f27(0x1a0)](stablecoins[_0x3d3f27(0x1ac)][_0x3d3f27(0xcf)]);if(!_0x3e45e4[_0x3d3f27(0x19d)](stablecoins[_0x3d3f27(0x273)]['symbol']))_0x3e45e4[_0x3d3f27(0x1a0)](stablecoins[_0x3d3f27(0x273)][_0x3d3f27(0xcf)]);if(config['exchange'][_0x3d3f27(0x1ae)](_0x3d3f27(0x1f9))){if(!_0x3e45e4[_0x3d3f27(0x19d)](_0x3d3f27(0x259)+config[_0x3d3f27(0x246)]))_0x3e45e4[_0x3d3f27(0x1a0)](_0x3d3f27(0x259)+config[_0x3d3f27(0x246)]);}loadCoins(_0x3e45e4),_0x3e45e4=validateSymbols(_0x3e45e4);const _0x22f7f7=async _0x5567be=>{const _0x18e87a=_0x3d3f27;let _0x256728;try{const _0x50f2ae=await getTickers(_0x5567be);Object[_0x18e87a(0xf8)](_0x50f2ae)[_0x18e87a(0x26c)](_0x1a5a42=>{const _0x3bc9e5=_0x18e87a;_0x256728=_0x1a5a42[0x1][_0x3bc9e5(0xcf)],global[_0x3bc9e5(0x144)][noslash(_0x256728)]=_0x1a5a42[0x1][_0x3bc9e5(0x20f)],global[_0x3bc9e5(0x158)][_0x256728]=_0x1a5a42[0x1][_0x3bc9e5(0xfd)];});}catch(_0x3e51a2){await handleError(_0x3e51a2,_0x18e87a(0x220),_0x256728);}},_0x253b89=async _0x42c2a4=>{const _0x19d8b2=_0x3d3f27;while(initCycle==_0x33214c){if(!botPaused)try{const _0xccd4bb=await exchange[_0x19d8b2(0x11c)](_0x42c2a4);global[_0x19d8b2(0x144)][noslash(_0xccd4bb[0x0][_0x19d8b2(0xcf)])]=_0xccd4bb[0x0][_0x19d8b2(0x25b)],await sleep(0x3e8);}catch(_0xb19d5f){if(!exchangeStopped)await handleError(_0xb19d5f,_0x19d8b2(0x237),_0x42c2a4);}else await sleep(0x64);}},_0xe8f06e=async _0x159734=>{const _0x2e6ddc=_0x3d3f27;while(initCycle==_0x33214c){if(!botPaused){let _0x126430;try{await sleep(0x3c*0x3e8);const _0x5daa9e=await getTickers(_0x159734);Object[_0x2e6ddc(0xf8)](_0x5daa9e)[_0x2e6ddc(0x26c)](_0x47ec4a=>{const _0x4b82d2=_0x2e6ddc;_0x126430=_0x47ec4a[0x1]['symbol'],global[_0x4b82d2(0x158)][_0x126430]=_0x47ec4a[0x1][_0x4b82d2(0xfd)];});}catch(_0x257737){if(!exchangeStopped)await handleError(_0x257737,_0x2e6ddc(0x1a3),_0x126430);}}else await sleep(0x64);}},_0x499212=async _0xb5fa27=>{const _0x1b822b=_0x3d3f27;while(initCycle==_0x33214c){if(!botPaused)try{const _0x508c0f=await exchange[_0x1b822b(0x128)](_0xb5fa27);initCycle==_0x33214c&&_0x508c0f[_0x1b822b(0x26c)](_0x2daed2=>{updateNumberCoinsCcxt(_0x2daed2);});}catch(_0x2b200b){if(!exchangeStopped)await handleError(_0x2b200b,_0x1b822b(0x136));}else await sleep(0x64);}};_0x22f7f7(_0x3e45e4),_0xe8f06e(_0x3e45e4),_0x3e45e4[_0x3d3f27(0x26c)](_0x3374c5=>{_0x253b89(_0x3374c5),_0x499212(_0x3374c5);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0xd681d1){const _0x4f9f00=_0x178d1b;let _0x2841f0={};try{if(config[_0x4f9f00(0x152)]!='Cryptocom')_0x2841f0=await exchange[_0x4f9f00(0x14c)](_0xd681d1);else for(const _0x255f78 of _0xd681d1){const _0x44e7ea=await exchange['fetchTicker'](_0x255f78);_0x2841f0[_0x255f78]=_0x44e7ea;}return _0x2841f0;}catch(_0x3aa24d){throw _0x3aa24d;}}async function watchTransactions(){const _0x5b71f6=_0x178d1b;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xf8b09e=await getCoins(),[_0x174bd4,_0x2c6697]=_0xf8b09e;let _0x2f248b=[];currentCoins[_0x5b71f6(0x26c)](_0x4663bc=>{const _0x513fbf=_0x5b71f6,_0x2d7ee7=_0x174bd4[_0x513fbf(0x10b)](_0x14ba3d=>_0x14ba3d[_0x513fbf(0x206)]==_0x4663bc['coin']);if(_0x2d7ee7){if(_0x4663bc[_0x513fbf(0x197)]!=_0x2d7ee7[_0x513fbf(0x197)]){let _0xed12f0;if(_0x4663bc[_0x513fbf(0x206)]!=config[_0x513fbf(0x246)]){const _0x385b7c=global[_0x513fbf(0x144)][noslash(_0x4663bc['symbol'])];_0xed12f0=_0x4663bc['reverse']?0x1/_0x385b7c:_0x385b7c;}else _0xed12f0=0x1;_0x2f248b[_0x513fbf(0x1a0)]({'coin':_0x4663bc['coin'],'symbol':_0x4663bc[_0x513fbf(0xcf)],'price':_0xed12f0,'number':Number(formatResult(_0x2d7ee7[_0x513fbf(0x197)]-_0x4663bc[_0x513fbf(0x197)],0x8)),'basecoinvalue':_0xed12f0*(_0x2d7ee7[_0x513fbf(0x197)]-_0x4663bc['number'])});}}});if(_0x2f248b[_0x5b71f6(0x180)]==0x1&&!blockTransactionDetection){if(config[_0x5b71f6(0x1b6)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x2f248b[0x0][_0x5b71f6(0x10e)]+_0x5b71f6(0x137)+lastFees[_0x5b71f6(0x1c9)]);if(lastFees['highest']==0x0||Math['abs'](_0x2f248b[0x0][_0x5b71f6(0x10e)])>lastFees['highest']){delete _0x2f248b[0x0]['symbol'],delete _0x2f248b[0x0][_0x5b71f6(0x10e)];let _0x4ad805=[],_0x280aa7=[...config[_0x5b71f6(0x113)]]||[],_0x577ba8=config[_0x5b71f6(0x113)];_0x280aa7[_0x5b71f6(0x14a)]((_0x454c5e,_0x52189f)=>_0x454c5e['date']>_0x52189f[_0x5b71f6(0x213)]?-0x1:_0x52189f[_0x5b71f6(0x213)]>_0x454c5e[_0x5b71f6(0x213)]?0x1:0x0);const _0x1eb2b9=getDate();if(_0x280aa7[0x0]){const _0x2f6d26=fns[_0x5b71f6(0x225)](_0x280aa7[0x0]['date'],'yyyy/MM/dd',new Date()),_0x51a097=fns['parse'](_0x1eb2b9,_0x5b71f6(0x130),new Date());if(fns['isEqual'](_0x2f6d26,_0x51a097)){_0x4ad805=_0x280aa7[0x0][_0x5b71f6(0x21c)];const _0x2a6e53=_0x4ad805[_0x5b71f6(0x10b)](_0x1a76c0=>_0x1a76c0[_0x5b71f6(0x206)]==_0x2f248b[0x0][_0x5b71f6(0x206)]);_0x2a6e53?(_0x2a6e53[_0x5b71f6(0x197)]+=_0x2f248b[0x0][_0x5b71f6(0x197)],_0x2a6e53[_0x5b71f6(0x197)]==0x0&&(_0x4ad805=_0x4ad805[_0x5b71f6(0x1bf)](_0x5af5bd=>{const _0x19b3d5=_0x5b71f6;return _0x5af5bd[_0x19b3d5(0x206)]!=_0x2f248b[0x0][_0x19b3d5(0x206)];}))):_0x4ad805['push'](_0x2f248b[0x0]);const _0x416a93=_0x577ba8['find'](_0x4d284f=>_0x4d284f[_0x5b71f6(0x213)]==_0x1eb2b9);_0x416a93[_0x5b71f6(0x21c)]=_0x4ad805;}else _0x577ba8[_0x5b71f6(0x1a0)]({'date':_0x1eb2b9,'changes':[_0x2f248b[0x0]]});}const _0x27908d=_0x577ba8[_0x5b71f6(0x10b)](_0x58ceba=>_0x58ceba[_0x5b71f6(0x213)]==_0x1eb2b9);if(_0x27908d){let _0x161b8e=!![];_0x27908d[_0x5b71f6(0x21c)]['forEach'](_0x180e4b=>{const _0xfda224=_0x5b71f6;if(_0x180e4b[_0xfda224(0x197)]!=0x0)_0x161b8e=![];}),_0x161b8e&&(_0x577ba8=_0x577ba8[_0x5b71f6(0x1bf)](_0x5cd261=>{return _0x5cd261['date']!=_0x1eb2b9;}));}let _0x2049f4=dbConfig[_0x5b71f6(0xcb)]('bot')[_0x5b71f6(0x10b)]({'botID':botID})['value']();_0x2049f4&&(dbConfig[_0x5b71f6(0xcb)]('bot')['find']({'botID':botID})[_0x5b71f6(0x1c3)]({'liquidity':_0x577ba8})[_0x5b71f6(0x11a)](),config[_0x5b71f6(0x113)]=_0x577ba8),logHistory(_0x5b71f6(0x1eb),_0x5b71f6(0x15d)+Math[_0x5b71f6(0x12e)](_0x2f248b[0x0][_0x5b71f6(0x197)])+'\x20'+_0x2f248b[0x0][_0x5b71f6(0x206)]+'\x20'+(_0x2f248b[0x0]['number']>0x0?_0x5b71f6(0x1e5):_0x5b71f6(0x18b))+_0x5b71f6(0x233)),proxyEmit(_0x5b71f6(0x199),emittedConfiguration());}else logger[_0x5b71f6(0xf5)](_0x5b71f6(0xdd)+Math[_0x5b71f6(0x12e)](_0x2f248b[0x0][_0x5b71f6(0x197)])+'\x20'+_0x2f248b[0x0][_0x5b71f6(0x206)]+'\x20'+(_0x2f248b[0x0][_0x5b71f6(0x197)]>0x0?_0x5b71f6(0x1e5):_0x5b71f6(0x18b)));transactionDetected=!![];}else logger[_0x5b71f6(0xf5)](_0x5b71f6(0x15d)+Math['abs'](_0x2f248b[0x0][_0x5b71f6(0x197)])+'\x20'+_0x2f248b[0x0]['coin']+'\x20'+(_0x2f248b[0x0]['number']>0x0?_0x5b71f6(0x1e5):'removed')+_0x5b71f6(0x227));}currentCoins=_0x174bd4,currentCoinsAll=_0x2c6697,await sleep(watchTransactionsInterval);}catch(_0x3a2c07){if(!exchangeStopped)await handleError(_0x3a2c07,_0x5b71f6(0x139));}else await sleep(0x64);}}async function loadSymbols(){const _0x43d8d1=_0x178d1b;try{markets=await exchange[_0x43d8d1(0x168)](),allSymbols=[],Object['entries'](markets)[_0x43d8d1(0x26c)](_0x5e3904=>{const _0x41d37c=_0x43d8d1;_0x5e3904[0x1][_0x41d37c(0x161)]&&_0x5e3904[0x1][_0x41d37c(0x192)]&&allSymbols[_0x41d37c(0x1a0)](_0x5e3904[0x0]);});}catch(_0x4ddb28){throw _0x4ddb28;}}function validateSymbols(_0xe2e5a0){const _0x7e413=_0x178d1b;let _0x1452c3=[];return _0xe2e5a0[_0x7e413(0x26c)](_0x50cd6b=>{const _0x1bef7c=_0x7e413;!allSymbols['includes'](_0x50cd6b)?logHistory('error',_0x1bef7c(0x181)+_0x50cd6b+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x1452c3[_0x1bef7c(0x1a0)](_0x50cd6b);}),_0x1452c3;}async function initclient(){const _0x943dd7=_0x178d1b;proxyEmit(_0x943dd7(0x199),emittedConfiguration()),proxyEmit(_0x943dd7(0x202),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x943dd7(0x1d9),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5299c7=getNormalizedPerformance();emitPerformance(_0x5299c7),getStartingBalances(_0x5299c7);}async function toggleBotMode(){const _0x4fd47b=_0x178d1b;let _0x34f365=dbConfig[_0x4fd47b(0xcb)]('bot')['find']({'botID':botID})[_0x4fd47b(0x12a)]();if(_0x34f365){const _0x5785b1=!_0x34f365['headless'];dbConfig[_0x4fd47b(0xcb)](_0x4fd47b(0x1bb))[_0x4fd47b(0x10b)]({'botID':botID})[_0x4fd47b(0x1c3)]({'headless':_0x5785b1})[_0x4fd47b(0x11a)](),config[_0x4fd47b(0x16c)]=_0x5785b1,proxyEmit(_0x4fd47b(0x199),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x20f4b1=_0x178d1b;process[_0x20f4b1(0x114)]({'updatebotmanager':!![]},_0x247249=>{}),logger['debug'](_0x20f4b1(0x25f)+config[_0x20f4b1(0x16c)]);}async function loadCoins(_0x5d4495){const _0x4cf83e=_0x178d1b;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x914bc7,_0x175478=0x0,_0x32949c=0x0;_0x5d4495[_0x4cf83e(0x26c)](_0x1f9d85=>{const _0x18d019=_0x4cf83e;loading[_0x18d019(0x24b)][_0x18d019(0x1a0)](_0x1f9d85);}),loadingCanceled=![];let _0x198de6=![];while(_0x914bc7!=_0x5d4495['length']+maxLoadingProgress){_0x914bc7=loadingProgress,_0x5d4495[_0x4cf83e(0x26c)](_0xc6d356=>{const _0x465f94=_0x4cf83e;if(global['ticker'][noslash(_0xc6d356)]){loading[_0x465f94(0x24b)]=loading[_0x465f94(0x24b)][_0x465f94(0x1bf)](_0x36ca0e=>_0x36ca0e!=_0xc6d356);if(!watchedSymbols[_0x465f94(0x19d)](_0xc6d356))watchedSymbols[_0x465f94(0x1a0)](_0xc6d356);_0x914bc7++;}}),loading[_0x4cf83e(0x219)]=Math[_0x4cf83e(0x184)](_0x914bc7/(_0x5d4495[_0x4cf83e(0x180)]+maxLoadingProgress)*0x64);loading[_0x4cf83e(0x219)]!=0x64&&(_0x32949c>0x1e*0x5&&(loading[_0x4cf83e(0x157)]=!![],emitLoadingProgress()),_0x32949c>0x78*0x5&&!_0x198de6&&(_0x198de6=!![],logHistory('error',_0x4cf83e(0xeb)+loading[_0x4cf83e(0x24b)]['join'](',\x20')+_0x4cf83e(0xe6)),logHistory(_0x4cf83e(0x218),_0x4cf83e(0x24c)+loadCoinsRetryInterval/0xea60+_0x4cf83e(0xda)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0xc77651=_0x4cf83e;process['send']({'stop':_0xc77651(0x22d)},_0x873563=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4cf83e(0xdb)]=!![],emitLoadingProgress();break;}else _0x175478!=loading[_0x4cf83e(0x219)]&&(_0x175478=loading[_0x4cf83e(0x219)],emitLoadingProgress()),_0x32949c++,await sleep(0xc8);}_0x914bc7==_0x5d4495[_0x4cf83e(0x180)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x4cf83e(0x23c)},_0x566425=>{}),_0x198de6&&logHistory(_0x4cf83e(0x1eb),_0x4cf83e(0x19f)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5c9a79=_0x178d1b;proxyEmit(_0x5c9a79(0x199),{...emittedConfiguration(),'configstate':_0x5c9a79(0x13b)});}function emitLoadingProgress(){const _0x18c071=_0x178d1b;proxyEmit(_0x18c071(0xd3),loading);}async function getFiat(){const _0x39745e=_0x178d1b;let _0x179bd2=global['ticker'][stablecoins[_0x39745e(0x1ac)][_0x39745e(0x206)]],_0x171f62=global[_0x39745e(0x144)][stablecoins[_0x39745e(0x273)][_0x39745e(0x206)]];return{'eur':Number(_0x179bd2),'usd':Number(_0x171f62)};}function capitalize(_0x493a53){const _0x4bb6fa=_0x178d1b;return _0x493a53['substring'](0x0,0x1)[_0x4bb6fa(0xf6)]()+_0x493a53[_0x4bb6fa(0x232)](0x1);}function supportedExchanges(){const _0x3798c0=_0x178d1b,_0x327d44=['ws',_0x3798c0(0x14c),_0x3798c0(0x124),_0x3798c0(0x11c),_0x3798c0(0x128),_0x3798c0(0x17f),_0x3798c0(0x1fd),_0x3798c0(0x12d),_0x3798c0(0x20d),_0x3798c0(0x1ba)];let _0x43ef55=[],_0x4aa24f=[],_0xd30522=ccxt['pro'][_0x3798c0(0x202)];_0xd30522['forEach'](_0x343386=>{const _0x289b41=_0x3798c0;try{const _0x3a5c2d=new ccxt[(_0x289b41(0xc8))][_0x343386]();_0x4aa24f[_0x289b41(0x1a0)](_0x3a5c2d);}catch(_0x1d3ad1){}}),_0x4aa24f[_0x3798c0(0x26c)](_0x34f946=>{const _0x19dd1c=_0x3798c0;let _0x31e1ee=0x0;_0x327d44[_0x19dd1c(0x26c)](_0x5b2982=>{const _0x2b6656=_0x19dd1c;_0x5b2982 in _0x34f946[_0x2b6656(0x13c)]&&_0x34f946[_0x2b6656(0x13c)][_0x5b2982]&&_0x31e1ee++;}),_0x31e1ee==_0x327d44['length']&&_0x43ef55[_0x19dd1c(0x1a0)](capitalize(_0x34f946['id']));});let _0xffe839=[];return _0xd30522['forEach'](_0x34a6fd=>{const _0x346122=_0x3798c0;_0x34a6fd=capitalize(_0x34a6fd);if(!_0x43ef55[_0x346122(0x19d)](_0x34a6fd))_0xffe839[_0x346122(0x1a0)](_0x34a6fd);}),_0x43ef55;}function setStartDatePerformance(){const _0x1f18af=_0x178d1b;if(config&&config[_0x1f18af(0x113)][0x0][_0x1f18af(0x21c)][_0x1f18af(0x180)]!=0x0){const _0x5ccc4d=config[_0x1f18af(0x113)][0x0]['changes'];dbPerformance[_0x1f18af(0xcb)]('data')[_0x1f18af(0x10b)]({'date':config[_0x1f18af(0x231)]})[_0x1f18af(0x1c3)]({'coins':_0x5ccc4d})[_0x1f18af(0x11a)]();}}async function recreateCoinResults(){const _0x1833fa=_0x178d1b;let _0x47ef85,_0x21799f=[];try{const _0x3091fe=fns[_0x1833fa(0x24f)](fns['parseISO'](config[_0x1833fa(0x231)][_0x1833fa(0x1dd)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5dd2ca of currentCoins){if(_0x5dd2ca['coin']!=config[_0x1833fa(0x246)]){let _0x9c3317=0x0,_0x41a95c,_0x54c5e9;_0x47ef85=await getAllEventOrders(_0x5dd2ca[_0x1833fa(0xcf)]);if(_0x47ef85['length']>0x0)_0x47ef85[_0x1833fa(0x26c)](_0x5c2246=>{const _0x229a05=_0x1833fa,_0xa2c9f0=_0x5dd2ca[_0x229a05(0xcf)][_0x229a05(0x19d)](config[_0x229a05(0x246)]+'/');_0x21799f[_0x229a05(0x1a0)]({'datetime':_0x5c2246[_0x229a05(0x1fa)],'coin':_0x5dd2ca[_0x229a05(0x206)],'symbol':_0x5dd2ca['symbol'],'side':_0x5c2246[_0x229a05(0x1b0)],'reverse':_0xa2c9f0,'amount':formatResult(_0x5c2246[_0x229a05(0x153)],0x8),'filled':formatResult(_0x5c2246['filled'],0x8),'price':formatResult(_0x5c2246[_0x229a05(0x25b)],0x8)}),_0x9c3317=_0x5c2246[_0x229a05(0x1b0)]==_0x229a05(0xea)?_0x9c3317+_0x5c2246[_0x229a05(0x153)]:_0x9c3317-_0x5c2246[_0x229a05(0x153)];if(!_0x54c5e9)_0x54c5e9=_0x5c2246['price'];});_0x41a95c=_0x5dd2ca[_0x1833fa(0x197)]-_0x9c3317;let _0x2ac687;config[_0x1833fa(0x113)][_0x1833fa(0x26c)](_0x481e55=>{const _0x5ee2e8=_0x1833fa;!_0x2ac687&&(_0x2ac687=_0x481e55['changes']['find'](_0x1a62c7=>_0x1a62c7[_0x5ee2e8(0x206)]==_0x5dd2ca[_0x5ee2e8(0x206)]),_0x2ac687&&(_0x41a95c=_0x2ac687[_0x5ee2e8(0x197)],_0x54c5e9=_0x2ac687['price']));});let _0x57d234=dbCoinResults[_0x1833fa(0xcb)]('coins')['find']({'coin':_0x5dd2ca['coin']})[_0x1833fa(0x12a)]();_0x57d234={'coin':_0x5dd2ca[_0x1833fa(0x206)],'number':_0x41a95c,'breakeven':_0x54c5e9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1833fa(0xcb)](_0x1833fa(0x271))[_0x1833fa(0x10b)]({'coin':_0x5dd2ca[_0x1833fa(0x206)]})[_0x1833fa(0x1c3)](_0x57d234)['write']();}}_0x21799f['sort']((_0x56e289,_0x2775eb)=>_0x56e289['datetime']>_0x2775eb[_0x1833fa(0x1fa)]?0x1:_0x2775eb[_0x1833fa(0x1fa)]>_0x56e289[_0x1833fa(0x1fa)]?-0x1:0x0);let _0x596bf0=0x0;for(let _0x1db54e of _0x21799f){await updateCoinResults(_0x1db54e,!![]);}}catch(_0x1a02dd){await handleError(_0x1a02dd,_0x1833fa(0x1b2));}}async function getAllEventOrders(_0x51ebcb){const _0x3de75e=_0x178d1b;let _0x4a0a70=[],_0x525f9a=dbLogs['get'](_0x3de75e(0x258))[_0x3de75e(0x1bf)](_0x29969d=>{const _0x47fc2e=_0x3de75e,_0x49793c=_0x29969d['event']['toLowerCase']();return _0x49793c['includes'](_0x51ebcb[_0x47fc2e(0x170)]())&&(_0x49793c[_0x47fc2e(0x19d)](_0x47fc2e(0x107))&&_0x49793c[_0x47fc2e(0x19d)](_0x47fc2e(0xfa))||_0x49793c[_0x47fc2e(0x19d)](_0x47fc2e(0x153))&&_0x49793c[_0x47fc2e(0x19d)]('order'));})[_0x3de75e(0x216)](_0x3de75e(0x100))[_0x3de75e(0x12a)]();return _0x525f9a['forEach'](_0x3a13ef=>{const _0x93d5b6=_0x3de75e,_0x1e7c5f=_0x3a13ef['event'][_0x93d5b6(0x19d)](_0x93d5b6(0x23d))?_0x93d5b6(0x23d):'buy',_0x25f7ef=/#([0-9]|\.)+\s/i,_0x558166=Number(_0x25f7ef[_0x93d5b6(0x17c)](_0x3a13ef[_0x93d5b6(0x188)])[0x0][_0x93d5b6(0x178)](0x1)),_0x4aac05=/@([0-9]|\.)+$/i,_0x25231d=Number(_0x4aac05['exec'](_0x3a13ef[_0x93d5b6(0x188)])[0x0]['slice'](0x1));_0x4a0a70[_0x93d5b6(0x1a0)]({'datetime':_0x3a13ef['time'],'coin':symbolToCoin(_0x51ebcb),'symbol':_0x51ebcb,'side':_0x1e7c5f,'amount':_0x558166,'filled':_0x558166,'price':_0x25231d});}),_0x4a0a70;}async function getAllOrders(_0x12cf23,_0x386549){const _0x8c7559=_0x178d1b;let _0x586262=[];while(_0x386549<exchange[_0x8c7559(0x1f7)]()){const _0x1d0441=0x1f4;try{const _0x584977=await exchange[_0x8c7559(0x20d)](_0x12cf23,_0x386549,_0x1d0441);if(_0x584977['length'])_0x386549=_0x584977[_0x584977[_0x8c7559(0x180)]-0x1]['timestamp']+0x1,_0x586262=_0x586262[_0x8c7559(0x234)](_0x584977);else break;}catch(_0x20f71a){await handleError(_0x20f71a,_0x8c7559(0x120),_0x12cf23);}}return _0x586262;}async function validate24hChanges(){const _0x5c9ddc=_0x178d1b;for(const _0x570638 of currentCoins){if(_0x570638[_0x5c9ddc(0x206)]!=config[_0x5c9ddc(0x246)]){let _0x2d26bc;_0x570638['reverse']?_0x2d26bc=formatResult((0x1/(global['change'][noslash(_0x570638[_0x5c9ddc(0xcf)])]/0x64+0x1)-0x1)*0x64,0x3):_0x2d26bc=global[_0x5c9ddc(0x158)][noslash(_0x570638[_0x5c9ddc(0xcf)])],_0x2d26bc<config[_0x5c9ddc(0x1f5)]&&(logHistory(_0x5c9ddc(0x218),_0x570638[_0x5c9ddc(0x206)]+_0x5c9ddc(0x12c)+_0x2d26bc+'%'),logHistory('error',_0x5c9ddc(0x235)),logHistory(_0x5c9ddc(0x218),_0x5c9ddc(0xc9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x15e35e,_0x21b286){const _0x224cb4=_0x178d1b;if(!_0x15e35e)return!![];const _0x102c5a=_0x21b286[_0x224cb4(0x256)]('.'),_0x2491e2=_0x15e35e[_0x224cb4(0x256)]('.');for(var _0x3306c0=0x0;_0x3306c0<_0x2491e2['length'];_0x3306c0++){const _0x49d9d9=~~_0x2491e2[_0x3306c0],_0x46f0e2=~~_0x102c5a[_0x3306c0];if(_0x49d9d9<_0x46f0e2)return!![];if(_0x49d9d9>_0x46f0e2)return![];}return![];}async function oneTimeMigration(){const _0x2ec661=_0x178d1b;let _0x1fa849=dbLogs[_0x2ec661(0xcb)](_0x2ec661(0x17a))[_0x2ec661(0x12a)]();if(isOlderVersion(_0x1fa849,_0x2ec661(0x175))){let _0x246c88=[];const _0x4574fb=dbLogs[_0x2ec661(0xcb)](_0x2ec661(0x258))[_0x2ec661(0x12a)]();_0x4574fb[_0x2ec661(0x26c)](_0x41a24a=>{const _0x14b011=_0x2ec661;_0x246c88[_0x14b011(0x1a0)]({'time':_0x41a24a[_0x14b011(0x100)],'type':_0x41a24a[_0x14b011(0x159)],'event':_0x41a24a[_0x14b011(0x188)]});}),dbLogs[_0x2ec661(0xcb)]('logs')[_0x2ec661(0x1c3)](_0x246c88)[_0x2ec661(0x11a)]();}let _0x273da0=dbConfig[_0x2ec661(0xcb)](_0x2ec661(0x17a))[_0x2ec661(0x12a)]();if(isOlderVersion(_0x273da0,_0x2ec661(0x175))){let _0x40d2cd=dbConfig[_0x2ec661(0xcb)](_0x2ec661(0x1bb))['find']({'botID':botID})[_0x2ec661(0x12a)]();if(_0x40d2cd){let _0x4a654a=[];_0x40d2cd[_0x2ec661(0xcc)]['forEach'](_0x104d36=>{const _0x289e3d=_0x2ec661;_0x4a654a[_0x289e3d(0x1a0)]({'coin':_0x104d36['coin'],'number':_0x104d36[_0x289e3d(0x163)],'price':_0x104d36[_0x289e3d(0x10d)]}),delete _0x104d36['startnumber'],delete _0x104d36[_0x289e3d(0x10d)];});if(_0x4a654a['length']!==0x0)fs[_0x2ec661(0x248)](configbackuppath+(_0x2ec661(0xf3)+botID+'.json'),JSON[_0x2ec661(0x215)](_0x4a654a,null,0x4),function(_0x33a384){if(_0x33a384){}});const _0x1aefc2=(_0x37ae62,_0x4c8acc)=>{const _0x12da3d=_0x2ec661;let _0x4297f8=[];_0x4c8acc[_0x12da3d(0x26c)](_0x5137dc=>{const _0x21598f=_0x12da3d,_0xeaedcd=_0x37ae62['find'](_0x3e16ef=>_0x3e16ef[_0x21598f(0x206)]==_0x5137dc[_0x21598f(0x206)]);if(!_0xeaedcd)_0x4297f8[_0x21598f(0x1a0)](_0x5137dc);});let _0x32cdc2=[];return _0x37ae62[_0x12da3d(0x26c)](_0x495983=>{const _0xe550b4=_0x12da3d,_0x5d546a=_0x4c8acc[_0xe550b4(0x10b)](_0x26b7d1=>_0x26b7d1['coin']==_0x495983[_0xe550b4(0x206)]);if(!_0x5d546a||_0x5d546a['number']==0x0&&_0x495983[_0xe550b4(0x197)]!=0x0)_0x32cdc2[_0xe550b4(0x1a0)](_0x495983);}),{'missingDay1':_0x4297f8,'notInDay2':_0x32cdc2};},_0x37b500=dbPerformance['get'](_0x2ec661(0x1cd))['cloneDeep']()[_0x2ec661(0x12a)]();if(_0x37b500[_0x2ec661(0x180)]>0x1){const {missingDay1:_0x5a213b,notInDay2:_0x5706fb}=_0x1aefc2(_0x4a654a,_0x37b500[0x1][_0x2ec661(0x271)]);_0x4a654a=[..._0x4a654a,..._0x5a213b],_0x5706fb['forEach'](_0x3ef4f5=>{const _0x10c8ad=_0x2ec661;let _0x473729=_0x4a654a['findIndex'](_0x4fcc20=>_0x4fcc20[_0x10c8ad(0x206)]==_0x3ef4f5['coin']);_0x473729!=-0x1&&_0x4a654a[_0x10c8ad(0x230)](_0x473729,0x1);});}_0x4a654a['sort']((_0x5ea8c3,_0x5437d8)=>_0x5ea8c3[_0x2ec661(0x206)]>_0x5437d8[_0x2ec661(0x206)]?0x1:_0x5437d8[_0x2ec661(0x206)]>_0x5ea8c3[_0x2ec661(0x206)]?-0x1:0x0);let _0x97f9df=[{'date':_0x40d2cd['startdate'],'changes':_0x4a654a}];_0x37b500['length']>0x2&&_0x37b500[_0x2ec661(0x26c)]((_0x1c35e6,_0x173df0)=>{const _0x4843f4=_0x2ec661;if(_0x173df0>0x0&&_0x173df0<_0x37b500['length']-0x1){const {missingDay1:_0xe191c2,notInDay2:_0x510c20}=_0x1aefc2(_0x37b500[_0x173df0][_0x4843f4(0x271)],_0x37b500[_0x173df0+0x1]['coins']);_0x4a654a=[],(_0xe191c2[_0x4843f4(0x180)]!=0x0||_0x510c20[_0x4843f4(0x180)]!=0x0)&&(_0xe191c2['length']!=0x0&&_0x4a654a[_0x4843f4(0x1a0)](..._0xe191c2),_0x510c20['length']!=0x0&&(_0x510c20[_0x4843f4(0x26c)](_0x2c33d2=>{const _0x2f9dce=_0x4843f4;_0x2c33d2[_0x2f9dce(0x197)]=-_0x2c33d2[_0x2f9dce(0x197)];}),_0x4a654a['push'](..._0x510c20)),_0x4a654a[_0x4843f4(0x14a)]((_0x5b972c,_0x50f4cf)=>_0x5b972c[_0x4843f4(0x206)]>_0x50f4cf[_0x4843f4(0x206)]?0x1:_0x50f4cf[_0x4843f4(0x206)]>_0x5b972c[_0x4843f4(0x206)]?-0x1:0x0),_0x97f9df[_0x4843f4(0x1a0)]({'date':_0x37b500[_0x173df0+0x1][_0x4843f4(0x213)],'changes':_0x4a654a}));}}),dbConfig[_0x2ec661(0xcb)]('bot')[_0x2ec661(0x10b)]({'botID':botID})['assign']({..._0x40d2cd,'liquidity':_0x97f9df})[_0x2ec661(0x11a)]();}}if(isOlderVersion(_0x273da0,'2.6.0')){let _0x25d662=dbConfig[_0x2ec661(0xcb)](_0x2ec661(0x1bb))[_0x2ec661(0x10b)]({'botID':botID})[_0x2ec661(0x12a)]();if(_0x25d662){const _0x561fbf=_0x25d662[_0x2ec661(0x152)],_0x3b0256=_0x561fbf?capitalize(_0x561fbf):'Binance';dbConfig[_0x2ec661(0xcb)](_0x2ec661(0x1bb))[_0x2ec661(0x10b)]({'botID':botID})[_0x2ec661(0x1c3)]({'exchange':_0x3b0256})[_0x2ec661(0x11a)]();}}let _0xcde54e=dbPerformance[_0x2ec661(0xcb)]('version')['value']();isOlderVersion(_0xcde54e,_0x2ec661(0x175))&&setStartDatePerformance();let _0x3adca0=dbCoinResults[_0x2ec661(0xcb)](_0x2ec661(0x17a))['value']();if(isOlderVersion(_0x3adca0,_0x2ec661(0x1cc))){let _0x1ec651=dbCoinResults['get'](_0x2ec661(0x271))[_0x2ec661(0x12a)]();if(_0x1ec651['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1d4c2f=_0x178d1b;dbConfig[_0x1d4c2f(0x173)](_0x1d4c2f(0x17a),serverversion)['write'](),dbPerformance[_0x1d4c2f(0x173)](_0x1d4c2f(0x17a),serverversion)[_0x1d4c2f(0x11a)](),dbLogs[_0x1d4c2f(0x173)](_0x1d4c2f(0x17a),serverversion)[_0x1d4c2f(0x11a)](),dbCoinResults[_0x1d4c2f(0x173)]('version',serverversion)[_0x1d4c2f(0x11a)]();}function getConfiguration(_0x581cb7){const _0x4ba954=_0x178d1b;let _0x1af0e0=dbConfig['get'](_0x4ba954(0x1bb))['find']({'botID':_0x581cb7})['value']();if(_0x1af0e0){let _0x470679=![];typeof _0x1af0e0['threshold']==_0x4ba954(0x19c)&&(_0x1af0e0={..._0x1af0e0,'threshold':Number(_0x1af0e0[_0x4ba954(0x1e0)])},_0x470679=!![]),_0x1af0e0[_0x4ba954(0x1f5)]==undefined&&(_0x1af0e0={..._0x1af0e0,'change24h':-0x14},_0x470679=!![]),_0x1af0e0[_0x4ba954(0xe5)]==undefined&&(_0x1af0e0={..._0x1af0e0,'fiat':_0x4ba954(0x1da)},_0x470679=!![]),_0x1af0e0[_0x4ba954(0x1ee)]==undefined&&(_0x1af0e0={..._0x1af0e0,'onepagemode':settings['onepagemode']},_0x470679=!![]),_0x1af0e0[_0x4ba954(0xce)]==undefined&&(_0x1af0e0={..._0x1af0e0,'colorscheme':_0x4ba954(0x1ec)},_0x470679=!![]),_0x1af0e0[_0x4ba954(0x1b6)]==undefined&&(_0x1af0e0={..._0x1af0e0,'autoliquidity':!![]},_0x470679=!![]),_0x470679&&(_0x1af0e0={'botID':_0x1af0e0[_0x4ba954(0x22a)],'exchange':_0x1af0e0[_0x4ba954(0x152)],'apiKey':_0x1af0e0['apiKey'],'apiSecret':_0x1af0e0[_0x4ba954(0x116)],'apiPassword':_0x1af0e0[_0x4ba954(0xe1)],'basecoin':_0x1af0e0[_0x4ba954(0x246)],'botname':_0x1af0e0['botname'],'showname':_0x1af0e0['showname'],'threshold':_0x1af0e0[_0x4ba954(0x1e0)],'ordertype':_0x1af0e0[_0x4ba954(0x162)],'timeout':_0x1af0e0[_0x4ba954(0x157)],'fiat':_0x1af0e0[_0x4ba954(0xe5)],'startdate':_0x1af0e0[_0x4ba954(0x231)],'recreate':_0x1af0e0[_0x4ba954(0x1bc)],'timeshift':_0x1af0e0[_0x4ba954(0x133)],'onepagemode':_0x1af0e0[_0x4ba954(0x1ee)],'headless':_0x1af0e0[_0x4ba954(0x16c)],'cooldown':_0x1af0e0['cooldown'],'change24h':_0x1af0e0['change24h'],'emojibuy':_0x1af0e0[_0x4ba954(0x243)],'emojisell':_0x1af0e0[_0x4ba954(0xcd)],'colorscheme':_0x1af0e0[_0x4ba954(0xce)],'portfolio':_0x1af0e0['portfolio'],'autoliquidity':_0x1af0e0['autoliquidity'],'liquidity':_0x1af0e0[_0x4ba954(0x113)],'openOrders':_0x1af0e0[_0x4ba954(0x104)]},dbConfig[_0x4ba954(0xcb)](_0x4ba954(0x1bb))[_0x4ba954(0x174)]()[_0x4ba954(0x11a)](),dbConfig['get'](_0x4ba954(0x1bb))['push'](_0x1af0e0)[_0x4ba954(0x11a)]());}else _0x1af0e0={'botID':_0x581cb7,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x581cb7,'showname':![],'threshold':0x3,'ordertype':_0x4ba954(0x107),'timeout':0x14,'fiat':_0x4ba954(0x1da),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x4ba954(0x133)],'onepagemode':settings[_0x4ba954(0x1ee)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x1af0e0;}function emittedConfiguration(){const _0x3a847c=_0x178d1b;let _0x2bc967;if(config[_0x3a847c(0x1a4)]=='')_0x2bc967={...config,'configstate':_0x3a847c(0x1b1)};else config[_0x3a847c(0x1a4)]==_0x3a847c(0x1bd)?_0x2bc967={...config,'configstate':'recovery'}:(_0x2bc967={...config,'apiKey':'************','apiSecret':_0x3a847c(0x210)},config[_0x3a847c(0xe1)]&&(_0x2bc967[_0x3a847c(0xe1)]=_0x3a847c(0x210)));return _0x2bc967;}function getSettings(){const _0x15e16f=_0x178d1b;return dbSettings[_0x15e16f(0xcb)](_0x15e16f(0x198))['value']();}function getSecure(){return dbSecure['get']('secure')['value']()||{};}function updateTimeshift(_0xebfefb){const _0x459161=_0x178d1b;let _0x1927e1=dbConfig[_0x459161(0xcb)](_0x459161(0x1bb))[_0x459161(0x10b)]({'botID':botID})['value']();_0x1927e1&&dbConfig[_0x459161(0xcb)](_0x459161(0x1bb))[_0x459161(0x10b)]({'botID':botID})['assign']({'timeshift':_0xebfefb})['write'](),config['timeshift']=_0xebfefb,proxyEmit(_0x459161(0x199),emittedConfiguration());}function updateOnepagemode(_0x58bf8a){const _0x3eeac6=_0x178d1b;let _0x4b4648=dbConfig[_0x3eeac6(0xcb)]('bot')[_0x3eeac6(0x10b)]({'botID':botID})[_0x3eeac6(0x12a)]();_0x4b4648&&dbConfig[_0x3eeac6(0xcb)]('bot')['find']({'botID':botID})['assign']({'onepagemode':_0x58bf8a})[_0x3eeac6(0x11a)](),config['onepagemode']=_0x58bf8a,proxyEmit(_0x3eeac6(0x199),emittedConfiguration());}async function storeConfiguration(_0x14c2f4){const _0x12a78f=_0x178d1b;logger[_0x12a78f(0xf5)](_0x12a78f(0xf0));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x12a78f(0xf5)](_0x12a78f(0x121));let _0x26ec1b=![],_0x4aeee3=![],_0x17bd66=[];_0x14c2f4[_0x12a78f(0xcc)][_0x12a78f(0x26c)](_0x491d00=>{const _0x193824=_0x12a78f;if(!_0x491d00[_0x193824(0x1f4)]&&_0x491d00[_0x193824(0x206)]!=_0x14c2f4[_0x193824(0x246)])_0x17bd66[_0x193824(0x1a0)](_0x491d00[_0x193824(0xcf)]);}),_0x17bd66[_0x12a78f(0x26c)](_0x56bdf8=>{const _0x591b06=_0x12a78f,_0xeaddf7=currentCoins[_0x591b06(0x10b)](_0x1ceba4=>_0x1ceba4[_0x591b06(0xcf)]==_0x56bdf8);!_0xeaddf7&&(_0x26ec1b=!![]);}),currentCoins[_0x12a78f(0x26c)](_0x86ba4f=>{const _0x492b5f=_0x12a78f;if(_0x86ba4f[_0x492b5f(0x206)]!=config[_0x492b5f(0x246)]){const _0x2f37f3=_0x17bd66[_0x492b5f(0x10b)](_0x14a1b4=>_0x14a1b4==_0x86ba4f[_0x492b5f(0xcf)]);!_0x2f37f3&&(_0x26ec1b=!![]);}}),_0x14c2f4[_0x12a78f(0xcc)][_0x12a78f(0x26c)](_0x59ada9=>{const _0x512f34=_0x12a78f,_0x75bea8=config['portfolio']['find'](_0x1e6b59=>_0x1e6b59[_0x512f34(0x206)]==_0x59ada9[_0x512f34(0x206)]);if(_0x75bea8&&_0x59ada9[_0x512f34(0x11f)]!=_0x75bea8['offset'])_0x4aeee3=!![];});let _0x4fb98d=dbConfig[_0x12a78f(0xcb)]('bot')['find']({'botID':botID})[_0x12a78f(0x12a)]();_0x14c2f4={..._0x14c2f4,'apiKey':crypt['decrypt'](secure['privateKey'],_0x14c2f4[_0x12a78f(0x1a4)])[_0x12a78f(0x135)],'apiSecret':crypt['decrypt'](secure[_0x12a78f(0x19e)],_0x14c2f4[_0x12a78f(0x116)])[_0x12a78f(0x135)]};_0x14c2f4[_0x12a78f(0xe1)]&&(_0x14c2f4['apiPassword']=crypt[_0x12a78f(0x251)](secure['privateKey'],_0x14c2f4['apiPassword'])['message']);let _0x1545ea=![];if(_0x4fb98d){_0x14c2f4[_0x12a78f(0x1a4)]=='************'?_0x14c2f4[_0x12a78f(0x1a4)]=config[_0x12a78f(0x1a4)]:_0x1545ea=!![];_0x14c2f4['apiSecret']==_0x12a78f(0x210)?_0x14c2f4[_0x12a78f(0x116)]=config[_0x12a78f(0x116)]:_0x1545ea=!![];if(_0x14c2f4[_0x12a78f(0xe1)]=='************')_0x14c2f4[_0x12a78f(0xe1)]=config[_0x12a78f(0xe1)];else{if(_0x14c2f4[_0x12a78f(0xe1)])_0x1545ea=!![];}dbConfig[_0x12a78f(0xcb)](_0x12a78f(0x1bb))['find']({'botID':botID})[_0x12a78f(0x1c3)](_0x14c2f4)['write']();}else dbConfig[_0x12a78f(0xcb)](_0x12a78f(0x1bb))['push'](_0x14c2f4)[_0x12a78f(0x11a)](),_0x1545ea=!![],process[_0x12a78f(0x114)]({'status':'enabled','live':'running'},_0x1da8a9=>{});process['send']({'botname':_0x14c2f4[_0x12a78f(0x20a)]},_0x40d380=>{}),config={..._0x14c2f4},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1545ea)await reset(!![]);else _0x26ec1b||_0x4aeee3?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x12a78f(0xf5)](_0x12a78f(0x165));}async function storeHeadless(_0xf2a7d4){const _0x2897eb=_0x178d1b,_0x26bdac={...config,'headless':_0xf2a7d4['headless']};let _0x5f1c9=dbConfig[_0x2897eb(0xcb)](_0x2897eb(0x1bb))[_0x2897eb(0x10b)]({'botID':botID})[_0x2897eb(0x12a)]();_0x5f1c9&&dbConfig['get'](_0x2897eb(0x1bb))['find']({'botID':botID})['assign'](_0x26bdac)[_0x2897eb(0x11a)](),config={..._0x26bdac},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x5659d7){const _0x25a651=_0x178d1b,_0x3afdc1={...config,'fiat':_0x5659d7};let _0x2a064e=dbConfig['get'](_0x25a651(0x1bb))['find']({'botID':botID})['value']();_0x2a064e&&dbConfig[_0x25a651(0xcb)](_0x25a651(0x1bb))[_0x25a651(0x10b)]({'botID':botID})['assign'](_0x3afdc1)[_0x25a651(0x11a)](),config={..._0x3afdc1},proxyEmit(_0x25a651(0x199),emittedConfiguration());}function resetHistory(){const _0x37d7eb=_0x178d1b;logger['full'](_0x37d7eb(0x265));try{if(fs['existsSync'](path[_0x37d7eb(0xf9)](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x149))))fs['unlinkSync'](path[_0x37d7eb(0xf9)](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x149)));if(fs[_0x37d7eb(0x1c6)](path[_0x37d7eb(0xf9)](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x189))))fs[_0x37d7eb(0x191)](path['join'](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x189)));if(fs[_0x37d7eb(0x1c6)](path[_0x37d7eb(0xf9)](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x195))))fs[_0x37d7eb(0x191)](path[_0x37d7eb(0xf9)](configpath,_0x37d7eb(0x1ca)+botID+_0x37d7eb(0x195)));}catch(_0x3d5cf1){if(_0x3d5cf1)logger['full'](_0x37d7eb(0x11e),_0x3d5cf1);}const _0x28bae5=getDate();let _0x505757=[];currentCoins['forEach'](_0x81d5cc=>{const _0x11fa05=_0x37d7eb;_0x505757[_0x11fa05(0x1a0)]({'coin':_0x81d5cc[_0x11fa05(0x206)],'number':_0x81d5cc['number'],'price':_0x81d5cc[_0x11fa05(0x20f)]});});let _0x2132c0=dbConfig[_0x37d7eb(0xcb)](_0x37d7eb(0x1bb))[_0x37d7eb(0x10b)]({'botID':botID})['value']();_0x2132c0&&(dbConfig[_0x37d7eb(0xcb)](_0x37d7eb(0x1bb))[_0x37d7eb(0x10b)]({'botID':botID})[_0x37d7eb(0x1c3)]({'liquidity':[{'date':_0x28bae5,'changes':_0x505757}]})[_0x37d7eb(0x11a)](),config[_0x37d7eb(0x113)]=[]),process[_0x37d7eb(0x114)]({'stop':'restart'},_0x58347e=>{});}function noslash(_0x5bb96a){const _0x4c4102=_0x178d1b;return _0x5bb96a[_0x4c4102(0x1dd)]('/','');}function updateHighestFee(_0x405517){const _0x371698=_0x178d1b;if(_0x405517[_0x371698(0x254)]){let _0x28ef88={'filled':_0x405517['filled']*_0x405517[_0x371698(0x25b)],'amount':_0x405517[_0x371698(0x153)]*_0x405517['price'],'side':_0x405517[_0x371698(0x1b0)]==_0x371698(0x23d)?'buy':_0x371698(0x23d),'price':0x1/_0x405517[_0x371698(0x25b)]};_0x405517={..._0x405517,..._0x28ef88};}const _0xa91b32=defaultFee*_0x405517['filled']*_0x405517['price'];lastFees['recent20'][_0x371698(0x180)]===0x14&&lastFees['recent20'][_0x371698(0x182)](),lastFees[_0x371698(0x18a)][_0x371698(0x1a0)](_0xa91b32),lastFees[_0x371698(0x1c9)]=Math['max'](...lastFees[_0x371698(0x18a)]);}async function updateNumberCoinsCcxt(_0x47aebd){const _0x38eccb=_0x178d1b;logger[_0x38eccb(0xf5)](_0x38eccb(0x236)+_0x47aebd[_0x38eccb(0xcf)]+'\x20|\x20'+_0x47aebd['status']+_0x38eccb(0x1d8)+_0x47aebd['filled']+_0x38eccb(0x18e)+_0x47aebd[_0x38eccb(0x15a)]+'\x20|\x20'+_0x47aebd['id']);let _0x1ceba0=_0x47aebd['status'],_0x4ddb7d=![];currentCoins[_0x38eccb(0x26c)](_0x54d9ca=>{const _0x15aaf2=_0x38eccb;_0x54d9ca['symbol']==_0x47aebd[_0x15aaf2(0xcf)]&&(_0x4ddb7d=!![]);});if(!_0x4ddb7d)return;const _0x4218a3=currentCoins[_0x38eccb(0x10b)](_0x8487ed=>_0x8487ed[_0x38eccb(0xcf)]==_0x47aebd[_0x38eccb(0xcf)]),_0x12de1e=_0x4d288b=>{const _0x261cf1=_0x38eccb;if(_0x4218a3)_0x4218a3[_0x261cf1(0x193)]=_0x4d288b;};if(_0x1ceba0==_0x38eccb(0x115))_0x12de1e('open');else{if(_0x1ceba0==_0x38eccb(0x134)){_0x12de1e(_0x38eccb(0x134));const _0x5c4cf7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5c4cf7,await getOpenOrders(),handleOpenOrders();}else{if(_0x1ceba0=='closed'){let _0x34e373=![];if(lastOrders)for(const _0x5e6337 of lastOrders){const _0x547316=0xc8,_0x339f04=0x1388;let _0x3f9086=0x0;while(!_0x5e6337[_0x38eccb(0x101)]&&_0x3f9086*_0x547316<_0x339f04){_0x3f9086++,await sleep(_0x547316);}if(_0x3f9086>0x0)logger[_0x38eccb(0xf5)](_0x38eccb(0x1e8)+_0x3f9086*_0x547316/0x3e8+_0x38eccb(0x13a));if(_0x5e6337['orderId']==_0x47aebd['id']){logger['debug'](_0x38eccb(0xe0)+_0x47aebd['id']),_0x34e373=!![];if(_0x5e6337[_0x38eccb(0x153)]==0x0){logger[_0x38eccb(0xf5)](_0x38eccb(0x146)+_0x47aebd['id']);if(_0x47aebd[_0x38eccb(0x1e9)])_0x5e6337[_0x38eccb(0x25b)]=_0x47aebd[_0x38eccb(0x1e9)];else{if(_0x47aebd[_0x38eccb(0x25b)])_0x5e6337[_0x38eccb(0x25b)]=_0x47aebd[_0x38eccb(0x25b)];else{}}_0x5e6337[_0x38eccb(0x153)]=_0x47aebd[_0x38eccb(0x153)],updateHighestFee(_0x5e6337),_0x12de1e(_0x38eccb(0x153)),await validateOrders();if(lockOrders==ORDERS[_0x38eccb(0x21e)]){const _0x1f706b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1f706b;}_0x5e6337[_0x38eccb(0xe4)]={'currency':_0x47aebd[_0x38eccb(0xe4)]?_0x47aebd['fee'][_0x38eccb(0x1e6)]:null,'cost':_0x47aebd[_0x38eccb(0xe4)]?_0x47aebd[_0x38eccb(0xe4)][_0x38eccb(0x26a)]:0x0},await updateCoinResults(_0x5e6337);}}}if(!_0x34e373){logger[_0x38eccb(0xf5)](_0x38eccb(0x1b5)+_0x47aebd['id']),_0x12de1e('filled');const _0x40bc17=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x40bc17,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x18963d=JSON[_0x38eccb(0x225)](lastBalances['portfolio']);const _0x5a9d30=_0x18963d[_0x38eccb(0x10b)](_0x5a4e1c=>_0x5a4e1c[_0x38eccb(0xcf)]==_0x47aebd[_0x38eccb(0xcf)]);if(_0x5a9d30){if(_0x1ceba0==_0x38eccb(0x115))_0x5a9d30[_0x38eccb(0x193)]=_0x5a9d30[_0x38eccb(0x193)]==_0x38eccb(0x153)?_0x38eccb(0x153):'open';else{if(_0x1ceba0=='canceled')_0x5a9d30[_0x38eccb(0x193)]=_0x5a9d30[_0x38eccb(0x193)]==_0x38eccb(0x153)?_0x38eccb(0x153):'canceled';else _0x1ceba0=='closed'&&(_0x5a9d30[_0x38eccb(0x193)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x18963d)},proxyEmit(_0x38eccb(0x1d9),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x7da578=_0x178d1b;await getOpenOrders();let _0x516557=![];currentCoins[_0x7da578(0x26c)](_0x188a65=>{const _0x3de99e=_0x7da578;_0x516557=allOpenOrders['find'](_0x1e6cdb=>_0x1e6cdb['symbol']==_0x188a65[_0x3de99e(0xcf)]),_0x188a65[_0x3de99e(0x193)]=_0x516557?'open':_0x3de99e(0xfe);});}async function getCoins(_0xe1a449=0x0,_0x3b3756=!![],_0xe7b31e=config[_0x178d1b(0x246)]){const _0x19d1a3=_0x178d1b;let _0x3fbc5f,_0x22b68f=[],_0xb5a9eb=[],_0x3e03f7=[];if(_0xe1a449)await sleep(_0xe1a449);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3fbc5f=await exchange[_0x19d1a3(0x1ba)](),mybalances=_0x3fbc5f[_0x19d1a3(0x18c)];for(const [_0x3b5a51,_0x2fbe0a]of Object['entries'](mybalances)){_0x3e03f7[_0x19d1a3(0x1a0)](_0x3b5a51);}config[_0x19d1a3(0xcc)][_0x19d1a3(0x26c)](_0x323338=>{const _0x575f1d=_0x19d1a3;!_0x3e03f7[_0x575f1d(0x19d)](_0x323338[_0x575f1d(0x206)])&&(mybalances[_0x323338[_0x575f1d(0x206)]]=0x0);});if(_0xe7b31e=='')for(const [_0x34452b,_0x142e8e]of Object[_0x19d1a3(0xf8)](mybalances)){_0x142e8e!=0x0&&_0x22b68f[_0x19d1a3(0x1a0)]({'coin':_0x34452b});}else{let _0xe8640a=![];for(const [_0xb36051,_0x18a865]of Object['entries'](mybalances)){const _0x26e8e2=config[_0x19d1a3(0xcc)][_0x19d1a3(0x10b)](_0x950fef=>_0x950fef[_0x19d1a3(0x206)]==_0xb36051),_0x47ff0b=_0xb36051+'/'+_0xe7b31e,_0x116c94=_0xe7b31e+'/'+_0xb36051,_0x220c21=currentCoins[_0x19d1a3(0x10b)](_0x455b43=>_0x455b43[_0x19d1a3(0x206)]==_0xb36051);_0xe8640a=![];if((_0x18a865!=0x0||_0x26e8e2)&&(allSymbols[_0x19d1a3(0x19d)](_0x47ff0b)||_0xb36051==_0xe7b31e))_0x22b68f[_0x19d1a3(0x1a0)]({'coin':_0xb36051,'symbol':_0x47ff0b,'reverse':![],'number':Math[_0x19d1a3(0x212)](_0x18a865+(_0x26e8e2&&_0x26e8e2[_0x19d1a3(0x11f)]||0x0),0x0),'orderstatus':_0x220c21?_0x220c21[_0x19d1a3(0x193)]:_0x19d1a3(0xfe)});else{if((_0x18a865!=0x0||_0x26e8e2)&&allSymbols['includes'](_0x116c94))_0x22b68f['push']({'coin':_0xb36051,'symbol':_0x116c94,'reverse':!![],'number':Math['max'](_0x18a865+(_0x26e8e2&&_0x26e8e2[_0x19d1a3(0x11f)]||0x0),0x0),'orderstatus':_0x220c21?_0x220c21[_0x19d1a3(0x193)]:_0x19d1a3(0xfe)});else _0x26e8e2&&_0x22b68f[_0x19d1a3(0x1a0)]({'coin':_0x26e8e2[_0x19d1a3(0x206)],'symbol':_0x26e8e2['symbol'],'reverse':_0x26e8e2[_0x19d1a3(0x254)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x5a39d4){if(!_0x3b3756)handleErrorNoStop(_0x5a39d4,_0x19d1a3(0x1a5));else await handleError(_0x5a39d4,'getCoins()');}return _0xb5a9eb=cloneDeep(_0x22b68f),_0x22b68f=_0x22b68f[_0x19d1a3(0x1bf)](_0x4cea95=>{const _0x4c389c=_0x19d1a3,_0x5de272=config[_0x4c389c(0xcc)][_0x4c389c(0x10b)](_0x1c9a22=>_0x1c9a22[_0x4c389c(0x206)]==_0x4cea95[_0x4c389c(0x206)]);return _0x5de272&&!_0x5de272[_0x4c389c(0x1f4)];}),[_0x22b68f,_0xb5a9eb];}async function getCoinNumber(_0x4b623c){const _0x5534d9=_0x178d1b;let _0x118081;try{const _0x366634=await exchange[_0x5534d9(0x1ba)]();_0x118081=_0x366634[_0x5534d9(0x18c)][_0x4b623c];}catch(_0x42c109){await handleError(_0x42c109,'getCoinNumber()');}return _0x118081;}async function getOpenOrders(){const _0xf39698=_0x178d1b;let _0x47a9d0;allOpenOrders=[];try{for(const _0x233e13 of config[_0xf39698(0xcc)]){!_0x233e13[_0xf39698(0x1f4)]&&_0x233e13[_0xf39698(0x206)]!=config['basecoin']&&(_0x47a9d0=await exchange['fetchOpenOrders'](_0x233e13[_0xf39698(0xcf)]),_0x47a9d0[_0xf39698(0x180)]>0x0&&allOpenOrders[_0xf39698(0x1a0)](_0x47a9d0[0x0]));}}catch(_0x19b6b5){await handleError(_0x19b6b5,_0xf39698(0x208));}}async function handleOpenOrders(_0x1276e9=0x0){const _0x4458cf=_0x178d1b;allOpenOrders[_0x4458cf(0x180)]==0x0&&lockOrders==ORDERS[_0x4458cf(0x21e)]&&allOrdersPlaced&&(_0x1276e9==0x0?(logger[_0x4458cf(0xf5)](_0x4458cf(0x10f)),_0x1276e9++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4458cf(0xf5)](_0x4458cf(0x1b8)),validateOrders(_0x4458cf(0x1a7))));}async function testAPI(_0x2a1ba8){const _0x1de982=_0x178d1b,_0x5f1fab=ccxt[_0x1de982(0xc8)][_0x2a1ba8[_0x1de982(0x152)][_0x1de982(0x170)]()],_0x51e43a=new _0x5f1fab({'apiKey':_0x2a1ba8[_0x1de982(0x1a4)],'secret':_0x2a1ba8[_0x1de982(0x116)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x2a1ba8[_0x1de982(0xe1)])_0x51e43a['password']=_0x2a1ba8[_0x1de982(0xe1)];try{await _0x51e43a['loadMarkets']();}catch(_0x58146e){throw _0x58146e;}}function cloneDeep(_0x30fd94){const _0x516a41=_0x178d1b;return JSON[_0x516a41(0x225)](JSON[_0x516a41(0x215)](_0x30fd94));}async function getPortfolio(_0x40da4f){const _0x23bb42=_0x178d1b;let _0x3a98ae=[],_0x1ae84f=[],_0x2e727b=[],_0xfc2e3e;if(_0x40da4f['apiKey']!=='************'||_0x40da4f[_0x23bb42(0x116)]!==_0x23bb42(0x210)||_0x40da4f[_0x23bb42(0xe1)]&&_0x40da4f[_0x23bb42(0xe1)]!==_0x23bb42(0x210)){if(config[_0x23bb42(0x152)]){if(_0x40da4f['apiKey']=='************')_0x40da4f[_0x23bb42(0x1a4)]=config[_0x23bb42(0x1a4)];if(_0x40da4f[_0x23bb42(0x116)]=='************')_0x40da4f['apiSecret']=config[_0x23bb42(0x116)];if(_0x40da4f['apiPassword']==_0x23bb42(0x210))_0x40da4f['apiPassword']=config[_0x23bb42(0xe1)];try{await testAPI(_0x40da4f);}catch(_0xae81d9){if(_0xae81d9[_0x23bb42(0x268)]()[_0x23bb42(0x19d)](_0x23bb42(0x26e))){logger[_0x23bb42(0xf5)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x23bb42(0xcc),![]);return;}else{handleError(_0xae81d9,_0x23bb42(0x15c));return;}}}await initExchange(_0x40da4f[_0x23bb42(0x152)],_0x40da4f[_0x23bb42(0x1a4)],_0x40da4f[_0x23bb42(0x116)],_0x40da4f[_0x23bb42(0xe1)]);try{await loadSymbols();}catch(_0x21168a){if(_0x21168a[_0x23bb42(0x268)]()[_0x23bb42(0x19d)](_0x23bb42(0x26e))){proxyEmit(_0x23bb42(0xcc),![]);return;}else{handleError(_0x21168a,_0x23bb42(0x1c4));return;}}const _0x346fa8=await getCoins(0x0,![],_0x40da4f[_0x23bb42(0x246)]);_0x2e727b=cloneDeep(_0x346fa8[0x1]);}else _0x2e727b=cloneDeep(currentCoinsAll);if(_0x40da4f[_0x23bb42(0x246)]=='')proxyEmit(_0x23bb42(0xcc),_0x2e727b);else{_0x2e727b[_0x23bb42(0x26c)](_0x49a06a=>{const _0x17b013=_0x23bb42;if(_0x49a06a[_0x17b013(0x206)]!=_0x40da4f[_0x17b013(0x246)]&&allSymbols['includes'](_0x49a06a[_0x17b013(0xcf)]))_0x3a98ae[_0x17b013(0x1a0)](_0x49a06a[_0x17b013(0xcf)]);});if(_0x3a98ae[_0x23bb42(0x180)]==0x0)logHistory(_0x23bb42(0x218),_0x23bb42(0x24a));else{try{_0x1ae84f=await getTickers(_0x3a98ae);}catch(_0x4b3fd7){if(_0x4b3fd7[_0x23bb42(0x268)]()[_0x23bb42(0x19d)](_0x23bb42(0x26e))){proxyEmit(_0x23bb42(0xcc),![]);return;}else handleError(_0x4b3fd7,'getPortfolio(2)');}_0x2e727b['forEach'](_0x189e7f=>{const _0x8fbee7=_0x23bb42;_0x189e7f[_0x8fbee7(0x206)]!=_0x40da4f[_0x8fbee7(0x246)]?_0x1ae84f[_0x189e7f[_0x8fbee7(0xcf)]]?_0xfc2e3e=_0x189e7f['reverse']?0x1/_0x1ae84f[_0x189e7f[_0x8fbee7(0xcf)]][_0x8fbee7(0x20f)]:_0x1ae84f[_0x189e7f[_0x8fbee7(0xcf)]][_0x8fbee7(0x20f)]:_0xfc2e3e=0x0:_0xfc2e3e=0x1,_0x189e7f[_0x8fbee7(0x25b)]=formatResult(_0xfc2e3e,0x8);}),proxyEmit(_0x23bb42(0xcc),_0x2e727b);}}}function truncateTradeAmount(_0x4ca54f,_0x499369){const _0x294013=_0x178d1b;let _0x40cb20=0x0;try{_0x40cb20=exchange[_0x294013(0x1f0)](_0x4ca54f,_0x499369);}catch(_0x4d998b){}return _0x40cb20;}function checkMinimums(_0x581ed0){const _0x140dd6=_0x178d1b;let _0x4fb498=!![];const _0x25f648=!_0x581ed0['reverse']?markets[_0x581ed0[_0x140dd6(0xcf)]]['limits'][_0x140dd6(0x15a)]['min']:markets[_0x581ed0['symbol']][_0x140dd6(0x177)]['cost']['min'],_0xbc09a6=!_0x581ed0['reverse']?markets[_0x581ed0['symbol']][_0x140dd6(0x177)][_0x140dd6(0x26a)][_0x140dd6(0x190)]:markets[_0x581ed0['symbol']][_0x140dd6(0x177)][_0x140dd6(0x15a)][_0x140dd6(0x190)],_0x1f6b8e=truncateTradeAmount(_0x581ed0[_0x140dd6(0xcf)],_0x581ed0[_0x140dd6(0x108)]);_0x581ed0['trade']=_0x1f6b8e;if(Math[_0x140dd6(0x12e)](_0x1f6b8e)<_0x25f648)_0x4fb498=![];if(Math[_0x140dd6(0x12e)](_0x1f6b8e)*_0x581ed0[_0x140dd6(0x20f)]<_0xbc09a6)_0x4fb498=![];if(_0x581ed0['side']=='sell'){let _0x2cf49e=config[_0x140dd6(0xcc)][_0x140dd6(0x10b)](_0x577b0a=>_0x577b0a[_0x140dd6(0x206)]==_0x581ed0[_0x140dd6(0x206)]);if(_0x2cf49e[_0x140dd6(0x11f)]>0x0){if(Math['abs'](_0x1f6b8e)>_0x581ed0[_0x140dd6(0x197)]-_0x2cf49e[_0x140dd6(0x11f)])_0x4fb498=![];}else{if(Math[_0x140dd6(0x12e)](_0x1f6b8e)>_0x581ed0[_0x140dd6(0x197)])_0x4fb498=![];}}if(_0x581ed0[_0x140dd6(0x1b0)]==_0x140dd6(0xea)){let _0x3270ee=config[_0x140dd6(0xcc)][_0x140dd6(0x10b)](_0x3dd263=>_0x3dd263[_0x140dd6(0x206)]==config[_0x140dd6(0x246)]),_0x3b2189=currentCoins[_0x140dd6(0x10b)](_0x45bea6=>_0x45bea6['coin']==config[_0x140dd6(0x246)]);if(_0x3270ee[_0x140dd6(0x11f)]>0x0){if(Math['abs'](_0x1f6b8e)*_0x581ed0[_0x140dd6(0x20f)]>_0x3b2189[_0x140dd6(0x197)]-_0x3270ee[_0x140dd6(0x11f)])_0x4fb498=![];}else{if(Math['abs'](_0x1f6b8e)*_0x581ed0[_0x140dd6(0x20f)]>_0x3b2189[_0x140dd6(0x197)])_0x4fb498=![];}}return _0x4fb498;}async function getBalances(_0x4c9f1f=!![]){const _0x1fec41=_0x178d1b;let _0x27678e=0x0,_0x367fe9;const _0x402660=config[_0x1fec41(0x1e0)];if(config[_0x1fec41(0x16c)]&&config[_0x1fec41(0x1f5)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x17f819=>{const _0x3be732=_0x1fec41;if(_0x17f819[_0x3be732(0x206)]!=config[_0x3be732(0x246)]){let _0x4ecc60=global['ticker'][noslash(_0x17f819[_0x3be732(0xcf)])];_0x367fe9=_0x17f819[_0x3be732(0x254)]?0x1/_0x4ecc60:_0x4ecc60;}else _0x367fe9=0x1;let _0x2e8663=_0x17f819[_0x3be732(0x197)]*_0x367fe9;_0x27678e+=_0x2e8663,_0x17f819['last']=formatResult(Number(_0x367fe9),0x8),_0x17f819[_0x3be732(0x12a)]=_0x2e8663;}),currentCoins['forEach'](_0x35cd34=>{const _0x3b3a82=_0x1fec41;let _0x5a4391=config[_0x3b3a82(0xcc)][_0x3b3a82(0x10b)](_0x29e96d=>_0x29e96d[_0x3b3a82(0x206)]==_0x35cd34[_0x3b3a82(0x206)]),_0xb63b15=Number(_0x5a4391[_0x3b3a82(0x261)]),_0x47832a=_0x35cd34[_0x3b3a82(0x12a)]/_0x27678e*0x64,_0x447504=_0xb63b15*_0x27678e/0x64/_0x35cd34[_0x3b3a82(0x20f)]-_0x35cd34['number'];_0x35cd34[_0x3b3a82(0x261)]=formatResult(_0x47832a,0x3),_0x35cd34[_0x3b3a82(0x112)]=formatResult(_0xb63b15,0x3),_0x35cd34[_0x3b3a82(0x108)]=formatResult(_0x447504,0x8),_0x35cd34['side']='',_0x35cd34['valid']=![];if(_0x35cd34[_0x3b3a82(0x206)]!=config['basecoin']){if(_0x35cd34[_0x3b3a82(0x261)]>_0xb63b15)_0x35cd34[_0x3b3a82(0x1b0)]=_0x3b3a82(0x23d),_0x35cd34[_0x3b3a82(0x1c1)]=checkMinimums(_0x35cd34);else _0x35cd34[_0x3b3a82(0x261)]<_0xb63b15&&(_0x35cd34[_0x3b3a82(0x1b0)]=_0x3b3a82(0xea),_0x35cd34[_0x3b3a82(0x1c1)]=checkMinimums(_0x35cd34));}_0x35cd34[_0x3b3a82(0x1fe)]=_0x35cd34[_0x3b3a82(0x261)]/_0x35cd34[_0x3b3a82(0x112)]-0x1;if(_0x35cd34[_0x3b3a82(0x193)]==_0x3b3a82(0x153)||_0x35cd34[_0x3b3a82(0x193)]==_0x3b3a82(0x134))_0x35cd34[_0x3b3a82(0x193)]=_0x3b3a82(0xfe);}),currentCoins[_0x1fec41(0x14a)]((_0x3afd16,_0xa93142)=>_0x3afd16[_0x1fec41(0x1fe)]<_0xa93142['delta']?0x1:_0xa93142[_0x1fec41(0x1fe)]<_0x3afd16[_0x1fec41(0x1fe)]?-0x1:0x0);const _0x28176d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x28176d[_0x1fec41(0x1ac)],'usd':_0x28176d[_0x1fec41(0x273)],'portfolio':JSON[_0x1fec41(0x215)](currentCoins),'threshold':_0x402660},proxyEmit(_0x1fec41(0x1d9),{'serverversion':serverversion,'balances':lastBalances});if(_0x4c9f1f){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x402660});else{if(lockOrders==ORDERS[_0x1fec41(0x122)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x402660});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4bcca1=getNormalizedPerformance();getStartingBalances(_0x4bcca1),emitPerformance(_0x4bcca1);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5d23ba=getNormalizedPerformance();emitPerformance(_0x5d23ba),getStartingBalances(_0x5d23ba),logger[_0x1fec41(0xf5)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x43f1a0=_0x178d1b;if(!lastBalances)return;let _0x5b1930=[],_0x2662b0,_0x4f8641=JSON['parse'](lastBalances[_0x43f1a0(0xcc)]);_0x4f8641['sort']((_0x14c2ee,_0x39e5c9)=>_0x14c2ee['coin']>_0x39e5c9[_0x43f1a0(0x206)]?0x1:_0x39e5c9[_0x43f1a0(0x206)]>_0x14c2ee['coin']?-0x1:0x0),_0x4f8641[_0x43f1a0(0x26c)](_0x556d9d=>{const _0x32032b=_0x43f1a0;let _0x364fd8={'coin':_0x556d9d[_0x32032b(0x206)],'number':_0x556d9d[_0x32032b(0x197)],'price':_0x556d9d[_0x32032b(0x20f)]};_0x5b1930[_0x32032b(0x1a0)](_0x364fd8);});const _0x752bb6=await getFiat();_0x2662b0={'date':lastBalances[_0x43f1a0(0x100)]['split']('\x20')[0x0],'eur':_0x752bb6['eur'],'usd':_0x752bb6[_0x43f1a0(0x273)],'coins':_0x5b1930};let _0x53bf30=dbPerformance[_0x43f1a0(0xcb)](_0x43f1a0(0x1cd))[_0x43f1a0(0x10b)]({'date':_0x2662b0[_0x43f1a0(0x213)]})[_0x43f1a0(0x12a)]();_0x53bf30?_0x2662b0['date']!=config[_0x43f1a0(0x231)]&&dbPerformance[_0x43f1a0(0xcb)](_0x43f1a0(0x1cd))[_0x43f1a0(0x10b)]({'date':_0x2662b0[_0x43f1a0(0x213)]})['assign'](_0x2662b0)[_0x43f1a0(0x11a)]():dbPerformance[_0x43f1a0(0xcb)](_0x43f1a0(0x1cd))[_0x43f1a0(0x1a0)](_0x2662b0)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1550a3=_0x178d1b;let _0x364bb1=[];if(dbPerformance['has'](_0x1550a3(0x1cd))[_0x1550a3(0x12a)]()){let _0x1ebccd=dbPerformance[_0x1550a3(0xcb)](_0x1550a3(0x1cd))[_0x1550a3(0xd8)]()[_0x1550a3(0x1bf)](_0x4aae7e=>{const _0x11d376=_0x1550a3;if(_0x4aae7e[_0x11d376(0x271)][_0x11d376(0x180)]==0x0)return![];else return!![];})['sortBy'](_0x1550a3(0x213))['value'](),_0x36c2d2=[...config[_0x1550a3(0x113)]];_0x36c2d2[_0x1550a3(0x14a)]((_0x51d7c3,_0x239644)=>_0x51d7c3[_0x1550a3(0x213)]>_0x239644[_0x1550a3(0x213)]?-0x1:_0x239644['date']>_0x51d7c3[_0x1550a3(0x213)]?0x1:0x0);let _0x326dae=0x1,_0x4f6660=[],_0x48086a=0x0;_0x1ebccd[_0x1550a3(0x178)]()[_0x1550a3(0x254)]()['forEach']((_0x5658a5,_0x37343c)=>{const _0x575ed0=_0x1550a3;if(_0x36c2d2[_0x48086a]){if(_0x1ebccd[_0x1ebccd[_0x575ed0(0x180)]-_0x37343c]&&_0x36c2d2[_0x48086a][_0x575ed0(0x213)]==_0x1ebccd[_0x1ebccd[_0x575ed0(0x180)]-_0x37343c][_0x575ed0(0x213)]){if(_0x37343c<_0x1ebccd[_0x575ed0(0x180)]){let _0x160eca=0x0,_0x18c95f=0x0;_0x1ebccd[_0x1ebccd[_0x575ed0(0x180)]-_0x37343c][_0x575ed0(0x271)][_0x575ed0(0x26c)](_0x283600=>{const _0x235a63=_0x575ed0;_0x18c95f+=_0x283600[_0x235a63(0x197)]*_0x283600[_0x235a63(0x25b)];}),_0x36c2d2[_0x48086a][_0x575ed0(0x21c)]['forEach'](_0x52a704=>{const _0x4b71c5=_0x575ed0;_0x160eca+=_0x52a704[_0x4b71c5(0x197)]*_0x52a704[_0x4b71c5(0x25b)];}),_0x326dae*=_0x160eca/(_0x18c95f-_0x160eca)+0x1;}_0x48086a++;}}let _0x4b377d=0x0;_0x5658a5[_0x575ed0(0x271)][_0x575ed0(0x26c)](_0x27cf4f=>{const _0x259b8d=_0x575ed0;_0x4b377d+=_0x27cf4f[_0x259b8d(0x197)]*_0x27cf4f[_0x259b8d(0x25b)];}),_0x4f6660[_0x1ebccd['length']-_0x37343c-0x1]=_0x4b377d*(_0x326dae-0x1);});let _0x392d32=[];_0x36c2d2=[...config[_0x1550a3(0x113)]]||[];let _0x289704=0x0;_0x48086a=0x0,_0x1ebccd['forEach']((_0x113433,_0x169fa1)=>{const _0xdee8f0=_0x1550a3;if(_0x36c2d2[_0x48086a]){const _0x309d13=fns['parse'](_0x36c2d2[_0x48086a][_0xdee8f0(0x213)],'yyyy/MM/dd',new Date()),_0x250b27=fns['parse'](_0x113433[_0xdee8f0(0x213)],_0xdee8f0(0x130),new Date());if(fns[_0xdee8f0(0x172)](_0x309d13,_0x250b27)){let _0x1e8017=0x0;_0x36c2d2[_0x48086a][_0xdee8f0(0x21c)]['forEach'](_0x1929f8=>{const _0x9e4907=_0xdee8f0;!_0x392d32[_0x1929f8[_0x9e4907(0x206)]]?_0x392d32[_0x1929f8[_0x9e4907(0x206)]]=_0x1929f8['number']:(_0x1e8017=_0x392d32[_0x1929f8[_0x9e4907(0x206)]],_0x392d32[_0x1929f8['coin']]+=_0x1929f8[_0x9e4907(0x197)]);const _0x551a60=_0x113433[_0x9e4907(0x271)]['find'](_0x1b6ec4=>_0x1b6ec4['coin']==_0x1929f8[_0x9e4907(0x206)]);(!_0x551a60||_0x551a60[_0x9e4907(0x197)]==0x0)&&(_0x289704+=(-_0x1929f8['number']-_0x1e8017)*_0x1929f8[_0x9e4907(0x25b)]);}),_0x48086a++;}}_0x113433['coins'][_0xdee8f0(0x26c)]((_0x31bcbb,_0x3dc1e4)=>{const _0x3b3cf6=_0xdee8f0;_0x392d32[_0x31bcbb[_0x3b3cf6(0x206)]]&&(_0x31bcbb[_0x3b3cf6(0x1b1)]=_0x392d32[_0x31bcbb[_0x3b3cf6(0x206)]]);}),_0x364bb1[_0xdee8f0(0x1a0)]({'date':_0x113433[_0xdee8f0(0x213)],'eur':_0x113433[_0xdee8f0(0x1ac)],'usd':_0x113433[_0xdee8f0(0x273)],'offset':_0x4f6660[_0x169fa1],'netoffset':_0x289704,'coins':_0x113433[_0xdee8f0(0x271)]});});}return _0x364bb1;}function emitPerformance(_0x218982){const _0x279e9c=_0x178d1b;_0x218982[_0x279e9c(0x180)]!==0x0?(proxyEmit(_0x279e9c(0xe3),_0x218982),lastPerformanceEmitted=getDate()):proxyEmit(_0x279e9c(0xe3),[]);}function getPerf(_0x1f455d,_0x26cdbc){const _0x4085cc=_0x178d1b;let _0x3fea38=0x0,_0xe29cd0=0x0,_0x4fd95b=0x0;_0x1f455d[_0x4085cc(0x271)][_0x4085cc(0x26c)](_0x5bbcb9=>{const _0x386420=_0x4085cc;_0x3fea38+=_0x5bbcb9[_0x386420(0x197)]*_0x5bbcb9[_0x386420(0x25b)];});_0x26cdbc&&(_0x3fea38+=_0x1f455d[_0x4085cc(0x11f)]);if(config[_0x4085cc(0x246)]==='BTC'||config[_0x4085cc(0x246)]===_0x4085cc(0xdc)||config[_0x4085cc(0x246)]==='PAXG')_0xe29cd0=_0x3fea38*_0x1f455d[_0x4085cc(0x1ac)],_0x4fd95b=_0x3fea38*_0x1f455d[_0x4085cc(0x273)];else{if(usdBasecoins[_0x4085cc(0x19d)](config['basecoin']))_0xe29cd0=_0x3fea38*_0x1f455d[_0x4085cc(0x1ac)]/_0x1f455d[_0x4085cc(0x273)],_0x4fd95b=_0x3fea38;else config[_0x4085cc(0x246)]===_0x4085cc(0x1b3)&&(_0xe29cd0=_0x3fea38,_0x4fd95b=_0x3fea38*_0x1f455d[_0x4085cc(0x273)]/_0x1f455d[_0x4085cc(0x1ac)]);}return[_0x3fea38,_0xe29cd0,_0x4fd95b];}function getKPIs(_0x9f9c38,_0x3cd9d3='EUR'){const _0x5da4b1=_0x178d1b,_0x3b1819=config['basecoin'],_0x1499fd=lastBalances,_0x50be09=currentCoins,_0x4bb2ac=getNormalizedPerformance(),_0x257624=_0x9f9c38===_0x5da4b1(0x246)?_0x3b1819:_0x9f9c38===_0x5da4b1(0xe5)||_0x9f9c38==='net-fiat'?_0x3cd9d3:'Net\x20'+_0x3b1819,_0x30b5fc=_0x9f9c38===_0x5da4b1(0x13f)?_0x5da4b1(0x263):_0x9f9c38===_0x5da4b1(0x221)?'Net\x20effect':_0x257624+'\x20value',_0xc48016=_0x9f9c38===_0x5da4b1(0x13f)||_0x9f9c38===_0x5da4b1(0x221)?_0x5da4b1(0x263):_0x257624+'\x20change';let _0x1ef209=0x0;_0x50be09[_0x5da4b1(0x26c)](_0x48bef6=>{const _0x212912=_0x5da4b1;_0x1ef209+=_0x48bef6[_0x212912(0x197)]*_0x48bef6[_0x212912(0x20f)];});if(_0x9f9c38===_0x5da4b1(0xe5)||_0x9f9c38===_0x5da4b1(0x221)){if(_0x3b1819===_0x5da4b1(0x21d)||_0x3b1819==='ETH'||_0x3b1819===_0x5da4b1(0x1f2))_0x1ef209=_0x1ef209*(_0x3cd9d3===_0x5da4b1(0x1b3)?_0x1499fd['eur']:_0x1499fd[_0x5da4b1(0x273)]);else{if(usdBasecoins[_0x5da4b1(0x19d)](_0x3b1819))_0x1ef209=_0x1ef209*(_0x3cd9d3===_0x5da4b1(0x1b3)?_0x1499fd['eur']/_0x1499fd['usd']:0x1);else _0x3b1819===_0x5da4b1(0x1b3)&&(_0x1ef209=_0x1ef209*(_0x3cd9d3==='EUR'?0x1:_0x1499fd[_0x5da4b1(0x273)]/_0x1499fd[_0x5da4b1(0x1ac)]));}}let _0x2e81ee;if(_0x1ef209!==0x0){if(_0x9f9c38===_0x5da4b1(0x246))_0x2e81ee=(_0x1ef209/startingBalances[_0x5da4b1(0x246)]-0x1)*0x64;else{if(_0x3cd9d3===_0x5da4b1(0x1b3))_0x2e81ee=(_0x1ef209/startingBalances[_0x5da4b1(0x1ac)]-0x1)*0x64;else _0x2e81ee=(_0x1ef209/startingBalances[_0x5da4b1(0x273)]-0x1)*0x64;}let _0x6b9fb5=0x0;if(startingBalances[_0x5da4b1(0x271)])_0x50be09['forEach'](_0x4fa809=>{const _0x5b3e7f=_0x5da4b1;let _0x4f94fc=startingBalances[_0x5b3e7f(0x271)][_0x5b3e7f(0x10b)](_0x221749=>_0x221749[_0x5b3e7f(0x206)]===_0x4fa809[_0x5b3e7f(0x206)]);if(_0x4f94fc&&_0x4f94fc[_0x5b3e7f(0x206)]&&_0x4fa809[_0x5b3e7f(0x197)]!==0x0)_0x6b9fb5+=_0x4f94fc[_0x5b3e7f(0x197)]*_0x4fa809['last'];});let _0x3b6406=0x0;if(_0x4bb2ac[_0x5da4b1(0x180)]!==0x0){let _0x94046b=_0x4bb2ac[_0x4bb2ac[_0x5da4b1(0x180)]-0x1];_0x3b6406=_0x94046b[_0x5da4b1(0x1f3)];}_0x6b9fb5-=_0x3b6406;_0x9f9c38===_0x5da4b1(0x13f)&&(_0x2e81ee=(_0x1ef209-_0x6b9fb5)/startingBalances[_0x5da4b1(0x246)]*0x64,_0x1ef209=_0x1ef209-_0x6b9fb5);if(_0x9f9c38===_0x5da4b1(0x221)){let _0x51b1e9=_0x3cd9d3===_0x5da4b1(0x1b3)?startingBalances[_0x5da4b1(0x1ac)]:startingBalances[_0x5da4b1(0x273)];if(_0x3b1819===_0x5da4b1(0x21d)||_0x3b1819===_0x5da4b1(0xdc)||_0x3b1819===_0x5da4b1(0x1f2))_0x6b9fb5=_0x3cd9d3===_0x5da4b1(0x1b3)?_0x6b9fb5*_0x1499fd[_0x5da4b1(0x1ac)]:_0x6b9fb5*_0x1499fd[_0x5da4b1(0x273)];else{if(usdBasecoins['includes'](_0x3b1819))_0x6b9fb5=_0x3cd9d3===_0x5da4b1(0x1b3)?_0x6b9fb5*_0x1499fd[_0x5da4b1(0x1ac)]/_0x1499fd[_0x5da4b1(0x273)]:_0x6b9fb5;else _0x3b1819===_0x5da4b1(0x1b3)&&(_0x6b9fb5=_0x3cd9d3===_0x5da4b1(0x1b3)?_0x6b9fb5:_0x6b9fb5*_0x1499fd[_0x5da4b1(0x273)]/_0x1499fd[_0x5da4b1(0x1ac)]);}_0x2e81ee=(_0x1ef209-_0x6b9fb5)/_0x51b1e9*0x64,_0x1ef209=_0x1ef209-_0x6b9fb5;}if(_0x2e81ee){if(_0x2e81ee<0x64)_0x2e81ee=_0x2e81ee[_0x5da4b1(0x123)](0x2);else{if(_0x2e81ee<0x3e8)_0x2e81ee=_0x2e81ee['toFixed'](0x1);else _0x2e81ee=_0x2e81ee['toFixed'](0x0);}}else _0x2e81ee=Number('0')[_0x5da4b1(0x123)](0x2);if(_0x1ef209){if(Math[_0x5da4b1(0x12e)](_0x1ef209)<0.000001)_0x1ef209=_0x1ef209[_0x5da4b1(0x123)](0x2);else{if(Math['abs'](_0x1ef209)<0.1)_0x1ef209=_0x1ef209[_0x5da4b1(0x123)](0x6);else{if(Math[_0x5da4b1(0x12e)](_0x1ef209)<0x1)_0x1ef209=_0x1ef209[_0x5da4b1(0x123)](0x5);else{if(Math[_0x5da4b1(0x12e)](_0x1ef209)<0xa)_0x1ef209=_0x1ef209['toFixed'](0x4);else{if(Math[_0x5da4b1(0x12e)](_0x1ef209)<0x64)_0x1ef209=_0x1ef209[_0x5da4b1(0x123)](0x3);else{if(Math[_0x5da4b1(0x12e)](_0x1ef209)<0x3e8)_0x1ef209=_0x1ef209['toFixed'](0x2);else _0x1ef209=_0x1ef209[_0x5da4b1(0x123)](0x2);}}}}}}else _0x1ef209=Number('0')[_0x5da4b1(0x123)](0x2);}else _0x2e81ee=Number('0')[_0x5da4b1(0x123)](0x2);return{'value':_0x1ef209,'change':_0x2e81ee,'leftTxt':_0x30b5fc,'rightTxt':_0xc48016};}async function getStartingBalances(_0x35c0bd,_0x5934c4=!![]){const _0x2496b1=_0x178d1b;if(_0x35c0bd['length']!==0x0){const [_0x4a49e6,_0x4894e8,_0x4a3d04]=getPerf(_0x35c0bd[0x0],!![]);let _0x4c2a01=[];config['portfolio'][_0x2496b1(0x26c)](_0x328985=>{const _0x230117=_0x2496b1;let _0x16302b=0x0,_0x193b97;config[_0x230117(0x113)][_0x230117(0x26c)](_0x1d5faf=>{const _0x51b678=_0x230117;let _0x2329fd=_0x1d5faf[_0x51b678(0x21c)]['find'](_0x496b14=>_0x496b14[_0x51b678(0x206)]==_0x328985['coin']);if(_0x2329fd){_0x16302b+=_0x2329fd[_0x51b678(0x197)];if(!_0x193b97)_0x193b97=_0x2329fd[_0x51b678(0x25b)];}}),_0x4c2a01[_0x230117(0x1a0)]({'coin':_0x328985[_0x230117(0x206)],'number':_0x16302b,'initialprice':_0x193b97});});const _0x2a7983={'basecoin':_0x4a49e6,'eur':_0x4894e8,'usd':_0x4a3d04,'coins':_0x4c2a01};if(_0x5934c4)proxyEmit(_0x2496b1(0x18f),_0x2a7983);startingBalances=_0x2a7983;}}function headlessMode(_0x470feb){const _0x20ecce=_0x178d1b;let _0xbf64b4=_0x470feb[_0x20ecce(0xcc)],_0x17fdb9=_0x470feb[_0x20ecce(0x1e0)],_0x57d126=[];for(let _0x69a892 of _0xbf64b4){if(_0x69a892['coin']!=config[_0x20ecce(0x246)]){if(_0x69a892[_0x20ecce(0x1fe)]>=_0x17fdb9/0x64){if(_0x69a892[_0x20ecce(0x1c1)])_0x57d126['push'](_0x69a892);}else{if(_0x69a892[_0x20ecce(0x1fe)]<=-_0x17fdb9/0x64){if(_0x69a892[_0x20ecce(0x1c1)])_0x57d126[_0x20ecce(0x1a0)](_0x69a892);}}}}_0x57d126['length']>0x0&&(lockOrders==ORDERS[_0x20ecce(0x122)]&&!coolingDown&&_0x57d126['forEach'](_0x2b4d38=>{const _0x406d77=_0x20ecce;logger[_0x406d77(0xf5)](_0x406d77(0x19a)+_0x2b4d38[_0x406d77(0x206)]+'\x20'+_0x2b4d38[_0x406d77(0x197)]+'\x20'+_0x2b4d38['last']+'\x20'+_0x2b4d38[_0x406d77(0x261)]+'%\x20'+_0x2b4d38[_0x406d77(0x112)]+'%\x20'+(0x64*_0x2b4d38['delta'])[_0x406d77(0x123)](0x2)+_0x406d77(0x207)+_0x17fdb9['toFixed'](0x2)+'%)');}),placeOrder(_0x57d126));}function notifyBalance(_0x92158b){const _0x27ca72=_0x178d1b;let _0xaaaac5=_0x92158b['portfolio'],_0x3cf5e4=_0x92158b[_0x27ca72(0x1e0)],_0x26d93e=[];for(let _0x4ab572 of _0xaaaac5){if(_0x4ab572[_0x27ca72(0x206)]!=config[_0x27ca72(0x246)]){if(_0x4ab572[_0x27ca72(0x1fe)]>=_0x3cf5e4/0x64){if(_0x4ab572[_0x27ca72(0x1c1)])_0x26d93e[_0x27ca72(0x1a0)](_0x4ab572);}else{if(_0x4ab572[_0x27ca72(0x1fe)]<=-_0x3cf5e4/0x64){if(_0x4ab572[_0x27ca72(0x1c1)])_0x26d93e[_0x27ca72(0x1a0)](_0x4ab572);}}}}if(_0x26d93e['length']>0x0){let _0x4bacfe=_0x26d93e[_0x27ca72(0x125)](_0x53c6fa=>_0x53c6fa['coin']);_0x4bacfe['sort']();let _0x223bb6=_0x4bacfe[_0x27ca72(0xf9)](',\x20');if(!lastCoinsToBalance)logHistory(_0x27ca72(0x1e3),_0x27ca72(0x18d));lastCoinsToBalance=_0x223bb6;}}function symbolToCoin(_0x410ef6){const _0x4f8fb5=_0x178d1b;let _0x46881b;if(_0x410ef6[_0x4f8fb5(0x19d)]('/'+config[_0x4f8fb5(0x246)]))_0x46881b=_0x410ef6[_0x4f8fb5(0x1dd)]('/'+config[_0x4f8fb5(0x246)],'');if(_0x410ef6[_0x4f8fb5(0x19d)](config[_0x4f8fb5(0x246)]+'/'))_0x46881b=_0x410ef6[_0x4f8fb5(0x1dd)](config[_0x4f8fb5(0x246)]+'/','');return _0x46881b;}async function unlockOrders(){const _0x3d52a0=_0x178d1b;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x3d52a0(0x145)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x181713=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x181713,validateOrdersState=_0x3d52a0(0x1b1),persistOpenOrders([]),lockOrders=ORDERS[_0x3d52a0(0x122)],logger[_0x3d52a0(0xf5)](_0x3d52a0(0x14b));}}async function validateOrders(_0x1c5bb6){const _0x29ce78=_0x178d1b;if(_0x1c5bb6)validateOrdersState=_0x1c5bb6;logger[_0x29ce78(0xf5)](_0x29ce78(0x160)+validateOrdersState+_0x29ce78(0x16a)+(lockOrders==0x1?_0x29ce78(0xca):lockOrders==0x2?_0x29ce78(0x154):_0x29ce78(0x126)));let _0x52a343=[],_0x4d88d2=config[_0x29ce78(0x162)]==_0x29ce78(0x107)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x29ce78(0x157)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x29ce78(0x21e)])return;logger[_0x29ce78(0xf5)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x29ce78(0x26c)](_0x5484a1=>{const _0x2a231c=_0x29ce78;let _0x1a094c=![];_0x5484a1['filled']>0x0&&(_0x1a094c=!![]),_0x52a343[_0x2a231c(0x1a0)](_0x1a094c),_0x1a094c&&config[_0x2a231c(0x162)]!=_0x2a231c(0x107)&&logHistory(_0x2a231c(0xfa),'Order\x20filled:\x20'+_0x5484a1['symbol']+'\x20'+_0x5484a1[_0x2a231c(0x1b0)]+'\x20#'+formatResult(_0x5484a1[_0x2a231c(0x153)],0x8)+'\x20@'+formatResult(_0x5484a1[_0x2a231c(0x25b)],0x8));}),_0x52a343[_0x29ce78(0x26c)]((_0x429aaf,_0x3c046d)=>{const _0x5164ff=_0x29ce78;if(_0x429aaf)lastOrders[_0x5164ff(0x230)](_0x3c046d,0x1);}),persistOpenOrders(lastOrders);const _0x5c951c=coolingDown?_0x29ce78(0x1aa):_0x29ce78(0x12f);if(validateOrdersState==_0x29ce78(0x1b1)){validateOrdersState=_0x29ce78(0x247);if(_0x52a343[_0x29ce78(0x19d)](![])){if(config[_0x29ce78(0x162)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x52a343[_0x29ce78(0x19d)](![])){}else{if(allOrdersPlaced){if(config[_0x29ce78(0x162)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x29ce78(0x156))_0x52a343[_0x29ce78(0x19d)](![])&&(config[_0x29ce78(0x162)]==_0x29ce78(0x107)?logHistory(_0x29ce78(0x1eb),_0x29ce78(0x1fc)+Math[_0x29ce78(0x184)](_0x4d88d2*validateOrderInterval/0xea60)+_0x29ce78(0x102)+_0x5c951c):(await cancelOrders(),logHistory(_0x29ce78(0x1eb),_0x29ce78(0xff)+Math[_0x29ce78(0x184)](_0x4d88d2*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5c951c))),await unlockOrders();else{if(validateOrdersState==_0x29ce78(0x1a7)){if(config[_0x29ce78(0x162)]!=_0x29ce78(0x107))logHistory('success',_0x29ce78(0x272)+_0x5c951c);await unlockOrders();}}}}}async function cancelOrders(){const _0x34e74b=_0x178d1b;lastOrders[_0x34e74b(0x26c)](async _0x540341=>{const _0x49548f=_0x34e74b;try{const _0x5cd158=await exchange[_0x49548f(0x17f)](_0x540341[_0x49548f(0x101)],_0x540341[_0x49548f(0xcf)]);}catch(_0x3d94dc){if(_0x3d94dc[_0x49548f(0x268)]()[_0x49548f(0x19d)](_0x49548f(0x11d))){}else await handleError(_0x3d94dc,_0x49548f(0x211));}});}async function initCoinResults(_0x1c641d){const _0x1346de=_0x178d1b;_0x1c641d?logger['debug']('Resetting\x20coin\x20results:\x20'+_0x1c641d):logger['debug'](_0x1346de(0x269)),config[_0x1346de(0xcc)][_0x1346de(0x26c)](_0x50c70f=>{const _0x5e8627=_0x1346de;if(!_0x50c70f['excluded']&&_0x50c70f[_0x5e8627(0x206)]!=config[_0x5e8627(0x246)]){const _0x41651a=currentCoins[_0x5e8627(0x10b)](_0x57f132=>_0x57f132[_0x5e8627(0x206)]==_0x50c70f[_0x5e8627(0x206)]),_0x415f37=global[_0x5e8627(0x144)][noslash(_0x50c70f['symbol'])];let _0x516883=_0x41651a?_0x41651a['number']:null,_0x57206e=_0x50c70f[_0x5e8627(0x254)]?0x1/_0x415f37:_0x415f37,_0x3db389;config['liquidity'][_0x5e8627(0x26c)](_0x17a4e9=>{const _0x12a8fa=_0x5e8627;!_0x3db389&&(_0x3db389=_0x17a4e9[_0x12a8fa(0x21c)][_0x12a8fa(0x10b)](_0x42985d=>_0x42985d[_0x12a8fa(0x206)]==_0x50c70f['coin']),_0x3db389&&(_0x516883=_0x3db389[_0x12a8fa(0x197)],_0x57206e=_0x3db389[_0x12a8fa(0x25b)]));});let _0x38d46c=dbCoinResults[_0x5e8627(0xcb)]('coins')['find']({'coin':_0x50c70f[_0x5e8627(0x206)]})[_0x5e8627(0x12a)]();if(!_0x38d46c){const _0x5693f5={'coin':_0x50c70f['coin'],'number':_0x516883,'breakeven':_0x57206e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5e8627(0xcb)](_0x5e8627(0x271))[_0x5e8627(0x1a0)](_0x5693f5)[_0x5e8627(0x11a)]();}else{if(_0x1c641d&&_0x50c70f[_0x5e8627(0x206)]==_0x1c641d){const _0x1c044e={'coin':_0x50c70f[_0x5e8627(0x206)],'number':_0x516883,'breakeven':_0x57206e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5e8627(0xcb)](_0x5e8627(0x271))[_0x5e8627(0x10b)]({'coin':_0x50c70f[_0x5e8627(0x206)]})['assign'](_0x1c044e)['write']();}}}});}async function updateCoinResults(_0x4e8430,_0x25cef3=![]){const _0x53ab4e=_0x178d1b;let _0x45653f,_0x220c24,_0x280bd0,_0x408023,_0x3c39bb,_0x48e8db,_0x53fc28=dbCoinResults['get'](_0x53ab4e(0x271))['find']({'coin':_0x4e8430[_0x53ab4e(0x206)]})[_0x53ab4e(0x12a)](),_0x24caf2=![];_0x53fc28&&Object[_0x53ab4e(0xf8)](_0x53fc28)[_0x53ab4e(0x26c)](([_0x319687,_0x1fa01e])=>{if(_0x1fa01e==null)_0x24caf2=!![];});(!_0x53fc28||_0x24caf2)&&(await initCoinResults(_0x4e8430['coin']),_0x53fc28=dbCoinResults[_0x53ab4e(0xcb)]('coins')['find']({'coin':_0x4e8430[_0x53ab4e(0x206)]})[_0x53ab4e(0x12a)]());_0x4e8430[_0x53ab4e(0x254)]&&(_0x48e8db={'filled':_0x4e8430['filled']*_0x4e8430[_0x53ab4e(0x25b)],'amount':_0x4e8430[_0x53ab4e(0x153)]*_0x4e8430[_0x53ab4e(0x25b)],'side':_0x4e8430[_0x53ab4e(0x1b0)]==_0x53ab4e(0x23d)?'buy':_0x53ab4e(0x23d),'price':0x1/_0x4e8430[_0x53ab4e(0x25b)]},_0x4e8430={..._0x4e8430,..._0x48e8db});_0x25cef3?_0x220c24=_0x4e8430['side']==_0x53ab4e(0xea)?_0x53fc28[_0x53ab4e(0x197)]+_0x4e8430[_0x53ab4e(0x153)]:_0x53fc28[_0x53ab4e(0x197)]-_0x4e8430['filled']:_0x220c24=await getCoinNumber(_0x4e8430[_0x53ab4e(0x206)]);if(_0x4e8430[_0x53ab4e(0xe4)]&&_0x4e8430[_0x53ab4e(0xe4)][_0x53ab4e(0x1e6)]==config[_0x53ab4e(0x246)])_0x45653f=_0x4e8430[_0x53ab4e(0xe4)][_0x53ab4e(0x26a)];else{if(_0x4e8430[_0x53ab4e(0xe4)]&&_0x4e8430[_0x53ab4e(0xe4)][_0x53ab4e(0x1e6)]==_0x53ab4e(0x1d2)&&!_0x25cef3)_0x45653f=_0x4e8430[_0x53ab4e(0xe4)][_0x53ab4e(0x26a)]*global[_0x53ab4e(0x144)][_0x53ab4e(0x1d2)+config[_0x53ab4e(0x246)]];else _0x45653f=defaultFee*_0x4e8430[_0x53ab4e(0x153)]*_0x4e8430[_0x53ab4e(0x25b)];}_0x4e8430['side']==_0x53ab4e(0xea)?(_0x280bd0=_0x220c24!=0x0?(_0x53fc28[_0x53ab4e(0x143)]*_0x53fc28[_0x53ab4e(0x197)]+_0x4e8430[_0x53ab4e(0x25b)]*(_0x220c24-_0x53fc28[_0x53ab4e(0x197)])+_0x45653f)/_0x220c24:0x0,_0x408023=_0x53fc28['realized']):(_0x280bd0=_0x220c24!=0x0?(_0x53fc28[_0x53ab4e(0x143)]*_0x53fc28[_0x53ab4e(0x197)]-_0x4e8430[_0x53ab4e(0x25b)]*(_0x53fc28[_0x53ab4e(0x197)]-_0x220c24)+_0x45653f)/_0x220c24:0x0,_0x408023=_0x53fc28[_0x53ab4e(0xe8)]+(_0x4e8430[_0x53ab4e(0x25b)]-_0x53fc28[_0x53ab4e(0x143)])*_0x4e8430[_0x53ab4e(0x153)]);_0x3c39bb=(_0x4e8430['price']-_0x280bd0-_0x45653f/_0x4e8430[_0x53ab4e(0x153)])*_0x220c24;let _0x326fd0={'coin':_0x4e8430[_0x53ab4e(0x206)],'number':_0x220c24,'breakeven':formatResult(_0x280bd0,0x8),'realized':formatResult(_0x408023,0x8),'unrealized':formatResult(_0x3c39bb,0x8),'fees':formatResult(_0x53fc28['fees']+_0x45653f,0x8),'sells':_0x4e8430[_0x53ab4e(0x1b0)]==_0x53ab4e(0x23d)?_0x53fc28['sells']+0x1:_0x53fc28[_0x53ab4e(0x1d5)],'buys':_0x4e8430[_0x53ab4e(0x1b0)]==_0x53ab4e(0xea)?_0x53fc28['buys']+0x1:_0x53fc28[_0x53ab4e(0x25a)]};dbCoinResults['get']('coins')[_0x53ab4e(0x10b)]({'coin':_0x4e8430['coin']})['assign'](_0x326fd0)['write']();if(!_0x25cef3){if(_0x4e8430[_0x53ab4e(0xe4)]&&_0x4e8430[_0x53ab4e(0xe4)][_0x53ab4e(0x1e6)]=='BNB'){const _0x1742cd=currentCoins[_0x53ab4e(0x10b)](_0x1e7724=>_0x1e7724[_0x53ab4e(0x206)]==_0x53ab4e(0x1d2));if(_0x1742cd){let _0x36f505=dbCoinResults[_0x53ab4e(0xcb)](_0x53ab4e(0x271))[_0x53ab4e(0x10b)]({'coin':_0x53ab4e(0x1d2)})[_0x53ab4e(0x12a)]();_0x326fd0={..._0x36f505,'number':_0x1742cd[_0x53ab4e(0x197)]},dbCoinResults[_0x53ab4e(0xcb)](_0x53ab4e(0x271))[_0x53ab4e(0x10b)]({'coin':_0x53ab4e(0x1d2)})[_0x53ab4e(0x1c3)](_0x326fd0)[_0x53ab4e(0x11a)]();}}}}async function placeOrder(_0x1ec064){const _0x6f326e=_0x178d1b,_0x4d4762=config['ordertype']=='market'?_0x6f326e(0x107):_0x6f326e(0x25c);if(lockOrders==ORDERS[_0x6f326e(0x122)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x6f326e(0x21e)],allOrdersPlaced=![],validateOrdersState=_0x6f326e(0x1b1);let _0x4f29fb=![];lastOrders=[];for(const _0x4a7635 of _0x1ec064){let _0x46e75b,_0x38fc41,_0x383ae4,_0x292726,_0x341c2f,_0x3f6c62=_0x4a7635[_0x6f326e(0xcf)];try{const _0x14bfc0=await exchange['fetchTicker'](_0x3f6c62);_0x46e75b=_0x4a7635[_0x6f326e(0x254)]?0x1/_0x4a7635[_0x6f326e(0x20f)]:_0x4a7635[_0x6f326e(0x20f)],_0x38fc41=_0x14bfc0[_0x6f326e(0x1a1)],_0x383ae4=_0x14bfc0[_0x6f326e(0x169)];_0x4a7635[_0x6f326e(0x254)]?(_0x292726=_0x4a7635[_0x6f326e(0x1b0)]==_0x6f326e(0xea)?'sell':'buy',_0x341c2f=Math[_0x6f326e(0x12e)](_0x4a7635[_0x6f326e(0x108)])/_0x46e75b):(_0x292726=_0x4a7635[_0x6f326e(0x1b0)],_0x341c2f=Math[_0x6f326e(0x12e)](_0x4a7635[_0x6f326e(0x108)]));_0x4d4762==_0x6f326e(0x25c)&&(config[_0x6f326e(0x162)]=='limit-high'&&(_0x46e75b=_0x292726==_0x6f326e(0xea)?_0x38fc41:_0x383ae4),config[_0x6f326e(0x162)]==_0x6f326e(0x223)&&(_0x46e75b=_0x292726=='buy'?_0x383ae4:_0x38fc41));_0x341c2f=formatResult(_0x341c2f,0x8),_0x46e75b=formatResult(_0x46e75b,0x8);const _0x723666=_0x292726==_0x6f326e(0x23d)?config[_0x6f326e(0xcd)]?String[_0x6f326e(0x118)]('0x'+config[_0x6f326e(0xcd)])+'\x20':'':config[_0x6f326e(0x243)]?String['fromCodePoint']('0x'+config[_0x6f326e(0x243)])+'\x20':'',_0x24fab0=_0x4d4762=='market'?_0x6f326e(0x1d3):config[_0x6f326e(0x162)]==_0x6f326e(0x217)?_0x6f326e(0x1c7):_0x6f326e(0x167),_0x13eee6=(Math[_0x6f326e(0x26d)](Math[_0x6f326e(0x110)]()*0x35a4e900)+0x5f5e100)[_0x6f326e(0x268)]();lastOrders[_0x6f326e(0x1a0)]({'customId':_0x13eee6,'symbol':_0x3f6c62,'coin':_0x4a7635[_0x6f326e(0x206)],'amount':_0x341c2f,'price':_0x46e75b,'side':_0x292726,'reverse':_0x4a7635['reverse'],'filled':0x0});if(_0x4d4762==_0x6f326e(0x107))logHistory(_0x6f326e(0xfa),''+_0x723666+_0x24fab0+_0x6f326e(0x17b)+_0x3f6c62+'\x20'+_0x292726+'\x20#'+formatResult(_0x341c2f,0x8)+'\x20@'+formatResult(_0x46e75b,0x8));else logHistory(_0x6f326e(0xfa),''+_0x723666+_0x24fab0+_0x6f326e(0x17b)+_0x3f6c62+'\x20'+_0x292726+'\x20#'+formatResult(_0x341c2f,0x8)+'\x20@'+formatResult(_0x46e75b,0x8));let _0x4e8879;_0x4d4762=='market'?_0x292726==_0x6f326e(0xea)&&[_0x6f326e(0x171),_0x6f326e(0x21b),'Cex',_0x6f326e(0x264),_0x6f326e(0x1a9)][_0x6f326e(0x19d)](config['exchange'])?_0x4e8879=await exchange[_0x6f326e(0x1fd)](_0x3f6c62,_0x4d4762,_0x292726,_0x341c2f,_0x46e75b):_0x4e8879=await exchange[_0x6f326e(0x1fd)](_0x3f6c62,_0x4d4762,_0x292726,_0x341c2f,undefined):_0x4e8879=await exchange['createOrder'](_0x3f6c62,_0x4d4762,_0x292726,_0x341c2f,_0x46e75b);logger[_0x6f326e(0xf5)](_0x6f326e(0xf1)+_0x4e8879['id']+_0x6f326e(0x148)+_0x13eee6);const _0x16747d=lastOrders[_0x6f326e(0x180)]-0x1;if(_0x16747d>=0x0&&lastOrders[_0x16747d][_0x6f326e(0x209)]==_0x13eee6){lastOrders[_0x16747d][_0x6f326e(0x101)]=_0x4e8879['id'];if(_0x4e8879[_0x6f326e(0x15a)])lastOrders[_0x16747d][_0x6f326e(0x15a)]=_0x4e8879[_0x6f326e(0x15a)];if(_0x4e8879[_0x6f326e(0x25b)])lastOrders[_0x16747d][_0x6f326e(0x25b)]=_0x4e8879['price'];lastOrders[_0x16747d][_0x6f326e(0xe4)]=_0x4e8879[_0x6f326e(0xe4)];}if(config[_0x6f326e(0x16d)]!=0x0){let _0x2eb62b=null;if(cooldownTracker[_0x6f326e(0x180)]==config[_0x6f326e(0x16d)]-0x1)_0x2eb62b=cooldownTracker['shift']();const _0x516f76=getTimeStamp();cooldownTracker[_0x6f326e(0x1a0)](_0x516f76);if(_0x2eb62b){const _0xa5ac65=fns[_0x6f326e(0x1b4)](new Date(_0x516f76),new Date(_0x2eb62b));if(_0xa5ac65<cooldownInterval){logHistory(_0x6f326e(0x218),_0x6f326e(0x203)+config[_0x6f326e(0x16d)]+_0x6f326e(0x15e)+cooldownInterval/0x3c+_0x6f326e(0x1ad)+cooldownPeriod/(0xe10*0x3e8)+_0x6f326e(0x14f)),coolingDown=!![];break;}}}}catch(_0x2c4cea){if(_0x2c4cea[_0x6f326e(0x268)]()[_0x6f326e(0x19d)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x6f326e(0x1bf)](_0x2ea1f0=>_0x2ea1f0[_0x6f326e(0xcf)]!=_0x3f6c62),logHistory(_0x6f326e(0x218),_0x6f326e(0x21f)+_0x3f6c62),_0x4f29fb=!![];else{if(_0x2c4cea[_0x6f326e(0x268)]()[_0x6f326e(0x19d)](_0x6f326e(0x214)))lastOrders=lastOrders[_0x6f326e(0x1bf)](_0x404260=>_0x404260[_0x6f326e(0xcf)]!=_0x3f6c62),logHistory(_0x6f326e(0x218),'Order\x20amount\x20is\x20invalid:\x20'+_0x3f6c62),_0x4f29fb=!![];else{if(_0x2c4cea['toString']()['includes']('InvalidOrder'))lastOrders=lastOrders['filter'](_0x843890=>_0x843890[_0x6f326e(0xcf)]!=_0x3f6c62),logHistory(_0x6f326e(0x218),_0x6f326e(0x24e)+_0x3f6c62),logger[_0x6f326e(0xf5)](_0x2c4cea),_0x4f29fb=!![];else _0x2c4cea[_0x6f326e(0x268)]()['includes'](_0x6f326e(0x147))?(lastOrders=lastOrders[_0x6f326e(0x1bf)](_0x175d6a=>_0x175d6a['symbol']!=_0x3f6c62),logHistory(_0x6f326e(0x218),_0x6f326e(0x21f)+_0x3f6c62),_0x4f29fb=!![]):(lastOrders=lastOrders['filter'](_0x24fac0=>_0x24fac0[_0x6f326e(0xcf)]!=_0x3f6c62),await handleError(_0x2c4cea,_0x6f326e(0x185),_0x3f6c62));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x6f326e(0x180)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1734c5=config[_0x6f326e(0x162)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x251bc6=_0x6f326e;validateOrders(_0x251bc6(0x156));},_0x1734c5);}else unlockOrders();_0x4f29fb&&config[_0x6f326e(0x16c)]&&(logHistory(_0x6f326e(0x218),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x6f326e(0x1eb),_0x6f326e(0x1d1)));}else{if(coolingDown)!config[_0x6f326e(0x16c)]&&logHistory(_0x6f326e(0x218),_0x6f326e(0x176));else lockOrders!=ORDERS[_0x6f326e(0x122)]&&(!config[_0x6f326e(0x16c)]&&(config[_0x6f326e(0x162)]==_0x6f326e(0x107)?logHistory('error',_0x6f326e(0x1d4)):logHistory('error',_0x6f326e(0x1f6))));}}function persistOpenOrders(_0x2175a4){const _0x5ee88a=_0x178d1b,_0x1ecc07={...config,'openOrders':_0x2175a4};let _0xb689b2=dbConfig[_0x5ee88a(0xcb)](_0x5ee88a(0x1bb))[_0x5ee88a(0x10b)]({'botID':botID})[_0x5ee88a(0x12a)]();_0xb689b2&&dbConfig[_0x5ee88a(0xcb)](_0x5ee88a(0x1bb))['find']({'botID':botID})[_0x5ee88a(0x1c3)](_0x1ecc07)[_0x5ee88a(0x11a)]();}function restoreOrders(){const _0x11f691=_0x178d1b;let _0x49eafc;config[_0x11f691(0x104)]&&allOpenOrders['forEach'](_0x1eca9b=>{const _0x484add=_0x11f691,_0x51095f=config['openOrders'][_0x484add(0x10b)](_0x272bb8=>_0x272bb8['orderId']==_0x1eca9b['id']);_0x51095f&&(lastOrders[_0x484add(0x1a0)](_0x51095f),_0x49eafc=_0x1eca9b[_0x484add(0x1ed)]);});if(lastOrders[_0x11f691(0x180)]>0x0){lockOrders=ORDERS[_0x11f691(0x21e)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1916a5=new Date()[_0x11f691(0x228)](),_0x4312be=config[_0x11f691(0x162)]==_0x11f691(0x107)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x49eafc+_0x4312be>_0x1916a5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4c389e=_0x11f691;validateOrders(_0x4c389e(0x156));},_0x49eafc+_0x4312be-_0x1916a5);}else validateOrders(_0x11f691(0x156));}}async function sendMetricsTelegram(){const _0x12b576=_0x178d1b;if(!coinsLoaded){process[_0x12b576(0x114)]({'telegrammsg':_0x12b576(0x242)},_0x105289=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1fba04='';if(config[_0x12b576(0x23b)])_0x1fba04=_0x12b576(0x240)+config['botname']+_0x12b576(0x23f);else _0x1fba04=_0x12b576(0x26f)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1d6e29=getKPIs(_0x12b576(0x246)),_0x387a35=getKPIs(_0x12b576(0xe5),config[_0x12b576(0xe5)]),_0x56653a=getKPIs('net-basecoin'),_0x4fc574=getKPIs(_0x12b576(0x221),config[_0x12b576(0xe5)]);_0x1fba04+=_0x12b576(0x224),_0x1fba04+=_0x1d6e29['leftTxt']+'\x20:\x20'+_0x1d6e29[_0x12b576(0x12a)]+'\x0a',_0x1fba04+=_0x1d6e29[_0x12b576(0x1ea)]+':\x20'+_0x1d6e29[_0x12b576(0x158)]+'%\x0a',_0x1fba04+=_0x387a35[_0x12b576(0x1fb)]+_0x12b576(0x201)+_0x387a35[_0x12b576(0x12a)]+'\x0a',_0x1fba04+=_0x387a35['rightTxt']+':\x20'+_0x387a35[_0x12b576(0x158)]+'%\x0a',_0x1fba04+=_0x56653a['leftTxt']+':\x20'+_0x56653a['value']+'\x20('+config[_0x12b576(0x246)]+')\x0a',_0x1fba04+=_0x56653a[_0x12b576(0x1ea)]+':\x20'+_0x56653a[_0x12b576(0x158)]+'%\x20('+config[_0x12b576(0x246)]+')\x0a',_0x1fba04+=_0x4fc574[_0x12b576(0x1fb)]+':\x20'+_0x4fc574['value']+'\x20('+config[_0x12b576(0xe5)]+')\x0a',_0x1fba04+=_0x4fc574['rightTxt']+':\x20'+_0x4fc574[_0x12b576(0x158)]+_0x12b576(0x207)+config[_0x12b576(0xe5)]+')\x0a',_0x1fba04+='</pre>',process[_0x12b576(0x114)]({'telegrammsg':_0x1fba04},_0x11815d=>{});}async function sendPortfolioTelegram(){const _0x235653=_0x178d1b;if(!coinsLoaded){process[_0x235653(0x114)]({'telegrammsg':_0x235653(0x242)},_0x399882=>{});return;}let _0x1ad9b7='';if(config['showname'])_0x1ad9b7=_0x235653(0x240)+config[_0x235653(0x20a)]+_0x235653(0xe9);else _0x1ad9b7=_0x235653(0x26f)+botID+_0x235653(0xe9);_0x1ad9b7+=_0x235653(0x224),_0x1ad9b7+=_0x235653(0x166),_0x1ad9b7+=_0x235653(0x205),_0x1ad9b7+=_0x235653(0x166),currentCoins[_0x235653(0x26c)](_0x48c61e=>{const _0x28b989=_0x235653;_0x1ad9b7+=_0x48c61e[_0x28b989(0x206)][_0x28b989(0x129)](0x7)+'|\x20'+formatPad(_0x48c61e[_0x28b989(0x261)],0x2,0x6)+'|\x20'+formatPad(_0x48c61e['target'],0x2,0x6)+'|\x20'+formatPad(_0x48c61e[_0x28b989(0x1fe)]*0x64,0x2,0x6)+'\x0a';}),_0x1ad9b7+=_0x235653(0x1ce),process['send']({'telegrammsg':_0x1ad9b7},_0x440f37=>{});}function formatPad(_0x9fcfee,_0x576ae6,_0x39d01d){const _0x102308=_0x178d1b,_0x51fa3f=formatResultString(_0x9fcfee,_0x576ae6);return _0x51fa3f?_0x51fa3f[_0x102308(0x103)](_0x39d01d):''[_0x102308(0x103)](_0x39d01d);}function logHistory(_0x6cb559,_0x1e3e4a,_0x1a51a2=''){const _0x250d68=_0x178d1b;logger[_0x250d68(0x10a)](''+_0x1e3e4a);let _0x24781f={'time':getTimeStamp(),'type':_0x6cb559,'event':_0x1e3e4a};dbLogs[_0x250d68(0xcb)]('logs')['push'](_0x24781f)[_0x250d68(0x11a)]();if(_0x1a51a2=='')_0x1a51a2=_0x1e3e4a;proxyEmit(_0x250d68(0x188),{'log':_0x24781f,'summary':_0x1a51a2}),process['send']({'telegram':{..._0x24781f,'botname':config[_0x250d68(0x20a)],'showname':config[_0x250d68(0x23b)]}},_0x4e92c9=>{});}function emitHistory(_0x1f4772={}){const _0x487936=_0x178d1b;Object['keys'](_0x1f4772)['length']==0x0&&(_0x1f4772={'type':[_0x487936(0xfa),_0x487936(0x188)],'event':'','page':0x1});if(_0x1f4772[_0x487936(0x159)]['includes'](_0x487936(0x188)))_0x1f4772[_0x487936(0x159)][_0x487936(0x230)](_0x1f4772[_0x487936(0x159)][_0x487936(0x17e)](_0x487936(0x188)),0x1,_0x487936(0x218),_0x487936(0x1e3),_0x487936(0x1eb));if(dbLogs[_0x487936(0x13c)]('logs')[_0x487936(0x12a)]()){let _0x4ba5af=dbLogs[_0x487936(0xcb)](_0x487936(0x258))[_0x487936(0x1bf)](_0x2b2280=>{const _0x2a6f7e=_0x487936;if(_0x1f4772[_0x2a6f7e(0x159)][_0x2a6f7e(0x180)]==0x0)return![];else return _0x1f4772['type'][_0x2a6f7e(0x19d)](_0x2b2280[_0x2a6f7e(0x159)]);})[_0x487936(0x1bf)](_0x597834=>{const _0x32408a=_0x487936;if(_0x1f4772[_0x32408a(0x188)]=='')return!![];else return _0x597834[_0x32408a(0x188)][_0x32408a(0x170)]()[_0x32408a(0x19d)](_0x1f4772['event'][_0x32408a(0x170)]());})[_0x487936(0x216)](_0x487936(0x100)),_0x31ccf4=_0x4ba5af['value']()[_0x487936(0x180)];_0x4ba5af=_0x4ba5af[_0x487936(0x254)]()[_0x487936(0x178)]((_0x1f4772[_0x487936(0x249)]-0x1)*logPageSize,_0x1f4772[_0x487936(0x249)]*logPageSize-0x1)[_0x487936(0x254)]()['value'](),proxyEmit(_0x487936(0xd5),{'logs':_0x4ba5af,'total':_0x31ccf4});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x55d3c1){const _0x55782d=_0x178d1b;if(dbLogs[_0x55782d(0x13c)]('logs')[_0x55782d(0x12a)]()){const _0x16fac6=dbLogs[_0x55782d(0xcb)](_0x55782d(0x258))[_0x55782d(0x216)]('time')[_0x55782d(0x1bf)](_0x38ffda=>{return _0x38ffda['type']=='order';})[_0x55782d(0x12a)]();dbLogs[_0x55782d(0xcb)]('logs')['remove']()[_0x55782d(0x11a)](),dbLogs['get'](_0x55782d(0x258))[_0x55782d(0x1c3)](_0x16fac6)[_0x55782d(0x11a)](),emitHistory(_0x55d3c1);}}async function pauseBot(_0x550911=pauseBotInterval){const _0x17d81a=_0x178d1b,_0x2c625c=new Date()[_0x17d81a(0x228)]();if(!lastErrorShown||_0x2c625c-lastErrorShown>=_0x550911){lastErrorShown=_0x2c625c;!lastBotPause?(lastBotPause=_0x2c625c,consecutivePauses=0x1):(_0x2c625c-lastBotPause-_0x550911<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x17d81a(0x114)]({'stop':_0x17d81a(0x22d)},_0x361caf=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x17d81a(0x228)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x550911),botPaused=![],reset(!![]);}}}async function killBot(){const _0x13ac96=_0x178d1b;botPaused=!![],await sleep(0x3e8),process[_0x13ac96(0x114)]({'stop':_0x13ac96(0xd2)},_0x41e969=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x12d815,_0x2170f4){const _0x16c793=_0x178d1b;if(botPaused)return;const _0x6b458b=config['exchange']||_0x16c793(0x141);if(_0x2170f4)logger[_0x16c793(0xf5)](_0x16c793(0x24d)+_0x2170f4);const _0x4a13bc=()=>{const _0xdc7580=_0x16c793;loading[_0xdc7580(0x218)]=!![],emitLoadingProgress();};if(_0x12d815[_0x16c793(0x268)]()[_0x16c793(0x19d)](_0x16c793(0x186)))logHistory(_0x16c793(0x218),_0x6b458b+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x4a13bc();else{if(_0x12d815['toString']()[_0x16c793(0x19d)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x16c793(0x218),_0x6b458b+_0x16c793(0x151)),_0x4a13bc();else _0x12d815['toString']()[_0x16c793(0x19d)](_0x16c793(0x26e))?(logHistory(_0x16c793(0x218),_0x6b458b+_0x16c793(0x138)),logHistory(_0x16c793(0x218),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x4a13bc()):await handleError(_0x12d815,null);}}async function handleError(_0x5360bf,_0x23137e,_0x27240f=''){const _0x1a0bf7=_0x178d1b;if(botPaused)return;const _0x17db1f=config[_0x1a0bf7(0x152)]||_0x1a0bf7(0x141);if(_0x23137e)logger[_0x1a0bf7(0xf5)](_0x1a0bf7(0x24d)+_0x23137e);if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x22f))||_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x17d)))logHistory('error',_0x17db1f+_0x1a0bf7(0x105)+pauseBotMsg),await pauseBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x179))||_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x20e)))logHistory(_0x1a0bf7(0x218),_0x17db1f+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x1ff)))logHistory('error',_0x17db1f+_0x1a0bf7(0x1a2)+pauseBotMsg),await pauseBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x25e)))logHistory(_0x1a0bf7(0x218),_0x17db1f+_0x1a0bf7(0xf2)+pauseBotMsg),await pauseBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()['includes'](_0x1a0bf7(0xfc)))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5360bf['toString']()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x267)))logHistory(_0x1a0bf7(0x218),_0x17db1f+_0x1a0bf7(0x25d)+pauseBotMsgLong),logHistory(_0x1a0bf7(0x218),_0x1a0bf7(0x255)),await pauseBot(pauseBotIntervalLong);else{if(_0x5360bf instanceof ccxt[_0x1a0bf7(0x16f)])logHistory(_0x1a0bf7(0x218),_0x17db1f+'\x20network\x20error'+pauseBotMsg),logger[_0x1a0bf7(0xf5)](_0x1a0bf7(0x1e4),_0x5360bf),await pauseBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)]('API-key\x20format\x20invalid'))logHistory(_0x1a0bf7(0x218),_0x17db1f+_0x1a0bf7(0x1dc)),logHistory(_0x1a0bf7(0x218),_0x1a0bf7(0x1d6)),await killBot();else{if(_0x5360bf['toString']()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x106)))logHistory(_0x1a0bf7(0x218),_0x17db1f+_0x1a0bf7(0x260)),logHistory(_0x1a0bf7(0x218),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5360bf['toString']()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x26e)))logHistory('error',_0x17db1f+_0x1a0bf7(0x13d)),logHistory(_0x1a0bf7(0x218),_0x1a0bf7(0x1d6)),await killBot();else{if(_0x5360bf['toString']()['includes']('PermissionDenied'))logHistory('error',_0x17db1f+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x1a0bf7(0x218),_0x1a0bf7(0x1d6)),await killBot();else{if(_0x5360bf[_0x1a0bf7(0x268)]()[_0x1a0bf7(0x19d)](_0x1a0bf7(0x1c8)))logHistory(_0x1a0bf7(0x218),_0x1a0bf7(0x22e)+_0x27240f);else _0x5360bf instanceof ccxt[_0x1a0bf7(0x257)]?(logHistory(_0x1a0bf7(0x218),_0x17db1f+_0x1a0bf7(0x194)),logger[_0x1a0bf7(0xf5)](_0x1a0bf7(0x1e4),_0x5360bf)):(logHistory('error',_0x1a0bf7(0x12b)+pauseBotMsg),logger['debug']('Error\x20details:',_0x5360bf),await pauseBot());}}}}}}}}}}}}function formatResult(_0x10f4e1,_0x25cba5){const _0x32714=_0x178d1b;return parseFloat(_0x10f4e1[_0x32714(0x123)](_0x25cba5));}function formatResultTruncate(_0x1729a8,_0x38b628){const _0x45e1a3=_0x178d1b;let _0x20af6e=formatResultString(_0x1729a8,0xa),_0x14ca4c=_0x20af6e[_0x45e1a3(0x17e)]('.');return _0x14ca4c!=-0x1&&(_0x20af6e=_0x20af6e[_0x45e1a3(0x178)](0x0,_0x14ca4c+_0x38b628+0x1)),Number(_0x20af6e);}function formatResultString(_0x3e0b4e,_0x2a5c72){const _0xc7c0ec=_0x178d1b;let _0xd7a497;if(!(''+_0x3e0b4e)[_0xc7c0ec(0x19d)]('e'))_0xd7a497=+(Math[_0xc7c0ec(0x184)](_0x3e0b4e+'e+'+_0x2a5c72)+'e-'+_0x2a5c72);else{let _0x5395cb=(''+_0x3e0b4e)[_0xc7c0ec(0x256)]('e'),_0x533cf1='';+_0x5395cb[0x1]+_0x2a5c72>0x0&&(_0x533cf1='+'),_0xd7a497=+(Math['round'](+_0x5395cb[0x0]+'e'+_0x533cf1+(+_0x5395cb[0x1]+_0x2a5c72))+'e-'+_0x2a5c72);}return Number(_0xd7a497)['toFixed'](_0x2a5c72);}function getServerTime(){const _0x517718=_0x178d1b,_0x3f21b8=new Date();return _0x3f21b8[_0x517718(0x239)]()+'/'+(_0x3f21b8[_0x517718(0x270)]()+0x1)['toString']()[_0x517718(0x103)](0x2,'0')+'/'+_0x3f21b8[_0x517718(0x164)]()[_0x517718(0x268)]()[_0x517718(0x103)](0x2,'0')+'\x20'+_0x3f21b8[_0x517718(0x1a6)]()[_0x517718(0x268)]()[_0x517718(0x103)](0x2,'0')+':'+_0x3f21b8[_0x517718(0xdf)]()[_0x517718(0x268)]()[_0x517718(0x103)](0x2,'0')+':'+_0x3f21b8['getSeconds']()[_0x517718(0x268)]()[_0x517718(0x103)](0x2,'0');}function getTimeStamp(){const _0x506be7=_0x178d1b,_0x37000c=shiftedTime();return _0x37000c[_0x506be7(0x239)]()+'/'+(_0x37000c[_0x506be7(0x270)]()+0x1)[_0x506be7(0x268)]()[_0x506be7(0x103)](0x2,'0')+'/'+_0x37000c[_0x506be7(0x164)]()[_0x506be7(0x268)]()['padStart'](0x2,'0')+'\x20'+_0x37000c[_0x506be7(0x1a6)]()[_0x506be7(0x268)]()[_0x506be7(0x103)](0x2,'0')+':'+_0x37000c[_0x506be7(0xdf)]()['toString']()['padStart'](0x2,'0')+':'+_0x37000c['getSeconds']()[_0x506be7(0x268)]()['padStart'](0x2,'0');}function getDate(){const _0x315c91=_0x178d1b,_0x3e396c=shiftedTime();return _0x3e396c['getFullYear']()+'/'+(_0x3e396c[_0x315c91(0x270)]()+0x1)[_0x315c91(0x268)]()[_0x315c91(0x103)](0x2,'0')+'/'+_0x3e396c['getDate']()[_0x315c91(0x268)]()[_0x315c91(0x103)](0x2,'0');}function getHour(){const _0x5127b2=_0x178d1b,_0x31ecf3=shiftedTime();return _0x31ecf3['getHours']()['toString']()[_0x5127b2(0x103)](0x2,'0');}function sleep(_0x5a6d0e){return new Promise(_0x15b2b2=>setTimeout(_0x15b2b2,_0x5a6d0e));}function shiftedTime(){const _0x4d8cca=_0x178d1b,_0x25b7bf=new Date();let _0x5dc17e=_0x25b7bf;if(config&&config[_0x4d8cca(0x133)]!==0x0)_0x5dc17e=fns[_0x4d8cca(0x1d0)](_0x25b7bf,{'hours':config[_0x4d8cca(0x133)]});return _0x5dc17e;}function timer(_0x54584a){const _0x4658a2=_0x178d1b,_0x58a4f2=new Date();!lasttime?console[_0x4658a2(0x150)](getTimeStamp()+_0x4658a2(0x155),_0x54584a,_0x58a4f2):console[_0x4658a2(0x150)](getTimeStamp()+':\x20timer\x20>',_0x54584a,(_0x58a4f2-lasttime)/0x3e8),lasttime=_0x58a4f2;}