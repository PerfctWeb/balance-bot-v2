const _0xc617c9=_0x35a7;(function(_0x328f65,_0x7ea76f){const _0x54f3dd=_0x35a7,_0x76211e=_0x328f65();while(!![]){try{const _0x12047e=parseInt(_0x54f3dd(0x300))/0x1+parseInt(_0x54f3dd(0x200))/0x2*(parseInt(_0x54f3dd(0x2ca))/0x3)+parseInt(_0x54f3dd(0x1d2))/0x4*(-parseInt(_0x54f3dd(0x1aa))/0x5)+-parseInt(_0x54f3dd(0x22b))/0x6*(parseInt(_0x54f3dd(0x1f4))/0x7)+-parseInt(_0x54f3dd(0x280))/0x8*(parseInt(_0x54f3dd(0x24f))/0x9)+parseInt(_0x54f3dd(0x18e))/0xa*(parseInt(_0x54f3dd(0x1e9))/0xb)+-parseInt(_0x54f3dd(0x1bf))/0xc*(-parseInt(_0x54f3dd(0x21c))/0xd);if(_0x12047e===_0x7ea76f)break;else _0x76211e['push'](_0x76211e['shift']());}catch(_0xa7d174){_0x76211e['push'](_0x76211e['shift']());}}}(_0x2bb2,0xec4b3));const _0x3bb5ed=function(){let _0x41c1f7=!![];return function(_0x40d9d3,_0xadad11){const _0x2e2af9=_0x41c1f7?function(){if(_0xadad11){const _0xf32933=_0xadad11['apply'](_0x40d9d3,arguments);return _0xadad11=null,_0xf32933;}}:function(){};return _0x41c1f7=![],_0x2e2af9;};}(),_0x30cfd1=_0x3bb5ed(this,function(){const _0x437e58=_0x35a7;return _0x30cfd1[_0x437e58(0x2fe)]()[_0x437e58(0x1d3)]('(((.+)+)+)+$')[_0x437e58(0x2fe)]()[_0x437e58(0x2d4)](_0x30cfd1)[_0x437e58(0x1d3)](_0x437e58(0x211));});_0x30cfd1();function _0x35a7(_0x50e3ca,_0x2778e6){const _0xf0f314=_0x2bb2();return _0x35a7=function(_0x30cfd1,_0x3bb5ed){_0x30cfd1=_0x30cfd1-0x184;let _0x2bb2a7=_0xf0f314[_0x30cfd1];return _0x2bb2a7;},_0x35a7(_0x50e3ca,_0x2778e6);}'use strict';const ccxt=require(_0xc617c9(0x1a6))[_0xc617c9(0x277)],low=require('lowdb'),FileSync=require(_0xc617c9(0x21a)),fs=require('fs'),fns=require(_0xc617c9(0x216)),Crypt=require(_0xc617c9(0x228))['Crypt'],util=require(_0xc617c9(0x1d7)),argv=require(_0xc617c9(0x28a))(process[_0xc617c9(0x2d1)][_0xc617c9(0x213)](0x2))[_0xc617c9(0x2d1)],path=require(_0xc617c9(0x1fa));let exchange;global[_0xc617c9(0x2bd)]={},global['change']={};const usdBasecoins=[_0xc617c9(0x2f1),_0xc617c9(0x189),_0xc617c9(0x27d),_0xc617c9(0x2bf),_0xc617c9(0x2b6),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xc617c9(0x21f)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xc617c9(0x1a2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0xc617c9(0x1ba))[_0xc617c9(0x1df)],botID=process[_0xc617c9(0x2d1)][0x2]||_0xc617c9(0x255),pattern=/^[0-9]{3}$/;!pattern[_0xc617c9(0x1db)](botID)&&(console[_0xc617c9(0x2e5)](_0xc617c9(0x2ec)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0xc617c9(0x2d1)][0x3]||'',configpath=userID?_0xc617c9(0x212)+userID+'/':'./config/',logspath=userID?_0xc617c9(0x206)+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0xc617c9(0x307)](configpath)&&fs[_0xc617c9(0x1ab)](configpath);!fs[_0xc617c9(0x307)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0xc617c9(0x1d9)+botID+_0xc617c9(0x253),performancefile=configpath+_0xc617c9(0x1d9)+botID+_0xc617c9(0x297),coinresultsfile=configpath+_0xc617c9(0x1d9)+botID+_0xc617c9(0x1fd),settingsfile=configpath+_0xc617c9(0x24c),securefile=configpath+_0xc617c9(0x268),configbackuppath=configpath+_0xc617c9(0x229),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xc617c9(0x294)]({'logs':[],'version':serverversion})[_0xc617c9(0x1a4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xc617c9(0x294)]({'data':[],'version':serverversion})[_0xc617c9(0x1a4)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0xc617c9(0x1a4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x46841d=>{console['log'](_0x46841d);},'simple':_0x293d8a=>{const _0x53549f=_0xc617c9;console['log'](_0x293d8a),loggerfile[_0x53549f(0x1a4)](util[_0x53549f(0x295)](_0x293d8a)+'\x0a');},'full':async(_0x4e637d,_0x17f36b='')=>{const _0x1c95b9=_0xc617c9;let _0x2ccc56;if(config[_0x1c95b9(0x312)])_0x2ccc56=getTimeStamp()+':\x20'+config['botname']+_0x1c95b9(0x1c1)+_0x4e637d;else _0x2ccc56=getTimeStamp()+_0x1c95b9(0x260)+botID+_0x1c95b9(0x1c1)+_0x4e637d;console[_0x1c95b9(0x2e5)](_0x2ccc56),loggerfile[_0x1c95b9(0x1a4)](util[_0x1c95b9(0x295)](_0x2ccc56)+'\x0a'),_0x17f36b&&(console[_0x1c95b9(0x2e5)](_0x17f36b),loggerfile[_0x1c95b9(0x1a4)](util[_0x1c95b9(0x295)](_0x17f36b)+'\x0a'));},'debug':async(_0x2783bb,_0x26f152='')=>{const _0x220694=_0xc617c9;let _0x29da28;if(config['showname'])_0x29da28=getTimeStamp()+':\x20'+config[_0x220694(0x25f)]+'\x20>\x20[DEBUG]\x20'+_0x2783bb;else _0x29da28=getTimeStamp()+_0x220694(0x260)+botID+_0x220694(0x1fb)+_0x2783bb;if(debugging)console[_0x220694(0x2e5)](_0x29da28);loggerfile['write'](util[_0x220694(0x295)](_0x29da28)+'\x0a');if(_0x26f152){if(debugging)console[_0x220694(0x2e5)](_0x26f152);loggerfile[_0x220694(0x1a4)](util['format'](_0x26f152)+'\x0a');}}};process['on'](_0xc617c9(0x186),function(_0x4f72df){const _0x30f438=_0xc617c9;logHistory(_0x30f438(0x2b4),_0x30f438(0x2ff)),logger[_0x30f438(0x1e1)](_0x30f438(0x30c),_0x4f72df);});settings['timeshift']!=config[_0xc617c9(0x19a)]&&updateTimeshift(settings[_0xc617c9(0x19a)]);settings[_0xc617c9(0x21b)]!=config[_0xc617c9(0x21b)]&&updateOnepagemode(settings[_0xc617c9(0x21b)]);process['send']({'started':_0xc617c9(0x282)},_0x37fdec=>{}),initializeProcessListeners();function proxyEmit(_0x4a1c1f,_0x400685=null){const _0x3e58c9=_0xc617c9;process[_0x3e58c9(0x2c3)]({'function':_0x4a1c1f,'args':_0x400685},_0xc21999=>{});}function initializeProcessListeners(){process['on']('message',_0x330829=>{const _0x1baaa8=_0x35a7;switch(Object[_0x1baaa8(0x1cb)](_0x330829)[0x0]){case'timeshift':_0x330829[_0x1baaa8(0x19a)]!=undefined&&(settings[_0x1baaa8(0x19a)]=_0x330829[_0x1baaa8(0x19a)],updateTimeshift(settings[_0x1baaa8(0x19a)]));break;case _0x1baaa8(0x21b):_0x330829[_0x1baaa8(0x21b)]!=undefined&&(settings[_0x1baaa8(0x21b)]=_0x330829[_0x1baaa8(0x21b)],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x330829[_0x1baaa8(0x1f9)]!=undefined&&(bots=JSON[_0x1baaa8(0x1f2)](_0x330829[_0x1baaa8(0x1f9)]),proxyEmit(_0x1baaa8(0x1f9),bots));break;case _0x1baaa8(0x271):switch(_0x330829[_0x1baaa8(0x271)]){case _0x1baaa8(0x1a5):initclient();break;case _0x1baaa8(0x18a):toggleBotMode();break;case _0x1baaa8(0x2f4):emitHistory(_0x330829[_0x1baaa8(0x1e3)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x330829['args']);break;case _0x1baaa8(0x2fc):getPortfolio(_0x330829['args']);break;case _0x1baaa8(0x2c5):storeConfiguration(_0x330829[_0x1baaa8(0x1e3)]);break;case _0x1baaa8(0x273):storeHeadless(_0x330829[_0x1baaa8(0x1e3)]);break;case _0x1baaa8(0x287):storeFiat(_0x330829[_0x1baaa8(0x1e3)]);break;case _0x1baaa8(0x27e):resetHistory();break;case _0x1baaa8(0x188):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x330829[_0x1baaa8(0x1e3)]);break;case _0x1baaa8(0x20f):cancelLoading();break;case _0x1baaa8(0x301):showConfig();break;case _0x1baaa8(0x1d0):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);function _0x2bb2(){const _0x176091=['Signature\x20for\x20this\x20request\x20is\x20not\x20valid','\x20>\x20','type','-------------------------------\x0a','balances','yyyy-MM-dd\x27T\x27HH:mm:ss','cooldown','limit-high','\x20minutes','distribution','split','keys','\x20|\x20','time','coins','cost','sendMetricsTelegram','\x20metrics:</b>\x20\x0a\x0a','4EuPkqp','search','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','LOCKED','netoffset','util','splice','bot-','toUpperCase','test','findIndex','replace','enabled','version','symbol','debug','toFixed','args','<pre>','net-fiat','trade','getPortfolio(0)','startdate','154ScaUdu','delta','\x20change','getOpenOrders()','basecoinvalue','initial','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','threshold','remove','parse','Net\x20','3125696VArdLn','Invalid\x20quantity','writeFile','1\x20-\x20Handle\x20open\x20orders','currency','bots','path','\x20>\x20[DEBUG]\x20','final','-results.json','logs','recreateCoinResults()','2ncxGPq','basecoin','Binance','floor','get','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','./logs/','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','1\x20-\x20Validate\x20orders:\x20','page','\x20|\x20Error\x20details:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','exchanges','/USD','cancelLoading','Uncaught\x20NetworkError:','(((.+)+)+)+$','./config/','slice','order','market','date-fns','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','\x20|\x20highest\x20fee:\x20','lowdb/adapters/FileSync','onepagemode','247uAgPkI','getFullYear','Portfolio\x20change\x20detected:\x20','freeze','datetime','progress','2.5.0','data','fetchTickers','AuthenticationError','exchange\x20not\x20reloaded','side','hybrid-crypto-js','/backup/','RateLimitExceeded','12lZLXPh','max','3\x20-\x20handling\x20FILLED\x20order:\x20','Resetting\x20bot\x20history','\x20not\x20responding','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Initiating\x20exchange\x20reload','differenceInSeconds','unlinkSync','coin','Avoiding\x20continuous\x20order\x20attempts','timeout','\x20|\x20exchange:\x20','full','fiat','limits','\x20orders\x20in\x20less\x20than\x20','RequestTimeout','orderstatus','headless','fromCodePoint','open','min','none','loadSymbols()','leftTxt','startprice','\x20exchange','event','find','warning','emojibuy','2.3.5','bb-settings.json','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Order\x20filled:\x20','9EHNBAU','NetworkError','sells','getHours','-events.json','eur','001','random','Pausing\x20for\x20','success','InvalidNonce','apiPassword','fetchClosedOrders','join','added','includes','botname',':\x20Bot\x20','\x20value','EUR','************','1\x20-\x20Unlock\x20orders','amount','recovery','bid','bb-secure.json','API-key\x20format\x20invalid','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Executing\x20exchange\x20reload','cancelOrders()','number','\x20portfolio:</b>\x20\x0a\x0a','placeOrder()','ID:\x20','function','MIN_NOTIONAL','storeHeadless','portfolio','exec','cancel','pro','forEach','\x20|\x20lock\x20orders:\x20','InvalidOrder','\x20order:\x20','No\x20more\x20open\x20orders\x20-\x20','TUSD','resetHistory','must\x20be\x20greater\x20than\x20minimum\x20amount','2420720CxJsOy','loading-canceled','running','startsWith','/EUR','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','has','storeFiat','watchOrders','rightTxt','yargs/yargs','Limit\x20(high-margin)','DDoSProtection','buys','\x20has\x20a\x2024h\x20drop\x20of\x20','Error\x20while\x20deleting\x20files:\x20','highest','Saving\x20configuration','\x20not\x20available','getDate','defaults','format','recent20','-performance.json','Order(s)\x20not\x20validated\x20after\x20','entries','target','apiKey','filled','getCoinNumber()','restart','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Transaction\x20detection\x20unblocked','limit-low','0\x20-\x20EXECUTION:\x20','realized','getSeconds','ongoing','fee','cloneDeep','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','.json','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20:\x20','sortBy','2\x20-\x20FILLED\x20unknown\x20order:\x20','usd','***','Manual\x20balancing\x20required','ORDERS.LOCKED','ExchangeNotAvailable','closed','error','apiSecret','USDC','cancelOrder','milliseconds','concat','event-history','getMonth','%\x20(','ticker','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','USDT','fetchOpenOrders','additional\x20symbols\x20','Transaction\x20detection\x20blocked','send','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','storeConfiguration','liquidity','startnumber','round','last','3089283wcqIvW','value','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','net-basecoin','changes','\x20-\x20bot\x20not\x20started','valid','argv','fetchBalance','Failed\x20to\x20load\x20coin\x20data\x20for\x20','constructor','abs','performance','fetchTicker','emojisell','\x20minutes\x20-\x20','buy','OrderNotFound','set','excluded','Resetting\x20coin\x20results:\x20','offset','getMinutes','orderId','indexOf','limit','add','log','2\x20-\x20Handled\x20open\x20orders','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','configuration','balancing\x20resumed',':\x20timer\x20>','ask','Error:\x20Invalid\x20argument\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','bot','createOrder','breakeven','USD','\x20API\x20key\x20is\x20invalid','stringify','emitHistory','2\x20-\x20Orders\x20unlocked','Cooldown\x20ended\x20-\x20balancing\x20resumed','date','amountToPrecision','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','exchange','loadMarkets','getPortfolio','decrypt','toString','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','1063012veLXBe','showConfig','2\x20-\x20FILLED\x20known\x20order:\x20','ORDERS.UNLOCKED','push','reverse','shift','existsSync','starting-balance-','ordertype','canceled','assign','Uncaught\x20Exception:','active','autoliquidity','BNB','<b>Bot\x20','1\x20-\x20FILLED:\x20','showname','isEqual','2\x20-\x20Validate\x20orders:\x20','uncaughtException','padEnd','getStartingBalances','BUSD','toggleBotMode','\x20|\x20Custom\x20ID:\x20','BTC','substring','887890XDrJyj','no\x20open\x20orders','yyyy/MM/dd','getTime','string','2.6.0','Reset\x20|\x20','privateKey','total','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','ORDERS.UNLOCKING','OnMaintenance','timeshift','settings','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','botID','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','watchTrades','length','padStart','UNLOCKED','sort','write','initclient','ccxt','Net\x20effect','\x20closed\x20the\x20connection','change24h','6767965IbwCoY','mkdirSync','Uncaught\x20ExchangeError:','remainingSymbols','</pre>','recreate','password','filter','getCoins()','secure','ETH','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','red_yellow_blue','sell','removed','watchTransactions','./version.json','change','message','toLowerCase','Unknown\x20error\x20occured','114492IZlnui'];_0x2bb2=function(){return _0x176091;};return _0x2bb2();}async function reset(_0x2de0c2=null,_0x4973de=![]){const _0x4c1671=_0xc617c9;logger['debug'](_0x4c1671(0x194)+(_0x2de0c2&&_0x2de0c2[_0x4c1671(0x1a0)]>0x0?_0x4c1671(0x2c1)+_0x2de0c2[_0x4c1671(0x25c)](','):'no\x20additional\x20symbols')+_0x4c1671(0x1cc)+(_0x4973de?'exchange\x20reloaded':_0x4c1671(0x226))+_0x4c1671(0x237)+config[_0x4c1671(0x2fa)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4973de)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4c1671(0x29b)]!=''&&config[_0x4c1671(0x29b)]!=_0x4c1671(0x2af)){if(_0x4973de){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x503a6e){handleErrorNoStop(_0x503a6e,_0x4c1671(0x243));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x2de0c2);const _0x4eb079=await getCoins();[currentCoins,currentCoinsAll]=_0x4eb079,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4c1671(0x1a0)]==0x0&&allOpenOrders[_0x4c1671(0x1a0)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x165993=_0xc617c9;logger[_0x165993(0x1e1)](_0x165993(0x231));while(lockOrders!=ORDERS[_0x165993(0x1a2)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x165993(0x26b)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x191f49=config[_0xc617c9(0x2fa)],_0xb3a81e=config['apiKey'],_0x30068a=config['apiSecret'],_0x2e2a75=config['apiPassword']){const _0x39a22e=_0xc617c9;exchange&&await stopExchange();!supportedExchanges()[_0x39a22e(0x25e)](_0x191f49)&&(logHistory(_0x39a22e(0x2b4),_0x39a22e(0x217)+_0x191f49+_0x39a22e(0x246)),killBot());const _0xde2154=ccxt[_0x191f49[_0x39a22e(0x1bd)]()];exchange=new _0xde2154({'apiKey':_0xb3a81e,'secret':_0x30068a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x2e2a75)exchange[_0x39a22e(0x1b0)]=_0x2e2a75;}function setStableCoins(){const _0x2ed2f2=_0xc617c9;let _0x2e9a65=config['basecoin']==_0x2ed2f2(0x1b4)?'ETH':'BTC',_0x376ec7=!allSymbols[_0x2ed2f2(0x25e)](_0x2e9a65+_0x2ed2f2(0x20e))?_0x2ed2f2(0x2bf):_0x2ed2f2(0x2f1),_0xeacd66=!allSymbols[_0x2ed2f2(0x25e)](_0x2e9a65+_0x2ed2f2(0x284))?_0x376ec7:'EUR';stablecoins={'eur':{'coin':''+_0x2e9a65+_0xeacd66,'symbol':_0x2e9a65+'/'+_0xeacd66},'usd':{'coin':''+_0x2e9a65+_0x376ec7,'symbol':_0x2e9a65+'/'+_0x376ec7}};}async function initwsCcxt(_0x372e74){const _0x29c1b4=_0xc617c9;_0x372e74==null&&(_0x372e74=[],config[_0x29c1b4(0x274)]['forEach'](_0x52ab43=>{const _0x15fdf7=_0x29c1b4;if(!_0x52ab43[_0x15fdf7(0x2dd)]&&_0x52ab43['coin']!=config[_0x15fdf7(0x201)])_0x372e74[_0x15fdf7(0x304)](_0x52ab43[_0x15fdf7(0x1e0)]);}));if(!_0x372e74[_0x29c1b4(0x25e)](stablecoins[_0x29c1b4(0x254)][_0x29c1b4(0x1e0)]))_0x372e74['push'](stablecoins[_0x29c1b4(0x254)][_0x29c1b4(0x1e0)]);if(!_0x372e74[_0x29c1b4(0x25e)](stablecoins['usd'][_0x29c1b4(0x1e0)]))_0x372e74['push'](stablecoins['usd']['symbol']);if(config[_0x29c1b4(0x2fa)][_0x29c1b4(0x283)](_0x29c1b4(0x202))){if(!_0x372e74[_0x29c1b4(0x25e)]('BNB/'+config[_0x29c1b4(0x201)]))_0x372e74[_0x29c1b4(0x304)]('BNB/'+config[_0x29c1b4(0x201)]);}loadCoins(_0x372e74);const _0x584f40=async _0xa5b827=>{const _0x345a15=_0x29c1b4,_0x14819d=await exchange['fetchTicker'](_0xa5b827);global[_0x345a15(0x2bd)][noslash(_0x14819d[_0x345a15(0x1e0)])]=_0x14819d[_0x345a15(0x2c9)];while(!![]){if(!botPaused)try{const _0xf17ed2=await exchange[_0x345a15(0x19f)](_0xa5b827);global[_0x345a15(0x2bd)][noslash(_0xf17ed2[0x0][_0x345a15(0x1e0)])]=_0xf17ed2[0x0][_0x345a15(0x207)],await sleep(0x3e8);}catch(_0x5752e6){if(!exchangeStopped)await handleError(_0x5752e6,_0x345a15(0x19f),_0xa5b827);}else await sleep(0x64);}},_0x53f57e=async _0x300b52=>{const _0x327e69=_0x29c1b4;while(!![]){if(!botPaused)try{const _0x268b0f=await exchange['fetchTicker'](_0x300b52);global[_0x327e69(0x1bb)][_0x268b0f['symbol']]=_0x268b0f['percentage'],await sleep(0x3c*0x3e8);}catch(_0x46484f){if(!exchangeStopped)await handleError(_0x46484f,_0x327e69(0x224),_0x300b52);}else await sleep(0x64);}},_0x555d4a=async()=>{const _0x51f079=_0x29c1b4;while(!![]){if(!botPaused)try{const _0x11cc88=await exchange['watchOrders']();_0x11cc88[_0x51f079(0x278)](_0x3f9730=>{updateNumberCoinsCcxt(_0x3f9730);});}catch(_0x1f6f40){if(!exchangeStopped)await handleError(_0x1f6f40,_0x51f079(0x288));}else await sleep(0x64);}};_0x372e74[_0x29c1b4(0x278)](_0x20de3e=>{_0x584f40(_0x20de3e),_0x53f57e(_0x20de3e);}),!wsEventsSet&&(wsEventsSet=!![],_0x555d4a(),watchTransactions());}async function watchTransactions(){const _0x58af54=_0xc617c9;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x46c043=await getCoins(),[_0x3cafb4,_0x13ba01]=_0x46c043;let _0x18595a=[];currentCoins[_0x58af54(0x278)](_0x20e7d3=>{const _0x33b601=_0x58af54,_0x5dcf5c=_0x3cafb4[_0x33b601(0x248)](_0x2e20ea=>_0x2e20ea[_0x33b601(0x234)]==_0x20e7d3[_0x33b601(0x234)]);if(_0x5dcf5c){if(_0x20e7d3[_0x33b601(0x26d)]!=_0x5dcf5c[_0x33b601(0x26d)]){let _0x13a8f1;if(_0x20e7d3[_0x33b601(0x234)]!=config['basecoin']){const _0x1afad7=global[_0x33b601(0x2bd)][noslash(_0x20e7d3[_0x33b601(0x1e0)])];_0x13a8f1=_0x20e7d3[_0x33b601(0x305)]?0x1/_0x1afad7:_0x1afad7;}else _0x13a8f1=0x1;_0x18595a[_0x33b601(0x304)]({'coin':_0x20e7d3[_0x33b601(0x234)],'symbol':_0x20e7d3['symbol'],'price':_0x13a8f1,'number':Number(formatResult(_0x5dcf5c[_0x33b601(0x26d)]-_0x20e7d3[_0x33b601(0x26d)],0x8)),'basecoinvalue':_0x13a8f1*(_0x5dcf5c[_0x33b601(0x26d)]-_0x20e7d3[_0x33b601(0x26d)])});}}});if(_0x18595a[_0x58af54(0x1a0)]==0x1&&!blockTransactionDetection){if(config[_0x58af54(0x30e)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x18595a[0x0]['basecoinvalue']+_0x58af54(0x219)+lastFees[_0x58af54(0x290)]);if(lastFees[_0x58af54(0x290)]==0x0||Math[_0x58af54(0x2d5)](_0x18595a[0x0][_0x58af54(0x1ed)])>lastFees[_0x58af54(0x290)]){delete _0x18595a[0x0][_0x58af54(0x1e0)],delete _0x18595a[0x0][_0x58af54(0x1ed)];let _0x1fe4c1=[],_0x42d1ba=[...config[_0x58af54(0x2c6)]]||[],_0x43d0d8=config[_0x58af54(0x2c6)];_0x42d1ba[_0x58af54(0x1a3)]((_0x3b5d1d,_0x40dbad)=>_0x3b5d1d[_0x58af54(0x2f7)]>_0x40dbad[_0x58af54(0x2f7)]?-0x1:_0x40dbad[_0x58af54(0x2f7)]>_0x3b5d1d[_0x58af54(0x2f7)]?0x1:0x0);const _0x1d11e1=getDate();if(_0x42d1ba[0x0]){const _0x3a9a54=fns[_0x58af54(0x1f2)](_0x42d1ba[0x0][_0x58af54(0x2f7)],'yyyy/MM/dd',new Date()),_0x5bc0fb=fns[_0x58af54(0x1f2)](_0x1d11e1,_0x58af54(0x190),new Date());if(fns[_0x58af54(0x184)](_0x3a9a54,_0x5bc0fb)){_0x1fe4c1=_0x42d1ba[0x0]['changes'];const _0x5c0960=_0x1fe4c1[_0x58af54(0x248)](_0x1e6a41=>_0x1e6a41['coin']==_0x18595a[0x0]['coin']);_0x5c0960?(_0x5c0960[_0x58af54(0x26d)]+=_0x18595a[0x0][_0x58af54(0x26d)],_0x5c0960[_0x58af54(0x26d)]==0x0&&(_0x1fe4c1=_0x1fe4c1[_0x58af54(0x1b1)](_0x5ce4b1=>{const _0x234de9=_0x58af54;return _0x5ce4b1[_0x234de9(0x234)]!=_0x18595a[0x0][_0x234de9(0x234)];}))):_0x1fe4c1['push'](_0x18595a[0x0]);const _0x414456=_0x43d0d8[_0x58af54(0x248)](_0x116647=>_0x116647['date']==_0x1d11e1);_0x414456[_0x58af54(0x2ce)]=_0x1fe4c1;}else _0x43d0d8['push']({'date':_0x1d11e1,'changes':[_0x18595a[0x0]]});}const _0x47ddd5=_0x43d0d8['find'](_0x1514d1=>_0x1514d1['date']==_0x1d11e1);if(_0x47ddd5){let _0x4aaa50=!![];_0x47ddd5[_0x58af54(0x2ce)][_0x58af54(0x278)](_0x582e29=>{const _0x1a0e8e=_0x58af54;if(_0x582e29[_0x1a0e8e(0x26d)]!=0x0)_0x4aaa50=![];}),_0x4aaa50&&(_0x43d0d8=_0x43d0d8['filter'](_0x7e9413=>{const _0x3ce7cb=_0x58af54;return _0x7e9413[_0x3ce7cb(0x2f7)]!=_0x1d11e1;}));}let _0x41cb8c=dbConfig[_0x58af54(0x204)](_0x58af54(0x2ee))['find']({'botID':botID})['value']();_0x41cb8c&&(dbConfig[_0x58af54(0x204)](_0x58af54(0x2ee))[_0x58af54(0x248)]({'botID':botID})[_0x58af54(0x30b)]({'liquidity':_0x43d0d8})[_0x58af54(0x1a4)](),config[_0x58af54(0x2c6)]=_0x43d0d8),logHistory(_0x58af54(0x258),_0x58af54(0x21e)+Math['abs'](_0x18595a[0x0][_0x58af54(0x26d)])+'\x20'+_0x18595a[0x0][_0x58af54(0x234)]+'\x20'+(_0x18595a[0x0]['number']>0x0?_0x58af54(0x25d):'removed')+_0x58af54(0x2f9)),proxyEmit('configuration',emittedConfiguration());}else logger['debug']('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x18595a[0x0][_0x58af54(0x26d)])+'\x20'+_0x18595a[0x0]['coin']+'\x20'+(_0x18595a[0x0][_0x58af54(0x26d)]>0x0?_0x58af54(0x25d):_0x58af54(0x1b8)));transactionDetected=!![],currentCoins=_0x3cafb4,currentCoinsAll=_0x13ba01;}else logger[_0x58af54(0x1e1)](_0x58af54(0x21e)+Math[_0x58af54(0x2d5)](_0x18595a[0x0][_0x58af54(0x26d)])+'\x20'+_0x18595a[0x0]['coin']+'\x20'+(_0x18595a[0x0][_0x58af54(0x26d)]>0x0?_0x58af54(0x25d):_0x58af54(0x1b8))+_0x58af54(0x2aa)),currentCoins=_0x3cafb4,currentCoinsAll=_0x13ba01;}await sleep(watchTransactionsInterval);}catch(_0x3131cf){if(!exchangeStopped)await handleError(_0x3131cf,_0x58af54(0x1b9));}else await sleep(0x64);}}async function loadSymbols(_0x30705d=config[_0xc617c9(0x2fa)],_0x4cbefc=![]){const _0x96d83c=_0xc617c9;if(allSymbols&&!_0x4cbefc)return;try{markets=await exchange[_0x96d83c(0x2fb)](),allSymbols=[],Object['entries'](markets)['forEach'](_0x4781bd=>{const _0x33ef00=_0x96d83c;_0x4781bd[0x1][_0x33ef00(0x30d)]&&_0x4781bd[0x1]['spot']&&allSymbols['push'](_0x4781bd[0x0]);});}catch(_0x1a7ff4){throw _0x1a7ff4;}}async function initclient(){const _0x4ae6cb=_0xc617c9;emitLoadingProgress(),proxyEmit(_0x4ae6cb(0x2e8),emittedConfiguration()),proxyEmit(_0x4ae6cb(0x20d),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4ae6cb(0x1c4),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4174c0=getNormalizedPerformance();emitPerformance(_0x4174c0),getStartingBalances(_0x4174c0);}async function toggleBotMode(){const _0x4ad05e=_0xc617c9;let _0x4bbb02=dbConfig[_0x4ad05e(0x204)]('bot')[_0x4ad05e(0x248)]({'botID':botID})[_0x4ad05e(0x2cb)]();if(_0x4bbb02){const _0x2eb07c=!_0x4bbb02[_0x4ad05e(0x23e)];dbConfig['get'](_0x4ad05e(0x2ee))[_0x4ad05e(0x248)]({'botID':botID})['assign']({'headless':_0x2eb07c})[_0x4ad05e(0x1a4)](),config[_0x4ad05e(0x23e)]=_0x2eb07c,proxyEmit(_0x4ad05e(0x2e8),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x26ef85=>{});}async function loadCoins(_0x2551a5){const _0xd1571f=_0xc617c9;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x477f77,_0x1df4b3=0x0,_0x2e32d1=0x0;_0x2551a5[_0xd1571f(0x278)](_0x1ab33d=>{const _0x58c201=_0xd1571f;loading[_0x58c201(0x1ad)][_0x58c201(0x304)](_0x1ab33d);}),loadingCanceled=![];let _0x4bcda5=![];while(_0x477f77!=_0x2551a5[_0xd1571f(0x1a0)]){_0x477f77=0x0,_0x2551a5[_0xd1571f(0x278)](_0x233a5d=>{const _0x182588=_0xd1571f;if(global[_0x182588(0x2bd)][noslash(_0x233a5d)]){loading[_0x182588(0x1ad)]=loading[_0x182588(0x1ad)][_0x182588(0x1b1)](_0x5e9935=>_0x5e9935!=_0x233a5d);if(!watchedSymbols['includes'](_0x233a5d))watchedSymbols[_0x182588(0x304)](_0x233a5d);_0x477f77++;}}),loading['progress']=Math['round'](_0x477f77/_0x2551a5[_0xd1571f(0x1a0)]*0x64);loading[_0xd1571f(0x221)]!=0x64&&(_0x2e32d1>0x1e*0x5&&(loading[_0xd1571f(0x236)]=!![],emitLoadingProgress()),_0x2e32d1>0x78*0x5&&!_0x4bcda5&&(loading[_0xd1571f(0x276)]=!![],emitLoadingProgress(),_0x4bcda5=!![],logHistory(_0xd1571f(0x2b4),_0xd1571f(0x2d3)+loading[_0xd1571f(0x1ad)][_0xd1571f(0x25c)](',\x20')+_0xd1571f(0x2cf)),logHistory(_0xd1571f(0x2b4),_0xd1571f(0x257)+loadCoinsRetryInterval/0xea60+_0xd1571f(0x205)),pidCoinReloading=setTimeout(()=>{const _0x28abcf=_0xd1571f;process[_0x28abcf(0x2c3)]({'stop':_0x28abcf(0x29e)},_0x14ef64=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x477f77!=_0x1df4b3&&(_0x1df4b3=_0x477f77,emitLoadingProgress()),_0x2e32d1++,await sleep(0xc8);}_0x477f77==_0x2551a5['length']&&(coinsLoaded=!![],process[_0xd1571f(0x2c3)]({'status':'enabled','live':_0xd1571f(0x282)},_0x280f3d=>{}),_0x4bcda5&&logHistory(_0xd1571f(0x258),_0xd1571f(0x2ed)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4c19aa=_0xc617c9;proxyEmit(_0x4c19aa(0x2e8),{...emittedConfiguration(),'configstate':_0x4c19aa(0x281)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x169d95=_0xc617c9;let _0x15a054=global[_0x169d95(0x2bd)][stablecoins[_0x169d95(0x254)]['coin']],_0x1c2272=global[_0x169d95(0x2bd)][stablecoins['usd']['coin']];return{'eur':Number(_0x15a054),'usd':Number(_0x1c2272)};}function capitalize(_0xaba54e){const _0x5901e1=_0xc617c9;return _0xaba54e[_0x5901e1(0x18d)](0x0,0x1)[_0x5901e1(0x1da)]()+_0xaba54e['substring'](0x1);}function supportedExchanges(){const _0x1330f9=_0xc617c9,_0x324814=['ws','fetchTickers',_0x1330f9(0x2d7),_0x1330f9(0x19f),'watchOrders',_0x1330f9(0x2b7),'createOrder','fetchOpenOrders',_0x1330f9(0x25b),_0x1330f9(0x2d2)];let _0x18752c=[],_0x2167bd=[],_0x3d4b43=ccxt['exchanges'];_0x3d4b43[_0x1330f9(0x278)](_0x6b0c9a=>{const _0x4a57df=_0x1330f9;try{const _0x4428f2=new ccxt[_0x6b0c9a]();if(_0x4428f2['has']['ws'])_0x2167bd[_0x4a57df(0x304)](_0x4428f2);}catch(_0x323fe2){}}),_0x2167bd[_0x1330f9(0x278)](_0xb1f716=>{const _0x5c0b82=_0x1330f9;let _0x435f03=0x0;_0x324814[_0x5c0b82(0x278)](_0x282991=>{const _0x25ac4c=_0x5c0b82;_0x282991 in _0xb1f716[_0x25ac4c(0x286)]&&_0xb1f716['has'][_0x282991]&&_0x435f03++;}),_0x435f03==_0x324814['length']&&_0x18752c[_0x5c0b82(0x304)](capitalize(_0xb1f716['id']));});let _0x147533=[];return _0x3d4b43[_0x1330f9(0x278)](_0x3835fe=>{const _0x2d4d44=_0x1330f9;_0x3835fe=capitalize(_0x3835fe);if(!_0x18752c[_0x2d4d44(0x25e)](_0x3835fe))_0x147533[_0x2d4d44(0x304)](_0x3835fe);}),_0x18752c;}function setStartDatePerformance(){const _0x55eb10=_0xc617c9;if(config&&config[_0x55eb10(0x2c6)][0x0]['changes'][_0x55eb10(0x1a0)]!=0x0){const _0x20b416=config[_0x55eb10(0x2c6)][0x0][_0x55eb10(0x2ce)];dbPerformance['get'](_0x55eb10(0x223))[_0x55eb10(0x248)]({'date':config['startdate']})[_0x55eb10(0x30b)]({'coins':_0x20b416})['write']();}}async function recreateCoinResults(){const _0x3e1d75=_0xc617c9;let _0x2140a8,_0x5d6df0=[];try{const _0x5da5dc=fns['format'](fns['parseISO'](config[_0x3e1d75(0x1e8)][_0x3e1d75(0x1dd)](/\//g,'-')),_0x3e1d75(0x1c5));for(const _0x24e877 of currentCoins){if(_0x24e877[_0x3e1d75(0x234)]!=config['basecoin']){let _0x3f7b2d=0x0,_0x306078,_0x4be4e0;_0x2140a8=await getAllEventOrders(_0x24e877[_0x3e1d75(0x1e0)]);if(_0x2140a8['length']>0x0)_0x2140a8[_0x3e1d75(0x278)](_0x51094e=>{const _0x321903=_0x3e1d75,_0x387f7b=_0x24e877['symbol'][_0x321903(0x25e)](config[_0x321903(0x201)]+'/');_0x5d6df0['push']({'datetime':_0x51094e[_0x321903(0x220)],'coin':_0x24e877['coin'],'symbol':_0x24e877[_0x321903(0x1e0)],'side':_0x51094e[_0x321903(0x227)],'reverse':_0x387f7b,'amount':formatResult(_0x51094e[_0x321903(0x29c)],0x8),'filled':formatResult(_0x51094e['filled'],0x8),'price':formatResult(_0x51094e[_0x321903(0x207)],0x8)}),_0x3f7b2d=_0x51094e[_0x321903(0x227)]==_0x321903(0x2da)?_0x3f7b2d+_0x51094e[_0x321903(0x29c)]:_0x3f7b2d-_0x51094e[_0x321903(0x29c)];if(!_0x4be4e0)_0x4be4e0=_0x51094e[_0x321903(0x207)];});_0x306078=_0x24e877['number']-_0x3f7b2d;let _0xbcdd;config[_0x3e1d75(0x2c6)][_0x3e1d75(0x278)](_0x4b0e94=>{const _0x5ae813=_0x3e1d75;!_0xbcdd&&(_0xbcdd=_0x4b0e94[_0x5ae813(0x2ce)]['find'](_0x1f6100=>_0x1f6100[_0x5ae813(0x234)]==_0x24e877[_0x5ae813(0x234)]),_0xbcdd&&(_0x306078=_0xbcdd[_0x5ae813(0x26d)],_0x4be4e0=_0xbcdd['price']));});let _0x1daf1c=dbCoinResults[_0x3e1d75(0x204)](_0x3e1d75(0x1ce))['find']({'coin':_0x24e877[_0x3e1d75(0x234)]})[_0x3e1d75(0x2cb)]();_0x1daf1c={'coin':_0x24e877[_0x3e1d75(0x234)],'number':_0x306078,'breakeven':_0x4be4e0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3e1d75(0x204)]('coins')[_0x3e1d75(0x248)]({'coin':_0x24e877[_0x3e1d75(0x234)]})[_0x3e1d75(0x30b)](_0x1daf1c)[_0x3e1d75(0x1a4)]();}}_0x5d6df0['sort']((_0x4c5b98,_0x1e3f9f)=>_0x4c5b98[_0x3e1d75(0x220)]>_0x1e3f9f['datetime']?0x1:_0x1e3f9f[_0x3e1d75(0x220)]>_0x4c5b98[_0x3e1d75(0x220)]?-0x1:0x0);let _0x2b8f8a=0x0;for(let _0x560d7f of _0x5d6df0){await updateCoinResults(_0x560d7f,!![]);}}catch(_0x336069){await handleError(_0x336069,_0x3e1d75(0x1ff));}}async function getAllEventOrders(_0x2fc22c){const _0x1412c4=_0xc617c9;let _0x4b5db0=[],_0x1c929d=dbLogs['get'](_0x1412c4(0x1fe))[_0x1412c4(0x1b1)](_0x104a2b=>{const _0x3fdb2a=_0x1412c4,_0x5a4f24=_0x104a2b[_0x3fdb2a(0x247)][_0x3fdb2a(0x1bd)]();return _0x5a4f24['includes'](_0x2fc22c[_0x3fdb2a(0x1bd)]())&&(_0x5a4f24[_0x3fdb2a(0x25e)](_0x3fdb2a(0x215))&&_0x5a4f24[_0x3fdb2a(0x25e)]('order')||_0x5a4f24[_0x3fdb2a(0x25e)](_0x3fdb2a(0x29c))&&_0x5a4f24[_0x3fdb2a(0x25e)](_0x3fdb2a(0x214)));})[_0x1412c4(0x2ac)](_0x1412c4(0x1cd))[_0x1412c4(0x2cb)]();return _0x1c929d[_0x1412c4(0x278)](_0x455fd0=>{const _0x297463=_0x1412c4,_0x19c5f3=_0x455fd0[_0x297463(0x247)][_0x297463(0x25e)](_0x297463(0x1b7))?'sell':'buy',_0x14e5b1=/#([0-9]|\.)+\s/i,_0x1082d5=Number(_0x14e5b1['exec'](_0x455fd0[_0x297463(0x247)])[0x0][_0x297463(0x213)](0x1)),_0x75af6=/@([0-9]|\.)+$/i,_0x273c58=Number(_0x75af6[_0x297463(0x275)](_0x455fd0[_0x297463(0x247)])[0x0][_0x297463(0x213)](0x1));_0x4b5db0[_0x297463(0x304)]({'datetime':_0x455fd0[_0x297463(0x1cd)],'coin':symbolToCoin(_0x2fc22c),'symbol':_0x2fc22c,'side':_0x19c5f3,'amount':_0x1082d5,'filled':_0x1082d5,'price':_0x273c58});}),_0x4b5db0;}async function getAllOrders(_0x4d74c1,_0x2ddfec){const _0x504fec=_0xc617c9;let _0x22dfac=[];while(_0x2ddfec<exchange[_0x504fec(0x2b8)]()){const _0xa25bf1=0x1f4,_0xe9aed4=await exchange[_0x504fec(0x25b)](_0x4d74c1,_0x2ddfec,_0xa25bf1);if(_0xe9aed4[_0x504fec(0x1a0)])_0x2ddfec=_0xe9aed4[_0xe9aed4[_0x504fec(0x1a0)]-0x1]['timestamp']+0x1,_0x22dfac=_0x22dfac[_0x504fec(0x2b9)](_0xe9aed4);else break;}return _0x22dfac;}async function validate24hChanges(){const _0x3e5ded=_0xc617c9;for(const _0x183b26 of currentCoins){if(_0x183b26[_0x3e5ded(0x234)]!=config[_0x3e5ded(0x201)]){let _0x519f97;_0x183b26[_0x3e5ded(0x305)]?_0x519f97=formatResult((0x1/(global[_0x3e5ded(0x1bb)][noslash(_0x183b26[_0x3e5ded(0x1e0)])]/0x64+0x1)-0x1)*0x64,0x3):_0x519f97=global[_0x3e5ded(0x1bb)][noslash(_0x183b26[_0x3e5ded(0x1e0)])],_0x519f97<config['change24h']&&(logHistory(_0x3e5ded(0x2b4),_0x183b26[_0x3e5ded(0x234)]+_0x3e5ded(0x28e)+_0x519f97+'%'),logHistory(_0x3e5ded(0x2b4),_0x3e5ded(0x285)),logHistory(_0x3e5ded(0x2b4),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x482d8a,_0x3c146c){const _0x45bede=_0xc617c9;if(!_0x482d8a)return!![];const _0x3871f1=_0x3c146c[_0x45bede(0x1ca)]('.'),_0x4d5af7=_0x482d8a[_0x45bede(0x1ca)]('.');for(var _0x54f860=0x0;_0x54f860<_0x4d5af7[_0x45bede(0x1a0)];_0x54f860++){const _0x20a46e=~~_0x4d5af7[_0x54f860],_0x559f4e=~~_0x3871f1[_0x54f860];if(_0x20a46e<_0x559f4e)return!![];if(_0x20a46e>_0x559f4e)return![];}return![];}async function oneTimeMigration(){const _0x4050b8=_0xc617c9;let _0x2dae6a=dbLogs[_0x4050b8(0x204)](_0x4050b8(0x1df))[_0x4050b8(0x2cb)]();if(isOlderVersion(_0x2dae6a,_0x4050b8(0x24b))){let _0x4a82ef=[];const _0x3ae09d=dbLogs[_0x4050b8(0x204)](_0x4050b8(0x1fe))['value']();_0x3ae09d[_0x4050b8(0x278)](_0x4bb81b=>{const _0x1a2482=_0x4050b8;_0x4a82ef[_0x1a2482(0x304)]({'time':_0x4bb81b['time'],'type':_0x4bb81b[_0x1a2482(0x1c2)],'event':_0x4bb81b['event']});}),dbLogs[_0x4050b8(0x204)]('logs')[_0x4050b8(0x30b)](_0x4a82ef)[_0x4050b8(0x1a4)]();}let _0x285857=dbConfig['get'](_0x4050b8(0x1df))[_0x4050b8(0x2cb)]();if(isOlderVersion(_0x285857,_0x4050b8(0x24b))){let _0x33d61a=dbConfig[_0x4050b8(0x204)]('bot')['find']({'botID':botID})['value']();if(_0x33d61a){let _0x58fc7e=[];_0x33d61a[_0x4050b8(0x274)]['forEach'](_0x18235e=>{const _0x5739da=_0x4050b8;_0x58fc7e[_0x5739da(0x304)]({'coin':_0x18235e[_0x5739da(0x234)],'number':_0x18235e[_0x5739da(0x2c7)],'price':_0x18235e[_0x5739da(0x245)]}),delete _0x18235e[_0x5739da(0x2c7)],delete _0x18235e[_0x5739da(0x245)];});if(_0x58fc7e[_0x4050b8(0x1a0)]!==0x0)fs[_0x4050b8(0x1f6)](configbackuppath+(_0x4050b8(0x308)+botID+_0x4050b8(0x2a9)),JSON['stringify'](_0x58fc7e,null,0x4),function(_0x53e5a0){if(_0x53e5a0){}});const _0x5cd568=(_0x329f1b,_0x1a67f1)=>{const _0x5477f9=_0x4050b8;let _0x429d56=[];_0x1a67f1[_0x5477f9(0x278)](_0x41cdf3=>{const _0xe304ca=_0x5477f9,_0x353676=_0x329f1b[_0xe304ca(0x248)](_0x189957=>_0x189957['coin']==_0x41cdf3[_0xe304ca(0x234)]);if(!_0x353676)_0x429d56['push'](_0x41cdf3);});let _0x2d5e48=[];return _0x329f1b[_0x5477f9(0x278)](_0x4210fb=>{const _0x435a0c=_0x5477f9,_0x3efe63=_0x1a67f1[_0x435a0c(0x248)](_0x1721fd=>_0x1721fd[_0x435a0c(0x234)]==_0x4210fb[_0x435a0c(0x234)]);if(!_0x3efe63||_0x3efe63[_0x435a0c(0x26d)]==0x0&&_0x4210fb['number']!=0x0)_0x2d5e48[_0x435a0c(0x304)](_0x4210fb);}),{'missingDay1':_0x429d56,'notInDay2':_0x2d5e48};},_0x57b866=dbPerformance[_0x4050b8(0x204)]('data')[_0x4050b8(0x2a7)]()[_0x4050b8(0x2cb)]();if(_0x57b866[_0x4050b8(0x1a0)]>0x1){const {missingDay1:_0x383e59,notInDay2:_0x7bc6a5}=_0x5cd568(_0x58fc7e,_0x57b866[0x1][_0x4050b8(0x1ce)]);_0x58fc7e=[..._0x58fc7e,..._0x383e59],_0x7bc6a5['forEach'](_0x4a9b08=>{const _0x4d41e3=_0x4050b8;let _0x246b2b=_0x58fc7e[_0x4d41e3(0x1dc)](_0x21b1b5=>_0x21b1b5['coin']==_0x4a9b08['coin']);_0x246b2b!=-0x1&&_0x58fc7e[_0x4d41e3(0x1d8)](_0x246b2b,0x1);});}_0x58fc7e[_0x4050b8(0x1a3)]((_0x13fc5b,_0x195a05)=>_0x13fc5b[_0x4050b8(0x234)]>_0x195a05['coin']?0x1:_0x195a05[_0x4050b8(0x234)]>_0x13fc5b['coin']?-0x1:0x0);let _0x17a503=[{'date':_0x33d61a['startdate'],'changes':_0x58fc7e}];_0x57b866['length']>0x2&&_0x57b866[_0x4050b8(0x278)]((_0x215cfe,_0x18a4a3)=>{const _0x3153af=_0x4050b8;if(_0x18a4a3>0x0&&_0x18a4a3<_0x57b866[_0x3153af(0x1a0)]-0x1){const {missingDay1:_0x10bbbd,notInDay2:_0xac8ddf}=_0x5cd568(_0x57b866[_0x18a4a3][_0x3153af(0x1ce)],_0x57b866[_0x18a4a3+0x1][_0x3153af(0x1ce)]);_0x58fc7e=[],(_0x10bbbd['length']!=0x0||_0xac8ddf[_0x3153af(0x1a0)]!=0x0)&&(_0x10bbbd['length']!=0x0&&_0x58fc7e[_0x3153af(0x304)](..._0x10bbbd),_0xac8ddf[_0x3153af(0x1a0)]!=0x0&&(_0xac8ddf[_0x3153af(0x278)](_0x4f1702=>{const _0x50cd76=_0x3153af;_0x4f1702[_0x50cd76(0x26d)]=-_0x4f1702[_0x50cd76(0x26d)];}),_0x58fc7e[_0x3153af(0x304)](..._0xac8ddf)),_0x58fc7e[_0x3153af(0x1a3)]((_0x2fb8a3,_0xf0d28f)=>_0x2fb8a3['coin']>_0xf0d28f[_0x3153af(0x234)]?0x1:_0xf0d28f[_0x3153af(0x234)]>_0x2fb8a3['coin']?-0x1:0x0),_0x17a503[_0x3153af(0x304)]({'date':_0x57b866[_0x18a4a3+0x1]['date'],'changes':_0x58fc7e}));}}),dbConfig[_0x4050b8(0x204)]('bot')[_0x4050b8(0x248)]({'botID':botID})[_0x4050b8(0x30b)]({..._0x33d61a,'liquidity':_0x17a503})[_0x4050b8(0x1a4)]();}}if(isOlderVersion(_0x285857,_0x4050b8(0x193))){let _0x37070d=dbConfig[_0x4050b8(0x204)](_0x4050b8(0x2ee))['find']({'botID':botID})[_0x4050b8(0x2cb)]();if(_0x37070d){const _0x3d6547=_0x37070d[_0x4050b8(0x2fa)],_0x5d3fd5=_0x3d6547?capitalize(_0x3d6547):'Binance';dbConfig['get'](_0x4050b8(0x2ee))[_0x4050b8(0x248)]({'botID':botID})[_0x4050b8(0x30b)]({'exchange':_0x5d3fd5})[_0x4050b8(0x1a4)]();}}let _0x1f0a0e=dbPerformance[_0x4050b8(0x204)]('version')[_0x4050b8(0x2cb)]();isOlderVersion(_0x1f0a0e,_0x4050b8(0x24b))&&setStartDatePerformance();let _0x45b35c=dbCoinResults[_0x4050b8(0x204)](_0x4050b8(0x1df))[_0x4050b8(0x2cb)]();if(isOlderVersion(_0x45b35c,_0x4050b8(0x222))){let _0xd6f7a6=dbCoinResults[_0x4050b8(0x204)]('coins')[_0x4050b8(0x2cb)]();if(_0xd6f7a6[_0x4050b8(0x1a0)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3fe14d=_0xc617c9;dbConfig[_0x3fe14d(0x2dc)](_0x3fe14d(0x1df),serverversion)[_0x3fe14d(0x1a4)](),dbPerformance[_0x3fe14d(0x2dc)](_0x3fe14d(0x1df),serverversion)[_0x3fe14d(0x1a4)](),dbLogs[_0x3fe14d(0x2dc)]('version',serverversion)[_0x3fe14d(0x1a4)](),dbCoinResults[_0x3fe14d(0x2dc)](_0x3fe14d(0x1df),serverversion)[_0x3fe14d(0x1a4)]();}function getConfiguration(_0x572f64){const _0x55ca39=_0xc617c9;let _0x3465e2=dbConfig['get'](_0x55ca39(0x2ee))['find']({'botID':_0x572f64})[_0x55ca39(0x2cb)]();if(_0x3465e2){let _0x442195=![];typeof _0x3465e2[_0x55ca39(0x1f0)]==_0x55ca39(0x192)&&(_0x3465e2={..._0x3465e2,'threshold':Number(_0x3465e2[_0x55ca39(0x1f0)])},_0x442195=!![]),_0x3465e2[_0x55ca39(0x1a9)]==null&&(_0x3465e2={..._0x3465e2,'change24h':-0x14},_0x442195=!![]),!_0x3465e2[_0x55ca39(0x239)]&&(_0x3465e2={..._0x3465e2,'fiat':'USD'},_0x442195=!![]),!_0x3465e2[_0x55ca39(0x21b)]&&(_0x3465e2={..._0x3465e2,'onepagemode':settings[_0x55ca39(0x21b)]},_0x442195=!![]),!_0x3465e2['colorscheme']&&(_0x3465e2={..._0x3465e2,'colorscheme':_0x55ca39(0x1b6)},_0x442195=!![]),!_0x3465e2[_0x55ca39(0x30e)]&&(_0x3465e2={..._0x3465e2,'autoliquidity':!![]},_0x442195=!![]),_0x442195&&(_0x3465e2={'botID':_0x3465e2[_0x55ca39(0x19d)],'exchange':_0x3465e2[_0x55ca39(0x2fa)],'apiKey':_0x3465e2[_0x55ca39(0x29b)],'apiSecret':_0x3465e2['apiSecret'],'apiPassword':_0x3465e2['apiPassword'],'basecoin':_0x3465e2[_0x55ca39(0x201)],'botname':_0x3465e2[_0x55ca39(0x25f)],'showname':_0x3465e2['showname'],'threshold':_0x3465e2[_0x55ca39(0x1f0)],'ordertype':_0x3465e2['ordertype'],'timeout':_0x3465e2[_0x55ca39(0x236)],'fiat':_0x3465e2[_0x55ca39(0x239)],'startdate':_0x3465e2['startdate'],'recreate':_0x3465e2[_0x55ca39(0x1af)],'timeshift':_0x3465e2[_0x55ca39(0x19a)],'onepagemode':_0x3465e2[_0x55ca39(0x21b)],'headless':_0x3465e2['headless'],'cooldown':_0x3465e2[_0x55ca39(0x1c6)],'change24h':_0x3465e2[_0x55ca39(0x1a9)],'emojibuy':_0x3465e2[_0x55ca39(0x24a)],'emojisell':_0x3465e2[_0x55ca39(0x2d8)],'colorscheme':_0x3465e2['colorscheme'],'portfolio':_0x3465e2['portfolio'],'autoliquidity':_0x3465e2[_0x55ca39(0x30e)],'liquidity':_0x3465e2[_0x55ca39(0x2c6)],'openOrders':_0x3465e2['openOrders']},dbConfig[_0x55ca39(0x204)](_0x55ca39(0x2ee))[_0x55ca39(0x1f1)]()[_0x55ca39(0x1a4)](),dbConfig[_0x55ca39(0x204)](_0x55ca39(0x2ee))['push'](_0x3465e2)[_0x55ca39(0x1a4)]());}else _0x3465e2={'botID':_0x572f64,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x572f64,'showname':![],'threshold':0x3,'ordertype':_0x55ca39(0x215),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x55ca39(0x21b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x55ca39(0x1b6),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3465e2;}function emittedConfiguration(){const _0x4fe479=_0xc617c9;let _0x43c323;if(config['apiKey']=='')_0x43c323={...config,'configstate':_0x4fe479(0x1ee)};else config[_0x4fe479(0x29b)]==_0x4fe479(0x2af)?_0x43c323={...config,'configstate':_0x4fe479(0x266)}:(_0x43c323={...config,'apiKey':_0x4fe479(0x263),'apiSecret':_0x4fe479(0x263)},config[_0x4fe479(0x25a)]&&(_0x43c323[_0x4fe479(0x25a)]=_0x4fe479(0x263)));return _0x43c323;}function getSettings(){const _0x555d53=_0xc617c9;return dbSettings[_0x555d53(0x204)](_0x555d53(0x19b))[_0x555d53(0x2cb)]();}function getSecure(){const _0x1f5c17=_0xc617c9;return dbSecure[_0x1f5c17(0x204)](_0x1f5c17(0x1b3))[_0x1f5c17(0x2cb)]()||{};}function updateTimeshift(_0x6aad15){const _0xabbf31=_0xc617c9;let _0x15c6d4=dbConfig[_0xabbf31(0x204)](_0xabbf31(0x2ee))['find']({'botID':botID})[_0xabbf31(0x2cb)]();_0x15c6d4&&dbConfig[_0xabbf31(0x204)](_0xabbf31(0x2ee))[_0xabbf31(0x248)]({'botID':botID})[_0xabbf31(0x30b)]({'timeshift':_0x6aad15})[_0xabbf31(0x1a4)](),config[_0xabbf31(0x19a)]=_0x6aad15,proxyEmit(_0xabbf31(0x2e8),emittedConfiguration());}function updateOnepagemode(_0x3308d4){const _0x500dbe=_0xc617c9;let _0x16b562=dbConfig['get'](_0x500dbe(0x2ee))[_0x500dbe(0x248)]({'botID':botID})[_0x500dbe(0x2cb)]();_0x16b562&&dbConfig['get'](_0x500dbe(0x2ee))['find']({'botID':botID})[_0x500dbe(0x30b)]({'onepagemode':_0x3308d4})[_0x500dbe(0x1a4)](),config['onepagemode']=_0x3308d4,proxyEmit(_0x500dbe(0x2e8),emittedConfiguration());}async function storeConfiguration(_0x1086e6){const _0x2cefcf=_0xc617c9;logger[_0x2cefcf(0x1e1)](_0x2cefcf(0x291));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2cefcf(0x1e1)](_0x2cefcf(0x2c2));let _0x22e150=[],_0x198d4c=![],_0x432ff6=![],_0x17e218=[];_0x1086e6[_0x2cefcf(0x274)]['forEach'](_0x349ebc=>{const _0x17b10c=_0x2cefcf;if(!_0x349ebc[_0x17b10c(0x2dd)]&&_0x349ebc[_0x17b10c(0x234)]!=_0x1086e6[_0x17b10c(0x201)])_0x17e218['push'](_0x349ebc[_0x17b10c(0x1e0)]);}),_0x17e218['forEach'](_0x3ad77f=>{const _0x3e4399=_0x2cefcf,_0xef0aba=watchedSymbols[_0x3e4399(0x25e)](_0x3ad77f);!_0xef0aba&&_0x22e150[_0x3e4399(0x304)](_0x3ad77f);}),_0x17e218[_0x2cefcf(0x278)](_0x34eea4=>{const _0x5b26d6=_0x2cefcf,_0x141e6e=currentCoins[_0x5b26d6(0x248)](_0x353a31=>_0x353a31['symbol']==_0x34eea4);!_0x141e6e&&(_0x198d4c=!![]);}),currentCoins[_0x2cefcf(0x278)](_0x2da303=>{const _0x4aa7c9=_0x2cefcf;if(_0x2da303[_0x4aa7c9(0x234)]!=config['basecoin']){const _0x1c3c5d=_0x17e218['find'](_0x5292e0=>_0x5292e0==_0x2da303['symbol']);!_0x1c3c5d&&(_0x198d4c=!![]);}}),_0x1086e6['portfolio'][_0x2cefcf(0x278)](_0x5e3cf0=>{const _0x2c38b7=_0x2cefcf,_0x5cb23b=config['portfolio'][_0x2c38b7(0x248)](_0x291214=>_0x291214[_0x2c38b7(0x234)]==_0x5e3cf0[_0x2c38b7(0x234)]);if(_0x5cb23b&&_0x5e3cf0['offset']!=_0x5cb23b[_0x2c38b7(0x2df)])_0x432ff6=!![];});let _0x1675a2=dbConfig[_0x2cefcf(0x204)](_0x2cefcf(0x2ee))['find']({'botID':botID})[_0x2cefcf(0x2cb)]();_0x1086e6={..._0x1086e6,'apiKey':crypt[_0x2cefcf(0x2fd)](secure[_0x2cefcf(0x195)],_0x1086e6['apiKey'])['message'],'apiSecret':crypt[_0x2cefcf(0x2fd)](secure[_0x2cefcf(0x195)],_0x1086e6['apiSecret'])[_0x2cefcf(0x1bc)]};_0x1086e6[_0x2cefcf(0x25a)]&&(_0x1086e6[_0x2cefcf(0x25a)]=crypt[_0x2cefcf(0x2fd)](secure[_0x2cefcf(0x195)],_0x1086e6[_0x2cefcf(0x25a)])[_0x2cefcf(0x1bc)]);let _0xe72494=![];if(_0x1675a2){_0x1086e6[_0x2cefcf(0x29b)]=='************'?_0x1086e6['apiKey']=config[_0x2cefcf(0x29b)]:_0xe72494=!![];_0x1086e6[_0x2cefcf(0x2b5)]=='************'?_0x1086e6[_0x2cefcf(0x2b5)]=config['apiSecret']:_0xe72494=!![];if(_0x1086e6[_0x2cefcf(0x25a)]==_0x2cefcf(0x263))_0x1086e6['apiPassword']=config[_0x2cefcf(0x25a)];else{if(_0x1086e6['apiPassword'])_0xe72494=!![];}dbConfig[_0x2cefcf(0x204)]('bot')[_0x2cefcf(0x248)]({'botID':botID})[_0x2cefcf(0x30b)](_0x1086e6)[_0x2cefcf(0x1a4)]();}else dbConfig[_0x2cefcf(0x204)]('bot')[_0x2cefcf(0x304)](_0x1086e6)[_0x2cefcf(0x1a4)](),_0xe72494=!![],process[_0x2cefcf(0x2c3)]({'status':_0x2cefcf(0x1de),'live':_0x2cefcf(0x282)},_0x460b8e=>{});process[_0x2cefcf(0x2c3)]({'botname':_0x1086e6[_0x2cefcf(0x25f)]},_0x183661=>{}),updateBotManager(),config={..._0x1086e6},proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xe72494)await reset(_0x22e150,!![]);else _0x198d4c||_0x432ff6?await reset(_0x22e150,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x2cefcf(0x2a0));}async function storeHeadless(_0x42667c){const _0x20ca26=_0xc617c9,_0x2cebc7={...config,'headless':_0x42667c['headless']};let _0x49f081=dbConfig[_0x20ca26(0x204)]('bot')['find']({'botID':botID})[_0x20ca26(0x2cb)]();_0x49f081&&dbConfig[_0x20ca26(0x204)](_0x20ca26(0x2ee))[_0x20ca26(0x248)]({'botID':botID})['assign'](_0x2cebc7)[_0x20ca26(0x1a4)](),config={..._0x2cebc7},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x2cb368){const _0x53e1f4=_0xc617c9,_0x387772={...config,'fiat':_0x2cb368};let _0x2c9840=dbConfig['get'](_0x53e1f4(0x2ee))['find']({'botID':botID})[_0x53e1f4(0x2cb)]();_0x2c9840&&dbConfig['get'](_0x53e1f4(0x2ee))[_0x53e1f4(0x248)]({'botID':botID})[_0x53e1f4(0x30b)](_0x387772)['write'](),config={..._0x387772},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x1ceadf=_0xc617c9;logger[_0x1ceadf(0x238)](_0x1ceadf(0x22e));try{if(fs[_0x1ceadf(0x307)](path['join'](configpath,'bot-'+botID+_0x1ceadf(0x253))))fs[_0x1ceadf(0x233)](path[_0x1ceadf(0x25c)](configpath,_0x1ceadf(0x1d9)+botID+_0x1ceadf(0x253)));if(fs[_0x1ceadf(0x307)](path[_0x1ceadf(0x25c)](configpath,_0x1ceadf(0x1d9)+botID+_0x1ceadf(0x297))))fs[_0x1ceadf(0x233)](path[_0x1ceadf(0x25c)](configpath,_0x1ceadf(0x1d9)+botID+_0x1ceadf(0x297)));if(fs['existsSync'](path['join'](configpath,_0x1ceadf(0x1d9)+botID+_0x1ceadf(0x1fd))))fs[_0x1ceadf(0x233)](path[_0x1ceadf(0x25c)](configpath,_0x1ceadf(0x1d9)+botID+_0x1ceadf(0x1fd)));}catch(_0x19785b){if(_0x19785b)logger[_0x1ceadf(0x238)](_0x1ceadf(0x28f),_0x19785b);}const _0x35a684=getDate();let _0x3c1c83=[];currentCoins['forEach'](_0xe52453=>{const _0x4b427f=_0x1ceadf;_0x3c1c83[_0x4b427f(0x304)]({'coin':_0xe52453[_0x4b427f(0x234)],'number':_0xe52453['number'],'price':_0xe52453[_0x4b427f(0x2c9)]});});let _0x5d8f0e=dbConfig[_0x1ceadf(0x204)](_0x1ceadf(0x2ee))[_0x1ceadf(0x248)]({'botID':botID})[_0x1ceadf(0x2cb)]();_0x5d8f0e&&(dbConfig[_0x1ceadf(0x204)](_0x1ceadf(0x2ee))[_0x1ceadf(0x248)]({'botID':botID})[_0x1ceadf(0x30b)]({'liquidity':[{'date':_0x35a684,'changes':_0x3c1c83}]})['write'](),config[_0x1ceadf(0x2c6)]=[]),process['send']({'stop':'restart'},_0x1a2e22=>{});}function noslash(_0x56c79e){const _0x3ca889=_0xc617c9;return _0x56c79e[_0x3ca889(0x1dd)]('/','');}function updateHighestFee(_0x1dfe60){const _0x3730d3=_0xc617c9;if(_0x1dfe60[_0x3730d3(0x305)]){let _0x36ccb3={'filled':_0x1dfe60[_0x3730d3(0x29c)]*_0x1dfe60[_0x3730d3(0x207)],'amount':_0x1dfe60[_0x3730d3(0x29c)]*_0x1dfe60[_0x3730d3(0x207)],'side':_0x1dfe60[_0x3730d3(0x227)]==_0x3730d3(0x1b7)?_0x3730d3(0x2da):'sell','price':0x1/_0x1dfe60[_0x3730d3(0x207)]};_0x1dfe60={..._0x1dfe60,..._0x36ccb3};}const _0x2c8828=defaultFee*_0x1dfe60[_0x3730d3(0x29c)]*_0x1dfe60[_0x3730d3(0x207)];lastFees[_0x3730d3(0x296)][_0x3730d3(0x1a0)]===0x14&&lastFees[_0x3730d3(0x296)][_0x3730d3(0x306)](),lastFees[_0x3730d3(0x296)][_0x3730d3(0x304)](_0x2c8828),lastFees['highest']=Math[_0x3730d3(0x22c)](...lastFees[_0x3730d3(0x296)]);}async function updateNumberCoinsCcxt(_0x1a3838){const _0x554216=_0xc617c9;logger['debug'](_0x554216(0x2a2)+_0x1a3838[_0x554216(0x1e0)]+_0x554216(0x1cc)+_0x1a3838['status']+_0x554216(0x1cc)+_0x1a3838['id']);let _0x1da4e3=_0x1a3838['status'],_0x4a18a9=![];currentCoins[_0x554216(0x278)](_0x4fde41=>{const _0x428812=_0x554216;_0x4fde41[_0x428812(0x1e0)]==_0x1a3838[_0x428812(0x1e0)]&&(_0x4a18a9=!![]);});if(!_0x4a18a9)return;const _0x599ffc=currentCoins[_0x554216(0x248)](_0x11f31a=>_0x11f31a[_0x554216(0x1e0)]==_0x1a3838[_0x554216(0x1e0)]),_0x473ca4=_0x10812a=>{if(_0x599ffc)_0x599ffc['orderstatus']=_0x10812a;};if(_0x1da4e3==_0x554216(0x240))_0x473ca4(_0x554216(0x240));else{if(_0x1da4e3==_0x554216(0x30a)){_0x473ca4('canceled');const _0x3581ad=await getCoins();[currentCoins,currentCoinsAll]=_0x3581ad,await getOpenOrders(),handleOpenOrders();}else{if(_0x1da4e3==_0x554216(0x2b3)){logger[_0x554216(0x1e1)](_0x554216(0x311)+_0x1a3838[_0x554216(0x1e0)]+_0x554216(0x1cc)+_0x1a3838[_0x554216(0x29c)]+_0x554216(0x1cc)+_0x1a3838['id']);let _0x298939=![];if(lastOrders)for(const _0x42a75c of lastOrders){const _0x2f2d04=0xc8,_0x1ebf7c=0x1388;let _0x494022=0x0;while(!_0x42a75c['orderId']&&_0x494022*_0x2f2d04<_0x1ebf7c){_0x494022++,await sleep(_0x2f2d04);}if(_0x494022>0x0)logger['debug']('Waited\x20'+_0x494022*_0x2f2d04/0x3e8+_0x554216(0x2e7));if(_0x42a75c[_0x554216(0x2e1)]==_0x1a3838['id']){logger[_0x554216(0x1e1)](_0x554216(0x302)+_0x1a3838['id']),_0x298939=!![];if(_0x42a75c[_0x554216(0x29c)]==0x0){logger[_0x554216(0x1e1)](_0x554216(0x22d)+_0x1a3838['id']);if(_0x1a3838['average'])_0x42a75c[_0x554216(0x207)]=_0x1a3838['average'];else{if(_0x1a3838[_0x554216(0x207)])_0x42a75c['price']=_0x1a3838[_0x554216(0x207)];else{}}_0x42a75c['filled']=_0x1a3838[_0x554216(0x29c)],updateHighestFee(_0x42a75c),_0x473ca4(_0x554216(0x29c)),await validateOrders();if(lockOrders==ORDERS[_0x554216(0x1d5)]){const _0x3ae60a=await getCoins();[currentCoins,currentCoinsAll]=_0x3ae60a;}_0x42a75c['fee']={'currency':_0x1a3838[_0x554216(0x2a6)]?_0x1a3838['fee'][_0x554216(0x1f8)]:null,'cost':_0x1a3838[_0x554216(0x2a6)]?_0x1a3838[_0x554216(0x2a6)][_0x554216(0x1cf)]:0x0},await updateCoinResults(_0x42a75c);}}}if(!_0x298939){logger[_0x554216(0x1e1)](_0x554216(0x2ad)+_0x1a3838['id']),_0x473ca4(_0x554216(0x29c));const _0x31e725=await getCoins();[currentCoins,currentCoinsAll]=_0x31e725,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4592de=JSON[_0x554216(0x1f2)](lastBalances[_0x554216(0x274)]);const _0x17c13c=_0x4592de[_0x554216(0x248)](_0x226a34=>_0x226a34[_0x554216(0x1e0)]==_0x1a3838[_0x554216(0x1e0)]);if(_0x17c13c){if(_0x1da4e3==_0x554216(0x240))_0x17c13c[_0x554216(0x23d)]=_0x17c13c['orderstatus']==_0x554216(0x29c)?_0x554216(0x29c):_0x554216(0x240);else{if(_0x1da4e3==_0x554216(0x30a))_0x17c13c[_0x554216(0x23d)]=_0x17c13c[_0x554216(0x23d)]==_0x554216(0x29c)?_0x554216(0x29c):_0x554216(0x30a);else _0x1da4e3==_0x554216(0x2b3)&&(_0x17c13c['orderstatus']=_0x554216(0x29c));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x4592de)},proxyEmit(_0x554216(0x1c4),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x56e442=_0xc617c9;await getOpenOrders();let _0x564178=![];currentCoins[_0x56e442(0x278)](_0x1cc0ab=>{const _0x2c162c=_0x56e442;_0x564178=allOpenOrders[_0x2c162c(0x248)](_0x5544ca=>_0x5544ca[_0x2c162c(0x1e0)]==_0x1cc0ab[_0x2c162c(0x1e0)]),_0x1cc0ab[_0x2c162c(0x23d)]=_0x564178?_0x2c162c(0x240):'none';});}async function getCoins(_0x393f2f=!![],_0x3a6ada=config[_0xc617c9(0x201)]){const _0x1b65fc=_0xc617c9;let _0x5acfb9,_0x60505b=[],_0x281cfc=[],_0xf67b01=[],_0x4cdd42=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5acfb9=await exchange[_0x1b65fc(0x2d2)](),mybalances=_0x5acfb9[_0x1b65fc(0x196)];for(const [_0x449ba4,_0x162e04]of Object[_0x1b65fc(0x299)](mybalances)){_0x4cdd42[_0x1b65fc(0x304)](_0x449ba4);}if(_0x3a6ada=='')for(const [_0x4921f5,_0x171744]of Object['entries'](mybalances)){_0x171744!=0x0&&_0x281cfc['push']({'coin':_0x4921f5});}else{let _0x1b51c9=![];for(const [_0x53a943,_0x559ba8]of Object['entries'](mybalances)){if(_0x4cdd42['includes'](_0x53a943)){const _0x405ed6=config['portfolio'][_0x1b65fc(0x248)](_0x2205e6=>_0x2205e6[_0x1b65fc(0x234)]==_0x53a943),_0x244ee0=_0x53a943+'/'+_0x3a6ada,_0x379053=_0x3a6ada+'/'+_0x53a943,_0x5041b3=currentCoins[_0x1b65fc(0x248)](_0x39a677=>_0x39a677['coin']==_0x53a943);_0x1b51c9=![];if((_0x559ba8!=0x0||_0x405ed6)&&(allSymbols['includes'](_0x244ee0)||_0x53a943==_0x3a6ada))_0x53a943!=_0x3a6ada&&_0x60505b[_0x1b65fc(0x304)](_0x244ee0),_0x281cfc[_0x1b65fc(0x304)]({'coin':_0x53a943,'symbol':_0x244ee0,'reverse':![],'number':Math[_0x1b65fc(0x22c)](_0x559ba8+(_0x405ed6&&_0x405ed6[_0x1b65fc(0x2df)]||0x0),0x0),'orderstatus':_0x5041b3?_0x5041b3['orderstatus']:_0x1b65fc(0x242)});else(_0x559ba8!=0x0||_0x405ed6)&&allSymbols['includes'](_0x379053)&&(_0x53a943!=_0x3a6ada&&_0x60505b[_0x1b65fc(0x304)](_0x379053),_0x281cfc[_0x1b65fc(0x304)]({'coin':_0x53a943,'symbol':_0x379053,'reverse':!![],'number':Math[_0x1b65fc(0x22c)](_0x559ba8+(_0x405ed6&&_0x405ed6[_0x1b65fc(0x2df)]||0x0),0x0),'orderstatus':_0x5041b3?_0x5041b3[_0x1b65fc(0x23d)]:'none'}));}}}}catch(_0x525ae5){if(!_0x393f2f)handleErrorNoStop(_0x525ae5,_0x1b65fc(0x1b2));else await handleError(_0x525ae5,_0x1b65fc(0x1b2));}return _0xf67b01=cloneDeep(_0x281cfc),_0x281cfc=_0x281cfc[_0x1b65fc(0x1b1)](_0x9b790=>{const _0x301a5d=_0x1b65fc,_0x57e4ab=config['portfolio'][_0x301a5d(0x248)](_0x4dc0ac=>_0x4dc0ac['coin']==_0x9b790[_0x301a5d(0x234)]);return _0x57e4ab&&!_0x57e4ab[_0x301a5d(0x2dd)];}),[_0x281cfc,_0xf67b01];}async function getCoinNumber(_0x2b87e9){const _0x4032d9=_0xc617c9;let _0x30b595;try{const _0x50e358=await exchange[_0x4032d9(0x2d2)]();_0x30b595=_0x50e358[_0x4032d9(0x196)][_0x2b87e9];}catch(_0x40149d){await handleError(_0x40149d,_0x4032d9(0x29d));}return _0x30b595;}async function getOpenOrders(){const _0x1770e6=_0xc617c9;let _0x1cf6bb;allOpenOrders=[];try{for(const _0x4ed77c of config['portfolio']){!_0x4ed77c[_0x1770e6(0x2dd)]&&_0x4ed77c['coin']!=config[_0x1770e6(0x201)]&&(_0x1cf6bb=await exchange[_0x1770e6(0x2c0)](_0x4ed77c[_0x1770e6(0x1e0)]),_0x1cf6bb[_0x1770e6(0x1a0)]>0x0&&allOpenOrders[_0x1770e6(0x304)](_0x1cf6bb[0x0]));}}catch(_0x208852){await handleError(_0x208852,_0x1770e6(0x1ec));}}async function handleOpenOrders(_0x2ead64=0x0){const _0x1b1744=_0xc617c9;allOpenOrders[_0x1b1744(0x1a0)]==0x0&&lockOrders==ORDERS[_0x1b1744(0x1d5)]&&allOrdersPlaced&&(_0x2ead64==0x0?(logger[_0x1b1744(0x1e1)](_0x1b1744(0x1f7)),_0x2ead64++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1b1744(0x1e1)](_0x1b1744(0x2e6)),validateOrders(_0x1b1744(0x18f))));}async function testAPI(_0x23a7dc){const _0x29bbdb=_0xc617c9,_0x2e2568=ccxt[_0x23a7dc[_0x29bbdb(0x2fa)][_0x29bbdb(0x1bd)]()],_0x1ee8d4=new _0x2e2568({'apiKey':_0x23a7dc[_0x29bbdb(0x29b)],'secret':_0x23a7dc[_0x29bbdb(0x2b5)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x23a7dc[_0x29bbdb(0x25a)])_0x1ee8d4[_0x29bbdb(0x1b0)]=_0x23a7dc[_0x29bbdb(0x25a)];try{await _0x1ee8d4[_0x29bbdb(0x2fb)]();}catch(_0x365550){throw _0x365550;}}function cloneDeep(_0x4b4d44){return JSON['parse'](JSON['stringify'](_0x4b4d44));}async function getPortfolio(_0xb09ab9){const _0xc79b9a=_0xc617c9;let _0x2fc210=[],_0x4bb773=[],_0x5d2591=[],_0x2323e3;if(_0xb09ab9[_0xc79b9a(0x29b)]!==_0xc79b9a(0x263)||_0xb09ab9['apiSecret']!==_0xc79b9a(0x263)||_0xb09ab9[_0xc79b9a(0x25a)]&&_0xb09ab9[_0xc79b9a(0x25a)]!==_0xc79b9a(0x263)){if(config[_0xc79b9a(0x2fa)]){if(_0xb09ab9[_0xc79b9a(0x29b)]==_0xc79b9a(0x263))_0xb09ab9['apiKey']=config['apiKey'];if(_0xb09ab9[_0xc79b9a(0x2b5)]=='************')_0xb09ab9[_0xc79b9a(0x2b5)]=config['apiSecret'];if(_0xb09ab9[_0xc79b9a(0x25a)]==_0xc79b9a(0x263))_0xb09ab9[_0xc79b9a(0x25a)]=config[_0xc79b9a(0x25a)];try{await testAPI(_0xb09ab9);}catch(_0x122f87){if(_0x122f87['toString']()[_0xc79b9a(0x25e)](_0xc79b9a(0x225))){logger[_0xc79b9a(0x1e1)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0xc79b9a(0x274),![]);return;}else{handleError(_0x122f87,_0xc79b9a(0x1e7));return;}}}await initExchange(_0xb09ab9[_0xc79b9a(0x2fa)],_0xb09ab9['apiKey'],_0xb09ab9[_0xc79b9a(0x2b5)],_0xb09ab9[_0xc79b9a(0x25a)]);try{await loadSymbols(_0xb09ab9[_0xc79b9a(0x2fa)],!![]);}catch(_0x47abc5){if(_0x47abc5[_0xc79b9a(0x2fe)]()[_0xc79b9a(0x25e)](_0xc79b9a(0x225))){proxyEmit('portfolio',![]);return;}else{handleError(_0x47abc5,'getPortfolio(1)');return;}}const _0x44a68f=await getCoins(![],_0xb09ab9['basecoin']);_0x5d2591=cloneDeep(_0x44a68f[0x1]);}else _0x5d2591=cloneDeep(currentCoinsAll);if(_0xb09ab9['basecoin']=='')proxyEmit('portfolio',_0x5d2591);else{_0x5d2591[_0xc79b9a(0x278)](_0x2e647b=>{const _0x52945b=_0xc79b9a;if(_0x2e647b[_0x52945b(0x234)]!=_0xb09ab9[_0x52945b(0x201)])_0x2fc210[_0x52945b(0x304)](_0x2e647b[_0x52945b(0x1e0)]);});try{_0x4bb773=await exchange[_0xc79b9a(0x224)](_0x2fc210);}catch(_0x1dbd07){if(_0x1dbd07[_0xc79b9a(0x2fe)]()[_0xc79b9a(0x25e)](_0xc79b9a(0x225))){proxyEmit(_0xc79b9a(0x274),![]);return;}else{handleError(_0x1dbd07,'getPortfolio(2)');return;}}_0x5d2591[_0xc79b9a(0x278)](_0x5217d1=>{const _0x16f2aa=_0xc79b9a;_0x5217d1[_0x16f2aa(0x234)]!=_0xb09ab9[_0x16f2aa(0x201)]?_0x2323e3=_0x5217d1[_0x16f2aa(0x305)]?0x1/_0x4bb773[_0x5217d1[_0x16f2aa(0x1e0)]][_0x16f2aa(0x2c9)]:_0x4bb773[_0x5217d1[_0x16f2aa(0x1e0)]][_0x16f2aa(0x2c9)]:_0x2323e3=0x1,_0x5217d1[_0x16f2aa(0x207)]=formatResult(_0x2323e3,0x8);}),proxyEmit('portfolio',_0x5d2591);}}function truncateTradeAmount(_0x24b1b3,_0x17ad56){const _0xaa4ae=_0xc617c9;let _0x3298d6=0x0;try{_0x3298d6=exchange[_0xaa4ae(0x2f8)](_0x24b1b3,_0x17ad56);}catch(_0x47206b){}return _0x3298d6;}function checkMinimums(_0x184f4d){const _0x21a6a3=_0xc617c9;let _0x54b093=!![];const _0x3be30c=!_0x184f4d[_0x21a6a3(0x305)]?markets[_0x184f4d[_0x21a6a3(0x1e0)]]['limits'][_0x21a6a3(0x265)]['min']:markets[_0x184f4d[_0x21a6a3(0x1e0)]][_0x21a6a3(0x23a)][_0x21a6a3(0x1cf)][_0x21a6a3(0x241)],_0x22f0eb=!_0x184f4d[_0x21a6a3(0x305)]?markets[_0x184f4d['symbol']]['limits'][_0x21a6a3(0x1cf)]['min']:markets[_0x184f4d['symbol']][_0x21a6a3(0x23a)][_0x21a6a3(0x265)]['min'],_0x117d95=truncateTradeAmount(_0x184f4d['symbol'],_0x184f4d[_0x21a6a3(0x1e6)]);_0x184f4d[_0x21a6a3(0x1e6)]=_0x117d95;if(Math[_0x21a6a3(0x2d5)](_0x117d95)<_0x3be30c)_0x54b093=![];if(Math[_0x21a6a3(0x2d5)](_0x117d95)*_0x184f4d[_0x21a6a3(0x2c9)]<_0x22f0eb)_0x54b093=![];if(_0x184f4d[_0x21a6a3(0x227)]==_0x21a6a3(0x1b7)){let _0x87b5cc=config['portfolio'][_0x21a6a3(0x248)](_0x39c590=>_0x39c590[_0x21a6a3(0x234)]==_0x184f4d['coin']);if(_0x87b5cc[_0x21a6a3(0x2df)]>0x0){if(Math[_0x21a6a3(0x2d5)](_0x117d95)>_0x184f4d[_0x21a6a3(0x26d)]-_0x87b5cc['offset'])_0x54b093=![];}else{if(Math[_0x21a6a3(0x2d5)](_0x117d95)>_0x184f4d['number'])_0x54b093=![];}}if(_0x184f4d['side']==_0x21a6a3(0x2da)){let _0x4e859c=config[_0x21a6a3(0x274)][_0x21a6a3(0x248)](_0x29962a=>_0x29962a[_0x21a6a3(0x234)]==config[_0x21a6a3(0x201)]),_0xe2ece=currentCoins['find'](_0x4c20f3=>_0x4c20f3[_0x21a6a3(0x234)]==config[_0x21a6a3(0x201)]);if(_0x4e859c[_0x21a6a3(0x2df)]>0x0){if(Math[_0x21a6a3(0x2d5)](_0x117d95)*_0x184f4d[_0x21a6a3(0x2c9)]>_0xe2ece['number']-_0x4e859c[_0x21a6a3(0x2df)])_0x54b093=![];}else{if(Math['abs'](_0x117d95)*_0x184f4d['last']>_0xe2ece[_0x21a6a3(0x26d)])_0x54b093=![];}}return _0x54b093;}async function getBalances(_0x3c9e2c=!![]){const _0x165c1f=_0xc617c9;let _0x368f3c=0x0,_0x5117b5;const _0xfe201e=config[_0x165c1f(0x1f0)];if(config[_0x165c1f(0x23e)]&&config[_0x165c1f(0x1a9)]<0x0)await validate24hChanges();currentCoins[_0x165c1f(0x278)](_0x55cc53=>{const _0x233a02=_0x165c1f;if(_0x55cc53[_0x233a02(0x234)]!=config[_0x233a02(0x201)]){let _0x536ede=global[_0x233a02(0x2bd)][noslash(_0x55cc53[_0x233a02(0x1e0)])];_0x5117b5=_0x55cc53[_0x233a02(0x305)]?0x1/_0x536ede:_0x536ede;}else _0x5117b5=0x1;let _0x2b45dc=_0x55cc53[_0x233a02(0x26d)]*_0x5117b5;_0x368f3c+=_0x2b45dc,_0x55cc53['last']=formatResult(Number(_0x5117b5),0x8),_0x55cc53[_0x233a02(0x2cb)]=_0x2b45dc;}),currentCoins[_0x165c1f(0x278)](_0x544bb0=>{const _0x669705=_0x165c1f;let _0x49a6cd=config[_0x669705(0x274)][_0x669705(0x248)](_0x59d666=>_0x59d666[_0x669705(0x234)]==_0x544bb0[_0x669705(0x234)]),_0x34b23d=Number(_0x49a6cd[_0x669705(0x1c9)]),_0x335a58=_0x544bb0[_0x669705(0x2cb)]/_0x368f3c*0x64,_0x43d4dd=_0x34b23d*_0x368f3c/0x64/_0x544bb0['last']-_0x544bb0['number'];_0x544bb0[_0x669705(0x1c9)]=formatResult(_0x335a58,0x3),_0x544bb0[_0x669705(0x29a)]=formatResult(_0x34b23d,0x3),_0x544bb0[_0x669705(0x1e6)]=formatResult(_0x43d4dd,0x8),_0x544bb0['side']='',_0x544bb0[_0x669705(0x2d0)]=![];if(_0x544bb0[_0x669705(0x234)]!=config['basecoin']){if(_0x544bb0[_0x669705(0x1c9)]>_0x34b23d)_0x544bb0[_0x669705(0x227)]=_0x669705(0x1b7),_0x544bb0['valid']=checkMinimums(_0x544bb0);else _0x544bb0[_0x669705(0x1c9)]<_0x34b23d&&(_0x544bb0[_0x669705(0x227)]=_0x669705(0x2da),_0x544bb0[_0x669705(0x2d0)]=checkMinimums(_0x544bb0));}_0x544bb0[_0x669705(0x1ea)]=_0x544bb0[_0x669705(0x1c9)]/_0x544bb0['target']-0x1;if(_0x544bb0[_0x669705(0x23d)]==_0x669705(0x29c)||_0x544bb0[_0x669705(0x23d)]==_0x669705(0x30a))_0x544bb0[_0x669705(0x23d)]=_0x669705(0x242);}),currentCoins[_0x165c1f(0x1a3)]((_0x3676c3,_0xc56bb8)=>_0x3676c3[_0x165c1f(0x1ea)]<_0xc56bb8[_0x165c1f(0x1ea)]?0x1:_0xc56bb8[_0x165c1f(0x1ea)]<_0x3676c3[_0x165c1f(0x1ea)]?-0x1:0x0);const _0x2af348=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2af348[_0x165c1f(0x254)],'usd':_0x2af348['usd'],'portfolio':JSON[_0x165c1f(0x2f3)](currentCoins),'threshold':_0xfe201e},proxyEmit(_0x165c1f(0x1c4),{'serverversion':serverversion,'balances':lastBalances});if(_0x3c9e2c){if(config[_0x165c1f(0x23e)])headlessMode({'portfolio':currentCoins,'threshold':_0xfe201e});else{if(lockOrders==ORDERS[_0x165c1f(0x1a2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xfe201e});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x263ba5=getNormalizedPerformance();getStartingBalances(_0x263ba5),emitPerformance(_0x263ba5);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x20af5a=getNormalizedPerformance();emitPerformance(_0x20af5a),getStartingBalances(_0x20af5a),logger[_0x165c1f(0x1e1)](_0x165c1f(0x20c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x339208=_0xc617c9;if(!lastBalances)return;let _0x39ff4a=[],_0x76412a,_0x1fc8f7=JSON[_0x339208(0x1f2)](lastBalances[_0x339208(0x274)]);_0x1fc8f7[_0x339208(0x1a3)]((_0x59910b,_0x5d2a74)=>_0x59910b[_0x339208(0x234)]>_0x5d2a74[_0x339208(0x234)]?0x1:_0x5d2a74['coin']>_0x59910b[_0x339208(0x234)]?-0x1:0x0),_0x1fc8f7[_0x339208(0x278)](_0x16d4e0=>{const _0x34c486=_0x339208;let _0x17e75f={'coin':_0x16d4e0[_0x34c486(0x234)],'number':_0x16d4e0[_0x34c486(0x26d)],'price':_0x16d4e0[_0x34c486(0x2c9)]};_0x39ff4a['push'](_0x17e75f);});const _0x51fef3=await getFiat();_0x76412a={'date':lastBalances[_0x339208(0x1cd)]['split']('\x20')[0x0],'eur':_0x51fef3[_0x339208(0x254)],'usd':_0x51fef3[_0x339208(0x2ae)],'coins':_0x39ff4a};let _0x355f0c=dbPerformance[_0x339208(0x204)]('data')[_0x339208(0x248)]({'date':_0x76412a[_0x339208(0x2f7)]})['value']();_0x355f0c?_0x76412a[_0x339208(0x2f7)]!=config['startdate']&&dbPerformance[_0x339208(0x204)](_0x339208(0x223))[_0x339208(0x248)]({'date':_0x76412a['date']})['assign'](_0x76412a)[_0x339208(0x1a4)]():dbPerformance['get'](_0x339208(0x223))[_0x339208(0x304)](_0x76412a)[_0x339208(0x1a4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x41dcc4=_0xc617c9;let _0x2ffa72=[];if(dbPerformance[_0x41dcc4(0x286)](_0x41dcc4(0x223))[_0x41dcc4(0x2cb)]()){let _0xbd486d=dbPerformance[_0x41dcc4(0x204)](_0x41dcc4(0x223))['cloneDeep']()[_0x41dcc4(0x1b1)](_0x28912d=>{const _0x48fcf2=_0x41dcc4;if(_0x28912d['coins'][_0x48fcf2(0x1a0)]==0x0)return![];else return!![];})[_0x41dcc4(0x2ac)](_0x41dcc4(0x2f7))[_0x41dcc4(0x2cb)](),_0x538971=[...config[_0x41dcc4(0x2c6)]];_0x538971['sort']((_0x410d46,_0x3396cd)=>_0x410d46['date']>_0x3396cd[_0x41dcc4(0x2f7)]?-0x1:_0x3396cd['date']>_0x410d46['date']?0x1:0x0);let _0x47c432=0x1,_0x2d90ac=[],_0x5bb555=0x0;_0xbd486d[_0x41dcc4(0x213)]()[_0x41dcc4(0x305)]()[_0x41dcc4(0x278)]((_0x5b17e9,_0x46604a)=>{const _0x48ff23=_0x41dcc4;if(_0x538971[_0x5bb555]){if(_0xbd486d[_0xbd486d['length']-_0x46604a]&&_0x538971[_0x5bb555][_0x48ff23(0x2f7)]==_0xbd486d[_0xbd486d[_0x48ff23(0x1a0)]-_0x46604a]['date']){if(_0x46604a<_0xbd486d['length']){let _0x74b364=0x0,_0x111830=0x0;_0xbd486d[_0xbd486d[_0x48ff23(0x1a0)]-_0x46604a]['coins']['forEach'](_0x37526e=>{const _0x138d9d=_0x48ff23;_0x111830+=_0x37526e[_0x138d9d(0x26d)]*_0x37526e[_0x138d9d(0x207)];}),_0x538971[_0x5bb555][_0x48ff23(0x2ce)][_0x48ff23(0x278)](_0x18cecb=>{const _0x2a8609=_0x48ff23;_0x74b364+=_0x18cecb[_0x2a8609(0x26d)]*_0x18cecb[_0x2a8609(0x207)];}),_0x47c432*=_0x74b364/(_0x111830-_0x74b364)+0x1;}_0x5bb555++;}}let _0x4be1d9=0x0;_0x5b17e9[_0x48ff23(0x1ce)][_0x48ff23(0x278)](_0x470889=>{const _0xa975ec=_0x48ff23;_0x4be1d9+=_0x470889[_0xa975ec(0x26d)]*_0x470889[_0xa975ec(0x207)];}),_0x2d90ac[_0xbd486d[_0x48ff23(0x1a0)]-_0x46604a-0x1]=_0x4be1d9*(_0x47c432-0x1);});let _0x2b7111=[];_0x538971=[...config[_0x41dcc4(0x2c6)]]||[];let _0x2f0e2f=0x0;_0x5bb555=0x0,_0xbd486d['forEach']((_0x24da84,_0x315f9e)=>{const _0x3a2f0a=_0x41dcc4;if(_0x538971[_0x5bb555]){const _0x29daa0=fns[_0x3a2f0a(0x1f2)](_0x538971[_0x5bb555][_0x3a2f0a(0x2f7)],_0x3a2f0a(0x190),new Date()),_0x13b5ac=fns['parse'](_0x24da84[_0x3a2f0a(0x2f7)],_0x3a2f0a(0x190),new Date());if(fns[_0x3a2f0a(0x184)](_0x29daa0,_0x13b5ac)){let _0x441fbd=0x0;_0x538971[_0x5bb555]['changes'][_0x3a2f0a(0x278)](_0x29344a=>{const _0x1160b8=_0x3a2f0a;!_0x2b7111[_0x29344a[_0x1160b8(0x234)]]?_0x2b7111[_0x29344a[_0x1160b8(0x234)]]=_0x29344a[_0x1160b8(0x26d)]:(_0x441fbd=_0x2b7111[_0x29344a[_0x1160b8(0x234)]],_0x2b7111[_0x29344a[_0x1160b8(0x234)]]+=_0x29344a[_0x1160b8(0x26d)]);const _0x3f84a6=_0x24da84['coins']['find'](_0x5ab934=>_0x5ab934[_0x1160b8(0x234)]==_0x29344a[_0x1160b8(0x234)]);(!_0x3f84a6||_0x3f84a6[_0x1160b8(0x26d)]==0x0)&&(_0x2f0e2f+=(-_0x29344a['number']-_0x441fbd)*_0x29344a['price']);}),_0x5bb555++;}}_0x24da84['coins'][_0x3a2f0a(0x278)]((_0x5778be,_0x6d9c22)=>{const _0x5339b0=_0x3a2f0a;_0x2b7111[_0x5778be[_0x5339b0(0x234)]]&&(_0x5778be[_0x5339b0(0x1ee)]=_0x2b7111[_0x5778be[_0x5339b0(0x234)]]);}),_0x2ffa72[_0x3a2f0a(0x304)]({'date':_0x24da84[_0x3a2f0a(0x2f7)],'eur':_0x24da84[_0x3a2f0a(0x254)],'usd':_0x24da84[_0x3a2f0a(0x2ae)],'offset':_0x2d90ac[_0x315f9e],'netoffset':_0x2f0e2f,'coins':_0x24da84[_0x3a2f0a(0x1ce)]});});}return _0x2ffa72;}function emitPerformance(_0x83423c){const _0xd28988=_0xc617c9;_0x83423c[_0xd28988(0x1a0)]!==0x0?(proxyEmit(_0xd28988(0x2d6),_0x83423c),lastPerformanceEmitted=getDate()):proxyEmit(_0xd28988(0x2d6),[]);}function getPerf(_0x1cd66c,_0x4f43aa){const _0x4fb401=_0xc617c9;let _0x51e699=0x0,_0x31fda3=0x0,_0x383e04=0x0;_0x1cd66c[_0x4fb401(0x1ce)][_0x4fb401(0x278)](_0x28291c=>{_0x51e699+=_0x28291c['number']*_0x28291c['price'];});_0x4f43aa&&(_0x51e699+=_0x1cd66c['offset']);if(config[_0x4fb401(0x201)]===_0x4fb401(0x18c)||config[_0x4fb401(0x201)]===_0x4fb401(0x1b4))_0x31fda3=_0x51e699*_0x1cd66c[_0x4fb401(0x254)],_0x383e04=_0x51e699*_0x1cd66c[_0x4fb401(0x2ae)];else{if(usdBasecoins[_0x4fb401(0x25e)](config[_0x4fb401(0x201)]))_0x31fda3=_0x51e699*_0x1cd66c[_0x4fb401(0x254)]/_0x1cd66c[_0x4fb401(0x2ae)],_0x383e04=_0x51e699;else config[_0x4fb401(0x201)]==='EUR'&&(_0x31fda3=_0x51e699,_0x383e04=_0x51e699*_0x1cd66c[_0x4fb401(0x2ae)]/_0x1cd66c[_0x4fb401(0x254)]);}return[_0x51e699,_0x31fda3,_0x383e04];}function getKPIs(_0x4562df,_0x13e562=_0xc617c9(0x262)){const _0x569280=_0xc617c9,_0x48638c=config[_0x569280(0x201)],_0x131318=lastBalances,_0xfd3dcb=currentCoins,_0x5113f2=getNormalizedPerformance(),_0x565528=_0x4562df===_0x569280(0x201)?_0x48638c:_0x4562df===_0x569280(0x239)||_0x4562df===_0x569280(0x1e5)?_0x13e562:_0x569280(0x1f3)+_0x48638c,_0x4947f6=_0x4562df===_0x569280(0x2cd)?'Net\x20effect':_0x4562df===_0x569280(0x1e5)?'Net\x20effect':_0x565528+_0x569280(0x261),_0x31c022=_0x4562df===_0x569280(0x2cd)||_0x4562df===_0x569280(0x1e5)?_0x569280(0x1a7):_0x565528+_0x569280(0x1eb);let _0x23dcdd=0x0;_0xfd3dcb['forEach'](_0x5d8e90=>{const _0x1984f6=_0x569280;_0x23dcdd+=_0x5d8e90[_0x1984f6(0x26d)]*_0x5d8e90[_0x1984f6(0x2c9)];});if(_0x4562df==='fiat'||_0x4562df===_0x569280(0x1e5)){if(_0x48638c==='BTC'||_0x48638c===_0x569280(0x1b4))_0x23dcdd=_0x23dcdd*(_0x13e562===_0x569280(0x262)?_0x131318[_0x569280(0x254)]:_0x131318[_0x569280(0x2ae)]);else{if(usdBasecoins[_0x569280(0x25e)](_0x48638c))_0x23dcdd=_0x23dcdd*(_0x13e562==='EUR'?_0x131318[_0x569280(0x254)]/_0x131318[_0x569280(0x2ae)]:0x1);else _0x48638c==='EUR'&&(_0x23dcdd=_0x23dcdd*(_0x13e562==='EUR'?0x1:_0x131318[_0x569280(0x2ae)]/_0x131318['eur']));}}let _0x1e0323;if(_0x23dcdd!==0x0){if(_0x4562df===_0x569280(0x201))_0x1e0323=(_0x23dcdd/startingBalances[_0x569280(0x201)]-0x1)*0x64;else{if(_0x13e562===_0x569280(0x262))_0x1e0323=(_0x23dcdd/startingBalances[_0x569280(0x254)]-0x1)*0x64;else _0x1e0323=(_0x23dcdd/startingBalances[_0x569280(0x2ae)]-0x1)*0x64;}let _0x2ef778=0x0;if(startingBalances[_0x569280(0x1ce)])_0xfd3dcb[_0x569280(0x278)](_0x1aaac5=>{const _0x4c1799=_0x569280;let _0x4fb910=startingBalances[_0x4c1799(0x1ce)][_0x4c1799(0x248)](_0x3bd502=>_0x3bd502[_0x4c1799(0x234)]===_0x1aaac5[_0x4c1799(0x234)]);if(_0x4fb910&&_0x4fb910[_0x4c1799(0x234)]&&_0x1aaac5[_0x4c1799(0x26d)]!==0x0)_0x2ef778+=_0x4fb910[_0x4c1799(0x26d)]*_0x1aaac5[_0x4c1799(0x2c9)];});let _0x16dab1=0x0;if(_0x5113f2['length']!==0x0){let _0x123151=_0x5113f2[_0x5113f2[_0x569280(0x1a0)]-0x1];_0x16dab1=_0x123151[_0x569280(0x1d6)];}_0x2ef778-=_0x16dab1;_0x4562df===_0x569280(0x2cd)&&(_0x1e0323=(_0x23dcdd-_0x2ef778)/startingBalances['basecoin']*0x64,_0x23dcdd=_0x23dcdd-_0x2ef778);if(_0x4562df===_0x569280(0x1e5)){let _0x58fff0=_0x13e562===_0x569280(0x262)?startingBalances[_0x569280(0x254)]:startingBalances[_0x569280(0x2ae)];if(_0x48638c===_0x569280(0x18c)||_0x48638c===_0x569280(0x1b4))_0x2ef778=_0x13e562===_0x569280(0x262)?_0x2ef778*_0x131318[_0x569280(0x254)]:_0x2ef778*_0x131318[_0x569280(0x2ae)];else{if(usdBasecoins['includes'](_0x48638c))_0x2ef778=_0x13e562===_0x569280(0x262)?_0x2ef778*_0x131318[_0x569280(0x254)]/_0x131318[_0x569280(0x2ae)]:_0x2ef778;else _0x48638c===_0x569280(0x262)&&(_0x2ef778=_0x13e562===_0x569280(0x262)?_0x2ef778:_0x2ef778*_0x131318[_0x569280(0x2ae)]/_0x131318[_0x569280(0x254)]);}_0x1e0323=(_0x23dcdd-_0x2ef778)/_0x58fff0*0x64,_0x23dcdd=_0x23dcdd-_0x2ef778;}if(_0x1e0323){if(_0x1e0323<0x64)_0x1e0323=_0x1e0323[_0x569280(0x1e2)](0x2);else{if(_0x1e0323<0x3e8)_0x1e0323=_0x1e0323[_0x569280(0x1e2)](0x1);else _0x1e0323=_0x1e0323[_0x569280(0x1e2)](0x0);}}else _0x1e0323=Number('0')['toFixed'](0x2);if(_0x23dcdd){if(Math[_0x569280(0x2d5)](_0x23dcdd)<0.000001)_0x23dcdd=_0x23dcdd[_0x569280(0x1e2)](0x2);else{if(Math[_0x569280(0x2d5)](_0x23dcdd)<0.1)_0x23dcdd=_0x23dcdd[_0x569280(0x1e2)](0x6);else{if(Math[_0x569280(0x2d5)](_0x23dcdd)<0x1)_0x23dcdd=_0x23dcdd[_0x569280(0x1e2)](0x5);else{if(Math[_0x569280(0x2d5)](_0x23dcdd)<0xa)_0x23dcdd=_0x23dcdd['toFixed'](0x4);else{if(Math['abs'](_0x23dcdd)<0x64)_0x23dcdd=_0x23dcdd[_0x569280(0x1e2)](0x3);else{if(Math[_0x569280(0x2d5)](_0x23dcdd)<0x3e8)_0x23dcdd=_0x23dcdd['toFixed'](0x2);else _0x23dcdd=_0x23dcdd[_0x569280(0x1e2)](0x2);}}}}}}else _0x23dcdd=Number('0')[_0x569280(0x1e2)](0x2);}else _0x1e0323=Number('0')['toFixed'](0x2);return{'value':_0x23dcdd,'change':_0x1e0323,'leftTxt':_0x4947f6,'rightTxt':_0x31c022};}async function getStartingBalances(_0x360b06,_0x55b1ce=!![]){const _0x4a2344=_0xc617c9;if(_0x360b06['length']!==0x0){const [_0x14c2bd,_0xe3fda3,_0x527eef]=getPerf(_0x360b06[0x0],!![]);let _0x54efc2=[];config[_0x4a2344(0x274)][_0x4a2344(0x278)](_0xddb52d=>{const _0x29822a=_0x4a2344;let _0x1d1a7c=0x0,_0x3708b3;config[_0x29822a(0x2c6)][_0x29822a(0x278)](_0x1acc30=>{const _0x21e27c=_0x29822a;let _0x3691df=_0x1acc30[_0x21e27c(0x2ce)][_0x21e27c(0x248)](_0x2ca6c4=>_0x2ca6c4[_0x21e27c(0x234)]==_0xddb52d[_0x21e27c(0x234)]);if(_0x3691df){_0x1d1a7c+=_0x3691df[_0x21e27c(0x26d)];if(!_0x3708b3)_0x3708b3=_0x3691df['price'];}}),_0x54efc2[_0x29822a(0x304)]({'coin':_0xddb52d[_0x29822a(0x234)],'number':_0x1d1a7c,'initialprice':_0x3708b3});});const _0x2acbab={'basecoin':_0x14c2bd,'eur':_0xe3fda3,'usd':_0x527eef,'coins':_0x54efc2};if(_0x55b1ce)proxyEmit('starting-balances',_0x2acbab);startingBalances=_0x2acbab;}}function headlessMode(_0x427a36){const _0x1909f1=_0xc617c9;let _0x55baa4=_0x427a36[_0x1909f1(0x274)],_0x288464=_0x427a36[_0x1909f1(0x1f0)],_0x47ae14=[];for(let _0x22874a of _0x55baa4){if(_0x22874a['coin']!=config[_0x1909f1(0x201)]){if(_0x22874a[_0x1909f1(0x1ea)]>=_0x288464/0x64){if(_0x22874a[_0x1909f1(0x2d0)])_0x47ae14[_0x1909f1(0x304)](_0x22874a);}else{if(_0x22874a[_0x1909f1(0x1ea)]<=-_0x288464/0x64){if(_0x22874a[_0x1909f1(0x2d0)])_0x47ae14[_0x1909f1(0x304)](_0x22874a);}}}}_0x47ae14['length']>0x0&&placeOrder(_0x47ae14);}function notifyBalance(_0x20e3e8){const _0x9d1c23=_0xc617c9;let _0x156f0c=_0x20e3e8[_0x9d1c23(0x274)],_0x48cd2c=_0x20e3e8[_0x9d1c23(0x1f0)],_0x41509a=[];for(let _0x5a306f of _0x156f0c){if(_0x5a306f[_0x9d1c23(0x234)]!=config['basecoin']){if(_0x5a306f['delta']>=_0x48cd2c/0x64){if(_0x5a306f[_0x9d1c23(0x2d0)])_0x41509a[_0x9d1c23(0x304)](_0x5a306f);}else{if(_0x5a306f['delta']<=-_0x48cd2c/0x64){if(_0x5a306f[_0x9d1c23(0x2d0)])_0x41509a['push'](_0x5a306f);}}}}if(_0x41509a[_0x9d1c23(0x1a0)]>0x0){let _0x491282=_0x41509a['map'](_0x1374c9=>_0x1374c9[_0x9d1c23(0x234)]);_0x491282[_0x9d1c23(0x1a3)]();let _0xcebac6=_0x491282['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x9d1c23(0x249),_0x9d1c23(0x2b0));lastCoinsToBalance=_0xcebac6;}}function symbolToCoin(_0x318746){const _0x8394a4=_0xc617c9;let _0x4172f3;if(_0x318746[_0x8394a4(0x25e)]('/'+config[_0x8394a4(0x201)]))_0x4172f3=_0x318746['replace']('/'+config['basecoin'],'');if(_0x318746['includes'](config[_0x8394a4(0x201)]+'/'))_0x4172f3=_0x318746['replace'](config[_0x8394a4(0x201)]+'/','');return _0x4172f3;}async function unlockOrders(){const _0x5a11ed=_0xc617c9;if(allOrdersPlaced&&lockOrders==ORDERS[_0x5a11ed(0x1d5)]){logger[_0x5a11ed(0x1e1)](_0x5a11ed(0x264)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x46447d=await getCoins();[currentCoins,currentCoinsAll]=_0x46447d,validateOrdersState=_0x5a11ed(0x1ee),persistOpenOrders([]),lockOrders=ORDERS[_0x5a11ed(0x1a2)],logger['debug'](_0x5a11ed(0x2f5));}}async function validateOrders(_0x2c310d){const _0x1a09c7=_0xc617c9;if(_0x2c310d)validateOrdersState=_0x2c310d;logger['debug'](_0x1a09c7(0x209)+validateOrdersState+_0x1a09c7(0x279)+(lockOrders==0x1?_0x1a09c7(0x2b1):lockOrders==0x2?_0x1a09c7(0x198):_0x1a09c7(0x303)));let _0x244052=[],_0x105c78=config[_0x1a09c7(0x309)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1a09c7(0x236)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x1a09c7(0x1e1)](_0x1a09c7(0x185)+validateOrdersState),lastOrders[_0x1a09c7(0x278)](_0x58bf67=>{const _0x3df5ca=_0x1a09c7;let _0x33c2f5=![];_0x58bf67[_0x3df5ca(0x29c)]>0x0&&(_0x33c2f5=!![]),_0x244052[_0x3df5ca(0x304)](_0x33c2f5),_0x33c2f5&&config[_0x3df5ca(0x309)]!='market'&&logHistory(_0x3df5ca(0x214),_0x3df5ca(0x24e)+_0x58bf67[_0x3df5ca(0x1e0)]+'\x20'+_0x58bf67[_0x3df5ca(0x227)]+'\x20#'+formatResult(_0x58bf67[_0x3df5ca(0x29c)],0x8)+'\x20@'+formatResult(_0x58bf67['price'],0x8));}),_0x244052[_0x1a09c7(0x278)]((_0x4f2c3f,_0x1cd6a4)=>{const _0xe036ba=_0x1a09c7;if(_0x4f2c3f)lastOrders[_0xe036ba(0x1d8)](_0x1cd6a4,0x1);}),persistOpenOrders(lastOrders);const _0x2a01ad=coolingDown?_0x1a09c7(0x218):_0x1a09c7(0x2e9);if(validateOrdersState=='initial'){validateOrdersState=_0x1a09c7(0x2a5);if(_0x244052['includes'](![])){if(config['ordertype']==_0x1a09c7(0x215)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x1a09c7(0x2a5)){if(_0x244052[_0x1a09c7(0x25e)](![])){}else{if(allOrdersPlaced){if(config[_0x1a09c7(0x309)]==_0x1a09c7(0x215)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x1a09c7(0x1fc))_0x244052['includes'](![])&&(config[_0x1a09c7(0x309)]=='market'?logHistory(_0x1a09c7(0x258),_0x1a09c7(0x298)+Math[_0x1a09c7(0x2c8)](_0x105c78*validateOrderInterval/0xea60)+_0x1a09c7(0x2d9)+_0x2a01ad):(await cancelOrders(),logHistory(_0x1a09c7(0x258),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x1a09c7(0x2c8)](_0x105c78*validateOrderInterval/0xea60)+_0x1a09c7(0x2d9)+_0x2a01ad))),await unlockOrders();else{if(validateOrdersState==_0x1a09c7(0x18f)){if(config[_0x1a09c7(0x309)]!=_0x1a09c7(0x215))logHistory(_0x1a09c7(0x258),_0x1a09c7(0x27c)+_0x2a01ad);await unlockOrders();}}}}}async function cancelOrders(){const _0x51daa8=_0xc617c9;lastOrders[_0x51daa8(0x278)](async _0x729c45=>{const _0x178784=_0x51daa8;try{const _0x963980=await exchange[_0x178784(0x2b7)](_0x729c45[_0x178784(0x2e1)],_0x729c45['symbol']);}catch(_0xea0cbc){if(_0xea0cbc[_0x178784(0x2fe)]()[_0x178784(0x25e)](_0x178784(0x2db))){}else await handleError(_0xea0cbc,_0x178784(0x26c));}});}async function initCoinResults(_0x246ff0){const _0x1a3c3c=_0xc617c9;_0x246ff0?logger[_0x1a3c3c(0x1e1)](_0x1a3c3c(0x2de)+_0x246ff0):logger[_0x1a3c3c(0x1e1)]('Initializing\x20coin\x20results'),config[_0x1a3c3c(0x274)][_0x1a3c3c(0x278)](_0x234aec=>{const _0x344eab=_0x1a3c3c;if(!_0x234aec['excluded']&&_0x234aec[_0x344eab(0x234)]!=config['basecoin']){const _0x51f846=currentCoins[_0x344eab(0x248)](_0x2ecfe5=>_0x2ecfe5['coin']==_0x234aec['coin']),_0x49e20f=global[_0x344eab(0x2bd)][noslash(_0x234aec[_0x344eab(0x1e0)])];let _0x8ed9fc=_0x51f846?_0x51f846[_0x344eab(0x26d)]:null,_0x3ea892=_0x234aec[_0x344eab(0x305)]?0x1/_0x49e20f:_0x49e20f,_0x67e9d1;config[_0x344eab(0x2c6)][_0x344eab(0x278)](_0x5ace68=>{const _0x29817e=_0x344eab;!_0x67e9d1&&(_0x67e9d1=_0x5ace68[_0x29817e(0x2ce)][_0x29817e(0x248)](_0x4e2ed5=>_0x4e2ed5['coin']==_0x234aec[_0x29817e(0x234)]),_0x67e9d1&&(_0x8ed9fc=_0x67e9d1[_0x29817e(0x26d)],_0x3ea892=_0x67e9d1['price']));});let _0x1d6b80=dbCoinResults['get'](_0x344eab(0x1ce))[_0x344eab(0x248)]({'coin':_0x234aec['coin']})[_0x344eab(0x2cb)]();if(!_0x1d6b80){const _0x1c1f88={'coin':_0x234aec[_0x344eab(0x234)],'number':_0x8ed9fc,'breakeven':_0x3ea892,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x344eab(0x204)](_0x344eab(0x1ce))[_0x344eab(0x304)](_0x1c1f88)[_0x344eab(0x1a4)]();}else{if(_0x246ff0&&_0x234aec[_0x344eab(0x234)]==_0x246ff0){const _0x2f089d={'coin':_0x234aec[_0x344eab(0x234)],'number':_0x8ed9fc,'breakeven':_0x3ea892,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')[_0x344eab(0x248)]({'coin':_0x234aec[_0x344eab(0x234)]})[_0x344eab(0x30b)](_0x2f089d)[_0x344eab(0x1a4)]();}}}});}async function updateCoinResults(_0x48e835,_0x5dc0a7=![]){const _0x3f2e56=_0xc617c9;let _0x3ad9d3,_0x4af447,_0x3d3892,_0x43d79b,_0x1a99a6,_0x15497e,_0x53c7a0=dbCoinResults[_0x3f2e56(0x204)]('coins')['find']({'coin':_0x48e835[_0x3f2e56(0x234)]})[_0x3f2e56(0x2cb)](),_0x1fb1a4=![];Object[_0x3f2e56(0x299)](_0x53c7a0)[_0x3f2e56(0x278)](([_0x5ec21c,_0x2bc29a])=>{if(_0x2bc29a==null)_0x1fb1a4=!![];});(!_0x53c7a0||_0x1fb1a4)&&(await initCoinResults(_0x48e835[_0x3f2e56(0x234)]),_0x53c7a0=dbCoinResults[_0x3f2e56(0x204)]('coins')[_0x3f2e56(0x248)]({'coin':_0x48e835[_0x3f2e56(0x234)]})['value']());_0x48e835[_0x3f2e56(0x305)]&&(_0x15497e={'filled':_0x48e835[_0x3f2e56(0x29c)]*_0x48e835['price'],'amount':_0x48e835[_0x3f2e56(0x29c)]*_0x48e835['price'],'side':_0x48e835[_0x3f2e56(0x227)]==_0x3f2e56(0x1b7)?_0x3f2e56(0x2da):_0x3f2e56(0x1b7),'price':0x1/_0x48e835[_0x3f2e56(0x207)]},_0x48e835={..._0x48e835,..._0x15497e});_0x5dc0a7?_0x4af447=_0x48e835[_0x3f2e56(0x227)]==_0x3f2e56(0x2da)?_0x53c7a0['number']+_0x48e835['filled']:_0x53c7a0[_0x3f2e56(0x26d)]-_0x48e835[_0x3f2e56(0x29c)]:_0x4af447=await getCoinNumber(_0x48e835[_0x3f2e56(0x234)]);if(_0x48e835[_0x3f2e56(0x2a6)]&&_0x48e835[_0x3f2e56(0x2a6)]['currency']==config[_0x3f2e56(0x201)])_0x3ad9d3=_0x48e835[_0x3f2e56(0x2a6)][_0x3f2e56(0x1cf)];else{if(_0x48e835[_0x3f2e56(0x2a6)]&&_0x48e835[_0x3f2e56(0x2a6)][_0x3f2e56(0x1f8)]==_0x3f2e56(0x30f)&&!_0x5dc0a7)_0x3ad9d3=_0x48e835[_0x3f2e56(0x2a6)]['cost']*global[_0x3f2e56(0x2bd)][_0x3f2e56(0x30f)+config[_0x3f2e56(0x201)]];else _0x3ad9d3=defaultFee*_0x48e835['filled']*_0x48e835[_0x3f2e56(0x207)];}_0x48e835['side']==_0x3f2e56(0x2da)?(_0x3d3892=_0x4af447!=0x0?(_0x53c7a0[_0x3f2e56(0x2f0)]*_0x53c7a0['number']+_0x48e835['price']*(_0x4af447-_0x53c7a0[_0x3f2e56(0x26d)])+_0x3ad9d3)/_0x4af447:0x0,_0x43d79b=_0x53c7a0['realized']):(_0x3d3892=_0x4af447!=0x0?(_0x53c7a0[_0x3f2e56(0x2f0)]*_0x53c7a0[_0x3f2e56(0x26d)]-_0x48e835[_0x3f2e56(0x207)]*(_0x53c7a0[_0x3f2e56(0x26d)]-_0x4af447)+_0x3ad9d3)/_0x4af447:0x0,_0x43d79b=_0x53c7a0[_0x3f2e56(0x2a3)]+(_0x48e835[_0x3f2e56(0x207)]-_0x53c7a0[_0x3f2e56(0x2f0)])*_0x48e835[_0x3f2e56(0x29c)]);_0x1a99a6=(_0x48e835['price']-_0x3d3892-_0x3ad9d3/_0x48e835[_0x3f2e56(0x29c)])*_0x4af447;let _0x2d5d79={'coin':_0x48e835[_0x3f2e56(0x234)],'number':_0x4af447,'breakeven':formatResult(_0x3d3892,0x8),'realized':formatResult(_0x43d79b,0x8),'unrealized':formatResult(_0x1a99a6,0x8),'fees':formatResult(_0x53c7a0['fees']+_0x3ad9d3,0x8),'sells':_0x48e835[_0x3f2e56(0x227)]==_0x3f2e56(0x1b7)?_0x53c7a0[_0x3f2e56(0x251)]+0x1:_0x53c7a0['sells'],'buys':_0x48e835[_0x3f2e56(0x227)]==_0x3f2e56(0x2da)?_0x53c7a0[_0x3f2e56(0x28d)]+0x1:_0x53c7a0[_0x3f2e56(0x28d)]};dbCoinResults[_0x3f2e56(0x204)](_0x3f2e56(0x1ce))[_0x3f2e56(0x248)]({'coin':_0x48e835[_0x3f2e56(0x234)]})[_0x3f2e56(0x30b)](_0x2d5d79)[_0x3f2e56(0x1a4)]();if(!_0x5dc0a7){if(_0x48e835[_0x3f2e56(0x2a6)]&&_0x48e835[_0x3f2e56(0x2a6)][_0x3f2e56(0x1f8)]==_0x3f2e56(0x30f)){const _0x7bd36=currentCoins[_0x3f2e56(0x248)](_0x5a55e2=>_0x5a55e2[_0x3f2e56(0x234)]=='BNB');if(_0x7bd36){let _0x49a3a6=dbCoinResults[_0x3f2e56(0x204)](_0x3f2e56(0x1ce))[_0x3f2e56(0x248)]({'coin':_0x3f2e56(0x30f)})[_0x3f2e56(0x2cb)]();_0x2d5d79={..._0x49a3a6,'number':_0x7bd36[_0x3f2e56(0x26d)]},dbCoinResults[_0x3f2e56(0x204)](_0x3f2e56(0x1ce))[_0x3f2e56(0x248)]({'coin':_0x3f2e56(0x30f)})['assign'](_0x2d5d79)[_0x3f2e56(0x1a4)]();}}}}async function placeOrder(_0x1ae446){const _0x4b04ce=_0xc617c9,_0x52004b=config[_0x4b04ce(0x309)]==_0x4b04ce(0x215)?_0x4b04ce(0x215):_0x4b04ce(0x2e3);if(lockOrders==ORDERS[_0x4b04ce(0x1a2)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4b04ce(0x1d5)],allOrdersPlaced=![],validateOrdersState=_0x4b04ce(0x1ee);let _0x30bfa2=![];lastOrders=[];for(const _0x21edcb of _0x1ae446){let _0x45cc7e,_0x2fa6b7,_0x593f38,_0x3a5722,_0x2f64f8,_0x802608=_0x21edcb[_0x4b04ce(0x1e0)];try{const _0x25daa0=await exchange[_0x4b04ce(0x2d7)](_0x802608);_0x45cc7e=_0x21edcb['reverse']?0x1/_0x21edcb[_0x4b04ce(0x2c9)]:_0x21edcb[_0x4b04ce(0x2c9)],_0x2fa6b7=_0x25daa0[_0x4b04ce(0x267)],_0x593f38=_0x25daa0[_0x4b04ce(0x2eb)];_0x21edcb[_0x4b04ce(0x305)]?(_0x3a5722=_0x21edcb[_0x4b04ce(0x227)]=='buy'?_0x4b04ce(0x1b7):_0x4b04ce(0x2da),_0x2f64f8=Math['abs'](_0x21edcb[_0x4b04ce(0x1e6)])/_0x45cc7e):(_0x3a5722=_0x21edcb[_0x4b04ce(0x227)],_0x2f64f8=Math[_0x4b04ce(0x2d5)](_0x21edcb[_0x4b04ce(0x1e6)]));_0x52004b==_0x4b04ce(0x2e3)&&(config['ordertype']==_0x4b04ce(0x1c7)&&(_0x45cc7e=_0x3a5722==_0x4b04ce(0x2da)?_0x2fa6b7:_0x593f38),config[_0x4b04ce(0x309)]==_0x4b04ce(0x2a1)&&(_0x45cc7e=_0x3a5722=='buy'?_0x593f38:_0x2fa6b7));_0x2f64f8=formatResult(_0x2f64f8,0x8),_0x45cc7e=formatResult(_0x45cc7e,0x8);const _0x2bac60=_0x3a5722=='sell'?config[_0x4b04ce(0x2d8)]?String[_0x4b04ce(0x23f)]('0x'+config[_0x4b04ce(0x2d8)])+'\x20':'':config[_0x4b04ce(0x24a)]?String[_0x4b04ce(0x23f)]('0x'+config[_0x4b04ce(0x24a)])+'\x20':'',_0x3427dd=_0x52004b==_0x4b04ce(0x215)?'Market':config['ordertype']=='limit-high'?_0x4b04ce(0x28b):'Limit\x20(low-margin)',_0x667036=(Math[_0x4b04ce(0x203)](Math[_0x4b04ce(0x256)]()*0x35a4e900)+0x5f5e100)[_0x4b04ce(0x2fe)]();lastOrders[_0x4b04ce(0x304)]({'customId':_0x667036,'symbol':_0x802608,'coin':_0x21edcb[_0x4b04ce(0x234)],'amount':_0x2f64f8,'price':_0x45cc7e,'side':_0x3a5722,'reverse':_0x21edcb[_0x4b04ce(0x305)],'filled':0x0});if(_0x52004b=='market')logHistory(_0x4b04ce(0x214),''+_0x2bac60+_0x3427dd+_0x4b04ce(0x27b)+_0x802608+'\x20'+_0x3a5722+'\x20#'+formatResult(_0x2f64f8,0x8)+'\x20@'+formatResult(_0x45cc7e,0x8));else logHistory(_0x4b04ce(0x214),''+_0x2bac60+_0x3427dd+_0x4b04ce(0x27b)+_0x802608+'\x20'+_0x3a5722+'\x20#'+formatResult(_0x2f64f8,0x8)+'\x20@'+formatResult(_0x45cc7e,0x8));const _0x5f1aaf=await exchange[_0x4b04ce(0x2ef)](_0x802608,_0x52004b,_0x3a5722,_0x2f64f8,_0x45cc7e);logger[_0x4b04ce(0x1e1)](_0x4b04ce(0x270)+_0x5f1aaf['id']+_0x4b04ce(0x18b)+_0x667036);const _0x24f82b=lastOrders[_0x4b04ce(0x1a0)]-0x1;if(_0x24f82b>=0x0&&lastOrders[_0x24f82b]['customId']==_0x667036){lastOrders[_0x24f82b][_0x4b04ce(0x2e1)]=_0x5f1aaf['id'];if(_0x5f1aaf[_0x4b04ce(0x265)])lastOrders[_0x24f82b][_0x4b04ce(0x265)]=_0x5f1aaf[_0x4b04ce(0x265)];if(_0x5f1aaf['price'])lastOrders[_0x24f82b]['price']=_0x5f1aaf[_0x4b04ce(0x207)];lastOrders[_0x24f82b][_0x4b04ce(0x2a6)]=_0x5f1aaf[_0x4b04ce(0x2a6)];}if(config[_0x4b04ce(0x1c6)]!=0x0){let _0xc8b51a=null;if(cooldownTracker[_0x4b04ce(0x1a0)]==config[_0x4b04ce(0x1c6)]-0x1)_0xc8b51a=cooldownTracker[_0x4b04ce(0x306)]();const _0x3cdd79=getTimeStamp();cooldownTracker[_0x4b04ce(0x304)](_0x3cdd79);if(_0xc8b51a){const _0x22c06a=fns[_0x4b04ce(0x232)](new Date(_0x3cdd79),new Date(_0xc8b51a));if(_0x22c06a<cooldownInterval){logHistory('error','Executed\x20'+config[_0x4b04ce(0x1c6)]+_0x4b04ce(0x23b)+cooldownInterval/0x3c+_0x4b04ce(0x24d)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x4c76ba){if(_0x4c76ba[_0x4b04ce(0x2fe)]()[_0x4b04ce(0x25e)](_0x4b04ce(0x272)))lastOrders=lastOrders['filter'](_0x33efa0=>_0x33efa0[_0x4b04ce(0x1e0)]!=_0x802608),logHistory(_0x4b04ce(0x2b4),_0x4b04ce(0x2c4)+_0x802608),_0x30bfa2=!![];else{if(_0x4c76ba[_0x4b04ce(0x2fe)]()[_0x4b04ce(0x25e)](_0x4b04ce(0x1f5)))lastOrders=lastOrders[_0x4b04ce(0x1b1)](_0x28c22c=>_0x28c22c[_0x4b04ce(0x1e0)]!=_0x802608),logHistory(_0x4b04ce(0x2b4),'Order\x20amount\x20is\x20invalid:\x20'+_0x802608),_0x30bfa2=!![];else{if(_0x4c76ba[_0x4b04ce(0x2fe)]()[_0x4b04ce(0x25e)](_0x4b04ce(0x27a)))lastOrders=lastOrders['filter'](_0x3c43d7=>_0x3c43d7[_0x4b04ce(0x1e0)]!=_0x802608),logHistory(_0x4b04ce(0x2b4),'Order\x20is\x20invalid:\x20'+_0x802608),_0x30bfa2=!![];else _0x4c76ba['toString']()['includes'](_0x4b04ce(0x27f))?(lastOrders=lastOrders['filter'](_0x1114bf=>_0x1114bf['symbol']!=_0x802608),logHistory(_0x4b04ce(0x2b4),_0x4b04ce(0x2c4)+_0x802608),_0x30bfa2=!![]):(lastOrders=lastOrders[_0x4b04ce(0x1b1)](_0x2fd8fb=>_0x2fd8fb['symbol']!=_0x802608),await handleError(_0x4c76ba,_0x4b04ce(0x26f),_0x802608));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4b04ce(0x1a0)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x25f3e5=config['ordertype']==_0x4b04ce(0x215)?validateOrderTimeout*0x3c*0x3e8:config[_0x4b04ce(0x236)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xe8fae9=_0x4b04ce;validateOrders(_0xe8fae9(0x1fc));},_0x25f3e5);}else unlockOrders();_0x30bfa2&&config[_0x4b04ce(0x23e)]&&await pauseBot(_0x4b04ce(0x235)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4b04ce(0x258),_0x4b04ce(0x2f6)));}else{if(coolingDown)!config[_0x4b04ce(0x23e)]&&logHistory(_0x4b04ce(0x2b4),_0x4b04ce(0x19e));else lockOrders!=ORDERS[_0x4b04ce(0x1a2)]&&(!config[_0x4b04ce(0x23e)]&&(config[_0x4b04ce(0x309)]=='market'?logHistory(_0x4b04ce(0x2b4),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x4b04ce(0x2b4),_0x4b04ce(0x208))));}}function persistOpenOrders(_0x4de2a5){const _0x337c2f=_0xc617c9,_0x23d375={...config,'openOrders':_0x4de2a5};let _0x2a5b33=dbConfig[_0x337c2f(0x204)](_0x337c2f(0x2ee))[_0x337c2f(0x248)]({'botID':botID})[_0x337c2f(0x2cb)]();_0x2a5b33&&dbConfig[_0x337c2f(0x204)](_0x337c2f(0x2ee))['find']({'botID':botID})[_0x337c2f(0x30b)](_0x23d375)[_0x337c2f(0x1a4)]();}function restoreOrders(){const _0x5ce6e7=_0xc617c9;let _0x45924f;config['openOrders']&&allOpenOrders[_0x5ce6e7(0x278)](_0xf87aa8=>{const _0x35b244=_0x5ce6e7,_0xf8f06=config['openOrders'][_0x35b244(0x248)](_0x5ac8f9=>_0x5ac8f9[_0x35b244(0x2e1)]==_0xf87aa8['id']);_0xf8f06&&(lastOrders[_0x35b244(0x304)](_0xf8f06),_0x45924f=_0xf87aa8['timestamp']);});if(lastOrders[_0x5ce6e7(0x1a0)]>0x0){lockOrders=ORDERS[_0x5ce6e7(0x1d5)],validateOrdersState=_0x5ce6e7(0x2a5),allOrdersPlaced=!![];const _0x279a3c=new Date()[_0x5ce6e7(0x191)](),_0x3b5a6d=config[_0x5ce6e7(0x309)]==_0x5ce6e7(0x215)?validateOrderTimeout*0x3c*0x3e8:config[_0x5ce6e7(0x236)]*0x3c*0x3e8;if(_0x45924f+_0x3b5a6d>_0x279a3c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x34e65c=_0x5ce6e7;validateOrders(_0x34e65c(0x1fc));},_0x45924f+_0x3b5a6d-_0x279a3c);}else validateOrders(_0x5ce6e7(0x1fc));}}async function sendMetricsTelegram(){const _0x25087b=_0xc617c9;if(!coinsLoaded){process[_0x25087b(0x2c3)]({'telegrammsg':_0x25087b(0x29f)},_0x46ad05=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x551166='';if(config[_0x25087b(0x312)])_0x551166='<b>'+config[_0x25087b(0x25f)]+_0x25087b(0x1d1);else _0x551166='<b>Bot\x20'+botID+_0x25087b(0x1d1);const _0x2629ca=getKPIs('basecoin'),_0x2e78b8=getKPIs('fiat',config[_0x25087b(0x239)]),_0x9faf26=getKPIs(_0x25087b(0x2cd)),_0x5678b8=getKPIs(_0x25087b(0x1e5),config[_0x25087b(0x239)]);_0x551166+=_0x25087b(0x1e4),_0x551166+=_0x2629ca[_0x25087b(0x244)]+'\x20:\x20'+_0x2629ca[_0x25087b(0x2cb)]+'\x0a',_0x551166+=_0x2629ca[_0x25087b(0x289)]+':\x20'+_0x2629ca[_0x25087b(0x1bb)]+'%\x0a',_0x551166+=_0x2e78b8[_0x25087b(0x244)]+_0x25087b(0x2ab)+_0x2e78b8[_0x25087b(0x2cb)]+'\x0a',_0x551166+=_0x2e78b8[_0x25087b(0x289)]+':\x20'+_0x2e78b8[_0x25087b(0x1bb)]+'%\x0a',_0x551166+=_0x9faf26['leftTxt']+':\x20'+_0x9faf26[_0x25087b(0x2cb)]+'\x20('+config[_0x25087b(0x201)]+')\x0a',_0x551166+=_0x9faf26[_0x25087b(0x289)]+':\x20'+_0x9faf26['change']+_0x25087b(0x2bc)+config['basecoin']+')\x0a',_0x551166+=_0x5678b8[_0x25087b(0x244)]+':\x20'+_0x5678b8[_0x25087b(0x2cb)]+'\x20('+config[_0x25087b(0x239)]+')\x0a',_0x551166+=_0x5678b8['rightTxt']+':\x20'+_0x5678b8[_0x25087b(0x1bb)]+'%\x20('+config[_0x25087b(0x239)]+')\x0a',_0x551166+=_0x25087b(0x1ae),process['send']({'telegrammsg':_0x551166},_0x283b9f=>{});}async function sendPortfolioTelegram(){const _0x19ee80=_0xc617c9;if(!coinsLoaded){process[_0x19ee80(0x2c3)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4455f9=>{});return;}let _0x587c2c='';if(config['showname'])_0x587c2c='<b>'+config[_0x19ee80(0x25f)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x587c2c=_0x19ee80(0x310)+botID+_0x19ee80(0x26e);_0x587c2c+=_0x19ee80(0x1e4),_0x587c2c+=_0x19ee80(0x1c3),_0x587c2c+=_0x19ee80(0x2a8),_0x587c2c+=_0x19ee80(0x1c3),currentCoins[_0x19ee80(0x278)](_0x4cebf3=>{const _0x4a3490=_0x19ee80;_0x587c2c+=_0x4cebf3['coin'][_0x4a3490(0x187)](0x7)+'|\x20'+formatPad(_0x4cebf3[_0x4a3490(0x1c9)],0x2,0x6)+'|\x20'+formatPad(_0x4cebf3[_0x4a3490(0x29a)],0x2,0x6)+'|\x20'+formatPad(_0x4cebf3['delta']*0x64,0x2,0x6)+'\x0a';}),_0x587c2c+='</pre>',process[_0x19ee80(0x2c3)]({'telegrammsg':_0x587c2c},_0x2ef49e=>{});}function formatPad(_0x1477d6,_0x500913,_0x2181f2){const _0x2118de=_0xc617c9,_0x53d530=formatResultString(_0x1477d6,_0x500913);return _0x53d530?_0x53d530[_0x2118de(0x1a1)](_0x2181f2):''['padStart'](_0x2181f2);}function logHistory(_0x31e94e,_0x3cc6e0,_0x558920=''){const _0xca435=_0xc617c9;let _0x586bf3={'time':getTimeStamp(),'type':_0x31e94e,'event':_0x3cc6e0};dbLogs['get'](_0xca435(0x1fe))['push'](_0x586bf3)['write']();if(_0x558920=='')_0x558920=_0x3cc6e0;proxyEmit(_0xca435(0x247),{'log':_0x586bf3,'summary':_0x558920}),process[_0xca435(0x2c3)]({'telegram':{..._0x586bf3,'botname':config[_0xca435(0x25f)],'showname':config['showname']}},_0x499f59=>{}),logger[_0xca435(0x238)](''+_0x586bf3['event']);}function emitHistory(_0x4b509b={}){const _0x37d8cc=_0xc617c9;Object[_0x37d8cc(0x1cb)](_0x4b509b)[_0x37d8cc(0x1a0)]==0x0&&(_0x4b509b={'type':['order',_0x37d8cc(0x247)],'event':'','page':0x1});if(_0x4b509b[_0x37d8cc(0x1c2)][_0x37d8cc(0x25e)](_0x37d8cc(0x247)))_0x4b509b[_0x37d8cc(0x1c2)][_0x37d8cc(0x1d8)](_0x4b509b['type'][_0x37d8cc(0x2e2)](_0x37d8cc(0x247)),0x1,_0x37d8cc(0x2b4),_0x37d8cc(0x249),'success');if(dbLogs[_0x37d8cc(0x286)]('logs')[_0x37d8cc(0x2cb)]()){let _0x3f9679=dbLogs['get'](_0x37d8cc(0x1fe))['filter'](_0x55e466=>{const _0x559a6f=_0x37d8cc;if(_0x4b509b[_0x559a6f(0x1c2)][_0x559a6f(0x1a0)]==0x0)return![];else return _0x4b509b[_0x559a6f(0x1c2)][_0x559a6f(0x25e)](_0x55e466['type']);})[_0x37d8cc(0x1b1)](_0x2ccf16=>{const _0x517c3c=_0x37d8cc;if(_0x4b509b[_0x517c3c(0x247)]=='')return!![];else return _0x2ccf16['event']['toLowerCase']()['includes'](_0x4b509b[_0x517c3c(0x247)][_0x517c3c(0x1bd)]());})[_0x37d8cc(0x2ac)](_0x37d8cc(0x1cd)),_0x55be5f=_0x3f9679[_0x37d8cc(0x2cb)]()['length'];_0x3f9679=_0x3f9679['reverse']()[_0x37d8cc(0x213)]((_0x4b509b['page']-0x1)*logPageSize,_0x4b509b[_0x37d8cc(0x20a)]*logPageSize-0x1)[_0x37d8cc(0x305)]()[_0x37d8cc(0x2cb)](),proxyEmit('event-history',{'logs':_0x3f9679,'total':_0x55be5f});}else proxyEmit(_0x37d8cc(0x2ba),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x44b51b){const _0x2ff755=_0xc617c9;if(dbLogs[_0x2ff755(0x286)](_0x2ff755(0x1fe))['value']()){const _0x4be842=dbLogs[_0x2ff755(0x204)]('logs')[_0x2ff755(0x2ac)](_0x2ff755(0x1cd))[_0x2ff755(0x1b1)](_0x40f489=>{const _0x2772a4=_0x2ff755;return _0x40f489[_0x2772a4(0x1c2)]==_0x2772a4(0x214);})[_0x2ff755(0x2cb)]();dbLogs[_0x2ff755(0x204)](_0x2ff755(0x1fe))['remove']()[_0x2ff755(0x1a4)](),dbLogs['get'](_0x2ff755(0x1fe))[_0x2ff755(0x30b)](_0x4be842)['write'](),emitHistory(_0x44b51b);}}async function pauseBot(_0x53d72d=''){const _0x52d256=_0xc617c9,_0x11d572=new Date()[_0x52d256(0x191)]();if(!lastErrorShown||_0x11d572-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x11d572;!lastBotPause?(lastBotPause=_0x11d572,consecutivePauses=0x1):(_0x11d572-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x52d256(0x2c3)]({'stop':'restart'},_0x581fdc=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x52d256(0x191)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x53d72d)_0x53d72d+='\x20|\x20';logHistory(_0x52d256(0x2b4),_0x53d72d+_0x52d256(0x257)+pauseBotInterval/0xea60+_0x52d256(0x1c8)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x24cd44=_0xc617c9;process[_0x24cd44(0x2c3)]({'stop':'kill'},_0xc99243=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x39d856,_0x153884){const _0x146e58=_0xc617c9;if(_0x39d856[_0x146e58(0x2fe)]()['includes'](_0x146e58(0x269)))return logHistory(_0x146e58(0x2b4),config[_0x146e58(0x2fa)]+_0x146e58(0x197)),![];else{if(_0x39d856[_0x146e58(0x2fe)]()[_0x146e58(0x25e)](_0x146e58(0x1c0)))return logHistory(_0x146e58(0x2b4),config[_0x146e58(0x2fa)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x39d856[_0x146e58(0x2fe)]()[_0x146e58(0x25e)](_0x146e58(0x225)))return logHistory(_0x146e58(0x2b4),config[_0x146e58(0x2fa)]+_0x146e58(0x230)),logHistory(_0x146e58(0x2b4),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x39d856,_0x153884);}}}async function handleError(_0x4d27db,_0x4c4208,_0x53d9fd=''){const _0x18ae46=_0xc617c9,_0x400834=config['exchange']||'Exchange';if(_0x4d27db['toString']()[_0x18ae46(0x25e)](_0x18ae46(0x28c))||_0x4d27db['toString']()['includes'](_0x18ae46(0x22a)))await pauseBot(config[_0x18ae46(0x2fa)]+_0x18ae46(0x2be));else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x2b2))||_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x199)))await pauseBot(config['exchange']+_0x18ae46(0x292));else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x23c)))await pauseBot(config[_0x18ae46(0x2fa)]+_0x18ae46(0x22f));else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x1d4)))await pauseBot(config['exchange']+_0x18ae46(0x1a8));else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x1b5)))logHistory(_0x18ae46(0x2b4),_0x4c4208+_0x18ae46(0x26a)),logHistory(_0x18ae46(0x2b4),_0x18ae46(0x19c)),await killBot();else{if(_0x4d27db['toString']()[_0x18ae46(0x25e)](_0x18ae46(0x259)))logHistory(_0x18ae46(0x2b4),_0x4c4208+_0x18ae46(0x2cc)),logHistory('error',_0x18ae46(0x19c)),await killBot();else{if(_0x4d27db instanceof ccxt[_0x18ae46(0x250)])logger[_0x18ae46(0x1e1)](_0x18ae46(0x210),_0x4d27db),await pauseBot(config['exchange']+'\x20network\x20error');else{if(_0x4d27db[_0x18ae46(0x2fe)]()['includes'](_0x18ae46(0x269)))logHistory('error',_0x4c4208+_0x18ae46(0x1cc)+config[_0x18ae46(0x2fa)]+_0x18ae46(0x2f2)),logHistory(_0x18ae46(0x2b4),_0x18ae46(0x19c)),await killBot();else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x1c0)))logHistory(_0x18ae46(0x2b4),_0x4c4208+_0x18ae46(0x1cc)+config[_0x18ae46(0x2fa)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x18ae46(0x2b4),_0x18ae46(0x19c)),await killBot();else{if(_0x4d27db[_0x18ae46(0x2fe)]()[_0x18ae46(0x25e)](_0x18ae46(0x225)))logHistory('error',_0x4c4208+_0x18ae46(0x1cc)+config[_0x18ae46(0x2fa)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x18ae46(0x2b4),_0x18ae46(0x19c)),await killBot();else{if(_0x4d27db['toString']()['includes']('InsufficientFunds'))logHistory('error',_0x4c4208+_0x18ae46(0x1ef)+_0x53d9fd);else _0x4d27db instanceof ccxt['ExchangeError']?(logger[_0x18ae46(0x1e1)](_0x18ae46(0x1ac),_0x4d27db),logHistory(_0x18ae46(0x2b4),_0x4c4208+'\x20|\x20'+config['exchange']+'\x20exchange\x20error')):(logger[_0x18ae46(0x238)](_0x4c4208+_0x18ae46(0x20b),_0x4d27db),await pauseBot(_0x18ae46(0x1be)));}}}}}}}}}}}function formatResult(_0x4f991e,_0x21b914){return parseFloat(_0x4f991e['toFixed'](_0x21b914));}function formatResultTruncate(_0x23e7c5,_0x2d5a67){const _0x3397e2=_0xc617c9;let _0x5649c4=formatResultString(_0x23e7c5,0xa),_0x32cd8e=_0x5649c4[_0x3397e2(0x2e2)]('.');return _0x32cd8e!=-0x1&&(_0x5649c4=_0x5649c4[_0x3397e2(0x213)](0x0,_0x32cd8e+_0x2d5a67+0x1)),Number(_0x5649c4);}function formatResultString(_0x1c4cba,_0x2326a6){const _0x39a1d9=_0xc617c9;let _0x302fdb;if(!(''+_0x1c4cba)[_0x39a1d9(0x25e)]('e'))_0x302fdb=+(Math[_0x39a1d9(0x2c8)](_0x1c4cba+'e+'+_0x2326a6)+'e-'+_0x2326a6);else{let _0x4b13f1=(''+_0x1c4cba)[_0x39a1d9(0x1ca)]('e'),_0x16dfa0='';+_0x4b13f1[0x1]+_0x2326a6>0x0&&(_0x16dfa0='+'),_0x302fdb=+(Math[_0x39a1d9(0x2c8)](+_0x4b13f1[0x0]+'e'+_0x16dfa0+(+_0x4b13f1[0x1]+_0x2326a6))+'e-'+_0x2326a6);}return Number(_0x302fdb)[_0x39a1d9(0x1e2)](_0x2326a6);}function getServerTime(){const _0x4fc76f=_0xc617c9,_0x374bec=new Date();return _0x374bec[_0x4fc76f(0x21d)]()+'/'+(_0x374bec[_0x4fc76f(0x2bb)]()+0x1)[_0x4fc76f(0x2fe)]()[_0x4fc76f(0x1a1)](0x2,'0')+'/'+_0x374bec[_0x4fc76f(0x293)]()[_0x4fc76f(0x2fe)]()['padStart'](0x2,'0')+'\x20'+_0x374bec[_0x4fc76f(0x252)]()[_0x4fc76f(0x2fe)]()[_0x4fc76f(0x1a1)](0x2,'0')+':'+_0x374bec[_0x4fc76f(0x2e0)]()[_0x4fc76f(0x2fe)]()[_0x4fc76f(0x1a1)](0x2,'0')+':'+_0x374bec[_0x4fc76f(0x2a4)]()[_0x4fc76f(0x2fe)]()[_0x4fc76f(0x1a1)](0x2,'0');}function getTimeStamp(){const _0x5e81ab=_0xc617c9,_0x252413=shiftedTime();return _0x252413['getFullYear']()+'/'+(_0x252413[_0x5e81ab(0x2bb)]()+0x1)[_0x5e81ab(0x2fe)]()['padStart'](0x2,'0')+'/'+_0x252413['getDate']()[_0x5e81ab(0x2fe)]()[_0x5e81ab(0x1a1)](0x2,'0')+'\x20'+_0x252413['getHours']()[_0x5e81ab(0x2fe)]()[_0x5e81ab(0x1a1)](0x2,'0')+':'+_0x252413[_0x5e81ab(0x2e0)]()[_0x5e81ab(0x2fe)]()['padStart'](0x2,'0')+':'+_0x252413[_0x5e81ab(0x2a4)]()[_0x5e81ab(0x2fe)]()[_0x5e81ab(0x1a1)](0x2,'0');}function getDate(){const _0x32d8be=_0xc617c9,_0x1d1b02=shiftedTime();return _0x1d1b02[_0x32d8be(0x21d)]()+'/'+(_0x1d1b02[_0x32d8be(0x2bb)]()+0x1)[_0x32d8be(0x2fe)]()['padStart'](0x2,'0')+'/'+_0x1d1b02[_0x32d8be(0x293)]()[_0x32d8be(0x2fe)]()[_0x32d8be(0x1a1)](0x2,'0');}function getHour(){const _0x361c63=_0xc617c9,_0x585722=shiftedTime();return _0x585722['getHours']()[_0x361c63(0x2fe)]()['padStart'](0x2,'0');}function sleep(_0x13f067){return new Promise(_0x336159=>setTimeout(_0x336159,_0x13f067));}function shiftedTime(){const _0x126217=_0xc617c9,_0x249ad3=new Date();let _0x1e4b7d=_0x249ad3;if(config&&config[_0x126217(0x19a)]!==0x0)_0x1e4b7d=fns[_0x126217(0x2e4)](_0x249ad3,{'hours':config['timeshift']});return _0x1e4b7d;}function timer(_0x36c26c){const _0x3c3c26=_0xc617c9,_0x448d59=new Date();!lasttime?console[_0x3c3c26(0x2e5)](getTimeStamp()+_0x3c3c26(0x2ea),_0x36c26c,_0x448d59):console[_0x3c3c26(0x2e5)](getTimeStamp()+_0x3c3c26(0x2ea),_0x36c26c,(_0x448d59-lasttime)/0x3e8),lasttime=_0x448d59;}