const _0x1a38b9=_0x5f20;(function(_0x2a0281,_0x545b1b){const _0x2906c1=_0x5f20,_0x5032e8=_0x2a0281();while(!![]){try{const _0x1a665c=parseInt(_0x2906c1(0x17f))/0x1+-parseInt(_0x2906c1(0x145))/0x2+-parseInt(_0x2906c1(0x1b5))/0x3+-parseInt(_0x2906c1(0xa2))/0x4*(parseInt(_0x2906c1(0x97))/0x5)+parseInt(_0x2906c1(0xac))/0x6+-parseInt(_0x2906c1(0x18c))/0x7+parseInt(_0x2906c1(0x8a))/0x8;if(_0x1a665c===_0x545b1b)break;else _0x5032e8['push'](_0x5032e8['shift']());}catch(_0x561861){_0x5032e8['push'](_0x5032e8['shift']());}}}(_0x504c,0x1fefb));const _0xd8571=function(){let _0x49ccb2=!![];return function(_0x52841f,_0x2efd5c){const _0x5476e5=_0x49ccb2?function(){if(_0x2efd5c){const _0x3a9907=_0x2efd5c['apply'](_0x52841f,arguments);return _0x2efd5c=null,_0x3a9907;}}:function(){};return _0x49ccb2=![],_0x5476e5;};}(),_0x2d4da7=_0xd8571(this,function(){const _0x52b84b=_0x5f20;return _0x2d4da7[_0x52b84b(0xca)]()[_0x52b84b(0xe5)](_0x52b84b(0x129))['toString']()['constructor'](_0x2d4da7)[_0x52b84b(0xe5)](_0x52b84b(0x129));});_0x2d4da7();'use strict';const ccxt=require(_0x1a38b9(0x9f)),low=require(_0x1a38b9(0xd4)),FileSync=require(_0x1a38b9(0x10c)),fs=require('fs'),fns=require(_0x1a38b9(0x194)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x1a38b9(0xae)),Crypt=require(_0x1a38b9(0x141))[_0x1a38b9(0x11a)];let exchange,wsClient;global[_0x1a38b9(0x135)]={},global[_0x1a38b9(0xb3)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x1a38b9(0x174),_0x1a38b9(0x185),_0x1a38b9(0xe7),_0x1a38b9(0xa4),_0x1a38b9(0xd8),'YOYOW/'];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x1a38b9(0xb9)],botID=process[_0x1a38b9(0x14c)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x1a38b9(0x13e)](botID)&&(console[_0x1a38b9(0x16e)](_0x1a38b9(0xde)+botID+_0x1a38b9(0x188)),process[_0x1a38b9(0xc6)](0x1));const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/';!fs['existsSync'](configpath)&&fs[_0x1a38b9(0x142)](configpath);const configfile=configpath+_0x1a38b9(0xef)+botID+_0x1a38b9(0x124),logfile=configpath+'bot-'+botID+_0x1a38b9(0x8b),performancefile=configpath+_0x1a38b9(0xef)+botID+_0x1a38b9(0xd7),coinresultsfile=configpath+_0x1a38b9(0xef)+botID+_0x1a38b9(0x11c),settingsfile=configpath+_0x1a38b9(0xa1),securefile=configpath+_0x1a38b9(0x198),configbackuppath=configpath+_0x1a38b9(0x10d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1a38b9(0xfc)]({'logs':[]})[_0x1a38b9(0x12e)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1a38b9(0xfc)]({'data':[]})[_0x1a38b9(0x12e)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1a38b9(0xfc)]({'bot':[]})[_0x1a38b9(0x12e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1a38b9(0xfc)]({'coins':[]})[_0x1a38b9(0x12e)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x3e2347)=>{},'debug':(..._0x18ba13)=>{},'notice':(..._0x5f5efd)=>{},'info':(..._0x2f1a9f)=>{},'warning':(..._0x30b02d)=>{},'error':async function(..._0x5284a6){const _0x4d6914=_0x1a38b9,_0x546cf4=new Date()[_0x4d6914(0xdb)]();if(!lastErrorShown||_0x546cf4-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x4d6914(0xdb)]();let _0x49fbd5='';if(_0x5284a6[0x0])_0x49fbd5+=_0x5284a6[0x0];if(_0x5284a6[0x1]&&_0x5284a6[0x1][_0x4d6914(0xaa)]&&_0x5284a6[0x1]['error']['message'])_0x49fbd5+='\x20-\x20'+_0x5284a6[0x1][_0x4d6914(0xaa)]['message'];logging(_0x4d6914(0xcb)+consecutivePauses+_0x4d6914(0xc0),''+_0x49fbd5),await pauseBot(_0x4d6914(0x162));}}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings['timeshift']!=config[_0x1a38b9(0x138)]&&updateTimeshift(settings['timeshift']);process[_0x1a38b9(0xf2)]({'started':_0x1a38b9(0x164)},_0x21d305=>{}),initializeProcessListeners();function proxyEmit(_0x357387,_0x49312e=null){const _0x5cdeb7=_0x1a38b9;process[_0x5cdeb7(0xf2)]({'function':_0x357387,'args':_0x49312e},_0x121f91=>{});}function initializeProcessListeners(){const _0x41f691=_0x1a38b9;process['on'](_0x41f691(0xdd),_0x3b07cb=>{const _0xb1bbc9=_0x41f691;switch(Object[_0xb1bbc9(0x13b)](_0x3b07cb)[0x0]){case'timeshift':_0x3b07cb[_0xb1bbc9(0x138)]!=undefined&&(settings[_0xb1bbc9(0x138)]=_0x3b07cb[_0xb1bbc9(0x138)],updateTimeshift(settings[_0xb1bbc9(0x138)]));break;case _0xb1bbc9(0x151):switch(_0x3b07cb[_0xb1bbc9(0x151)]){case _0xb1bbc9(0x18d):initclient();break;case _0xb1bbc9(0x1b0):toggleBotMode();break;case _0xb1bbc9(0x93):emitHistory(_0x3b07cb[_0xb1bbc9(0x15d)]);break;case _0xb1bbc9(0x18b):deleteHistoryAlerts(_0x3b07cb[_0xb1bbc9(0x15d)]);break;case _0xb1bbc9(0xf4):getPortfolio(_0x3b07cb['args']);break;case _0xb1bbc9(0x15a):storeConfiguration(_0x3b07cb[_0xb1bbc9(0x15d)]);break;case _0xb1bbc9(0xe1):storeHeadless(_0x3b07cb[_0xb1bbc9(0x15d)]);break;case _0xb1bbc9(0x163):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x3b07cb[_0xb1bbc9(0x15d)]);break;case'cancelLoading':cancelLoading();break;case _0xb1bbc9(0x117):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1a3eec=_0x1a38b9;if(pidBalances)clearTimeout(pidBalances);if(config[_0x1a3eec(0xd5)]!=''){await initExchange(config[_0x1a3eec(0xd5)],config[_0x1a3eec(0x167)]);let _0x5bc16b=await loadSymbols();if(_0x5bc16b){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x1a3eec(0xe6)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x213621,_0xb36e6e){const _0x242c39=_0x1a38b9,_0x51dad9=ccxt[config[_0x242c39(0x1ae)]];let _0x5b3b3d;switch(config[_0x242c39(0x1ae)]){case _0x242c39(0xae):_0x5b3b3d=_0x242c39(0x137);break;case _0x242c39(0xa3):_0x5b3b3d=_0x242c39(0x171);break;default:_0x5b3b3d=_0x242c39(0x137);}exchange=new _0x51dad9({'apiKey':_0x213621,'secret':_0xb36e6e,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x213621,'api_secret':_0xb36e6e,'beautify':!![],'wsUrl':_0x5b3b3d},logger);let _0x139231=config[_0x242c39(0x1ae)]==_0x242c39(0xa3)?'USDT':'EUR',_0x3a6f4a=config[_0x242c39(0x121)]==_0x242c39(0x19a)?_0x242c39(0x19a):_0x242c39(0xf3);stablecoins={'eur':{'coin':''+_0x3a6f4a+_0x139231,'symbol':_0x3a6f4a+'/'+_0x139231},'usd':{'coin':_0x3a6f4a+'USDT','symbol':_0x3a6f4a+_0x242c39(0x1a6)}};}async function loadSymbols(){const _0x171ce1=_0x1a38b9;let _0x920cbb;try{markets=await exchange[_0x171ce1(0x90)](),allSymbols=exchange[_0x171ce1(0x13d)]['filter'](_0xa9df39=>{let _0x244485=![];return exceptions['forEach'](_0x541124=>{const _0x1fbda4=_0x5f20;if(_0xa9df39[_0x1fbda4(0x197)](_0x541124))_0x244485=!![];}),!_0x244485;}),_0x920cbb=!![];}catch(_0x4473e0){await handleError(_0x4473e0,'loadSymbols()'),_0x920cbb=![];}return _0x920cbb;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x3d53a7=_0x1a38b9;proxyEmit(_0x3d53a7(0x9c),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3d53a7(0xda),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x213fcf=getNormalizedPerformance();emitPerformance(_0x213fcf),await getStartingBalances(_0x213fcf);}async function toggleBotMode(){const _0x572ea6=_0x1a38b9;let _0x3d90d7=dbConfig[_0x572ea6(0x92)](_0x572ea6(0x196))[_0x572ea6(0x1a7)]({'botID':botID})[_0x572ea6(0x14b)]();if(_0x3d90d7){const _0xb6f59b=!_0x3d90d7[_0x572ea6(0x155)];dbConfig['get']('bot')['find']({'botID':botID})['assign']({'headless':_0xb6f59b})[_0x572ea6(0x12e)](),config[_0x572ea6(0x155)]=_0xb6f59b,proxyEmit(_0x572ea6(0x9c),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2b38fb=_0x1a38b9;process[_0x2b38fb(0xf2)]({'updatebotmanager':!![]},_0x304a5b=>{});}function cleanws(){const _0x3b88cb=_0x1a38b9;wsinitialized=![];ws1&&(ws1[_0x3b88cb(0x94)](_0x44dcb2=>{const _0xa18cb6=_0x3b88cb;try{wsClient[_0xa18cb6(0x12f)](_0x44dcb2);}catch(_0x3583ce){}}),ws1=[]);if(ws2){try{wsClient[_0x3b88cb(0x12f)](ws2);}catch(_0x54e685){}ws2=null;}ws3&&(ws3[_0x3b88cb(0x94)](_0x13eb7c=>{const _0x3cc5db=_0x3b88cb;try{wsClient[_0x3cc5db(0x12f)](_0x13eb7c);}catch(_0x2eaf25){}}),ws3=[]);}async function initws(){const _0x4c131c=_0x1a38b9;cleanws();let _0x441785=[];currentCoins[_0x4c131c(0x94)](_0x29dfdf=>{const _0x205e49=_0x4c131c;if(_0x29dfdf['coin']!=config[_0x205e49(0x121)])_0x441785[_0x205e49(0x146)](_0x29dfdf[_0x205e49(0x1a9)]);});if(!_0x441785[_0x4c131c(0x197)](stablecoins[_0x4c131c(0x16c)][_0x4c131c(0x1a9)]))_0x441785[_0x4c131c(0x146)](stablecoins['eur']['symbol']);if(!_0x441785['includes'](stablecoins[_0x4c131c(0xe9)][_0x4c131c(0x1a9)]))_0x441785[_0x4c131c(0x146)](stablecoins[_0x4c131c(0xe9)][_0x4c131c(0x1a9)]);if(!_0x441785['includes'](_0x4c131c(0xa0)+config[_0x4c131c(0x121)]))_0x441785[_0x4c131c(0x146)](_0x4c131c(0xa0)+config[_0x4c131c(0x121)]);try{_0x441785[_0x4c131c(0x94)]((_0x5dc2d4,_0x5f3a85)=>{const _0x4083d1=_0x4c131c;ws1[_0x5f3a85]=wsClient[_0x4083d1(0x192)](noslash(_0x5dc2d4),'1m'),ws3[_0x5f3a85]=wsClient[_0x4083d1(0xdf)](noslash(_0x5dc2d4),_0x4083d1(0x165));}),ws2=wsClient[_0x4c131c(0x161)](),wsClient['on']('formattedMessage',_0x315997=>{const _0x3ba276=_0x4c131c;if(isWsFormattedKline(_0x315997)){global[_0x3ba276(0x135)][_0x315997['kline']['symbol']]=_0x315997[_0x3ba276(0x180)][_0x3ba276(0x110)];return;}else{if(isWsFormatted24hrTicker(_0x315997)){global[_0x3ba276(0xb3)][_0x315997[_0x3ba276(0x1a9)]]=_0x315997['priceChangePercent'];return;}else{if(!Array[_0x3ba276(0x170)](_0x315997)&&_0x315997[_0x3ba276(0x120)]['includes'](_0x3ba276(0x1a5))){if(_0x315997[_0x3ba276(0x1a0)][_0x3ba276(0x197)](_0x3ba276(0x165))){updateNumberCoins(_0x315997);return;}}}}}),wsClient['on'](_0x4c131c(0x184),async _0x5d98a1=>{if(!botPaused)currentCoins=await getCoins(!![]);});}catch(_0x1bbd20){await handleError(_0x1bbd20,'initws()');}let _0x14dabe,_0x24f6b3=0x0;loading[_0x4c131c(0xbc)]=[];let _0x2e84d5=0x0;_0x441785['forEach'](_0x452ce6=>{const _0xfe8b47=_0x4c131c;loading[_0xfe8b47(0xbc)][_0xfe8b47(0x146)](_0x452ce6);}),loadingCanceled=![];let _0x1be136=![];while(_0x14dabe!=_0x441785[_0x4c131c(0xe6)]){_0x14dabe=0x0,_0x441785[_0x4c131c(0x94)](_0x3b03cf=>{const _0x2e3bc3=_0x4c131c;global[_0x2e3bc3(0x135)][noslash(_0x3b03cf)]&&(loading['remainingSymbols']=loading[_0x2e3bc3(0xbc)]['filter'](_0x3a3d4c=>_0x3a3d4c!=_0x3b03cf),_0x14dabe++);}),loading[_0x4c131c(0x169)]=Math[_0x4c131c(0x157)](_0x14dabe/_0x441785[_0x4c131c(0xe6)]*0x64);loading[_0x4c131c(0x169)]!=0x64&&(_0x2e84d5>0x1e*0x5&&(loading[_0x4c131c(0x10e)]=!![],emitLoadingProgress()),_0x2e84d5>0x3c*0x5&&!_0x1be136&&(_0x1be136=!![],logHistory(_0x4c131c(0xaa),_0x4c131c(0xa6)+loading['remainingSymbols']+_0x4c131c(0x8f))));if(loadingCanceled){loading[_0x4c131c(0x114)]=!![],emitLoadingProgress();break;}else _0x14dabe!=_0x24f6b3&&(_0x24f6b3=_0x14dabe,emitLoadingProgress()),_0x2e84d5++,await sleep(0xc8);}_0x1be136&&logHistory(_0x4c131c(0xe0),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started');if(_0x14dabe==_0x441785[_0x4c131c(0xe6)])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x190301=_0x1a38b9;proxyEmit(_0x190301(0x176),loading);}async function getFiat(){const _0x5877b4=_0x1a38b9;let _0x24c84d=0x0,_0x3e5b94=0x0;try{_0x24c84d=global[_0x5877b4(0x135)][stablecoins[_0x5877b4(0x16c)][_0x5877b4(0xab)]],_0x3e5b94=global[_0x5877b4(0x135)][stablecoins[_0x5877b4(0xe9)][_0x5877b4(0xab)]];}catch(_0x341a4c){await handleError(_0x341a4c,'getFiat()');}return{'eur':Number(_0x24c84d),'usd':Number(_0x3e5b94)};}function setStartDatePerformance(){const _0x697171=_0x1a38b9;if(config&&config[_0x697171(0xad)][0x0][_0x697171(0x11e)][_0x697171(0xe6)]!=0x0){const _0x4f4f91=config['liquidity'][0x0]['changes'];dbPerformance[_0x697171(0x92)](_0x697171(0xcf))['find']({'date':config['startdate']})[_0x697171(0x150)]({'coins':_0x4f4f91})[_0x697171(0x12e)]();}}async function recreateCoinResults(){const _0x1e7307=_0x1a38b9;let _0x2059d8,_0x225cc8=[];try{const _0x31694b=fns[_0x1e7307(0xe2)](fns[_0x1e7307(0x152)](config[_0x1e7307(0xd2)][_0x1e7307(0x13a)](/\//g,'-')),_0x1e7307(0x187));for(const _0x4a9fe6 of currentCoins){if(_0x4a9fe6[_0x1e7307(0xab)]!=config[_0x1e7307(0x121)]){let _0x496eb3=0x0,_0x4ed4ae,_0x256089;_0x2059d8=await getAllEventOrders(_0x4a9fe6['symbol']);if(_0x2059d8[_0x1e7307(0xe6)]>0x0)_0x2059d8['forEach'](_0x172b9f=>{const _0xb50f75=_0x1e7307,_0x441380=_0x4a9fe6[_0xb50f75(0x1a9)][_0xb50f75(0x197)](config[_0xb50f75(0x121)]+'/');_0x225cc8[_0xb50f75(0x146)]({'datetime':_0x172b9f[_0xb50f75(0xf7)],'coin':_0x4a9fe6['coin'],'symbol':_0x4a9fe6['symbol'],'side':_0x172b9f['side'],'reverse':_0x441380,'amount':formatResult(_0x172b9f[_0xb50f75(0xfb)],0x8),'filled':formatResult(_0x172b9f[_0xb50f75(0xfb)],0x8),'price':formatResult(_0x172b9f[_0xb50f75(0x17c)],0x8)}),_0x496eb3=_0x172b9f['side']=='buy'?_0x496eb3+_0x172b9f['filled']:_0x496eb3-_0x172b9f[_0xb50f75(0xfb)];if(!_0x256089)_0x256089=_0x172b9f[_0xb50f75(0x17c)];});_0x4ed4ae=_0x4a9fe6[_0x1e7307(0x15f)]-_0x496eb3;let _0x3f60e4;config['liquidity'][_0x1e7307(0x94)](_0x37ea5d=>{const _0x4e35c4=_0x1e7307;!_0x3f60e4&&(_0x3f60e4=_0x37ea5d[_0x4e35c4(0x11e)][_0x4e35c4(0x1a7)](_0x579582=>_0x579582['coin']==_0x4a9fe6[_0x4e35c4(0xab)]),_0x3f60e4&&(_0x4ed4ae=_0x3f60e4['number'],_0x256089=_0x3f60e4[_0x4e35c4(0x17c)]));});let _0xd32ea6=dbCoinResults[_0x1e7307(0x92)](_0x1e7307(0x112))[_0x1e7307(0x1a7)]({'coin':_0x4a9fe6[_0x1e7307(0xab)]})[_0x1e7307(0x14b)]();_0xd32ea6={'coin':_0x4a9fe6['coin'],'number':_0x4ed4ae,'breakeven':_0x256089,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x1e7307(0x92)](_0x1e7307(0x112))['find']({'coin':_0x4a9fe6['coin']})[_0x1e7307(0x150)](_0xd32ea6)[_0x1e7307(0x12e)]();}}_0x225cc8[_0x1e7307(0x106)]((_0x584926,_0x166c3e)=>_0x584926[_0x1e7307(0xf7)]>_0x166c3e['datetime']?0x1:_0x166c3e[_0x1e7307(0xf7)]>_0x584926[_0x1e7307(0xf7)]?-0x1:0x0);let _0x4f9a60=0x0;for(let _0x2a3383 of _0x225cc8){await updateCoinResults(_0x2a3383,!![]);}}catch(_0xdc4ac1){await handleError(_0xdc4ac1,_0x1e7307(0xb7));}}function _0x504c(){const _0x185de4=['Unknown\x20error\x20occured','order','last','2.3.5','(((.+)+)+)+$','outboundAccountPosition','limit-high','indexOf','breakeven','write','closeWs','Unfilled\x20order(s)\x20canceled\x20after\x20','realized','\x20portfolio:\x20\x0a\x0a','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','offset','ticker','Order\x20amount\x20is\x20invalid:\x20','wss://stream.binance.com:9443','timeshift','reverse','replace','keys','precision','symbols','test','final','buys','hybrid-crypto-js','mkdirSync','no\x20open\x20orders','timestamp','147154CJQihi','push','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','date','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','startnumber','value','argv','cloneDeep','botID','fees','assign','function','parseISO','eventTime','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','headless','getMinutes','round','target','configuration-stored','storeConfiguration','balancing\x20resumed','privateKey','args','threshold','number','delta','subscribeSpotUserDataStream','Binance\x20not\x20available\x20(1)','getStartingBalances','running','spot','padEnd','apiSecret','toLowerCase','progress','emojibuy','event','eur','emojisell','log','shift','isArray','wss://stream.binance.us:9443','sortBy','concat','DAI/','Invalid\x20quantity','coin-loading-progress','cancelOrders()','event-history','botname','orderId','Manual\x20balancing\x20required:\x20','price','map','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','187214phtiTB','kline','total','limits','Binance\x20not\x20available\x20(2)','reconnected','HOT/BTC','distribution','yyyy-MM-dd\x27T\x27HH:mm:ss',',\x20must\x20be\x20a\x203\x20digit\x20number','Bot\x20','ordertype','deleteHistoryAlerts','853083AYltLp','initclient','logs','splice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','secure','subscribeSpotKline','fetchClosedOrders','date-fns','buy','bot','includes','bb-secure.json','performance','ETH','fromCodePoint','parse','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','min','\x20has\x20a\x2024h\x20drop\x20of\x20','wsMarket','initial','ongoing','No\x20more\x20open\x20orders\x20-\x20','ask','userData','/USDT','find','Pausing\x20for\x20','symbol','padStart','has','commissionAsset','limit','exchange','sell','toggleBotMode','exec','cooldown','valid','amount','103854ldpPKI','\x20order:\x20','460168UMoCqt','-events.json','Binance\x20API\x20key\x20is\x20invalid','differenceInSeconds','side','\x20-\x20bot\x20not\x20started','loadMarkets','BUSD','get','emitHistory','forEach','stringify','abs','570bWaFVP','decrypt','InsufficientFunds','<pre>','isEqual','configuration','showname','USDT','ccxt','BNB/','bb-settings.json','2384UXUvjI','binanceus','XEM/BUSD','milliseconds','Failed\x20to\x20load\x20coin\x20data\x20for\x20','getHours','cost','\x20-\x20','error','coin','1104504kYlYye','liquidity','binance','Binance\x20API\x20secret\x20is\x20invalid','Binance\x20not\x20responding','join','sells','change','-------------------------------\x0a','cumulativeQuoteAssetTransactedQty','\x20|\x20Binance\x20API\x20key\x20invalid','recreateCoinResults()','currency','version','enabled','restart','remainingSymbols','************','getFullYear','bid',')\x20|\x20Error\x20details:\x20','\x20minutes\x20-\x20','AuthenticationError','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getDate','recreate','exit','\x20>\x20','cancelOrder','Limit\x20(high-margin)','toString','WebSockets(','\x20hour','time','Limit\x20(low-margin)','data','add','executionReport','startdate','eventType','lowdb','apiKey','findIndex','-performance.json','NANO/','InvalidNonce','balances','getTime','API-key\x20format\x20invalid','message','Error:\x20Invalid\x20argument\x20','subscribeSymbol24hrTicker','success','storeHeadless','format','settings','toFixed','search','length','HOT/EUR','Executed\x20','usd','getMonth','type','balancing\x20resumes\x20when\x20cooldown\x20ends','change24h','starting-balances','bot-','set','fetchTickers','send','BTC','getPortfolio','fetchOpenOrders','split','datetime','slice','getSeconds','portfolio','filled','defaults','accumulatedQuantity','remove','\x20orders\x20in\x20less\x20than\x20','trade','market','Order\x20filled:\x20','entries','filter','yyyy/MM/dd','sort','Order(s)\x20validated\x20-\x20','startprice','</pre>',':\x20Bot\x20','getPortfolio()','lowdb/adapters/FileSync','/backup/','timeout','2.5.0','close','OrderNotFound','coins','orderStatus','cancel','MIN_NOTIONAL','DDoSProtection','sendPortfolioTelegram','fetchBalance','getCoins()','Crypt','fee','-results.json','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','changes','max','wsKey','basecoin','\x20minutes','BNB','-config.json'];_0x504c=function(){return _0x185de4;};return _0x504c();}async function getAllEventOrders(_0x51ede1){const _0x286f9b=_0x1a38b9;let _0x54a913=[],_0x39d7b5=dbLogs[_0x286f9b(0x92)](_0x286f9b(0x18e))['filter'](_0x1b3b8b=>{const _0x886ab1=_0x286f9b,_0x10aebe=_0x1b3b8b['event'][_0x886ab1(0x168)]();return _0x10aebe[_0x886ab1(0x197)](_0x51ede1['toLowerCase']())&&(_0x10aebe[_0x886ab1(0x197)](_0x886ab1(0x101))&&_0x10aebe[_0x886ab1(0x197)](_0x886ab1(0x126))||_0x10aebe[_0x886ab1(0x197)]('filled')&&_0x10aebe[_0x886ab1(0x197)]('order'));})[_0x286f9b(0x172)]('time')['value']();return _0x39d7b5[_0x286f9b(0x94)](_0x3aa00f=>{const _0x49d81f=_0x286f9b,_0x4d8408=_0x3aa00f[_0x49d81f(0x16b)][_0x49d81f(0x197)]('sell')?_0x49d81f(0x1af):_0x49d81f(0x195),_0x8212c1=/#([0-9]|\.)+\s/i,_0x14b636=Number(_0x8212c1[_0x49d81f(0x1b1)](_0x3aa00f['event'])[0x0][_0x49d81f(0xf8)](0x1)),_0x2fb8ce=/@([0-9]|\.)+$/i,_0x4d547d=Number(_0x2fb8ce[_0x49d81f(0x1b1)](_0x3aa00f['event'])[0x0][_0x49d81f(0xf8)](0x1));_0x54a913['push']({'datetime':_0x3aa00f[_0x49d81f(0xcd)],'coin':symbolToCoin(_0x51ede1),'symbol':_0x51ede1,'side':_0x4d8408,'amount':_0x14b636,'filled':_0x14b636,'price':_0x4d547d});}),_0x54a913;}async function getAllOrders(_0x4d2c7e,_0x4e4950){const _0x44722f=_0x1a38b9;let _0x2a0a08=[];while(_0x4e4950<exchange[_0x44722f(0xa5)]()){const _0x53f0be=0x1f4,_0x341e61=await exchange[_0x44722f(0x193)](_0x4d2c7e,_0x4e4950,_0x53f0be);if(_0x341e61[_0x44722f(0xe6)])_0x4e4950=_0x341e61[_0x341e61['length']-0x1][_0x44722f(0x144)]+0x1,_0x2a0a08=_0x2a0a08[_0x44722f(0x173)](_0x341e61);else break;}return _0x2a0a08;}async function validate24hChanges(){const _0x2fca7c=_0x1a38b9;let _0x1390e3;for(const _0x8ebc7a of currentCoins){if(_0x8ebc7a[_0x2fca7c(0xab)]!=config[_0x2fca7c(0x121)]){let _0x325456;_0x8ebc7a[_0x2fca7c(0x139)]?_0x325456=formatResult((0x1/(global[_0x2fca7c(0xb3)][noslash(_0x8ebc7a['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x325456=global['change'][noslash(_0x8ebc7a[_0x2fca7c(0x1a9)])],_0x325456<config[_0x2fca7c(0xed)]&&(logHistory('error',_0x8ebc7a[_0x2fca7c(0xab)]+_0x2fca7c(0x19f)+_0x325456+'%'),logHistory(_0x2fca7c(0xaa),_0x2fca7c(0x147)),logHistory(_0x2fca7c(0xaa),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x77d334=_0x1a38b9;let _0x49a4ea=dbLogs[_0x77d334(0x92)](_0x77d334(0xb9))[_0x77d334(0x14b)]();if(_0x49a4ea!='2.3.5'){dbLogs['set'](_0x77d334(0xb9),_0x77d334(0x128))[_0x77d334(0x12e)]();let _0x5191ca=[];const _0x1467ac=dbLogs[_0x77d334(0x92)](_0x77d334(0x18e))[_0x77d334(0x14b)]();_0x1467ac[_0x77d334(0x94)](_0x27a71f=>{const _0x2ce334=_0x77d334;_0x5191ca[_0x2ce334(0x146)]({'time':_0x27a71f['time'],'type':_0x27a71f[_0x2ce334(0xeb)],'event':_0x27a71f['event']});}),dbLogs['get']('logs')[_0x77d334(0x150)](_0x5191ca)['write']();}let _0x26e34a=dbConfig[_0x77d334(0x92)](_0x77d334(0xb9))[_0x77d334(0x14b)]();if(_0x26e34a!=_0x77d334(0x128)){dbConfig[_0x77d334(0xf0)](_0x77d334(0xb9),_0x77d334(0x128))[_0x77d334(0x12e)]();let _0x2e70da=dbConfig[_0x77d334(0x92)](_0x77d334(0x196))[_0x77d334(0x1a7)]({'botID':botID})[_0x77d334(0x14b)]();if(_0x2e70da){let _0x238b34=[];_0x2e70da[_0x77d334(0xfa)][_0x77d334(0x94)](_0x3d0adb=>{const _0x4886a1=_0x77d334;_0x238b34[_0x4886a1(0x146)]({'coin':_0x3d0adb[_0x4886a1(0xab)],'number':_0x3d0adb[_0x4886a1(0x14a)],'price':_0x3d0adb['startprice']}),delete _0x3d0adb[_0x4886a1(0x14a)],delete _0x3d0adb[_0x4886a1(0x108)];});if(_0x238b34['length']!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+'.json'),JSON[_0x77d334(0x95)](_0x238b34,null,0x4),function(_0x51d688){if(_0x51d688){}});const _0x100d1b=(_0x45d921,_0x7e796f)=>{let _0x4c1930=[];_0x7e796f['forEach'](_0x33ea69=>{const _0x44062a=_0x5f20,_0x283e91=_0x45d921['find'](_0x37484c=>_0x37484c['coin']==_0x33ea69[_0x44062a(0xab)]);if(!_0x283e91)_0x4c1930['push'](_0x33ea69);});let _0x1738ca=[];return _0x45d921['forEach'](_0x1e6f18=>{const _0x50dd5b=_0x5f20,_0x4f1956=_0x7e796f[_0x50dd5b(0x1a7)](_0x13e340=>_0x13e340[_0x50dd5b(0xab)]==_0x1e6f18[_0x50dd5b(0xab)]);if(!_0x4f1956||_0x4f1956['number']==0x0&&_0x1e6f18['number']!=0x0)_0x1738ca[_0x50dd5b(0x146)](_0x1e6f18);}),{'missingDay1':_0x4c1930,'notInDay2':_0x1738ca};},_0x149f50=dbPerformance[_0x77d334(0x92)](_0x77d334(0xcf))['cloneDeep']()[_0x77d334(0x14b)]();if(_0x149f50[_0x77d334(0xe6)]>0x1){const {missingDay1:_0x46b6cc,notInDay2:_0x2ae813}=_0x100d1b(_0x238b34,_0x149f50[0x1][_0x77d334(0x112)]);_0x238b34=[..._0x238b34,..._0x46b6cc],_0x2ae813[_0x77d334(0x94)](_0x4f6f97=>{const _0x2d7b1f=_0x77d334;let _0x30e207=_0x238b34[_0x2d7b1f(0xd6)](_0x83b524=>_0x83b524[_0x2d7b1f(0xab)]==_0x4f6f97[_0x2d7b1f(0xab)]);_0x30e207!=-0x1&&_0x238b34['splice'](_0x30e207,0x1);});}_0x238b34[_0x77d334(0x106)]((_0x3a3259,_0x372de0)=>_0x3a3259['coin']>_0x372de0[_0x77d334(0xab)]?0x1:_0x372de0['coin']>_0x3a3259[_0x77d334(0xab)]?-0x1:0x0);let _0x280f75=[{'date':_0x2e70da[_0x77d334(0xd2)],'changes':_0x238b34}];_0x149f50[_0x77d334(0xe6)]>0x2&&_0x149f50['forEach']((_0x5cf966,_0x557b4c)=>{const _0x2a92e7=_0x77d334;if(_0x557b4c>0x0&&_0x557b4c<_0x149f50[_0x2a92e7(0xe6)]-0x1){const {missingDay1:_0xe91500,notInDay2:_0x5893ea}=_0x100d1b(_0x149f50[_0x557b4c][_0x2a92e7(0x112)],_0x149f50[_0x557b4c+0x1]['coins']);_0x238b34=[],(_0xe91500['length']!=0x0||_0x5893ea[_0x2a92e7(0xe6)]!=0x0)&&(_0xe91500[_0x2a92e7(0xe6)]!=0x0&&_0x238b34[_0x2a92e7(0x146)](..._0xe91500),_0x5893ea[_0x2a92e7(0xe6)]!=0x0&&(_0x5893ea[_0x2a92e7(0x94)](_0x49c921=>{const _0x4dde5a=_0x2a92e7;_0x49c921[_0x4dde5a(0x15f)]=-_0x49c921['number'];}),_0x238b34['push'](..._0x5893ea)),_0x238b34[_0x2a92e7(0x106)]((_0x4086ba,_0xbd0a0b)=>_0x4086ba[_0x2a92e7(0xab)]>_0xbd0a0b[_0x2a92e7(0xab)]?0x1:_0xbd0a0b[_0x2a92e7(0xab)]>_0x4086ba[_0x2a92e7(0xab)]?-0x1:0x0),_0x280f75[_0x2a92e7(0x146)]({'date':_0x149f50[_0x557b4c+0x1]['date'],'changes':_0x238b34}));}}),dbConfig[_0x77d334(0x92)](_0x77d334(0x196))[_0x77d334(0x1a7)]({'botID':botID})[_0x77d334(0x150)]({..._0x2e70da,'liquidity':_0x280f75})[_0x77d334(0x12e)]();}}config=getConfiguration(botID);let _0x199028=dbPerformance[_0x77d334(0x92)]('version')[_0x77d334(0x14b)]();_0x199028!=_0x77d334(0x128)&&(dbPerformance[_0x77d334(0xf0)](_0x77d334(0xb9),_0x77d334(0x128))[_0x77d334(0x12e)](),setStartDatePerformance());let _0x2d3caa=dbCoinResults['get'](_0x77d334(0xb9))['value']();if(_0x2d3caa!=_0x77d334(0x10f)){dbCoinResults[_0x77d334(0xf0)](_0x77d334(0xb9),'2.5.0')[_0x77d334(0x12e)]();let _0x4d442e=dbCoinResults[_0x77d334(0x92)](_0x77d334(0x112))['value']();if(_0x4d442e['length']!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x5dd81a){const _0xa6dfc8=_0x1a38b9;let _0x4cf394=dbConfig['get'](_0xa6dfc8(0x196))[_0xa6dfc8(0x1a7)]({'botID':_0x5dd81a})[_0xa6dfc8(0x14b)]();if(_0x4cf394){let _0x129a24=![];typeof _0x4cf394[_0xa6dfc8(0x15e)]=='string'&&(_0x4cf394={..._0x4cf394,'threshold':Number(_0x4cf394[_0xa6dfc8(0x15e)])},_0x129a24=!![]),_0x4cf394[_0xa6dfc8(0xed)]==null&&(_0x4cf394={..._0x4cf394,'change24h':-0x14},_0x129a24=!![]),_0x129a24&&(_0x4cf394={'botID':_0x4cf394[_0xa6dfc8(0x14e)],'exchange':_0x4cf394[_0xa6dfc8(0x1ae)],'apiKey':_0x4cf394[_0xa6dfc8(0xd5)],'apiSecret':_0x4cf394['apiSecret'],'basecoin':_0x4cf394[_0xa6dfc8(0x121)],'botname':_0x4cf394[_0xa6dfc8(0x179)],'showname':_0x4cf394['showname'],'threshold':_0x4cf394['threshold'],'ordertype':_0x4cf394[_0xa6dfc8(0x18a)],'timeout':_0x4cf394[_0xa6dfc8(0x10e)],'startdate':_0x4cf394['startdate'],'recreate':_0x4cf394[_0xa6dfc8(0xc5)],'timeshift':_0x4cf394[_0xa6dfc8(0x138)],'headless':_0x4cf394[_0xa6dfc8(0x155)],'cooldown':_0x4cf394['cooldown'],'change24h':_0x4cf394[_0xa6dfc8(0xed)],'emojibuy':_0x4cf394[_0xa6dfc8(0x16a)],'emojisell':_0x4cf394['emojisell'],'portfolio':_0x4cf394[_0xa6dfc8(0xfa)],'liquidity':_0x4cf394[_0xa6dfc8(0xad)]},dbConfig[_0xa6dfc8(0x92)](_0xa6dfc8(0x196))['remove']()['write'](),dbConfig[_0xa6dfc8(0x92)]('bot')[_0xa6dfc8(0x146)](_0x4cf394)[_0xa6dfc8(0x12e)]());}else _0x4cf394={'botID':_0x5dd81a,'exchange':_0xa6dfc8(0xae),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xa6dfc8(0x189)+_0x5dd81a,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x4cf394;}function emittedConfiguration(){const _0x4c3387=_0x1a38b9;let _0x358e10;return config['apiKey']==''?_0x358e10=config:_0x358e10={...config,'apiKey':_0x4c3387(0xbd),'apiSecret':_0x4c3387(0xbd)},_0x358e10;}function getSettings(){const _0x103b8e=_0x1a38b9;return dbSettings[_0x103b8e(0x92)](_0x103b8e(0xe3))[_0x103b8e(0x14b)]();}function getSecure(){const _0x320895=_0x1a38b9;return dbSecure[_0x320895(0x92)](_0x320895(0x191))[_0x320895(0x14b)]()||{};}function updateTimeshift(_0x59cdc9){const _0x3a6fc7=_0x1a38b9;let _0x54ce25=dbConfig['get'](_0x3a6fc7(0x196))['find']({'botID':botID})[_0x3a6fc7(0x14b)]();_0x54ce25&&dbConfig[_0x3a6fc7(0x92)](_0x3a6fc7(0x196))[_0x3a6fc7(0x1a7)]({'botID':botID})[_0x3a6fc7(0x150)]({'timeshift':_0x59cdc9})[_0x3a6fc7(0x12e)](),config[_0x3a6fc7(0x138)]=_0x59cdc9,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3e0aa8){const _0x8ef55d=_0x1a38b9;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x39176b=dbConfig[_0x8ef55d(0x92)](_0x8ef55d(0x196))['find']({'botID':botID})[_0x8ef55d(0x14b)]();_0x3e0aa8={..._0x3e0aa8,'apiKey':crypt[_0x8ef55d(0x98)](secure[_0x8ef55d(0x15c)],_0x3e0aa8[_0x8ef55d(0xd5)])[_0x8ef55d(0xdd)],'apiSecret':crypt[_0x8ef55d(0x98)](secure[_0x8ef55d(0x15c)],_0x3e0aa8['apiSecret'])[_0x8ef55d(0xdd)]};if(_0x39176b){if(_0x3e0aa8[_0x8ef55d(0xd5)]==_0x8ef55d(0xbd))_0x3e0aa8[_0x8ef55d(0xd5)]=config['apiKey'];if(_0x3e0aa8[_0x8ef55d(0x167)]==_0x8ef55d(0xbd))_0x3e0aa8['apiSecret']=config[_0x8ef55d(0x167)];dbConfig[_0x8ef55d(0x92)](_0x8ef55d(0x196))[_0x8ef55d(0x1a7)]({'botID':botID})['assign'](_0x3e0aa8)[_0x8ef55d(0x12e)]();}else dbConfig[_0x8ef55d(0x92)](_0x8ef55d(0x196))['push'](_0x3e0aa8)[_0x8ef55d(0x12e)](),process[_0x8ef55d(0xf2)]({'status':_0x8ef55d(0xba),'live':_0x8ef55d(0x164)},_0x129da1=>{});config={..._0x3e0aa8},setStartDatePerformance(),process[_0x8ef55d(0xf2)]({'botname':_0x3e0aa8[_0x8ef55d(0x179)]},_0xa686bc=>{}),updateBotManager();const _0x5b8e64=getNormalizedPerformance();getStartingBalances(_0x5b8e64),emitPerformance(_0x5b8e64),proxyEmit(_0x8ef55d(0x159)),await initCoinResults(),reset();}async function storeHeadless(_0x28ae77){const _0x1d46c0=_0x1a38b9,_0x27c671={...config,'headless':_0x28ae77['headless']};let _0x2f4873=dbConfig['get']('bot')[_0x1d46c0(0x1a7)]({'botID':botID})[_0x1d46c0(0x14b)]();_0x2f4873&&dbConfig[_0x1d46c0(0x92)](_0x1d46c0(0x196))[_0x1d46c0(0x1a7)]({'botID':botID})['assign'](_0x27c671)['write'](),config={..._0x27c671},updateBotManager(),proxyEmit(_0x1d46c0(0x9c),emittedConfiguration());}function noslash(_0x4e13eb){const _0x344d2d=_0x1a38b9;return _0x4e13eb[_0x344d2d(0x13a)]('/','');}async function updateNumberCoins(_0x12454d){const _0x56d88b=_0x1a38b9;if(_0x12454d['eventType']&&_0x12454d[_0x56d88b(0xd3)]==_0x56d88b(0x12a)){if(_0x12454d[_0x56d88b(0x153)]!=lastOutboundEventTime){lastOutboundEventTime=_0x12454d[_0x56d88b(0x153)],currentCoins=await getCoins(!![]);if(lastBalances){let _0x14f5f3=JSON['parse'](lastBalances[_0x56d88b(0xfa)]);_0x14f5f3[_0x56d88b(0x94)](_0x5415f8=>{const _0x22c980=_0x56d88b,_0x18c0d6=currentCoins[_0x22c980(0x1a7)](_0x38f04e=>_0x38f04e['coin']==_0x5415f8[_0x22c980(0xab)]);_0x5415f8[_0x22c980(0x126)]=_0x18c0d6[_0x22c980(0x126)];}),lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x14f5f3)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x12454d[_0x56d88b(0xd3)]&&_0x12454d[_0x56d88b(0xd3)]==_0x56d88b(0xd1)){if(_0x12454d[_0x56d88b(0x113)]=='FILLED'){if(lastOrders)lastOrders['forEach'](async _0x1b8226=>{const _0x17dd33=_0x56d88b;_0x1b8226[_0x17dd33(0x17a)]==_0x12454d['orderId']&&_0x1b8226[_0x17dd33(0xfb)]==0x0&&(_0x1b8226[_0x17dd33(0x17c)]=_0x12454d[_0x17dd33(0xb5)]/_0x12454d[_0x17dd33(0xfd)],_0x1b8226[_0x17dd33(0xfb)]=_0x12454d[_0x17dd33(0xfd)],_0x1b8226[_0x17dd33(0x11b)]={'cost':_0x12454d['commission'],'currency':_0x12454d[_0x17dd33(0x1ac)]},await validateOrders(),await updateCoinResults(_0x1b8226));});}}}async function getCoins(_0x253d89=![],_0x59800a=!![],_0x3ae663=config['basecoin']){const _0xb3f97=_0x1a38b9;let _0x559432,_0x269aa4=[],_0x42723f=[],_0x450a75=[];try{_0x559432=await exchange[_0xb3f97(0x118)](),mybalances=_0x559432[_0xb3f97(0x181)];if(!_0x59800a)for(const [_0x4226b3,_0x2327f3]of Object[_0xb3f97(0x103)](mybalances)){_0x450a75[_0xb3f97(0x146)](_0x4226b3);}else config[_0xb3f97(0xfa)][_0xb3f97(0x94)](_0x302463=>{const _0x35c844=_0xb3f97;if(!_0x302463['excluded'])_0x450a75[_0x35c844(0x146)](_0x302463[_0x35c844(0xab)]);});if(_0x3ae663=='')for(const [_0x2fe8a6,_0x4eaedd]of Object[_0xb3f97(0x103)](mybalances)){_0x4eaedd[_0xb3f97(0xca)]()!=0x0&&_0x42723f[_0xb3f97(0x146)]({'coin':_0x2fe8a6});}else{let _0x30b801=![],_0xad490e;allOpenOrders=[];for(const [_0x190552,_0x20be6c]of Object[_0xb3f97(0x103)](mybalances)){if(_0x450a75['includes'](_0x190552)){const _0xa609b7=config[_0xb3f97(0xfa)][_0xb3f97(0x1a7)](_0x27507e=>_0x27507e['coin']==_0x190552),_0x1f021f=_0x190552+'/'+_0x3ae663,_0x1bfb31=_0x3ae663+'/'+_0x190552;_0x30b801=![];if((_0x20be6c[_0xb3f97(0xca)]()!=0x0||_0xa609b7)&&(allSymbols[_0xb3f97(0x197)](_0x1f021f)||_0x190552==_0x3ae663))_0x190552!=_0x3ae663&&(_0x269aa4['push'](_0x1f021f),_0x253d89&&(_0xad490e=await exchange[_0xb3f97(0xf5)](_0x1f021f),_0xad490e[_0xb3f97(0xe6)]>0x0&&(_0x30b801=!![]))),_0x42723f[_0xb3f97(0x146)]({'coin':_0x190552,'symbol':_0x1f021f,'reverse':![],'number':Math[_0xb3f97(0x11f)](_0x20be6c+(_0xa609b7&&_0xa609b7[_0xb3f97(0x134)]||0x0),0x0),'order':_0x30b801});else(_0x20be6c[_0xb3f97(0xca)]()!=0x0||_0xa609b7)&&allSymbols[_0xb3f97(0x197)](_0x1bfb31)&&(_0x190552!=_0x3ae663&&(_0x269aa4[_0xb3f97(0x146)](_0x1bfb31),_0x253d89&&(_0xad490e=await exchange['fetchOpenOrders'](_0x1bfb31),_0xad490e[_0xb3f97(0xe6)]>0x0&&(_0x30b801=!![]))),_0x42723f[_0xb3f97(0x146)]({'coin':_0x190552,'symbol':_0x1bfb31,'reverse':!![],'number':Math[_0xb3f97(0x11f)](_0x20be6c+(_0xa609b7&&_0xa609b7[_0xb3f97(0x134)]||0x0),0x0),'order':_0x30b801}));}_0x30b801&&allOpenOrders['push'](_0xad490e[0x0]);}_0x253d89&&allOpenOrders[_0xb3f97(0xe6)]==0x0&&(lockOrders&&validateOrders(_0xb3f97(0x143)));}}catch(_0x355ced){if(!_0x59800a){if(_0x355ced['toString']()['includes'](_0xb3f97(0xdc)))return logHistory(_0xb3f97(0xaa),_0xb3f97(0x8c)),![];else{if(_0x355ced[_0xb3f97(0xca)]()[_0xb3f97(0x197)]('AuthenticationError'))return logHistory(_0xb3f97(0xaa),_0xb3f97(0xc3)),![];else{if(_0x355ced[_0xb3f97(0xca)]()[_0xb3f97(0x197)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0xb3f97(0xaa),_0xb3f97(0xaf)),![];else await handleError(_0x355ced,_0xb3f97(0x119));}}}else await handleError(_0x355ced,_0xb3f97(0x119));}return _0x42723f;}async function getPortfolio(_0x27d3a6){const _0x429ced=_0x1a38b9;let _0x83f0b8=[],_0x2440fc=[],_0x538031,_0x4284fe=[],_0x344ce7,_0x13c1df;_0x27d3a6['apiKey']===_0x429ced(0xbd)||_0x27d3a6[_0x429ced(0x167)]===_0x429ced(0xbd)?(_0x344ce7=config[_0x429ced(0xd5)],_0x13c1df=config[_0x429ced(0x167)]):(_0x344ce7=_0x27d3a6['apiKey'],_0x13c1df=_0x27d3a6[_0x429ced(0x167)]);await initExchange(_0x344ce7,_0x13c1df);let _0x4ed4dc=await loadSymbols();if(_0x4ed4dc){_0x4284fe=await getCoins(![],![],_0x27d3a6[_0x429ced(0x121)]);if(_0x4284fe===![])proxyEmit('portfolio',![]);else{if(_0x27d3a6[_0x429ced(0x121)]=='')proxyEmit(_0x429ced(0xfa),_0x4284fe);else{_0x4284fe[_0x429ced(0x94)](_0x3eb8df=>{const _0x40e661=_0x429ced;if(_0x3eb8df[_0x40e661(0xab)]!=_0x27d3a6[_0x40e661(0x121)])_0x83f0b8[_0x40e661(0x146)](_0x3eb8df[_0x40e661(0x1a9)]);});try{_0x2440fc=await exchange[_0x429ced(0xf1)](_0x83f0b8);}catch(_0x4c22d3){await handleError(_0x4c22d3,_0x429ced(0x10b));}_0x4284fe[_0x429ced(0x94)](_0x8e5b8=>{const _0x555c2c=_0x429ced;_0x8e5b8[_0x555c2c(0xab)]!=_0x27d3a6['basecoin']?_0x538031=_0x8e5b8['reverse']?0x1/_0x2440fc[_0x8e5b8[_0x555c2c(0x1a9)]][_0x555c2c(0x127)]:_0x2440fc[_0x8e5b8[_0x555c2c(0x1a9)]][_0x555c2c(0x127)]:_0x538031=0x1,_0x8e5b8[_0x555c2c(0x17c)]=formatResult(_0x538031,0x8);}),proxyEmit(_0x429ced(0xfa),_0x4284fe);}}}else proxyEmit(_0x429ced(0xfa),![]);}function checkMinimums(_0x2d58bc){const _0xaeae74=_0x1a38b9;let _0x3000ee=!![];const _0x3097d4=!_0x2d58bc['reverse']?markets[_0x2d58bc[_0xaeae74(0x1a9)]]['limits']['amount']['min']:markets[_0x2d58bc[_0xaeae74(0x1a9)]][_0xaeae74(0x182)]['cost']['min'],_0x102649=!_0x2d58bc[_0xaeae74(0x139)]?markets[_0x2d58bc['symbol']][_0xaeae74(0x182)]['cost'][_0xaeae74(0x19e)]:markets[_0x2d58bc[_0xaeae74(0x1a9)]][_0xaeae74(0x182)][_0xaeae74(0x1b4)]['min'],_0xf63e84=markets[_0x2d58bc[_0xaeae74(0x1a9)]][_0xaeae74(0x13c)][_0xaeae74(0x1b4)];_0x2d58bc[_0xaeae74(0x100)]=formatResultTruncate(_0x2d58bc[_0xaeae74(0x100)],_0xf63e84);if(Math[_0xaeae74(0x96)](_0x2d58bc['trade'])<_0x3097d4)_0x3000ee=![];if(Math['abs'](_0x2d58bc[_0xaeae74(0x100)])*_0x2d58bc[_0xaeae74(0x127)]<_0x102649)_0x3000ee=![];if(_0x2d58bc[_0xaeae74(0x8e)]==_0xaeae74(0x1af)){let _0x2a2450=config['portfolio']['find'](_0x3896b0=>_0x3896b0[_0xaeae74(0xab)]==_0x2d58bc['coin']);if(_0x2a2450['offset']>0x0){if(Math[_0xaeae74(0x96)](_0x2d58bc[_0xaeae74(0x100)])>_0x2d58bc[_0xaeae74(0x15f)]-_0x2a2450[_0xaeae74(0x134)])_0x3000ee=![];}else{if(Math[_0xaeae74(0x96)](_0x2d58bc['trade'])>_0x2d58bc[_0xaeae74(0x15f)])_0x3000ee=![];}}if(_0x2d58bc[_0xaeae74(0x8e)]==_0xaeae74(0x195)){let _0x186a6a=config['portfolio']['find'](_0x4fdf63=>_0x4fdf63[_0xaeae74(0xab)]==config[_0xaeae74(0x121)]),_0x1d773d=currentCoins[_0xaeae74(0x1a7)](_0x2ff7fd=>_0x2ff7fd[_0xaeae74(0xab)]==config[_0xaeae74(0x121)]);if(_0x186a6a[_0xaeae74(0x134)]>0x0){if(Math[_0xaeae74(0x96)](_0x2d58bc[_0xaeae74(0x100)])*_0x2d58bc[_0xaeae74(0x127)]>_0x1d773d[_0xaeae74(0x15f)]-_0x186a6a[_0xaeae74(0x134)])_0x3000ee=![];}else{if(Math[_0xaeae74(0x96)](_0x2d58bc[_0xaeae74(0x100)])*_0x2d58bc[_0xaeae74(0x127)]>_0x1d773d['number'])_0x3000ee=![];}}return _0x3000ee;}async function getBalances(){const _0x6caced=_0x1a38b9;let _0x2aa9cc=0x0,_0x1b8106;const _0x237ec8=config['threshold'];if(config[_0x6caced(0x155)]&&config[_0x6caced(0xed)]<0x0)await validate24hChanges();currentCoins[_0x6caced(0x94)](_0x33cacc=>{const _0xdb8207=_0x6caced;if(_0x33cacc['coin']!=config[_0xdb8207(0x121)]){let _0x40cbd5=global[_0xdb8207(0x135)][noslash(_0x33cacc[_0xdb8207(0x1a9)])];_0x1b8106=_0x33cacc[_0xdb8207(0x139)]?0x1/_0x40cbd5:_0x40cbd5;}else _0x1b8106=0x1;let _0xc9f679=_0x33cacc[_0xdb8207(0x15f)]*_0x1b8106;_0x2aa9cc+=_0xc9f679,_0x33cacc[_0xdb8207(0x127)]=formatResult(Number(_0x1b8106),0x8),_0x33cacc['value']=_0xc9f679;}),currentCoins[_0x6caced(0x94)](_0x1b5219=>{const _0x9c4c00=_0x6caced;let _0x4af56d=config[_0x9c4c00(0xfa)][_0x9c4c00(0x1a7)](_0x8b00b7=>_0x8b00b7[_0x9c4c00(0xab)]==_0x1b5219[_0x9c4c00(0xab)]),_0x2ed960=Number(_0x4af56d[_0x9c4c00(0x186)]),_0x5dd17c=_0x1b5219['value']/_0x2aa9cc*0x64,_0x230ab2=_0x2ed960*_0x2aa9cc/0x64/_0x1b5219[_0x9c4c00(0x127)]-_0x1b5219[_0x9c4c00(0x15f)];_0x1b5219['distribution']=formatResult(_0x5dd17c,0x3),_0x1b5219[_0x9c4c00(0x158)]=formatResult(_0x2ed960,0x3),_0x1b5219[_0x9c4c00(0x100)]=formatResult(_0x230ab2,0x8),_0x1b5219['side']='',_0x1b5219[_0x9c4c00(0x1b3)]=![];if(_0x1b5219[_0x9c4c00(0xab)]!=config[_0x9c4c00(0x121)]){if(_0x1b5219[_0x9c4c00(0x186)]>_0x2ed960)_0x1b5219[_0x9c4c00(0x8e)]='sell',_0x1b5219[_0x9c4c00(0x1b3)]=checkMinimums(_0x1b5219);else _0x1b5219[_0x9c4c00(0x186)]<_0x2ed960&&(_0x1b5219['side']=_0x9c4c00(0x195),_0x1b5219[_0x9c4c00(0x1b3)]=checkMinimums(_0x1b5219));}_0x1b5219['delta']=_0x1b5219[_0x9c4c00(0x186)]/_0x1b5219[_0x9c4c00(0x158)]-0x1;}),currentCoins['sort']((_0x122c89,_0x506c96)=>_0x122c89[_0x6caced(0x160)]<_0x506c96[_0x6caced(0x160)]?0x1:_0x506c96['delta']<_0x122c89['delta']?-0x1:0x0);const _0x7a3307=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x7a3307['eur'],'usd':_0x7a3307[_0x6caced(0xe9)],'portfolio':JSON[_0x6caced(0x95)](currentCoins),'threshold':_0x237ec8},proxyEmit(_0x6caced(0xda),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x237ec8});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x237ec8});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5a9714=_0x1a38b9;if(!lastBalances)return;let _0x22ab4d=[],_0x44f3ed,_0x556bab=JSON[_0x5a9714(0x19c)](lastBalances['portfolio']);_0x556bab[_0x5a9714(0x106)]((_0x3626d3,_0x2180dd)=>_0x3626d3[_0x5a9714(0xab)]>_0x2180dd['coin']?0x1:_0x2180dd[_0x5a9714(0xab)]>_0x3626d3[_0x5a9714(0xab)]?-0x1:0x0),_0x556bab[_0x5a9714(0x94)](_0x5ed05b=>{const _0x5402b2=_0x5a9714;let _0x3083b4={'coin':_0x5ed05b[_0x5402b2(0xab)],'number':_0x5ed05b[_0x5402b2(0x15f)],'price':_0x5ed05b['last']};_0x22ab4d[_0x5402b2(0x146)](_0x3083b4);});const _0x3ac469=await getFiat();_0x44f3ed={'date':lastBalances[_0x5a9714(0xcd)]['split']('\x20')[0x0],'eur':_0x3ac469['eur'],'usd':_0x3ac469['usd'],'coins':_0x22ab4d};let _0x1a8509=dbPerformance[_0x5a9714(0x92)](_0x5a9714(0xcf))[_0x5a9714(0x1a7)]({'date':_0x44f3ed['date']})[_0x5a9714(0x14b)]();_0x1a8509?_0x44f3ed[_0x5a9714(0x148)]!=config['startdate']&&dbPerformance[_0x5a9714(0x92)]('data')[_0x5a9714(0x1a7)]({'date':_0x44f3ed['date']})[_0x5a9714(0x150)](_0x44f3ed)['write']():dbPerformance[_0x5a9714(0x92)]('data')[_0x5a9714(0x146)](_0x44f3ed)[_0x5a9714(0x12e)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3de481=_0x1a38b9;let _0x506448=[];if(dbPerformance[_0x3de481(0x1ab)](_0x3de481(0xcf))[_0x3de481(0x14b)]()){let _0xd0b7e3=dbPerformance[_0x3de481(0x92)](_0x3de481(0xcf))[_0x3de481(0x14d)]()[_0x3de481(0x172)](_0x3de481(0x148))[_0x3de481(0x14b)](),_0x4ae746=[...config[_0x3de481(0xad)]];_0x4ae746[_0x3de481(0x106)]((_0x48231e,_0x29abef)=>_0x48231e[_0x3de481(0x148)]>_0x29abef[_0x3de481(0x148)]?-0x1:_0x29abef[_0x3de481(0x148)]>_0x48231e['date']?0x1:0x0);let _0xa29a0=0x1,_0x42f307=[],_0x160f33=0x0;_0xd0b7e3[_0x3de481(0xf8)]()[_0x3de481(0x139)]()[_0x3de481(0x94)]((_0x23f0b8,_0x49b5d1)=>{const _0x33aecb=_0x3de481;if(_0x4ae746[_0x160f33]){if(_0xd0b7e3[_0xd0b7e3['length']-_0x49b5d1]&&_0x4ae746[_0x160f33][_0x33aecb(0x148)]==_0xd0b7e3[_0xd0b7e3[_0x33aecb(0xe6)]-_0x49b5d1]['date']){if(_0x49b5d1<_0xd0b7e3[_0x33aecb(0xe6)]){let _0x3cfcaf=0x0,_0x22e51f=0x0;_0xd0b7e3[_0xd0b7e3['length']-_0x49b5d1]['coins'][_0x33aecb(0x94)](_0x1d16e3=>{const _0x272b75=_0x33aecb;_0x22e51f+=_0x1d16e3[_0x272b75(0x15f)]*_0x1d16e3[_0x272b75(0x17c)];}),_0x4ae746[_0x160f33]['changes']['forEach'](_0x3fadcd=>{const _0x5dd5a6=_0x33aecb;_0x3cfcaf+=_0x3fadcd[_0x5dd5a6(0x15f)]*_0x3fadcd[_0x5dd5a6(0x17c)];}),_0xa29a0*=_0x3cfcaf/(_0x22e51f-_0x3cfcaf)+0x1;}_0x160f33++;}}let _0x2e5053=0x0;_0x23f0b8[_0x33aecb(0x112)][_0x33aecb(0x94)](_0x43e813=>{_0x2e5053+=_0x43e813['number']*_0x43e813['price'];}),_0x42f307[_0xd0b7e3['length']-_0x49b5d1-0x1]=_0x2e5053*(_0xa29a0-0x1);});let _0x20c7b9=[];_0x4ae746=[...config[_0x3de481(0xad)]]||[];let _0x914f4a=0x0;_0x160f33=0x0,_0xd0b7e3[_0x3de481(0x94)]((_0x2dd8ad,_0x5f5cd2)=>{const _0x3f8dbb=_0x3de481;if(_0x4ae746[_0x160f33]){const _0xef6a27=fns[_0x3f8dbb(0x19c)](_0x4ae746[_0x160f33]['date'],_0x3f8dbb(0x105),new Date()),_0x630c5=fns[_0x3f8dbb(0x19c)](_0x2dd8ad[_0x3f8dbb(0x148)],_0x3f8dbb(0x105),new Date());if(fns[_0x3f8dbb(0x9b)](_0xef6a27,_0x630c5)){let _0x5bdb03=0x0;_0x4ae746[_0x160f33]['changes'][_0x3f8dbb(0x94)](_0x1f87fd=>{const _0x3d3d46=_0x3f8dbb;!_0x20c7b9[_0x1f87fd[_0x3d3d46(0xab)]]?_0x20c7b9[_0x1f87fd[_0x3d3d46(0xab)]]=_0x1f87fd[_0x3d3d46(0x15f)]:(_0x5bdb03=_0x20c7b9[_0x1f87fd[_0x3d3d46(0xab)]],_0x20c7b9[_0x1f87fd[_0x3d3d46(0xab)]]+=_0x1f87fd[_0x3d3d46(0x15f)]);const _0x51da75=_0x2dd8ad[_0x3d3d46(0x112)][_0x3d3d46(0x1a7)](_0x4dad9e=>_0x4dad9e[_0x3d3d46(0xab)]==_0x1f87fd[_0x3d3d46(0xab)]);(!_0x51da75||_0x51da75[_0x3d3d46(0x15f)]==0x0)&&(_0x914f4a+=(-_0x1f87fd['number']-_0x5bdb03)*_0x1f87fd[_0x3d3d46(0x17c)]);}),_0x160f33++;}}_0x2dd8ad[_0x3f8dbb(0x112)][_0x3f8dbb(0x94)]((_0x4c27cc,_0x2c38e1)=>{const _0x3e86a4=_0x3f8dbb;_0x20c7b9[_0x4c27cc['coin']]&&(_0x4c27cc={..._0x4c27cc,'initial':_0x20c7b9[_0x4c27cc[_0x3e86a4(0xab)]]}),_0x2dd8ad['coins'][_0x2c38e1]=_0x4c27cc;}),_0x506448['push']({'date':_0x2dd8ad['date'],'eur':_0x2dd8ad[_0x3f8dbb(0x16c)],'usd':_0x2dd8ad[_0x3f8dbb(0xe9)],'offset':_0x42f307[_0x5f5cd2],'netoffset':_0x914f4a,'coins':_0x2dd8ad[_0x3f8dbb(0x112)]});});}return _0x506448;}function emitPerformance(_0x2479bb){const _0x2622b4=_0x1a38b9;_0x2479bb['length']!==0x0?(proxyEmit(_0x2622b4(0x199),_0x2479bb),lastPerformanceEmitted=getDate()):proxyEmit(_0x2622b4(0x199),[]);}function _0x5f20(_0x35d635,_0x532778){const _0x4bef7e=_0x504c();return _0x5f20=function(_0x2d4da7,_0xd8571){_0x2d4da7=_0x2d4da7-0x89;let _0x504cba=_0x4bef7e[_0x2d4da7];return _0x504cba;},_0x5f20(_0x35d635,_0x532778);}function getPerf(_0x290e2c,_0x2290a4){const _0x29c553=_0x1a38b9;let _0x340b00=0x0,_0x169f71=0x0,_0x489853=0x0;_0x290e2c[_0x29c553(0x112)]['forEach'](_0x401046=>{const _0x539cb9=_0x29c553;_0x340b00+=_0x401046[_0x539cb9(0x15f)]*_0x401046[_0x539cb9(0x17c)];});_0x2290a4&&(_0x340b00+=_0x290e2c[_0x29c553(0x134)]);if(config['basecoin']===_0x29c553(0xf3)||config[_0x29c553(0x121)]===_0x29c553(0x19a))_0x169f71=_0x340b00*_0x290e2c[_0x29c553(0x16c)],_0x489853=_0x340b00*_0x290e2c['usd'];else{if(config['basecoin']===_0x29c553(0x91)||config['basecoin']===_0x29c553(0x9e))_0x169f71=_0x340b00*_0x290e2c[_0x29c553(0x16c)]/_0x290e2c[_0x29c553(0xe9)],_0x489853=_0x340b00;else config[_0x29c553(0x121)]==='EUR'&&(_0x169f71=_0x340b00,_0x489853=_0x340b00*_0x290e2c[_0x29c553(0xe9)]/_0x290e2c[_0x29c553(0x16c)]);}return[_0x340b00,_0x169f71,_0x489853];}async function getStartingBalances(_0xe8736,_0x10983a=!![]){const _0xb98149=_0x1a38b9;if(_0xe8736[_0xb98149(0xe6)]!==0x0){const [_0x40875f,_0x4cf6b2,_0x9b5a08]=getPerf(_0xe8736[0x0],!![]);let _0x4cb137=[];config[_0xb98149(0xfa)][_0xb98149(0x94)](_0x17ea80=>{const _0x4e5ac3=_0xb98149;let _0x61229a=0x0,_0x5e6708;config[_0x4e5ac3(0xad)][_0x4e5ac3(0x94)](_0x373f3e=>{const _0x172461=_0x4e5ac3;let _0x59ac1a=_0x373f3e['changes'][_0x172461(0x1a7)](_0x1049bc=>_0x1049bc[_0x172461(0xab)]==_0x17ea80['coin']);if(_0x59ac1a){_0x61229a+=_0x59ac1a[_0x172461(0x15f)];if(!_0x5e6708)_0x5e6708=_0x59ac1a[_0x172461(0x17c)];}}),_0x4cb137[_0x4e5ac3(0x146)]({'coin':_0x17ea80[_0x4e5ac3(0xab)],'number':_0x61229a,'initialprice':_0x5e6708});});const _0x23dcd0={'basecoin':_0x40875f,'eur':_0x4cf6b2,'usd':_0x9b5a08,'coins':_0x4cb137};if(_0x10983a)proxyEmit(_0xb98149(0xee),_0x23dcd0);return _0x23dcd0;}}function headlessMode(_0x492f8b){const _0x4f025a=_0x1a38b9;let _0x2710c5=_0x492f8b['portfolio'],_0x3f4e71=_0x492f8b[_0x4f025a(0x15e)],_0x31cf45=[];for(let _0x4cefd9 of _0x2710c5){if(_0x4cefd9[_0x4f025a(0xab)]!=config['basecoin']){if(_0x4cefd9[_0x4f025a(0x160)]>=_0x3f4e71/0x64){if(_0x4cefd9[_0x4f025a(0x1b3)])_0x31cf45[_0x4f025a(0x146)](_0x4cefd9);}else{if(_0x4cefd9[_0x4f025a(0x160)]<=-_0x3f4e71/0x64){if(_0x4cefd9['valid'])_0x31cf45[_0x4f025a(0x146)](_0x4cefd9);}}}}_0x31cf45[_0x4f025a(0xe6)]>0x0&&placeOrder(_0x31cf45);}function notifyBalance(_0x918078){const _0x279fba=_0x1a38b9;let _0x35af58=_0x918078[_0x279fba(0xfa)],_0x29bfdb=_0x918078[_0x279fba(0x15e)],_0x23b2fb=[];for(let _0x55fc1c of _0x35af58){if(_0x55fc1c[_0x279fba(0xab)]!=config[_0x279fba(0x121)]){if(_0x55fc1c[_0x279fba(0x160)]>=_0x29bfdb/0x64){if(_0x55fc1c[_0x279fba(0x1b3)])_0x23b2fb['push'](_0x55fc1c);}else{if(_0x55fc1c[_0x279fba(0x160)]<=-_0x29bfdb/0x64){if(_0x55fc1c[_0x279fba(0x1b3)])_0x23b2fb[_0x279fba(0x146)](_0x55fc1c);}}}}if(_0x23b2fb[_0x279fba(0xe6)]>0x0){let _0x56a2ec=_0x23b2fb[_0x279fba(0x17d)](_0x2acea3=>_0x2acea3[_0x279fba(0xab)]);_0x56a2ec[_0x279fba(0x106)]();let _0x3a9233=_0x56a2ec[_0x279fba(0xb1)](',\x20');if(lastCoinsToBalance!==_0x3a9233)logHistory(_0x279fba(0xe0),_0x279fba(0x17b)+_0x3a9233);lastCoinsToBalance=_0x3a9233;}}function symbolToCoin(_0x6c8841){const _0x6dc00f=_0x1a38b9;let _0x4a449e;if(_0x6c8841[_0x6dc00f(0x197)]('/'+config[_0x6dc00f(0x121)]))_0x4a449e=_0x6c8841[_0x6dc00f(0x13a)]('/'+config[_0x6dc00f(0x121)],'');if(_0x6c8841[_0x6dc00f(0x197)](config[_0x6dc00f(0x121)]+'/'))_0x4a449e=_0x6c8841[_0x6dc00f(0x13a)](config['basecoin']+'/','');return _0x4a449e;}async function unlockOrders(){const _0x151ef0=_0x1a38b9;currentCoins=await getCoins(),validateOrdersState=_0x151ef0(0x1a1);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x3878c3){const _0xc64773=_0x1a38b9;if(_0x3878c3)validateOrdersState=_0x3878c3;let _0x20ea66=[],_0x36ed68=config[_0xc64773(0x18a)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xc64773(0x10e)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;logging(validateOrdersState+_0xc64773(0xa9)+_0x3878c3),lastOrders[_0xc64773(0x94)](_0x5c43a3=>{const _0x5229f8=_0xc64773;let _0x546ff2=![];_0x5c43a3['filled']>0x0&&(_0x546ff2=!![]),_0x20ea66[_0x5229f8(0x146)](_0x546ff2),_0x546ff2&&config[_0x5229f8(0x18a)]!=_0x5229f8(0x101)&&logHistory(_0x5229f8(0x126),_0x5229f8(0x102)+_0x5c43a3[_0x5229f8(0x1a9)]+'\x20'+_0x5c43a3['side']+'\x20#'+formatResult(_0x5c43a3[_0x5229f8(0xfb)],0x8)+'\x20@'+formatResult(_0x5c43a3['price'],0x8));}),_0x20ea66[_0xc64773(0x94)]((_0x2c2985,_0x65b8bf)=>{const _0x4a5433=_0xc64773;if(_0x2c2985)lastOrders[_0x4a5433(0x18f)](_0x65b8bf,0x1);});const _0x31daef=coolingDown?_0xc64773(0xec):_0xc64773(0x15b);if(validateOrdersState==_0xc64773(0x1a1))validateOrdersState='ongoing',_0x20ea66[_0xc64773(0x197)](![])?config['ordertype']==_0xc64773(0x101)?logHistory('error',_0xc64773(0x154)):logHistory(_0xc64773(0xaa),_0xc64773(0x149)):await unlockOrders();else{if(validateOrdersState==_0xc64773(0x1a2)){if(_0x20ea66[_0xc64773(0x197)](![])){}else config['ordertype']=='market'?logHistory(_0xc64773(0xe0),_0xc64773(0x107)+_0x31daef):logHistory('success','Order(s)\x20filled\x20-\x20'+_0x31daef),await unlockOrders();}else{if(validateOrdersState==_0xc64773(0x13f))_0x20ea66[_0xc64773(0x197)](![])?config[_0xc64773(0x18a)]==_0xc64773(0x101)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0xc64773(0x157)](_0x36ed68*validateOrderInterval/0xea60)+_0xc64773(0xc1)+_0x31daef):(await cancelOrders(),logHistory(_0xc64773(0xe0),_0xc64773(0x130)+Math[_0xc64773(0x157)](_0x36ed68*validateOrderInterval/0xea60)+_0xc64773(0xc1)+_0x31daef)):logHistory(_0xc64773(0xe0),_0xc64773(0x1a3)+_0x31daef),await unlockOrders();else{if(validateOrdersState==_0xc64773(0x143)){if(config[_0xc64773(0x18a)]!=_0xc64773(0x101))logHistory(_0xc64773(0xe0),'No\x20more\x20open\x20orders\x20-\x20'+_0x31daef);await unlockOrders();}}}}}async function cancelOrders(){const _0x2e6d66=_0x1a38b9;lastOrders[_0x2e6d66(0x94)](async _0x1889c1=>{const _0x481569=_0x2e6d66;try{const _0x2a77c2=await exchange[_0x481569(0xc8)](_0x1889c1['orderId'],_0x1889c1[_0x481569(0x1a9)]);}catch(_0x2a1350){if(_0x2a1350['toString']()[_0x481569(0x197)](_0x481569(0x111))){}else await handleError(_0x2a1350,_0x481569(0x177));}});}async function initCoinResults(){const _0x2024a1=_0x1a38b9;let _0x75a71b=[];config[_0x2024a1(0xfa)][_0x2024a1(0x94)](_0x2635d1=>{const _0x108802=_0x2024a1;if(!_0x2635d1['excluded']&&_0x2635d1[_0x108802(0xab)]!=config[_0x108802(0x121)]){let _0x2a3f05=dbCoinResults[_0x108802(0x92)](_0x108802(0x112))['find']({'coin':_0x2635d1[_0x108802(0xab)]})[_0x108802(0x14b)]();if(!_0x2a3f05){const _0x27fab2=currentCoins[_0x108802(0x1a7)](_0x2f6eca=>_0x2f6eca['coin']==_0x2635d1['coin']),_0x34c19b=global[_0x108802(0x135)][noslash(_0x2635d1[_0x108802(0x1a9)])];let _0xc45576=_0x27fab2?_0x27fab2['number']:null,_0x5b3109=_0x2635d1[_0x108802(0x139)]?0x1/_0x34c19b:_0x34c19b,_0xb7a275;config['liquidity'][_0x108802(0x94)](_0x2c6273=>{const _0x429768=_0x108802;!_0xb7a275&&(_0xb7a275=_0x2c6273['changes'][_0x429768(0x1a7)](_0x89bcc1=>_0x89bcc1[_0x429768(0xab)]==_0x2635d1[_0x429768(0xab)]),_0xb7a275&&(_0xc45576=_0xb7a275[_0x429768(0x15f)],_0x5b3109=_0xb7a275[_0x429768(0x17c)]));}),_0x75a71b[_0x108802(0x146)]({'coin':_0x2635d1['coin'],'number':_0xc45576,'price':_0x5b3109});}}}),_0x75a71b[_0x2024a1(0x94)](_0x3734b1=>{const _0x1cb924=_0x2024a1,_0x1eba01={'coin':_0x3734b1[_0x1cb924(0xab)],'number':_0x3734b1[_0x1cb924(0x15f)],'breakeven':_0x3734b1['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1cb924(0x92)]('coins')[_0x1cb924(0x146)](_0x1eba01)[_0x1cb924(0x12e)]();});}async function updateCoinResults(_0x1c0990,_0x73bde4=![]){const _0x21c7f1=_0x1a38b9;let _0x5e7302,_0x57af62,_0x2f841f,_0x578a8a,_0x5021c1,_0xa20493,_0x1a9c1a=dbCoinResults[_0x21c7f1(0x92)](_0x21c7f1(0x112))[_0x21c7f1(0x1a7)]({'coin':_0x1c0990[_0x21c7f1(0xab)]})[_0x21c7f1(0x14b)]();!_0x1a9c1a&&await initCoinResults();_0x1c0990[_0x21c7f1(0x139)]&&(_0xa20493={'filled':_0x1c0990['filled']*_0x1c0990[_0x21c7f1(0x17c)],'amount':_0x1c0990[_0x21c7f1(0xfb)]*_0x1c0990[_0x21c7f1(0x17c)],'side':_0x1c0990['side']==_0x21c7f1(0x1af)?'buy':_0x21c7f1(0x1af),'price':0x1/_0x1c0990[_0x21c7f1(0x17c)]},_0x1c0990={..._0x1c0990,..._0xa20493});if(_0x73bde4)_0x57af62=_0x1c0990[_0x21c7f1(0x8e)]==_0x21c7f1(0x195)?_0x1a9c1a[_0x21c7f1(0x15f)]+_0x1c0990[_0x21c7f1(0xfb)]:_0x1a9c1a['number']-_0x1c0990[_0x21c7f1(0xfb)];else{const _0x516cab=currentCoins[_0x21c7f1(0x1a7)](_0x47bdcb=>_0x47bdcb['coin']==_0x1c0990['coin']);_0x57af62=_0x516cab[_0x21c7f1(0x15f)];}if(_0x1c0990['fee']&&_0x1c0990[_0x21c7f1(0x11b)][_0x21c7f1(0xb8)]==config['basecoin'])_0x5e7302=_0x1c0990[_0x21c7f1(0x11b)][_0x21c7f1(0xa8)];else{if(_0x1c0990['fee']&&_0x1c0990[_0x21c7f1(0x11b)]['currency']==_0x21c7f1(0x123)&&!_0x73bde4)_0x5e7302=_0x1c0990[_0x21c7f1(0x11b)][_0x21c7f1(0xa8)]*global[_0x21c7f1(0x135)][_0x21c7f1(0x123)+config['basecoin']];else _0x5e7302=defaultFee*_0x1c0990['filled']*_0x1c0990[_0x21c7f1(0x17c)];}_0x1c0990[_0x21c7f1(0x8e)]==_0x21c7f1(0x195)?(_0x2f841f=_0x57af62!=0x0?(_0x1a9c1a[_0x21c7f1(0x12d)]*_0x1a9c1a[_0x21c7f1(0x15f)]+_0x1c0990[_0x21c7f1(0x17c)]*(_0x57af62-_0x1a9c1a[_0x21c7f1(0x15f)])+_0x5e7302)/_0x57af62:0x0,_0x578a8a=_0x1a9c1a[_0x21c7f1(0x131)]):(_0x2f841f=_0x57af62!=0x0?(_0x1a9c1a[_0x21c7f1(0x12d)]*_0x1a9c1a[_0x21c7f1(0x15f)]-_0x1c0990['price']*(_0x1a9c1a['number']-_0x57af62)+_0x5e7302)/_0x57af62:0x0,_0x578a8a=_0x1a9c1a[_0x21c7f1(0x131)]+(_0x1c0990['price']-_0x1a9c1a['breakeven'])*_0x1c0990[_0x21c7f1(0xfb)]);_0x5021c1=(_0x1c0990[_0x21c7f1(0x17c)]-_0x2f841f-_0x5e7302/_0x1c0990['filled'])*_0x57af62;let _0x1ade64={'coin':_0x1c0990[_0x21c7f1(0xab)],'number':_0x57af62,'breakeven':formatResult(_0x2f841f,0x8),'realized':formatResult(_0x578a8a,0x8),'unrealized':formatResult(_0x5021c1,0x8),'fees':formatResult(_0x1a9c1a[_0x21c7f1(0x14f)]+_0x5e7302,0x8),'sells':_0x1c0990[_0x21c7f1(0x8e)]==_0x21c7f1(0x1af)?_0x1a9c1a[_0x21c7f1(0xb2)]+0x1:_0x1a9c1a[_0x21c7f1(0xb2)],'buys':_0x1c0990[_0x21c7f1(0x8e)]==_0x21c7f1(0x195)?_0x1a9c1a[_0x21c7f1(0x140)]+0x1:_0x1a9c1a['buys']};dbCoinResults[_0x21c7f1(0x92)](_0x21c7f1(0x112))['find']({'coin':_0x1c0990['coin']})[_0x21c7f1(0x150)](_0x1ade64)[_0x21c7f1(0x12e)]();if(!_0x73bde4){if(_0x1c0990[_0x21c7f1(0x11b)]&&_0x1c0990[_0x21c7f1(0x11b)][_0x21c7f1(0xb8)]=='BNB'){const _0x524af0=currentCoins[_0x21c7f1(0x1a7)](_0x184b4b=>_0x184b4b['coin']=='BNB');if(_0x524af0){let _0x36f8ae=dbCoinResults[_0x21c7f1(0x92)](_0x21c7f1(0x112))[_0x21c7f1(0x1a7)]({'coin':_0x21c7f1(0x123)})[_0x21c7f1(0x14b)]();_0x1ade64={..._0x36f8ae,'number':_0x524af0[_0x21c7f1(0x15f)]},dbCoinResults[_0x21c7f1(0x92)](_0x21c7f1(0x112))[_0x21c7f1(0x1a7)]({'coin':_0x21c7f1(0x123)})[_0x21c7f1(0x150)](_0x1ade64)[_0x21c7f1(0x12e)]();}}}}async function placeOrder(_0x8c032c){const _0x58b828=_0x1a38b9,_0x490da0=config['ordertype']=='market'?_0x58b828(0x101):_0x58b828(0x1ad);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x158e3b of _0x8c032c){let _0x29403f,_0x19deb5,_0x4f82a3,_0x5ae662,_0x2ea43a,_0x512633=_0x158e3b[_0x58b828(0x1a9)];try{const _0xb3f814=await exchange[_0x58b828(0xf1)]([_0x512633]),_0x2394b1=_0xb3f814[_0x512633];_0x29403f=_0x158e3b['reverse']?0x1/_0x158e3b[_0x58b828(0x127)]:_0x158e3b['last'],_0x19deb5=_0x2394b1[_0x58b828(0xbf)],_0x4f82a3=_0x2394b1[_0x58b828(0x1a4)];_0x158e3b['reverse']?(_0x5ae662=_0x158e3b['side']==_0x58b828(0x195)?_0x58b828(0x1af):_0x58b828(0x195),_0x2ea43a=Math[_0x58b828(0x96)](_0x158e3b[_0x58b828(0x100)])/_0x29403f):(_0x5ae662=_0x158e3b[_0x58b828(0x8e)],_0x2ea43a=Math[_0x58b828(0x96)](_0x158e3b['trade']));_0x490da0==_0x58b828(0x1ad)&&(config['ordertype']==_0x58b828(0x12b)&&(_0x29403f=_0x5ae662=='buy'?_0x19deb5:_0x4f82a3),config['ordertype']=='limit-low'&&(_0x29403f=_0x5ae662==_0x58b828(0x195)?_0x4f82a3:_0x19deb5));_0x2ea43a=formatResult(_0x2ea43a,0x8),_0x29403f=formatResult(_0x29403f,0x8);const _0x2771f8=await exchange['createOrder'](_0x512633,_0x490da0,_0x5ae662,_0x2ea43a,_0x29403f);lastOrders[_0x58b828(0x146)]({'orderId':_0x2771f8['id'],'symbol':_0x512633,'coin':_0x158e3b['coin'],'side':_0x5ae662,'reverse':_0x158e3b[_0x58b828(0x139)],'amount':_0x2771f8[_0x58b828(0x1b4)],'filled':0x0,'price':_0x2771f8[_0x58b828(0x17c)],'fee':_0x2771f8[_0x58b828(0x11b)]});const _0x1c5d08=_0x5ae662==_0x58b828(0x1af)?config[_0x58b828(0x16d)]?String['fromCodePoint']('0x'+config[_0x58b828(0x16d)])+'\x20':'':config[_0x58b828(0x16a)]?String[_0x58b828(0x19b)]('0x'+config['emojibuy'])+'\x20':'',_0x1d5483=_0x490da0==_0x58b828(0x101)?'Market':config[_0x58b828(0x18a)]==_0x58b828(0x12b)?_0x58b828(0xc9):_0x58b828(0xce);if(_0x490da0=='market')logHistory(_0x58b828(0x126),''+_0x1c5d08+_0x1d5483+_0x58b828(0x89)+_0x512633+'\x20'+_0x5ae662+'\x20#'+formatResult(_0x2771f8[_0x58b828(0xfb)],0x8)+'\x20@'+formatResult(_0x2771f8[_0x58b828(0x17c)],0x8));else logHistory(_0x58b828(0x126),''+_0x1c5d08+_0x1d5483+_0x58b828(0x89)+_0x512633+'\x20'+_0x5ae662+'\x20#'+formatResult(_0x2771f8['amount'],0x8)+'\x20@'+formatResult(_0x2771f8['price'],0x8));let _0x18d671=currentCoins[_0x58b828(0x1a7)](_0x4767fd=>_0x4767fd['coin']==_0x158e3b[_0x58b828(0xab)]);_0x18d671[_0x58b828(0x126)]=!![];if(config[_0x58b828(0x1b2)]!=0x0){let _0x1651e8=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x1651e8=cooldownTracker[_0x58b828(0x16f)]();const _0x5dfea0=getTimeStamp();cooldownTracker[_0x58b828(0x146)](_0x5dfea0);if(_0x1651e8){const _0x157175=fns[_0x58b828(0x8d)](new Date(_0x5dfea0),new Date(_0x1651e8));if(_0x157175<cooldownInterval){logHistory('error',_0x58b828(0xe8)+config[_0x58b828(0x1b2)]+_0x58b828(0xff)+cooldownInterval/0x3c+_0x58b828(0x11d)+cooldownPeriod/(0xe10*0x3e8)+_0x58b828(0xcc)),coolingDown=!![];break;}}}}catch(_0x2319ab){if(_0x2319ab[_0x58b828(0xca)]()['includes'](_0x58b828(0x115)))logHistory(_0x58b828(0xaa),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x512633);else{if(_0x2319ab[_0x58b828(0xca)]()[_0x58b828(0x197)](_0x58b828(0x175)))logHistory('error',_0x58b828(0x136)+_0x512633);else await handleError(_0x2319ab,'placeOrder()',_0x512633);}}}if(lastOrders[_0x58b828(0xe6)]!=0x0){lockOrders=!![],validateOrdersState=_0x58b828(0x1a1),setTimeout(function(){validateOrders();},0x1388);const _0x2c3886=config[_0x58b828(0x18a)]==_0x58b828(0x101)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2858af=_0x58b828;validateOrders(_0x2858af(0x13f));},_0x2c3886);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x58b828(0xe0),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x58b828(0x155)]&&logHistory(_0x58b828(0xaa),_0x58b828(0x17e));else lockOrders&&(!config[_0x58b828(0x155)]&&(config[_0x58b828(0x18a)]==_0x58b828(0x101)?logHistory(_0x58b828(0xaa),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x58b828(0xaa),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function restoreOrders(){const _0x3eb66d=_0x1a38b9;let _0x2547cd;lockOrders=!![],validateOrdersState=_0x3eb66d(0x1a2),currentCoins[_0x3eb66d(0x94)](_0x5c405c=>{const _0x216f8e=_0x3eb66d,_0x3be01b=allOpenOrders[_0x216f8e(0x1a7)](_0x299a62=>_0x299a62['symbol']==_0x5c405c['symbol']);_0x3be01b&&(lastOrders['push']({'orderId':_0x3be01b['id'],'symbol':_0x5c405c[_0x216f8e(0x1a9)],'coin':_0x5c405c[_0x216f8e(0xab)],'side':_0x3be01b[_0x216f8e(0x8e)],'reverse':_0x5c405c[_0x216f8e(0x139)],'amount':_0x3be01b['amount'],'filled':0x0,'price':_0x3be01b[_0x216f8e(0x17c)],'fee':_0x3be01b[_0x216f8e(0x11b)]}),_0x5c405c[_0x216f8e(0x126)]=!![],_0x2547cd=_0x3be01b['timestamp']);});const _0x242cf3=new Date()['getTime'](),_0x544ce9=config['ordertype']==_0x3eb66d(0x101)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x2547cd+_0x544ce9>_0x242cf3){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1d8e43=_0x3eb66d;validateOrders(_0x1d8e43(0x13f));},_0x2547cd+_0x544ce9-_0x242cf3);}else validateOrders(_0x3eb66d(0x13f));}function sendPortfolioTelegram(){const _0x53673b=_0x1a38b9,_0x82933=['EUR','BUSD',_0x53673b(0x9e)],_0x348836=_0x82933[_0x53673b(0x197)](config['basecoin'])?0x2:0x8;let _0x456f14='';if(config[_0x53673b(0x9d)])_0x456f14=config['botname']+_0x53673b(0x132);else _0x456f14=_0x53673b(0x189)+botID+_0x53673b(0x132);_0x456f14+=_0x53673b(0x9a),_0x456f14+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x456f14+=_0x53673b(0xb4),currentCoins['forEach'](_0x450272=>{const _0x13a8b3=_0x53673b;_0x456f14+=_0x450272['coin'][_0x13a8b3(0x166)](0x7)+'|\x20'+formatPad(_0x450272[_0x13a8b3(0x186)],0x2,0x6)+'|\x20'+formatPad(_0x450272['target'],0x2,0x6)+'|\x20'+formatPad(_0x450272[_0x13a8b3(0x160)]*0x64,0x2,0x6)+'\x0a';}),_0x456f14+=_0x53673b(0x109),process[_0x53673b(0xf2)]({'telegrammsg':_0x456f14},_0x318750=>{});}function formatPad(_0x5cd3ba,_0xcc149c,_0x49d0a5){const _0x33b0bf=_0x1a38b9,_0x279214=formatResultString(_0x5cd3ba,_0xcc149c);return _0x279214?_0x279214[_0x33b0bf(0x1aa)](_0x49d0a5):''[_0x33b0bf(0x1aa)](_0x49d0a5);}function logHistory(_0x2a497a,_0x449528,_0xb1b1b4=''){const _0xd6bb0=_0x1a38b9;let _0x169d17={'time':getTimeStamp(),'type':_0x2a497a,'event':_0x449528};dbLogs['get'](_0xd6bb0(0x18e))[_0xd6bb0(0x146)](_0x169d17)[_0xd6bb0(0x12e)]();if(_0xb1b1b4=='')_0xb1b1b4=_0x449528;proxyEmit('event',{'log':_0x169d17,'summary':_0xb1b1b4}),process[_0xd6bb0(0xf2)]({'telegram':{..._0x169d17,'botname':config[_0xd6bb0(0x179)],'showname':config['showname']}},_0xf31098=>{}),logging(''+_0x169d17['event']);}function emitHistory(_0x88207d={}){const _0x4a1d2e=_0x1a38b9;Object[_0x4a1d2e(0x13b)](_0x88207d)['length']==0x0&&(_0x88207d={'type':[_0x4a1d2e(0x126),_0x4a1d2e(0x16b)],'event':'','page':0x1});if(_0x88207d[_0x4a1d2e(0xeb)][_0x4a1d2e(0x197)](_0x4a1d2e(0x16b)))_0x88207d['type'][_0x4a1d2e(0x18f)](_0x88207d[_0x4a1d2e(0xeb)][_0x4a1d2e(0x12c)](_0x4a1d2e(0x16b)),0x1,_0x4a1d2e(0xaa),_0x4a1d2e(0xe0));if(dbLogs[_0x4a1d2e(0x1ab)](_0x4a1d2e(0x18e))[_0x4a1d2e(0x14b)]()){let _0x5e3b59=dbLogs['get']('logs')[_0x4a1d2e(0x104)](_0x3646ea=>{const _0x5e18c0=_0x4a1d2e;if(_0x88207d[_0x5e18c0(0xeb)]['length']==0x0)return![];else return _0x88207d[_0x5e18c0(0xeb)][_0x5e18c0(0x197)](_0x3646ea['type']);})[_0x4a1d2e(0x104)](_0x182cd5=>{const _0x1a8d1c=_0x4a1d2e;if(_0x88207d[_0x1a8d1c(0x16b)]=='')return!![];else return _0x182cd5[_0x1a8d1c(0x16b)][_0x1a8d1c(0x168)]()[_0x1a8d1c(0x197)](_0x88207d[_0x1a8d1c(0x16b)]['toLowerCase']());})[_0x4a1d2e(0x172)](_0x4a1d2e(0xcd)),_0x18f779=_0x5e3b59[_0x4a1d2e(0x14b)]()[_0x4a1d2e(0xe6)];_0x5e3b59=_0x5e3b59[_0x4a1d2e(0x139)]()[_0x4a1d2e(0xf8)]((_0x88207d['page']-0x1)*logPageSize,_0x88207d['page']*logPageSize-0x1)[_0x4a1d2e(0x139)]()[_0x4a1d2e(0x14b)](),proxyEmit(_0x4a1d2e(0x178),{'logs':_0x5e3b59,'total':_0x18f779});}else proxyEmit(_0x4a1d2e(0x178),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x34d5b){const _0x96726f=_0x1a38b9;if(dbLogs[_0x96726f(0x1ab)]('logs')[_0x96726f(0x14b)]()){const _0x3ddd1b=dbLogs['get'](_0x96726f(0x18e))['sortBy'](_0x96726f(0xcd))[_0x96726f(0x104)](_0x1d4112=>{const _0x53ed3e=_0x96726f;return _0x1d4112[_0x53ed3e(0xeb)]==_0x53ed3e(0x126);})[_0x96726f(0x14b)]();dbLogs[_0x96726f(0x92)]('logs')[_0x96726f(0xfe)]()[_0x96726f(0x12e)](),dbLogs[_0x96726f(0x92)]('logs')[_0x96726f(0x150)](_0x3ddd1b)[_0x96726f(0x12e)](),emitHistory(_0x34d5b);}}async function pauseBot(_0x140ac6=''){const _0xdcd06a=_0x1a38b9,_0x31bb14=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0xdcd06a(0xdb)](),consecutivePauses=0x1;else{if(_0x31bb14-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process[_0xdcd06a(0xf2)]({'stop':_0xdcd06a(0xbb)},_0xbad16=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0xdcd06a(0xdb)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x140ac6)_0x140ac6+='\x20|\x20';logHistory('error',_0x140ac6+_0xdcd06a(0x1a8)+pauseBotInterval/0xea60+_0xdcd06a(0x122)),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x2e6118=_0x1a38b9;process[_0x2e6118(0xf2)]({'stop':'kill'},_0x6c9660=>{}),await sleep(0x7d0);}async function handleError(_0x16918c,_0x5c95c,_0xf60eb3=''){const _0x597ca9=_0x1a38b9;if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)](_0x597ca9(0x116)))await pauseBot('Binance\x20API\x20blocked');else{if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)]('ExchangeNotAvailable'))await pauseBot(_0x597ca9(0x183));else{if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)]('RequestTimeout'))await pauseBot(_0x597ca9(0xb0));else{if(_0x16918c['toString']()[_0x597ca9(0x197)](_0x597ca9(0xdc)))logHistory('error',_0x5c95c+_0x597ca9(0xb6)),logHistory('error',_0x597ca9(0x190)),await killBot();else{if(_0x16918c[_0x597ca9(0xca)]()['includes'](_0x597ca9(0xc2)))logHistory('error',_0x5c95c+_0x597ca9(0x133)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x597ca9(0xaa),_0x5c95c+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x597ca9(0xaa),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)](_0x597ca9(0x19d)))logHistory(_0x597ca9(0xaa),_0x5c95c+'\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x597ca9(0xaa),_0x597ca9(0x190)),await killBot();else{if(_0x16918c[_0x597ca9(0xca)]()[_0x597ca9(0x197)](_0x597ca9(0xd9)))await pauseBot('API\x20or\x20clock\x20sync\x20issue'),process[_0x597ca9(0xf2)]({'stop':'restart'},_0x235c50=>{});else _0x16918c[_0x597ca9(0xca)]()['includes'](_0x597ca9(0x99))?logHistory(_0x597ca9(0xaa),_0x5c95c+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0xf60eb3):(logging(_0x5c95c+'\x20|\x20Error\x20details:\x20',_0x16918c),await pauseBot(_0x597ca9(0x125)));}}}}}}}}function formatResult(_0x6b9c3c,_0x114065){const _0x4147a0=_0x1a38b9;return parseFloat(_0x6b9c3c[_0x4147a0(0xe4)](_0x114065));}function formatResultTruncate(_0x15479e,_0x24c762){const _0x1fa05d=_0x1a38b9;let _0x33522e=formatResultString(_0x15479e,0xa),_0x21815e=_0x33522e['indexOf']('.');return _0x21815e!=-0x1&&(_0x33522e=_0x33522e[_0x1fa05d(0xf8)](0x0,_0x21815e+_0x24c762+0x1)),Number(_0x33522e);}function formatResultString(_0x2d9ccd,_0x108a18){const _0x2e34fb=_0x1a38b9;let _0x59fc3c;if(!(''+_0x2d9ccd)[_0x2e34fb(0x197)]('e'))_0x59fc3c=+(Math['round'](_0x2d9ccd+'e+'+_0x108a18)+'e-'+_0x108a18);else{let _0x523c82=(''+_0x2d9ccd)[_0x2e34fb(0xf6)]('e'),_0x28a495='';+_0x523c82[0x1]+_0x108a18>0x0&&(_0x28a495='+'),_0x59fc3c=+(Math[_0x2e34fb(0x157)](+_0x523c82[0x0]+'e'+_0x28a495+(+_0x523c82[0x1]+_0x108a18))+'e-'+_0x108a18);}return Number(_0x59fc3c)[_0x2e34fb(0xe4)](_0x108a18);}function logging(_0x638932,_0x464c9d=''){const _0x3cf590=_0x1a38b9;if(config['showname'])console[_0x3cf590(0x16e)](getTimeStamp()+':\x20'+config[_0x3cf590(0x179)]+_0x3cf590(0xc7)+_0x638932,_0x464c9d);else console[_0x3cf590(0x16e)](getTimeStamp()+_0x3cf590(0x10a)+botID+_0x3cf590(0xc7)+_0x638932,_0x464c9d);}function getServerTime(){const _0x2617ed=_0x1a38b9,_0x20d731=new Date();return _0x20d731['getFullYear']()+'/'+(_0x20d731[_0x2617ed(0xea)]()+0x1)[_0x2617ed(0xca)]()[_0x2617ed(0x1aa)](0x2,'0')+'/'+_0x20d731[_0x2617ed(0xc4)]()['toString']()[_0x2617ed(0x1aa)](0x2,'0')+'\x20'+_0x20d731[_0x2617ed(0xa7)]()[_0x2617ed(0xca)]()['padStart'](0x2,'0')+':'+_0x20d731[_0x2617ed(0x156)]()['toString']()[_0x2617ed(0x1aa)](0x2,'0')+':'+_0x20d731[_0x2617ed(0xf9)]()[_0x2617ed(0xca)]()[_0x2617ed(0x1aa)](0x2,'0');}function getTimeStamp(){const _0x3acad4=_0x1a38b9,_0x241d83=shiftedTime();return _0x241d83[_0x3acad4(0xbe)]()+'/'+(_0x241d83[_0x3acad4(0xea)]()+0x1)[_0x3acad4(0xca)]()[_0x3acad4(0x1aa)](0x2,'0')+'/'+_0x241d83[_0x3acad4(0xc4)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x241d83['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x241d83[_0x3acad4(0x156)]()['toString']()[_0x3acad4(0x1aa)](0x2,'0')+':'+_0x241d83['getSeconds']()[_0x3acad4(0xca)]()[_0x3acad4(0x1aa)](0x2,'0');}function getDate(){const _0x29bb95=_0x1a38b9,_0x22873b=shiftedTime();return _0x22873b[_0x29bb95(0xbe)]()+'/'+(_0x22873b['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x22873b['getDate']()[_0x29bb95(0xca)]()['padStart'](0x2,'0');}function getHour(){const _0x31a305=_0x1a38b9,_0x5a588a=shiftedTime();return _0x5a588a[_0x31a305(0xa7)]()[_0x31a305(0xca)]()['padStart'](0x2,'0');}function sleep(_0x1c9404){return new Promise(_0x5382af=>setTimeout(_0x5382af,_0x1c9404));}function shiftedTime(){const _0x58ed50=_0x1a38b9,_0x4d0f04=new Date();let _0x375cb1=_0x4d0f04;if(config&&config['timeshift']!==0x0)_0x375cb1=fns[_0x58ed50(0xd0)](_0x4d0f04,{'hours':config['timeshift']});return _0x375cb1;}