const _0x3baa56=_0x4d8b;(function(_0x4a9b9c,_0x2b3c26){const _0x564ab0=_0x4d8b,_0x5f39ce=_0x4a9b9c();while(!![]){try{const _0x59d4df=parseInt(_0x564ab0(0x24d))/0x1+-parseInt(_0x564ab0(0x27c))/0x2*(parseInt(_0x564ab0(0x250))/0x3)+-parseInt(_0x564ab0(0x292))/0x4+-parseInt(_0x564ab0(0x1ef))/0x5+parseInt(_0x564ab0(0x1f6))/0x6*(-parseInt(_0x564ab0(0x1e1))/0x7)+-parseInt(_0x564ab0(0x256))/0x8+parseInt(_0x564ab0(0x2e1))/0x9;if(_0x59d4df===_0x2b3c26)break;else _0x5f39ce['push'](_0x5f39ce['shift']());}catch(_0x5444b5){_0x5f39ce['push'](_0x5f39ce['shift']());}}}(_0x525f,0x9e439));const _0x46827b=function(){let _0x464af5=!![];return function(_0x2955ac,_0x4e5750){const _0x4165e2=_0x464af5?function(){const _0x190751=_0x4d8b;if(_0x4e5750){const _0x1fb0e0=_0x4e5750[_0x190751(0x242)](_0x2955ac,arguments);return _0x4e5750=null,_0x1fb0e0;}}:function(){};return _0x464af5=![],_0x4165e2;};}(),_0xf24a7a=_0x46827b(this,function(){const _0x1c8173=_0x4d8b;return _0xf24a7a[_0x1c8173(0x26c)]()['search'](_0x1c8173(0x302))[_0x1c8173(0x26c)]()['constructor'](_0xf24a7a)['search'](_0x1c8173(0x302));});_0xf24a7a();'use strict';const ccxt=require(_0x3baa56(0x1e8))['pro'],low=require(_0x3baa56(0x296)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3baa56(0x22f)),Crypt=require('hybrid-crypto-js')[_0x3baa56(0x1fb)],util=require(_0x3baa56(0x1e6)),argv=require(_0x3baa56(0x2d6))(process['argv'][_0x3baa56(0x2bc)](0x2))[_0x3baa56(0x30f)];let exchange;global[_0x3baa56(0x24f)]={},global[_0x3baa56(0x1ee)]={};const exceptions={'binance':[_0x3baa56(0x206),_0x3baa56(0x2a3),_0x3baa56(0x212),_0x3baa56(0x2aa),_0x3baa56(0x1f2)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3baa56(0x2eb)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3baa56(0x254)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require(_0x3baa56(0x2c5))[_0x3baa56(0x2ef)],botID=process[_0x3baa56(0x30f)][0x2]||_0x3baa56(0x2bb),pattern=/^[0-9]{3}$/;!pattern[_0x3baa56(0x27a)](botID)&&(console[_0x3baa56(0x29a)](_0x3baa56(0x31b)+botID+_0x3baa56(0x260)),killBot());const userID=process[_0x3baa56(0x30f)][0x3]||'',configpath=userID?_0x3baa56(0x2fa)+userID+'/':_0x3baa56(0x2fa),logspath=userID?_0x3baa56(0x284)+userID+'/':_0x3baa56(0x284),loggerfile=fs[_0x3baa56(0x20f)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x3baa56(0x258)](configpath)&&fs[_0x3baa56(0x22c)](configpath);!fs['existsSync'](logspath)&&fs[_0x3baa56(0x22c)](logspath);const configfile=configpath+_0x3baa56(0x2cd)+botID+'-config.json',logfile=configpath+_0x3baa56(0x2cd)+botID+_0x3baa56(0x293),performancefile=configpath+_0x3baa56(0x2cd)+botID+_0x3baa56(0x27b),coinresultsfile=configpath+_0x3baa56(0x2cd)+botID+'-results.json',settingsfile=configpath+_0x3baa56(0x2a1),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3baa56(0x221)]({'logs':[],'version':serverversion})[_0x3baa56(0x1d2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3baa56(0x221)]({'data':[],'version':serverversion})[_0x3baa56(0x1d2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3baa56(0x221)]({'bot':[],'version':serverversion})[_0x3baa56(0x1d2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3baa56(0x221)]({'coins':[],'version':serverversion})[_0x3baa56(0x1d2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3baa56(0x21b),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xe8a113=>{console['log'](_0xe8a113);},'simple':_0x14c743=>{const _0x2518b1=_0x3baa56;console[_0x2518b1(0x29a)](_0x14c743),loggerfile[_0x2518b1(0x1d2)](util[_0x2518b1(0x230)](_0x14c743)+'\x0a');},'full':async(_0x345e95,_0x19178f='')=>{const _0x545f87=_0x3baa56;let _0x1f212b;if(config[_0x545f87(0x237)])_0x1f212b=getTimeStamp()+':\x20'+config[_0x545f87(0x1ed)]+_0x545f87(0x211)+_0x345e95;else _0x1f212b=getTimeStamp()+_0x545f87(0x20e)+botID+_0x545f87(0x211)+_0x345e95;console[_0x545f87(0x29a)](_0x1f212b),loggerfile[_0x545f87(0x1d2)](util[_0x545f87(0x230)](_0x1f212b)+'\x0a'),_0x19178f&&(console[_0x545f87(0x29a)](_0x19178f),loggerfile[_0x545f87(0x1d2)](util[_0x545f87(0x230)](_0x19178f)+'\x0a'));},'debug':async(_0x2c5171,_0x4451d4='')=>{const _0x442e63=_0x3baa56;let _0x491ead;if(config['showname'])_0x491ead=getTimeStamp()+':\x20'+config[_0x442e63(0x1ed)]+_0x442e63(0x297)+_0x2c5171;else _0x491ead=getTimeStamp()+_0x442e63(0x20e)+botID+_0x442e63(0x297)+_0x2c5171;if(debugging)console[_0x442e63(0x29a)](_0x491ead);loggerfile[_0x442e63(0x1d2)](util[_0x442e63(0x230)](_0x491ead)+'\x0a');if(_0x4451d4){if(debugging)console[_0x442e63(0x29a)](_0x4451d4);loggerfile[_0x442e63(0x1d2)](util[_0x442e63(0x230)](_0x4451d4)+'\x0a');}}};process['on'](_0x3baa56(0x1df),function(_0x507c2d){const _0x46c57d=_0x3baa56;logger[_0x46c57d(0x1d6)](_0x507c2d);});settings[_0x3baa56(0x1e9)]!=config[_0x3baa56(0x1e9)]&&updateTimeshift(settings[_0x3baa56(0x1e9)]);process[_0x3baa56(0x295)]({'started':_0x3baa56(0x209)},_0xf649eb=>{}),initializeProcessListeners();function proxyEmit(_0x51dc71,_0x53ad51=null){const _0x38346d=_0x3baa56;process[_0x38346d(0x295)]({'function':_0x51dc71,'args':_0x53ad51},_0x39856a=>{});}function initializeProcessListeners(){const _0x252b7d=_0x3baa56;process['on'](_0x252b7d(0x2f8),_0x4a0ab0=>{const _0x1ae43a=_0x252b7d;switch(Object[_0x1ae43a(0x27f)](_0x4a0ab0)[0x0]){case _0x1ae43a(0x1e9):_0x4a0ab0[_0x1ae43a(0x1e9)]!=undefined&&(settings[_0x1ae43a(0x1e9)]=_0x4a0ab0[_0x1ae43a(0x1e9)],updateTimeshift(settings[_0x1ae43a(0x1e9)]));break;case _0x1ae43a(0x2c4):switch(_0x4a0ab0[_0x1ae43a(0x2c4)]){case'initclient':initclient();break;case _0x1ae43a(0x21f):toggleBotMode();break;case'emitHistory':emitHistory(_0x4a0ab0['args']);break;case _0x1ae43a(0x309):deleteHistoryAlerts(_0x4a0ab0[_0x1ae43a(0x29c)]);break;case _0x1ae43a(0x262):getPortfolio(_0x4a0ab0[_0x1ae43a(0x29c)]);break;case _0x1ae43a(0x31e):storeConfiguration(_0x4a0ab0[_0x1ae43a(0x29c)]);break;case _0x1ae43a(0x210):storeHeadless(_0x4a0ab0[_0x1ae43a(0x29c)]);break;case _0x1ae43a(0x2f1):getStartingBalances(getNormalizedPerformance());break;case _0x1ae43a(0x31c):placeOrder(_0x4a0ab0[_0x1ae43a(0x29c)]);break;case'cancelLoading':cancelLoading();break;case _0x1ae43a(0x267):showConfig();break;case _0x1ae43a(0x208):sendPortfolioTelegram();break;}}});}reset();async function reset(_0x582046=null,_0xeba58a=![]){const _0xbf50b6=_0x3baa56;logger[_0xbf50b6(0x2da)](_0xbf50b6(0x248)+(_0x582046!=null)+'\x20|\x20'+_0xeba58a);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0xeba58a)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config[_0xbf50b6(0x2ff)]!=''&&config['apiKey']!=_0xbf50b6(0x27d)){await initExchange();let _0x464531=![];_0x464531=await loadSymbols();if(_0x464531){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x582046),exchangeStopped=![];if(lastOrders[_0xbf50b6(0x315)]==0x0&&allOpenOrders[_0xbf50b6(0x315)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x140082=_0x3baa56;exchangeStopped=!![],await exchange[_0x140082(0x25f)]();}async function reloadExchange(){const _0x33119b=_0x3baa56;logger[_0x33119b(0x2da)](_0x33119b(0x225));while(lockOrders!=ORDERS[_0x33119b(0x254)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x33119b(0x2da)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xfbd7c7=config['exchange'],_0x5715f7=config[_0x3baa56(0x2ff)],_0xee2567=config[_0x3baa56(0x1fc)]){const _0x3d5ad9=_0x3baa56;exchange&&await stopExchange();!supportedExchanges()[_0x3d5ad9(0x2b4)](_0xfbd7c7)&&(logger[_0x3d5ad9(0x2a2)](_0x3d5ad9(0x282)+_0xfbd7c7+_0x3d5ad9(0x238)),killBot());const _0x560377=ccxt[_0xfbd7c7[_0x3d5ad9(0x283)]()];exchange=new _0x560377({'apiKey':_0x5715f7,'secret':_0xee2567,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x9802f0=_0x3baa56;let _0x5bef8a=config['basecoin']==_0x9802f0(0x2be)?_0x9802f0(0x2be):_0x9802f0(0x2c7),_0x599b4f=!allSymbols['includes'](_0x5bef8a+'/USD')?'USDT':_0x9802f0(0x2cc),_0x169e97=!allSymbols[_0x9802f0(0x2b4)](_0x5bef8a+_0x9802f0(0x263))?_0x599b4f:_0x9802f0(0x26a);stablecoins={'eur':{'coin':''+_0x5bef8a+_0x169e97,'symbol':_0x5bef8a+'/'+_0x169e97},'usd':{'coin':''+_0x5bef8a+_0x599b4f,'symbol':_0x5bef8a+'/'+_0x599b4f}};}async function initwsCcxt(_0x3f2a55){const _0x3af66a=_0x3baa56;_0x3f2a55==null&&(_0x3f2a55=[],currentCoins['forEach'](_0x5f4331=>{const _0x5e083d=_0x4d8b;if(_0x5f4331[_0x5e083d(0x2d2)]!=config[_0x5e083d(0x294)])_0x3f2a55[_0x5e083d(0x270)](_0x5f4331[_0x5e083d(0x276)]);}));if(!_0x3f2a55[_0x3af66a(0x2b4)](stablecoins['eur'][_0x3af66a(0x276)]))_0x3f2a55[_0x3af66a(0x270)](stablecoins[_0x3af66a(0x1e3)][_0x3af66a(0x276)]);if(!_0x3f2a55[_0x3af66a(0x2b4)](stablecoins[_0x3af66a(0x285)]['symbol']))_0x3f2a55[_0x3af66a(0x270)](stablecoins[_0x3af66a(0x285)][_0x3af66a(0x276)]);if(!_0x3f2a55['includes'](_0x3af66a(0x1e2)+config[_0x3af66a(0x294)]))_0x3f2a55['push'](_0x3af66a(0x1e2)+config[_0x3af66a(0x294)]);loadCoins(_0x3f2a55);const _0x24e16c=async _0x3cec98=>{const _0x3f6c9d=_0x3af66a,_0xf559a7=await exchange[_0x3f6c9d(0x229)](_0x3cec98);global[_0x3f6c9d(0x24f)][noslash(_0xf559a7[_0x3f6c9d(0x276)])]=_0xf559a7[_0x3f6c9d(0x2a0)];while(!![]){if(!botPaused)try{const _0x2ab09a=await exchange[_0x3f6c9d(0x1de)](_0x3cec98);global[_0x3f6c9d(0x24f)][noslash(_0x2ab09a[0x0][_0x3f6c9d(0x276)])]=_0x2ab09a[0x0][_0x3f6c9d(0x311)],await sleep(0x3e8);}catch(_0x59f8f6){if(!exchangeStopped)await handleError(_0x59f8f6,_0x3f6c9d(0x1de),_0x3cec98);}else await sleep(0x3e8);}},_0x9cf7fd=async _0x479b85=>{const _0x480391=_0x3af66a;while(!![]){if(!botPaused)try{const _0x5ca08e=await exchange[_0x480391(0x229)](_0x479b85);global[_0x480391(0x1ee)][_0x5ca08e['symbol']]=_0x5ca08e[_0x480391(0x233)],await sleep(0x2710);}catch(_0x3d6ac8){if(!exchangeStopped)await handleError(_0x3d6ac8,'fetchTickers',_0x479b85);}else await sleep(0x3e8);}},_0x4a9a67=async()=>{const _0x1febf9=_0x3af66a;while(!![]){if(!botPaused)try{const _0x355671=await exchange['watchOrders']();_0x355671[_0x1febf9(0x224)](_0x269681=>{updateNumberCoinsCcxt(_0x269681);});}catch(_0x4ba276){if(!exchangeStopped)await handleError(_0x4ba276,_0x1febf9(0x300));}else await sleep(0x3e8);}};_0x3f2a55[_0x3af66a(0x224)](async _0x5c056c=>{_0x24e16c(_0x5c056c),_0x9cf7fd(_0x5c056c);}),!wsEventsSet&&(wsEventsSet=!![],_0x4a9a67());}async function loadSymbols(_0x3ce7e1=config[_0x3baa56(0x2bd)]){const _0x367607=_0x3baa56;if(allSymbols)return!![];let _0x1298e0=![];try{markets=await exchange[_0x367607(0x1ff)](),allSymbols=exchange[_0x367607(0x24a)]['filter'](_0x4a3b2a=>{const _0x1a8aec=_0x367607;let _0xc13c8e=![];const _0x5397cf=exceptions[_0x3ce7e1[_0x1a8aec(0x283)]()]||[];return _0x5397cf['forEach'](_0x589be1=>{if(_0x4a3b2a['includes'](_0x589be1))_0xc13c8e=!![];}),!_0xc13c8e;}),_0x1298e0=!![];}catch(_0x590c69){_0x1298e0=![],handleError(_0x590c69,_0x367607(0x318));}return _0x1298e0;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x4fb1d3=_0x3baa56;proxyEmit(_0x4fb1d3(0x2ad),emittedConfiguration()),proxyEmit(_0x4fb1d3(0x25a),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4fb1d3(0x22d),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2521e2=getNormalizedPerformance();emitPerformance(_0x2521e2),await getStartingBalances(_0x2521e2);}async function toggleBotMode(){const _0x4f304d=_0x3baa56;let _0x7efd6c=dbConfig[_0x4f304d(0x280)]('bot')[_0x4f304d(0x2e0)]({'botID':botID})[_0x4f304d(0x23f)]();if(_0x7efd6c){const _0x17fc5d=!_0x7efd6c[_0x4f304d(0x21d)];dbConfig['get'](_0x4f304d(0x310))['find']({'botID':botID})[_0x4f304d(0x1fd)]({'headless':_0x17fc5d})[_0x4f304d(0x1d2)](),config[_0x4f304d(0x21d)]=_0x17fc5d,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x337350=_0x3baa56;process[_0x337350(0x295)]({'updatebotmanager':!![]},_0x5cfd07=>{});}function _0x4d8b(_0x23ab90,_0x39e718){const _0x21115e=_0x525f();return _0x4d8b=function(_0xf24a7a,_0x46827b){_0xf24a7a=_0xf24a7a-0x1cd;let _0x525f86=_0x21115e[_0xf24a7a];return _0x525f86;},_0x4d8b(_0x23ab90,_0x39e718);}async function loadCoins(_0x581261){const _0x539d50=_0x3baa56;let _0x4c18ba,_0x4cab3a=0x0;loading[_0x539d50(0x2c0)]=[];let _0x386bb5=0x0;_0x581261['forEach'](_0x3d06bd=>{const _0xb49bc1=_0x539d50;loading['remainingSymbols'][_0xb49bc1(0x270)](_0x3d06bd);}),loadingCanceled=![];let _0x4ddc53=![];while(_0x4c18ba!=_0x581261[_0x539d50(0x315)]){_0x4c18ba=0x0,_0x581261[_0x539d50(0x224)](_0xbe7430=>{const _0x4ae1f2=_0x539d50;global[_0x4ae1f2(0x24f)][noslash(_0xbe7430)]&&(loading[_0x4ae1f2(0x2c0)]=loading['remainingSymbols'][_0x4ae1f2(0x2a9)](_0x366a4b=>_0x366a4b!=_0xbe7430),_0x4c18ba++);}),loading[_0x539d50(0x2cb)]=Math[_0x539d50(0x2f6)](_0x4c18ba/_0x581261['length']*0x64);loading[_0x539d50(0x2cb)]!=0x64&&(_0x386bb5>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x386bb5>0x78*0x5&&!_0x4ddc53&&(loading[_0x539d50(0x269)]=!![],emitLoadingProgress(),_0x4ddc53=!![],logHistory('error',_0x539d50(0x273)+loading[_0x539d50(0x2c0)][_0x539d50(0x2e2)](',\x20')+_0x539d50(0x1f4)),logHistory('error',_0x539d50(0x278)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x32c003=_0x539d50;process[_0x32c003(0x295)]({'stop':_0x32c003(0x2b9)},_0x2a0425=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x539d50(0x269)]=!![],emitLoadingProgress();break;}else _0x4c18ba!=_0x4cab3a&&(_0x4cab3a=_0x4c18ba,emitLoadingProgress()),_0x386bb5++,await sleep(0xc8);}_0x4c18ba==_0x581261['length']&&(coinsLoaded=!![],_0x4ddc53&&logHistory(_0x539d50(0x252),_0x539d50(0x30d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x412ba3=_0x3baa56;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x412ba3(0x2d8)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x5ef85a=_0x3baa56;let _0x599979=global[_0x5ef85a(0x24f)][stablecoins[_0x5ef85a(0x1e3)]['coin']],_0x3d2605=global['ticker'][stablecoins[_0x5ef85a(0x285)][_0x5ef85a(0x2d2)]];return{'eur':Number(_0x599979),'usd':Number(_0x3d2605)};}function capitalize(_0x4d2a28){const _0x484df5=_0x3baa56;return _0x4d2a28[_0x484df5(0x2ce)](0x0,0x1)[_0x484df5(0x249)]()+_0x4d2a28[_0x484df5(0x2ce)](0x1);}function supportedExchanges(){const _0xe7ba65=_0x3baa56,_0x5735e3=['ws',_0xe7ba65(0x204),'fetchTicker','watchTrades',_0xe7ba65(0x300),_0xe7ba65(0x2dd),_0xe7ba65(0x20b),_0xe7ba65(0x306),_0xe7ba65(0x275),_0xe7ba65(0x2b8)];let _0x5800f1=[];const _0x5c6f56=ccxt[_0xe7ba65(0x25a)][_0xe7ba65(0x26b)](_0x2c0842=>new ccxt[_0x2c0842]())[_0xe7ba65(0x2a9)](_0x12bdb4=>_0x12bdb4[_0xe7ba65(0x31d)]['ws']);return _0x5c6f56[_0xe7ba65(0x224)](_0x219981=>{const _0x5a687a=_0xe7ba65;let _0x37fb6b=0x0;_0x5735e3['forEach'](_0x32c0a2=>{const _0x2b2662=_0x4d8b;_0x32c0a2 in _0x219981[_0x2b2662(0x31d)]&&_0x219981[_0x2b2662(0x31d)][_0x32c0a2]&&_0x37fb6b++;}),_0x37fb6b==_0x5735e3[_0x5a687a(0x315)]&&_0x5800f1['push'](capitalize(_0x219981['id']));}),_0x5800f1;}function setStartDatePerformance(){const _0x36f539=_0x3baa56;if(config&&config[_0x36f539(0x243)][0x0]['changes']['length']!=0x0){const _0xd1f3ee=config[_0x36f539(0x243)][0x0][_0x36f539(0x2d7)];dbPerformance[_0x36f539(0x280)](_0x36f539(0x2ac))['find']({'date':config[_0x36f539(0x30e)]})[_0x36f539(0x1fd)]({'coins':_0xd1f3ee})[_0x36f539(0x1d2)]();}}async function recreateCoinResults(){const _0x1394b4=_0x3baa56;let _0x4072bd,_0x2c3b44=[];try{const _0x3c05c5=fns[_0x1394b4(0x230)](fns[_0x1394b4(0x2ae)](config['startdate'][_0x1394b4(0x2ec)](/\//g,'-')),_0x1394b4(0x2f4));for(const _0xd907b3 of currentCoins){if(_0xd907b3['coin']!=config[_0x1394b4(0x294)]){let _0x1c9cc9=0x0,_0x31e5dd,_0x1ec095;_0x4072bd=await getAllEventOrders(_0xd907b3[_0x1394b4(0x276)]);if(_0x4072bd['length']>0x0)_0x4072bd[_0x1394b4(0x224)](_0x39bddb=>{const _0x2824cd=_0x1394b4,_0x1832d2=_0xd907b3[_0x2824cd(0x276)][_0x2824cd(0x2b4)](config[_0x2824cd(0x294)]+'/');_0x2c3b44[_0x2824cd(0x270)]({'datetime':_0x39bddb[_0x2824cd(0x29b)],'coin':_0xd907b3['coin'],'symbol':_0xd907b3['symbol'],'side':_0x39bddb[_0x2824cd(0x20c)],'reverse':_0x1832d2,'amount':formatResult(_0x39bddb['filled'],0x8),'filled':formatResult(_0x39bddb[_0x2824cd(0x28f)],0x8),'price':formatResult(_0x39bddb['price'],0x8)}),_0x1c9cc9=_0x39bddb['side']==_0x2824cd(0x2ee)?_0x1c9cc9+_0x39bddb[_0x2824cd(0x28f)]:_0x1c9cc9-_0x39bddb[_0x2824cd(0x28f)];if(!_0x1ec095)_0x1ec095=_0x39bddb[_0x2824cd(0x311)];});_0x31e5dd=_0xd907b3['number']-_0x1c9cc9;let _0x193668;config['liquidity'][_0x1394b4(0x224)](_0x2658ce=>{const _0x1dfff7=_0x1394b4;!_0x193668&&(_0x193668=_0x2658ce['changes']['find'](_0x3e55a2=>_0x3e55a2[_0x1dfff7(0x2d2)]==_0xd907b3[_0x1dfff7(0x2d2)]),_0x193668&&(_0x31e5dd=_0x193668[_0x1dfff7(0x2de)],_0x1ec095=_0x193668[_0x1dfff7(0x311)]));});let _0x176cf3=dbCoinResults['get'](_0x1394b4(0x305))[_0x1394b4(0x2e0)]({'coin':_0xd907b3[_0x1394b4(0x2d2)]})[_0x1394b4(0x23f)]();_0x176cf3={'coin':_0xd907b3[_0x1394b4(0x2d2)],'number':_0x31e5dd,'breakeven':_0x1ec095,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x1394b4(0x305))['find']({'coin':_0xd907b3['coin']})['assign'](_0x176cf3)[_0x1394b4(0x1d2)]();}}_0x2c3b44['sort']((_0x612c6,_0x13c393)=>_0x612c6[_0x1394b4(0x29b)]>_0x13c393[_0x1394b4(0x29b)]?0x1:_0x13c393[_0x1394b4(0x29b)]>_0x612c6[_0x1394b4(0x29b)]?-0x1:0x0);let _0x1625ca=0x0;for(let _0x1839cc of _0x2c3b44){await updateCoinResults(_0x1839cc,!![]);}}catch(_0x17ba92){await handleError(_0x17ba92,'recreateCoinResults()');}}async function getAllEventOrders(_0x3f2691){const _0x4fe008=_0x3baa56;let _0x3c8dbb=[],_0x4b36e3=dbLogs['get'](_0x4fe008(0x2d5))[_0x4fe008(0x2a9)](_0x1c55dd=>{const _0xd155d8=_0x4fe008,_0x592936=_0x1c55dd[_0xd155d8(0x1dc)][_0xd155d8(0x283)]();return _0x592936[_0xd155d8(0x2b4)](_0x3f2691['toLowerCase']())&&(_0x592936[_0xd155d8(0x2b4)](_0xd155d8(0x201))&&_0x592936[_0xd155d8(0x2b4)]('order')||_0x592936[_0xd155d8(0x2b4)]('filled')&&_0x592936[_0xd155d8(0x2b4)](_0xd155d8(0x287)));})[_0x4fe008(0x1da)](_0x4fe008(0x2d3))[_0x4fe008(0x23f)]();return _0x4b36e3[_0x4fe008(0x224)](_0x59ab11=>{const _0x35ceeb=_0x4fe008,_0x579d02=_0x59ab11['event'][_0x35ceeb(0x2b4)](_0x35ceeb(0x1cd))?_0x35ceeb(0x1cd):'buy',_0x433a96=/#([0-9]|\.)+\s/i,_0x38bbfb=Number(_0x433a96[_0x35ceeb(0x2d4)](_0x59ab11[_0x35ceeb(0x1dc)])[0x0]['slice'](0x1)),_0x8fec97=/@([0-9]|\.)+$/i,_0x55c243=Number(_0x8fec97['exec'](_0x59ab11[_0x35ceeb(0x1dc)])[0x0][_0x35ceeb(0x2bc)](0x1));_0x3c8dbb[_0x35ceeb(0x270)]({'datetime':_0x59ab11[_0x35ceeb(0x2d3)],'coin':symbolToCoin(_0x3f2691),'symbol':_0x3f2691,'side':_0x579d02,'amount':_0x38bbfb,'filled':_0x38bbfb,'price':_0x55c243});}),_0x3c8dbb;}async function getAllOrders(_0x174635,_0x4681f9){const _0x408c3d=_0x3baa56;let _0x24191e=[];while(_0x4681f9<exchange[_0x408c3d(0x244)]()){const _0x49d3d4=0x1f4,_0x3671aa=await exchange[_0x408c3d(0x275)](_0x174635,_0x4681f9,_0x49d3d4);if(_0x3671aa[_0x408c3d(0x315)])_0x4681f9=_0x3671aa[_0x3671aa['length']-0x1][_0x408c3d(0x1e4)]+0x1,_0x24191e=_0x24191e[_0x408c3d(0x2f0)](_0x3671aa);else break;}return _0x24191e;}async function validate24hChanges(){const _0x117efe=_0x3baa56;for(const _0x4b10c8 of currentCoins){if(_0x4b10c8[_0x117efe(0x2d2)]!=config[_0x117efe(0x294)]){let _0x5dfe69;_0x4b10c8[_0x117efe(0x30a)]?_0x5dfe69=formatResult((0x1/(global[_0x117efe(0x1ee)][noslash(_0x4b10c8[_0x117efe(0x276)])]/0x64+0x1)-0x1)*0x64,0x3):_0x5dfe69=global[_0x117efe(0x1ee)][noslash(_0x4b10c8[_0x117efe(0x276)])],_0x5dfe69<config[_0x117efe(0x2d0)]&&(logHistory(_0x117efe(0x2ca),_0x4b10c8['coin']+_0x117efe(0x205)+_0x5dfe69+'%'),logHistory(_0x117efe(0x2ca),_0x117efe(0x25b)),logHistory(_0x117efe(0x2ca),_0x117efe(0x1cf)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4e828a,_0x380a2c){const _0x3a1869=_0x3baa56;if(!_0x4e828a)return!![];const _0x125c79=_0x380a2c[_0x3a1869(0x1d0)]('.'),_0x5a5334=_0x4e828a[_0x3a1869(0x1d0)]('.');for(var _0x5eaca6=0x0;_0x5eaca6<_0x5a5334['length'];_0x5eaca6++){const _0x307f5f=~~_0x5a5334[_0x5eaca6],_0xebb6b6=~~_0x125c79[_0x5eaca6];if(_0x307f5f<_0xebb6b6)return!![];if(_0x307f5f>_0xebb6b6)return![];}return![];}async function oneTimeMigration(){const _0x1d78f7=_0x3baa56;let _0x2788de=dbLogs[_0x1d78f7(0x280)](_0x1d78f7(0x2ef))[_0x1d78f7(0x23f)]();if(isOlderVersion(_0x2788de,_0x1d78f7(0x2f3))){let _0x46aae8=[];const _0x314b2b=dbLogs[_0x1d78f7(0x280)](_0x1d78f7(0x2d5))[_0x1d78f7(0x23f)]();_0x314b2b['forEach'](_0x53c2e4=>{const _0x5d9245=_0x1d78f7;_0x46aae8[_0x5d9245(0x270)]({'time':_0x53c2e4['time'],'type':_0x53c2e4['type'],'event':_0x53c2e4[_0x5d9245(0x1dc)]});}),dbLogs['get'](_0x1d78f7(0x2d5))[_0x1d78f7(0x1fd)](_0x46aae8)[_0x1d78f7(0x1d2)]();}let _0x48a4f6=dbConfig[_0x1d78f7(0x280)](_0x1d78f7(0x2ef))[_0x1d78f7(0x23f)]();if(isOlderVersion(_0x48a4f6,_0x1d78f7(0x2f3))){let _0x5f07e3=dbConfig[_0x1d78f7(0x280)](_0x1d78f7(0x310))['find']({'botID':botID})['value']();if(_0x5f07e3){let _0x304166=[];_0x5f07e3[_0x1d78f7(0x279)][_0x1d78f7(0x224)](_0x24ae2c=>{const _0xbae1ba=_0x1d78f7;_0x304166[_0xbae1ba(0x270)]({'coin':_0x24ae2c[_0xbae1ba(0x2d2)],'number':_0x24ae2c[_0xbae1ba(0x2fe)],'price':_0x24ae2c[_0xbae1ba(0x298)]}),delete _0x24ae2c['startnumber'],delete _0x24ae2c[_0xbae1ba(0x298)];});if(_0x304166[_0x1d78f7(0x315)]!==0x0)fs[_0x1d78f7(0x1f0)](configbackuppath+(_0x1d78f7(0x21a)+botID+_0x1d78f7(0x1ce)),JSON['stringify'](_0x304166,null,0x4),function(_0xc97757){if(_0xc97757){}});const _0xde317=(_0xbba791,_0x2709d6)=>{const _0x20792e=_0x1d78f7;let _0x5216d9=[];_0x2709d6[_0x20792e(0x224)](_0x185904=>{const _0x168b9f=_0x20792e,_0x1245fd=_0xbba791[_0x168b9f(0x2e0)](_0xcd2d16=>_0xcd2d16[_0x168b9f(0x2d2)]==_0x185904[_0x168b9f(0x2d2)]);if(!_0x1245fd)_0x5216d9[_0x168b9f(0x270)](_0x185904);});let _0x432a25=[];return _0xbba791[_0x20792e(0x224)](_0xc538e2=>{const _0x2e21a7=_0x20792e,_0x39ee70=_0x2709d6[_0x2e21a7(0x2e0)](_0x5c91a1=>_0x5c91a1[_0x2e21a7(0x2d2)]==_0xc538e2[_0x2e21a7(0x2d2)]);if(!_0x39ee70||_0x39ee70[_0x2e21a7(0x2de)]==0x0&&_0xc538e2[_0x2e21a7(0x2de)]!=0x0)_0x432a25['push'](_0xc538e2);}),{'missingDay1':_0x5216d9,'notInDay2':_0x432a25};},_0x2b2aa2=dbPerformance[_0x1d78f7(0x280)](_0x1d78f7(0x2ac))[_0x1d78f7(0x215)]()[_0x1d78f7(0x23f)]();if(_0x2b2aa2[_0x1d78f7(0x315)]>0x1){const {missingDay1:_0x3cf0c6,notInDay2:_0x4a1701}=_0xde317(_0x304166,_0x2b2aa2[0x1][_0x1d78f7(0x305)]);_0x304166=[..._0x304166,..._0x3cf0c6],_0x4a1701[_0x1d78f7(0x224)](_0x20dee5=>{const _0x33cb55=_0x1d78f7;let _0x205f5d=_0x304166[_0x33cb55(0x200)](_0x94a18f=>_0x94a18f[_0x33cb55(0x2d2)]==_0x20dee5['coin']);_0x205f5d!=-0x1&&_0x304166[_0x33cb55(0x28b)](_0x205f5d,0x1);});}_0x304166[_0x1d78f7(0x2e6)]((_0x3bdf9b,_0x4db915)=>_0x3bdf9b[_0x1d78f7(0x2d2)]>_0x4db915[_0x1d78f7(0x2d2)]?0x1:_0x4db915['coin']>_0x3bdf9b[_0x1d78f7(0x2d2)]?-0x1:0x0);let _0x4c0fb0=[{'date':_0x5f07e3[_0x1d78f7(0x30e)],'changes':_0x304166}];_0x2b2aa2[_0x1d78f7(0x315)]>0x2&&_0x2b2aa2[_0x1d78f7(0x224)]((_0x35cebc,_0x292f2a)=>{const _0x4e7a8e=_0x1d78f7;if(_0x292f2a>0x0&&_0x292f2a<_0x2b2aa2['length']-0x1){const {missingDay1:_0x2474ba,notInDay2:_0x38c75b}=_0xde317(_0x2b2aa2[_0x292f2a]['coins'],_0x2b2aa2[_0x292f2a+0x1][_0x4e7a8e(0x305)]);_0x304166=[],(_0x2474ba[_0x4e7a8e(0x315)]!=0x0||_0x38c75b[_0x4e7a8e(0x315)]!=0x0)&&(_0x2474ba[_0x4e7a8e(0x315)]!=0x0&&_0x304166[_0x4e7a8e(0x270)](..._0x2474ba),_0x38c75b[_0x4e7a8e(0x315)]!=0x0&&(_0x38c75b[_0x4e7a8e(0x224)](_0x48afc1=>{const _0x436d15=_0x4e7a8e;_0x48afc1[_0x436d15(0x2de)]=-_0x48afc1[_0x436d15(0x2de)];}),_0x304166[_0x4e7a8e(0x270)](..._0x38c75b)),_0x304166[_0x4e7a8e(0x2e6)]((_0x5ddfaa,_0x5bf686)=>_0x5ddfaa['coin']>_0x5bf686[_0x4e7a8e(0x2d2)]?0x1:_0x5bf686[_0x4e7a8e(0x2d2)]>_0x5ddfaa[_0x4e7a8e(0x2d2)]?-0x1:0x0),_0x4c0fb0[_0x4e7a8e(0x270)]({'date':_0x2b2aa2[_0x292f2a+0x1][_0x4e7a8e(0x20d)],'changes':_0x304166}));}}),dbConfig['get']('bot')[_0x1d78f7(0x2e0)]({'botID':botID})[_0x1d78f7(0x1fd)]({..._0x5f07e3,'liquidity':_0x4c0fb0})[_0x1d78f7(0x1d2)]();}}if(isOlderVersion(_0x48a4f6,_0x1d78f7(0x25c))){let _0x37acd5=dbConfig[_0x1d78f7(0x280)](_0x1d78f7(0x310))[_0x1d78f7(0x2e0)]({'botID':botID})[_0x1d78f7(0x23f)]();if(_0x37acd5){const _0x185f7f=_0x37acd5[_0x1d78f7(0x2bd)],_0x18f60a=_0x185f7f?capitalize(_0x185f7f):'Binance';dbConfig[_0x1d78f7(0x280)](_0x1d78f7(0x310))[_0x1d78f7(0x2e0)]({'botID':botID})[_0x1d78f7(0x1fd)]({'exchange':_0x18f60a})[_0x1d78f7(0x1d2)]();}}config=getConfiguration(botID);let _0x38c173=dbPerformance[_0x1d78f7(0x280)](_0x1d78f7(0x2ef))[_0x1d78f7(0x23f)]();isOlderVersion(_0x38c173,_0x1d78f7(0x2f3))&&setStartDatePerformance();let _0x36e7f2=dbCoinResults[_0x1d78f7(0x280)](_0x1d78f7(0x2ef))['value']();if(isOlderVersion(_0x36e7f2,'2.5.0')){let _0x21d226=dbCoinResults[_0x1d78f7(0x280)]('coins')[_0x1d78f7(0x23f)]();if(_0x21d226[_0x1d78f7(0x315)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5585a1=_0x3baa56;dbConfig['set'](_0x5585a1(0x2ef),serverversion)[_0x5585a1(0x1d2)](),dbPerformance['set'](_0x5585a1(0x2ef),serverversion)[_0x5585a1(0x1d2)](),dbLogs['set'](_0x5585a1(0x2ef),serverversion)['write'](),dbCoinResults[_0x5585a1(0x1db)]('version',serverversion)[_0x5585a1(0x1d2)]();}function getConfiguration(_0xd1aa6d){const _0x3aadae=_0x3baa56;let _0x486b36=dbConfig['get']('bot')['find']({'botID':_0xd1aa6d})[_0x3aadae(0x23f)]();if(_0x486b36){let _0x1bd2bb=![];typeof _0x486b36[_0x3aadae(0x29f)]==_0x3aadae(0x22e)&&(_0x486b36={..._0x486b36,'threshold':Number(_0x486b36[_0x3aadae(0x29f)])},_0x1bd2bb=!![]),_0x486b36[_0x3aadae(0x2d0)]==null&&(_0x486b36={..._0x486b36,'change24h':-0x14},_0x1bd2bb=!![]),_0x1bd2bb&&(_0x486b36={'botID':_0x486b36['botID'],'exchange':_0x486b36[_0x3aadae(0x2bd)],'apiKey':_0x486b36['apiKey'],'apiSecret':_0x486b36[_0x3aadae(0x1fc)],'basecoin':_0x486b36[_0x3aadae(0x294)],'botname':_0x486b36['botname'],'showname':_0x486b36[_0x3aadae(0x237)],'threshold':_0x486b36[_0x3aadae(0x29f)],'ordertype':_0x486b36['ordertype'],'timeout':_0x486b36['timeout'],'startdate':_0x486b36[_0x3aadae(0x30e)],'recreate':_0x486b36['recreate'],'timeshift':_0x486b36[_0x3aadae(0x1e9)],'headless':_0x486b36[_0x3aadae(0x21d)],'cooldown':_0x486b36[_0x3aadae(0x1e5)],'change24h':_0x486b36[_0x3aadae(0x2d0)],'emojibuy':_0x486b36['emojibuy'],'emojisell':_0x486b36[_0x3aadae(0x246)],'portfolio':_0x486b36[_0x3aadae(0x279)],'liquidity':_0x486b36[_0x3aadae(0x243)]},dbConfig[_0x3aadae(0x280)](_0x3aadae(0x310))[_0x3aadae(0x22a)]()[_0x3aadae(0x1d2)](),dbConfig[_0x3aadae(0x280)](_0x3aadae(0x310))[_0x3aadae(0x270)](_0x486b36)[_0x3aadae(0x1d2)]());}else _0x486b36={'botID':_0xd1aa6d,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x3aadae(0x2af)+_0xd1aa6d,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3aadae(0x1e9)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x486b36;}function emittedConfiguration(){const _0x598532=_0x3baa56;let _0x1215ef;if(config[_0x598532(0x2ff)]=='')_0x1215ef={...config,'configstate':_0x598532(0x1eb)};else config['apiKey']=='***'?_0x1215ef={...config,'configstate':'recovery'}:_0x1215ef={...config,'apiKey':_0x598532(0x2e4),'apiSecret':_0x598532(0x2e4)};return _0x1215ef;}function getSettings(){const _0x147df2=_0x3baa56;return dbSettings[_0x147df2(0x280)]('settings')[_0x147df2(0x23f)]();}function getSecure(){const _0x1ca9de=_0x3baa56;return dbSecure['get'](_0x1ca9de(0x235))[_0x1ca9de(0x23f)]()||{};}function updateTimeshift(_0x8c06b2){const _0x19f752=_0x3baa56;let _0x1bdd40=dbConfig[_0x19f752(0x280)]('bot')[_0x19f752(0x2e0)]({'botID':botID})[_0x19f752(0x23f)]();_0x1bdd40&&dbConfig['get'](_0x19f752(0x310))[_0x19f752(0x2e0)]({'botID':botID})[_0x19f752(0x1fd)]({'timeshift':_0x8c06b2})[_0x19f752(0x1d2)](),config['timeshift']=_0x8c06b2,proxyEmit(_0x19f752(0x2ad),emittedConfiguration());}async function storeConfiguration(_0x38d927){const _0x1ea719=_0x3baa56;let _0x1e7660=[],_0x4f9d5f=[];_0x38d927[_0x1ea719(0x279)][_0x1ea719(0x224)](_0x2daa1d=>{const _0x5d02e3=_0x1ea719;if(!_0x2daa1d[_0x5d02e3(0x286)]&&_0x2daa1d[_0x5d02e3(0x2d2)]!=_0x38d927[_0x5d02e3(0x294)])_0x4f9d5f[_0x5d02e3(0x270)](_0x2daa1d['symbol']);});currentCoins['length']==0x0?_0x1e7660=_0x4f9d5f:_0x4f9d5f[_0x1ea719(0x224)](_0x2ac998=>{const _0x5f1166=_0x1ea719,_0x4501fe=currentCoins['find'](_0x12b7f5=>_0x12b7f5[_0x5f1166(0x276)]==_0x2ac998);!_0x4501fe&&_0x1e7660['push'](_0x2ac998);});let _0x3b0e0c=dbConfig[_0x1ea719(0x280)](_0x1ea719(0x310))['find']({'botID':botID})[_0x1ea719(0x23f)]();_0x38d927={..._0x38d927,'apiKey':crypt[_0x1ea719(0x1d5)](secure[_0x1ea719(0x24c)],_0x38d927[_0x1ea719(0x2ff)])[_0x1ea719(0x2f8)],'apiSecret':crypt[_0x1ea719(0x1d5)](secure[_0x1ea719(0x24c)],_0x38d927['apiSecret'])[_0x1ea719(0x2f8)]};if(_0x3b0e0c){if(_0x38d927[_0x1ea719(0x2ff)]==_0x1ea719(0x2e4))_0x38d927[_0x1ea719(0x2ff)]=config[_0x1ea719(0x2ff)];if(_0x38d927[_0x1ea719(0x1fc)]==_0x1ea719(0x2e4))_0x38d927['apiSecret']=config['apiSecret'];dbConfig['get']('bot')['find']({'botID':botID})[_0x1ea719(0x1fd)](_0x38d927)[_0x1ea719(0x1d2)]();}else dbConfig[_0x1ea719(0x280)](_0x1ea719(0x310))['push'](_0x38d927)[_0x1ea719(0x1d2)](),process[_0x1ea719(0x295)]({'status':_0x1ea719(0x239),'live':_0x1ea719(0x209)},_0x5b69b8=>{});config={..._0x38d927},setStartDatePerformance(),process[_0x1ea719(0x295)]({'botname':_0x38d927[_0x1ea719(0x1ed)]},_0x418cf9=>{}),updateBotManager();const _0x28001c=getNormalizedPerformance();getStartingBalances(_0x28001c),emitPerformance(_0x28001c),proxyEmit('configuration-stored'),await initCoinResults(),reset(_0x1e7660);}async function storeHeadless(_0xa326c8){const _0x20ee1c=_0x3baa56,_0x3a2d2a={...config,'headless':_0xa326c8[_0x20ee1c(0x21d)]};let _0x2d28f0=dbConfig[_0x20ee1c(0x280)](_0x20ee1c(0x310))[_0x20ee1c(0x2e0)]({'botID':botID})[_0x20ee1c(0x23f)]();_0x2d28f0&&dbConfig['get'](_0x20ee1c(0x310))['find']({'botID':botID})[_0x20ee1c(0x1fd)](_0x3a2d2a)[_0x20ee1c(0x1d2)](),config={..._0x3a2d2a},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x17d387){const _0x52c627=_0x3baa56;return _0x17d387[_0x52c627(0x2ec)]('/','');}async function updateNumberCoinsCcxt(_0x1100b6){const _0x5ee29e=_0x3baa56;logger[_0x5ee29e(0x2da)](_0x5ee29e(0x220)+_0x1100b6['symbol']+_0x5ee29e(0x2b7)+_0x1100b6[_0x5ee29e(0x2b1)]+_0x5ee29e(0x2b7)+_0x1100b6['id']+_0x5ee29e(0x2b7)+_0x1100b6[_0x5ee29e(0x2b5)]);let _0x3e23a9=_0x1100b6['status'],_0x1b0512=![];currentCoins[_0x5ee29e(0x224)](_0x4bba20=>{const _0x3c47c1=_0x5ee29e;_0x4bba20[_0x3c47c1(0x276)]==_0x1100b6[_0x3c47c1(0x276)]&&(_0x1b0512=!![]);});if(!_0x1b0512)return;const _0x760768=currentCoins[_0x5ee29e(0x2e0)](_0x36322f=>_0x36322f[_0x5ee29e(0x276)]==_0x1100b6[_0x5ee29e(0x276)]),_0x4018a3=_0x4f5fb5=>{if(_0x760768)_0x760768['orderstatus']=_0x4f5fb5;};if(_0x3e23a9=='open')_0x4018a3(_0x5ee29e(0x28a));else{if(_0x3e23a9==_0x5ee29e(0x216))_0x4018a3(_0x5ee29e(0x216)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x3e23a9==_0x5ee29e(0x1f8)){logger[_0x5ee29e(0x2da)](_0x5ee29e(0x2a7)+_0x1100b6[_0x5ee29e(0x276)]+_0x5ee29e(0x2b7)+_0x1100b6[_0x5ee29e(0x28f)]+_0x5ee29e(0x2b7)+_0x1100b6['id']+_0x5ee29e(0x2b7)+_0x1100b6['clientOrderId']);let _0x89c11d=![];if(lastOrders)lastOrders['forEach'](async _0x680c8d=>{const _0x69a7a4=_0x5ee29e;if(_0x680c8d[_0x69a7a4(0x23c)]==_0x1100b6[_0x69a7a4(0x2b5)]){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x1100b6[_0x69a7a4(0x2b5)]),_0x89c11d=!![];if(_0x680c8d['filled']==0x0){logger['debug'](_0x69a7a4(0x2f2)+_0x1100b6['clientOrderId']),_0x680c8d['price']=_0x1100b6[_0x69a7a4(0x255)],_0x680c8d['filled']=_0x1100b6['filled'],_0x680c8d[_0x69a7a4(0x2fc)]={'cost':_0x1100b6['fee'][_0x69a7a4(0x222)],'currency':_0x1100b6['fee']['currency']},_0x4018a3(_0x69a7a4(0x28f)),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x680c8d);}}});!_0x89c11d&&(logger[_0x5ee29e(0x2da)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x1100b6['id']),_0x4018a3(_0x5ee29e(0x28f)),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x14d029=JSON[_0x5ee29e(0x2ed)](lastBalances[_0x5ee29e(0x279)]);const _0x1f4f38=_0x14d029['find'](_0x339fc2=>_0x339fc2[_0x5ee29e(0x276)]==_0x1100b6[_0x5ee29e(0x276)]);if(_0x1f4f38){if(_0x3e23a9==_0x5ee29e(0x28a))_0x1f4f38[_0x5ee29e(0x22b)]=_0x1f4f38[_0x5ee29e(0x22b)]==_0x5ee29e(0x28f)?_0x5ee29e(0x28f):_0x5ee29e(0x28a);else{if(_0x3e23a9=='canceled')_0x1f4f38[_0x5ee29e(0x22b)]=_0x1f4f38['orderstatus']==_0x5ee29e(0x28f)?'filled':_0x5ee29e(0x216);else _0x3e23a9==_0x5ee29e(0x1f8)&&(_0x1f4f38[_0x5ee29e(0x22b)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x14d029)},proxyEmit(_0x5ee29e(0x22d),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x512056=![],_0x1cfa86=!![],_0x31cc7a=config['basecoin']){const _0x30a22e=_0x3baa56;let _0x2c1fff,_0x2bef14=[],_0x36f02a=[],_0x233508=[];try{_0x2c1fff=await exchange[_0x30a22e(0x2b8)](),mybalances=_0x2c1fff[_0x30a22e(0x2ea)];if(!_0x1cfa86)for(const [_0x356f58,_0x46c3fe]of Object[_0x30a22e(0x247)](mybalances)){_0x233508[_0x30a22e(0x270)](_0x356f58);}else config[_0x30a22e(0x279)][_0x30a22e(0x224)](_0x109fc8=>{const _0x4fc330=_0x30a22e;if(!_0x109fc8[_0x4fc330(0x286)])_0x233508[_0x4fc330(0x270)](_0x109fc8['coin']);});if(_0x31cc7a=='')for(const [_0x3d8916,_0x2f3475]of Object[_0x30a22e(0x247)](mybalances)){_0x2f3475[_0x30a22e(0x26c)]()!=0x0&&_0x36f02a[_0x30a22e(0x270)]({'coin':_0x3d8916});}else{if(_0x512056)await getOpenOrders();let _0x4711ff=![];for(const [_0x21e36d,_0x60646b]of Object[_0x30a22e(0x247)](mybalances)){if(_0x233508[_0x30a22e(0x2b4)](_0x21e36d)){const _0x5b3f3c=config[_0x30a22e(0x279)][_0x30a22e(0x2e0)](_0xe7ef76=>_0xe7ef76[_0x30a22e(0x2d2)]==_0x21e36d),_0x3f65e9=_0x21e36d+'/'+_0x31cc7a,_0x4d95e4=_0x31cc7a+'/'+_0x21e36d,_0x1e0b90=currentCoins[_0x30a22e(0x2e0)](_0xe73282=>_0xe73282[_0x30a22e(0x2d2)]==_0x21e36d);_0x4711ff=![];_0x512056&&(_0x4711ff=allOpenOrders['find'](_0xc4c84=>_0xc4c84[_0x30a22e(0x276)]==_0x5b3f3c[_0x30a22e(0x276)]));if((_0x60646b[_0x30a22e(0x26c)]()!=0x0||_0x5b3f3c)&&(allSymbols[_0x30a22e(0x2b4)](_0x3f65e9)||_0x21e36d==_0x31cc7a))_0x21e36d!=_0x31cc7a&&_0x2bef14[_0x30a22e(0x270)](_0x3f65e9),_0x36f02a['push']({'coin':_0x21e36d,'symbol':_0x3f65e9,'reverse':![],'number':Math[_0x30a22e(0x301)](_0x60646b+(_0x5b3f3c&&_0x5b3f3c[_0x30a22e(0x213)]||0x0),0x0),'orderstatus':_0x512056?_0x4711ff?_0x30a22e(0x28a):_0x30a22e(0x28d):_0x1e0b90?_0x1e0b90[_0x30a22e(0x22b)]:_0x30a22e(0x28d)});else(_0x60646b[_0x30a22e(0x26c)]()!=0x0||_0x5b3f3c)&&allSymbols[_0x30a22e(0x2b4)](_0x4d95e4)&&(_0x21e36d!=_0x31cc7a&&_0x2bef14[_0x30a22e(0x270)](_0x4d95e4),_0x36f02a[_0x30a22e(0x270)]({'coin':_0x21e36d,'symbol':_0x4d95e4,'reverse':!![],'number':Math[_0x30a22e(0x301)](_0x60646b+(_0x5b3f3c&&_0x5b3f3c['offset']||0x0),0x0),'orderstatus':_0x512056?_0x4711ff?_0x30a22e(0x28a):_0x30a22e(0x28d):_0x1e0b90?_0x1e0b90['orderstatus']:_0x30a22e(0x28d)}));}}}}catch(_0x45e85b){if(!_0x1cfa86)handleErrorNoStop(_0x45e85b,_0x30a22e(0x2a6));else await handleError(_0x45e85b,_0x30a22e(0x2a6));}return _0x36f02a;}async function getCoinNumber(_0x2246f0){const _0x129815=_0x3baa56;let _0x5de334;try{const _0x3a4ee0=await exchange[_0x129815(0x2b8)]();_0x5de334=_0x3a4ee0[_0x129815(0x2ea)][_0x2246f0];}catch(_0x950c4a){await handleError(_0x950c4a,_0x129815(0x2dc));}return _0x5de334;}async function getOpenOrders(){const _0x57504c=_0x3baa56;let _0x5b47d6;allOpenOrders=[];try{for(const _0x3988ff of config['portfolio']){!_0x3988ff[_0x57504c(0x286)]&&_0x3988ff[_0x57504c(0x2d2)]!=config[_0x57504c(0x294)]&&(_0x5b47d6=await exchange[_0x57504c(0x306)](_0x3988ff[_0x57504c(0x276)]),_0x5b47d6[_0x57504c(0x315)]>0x0&&allOpenOrders['push'](_0x5b47d6[0x0]));}}catch(_0x3865bb){await handleError(_0x3865bb,_0x57504c(0x26f));}}async function handleOpenOrders(_0x15b063=0x0){const _0x45a0fb=_0x3baa56;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x45a0fb(0x232)]&&allOrdersPlaced&&(_0x15b063==0x0?(logger[_0x45a0fb(0x2da)]('1\x20-\x20Handle\x20open\x20orders'),_0x15b063++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x45a0fb(0x264)),validateOrders(_0x45a0fb(0x2c9))));}async function getPortfolio(_0x37b7da){const _0x3c592b=_0x3baa56;let _0x157062=[],_0x48684c=[],_0x34966a,_0x355030=[],_0x349387=![];if(_0x37b7da[_0x3c592b(0x2ff)]===_0x3c592b(0x2e4)||_0x37b7da[_0x3c592b(0x1fc)]===_0x3c592b(0x2e4))_0x349387=!![];else{await initExchange(_0x37b7da[_0x3c592b(0x2bd)],_0x37b7da[_0x3c592b(0x2ff)],_0x37b7da['apiSecret']);try{_0x349387=await loadSymbols(_0x37b7da[_0x3c592b(0x2bd)]);}catch(_0x5bd7fa){_0x349387=![],handleErrorNoStop(_0x5bd7fa,_0x3c592b(0x318));}}if(_0x349387){_0x355030=await getCoins(![],![],_0x37b7da[_0x3c592b(0x294)]);if(_0x355030===![])proxyEmit('portfolio',![]);else{if(_0x37b7da[_0x3c592b(0x294)]=='')proxyEmit(_0x3c592b(0x279),_0x355030);else{_0x355030[_0x3c592b(0x224)](_0x339400=>{const _0x592cd1=_0x3c592b;if(_0x339400[_0x592cd1(0x2d2)]!=_0x37b7da[_0x592cd1(0x294)])_0x157062[_0x592cd1(0x270)](_0x339400[_0x592cd1(0x276)]);});try{_0x48684c=await exchange[_0x3c592b(0x204)](_0x157062);}catch(_0x389689){await handleError(_0x389689,_0x3c592b(0x202));}_0x355030[_0x3c592b(0x224)](_0x2138ad=>{const _0x3bb35d=_0x3c592b;_0x2138ad[_0x3bb35d(0x2d2)]!=_0x37b7da[_0x3bb35d(0x294)]?_0x34966a=_0x2138ad[_0x3bb35d(0x30a)]?0x1/_0x48684c[_0x2138ad[_0x3bb35d(0x276)]][_0x3bb35d(0x2a0)]:_0x48684c[_0x2138ad[_0x3bb35d(0x276)]][_0x3bb35d(0x2a0)]:_0x34966a=0x1,_0x2138ad['price']=formatResult(_0x34966a,0x8);}),proxyEmit(_0x3c592b(0x279),_0x355030);}}}else proxyEmit(_0x3c592b(0x279),![]);}function checkMinimums(_0x3e7f55){const _0x2818ef=_0x3baa56;let _0x268c6d=!![];const _0x995498=!_0x3e7f55[_0x2818ef(0x30a)]?markets[_0x3e7f55[_0x2818ef(0x276)]][_0x2818ef(0x291)][_0x2818ef(0x2f9)][_0x2818ef(0x1f7)]:markets[_0x3e7f55[_0x2818ef(0x276)]][_0x2818ef(0x291)][_0x2818ef(0x222)][_0x2818ef(0x1f7)],_0x4675ee=!_0x3e7f55[_0x2818ef(0x30a)]?markets[_0x3e7f55[_0x2818ef(0x276)]][_0x2818ef(0x291)][_0x2818ef(0x222)][_0x2818ef(0x1f7)]:markets[_0x3e7f55['symbol']][_0x2818ef(0x291)][_0x2818ef(0x2f9)][_0x2818ef(0x1f7)],_0x4d9464=markets[_0x3e7f55['symbol']][_0x2818ef(0x1d8)][_0x2818ef(0x2f9)];_0x3e7f55[_0x2818ef(0x1fe)]=formatResultTruncate(_0x3e7f55[_0x2818ef(0x1fe)],_0x4d9464);if(Math[_0x2818ef(0x1f9)](_0x3e7f55[_0x2818ef(0x1fe)])<_0x995498)_0x268c6d=![];if(Math['abs'](_0x3e7f55['trade'])*_0x3e7f55[_0x2818ef(0x2a0)]<_0x4675ee)_0x268c6d=![];if(_0x3e7f55['side']==_0x2818ef(0x1cd)){let _0x5de0ae=config['portfolio'][_0x2818ef(0x2e0)](_0x1fe93d=>_0x1fe93d[_0x2818ef(0x2d2)]==_0x3e7f55[_0x2818ef(0x2d2)]);if(_0x5de0ae['offset']>0x0){if(Math[_0x2818ef(0x1f9)](_0x3e7f55[_0x2818ef(0x1fe)])>_0x3e7f55['number']-_0x5de0ae['offset'])_0x268c6d=![];}else{if(Math[_0x2818ef(0x1f9)](_0x3e7f55['trade'])>_0x3e7f55[_0x2818ef(0x2de)])_0x268c6d=![];}}if(_0x3e7f55[_0x2818ef(0x20c)]==_0x2818ef(0x2ee)){let _0x22cffa=config[_0x2818ef(0x279)][_0x2818ef(0x2e0)](_0x5b9366=>_0x5b9366['coin']==config[_0x2818ef(0x294)]),_0x56ecf7=currentCoins[_0x2818ef(0x2e0)](_0x5b4170=>_0x5b4170[_0x2818ef(0x2d2)]==config[_0x2818ef(0x294)]);if(_0x22cffa['offset']>0x0){if(Math['abs'](_0x3e7f55[_0x2818ef(0x1fe)])*_0x3e7f55[_0x2818ef(0x2a0)]>_0x56ecf7['number']-_0x22cffa['offset'])_0x268c6d=![];}else{if(Math[_0x2818ef(0x1f9)](_0x3e7f55[_0x2818ef(0x1fe)])*_0x3e7f55[_0x2818ef(0x2a0)]>_0x56ecf7[_0x2818ef(0x2de)])_0x268c6d=![];}}return _0x268c6d;}async function getBalances(){const _0x25a624=_0x3baa56;let _0x298236=0x0,_0x5967fb;const _0xb44e6d=config['threshold'];if(config[_0x25a624(0x21d)]&&config[_0x25a624(0x2d0)]<0x0)await validate24hChanges();currentCoins[_0x25a624(0x224)](_0x277b5f=>{const _0x33262d=_0x25a624;if(_0x277b5f[_0x33262d(0x2d2)]!=config[_0x33262d(0x294)]){let _0x15fd04=global[_0x33262d(0x24f)][noslash(_0x277b5f[_0x33262d(0x276)])];_0x5967fb=_0x277b5f[_0x33262d(0x30a)]?0x1/_0x15fd04:_0x15fd04;}else _0x5967fb=0x1;let _0xc18940=_0x277b5f[_0x33262d(0x2de)]*_0x5967fb;_0x298236+=_0xc18940,_0x277b5f[_0x33262d(0x2a0)]=formatResult(Number(_0x5967fb),0x8),_0x277b5f[_0x33262d(0x23f)]=_0xc18940;}),currentCoins[_0x25a624(0x224)](_0x2c3731=>{const _0x19d60c=_0x25a624;let _0x1acf11=config[_0x19d60c(0x279)][_0x19d60c(0x2e0)](_0x12fa9c=>_0x12fa9c[_0x19d60c(0x2d2)]==_0x2c3731[_0x19d60c(0x2d2)]),_0x5189d2=Number(_0x1acf11[_0x19d60c(0x1dd)]),_0x362753=_0x2c3731[_0x19d60c(0x23f)]/_0x298236*0x64,_0x39f15b=_0x5189d2*_0x298236/0x64/_0x2c3731['last']-_0x2c3731[_0x19d60c(0x2de)];_0x2c3731[_0x19d60c(0x1dd)]=formatResult(_0x362753,0x3),_0x2c3731['target']=formatResult(_0x5189d2,0x3),_0x2c3731[_0x19d60c(0x1fe)]=formatResult(_0x39f15b,0x8),_0x2c3731[_0x19d60c(0x20c)]='',_0x2c3731[_0x19d60c(0x274)]=![];if(_0x2c3731[_0x19d60c(0x2d2)]!=config[_0x19d60c(0x294)]){if(_0x2c3731[_0x19d60c(0x1dd)]>_0x5189d2)_0x2c3731[_0x19d60c(0x20c)]=_0x19d60c(0x1cd),_0x2c3731['valid']=checkMinimums(_0x2c3731);else _0x2c3731['distribution']<_0x5189d2&&(_0x2c3731[_0x19d60c(0x20c)]=_0x19d60c(0x2ee),_0x2c3731[_0x19d60c(0x274)]=checkMinimums(_0x2c3731));}_0x2c3731[_0x19d60c(0x219)]=_0x2c3731[_0x19d60c(0x1dd)]/_0x2c3731[_0x19d60c(0x1d1)]-0x1;if(_0x2c3731[_0x19d60c(0x22b)]==_0x19d60c(0x28f)||_0x2c3731[_0x19d60c(0x22b)]==_0x19d60c(0x216))_0x2c3731[_0x19d60c(0x22b)]=_0x19d60c(0x28d);}),currentCoins[_0x25a624(0x2e6)]((_0x5c3f0f,_0xb1c6f2)=>_0x5c3f0f[_0x25a624(0x219)]<_0xb1c6f2[_0x25a624(0x219)]?0x1:_0xb1c6f2[_0x25a624(0x219)]<_0x5c3f0f[_0x25a624(0x219)]?-0x1:0x0);const _0x29b410=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x29b410[_0x25a624(0x1e3)],'usd':_0x29b410['usd'],'portfolio':JSON[_0x25a624(0x1d9)](currentCoins),'threshold':_0xb44e6d},proxyEmit(_0x25a624(0x22d),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x25a624(0x21d)])headlessMode({'portfolio':currentCoins,'threshold':_0xb44e6d});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xb44e6d});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x27014e=_0x3baa56;if(!lastBalances)return;let _0x4c3dfe=[],_0x212f77,_0x58b2c9=JSON[_0x27014e(0x2ed)](lastBalances[_0x27014e(0x279)]);_0x58b2c9[_0x27014e(0x2e6)]((_0x2f26f1,_0x3fc678)=>_0x2f26f1[_0x27014e(0x2d2)]>_0x3fc678['coin']?0x1:_0x3fc678[_0x27014e(0x2d2)]>_0x2f26f1[_0x27014e(0x2d2)]?-0x1:0x0),_0x58b2c9[_0x27014e(0x224)](_0x262bff=>{const _0x92f527=_0x27014e;let _0x343e70={'coin':_0x262bff['coin'],'number':_0x262bff[_0x92f527(0x2de)],'price':_0x262bff[_0x92f527(0x2a0)]};_0x4c3dfe[_0x92f527(0x270)](_0x343e70);});const _0x5d96e9=await getFiat();_0x212f77={'date':lastBalances[_0x27014e(0x2d3)][_0x27014e(0x1d0)]('\x20')[0x0],'eur':_0x5d96e9['eur'],'usd':_0x5d96e9[_0x27014e(0x285)],'coins':_0x4c3dfe};let _0x3095eb=dbPerformance['get']('data')[_0x27014e(0x2e0)]({'date':_0x212f77[_0x27014e(0x20d)]})['value']();_0x3095eb?_0x212f77[_0x27014e(0x20d)]!=config[_0x27014e(0x30e)]&&dbPerformance[_0x27014e(0x280)](_0x27014e(0x2ac))[_0x27014e(0x2e0)]({'date':_0x212f77['date']})[_0x27014e(0x1fd)](_0x212f77)[_0x27014e(0x1d2)]():dbPerformance[_0x27014e(0x280)](_0x27014e(0x2ac))[_0x27014e(0x270)](_0x212f77)[_0x27014e(0x1d2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x39a4fd=_0x3baa56;let _0x17667b=[];if(dbPerformance[_0x39a4fd(0x31d)](_0x39a4fd(0x2ac))[_0x39a4fd(0x23f)]()){let _0x4d8fd5=dbPerformance[_0x39a4fd(0x280)](_0x39a4fd(0x2ac))[_0x39a4fd(0x215)]()[_0x39a4fd(0x1da)](_0x39a4fd(0x20d))[_0x39a4fd(0x23f)](),_0x3aea2c=[...config[_0x39a4fd(0x243)]];_0x3aea2c[_0x39a4fd(0x2e6)]((_0x39c35d,_0x1216d5)=>_0x39c35d[_0x39a4fd(0x20d)]>_0x1216d5[_0x39a4fd(0x20d)]?-0x1:_0x1216d5[_0x39a4fd(0x20d)]>_0x39c35d[_0x39a4fd(0x20d)]?0x1:0x0);let _0x1bc47e=0x1,_0x5bf57e=[],_0x4c254b=0x0;_0x4d8fd5[_0x39a4fd(0x2bc)]()['reverse']()['forEach']((_0x2de580,_0x8b47db)=>{const _0x32838b=_0x39a4fd;if(_0x3aea2c[_0x4c254b]){if(_0x4d8fd5[_0x4d8fd5[_0x32838b(0x315)]-_0x8b47db]&&_0x3aea2c[_0x4c254b]['date']==_0x4d8fd5[_0x4d8fd5['length']-_0x8b47db][_0x32838b(0x20d)]){if(_0x8b47db<_0x4d8fd5[_0x32838b(0x315)]){let _0x475cfb=0x0,_0xd78653=0x0;_0x4d8fd5[_0x4d8fd5[_0x32838b(0x315)]-_0x8b47db][_0x32838b(0x305)][_0x32838b(0x224)](_0x232ad7=>{const _0x38c90e=_0x32838b;_0xd78653+=_0x232ad7['number']*_0x232ad7[_0x38c90e(0x311)];}),_0x3aea2c[_0x4c254b][_0x32838b(0x2d7)][_0x32838b(0x224)](_0x14c804=>{const _0x37e9c3=_0x32838b;_0x475cfb+=_0x14c804[_0x37e9c3(0x2de)]*_0x14c804[_0x37e9c3(0x311)];}),_0x1bc47e*=_0x475cfb/(_0xd78653-_0x475cfb)+0x1;}_0x4c254b++;}}let _0x4153d9=0x0;_0x2de580[_0x32838b(0x305)][_0x32838b(0x224)](_0x1cc119=>{_0x4153d9+=_0x1cc119['number']*_0x1cc119['price'];}),_0x5bf57e[_0x4d8fd5[_0x32838b(0x315)]-_0x8b47db-0x1]=_0x4153d9*(_0x1bc47e-0x1);});let _0x37945c=[];_0x3aea2c=[...config[_0x39a4fd(0x243)]]||[];let _0x44e937=0x0;_0x4c254b=0x0,_0x4d8fd5[_0x39a4fd(0x224)]((_0x3d9794,_0xafb437)=>{const _0x418bd9=_0x39a4fd;if(_0x3aea2c[_0x4c254b]){const _0xcf64f9=fns[_0x418bd9(0x2ed)](_0x3aea2c[_0x4c254b][_0x418bd9(0x20d)],'yyyy/MM/dd',new Date()),_0x2b552b=fns[_0x418bd9(0x2ed)](_0x3d9794[_0x418bd9(0x20d)],'yyyy/MM/dd',new Date());if(fns['isEqual'](_0xcf64f9,_0x2b552b)){let _0x2d5285=0x0;_0x3aea2c[_0x4c254b][_0x418bd9(0x2d7)]['forEach'](_0x46028c=>{const _0x2e3c1f=_0x418bd9;!_0x37945c[_0x46028c[_0x2e3c1f(0x2d2)]]?_0x37945c[_0x46028c[_0x2e3c1f(0x2d2)]]=_0x46028c[_0x2e3c1f(0x2de)]:(_0x2d5285=_0x37945c[_0x46028c[_0x2e3c1f(0x2d2)]],_0x37945c[_0x46028c['coin']]+=_0x46028c[_0x2e3c1f(0x2de)]);const _0x27960e=_0x3d9794[_0x2e3c1f(0x305)]['find'](_0x20498b=>_0x20498b[_0x2e3c1f(0x2d2)]==_0x46028c[_0x2e3c1f(0x2d2)]);(!_0x27960e||_0x27960e[_0x2e3c1f(0x2de)]==0x0)&&(_0x44e937+=(-_0x46028c[_0x2e3c1f(0x2de)]-_0x2d5285)*_0x46028c[_0x2e3c1f(0x311)]);}),_0x4c254b++;}}_0x3d9794[_0x418bd9(0x305)][_0x418bd9(0x224)]((_0x48e7ce,_0x32041f)=>{const _0x28d79e=_0x418bd9;_0x37945c[_0x48e7ce[_0x28d79e(0x2d2)]]&&(_0x48e7ce={..._0x48e7ce,'initial':_0x37945c[_0x48e7ce[_0x28d79e(0x2d2)]]}),_0x3d9794[_0x28d79e(0x305)][_0x32041f]=_0x48e7ce;}),_0x17667b['push']({'date':_0x3d9794['date'],'eur':_0x3d9794['eur'],'usd':_0x3d9794['usd'],'offset':_0x5bf57e[_0xafb437],'netoffset':_0x44e937,'coins':_0x3d9794[_0x418bd9(0x305)]});});}return _0x17667b;}function emitPerformance(_0x14b834){const _0x3e7f2a=_0x3baa56;_0x14b834['length']!==0x0?(proxyEmit(_0x3e7f2a(0x265),_0x14b834),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x20a0ef,_0x4dc91c){const _0x640543=_0x3baa56;let _0x1b2821=0x0,_0x182aba=0x0,_0x3a845b=0x0;_0x20a0ef[_0x640543(0x305)][_0x640543(0x224)](_0x487aef=>{const _0x283132=_0x640543;_0x1b2821+=_0x487aef[_0x283132(0x2de)]*_0x487aef[_0x283132(0x311)];});_0x4dc91c&&(_0x1b2821+=_0x20a0ef[_0x640543(0x213)]);if(config[_0x640543(0x294)]===_0x640543(0x2c7)||config[_0x640543(0x294)]==='ETH')_0x182aba=_0x1b2821*_0x20a0ef[_0x640543(0x1e3)],_0x3a845b=_0x1b2821*_0x20a0ef[_0x640543(0x285)];else{if(config[_0x640543(0x294)]===_0x640543(0x317)||config['basecoin']==='USDT'||config['basecoin']===_0x640543(0x2cc))_0x182aba=_0x1b2821*_0x20a0ef['eur']/_0x20a0ef['usd'],_0x3a845b=_0x1b2821;else config['basecoin']==='EUR'&&(_0x182aba=_0x1b2821,_0x3a845b=_0x1b2821*_0x20a0ef[_0x640543(0x285)]/_0x20a0ef['eur']);}return[_0x1b2821,_0x182aba,_0x3a845b];}function getKPIs(_0x464eed,_0x28db53='EUR'){const _0x211325=_0x3baa56,_0x339593=config[_0x211325(0x294)],_0x5f1c1c=config['balances'],_0x4dc470=currentCoins,_0x24230e=getNormalizedPerformance(),_0x2f911c=_0x464eed===_0x211325(0x294)?_0x339593:_0x464eed===_0x211325(0x259)||_0x464eed===_0x211325(0x2e3)?_0x28db53:_0x211325(0x30b)+_0x339593,_0x5b6af5=_0x464eed===_0x211325(0x312)?_0x211325(0x2b3):_0x464eed===_0x211325(0x2e3)?_0x211325(0x1d7)+_0x2f911c+')':_0x2f911c+_0x211325(0x1fa),_0x30fd33=_0x464eed===_0x211325(0x312)||_0x464eed==='net-fiat'?_0x211325(0x2b3):_0x2f911c+_0x211325(0x2ba);let _0x3e3f53=0x0;_0x4dc470[_0x211325(0x224)](_0x3066df=>{const _0x3d66b5=_0x211325;_0x3e3f53+=_0x3066df[_0x3d66b5(0x2de)]*_0x3066df[_0x3d66b5(0x2a0)];});if(_0x464eed===_0x211325(0x259)||_0x464eed==='net-fiat'){if(_0x339593===_0x211325(0x2c7)||_0x339593===_0x211325(0x2be))_0x3e3f53=_0x3e3f53*(_0x28db53===_0x211325(0x26a)?_0x5f1c1c[_0x211325(0x1e3)]:_0x5f1c1c['usd']);else{if(_0x339593===_0x211325(0x317)||_0x339593==='USDT'||_0x339593==='USD')_0x3e3f53=_0x3e3f53*(_0x28db53==='EUR'?_0x5f1c1c[_0x211325(0x1e3)]/_0x5f1c1c['usd']:0x1);else _0x339593===_0x211325(0x26a)&&(_0x3e3f53=_0x3e3f53*(_0x28db53===_0x211325(0x26a)?0x1:_0x5f1c1c[_0x211325(0x285)]/_0x5f1c1c[_0x211325(0x1e3)]));}}let _0x203ed6;if(_0x3e3f53!==0x0){if(_0x464eed==='basecoin')_0x203ed6=(_0x3e3f53/startingBalances[_0x211325(0x294)]-0x1)*0x64;else{if(_0x28db53===_0x211325(0x26a))_0x203ed6=(_0x3e3f53/startingBalances[_0x211325(0x1e3)]-0x1)*0x64;else _0x203ed6=(_0x3e3f53/startingBalances[_0x211325(0x285)]-0x1)*0x64;}let _0x5a7c9e=0x0;if(startingBalances[_0x211325(0x305)])_0x4dc470[_0x211325(0x224)](_0xb93782=>{const _0x11c391=_0x211325;let _0x216c89=startingBalances[_0x11c391(0x305)][_0x11c391(0x2e0)](_0x541dbf=>_0x541dbf['coin']===_0xb93782['coin']);if(_0x216c89&&_0x216c89[_0x11c391(0x2d2)]&&_0xb93782[_0x11c391(0x2de)]!==0x0)_0x5a7c9e+=_0x216c89[_0x11c391(0x2de)]*_0xb93782[_0x11c391(0x2a0)];});let _0x43306d=0x0;if(_0x24230e[_0x211325(0x315)]!==0x0){let _0x5b6019=_0x24230e[_0x24230e[_0x211325(0x315)]-0x1];_0x43306d=_0x5b6019[_0x211325(0x2a4)];}_0x5a7c9e-=_0x43306d;_0x464eed===_0x211325(0x312)&&(_0x203ed6=(_0x3e3f53-_0x5a7c9e)/startingBalances['basecoin']*0x64,_0x3e3f53=_0x3e3f53-_0x5a7c9e);if(_0x464eed===_0x211325(0x2e3)){let _0x38ea24=_0x28db53===_0x211325(0x26a)?startingBalances[_0x211325(0x1e3)]:startingBalances[_0x211325(0x285)];if(_0x339593===_0x211325(0x2c7)||_0x339593===_0x211325(0x2be))_0x5a7c9e=_0x28db53===_0x211325(0x26a)?_0x5a7c9e*_0x5f1c1c[_0x211325(0x1e3)]:_0x5a7c9e*_0x5f1c1c['usd'];else{if(_0x339593===_0x211325(0x317)||_0x339593===_0x211325(0x257)||_0x339593===_0x211325(0x2cc))_0x5a7c9e=_0x28db53===_0x211325(0x26a)?_0x5a7c9e*_0x5f1c1c[_0x211325(0x1e3)]/_0x5f1c1c[_0x211325(0x285)]:_0x5a7c9e;else _0x339593===_0x211325(0x26a)&&(_0x5a7c9e=_0x28db53===_0x211325(0x26a)?_0x5a7c9e:_0x5a7c9e*_0x5f1c1c[_0x211325(0x285)]/_0x5f1c1c[_0x211325(0x1e3)]);}_0x203ed6=(_0x3e3f53-_0x5a7c9e)/_0x38ea24*0x64,_0x3e3f53=_0x3e3f53-_0x5a7c9e;}if(_0x203ed6){if(_0x203ed6<0x64)_0x203ed6=_0x203ed6['toFixed'](0x2);else{if(_0x203ed6<0x3e8)_0x203ed6=_0x203ed6['toFixed'](0x1);else _0x203ed6=_0x203ed6['toFixed'](0x0);}}else _0x203ed6=Number('0')[_0x211325(0x2fd)](0x2);if(_0x3e3f53){if(Math[_0x211325(0x1f9)](_0x3e3f53)<0.000001)_0x3e3f53=_0x3e3f53['toFixed'](0x2);else{if(Math['abs'](_0x3e3f53)<0.1)_0x3e3f53=_0x3e3f53['toFixed'](0x6);else{if(Math[_0x211325(0x1f9)](_0x3e3f53)<0x1)_0x3e3f53=_0x3e3f53[_0x211325(0x2fd)](0x5);else{if(Math[_0x211325(0x1f9)](_0x3e3f53)<0xa)_0x3e3f53=_0x3e3f53[_0x211325(0x2fd)](0x4);else{if(Math['abs'](_0x3e3f53)<0x64)_0x3e3f53=_0x3e3f53[_0x211325(0x2fd)](0x3);else{if(Math[_0x211325(0x1f9)](_0x3e3f53)<0x3e8)_0x3e3f53=_0x3e3f53[_0x211325(0x2fd)](0x2);else _0x3e3f53=_0x3e3f53['toFixed'](0x2);}}}}}}else _0x3e3f53=Number('0')['toFixed'](0x2);}else _0x203ed6=Number('0')['toFixed'](0x2);return{'value':_0x3e3f53,'change':_0x203ed6,'leftTxt':_0x5b6af5,'rightTxt':_0x30fd33};}async function getStartingBalances(_0x307fdb,_0xbf7509=!![]){const _0x12574a=_0x3baa56;if(_0x307fdb[_0x12574a(0x315)]!==0x0){const [_0x2a4475,_0x292677,_0x3b4f0c]=getPerf(_0x307fdb[0x0],!![]);let _0x4ba087=[];config[_0x12574a(0x279)][_0x12574a(0x224)](_0x3cdab1=>{const _0x1f1469=_0x12574a;let _0x544c4c=0x0,_0x214483;config[_0x1f1469(0x243)]['forEach'](_0xf81153=>{const _0x496d7e=_0x1f1469;let _0xf004a4=_0xf81153[_0x496d7e(0x2d7)][_0x496d7e(0x2e0)](_0x47dbe3=>_0x47dbe3[_0x496d7e(0x2d2)]==_0x3cdab1[_0x496d7e(0x2d2)]);if(_0xf004a4){_0x544c4c+=_0xf004a4[_0x496d7e(0x2de)];if(!_0x214483)_0x214483=_0xf004a4[_0x496d7e(0x311)];}}),_0x4ba087[_0x1f1469(0x270)]({'coin':_0x3cdab1[_0x1f1469(0x2d2)],'number':_0x544c4c,'initialprice':_0x214483});});const _0x35798f={'basecoin':_0x2a4475,'eur':_0x292677,'usd':_0x3b4f0c,'coins':_0x4ba087};if(_0xbf7509)proxyEmit('starting-balances',_0x35798f);startingBalances=_0x35798f;}}function headlessMode(_0x407b82){const _0x4a5e27=_0x3baa56;let _0x534012=_0x407b82['portfolio'],_0x2287e3=_0x407b82[_0x4a5e27(0x29f)],_0x1fd6cc=[];for(let _0x221bab of _0x534012){if(_0x221bab['coin']!=config[_0x4a5e27(0x294)]){if(_0x221bab[_0x4a5e27(0x219)]>=_0x2287e3/0x64){if(_0x221bab['valid'])_0x1fd6cc['push'](_0x221bab);}else{if(_0x221bab[_0x4a5e27(0x219)]<=-_0x2287e3/0x64){if(_0x221bab[_0x4a5e27(0x274)])_0x1fd6cc['push'](_0x221bab);}}}}_0x1fd6cc[_0x4a5e27(0x315)]>0x0&&placeOrder(_0x1fd6cc);}function notifyBalance(_0x115610){const _0x217760=_0x3baa56;let _0x11d15a=_0x115610[_0x217760(0x279)],_0x51dab2=_0x115610[_0x217760(0x29f)],_0x12a566=[];for(let _0x43f6ea of _0x11d15a){if(_0x43f6ea[_0x217760(0x2d2)]!=config[_0x217760(0x294)]){if(_0x43f6ea[_0x217760(0x219)]>=_0x51dab2/0x64){if(_0x43f6ea['valid'])_0x12a566[_0x217760(0x270)](_0x43f6ea);}else{if(_0x43f6ea[_0x217760(0x219)]<=-_0x51dab2/0x64){if(_0x43f6ea[_0x217760(0x274)])_0x12a566[_0x217760(0x270)](_0x43f6ea);}}}}if(_0x12a566[_0x217760(0x315)]>0x0){let _0xe2cf35=_0x12a566[_0x217760(0x26b)](_0x4445b4=>_0x4445b4[_0x217760(0x2d2)]);_0xe2cf35[_0x217760(0x2e6)]();let _0x25829c=_0xe2cf35[_0x217760(0x2e2)](',\x20');if(!lastCoinsToBalance)logHistory(_0x217760(0x2bf),_0x217760(0x26e));lastCoinsToBalance=_0x25829c;}}function symbolToCoin(_0x2b1c7c){const _0x325b80=_0x3baa56;let _0x124e4d;if(_0x2b1c7c[_0x325b80(0x2b4)]('/'+config[_0x325b80(0x294)]))_0x124e4d=_0x2b1c7c[_0x325b80(0x2ec)]('/'+config[_0x325b80(0x294)],'');if(_0x2b1c7c[_0x325b80(0x2b4)](config[_0x325b80(0x294)]+'/'))_0x124e4d=_0x2b1c7c[_0x325b80(0x2ec)](config[_0x325b80(0x294)]+'/','');return _0x124e4d;}async function unlockOrders(){const _0x567f18=_0x3baa56;if(allOrdersPlaced&&lockOrders==ORDERS[_0x567f18(0x232)]){logger[_0x567f18(0x2da)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x567f18(0x1d3)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState=_0x567f18(0x1eb),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x567f18(0x2da)](_0x567f18(0x245));}}async function validateOrders(_0xb689ca){const _0x3dd1dc=_0x3baa56;if(_0xb689ca)validateOrdersState=_0xb689ca;logger['debug'](_0x3dd1dc(0x268)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x3dd1dc(0x1e7):lockOrders==0x2?_0x3dd1dc(0x2f7):'ORDERS.UNLOCKED'));let _0x5d2953=[],_0x588f65=config[_0x3dd1dc(0x2c8)]==_0x3dd1dc(0x201)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3dd1dc(0x1ea)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3dd1dc(0x232)])return;logger['debug'](_0x3dd1dc(0x266)+validateOrdersState),lastOrders[_0x3dd1dc(0x224)](_0x2f5d29=>{const _0x524f7e=_0x3dd1dc;let _0x2f65df=![];_0x2f5d29[_0x524f7e(0x28f)]>0x0&&(_0x2f65df=!![]),_0x5d2953[_0x524f7e(0x270)](_0x2f65df),_0x2f65df&&config[_0x524f7e(0x2c8)]!=_0x524f7e(0x201)&&logHistory(_0x524f7e(0x287),'Order\x20filled:\x20'+_0x2f5d29[_0x524f7e(0x276)]+'\x20'+_0x2f5d29[_0x524f7e(0x20c)]+'\x20#'+formatResult(_0x2f5d29[_0x524f7e(0x28f)],0x8)+'\x20@'+formatResult(_0x2f5d29['price'],0x8));}),_0x5d2953['forEach']((_0x32e9e3,_0x3aa1af)=>{const _0x1d5aa5=_0x3dd1dc;if(_0x32e9e3)lastOrders[_0x1d5aa5(0x28b)](_0x3aa1af,0x1);}),persistOpenOrders(lastOrders);const _0x2c1596=coolingDown?_0x3dd1dc(0x2c3):_0x3dd1dc(0x30c);if(validateOrdersState==_0x3dd1dc(0x1eb))validateOrdersState=_0x3dd1dc(0x23b),_0x5d2953[_0x3dd1dc(0x2b4)](![])?config[_0x3dd1dc(0x2c8)]==_0x3dd1dc(0x201)?logHistory(_0x3dd1dc(0x2bf),_0x3dd1dc(0x26d)):logHistory(_0x3dd1dc(0x2bf),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x3dd1dc(0x23b)){if(_0x5d2953['includes'](![])){}else allOrdersPlaced&&(config[_0x3dd1dc(0x2c8)]==_0x3dd1dc(0x201)?logHistory('success','Order(s)\x20validated\x20-\x20'+_0x2c1596):logHistory(_0x3dd1dc(0x252),'Order(s)\x20filled\x20-\x20'+_0x2c1596),await unlockOrders());}else{if(validateOrdersState==_0x3dd1dc(0x2c1))_0x5d2953[_0x3dd1dc(0x2b4)](![])&&(config[_0x3dd1dc(0x2c8)]==_0x3dd1dc(0x201)?logHistory(_0x3dd1dc(0x252),_0x3dd1dc(0x290)+Math[_0x3dd1dc(0x2f6)](_0x588f65*validateOrderInterval/0xea60)+_0x3dd1dc(0x2b6)+_0x2c1596):(await cancelOrders(),logHistory('success',_0x3dd1dc(0x2d1)+Math[_0x3dd1dc(0x2f6)](_0x588f65*validateOrderInterval/0xea60)+_0x3dd1dc(0x2b6)+_0x2c1596))),await unlockOrders();else{if(validateOrdersState==_0x3dd1dc(0x2c9)){if(config['ordertype']!='market')logHistory('success',_0x3dd1dc(0x319)+_0x2c1596);await unlockOrders();}}}}}async function cancelOrders(){const _0x28eaf7=_0x3baa56;lastOrders[_0x28eaf7(0x224)](async _0x3ff1c5=>{const _0x3c3f54=_0x28eaf7;try{const _0x1a900b=await exchange['cancelOrder'](_0x3ff1c5[_0x3c3f54(0x2df)],_0x3ff1c5[_0x3c3f54(0x276)]);}catch(_0x31efb3){if(_0x31efb3[_0x3c3f54(0x26c)]()[_0x3c3f54(0x2b4)](_0x3c3f54(0x251))){}else await handleError(_0x31efb3,'cancelOrders()');}});}async function initCoinResults(){const _0x266403=_0x3baa56;let _0x4e0da0=[];config[_0x266403(0x279)]['forEach'](_0x407a9b=>{const _0x3ee163=_0x266403;if(!_0x407a9b[_0x3ee163(0x286)]&&_0x407a9b[_0x3ee163(0x2d2)]!=config[_0x3ee163(0x294)]){let _0x262817=dbCoinResults[_0x3ee163(0x280)]('coins')['find']({'coin':_0x407a9b[_0x3ee163(0x2d2)]})[_0x3ee163(0x23f)]();if(!_0x262817){const _0x10a6de=currentCoins[_0x3ee163(0x2e0)](_0x3ab5e3=>_0x3ab5e3['coin']==_0x407a9b['coin']),_0x44880b=global['ticker'][noslash(_0x407a9b['symbol'])];let _0x56bc6c=_0x10a6de?_0x10a6de[_0x3ee163(0x2de)]:null,_0x61e9ce=_0x407a9b['reverse']?0x1/_0x44880b:_0x44880b,_0x564e06;config['liquidity'][_0x3ee163(0x224)](_0xaf65da=>{const _0x2b04fa=_0x3ee163;!_0x564e06&&(_0x564e06=_0xaf65da['changes'][_0x2b04fa(0x2e0)](_0xbcba37=>_0xbcba37[_0x2b04fa(0x2d2)]==_0x407a9b['coin']),_0x564e06&&(_0x56bc6c=_0x564e06[_0x2b04fa(0x2de)],_0x61e9ce=_0x564e06['price']));}),_0x4e0da0[_0x3ee163(0x270)]({'coin':_0x407a9b[_0x3ee163(0x2d2)],'number':_0x56bc6c,'price':_0x61e9ce});}}}),_0x4e0da0['forEach'](_0xbc365f=>{const _0x4ef769=_0x266403,_0x2b3220={'coin':_0xbc365f[_0x4ef769(0x2d2)],'number':_0xbc365f['number'],'breakeven':_0xbc365f[_0x4ef769(0x311)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4ef769(0x305))[_0x4ef769(0x270)](_0x2b3220)[_0x4ef769(0x1d2)]();});}async function updateCoinResults(_0x2c5bbc,_0x31ffea=![]){const _0x147195=_0x3baa56;let _0x4c1da9,_0x4800fe,_0x4e5922,_0x4e9790,_0x4e37e3,_0x463095,_0x37ad4f=dbCoinResults[_0x147195(0x280)]('coins')[_0x147195(0x2e0)]({'coin':_0x2c5bbc[_0x147195(0x2d2)]})[_0x147195(0x23f)]();!_0x37ad4f&&await initCoinResults();_0x2c5bbc[_0x147195(0x30a)]&&(_0x463095={'filled':_0x2c5bbc[_0x147195(0x28f)]*_0x2c5bbc[_0x147195(0x311)],'amount':_0x2c5bbc[_0x147195(0x28f)]*_0x2c5bbc[_0x147195(0x311)],'side':_0x2c5bbc[_0x147195(0x20c)]==_0x147195(0x1cd)?_0x147195(0x2ee):'sell','price':0x1/_0x2c5bbc[_0x147195(0x311)]},_0x2c5bbc={..._0x2c5bbc,..._0x463095});_0x31ffea?_0x4800fe=_0x2c5bbc[_0x147195(0x20c)]=='buy'?_0x37ad4f[_0x147195(0x2de)]+_0x2c5bbc[_0x147195(0x28f)]:_0x37ad4f[_0x147195(0x2de)]-_0x2c5bbc[_0x147195(0x28f)]:_0x4800fe=await getCoinNumber(_0x2c5bbc[_0x147195(0x2d2)]);if(_0x2c5bbc['fee']&&_0x2c5bbc[_0x147195(0x2fc)]['currency']==config[_0x147195(0x294)])_0x4c1da9=_0x2c5bbc['fee']['cost'];else{if(_0x2c5bbc[_0x147195(0x2fc)]&&_0x2c5bbc['fee']['currency']=='BNB'&&!_0x31ffea)_0x4c1da9=_0x2c5bbc[_0x147195(0x2fc)][_0x147195(0x222)]*global['ticker']['BNB'+config[_0x147195(0x294)]];else _0x4c1da9=defaultFee*_0x2c5bbc[_0x147195(0x28f)]*_0x2c5bbc[_0x147195(0x311)];}_0x2c5bbc[_0x147195(0x20c)]==_0x147195(0x2ee)?(_0x4e5922=_0x4800fe!=0x0?(_0x37ad4f['breakeven']*_0x37ad4f['number']+_0x2c5bbc[_0x147195(0x311)]*(_0x4800fe-_0x37ad4f[_0x147195(0x2de)])+_0x4c1da9)/_0x4800fe:0x0,_0x4e9790=_0x37ad4f['realized']):(_0x4e5922=_0x4800fe!=0x0?(_0x37ad4f[_0x147195(0x2e7)]*_0x37ad4f[_0x147195(0x2de)]-_0x2c5bbc[_0x147195(0x311)]*(_0x37ad4f[_0x147195(0x2de)]-_0x4800fe)+_0x4c1da9)/_0x4800fe:0x0,_0x4e9790=_0x37ad4f[_0x147195(0x2cf)]+(_0x2c5bbc[_0x147195(0x311)]-_0x37ad4f[_0x147195(0x2e7)])*_0x2c5bbc[_0x147195(0x28f)]);_0x4e37e3=(_0x2c5bbc['price']-_0x4e5922-_0x4c1da9/_0x2c5bbc[_0x147195(0x28f)])*_0x4800fe;let _0x463ab1={'coin':_0x2c5bbc['coin'],'number':_0x4800fe,'breakeven':formatResult(_0x4e5922,0x8),'realized':formatResult(_0x4e9790,0x8),'unrealized':formatResult(_0x4e37e3,0x8),'fees':formatResult(_0x37ad4f[_0x147195(0x226)]+_0x4c1da9,0x8),'sells':_0x2c5bbc[_0x147195(0x20c)]==_0x147195(0x1cd)?_0x37ad4f[_0x147195(0x1f5)]+0x1:_0x37ad4f['sells'],'buys':_0x2c5bbc[_0x147195(0x20c)]==_0x147195(0x2ee)?_0x37ad4f[_0x147195(0x2e5)]+0x1:_0x37ad4f[_0x147195(0x2e5)]};dbCoinResults[_0x147195(0x280)](_0x147195(0x305))[_0x147195(0x2e0)]({'coin':_0x2c5bbc['coin']})[_0x147195(0x1fd)](_0x463ab1)['write']();if(!_0x31ffea){if(_0x2c5bbc[_0x147195(0x2fc)]&&_0x2c5bbc[_0x147195(0x2fc)][_0x147195(0x2a5)]==_0x147195(0x1ec)){const _0x2d10a1=currentCoins[_0x147195(0x2e0)](_0x53d8ba=>_0x53d8ba['coin']==_0x147195(0x1ec));if(_0x2d10a1){let _0x36050b=dbCoinResults[_0x147195(0x280)]('coins')[_0x147195(0x2e0)]({'coin':_0x147195(0x1ec)})[_0x147195(0x23f)]();_0x463ab1={..._0x36050b,'number':_0x2d10a1[_0x147195(0x2de)]},dbCoinResults[_0x147195(0x280)]('coins')[_0x147195(0x2e0)]({'coin':_0x147195(0x1ec)})[_0x147195(0x1fd)](_0x463ab1)[_0x147195(0x1d2)]();}}}}async function placeOrder(_0x2f2b06){const _0x3c3417=_0x3baa56,_0x3ed303=config['ordertype']==_0x3c3417(0x201)?_0x3c3417(0x201):'limit';if(lockOrders==ORDERS[_0x3c3417(0x254)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3c3417(0x232)],allOrdersPlaced=![],validateOrdersState=_0x3c3417(0x1eb),lastOrders=[];for(const _0x420b5f of _0x2f2b06){let _0x403b14,_0x5de5bd,_0x20cb1b,_0x3d9631,_0x47c7ed,_0x22cb31=_0x420b5f[_0x3c3417(0x276)];try{const _0x343338=await exchange[_0x3c3417(0x229)](_0x22cb31);_0x403b14=_0x420b5f[_0x3c3417(0x30a)]?0x1/_0x420b5f[_0x3c3417(0x2a0)]:_0x420b5f['last'],_0x5de5bd=_0x343338[_0x3c3417(0x308)],_0x20cb1b=_0x343338['ask'];_0x420b5f[_0x3c3417(0x30a)]?(_0x3d9631=_0x420b5f[_0x3c3417(0x20c)]==_0x3c3417(0x2ee)?_0x3c3417(0x1cd):_0x3c3417(0x2ee),_0x47c7ed=Math['abs'](_0x420b5f['trade'])/_0x403b14):(_0x3d9631=_0x420b5f['side'],_0x47c7ed=Math[_0x3c3417(0x1f9)](_0x420b5f['trade']));_0x3ed303=='limit'&&(config['ordertype']=='limit-high'&&(_0x403b14=_0x3d9631==_0x3c3417(0x2ee)?_0x5de5bd:_0x20cb1b),config[_0x3c3417(0x2c8)]==_0x3c3417(0x2c2)&&(_0x403b14=_0x3d9631==_0x3c3417(0x2ee)?_0x20cb1b:_0x5de5bd));_0x47c7ed=formatResult(_0x47c7ed,0x8),_0x403b14=formatResult(_0x403b14,0x8);const _0x95fd52=_0x3d9631=='sell'?config[_0x3c3417(0x246)]?String[_0x3c3417(0x223)]('0x'+config[_0x3c3417(0x246)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x321f51=_0x3ed303==_0x3c3417(0x201)?'Market':config[_0x3c3417(0x2c8)]=='limit-high'?'Limit\x20(high-margin)':_0x3c3417(0x299),_0x36a1bf=new Date()[_0x3c3417(0x240)]()[_0x3c3417(0x26c)]()['slice'](-0x6)+'-'+Math[_0x3c3417(0x217)]()[_0x3c3417(0x26c)]()[_0x3c3417(0x2bc)](-0x6);lastOrders[_0x3c3417(0x270)]({'customId':_0x36a1bf,'symbol':_0x22cb31,'coin':_0x420b5f[_0x3c3417(0x2d2)],'side':_0x3d9631,'reverse':_0x420b5f[_0x3c3417(0x30a)],'filled':0x0});if(_0x3ed303==_0x3c3417(0x201))logHistory(_0x3c3417(0x287),''+_0x95fd52+_0x321f51+_0x3c3417(0x1d4)+_0x22cb31+'\x20'+_0x3d9631+'\x20#'+formatResult(_0x47c7ed,0x8)+'\x20@'+formatResult(_0x403b14,0x8));else logHistory(_0x3c3417(0x287),''+_0x95fd52+_0x321f51+_0x3c3417(0x1d4)+_0x22cb31+'\x20'+_0x3d9631+'\x20#'+formatResult(_0x47c7ed,0x8)+'\x20@'+formatResult(_0x403b14,0x8));const _0x38cd5e=await exchange['createOrder'](_0x22cb31,_0x3ed303,_0x3d9631,_0x47c7ed,_0x403b14,{'clientOrderId':_0x36a1bf}),_0x4615c1=lastOrders['length']-0x1;_0x4615c1>=0x0&&lastOrders[_0x4615c1][_0x3c3417(0x23c)]==_0x36a1bf&&(lastOrders[_0x4615c1]={...lastOrders[_0x4615c1],'orderId':_0x38cd5e['id'],'amount':_0x38cd5e['amount'],'price':_0x38cd5e['price'],'fee':_0x38cd5e[_0x3c3417(0x2fc)]});if(config[_0x3c3417(0x1e5)]!=0x0){let _0xcf464c=null;if(cooldownTracker[_0x3c3417(0x315)]==config[_0x3c3417(0x1e5)]-0x1)_0xcf464c=cooldownTracker['shift']();const _0x11e526=getTimeStamp();cooldownTracker[_0x3c3417(0x270)](_0x11e526);if(_0xcf464c){const _0x2a5aba=fns['differenceInSeconds'](new Date(_0x11e526),new Date(_0xcf464c));if(_0x2a5aba<cooldownInterval){logHistory(_0x3c3417(0x2ca),'Executed\x20'+config[_0x3c3417(0x1e5)]+_0x3c3417(0x203)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3c3417(0x1e0)),coolingDown=!![];break;}}}}catch(_0x53bb2d){if(_0x53bb2d['toString']()[_0x3c3417(0x2b4)](_0x3c3417(0x272)))lastOrders=lastOrders['filter'](_0x1d661c=>_0x1d661c['symbol']!=_0x22cb31),logHistory(_0x3c3417(0x2ca),_0x3c3417(0x236)+_0x22cb31);else _0x53bb2d['toString']()[_0x3c3417(0x2b4)](_0x3c3417(0x29d))?(lastOrders=lastOrders[_0x3c3417(0x2a9)](_0xa2ccbf=>_0xa2ccbf[_0x3c3417(0x276)]!=_0x22cb31),logHistory(_0x3c3417(0x2ca),_0x3c3417(0x313)+_0x22cb31)):(lastOrders=lastOrders[_0x3c3417(0x2a9)](_0x1acfff=>_0x1acfff[_0x3c3417(0x276)]!=_0x22cb31),await handleError(_0x53bb2d,_0x3c3417(0x24e),_0x22cb31));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3c3417(0x315)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x599958=config[_0x3c3417(0x2c8)]==_0x3c3417(0x201)?validateOrderTimeout*0x3c*0x3e8:config[_0x3c3417(0x1ea)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x474e63=_0x3c3417;validateOrders(_0x474e63(0x2c1));},_0x599958);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x3c3417(0x252),_0x3c3417(0x281)));}else{if(coolingDown)!config[_0x3c3417(0x21d)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x3c3417(0x254)]&&(!config['headless']&&(config[_0x3c3417(0x2c8)]==_0x3c3417(0x201)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3c3417(0x2ca),_0x3c3417(0x25e))));}}function persistOpenOrders(_0x213b76){const _0x34b04f=_0x3baa56,_0x2be4fe={...config,'openOrders':_0x213b76};let _0x31c3b7=dbConfig[_0x34b04f(0x280)]('bot')[_0x34b04f(0x2e0)]({'botID':botID})[_0x34b04f(0x23f)]();_0x31c3b7&&dbConfig[_0x34b04f(0x280)](_0x34b04f(0x310))[_0x34b04f(0x2e0)]({'botID':botID})[_0x34b04f(0x1fd)](_0x2be4fe)[_0x34b04f(0x1d2)]();}function restoreOrders(){const _0x7d7185=_0x3baa56;let _0x27ad61;config[_0x7d7185(0x23d)]&&allOpenOrders['forEach'](_0x2b958c=>{const _0x24c35e=_0x7d7185,_0x47fab5=config[_0x24c35e(0x23d)]['find'](_0x22676c=>_0x22676c[_0x24c35e(0x2df)]==_0x2b958c['id']);_0x47fab5&&(lastOrders[_0x24c35e(0x270)](_0x47fab5),_0x27ad61=_0x2b958c[_0x24c35e(0x1e4)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x7d7185(0x23b),allOrdersPlaced=!![];const _0xb55b6c=new Date()[_0x7d7185(0x240)](),_0x5e469d=config[_0x7d7185(0x2c8)]==_0x7d7185(0x201)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x27ad61+_0x5e469d>_0xb55b6c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x27ad61+_0x5e469d-_0xb55b6c);}else validateOrders(_0x7d7185(0x2c1));}}async function sendPortfolioTelegram(){const _0x1985ab=_0x3baa56;if(!coinsLoaded){process[_0x1985ab(0x295)]({'telegrammsg':_0x1985ab(0x2b0)},_0x43613f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x11f4bd=[_0x1985ab(0x26a),_0x1985ab(0x2cc),_0x1985ab(0x317),'USDT'],_0x3370e4=_0x11f4bd[_0x1985ab(0x2b4)](config[_0x1985ab(0x294)])?0x2:0x8;let _0x1dc225='';if(config['showname'])_0x1dc225='<b>'+config[_0x1985ab(0x1ed)]+_0x1985ab(0x218);else _0x1dc225=_0x1985ab(0x288)+botID+'\x20portfolio:</b>\x20\x0a\x0a';const _0xcac486=getKPIs(_0x1985ab(0x294)),_0x3c4431=getKPIs(_0x1985ab(0x312));_0x1dc225+=_0x1985ab(0x2e8),_0x1dc225+=_0xcac486['leftTxt']+_0x1985ab(0x253)+_0xcac486['value']+'\x20\x0a',_0x1dc225+=_0xcac486[_0x1985ab(0x23e)]+':\x20'+_0xcac486['change']+_0x1985ab(0x314),_0x1dc225+=_0x3c4431[_0x1985ab(0x21c)]+':\x20'+_0x3c4431[_0x1985ab(0x23f)]+'\x20'+config[_0x1985ab(0x294)]+'\x0a',_0x1dc225+=_0x3c4431[_0x1985ab(0x23e)]+':\x20'+_0x3c4431[_0x1985ab(0x1ee)]+_0x1985ab(0x314),_0x1dc225+='\x0a',_0x1dc225+=_0x1985ab(0x23a),_0x1dc225+=_0x1985ab(0x28c),_0x1dc225+=_0x1985ab(0x23a),currentCoins[_0x1985ab(0x224)](_0x560934=>{const _0x17b54b=_0x1985ab;_0x1dc225+=_0x560934[_0x17b54b(0x2d2)][_0x17b54b(0x227)](0x7)+'|\x20'+formatPad(_0x560934[_0x17b54b(0x1dd)],0x2,0x6)+'|\x20'+formatPad(_0x560934[_0x17b54b(0x1d1)],0x2,0x6)+'|\x20'+formatPad(_0x560934[_0x17b54b(0x219)]*0x64,0x2,0x6)+'\x0a';}),_0x1dc225+=_0x1985ab(0x2ab),process[_0x1985ab(0x295)]({'telegrammsg':_0x1dc225},_0xc36f84=>{});}function _0x525f(){const _0x147128=['Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','showname','\x20exchange','enabled','-------------------------------\x0a','ongoing','customId','openOrders','rightTxt','value','getTime','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','apply','liquidity','milliseconds','2\x20-\x20Orders\x20unlocked','emojisell','entries','Reset\x20|\x20','toUpperCase','symbols','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','privateKey','355280KswDNM','placeOrder()','ticker','3YdHFmA','OrderNotFound','success','\x20:\x20','UNLOCKED','average','2850848QsiQsK','USDT','existsSync','fiat','exchanges','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','2.6.0','Unknown\x20error\x20occured','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','close',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20API\x20key\x20is\x20invalid','getPortfolio','/EUR','2\x20-\x20Handled\x20open\x20orders','performance','2\x20-\x20Validate\x20orders:\x20','showConfig','1\x20-\x20Validate\x20orders:\x20','cancel','EUR','map','toString','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Manual\x20balancing\x20required','getOpenOrders()','push','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','MIN_NOTIONAL','Failed\x20to\x20load\x20coin\x20data\x20for\x20','valid','fetchClosedOrders','symbol','ExchangeNotAvailable','Pausing\x20for\x20','portfolio','test','-performance.json','2507516dguWuy','***','getMonth','keys','get','Cooldown\x20ended\x20-\x20balancing\x20resumed','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','toLowerCase','./logs/','usd','excluded','order','<b>Bot\x20','API-key\x20format\x20invalid','open','splice','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','none','\x20minutes','filled','Order(s)\x20not\x20validated\x20after\x20','limits','3443300OzJupj','-events.json','basecoin','send','lowdb','\x20>\x20[DEBUG]\x20','startprice','Limit\x20(low-margin)','log','datetime','args','Invalid\x20quantity','getHours','threshold','last','bb-settings.json','full','HOT/BTC','netoffset','currency','getCoins()','1\x20-\x20FILLED:\x20','getMinutes','filter','NANO/','</pre>','data','configuration','parseISO','Bot\x20','Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','status','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','Net\x20effect','includes','clientOrderId','\x20minutes\x20-\x20','\x20|\x20','fetchBalance','restart','\x20change','001','slice','exchange','ETH','warning','remainingSymbols','final','limit-low','balancing\x20resumes\x20when\x20cooldown\x20ends','function','./version.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','BTC','ordertype','no\x20open\x20orders','error','progress','USD','bot-','substring','realized','change24h','Unfilled\x20order(s)\x20canceled\x20after\x20','coin','time','exec','logs','yargs/yargs','changes','loading-canceled','getFullYear','debug','\x20API\x20secret\x20is\x20invalid','getCoinNumber()','cancelOrder','number','orderId','find','35230446QdQEbT','join','net-fiat','************','buys','sort','breakeven','<pre>','DDoSProtection','total','freeze','replace','parse','buy','version','concat','getStartingBalances','3\x20-\x20handling\x20FILLED\x20order:\x20','2.3.5','yyyy-MM-dd\x27T\x27HH:mm:ss','timer:','round','ORDERS.UNLOCKING','message','amount','./config/','getSeconds','fee','toFixed','startnumber','apiKey','watchOrders','max','(((.+)+)+)+$','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','kill','coins','fetchOpenOrders','getDate','bid','deleteHistoryAlerts','reverse','Net\x20','balancing\x20resumed','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','startdate','argv','bot','price','net-basecoin','Order\x20amount\x20is\x20invalid:\x20','%\x20\x0a','length','type','BUSD','loadSymbols()','No\x20more\x20open\x20orders\x20-\x20','padStart','Error:\x20Invalid\x20argument\x20','placeOrder','has','storeConfiguration','sell','.json','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','split','target','write','UNLOCKING','\x20order:\x20','decrypt','simple','Net\x20effect\x20(','precision','stringify','sortBy','set','event','distribution','watchTrades','uncaughtException','\x20hour','2200093SYWGlc','BNB/','eur','timestamp','cooldown','util','ORDERS.LOCKED','ccxt','timeshift','timeout','initial','BNB','botname','change','2609940BVwEru','writeFile','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','YOYOW/','InsufficientFunds','\x20-\x20bot\x20not\x20started','sells','12FfUxkJ','min','closed','abs','\x20value','Crypt','apiSecret','assign','trade','loadMarkets','findIndex','market','getPortfolio()','\x20orders\x20in\x20less\x20than\x20','fetchTickers','\x20has\x20a\x2024h\x20drop\x20of\x20','DAI/','page','sendPortfolioTelegram','running','\x20not\x20available','createOrder','side','date',':\x20Bot\x20','createWriteStream','storeHeadless','\x20>\x20','XEM/BUSD','offset','AuthenticationError','cloneDeep','canceled','random','\x20portfolio:</b>\x20\x0a\x0a','delta','starting-balance-','sha256','leftTxt','headless','event-history','toggleBotMode','0\x20-\x20EXECUTION:\x20','defaults','cost','fromCodePoint','forEach','Initiating\x20exchange\x20reload','fees','padEnd','InvalidNonce','fetchTicker','remove','orderstatus','mkdirSync','balances','string','date-fns','format','add','LOCKED','percentage','indexOf','secure'];_0x525f=function(){return _0x147128;};return _0x525f();}function formatPad(_0xb0489,_0x37fdae,_0x73990b){const _0x289a62=_0x3baa56,_0xd5c7bf=formatResultString(_0xb0489,_0x37fdae);return _0xd5c7bf?_0xd5c7bf[_0x289a62(0x31a)](_0x73990b):''[_0x289a62(0x31a)](_0x73990b);}function logHistory(_0x3b68a7,_0x416051,_0x2ba34d=''){const _0x1f4b84=_0x3baa56;let _0x446ad4={'time':getTimeStamp(),'type':_0x3b68a7,'event':_0x416051};dbLogs['get'](_0x1f4b84(0x2d5))[_0x1f4b84(0x270)](_0x446ad4)[_0x1f4b84(0x1d2)]();if(_0x2ba34d=='')_0x2ba34d=_0x416051;proxyEmit(_0x1f4b84(0x1dc),{'log':_0x446ad4,'summary':_0x2ba34d}),process[_0x1f4b84(0x295)]({'telegram':{..._0x446ad4,'botname':config[_0x1f4b84(0x1ed)],'showname':config[_0x1f4b84(0x237)]}},_0x316332=>{}),logger[_0x1f4b84(0x2a2)](''+_0x446ad4[_0x1f4b84(0x1dc)]);}function emitHistory(_0x4c9743={}){const _0x14d16a=_0x3baa56;Object[_0x14d16a(0x27f)](_0x4c9743)[_0x14d16a(0x315)]==0x0&&(_0x4c9743={'type':[_0x14d16a(0x287),_0x14d16a(0x1dc)],'event':'','page':0x1});if(_0x4c9743[_0x14d16a(0x316)][_0x14d16a(0x2b4)](_0x14d16a(0x1dc)))_0x4c9743['type'][_0x14d16a(0x28b)](_0x4c9743['type'][_0x14d16a(0x234)](_0x14d16a(0x1dc)),0x1,_0x14d16a(0x2ca),_0x14d16a(0x252));if(dbLogs[_0x14d16a(0x31d)](_0x14d16a(0x2d5))['value']()){let _0x4d85fd=dbLogs[_0x14d16a(0x280)]('logs')[_0x14d16a(0x2a9)](_0x28a61f=>{const _0x3d5f24=_0x14d16a;if(_0x4c9743['type'][_0x3d5f24(0x315)]==0x0)return![];else return _0x4c9743['type']['includes'](_0x28a61f[_0x3d5f24(0x316)]);})[_0x14d16a(0x2a9)](_0x4340be=>{const _0x3b766b=_0x14d16a;if(_0x4c9743['event']=='')return!![];else return _0x4340be[_0x3b766b(0x1dc)]['toLowerCase']()[_0x3b766b(0x2b4)](_0x4c9743[_0x3b766b(0x1dc)]['toLowerCase']());})['sortBy'](_0x14d16a(0x2d3)),_0x2fdfe8=_0x4d85fd[_0x14d16a(0x23f)]()[_0x14d16a(0x315)];_0x4d85fd=_0x4d85fd[_0x14d16a(0x30a)]()[_0x14d16a(0x2bc)]((_0x4c9743[_0x14d16a(0x207)]-0x1)*logPageSize,_0x4c9743[_0x14d16a(0x207)]*logPageSize-0x1)[_0x14d16a(0x30a)]()[_0x14d16a(0x23f)](),proxyEmit(_0x14d16a(0x21e),{'logs':_0x4d85fd,'total':_0x2fdfe8});}else proxyEmit(_0x14d16a(0x21e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x184e7c){const _0x33f8b6=_0x3baa56;if(dbLogs['has'](_0x33f8b6(0x2d5))[_0x33f8b6(0x23f)]()){const _0x36db3b=dbLogs[_0x33f8b6(0x280)](_0x33f8b6(0x2d5))[_0x33f8b6(0x1da)](_0x33f8b6(0x2d3))['filter'](_0x4a5e5e=>{const _0x377099=_0x33f8b6;return _0x4a5e5e[_0x377099(0x316)]==_0x377099(0x287);})['value']();dbLogs[_0x33f8b6(0x280)](_0x33f8b6(0x2d5))['remove']()['write'](),dbLogs[_0x33f8b6(0x280)](_0x33f8b6(0x2d5))[_0x33f8b6(0x1fd)](_0x36db3b)['write'](),emitHistory(_0x184e7c);}}async function pauseBot(_0x70d128=''){const _0x44dd69=_0x3baa56,_0x2b3bc1=new Date()[_0x44dd69(0x240)]();if(!lastErrorShown||_0x2b3bc1-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x2b3bc1;!lastBotPause?(lastBotPause=_0x2b3bc1,consecutivePauses=0x1):(_0x2b3bc1-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x44dd69(0x295)]({'stop':_0x44dd69(0x2b9)},_0x1f0772=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x70d128)_0x70d128+=_0x44dd69(0x2b7);logHistory(_0x44dd69(0x2ca),_0x70d128+_0x44dd69(0x278)+pauseBotInterval/0xea60+_0x44dd69(0x28e)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x546ffe=_0x3baa56;process[_0x546ffe(0x295)]({'stop':_0x546ffe(0x304)},_0x5edc08=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x33589c,_0x5cb635){const _0x4dfbfb=_0x3baa56;if(_0x33589c['toString']()[_0x4dfbfb(0x2b4)](_0x4dfbfb(0x289)))return logHistory(_0x4dfbfb(0x2ca),config[_0x4dfbfb(0x2bd)]+_0x4dfbfb(0x261)),![];else{if(_0x33589c[_0x4dfbfb(0x26c)]()['includes'](_0x4dfbfb(0x1f1)))return logHistory(_0x4dfbfb(0x2ca),config[_0x4dfbfb(0x2bd)]+_0x4dfbfb(0x2db)),![];else{if(_0x33589c[_0x4dfbfb(0x26c)]()[_0x4dfbfb(0x2b4)](_0x4dfbfb(0x214)))return logHistory(_0x4dfbfb(0x2ca),config['exchange']+_0x4dfbfb(0x24b)+config[_0x4dfbfb(0x2bd)]),![];else await handleError(_0x33589c,_0x5cb635);}}}async function handleError(_0x265fdf,_0x43aa0e,_0x255366=''){const _0x43fd85=_0x3baa56;if(_0x265fdf[_0x43fd85(0x26c)]()[_0x43fd85(0x2b4)](_0x43fd85(0x2e9)))await pauseBot(config[_0x43fd85(0x2bd)]+'\x20API\x20blocked\x20(DDoS\x20protection)');else{if(_0x265fdf['toString']()[_0x43fd85(0x2b4)](_0x43fd85(0x277)))await pauseBot(config[_0x43fd85(0x2bd)]+_0x43fd85(0x20a));else{if(_0x265fdf['toString']()[_0x43fd85(0x2b4)]('RequestTimeout'))await pauseBot(config['exchange']+'\x20not\x20responding');else{if(_0x265fdf[_0x43fd85(0x26c)]()[_0x43fd85(0x2b4)](_0x43fd85(0x241)))logHistory(_0x43fd85(0x2ca),_0x43aa0e+_0x43fd85(0x303)),logHistory(_0x43fd85(0x2ca),_0x43fd85(0x271)),await killBot();else{if(_0x265fdf['toString']()[_0x43fd85(0x2b4)](_0x43fd85(0x228)))logHistory(_0x43fd85(0x2ca),_0x43aa0e+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x43fd85(0x2ca),_0x43fd85(0x271)),await killBot();else{if(_0x265fdf['toString']()[_0x43fd85(0x2b4)](_0x43fd85(0x289)))logHistory(_0x43fd85(0x2ca),_0x43aa0e+_0x43fd85(0x2b7)+config[_0x43fd85(0x2bd)]+_0x43fd85(0x261)),logHistory(_0x43fd85(0x2ca),_0x43fd85(0x271)),await killBot();else{if(_0x265fdf[_0x43fd85(0x26c)]()[_0x43fd85(0x2b4)](_0x43fd85(0x1f1)))logHistory('error',_0x43aa0e+_0x43fd85(0x2b7)+config[_0x43fd85(0x2bd)]+_0x43fd85(0x2db)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x265fdf[_0x43fd85(0x26c)]()[_0x43fd85(0x2b4)](_0x43fd85(0x214)))logHistory(_0x43fd85(0x2ca),_0x43aa0e+'\x20|\x20'+config[_0x43fd85(0x2bd)]+_0x43fd85(0x2c6)+config[_0x43fd85(0x2bd)]),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x265fdf[_0x43fd85(0x26c)]()[_0x43fd85(0x2b4)](_0x43fd85(0x1f3))?logHistory(_0x43fd85(0x2ca),_0x43aa0e+_0x43fd85(0x2b2)+_0x255366):(logger[_0x43fd85(0x2a2)](_0x43aa0e+'\x20|\x20Error\x20details:\x20',_0x265fdf),await pauseBot(_0x43fd85(0x25d)));}}}}}}}}function formatResult(_0x27a5fc,_0x295f2b){return parseFloat(_0x27a5fc['toFixed'](_0x295f2b));}function formatResultTruncate(_0x538792,_0x504473){const _0x3e2741=_0x3baa56;let _0x52aa19=formatResultString(_0x538792,0xa),_0x5805a2=_0x52aa19['indexOf']('.');return _0x5805a2!=-0x1&&(_0x52aa19=_0x52aa19[_0x3e2741(0x2bc)](0x0,_0x5805a2+_0x504473+0x1)),Number(_0x52aa19);}function formatResultString(_0x5c42a4,_0x3a3ba6){const _0x242c98=_0x3baa56;let _0x2ec986;if(!(''+_0x5c42a4)[_0x242c98(0x2b4)]('e'))_0x2ec986=+(Math[_0x242c98(0x2f6)](_0x5c42a4+'e+'+_0x3a3ba6)+'e-'+_0x3a3ba6);else{let _0x36ec0b=(''+_0x5c42a4)[_0x242c98(0x1d0)]('e'),_0x46e62e='';+_0x36ec0b[0x1]+_0x3a3ba6>0x0&&(_0x46e62e='+'),_0x2ec986=+(Math[_0x242c98(0x2f6)](+_0x36ec0b[0x0]+'e'+_0x46e62e+(+_0x36ec0b[0x1]+_0x3a3ba6))+'e-'+_0x3a3ba6);}return Number(_0x2ec986)[_0x242c98(0x2fd)](_0x3a3ba6);}function getServerTime(){const _0x495c89=_0x3baa56,_0x3ce78c=new Date();return _0x3ce78c['getFullYear']()+'/'+(_0x3ce78c[_0x495c89(0x27e)]()+0x1)['toString']()[_0x495c89(0x31a)](0x2,'0')+'/'+_0x3ce78c[_0x495c89(0x307)]()[_0x495c89(0x26c)]()['padStart'](0x2,'0')+'\x20'+_0x3ce78c[_0x495c89(0x29e)]()[_0x495c89(0x26c)]()[_0x495c89(0x31a)](0x2,'0')+':'+_0x3ce78c[_0x495c89(0x2a8)]()[_0x495c89(0x26c)]()[_0x495c89(0x31a)](0x2,'0')+':'+_0x3ce78c[_0x495c89(0x2fb)]()[_0x495c89(0x26c)]()[_0x495c89(0x31a)](0x2,'0');}function getTimeStamp(){const _0x4df78c=_0x3baa56,_0x14bd25=shiftedTime();return _0x14bd25[_0x4df78c(0x2d9)]()+'/'+(_0x14bd25['getMonth']()+0x1)[_0x4df78c(0x26c)]()[_0x4df78c(0x31a)](0x2,'0')+'/'+_0x14bd25[_0x4df78c(0x307)]()[_0x4df78c(0x26c)]()[_0x4df78c(0x31a)](0x2,'0')+'\x20'+_0x14bd25[_0x4df78c(0x29e)]()[_0x4df78c(0x26c)]()[_0x4df78c(0x31a)](0x2,'0')+':'+_0x14bd25['getMinutes']()[_0x4df78c(0x26c)]()[_0x4df78c(0x31a)](0x2,'0')+':'+_0x14bd25['getSeconds']()[_0x4df78c(0x26c)]()['padStart'](0x2,'0');}function getDate(){const _0x547bc3=_0x3baa56,_0x4eca75=shiftedTime();return _0x4eca75[_0x547bc3(0x2d9)]()+'/'+(_0x4eca75['getMonth']()+0x1)[_0x547bc3(0x26c)]()['padStart'](0x2,'0')+'/'+_0x4eca75[_0x547bc3(0x307)]()[_0x547bc3(0x26c)]()[_0x547bc3(0x31a)](0x2,'0');}function getHour(){const _0x3eb0b8=_0x3baa56,_0x471873=shiftedTime();return _0x471873[_0x3eb0b8(0x29e)]()['toString']()[_0x3eb0b8(0x31a)](0x2,'0');}function sleep(_0x1a06fb){return new Promise(_0x295607=>setTimeout(_0x295607,_0x1a06fb));}function shiftedTime(){const _0x57a21=_0x3baa56,_0x131463=new Date();let _0x598ec5=_0x131463;if(config&&config[_0x57a21(0x1e9)]!==0x0)_0x598ec5=fns[_0x57a21(0x231)](_0x131463,{'hours':config[_0x57a21(0x1e9)]});return _0x598ec5;}function timer(_0x1f331e){const _0x4bb5e9=_0x3baa56,_0x4800d4=new Date();!lasttime?console[_0x4bb5e9(0x29a)]('timer:',_0x1f331e,_0x4800d4):console[_0x4bb5e9(0x29a)](_0x4bb5e9(0x2f5),_0x1f331e,(_0x4800d4-lasttime)/0x3e8),lasttime=_0x4800d4;}