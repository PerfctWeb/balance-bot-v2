const _0x4520ae=_0x5976;(function(_0xab4b7,_0xbe1ee7){const _0x5c0766=_0x5976,_0x4c5c71=_0xab4b7();while(!![]){try{const _0x5f215a=-parseInt(_0x5c0766(0x22b))/0x1*(-parseInt(_0x5c0766(0x2d7))/0x2)+parseInt(_0x5c0766(0x1ed))/0x3*(-parseInt(_0x5c0766(0x168))/0x4)+-parseInt(_0x5c0766(0x20c))/0x5*(parseInt(_0x5c0766(0x2aa))/0x6)+-parseInt(_0x5c0766(0x2ed))/0x7*(-parseInt(_0x5c0766(0x152))/0x8)+parseInt(_0x5c0766(0x2c2))/0x9+parseInt(_0x5c0766(0x2fc))/0xa+-parseInt(_0x5c0766(0x2df))/0xb;if(_0x5f215a===_0xbe1ee7)break;else _0x4c5c71['push'](_0x4c5c71['shift']());}catch(_0x50ab07){_0x4c5c71['push'](_0x4c5c71['shift']());}}}(_0x446e,0x60b75));const _0x28c0fe=function(){let _0x5ed57c=!![];return function(_0x13adfb,_0x1a1abf){const _0x228914=_0x5ed57c?function(){const _0x589be8=_0x5976;if(_0x1a1abf){const _0x16cd5f=_0x1a1abf[_0x589be8(0x2d9)](_0x13adfb,arguments);return _0x1a1abf=null,_0x16cd5f;}}:function(){};return _0x5ed57c=![],_0x228914;};}(),_0xd9d922=_0x28c0fe(this,function(){const _0x4c2ae3=_0x5976;return _0xd9d922[_0x4c2ae3(0x1b4)]()['search'](_0x4c2ae3(0x163))[_0x4c2ae3(0x1b4)]()[_0x4c2ae3(0x289)](_0xd9d922)[_0x4c2ae3(0x208)]('(((.+)+)+)+$');});_0xd9d922();function _0x446e(){const _0x9d9a8d=['switch-manual','keys','debug','replace','page','Error\x20while\x20deleting\x20files:\x20','Bybit','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','bb-secure.json','cloneDeep','Initializing\x20coin\x20results','(((.+)+)+)+$','ongoing','forEach','apiSecret','Fee\x20discount\x20refund\x20detected:\x20','12cHVZSl','slider','\x20>\x20[DEBUG]\x20','removed','Limit\x20(high-margin)','trade','bid','lowdb/adapters/FileSync','fromCodePoint','2\x20-\x20Validate\x20orders:\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','./config/','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','sort','BTC','number','min','ticker','watchTrades()','startprice','full','USDP','Bot\x20','watchTrades','secure','buy','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','loadMarkets','Binance','stringify','fetchTicker','DDoSProtection','Net\x20effect','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','2\x20-\x20Handled\x20open\x20orders','-performance.json','sqrt','lowdb','entries','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','remove','/backup/','getPortfolio(2)','canceled','openOrders','market_cap','spot','configuration-stored','placeOrder()','Error:\x20Invalid\x20argument\x20','change','milliseconds','stopExchange()','open','splice','./version.json','\x20order:\x20','privateKey','args','indexOf','\x20>\x20details:','Net\x20','InsufficientFunds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','PermissionDenied','getSeconds','LOCKED','Invalid\x20symbol:\x20','fetchTickers()','threshold','datetime','version','isEqual','status','-results.json','toString',':\x20timer\x20>','password','Order\x20amount\x20is\x20invalid:\x20','get','RateLimitExceeded','padStart','toggleBotMode','function','\x20-\x20pausing\x20bot\x20for\x20','code','cost','substring','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','colorscheme','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','fetchTickers','2\x20-\x20handling\x20FILLED\x20order:\x20','Crypt','\x20exchange\x20error','storeFiat','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.0','currency','portfolio','update-liquidity','coins','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','OrderNotFound','concat','uncaughtException','MIN_NOTIONAL','startsWith','excluded','1\x20-\x20Unlock\x20orders','2.6.22','BNB','process\x20','bot','startdate','.json','orderstatus','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','data','RequestTimeout','log','settings','breakeven','Invalid\x20API\x20key\x20or\x20secret\x20entered','marketcapApi','toLowerCase','differenceInSeconds','close','yargs/yargs','778521rmiJaE','apiKey','ccxt','\x20|\x20','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','target',':\x20Bot\x20','changes','enabled','event-history','push','/EUR','exchange\x20not\x20reloaded','time','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','heapUsed','sell','shift','filled','format','hybrid-crypto-js','initial','added','PAXG','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','recovery','memoryUsage','search','recent20','exchange\x20reloaded','2.3.5','1118975VlSiIk','Order\x20is\x20invalid:\x20','remainingSymbols','round','liquidity','fetchClosedOrders','restart','getMonth','./logs/','<pre>','map','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','recreate','RSA-OAEP','\x20|\x20exchange:\x20','Pausing\x20for\x20','ID:\x20','highest','fetchBalance','getHours','cancelOrder','usd','market','Executing\x20bot\x20restart','botID','running','red_yellow_blue','cooldown','cancel','Limit\x20(low-margin)','loadSymbols()','1wkYGqV','rightTxt','ORDERS.UNLOCKED','writeFile','Insufficient\x20funds\x20to\x20execute\x20order:\x20','toFixed','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','watchOrders','sortBy','<b>','filter','kill','timeshift','1\x20-\x20Validate\x20orders:\x20','\x20>\x20','event','pro','BNB/','***','limit-low','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','toUpperCase','Headless:\x20','sendMetricsTelegram','warning','-events.json','watchTradesForSymbols()','active','2.6.23','emojisell','side','USDT','leftTxt','\x20minutes','abs','getDate','sells','configuration','fee','final','AuthenticationError','USD','\x20exchange','Transaction\x20detection\x20unblocked','RETRY\x20-\x20Problem\x20resolved\x20after\x20','getAllOrders()','unlinkSync',',\x20must\x20be\x20a\x203\x20digit\x20number','percentage','basecoin','ordertype','exec','fiat','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Portfolio\x20change\x20detected\x20-\x20bot\x20switched\x20to\x20manual\x20mode','-config.json','pop','none','\x20orders\x20in\x20less\x20than\x20','/output-000.log','exchanges','marketcap','limits','getCoins()','parse','1\x20-\x20Handle\x20open\x20orders','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','symbol','\x20API\x20key\x20is\x20invalid','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20uses\x20','showname','limit-high','Reset\x20|\x20','getCoinNumber()','defaults','timestamp','timeout','delta','average','ETH','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','sha256','Executing\x20exchange\x20reload','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','path','floor','status\x20code\x20401','autoliquidity','balances','includes','order','-------------------------------\x0a','Invalid\x20quantity','constructor','showConfig','length','closed','emojibuy','change24h','emitHistory','success','random','Order\x20filled:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','recreateCoinResults()','watchTradesForSymbols','Cryptocom','quote','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20has\x20a\x2024h\x20drop\x20of\x20','amount','No\x20more\x20open\x20orders\x20-\x20','request-time','assign','initclient','join','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','ExchangeNotAvailable','freeze','total','2\x20-\x20Orders\x20unlocked','storeHeadless','startnumber','\x20-\x20bot\x20not\x20started','no\x20open\x20orders','6bHlyqZ','parseISO','Exchange','performance','starting-balance-','\x20attempts','ExchangeError','\x20|\x20lock\x20orders:\x20','getTime','headless','onepagemode','resetHistory','distribution','\x20MB','Unfilled\x20order(s)\x20canceled\x20after\x20','value','getMinutes','Loading\x20completed','\x20change','exchange','reverse','Bitget','</pre>','decrypt','2597607gNFFJY','type','netoffset','offset','eur','customId','basecoinvalue','last','\x20minutes\x20-\x20','InvalidOrder','split','initTickers()','test','Huobipro','write','send','valid','UNLOCKED','sendPortfolioTelegram','find','getPortfolio(0)','1109534riXnAy','1\x20-\x20FILLED\x20known\x20order:\x20','apply','Exception\x20thrown\x20in\x20','%\x20(','starting-balances','findIndex','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','4784725bFbjCp','EUR','error','createOrder','buys','API-key\x20format\x20invalid','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','price','balancing\x20resumed','progress','yyyy/MM/dd','botname','\x20API\x20secret\x20is\x20invalid','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','7MMWNCi','getOpenOrders()','message','Symbol(s):\x20','bot-','slice','max','argv','marketcapEnabled','\x20hour','************','ORDERS.UNLOCKING','0\x20-\x20EXECUTION:\x20','existsSync','\x20-\x20','3978970TYKGPJ','realized','set','Trigger:\x20','date','net-fiat','orderId','Error\x20details:','has','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','deleteHistoryAlerts','coin','cancelLoading','logs','placeOrder','Portfolio\x20change\x20detected:\x20','limit','net-basecoin','mkdirSync','apiPassword','4737224yMmuEO','getFullYear','/USD','coin-loading-progress','Manual\x20balancing\x20required','bots'];_0x446e=function(){return _0x9d9a8d;};return _0x446e();}'use strict';const ccxt=require(_0x4520ae(0x1ef)),low=require(_0x4520ae(0x18e)),FileSync=require(_0x4520ae(0x16f)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x4520ae(0x201))[_0x4520ae(0x1c7)],util=require('util'),argv=require(_0x4520ae(0x1ec))(process[_0x4520ae(0x2f4)][_0x4520ae(0x2f2)](0x2))[_0x4520ae(0x2f4)],path=require(_0x4520ae(0x280)),axios=require('axios');let exchange;global[_0x4520ae(0x179)]={},global[_0x4520ae(0x19b)]={};const usdBasecoins=[_0x4520ae(0x254),'BUSD','TUSD',_0x4520ae(0x24a),'USDC',_0x4520ae(0x17d)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4520ae(0x2a3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4520ae(0x2d3)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x4520ae(0x1bd)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;function _0x5976(_0x344ecb,_0x5e2f0c){const _0x422192=_0x446e();return _0x5976=function(_0xd9d922,_0x28c0fe){_0xd9d922=_0xd9d922-0x14e;let _0x446e34=_0x422192[_0xd9d922];return _0x446e34;},_0x5976(_0x344ecb,_0x5e2f0c);}const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x4520ae(0x1a0))['version'],botID=process[_0x4520ae(0x2f4)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x4520ae(0x2ce)](botID)&&(console[_0x4520ae(0x1e4)](_0x4520ae(0x19a)+botID+_0x4520ae(0x25a)),killBot());const userID=process[_0x4520ae(0x2f4)][0x3]||'',configpath=userID?_0x4520ae(0x173)+userID+'/':_0x4520ae(0x173),logspath=userID?_0x4520ae(0x214)+userID+'/':_0x4520ae(0x214),loggerfile=fs['createWriteStream'](logspath+_0x4520ae(0x266),{'flags':'a'});!fs[_0x4520ae(0x2fa)](configpath)&&fs[_0x4520ae(0x150)](configpath);!fs[_0x4520ae(0x2fa)](logspath)&&fs[_0x4520ae(0x150)](logspath);const configfile=configpath+'bot-'+botID+_0x4520ae(0x262),logfile=configpath+'bot-'+botID+_0x4520ae(0x244),performancefile=configpath+_0x4520ae(0x2f1)+botID+'-performance.json',coinresultsfile=configpath+_0x4520ae(0x2f1)+botID+_0x4520ae(0x1b3),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4520ae(0x160),configbackuppath=configpath+_0x4520ae(0x192),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4520ae(0x276)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4520ae(0x276)]({'data':[],'version':serverversion})[_0x4520ae(0x2d0)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4520ae(0x276)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x4520ae(0x27d),'rsaStandard':_0x4520ae(0x219)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x512bca=>{const _0x90c115=_0x4520ae;console[_0x90c115(0x1e4)](_0x512bca);},'simple':_0xadb021=>{const _0x50af12=_0x4520ae;console['log'](_0xadb021),loggerfile[_0x50af12(0x2d0)](util[_0x50af12(0x200)](_0xadb021)+'\x0a');},'full':async(_0x1e7df4,_0x35f055='')=>{const _0x1bd6be=_0x4520ae;let _0x120842;if(config['showname'])_0x120842=getTimeStamp()+':\x20'+config[_0x1bd6be(0x2ea)]+_0x1bd6be(0x239)+_0x1e7df4;else _0x120842=getTimeStamp()+':\x20Bot\x20'+botID+_0x1bd6be(0x239)+_0x1e7df4;console[_0x1bd6be(0x1e4)](_0x120842),loggerfile[_0x1bd6be(0x2d0)](util[_0x1bd6be(0x200)](_0x120842)+'\x0a'),_0x35f055&&(console[_0x1bd6be(0x1e4)](_0x35f055),loggerfile[_0x1bd6be(0x2d0)](util[_0x1bd6be(0x200)](_0x35f055)+'\x0a'));},'debug':async(_0x1fb0b4,_0x5286ce='')=>{const _0x2b1cab=_0x4520ae;let _0x36a43b;if(config[_0x2b1cab(0x272)])_0x36a43b=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x1fb0b4;else _0x36a43b=getTimeStamp()+_0x2b1cab(0x1f3)+botID+_0x2b1cab(0x16a)+_0x1fb0b4;if(debugging)console['log'](_0x36a43b);loggerfile[_0x2b1cab(0x2d0)](util[_0x2b1cab(0x200)](_0x36a43b)+'\x0a');if(_0x5286ce){if(debugging)console['log'](_0x5286ce);loggerfile[_0x2b1cab(0x2d0)](util[_0x2b1cab(0x200)](_0x5286ce)+'\x0a');}}};process['on']('uncaughtException',function(_0x171b42){const _0x4d59d0=_0x4520ae;handleError(_0x171b42,_0x4d59d0(0x1d5));});settings['timeshift']!=config[_0x4520ae(0x237)]&&updateTimeshift(settings[_0x4520ae(0x237)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x4520ae(0x2b4)]);(settings[_0x4520ae(0x1e8)]&&!config['marketcapApi']||!settings[_0x4520ae(0x1e8)]&&config[_0x4520ae(0x1e8)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x4520ae(0x2d1)]({'started':_0x4520ae(0x225)},_0x109a18=>{}),initializeProcessListeners();function proxyEmit(_0x14b9f0,_0x71ab15=null){const _0x8da16a=_0x4520ae;process[_0x8da16a(0x2d1)]({'function':_0x14b9f0,'args':_0x71ab15},_0x262930=>{});}function initializeProcessListeners(){process['on']('message',_0x2cc090=>{const _0x525cdb=_0x5976;switch(Object[_0x525cdb(0x159)](_0x2cc090)[0x0]){case _0x525cdb(0x237):_0x2cc090['timeshift']!=undefined&&(settings[_0x525cdb(0x237)]=_0x2cc090['timeshift'],updateTimeshift(settings[_0x525cdb(0x237)]));break;case _0x525cdb(0x2b4):_0x2cc090['onepagemode']!=undefined&&(settings['onepagemode']=_0x2cc090[_0x525cdb(0x2b4)],updateOnepagemode(settings[_0x525cdb(0x2b4)]));break;case'marketcapApi':_0x2cc090[_0x525cdb(0x1e8)]!=undefined&&(settings[_0x525cdb(0x1e8)]=_0x2cc090[_0x525cdb(0x1e8)],updateMarketcapApi(settings['marketcapApi']));break;case _0x525cdb(0x157):_0x2cc090[_0x525cdb(0x157)]!=undefined&&(bots=JSON[_0x525cdb(0x26b)](_0x2cc090['bots']),proxyEmit(_0x525cdb(0x157),bots));break;case _0x525cdb(0x1bc):switch(_0x2cc090[_0x525cdb(0x1bc)]){case _0x525cdb(0x29f):initclient();break;case _0x525cdb(0x1bb):toggleBotMode();break;case _0x525cdb(0x28f):emitHistory(_0x2cc090[_0x525cdb(0x1a3)]);break;case _0x525cdb(0x306):deleteHistoryAlerts(_0x2cc090[_0x525cdb(0x1a3)]);break;case'getPortfolio':getPortfolio(_0x2cc090[_0x525cdb(0x1a3)]);break;case'storeConfiguration':storeConfiguration(_0x2cc090['args']);break;case _0x525cdb(0x2a6):storeHeadless(_0x2cc090['args']);break;case _0x525cdb(0x1c9):storeFiat(_0x2cc090[_0x525cdb(0x1a3)]);break;case _0x525cdb(0x2b5):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x525cdb(0x30a):placeOrder(_0x2cc090[_0x525cdb(0x1a3)]);break;case _0x525cdb(0x308):cancelLoading();break;case _0x525cdb(0x28a):showConfig();break;case _0x525cdb(0x242):sendMetricsTelegram();break;case _0x525cdb(0x2d4):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0xfb464b=![]){const _0x19d0e0=_0x4520ae;logger[_0x19d0e0(0x15a)](_0x19d0e0(0x274)+(_0xfb464b?_0x19d0e0(0x20a):_0x19d0e0(0x1f9))+_0x19d0e0(0x21a)+config[_0x19d0e0(0x2bd)]);if(pidBalances)clearTimeout(pidBalances);if(!_0xfb464b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x19d0e0(0x1ee)]!=''&&config[_0x19d0e0(0x1ee)]!=_0x19d0e0(0x23d)){loadingProgress=0x0;if(_0xfb464b){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x14e2af){handleErrorNoStop(_0x14e2af,_0x19d0e0(0x22a));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x429ffc=await getCoins();[currentCoins,currentCoinsAll]=_0x429ffc,blockTransactionDetection=![],getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x19d0e0(0x15a)](_0x19d0e0(0x2bb)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x19d0e0(0x28b)]==0x0&&allOpenOrders[_0x19d0e0(0x28b)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function getMarketCap(_0x3457b2){const _0x1779c2=_0x4520ae;let _0x5d19c8=![];if(_0x3457b2)_0x5d19c8=!![];let _0x30e967;_0x5d19c8?_0x30e967=_0x3457b2[_0x1779c2(0x216)](_0x59f6ee=>_0x59f6ee[_0x1779c2(0x307)]):_0x30e967=currentCoinsAll[_0x1779c2(0x216)](_0x56812c=>_0x56812c['coin']);if(!config[_0x1779c2(0x1e8)]||!_0x5d19c8&&!config[_0x1779c2(0x2f5)]||_0x30e967['length']==0x0)return;let _0x43b6e7=null;try{_0x43b6e7=await axios['get'](_0x1779c2(0x1d2),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x1779c2(0x1e8)]},'params':{'symbol':_0x30e967[_0x1779c2(0x1b4)]()}});}catch(_0x135321){_0x43b6e7=null,_0x135321['toString']()[_0x1779c2(0x285)](_0x1779c2(0x282))?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x1779c2(0x250),emittedConfiguration()),logHistory(_0x1779c2(0x2e1),_0x1779c2(0x1f1))):(logHistory(_0x1779c2(0x2e1),_0x1779c2(0x2de)+schedulerInterval/(0x3c*0x3e8)+_0x1779c2(0x24c)),logger['debug'](_0x1779c2(0x303),_0x135321['toString']()+_0x1779c2(0x2fb)+_0x135321[_0x1779c2(0x1be)]));}if(_0x43b6e7){let _0x2bc5d4=0x0;const _0x227626=_0x43b6e7[_0x1779c2(0x1e2)];_0x30e967['forEach'](_0x48e2f9=>{const _0x3612de=_0x1779c2;if(_0x227626[_0x3612de(0x1e2)][_0x48e2f9][0x0])_0x2bc5d4+=_0x227626[_0x3612de(0x1e2)][_0x48e2f9][0x0][_0x3612de(0x297)][_0x3612de(0x254)][_0x3612de(0x196)];}),_0x30e967[_0x1779c2(0x165)](_0x6c5a94=>{const _0x20d769=_0x1779c2,_0x49c01c=_0x227626[_0x20d769(0x1e2)][_0x6c5a94][0x0]?_0x227626[_0x20d769(0x1e2)][_0x6c5a94][0x0]['quote'][_0x20d769(0x254)][_0x20d769(0x196)]:0x0;if(_0x5d19c8){const _0x1d3a37=_0x3457b2[_0x20d769(0x2d5)](_0x39343c=>_0x39343c[_0x20d769(0x307)]==_0x6c5a94);_0x1d3a37&&(_0x1d3a37[_0x20d769(0x268)]=_0x49c01c);}else{const _0x5a18dc=currentCoins[_0x20d769(0x2d5)](_0x4b24fe=>_0x4b24fe[_0x20d769(0x307)]==_0x6c5a94);_0x5a18dc&&(_0x5a18dc[_0x20d769(0x268)]=_0x49c01c);const _0x24e1a3=currentCoinsAll[_0x20d769(0x2d5)](_0x463875=>_0x463875['coin']==_0x6c5a94);_0x24e1a3&&(_0x24e1a3['marketcap']=_0x49c01c);}}),!_0x5d19c8&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x22bf57=_0x4520ae,_0x2b9afb=0x2;let _0x15e87f=0x0,_0x248aab=0x0,_0x287a7b=0x0,_0x107b76=0x0,_0x51b559=0x0;config[_0x22bf57(0x1ce)][_0x22bf57(0x165)](_0x50e619=>{const _0x1aff8b=_0x22bf57;if(!_0x50e619[_0x1aff8b(0x1d8)]){_0x287a7b++,_0x15e87f+=_0x50e619[_0x1aff8b(0x169)];if(_0x50e619[_0x1aff8b(0x169)]===-0x1){_0x15e87f++;const _0x276c0e=currentCoinsAll[_0x1aff8b(0x2d5)](_0x55817d=>_0x55817d[_0x1aff8b(0x307)]==_0x50e619[_0x1aff8b(0x307)]);_0x276c0e&&(_0x107b76+=_0x276c0e['marketcap'],_0x51b559+=Math[_0x1aff8b(0x18d)](_0x276c0e[_0x1aff8b(0x268)]));}if(_0x50e619[_0x1aff8b(0x169)]!==-0x1)_0x248aab++;}});let _0x17ca8f;const _0x38debb=0x64-_0x15e87f,_0x33eaac=_0x287a7b-_0x248aab;_0x17ca8f=_0x33eaac===0x0?_0x15e87f:Math['max'](0x64,_0x15e87f),config[_0x22bf57(0x1ce)]['forEach'](_0x233de1=>{const _0x49b471=_0x22bf57,_0xa04473=currentCoinsAll['find'](_0x53735a=>_0x53735a[_0x49b471(0x307)]==_0x233de1[_0x49b471(0x307)]);_0xa04473&&(_0x233de1[_0x49b471(0x268)]=_0xa04473['marketcap']);if(!_0x233de1[_0x49b471(0x1d8)]){if(_0x17ca8f<=0x64){if(_0x233de1['slider']===-0x1){if(_0x107b76!==0x0&&config[_0x49b471(0x2f5)]){if(_0xa04473){if(config[_0x49b471(0x2f5)]==_0x49b471(0x268))_0x233de1['distribution']=(_0x38debb/(_0x107b76/_0xa04473[_0x49b471(0x268)]))[_0x49b471(0x230)](_0x2b9afb);else config[_0x49b471(0x2f5)]=='marketcapsqrt'&&(_0x233de1['distribution']=(_0x38debb/(_0x51b559/Math[_0x49b471(0x18d)](_0xa04473[_0x49b471(0x268)])))[_0x49b471(0x230)](_0x2b9afb));}}}}}}),updateConfig();}function updateConfig(){const _0x2b802c=_0x4520ae;let _0x43c375=dbConfig['get'](_0x2b802c(0x1dd))[_0x2b802c(0x2d5)]({'botID':botID})['value']();_0x43c375&&dbConfig[_0x2b802c(0x1b8)](_0x2b802c(0x1dd))[_0x2b802c(0x2d5)]({'botID':botID})[_0x2b802c(0x29e)](config)[_0x2b802c(0x2d0)]();}async function startScheduler(){const _0x630e1c=_0x4520ae,_0xb37cce=shiftedTime()[_0x630e1c(0x21f)](),_0x49b048=process[_0x630e1c(0x207)]()[_0x630e1c(0x1fc)]/0x400/0x400;logger['debug'](_0x630e1c(0x1dc)+process['pid']+_0x630e1c(0x271)+_0x49b048+_0x630e1c(0x2b7)),getMarketCap(),_0xb37cce==0x4&&restartBot(),(_0xb37cce==0x6||_0xb37cce==0x12)&&reloadExchange(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x418098=![]){const _0xfa3443=_0x4520ae;logger[_0xfa3443(0x15a)](_0xfa3443(0x223));if(!_0x418098){while(lockOrders!=ORDERS[_0xfa3443(0x2d3)]||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange();}process[_0xfa3443(0x2d1)]({'stop':_0xfa3443(0x212)},_0x45e201=>{});}async function stopExchange(){const _0x2614a5=_0x4520ae;if(!exchange)return;exchangeStopped=!![];try{await exchange[_0x2614a5(0x1eb)]();}catch(_0x309040){await handleError(_0x309040,_0x2614a5(0x19d));}}async function reloadExchange(){const _0x39e28d=_0x4520ae;logger['debug'](_0x39e28d(0x27e));while(lockOrders!=ORDERS[_0x39e28d(0x2d3)]||coolingDown){await sleep(0x3c*0x3e8);}await stopExchange(),reset(!![]);}async function initExchange(_0x2c77d5=config[_0x4520ae(0x2bd)],_0xec7442=config[_0x4520ae(0x1ee)],_0x5c383f=config['apiSecret'],_0x46095b=config[_0x4520ae(0x151)]){const _0x474c91=_0x4520ae;await stopExchange();!supportedExchanges()[_0x474c91(0x285)](_0x2c77d5)&&(logHistory(_0x474c91(0x2e1),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x2c77d5+_0x474c91(0x255)),killBot());const _0x6ca6ba=ccxt[_0x474c91(0x23b)][_0x2c77d5['toLowerCase']()];exchange=new _0x6ca6ba({'apiKey':_0xec7442,'secret':_0x5c383f,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x474c91(0x197)}});if(_0x46095b)exchange[_0x474c91(0x1b6)]=_0x46095b;}function setStableCoins(){const _0x24a807=_0x4520ae;let _0x446500=config[_0x24a807(0x25c)]=='ETH'?'ETH':config[_0x24a807(0x25c)]==_0x24a807(0x204)?_0x24a807(0x204):_0x24a807(0x176),_0x105b74=!allSymbols[_0x24a807(0x285)](_0x446500+_0x24a807(0x154))?_0x24a807(0x24a):_0x24a807(0x254),_0x394b9e=!allSymbols[_0x24a807(0x285)](_0x446500+_0x24a807(0x1f8))?_0x105b74:_0x24a807(0x2e0);stablecoins={'eur':{'coin':''+_0x446500+_0x394b9e,'symbol':_0x446500+'/'+_0x394b9e},'usd':{'coin':''+_0x446500+_0x105b74,'symbol':_0x446500+'/'+_0x105b74}};}async function initwsCcxt(){const _0x292709=_0x4520ae;initCycle++;const _0x307108=initCycle;let _0x6addb=[];config[_0x292709(0x1ce)]['forEach'](_0xac4193=>{const _0x15cb96=_0x292709;if(!_0xac4193[_0x15cb96(0x1d8)]&&_0xac4193[_0x15cb96(0x307)]!=config['basecoin'])_0x6addb['push'](_0xac4193[_0x15cb96(0x26e)]);});if(!_0x6addb['includes'](stablecoins['eur'][_0x292709(0x26e)]))_0x6addb['push'](stablecoins[_0x292709(0x2c6)][_0x292709(0x26e)]);if(!_0x6addb[_0x292709(0x285)](stablecoins[_0x292709(0x221)][_0x292709(0x26e)]))_0x6addb['push'](stablecoins[_0x292709(0x221)]['symbol']);if(config[_0x292709(0x2bd)][_0x292709(0x1d7)]('Binance')&&config[_0x292709(0x25c)]!=_0x292709(0x204)){if(!_0x6addb[_0x292709(0x285)](_0x292709(0x23c)+config[_0x292709(0x25c)]))_0x6addb['push']('BNB/'+config['basecoin']);}loadCoins(_0x6addb),_0x6addb=validateSymbols(_0x6addb);const _0x3179e8=async _0x2b52de=>{const _0x43584c=_0x292709;let _0x3db45f;try{const _0x29b5e5=await getTickers(_0x2b52de);Object[_0x43584c(0x18f)](_0x29b5e5)[_0x43584c(0x165)](_0x13cc4f=>{const _0x206a2d=_0x43584c;_0x3db45f=_0x13cc4f[0x1]['symbol'],global['ticker'][noslash(_0x3db45f)]=_0x13cc4f[0x1][_0x206a2d(0x2c9)],global[_0x206a2d(0x19b)][_0x3db45f]=_0x13cc4f[0x1]['percentage'];});}catch(_0x3d7e40){await handleError(_0x3d7e40,_0x43584c(0x2cd),_0x3db45f);}},_0x5edd09=async _0x2baa28=>{const _0x2bc4ac=_0x292709;while(initCycle==_0x307108){if(!botPaused)try{const _0xa2c86f=await exchange[_0x2bc4ac(0x17f)](_0x2baa28);global[_0x2bc4ac(0x179)][noslash(_0xa2c86f[0x0][_0x2bc4ac(0x26e)])]=_0xa2c86f[0x0][_0x2bc4ac(0x2e6)];}catch(_0x5b1bde){if(!exchangeStopped)await handleError(_0x5b1bde,_0x2bc4ac(0x17a),_0x2baa28);}else await sleep(0x64);}},_0x270f3d=async _0x40273c=>{const _0x6b9928=_0x292709;while(initCycle==_0x307108){if(!botPaused)try{const _0x4182da=await exchange[_0x6b9928(0x295)](_0x40273c),_0x2aa9b1=_0x4182da[_0x6b9928(0x263)]();global[_0x6b9928(0x179)][noslash(_0x2aa9b1[_0x6b9928(0x26e)])]=_0x2aa9b1[_0x6b9928(0x2e6)];}catch(_0x32a1e6){if(!exchangeStopped)await handleError(_0x32a1e6,_0x6b9928(0x245),_0x40273c[_0x6b9928(0x1b4)]());}else await sleep(0x64);}},_0x1f0785=async _0x3d3de3=>{const _0x56fabe=_0x292709;while(initCycle==_0x307108){if(!botPaused){let _0x436a27;try{await sleep(0x3c*0x3e8);const _0x4aa740=await getTickers(_0x3d3de3);Object['entries'](_0x4aa740)[_0x56fabe(0x165)](_0xeb2824=>{const _0x2d3f60=_0x56fabe;_0x436a27=_0xeb2824[0x1][_0x2d3f60(0x26e)],global[_0x2d3f60(0x19b)][_0x436a27]=_0xeb2824[0x1][_0x2d3f60(0x25b)];});}catch(_0xf97e58){if(!exchangeStopped)await handleError(_0xf97e58,_0x56fabe(0x1ad),_0x436a27);}}else await sleep(0x64);}},_0x5873a8=async _0x83b140=>{const _0x1ec6e2=_0x292709;while(initCycle==_0x307108){if(!botPaused)try{const _0x58ff07=await exchange[_0x1ec6e2(0x232)](_0x83b140);initCycle==_0x307108&&_0x58ff07[_0x1ec6e2(0x165)](_0x1b091d=>{updateNumberCoinsCcxt(_0x1b091d);});}catch(_0x14336d){if(!exchangeStopped)await handleError(_0x14336d,'watchOrders()');}else await sleep(0x64);}};_0x3179e8(_0x6addb),_0x1f0785(_0x6addb),exchange[_0x292709(0x304)][_0x292709(0x295)]?_0x270f3d(_0x6addb):_0x6addb[_0x292709(0x165)](_0x8d7b59=>{_0x5edd09(_0x8d7b59);}),_0x6addb['forEach'](_0x204ce1=>{_0x5873a8(_0x204ce1);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x9dc2b7){const _0x3c60f4=_0x4520ae;let _0x42ae59={};try{if(config['exchange']!=_0x3c60f4(0x296))_0x42ae59=await exchange[_0x3c60f4(0x1c5)](_0x9dc2b7);else for(const _0x244db5 of _0x9dc2b7){const _0x33d429=await exchange[_0x3c60f4(0x187)](_0x244db5);_0x42ae59[_0x244db5]=_0x33d429;}return _0x42ae59;}catch(_0x4a9155){throw _0x4a9155;}}async function detectLiquidityChange(_0x53e73c=0x0){const _0xcaacdc=_0x4520ae;transactionDetectionOngoing=!![];try{const _0x5582bf=await getCoins(_0x53e73c),[_0x164168,_0x296d41]=_0x5582bf;let _0x499854=[];currentCoins[_0xcaacdc(0x165)](_0x1af176=>{const _0x4994e5=_0xcaacdc,_0x15a38b=_0x164168[_0x4994e5(0x2d5)](_0x44c7be=>_0x44c7be['coin']==_0x1af176[_0x4994e5(0x307)]);if(_0x15a38b){if(_0x1af176[_0x4994e5(0x177)]!=_0x15a38b[_0x4994e5(0x177)]){let _0x385189;if(_0x1af176[_0x4994e5(0x307)]!=config[_0x4994e5(0x25c)]){const _0x2215f7=global['ticker'][noslash(_0x1af176[_0x4994e5(0x26e)])];_0x385189=_0x1af176[_0x4994e5(0x2be)]?0x1/_0x2215f7:_0x2215f7;}else _0x385189=0x1;_0x499854[_0x4994e5(0x1f7)]({'coin':_0x1af176[_0x4994e5(0x307)],'symbol':_0x1af176[_0x4994e5(0x26e)],'price':_0x385189,'number':Number(formatResult(_0x15a38b['number']-_0x1af176['number'],0x8)),'basecoinvalue':_0x385189*(_0x15a38b['number']-_0x1af176[_0x4994e5(0x177)])});}}});if(_0x499854[_0xcaacdc(0x28b)]>0x0&&!blockTransactionDetection)for(const _0x475ea0 of _0x499854){if(config[_0xcaacdc(0x283)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x475ea0['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0xcaacdc(0x21d)]);if(lastFees[_0xcaacdc(0x21d)]==0x0||Math['abs'](_0x475ea0[_0xcaacdc(0x2c8)])>lastFees[_0xcaacdc(0x21d)]*1.2){if(config[_0xcaacdc(0x283)]==_0xcaacdc(0x1cf)){delete _0x475ea0['symbol'],delete _0x475ea0['basecoinvalue'];let _0x4c452c=[],_0x45e33a=[...config[_0xcaacdc(0x210)]]||[],_0x319004=config['liquidity'];_0x45e33a[_0xcaacdc(0x175)]((_0x1bf5e1,_0x16b948)=>_0x1bf5e1[_0xcaacdc(0x300)]>_0x16b948[_0xcaacdc(0x300)]?-0x1:_0x16b948[_0xcaacdc(0x300)]>_0x1bf5e1[_0xcaacdc(0x300)]?0x1:0x0);const _0x1956f3=getDate();if(_0x45e33a[0x0]){const _0x17e266=fns[_0xcaacdc(0x26b)](_0x45e33a[0x0]['date'],'yyyy/MM/dd',new Date()),_0x9712c2=fns[_0xcaacdc(0x26b)](_0x1956f3,_0xcaacdc(0x2e9),new Date());if(fns[_0xcaacdc(0x1b1)](_0x17e266,_0x9712c2)){_0x4c452c=_0x45e33a[0x0][_0xcaacdc(0x1f4)];const _0x3ea76d=_0x4c452c['find'](_0x126665=>_0x126665[_0xcaacdc(0x307)]==_0x475ea0[_0xcaacdc(0x307)]);_0x3ea76d?(_0x3ea76d[_0xcaacdc(0x177)]+=_0x475ea0[_0xcaacdc(0x177)],_0x3ea76d[_0xcaacdc(0x177)]==0x0&&(_0x4c452c=_0x4c452c['filter'](_0xaa5aae=>{const _0x48ff88=_0xcaacdc;return _0xaa5aae[_0x48ff88(0x307)]!=_0x475ea0[_0x48ff88(0x307)];}))):_0x4c452c[_0xcaacdc(0x1f7)](_0x475ea0);const _0x32be8b=_0x319004[_0xcaacdc(0x2d5)](_0x2f6fd7=>_0x2f6fd7[_0xcaacdc(0x300)]==_0x1956f3);_0x32be8b[_0xcaacdc(0x1f4)]=_0x4c452c;}else _0x319004[_0xcaacdc(0x1f7)]({'date':_0x1956f3,'changes':[_0x475ea0]});}const _0xa8f3f9=_0x319004['find'](_0x36a093=>_0x36a093['date']==_0x1956f3);if(_0xa8f3f9){let _0x3faaa2=!![];_0xa8f3f9[_0xcaacdc(0x1f4)][_0xcaacdc(0x165)](_0x1a9108=>{if(_0x1a9108['number']!=0x0)_0x3faaa2=![];}),_0x3faaa2&&(_0x319004=_0x319004['filter'](_0xa95f87=>{const _0x5917b6=_0xcaacdc;return _0xa95f87[_0x5917b6(0x300)]!=_0x1956f3;}));}let _0x1d7070=dbConfig[_0xcaacdc(0x1b8)]('bot')[_0xcaacdc(0x2d5)]({'botID':botID})[_0xcaacdc(0x2b9)]();_0x1d7070&&(dbConfig[_0xcaacdc(0x1b8)](_0xcaacdc(0x1dd))[_0xcaacdc(0x2d5)]({'botID':botID})[_0xcaacdc(0x29e)]({'liquidity':_0x319004})[_0xcaacdc(0x2d0)](),config[_0xcaacdc(0x210)]=_0x319004);logHistory(_0xcaacdc(0x290),_0xcaacdc(0x30b)+Math[_0xcaacdc(0x24d)](_0x475ea0[_0xcaacdc(0x177)])+'\x20'+_0x475ea0[_0xcaacdc(0x307)]+'\x20'+(_0x475ea0[_0xcaacdc(0x177)]>0x0?_0xcaacdc(0x203):_0xcaacdc(0x16b))+_0xcaacdc(0x1e1)),proxyEmit(_0xcaacdc(0x250),emittedConfiguration());const _0x125b58=getNormalizedPerformance();emitPerformance(_0x125b58),getStartingBalances(_0x125b58),logger['debug']('Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}else config[_0xcaacdc(0x283)]==_0xcaacdc(0x158)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0xcaacdc(0x290),_0xcaacdc(0x261)),logger[_0xcaacdc(0x15a)](_0xcaacdc(0x30b)+Math[_0xcaacdc(0x24d)](_0x475ea0['number'])+'\x20'+_0x475ea0['coin']+'\x20'+(_0x475ea0[_0xcaacdc(0x177)]>0x0?_0xcaacdc(0x203):_0xcaacdc(0x16b))+_0xcaacdc(0x1c2))):logger[_0xcaacdc(0x15a)](_0xcaacdc(0x30b)+Math['abs'](_0x475ea0[_0xcaacdc(0x177)])+'\x20'+_0x475ea0[_0xcaacdc(0x307)]+'\x20'+(_0x475ea0[_0xcaacdc(0x177)]>0x0?'added':_0xcaacdc(0x16b))+_0xcaacdc(0x183)));}else logger[_0xcaacdc(0x15a)](_0xcaacdc(0x167)+Math['abs'](_0x475ea0[_0xcaacdc(0x177)])+'\x20'+_0x475ea0[_0xcaacdc(0x307)]+'\x20'+(_0x475ea0[_0xcaacdc(0x177)]>0x0?_0xcaacdc(0x203):_0xcaacdc(0x16b)));}else logger[_0xcaacdc(0x15a)]('Portfolio\x20change\x20detected:\x20'+Math[_0xcaacdc(0x24d)](_0x475ea0[_0xcaacdc(0x177)])+'\x20'+_0x475ea0[_0xcaacdc(0x307)]+'\x20'+(_0x475ea0[_0xcaacdc(0x177)]>0x0?_0xcaacdc(0x203):_0xcaacdc(0x16b))+_0xcaacdc(0x174));}currentCoins=_0x164168,currentCoinsAll=_0x296d41;}catch(_0x58dc95){if(!exchangeStopped)await handleError(_0x58dc95,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x4088b3=_0x4520ae;try{markets=await exchange[_0x4088b3(0x184)](),allSymbols=[],Object[_0x4088b3(0x18f)](markets)[_0x4088b3(0x165)](_0x42eb56=>{const _0x1331bf=_0x4088b3;_0x42eb56[0x1][_0x1331bf(0x246)]&&_0x42eb56[0x1]['spot']&&allSymbols[_0x1331bf(0x1f7)](_0x42eb56[0x0]);});}catch(_0x33b0ec){throw _0x33b0ec;}}function validateSymbols(_0x593733){let _0x31927e=[];return _0x593733['forEach'](_0x54a365=>{const _0xc05738=_0x5976;!allSymbols[_0xc05738(0x285)](_0x54a365)?logHistory(_0xc05738(0x2e1),_0xc05738(0x1ac)+_0x54a365+_0xc05738(0x2a1)):_0x31927e['push'](_0x54a365);}),_0x31927e;}async function initclient(){const _0x5a541e=_0x4520ae;proxyEmit(_0x5a541e(0x250),emittedConfiguration()),proxyEmit(_0x5a541e(0x267),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5d53d9=getNormalizedPerformance();emitPerformance(_0x5d53d9),getStartingBalances(_0x5d53d9);}async function toggleBotMode(){const _0x47a831=_0x4520ae;let _0x2f2c9d=dbConfig[_0x47a831(0x1b8)](_0x47a831(0x1dd))[_0x47a831(0x2d5)]({'botID':botID})[_0x47a831(0x2b9)]();if(_0x2f2c9d){const _0x12f40b=!_0x2f2c9d[_0x47a831(0x2b3)];dbConfig['get']('bot')[_0x47a831(0x2d5)]({'botID':botID})[_0x47a831(0x29e)]({'headless':_0x12f40b})[_0x47a831(0x2d0)](),config['headless']=_0x12f40b,proxyEmit(_0x47a831(0x250),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2aa59d=_0x4520ae;process[_0x2aa59d(0x2d1)]({'updatebotmanager':!![]},_0x5a26e5=>{}),logger[_0x2aa59d(0x15a)](_0x2aa59d(0x241)+config[_0x2aa59d(0x2b3)]);}async function loadCoins(_0x2a2c5b){const _0x4640a2=_0x4520ae;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2a1026,_0x504282=0x0,_0x598ddc=0x0;_0x2a2c5b[_0x4640a2(0x165)](_0x4dba88=>{const _0x1d73fb=_0x4640a2;loading[_0x1d73fb(0x20e)][_0x1d73fb(0x1f7)](_0x4dba88);}),loadingCanceled=![];let _0x3d4157=![];while(_0x2a1026!=_0x2a2c5b[_0x4640a2(0x28b)]+maxLoadingProgress){_0x2a1026=loadingProgress,_0x2a2c5b[_0x4640a2(0x165)](_0x2301d5=>{const _0x2db977=_0x4640a2;if(global[_0x2db977(0x179)][noslash(_0x2301d5)]){loading['remainingSymbols']=loading[_0x2db977(0x20e)]['filter'](_0x292881=>_0x292881!=_0x2301d5);if(!watchedSymbols[_0x2db977(0x285)](_0x2301d5))watchedSymbols['push'](_0x2301d5);_0x2a1026++;}}),loading[_0x4640a2(0x2e8)]=Math[_0x4640a2(0x20f)](_0x2a1026/(_0x2a2c5b[_0x4640a2(0x28b)]+maxLoadingProgress)*0x64);loading[_0x4640a2(0x2e8)]!=0x64&&(_0x598ddc>0x1e*0x5&&(loading[_0x4640a2(0x278)]=!![],emitLoadingProgress()),_0x598ddc>0x78*0x5&&!_0x3d4157&&(_0x3d4157=!![],logHistory(_0x4640a2(0x2e1),_0x4640a2(0x182)+loading[_0x4640a2(0x20e)][_0x4640a2(0x2a0)](',\x20')+_0x4640a2(0x2a8)),logHistory('error',_0x4640a2(0x21b)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4640a2(0x228)]=!![],emitLoadingProgress();break;}else _0x504282!=loading[_0x4640a2(0x2e8)]&&(_0x504282=loading[_0x4640a2(0x2e8)],emitLoadingProgress()),_0x598ddc++,await sleep(0xc8);}_0x2a1026==_0x2a2c5b[_0x4640a2(0x28b)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4640a2(0x2d1)]({'status':'enabled','live':_0x4640a2(0x225)},_0x460bae=>{}),_0x3d4157&&logHistory('success',_0x4640a2(0x1cb)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x572e12=_0x4520ae;proxyEmit(_0x572e12(0x155),loading);}async function getFiat(){const _0x279598=_0x4520ae;let _0x54be9c=global[_0x279598(0x179)][stablecoins[_0x279598(0x2c6)]['coin']],_0xab8c2a=global[_0x279598(0x179)][stablecoins[_0x279598(0x221)]['coin']];return{'eur':Number(_0x54be9c),'usd':Number(_0xab8c2a)};}function capitalize(_0x42d15e){const _0x49fa63=_0x4520ae;return _0x42d15e[_0x49fa63(0x1c0)](0x0,0x1)[_0x49fa63(0x240)]()+_0x42d15e[_0x49fa63(0x1c0)](0x1);}function supportedExchanges(){const _0x352ce3=_0x4520ae,_0x22d1c0=['ws',_0x352ce3(0x1c5),_0x352ce3(0x187),_0x352ce3(0x17f),_0x352ce3(0x232),_0x352ce3(0x220),'createOrder','fetchOpenOrders',_0x352ce3(0x211),_0x352ce3(0x21e)];let _0x159650=[],_0x2488fd=[],_0x21eb97=ccxt['pro']['exchanges'];_0x21eb97[_0x352ce3(0x165)](_0x1c424d=>{const _0x5363fc=_0x352ce3;try{const _0x4eb310=new ccxt['pro'][_0x1c424d]();_0x2488fd[_0x5363fc(0x1f7)](_0x4eb310);}catch(_0x15e756){}}),_0x2488fd[_0x352ce3(0x165)](_0x53e2b0=>{const _0x10e0e3=_0x352ce3;let _0x285e71=0x0;_0x22d1c0[_0x10e0e3(0x165)](_0x4f9a1f=>{const _0x37a1dd=_0x10e0e3;_0x4f9a1f in _0x53e2b0[_0x37a1dd(0x304)]&&_0x53e2b0[_0x37a1dd(0x304)][_0x4f9a1f]&&_0x285e71++;}),_0x285e71==_0x22d1c0[_0x10e0e3(0x28b)]&&_0x159650[_0x10e0e3(0x1f7)](capitalize(_0x53e2b0['id']));});let _0x2bce15=[];return _0x21eb97['forEach'](_0x5c6bc5=>{const _0x135722=_0x352ce3;_0x5c6bc5=capitalize(_0x5c6bc5);if(!_0x159650[_0x135722(0x285)](_0x5c6bc5))_0x2bce15['push'](_0x5c6bc5);}),_0x159650;}function setStartDatePerformance(){const _0x25aa30=_0x4520ae;if(config&&config[_0x25aa30(0x210)][0x0]['changes'][_0x25aa30(0x28b)]!=0x0){const _0x33f54c=config[_0x25aa30(0x210)][0x0][_0x25aa30(0x1f4)];dbPerformance[_0x25aa30(0x1b8)](_0x25aa30(0x1e2))['find']({'date':config[_0x25aa30(0x1de)]})[_0x25aa30(0x29e)]({'coins':_0x33f54c})[_0x25aa30(0x2d0)]();}}async function recreateCoinResults(){const _0x50f516=_0x4520ae;let _0x5bb3dd,_0x1310f8=[];try{const _0x448401=fns['format'](fns[_0x50f516(0x2ab)](config['startdate'][_0x50f516(0x15b)](/\//g,'-')),_0x50f516(0x293));for(const _0x273a26 of currentCoins){if(_0x273a26['coin']!=config['basecoin']){let _0x567d00=0x0,_0x2c79a4,_0x536f37;_0x5bb3dd=await getAllEventOrders(_0x273a26[_0x50f516(0x26e)]);if(_0x5bb3dd['length']>0x0)_0x5bb3dd[_0x50f516(0x165)](_0x306e2d=>{const _0x3e009b=_0x50f516,_0x5be97b=_0x273a26[_0x3e009b(0x26e)]['includes'](config[_0x3e009b(0x25c)]+'/');_0x1310f8[_0x3e009b(0x1f7)]({'datetime':_0x306e2d[_0x3e009b(0x1af)],'coin':_0x273a26['coin'],'symbol':_0x273a26[_0x3e009b(0x26e)],'side':_0x306e2d[_0x3e009b(0x249)],'reverse':_0x5be97b,'amount':formatResult(_0x306e2d['filled'],0x8),'filled':formatResult(_0x306e2d['filled'],0x8),'price':formatResult(_0x306e2d[_0x3e009b(0x2e6)],0x8)}),_0x567d00=_0x306e2d['side']=='buy'?_0x567d00+_0x306e2d['filled']:_0x567d00-_0x306e2d[_0x3e009b(0x1ff)];if(!_0x536f37)_0x536f37=_0x306e2d[_0x3e009b(0x2e6)];});_0x2c79a4=_0x273a26[_0x50f516(0x177)]-_0x567d00;let _0x26bdd3;config['liquidity'][_0x50f516(0x165)](_0x2cdf1a=>{const _0x48579a=_0x50f516;!_0x26bdd3&&(_0x26bdd3=_0x2cdf1a[_0x48579a(0x1f4)]['find'](_0x450b6a=>_0x450b6a['coin']==_0x273a26[_0x48579a(0x307)]),_0x26bdd3&&(_0x2c79a4=_0x26bdd3['number'],_0x536f37=_0x26bdd3[_0x48579a(0x2e6)]));});let _0x4359c8=dbCoinResults[_0x50f516(0x1b8)](_0x50f516(0x1d0))['find']({'coin':_0x273a26[_0x50f516(0x307)]})[_0x50f516(0x2b9)]();_0x4359c8={'coin':_0x273a26[_0x50f516(0x307)],'number':_0x2c79a4,'breakeven':_0x536f37,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x50f516(0x1b8)](_0x50f516(0x1d0))[_0x50f516(0x2d5)]({'coin':_0x273a26[_0x50f516(0x307)]})[_0x50f516(0x29e)](_0x4359c8)['write']();}}_0x1310f8['sort']((_0x4a3540,_0x21014d)=>_0x4a3540[_0x50f516(0x1af)]>_0x21014d[_0x50f516(0x1af)]?0x1:_0x21014d['datetime']>_0x4a3540['datetime']?-0x1:0x0);let _0x1930db=0x0;for(let _0x1291c7 of _0x1310f8){await updateCoinResults(_0x1291c7,!![]);}}catch(_0x1a3bec){await handleError(_0x1a3bec,_0x50f516(0x294));}}async function getAllEventOrders(_0x3cc838){const _0x21cdb3=_0x4520ae;let _0x24141b=[],_0x2e5607=dbLogs['get']('logs')[_0x21cdb3(0x235)](_0x4f4eb7=>{const _0x54e56b=_0x21cdb3,_0x21a639=_0x4f4eb7[_0x54e56b(0x23a)][_0x54e56b(0x1e9)]();return _0x21a639[_0x54e56b(0x285)](_0x3cc838['toLowerCase']())&&(_0x21a639[_0x54e56b(0x285)](_0x54e56b(0x222))&&_0x21a639[_0x54e56b(0x285)](_0x54e56b(0x286))||_0x21a639['includes'](_0x54e56b(0x1ff))&&_0x21a639[_0x54e56b(0x285)]('order'));})[_0x21cdb3(0x233)](_0x21cdb3(0x1fa))['value']();return _0x2e5607[_0x21cdb3(0x165)](_0x553510=>{const _0x1ae14a=_0x21cdb3,_0x19293c=_0x553510['event'][_0x1ae14a(0x285)](_0x1ae14a(0x1fd))?_0x1ae14a(0x1fd):_0x1ae14a(0x181),_0x264c0e=/#([0-9]|\.)+\s/i,_0x35aec2=Number(_0x264c0e[_0x1ae14a(0x25e)](_0x553510[_0x1ae14a(0x23a)])[0x0][_0x1ae14a(0x2f2)](0x1)),_0x145a6c=/@([0-9]|\.)+$/i,_0x4f06e4=Number(_0x145a6c[_0x1ae14a(0x25e)](_0x553510[_0x1ae14a(0x23a)])[0x0]['slice'](0x1));_0x24141b[_0x1ae14a(0x1f7)]({'datetime':_0x553510['time'],'coin':symbolToCoin(_0x3cc838),'symbol':_0x3cc838,'side':_0x19293c,'amount':_0x35aec2,'filled':_0x35aec2,'price':_0x4f06e4});}),_0x24141b;}async function getAllOrders(_0x2a5de5,_0x4f9e2a){const _0x2c430b=_0x4520ae;let _0x4e492c=[];while(_0x4f9e2a<exchange[_0x2c430b(0x19c)]()){const _0x3726d7=0x1f4;try{const _0x3b4a9d=await exchange[_0x2c430b(0x211)](_0x2a5de5,_0x4f9e2a,_0x3726d7);if(_0x3b4a9d[_0x2c430b(0x28b)])_0x4f9e2a=_0x3b4a9d[_0x3b4a9d[_0x2c430b(0x28b)]-0x1][_0x2c430b(0x277)]+0x1,_0x4e492c=_0x4e492c[_0x2c430b(0x1d4)](_0x3b4a9d);else break;}catch(_0x20ac5b){await handleError(_0x20ac5b,_0x2c430b(0x258),_0x2a5de5);}}return _0x4e492c;}async function validate24hChanges(){const _0x196624=_0x4520ae;for(const _0x5d4016 of currentCoins){if(_0x5d4016[_0x196624(0x307)]!=config[_0x196624(0x25c)]){let _0x1c38df;_0x5d4016[_0x196624(0x2be)]?_0x1c38df=formatResult((0x1/(global[_0x196624(0x19b)][_0x5d4016['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x1c38df=global[_0x196624(0x19b)][_0x5d4016[_0x196624(0x26e)]],_0x1c38df<config['change24h']&&(logHistory(_0x196624(0x2e1),_0x5d4016[_0x196624(0x307)]+_0x196624(0x29a)+_0x1c38df+'%'),logHistory('error',_0x196624(0x1c4)),logHistory(_0x196624(0x2e1),_0x196624(0x298)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3f74a8,_0x57fc92){const _0x51f99a=_0x4520ae;if(!_0x3f74a8)return!![];const _0xa9cac2=_0x57fc92[_0x51f99a(0x2cc)]('.'),_0x9b7aeb=_0x3f74a8[_0x51f99a(0x2cc)]('.');for(var _0x2ebb64=0x0;_0x2ebb64<_0x9b7aeb[_0x51f99a(0x28b)];_0x2ebb64++){const _0x28d8c7=~~_0x9b7aeb[_0x2ebb64],_0x1bd1fd=~~_0xa9cac2[_0x2ebb64];if(_0x28d8c7<_0x1bd1fd)return!![];if(_0x28d8c7>_0x1bd1fd)return![];}return![];}async function oneTimeMigration(){const _0x568e3d=_0x4520ae;let _0x2bf53b=dbLogs[_0x568e3d(0x1b8)]('version')[_0x568e3d(0x2b9)]();if(isOlderVersion(_0x2bf53b,_0x568e3d(0x20b))){let _0x2cddee=[];const _0x29f783=dbLogs[_0x568e3d(0x1b8)](_0x568e3d(0x309))[_0x568e3d(0x2b9)]();_0x29f783['forEach'](_0x32fc41=>{const _0x3c4076=_0x568e3d;_0x2cddee[_0x3c4076(0x1f7)]({'time':_0x32fc41[_0x3c4076(0x1fa)],'type':_0x32fc41['type'],'event':_0x32fc41[_0x3c4076(0x23a)]});}),dbLogs[_0x568e3d(0x1b8)](_0x568e3d(0x309))[_0x568e3d(0x29e)](_0x2cddee)['write']();}let _0x721a86=dbConfig['get'](_0x568e3d(0x1b0))[_0x568e3d(0x2b9)]();if(isOlderVersion(_0x721a86,_0x568e3d(0x20b))){let _0x172ad4=dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})['value']();if(_0x172ad4){let _0x24f4b0=[];_0x172ad4[_0x568e3d(0x1ce)][_0x568e3d(0x165)](_0x4279f1=>{const _0x4efbfe=_0x568e3d;_0x24f4b0[_0x4efbfe(0x1f7)]({'coin':_0x4279f1[_0x4efbfe(0x307)],'number':_0x4279f1[_0x4efbfe(0x2a7)],'price':_0x4279f1[_0x4efbfe(0x17b)]}),delete _0x4279f1['startnumber'],delete _0x4279f1[_0x4efbfe(0x17b)];});if(_0x24f4b0['length']!==0x0)fs[_0x568e3d(0x22e)](configbackuppath+(_0x568e3d(0x2ae)+botID+_0x568e3d(0x1df)),JSON[_0x568e3d(0x186)](_0x24f4b0,null,0x4),function(_0x1c03e9){if(_0x1c03e9){}});const _0x592a4f=(_0x425dd5,_0x1c2d4f)=>{const _0x3f7726=_0x568e3d;let _0x2f85e5=[];_0x1c2d4f[_0x3f7726(0x165)](_0x32a109=>{const _0x1ec9d8=_0x3f7726,_0x40c20b=_0x425dd5[_0x1ec9d8(0x2d5)](_0x255bcf=>_0x255bcf[_0x1ec9d8(0x307)]==_0x32a109[_0x1ec9d8(0x307)]);if(!_0x40c20b)_0x2f85e5[_0x1ec9d8(0x1f7)](_0x32a109);});let _0x1277d9=[];return _0x425dd5[_0x3f7726(0x165)](_0x29f5d0=>{const _0x373957=_0x3f7726,_0x588a00=_0x1c2d4f[_0x373957(0x2d5)](_0x5acb36=>_0x5acb36[_0x373957(0x307)]==_0x29f5d0[_0x373957(0x307)]);if(!_0x588a00||_0x588a00[_0x373957(0x177)]==0x0&&_0x29f5d0[_0x373957(0x177)]!=0x0)_0x1277d9[_0x373957(0x1f7)](_0x29f5d0);}),{'missingDay1':_0x2f85e5,'notInDay2':_0x1277d9};},_0x3e776c=dbPerformance[_0x568e3d(0x1b8)]('data')[_0x568e3d(0x161)]()['value']();if(_0x3e776c[_0x568e3d(0x28b)]>0x1){const {missingDay1:_0x543cd9,notInDay2:_0x22d285}=_0x592a4f(_0x24f4b0,_0x3e776c[0x1]['coins']);_0x24f4b0=[..._0x24f4b0,..._0x543cd9],_0x22d285[_0x568e3d(0x165)](_0x2bf7f6=>{const _0x486ebc=_0x568e3d;let _0x299e02=_0x24f4b0[_0x486ebc(0x2dd)](_0x3e1358=>_0x3e1358[_0x486ebc(0x307)]==_0x2bf7f6[_0x486ebc(0x307)]);_0x299e02!=-0x1&&_0x24f4b0[_0x486ebc(0x19f)](_0x299e02,0x1);});}_0x24f4b0[_0x568e3d(0x175)]((_0x589690,_0x4c097b)=>_0x589690[_0x568e3d(0x307)]>_0x4c097b[_0x568e3d(0x307)]?0x1:_0x4c097b[_0x568e3d(0x307)]>_0x589690[_0x568e3d(0x307)]?-0x1:0x0);let _0x5cfc0a=[{'date':_0x172ad4['startdate'],'changes':_0x24f4b0}];_0x3e776c[_0x568e3d(0x28b)]>0x2&&_0x3e776c[_0x568e3d(0x165)]((_0x29ae6f,_0x122084)=>{const _0x2fa395=_0x568e3d;if(_0x122084>0x0&&_0x122084<_0x3e776c[_0x2fa395(0x28b)]-0x1){const {missingDay1:_0x18d016,notInDay2:_0x272ba7}=_0x592a4f(_0x3e776c[_0x122084][_0x2fa395(0x1d0)],_0x3e776c[_0x122084+0x1][_0x2fa395(0x1d0)]);_0x24f4b0=[],(_0x18d016[_0x2fa395(0x28b)]!=0x0||_0x272ba7[_0x2fa395(0x28b)]!=0x0)&&(_0x18d016[_0x2fa395(0x28b)]!=0x0&&_0x24f4b0[_0x2fa395(0x1f7)](..._0x18d016),_0x272ba7['length']!=0x0&&(_0x272ba7['forEach'](_0x5bec55=>{const _0x2c040f=_0x2fa395;_0x5bec55[_0x2c040f(0x177)]=-_0x5bec55[_0x2c040f(0x177)];}),_0x24f4b0[_0x2fa395(0x1f7)](..._0x272ba7)),_0x24f4b0[_0x2fa395(0x175)]((_0x5476a9,_0x4d8169)=>_0x5476a9[_0x2fa395(0x307)]>_0x4d8169[_0x2fa395(0x307)]?0x1:_0x4d8169['coin']>_0x5476a9[_0x2fa395(0x307)]?-0x1:0x0),_0x5cfc0a['push']({'date':_0x3e776c[_0x122084+0x1]['date'],'changes':_0x24f4b0}));}}),dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})['assign']({..._0x172ad4,'liquidity':_0x5cfc0a})['write']();}}if(isOlderVersion(_0x721a86,_0x568e3d(0x1cc))){let _0x1191c5=dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})[_0x568e3d(0x2b9)]();if(_0x1191c5){const _0x3184c2=_0x1191c5[_0x568e3d(0x2bd)],_0x56c9db=_0x3184c2?capitalize(_0x3184c2):_0x568e3d(0x185);dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})[_0x568e3d(0x29e)]({'exchange':_0x56c9db})['write']();}}if(isOlderVersion(_0x721a86,_0x568e3d(0x1da))){let _0x410fc2=dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})['value']();if(_0x410fc2){const _0x4efdf6=_0x410fc2[_0x568e3d(0x2f5)],_0x3811eb=_0x4efdf6?_0x568e3d(0x268):![];dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))['find']({'botID':botID})[_0x568e3d(0x29e)]({'marketcapEnabled':_0x3811eb})[_0x568e3d(0x2d0)]();}}if(isOlderVersion(_0x721a86,_0x568e3d(0x247))){let _0x168e7c=dbConfig['get'](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})[_0x568e3d(0x2b9)]();if(_0x168e7c){const _0x35c1a8=_0x168e7c[_0x568e3d(0x283)],_0x2e6281=_0x35c1a8?_0x568e3d(0x1cf):![];dbConfig[_0x568e3d(0x1b8)](_0x568e3d(0x1dd))[_0x568e3d(0x2d5)]({'botID':botID})[_0x568e3d(0x29e)]({'autoliquidity':_0x2e6281})['write']();}}let _0x4295cb=dbPerformance['get']('version')[_0x568e3d(0x2b9)]();isOlderVersion(_0x4295cb,_0x568e3d(0x20b))&&setStartDatePerformance();let _0x534e3f=dbCoinResults[_0x568e3d(0x1b8)](_0x568e3d(0x1b0))[_0x568e3d(0x2b9)]();if(isOlderVersion(_0x534e3f,'2.5.0')){let _0x45b2e4=dbCoinResults[_0x568e3d(0x1b8)](_0x568e3d(0x1d0))[_0x568e3d(0x2b9)]();if(_0x45b2e4[_0x568e3d(0x28b)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x184948=_0x4520ae;dbConfig[_0x184948(0x2fe)](_0x184948(0x1b0),serverversion)[_0x184948(0x2d0)](),dbPerformance['set'](_0x184948(0x1b0),serverversion)[_0x184948(0x2d0)](),dbLogs[_0x184948(0x2fe)]('version',serverversion)[_0x184948(0x2d0)](),dbCoinResults[_0x184948(0x2fe)]('version',serverversion)[_0x184948(0x2d0)]();}function getConfiguration(_0x351e6d){const _0x372097=_0x4520ae;let _0x4587a4=dbConfig['get']('bot')[_0x372097(0x2d5)]({'botID':_0x351e6d})[_0x372097(0x2b9)]();if(_0x4587a4){let _0x2adcfd=![];typeof _0x4587a4[_0x372097(0x1ae)]=='string'&&(_0x4587a4={..._0x4587a4,'threshold':Number(_0x4587a4[_0x372097(0x1ae)])},_0x2adcfd=!![]),_0x4587a4[_0x372097(0x28e)]==undefined&&(_0x4587a4={..._0x4587a4,'change24h':-0x14},_0x2adcfd=!![]),_0x4587a4[_0x372097(0x25f)]==undefined&&(_0x4587a4={..._0x4587a4,'fiat':_0x372097(0x254)},_0x2adcfd=!![]),_0x4587a4['onepagemode']==undefined&&(_0x4587a4={..._0x4587a4,'onepagemode':settings[_0x372097(0x2b4)]},_0x2adcfd=!![]),_0x4587a4[_0x372097(0x1c3)]==undefined&&(_0x4587a4={..._0x4587a4,'colorscheme':'red_yellow_blue'},_0x2adcfd=!![]),_0x4587a4['autoliquidity']==undefined&&(_0x4587a4={..._0x4587a4,'autoliquidity':_0x372097(0x1cf)},_0x2adcfd=!![]),_0x4587a4['marketcapApi']==undefined&&(_0x4587a4={..._0x4587a4,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x2adcfd=!![]),_0x4587a4[_0x372097(0x2f5)]==undefined&&(_0x4587a4={..._0x4587a4,'marketcapEnabled':![]},_0x2adcfd=!![]),_0x2adcfd&&(_0x4587a4={'botID':_0x4587a4[_0x372097(0x224)],'exchange':_0x4587a4['exchange'],'apiKey':_0x4587a4[_0x372097(0x1ee)],'apiSecret':_0x4587a4[_0x372097(0x166)],'apiPassword':_0x4587a4[_0x372097(0x151)],'basecoin':_0x4587a4[_0x372097(0x25c)],'botname':_0x4587a4[_0x372097(0x2ea)],'showname':_0x4587a4[_0x372097(0x272)],'threshold':_0x4587a4[_0x372097(0x1ae)],'ordertype':_0x4587a4[_0x372097(0x25d)],'timeout':_0x4587a4[_0x372097(0x278)],'fiat':_0x4587a4[_0x372097(0x25f)],'startdate':_0x4587a4['startdate'],'recreate':_0x4587a4[_0x372097(0x218)],'timeshift':_0x4587a4[_0x372097(0x237)],'onepagemode':_0x4587a4['onepagemode'],'headless':_0x4587a4['headless'],'cooldown':_0x4587a4['cooldown'],'change24h':_0x4587a4[_0x372097(0x28e)],'emojibuy':_0x4587a4[_0x372097(0x28d)],'emojisell':_0x4587a4[_0x372097(0x248)],'colorscheme':_0x4587a4['colorscheme'],'marketcapApi':_0x4587a4[_0x372097(0x1e8)],'marketcapEnabled':_0x4587a4[_0x372097(0x2f5)],'portfolio':_0x4587a4['portfolio'],'autoliquidity':_0x4587a4[_0x372097(0x283)],'liquidity':_0x4587a4['liquidity'],'openOrders':_0x4587a4['openOrders']},dbConfig[_0x372097(0x1b8)](_0x372097(0x1dd))[_0x372097(0x191)]()[_0x372097(0x2d0)](),dbConfig[_0x372097(0x1b8)](_0x372097(0x1dd))[_0x372097(0x1f7)](_0x4587a4)[_0x372097(0x2d0)]());}else _0x4587a4={'botID':_0x351e6d,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x372097(0x17e)+_0x351e6d,'showname':![],'threshold':0x3,'ordertype':_0x372097(0x222),'timeout':0x14,'fiat':_0x372097(0x254),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x372097(0x237)],'onepagemode':settings[_0x372097(0x2b4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x372097(0x226),'marketcapApi':settings[_0x372097(0x1e8)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4587a4;}function emittedConfiguration(){const _0x33857d=_0x4520ae;let _0x34784f;if(config[_0x33857d(0x1ee)]=='')_0x34784f={...config,'configstate':_0x33857d(0x202)};else config[_0x33857d(0x1ee)]=='***'?_0x34784f={...config,'configstate':_0x33857d(0x206)}:(_0x34784f={...config,'apiKey':'************','apiSecret':_0x33857d(0x2f7)},config[_0x33857d(0x151)]&&(_0x34784f[_0x33857d(0x151)]=_0x33857d(0x2f7)));return _0x34784f;}function getSettings(){const _0x4df7bc=_0x4520ae;return dbSettings[_0x4df7bc(0x1b8)](_0x4df7bc(0x1e5))[_0x4df7bc(0x2b9)]();}function getSecure(){const _0x4e1fea=_0x4520ae;return dbSecure['get'](_0x4e1fea(0x180))[_0x4e1fea(0x2b9)]()||{};}function updateTimeshift(_0x33cbc8){const _0xd0d6e9=_0x4520ae;let _0x569b97=dbConfig[_0xd0d6e9(0x1b8)](_0xd0d6e9(0x1dd))[_0xd0d6e9(0x2d5)]({'botID':botID})[_0xd0d6e9(0x2b9)]();_0x569b97&&dbConfig[_0xd0d6e9(0x1b8)](_0xd0d6e9(0x1dd))[_0xd0d6e9(0x2d5)]({'botID':botID})[_0xd0d6e9(0x29e)]({'timeshift':_0x33cbc8})['write'](),config['timeshift']=_0x33cbc8,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x4ff91a){const _0x3a38cc=_0x4520ae;let _0x576db1=dbConfig[_0x3a38cc(0x1b8)](_0x3a38cc(0x1dd))[_0x3a38cc(0x2d5)]({'botID':botID})[_0x3a38cc(0x2b9)]();_0x576db1&&dbConfig['get'](_0x3a38cc(0x1dd))[_0x3a38cc(0x2d5)]({'botID':botID})[_0x3a38cc(0x29e)]({'onepagemode':_0x4ff91a})[_0x3a38cc(0x2d0)](),config['onepagemode']=_0x4ff91a,proxyEmit(_0x3a38cc(0x250),emittedConfiguration());}function updateMarketcapApi(_0x35de94){const _0x27dce3=_0x4520ae,_0x570d53=_0x35de94?!![]:![];let _0x45c0ea=dbConfig[_0x27dce3(0x1b8)](_0x27dce3(0x1dd))[_0x27dce3(0x2d5)]({'botID':botID})['value']();_0x45c0ea&&dbConfig[_0x27dce3(0x1b8)](_0x27dce3(0x1dd))[_0x27dce3(0x2d5)]({'botID':botID})['assign']({'marketcapApi':_0x570d53})[_0x27dce3(0x2d0)](),config[_0x27dce3(0x1e8)]=_0x570d53,getMarketCap(),proxyEmit(_0x27dce3(0x250),emittedConfiguration());}async function storeConfiguration(_0x35c5fe){const _0x51a67a=_0x4520ae;logger[_0x51a67a(0x15a)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x51a67a(0x15a)]('Transaction\x20detection\x20blocked');let _0x3f1879=![],_0x1a7ac=![],_0x1501ad=[];_0x35c5fe['portfolio'][_0x51a67a(0x165)](_0x5b608d=>{const _0x4b71dd=_0x51a67a;if(!_0x5b608d[_0x4b71dd(0x1d8)]&&_0x5b608d[_0x4b71dd(0x307)]!=_0x35c5fe[_0x4b71dd(0x25c)])_0x1501ad['push'](_0x5b608d[_0x4b71dd(0x26e)]);}),_0x1501ad[_0x51a67a(0x165)](_0x53d2ab=>{const _0x4e33e8=_0x51a67a,_0x446b3f=currentCoins['find'](_0x3e44eb=>_0x3e44eb[_0x4e33e8(0x26e)]==_0x53d2ab);!_0x446b3f&&(_0x3f1879=!![]);}),currentCoins[_0x51a67a(0x165)](_0x4332cc=>{const _0x1d0476=_0x51a67a;if(_0x4332cc[_0x1d0476(0x307)]!=config[_0x1d0476(0x25c)]){const _0x4a232d=_0x1501ad[_0x1d0476(0x2d5)](_0xbd7d3=>_0xbd7d3==_0x4332cc[_0x1d0476(0x26e)]);!_0x4a232d&&(_0x3f1879=!![]);}}),_0x35c5fe[_0x51a67a(0x1ce)][_0x51a67a(0x165)](_0x26b03c=>{const _0x50900b=_0x51a67a,_0x4ebbf2=config[_0x50900b(0x1ce)]['find'](_0x355ada=>_0x355ada['coin']==_0x26b03c[_0x50900b(0x307)]);if(_0x4ebbf2&&_0x26b03c['offset']!=_0x4ebbf2[_0x50900b(0x2c5)])_0x1a7ac=!![];});let _0x33bce9=dbConfig[_0x51a67a(0x1b8)](_0x51a67a(0x1dd))[_0x51a67a(0x2d5)]({'botID':botID})[_0x51a67a(0x2b9)]();_0x35c5fe={..._0x35c5fe,'apiKey':crypt[_0x51a67a(0x2c1)](secure[_0x51a67a(0x1a2)],_0x35c5fe[_0x51a67a(0x1ee)])[_0x51a67a(0x2ef)],'apiSecret':crypt[_0x51a67a(0x2c1)](secure['privateKey'],_0x35c5fe[_0x51a67a(0x166)])['message']};_0x35c5fe[_0x51a67a(0x151)]&&(_0x35c5fe['apiPassword']=crypt[_0x51a67a(0x2c1)](secure[_0x51a67a(0x1a2)],_0x35c5fe[_0x51a67a(0x151)])[_0x51a67a(0x2ef)]);let _0x11141e=![];if(_0x33bce9){_0x35c5fe[_0x51a67a(0x1ee)]==_0x51a67a(0x2f7)?_0x35c5fe['apiKey']=config[_0x51a67a(0x1ee)]:_0x11141e=!![];_0x35c5fe[_0x51a67a(0x166)]==_0x51a67a(0x2f7)?_0x35c5fe[_0x51a67a(0x166)]=config[_0x51a67a(0x166)]:_0x11141e=!![];if(_0x35c5fe[_0x51a67a(0x151)]==_0x51a67a(0x2f7))_0x35c5fe[_0x51a67a(0x151)]=config['apiPassword'];else{if(_0x35c5fe['apiPassword'])_0x11141e=!![];}dbConfig[_0x51a67a(0x1b8)](_0x51a67a(0x1dd))['find']({'botID':botID})[_0x51a67a(0x29e)](_0x35c5fe)[_0x51a67a(0x2d0)]();}else dbConfig[_0x51a67a(0x1b8)](_0x51a67a(0x1dd))[_0x51a67a(0x1f7)](_0x35c5fe)[_0x51a67a(0x2d0)](),_0x11141e=!![],process[_0x51a67a(0x2d1)]({'status':_0x51a67a(0x1f5),'live':_0x51a67a(0x225)},_0x8d53da=>{});process['send']({'botname':_0x35c5fe[_0x51a67a(0x2ea)]},_0x416329=>{}),config={..._0x35c5fe},updateBotManager(),proxyEmit(_0x51a67a(0x198)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x11141e)await reset(!![]);else _0x3f1879||_0x1a7ac?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x51a67a(0x256));}async function storeHeadless(_0x52dec4){const _0x1947a3=_0x4520ae,_0x57878f={...config,'headless':_0x52dec4[_0x1947a3(0x2b3)]};let _0x2d8a88=dbConfig[_0x1947a3(0x1b8)](_0x1947a3(0x1dd))['find']({'botID':botID})[_0x1947a3(0x2b9)]();_0x2d8a88&&dbConfig['get'](_0x1947a3(0x1dd))[_0x1947a3(0x2d5)]({'botID':botID})[_0x1947a3(0x29e)](_0x57878f)[_0x1947a3(0x2d0)](),config={..._0x57878f},updateBotManager(),proxyEmit(_0x1947a3(0x250),emittedConfiguration());}async function storeFiat(_0x39b1e2){const _0x116332=_0x4520ae,_0x2aef7f={...config,'fiat':_0x39b1e2};let _0x4d31df=dbConfig[_0x116332(0x1b8)](_0x116332(0x1dd))['find']({'botID':botID})['value']();_0x4d31df&&dbConfig[_0x116332(0x1b8)]('bot')[_0x116332(0x2d5)]({'botID':botID})[_0x116332(0x29e)](_0x2aef7f)['write'](),config={..._0x2aef7f},proxyEmit(_0x116332(0x250),emittedConfiguration());}function resetHistory(){const _0x167e5f=_0x4520ae;logger[_0x167e5f(0x17c)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+_0x167e5f(0x244))))fs[_0x167e5f(0x259)](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+_0x167e5f(0x244)));if(fs[_0x167e5f(0x2fa)](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+_0x167e5f(0x18c))))fs[_0x167e5f(0x259)](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+_0x167e5f(0x18c)));if(fs['existsSync'](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+'-results.json')))fs['unlinkSync'](path[_0x167e5f(0x2a0)](configpath,_0x167e5f(0x2f1)+botID+'-results.json'));}catch(_0x143ab6){if(_0x143ab6)logger[_0x167e5f(0x17c)](_0x167e5f(0x15d),_0x143ab6);}const _0x2cb735=getDate();let _0x297dc4=[];currentCoins[_0x167e5f(0x165)](_0xb1a768=>{const _0x2a781c=_0x167e5f;_0x297dc4[_0x2a781c(0x1f7)]({'coin':_0xb1a768[_0x2a781c(0x307)],'number':_0xb1a768[_0x2a781c(0x177)],'price':_0xb1a768[_0x2a781c(0x2c9)]});});let _0x3ebeda=dbConfig[_0x167e5f(0x1b8)](_0x167e5f(0x1dd))[_0x167e5f(0x2d5)]({'botID':botID})[_0x167e5f(0x2b9)]();_0x3ebeda&&(dbConfig['get']('bot')[_0x167e5f(0x2d5)]({'botID':botID})[_0x167e5f(0x29e)]({'liquidity':[{'date':_0x2cb735,'changes':_0x297dc4}]})['write'](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x5f59d8){return _0x5f59d8['replace']('/','');}function updateHighestFee(_0x522f36){const _0x199069=_0x4520ae;if(_0x522f36[_0x199069(0x2be)]){let _0x37ed8e={'filled':_0x522f36[_0x199069(0x1ff)]*_0x522f36['price'],'amount':_0x522f36['filled']*_0x522f36[_0x199069(0x2e6)],'side':_0x522f36[_0x199069(0x249)]==_0x199069(0x1fd)?_0x199069(0x181):_0x199069(0x1fd),'price':0x1/_0x522f36[_0x199069(0x2e6)]};_0x522f36={..._0x522f36,..._0x37ed8e};}const _0x43d660=defaultFee*_0x522f36[_0x199069(0x1ff)]*_0x522f36['price'];lastFees[_0x199069(0x209)][_0x199069(0x28b)]===0x14&&lastFees[_0x199069(0x209)][_0x199069(0x1fe)](),lastFees[_0x199069(0x209)][_0x199069(0x1f7)](_0x43d660),lastFees[_0x199069(0x21d)]=Math['max'](...lastFees[_0x199069(0x209)]);}async function updateNumberCoinsCcxt(_0x658509){const _0x2af198=_0x4520ae;logger[_0x2af198(0x15a)](_0x2af198(0x2f9)+_0x658509[_0x2af198(0x26e)]+_0x2af198(0x1f0)+_0x658509['status']+_0x2af198(0x1f0)+_0x658509[_0x2af198(0x1ff)]+'\x20/\x20'+_0x658509['amount']+_0x2af198(0x1f0)+_0x658509['id']);_0x658509['filled']>0x0&&(blockTransactionDetection=!![]);let _0x3e2fad=_0x658509[_0x2af198(0x1b2)],_0x7f3b1f=![];currentCoins[_0x2af198(0x165)](_0x4b0600=>{const _0x28b616=_0x2af198;_0x4b0600[_0x28b616(0x26e)]==_0x658509[_0x28b616(0x26e)]&&(_0x7f3b1f=!![]);});if(!_0x7f3b1f)return;const _0x3563f2=currentCoins[_0x2af198(0x2d5)](_0x174c4a=>_0x174c4a['symbol']==_0x658509[_0x2af198(0x26e)]),_0x13df29=_0xfef6d4=>{const _0x579b78=_0x2af198;if(_0x3563f2)_0x3563f2[_0x579b78(0x1e0)]=_0xfef6d4;};if(_0x3e2fad==_0x2af198(0x19e))_0x13df29(_0x2af198(0x19e));else{if(_0x3e2fad==_0x2af198(0x194)){_0x13df29(_0x2af198(0x194));const _0x22e420=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x22e420,blockTransactionDetection=![],await getOpenOrders(),handleOpenOrders();}else{if(_0x3e2fad==_0x2af198(0x28c)){let _0x2a1079=![];if(lastOrders)for(const _0x30dcea of lastOrders){const _0xf3d03a=0xc8,_0x3080ea=0x1388;let _0xf4a493=0x0;while(!_0x30dcea['orderId']&&_0xf4a493*_0xf3d03a<_0x3080ea){_0xf4a493++,await sleep(_0xf3d03a);}if(_0xf4a493>0x0)logger[_0x2af198(0x15a)]('Waited\x20'+_0xf4a493*_0xf3d03a/0x3e8+_0x2af198(0x1c1));if(_0x30dcea[_0x2af198(0x302)]==_0x658509['id']){logger[_0x2af198(0x15a)](_0x2af198(0x2d8)+_0x658509['id']),_0x2a1079=!![];if(_0x30dcea['filled']==0x0){logger[_0x2af198(0x15a)](_0x2af198(0x1c6)+_0x658509['id']);if(_0x658509[_0x2af198(0x27a)])_0x30dcea[_0x2af198(0x2e6)]=_0x658509[_0x2af198(0x27a)];else{if(_0x658509['price'])_0x30dcea[_0x2af198(0x2e6)]=_0x658509[_0x2af198(0x2e6)];else{}}_0x30dcea['filled']=_0x658509['filled'],updateHighestFee(_0x30dcea),_0x13df29(_0x2af198(0x1ff)),await validateOrders();if(lockOrders==ORDERS[_0x2af198(0x1ab)]){const _0x3190bd=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3190bd,blockTransactionDetection=![];}_0x30dcea[_0x2af198(0x251)]={'currency':_0x658509[_0x2af198(0x251)]?_0x658509[_0x2af198(0x251)][_0x2af198(0x1cd)]:null,'cost':_0x658509['fee']?_0x658509[_0x2af198(0x251)]['cost']:0x0},await updateCoinResults(_0x30dcea);}}}!_0x2a1079&&(logger['debug'](_0x2af198(0x172)+_0x658509['id']),_0x13df29('filled'),blockTransactionDetection=![],await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x5729d5=JSON[_0x2af198(0x26b)](lastBalances[_0x2af198(0x1ce)]);const _0x2112c2=_0x5729d5[_0x2af198(0x2d5)](_0x4f51b9=>_0x4f51b9['symbol']==_0x658509[_0x2af198(0x26e)]);if(_0x2112c2){if(_0x3e2fad=='open')_0x2112c2[_0x2af198(0x1e0)]=_0x2112c2[_0x2af198(0x1e0)]=='filled'?'filled':'open';else{if(_0x3e2fad==_0x2af198(0x194))_0x2112c2[_0x2af198(0x1e0)]=_0x2112c2[_0x2af198(0x1e0)]=='filled'?_0x2af198(0x1ff):'canceled';else _0x3e2fad==_0x2af198(0x28c)&&(_0x2112c2['orderstatus']=_0x2af198(0x1ff));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2af198(0x186)](_0x5729d5)},proxyEmit(_0x2af198(0x284),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5eec50=_0x4520ae;await getOpenOrders();let _0x20bc02=![];currentCoins[_0x5eec50(0x165)](_0x52a58d=>{const _0x265c5e=_0x5eec50;_0x20bc02=allOpenOrders[_0x265c5e(0x2d5)](_0x3301d6=>_0x3301d6[_0x265c5e(0x26e)]==_0x52a58d[_0x265c5e(0x26e)]),_0x52a58d[_0x265c5e(0x1e0)]=_0x20bc02?'open':_0x265c5e(0x264);});}async function getCoins(_0x29cfb5=0x0,_0x5b67b7=!![],_0x32a4a8=config[_0x4520ae(0x25c)]){const _0x1a6cf3=_0x4520ae;let _0x496ff2,_0x5559bc=[],_0x47002b=[],_0x3f9521=[];if(_0x29cfb5)await sleep(_0x29cfb5);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x496ff2=await exchange[_0x1a6cf3(0x21e)](),mybalances=_0x496ff2[_0x1a6cf3(0x2a4)];for(const [_0x116576,_0x98867a]of Object[_0x1a6cf3(0x18f)](mybalances)){_0x3f9521[_0x1a6cf3(0x1f7)](_0x116576);}config[_0x1a6cf3(0x1ce)][_0x1a6cf3(0x165)](_0xacd58d=>{const _0x17e546=_0x1a6cf3;!_0x3f9521['includes'](_0xacd58d['coin'])&&(mybalances[_0xacd58d[_0x17e546(0x307)]]=0x0);});if(_0x32a4a8=='')for(const [_0x31ebce,_0x42c98b]of Object[_0x1a6cf3(0x18f)](mybalances)){_0x42c98b!=0x0&&_0x5559bc[_0x1a6cf3(0x1f7)]({'coin':_0x31ebce});}else for(const [_0x240220,_0xd0ccf9]of Object[_0x1a6cf3(0x18f)](mybalances)){const _0x40bca3=config[_0x1a6cf3(0x1ce)][_0x1a6cf3(0x2d5)](_0x5ca8ef=>_0x5ca8ef[_0x1a6cf3(0x307)]==_0x240220),_0x3d874b=_0x240220+'/'+_0x32a4a8,_0x5cbafe=_0x32a4a8+'/'+_0x240220,_0x3a2958=currentCoins['find'](_0x23ef07=>_0x23ef07[_0x1a6cf3(0x307)]==_0x240220);if((_0xd0ccf9!=0x0||_0x40bca3)&&(allSymbols['includes'](_0x3d874b)||_0x240220==_0x32a4a8))_0x3a2958?_0x5559bc[_0x1a6cf3(0x1f7)]({..._0x3a2958,'number':Math['max'](_0xd0ccf9+(_0x40bca3&&_0x40bca3[_0x1a6cf3(0x2c5)]||0x0),0x0)}):_0x5559bc[_0x1a6cf3(0x1f7)]({'coin':_0x240220,'symbol':_0x3d874b,'reverse':![],'number':Math[_0x1a6cf3(0x2f3)](_0xd0ccf9+(_0x40bca3&&_0x40bca3['offset']||0x0),0x0),'orderstatus':_0x1a6cf3(0x264)});else{if((_0xd0ccf9!=0x0||_0x40bca3)&&allSymbols[_0x1a6cf3(0x285)](_0x5cbafe))_0x3a2958?_0x5559bc[_0x1a6cf3(0x1f7)]({..._0x3a2958,'number':Math[_0x1a6cf3(0x2f3)](_0xd0ccf9+(_0x40bca3&&_0x40bca3[_0x1a6cf3(0x2c5)]||0x0),0x0)}):_0x5559bc[_0x1a6cf3(0x1f7)]({'coin':_0x240220,'symbol':_0x5cbafe,'reverse':!![],'number':Math[_0x1a6cf3(0x2f3)](_0xd0ccf9+(_0x40bca3&&_0x40bca3[_0x1a6cf3(0x2c5)]||0x0),0x0),'orderstatus':'none'});else _0x40bca3&&_0x5559bc[_0x1a6cf3(0x1f7)]({'coin':_0x40bca3[_0x1a6cf3(0x307)],'symbol':_0x40bca3['symbol'],'reverse':_0x40bca3['reverse'],'number':0x0,'orderstatus':'none'});}}}catch(_0x1ac9b1){if(!_0x5b67b7)handleErrorNoStop(_0x1ac9b1,_0x1a6cf3(0x26a));else await handleError(_0x1ac9b1,_0x1a6cf3(0x26a));}return _0x5559bc[_0x1a6cf3(0x175)]((_0x1219e2,_0x3741ef)=>_0x1219e2['delta']<_0x3741ef['delta']?0x1:_0x3741ef['delta']<_0x1219e2['delta']?-0x1:0x0),_0x47002b=cloneDeep(_0x5559bc),_0x5559bc=_0x5559bc[_0x1a6cf3(0x235)](_0x17ccb8=>{const _0x4792b4=_0x1a6cf3,_0x460104=config['portfolio'][_0x4792b4(0x2d5)](_0x5ca908=>_0x5ca908[_0x4792b4(0x307)]==_0x17ccb8[_0x4792b4(0x307)]);return _0x460104&&!_0x460104[_0x4792b4(0x1d8)];}),[_0x5559bc,_0x47002b];}async function getCoinNumber(_0x274087){const _0x1332a1=_0x4520ae;let _0x5de2e0;try{const _0x367354=await exchange[_0x1332a1(0x21e)]();_0x5de2e0=_0x367354[_0x1332a1(0x2a4)][_0x274087];}catch(_0x5ed778){await handleError(_0x5ed778,_0x1332a1(0x275));}return _0x5de2e0;}async function getOpenOrders(){const _0x134adb=_0x4520ae;let _0x2f9783;allOpenOrders=[];try{for(const _0x3d85ef of config[_0x134adb(0x1ce)]){!_0x3d85ef[_0x134adb(0x1d8)]&&_0x3d85ef[_0x134adb(0x307)]!=config[_0x134adb(0x25c)]&&(_0x2f9783=await exchange['fetchOpenOrders'](_0x3d85ef[_0x134adb(0x26e)]),_0x2f9783[_0x134adb(0x28b)]>0x0&&allOpenOrders[_0x134adb(0x1f7)](_0x2f9783[0x0]));}}catch(_0x1ace33){await handleError(_0x1ace33,_0x134adb(0x2ee));}}async function handleOpenOrders(_0x1f6482=0x0){const _0x1f303f=_0x4520ae;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x1f6482==0x0?(logger['debug'](_0x1f303f(0x26c)),_0x1f6482++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x1f303f(0x18b)),validateOrders(_0x1f303f(0x2a9))));}async function testAPI(_0x15c1fe){const _0xf7f3ab=_0x4520ae,_0x4d1782=ccxt[_0xf7f3ab(0x23b)][_0x15c1fe[_0xf7f3ab(0x2bd)][_0xf7f3ab(0x1e9)]()],_0x827b96=new _0x4d1782({'apiKey':_0x15c1fe[_0xf7f3ab(0x1ee)],'secret':_0x15c1fe[_0xf7f3ab(0x166)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xf7f3ab(0x197)}});if(_0x15c1fe['apiPassword'])_0x827b96[_0xf7f3ab(0x1b6)]=_0x15c1fe[_0xf7f3ab(0x151)];try{await _0x827b96[_0xf7f3ab(0x184)]();}catch(_0x2d7b17){throw _0x2d7b17;}}function cloneDeep(_0x20137c){const _0x5bab2d=_0x4520ae;return JSON[_0x5bab2d(0x26b)](JSON[_0x5bab2d(0x186)](_0x20137c));}async function getPortfolio(_0x4bfce0){const _0x3c5528=_0x4520ae;let _0x53ffc2=[],_0x4ae8db=[],_0x58e246=[],_0x394df8;if(_0x4bfce0['apiKey']!=='************'||_0x4bfce0[_0x3c5528(0x166)]!==_0x3c5528(0x2f7)||_0x4bfce0[_0x3c5528(0x151)]&&_0x4bfce0[_0x3c5528(0x151)]!==_0x3c5528(0x2f7)){if(config[_0x3c5528(0x2bd)]){if(_0x4bfce0[_0x3c5528(0x1ee)]==_0x3c5528(0x2f7))_0x4bfce0['apiKey']=config[_0x3c5528(0x1ee)];if(_0x4bfce0['apiSecret']==_0x3c5528(0x2f7))_0x4bfce0[_0x3c5528(0x166)]=config[_0x3c5528(0x166)];if(_0x4bfce0[_0x3c5528(0x151)]==_0x3c5528(0x2f7))_0x4bfce0[_0x3c5528(0x151)]=config[_0x3c5528(0x151)];try{await testAPI(_0x4bfce0);}catch(_0x1f85d1){if(_0x1f85d1['toString']()[_0x3c5528(0x285)](_0x3c5528(0x253))){logger[_0x3c5528(0x15a)](_0x3c5528(0x1e7)),proxyEmit(_0x3c5528(0x1ce),![]);return;}else{handleError(_0x1f85d1,_0x3c5528(0x2d6));return;}}}await initExchange(_0x4bfce0[_0x3c5528(0x2bd)],_0x4bfce0[_0x3c5528(0x1ee)],_0x4bfce0[_0x3c5528(0x166)],_0x4bfce0[_0x3c5528(0x151)]);try{await loadSymbols();}catch(_0x292d40){if(_0x292d40[_0x3c5528(0x1b4)]()['includes'](_0x3c5528(0x253))){proxyEmit(_0x3c5528(0x1ce),![]);return;}else{handleError(_0x292d40,'getPortfolio(1)');return;}}const _0x1fccf1=await getCoins(0x0,![],_0x4bfce0[_0x3c5528(0x25c)]);_0x58e246=cloneDeep(_0x1fccf1[0x1]);}else{const _0x5d2390=await getCoins();_0x58e246=cloneDeep(_0x5d2390[0x1]);}if(_0x4bfce0[_0x3c5528(0x25c)]=='')proxyEmit('portfolio',_0x58e246);else{_0x58e246[_0x3c5528(0x165)](_0x102441=>{const _0x3eeb6d=_0x3c5528;if(_0x102441['coin']!=_0x4bfce0[_0x3eeb6d(0x25c)]&&allSymbols[_0x3eeb6d(0x285)](_0x102441[_0x3eeb6d(0x26e)]))_0x53ffc2[_0x3eeb6d(0x1f7)](_0x102441[_0x3eeb6d(0x26e)]);});if(_0x53ffc2[_0x3c5528(0x28b)]==0x0)logHistory(_0x3c5528(0x2e1),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x4ae8db=await getTickers(_0x53ffc2);}catch(_0x5481d6){if(_0x5481d6[_0x3c5528(0x1b4)]()[_0x3c5528(0x285)](_0x3c5528(0x253))){proxyEmit(_0x3c5528(0x1ce),![]);return;}else handleError(_0x5481d6,_0x3c5528(0x193));}_0x58e246[_0x3c5528(0x165)](_0x3c65c3=>{const _0x130871=_0x3c5528;_0x3c65c3[_0x130871(0x307)]!=_0x4bfce0['basecoin']?_0x4ae8db[_0x3c65c3['symbol']]?_0x394df8=_0x3c65c3[_0x130871(0x2be)]?0x1/_0x4ae8db[_0x3c65c3[_0x130871(0x26e)]]['last']:_0x4ae8db[_0x3c65c3[_0x130871(0x26e)]][_0x130871(0x2c9)]:_0x394df8=0x0:_0x394df8=0x1,_0x3c65c3[_0x130871(0x2e6)]=formatResult(_0x394df8,0x8);}),await getMarketCap(_0x58e246),proxyEmit(_0x3c5528(0x1ce),_0x58e246);}}}function truncateTradeAmount(_0x124e98,_0x17acf9){let _0x85bdb6=0x0;try{_0x85bdb6=exchange['amountToPrecision'](_0x124e98,_0x17acf9);}catch(_0x307528){}return _0x85bdb6;}function checkMinimums(_0xf6554a){const _0x5290f0=_0x4520ae;let _0x108546=!![];const _0x19e102=!_0xf6554a[_0x5290f0(0x2be)]?markets[_0xf6554a[_0x5290f0(0x26e)]][_0x5290f0(0x269)]['amount']['min']:markets[_0xf6554a[_0x5290f0(0x26e)]]['limits'][_0x5290f0(0x1bf)][_0x5290f0(0x178)],_0x15d382=!_0xf6554a[_0x5290f0(0x2be)]?markets[_0xf6554a[_0x5290f0(0x26e)]]['limits'][_0x5290f0(0x1bf)][_0x5290f0(0x178)]:markets[_0xf6554a[_0x5290f0(0x26e)]]['limits']['amount'][_0x5290f0(0x178)],_0x18e044=truncateTradeAmount(_0xf6554a[_0x5290f0(0x26e)],_0xf6554a['trade']);_0xf6554a[_0x5290f0(0x16d)]=_0x18e044;if(Math[_0x5290f0(0x24d)](_0x18e044)<_0x19e102)_0x108546=![];if(Math[_0x5290f0(0x24d)](_0x18e044)*_0xf6554a[_0x5290f0(0x2c9)]<_0x15d382)_0x108546=![];if(_0xf6554a[_0x5290f0(0x249)]=='sell'){let _0x2347b9=config['portfolio']['find'](_0x45a1f8=>_0x45a1f8[_0x5290f0(0x307)]==_0xf6554a[_0x5290f0(0x307)]);if(_0x2347b9[_0x5290f0(0x2c5)]>0x0){if(Math[_0x5290f0(0x24d)](_0x18e044)>_0xf6554a[_0x5290f0(0x177)]-_0x2347b9['offset'])_0x108546=![];}else{if(Math[_0x5290f0(0x24d)](_0x18e044)>_0xf6554a[_0x5290f0(0x177)])_0x108546=![];}}if(_0xf6554a[_0x5290f0(0x249)]=='buy'){let _0x2edc54=config[_0x5290f0(0x1ce)][_0x5290f0(0x2d5)](_0x1bd672=>_0x1bd672[_0x5290f0(0x307)]==config[_0x5290f0(0x25c)]),_0x14617f=currentCoins[_0x5290f0(0x2d5)](_0x39f5f2=>_0x39f5f2['coin']==config[_0x5290f0(0x25c)]);if(_0x2edc54['offset']>0x0){if(Math[_0x5290f0(0x24d)](_0x18e044)*_0xf6554a['last']>_0x14617f[_0x5290f0(0x177)]-_0x2edc54['offset'])_0x108546=![];}else{if(Math[_0x5290f0(0x24d)](_0x18e044)*_0xf6554a[_0x5290f0(0x2c9)]>_0x14617f['number'])_0x108546=![];}}return _0x108546;}async function getBalances(_0x258399=!![]){const _0xb74db8=_0x4520ae;let _0x45eb25=0x0,_0x4b0493;const _0x580d5f=config['threshold'];if(config[_0xb74db8(0x2b3)]&&config[_0xb74db8(0x28e)]<0x0)await validate24hChanges();currentCoins[_0xb74db8(0x165)](_0x3a11c9=>{const _0x4be1ed=_0xb74db8;if(_0x3a11c9['coin']!=config[_0x4be1ed(0x25c)]){let _0x5e2a98=global[_0x4be1ed(0x179)][noslash(_0x3a11c9[_0x4be1ed(0x26e)])];_0x4b0493=_0x3a11c9[_0x4be1ed(0x2be)]?0x1/_0x5e2a98:_0x5e2a98;}else _0x4b0493=0x1;let _0x77c7a2=_0x3a11c9[_0x4be1ed(0x177)]*_0x4b0493;_0x45eb25+=_0x77c7a2,_0x3a11c9[_0x4be1ed(0x2c9)]=formatResult(Number(_0x4b0493),0x8),_0x3a11c9[_0x4be1ed(0x2b9)]=_0x77c7a2;}),currentCoins[_0xb74db8(0x165)](_0xb43158=>{const _0x54d21d=_0xb74db8;let _0x248464=config[_0x54d21d(0x1ce)][_0x54d21d(0x2d5)](_0x1fa11c=>_0x1fa11c['coin']==_0xb43158['coin']),_0x4ba110=Number(_0x248464['distribution']),_0x20a678=_0xb43158[_0x54d21d(0x2b9)]/_0x45eb25*0x64,_0x38c266=_0x4ba110*_0x45eb25/0x64/_0xb43158[_0x54d21d(0x2c9)]-_0xb43158[_0x54d21d(0x177)];_0xb43158['distribution']=formatResult(_0x20a678,0x3),_0xb43158[_0x54d21d(0x1f2)]=formatResult(_0x4ba110,0x3),_0xb43158[_0x54d21d(0x16d)]=formatResult(_0x38c266,0x8),_0xb43158[_0x54d21d(0x249)]='',_0xb43158[_0x54d21d(0x2d2)]=![];if(_0xb43158[_0x54d21d(0x307)]!=config[_0x54d21d(0x25c)]){if(_0xb43158['distribution']>_0x4ba110)_0xb43158['side']=_0x54d21d(0x1fd),_0xb43158[_0x54d21d(0x2d2)]=checkMinimums(_0xb43158);else _0xb43158[_0x54d21d(0x2b6)]<_0x4ba110&&(_0xb43158[_0x54d21d(0x249)]=_0x54d21d(0x181),_0xb43158[_0x54d21d(0x2d2)]=checkMinimums(_0xb43158));}_0xb43158[_0x54d21d(0x279)]=_0xb43158[_0x54d21d(0x2b6)]/_0xb43158[_0x54d21d(0x1f2)]-0x1;if(_0xb43158['orderstatus']=='filled'||_0xb43158[_0x54d21d(0x1e0)]==_0x54d21d(0x194))_0xb43158['orderstatus']=_0x54d21d(0x264);}),currentCoins[_0xb74db8(0x175)]((_0x1f616b,_0x5e8752)=>_0x1f616b['delta']<_0x5e8752[_0xb74db8(0x279)]?0x1:_0x5e8752[_0xb74db8(0x279)]<_0x1f616b[_0xb74db8(0x279)]?-0x1:0x0);const _0xff59d8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xff59d8[_0xb74db8(0x2c6)],'usd':_0xff59d8['usd'],'portfolio':JSON[_0xb74db8(0x186)](currentCoins),'threshold':_0x580d5f},proxyEmit(_0xb74db8(0x284),{'serverversion':serverversion,'balances':lastBalances});if(_0x258399){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x580d5f});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x580d5f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x13a546=getNormalizedPerformance();getStartingBalances(_0x13a546),emitPerformance(_0x13a546);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4c7688=_0x4520ae;if(!lastBalances)return;let _0x2f3299=[],_0xcdef64,_0x259d1e=JSON['parse'](lastBalances['portfolio']);_0x259d1e[_0x4c7688(0x175)]((_0x1da269,_0x26b50f)=>_0x1da269[_0x4c7688(0x307)]>_0x26b50f[_0x4c7688(0x307)]?0x1:_0x26b50f[_0x4c7688(0x307)]>_0x1da269['coin']?-0x1:0x0),_0x259d1e[_0x4c7688(0x165)](_0x481e05=>{const _0x33b56d=_0x4c7688;let _0x1dc4e0={'coin':_0x481e05['coin'],'number':_0x481e05[_0x33b56d(0x177)],'price':_0x481e05[_0x33b56d(0x2c9)]};_0x2f3299[_0x33b56d(0x1f7)](_0x1dc4e0);});const _0x5a58eb=await getFiat();_0xcdef64={'date':lastBalances['time'][_0x4c7688(0x2cc)]('\x20')[0x0],'eur':_0x5a58eb[_0x4c7688(0x2c6)],'usd':_0x5a58eb[_0x4c7688(0x221)],'coins':_0x2f3299};let _0x4cb2cf=dbPerformance[_0x4c7688(0x1b8)](_0x4c7688(0x1e2))[_0x4c7688(0x2d5)]({'date':_0xcdef64['date']})[_0x4c7688(0x2b9)]();_0x4cb2cf?_0xcdef64[_0x4c7688(0x300)]!=config[_0x4c7688(0x1de)]&&dbPerformance['get'](_0x4c7688(0x1e2))[_0x4c7688(0x2d5)]({'date':_0xcdef64[_0x4c7688(0x300)]})[_0x4c7688(0x29e)](_0xcdef64)[_0x4c7688(0x2d0)]():dbPerformance[_0x4c7688(0x1b8)](_0x4c7688(0x1e2))[_0x4c7688(0x1f7)](_0xcdef64)[_0x4c7688(0x2d0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x15aaf2=_0x4520ae;let _0x46a623=[];if(dbPerformance[_0x15aaf2(0x304)]('data')[_0x15aaf2(0x2b9)]()){let _0x333714=dbPerformance[_0x15aaf2(0x1b8)](_0x15aaf2(0x1e2))[_0x15aaf2(0x161)]()['filter'](_0x4944a3=>{const _0x5004f8=_0x15aaf2;if(_0x4944a3[_0x5004f8(0x1d0)][_0x5004f8(0x28b)]==0x0)return![];else return!![];})[_0x15aaf2(0x233)]('date')[_0x15aaf2(0x2b9)](),_0xed139f=[...config[_0x15aaf2(0x210)]];_0xed139f[_0x15aaf2(0x175)]((_0x4d41ed,_0x3a8167)=>_0x4d41ed['date']>_0x3a8167['date']?-0x1:_0x3a8167[_0x15aaf2(0x300)]>_0x4d41ed[_0x15aaf2(0x300)]?0x1:0x0);let _0x246f6b=0x1,_0x58363b=[],_0x19a612=0x0;_0x333714[_0x15aaf2(0x2f2)]()[_0x15aaf2(0x2be)]()[_0x15aaf2(0x165)]((_0x12900f,_0x3d085f)=>{const _0x3577fb=_0x15aaf2;if(_0xed139f[_0x19a612]){if(_0x333714[_0x333714[_0x3577fb(0x28b)]-_0x3d085f]&&_0xed139f[_0x19a612][_0x3577fb(0x300)]==_0x333714[_0x333714[_0x3577fb(0x28b)]-_0x3d085f][_0x3577fb(0x300)]){if(_0x3d085f<_0x333714[_0x3577fb(0x28b)]){let _0x1bc6c7=0x0,_0x3340e7=0x0;_0x333714[_0x333714[_0x3577fb(0x28b)]-_0x3d085f][_0x3577fb(0x1d0)]['forEach'](_0x1203eb=>{const _0x5e6f30=_0x3577fb;_0x3340e7+=_0x1203eb[_0x5e6f30(0x177)]*_0x1203eb[_0x5e6f30(0x2e6)];}),_0xed139f[_0x19a612][_0x3577fb(0x1f4)][_0x3577fb(0x165)](_0x34a648=>{const _0x35fc44=_0x3577fb;_0x1bc6c7+=_0x34a648[_0x35fc44(0x177)]*_0x34a648['price'];}),_0x246f6b*=_0x1bc6c7/(_0x3340e7-_0x1bc6c7)+0x1;}_0x19a612++;}}let _0x503d72=0x0;_0x12900f[_0x3577fb(0x1d0)][_0x3577fb(0x165)](_0x5ebc32=>{const _0x5c7c3b=_0x3577fb;_0x503d72+=_0x5ebc32[_0x5c7c3b(0x177)]*_0x5ebc32[_0x5c7c3b(0x2e6)];}),_0x58363b[_0x333714[_0x3577fb(0x28b)]-_0x3d085f-0x1]=_0x503d72*(_0x246f6b-0x1);});let _0x42ab01=[];_0xed139f=[...config[_0x15aaf2(0x210)]]||[];let _0x463290=0x0;_0x19a612=0x0,_0x333714[_0x15aaf2(0x165)]((_0x2cf7f4,_0x2780fb)=>{const _0x400fc3=_0x15aaf2;if(_0xed139f[_0x19a612]){const _0x3f4e53=fns[_0x400fc3(0x26b)](_0xed139f[_0x19a612][_0x400fc3(0x300)],'yyyy/MM/dd',new Date()),_0x14a8c0=fns['parse'](_0x2cf7f4[_0x400fc3(0x300)],'yyyy/MM/dd',new Date());if(fns[_0x400fc3(0x1b1)](_0x3f4e53,_0x14a8c0)){let _0x4db8cd=0x0;_0xed139f[_0x19a612][_0x400fc3(0x1f4)]['forEach'](_0x178474=>{const _0x2aa38c=_0x400fc3;!_0x42ab01[_0x178474[_0x2aa38c(0x307)]]?_0x42ab01[_0x178474['coin']]=_0x178474[_0x2aa38c(0x177)]:(_0x4db8cd=_0x42ab01[_0x178474['coin']],_0x42ab01[_0x178474[_0x2aa38c(0x307)]]+=_0x178474[_0x2aa38c(0x177)]);const _0x41f2eb=_0x2cf7f4[_0x2aa38c(0x1d0)]['find'](_0x22183c=>_0x22183c[_0x2aa38c(0x307)]==_0x178474[_0x2aa38c(0x307)]);(!_0x41f2eb||_0x41f2eb['number']==0x0)&&(_0x463290+=(-_0x178474[_0x2aa38c(0x177)]-_0x4db8cd)*_0x178474[_0x2aa38c(0x2e6)]);}),_0x19a612++;}}_0x2cf7f4[_0x400fc3(0x1d0)][_0x400fc3(0x165)]((_0x4f5ace,_0x5802d8)=>{const _0x514cd5=_0x400fc3;_0x42ab01[_0x4f5ace[_0x514cd5(0x307)]]&&(_0x4f5ace[_0x514cd5(0x202)]=_0x42ab01[_0x4f5ace[_0x514cd5(0x307)]]);}),_0x46a623[_0x400fc3(0x1f7)]({'date':_0x2cf7f4['date'],'eur':_0x2cf7f4[_0x400fc3(0x2c6)],'usd':_0x2cf7f4['usd'],'offset':_0x58363b[_0x2780fb],'netoffset':_0x463290,'coins':_0x2cf7f4[_0x400fc3(0x1d0)]});});}return _0x46a623;}function emitPerformance(_0x548042){const _0x1ef79c=_0x4520ae;_0x548042['length']!==0x0?(proxyEmit(_0x1ef79c(0x2ad),_0x548042),lastPerformanceEmitted=getDate()):proxyEmit(_0x1ef79c(0x2ad),[]);}function getPerf(_0x31fe74,_0x291be6){const _0x16304d=_0x4520ae;let _0x5978c3=0x0,_0x2ae50e=0x0,_0x46b669=0x0;_0x31fe74['coins']['forEach'](_0x279e5c=>{const _0x39bccb=_0x5976;_0x5978c3+=_0x279e5c[_0x39bccb(0x177)]*_0x279e5c['price'];});_0x291be6&&(_0x5978c3+=_0x31fe74['offset']);if(config[_0x16304d(0x25c)]==='BTC'||config[_0x16304d(0x25c)]===_0x16304d(0x27b)||config[_0x16304d(0x25c)]===_0x16304d(0x204))_0x2ae50e=_0x5978c3*_0x31fe74[_0x16304d(0x2c6)],_0x46b669=_0x5978c3*_0x31fe74[_0x16304d(0x221)];else{if(usdBasecoins[_0x16304d(0x285)](config[_0x16304d(0x25c)]))_0x2ae50e=_0x5978c3*_0x31fe74[_0x16304d(0x2c6)]/_0x31fe74[_0x16304d(0x221)],_0x46b669=_0x5978c3;else config['basecoin']===_0x16304d(0x2e0)&&(_0x2ae50e=_0x5978c3,_0x46b669=_0x5978c3*_0x31fe74['usd']/_0x31fe74[_0x16304d(0x2c6)]);}return[_0x5978c3,_0x2ae50e,_0x46b669];}function getKPIs(_0x57b9ba,_0xd19cc=_0x4520ae(0x2e0)){const _0xebd8bb=_0x4520ae,_0x2179e4=config[_0xebd8bb(0x25c)],_0x155732=lastBalances,_0x25be79=currentCoins,_0x5a4736=getNormalizedPerformance(),_0x4ac3b5=_0x57b9ba==='basecoin'?_0x2179e4:_0x57b9ba===_0xebd8bb(0x25f)||_0x57b9ba===_0xebd8bb(0x301)?_0xd19cc:_0xebd8bb(0x1a6)+_0x2179e4,_0x3680ea=_0x57b9ba===_0xebd8bb(0x14f)?_0xebd8bb(0x189):_0x57b9ba===_0xebd8bb(0x301)?_0xebd8bb(0x189):_0x4ac3b5+'\x20value',_0x2760f0=_0x57b9ba==='net-basecoin'||_0x57b9ba===_0xebd8bb(0x301)?_0xebd8bb(0x189):_0x4ac3b5+_0xebd8bb(0x2bc);let _0xcc84b8=0x0;_0x25be79['forEach'](_0xd534c9=>{const _0x3f73f6=_0xebd8bb;_0xcc84b8+=_0xd534c9[_0x3f73f6(0x177)]*_0xd534c9[_0x3f73f6(0x2c9)];});if(_0x57b9ba===_0xebd8bb(0x25f)||_0x57b9ba==='net-fiat'){if(_0x2179e4==='BTC'||_0x2179e4==='ETH'||_0x2179e4==='PAXG')_0xcc84b8=_0xcc84b8*(_0xd19cc==='EUR'?_0x155732[_0xebd8bb(0x2c6)]:_0x155732['usd']);else{if(usdBasecoins[_0xebd8bb(0x285)](_0x2179e4))_0xcc84b8=_0xcc84b8*(_0xd19cc===_0xebd8bb(0x2e0)?_0x155732[_0xebd8bb(0x2c6)]/_0x155732['usd']:0x1);else _0x2179e4===_0xebd8bb(0x2e0)&&(_0xcc84b8=_0xcc84b8*(_0xd19cc===_0xebd8bb(0x2e0)?0x1:_0x155732[_0xebd8bb(0x221)]/_0x155732['eur']));}}let _0x4d74c9;if(_0xcc84b8!==0x0){if(_0x57b9ba===_0xebd8bb(0x25c))_0x4d74c9=(_0xcc84b8/startingBalances[_0xebd8bb(0x25c)]-0x1)*0x64;else{if(_0xd19cc===_0xebd8bb(0x2e0))_0x4d74c9=(_0xcc84b8/startingBalances[_0xebd8bb(0x2c6)]-0x1)*0x64;else _0x4d74c9=(_0xcc84b8/startingBalances[_0xebd8bb(0x221)]-0x1)*0x64;}let _0x2e75a4=0x0;if(startingBalances['coins'])_0x25be79[_0xebd8bb(0x165)](_0x460764=>{const _0x532d58=_0xebd8bb;let _0x51abeb=startingBalances['coins'][_0x532d58(0x2d5)](_0x2c8a32=>_0x2c8a32[_0x532d58(0x307)]===_0x460764[_0x532d58(0x307)]);if(_0x51abeb&&_0x51abeb[_0x532d58(0x307)]&&_0x460764[_0x532d58(0x177)]!==0x0)_0x2e75a4+=_0x51abeb[_0x532d58(0x177)]*_0x460764['last'];});let _0x42927b=0x0;if(_0x5a4736['length']!==0x0){let _0x450f38=_0x5a4736[_0x5a4736['length']-0x1];_0x42927b=_0x450f38[_0xebd8bb(0x2c4)];}_0x2e75a4-=_0x42927b;_0x57b9ba===_0xebd8bb(0x14f)&&(_0x4d74c9=(_0xcc84b8-_0x2e75a4)/startingBalances[_0xebd8bb(0x25c)]*0x64,_0xcc84b8=_0xcc84b8-_0x2e75a4);if(_0x57b9ba==='net-fiat'){let _0x5e28fd=_0xd19cc===_0xebd8bb(0x2e0)?startingBalances[_0xebd8bb(0x2c6)]:startingBalances[_0xebd8bb(0x221)];if(_0x2179e4===_0xebd8bb(0x176)||_0x2179e4===_0xebd8bb(0x27b)||_0x2179e4===_0xebd8bb(0x204))_0x2e75a4=_0xd19cc===_0xebd8bb(0x2e0)?_0x2e75a4*_0x155732[_0xebd8bb(0x2c6)]:_0x2e75a4*_0x155732[_0xebd8bb(0x221)];else{if(usdBasecoins[_0xebd8bb(0x285)](_0x2179e4))_0x2e75a4=_0xd19cc===_0xebd8bb(0x2e0)?_0x2e75a4*_0x155732[_0xebd8bb(0x2c6)]/_0x155732['usd']:_0x2e75a4;else _0x2179e4===_0xebd8bb(0x2e0)&&(_0x2e75a4=_0xd19cc===_0xebd8bb(0x2e0)?_0x2e75a4:_0x2e75a4*_0x155732[_0xebd8bb(0x221)]/_0x155732[_0xebd8bb(0x2c6)]);}_0x4d74c9=(_0xcc84b8-_0x2e75a4)/_0x5e28fd*0x64,_0xcc84b8=_0xcc84b8-_0x2e75a4;}if(_0x4d74c9){if(_0x4d74c9<0x64)_0x4d74c9=_0x4d74c9[_0xebd8bb(0x230)](0x2);else{if(_0x4d74c9<0x3e8)_0x4d74c9=_0x4d74c9[_0xebd8bb(0x230)](0x1);else _0x4d74c9=_0x4d74c9[_0xebd8bb(0x230)](0x0);}}else _0x4d74c9=Number('0')[_0xebd8bb(0x230)](0x2);if(_0xcc84b8){if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0.000001)_0xcc84b8=_0xcc84b8['toFixed'](0x2);else{if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0.1)_0xcc84b8=_0xcc84b8[_0xebd8bb(0x230)](0x6);else{if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0x1)_0xcc84b8=_0xcc84b8[_0xebd8bb(0x230)](0x5);else{if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0xa)_0xcc84b8=_0xcc84b8[_0xebd8bb(0x230)](0x4);else{if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0x64)_0xcc84b8=_0xcc84b8[_0xebd8bb(0x230)](0x3);else{if(Math[_0xebd8bb(0x24d)](_0xcc84b8)<0x3e8)_0xcc84b8=_0xcc84b8[_0xebd8bb(0x230)](0x2);else _0xcc84b8=_0xcc84b8['toFixed'](0x2);}}}}}}else _0xcc84b8=Number('0')[_0xebd8bb(0x230)](0x2);}else _0x4d74c9=Number('0')[_0xebd8bb(0x230)](0x2);return{'value':_0xcc84b8,'change':_0x4d74c9,'leftTxt':_0x3680ea,'rightTxt':_0x2760f0};}async function getStartingBalances(_0x824de5,_0x2f09c7=!![]){const _0x22b0a3=_0x4520ae;if(_0x824de5[_0x22b0a3(0x28b)]!==0x0){const [_0x4444e9,_0x5d15da,_0x345030]=getPerf(_0x824de5[0x0],!![]);let _0x32a547=[];config[_0x22b0a3(0x1ce)][_0x22b0a3(0x165)](_0xd06a35=>{const _0xfb1bff=_0x22b0a3;let _0x1717bd=0x0,_0x45a671;config['liquidity'][_0xfb1bff(0x165)](_0x475a50=>{const _0x7e4096=_0xfb1bff;let _0x43d981=_0x475a50[_0x7e4096(0x1f4)][_0x7e4096(0x2d5)](_0x5998bf=>_0x5998bf[_0x7e4096(0x307)]==_0xd06a35[_0x7e4096(0x307)]);if(_0x43d981){_0x1717bd+=_0x43d981[_0x7e4096(0x177)];if(!_0x45a671)_0x45a671=_0x43d981[_0x7e4096(0x2e6)];}}),_0x32a547['push']({'coin':_0xd06a35[_0xfb1bff(0x307)],'number':_0x1717bd,'initialprice':_0x45a671});});const _0x2d1801={'basecoin':_0x4444e9,'eur':_0x5d15da,'usd':_0x345030,'coins':_0x32a547};if(_0x2f09c7)proxyEmit(_0x22b0a3(0x2dc),_0x2d1801);startingBalances=_0x2d1801;}}function headlessMode(_0x315993){const _0x2b24d7=_0x4520ae;let _0x1be20c=_0x315993['portfolio'],_0x32500c=_0x315993['threshold'],_0x54d005=[];for(let _0x4b89bc of _0x1be20c){if(_0x4b89bc[_0x2b24d7(0x307)]!=config[_0x2b24d7(0x25c)]){if(_0x4b89bc[_0x2b24d7(0x279)]>=_0x32500c/0x64){if(_0x4b89bc['valid'])_0x54d005[_0x2b24d7(0x1f7)](_0x4b89bc);}else{if(_0x4b89bc[_0x2b24d7(0x279)]<=-_0x32500c/0x64){if(_0x4b89bc[_0x2b24d7(0x2d2)])_0x54d005[_0x2b24d7(0x1f7)](_0x4b89bc);}}}}_0x54d005[_0x2b24d7(0x28b)]>0x0&&(lockOrders==ORDERS[_0x2b24d7(0x2d3)]&&!coolingDown&&_0x54d005[_0x2b24d7(0x165)](_0x94a90e=>{const _0xfc2917=_0x2b24d7;logger['debug'](_0xfc2917(0x2ff)+_0x94a90e['coin']+'\x20'+_0x94a90e['number']+'\x20'+_0x94a90e[_0xfc2917(0x2c9)]+'\x20'+_0x94a90e[_0xfc2917(0x2b6)]+'%\x20'+_0x94a90e['target']+'%\x20'+(0x64*_0x94a90e[_0xfc2917(0x279)])['toFixed'](0x2)+'%\x20('+_0x32500c[_0xfc2917(0x230)](0x2)+'%)');}),placeOrder(_0x54d005));}function notifyBalance(_0x240c68){const _0x3700be=_0x4520ae;let _0x37df87=_0x240c68[_0x3700be(0x1ce)],_0x503209=_0x240c68['threshold'],_0x39118a=[];for(let _0x4a7e38 of _0x37df87){if(_0x4a7e38[_0x3700be(0x307)]!=config[_0x3700be(0x25c)]){if(_0x4a7e38[_0x3700be(0x279)]>=_0x503209/0x64){if(_0x4a7e38['valid'])_0x39118a[_0x3700be(0x1f7)](_0x4a7e38);}else{if(_0x4a7e38[_0x3700be(0x279)]<=-_0x503209/0x64){if(_0x4a7e38['valid'])_0x39118a[_0x3700be(0x1f7)](_0x4a7e38);}}}}if(_0x39118a[_0x3700be(0x28b)]>0x0){let _0xec7286=_0x39118a[_0x3700be(0x216)](_0x84726a=>_0x84726a[_0x3700be(0x307)]);_0xec7286[_0x3700be(0x175)]();let _0x13701f=_0xec7286[_0x3700be(0x2a0)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x3700be(0x156));lastCoinsToBalance=_0x13701f;}}function symbolToCoin(_0x6fa718){const _0x37822c=_0x4520ae;let _0x49a5ab;if(_0x6fa718[_0x37822c(0x285)]('/'+config['basecoin']))_0x49a5ab=_0x6fa718[_0x37822c(0x15b)]('/'+config[_0x37822c(0x25c)],'');if(_0x6fa718[_0x37822c(0x285)](config[_0x37822c(0x25c)]+'/'))_0x49a5ab=_0x6fa718[_0x37822c(0x15b)](config[_0x37822c(0x25c)]+'/','');return _0x49a5ab;}async function unlockOrders(){const _0x5732ba=_0x4520ae;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug'](_0x5732ba(0x1d9)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x41b947=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x41b947,blockTransactionDetection=![],validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x5732ba(0x2d3)],logger[_0x5732ba(0x15a)](_0x5732ba(0x2a5));}}async function validateOrders(_0x54b78c){const _0x1666f9=_0x4520ae;if(_0x54b78c)validateOrdersState=_0x54b78c;logger['debug'](_0x1666f9(0x238)+validateOrdersState+_0x1666f9(0x2b1)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x1666f9(0x2f8):_0x1666f9(0x22d)));let _0x45ba05=[],_0xb1b6a=config['ordertype']==_0x1666f9(0x222)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1666f9(0x1ab)])return;logger[_0x1666f9(0x15a)](_0x1666f9(0x171)+validateOrdersState),lastOrders[_0x1666f9(0x165)](_0x3db562=>{const _0x46006c=_0x1666f9;let _0x279211=![];_0x3db562[_0x46006c(0x1ff)]>0x0&&(_0x279211=!![]),_0x45ba05[_0x46006c(0x1f7)](_0x279211),_0x279211&&config['ordertype']!=_0x46006c(0x222)&&logHistory(_0x46006c(0x286),_0x46006c(0x292)+_0x3db562[_0x46006c(0x26e)]+'\x20'+_0x3db562[_0x46006c(0x249)]+'\x20#'+formatResult(_0x3db562[_0x46006c(0x1ff)],0x8)+'\x20@'+formatResult(_0x3db562['price'],0x8));}),_0x45ba05[_0x1666f9(0x165)]((_0x39b1a7,_0xfdc2c3)=>{const _0x59384a=_0x1666f9;if(_0x39b1a7)lastOrders[_0x59384a(0x19f)](_0xfdc2c3,0x1);}),persistOpenOrders(lastOrders);const _0x5905be=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x1666f9(0x2e7);if(validateOrdersState==_0x1666f9(0x202)){validateOrdersState=_0x1666f9(0x164);if(_0x45ba05[_0x1666f9(0x285)](![])){if(config['ordertype']==_0x1666f9(0x222)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x45ba05[_0x1666f9(0x285)](![])){}else{if(allOrdersPlaced){if(config[_0x1666f9(0x25d)]==_0x1666f9(0x222)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x1666f9(0x252))_0x45ba05[_0x1666f9(0x285)](![])&&(config[_0x1666f9(0x25d)]=='market'?logHistory(_0x1666f9(0x290),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0xb1b6a*validateOrderInterval/0xea60)+_0x1666f9(0x2ca)+_0x5905be):(await cancelOrders(),logHistory(_0x1666f9(0x290),_0x1666f9(0x2b8)+Math[_0x1666f9(0x20f)](_0xb1b6a*validateOrderInterval/0xea60)+_0x1666f9(0x2ca)+_0x5905be))),await unlockOrders();else{if(validateOrdersState==_0x1666f9(0x2a9)){if(config[_0x1666f9(0x25d)]!=_0x1666f9(0x222))logHistory('success',_0x1666f9(0x29c)+_0x5905be);await unlockOrders();}}}}}async function cancelOrders(){const _0xbc91ff=_0x4520ae;lastOrders[_0xbc91ff(0x165)](async _0x25667b=>{const _0x4d64fc=_0xbc91ff;try{const _0x44ce20=await exchange[_0x4d64fc(0x220)](_0x25667b[_0x4d64fc(0x302)],_0x25667b['symbol']);}catch(_0x4d6d86){if(_0x4d6d86[_0x4d64fc(0x1b4)]()[_0x4d64fc(0x285)](_0x4d64fc(0x1d3))){}else await handleError(_0x4d6d86,'cancelOrders()');}});}async function initCoinResults(_0x1a2e72){const _0x338d3f=_0x4520ae;_0x1a2e72?logger[_0x338d3f(0x15a)]('Resetting\x20coin\x20results:\x20'+_0x1a2e72):logger[_0x338d3f(0x15a)](_0x338d3f(0x162)),config[_0x338d3f(0x1ce)][_0x338d3f(0x165)](_0x30fe55=>{const _0x17aa60=_0x338d3f;if(!_0x30fe55[_0x17aa60(0x1d8)]&&_0x30fe55[_0x17aa60(0x307)]!=config[_0x17aa60(0x25c)]){const _0x219b10=currentCoins[_0x17aa60(0x2d5)](_0x4947b3=>_0x4947b3[_0x17aa60(0x307)]==_0x30fe55[_0x17aa60(0x307)]),_0xacfb56=global['ticker'][noslash(_0x30fe55['symbol'])];let _0x3a0463=_0x219b10?_0x219b10[_0x17aa60(0x177)]:null,_0xb4707f=_0x30fe55['reverse']?0x1/_0xacfb56:_0xacfb56,_0x3d771a;config[_0x17aa60(0x210)][_0x17aa60(0x165)](_0x8d2e7d=>{const _0x5f49b8=_0x17aa60;!_0x3d771a&&(_0x3d771a=_0x8d2e7d[_0x5f49b8(0x1f4)]['find'](_0xa24b48=>_0xa24b48[_0x5f49b8(0x307)]==_0x30fe55[_0x5f49b8(0x307)]),_0x3d771a&&(_0x3a0463=_0x3d771a['number'],_0xb4707f=_0x3d771a[_0x5f49b8(0x2e6)]));});let _0x200a01=dbCoinResults[_0x17aa60(0x1b8)]('coins')[_0x17aa60(0x2d5)]({'coin':_0x30fe55[_0x17aa60(0x307)]})[_0x17aa60(0x2b9)]();if(!_0x200a01){const _0x87d435={'coin':_0x30fe55['coin'],'number':_0x3a0463,'breakeven':_0xb4707f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x17aa60(0x1b8)]('coins')[_0x17aa60(0x1f7)](_0x87d435)[_0x17aa60(0x2d0)]();}else{if(_0x1a2e72&&_0x30fe55[_0x17aa60(0x307)]==_0x1a2e72){const _0x6f6aed={'coin':_0x30fe55['coin'],'number':_0x3a0463,'breakeven':_0xb4707f,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x17aa60(0x1d0))['find']({'coin':_0x30fe55['coin']})[_0x17aa60(0x29e)](_0x6f6aed)[_0x17aa60(0x2d0)]();}}}});}async function updateCoinResults(_0x209b2d,_0xdeecf1=![]){const _0x325ed8=_0x4520ae;let _0x2b6816,_0x102922,_0x3a6ccb,_0x3f9b9d,_0x3aa76d,_0x287802,_0xdcb445=dbCoinResults['get'](_0x325ed8(0x1d0))[_0x325ed8(0x2d5)]({'coin':_0x209b2d[_0x325ed8(0x307)]})[_0x325ed8(0x2b9)](),_0x11058c=![];_0xdcb445&&Object[_0x325ed8(0x18f)](_0xdcb445)[_0x325ed8(0x165)](([_0x31c649,_0x4ab80f])=>{if(_0x4ab80f==null)_0x11058c=!![];});(!_0xdcb445||_0x11058c)&&(await initCoinResults(_0x209b2d[_0x325ed8(0x307)]),_0xdcb445=dbCoinResults['get'](_0x325ed8(0x1d0))[_0x325ed8(0x2d5)]({'coin':_0x209b2d[_0x325ed8(0x307)]})[_0x325ed8(0x2b9)]());_0x209b2d[_0x325ed8(0x2be)]&&(_0x287802={'filled':_0x209b2d[_0x325ed8(0x1ff)]*_0x209b2d[_0x325ed8(0x2e6)],'amount':_0x209b2d[_0x325ed8(0x1ff)]*_0x209b2d[_0x325ed8(0x2e6)],'side':_0x209b2d[_0x325ed8(0x249)]==_0x325ed8(0x1fd)?_0x325ed8(0x181):'sell','price':0x1/_0x209b2d[_0x325ed8(0x2e6)]},_0x209b2d={..._0x209b2d,..._0x287802});_0xdeecf1?_0x102922=_0x209b2d[_0x325ed8(0x249)]==_0x325ed8(0x181)?_0xdcb445[_0x325ed8(0x177)]+_0x209b2d[_0x325ed8(0x1ff)]:_0xdcb445[_0x325ed8(0x177)]-_0x209b2d[_0x325ed8(0x1ff)]:_0x102922=await getCoinNumber(_0x209b2d['coin']);if(_0x209b2d['fee']&&_0x209b2d[_0x325ed8(0x251)][_0x325ed8(0x1cd)]==config[_0x325ed8(0x25c)])_0x2b6816=Number(_0x209b2d[_0x325ed8(0x251)][_0x325ed8(0x1bf)]);else{if(_0x209b2d['fee']&&_0x209b2d[_0x325ed8(0x251)][_0x325ed8(0x1cd)]=='BNB'&&!_0xdeecf1&&config[_0x325ed8(0x25c)]!=_0x325ed8(0x204))_0x2b6816=Number(_0x209b2d[_0x325ed8(0x251)][_0x325ed8(0x1bf)])*global[_0x325ed8(0x179)]['BNB'+config[_0x325ed8(0x25c)]];else _0x2b6816=defaultFee*_0x209b2d[_0x325ed8(0x1ff)]*_0x209b2d[_0x325ed8(0x2e6)];}_0x209b2d['side']==_0x325ed8(0x181)?(_0x3a6ccb=_0x102922!=0x0?(_0xdcb445[_0x325ed8(0x1e6)]*_0xdcb445[_0x325ed8(0x177)]+_0x209b2d[_0x325ed8(0x2e6)]*(_0x102922-_0xdcb445[_0x325ed8(0x177)])+_0x2b6816)/_0x102922:0x0,_0x3f9b9d=_0xdcb445[_0x325ed8(0x2fd)]):(_0x3a6ccb=_0x102922!=0x0?(_0xdcb445['breakeven']*_0xdcb445[_0x325ed8(0x177)]-_0x209b2d[_0x325ed8(0x2e6)]*(_0xdcb445[_0x325ed8(0x177)]-_0x102922)+_0x2b6816)/_0x102922:0x0,_0x3f9b9d=_0xdcb445[_0x325ed8(0x2fd)]+(_0x209b2d[_0x325ed8(0x2e6)]-_0xdcb445['breakeven'])*_0x209b2d[_0x325ed8(0x1ff)]);_0x3aa76d=(_0x209b2d[_0x325ed8(0x2e6)]-_0x3a6ccb-_0x2b6816/_0x209b2d['filled'])*_0x102922;let _0x3a885a={'coin':_0x209b2d[_0x325ed8(0x307)],'number':_0x102922,'breakeven':formatResult(_0x3a6ccb,0x8),'realized':formatResult(_0x3f9b9d,0x8),'unrealized':formatResult(_0x3aa76d,0x8),'fees':formatResult(_0xdcb445['fees']+_0x2b6816,0x8),'sells':_0x209b2d[_0x325ed8(0x249)]==_0x325ed8(0x1fd)?_0xdcb445['sells']+0x1:_0xdcb445[_0x325ed8(0x24f)],'buys':_0x209b2d[_0x325ed8(0x249)]=='buy'?_0xdcb445[_0x325ed8(0x2e3)]+0x1:_0xdcb445['buys']};dbCoinResults[_0x325ed8(0x1b8)]('coins')[_0x325ed8(0x2d5)]({'coin':_0x209b2d[_0x325ed8(0x307)]})['assign'](_0x3a885a)[_0x325ed8(0x2d0)]();if(!_0xdeecf1){if(_0x209b2d['fee']&&_0x209b2d[_0x325ed8(0x251)]['currency']==_0x325ed8(0x1db)){const _0x556224=currentCoins['find'](_0x2d80e7=>_0x2d80e7[_0x325ed8(0x307)]=='BNB');if(_0x556224){let _0x4307a5=dbCoinResults[_0x325ed8(0x1b8)]('coins')[_0x325ed8(0x2d5)]({'coin':'BNB'})['value']();_0x3a885a={..._0x4307a5,'number':_0x556224[_0x325ed8(0x177)]},dbCoinResults[_0x325ed8(0x1b8)](_0x325ed8(0x1d0))['find']({'coin':_0x325ed8(0x1db)})[_0x325ed8(0x29e)](_0x3a885a)[_0x325ed8(0x2d0)]();}}}}async function placeOrder(_0x293813){const _0x47acd9=_0x4520ae,_0x5c0e93=config[_0x47acd9(0x25d)]=='market'?_0x47acd9(0x222):_0x47acd9(0x14e);if(lockOrders==ORDERS[_0x47acd9(0x2d3)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x47acd9(0x1ab)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x47acd9(0x202);let _0x4becfe=![];lastOrders=[];for(const _0x2e1cc6 of _0x293813){let _0x4763cd,_0x5e2a6f,_0x19aa65,_0x2bb975,_0x16470c,_0x1c68e3=_0x2e1cc6[_0x47acd9(0x26e)];try{const _0x3def3d=await exchange[_0x47acd9(0x187)](_0x1c68e3);_0x4763cd=_0x2e1cc6[_0x47acd9(0x2be)]?0x1/_0x2e1cc6[_0x47acd9(0x2c9)]:_0x2e1cc6[_0x47acd9(0x2c9)],_0x5e2a6f=_0x3def3d[_0x47acd9(0x16e)],_0x19aa65=_0x3def3d['ask'];_0x2e1cc6['reverse']?(_0x2bb975=_0x2e1cc6[_0x47acd9(0x249)]==_0x47acd9(0x181)?'sell':_0x47acd9(0x181),_0x16470c=Math[_0x47acd9(0x24d)](_0x2e1cc6[_0x47acd9(0x16d)])/_0x4763cd):(_0x2bb975=_0x2e1cc6['side'],_0x16470c=Math['abs'](_0x2e1cc6[_0x47acd9(0x16d)]));_0x5c0e93==_0x47acd9(0x14e)&&(config['ordertype']==_0x47acd9(0x273)&&(_0x4763cd=_0x2bb975==_0x47acd9(0x181)?_0x5e2a6f:_0x19aa65),config[_0x47acd9(0x25d)]==_0x47acd9(0x23e)&&(_0x4763cd=_0x2bb975==_0x47acd9(0x181)?_0x19aa65:_0x5e2a6f));_0x16470c=formatResult(_0x16470c,0x8),_0x4763cd=formatResult(_0x4763cd,0x8);const _0x3248b4=_0x2bb975==_0x47acd9(0x1fd)?config['emojisell']?String[_0x47acd9(0x170)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x47acd9(0x28d)])+'\x20':'',_0x23c22e=_0x5c0e93==_0x47acd9(0x222)?'Market':config[_0x47acd9(0x25d)]==_0x47acd9(0x273)?_0x47acd9(0x16c):_0x47acd9(0x229),_0x29fdf2=(Math[_0x47acd9(0x281)](Math[_0x47acd9(0x291)]()*0x35a4e900)+0x5f5e100)[_0x47acd9(0x1b4)]();lastOrders[_0x47acd9(0x1f7)]({'customId':_0x29fdf2,'symbol':_0x1c68e3,'coin':_0x2e1cc6[_0x47acd9(0x307)],'amount':_0x16470c,'price':_0x4763cd,'side':_0x2bb975,'reverse':_0x2e1cc6[_0x47acd9(0x2be)],'filled':0x0});if(_0x5c0e93==_0x47acd9(0x222))logHistory(_0x47acd9(0x286),''+_0x3248b4+_0x23c22e+_0x47acd9(0x1a1)+_0x1c68e3+'\x20'+_0x2bb975+'\x20#'+formatResult(_0x16470c,0x8)+'\x20@'+formatResult(_0x4763cd,0x8));else logHistory(_0x47acd9(0x286),''+_0x3248b4+_0x23c22e+_0x47acd9(0x1a1)+_0x1c68e3+'\x20'+_0x2bb975+'\x20#'+formatResult(_0x16470c,0x8)+'\x20@'+formatResult(_0x4763cd,0x8));let _0x46b5ca;_0x5c0e93==_0x47acd9(0x222)?_0x2bb975==_0x47acd9(0x181)&&[_0x47acd9(0x15e),_0x47acd9(0x2bf),'Cex','Huobi',_0x47acd9(0x2cf)]['includes'](config[_0x47acd9(0x2bd)])?_0x46b5ca=await exchange[_0x47acd9(0x2e2)](_0x1c68e3,_0x5c0e93,_0x2bb975,_0x16470c,_0x4763cd):_0x46b5ca=await exchange[_0x47acd9(0x2e2)](_0x1c68e3,_0x5c0e93,_0x2bb975,_0x16470c,undefined):_0x46b5ca=await exchange['createOrder'](_0x1c68e3,_0x5c0e93,_0x2bb975,_0x16470c,_0x4763cd);logger[_0x47acd9(0x15a)](_0x47acd9(0x21c)+_0x46b5ca['id']+'\x20|\x20Custom\x20ID:\x20'+_0x29fdf2);const _0x20cddf=lastOrders[_0x47acd9(0x28b)]-0x1;if(_0x20cddf>=0x0&&lastOrders[_0x20cddf][_0x47acd9(0x2c7)]==_0x29fdf2){lastOrders[_0x20cddf][_0x47acd9(0x302)]=_0x46b5ca['id'];if(_0x46b5ca[_0x47acd9(0x29b)])lastOrders[_0x20cddf][_0x47acd9(0x29b)]=_0x46b5ca[_0x47acd9(0x29b)];if(_0x46b5ca[_0x47acd9(0x2e6)])lastOrders[_0x20cddf][_0x47acd9(0x2e6)]=_0x46b5ca[_0x47acd9(0x2e6)];lastOrders[_0x20cddf][_0x47acd9(0x251)]=_0x46b5ca['fee'];}if(config[_0x47acd9(0x227)]!=0x0){let _0x21bb31=null;if(cooldownTracker[_0x47acd9(0x28b)]==config[_0x47acd9(0x227)]-0x1)_0x21bb31=cooldownTracker[_0x47acd9(0x1fe)]();const _0x4c7dad=getTimeStamp();cooldownTracker[_0x47acd9(0x1f7)](_0x4c7dad);if(_0x21bb31){const _0x42fd49=fns[_0x47acd9(0x1ea)](new Date(_0x4c7dad),new Date(_0x21bb31));if(_0x42fd49<cooldownInterval){logHistory(_0x47acd9(0x2e1),'Executed\x20'+config[_0x47acd9(0x227)]+_0x47acd9(0x265)+cooldownInterval/0x3c+_0x47acd9(0x2ec)+cooldownPeriod/(0xe10*0x3e8)+_0x47acd9(0x2f6)),coolingDown=!![];break;}}}}catch(_0xde9189){if(_0xde9189[_0x47acd9(0x1b4)]()[_0x47acd9(0x285)](_0x47acd9(0x1d6)))lastOrders=lastOrders[_0x47acd9(0x235)](_0x3946f7=>_0x3946f7[_0x47acd9(0x26e)]!=_0x1c68e3),logHistory(_0x47acd9(0x2e1),_0x47acd9(0x305)+_0x1c68e3),_0x4becfe=!![];else{if(_0xde9189[_0x47acd9(0x1b4)]()[_0x47acd9(0x285)](_0x47acd9(0x288)))lastOrders=lastOrders['filter'](_0x1e14d6=>_0x1e14d6[_0x47acd9(0x26e)]!=_0x1c68e3),logHistory('error',_0x47acd9(0x1b7)+_0x1c68e3),_0x4becfe=!![];else{if(_0xde9189['toString']()[_0x47acd9(0x285)](_0x47acd9(0x2cb)))lastOrders=lastOrders[_0x47acd9(0x235)](_0x12f742=>_0x12f742[_0x47acd9(0x26e)]!=_0x1c68e3),logHistory(_0x47acd9(0x2e1),_0x47acd9(0x20d)+_0x1c68e3),logger[_0x47acd9(0x15a)](_0xde9189),_0x4becfe=!![];else _0xde9189[_0x47acd9(0x1b4)]()[_0x47acd9(0x285)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders['filter'](_0x4f72b8=>_0x4f72b8[_0x47acd9(0x26e)]!=_0x1c68e3),logHistory(_0x47acd9(0x2e1),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x1c68e3),_0x4becfe=!![]):(lastOrders=lastOrders[_0x47acd9(0x235)](_0xdbfabc=>_0xdbfabc[_0x47acd9(0x26e)]!=_0x1c68e3),await handleError(_0xde9189,_0x47acd9(0x199),_0x1c68e3));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x47acd9(0x28b)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x73a061=config[_0x47acd9(0x25d)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x73a061);}else unlockOrders();_0x4becfe&&config['headless']&&(logHistory(_0x47acd9(0x2e1),'Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x47acd9(0x290),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config['headless']&&logHistory(_0x47acd9(0x2e1),_0x47acd9(0x18a));else lockOrders!=ORDERS[_0x47acd9(0x2d3)]&&(!config[_0x47acd9(0x2b3)]&&(config['ordertype']==_0x47acd9(0x222)?logHistory('error',_0x47acd9(0x1a8)):logHistory(_0x47acd9(0x2e1),_0x47acd9(0x26d))));}}function persistOpenOrders(_0x5d51b5){const _0x29ec03=_0x4520ae,_0x14d9b2={...config,'openOrders':_0x5d51b5};let _0x4fecb5=dbConfig['get'](_0x29ec03(0x1dd))[_0x29ec03(0x2d5)]({'botID':botID})['value']();_0x4fecb5&&dbConfig[_0x29ec03(0x1b8)](_0x29ec03(0x1dd))[_0x29ec03(0x2d5)]({'botID':botID})[_0x29ec03(0x29e)](_0x14d9b2)[_0x29ec03(0x2d0)]();}function restoreOrders(){const _0x246981=_0x4520ae;let _0x370b37;config['openOrders']&&allOpenOrders[_0x246981(0x165)](_0x5e1d09=>{const _0x21d464=_0x246981,_0x255a4c=config[_0x21d464(0x195)][_0x21d464(0x2d5)](_0x57c8fe=>_0x57c8fe[_0x21d464(0x302)]==_0x5e1d09['id']);_0x255a4c&&(lastOrders[_0x21d464(0x1f7)](_0x255a4c),_0x370b37=_0x5e1d09[_0x21d464(0x277)]);});if(lastOrders[_0x246981(0x28b)]>0x0){lockOrders=ORDERS[_0x246981(0x1ab)],validateOrdersState=_0x246981(0x164),allOrdersPlaced=!![];const _0x10c571=new Date()['getTime'](),_0x51fa72=config[_0x246981(0x25d)]==_0x246981(0x222)?validateOrderTimeout*0x3c*0x3e8:config[_0x246981(0x278)]*0x3c*0x3e8;if(_0x370b37+_0x51fa72>_0x10c571){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3dad95=_0x246981;validateOrders(_0x3dad95(0x252));},_0x370b37+_0x51fa72-_0x10c571);}else validateOrders(_0x246981(0x252));}}async function sendMetricsTelegram(){const _0x2ec815=_0x4520ae;if(!coinsLoaded){process[_0x2ec815(0x2d1)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xf1a02=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3eacb9='';if(config[_0x2ec815(0x272)])_0x3eacb9=_0x2ec815(0x234)+config[_0x2ec815(0x2ea)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x3eacb9='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x5f185b=getKPIs(_0x2ec815(0x25c)),_0xeb1ef1=getKPIs(_0x2ec815(0x25f),config[_0x2ec815(0x25f)]),_0x480ea1=getKPIs(_0x2ec815(0x14f)),_0x1c4e87=getKPIs(_0x2ec815(0x301),config['fiat']);_0x3eacb9+=_0x2ec815(0x215),_0x3eacb9+=_0x5f185b[_0x2ec815(0x24b)]+'\x20:\x20'+_0x5f185b['value']+'\x0a',_0x3eacb9+=_0x5f185b[_0x2ec815(0x22c)]+':\x20'+_0x5f185b[_0x2ec815(0x19b)]+'%\x0a',_0x3eacb9+=_0xeb1ef1['leftTxt']+'\x20:\x20'+_0xeb1ef1[_0x2ec815(0x2b9)]+'\x0a',_0x3eacb9+=_0xeb1ef1['rightTxt']+':\x20'+_0xeb1ef1['change']+'%\x0a',_0x3eacb9+=_0x480ea1[_0x2ec815(0x24b)]+':\x20'+_0x480ea1[_0x2ec815(0x2b9)]+'\x20('+config[_0x2ec815(0x25c)]+')\x0a',_0x3eacb9+=_0x480ea1[_0x2ec815(0x22c)]+':\x20'+_0x480ea1[_0x2ec815(0x19b)]+_0x2ec815(0x2db)+config[_0x2ec815(0x25c)]+')\x0a',_0x3eacb9+=_0x1c4e87[_0x2ec815(0x24b)]+':\x20'+_0x1c4e87[_0x2ec815(0x2b9)]+'\x20('+config[_0x2ec815(0x25f)]+')\x0a',_0x3eacb9+=_0x1c4e87[_0x2ec815(0x22c)]+':\x20'+_0x1c4e87['change']+_0x2ec815(0x2db)+config[_0x2ec815(0x25f)]+')\x0a',_0x3eacb9+=_0x2ec815(0x2c0),process[_0x2ec815(0x2d1)]({'telegrammsg':_0x3eacb9},_0x22f546=>{});}async function sendPortfolioTelegram(){const _0x27c37d=_0x4520ae;if(!coinsLoaded||!currentCoins[0x0][_0x27c37d(0x2b6)]){process[_0x27c37d(0x2d1)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x4b7dbc=>{});return;}let _0x298cc1='';if(config['showname'])_0x298cc1=_0x27c37d(0x234)+config[_0x27c37d(0x2ea)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x298cc1='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x298cc1+=_0x27c37d(0x215),_0x298cc1+=_0x27c37d(0x287),_0x298cc1+=_0x27c37d(0x1ca),_0x298cc1+=_0x27c37d(0x287),currentCoins[_0x27c37d(0x165)](_0x259730=>{const _0x3ded74=_0x27c37d;_0x298cc1+=_0x259730[_0x3ded74(0x307)]['padEnd'](0x7)+'|\x20'+formatPad(_0x259730[_0x3ded74(0x2b6)],0x2,0x6)+'|\x20'+formatPad(_0x259730[_0x3ded74(0x1f2)],0x2,0x6)+'|\x20'+formatPad(_0x259730['delta']*0x64,0x2,0x6)+'\x0a';}),_0x298cc1+=_0x27c37d(0x2c0),process[_0x27c37d(0x2d1)]({'telegrammsg':_0x298cc1},_0x2e9561=>{});}function formatPad(_0x48d85c,_0x2d15e8,_0xc9340){const _0x5be16c=_0x4520ae,_0x145d99=formatResultString(_0x48d85c,_0x2d15e8);return _0x145d99?_0x145d99['padStart'](_0xc9340):''[_0x5be16c(0x1ba)](_0xc9340);}function logHistory(_0x4b91d6,_0x24f4e9,_0x4a4564=''){const _0x161d03=_0x4520ae;logger[_0x161d03(0x17c)](''+_0x24f4e9);let _0x136e6e={'time':getTimeStamp(),'type':_0x4b91d6,'event':_0x24f4e9};dbLogs[_0x161d03(0x1b8)](_0x161d03(0x309))[_0x161d03(0x1f7)](_0x136e6e)[_0x161d03(0x2d0)]();if(_0x4a4564=='')_0x4a4564=_0x24f4e9;proxyEmit(_0x161d03(0x23a),{'log':_0x136e6e,'summary':_0x4a4564}),process[_0x161d03(0x2d1)]({'telegram':{..._0x136e6e,'botname':config[_0x161d03(0x2ea)],'showname':config[_0x161d03(0x272)]}},_0x194163=>{});}function emitHistory(_0x47c758={}){const _0x7e758c=_0x4520ae;Object[_0x7e758c(0x159)](_0x47c758)[_0x7e758c(0x28b)]==0x0&&(_0x47c758={'type':[_0x7e758c(0x286),_0x7e758c(0x23a)],'event':'','page':0x1});if(_0x47c758[_0x7e758c(0x2c3)]['includes'](_0x7e758c(0x23a)))_0x47c758[_0x7e758c(0x2c3)][_0x7e758c(0x19f)](_0x47c758[_0x7e758c(0x2c3)][_0x7e758c(0x1a4)](_0x7e758c(0x23a)),0x1,_0x7e758c(0x2e1),_0x7e758c(0x243),'success');if(dbLogs[_0x7e758c(0x304)]('logs')[_0x7e758c(0x2b9)]()){let _0x2fb26f=dbLogs[_0x7e758c(0x1b8)]('logs')['filter'](_0xc2e8fb=>{const _0x28e93e=_0x7e758c;if(_0x47c758[_0x28e93e(0x2c3)][_0x28e93e(0x28b)]==0x0)return![];else return _0x47c758['type'][_0x28e93e(0x285)](_0xc2e8fb[_0x28e93e(0x2c3)]);})['filter'](_0xd85f24=>{const _0x52d1e8=_0x7e758c;if(_0x47c758[_0x52d1e8(0x23a)]=='')return!![];else return _0xd85f24[_0x52d1e8(0x23a)][_0x52d1e8(0x1e9)]()[_0x52d1e8(0x285)](_0x47c758[_0x52d1e8(0x23a)]['toLowerCase']());})[_0x7e758c(0x233)]('time'),_0x186cf3=_0x2fb26f['value']()[_0x7e758c(0x28b)];_0x2fb26f=_0x2fb26f[_0x7e758c(0x2be)]()[_0x7e758c(0x2f2)]((_0x47c758[_0x7e758c(0x15c)]-0x1)*logPageSize,_0x47c758[_0x7e758c(0x15c)]*logPageSize-0x1)[_0x7e758c(0x2be)]()['value'](),proxyEmit(_0x7e758c(0x1f6),{'logs':_0x2fb26f,'total':_0x186cf3});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x245a0f){const _0xb4d46a=_0x4520ae;if(dbLogs['has'](_0xb4d46a(0x309))[_0xb4d46a(0x2b9)]()){const _0x2071e2=dbLogs[_0xb4d46a(0x1b8)]('logs')[_0xb4d46a(0x233)](_0xb4d46a(0x1fa))[_0xb4d46a(0x235)](_0x22b79f=>{const _0x10ea4d=_0xb4d46a;return _0x22b79f[_0x10ea4d(0x2c3)]==_0x10ea4d(0x286);})['value']();dbLogs[_0xb4d46a(0x1b8)](_0xb4d46a(0x309))['remove']()['write'](),dbLogs[_0xb4d46a(0x1b8)]('logs')[_0xb4d46a(0x29e)](_0x2071e2)[_0xb4d46a(0x2d0)](),emitHistory(_0x245a0f);}}async function pauseBot(_0x1c965a=pauseBotIntervalShort,_0x145b16){const _0x244e4b=_0x4520ae,_0x28b90d=new Date()[_0x244e4b(0x2b2)]();if(!lastErrorShown||_0x28b90d-lastErrorShown>=_0x1c965a){lastErrorShown=_0x28b90d;!lastBotPause?(lastBotPause=_0x28b90d,consecutivePauses=0x1):(_0x28b90d-lastBotPause-_0x1c965a<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x244e4b(0x2e1),_0x145b16+pauseBotMsg),_0x1c965a=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x28b90d);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x1c965a),botPaused=![],reset(!![]);}}}async function killBot(){const _0x48a5a8=_0x4520ae;botPaused=!![],await sleep(0x3e8),process[_0x48a5a8(0x2d1)]({'stop':_0x48a5a8(0x236)},_0x59b1f6=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x574a40,_0x37a8cf){const _0x17736f=_0x4520ae;if(botPaused)return;const _0x17aac3=config[_0x17736f(0x2bd)]||_0x17736f(0x2ac);if(_0x37a8cf)logger[_0x17736f(0x15a)](_0x17736f(0x2da)+_0x37a8cf);const _0x460841=()=>{const _0x333b25=_0x17736f;loading[_0x333b25(0x2e1)]=!![],emitLoadingProgress();};if(_0x574a40[_0x17736f(0x1b4)]()['includes'](_0x17736f(0x2e4)))logHistory(_0x17736f(0x2e1),_0x17aac3+_0x17736f(0x270)),_0x460841();else{if(_0x574a40[_0x17736f(0x1b4)]()[_0x17736f(0x285)](_0x17736f(0x190)))logHistory(_0x17736f(0x2e1),_0x17aac3+_0x17736f(0x299)),_0x460841();else _0x574a40[_0x17736f(0x1b4)]()[_0x17736f(0x285)]('AuthenticationError')?(logHistory(_0x17736f(0x2e1),_0x17aac3+_0x17736f(0x27c)),logHistory(_0x17736f(0x2e1),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x460841()):await handleError(_0x574a40,null);}}async function handleError(_0x1906f0,_0x5c3c37,_0x53289b=''){const _0x526b21=_0x4520ae;if(botPaused)return;let _0x493442;const _0xf402c7=config[_0x526b21(0x2bd)]||_0x526b21(0x2ac);if(_0x5c3c37)logger[_0x526b21(0x15a)](_0x526b21(0x2da)+_0x5c3c37);if(_0x1906f0[_0x526b21(0x1b4)]()['includes'](_0x526b21(0x188)))_0x493442=_0xf402c7+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger[_0x526b21(0x15a)](_0x493442+'\x20>\x20details:',_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0[_0x526b21(0x1b4)]()['includes'](_0x526b21(0x1b9)))_0x493442=_0xf402c7+_0x526b21(0x23f),logger[_0x526b21(0x15a)](_0x493442+_0x526b21(0x1a5),_0x1906f0['toString']()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0['toString']()['includes'](_0x526b21(0x2a2))||_0x1906f0['toString']()[_0x526b21(0x285)]('OnMaintenance'))_0x493442=_0xf402c7+_0x526b21(0x205),logger['debug'](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x1e3)))_0x493442=_0xf402c7+_0x526b21(0x260),logger[_0x526b21(0x15a)](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0['toString']()[_0x526b21(0x285)](_0x526b21(0x231)))_0x493442=_0xf402c7+_0x526b21(0x15f),logger['debug'](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0['toString']()[_0x526b21(0x1e9)]()[_0x526b21(0x285)](_0x526b21(0x277))||_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x1e9)]()['includes'](_0x526b21(0x29d)))_0x493442=_0x526b21(0x27f),logger[_0x526b21(0x15a)](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)]('InvalidNonce'))_0x493442=_0xf402c7+_0x526b21(0x1d1),logger['debug'](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0 instanceof ccxt['NetworkError'])_0x493442=_0xf402c7+'\x20network\x20error',logger[_0x526b21(0x15a)](_0x493442+_0x526b21(0x1a5),_0x1906f0[_0x526b21(0x1b4)]()),await pauseBot(undefined,_0x493442);else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x2e4)))logHistory(_0x526b21(0x2e1),_0xf402c7+_0x526b21(0x26f)),logHistory(_0x526b21(0x2e1),_0x526b21(0x217)),await killBot();else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x190)))logHistory(_0x526b21(0x2e1),_0xf402c7+_0x526b21(0x2eb)),logHistory(_0x526b21(0x2e1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x253)))logHistory('error',_0xf402c7+_0x526b21(0x1fb)),logHistory(_0x526b21(0x2e1),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x1a9)))logHistory(_0x526b21(0x2e1),_0xf402c7+_0x526b21(0x2e5)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x1906f0[_0x526b21(0x1b4)]()[_0x526b21(0x285)](_0x526b21(0x1a7)))logHistory(_0x526b21(0x2e1),_0x526b21(0x22f)+_0x53289b);else{if(_0x1906f0 instanceof ccxt[_0x526b21(0x2b0)]){logHistory(_0x526b21(0x2e1),_0xf402c7+_0x526b21(0x1c8)),logger[_0x526b21(0x15a)](_0x526b21(0x303),_0x1906f0);if(_0x53289b)logger[_0x526b21(0x15a)](_0x526b21(0x2f0)+_0x53289b);}else{_0x493442='Unknown\x20error\x20occured',logger[_0x526b21(0x15a)](_0x493442+_0x526b21(0x1a5),_0x1906f0);if(_0x53289b)logger['debug'](_0x526b21(0x2f0)+_0x53289b);await pauseBot(undefined,_0x493442);}}}}}}}}}}}}}}}async function withRetry(_0x4f1cd1,_0x3e2cee){const _0xc0319b=_0x4520ae;let _0x486501=![],_0x5da71e=0x0,_0x1d4013,_0x3c3a7a;while(_0x5da71e<maxRetries){try{_0x1d4013=await _0x3e2cee();break;}catch(_0x1477c9){_0x3c3a7a=_0x1477c9,!_0x486501?(_0x486501=!![],logger[_0xc0319b(0x15a)]('RETRY\x20-\x20Error\x20in\x20'+_0x4f1cd1+':',_0x1477c9[_0xc0319b(0x1b4)]())):await sleep(retryInterval);}_0x5da71e++;}if(_0x5da71e==0x0)return _0x1d4013;if(_0x5da71e>=maxRetries)throw _0x3c3a7a;else return logger['debug'](_0xc0319b(0x257)+_0x5da71e+_0xc0319b(0x2af)),_0x1d4013;}function formatResult(_0xc651d6,_0x37f908){const _0x97fe9f=_0x4520ae;return parseFloat(_0xc651d6[_0x97fe9f(0x230)](_0x37f908));}function formatResultTruncate(_0x45dad1,_0x572bd2){const _0x1409ae=_0x4520ae;let _0x18de6c=formatResultString(_0x45dad1,0xa),_0x2651ea=_0x18de6c[_0x1409ae(0x1a4)]('.');return _0x2651ea!=-0x1&&(_0x18de6c=_0x18de6c[_0x1409ae(0x2f2)](0x0,_0x2651ea+_0x572bd2+0x1)),Number(_0x18de6c);}function formatResultString(_0xb1a7c7,_0x5e02e9){const _0x259fc1=_0x4520ae;let _0x142ffd;if(!(''+_0xb1a7c7)[_0x259fc1(0x285)]('e'))_0x142ffd=+(Math[_0x259fc1(0x20f)](_0xb1a7c7+'e+'+_0x5e02e9)+'e-'+_0x5e02e9);else{let _0x378803=(''+_0xb1a7c7)[_0x259fc1(0x2cc)]('e'),_0x43ed01='';+_0x378803[0x1]+_0x5e02e9>0x0&&(_0x43ed01='+'),_0x142ffd=+(Math['round'](+_0x378803[0x0]+'e'+_0x43ed01+(+_0x378803[0x1]+_0x5e02e9))+'e-'+_0x5e02e9);}return Number(_0x142ffd)['toFixed'](_0x5e02e9);}function getServerTime(){const _0x328b7f=_0x4520ae,_0x4815f2=new Date();return _0x4815f2[_0x328b7f(0x153)]()+'/'+(_0x4815f2[_0x328b7f(0x213)]()+0x1)['toString']()[_0x328b7f(0x1ba)](0x2,'0')+'/'+_0x4815f2[_0x328b7f(0x24e)]()[_0x328b7f(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0x4815f2[_0x328b7f(0x21f)]()[_0x328b7f(0x1b4)]()[_0x328b7f(0x1ba)](0x2,'0')+':'+_0x4815f2[_0x328b7f(0x2ba)]()[_0x328b7f(0x1b4)]()[_0x328b7f(0x1ba)](0x2,'0')+':'+_0x4815f2['getSeconds']()[_0x328b7f(0x1b4)]()[_0x328b7f(0x1ba)](0x2,'0');}function getTimeStamp(){const _0x40ea29=_0x4520ae,_0x4b0284=shiftedTime();return _0x4b0284[_0x40ea29(0x153)]()+'/'+(_0x4b0284[_0x40ea29(0x213)]()+0x1)[_0x40ea29(0x1b4)]()[_0x40ea29(0x1ba)](0x2,'0')+'/'+_0x4b0284[_0x40ea29(0x24e)]()[_0x40ea29(0x1b4)]()['padStart'](0x2,'0')+'\x20'+_0x4b0284[_0x40ea29(0x21f)]()[_0x40ea29(0x1b4)]()[_0x40ea29(0x1ba)](0x2,'0')+':'+_0x4b0284[_0x40ea29(0x2ba)]()['toString']()[_0x40ea29(0x1ba)](0x2,'0')+':'+_0x4b0284[_0x40ea29(0x1aa)]()[_0x40ea29(0x1b4)]()[_0x40ea29(0x1ba)](0x2,'0');}function getDate(){const _0x369d6f=_0x4520ae,_0x2a396e=shiftedTime();return _0x2a396e[_0x369d6f(0x153)]()+'/'+(_0x2a396e['getMonth']()+0x1)['toString']()[_0x369d6f(0x1ba)](0x2,'0')+'/'+_0x2a396e['getDate']()[_0x369d6f(0x1b4)]()[_0x369d6f(0x1ba)](0x2,'0');}function getHour(){const _0xbb1743=_0x4520ae,_0x30766b=shiftedTime();return _0x30766b[_0xbb1743(0x21f)]()[_0xbb1743(0x1b4)]()[_0xbb1743(0x1ba)](0x2,'0');}function sleep(_0x3af67f){return new Promise(_0x41ec89=>setTimeout(_0x41ec89,_0x3af67f));}function shiftedTime(){const _0x3d4718=_0x4520ae,_0xfb78a4=new Date();let _0x3c9021=_0xfb78a4;if(config&&config[_0x3d4718(0x237)]!==0x0)_0x3c9021=fns['add'](_0xfb78a4,{'hours':config[_0x3d4718(0x237)]});return _0x3c9021;}function timer(_0x138cae){const _0x178323=_0x4520ae,_0x25df67=new Date();!lasttime?console['log'](getTimeStamp()+_0x178323(0x1b5),_0x138cae,_0x25df67):console[_0x178323(0x1e4)](getTimeStamp()+_0x178323(0x1b5),_0x138cae,(_0x25df67-lasttime)/0x3e8),lasttime=_0x25df67;}