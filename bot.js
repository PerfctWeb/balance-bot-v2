const _0x2f06ad=_0x5d0e;(function(_0x100ef1,_0x11f46e){const _0x536b9c=_0x5d0e,_0x4ece8f=_0x100ef1();while(!![]){try{const _0x3b1677=-parseInt(_0x536b9c(0x28a))/0x1*(-parseInt(_0x536b9c(0x353))/0x2)+-parseInt(_0x536b9c(0x1fa))/0x3*(parseInt(_0x536b9c(0x2d5))/0x4)+parseInt(_0x536b9c(0x2b2))/0x5+parseInt(_0x536b9c(0x1f8))/0x6+-parseInt(_0x536b9c(0x2e0))/0x7+-parseInt(_0x536b9c(0x2f4))/0x8+parseInt(_0x536b9c(0x2f9))/0x9;if(_0x3b1677===_0x11f46e)break;else _0x4ece8f['push'](_0x4ece8f['shift']());}catch(_0x1b0642){_0x4ece8f['push'](_0x4ece8f['shift']());}}}(_0x494b,0x52e45));const _0x2252d2=function(){let _0x4034be=!![];return function(_0x5d37b4,_0x3d35eb){const _0x326ab9=_0x4034be?function(){const _0x11c6c7=_0x5d0e;if(_0x3d35eb){const _0x1354c9=_0x3d35eb[_0x11c6c7(0x359)](_0x5d37b4,arguments);return _0x3d35eb=null,_0x1354c9;}}:function(){};return _0x4034be=![],_0x326ab9;};}(),_0x16b306=_0x2252d2(this,function(){const _0x1bc4eb=_0x5d0e;return _0x16b306[_0x1bc4eb(0x2e2)]()[_0x1bc4eb(0x2b7)](_0x1bc4eb(0x207))[_0x1bc4eb(0x2e2)]()['constructor'](_0x16b306)[_0x1bc4eb(0x2b7)](_0x1bc4eb(0x207));});_0x16b306();'use strict';function _0x494b(){const _0x4288b4=['\x20blocked\x20your\x20API','padStart','colorscheme','total','has','toFixed','entries','freeze','getPortfolio','yyyy-MM-dd\x27T\x27HH:mm:ss','currency','/USD','Reset\x20|\x20','red_yellow_blue','none','join','Invalid\x20symbol:\x20','length','./logs/','\x20API\x20secret\x20is\x20invalid','1445424mZerTI','Cex','1614yktEVa','function','threshold','format','getStartingBalances','botname','UNLOCKING','TUSD','\x20|\x20exchange:\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','defaults','toLowerCase','error','(((.+)+)+)+$','argv','get','ORDERS.LOCKED','min','sendPortfolioTelegram','assign','Limit\x20(low-margin)','Headless:\x20','settings','exchange','Order(s)\x20not\x20validated\x20after\x20','fromCodePoint','target','\x20portfolio:</b>\x20\x0a\x0a','secure','<pre>','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','buys','round','onepagemode','Cryptocom','progress','cooldown','sort','recreateCoinResults()','reverse','ongoing','changes','Pausing\x20for\x20','Bot\x20','starting-balances','autoliquidity','rightTxt','Waited\x20','\x20order:\x20','cancelOrders()','realized','configuration','Fee\x20discount\x20refund\x20detected:\x20','exchange\x20reloaded','running','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','./version.json','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','time','spot','Huobi','loading-canceled','RateLimitExceeded','\x20minutes\x20-\x20','path','shift','\x20-\x20bot\x20not\x20started','USD','\x20:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','portfolio','apiPassword','-performance.json','bot-','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','<b>Bot\x20','showname','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','recent20','lowdb/adapters/FileSync','full','-------------------------------\x0a','usd','balancing\x20resumed','includes','excluded','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','orderId','BNB','Unknown\x20error\x20occured','API-key\x20format\x20invalid','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','EUR','\x20not\x20available','add','split','value','USDC','storeFiat','highest','ETH','random','slice','orderstatus','Initializing\x20coin\x20results','placeOrder','fetchClosedOrders','concat','\x20orders\x20in\x20less\x20than\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','************','Executed\x20','ordertype','Failed\x20to\x20load\x20coin\x20data\x20for\x20','basecoin','storeConfiguration','fiat','existsSync','OrderNotFound','symbol','push','leftTxt','startdate','coin-loading-progress','date','closed','basecoinvalue','balancing\x20resumes\x20when\x20cooldown\x20ends','trade','Market','fetchTicker','isEqual','kill','padEnd','getDate','restart','version','\x20|\x20','no\x20open\x20orders','getTime','password','sells','1007RuPmsN','loadSymbols()','performance','cloneDeep','\x20hour','args','limits','watchOrders','startprice','buy','watchTransactions()','toggleBotMode','price','fetchTickers','number','initclient','getCoinNumber()','storeHeadless','fetchOpenOrders','\x20>\x20','fetchTickers()','set','added','limit-high','bb-settings.json','data','keys','differenceInSeconds','Saving\x20configuration','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','-events.json','percentage','\x20value','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','toUpperCase','0\x20-\x20EXECUTION:\x20','logs','timestamp','status','createOrder','1107875xACWaN','2.3.5','OnMaintenance',',\x20must\x20be\x20a\x203\x20digit\x20number','mkdirSync','search',':\x20timer\x20>','getAllOrders()','net-fiat','watchTrades()','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','BTC','enabled','\x20minutes','filter','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','datetime','active','ORDERS.UNLOCKED','message','timeshift','emojisell','Manual\x20balancing\x20required','final','/EUR','event','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','getFullYear','watchTrades','string','privateKey','\x20>\x20[DEBUG]\x20','coins','amount','1332atWNAp','side','parse','fees','cancel','Error\x20while\x20deleting\x20files:\x20','replace','sortBy','delta','last','remove','1846005tvraaZ','parseISO','toString','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','apiKey','bot','cancelLoading','startnumber','deleteHistoryAlerts','bots','event-history','Error\x20details:','test','abs','InvalidOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','sell','***','Error:\x20Invalid\x20argument\x20','getMinutes','1802344TJgBWx','offset','filled','MIN_NOTIONAL','market','166923NefLQK','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','getPortfolio(1)','netoffset','ExchangeError','sha256','debug','cost','fetchBalance','\x20closed\x20the\x20connection','apiSecret','find','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','starting-balance-','LOCKED','hybrid-crypto-js','net-basecoin','Crypt','./config/','Net\x20effect','date-fns','customId','Order\x20is\x20invalid:\x20','/backup/','average','canceled','\x20|\x20highest\x20fee:\x20','\x20metrics:</b>\x20\x0a\x0a','/output-000.log','</pre>','yyyy/MM/dd','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','bb-secure.json','getMonth','send','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','BNB/','substring','RequestTimeout','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','Exchange','1\x20-\x20FILLED\x20unknown\x20order:\x20','\x20change','2\x20-\x20Handled\x20open\x20orders','Bybit','log','Transaction\x20detection\x20blocked','Exception\x20thrown\x20in\x20','change','<b>','Resetting\x20bot\x20history','uncaughtException','ccxt','-results.json','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','Portfolio\x20change\x20detected:\x20','stringify','success','createWriteStream','max','getSeconds','showConfig','distribution','\x20exchange\x20error','splice','Net\x20','\x20-\x20pausing\x20bot\x20for\x20','change24h','breakeven','AuthenticationError','\x20|\x20lock\x20orders:\x20',':\x20Bot\x20','getPortfolio(2)','eur','cancelOrder','util','headless','initial','open','lowdb','pro','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','getCoins()','unlinkSync','remainingSymbols','exchanges','valid','Uncaught\x20Exception:','must\x20be\x20greater\x20than\x20minimum\x20amount','fee','1046Dluwrc','liquidity','timeout','order','type','ExchangeNotAvailable','apply','getHours','1\x20-\x20FILLED\x20known\x20order:\x20','removed','openOrders','USDP','limit','write','BUSD','No\x20more\x20open\x20orders\x20-\x20','page','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','2\x20-\x20Orders\x20unlocked','findIndex','configuration-stored','Cooldown\x20ended\x20-\x20balancing\x20resumed','ORDERS.UNLOCKING','ask','USDT','PermissionDenied','decrypt','-config.json','.json','emojibuy','forEach','initTickers()','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','UNLOCKED','ticker','coin','exec'];_0x494b=function(){return _0x4288b4;};return _0x494b();}const ccxt=require(_0x2f06ad(0x32d)),low=require(_0x2f06ad(0x348)),FileSync=require(_0x2f06ad(0x24b)),fs=require('fs'),fns=require(_0x2f06ad(0x30d)),Crypt=require(_0x2f06ad(0x308))[_0x2f06ad(0x30a)],util=require(_0x2f06ad(0x344)),argv=require('yargs/yargs')(process['argv'][_0x2f06ad(0x262)](0x2))[_0x2f06ad(0x208)],path=require(_0x2f06ad(0x23b));let exchange;global[_0x2f06ad(0x1e1)]={},global[_0x2f06ad(0x329)]={};const usdBasecoins=[_0x2f06ad(0x23e),_0x2f06ad(0x361),_0x2f06ad(0x201),_0x2f06ad(0x1d7),_0x2f06ad(0x25d),_0x2f06ad(0x35e)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2f06ad(0x1eb)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2f06ad(0x1e0)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x2f06ad(0x33b)+pauseBotIntervalLong/0xea60+_0x2f06ad(0x2bf),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x2f06ad(0x233))[_0x2f06ad(0x284)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x2f06ad(0x2ec)](botID)&&(console[_0x2f06ad(0x326)](_0x2f06ad(0x2f2)+botID+_0x2f06ad(0x2b5)),killBot());const userID=process[_0x2f06ad(0x208)][0x3]||'',configpath=userID?_0x2f06ad(0x30b)+userID+'/':_0x2f06ad(0x30b),logspath=userID?_0x2f06ad(0x1f6)+userID+'/':_0x2f06ad(0x1f6),loggerfile=fs[_0x2f06ad(0x333)](logspath+_0x2f06ad(0x315),{'flags':'a'});!fs[_0x2f06ad(0x271)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x2f06ad(0x271)](logspath)&&fs[_0x2f06ad(0x2b6)](logspath);const configfile=configpath+_0x2f06ad(0x244)+botID+_0x2f06ad(0x1da),logfile=configpath+_0x2f06ad(0x244)+botID+_0x2f06ad(0x2a8),performancefile=configpath+'bot-'+botID+_0x2f06ad(0x243),coinresultsfile=configpath+_0x2f06ad(0x244)+botID+_0x2f06ad(0x32e),settingsfile=configpath+_0x2f06ad(0x2a2),securefile=configpath+_0x2f06ad(0x319),configbackuppath=configpath+_0x2f06ad(0x310),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x2f06ad(0x360)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2f06ad(0x204)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2f06ad(0x204)]({'bot':[],'version':serverversion})[_0x2f06ad(0x360)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2f06ad(0x204)]({'coins':[],'version':serverversion})[_0x2f06ad(0x360)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2f06ad(0x2fe),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x36c2b6=>{const _0x3c8dc1=_0x2f06ad;console[_0x3c8dc1(0x326)](_0x36c2b6);},'simple':_0x2af9f0=>{const _0x46a87b=_0x2f06ad;console[_0x46a87b(0x326)](_0x2af9f0),loggerfile[_0x46a87b(0x360)](util[_0x46a87b(0x1fd)](_0x2af9f0)+'\x0a');},'full':async(_0x3b26da,_0x391f14='')=>{const _0x510791=_0x2f06ad;let _0x5436dc;if(config[_0x510791(0x247)])_0x5436dc=getTimeStamp()+':\x20'+config[_0x510791(0x1ff)]+_0x510791(0x29d)+_0x3b26da;else _0x5436dc=getTimeStamp()+_0x510791(0x340)+botID+'\x20>\x20'+_0x3b26da;console[_0x510791(0x326)](_0x5436dc),loggerfile[_0x510791(0x360)](util['format'](_0x5436dc)+'\x0a'),_0x391f14&&(console[_0x510791(0x326)](_0x391f14),loggerfile[_0x510791(0x360)](util[_0x510791(0x1fd)](_0x391f14)+'\x0a'));},'debug':async(_0x280556,_0x5636e6='')=>{const _0x598b72=_0x2f06ad;let _0x1d9185;if(config[_0x598b72(0x247)])_0x1d9185=getTimeStamp()+':\x20'+config[_0x598b72(0x1ff)]+_0x598b72(0x2d2)+_0x280556;else _0x1d9185=getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20[DEBUG]\x20'+_0x280556;if(debugging)console[_0x598b72(0x326)](_0x1d9185);loggerfile[_0x598b72(0x360)](util[_0x598b72(0x1fd)](_0x1d9185)+'\x0a');if(_0x5636e6){if(debugging)console[_0x598b72(0x326)](_0x5636e6);loggerfile[_0x598b72(0x360)](util[_0x598b72(0x1fd)](_0x5636e6)+'\x0a');}}};process['on'](_0x2f06ad(0x32c),function(_0x16aecd){const _0x49cb2e=_0x2f06ad;logHistory('error',_0x49cb2e(0x252)),logger['debug'](_0x49cb2e(0x350),_0x16aecd);});settings[_0x2f06ad(0x2c6)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0x2f06ad(0x21b)]!=config[_0x2f06ad(0x21b)]&&updateOnepagemode(settings[_0x2f06ad(0x21b)]);process[_0x2f06ad(0x31b)]({'started':_0x2f06ad(0x230)},_0x1aa8f6=>{}),initializeProcessListeners();function proxyEmit(_0x47070e,_0x17ef7f=null){process['send']({'function':_0x47070e,'args':_0x17ef7f},_0x3b8fdf=>{});}function initializeProcessListeners(){const _0x57caee=_0x2f06ad;process['on'](_0x57caee(0x2c5),_0x349069=>{const _0x4db099=_0x57caee;switch(Object[_0x4db099(0x2a4)](_0x349069)[0x0]){case _0x4db099(0x2c6):_0x349069[_0x4db099(0x2c6)]!=undefined&&(settings['timeshift']=_0x349069['timeshift'],updateTimeshift(settings[_0x4db099(0x2c6)]));break;case _0x4db099(0x21b):_0x349069[_0x4db099(0x21b)]!=undefined&&(settings[_0x4db099(0x21b)]=_0x349069['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case _0x4db099(0x2e9):_0x349069[_0x4db099(0x2e9)]!=undefined&&(bots=JSON[_0x4db099(0x2d7)](_0x349069['bots']),proxyEmit('bots',bots));break;case _0x4db099(0x1fb):switch(_0x349069[_0x4db099(0x1fb)]){case _0x4db099(0x299):initclient();break;case _0x4db099(0x295):toggleBotMode();break;case'emitHistory':emitHistory(_0x349069[_0x4db099(0x28f)]);break;case _0x4db099(0x2e8):deleteHistoryAlerts(_0x349069[_0x4db099(0x28f)]);break;case _0x4db099(0x1ec):getPortfolio(_0x349069[_0x4db099(0x28f)]);break;case _0x4db099(0x26f):storeConfiguration(_0x349069['args']);break;case _0x4db099(0x29b):storeHeadless(_0x349069[_0x4db099(0x28f)]);break;case _0x4db099(0x25e):storeFiat(_0x349069['args']);break;case'resetHistory':resetHistory();break;case _0x4db099(0x1fe):getStartingBalances(getNormalizedPerformance());break;case _0x4db099(0x265):placeOrder(_0x349069[_0x4db099(0x28f)]);break;case _0x4db099(0x2e6):cancelLoading();break;case _0x4db099(0x336):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x4db099(0x20c):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x57828b=![]){const _0x26e2d5=_0x2f06ad;logger[_0x26e2d5(0x2ff)](_0x26e2d5(0x1f0)+(_0x57828b?_0x26e2d5(0x22f):'exchange\x20not\x20reloaded')+_0x26e2d5(0x202)+config[_0x26e2d5(0x211)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x57828b)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x26e2d5(0x2e4)]!=''&&config[_0x26e2d5(0x2e4)]!=_0x26e2d5(0x2f1)){loadingProgress=0x0;if(_0x57828b){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x56bb3a){handleErrorNoStop(_0x56bb3a,_0x26e2d5(0x28b));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x17e6c9=await getCoins();[currentCoins,currentCoinsAll]=_0x17e6c9,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x26e2d5(0x2ff)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x26e2d5(0x1f5)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x3b0aa0){await handleError(_0x3b0aa0,'stopExchange()');}}async function reloadExchange(){const _0x3f2dcc=_0x2f06ad;while(lockOrders!=ORDERS[_0x3f2dcc(0x1e0)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3f2dcc(0x2ff)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x4575d1=config[_0x2f06ad(0x211)],_0x606270=config[_0x2f06ad(0x2e4)],_0x544125=config['apiSecret'],_0x52fedb=config['apiPassword']){const _0xe0087c=_0x2f06ad;exchange&&await stopExchange();!supportedExchanges()[_0xe0087c(0x250)](_0x4575d1)&&(logHistory(_0xe0087c(0x206),_0xe0087c(0x245)+_0x4575d1+'\x20exchange'),killBot());const _0x3aab0a=ccxt[_0xe0087c(0x349)][_0x4575d1['toLowerCase']()];exchange=new _0x3aab0a({'apiKey':_0x606270,'secret':_0x544125,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xe0087c(0x236)}});if(_0x52fedb)exchange['password']=_0x52fedb;}function setStableCoins(){const _0x1eef5f=_0x2f06ad;let _0x4538b0=config['basecoin']=='ETH'?_0x1eef5f(0x260):'BTC',_0x2c62ca=!allSymbols[_0x1eef5f(0x250)](_0x4538b0+_0x1eef5f(0x1ef))?_0x1eef5f(0x1d7):_0x1eef5f(0x23e),_0x150c71=!allSymbols[_0x1eef5f(0x250)](_0x4538b0+_0x1eef5f(0x2ca))?_0x2c62ca:'EUR';stablecoins={'eur':{'coin':''+_0x4538b0+_0x150c71,'symbol':_0x4538b0+'/'+_0x150c71},'usd':{'coin':''+_0x4538b0+_0x2c62ca,'symbol':_0x4538b0+'/'+_0x2c62ca}};}async function initwsCcxt(){const _0x360755=_0x2f06ad;initCycle++;const _0x583fda=initCycle;let _0x31bbfb=[];config[_0x360755(0x241)][_0x360755(0x1dd)](_0x43133d=>{const _0x47a418=_0x360755;if(!_0x43133d[_0x47a418(0x251)]&&_0x43133d['coin']!=config[_0x47a418(0x26e)])_0x31bbfb[_0x47a418(0x274)](_0x43133d[_0x47a418(0x273)]);});if(!_0x31bbfb[_0x360755(0x250)](stablecoins['eur'][_0x360755(0x273)]))_0x31bbfb[_0x360755(0x274)](stablecoins['eur']['symbol']);if(!_0x31bbfb[_0x360755(0x250)](stablecoins[_0x360755(0x24e)][_0x360755(0x273)]))_0x31bbfb[_0x360755(0x274)](stablecoins[_0x360755(0x24e)]['symbol']);if(config[_0x360755(0x211)]['startsWith']('Binance')){if(!_0x31bbfb['includes'](_0x360755(0x31d)+config[_0x360755(0x26e)]))_0x31bbfb[_0x360755(0x274)](_0x360755(0x31d)+config[_0x360755(0x26e)]);}loadCoins(_0x31bbfb),_0x31bbfb=validateSymbols(_0x31bbfb);const _0x44e2ce=async _0x3cd20c=>{const _0x3097c6=_0x360755;let _0x559837;try{const _0x2a7ee2=await getTickers(_0x3cd20c);Object[_0x3097c6(0x1ea)](_0x2a7ee2)[_0x3097c6(0x1dd)](_0x3cd2a8=>{const _0x2e7bf1=_0x3097c6;_0x559837=_0x3cd2a8[0x1]['symbol'],global[_0x2e7bf1(0x1e1)][noslash(_0x559837)]=_0x3cd2a8[0x1][_0x2e7bf1(0x2de)],global[_0x2e7bf1(0x329)][_0x559837]=_0x3cd2a8[0x1][_0x2e7bf1(0x2a9)];});}catch(_0xf73bb9){await handleError(_0xf73bb9,_0x3097c6(0x1de),_0x559837);}},_0xe3d52=async _0x4bb985=>{const _0x3ac934=_0x360755;while(initCycle==_0x583fda){if(!botPaused)try{const _0x4033d9=await exchange['watchTrades'](_0x4bb985);global['ticker'][noslash(_0x4033d9[0x0][_0x3ac934(0x273)])]=_0x4033d9[0x0][_0x3ac934(0x296)],await sleep(0x3e8);}catch(_0x2476fd){if(!exchangeStopped)await handleError(_0x2476fd,_0x3ac934(0x2bb),_0x4bb985);}else await sleep(0x64);}},_0x1bfa2c=async _0x3abdbc=>{const _0x73cd64=_0x360755;while(initCycle==_0x583fda){if(!botPaused){let _0x580591;try{await sleep(0x3c*0x3e8);const _0x3f0e4d=await getTickers(_0x3abdbc);Object[_0x73cd64(0x1ea)](_0x3f0e4d)[_0x73cd64(0x1dd)](_0x525913=>{const _0x9f91b2=_0x73cd64;_0x580591=_0x525913[0x1][_0x9f91b2(0x273)],global[_0x9f91b2(0x329)][_0x580591]=_0x525913[0x1][_0x9f91b2(0x2a9)];});}catch(_0x576c5d){if(!exchangeStopped)await handleError(_0x576c5d,_0x73cd64(0x29e),_0x580591);}}else await sleep(0x64);}},_0x3347a1=async _0x31fc9f=>{const _0x886d7e=_0x360755;while(initCycle==_0x583fda){if(!botPaused)try{const _0x60d39d=await exchange[_0x886d7e(0x291)](_0x31fc9f);initCycle==_0x583fda&&_0x60d39d[_0x886d7e(0x1dd)](_0x2eb476=>{updateNumberCoinsCcxt(_0x2eb476);});}catch(_0x3e1d52){if(!exchangeStopped)await handleError(_0x3e1d52,'watchOrders()');}else await sleep(0x64);}};_0x44e2ce(_0x31bbfb),_0x1bfa2c(_0x31bbfb),_0x31bbfb[_0x360755(0x1dd)](_0x9a97ba=>{_0xe3d52(_0x9a97ba),_0x3347a1(_0x9a97ba);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1f6ab4){const _0x3d0cf2=_0x2f06ad;let _0x1ef8f8={};try{if(config[_0x3d0cf2(0x211)]!=_0x3d0cf2(0x21c))_0x1ef8f8=await exchange[_0x3d0cf2(0x297)](_0x1f6ab4);else for(const _0x3ebf43 of _0x1f6ab4){const _0x227ea3=await exchange[_0x3d0cf2(0x27e)](_0x3ebf43);_0x1ef8f8[_0x3ebf43]=_0x227ea3;}return _0x1ef8f8;}catch(_0x303f00){throw _0x303f00;}}async function watchTransactions(){const _0x313ecb=_0x2f06ad;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x594c3c=await getCoins(),[_0x18b9e8,_0x2b46eb]=_0x594c3c;let _0x5d365b=[];currentCoins[_0x313ecb(0x1dd)](_0x28f137=>{const _0x20cfb4=_0x313ecb,_0x3594bd=_0x18b9e8[_0x20cfb4(0x304)](_0x35b5ff=>_0x35b5ff[_0x20cfb4(0x1e2)]==_0x28f137[_0x20cfb4(0x1e2)]);if(_0x3594bd){if(_0x28f137[_0x20cfb4(0x298)]!=_0x3594bd[_0x20cfb4(0x298)]){let _0x545e42;if(_0x28f137['coin']!=config[_0x20cfb4(0x26e)]){const _0x123646=global[_0x20cfb4(0x1e1)][noslash(_0x28f137[_0x20cfb4(0x273)])];_0x545e42=_0x28f137[_0x20cfb4(0x221)]?0x1/_0x123646:_0x123646;}else _0x545e42=0x1;_0x5d365b[_0x20cfb4(0x274)]({'coin':_0x28f137['coin'],'symbol':_0x28f137[_0x20cfb4(0x273)],'price':_0x545e42,'number':Number(formatResult(_0x3594bd[_0x20cfb4(0x298)]-_0x28f137[_0x20cfb4(0x298)],0x8)),'basecoinvalue':_0x545e42*(_0x3594bd[_0x20cfb4(0x298)]-_0x28f137['number'])});}}});if(_0x5d365b[_0x313ecb(0x1f5)]==0x1&&!blockTransactionDetection){if(config[_0x313ecb(0x227)]){logger[_0x313ecb(0x2ff)](_0x313ecb(0x269)+_0x5d365b[0x0][_0x313ecb(0x27a)]+_0x313ecb(0x313)+lastFees[_0x313ecb(0x25f)]);if(lastFees[_0x313ecb(0x25f)]==0x0||Math['abs'](_0x5d365b[0x0][_0x313ecb(0x27a)])>lastFees[_0x313ecb(0x25f)]){delete _0x5d365b[0x0][_0x313ecb(0x273)],delete _0x5d365b[0x0][_0x313ecb(0x27a)];let _0x4beddd=[],_0x373bfe=[...config['liquidity']]||[],_0x14442b=config[_0x313ecb(0x354)];_0x373bfe[_0x313ecb(0x21f)]((_0x154014,_0x92e257)=>_0x154014[_0x313ecb(0x278)]>_0x92e257[_0x313ecb(0x278)]?-0x1:_0x92e257[_0x313ecb(0x278)]>_0x154014['date']?0x1:0x0);const _0x259077=getDate();if(_0x373bfe[0x0]){const _0x1989e2=fns[_0x313ecb(0x2d7)](_0x373bfe[0x0][_0x313ecb(0x278)],'yyyy/MM/dd',new Date()),_0x338514=fns[_0x313ecb(0x2d7)](_0x259077,_0x313ecb(0x317),new Date());if(fns[_0x313ecb(0x27f)](_0x1989e2,_0x338514)){_0x4beddd=_0x373bfe[0x0][_0x313ecb(0x223)];const _0x4d2ce9=_0x4beddd[_0x313ecb(0x304)](_0x361626=>_0x361626[_0x313ecb(0x1e2)]==_0x5d365b[0x0][_0x313ecb(0x1e2)]);_0x4d2ce9?(_0x4d2ce9['number']+=_0x5d365b[0x0][_0x313ecb(0x298)],_0x4d2ce9[_0x313ecb(0x298)]==0x0&&(_0x4beddd=_0x4beddd[_0x313ecb(0x2c0)](_0x30aa92=>{const _0x39b560=_0x313ecb;return _0x30aa92[_0x39b560(0x1e2)]!=_0x5d365b[0x0][_0x39b560(0x1e2)];}))):_0x4beddd['push'](_0x5d365b[0x0]);const _0x61c39f=_0x14442b['find'](_0x523118=>_0x523118[_0x313ecb(0x278)]==_0x259077);_0x61c39f[_0x313ecb(0x223)]=_0x4beddd;}else _0x14442b['push']({'date':_0x259077,'changes':[_0x5d365b[0x0]]});}const _0xd18ae3=_0x14442b['find'](_0x27fd50=>_0x27fd50['date']==_0x259077);if(_0xd18ae3){let _0x4ee138=!![];_0xd18ae3['changes'][_0x313ecb(0x1dd)](_0x42b680=>{const _0xb8eae5=_0x313ecb;if(_0x42b680[_0xb8eae5(0x298)]!=0x0)_0x4ee138=![];}),_0x4ee138&&(_0x14442b=_0x14442b[_0x313ecb(0x2c0)](_0x2d5a27=>{const _0x57ba6a=_0x313ecb;return _0x2d5a27[_0x57ba6a(0x278)]!=_0x259077;}));}let _0xa82d82=dbConfig[_0x313ecb(0x209)](_0x313ecb(0x2e5))[_0x313ecb(0x304)]({'botID':botID})[_0x313ecb(0x25c)]();_0xa82d82&&(dbConfig['get'](_0x313ecb(0x2e5))['find']({'botID':botID})['assign']({'liquidity':_0x14442b})['write'](),config[_0x313ecb(0x354)]=_0x14442b),logHistory('success',_0x313ecb(0x330)+Math['abs'](_0x5d365b[0x0]['number'])+'\x20'+_0x5d365b[0x0][_0x313ecb(0x1e2)]+'\x20'+(_0x5d365b[0x0][_0x313ecb(0x298)]>0x0?_0x313ecb(0x2a0):_0x313ecb(0x35c))+_0x313ecb(0x1df)),proxyEmit(_0x313ecb(0x22d),emittedConfiguration());}else logger[_0x313ecb(0x2ff)](_0x313ecb(0x22e)+Math[_0x313ecb(0x2ed)](_0x5d365b[0x0][_0x313ecb(0x298)])+'\x20'+_0x5d365b[0x0][_0x313ecb(0x1e2)]+'\x20'+(_0x5d365b[0x0][_0x313ecb(0x298)]>0x0?_0x313ecb(0x2a0):_0x313ecb(0x35c)));transactionDetected=!![];}else logger[_0x313ecb(0x2ff)](_0x313ecb(0x330)+Math['abs'](_0x5d365b[0x0]['number'])+'\x20'+_0x5d365b[0x0][_0x313ecb(0x1e2)]+'\x20'+(_0x5d365b[0x0][_0x313ecb(0x298)]>0x0?'added':_0x313ecb(0x35c))+_0x313ecb(0x318));}currentCoins=_0x18b9e8,currentCoinsAll=_0x2b46eb,await sleep(watchTransactionsInterval);}catch(_0x202ce7){if(!exchangeStopped)await handleError(_0x202ce7,_0x313ecb(0x294));}else await sleep(0x64);}}async function loadSymbols(){const _0x3edf48=_0x2f06ad;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object['entries'](markets)[_0x3edf48(0x1dd)](_0x5689f0=>{const _0x34ba68=_0x3edf48;_0x5689f0[0x1][_0x34ba68(0x2c3)]&&_0x5689f0[0x1][_0x34ba68(0x236)]&&allSymbols[_0x34ba68(0x274)](_0x5689f0[0x0]);});}catch(_0x24b9e6){throw _0x24b9e6;}}function validateSymbols(_0x49c7ea){let _0x20aa63=[];return _0x49c7ea['forEach'](_0x21b5cb=>{const _0x2f3b54=_0x5d0e;!allSymbols[_0x2f3b54(0x250)](_0x21b5cb)?logHistory(_0x2f3b54(0x206),_0x2f3b54(0x1f4)+_0x21b5cb+_0x2f3b54(0x218)):_0x20aa63['push'](_0x21b5cb);}),_0x20aa63;}async function initclient(){const _0x102a6e=_0x2f06ad;proxyEmit(_0x102a6e(0x22d),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5eb8fc=getNormalizedPerformance();emitPerformance(_0x5eb8fc),getStartingBalances(_0x5eb8fc);}async function toggleBotMode(){const _0x182251=_0x2f06ad;let _0x5e1aba=dbConfig['get'](_0x182251(0x2e5))[_0x182251(0x304)]({'botID':botID})['value']();if(_0x5e1aba){const _0x5ccdd3=!_0x5e1aba[_0x182251(0x345)];dbConfig[_0x182251(0x209)]('bot')[_0x182251(0x304)]({'botID':botID})[_0x182251(0x20d)]({'headless':_0x5ccdd3})['write'](),config[_0x182251(0x345)]=_0x5ccdd3,proxyEmit(_0x182251(0x22d),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x3451af=_0x2f06ad;process[_0x3451af(0x31b)]({'updatebotmanager':!![]},_0x5894a3=>{}),logger[_0x3451af(0x2ff)](_0x3451af(0x20f)+config[_0x3451af(0x345)]);}async function loadCoins(_0x80ebcb){const _0x559337=_0x2f06ad;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x485339,_0x239717=0x0,_0x2e7b57=0x0;_0x80ebcb['forEach'](_0x2f7fa1=>{const _0x2d822f=_0x5d0e;loading[_0x2d822f(0x34d)][_0x2d822f(0x274)](_0x2f7fa1);}),loadingCanceled=![];let _0x464697=![];while(_0x485339!=_0x80ebcb[_0x559337(0x1f5)]+maxLoadingProgress){_0x485339=loadingProgress,_0x80ebcb[_0x559337(0x1dd)](_0x2995e2=>{const _0x15f404=_0x559337;if(global['ticker'][noslash(_0x2995e2)]){loading[_0x15f404(0x34d)]=loading['remainingSymbols'][_0x15f404(0x2c0)](_0x4b624e=>_0x4b624e!=_0x2995e2);if(!watchedSymbols[_0x15f404(0x250)](_0x2995e2))watchedSymbols['push'](_0x2995e2);_0x485339++;}}),loading['progress']=Math[_0x559337(0x21a)](_0x485339/(_0x80ebcb['length']+maxLoadingProgress)*0x64);loading[_0x559337(0x21d)]!=0x64&&(_0x2e7b57>0x1e*0x5&&(loading[_0x559337(0x355)]=!![],emitLoadingProgress()),_0x2e7b57>0x78*0x5&&!_0x464697&&(_0x464697=!![],logHistory(_0x559337(0x206),_0x559337(0x26d)+loading['remainingSymbols'][_0x559337(0x1f3)](',\x20')+_0x559337(0x23d)),logHistory(_0x559337(0x206),_0x559337(0x224)+loadCoinsRetryInterval/0xea60+_0x559337(0x2cc)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x918a26=_0x559337;process[_0x918a26(0x31b)]({'stop':_0x918a26(0x283)},_0x2b93ae=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x559337(0x2d9)]=!![],emitLoadingProgress();break;}else _0x239717!=loading[_0x559337(0x21d)]&&(_0x239717=loading['progress'],emitLoadingProgress()),_0x2e7b57++,await sleep(0xc8);}_0x485339==_0x80ebcb[_0x559337(0x1f5)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x559337(0x2be),'live':_0x559337(0x230)},_0x1ed9ac=>{}),_0x464697&&logHistory(_0x559337(0x332),_0x559337(0x2a7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1c4c7a=_0x2f06ad;proxyEmit(_0x1c4c7a(0x22d),{...emittedConfiguration(),'configstate':_0x1c4c7a(0x238)});}function emitLoadingProgress(){const _0x1459f4=_0x2f06ad;proxyEmit(_0x1459f4(0x277),loading);}async function getFiat(){const _0x1e9b77=_0x2f06ad;let _0x44f561=global[_0x1e9b77(0x1e1)][stablecoins[_0x1e9b77(0x342)]['coin']],_0x29f0ae=global[_0x1e9b77(0x1e1)][stablecoins['usd'][_0x1e9b77(0x1e2)]];return{'eur':Number(_0x44f561),'usd':Number(_0x29f0ae)};}function capitalize(_0x2f59c7){const _0x10e8e6=_0x2f06ad;return _0x2f59c7['substring'](0x0,0x1)[_0x10e8e6(0x2ac)]()+_0x2f59c7[_0x10e8e6(0x31e)](0x1);}function supportedExchanges(){const _0x2e5ebd=_0x2f06ad,_0x541d40=['ws',_0x2e5ebd(0x297),_0x2e5ebd(0x27e),_0x2e5ebd(0x2cf),'watchOrders',_0x2e5ebd(0x343),'createOrder',_0x2e5ebd(0x29c),_0x2e5ebd(0x266),_0x2e5ebd(0x301)];let _0x4c3b1e=[],_0x3abffc=[],_0x5a31b1=ccxt[_0x2e5ebd(0x349)][_0x2e5ebd(0x34e)];_0x5a31b1[_0x2e5ebd(0x1dd)](_0x290a6e=>{const _0x41b6bb=_0x2e5ebd;try{const _0x480525=new ccxt[(_0x41b6bb(0x349))][_0x290a6e]();_0x3abffc[_0x41b6bb(0x274)](_0x480525);}catch(_0x581ffa){}}),_0x3abffc[_0x2e5ebd(0x1dd)](_0x106b6d=>{const _0x4c530a=_0x2e5ebd;let _0x224819=0x0;_0x541d40[_0x4c530a(0x1dd)](_0x529d10=>{const _0x47bc2d=_0x4c530a;_0x529d10 in _0x106b6d['has']&&_0x106b6d[_0x47bc2d(0x1e8)][_0x529d10]&&_0x224819++;}),_0x224819==_0x541d40['length']&&_0x4c3b1e[_0x4c530a(0x274)](capitalize(_0x106b6d['id']));});let _0x443d57=[];return _0x5a31b1[_0x2e5ebd(0x1dd)](_0x4a9164=>{const _0x734d83=_0x2e5ebd;_0x4a9164=capitalize(_0x4a9164);if(!_0x4c3b1e[_0x734d83(0x250)](_0x4a9164))_0x443d57[_0x734d83(0x274)](_0x4a9164);}),_0x4c3b1e;}function setStartDatePerformance(){const _0x5a1cf9=_0x2f06ad;if(config&&config[_0x5a1cf9(0x354)][0x0][_0x5a1cf9(0x223)][_0x5a1cf9(0x1f5)]!=0x0){const _0x12494e=config[_0x5a1cf9(0x354)][0x0][_0x5a1cf9(0x223)];dbPerformance[_0x5a1cf9(0x209)](_0x5a1cf9(0x2a3))['find']({'date':config['startdate']})[_0x5a1cf9(0x20d)]({'coins':_0x12494e})[_0x5a1cf9(0x360)]();}}async function recreateCoinResults(){const _0x17bb2f=_0x2f06ad;let _0x3405e1,_0x2477c9=[];try{const _0x1e82df=fns['format'](fns[_0x17bb2f(0x2e1)](config[_0x17bb2f(0x276)][_0x17bb2f(0x2db)](/\//g,'-')),_0x17bb2f(0x1ed));for(const _0x4ec6ee of currentCoins){if(_0x4ec6ee['coin']!=config[_0x17bb2f(0x26e)]){let _0x2e1e42=0x0,_0x2d4b43,_0x3c8d08;_0x3405e1=await getAllEventOrders(_0x4ec6ee[_0x17bb2f(0x273)]);if(_0x3405e1[_0x17bb2f(0x1f5)]>0x0)_0x3405e1[_0x17bb2f(0x1dd)](_0xf41e02=>{const _0x3a5b86=_0x17bb2f,_0x466f1f=_0x4ec6ee['symbol']['includes'](config[_0x3a5b86(0x26e)]+'/');_0x2477c9[_0x3a5b86(0x274)]({'datetime':_0xf41e02[_0x3a5b86(0x2c2)],'coin':_0x4ec6ee[_0x3a5b86(0x1e2)],'symbol':_0x4ec6ee[_0x3a5b86(0x273)],'side':_0xf41e02['side'],'reverse':_0x466f1f,'amount':formatResult(_0xf41e02[_0x3a5b86(0x2f6)],0x8),'filled':formatResult(_0xf41e02[_0x3a5b86(0x2f6)],0x8),'price':formatResult(_0xf41e02['price'],0x8)}),_0x2e1e42=_0xf41e02[_0x3a5b86(0x2d6)]==_0x3a5b86(0x293)?_0x2e1e42+_0xf41e02[_0x3a5b86(0x2f6)]:_0x2e1e42-_0xf41e02[_0x3a5b86(0x2f6)];if(!_0x3c8d08)_0x3c8d08=_0xf41e02[_0x3a5b86(0x296)];});_0x2d4b43=_0x4ec6ee[_0x17bb2f(0x298)]-_0x2e1e42;let _0x433091;config['liquidity'][_0x17bb2f(0x1dd)](_0x308f70=>{const _0xcf9604=_0x17bb2f;!_0x433091&&(_0x433091=_0x308f70[_0xcf9604(0x223)][_0xcf9604(0x304)](_0x46a544=>_0x46a544['coin']==_0x4ec6ee[_0xcf9604(0x1e2)]),_0x433091&&(_0x2d4b43=_0x433091['number'],_0x3c8d08=_0x433091[_0xcf9604(0x296)]));});let _0xb2bd88=dbCoinResults[_0x17bb2f(0x209)](_0x17bb2f(0x2d3))[_0x17bb2f(0x304)]({'coin':_0x4ec6ee['coin']})[_0x17bb2f(0x25c)]();_0xb2bd88={'coin':_0x4ec6ee[_0x17bb2f(0x1e2)],'number':_0x2d4b43,'breakeven':_0x3c8d08,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x17bb2f(0x2d3))[_0x17bb2f(0x304)]({'coin':_0x4ec6ee[_0x17bb2f(0x1e2)]})[_0x17bb2f(0x20d)](_0xb2bd88)[_0x17bb2f(0x360)]();}}_0x2477c9[_0x17bb2f(0x21f)]((_0x8dfe7d,_0x3240ab)=>_0x8dfe7d[_0x17bb2f(0x2c2)]>_0x3240ab[_0x17bb2f(0x2c2)]?0x1:_0x3240ab[_0x17bb2f(0x2c2)]>_0x8dfe7d['datetime']?-0x1:0x0);let _0x46529a=0x0;for(let _0x38da54 of _0x2477c9){await updateCoinResults(_0x38da54,!![]);}}catch(_0x589734){await handleError(_0x589734,_0x17bb2f(0x220));}}async function getAllEventOrders(_0x1994e2){const _0x3388c7=_0x2f06ad;let _0x2d8095=[],_0x10936b=dbLogs['get'](_0x3388c7(0x2ae))[_0x3388c7(0x2c0)](_0x334ff3=>{const _0x4a5992=_0x3388c7,_0x1b04c9=_0x334ff3[_0x4a5992(0x2cb)][_0x4a5992(0x205)]();return _0x1b04c9['includes'](_0x1994e2[_0x4a5992(0x205)]())&&(_0x1b04c9[_0x4a5992(0x250)](_0x4a5992(0x2f8))&&_0x1b04c9[_0x4a5992(0x250)](_0x4a5992(0x356))||_0x1b04c9[_0x4a5992(0x250)](_0x4a5992(0x2f6))&&_0x1b04c9[_0x4a5992(0x250)](_0x4a5992(0x356)));})['sortBy'](_0x3388c7(0x235))['value']();return _0x10936b[_0x3388c7(0x1dd)](_0x414618=>{const _0xb13bb0=_0x3388c7,_0x2654aa=_0x414618[_0xb13bb0(0x2cb)][_0xb13bb0(0x250)](_0xb13bb0(0x2f0))?_0xb13bb0(0x2f0):_0xb13bb0(0x293),_0x2f445b=/#([0-9]|\.)+\s/i,_0xde7aba=Number(_0x2f445b[_0xb13bb0(0x1e3)](_0x414618[_0xb13bb0(0x2cb)])[0x0]['slice'](0x1)),_0xf01641=/@([0-9]|\.)+$/i,_0x95dd2=Number(_0xf01641[_0xb13bb0(0x1e3)](_0x414618['event'])[0x0]['slice'](0x1));_0x2d8095['push']({'datetime':_0x414618[_0xb13bb0(0x235)],'coin':symbolToCoin(_0x1994e2),'symbol':_0x1994e2,'side':_0x2654aa,'amount':_0xde7aba,'filled':_0xde7aba,'price':_0x95dd2});}),_0x2d8095;}async function getAllOrders(_0x27419f,_0x45a1d9){const _0x32c47e=_0x2f06ad;let _0x39df34=[];while(_0x45a1d9<exchange['milliseconds']()){const _0x2d58bf=0x1f4;try{const _0x39a0b0=await exchange[_0x32c47e(0x266)](_0x27419f,_0x45a1d9,_0x2d58bf);if(_0x39a0b0[_0x32c47e(0x1f5)])_0x45a1d9=_0x39a0b0[_0x39a0b0['length']-0x1][_0x32c47e(0x2af)]+0x1,_0x39df34=_0x39df34[_0x32c47e(0x267)](_0x39a0b0);else break;}catch(_0x39cd97){await handleError(_0x39cd97,_0x32c47e(0x2b9),_0x27419f);}}return _0x39df34;}async function validate24hChanges(){const _0x28e865=_0x2f06ad;for(const _0x45c4ff of currentCoins){if(_0x45c4ff[_0x28e865(0x1e2)]!=config['basecoin']){let _0x511b12;_0x45c4ff['reverse']?_0x511b12=formatResult((0x1/(global[_0x28e865(0x329)][noslash(_0x45c4ff[_0x28e865(0x273)])]/0x64+0x1)-0x1)*0x64,0x3):_0x511b12=global[_0x28e865(0x329)][noslash(_0x45c4ff[_0x28e865(0x273)])],_0x511b12<config[_0x28e865(0x33c)]&&(logHistory('error',_0x45c4ff[_0x28e865(0x1e2)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x511b12+'%'),logHistory(_0x28e865(0x206),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x28e865(0x206),_0x28e865(0x34a)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3466bd,_0x48462c){const _0x35ce42=_0x2f06ad;if(!_0x3466bd)return!![];const _0x18df32=_0x48462c[_0x35ce42(0x25b)]('.'),_0x4941a5=_0x3466bd['split']('.');for(var _0x393785=0x0;_0x393785<_0x4941a5['length'];_0x393785++){const _0xbe6de8=~~_0x4941a5[_0x393785],_0x1bec96=~~_0x18df32[_0x393785];if(_0xbe6de8<_0x1bec96)return!![];if(_0xbe6de8>_0x1bec96)return![];}return![];}async function oneTimeMigration(){const _0x2ffe6b=_0x2f06ad;let _0x18b4ba=dbLogs[_0x2ffe6b(0x209)](_0x2ffe6b(0x284))[_0x2ffe6b(0x25c)]();if(isOlderVersion(_0x18b4ba,'2.3.5')){let _0x58be39=[];const _0x2081f8=dbLogs[_0x2ffe6b(0x209)]('logs')[_0x2ffe6b(0x25c)]();_0x2081f8[_0x2ffe6b(0x1dd)](_0x3406e1=>{const _0x3f1f14=_0x2ffe6b;_0x58be39[_0x3f1f14(0x274)]({'time':_0x3406e1[_0x3f1f14(0x235)],'type':_0x3406e1[_0x3f1f14(0x357)],'event':_0x3406e1[_0x3f1f14(0x2cb)]});}),dbLogs['get'](_0x2ffe6b(0x2ae))[_0x2ffe6b(0x20d)](_0x58be39)[_0x2ffe6b(0x360)]();}let _0x398b5f=dbConfig[_0x2ffe6b(0x209)](_0x2ffe6b(0x284))[_0x2ffe6b(0x25c)]();if(isOlderVersion(_0x398b5f,_0x2ffe6b(0x2b3))){let _0x2504bd=dbConfig['get'](_0x2ffe6b(0x2e5))['find']({'botID':botID})[_0x2ffe6b(0x25c)]();if(_0x2504bd){let _0x4e3102=[];_0x2504bd['portfolio'][_0x2ffe6b(0x1dd)](_0x308062=>{const _0x4236e7=_0x2ffe6b;_0x4e3102[_0x4236e7(0x274)]({'coin':_0x308062[_0x4236e7(0x1e2)],'number':_0x308062['startnumber'],'price':_0x308062[_0x4236e7(0x292)]}),delete _0x308062[_0x4236e7(0x2e7)],delete _0x308062[_0x4236e7(0x292)];});if(_0x4e3102[_0x2ffe6b(0x1f5)]!==0x0)fs['writeFile'](configbackuppath+(_0x2ffe6b(0x306)+botID+_0x2ffe6b(0x1db)),JSON[_0x2ffe6b(0x331)](_0x4e3102,null,0x4),function(_0x2ae7f9){if(_0x2ae7f9){}});const _0x5ebd96=(_0x702662,_0x1c83e0)=>{const _0x5673f9=_0x2ffe6b;let _0x20fbd=[];_0x1c83e0['forEach'](_0x588460=>{const _0x2fd60b=_0x5d0e,_0x21def0=_0x702662['find'](_0x3f0952=>_0x3f0952[_0x2fd60b(0x1e2)]==_0x588460[_0x2fd60b(0x1e2)]);if(!_0x21def0)_0x20fbd[_0x2fd60b(0x274)](_0x588460);});let _0x184e20=[];return _0x702662[_0x5673f9(0x1dd)](_0x1d6f36=>{const _0x248d26=_0x5673f9,_0x2e546c=_0x1c83e0[_0x248d26(0x304)](_0x28579c=>_0x28579c[_0x248d26(0x1e2)]==_0x1d6f36['coin']);if(!_0x2e546c||_0x2e546c[_0x248d26(0x298)]==0x0&&_0x1d6f36[_0x248d26(0x298)]!=0x0)_0x184e20[_0x248d26(0x274)](_0x1d6f36);}),{'missingDay1':_0x20fbd,'notInDay2':_0x184e20};},_0x3979aa=dbPerformance['get']('data')[_0x2ffe6b(0x28d)]()[_0x2ffe6b(0x25c)]();if(_0x3979aa[_0x2ffe6b(0x1f5)]>0x1){const {missingDay1:_0x5d53c1,notInDay2:_0x66232}=_0x5ebd96(_0x4e3102,_0x3979aa[0x1][_0x2ffe6b(0x2d3)]);_0x4e3102=[..._0x4e3102,..._0x5d53c1],_0x66232[_0x2ffe6b(0x1dd)](_0x934b24=>{const _0x533238=_0x2ffe6b;let _0x4ec60f=_0x4e3102[_0x533238(0x366)](_0x307eab=>_0x307eab[_0x533238(0x1e2)]==_0x934b24[_0x533238(0x1e2)]);_0x4ec60f!=-0x1&&_0x4e3102['splice'](_0x4ec60f,0x1);});}_0x4e3102[_0x2ffe6b(0x21f)]((_0x544aac,_0x3c1020)=>_0x544aac[_0x2ffe6b(0x1e2)]>_0x3c1020[_0x2ffe6b(0x1e2)]?0x1:_0x3c1020[_0x2ffe6b(0x1e2)]>_0x544aac[_0x2ffe6b(0x1e2)]?-0x1:0x0);let _0x5f041c=[{'date':_0x2504bd[_0x2ffe6b(0x276)],'changes':_0x4e3102}];_0x3979aa[_0x2ffe6b(0x1f5)]>0x2&&_0x3979aa[_0x2ffe6b(0x1dd)]((_0x36b2fb,_0x21d156)=>{const _0x9b15f=_0x2ffe6b;if(_0x21d156>0x0&&_0x21d156<_0x3979aa[_0x9b15f(0x1f5)]-0x1){const {missingDay1:_0x28e203,notInDay2:_0x3282e4}=_0x5ebd96(_0x3979aa[_0x21d156][_0x9b15f(0x2d3)],_0x3979aa[_0x21d156+0x1][_0x9b15f(0x2d3)]);_0x4e3102=[],(_0x28e203[_0x9b15f(0x1f5)]!=0x0||_0x3282e4['length']!=0x0)&&(_0x28e203[_0x9b15f(0x1f5)]!=0x0&&_0x4e3102['push'](..._0x28e203),_0x3282e4[_0x9b15f(0x1f5)]!=0x0&&(_0x3282e4[_0x9b15f(0x1dd)](_0x21615f=>{const _0x21d042=_0x9b15f;_0x21615f[_0x21d042(0x298)]=-_0x21615f[_0x21d042(0x298)];}),_0x4e3102[_0x9b15f(0x274)](..._0x3282e4)),_0x4e3102[_0x9b15f(0x21f)]((_0x3a8372,_0x5c5a6e)=>_0x3a8372[_0x9b15f(0x1e2)]>_0x5c5a6e['coin']?0x1:_0x5c5a6e['coin']>_0x3a8372[_0x9b15f(0x1e2)]?-0x1:0x0),_0x5f041c[_0x9b15f(0x274)]({'date':_0x3979aa[_0x21d156+0x1]['date'],'changes':_0x4e3102}));}}),dbConfig[_0x2ffe6b(0x209)]('bot')[_0x2ffe6b(0x304)]({'botID':botID})[_0x2ffe6b(0x20d)]({..._0x2504bd,'liquidity':_0x5f041c})[_0x2ffe6b(0x360)]();}}if(isOlderVersion(_0x398b5f,'2.6.0')){let _0x1e3799=dbConfig[_0x2ffe6b(0x209)](_0x2ffe6b(0x2e5))['find']({'botID':botID})['value']();if(_0x1e3799){const _0x3838cf=_0x1e3799['exchange'],_0x51d783=_0x3838cf?capitalize(_0x3838cf):'Binance';dbConfig['get'](_0x2ffe6b(0x2e5))['find']({'botID':botID})[_0x2ffe6b(0x20d)]({'exchange':_0x51d783})[_0x2ffe6b(0x360)]();}}let _0x13db60=dbPerformance[_0x2ffe6b(0x209)](_0x2ffe6b(0x284))[_0x2ffe6b(0x25c)]();isOlderVersion(_0x13db60,_0x2ffe6b(0x2b3))&&setStartDatePerformance();let _0x4599f6=dbCoinResults[_0x2ffe6b(0x209)]('version')['value']();if(isOlderVersion(_0x4599f6,'2.5.0')){let _0x470dfb=dbCoinResults[_0x2ffe6b(0x209)]('coins')[_0x2ffe6b(0x25c)]();if(_0x470dfb[_0x2ffe6b(0x1f5)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4619dc=_0x2f06ad;dbConfig['set'](_0x4619dc(0x284),serverversion)[_0x4619dc(0x360)](),dbPerformance[_0x4619dc(0x29f)](_0x4619dc(0x284),serverversion)[_0x4619dc(0x360)](),dbLogs[_0x4619dc(0x29f)](_0x4619dc(0x284),serverversion)[_0x4619dc(0x360)](),dbCoinResults['set'](_0x4619dc(0x284),serverversion)[_0x4619dc(0x360)]();}function getConfiguration(_0x6507f1){const _0x5ad8aa=_0x2f06ad;let _0x141224=dbConfig[_0x5ad8aa(0x209)]('bot')[_0x5ad8aa(0x304)]({'botID':_0x6507f1})['value']();if(_0x141224){let _0x3a77ff=![];typeof _0x141224['threshold']==_0x5ad8aa(0x2d0)&&(_0x141224={..._0x141224,'threshold':Number(_0x141224[_0x5ad8aa(0x1fc)])},_0x3a77ff=!![]),_0x141224['change24h']==undefined&&(_0x141224={..._0x141224,'change24h':-0x14},_0x3a77ff=!![]),_0x141224['fiat']==undefined&&(_0x141224={..._0x141224,'fiat':_0x5ad8aa(0x23e)},_0x3a77ff=!![]),_0x141224[_0x5ad8aa(0x21b)]==undefined&&(_0x141224={..._0x141224,'onepagemode':settings[_0x5ad8aa(0x21b)]},_0x3a77ff=!![]),_0x141224[_0x5ad8aa(0x1e6)]==undefined&&(_0x141224={..._0x141224,'colorscheme':_0x5ad8aa(0x1f1)},_0x3a77ff=!![]),_0x141224[_0x5ad8aa(0x227)]==undefined&&(_0x141224={..._0x141224,'autoliquidity':!![]},_0x3a77ff=!![]),_0x3a77ff&&(_0x141224={'botID':_0x141224['botID'],'exchange':_0x141224[_0x5ad8aa(0x211)],'apiKey':_0x141224[_0x5ad8aa(0x2e4)],'apiSecret':_0x141224['apiSecret'],'apiPassword':_0x141224['apiPassword'],'basecoin':_0x141224['basecoin'],'botname':_0x141224[_0x5ad8aa(0x1ff)],'showname':_0x141224[_0x5ad8aa(0x247)],'threshold':_0x141224[_0x5ad8aa(0x1fc)],'ordertype':_0x141224[_0x5ad8aa(0x26c)],'timeout':_0x141224['timeout'],'fiat':_0x141224[_0x5ad8aa(0x270)],'startdate':_0x141224[_0x5ad8aa(0x276)],'recreate':_0x141224['recreate'],'timeshift':_0x141224['timeshift'],'onepagemode':_0x141224['onepagemode'],'headless':_0x141224[_0x5ad8aa(0x345)],'cooldown':_0x141224[_0x5ad8aa(0x21e)],'change24h':_0x141224[_0x5ad8aa(0x33c)],'emojibuy':_0x141224[_0x5ad8aa(0x1dc)],'emojisell':_0x141224[_0x5ad8aa(0x2c7)],'colorscheme':_0x141224[_0x5ad8aa(0x1e6)],'portfolio':_0x141224[_0x5ad8aa(0x241)],'autoliquidity':_0x141224['autoliquidity'],'liquidity':_0x141224[_0x5ad8aa(0x354)],'openOrders':_0x141224['openOrders']},dbConfig[_0x5ad8aa(0x209)](_0x5ad8aa(0x2e5))[_0x5ad8aa(0x2df)]()[_0x5ad8aa(0x360)](),dbConfig[_0x5ad8aa(0x209)](_0x5ad8aa(0x2e5))[_0x5ad8aa(0x274)](_0x141224)[_0x5ad8aa(0x360)]());}else _0x141224={'botID':_0x6507f1,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x5ad8aa(0x225)+_0x6507f1,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x5ad8aa(0x23e),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5ad8aa(0x2c6)],'onepagemode':settings[_0x5ad8aa(0x21b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x141224;}function emittedConfiguration(){const _0x6bb018=_0x2f06ad;let _0x65958d;if(config[_0x6bb018(0x2e4)]=='')_0x65958d={...config,'configstate':_0x6bb018(0x346)};else config[_0x6bb018(0x2e4)]==_0x6bb018(0x2f1)?_0x65958d={...config,'configstate':'recovery'}:(_0x65958d={...config,'apiKey':'************','apiSecret':'************'},config[_0x6bb018(0x242)]&&(_0x65958d[_0x6bb018(0x242)]=_0x6bb018(0x26a)));return _0x65958d;}function getSettings(){const _0x2ebe1a=_0x2f06ad;return dbSettings[_0x2ebe1a(0x209)](_0x2ebe1a(0x210))[_0x2ebe1a(0x25c)]();}function getSecure(){const _0x1c1cff=_0x2f06ad;return dbSecure[_0x1c1cff(0x209)](_0x1c1cff(0x216))['value']()||{};}function updateTimeshift(_0x4b9c22){const _0x3f9078=_0x2f06ad;let _0x581800=dbConfig[_0x3f9078(0x209)](_0x3f9078(0x2e5))[_0x3f9078(0x304)]({'botID':botID})[_0x3f9078(0x25c)]();_0x581800&&dbConfig[_0x3f9078(0x209)](_0x3f9078(0x2e5))['find']({'botID':botID})[_0x3f9078(0x20d)]({'timeshift':_0x4b9c22})[_0x3f9078(0x360)](),config['timeshift']=_0x4b9c22,proxyEmit(_0x3f9078(0x22d),emittedConfiguration());}function _0x5d0e(_0x4a4c9d,_0x33c9e3){const _0x5d4c8d=_0x494b();return _0x5d0e=function(_0x16b306,_0x2252d2){_0x16b306=_0x16b306-0x1d4;let _0x494b06=_0x5d4c8d[_0x16b306];return _0x494b06;},_0x5d0e(_0x4a4c9d,_0x33c9e3);}function updateOnepagemode(_0x21d297){const _0x363dd5=_0x2f06ad;let _0x2b81fb=dbConfig[_0x363dd5(0x209)](_0x363dd5(0x2e5))[_0x363dd5(0x304)]({'botID':botID})[_0x363dd5(0x25c)]();_0x2b81fb&&dbConfig['get'](_0x363dd5(0x2e5))[_0x363dd5(0x304)]({'botID':botID})[_0x363dd5(0x20d)]({'onepagemode':_0x21d297})[_0x363dd5(0x360)](),config[_0x363dd5(0x21b)]=_0x21d297,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x2195ba){const _0x24c50c=_0x2f06ad;logger['debug'](_0x24c50c(0x2a6));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x24c50c(0x2ff)](_0x24c50c(0x327));let _0x50fbdc=![],_0x89eb45=![],_0x697e2f=[];_0x2195ba[_0x24c50c(0x241)][_0x24c50c(0x1dd)](_0x8c0721=>{const _0x56a6fd=_0x24c50c;if(!_0x8c0721['excluded']&&_0x8c0721['coin']!=_0x2195ba['basecoin'])_0x697e2f['push'](_0x8c0721[_0x56a6fd(0x273)]);}),_0x697e2f[_0x24c50c(0x1dd)](_0x4695fc=>{const _0xc328f5=_0x24c50c,_0x596383=currentCoins[_0xc328f5(0x304)](_0x174c90=>_0x174c90[_0xc328f5(0x273)]==_0x4695fc);!_0x596383&&(_0x50fbdc=!![]);}),currentCoins['forEach'](_0x54279a=>{const _0x1f37ed=_0x24c50c;if(_0x54279a[_0x1f37ed(0x1e2)]!=config[_0x1f37ed(0x26e)]){const _0x77acbb=_0x697e2f['find'](_0x24256c=>_0x24256c==_0x54279a[_0x1f37ed(0x273)]);!_0x77acbb&&(_0x50fbdc=!![]);}}),_0x2195ba[_0x24c50c(0x241)]['forEach'](_0x52e653=>{const _0x3bf538=_0x24c50c,_0x25a332=config['portfolio']['find'](_0x84daa=>_0x84daa['coin']==_0x52e653['coin']);if(_0x25a332&&_0x52e653['offset']!=_0x25a332[_0x3bf538(0x2f5)])_0x89eb45=!![];});let _0x1535a2=dbConfig[_0x24c50c(0x209)](_0x24c50c(0x2e5))[_0x24c50c(0x304)]({'botID':botID})[_0x24c50c(0x25c)]();_0x2195ba={..._0x2195ba,'apiKey':crypt['decrypt'](secure['privateKey'],_0x2195ba[_0x24c50c(0x2e4)])[_0x24c50c(0x2c5)],'apiSecret':crypt[_0x24c50c(0x1d9)](secure[_0x24c50c(0x2d1)],_0x2195ba[_0x24c50c(0x303)])[_0x24c50c(0x2c5)]};_0x2195ba[_0x24c50c(0x242)]&&(_0x2195ba[_0x24c50c(0x242)]=crypt[_0x24c50c(0x1d9)](secure[_0x24c50c(0x2d1)],_0x2195ba[_0x24c50c(0x242)])[_0x24c50c(0x2c5)]);let _0xf1c382=![];if(_0x1535a2){_0x2195ba[_0x24c50c(0x2e4)]=='************'?_0x2195ba['apiKey']=config[_0x24c50c(0x2e4)]:_0xf1c382=!![];_0x2195ba[_0x24c50c(0x303)]==_0x24c50c(0x26a)?_0x2195ba[_0x24c50c(0x303)]=config[_0x24c50c(0x303)]:_0xf1c382=!![];if(_0x2195ba[_0x24c50c(0x242)]==_0x24c50c(0x26a))_0x2195ba[_0x24c50c(0x242)]=config[_0x24c50c(0x242)];else{if(_0x2195ba['apiPassword'])_0xf1c382=!![];}dbConfig[_0x24c50c(0x209)](_0x24c50c(0x2e5))[_0x24c50c(0x304)]({'botID':botID})[_0x24c50c(0x20d)](_0x2195ba)[_0x24c50c(0x360)]();}else dbConfig['get'](_0x24c50c(0x2e5))['push'](_0x2195ba)['write'](),_0xf1c382=!![],process[_0x24c50c(0x31b)]({'status':_0x24c50c(0x2be),'live':_0x24c50c(0x230)},_0x4eb5d4=>{});process[_0x24c50c(0x31b)]({'botname':_0x2195ba[_0x24c50c(0x1ff)]},_0x308c5a=>{}),config={..._0x2195ba},updateBotManager(),proxyEmit(_0x24c50c(0x367)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xf1c382)await reset(!![]);else _0x50fbdc||_0x89eb45?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x45a7ff){const _0x1f65f5=_0x2f06ad,_0x13dae9={...config,'headless':_0x45a7ff[_0x1f65f5(0x345)]};let _0x286d8a=dbConfig[_0x1f65f5(0x209)](_0x1f65f5(0x2e5))[_0x1f65f5(0x304)]({'botID':botID})[_0x1f65f5(0x25c)]();_0x286d8a&&dbConfig['get']('bot')['find']({'botID':botID})['assign'](_0x13dae9)[_0x1f65f5(0x360)](),config={..._0x13dae9},updateBotManager(),proxyEmit(_0x1f65f5(0x22d),emittedConfiguration());}async function storeFiat(_0x29e9c6){const _0x546a57=_0x2f06ad,_0x2a3a90={...config,'fiat':_0x29e9c6};let _0x4e1dd0=dbConfig[_0x546a57(0x209)](_0x546a57(0x2e5))[_0x546a57(0x304)]({'botID':botID})[_0x546a57(0x25c)]();_0x4e1dd0&&dbConfig['get'](_0x546a57(0x2e5))[_0x546a57(0x304)]({'botID':botID})['assign'](_0x2a3a90)[_0x546a57(0x360)](),config={..._0x2a3a90},proxyEmit(_0x546a57(0x22d),emittedConfiguration());}function resetHistory(){const _0x115781=_0x2f06ad;logger[_0x115781(0x24c)](_0x115781(0x32b));try{if(fs[_0x115781(0x271)](path[_0x115781(0x1f3)](configpath,'bot-'+botID+_0x115781(0x2a8))))fs[_0x115781(0x34c)](path['join'](configpath,_0x115781(0x244)+botID+_0x115781(0x2a8)));if(fs[_0x115781(0x271)](path[_0x115781(0x1f3)](configpath,'bot-'+botID+_0x115781(0x243))))fs[_0x115781(0x34c)](path[_0x115781(0x1f3)](configpath,_0x115781(0x244)+botID+_0x115781(0x243)));if(fs['existsSync'](path[_0x115781(0x1f3)](configpath,_0x115781(0x244)+botID+_0x115781(0x32e))))fs[_0x115781(0x34c)](path[_0x115781(0x1f3)](configpath,'bot-'+botID+'-results.json'));}catch(_0xd8fc2a){if(_0xd8fc2a)logger[_0x115781(0x24c)](_0x115781(0x2da),_0xd8fc2a);}const _0x584b65=getDate();let _0x18378a=[];currentCoins[_0x115781(0x1dd)](_0x49d8a4=>{const _0x36f5c6=_0x115781;_0x18378a[_0x36f5c6(0x274)]({'coin':_0x49d8a4[_0x36f5c6(0x1e2)],'number':_0x49d8a4['number'],'price':_0x49d8a4[_0x36f5c6(0x2de)]});});let _0x39f5a2=dbConfig[_0x115781(0x209)](_0x115781(0x2e5))[_0x115781(0x304)]({'botID':botID})[_0x115781(0x25c)]();_0x39f5a2&&(dbConfig[_0x115781(0x209)](_0x115781(0x2e5))[_0x115781(0x304)]({'botID':botID})[_0x115781(0x20d)]({'liquidity':[{'date':_0x584b65,'changes':_0x18378a}]})[_0x115781(0x360)](),config[_0x115781(0x354)]=[]),process['send']({'stop':_0x115781(0x283)},_0x2fb2cc=>{});}function noslash(_0x596848){const _0x578865=_0x2f06ad;return _0x596848[_0x578865(0x2db)]('/','');}function updateHighestFee(_0x1029ec){const _0x183448=_0x2f06ad;if(_0x1029ec['reverse']){let _0x232246={'filled':_0x1029ec[_0x183448(0x2f6)]*_0x1029ec['price'],'amount':_0x1029ec['filled']*_0x1029ec[_0x183448(0x296)],'side':_0x1029ec[_0x183448(0x2d6)]==_0x183448(0x2f0)?_0x183448(0x293):_0x183448(0x2f0),'price':0x1/_0x1029ec[_0x183448(0x296)]};_0x1029ec={..._0x1029ec,..._0x232246};}const _0x39d92e=defaultFee*_0x1029ec[_0x183448(0x2f6)]*_0x1029ec[_0x183448(0x296)];lastFees[_0x183448(0x24a)]['length']===0x14&&lastFees['recent20'][_0x183448(0x23c)](),lastFees[_0x183448(0x24a)][_0x183448(0x274)](_0x39d92e),lastFees[_0x183448(0x25f)]=Math[_0x183448(0x334)](...lastFees[_0x183448(0x24a)]);}async function updateNumberCoinsCcxt(_0x1eb6d8){const _0x1144f1=_0x2f06ad;logger[_0x1144f1(0x2ff)](_0x1144f1(0x2ad)+_0x1eb6d8[_0x1144f1(0x273)]+_0x1144f1(0x285)+_0x1eb6d8['status']+'\x20|\x20'+_0x1eb6d8[_0x1144f1(0x2f6)]+'\x20/\x20'+_0x1eb6d8['amount']+_0x1144f1(0x285)+_0x1eb6d8['id']);let _0xb72566=_0x1eb6d8[_0x1144f1(0x2b0)],_0x16e2b4=![];currentCoins[_0x1144f1(0x1dd)](_0x33d6c8=>{const _0x57f542=_0x1144f1;_0x33d6c8['symbol']==_0x1eb6d8[_0x57f542(0x273)]&&(_0x16e2b4=!![]);});if(!_0x16e2b4)return;const _0x3a8e25=currentCoins[_0x1144f1(0x304)](_0x5c16c4=>_0x5c16c4[_0x1144f1(0x273)]==_0x1eb6d8[_0x1144f1(0x273)]),_0x47ea4b=_0x5ce36e=>{const _0x44d846=_0x1144f1;if(_0x3a8e25)_0x3a8e25[_0x44d846(0x263)]=_0x5ce36e;};if(_0xb72566=='open')_0x47ea4b(_0x1144f1(0x347));else{if(_0xb72566==_0x1144f1(0x312)){_0x47ea4b(_0x1144f1(0x312));const _0xd51eeb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xd51eeb,await getOpenOrders(),handleOpenOrders();}else{if(_0xb72566==_0x1144f1(0x279)){let _0x1c01d9=![];if(lastOrders)for(const _0x4d5c1c of lastOrders){const _0x3ca0b7=0xc8,_0x328bd7=0x1388;let _0x48c1b6=0x0;while(!_0x4d5c1c[_0x1144f1(0x253)]&&_0x48c1b6*_0x3ca0b7<_0x328bd7){_0x48c1b6++,await sleep(_0x3ca0b7);}if(_0x48c1b6>0x0)logger[_0x1144f1(0x2ff)](_0x1144f1(0x229)+_0x48c1b6*_0x3ca0b7/0x3e8+_0x1144f1(0x2fa));if(_0x4d5c1c[_0x1144f1(0x253)]==_0x1eb6d8['id']){logger[_0x1144f1(0x2ff)](_0x1144f1(0x35b)+_0x1eb6d8['id']),_0x1c01d9=!![];if(_0x4d5c1c['filled']==0x0){logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x1eb6d8['id']);if(_0x1eb6d8[_0x1144f1(0x311)])_0x4d5c1c['price']=_0x1eb6d8[_0x1144f1(0x311)];else{if(_0x1eb6d8[_0x1144f1(0x296)])_0x4d5c1c[_0x1144f1(0x296)]=_0x1eb6d8['price'];else{}}_0x4d5c1c[_0x1144f1(0x2f6)]=_0x1eb6d8[_0x1144f1(0x2f6)],updateHighestFee(_0x4d5c1c),_0x47ea4b(_0x1144f1(0x2f6)),await validateOrders();if(lockOrders==ORDERS[_0x1144f1(0x307)]){const _0x3f443f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3f443f;}_0x4d5c1c[_0x1144f1(0x352)]={'currency':_0x1eb6d8['fee']?_0x1eb6d8[_0x1144f1(0x352)][_0x1144f1(0x1ee)]:null,'cost':_0x1eb6d8[_0x1144f1(0x352)]?_0x1eb6d8[_0x1144f1(0x352)][_0x1144f1(0x300)]:0x0},await updateCoinResults(_0x4d5c1c);}}}if(!_0x1c01d9){logger[_0x1144f1(0x2ff)](_0x1144f1(0x322)+_0x1eb6d8['id']),_0x47ea4b(_0x1144f1(0x2f6));const _0x5a5346=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5a5346,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4794d5=JSON[_0x1144f1(0x2d7)](lastBalances[_0x1144f1(0x241)]);const _0x22e5e0=_0x4794d5[_0x1144f1(0x304)](_0x302a4d=>_0x302a4d[_0x1144f1(0x273)]==_0x1eb6d8[_0x1144f1(0x273)]);if(_0x22e5e0){if(_0xb72566==_0x1144f1(0x347))_0x22e5e0['orderstatus']=_0x22e5e0[_0x1144f1(0x263)]==_0x1144f1(0x2f6)?_0x1144f1(0x2f6):_0x1144f1(0x347);else{if(_0xb72566==_0x1144f1(0x312))_0x22e5e0[_0x1144f1(0x263)]=_0x22e5e0[_0x1144f1(0x263)]==_0x1144f1(0x2f6)?'filled':_0x1144f1(0x312);else _0xb72566==_0x1144f1(0x279)&&(_0x22e5e0['orderstatus']=_0x1144f1(0x2f6));}}lastBalances={...lastBalances,'portfolio':JSON[_0x1144f1(0x331)](_0x4794d5)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x31225c=_0x2f06ad;await getOpenOrders();let _0xe181ed=![];currentCoins[_0x31225c(0x1dd)](_0x2c3a39=>{const _0x2eb61a=_0x31225c;_0xe181ed=allOpenOrders[_0x2eb61a(0x304)](_0x2f045c=>_0x2f045c[_0x2eb61a(0x273)]==_0x2c3a39[_0x2eb61a(0x273)]),_0x2c3a39[_0x2eb61a(0x263)]=_0xe181ed?_0x2eb61a(0x347):_0x2eb61a(0x1f2);});}async function getCoins(_0x3522d3=0x0,_0x20e072=!![],_0x39e369=config['basecoin']){const _0x2357c4=_0x2f06ad;let _0x18d1b3,_0x2a4978=[],_0x13304f=[],_0x3f5d59=[];if(_0x3522d3)await sleep(_0x3522d3);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x18d1b3=await exchange['fetchBalance'](),mybalances=_0x18d1b3['total'];for(const [_0x52a797,_0x261156]of Object[_0x2357c4(0x1ea)](mybalances)){_0x3f5d59[_0x2357c4(0x274)](_0x52a797);}config['portfolio']['forEach'](_0x8ef5d7=>{const _0xc4d9c0=_0x2357c4;!_0x3f5d59['includes'](_0x8ef5d7['coin'])&&(mybalances[_0x8ef5d7[_0xc4d9c0(0x1e2)]]=0x0);});if(_0x39e369=='')for(const [_0x1045f6,_0x3feead]of Object[_0x2357c4(0x1ea)](mybalances)){_0x3feead!=0x0&&_0x2a4978[_0x2357c4(0x274)]({'coin':_0x1045f6});}else{let _0xe9c856=![];for(const [_0x1e22e1,_0x25efef]of Object[_0x2357c4(0x1ea)](mybalances)){const _0x4ee025=config[_0x2357c4(0x241)][_0x2357c4(0x304)](_0x128bf9=>_0x128bf9[_0x2357c4(0x1e2)]==_0x1e22e1),_0x687763=_0x1e22e1+'/'+_0x39e369,_0x2dc3e6=_0x39e369+'/'+_0x1e22e1,_0x2a3fbe=currentCoins[_0x2357c4(0x304)](_0x3cdd99=>_0x3cdd99[_0x2357c4(0x1e2)]==_0x1e22e1);_0xe9c856=![];if((_0x25efef!=0x0||_0x4ee025)&&(allSymbols['includes'](_0x687763)||_0x1e22e1==_0x39e369))_0x2a4978[_0x2357c4(0x274)]({'coin':_0x1e22e1,'symbol':_0x687763,'reverse':![],'number':Math[_0x2357c4(0x334)](_0x25efef+(_0x4ee025&&_0x4ee025[_0x2357c4(0x2f5)]||0x0),0x0),'orderstatus':_0x2a3fbe?_0x2a3fbe[_0x2357c4(0x263)]:_0x2357c4(0x1f2)});else{if((_0x25efef!=0x0||_0x4ee025)&&allSymbols[_0x2357c4(0x250)](_0x2dc3e6))_0x2a4978[_0x2357c4(0x274)]({'coin':_0x1e22e1,'symbol':_0x2dc3e6,'reverse':!![],'number':Math[_0x2357c4(0x334)](_0x25efef+(_0x4ee025&&_0x4ee025[_0x2357c4(0x2f5)]||0x0),0x0),'orderstatus':_0x2a3fbe?_0x2a3fbe[_0x2357c4(0x263)]:_0x2357c4(0x1f2)});else _0x4ee025&&_0x2a4978[_0x2357c4(0x274)]({'coin':_0x4ee025[_0x2357c4(0x1e2)],'symbol':_0x4ee025['symbol'],'reverse':_0x4ee025[_0x2357c4(0x221)],'number':0x0,'orderstatus':_0x2357c4(0x1f2)});}}}}catch(_0x109bd6){if(!_0x20e072)handleErrorNoStop(_0x109bd6,_0x2357c4(0x34b));else await handleError(_0x109bd6,_0x2357c4(0x34b));}return _0x13304f=cloneDeep(_0x2a4978),_0x2a4978=_0x2a4978[_0x2357c4(0x2c0)](_0x292a02=>{const _0x4c16aa=_0x2357c4,_0xb4d527=config[_0x4c16aa(0x241)]['find'](_0x3a5c2f=>_0x3a5c2f[_0x4c16aa(0x1e2)]==_0x292a02[_0x4c16aa(0x1e2)]);return _0xb4d527&&!_0xb4d527['excluded'];}),[_0x2a4978,_0x13304f];}async function getCoinNumber(_0x233bdd){const _0x4e5f7d=_0x2f06ad;let _0x2be6f2;try{const _0xb00ddb=await exchange[_0x4e5f7d(0x301)]();_0x2be6f2=_0xb00ddb[_0x4e5f7d(0x1e7)][_0x233bdd];}catch(_0x4fec52){await handleError(_0x4fec52,_0x4e5f7d(0x29a));}return _0x2be6f2;}async function getOpenOrders(){const _0x3358ae=_0x2f06ad;let _0x4af201;allOpenOrders=[];try{for(const _0x5a54c9 of config['portfolio']){!_0x5a54c9['excluded']&&_0x5a54c9['coin']!=config[_0x3358ae(0x26e)]&&(_0x4af201=await exchange[_0x3358ae(0x29c)](_0x5a54c9[_0x3358ae(0x273)]),_0x4af201[_0x3358ae(0x1f5)]>0x0&&allOpenOrders[_0x3358ae(0x274)](_0x4af201[0x0]));}}catch(_0x5c0fdf){await handleError(_0x5c0fdf,'getOpenOrders()');}}async function handleOpenOrders(_0x4a96a1=0x0){const _0x5d4f7a=_0x2f06ad;allOpenOrders[_0x5d4f7a(0x1f5)]==0x0&&lockOrders==ORDERS[_0x5d4f7a(0x307)]&&allOrdersPlaced&&(_0x4a96a1==0x0?(logger[_0x5d4f7a(0x2ff)]('1\x20-\x20Handle\x20open\x20orders'),_0x4a96a1++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5d4f7a(0x2ff)](_0x5d4f7a(0x324)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x1b3cc9){const _0x57f685=_0x2f06ad,_0x5e2a34=ccxt[_0x57f685(0x349)][_0x1b3cc9[_0x57f685(0x211)][_0x57f685(0x205)]()],_0x1aac63=new _0x5e2a34({'apiKey':_0x1b3cc9['apiKey'],'secret':_0x1b3cc9[_0x57f685(0x303)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x1b3cc9[_0x57f685(0x242)])_0x1aac63[_0x57f685(0x288)]=_0x1b3cc9[_0x57f685(0x242)];try{await _0x1aac63['loadMarkets']();}catch(_0x43757a){throw _0x43757a;}}function cloneDeep(_0x3cd444){const _0x39916f=_0x2f06ad;return JSON['parse'](JSON[_0x39916f(0x331)](_0x3cd444));}async function getPortfolio(_0x2997d3){const _0x136fe6=_0x2f06ad;let _0x24c666=[],_0x23b23a=[],_0x2dcd81=[],_0x26a172;if(_0x2997d3[_0x136fe6(0x2e4)]!==_0x136fe6(0x26a)||_0x2997d3[_0x136fe6(0x303)]!==_0x136fe6(0x26a)||_0x2997d3[_0x136fe6(0x242)]&&_0x2997d3[_0x136fe6(0x242)]!==_0x136fe6(0x26a)){if(config[_0x136fe6(0x211)]){if(_0x2997d3[_0x136fe6(0x2e4)]=='************')_0x2997d3[_0x136fe6(0x2e4)]=config[_0x136fe6(0x2e4)];if(_0x2997d3[_0x136fe6(0x303)]=='************')_0x2997d3['apiSecret']=config['apiSecret'];if(_0x2997d3[_0x136fe6(0x242)]==_0x136fe6(0x26a))_0x2997d3[_0x136fe6(0x242)]=config[_0x136fe6(0x242)];try{await testAPI(_0x2997d3);}catch(_0x245da9){if(_0x245da9[_0x136fe6(0x2e2)]()[_0x136fe6(0x250)]('AuthenticationError')){logger[_0x136fe6(0x2ff)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit('portfolio',![]);return;}else{handleError(_0x245da9,'getPortfolio(0)');return;}}}await initExchange(_0x2997d3[_0x136fe6(0x211)],_0x2997d3[_0x136fe6(0x2e4)],_0x2997d3[_0x136fe6(0x303)],_0x2997d3[_0x136fe6(0x242)]);try{await loadSymbols();}catch(_0x4bc229){if(_0x4bc229[_0x136fe6(0x2e2)]()[_0x136fe6(0x250)](_0x136fe6(0x33e))){proxyEmit(_0x136fe6(0x241),![]);return;}else{handleError(_0x4bc229,_0x136fe6(0x2fb));return;}}const _0x4abbd8=await getCoins(0x0,![],_0x2997d3['basecoin']);_0x2dcd81=cloneDeep(_0x4abbd8[0x1]);}else _0x2dcd81=cloneDeep(currentCoinsAll);if(_0x2997d3['basecoin']=='')proxyEmit('portfolio',_0x2dcd81);else{_0x2dcd81[_0x136fe6(0x1dd)](_0x5c6330=>{const _0xba9ba8=_0x136fe6;if(_0x5c6330['coin']!=_0x2997d3[_0xba9ba8(0x26e)]&&allSymbols[_0xba9ba8(0x250)](_0x5c6330[_0xba9ba8(0x273)]))_0x24c666[_0xba9ba8(0x274)](_0x5c6330[_0xba9ba8(0x273)]);});if(_0x24c666[_0x136fe6(0x1f5)]==0x0)logHistory(_0x136fe6(0x206),_0x136fe6(0x31c));else{try{_0x23b23a=await getTickers(_0x24c666);}catch(_0x2cf2eb){if(_0x2cf2eb[_0x136fe6(0x2e2)]()[_0x136fe6(0x250)](_0x136fe6(0x33e))){proxyEmit('portfolio',![]);return;}else handleError(_0x2cf2eb,_0x136fe6(0x341));}_0x2dcd81[_0x136fe6(0x1dd)](_0x4cfc83=>{const _0x2449ad=_0x136fe6;_0x4cfc83[_0x2449ad(0x1e2)]!=_0x2997d3[_0x2449ad(0x26e)]?_0x23b23a[_0x4cfc83['symbol']]?_0x26a172=_0x4cfc83[_0x2449ad(0x221)]?0x1/_0x23b23a[_0x4cfc83[_0x2449ad(0x273)]][_0x2449ad(0x2de)]:_0x23b23a[_0x4cfc83[_0x2449ad(0x273)]][_0x2449ad(0x2de)]:_0x26a172=0x0:_0x26a172=0x1,_0x4cfc83['price']=formatResult(_0x26a172,0x8);}),proxyEmit('portfolio',_0x2dcd81);}}}function truncateTradeAmount(_0x581ff0,_0x1d6dd2){let _0x1fe069=0x0;try{_0x1fe069=exchange['amountToPrecision'](_0x581ff0,_0x1d6dd2);}catch(_0x4c2c8e){}return _0x1fe069;}function checkMinimums(_0x4bbef3){const _0xed4a77=_0x2f06ad;let _0x2ed6e6=!![];const _0x5a30c5=!_0x4bbef3[_0xed4a77(0x221)]?markets[_0x4bbef3[_0xed4a77(0x273)]]['limits'][_0xed4a77(0x2d4)][_0xed4a77(0x20b)]:markets[_0x4bbef3[_0xed4a77(0x273)]][_0xed4a77(0x290)][_0xed4a77(0x300)][_0xed4a77(0x20b)],_0x1fd087=!_0x4bbef3[_0xed4a77(0x221)]?markets[_0x4bbef3[_0xed4a77(0x273)]]['limits']['cost'][_0xed4a77(0x20b)]:markets[_0x4bbef3[_0xed4a77(0x273)]][_0xed4a77(0x290)][_0xed4a77(0x2d4)][_0xed4a77(0x20b)],_0x1b7c08=truncateTradeAmount(_0x4bbef3[_0xed4a77(0x273)],_0x4bbef3[_0xed4a77(0x27c)]);_0x4bbef3[_0xed4a77(0x27c)]=_0x1b7c08;if(Math[_0xed4a77(0x2ed)](_0x1b7c08)<_0x5a30c5)_0x2ed6e6=![];if(Math[_0xed4a77(0x2ed)](_0x1b7c08)*_0x4bbef3['last']<_0x1fd087)_0x2ed6e6=![];if(_0x4bbef3[_0xed4a77(0x2d6)]==_0xed4a77(0x2f0)){let _0x1b918c=config['portfolio']['find'](_0x267d5d=>_0x267d5d[_0xed4a77(0x1e2)]==_0x4bbef3[_0xed4a77(0x1e2)]);if(_0x1b918c[_0xed4a77(0x2f5)]>0x0){if(Math[_0xed4a77(0x2ed)](_0x1b7c08)>_0x4bbef3[_0xed4a77(0x298)]-_0x1b918c['offset'])_0x2ed6e6=![];}else{if(Math['abs'](_0x1b7c08)>_0x4bbef3['number'])_0x2ed6e6=![];}}if(_0x4bbef3[_0xed4a77(0x2d6)]=='buy'){let _0x22c1c0=config[_0xed4a77(0x241)][_0xed4a77(0x304)](_0x3e0dcf=>_0x3e0dcf['coin']==config[_0xed4a77(0x26e)]),_0xb2f29d=currentCoins['find'](_0x14aa8e=>_0x14aa8e['coin']==config[_0xed4a77(0x26e)]);if(_0x22c1c0[_0xed4a77(0x2f5)]>0x0){if(Math[_0xed4a77(0x2ed)](_0x1b7c08)*_0x4bbef3[_0xed4a77(0x2de)]>_0xb2f29d['number']-_0x22c1c0[_0xed4a77(0x2f5)])_0x2ed6e6=![];}else{if(Math[_0xed4a77(0x2ed)](_0x1b7c08)*_0x4bbef3[_0xed4a77(0x2de)]>_0xb2f29d[_0xed4a77(0x298)])_0x2ed6e6=![];}}return _0x2ed6e6;}async function getBalances(_0x36f264=!![]){const _0x5cc632=_0x2f06ad;let _0x38efe8=0x0,_0x5a2d2d;const _0x5e3467=config[_0x5cc632(0x1fc)];if(config[_0x5cc632(0x345)]&&config[_0x5cc632(0x33c)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x3fde1e=>{const _0x458a25=_0x5cc632;if(_0x3fde1e['coin']!=config[_0x458a25(0x26e)]){let _0x3dfec7=global[_0x458a25(0x1e1)][noslash(_0x3fde1e[_0x458a25(0x273)])];_0x5a2d2d=_0x3fde1e[_0x458a25(0x221)]?0x1/_0x3dfec7:_0x3dfec7;}else _0x5a2d2d=0x1;let _0x55859f=_0x3fde1e[_0x458a25(0x298)]*_0x5a2d2d;_0x38efe8+=_0x55859f,_0x3fde1e['last']=formatResult(Number(_0x5a2d2d),0x8),_0x3fde1e[_0x458a25(0x25c)]=_0x55859f;}),currentCoins[_0x5cc632(0x1dd)](_0x26a26e=>{const _0x2c2e2e=_0x5cc632;let _0x559fd3=config['portfolio'][_0x2c2e2e(0x304)](_0x334963=>_0x334963[_0x2c2e2e(0x1e2)]==_0x26a26e[_0x2c2e2e(0x1e2)]),_0x316989=Number(_0x559fd3[_0x2c2e2e(0x337)]),_0x5ce365=_0x26a26e[_0x2c2e2e(0x25c)]/_0x38efe8*0x64,_0x38b15b=_0x316989*_0x38efe8/0x64/_0x26a26e['last']-_0x26a26e[_0x2c2e2e(0x298)];_0x26a26e[_0x2c2e2e(0x337)]=formatResult(_0x5ce365,0x3),_0x26a26e['target']=formatResult(_0x316989,0x3),_0x26a26e[_0x2c2e2e(0x27c)]=formatResult(_0x38b15b,0x8),_0x26a26e[_0x2c2e2e(0x2d6)]='',_0x26a26e[_0x2c2e2e(0x34f)]=![];if(_0x26a26e[_0x2c2e2e(0x1e2)]!=config[_0x2c2e2e(0x26e)]){if(_0x26a26e['distribution']>_0x316989)_0x26a26e[_0x2c2e2e(0x2d6)]='sell',_0x26a26e['valid']=checkMinimums(_0x26a26e);else _0x26a26e[_0x2c2e2e(0x337)]<_0x316989&&(_0x26a26e[_0x2c2e2e(0x2d6)]=_0x2c2e2e(0x293),_0x26a26e[_0x2c2e2e(0x34f)]=checkMinimums(_0x26a26e));}_0x26a26e[_0x2c2e2e(0x2dd)]=_0x26a26e[_0x2c2e2e(0x337)]/_0x26a26e[_0x2c2e2e(0x214)]-0x1;if(_0x26a26e[_0x2c2e2e(0x263)]==_0x2c2e2e(0x2f6)||_0x26a26e[_0x2c2e2e(0x263)]=='canceled')_0x26a26e[_0x2c2e2e(0x263)]=_0x2c2e2e(0x1f2);}),currentCoins[_0x5cc632(0x21f)]((_0x5ac6e3,_0x4e928c)=>_0x5ac6e3['delta']<_0x4e928c[_0x5cc632(0x2dd)]?0x1:_0x4e928c[_0x5cc632(0x2dd)]<_0x5ac6e3[_0x5cc632(0x2dd)]?-0x1:0x0);const _0x125546=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x125546[_0x5cc632(0x342)],'usd':_0x125546[_0x5cc632(0x24e)],'portfolio':JSON[_0x5cc632(0x331)](currentCoins),'threshold':_0x5e3467},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x36f264){if(config[_0x5cc632(0x345)])headlessMode({'portfolio':currentCoins,'threshold':_0x5e3467});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5e3467});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2c021a=getNormalizedPerformance();getStartingBalances(_0x2c021a),emitPerformance(_0x2c021a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5e72c7=getNormalizedPerformance();emitPerformance(_0x5e72c7),getStartingBalances(_0x5e72c7),logger['debug'](_0x5cc632(0x2cd));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x258d4c=_0x2f06ad;if(!lastBalances)return;let _0x3035b7=[],_0x3dab0a,_0x22254e=JSON[_0x258d4c(0x2d7)](lastBalances[_0x258d4c(0x241)]);_0x22254e['sort']((_0x1ac5d8,_0x3cf1e8)=>_0x1ac5d8[_0x258d4c(0x1e2)]>_0x3cf1e8[_0x258d4c(0x1e2)]?0x1:_0x3cf1e8[_0x258d4c(0x1e2)]>_0x1ac5d8['coin']?-0x1:0x0),_0x22254e['forEach'](_0x1e4e56=>{const _0x1a99f9=_0x258d4c;let _0xde0dcb={'coin':_0x1e4e56['coin'],'number':_0x1e4e56['number'],'price':_0x1e4e56[_0x1a99f9(0x2de)]};_0x3035b7[_0x1a99f9(0x274)](_0xde0dcb);});const _0x1f92f5=await getFiat();_0x3dab0a={'date':lastBalances[_0x258d4c(0x235)]['split']('\x20')[0x0],'eur':_0x1f92f5[_0x258d4c(0x342)],'usd':_0x1f92f5[_0x258d4c(0x24e)],'coins':_0x3035b7};let _0x5ca785=dbPerformance[_0x258d4c(0x209)](_0x258d4c(0x2a3))['find']({'date':_0x3dab0a[_0x258d4c(0x278)]})[_0x258d4c(0x25c)]();_0x5ca785?_0x3dab0a[_0x258d4c(0x278)]!=config['startdate']&&dbPerformance[_0x258d4c(0x209)](_0x258d4c(0x2a3))['find']({'date':_0x3dab0a[_0x258d4c(0x278)]})[_0x258d4c(0x20d)](_0x3dab0a)[_0x258d4c(0x360)]():dbPerformance['get'](_0x258d4c(0x2a3))['push'](_0x3dab0a)[_0x258d4c(0x360)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2d5d21=_0x2f06ad;let _0x5219f6=[];if(dbPerformance[_0x2d5d21(0x1e8)](_0x2d5d21(0x2a3))[_0x2d5d21(0x25c)]()){let _0x5d506e=dbPerformance[_0x2d5d21(0x209)]('data')[_0x2d5d21(0x28d)]()[_0x2d5d21(0x2c0)](_0x2c597f=>{const _0x193f0d=_0x2d5d21;if(_0x2c597f['coins'][_0x193f0d(0x1f5)]==0x0)return![];else return!![];})[_0x2d5d21(0x2dc)](_0x2d5d21(0x278))[_0x2d5d21(0x25c)](),_0x54a8da=[...config[_0x2d5d21(0x354)]];_0x54a8da[_0x2d5d21(0x21f)]((_0x463565,_0x1bbf51)=>_0x463565[_0x2d5d21(0x278)]>_0x1bbf51[_0x2d5d21(0x278)]?-0x1:_0x1bbf51[_0x2d5d21(0x278)]>_0x463565[_0x2d5d21(0x278)]?0x1:0x0);let _0x2ddea8=0x1,_0x1e5f30=[],_0x1873d2=0x0;_0x5d506e[_0x2d5d21(0x262)]()['reverse']()['forEach']((_0x5f0ceb,_0x3c5493)=>{const _0x558455=_0x2d5d21;if(_0x54a8da[_0x1873d2]){if(_0x5d506e[_0x5d506e[_0x558455(0x1f5)]-_0x3c5493]&&_0x54a8da[_0x1873d2]['date']==_0x5d506e[_0x5d506e[_0x558455(0x1f5)]-_0x3c5493][_0x558455(0x278)]){if(_0x3c5493<_0x5d506e[_0x558455(0x1f5)]){let _0x2c97c5=0x0,_0x49eb76=0x0;_0x5d506e[_0x5d506e['length']-_0x3c5493][_0x558455(0x2d3)][_0x558455(0x1dd)](_0x652025=>{const _0x554369=_0x558455;_0x49eb76+=_0x652025[_0x554369(0x298)]*_0x652025[_0x554369(0x296)];}),_0x54a8da[_0x1873d2][_0x558455(0x223)][_0x558455(0x1dd)](_0x3fb8d7=>{const _0x3c2730=_0x558455;_0x2c97c5+=_0x3fb8d7[_0x3c2730(0x298)]*_0x3fb8d7['price'];}),_0x2ddea8*=_0x2c97c5/(_0x49eb76-_0x2c97c5)+0x1;}_0x1873d2++;}}let _0x43ad20=0x0;_0x5f0ceb['coins']['forEach'](_0x45b5a0=>{const _0x105721=_0x558455;_0x43ad20+=_0x45b5a0[_0x105721(0x298)]*_0x45b5a0[_0x105721(0x296)];}),_0x1e5f30[_0x5d506e[_0x558455(0x1f5)]-_0x3c5493-0x1]=_0x43ad20*(_0x2ddea8-0x1);});let _0x187733=[];_0x54a8da=[...config[_0x2d5d21(0x354)]]||[];let _0x2c56bc=0x0;_0x1873d2=0x0,_0x5d506e[_0x2d5d21(0x1dd)]((_0x3c2dc0,_0x4ed68e)=>{const _0x771955=_0x2d5d21;if(_0x54a8da[_0x1873d2]){const _0x599b66=fns[_0x771955(0x2d7)](_0x54a8da[_0x1873d2]['date'],'yyyy/MM/dd',new Date()),_0x1f6512=fns['parse'](_0x3c2dc0['date'],_0x771955(0x317),new Date());if(fns[_0x771955(0x27f)](_0x599b66,_0x1f6512)){let _0x502e1e=0x0;_0x54a8da[_0x1873d2]['changes'][_0x771955(0x1dd)](_0x3218ab=>{const _0x3788aa=_0x771955;!_0x187733[_0x3218ab[_0x3788aa(0x1e2)]]?_0x187733[_0x3218ab['coin']]=_0x3218ab['number']:(_0x502e1e=_0x187733[_0x3218ab[_0x3788aa(0x1e2)]],_0x187733[_0x3218ab[_0x3788aa(0x1e2)]]+=_0x3218ab['number']);const _0xea3031=_0x3c2dc0[_0x3788aa(0x2d3)][_0x3788aa(0x304)](_0x470f47=>_0x470f47[_0x3788aa(0x1e2)]==_0x3218ab['coin']);(!_0xea3031||_0xea3031['number']==0x0)&&(_0x2c56bc+=(-_0x3218ab[_0x3788aa(0x298)]-_0x502e1e)*_0x3218ab[_0x3788aa(0x296)]);}),_0x1873d2++;}}_0x3c2dc0[_0x771955(0x2d3)][_0x771955(0x1dd)]((_0x1b2f3e,_0x52ae6)=>{const _0x4d0a52=_0x771955;_0x187733[_0x1b2f3e[_0x4d0a52(0x1e2)]]&&(_0x1b2f3e['initial']=_0x187733[_0x1b2f3e[_0x4d0a52(0x1e2)]]);}),_0x5219f6[_0x771955(0x274)]({'date':_0x3c2dc0[_0x771955(0x278)],'eur':_0x3c2dc0[_0x771955(0x342)],'usd':_0x3c2dc0[_0x771955(0x24e)],'offset':_0x1e5f30[_0x4ed68e],'netoffset':_0x2c56bc,'coins':_0x3c2dc0[_0x771955(0x2d3)]});});}return _0x5219f6;}function emitPerformance(_0x3d520c){const _0x2734a5=_0x2f06ad;_0x3d520c[_0x2734a5(0x1f5)]!==0x0?(proxyEmit(_0x2734a5(0x28c),_0x3d520c),lastPerformanceEmitted=getDate()):proxyEmit(_0x2734a5(0x28c),[]);}function getPerf(_0x1cb1a0,_0x5009e1){const _0x707e37=_0x2f06ad;let _0x481798=0x0,_0x464668=0x0,_0x6e3e5d=0x0;_0x1cb1a0['coins'][_0x707e37(0x1dd)](_0x342a1f=>{const _0x1d7391=_0x707e37;_0x481798+=_0x342a1f['number']*_0x342a1f[_0x1d7391(0x296)];});_0x5009e1&&(_0x481798+=_0x1cb1a0[_0x707e37(0x2f5)]);if(config[_0x707e37(0x26e)]===_0x707e37(0x2bd)||config[_0x707e37(0x26e)]===_0x707e37(0x260))_0x464668=_0x481798*_0x1cb1a0[_0x707e37(0x342)],_0x6e3e5d=_0x481798*_0x1cb1a0[_0x707e37(0x24e)];else{if(usdBasecoins['includes'](config[_0x707e37(0x26e)]))_0x464668=_0x481798*_0x1cb1a0['eur']/_0x1cb1a0['usd'],_0x6e3e5d=_0x481798;else config['basecoin']===_0x707e37(0x258)&&(_0x464668=_0x481798,_0x6e3e5d=_0x481798*_0x1cb1a0[_0x707e37(0x24e)]/_0x1cb1a0[_0x707e37(0x342)]);}return[_0x481798,_0x464668,_0x6e3e5d];}function getKPIs(_0x2746bc,_0x104249=_0x2f06ad(0x258)){const _0x502516=_0x2f06ad,_0x1d95c5=config[_0x502516(0x26e)],_0x57570e=lastBalances,_0xda6e8a=currentCoins,_0x494496=getNormalizedPerformance(),_0x2d7547=_0x2746bc===_0x502516(0x26e)?_0x1d95c5:_0x2746bc===_0x502516(0x270)||_0x2746bc===_0x502516(0x2ba)?_0x104249:_0x502516(0x33a)+_0x1d95c5,_0x2c56b1=_0x2746bc===_0x502516(0x309)?_0x502516(0x30c):_0x2746bc===_0x502516(0x2ba)?_0x502516(0x30c):_0x2d7547+_0x502516(0x2aa),_0x4e5309=_0x2746bc==='net-basecoin'||_0x2746bc==='net-fiat'?_0x502516(0x30c):_0x2d7547+_0x502516(0x323);let _0xf73381=0x0;_0xda6e8a[_0x502516(0x1dd)](_0x2f4995=>{const _0x3c0a5c=_0x502516;_0xf73381+=_0x2f4995[_0x3c0a5c(0x298)]*_0x2f4995[_0x3c0a5c(0x2de)];});if(_0x2746bc===_0x502516(0x270)||_0x2746bc==='net-fiat'){if(_0x1d95c5===_0x502516(0x2bd)||_0x1d95c5===_0x502516(0x260))_0xf73381=_0xf73381*(_0x104249==='EUR'?_0x57570e[_0x502516(0x342)]:_0x57570e[_0x502516(0x24e)]);else{if(usdBasecoins[_0x502516(0x250)](_0x1d95c5))_0xf73381=_0xf73381*(_0x104249===_0x502516(0x258)?_0x57570e['eur']/_0x57570e[_0x502516(0x24e)]:0x1);else _0x1d95c5===_0x502516(0x258)&&(_0xf73381=_0xf73381*(_0x104249==='EUR'?0x1:_0x57570e[_0x502516(0x24e)]/_0x57570e['eur']));}}let _0x1c8a5b;if(_0xf73381!==0x0){if(_0x2746bc===_0x502516(0x26e))_0x1c8a5b=(_0xf73381/startingBalances[_0x502516(0x26e)]-0x1)*0x64;else{if(_0x104249===_0x502516(0x258))_0x1c8a5b=(_0xf73381/startingBalances[_0x502516(0x342)]-0x1)*0x64;else _0x1c8a5b=(_0xf73381/startingBalances[_0x502516(0x24e)]-0x1)*0x64;}let _0x21e2cb=0x0;if(startingBalances['coins'])_0xda6e8a[_0x502516(0x1dd)](_0x152484=>{const _0xede3aa=_0x502516;let _0x5db5d4=startingBalances[_0xede3aa(0x2d3)][_0xede3aa(0x304)](_0x5bfce0=>_0x5bfce0[_0xede3aa(0x1e2)]===_0x152484['coin']);if(_0x5db5d4&&_0x5db5d4['coin']&&_0x152484[_0xede3aa(0x298)]!==0x0)_0x21e2cb+=_0x5db5d4['number']*_0x152484[_0xede3aa(0x2de)];});let _0x3dae98=0x0;if(_0x494496[_0x502516(0x1f5)]!==0x0){let _0x2aff49=_0x494496[_0x494496[_0x502516(0x1f5)]-0x1];_0x3dae98=_0x2aff49[_0x502516(0x2fc)];}_0x21e2cb-=_0x3dae98;_0x2746bc===_0x502516(0x309)&&(_0x1c8a5b=(_0xf73381-_0x21e2cb)/startingBalances[_0x502516(0x26e)]*0x64,_0xf73381=_0xf73381-_0x21e2cb);if(_0x2746bc==='net-fiat'){let _0x2b61c3=_0x104249===_0x502516(0x258)?startingBalances[_0x502516(0x342)]:startingBalances[_0x502516(0x24e)];if(_0x1d95c5==='BTC'||_0x1d95c5===_0x502516(0x260))_0x21e2cb=_0x104249===_0x502516(0x258)?_0x21e2cb*_0x57570e['eur']:_0x21e2cb*_0x57570e[_0x502516(0x24e)];else{if(usdBasecoins[_0x502516(0x250)](_0x1d95c5))_0x21e2cb=_0x104249===_0x502516(0x258)?_0x21e2cb*_0x57570e[_0x502516(0x342)]/_0x57570e[_0x502516(0x24e)]:_0x21e2cb;else _0x1d95c5===_0x502516(0x258)&&(_0x21e2cb=_0x104249===_0x502516(0x258)?_0x21e2cb:_0x21e2cb*_0x57570e[_0x502516(0x24e)]/_0x57570e[_0x502516(0x342)]);}_0x1c8a5b=(_0xf73381-_0x21e2cb)/_0x2b61c3*0x64,_0xf73381=_0xf73381-_0x21e2cb;}if(_0x1c8a5b){if(_0x1c8a5b<0x64)_0x1c8a5b=_0x1c8a5b[_0x502516(0x1e9)](0x2);else{if(_0x1c8a5b<0x3e8)_0x1c8a5b=_0x1c8a5b['toFixed'](0x1);else _0x1c8a5b=_0x1c8a5b[_0x502516(0x1e9)](0x0);}}else _0x1c8a5b=Number('0')[_0x502516(0x1e9)](0x2);if(_0xf73381){if(Math[_0x502516(0x2ed)](_0xf73381)<0.000001)_0xf73381=_0xf73381[_0x502516(0x1e9)](0x2);else{if(Math[_0x502516(0x2ed)](_0xf73381)<0.1)_0xf73381=_0xf73381[_0x502516(0x1e9)](0x6);else{if(Math['abs'](_0xf73381)<0x1)_0xf73381=_0xf73381[_0x502516(0x1e9)](0x5);else{if(Math[_0x502516(0x2ed)](_0xf73381)<0xa)_0xf73381=_0xf73381['toFixed'](0x4);else{if(Math[_0x502516(0x2ed)](_0xf73381)<0x64)_0xf73381=_0xf73381[_0x502516(0x1e9)](0x3);else{if(Math[_0x502516(0x2ed)](_0xf73381)<0x3e8)_0xf73381=_0xf73381[_0x502516(0x1e9)](0x2);else _0xf73381=_0xf73381[_0x502516(0x1e9)](0x2);}}}}}}else _0xf73381=Number('0')[_0x502516(0x1e9)](0x2);}else _0x1c8a5b=Number('0')['toFixed'](0x2);return{'value':_0xf73381,'change':_0x1c8a5b,'leftTxt':_0x2c56b1,'rightTxt':_0x4e5309};}async function getStartingBalances(_0x1791a6,_0x411fb4=!![]){const _0x5e2cf0=_0x2f06ad;if(_0x1791a6[_0x5e2cf0(0x1f5)]!==0x0){const [_0xe6d5eb,_0x4d3549,_0x133c2f]=getPerf(_0x1791a6[0x0],!![]);let _0x9bc44f=[];config['portfolio'][_0x5e2cf0(0x1dd)](_0x6d8a0d=>{const _0x245a00=_0x5e2cf0;let _0x5365c7=0x0,_0x2aae0d;config[_0x245a00(0x354)][_0x245a00(0x1dd)](_0x123daf=>{const _0x66d257=_0x245a00;let _0x15821c=_0x123daf[_0x66d257(0x223)][_0x66d257(0x304)](_0x2c4508=>_0x2c4508[_0x66d257(0x1e2)]==_0x6d8a0d[_0x66d257(0x1e2)]);if(_0x15821c){_0x5365c7+=_0x15821c[_0x66d257(0x298)];if(!_0x2aae0d)_0x2aae0d=_0x15821c[_0x66d257(0x296)];}}),_0x9bc44f[_0x245a00(0x274)]({'coin':_0x6d8a0d[_0x245a00(0x1e2)],'number':_0x5365c7,'initialprice':_0x2aae0d});});const _0x5bd091={'basecoin':_0xe6d5eb,'eur':_0x4d3549,'usd':_0x133c2f,'coins':_0x9bc44f};if(_0x411fb4)proxyEmit(_0x5e2cf0(0x226),_0x5bd091);startingBalances=_0x5bd091;}}function headlessMode(_0x123d6f){const _0x17397f=_0x2f06ad;let _0x180c29=_0x123d6f[_0x17397f(0x241)],_0xfbb6d4=_0x123d6f['threshold'],_0x9b7d83=[];for(let _0x1ea739 of _0x180c29){if(_0x1ea739[_0x17397f(0x1e2)]!=config['basecoin']){if(_0x1ea739[_0x17397f(0x2dd)]>=_0xfbb6d4/0x64){if(_0x1ea739['valid'])_0x9b7d83[_0x17397f(0x274)](_0x1ea739);}else{if(_0x1ea739['delta']<=-_0xfbb6d4/0x64){if(_0x1ea739[_0x17397f(0x34f)])_0x9b7d83[_0x17397f(0x274)](_0x1ea739);}}}}_0x9b7d83[_0x17397f(0x1f5)]>0x0&&(lockOrders==ORDERS[_0x17397f(0x1e0)]&&!coolingDown&&_0x9b7d83['forEach'](_0x570da5=>{const _0x48c5cb=_0x17397f;logger['debug']('Trigger:\x20'+_0x570da5[_0x48c5cb(0x1e2)]+'\x20'+_0x570da5[_0x48c5cb(0x298)]+'\x20'+_0x570da5['last']+'\x20'+_0x570da5[_0x48c5cb(0x337)]+'%\x20'+_0x570da5[_0x48c5cb(0x214)]+'%\x20'+(0x64*_0x570da5[_0x48c5cb(0x2dd)])[_0x48c5cb(0x1e9)](0x2)+'%\x20('+_0xfbb6d4[_0x48c5cb(0x1e9)](0x2)+'%)');}),placeOrder(_0x9b7d83));}function notifyBalance(_0x963e59){const _0x17efd2=_0x2f06ad;let _0x291f64=_0x963e59[_0x17efd2(0x241)],_0x1d3e11=_0x963e59[_0x17efd2(0x1fc)],_0xf11da=[];for(let _0x5b58ce of _0x291f64){if(_0x5b58ce['coin']!=config[_0x17efd2(0x26e)]){if(_0x5b58ce[_0x17efd2(0x2dd)]>=_0x1d3e11/0x64){if(_0x5b58ce[_0x17efd2(0x34f)])_0xf11da[_0x17efd2(0x274)](_0x5b58ce);}else{if(_0x5b58ce['delta']<=-_0x1d3e11/0x64){if(_0x5b58ce[_0x17efd2(0x34f)])_0xf11da[_0x17efd2(0x274)](_0x5b58ce);}}}}if(_0xf11da[_0x17efd2(0x1f5)]>0x0){let _0x24db97=_0xf11da['map'](_0x254dff=>_0x254dff[_0x17efd2(0x1e2)]);_0x24db97[_0x17efd2(0x21f)]();let _0xa89c72=_0x24db97[_0x17efd2(0x1f3)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x17efd2(0x2c8));lastCoinsToBalance=_0xa89c72;}}function symbolToCoin(_0x5c3f9b){const _0x2ff87f=_0x2f06ad;let _0x18b64d;if(_0x5c3f9b[_0x2ff87f(0x250)]('/'+config['basecoin']))_0x18b64d=_0x5c3f9b[_0x2ff87f(0x2db)]('/'+config['basecoin'],'');if(_0x5c3f9b[_0x2ff87f(0x250)](config[_0x2ff87f(0x26e)]+'/'))_0x18b64d=_0x5c3f9b[_0x2ff87f(0x2db)](config[_0x2ff87f(0x26e)]+'/','');return _0x18b64d;}async function unlockOrders(){const _0x13b29f=_0x2f06ad;if(allOrdersPlaced&&lockOrders==ORDERS[_0x13b29f(0x307)]){logger[_0x13b29f(0x2ff)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x13b29f(0x200)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x220519=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x220519,validateOrdersState=_0x13b29f(0x346),persistOpenOrders([]),lockOrders=ORDERS[_0x13b29f(0x1e0)],logger[_0x13b29f(0x2ff)](_0x13b29f(0x365));}}async function validateOrders(_0x5c9072){const _0x1ded54=_0x2f06ad;if(_0x5c9072)validateOrdersState=_0x5c9072;logger[_0x1ded54(0x2ff)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x1ded54(0x33f)+(lockOrders==0x1?_0x1ded54(0x20a):lockOrders==0x2?_0x1ded54(0x1d5):_0x1ded54(0x2c4)));let _0x49b3f0=[],_0x1c84f4=config[_0x1ded54(0x26c)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x1ded54(0x2ff)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x1ded54(0x1dd)](_0xe2d082=>{const _0x26fd65=_0x1ded54;let _0x213688=![];_0xe2d082[_0x26fd65(0x2f6)]>0x0&&(_0x213688=!![]),_0x49b3f0[_0x26fd65(0x274)](_0x213688),_0x213688&&config[_0x26fd65(0x26c)]!=_0x26fd65(0x2f8)&&logHistory(_0x26fd65(0x356),'Order\x20filled:\x20'+_0xe2d082[_0x26fd65(0x273)]+'\x20'+_0xe2d082[_0x26fd65(0x2d6)]+'\x20#'+formatResult(_0xe2d082[_0x26fd65(0x2f6)],0x8)+'\x20@'+formatResult(_0xe2d082[_0x26fd65(0x296)],0x8));}),_0x49b3f0[_0x1ded54(0x1dd)]((_0x23481d,_0x478906)=>{if(_0x23481d)lastOrders['splice'](_0x478906,0x1);}),persistOpenOrders(lastOrders);const _0x5488e9=coolingDown?_0x1ded54(0x27b):_0x1ded54(0x24f);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x49b3f0['includes'](![])){if(config[_0x1ded54(0x26c)]==_0x1ded54(0x2f8)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x1ded54(0x222)){if(_0x49b3f0[_0x1ded54(0x250)](![])){}else{if(allOrdersPlaced){if(config[_0x1ded54(0x26c)]==_0x1ded54(0x2f8)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x1ded54(0x2c9))_0x49b3f0[_0x1ded54(0x250)](![])&&(config[_0x1ded54(0x26c)]==_0x1ded54(0x2f8)?logHistory(_0x1ded54(0x332),_0x1ded54(0x212)+Math[_0x1ded54(0x21a)](_0x1c84f4*validateOrderInterval/0xea60)+_0x1ded54(0x23a)+_0x5488e9):(await cancelOrders(),logHistory(_0x1ded54(0x332),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x1c84f4*validateOrderInterval/0xea60)+_0x1ded54(0x23a)+_0x5488e9))),await unlockOrders();else{if(validateOrdersState==_0x1ded54(0x286)){if(config[_0x1ded54(0x26c)]!=_0x1ded54(0x2f8))logHistory(_0x1ded54(0x332),_0x1ded54(0x362)+_0x5488e9);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x2fdcb9=>{const _0x2a8f31=_0x5d0e;try{const _0x18fb60=await exchange[_0x2a8f31(0x343)](_0x2fdcb9[_0x2a8f31(0x253)],_0x2fdcb9[_0x2a8f31(0x273)]);}catch(_0x479367){if(_0x479367[_0x2a8f31(0x2e2)]()['includes'](_0x2a8f31(0x272))){}else await handleError(_0x479367,_0x2a8f31(0x22b));}});}async function initCoinResults(_0x28e8a4){const _0x23a9cf=_0x2f06ad;_0x28e8a4?logger[_0x23a9cf(0x2ff)]('Resetting\x20coin\x20results:\x20'+_0x28e8a4):logger[_0x23a9cf(0x2ff)](_0x23a9cf(0x264)),config[_0x23a9cf(0x241)][_0x23a9cf(0x1dd)](_0x12fdc1=>{const _0x456e3e=_0x23a9cf;if(!_0x12fdc1[_0x456e3e(0x251)]&&_0x12fdc1[_0x456e3e(0x1e2)]!=config['basecoin']){const _0x3812a3=currentCoins[_0x456e3e(0x304)](_0x12bc7a=>_0x12bc7a[_0x456e3e(0x1e2)]==_0x12fdc1[_0x456e3e(0x1e2)]),_0x34e685=global[_0x456e3e(0x1e1)][noslash(_0x12fdc1[_0x456e3e(0x273)])];let _0x4f8ed2=_0x3812a3?_0x3812a3[_0x456e3e(0x298)]:null,_0x47f66b=_0x12fdc1[_0x456e3e(0x221)]?0x1/_0x34e685:_0x34e685,_0xd427ba;config[_0x456e3e(0x354)][_0x456e3e(0x1dd)](_0x2cb96c=>{const _0x20f9d0=_0x456e3e;!_0xd427ba&&(_0xd427ba=_0x2cb96c[_0x20f9d0(0x223)]['find'](_0x14ccc5=>_0x14ccc5[_0x20f9d0(0x1e2)]==_0x12fdc1[_0x20f9d0(0x1e2)]),_0xd427ba&&(_0x4f8ed2=_0xd427ba[_0x20f9d0(0x298)],_0x47f66b=_0xd427ba['price']));});let _0x5cf95c=dbCoinResults['get']('coins')[_0x456e3e(0x304)]({'coin':_0x12fdc1[_0x456e3e(0x1e2)]})[_0x456e3e(0x25c)]();if(!_0x5cf95c){const _0x5746f7={'coin':_0x12fdc1[_0x456e3e(0x1e2)],'number':_0x4f8ed2,'breakeven':_0x47f66b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x456e3e(0x209)](_0x456e3e(0x2d3))[_0x456e3e(0x274)](_0x5746f7)[_0x456e3e(0x360)]();}else{if(_0x28e8a4&&_0x12fdc1['coin']==_0x28e8a4){const _0x2f0f91={'coin':_0x12fdc1[_0x456e3e(0x1e2)],'number':_0x4f8ed2,'breakeven':_0x47f66b,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x456e3e(0x2d3))[_0x456e3e(0x304)]({'coin':_0x12fdc1['coin']})['assign'](_0x2f0f91)[_0x456e3e(0x360)]();}}}});}async function updateCoinResults(_0x5b0744,_0x4acb9b=![]){const _0x1da69b=_0x2f06ad;let _0x131be1,_0x1823d8,_0x109763,_0x5e4209,_0x207de1,_0xf01caa,_0x586e0b=dbCoinResults[_0x1da69b(0x209)](_0x1da69b(0x2d3))[_0x1da69b(0x304)]({'coin':_0x5b0744[_0x1da69b(0x1e2)]})[_0x1da69b(0x25c)](),_0x5ad335=![];_0x586e0b&&Object[_0x1da69b(0x1ea)](_0x586e0b)[_0x1da69b(0x1dd)](([_0x3ea22d,_0x2e8379])=>{if(_0x2e8379==null)_0x5ad335=!![];});(!_0x586e0b||_0x5ad335)&&(await initCoinResults(_0x5b0744[_0x1da69b(0x1e2)]),_0x586e0b=dbCoinResults['get'](_0x1da69b(0x2d3))[_0x1da69b(0x304)]({'coin':_0x5b0744['coin']})[_0x1da69b(0x25c)]());_0x5b0744[_0x1da69b(0x221)]&&(_0xf01caa={'filled':_0x5b0744[_0x1da69b(0x2f6)]*_0x5b0744[_0x1da69b(0x296)],'amount':_0x5b0744[_0x1da69b(0x2f6)]*_0x5b0744[_0x1da69b(0x296)],'side':_0x5b0744[_0x1da69b(0x2d6)]==_0x1da69b(0x2f0)?_0x1da69b(0x293):'sell','price':0x1/_0x5b0744['price']},_0x5b0744={..._0x5b0744,..._0xf01caa});_0x4acb9b?_0x1823d8=_0x5b0744[_0x1da69b(0x2d6)]==_0x1da69b(0x293)?_0x586e0b['number']+_0x5b0744[_0x1da69b(0x2f6)]:_0x586e0b[_0x1da69b(0x298)]-_0x5b0744['filled']:_0x1823d8=await getCoinNumber(_0x5b0744[_0x1da69b(0x1e2)]);if(_0x5b0744[_0x1da69b(0x352)]&&_0x5b0744[_0x1da69b(0x352)][_0x1da69b(0x1ee)]==config[_0x1da69b(0x26e)])_0x131be1=_0x5b0744['fee']['cost'];else{if(_0x5b0744[_0x1da69b(0x352)]&&_0x5b0744['fee'][_0x1da69b(0x1ee)]==_0x1da69b(0x254)&&!_0x4acb9b)_0x131be1=_0x5b0744[_0x1da69b(0x352)][_0x1da69b(0x300)]*global[_0x1da69b(0x1e1)]['BNB'+config[_0x1da69b(0x26e)]];else _0x131be1=defaultFee*_0x5b0744[_0x1da69b(0x2f6)]*_0x5b0744[_0x1da69b(0x296)];}_0x5b0744['side']==_0x1da69b(0x293)?(_0x109763=_0x1823d8!=0x0?(_0x586e0b['breakeven']*_0x586e0b[_0x1da69b(0x298)]+_0x5b0744[_0x1da69b(0x296)]*(_0x1823d8-_0x586e0b[_0x1da69b(0x298)])+_0x131be1)/_0x1823d8:0x0,_0x5e4209=_0x586e0b[_0x1da69b(0x22c)]):(_0x109763=_0x1823d8!=0x0?(_0x586e0b[_0x1da69b(0x33d)]*_0x586e0b[_0x1da69b(0x298)]-_0x5b0744['price']*(_0x586e0b['number']-_0x1823d8)+_0x131be1)/_0x1823d8:0x0,_0x5e4209=_0x586e0b[_0x1da69b(0x22c)]+(_0x5b0744[_0x1da69b(0x296)]-_0x586e0b['breakeven'])*_0x5b0744['filled']);_0x207de1=(_0x5b0744['price']-_0x109763-_0x131be1/_0x5b0744[_0x1da69b(0x2f6)])*_0x1823d8;let _0x355065={'coin':_0x5b0744[_0x1da69b(0x1e2)],'number':_0x1823d8,'breakeven':formatResult(_0x109763,0x8),'realized':formatResult(_0x5e4209,0x8),'unrealized':formatResult(_0x207de1,0x8),'fees':formatResult(_0x586e0b[_0x1da69b(0x2d8)]+_0x131be1,0x8),'sells':_0x5b0744[_0x1da69b(0x2d6)]==_0x1da69b(0x2f0)?_0x586e0b[_0x1da69b(0x289)]+0x1:_0x586e0b[_0x1da69b(0x289)],'buys':_0x5b0744[_0x1da69b(0x2d6)]=='buy'?_0x586e0b[_0x1da69b(0x219)]+0x1:_0x586e0b['buys']};dbCoinResults['get'](_0x1da69b(0x2d3))['find']({'coin':_0x5b0744[_0x1da69b(0x1e2)]})['assign'](_0x355065)[_0x1da69b(0x360)]();if(!_0x4acb9b){if(_0x5b0744[_0x1da69b(0x352)]&&_0x5b0744[_0x1da69b(0x352)]['currency']==_0x1da69b(0x254)){const _0x41f5f4=currentCoins['find'](_0x23ca5b=>_0x23ca5b['coin']=='BNB');if(_0x41f5f4){let _0x99c707=dbCoinResults[_0x1da69b(0x209)](_0x1da69b(0x2d3))[_0x1da69b(0x304)]({'coin':_0x1da69b(0x254)})[_0x1da69b(0x25c)]();_0x355065={..._0x99c707,'number':_0x41f5f4[_0x1da69b(0x298)]},dbCoinResults[_0x1da69b(0x209)]('coins')[_0x1da69b(0x304)]({'coin':_0x1da69b(0x254)})[_0x1da69b(0x20d)](_0x355065)[_0x1da69b(0x360)]();}}}}async function placeOrder(_0x259ac6){const _0x5ac50b=_0x2f06ad,_0x37b169=config['ordertype']==_0x5ac50b(0x2f8)?_0x5ac50b(0x2f8):_0x5ac50b(0x35f);if(lockOrders==ORDERS[_0x5ac50b(0x1e0)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x5ac50b(0x307)],allOrdersPlaced=![],validateOrdersState=_0x5ac50b(0x346);let _0x9f8f19=![];lastOrders=[];for(const _0x5c3766 of _0x259ac6){let _0x2c56b5,_0x280b39,_0x4f4d7d,_0x204866,_0x20d4b3,_0x336b97=_0x5c3766['symbol'];try{const _0x4cbb6a=await exchange[_0x5ac50b(0x27e)](_0x336b97);_0x2c56b5=_0x5c3766[_0x5ac50b(0x221)]?0x1/_0x5c3766['last']:_0x5c3766['last'],_0x280b39=_0x4cbb6a['bid'],_0x4f4d7d=_0x4cbb6a[_0x5ac50b(0x1d6)];_0x5c3766[_0x5ac50b(0x221)]?(_0x204866=_0x5c3766['side']==_0x5ac50b(0x293)?'sell':'buy',_0x20d4b3=Math['abs'](_0x5c3766[_0x5ac50b(0x27c)])/_0x2c56b5):(_0x204866=_0x5c3766[_0x5ac50b(0x2d6)],_0x20d4b3=Math[_0x5ac50b(0x2ed)](_0x5c3766[_0x5ac50b(0x27c)]));_0x37b169==_0x5ac50b(0x35f)&&(config[_0x5ac50b(0x26c)]==_0x5ac50b(0x2a1)&&(_0x2c56b5=_0x204866=='buy'?_0x280b39:_0x4f4d7d),config['ordertype']=='limit-low'&&(_0x2c56b5=_0x204866=='buy'?_0x4f4d7d:_0x280b39));_0x20d4b3=formatResult(_0x20d4b3,0x8),_0x2c56b5=formatResult(_0x2c56b5,0x8);const _0x4e82a4=_0x204866==_0x5ac50b(0x2f0)?config[_0x5ac50b(0x2c7)]?String[_0x5ac50b(0x213)]('0x'+config['emojisell'])+'\x20':'':config[_0x5ac50b(0x1dc)]?String[_0x5ac50b(0x213)]('0x'+config[_0x5ac50b(0x1dc)])+'\x20':'',_0x57687d=_0x37b169==_0x5ac50b(0x2f8)?_0x5ac50b(0x27d):config[_0x5ac50b(0x26c)]==_0x5ac50b(0x2a1)?'Limit\x20(high-margin)':_0x5ac50b(0x20e),_0x124b4c=(Math['floor'](Math[_0x5ac50b(0x261)]()*0x35a4e900)+0x5f5e100)[_0x5ac50b(0x2e2)]();lastOrders[_0x5ac50b(0x274)]({'customId':_0x124b4c,'symbol':_0x336b97,'coin':_0x5c3766['coin'],'amount':_0x20d4b3,'price':_0x2c56b5,'side':_0x204866,'reverse':_0x5c3766[_0x5ac50b(0x221)],'filled':0x0});if(_0x37b169=='market')logHistory('order',''+_0x4e82a4+_0x57687d+_0x5ac50b(0x22a)+_0x336b97+'\x20'+_0x204866+'\x20#'+formatResult(_0x20d4b3,0x8)+'\x20@'+formatResult(_0x2c56b5,0x8));else logHistory(_0x5ac50b(0x356),''+_0x4e82a4+_0x57687d+_0x5ac50b(0x22a)+_0x336b97+'\x20'+_0x204866+'\x20#'+formatResult(_0x20d4b3,0x8)+'\x20@'+formatResult(_0x2c56b5,0x8));let _0x10294e;_0x37b169==_0x5ac50b(0x2f8)?_0x204866==_0x5ac50b(0x293)&&[_0x5ac50b(0x325),'Bitget',_0x5ac50b(0x1f9),_0x5ac50b(0x237),'Huobipro'][_0x5ac50b(0x250)](config[_0x5ac50b(0x211)])?_0x10294e=await exchange['createOrder'](_0x336b97,_0x37b169,_0x204866,_0x20d4b3,_0x2c56b5):_0x10294e=await exchange['createOrder'](_0x336b97,_0x37b169,_0x204866,_0x20d4b3,undefined):_0x10294e=await exchange[_0x5ac50b(0x2b1)](_0x336b97,_0x37b169,_0x204866,_0x20d4b3,_0x2c56b5);logger[_0x5ac50b(0x2ff)]('ID:\x20'+_0x10294e['id']+'\x20|\x20Custom\x20ID:\x20'+_0x124b4c);const _0x18c8a9=lastOrders[_0x5ac50b(0x1f5)]-0x1;if(_0x18c8a9>=0x0&&lastOrders[_0x18c8a9][_0x5ac50b(0x30e)]==_0x124b4c){lastOrders[_0x18c8a9][_0x5ac50b(0x253)]=_0x10294e['id'];if(_0x10294e['amount'])lastOrders[_0x18c8a9][_0x5ac50b(0x2d4)]=_0x10294e[_0x5ac50b(0x2d4)];if(_0x10294e['price'])lastOrders[_0x18c8a9][_0x5ac50b(0x296)]=_0x10294e[_0x5ac50b(0x296)];lastOrders[_0x18c8a9][_0x5ac50b(0x352)]=_0x10294e[_0x5ac50b(0x352)];}if(config[_0x5ac50b(0x21e)]!=0x0){let _0x478a10=null;if(cooldownTracker['length']==config[_0x5ac50b(0x21e)]-0x1)_0x478a10=cooldownTracker[_0x5ac50b(0x23c)]();const _0x155d15=getTimeStamp();cooldownTracker[_0x5ac50b(0x274)](_0x155d15);if(_0x478a10){const _0x3e6f0e=fns[_0x5ac50b(0x2a5)](new Date(_0x155d15),new Date(_0x478a10));if(_0x3e6f0e<cooldownInterval){logHistory(_0x5ac50b(0x206),_0x5ac50b(0x26b)+config[_0x5ac50b(0x21e)]+_0x5ac50b(0x268)+cooldownInterval/0x3c+_0x5ac50b(0x240)+cooldownPeriod/(0xe10*0x3e8)+_0x5ac50b(0x28e)),coolingDown=!![];break;}}}}catch(_0x293648){if(_0x293648['toString']()['includes'](_0x5ac50b(0x2f7)))lastOrders=lastOrders[_0x5ac50b(0x2c0)](_0x8af99e=>_0x8af99e[_0x5ac50b(0x273)]!=_0x336b97),logHistory(_0x5ac50b(0x206),_0x5ac50b(0x305)+_0x336b97),_0x9f8f19=!![];else{if(_0x293648[_0x5ac50b(0x2e2)]()[_0x5ac50b(0x250)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x5ac50b(0x2c0)](_0x4c5525=>_0x4c5525[_0x5ac50b(0x273)]!=_0x336b97),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x336b97),_0x9f8f19=!![];else{if(_0x293648['toString']()[_0x5ac50b(0x250)](_0x5ac50b(0x2ee)))lastOrders=lastOrders[_0x5ac50b(0x2c0)](_0x580504=>_0x580504[_0x5ac50b(0x273)]!=_0x336b97),logHistory(_0x5ac50b(0x206),_0x5ac50b(0x30f)+_0x336b97),logger[_0x5ac50b(0x2ff)](_0x293648),_0x9f8f19=!![];else _0x293648[_0x5ac50b(0x2e2)]()[_0x5ac50b(0x250)](_0x5ac50b(0x351))?(lastOrders=lastOrders[_0x5ac50b(0x2c0)](_0x3f84de=>_0x3f84de[_0x5ac50b(0x273)]!=_0x336b97),logHistory(_0x5ac50b(0x206),_0x5ac50b(0x305)+_0x336b97),_0x9f8f19=!![]):(lastOrders=lastOrders[_0x5ac50b(0x2c0)](_0x38081e=>_0x38081e[_0x5ac50b(0x273)]!=_0x336b97),await handleError(_0x293648,'placeOrder()',_0x336b97));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5ac50b(0x1f5)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x35d5ee=config[_0x5ac50b(0x26c)]==_0x5ac50b(0x2f8)?validateOrderTimeout*0x3c*0x3e8:config[_0x5ac50b(0x355)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x35d5ee);}else unlockOrders();_0x9f8f19&&config[_0x5ac50b(0x345)]&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5ac50b(0x332),_0x5ac50b(0x1d4)));}else{if(coolingDown)!config[_0x5ac50b(0x345)]&&logHistory('error',_0x5ac50b(0x257));else lockOrders!=ORDERS[_0x5ac50b(0x1e0)]&&(!config['headless']&&(config['ordertype']=='market'?logHistory(_0x5ac50b(0x206),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x5ac50b(0x2ef))));}}function persistOpenOrders(_0x3d5bae){const _0x375be3=_0x2f06ad,_0x54529f={...config,'openOrders':_0x3d5bae};let _0x3db8f8=dbConfig[_0x375be3(0x209)](_0x375be3(0x2e5))['find']({'botID':botID})[_0x375be3(0x25c)]();_0x3db8f8&&dbConfig[_0x375be3(0x209)](_0x375be3(0x2e5))[_0x375be3(0x304)]({'botID':botID})[_0x375be3(0x20d)](_0x54529f)['write']();}function restoreOrders(){const _0x1fd956=_0x2f06ad;let _0x1a9290;config[_0x1fd956(0x35d)]&&allOpenOrders[_0x1fd956(0x1dd)](_0x27819e=>{const _0xce2f2d=_0x1fd956,_0x1f15e8=config[_0xce2f2d(0x35d)][_0xce2f2d(0x304)](_0x13152b=>_0x13152b[_0xce2f2d(0x253)]==_0x27819e['id']);_0x1f15e8&&(lastOrders[_0xce2f2d(0x274)](_0x1f15e8),_0x1a9290=_0x27819e[_0xce2f2d(0x2af)]);});if(lastOrders[_0x1fd956(0x1f5)]>0x0){lockOrders=ORDERS[_0x1fd956(0x307)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x4d4227=new Date()[_0x1fd956(0x287)](),_0x5d171f=config[_0x1fd956(0x26c)]==_0x1fd956(0x2f8)?validateOrderTimeout*0x3c*0x3e8:config[_0x1fd956(0x355)]*0x3c*0x3e8;if(_0x1a9290+_0x5d171f>_0x4d4227){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1e6e0e=_0x1fd956;validateOrders(_0x1e6e0e(0x2c9));},_0x1a9290+_0x5d171f-_0x4d4227);}else validateOrders(_0x1fd956(0x2c9));}}async function sendMetricsTelegram(){const _0x5ed859=_0x2f06ad;if(!coinsLoaded){process[_0x5ed859(0x31b)]({'telegrammsg':_0x5ed859(0x248)},_0x3096ae=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x41770b='';if(config[_0x5ed859(0x247)])_0x41770b=_0x5ed859(0x32a)+config[_0x5ed859(0x1ff)]+_0x5ed859(0x314);else _0x41770b=_0x5ed859(0x246)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x32d84e=getKPIs(_0x5ed859(0x26e)),_0x22ac1c=getKPIs('fiat',config['fiat']),_0x241bb2=getKPIs(_0x5ed859(0x309)),_0x9fc5ce=getKPIs(_0x5ed859(0x2ba),config[_0x5ed859(0x270)]);_0x41770b+=_0x5ed859(0x217),_0x41770b+=_0x32d84e[_0x5ed859(0x275)]+_0x5ed859(0x23f)+_0x32d84e['value']+'\x0a',_0x41770b+=_0x32d84e[_0x5ed859(0x228)]+':\x20'+_0x32d84e[_0x5ed859(0x329)]+'%\x0a',_0x41770b+=_0x22ac1c[_0x5ed859(0x275)]+_0x5ed859(0x23f)+_0x22ac1c[_0x5ed859(0x25c)]+'\x0a',_0x41770b+=_0x22ac1c['rightTxt']+':\x20'+_0x22ac1c[_0x5ed859(0x329)]+'%\x0a',_0x41770b+=_0x241bb2[_0x5ed859(0x275)]+':\x20'+_0x241bb2[_0x5ed859(0x25c)]+'\x20('+config[_0x5ed859(0x26e)]+')\x0a',_0x41770b+=_0x241bb2[_0x5ed859(0x228)]+':\x20'+_0x241bb2['change']+'%\x20('+config[_0x5ed859(0x26e)]+')\x0a',_0x41770b+=_0x9fc5ce[_0x5ed859(0x275)]+':\x20'+_0x9fc5ce[_0x5ed859(0x25c)]+'\x20('+config[_0x5ed859(0x270)]+')\x0a',_0x41770b+=_0x9fc5ce[_0x5ed859(0x228)]+':\x20'+_0x9fc5ce[_0x5ed859(0x329)]+'%\x20('+config[_0x5ed859(0x270)]+')\x0a',_0x41770b+=_0x5ed859(0x316),process['send']({'telegrammsg':_0x41770b},_0x15b4d0=>{});}async function sendPortfolioTelegram(){const _0x202bfe=_0x2f06ad;if(!coinsLoaded){process[_0x202bfe(0x31b)]({'telegrammsg':_0x202bfe(0x248)},_0x440e74=>{});return;}let _0xf28c7f='';if(config[_0x202bfe(0x247)])_0xf28c7f=_0x202bfe(0x32a)+config[_0x202bfe(0x1ff)]+_0x202bfe(0x215);else _0xf28c7f='<b>Bot\x20'+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0xf28c7f+='<pre>',_0xf28c7f+=_0x202bfe(0x24d),_0xf28c7f+=_0x202bfe(0x249),_0xf28c7f+=_0x202bfe(0x24d),currentCoins[_0x202bfe(0x1dd)](_0x136ff6=>{const _0x3efbc4=_0x202bfe;_0xf28c7f+=_0x136ff6[_0x3efbc4(0x1e2)][_0x3efbc4(0x281)](0x7)+'|\x20'+formatPad(_0x136ff6[_0x3efbc4(0x337)],0x2,0x6)+'|\x20'+formatPad(_0x136ff6['target'],0x2,0x6)+'|\x20'+formatPad(_0x136ff6[_0x3efbc4(0x2dd)]*0x64,0x2,0x6)+'\x0a';}),_0xf28c7f+=_0x202bfe(0x316),process[_0x202bfe(0x31b)]({'telegrammsg':_0xf28c7f},_0xe90e2d=>{});}function formatPad(_0x234e0f,_0x1185a1,_0x277530){const _0x32f1e9=_0x2f06ad,_0x20497b=formatResultString(_0x234e0f,_0x1185a1);return _0x20497b?_0x20497b['padStart'](_0x277530):''[_0x32f1e9(0x1e5)](_0x277530);}function logHistory(_0x5d38eb,_0x53dc7d,_0x242730=''){const _0x55ce3d=_0x2f06ad;logger[_0x55ce3d(0x24c)](''+_0x53dc7d);let _0x470b74={'time':getTimeStamp(),'type':_0x5d38eb,'event':_0x53dc7d};dbLogs[_0x55ce3d(0x209)](_0x55ce3d(0x2ae))[_0x55ce3d(0x274)](_0x470b74)[_0x55ce3d(0x360)]();if(_0x242730=='')_0x242730=_0x53dc7d;proxyEmit(_0x55ce3d(0x2cb),{'log':_0x470b74,'summary':_0x242730}),process[_0x55ce3d(0x31b)]({'telegram':{..._0x470b74,'botname':config[_0x55ce3d(0x1ff)],'showname':config[_0x55ce3d(0x247)]}},_0x4644f0=>{});}function emitHistory(_0x2734ea={}){const _0x3915b8=_0x2f06ad;Object[_0x3915b8(0x2a4)](_0x2734ea)[_0x3915b8(0x1f5)]==0x0&&(_0x2734ea={'type':[_0x3915b8(0x356),_0x3915b8(0x2cb)],'event':'','page':0x1});if(_0x2734ea[_0x3915b8(0x357)][_0x3915b8(0x250)](_0x3915b8(0x2cb)))_0x2734ea[_0x3915b8(0x357)][_0x3915b8(0x339)](_0x2734ea[_0x3915b8(0x357)]['indexOf'](_0x3915b8(0x2cb)),0x1,_0x3915b8(0x206),'warning',_0x3915b8(0x332));if(dbLogs[_0x3915b8(0x1e8)]('logs')[_0x3915b8(0x25c)]()){let _0x2f4cd1=dbLogs['get'](_0x3915b8(0x2ae))[_0x3915b8(0x2c0)](_0x2f4f09=>{const _0x52ec01=_0x3915b8;if(_0x2734ea['type']['length']==0x0)return![];else return _0x2734ea[_0x52ec01(0x357)][_0x52ec01(0x250)](_0x2f4f09['type']);})[_0x3915b8(0x2c0)](_0x167a75=>{const _0x79fc54=_0x3915b8;if(_0x2734ea[_0x79fc54(0x2cb)]=='')return!![];else return _0x167a75[_0x79fc54(0x2cb)][_0x79fc54(0x205)]()[_0x79fc54(0x250)](_0x2734ea[_0x79fc54(0x2cb)][_0x79fc54(0x205)]());})[_0x3915b8(0x2dc)](_0x3915b8(0x235)),_0x1c5db1=_0x2f4cd1[_0x3915b8(0x25c)]()[_0x3915b8(0x1f5)];_0x2f4cd1=_0x2f4cd1[_0x3915b8(0x221)]()['slice']((_0x2734ea[_0x3915b8(0x363)]-0x1)*logPageSize,_0x2734ea[_0x3915b8(0x363)]*logPageSize-0x1)[_0x3915b8(0x221)]()['value'](),proxyEmit(_0x3915b8(0x2ea),{'logs':_0x2f4cd1,'total':_0x1c5db1});}else proxyEmit(_0x3915b8(0x2ea),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x28ce66){const _0x448185=_0x2f06ad;if(dbLogs[_0x448185(0x1e8)](_0x448185(0x2ae))['value']()){const _0x528df1=dbLogs[_0x448185(0x209)](_0x448185(0x2ae))[_0x448185(0x2dc)]('time')[_0x448185(0x2c0)](_0x4ddc1a=>{const _0x4a5083=_0x448185;return _0x4ddc1a[_0x4a5083(0x357)]==_0x4a5083(0x356);})[_0x448185(0x25c)]();dbLogs[_0x448185(0x209)](_0x448185(0x2ae))['remove']()[_0x448185(0x360)](),dbLogs[_0x448185(0x209)](_0x448185(0x2ae))[_0x448185(0x20d)](_0x528df1)[_0x448185(0x360)](),emitHistory(_0x28ce66);}}async function pauseBot(_0x2e1b54=pauseBotInterval){const _0x2fb5bb=_0x2f06ad,_0x2edd5b=new Date()[_0x2fb5bb(0x287)]();if(!lastErrorShown||_0x2edd5b-lastErrorShown>=_0x2e1b54){lastErrorShown=_0x2edd5b;!lastBotPause?(lastBotPause=_0x2edd5b,consecutivePauses=0x1):(_0x2edd5b-lastBotPause-_0x2e1b54<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2fb5bb(0x31b)]({'stop':_0x2fb5bb(0x283)},_0xe561b4=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2fb5bb(0x287)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x2e1b54),botPaused=![],reset(!![]);}}}async function killBot(){const _0x3bfe0c=_0x2f06ad;botPaused=!![],await sleep(0x3e8),process[_0x3bfe0c(0x31b)]({'stop':_0x3bfe0c(0x280)},_0x3fa869=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2a18b5,_0x49a618){const _0x12dae6=_0x2f06ad;if(botPaused)return;const _0x50b3c3=config[_0x12dae6(0x211)]||_0x12dae6(0x321);if(_0x49a618)logger['debug'](_0x12dae6(0x328)+_0x49a618);const _0x558f78=()=>{const _0x515a08=_0x12dae6;loading[_0x515a08(0x206)]=!![],emitLoadingProgress();};if(_0x2a18b5[_0x12dae6(0x2e2)]()[_0x12dae6(0x250)]('API-key\x20format\x20invalid'))logHistory(_0x12dae6(0x206),_0x50b3c3+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),_0x558f78();else{if(_0x2a18b5[_0x12dae6(0x2e2)]()['includes'](_0x12dae6(0x232)))logHistory(_0x12dae6(0x206),_0x50b3c3+_0x12dae6(0x320)),_0x558f78();else _0x2a18b5['toString']()[_0x12dae6(0x250)](_0x12dae6(0x33e))?(logHistory('error',_0x50b3c3+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x12dae6(0x206),_0x12dae6(0x2e3)),_0x558f78()):await handleError(_0x2a18b5,null);}}async function handleError(_0xb8a5b9,_0x5dc463,_0x11b8f7=''){const _0x120b38=_0x2f06ad;if(botPaused)return;const _0x139b6e=config[_0x120b38(0x211)]||_0x120b38(0x321);if(_0x5dc463)logger[_0x120b38(0x2ff)]('Exception\x20thrown\x20in\x20'+_0x5dc463);if(_0xb8a5b9[_0x120b38(0x2e2)]()['includes']('DDoSProtection')||_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x239)))logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x2ab)+pauseBotMsg),await pauseBot();else{if(_0xb8a5b9['toString']()[_0x120b38(0x250)](_0x120b38(0x358))||_0xb8a5b9['toString']()[_0x120b38(0x250)](_0x120b38(0x2b4)))logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x259)+pauseBotMsg),await pauseBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x31f)))logHistory(_0x120b38(0x206),_0x139b6e+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x231)))logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x302)+pauseBotMsg),await pauseBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x32f)))logHistory(_0x120b38(0x206),_0x120b38(0x2c1)),logHistory('error',_0x120b38(0x364)),await killBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)]('InvalidNonce'))logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x1e4)+pauseBotMsgLong),logHistory(_0x120b38(0x206),_0x120b38(0x2bc)),await pauseBot(pauseBotIntervalLong);else{if(_0xb8a5b9 instanceof ccxt['NetworkError'])logHistory(_0x120b38(0x206),_0x139b6e+'\x20network\x20error'+pauseBotMsg),logger[_0x120b38(0x2ff)](_0x120b38(0x2eb),_0xb8a5b9),await pauseBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()['includes'](_0x120b38(0x256)))logHistory('error',_0x139b6e+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x120b38(0x206),_0x120b38(0x364)),await killBot();else{if(_0xb8a5b9['toString']()[_0x120b38(0x250)](_0x120b38(0x232)))logHistory('error',_0x139b6e+_0x120b38(0x1f7)),logHistory(_0x120b38(0x206),_0x120b38(0x364)),await killBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x33e)))logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x234)),logHistory(_0x120b38(0x206),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)](_0x120b38(0x1d8)))logHistory('error',_0x139b6e+_0x120b38(0x203)),logHistory(_0x120b38(0x206),_0x120b38(0x364)),await killBot();else{if(_0xb8a5b9[_0x120b38(0x2e2)]()[_0x120b38(0x250)]('InsufficientFunds'))logHistory(_0x120b38(0x206),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x11b8f7);else _0xb8a5b9 instanceof ccxt[_0x120b38(0x2fd)]?(logHistory(_0x120b38(0x206),_0x139b6e+_0x120b38(0x338)),logger[_0x120b38(0x2ff)](_0x120b38(0x2eb),_0xb8a5b9)):(logHistory(_0x120b38(0x206),_0x120b38(0x255)+pauseBotMsg),logger[_0x120b38(0x2ff)](_0x120b38(0x2eb),_0xb8a5b9),await pauseBot());}}}}}}}}}}}}function formatResult(_0x26418e,_0x39df60){const _0x1cd8db=_0x2f06ad;return parseFloat(_0x26418e[_0x1cd8db(0x1e9)](_0x39df60));}function formatResultTruncate(_0x14fcd1,_0x32c2f0){const _0x5d1865=_0x2f06ad;let _0x48b781=formatResultString(_0x14fcd1,0xa),_0x562c36=_0x48b781['indexOf']('.');return _0x562c36!=-0x1&&(_0x48b781=_0x48b781[_0x5d1865(0x262)](0x0,_0x562c36+_0x32c2f0+0x1)),Number(_0x48b781);}function formatResultString(_0x3160a1,_0xb2e997){const _0x2b8737=_0x2f06ad;let _0x515965;if(!(''+_0x3160a1)[_0x2b8737(0x250)]('e'))_0x515965=+(Math['round'](_0x3160a1+'e+'+_0xb2e997)+'e-'+_0xb2e997);else{let _0x1999c4=(''+_0x3160a1)['split']('e'),_0x5d102f='';+_0x1999c4[0x1]+_0xb2e997>0x0&&(_0x5d102f='+'),_0x515965=+(Math[_0x2b8737(0x21a)](+_0x1999c4[0x0]+'e'+_0x5d102f+(+_0x1999c4[0x1]+_0xb2e997))+'e-'+_0xb2e997);}return Number(_0x515965)[_0x2b8737(0x1e9)](_0xb2e997);}function getServerTime(){const _0x73870b=_0x2f06ad,_0x2c0486=new Date();return _0x2c0486[_0x73870b(0x2ce)]()+'/'+(_0x2c0486[_0x73870b(0x31a)]()+0x1)[_0x73870b(0x2e2)]()[_0x73870b(0x1e5)](0x2,'0')+'/'+_0x2c0486[_0x73870b(0x282)]()[_0x73870b(0x2e2)]()[_0x73870b(0x1e5)](0x2,'0')+'\x20'+_0x2c0486['getHours']()[_0x73870b(0x2e2)]()[_0x73870b(0x1e5)](0x2,'0')+':'+_0x2c0486[_0x73870b(0x2f3)]()['toString']()['padStart'](0x2,'0')+':'+_0x2c0486['getSeconds']()['toString']()[_0x73870b(0x1e5)](0x2,'0');}function getTimeStamp(){const _0x62d721=_0x2f06ad,_0x3c7db7=shiftedTime();return _0x3c7db7[_0x62d721(0x2ce)]()+'/'+(_0x3c7db7['getMonth']()+0x1)[_0x62d721(0x2e2)]()['padStart'](0x2,'0')+'/'+_0x3c7db7[_0x62d721(0x282)]()['toString']()[_0x62d721(0x1e5)](0x2,'0')+'\x20'+_0x3c7db7[_0x62d721(0x35a)]()[_0x62d721(0x2e2)]()[_0x62d721(0x1e5)](0x2,'0')+':'+_0x3c7db7[_0x62d721(0x2f3)]()['toString']()[_0x62d721(0x1e5)](0x2,'0')+':'+_0x3c7db7[_0x62d721(0x335)]()[_0x62d721(0x2e2)]()[_0x62d721(0x1e5)](0x2,'0');}function getDate(){const _0x1d532e=_0x2f06ad,_0x4e09bd=shiftedTime();return _0x4e09bd[_0x1d532e(0x2ce)]()+'/'+(_0x4e09bd[_0x1d532e(0x31a)]()+0x1)[_0x1d532e(0x2e2)]()[_0x1d532e(0x1e5)](0x2,'0')+'/'+_0x4e09bd[_0x1d532e(0x282)]()['toString']()[_0x1d532e(0x1e5)](0x2,'0');}function getHour(){const _0x5c3b2d=_0x2f06ad,_0x511f23=shiftedTime();return _0x511f23[_0x5c3b2d(0x35a)]()[_0x5c3b2d(0x2e2)]()[_0x5c3b2d(0x1e5)](0x2,'0');}function sleep(_0x1926ac){return new Promise(_0x497d54=>setTimeout(_0x497d54,_0x1926ac));}function shiftedTime(){const _0x5163d4=_0x2f06ad,_0x51ca4c=new Date();let _0x522d60=_0x51ca4c;if(config&&config[_0x5163d4(0x2c6)]!==0x0)_0x522d60=fns[_0x5163d4(0x25a)](_0x51ca4c,{'hours':config[_0x5163d4(0x2c6)]});return _0x522d60;}function timer(_0x2fec66){const _0x2b200f=_0x2f06ad,_0xf82926=new Date();!lasttime?console['log'](getTimeStamp()+_0x2b200f(0x2b8),_0x2fec66,_0xf82926):console['log'](getTimeStamp()+':\x20timer\x20>',_0x2fec66,(_0xf82926-lasttime)/0x3e8),lasttime=_0xf82926;}