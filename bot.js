const _0x3da5bc=_0x1837;(function(_0x2ff8fe,_0x521861){const _0x903f7a=_0x1837,_0x5f7b7d=_0x2ff8fe();while(!![]){try{const _0x39f873=-parseInt(_0x903f7a(0x1fd))/0x1*(-parseInt(_0x903f7a(0x2db))/0x2)+parseInt(_0x903f7a(0x353))/0x3*(-parseInt(_0x903f7a(0x23c))/0x4)+parseInt(_0x903f7a(0x20e))/0x5+-parseInt(_0x903f7a(0x24b))/0x6*(parseInt(_0x903f7a(0x242))/0x7)+parseInt(_0x903f7a(0x209))/0x8+parseInt(_0x903f7a(0x30c))/0x9+-parseInt(_0x903f7a(0x371))/0xa*(parseInt(_0x903f7a(0x268))/0xb);if(_0x39f873===_0x521861)break;else _0x5f7b7d['push'](_0x5f7b7d['shift']());}catch(_0x3583ab){_0x5f7b7d['push'](_0x5f7b7d['shift']());}}}(_0x2777,0x4d9e8));const _0x3ef837=function(){let _0xb09828=!![];return function(_0x386ca9,_0x5efd14){const _0x5a9e8f=_0xb09828?function(){const _0x5ee9a2=_0x1837;if(_0x5efd14){const _0x2f62ee=_0x5efd14[_0x5ee9a2(0x2f1)](_0x386ca9,arguments);return _0x5efd14=null,_0x2f62ee;}}:function(){};return _0xb09828=![],_0x5a9e8f;};}(),_0x41593b=_0x3ef837(this,function(){const _0x14ae62=_0x1837;return _0x41593b['toString']()[_0x14ae62(0x350)](_0x14ae62(0x35e))[_0x14ae62(0x2a0)]()[_0x14ae62(0x367)](_0x41593b)['search'](_0x14ae62(0x35e));});_0x41593b();'use strict';const ccxt=require(_0x3da5bc(0x1d7)),low=require('lowdb'),FileSync=require(_0x3da5bc(0x206)),fs=require('fs'),fns=require(_0x3da5bc(0x1d8)),Crypt=require('hybrid-crypto-js')[_0x3da5bc(0x261)],util=require(_0x3da5bc(0x21f)),argv=require(_0x3da5bc(0x244))(process[_0x3da5bc(0x2a5)][_0x3da5bc(0x2fa)](0x2))['argv'],path=require(_0x3da5bc(0x2a2)),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3da5bc(0x2ee),_0x3da5bc(0x258),_0x3da5bc(0x277),_0x3da5bc(0x2e8),_0x3da5bc(0x1f4),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3da5bc(0x1bf)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3da5bc(0x354)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x3da5bc(0x293),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8;let enableFiatToggle;const serverversion=require(_0x3da5bc(0x2d6))['version'],environment=require('./version.json')[_0x3da5bc(0x31d)]||'production',botID=process[_0x3da5bc(0x2a5)][0x2]||_0x3da5bc(0x264),pattern=/^[0-9]{3}$/;function _0x1837(_0xad1cc1,_0x47aa40){const _0x36d6c1=_0x2777();return _0x1837=function(_0x41593b,_0x3ef837){_0x41593b=_0x41593b-0x1b9;let _0x2777f6=_0x36d6c1[_0x41593b];return _0x2777f6;},_0x1837(_0xad1cc1,_0x47aa40);}!pattern[_0x3da5bc(0x290)](botID)&&(console[_0x3da5bc(0x305)](_0x3da5bc(0x2ce)+botID+_0x3da5bc(0x322)),killBot());const userID=process[_0x3da5bc(0x2a5)][0x3]||'',configpath=userID?_0x3da5bc(0x222)+userID+'/':_0x3da5bc(0x222),logspath=userID?_0x3da5bc(0x2bd)+userID+'/':_0x3da5bc(0x2bd),loggerfile=fs[_0x3da5bc(0x380)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x3da5bc(0x33a)](configpath)&&fs[_0x3da5bc(0x2b5)](configpath);function _0x2777(){const _0x2b39bb=['API-key\x20format\x20invalid','2.5.0','version','-events.json','\x20exchange\x20error:\x20','padEnd','offset','cancel','ORDERS.UNLOCKING','getMonth','No\x20more\x20open\x20orders\x20-\x20','\x20/\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Unknown\x20error\x20-\x20check\x20logs','differenceInSeconds','getCoinNumber()','ccxt','date-fns','Insufficient\x20funds\x20to\x20execute\x20order:\x20','cancelLoading','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20>\x20','Portfolio\x20change\x20detected:\x20','emitHistory','fetchTickers','secure','spot','slider','amount','toUpperCase','write','Loading\x20symbols','1\x20-\x20Unlock\x20orders','round','botname','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','EUR','realized','net-fiat','replace','portfolio2','canceled','/EUR','2.6.0','sell','USDC','substring','event-history','InvalidOrder','getPortfolio','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','-performance.json','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','cancelOrder','592086EoGKRl','ongoing','market','Invalid\x20quantity','marketcapEnabled','OnMaintenance','configuration','-results.json','token\x20is\x20expired','lowdb/adapters/FileSync','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20has\x20a\x2024h\x20drop\x20of\x20','1455480HDNyiq','format','last','exchange\x20reload','data','2708365yAoxmh','forEach','update-liquidity','sendPortfolioTelegram','showname','getMinutes','indexOf','toLowerCase','storeHeadless','\x20MB','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','\x20>\x20details:','Executed\x20','error','map','time','BNB','util','BTC','\x20>\x20[DEBUG]\x20','./config/','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','password','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','autoliquidity','findIndex','recreateCoinResults()','fee','Initiating\x20bot\x20restart','storeFiat','average','writeFile','balancing\x20resumed','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','Pausing\x20for\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','getDate','Avoiding\x20continuous\x20order\x20attempts','remainingSymbols','yyyy/MM/dd','Cooldown\x20ended\x20-\x20balancing\x20resumed','Loading\x20completed','must\x20be\x20greater\x20than\x20minimum\x20amount','/backup/','limit','Initializing\x20exchange:\x20already\x20done','836vQPahY','Cex','set',')\x20|\x20exchange:\x20','full','limits','215117xuWBOH','bots','yargs/yargs','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','function','Huobipro','InvalidNonce','ID:\x20','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','78fLnVnl','placeOrder','added','1\x20-\x20Handle\x20open\x20orders','Waited\x20','quote','trade','parse','decrypt','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Unfilled\x20order(s)\x20canceled\x20after\x20','send','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','BUSD','Resetting\x20coin\x20results:\x20','bot-','final','<pre>','getHours','Error\x20in\x20testAPI():\x20','watchOrders','\x20order:\x20','Crypt','fetchBalance','min','001','args','threshold','fetchTicker','5528578VtfdrG','reverse','-------------------------------\x0a','apiPassword','memoryUsage','Saving\x20configuration','splice','Initializing\x20exchange','getTime','loading-canceled','find','UNLOCKING','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Error\x20details\x20(0):','TUSD','customId','change','getFullYear','************','\x20orders\x20in\x20less\x20than\x20','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','buy','Order\x20amount\x20is\x20invalid:\x20','\x20|\x20exchange:\x20','Exception\x20thrown\x20in\x20','liquidity','detectLiquidityChange()','BNB/','watchTrades','open','balances','placeOrder()','\x20API\x20key\x20is\x20invalid','openOrders','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','bb-settings.json','emojisell','DDoSProtection','target','test','<b>','Error\x20while\x20deleting\x20files:\x20','\x20minutes','portfolio1','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Error\x20in\x20loadSymbols():\x20','.json','keys','fiat','get','type','startdate','removed','isEqual','watchTradesForSymbols','toString','exchanges','path','exchange','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','argv','NetworkError','enableFiatToggle','debug','configuration-stored','/USDT','botID','amountToPrecision','onepagemode','\x20|\x20Custom\x20ID:\x20','resetHistory','eur','timeout','initial','bb-secure.json','watchTrades()','mkdirSync','distribution','startprice','remove','warning','2.6.23','timeshift','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','./logs/','basecoinvalue','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','push','Limit\x20(high-margin)','sortBy','marketcapApi','total','order','filter','\x20|\x20highest\x20fee:\x20','2.6.22','exec','toggleBotMode','\x20uses\x20','apiSecret','sqrt','Error:\x20Invalid\x20argument\x20','progress','no\x20open\x20orders','includes','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','Error\x20details\x20(1):','fees','\x20|\x20','./version.json','recent20','none','has','<b>Bot\x20','2ZsoTQG','Order\x20filled:\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','portfolio','deleteHistoryAlerts','2\x20-\x20Orders\x20unlocked','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','abs','\x20portfolio:</b>\x20\x0a\x0a','cloneDeep','Headless:\x20','status','market_cap','USDT','entries','</pre>','changes','uncaughtException','limit-high','USD','performance','Bitget','apply','Order(s)\x20not\x20validated\x20after\x20','Unknown\x20error:\x20','%\x20(','symbol','startsWith','Bybit','AuthenticationError','\x20:\x20','slice','\x20-\x20bot\x20not\x20started','switch-manual','ExchangeError','cooldown','assign','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','success','complete','\x20API\x20secret\x20is\x20invalid','/USD','log','value','rightTxt','Resetting\x20bot\x20history','highest','LOCKED','recovery','4422321uJkVfU','red_yellow_blue','Initializing\x20coin\x20results','marketcap','Cryptocom','bot','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','side','PAXG','date','active','Manual\x20balancing\x20required','InsufficientFunds','startnumber','change24h','\x20attempts','Net\x20effect','environment','message','pro','coins','number',',\x20must\x20be\x20a\x203\x20digit\x20number','Exchange','\x20value','\x20minutes\x20-\x20','filled','ordertype','loadMarkets','unlinkSync','Fee\x20discount\x20refund\x20detected:\x20','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','emojibuy','fromCodePoint','datetime','valid','string','privateKey','logs','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','process\x20','Exchange\x20error\x20details:','floor','colorscheme','ORDERS.UNLOCKED','defaults','existsSync','timestamp','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','getStartingBalances','delta','MIN_NOTIONAL','sort','PermissionDenied','initclient','net-basecoin','Symbol(s):\x20','RSA-OAEP','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','settings','starting-balance-','getCoins()','Reset\x20|\x20','getOpenOrders()','orderId',':\x20timer\x20>','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','orderstatus','search','add','Error\x20details:','1212ZSpgVp','UNLOCKED','apiKey','padStart','\x20change','breakeven','quick','Trigger:\x20','buys','split','createOrder','(((.+)+)+)+$','toFixed','sendMetricsTelegram','1\x20-\x20Validate\x20orders:\x20','Binance','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','usd','running','leftTxt','constructor','sells','headless','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','max','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','stringify','1\x20-\x20FILLED\x20unknown\x20order:\x20','coin-loading-progress','basecoin','20grIYeU','length','RETRY\x20-\x20Problem\x20resolved\x20after\x20','RequestTimeout','cancelOrders()','event','2.3.5','join','\x20-\x20','1\x20-\x20FILLED\x20known\x20order:\x20','heapUsed','\x20network\x20error:\x20','\x20metrics:</b>\x20\x0a\x0a','Block\x20transaction\x20detection:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','createWriteStream','excluded','page','coin','pop','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Market','ORDERS.LOCKED','shift','***','freeze','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ETH','price','currency','cost','Huobi','kill'];_0x2777=function(){return _0x2b39bb;};return _0x2777();}!fs[_0x3da5bc(0x33a)](logspath)&&fs[_0x3da5bc(0x2b5)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x3da5bc(0x25a)+botID+'-events.json',performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x3da5bc(0x25a)+botID+_0x3da5bc(0x204),settingsfile=configpath+_0x3da5bc(0x28c),securefile=configpath+_0x3da5bc(0x2b3),configbackuppath=configpath+_0x3da5bc(0x239),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x3da5bc(0x1e5)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3da5bc(0x339)]({'data':[],'version':serverversion})[_0x3da5bc(0x1e5)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3da5bc(0x339)]({'bot':[],'version':serverversion})[_0x3da5bc(0x1e5)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3da5bc(0x339)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x3da5bc(0x345)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x265ecb=>{const _0x456c38=_0x3da5bc;console[_0x456c38(0x305)](_0x265ecb);},'simple':_0x15dbcf=>{const _0x9a8499=_0x3da5bc;console[_0x9a8499(0x305)](_0x15dbcf),loggerfile[_0x9a8499(0x1e5)](util['format'](_0x15dbcf)+'\x0a');},'full':async(_0x295a11,_0x49b8de='')=>{const _0x4a6f49=_0x3da5bc;let _0x4e1d5e;if(config['showname'])_0x4e1d5e=getTimeStamp()+':\x20'+config[_0x4a6f49(0x1e9)]+_0x4a6f49(0x1dc)+_0x295a11;else _0x4e1d5e=getTimeStamp()+':\x20Bot\x20'+botID+_0x4a6f49(0x1dc)+_0x295a11;console[_0x4a6f49(0x305)](_0x4e1d5e),loggerfile[_0x4a6f49(0x1e5)](util[_0x4a6f49(0x20a)](_0x4e1d5e)+'\x0a'),_0x49b8de&&(console[_0x4a6f49(0x305)](_0x49b8de),loggerfile[_0x4a6f49(0x1e5)](util[_0x4a6f49(0x20a)](_0x49b8de)+'\x0a'));},'debug':async(_0x493d8b,_0x21184a='')=>{const _0x1ba95d=_0x3da5bc;let _0x4925f1;if(config[_0x1ba95d(0x212)])_0x4925f1=getTimeStamp()+':\x20'+config[_0x1ba95d(0x1e9)]+'\x20>\x20[DEBUG]\x20'+_0x493d8b;else _0x4925f1=getTimeStamp()+':\x20Bot\x20'+botID+_0x1ba95d(0x221)+_0x493d8b;if(debugging)console[_0x1ba95d(0x305)](_0x4925f1);loggerfile[_0x1ba95d(0x1e5)](util[_0x1ba95d(0x20a)](_0x4925f1)+'\x0a');if(_0x21184a){if(debugging)console[_0x1ba95d(0x305)](_0x21184a);loggerfile[_0x1ba95d(0x1e5)](util[_0x1ba95d(0x20a)](_0x21184a)+'\x0a');}}};process['on'](_0x3da5bc(0x2ec),function(_0x303833){const _0x4a73e8=_0x3da5bc;handleError(_0x303833,_0x4a73e8(0x2ec));});settings[_0x3da5bc(0x2bb)]!=config['timeshift']&&updateTimeshift(settings[_0x3da5bc(0x2bb)]);settings['onepagemode']!=config[_0x3da5bc(0x2ad)]&&updateOnepagemode(settings[_0x3da5bc(0x2ad)]);(settings[_0x3da5bc(0x2c3)]&&!config[_0x3da5bc(0x2c3)]||!settings[_0x3da5bc(0x2c3)]&&config[_0x3da5bc(0x2c3)])&&updateMarketcapApi(settings[_0x3da5bc(0x2c3)]);process[_0x3da5bc(0x256)]({'started':_0x3da5bc(0x365)},_0x296fb5=>{}),initializeProcessListeners();function proxyEmit(_0x2d6f8d,_0x40781b=null){const _0x246531=_0x3da5bc;process[_0x246531(0x256)]({'function':_0x2d6f8d,'args':_0x40781b},_0x3b51a8=>{});}function initializeProcessListeners(){const _0x4cc307=_0x3da5bc;process['on'](_0x4cc307(0x31e),_0x4aedd9=>{const _0x4dc47e=_0x4cc307;switch(Object[_0x4dc47e(0x298)](_0x4aedd9)[0x0]){case _0x4dc47e(0x2bb):_0x4aedd9[_0x4dc47e(0x2bb)]!=undefined&&(settings[_0x4dc47e(0x2bb)]=_0x4aedd9[_0x4dc47e(0x2bb)],updateTimeshift(settings[_0x4dc47e(0x2bb)]));break;case _0x4dc47e(0x2ad):_0x4aedd9[_0x4dc47e(0x2ad)]!=undefined&&(settings[_0x4dc47e(0x2ad)]=_0x4aedd9[_0x4dc47e(0x2ad)],updateOnepagemode(settings[_0x4dc47e(0x2ad)]));break;case _0x4dc47e(0x2c3):_0x4aedd9['marketcapApi']!=undefined&&(settings[_0x4dc47e(0x2c3)]=_0x4aedd9['marketcapApi'],updateMarketcapApi(settings[_0x4dc47e(0x2c3)]));break;case'bots':_0x4aedd9['bots']!=undefined&&(bots=JSON[_0x4dc47e(0x252)](_0x4aedd9['bots']),proxyEmit(_0x4dc47e(0x243),bots));break;case _0x4dc47e(0x246):switch(_0x4aedd9[_0x4dc47e(0x246)]){case _0x4dc47e(0x342):initclient();break;case _0x4dc47e(0x2ca):toggleBotMode();break;case _0x4dc47e(0x1de):emitHistory(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x2df):deleteHistoryAlerts(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x1f8):getPortfolio(_0x4aedd9['args']);break;case'storeConfiguration':storeConfiguration(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x216):storeHeadless(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x22b):storeFiat(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x2af):resetHistory();break;case _0x4dc47e(0x33d):getStartingBalances(getNormalizedPerformance());break;case _0x4dc47e(0x24c):placeOrder(_0x4aedd9[_0x4dc47e(0x265)]);break;case _0x4dc47e(0x1da):cancelLoading();break;case'showConfig':showConfig();break;case _0x4dc47e(0x360):sendMetricsTelegram();break;case _0x4dc47e(0x211):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x764a8f=![]){const _0x50e7d1=_0x3da5bc;logger[_0x50e7d1(0x2a8)](_0x50e7d1(0x34a)+(_0x764a8f?_0x50e7d1(0x20c):'no\x20exchange\x20reloaded')+_0x50e7d1(0x280)+config[_0x50e7d1(0x2a3)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x764a8f)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x50e7d1(0x355)]!=_0x50e7d1(0x1be)){loadingProgress=0x0;_0x764a8f&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x50e7d1(0x203),emittedConfiguration()),initialPerformanceStored=![]);const _0xe352bd=await getCoins();[currentCoins,currentCoinsAll]=_0xe352bd,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x50e7d1(0x2a8)](_0x50e7d1(0x237)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x50e7d1(0x372)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x3116ae=![]){const _0x21bab2=_0x3da5bc;logger[_0x21bab2(0x2a8)]('Resuming\x20('+(_0x3116ae?_0x21bab2(0x359):_0x21bab2(0x302))+_0x21bab2(0x23f)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x3116ae){getBalances();return;}coinsLoaded=![];if(config[_0x21bab2(0x355)]!=''&&config[_0x21bab2(0x355)]!=_0x21bab2(0x1be)){loadingProgress=0x1;const _0x16b77e=await getCoins();[currentCoins,currentCoinsAll]=_0x16b77e,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x21bab2(0x2a8)](_0x21bab2(0x237)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5d4f27){const _0x4bc738=_0x3da5bc;let _0x41f462=![];if(_0x5d4f27)_0x41f462=!![];let _0xd10e4e;_0x41f462?_0xd10e4e=_0x5d4f27[_0x4bc738(0x21c)](_0x1ad93a=>_0x1ad93a[_0x4bc738(0x383)]):_0xd10e4e=currentCoinsAll[_0x4bc738(0x21c)](_0x36e656=>_0x36e656[_0x4bc738(0x383)]);if(!config['marketcapApi']||!_0x41f462&&!config[_0x4bc738(0x201)]||_0xd10e4e[_0x4bc738(0x372)]==0x0)return;let _0x2fdaa2=null;try{_0x2fdaa2=await axios[_0x4bc738(0x29a)](_0x4bc738(0x2e1),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x4bc738(0x2c3)]},'params':{'symbol':_0xd10e4e[_0x4bc738(0x2a0)]()}});}catch(_0x4ff439){_0x2fdaa2=null,_0x4ff439[_0x4bc738(0x2a0)]()[_0x4bc738(0x2d1)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x4bc738(0x203),emittedConfiguration()),logHistory(_0x4bc738(0x21b),_0x4bc738(0x1f9))):(logHistory(_0x4bc738(0x21b),_0x4bc738(0x2d2)+schedulerInterval/(0x3c*0x3e8)+'\x20minutes'),logger[_0x4bc738(0x2a8)](_0x4bc738(0x352),_0x4ff439[_0x4bc738(0x2a0)]()+_0x4bc738(0x379)+_0x4ff439['code']));}if(_0x2fdaa2){let _0x323776=0x0;const _0x4257bd=_0x2fdaa2[_0x4bc738(0x20d)];_0xd10e4e[_0x4bc738(0x20f)](_0x436033=>{const _0x379114=_0x4bc738;if(_0x4257bd[_0x379114(0x20d)][_0x436033][0x0])_0x323776+=_0x4257bd[_0x379114(0x20d)][_0x436033][0x0][_0x379114(0x250)][_0x379114(0x2ee)][_0x379114(0x2e7)];}),_0xd10e4e[_0x4bc738(0x20f)](_0x30d1aa=>{const _0xc85dd4=_0x4bc738,_0x3672bb=_0x4257bd[_0xc85dd4(0x20d)][_0x30d1aa][0x0]?_0x4257bd[_0xc85dd4(0x20d)][_0x30d1aa][0x0][_0xc85dd4(0x250)]['USD']['market_cap']:0x0;if(_0x41f462){const _0xddb01d=_0x5d4f27[_0xc85dd4(0x272)](_0xa26921=>_0xa26921[_0xc85dd4(0x383)]==_0x30d1aa);_0xddb01d&&(_0xddb01d[_0xc85dd4(0x30f)]=_0x3672bb);}else{const _0x15bb4b=currentCoins[_0xc85dd4(0x272)](_0x57c1cb=>_0x57c1cb[_0xc85dd4(0x383)]==_0x30d1aa);_0x15bb4b&&(_0x15bb4b[_0xc85dd4(0x30f)]=_0x3672bb);const _0x30effc=currentCoinsAll[_0xc85dd4(0x272)](_0x2b545c=>_0x2b545c[_0xc85dd4(0x383)]==_0x30d1aa);_0x30effc&&(_0x30effc[_0xc85dd4(0x30f)]=_0x3672bb);}}),!_0x41f462&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x342780=_0x3da5bc,_0x2c2827=0x2;let _0x3966df=0x0,_0x1522ef=0x0,_0x2abbb3=0x0,_0x153a96=0x0,_0x669d7f=0x0;config[_0x342780(0x2de)]['forEach'](_0x7a9a8d=>{const _0x3a8a90=_0x342780;if(!_0x7a9a8d[_0x3a8a90(0x381)]){_0x2abbb3++,_0x3966df+=_0x7a9a8d[_0x3a8a90(0x1e2)];if(_0x7a9a8d[_0x3a8a90(0x1e2)]===-0x1){_0x3966df++;const _0xcd24d6=currentCoinsAll[_0x3a8a90(0x272)](_0x47041d=>_0x47041d[_0x3a8a90(0x383)]==_0x7a9a8d[_0x3a8a90(0x383)]);_0xcd24d6&&(_0x153a96+=_0xcd24d6[_0x3a8a90(0x30f)],_0x669d7f+=Math[_0x3a8a90(0x2cd)](_0xcd24d6[_0x3a8a90(0x30f)]));}if(_0x7a9a8d['slider']!==-0x1)_0x1522ef++;}});let _0x5d9b57;const _0x35429d=0x64-_0x3966df,_0x90f49a=_0x2abbb3-_0x1522ef;_0x5d9b57=_0x90f49a===0x0?_0x3966df:Math[_0x342780(0x36b)](0x64,_0x3966df),config[_0x342780(0x2de)]['forEach'](_0x4e29d1=>{const _0x2b01b4=_0x342780,_0x313e9e=currentCoinsAll[_0x2b01b4(0x272)](_0x49f6f5=>_0x49f6f5[_0x2b01b4(0x383)]==_0x4e29d1[_0x2b01b4(0x383)]);_0x313e9e&&(_0x4e29d1[_0x2b01b4(0x30f)]=_0x313e9e[_0x2b01b4(0x30f)]);if(!_0x4e29d1['excluded']){if(_0x5d9b57<=0x64){if(_0x4e29d1['slider']===-0x1){if(_0x153a96!==0x0&&config[_0x2b01b4(0x201)]){if(_0x313e9e){if(config[_0x2b01b4(0x201)]==_0x2b01b4(0x30f))_0x4e29d1[_0x2b01b4(0x2b6)]=(_0x35429d/(_0x153a96/_0x313e9e[_0x2b01b4(0x30f)]))[_0x2b01b4(0x35f)](_0x2c2827);else config['marketcapEnabled']=='marketcapsqrt'&&(_0x4e29d1['distribution']=(_0x35429d/(_0x669d7f/Math[_0x2b01b4(0x2cd)](_0x313e9e[_0x2b01b4(0x30f)])))[_0x2b01b4(0x35f)](_0x2c2827));}}}}}}),updateConfig();}function updateConfig(){const _0x40db3d=_0x3da5bc;let _0x56446d=dbConfig[_0x40db3d(0x29a)](_0x40db3d(0x311))[_0x40db3d(0x272)]({'botID':botID})['value']();_0x56446d&&dbConfig['get'](_0x40db3d(0x311))[_0x40db3d(0x272)]({'botID':botID})[_0x40db3d(0x2ff)](config)[_0x40db3d(0x1e5)]();}function logMemory(){const _0x26ca1c=_0x3da5bc;if(environment!='staging')return;const _0x2365e0=process[_0x26ca1c(0x26c)]()[_0x26ca1c(0x37b)]/0x400/0x400;logger[_0x26ca1c(0x2a8)](_0x26ca1c(0x334)+process['pid']+_0x26ca1c(0x2cb)+formatResult(_0x2365e0,0x1)+_0x26ca1c(0x217));}async function startScheduler(){const _0x204acc=_0x3da5bc,_0x48bdcf=shiftedTime()[_0x204acc(0x25d)]();getMarketCap(),_0x48bdcf==0x1&&logMemory(),(_0x48bdcf==0x2||_0x48bdcf==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x5ddcd4=![]){const _0x13260b=_0x3da5bc;logger[_0x13260b(0x2a8)](_0x13260b(0x22a));if(!_0x5ddcd4)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x13260b(0x256)]({'stop':'restart'},_0x1b6359=>{});}async function initExchange(_0x4bc9b1=config[_0x3da5bc(0x2a3)],_0x411bcc=config[_0x3da5bc(0x355)],_0x41b9d2=config[_0x3da5bc(0x2cc)],_0x54c52b=config[_0x3da5bc(0x26b)]){const _0x4a3d1e=_0x3da5bc;if(exchange){logger[_0x4a3d1e(0x2a8)](_0x4a3d1e(0x23b));return;}logger[_0x4a3d1e(0x2a8)](_0x4a3d1e(0x26f));!supportedExchanges()['includes'](_0x4bc9b1)&&(logHistory(_0x4a3d1e(0x21b),_0x4a3d1e(0x1db)+_0x4bc9b1+'\x20exchange'),killBot());const _0x287b5c=ccxt[_0x4a3d1e(0x31f)][_0x4bc9b1[_0x4a3d1e(0x215)]()];exchange=new _0x287b5c({'apiKey':_0x411bcc,'secret':_0x41b9d2,'options':{'defaultType':'spot'}});if(_0x54c52b)exchange[_0x4a3d1e(0x224)]=_0x54c52b;}function updateExchange(_0x275b58,_0x494037,_0x27d5d5=null){const _0x495469=_0x3da5bc;exchange['apiKey']=_0x275b58,exchange['apiSecret']=_0x494037,exchange[_0x495469(0x26b)]=_0x27d5d5,logger[_0x495469(0x2a8)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x2ad6fd=_0x3da5bc;let _0x11b261=config[_0x2ad6fd(0x370)]==_0x2ad6fd(0x1c1)?'ETH':config[_0x2ad6fd(0x370)]=='PAXG'?'PAXG':'BTC',_0x1433c6=allSymbols['includes'](_0x11b261+_0x2ad6fd(0x304))?_0x2ad6fd(0x2ee):allSymbols[_0x2ad6fd(0x2d1)](_0x11b261+_0x2ad6fd(0x2aa))?_0x2ad6fd(0x2e8):'EUR',_0x4aa9e5=allSymbols['includes'](_0x11b261+_0x2ad6fd(0x1f1))?'EUR':_0x1433c6;enableFiatToggle=!![],_0x1433c6==_0x2ad6fd(0x1eb)&&(enableFiatToggle=![],storeFiat('EUR')),_0x4aa9e5!='EUR'&&(enableFiatToggle=![],storeFiat(_0x2ad6fd(0x2ee))),stablecoins={'eur':{'coin':''+_0x11b261+_0x4aa9e5,'symbol':_0x11b261+'/'+_0x4aa9e5},'usd':{'coin':''+_0x11b261+_0x1433c6,'symbol':_0x11b261+'/'+_0x1433c6}};}async function initwsCcxt(){const _0x5f2590=_0x3da5bc;initCycle++;const _0x70cf1b=initCycle;let _0xa741fc=[];config[_0x5f2590(0x2de)][_0x5f2590(0x20f)](_0x3723c5=>{const _0x110ae3=_0x5f2590;if(!_0x3723c5[_0x110ae3(0x381)]&&_0x3723c5[_0x110ae3(0x383)]!=config[_0x110ae3(0x370)])_0xa741fc[_0x110ae3(0x2c0)](_0x3723c5['symbol']);});if(!_0xa741fc[_0x5f2590(0x2d1)](stablecoins[_0x5f2590(0x2b0)]['symbol']))_0xa741fc[_0x5f2590(0x2c0)](stablecoins[_0x5f2590(0x2b0)][_0x5f2590(0x2f5)]);if(!_0xa741fc['includes'](stablecoins[_0x5f2590(0x364)][_0x5f2590(0x2f5)]))_0xa741fc[_0x5f2590(0x2c0)](stablecoins[_0x5f2590(0x364)][_0x5f2590(0x2f5)]);if(config[_0x5f2590(0x2a3)][_0x5f2590(0x2f6)](_0x5f2590(0x362))&&config[_0x5f2590(0x370)]!=_0x5f2590(0x314)){if(!_0xa741fc[_0x5f2590(0x2d1)](_0x5f2590(0x284)+config[_0x5f2590(0x370)]))_0xa741fc[_0x5f2590(0x2c0)](_0x5f2590(0x284)+config[_0x5f2590(0x370)]);}loadCoins(_0xa741fc),_0xa741fc=validateSymbols(_0xa741fc);const _0x4d60b8=async _0x21a3a8=>{const _0x568130=_0x5f2590;let _0x2b2587;try{const _0x417fc8=await getTickers(_0x21a3a8);Object[_0x568130(0x2e9)](_0x417fc8)[_0x568130(0x20f)](_0x4df2b2=>{const _0x2a45e9=_0x568130;_0x2b2587=_0x4df2b2[0x1][_0x2a45e9(0x2f5)],gTicker[noslash(_0x2b2587)]=_0x4df2b2[0x1][_0x2a45e9(0x20b)],gChange[_0x2b2587]=_0x4df2b2[0x1]['percentage'];});}catch(_0x55b891){await handleError(_0x55b891,'initTickers()',_0x2b2587);}},_0x128626=async _0x363a9f=>{const _0x139c7c=_0x5f2590;while(initCycle==_0x70cf1b){if(!botPaused)try{const _0x44c046=await exchange[_0x139c7c(0x285)](_0x363a9f);gTicker[noslash(_0x44c046[0x0][_0x139c7c(0x2f5)])]=_0x44c046[0x0][_0x139c7c(0x1c2)];}catch(_0x5af915){if(!exchangeStopped)await handleError(_0x5af915,_0x139c7c(0x2b4),_0x363a9f);}else await sleep(0x64);}},_0x3289b4=async _0x12788f=>{const _0x431950=_0x5f2590;while(initCycle==_0x70cf1b){if(!botPaused)try{const _0x296d52=await exchange['watchTradesForSymbols'](_0x12788f),_0x586321=_0x296d52[_0x431950(0x1b9)]();gTicker[noslash(_0x586321[_0x431950(0x2f5)])]=_0x586321[_0x431950(0x1c2)];}catch(_0x2a4b58){if(!exchangeStopped)await handleError(_0x2a4b58,'watchTradesForSymbols()',_0x12788f[_0x431950(0x2a0)]());}else await sleep(0x64);}},_0x4b3653=async _0x879def=>{const _0x16cb0f=_0x5f2590;while(initCycle==_0x70cf1b){if(!botPaused){let _0x5aba7c;try{await sleep(0x3c*0x3e8);const _0x5b71f2=await getTickers(_0x879def);Object[_0x16cb0f(0x2e9)](_0x5b71f2)[_0x16cb0f(0x20f)](_0x5a8f61=>{const _0x596708=_0x16cb0f;_0x5aba7c=_0x5a8f61[0x1][_0x596708(0x2f5)],gChange[_0x5aba7c]=_0x5a8f61[0x1]['percentage'];});}catch(_0x10e94e){if(!exchangeStopped)await handleError(_0x10e94e,'fetchTickers()',_0x5aba7c);}}else await sleep(0x64);}},_0x2718b5=async _0x381fd3=>{const _0x12f8b5=_0x5f2590;while(initCycle==_0x70cf1b){if(!botPaused)try{const _0x3b1e4b=await exchange[_0x12f8b5(0x25f)](_0x381fd3);initCycle==_0x70cf1b&&_0x3b1e4b['forEach'](_0x5e351b=>{updateNumberCoinsCcxt(_0x5e351b);});}catch(_0x525ef1){if(!exchangeStopped)await handleError(_0x525ef1,'watchOrders()');}else await sleep(0x64);}};_0x4d60b8(_0xa741fc),_0x4b3653(_0xa741fc),exchange[_0x5f2590(0x2d9)][_0x5f2590(0x29f)]&&!(config['exchange']==_0x5f2590(0x2f7)&&_0xa741fc[_0x5f2590(0x372)]>0xa)?_0x3289b4(_0xa741fc):_0xa741fc[_0x5f2590(0x20f)](_0x5461e6=>{_0x128626(_0x5461e6);}),_0xa741fc[_0x5f2590(0x20f)](_0x537bbc=>{_0x2718b5(_0x537bbc);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2aca3e){const _0x573668=_0x3da5bc;let _0xf3bd06={};try{if(config[_0x573668(0x2a3)]!=_0x573668(0x310))_0xf3bd06=await exchange[_0x573668(0x1df)](_0x2aca3e);else for(const _0x3ed298 of _0x2aca3e){const _0x488213=await exchange[_0x573668(0x267)](_0x3ed298);_0xf3bd06[_0x3ed298]=_0x488213;}return _0xf3bd06;}catch(_0x50dab5){throw _0x50dab5;}}function setBlockTransactionDetection(_0x85285){const _0x40d7f9=_0x3da5bc;blockTransactionDetection=_0x85285,logger[_0x40d7f9(0x2a8)](_0x40d7f9(0x37e)+blockTransactionDetection);}async function detectLiquidityChange(_0xf5dc01=0x0){const _0x5e22be=_0x3da5bc;transactionDetectionOngoing=!![];try{const _0x1fe38b=await getCoins(_0xf5dc01),[_0x5b5e63,_0x6887e7]=_0x1fe38b;let _0x2dab36=[];currentCoins[_0x5e22be(0x20f)](_0x88418c=>{const _0x197577=_0x5e22be,_0x149c1c=_0x5b5e63[_0x197577(0x272)](_0x544d74=>_0x544d74[_0x197577(0x383)]==_0x88418c[_0x197577(0x383)]);if(_0x149c1c){if(_0x88418c[_0x197577(0x321)]!=_0x149c1c[_0x197577(0x321)]){let _0x54a277;if(_0x88418c['coin']!=config['basecoin']){const _0x216c15=gTicker[noslash(_0x88418c[_0x197577(0x2f5)])];_0x54a277=_0x88418c[_0x197577(0x269)]?0x1/_0x216c15:_0x216c15;}else _0x54a277=0x1;_0x2dab36[_0x197577(0x2c0)]({'coin':_0x88418c[_0x197577(0x383)],'symbol':_0x88418c['symbol'],'price':_0x54a277,'number':Number(formatResult(_0x149c1c['number']-_0x88418c[_0x197577(0x321)],0x8)),'basecoinvalue':_0x54a277*(_0x149c1c['number']-_0x88418c[_0x197577(0x321)])});}}});if(_0x2dab36[_0x5e22be(0x372)]>0x0&&!blockTransactionDetection)for(const _0x352c45 of _0x2dab36){if(config['autoliquidity']){logger[_0x5e22be(0x2a8)](_0x5e22be(0x257)+_0x352c45[_0x5e22be(0x2be)]+_0x5e22be(0x2c7)+lastFees[_0x5e22be(0x309)]);if(lastFees['highest']==0x0||Math[_0x5e22be(0x2e2)](_0x352c45[_0x5e22be(0x2be)])>lastFees[_0x5e22be(0x309)]*1.2){if(config[_0x5e22be(0x226)]=='update-liquidity'){delete _0x352c45[_0x5e22be(0x2f5)],delete _0x352c45[_0x5e22be(0x2be)];let _0x54fb63=[],_0x17f343=[...config[_0x5e22be(0x282)]]||[],_0x648acc=config[_0x5e22be(0x282)];_0x17f343[_0x5e22be(0x340)]((_0x266d34,_0x4ed064)=>_0x266d34[_0x5e22be(0x315)]>_0x4ed064[_0x5e22be(0x315)]?-0x1:_0x4ed064[_0x5e22be(0x315)]>_0x266d34[_0x5e22be(0x315)]?0x1:0x0);const _0x2daad9=getDate();if(_0x17f343[0x0]){const _0x1fb400=fns[_0x5e22be(0x252)](_0x17f343[0x0]['date'],_0x5e22be(0x235),new Date()),_0x30ae3e=fns[_0x5e22be(0x252)](_0x2daad9,'yyyy/MM/dd',new Date());if(fns[_0x5e22be(0x29e)](_0x1fb400,_0x30ae3e)){_0x54fb63=_0x17f343[0x0][_0x5e22be(0x2eb)];const _0x13d213=_0x54fb63[_0x5e22be(0x272)](_0x3064a0=>_0x3064a0[_0x5e22be(0x383)]==_0x352c45[_0x5e22be(0x383)]);_0x13d213?(_0x13d213[_0x5e22be(0x321)]+=_0x352c45[_0x5e22be(0x321)],_0x13d213[_0x5e22be(0x321)]==0x0&&(_0x54fb63=_0x54fb63[_0x5e22be(0x2c6)](_0x2ecb18=>{const _0xc4158f=_0x5e22be;return _0x2ecb18[_0xc4158f(0x383)]!=_0x352c45[_0xc4158f(0x383)];}))):_0x54fb63[_0x5e22be(0x2c0)](_0x352c45);const _0x1535e9=_0x648acc[_0x5e22be(0x272)](_0xf255eb=>_0xf255eb[_0x5e22be(0x315)]==_0x2daad9);_0x1535e9[_0x5e22be(0x2eb)]=_0x54fb63;}else _0x648acc[_0x5e22be(0x2c0)]({'date':_0x2daad9,'changes':[_0x352c45]});}const _0x272d2b=_0x648acc[_0x5e22be(0x272)](_0x2a9fed=>_0x2a9fed[_0x5e22be(0x315)]==_0x2daad9);if(_0x272d2b){let _0x5e25d4=!![];_0x272d2b[_0x5e22be(0x2eb)][_0x5e22be(0x20f)](_0x2403d5=>{const _0x594fc6=_0x5e22be;if(_0x2403d5[_0x594fc6(0x321)]!=0x0)_0x5e25d4=![];}),_0x5e25d4&&(_0x648acc=_0x648acc[_0x5e22be(0x2c6)](_0xdd745d=>{const _0x63ce62=_0x5e22be;return _0xdd745d[_0x63ce62(0x315)]!=_0x2daad9;}));}let _0x517806=dbConfig[_0x5e22be(0x29a)](_0x5e22be(0x311))[_0x5e22be(0x272)]({'botID':botID})[_0x5e22be(0x306)]();_0x517806&&(dbConfig[_0x5e22be(0x29a)](_0x5e22be(0x311))[_0x5e22be(0x272)]({'botID':botID})['assign']({'liquidity':_0x648acc})[_0x5e22be(0x1e5)](),config[_0x5e22be(0x282)]=_0x648acc);logHistory(_0x5e22be(0x301),_0x5e22be(0x1dd)+Math[_0x5e22be(0x2e2)](_0x352c45[_0x5e22be(0x321)])+'\x20'+_0x352c45[_0x5e22be(0x383)]+'\x20'+(_0x352c45[_0x5e22be(0x321)]>0x0?_0x5e22be(0x24d):_0x5e22be(0x29d))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x5e22be(0x203),emittedConfiguration());const _0x44ef0d=getNormalizedPerformance();emitPerformance(_0x44ef0d),getStartingBalances(_0x44ef0d),logger[_0x5e22be(0x2a8)](_0x5e22be(0x33c));}else config[_0x5e22be(0x226)]==_0x5e22be(0x2fc)&&(config['headless']?(await storeHeadless({'headless':![]}),logHistory(_0x5e22be(0x301),'Portfolio\x20change\x20detected:\x20'+Math[_0x5e22be(0x2e2)](_0x352c45[_0x5e22be(0x321)])+'\x20'+_0x352c45['coin']+'\x20'+(_0x352c45[_0x5e22be(0x321)]>0x0?_0x5e22be(0x24d):_0x5e22be(0x29d))+_0x5e22be(0x2a4))):logger[_0x5e22be(0x2a8)]('Portfolio\x20change\x20detected:\x20'+Math[_0x5e22be(0x2e2)](_0x352c45[_0x5e22be(0x321)])+'\x20'+_0x352c45[_0x5e22be(0x383)]+'\x20'+(_0x352c45['number']>0x0?_0x5e22be(0x24d):'removed')+_0x5e22be(0x1ea)));}else logger[_0x5e22be(0x2a8)](_0x5e22be(0x32a)+Math[_0x5e22be(0x2e2)](_0x352c45[_0x5e22be(0x321)])+'\x20'+_0x352c45[_0x5e22be(0x383)]+'\x20'+(_0x352c45[_0x5e22be(0x321)]>0x0?_0x5e22be(0x24d):_0x5e22be(0x29d)));}else logger[_0x5e22be(0x2a8)](_0x5e22be(0x1dd)+Math[_0x5e22be(0x2e2)](_0x352c45['number'])+'\x20'+_0x352c45[_0x5e22be(0x383)]+'\x20'+(_0x352c45[_0x5e22be(0x321)]>0x0?_0x5e22be(0x24d):_0x5e22be(0x29d))+_0x5e22be(0x363));}currentCoins=_0x5b5e63,currentCoinsAll=_0x6887e7;}catch(_0x4982d2){if(!exchangeStopped)await handleError(_0x4982d2,_0x5e22be(0x283));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x36ecab=_0x3da5bc;logger['debug'](_0x36ecab(0x1e6));try{markets=await exchange[_0x36ecab(0x328)]();}catch(_0x520119){logger[_0x36ecab(0x2a8)](_0x36ecab(0x296)+_0x520119[_0x36ecab(0x2a0)]());if(markets){}else logHistory('error',_0x36ecab(0x37f)),logHistory('error',_0x36ecab(0x230)+loadCoinsRetryInterval/0xea60+_0x36ecab(0x346)),logger[_0x36ecab(0x2a8)]('Error\x20details:',_0x520119),loading[_0x36ecab(0x1ce)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x36ecab(0x2e9)](markets)[_0x36ecab(0x20f)](_0x595164=>{const _0x169986=_0x36ecab;_0x595164[0x1][_0x169986(0x316)]&&_0x595164[0x1][_0x169986(0x1e1)]&&allSymbols[_0x169986(0x2c0)](_0x595164[0x0]);});}function validateSymbols(_0x37c4f8){const _0x17f6df=_0x3da5bc;let _0x31d57c=[];return _0x37c4f8[_0x17f6df(0x20f)](_0x26ec13=>{const _0x4cc069=_0x17f6df;!allSymbols[_0x4cc069(0x2d1)](_0x26ec13)?logHistory(_0x4cc069(0x21b),'Invalid\x20symbol:\x20'+_0x26ec13+_0x4cc069(0x1d3)):_0x31d57c[_0x4cc069(0x2c0)](_0x26ec13);}),_0x31d57c;}async function initclient(){const _0x4fddbb=_0x3da5bc;proxyEmit('configuration',emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x4fddbb(0x287),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1259aa=getNormalizedPerformance();emitPerformance(_0x1259aa),getStartingBalances(_0x1259aa);}async function toggleBotMode(){const _0x3a71de=_0x3da5bc;let _0x23afd4=dbConfig['get'](_0x3a71de(0x311))[_0x3a71de(0x272)]({'botID':botID})['value']();if(_0x23afd4){const _0x3c05d5=!_0x23afd4[_0x3a71de(0x369)];dbConfig[_0x3a71de(0x29a)](_0x3a71de(0x311))[_0x3a71de(0x272)]({'botID':botID})[_0x3a71de(0x2ff)]({'headless':_0x3c05d5})[_0x3a71de(0x1e5)](),config[_0x3a71de(0x369)]=_0x3c05d5,proxyEmit(_0x3a71de(0x203),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5e8a95=_0x3da5bc;process['send']({'updatebotmanager':!![]},_0x7177fb=>{}),logger[_0x5e8a95(0x2a8)](_0x5e8a95(0x2e5)+config[_0x5e8a95(0x369)]);}async function loadCoins(_0x9210c3){const _0x135cd3=_0x3da5bc;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2d37a3,_0x51efee=0x0,_0xefc79=0x0;_0x9210c3[_0x135cd3(0x20f)](_0x2f3203=>{const _0x507a11=_0x135cd3;loading[_0x507a11(0x234)]['push'](_0x2f3203);}),loadingCanceled=![];let _0x177171=![];while(_0x2d37a3!=_0x9210c3[_0x135cd3(0x372)]+maxLoadingProgress){_0x2d37a3=loadingProgress,_0x9210c3[_0x135cd3(0x20f)](_0x4f25b9=>{const _0x4536f2=_0x135cd3;if(gTicker[noslash(_0x4f25b9)]){loading['remainingSymbols']=loading[_0x4536f2(0x234)][_0x4536f2(0x2c6)](_0x44ec6b=>_0x44ec6b!=_0x4f25b9);if(!watchedSymbols[_0x4536f2(0x2d1)](_0x4f25b9))watchedSymbols[_0x4536f2(0x2c0)](_0x4f25b9);_0x2d37a3++;}}),loading[_0x135cd3(0x2cf)]=Math['round'](_0x2d37a3/(_0x9210c3[_0x135cd3(0x372)]+maxLoadingProgress)*0x64);loading[_0x135cd3(0x2cf)]!=0x64&&(_0xefc79>0x1e*0x5&&(loading[_0x135cd3(0x2b1)]=!![],emitLoadingProgress()),_0xefc79>0x78*0x5&&!_0x177171&&(_0x177171=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x135cd3(0x234)][_0x135cd3(0x378)](',\x20')+_0x135cd3(0x2fb)),logHistory('error',_0x135cd3(0x230)+loadCoinsRetryInterval/0xea60+_0x135cd3(0x346)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x135cd3(0x1ce)]=!![],emitLoadingProgress();break;}else _0x51efee!=loading[_0x135cd3(0x2cf)]&&(_0x51efee=loading[_0x135cd3(0x2cf)],emitLoadingProgress()),_0xefc79++,await sleep(0xc8);}_0x2d37a3==_0x9210c3['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x135cd3(0x256)]({'status':'enabled','live':_0x135cd3(0x365)},_0x1c0b15=>{}),_0x177171&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x347ffe=_0x3da5bc;proxyEmit(_0x347ffe(0x203),{...emittedConfiguration(),'configstate':_0x347ffe(0x271)});}function emitLoadingProgress(){const _0x5945f8=_0x3da5bc;proxyEmit(_0x5945f8(0x36f),loading);}async function getFiat(){const _0x488309=_0x3da5bc;let _0x11f0a6=gTicker[stablecoins[_0x488309(0x2b0)][_0x488309(0x383)]],_0x39d27a=gTicker[stablecoins[_0x488309(0x364)][_0x488309(0x383)]];return{'eur':Number(_0x11f0a6),'usd':Number(_0x39d27a)};}function capitalize(_0x59b41d){const _0x6ba8fc=_0x3da5bc;return _0x59b41d[_0x6ba8fc(0x1f5)](0x0,0x1)[_0x6ba8fc(0x1e4)]()+_0x59b41d[_0x6ba8fc(0x1f5)](0x1);}function supportedExchanges(){const _0x5622d9=_0x3da5bc,_0x22e035=['ws',_0x5622d9(0x1df),_0x5622d9(0x267),'watchTrades',_0x5622d9(0x25f),_0x5622d9(0x1fc),'createOrder','fetchOpenOrders','fetchBalance'];let _0x741114=[],_0x41a6c8=[],_0x411ba6=ccxt[_0x5622d9(0x31f)][_0x5622d9(0x2a1)];_0x411ba6[_0x5622d9(0x20f)](_0x463b88=>{const _0x553d91=_0x5622d9;try{const _0x64647a=new ccxt[(_0x553d91(0x31f))][_0x463b88]();_0x41a6c8[_0x553d91(0x2c0)](_0x64647a);}catch(_0xa04632){}}),_0x41a6c8[_0x5622d9(0x20f)](_0x109006=>{const _0x37f64f=_0x5622d9;let _0x2bccb8=0x0;_0x22e035[_0x37f64f(0x20f)](_0x1dbd52=>{const _0x3acf03=_0x37f64f;_0x1dbd52 in _0x109006[_0x3acf03(0x2d9)]&&_0x109006[_0x3acf03(0x2d9)][_0x1dbd52]&&_0x2bccb8++;}),_0x2bccb8==_0x22e035[_0x37f64f(0x372)]&&_0x741114[_0x37f64f(0x2c0)](capitalize(_0x109006['id']));});let _0x554bdb=[];return _0x411ba6[_0x5622d9(0x20f)](_0xa2a8b0=>{const _0x2592cb=_0x5622d9;_0xa2a8b0=capitalize(_0xa2a8b0);if(!_0x741114[_0x2592cb(0x2d1)](_0xa2a8b0))_0x554bdb['push'](_0xa2a8b0);}),_0x741114;}function setStartDatePerformance(){const _0x4ff822=_0x3da5bc;if(config&&config[_0x4ff822(0x282)][0x0][_0x4ff822(0x2eb)][_0x4ff822(0x372)]!=0x0){const _0x211e8e=config[_0x4ff822(0x282)][0x0][_0x4ff822(0x2eb)];dbPerformance[_0x4ff822(0x29a)](_0x4ff822(0x20d))[_0x4ff822(0x272)]({'date':config['startdate']})['assign']({'coins':_0x211e8e})[_0x4ff822(0x1e5)]();}}async function recreateCoinResults(){const _0x4d8138=_0x3da5bc;recreationNeeded=![];let _0x426ae3,_0xf63a87=[];try{for(const _0x527c12 of currentCoins){if(_0x527c12[_0x4d8138(0x383)]!=config[_0x4d8138(0x370)]){let _0xc738f2=0x0,_0x5a00e3,_0x1090e4;_0x426ae3=await getAllEventOrders(_0x527c12[_0x4d8138(0x2f5)]);if(_0x426ae3[_0x4d8138(0x372)]>0x0)_0x426ae3[_0x4d8138(0x20f)](_0x44b2d9=>{const _0x390760=_0x4d8138,_0x2142d2=_0x527c12['symbol'][_0x390760(0x2d1)](config['basecoin']+'/');_0xf63a87[_0x390760(0x2c0)]({'datetime':_0x44b2d9[_0x390760(0x32e)],'coin':_0x527c12[_0x390760(0x383)],'symbol':_0x527c12['symbol'],'side':_0x44b2d9[_0x390760(0x313)],'reverse':_0x2142d2,'amount':formatResult(_0x44b2d9[_0x390760(0x326)],0x8),'filled':formatResult(_0x44b2d9['filled'],0x8),'price':formatResult(_0x44b2d9[_0x390760(0x1c2)],0x8)}),_0xc738f2=_0x44b2d9[_0x390760(0x313)]=='buy'?_0xc738f2+_0x44b2d9[_0x390760(0x326)]:_0xc738f2-_0x44b2d9[_0x390760(0x326)];if(!_0x1090e4)_0x1090e4=_0x44b2d9[_0x390760(0x1c2)];});_0x5a00e3=_0x527c12['number']-_0xc738f2;let _0x18795e;config['liquidity']['forEach'](_0x5eaf29=>{const _0xde9989=_0x4d8138;!_0x18795e&&(_0x18795e=_0x5eaf29[_0xde9989(0x2eb)][_0xde9989(0x272)](_0x58a8cc=>_0x58a8cc[_0xde9989(0x383)]==_0x527c12[_0xde9989(0x383)]),_0x18795e&&(_0x5a00e3=_0x18795e['number'],_0x1090e4=_0x18795e[_0xde9989(0x1c2)]));});let _0x99d9b0=dbCoinResults['get'](_0x4d8138(0x320))[_0x4d8138(0x272)]({'coin':_0x527c12['coin']})['value']();_0x99d9b0={'coin':_0x527c12[_0x4d8138(0x383)],'number':_0x5a00e3,'breakeven':_0x1090e4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4d8138(0x29a)](_0x4d8138(0x320))[_0x4d8138(0x272)]({'coin':_0x527c12[_0x4d8138(0x383)]})['assign'](_0x99d9b0)[_0x4d8138(0x1e5)]();}}_0xf63a87[_0x4d8138(0x340)]((_0x4130fa,_0x77d69b)=>_0x4130fa[_0x4d8138(0x32e)]>_0x77d69b[_0x4d8138(0x32e)]?0x1:_0x77d69b[_0x4d8138(0x32e)]>_0x4130fa[_0x4d8138(0x32e)]?-0x1:0x0);let _0x2ece1e=0x0;for(let _0x4cae44 of _0xf63a87){await updateCoinResults(_0x4cae44,!![]);}}catch(_0x3a3db1){await handleError(_0x3a3db1,_0x4d8138(0x228));}}async function getAllEventOrders(_0x29a6e6){const _0x441856=_0x3da5bc;let _0x2330c4=[],_0x166b0b=dbLogs[_0x441856(0x29a)](_0x441856(0x332))['filter'](_0x55e9f5=>{const _0x59cabc=_0x441856,_0x1323ae=_0x55e9f5[_0x59cabc(0x376)][_0x59cabc(0x215)]();return _0x1323ae['includes'](_0x29a6e6['toLowerCase']())&&(_0x1323ae[_0x59cabc(0x2d1)](_0x59cabc(0x1ff))&&_0x1323ae['includes'](_0x59cabc(0x2c5))||_0x1323ae[_0x59cabc(0x2d1)](_0x59cabc(0x326))&&_0x1323ae[_0x59cabc(0x2d1)](_0x59cabc(0x2c5)));})[_0x441856(0x2c2)](_0x441856(0x21d))['value']();return _0x166b0b[_0x441856(0x20f)](_0x2d8d3a=>{const _0x2efcf2=_0x441856,_0x2ed717=_0x2d8d3a['event'][_0x2efcf2(0x2d1)]('sell')?_0x2efcf2(0x1f3):_0x2efcf2(0x27e),_0x40d0ee=/#([0-9]|\.)+\s/i,_0x4988ac=Number(_0x40d0ee['exec'](_0x2d8d3a[_0x2efcf2(0x376)])[0x0]['slice'](0x1)),_0x5db693=/@([0-9]|\.)+$/i,_0xd41e25=Number(_0x5db693[_0x2efcf2(0x2c9)](_0x2d8d3a['event'])[0x0][_0x2efcf2(0x2fa)](0x1));_0x2330c4[_0x2efcf2(0x2c0)]({'datetime':_0x2d8d3a[_0x2efcf2(0x21d)],'coin':symbolToCoin(_0x29a6e6),'symbol':_0x29a6e6,'side':_0x2ed717,'amount':_0x4988ac,'filled':_0x4988ac,'price':_0xd41e25});}),_0x2330c4;}async function validate24hChanges(){const _0x546ed3=_0x3da5bc;for(const _0x2c6015 of currentCoins){if(_0x2c6015['coin']!=config[_0x546ed3(0x370)]){let _0xf3ba15;_0x2c6015[_0x546ed3(0x269)]?_0xf3ba15=formatResult((0x1/(gChange[_0x2c6015['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0xf3ba15=gChange[_0x2c6015[_0x546ed3(0x2f5)]],_0xf3ba15<config[_0x546ed3(0x31a)]&&(logHistory(_0x546ed3(0x21b),_0x2c6015[_0x546ed3(0x383)]+_0x546ed3(0x208)+_0xf3ba15+'%'),logHistory(_0x546ed3(0x21b),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x546ed3(0x21b),_0x546ed3(0x32b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x585322,_0x33926c){const _0x1a2641=_0x3da5bc;if(!_0x585322)return!![];const _0x306c7b=_0x33926c[_0x1a2641(0x35c)]('.'),_0x130f5a=_0x585322[_0x1a2641(0x35c)]('.');for(var _0x49609d=0x0;_0x49609d<_0x130f5a[_0x1a2641(0x372)];_0x49609d++){const _0x365b5f=~~_0x130f5a[_0x49609d],_0x4cc193=~~_0x306c7b[_0x49609d];if(_0x365b5f<_0x4cc193)return!![];if(_0x365b5f>_0x4cc193)return![];}return![];}async function oneTimeMigration(){const _0xdf0c34=_0x3da5bc;let _0x4090c3=dbLogs[_0xdf0c34(0x29a)](_0xdf0c34(0x1c9))[_0xdf0c34(0x306)]();if(isOlderVersion(_0x4090c3,'2.3.5')){let _0x33af00=[];const _0x3fb5ba=dbLogs[_0xdf0c34(0x29a)](_0xdf0c34(0x332))[_0xdf0c34(0x306)]();_0x3fb5ba[_0xdf0c34(0x20f)](_0x16ba7e=>{const _0x2c1b80=_0xdf0c34;_0x33af00[_0x2c1b80(0x2c0)]({'time':_0x16ba7e[_0x2c1b80(0x21d)],'type':_0x16ba7e[_0x2c1b80(0x29b)],'event':_0x16ba7e[_0x2c1b80(0x376)]});}),dbLogs[_0xdf0c34(0x29a)](_0xdf0c34(0x332))[_0xdf0c34(0x2ff)](_0x33af00)['write']();}let _0x5949fd=dbConfig['get'](_0xdf0c34(0x1c9))[_0xdf0c34(0x306)]();if(isOlderVersion(_0x5949fd,_0xdf0c34(0x377))){let _0x433d65=dbConfig[_0xdf0c34(0x29a)](_0xdf0c34(0x311))['find']({'botID':botID})[_0xdf0c34(0x306)]();if(_0x433d65){let _0x327105=[];_0x433d65[_0xdf0c34(0x2de)][_0xdf0c34(0x20f)](_0x4a3a34=>{const _0x381724=_0xdf0c34;_0x327105[_0x381724(0x2c0)]({'coin':_0x4a3a34['coin'],'number':_0x4a3a34[_0x381724(0x319)],'price':_0x4a3a34['startprice']}),delete _0x4a3a34[_0x381724(0x319)],delete _0x4a3a34[_0x381724(0x2b7)];});if(_0x327105['length']!==0x0)fs[_0xdf0c34(0x22d)](configbackuppath+(_0xdf0c34(0x348)+botID+_0xdf0c34(0x297)),JSON[_0xdf0c34(0x36d)](_0x327105,null,0x4),function(_0x4ce385){if(_0x4ce385){}});const _0x3bd052=(_0x1a2cb9,_0x49a0dc)=>{const _0x3f76c7=_0xdf0c34;let _0x495f64=[];_0x49a0dc[_0x3f76c7(0x20f)](_0x457ba0=>{const _0xa0ace1=_0x3f76c7,_0x468581=_0x1a2cb9[_0xa0ace1(0x272)](_0x2fd7eb=>_0x2fd7eb[_0xa0ace1(0x383)]==_0x457ba0[_0xa0ace1(0x383)]);if(!_0x468581)_0x495f64['push'](_0x457ba0);});let _0x159008=[];return _0x1a2cb9[_0x3f76c7(0x20f)](_0xbf8a87=>{const _0x294730=_0x3f76c7,_0x140dea=_0x49a0dc[_0x294730(0x272)](_0x25a854=>_0x25a854[_0x294730(0x383)]==_0xbf8a87[_0x294730(0x383)]);if(!_0x140dea||_0x140dea['number']==0x0&&_0xbf8a87[_0x294730(0x321)]!=0x0)_0x159008[_0x294730(0x2c0)](_0xbf8a87);}),{'missingDay1':_0x495f64,'notInDay2':_0x159008};},_0xea1623=dbPerformance[_0xdf0c34(0x29a)]('data')[_0xdf0c34(0x2e4)]()[_0xdf0c34(0x306)]();if(_0xea1623[_0xdf0c34(0x372)]>0x1){const {missingDay1:_0x910ba6,notInDay2:_0x453db6}=_0x3bd052(_0x327105,_0xea1623[0x1][_0xdf0c34(0x320)]);_0x327105=[..._0x327105,..._0x910ba6],_0x453db6[_0xdf0c34(0x20f)](_0x479a6b=>{const _0x418cfe=_0xdf0c34;let _0x1ea0ae=_0x327105[_0x418cfe(0x227)](_0x499c78=>_0x499c78[_0x418cfe(0x383)]==_0x479a6b[_0x418cfe(0x383)]);_0x1ea0ae!=-0x1&&_0x327105[_0x418cfe(0x26e)](_0x1ea0ae,0x1);});}_0x327105[_0xdf0c34(0x340)]((_0x4cafbd,_0x4f1e6a)=>_0x4cafbd[_0xdf0c34(0x383)]>_0x4f1e6a[_0xdf0c34(0x383)]?0x1:_0x4f1e6a['coin']>_0x4cafbd[_0xdf0c34(0x383)]?-0x1:0x0);let _0x1d35c6=[{'date':_0x433d65[_0xdf0c34(0x29c)],'changes':_0x327105}];_0xea1623[_0xdf0c34(0x372)]>0x2&&_0xea1623[_0xdf0c34(0x20f)]((_0x1f51a5,_0x158dad)=>{const _0x341355=_0xdf0c34;if(_0x158dad>0x0&&_0x158dad<_0xea1623[_0x341355(0x372)]-0x1){const {missingDay1:_0x50e6a8,notInDay2:_0xd05385}=_0x3bd052(_0xea1623[_0x158dad]['coins'],_0xea1623[_0x158dad+0x1][_0x341355(0x320)]);_0x327105=[],(_0x50e6a8['length']!=0x0||_0xd05385[_0x341355(0x372)]!=0x0)&&(_0x50e6a8[_0x341355(0x372)]!=0x0&&_0x327105[_0x341355(0x2c0)](..._0x50e6a8),_0xd05385[_0x341355(0x372)]!=0x0&&(_0xd05385[_0x341355(0x20f)](_0xad9ef4=>{const _0x5c494d=_0x341355;_0xad9ef4[_0x5c494d(0x321)]=-_0xad9ef4[_0x5c494d(0x321)];}),_0x327105[_0x341355(0x2c0)](..._0xd05385)),_0x327105['sort']((_0x6956e1,_0x43ce0b)=>_0x6956e1['coin']>_0x43ce0b[_0x341355(0x383)]?0x1:_0x43ce0b['coin']>_0x6956e1[_0x341355(0x383)]?-0x1:0x0),_0x1d35c6[_0x341355(0x2c0)]({'date':_0xea1623[_0x158dad+0x1][_0x341355(0x315)],'changes':_0x327105}));}}),dbConfig['get'](_0xdf0c34(0x311))[_0xdf0c34(0x272)]({'botID':botID})['assign']({..._0x433d65,'liquidity':_0x1d35c6})['write']();}}if(isOlderVersion(_0x5949fd,_0xdf0c34(0x1f2))){let _0x58b780=dbConfig[_0xdf0c34(0x29a)](_0xdf0c34(0x311))['find']({'botID':botID})[_0xdf0c34(0x306)]();if(_0x58b780){const _0x568c6d=_0x58b780[_0xdf0c34(0x2a3)],_0x7929f5=_0x568c6d?capitalize(_0x568c6d):_0xdf0c34(0x362);dbConfig['get']('bot')[_0xdf0c34(0x272)]({'botID':botID})[_0xdf0c34(0x2ff)]({'exchange':_0x7929f5})[_0xdf0c34(0x1e5)]();}}if(isOlderVersion(_0x5949fd,_0xdf0c34(0x2c8))){let _0x220a64=dbConfig[_0xdf0c34(0x29a)](_0xdf0c34(0x311))[_0xdf0c34(0x272)]({'botID':botID})[_0xdf0c34(0x306)]();if(_0x220a64){const _0x25fe61=_0x220a64['marketcapEnabled'],_0x4a1310=_0x25fe61?'marketcap':![];dbConfig[_0xdf0c34(0x29a)](_0xdf0c34(0x311))[_0xdf0c34(0x272)]({'botID':botID})[_0xdf0c34(0x2ff)]({'marketcapEnabled':_0x4a1310})['write']();}}if(isOlderVersion(_0x5949fd,_0xdf0c34(0x2ba))){let _0x1538f6=dbConfig['get']('bot')[_0xdf0c34(0x272)]({'botID':botID})[_0xdf0c34(0x306)]();if(_0x1538f6){const _0x116124=_0x1538f6[_0xdf0c34(0x226)],_0x251216=_0x116124?_0xdf0c34(0x210):![];dbConfig[_0xdf0c34(0x29a)]('bot')['find']({'botID':botID})[_0xdf0c34(0x2ff)]({'autoliquidity':_0x251216})[_0xdf0c34(0x1e5)]();}}let _0x914333=dbPerformance[_0xdf0c34(0x29a)]('version')[_0xdf0c34(0x306)]();isOlderVersion(_0x914333,_0xdf0c34(0x377))&&setStartDatePerformance();let _0x5b568a=dbCoinResults[_0xdf0c34(0x29a)]('version')[_0xdf0c34(0x306)]();if(isOlderVersion(_0x5b568a,_0xdf0c34(0x1c8))){let _0x5a9056=dbCoinResults[_0xdf0c34(0x29a)]('coins')[_0xdf0c34(0x306)]();if(_0x5a9056['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5a0589=_0x3da5bc;dbConfig[_0x5a0589(0x23e)](_0x5a0589(0x1c9),serverversion)[_0x5a0589(0x1e5)](),dbPerformance['set'](_0x5a0589(0x1c9),serverversion)[_0x5a0589(0x1e5)](),dbLogs[_0x5a0589(0x23e)](_0x5a0589(0x1c9),serverversion)[_0x5a0589(0x1e5)](),dbCoinResults[_0x5a0589(0x23e)](_0x5a0589(0x1c9),serverversion)['write']();}function getConfiguration(_0x895721){const _0x4b7499=_0x3da5bc;let _0x41148c=dbConfig[_0x4b7499(0x29a)](_0x4b7499(0x311))['find']({'botID':_0x895721})['value']();if(_0x41148c){let _0x568d2c=![];typeof _0x41148c[_0x4b7499(0x266)]==_0x4b7499(0x330)&&(_0x41148c={..._0x41148c,'threshold':Number(_0x41148c['threshold'])},_0x568d2c=!![]),_0x41148c[_0x4b7499(0x31a)]==undefined&&(_0x41148c={..._0x41148c,'change24h':-0x14},_0x568d2c=!![]),_0x41148c['fiat']==undefined&&(_0x41148c={..._0x41148c,'fiat':_0x4b7499(0x2ee)},_0x568d2c=!![]),_0x41148c[_0x4b7499(0x2ad)]==undefined&&(_0x41148c={..._0x41148c,'onepagemode':settings[_0x4b7499(0x2ad)]},_0x568d2c=!![]),_0x41148c['colorscheme']==undefined&&(_0x41148c={..._0x41148c,'colorscheme':_0x4b7499(0x30d)},_0x568d2c=!![]),_0x41148c['autoliquidity']==undefined&&(_0x41148c={..._0x41148c,'autoliquidity':_0x4b7499(0x210)},_0x568d2c=!![]),_0x41148c[_0x4b7499(0x2c3)]==undefined&&(_0x41148c={..._0x41148c,'marketcapApi':settings[_0x4b7499(0x2c3)]?!![]:![]},_0x568d2c=!![]),_0x41148c['marketcapEnabled']==undefined&&(_0x41148c={..._0x41148c,'marketcapEnabled':![]},_0x568d2c=!![]),_0x568d2c&&(_0x41148c={'botID':_0x41148c[_0x4b7499(0x2ab)],'exchange':_0x41148c[_0x4b7499(0x2a3)],'apiKey':_0x41148c[_0x4b7499(0x355)],'apiSecret':_0x41148c[_0x4b7499(0x2cc)],'apiPassword':_0x41148c[_0x4b7499(0x26b)],'basecoin':_0x41148c[_0x4b7499(0x370)],'botname':_0x41148c[_0x4b7499(0x1e9)],'showname':_0x41148c[_0x4b7499(0x212)],'threshold':_0x41148c[_0x4b7499(0x266)],'ordertype':_0x41148c[_0x4b7499(0x327)],'timeout':_0x41148c['timeout'],'fiat':_0x41148c[_0x4b7499(0x299)],'startdate':_0x41148c[_0x4b7499(0x29c)],'recreate':_0x41148c['recreate'],'timeshift':_0x41148c[_0x4b7499(0x2bb)],'onepagemode':_0x41148c[_0x4b7499(0x2ad)],'headless':_0x41148c['headless'],'cooldown':_0x41148c[_0x4b7499(0x2fe)],'change24h':_0x41148c['change24h'],'emojibuy':_0x41148c[_0x4b7499(0x32c)],'emojisell':_0x41148c['emojisell'],'colorscheme':_0x41148c[_0x4b7499(0x337)],'marketcapApi':_0x41148c[_0x4b7499(0x2c3)],'marketcapEnabled':_0x41148c[_0x4b7499(0x201)],'portfolio':_0x41148c[_0x4b7499(0x2de)],'autoliquidity':_0x41148c[_0x4b7499(0x226)],'liquidity':_0x41148c[_0x4b7499(0x282)],'openOrders':_0x41148c['openOrders']},dbConfig[_0x4b7499(0x29a)](_0x4b7499(0x311))['remove']()[_0x4b7499(0x1e5)](),dbConfig['get'](_0x4b7499(0x311))['push'](_0x41148c)['write']());}else _0x41148c={'botID':_0x895721,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x895721,'showname':![],'threshold':0x3,'ordertype':_0x4b7499(0x1ff),'timeout':0x14,'fiat':_0x4b7499(0x2ee),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4b7499(0x30d),'marketcapApi':settings['marketcapApi']?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x41148c;}function emittedConfiguration(){const _0x4e1510=_0x3da5bc;let _0x3592f9;if(config[_0x4e1510(0x355)]=='')_0x3592f9={...config,'configstate':_0x4e1510(0x2b2)};else config[_0x4e1510(0x355)]==_0x4e1510(0x1be)?_0x3592f9={...config,'configstate':_0x4e1510(0x30b)}:(_0x3592f9={...config,'apiKey':_0x4e1510(0x27b),'apiSecret':_0x4e1510(0x27b)},config['apiPassword']&&(_0x3592f9[_0x4e1510(0x26b)]=_0x4e1510(0x27b)));return _0x3592f9[_0x4e1510(0x2a7)]=enableFiatToggle,_0x3592f9;}function getSettings(){const _0x149af4=_0x3da5bc;return dbSettings[_0x149af4(0x29a)](_0x149af4(0x347))['value']();}function getSecure(){const _0x204c31=_0x3da5bc;return dbSecure[_0x204c31(0x29a)](_0x204c31(0x1e0))[_0x204c31(0x306)]()||{};}function updateTimeshift(_0x387d26){const _0x1d46cc=_0x3da5bc;let _0xf8d88d=dbConfig[_0x1d46cc(0x29a)](_0x1d46cc(0x311))[_0x1d46cc(0x272)]({'botID':botID})[_0x1d46cc(0x306)]();_0xf8d88d&&dbConfig[_0x1d46cc(0x29a)](_0x1d46cc(0x311))[_0x1d46cc(0x272)]({'botID':botID})['assign']({'timeshift':_0x387d26})[_0x1d46cc(0x1e5)](),config[_0x1d46cc(0x2bb)]=_0x387d26,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x50e0af){const _0xdf6983=_0x3da5bc;let _0x95353f=dbConfig[_0xdf6983(0x29a)]('bot')[_0xdf6983(0x272)]({'botID':botID})['value']();_0x95353f&&dbConfig['get'](_0xdf6983(0x311))[_0xdf6983(0x272)]({'botID':botID})[_0xdf6983(0x2ff)]({'onepagemode':_0x50e0af})[_0xdf6983(0x1e5)](),config[_0xdf6983(0x2ad)]=_0x50e0af,proxyEmit(_0xdf6983(0x203),emittedConfiguration());}function updateMarketcapApi(_0x166fd9){const _0x43bcba=_0x3da5bc,_0x320555=_0x166fd9?!![]:![];let _0x40bc77=dbConfig[_0x43bcba(0x29a)]('bot')[_0x43bcba(0x272)]({'botID':botID})[_0x43bcba(0x306)]();_0x40bc77&&dbConfig[_0x43bcba(0x29a)](_0x43bcba(0x311))[_0x43bcba(0x272)]({'botID':botID})[_0x43bcba(0x2ff)]({'marketcapApi':_0x320555})[_0x43bcba(0x1e5)](),config[_0x43bcba(0x2c3)]=_0x320555,getMarketCap(),proxyEmit(_0x43bcba(0x203),emittedConfiguration());}async function storeConfiguration(_0x54feae){const _0x133a20=_0x3da5bc;logger[_0x133a20(0x2a8)](_0x133a20(0x26d));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x36c90e=![],_0x2ad553=![],_0x4d6279=[];_0x54feae['portfolio']['forEach'](_0x100b02=>{const _0x588f56=_0x133a20;if(!_0x100b02['excluded']&&_0x100b02[_0x588f56(0x383)]!=_0x54feae[_0x588f56(0x370)])_0x4d6279[_0x588f56(0x2c0)](_0x100b02[_0x588f56(0x2f5)]);}),_0x4d6279[_0x133a20(0x20f)](_0x442386=>{const _0x153d5d=_0x133a20,_0x20e008=currentCoins[_0x153d5d(0x272)](_0x2acfa1=>_0x2acfa1['symbol']==_0x442386);!_0x20e008&&(_0x36c90e=!![]);}),currentCoins['forEach'](_0x1d3ed0=>{const _0x15849f=_0x133a20;if(_0x1d3ed0[_0x15849f(0x383)]!=config[_0x15849f(0x370)]){const _0x489991=_0x4d6279[_0x15849f(0x272)](_0x4f1507=>_0x4f1507==_0x1d3ed0['symbol']);!_0x489991&&(_0x36c90e=!![]);}}),_0x54feae[_0x133a20(0x2de)][_0x133a20(0x20f)](_0x960fba=>{const _0x2401a1=_0x133a20,_0x5105b1=config[_0x2401a1(0x2de)][_0x2401a1(0x272)](_0x4d6c32=>_0x4d6c32[_0x2401a1(0x383)]==_0x960fba[_0x2401a1(0x383)]);if(_0x5105b1&&_0x960fba[_0x2401a1(0x1cd)]!=_0x5105b1[_0x2401a1(0x1cd)])_0x2ad553=!![];});let _0xcc2b98=dbConfig[_0x133a20(0x29a)](_0x133a20(0x311))[_0x133a20(0x272)]({'botID':botID})['value']();_0x54feae={..._0x54feae,'apiKey':crypt[_0x133a20(0x253)](secure[_0x133a20(0x331)],_0x54feae[_0x133a20(0x355)])['message'],'apiSecret':crypt['decrypt'](secure[_0x133a20(0x331)],_0x54feae[_0x133a20(0x2cc)])[_0x133a20(0x31e)]};_0x54feae[_0x133a20(0x26b)]&&(_0x54feae[_0x133a20(0x26b)]=crypt[_0x133a20(0x253)](secure[_0x133a20(0x331)],_0x54feae['apiPassword'])['message']);let _0x48bcb6=![];if(_0xcc2b98){_0x54feae['apiKey']==_0x133a20(0x27b)?_0x54feae[_0x133a20(0x355)]=config['apiKey']:_0x48bcb6=!![];_0x54feae[_0x133a20(0x2cc)]==_0x133a20(0x27b)?_0x54feae[_0x133a20(0x2cc)]=config['apiSecret']:_0x48bcb6=!![];if(_0x54feae[_0x133a20(0x26b)]==_0x133a20(0x27b))_0x54feae['apiPassword']=config['apiPassword'];else{if(_0x54feae[_0x133a20(0x26b)])_0x48bcb6=!![];}dbConfig[_0x133a20(0x29a)](_0x133a20(0x311))[_0x133a20(0x272)]({'botID':botID})[_0x133a20(0x2ff)](_0x54feae)['write']();}else dbConfig[_0x133a20(0x29a)](_0x133a20(0x311))[_0x133a20(0x2c0)](_0x54feae)[_0x133a20(0x1e5)](),_0x48bcb6=!![],process[_0x133a20(0x256)]({'status':'enabled','live':_0x133a20(0x365)},_0x522a88=>{});process[_0x133a20(0x256)]({'botname':_0x54feae[_0x133a20(0x1e9)]},_0x51033a=>{}),config={..._0x54feae},updateBotManager(),proxyEmit(_0x133a20(0x2a9)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x48bcb6)!_0xcc2b98?await reset(!![]):getBalances();else _0x36c90e||_0x2ad553?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x42450){const _0x4f54cf=_0x3da5bc,_0x52f13c={...config,'headless':_0x42450[_0x4f54cf(0x369)]};let _0x20182f=dbConfig[_0x4f54cf(0x29a)](_0x4f54cf(0x311))[_0x4f54cf(0x272)]({'botID':botID})[_0x4f54cf(0x306)]();_0x20182f&&dbConfig[_0x4f54cf(0x29a)]('bot')[_0x4f54cf(0x272)]({'botID':botID})[_0x4f54cf(0x2ff)](_0x52f13c)[_0x4f54cf(0x1e5)](),config={..._0x52f13c},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0xa4881d){const _0x28cd00=_0x3da5bc,_0x58082a={...config,'fiat':_0xa4881d};let _0x56754c=dbConfig[_0x28cd00(0x29a)]('bot')[_0x28cd00(0x272)]({'botID':botID})['value']();_0x56754c&&dbConfig[_0x28cd00(0x29a)](_0x28cd00(0x311))[_0x28cd00(0x272)]({'botID':botID})[_0x28cd00(0x2ff)](_0x58082a)[_0x28cd00(0x1e5)](),config={..._0x58082a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x2009b5=_0x3da5bc;logger[_0x2009b5(0x240)](_0x2009b5(0x308));try{if(fs[_0x2009b5(0x33a)](path[_0x2009b5(0x378)](configpath,'bot-'+botID+_0x2009b5(0x1ca))))fs[_0x2009b5(0x329)](path['join'](configpath,_0x2009b5(0x25a)+botID+_0x2009b5(0x1ca)));if(fs[_0x2009b5(0x33a)](path[_0x2009b5(0x378)](configpath,_0x2009b5(0x25a)+botID+_0x2009b5(0x1fa))))fs[_0x2009b5(0x329)](path[_0x2009b5(0x378)](configpath,_0x2009b5(0x25a)+botID+_0x2009b5(0x1fa)));if(fs['existsSync'](path[_0x2009b5(0x378)](configpath,_0x2009b5(0x25a)+botID+_0x2009b5(0x204))))fs[_0x2009b5(0x329)](path[_0x2009b5(0x378)](configpath,_0x2009b5(0x25a)+botID+_0x2009b5(0x204)));}catch(_0x4091fb){if(_0x4091fb)logger[_0x2009b5(0x240)](_0x2009b5(0x292),_0x4091fb);}const _0x4d5578=getDate();let _0x284bd2=[];currentCoins[_0x2009b5(0x20f)](_0x32e70c=>{const _0x281a39=_0x2009b5;_0x284bd2['push']({'coin':_0x32e70c[_0x281a39(0x383)],'number':_0x32e70c['number'],'price':_0x32e70c[_0x281a39(0x20b)]});});let _0x33089a=dbConfig[_0x2009b5(0x29a)](_0x2009b5(0x311))[_0x2009b5(0x272)]({'botID':botID})['value']();_0x33089a&&(dbConfig[_0x2009b5(0x29a)](_0x2009b5(0x311))[_0x2009b5(0x272)]({'botID':botID})['assign']({'liquidity':[{'date':_0x4d5578,'changes':_0x284bd2}]})[_0x2009b5(0x1e5)](),config[_0x2009b5(0x282)]=[]),restartBot(!![]);}function noslash(_0x23555f){return _0x23555f['replace']('/','');}function updateHighestFee(_0x4e932e){const _0x201e57=_0x3da5bc;if(_0x4e932e[_0x201e57(0x269)]){let _0x3481ff={'filled':_0x4e932e['filled']*_0x4e932e[_0x201e57(0x1c2)],'amount':_0x4e932e[_0x201e57(0x326)]*_0x4e932e[_0x201e57(0x1c2)],'side':_0x4e932e['side']=='sell'?'buy':_0x201e57(0x1f3),'price':0x1/_0x4e932e[_0x201e57(0x1c2)]};_0x4e932e={..._0x4e932e,..._0x3481ff};}const _0x568516=defaultFee*_0x4e932e['filled']*_0x4e932e['price'];lastFees[_0x201e57(0x2d7)][_0x201e57(0x372)]===0x14&&lastFees[_0x201e57(0x2d7)][_0x201e57(0x1bd)](),lastFees['recent20'][_0x201e57(0x2c0)](_0x568516),lastFees[_0x201e57(0x309)]=Math[_0x201e57(0x36b)](...lastFees[_0x201e57(0x2d7)]);}async function updateNumberCoinsCcxt(_0x48dca9){const _0x11870c=_0x3da5bc;logger['debug']('0\x20-\x20EXECUTION:\x20'+_0x48dca9[_0x11870c(0x2f5)]+_0x11870c(0x2d5)+_0x48dca9['status']+_0x11870c(0x2d5)+_0x48dca9[_0x11870c(0x326)]+_0x11870c(0x1d2)+_0x48dca9[_0x11870c(0x1e3)]+_0x11870c(0x2d5)+_0x48dca9['id']);let _0x4ae570=_0x48dca9[_0x11870c(0x2e6)],_0x30a516=![];currentCoins[_0x11870c(0x20f)](_0x2f53b3=>{const _0x218ad5=_0x11870c;_0x2f53b3[_0x218ad5(0x2f5)]==_0x48dca9[_0x218ad5(0x2f5)]&&(_0x30a516=!![]);});if(!_0x30a516)return;const _0x52784d=currentCoins['find'](_0x4b2ad4=>_0x4b2ad4[_0x11870c(0x2f5)]==_0x48dca9[_0x11870c(0x2f5)]),_0x3011bf=_0x403bac=>{const _0x466933=_0x11870c;if(_0x52784d)_0x52784d[_0x466933(0x34f)]=_0x403bac;};let _0x4d5863=![];for(const _0x315560 of lastOrders){const _0x317b55=0x64,_0x11fdc5=0x1388;let _0x16169a=0x0;while(!_0x315560[_0x11870c(0x34c)]&&_0x16169a*_0x317b55<_0x11fdc5){_0x16169a++,await sleep(_0x317b55);}if(_0x16169a>0x0)logger[_0x11870c(0x2a8)](_0x11870c(0x24f)+_0x16169a*_0x317b55/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x315560[_0x11870c(0x34c)]==_0x48dca9['id']&&(_0x4d5863=!![]);}if(_0x4ae570==_0x11870c(0x286)){_0x3011bf(_0x11870c(0x286));if(_0x48dca9['filled']>0x0){if(_0x4d5863){setBlockTransactionDetection(!![]),logger[_0x11870c(0x2a8)]('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x48dca9['id']);const _0x1fdbeb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1fdbeb,setBlockTransactionDetection(![]);}else logger[_0x11870c(0x2a8)](_0x11870c(0x1fb)+_0x48dca9['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x4ae570=='canceled'){_0x3011bf(_0x11870c(0x1f0));const _0x31fa7c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x31fa7c,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x4ae570=='closed'){if(lastOrders)for(const _0x5919a3 of lastOrders){if(_0x5919a3[_0x11870c(0x34c)]==_0x48dca9['id']){logger[_0x11870c(0x2a8)](_0x11870c(0x37a)+_0x48dca9['id']),_0x4d5863=!![];if(_0x5919a3['filled']==0x0){setBlockTransactionDetection(!![]),logger['debug']('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x48dca9['id']);if(_0x48dca9['average'])_0x5919a3[_0x11870c(0x1c2)]=_0x48dca9[_0x11870c(0x22c)];else{if(_0x48dca9[_0x11870c(0x1c2)])_0x5919a3[_0x11870c(0x1c2)]=_0x48dca9[_0x11870c(0x1c2)];else{}}_0x5919a3[_0x11870c(0x326)]=_0x48dca9[_0x11870c(0x326)],updateHighestFee(_0x5919a3),_0x3011bf(_0x11870c(0x326)),await validateOrders();if(lockOrders==ORDERS[_0x11870c(0x30a)]){const _0x2d01d0=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2d01d0,setBlockTransactionDetection(![]);}_0x5919a3['fee']={'currency':_0x48dca9[_0x11870c(0x229)]?_0x48dca9[_0x11870c(0x229)]['currency']:null,'cost':_0x48dca9[_0x11870c(0x229)]?_0x48dca9[_0x11870c(0x229)][_0x11870c(0x1c4)]:0x0},await updateCoinResults(_0x5919a3);}}}!_0x4d5863&&(logger[_0x11870c(0x2a8)](_0x11870c(0x36e)+_0x48dca9['id']),_0x3011bf(_0x11870c(0x326)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x571c23=JSON[_0x11870c(0x252)](lastBalances[_0x11870c(0x2de)]);const _0x2ac196=_0x571c23[_0x11870c(0x272)](_0x19d1cd=>_0x19d1cd[_0x11870c(0x2f5)]==_0x48dca9[_0x11870c(0x2f5)]);if(_0x2ac196){if(_0x4ae570=='open')_0x2ac196[_0x11870c(0x34f)]=_0x2ac196[_0x11870c(0x34f)]==_0x11870c(0x326)?_0x11870c(0x326):_0x11870c(0x286);else{if(_0x4ae570==_0x11870c(0x1f0))_0x2ac196[_0x11870c(0x34f)]=_0x2ac196[_0x11870c(0x34f)]==_0x11870c(0x326)?'filled':_0x11870c(0x1f0);else _0x4ae570=='closed'&&(_0x2ac196[_0x11870c(0x34f)]=_0x11870c(0x326));}}lastBalances={...lastBalances,'portfolio':JSON[_0x11870c(0x36d)](_0x571c23)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x1f13df=![];currentCoins['forEach'](_0x3b9891=>{const _0x22cb3a=_0x1837;_0x1f13df=allOpenOrders[_0x22cb3a(0x272)](_0xf7db26=>_0xf7db26[_0x22cb3a(0x2f5)]==_0x3b9891[_0x22cb3a(0x2f5)]),_0x3b9891[_0x22cb3a(0x34f)]=_0x1f13df?'open':_0x22cb3a(0x2d8);});}async function getCoins(_0x4c8524=0x0,_0x862f0f=!![],_0x6a6f98=config['basecoin']){const _0x425d65=_0x3da5bc;let _0x3f0414,_0x591a11=[],_0x9aa083=[],_0x13131e=[];if(_0x4c8524)await sleep(_0x4c8524);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x3f0414=await exchange[_0x425d65(0x262)](),mybalances=_0x3f0414[_0x425d65(0x2c4)];for(const [_0x3b3f95,_0x5d1aec]of Object[_0x425d65(0x2e9)](mybalances)){_0x13131e[_0x425d65(0x2c0)](_0x3b3f95);}config['portfolio'][_0x425d65(0x20f)](_0x970677=>{const _0x2eaf54=_0x425d65;!_0x13131e['includes'](_0x970677[_0x2eaf54(0x383)])&&(mybalances[_0x970677[_0x2eaf54(0x383)]]=0x0);});if(_0x6a6f98=='')for(const [_0x377c77,_0x48d782]of Object[_0x425d65(0x2e9)](mybalances)){_0x48d782!=0x0&&_0x591a11[_0x425d65(0x2c0)]({'coin':_0x377c77});}else for(const [_0x7308bb,_0x391935]of Object[_0x425d65(0x2e9)](mybalances)){const _0x466fba=config['portfolio'][_0x425d65(0x272)](_0x114225=>_0x114225[_0x425d65(0x383)]==_0x7308bb),_0x575d61=_0x7308bb+'/'+_0x6a6f98,_0x2335ef=_0x6a6f98+'/'+_0x7308bb,_0x14233c=currentCoins[_0x425d65(0x272)](_0x1ed3a7=>_0x1ed3a7[_0x425d65(0x383)]==_0x7308bb);if((_0x391935!=0x0||_0x466fba)&&(allSymbols['includes'](_0x575d61)||_0x7308bb==_0x6a6f98))_0x14233c?_0x591a11[_0x425d65(0x2c0)]({..._0x14233c,'number':Math[_0x425d65(0x36b)](_0x391935+(_0x466fba&&_0x466fba['offset']||0x0),0x0)}):_0x591a11[_0x425d65(0x2c0)]({'coin':_0x7308bb,'symbol':_0x575d61,'reverse':![],'number':Math['max'](_0x391935+(_0x466fba&&_0x466fba[_0x425d65(0x1cd)]||0x0),0x0),'orderstatus':_0x425d65(0x2d8)});else{if((_0x391935!=0x0||_0x466fba)&&allSymbols['includes'](_0x2335ef))_0x14233c?_0x591a11['push']({..._0x14233c,'number':Math['max'](_0x391935+(_0x466fba&&_0x466fba[_0x425d65(0x1cd)]||0x0),0x0)}):_0x591a11[_0x425d65(0x2c0)]({'coin':_0x7308bb,'symbol':_0x2335ef,'reverse':!![],'number':Math[_0x425d65(0x36b)](_0x391935+(_0x466fba&&_0x466fba['offset']||0x0),0x0),'orderstatus':'none'});else _0x466fba&&_0x591a11[_0x425d65(0x2c0)]({'coin':_0x466fba[_0x425d65(0x383)],'symbol':_0x466fba[_0x425d65(0x2f5)],'reverse':_0x466fba[_0x425d65(0x269)],'number':0x0,'orderstatus':_0x425d65(0x2d8)});}}}catch(_0x469979){if(!_0x862f0f)handleErrorNoStop(_0x469979,_0x425d65(0x349));else await handleError(_0x469979,_0x425d65(0x349));}return _0x591a11[_0x425d65(0x340)]((_0x167b5b,_0x4b4ca3)=>_0x167b5b[_0x425d65(0x33e)]<_0x4b4ca3[_0x425d65(0x33e)]?0x1:_0x4b4ca3[_0x425d65(0x33e)]<_0x167b5b[_0x425d65(0x33e)]?-0x1:0x0),_0x9aa083=cloneDeep(_0x591a11),_0x591a11=_0x591a11[_0x425d65(0x2c6)](_0x4a969c=>{const _0x3d2023=_0x425d65,_0x148c3a=config[_0x3d2023(0x2de)]['find'](_0x3ace40=>_0x3ace40[_0x3d2023(0x383)]==_0x4a969c[_0x3d2023(0x383)]);return _0x148c3a&&!_0x148c3a[_0x3d2023(0x381)];}),[_0x591a11,_0x9aa083];}async function getCoinNumber(_0x1e9127){const _0x52316a=_0x3da5bc;let _0x2d31c8;try{const _0x50dc29=await exchange['fetchBalance']();_0x2d31c8=_0x50dc29[_0x52316a(0x2c4)][_0x1e9127];}catch(_0x51f83f){await handleError(_0x51f83f,_0x52316a(0x1d6));}return _0x2d31c8;}async function getOpenOrders(){const _0x3a7471=_0x3da5bc;let _0x4afaf5;allOpenOrders=[];try{for(const _0xeedd0d of config[_0x3a7471(0x2de)]){!_0xeedd0d['excluded']&&_0xeedd0d[_0x3a7471(0x383)]!=config[_0x3a7471(0x370)]&&(_0x4afaf5=await exchange['fetchOpenOrders'](_0xeedd0d[_0x3a7471(0x2f5)]),_0x4afaf5[_0x3a7471(0x372)]>0x0&&allOpenOrders[_0x3a7471(0x2c0)](_0x4afaf5[0x0]));}}catch(_0x18c211){await handleError(_0x18c211,_0x3a7471(0x34b));}}async function handleOpenOrders(_0x53f11f=0x0){const _0x5bb072=_0x3da5bc;allOpenOrders[_0x5bb072(0x372)]==0x0&&lockOrders==ORDERS[_0x5bb072(0x30a)]&&allOrdersPlaced&&(_0x53f11f==0x0?(logger[_0x5bb072(0x2a8)](_0x5bb072(0x24e)),_0x53f11f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x5bb072(0x2a8)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x4c3d2c){const _0x51437f=_0x3da5bc,_0x4344c3=ccxt[_0x51437f(0x31f)][_0x4c3d2c[_0x51437f(0x2a3)][_0x51437f(0x215)]()],_0x1c294d=new _0x4344c3({'apiKey':_0x4c3d2c[_0x51437f(0x355)],'secret':_0x4c3d2c[_0x51437f(0x2cc)],'options':{'defaultType':'spot'}});if(_0x4c3d2c[_0x51437f(0x26b)])_0x1c294d['password']=_0x4c3d2c[_0x51437f(0x26b)];try{await _0x1c294d[_0x51437f(0x262)]();}catch(_0x177e90){logger[_0x51437f(0x2a8)](_0x51437f(0x25e)+_0x177e90[_0x51437f(0x2a0)]());throw _0x177e90;}}function cloneDeep(_0x59829c){const _0x4ef4e3=_0x3da5bc;return JSON[_0x4ef4e3(0x252)](JSON[_0x4ef4e3(0x36d)](_0x59829c));}async function getPortfolio(_0x5ca34c){const _0x448eb6=_0x3da5bc;let _0x244b9e=[],_0x462f70=[],_0x180c4c=[],_0x435e74;_0x5ca34c[_0x448eb6(0x355)]=crypt[_0x448eb6(0x253)](secure['privateKey'],_0x5ca34c[_0x448eb6(0x355)])[_0x448eb6(0x31e)],_0x5ca34c['apiSecret']=crypt[_0x448eb6(0x253)](secure[_0x448eb6(0x331)],_0x5ca34c[_0x448eb6(0x2cc)])[_0x448eb6(0x31e)],_0x5ca34c[_0x448eb6(0x26b)]=crypt['decrypt'](secure['privateKey'],_0x5ca34c['apiPassword'])[_0x448eb6(0x31e)];if(_0x5ca34c[_0x448eb6(0x355)]!==_0x448eb6(0x27b)||_0x5ca34c['apiSecret']!==_0x448eb6(0x27b)||_0x5ca34c[_0x448eb6(0x26b)]&&_0x5ca34c[_0x448eb6(0x26b)]!=='************'){if(config[_0x448eb6(0x2a3)]){if(_0x5ca34c[_0x448eb6(0x355)]==_0x448eb6(0x27b))_0x5ca34c[_0x448eb6(0x355)]=config[_0x448eb6(0x355)];if(_0x5ca34c['apiSecret']==_0x448eb6(0x27b))_0x5ca34c[_0x448eb6(0x2cc)]=config[_0x448eb6(0x2cc)];if(_0x5ca34c[_0x448eb6(0x26b)]==_0x448eb6(0x27b))_0x5ca34c[_0x448eb6(0x26b)]=config[_0x448eb6(0x26b)];}try{await testAPI(_0x5ca34c);}catch(_0x354c37){if(_0x354c37['toString']()['includes']('AuthenticationError')){logHistory(_0x448eb6(0x21b),_0x448eb6(0x207)),proxyEmit(_0x448eb6(0x294),![]);return;}else{logHistory(_0x448eb6(0x21b),_0x448eb6(0x1d4)),logger[_0x448eb6(0x2a8)](_0x448eb6(0x276),_0x354c37),proxyEmit(_0x448eb6(0x294),![]);return;}}exchange?updateExchange(_0x5ca34c['apiKey'],_0x5ca34c[_0x448eb6(0x2cc)],_0x5ca34c[_0x448eb6(0x26b)]):await initExchange(_0x5ca34c[_0x448eb6(0x2a3)],_0x5ca34c[_0x448eb6(0x355)],_0x5ca34c['apiSecret'],_0x5ca34c[_0x448eb6(0x26b)]);await loadSymbols();const _0x372269=await getCoins(0x0,![],_0x5ca34c['basecoin']);_0x180c4c=cloneDeep(_0x372269[0x1]);}else{const _0x94125d=await getCoins();_0x180c4c=cloneDeep(_0x94125d[0x1]);}if(_0x5ca34c[_0x448eb6(0x370)]=='')proxyEmit(_0x448eb6(0x294),!![]),proxyEmit('portfolio2',_0x180c4c);else{_0x180c4c[_0x448eb6(0x20f)](_0x4e5056=>{const _0x3e20fa=_0x448eb6;if(_0x4e5056['coin']!=_0x5ca34c[_0x3e20fa(0x370)]&&allSymbols[_0x3e20fa(0x2d1)](_0x4e5056[_0x3e20fa(0x2f5)]))_0x244b9e[_0x3e20fa(0x2c0)](_0x4e5056[_0x3e20fa(0x2f5)]);});if(_0x244b9e['length']==0x0)logHistory(_0x448eb6(0x21b),_0x448eb6(0x231));else{try{_0x462f70=await getTickers(_0x244b9e);}catch(_0x3adf61){logHistory(_0x448eb6(0x21b),'Unknown\x20error\x20-\x20check\x20logs'),logger['debug'](_0x448eb6(0x2d3),_0x3adf61),proxyEmit('portfolio1',![]);return;}_0x180c4c[_0x448eb6(0x20f)](_0x42aa5f=>{const _0x289d3a=_0x448eb6;_0x42aa5f[_0x289d3a(0x383)]!=_0x5ca34c[_0x289d3a(0x370)]?_0x462f70[_0x42aa5f[_0x289d3a(0x2f5)]]?_0x435e74=_0x42aa5f[_0x289d3a(0x269)]?0x1/_0x462f70[_0x42aa5f[_0x289d3a(0x2f5)]][_0x289d3a(0x20b)]:_0x462f70[_0x42aa5f[_0x289d3a(0x2f5)]][_0x289d3a(0x20b)]:_0x435e74=0x0:_0x435e74=0x1,_0x42aa5f[_0x289d3a(0x1c2)]=formatResult(_0x435e74,0x8);}),await getMarketCap(_0x180c4c),proxyEmit(_0x448eb6(0x294),!![]),proxyEmit(_0x448eb6(0x1ef),_0x180c4c);}}}function truncateTradeAmount(_0x13c2ee,_0x324489){const _0x3834a9=_0x3da5bc;let _0x2d4b00=0x0;try{_0x2d4b00=exchange[_0x3834a9(0x2ac)](_0x13c2ee,_0x324489);}catch(_0x534b50){}return _0x2d4b00;}function checkMinimums(_0x31dab7){const _0x3ef366=_0x3da5bc;let _0x253270=!![];const _0x4e7fcd=!_0x31dab7['reverse']?markets[_0x31dab7[_0x3ef366(0x2f5)]][_0x3ef366(0x241)]['amount']['min']:markets[_0x31dab7[_0x3ef366(0x2f5)]]['limits'][_0x3ef366(0x1c4)][_0x3ef366(0x263)],_0x231de8=!_0x31dab7[_0x3ef366(0x269)]?markets[_0x31dab7[_0x3ef366(0x2f5)]][_0x3ef366(0x241)]['cost'][_0x3ef366(0x263)]:markets[_0x31dab7[_0x3ef366(0x2f5)]]['limits'][_0x3ef366(0x1e3)][_0x3ef366(0x263)],_0x7eaff=truncateTradeAmount(_0x31dab7['symbol'],_0x31dab7['trade']);_0x31dab7[_0x3ef366(0x251)]=_0x7eaff;if(Math[_0x3ef366(0x2e2)](_0x7eaff)<_0x4e7fcd)_0x253270=![];if(Math[_0x3ef366(0x2e2)](_0x7eaff)*_0x31dab7[_0x3ef366(0x20b)]<_0x231de8)_0x253270=![];if(_0x31dab7[_0x3ef366(0x313)]==_0x3ef366(0x1f3)){let _0x118a24=config[_0x3ef366(0x2de)][_0x3ef366(0x272)](_0x5daaf2=>_0x5daaf2[_0x3ef366(0x383)]==_0x31dab7[_0x3ef366(0x383)]);if(_0x118a24[_0x3ef366(0x1cd)]>0x0){if(Math[_0x3ef366(0x2e2)](_0x7eaff)>_0x31dab7['number']-_0x118a24[_0x3ef366(0x1cd)])_0x253270=![];}else{if(Math['abs'](_0x7eaff)>_0x31dab7[_0x3ef366(0x321)])_0x253270=![];}}if(_0x31dab7['side']==_0x3ef366(0x27e)){let _0x467f55=config['portfolio']['find'](_0x4d4029=>_0x4d4029['coin']==config[_0x3ef366(0x370)]),_0x82f6ba=currentCoins[_0x3ef366(0x272)](_0x25bb87=>_0x25bb87[_0x3ef366(0x383)]==config[_0x3ef366(0x370)]);if(_0x467f55['offset']>0x0){if(Math[_0x3ef366(0x2e2)](_0x7eaff)*_0x31dab7[_0x3ef366(0x20b)]>_0x82f6ba[_0x3ef366(0x321)]-_0x467f55['offset'])_0x253270=![];}else{if(Math[_0x3ef366(0x2e2)](_0x7eaff)*_0x31dab7['last']>_0x82f6ba[_0x3ef366(0x321)])_0x253270=![];}}return _0x253270;}async function getBalances(_0x77c97=!![]){const _0x5c74fd=_0x3da5bc;let _0x42f150=0x0,_0x4d753d;const _0x28f990=config[_0x5c74fd(0x266)];if(config['headless']&&config[_0x5c74fd(0x31a)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x18f174=>{const _0x39dea6=_0x5c74fd;if(_0x18f174[_0x39dea6(0x383)]!=config[_0x39dea6(0x370)]){let _0x8b5c=gTicker[noslash(_0x18f174['symbol'])];_0x4d753d=_0x18f174['reverse']?0x1/_0x8b5c:_0x8b5c;}else _0x4d753d=0x1;let _0x3da68d=_0x18f174[_0x39dea6(0x321)]*_0x4d753d;_0x42f150+=_0x3da68d,_0x18f174[_0x39dea6(0x20b)]=formatResult(Number(_0x4d753d),0x8),_0x18f174[_0x39dea6(0x306)]=_0x3da68d;}),currentCoins['forEach'](_0x185baf=>{const _0x4a8871=_0x5c74fd;let _0x5c3be6=config[_0x4a8871(0x2de)][_0x4a8871(0x272)](_0xa887a8=>_0xa887a8[_0x4a8871(0x383)]==_0x185baf['coin']),_0x3a5ebd=Number(_0x5c3be6[_0x4a8871(0x2b6)]),_0x44cfed=_0x185baf[_0x4a8871(0x306)]/_0x42f150*0x64,_0x38b8de=_0x3a5ebd*_0x42f150/0x64/_0x185baf['last']-_0x185baf[_0x4a8871(0x321)];_0x185baf[_0x4a8871(0x2b6)]=formatResult(_0x44cfed,0x3),_0x185baf[_0x4a8871(0x28f)]=formatResult(_0x3a5ebd,0x3),_0x185baf[_0x4a8871(0x251)]=formatResult(_0x38b8de,0x8),_0x185baf['side']='',_0x185baf[_0x4a8871(0x32f)]=![];if(_0x185baf[_0x4a8871(0x383)]!=config[_0x4a8871(0x370)]){if(_0x185baf['distribution']>_0x3a5ebd)_0x185baf[_0x4a8871(0x313)]=_0x4a8871(0x1f3),_0x185baf[_0x4a8871(0x32f)]=checkMinimums(_0x185baf);else _0x185baf[_0x4a8871(0x2b6)]<_0x3a5ebd&&(_0x185baf[_0x4a8871(0x313)]=_0x4a8871(0x27e),_0x185baf[_0x4a8871(0x32f)]=checkMinimums(_0x185baf));}_0x185baf[_0x4a8871(0x33e)]=_0x185baf[_0x4a8871(0x2b6)]/_0x185baf['target']-0x1;if(_0x185baf['orderstatus']==_0x4a8871(0x326)||_0x185baf['orderstatus']=='canceled')_0x185baf['orderstatus']='none';}),currentCoins[_0x5c74fd(0x340)]((_0x52a9a8,_0x394ab0)=>_0x52a9a8[_0x5c74fd(0x33e)]<_0x394ab0[_0x5c74fd(0x33e)]?0x1:_0x394ab0['delta']<_0x52a9a8[_0x5c74fd(0x33e)]?-0x1:0x0);const _0x5c0a44=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5c0a44['eur'],'usd':_0x5c0a44[_0x5c74fd(0x364)],'portfolio':JSON[_0x5c74fd(0x36d)](currentCoins),'threshold':_0x28f990},proxyEmit(_0x5c74fd(0x287),{'serverversion':serverversion,'balances':lastBalances});if(_0x77c97){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x28f990});else{if(lockOrders==ORDERS[_0x5c74fd(0x354)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x28f990});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4dc40b=getNormalizedPerformance();getStartingBalances(_0x4dc40b),emitPerformance(_0x4dc40b);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xa2e7f3=_0x3da5bc;if(!lastBalances)return;let _0x236586=[],_0x4278fa,_0x120d6f=JSON[_0xa2e7f3(0x252)](lastBalances[_0xa2e7f3(0x2de)]);_0x120d6f['sort']((_0x2cf7a9,_0x463897)=>_0x2cf7a9[_0xa2e7f3(0x383)]>_0x463897[_0xa2e7f3(0x383)]?0x1:_0x463897[_0xa2e7f3(0x383)]>_0x2cf7a9[_0xa2e7f3(0x383)]?-0x1:0x0),_0x120d6f[_0xa2e7f3(0x20f)](_0x54045f=>{const _0x17a0bf=_0xa2e7f3;let _0x21104a={'coin':_0x54045f[_0x17a0bf(0x383)],'number':_0x54045f[_0x17a0bf(0x321)],'price':_0x54045f[_0x17a0bf(0x20b)]};_0x236586['push'](_0x21104a);});const _0x5570e3=await getFiat();_0x4278fa={'date':lastBalances[_0xa2e7f3(0x21d)]['split']('\x20')[0x0],'eur':_0x5570e3[_0xa2e7f3(0x2b0)],'usd':_0x5570e3['usd'],'coins':_0x236586};let _0x3e07e7=dbPerformance[_0xa2e7f3(0x29a)](_0xa2e7f3(0x20d))['find']({'date':_0x4278fa['date']})[_0xa2e7f3(0x306)]();_0x3e07e7?_0x4278fa['date']!=config[_0xa2e7f3(0x29c)]&&dbPerformance[_0xa2e7f3(0x29a)](_0xa2e7f3(0x20d))['find']({'date':_0x4278fa[_0xa2e7f3(0x315)]})[_0xa2e7f3(0x2ff)](_0x4278fa)[_0xa2e7f3(0x1e5)]():dbPerformance[_0xa2e7f3(0x29a)](_0xa2e7f3(0x20d))[_0xa2e7f3(0x2c0)](_0x4278fa)[_0xa2e7f3(0x1e5)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x29dfa2=_0x3da5bc;let _0x231e73=[];if(dbPerformance[_0x29dfa2(0x2d9)](_0x29dfa2(0x20d))[_0x29dfa2(0x306)]()){let _0x59890d=dbPerformance[_0x29dfa2(0x29a)](_0x29dfa2(0x20d))[_0x29dfa2(0x2e4)]()[_0x29dfa2(0x2c6)](_0x20b547=>{const _0x59e08c=_0x29dfa2;if(_0x20b547[_0x59e08c(0x320)][_0x59e08c(0x372)]==0x0)return![];else return!![];})['sortBy'](_0x29dfa2(0x315))[_0x29dfa2(0x306)](),_0xf25099=[...config['liquidity']];_0xf25099[_0x29dfa2(0x340)]((_0x2089e2,_0x3474e6)=>_0x2089e2[_0x29dfa2(0x315)]>_0x3474e6[_0x29dfa2(0x315)]?-0x1:_0x3474e6[_0x29dfa2(0x315)]>_0x2089e2['date']?0x1:0x0);let _0x5789ae=0x1,_0xd970aa=[],_0x2c78f3=0x0;_0x59890d[_0x29dfa2(0x2fa)]()[_0x29dfa2(0x269)]()[_0x29dfa2(0x20f)]((_0x5816b9,_0x854c6)=>{const _0x4a07dd=_0x29dfa2;if(_0xf25099[_0x2c78f3]){if(_0x59890d[_0x59890d[_0x4a07dd(0x372)]-_0x854c6]&&_0xf25099[_0x2c78f3][_0x4a07dd(0x315)]==_0x59890d[_0x59890d[_0x4a07dd(0x372)]-_0x854c6][_0x4a07dd(0x315)]){if(_0x854c6<_0x59890d[_0x4a07dd(0x372)]){let _0x47cd0f=0x0,_0x572e21=0x0;_0x59890d[_0x59890d[_0x4a07dd(0x372)]-_0x854c6]['coins'][_0x4a07dd(0x20f)](_0x59f3a8=>{const _0x36bc67=_0x4a07dd;_0x572e21+=_0x59f3a8[_0x36bc67(0x321)]*_0x59f3a8[_0x36bc67(0x1c2)];}),_0xf25099[_0x2c78f3][_0x4a07dd(0x2eb)][_0x4a07dd(0x20f)](_0x46ba70=>{const _0x4e1d94=_0x4a07dd;_0x47cd0f+=_0x46ba70[_0x4e1d94(0x321)]*_0x46ba70[_0x4e1d94(0x1c2)];}),_0x5789ae*=_0x47cd0f/(_0x572e21-_0x47cd0f)+0x1;}_0x2c78f3++;}}let _0x581f20=0x0;_0x5816b9['coins']['forEach'](_0x3094f4=>{const _0x34da1e=_0x4a07dd;_0x581f20+=_0x3094f4['number']*_0x3094f4[_0x34da1e(0x1c2)];}),_0xd970aa[_0x59890d[_0x4a07dd(0x372)]-_0x854c6-0x1]=_0x581f20*(_0x5789ae-0x1);});let _0x4b6567=[];_0xf25099=[...config[_0x29dfa2(0x282)]]||[];let _0x5811f6=0x0;_0x2c78f3=0x0,_0x59890d[_0x29dfa2(0x20f)]((_0xe148f9,_0x1e3c71)=>{const _0x3eadf9=_0x29dfa2;if(_0xf25099[_0x2c78f3]){const _0x3b387d=fns[_0x3eadf9(0x252)](_0xf25099[_0x2c78f3][_0x3eadf9(0x315)],_0x3eadf9(0x235),new Date()),_0x51372f=fns['parse'](_0xe148f9[_0x3eadf9(0x315)],_0x3eadf9(0x235),new Date());if(fns['isEqual'](_0x3b387d,_0x51372f)){let _0x29db01=0x0;_0xf25099[_0x2c78f3][_0x3eadf9(0x2eb)][_0x3eadf9(0x20f)](_0x440b4b=>{const _0xb3b9a9=_0x3eadf9;!_0x4b6567[_0x440b4b[_0xb3b9a9(0x383)]]?_0x4b6567[_0x440b4b[_0xb3b9a9(0x383)]]=_0x440b4b[_0xb3b9a9(0x321)]:(_0x29db01=_0x4b6567[_0x440b4b[_0xb3b9a9(0x383)]],_0x4b6567[_0x440b4b['coin']]+=_0x440b4b[_0xb3b9a9(0x321)]);const _0x49bee6=_0xe148f9[_0xb3b9a9(0x320)][_0xb3b9a9(0x272)](_0x302385=>_0x302385[_0xb3b9a9(0x383)]==_0x440b4b[_0xb3b9a9(0x383)]);(!_0x49bee6||_0x49bee6[_0xb3b9a9(0x321)]==0x0)&&(_0x5811f6+=(-_0x440b4b[_0xb3b9a9(0x321)]-_0x29db01)*_0x440b4b[_0xb3b9a9(0x1c2)]);}),_0x2c78f3++;}}_0xe148f9[_0x3eadf9(0x320)]['forEach']((_0x2b678c,_0x3a91fe)=>{const _0x4b707b=_0x3eadf9;_0x4b6567[_0x2b678c[_0x4b707b(0x383)]]&&(_0x2b678c[_0x4b707b(0x2b2)]=_0x4b6567[_0x2b678c[_0x4b707b(0x383)]]);}),_0x231e73['push']({'date':_0xe148f9['date'],'eur':_0xe148f9[_0x3eadf9(0x2b0)],'usd':_0xe148f9[_0x3eadf9(0x364)],'offset':_0xd970aa[_0x1e3c71],'netoffset':_0x5811f6,'coins':_0xe148f9[_0x3eadf9(0x320)]});});}return _0x231e73;}function emitPerformance(_0x3775dd){const _0x4ad080=_0x3da5bc;_0x3775dd[_0x4ad080(0x372)]!==0x0?(proxyEmit('performance',_0x3775dd),lastPerformanceEmitted=getDate()):proxyEmit(_0x4ad080(0x2ef),[]);}function getPerf(_0x11cc20,_0x17dff0){const _0x1aec12=_0x3da5bc;let _0x5b63fb=0x0,_0x3041ce=0x0,_0x2b661b=0x0;_0x11cc20['coins'][_0x1aec12(0x20f)](_0x125903=>{const _0x491f07=_0x1aec12;_0x5b63fb+=_0x125903[_0x491f07(0x321)]*_0x125903[_0x491f07(0x1c2)];});_0x17dff0&&(_0x5b63fb+=_0x11cc20[_0x1aec12(0x1cd)]);if(config[_0x1aec12(0x370)]===_0x1aec12(0x220)||config['basecoin']==='ETH'||config[_0x1aec12(0x370)]===_0x1aec12(0x314))_0x3041ce=_0x5b63fb*_0x11cc20[_0x1aec12(0x2b0)],_0x2b661b=_0x5b63fb*_0x11cc20[_0x1aec12(0x364)];else{if(usdBasecoins[_0x1aec12(0x2d1)](config[_0x1aec12(0x370)]))_0x3041ce=_0x5b63fb*_0x11cc20[_0x1aec12(0x2b0)]/_0x11cc20[_0x1aec12(0x364)],_0x2b661b=_0x5b63fb;else config[_0x1aec12(0x370)]===_0x1aec12(0x1eb)&&(_0x3041ce=_0x5b63fb,_0x2b661b=_0x5b63fb*_0x11cc20[_0x1aec12(0x364)]/_0x11cc20[_0x1aec12(0x2b0)]);}return[_0x5b63fb,_0x3041ce,_0x2b661b];}function getKPIs(_0x4d46bb,_0x53f73f=_0x3da5bc(0x1eb)){const _0x447c7d=_0x3da5bc,_0x2a416b=config[_0x447c7d(0x370)],_0x333ac0=lastBalances,_0x4d70a1=currentCoins,_0x5d621f=getNormalizedPerformance(),_0x40490c=_0x4d46bb==='basecoin'?_0x2a416b:_0x4d46bb===_0x447c7d(0x299)||_0x4d46bb==='net-fiat'?_0x53f73f:'Net\x20'+_0x2a416b,_0xcbfb1=_0x4d46bb===_0x447c7d(0x343)?_0x447c7d(0x31c):_0x4d46bb===_0x447c7d(0x1ed)?'Net\x20effect':_0x40490c+_0x447c7d(0x324),_0x5dee19=_0x4d46bb===_0x447c7d(0x343)||_0x4d46bb==='net-fiat'?'Net\x20effect':_0x40490c+_0x447c7d(0x357);let _0x583088=0x0;_0x4d70a1[_0x447c7d(0x20f)](_0x182e33=>{const _0x34e207=_0x447c7d;_0x583088+=_0x182e33[_0x34e207(0x321)]*_0x182e33[_0x34e207(0x20b)];});if(_0x4d46bb===_0x447c7d(0x299)||_0x4d46bb===_0x447c7d(0x1ed)){if(_0x2a416b===_0x447c7d(0x220)||_0x2a416b===_0x447c7d(0x1c1)||_0x2a416b===_0x447c7d(0x314))_0x583088=_0x583088*(_0x53f73f==='EUR'?_0x333ac0[_0x447c7d(0x2b0)]:_0x333ac0['usd']);else{if(usdBasecoins[_0x447c7d(0x2d1)](_0x2a416b))_0x583088=_0x583088*(_0x53f73f===_0x447c7d(0x1eb)?_0x333ac0['eur']/_0x333ac0[_0x447c7d(0x364)]:0x1);else _0x2a416b===_0x447c7d(0x1eb)&&(_0x583088=_0x583088*(_0x53f73f===_0x447c7d(0x1eb)?0x1:_0x333ac0[_0x447c7d(0x364)]/_0x333ac0['eur']));}}let _0x578cad;if(_0x583088!==0x0){if(_0x4d46bb===_0x447c7d(0x370))_0x578cad=(_0x583088/startingBalances[_0x447c7d(0x370)]-0x1)*0x64;else{if(_0x53f73f===_0x447c7d(0x1eb))_0x578cad=(_0x583088/startingBalances[_0x447c7d(0x2b0)]-0x1)*0x64;else _0x578cad=(_0x583088/startingBalances[_0x447c7d(0x364)]-0x1)*0x64;}let _0x33f859=0x0;if(startingBalances[_0x447c7d(0x320)])_0x4d70a1[_0x447c7d(0x20f)](_0x45bc0c=>{const _0x46f608=_0x447c7d;let _0x829720=startingBalances['coins'][_0x46f608(0x272)](_0x427a9d=>_0x427a9d[_0x46f608(0x383)]===_0x45bc0c[_0x46f608(0x383)]);if(_0x829720&&_0x829720[_0x46f608(0x383)]&&_0x45bc0c[_0x46f608(0x321)]!==0x0)_0x33f859+=_0x829720[_0x46f608(0x321)]*_0x45bc0c['last'];});let _0x42f547=0x0;if(_0x5d621f[_0x447c7d(0x372)]!==0x0){let _0x1b0245=_0x5d621f[_0x5d621f[_0x447c7d(0x372)]-0x1];_0x42f547=_0x1b0245['netoffset'];}_0x33f859-=_0x42f547;_0x4d46bb==='net-basecoin'&&(_0x578cad=(_0x583088-_0x33f859)/startingBalances['basecoin']*0x64,_0x583088=_0x583088-_0x33f859);if(_0x4d46bb===_0x447c7d(0x1ed)){let _0x293179=_0x53f73f===_0x447c7d(0x1eb)?startingBalances['eur']:startingBalances[_0x447c7d(0x364)];if(_0x2a416b===_0x447c7d(0x220)||_0x2a416b===_0x447c7d(0x1c1)||_0x2a416b===_0x447c7d(0x314))_0x33f859=_0x53f73f===_0x447c7d(0x1eb)?_0x33f859*_0x333ac0[_0x447c7d(0x2b0)]:_0x33f859*_0x333ac0[_0x447c7d(0x364)];else{if(usdBasecoins['includes'](_0x2a416b))_0x33f859=_0x53f73f===_0x447c7d(0x1eb)?_0x33f859*_0x333ac0['eur']/_0x333ac0[_0x447c7d(0x364)]:_0x33f859;else _0x2a416b===_0x447c7d(0x1eb)&&(_0x33f859=_0x53f73f===_0x447c7d(0x1eb)?_0x33f859:_0x33f859*_0x333ac0['usd']/_0x333ac0[_0x447c7d(0x2b0)]);}_0x578cad=(_0x583088-_0x33f859)/_0x293179*0x64,_0x583088=_0x583088-_0x33f859;}if(_0x578cad){if(_0x578cad<0x64)_0x578cad=_0x578cad[_0x447c7d(0x35f)](0x2);else{if(_0x578cad<0x3e8)_0x578cad=_0x578cad[_0x447c7d(0x35f)](0x1);else _0x578cad=_0x578cad[_0x447c7d(0x35f)](0x0);}}else _0x578cad=Number('0')[_0x447c7d(0x35f)](0x2);if(_0x583088){if(Math['abs'](_0x583088)<0.000001)_0x583088=_0x583088[_0x447c7d(0x35f)](0x2);else{if(Math[_0x447c7d(0x2e2)](_0x583088)<0.1)_0x583088=_0x583088['toFixed'](0x6);else{if(Math[_0x447c7d(0x2e2)](_0x583088)<0x1)_0x583088=_0x583088[_0x447c7d(0x35f)](0x5);else{if(Math[_0x447c7d(0x2e2)](_0x583088)<0xa)_0x583088=_0x583088[_0x447c7d(0x35f)](0x4);else{if(Math[_0x447c7d(0x2e2)](_0x583088)<0x64)_0x583088=_0x583088[_0x447c7d(0x35f)](0x3);else{if(Math[_0x447c7d(0x2e2)](_0x583088)<0x3e8)_0x583088=_0x583088['toFixed'](0x2);else _0x583088=_0x583088[_0x447c7d(0x35f)](0x2);}}}}}}else _0x583088=Number('0')[_0x447c7d(0x35f)](0x2);}else _0x578cad=Number('0')['toFixed'](0x2);return{'value':_0x583088,'change':_0x578cad,'leftTxt':_0xcbfb1,'rightTxt':_0x5dee19};}async function getStartingBalances(_0x938fe3,_0x529f66=!![]){const _0x104587=_0x3da5bc;if(_0x938fe3[_0x104587(0x372)]!==0x0){const [_0x122eea,_0x277109,_0x3c5009]=getPerf(_0x938fe3[0x0],!![]);let _0x5737e4=[];config[_0x104587(0x2de)][_0x104587(0x20f)](_0x2e8aeb=>{const _0x138632=_0x104587;let _0x1521fc=0x0,_0x1b6fdd;config['liquidity'][_0x138632(0x20f)](_0x1823a2=>{const _0x7c9ba5=_0x138632;let _0x5c4ed6=_0x1823a2[_0x7c9ba5(0x2eb)][_0x7c9ba5(0x272)](_0x4e9664=>_0x4e9664[_0x7c9ba5(0x383)]==_0x2e8aeb[_0x7c9ba5(0x383)]);if(_0x5c4ed6){_0x1521fc+=_0x5c4ed6['number'];if(!_0x1b6fdd)_0x1b6fdd=_0x5c4ed6[_0x7c9ba5(0x1c2)];}}),_0x5737e4[_0x138632(0x2c0)]({'coin':_0x2e8aeb[_0x138632(0x383)],'number':_0x1521fc,'initialprice':_0x1b6fdd});});const _0x4362dc={'basecoin':_0x122eea,'eur':_0x277109,'usd':_0x3c5009,'coins':_0x5737e4};if(_0x529f66)proxyEmit('starting-balances',_0x4362dc);startingBalances=_0x4362dc;}}function headlessMode(_0x430c4){const _0x9be19c=_0x3da5bc;let _0x1d1553=_0x430c4[_0x9be19c(0x2de)],_0x5caa56=_0x430c4[_0x9be19c(0x266)],_0x1ae604=[];for(let _0x4bd9f9 of _0x1d1553){if(_0x4bd9f9[_0x9be19c(0x383)]!=config['basecoin']){if(_0x4bd9f9[_0x9be19c(0x33e)]>=_0x5caa56/0x64){if(_0x4bd9f9['valid'])_0x1ae604[_0x9be19c(0x2c0)](_0x4bd9f9);}else{if(_0x4bd9f9[_0x9be19c(0x33e)]<=-_0x5caa56/0x64){if(_0x4bd9f9[_0x9be19c(0x32f)])_0x1ae604[_0x9be19c(0x2c0)](_0x4bd9f9);}}}}_0x1ae604[_0x9be19c(0x372)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x1ae604['forEach'](_0x471f6e=>{const _0xe7e10=_0x9be19c;logger[_0xe7e10(0x2a8)](_0xe7e10(0x35a)+_0x471f6e[_0xe7e10(0x383)]+'\x20'+_0x471f6e[_0xe7e10(0x321)]+'\x20'+_0x471f6e['last']+'\x20'+_0x471f6e[_0xe7e10(0x2b6)]+'%\x20'+_0x471f6e[_0xe7e10(0x28f)]+'%\x20'+(0x64*_0x471f6e[_0xe7e10(0x33e)])['toFixed'](0x2)+_0xe7e10(0x2f4)+_0x5caa56[_0xe7e10(0x35f)](0x2)+'%)');}),placeOrder(_0x1ae604));}function notifyBalance(_0x53de29){const _0x545885=_0x3da5bc;let _0x47e9fb=_0x53de29[_0x545885(0x2de)],_0x41805a=_0x53de29[_0x545885(0x266)],_0x387bbd=[];for(let _0x41b7d8 of _0x47e9fb){if(_0x41b7d8[_0x545885(0x383)]!=config['basecoin']){if(_0x41b7d8[_0x545885(0x33e)]>=_0x41805a/0x64){if(_0x41b7d8['valid'])_0x387bbd[_0x545885(0x2c0)](_0x41b7d8);}else{if(_0x41b7d8[_0x545885(0x33e)]<=-_0x41805a/0x64){if(_0x41b7d8[_0x545885(0x32f)])_0x387bbd[_0x545885(0x2c0)](_0x41b7d8);}}}}if(_0x387bbd[_0x545885(0x372)]>0x0){let _0x3c2dfd=_0x387bbd[_0x545885(0x21c)](_0x34f259=>_0x34f259[_0x545885(0x383)]);_0x3c2dfd['sort']();let _0x128987=_0x3c2dfd['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x545885(0x2b9),_0x545885(0x317));lastCoinsToBalance=_0x128987;}}function symbolToCoin(_0x5c27fc){const _0xefb0c7=_0x3da5bc;let _0x3c174b;if(_0x5c27fc[_0xefb0c7(0x2d1)]('/'+config['basecoin']))_0x3c174b=_0x5c27fc[_0xefb0c7(0x1ee)]('/'+config[_0xefb0c7(0x370)],'');if(_0x5c27fc[_0xefb0c7(0x2d1)](config[_0xefb0c7(0x370)]+'/'))_0x3c174b=_0x5c27fc[_0xefb0c7(0x1ee)](config[_0xefb0c7(0x370)]+'/','');return _0x3c174b;}async function unlockOrders(){const _0x4086c5=_0x3da5bc;if(allOrdersPlaced&&lockOrders==ORDERS[_0x4086c5(0x30a)]){logger['debug'](_0x4086c5(0x1e7)),lockOrders=ORDERS[_0x4086c5(0x273)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x60ec2b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x60ec2b,setBlockTransactionDetection(![]),validateOrdersState=_0x4086c5(0x2b2),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x4086c5(0x2a8)](_0x4086c5(0x2e0));}}async function validateOrders(_0x32f16d){const _0x4814dc=_0x3da5bc;if(_0x32f16d)validateOrdersState=_0x32f16d;logger[_0x4814dc(0x2a8)](_0x4814dc(0x361)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x4814dc(0x1bc):lockOrders==0x2?_0x4814dc(0x1cf):_0x4814dc(0x338)));let _0x3df6b3=[],_0x21de3e=config[_0x4814dc(0x327)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4814dc(0x30a)])return;logger[_0x4814dc(0x2a8)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x4814dc(0x20f)](_0xf84cdf=>{const _0x2a92eb=_0x4814dc;let _0x64c812=![];_0xf84cdf['filled']>0x0&&(_0x64c812=!![]),_0x3df6b3[_0x2a92eb(0x2c0)](_0x64c812),_0x64c812&&config[_0x2a92eb(0x327)]!=_0x2a92eb(0x1ff)&&logHistory(_0x2a92eb(0x2c5),_0x2a92eb(0x2dc)+_0xf84cdf['symbol']+'\x20'+_0xf84cdf[_0x2a92eb(0x313)]+'\x20#'+formatResult(_0xf84cdf[_0x2a92eb(0x326)],0x8)+'\x20@'+formatResult(_0xf84cdf[_0x2a92eb(0x1c2)],0x8));}),_0x3df6b3[_0x4814dc(0x20f)]((_0x4c5b34,_0x4d51c6)=>{if(_0x4c5b34)lastOrders['splice'](_0x4d51c6,0x1);}),persistOpenOrders(lastOrders);const _0x1540c8=coolingDown?_0x4814dc(0x2dd):_0x4814dc(0x22e);if(validateOrdersState==_0x4814dc(0x2b2)){validateOrdersState='ongoing';if(_0x3df6b3[_0x4814dc(0x2d1)](![])){if(config[_0x4814dc(0x327)]==_0x4814dc(0x1ff)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x4814dc(0x1fe)){if(_0x3df6b3[_0x4814dc(0x2d1)](![])){}else{if(allOrdersPlaced){if(config[_0x4814dc(0x327)]==_0x4814dc(0x1ff)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x3df6b3['includes'](![])&&(config[_0x4814dc(0x327)]=='market'?logHistory(_0x4814dc(0x301),_0x4814dc(0x2f2)+Math[_0x4814dc(0x1e8)](_0x21de3e*validateOrderInterval/0xea60)+_0x4814dc(0x325)+_0x1540c8):(await cancelOrders(),logHistory(_0x4814dc(0x301),_0x4814dc(0x255)+Math[_0x4814dc(0x1e8)](_0x21de3e*validateOrderInterval/0xea60)+_0x4814dc(0x325)+_0x1540c8))),await unlockOrders();else{if(validateOrdersState==_0x4814dc(0x2d0)){if(config[_0x4814dc(0x327)]!=_0x4814dc(0x1ff))logHistory('success',_0x4814dc(0x1d1)+_0x1540c8);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x144d0b=>{const _0xdef187=_0x1837;try{const _0x3a540b=await exchange[_0xdef187(0x1fc)](_0x144d0b[_0xdef187(0x34c)],_0x144d0b['symbol']);}catch(_0xb72452){if(_0xb72452[_0xdef187(0x2a0)]()[_0xdef187(0x2d1)]('OrderNotFound')){}else await handleError(_0xb72452,_0xdef187(0x375));}});}async function initCoinResults(_0x484de8){const _0x284411=_0x3da5bc;_0x484de8?logger[_0x284411(0x2a8)](_0x284411(0x259)+_0x484de8):logger[_0x284411(0x2a8)](_0x284411(0x30e)),config['portfolio'][_0x284411(0x20f)](_0xe451d7=>{const _0x574315=_0x284411;if(!_0xe451d7['excluded']&&_0xe451d7[_0x574315(0x383)]!=config[_0x574315(0x370)]){const _0x42814c=currentCoins[_0x574315(0x272)](_0x1fcff0=>_0x1fcff0['coin']==_0xe451d7['coin']),_0x4c056e=gTicker[noslash(_0xe451d7[_0x574315(0x2f5)])];let _0x593b76=_0x42814c?_0x42814c['number']:null,_0x390317=_0xe451d7['reverse']?0x1/_0x4c056e:_0x4c056e,_0x593206;config['liquidity'][_0x574315(0x20f)](_0x2d94d8=>{const _0x4e4d37=_0x574315;!_0x593206&&(_0x593206=_0x2d94d8[_0x4e4d37(0x2eb)][_0x4e4d37(0x272)](_0x38efd2=>_0x38efd2[_0x4e4d37(0x383)]==_0xe451d7[_0x4e4d37(0x383)]),_0x593206&&(_0x593b76=_0x593206[_0x4e4d37(0x321)],_0x390317=_0x593206[_0x4e4d37(0x1c2)]));});let _0x2515a3=dbCoinResults['get'](_0x574315(0x320))['find']({'coin':_0xe451d7[_0x574315(0x383)]})['value']();if(!_0x2515a3){const _0x212654={'coin':_0xe451d7[_0x574315(0x383)],'number':_0x593b76,'breakeven':_0x390317,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x574315(0x29a)](_0x574315(0x320))[_0x574315(0x2c0)](_0x212654)['write']();}else{if(_0x484de8&&_0xe451d7[_0x574315(0x383)]==_0x484de8){const _0x4136a1={'coin':_0xe451d7[_0x574315(0x383)],'number':_0x593b76,'breakeven':_0x390317,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x574315(0x29a)](_0x574315(0x320))[_0x574315(0x272)]({'coin':_0xe451d7[_0x574315(0x383)]})[_0x574315(0x2ff)](_0x4136a1)[_0x574315(0x1e5)]();}}}});}async function updateCoinResults(_0x97dbf2,_0x11bc0a=![]){const _0x4b69a0=_0x3da5bc;let _0x2f4e58,_0x4ee384,_0x2d944e,_0x113329,_0x1395c2,_0x3e36df,_0x18e4e7=dbCoinResults[_0x4b69a0(0x29a)](_0x4b69a0(0x320))[_0x4b69a0(0x272)]({'coin':_0x97dbf2['coin']})[_0x4b69a0(0x306)](),_0x4afd9b=![];_0x18e4e7&&Object['entries'](_0x18e4e7)[_0x4b69a0(0x20f)](([_0x27c8cc,_0x56096c])=>{if(_0x56096c==null)_0x4afd9b=!![];});(!_0x18e4e7||_0x4afd9b)&&(await initCoinResults(_0x97dbf2[_0x4b69a0(0x383)]),_0x18e4e7=dbCoinResults[_0x4b69a0(0x29a)](_0x4b69a0(0x320))[_0x4b69a0(0x272)]({'coin':_0x97dbf2['coin']})[_0x4b69a0(0x306)]());_0x97dbf2[_0x4b69a0(0x269)]&&(_0x3e36df={'filled':_0x97dbf2[_0x4b69a0(0x326)]*_0x97dbf2[_0x4b69a0(0x1c2)],'amount':_0x97dbf2[_0x4b69a0(0x326)]*_0x97dbf2[_0x4b69a0(0x1c2)],'side':_0x97dbf2[_0x4b69a0(0x313)]==_0x4b69a0(0x1f3)?_0x4b69a0(0x27e):_0x4b69a0(0x1f3),'price':0x1/_0x97dbf2[_0x4b69a0(0x1c2)]},_0x97dbf2={..._0x97dbf2,..._0x3e36df});_0x11bc0a?_0x4ee384=_0x97dbf2[_0x4b69a0(0x313)]==_0x4b69a0(0x27e)?_0x18e4e7[_0x4b69a0(0x321)]+_0x97dbf2['filled']:_0x18e4e7[_0x4b69a0(0x321)]-_0x97dbf2[_0x4b69a0(0x326)]:_0x4ee384=await getCoinNumber(_0x97dbf2[_0x4b69a0(0x383)]);if(_0x97dbf2[_0x4b69a0(0x229)]&&_0x97dbf2['fee']['currency']==config[_0x4b69a0(0x370)])_0x2f4e58=Number(_0x97dbf2[_0x4b69a0(0x229)][_0x4b69a0(0x1c4)]);else{if(_0x97dbf2['fee']&&_0x97dbf2['fee'][_0x4b69a0(0x1c3)]==_0x4b69a0(0x21e)&&!_0x11bc0a&&config['basecoin']!=_0x4b69a0(0x314))_0x2f4e58=Number(_0x97dbf2['fee'][_0x4b69a0(0x1c4)])*gTicker['BNB'+config[_0x4b69a0(0x370)]];else _0x2f4e58=defaultFee*_0x97dbf2['filled']*_0x97dbf2[_0x4b69a0(0x1c2)];}_0x97dbf2[_0x4b69a0(0x313)]==_0x4b69a0(0x27e)?(_0x2d944e=_0x4ee384!=0x0?(_0x18e4e7[_0x4b69a0(0x358)]*_0x18e4e7[_0x4b69a0(0x321)]+_0x97dbf2[_0x4b69a0(0x1c2)]*(_0x4ee384-_0x18e4e7['number'])+_0x2f4e58)/_0x4ee384:0x0,_0x113329=_0x18e4e7[_0x4b69a0(0x1ec)]):(_0x2d944e=_0x4ee384!=0x0?(_0x18e4e7['breakeven']*_0x18e4e7['number']-_0x97dbf2[_0x4b69a0(0x1c2)]*(_0x18e4e7[_0x4b69a0(0x321)]-_0x4ee384)+_0x2f4e58)/_0x4ee384:0x0,_0x113329=_0x18e4e7[_0x4b69a0(0x1ec)]+(_0x97dbf2['price']-_0x18e4e7['breakeven'])*_0x97dbf2[_0x4b69a0(0x326)]);_0x1395c2=(_0x97dbf2[_0x4b69a0(0x1c2)]-_0x2d944e-_0x2f4e58/_0x97dbf2[_0x4b69a0(0x326)])*_0x4ee384;let _0x13aed3={'coin':_0x97dbf2[_0x4b69a0(0x383)],'number':_0x4ee384,'breakeven':formatResult(_0x2d944e,0x8),'realized':formatResult(_0x113329,0x8),'unrealized':formatResult(_0x1395c2,0x8),'fees':formatResult(_0x18e4e7[_0x4b69a0(0x2d4)]+_0x2f4e58,0x8),'sells':_0x97dbf2[_0x4b69a0(0x313)]==_0x4b69a0(0x1f3)?_0x18e4e7[_0x4b69a0(0x368)]+0x1:_0x18e4e7['sells'],'buys':_0x97dbf2[_0x4b69a0(0x313)]==_0x4b69a0(0x27e)?_0x18e4e7[_0x4b69a0(0x35b)]+0x1:_0x18e4e7[_0x4b69a0(0x35b)]};dbCoinResults['get']('coins')[_0x4b69a0(0x272)]({'coin':_0x97dbf2['coin']})[_0x4b69a0(0x2ff)](_0x13aed3)[_0x4b69a0(0x1e5)]();if(!_0x11bc0a){if(_0x97dbf2[_0x4b69a0(0x229)]&&_0x97dbf2['fee'][_0x4b69a0(0x1c3)]==_0x4b69a0(0x21e)){const _0x382c5d=currentCoins[_0x4b69a0(0x272)](_0x3ff918=>_0x3ff918['coin']==_0x4b69a0(0x21e));if(_0x382c5d){let _0x440b75=dbCoinResults[_0x4b69a0(0x29a)](_0x4b69a0(0x320))[_0x4b69a0(0x272)]({'coin':_0x4b69a0(0x21e)})['value']();_0x13aed3={..._0x440b75,'number':_0x382c5d[_0x4b69a0(0x321)]},dbCoinResults[_0x4b69a0(0x29a)](_0x4b69a0(0x320))['find']({'coin':_0x4b69a0(0x21e)})['assign'](_0x13aed3)['write']();}}}}async function placeOrder(_0xb693a2){const _0x46c02d=_0x3da5bc,_0x6c1614=config[_0x46c02d(0x327)]==_0x46c02d(0x1ff)?_0x46c02d(0x1ff):_0x46c02d(0x23a);if(lockOrders==ORDERS[_0x46c02d(0x354)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x46c02d(0x2b2);let _0x20dc51=![];lastOrders=[];for(const _0x945b61 of _0xb693a2){let _0x3e7341,_0x155afd,_0x45db36,_0x281118,_0x44b006,_0x5816b0=_0x945b61[_0x46c02d(0x2f5)];try{const _0x4067fa=await exchange[_0x46c02d(0x267)](_0x5816b0);_0x3e7341=_0x945b61[_0x46c02d(0x269)]?0x1/_0x945b61[_0x46c02d(0x20b)]:_0x945b61[_0x46c02d(0x20b)],_0x155afd=_0x4067fa['bid'],_0x45db36=_0x4067fa['ask'];_0x945b61[_0x46c02d(0x269)]?(_0x281118=_0x945b61[_0x46c02d(0x313)]=='buy'?_0x46c02d(0x1f3):_0x46c02d(0x27e),_0x44b006=Math['abs'](_0x945b61[_0x46c02d(0x251)])/_0x3e7341):(_0x281118=_0x945b61[_0x46c02d(0x313)],_0x44b006=Math[_0x46c02d(0x2e2)](_0x945b61[_0x46c02d(0x251)]));_0x6c1614==_0x46c02d(0x23a)&&(config[_0x46c02d(0x327)]==_0x46c02d(0x2ed)&&(_0x3e7341=_0x281118==_0x46c02d(0x27e)?_0x155afd:_0x45db36),config['ordertype']=='limit-low'&&(_0x3e7341=_0x281118=='buy'?_0x45db36:_0x155afd));_0x44b006=formatResult(_0x44b006,0x8),_0x3e7341=formatResult(_0x3e7341,0x8);const _0x283111=_0x281118==_0x46c02d(0x1f3)?config[_0x46c02d(0x28d)]?String[_0x46c02d(0x32d)]('0x'+config[_0x46c02d(0x28d)])+'\x20':'':config['emojibuy']?String[_0x46c02d(0x32d)]('0x'+config[_0x46c02d(0x32c)])+'\x20':'',_0x47b3ce=_0x6c1614==_0x46c02d(0x1ff)?_0x46c02d(0x1bb):config[_0x46c02d(0x327)]==_0x46c02d(0x2ed)?_0x46c02d(0x2c1):'Limit\x20(low-margin)',_0x10cc10=(Math[_0x46c02d(0x336)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x10cc10,'symbol':_0x5816b0,'coin':_0x945b61[_0x46c02d(0x383)],'amount':_0x44b006,'price':_0x3e7341,'side':_0x281118,'reverse':_0x945b61[_0x46c02d(0x269)],'filled':0x0});if(_0x6c1614=='market')logHistory(_0x46c02d(0x2c5),''+_0x283111+_0x47b3ce+'\x20order:\x20'+_0x5816b0+'\x20'+_0x281118+'\x20#'+formatResult(_0x44b006,0x8)+'\x20@'+formatResult(_0x3e7341,0x8));else logHistory(_0x46c02d(0x2c5),''+_0x283111+_0x47b3ce+_0x46c02d(0x260)+_0x5816b0+'\x20'+_0x281118+'\x20#'+formatResult(_0x44b006,0x8)+'\x20@'+formatResult(_0x3e7341,0x8));let _0x461711;_0x6c1614==_0x46c02d(0x1ff)?_0x281118==_0x46c02d(0x27e)&&[_0x46c02d(0x2f7),_0x46c02d(0x2f0),_0x46c02d(0x23d),_0x46c02d(0x1c5),_0x46c02d(0x247)]['includes'](config['exchange'])?_0x461711=await exchange[_0x46c02d(0x35d)](_0x5816b0,_0x6c1614,_0x281118,_0x44b006,_0x3e7341):_0x461711=await exchange[_0x46c02d(0x35d)](_0x5816b0,_0x6c1614,_0x281118,_0x44b006,undefined):_0x461711=await exchange[_0x46c02d(0x35d)](_0x5816b0,_0x6c1614,_0x281118,_0x44b006,_0x3e7341);logger[_0x46c02d(0x2a8)](_0x46c02d(0x249)+_0x461711['id']+_0x46c02d(0x2ae)+_0x10cc10);const _0x334fbf=lastOrders['length']-0x1;if(_0x334fbf>=0x0&&lastOrders[_0x334fbf][_0x46c02d(0x278)]==_0x10cc10){lastOrders[_0x334fbf]['orderId']=_0x461711['id'];if(_0x461711[_0x46c02d(0x1e3)])lastOrders[_0x334fbf][_0x46c02d(0x1e3)]=_0x461711[_0x46c02d(0x1e3)];if(_0x461711[_0x46c02d(0x1c2)])lastOrders[_0x334fbf][_0x46c02d(0x1c2)]=_0x461711['price'];lastOrders[_0x334fbf][_0x46c02d(0x229)]=_0x461711[_0x46c02d(0x229)];}if(config['cooldown']!=0x0){let _0x561571=null;if(cooldownTracker[_0x46c02d(0x372)]==config['cooldown']-0x1)_0x561571=cooldownTracker[_0x46c02d(0x1bd)]();const _0x357265=getTimeStamp();cooldownTracker[_0x46c02d(0x2c0)](_0x357265);if(_0x561571){const _0x3cfc91=fns[_0x46c02d(0x1d5)](new Date(_0x357265),new Date(_0x561571));if(_0x3cfc91<cooldownInterval){logHistory(_0x46c02d(0x21b),_0x46c02d(0x21a)+config[_0x46c02d(0x2fe)]+_0x46c02d(0x27c)+cooldownInterval/0x3c+_0x46c02d(0x28b)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x2cfd1b){if(_0x2cfd1b[_0x46c02d(0x2a0)]()['includes'](_0x46c02d(0x33f)))lastOrders=lastOrders[_0x46c02d(0x2c6)](_0x4f1781=>_0x4f1781[_0x46c02d(0x2f5)]!=_0x5816b0),logHistory(_0x46c02d(0x21b),_0x46c02d(0x34e)+_0x5816b0),_0x20dc51=!![];else{if(_0x2cfd1b['toString']()[_0x46c02d(0x2d1)](_0x46c02d(0x200)))lastOrders=lastOrders[_0x46c02d(0x2c6)](_0x22aabe=>_0x22aabe[_0x46c02d(0x2f5)]!=_0x5816b0),logHistory('error',_0x46c02d(0x27f)+_0x5816b0),_0x20dc51=!![];else{if(_0x2cfd1b[_0x46c02d(0x2a0)]()['includes'](_0x46c02d(0x1f7)))lastOrders=lastOrders[_0x46c02d(0x2c6)](_0x39d408=>_0x39d408[_0x46c02d(0x2f5)]!=_0x5816b0),logHistory('error','Order\x20is\x20invalid:\x20'+_0x5816b0),logger[_0x46c02d(0x2a8)](_0x2cfd1b),_0x20dc51=!![];else _0x2cfd1b[_0x46c02d(0x2a0)]()['includes'](_0x46c02d(0x238))?(lastOrders=lastOrders['filter'](_0x3262cd=>_0x3262cd['symbol']!=_0x5816b0),logHistory('error',_0x46c02d(0x34e)+_0x5816b0),_0x20dc51=!![]):(lastOrders=lastOrders[_0x46c02d(0x2c6)](_0x373461=>_0x373461[_0x46c02d(0x2f5)]!=_0x5816b0),await handleError(_0x2cfd1b,_0x46c02d(0x288),_0x5816b0));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x46c02d(0x372)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5c3488=config[_0x46c02d(0x327)]==_0x46c02d(0x1ff)?validateOrderTimeout*0x3c*0x3e8:config[_0x46c02d(0x2b1)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1307ce=_0x46c02d;validateOrders(_0x1307ce(0x25b));},_0x5c3488);}else unlockOrders();_0x20dc51&&config[_0x46c02d(0x369)]&&(logHistory(_0x46c02d(0x21b),_0x46c02d(0x233)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x46c02d(0x236)));}else{if(coolingDown)!config[_0x46c02d(0x369)]&&logHistory('error',_0x46c02d(0x295));else lockOrders!=ORDERS[_0x46c02d(0x354)]&&(!config[_0x46c02d(0x369)]&&(config[_0x46c02d(0x327)]==_0x46c02d(0x1ff)?logHistory(_0x46c02d(0x21b),_0x46c02d(0x36a)):logHistory(_0x46c02d(0x21b),_0x46c02d(0x1ba))));}}function persistOpenOrders(_0x53a17f){const _0x11ed12=_0x3da5bc,_0x3e4d3d={...config,'openOrders':_0x53a17f};let _0x421d46=dbConfig[_0x11ed12(0x29a)]('bot')[_0x11ed12(0x272)]({'botID':botID})[_0x11ed12(0x306)]();_0x421d46&&dbConfig[_0x11ed12(0x29a)](_0x11ed12(0x311))[_0x11ed12(0x272)]({'botID':botID})[_0x11ed12(0x2ff)](_0x3e4d3d)[_0x11ed12(0x1e5)]();}function restoreOrders(){const _0x760507=_0x3da5bc;let _0x719717;config['openOrders']&&allOpenOrders['forEach'](_0x25006b=>{const _0x4b6d14=_0x1837,_0x35f076=config[_0x4b6d14(0x28a)][_0x4b6d14(0x272)](_0x1de9d4=>_0x1de9d4[_0x4b6d14(0x34c)]==_0x25006b['id']);_0x35f076&&(lastOrders[_0x4b6d14(0x2c0)](_0x35f076),_0x719717=_0x25006b[_0x4b6d14(0x33b)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x760507(0x1fe),allOrdersPlaced=!![];const _0x12a790=new Date()[_0x760507(0x270)](),_0x49fe11=config[_0x760507(0x327)]==_0x760507(0x1ff)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x719717+_0x49fe11>_0x12a790){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x4ebd90=_0x760507;validateOrders(_0x4ebd90(0x25b));},_0x719717+_0x49fe11-_0x12a790);}else validateOrders(_0x760507(0x25b));}}async function sendMetricsTelegram(){const _0x25f429=_0x3da5bc;if(!coinsLoaded){process[_0x25f429(0x256)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x15a48c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1d3fec='';if(config[_0x25f429(0x212)])_0x1d3fec=_0x25f429(0x291)+config['botname']+_0x25f429(0x37d);else _0x1d3fec=_0x25f429(0x2da)+botID+_0x25f429(0x37d);const _0x22c62d=getKPIs(_0x25f429(0x370)),_0x4fda05=getKPIs(_0x25f429(0x299),config[_0x25f429(0x299)]),_0x5014c1=getKPIs(_0x25f429(0x343)),_0x48e55d=getKPIs(_0x25f429(0x1ed),config[_0x25f429(0x299)]);_0x1d3fec+=_0x25f429(0x25c),_0x1d3fec+=_0x22c62d[_0x25f429(0x366)]+'\x20:\x20'+_0x22c62d['value']+'\x0a',_0x1d3fec+=_0x22c62d['rightTxt']+':\x20'+_0x22c62d[_0x25f429(0x279)]+'%\x0a',_0x1d3fec+=_0x4fda05[_0x25f429(0x366)]+_0x25f429(0x2f9)+_0x4fda05['value']+'\x0a',_0x1d3fec+=_0x4fda05[_0x25f429(0x307)]+':\x20'+_0x4fda05['change']+'%\x0a',_0x1d3fec+=_0x5014c1[_0x25f429(0x366)]+':\x20'+_0x5014c1[_0x25f429(0x306)]+'\x20('+config['basecoin']+')\x0a',_0x1d3fec+=_0x5014c1[_0x25f429(0x307)]+':\x20'+_0x5014c1[_0x25f429(0x279)]+_0x25f429(0x2f4)+config['basecoin']+')\x0a',_0x1d3fec+=_0x48e55d['leftTxt']+':\x20'+_0x48e55d[_0x25f429(0x306)]+'\x20('+config[_0x25f429(0x299)]+')\x0a',_0x1d3fec+=_0x48e55d[_0x25f429(0x307)]+':\x20'+_0x48e55d['change']+_0x25f429(0x2f4)+config[_0x25f429(0x299)]+')\x0a',_0x1d3fec+=_0x25f429(0x2ea),process[_0x25f429(0x256)]({'telegrammsg':_0x1d3fec},_0xb9935b=>{});}async function sendPortfolioTelegram(){const _0x45f3f9=_0x3da5bc;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x45f3f9(0x256)]({'telegrammsg':_0x45f3f9(0x27d)},_0x372af1=>{});return;}let _0x369f14='';if(config['showname'])_0x369f14=_0x45f3f9(0x291)+config['botname']+_0x45f3f9(0x2e3);else _0x369f14=_0x45f3f9(0x2da)+botID+_0x45f3f9(0x2e3);_0x369f14+='<pre>',_0x369f14+=_0x45f3f9(0x26a),_0x369f14+=_0x45f3f9(0x223),_0x369f14+='-------------------------------\x0a',currentCoins['forEach'](_0x2e1ee4=>{const _0x548002=_0x45f3f9;_0x369f14+=_0x2e1ee4[_0x548002(0x383)][_0x548002(0x1cc)](0x7)+'|\x20'+formatPad(_0x2e1ee4['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2e1ee4['target'],0x2,0x6)+'|\x20'+formatPad(_0x2e1ee4[_0x548002(0x33e)]*0x64,0x2,0x6)+'\x0a';}),_0x369f14+='</pre>',process[_0x45f3f9(0x256)]({'telegrammsg':_0x369f14},_0x191461=>{});}function formatPad(_0x489a23,_0x144d9b,_0x1b8368){const _0x4a034b=_0x3da5bc,_0x4d21c8=formatResultString(_0x489a23,_0x144d9b);return _0x4d21c8?_0x4d21c8[_0x4a034b(0x356)](_0x1b8368):''[_0x4a034b(0x356)](_0x1b8368);}function logHistory(_0x367b2c,_0x4acbca,_0x1657a6=''){const _0x45950e=_0x3da5bc;logger[_0x45950e(0x240)](''+_0x4acbca);let _0x42b836={'time':getTimeStamp(),'type':_0x367b2c,'event':_0x4acbca};dbLogs[_0x45950e(0x29a)](_0x45950e(0x332))[_0x45950e(0x2c0)](_0x42b836)['write']();if(_0x1657a6=='')_0x1657a6=_0x4acbca;proxyEmit(_0x45950e(0x376),{'log':_0x42b836,'summary':_0x1657a6}),process[_0x45950e(0x256)]({'telegram':{..._0x42b836,'botname':config[_0x45950e(0x1e9)],'showname':config['showname']}},_0x22f753=>{});}function emitHistory(_0x3ed082={}){const _0x203bbb=_0x3da5bc;Object['keys'](_0x3ed082)['length']==0x0&&(_0x3ed082={'type':['order','event'],'event':'','page':0x1});if(_0x3ed082[_0x203bbb(0x29b)]['includes'](_0x203bbb(0x376)))_0x3ed082[_0x203bbb(0x29b)]['splice'](_0x3ed082[_0x203bbb(0x29b)][_0x203bbb(0x214)](_0x203bbb(0x376)),0x1,_0x203bbb(0x21b),_0x203bbb(0x2b9),'success');if(dbLogs['has'](_0x203bbb(0x332))[_0x203bbb(0x306)]()){let _0xa9116c=dbLogs[_0x203bbb(0x29a)](_0x203bbb(0x332))['filter'](_0x400368=>{const _0x27265b=_0x203bbb;if(_0x3ed082[_0x27265b(0x29b)][_0x27265b(0x372)]==0x0)return![];else return _0x3ed082[_0x27265b(0x29b)][_0x27265b(0x2d1)](_0x400368[_0x27265b(0x29b)]);})[_0x203bbb(0x2c6)](_0x5d8179=>{const _0x214012=_0x203bbb;if(_0x3ed082[_0x214012(0x376)]=='')return!![];else return _0x5d8179[_0x214012(0x376)][_0x214012(0x215)]()[_0x214012(0x2d1)](_0x3ed082[_0x214012(0x376)][_0x214012(0x215)]());})[_0x203bbb(0x2c2)](_0x203bbb(0x21d)),_0x491e34=_0xa9116c[_0x203bbb(0x306)]()[_0x203bbb(0x372)];_0xa9116c=_0xa9116c['reverse']()[_0x203bbb(0x2fa)]((_0x3ed082['page']-0x1)*logPageSize,_0x3ed082[_0x203bbb(0x382)]*logPageSize-0x1)[_0x203bbb(0x269)]()[_0x203bbb(0x306)](),proxyEmit(_0x203bbb(0x1f6),{'logs':_0xa9116c,'total':_0x491e34});}else proxyEmit(_0x203bbb(0x1f6),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3d268c){const _0x331e4a=_0x3da5bc;if(dbLogs[_0x331e4a(0x2d9)](_0x331e4a(0x332))[_0x331e4a(0x306)]()){const _0x5600cf=dbLogs[_0x331e4a(0x29a)](_0x331e4a(0x332))[_0x331e4a(0x2c2)](_0x331e4a(0x21d))[_0x331e4a(0x2c6)](_0x192a7d=>{const _0x581f66=_0x331e4a;return _0x192a7d[_0x581f66(0x29b)]==_0x581f66(0x2c5);})[_0x331e4a(0x306)]();dbLogs['get'](_0x331e4a(0x332))[_0x331e4a(0x2b8)]()['write'](),dbLogs[_0x331e4a(0x29a)](_0x331e4a(0x332))[_0x331e4a(0x2ff)](_0x5600cf)['write'](),emitHistory(_0x3d268c);}}async function pauseBot(_0x1015c4=pauseBotIntervalShort,_0x3fb383,_0x140f56,_0x2e8e6f=![]){const _0x5566df=_0x3da5bc,_0x43eccc=new Date()[_0x5566df(0x270)]();if(!lastErrorShown||_0x43eccc-lastErrorShown>=_0x1015c4){lastErrorShown=_0x43eccc;if(!lastBotPause)lastBotPause=_0x43eccc,consecutivePauses=0x1;else{if(_0x43eccc-lastBotPause-_0x1015c4<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x2e8e6f){logHistory(_0x5566df(0x21b),_0x3fb383+_0x5566df(0x218)),await killBot();return;}else logHistory(_0x5566df(0x21b),_0x3fb383+pauseBotMsg),_0x1015c4=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x43eccc;}_0x140f56?logger[_0x5566df(0x2a8)]('('+consecutivePauses+')\x20'+_0x3fb383+'\x20>\x20details:',_0x140f56):logger[_0x5566df(0x2a8)]('('+consecutivePauses+')\x20'+_0x3fb383);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1015c4),botPaused=![],_0x1015c4==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x45991f=_0x3da5bc;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x45991f(0x1c6)},_0x26f2a2=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x297946,_0x164d1f){const _0x18328f=_0x3da5bc;if(botPaused)return;const _0x21cf12=config['exchange']||_0x18328f(0x323);if(_0x164d1f)logger[_0x18328f(0x2a8)]('Exception\x20thrown\x20in\x20'+_0x164d1f);const _0x5ea63f=()=>{const _0x9400a5=_0x18328f;loading[_0x9400a5(0x21b)]=!![],emitLoadingProgress();};if(_0x297946[_0x18328f(0x2a0)]()[_0x18328f(0x2d1)](_0x18328f(0x1c7)))logHistory(_0x18328f(0x21b),_0x21cf12+_0x18328f(0x312)),_0x5ea63f();else{if(_0x297946[_0x18328f(0x2a0)]()['includes'](_0x18328f(0x1c0)))logHistory(_0x18328f(0x21b),_0x21cf12+_0x18328f(0x274)),_0x5ea63f();else _0x297946['toString']()[_0x18328f(0x2d1)](_0x18328f(0x2f8))?(logHistory('error',_0x21cf12+_0x18328f(0x275)),logHistory(_0x18328f(0x21b),_0x18328f(0x2bc)),_0x5ea63f()):await handleError(_0x297946,null);}}async function handleError(_0x37b08e,_0x51dab5,_0x43d5a0=''){const _0x2e79e7=_0x3da5bc;if(botPaused)return;let _0x134551;const _0x21671a=config[_0x2e79e7(0x2a3)]||_0x2e79e7(0x323);if(_0x51dab5)logger[_0x2e79e7(0x2a8)](_0x2e79e7(0x281)+_0x51dab5);if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)](_0x2e79e7(0x28e)))_0x134551=_0x21671a+_0x2e79e7(0x2bf),await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)]('RateLimitExceeded'))_0x134551=_0x21671a+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e['toString']()['includes']('ExchangeNotAvailable')||_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)](_0x2e79e7(0x202)))_0x134551=_0x21671a+_0x2e79e7(0x333),await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()['includes'](_0x2e79e7(0x374)))_0x134551=_0x21671a+_0x2e79e7(0x22f),await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)](_0x2e79e7(0x300)))_0x134551=_0x21671a+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x215)]()['includes'](_0x2e79e7(0x33b))||_0x37b08e[_0x2e79e7(0x2a0)]()['toLowerCase']()[_0x2e79e7(0x2d1)]('request-time'))_0x134551=_0x2e79e7(0x225),await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()['includes'](_0x2e79e7(0x248)))_0x134551=_0x21671a+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e instanceof ccxt[_0x2e79e7(0x2a6)])_0x134551=_0x21671a+_0x2e79e7(0x37c)+_0x37b08e['toString'](),logger[_0x2e79e7(0x2a8)]('Network\x20error\x20details:',_0x37b08e),await pauseBot(undefined,_0x134551,_0x37b08e);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)]('API-key\x20format\x20invalid'))logHistory(_0x2e79e7(0x21b),_0x21671a+_0x2e79e7(0x289)),logHistory('error',_0x2e79e7(0x36c)),await killBot();else{if(_0x37b08e[_0x2e79e7(0x2a0)]()['includes'](_0x2e79e7(0x1c0)))logHistory(_0x2e79e7(0x21b),_0x21671a+_0x2e79e7(0x303)),logHistory(_0x2e79e7(0x21b),_0x2e79e7(0x36c)),await killBot();else{if(_0x37b08e['toString']()[_0x2e79e7(0x2d1)](_0x2e79e7(0x2f8))&&_0x37b08e[_0x2e79e7(0x2a0)]()['includes'](_0x2e79e7(0x205)))_0x134551=_0x21671a+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x134551,_0x37b08e,!![]);else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)](_0x2e79e7(0x2f8)))config['apiPassword']?_0x134551=_0x21671a+_0x2e79e7(0x245):_0x134551=_0x21671a+_0x2e79e7(0x254),logHistory(_0x2e79e7(0x21b),_0x134551),logHistory(_0x2e79e7(0x21b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x37b08e[_0x2e79e7(0x2a0)]()[_0x2e79e7(0x2d1)](_0x2e79e7(0x341)))logHistory(_0x2e79e7(0x21b),_0x21671a+_0x2e79e7(0x24a)),logHistory(_0x2e79e7(0x21b),_0x2e79e7(0x36c)),await killBot();else{if(_0x37b08e['toString']()[_0x2e79e7(0x2d1)](_0x2e79e7(0x318)))logHistory(_0x2e79e7(0x21b),_0x2e79e7(0x1d9)+_0x43d5a0);else{if(_0x37b08e instanceof ccxt[_0x2e79e7(0x2fd)]){_0x134551=_0x21671a+_0x2e79e7(0x1cb)+_0x37b08e[_0x2e79e7(0x2a0)](),logHistory(_0x2e79e7(0x21b),_0x134551),logger[_0x2e79e7(0x2a8)](_0x2e79e7(0x335),_0x37b08e);if(_0x43d5a0)logger[_0x2e79e7(0x2a8)]('Symbol(s):\x20'+_0x43d5a0);await pauseBot(undefined,_0x134551,_0x37b08e);}else{_0x134551=_0x2e79e7(0x2f3)+_0x37b08e[_0x2e79e7(0x2a0)](),logHistory(_0x2e79e7(0x21b),_0x134551),logger[_0x2e79e7(0x2a8)](_0x134551+_0x2e79e7(0x219),_0x37b08e);if(_0x43d5a0)logger['debug'](_0x2e79e7(0x344)+_0x43d5a0);await pauseBot(undefined,_0x134551);}}}}}}}}}}}}}}}}async function withRetry(_0x359497,_0x4ca45c){const _0x390253=_0x3da5bc;let _0x18ea53=![],_0x59463e=0x0,_0x5ec5c4,_0x25f66a;while(_0x59463e<maxRetries){try{_0x5ec5c4=await _0x4ca45c();break;}catch(_0x1e8989){_0x25f66a=_0x1e8989,!_0x18ea53?(_0x18ea53=!![],logger[_0x390253(0x2a8)]('RETRY\x20-\x20Error\x20in\x20'+_0x359497+':',_0x1e8989[_0x390253(0x2a0)]())):await sleep(retryInterval);}_0x59463e++;}if(_0x59463e==0x0)return _0x5ec5c4;if(_0x59463e>=maxRetries)throw _0x25f66a;else return logger[_0x390253(0x2a8)](_0x390253(0x373)+_0x59463e+_0x390253(0x31b)),_0x5ec5c4;}function formatResult(_0x537900,_0x5b8d8a){const _0x4b33d4=_0x3da5bc;return parseFloat(_0x537900[_0x4b33d4(0x35f)](_0x5b8d8a));}function formatResultTruncate(_0x299f0e,_0x228698){const _0x338426=_0x3da5bc;let _0x216f44=formatResultString(_0x299f0e,0xa),_0x3d2f37=_0x216f44[_0x338426(0x214)]('.');return _0x3d2f37!=-0x1&&(_0x216f44=_0x216f44[_0x338426(0x2fa)](0x0,_0x3d2f37+_0x228698+0x1)),Number(_0x216f44);}function formatResultString(_0x473b77,_0x45bd27){const _0x3a1fc5=_0x3da5bc;let _0x27d1d8;if(!(''+_0x473b77)[_0x3a1fc5(0x2d1)]('e'))_0x27d1d8=+(Math[_0x3a1fc5(0x1e8)](_0x473b77+'e+'+_0x45bd27)+'e-'+_0x45bd27);else{let _0x2d8f0e=(''+_0x473b77)[_0x3a1fc5(0x35c)]('e'),_0x434e4e='';+_0x2d8f0e[0x1]+_0x45bd27>0x0&&(_0x434e4e='+'),_0x27d1d8=+(Math[_0x3a1fc5(0x1e8)](+_0x2d8f0e[0x0]+'e'+_0x434e4e+(+_0x2d8f0e[0x1]+_0x45bd27))+'e-'+_0x45bd27);}return Number(_0x27d1d8)[_0x3a1fc5(0x35f)](_0x45bd27);}function getServerTime(){const _0x13d6ae=_0x3da5bc,_0x4d0372=new Date();return _0x4d0372[_0x13d6ae(0x27a)]()+'/'+(_0x4d0372[_0x13d6ae(0x1d0)]()+0x1)['toString']()[_0x13d6ae(0x356)](0x2,'0')+'/'+_0x4d0372[_0x13d6ae(0x232)]()[_0x13d6ae(0x2a0)]()[_0x13d6ae(0x356)](0x2,'0')+'\x20'+_0x4d0372['getHours']()[_0x13d6ae(0x2a0)]()['padStart'](0x2,'0')+':'+_0x4d0372[_0x13d6ae(0x213)]()[_0x13d6ae(0x2a0)]()[_0x13d6ae(0x356)](0x2,'0')+':'+_0x4d0372['getSeconds']()['toString']()[_0x13d6ae(0x356)](0x2,'0');}function getTimeStamp(){const _0x128de2=_0x3da5bc,_0x10cd9e=shiftedTime();return _0x10cd9e[_0x128de2(0x27a)]()+'/'+(_0x10cd9e[_0x128de2(0x1d0)]()+0x1)[_0x128de2(0x2a0)]()[_0x128de2(0x356)](0x2,'0')+'/'+_0x10cd9e[_0x128de2(0x232)]()[_0x128de2(0x2a0)]()[_0x128de2(0x356)](0x2,'0')+'\x20'+_0x10cd9e['getHours']()[_0x128de2(0x2a0)]()[_0x128de2(0x356)](0x2,'0')+':'+_0x10cd9e['getMinutes']()[_0x128de2(0x2a0)]()[_0x128de2(0x356)](0x2,'0')+':'+_0x10cd9e['getSeconds']()[_0x128de2(0x2a0)]()[_0x128de2(0x356)](0x2,'0');}function getDate(){const _0x1332e0=_0x3da5bc,_0xd2cec=shiftedTime();return _0xd2cec['getFullYear']()+'/'+(_0xd2cec[_0x1332e0(0x1d0)]()+0x1)[_0x1332e0(0x2a0)]()[_0x1332e0(0x356)](0x2,'0')+'/'+_0xd2cec[_0x1332e0(0x232)]()[_0x1332e0(0x2a0)]()[_0x1332e0(0x356)](0x2,'0');}function getHour(){const _0xf8ccfb=_0x3da5bc,_0x33b6aa=shiftedTime();return _0x33b6aa['getHours']()[_0xf8ccfb(0x2a0)]()[_0xf8ccfb(0x356)](0x2,'0');}function sleep(_0x17af84){return new Promise(_0x347777=>setTimeout(_0x347777,_0x17af84));}function shiftedTime(){const _0x4c8908=_0x3da5bc,_0x24e17a=new Date();let _0x23ffe4=_0x24e17a;if(config&&config[_0x4c8908(0x2bb)]!==0x0)_0x23ffe4=fns[_0x4c8908(0x351)](_0x24e17a,{'hours':config[_0x4c8908(0x2bb)]});return _0x23ffe4;}function timer(_0xb167b9){const _0x3e51d6=_0x3da5bc,_0x7417db=new Date();!lasttime?console['log'](getTimeStamp()+_0x3e51d6(0x34d),_0xb167b9,_0x7417db):console[_0x3e51d6(0x305)](getTimeStamp()+_0x3e51d6(0x34d),_0xb167b9,(_0x7417db-lasttime)/0x3e8),lasttime=_0x7417db;}