const _0x2ed210=_0x4032;(function(_0x44be41,_0x2ccb1a){const _0xf1479f=_0x4032,_0x16e24c=_0x44be41();while(!![]){try{const _0x616c17=parseInt(_0xf1479f(0x17e))/0x1*(-parseInt(_0xf1479f(0x191))/0x2)+parseInt(_0xf1479f(0x158))/0x3+-parseInt(_0xf1479f(0x1e5))/0x4*(-parseInt(_0xf1479f(0x252))/0x5)+-parseInt(_0xf1479f(0x170))/0x6*(parseInt(_0xf1479f(0x1a8))/0x7)+parseInt(_0xf1479f(0x169))/0x8+-parseInt(_0xf1479f(0x20a))/0x9*(parseInt(_0xf1479f(0x20f))/0xa)+-parseInt(_0xf1479f(0x1ec))/0xb;if(_0x616c17===_0x2ccb1a)break;else _0x16e24c['push'](_0x16e24c['shift']());}catch(_0x1fdcfb){_0x16e24c['push'](_0x16e24c['shift']());}}}(_0x52f2,0xd7b55));const _0x30f14c=function(){let _0x2b822f=!![];return function(_0x35c101,_0x368eab){const _0x1ef9b9=_0x2b822f?function(){const _0x6cc552=_0x4032;if(_0x368eab){const _0x1bf636=_0x368eab[_0x6cc552(0x22a)](_0x35c101,arguments);return _0x368eab=null,_0x1bf636;}}:function(){};return _0x2b822f=![],_0x1ef9b9;};}(),_0x3f8149=_0x30f14c(this,function(){const _0x2a14ee=_0x4032;return _0x3f8149[_0x2a14ee(0x215)]()[_0x2a14ee(0x1c7)](_0x2a14ee(0x192))[_0x2a14ee(0x215)]()[_0x2a14ee(0x157)](_0x3f8149)[_0x2a14ee(0x1c7)](_0x2a14ee(0x192));});_0x3f8149();'use strict';const ccxt=require(_0x2ed210(0x17f)),low=require(_0x2ed210(0x1a7)),FileSync=require(_0x2ed210(0x15e)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x2ed210(0x244)),Crypt=require(_0x2ed210(0x246))[_0x2ed210(0x174)];let exchange,wsClient;global[_0x2ed210(0x151)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')[_0x2ed210(0x1f1)],botID=process[_0x2ed210(0x1e3)][0x2]||_0x2ed210(0x1e0),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log'](_0x2ed210(0x162)+botID+_0x2ed210(0x1cf)),process['exit'](0x1);const userID=process[_0x2ed210(0x1e3)][0x3]||'',configpath=userID?_0x2ed210(0x23d)+userID+'/':_0x2ed210(0x23d);!fs['existsSync'](configpath)&&fs[_0x2ed210(0x251)](configpath);const configfile=configpath+_0x2ed210(0x15b)+botID+_0x2ed210(0x24b),logfile=configpath+'bot-'+botID+_0x2ed210(0x204),performancefile=configpath+'bot-'+botID+_0x2ed210(0x1d9),coinresultsfile=configpath+_0x2ed210(0x15b)+botID+_0x2ed210(0x1fb),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2ed210(0x182)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);function _0x52f2(){const _0x22afe4=['\x20>\x20','emojisell','fetchOHLCV','length','parseISO','\x20|\x20Error\x20details:\x20','date','emojibuy','usd','InsufficientFunds','\x20|\x20Unknown\x20error\x20occured','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','limit-high','Binance\x20API\x20secret\x20is\x20invalid','initclient','getCloses()','assign','Order\x20filled:\x20','sort','formattedMessage','lowdb','42YUJVUs','send','botID','BTC','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','fees','wsKey','privateKey','shift','isArray','BNB','message','delta','EUR','coin-loading-progress','cancelOrder()','push','orderType','\x20-\x20','loadMarkets','balances','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Market','getCoins()','event','wss://stream.binance.com:9443','order','limits','Limit\x20(low-margin)','parse','sha256','search','sell','bot','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchTickers','milliseconds','abs','startnumber',',\x20must\x20be\x20a\x203\x20digit\x20number','RequestTimeout','coinamount','includes','timestamp','Unfilled\x20order(s)\x20canceled\x20after\x20','symbol','storeHeadless','forEach','number','-performance.json','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','subscribeSpotKline','eur','yyyy/MM/dd\x20HH:mm:ss','\x20orders\x20in\x20less\x20than\x20','coins','001','Order:\x20','getFullYear','argv','coin','4311796ybvZBT','AuthenticationError','storeConfiguration','reconnected','format','startdate','eventType','9807611jbsWOV','toFixed','recreateHistory()','\x20order:\x20','eachDayOfInterval','version','cooldown','page','subscribeSpotUserDataStream','************','outboundAccountPosition','orderStatus','BTC/USDT','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','data','-results.json','createOrder','Pausing\x20bot\x20for\x205\x20minutes\x20(','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Bot\x20','cancelOrder','ordertype','settings','-events.json','getTime','round','excluded','map','startprice','18DEpyOS','InvalidNonce','accumulatedQuantity','market','wsMarket','3628030CjzIgY','HOT/EUR','RSA-OAEP','remove','\x20minutes\x20-\x20balancing\x20resumed','BTCUSDT','toString','get','filled','args','placeOrder()','replace','apiKey','API-key\x20format\x20invalid','target','indexOf','getFiat()','reverse','DDoSProtection','event-history','type','realized','fetchOrders','last','restart','DAI/','headless','apply','configuration','price','ExchangeNotAvailable','offset','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','FILLED','error','Order(s)\x20filled\x20-\x20balancing\x20resumed','\x20hour','orderId','exchange','showname','total','botname','slice','apiSecret','getDate','binanceus','./config/','Executed\x20','asset','starting-balances','logs','timeout','min','binance','buys','hybrid-crypto-js','secure','progress','entries','success','-config.json','BTCEUR','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','currency','running','distribution','mkdirSync','5jnQDSM','yyyy-MM-dd\x27T\x27HH:mm:ss','side','BTC/BUSD','close','recreate','remainingSymbols','write','placeOrder','getMonth','toLowerCase','configuration-stored','portfolio','Invalid\x20quantity','timeshift','ask','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','basecoin','WebSockets(','find','Order(s)\x20validated\x20-\x20balancing\x20resumed','symbols','BTCBUSD','getHours','reduce','USDT','closeWs','function','performance','ticker','BUSD','getSeconds','trade','limit','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','constructor','4665303eurtbB','breakeven','max','bot-','OrderNotFound','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','lowdb/adapters/FileSync','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','decrypt','Binance\x20API\x20key\x20is\x20invalid','Error:\x20Invalid\x20argument\x20','padStart','split','Order(s)\x20not\x20validated\x20after\x20','splice','Performance\x20recreation\x20completed\x20successfully','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','13005080UaLtLh','kill','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','sortBy','threshold','executionReport','sells','496542evSXyw','fetchBalance',')\x20|\x20Error\x20details:\x20','yyyy/MM/dd','Crypt','getMinutes','amount','MIN_NOTIONAL',':\x20Bot\x20','buy','valid','filter','stringify','cancel','252279pNIbuX','ccxt','kline','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','defaults','fromCodePoint','initws()','getPortfolio()','keys','fee','HOT/BTC','has','cost','emitHistory','userData','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','value','Order\x20amount\x20is\x20invalid:\x20','datetime','10kSefHh','(((.+)+)+)+$'];_0x52f2=function(){return _0x22afe4;};return _0x52f2();}dbPerformance[_0x2ed210(0x182)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2ed210(0x182)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x2ed210(0x24c),'symbol':'BTC/EUR'},'usd':{'coin':_0x2ed210(0x214),'symbol':_0x2ed210(0x1f8)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2df006)=>{},'debug':(..._0x3d939c)=>{},'notice':(..._0x54a27e)=>{},'info':(..._0x69e4f0)=>{},'warning':(..._0x51fbe1)=>{},'error':async function(..._0xb5a509){const _0x3e2634=_0x2ed210,_0x4e55b6=new Date()[_0x3e2634(0x205)]();if(!lastErrorShown||_0x4e55b6-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3e2634(0x205)](),logHistory('error',_0x3e2634(0x146)+consecutivePauses+_0x3e2634(0x1ff));let _0x489b11='';if(_0xb5a509[0x0])_0x489b11+=_0xb5a509[0x0];if(_0xb5a509[0x1]&&_0xb5a509[0x1][_0x3e2634(0x231)]&&_0xb5a509[0x1]['error'][_0x3e2634(0x1b3)])_0x489b11+=_0x3e2634(0x1ba)+_0xb5a509[0x1][_0x3e2634(0x231)][_0x3e2634(0x1b3)];logging(_0x3e2634(0x146)+consecutivePauses+_0x3e2634(0x172),''+_0x489b11),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x2ed210(0x1c6),'rsaStandard':_0x2ed210(0x211)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x2ed210(0x142)]!=config[_0x2ed210(0x142)]&&updateTimeshift(settings[_0x2ed210(0x142)]);process['send']({'started':_0x2ed210(0x24f)}),initializeProcessListeners();function proxyEmit(_0x4d13fe,_0x2f8db4=null){process['send']({'function':_0x4d13fe,'args':_0x2f8db4});}function initializeProcessListeners(){const _0x40f966=_0x2ed210;process['on'](_0x40f966(0x1b3),_0x4deed5=>{const _0x49e3b6=_0x40f966;switch(Object[_0x49e3b6(0x186)](_0x4deed5)[0x0]){case'timeshift':_0x4deed5[_0x49e3b6(0x142)]!=undefined&&(settings[_0x49e3b6(0x142)]=_0x4deed5['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x49e3b6(0x14f):switch(_0x4deed5[_0x49e3b6(0x14f)]){case _0x49e3b6(0x1a1):initclient();break;case _0x49e3b6(0x18b):emitHistory(_0x4deed5['args']);break;case'getPortfolio':getPortfolio(_0x4deed5['args']);break;case _0x49e3b6(0x1e7):storeConfiguration(_0x4deed5[_0x49e3b6(0x218)]);break;case _0x49e3b6(0x1d6):storeHeadless(_0x4deed5['args']);break;case'getStartingBalances':getStartingBalances();break;case _0x49e3b6(0x25a):placeOrder(_0x4deed5[_0x49e3b6(0x218)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x3954fd=_0x2ed210;if(pidBalances)clearTimeout(pidBalances);if(config[_0x3954fd(0x21b)]!=''){await initExchange(config[_0x3954fd(0x21b)],config['apiSecret']);let _0x45d1fb=await loadSymbols();_0x45d1fb&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x14d199,_0x46044c){const _0x501389=_0x2ed210,_0x114ebd=ccxt[config[_0x501389(0x235)]];let _0x28c176;switch(config[_0x501389(0x235)]){case _0x501389(0x244):_0x28c176=_0x501389(0x1c1);break;case _0x501389(0x23c):_0x28c176='wss://stream.binance.us:9443';break;default:_0x28c176=_0x501389(0x1c1);}exchange=new _0x114ebd({'apiKey':_0x14d199,'secret':_0x46044c,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x14d199,'api_secret':_0x46044c,'beautify':!![],'wsUrl':_0x28c176},logger),config[_0x501389(0x235)]==_0x501389(0x23c)&&(stablecoins={'eur':{'coin':_0x501389(0x14a),'symbol':_0x501389(0x255)},'usd':{'coin':'BTCUSDT','symbol':_0x501389(0x1f8)}});}async function loadSymbols(){const _0x4c5457=_0x2ed210;let _0x8a159;try{markets=await exchange[_0x4c5457(0x1bb)]();const _0x54b3c4=[_0x4c5457(0x228),_0x4c5457(0x188),_0x4c5457(0x210)];allSymbols=exchange[_0x4c5457(0x149)][_0x4c5457(0x17b)](_0x32819b=>{const _0x162735=_0x4c5457;let _0x390026=![];return _0x54b3c4[_0x162735(0x1d7)](_0x96df98=>{const _0x1994c5=_0x162735;if(_0x32819b[_0x1994c5(0x1d2)](_0x96df98))_0x390026=!![];}),!_0x390026;}),_0x8a159=!![];}catch(_0x209a5a){await handleError(_0x209a5a,'loadSymbols()'),_0x8a159=![];}return _0x8a159;}async function initbot(){const _0x2ed2ef=_0x2ed210;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3ef726=dbCoinResults[_0x2ed2ef(0x216)](_0x2ed2ef(0x1df))['value']();if(_0x3ef726[_0x2ed2ef(0x196)]==0x0)await resetCoinResults();}async function initclient(){const _0x53d7b3=_0x2ed210;proxyEmit(_0x53d7b3(0x22b),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x33bf13=_0x2ed210;wsinitialized=![];ws1&&(ws1[_0x33bf13(0x1d7)](_0x57f474=>{const _0x41070b=_0x33bf13;try{wsClient[_0x41070b(0x14e)](_0x57f474);}catch(_0x58227c){}}),ws1=[]);if(ws2){try{wsClient[_0x33bf13(0x14e)](ws2);}catch(_0x3298e3){}ws2=null;}}async function initws(){const _0x40d44c=_0x2ed210;cleanws();let _0x569f79=[];currentCoins[_0x40d44c(0x1d7)](_0x56ed15=>{const _0x1c0261=_0x40d44c;if(_0x56ed15[_0x1c0261(0x1e4)]!=config[_0x1c0261(0x145)])_0x569f79[_0x1c0261(0x1b8)](noslash(_0x56ed15[_0x1c0261(0x1d5)]));});if(!_0x569f79['includes'](stablecoins[_0x40d44c(0x1dc)]['coin']))_0x569f79[_0x40d44c(0x1b8)](stablecoins[_0x40d44c(0x1dc)][_0x40d44c(0x1e4)]);if(!_0x569f79[_0x40d44c(0x1d2)](stablecoins[_0x40d44c(0x19b)]['coin']))_0x569f79[_0x40d44c(0x1b8)](stablecoins['usd']['coin']);if(!_0x569f79[_0x40d44c(0x1d2)]('BNB'+config[_0x40d44c(0x145)]))_0x569f79[_0x40d44c(0x1b8)](_0x40d44c(0x1b2)+config[_0x40d44c(0x145)]);try{_0x569f79[_0x40d44c(0x1d7)]((_0x526fcb,_0x4ab440)=>{const _0x2ff8c2=_0x40d44c;ws1[_0x4ab440]=wsClient[_0x2ff8c2(0x1db)](_0x526fcb,'1m');}),ws2=wsClient[_0x40d44c(0x1f4)](),wsClient['on'](_0x40d44c(0x1a6),_0x2d1f57=>{const _0x4938ba=_0x40d44c;if(!Array[_0x4938ba(0x1b1)](_0x2d1f57)&&!_0x2d1f57['wsKey']['includes']('userData')){if(_0x2d1f57[_0x4938ba(0x1eb)]===_0x4938ba(0x180)){global[_0x4938ba(0x151)][_0x2d1f57[_0x4938ba(0x180)][_0x4938ba(0x1d5)]]=_0x2d1f57[_0x4938ba(0x180)][_0x4938ba(0x256)];return;}}else{if(!Array[_0x4938ba(0x1b1)](_0x2d1f57)&&_0x2d1f57[_0x4938ba(0x1ae)][_0x4938ba(0x1d2)](_0x4938ba(0x18c))){if(_0x2d1f57[_0x4938ba(0x20e)][_0x4938ba(0x1d2)]('spot')){updateNumberCoins(_0x2d1f57);return;}}}}),wsClient['on'](_0x40d44c(0x1e8),async _0x862466=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x4dc73e){await handleError(_0x4dc73e,_0x40d44c(0x184));}let _0xab5afd,_0x41e2f3=0x0;loading[_0x40d44c(0x258)]=[];let _0x1850b7=0x0;currentCoins[_0x40d44c(0x1d7)](_0x40a17b=>{const _0x4dee4a=_0x40d44c;if(_0x40a17b[_0x4dee4a(0x1e4)]!=config[_0x4dee4a(0x145)])loading[_0x4dee4a(0x258)][_0x4dee4a(0x1b8)](_0x40a17b[_0x4dee4a(0x1d5)]);}),loadingCanceled=![];while(_0xab5afd!=currentCoins['length']-0x1){_0xab5afd=0x0,currentCoins[_0x40d44c(0x1d7)](_0x16728d=>{const _0x268219=_0x40d44c;_0x16728d['coin']!=config[_0x268219(0x145)]&&global[_0x268219(0x151)][noslash(_0x16728d[_0x268219(0x1d5)])]&&(loading[_0x268219(0x258)]=loading[_0x268219(0x258)][_0x268219(0x17b)](_0x99f522=>_0x99f522!=_0x16728d['symbol']),_0xab5afd++);}),loading[_0x40d44c(0x248)]=Math['round'](_0xab5afd/(currentCoins['length']-0x1)*0x64);_0x1850b7>0x1e*0x5&&(loading[_0x40d44c(0x242)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x40d44c(0x17d)]=!![],emitLoadingProgress();break;}else _0xab5afd!=_0x41e2f3&&(_0x41e2f3=_0xab5afd,emitLoadingProgress()),_0x1850b7++,await sleep(0xc8);}if(_0xab5afd==currentCoins[_0x40d44c(0x196)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x56da54=_0x2ed210;proxyEmit(_0x56da54(0x1b6),loading);}async function getFiat(){const _0x1533e9=_0x2ed210;let _0xd24065=0x0,_0x3a9977=0x0;try{_0xd24065=global[_0x1533e9(0x151)][stablecoins[_0x1533e9(0x1dc)]['coin']],_0x3a9977=global[_0x1533e9(0x151)][stablecoins[_0x1533e9(0x19b)][_0x1533e9(0x1e4)]];}catch(_0x39f18b){await handleError(_0x39f18b,_0x1533e9(0x21f));}return{'eur':Number(_0xd24065),'usd':Number(_0x3a9977)};}async function setStartDatePerformance(_0x53c508){const _0x31ba42=_0x2ed210,_0x1a83f6=fns[_0x31ba42(0x1e9)](new Date(_0x53c508[_0x31ba42(0x1ea)]),_0x31ba42(0x173));let _0x2f8a06=[];_0x2f8a06[stablecoins[_0x31ba42(0x1dc)][_0x31ba42(0x1e4)]]=await getCloses(stablecoins[_0x31ba42(0x1dc)]['symbol'],new Date(_0x53c508[_0x31ba42(0x1ea)]),0x1),_0x2f8a06[stablecoins[_0x31ba42(0x19b)][_0x31ba42(0x1e4)]]=await getCloses(stablecoins['usd']['symbol'],new Date(_0x53c508[_0x31ba42(0x1ea)]),0x1);let _0x4396f4,_0x3356e6=[];_0x53c508['portfolio'][_0x31ba42(0x1d7)](_0x54c031=>{const _0x38db5d=_0x31ba42;!_0x54c031[_0x38db5d(0x207)]&&_0x3356e6[_0x38db5d(0x1b8)]({'coin':_0x54c031[_0x38db5d(0x1e4)],'number':_0x54c031[_0x38db5d(0x1ce)],'price':_0x54c031[_0x38db5d(0x209)]});}),_0x4396f4={'date':_0x1a83f6,'eur':_0x2f8a06[stablecoins['eur'][_0x31ba42(0x1e4)]][0x0],'usd':_0x2f8a06[stablecoins['usd'][_0x31ba42(0x1e4)]][0x0],'coins':_0x3356e6};let _0x537ee7=dbPerformance[_0x31ba42(0x216)](_0x31ba42(0x1fa))[_0x31ba42(0x147)]({'date':_0x1a83f6})['value']();_0x537ee7?dbPerformance['get'](_0x31ba42(0x1fa))[_0x31ba42(0x147)]({'date':_0x1a83f6})[_0x31ba42(0x1a3)](_0x4396f4)['write']():dbPerformance['get'](_0x31ba42(0x1fa))[_0x31ba42(0x1b8)](_0x4396f4)['write'](),_0x537ee7=dbPerformance[_0x31ba42(0x216)](_0x31ba42(0x1fa))[_0x31ba42(0x16c)]('date')['value'](),_0x537ee7[_0x31ba42(0x1d7)](_0x15f5a6=>{const _0x138782=_0x31ba42;_0x15f5a6[_0x138782(0x199)]<_0x1a83f6&&dbPerformance['get'](_0x138782(0x1fa))[_0x138782(0x212)]({'date':_0x15f5a6['date']})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x57d5e){const _0x2c8e2c=_0x2ed210;let _0x6a7138,_0x16f6bb=[];logHistory(_0x2c8e2c(0x24a),_0x2c8e2c(0x1bd)),_0x57d5e[_0x2c8e2c(0x140)][_0x2c8e2c(0x1d7)](_0x4b2c70=>{const _0xb02a58=_0x2c8e2c;if(_0x4b2c70[_0xb02a58(0x1e4)]!=config[_0xb02a58(0x145)]&&!_0x4b2c70[_0xb02a58(0x207)])_0x16f6bb[_0xb02a58(0x1b8)]({'coin':_0x4b2c70[_0xb02a58(0x1e4)],'symbol':_0x4b2c70[_0xb02a58(0x1d5)]});});let _0x52cd9c=[];try{const _0xcf997b=fns['format'](fns['parseISO'](_0x57d5e[_0x2c8e2c(0x1ea)][_0x2c8e2c(0x21a)](/\//g,'-')),_0x2c8e2c(0x253));for(const _0x57f161 of _0x16f6bb){if(_0x57f161['coin']!=config[_0x2c8e2c(0x145)])_0x6a7138=await exchange[_0x2c8e2c(0x225)](_0x57f161['symbol'],Date[_0x2c8e2c(0x1c5)](_0xcf997b));_0x6a7138['forEach'](_0x54d52f=>{const _0x6de633=_0x2c8e2c,_0x3f67fc=_0x57f161['symbol'][_0x6de633(0x1d2)](config[_0x6de633(0x145)]+'/'),_0x3346fe=fns[_0x6de633(0x1e9)](fns[_0x6de633(0x197)](_0x54d52f[_0x6de633(0x190)]),_0x6de633(0x1dd)),_0x435477=fns[_0x6de633(0x1e9)](fns[_0x6de633(0x197)](_0x54d52f[_0x6de633(0x190)]),_0x6de633(0x173));let _0x4e4424;if(_0x54d52f['side']==_0x6de633(0x179)&&_0x3f67fc==![])_0x4e4424=_0x54d52f[_0x6de633(0x176)];if(_0x54d52f['side']==_0x6de633(0x179)&&_0x3f67fc==!![])_0x4e4424=-_0x54d52f[_0x6de633(0x176)]*_0x54d52f[_0x6de633(0x22c)];if(_0x54d52f['side']==_0x6de633(0x1c8)&&_0x3f67fc==![])_0x4e4424=-_0x54d52f[_0x6de633(0x176)];if(_0x54d52f['side']==_0x6de633(0x1c8)&&_0x3f67fc==!![])_0x4e4424=_0x54d52f[_0x6de633(0x176)]*_0x54d52f['price'];_0x52cd9c[_0x6de633(0x1b8)]({'timestamp':_0x3346fe,'date':_0x435477,'coin':_0x57f161[_0x6de633(0x1e4)],'symbol':_0x57f161[_0x6de633(0x1d5)],'type':_0x54d52f['type'],'side':_0x54d52f[_0x6de633(0x254)],'reverse':_0x3f67fc,'amount':formatResult(_0x54d52f[_0x6de633(0x217)],0x8),'filled':formatResult(_0x54d52f[_0x6de633(0x217)],0x8),'coinamount':formatResult(_0x4e4424,0x8),'price':formatResult(_0x54d52f[_0x6de633(0x22c)],0x8)});let _0x148e99;if(_0x54d52f['side']==_0x6de633(0x179)&&_0x3f67fc==![])_0x148e99=-_0x54d52f[_0x6de633(0x176)]*_0x54d52f['price'];if(_0x54d52f['side']==_0x6de633(0x179)&&_0x3f67fc==!![])_0x148e99=_0x54d52f[_0x6de633(0x176)];if(_0x54d52f[_0x6de633(0x254)]==_0x6de633(0x1c8)&&_0x3f67fc==![])_0x148e99=_0x54d52f['amount']*_0x54d52f['price'];if(_0x54d52f[_0x6de633(0x254)]==_0x6de633(0x1c8)&&_0x3f67fc==!![])_0x148e99=-_0x54d52f['amount'];_0x52cd9c[_0x6de633(0x1b8)]({'date':_0x435477,'coin':config[_0x6de633(0x145)],'coinamount':formatResult(_0x148e99,0x8)});});}_0x52cd9c['sort']((_0x529d44,_0x57ad3d)=>_0x529d44[_0x2c8e2c(0x1d3)]>_0x57ad3d[_0x2c8e2c(0x1d3)]?0x1:_0x57ad3d[_0x2c8e2c(0x1d3)]>_0x529d44[_0x2c8e2c(0x1d3)]?-0x1:0x0),dbLogs[_0x2c8e2c(0x216)](_0x2c8e2c(0x241))[_0x2c8e2c(0x212)]()[_0x2c8e2c(0x259)](),_0x52cd9c['forEach'](_0x5a2afc=>{const _0xbb77c2=_0x2c8e2c;let _0x59001d;_0x5a2afc[_0xbb77c2(0x1e4)]!=config['basecoin']&&(_0x59001d={'time':_0x5a2afc[_0xbb77c2(0x1d3)],'type':_0xbb77c2(0x1c2),'event':_0xbb77c2(0x1e1)+_0x5a2afc[_0xbb77c2(0x1d5)]+'\x20'+_0x5a2afc[_0xbb77c2(0x254)]+'\x20#'+_0x5a2afc[_0xbb77c2(0x176)]+'\x20@'+_0x5a2afc['price']},dbLogs[_0xbb77c2(0x216)](_0xbb77c2(0x241))[_0xbb77c2(0x1b8)](_0x59001d)['write']());});const _0x389c70=fns[_0x2c8e2c(0x1f0)]({'start':new Date(_0x57d5e[_0x2c8e2c(0x1ea)]),'end':new Date()})[_0x2c8e2c(0x208)](_0x4fa4ea=>fns[_0x2c8e2c(0x1e9)](_0x4fa4ea,_0x2c8e2c(0x173)));let _0x7de31f=[];_0x57d5e['portfolio'][_0x2c8e2c(0x1d7)](_0x2c4666=>{const _0x30bcc7=_0x2c8e2c;if(!_0x2c4666[_0x30bcc7(0x207)]){_0x7de31f[_0x2c4666[_0x30bcc7(0x1e4)]]=[];let _0x4e0f3e=_0x2c4666[_0x30bcc7(0x1ce)];_0x389c70[_0x30bcc7(0x1d7)]((_0x569186,_0x4f9ae3)=>{const _0x4af518=_0x30bcc7;let _0x523ed0=_0x52cd9c['filter'](_0x3ca042=>_0x3ca042['coin']==_0x2c4666[_0x4af518(0x1e4)]&&_0x3ca042[_0x4af518(0x199)]==_0x569186);if(_0x523ed0[_0x4af518(0x196)]!=0x0){let _0x55d11a=_0x523ed0[_0x4af518(0x14c)]((_0x4fba43,_0x535301)=>{const _0x1f0bda=_0x4af518;return _0x4fba43+=_0x535301[_0x1f0bda(0x1d1)],_0x4fba43;},0x0);_0x4e0f3e+=_0x55d11a;}_0x7de31f[_0x2c4666[_0x4af518(0x1e4)]][_0x569186]=_0x4e0f3e;});}});const _0x21d335=[..._0x16f6bb];_0x21d335[_0x2c8e2c(0x1b8)]({'coin':stablecoins[_0x2c8e2c(0x1dc)][_0x2c8e2c(0x1e4)],'symbol':stablecoins[_0x2c8e2c(0x1dc)]['symbol']}),_0x21d335[_0x2c8e2c(0x1b8)]({'coin':stablecoins['usd']['coin'],'symbol':stablecoins[_0x2c8e2c(0x19b)][_0x2c8e2c(0x1d5)]});let _0x11c662=[];for(const _0x42e176 of _0x21d335){_0x11c662[_0x42e176[_0x2c8e2c(0x1e4)]]=await getCloses(_0x42e176[_0x2c8e2c(0x1d5)],new Date(_0x57d5e[_0x2c8e2c(0x1ea)]));}dbPerformance['get'](_0x2c8e2c(0x1fa))[_0x2c8e2c(0x212)]()[_0x2c8e2c(0x259)](),_0x389c70[_0x2c8e2c(0x1d7)]((_0x585ca8,_0x535a72)=>{const _0x3094dd=_0x2c8e2c;let _0x49893d,_0x5480cf=[];_0x535a72==0x0?(_0x57d5e[_0x3094dd(0x140)][_0x3094dd(0x1d7)](_0x4a48c6=>{const _0xbd9b4e=_0x3094dd;!_0x4a48c6['excluded']&&_0x5480cf[_0xbd9b4e(0x1b8)]({'coin':_0x4a48c6[_0xbd9b4e(0x1e4)],'number':_0x4a48c6[_0xbd9b4e(0x1ce)],'price':_0x4a48c6[_0xbd9b4e(0x209)]});}),_0x49893d={'date':_0x585ca8,'eur':_0x11c662[stablecoins['eur']['coin']][_0x535a72],'usd':_0x11c662[stablecoins[_0x3094dd(0x19b)][_0x3094dd(0x1e4)]][_0x535a72],'coins':_0x5480cf}):(_0x57d5e[_0x3094dd(0x140)]['forEach'](_0x174c70=>{const _0x36323d=_0x3094dd;!_0x174c70[_0x36323d(0x207)]&&_0x5480cf[_0x36323d(0x1b8)]({'coin':_0x174c70[_0x36323d(0x1e4)],'number':_0x7de31f[_0x174c70['coin']][_0x585ca8],'price':_0x174c70['coin']==config[_0x36323d(0x145)]?0x1:_0x11c662[_0x174c70[_0x36323d(0x1e4)]][_0x535a72]});}),_0x49893d={'date':_0x585ca8,'eur':_0x11c662[stablecoins[_0x3094dd(0x1dc)][_0x3094dd(0x1e4)]][_0x535a72],'usd':_0x11c662[stablecoins[_0x3094dd(0x19b)][_0x3094dd(0x1e4)]][_0x535a72],'coins':_0x5480cf}),dbPerformance[_0x3094dd(0x216)](_0x3094dd(0x1fa))['push'](_0x49893d)[_0x3094dd(0x259)]();}),emitPerformance(),await resetCoinResults();for(let _0x578b15 of _0x52cd9c){_0x578b15[_0x2c8e2c(0x1e4)]!=config[_0x2c8e2c(0x145)]&&await updateCoinResults(_0x578b15);}logHistory(_0x2c8e2c(0x24a),_0x2c8e2c(0x167));}catch(_0x2f6607){await handleError(_0x2f6607,_0x2c8e2c(0x1ee));}}async function getCloses(_0x32551f,_0x23a574,_0x375202=undefined){const _0x414c9a=_0x2ed210,_0x128e78='1d';let _0x11dc7c,_0x26e02b;const _0x52455d=fns['differenceInCalendarDays'](new Date(),_0x23a574)+0x1;try{const _0x291993=exchange[_0x414c9a(0x1cc)]()-_0x52455d*0x18*0xe10*0x3e8;_0x11dc7c=await exchange[_0x414c9a(0x195)](_0x32551f,_0x128e78,_0x291993,_0x375202),_0x26e02b=await exchange[_0x414c9a(0x1cb)](_0x32551f);}catch(_0x3d1fb8){await handleError(_0x3d1fb8,_0x414c9a(0x1a2));}let _0x53b428=ohlcvToCloses(_0x11dc7c);return _0x53b428['push'](_0x26e02b[_0x32551f]['last']),_0x53b428;}function ohlcvToCloses(_0xcf9fb1){let _0x42d250=[];return _0xcf9fb1['forEach'](function(_0x4f1065){const _0x1d5a6a=_0x4032;_0x42d250[_0x1d5a6a(0x1b8)](_0x4f1065[0x4]);}),_0x42d250;}function getConfiguration(_0x49d74b){const _0xc884fa=_0x2ed210;let _0x2bfe20=dbConfig[_0xc884fa(0x216)](_0xc884fa(0x1c9))['find']({'botID':_0x49d74b})[_0xc884fa(0x18e)]();if(_0x2bfe20){let _0x113969=![];!_0x2bfe20['exchange']&&(_0x2bfe20={..._0x2bfe20,'exchange':_0xc884fa(0x244)},_0x113969=!![]),!_0x2bfe20[_0xc884fa(0x145)]&&(_0x2bfe20={..._0x2bfe20,'basecoin':_0xc884fa(0x1ab)},_0x113969=!![]),!_0x2bfe20[_0xc884fa(0x202)]&&(_0x2bfe20={..._0x2bfe20,'ordertype':_0xc884fa(0x20d)},_0x113969=!![]),!_0x2bfe20[_0xc884fa(0x242)]&&(_0x2bfe20={..._0x2bfe20,'timeout':0x14},_0x113969=!![]),!_0x2bfe20[_0xc884fa(0x19a)]&&(_0x2bfe20={..._0x2bfe20,'emojibuy':''},_0x113969=!![]),!_0x2bfe20[_0xc884fa(0x194)]&&(_0x2bfe20={..._0x2bfe20,'emojisell':''},_0x113969=!![]),!_0x2bfe20['showname']&&(_0x2bfe20={..._0x2bfe20,'showname':![]},_0x113969=!![]),_0x113969&&(_0x2bfe20={'botID':_0x2bfe20[_0xc884fa(0x1aa)],'exchange':_0x2bfe20[_0xc884fa(0x235)],'apiKey':_0x2bfe20[_0xc884fa(0x21b)],'apiSecret':_0x2bfe20['apiSecret'],'basecoin':_0x2bfe20[_0xc884fa(0x145)],'botname':_0x2bfe20[_0xc884fa(0x238)],'showname':_0x2bfe20[_0xc884fa(0x236)],'threshold':_0x2bfe20[_0xc884fa(0x16d)],'ordertype':_0x2bfe20[_0xc884fa(0x202)],'timeout':_0x2bfe20[_0xc884fa(0x242)],'startdate':_0x2bfe20[_0xc884fa(0x1ea)],'recreate':_0x2bfe20[_0xc884fa(0x257)],'timeshift':_0x2bfe20[_0xc884fa(0x142)],'headless':_0x2bfe20[_0xc884fa(0x229)],'cooldown':_0x2bfe20[_0xc884fa(0x1f2)],'emojibuy':_0x2bfe20[_0xc884fa(0x19a)],'emojisell':_0x2bfe20[_0xc884fa(0x194)],'portfolio':_0x2bfe20[_0xc884fa(0x140)]},dbConfig[_0xc884fa(0x216)](_0xc884fa(0x1c9))[_0xc884fa(0x212)]()[_0xc884fa(0x259)](),dbConfig[_0xc884fa(0x216)](_0xc884fa(0x1c9))[_0xc884fa(0x1b8)](_0x2bfe20)[_0xc884fa(0x259)]());}else _0x2bfe20={'botID':_0x49d74b,'exchange':_0xc884fa(0x244),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xc884fa(0x200)+_0x49d74b,'showname':![],'threshold':'3','ordertype':_0xc884fa(0x20d),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xc884fa(0x142)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2bfe20;}function emittedConfiguration(){const _0x2f55f7=_0x2ed210;let _0x5ad40f;return config[_0x2f55f7(0x21b)]==''?_0x5ad40f=config:_0x5ad40f={...config,'apiKey':_0x2f55f7(0x1f5),'apiSecret':'************'},_0x5ad40f;}function getSettings(){const _0x6c9c55=_0x2ed210;return dbSettings['get'](_0x6c9c55(0x203))[_0x6c9c55(0x18e)]();}function getSecure(){const _0x27d9e1=_0x2ed210;return dbSecure[_0x27d9e1(0x216)](_0x27d9e1(0x247))['value']()||{};}function updateTimeshift(_0x1596d9){const _0x49a3b6=_0x2ed210;let _0x3c688f=dbConfig[_0x49a3b6(0x216)]('bot')[_0x49a3b6(0x147)]({'botID':botID})[_0x49a3b6(0x18e)]();_0x3c688f&&dbConfig[_0x49a3b6(0x216)](_0x49a3b6(0x1c9))[_0x49a3b6(0x147)]({'botID':botID})[_0x49a3b6(0x1a3)]({'timeshift':_0x1596d9})[_0x49a3b6(0x259)](),config[_0x49a3b6(0x142)]=_0x1596d9,proxyEmit(_0x49a3b6(0x22b),emittedConfiguration());}async function storeConfiguration(_0x4319cc){const _0x58b36f=_0x2ed210;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0xff600d=dbConfig['get'](_0x58b36f(0x1c9))[_0x58b36f(0x147)]({'botID':botID})['value']();_0x4319cc={..._0x4319cc,'apiKey':crypt[_0x58b36f(0x160)](secure[_0x58b36f(0x1af)],_0x4319cc[_0x58b36f(0x21b)])['message'],'apiSecret':crypt[_0x58b36f(0x160)](secure[_0x58b36f(0x1af)],_0x4319cc[_0x58b36f(0x23a)])[_0x58b36f(0x1b3)]};if(_0xff600d){if(_0x4319cc[_0x58b36f(0x21b)]==_0x58b36f(0x1f5))_0x4319cc[_0x58b36f(0x21b)]=config[_0x58b36f(0x21b)];if(_0x4319cc[_0x58b36f(0x23a)]=='************')_0x4319cc[_0x58b36f(0x23a)]=config[_0x58b36f(0x23a)];dbConfig[_0x58b36f(0x216)](_0x58b36f(0x1c9))[_0x58b36f(0x147)]({'botID':botID})[_0x58b36f(0x1a3)](_0x4319cc)['write']();}else dbConfig[_0x58b36f(0x216)](_0x58b36f(0x1c9))[_0x58b36f(0x1b8)](_0x4319cc)[_0x58b36f(0x259)](),process[_0x58b36f(0x1a9)]({'status':'enabled','live':'running'});config={..._0x4319cc};if(config[_0x58b36f(0x257)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x4319cc[_0x58b36f(0x238)]}),proxyEmit(_0x58b36f(0x13f)),reset();}async function storeHeadless(_0x3a08ab){const _0x19e614=_0x2ed210,_0x4db42f={...config,'headless':_0x3a08ab[_0x19e614(0x229)]};let _0x320c1d=dbConfig['get'](_0x19e614(0x1c9))[_0x19e614(0x147)]({'botID':botID})[_0x19e614(0x18e)]();_0x320c1d&&dbConfig[_0x19e614(0x216)](_0x19e614(0x1c9))[_0x19e614(0x147)]({'botID':botID})['assign'](_0x4db42f)[_0x19e614(0x259)](),config={..._0x4db42f},proxyEmit(_0x19e614(0x22b),emittedConfiguration());}function noslash(_0x3c074a){const _0x37ead1=_0x2ed210;return _0x3c074a[_0x37ead1(0x21a)]('/','');}function updateNumberCoins(_0xbcd2a){const _0x5a41c6=_0x2ed210;_0xbcd2a['eventType']&&_0xbcd2a[_0x5a41c6(0x1eb)]==_0x5a41c6(0x1f6)&&_0xbcd2a['balances'][_0x5a41c6(0x1d7)](_0x18ec2e=>{const _0x5e1e38=_0x5a41c6;let _0x3bf3e1=currentCoins['find'](_0x1c7b8d=>_0x1c7b8d[_0x5e1e38(0x1e4)]==_0x18ec2e['asset']),_0x5763c5=config[_0x5e1e38(0x140)][_0x5e1e38(0x147)](_0x319942=>_0x319942['coin']==_0x18ec2e[_0x5e1e38(0x23f)]);if(_0x3bf3e1&&_0x5763c5)_0x3bf3e1[_0x5e1e38(0x1d8)]=Math[_0x5e1e38(0x15a)](Number(_0x18ec2e['availableBalance'])+(_0x5763c5[_0x5e1e38(0x22e)]||0x0),0x0);});if(_0xbcd2a[_0x5a41c6(0x1eb)]&&_0xbcd2a['eventType']==_0x5a41c6(0x16e)){if(_0xbcd2a[_0x5a41c6(0x1b9)]=='LIMIT'&&_0xbcd2a[_0x5a41c6(0x1f7)]==_0x5a41c6(0x230)){if(lastOrders)lastOrders[_0x5a41c6(0x1d7)](_0x5efe06=>{const _0x1b1050=_0x5a41c6;if(_0x5efe06[_0x1b1050(0x234)]==_0xbcd2a[_0x1b1050(0x234)]){if(_0x5efe06[_0x1b1050(0x220)])_0x5efe06[_0x1b1050(0x217)]=_0xbcd2a[_0x1b1050(0x20c)]*_0x5efe06[_0x1b1050(0x22c)];else _0x5efe06[_0x1b1050(0x217)]=_0xbcd2a[_0x1b1050(0x20c)];}});}}}async function getCoins(_0x4c6920=!![],_0x3e0431=config[_0x2ed210(0x145)]){const _0x31ef8d=_0x2ed210;let _0x3eda04,_0x2af0ba=[],_0x234bb8=[],_0x1604dc=[];try{_0x3eda04=await exchange[_0x31ef8d(0x171)](),mybalances=_0x3eda04[_0x31ef8d(0x237)];if(!_0x4c6920)for(const [_0x51afc8,_0x1fd878]of Object[_0x31ef8d(0x249)](mybalances)){_0x1604dc[_0x31ef8d(0x1b8)](_0x51afc8);}else config[_0x31ef8d(0x140)]['forEach'](_0x42cf23=>{const _0xc4b94e=_0x31ef8d;if(!_0x42cf23[_0xc4b94e(0x207)])_0x1604dc[_0xc4b94e(0x1b8)](_0x42cf23[_0xc4b94e(0x1e4)]);});if(_0x3e0431=='')for(const [_0x26f9a5,_0x1961f2]of Object[_0x31ef8d(0x249)](mybalances)){_0x1961f2[_0x31ef8d(0x215)]()!=0x0&&_0x234bb8[_0x31ef8d(0x1b8)]({'coin':_0x26f9a5});}else for(const [_0x2bdfbf,_0x41b307]of Object[_0x31ef8d(0x249)](mybalances)){if(_0x1604dc['includes'](_0x2bdfbf)){const _0x5bb757=config[_0x31ef8d(0x140)][_0x31ef8d(0x147)](_0x2a6e25=>_0x2a6e25[_0x31ef8d(0x1e4)]==_0x2bdfbf);if((_0x41b307[_0x31ef8d(0x215)]()!=0x0||_0x5bb757)&&(allSymbols[_0x31ef8d(0x1d2)](_0x2bdfbf+'/'+_0x3e0431)||_0x2bdfbf==_0x3e0431))_0x234bb8[_0x31ef8d(0x1b8)]({'coin':_0x2bdfbf,'symbol':_0x2bdfbf+'/'+_0x3e0431,'reverse':![],'number':Math[_0x31ef8d(0x15a)](_0x41b307+(_0x5bb757&&_0x5bb757[_0x31ef8d(0x22e)]||0x0),0x0)}),_0x2bdfbf!=_0x3e0431&&_0x2af0ba['push'](_0x2bdfbf+'/'+_0x3e0431);else(_0x41b307['toString']()!=0x0||_0x5bb757)&&allSymbols['includes'](_0x3e0431+'/'+_0x2bdfbf)&&(_0x234bb8[_0x31ef8d(0x1b8)]({'coin':_0x2bdfbf,'symbol':_0x3e0431+'/'+_0x2bdfbf,'reverse':!![],'number':Math[_0x31ef8d(0x15a)](_0x41b307+(_0x5bb757&&_0x5bb757[_0x31ef8d(0x22e)]||0x0),0x0)}),_0x2bdfbf!=_0x3e0431&&_0x2af0ba[_0x31ef8d(0x1b8)](_0x3e0431+'/'+_0x2bdfbf));}}}catch(_0xfb9976){if(!_0x4c6920){if(_0xfb9976['toString']()[_0x31ef8d(0x1d2)](_0x31ef8d(0x21c)))return logHistory(_0x31ef8d(0x231),_0x31ef8d(0x161)),![];else{if(_0xfb9976[_0x31ef8d(0x215)]()[_0x31ef8d(0x1d2)]('AuthenticationError'))return logHistory(_0x31ef8d(0x231),_0x31ef8d(0x1fe)),![];else{if(_0xfb9976[_0x31ef8d(0x215)]()[_0x31ef8d(0x1d2)](_0x31ef8d(0x15f)))return logHistory(_0x31ef8d(0x231),_0x31ef8d(0x1a0)),![];else await handleError(_0xfb9976,_0x31ef8d(0x1bf));}}}else await handleError(_0xfb9976,'getCoins()');}return _0x234bb8;}async function getPortfolio(_0x28f495){const _0x3381f4=_0x2ed210;let _0x2076de=[],_0x10777a=[],_0x145cd7,_0x3915ac=[],_0x218de3,_0x2e6068;_0x28f495['apiKey']===_0x3381f4(0x1f5)||_0x28f495[_0x3381f4(0x23a)]==='************'?(_0x218de3=config['apiKey'],_0x2e6068=config[_0x3381f4(0x23a)]):(_0x218de3=_0x28f495[_0x3381f4(0x21b)],_0x2e6068=_0x28f495['apiSecret']);await initExchange(_0x218de3,_0x2e6068);let _0x41a95d=await loadSymbols();if(_0x41a95d){_0x3915ac=await getCoins(![],_0x28f495['basecoin']);if(_0x3915ac===![])proxyEmit('portfolio',![]);else{if(_0x28f495[_0x3381f4(0x145)]=='')proxyEmit(_0x3381f4(0x140),_0x3915ac);else{_0x3915ac[_0x3381f4(0x1d7)](_0x5bf1ff=>{const _0x5ef345=_0x3381f4;_0x2076de['push'](_0x5bf1ff[_0x5ef345(0x1d5)]);});try{_0x10777a=await exchange[_0x3381f4(0x1cb)](_0x2076de);}catch(_0x3da126){await handleError(_0x3da126,_0x3381f4(0x185));}_0x3915ac[_0x3381f4(0x1d7)](_0x3ee0d6=>{const _0x492c5d=_0x3381f4;_0x3ee0d6['coin']!=_0x28f495[_0x492c5d(0x145)]?_0x145cd7=_0x3ee0d6[_0x492c5d(0x220)]?0x1/_0x10777a[_0x3ee0d6[_0x492c5d(0x1d5)]][_0x492c5d(0x226)]:_0x10777a[_0x3ee0d6[_0x492c5d(0x1d5)]][_0x492c5d(0x226)]:_0x145cd7=0x1,_0x3ee0d6['price']=formatResult(_0x145cd7,0x8);}),proxyEmit(_0x3381f4(0x140),_0x3915ac);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x4e3eee){const _0x2911fa=_0x2ed210;let _0x2a1e7f=!![];const _0x384cf2=!_0x4e3eee[_0x2911fa(0x220)]?markets[_0x4e3eee[_0x2911fa(0x1d5)]]['limits'][_0x2911fa(0x176)][_0x2911fa(0x243)]:markets[_0x4e3eee[_0x2911fa(0x1d5)]][_0x2911fa(0x1c3)][_0x2911fa(0x18a)][_0x2911fa(0x243)],_0x4824e0=!_0x4e3eee[_0x2911fa(0x220)]?markets[_0x4e3eee['symbol']]['limits']['cost'][_0x2911fa(0x243)]:markets[_0x4e3eee[_0x2911fa(0x1d5)]][_0x2911fa(0x1c3)][_0x2911fa(0x176)][_0x2911fa(0x243)];if(Math[_0x2911fa(0x1cd)](_0x4e3eee[_0x2911fa(0x154)])<_0x384cf2)_0x2a1e7f=![];if(Math[_0x2911fa(0x1cd)](_0x4e3eee[_0x2911fa(0x154)])*_0x4e3eee[_0x2911fa(0x226)]<_0x4824e0)_0x2a1e7f=![];return _0x2a1e7f;}async function getBalances(){const _0x45beb6=_0x2ed210;let _0x1c2faa=0x0,_0x123e63;const _0x433113=config[_0x45beb6(0x16d)];currentCoins[_0x45beb6(0x1d7)](_0x4d2e8c=>{const _0x274446=_0x45beb6;if(_0x4d2e8c[_0x274446(0x1e4)]!=config[_0x274446(0x145)]){let _0x3c30d3=global[_0x274446(0x151)][noslash(_0x4d2e8c[_0x274446(0x1d5)])];_0x123e63=_0x4d2e8c['reverse']?0x1/_0x3c30d3:_0x3c30d3;}else _0x123e63=0x1;let _0x12faf2=_0x4d2e8c[_0x274446(0x1d8)]*_0x123e63;_0x1c2faa+=_0x12faf2,_0x4d2e8c['last']=formatResult(Number(_0x123e63),0x8),_0x4d2e8c[_0x274446(0x18e)]=_0x12faf2;}),currentCoins[_0x45beb6(0x1d7)](_0x4be7a5=>{const _0x4e2cd9=_0x45beb6;let _0x5d2262=config[_0x4e2cd9(0x140)][_0x4e2cd9(0x147)](_0x2d687e=>_0x2d687e[_0x4e2cd9(0x1e4)]==_0x4be7a5['coin']),_0x32414d=Number(_0x5d2262['distribution']),_0x3334d7=_0x4be7a5['value']/_0x1c2faa*0x64,_0x4565e2=_0x32414d*_0x1c2faa/0x64/_0x4be7a5[_0x4e2cd9(0x226)]-_0x4be7a5[_0x4e2cd9(0x1d8)];_0x4be7a5[_0x4e2cd9(0x250)]=formatResult(_0x3334d7,0x3),_0x4be7a5[_0x4e2cd9(0x21d)]=formatResult(_0x32414d,0x3),_0x4be7a5[_0x4e2cd9(0x154)]=formatResult(_0x4565e2,0x8),_0x4be7a5[_0x4e2cd9(0x254)]='',_0x4be7a5[_0x4e2cd9(0x17a)]='';if(_0x4be7a5[_0x4e2cd9(0x1e4)]!=config[_0x4e2cd9(0x145)]){if(_0x4be7a5[_0x4e2cd9(0x250)]>_0x32414d)_0x4be7a5[_0x4e2cd9(0x254)]=_0x4e2cd9(0x1c8),_0x4be7a5[_0x4e2cd9(0x17a)]=checkMinimums(_0x4be7a5);else _0x4be7a5[_0x4e2cd9(0x250)]<_0x32414d&&(_0x4be7a5['side']=_0x4e2cd9(0x179),_0x4be7a5['valid']=checkMinimums(_0x4be7a5));}_0x4be7a5[_0x4e2cd9(0x1b4)]=_0x4be7a5['distribution']/_0x4be7a5['target']-0x1;}),currentCoins[_0x45beb6(0x1a5)]((_0x538fe9,_0x33ffa2)=>_0x538fe9[_0x45beb6(0x1b4)]<_0x33ffa2[_0x45beb6(0x1b4)]?0x1:_0x33ffa2[_0x45beb6(0x1b4)]<_0x538fe9['delta']?-0x1:0x0);const _0x4be277=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4be277['eur'],'usd':_0x4be277[_0x45beb6(0x19b)],'portfolio':JSON[_0x45beb6(0x17c)](currentCoins),'threshold':_0x433113},proxyEmit(_0x45beb6(0x1bc),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x45beb6(0x229)])headlessMode({'portfolio':currentCoins,'threshold':_0x433113});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xf0ca2b=_0x2ed210;if(!lastBalances)return;let _0x120c2b=await getStartingBalances(![]),_0x559e47=[],_0x5978dd;JSON['parse'](lastBalances[_0xf0ca2b(0x140)])[_0xf0ca2b(0x1d7)](_0x5e6da1=>{const _0x14103e=_0xf0ca2b;let _0x1cd676={'coin':_0x5e6da1[_0x14103e(0x1e4)],'number':_0x5e6da1['number'],'price':_0x5e6da1[_0x14103e(0x226)]};_0x559e47[_0x14103e(0x1b8)](_0x1cd676);});const _0x8d4069=await getFiat();_0x5978dd={'date':lastBalances['time'][_0xf0ca2b(0x164)]('\x20')[0x0],'eur':_0x8d4069[_0xf0ca2b(0x1dc)],'usd':_0x8d4069[_0xf0ca2b(0x19b)],'coins':_0x559e47};let _0x2f274f=dbPerformance[_0xf0ca2b(0x216)](_0xf0ca2b(0x1fa))[_0xf0ca2b(0x147)]({'date':_0x5978dd[_0xf0ca2b(0x199)]})[_0xf0ca2b(0x18e)]();_0x2f274f?dbPerformance[_0xf0ca2b(0x216)](_0xf0ca2b(0x1fa))[_0xf0ca2b(0x147)]({'date':_0x5978dd[_0xf0ca2b(0x199)]})[_0xf0ca2b(0x1a3)](_0x5978dd)[_0xf0ca2b(0x259)]():dbPerformance[_0xf0ca2b(0x216)](_0xf0ca2b(0x1fa))[_0xf0ca2b(0x1b8)](_0x5978dd)[_0xf0ca2b(0x259)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x22baa9=_0x2ed210;if(dbPerformance[_0x22baa9(0x189)](_0x22baa9(0x1fa))[_0x22baa9(0x18e)]()){let _0x20f39e=dbPerformance[_0x22baa9(0x216)](_0x22baa9(0x1fa))[_0x22baa9(0x16c)](_0x22baa9(0x199))[_0x22baa9(0x18e)]();proxyEmit(_0x22baa9(0x150),_0x20f39e),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x2f567a=!![]){const _0x41b9b8=_0x2ed210;let _0x5d1967=dbPerformance['get'](_0x41b9b8(0x1fa))[_0x41b9b8(0x147)]({'date':config['startdate']})[_0x41b9b8(0x18e)]();config[_0x41b9b8(0x21b)]!=''&&!_0x5d1967&&(await setStartDatePerformance(config),_0x5d1967=dbPerformance[_0x41b9b8(0x216)]('data')[_0x41b9b8(0x147)]({'date':config[_0x41b9b8(0x1ea)]})[_0x41b9b8(0x18e)]());if(config[_0x41b9b8(0x21b)]==''||!_0x5d1967)return{};let _0x3a86ae=0x0,_0x2019df=0x0,_0x3f6ed7=0x0,_0x23a0cb=[],_0x32e2f9=0x0;config[_0x41b9b8(0x140)][_0x41b9b8(0x1d7)](_0x4fee55=>{const _0x47a9fe=_0x41b9b8;if(!_0x4fee55[_0x47a9fe(0x207)]){_0x23a0cb[_0x32e2f9]={'coin':_0x4fee55[_0x47a9fe(0x1e4)],'symbol':_0x4fee55[_0x47a9fe(0x1d5)],'number':_0x4fee55[_0x47a9fe(0x1ce)],'price':_0x4fee55['startprice']},_0x3a86ae+=_0x4fee55['startprice']*_0x4fee55[_0x47a9fe(0x1ce)];if(config['basecoin']==_0x47a9fe(0x1ab))_0x2019df+=_0x4fee55[_0x47a9fe(0x209)]*_0x4fee55[_0x47a9fe(0x1ce)]*_0x5d1967[_0x47a9fe(0x1dc)],_0x3f6ed7+=_0x4fee55[_0x47a9fe(0x209)]*_0x4fee55[_0x47a9fe(0x1ce)]*_0x5d1967[_0x47a9fe(0x19b)];else{if(config[_0x47a9fe(0x145)]==_0x47a9fe(0x152)||config[_0x47a9fe(0x145)]==_0x47a9fe(0x14d)||config[_0x47a9fe(0x145)]=='USDC')_0x2019df+=_0x4fee55['startprice']*_0x4fee55[_0x47a9fe(0x1ce)]*_0x5d1967[_0x47a9fe(0x1dc)]/_0x5d1967['usd'],_0x3f6ed7+=_0x4fee55[_0x47a9fe(0x209)]*_0x4fee55[_0x47a9fe(0x1ce)];else config['basecoin']==_0x47a9fe(0x1b5)&&(_0x2019df+=_0x4fee55[_0x47a9fe(0x209)]*_0x4fee55[_0x47a9fe(0x1ce)],_0x3f6ed7+=_0x4fee55[_0x47a9fe(0x209)]*_0x4fee55['startnumber']*_0x5d1967['usd']/_0x5d1967[_0x47a9fe(0x1dc)]);}_0x32e2f9++;}});let _0x39e904={'basecoin':_0x3a86ae,'eur':_0x2019df,'usd':_0x3f6ed7,'coins':_0x23a0cb};if(_0x2f567a)proxyEmit(_0x41b9b8(0x240),_0x39e904);return _0x39e904;}function headlessMode(_0x6c01ce){const _0x596148=_0x2ed210;let _0x516250=_0x6c01ce[_0x596148(0x140)],_0x30c922=_0x6c01ce[_0x596148(0x16d)],_0x402fb6=[];for(let _0x449cfa of _0x516250){if(_0x449cfa[_0x596148(0x1e4)]!=config[_0x596148(0x145)]){if(_0x449cfa[_0x596148(0x250)]/_0x449cfa[_0x596148(0x21d)]-0x1>=_0x30c922/0x64){if(_0x449cfa['valid'])_0x402fb6[_0x596148(0x1b8)](_0x449cfa);}else{if(_0x449cfa[_0x596148(0x250)]/_0x449cfa[_0x596148(0x21d)]-0x1<=-_0x30c922/0x64){if(_0x449cfa[_0x596148(0x17a)])_0x402fb6[_0x596148(0x1b8)](_0x449cfa);}}}}_0x402fb6[_0x596148(0x196)]>0x0&&placeOrder(_0x402fb6);}function symbolToCoin(_0x47618b){const _0x8737a0=_0x2ed210;let _0x32f641;if(_0x47618b[_0x8737a0(0x1d2)]('/'+config['basecoin']))_0x32f641=_0x47618b[_0x8737a0(0x21a)]('/'+config['basecoin'],'');if(_0x47618b[_0x8737a0(0x1d2)](config['basecoin']+'/'))_0x32f641=_0x47618b[_0x8737a0(0x21a)](config['basecoin']+'/','');return _0x32f641;}async function validateOrders(_0x45a2c2=0x0){const _0x5af5c3=_0x2ed210;let _0x5da416=[],_0x31a986=config[_0x5af5c3(0x202)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5af5c3(0x242)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x5af5c3(0x1d7)](_0x1d422c=>{const _0xe4f94=_0x5af5c3;let _0x11710b=previousCoins[_0xe4f94(0x147)](_0xbee804=>_0xbee804[_0xe4f94(0x1e4)]==symbolToCoin(_0x1d422c['symbol'])),_0x28e190=currentCoins[_0xe4f94(0x147)](_0x5bfd71=>_0x5bfd71[_0xe4f94(0x1e4)]==symbolToCoin(_0x1d422c[_0xe4f94(0x1d5)])),_0xb8ced4,_0x599013;_0x1d422c[_0xe4f94(0x254)]==_0xe4f94(0x179)&&!_0x1d422c[_0xe4f94(0x220)]||_0x1d422c[_0xe4f94(0x254)]==_0xe4f94(0x1c8)&&_0x1d422c['reverse']?(_0xb8ced4=_0x11710b[_0xe4f94(0x1d8)]+0.9*_0x1d422c[_0xe4f94(0x217)],_0x599013=_0x11710b[_0xe4f94(0x1d8)]+1.1*_0x1d422c['filled']):(_0xb8ced4=_0x11710b['number']-1.1*_0x1d422c[_0xe4f94(0x217)],_0x599013=_0x11710b[_0xe4f94(0x1d8)]-0.9*_0x1d422c[_0xe4f94(0x217)]);const _0x248f48=_0x1d422c[_0xe4f94(0x217)]!=0x0&&_0x28e190[_0xe4f94(0x1d8)]>=_0xb8ced4&&_0x28e190[_0xe4f94(0x1d8)]<=_0x599013;_0x5da416[_0xe4f94(0x1b8)](_0x248f48);if(_0x248f48&&config['ordertype']!='market'){if(_0x1d422c[_0xe4f94(0x220)])logHistory('order',_0xe4f94(0x1a4)+_0x1d422c[_0xe4f94(0x1d5)]+'\x20'+_0x1d422c[_0xe4f94(0x254)]+'\x20#'+formatResult(_0x1d422c[_0xe4f94(0x217)]/_0x1d422c['price'],0x8)+'\x20@'+formatResult(_0x1d422c[_0xe4f94(0x22c)],0x8));else logHistory(_0xe4f94(0x1c2),_0xe4f94(0x1a4)+_0x1d422c[_0xe4f94(0x1d5)]+'\x20'+_0x1d422c[_0xe4f94(0x254)]+'\x20#'+formatResult(_0x1d422c[_0xe4f94(0x217)],0x8)+'\x20@'+formatResult(_0x1d422c[_0xe4f94(0x22c)],0x8));}}),_0x5da416[_0x5af5c3(0x1d7)]((_0x5bc344,_0x50593e)=>{const _0x36f00a=_0x5af5c3;if(_0x5bc344)lastOrders[_0x36f00a(0x166)](_0x50593e,0x1);});if(_0x45a2c2<_0x31a986&&_0x5da416[_0x5af5c3(0x1d2)](![])){if(_0x45a2c2==0x0){config[_0x5af5c3(0x202)]==_0x5af5c3(0x20d)?logHistory(_0x5af5c3(0x231),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x5af5c3(0x231),_0x5af5c3(0x144));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x45a2c2);},0xa*0x3e8);}else{(_0x45a2c2==0x1||_0x45a2c2==Math[_0x5af5c3(0x206)](_0x31a986/0x2)||_0x45a2c2==_0x31a986-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x45a2c2);},validateOrderInterval);}}else{lockOrders=![];if(_0x45a2c2>0x0&&!_0x5da416[_0x5af5c3(0x1d2)](![]))config['ordertype']==_0x5af5c3(0x20d)?logHistory(_0x5af5c3(0x24a),_0x5af5c3(0x148)):logHistory(_0x5af5c3(0x24a),_0x5af5c3(0x232));else _0x45a2c2>0x0&&_0x5da416[_0x5af5c3(0x1d2)](![])&&(config[_0x5af5c3(0x202)]==_0x5af5c3(0x20d)?logHistory('success',_0x5af5c3(0x165)+Math[_0x5af5c3(0x206)](_0x31a986*validateOrderInterval/0xea60)+_0x5af5c3(0x213)):(lastOrders[_0x5af5c3(0x1d7)](async _0x11815d=>{const _0x382e2e=_0x5af5c3;try{const _0xa564f8=await exchange[_0x382e2e(0x201)](_0x11815d[_0x382e2e(0x234)],_0x11815d['symbol']);}catch(_0x1f51c2){if(_0x1f51c2[_0x382e2e(0x215)]()['includes'](_0x382e2e(0x15c))){}else await handleError(_0x1f51c2,_0x382e2e(0x1b7));}}),logHistory(_0x5af5c3(0x24a),_0x5af5c3(0x1d4)+Math[_0x5af5c3(0x206)](_0x31a986*validateOrderInterval/0xea60)+_0x5af5c3(0x213))));}}async function resetCoinResults(){const _0x232e18=_0x2ed210;dbCoinResults[_0x232e18(0x216)](_0x232e18(0x1df))[_0x232e18(0x212)]()[_0x232e18(0x259)]();let _0xf8790f=await getStartingBalances(![]);_0xf8790f[_0x232e18(0x1df)][_0x232e18(0x1d7)](_0x3f4d90=>{const _0x385814=_0x232e18,_0x159275=_0x3f4d90['symbol'][_0x385814(0x1d2)](config['basecoin']+'/');if(_0x3f4d90[_0x385814(0x1e4)]!=config[_0x385814(0x145)]){let _0x31010e={'coin':_0x3f4d90[_0x385814(0x1e4)],'number':_0x3f4d90[_0x385814(0x1d8)],'breakeven':_0x3f4d90['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x385814(0x216)]('coins')[_0x385814(0x1b8)](_0x31010e)[_0x385814(0x259)]();}});}async function updateCoinResults(_0x56dbeb){const _0x361e7b=_0x2ed210;let _0x30adbe,_0x502764,_0x1eeff5,_0x22f1f1,_0x4afbb7,_0xb37e67,_0x301f44=dbCoinResults[_0x361e7b(0x216)](_0x361e7b(0x1df))[_0x361e7b(0x147)]({'coin':_0x56dbeb['coin']})[_0x361e7b(0x18e)]();if(!_0x301f44)return;if(_0x56dbeb['fee']&&_0x56dbeb['fee'][_0x361e7b(0x24e)]==config[_0x361e7b(0x145)])_0x30adbe=_0x56dbeb[_0x361e7b(0x187)]['cost'];else{if(_0x56dbeb['fee']&&_0x56dbeb[_0x361e7b(0x187)]['currency']=='BNB')_0x30adbe=_0x56dbeb[_0x361e7b(0x187)]['cost']*global[_0x361e7b(0x151)]['BNB'+config[_0x361e7b(0x145)]];else _0x30adbe=0.001*_0x56dbeb[_0x361e7b(0x217)];}const _0x2a44ec=_0x56dbeb[_0x361e7b(0x1d5)][_0x361e7b(0x1d2)](config[_0x361e7b(0x145)]+'/');_0x2a44ec&&(_0xb37e67={'coin':_0x56dbeb[_0x361e7b(0x1e4)],'symbol':_0x56dbeb['symbol'],'filled':_0x56dbeb[_0x361e7b(0x217)]*_0x56dbeb[_0x361e7b(0x22c)],'side':_0x56dbeb['side']=='sell'?_0x361e7b(0x179):_0x361e7b(0x1c8),'price':0x1/_0x56dbeb[_0x361e7b(0x22c)]},_0x56dbeb={..._0xb37e67});_0x56dbeb[_0x361e7b(0x254)]==_0x361e7b(0x179)?_0x1eeff5=(_0x301f44[_0x361e7b(0x159)]*_0x301f44[_0x361e7b(0x1d8)]+_0x56dbeb[_0x361e7b(0x22c)]*_0x56dbeb[_0x361e7b(0x217)])/(_0x301f44[_0x361e7b(0x1d8)]+_0x56dbeb[_0x361e7b(0x217)]):_0x1eeff5=(_0x301f44[_0x361e7b(0x159)]*_0x301f44['number']-_0x56dbeb[_0x361e7b(0x22c)]*_0x56dbeb[_0x361e7b(0x217)])/(_0x301f44[_0x361e7b(0x1d8)]-_0x56dbeb['filled']);_0x56dbeb[_0x361e7b(0x254)]==_0x361e7b(0x179)?_0x22f1f1=_0x301f44['realized']:_0x22f1f1=_0x301f44[_0x361e7b(0x224)]+(_0x56dbeb['price']-_0x301f44['breakeven'])*_0x56dbeb[_0x361e7b(0x217)];_0x502764=_0x56dbeb[_0x361e7b(0x254)]==_0x361e7b(0x1c8)?_0x301f44[_0x361e7b(0x1d8)]-_0x56dbeb[_0x361e7b(0x217)]:_0x301f44[_0x361e7b(0x1d8)]+_0x56dbeb[_0x361e7b(0x217)],_0x4afbb7=(_0x56dbeb[_0x361e7b(0x22c)]-_0x1eeff5)*_0x502764;let _0x346e29={'coin':_0x56dbeb['coin'],'number':_0x502764,'breakeven':formatResult(_0x1eeff5,0x8),'realized':formatResult(_0x22f1f1,0x8),'unrealized':formatResult(_0x4afbb7,0x8),'fees':formatResult(_0x301f44[_0x361e7b(0x1ad)]+_0x30adbe,0x8),'sells':_0x56dbeb[_0x361e7b(0x254)]==_0x361e7b(0x1c8)?_0x301f44[_0x361e7b(0x16f)]+0x1:_0x301f44[_0x361e7b(0x16f)],'buys':_0x56dbeb[_0x361e7b(0x254)]==_0x361e7b(0x179)?_0x301f44[_0x361e7b(0x245)]+0x1:_0x301f44[_0x361e7b(0x245)]};dbCoinResults[_0x361e7b(0x216)]('coins')[_0x361e7b(0x147)]({'coin':_0x56dbeb[_0x361e7b(0x1e4)]})[_0x361e7b(0x1a3)](_0x346e29)[_0x361e7b(0x259)]();}async function placeOrder(_0x563051){const _0x34c9ae=_0x2ed210,_0x4a6c85=config[_0x34c9ae(0x202)]=='market'?'market':_0x34c9ae(0x155);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x34c9ae(0x1c5)](JSON[_0x34c9ae(0x17c)](currentCoins));for(const _0x339778 of _0x563051){let _0x51aa47,_0x8f99c6,_0x549448,_0x19adf5,_0x10b964,_0x3e6216=_0x339778[_0x34c9ae(0x1d5)];try{const _0x4b5b23=await exchange[_0x34c9ae(0x1cb)](_0x3e6216),_0x19ac94=_0x4b5b23[_0x3e6216];_0x51aa47=_0x19ac94['last'],_0x8f99c6=_0x19ac94['bid'],_0x549448=_0x19ac94[_0x34c9ae(0x143)];_0x339778['reverse']?(_0x19adf5=_0x339778[_0x34c9ae(0x254)]=='buy'?'sell':_0x34c9ae(0x179),_0x10b964=Math[_0x34c9ae(0x1cd)](_0x339778['trade'])/_0x51aa47):(_0x19adf5=_0x339778[_0x34c9ae(0x254)],_0x10b964=Math[_0x34c9ae(0x1cd)](_0x339778[_0x34c9ae(0x154)]));_0x4a6c85==_0x34c9ae(0x155)&&(config[_0x34c9ae(0x202)]==_0x34c9ae(0x19f)&&(_0x51aa47=_0x19adf5==_0x34c9ae(0x179)?_0x8f99c6:_0x549448),config[_0x34c9ae(0x202)]=='limit-low'&&(_0x51aa47=_0x19adf5=='buy'?_0x549448:_0x8f99c6));_0x10b964=formatResult(_0x10b964,0x8),_0x51aa47=formatResult(_0x51aa47,0x8);const _0xe6b3d3=await exchange[_0x34c9ae(0x1fc)](_0x3e6216,_0x4a6c85,_0x19adf5,_0x10b964,_0x51aa47);lastOrders[_0x34c9ae(0x1b8)]({'orderId':_0xe6b3d3['id'],'symbol':_0x3e6216,'side':_0x19adf5,'reverse':_0x339778['reverse'],'amount':_0x339778[_0x34c9ae(0x220)]?_0xe6b3d3['amount']*_0xe6b3d3[_0x34c9ae(0x22c)]:_0xe6b3d3[_0x34c9ae(0x176)],'filled':_0x339778['reverse']?_0xe6b3d3[_0x34c9ae(0x217)]*_0xe6b3d3['price']:_0xe6b3d3['filled'],'price':_0xe6b3d3[_0x34c9ae(0x22c)]});const _0x41f345=_0x19adf5==_0x34c9ae(0x1c8)?config[_0x34c9ae(0x194)]?String[_0x34c9ae(0x183)]('0x'+config[_0x34c9ae(0x194)])+'\x20':'':config['emojibuy']?String[_0x34c9ae(0x183)]('0x'+config[_0x34c9ae(0x19a)])+'\x20':'',_0x1314a3=_0x4a6c85==_0x34c9ae(0x20d)?_0x34c9ae(0x1be):config['ordertype']==_0x34c9ae(0x19f)?'Limit\x20(high-margin)':_0x34c9ae(0x1c4);if(_0x4a6c85==_0x34c9ae(0x20d))logHistory(_0x34c9ae(0x1c2),''+_0x41f345+_0x1314a3+_0x34c9ae(0x1ef)+_0x3e6216+'\x20'+_0x19adf5+'\x20#'+formatResult(_0xe6b3d3[_0x34c9ae(0x217)],0x8)+'\x20@'+formatResult(_0xe6b3d3[_0x34c9ae(0x22c)],0x8));else logHistory(_0x34c9ae(0x1c2),''+_0x41f345+_0x1314a3+'\x20order:\x20'+_0x3e6216+'\x20'+_0x19adf5+'\x20#'+formatResult(_0xe6b3d3['amount'],0x8)+'\x20@'+formatResult(_0xe6b3d3['price'],0x8));_0xe6b3d3[_0x34c9ae(0x1e4)]=_0x339778['coin'],await updateCoinResults(_0xe6b3d3);if(config[_0x34c9ae(0x1f2)]!=0x0){let _0x538424=null;if(cooldownTracker['length']==config[_0x34c9ae(0x1f2)]-0x1)_0x538424=cooldownTracker[_0x34c9ae(0x1b0)]();const _0x23a30a=getTimeStamp();cooldownTracker[_0x34c9ae(0x1b8)](_0x23a30a);if(_0x538424){const _0x58071d=fns['differenceInSeconds'](new Date(_0x23a30a),new Date(_0x538424));_0x58071d<cooldownInterval&&(logHistory(_0x34c9ae(0x231),_0x34c9ae(0x23e)+config[_0x34c9ae(0x1f2)]+_0x34c9ae(0x1de)+cooldownInterval/0x3c+_0x34c9ae(0x15d)+cooldownPeriod/(0xe10*0x3e8)+_0x34c9ae(0x233)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x472a3b){if(_0x472a3b[_0x34c9ae(0x215)]()[_0x34c9ae(0x1d2)](_0x34c9ae(0x177)))logHistory('error',_0x34c9ae(0x18d)+_0x3e6216);else{if(_0x472a3b[_0x34c9ae(0x215)]()[_0x34c9ae(0x1d2)](_0x34c9ae(0x141)))logHistory('error',_0x34c9ae(0x18f)+_0x3e6216);else await handleError(_0x472a3b,_0x34c9ae(0x219));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x34c9ae(0x229)]&&(config[_0x34c9ae(0x202)]=='market'?logHistory(_0x34c9ae(0x231),_0x34c9ae(0x181)):logHistory(_0x34c9ae(0x231),_0x34c9ae(0x168)));else coolingDown&&(!config['headless']&&logHistory(_0x34c9ae(0x231),_0x34c9ae(0x24d)));}}function logHistory(_0x3b42ef,_0x38125a,_0x2e50b1=''){const _0x59f1bb=_0x2ed210;let _0x55b06d={'time':getTimeStamp(),'type':_0x3b42ef,'event':_0x38125a,'botname':config[_0x59f1bb(0x238)],'showname':config['showname']};dbLogs[_0x59f1bb(0x216)](_0x59f1bb(0x241))[_0x59f1bb(0x1b8)](_0x55b06d)[_0x59f1bb(0x259)]();if(_0x2e50b1=='')_0x2e50b1=_0x38125a;proxyEmit(_0x59f1bb(0x1c0),{'log':_0x55b06d,'summary':_0x2e50b1}),process[_0x59f1bb(0x1a9)]({'telegram':_0x55b06d}),logging(''+_0x55b06d[_0x59f1bb(0x1c0)]);}function emitHistory(_0x3330e0={}){const _0x326aa4=_0x2ed210;Object[_0x326aa4(0x186)](_0x3330e0)[_0x326aa4(0x196)]==0x0&&(_0x3330e0={'type':[_0x326aa4(0x1c2),_0x326aa4(0x1c0)],'event':'','page':0x1});if(_0x3330e0[_0x326aa4(0x223)]['includes'](_0x326aa4(0x1c0)))_0x3330e0[_0x326aa4(0x223)]['splice'](_0x3330e0[_0x326aa4(0x223)][_0x326aa4(0x21e)](_0x326aa4(0x1c0)),0x1,'error','success');if(dbLogs['has'](_0x326aa4(0x241))[_0x326aa4(0x18e)]()){let _0x508e70=dbLogs['get'](_0x326aa4(0x241))[_0x326aa4(0x17b)](_0x508db8=>{const _0x4c77b9=_0x326aa4;if(_0x3330e0[_0x4c77b9(0x223)]['length']==0x0)return![];else return _0x3330e0[_0x4c77b9(0x223)][_0x4c77b9(0x1d2)](_0x508db8[_0x4c77b9(0x223)]);})[_0x326aa4(0x17b)](_0x48f7d0=>{const _0xc29ed2=_0x326aa4;if(_0x3330e0[_0xc29ed2(0x1c0)]=='')return!![];else return _0x48f7d0[_0xc29ed2(0x1c0)][_0xc29ed2(0x25c)]()['includes'](_0x3330e0[_0xc29ed2(0x1c0)][_0xc29ed2(0x25c)]());})['sortBy']('time'),_0x513c24=_0x508e70[_0x326aa4(0x18e)]()[_0x326aa4(0x196)];_0x508e70=_0x508e70[_0x326aa4(0x220)]()[_0x326aa4(0x239)]((_0x3330e0[_0x326aa4(0x1f3)]-0x1)*logPageSize,_0x3330e0[_0x326aa4(0x1f3)]*logPageSize-0x1)[_0x326aa4(0x220)]()[_0x326aa4(0x18e)](),proxyEmit(_0x326aa4(0x222),{'logs':_0x508e70,'total':_0x513c24});}else proxyEmit(_0x326aa4(0x222),{'logs':[],'total':0x0});}async function pauseBot(_0x1f4367){const _0x13284b=_0x2ed210,_0x1fd4e7=new Date()[_0x13284b(0x205)]();if(!lastBotPause)lastBotPause=new Date()[_0x13284b(0x205)](),consecutivePauses=0x1;else{if(_0x1fd4e7-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':_0x13284b(0x227)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x13284b(0x205)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x13284b(0x231),_0x13284b(0x1fd)+consecutivePauses+')'),await sleep(_0x1f4367),botPaused=![],reset();}}async function handleError(_0x1c2d39,_0xc9435,_0x5a2c3b=''){const _0x42a12d=_0x2ed210;if(_0x1c2d39[_0x42a12d(0x215)]()['includes'](_0x42a12d(0x221)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x22f)),await pauseBot(pauseBotInterval);else{if(_0x1c2d39['toString']()[_0x42a12d(0x1d2)](_0x42a12d(0x22d)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x19e)),await pauseBot(pauseBotInterval);else{if(_0x1c2d39[_0x42a12d(0x215)]()[_0x42a12d(0x1d2)](_0x42a12d(0x1d0)))logHistory(_0x42a12d(0x231),_0xc9435+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x1c2d39[_0x42a12d(0x215)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x42a12d(0x231),_0xc9435+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x42a12d(0x231),_0x42a12d(0x1ca)),process[_0x42a12d(0x1a9)]({'stop':_0x42a12d(0x16a)});else{if(_0x1c2d39[_0x42a12d(0x215)]()[_0x42a12d(0x1d2)](_0x42a12d(0x1e6)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x1da)),logHistory(_0x42a12d(0x231),_0x42a12d(0x1ca)),process[_0x42a12d(0x1a9)]({'stop':_0x42a12d(0x16a)});else{if(_0x1c2d39[_0x42a12d(0x215)]()['includes'](_0x42a12d(0x15f)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x1f9)),logHistory(_0x42a12d(0x231),_0x42a12d(0x1ca)),process['send']({'stop':_0x42a12d(0x16a)});else{if(_0x1c2d39[_0x42a12d(0x215)]()['includes'](_0x42a12d(0x156)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x16b)),logHistory(_0x42a12d(0x231),_0x42a12d(0x1ca)),process[_0x42a12d(0x1a9)]({'stop':_0x42a12d(0x16a)});else{if(_0x1c2d39[_0x42a12d(0x215)]()[_0x42a12d(0x1d2)](_0x42a12d(0x20b)))logHistory(_0x42a12d(0x231),_0xc9435+_0x42a12d(0x1ac)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x42a12d(0x227)});else _0x1c2d39[_0x42a12d(0x215)]()['includes'](_0x42a12d(0x19c))?logHistory(_0x42a12d(0x231),_0xc9435+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory('error',_0xc9435+_0x42a12d(0x19d)),logging(_0xc9435+_0x42a12d(0x198),_0x1c2d39),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x804cd2,_0xa603cd){const _0x292902=_0x2ed210;return parseFloat(_0x804cd2[_0x292902(0x1ed)](_0xa603cd));}function logging(_0xae5216,_0x345570=''){const _0x346fde=_0x2ed210;if(config[_0x346fde(0x236)])console['log'](getTimeStamp()+':\x20'+config[_0x346fde(0x238)]+_0x346fde(0x193)+_0xae5216,_0x345570);else console['log'](getTimeStamp()+_0x346fde(0x178)+botID+_0x346fde(0x193)+_0xae5216,_0x345570);}function getServerTime(){const _0x1557dc=_0x2ed210,_0x4a8535=new Date();return _0x4a8535[_0x1557dc(0x1e2)]()+'/'+(_0x4a8535[_0x1557dc(0x25b)]()+0x1)[_0x1557dc(0x215)]()[_0x1557dc(0x163)](0x2,'0')+'/'+_0x4a8535[_0x1557dc(0x23b)]()[_0x1557dc(0x215)]()[_0x1557dc(0x163)](0x2,'0')+'\x20'+_0x4a8535[_0x1557dc(0x14b)]()[_0x1557dc(0x215)]()[_0x1557dc(0x163)](0x2,'0')+':'+_0x4a8535[_0x1557dc(0x175)]()['toString']()['padStart'](0x2,'0')+':'+_0x4a8535[_0x1557dc(0x153)]()[_0x1557dc(0x215)]()[_0x1557dc(0x163)](0x2,'0');}function getTimeStamp(){const _0x32781b=_0x2ed210,_0x5dd318=shiftedTime();return _0x5dd318[_0x32781b(0x1e2)]()+'/'+(_0x5dd318[_0x32781b(0x25b)]()+0x1)[_0x32781b(0x215)]()[_0x32781b(0x163)](0x2,'0')+'/'+_0x5dd318[_0x32781b(0x23b)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5dd318[_0x32781b(0x14b)]()[_0x32781b(0x215)]()[_0x32781b(0x163)](0x2,'0')+':'+_0x5dd318[_0x32781b(0x175)]()[_0x32781b(0x215)]()[_0x32781b(0x163)](0x2,'0')+':'+_0x5dd318['getSeconds']()['toString']()[_0x32781b(0x163)](0x2,'0');}function getDate(){const _0x15338c=_0x2ed210,_0x3e53e2=shiftedTime();return _0x3e53e2['getFullYear']()+'/'+(_0x3e53e2[_0x15338c(0x25b)]()+0x1)[_0x15338c(0x215)]()[_0x15338c(0x163)](0x2,'0')+'/'+_0x3e53e2[_0x15338c(0x23b)]()[_0x15338c(0x215)]()[_0x15338c(0x163)](0x2,'0');}function getHour(){const _0x216570=_0x2ed210,_0x123e9a=shiftedTime();return _0x123e9a['getHours']()['toString']()[_0x216570(0x163)](0x2,'0');}function _0x4032(_0x5beeff,_0xa3a84e){const _0x5e1777=_0x52f2();return _0x4032=function(_0x3f8149,_0x30f14c){_0x3f8149=_0x3f8149-0x13f;let _0x52f21f=_0x5e1777[_0x3f8149];return _0x52f21f;},_0x4032(_0x5beeff,_0xa3a84e);}function sleep(_0x436b0e){return new Promise(_0x1c5f56=>setTimeout(_0x1c5f56,_0x436b0e));}function shiftedTime(){const _0xc62dbf=_0x2ed210,_0x5dfe95=new Date();let _0x51f9a0=_0x5dfe95;if(config&&config[_0xc62dbf(0x142)]!==0x0)_0x51f9a0=fns['add'](_0x5dfe95,{'hours':config[_0xc62dbf(0x142)]});return _0x51f9a0;}