const _0xdb28c7=_0x292a;(function(_0x7bbcb1,_0x422653){const _0x5d7b32=_0x292a,_0x17f61d=_0x7bbcb1();while(!![]){try{const _0x25ba18=-parseInt(_0x5d7b32(0x210))/0x1+-parseInt(_0x5d7b32(0x1ec))/0x2*(parseInt(_0x5d7b32(0x29c))/0x3)+parseInt(_0x5d7b32(0x214))/0x4*(-parseInt(_0x5d7b32(0x1bc))/0x5)+parseInt(_0x5d7b32(0x211))/0x6+parseInt(_0x5d7b32(0x23f))/0x7+parseInt(_0x5d7b32(0x2ba))/0x8+parseInt(_0x5d7b32(0x318))/0x9*(parseInt(_0x5d7b32(0x305))/0xa);if(_0x25ba18===_0x422653)break;else _0x17f61d['push'](_0x17f61d['shift']());}catch(_0x274ef9){_0x17f61d['push'](_0x17f61d['shift']());}}}(_0x11bc,0xad5c3));const _0x48fe58=function(){let _0x33cf10=!![];return function(_0x1e203d,_0x479199){const _0xaf904e=_0x33cf10?function(){if(_0x479199){const _0x359e00=_0x479199['apply'](_0x1e203d,arguments);return _0x479199=null,_0x359e00;}}:function(){};return _0x33cf10=![],_0xaf904e;};}(),_0x1e374c=_0x48fe58(this,function(){const _0x19887c=_0x292a;return _0x1e374c['toString']()[_0x19887c(0x29b)](_0x19887c(0x31f))[_0x19887c(0x1bb)]()[_0x19887c(0x265)](_0x1e374c)[_0x19887c(0x29b)](_0x19887c(0x31f));});_0x1e374c();'use strict';const ccxt=require(_0xdb28c7(0x2aa)),low=require(_0xdb28c7(0x30c)),FileSync=require(_0xdb28c7(0x27b)),fs=require('fs'),fns=require(_0xdb28c7(0x2d2)),Crypt=require(_0xdb28c7(0x2cb))[_0xdb28c7(0x275)],util=require(_0xdb28c7(0x1b2)),argv=require(_0xdb28c7(0x1be))(process[_0xdb28c7(0x24d)]['slice'](0x2))['argv'],path=require('path');let exchange;global[_0xdb28c7(0x307)]={},global[_0xdb28c7(0x2b4)]={};const usdBasecoins=[_0xdb28c7(0x204),'BUSD',_0xdb28c7(0x232),'USDT',_0xdb28c7(0x282),_0xdb28c7(0x1bf)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xdb28c7(0x251)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xdb28c7(0x28b)+pauseBotInterval/0xea60+_0xdb28c7(0x21b),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xdb28c7(0x1f3))[_0xdb28c7(0x1e7)],botID=process[_0xdb28c7(0x24d)][0x2]||_0xdb28c7(0x296),pattern=/^[0-9]{3}$/;!pattern[_0xdb28c7(0x2a6)](botID)&&(console[_0xdb28c7(0x2e0)](_0xdb28c7(0x300)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0xdb28c7(0x24d)][0x3]||'',configpath=userID?_0xdb28c7(0x263)+userID+'/':_0xdb28c7(0x263),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0xdb28c7(0x1eb)](configpath);!fs[_0xdb28c7(0x2f9)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+'bot-'+botID+_0xdb28c7(0x1f0),logfile=configpath+'bot-'+botID+_0xdb28c7(0x294),performancefile=configpath+_0xdb28c7(0x195)+botID+_0xdb28c7(0x327),coinresultsfile=configpath+_0xdb28c7(0x195)+botID+_0xdb28c7(0x242),settingsfile=configpath+_0xdb28c7(0x304),securefile=configpath+_0xdb28c7(0x1d8),configbackuppath=configpath+_0xdb28c7(0x31a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xdb28c7(0x1d1)]({'logs':[],'version':serverversion})[_0xdb28c7(0x227)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0xdb28c7(0x227)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0xdb28c7(0x227)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xdb28c7(0x1d1)]({'coins':[],'version':serverversion})[_0xdb28c7(0x227)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xdb28c7(0x2ee),'rsaStandard':_0xdb28c7(0x2d9)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5d00a2=>{const _0x5e1e06=_0xdb28c7;console[_0x5e1e06(0x2e0)](_0x5d00a2);},'simple':_0x447055=>{const _0x419070=_0xdb28c7;console['log'](_0x447055),loggerfile[_0x419070(0x227)](util[_0x419070(0x1e9)](_0x447055)+'\x0a');},'full':async(_0x52f851,_0x369417='')=>{const _0x5c6963=_0xdb28c7;let _0x443f92;if(config['showname'])_0x443f92=getTimeStamp()+':\x20'+config['botname']+_0x5c6963(0x21a)+_0x52f851;else _0x443f92=getTimeStamp()+':\x20Bot\x20'+botID+_0x5c6963(0x21a)+_0x52f851;console[_0x5c6963(0x2e0)](_0x443f92),loggerfile[_0x5c6963(0x227)](util[_0x5c6963(0x1e9)](_0x443f92)+'\x0a'),_0x369417&&(console[_0x5c6963(0x2e0)](_0x369417),loggerfile['write'](util[_0x5c6963(0x1e9)](_0x369417)+'\x0a'));},'debug':async(_0x2497f9,_0x1aea50='')=>{const _0x203894=_0xdb28c7;let _0x4f05e6;if(config['showname'])_0x4f05e6=getTimeStamp()+':\x20'+config[_0x203894(0x249)]+'\x20>\x20[DEBUG]\x20'+_0x2497f9;else _0x4f05e6=getTimeStamp()+_0x203894(0x1c9)+botID+_0x203894(0x2f4)+_0x2497f9;if(debugging)console[_0x203894(0x2e0)](_0x4f05e6);loggerfile['write'](util[_0x203894(0x1e9)](_0x4f05e6)+'\x0a');if(_0x1aea50){if(debugging)console[_0x203894(0x2e0)](_0x1aea50);loggerfile[_0x203894(0x227)](util[_0x203894(0x1e9)](_0x1aea50)+'\x0a');}}};process['on']('uncaughtException',function(_0x31b196){const _0x42d4c5=_0xdb28c7;logHistory(_0x42d4c5(0x2d6),_0x42d4c5(0x29d)),logger[_0x42d4c5(0x30d)]('Uncaught\x20Exception:',_0x31b196);});settings[_0xdb28c7(0x27f)]!=config[_0xdb28c7(0x27f)]&&updateTimeshift(settings['timeshift']);settings['onepagemode']!=config[_0xdb28c7(0x1b5)]&&updateOnepagemode(settings[_0xdb28c7(0x1b5)]);process[_0xdb28c7(0x248)]({'started':_0xdb28c7(0x27d)},_0x2dc4ca=>{}),initializeProcessListeners();function proxyEmit(_0x2a7efe,_0x423dd0=null){const _0x108cb3=_0xdb28c7;process[_0x108cb3(0x248)]({'function':_0x2a7efe,'args':_0x423dd0},_0x27f971=>{});}function initializeProcessListeners(){const _0xea3ed6=_0xdb28c7;process['on'](_0xea3ed6(0x2d3),_0x452c89=>{const _0x43ea0b=_0xea3ed6;switch(Object['keys'](_0x452c89)[0x0]){case _0x43ea0b(0x27f):_0x452c89[_0x43ea0b(0x27f)]!=undefined&&(settings[_0x43ea0b(0x27f)]=_0x452c89[_0x43ea0b(0x27f)],updateTimeshift(settings[_0x43ea0b(0x27f)]));break;case _0x43ea0b(0x1b5):_0x452c89[_0x43ea0b(0x1b5)]!=undefined&&(settings[_0x43ea0b(0x1b5)]=_0x452c89[_0x43ea0b(0x1b5)],updateOnepagemode(settings[_0x43ea0b(0x1b5)]));break;case _0x43ea0b(0x1ca):_0x452c89[_0x43ea0b(0x1ca)]!=undefined&&(bots=JSON[_0x43ea0b(0x1c1)](_0x452c89[_0x43ea0b(0x1ca)]),proxyEmit(_0x43ea0b(0x1ca),bots));break;case _0x43ea0b(0x1a7):switch(_0x452c89[_0x43ea0b(0x1a7)]){case _0x43ea0b(0x320):initclient();break;case _0x43ea0b(0x28e):toggleBotMode();break;case _0x43ea0b(0x24a):emitHistory(_0x452c89['args']);break;case _0x43ea0b(0x1e1):deleteHistoryAlerts(_0x452c89[_0x43ea0b(0x1b3)]);break;case _0x43ea0b(0x2ad):getPortfolio(_0x452c89[_0x43ea0b(0x1b3)]);break;case'storeConfiguration':storeConfiguration(_0x452c89[_0x43ea0b(0x1b3)]);break;case _0x43ea0b(0x284):storeHeadless(_0x452c89[_0x43ea0b(0x1b3)]);break;case'storeFiat':storeFiat(_0x452c89[_0x43ea0b(0x1b3)]);break;case _0x43ea0b(0x2fb):resetHistory();break;case _0x43ea0b(0x228):getStartingBalances(getNormalizedPerformance());break;case _0x43ea0b(0x260):placeOrder(_0x452c89[_0x43ea0b(0x1b3)]);break;case'cancelLoading':cancelLoading();break;case _0x43ea0b(0x272):showConfig();break;case _0x43ea0b(0x289):sendMetricsTelegram();break;case _0x43ea0b(0x194):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x5f0966=![]){const _0x106ac1=_0xdb28c7;logger[_0x106ac1(0x30d)](_0x106ac1(0x2e9)+(_0x5f0966?_0x106ac1(0x224):_0x106ac1(0x2ab))+_0x106ac1(0x1b6)+config[_0x106ac1(0x2a0)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x5f0966)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x106ac1(0x1f1)]!=''&&config[_0x106ac1(0x1f1)]!=_0x106ac1(0x322)){loadingProgress=0x0;if(_0x5f0966){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2ad449){handleErrorNoStop(_0x2ad449,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x1b2603=await getCoins();[currentCoins,currentCoinsAll]=_0x1b2603,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x106ac1(0x2be)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x106ac1(0x2c4)]==0x0&&allOpenOrders[_0x106ac1(0x2c4)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x1374c1=_0xdb28c7;exchangeStopped=!![];try{await exchange['close']();}catch(_0x38d95b){await handleError(_0x38d95b,_0x1374c1(0x252));}}async function reloadExchange(){const _0x3aa11b=_0xdb28c7;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x3aa11b(0x1af)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x32844d=config[_0xdb28c7(0x2a0)],_0x3c55b2=config['apiKey'],_0x4784d9=config[_0xdb28c7(0x270)],_0x5bddcd=config['apiPassword']){const _0x241089=_0xdb28c7;exchange&&await stopExchange();!supportedExchanges()[_0x241089(0x237)](_0x32844d)&&(logHistory(_0x241089(0x2d6),_0x241089(0x19c)+_0x32844d+_0x241089(0x25c)),killBot());const _0x5c65cb=ccxt[_0x241089(0x1e4)][_0x32844d[_0x241089(0x246)]()];exchange=new _0x5c65cb({'apiKey':_0x3c55b2,'secret':_0x4784d9,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x241089(0x207)}});if(_0x5bddcd)exchange[_0x241089(0x268)]=_0x5bddcd;}function setStableCoins(){const _0xfbcdf7=_0xdb28c7;let _0x1be1ae=config[_0xfbcdf7(0x2fc)]==_0xfbcdf7(0x306)?_0xfbcdf7(0x306):_0xfbcdf7(0x20c),_0x567263=!allSymbols[_0xfbcdf7(0x237)](_0x1be1ae+'/USD')?_0xfbcdf7(0x2e4):_0xfbcdf7(0x204),_0x34d004=!allSymbols['includes'](_0x1be1ae+'/EUR')?_0x567263:_0xfbcdf7(0x1ea);stablecoins={'eur':{'coin':''+_0x1be1ae+_0x34d004,'symbol':_0x1be1ae+'/'+_0x34d004},'usd':{'coin':''+_0x1be1ae+_0x567263,'symbol':_0x1be1ae+'/'+_0x567263}};}async function initwsCcxt(){const _0xb8f0f2=_0xdb28c7;initCycle++;const _0x43b043=initCycle;let _0x17f43a=[];config['portfolio'][_0xb8f0f2(0x26d)](_0x239c42=>{const _0x38e18a=_0xb8f0f2;if(!_0x239c42[_0x38e18a(0x2c7)]&&_0x239c42['coin']!=config[_0x38e18a(0x2fc)])_0x17f43a['push'](_0x239c42[_0x38e18a(0x2ce)]);});if(!_0x17f43a[_0xb8f0f2(0x237)](stablecoins['eur'][_0xb8f0f2(0x2ce)]))_0x17f43a[_0xb8f0f2(0x2b6)](stablecoins[_0xb8f0f2(0x1ff)][_0xb8f0f2(0x2ce)]);if(!_0x17f43a[_0xb8f0f2(0x237)](stablecoins[_0xb8f0f2(0x26e)]['symbol']))_0x17f43a[_0xb8f0f2(0x2b6)](stablecoins[_0xb8f0f2(0x26e)][_0xb8f0f2(0x2ce)]);if(config[_0xb8f0f2(0x2a0)][_0xb8f0f2(0x2f6)]('Binance')){if(!_0x17f43a[_0xb8f0f2(0x237)](_0xb8f0f2(0x1cb)+config[_0xb8f0f2(0x2fc)]))_0x17f43a[_0xb8f0f2(0x2b6)](_0xb8f0f2(0x1cb)+config[_0xb8f0f2(0x2fc)]);}loadCoins(_0x17f43a),_0x17f43a=validateSymbols(_0x17f43a);const _0xf03b4f=async _0x51ae9d=>{const _0x509703=_0xb8f0f2;let _0x35d1ff;try{const _0x2ce67d=await getTickers(_0x51ae9d);Object[_0x509703(0x21e)](_0x2ce67d)[_0x509703(0x26d)](_0x5024e8=>{const _0x41f15b=_0x509703;_0x35d1ff=_0x5024e8[0x1]['symbol'],global['ticker'][noslash(_0x35d1ff)]=_0x5024e8[0x1][_0x41f15b(0x197)],global['change'][_0x35d1ff]=_0x5024e8[0x1]['percentage'];});}catch(_0x294eba){await handleError(_0x294eba,_0x509703(0x196),_0x35d1ff);}},_0x5d5a60=async _0x3a09ef=>{const _0x4f9b3d=_0xb8f0f2;while(initCycle==_0x43b043){if(!botPaused)try{const _0x48dba6=await exchange[_0x4f9b3d(0x2f0)](_0x3a09ef);global['ticker'][noslash(_0x48dba6[0x0][_0x4f9b3d(0x2ce)])]=_0x48dba6[0x0][_0x4f9b3d(0x1da)],await sleep(0x3e8);}catch(_0x339720){if(!exchangeStopped)await handleError(_0x339720,'watchTrades()',_0x3a09ef);}else await sleep(0x64);}},_0x37e0b9=async _0x38c7ce=>{const _0x507ca5=_0xb8f0f2;while(initCycle==_0x43b043){if(!botPaused){let _0x151a2;try{await sleep(0x3c*0x3e8);const _0x12808f=await getTickers(_0x38c7ce);Object[_0x507ca5(0x21e)](_0x12808f)[_0x507ca5(0x26d)](_0x2e2b55=>{const _0x49a601=_0x507ca5;_0x151a2=_0x2e2b55[0x1][_0x49a601(0x2ce)],global[_0x49a601(0x2b4)][_0x151a2]=_0x2e2b55[0x1]['percentage'];});}catch(_0x3dfb87){if(!exchangeStopped)await handleError(_0x3dfb87,_0x507ca5(0x2e3),_0x151a2);}}else await sleep(0x64);}},_0x27d989=async _0x23aede=>{const _0x98945d=_0xb8f0f2;while(initCycle==_0x43b043){if(!botPaused)try{const _0x5cb35d=await exchange[_0x98945d(0x201)](_0x23aede);initCycle==_0x43b043&&_0x5cb35d[_0x98945d(0x26d)](_0x45fb45=>{updateNumberCoinsCcxt(_0x45fb45);});}catch(_0xce0dee){if(!exchangeStopped)await handleError(_0xce0dee,_0x98945d(0x25a));}else await sleep(0x64);}};_0xf03b4f(_0x17f43a),_0x37e0b9(_0x17f43a),_0x17f43a[_0xb8f0f2(0x26d)](_0x4edfc9=>{_0x5d5a60(_0x4edfc9),_0x27d989(_0x4edfc9);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x536922){const _0x2171e8=_0xdb28c7;let _0x23d4be={};try{if(config[_0x2171e8(0x2a0)]!=_0x2171e8(0x247))_0x23d4be=await exchange[_0x2171e8(0x1df)](_0x536922);else for(const _0xcf6b7d of _0x536922){const _0x5c5df7=await exchange[_0x2171e8(0x2e6)](_0xcf6b7d);_0x23d4be[_0xcf6b7d]=_0x5c5df7;}return _0x23d4be;}catch(_0x4fe635){throw _0x4fe635;}}async function watchTransactions(){const _0x2ead25=_0xdb28c7;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1d866d=await getCoins(),[_0x10616d,_0x1d6648]=_0x1d866d;let _0x219783=[];currentCoins['forEach'](_0x477686=>{const _0x678e3f=_0x292a,_0x30c562=_0x10616d['find'](_0x358380=>_0x358380[_0x678e3f(0x1f5)]==_0x477686[_0x678e3f(0x1f5)]);if(_0x30c562){if(_0x477686[_0x678e3f(0x22d)]!=_0x30c562['number']){let _0x1b032b;if(_0x477686[_0x678e3f(0x1f5)]!=config[_0x678e3f(0x2fc)]){const _0x4da8d4=global[_0x678e3f(0x307)][noslash(_0x477686[_0x678e3f(0x2ce)])];_0x1b032b=_0x477686[_0x678e3f(0x236)]?0x1/_0x4da8d4:_0x4da8d4;}else _0x1b032b=0x1;_0x219783[_0x678e3f(0x2b6)]({'coin':_0x477686[_0x678e3f(0x1f5)],'symbol':_0x477686[_0x678e3f(0x2ce)],'price':_0x1b032b,'number':Number(formatResult(_0x30c562[_0x678e3f(0x22d)]-_0x477686[_0x678e3f(0x22d)],0x8)),'basecoinvalue':_0x1b032b*(_0x30c562[_0x678e3f(0x22d)]-_0x477686[_0x678e3f(0x22d)])});}}});if(_0x219783['length']==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x2ead25(0x30d)](_0x2ead25(0x1e5)+_0x219783[0x0][_0x2ead25(0x226)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x2ead25(0x297)]);if(lastFees[_0x2ead25(0x297)]==0x0||Math['abs'](_0x219783[0x0][_0x2ead25(0x226)])>lastFees[_0x2ead25(0x297)]){delete _0x219783[0x0][_0x2ead25(0x2ce)],delete _0x219783[0x0]['basecoinvalue'];let _0x2a0bad=[],_0x54ec70=[...config[_0x2ead25(0x1b4)]]||[],_0x9846bd=config[_0x2ead25(0x1b4)];_0x54ec70[_0x2ead25(0x243)]((_0xa0b4ef,_0x4c7c1c)=>_0xa0b4ef[_0x2ead25(0x1f4)]>_0x4c7c1c[_0x2ead25(0x1f4)]?-0x1:_0x4c7c1c['date']>_0xa0b4ef[_0x2ead25(0x1f4)]?0x1:0x0);const _0x5148f3=getDate();if(_0x54ec70[0x0]){const _0x3d9d66=fns[_0x2ead25(0x1c1)](_0x54ec70[0x0]['date'],'yyyy/MM/dd',new Date()),_0xa77242=fns['parse'](_0x5148f3,'yyyy/MM/dd',new Date());if(fns[_0x2ead25(0x254)](_0x3d9d66,_0xa77242)){_0x2a0bad=_0x54ec70[0x0]['changes'];const _0x3844ea=_0x2a0bad['find'](_0x12c197=>_0x12c197[_0x2ead25(0x1f5)]==_0x219783[0x0]['coin']);_0x3844ea?(_0x3844ea['number']+=_0x219783[0x0][_0x2ead25(0x22d)],_0x3844ea[_0x2ead25(0x22d)]==0x0&&(_0x2a0bad=_0x2a0bad['filter'](_0x50a88b=>{const _0x1fc62c=_0x2ead25;return _0x50a88b[_0x1fc62c(0x1f5)]!=_0x219783[0x0][_0x1fc62c(0x1f5)];}))):_0x2a0bad['push'](_0x219783[0x0]);const _0x1568b1=_0x9846bd[_0x2ead25(0x2a5)](_0x21f651=>_0x21f651[_0x2ead25(0x1f4)]==_0x5148f3);_0x1568b1[_0x2ead25(0x18e)]=_0x2a0bad;}else _0x9846bd[_0x2ead25(0x2b6)]({'date':_0x5148f3,'changes':[_0x219783[0x0]]});}const _0x52ea9a=_0x9846bd['find'](_0x368288=>_0x368288[_0x2ead25(0x1f4)]==_0x5148f3);if(_0x52ea9a){let _0x26bb4a=!![];_0x52ea9a[_0x2ead25(0x18e)][_0x2ead25(0x26d)](_0x27d15d=>{if(_0x27d15d['number']!=0x0)_0x26bb4a=![];}),_0x26bb4a&&(_0x9846bd=_0x9846bd['filter'](_0x391cfa=>{const _0xf49dc2=_0x2ead25;return _0x391cfa[_0xf49dc2(0x1f4)]!=_0x5148f3;}));}let _0x573169=dbConfig[_0x2ead25(0x291)](_0x2ead25(0x1a2))[_0x2ead25(0x2a5)]({'botID':botID})[_0x2ead25(0x301)]();_0x573169&&(dbConfig[_0x2ead25(0x291)]('bot')[_0x2ead25(0x2a5)]({'botID':botID})[_0x2ead25(0x2b0)]({'liquidity':_0x9846bd})['write'](),config['liquidity']=_0x9846bd),logHistory('success',_0x2ead25(0x1a8)+Math[_0x2ead25(0x1ae)](_0x219783[0x0][_0x2ead25(0x22d)])+'\x20'+_0x219783[0x0][_0x2ead25(0x1f5)]+'\x20'+(_0x219783[0x0][_0x2ead25(0x22d)]>0x0?'added':'removed')+_0x2ead25(0x240)),proxyEmit(_0x2ead25(0x218),emittedConfiguration());}else logger[_0x2ead25(0x30d)](_0x2ead25(0x31c)+Math[_0x2ead25(0x1ae)](_0x219783[0x0][_0x2ead25(0x22d)])+'\x20'+_0x219783[0x0][_0x2ead25(0x1f5)]+'\x20'+(_0x219783[0x0][_0x2ead25(0x22d)]>0x0?_0x2ead25(0x2c8):'removed'));transactionDetected=!![];}else logger[_0x2ead25(0x30d)](_0x2ead25(0x1a8)+Math[_0x2ead25(0x1ae)](_0x219783[0x0][_0x2ead25(0x22d)])+'\x20'+_0x219783[0x0][_0x2ead25(0x1f5)]+'\x20'+(_0x219783[0x0][_0x2ead25(0x22d)]>0x0?'added':_0x2ead25(0x312))+_0x2ead25(0x2f5));}currentCoins=_0x10616d,currentCoinsAll=_0x1d6648,await sleep(watchTransactionsInterval);}catch(_0x14ce69){if(!exchangeStopped)await handleError(_0x14ce69,_0x2ead25(0x25e));}else await sleep(0x64);}}async function loadSymbols(){const _0x42221b=_0xdb28c7;try{markets=await exchange[_0x42221b(0x2a2)](),allSymbols=[],Object[_0x42221b(0x21e)](markets)['forEach'](_0xb169ab=>{const _0x5a2114=_0x42221b;_0xb169ab[0x1][_0x5a2114(0x2de)]&&_0xb169ab[0x1][_0x5a2114(0x207)]&&allSymbols['push'](_0xb169ab[0x0]);});}catch(_0x1623b1){throw _0x1623b1;}}function validateSymbols(_0x10f744){let _0x179f91=[];return _0x10f744['forEach'](_0x373660=>{const _0x2b6e45=_0x292a;!allSymbols[_0x2b6e45(0x237)](_0x373660)?logHistory(_0x2b6e45(0x2d6),_0x2b6e45(0x32a)+_0x373660+_0x2b6e45(0x2c5)):_0x179f91[_0x2b6e45(0x2b6)](_0x373660);}),_0x179f91;}async function initclient(){const _0x3cda2a=_0xdb28c7;proxyEmit(_0x3cda2a(0x218),emittedConfiguration()),proxyEmit(_0x3cda2a(0x190),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x44caff=getNormalizedPerformance();emitPerformance(_0x44caff),getStartingBalances(_0x44caff);}async function toggleBotMode(){const _0x56503b=_0xdb28c7;let _0x13a111=dbConfig[_0x56503b(0x291)](_0x56503b(0x1a2))[_0x56503b(0x2a5)]({'botID':botID})[_0x56503b(0x301)]();if(_0x13a111){const _0x38caea=!_0x13a111[_0x56503b(0x1aa)];dbConfig[_0x56503b(0x291)](_0x56503b(0x1a2))[_0x56503b(0x2a5)]({'botID':botID})[_0x56503b(0x2b0)]({'headless':_0x38caea})[_0x56503b(0x227)](),config['headless']=_0x38caea,proxyEmit(_0x56503b(0x218),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2ab718=_0xdb28c7;process['send']({'updatebotmanager':!![]},_0x5aade7=>{}),logger[_0x2ab718(0x30d)](_0x2ab718(0x2c6)+config['headless']);}async function loadCoins(_0x187fe3){const _0x3ba8e1=_0xdb28c7;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x71727c,_0x18a22a=0x0,_0x1e956a=0x0;_0x187fe3['forEach'](_0x5ea779=>{const _0x158410=_0x292a;loading[_0x158410(0x1cd)][_0x158410(0x2b6)](_0x5ea779);}),loadingCanceled=![];let _0x38f057=![];while(_0x71727c!=_0x187fe3[_0x3ba8e1(0x2c4)]+maxLoadingProgress){_0x71727c=loadingProgress,_0x187fe3[_0x3ba8e1(0x26d)](_0x160a77=>{const _0x42881f=_0x3ba8e1;if(global[_0x42881f(0x307)][noslash(_0x160a77)]){loading[_0x42881f(0x1cd)]=loading['remainingSymbols'][_0x42881f(0x321)](_0xc50d6b=>_0xc50d6b!=_0x160a77);if(!watchedSymbols[_0x42881f(0x237)](_0x160a77))watchedSymbols[_0x42881f(0x2b6)](_0x160a77);_0x71727c++;}}),loading['progress']=Math[_0x3ba8e1(0x2eb)](_0x71727c/(_0x187fe3[_0x3ba8e1(0x2c4)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x1e956a>0x1e*0x5&&(loading[_0x3ba8e1(0x231)]=!![],emitLoadingProgress()),_0x1e956a>0x78*0x5&&!_0x38f057&&(_0x38f057=!![],logHistory(_0x3ba8e1(0x2d6),_0x3ba8e1(0x24f)+loading[_0x3ba8e1(0x1cd)]['join'](',\x20')+_0x3ba8e1(0x208)),logHistory('error',_0x3ba8e1(0x31b)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x254356=_0x3ba8e1;process['send']({'stop':_0x254356(0x28d)},_0x385823=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3ba8e1(0x1ce)]=!![],emitLoadingProgress();break;}else _0x18a22a!=loading[_0x3ba8e1(0x293)]&&(_0x18a22a=loading[_0x3ba8e1(0x293)],emitLoadingProgress()),_0x1e956a++,await sleep(0xc8);}_0x71727c==_0x187fe3[_0x3ba8e1(0x2c4)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3ba8e1(0x248)]({'status':'enabled','live':'running'},_0xedbcf=>{}),_0x38f057&&logHistory('success',_0x3ba8e1(0x328)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x188e58=_0xdb28c7;proxyEmit(_0x188e58(0x218),{...emittedConfiguration(),'configstate':_0x188e58(0x26b)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x4a0d71=_0xdb28c7;let _0x56081c=global['ticker'][stablecoins['eur'][_0x4a0d71(0x1f5)]],_0x2a8156=global['ticker'][stablecoins[_0x4a0d71(0x26e)][_0x4a0d71(0x1f5)]];return{'eur':Number(_0x56081c),'usd':Number(_0x2a8156)};}function capitalize(_0x2f286f){const _0x4ccc5a=_0xdb28c7;return _0x2f286f[_0x4ccc5a(0x21d)](0x0,0x1)[_0x4ccc5a(0x2b3)]()+_0x2f286f['substring'](0x1);}function supportedExchanges(){const _0x5cfc31=_0xdb28c7,_0x11cf32=['ws',_0x5cfc31(0x1df),_0x5cfc31(0x2e6),'watchTrades',_0x5cfc31(0x201),_0x5cfc31(0x28f),_0x5cfc31(0x266),_0x5cfc31(0x308),_0x5cfc31(0x2dd),_0x5cfc31(0x1e8)];let _0x40babc=[],_0x38f23d=[],_0x7751ce=ccxt[_0x5cfc31(0x1e4)][_0x5cfc31(0x190)];_0x7751ce[_0x5cfc31(0x26d)](_0x5118b3=>{const _0x378048=_0x5cfc31;try{const _0x315678=new ccxt['pro'][_0x5118b3]();_0x38f23d[_0x378048(0x2b6)](_0x315678);}catch(_0x1b5564){}}),_0x38f23d[_0x5cfc31(0x26d)](_0x62f9e8=>{const _0x466be8=_0x5cfc31;let _0x1182e6=0x0;_0x11cf32['forEach'](_0x4374c7=>{const _0x2bec78=_0x292a;_0x4374c7 in _0x62f9e8[_0x2bec78(0x1d3)]&&_0x62f9e8[_0x2bec78(0x1d3)][_0x4374c7]&&_0x1182e6++;}),_0x1182e6==_0x11cf32[_0x466be8(0x2c4)]&&_0x40babc[_0x466be8(0x2b6)](capitalize(_0x62f9e8['id']));});let _0x3e1c68=[];return _0x7751ce['forEach'](_0x467b73=>{const _0x2eed60=_0x5cfc31;_0x467b73=capitalize(_0x467b73);if(!_0x40babc[_0x2eed60(0x237)](_0x467b73))_0x3e1c68[_0x2eed60(0x2b6)](_0x467b73);}),_0x40babc;}function setStartDatePerformance(){const _0xaff16d=_0xdb28c7;if(config&&config[_0xaff16d(0x1b4)][0x0]['changes'][_0xaff16d(0x2c4)]!=0x0){const _0x1e02de=config[_0xaff16d(0x1b4)][0x0]['changes'];dbPerformance[_0xaff16d(0x291)](_0xaff16d(0x1d2))[_0xaff16d(0x2a5)]({'date':config[_0xaff16d(0x2d4)]})[_0xaff16d(0x2b0)]({'coins':_0x1e02de})[_0xaff16d(0x227)]();}}async function recreateCoinResults(){const _0xb48c20=_0xdb28c7;let _0x5bd924,_0x2ecce=[];try{const _0x286367=fns[_0xb48c20(0x1e9)](fns['parseISO'](config[_0xb48c20(0x2d4)][_0xb48c20(0x1ba)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x3671b5 of currentCoins){if(_0x3671b5['coin']!=config['basecoin']){let _0x52f9a5=0x0,_0x1b5d38,_0x47b745;_0x5bd924=await getAllEventOrders(_0x3671b5[_0xb48c20(0x2ce)]);if(_0x5bd924[_0xb48c20(0x2c4)]>0x0)_0x5bd924['forEach'](_0x4bb896=>{const _0x4de3cd=_0xb48c20,_0x5cce26=_0x3671b5[_0x4de3cd(0x2ce)][_0x4de3cd(0x237)](config['basecoin']+'/');_0x2ecce[_0x4de3cd(0x2b6)]({'datetime':_0x4bb896[_0x4de3cd(0x324)],'coin':_0x3671b5[_0x4de3cd(0x1f5)],'symbol':_0x3671b5[_0x4de3cd(0x2ce)],'side':_0x4bb896[_0x4de3cd(0x23b)],'reverse':_0x5cce26,'amount':formatResult(_0x4bb896[_0x4de3cd(0x271)],0x8),'filled':formatResult(_0x4bb896['filled'],0x8),'price':formatResult(_0x4bb896['price'],0x8)}),_0x52f9a5=_0x4bb896[_0x4de3cd(0x23b)]==_0x4de3cd(0x2dc)?_0x52f9a5+_0x4bb896[_0x4de3cd(0x271)]:_0x52f9a5-_0x4bb896[_0x4de3cd(0x271)];if(!_0x47b745)_0x47b745=_0x4bb896[_0x4de3cd(0x1da)];});_0x1b5d38=_0x3671b5[_0xb48c20(0x22d)]-_0x52f9a5;let _0x93b24b;config[_0xb48c20(0x1b4)][_0xb48c20(0x26d)](_0x35f0b2=>{const _0x222d35=_0xb48c20;!_0x93b24b&&(_0x93b24b=_0x35f0b2[_0x222d35(0x18e)][_0x222d35(0x2a5)](_0x724d7f=>_0x724d7f[_0x222d35(0x1f5)]==_0x3671b5['coin']),_0x93b24b&&(_0x1b5d38=_0x93b24b[_0x222d35(0x22d)],_0x47b745=_0x93b24b[_0x222d35(0x1da)]));});let _0x548fa7=dbCoinResults[_0xb48c20(0x291)]('coins')[_0xb48c20(0x2a5)]({'coin':_0x3671b5[_0xb48c20(0x1f5)]})[_0xb48c20(0x301)]();_0x548fa7={'coin':_0x3671b5[_0xb48c20(0x1f5)],'number':_0x1b5d38,'breakeven':_0x47b745,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xb48c20(0x291)]('coins')[_0xb48c20(0x2a5)]({'coin':_0x3671b5[_0xb48c20(0x1f5)]})[_0xb48c20(0x2b0)](_0x548fa7)['write']();}}_0x2ecce[_0xb48c20(0x243)]((_0x1fbe48,_0x3d8992)=>_0x1fbe48[_0xb48c20(0x324)]>_0x3d8992['datetime']?0x1:_0x3d8992[_0xb48c20(0x324)]>_0x1fbe48[_0xb48c20(0x324)]?-0x1:0x0);let _0x5d2e99=0x0;for(let _0x114d99 of _0x2ecce){await updateCoinResults(_0x114d99,!![]);}}catch(_0x1ebf1f){await handleError(_0x1ebf1f,_0xb48c20(0x2d0));}}async function getAllEventOrders(_0x5b9d50){const _0x52bfb2=_0xdb28c7;let _0x532ce5=[],_0x48705f=dbLogs[_0x52bfb2(0x291)](_0x52bfb2(0x31e))['filter'](_0x9a1eb3=>{const _0x6a0227=_0x52bfb2,_0x314ca0=_0x9a1eb3['event'][_0x6a0227(0x246)]();return _0x314ca0['includes'](_0x5b9d50[_0x6a0227(0x246)]())&&(_0x314ca0[_0x6a0227(0x237)](_0x6a0227(0x1c7))&&_0x314ca0[_0x6a0227(0x237)]('order')||_0x314ca0[_0x6a0227(0x237)](_0x6a0227(0x271))&&_0x314ca0[_0x6a0227(0x237)](_0x6a0227(0x269)));})[_0x52bfb2(0x18a)](_0x52bfb2(0x274))[_0x52bfb2(0x301)]();return _0x48705f['forEach'](_0x12ee22=>{const _0x4356c4=_0x52bfb2,_0x48f02a=_0x12ee22['event'][_0x4356c4(0x237)](_0x4356c4(0x2ca))?_0x4356c4(0x2ca):_0x4356c4(0x2dc),_0x233ce3=/#([0-9]|\.)+\s/i,_0x3ff809=Number(_0x233ce3['exec'](_0x12ee22['event'])[0x0][_0x4356c4(0x23c)](0x1)),_0x5a005f=/@([0-9]|\.)+$/i,_0x3d1983=Number(_0x5a005f['exec'](_0x12ee22[_0x4356c4(0x2f1)])[0x0][_0x4356c4(0x23c)](0x1));_0x532ce5[_0x4356c4(0x2b6)]({'datetime':_0x12ee22[_0x4356c4(0x274)],'coin':symbolToCoin(_0x5b9d50),'symbol':_0x5b9d50,'side':_0x48f02a,'amount':_0x3ff809,'filled':_0x3ff809,'price':_0x3d1983});}),_0x532ce5;}async function getAllOrders(_0x433391,_0x2f84a0){const _0x161c33=_0xdb28c7;let _0x4ce485=[];while(_0x2f84a0<exchange[_0x161c33(0x192)]()){const _0x5085ff=0x1f4;try{const _0x313aa9=await exchange['fetchClosedOrders'](_0x433391,_0x2f84a0,_0x5085ff);if(_0x313aa9[_0x161c33(0x2c4)])_0x2f84a0=_0x313aa9[_0x313aa9[_0x161c33(0x2c4)]-0x1][_0x161c33(0x20f)]+0x1,_0x4ce485=_0x4ce485[_0x161c33(0x1a6)](_0x313aa9);else break;}catch(_0x32da42){await handleError(_0x32da42,_0x161c33(0x2b2),_0x433391);}}return _0x4ce485;}async function validate24hChanges(){const _0xb9e098=_0xdb28c7;for(const _0xb5b634 of currentCoins){if(_0xb5b634[_0xb9e098(0x1f5)]!=config[_0xb9e098(0x2fc)]){let _0x526b9e;_0xb5b634['reverse']?_0x526b9e=formatResult((0x1/(global[_0xb9e098(0x2b4)][noslash(_0xb5b634[_0xb9e098(0x2ce)])]/0x64+0x1)-0x1)*0x64,0x3):_0x526b9e=global[_0xb9e098(0x2b4)][noslash(_0xb5b634[_0xb9e098(0x2ce)])],_0x526b9e<config[_0xb9e098(0x23d)]&&(logHistory(_0xb9e098(0x2d6),_0xb5b634[_0xb9e098(0x1f5)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x526b9e+'%'),logHistory(_0xb9e098(0x2d6),_0xb9e098(0x1e2)),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x338d6,_0x5e1866){const _0x14778b=_0xdb28c7;if(!_0x338d6)return!![];const _0x290128=_0x5e1866[_0x14778b(0x2a8)]('.'),_0x1a3668=_0x338d6[_0x14778b(0x2a8)]('.');for(var _0x5d8bd8=0x0;_0x5d8bd8<_0x1a3668[_0x14778b(0x2c4)];_0x5d8bd8++){const _0x229f15=~~_0x1a3668[_0x5d8bd8],_0x2757ad=~~_0x290128[_0x5d8bd8];if(_0x229f15<_0x2757ad)return!![];if(_0x229f15>_0x2757ad)return![];}return![];}async function oneTimeMigration(){const _0x587a24=_0xdb28c7;let _0x123a14=dbLogs[_0x587a24(0x291)](_0x587a24(0x1e7))[_0x587a24(0x301)]();if(isOlderVersion(_0x123a14,_0x587a24(0x30b))){let _0x52414c=[];const _0x1f02c4=dbLogs[_0x587a24(0x291)](_0x587a24(0x31e))[_0x587a24(0x301)]();_0x1f02c4[_0x587a24(0x26d)](_0x4d2b45=>{const _0x281131=_0x587a24;_0x52414c[_0x281131(0x2b6)]({'time':_0x4d2b45[_0x281131(0x274)],'type':_0x4d2b45['type'],'event':_0x4d2b45[_0x281131(0x2f1)]});}),dbLogs[_0x587a24(0x291)](_0x587a24(0x31e))[_0x587a24(0x2b0)](_0x52414c)['write']();}let _0x115c46=dbConfig['get'](_0x587a24(0x1e7))[_0x587a24(0x301)]();if(isOlderVersion(_0x115c46,_0x587a24(0x30b))){let _0x4850de=dbConfig[_0x587a24(0x291)](_0x587a24(0x1a2))['find']({'botID':botID})['value']();if(_0x4850de){let _0x27c268=[];_0x4850de[_0x587a24(0x28c)][_0x587a24(0x26d)](_0x462917=>{const _0x55e7bf=_0x587a24;_0x27c268[_0x55e7bf(0x2b6)]({'coin':_0x462917[_0x55e7bf(0x1f5)],'number':_0x462917['startnumber'],'price':_0x462917[_0x55e7bf(0x1f6)]}),delete _0x462917[_0x55e7bf(0x2db)],delete _0x462917[_0x55e7bf(0x1f6)];});if(_0x27c268[_0x587a24(0x2c4)]!==0x0)fs[_0x587a24(0x310)](configbackuppath+('starting-balance-'+botID+_0x587a24(0x245)),JSON[_0x587a24(0x1fd)](_0x27c268,null,0x4),function(_0x150f97){if(_0x150f97){}});const _0x221a18=(_0x4d645a,_0x58d26e)=>{const _0x549cea=_0x587a24;let _0x2e2cdd=[];_0x58d26e[_0x549cea(0x26d)](_0x175795=>{const _0x51b4d6=_0x549cea,_0x10bdcf=_0x4d645a[_0x51b4d6(0x2a5)](_0x237932=>_0x237932[_0x51b4d6(0x1f5)]==_0x175795['coin']);if(!_0x10bdcf)_0x2e2cdd[_0x51b4d6(0x2b6)](_0x175795);});let _0x44b760=[];return _0x4d645a[_0x549cea(0x26d)](_0x4e50ac=>{const _0x30ca0c=_0x549cea,_0x4276b2=_0x58d26e[_0x30ca0c(0x2a5)](_0x5037cc=>_0x5037cc[_0x30ca0c(0x1f5)]==_0x4e50ac[_0x30ca0c(0x1f5)]);if(!_0x4276b2||_0x4276b2[_0x30ca0c(0x22d)]==0x0&&_0x4e50ac[_0x30ca0c(0x22d)]!=0x0)_0x44b760[_0x30ca0c(0x2b6)](_0x4e50ac);}),{'missingDay1':_0x2e2cdd,'notInDay2':_0x44b760};},_0x31b718=dbPerformance[_0x587a24(0x291)](_0x587a24(0x1d2))['cloneDeep']()['value']();if(_0x31b718[_0x587a24(0x2c4)]>0x1){const {missingDay1:_0x4211ee,notInDay2:_0x3b4863}=_0x221a18(_0x27c268,_0x31b718[0x1]['coins']);_0x27c268=[..._0x27c268,..._0x4211ee],_0x3b4863[_0x587a24(0x26d)](_0x5e1e45=>{const _0x52ee05=_0x587a24;let _0x3f06d9=_0x27c268[_0x52ee05(0x2b9)](_0x2aee3c=>_0x2aee3c[_0x52ee05(0x1f5)]==_0x5e1e45[_0x52ee05(0x1f5)]);_0x3f06d9!=-0x1&&_0x27c268[_0x52ee05(0x285)](_0x3f06d9,0x1);});}_0x27c268[_0x587a24(0x243)]((_0x3c40a4,_0x39cfce)=>_0x3c40a4[_0x587a24(0x1f5)]>_0x39cfce[_0x587a24(0x1f5)]?0x1:_0x39cfce[_0x587a24(0x1f5)]>_0x3c40a4[_0x587a24(0x1f5)]?-0x1:0x0);let _0x317def=[{'date':_0x4850de[_0x587a24(0x2d4)],'changes':_0x27c268}];_0x31b718[_0x587a24(0x2c4)]>0x2&&_0x31b718[_0x587a24(0x26d)]((_0x23b4a2,_0x3ab0b)=>{const _0x56f1f5=_0x587a24;if(_0x3ab0b>0x0&&_0x3ab0b<_0x31b718['length']-0x1){const {missingDay1:_0x564072,notInDay2:_0x95c84a}=_0x221a18(_0x31b718[_0x3ab0b][_0x56f1f5(0x2bd)],_0x31b718[_0x3ab0b+0x1][_0x56f1f5(0x2bd)]);_0x27c268=[],(_0x564072['length']!=0x0||_0x95c84a[_0x56f1f5(0x2c4)]!=0x0)&&(_0x564072[_0x56f1f5(0x2c4)]!=0x0&&_0x27c268[_0x56f1f5(0x2b6)](..._0x564072),_0x95c84a[_0x56f1f5(0x2c4)]!=0x0&&(_0x95c84a[_0x56f1f5(0x26d)](_0x4864e3=>{const _0x5abf80=_0x56f1f5;_0x4864e3[_0x5abf80(0x22d)]=-_0x4864e3[_0x5abf80(0x22d)];}),_0x27c268['push'](..._0x95c84a)),_0x27c268[_0x56f1f5(0x243)]((_0x16c889,_0xf35d80)=>_0x16c889[_0x56f1f5(0x1f5)]>_0xf35d80['coin']?0x1:_0xf35d80[_0x56f1f5(0x1f5)]>_0x16c889['coin']?-0x1:0x0),_0x317def['push']({'date':_0x31b718[_0x3ab0b+0x1][_0x56f1f5(0x1f4)],'changes':_0x27c268}));}}),dbConfig['get'](_0x587a24(0x1a2))['find']({'botID':botID})[_0x587a24(0x2b0)]({..._0x4850de,'liquidity':_0x317def})['write']();}}if(isOlderVersion(_0x115c46,_0x587a24(0x209))){let _0x5cad37=dbConfig[_0x587a24(0x291)](_0x587a24(0x1a2))[_0x587a24(0x2a5)]({'botID':botID})['value']();if(_0x5cad37){const _0x60243d=_0x5cad37[_0x587a24(0x2a0)],_0xad4f86=_0x60243d?capitalize(_0x60243d):_0x587a24(0x19f);dbConfig[_0x587a24(0x291)](_0x587a24(0x1a2))[_0x587a24(0x2a5)]({'botID':botID})[_0x587a24(0x2b0)]({'exchange':_0xad4f86})[_0x587a24(0x227)]();}}let _0x4f3130=dbPerformance['get'](_0x587a24(0x1e7))[_0x587a24(0x301)]();isOlderVersion(_0x4f3130,_0x587a24(0x30b))&&setStartDatePerformance();let _0x5eb5aa=dbCoinResults[_0x587a24(0x291)]('version')[_0x587a24(0x301)]();if(isOlderVersion(_0x5eb5aa,_0x587a24(0x21c))){let _0x41dfb5=dbCoinResults[_0x587a24(0x291)](_0x587a24(0x2bd))[_0x587a24(0x301)]();if(_0x41dfb5[_0x587a24(0x2c4)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x41f7ca=_0xdb28c7;dbConfig[_0x41f7ca(0x2b5)](_0x41f7ca(0x1e7),serverversion)[_0x41f7ca(0x227)](),dbPerformance[_0x41f7ca(0x2b5)](_0x41f7ca(0x1e7),serverversion)[_0x41f7ca(0x227)](),dbLogs[_0x41f7ca(0x2b5)](_0x41f7ca(0x1e7),serverversion)['write'](),dbCoinResults[_0x41f7ca(0x2b5)]('version',serverversion)[_0x41f7ca(0x227)]();}function getConfiguration(_0x1f6365){const _0x13154a=_0xdb28c7;let _0x2f9f3b=dbConfig[_0x13154a(0x291)](_0x13154a(0x1a2))['find']({'botID':_0x1f6365})[_0x13154a(0x301)]();if(_0x2f9f3b){let _0x11ac4f=![];typeof _0x2f9f3b[_0x13154a(0x2e7)]==_0x13154a(0x257)&&(_0x2f9f3b={..._0x2f9f3b,'threshold':Number(_0x2f9f3b[_0x13154a(0x2e7)])},_0x11ac4f=!![]),_0x2f9f3b[_0x13154a(0x23d)]==undefined&&(_0x2f9f3b={..._0x2f9f3b,'change24h':-0x14},_0x11ac4f=!![]),_0x2f9f3b['fiat']==undefined&&(_0x2f9f3b={..._0x2f9f3b,'fiat':_0x13154a(0x204)},_0x11ac4f=!![]),_0x2f9f3b[_0x13154a(0x1b5)]==undefined&&(_0x2f9f3b={..._0x2f9f3b,'onepagemode':settings[_0x13154a(0x1b5)]},_0x11ac4f=!![]),_0x2f9f3b[_0x13154a(0x255)]==undefined&&(_0x2f9f3b={..._0x2f9f3b,'colorscheme':'red_yellow_blue'},_0x11ac4f=!![]),_0x2f9f3b[_0x13154a(0x20e)]==undefined&&(_0x2f9f3b={..._0x2f9f3b,'autoliquidity':!![]},_0x11ac4f=!![]),_0x11ac4f&&(_0x2f9f3b={'botID':_0x2f9f3b[_0x13154a(0x1d9)],'exchange':_0x2f9f3b[_0x13154a(0x2a0)],'apiKey':_0x2f9f3b[_0x13154a(0x1f1)],'apiSecret':_0x2f9f3b[_0x13154a(0x270)],'apiPassword':_0x2f9f3b[_0x13154a(0x273)],'basecoin':_0x2f9f3b[_0x13154a(0x2fc)],'botname':_0x2f9f3b[_0x13154a(0x249)],'showname':_0x2f9f3b[_0x13154a(0x225)],'threshold':_0x2f9f3b[_0x13154a(0x2e7)],'ordertype':_0x2f9f3b['ordertype'],'timeout':_0x2f9f3b[_0x13154a(0x231)],'fiat':_0x2f9f3b['fiat'],'startdate':_0x2f9f3b[_0x13154a(0x2d4)],'recreate':_0x2f9f3b['recreate'],'timeshift':_0x2f9f3b[_0x13154a(0x27f)],'onepagemode':_0x2f9f3b['onepagemode'],'headless':_0x2f9f3b[_0x13154a(0x1aa)],'cooldown':_0x2f9f3b['cooldown'],'change24h':_0x2f9f3b['change24h'],'emojibuy':_0x2f9f3b[_0x13154a(0x292)],'emojisell':_0x2f9f3b[_0x13154a(0x22e)],'colorscheme':_0x2f9f3b['colorscheme'],'portfolio':_0x2f9f3b[_0x13154a(0x28c)],'autoliquidity':_0x2f9f3b['autoliquidity'],'liquidity':_0x2f9f3b[_0x13154a(0x1b4)],'openOrders':_0x2f9f3b['openOrders']},dbConfig[_0x13154a(0x291)]('bot')[_0x13154a(0x279)]()[_0x13154a(0x227)](),dbConfig[_0x13154a(0x291)](_0x13154a(0x1a2))[_0x13154a(0x2b6)](_0x2f9f3b)[_0x13154a(0x227)]());}else _0x2f9f3b={'botID':_0x1f6365,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x13154a(0x1a0)+_0x1f6365,'showname':![],'threshold':0x3,'ordertype':_0x13154a(0x1c7),'timeout':0x14,'fiat':_0x13154a(0x204),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x13154a(0x1b5)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x13154a(0x2f7),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2f9f3b;}function emittedConfiguration(){const _0x3d3659=_0xdb28c7;let _0x46a2ea;if(config[_0x3d3659(0x1f1)]=='')_0x46a2ea={...config,'configstate':_0x3d3659(0x25f)};else config[_0x3d3659(0x1f1)]==_0x3d3659(0x322)?_0x46a2ea={...config,'configstate':_0x3d3659(0x277)}:(_0x46a2ea={...config,'apiKey':_0x3d3659(0x29e),'apiSecret':_0x3d3659(0x29e)},config[_0x3d3659(0x273)]&&(_0x46a2ea[_0x3d3659(0x273)]=_0x3d3659(0x29e)));return _0x46a2ea;}function getSettings(){const _0x5c233e=_0xdb28c7;return dbSettings[_0x5c233e(0x291)](_0x5c233e(0x2ec))['value']();}function getSecure(){const _0x123ada=_0xdb28c7;return dbSecure['get'](_0x123ada(0x2ff))[_0x123ada(0x301)]()||{};}function updateTimeshift(_0x1ad07c){const _0x4af5ce=_0xdb28c7;let _0x5beb72=dbConfig[_0x4af5ce(0x291)](_0x4af5ce(0x1a2))[_0x4af5ce(0x2a5)]({'botID':botID})[_0x4af5ce(0x301)]();_0x5beb72&&dbConfig[_0x4af5ce(0x291)](_0x4af5ce(0x1a2))['find']({'botID':botID})['assign']({'timeshift':_0x1ad07c})['write'](),config[_0x4af5ce(0x27f)]=_0x1ad07c,proxyEmit(_0x4af5ce(0x218),emittedConfiguration());}function updateOnepagemode(_0x210da7){const _0x17c389=_0xdb28c7;let _0x42e69a=dbConfig['get'](_0x17c389(0x1a2))[_0x17c389(0x2a5)]({'botID':botID})[_0x17c389(0x301)]();_0x42e69a&&dbConfig[_0x17c389(0x291)](_0x17c389(0x1a2))['find']({'botID':botID})[_0x17c389(0x2b0)]({'onepagemode':_0x210da7})[_0x17c389(0x227)](),config['onepagemode']=_0x210da7,proxyEmit(_0x17c389(0x218),emittedConfiguration());}async function storeConfiguration(_0xcceaaf){const _0x264487=_0xdb28c7;logger[_0x264487(0x30d)](_0x264487(0x1d0));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x264487(0x22b));let _0x3e1fbd=![],_0x185ac8=![],_0x38e245=[];_0xcceaaf[_0x264487(0x28c)]['forEach'](_0x343edf=>{const _0x4f0b29=_0x264487;if(!_0x343edf['excluded']&&_0x343edf[_0x4f0b29(0x1f5)]!=_0xcceaaf[_0x4f0b29(0x2fc)])_0x38e245[_0x4f0b29(0x2b6)](_0x343edf['symbol']);}),_0x38e245[_0x264487(0x26d)](_0x345b0d=>{const _0x388345=_0x264487,_0x3cb8e9=currentCoins[_0x388345(0x2a5)](_0x8d0d56=>_0x8d0d56[_0x388345(0x2ce)]==_0x345b0d);!_0x3cb8e9&&(_0x3e1fbd=!![]);}),currentCoins[_0x264487(0x26d)](_0x222042=>{const _0x14022e=_0x264487;if(_0x222042[_0x14022e(0x1f5)]!=config[_0x14022e(0x2fc)]){const _0x2ab352=_0x38e245[_0x14022e(0x2a5)](_0x413f45=>_0x413f45==_0x222042[_0x14022e(0x2ce)]);!_0x2ab352&&(_0x3e1fbd=!![]);}}),_0xcceaaf['portfolio'][_0x264487(0x26d)](_0x3d058f=>{const _0x36bc9d=_0x264487,_0x3a4024=config[_0x36bc9d(0x28c)]['find'](_0x171ab6=>_0x171ab6[_0x36bc9d(0x1f5)]==_0x3d058f[_0x36bc9d(0x1f5)]);if(_0x3a4024&&_0x3d058f[_0x36bc9d(0x199)]!=_0x3a4024[_0x36bc9d(0x199)])_0x185ac8=!![];});let _0x1b0cd3=dbConfig[_0x264487(0x291)](_0x264487(0x1a2))['find']({'botID':botID})[_0x264487(0x301)]();_0xcceaaf={..._0xcceaaf,'apiKey':crypt['decrypt'](secure[_0x264487(0x276)],_0xcceaaf[_0x264487(0x1f1)])[_0x264487(0x2d3)],'apiSecret':crypt[_0x264487(0x203)](secure[_0x264487(0x276)],_0xcceaaf['apiSecret'])[_0x264487(0x2d3)]};_0xcceaaf[_0x264487(0x273)]&&(_0xcceaaf[_0x264487(0x273)]=crypt[_0x264487(0x203)](secure['privateKey'],_0xcceaaf[_0x264487(0x273)])[_0x264487(0x2d3)]);let _0x40f952=![];if(_0x1b0cd3){_0xcceaaf[_0x264487(0x1f1)]==_0x264487(0x29e)?_0xcceaaf[_0x264487(0x1f1)]=config[_0x264487(0x1f1)]:_0x40f952=!![];_0xcceaaf[_0x264487(0x270)]==_0x264487(0x29e)?_0xcceaaf[_0x264487(0x270)]=config[_0x264487(0x270)]:_0x40f952=!![];if(_0xcceaaf[_0x264487(0x273)]==_0x264487(0x29e))_0xcceaaf[_0x264487(0x273)]=config[_0x264487(0x273)];else{if(_0xcceaaf['apiPassword'])_0x40f952=!![];}dbConfig[_0x264487(0x291)]('bot')[_0x264487(0x2a5)]({'botID':botID})[_0x264487(0x2b0)](_0xcceaaf)[_0x264487(0x227)]();}else dbConfig[_0x264487(0x291)](_0x264487(0x1a2))[_0x264487(0x2b6)](_0xcceaaf)[_0x264487(0x227)](),_0x40f952=!![],process[_0x264487(0x248)]({'status':_0x264487(0x32b),'live':'running'},_0x59eab1=>{});process[_0x264487(0x248)]({'botname':_0xcceaaf['botname']},_0xdf50c5=>{}),config={..._0xcceaaf},updateBotManager(),proxyEmit(_0x264487(0x1fb)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x40f952)await reset(!![]);else _0x3e1fbd||_0x185ac8?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x264487(0x30d)](_0x264487(0x29f));}async function storeHeadless(_0x1e8f75){const _0xbc1a6b=_0xdb28c7,_0x234bc8={...config,'headless':_0x1e8f75[_0xbc1a6b(0x1aa)]};let _0x37b832=dbConfig[_0xbc1a6b(0x291)](_0xbc1a6b(0x1a2))['find']({'botID':botID})[_0xbc1a6b(0x301)]();_0x37b832&&dbConfig[_0xbc1a6b(0x291)](_0xbc1a6b(0x1a2))[_0xbc1a6b(0x2a5)]({'botID':botID})[_0xbc1a6b(0x2b0)](_0x234bc8)[_0xbc1a6b(0x227)](),config={..._0x234bc8},updateBotManager(),proxyEmit(_0xbc1a6b(0x218),emittedConfiguration());}async function storeFiat(_0x220799){const _0x5a7105=_0xdb28c7,_0x2e8f7a={...config,'fiat':_0x220799};let _0x4ca754=dbConfig['get'](_0x5a7105(0x1a2))[_0x5a7105(0x2a5)]({'botID':botID})['value']();_0x4ca754&&dbConfig['get'](_0x5a7105(0x1a2))['find']({'botID':botID})['assign'](_0x2e8f7a)['write'](),config={..._0x2e8f7a},proxyEmit(_0x5a7105(0x218),emittedConfiguration());}function resetHistory(){const _0x23a839=_0xdb28c7;logger['full'](_0x23a839(0x317));try{if(fs[_0x23a839(0x2f9)](path[_0x23a839(0x1b9)](configpath,_0x23a839(0x195)+botID+_0x23a839(0x294))))fs[_0x23a839(0x18c)](path['join'](configpath,_0x23a839(0x195)+botID+'-events.json'));if(fs['existsSync'](path['join'](configpath,'bot-'+botID+'-performance.json')))fs[_0x23a839(0x18c)](path['join'](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x23a839(0x2f9)](path[_0x23a839(0x1b9)](configpath,_0x23a839(0x195)+botID+_0x23a839(0x242))))fs['unlinkSync'](path[_0x23a839(0x1b9)](configpath,'bot-'+botID+_0x23a839(0x242)));}catch(_0xdf4fce){if(_0xdf4fce)logger[_0x23a839(0x2e5)](_0x23a839(0x311),_0xdf4fce);}const _0x1e15cd=getDate();let _0x257f2f=[];currentCoins[_0x23a839(0x26d)](_0x40d14b=>{const _0x57a1aa=_0x23a839;_0x257f2f[_0x57a1aa(0x2b6)]({'coin':_0x40d14b['coin'],'number':_0x40d14b[_0x57a1aa(0x22d)],'price':_0x40d14b[_0x57a1aa(0x197)]});});let _0x3866cf=dbConfig[_0x23a839(0x291)](_0x23a839(0x1a2))[_0x23a839(0x2a5)]({'botID':botID})[_0x23a839(0x301)]();_0x3866cf&&(dbConfig[_0x23a839(0x291)]('bot')['find']({'botID':botID})[_0x23a839(0x2b0)]({'liquidity':[{'date':_0x1e15cd,'changes':_0x257f2f}]})['write'](),config[_0x23a839(0x1b4)]=[]),process[_0x23a839(0x248)]({'stop':_0x23a839(0x28d)},_0x4fa18b=>{});}function noslash(_0x1852fd){const _0x1d9de1=_0xdb28c7;return _0x1852fd[_0x1d9de1(0x1ba)]('/','');}function updateHighestFee(_0x2e4502){const _0x5c52f0=_0xdb28c7;if(_0x2e4502[_0x5c52f0(0x236)]){let _0x1582a0={'filled':_0x2e4502[_0x5c52f0(0x271)]*_0x2e4502[_0x5c52f0(0x1da)],'amount':_0x2e4502['filled']*_0x2e4502[_0x5c52f0(0x1da)],'side':_0x2e4502[_0x5c52f0(0x23b)]==_0x5c52f0(0x2ca)?_0x5c52f0(0x2dc):_0x5c52f0(0x2ca),'price':0x1/_0x2e4502[_0x5c52f0(0x1da)]};_0x2e4502={..._0x2e4502,..._0x1582a0};}const _0x5d806a=defaultFee*_0x2e4502['filled']*_0x2e4502[_0x5c52f0(0x1da)];lastFees[_0x5c52f0(0x280)][_0x5c52f0(0x2c4)]===0x14&&lastFees[_0x5c52f0(0x280)]['shift'](),lastFees[_0x5c52f0(0x280)][_0x5c52f0(0x2b6)](_0x5d806a),lastFees[_0x5c52f0(0x297)]=Math[_0x5c52f0(0x258)](...lastFees[_0x5c52f0(0x280)]);}async function updateNumberCoinsCcxt(_0xd5133f){const _0x11c353=_0xdb28c7;logger['debug'](_0x11c353(0x19e)+_0xd5133f[_0x11c353(0x2ce)]+_0x11c353(0x2fd)+_0xd5133f[_0x11c353(0x2cf)]+_0x11c353(0x2fd)+_0xd5133f[_0x11c353(0x271)]+_0x11c353(0x1ed)+_0xd5133f[_0x11c353(0x20b)]+_0x11c353(0x2fd)+_0xd5133f['id']);let _0x560818=_0xd5133f[_0x11c353(0x2cf)],_0x4dd395=![];currentCoins[_0x11c353(0x26d)](_0x277185=>{const _0x346004=_0x11c353;_0x277185[_0x346004(0x2ce)]==_0xd5133f['symbol']&&(_0x4dd395=!![]);});if(!_0x4dd395)return;const _0x333c82=currentCoins[_0x11c353(0x2a5)](_0x3aa17c=>_0x3aa17c[_0x11c353(0x2ce)]==_0xd5133f[_0x11c353(0x2ce)]),_0xbb4e94=_0x225446=>{const _0x566a12=_0x11c353;if(_0x333c82)_0x333c82[_0x566a12(0x206)]=_0x225446;};if(_0x560818==_0x11c353(0x250))_0xbb4e94(_0x11c353(0x250));else{if(_0x560818=='canceled'){_0xbb4e94('canceled');const _0x83e3c2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x83e3c2,await getOpenOrders(),handleOpenOrders();}else{if(_0x560818=='closed'){let _0x26a0d6=![];if(lastOrders)for(const _0x2210d4 of lastOrders){const _0x244832=0xc8,_0x4ca249=0x1388;let _0x15cc35=0x0;while(!_0x2210d4[_0x11c353(0x19b)]&&_0x15cc35*_0x244832<_0x4ca249){_0x15cc35++,await sleep(_0x244832);}if(_0x15cc35>0x0)logger[_0x11c353(0x30d)](_0x11c353(0x2a4)+_0x15cc35*_0x244832/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x2210d4[_0x11c353(0x19b)]==_0xd5133f['id']){logger[_0x11c353(0x30d)](_0x11c353(0x319)+_0xd5133f['id']),_0x26a0d6=!![];if(_0x2210d4['filled']==0x0){logger[_0x11c353(0x30d)](_0x11c353(0x27a)+_0xd5133f['id']);if(_0xd5133f[_0x11c353(0x202)])_0x2210d4['price']=_0xd5133f[_0x11c353(0x202)];else{if(_0xd5133f['price'])_0x2210d4['price']=_0xd5133f[_0x11c353(0x1da)];else{}}_0x2210d4['filled']=_0xd5133f[_0x11c353(0x271)],updateHighestFee(_0x2210d4),_0xbb4e94(_0x11c353(0x271)),await validateOrders();if(lockOrders==ORDERS[_0x11c353(0x22f)]){const _0x42304b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x42304b;}_0x2210d4[_0x11c353(0x235)]={'currency':_0xd5133f['fee']?_0xd5133f[_0x11c353(0x235)][_0x11c353(0x1bd)]:null,'cost':_0xd5133f[_0x11c353(0x235)]?_0xd5133f[_0x11c353(0x235)][_0x11c353(0x30a)]:0x0},await updateCoinResults(_0x2210d4);}}}if(!_0x26a0d6){logger[_0x11c353(0x30d)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0xd5133f['id']),_0xbb4e94('filled');const _0x55bf23=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x55bf23,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x50eb16=JSON[_0x11c353(0x1c1)](lastBalances[_0x11c353(0x28c)]);const _0x56be85=_0x50eb16[_0x11c353(0x2a5)](_0x17a41d=>_0x17a41d[_0x11c353(0x2ce)]==_0xd5133f['symbol']);if(_0x56be85){if(_0x560818==_0x11c353(0x250))_0x56be85[_0x11c353(0x206)]=_0x56be85[_0x11c353(0x206)]==_0x11c353(0x271)?_0x11c353(0x271):_0x11c353(0x250);else{if(_0x560818==_0x11c353(0x2da))_0x56be85[_0x11c353(0x206)]=_0x56be85['orderstatus']=='filled'?'filled':_0x11c353(0x2da);else _0x560818==_0x11c353(0x1d7)&&(_0x56be85[_0x11c353(0x206)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x11c353(0x1fd)](_0x50eb16)},proxyEmit(_0x11c353(0x1c4),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x48d391=![];currentCoins['forEach'](_0x14579d=>{const _0x6d5eaf=_0x292a;_0x48d391=allOpenOrders['find'](_0x4a403e=>_0x4a403e[_0x6d5eaf(0x2ce)]==_0x14579d['symbol']),_0x14579d['orderstatus']=_0x48d391?'open':'none';});}async function getCoins(_0x4cf4ed=0x0,_0x46b368=!![],_0x3a1f48=config[_0xdb28c7(0x2fc)]){const _0x19391e=_0xdb28c7;let _0x346ee5,_0x14e556=[],_0x2e202a=[],_0x562ceb=[];if(_0x4cf4ed)await sleep(_0x4cf4ed);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x346ee5=await exchange[_0x19391e(0x1e8)](),mybalances=_0x346ee5[_0x19391e(0x22c)];for(const [_0x5498f2,_0x4b5d57]of Object[_0x19391e(0x21e)](mybalances)){_0x562ceb[_0x19391e(0x2b6)](_0x5498f2);}config['portfolio'][_0x19391e(0x26d)](_0x3b37c8=>{const _0x3a04bd=_0x19391e;!_0x562ceb[_0x3a04bd(0x237)](_0x3b37c8['coin'])&&(mybalances[_0x3b37c8['coin']]=0x0);});if(_0x3a1f48=='')for(const [_0x15f6b7,_0x209e4e]of Object[_0x19391e(0x21e)](mybalances)){_0x209e4e!=0x0&&_0x14e556[_0x19391e(0x2b6)]({'coin':_0x15f6b7});}else{let _0x220776=![];for(const [_0x31bf33,_0x5f35a0]of Object[_0x19391e(0x21e)](mybalances)){const _0x219d04=config[_0x19391e(0x28c)]['find'](_0x1288f3=>_0x1288f3[_0x19391e(0x1f5)]==_0x31bf33),_0x42883b=_0x31bf33+'/'+_0x3a1f48,_0x2077ab=_0x3a1f48+'/'+_0x31bf33,_0x575396=currentCoins[_0x19391e(0x2a5)](_0x1cdae2=>_0x1cdae2[_0x19391e(0x1f5)]==_0x31bf33);_0x220776=![];if((_0x5f35a0!=0x0||_0x219d04)&&(allSymbols[_0x19391e(0x237)](_0x42883b)||_0x31bf33==_0x3a1f48))_0x14e556[_0x19391e(0x2b6)]({'coin':_0x31bf33,'symbol':_0x42883b,'reverse':![],'number':Math[_0x19391e(0x258)](_0x5f35a0+(_0x219d04&&_0x219d04['offset']||0x0),0x0),'orderstatus':_0x575396?_0x575396['orderstatus']:_0x19391e(0x19d)});else{if((_0x5f35a0!=0x0||_0x219d04)&&allSymbols[_0x19391e(0x237)](_0x2077ab))_0x14e556[_0x19391e(0x2b6)]({'coin':_0x31bf33,'symbol':_0x2077ab,'reverse':!![],'number':Math['max'](_0x5f35a0+(_0x219d04&&_0x219d04[_0x19391e(0x199)]||0x0),0x0),'orderstatus':_0x575396?_0x575396[_0x19391e(0x206)]:'none'});else _0x219d04&&_0x14e556[_0x19391e(0x2b6)]({'coin':_0x219d04[_0x19391e(0x1f5)],'symbol':_0x219d04[_0x19391e(0x2ce)],'reverse':_0x219d04[_0x19391e(0x236)],'number':0x0,'orderstatus':_0x19391e(0x19d)});}}}}catch(_0x3d450b){if(!_0x46b368)handleErrorNoStop(_0x3d450b,_0x19391e(0x1c6));else await handleError(_0x3d450b,_0x19391e(0x1c6));}return _0x2e202a=cloneDeep(_0x14e556),_0x14e556=_0x14e556[_0x19391e(0x321)](_0x47c3a3=>{const _0x54659a=_0x19391e,_0x2258c7=config[_0x54659a(0x28c)]['find'](_0x23cd67=>_0x23cd67['coin']==_0x47c3a3[_0x54659a(0x1f5)]);return _0x2258c7&&!_0x2258c7[_0x54659a(0x2c7)];}),[_0x14e556,_0x2e202a];}async function getCoinNumber(_0x3351e5){const _0x1bf55f=_0xdb28c7;let _0x2d5d0;try{const _0x2abcd0=await exchange[_0x1bf55f(0x1e8)]();_0x2d5d0=_0x2abcd0['total'][_0x3351e5];}catch(_0x2ba65c){await handleError(_0x2ba65c,_0x1bf55f(0x27e));}return _0x2d5d0;}async function getOpenOrders(){const _0x5b2ac7=_0xdb28c7;let _0x30a8b5;allOpenOrders=[];try{for(const _0x3cbbaa of config[_0x5b2ac7(0x28c)]){!_0x3cbbaa['excluded']&&_0x3cbbaa[_0x5b2ac7(0x1f5)]!=config[_0x5b2ac7(0x2fc)]&&(_0x30a8b5=await exchange[_0x5b2ac7(0x308)](_0x3cbbaa[_0x5b2ac7(0x2ce)]),_0x30a8b5[_0x5b2ac7(0x2c4)]>0x0&&allOpenOrders[_0x5b2ac7(0x2b6)](_0x30a8b5[0x0]));}}catch(_0x58ccf6){await handleError(_0x58ccf6,_0x5b2ac7(0x1b0));}}async function handleOpenOrders(_0x4e8263=0x0){const _0x34f3c9=_0xdb28c7;allOpenOrders[_0x34f3c9(0x2c4)]==0x0&&lockOrders==ORDERS[_0x34f3c9(0x22f)]&&allOrdersPlaced&&(_0x4e8263==0x0?(logger['debug'](_0x34f3c9(0x1f7)),_0x4e8263++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x34f3c9(0x30d)](_0x34f3c9(0x23a)),validateOrders(_0x34f3c9(0x2d1))));}async function testAPI(_0x9c9d48){const _0x24daf9=_0xdb28c7,_0x1659b8=ccxt[_0x24daf9(0x1e4)][_0x9c9d48['exchange'][_0x24daf9(0x246)]()],_0x30ff16=new _0x1659b8({'apiKey':_0x9c9d48['apiKey'],'secret':_0x9c9d48[_0x24daf9(0x270)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x24daf9(0x207)}});if(_0x9c9d48[_0x24daf9(0x273)])_0x30ff16[_0x24daf9(0x268)]=_0x9c9d48['apiPassword'];try{await _0x30ff16['loadMarkets']();}catch(_0x94351e){throw _0x94351e;}}function cloneDeep(_0x1ebb5e){const _0x3314ab=_0xdb28c7;return JSON[_0x3314ab(0x1c1)](JSON[_0x3314ab(0x1fd)](_0x1ebb5e));}async function getPortfolio(_0x31e796){const _0x45632e=_0xdb28c7;let _0x55ed3a=[],_0x455b25=[],_0x5527e8=[],_0x33b88c;if(_0x31e796[_0x45632e(0x1f1)]!=='************'||_0x31e796[_0x45632e(0x270)]!=='************'||_0x31e796[_0x45632e(0x273)]&&_0x31e796['apiPassword']!==_0x45632e(0x29e)){if(config[_0x45632e(0x2a0)]){if(_0x31e796[_0x45632e(0x1f1)]==_0x45632e(0x29e))_0x31e796[_0x45632e(0x1f1)]=config[_0x45632e(0x1f1)];if(_0x31e796[_0x45632e(0x270)]=='************')_0x31e796[_0x45632e(0x270)]=config[_0x45632e(0x270)];if(_0x31e796[_0x45632e(0x273)]==_0x45632e(0x29e))_0x31e796[_0x45632e(0x273)]=config[_0x45632e(0x273)];try{await testAPI(_0x31e796);}catch(_0x570ccc){if(_0x570ccc['toString']()[_0x45632e(0x237)](_0x45632e(0x2cc))){logger['debug'](_0x45632e(0x267)),proxyEmit(_0x45632e(0x28c),![]);return;}else{handleError(_0x570ccc,_0x45632e(0x200));return;}}}await initExchange(_0x31e796[_0x45632e(0x2a0)],_0x31e796[_0x45632e(0x1f1)],_0x31e796[_0x45632e(0x270)],_0x31e796[_0x45632e(0x273)]);try{await loadSymbols();}catch(_0x2e8878){if(_0x2e8878['toString']()[_0x45632e(0x237)](_0x45632e(0x2cc))){proxyEmit(_0x45632e(0x28c),![]);return;}else{handleError(_0x2e8878,_0x45632e(0x212));return;}}const _0x475fed=await getCoins(0x0,![],_0x31e796['basecoin']);_0x5527e8=cloneDeep(_0x475fed[0x1]);}else _0x5527e8=cloneDeep(currentCoinsAll);if(_0x31e796['basecoin']=='')proxyEmit(_0x45632e(0x28c),_0x5527e8);else{_0x5527e8[_0x45632e(0x26d)](_0x2e3aa6=>{const _0x56f1e9=_0x45632e;if(_0x2e3aa6[_0x56f1e9(0x1f5)]!=_0x31e796[_0x56f1e9(0x2fc)]&&allSymbols[_0x56f1e9(0x237)](_0x2e3aa6[_0x56f1e9(0x2ce)]))_0x55ed3a[_0x56f1e9(0x2b6)](_0x2e3aa6[_0x56f1e9(0x2ce)]);});if(_0x55ed3a[_0x45632e(0x2c4)]==0x0)logHistory(_0x45632e(0x2d6),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x455b25=await getTickers(_0x55ed3a);}catch(_0x3dbe97){if(_0x3dbe97[_0x45632e(0x1bb)]()[_0x45632e(0x237)]('AuthenticationError')){proxyEmit(_0x45632e(0x28c),![]);return;}else handleError(_0x3dbe97,_0x45632e(0x24c));}_0x5527e8[_0x45632e(0x26d)](_0x277632=>{const _0x48dbca=_0x45632e;_0x277632['coin']!=_0x31e796['basecoin']?_0x455b25[_0x277632['symbol']]?_0x33b88c=_0x277632[_0x48dbca(0x236)]?0x1/_0x455b25[_0x277632[_0x48dbca(0x2ce)]][_0x48dbca(0x197)]:_0x455b25[_0x277632[_0x48dbca(0x2ce)]][_0x48dbca(0x197)]:_0x33b88c=0x0:_0x33b88c=0x1,_0x277632[_0x48dbca(0x1da)]=formatResult(_0x33b88c,0x8);}),proxyEmit('portfolio',_0x5527e8);}}}function truncateTradeAmount(_0x1051a8,_0x492404){const _0x61172d=_0xdb28c7;let _0x572063=0x0;try{_0x572063=exchange[_0x61172d(0x1cc)](_0x1051a8,_0x492404);}catch(_0x3b6797){}return _0x572063;}function checkMinimums(_0x278d94){const _0x376315=_0xdb28c7;let _0x289cdb=!![];const _0x47b5fa=!_0x278d94[_0x376315(0x236)]?markets[_0x278d94['symbol']][_0x376315(0x2b8)][_0x376315(0x20b)][_0x376315(0x1c5)]:markets[_0x278d94[_0x376315(0x2ce)]]['limits']['cost'][_0x376315(0x1c5)],_0x176b54=!_0x278d94['reverse']?markets[_0x278d94[_0x376315(0x2ce)]]['limits'][_0x376315(0x30a)]['min']:markets[_0x278d94[_0x376315(0x2ce)]][_0x376315(0x2b8)]['amount'][_0x376315(0x1c5)],_0x4e84d1=truncateTradeAmount(_0x278d94['symbol'],_0x278d94[_0x376315(0x1b8)]);_0x278d94[_0x376315(0x1b8)]=_0x4e84d1;if(Math[_0x376315(0x1ae)](_0x4e84d1)<_0x47b5fa)_0x289cdb=![];if(Math['abs'](_0x4e84d1)*_0x278d94[_0x376315(0x197)]<_0x176b54)_0x289cdb=![];if(_0x278d94[_0x376315(0x23b)]=='sell'){let _0xfbcd0b=config[_0x376315(0x28c)]['find'](_0x3e9d3c=>_0x3e9d3c[_0x376315(0x1f5)]==_0x278d94[_0x376315(0x1f5)]);if(_0xfbcd0b['offset']>0x0){if(Math['abs'](_0x4e84d1)>_0x278d94[_0x376315(0x22d)]-_0xfbcd0b[_0x376315(0x199)])_0x289cdb=![];}else{if(Math[_0x376315(0x1ae)](_0x4e84d1)>_0x278d94['number'])_0x289cdb=![];}}if(_0x278d94[_0x376315(0x23b)]==_0x376315(0x2dc)){let _0x3cb10f=config[_0x376315(0x28c)][_0x376315(0x2a5)](_0x3e6908=>_0x3e6908[_0x376315(0x1f5)]==config[_0x376315(0x2fc)]),_0x29862c=currentCoins[_0x376315(0x2a5)](_0x28cd48=>_0x28cd48[_0x376315(0x1f5)]==config[_0x376315(0x2fc)]);if(_0x3cb10f[_0x376315(0x199)]>0x0){if(Math[_0x376315(0x1ae)](_0x4e84d1)*_0x278d94['last']>_0x29862c[_0x376315(0x22d)]-_0x3cb10f[_0x376315(0x199)])_0x289cdb=![];}else{if(Math[_0x376315(0x1ae)](_0x4e84d1)*_0x278d94[_0x376315(0x197)]>_0x29862c[_0x376315(0x22d)])_0x289cdb=![];}}return _0x289cdb;}function _0x292a(_0xe7ea63,_0x566c20){const _0x1ddc97=_0x11bc();return _0x292a=function(_0x1e374c,_0x48fe58){_0x1e374c=_0x1e374c-0x189;let _0x11bc09=_0x1ddc97[_0x1e374c];return _0x11bc09;},_0x292a(_0xe7ea63,_0x566c20);}async function getBalances(_0x212e68=!![]){const _0x2ea0d9=_0xdb28c7;let _0x3ddc8f=0x0,_0x1a6df;const _0x1860b1=config['threshold'];if(config[_0x2ea0d9(0x1aa)]&&config['change24h']<0x0)await validate24hChanges();currentCoins[_0x2ea0d9(0x26d)](_0x4880e4=>{const _0x23fbaa=_0x2ea0d9;if(_0x4880e4['coin']!=config[_0x23fbaa(0x2fc)]){let _0x4a76ee=global[_0x23fbaa(0x307)][noslash(_0x4880e4[_0x23fbaa(0x2ce)])];_0x1a6df=_0x4880e4[_0x23fbaa(0x236)]?0x1/_0x4a76ee:_0x4a76ee;}else _0x1a6df=0x1;let _0x3b10e8=_0x4880e4[_0x23fbaa(0x22d)]*_0x1a6df;_0x3ddc8f+=_0x3b10e8,_0x4880e4[_0x23fbaa(0x197)]=formatResult(Number(_0x1a6df),0x8),_0x4880e4[_0x23fbaa(0x301)]=_0x3b10e8;}),currentCoins[_0x2ea0d9(0x26d)](_0x4536b4=>{const _0x1e8e90=_0x2ea0d9;let _0x566126=config['portfolio']['find'](_0x270f84=>_0x270f84[_0x1e8e90(0x1f5)]==_0x4536b4['coin']),_0x22ddc1=Number(_0x566126[_0x1e8e90(0x295)]),_0xcd2392=_0x4536b4[_0x1e8e90(0x301)]/_0x3ddc8f*0x64,_0x56344d=_0x22ddc1*_0x3ddc8f/0x64/_0x4536b4['last']-_0x4536b4['number'];_0x4536b4[_0x1e8e90(0x295)]=formatResult(_0xcd2392,0x3),_0x4536b4[_0x1e8e90(0x264)]=formatResult(_0x22ddc1,0x3),_0x4536b4['trade']=formatResult(_0x56344d,0x8),_0x4536b4[_0x1e8e90(0x23b)]='',_0x4536b4[_0x1e8e90(0x314)]=![];if(_0x4536b4[_0x1e8e90(0x1f5)]!=config[_0x1e8e90(0x2fc)]){if(_0x4536b4[_0x1e8e90(0x295)]>_0x22ddc1)_0x4536b4[_0x1e8e90(0x23b)]=_0x1e8e90(0x2ca),_0x4536b4['valid']=checkMinimums(_0x4536b4);else _0x4536b4['distribution']<_0x22ddc1&&(_0x4536b4['side']=_0x1e8e90(0x2dc),_0x4536b4[_0x1e8e90(0x314)]=checkMinimums(_0x4536b4));}_0x4536b4['delta']=_0x4536b4['distribution']/_0x4536b4[_0x1e8e90(0x264)]-0x1;if(_0x4536b4[_0x1e8e90(0x206)]==_0x1e8e90(0x271)||_0x4536b4[_0x1e8e90(0x206)]=='canceled')_0x4536b4['orderstatus']=_0x1e8e90(0x19d);}),currentCoins[_0x2ea0d9(0x243)]((_0x1bb84e,_0x1789d7)=>_0x1bb84e[_0x2ea0d9(0x2ed)]<_0x1789d7[_0x2ea0d9(0x2ed)]?0x1:_0x1789d7['delta']<_0x1bb84e[_0x2ea0d9(0x2ed)]?-0x1:0x0);const _0x48cb18=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x48cb18['eur'],'usd':_0x48cb18[_0x2ea0d9(0x26e)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1860b1},proxyEmit(_0x2ea0d9(0x1c4),{'serverversion':serverversion,'balances':lastBalances});if(_0x212e68){if(config[_0x2ea0d9(0x1aa)])headlessMode({'portfolio':currentCoins,'threshold':_0x1860b1});else{if(lockOrders==ORDERS[_0x2ea0d9(0x1fa)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1860b1});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3478b4=getNormalizedPerformance();getStartingBalances(_0x3478b4),emitPerformance(_0x3478b4);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x119184=getNormalizedPerformance();emitPerformance(_0x119184),getStartingBalances(_0x119184),logger[_0x2ea0d9(0x30d)](_0x2ea0d9(0x31d));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x711e97=_0xdb28c7;if(!lastBalances)return;let _0x220f8b=[],_0x571a0f,_0x4d95eb=JSON[_0x711e97(0x1c1)](lastBalances[_0x711e97(0x28c)]);_0x4d95eb['sort']((_0x3bda00,_0xf4fbda)=>_0x3bda00[_0x711e97(0x1f5)]>_0xf4fbda['coin']?0x1:_0xf4fbda[_0x711e97(0x1f5)]>_0x3bda00[_0x711e97(0x1f5)]?-0x1:0x0),_0x4d95eb[_0x711e97(0x26d)](_0x2cf131=>{const _0x1c6a3d=_0x711e97;let _0x420385={'coin':_0x2cf131[_0x1c6a3d(0x1f5)],'number':_0x2cf131[_0x1c6a3d(0x22d)],'price':_0x2cf131['last']};_0x220f8b['push'](_0x420385);});const _0x381af4=await getFiat();_0x571a0f={'date':lastBalances[_0x711e97(0x274)][_0x711e97(0x2a8)]('\x20')[0x0],'eur':_0x381af4[_0x711e97(0x1ff)],'usd':_0x381af4['usd'],'coins':_0x220f8b};let _0x369a0e=dbPerformance[_0x711e97(0x291)](_0x711e97(0x1d2))[_0x711e97(0x2a5)]({'date':_0x571a0f[_0x711e97(0x1f4)]})[_0x711e97(0x301)]();_0x369a0e?_0x571a0f['date']!=config[_0x711e97(0x2d4)]&&dbPerformance[_0x711e97(0x291)](_0x711e97(0x1d2))[_0x711e97(0x2a5)]({'date':_0x571a0f['date']})[_0x711e97(0x2b0)](_0x571a0f)[_0x711e97(0x227)]():dbPerformance['get']('data')[_0x711e97(0x2b6)](_0x571a0f)[_0x711e97(0x227)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x12cb46=_0xdb28c7;let _0x57f816=[];if(dbPerformance[_0x12cb46(0x1d3)]('data')['value']()){let _0x3745ad=dbPerformance[_0x12cb46(0x291)](_0x12cb46(0x1d2))['cloneDeep']()['filter'](_0x4d85d7=>{const _0x4c4910=_0x12cb46;if(_0x4d85d7['coins'][_0x4c4910(0x2c4)]==0x0)return![];else return!![];})['sortBy'](_0x12cb46(0x1f4))[_0x12cb46(0x301)](),_0xbd1ad=[...config[_0x12cb46(0x1b4)]];_0xbd1ad['sort']((_0x30a77c,_0x138199)=>_0x30a77c[_0x12cb46(0x1f4)]>_0x138199['date']?-0x1:_0x138199[_0x12cb46(0x1f4)]>_0x30a77c[_0x12cb46(0x1f4)]?0x1:0x0);let _0x4d7f2c=0x1,_0x4ca0a5=[],_0x4209e6=0x0;_0x3745ad['slice']()[_0x12cb46(0x236)]()['forEach']((_0x2ad13e,_0x3865a6)=>{const _0x32cf3f=_0x12cb46;if(_0xbd1ad[_0x4209e6]){if(_0x3745ad[_0x3745ad[_0x32cf3f(0x2c4)]-_0x3865a6]&&_0xbd1ad[_0x4209e6][_0x32cf3f(0x1f4)]==_0x3745ad[_0x3745ad[_0x32cf3f(0x2c4)]-_0x3865a6]['date']){if(_0x3865a6<_0x3745ad['length']){let _0x1840f6=0x0,_0x46c8e6=0x0;_0x3745ad[_0x3745ad[_0x32cf3f(0x2c4)]-_0x3865a6][_0x32cf3f(0x2bd)][_0x32cf3f(0x26d)](_0x10fc39=>{const _0x4b83ad=_0x32cf3f;_0x46c8e6+=_0x10fc39[_0x4b83ad(0x22d)]*_0x10fc39[_0x4b83ad(0x1da)];}),_0xbd1ad[_0x4209e6]['changes']['forEach'](_0x20b004=>{const _0x15cbec=_0x32cf3f;_0x1840f6+=_0x20b004[_0x15cbec(0x22d)]*_0x20b004[_0x15cbec(0x1da)];}),_0x4d7f2c*=_0x1840f6/(_0x46c8e6-_0x1840f6)+0x1;}_0x4209e6++;}}let _0x3234d8=0x0;_0x2ad13e[_0x32cf3f(0x2bd)][_0x32cf3f(0x26d)](_0x8911b2=>{const _0x4fb62a=_0x32cf3f;_0x3234d8+=_0x8911b2[_0x4fb62a(0x22d)]*_0x8911b2[_0x4fb62a(0x1da)];}),_0x4ca0a5[_0x3745ad[_0x32cf3f(0x2c4)]-_0x3865a6-0x1]=_0x3234d8*(_0x4d7f2c-0x1);});let _0x1e3149=[];_0xbd1ad=[...config[_0x12cb46(0x1b4)]]||[];let _0x32d82f=0x0;_0x4209e6=0x0,_0x3745ad[_0x12cb46(0x26d)]((_0x40a1a1,_0x2c3059)=>{const _0x4d8259=_0x12cb46;if(_0xbd1ad[_0x4209e6]){const _0x1c4001=fns[_0x4d8259(0x1c1)](_0xbd1ad[_0x4209e6][_0x4d8259(0x1f4)],_0x4d8259(0x216),new Date()),_0x493093=fns[_0x4d8259(0x1c1)](_0x40a1a1['date'],_0x4d8259(0x216),new Date());if(fns[_0x4d8259(0x254)](_0x1c4001,_0x493093)){let _0x1883df=0x0;_0xbd1ad[_0x4209e6][_0x4d8259(0x18e)][_0x4d8259(0x26d)](_0x2cee65=>{const _0x584ba9=_0x4d8259;!_0x1e3149[_0x2cee65[_0x584ba9(0x1f5)]]?_0x1e3149[_0x2cee65[_0x584ba9(0x1f5)]]=_0x2cee65[_0x584ba9(0x22d)]:(_0x1883df=_0x1e3149[_0x2cee65['coin']],_0x1e3149[_0x2cee65['coin']]+=_0x2cee65[_0x584ba9(0x22d)]);const _0x2e8287=_0x40a1a1[_0x584ba9(0x2bd)][_0x584ba9(0x2a5)](_0x492e15=>_0x492e15['coin']==_0x2cee65[_0x584ba9(0x1f5)]);(!_0x2e8287||_0x2e8287[_0x584ba9(0x22d)]==0x0)&&(_0x32d82f+=(-_0x2cee65[_0x584ba9(0x22d)]-_0x1883df)*_0x2cee65[_0x584ba9(0x1da)]);}),_0x4209e6++;}}_0x40a1a1['coins']['forEach']((_0x317d65,_0x43fa89)=>{const _0x4facc6=_0x4d8259;_0x1e3149[_0x317d65['coin']]&&(_0x317d65[_0x4facc6(0x25f)]=_0x1e3149[_0x317d65[_0x4facc6(0x1f5)]]);}),_0x57f816[_0x4d8259(0x2b6)]({'date':_0x40a1a1[_0x4d8259(0x1f4)],'eur':_0x40a1a1[_0x4d8259(0x1ff)],'usd':_0x40a1a1[_0x4d8259(0x26e)],'offset':_0x4ca0a5[_0x2c3059],'netoffset':_0x32d82f,'coins':_0x40a1a1[_0x4d8259(0x2bd)]});});}return _0x57f816;}function emitPerformance(_0x4cccd9){const _0x331045=_0xdb28c7;_0x4cccd9[_0x331045(0x2c4)]!==0x0?(proxyEmit(_0x331045(0x191),_0x4cccd9),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x43bdf9,_0x602f9f){const _0x1fc77b=_0xdb28c7;let _0x5ebeb0=0x0,_0x4de7e7=0x0,_0x1df55b=0x0;_0x43bdf9['coins'][_0x1fc77b(0x26d)](_0x379961=>{_0x5ebeb0+=_0x379961['number']*_0x379961['price'];});_0x602f9f&&(_0x5ebeb0+=_0x43bdf9[_0x1fc77b(0x199)]);if(config[_0x1fc77b(0x2fc)]===_0x1fc77b(0x20c)||config[_0x1fc77b(0x2fc)]===_0x1fc77b(0x306))_0x4de7e7=_0x5ebeb0*_0x43bdf9[_0x1fc77b(0x1ff)],_0x1df55b=_0x5ebeb0*_0x43bdf9['usd'];else{if(usdBasecoins[_0x1fc77b(0x237)](config[_0x1fc77b(0x2fc)]))_0x4de7e7=_0x5ebeb0*_0x43bdf9[_0x1fc77b(0x1ff)]/_0x43bdf9[_0x1fc77b(0x26e)],_0x1df55b=_0x5ebeb0;else config['basecoin']===_0x1fc77b(0x1ea)&&(_0x4de7e7=_0x5ebeb0,_0x1df55b=_0x5ebeb0*_0x43bdf9[_0x1fc77b(0x26e)]/_0x43bdf9[_0x1fc77b(0x1ff)]);}return[_0x5ebeb0,_0x4de7e7,_0x1df55b];}function getKPIs(_0x3e0cc7,_0x4239a4=_0xdb28c7(0x1ea)){const _0x3d094c=_0xdb28c7,_0x4fbf53=config['basecoin'],_0x2e5d4e=lastBalances,_0x1e6471=currentCoins,_0x366a83=getNormalizedPerformance(),_0x271913=_0x3e0cc7===_0x3d094c(0x2fc)?_0x4fbf53:_0x3e0cc7===_0x3d094c(0x1db)||_0x3e0cc7==='net-fiat'?_0x4239a4:_0x3d094c(0x1a3)+_0x4fbf53,_0x474e50=_0x3e0cc7===_0x3d094c(0x1a4)?'Net\x20effect':_0x3e0cc7==='net-fiat'?_0x3d094c(0x219):_0x271913+'\x20value',_0x4babf3=_0x3e0cc7===_0x3d094c(0x1a4)||_0x3e0cc7===_0x3d094c(0x30f)?_0x3d094c(0x219):_0x271913+_0x3d094c(0x1a9);let _0x2d8c14=0x0;_0x1e6471[_0x3d094c(0x26d)](_0x23e263=>{const _0x278091=_0x3d094c;_0x2d8c14+=_0x23e263[_0x278091(0x22d)]*_0x23e263[_0x278091(0x197)];});if(_0x3e0cc7==='fiat'||_0x3e0cc7===_0x3d094c(0x30f)){if(_0x4fbf53===_0x3d094c(0x20c)||_0x4fbf53===_0x3d094c(0x306))_0x2d8c14=_0x2d8c14*(_0x4239a4===_0x3d094c(0x1ea)?_0x2e5d4e[_0x3d094c(0x1ff)]:_0x2e5d4e[_0x3d094c(0x26e)]);else{if(usdBasecoins[_0x3d094c(0x237)](_0x4fbf53))_0x2d8c14=_0x2d8c14*(_0x4239a4===_0x3d094c(0x1ea)?_0x2e5d4e[_0x3d094c(0x1ff)]/_0x2e5d4e[_0x3d094c(0x26e)]:0x1);else _0x4fbf53===_0x3d094c(0x1ea)&&(_0x2d8c14=_0x2d8c14*(_0x4239a4===_0x3d094c(0x1ea)?0x1:_0x2e5d4e['usd']/_0x2e5d4e[_0x3d094c(0x1ff)]));}}let _0x4c187d;if(_0x2d8c14!==0x0){if(_0x3e0cc7==='basecoin')_0x4c187d=(_0x2d8c14/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4239a4===_0x3d094c(0x1ea))_0x4c187d=(_0x2d8c14/startingBalances[_0x3d094c(0x1ff)]-0x1)*0x64;else _0x4c187d=(_0x2d8c14/startingBalances[_0x3d094c(0x26e)]-0x1)*0x64;}let _0x5a6b77=0x0;if(startingBalances['coins'])_0x1e6471[_0x3d094c(0x26d)](_0x3c1fa5=>{const _0x14094f=_0x3d094c;let _0x5bfa56=startingBalances[_0x14094f(0x2bd)]['find'](_0x5967ee=>_0x5967ee[_0x14094f(0x1f5)]===_0x3c1fa5['coin']);if(_0x5bfa56&&_0x5bfa56['coin']&&_0x3c1fa5[_0x14094f(0x22d)]!==0x0)_0x5a6b77+=_0x5bfa56[_0x14094f(0x22d)]*_0x3c1fa5[_0x14094f(0x197)];});let _0x53c9df=0x0;if(_0x366a83[_0x3d094c(0x2c4)]!==0x0){let _0x2bb26d=_0x366a83[_0x366a83[_0x3d094c(0x2c4)]-0x1];_0x53c9df=_0x2bb26d['netoffset'];}_0x5a6b77-=_0x53c9df;_0x3e0cc7===_0x3d094c(0x1a4)&&(_0x4c187d=(_0x2d8c14-_0x5a6b77)/startingBalances[_0x3d094c(0x2fc)]*0x64,_0x2d8c14=_0x2d8c14-_0x5a6b77);if(_0x3e0cc7===_0x3d094c(0x30f)){let _0x42df77=_0x4239a4===_0x3d094c(0x1ea)?startingBalances[_0x3d094c(0x1ff)]:startingBalances[_0x3d094c(0x26e)];if(_0x4fbf53===_0x3d094c(0x20c)||_0x4fbf53==='ETH')_0x5a6b77=_0x4239a4===_0x3d094c(0x1ea)?_0x5a6b77*_0x2e5d4e[_0x3d094c(0x1ff)]:_0x5a6b77*_0x2e5d4e[_0x3d094c(0x26e)];else{if(usdBasecoins['includes'](_0x4fbf53))_0x5a6b77=_0x4239a4===_0x3d094c(0x1ea)?_0x5a6b77*_0x2e5d4e[_0x3d094c(0x1ff)]/_0x2e5d4e[_0x3d094c(0x26e)]:_0x5a6b77;else _0x4fbf53===_0x3d094c(0x1ea)&&(_0x5a6b77=_0x4239a4===_0x3d094c(0x1ea)?_0x5a6b77:_0x5a6b77*_0x2e5d4e[_0x3d094c(0x26e)]/_0x2e5d4e[_0x3d094c(0x1ff)]);}_0x4c187d=(_0x2d8c14-_0x5a6b77)/_0x42df77*0x64,_0x2d8c14=_0x2d8c14-_0x5a6b77;}if(_0x4c187d){if(_0x4c187d<0x64)_0x4c187d=_0x4c187d['toFixed'](0x2);else{if(_0x4c187d<0x3e8)_0x4c187d=_0x4c187d[_0x3d094c(0x205)](0x1);else _0x4c187d=_0x4c187d['toFixed'](0x0);}}else _0x4c187d=Number('0')[_0x3d094c(0x205)](0x2);if(_0x2d8c14){if(Math['abs'](_0x2d8c14)<0.000001)_0x2d8c14=_0x2d8c14[_0x3d094c(0x205)](0x2);else{if(Math['abs'](_0x2d8c14)<0.1)_0x2d8c14=_0x2d8c14['toFixed'](0x6);else{if(Math[_0x3d094c(0x1ae)](_0x2d8c14)<0x1)_0x2d8c14=_0x2d8c14[_0x3d094c(0x205)](0x5);else{if(Math[_0x3d094c(0x1ae)](_0x2d8c14)<0xa)_0x2d8c14=_0x2d8c14['toFixed'](0x4);else{if(Math[_0x3d094c(0x1ae)](_0x2d8c14)<0x64)_0x2d8c14=_0x2d8c14['toFixed'](0x3);else{if(Math[_0x3d094c(0x1ae)](_0x2d8c14)<0x3e8)_0x2d8c14=_0x2d8c14[_0x3d094c(0x205)](0x2);else _0x2d8c14=_0x2d8c14[_0x3d094c(0x205)](0x2);}}}}}}else _0x2d8c14=Number('0')[_0x3d094c(0x205)](0x2);}else _0x4c187d=Number('0')[_0x3d094c(0x205)](0x2);return{'value':_0x2d8c14,'change':_0x4c187d,'leftTxt':_0x474e50,'rightTxt':_0x4babf3};}async function getStartingBalances(_0x5c81f9,_0x3f1f80=!![]){const _0xa060ad=_0xdb28c7;if(_0x5c81f9[_0xa060ad(0x2c4)]!==0x0){const [_0x4bb0ee,_0x13f26d,_0x599f56]=getPerf(_0x5c81f9[0x0],!![]);let _0x3b4f48=[];config[_0xa060ad(0x28c)][_0xa060ad(0x26d)](_0x3f5526=>{const _0x7597de=_0xa060ad;let _0xe5f8ae=0x0,_0x4b8480;config[_0x7597de(0x1b4)][_0x7597de(0x26d)](_0x5bc476=>{const _0x32c2dd=_0x7597de;let _0x388a97=_0x5bc476[_0x32c2dd(0x18e)][_0x32c2dd(0x2a5)](_0x5fde5a=>_0x5fde5a[_0x32c2dd(0x1f5)]==_0x3f5526['coin']);if(_0x388a97){_0xe5f8ae+=_0x388a97[_0x32c2dd(0x22d)];if(!_0x4b8480)_0x4b8480=_0x388a97['price'];}}),_0x3b4f48[_0x7597de(0x2b6)]({'coin':_0x3f5526[_0x7597de(0x1f5)],'number':_0xe5f8ae,'initialprice':_0x4b8480});});const _0x56c4dd={'basecoin':_0x4bb0ee,'eur':_0x13f26d,'usd':_0x599f56,'coins':_0x3b4f48};if(_0x3f1f80)proxyEmit('starting-balances',_0x56c4dd);startingBalances=_0x56c4dd;}}function headlessMode(_0xb1ca8e){const _0x14b675=_0xdb28c7;let _0x203ef6=_0xb1ca8e[_0x14b675(0x28c)],_0x5fe06f=_0xb1ca8e['threshold'],_0xc03b52=[];for(let _0x20c9aa of _0x203ef6){if(_0x20c9aa[_0x14b675(0x1f5)]!=config[_0x14b675(0x2fc)]){if(_0x20c9aa[_0x14b675(0x2ed)]>=_0x5fe06f/0x64){if(_0x20c9aa['valid'])_0xc03b52['push'](_0x20c9aa);}else{if(_0x20c9aa['delta']<=-_0x5fe06f/0x64){if(_0x20c9aa[_0x14b675(0x314)])_0xc03b52['push'](_0x20c9aa);}}}}_0xc03b52[_0x14b675(0x2c4)]>0x0&&(lockOrders==ORDERS[_0x14b675(0x1fa)]&&!coolingDown&&_0xc03b52[_0x14b675(0x26d)](_0x534682=>{const _0x341f5f=_0x14b675;logger[_0x341f5f(0x30d)](_0x341f5f(0x23e)+_0x534682[_0x341f5f(0x1f5)]+'\x20'+_0x534682[_0x341f5f(0x22d)]+'\x20'+_0x534682[_0x341f5f(0x197)]+'\x20'+_0x534682[_0x341f5f(0x295)]+'%\x20'+_0x534682[_0x341f5f(0x264)]+'%\x20'+(0x64*_0x534682[_0x341f5f(0x2ed)])[_0x341f5f(0x205)](0x2)+_0x341f5f(0x2cd)+_0x5fe06f[_0x341f5f(0x205)](0x2)+'%)');}),placeOrder(_0xc03b52));}function notifyBalance(_0x3f5a02){const _0x4dca0a=_0xdb28c7;let _0x352995=_0x3f5a02[_0x4dca0a(0x28c)],_0x937ac8=_0x3f5a02[_0x4dca0a(0x2e7)],_0x1ef704=[];for(let _0x11d6c8 of _0x352995){if(_0x11d6c8['coin']!=config[_0x4dca0a(0x2fc)]){if(_0x11d6c8['delta']>=_0x937ac8/0x64){if(_0x11d6c8[_0x4dca0a(0x314)])_0x1ef704['push'](_0x11d6c8);}else{if(_0x11d6c8[_0x4dca0a(0x2ed)]<=-_0x937ac8/0x64){if(_0x11d6c8[_0x4dca0a(0x314)])_0x1ef704[_0x4dca0a(0x2b6)](_0x11d6c8);}}}}if(_0x1ef704[_0x4dca0a(0x2c4)]>0x0){let _0x417f1e=_0x1ef704[_0x4dca0a(0x303)](_0x412f6a=>_0x412f6a['coin']);_0x417f1e[_0x4dca0a(0x243)]();let _0x8415b7=_0x417f1e[_0x4dca0a(0x1b9)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x8415b7;}}function symbolToCoin(_0x2b09b6){const _0x120e39=_0xdb28c7;let _0x1615ae;if(_0x2b09b6[_0x120e39(0x237)]('/'+config[_0x120e39(0x2fc)]))_0x1615ae=_0x2b09b6['replace']('/'+config['basecoin'],'');if(_0x2b09b6['includes'](config[_0x120e39(0x2fc)]+'/'))_0x1615ae=_0x2b09b6[_0x120e39(0x1ba)](config['basecoin']+'/','');return _0x1615ae;}async function unlockOrders(){const _0x437621=_0xdb28c7;if(allOrdersPlaced&&lockOrders==ORDERS[_0x437621(0x22f)]){logger[_0x437621(0x30d)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x437621(0x2c0)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5d54db=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5d54db,validateOrdersState=_0x437621(0x25f),persistOpenOrders([]),lockOrders=ORDERS[_0x437621(0x1fa)],logger[_0x437621(0x30d)](_0x437621(0x221));}}async function validateOrders(_0x4950dc){const _0x48f6ac=_0xdb28c7;if(_0x4950dc)validateOrdersState=_0x4950dc;logger[_0x48f6ac(0x30d)](_0x48f6ac(0x2b1)+validateOrdersState+_0x48f6ac(0x261)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x48f6ac(0x220):'ORDERS.UNLOCKED'));let _0x393c81=[],_0x5d4c75=config[_0x48f6ac(0x2e8)]==_0x48f6ac(0x1c7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x48f6ac(0x231)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x48f6ac(0x22f)])return;logger[_0x48f6ac(0x30d)](_0x48f6ac(0x2df)+validateOrdersState),lastOrders['forEach'](_0xc6c1b7=>{const _0x394e0c=_0x48f6ac;let _0xd23786=![];_0xc6c1b7[_0x394e0c(0x271)]>0x0&&(_0xd23786=!![]),_0x393c81[_0x394e0c(0x2b6)](_0xd23786),_0xd23786&&config[_0x394e0c(0x2e8)]!=_0x394e0c(0x1c7)&&logHistory(_0x394e0c(0x269),_0x394e0c(0x286)+_0xc6c1b7[_0x394e0c(0x2ce)]+'\x20'+_0xc6c1b7[_0x394e0c(0x23b)]+'\x20#'+formatResult(_0xc6c1b7['filled'],0x8)+'\x20@'+formatResult(_0xc6c1b7[_0x394e0c(0x1da)],0x8));}),_0x393c81[_0x48f6ac(0x26d)]((_0x76acb,_0x51d752)=>{const _0x43a053=_0x48f6ac;if(_0x76acb)lastOrders[_0x43a053(0x285)](_0x51d752,0x1);}),persistOpenOrders(lastOrders);const _0x3c7b9b=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x48f6ac(0x1f2);if(validateOrdersState==_0x48f6ac(0x25f)){validateOrdersState=_0x48f6ac(0x2fe);if(_0x393c81[_0x48f6ac(0x237)](![])){if(config['ordertype']==_0x48f6ac(0x1c7)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x48f6ac(0x2fe)){if(_0x393c81['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x48f6ac(0x2e8)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x48f6ac(0x2e2))_0x393c81[_0x48f6ac(0x237)](![])&&(config[_0x48f6ac(0x2e8)]==_0x48f6ac(0x1c7)?logHistory('success',_0x48f6ac(0x1a1)+Math[_0x48f6ac(0x2eb)](_0x5d4c75*validateOrderInterval/0xea60)+_0x48f6ac(0x28a)+_0x3c7b9b):(await cancelOrders(),logHistory('success',_0x48f6ac(0x2f3)+Math[_0x48f6ac(0x2eb)](_0x5d4c75*validateOrderInterval/0xea60)+_0x48f6ac(0x28a)+_0x3c7b9b))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x48f6ac(0x2e8)]!=_0x48f6ac(0x1c7))logHistory(_0x48f6ac(0x193),_0x48f6ac(0x253)+_0x3c7b9b);await unlockOrders();}}}}}async function cancelOrders(){const _0x1670d8=_0xdb28c7;lastOrders[_0x1670d8(0x26d)](async _0x2683ea=>{const _0x5c8539=_0x1670d8;try{const _0x12ff99=await exchange[_0x5c8539(0x28f)](_0x2683ea['orderId'],_0x2683ea[_0x5c8539(0x2ce)]);}catch(_0x908008){if(_0x908008[_0x5c8539(0x1bb)]()['includes'](_0x5c8539(0x313))){}else await handleError(_0x908008,'cancelOrders()');}});}async function initCoinResults(_0x1342d6){const _0x3006ec=_0xdb28c7;_0x1342d6?logger['debug'](_0x3006ec(0x18d)+_0x1342d6):logger[_0x3006ec(0x30d)]('Initializing\x20coin\x20results'),config[_0x3006ec(0x28c)]['forEach'](_0x652789=>{const _0x4dad6a=_0x3006ec;if(!_0x652789[_0x4dad6a(0x2c7)]&&_0x652789[_0x4dad6a(0x1f5)]!=config[_0x4dad6a(0x2fc)]){const _0xdd903b=currentCoins[_0x4dad6a(0x2a5)](_0x3fcf8e=>_0x3fcf8e['coin']==_0x652789['coin']),_0x204a5f=global['ticker'][noslash(_0x652789['symbol'])];let _0x7cb254=_0xdd903b?_0xdd903b[_0x4dad6a(0x22d)]:null,_0x3d493a=_0x652789[_0x4dad6a(0x236)]?0x1/_0x204a5f:_0x204a5f,_0x24ce7a;config['liquidity'][_0x4dad6a(0x26d)](_0x54609b=>{const _0x2903d9=_0x4dad6a;!_0x24ce7a&&(_0x24ce7a=_0x54609b[_0x2903d9(0x18e)]['find'](_0x36d897=>_0x36d897['coin']==_0x652789['coin']),_0x24ce7a&&(_0x7cb254=_0x24ce7a[_0x2903d9(0x22d)],_0x3d493a=_0x24ce7a[_0x2903d9(0x1da)]));});let _0x3ba0ed=dbCoinResults[_0x4dad6a(0x291)](_0x4dad6a(0x2bd))[_0x4dad6a(0x2a5)]({'coin':_0x652789['coin']})[_0x4dad6a(0x301)]();if(!_0x3ba0ed){const _0x486e3e={'coin':_0x652789[_0x4dad6a(0x1f5)],'number':_0x7cb254,'breakeven':_0x3d493a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4dad6a(0x291)](_0x4dad6a(0x2bd))['push'](_0x486e3e)[_0x4dad6a(0x227)]();}else{if(_0x1342d6&&_0x652789[_0x4dad6a(0x1f5)]==_0x1342d6){const _0x54330c={'coin':_0x652789[_0x4dad6a(0x1f5)],'number':_0x7cb254,'breakeven':_0x3d493a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4dad6a(0x291)](_0x4dad6a(0x2bd))[_0x4dad6a(0x2a5)]({'coin':_0x652789[_0x4dad6a(0x1f5)]})[_0x4dad6a(0x2b0)](_0x54330c)['write']();}}}});}async function updateCoinResults(_0x245e0d,_0x1e5916=![]){const _0x42dccd=_0xdb28c7;let _0x2ad3e9,_0x9cd103,_0x8de62b,_0x2eb94d,_0x1f4550,_0x27b967,_0x42ef7c=dbCoinResults['get'](_0x42dccd(0x2bd))[_0x42dccd(0x2a5)]({'coin':_0x245e0d['coin']})[_0x42dccd(0x301)](),_0x1518d7=![];_0x42ef7c&&Object[_0x42dccd(0x21e)](_0x42ef7c)[_0x42dccd(0x26d)](([_0x3239b7,_0x6bb29f])=>{if(_0x6bb29f==null)_0x1518d7=!![];});(!_0x42ef7c||_0x1518d7)&&(await initCoinResults(_0x245e0d['coin']),_0x42ef7c=dbCoinResults['get'](_0x42dccd(0x2bd))['find']({'coin':_0x245e0d[_0x42dccd(0x1f5)]})['value']());_0x245e0d['reverse']&&(_0x27b967={'filled':_0x245e0d[_0x42dccd(0x271)]*_0x245e0d[_0x42dccd(0x1da)],'amount':_0x245e0d[_0x42dccd(0x271)]*_0x245e0d[_0x42dccd(0x1da)],'side':_0x245e0d['side']==_0x42dccd(0x2ca)?'buy':_0x42dccd(0x2ca),'price':0x1/_0x245e0d['price']},_0x245e0d={..._0x245e0d,..._0x27b967});_0x1e5916?_0x9cd103=_0x245e0d[_0x42dccd(0x23b)]==_0x42dccd(0x2dc)?_0x42ef7c[_0x42dccd(0x22d)]+_0x245e0d['filled']:_0x42ef7c[_0x42dccd(0x22d)]-_0x245e0d[_0x42dccd(0x271)]:_0x9cd103=await getCoinNumber(_0x245e0d[_0x42dccd(0x1f5)]);if(_0x245e0d[_0x42dccd(0x235)]&&_0x245e0d[_0x42dccd(0x235)][_0x42dccd(0x1bd)]==config[_0x42dccd(0x2fc)])_0x2ad3e9=_0x245e0d[_0x42dccd(0x235)][_0x42dccd(0x30a)];else{if(_0x245e0d[_0x42dccd(0x235)]&&_0x245e0d[_0x42dccd(0x235)][_0x42dccd(0x1bd)]==_0x42dccd(0x326)&&!_0x1e5916)_0x2ad3e9=_0x245e0d['fee']['cost']*global[_0x42dccd(0x307)][_0x42dccd(0x326)+config[_0x42dccd(0x2fc)]];else _0x2ad3e9=defaultFee*_0x245e0d[_0x42dccd(0x271)]*_0x245e0d[_0x42dccd(0x1da)];}_0x245e0d[_0x42dccd(0x23b)]==_0x42dccd(0x2dc)?(_0x8de62b=_0x9cd103!=0x0?(_0x42ef7c[_0x42dccd(0x1c3)]*_0x42ef7c[_0x42dccd(0x22d)]+_0x245e0d[_0x42dccd(0x1da)]*(_0x9cd103-_0x42ef7c[_0x42dccd(0x22d)])+_0x2ad3e9)/_0x9cd103:0x0,_0x2eb94d=_0x42ef7c[_0x42dccd(0x1b1)]):(_0x8de62b=_0x9cd103!=0x0?(_0x42ef7c[_0x42dccd(0x1c3)]*_0x42ef7c[_0x42dccd(0x22d)]-_0x245e0d[_0x42dccd(0x1da)]*(_0x42ef7c['number']-_0x9cd103)+_0x2ad3e9)/_0x9cd103:0x0,_0x2eb94d=_0x42ef7c[_0x42dccd(0x1b1)]+(_0x245e0d[_0x42dccd(0x1da)]-_0x42ef7c[_0x42dccd(0x1c3)])*_0x245e0d['filled']);_0x1f4550=(_0x245e0d['price']-_0x8de62b-_0x2ad3e9/_0x245e0d[_0x42dccd(0x271)])*_0x9cd103;let _0x4c2674={'coin':_0x245e0d[_0x42dccd(0x1f5)],'number':_0x9cd103,'breakeven':formatResult(_0x8de62b,0x8),'realized':formatResult(_0x2eb94d,0x8),'unrealized':formatResult(_0x1f4550,0x8),'fees':formatResult(_0x42ef7c[_0x42dccd(0x223)]+_0x2ad3e9,0x8),'sells':_0x245e0d[_0x42dccd(0x23b)]=='sell'?_0x42ef7c['sells']+0x1:_0x42ef7c[_0x42dccd(0x1e0)],'buys':_0x245e0d['side']==_0x42dccd(0x2dc)?_0x42ef7c[_0x42dccd(0x1fe)]+0x1:_0x42ef7c['buys']};dbCoinResults['get'](_0x42dccd(0x2bd))[_0x42dccd(0x2a5)]({'coin':_0x245e0d[_0x42dccd(0x1f5)]})[_0x42dccd(0x2b0)](_0x4c2674)['write']();if(!_0x1e5916){if(_0x245e0d[_0x42dccd(0x235)]&&_0x245e0d[_0x42dccd(0x235)][_0x42dccd(0x1bd)]==_0x42dccd(0x326)){const _0x1af0e2=currentCoins[_0x42dccd(0x2a5)](_0x441496=>_0x441496[_0x42dccd(0x1f5)]==_0x42dccd(0x326));if(_0x1af0e2){let _0x957b9a=dbCoinResults['get']('coins')['find']({'coin':'BNB'})[_0x42dccd(0x301)]();_0x4c2674={..._0x957b9a,'number':_0x1af0e2[_0x42dccd(0x22d)]},dbCoinResults[_0x42dccd(0x291)](_0x42dccd(0x2bd))['find']({'coin':'BNB'})[_0x42dccd(0x2b0)](_0x4c2674)['write']();}}}}async function placeOrder(_0x444c2d){const _0x1a2ea3=_0xdb28c7,_0x2337ae=config[_0x1a2ea3(0x2e8)]==_0x1a2ea3(0x1c7)?_0x1a2ea3(0x1c7):'limit';if(lockOrders==ORDERS[_0x1a2ea3(0x1fa)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1a2ea3(0x22f)],allOrdersPlaced=![],validateOrdersState=_0x1a2ea3(0x25f);let _0x3c01e7=![];lastOrders=[];for(const _0x4a28c0 of _0x444c2d){let _0x42d7b8,_0x5c1550,_0x26d775,_0x53064c,_0xaef208,_0x1cc4a7=_0x4a28c0[_0x1a2ea3(0x2ce)];try{const _0xf6860b=await exchange[_0x1a2ea3(0x2e6)](_0x1cc4a7);_0x42d7b8=_0x4a28c0[_0x1a2ea3(0x236)]?0x1/_0x4a28c0[_0x1a2ea3(0x197)]:_0x4a28c0[_0x1a2ea3(0x197)],_0x5c1550=_0xf6860b[_0x1a2ea3(0x259)],_0x26d775=_0xf6860b[_0x1a2ea3(0x1c8)];_0x4a28c0[_0x1a2ea3(0x236)]?(_0x53064c=_0x4a28c0['side']=='buy'?_0x1a2ea3(0x2ca):_0x1a2ea3(0x2dc),_0xaef208=Math[_0x1a2ea3(0x1ae)](_0x4a28c0['trade'])/_0x42d7b8):(_0x53064c=_0x4a28c0['side'],_0xaef208=Math[_0x1a2ea3(0x1ae)](_0x4a28c0['trade']));_0x2337ae==_0x1a2ea3(0x1c2)&&(config[_0x1a2ea3(0x2e8)]=='limit-high'&&(_0x42d7b8=_0x53064c==_0x1a2ea3(0x2dc)?_0x5c1550:_0x26d775),config[_0x1a2ea3(0x2e8)]=='limit-low'&&(_0x42d7b8=_0x53064c==_0x1a2ea3(0x2dc)?_0x26d775:_0x5c1550));_0xaef208=formatResult(_0xaef208,0x8),_0x42d7b8=formatResult(_0x42d7b8,0x8);const _0x54f54c=_0x53064c==_0x1a2ea3(0x2ca)?config[_0x1a2ea3(0x22e)]?String[_0x1a2ea3(0x22a)]('0x'+config['emojisell'])+'\x20':'':config[_0x1a2ea3(0x292)]?String[_0x1a2ea3(0x22a)]('0x'+config['emojibuy'])+'\x20':'',_0x1450f9=_0x2337ae==_0x1a2ea3(0x1c7)?'Market':config['ordertype']==_0x1a2ea3(0x25d)?_0x1a2ea3(0x323):_0x1a2ea3(0x230),_0x22a179=(Math['floor'](Math[_0x1a2ea3(0x20a)]()*0x35a4e900)+0x5f5e100)[_0x1a2ea3(0x1bb)]();lastOrders[_0x1a2ea3(0x2b6)]({'customId':_0x22a179,'symbol':_0x1cc4a7,'coin':_0x4a28c0[_0x1a2ea3(0x1f5)],'amount':_0xaef208,'price':_0x42d7b8,'side':_0x53064c,'reverse':_0x4a28c0[_0x1a2ea3(0x236)],'filled':0x0});if(_0x2337ae==_0x1a2ea3(0x1c7))logHistory(_0x1a2ea3(0x269),''+_0x54f54c+_0x1450f9+'\x20order:\x20'+_0x1cc4a7+'\x20'+_0x53064c+'\x20#'+formatResult(_0xaef208,0x8)+'\x20@'+formatResult(_0x42d7b8,0x8));else logHistory('order',''+_0x54f54c+_0x1450f9+'\x20order:\x20'+_0x1cc4a7+'\x20'+_0x53064c+'\x20#'+formatResult(_0xaef208,0x8)+'\x20@'+formatResult(_0x42d7b8,0x8));let _0x12ace6;_0x2337ae==_0x1a2ea3(0x1c7)?_0x53064c==_0x1a2ea3(0x2dc)&&[_0x1a2ea3(0x213),_0x1a2ea3(0x2a1),_0x1a2ea3(0x1ee),_0x1a2ea3(0x2f2),_0x1a2ea3(0x1d4)][_0x1a2ea3(0x237)](config[_0x1a2ea3(0x2a0)])?_0x12ace6=await exchange['createOrder'](_0x1cc4a7,_0x2337ae,_0x53064c,_0xaef208,_0x42d7b8):_0x12ace6=await exchange[_0x1a2ea3(0x266)](_0x1cc4a7,_0x2337ae,_0x53064c,_0xaef208,undefined):_0x12ace6=await exchange[_0x1a2ea3(0x266)](_0x1cc4a7,_0x2337ae,_0x53064c,_0xaef208,_0x42d7b8);logger[_0x1a2ea3(0x30d)](_0x1a2ea3(0x2af)+_0x12ace6['id']+_0x1a2ea3(0x329)+_0x22a179);const _0x545652=lastOrders[_0x1a2ea3(0x2c4)]-0x1;if(_0x545652>=0x0&&lastOrders[_0x545652][_0x1a2ea3(0x1ad)]==_0x22a179){lastOrders[_0x545652][_0x1a2ea3(0x19b)]=_0x12ace6['id'];if(_0x12ace6[_0x1a2ea3(0x20b)])lastOrders[_0x545652][_0x1a2ea3(0x20b)]=_0x12ace6['amount'];if(_0x12ace6[_0x1a2ea3(0x1da)])lastOrders[_0x545652][_0x1a2ea3(0x1da)]=_0x12ace6[_0x1a2ea3(0x1da)];lastOrders[_0x545652][_0x1a2ea3(0x235)]=_0x12ace6[_0x1a2ea3(0x235)];}if(config[_0x1a2ea3(0x198)]!=0x0){let _0x2edcef=null;if(cooldownTracker[_0x1a2ea3(0x2c4)]==config['cooldown']-0x1)_0x2edcef=cooldownTracker[_0x1a2ea3(0x30e)]();const _0x541ca1=getTimeStamp();cooldownTracker[_0x1a2ea3(0x2b6)](_0x541ca1);if(_0x2edcef){const _0x189cdb=fns[_0x1a2ea3(0x2c9)](new Date(_0x541ca1),new Date(_0x2edcef));if(_0x189cdb<cooldownInterval){logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x26f)+config[_0x1a2ea3(0x198)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x1a2ea3(0x2d5)+cooldownPeriod/(0xe10*0x3e8)+_0x1a2ea3(0x1cf)),coolingDown=!![];break;}}}}catch(_0x35b7ea){if(_0x35b7ea['toString']()[_0x1a2ea3(0x237)](_0x1a2ea3(0x2c2)))lastOrders=lastOrders['filter'](_0x5247c5=>_0x5247c5[_0x1a2ea3(0x2ce)]!=_0x1cc4a7),logHistory('error',_0x1a2ea3(0x1d5)+_0x1cc4a7),_0x3c01e7=!![];else{if(_0x35b7ea[_0x1a2ea3(0x1bb)]()[_0x1a2ea3(0x237)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x35cc6c=>_0x35cc6c[_0x1a2ea3(0x2ce)]!=_0x1cc4a7),logHistory('error',_0x1a2ea3(0x18f)+_0x1cc4a7),_0x3c01e7=!![];else{if(_0x35b7ea[_0x1a2ea3(0x1bb)]()[_0x1a2ea3(0x237)](_0x1a2ea3(0x215)))lastOrders=lastOrders[_0x1a2ea3(0x321)](_0x14a7cc=>_0x14a7cc[_0x1a2ea3(0x2ce)]!=_0x1cc4a7),logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x2c3)+_0x1cc4a7),logger[_0x1a2ea3(0x30d)](_0x35b7ea),_0x3c01e7=!![];else _0x35b7ea[_0x1a2ea3(0x1bb)]()[_0x1a2ea3(0x237)](_0x1a2ea3(0x20d))?(lastOrders=lastOrders[_0x1a2ea3(0x321)](_0xeefe12=>_0xeefe12[_0x1a2ea3(0x2ce)]!=_0x1cc4a7),logHistory('error',_0x1a2ea3(0x1d5)+_0x1cc4a7),_0x3c01e7=!![]):(lastOrders=lastOrders['filter'](_0x163a9b=>_0x163a9b['symbol']!=_0x1cc4a7),await handleError(_0x35b7ea,'placeOrder()',_0x1cc4a7));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1a2ea3(0x2c4)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5a0b5d=config['ordertype']==_0x1a2ea3(0x1c7)?validateOrderTimeout*0x3c*0x3e8:config[_0x1a2ea3(0x231)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x5a6ff4=_0x1a2ea3;validateOrders(_0x5a6ff4(0x2e2));},_0x5a0b5d);}else unlockOrders();_0x3c01e7&&config['headless']&&(logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x283)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x1a2ea3(0x193),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x1a2ea3(0x1aa)]&&logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x1e6));else lockOrders!=ORDERS[_0x1a2ea3(0x1fa)]&&(!config[_0x1a2ea3(0x1aa)]&&(config[_0x1a2ea3(0x2e8)]=='market'?logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x1f9)):logHistory(_0x1a2ea3(0x2d6),_0x1a2ea3(0x290))));}}function persistOpenOrders(_0x286bcb){const _0x27033d=_0xdb28c7,_0x4126c4={...config,'openOrders':_0x286bcb};let _0x18acc0=dbConfig[_0x27033d(0x291)](_0x27033d(0x1a2))[_0x27033d(0x2a5)]({'botID':botID})['value']();_0x18acc0&&dbConfig[_0x27033d(0x291)](_0x27033d(0x1a2))[_0x27033d(0x2a5)]({'botID':botID})[_0x27033d(0x2b0)](_0x4126c4)[_0x27033d(0x227)]();}function restoreOrders(){const _0x558ec9=_0xdb28c7;let _0x89383e;config[_0x558ec9(0x19a)]&&allOpenOrders[_0x558ec9(0x26d)](_0x5eeec8=>{const _0x5b9b17=_0x558ec9,_0xd8e5bc=config[_0x5b9b17(0x19a)][_0x5b9b17(0x2a5)](_0x7d1af9=>_0x7d1af9[_0x5b9b17(0x19b)]==_0x5eeec8['id']);_0xd8e5bc&&(lastOrders['push'](_0xd8e5bc),_0x89383e=_0x5eeec8[_0x5b9b17(0x20f)]);});if(lastOrders[_0x558ec9(0x2c4)]>0x0){lockOrders=ORDERS[_0x558ec9(0x22f)],validateOrdersState=_0x558ec9(0x2fe),allOrdersPlaced=!![];const _0x5551ec=new Date()[_0x558ec9(0x233)](),_0x2e0f83=config[_0x558ec9(0x2e8)]==_0x558ec9(0x1c7)?validateOrderTimeout*0x3c*0x3e8:config[_0x558ec9(0x231)]*0x3c*0x3e8;if(_0x89383e+_0x2e0f83>_0x5551ec){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x20d0c6=_0x558ec9;validateOrders(_0x20d0c6(0x2e2));},_0x89383e+_0x2e0f83-_0x5551ec);}else validateOrders(_0x558ec9(0x2e2));}}async function sendMetricsTelegram(){const _0x249da9=_0xdb28c7;if(!coinsLoaded){process[_0x249da9(0x248)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x25eb9d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5a417e='';if(config['showname'])_0x5a417e=_0x249da9(0x239)+config['botname']+_0x249da9(0x2bb);else _0x5a417e=_0x249da9(0x1b7)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x35a857=getKPIs(_0x249da9(0x2fc)),_0x22f7d6=getKPIs(_0x249da9(0x1db),config[_0x249da9(0x1db)]),_0x418c9b=getKPIs('net-basecoin'),_0x528ece=getKPIs(_0x249da9(0x30f),config[_0x249da9(0x1db)]);_0x5a417e+=_0x249da9(0x1f8),_0x5a417e+=_0x35a857['leftTxt']+_0x249da9(0x1dd)+_0x35a857[_0x249da9(0x301)]+'\x0a',_0x5a417e+=_0x35a857['rightTxt']+':\x20'+_0x35a857['change']+'%\x0a',_0x5a417e+=_0x22f7d6[_0x249da9(0x2bc)]+_0x249da9(0x1dd)+_0x22f7d6[_0x249da9(0x301)]+'\x0a',_0x5a417e+=_0x22f7d6[_0x249da9(0x2f8)]+':\x20'+_0x22f7d6[_0x249da9(0x2b4)]+'%\x0a',_0x5a417e+=_0x418c9b[_0x249da9(0x2bc)]+':\x20'+_0x418c9b[_0x249da9(0x301)]+'\x20('+config[_0x249da9(0x2fc)]+')\x0a',_0x5a417e+=_0x418c9b[_0x249da9(0x2f8)]+':\x20'+_0x418c9b[_0x249da9(0x2b4)]+'%\x20('+config['basecoin']+')\x0a',_0x5a417e+=_0x528ece[_0x249da9(0x2bc)]+':\x20'+_0x528ece['value']+'\x20('+config[_0x249da9(0x1db)]+')\x0a',_0x5a417e+=_0x528ece[_0x249da9(0x2f8)]+':\x20'+_0x528ece['change']+'%\x20('+config[_0x249da9(0x1db)]+')\x0a',_0x5a417e+=_0x249da9(0x189),process[_0x249da9(0x248)]({'telegrammsg':_0x5a417e},_0x3907ae=>{});}async function sendPortfolioTelegram(){const _0x2ee80e=_0xdb28c7;if(!coinsLoaded){process['send']({'telegrammsg':_0x2ee80e(0x2a7)},_0x4dc744=>{});return;}let _0x1652fb='';if(config['showname'])_0x1652fb=_0x2ee80e(0x239)+config[_0x2ee80e(0x249)]+_0x2ee80e(0x1d6);else _0x1652fb=_0x2ee80e(0x1b7)+botID+_0x2ee80e(0x1d6);_0x1652fb+='<pre>',_0x1652fb+=_0x2ee80e(0x2ac),_0x1652fb+=_0x2ee80e(0x1c0),_0x1652fb+=_0x2ee80e(0x2ac),currentCoins[_0x2ee80e(0x26d)](_0xa33d45=>{const _0x2d64f=_0x2ee80e;_0x1652fb+=_0xa33d45[_0x2d64f(0x1f5)][_0x2d64f(0x2bf)](0x7)+'|\x20'+formatPad(_0xa33d45['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xa33d45[_0x2d64f(0x264)],0x2,0x6)+'|\x20'+formatPad(_0xa33d45['delta']*0x64,0x2,0x6)+'\x0a';}),_0x1652fb+='</pre>',process[_0x2ee80e(0x248)]({'telegrammsg':_0x1652fb},_0x157512=>{});}function formatPad(_0x304ae5,_0xe3cfcd,_0x4ac5a7){const _0x42316a=_0xdb28c7,_0x38526b=formatResultString(_0x304ae5,_0xe3cfcd);return _0x38526b?_0x38526b['padStart'](_0x4ac5a7):''[_0x42316a(0x234)](_0x4ac5a7);}function logHistory(_0x46c590,_0x389171,_0x55c902=''){const _0x23d87a=_0xdb28c7;logger[_0x23d87a(0x2e5)](''+_0x389171);let _0x124170={'time':getTimeStamp(),'type':_0x46c590,'event':_0x389171};dbLogs[_0x23d87a(0x291)](_0x23d87a(0x31e))[_0x23d87a(0x2b6)](_0x124170)['write']();if(_0x55c902=='')_0x55c902=_0x389171;proxyEmit('event',{'log':_0x124170,'summary':_0x55c902}),process[_0x23d87a(0x248)]({'telegram':{..._0x124170,'botname':config[_0x23d87a(0x249)],'showname':config['showname']}},_0x4a0642=>{});}function emitHistory(_0x2584c5={}){const _0xc998b8=_0xdb28c7;Object[_0xc998b8(0x2e1)](_0x2584c5)[_0xc998b8(0x2c4)]==0x0&&(_0x2584c5={'type':['order',_0xc998b8(0x2f1)],'event':'','page':0x1});if(_0x2584c5[_0xc998b8(0x1ab)][_0xc998b8(0x237)](_0xc998b8(0x2f1)))_0x2584c5[_0xc998b8(0x1ab)][_0xc998b8(0x285)](_0x2584c5[_0xc998b8(0x1ab)]['indexOf'](_0xc998b8(0x2f1)),0x1,_0xc998b8(0x2d6),_0xc998b8(0x302),'success');if(dbLogs[_0xc998b8(0x1d3)](_0xc998b8(0x31e))['value']()){let _0x2bb339=dbLogs['get'](_0xc998b8(0x31e))['filter'](_0x580f66=>{const _0x2601ff=_0xc998b8;if(_0x2584c5[_0x2601ff(0x1ab)][_0x2601ff(0x2c4)]==0x0)return![];else return _0x2584c5[_0x2601ff(0x1ab)][_0x2601ff(0x237)](_0x580f66[_0x2601ff(0x1ab)]);})[_0xc998b8(0x321)](_0x3fbb2a=>{const _0x3ffc26=_0xc998b8;if(_0x2584c5[_0x3ffc26(0x2f1)]=='')return!![];else return _0x3fbb2a[_0x3ffc26(0x2f1)][_0x3ffc26(0x246)]()[_0x3ffc26(0x237)](_0x2584c5[_0x3ffc26(0x2f1)][_0x3ffc26(0x246)]());})['sortBy']('time'),_0x306561=_0x2bb339[_0xc998b8(0x301)]()['length'];_0x2bb339=_0x2bb339[_0xc998b8(0x236)]()[_0xc998b8(0x23c)]((_0x2584c5['page']-0x1)*logPageSize,_0x2584c5[_0xc998b8(0x244)]*logPageSize-0x1)['reverse']()[_0xc998b8(0x301)](),proxyEmit(_0xc998b8(0x1fc),{'logs':_0x2bb339,'total':_0x306561});}else proxyEmit(_0xc998b8(0x1fc),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x550a34){const _0x4f1358=_0xdb28c7;if(dbLogs[_0x4f1358(0x1d3)](_0x4f1358(0x31e))['value']()){const _0x49fbe1=dbLogs['get'](_0x4f1358(0x31e))[_0x4f1358(0x18a)]('time')[_0x4f1358(0x321)](_0x24c6ae=>{const _0x28a4c5=_0x4f1358;return _0x24c6ae[_0x28a4c5(0x1ab)]=='order';})[_0x4f1358(0x301)]();dbLogs['get']('logs')[_0x4f1358(0x279)]()[_0x4f1358(0x227)](),dbLogs[_0x4f1358(0x291)](_0x4f1358(0x31e))[_0x4f1358(0x2b0)](_0x49fbe1)[_0x4f1358(0x227)](),emitHistory(_0x550a34);}}async function pauseBot(_0xc3008f=pauseBotInterval){const _0x209d93=_0xdb28c7,_0x593a74=new Date()[_0x209d93(0x233)]();if(!lastErrorShown||_0x593a74-lastErrorShown>=_0xc3008f){lastErrorShown=_0x593a74;!lastBotPause?(lastBotPause=_0x593a74,consecutivePauses=0x1):(_0x593a74-lastBotPause-_0xc3008f<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x209d93(0x248)]({'stop':_0x209d93(0x28d)},_0x5a72a0=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x209d93(0x233)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0xc3008f),botPaused=![],reset(!![]);}}}async function killBot(){const _0x4e4e4a=_0xdb28c7;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x4e4e4a(0x24b)},_0x5def0a=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x39017c,_0x3fcf2e){const _0x22ca3b=_0xdb28c7;if(botPaused)return;const _0x2b0d19=config[_0x22ca3b(0x2a0)]||_0x22ca3b(0x287);if(_0x3fcf2e)logger['debug'](_0x22ca3b(0x27c)+_0x3fcf2e);const _0x5e1d4c=()=>{const _0x439647=_0x22ca3b;loading[_0x439647(0x2d6)]=!![],emitLoadingProgress();};if(_0x39017c[_0x22ca3b(0x1bb)]()[_0x22ca3b(0x237)]('API-key\x20format\x20invalid'))logHistory(_0x22ca3b(0x2d6),_0x2b0d19+_0x22ca3b(0x1ac)),_0x5e1d4c();else{if(_0x39017c[_0x22ca3b(0x1bb)]()[_0x22ca3b(0x237)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x22ca3b(0x2d6),_0x2b0d19+_0x22ca3b(0x229)),_0x5e1d4c();else _0x39017c['toString']()['includes'](_0x22ca3b(0x2cc))?(logHistory('error',_0x2b0d19+_0x22ca3b(0x315)),logHistory('error','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x5e1d4c()):await handleError(_0x39017c,null);}}async function handleError(_0x1b413f,_0xa1b124,_0x53dfa6=''){const _0x598339=_0xdb28c7;if(botPaused)return;const _0x1e96ed=config['exchange']||_0x598339(0x287);if(_0xa1b124)logger[_0x598339(0x30d)](_0x598339(0x27c)+_0xa1b124);if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x1de))||_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x298)))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x26a)+pauseBotMsg),await pauseBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x217))||_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x24e)))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x1a5)+pauseBotMsg),await pauseBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x2a3)))logHistory('error',_0x1e96ed+_0x598339(0x316)+pauseBotMsg),await pauseBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x222)))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x2d7)+pauseBotMsg),await pauseBot();else{if(_0x1b413f['toString']()[_0x598339(0x237)](_0x598339(0x238)))logHistory(_0x598339(0x2d6),_0x598339(0x25b)),logHistory(_0x598339(0x2d6),_0x598339(0x2ae)),await killBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x299)))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x2ea)),logHistory('error',_0x598339(0x2b7)),await pauseBot(0x3c);else{if(_0x1b413f instanceof ccxt[_0x598339(0x325)])logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x1e3)+pauseBotMsg),logger['debug'](_0x598339(0x288),_0x1b413f),await pauseBot();else{if(_0x1b413f['toString']()[_0x598339(0x237)]('API-key\x20format\x20invalid'))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x18b)),logHistory(_0x598339(0x2d6),_0x598339(0x2ae)),await killBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x26c)))logHistory(_0x598339(0x2d6),_0x1e96ed+'\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1b413f[_0x598339(0x1bb)]()['includes']('AuthenticationError'))logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x256)),logHistory(_0x598339(0x2d6),_0x598339(0x2ae)),await killBot();else{if(_0x1b413f[_0x598339(0x1bb)]()[_0x598339(0x237)](_0x598339(0x278)))logHistory(_0x598339(0x2d6),_0x1e96ed+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x598339(0x2d6),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1b413f['toString']()[_0x598339(0x237)](_0x598339(0x309)))logHistory(_0x598339(0x2d6),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x53dfa6);else _0x1b413f instanceof ccxt[_0x598339(0x1dc)]?(logHistory(_0x598339(0x2d6),_0x1e96ed+_0x598339(0x2d8)),logger[_0x598339(0x30d)](_0x598339(0x288),_0x1b413f)):(logHistory(_0x598339(0x2d6),_0x598339(0x1ef)+pauseBotMsg),logger[_0x598339(0x30d)]('Error\x20details:',_0x1b413f),await pauseBot());}}}}}}}}}}}}function formatResult(_0x3c266f,_0x122b97){const _0xef3d5d=_0xdb28c7;return parseFloat(_0x3c266f[_0xef3d5d(0x205)](_0x122b97));}function formatResultTruncate(_0x145d1a,_0x3920f3){const _0x3ac229=_0xdb28c7;let _0x51e005=formatResultString(_0x145d1a,0xa),_0x239d37=_0x51e005[_0x3ac229(0x281)]('.');return _0x239d37!=-0x1&&(_0x51e005=_0x51e005[_0x3ac229(0x23c)](0x0,_0x239d37+_0x3920f3+0x1)),Number(_0x51e005);}function formatResultString(_0x2e7668,_0x3aeef6){const _0x10e20f=_0xdb28c7;let _0x1a8e35;if(!(''+_0x2e7668)[_0x10e20f(0x237)]('e'))_0x1a8e35=+(Math['round'](_0x2e7668+'e+'+_0x3aeef6)+'e-'+_0x3aeef6);else{let _0x5e9869=(''+_0x2e7668)[_0x10e20f(0x2a8)]('e'),_0x579448='';+_0x5e9869[0x1]+_0x3aeef6>0x0&&(_0x579448='+'),_0x1a8e35=+(Math[_0x10e20f(0x2eb)](+_0x5e9869[0x0]+'e'+_0x579448+(+_0x5e9869[0x1]+_0x3aeef6))+'e-'+_0x3aeef6);}return Number(_0x1a8e35)[_0x10e20f(0x205)](_0x3aeef6);}function getServerTime(){const _0x3d6f79=_0xdb28c7,_0x19e519=new Date();return _0x19e519[_0x3d6f79(0x262)]()+'/'+(_0x19e519[_0x3d6f79(0x29a)]()+0x1)[_0x3d6f79(0x1bb)]()['padStart'](0x2,'0')+'/'+_0x19e519[_0x3d6f79(0x241)]()[_0x3d6f79(0x1bb)]()[_0x3d6f79(0x234)](0x2,'0')+'\x20'+_0x19e519[_0x3d6f79(0x2fa)]()['toString']()['padStart'](0x2,'0')+':'+_0x19e519[_0x3d6f79(0x2c1)]()[_0x3d6f79(0x1bb)]()[_0x3d6f79(0x234)](0x2,'0')+':'+_0x19e519[_0x3d6f79(0x2ef)]()[_0x3d6f79(0x1bb)]()[_0x3d6f79(0x234)](0x2,'0');}function getTimeStamp(){const _0x58fad7=_0xdb28c7,_0x43c203=shiftedTime();return _0x43c203['getFullYear']()+'/'+(_0x43c203[_0x58fad7(0x29a)]()+0x1)[_0x58fad7(0x1bb)]()['padStart'](0x2,'0')+'/'+_0x43c203[_0x58fad7(0x241)]()[_0x58fad7(0x1bb)]()[_0x58fad7(0x234)](0x2,'0')+'\x20'+_0x43c203['getHours']()[_0x58fad7(0x1bb)]()[_0x58fad7(0x234)](0x2,'0')+':'+_0x43c203[_0x58fad7(0x2c1)]()[_0x58fad7(0x1bb)]()['padStart'](0x2,'0')+':'+_0x43c203[_0x58fad7(0x2ef)]()[_0x58fad7(0x1bb)]()[_0x58fad7(0x234)](0x2,'0');}function getDate(){const _0x29c53a=_0xdb28c7,_0x1c05d0=shiftedTime();return _0x1c05d0[_0x29c53a(0x262)]()+'/'+(_0x1c05d0[_0x29c53a(0x29a)]()+0x1)[_0x29c53a(0x1bb)]()['padStart'](0x2,'0')+'/'+_0x1c05d0[_0x29c53a(0x241)]()['toString']()['padStart'](0x2,'0');}function getHour(){const _0x5e4419=_0xdb28c7,_0x14d396=shiftedTime();return _0x14d396[_0x5e4419(0x2fa)]()['toString']()[_0x5e4419(0x234)](0x2,'0');}function _0x11bc(){const _0x11e1f9=['Waited\x20','find','test','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','split','add','ccxt','exchange\x20not\x20reloaded','-------------------------------\x0a','getPortfolio','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','ID:\x20','assign','1\x20-\x20Validate\x20orders:\x20','getAllOrders()','toUpperCase','change','set','push','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','limits','findIndex','3635984mQwbSJ','\x20metrics:</b>\x20\x0a\x0a','leftTxt','coins','Loading\x20completed','padEnd','UNLOCKING','getMinutes','MIN_NOTIONAL','Order\x20is\x20invalid:\x20','length','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','Headless:\x20','excluded','added','differenceInSeconds','sell','hybrid-crypto-js','AuthenticationError','%\x20(','symbol','status','recreateCoinResults()','no\x20open\x20orders','date-fns','message','startdate','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','error','\x20closed\x20the\x20connection','\x20exchange\x20error','RSA-OAEP','canceled','startnumber','buy','fetchClosedOrders','active','2\x20-\x20Validate\x20orders:\x20','log','keys','final','fetchTickers()','USDT','full','fetchTicker','threshold','ordertype','Reset\x20|\x20','\x20blocked\x20your\x20API\x20-\x20pausing\x20bot\x20for\x2060\x20minutes','round','settings','delta','sha256','getSeconds','watchTrades','event','Huobi','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20>\x20[DEBUG]\x20','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','startsWith','red_yellow_blue','rightTxt','existsSync','getHours','resetHistory','basecoin','\x20|\x20','ongoing','secure','Error:\x20Invalid\x20argument\x20','value','warning','map','bb-settings.json','1260wAyBbU','ETH','ticker','fetchOpenOrders','InsufficientFunds','cost','2.3.5','lowdb','debug','shift','net-fiat','writeFile','Error\x20while\x20deleting\x20files:\x20','removed','OrderNotFound','valid','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20not\x20responding','Resetting\x20bot\x20history','43749gqEulf','1\x20-\x20FILLED\x20known\x20order:\x20','/backup/','Pausing\x20for\x20','Fee\x20discount\x20refund\x20detected:\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','logs','(((.+)+)+)+$','initclient','filter','***','Limit\x20(high-margin)','datetime','NetworkError','BNB','-performance.json','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20|\x20Custom\x20ID:\x20','Invalid\x20symbol:\x20','enabled','</pre>','sortBy','\x20API\x20key\x20is\x20invalid','unlinkSync','Resetting\x20coin\x20results:\x20','changes','Order\x20amount\x20is\x20invalid:\x20','exchanges','performance','milliseconds','success','sendPortfolioTelegram','bot-','initTickers()','last','cooldown','offset','openOrders','orderId','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','none','0\x20-\x20EXECUTION:\x20','Binance','Bot\x20','Order(s)\x20not\x20validated\x20after\x20','bot','Net\x20','net-basecoin','\x20not\x20available','concat','function','Portfolio\x20change\x20detected:\x20','\x20change','headless','type','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','customId','abs','Executing\x20exchange\x20reload','getOpenOrders()','realized','util','args','liquidity','onepagemode','\x20|\x20exchange:\x20','<b>Bot\x20','trade','join','replace','toString','3865BxjECD','currency','yargs/yargs','USDP','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','parse','limit','breakeven','balances','min','getCoins()','market','ask',':\x20Bot\x20','bots','BNB/','amountToPrecision','remainingSymbols','cancel','\x20hour','Saving\x20configuration','defaults','data','has','Huobipro','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20portfolio:</b>\x20\x0a\x0a','closed','bb-secure.json','botID','price','fiat','ExchangeError','\x20:\x20','DDoSProtection','fetchTickers','sells','deleteHistoryAlerts','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','\x20network\x20error','pro','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','version','fetchBalance','format','EUR','mkdirSync','35176EWvNQy','\x20/\x20','Cex','Unknown\x20error\x20occured','-config.json','apiKey','balancing\x20resumed','./version.json','date','coin','startprice','1\x20-\x20Handle\x20open\x20orders','<pre>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','UNLOCKED','configuration-stored','event-history','stringify','buys','eur','getPortfolio(0)','watchOrders','average','decrypt','USD','toFixed','orderstatus','spot','\x20-\x20bot\x20not\x20started','2.6.0','random','amount','BTC','must\x20be\x20greater\x20than\x20minimum\x20amount','autoliquidity','timestamp','380135FUPQUS','2151474lPQkIH','getPortfolio(1)','Bybit','2660ZdcoIh','InvalidOrder','yyyy/MM/dd','ExchangeNotAvailable','configuration','Net\x20effect','\x20>\x20','\x20minutes','2.5.0','substring','entries',':\x20timer\x20>','ORDERS.UNLOCKING','2\x20-\x20Orders\x20unlocked','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','fees','exchange\x20reloaded','showname','basecoinvalue','write','getStartingBalances','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','fromCodePoint','Transaction\x20detection\x20blocked','total','number','emojisell','LOCKED','Limit\x20(low-margin)','timeout','TUSD','getTime','padStart','fee','reverse','includes','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','<b>','2\x20-\x20Handled\x20open\x20orders','side','slice','change24h','Trigger:\x20','7037352aCVgsr','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','getDate','-results.json','sort','page','.json','toLowerCase','Cryptocom','send','botname','emitHistory','kill','getPortfolio(2)','argv','OnMaintenance','Failed\x20to\x20load\x20coin\x20data\x20for\x20','open','freeze','stopExchange()','No\x20more\x20open\x20orders\x20-\x20','isEqual','colorscheme','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','string','max','bid','watchOrders()','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20exchange','limit-high','watchTransactions()','initial','placeOrder','\x20|\x20lock\x20orders:\x20','getFullYear','./config/','target','constructor','createOrder','Invalid\x20API\x20key\x20or\x20secret\x20entered','password','order','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','loading-canceled','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','forEach','usd','Executed\x20','apiSecret','filled','showConfig','apiPassword','time','Crypt','privateKey','recovery','PermissionDenied','remove','2\x20-\x20handling\x20FILLED\x20order:\x20','lowdb/adapters/FileSync','Exception\x20thrown\x20in\x20','running','getCoinNumber()','timeshift','recent20','indexOf','USDC','Avoiding\x20continuous\x20order\x20attempts','storeHeadless','splice','Order\x20filled:\x20','Exchange','Error\x20details:','sendMetricsTelegram','\x20minutes\x20-\x20','\x20-\x20pausing\x20bot\x20for\x20','portfolio','restart','toggleBotMode','cancelOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','get','emojibuy','progress','-events.json','distribution','001','highest','RateLimitExceeded','InvalidNonce','getMonth','search','141GjSWNH','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','************','Transaction\x20detection\x20unblocked','exchange','Bitget','loadMarkets','RequestTimeout'];_0x11bc=function(){return _0x11e1f9;};return _0x11bc();}function sleep(_0x28add2){return new Promise(_0x4c8b2e=>setTimeout(_0x4c8b2e,_0x28add2));}function shiftedTime(){const _0x16c8b8=_0xdb28c7,_0x1503e6=new Date();let _0x35fe67=_0x1503e6;if(config&&config[_0x16c8b8(0x27f)]!==0x0)_0x35fe67=fns[_0x16c8b8(0x2a9)](_0x1503e6,{'hours':config[_0x16c8b8(0x27f)]});return _0x35fe67;}function timer(_0x4381ad){const _0x512e46=_0xdb28c7,_0x27e16f=new Date();!lasttime?console[_0x512e46(0x2e0)](getTimeStamp()+_0x512e46(0x21f),_0x4381ad,_0x27e16f):console['log'](getTimeStamp()+_0x512e46(0x21f),_0x4381ad,(_0x27e16f-lasttime)/0x3e8),lasttime=_0x27e16f;}