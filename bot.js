const _0x714470=_0x1a9e;(function(_0x3af4cd,_0x42d1a4){const _0x2e4159=_0x1a9e,_0x57b80e=_0x3af4cd();while(!![]){try{const _0x41b59d=-parseInt(_0x2e4159(0x1a2))/0x1+-parseInt(_0x2e4159(0x14c))/0x2+parseInt(_0x2e4159(0x1f3))/0x3*(-parseInt(_0x2e4159(0x183))/0x4)+-parseInt(_0x2e4159(0x231))/0x5+-parseInt(_0x2e4159(0x229))/0x6+-parseInt(_0x2e4159(0x1ef))/0x7+parseInt(_0x2e4159(0x1cf))/0x8;if(_0x41b59d===_0x42d1a4)break;else _0x57b80e['push'](_0x57b80e['shift']());}catch(_0x1719d4){_0x57b80e['push'](_0x57b80e['shift']());}}}(_0x4f5a,0x3cd87));const _0x48ffe5=function(){let _0x3ebd7a=!![];return function(_0x29f999,_0x3a79e0){const _0x322e91=_0x3ebd7a?function(){const _0x33831e=_0x1a9e;if(_0x3a79e0){const _0x577b83=_0x3a79e0[_0x33831e(0x172)](_0x29f999,arguments);return _0x3a79e0=null,_0x577b83;}}:function(){};return _0x3ebd7a=![],_0x322e91;};}(),_0x2005e4=_0x48ffe5(this,function(){const _0x12a3f3=_0x1a9e;return _0x2005e4[_0x12a3f3(0x18a)]()[_0x12a3f3(0x16a)]('(((.+)+)+)+$')[_0x12a3f3(0x18a)]()[_0x12a3f3(0x1ed)](_0x2005e4)[_0x12a3f3(0x16a)](_0x12a3f3(0x190));});_0x2005e4();'use strict';const ccxt=require(_0x714470(0x15c)),low=require(_0x714470(0x159)),FileSync=require(_0x714470(0x168)),fs=require('fs'),fns=require(_0x714470(0x1b0)),{WebsocketClient,DefaultLogger}=require(_0x714470(0x1fe)),Crypt=require(_0x714470(0x194))['Crypt'];let exchange,wsClient;global[_0x714470(0x21a)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require('./version.json')[_0x714470(0x1df)],botID=process[_0x714470(0x1fb)][0x2]||_0x714470(0x154),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log'](_0x714470(0x14b)+botID+_0x714470(0x217)),process['exit'](0x1);const configpath='./config/';!fs[_0x714470(0x1fc)](configpath)&&fs[_0x714470(0x173)](configpath);function _0x4f5a(){const _0x56ecb6=['logs','placeOrder()','number','getDate','fees','Unfilled\x20order(s)\x20canceled\x20after\x20','executionReport','event','12686592bNbuOK','orderId','getHours','formattedMessage','API-key\x20format\x20invalid','Limit\x20(high-margin)','sells','BTCUSDT','cancelOrder','startdate','filled',')\x20|\x20Error\x20details:\x20','cooldown','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','event-history','getTime','version','\x20minutes\x20-\x20balancing\x20resumed','Order\x20amount\x20is\x20invalid:\x20','BNB','wss://stream.binance.com:9443','AuthenticationError','stringify','LIMIT','createOrder','find','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','binanceus','wss://stream.binance.us:9443','assign','constructor','BTC/EUR','1580824qIljyO','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','configuration','botID','1881eCPBYN','distribution','getMonth','timestamp','success','has','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','function','argv','existsSync','yyyy/MM/dd\x20HH:mm:ss','binance','placeOrder','ask','write','send','Binance\x20API\x20key\x20is\x20invalid','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','initws()','recreate','BTC','date','buys','fetchOHLCV','MIN_NOTIONAL','decrypt','wsMarket','InsufficientFunds','getFullYear','data','getMinutes','datetime','\x20-\x20','message','Order\x20filled:\x20','headless',',\x20must\x20be\x20a\x203\x20digit\x20number','limits','BTCBUSD','ticker','split','availableBalance','OrderNotFound','InvalidNonce','bot-','apiSecret','total','BNBBTC','breakeven','FILLED','replace','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','value','eachDayOfInterval','2473890otpzFp','reduce','defaults','includes','coins','bot','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','timeout','2136610dMbDWG','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','RSA-OAEP','BTC/BUSD','length','eur','market','recreateHistory()','entries','limit','balances','startprice','secure','yyyy-MM-dd\x27T\x27HH:mm:ss','initclient','symbol','\x20hour','price','log','slice','coin-loading-progress','abs','loadMarkets','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','privateKey','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','eventType','Error:\x20Invalid\x20argument\x20','309536RJFccY','ExchangeNotAvailable','exchange','Market','subscribeSpotKline','cancelOrder()','bb-settings.json','parse','001','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','************','-config.json','/BTC','lowdb','Order(s)\x20not\x20validated\x20after\x20','starting-balances','ccxt','push','loadSymbols()','args','startnumber','error','kline','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','toLowerCase','closeWs','Pauses:\x20','reconnected','lowdb/adapters/FileSync','milliseconds','search','shift','order','type','coin','sell','format','isArray','apply','mkdirSync','getPortfolio()','target','usd','portfolio','BTCEUR','excluded','get','storeHeadless','BTC/','Performance\x20recreation\x20completed\x20successfully','getPortfolio','getFiat()','padStart','BTC/USDT','accumulatedQuantity','212cPRMJE','getStartingBalances','Invalid\x20quantity','yyyy/MM/dd','exit','realized','limit-low','toString','keys','Order(s)\x20filled\x20-\x20balancing\x20resumed','side','last','close','(((.+)+)+)+$','currency','remove','round','hybrid-crypto-js','fee','bb-secure.json','limit-high','settings','wsKey','add','delta','parseISO','\x20|\x20Error\x20details:\x20','WebSockets(','subscribeSpotUserDataStream','getCoins()',':\x20Bot\x20','83133QiQXvJ','Now\x20\x20\x20:\x20','differenceInSeconds','userData','fetchTickers','cost','coinamount','-results.json','toFixed','threshold','-events.json','asset','buy','time','date-fns','emitHistory','trade','apiKey','orderType','spot','Binance\x20API\x20secret\x20is\x20invalid','amount','fetchBalance','sortBy','getSeconds','filter','valid','\x20order:\x20','reverse','forEach','min','sort','ordertype','page','splice','timeshift','Signature\x20for\x20this\x20request\x20is\x20not\x20valid'];_0x4f5a=function(){return _0x56ecb6;};return _0x4f5a();}const configfile=configpath+_0x714470(0x21f)+botID+_0x714470(0x157),logfile=configpath+_0x714470(0x21f)+botID+_0x714470(0x1ac),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x714470(0x21f)+botID+_0x714470(0x1a9),settingsfile=configpath+_0x714470(0x152),securefile=configpath+_0x714470(0x196),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x714470(0x201)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x714470(0x22b)]({'coins':[]})[_0x714470(0x201)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x714470(0x178),'symbol':_0x714470(0x1ee)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x38e249)=>{},'debug':(..._0x2ac91d)=>{},'notice':(..._0x13729a)=>{},'info':(..._0x577c93)=>{},'warning':(..._0x574f69)=>{},'error':async function(..._0x4ee2ea){const _0x277811=_0x714470,_0x4accde=new Date()[_0x277811(0x1de)]();if(!lastErrorShown||_0x4accde-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x277811(0x1de)](),logHistory(_0x277811(0x161),'WebSockets('+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes');let _0x440d81='';if(_0x4ee2ea[0x0])_0x440d81+=_0x4ee2ea[0x0];if(_0x4ee2ea[0x1]?.['error']?.[_0x277811(0x214)])_0x440d81+=_0x277811(0x213)+_0x4ee2ea[0x1][_0x277811(0x161)][_0x277811(0x214)];logging(_0x277811(0x19e)+consecutivePauses+_0x277811(0x1da),''+_0x440d81),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x714470(0x234)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x714470(0x1c5)]!=config[_0x714470(0x1c5)]&&updateTimeshift(settings[_0x714470(0x1c5)]);process[_0x714470(0x202)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x1a80d2,_0x4653df=null){const _0x1d9344=_0x714470;process[_0x1d9344(0x202)]({'function':_0x1a80d2,'args':_0x4653df});}function initializeProcessListeners(){process['on']('message',_0x150a03=>{const _0x3ee49c=_0x1a9e;switch(Object[_0x3ee49c(0x18b)](_0x150a03)[0x0]){case _0x3ee49c(0x1c5):_0x150a03[_0x3ee49c(0x1c5)]!=undefined&&(settings[_0x3ee49c(0x1c5)]=_0x150a03[_0x3ee49c(0x1c5)],updateTimeshift(settings[_0x3ee49c(0x1c5)]));break;case _0x3ee49c(0x1fa):switch(_0x150a03[_0x3ee49c(0x1fa)]){case _0x3ee49c(0x240):initclient();break;case _0x3ee49c(0x1b1):emitHistory(_0x150a03[_0x3ee49c(0x15f)]);break;case _0x3ee49c(0x17e):getPortfolio(_0x150a03['args']);break;case'storeConfiguration':storeConfiguration(_0x150a03[_0x3ee49c(0x15f)]);break;case _0x3ee49c(0x17b):storeHeadless(_0x150a03[_0x3ee49c(0x15f)]);break;case _0x3ee49c(0x184):getStartingBalances();break;case _0x3ee49c(0x1ff):placeOrder(_0x150a03['args']);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2429ec=_0x714470;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2429ec(0x1b3)],config[_0x2429ec(0x220)]);let _0x3579ca=await loadSymbols();_0x3579ca&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x299e24,_0x4c83a7){const _0xf0bf02=_0x714470,_0x41e073=ccxt[config[_0xf0bf02(0x14e)]];let _0x59291f;switch(config['exchange']){case _0xf0bf02(0x1fe):_0x59291f=_0xf0bf02(0x1e3);break;case _0xf0bf02(0x1ea):_0x59291f=_0xf0bf02(0x1eb);break;default:_0x59291f=_0xf0bf02(0x1e3);}exchange=new _0x41e073({'apiKey':_0x299e24,'secret':_0x4c83a7,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x299e24,'api_secret':_0x4c83a7,'beautify':!![],'wsUrl':_0x59291f},logger),config[_0xf0bf02(0x14e)]=='binanceus'&&(stablecoins={'eur':{'coin':_0xf0bf02(0x219),'symbol':_0xf0bf02(0x235)},'usd':{'coin':_0xf0bf02(0x1d6),'symbol':_0xf0bf02(0x181)}});}async function loadSymbols(){const _0x4d4067=_0x714470;let _0x54c5af;try{markets=await exchange[_0x4d4067(0x248)](),allSymbols=exchange['symbols'][_0x4d4067(0x1bb)](_0x3928dc=>{const _0x115adf=_0x4d4067;return _0x3928dc[_0x115adf(0x22c)](_0x115adf(0x207))&&!_0x3928dc[_0x115adf(0x22c)]('DAI/');}),_0x54c5af=!![];}catch(_0x2f9233){await handleError(_0x2f9233,_0x4d4067(0x15e)),_0x54c5af=![];}return _0x54c5af;}async function initbot(){const _0x5dabf6=_0x714470;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x11f0ee=dbCoinResults['get'](_0x5dabf6(0x22d))[_0x5dabf6(0x227)]();if(_0x11f0ee['length']==0x0)await resetCoinResults();}async function initclient(){const _0x13d14c=_0x714470;proxyEmit(_0x13d14c(0x1f1),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x13d14c(0x23c),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x1cca1a=_0x714470;wsinitialized=![];ws1&&(ws1[_0x1cca1a(0x1bf)](_0xb4b7c0=>{const _0x1dd5a3=_0x1cca1a;try{wsClient[_0x1dd5a3(0x165)](_0xb4b7c0);}catch(_0x3470ab){}}),ws1=[]);if(ws2){try{wsClient[_0x1cca1a(0x165)](ws2);}catch(_0x31b138){}ws2=null;}}async function initws(){const _0x4ed9c4=_0x714470;cleanws();let _0xc93c3=[];currentCoins[_0x4ed9c4(0x1bf)](_0x4b4ed1=>{const _0x63fd28=_0x4ed9c4;if(_0x4b4ed1[_0x63fd28(0x16e)]!=_0x63fd28(0x207))_0xc93c3[_0x63fd28(0x15d)](noslash(_0x4b4ed1[_0x63fd28(0x241)]));});if(!_0xc93c3[_0x4ed9c4(0x22c)](stablecoins[_0x4ed9c4(0x237)][_0x4ed9c4(0x16e)]))_0xc93c3['push'](stablecoins[_0x4ed9c4(0x237)]['coin']);if(!_0xc93c3[_0x4ed9c4(0x22c)](stablecoins[_0x4ed9c4(0x176)][_0x4ed9c4(0x16e)]))_0xc93c3[_0x4ed9c4(0x15d)](stablecoins[_0x4ed9c4(0x176)][_0x4ed9c4(0x16e)]);if(!_0xc93c3[_0x4ed9c4(0x22c)](_0x4ed9c4(0x222)))_0xc93c3[_0x4ed9c4(0x15d)](_0x4ed9c4(0x222));try{_0xc93c3[_0x4ed9c4(0x1bf)]((_0x25ee7a,_0x2f65ae)=>{const _0xadf384=_0x4ed9c4;ws1[_0x2f65ae]=wsClient[_0xadf384(0x150)](_0x25ee7a,'1m');}),ws2=wsClient[_0x4ed9c4(0x19f)](),wsClient['on'](_0x4ed9c4(0x1d2),_0x1b6c12=>{const _0x35a8d1=_0x4ed9c4;if(!Array[_0x35a8d1(0x171)](_0x1b6c12)&&!_0x1b6c12[_0x35a8d1(0x199)][_0x35a8d1(0x22c)](_0x35a8d1(0x1a5))){if(_0x1b6c12[_0x35a8d1(0x14a)]===_0x35a8d1(0x162)){global['ticker'][_0x1b6c12[_0x35a8d1(0x162)][_0x35a8d1(0x241)]]=_0x1b6c12[_0x35a8d1(0x162)][_0x35a8d1(0x18f)];return;}}else{if(!Array[_0x35a8d1(0x171)](_0x1b6c12)&&_0x1b6c12[_0x35a8d1(0x199)][_0x35a8d1(0x22c)](_0x35a8d1(0x1a5))){if(_0x1b6c12[_0x35a8d1(0x20d)]['includes'](_0x35a8d1(0x1b5))){updateNumberCoins(_0x1b6c12);return;}}}}),wsClient['on'](_0x4ed9c4(0x167),async _0x269b3c=>{currentCoins=await getCoins();});}catch(_0x41869e){await handleError(_0x41869e,_0x4ed9c4(0x205));}let _0x420b6f;while(_0x420b6f!=currentCoins[_0x4ed9c4(0x236)]-0x1){_0x420b6f=0x0,currentCoins[_0x4ed9c4(0x1bf)](_0x1c8048=>{const _0x507b9d=_0x4ed9c4;if(_0x1c8048[_0x507b9d(0x16e)]!=_0x507b9d(0x207)&&global[_0x507b9d(0x21a)][noslash(_0x1c8048[_0x507b9d(0x241)])])_0x420b6f++;});let _0xe7169c=Math[_0x4ed9c4(0x193)](_0x420b6f/(currentCoins[_0x4ed9c4(0x236)]-0x1)*0x64);proxyEmit(_0x4ed9c4(0x246),_0xe7169c),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x5f1b1e=_0x714470;let _0x3a4463=0x0,_0x2a6405=0x0;try{_0x3a4463=global[_0x5f1b1e(0x21a)][stablecoins[_0x5f1b1e(0x237)][_0x5f1b1e(0x16e)]],_0x2a6405=global[_0x5f1b1e(0x21a)][stablecoins['usd'][_0x5f1b1e(0x16e)]];}catch(_0x2175f4){await handleError(_0x2175f4,_0x5f1b1e(0x17f));}return{'eur':Number(_0x3a4463),'usd':Number(_0x2a6405)};}async function setStartDatePerformance(_0x3be6fe){const _0x1f25ab=_0x714470,_0x54c08e=fns[_0x1f25ab(0x170)](new Date(_0x3be6fe[_0x1f25ab(0x1d8)]),_0x1f25ab(0x186));let _0x20f576=[];_0x20f576[stablecoins[_0x1f25ab(0x237)]['coin']]=await getCloses(stablecoins[_0x1f25ab(0x237)][_0x1f25ab(0x241)],new Date(_0x3be6fe[_0x1f25ab(0x1d8)]),0x1),_0x20f576[stablecoins[_0x1f25ab(0x176)]['coin']]=await getCloses(stablecoins['usd'][_0x1f25ab(0x241)],new Date(_0x3be6fe['startdate']),0x1);let _0x44abad,_0x104e20=[];_0x3be6fe[_0x1f25ab(0x177)]['forEach'](_0x5636a3=>{const _0x59bd3b=_0x1f25ab;!_0x5636a3['excluded']&&_0x104e20[_0x59bd3b(0x15d)]({'coin':_0x5636a3[_0x59bd3b(0x16e)],'number':_0x5636a3[_0x59bd3b(0x160)],'price':_0x5636a3['startprice']});}),_0x44abad={'date':_0x54c08e,'eur':_0x20f576[stablecoins[_0x1f25ab(0x237)][_0x1f25ab(0x16e)]][0x0],'usd':_0x20f576[stablecoins[_0x1f25ab(0x176)][_0x1f25ab(0x16e)]][0x0],'coins':_0x104e20};let _0xaedcd4=dbPerformance['get'](_0x1f25ab(0x210))[_0x1f25ab(0x1e8)]({'date':_0x54c08e})[_0x1f25ab(0x227)]();_0xaedcd4?dbPerformance[_0x1f25ab(0x17a)](_0x1f25ab(0x210))[_0x1f25ab(0x1e8)]({'date':_0x54c08e})['assign'](_0x44abad)[_0x1f25ab(0x201)]():dbPerformance[_0x1f25ab(0x17a)](_0x1f25ab(0x210))[_0x1f25ab(0x15d)](_0x44abad)[_0x1f25ab(0x201)](),_0xaedcd4=dbPerformance[_0x1f25ab(0x17a)]('data')[_0x1f25ab(0x1b9)](_0x1f25ab(0x208))['value'](),_0xaedcd4[_0x1f25ab(0x1bf)](_0x185fc8=>{const _0x27cc77=_0x1f25ab;_0x185fc8['date']<_0x54c08e&&dbPerformance['get'](_0x27cc77(0x210))[_0x27cc77(0x192)]({'date':_0x185fc8[_0x27cc77(0x208)]})[_0x27cc77(0x201)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4ee611){const _0x21a36d=_0x714470;let _0x2722a1,_0x258eae=[];logHistory(_0x21a36d(0x1f7),_0x21a36d(0x1f0)),_0x4ee611['portfolio']['forEach'](_0xbc80a5=>{const _0x30277a=_0x21a36d;if(_0xbc80a5[_0x30277a(0x16e)]!='BTC'&&!_0xbc80a5[_0x30277a(0x179)])_0x258eae['push']({'coin':_0xbc80a5[_0x30277a(0x16e)],'symbol':_0xbc80a5[_0x30277a(0x241)]});});let _0x48453b=[];try{const _0x54d987=fns[_0x21a36d(0x170)](fns[_0x21a36d(0x19c)](_0x4ee611[_0x21a36d(0x1d8)]['replace'](/\//g,'-')),_0x21a36d(0x23f));for(const _0x3f3a35 of _0x258eae){if(_0x3f3a35[_0x21a36d(0x16e)]!='BTC')_0x2722a1=await exchange['fetchOrders'](_0x3f3a35[_0x21a36d(0x241)],Date[_0x21a36d(0x153)](_0x54d987));_0x2722a1[_0x21a36d(0x1bf)](_0x5cfc34=>{const _0x3fdaf2=_0x21a36d,_0x48cbd5=_0x3f3a35[_0x3fdaf2(0x241)]['includes']('BTC/'),_0x16163b=fns[_0x3fdaf2(0x170)](fns[_0x3fdaf2(0x19c)](_0x5cfc34[_0x3fdaf2(0x212)]),_0x3fdaf2(0x1fd)),_0x49ba7a=fns['format'](fns[_0x3fdaf2(0x19c)](_0x5cfc34['datetime']),'yyyy/MM/dd');let _0x1123d9;if(_0x5cfc34[_0x3fdaf2(0x18d)]==_0x3fdaf2(0x1ae)&&_0x48cbd5==![])_0x1123d9=_0x5cfc34['amount'];if(_0x5cfc34['side']==_0x3fdaf2(0x1ae)&&_0x48cbd5==!![])_0x1123d9=-_0x5cfc34[_0x3fdaf2(0x1b7)]*_0x5cfc34['price'];if(_0x5cfc34[_0x3fdaf2(0x18d)]==_0x3fdaf2(0x16f)&&_0x48cbd5==![])_0x1123d9=-_0x5cfc34[_0x3fdaf2(0x1b7)];if(_0x5cfc34[_0x3fdaf2(0x18d)]==_0x3fdaf2(0x16f)&&_0x48cbd5==!![])_0x1123d9=_0x5cfc34[_0x3fdaf2(0x1b7)]*_0x5cfc34[_0x3fdaf2(0x243)];_0x48453b[_0x3fdaf2(0x15d)]({'timestamp':_0x16163b,'date':_0x49ba7a,'coin':_0x3f3a35[_0x3fdaf2(0x16e)],'symbol':_0x3f3a35[_0x3fdaf2(0x241)],'type':_0x5cfc34[_0x3fdaf2(0x16d)],'side':_0x5cfc34[_0x3fdaf2(0x18d)],'reverse':_0x48cbd5,'amount':formatResult(_0x5cfc34[_0x3fdaf2(0x1d9)],0x8),'filled':formatResult(_0x5cfc34[_0x3fdaf2(0x1d9)],0x8),'coinamount':formatResult(_0x1123d9,0x8),'price':formatResult(_0x5cfc34[_0x3fdaf2(0x243)],0x8)});let _0x17ea64;if(_0x5cfc34['side']==_0x3fdaf2(0x1ae)&&_0x48cbd5==![])_0x17ea64=-_0x5cfc34[_0x3fdaf2(0x1b7)]*_0x5cfc34['price'];if(_0x5cfc34[_0x3fdaf2(0x18d)]==_0x3fdaf2(0x1ae)&&_0x48cbd5==!![])_0x17ea64=_0x5cfc34[_0x3fdaf2(0x1b7)];if(_0x5cfc34['side']==_0x3fdaf2(0x16f)&&_0x48cbd5==![])_0x17ea64=_0x5cfc34[_0x3fdaf2(0x1b7)]*_0x5cfc34[_0x3fdaf2(0x243)];if(_0x5cfc34[_0x3fdaf2(0x18d)]==_0x3fdaf2(0x16f)&&_0x48cbd5==!![])_0x17ea64=-_0x5cfc34[_0x3fdaf2(0x1b7)];_0x48453b[_0x3fdaf2(0x15d)]({'date':_0x49ba7a,'coin':'BTC','coinamount':formatResult(_0x17ea64,0x8)});});}_0x48453b[_0x21a36d(0x1c1)]((_0x5ef6a5,_0xef1ba1)=>_0x5ef6a5[_0x21a36d(0x1f6)]>_0xef1ba1['timestamp']?0x1:_0xef1ba1[_0x21a36d(0x1f6)]>_0x5ef6a5[_0x21a36d(0x1f6)]?-0x1:0x0),dbLogs[_0x21a36d(0x17a)](_0x21a36d(0x1c7))[_0x21a36d(0x192)]()['write'](),_0x48453b['forEach'](_0x26ff82=>{const _0x232c1d=_0x21a36d;let _0x58b400;_0x26ff82['coin']!=_0x232c1d(0x207)&&(_0x58b400={'time':_0x26ff82[_0x232c1d(0x1f6)],'type':_0x232c1d(0x16c),'event':'Order:\x20'+_0x26ff82[_0x232c1d(0x241)]+'\x20'+_0x26ff82[_0x232c1d(0x18d)]+'\x20#'+_0x26ff82[_0x232c1d(0x1b7)]+'\x20@'+_0x26ff82[_0x232c1d(0x243)]},dbLogs[_0x232c1d(0x17a)](_0x232c1d(0x1c7))['push'](_0x58b400)[_0x232c1d(0x201)]());});const _0x36c910=fns[_0x21a36d(0x228)]({'start':new Date(_0x4ee611[_0x21a36d(0x1d8)]),'end':new Date()})['map'](_0x408285=>fns['format'](_0x408285,_0x21a36d(0x186)));let _0x389fb6=[];_0x4ee611[_0x21a36d(0x177)]['forEach'](_0x255432=>{const _0x354b6f=_0x21a36d;if(!_0x255432[_0x354b6f(0x179)]){_0x389fb6[_0x255432['coin']]=[];let _0xd58d48=_0x255432[_0x354b6f(0x160)];_0x36c910[_0x354b6f(0x1bf)]((_0x109e99,_0xf01e0)=>{const _0x454e7d=_0x354b6f;let _0x27b7cd=_0x48453b[_0x454e7d(0x1bb)](_0xd15b21=>_0xd15b21[_0x454e7d(0x16e)]==_0x255432[_0x454e7d(0x16e)]&&_0xd15b21[_0x454e7d(0x208)]==_0x109e99);if(_0x27b7cd['length']!=0x0){let _0x3ab8fe=_0x27b7cd[_0x454e7d(0x22a)]((_0x2f0f67,_0x9d886a)=>{const _0x56e91b=_0x454e7d;return _0x2f0f67+=_0x9d886a[_0x56e91b(0x1a8)],_0x2f0f67;},0x0);_0xd58d48+=_0x3ab8fe;}_0x389fb6[_0x255432[_0x454e7d(0x16e)]][_0x109e99]=_0xd58d48;});}});const _0x142b0a=[..._0x258eae];_0x142b0a[_0x21a36d(0x15d)]({'coin':stablecoins[_0x21a36d(0x237)][_0x21a36d(0x16e)],'symbol':stablecoins['eur'][_0x21a36d(0x241)]}),_0x142b0a[_0x21a36d(0x15d)]({'coin':stablecoins[_0x21a36d(0x176)]['coin'],'symbol':stablecoins[_0x21a36d(0x176)][_0x21a36d(0x241)]});let _0x33084a=[];for(const _0x227043 of _0x142b0a){_0x33084a[_0x227043[_0x21a36d(0x16e)]]=await getCloses(_0x227043[_0x21a36d(0x241)],new Date(_0x4ee611[_0x21a36d(0x1d8)]));}dbPerformance[_0x21a36d(0x17a)]('data')['remove']()[_0x21a36d(0x201)](),_0x36c910[_0x21a36d(0x1bf)]((_0x41a5f0,_0x5be32a)=>{const _0x241dbb=_0x21a36d;let _0xe7820,_0x1e5536=[];_0x5be32a==0x0?(_0x4ee611[_0x241dbb(0x177)]['forEach'](_0x4ffa75=>{const _0x488e7c=_0x241dbb;!_0x4ffa75['excluded']&&_0x1e5536[_0x488e7c(0x15d)]({'coin':_0x4ffa75[_0x488e7c(0x16e)],'number':_0x4ffa75[_0x488e7c(0x160)],'price':_0x4ffa75[_0x488e7c(0x23d)]});}),_0xe7820={'date':_0x41a5f0,'eur':_0x33084a[stablecoins[_0x241dbb(0x237)][_0x241dbb(0x16e)]][_0x5be32a],'usd':_0x33084a[stablecoins[_0x241dbb(0x176)][_0x241dbb(0x16e)]][_0x5be32a],'coins':_0x1e5536}):(_0x4ee611[_0x241dbb(0x177)][_0x241dbb(0x1bf)](_0xa1f66b=>{const _0x46ec0e=_0x241dbb;!_0xa1f66b[_0x46ec0e(0x179)]&&_0x1e5536[_0x46ec0e(0x15d)]({'coin':_0xa1f66b[_0x46ec0e(0x16e)],'number':_0x389fb6[_0xa1f66b[_0x46ec0e(0x16e)]][_0x41a5f0],'price':_0xa1f66b['coin']==_0x46ec0e(0x207)?0x1:_0x33084a[_0xa1f66b[_0x46ec0e(0x16e)]][_0x5be32a]});}),_0xe7820={'date':_0x41a5f0,'eur':_0x33084a[stablecoins[_0x241dbb(0x237)][_0x241dbb(0x16e)]][_0x5be32a],'usd':_0x33084a[stablecoins[_0x241dbb(0x176)][_0x241dbb(0x16e)]][_0x5be32a],'coins':_0x1e5536}),dbPerformance[_0x241dbb(0x17a)]('data')['push'](_0xe7820)[_0x241dbb(0x201)]();}),emitPerformance(),await resetCoinResults();for(let _0x447e3c of _0x48453b){_0x447e3c['coin']!=_0x21a36d(0x207)&&await updateCoinResults(_0x447e3c);}logHistory(_0x21a36d(0x1f7),_0x21a36d(0x17d));}catch(_0x3fd311){await handleError(_0x3fd311,_0x21a36d(0x239));}}async function getCloses(_0x5221a8,_0xf5f73e,_0x39b788=undefined){const _0x5eb69c=_0x714470,_0x108275='1d';let _0x246c1e,_0x5e330b;const _0x4f0df9=fns['differenceInCalendarDays'](new Date(),_0xf5f73e)+0x1;try{const _0x322625=exchange[_0x5eb69c(0x169)]()-_0x4f0df9*0x18*0xe10*0x3e8;_0x246c1e=await exchange[_0x5eb69c(0x20a)](_0x5221a8,_0x108275,_0x322625,_0x39b788),_0x5e330b=await exchange[_0x5eb69c(0x1a6)](_0x5221a8);}catch(_0x2d7d8f){await handleError(_0x2d7d8f,'getCloses()');}let _0x5c0180=ohlcvToCloses(_0x246c1e);return _0x5c0180[_0x5eb69c(0x15d)](_0x5e330b[_0x5221a8][_0x5eb69c(0x18e)]),_0x5c0180;}function ohlcvToCloses(_0x514e9a){const _0x2d9cbe=_0x714470;let _0xda78cb=[];return _0x514e9a[_0x2d9cbe(0x1bf)](function(_0x150a5b){const _0x53cd5e=_0x2d9cbe;_0xda78cb[_0x53cd5e(0x15d)](_0x150a5b[0x4]);}),_0xda78cb;}function getConfiguration(_0x4c39e0){const _0x3389ba=_0x714470;let _0x1b8eab=dbConfig[_0x3389ba(0x17a)](_0x3389ba(0x22e))[_0x3389ba(0x1e8)]({'botID':_0x4c39e0})[_0x3389ba(0x227)]();if(_0x1b8eab){let _0x1312c0=![];!_0x1b8eab['exchange']&&(_0x1b8eab={..._0x1b8eab,'exchange':'binance'},_0x1312c0=!![]),!_0x1b8eab[_0x3389ba(0x1c2)]&&(_0x1b8eab={..._0x1b8eab,'ordertype':'market'},_0x1312c0=!![]),!_0x1b8eab[_0x3389ba(0x230)]&&(_0x1b8eab={..._0x1b8eab,'timeout':0x14},_0x1312c0=!![]),_0x1312c0&&(_0x1b8eab={'botID':_0x1b8eab[_0x3389ba(0x1f2)],'exchange':_0x1b8eab[_0x3389ba(0x14e)],'apiKey':_0x1b8eab[_0x3389ba(0x1b3)],'apiSecret':_0x1b8eab[_0x3389ba(0x220)],'botname':_0x1b8eab['botname'],'threshold':_0x1b8eab[_0x3389ba(0x1ab)],'ordertype':_0x1b8eab[_0x3389ba(0x1c2)],'timeout':_0x1b8eab['timeout'],'startdate':_0x1b8eab[_0x3389ba(0x1d8)],'recreate':_0x1b8eab[_0x3389ba(0x206)],'timeshift':_0x1b8eab['timeshift'],'headless':_0x1b8eab['headless'],'cooldown':_0x1b8eab[_0x3389ba(0x1db)],'portfolio':_0x1b8eab[_0x3389ba(0x177)]},dbConfig['get'](_0x3389ba(0x22e))[_0x3389ba(0x192)]()['write'](),dbConfig[_0x3389ba(0x17a)](_0x3389ba(0x22e))['push'](_0x1b8eab)[_0x3389ba(0x201)]());}else _0x1b8eab={'botID':_0x4c39e0,'exchange':'binance','apiKey':'','apiSecret':'','botname':'Bot\x20'+_0x4c39e0,'threshold':'3','ordertype':_0x3389ba(0x238),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x1b8eab;}function emittedConfiguration(){const _0x32e96b=_0x714470;let _0x20f2b0;return config[_0x32e96b(0x1b3)]==''?_0x20f2b0=config:_0x20f2b0={...config,'apiKey':_0x32e96b(0x156),'apiSecret':'************'},_0x20f2b0;}function getSettings(){const _0x2a72b6=_0x714470;return dbSettings['get'](_0x2a72b6(0x198))['value']();}function getSecure(){const _0x123f44=_0x714470;return dbSecure[_0x123f44(0x17a)](_0x123f44(0x23e))['value']()||{};}function updateTimeshift(_0x37b3fb){const _0x1fee8a=_0x714470;let _0x1cd3fd=dbConfig[_0x1fee8a(0x17a)](_0x1fee8a(0x22e))[_0x1fee8a(0x1e8)]({'botID':botID})[_0x1fee8a(0x227)]();_0x1cd3fd&&dbConfig[_0x1fee8a(0x17a)](_0x1fee8a(0x22e))[_0x1fee8a(0x1e8)]({'botID':botID})['assign']({'timeshift':_0x37b3fb})[_0x1fee8a(0x201)](),config['timeshift']=_0x37b3fb,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x31c829){const _0x141968=_0x714470;let _0x19c316=dbConfig[_0x141968(0x17a)](_0x141968(0x22e))[_0x141968(0x1e8)]({'botID':botID})['value']();_0x31c829={..._0x31c829,'apiKey':crypt[_0x141968(0x20c)](secure[_0x141968(0x24a)],_0x31c829['apiKey'])[_0x141968(0x214)],'apiSecret':crypt[_0x141968(0x20c)](secure[_0x141968(0x24a)],_0x31c829[_0x141968(0x220)])[_0x141968(0x214)]};if(_0x19c316){if(_0x31c829[_0x141968(0x1b3)]=='************')_0x31c829[_0x141968(0x1b3)]=config[_0x141968(0x1b3)];if(_0x31c829['apiSecret']==_0x141968(0x156))_0x31c829['apiSecret']=config[_0x141968(0x220)];dbConfig[_0x141968(0x17a)](_0x141968(0x22e))[_0x141968(0x1e8)]({'botID':botID})['assign'](_0x31c829)[_0x141968(0x201)]();}else dbConfig[_0x141968(0x17a)]('bot')[_0x141968(0x15d)](_0x31c829)[_0x141968(0x201)](),process[_0x141968(0x202)]({'status':'enabled','live':'running'});config={..._0x31c829};if(config[_0x141968(0x206)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x141968(0x202)]({'botname':_0x31c829['botname']}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0xd7c96c){const _0x2379f2=_0x714470,_0x2ab73d={...config,'headless':_0xd7c96c[_0x2379f2(0x216)]};let _0x1ae1f2=dbConfig[_0x2379f2(0x17a)](_0x2379f2(0x22e))[_0x2379f2(0x1e8)]({'botID':botID})[_0x2379f2(0x227)]();_0x1ae1f2&&dbConfig[_0x2379f2(0x17a)]('bot')[_0x2379f2(0x1e8)]({'botID':botID})[_0x2379f2(0x1ec)](_0x2ab73d)['write'](),config={..._0x2ab73d},proxyEmit(_0x2379f2(0x1f1),emittedConfiguration());}function noslash(_0x49d855){const _0x25c17f=_0x714470;return _0x49d855[_0x25c17f(0x225)]('/','');}function updateNumberCoins(_0x1be39a){const _0x4dcfdd=_0x714470;_0x1be39a['eventType']&&_0x1be39a[_0x4dcfdd(0x14a)]=='outboundAccountPosition'&&_0x1be39a[_0x4dcfdd(0x23c)]['forEach'](_0x33e119=>{const _0xe7655f=_0x4dcfdd;let _0x50c027=currentCoins[_0xe7655f(0x1e8)](_0x3f2000=>_0x3f2000[_0xe7655f(0x16e)]==_0x33e119[_0xe7655f(0x1ad)]);if(_0x50c027)_0x50c027[_0xe7655f(0x1c9)]=Number(_0x33e119[_0xe7655f(0x21c)]);}),_0x1be39a[_0x4dcfdd(0x14a)]&&_0x1be39a['eventType']==_0x4dcfdd(0x1cd)&&(_0x1be39a[_0x4dcfdd(0x1b4)]==_0x4dcfdd(0x1e6)&&_0x1be39a['orderStatus']==_0x4dcfdd(0x224)&&lastOrders[_0x4dcfdd(0x1bf)](_0x477cdc=>{const _0x33447e=_0x4dcfdd;if(_0x477cdc[_0x33447e(0x1d0)]==_0x1be39a[_0x33447e(0x1d0)]){if(_0x477cdc[_0x33447e(0x1be)])_0x477cdc[_0x33447e(0x1d9)]=_0x1be39a[_0x33447e(0x182)]*_0x477cdc[_0x33447e(0x243)];else _0x477cdc[_0x33447e(0x1d9)]=_0x1be39a[_0x33447e(0x182)];}}));}async function getCoins(_0x2c6a20=!![]){const _0x325286=_0x714470;let _0x3a0e4c,_0x643042=[],_0x5946c1=[],_0x41de06=[];try{_0x3a0e4c=await exchange[_0x325286(0x1b8)](),mybalances=_0x3a0e4c[_0x325286(0x221)];if(!_0x2c6a20)for(const [_0x2b37cf,_0x57933e]of Object[_0x325286(0x23a)](mybalances)){_0x41de06[_0x325286(0x15d)](_0x2b37cf);}else config[_0x325286(0x177)][_0x325286(0x1bf)](_0xe19340=>{const _0x15e5ec=_0x325286;if(!_0xe19340['excluded'])_0x41de06[_0x15e5ec(0x15d)](_0xe19340[_0x15e5ec(0x16e)]);});for(const [_0x3f3073,_0x4d77ea]of Object[_0x325286(0x23a)](mybalances)){if(_0x41de06['includes'](_0x3f3073)){if((_0x4d77ea['toString']()!=0x0||config[_0x325286(0x177)][_0x325286(0x1e8)](_0x176457=>_0x176457[_0x325286(0x16e)]==_0x3f3073))&&(allSymbols[_0x325286(0x22c)](_0x3f3073+_0x325286(0x158))||_0x3f3073==_0x325286(0x207)))_0x5946c1[_0x325286(0x15d)]({'coin':_0x3f3073,'symbol':_0x3f3073+_0x325286(0x158),'reverse':![],'number':_0x4d77ea}),_0x3f3073!=_0x325286(0x207)&&_0x643042[_0x325286(0x15d)](_0x3f3073+_0x325286(0x158));else(_0x4d77ea['toString']()!=0x0||config[_0x325286(0x177)][_0x325286(0x1e8)](_0x791be4=>_0x791be4[_0x325286(0x16e)]==_0x3f3073))&&allSymbols[_0x325286(0x22c)](_0x325286(0x17c)+_0x3f3073)&&(_0x5946c1['push']({'coin':_0x3f3073,'symbol':_0x325286(0x17c)+_0x3f3073,'reverse':!![],'number':_0x4d77ea}),_0x3f3073!=_0x325286(0x207)&&_0x643042[_0x325286(0x15d)](_0x325286(0x17c)+_0x3f3073));}}}catch(_0x161ab8){if(!_0x2c6a20){if(_0x161ab8[_0x325286(0x18a)]()[_0x325286(0x22c)](_0x325286(0x1d3)))return logHistory('error',_0x325286(0x203)),![];else{if(_0x161ab8[_0x325286(0x18a)]()[_0x325286(0x22c)](_0x325286(0x1e4)))return logHistory(_0x325286(0x161),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x161ab8[_0x325286(0x18a)]()[_0x325286(0x22c)](_0x325286(0x1c6)))return logHistory('error',_0x325286(0x1b6)),![];else await handleError(_0x161ab8,_0x325286(0x1a0));}}}else await handleError(_0x161ab8,_0x325286(0x1a0));}return _0x5946c1;}async function getPortfolio(_0x302e00){const _0x4fd723=_0x714470;let _0x50db4c=[],_0x5f1fa9=[],_0x2008c4,_0x367986=[],_0x15cd93,_0x267136;_0x302e00[_0x4fd723(0x1b3)]==='************'||_0x302e00[_0x4fd723(0x220)]===_0x4fd723(0x156)?(_0x15cd93=config['apiKey'],_0x267136=config[_0x4fd723(0x220)]):(_0x15cd93=_0x302e00[_0x4fd723(0x1b3)],_0x267136=_0x302e00['apiSecret']);await initExchange(_0x15cd93,_0x267136);let _0x1bf4be=await loadSymbols();if(_0x1bf4be){_0x367986=await getCoins(![]);if(_0x367986===![])proxyEmit(_0x4fd723(0x177),![]);else{_0x367986['forEach'](_0xbcd24c=>{const _0x1601a=_0x4fd723;_0x50db4c[_0x1601a(0x15d)](_0xbcd24c['symbol']);});try{_0x5f1fa9=await exchange[_0x4fd723(0x1a6)](_0x50db4c);}catch(_0x2a0f04){await handleError(_0x2a0f04,_0x4fd723(0x174));}_0x367986[_0x4fd723(0x1bf)](_0x29bf9b=>{const _0x414485=_0x4fd723;_0x29bf9b[_0x414485(0x16e)]!=_0x414485(0x207)?_0x2008c4=_0x29bf9b[_0x414485(0x1be)]?0x1/_0x5f1fa9[_0x29bf9b[_0x414485(0x241)]]['last']:_0x5f1fa9[_0x29bf9b[_0x414485(0x241)]][_0x414485(0x18e)]:_0x2008c4=0x1,_0x29bf9b[_0x414485(0x243)]=formatResult(_0x2008c4,0x8);}),proxyEmit('portfolio',_0x367986);}}else proxyEmit(_0x4fd723(0x177),![]);}function checkMinimums(_0x597a0e){const _0x4c3665=_0x714470;let _0x4617f4=!![];const _0x4b979b=!_0x597a0e[_0x4c3665(0x1be)]?markets[_0x597a0e[_0x4c3665(0x241)]]['limits'][_0x4c3665(0x1b7)][_0x4c3665(0x1c0)]:markets[_0x597a0e[_0x4c3665(0x241)]][_0x4c3665(0x218)][_0x4c3665(0x1a7)][_0x4c3665(0x1c0)],_0x29d5ca=!_0x597a0e['reverse']?markets[_0x597a0e['symbol']][_0x4c3665(0x218)][_0x4c3665(0x1a7)][_0x4c3665(0x1c0)]:markets[_0x597a0e[_0x4c3665(0x241)]][_0x4c3665(0x218)][_0x4c3665(0x1b7)][_0x4c3665(0x1c0)];if(Math[_0x4c3665(0x247)](_0x597a0e[_0x4c3665(0x1b2)])<_0x4b979b)_0x4617f4=![];if(Math[_0x4c3665(0x247)](_0x597a0e[_0x4c3665(0x1b2)])*_0x597a0e[_0x4c3665(0x18e)]<_0x29d5ca)_0x4617f4=![];return _0x4617f4;}async function getBalances(){const _0x585fd0=_0x714470;let _0x24719f=0x0,_0x25204c;const _0x2623ac=config[_0x585fd0(0x1ab)];currentCoins[_0x585fd0(0x1bf)](_0xbf5f37=>{const _0x45f96e=_0x585fd0;if(_0xbf5f37['coin']!=_0x45f96e(0x207)){let _0x429eb6=global['ticker'][noslash(_0xbf5f37[_0x45f96e(0x241)])];_0x25204c=_0xbf5f37['reverse']?0x1/_0x429eb6:_0x429eb6;}else _0x25204c=0x1;let _0xae23a5=_0xbf5f37[_0x45f96e(0x1c9)]*_0x25204c;_0x24719f+=_0xae23a5,_0xbf5f37[_0x45f96e(0x18e)]=formatResult(Number(_0x25204c),0x8),_0xbf5f37[_0x45f96e(0x227)]=_0xae23a5;}),currentCoins['forEach'](_0x42fd15=>{const _0x20420d=_0x585fd0;let _0x13016e=config[_0x20420d(0x177)]['find'](_0x11efce=>_0x11efce[_0x20420d(0x16e)]==_0x42fd15[_0x20420d(0x16e)]),_0x139a6b=Number(_0x13016e['distribution']),_0xb6f933=_0x42fd15[_0x20420d(0x227)]/_0x24719f*0x64,_0x4bdfb7=_0x139a6b*_0x24719f/0x64/_0x42fd15['last']-_0x42fd15['number'];_0x42fd15[_0x20420d(0x1f4)]=formatResult(_0xb6f933,0x3),_0x42fd15[_0x20420d(0x175)]=formatResult(_0x139a6b,0x3),_0x42fd15[_0x20420d(0x1b2)]=formatResult(_0x4bdfb7,0x8),_0x42fd15[_0x20420d(0x18d)]='',_0x42fd15[_0x20420d(0x1bc)]='';if(_0x42fd15[_0x20420d(0x16e)]!=_0x20420d(0x207)){if(_0x42fd15[_0x20420d(0x1f4)]>_0x139a6b)_0x42fd15['side']='sell',_0x42fd15[_0x20420d(0x1bc)]=checkMinimums(_0x42fd15);else _0x42fd15['distribution']<_0x139a6b&&(_0x42fd15['side']=_0x20420d(0x1ae),_0x42fd15[_0x20420d(0x1bc)]=checkMinimums(_0x42fd15));}_0x42fd15[_0x20420d(0x19b)]=_0x42fd15[_0x20420d(0x1f4)]/_0x42fd15[_0x20420d(0x175)]-0x1;}),currentCoins['sort']((_0x101a8e,_0x40c8e2)=>_0x101a8e[_0x585fd0(0x19b)]<_0x40c8e2[_0x585fd0(0x19b)]?0x1:_0x40c8e2[_0x585fd0(0x19b)]<_0x101a8e[_0x585fd0(0x19b)]?-0x1:0x0);const _0x47d74=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47d74['eur'],'usd':_0x47d74['usd'],'portfolio':JSON[_0x585fd0(0x1e5)](currentCoins),'threshold':_0x2623ac},proxyEmit(_0x585fd0(0x23c),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x585fd0(0x216)])headlessMode({'portfolio':currentCoins,'threshold':_0x2623ac});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}function _0x1a9e(_0x206377,_0x2797c6){const _0x1fc94=_0x4f5a();return _0x1a9e=function(_0x2005e4,_0x48ffe5){_0x2005e4=_0x2005e4-0x14a;let _0x4f5a91=_0x1fc94[_0x2005e4];return _0x4f5a91;},_0x1a9e(_0x206377,_0x2797c6);}async function storePerformance(){const _0x14c172=_0x714470;if(!lastBalances)return;let _0x45592a=await getStartingBalances(![]),_0x1b11c3=[],_0x2d9110=[],_0x44ce99;JSON[_0x14c172(0x153)](lastBalances[_0x14c172(0x177)])['forEach'](_0x2be5b1=>{const _0x37671c=_0x14c172;let _0x159292={'coin':_0x2be5b1['coin'],'number':_0x2be5b1['number'],'price':_0x2be5b1[_0x37671c(0x18e)]};_0x1b11c3[_0x37671c(0x15d)](_0x159292);if(!_0x45592a['coins']||!_0x45592a[_0x37671c(0x22d)]['find'](_0x5ec89c=>_0x5ec89c[_0x37671c(0x16e)]==_0x2be5b1['coin']&&_0x5ec89c['number']!=0x0))_0x2d9110[_0x37671c(0x15d)](_0x159292);});const _0x101b78=await getFiat();_0x44ce99={'date':lastBalances[_0x14c172(0x1af)][_0x14c172(0x21b)]('\x20')[0x0],'eur':_0x101b78[_0x14c172(0x237)],'usd':_0x101b78[_0x14c172(0x176)],'coins':_0x1b11c3};let _0x19eca2=dbPerformance[_0x14c172(0x17a)](_0x14c172(0x210))[_0x14c172(0x1e8)]({'date':_0x44ce99['date']})[_0x14c172(0x227)]();_0x19eca2?dbPerformance[_0x14c172(0x17a)]('data')['find']({'date':_0x44ce99[_0x14c172(0x208)]})['assign'](_0x44ce99)[_0x14c172(0x201)]():dbPerformance[_0x14c172(0x17a)]('data')['push'](_0x44ce99)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5442a2=_0x714470;if(dbPerformance[_0x5442a2(0x1f8)](_0x5442a2(0x210))[_0x5442a2(0x227)]()){let _0x40aeec=dbPerformance[_0x5442a2(0x17a)]('data')['sortBy'](_0x5442a2(0x208))['value']();proxyEmit('performance',_0x40aeec),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x2a211d=!![]){const _0x496c2a=_0x714470;let _0x58af20=dbPerformance['get'](_0x496c2a(0x210))[_0x496c2a(0x1e8)]({'date':config[_0x496c2a(0x1d8)]})[_0x496c2a(0x227)]();config['apiKey']!=''&&!_0x58af20&&(await setStartDatePerformance(config),_0x58af20=dbPerformance[_0x496c2a(0x17a)](_0x496c2a(0x210))[_0x496c2a(0x1e8)]({'date':config['startdate']})[_0x496c2a(0x227)]());if(config[_0x496c2a(0x1b3)]==''||!_0x58af20)return{};let _0x5afafe=0x0,_0x15d06d=0x0,_0x2bd5cb=0x0,_0x4c9a05=[],_0x5d4283=0x0;config[_0x496c2a(0x177)][_0x496c2a(0x1bf)](_0x2ba99d=>{const _0x209e87=_0x496c2a;!_0x2ba99d[_0x209e87(0x179)]&&(_0x4c9a05[_0x5d4283]={'coin':_0x2ba99d['coin'],'symbol':_0x2ba99d[_0x209e87(0x241)],'number':_0x2ba99d[_0x209e87(0x160)],'price':_0x2ba99d['startprice']},_0x5afafe+=_0x2ba99d['startprice']*_0x2ba99d[_0x209e87(0x160)],_0x15d06d+=_0x2ba99d[_0x209e87(0x23d)]*_0x2ba99d['startnumber']*_0x58af20[_0x209e87(0x237)],_0x2bd5cb+=_0x2ba99d[_0x209e87(0x23d)]*_0x2ba99d[_0x209e87(0x160)]*_0x58af20['usd'],_0x5d4283++);});let _0x3865a8={'btc':_0x5afafe,'eur':_0x15d06d,'usd':_0x2bd5cb,'coins':_0x4c9a05};if(_0x2a211d)proxyEmit(_0x496c2a(0x15b),_0x3865a8);return _0x3865a8;}function headlessMode(_0x2c8862){const _0x1f8013=_0x714470;let _0x58d47a=_0x2c8862[_0x1f8013(0x177)],_0x275995=_0x2c8862[_0x1f8013(0x1ab)],_0x201b72=[];for(let _0x5827a5 of _0x58d47a){if(_0x5827a5[_0x1f8013(0x16e)]!=_0x1f8013(0x207)){if(_0x5827a5[_0x1f8013(0x1f4)]/_0x5827a5['target']-0x1>=_0x275995/0x64){if(_0x5827a5[_0x1f8013(0x1bc)])_0x201b72[_0x1f8013(0x15d)](_0x5827a5);}else{if(_0x5827a5[_0x1f8013(0x1f4)]/_0x5827a5[_0x1f8013(0x175)]-0x1<=-_0x275995/0x64){if(_0x5827a5[_0x1f8013(0x1bc)])_0x201b72[_0x1f8013(0x15d)](_0x5827a5);}}}}_0x201b72[_0x1f8013(0x236)]>0x0&&placeOrder(_0x201b72);}function symbolToCoin(_0x25b426){const _0x5ad640=_0x714470;let _0x32af51;if(_0x25b426[_0x5ad640(0x22c)](_0x5ad640(0x158)))_0x32af51=_0x25b426['replace'](_0x5ad640(0x158),'');if(_0x25b426[_0x5ad640(0x22c)](_0x5ad640(0x17c)))_0x32af51=_0x25b426[_0x5ad640(0x225)](_0x5ad640(0x17c),'');return _0x32af51;}async function validateOrders(_0x16f02f=0x0){const _0x29c94c=_0x714470;let _0x10aa0e=[],_0x219593=config[_0x29c94c(0x1c2)]==_0x29c94c(0x238)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x29c94c(0x230)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x29c94c(0x1bf)](_0x6e966b=>{const _0x40b572=_0x29c94c;let _0x37665b=previousCoins[_0x40b572(0x1e8)](_0x257f91=>_0x257f91[_0x40b572(0x16e)]==symbolToCoin(_0x6e966b[_0x40b572(0x241)])),_0x2529d4=currentCoins[_0x40b572(0x1e8)](_0x279926=>_0x279926['coin']==symbolToCoin(_0x6e966b[_0x40b572(0x241)])),_0x316499,_0x2d648a;_0x6e966b[_0x40b572(0x18d)]==_0x40b572(0x1ae)&&!_0x6e966b[_0x40b572(0x1be)]||_0x6e966b[_0x40b572(0x18d)]=='sell'&&_0x6e966b[_0x40b572(0x1be)]?(_0x316499=_0x37665b[_0x40b572(0x1c9)]+0.9*_0x6e966b[_0x40b572(0x1d9)],_0x2d648a=_0x37665b[_0x40b572(0x1c9)]+1.1*_0x6e966b[_0x40b572(0x1d9)]):(_0x316499=_0x37665b[_0x40b572(0x1c9)]-1.1*_0x6e966b[_0x40b572(0x1d9)],_0x2d648a=_0x37665b['number']-0.9*_0x6e966b['filled']);const _0x40b787=_0x6e966b['filled']!=0x0&&_0x2529d4['number']>=_0x316499&&_0x2529d4[_0x40b572(0x1c9)]<=_0x2d648a;_0x10aa0e[_0x40b572(0x15d)](_0x40b787);if(_0x40b787&&config[_0x40b572(0x1c2)]!=_0x40b572(0x238)){if(_0x6e966b[_0x40b572(0x1be)])logHistory(_0x40b572(0x16c),_0x40b572(0x215)+_0x6e966b['symbol']+'\x20'+_0x6e966b['side']+'\x20#'+formatResult(_0x6e966b[_0x40b572(0x1d9)]/_0x6e966b['price'],0x8)+'\x20@'+formatResult(_0x6e966b[_0x40b572(0x243)],0x8));else logHistory(_0x40b572(0x16c),_0x40b572(0x215)+_0x6e966b[_0x40b572(0x241)]+'\x20'+_0x6e966b[_0x40b572(0x18d)]+'\x20#'+formatResult(_0x6e966b['filled'],0x8)+'\x20@'+formatResult(_0x6e966b[_0x40b572(0x243)],0x8));}}),_0x10aa0e['forEach']((_0x481cd2,_0x35e7da)=>{const _0x201fd5=_0x29c94c;if(_0x481cd2)lastOrders[_0x201fd5(0x1c4)](_0x35e7da,0x1);});if(_0x16f02f<_0x219593&&_0x10aa0e[_0x29c94c(0x22c)](![])){if(_0x16f02f==0x0){config[_0x29c94c(0x1c2)]=='market'?logHistory('error',_0x29c94c(0x1e9)):logHistory(_0x29c94c(0x161),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x16f02f);},0xa*0x3e8);}else{(_0x16f02f==0x1||_0x16f02f==Math['round'](_0x219593/0x2)||_0x16f02f==_0x219593-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x16f02f);},validateOrderInterval);}}else{lockOrders=![];if(_0x16f02f>0x0&&!_0x10aa0e[_0x29c94c(0x22c)](![]))config[_0x29c94c(0x1c2)]==_0x29c94c(0x238)?logHistory(_0x29c94c(0x1f7),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory('success',_0x29c94c(0x18c));else _0x16f02f>0x0&&_0x10aa0e[_0x29c94c(0x22c)](![])&&(config[_0x29c94c(0x1c2)]==_0x29c94c(0x238)?logHistory(_0x29c94c(0x1f7),_0x29c94c(0x15a)+Math[_0x29c94c(0x193)](_0x219593*validateOrderInterval/0xea60)+_0x29c94c(0x1e0)):(lastOrders[_0x29c94c(0x1bf)](async _0x33fd7e=>{const _0xc86652=_0x29c94c;try{const _0xb4761e=await exchange[_0xc86652(0x1d7)](_0x33fd7e[_0xc86652(0x1d0)],_0x33fd7e['symbol']);}catch(_0xef2fc8){if(_0xef2fc8['toString']()[_0xc86652(0x22c)](_0xc86652(0x21d))){}else await handleError(_0xef2fc8,_0xc86652(0x151));}}),logHistory(_0x29c94c(0x1f7),_0x29c94c(0x1cc)+Math[_0x29c94c(0x193)](_0x219593*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x5224f3=_0x714470;dbCoinResults[_0x5224f3(0x17a)](_0x5224f3(0x22d))['remove']()['write']();let _0x1dbca0=await getStartingBalances(![]);_0x1dbca0[_0x5224f3(0x22d)][_0x5224f3(0x1bf)](_0x468ff9=>{const _0x272ae0=_0x5224f3,_0x5c23ad=_0x468ff9['symbol'][_0x272ae0(0x22c)](_0x272ae0(0x17c));if(_0x468ff9[_0x272ae0(0x16e)]!=_0x272ae0(0x207)){let _0x239b22={'coin':_0x468ff9[_0x272ae0(0x16e)],'number':_0x468ff9['number'],'breakeven':_0x468ff9[_0x272ae0(0x243)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x272ae0(0x17a)]('coins')[_0x272ae0(0x15d)](_0x239b22)[_0x272ae0(0x201)]();}});}async function updateCoinResults(_0x219036){const _0xcb21d2=_0x714470;let _0x679d8a,_0x248fbf,_0x5d6985,_0x180615,_0x3234d9,_0x4019d9,_0x4e9c17=dbCoinResults[_0xcb21d2(0x17a)]('coins')['find']({'coin':_0x219036[_0xcb21d2(0x16e)]})[_0xcb21d2(0x227)]();if(!_0x4e9c17)return;if(_0x219036[_0xcb21d2(0x195)]&&_0x219036[_0xcb21d2(0x195)][_0xcb21d2(0x191)]==_0xcb21d2(0x207))_0x679d8a=_0x219036[_0xcb21d2(0x195)][_0xcb21d2(0x1a7)];else{if(_0x219036[_0xcb21d2(0x195)]&&_0x219036['fee'][_0xcb21d2(0x191)]==_0xcb21d2(0x1e2))_0x679d8a=_0x219036[_0xcb21d2(0x195)][_0xcb21d2(0x1a7)]*global[_0xcb21d2(0x21a)][_0xcb21d2(0x222)];else _0x679d8a=0.001*_0x219036['filled'];}const _0x3fdd15=_0x219036['symbol']['includes'](_0xcb21d2(0x17c));_0x3fdd15&&(_0x4019d9={'coin':_0x219036[_0xcb21d2(0x16e)],'symbol':_0x219036[_0xcb21d2(0x241)],'filled':_0x219036['filled']*_0x219036[_0xcb21d2(0x243)],'side':_0x219036[_0xcb21d2(0x18d)]=='sell'?_0xcb21d2(0x1ae):_0xcb21d2(0x16f),'price':0x1/_0x219036[_0xcb21d2(0x243)]},_0x219036={..._0x4019d9});_0x219036[_0xcb21d2(0x18d)]=='buy'?_0x5d6985=(_0x4e9c17[_0xcb21d2(0x223)]*_0x4e9c17['number']+_0x219036['price']*_0x219036['filled'])/(_0x4e9c17[_0xcb21d2(0x1c9)]+_0x219036[_0xcb21d2(0x1d9)]):_0x5d6985=(_0x4e9c17['breakeven']*_0x4e9c17[_0xcb21d2(0x1c9)]-_0x219036[_0xcb21d2(0x243)]*_0x219036[_0xcb21d2(0x1d9)])/(_0x4e9c17[_0xcb21d2(0x1c9)]-_0x219036[_0xcb21d2(0x1d9)]);_0x219036[_0xcb21d2(0x18d)]==_0xcb21d2(0x1ae)?_0x180615=_0x4e9c17[_0xcb21d2(0x188)]:_0x180615=_0x4e9c17[_0xcb21d2(0x188)]+(_0x219036[_0xcb21d2(0x243)]-_0x4e9c17[_0xcb21d2(0x223)])*_0x219036[_0xcb21d2(0x1d9)];_0x248fbf=_0x219036[_0xcb21d2(0x18d)]==_0xcb21d2(0x16f)?_0x4e9c17['number']-_0x219036[_0xcb21d2(0x1d9)]:_0x4e9c17[_0xcb21d2(0x1c9)]+_0x219036['filled'],_0x3234d9=(_0x219036[_0xcb21d2(0x243)]-_0x5d6985)*_0x248fbf;let _0xbf741c={'coin':_0x219036[_0xcb21d2(0x16e)],'number':_0x248fbf,'breakeven':formatResult(_0x5d6985,0x8),'realized':formatResult(_0x180615,0x8),'unrealized':formatResult(_0x3234d9,0x8),'fees':formatResult(_0x4e9c17[_0xcb21d2(0x1cb)]+_0x679d8a,0x8),'sells':_0x219036[_0xcb21d2(0x18d)]==_0xcb21d2(0x16f)?_0x4e9c17['sells']+0x1:_0x4e9c17[_0xcb21d2(0x1d5)],'buys':_0x219036[_0xcb21d2(0x18d)]==_0xcb21d2(0x1ae)?_0x4e9c17[_0xcb21d2(0x209)]+0x1:_0x4e9c17[_0xcb21d2(0x209)]};dbCoinResults[_0xcb21d2(0x17a)]('coins')['find']({'coin':_0x219036['coin']})[_0xcb21d2(0x1ec)](_0xbf741c)[_0xcb21d2(0x201)]();}async function placeOrder(_0x4e6ac5){const _0x36317e=_0x714470,_0x33e9d8=config[_0x36317e(0x1c2)]==_0x36317e(0x238)?_0x36317e(0x238):_0x36317e(0x23b);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x36317e(0x153)](JSON['stringify'](currentCoins));for(const _0x447d0a of _0x4e6ac5){let _0x2abfe9,_0xf82d15,_0x4ef990,_0x521595,_0x349a37,_0xa3f994=_0x447d0a[_0x36317e(0x241)];try{const _0x24d35e=await exchange[_0x36317e(0x1a6)](_0xa3f994),_0x175cab=_0x24d35e[_0xa3f994];_0x2abfe9=_0x175cab[_0x36317e(0x18e)],_0xf82d15=_0x175cab['bid'],_0x4ef990=_0x175cab[_0x36317e(0x200)];_0x447d0a[_0x36317e(0x1be)]?(_0x521595=_0x447d0a['side']==_0x36317e(0x1ae)?_0x36317e(0x16f):_0x36317e(0x1ae),_0x349a37=Math[_0x36317e(0x247)](_0x447d0a['trade'])/_0x2abfe9):(_0x521595=_0x447d0a[_0x36317e(0x18d)],_0x349a37=Math[_0x36317e(0x247)](_0x447d0a[_0x36317e(0x1b2)]));_0x33e9d8==_0x36317e(0x23b)&&(config[_0x36317e(0x1c2)]==_0x36317e(0x197)&&(_0x2abfe9=_0x521595==_0x36317e(0x1ae)?_0xf82d15:_0x4ef990),config['ordertype']==_0x36317e(0x189)&&(_0x2abfe9=_0x521595=='buy'?_0x4ef990:_0xf82d15));_0x349a37=formatResult(_0x349a37,0x8),_0x2abfe9=formatResult(_0x2abfe9,0x8);const _0x14d806=await exchange[_0x36317e(0x1e7)](_0xa3f994,_0x33e9d8,_0x521595,_0x349a37,_0x2abfe9);lastOrders['push']({'orderId':_0x14d806['id'],'symbol':_0xa3f994,'side':_0x521595,'reverse':_0x447d0a[_0x36317e(0x1be)],'amount':_0x447d0a[_0x36317e(0x1be)]?_0x14d806[_0x36317e(0x1b7)]*_0x14d806[_0x36317e(0x243)]:_0x14d806[_0x36317e(0x1b7)],'filled':_0x447d0a['reverse']?_0x14d806['filled']*_0x14d806['price']:_0x14d806[_0x36317e(0x1d9)],'price':_0x14d806[_0x36317e(0x243)]});const _0x2634da=_0x33e9d8==_0x36317e(0x238)?_0x36317e(0x14f):config[_0x36317e(0x1c2)]=='limit-high'?_0x36317e(0x1d4):'Limit\x20(low-margin)';if(_0x33e9d8==_0x36317e(0x238))logHistory(_0x36317e(0x16c),_0x2634da+'\x20order:\x20'+_0xa3f994+'\x20'+_0x521595+'\x20#'+formatResult(_0x14d806[_0x36317e(0x1d9)],0x8)+'\x20@'+formatResult(_0x14d806[_0x36317e(0x243)],0x8));else logHistory(_0x36317e(0x16c),_0x2634da+_0x36317e(0x1bd)+_0xa3f994+'\x20'+_0x521595+'\x20#'+formatResult(_0x14d806[_0x36317e(0x1b7)],0x8)+'\x20@'+formatResult(_0x14d806['price'],0x8));_0x14d806[_0x36317e(0x16e)]=_0x447d0a['coin'],await updateCoinResults(_0x14d806);if(config[_0x36317e(0x1db)]!=0x0){let _0x470a65=null;if(cooldownTracker[_0x36317e(0x236)]==config[_0x36317e(0x1db)]-0x1)_0x470a65=cooldownTracker[_0x36317e(0x16b)]();const _0x25ed9a=getTimeStamp();cooldownTracker[_0x36317e(0x15d)](_0x25ed9a);if(_0x470a65){const _0x305e83=fns[_0x36317e(0x1a4)](new Date(_0x25ed9a),new Date(_0x470a65));_0x305e83<cooldownInterval&&(logHistory(_0x36317e(0x161),'Executed\x20'+config[_0x36317e(0x1db)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x36317e(0x233)+cooldownPeriod/(0xe10*0x3e8)+_0x36317e(0x242)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x39dbae){if(_0x39dbae[_0x36317e(0x18a)]()[_0x36317e(0x22c)](_0x36317e(0x20b)))logHistory(_0x36317e(0x161),_0x36317e(0x226)+_0xa3f994);else{if(_0x39dbae[_0x36317e(0x18a)]()[_0x36317e(0x22c)](_0x36317e(0x185)))logHistory(_0x36317e(0x161),_0x36317e(0x1e1)+_0xa3f994);else await handleError(_0x39dbae,_0x36317e(0x1c8));}}}if(lastOrders[_0x36317e(0x236)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x36317e(0x216)]&&(config[_0x36317e(0x1c2)]=='market'?logHistory(_0x36317e(0x161),_0x36317e(0x1f9)):logHistory(_0x36317e(0x161),_0x36317e(0x155)));else coolingDown&&(!config[_0x36317e(0x216)]&&logHistory(_0x36317e(0x161),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x202364,_0x2123f8,_0x3becf8=''){const _0x5abc8b=_0x714470;let _0x2ed4a3={'time':getTimeStamp(),'type':_0x202364,'event':_0x2123f8};dbLogs[_0x5abc8b(0x17a)](_0x5abc8b(0x1c7))[_0x5abc8b(0x15d)](_0x2ed4a3)[_0x5abc8b(0x201)]();if(_0x3becf8=='')_0x3becf8=_0x2123f8;proxyEmit('event',{'log':_0x2ed4a3,'summary':_0x3becf8}),process['send']({'telegram':_0x2ed4a3}),logging(''+_0x2ed4a3[_0x5abc8b(0x1ce)]);}function emitHistory(_0x2b72f0={}){const _0x30a09a=_0x714470;Object[_0x30a09a(0x18b)](_0x2b72f0)['length']==0x0&&(_0x2b72f0={'type':[_0x30a09a(0x16c),_0x30a09a(0x1ce)],'event':'','page':0x1});if(_0x2b72f0[_0x30a09a(0x16d)]['includes'](_0x30a09a(0x1ce)))_0x2b72f0['type'][_0x30a09a(0x1c4)](_0x2b72f0[_0x30a09a(0x16d)]['indexOf']('event'),0x1,_0x30a09a(0x161),'success');if(dbLogs[_0x30a09a(0x1f8)](_0x30a09a(0x1c7))['value']()){let _0x3bd7eb=dbLogs[_0x30a09a(0x17a)](_0x30a09a(0x1c7))[_0x30a09a(0x1bb)](_0x3fee97=>{const _0xc9c224=_0x30a09a;if(_0x2b72f0['type']['length']==0x0)return![];else return _0x2b72f0[_0xc9c224(0x16d)][_0xc9c224(0x22c)](_0x3fee97[_0xc9c224(0x16d)]);})[_0x30a09a(0x1bb)](_0x19da12=>{const _0x2ced6d=_0x30a09a;if(_0x2b72f0['event']=='')return!![];else return _0x19da12[_0x2ced6d(0x1ce)]['toLowerCase']()['includes'](_0x2b72f0[_0x2ced6d(0x1ce)][_0x2ced6d(0x164)]());})[_0x30a09a(0x1b9)](_0x30a09a(0x1af)),_0x498c9d=_0x3bd7eb[_0x30a09a(0x227)]()[_0x30a09a(0x236)];_0x3bd7eb=_0x3bd7eb[_0x30a09a(0x1be)]()[_0x30a09a(0x245)]((_0x2b72f0[_0x30a09a(0x1c3)]-0x1)*logPageSize,_0x2b72f0[_0x30a09a(0x1c3)]*logPageSize-0x1)[_0x30a09a(0x1be)]()[_0x30a09a(0x227)](),proxyEmit(_0x30a09a(0x1dd),{'logs':_0x3bd7eb,'total':_0x498c9d});}else proxyEmit(_0x30a09a(0x1dd),{'logs':[],'total':0x0});}async function pauseBot(_0x255594){const _0xc6b9ae=_0x714470,_0x26c51c=new Date()[_0xc6b9ae(0x1de)]();console[_0xc6b9ae(0x244)](_0xc6b9ae(0x1a3),_0x26c51c),console['log']('Delta\x20:\x20',_0x26c51c-lastBotPause),console[_0xc6b9ae(0x244)](_0xc6b9ae(0x166),consecutivePauses);if(!lastBotPause)lastBotPause=new Date()[_0xc6b9ae(0x1de)](),consecutivePauses=0x1;else{if(_0x26c51c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0xc6b9ae(0x187)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0xc6b9ae(0x1de)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x255594),botPaused=![],reset();}}async function handleError(_0x52a37d,_0x258f01,_0x3d8ebc=''){const _0x4215aa=_0x714470;if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)]('DDoSProtection'))logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x163)),await pauseBot(pauseBotInterval);else{if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)](_0x4215aa(0x14d)))logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x232)),await pauseBot(pauseBotInterval);else{if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)]('RequestTimeout'))logHistory(_0x4215aa(0x161),_0x258f01+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)](_0x4215aa(0x1d3)))logHistory(_0x4215aa(0x161),_0x258f01+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x4215aa(0x161),_0x4215aa(0x204)),process[_0x4215aa(0x187)](0x4d);else{if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)](_0x4215aa(0x1e4)))logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x249)),logHistory(_0x4215aa(0x161),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4215aa(0x187)](0x4d);else{if(_0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)](_0x4215aa(0x1c6)))logHistory(_0x4215aa(0x161),_0x258f01+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x4215aa(0x161),_0x4215aa(0x204)),process[_0x4215aa(0x187)](0x4d);else{if(_0x52a37d[_0x4215aa(0x18a)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x258f01+_0x4215aa(0x24b)),logHistory(_0x4215aa(0x161),_0x4215aa(0x204)),process[_0x4215aa(0x187)](0x4d);else{if(_0x52a37d['toString']()[_0x4215aa(0x22c)](_0x4215aa(0x21e)))logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x24b)),logHistory(_0x4215aa(0x161),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4215aa(0x187)](0x4d);else _0x52a37d[_0x4215aa(0x18a)]()[_0x4215aa(0x22c)](_0x4215aa(0x20e))?logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x1dc)):(logHistory(_0x4215aa(0x161),_0x258f01+_0x4215aa(0x22f)),logging(_0x258f01+_0x4215aa(0x19d),_0x52a37d),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x1e5b08,_0x13aaa9){const _0x2f8d58=_0x714470;return parseFloat(_0x1e5b08[_0x2f8d58(0x1aa)](_0x13aaa9));}function logging(_0x5969ae,_0x543e1f=''){const _0x3e82d6=_0x714470;console['log'](getTimeStamp()+_0x3e82d6(0x1a1)+botID+'\x20>\x20'+_0x5969ae,_0x543e1f);}function getServerTime(){const _0x356a48=_0x714470,_0x535db1=new Date();return _0x535db1['getFullYear']()+'/'+(_0x535db1['getMonth']()+0x1)['toString']()[_0x356a48(0x180)](0x2,'0')+'/'+_0x535db1[_0x356a48(0x1ca)]()[_0x356a48(0x18a)]()['padStart'](0x2,'0')+'\x20'+_0x535db1['getHours']()[_0x356a48(0x18a)]()[_0x356a48(0x180)](0x2,'0')+':'+_0x535db1[_0x356a48(0x211)]()[_0x356a48(0x18a)]()[_0x356a48(0x180)](0x2,'0')+':'+_0x535db1[_0x356a48(0x1ba)]()[_0x356a48(0x18a)]()[_0x356a48(0x180)](0x2,'0');}function getTimeStamp(){const _0x24bb95=_0x714470,_0x3c4721=shiftedTime();return _0x3c4721[_0x24bb95(0x20f)]()+'/'+(_0x3c4721[_0x24bb95(0x1f5)]()+0x1)[_0x24bb95(0x18a)]()['padStart'](0x2,'0')+'/'+_0x3c4721[_0x24bb95(0x1ca)]()['toString']()[_0x24bb95(0x180)](0x2,'0')+'\x20'+_0x3c4721['getHours']()[_0x24bb95(0x18a)]()[_0x24bb95(0x180)](0x2,'0')+':'+_0x3c4721[_0x24bb95(0x211)]()['toString']()[_0x24bb95(0x180)](0x2,'0')+':'+_0x3c4721[_0x24bb95(0x1ba)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x492f60=_0x714470,_0x4db985=shiftedTime();return _0x4db985[_0x492f60(0x20f)]()+'/'+(_0x4db985['getMonth']()+0x1)['toString']()[_0x492f60(0x180)](0x2,'0')+'/'+_0x4db985[_0x492f60(0x1ca)]()[_0x492f60(0x18a)]()[_0x492f60(0x180)](0x2,'0');}function getHour(){const _0x952f73=_0x714470,_0x31783d=shiftedTime();return _0x31783d[_0x952f73(0x1d1)]()['toString']()[_0x952f73(0x180)](0x2,'0');}function sleep(_0x3b4e71){return new Promise(_0x5a52b0=>setTimeout(_0x5a52b0,_0x3b4e71));}function shiftedTime(){const _0x4fff71=_0x714470,_0x3e02c7=new Date();let _0x387ec4=_0x3e02c7;if(config&&config[_0x4fff71(0x1c5)]!==0x0)_0x387ec4=fns[_0x4fff71(0x19a)](_0x3e02c7,{'hours':config['timeshift']});return _0x387ec4;}