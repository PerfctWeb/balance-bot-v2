const _0x2cb630=_0x4662;(function(_0x1431fd,_0x61fa0e){const _0x976e8d=_0x4662,_0x28de3c=_0x1431fd();while(!![]){try{const _0x135560=-parseInt(_0x976e8d(0x27f))/0x1*(parseInt(_0x976e8d(0x192))/0x2)+parseInt(_0x976e8d(0x1bc))/0x3*(-parseInt(_0x976e8d(0x18c))/0x4)+parseInt(_0x976e8d(0x1e8))/0x5*(parseInt(_0x976e8d(0x21b))/0x6)+parseInt(_0x976e8d(0x210))/0x7*(-parseInt(_0x976e8d(0x1aa))/0x8)+-parseInt(_0x976e8d(0x2d5))/0x9+-parseInt(_0x976e8d(0x29c))/0xa+-parseInt(_0x976e8d(0x284))/0xb*(-parseInt(_0x976e8d(0x1ab))/0xc);if(_0x135560===_0x61fa0e)break;else _0x28de3c['push'](_0x28de3c['shift']());}catch(_0x318648){_0x28de3c['push'](_0x28de3c['shift']());}}}(_0x5a3e,0x3e115));const _0x32a9ce=function(){let _0x1c26ba=!![];return function(_0xb8077d,_0x482826){const _0x281945=_0x1c26ba?function(){if(_0x482826){const _0x26c24c=_0x482826['apply'](_0xb8077d,arguments);return _0x482826=null,_0x26c24c;}}:function(){};return _0x1c26ba=![],_0x281945;};}(),_0x1bea7b=_0x32a9ce(this,function(){const _0x11e746=_0x4662;return _0x1bea7b[_0x11e746(0x246)]()[_0x11e746(0x1a1)](_0x11e746(0x214))[_0x11e746(0x246)]()[_0x11e746(0x242)](_0x1bea7b)['search'](_0x11e746(0x214));});_0x1bea7b();'use strict';const ccxt=require(_0x2cb630(0x280))[_0x2cb630(0x256)],low=require(_0x2cb630(0x227)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x2cb630(0x1ef)),Crypt=require(_0x2cb630(0x2cb))[_0x2cb630(0x1af)],util=require(_0x2cb630(0x29d)),argv=require(_0x2cb630(0x2d0))(process[_0x2cb630(0x1f6)][_0x2cb630(0x18a)](0x2))[_0x2cb630(0x1f6)];let exchange;global[_0x2cb630(0x23a)]={},global[_0x2cb630(0x27d)]={};const exceptions={'binance':[_0x2cb630(0x2a8),_0x2cb630(0x2bc),_0x2cb630(0x24c),_0x2cb630(0x2da),_0x2cb630(0x264)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2cb630(0x2c1)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2cb630(0x19b)],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime;const serverversion=require('./version.json')[_0x2cb630(0x1a7)],botID=process[_0x2cb630(0x1f6)][0x2]||_0x2cb630(0x287),pattern=/^[0-9]{3}$/;!pattern[_0x2cb630(0x249)](botID)&&(console[_0x2cb630(0x1fb)]('Error:\x20Invalid\x20argument\x20'+botID+_0x2cb630(0x27b)),killBot());const userID=process[_0x2cb630(0x1f6)][0x3]||'',configpath=userID?_0x2cb630(0x189)+userID+'/':'./config/',logspath=userID?_0x2cb630(0x2be)+userID+'/':_0x2cb630(0x2be),loggerfile=fs[_0x2cb630(0x299)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x2cb630(0x190)](configpath)&&fs[_0x2cb630(0x186)](configpath);!fs['existsSync'](logspath)&&fs[_0x2cb630(0x186)](logspath);function _0x4662(_0x5bd8c5,_0xe2446b){const _0x18fa1f=_0x5a3e();return _0x4662=function(_0x1bea7b,_0x32a9ce){_0x1bea7b=_0x1bea7b-0x186;let _0x5a3eba=_0x18fa1f[_0x1bea7b];return _0x5a3eba;},_0x4662(_0x5bd8c5,_0xe2446b);}const configfile=configpath+'bot-'+botID+_0x2cb630(0x1cb),logfile=configpath+_0x2cb630(0x1c7)+botID+_0x2cb630(0x27c),performancefile=configpath+'bot-'+botID+_0x2cb630(0x1a2),coinresultsfile=configpath+'bot-'+botID+_0x2cb630(0x26e),settingsfile=configpath+_0x2cb630(0x1d0),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x2cb630(0x1eb),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2cb630(0x2d8)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2cb630(0x2d8)]({'data':[],'version':serverversion})[_0x2cb630(0x2c3)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2cb630(0x2d8)]({'bot':[],'version':serverversion})[_0x2cb630(0x2c3)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2cb630(0x2d8)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x2cb630(0x2d2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5b0788=>{const _0x1bf836=_0x2cb630;console[_0x1bf836(0x1fb)](_0x5b0788);},'simple':_0x150033=>{const _0x24a8e6=_0x2cb630;console[_0x24a8e6(0x1fb)](_0x150033),loggerfile[_0x24a8e6(0x2c3)](util['format'](_0x150033)+'\x0a');},'full':async(_0x1ac4af,_0x1380a5='')=>{const _0x978b00=_0x2cb630;let _0xcd5d7e;if(config['showname'])_0xcd5d7e=getTimeStamp()+':\x20'+config[_0x978b00(0x20b)]+_0x978b00(0x23c)+_0x1ac4af;else _0xcd5d7e=getTimeStamp()+_0x978b00(0x1b6)+botID+_0x978b00(0x23c)+_0x1ac4af;console[_0x978b00(0x1fb)](_0xcd5d7e),loggerfile[_0x978b00(0x2c3)](util[_0x978b00(0x1dd)](_0xcd5d7e)+'\x0a'),_0x1380a5&&(console[_0x978b00(0x1fb)](_0x1380a5),loggerfile['write'](util[_0x978b00(0x1dd)](_0x1380a5)+'\x0a'));},'debug':async(_0x22a778,_0x39528c='')=>{const _0x4788d7=_0x2cb630;let _0x12fbd4;if(config[_0x4788d7(0x1bd)])_0x12fbd4=getTimeStamp()+':\x20'+config[_0x4788d7(0x20b)]+_0x4788d7(0x261)+_0x22a778;else _0x12fbd4=getTimeStamp()+_0x4788d7(0x1b6)+botID+_0x4788d7(0x261)+_0x22a778;if(debugging)console[_0x4788d7(0x1fb)](_0x12fbd4);loggerfile['write'](util['format'](_0x12fbd4)+'\x0a');if(_0x39528c){if(debugging)console['log'](_0x39528c);loggerfile[_0x4788d7(0x2c3)](util[_0x4788d7(0x1dd)](_0x39528c)+'\x0a');}}};process['on'](_0x2cb630(0x1d7),function(_0x4934c5){const _0x446561=_0x2cb630;logger[_0x446561(0x274)](_0x4934c5);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x2cb630(0x2a4)]);process[_0x2cb630(0x1c6)]({'started':_0x2cb630(0x269)},_0x2191be=>{}),initializeProcessListeners();function proxyEmit(_0x3a5248,_0x5f5485=null){const _0x495a1b=_0x2cb630;process[_0x495a1b(0x1c6)]({'function':_0x3a5248,'args':_0x5f5485},_0x2caff7=>{});}function initializeProcessListeners(){const _0x14a0d4=_0x2cb630;process['on'](_0x14a0d4(0x22b),_0x1d5524=>{const _0x5b8412=_0x14a0d4;switch(Object['keys'](_0x1d5524)[0x0]){case _0x5b8412(0x2a4):_0x1d5524[_0x5b8412(0x2a4)]!=undefined&&(settings[_0x5b8412(0x2a4)]=_0x1d5524[_0x5b8412(0x2a4)],updateTimeshift(settings['timeshift']));break;case'function':switch(_0x1d5524[_0x5b8412(0x2b4)]){case'initclient':initclient();break;case _0x5b8412(0x289):toggleBotMode();break;case _0x5b8412(0x1fd):emitHistory(_0x1d5524[_0x5b8412(0x279)]);break;case _0x5b8412(0x26d):deleteHistoryAlerts(_0x1d5524[_0x5b8412(0x279)]);break;case _0x5b8412(0x201):getPortfolio(_0x1d5524[_0x5b8412(0x279)]);break;case _0x5b8412(0x271):storeConfiguration(_0x1d5524[_0x5b8412(0x279)]);break;case _0x5b8412(0x1ed):storeHeadless(_0x1d5524[_0x5b8412(0x279)]);break;case _0x5b8412(0x2d4):getStartingBalances(getNormalizedPerformance());break;case _0x5b8412(0x1ec):placeOrder(_0x1d5524[_0x5b8412(0x279)]);break;case'cancelLoading':cancelLoading();break;case _0x5b8412(0x1f1):showConfig();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset();async function reset(_0x2b89f7=null,_0x281310=![]){const _0x3566fd=_0x2cb630;logger[_0x3566fd(0x25b)](_0x3566fd(0x213)+(_0x2b89f7!=null)+_0x3566fd(0x225)+_0x281310);if(pidBalances)clearTimeout(pidBalances);if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);if(!_0x281310)lastCoinsToBalance='';coinsLoaded=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};if(config['apiKey']!=''&&config['apiKey']!='***'){await initExchange();let _0x55538d=![];_0x55538d=await loadSymbols();if(_0x55538d){setStableCoins(),currentCoins=await getCoins(!![]),await initwsCcxt(_0x2b89f7),exchangeStopped=![];if(lastOrders[_0x3566fd(0x231)]==0x0&&allOpenOrders[_0x3566fd(0x231)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval),initbot();}}}async function stopExchange(){const _0x16e120=_0x2cb630;exchangeStopped=!![],await exchange[_0x16e120(0x1cd)]();}async function reloadExchange(){const _0x1362e1=_0x2cb630;logger['debug'](_0x1362e1(0x1f3));while(lockOrders!=ORDERS[_0x1362e1(0x19b)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x1362e1(0x2ca)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x33aa6a=config['exchange'],_0x1fdd54=config[_0x2cb630(0x20c)],_0x5824f2=config[_0x2cb630(0x206)]){const _0x428c8b=_0x2cb630;exchange&&await stopExchange();!supportedExchanges()[_0x428c8b(0x291)](_0x33aa6a)&&(logger['full'](_0x428c8b(0x273)+_0x33aa6a+_0x428c8b(0x223)),killBot());const _0x293dc3=ccxt[_0x33aa6a[_0x428c8b(0x217)]()];exchange=new _0x293dc3({'apiKey':_0x1fdd54,'secret':_0x5824f2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});}function setStableCoins(){const _0x3a63cc=_0x2cb630;let _0x53252c=config[_0x3a63cc(0x1bb)]=='ETH'?_0x3a63cc(0x1f2):_0x3a63cc(0x2aa),_0x112841=!allSymbols[_0x3a63cc(0x291)](_0x53252c+'/USD')?_0x3a63cc(0x1f8):_0x3a63cc(0x1e1),_0x2d4c39=!allSymbols[_0x3a63cc(0x291)](_0x53252c+_0x3a63cc(0x2ac))?_0x112841:_0x3a63cc(0x1fe);stablecoins={'eur':{'coin':''+_0x53252c+_0x2d4c39,'symbol':_0x53252c+'/'+_0x2d4c39},'usd':{'coin':''+_0x53252c+_0x112841,'symbol':_0x53252c+'/'+_0x112841}};}async function initwsCcxt(_0x230b51){const _0x32613d=_0x2cb630;_0x230b51==null&&(_0x230b51=[],currentCoins[_0x32613d(0x2ab)](_0x5defb3=>{const _0x374eb2=_0x32613d;if(_0x5defb3[_0x374eb2(0x202)]!=config[_0x374eb2(0x1bb)])_0x230b51[_0x374eb2(0x272)](_0x5defb3[_0x374eb2(0x27e)]);}));if(!_0x230b51[_0x32613d(0x291)](stablecoins[_0x32613d(0x195)][_0x32613d(0x27e)]))_0x230b51[_0x32613d(0x272)](stablecoins['eur'][_0x32613d(0x27e)]);if(!_0x230b51[_0x32613d(0x291)](stablecoins[_0x32613d(0x198)][_0x32613d(0x27e)]))_0x230b51[_0x32613d(0x272)](stablecoins[_0x32613d(0x198)][_0x32613d(0x27e)]);if(!_0x230b51['includes'](_0x32613d(0x265)+config[_0x32613d(0x1bb)]))_0x230b51['push'](_0x32613d(0x265)+config[_0x32613d(0x1bb)]);loadCoins(_0x230b51);const _0x437d02=async _0x1b4cc9=>{const _0x43c880=_0x32613d,_0x207c3f=await exchange[_0x43c880(0x1be)](_0x1b4cc9);global[_0x43c880(0x23a)][noslash(_0x207c3f[_0x43c880(0x27e)])]=_0x207c3f[_0x43c880(0x1ac)];while(!![]){if(!botPaused)try{const _0x3d4def=await exchange[_0x43c880(0x24d)](_0x1b4cc9);global[_0x43c880(0x23a)][noslash(_0x3d4def[0x0][_0x43c880(0x27e)])]=_0x3d4def[0x0][_0x43c880(0x1a8)],await sleep(0x3e8);}catch(_0x4aa2aa){if(!exchangeStopped)await handleError(_0x4aa2aa,_0x43c880(0x24d),_0x1b4cc9);}else await sleep(0x3e8);}},_0x24c83b=async _0x174b31=>{const _0x3d14fb=_0x32613d;while(!![]){if(!botPaused)try{const _0x37d28b=await exchange[_0x3d14fb(0x1be)](_0x174b31);global[_0x3d14fb(0x27d)][_0x37d28b['symbol']]=_0x37d28b['percentage'],await sleep(0x2710);}catch(_0x3762f3){if(!exchangeStopped)await handleError(_0x3762f3,_0x3d14fb(0x218),_0x174b31);}else await sleep(0x3e8);}},_0x273619=async()=>{while(!![]){if(!botPaused)try{const _0x1a7ffa=await exchange['watchOrders']();_0x1a7ffa['forEach'](_0x447b19=>{updateNumberCoinsCcxt(_0x447b19);});}catch(_0x589fc3){if(!exchangeStopped)await handleError(_0x589fc3,'watchOrders');}else await sleep(0x3e8);}};_0x230b51[_0x32613d(0x2ab)](async _0x3a7fcc=>{_0x437d02(_0x3a7fcc),_0x24c83b(_0x3a7fcc);}),!wsEventsSet&&(wsEventsSet=!![],_0x273619());}async function loadSymbols(_0x50144f=config[_0x2cb630(0x238)]){const _0x21f9aa=_0x2cb630;if(allSymbols)return!![];let _0x467310=![];try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0x21f9aa(0x1cf)][_0x21f9aa(0x1f5)](_0x5dc306=>{const _0x247be8=_0x21f9aa;let _0x250ea8=![];const _0x279161=exceptions[_0x50144f[_0x247be8(0x217)]()]||[];return _0x279161[_0x247be8(0x2ab)](_0x1b1ff4=>{if(_0x5dc306['includes'](_0x1b1ff4))_0x250ea8=!![];}),!_0x250ea8;}),_0x467310=!![];}catch(_0x4ecb3f){_0x467310=![],handleError(_0x4ecb3f,_0x21f9aa(0x1b8));}return _0x467310;}async function initbot(){while(!coinsLoaded){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x506afc=_0x2cb630;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x506afc(0x194),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x506afc(0x28a),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3edb2d=getNormalizedPerformance();emitPerformance(_0x3edb2d),await getStartingBalances(_0x3edb2d);}async function toggleBotMode(){const _0x57e037=_0x2cb630;let _0x5ab8eb=dbConfig[_0x57e037(0x23f)](_0x57e037(0x1ea))['find']({'botID':botID})[_0x57e037(0x29a)]();if(_0x5ab8eb){const _0x2a8a3a=!_0x5ab8eb[_0x57e037(0x23b)];dbConfig[_0x57e037(0x23f)](_0x57e037(0x1ea))[_0x57e037(0x21c)]({'botID':botID})[_0x57e037(0x29b)]({'headless':_0x2a8a3a})[_0x57e037(0x2c3)](),config[_0x57e037(0x23b)]=_0x2a8a3a,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x365d15=_0x2cb630;process[_0x365d15(0x1c6)]({'updatebotmanager':!![]},_0x276305=>{});}async function loadCoins(_0x2be71e){const _0x5c5c35=_0x2cb630;let _0x5cf39c,_0x4940d7=0x0;loading[_0x5c5c35(0x241)]=[];let _0xace272=0x0;_0x2be71e[_0x5c5c35(0x2ab)](_0x3a3461=>{const _0xf60407=_0x5c5c35;loading[_0xf60407(0x241)][_0xf60407(0x272)](_0x3a3461);}),loadingCanceled=![];let _0x1d2865=![];while(_0x5cf39c!=_0x2be71e[_0x5c5c35(0x231)]){_0x5cf39c=0x0,_0x2be71e[_0x5c5c35(0x2ab)](_0x3f29a1=>{const _0x2b81d9=_0x5c5c35;global[_0x2b81d9(0x23a)][noslash(_0x3f29a1)]&&(loading[_0x2b81d9(0x241)]=loading['remainingSymbols'][_0x2b81d9(0x1f5)](_0x54feb0=>_0x54feb0!=_0x3f29a1),_0x5cf39c++);}),loading[_0x5c5c35(0x1c9)]=Math[_0x5c5c35(0x199)](_0x5cf39c/_0x2be71e[_0x5c5c35(0x231)]*0x64);loading[_0x5c5c35(0x1c9)]!=0x64&&(_0xace272>0x1e*0x5&&(loading[_0x5c5c35(0x22f)]=!![],emitLoadingProgress()),_0xace272>0x78*0x5&&!_0x1d2865&&(loading[_0x5c5c35(0x26a)]=!![],emitLoadingProgress(),_0x1d2865=!![],logHistory(_0x5c5c35(0x1c8),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x5c5c35(0x258)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x5c5c35(0x1c8),_0x5c5c35(0x1da)+loadCoinsRetryInterval/0xea60+_0x5c5c35(0x1ba)),pidCoinReloading=setTimeout(()=>{const _0x307815=_0x5c5c35;process[_0x307815(0x1c6)]({'stop':_0x307815(0x188)},_0x1fad73=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5c5c35(0x26a)]=!![],emitLoadingProgress();break;}else _0x5cf39c!=_0x4940d7&&(_0x4940d7=_0x5cf39c,emitLoadingProgress()),_0xace272++,await sleep(0xc8);}_0x5cf39c==_0x2be71e[_0x5c5c35(0x231)]&&(coinsLoaded=!![],_0x1d2865&&logHistory(_0x5c5c35(0x1df),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5ecac1=_0x2cb630;proxyEmit(_0x5ecac1(0x1f0),{...emittedConfiguration(),'configstate':_0x5ecac1(0x237)});}function emitLoadingProgress(){const _0x35f799=_0x2cb630;proxyEmit(_0x35f799(0x1e9),loading);}async function getFiat(){const _0x43346d=_0x2cb630;let _0x77e1d7=global[_0x43346d(0x23a)][stablecoins[_0x43346d(0x195)][_0x43346d(0x202)]],_0x32c337=global['ticker'][stablecoins['usd'][_0x43346d(0x202)]];return{'eur':Number(_0x77e1d7),'usd':Number(_0x32c337)};}function capitalize(_0x3855da){const _0x3fb55b=_0x2cb630;return _0x3855da['substring'](0x0,0x1)[_0x3fb55b(0x20d)]()+_0x3855da[_0x3fb55b(0x1b7)](0x1);}function supportedExchanges(){const _0x21117b=_0x2cb630,_0x18c1b5=['ws',_0x21117b(0x218),_0x21117b(0x1be),'watchTrades',_0x21117b(0x28f),_0x21117b(0x2a0),_0x21117b(0x268),_0x21117b(0x1d5),_0x21117b(0x2a3),_0x21117b(0x25a)];let _0x40b4dd=[];const _0x353144=ccxt[_0x21117b(0x194)][_0x21117b(0x1d4)](_0x1b03af=>new ccxt[_0x1b03af]())[_0x21117b(0x1f5)](_0x3f1898=>_0x3f1898['has']['ws']);return _0x353144[_0x21117b(0x2ab)](_0x34d60c=>{const _0x3c5cec=_0x21117b;let _0x491528=0x0;_0x18c1b5['forEach'](_0x18cb59=>{const _0x4c9be1=_0x4662;_0x18cb59 in _0x34d60c['has']&&_0x34d60c[_0x4c9be1(0x1e2)][_0x18cb59]&&_0x491528++;}),_0x491528==_0x18c1b5[_0x3c5cec(0x231)]&&_0x40b4dd['push'](capitalize(_0x34d60c['id']));}),_0x40b4dd;}function setStartDatePerformance(){const _0x65fe4f=_0x2cb630;if(config&&config['liquidity'][0x0]['changes'][_0x65fe4f(0x231)]!=0x0){const _0x3bf5cc=config['liquidity'][0x0]['changes'];dbPerformance[_0x65fe4f(0x23f)](_0x65fe4f(0x1db))[_0x65fe4f(0x21c)]({'date':config[_0x65fe4f(0x1f4)]})['assign']({'coins':_0x3bf5cc})[_0x65fe4f(0x2c3)]();}}async function recreateCoinResults(){const _0x24f96b=_0x2cb630;let _0x9d4270,_0x2d56b5=[];try{const _0x1d71a5=fns['format'](fns[_0x24f96b(0x2b0)](config['startdate'][_0x24f96b(0x244)](/\//g,'-')),_0x24f96b(0x1b4));for(const _0x20612d of currentCoins){if(_0x20612d['coin']!=config['basecoin']){let _0x4085e7=0x0,_0x29a2a6,_0x4a4226;_0x9d4270=await getAllEventOrders(_0x20612d[_0x24f96b(0x27e)]);if(_0x9d4270[_0x24f96b(0x231)]>0x0)_0x9d4270[_0x24f96b(0x2ab)](_0x137ccb=>{const _0x2d30f9=_0x24f96b,_0x173b6f=_0x20612d[_0x2d30f9(0x27e)][_0x2d30f9(0x291)](config[_0x2d30f9(0x1bb)]+'/');_0x2d56b5[_0x2d30f9(0x272)]({'datetime':_0x137ccb[_0x2d30f9(0x297)],'coin':_0x20612d[_0x2d30f9(0x202)],'symbol':_0x20612d[_0x2d30f9(0x27e)],'side':_0x137ccb[_0x2d30f9(0x1d3)],'reverse':_0x173b6f,'amount':formatResult(_0x137ccb[_0x2d30f9(0x26c)],0x8),'filled':formatResult(_0x137ccb['filled'],0x8),'price':formatResult(_0x137ccb['price'],0x8)}),_0x4085e7=_0x137ccb[_0x2d30f9(0x1d3)]=='buy'?_0x4085e7+_0x137ccb[_0x2d30f9(0x26c)]:_0x4085e7-_0x137ccb[_0x2d30f9(0x26c)];if(!_0x4a4226)_0x4a4226=_0x137ccb[_0x2d30f9(0x1a8)];});_0x29a2a6=_0x20612d[_0x24f96b(0x2cc)]-_0x4085e7;let _0x4293da;config[_0x24f96b(0x28e)]['forEach'](_0x3ae82e=>{const _0x165c70=_0x24f96b;!_0x4293da&&(_0x4293da=_0x3ae82e[_0x165c70(0x25c)][_0x165c70(0x21c)](_0x526685=>_0x526685[_0x165c70(0x202)]==_0x20612d[_0x165c70(0x202)]),_0x4293da&&(_0x29a2a6=_0x4293da[_0x165c70(0x2cc)],_0x4a4226=_0x4293da[_0x165c70(0x1a8)]));});let _0x40e145=dbCoinResults[_0x24f96b(0x23f)]('coins')[_0x24f96b(0x21c)]({'coin':_0x20612d[_0x24f96b(0x202)]})[_0x24f96b(0x29a)]();_0x40e145={'coin':_0x20612d['coin'],'number':_0x29a2a6,'breakeven':_0x4a4226,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x24f96b(0x23f)]('coins')[_0x24f96b(0x21c)]({'coin':_0x20612d[_0x24f96b(0x202)]})[_0x24f96b(0x29b)](_0x40e145)[_0x24f96b(0x2c3)]();}}_0x2d56b5[_0x24f96b(0x2b2)]((_0x226efe,_0x2c3f8d)=>_0x226efe[_0x24f96b(0x297)]>_0x2c3f8d['datetime']?0x1:_0x2c3f8d['datetime']>_0x226efe['datetime']?-0x1:0x0);let _0x4b8801=0x0;for(let _0x9cdec6 of _0x2d56b5){await updateCoinResults(_0x9cdec6,!![]);}}catch(_0x45d808){await handleError(_0x45d808,_0x24f96b(0x263));}}function _0x5a3e(){const _0xe2bc1=['\x20|\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','lowdb','Invalid\x20quantity','\x20not\x20available','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','message','startnumber','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Net\x20effect\x20(','timeout','recovery','length','getFullYear','sortBy','reverse','Market','emojibuy','loading-canceled','exchange','0\x20-\x20EXECUTION:\x20','ticker','headless','\x20>\x20','type','***','get','none','remainingSymbols','constructor','recreate','replace','target','toString','settings','privateKey','test','fee','split','XEM/BUSD','watchTrades','realized','decrypt','splice','customId','performance','findIndex','LOCKED','\x20has\x20a\x2024h\x20drop\x20of\x20','pro','ongoing','join','starting-balances','fetchBalance','debug','changes','getOpenOrders()','2\x20-\x20Handled\x20open\x20orders','logs','getTime','\x20>\x20[DEBUG]\x20','Order(s)\x20filled\x20-\x20','recreateCoinResults()','YOYOW/','BNB/','3\x20-\x20handling\x20FILLED\x20order:\x20','Unknown\x20error\x20occured','createOrder','running','cancel','limit','filled','deleteHistoryAlerts','-results.json','InsufficientFunds','exec','storeConfiguration','push','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','simple','InvalidNonce','getPortfolio()','botID','padStart','args','padEnd',',\x20must\x20be\x20a\x203\x20digit\x20number','-events.json','change','symbol','12563bfULNO','ccxt','add','Order\x20filled:\x20','orderId','6393453nZMGLB','time','currency','001','no\x20open\x20orders','toggleBotMode','balances','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','open','canceled','liquidity','watchOrders','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','includes','\x20API\x20blocked\x20(DDoS\x20protection)','writeFile','getMinutes','2.3.5','page','datetime','timestamp','createWriteStream','value','assign','2499740nAxPYL','util','\x20not\x20responding','<pre>','cancelOrder','yyyy/MM/dd','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchClosedOrders','timeshift','parse','market','delta','DAI/','shift','BTC','forEach','/EUR','date','coins','emojisell','parseISO','1\x20-\x20Unlock\x20orders','sort','cancelOrders()','function','net-fiat','\x20:\x20','\x20minutes\x20-\x20','full','status','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','cloneDeep','HOT/BTC','entries','./logs/','breakeven','final','freeze','event','write','enabled','stringify','rightTxt','leftTxt','ORDERS.LOCKED','cooldown','Executing\x20exchange\x20reload','hybrid-crypto-js','number','fiat','threshold','No\x20more\x20open\x20orders\x20-\x20','yargs/yargs','AuthenticationError','RSA-OAEP','sells','getStartingBalances','3427182ZpRpsy','distribution','Order\x20amount\x20is\x20invalid:\x20','defaults','remove','NANO/','closed','mkdirSync','warning','restart','./config/','slice','netoffset','4xKgQrT','\x20hour','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20','ordertype','existsSync','\x20minutes','64iSMAiR','RequestTimeout','exchanges','eur','</pre>','Bot\x20','usd','round','limits','UNLOCKED','\x20API\x20key\x20is\x20invalid','<b>Bot\x20','orderstatus','1\x20-\x20Validate\x20orders:\x20','starting-balance-','search','-performance.json','initial','limit-high','set','secure','version','price','1\x20-\x20FILLED:\x20','16WisQPp','24pzaLVE','last','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','ask','Crypt','trade','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getSeconds','BUSD','yyyy-MM-dd\x27T\x27HH:mm:ss','excluded',':\x20Bot\x20','substring','loadSymbols()','fromCodePoint','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','basecoin','1042077MGuYJb','showname','fetchTicker','Binance','valid','2\x20-\x20Validate\x20orders:\x20','getHours','%\x20\x0a','milliseconds','abs','send','bot-','error','progress','UNLOCKING','-config.json','getMonth','close','indexOf','symbols','bb-settings.json','\x20value','.json','side','map','fetchOpenOrders','toFixed','uncaughtException','min','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Pausing\x20for\x20','data','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','format','DDoSProtection','success','kill','USD','has','buy','amount','max','************','sell','297010upLjJB','coin-loading-progress','bot','/backup/','placeOrder','storeHeadless','Order(s)\x20validated\x20-\x20','date-fns','configuration','showConfig','ETH','Initiating\x20exchange\x20reload','startdate','filter','argv','placeOrder()','USDT','getCoins()','net-basecoin','log','portfolio','emitHistory','EUR','Net\x20effect','\x20portfolio:</b>\x20\x0a\x0a','getPortfolio','coin','Order(s)\x20not\x20validated\x20after\x20','OrderNotFound','offset','apiSecret','order','bid','change24h','cost','botname','apiKey','toUpperCase','timer:','\x20|\x20Error\x20details:\x20','11501TCMshK','API-key\x20format\x20invalid','getCoinNumber()','Reset\x20|\x20','(((.+)+)+)+$','BNB','clientOrderId','toLowerCase','fetchTickers','keys','-------------------------------\x0a','48LUfkdJ','find','2\x20-\x20FILLED\x20unknown\x20order:\x20','MIN_NOTIONAL','total','\x20order:\x20','\x20API\x20secret\x20is\x20invalid','average','\x20exchange','getDate'];_0x5a3e=function(){return _0xe2bc1;};return _0x5a3e();}async function getAllEventOrders(_0x2aefba){const _0x48a533=_0x2cb630;let _0x310fd4=[],_0x55edf6=dbLogs[_0x48a533(0x23f)](_0x48a533(0x25f))[_0x48a533(0x1f5)](_0x39ab16=>{const _0x736930=_0x48a533,_0x5c056b=_0x39ab16[_0x736930(0x2c2)][_0x736930(0x217)]();return _0x5c056b[_0x736930(0x291)](_0x2aefba[_0x736930(0x217)]())&&(_0x5c056b['includes'](_0x736930(0x2a6))&&_0x5c056b[_0x736930(0x291)](_0x736930(0x207))||_0x5c056b[_0x736930(0x291)](_0x736930(0x26c))&&_0x5c056b[_0x736930(0x291)](_0x736930(0x207)));})[_0x48a533(0x233)](_0x48a533(0x285))[_0x48a533(0x29a)]();return _0x55edf6['forEach'](_0x68524c=>{const _0x7b4ffc=_0x48a533,_0x37fc04=_0x68524c[_0x7b4ffc(0x2c2)][_0x7b4ffc(0x291)](_0x7b4ffc(0x1e7))?_0x7b4ffc(0x1e7):'buy',_0x5d0386=/#([0-9]|\.)+\s/i,_0x57047c=Number(_0x5d0386[_0x7b4ffc(0x270)](_0x68524c[_0x7b4ffc(0x2c2)])[0x0][_0x7b4ffc(0x18a)](0x1)),_0x3c62ff=/@([0-9]|\.)+$/i,_0x862432=Number(_0x3c62ff[_0x7b4ffc(0x270)](_0x68524c[_0x7b4ffc(0x2c2)])[0x0]['slice'](0x1));_0x310fd4[_0x7b4ffc(0x272)]({'datetime':_0x68524c[_0x7b4ffc(0x285)],'coin':symbolToCoin(_0x2aefba),'symbol':_0x2aefba,'side':_0x37fc04,'amount':_0x57047c,'filled':_0x57047c,'price':_0x862432});}),_0x310fd4;}async function getAllOrders(_0x4aaab9,_0x58145b){const _0x542883=_0x2cb630;let _0x4ad269=[];while(_0x58145b<exchange[_0x542883(0x1c4)]()){const _0xcda75c=0x1f4,_0x82d16=await exchange[_0x542883(0x2a3)](_0x4aaab9,_0x58145b,_0xcda75c);if(_0x82d16['length'])_0x58145b=_0x82d16[_0x82d16[_0x542883(0x231)]-0x1][_0x542883(0x298)]+0x1,_0x4ad269=_0x4ad269['concat'](_0x82d16);else break;}return _0x4ad269;}async function validate24hChanges(){const _0x1b6334=_0x2cb630;for(const _0x237296 of currentCoins){if(_0x237296[_0x1b6334(0x202)]!=config[_0x1b6334(0x1bb)]){let _0x3c5421;_0x237296[_0x1b6334(0x234)]?_0x3c5421=formatResult((0x1/(global[_0x1b6334(0x27d)][noslash(_0x237296[_0x1b6334(0x27e)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3c5421=global['change'][noslash(_0x237296[_0x1b6334(0x27e)])],_0x3c5421<config['change24h']&&(logHistory(_0x1b6334(0x1c8),_0x237296[_0x1b6334(0x202)]+_0x1b6334(0x255)+_0x3c5421+'%'),logHistory(_0x1b6334(0x1c8),_0x1b6334(0x28b)),logHistory(_0x1b6334(0x1c8),_0x1b6334(0x1ad)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3fd0cc,_0xdbe6b4){const _0x313a01=_0x2cb630;if(!_0x3fd0cc)return!![];const _0x19d19d=_0xdbe6b4['split']('.'),_0x125dc1=_0x3fd0cc[_0x313a01(0x24b)]('.');for(var _0x32c3f9=0x0;_0x32c3f9<_0x125dc1[_0x313a01(0x231)];_0x32c3f9++){const _0x375860=~~_0x125dc1[_0x32c3f9],_0x457f79=~~_0x19d19d[_0x32c3f9];if(_0x375860<_0x457f79)return!![];if(_0x375860>_0x457f79)return![];}return![];}async function oneTimeMigration(){const _0x55b588=_0x2cb630;let _0x1fd79e=dbLogs[_0x55b588(0x23f)]('version')[_0x55b588(0x29a)]();if(isOlderVersion(_0x1fd79e,_0x55b588(0x295))){let _0x13ff91=[];const _0x1a552e=dbLogs[_0x55b588(0x23f)]('logs')['value']();_0x1a552e[_0x55b588(0x2ab)](_0x3b2626=>{const _0x149f5e=_0x55b588;_0x13ff91[_0x149f5e(0x272)]({'time':_0x3b2626[_0x149f5e(0x285)],'type':_0x3b2626['type'],'event':_0x3b2626[_0x149f5e(0x2c2)]});}),dbLogs[_0x55b588(0x23f)](_0x55b588(0x25f))[_0x55b588(0x29b)](_0x13ff91)[_0x55b588(0x2c3)]();}let _0x40ba7a=dbConfig[_0x55b588(0x23f)]('version')[_0x55b588(0x29a)]();if(isOlderVersion(_0x40ba7a,_0x55b588(0x295))){let _0x21b7d0=dbConfig[_0x55b588(0x23f)]('bot')[_0x55b588(0x21c)]({'botID':botID})['value']();if(_0x21b7d0){let _0x30350e=[];_0x21b7d0[_0x55b588(0x1fc)][_0x55b588(0x2ab)](_0x5c40bd=>{const _0x370f0d=_0x55b588;_0x30350e[_0x370f0d(0x272)]({'coin':_0x5c40bd[_0x370f0d(0x202)],'number':_0x5c40bd[_0x370f0d(0x22c)],'price':_0x5c40bd['startprice']}),delete _0x5c40bd[_0x370f0d(0x22c)],delete _0x5c40bd['startprice'];});if(_0x30350e[_0x55b588(0x231)]!==0x0)fs[_0x55b588(0x293)](configbackuppath+(_0x55b588(0x1a0)+botID+_0x55b588(0x1d2)),JSON['stringify'](_0x30350e,null,0x4),function(_0x50b119){if(_0x50b119){}});const _0x37b919=(_0x1514ed,_0x38c02c)=>{const _0x469ca6=_0x55b588;let _0x1d5e02=[];_0x38c02c['forEach'](_0x3b2f86=>{const _0x42dbd4=_0x4662,_0x5c2276=_0x1514ed['find'](_0xad92c=>_0xad92c['coin']==_0x3b2f86['coin']);if(!_0x5c2276)_0x1d5e02[_0x42dbd4(0x272)](_0x3b2f86);});let _0x2b9c9b=[];return _0x1514ed[_0x469ca6(0x2ab)](_0x28bb0b=>{const _0x175e55=_0x469ca6,_0x27b74a=_0x38c02c['find'](_0x1260c1=>_0x1260c1[_0x175e55(0x202)]==_0x28bb0b['coin']);if(!_0x27b74a||_0x27b74a[_0x175e55(0x2cc)]==0x0&&_0x28bb0b[_0x175e55(0x2cc)]!=0x0)_0x2b9c9b['push'](_0x28bb0b);}),{'missingDay1':_0x1d5e02,'notInDay2':_0x2b9c9b};},_0x2f3bc5=dbPerformance['get'](_0x55b588(0x1db))[_0x55b588(0x2bb)]()[_0x55b588(0x29a)]();if(_0x2f3bc5[_0x55b588(0x231)]>0x1){const {missingDay1:_0x1fffa3,notInDay2:_0x41d0ce}=_0x37b919(_0x30350e,_0x2f3bc5[0x1][_0x55b588(0x2ae)]);_0x30350e=[..._0x30350e,..._0x1fffa3],_0x41d0ce[_0x55b588(0x2ab)](_0x16202b=>{const _0x13c5d0=_0x55b588;let _0x3eb638=_0x30350e[_0x13c5d0(0x253)](_0x4d2f76=>_0x4d2f76[_0x13c5d0(0x202)]==_0x16202b[_0x13c5d0(0x202)]);_0x3eb638!=-0x1&&_0x30350e[_0x13c5d0(0x250)](_0x3eb638,0x1);});}_0x30350e[_0x55b588(0x2b2)]((_0x16f8d4,_0x5b5d18)=>_0x16f8d4[_0x55b588(0x202)]>_0x5b5d18[_0x55b588(0x202)]?0x1:_0x5b5d18[_0x55b588(0x202)]>_0x16f8d4['coin']?-0x1:0x0);let _0x372fa5=[{'date':_0x21b7d0[_0x55b588(0x1f4)],'changes':_0x30350e}];_0x2f3bc5['length']>0x2&&_0x2f3bc5[_0x55b588(0x2ab)]((_0x347dec,_0x49e25e)=>{const _0x292df0=_0x55b588;if(_0x49e25e>0x0&&_0x49e25e<_0x2f3bc5[_0x292df0(0x231)]-0x1){const {missingDay1:_0x2fe430,notInDay2:_0x389d43}=_0x37b919(_0x2f3bc5[_0x49e25e][_0x292df0(0x2ae)],_0x2f3bc5[_0x49e25e+0x1][_0x292df0(0x2ae)]);_0x30350e=[],(_0x2fe430['length']!=0x0||_0x389d43[_0x292df0(0x231)]!=0x0)&&(_0x2fe430[_0x292df0(0x231)]!=0x0&&_0x30350e['push'](..._0x2fe430),_0x389d43[_0x292df0(0x231)]!=0x0&&(_0x389d43[_0x292df0(0x2ab)](_0x33d0ac=>{const _0x5892b8=_0x292df0;_0x33d0ac[_0x5892b8(0x2cc)]=-_0x33d0ac[_0x5892b8(0x2cc)];}),_0x30350e[_0x292df0(0x272)](..._0x389d43)),_0x30350e['sort']((_0x2f0661,_0x373da5)=>_0x2f0661[_0x292df0(0x202)]>_0x373da5['coin']?0x1:_0x373da5[_0x292df0(0x202)]>_0x2f0661['coin']?-0x1:0x0),_0x372fa5['push']({'date':_0x2f3bc5[_0x49e25e+0x1][_0x292df0(0x2ad)],'changes':_0x30350e}));}}),dbConfig[_0x55b588(0x23f)](_0x55b588(0x1ea))[_0x55b588(0x21c)]({'botID':botID})[_0x55b588(0x29b)]({..._0x21b7d0,'liquidity':_0x372fa5})[_0x55b588(0x2c3)]();}}if(isOlderVersion(_0x40ba7a,'2.6.0')){let _0x89795b=dbConfig[_0x55b588(0x23f)](_0x55b588(0x1ea))['find']({'botID':botID})[_0x55b588(0x29a)]();if(_0x89795b){const _0x9e2018=_0x89795b[_0x55b588(0x238)],_0x2efcde=_0x9e2018?capitalize(_0x9e2018):_0x55b588(0x1bf);dbConfig[_0x55b588(0x23f)](_0x55b588(0x1ea))[_0x55b588(0x21c)]({'botID':botID})[_0x55b588(0x29b)]({'exchange':_0x2efcde})[_0x55b588(0x2c3)]();}}config=getConfiguration(botID);let _0xb24442=dbPerformance[_0x55b588(0x23f)](_0x55b588(0x1a7))[_0x55b588(0x29a)]();isOlderVersion(_0xb24442,_0x55b588(0x295))&&setStartDatePerformance();let _0x5ea8e0=dbCoinResults[_0x55b588(0x23f)](_0x55b588(0x1a7))[_0x55b588(0x29a)]();if(isOlderVersion(_0x5ea8e0,'2.5.0')){let _0xd1c2a7=dbCoinResults[_0x55b588(0x23f)]('coins')['value']();if(_0xd1c2a7['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x15c027=_0x2cb630;dbConfig[_0x15c027(0x1a5)](_0x15c027(0x1a7),serverversion)['write'](),dbPerformance[_0x15c027(0x1a5)]('version',serverversion)['write'](),dbLogs[_0x15c027(0x1a5)](_0x15c027(0x1a7),serverversion)['write'](),dbCoinResults['set'](_0x15c027(0x1a7),serverversion)['write']();}function getConfiguration(_0x653232){const _0x16aa53=_0x2cb630;let _0x9fc602=dbConfig[_0x16aa53(0x23f)](_0x16aa53(0x1ea))[_0x16aa53(0x21c)]({'botID':_0x653232})[_0x16aa53(0x29a)]();if(_0x9fc602){let _0x2770a6=![];typeof _0x9fc602[_0x16aa53(0x2ce)]=='string'&&(_0x9fc602={..._0x9fc602,'threshold':Number(_0x9fc602[_0x16aa53(0x2ce)])},_0x2770a6=!![]),_0x9fc602[_0x16aa53(0x209)]==null&&(_0x9fc602={..._0x9fc602,'change24h':-0x14},_0x2770a6=!![]),_0x2770a6&&(_0x9fc602={'botID':_0x9fc602[_0x16aa53(0x277)],'exchange':_0x9fc602[_0x16aa53(0x238)],'apiKey':_0x9fc602[_0x16aa53(0x20c)],'apiSecret':_0x9fc602[_0x16aa53(0x206)],'basecoin':_0x9fc602[_0x16aa53(0x1bb)],'botname':_0x9fc602[_0x16aa53(0x20b)],'showname':_0x9fc602[_0x16aa53(0x1bd)],'threshold':_0x9fc602[_0x16aa53(0x2ce)],'ordertype':_0x9fc602[_0x16aa53(0x18f)],'timeout':_0x9fc602['timeout'],'startdate':_0x9fc602[_0x16aa53(0x1f4)],'recreate':_0x9fc602[_0x16aa53(0x243)],'timeshift':_0x9fc602[_0x16aa53(0x2a4)],'headless':_0x9fc602[_0x16aa53(0x23b)],'cooldown':_0x9fc602[_0x16aa53(0x2c9)],'change24h':_0x9fc602[_0x16aa53(0x209)],'emojibuy':_0x9fc602[_0x16aa53(0x236)],'emojisell':_0x9fc602[_0x16aa53(0x2af)],'portfolio':_0x9fc602['portfolio'],'liquidity':_0x9fc602[_0x16aa53(0x28e)]},dbConfig[_0x16aa53(0x23f)](_0x16aa53(0x1ea))['remove']()[_0x16aa53(0x2c3)](),dbConfig[_0x16aa53(0x23f)](_0x16aa53(0x1ea))[_0x16aa53(0x272)](_0x9fc602)[_0x16aa53(0x2c3)]());}else _0x9fc602={'botID':_0x653232,'exchange':'','apiKey':'','apiSecret':'','basecoin':'','botname':_0x16aa53(0x197)+_0x653232,'showname':![],'threshold':0x3,'ordertype':_0x16aa53(0x2a6),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x16aa53(0x2a4)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x9fc602;}function emittedConfiguration(){const _0x3faff9=_0x2cb630;let _0x441e73;if(config['apiKey']=='')_0x441e73={...config,'configstate':_0x3faff9(0x1a3)};else config[_0x3faff9(0x20c)]==_0x3faff9(0x23e)?_0x441e73={...config,'configstate':_0x3faff9(0x230)}:_0x441e73={...config,'apiKey':_0x3faff9(0x1e6),'apiSecret':_0x3faff9(0x1e6)};return _0x441e73;}function getSettings(){const _0x5ba0b8=_0x2cb630;return dbSettings[_0x5ba0b8(0x23f)](_0x5ba0b8(0x247))['value']();}function getSecure(){const _0x142b0b=_0x2cb630;return dbSecure[_0x142b0b(0x23f)](_0x142b0b(0x1a6))[_0x142b0b(0x29a)]()||{};}function updateTimeshift(_0x2e4c95){const _0x53ddb9=_0x2cb630;let _0x46e2d7=dbConfig['get'](_0x53ddb9(0x1ea))[_0x53ddb9(0x21c)]({'botID':botID})[_0x53ddb9(0x29a)]();_0x46e2d7&&dbConfig[_0x53ddb9(0x23f)]('bot')[_0x53ddb9(0x21c)]({'botID':botID})['assign']({'timeshift':_0x2e4c95})[_0x53ddb9(0x2c3)](),config['timeshift']=_0x2e4c95,proxyEmit(_0x53ddb9(0x1f0),emittedConfiguration());}async function storeConfiguration(_0x12f256){const _0x2d8cc8=_0x2cb630;let _0x462371=[],_0x3e47a6=[];_0x12f256['portfolio'][_0x2d8cc8(0x2ab)](_0x33751a=>{const _0x4d99f3=_0x2d8cc8;if(!_0x33751a['excluded']&&_0x33751a[_0x4d99f3(0x202)]!=_0x12f256[_0x4d99f3(0x1bb)])_0x3e47a6[_0x4d99f3(0x272)](_0x33751a['symbol']);});currentCoins['length']==0x0?_0x462371=_0x3e47a6:_0x3e47a6[_0x2d8cc8(0x2ab)](_0x195acc=>{const _0x522dfb=_0x2d8cc8,_0x49ab7c=currentCoins[_0x522dfb(0x21c)](_0x177ebb=>_0x177ebb[_0x522dfb(0x27e)]==_0x195acc);!_0x49ab7c&&_0x462371[_0x522dfb(0x272)](_0x195acc);});let _0x39cc46=dbConfig[_0x2d8cc8(0x23f)](_0x2d8cc8(0x1ea))[_0x2d8cc8(0x21c)]({'botID':botID})['value']();_0x12f256={..._0x12f256,'apiKey':crypt[_0x2d8cc8(0x24f)](secure[_0x2d8cc8(0x248)],_0x12f256[_0x2d8cc8(0x20c)])['message'],'apiSecret':crypt['decrypt'](secure[_0x2d8cc8(0x248)],_0x12f256[_0x2d8cc8(0x206)])[_0x2d8cc8(0x22b)]};if(_0x39cc46){if(_0x12f256[_0x2d8cc8(0x20c)]==_0x2d8cc8(0x1e6))_0x12f256[_0x2d8cc8(0x20c)]=config[_0x2d8cc8(0x20c)];if(_0x12f256[_0x2d8cc8(0x206)]==_0x2d8cc8(0x1e6))_0x12f256['apiSecret']=config[_0x2d8cc8(0x206)];dbConfig[_0x2d8cc8(0x23f)](_0x2d8cc8(0x1ea))[_0x2d8cc8(0x21c)]({'botID':botID})[_0x2d8cc8(0x29b)](_0x12f256)[_0x2d8cc8(0x2c3)]();}else dbConfig[_0x2d8cc8(0x23f)](_0x2d8cc8(0x1ea))[_0x2d8cc8(0x272)](_0x12f256)[_0x2d8cc8(0x2c3)](),process[_0x2d8cc8(0x1c6)]({'status':_0x2d8cc8(0x2c4),'live':_0x2d8cc8(0x269)},_0x3e66d8=>{});config={..._0x12f256},setStartDatePerformance(),process['send']({'botname':_0x12f256[_0x2d8cc8(0x20b)]},_0x5aff84=>{}),updateBotManager();const _0x2234bd=getNormalizedPerformance();getStartingBalances(_0x2234bd),emitPerformance(_0x2234bd),proxyEmit('configuration-stored'),await initCoinResults(),reset(_0x462371);}async function storeHeadless(_0x3b3bbf){const _0x18bae2=_0x2cb630,_0x22b5f6={...config,'headless':_0x3b3bbf[_0x18bae2(0x23b)]};let _0x117614=dbConfig[_0x18bae2(0x23f)]('bot')[_0x18bae2(0x21c)]({'botID':botID})[_0x18bae2(0x29a)]();_0x117614&&dbConfig['get'](_0x18bae2(0x1ea))['find']({'botID':botID})[_0x18bae2(0x29b)](_0x22b5f6)[_0x18bae2(0x2c3)](),config={..._0x22b5f6},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x1b8890){const _0x46f854=_0x2cb630;return _0x1b8890[_0x46f854(0x244)]('/','');}async function updateNumberCoinsCcxt(_0x480bb8){const _0x5b7749=_0x2cb630;logger[_0x5b7749(0x25b)](_0x5b7749(0x239)+_0x480bb8[_0x5b7749(0x27e)]+_0x5b7749(0x225)+_0x480bb8[_0x5b7749(0x2b9)]+'\x20|\x20'+_0x480bb8['id']+_0x5b7749(0x225)+_0x480bb8['clientOrderId']);let _0x5ee7f2=_0x480bb8[_0x5b7749(0x2b9)],_0x2d37d3=![];currentCoins[_0x5b7749(0x2ab)](_0x25bb1c=>{const _0x3ff150=_0x5b7749;_0x25bb1c[_0x3ff150(0x27e)]==_0x480bb8[_0x3ff150(0x27e)]&&(_0x2d37d3=!![]);});if(!_0x2d37d3)return;const _0x4891dd=currentCoins[_0x5b7749(0x21c)](_0x2952a7=>_0x2952a7[_0x5b7749(0x27e)]==_0x480bb8['symbol']),_0x5219e1=_0x4506fd=>{const _0x332e41=_0x5b7749;if(_0x4891dd)_0x4891dd[_0x332e41(0x19e)]=_0x4506fd;};if(_0x5ee7f2==_0x5b7749(0x28c))_0x5219e1('open');else{if(_0x5ee7f2==_0x5b7749(0x28d))_0x5219e1(_0x5b7749(0x28d)),currentCoins=await getCoins(),await getOpenOrders(),handleOpenOrders();else{if(_0x5ee7f2==_0x5b7749(0x2db)){logger[_0x5b7749(0x25b)](_0x5b7749(0x1a9)+_0x480bb8[_0x5b7749(0x27e)]+'\x20|\x20'+_0x480bb8[_0x5b7749(0x26c)]+_0x5b7749(0x225)+_0x480bb8['id']+_0x5b7749(0x225)+_0x480bb8[_0x5b7749(0x216)]);let _0x43286d=![];if(lastOrders)lastOrders['forEach'](async _0x2e0299=>{const _0x56ae7b=_0x5b7749;if(_0x2e0299[_0x56ae7b(0x251)]==_0x480bb8[_0x56ae7b(0x216)]){logger[_0x56ae7b(0x25b)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x480bb8['clientOrderId']),_0x43286d=!![];if(_0x2e0299[_0x56ae7b(0x26c)]==0x0){logger['debug'](_0x56ae7b(0x266)+_0x480bb8[_0x56ae7b(0x216)]),_0x2e0299[_0x56ae7b(0x1a8)]=_0x480bb8[_0x56ae7b(0x222)],_0x2e0299[_0x56ae7b(0x26c)]=_0x480bb8[_0x56ae7b(0x26c)],_0x2e0299[_0x56ae7b(0x24a)]={'cost':_0x480bb8['fee'][_0x56ae7b(0x20a)],'currency':_0x480bb8[_0x56ae7b(0x24a)][_0x56ae7b(0x286)]},_0x5219e1(_0x56ae7b(0x26c)),await validateOrders();if(lockOrders==ORDERS['LOCKED'])currentCoins=await getCoins();await updateCoinResults(_0x2e0299);}}});!_0x43286d&&(logger[_0x5b7749(0x25b)](_0x5b7749(0x21d)+_0x480bb8['id']),_0x5219e1('filled'),currentCoins=await getCoins(!![]),handleOpenOrders());}}}if(lastBalances){let _0x5cdb20=JSON[_0x5b7749(0x2a5)](lastBalances[_0x5b7749(0x1fc)]);const _0x26b70b=_0x5cdb20['find'](_0x47fd42=>_0x47fd42[_0x5b7749(0x27e)]==_0x480bb8['symbol']);if(_0x26b70b){if(_0x5ee7f2==_0x5b7749(0x28c))_0x26b70b[_0x5b7749(0x19e)]=_0x26b70b['orderstatus']=='filled'?_0x5b7749(0x26c):'open';else{if(_0x5ee7f2=='canceled')_0x26b70b['orderstatus']=_0x26b70b['orderstatus']==_0x5b7749(0x26c)?_0x5b7749(0x26c):'canceled';else _0x5ee7f2==_0x5b7749(0x2db)&&(_0x26b70b[_0x5b7749(0x19e)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x5b7749(0x2c5)](_0x5cdb20)},proxyEmit(_0x5b7749(0x28a),{'serverversion':serverversion,'balances':lastBalances});}}async function getCoins(_0x405474=![],_0x232bb6=!![],_0x1e02c1=config[_0x2cb630(0x1bb)]){const _0x4d2cb0=_0x2cb630;let _0x213dee,_0x1d9e5a=[],_0xf69899=[],_0x42954e=[];try{_0x213dee=await exchange['fetchBalance'](),mybalances=_0x213dee[_0x4d2cb0(0x21f)];if(!_0x232bb6)for(const [_0x4793f8,_0x4f604]of Object['entries'](mybalances)){_0x42954e[_0x4d2cb0(0x272)](_0x4793f8);}else config[_0x4d2cb0(0x1fc)][_0x4d2cb0(0x2ab)](_0x532968=>{const _0x16fa3f=_0x4d2cb0;if(!_0x532968[_0x16fa3f(0x1b5)])_0x42954e[_0x16fa3f(0x272)](_0x532968['coin']);});if(_0x1e02c1=='')for(const [_0x2a059f,_0x4c02ff]of Object[_0x4d2cb0(0x2bd)](mybalances)){_0x4c02ff[_0x4d2cb0(0x246)]()!=0x0&&_0xf69899[_0x4d2cb0(0x272)]({'coin':_0x2a059f});}else{if(_0x405474)await getOpenOrders();let _0x21f6ca=![];for(const [_0x531b89,_0x26076c]of Object['entries'](mybalances)){if(_0x42954e['includes'](_0x531b89)){const _0x24c722=config['portfolio'][_0x4d2cb0(0x21c)](_0x24561a=>_0x24561a['coin']==_0x531b89),_0x17921c=_0x531b89+'/'+_0x1e02c1,_0xcc9b7e=_0x1e02c1+'/'+_0x531b89,_0x3e2672=currentCoins[_0x4d2cb0(0x21c)](_0x57be57=>_0x57be57[_0x4d2cb0(0x202)]==_0x531b89);_0x21f6ca=![];_0x405474&&(_0x21f6ca=allOpenOrders[_0x4d2cb0(0x21c)](_0x2b42a1=>_0x2b42a1[_0x4d2cb0(0x27e)]==_0x24c722[_0x4d2cb0(0x27e)]));if((_0x26076c['toString']()!=0x0||_0x24c722)&&(allSymbols[_0x4d2cb0(0x291)](_0x17921c)||_0x531b89==_0x1e02c1))_0x531b89!=_0x1e02c1&&_0x1d9e5a[_0x4d2cb0(0x272)](_0x17921c),_0xf69899['push']({'coin':_0x531b89,'symbol':_0x17921c,'reverse':![],'number':Math[_0x4d2cb0(0x1e5)](_0x26076c+(_0x24c722&&_0x24c722['offset']||0x0),0x0),'orderstatus':_0x405474?_0x21f6ca?'open':'none':_0x3e2672?_0x3e2672[_0x4d2cb0(0x19e)]:_0x4d2cb0(0x240)});else(_0x26076c[_0x4d2cb0(0x246)]()!=0x0||_0x24c722)&&allSymbols[_0x4d2cb0(0x291)](_0xcc9b7e)&&(_0x531b89!=_0x1e02c1&&_0x1d9e5a[_0x4d2cb0(0x272)](_0xcc9b7e),_0xf69899[_0x4d2cb0(0x272)]({'coin':_0x531b89,'symbol':_0xcc9b7e,'reverse':!![],'number':Math['max'](_0x26076c+(_0x24c722&&_0x24c722[_0x4d2cb0(0x205)]||0x0),0x0),'orderstatus':_0x405474?_0x21f6ca?'open':'none':_0x3e2672?_0x3e2672[_0x4d2cb0(0x19e)]:_0x4d2cb0(0x240)}));}}}}catch(_0x397ef5){if(!_0x232bb6)handleErrorNoStop(_0x397ef5,_0x4d2cb0(0x1f9));else await handleError(_0x397ef5,_0x4d2cb0(0x1f9));}return _0xf69899;}async function getCoinNumber(_0x15c0bb){const _0x29bff6=_0x2cb630;let _0x37b77d;try{const _0x2f83d4=await exchange[_0x29bff6(0x25a)]();_0x37b77d=_0x2f83d4[_0x29bff6(0x21f)][_0x15c0bb];}catch(_0x54ca14){await handleError(_0x54ca14,_0x29bff6(0x212));}return _0x37b77d;}async function getOpenOrders(){const _0x150706=_0x2cb630;let _0x83c93e;allOpenOrders=[];try{for(const _0xad9c4b of config[_0x150706(0x1fc)]){!_0xad9c4b[_0x150706(0x1b5)]&&_0xad9c4b[_0x150706(0x202)]!=config[_0x150706(0x1bb)]&&(_0x83c93e=await exchange['fetchOpenOrders'](_0xad9c4b[_0x150706(0x27e)]),_0x83c93e[_0x150706(0x231)]>0x0&&allOpenOrders[_0x150706(0x272)](_0x83c93e[0x0]));}}catch(_0x451fa7){await handleError(_0x451fa7,_0x150706(0x25d));}}async function handleOpenOrders(_0x5eb772=0x0){const _0x3255f2=_0x2cb630;allOpenOrders[_0x3255f2(0x231)]==0x0&&lockOrders==ORDERS[_0x3255f2(0x254)]&&allOrdersPlaced&&(_0x5eb772==0x0?(logger[_0x3255f2(0x25b)]('1\x20-\x20Handle\x20open\x20orders'),_0x5eb772++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3255f2(0x25b)](_0x3255f2(0x25e)),validateOrders(_0x3255f2(0x288))));}async function getPortfolio(_0x2be3c1){const _0x453a66=_0x2cb630;let _0x56fe54=[],_0x3f76b1=[],_0x3968fa,_0xde849b=[],_0x4ea1da=![];if(_0x2be3c1[_0x453a66(0x20c)]===_0x453a66(0x1e6)||_0x2be3c1[_0x453a66(0x206)]==='************')_0x4ea1da=!![];else{await initExchange(_0x2be3c1[_0x453a66(0x238)],_0x2be3c1[_0x453a66(0x20c)],_0x2be3c1[_0x453a66(0x206)]);try{_0x4ea1da=await loadSymbols(_0x2be3c1[_0x453a66(0x238)]);}catch(_0x58b42a){_0x4ea1da=![],handleErrorNoStop(_0x58b42a,'loadSymbols()');}}if(_0x4ea1da){_0xde849b=await getCoins(![],![],_0x2be3c1['basecoin']);if(_0xde849b===![])proxyEmit('portfolio',![]);else{if(_0x2be3c1[_0x453a66(0x1bb)]=='')proxyEmit(_0x453a66(0x1fc),_0xde849b);else{_0xde849b[_0x453a66(0x2ab)](_0x23f399=>{const _0x2661c0=_0x453a66;if(_0x23f399[_0x2661c0(0x202)]!=_0x2be3c1['basecoin'])_0x56fe54[_0x2661c0(0x272)](_0x23f399['symbol']);});try{_0x3f76b1=await exchange[_0x453a66(0x218)](_0x56fe54);}catch(_0x29fcd2){await handleError(_0x29fcd2,_0x453a66(0x276));}_0xde849b['forEach'](_0x206f6d=>{const _0x4dd4a7=_0x453a66;_0x206f6d[_0x4dd4a7(0x202)]!=_0x2be3c1['basecoin']?_0x3968fa=_0x206f6d['reverse']?0x1/_0x3f76b1[_0x206f6d[_0x4dd4a7(0x27e)]][_0x4dd4a7(0x1ac)]:_0x3f76b1[_0x206f6d[_0x4dd4a7(0x27e)]][_0x4dd4a7(0x1ac)]:_0x3968fa=0x1,_0x206f6d[_0x4dd4a7(0x1a8)]=formatResult(_0x3968fa,0x8);}),proxyEmit('portfolio',_0xde849b);}}}else proxyEmit(_0x453a66(0x1fc),![]);}function checkMinimums(_0x3cd541){const _0x509584=_0x2cb630;let _0x5e8aa2=!![];const _0x467396=!_0x3cd541[_0x509584(0x234)]?markets[_0x3cd541[_0x509584(0x27e)]][_0x509584(0x19a)][_0x509584(0x1e4)]['min']:markets[_0x3cd541[_0x509584(0x27e)]]['limits'][_0x509584(0x20a)][_0x509584(0x1d8)],_0x1204f5=!_0x3cd541['reverse']?markets[_0x3cd541[_0x509584(0x27e)]][_0x509584(0x19a)][_0x509584(0x20a)]['min']:markets[_0x3cd541[_0x509584(0x27e)]][_0x509584(0x19a)][_0x509584(0x1e4)]['min'],_0x298d34=markets[_0x3cd541['symbol']]['precision'][_0x509584(0x1e4)];_0x3cd541[_0x509584(0x1b0)]=formatResultTruncate(_0x3cd541[_0x509584(0x1b0)],_0x298d34);if(Math[_0x509584(0x1c5)](_0x3cd541[_0x509584(0x1b0)])<_0x467396)_0x5e8aa2=![];if(Math['abs'](_0x3cd541[_0x509584(0x1b0)])*_0x3cd541[_0x509584(0x1ac)]<_0x1204f5)_0x5e8aa2=![];if(_0x3cd541['side']=='sell'){let _0x10eee5=config['portfolio'][_0x509584(0x21c)](_0x4716a7=>_0x4716a7[_0x509584(0x202)]==_0x3cd541[_0x509584(0x202)]);if(_0x10eee5[_0x509584(0x205)]>0x0){if(Math[_0x509584(0x1c5)](_0x3cd541[_0x509584(0x1b0)])>_0x3cd541[_0x509584(0x2cc)]-_0x10eee5[_0x509584(0x205)])_0x5e8aa2=![];}else{if(Math[_0x509584(0x1c5)](_0x3cd541['trade'])>_0x3cd541[_0x509584(0x2cc)])_0x5e8aa2=![];}}if(_0x3cd541[_0x509584(0x1d3)]==_0x509584(0x1e3)){let _0xc7fb3e=config['portfolio'][_0x509584(0x21c)](_0x17c0a3=>_0x17c0a3[_0x509584(0x202)]==config[_0x509584(0x1bb)]),_0x2dbc27=currentCoins[_0x509584(0x21c)](_0x3a2d4d=>_0x3a2d4d[_0x509584(0x202)]==config['basecoin']);if(_0xc7fb3e[_0x509584(0x205)]>0x0){if(Math[_0x509584(0x1c5)](_0x3cd541[_0x509584(0x1b0)])*_0x3cd541['last']>_0x2dbc27[_0x509584(0x2cc)]-_0xc7fb3e[_0x509584(0x205)])_0x5e8aa2=![];}else{if(Math[_0x509584(0x1c5)](_0x3cd541[_0x509584(0x1b0)])*_0x3cd541[_0x509584(0x1ac)]>_0x2dbc27[_0x509584(0x2cc)])_0x5e8aa2=![];}}return _0x5e8aa2;}async function getBalances(){const _0x1c1291=_0x2cb630;let _0xbcb868=0x0,_0x64fc75;const _0x12197e=config[_0x1c1291(0x2ce)];if(config['headless']&&config[_0x1c1291(0x209)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x37f52a=>{const _0x35b03b=_0x1c1291;if(_0x37f52a['coin']!=config[_0x35b03b(0x1bb)]){let _0x4d8418=global[_0x35b03b(0x23a)][noslash(_0x37f52a[_0x35b03b(0x27e)])];_0x64fc75=_0x37f52a['reverse']?0x1/_0x4d8418:_0x4d8418;}else _0x64fc75=0x1;let _0x5536c9=_0x37f52a[_0x35b03b(0x2cc)]*_0x64fc75;_0xbcb868+=_0x5536c9,_0x37f52a[_0x35b03b(0x1ac)]=formatResult(Number(_0x64fc75),0x8),_0x37f52a[_0x35b03b(0x29a)]=_0x5536c9;}),currentCoins[_0x1c1291(0x2ab)](_0x4256c2=>{const _0x52a57a=_0x1c1291;let _0x2a769d=config['portfolio'][_0x52a57a(0x21c)](_0x454767=>_0x454767[_0x52a57a(0x202)]==_0x4256c2['coin']),_0x36a503=Number(_0x2a769d[_0x52a57a(0x2d6)]),_0x5c6eda=_0x4256c2[_0x52a57a(0x29a)]/_0xbcb868*0x64,_0x85eaf4=_0x36a503*_0xbcb868/0x64/_0x4256c2[_0x52a57a(0x1ac)]-_0x4256c2[_0x52a57a(0x2cc)];_0x4256c2['distribution']=formatResult(_0x5c6eda,0x3),_0x4256c2[_0x52a57a(0x245)]=formatResult(_0x36a503,0x3),_0x4256c2['trade']=formatResult(_0x85eaf4,0x8),_0x4256c2['side']='',_0x4256c2[_0x52a57a(0x1c0)]=![];if(_0x4256c2[_0x52a57a(0x202)]!=config[_0x52a57a(0x1bb)]){if(_0x4256c2[_0x52a57a(0x2d6)]>_0x36a503)_0x4256c2[_0x52a57a(0x1d3)]=_0x52a57a(0x1e7),_0x4256c2['valid']=checkMinimums(_0x4256c2);else _0x4256c2['distribution']<_0x36a503&&(_0x4256c2[_0x52a57a(0x1d3)]=_0x52a57a(0x1e3),_0x4256c2['valid']=checkMinimums(_0x4256c2));}_0x4256c2['delta']=_0x4256c2[_0x52a57a(0x2d6)]/_0x4256c2[_0x52a57a(0x245)]-0x1;if(_0x4256c2[_0x52a57a(0x19e)]==_0x52a57a(0x26c)||_0x4256c2['orderstatus']==_0x52a57a(0x28d))_0x4256c2[_0x52a57a(0x19e)]='none';}),currentCoins['sort']((_0x22bfa3,_0x5bb429)=>_0x22bfa3[_0x1c1291(0x2a7)]<_0x5bb429[_0x1c1291(0x2a7)]?0x1:_0x5bb429[_0x1c1291(0x2a7)]<_0x22bfa3[_0x1c1291(0x2a7)]?-0x1:0x0);const _0x4b322f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4b322f[_0x1c1291(0x195)],'usd':_0x4b322f[_0x1c1291(0x198)],'portfolio':JSON[_0x1c1291(0x2c5)](currentCoins),'threshold':_0x12197e},proxyEmit(_0x1c1291(0x28a),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1c1291(0x23b)])headlessMode({'portfolio':currentCoins,'threshold':_0x12197e});else{if(lockOrders==ORDERS[_0x1c1291(0x19b)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x12197e});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x86b217=_0x2cb630;if(!lastBalances)return;let _0x3b33ea=[],_0x3b4ef1,_0x54314b=JSON[_0x86b217(0x2a5)](lastBalances[_0x86b217(0x1fc)]);_0x54314b['sort']((_0x4acb7b,_0x230bea)=>_0x4acb7b[_0x86b217(0x202)]>_0x230bea[_0x86b217(0x202)]?0x1:_0x230bea[_0x86b217(0x202)]>_0x4acb7b[_0x86b217(0x202)]?-0x1:0x0),_0x54314b[_0x86b217(0x2ab)](_0x369822=>{const _0x291038=_0x86b217;let _0x20cfaa={'coin':_0x369822[_0x291038(0x202)],'number':_0x369822[_0x291038(0x2cc)],'price':_0x369822[_0x291038(0x1ac)]};_0x3b33ea['push'](_0x20cfaa);});const _0x2c1104=await getFiat();_0x3b4ef1={'date':lastBalances[_0x86b217(0x285)][_0x86b217(0x24b)]('\x20')[0x0],'eur':_0x2c1104[_0x86b217(0x195)],'usd':_0x2c1104['usd'],'coins':_0x3b33ea};let _0x303ab8=dbPerformance['get'](_0x86b217(0x1db))[_0x86b217(0x21c)]({'date':_0x3b4ef1[_0x86b217(0x2ad)]})[_0x86b217(0x29a)]();_0x303ab8?_0x3b4ef1[_0x86b217(0x2ad)]!=config[_0x86b217(0x1f4)]&&dbPerformance[_0x86b217(0x23f)](_0x86b217(0x1db))[_0x86b217(0x21c)]({'date':_0x3b4ef1[_0x86b217(0x2ad)]})[_0x86b217(0x29b)](_0x3b4ef1)['write']():dbPerformance[_0x86b217(0x23f)](_0x86b217(0x1db))[_0x86b217(0x272)](_0x3b4ef1)[_0x86b217(0x2c3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0xf13a8b=_0x2cb630;let _0x494a8f=[];if(dbPerformance['has'](_0xf13a8b(0x1db))['value']()){let _0x2dc59e=dbPerformance[_0xf13a8b(0x23f)](_0xf13a8b(0x1db))[_0xf13a8b(0x2bb)]()[_0xf13a8b(0x233)](_0xf13a8b(0x2ad))[_0xf13a8b(0x29a)](),_0x22bb4a=[...config[_0xf13a8b(0x28e)]];_0x22bb4a[_0xf13a8b(0x2b2)]((_0x2b6a7a,_0x4df143)=>_0x2b6a7a['date']>_0x4df143['date']?-0x1:_0x4df143['date']>_0x2b6a7a[_0xf13a8b(0x2ad)]?0x1:0x0);let _0x439e36=0x1,_0x17f450=[],_0x3c1c61=0x0;_0x2dc59e['slice']()[_0xf13a8b(0x234)]()['forEach']((_0x310cdb,_0x4d8c42)=>{const _0x325268=_0xf13a8b;if(_0x22bb4a[_0x3c1c61]){if(_0x2dc59e[_0x2dc59e[_0x325268(0x231)]-_0x4d8c42]&&_0x22bb4a[_0x3c1c61][_0x325268(0x2ad)]==_0x2dc59e[_0x2dc59e[_0x325268(0x231)]-_0x4d8c42]['date']){if(_0x4d8c42<_0x2dc59e[_0x325268(0x231)]){let _0x891319=0x0,_0x42d6e1=0x0;_0x2dc59e[_0x2dc59e[_0x325268(0x231)]-_0x4d8c42][_0x325268(0x2ae)]['forEach'](_0x202b04=>{const _0x237580=_0x325268;_0x42d6e1+=_0x202b04[_0x237580(0x2cc)]*_0x202b04[_0x237580(0x1a8)];}),_0x22bb4a[_0x3c1c61]['changes'][_0x325268(0x2ab)](_0x949175=>{const _0xe2888d=_0x325268;_0x891319+=_0x949175[_0xe2888d(0x2cc)]*_0x949175['price'];}),_0x439e36*=_0x891319/(_0x42d6e1-_0x891319)+0x1;}_0x3c1c61++;}}let _0x2a1203=0x0;_0x310cdb[_0x325268(0x2ae)]['forEach'](_0x7a080b=>{const _0x8f539c=_0x325268;_0x2a1203+=_0x7a080b[_0x8f539c(0x2cc)]*_0x7a080b[_0x8f539c(0x1a8)];}),_0x17f450[_0x2dc59e[_0x325268(0x231)]-_0x4d8c42-0x1]=_0x2a1203*(_0x439e36-0x1);});let _0x170ff8=[];_0x22bb4a=[...config[_0xf13a8b(0x28e)]]||[];let _0x146dd8=0x0;_0x3c1c61=0x0,_0x2dc59e[_0xf13a8b(0x2ab)]((_0x1847f8,_0x268cec)=>{const _0x3fa21e=_0xf13a8b;if(_0x22bb4a[_0x3c1c61]){const _0x20731a=fns[_0x3fa21e(0x2a5)](_0x22bb4a[_0x3c1c61]['date'],_0x3fa21e(0x2a1),new Date()),_0x18fb11=fns[_0x3fa21e(0x2a5)](_0x1847f8[_0x3fa21e(0x2ad)],_0x3fa21e(0x2a1),new Date());if(fns['isEqual'](_0x20731a,_0x18fb11)){let _0x115529=0x0;_0x22bb4a[_0x3c1c61]['changes'][_0x3fa21e(0x2ab)](_0x4aeffb=>{const _0xd27078=_0x3fa21e;!_0x170ff8[_0x4aeffb[_0xd27078(0x202)]]?_0x170ff8[_0x4aeffb[_0xd27078(0x202)]]=_0x4aeffb[_0xd27078(0x2cc)]:(_0x115529=_0x170ff8[_0x4aeffb[_0xd27078(0x202)]],_0x170ff8[_0x4aeffb[_0xd27078(0x202)]]+=_0x4aeffb[_0xd27078(0x2cc)]);const _0x2caccb=_0x1847f8[_0xd27078(0x2ae)][_0xd27078(0x21c)](_0x55e02f=>_0x55e02f['coin']==_0x4aeffb[_0xd27078(0x202)]);(!_0x2caccb||_0x2caccb['number']==0x0)&&(_0x146dd8+=(-_0x4aeffb[_0xd27078(0x2cc)]-_0x115529)*_0x4aeffb[_0xd27078(0x1a8)]);}),_0x3c1c61++;}}_0x1847f8['coins'][_0x3fa21e(0x2ab)]((_0x15cefb,_0x1191d0)=>{const _0x33647e=_0x3fa21e;_0x170ff8[_0x15cefb[_0x33647e(0x202)]]&&(_0x15cefb={..._0x15cefb,'initial':_0x170ff8[_0x15cefb[_0x33647e(0x202)]]}),_0x1847f8[_0x33647e(0x2ae)][_0x1191d0]=_0x15cefb;}),_0x494a8f[_0x3fa21e(0x272)]({'date':_0x1847f8[_0x3fa21e(0x2ad)],'eur':_0x1847f8[_0x3fa21e(0x195)],'usd':_0x1847f8['usd'],'offset':_0x17f450[_0x268cec],'netoffset':_0x146dd8,'coins':_0x1847f8[_0x3fa21e(0x2ae)]});});}return _0x494a8f;}function emitPerformance(_0x3fedef){const _0x4ae35c=_0x2cb630;_0x3fedef[_0x4ae35c(0x231)]!==0x0?(proxyEmit(_0x4ae35c(0x252),_0x3fedef),lastPerformanceEmitted=getDate()):proxyEmit(_0x4ae35c(0x252),[]);}function getPerf(_0x494476,_0x3c0435){const _0x43e829=_0x2cb630;let _0x1f6c4e=0x0,_0x167e2a=0x0,_0x179721=0x0;_0x494476[_0x43e829(0x2ae)]['forEach'](_0x41c438=>{const _0x26f395=_0x43e829;_0x1f6c4e+=_0x41c438[_0x26f395(0x2cc)]*_0x41c438[_0x26f395(0x1a8)];});_0x3c0435&&(_0x1f6c4e+=_0x494476['offset']);if(config['basecoin']===_0x43e829(0x2aa)||config['basecoin']===_0x43e829(0x1f2))_0x167e2a=_0x1f6c4e*_0x494476[_0x43e829(0x195)],_0x179721=_0x1f6c4e*_0x494476[_0x43e829(0x198)];else{if(config[_0x43e829(0x1bb)]===_0x43e829(0x1b3)||config[_0x43e829(0x1bb)]==='USDT'||config['basecoin']===_0x43e829(0x1e1))_0x167e2a=_0x1f6c4e*_0x494476[_0x43e829(0x195)]/_0x494476[_0x43e829(0x198)],_0x179721=_0x1f6c4e;else config[_0x43e829(0x1bb)]===_0x43e829(0x1fe)&&(_0x167e2a=_0x1f6c4e,_0x179721=_0x1f6c4e*_0x494476[_0x43e829(0x198)]/_0x494476[_0x43e829(0x195)]);}return[_0x1f6c4e,_0x167e2a,_0x179721];}function getKPIs(_0x5c01c7,_0x4d5183=_0x2cb630(0x1fe)){const _0x28b99e=_0x2cb630,_0x38bc4b=config[_0x28b99e(0x1bb)],_0x19905a=config[_0x28b99e(0x28a)],_0x844530=currentCoins,_0x5280f7=getNormalizedPerformance(),_0xba32d2=_0x5c01c7==='basecoin'?_0x38bc4b:_0x5c01c7===_0x28b99e(0x2cd)||_0x5c01c7==='net-fiat'?_0x4d5183:'Net\x20'+_0x38bc4b,_0x23f160=_0x5c01c7===_0x28b99e(0x1fa)?_0x28b99e(0x1ff):_0x5c01c7===_0x28b99e(0x2b5)?_0x28b99e(0x22e)+_0xba32d2+')':_0xba32d2+_0x28b99e(0x1d1),_0x361e7a=_0x5c01c7===_0x28b99e(0x1fa)||_0x5c01c7===_0x28b99e(0x2b5)?_0x28b99e(0x1ff):_0xba32d2+'\x20change';let _0x2638f6=0x0;_0x844530[_0x28b99e(0x2ab)](_0x59465f=>{const _0x5daa89=_0x28b99e;_0x2638f6+=_0x59465f['number']*_0x59465f[_0x5daa89(0x1ac)];});if(_0x5c01c7===_0x28b99e(0x2cd)||_0x5c01c7==='net-fiat'){if(_0x38bc4b===_0x28b99e(0x2aa)||_0x38bc4b===_0x28b99e(0x1f2))_0x2638f6=_0x2638f6*(_0x4d5183===_0x28b99e(0x1fe)?_0x19905a[_0x28b99e(0x195)]:_0x19905a[_0x28b99e(0x198)]);else{if(_0x38bc4b===_0x28b99e(0x1b3)||_0x38bc4b===_0x28b99e(0x1f8)||_0x38bc4b===_0x28b99e(0x1e1))_0x2638f6=_0x2638f6*(_0x4d5183===_0x28b99e(0x1fe)?_0x19905a['eur']/_0x19905a[_0x28b99e(0x198)]:0x1);else _0x38bc4b===_0x28b99e(0x1fe)&&(_0x2638f6=_0x2638f6*(_0x4d5183==='EUR'?0x1:_0x19905a[_0x28b99e(0x198)]/_0x19905a[_0x28b99e(0x195)]));}}let _0x4d2994;if(_0x2638f6!==0x0){if(_0x5c01c7==='basecoin')_0x4d2994=(_0x2638f6/startingBalances[_0x28b99e(0x1bb)]-0x1)*0x64;else{if(_0x4d5183===_0x28b99e(0x1fe))_0x4d2994=(_0x2638f6/startingBalances['eur']-0x1)*0x64;else _0x4d2994=(_0x2638f6/startingBalances[_0x28b99e(0x198)]-0x1)*0x64;}let _0x220e75=0x0;if(startingBalances[_0x28b99e(0x2ae)])_0x844530[_0x28b99e(0x2ab)](_0x525508=>{const _0x4ef81c=_0x28b99e;let _0x4010a3=startingBalances[_0x4ef81c(0x2ae)][_0x4ef81c(0x21c)](_0x22ab39=>_0x22ab39['coin']===_0x525508[_0x4ef81c(0x202)]);if(_0x4010a3&&_0x4010a3[_0x4ef81c(0x202)]&&_0x525508[_0x4ef81c(0x2cc)]!==0x0)_0x220e75+=_0x4010a3[_0x4ef81c(0x2cc)]*_0x525508[_0x4ef81c(0x1ac)];});let _0xa0a5f8=0x0;if(_0x5280f7[_0x28b99e(0x231)]!==0x0){let _0x40165b=_0x5280f7[_0x5280f7[_0x28b99e(0x231)]-0x1];_0xa0a5f8=_0x40165b[_0x28b99e(0x18b)];}_0x220e75-=_0xa0a5f8;_0x5c01c7==='net-basecoin'&&(_0x4d2994=(_0x2638f6-_0x220e75)/startingBalances[_0x28b99e(0x1bb)]*0x64,_0x2638f6=_0x2638f6-_0x220e75);if(_0x5c01c7===_0x28b99e(0x2b5)){let _0xc61d34=_0x4d5183===_0x28b99e(0x1fe)?startingBalances[_0x28b99e(0x195)]:startingBalances[_0x28b99e(0x198)];if(_0x38bc4b===_0x28b99e(0x2aa)||_0x38bc4b===_0x28b99e(0x1f2))_0x220e75=_0x4d5183===_0x28b99e(0x1fe)?_0x220e75*_0x19905a[_0x28b99e(0x195)]:_0x220e75*_0x19905a['usd'];else{if(_0x38bc4b==='BUSD'||_0x38bc4b==='USDT'||_0x38bc4b===_0x28b99e(0x1e1))_0x220e75=_0x4d5183===_0x28b99e(0x1fe)?_0x220e75*_0x19905a['eur']/_0x19905a[_0x28b99e(0x198)]:_0x220e75;else _0x38bc4b===_0x28b99e(0x1fe)&&(_0x220e75=_0x4d5183===_0x28b99e(0x1fe)?_0x220e75:_0x220e75*_0x19905a[_0x28b99e(0x198)]/_0x19905a[_0x28b99e(0x195)]);}_0x4d2994=(_0x2638f6-_0x220e75)/_0xc61d34*0x64,_0x2638f6=_0x2638f6-_0x220e75;}if(_0x4d2994){if(_0x4d2994<0x64)_0x4d2994=_0x4d2994['toFixed'](0x2);else{if(_0x4d2994<0x3e8)_0x4d2994=_0x4d2994[_0x28b99e(0x1d6)](0x1);else _0x4d2994=_0x4d2994[_0x28b99e(0x1d6)](0x0);}}else _0x4d2994=Number('0')[_0x28b99e(0x1d6)](0x2);if(_0x2638f6){if(Math[_0x28b99e(0x1c5)](_0x2638f6)<0.000001)_0x2638f6=_0x2638f6['toFixed'](0x2);else{if(Math['abs'](_0x2638f6)<0.1)_0x2638f6=_0x2638f6[_0x28b99e(0x1d6)](0x6);else{if(Math[_0x28b99e(0x1c5)](_0x2638f6)<0x1)_0x2638f6=_0x2638f6[_0x28b99e(0x1d6)](0x5);else{if(Math[_0x28b99e(0x1c5)](_0x2638f6)<0xa)_0x2638f6=_0x2638f6['toFixed'](0x4);else{if(Math[_0x28b99e(0x1c5)](_0x2638f6)<0x64)_0x2638f6=_0x2638f6[_0x28b99e(0x1d6)](0x3);else{if(Math[_0x28b99e(0x1c5)](_0x2638f6)<0x3e8)_0x2638f6=_0x2638f6['toFixed'](0x2);else _0x2638f6=_0x2638f6[_0x28b99e(0x1d6)](0x2);}}}}}}else _0x2638f6=Number('0')['toFixed'](0x2);}else _0x4d2994=Number('0')[_0x28b99e(0x1d6)](0x2);return{'value':_0x2638f6,'change':_0x4d2994,'leftTxt':_0x23f160,'rightTxt':_0x361e7a};}async function getStartingBalances(_0x7d0642,_0xd262b4=!![]){const _0x46e4e7=_0x2cb630;if(_0x7d0642['length']!==0x0){const [_0x3a6c01,_0x2468c,_0x44fabb]=getPerf(_0x7d0642[0x0],!![]);let _0x2ad2fe=[];config[_0x46e4e7(0x1fc)][_0x46e4e7(0x2ab)](_0x30cc3c=>{const _0x468c9c=_0x46e4e7;let _0x3c284b=0x0,_0x2e26d4;config[_0x468c9c(0x28e)][_0x468c9c(0x2ab)](_0x5b8fb3=>{const _0x414c75=_0x468c9c;let _0x29acc4=_0x5b8fb3['changes']['find'](_0x4677e9=>_0x4677e9[_0x414c75(0x202)]==_0x30cc3c['coin']);if(_0x29acc4){_0x3c284b+=_0x29acc4[_0x414c75(0x2cc)];if(!_0x2e26d4)_0x2e26d4=_0x29acc4['price'];}}),_0x2ad2fe[_0x468c9c(0x272)]({'coin':_0x30cc3c[_0x468c9c(0x202)],'number':_0x3c284b,'initialprice':_0x2e26d4});});const _0xfa4043={'basecoin':_0x3a6c01,'eur':_0x2468c,'usd':_0x44fabb,'coins':_0x2ad2fe};if(_0xd262b4)proxyEmit(_0x46e4e7(0x259),_0xfa4043);startingBalances=_0xfa4043;}}function headlessMode(_0x1b96fe){const _0x5dfa9d=_0x2cb630;let _0xe0271d=_0x1b96fe[_0x5dfa9d(0x1fc)],_0x47f315=_0x1b96fe[_0x5dfa9d(0x2ce)],_0x2dbd2f=[];for(let _0x4fb637 of _0xe0271d){if(_0x4fb637[_0x5dfa9d(0x202)]!=config[_0x5dfa9d(0x1bb)]){if(_0x4fb637[_0x5dfa9d(0x2a7)]>=_0x47f315/0x64){if(_0x4fb637['valid'])_0x2dbd2f[_0x5dfa9d(0x272)](_0x4fb637);}else{if(_0x4fb637[_0x5dfa9d(0x2a7)]<=-_0x47f315/0x64){if(_0x4fb637[_0x5dfa9d(0x1c0)])_0x2dbd2f[_0x5dfa9d(0x272)](_0x4fb637);}}}}_0x2dbd2f['length']>0x0&&placeOrder(_0x2dbd2f);}function notifyBalance(_0x4140c4){const _0x54c885=_0x2cb630;let _0x7a1aa5=_0x4140c4[_0x54c885(0x1fc)],_0x55ef77=_0x4140c4[_0x54c885(0x2ce)],_0x378914=[];for(let _0x1f1c5d of _0x7a1aa5){if(_0x1f1c5d[_0x54c885(0x202)]!=config[_0x54c885(0x1bb)]){if(_0x1f1c5d[_0x54c885(0x2a7)]>=_0x55ef77/0x64){if(_0x1f1c5d[_0x54c885(0x1c0)])_0x378914['push'](_0x1f1c5d);}else{if(_0x1f1c5d[_0x54c885(0x2a7)]<=-_0x55ef77/0x64){if(_0x1f1c5d[_0x54c885(0x1c0)])_0x378914[_0x54c885(0x272)](_0x1f1c5d);}}}}if(_0x378914[_0x54c885(0x231)]>0x0){let _0x1a1019=_0x378914[_0x54c885(0x1d4)](_0xe263bc=>_0xe263bc[_0x54c885(0x202)]);_0x1a1019['sort']();let _0x2e25f5=_0x1a1019[_0x54c885(0x258)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x2e25f5;}}function symbolToCoin(_0x3e0df0){const _0x51c4b9=_0x2cb630;let _0x533a0b;if(_0x3e0df0[_0x51c4b9(0x291)]('/'+config[_0x51c4b9(0x1bb)]))_0x533a0b=_0x3e0df0[_0x51c4b9(0x244)]('/'+config[_0x51c4b9(0x1bb)],'');if(_0x3e0df0[_0x51c4b9(0x291)](config[_0x51c4b9(0x1bb)]+'/'))_0x533a0b=_0x3e0df0[_0x51c4b9(0x244)](config['basecoin']+'/','');return _0x533a0b;}async function unlockOrders(){const _0x47853e=_0x2cb630;if(allOrdersPlaced&&lockOrders==ORDERS[_0x47853e(0x254)]){logger[_0x47853e(0x25b)](_0x47853e(0x2b1)),lockOrders=ORDERS[_0x47853e(0x1ca)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);currentCoins=await getCoins(),validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x47853e(0x19b)],logger[_0x47853e(0x25b)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x10aff2){const _0x45f98b=_0x2cb630;if(_0x10aff2)validateOrdersState=_0x10aff2;logger[_0x45f98b(0x25b)](_0x45f98b(0x19f)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x45f98b(0x2c8):lockOrders==0x2?'ORDERS.UNLOCKING':'ORDERS.UNLOCKED'));let _0x5b0d9e=[],_0x1052be=config[_0x45f98b(0x18f)]==_0x45f98b(0x2a6)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x45f98b(0x22f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x45f98b(0x254)])return;logger[_0x45f98b(0x25b)](_0x45f98b(0x1c1)+validateOrdersState),lastOrders[_0x45f98b(0x2ab)](_0x1900f5=>{const _0x3cd3a7=_0x45f98b;let _0x541a08=![];_0x1900f5[_0x3cd3a7(0x26c)]>0x0&&(_0x541a08=!![]),_0x5b0d9e[_0x3cd3a7(0x272)](_0x541a08),_0x541a08&&config[_0x3cd3a7(0x18f)]!=_0x3cd3a7(0x2a6)&&logHistory(_0x3cd3a7(0x207),_0x3cd3a7(0x282)+_0x1900f5['symbol']+'\x20'+_0x1900f5[_0x3cd3a7(0x1d3)]+'\x20#'+formatResult(_0x1900f5['filled'],0x8)+'\x20@'+formatResult(_0x1900f5[_0x3cd3a7(0x1a8)],0x8));}),_0x5b0d9e[_0x45f98b(0x2ab)]((_0x349ee7,_0x3808d6)=>{const _0x5109be=_0x45f98b;if(_0x349ee7)lastOrders[_0x5109be(0x250)](_0x3808d6,0x1);}),persistOpenOrders(lastOrders);const _0x8ac65c=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x45f98b(0x1a3))validateOrdersState=_0x45f98b(0x257),_0x5b0d9e[_0x45f98b(0x291)](![])?config[_0x45f98b(0x18f)]==_0x45f98b(0x2a6)?logHistory(_0x45f98b(0x187),_0x45f98b(0x290)):logHistory(_0x45f98b(0x187),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused'):await unlockOrders();else{if(validateOrdersState==_0x45f98b(0x257)){if(_0x5b0d9e[_0x45f98b(0x291)](![])){}else allOrdersPlaced&&(config[_0x45f98b(0x18f)]==_0x45f98b(0x2a6)?logHistory(_0x45f98b(0x1df),_0x45f98b(0x1ee)+_0x8ac65c):logHistory(_0x45f98b(0x1df),_0x45f98b(0x262)+_0x8ac65c),await unlockOrders());}else{if(validateOrdersState==_0x45f98b(0x2c0))_0x5b0d9e[_0x45f98b(0x291)](![])&&(config[_0x45f98b(0x18f)]=='market'?logHistory(_0x45f98b(0x1df),_0x45f98b(0x203)+Math['round'](_0x1052be*validateOrderInterval/0xea60)+_0x45f98b(0x2b7)+_0x8ac65c):(await cancelOrders(),logHistory(_0x45f98b(0x1df),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x45f98b(0x199)](_0x1052be*validateOrderInterval/0xea60)+_0x45f98b(0x2b7)+_0x8ac65c))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x45f98b(0x18f)]!=_0x45f98b(0x2a6))logHistory(_0x45f98b(0x1df),_0x45f98b(0x2cf)+_0x8ac65c);await unlockOrders();}}}}}async function cancelOrders(){const _0x3ce003=_0x2cb630;lastOrders[_0x3ce003(0x2ab)](async _0x13f402=>{const _0x2b085f=_0x3ce003;try{const _0x3fedf4=await exchange[_0x2b085f(0x2a0)](_0x13f402['orderId'],_0x13f402[_0x2b085f(0x27e)]);}catch(_0x1cf3ae){if(_0x1cf3ae[_0x2b085f(0x246)]()[_0x2b085f(0x291)](_0x2b085f(0x204))){}else await handleError(_0x1cf3ae,_0x2b085f(0x2b3));}});}async function initCoinResults(){const _0x565ff8=_0x2cb630;let _0x57178b=[];config[_0x565ff8(0x1fc)][_0x565ff8(0x2ab)](_0xeab61e=>{const _0x33f3be=_0x565ff8;if(!_0xeab61e[_0x33f3be(0x1b5)]&&_0xeab61e['coin']!=config['basecoin']){let _0x1f9eca=dbCoinResults['get'](_0x33f3be(0x2ae))[_0x33f3be(0x21c)]({'coin':_0xeab61e[_0x33f3be(0x202)]})[_0x33f3be(0x29a)]();if(!_0x1f9eca){const _0x37b752=currentCoins[_0x33f3be(0x21c)](_0x44e3cb=>_0x44e3cb[_0x33f3be(0x202)]==_0xeab61e[_0x33f3be(0x202)]),_0x2c4b56=global[_0x33f3be(0x23a)][noslash(_0xeab61e[_0x33f3be(0x27e)])];let _0xc41172=_0x37b752?_0x37b752['number']:null,_0x1f2ed8=_0xeab61e[_0x33f3be(0x234)]?0x1/_0x2c4b56:_0x2c4b56,_0x3c3fc7;config[_0x33f3be(0x28e)][_0x33f3be(0x2ab)](_0x3c706c=>{const _0x1b4da1=_0x33f3be;!_0x3c3fc7&&(_0x3c3fc7=_0x3c706c['changes'][_0x1b4da1(0x21c)](_0x417912=>_0x417912[_0x1b4da1(0x202)]==_0xeab61e[_0x1b4da1(0x202)]),_0x3c3fc7&&(_0xc41172=_0x3c3fc7['number'],_0x1f2ed8=_0x3c3fc7[_0x1b4da1(0x1a8)]));}),_0x57178b['push']({'coin':_0xeab61e['coin'],'number':_0xc41172,'price':_0x1f2ed8});}}}),_0x57178b[_0x565ff8(0x2ab)](_0x5ea557=>{const _0x163e87=_0x565ff8,_0x4f9ed6={'coin':_0x5ea557[_0x163e87(0x202)],'number':_0x5ea557[_0x163e87(0x2cc)],'breakeven':_0x5ea557['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x163e87(0x23f)](_0x163e87(0x2ae))[_0x163e87(0x272)](_0x4f9ed6)[_0x163e87(0x2c3)]();});}async function updateCoinResults(_0x4629b4,_0x2c19ae=![]){const _0x5a8572=_0x2cb630;let _0x14b2d0,_0x3ca86b,_0x5f0972,_0x554430,_0x2aa7da,_0x1f2f6d,_0x3851f4=dbCoinResults['get'](_0x5a8572(0x2ae))[_0x5a8572(0x21c)]({'coin':_0x4629b4[_0x5a8572(0x202)]})[_0x5a8572(0x29a)]();!_0x3851f4&&await initCoinResults();_0x4629b4[_0x5a8572(0x234)]&&(_0x1f2f6d={'filled':_0x4629b4[_0x5a8572(0x26c)]*_0x4629b4[_0x5a8572(0x1a8)],'amount':_0x4629b4['filled']*_0x4629b4[_0x5a8572(0x1a8)],'side':_0x4629b4[_0x5a8572(0x1d3)]==_0x5a8572(0x1e7)?_0x5a8572(0x1e3):_0x5a8572(0x1e7),'price':0x1/_0x4629b4[_0x5a8572(0x1a8)]},_0x4629b4={..._0x4629b4,..._0x1f2f6d});_0x2c19ae?_0x3ca86b=_0x4629b4[_0x5a8572(0x1d3)]=='buy'?_0x3851f4[_0x5a8572(0x2cc)]+_0x4629b4[_0x5a8572(0x26c)]:_0x3851f4[_0x5a8572(0x2cc)]-_0x4629b4['filled']:_0x3ca86b=await getCoinNumber(_0x4629b4['coin']);if(_0x4629b4['fee']&&_0x4629b4[_0x5a8572(0x24a)]['currency']==config[_0x5a8572(0x1bb)])_0x14b2d0=_0x4629b4['fee']['cost'];else{if(_0x4629b4['fee']&&_0x4629b4[_0x5a8572(0x24a)][_0x5a8572(0x286)]==_0x5a8572(0x215)&&!_0x2c19ae)_0x14b2d0=_0x4629b4[_0x5a8572(0x24a)][_0x5a8572(0x20a)]*global[_0x5a8572(0x23a)][_0x5a8572(0x215)+config['basecoin']];else _0x14b2d0=defaultFee*_0x4629b4['filled']*_0x4629b4[_0x5a8572(0x1a8)];}_0x4629b4[_0x5a8572(0x1d3)]==_0x5a8572(0x1e3)?(_0x5f0972=_0x3ca86b!=0x0?(_0x3851f4[_0x5a8572(0x2bf)]*_0x3851f4[_0x5a8572(0x2cc)]+_0x4629b4['price']*(_0x3ca86b-_0x3851f4[_0x5a8572(0x2cc)])+_0x14b2d0)/_0x3ca86b:0x0,_0x554430=_0x3851f4[_0x5a8572(0x24e)]):(_0x5f0972=_0x3ca86b!=0x0?(_0x3851f4[_0x5a8572(0x2bf)]*_0x3851f4['number']-_0x4629b4[_0x5a8572(0x1a8)]*(_0x3851f4[_0x5a8572(0x2cc)]-_0x3ca86b)+_0x14b2d0)/_0x3ca86b:0x0,_0x554430=_0x3851f4[_0x5a8572(0x24e)]+(_0x4629b4['price']-_0x3851f4[_0x5a8572(0x2bf)])*_0x4629b4[_0x5a8572(0x26c)]);_0x2aa7da=(_0x4629b4[_0x5a8572(0x1a8)]-_0x5f0972-_0x14b2d0/_0x4629b4[_0x5a8572(0x26c)])*_0x3ca86b;let _0x480be2={'coin':_0x4629b4[_0x5a8572(0x202)],'number':_0x3ca86b,'breakeven':formatResult(_0x5f0972,0x8),'realized':formatResult(_0x554430,0x8),'unrealized':formatResult(_0x2aa7da,0x8),'fees':formatResult(_0x3851f4['fees']+_0x14b2d0,0x8),'sells':_0x4629b4[_0x5a8572(0x1d3)]=='sell'?_0x3851f4[_0x5a8572(0x2d3)]+0x1:_0x3851f4[_0x5a8572(0x2d3)],'buys':_0x4629b4[_0x5a8572(0x1d3)]=='buy'?_0x3851f4['buys']+0x1:_0x3851f4['buys']};dbCoinResults['get'](_0x5a8572(0x2ae))[_0x5a8572(0x21c)]({'coin':_0x4629b4[_0x5a8572(0x202)]})[_0x5a8572(0x29b)](_0x480be2)[_0x5a8572(0x2c3)]();if(!_0x2c19ae){if(_0x4629b4['fee']&&_0x4629b4['fee']['currency']==_0x5a8572(0x215)){const _0x410131=currentCoins['find'](_0x4d760b=>_0x4d760b[_0x5a8572(0x202)]==_0x5a8572(0x215));if(_0x410131){let _0x30c212=dbCoinResults[_0x5a8572(0x23f)](_0x5a8572(0x2ae))['find']({'coin':'BNB'})[_0x5a8572(0x29a)]();_0x480be2={..._0x30c212,'number':_0x410131[_0x5a8572(0x2cc)]},dbCoinResults['get'](_0x5a8572(0x2ae))[_0x5a8572(0x21c)]({'coin':'BNB'})[_0x5a8572(0x29b)](_0x480be2)[_0x5a8572(0x2c3)]();}}}}async function placeOrder(_0x176377){const _0x5acdbc=_0x2cb630,_0x23ce71=config['ordertype']==_0x5acdbc(0x2a6)?_0x5acdbc(0x2a6):'limit';if(lockOrders==ORDERS[_0x5acdbc(0x19b)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x5acdbc(0x1a3),lastOrders=[];for(const _0x4641e8 of _0x176377){let _0x180c36,_0x7cbe20,_0x552257,_0x378b1f,_0x266c46,_0x7be7e2=_0x4641e8[_0x5acdbc(0x27e)];try{const _0xa3c3=await exchange[_0x5acdbc(0x1be)](_0x7be7e2);_0x180c36=_0x4641e8['reverse']?0x1/_0x4641e8[_0x5acdbc(0x1ac)]:_0x4641e8['last'],_0x7cbe20=_0xa3c3[_0x5acdbc(0x208)],_0x552257=_0xa3c3[_0x5acdbc(0x1ae)];_0x4641e8['reverse']?(_0x378b1f=_0x4641e8[_0x5acdbc(0x1d3)]==_0x5acdbc(0x1e3)?_0x5acdbc(0x1e7):'buy',_0x266c46=Math[_0x5acdbc(0x1c5)](_0x4641e8[_0x5acdbc(0x1b0)])/_0x180c36):(_0x378b1f=_0x4641e8[_0x5acdbc(0x1d3)],_0x266c46=Math[_0x5acdbc(0x1c5)](_0x4641e8[_0x5acdbc(0x1b0)]));_0x23ce71==_0x5acdbc(0x26b)&&(config[_0x5acdbc(0x18f)]==_0x5acdbc(0x1a4)&&(_0x180c36=_0x378b1f==_0x5acdbc(0x1e3)?_0x7cbe20:_0x552257),config[_0x5acdbc(0x18f)]=='limit-low'&&(_0x180c36=_0x378b1f==_0x5acdbc(0x1e3)?_0x552257:_0x7cbe20));_0x266c46=formatResult(_0x266c46,0x8),_0x180c36=formatResult(_0x180c36,0x8);const _0x36fd8b=_0x378b1f==_0x5acdbc(0x1e7)?config[_0x5acdbc(0x2af)]?String[_0x5acdbc(0x1b9)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x5acdbc(0x1b9)]('0x'+config[_0x5acdbc(0x236)])+'\x20':'',_0xe6b46f=_0x23ce71==_0x5acdbc(0x2a6)?_0x5acdbc(0x235):config[_0x5acdbc(0x18f)]==_0x5acdbc(0x1a4)?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0xd1d16a=new Date()['getTime']()[_0x5acdbc(0x246)]()[_0x5acdbc(0x18a)](-0x6)+'-'+Math['random']()['toString']()[_0x5acdbc(0x18a)](-0x6);lastOrders[_0x5acdbc(0x272)]({'customId':_0xd1d16a,'symbol':_0x7be7e2,'coin':_0x4641e8[_0x5acdbc(0x202)],'side':_0x378b1f,'reverse':_0x4641e8[_0x5acdbc(0x234)],'filled':0x0});if(_0x23ce71==_0x5acdbc(0x2a6))logHistory(_0x5acdbc(0x207),''+_0x36fd8b+_0xe6b46f+'\x20order:\x20'+_0x7be7e2+'\x20'+_0x378b1f+'\x20#'+formatResult(_0x266c46,0x8)+'\x20@'+formatResult(_0x180c36,0x8));else logHistory('order',''+_0x36fd8b+_0xe6b46f+_0x5acdbc(0x220)+_0x7be7e2+'\x20'+_0x378b1f+'\x20#'+formatResult(_0x266c46,0x8)+'\x20@'+formatResult(_0x180c36,0x8));const _0x4ecbf1=await exchange[_0x5acdbc(0x268)](_0x7be7e2,_0x23ce71,_0x378b1f,_0x266c46,_0x180c36,{'clientOrderId':_0xd1d16a}),_0x493b81=lastOrders[_0x5acdbc(0x231)]-0x1;_0x493b81>=0x0&&lastOrders[_0x493b81][_0x5acdbc(0x251)]==_0xd1d16a&&(lastOrders[_0x493b81]={...lastOrders[_0x493b81],'orderId':_0x4ecbf1['id'],'amount':_0x4ecbf1['amount'],'price':_0x4ecbf1['price'],'fee':_0x4ecbf1['fee']});if(config['cooldown']!=0x0){let _0xd643dd=null;if(cooldownTracker[_0x5acdbc(0x231)]==config[_0x5acdbc(0x2c9)]-0x1)_0xd643dd=cooldownTracker[_0x5acdbc(0x2a9)]();const _0x25a39b=getTimeStamp();cooldownTracker['push'](_0x25a39b);if(_0xd643dd){const _0x564102=fns['differenceInSeconds'](new Date(_0x25a39b),new Date(_0xd643dd));if(_0x564102<cooldownInterval){logHistory(_0x5acdbc(0x1c8),'Executed\x20'+config[_0x5acdbc(0x2c9)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x5acdbc(0x18d)),coolingDown=!![];break;}}}}catch(_0x44ab95){if(_0x44ab95['toString']()[_0x5acdbc(0x291)](_0x5acdbc(0x21e)))lastOrders=lastOrders[_0x5acdbc(0x1f5)](_0x3c7962=>_0x3c7962[_0x5acdbc(0x27e)]!=_0x7be7e2),logHistory(_0x5acdbc(0x1c8),_0x5acdbc(0x1b1)+_0x7be7e2);else _0x44ab95['toString']()[_0x5acdbc(0x291)](_0x5acdbc(0x228))?(lastOrders=lastOrders[_0x5acdbc(0x1f5)](_0x13ae06=>_0x13ae06[_0x5acdbc(0x27e)]!=_0x7be7e2),logHistory('error',_0x5acdbc(0x2d7)+_0x7be7e2)):(lastOrders=lastOrders[_0x5acdbc(0x1f5)](_0x243e74=>_0x243e74['symbol']!=_0x7be7e2),await handleError(_0x44ab95,_0x5acdbc(0x1f7),_0x7be7e2));}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5acdbc(0x231)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x364881=config[_0x5acdbc(0x18f)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x5acdbc(0x22f)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xb52454=_0x5acdbc;validateOrders(_0xb52454(0x2c0));},_0x364881);}else unlockOrders();coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x5acdbc(0x1df),_0x5acdbc(0x226)));}else{if(coolingDown)!config[_0x5acdbc(0x23b)]&&logHistory(_0x5acdbc(0x1c8),_0x5acdbc(0x22a));else lockOrders!=ORDERS[_0x5acdbc(0x19b)]&&(!config[_0x5acdbc(0x23b)]&&(config[_0x5acdbc(0x18f)]==_0x5acdbc(0x2a6)?logHistory(_0x5acdbc(0x1c8),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x5acdbc(0x2a2))));}}function persistOpenOrders(_0x2eac7b){const _0x316f83=_0x2cb630,_0x380355={...config,'openOrders':_0x2eac7b};let _0x256655=dbConfig[_0x316f83(0x23f)]('bot')[_0x316f83(0x21c)]({'botID':botID})['value']();_0x256655&&dbConfig[_0x316f83(0x23f)](_0x316f83(0x1ea))['find']({'botID':botID})['assign'](_0x380355)[_0x316f83(0x2c3)]();}function restoreOrders(){const _0x51892c=_0x2cb630;let _0x7e4013;config['openOrders']&&allOpenOrders[_0x51892c(0x2ab)](_0x1560f6=>{const _0x485dba=_0x51892c,_0x25e716=config['openOrders'][_0x485dba(0x21c)](_0x53ee85=>_0x53ee85[_0x485dba(0x283)]==_0x1560f6['id']);_0x25e716&&(lastOrders[_0x485dba(0x272)](_0x25e716),_0x7e4013=_0x1560f6[_0x485dba(0x298)]);});if(lastOrders[_0x51892c(0x231)]>0x0){lockOrders=ORDERS[_0x51892c(0x254)],validateOrdersState=_0x51892c(0x257),allOrdersPlaced=!![];const _0x2ee5f0=new Date()['getTime'](),_0x320e44=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x51892c(0x22f)]*0x3c*0x3e8;if(_0x7e4013+_0x320e44>_0x2ee5f0){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x7e4013+_0x320e44-_0x2ee5f0);}else validateOrders(_0x51892c(0x2c0));}}async function sendPortfolioTelegram(){const _0xe39bd3=_0x2cb630;if(!coinsLoaded){process[_0xe39bd3(0x1c6)]({'telegrammsg':'Not\x20all\x20coin\x20data\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x44eb2e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());const _0x525aa3=[_0xe39bd3(0x1fe),_0xe39bd3(0x1e1),'BUSD',_0xe39bd3(0x1f8)],_0x3998a0=_0x525aa3[_0xe39bd3(0x291)](config['basecoin'])?0x2:0x8;let _0x4837ad='';if(config[_0xe39bd3(0x1bd)])_0x4837ad='<b>'+config[_0xe39bd3(0x20b)]+_0xe39bd3(0x200);else _0x4837ad=_0xe39bd3(0x19d)+botID+_0xe39bd3(0x200);const _0x50645f=getKPIs('basecoin'),_0x314940=getKPIs(_0xe39bd3(0x1fa));_0x4837ad+=_0xe39bd3(0x29f),_0x4837ad+=_0x50645f[_0xe39bd3(0x2c7)]+_0xe39bd3(0x2b6)+_0x50645f['value']+'\x20\x0a',_0x4837ad+=_0x50645f[_0xe39bd3(0x2c6)]+':\x20'+_0x50645f[_0xe39bd3(0x27d)]+_0xe39bd3(0x1c3),_0x4837ad+=_0x314940[_0xe39bd3(0x2c7)]+':\x20'+_0x314940[_0xe39bd3(0x29a)]+'\x20'+config[_0xe39bd3(0x1bb)]+'\x0a',_0x4837ad+=_0x314940['rightTxt']+':\x20'+_0x314940[_0xe39bd3(0x27d)]+_0xe39bd3(0x1c3),_0x4837ad+='\x0a',_0x4837ad+=_0xe39bd3(0x21a),_0x4837ad+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4837ad+='-------------------------------\x0a',currentCoins[_0xe39bd3(0x2ab)](_0x249fb3=>{const _0x14d987=_0xe39bd3;_0x4837ad+=_0x249fb3[_0x14d987(0x202)][_0x14d987(0x27a)](0x7)+'|\x20'+formatPad(_0x249fb3[_0x14d987(0x2d6)],0x2,0x6)+'|\x20'+formatPad(_0x249fb3[_0x14d987(0x245)],0x2,0x6)+'|\x20'+formatPad(_0x249fb3['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4837ad+=_0xe39bd3(0x196),process[_0xe39bd3(0x1c6)]({'telegrammsg':_0x4837ad},_0x111138=>{});}function formatPad(_0x1c42b1,_0x37d7bf,_0x42db46){const _0x357797=_0x2cb630,_0x21532d=formatResultString(_0x1c42b1,_0x37d7bf);return _0x21532d?_0x21532d[_0x357797(0x278)](_0x42db46):''[_0x357797(0x278)](_0x42db46);}function logHistory(_0x18f695,_0x1cf810,_0x1cc800=''){const _0xb802a9=_0x2cb630;let _0x46b73d={'time':getTimeStamp(),'type':_0x18f695,'event':_0x1cf810};dbLogs[_0xb802a9(0x23f)](_0xb802a9(0x25f))[_0xb802a9(0x272)](_0x46b73d)[_0xb802a9(0x2c3)]();if(_0x1cc800=='')_0x1cc800=_0x1cf810;proxyEmit('event',{'log':_0x46b73d,'summary':_0x1cc800}),process[_0xb802a9(0x1c6)]({'telegram':{..._0x46b73d,'botname':config[_0xb802a9(0x20b)],'showname':config[_0xb802a9(0x1bd)]}},_0x6bf0b1=>{}),logger[_0xb802a9(0x2b8)](''+_0x46b73d[_0xb802a9(0x2c2)]);}function emitHistory(_0x4c1534={}){const _0xdee542=_0x2cb630;Object[_0xdee542(0x219)](_0x4c1534)[_0xdee542(0x231)]==0x0&&(_0x4c1534={'type':[_0xdee542(0x207),_0xdee542(0x2c2)],'event':'','page':0x1});if(_0x4c1534[_0xdee542(0x23d)][_0xdee542(0x291)](_0xdee542(0x2c2)))_0x4c1534[_0xdee542(0x23d)][_0xdee542(0x250)](_0x4c1534[_0xdee542(0x23d)][_0xdee542(0x1ce)](_0xdee542(0x2c2)),0x1,_0xdee542(0x1c8),'success');if(dbLogs[_0xdee542(0x1e2)](_0xdee542(0x25f))[_0xdee542(0x29a)]()){let _0x293700=dbLogs[_0xdee542(0x23f)](_0xdee542(0x25f))[_0xdee542(0x1f5)](_0x5aadce=>{const _0x1dec37=_0xdee542;if(_0x4c1534[_0x1dec37(0x23d)]['length']==0x0)return![];else return _0x4c1534['type'][_0x1dec37(0x291)](_0x5aadce['type']);})[_0xdee542(0x1f5)](_0x383744=>{const _0x4ab8e2=_0xdee542;if(_0x4c1534['event']=='')return!![];else return _0x383744[_0x4ab8e2(0x2c2)][_0x4ab8e2(0x217)]()[_0x4ab8e2(0x291)](_0x4c1534[_0x4ab8e2(0x2c2)][_0x4ab8e2(0x217)]());})['sortBy']('time'),_0xce869a=_0x293700['value']()[_0xdee542(0x231)];_0x293700=_0x293700['reverse']()['slice']((_0x4c1534[_0xdee542(0x296)]-0x1)*logPageSize,_0x4c1534[_0xdee542(0x296)]*logPageSize-0x1)[_0xdee542(0x234)]()['value'](),proxyEmit('event-history',{'logs':_0x293700,'total':_0xce869a});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xf78fcb){const _0x9bd7af=_0x2cb630;if(dbLogs['has']('logs')['value']()){const _0x377274=dbLogs[_0x9bd7af(0x23f)]('logs')['sortBy']('time')[_0x9bd7af(0x1f5)](_0x440583=>{const _0x4d5ecf=_0x9bd7af;return _0x440583['type']==_0x4d5ecf(0x207);})[_0x9bd7af(0x29a)]();dbLogs[_0x9bd7af(0x23f)](_0x9bd7af(0x25f))[_0x9bd7af(0x2d9)]()[_0x9bd7af(0x2c3)](),dbLogs[_0x9bd7af(0x23f)](_0x9bd7af(0x25f))['assign'](_0x377274)[_0x9bd7af(0x2c3)](),emitHistory(_0xf78fcb);}}async function pauseBot(_0x50e73b=''){const _0x473153=_0x2cb630,_0x3d4cdb=new Date()[_0x473153(0x260)]();if(!lastErrorShown||_0x3d4cdb-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3d4cdb;!lastBotPause?(lastBotPause=_0x3d4cdb,consecutivePauses=0x1):(_0x3d4cdb-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x473153(0x1c6)]({'stop':'restart'},_0x18e8c7=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x473153(0x260)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x50e73b)_0x50e73b+=_0x473153(0x225);logHistory(_0x473153(0x1c8),_0x50e73b+'Pausing\x20for\x20'+pauseBotInterval/0xea60+_0x473153(0x191)),await sleep(pauseBotInterval),botPaused=![],reset();}}}async function killBot(){const _0x2856ef=_0x2cb630;process[_0x2856ef(0x1c6)]({'stop':_0x2856ef(0x1e0)},_0x12c57d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x193762,_0x4d36f6){const _0x4a7b50=_0x2cb630;if(_0x193762['toString']()[_0x4a7b50(0x291)](_0x4a7b50(0x211)))return logHistory(_0x4a7b50(0x1c8),config[_0x4a7b50(0x238)]+'\x20API\x20key\x20is\x20invalid'),![];else{if(_0x193762['toString']()['includes'](_0x4a7b50(0x1d9)))return logHistory(_0x4a7b50(0x1c8),config[_0x4a7b50(0x238)]+'\x20API\x20secret\x20is\x20invalid'),![];else{if(_0x193762['toString']()['includes'](_0x4a7b50(0x2d1)))return logHistory(_0x4a7b50(0x1c8),config[_0x4a7b50(0x238)]+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20'+config['exchange']),![];else await handleError(_0x193762,_0x4d36f6);}}}async function handleError(_0x4ab88d,_0x21aa18,_0x1e609d=''){const _0x46f019=_0x2cb630;if(_0x4ab88d[_0x46f019(0x246)]()[_0x46f019(0x291)](_0x46f019(0x1de)))await pauseBot(config[_0x46f019(0x238)]+_0x46f019(0x292));else{if(_0x4ab88d['toString']()['includes']('ExchangeNotAvailable'))await pauseBot(config[_0x46f019(0x238)]+_0x46f019(0x229));else{if(_0x4ab88d['toString']()['includes'](_0x46f019(0x193)))await pauseBot(config[_0x46f019(0x238)]+_0x46f019(0x29e));else{if(_0x4ab88d['toString']()[_0x46f019(0x291)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x46f019(0x1c8),_0x21aa18+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x46f019(0x1dc)),await killBot();else{if(_0x4ab88d['toString']()[_0x46f019(0x291)](_0x46f019(0x275)))logHistory(_0x46f019(0x1c8),_0x21aa18+_0x46f019(0x22d)),logHistory(_0x46f019(0x1c8),_0x46f019(0x1dc)),await killBot();else{if(_0x4ab88d['toString']()['includes']('API-key\x20format\x20invalid'))logHistory(_0x46f019(0x1c8),_0x21aa18+_0x46f019(0x225)+config[_0x46f019(0x238)]+_0x46f019(0x19c)),logHistory(_0x46f019(0x1c8),_0x46f019(0x1dc)),await killBot();else{if(_0x4ab88d[_0x46f019(0x246)]()[_0x46f019(0x291)](_0x46f019(0x1d9)))logHistory(_0x46f019(0x1c8),_0x21aa18+_0x46f019(0x225)+config[_0x46f019(0x238)]+_0x46f019(0x221)),logHistory(_0x46f019(0x1c8),_0x46f019(0x1dc)),await killBot();else{if(_0x4ab88d[_0x46f019(0x246)]()['includes'](_0x46f019(0x2d1)))logHistory(_0x46f019(0x1c8),_0x21aa18+_0x46f019(0x225)+config[_0x46f019(0x238)]+_0x46f019(0x18e)+config[_0x46f019(0x238)]),logHistory(_0x46f019(0x1c8),_0x46f019(0x1dc)),await killBot();else _0x4ab88d[_0x46f019(0x246)]()[_0x46f019(0x291)](_0x46f019(0x26f))?logHistory(_0x46f019(0x1c8),_0x21aa18+_0x46f019(0x2ba)+_0x1e609d):(logger[_0x46f019(0x2b8)](_0x21aa18+_0x46f019(0x20f),_0x4ab88d),await pauseBot(_0x46f019(0x267)));}}}}}}}}function formatResult(_0x3b520f,_0x15d45d){const _0x5ed245=_0x2cb630;return parseFloat(_0x3b520f[_0x5ed245(0x1d6)](_0x15d45d));}function formatResultTruncate(_0xb3cb10,_0x5da668){const _0x264e99=_0x2cb630;let _0x121f6a=formatResultString(_0xb3cb10,0xa),_0x3d1973=_0x121f6a[_0x264e99(0x1ce)]('.');return _0x3d1973!=-0x1&&(_0x121f6a=_0x121f6a[_0x264e99(0x18a)](0x0,_0x3d1973+_0x5da668+0x1)),Number(_0x121f6a);}function formatResultString(_0x33f3b0,_0x5850c6){const _0xd0f264=_0x2cb630;let _0x5207f8;if(!(''+_0x33f3b0)[_0xd0f264(0x291)]('e'))_0x5207f8=+(Math[_0xd0f264(0x199)](_0x33f3b0+'e+'+_0x5850c6)+'e-'+_0x5850c6);else{let _0x2b40cc=(''+_0x33f3b0)[_0xd0f264(0x24b)]('e'),_0x50ca61='';+_0x2b40cc[0x1]+_0x5850c6>0x0&&(_0x50ca61='+'),_0x5207f8=+(Math[_0xd0f264(0x199)](+_0x2b40cc[0x0]+'e'+_0x50ca61+(+_0x2b40cc[0x1]+_0x5850c6))+'e-'+_0x5850c6);}return Number(_0x5207f8)[_0xd0f264(0x1d6)](_0x5850c6);}function getServerTime(){const _0x22a977=_0x2cb630,_0x59a000=new Date();return _0x59a000[_0x22a977(0x232)]()+'/'+(_0x59a000['getMonth']()+0x1)[_0x22a977(0x246)]()[_0x22a977(0x278)](0x2,'0')+'/'+_0x59a000[_0x22a977(0x224)]()[_0x22a977(0x246)]()[_0x22a977(0x278)](0x2,'0')+'\x20'+_0x59a000[_0x22a977(0x1c2)]()[_0x22a977(0x246)]()[_0x22a977(0x278)](0x2,'0')+':'+_0x59a000[_0x22a977(0x294)]()['toString']()[_0x22a977(0x278)](0x2,'0')+':'+_0x59a000[_0x22a977(0x1b2)]()[_0x22a977(0x246)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x18e50c=_0x2cb630,_0x14b6d5=shiftedTime();return _0x14b6d5[_0x18e50c(0x232)]()+'/'+(_0x14b6d5['getMonth']()+0x1)[_0x18e50c(0x246)]()[_0x18e50c(0x278)](0x2,'0')+'/'+_0x14b6d5[_0x18e50c(0x224)]()['toString']()[_0x18e50c(0x278)](0x2,'0')+'\x20'+_0x14b6d5['getHours']()['toString']()[_0x18e50c(0x278)](0x2,'0')+':'+_0x14b6d5['getMinutes']()[_0x18e50c(0x246)]()[_0x18e50c(0x278)](0x2,'0')+':'+_0x14b6d5[_0x18e50c(0x1b2)]()[_0x18e50c(0x246)]()[_0x18e50c(0x278)](0x2,'0');}function getDate(){const _0x334485=_0x2cb630,_0x298d56=shiftedTime();return _0x298d56[_0x334485(0x232)]()+'/'+(_0x298d56[_0x334485(0x1cc)]()+0x1)[_0x334485(0x246)]()[_0x334485(0x278)](0x2,'0')+'/'+_0x298d56['getDate']()['toString']()[_0x334485(0x278)](0x2,'0');}function getHour(){const _0x3b719b=_0x2cb630,_0x4af638=shiftedTime();return _0x4af638['getHours']()[_0x3b719b(0x246)]()[_0x3b719b(0x278)](0x2,'0');}function sleep(_0x3ee638){return new Promise(_0x28496c=>setTimeout(_0x28496c,_0x3ee638));}function shiftedTime(){const _0x45e981=_0x2cb630,_0x2b89f9=new Date();let _0x3e0823=_0x2b89f9;if(config&&config['timeshift']!==0x0)_0x3e0823=fns[_0x45e981(0x281)](_0x2b89f9,{'hours':config[_0x45e981(0x2a4)]});return _0x3e0823;}function timer(_0x23f459){const _0x485f32=_0x2cb630,_0x10adc1=new Date();!lasttime?console[_0x485f32(0x1fb)](_0x485f32(0x20e),_0x23f459,_0x10adc1):console['log'](_0x485f32(0x20e),_0x23f459,(_0x10adc1-lasttime)/0x3e8),lasttime=_0x10adc1;}