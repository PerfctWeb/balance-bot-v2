const _0x3df64e=_0x1b89;(function(_0x38073b,_0x5c6d48){const _0xf5edc9=_0x1b89,_0x327379=_0x38073b();while(!![]){try{const _0x4e367d=-parseInt(_0xf5edc9(0x22e))/0x1+parseInt(_0xf5edc9(0x25e))/0x2+parseInt(_0xf5edc9(0x2ba))/0x3+parseInt(_0xf5edc9(0x25f))/0x4*(-parseInt(_0xf5edc9(0x21c))/0x5)+-parseInt(_0xf5edc9(0x2a6))/0x6*(-parseInt(_0xf5edc9(0x245))/0x7)+parseInt(_0xf5edc9(0x2e2))/0x8+parseInt(_0xf5edc9(0x24b))/0x9;if(_0x4e367d===_0x5c6d48)break;else _0x327379['push'](_0x327379['shift']());}catch(_0x2a01af){_0x327379['push'](_0x327379['shift']());}}}(_0x370d,0x473e9));const _0x414e45=function(){let _0x5bd863=!![];return function(_0x348694,_0x5abe2e){const _0x5be5b3=_0x5bd863?function(){const _0x1d4198=_0x1b89;if(_0x5abe2e){const _0x24b12f=_0x5abe2e[_0x1d4198(0x23d)](_0x348694,arguments);return _0x5abe2e=null,_0x24b12f;}}:function(){};return _0x5bd863=![],_0x5be5b3;};}(),_0x3744b9=_0x414e45(this,function(){const _0x8ba517=_0x1b89;return _0x3744b9['toString']()['search'](_0x8ba517(0x295))[_0x8ba517(0x23a)]()[_0x8ba517(0x167)](_0x3744b9)['search'](_0x8ba517(0x295));});_0x3744b9();'use strict';const ccxt=require(_0x3df64e(0x19e)),low=require(_0x3df64e(0x22a)),FileSync=require(_0x3df64e(0x2d7)),fs=require('fs'),fns=require(_0x3df64e(0x243)),Crypt=require('hybrid-crypto-js')['Crypt'],util=require('util'),argv=require(_0x3df64e(0x22b))(process['argv'][_0x3df64e(0x1e2)](0x2))['argv'],path=require(_0x3df64e(0x294));let exchange;global[_0x3df64e(0x1de)]={},global['change']={};const usdBasecoins=[_0x3df64e(0x227),_0x3df64e(0x27e),_0x3df64e(0x208),'USDT',_0x3df64e(0x2df),_0x3df64e(0x2b3)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3df64e(0x289)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3df64e(0x18e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3df64e(0x20d)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x3df64e(0x27f)],botID=process[_0x3df64e(0x2eb)][0x2]||_0x3df64e(0x235),pattern=/^[0-9]{3}$/;!pattern[_0x3df64e(0x29e)](botID)&&(console['log'](_0x3df64e(0x257)+botID+_0x3df64e(0x189)),killBot());const userID=process[_0x3df64e(0x2eb)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x3df64e(0x281),logspath=userID?_0x3df64e(0x2a1)+userID+'/':'./logs/',loggerfile=fs[_0x3df64e(0x204)](logspath+_0x3df64e(0x179),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x3df64e(0x241)](configpath);!fs[_0x3df64e(0x27a)](logspath)&&fs[_0x3df64e(0x241)](logspath);const configfile=configpath+_0x3df64e(0x15c)+botID+_0x3df64e(0x201),logfile=configpath+_0x3df64e(0x15c)+botID+'-events.json',performancefile=configpath+_0x3df64e(0x15c)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x3df64e(0x2bc),settingsfile=configpath+_0x3df64e(0x2e7),securefile=configpath+_0x3df64e(0x1d0),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x3df64e(0x161)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3df64e(0x290)]({'data':[],'version':serverversion})[_0x3df64e(0x161)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x3df64e(0x161)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3df64e(0x290)]({'coins':[],'version':serverversion})[_0x3df64e(0x161)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3df64e(0x191),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x204c02=>{const _0x2db617=_0x3df64e;console[_0x2db617(0x2bf)](_0x204c02);},'simple':_0x2df995=>{const _0x15a61a=_0x3df64e;console[_0x15a61a(0x2bf)](_0x2df995),loggerfile[_0x15a61a(0x161)](util[_0x15a61a(0x2e5)](_0x2df995)+'\x0a');},'full':async(_0x2f92ce,_0x1a32c5='')=>{const _0xae87b7=_0x3df64e;let _0x5668f9;if(config[_0xae87b7(0x1bd)])_0x5668f9=getTimeStamp()+':\x20'+config[_0xae87b7(0x187)]+_0xae87b7(0x246)+_0x2f92ce;else _0x5668f9=getTimeStamp()+_0xae87b7(0x190)+botID+_0xae87b7(0x246)+_0x2f92ce;console[_0xae87b7(0x2bf)](_0x5668f9),loggerfile[_0xae87b7(0x161)](util['format'](_0x5668f9)+'\x0a'),_0x1a32c5&&(console[_0xae87b7(0x2bf)](_0x1a32c5),loggerfile['write'](util[_0xae87b7(0x2e5)](_0x1a32c5)+'\x0a'));},'debug':async(_0x46bd4f,_0x4cccd3='')=>{const _0x3a2807=_0x3df64e;let _0x2a4db1;if(config[_0x3a2807(0x1bd)])_0x2a4db1=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20[DEBUG]\x20'+_0x46bd4f;else _0x2a4db1=getTimeStamp()+_0x3a2807(0x190)+botID+_0x3a2807(0x233)+_0x46bd4f;if(debugging)console['log'](_0x2a4db1);loggerfile[_0x3a2807(0x161)](util[_0x3a2807(0x2e5)](_0x2a4db1)+'\x0a');if(_0x4cccd3){if(debugging)console['log'](_0x4cccd3);loggerfile[_0x3a2807(0x161)](util['format'](_0x4cccd3)+'\x0a');}}};process['on'](_0x3df64e(0x2ef),function(_0x58f507){const _0x1463d4=_0x3df64e;logHistory(_0x1463d4(0x207),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger['debug']('Uncaught\x20Exception:',_0x58f507);});settings['timeshift']!=config[_0x3df64e(0x1a9)]&&updateTimeshift(settings[_0x3df64e(0x1a9)]);settings[_0x3df64e(0x26b)]!=config[_0x3df64e(0x26b)]&&updateOnepagemode(settings['onepagemode']);process[_0x3df64e(0x1ff)]({'started':'running'},_0x5c523a=>{}),initializeProcessListeners();function proxyEmit(_0x2e6494,_0x4dd053=null){process['send']({'function':_0x2e6494,'args':_0x4dd053},_0x2ab2de=>{});}function initializeProcessListeners(){const _0x515779=_0x3df64e;process['on'](_0x515779(0x2c4),_0x5af356=>{const _0x3e581b=_0x515779;switch(Object[_0x3e581b(0x196)](_0x5af356)[0x0]){case _0x3e581b(0x1a9):_0x5af356['timeshift']!=undefined&&(settings[_0x3e581b(0x1a9)]=_0x5af356[_0x3e581b(0x1a9)],updateTimeshift(settings[_0x3e581b(0x1a9)]));break;case'onepagemode':_0x5af356[_0x3e581b(0x26b)]!=undefined&&(settings[_0x3e581b(0x26b)]=_0x5af356[_0x3e581b(0x26b)],updateOnepagemode(settings[_0x3e581b(0x26b)]));break;case _0x3e581b(0x28f):_0x5af356[_0x3e581b(0x28f)]!=undefined&&(bots=JSON[_0x3e581b(0x237)](_0x5af356['bots']),proxyEmit(_0x3e581b(0x28f),bots));break;case'function':switch(_0x5af356[_0x3e581b(0x203)]){case _0x3e581b(0x29c):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x5af356['args']);break;case _0x3e581b(0x21e):deleteHistoryAlerts(_0x5af356[_0x3e581b(0x1f6)]);break;case _0x3e581b(0x2a7):getPortfolio(_0x5af356[_0x3e581b(0x1f6)]);break;case _0x3e581b(0x280):storeConfiguration(_0x5af356[_0x3e581b(0x1f6)]);break;case _0x3e581b(0x230):storeHeadless(_0x5af356[_0x3e581b(0x1f6)]);break;case _0x3e581b(0x1ee):storeFiat(_0x5af356[_0x3e581b(0x1f6)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x3e581b(0x180):placeOrder(_0x5af356[_0x3e581b(0x1f6)]);break;case'cancelLoading':cancelLoading();break;case _0x3e581b(0x2b4):showConfig();break;case _0x3e581b(0x273):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x6a3ddf=null,_0x28ee40=![]){const _0xacd8d3=_0x3df64e;logger[_0xacd8d3(0x2dc)]('Reset\x20|\x20'+(_0x6a3ddf&&_0x6a3ddf[_0xacd8d3(0x19c)]>0x0?'additional\x20symbols\x20'+_0x6a3ddf[_0xacd8d3(0x1b7)](','):'no\x20additional\x20symbols')+'\x20|\x20'+(_0x28ee40?_0xacd8d3(0x1d1):'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0xacd8d3(0x2b1)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x28ee40)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xacd8d3(0x1da)]!=''&&config[_0xacd8d3(0x1da)]!=_0xacd8d3(0x1ec)){loadingProgress=0x0;if(_0x28ee40){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2689f0){handleErrorNoStop(_0x2689f0,_0xacd8d3(0x172));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x6a3ddf);const _0x2ffa4e=await getCoins();[currentCoins,currentCoinsAll]=_0x2ffa4e,loadingProgress=maxLoadingProgress,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0xacd8d3(0x216)](_0xacd8d3(0x239)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xacd8d3(0x19c)]==0x0&&allOpenOrders[_0xacd8d3(0x19c)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![];try{await exchange['close']();}catch(_0x4d7ac0){await handleError(_0x4d7ac0,'stopExchange()');}}async function reloadExchange(){const _0x4f73f0=_0x3df64e;logger['debug'](_0x4f73f0(0x1f5));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x4f73f0(0x2dc)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4bf860=config[_0x3df64e(0x2b1)],_0x317756=config[_0x3df64e(0x1da)],_0x59cd6a=config['apiSecret'],_0x49e747=config['apiPassword']){const _0x52bc3a=_0x3df64e;exchange&&await stopExchange();!supportedExchanges()[_0x52bc3a(0x2de)](_0x4bf860)&&(logHistory(_0x52bc3a(0x207),_0x52bc3a(0x236)+_0x4bf860+'\x20exchange'),killBot());const _0x12bbcf=ccxt[_0x52bc3a(0x258)][_0x4bf860['toLowerCase']()];exchange=new _0x12bbcf({'apiKey':_0x317756,'secret':_0x59cd6a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x52bc3a(0x186)}});if(_0x49e747)exchange[_0x52bc3a(0x2d0)]=_0x49e747;}function setStableCoins(){const _0x13d5a7=_0x3df64e;let _0x5c138c=config[_0x13d5a7(0x29f)]==_0x13d5a7(0x18a)?'ETH':_0x13d5a7(0x1b8),_0x147386=!allSymbols['includes'](_0x5c138c+'/USD')?_0x13d5a7(0x2c3):_0x13d5a7(0x227),_0x39cb03=!allSymbols[_0x13d5a7(0x2de)](_0x5c138c+'/EUR')?_0x147386:_0x13d5a7(0x283);stablecoins={'eur':{'coin':''+_0x5c138c+_0x39cb03,'symbol':_0x5c138c+'/'+_0x39cb03},'usd':{'coin':''+_0x5c138c+_0x147386,'symbol':_0x5c138c+'/'+_0x147386}};}async function initwsCcxt(_0x220ab9){const _0x5e8a1e=_0x3df64e;_0x220ab9==null&&(_0x220ab9=[],config[_0x5e8a1e(0x1ef)]['forEach'](_0x5f7c7=>{const _0x2cdec5=_0x5e8a1e;if(!_0x5f7c7[_0x2cdec5(0x23c)]&&_0x5f7c7[_0x2cdec5(0x256)]!=config[_0x2cdec5(0x29f)])_0x220ab9[_0x2cdec5(0x1fe)](_0x5f7c7[_0x2cdec5(0x162)]);}));if(!_0x220ab9[_0x5e8a1e(0x2de)](stablecoins[_0x5e8a1e(0x292)][_0x5e8a1e(0x162)]))_0x220ab9[_0x5e8a1e(0x1fe)](stablecoins[_0x5e8a1e(0x292)][_0x5e8a1e(0x162)]);if(!_0x220ab9[_0x5e8a1e(0x2de)](stablecoins[_0x5e8a1e(0x1c6)]['symbol']))_0x220ab9[_0x5e8a1e(0x1fe)](stablecoins[_0x5e8a1e(0x1c6)][_0x5e8a1e(0x162)]);if(config['exchange']['startsWith']('Binance')){if(!_0x220ab9[_0x5e8a1e(0x2de)]('BNB/'+config['basecoin']))_0x220ab9[_0x5e8a1e(0x1fe)](_0x5e8a1e(0x265)+config[_0x5e8a1e(0x29f)]);}loadCoins(_0x220ab9),_0x220ab9=validateSymbols(_0x220ab9);const _0x190ce1=async _0x475bbd=>{const _0x3791f2=_0x5e8a1e;let _0x3bde14;try{const _0x29f5d6=await exchange[_0x3791f2(0x2da)](_0x475bbd);Object[_0x3791f2(0x244)](_0x29f5d6)[_0x3791f2(0x1a6)](_0x4d650a=>{const _0x3be3b3=_0x3791f2;_0x3bde14=_0x4d650a[0x1][_0x3be3b3(0x162)],global[_0x3be3b3(0x1de)][noslash(_0x3bde14)]=_0x4d650a[0x1][_0x3be3b3(0x1b6)];});}catch(_0x4f7a8c){await handleError(_0x4f7a8c,_0x3791f2(0x272),_0x3bde14);}},_0x19d156=async _0x5365ae=>{const _0xf300c2=_0x5e8a1e;while(!![]){if(!botPaused)try{const _0x3ee926=await exchange[_0xf300c2(0x219)](_0x5365ae);global[_0xf300c2(0x1de)][noslash(_0x3ee926[0x0][_0xf300c2(0x162)])]=_0x3ee926[0x0][_0xf300c2(0x176)],await sleep(0x3e8);}catch(_0x122abd){if(!exchangeStopped)await handleError(_0x122abd,_0xf300c2(0x253),_0x5365ae);}else await sleep(0x64);}},_0x44bcb5=async _0x5b0551=>{const _0x2b54ef=_0x5e8a1e;while(!![]){if(!botPaused)try{const _0x5a80c3=await exchange[_0x2b54ef(0x221)](_0x5b0551);global[_0x2b54ef(0x2cd)][_0x5a80c3[_0x2b54ef(0x162)]]=_0x5a80c3[_0x2b54ef(0x18c)],await sleep(0x3c*0x3e8);}catch(_0x4cc25a){if(!exchangeStopped)await handleError(_0x4cc25a,_0x2b54ef(0x1d4),_0x5b0551);}else await sleep(0x64);}},_0x18d0e9=async _0x33e14b=>{const _0x30b088=_0x5e8a1e;while(!![]){if(!botPaused)try{const _0x418e83=await exchange[_0x30b088(0x1c4)](_0x33e14b);_0x418e83[_0x30b088(0x1a6)](_0xbe9f23=>{updateNumberCoinsCcxt(_0xbe9f23);});}catch(_0x1c311d){if(!exchangeStopped)await handleError(_0x1c311d,'watchOrders()');}else await sleep(0x64);}};_0x190ce1(_0x220ab9),_0x220ab9['forEach'](_0x495d0a=>{_0x19d156(_0x495d0a),_0x44bcb5(_0x495d0a),_0x18d0e9(_0x495d0a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x3145fd=_0x3df64e;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5756c0=await getCoins(),[_0x4301f8,_0x4ad6ea]=_0x5756c0;let _0x526dd1=[];currentCoins[_0x3145fd(0x1a6)](_0x118222=>{const _0x1ce59e=_0x3145fd,_0x27c568=_0x4301f8[_0x1ce59e(0x27b)](_0x212f96=>_0x212f96[_0x1ce59e(0x256)]==_0x118222[_0x1ce59e(0x256)]);if(_0x27c568){if(_0x118222[_0x1ce59e(0x22d)]!=_0x27c568[_0x1ce59e(0x22d)]){let _0x3c931f;if(_0x118222[_0x1ce59e(0x256)]!=config[_0x1ce59e(0x29f)]){const _0x18f57b=global[_0x1ce59e(0x1de)][noslash(_0x118222[_0x1ce59e(0x162)])];_0x3c931f=_0x118222[_0x1ce59e(0x225)]?0x1/_0x18f57b:_0x18f57b;}else _0x3c931f=0x1;_0x526dd1[_0x1ce59e(0x1fe)]({'coin':_0x118222[_0x1ce59e(0x256)],'symbol':_0x118222[_0x1ce59e(0x162)],'price':_0x3c931f,'number':Number(formatResult(_0x27c568[_0x1ce59e(0x22d)]-_0x118222[_0x1ce59e(0x22d)],0x8)),'basecoinvalue':_0x3c931f*(_0x27c568[_0x1ce59e(0x22d)]-_0x118222['number'])});}}});if(_0x526dd1[_0x3145fd(0x19c)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x3145fd(0x2dc)](_0x3145fd(0x1e0)+_0x526dd1[0x0]['basecoinvalue']+_0x3145fd(0x2ce)+lastFees[_0x3145fd(0x18d)]);if(lastFees[_0x3145fd(0x18d)]==0x0||Math[_0x3145fd(0x2d1)](_0x526dd1[0x0][_0x3145fd(0x1a7)])>lastFees[_0x3145fd(0x18d)]){delete _0x526dd1[0x0]['symbol'],delete _0x526dd1[0x0][_0x3145fd(0x1a7)];let _0x3a7fac=[],_0x480260=[...config[_0x3145fd(0x165)]]||[],_0x73dcf9=config['liquidity'];_0x480260[_0x3145fd(0x1bb)]((_0x3f4d9a,_0x1e04c7)=>_0x3f4d9a[_0x3145fd(0x1f9)]>_0x1e04c7[_0x3145fd(0x1f9)]?-0x1:_0x1e04c7[_0x3145fd(0x1f9)]>_0x3f4d9a[_0x3145fd(0x1f9)]?0x1:0x0);const _0x4bf719=getDate();if(_0x480260[0x0]){const _0x2ef731=fns[_0x3145fd(0x237)](_0x480260[0x0]['date'],'yyyy/MM/dd',new Date()),_0x35d1ee=fns[_0x3145fd(0x237)](_0x4bf719,_0x3145fd(0x1b2),new Date());if(fns[_0x3145fd(0x18f)](_0x2ef731,_0x35d1ee)){_0x3a7fac=_0x480260[0x0][_0x3145fd(0x170)];const _0x5727bc=_0x3a7fac[_0x3145fd(0x27b)](_0x1e560a=>_0x1e560a[_0x3145fd(0x256)]==_0x526dd1[0x0][_0x3145fd(0x256)]);_0x5727bc?(_0x5727bc[_0x3145fd(0x22d)]+=_0x526dd1[0x0][_0x3145fd(0x22d)],_0x5727bc[_0x3145fd(0x22d)]==0x0&&(_0x3a7fac=_0x3a7fac[_0x3145fd(0x1dc)](_0x40ba1d=>{const _0x39c800=_0x3145fd;return _0x40ba1d['coin']!=_0x526dd1[0x0][_0x39c800(0x256)];}))):_0x3a7fac['push'](_0x526dd1[0x0]);const _0x5a1984=_0x73dcf9['find'](_0x275787=>_0x275787['date']==_0x4bf719);_0x5a1984[_0x3145fd(0x170)]=_0x3a7fac;}else _0x73dcf9[_0x3145fd(0x1fe)]({'date':_0x4bf719,'changes':[_0x526dd1[0x0]]});}const _0x21c338=_0x73dcf9[_0x3145fd(0x27b)](_0x48f6c9=>_0x48f6c9['date']==_0x4bf719);if(_0x21c338){let _0x1d2402=!![];_0x21c338[_0x3145fd(0x170)]['forEach'](_0x5f2c78=>{const _0x5a5c2b=_0x3145fd;if(_0x5f2c78[_0x5a5c2b(0x22d)]!=0x0)_0x1d2402=![];}),_0x1d2402&&(_0x73dcf9=_0x73dcf9[_0x3145fd(0x1dc)](_0x194dc7=>{const _0x626578=_0x3145fd;return _0x194dc7[_0x626578(0x1f9)]!=_0x4bf719;}));}let _0x136a63=dbConfig['get'](_0x3145fd(0x1f3))[_0x3145fd(0x27b)]({'botID':botID})[_0x3145fd(0x2cc)]();_0x136a63&&(dbConfig[_0x3145fd(0x1e1)](_0x3145fd(0x1f3))[_0x3145fd(0x27b)]({'botID':botID})[_0x3145fd(0x2ad)]({'liquidity':_0x73dcf9})[_0x3145fd(0x161)](),config[_0x3145fd(0x165)]=_0x73dcf9),logHistory(_0x3145fd(0x1dd),_0x3145fd(0x1e6)+Math['abs'](_0x526dd1[0x0][_0x3145fd(0x22d)])+'\x20'+_0x526dd1[0x0][_0x3145fd(0x256)]+'\x20'+(_0x526dd1[0x0][_0x3145fd(0x22d)]>0x0?_0x3145fd(0x2e1):'removed')+_0x3145fd(0x2dd)),proxyEmit('configuration',emittedConfiguration());}else logger['debug'](_0x3145fd(0x26f)+Math[_0x3145fd(0x2d1)](_0x526dd1[0x0][_0x3145fd(0x22d)])+'\x20'+_0x526dd1[0x0][_0x3145fd(0x256)]+'\x20'+(_0x526dd1[0x0][_0x3145fd(0x22d)]>0x0?_0x3145fd(0x2e1):_0x3145fd(0x1ae)));transactionDetected=!![],currentCoins=_0x4301f8,currentCoinsAll=_0x4ad6ea;}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x3145fd(0x2d1)](_0x526dd1[0x0]['number'])+'\x20'+_0x526dd1[0x0]['coin']+'\x20'+(_0x526dd1[0x0][_0x3145fd(0x22d)]>0x0?_0x3145fd(0x2e1):_0x3145fd(0x1ae))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x4301f8,currentCoinsAll=_0x4ad6ea;}await sleep(watchTransactionsInterval);}catch(_0x5a2ea1){if(!exchangeStopped)await handleError(_0x5a2ea1,_0x3145fd(0x199));}else await sleep(0x64);}}async function loadSymbols(){const _0x1c0be4=_0x3df64e;try{markets=await exchange[_0x1c0be4(0x1c2)](),allSymbols=[],Object[_0x1c0be4(0x244)](markets)[_0x1c0be4(0x1a6)](_0xa2269b=>{const _0x3da62a=_0x1c0be4;_0xa2269b[0x1][_0x3da62a(0x18b)]&&_0xa2269b[0x1]['spot']&&allSymbols[_0x3da62a(0x1fe)](_0xa2269b[0x0]);});}catch(_0x4b9664){throw _0x4b9664;}}function validateSymbols(_0x288873){const _0x32f43e=_0x3df64e;let _0x46ead2=[];return _0x288873[_0x32f43e(0x1a6)](_0x3f178e=>{const _0x53d5de=_0x32f43e;!allSymbols['includes'](_0x3f178e)?logHistory(_0x53d5de(0x207),_0x53d5de(0x279)+_0x3f178e+_0x53d5de(0x2d9)):_0x46ead2[_0x53d5de(0x1fe)](_0x3f178e);}),_0x46ead2;}async function initclient(){const _0x5f24bf=_0x3df64e;proxyEmit(_0x5f24bf(0x1a2),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5f24bf(0x1d8),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3ea415=getNormalizedPerformance();emitPerformance(_0x3ea415),getStartingBalances(_0x3ea415);}async function toggleBotMode(){const _0x134720=_0x3df64e;let _0x26e0ee=dbConfig[_0x134720(0x1e1)](_0x134720(0x1f3))['find']({'botID':botID})['value']();if(_0x26e0ee){const _0x1f8766=!_0x26e0ee[_0x134720(0x2c1)];dbConfig[_0x134720(0x1e1)](_0x134720(0x1f3))['find']({'botID':botID})[_0x134720(0x2ad)]({'headless':_0x1f8766})[_0x134720(0x161)](),config[_0x134720(0x2c1)]=_0x1f8766,proxyEmit(_0x134720(0x1a2),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x39eec0=_0x3df64e;process[_0x39eec0(0x1ff)]({'updatebotmanager':!![]},_0x30a797=>{});}async function loadCoins(_0x9077db){const _0x488bb8=_0x3df64e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3541fd,_0x5572a2=0x0,_0x345a91=0x0;_0x9077db[_0x488bb8(0x1a6)](_0x584d81=>{const _0x2d79a6=_0x488bb8;loading[_0x2d79a6(0x223)][_0x2d79a6(0x1fe)](_0x584d81);}),loadingCanceled=![];let _0x5baca0=![];while(_0x3541fd!=_0x9077db[_0x488bb8(0x19c)]+maxLoadingProgress){_0x3541fd=loadingProgress,_0x9077db[_0x488bb8(0x1a6)](_0xf22411=>{const _0x1b1d90=_0x488bb8;if(global[_0x1b1d90(0x1de)][noslash(_0xf22411)]){loading[_0x1b1d90(0x223)]=loading[_0x1b1d90(0x223)][_0x1b1d90(0x1dc)](_0x6e88fd=>_0x6e88fd!=_0xf22411);if(!watchedSymbols[_0x1b1d90(0x2de)](_0xf22411))watchedSymbols['push'](_0xf22411);_0x3541fd++;}}),loading[_0x488bb8(0x2e8)]=Math[_0x488bb8(0x26d)](_0x3541fd/(_0x9077db[_0x488bb8(0x19c)]+maxLoadingProgress)*0x64);loading[_0x488bb8(0x2e8)]!=0x64&&(_0x345a91>0x1e*0x5&&(loading[_0x488bb8(0x197)]=!![],emitLoadingProgress()),_0x345a91>0x78*0x5&&!_0x5baca0&&(loading[_0x488bb8(0x1d6)]=!![],emitLoadingProgress(),_0x5baca0=!![],logHistory(_0x488bb8(0x207),_0x488bb8(0x15e)+loading[_0x488bb8(0x223)][_0x488bb8(0x1b7)](',\x20')+_0x488bb8(0x181)),logHistory(_0x488bb8(0x207),_0x488bb8(0x202)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x20fc88=_0x488bb8;process[_0x20fc88(0x1ff)]({'stop':_0x20fc88(0x28c)},_0x4681ac=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x488bb8(0x1d6)]=!![],emitLoadingProgress();break;}else _0x5572a2!=loading['progress']&&(_0x5572a2=loading[_0x488bb8(0x2e8)],emitLoadingProgress()),_0x345a91++,await sleep(0xc8);}_0x3541fd==_0x9077db[_0x488bb8(0x19c)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x488bb8(0x1ff)]({'status':_0x488bb8(0x177),'live':_0x488bb8(0x2bb)},_0x3e370d=>{}),_0x5baca0&&logHistory('success',_0x488bb8(0x291)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x66b89a=_0x3df64e;proxyEmit(_0x66b89a(0x1a2),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x59c759=_0x3df64e;proxyEmit(_0x59c759(0x1f4),loading);}async function getFiat(){const _0xf30db4=_0x3df64e;let _0x4ce306=global['ticker'][stablecoins[_0xf30db4(0x292)]['coin']],_0x5d83b4=global[_0xf30db4(0x1de)][stablecoins[_0xf30db4(0x1c6)][_0xf30db4(0x256)]];return{'eur':Number(_0x4ce306),'usd':Number(_0x5d83b4)};}function capitalize(_0x22f343){const _0x311693=_0x3df64e;return _0x22f343['substring'](0x0,0x1)['toUpperCase']()+_0x22f343[_0x311693(0x1b1)](0x1);}function supportedExchanges(){const _0x167e03=_0x3df64e,_0x108277=['ws',_0x167e03(0x2da),_0x167e03(0x221),_0x167e03(0x219),_0x167e03(0x1c4),_0x167e03(0x252),_0x167e03(0x2c7),_0x167e03(0x206),_0x167e03(0x2be),_0x167e03(0x16d)];let _0x44f8ba=[],_0x55ac2e=[],_0x24d353=ccxt['pro'][_0x167e03(0x20f)];_0x24d353[_0x167e03(0x1a6)](_0x4e058f=>{const _0x7e4d62=_0x167e03;try{const _0x437125=new ccxt[(_0x7e4d62(0x258))][_0x4e058f]();_0x55ac2e[_0x7e4d62(0x1fe)](_0x437125);}catch(_0x49f3f6){}}),_0x55ac2e['forEach'](_0x3866eb=>{const _0x1304fa=_0x167e03;let _0x427f25=0x0;_0x108277[_0x1304fa(0x1a6)](_0x54ee58=>{const _0x3e5f90=_0x1304fa;_0x54ee58 in _0x3866eb[_0x3e5f90(0x2bd)]&&_0x3866eb[_0x3e5f90(0x2bd)][_0x54ee58]&&_0x427f25++;}),_0x427f25==_0x108277[_0x1304fa(0x19c)]&&_0x44f8ba[_0x1304fa(0x1fe)](capitalize(_0x3866eb['id']));});let _0x299d79=[];return _0x24d353[_0x167e03(0x1a6)](_0x1c45b8=>{const _0x1022b1=_0x167e03;_0x1c45b8=capitalize(_0x1c45b8);if(!_0x44f8ba[_0x1022b1(0x2de)](_0x1c45b8))_0x299d79[_0x1022b1(0x1fe)](_0x1c45b8);}),_0x44f8ba;}function setStartDatePerformance(){const _0x56c7e2=_0x3df64e;if(config&&config['liquidity'][0x0][_0x56c7e2(0x170)][_0x56c7e2(0x19c)]!=0x0){const _0x3b9ac1=config[_0x56c7e2(0x165)][0x0][_0x56c7e2(0x170)];dbPerformance[_0x56c7e2(0x1e1)](_0x56c7e2(0x2a5))['find']({'date':config[_0x56c7e2(0x293)]})['assign']({'coins':_0x3b9ac1})['write']();}}async function recreateCoinResults(){const _0x1b564b=_0x3df64e;let _0x1f6b20,_0x1d4538=[];try{const _0x4ea18e=fns[_0x1b564b(0x2e5)](fns[_0x1b564b(0x19f)](config[_0x1b564b(0x293)]['replace'](/\//g,'-')),_0x1b564b(0x2a4));for(const _0x5090a6 of currentCoins){if(_0x5090a6['coin']!=config['basecoin']){let _0x381169=0x0,_0x10cf65,_0x2771b5;_0x1f6b20=await getAllEventOrders(_0x5090a6[_0x1b564b(0x162)]);if(_0x1f6b20[_0x1b564b(0x19c)]>0x0)_0x1f6b20[_0x1b564b(0x1a6)](_0x438080=>{const _0x42bc18=_0x1b564b,_0x47950d=_0x5090a6[_0x42bc18(0x162)][_0x42bc18(0x2de)](config['basecoin']+'/');_0x1d4538['push']({'datetime':_0x438080[_0x42bc18(0x17c)],'coin':_0x5090a6[_0x42bc18(0x256)],'symbol':_0x5090a6['symbol'],'side':_0x438080['side'],'reverse':_0x47950d,'amount':formatResult(_0x438080['filled'],0x8),'filled':formatResult(_0x438080[_0x42bc18(0x28e)],0x8),'price':formatResult(_0x438080[_0x42bc18(0x176)],0x8)}),_0x381169=_0x438080[_0x42bc18(0x2c0)]==_0x42bc18(0x231)?_0x381169+_0x438080[_0x42bc18(0x28e)]:_0x381169-_0x438080[_0x42bc18(0x28e)];if(!_0x2771b5)_0x2771b5=_0x438080[_0x42bc18(0x176)];});_0x10cf65=_0x5090a6[_0x1b564b(0x22d)]-_0x381169;let _0x29eccd;config[_0x1b564b(0x165)]['forEach'](_0x2a7e19=>{const _0x57a1f8=_0x1b564b;!_0x29eccd&&(_0x29eccd=_0x2a7e19['changes'][_0x57a1f8(0x27b)](_0xcbca3b=>_0xcbca3b[_0x57a1f8(0x256)]==_0x5090a6[_0x57a1f8(0x256)]),_0x29eccd&&(_0x10cf65=_0x29eccd[_0x57a1f8(0x22d)],_0x2771b5=_0x29eccd[_0x57a1f8(0x176)]));});let _0x27f212=dbCoinResults[_0x1b564b(0x1e1)](_0x1b564b(0x269))[_0x1b564b(0x27b)]({'coin':_0x5090a6[_0x1b564b(0x256)]})[_0x1b564b(0x2cc)]();_0x27f212={'coin':_0x5090a6[_0x1b564b(0x256)],'number':_0x10cf65,'breakeven':_0x2771b5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x1b564b(0x269))[_0x1b564b(0x27b)]({'coin':_0x5090a6[_0x1b564b(0x256)]})['assign'](_0x27f212)['write']();}}_0x1d4538[_0x1b564b(0x1bb)]((_0x6228ef,_0x29fc32)=>_0x6228ef[_0x1b564b(0x17c)]>_0x29fc32['datetime']?0x1:_0x29fc32['datetime']>_0x6228ef[_0x1b564b(0x17c)]?-0x1:0x0);let _0x290ff5=0x0;for(let _0x4920da of _0x1d4538){await updateCoinResults(_0x4920da,!![]);}}catch(_0x5a2902){await handleError(_0x5a2902,_0x1b564b(0x1a8));}}async function getAllEventOrders(_0x1c599d){const _0x2f1092=_0x3df64e;let _0x15b584=[],_0x15991f=dbLogs['get']('logs')[_0x2f1092(0x1dc)](_0x270d1f=>{const _0x19769e=_0x2f1092,_0x13217e=_0x270d1f[_0x19769e(0x26c)][_0x19769e(0x27c)]();return _0x13217e[_0x19769e(0x2de)](_0x1c599d[_0x19769e(0x27c)]())&&(_0x13217e[_0x19769e(0x2de)]('market')&&_0x13217e[_0x19769e(0x2de)]('order')||_0x13217e['includes'](_0x19769e(0x28e))&&_0x13217e[_0x19769e(0x2de)](_0x19769e(0x20e)));})['sortBy'](_0x2f1092(0x1e9))[_0x2f1092(0x2cc)]();return _0x15991f[_0x2f1092(0x1a6)](_0x32cc19=>{const _0x191243=_0x2f1092,_0x3fe301=_0x32cc19['event'][_0x191243(0x2de)](_0x191243(0x220))?_0x191243(0x220):_0x191243(0x231),_0x50cc39=/#([0-9]|\.)+\s/i,_0x5a4152=Number(_0x50cc39[_0x191243(0x2d6)](_0x32cc19[_0x191243(0x26c)])[0x0]['slice'](0x1)),_0x141693=/@([0-9]|\.)+$/i,_0x516b37=Number(_0x141693[_0x191243(0x2d6)](_0x32cc19['event'])[0x0][_0x191243(0x1e2)](0x1));_0x15b584['push']({'datetime':_0x32cc19['time'],'coin':symbolToCoin(_0x1c599d),'symbol':_0x1c599d,'side':_0x3fe301,'amount':_0x5a4152,'filled':_0x5a4152,'price':_0x516b37});}),_0x15b584;}async function getAllOrders(_0x42d39c,_0x54b3c4){const _0x3f4373=_0x3df64e;let _0x42644b=[];while(_0x54b3c4<exchange[_0x3f4373(0x28d)]()){const _0x3dabd7=0x1f4;try{const _0x56477b=await exchange['fetchClosedOrders'](_0x42d39c,_0x54b3c4,_0x3dabd7);if(_0x56477b[_0x3f4373(0x19c)])_0x54b3c4=_0x56477b[_0x56477b[_0x3f4373(0x19c)]-0x1][_0x3f4373(0x24c)]+0x1,_0x42644b=_0x42644b[_0x3f4373(0x255)](_0x56477b);else break;}catch(_0x42fddb){await handleError(_0x42fddb,_0x3f4373(0x1d5),_0x42d39c);}}return _0x42644b;}async function validate24hChanges(){const _0x41e51f=_0x3df64e;for(const _0x17a050 of currentCoins){if(_0x17a050[_0x41e51f(0x256)]!=config[_0x41e51f(0x29f)]){let _0x218eb8;_0x17a050['reverse']?_0x218eb8=formatResult((0x1/(global[_0x41e51f(0x2cd)][noslash(_0x17a050[_0x41e51f(0x162)])]/0x64+0x1)-0x1)*0x64,0x3):_0x218eb8=global[_0x41e51f(0x2cd)][noslash(_0x17a050['symbol'])],_0x218eb8<config[_0x41e51f(0x1f8)]&&(logHistory(_0x41e51f(0x207),_0x17a050[_0x41e51f(0x256)]+_0x41e51f(0x2ee)+_0x218eb8+'%'),logHistory('error',_0x41e51f(0x27d)),logHistory(_0x41e51f(0x207),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x30993e,_0x4ad9c6){const _0x39a604=_0x3df64e;if(!_0x30993e)return!![];const _0x18d676=_0x4ad9c6[_0x39a604(0x1fa)]('.'),_0x39c108=_0x30993e[_0x39a604(0x1fa)]('.');for(var _0x2fc0ba=0x0;_0x2fc0ba<_0x39c108[_0x39a604(0x19c)];_0x2fc0ba++){const _0x23e4e0=~~_0x39c108[_0x2fc0ba],_0x22c999=~~_0x18d676[_0x2fc0ba];if(_0x23e4e0<_0x22c999)return!![];if(_0x23e4e0>_0x22c999)return![];}return![];}async function oneTimeMigration(){const _0x261eab=_0x3df64e;let _0x13aa05=dbLogs[_0x261eab(0x1e1)](_0x261eab(0x27f))['value']();if(isOlderVersion(_0x13aa05,_0x261eab(0x20a))){let _0x2fac4b=[];const _0x3a52ba=dbLogs[_0x261eab(0x1e1)](_0x261eab(0x184))[_0x261eab(0x2cc)]();_0x3a52ba[_0x261eab(0x1a6)](_0x74fb46=>{const _0x2595a6=_0x261eab;_0x2fac4b[_0x2595a6(0x1fe)]({'time':_0x74fb46['time'],'type':_0x74fb46['type'],'event':_0x74fb46[_0x2595a6(0x26c)]});}),dbLogs[_0x261eab(0x1e1)](_0x261eab(0x184))[_0x261eab(0x2ad)](_0x2fac4b)[_0x261eab(0x161)]();}let _0x4149ca=dbConfig[_0x261eab(0x1e1)](_0x261eab(0x27f))[_0x261eab(0x2cc)]();if(isOlderVersion(_0x4149ca,_0x261eab(0x20a))){let _0x18d590=dbConfig[_0x261eab(0x1e1)](_0x261eab(0x1f3))[_0x261eab(0x27b)]({'botID':botID})['value']();if(_0x18d590){let _0x29c817=[];_0x18d590[_0x261eab(0x1ef)][_0x261eab(0x1a6)](_0x50a2cc=>{const _0x588628=_0x261eab;_0x29c817[_0x588628(0x1fe)]({'coin':_0x50a2cc[_0x588628(0x256)],'number':_0x50a2cc['startnumber'],'price':_0x50a2cc[_0x588628(0x2ec)]}),delete _0x50a2cc[_0x588628(0x261)],delete _0x50a2cc[_0x588628(0x2ec)];});if(_0x29c817[_0x261eab(0x19c)]!==0x0)fs[_0x261eab(0x297)](configbackuppath+(_0x261eab(0x23f)+botID+'.json'),JSON[_0x261eab(0x26e)](_0x29c817,null,0x4),function(_0x568ef2){if(_0x568ef2){}});const _0x211e11=(_0x5619ea,_0x2cef33)=>{const _0x30eb51=_0x261eab;let _0x4932b2=[];_0x2cef33[_0x30eb51(0x1a6)](_0x5c6b37=>{const _0xdb1e17=_0x30eb51,_0x68c906=_0x5619ea['find'](_0x54ee68=>_0x54ee68[_0xdb1e17(0x256)]==_0x5c6b37[_0xdb1e17(0x256)]);if(!_0x68c906)_0x4932b2[_0xdb1e17(0x1fe)](_0x5c6b37);});let _0x179b60=[];return _0x5619ea[_0x30eb51(0x1a6)](_0x1fa35e=>{const _0x25c550=_0x30eb51,_0x2b7e5c=_0x2cef33[_0x25c550(0x27b)](_0x2e252d=>_0x2e252d['coin']==_0x1fa35e[_0x25c550(0x256)]);if(!_0x2b7e5c||_0x2b7e5c[_0x25c550(0x22d)]==0x0&&_0x1fa35e[_0x25c550(0x22d)]!=0x0)_0x179b60['push'](_0x1fa35e);}),{'missingDay1':_0x4932b2,'notInDay2':_0x179b60};},_0x3411a5=dbPerformance[_0x261eab(0x1e1)](_0x261eab(0x2a5))[_0x261eab(0x264)]()[_0x261eab(0x2cc)]();if(_0x3411a5[_0x261eab(0x19c)]>0x1){const {missingDay1:_0x573a71,notInDay2:_0x5bf8fd}=_0x211e11(_0x29c817,_0x3411a5[0x1]['coins']);_0x29c817=[..._0x29c817,..._0x573a71],_0x5bf8fd['forEach'](_0x1a61eb=>{const _0x275154=_0x261eab;let _0x5b4e9e=_0x29c817['findIndex'](_0x32b3f2=>_0x32b3f2['coin']==_0x1a61eb[_0x275154(0x256)]);_0x5b4e9e!=-0x1&&_0x29c817[_0x275154(0x1ad)](_0x5b4e9e,0x1);});}_0x29c817[_0x261eab(0x1bb)]((_0x4a0847,_0x30543c)=>_0x4a0847[_0x261eab(0x256)]>_0x30543c['coin']?0x1:_0x30543c[_0x261eab(0x256)]>_0x4a0847['coin']?-0x1:0x0);let _0x5f0442=[{'date':_0x18d590[_0x261eab(0x293)],'changes':_0x29c817}];_0x3411a5['length']>0x2&&_0x3411a5['forEach']((_0xbe7818,_0x3363cb)=>{const _0x330e1b=_0x261eab;if(_0x3363cb>0x0&&_0x3363cb<_0x3411a5[_0x330e1b(0x19c)]-0x1){const {missingDay1:_0x1e449a,notInDay2:_0x5cd83b}=_0x211e11(_0x3411a5[_0x3363cb]['coins'],_0x3411a5[_0x3363cb+0x1][_0x330e1b(0x269)]);_0x29c817=[],(_0x1e449a['length']!=0x0||_0x5cd83b['length']!=0x0)&&(_0x1e449a[_0x330e1b(0x19c)]!=0x0&&_0x29c817[_0x330e1b(0x1fe)](..._0x1e449a),_0x5cd83b['length']!=0x0&&(_0x5cd83b[_0x330e1b(0x1a6)](_0x4b68fd=>{const _0x5dd76b=_0x330e1b;_0x4b68fd[_0x5dd76b(0x22d)]=-_0x4b68fd['number'];}),_0x29c817['push'](..._0x5cd83b)),_0x29c817[_0x330e1b(0x1bb)]((_0xd90e5c,_0x540b0e)=>_0xd90e5c[_0x330e1b(0x256)]>_0x540b0e[_0x330e1b(0x256)]?0x1:_0x540b0e[_0x330e1b(0x256)]>_0xd90e5c['coin']?-0x1:0x0),_0x5f0442[_0x330e1b(0x1fe)]({'date':_0x3411a5[_0x3363cb+0x1][_0x330e1b(0x1f9)],'changes':_0x29c817}));}}),dbConfig[_0x261eab(0x1e1)](_0x261eab(0x1f3))[_0x261eab(0x27b)]({'botID':botID})[_0x261eab(0x2ad)]({..._0x18d590,'liquidity':_0x5f0442})[_0x261eab(0x161)]();}}if(isOlderVersion(_0x4149ca,_0x261eab(0x19a))){let _0x1d1910=dbConfig[_0x261eab(0x1e1)](_0x261eab(0x1f3))[_0x261eab(0x27b)]({'botID':botID})[_0x261eab(0x2cc)]();if(_0x1d1910){const _0x5c4061=_0x1d1910[_0x261eab(0x2b1)],_0x540030=_0x5c4061?capitalize(_0x5c4061):_0x261eab(0x2ed);dbConfig[_0x261eab(0x1e1)](_0x261eab(0x1f3))[_0x261eab(0x27b)]({'botID':botID})['assign']({'exchange':_0x540030})[_0x261eab(0x161)]();}}let _0x3fdd3d=dbPerformance[_0x261eab(0x1e1)](_0x261eab(0x27f))[_0x261eab(0x2cc)]();isOlderVersion(_0x3fdd3d,_0x261eab(0x20a))&&setStartDatePerformance();let _0x5436aa=dbCoinResults[_0x261eab(0x1e1)]('version')[_0x261eab(0x2cc)]();if(isOlderVersion(_0x5436aa,_0x261eab(0x2d5))){let _0x32299d=dbCoinResults[_0x261eab(0x1e1)](_0x261eab(0x269))[_0x261eab(0x2cc)]();if(_0x32299d[_0x261eab(0x19c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x17c0d1=_0x3df64e;dbConfig['set'](_0x17c0d1(0x27f),serverversion)['write'](),dbPerformance[_0x17c0d1(0x1f7)](_0x17c0d1(0x27f),serverversion)['write'](),dbLogs[_0x17c0d1(0x1f7)](_0x17c0d1(0x27f),serverversion)[_0x17c0d1(0x161)](),dbCoinResults[_0x17c0d1(0x1f7)]('version',serverversion)['write']();}function getConfiguration(_0x332f80){const _0x3a7920=_0x3df64e;let _0x22c34d=dbConfig['get']('bot')[_0x3a7920(0x27b)]({'botID':_0x332f80})[_0x3a7920(0x2cc)]();if(_0x22c34d){let _0x424c68=![];typeof _0x22c34d[_0x3a7920(0x260)]==_0x3a7920(0x1c5)&&(_0x22c34d={..._0x22c34d,'threshold':Number(_0x22c34d[_0x3a7920(0x260)])},_0x424c68=!![]),_0x22c34d[_0x3a7920(0x1f8)]==undefined&&(_0x22c34d={..._0x22c34d,'change24h':-0x14},_0x424c68=!![]),_0x22c34d[_0x3a7920(0x275)]==undefined&&(_0x22c34d={..._0x22c34d,'fiat':_0x3a7920(0x227)},_0x424c68=!![]),_0x22c34d[_0x3a7920(0x26b)]==undefined&&(_0x22c34d={..._0x22c34d,'onepagemode':settings[_0x3a7920(0x26b)]},_0x424c68=!![]),_0x22c34d[_0x3a7920(0x168)]==undefined&&(_0x22c34d={..._0x22c34d,'colorscheme':_0x3a7920(0x2a3)},_0x424c68=!![]),_0x22c34d[_0x3a7920(0x2db)]==undefined&&(_0x22c34d={..._0x22c34d,'autoliquidity':!![]},_0x424c68=!![]),_0x424c68&&(_0x22c34d={'botID':_0x22c34d['botID'],'exchange':_0x22c34d[_0x3a7920(0x2b1)],'apiKey':_0x22c34d[_0x3a7920(0x1da)],'apiSecret':_0x22c34d['apiSecret'],'apiPassword':_0x22c34d['apiPassword'],'basecoin':_0x22c34d[_0x3a7920(0x29f)],'botname':_0x22c34d['botname'],'showname':_0x22c34d[_0x3a7920(0x1bd)],'threshold':_0x22c34d[_0x3a7920(0x260)],'ordertype':_0x22c34d[_0x3a7920(0x1bc)],'timeout':_0x22c34d[_0x3a7920(0x197)],'fiat':_0x22c34d[_0x3a7920(0x275)],'startdate':_0x22c34d['startdate'],'recreate':_0x22c34d[_0x3a7920(0x20c)],'timeshift':_0x22c34d[_0x3a7920(0x1a9)],'onepagemode':_0x22c34d[_0x3a7920(0x26b)],'headless':_0x22c34d[_0x3a7920(0x2c1)],'cooldown':_0x22c34d[_0x3a7920(0x2c2)],'change24h':_0x22c34d[_0x3a7920(0x1f8)],'emojibuy':_0x22c34d[_0x3a7920(0x1f1)],'emojisell':_0x22c34d[_0x3a7920(0x16a)],'colorscheme':_0x22c34d[_0x3a7920(0x168)],'portfolio':_0x22c34d[_0x3a7920(0x1ef)],'autoliquidity':_0x22c34d['autoliquidity'],'liquidity':_0x22c34d[_0x3a7920(0x165)],'openOrders':_0x22c34d[_0x3a7920(0x238)]},dbConfig[_0x3a7920(0x1e1)](_0x3a7920(0x1f3))['remove']()[_0x3a7920(0x161)](),dbConfig['get'](_0x3a7920(0x1f3))[_0x3a7920(0x1fe)](_0x22c34d)[_0x3a7920(0x161)]());}else _0x22c34d={'botID':_0x332f80,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x3a7920(0x19b)+_0x332f80,'showname':![],'threshold':0x3,'ordertype':_0x3a7920(0x1d7),'timeout':0x14,'fiat':_0x3a7920(0x227),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3a7920(0x1a9)],'onepagemode':settings[_0x3a7920(0x26b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x3a7920(0x2a3),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x22c34d;}function emittedConfiguration(){const _0x2bb527=_0x3df64e;let _0x3c8c93;if(config[_0x2bb527(0x1da)]=='')_0x3c8c93={...config,'configstate':_0x2bb527(0x1cb)};else config[_0x2bb527(0x1da)]==_0x2bb527(0x1ec)?_0x3c8c93={...config,'configstate':'recovery'}:(_0x3c8c93={...config,'apiKey':'************','apiSecret':_0x2bb527(0x1be)},config[_0x2bb527(0x1a5)]&&(_0x3c8c93['apiPassword']=_0x2bb527(0x1be)));return _0x3c8c93;}function getSettings(){const _0x3bd457=_0x3df64e;return dbSettings[_0x3bd457(0x1e1)](_0x3bd457(0x1af))[_0x3bd457(0x2cc)]();}function getSecure(){const _0x1b4ddd=_0x3df64e;return dbSecure[_0x1b4ddd(0x1e1)](_0x1b4ddd(0x2aa))['value']()||{};}function updateTimeshift(_0x1563e7){const _0x54316d=_0x3df64e;let _0x11629d=dbConfig['get'](_0x54316d(0x1f3))[_0x54316d(0x27b)]({'botID':botID})['value']();_0x11629d&&dbConfig[_0x54316d(0x1e1)](_0x54316d(0x1f3))['find']({'botID':botID})[_0x54316d(0x2ad)]({'timeshift':_0x1563e7})[_0x54316d(0x161)](),config[_0x54316d(0x1a9)]=_0x1563e7,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x210d77){const _0x189298=_0x3df64e;let _0x1c7b2c=dbConfig[_0x189298(0x1e1)]('bot')[_0x189298(0x27b)]({'botID':botID})['value']();_0x1c7b2c&&dbConfig[_0x189298(0x1e1)]('bot')['find']({'botID':botID})[_0x189298(0x2ad)]({'onepagemode':_0x210d77})['write'](),config[_0x189298(0x26b)]=_0x210d77,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x5a51ca){const _0x56f205=_0x3df64e;logger[_0x56f205(0x2dc)](_0x56f205(0x22f));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x56f205(0x2dc)](_0x56f205(0x20b));let _0x1fd6ea=[],_0x2d3c72=![],_0x574ab0=![],_0x196f8e=[];_0x5a51ca[_0x56f205(0x1ef)][_0x56f205(0x1a6)](_0x1a003d=>{const _0x34ce8f=_0x56f205;if(!_0x1a003d['excluded']&&_0x1a003d['coin']!=_0x5a51ca[_0x34ce8f(0x29f)])_0x196f8e[_0x34ce8f(0x1fe)](_0x1a003d['symbol']);}),_0x196f8e[_0x56f205(0x1a6)](_0x4d8943=>{const _0x2338ff=_0x56f205,_0x17c1d7=watchedSymbols['includes'](_0x4d8943);!_0x17c1d7&&_0x1fd6ea[_0x2338ff(0x1fe)](_0x4d8943);}),_0x196f8e[_0x56f205(0x1a6)](_0x5bb6da=>{const _0x740ba=_0x56f205,_0x27096a=currentCoins[_0x740ba(0x27b)](_0x2302d1=>_0x2302d1[_0x740ba(0x162)]==_0x5bb6da);!_0x27096a&&(_0x2d3c72=!![]);}),currentCoins['forEach'](_0x306d43=>{const _0x171b69=_0x56f205;if(_0x306d43['coin']!=config[_0x171b69(0x29f)]){const _0x52b4ce=_0x196f8e[_0x171b69(0x27b)](_0x2f1979=>_0x2f1979==_0x306d43[_0x171b69(0x162)]);!_0x52b4ce&&(_0x2d3c72=!![]);}}),_0x5a51ca['portfolio'][_0x56f205(0x1a6)](_0x42a8f3=>{const _0x3d3847=_0x56f205,_0x486bd8=config[_0x3d3847(0x1ef)][_0x3d3847(0x27b)](_0x5a4c8c=>_0x5a4c8c[_0x3d3847(0x256)]==_0x42a8f3[_0x3d3847(0x256)]);if(_0x486bd8&&_0x42a8f3['offset']!=_0x486bd8[_0x3d3847(0x28b)])_0x574ab0=!![];});let _0x20ba31=dbConfig[_0x56f205(0x1e1)](_0x56f205(0x1f3))[_0x56f205(0x27b)]({'botID':botID})['value']();_0x5a51ca={..._0x5a51ca,'apiKey':crypt['decrypt'](secure[_0x56f205(0x1fd)],_0x5a51ca[_0x56f205(0x1da)])['message'],'apiSecret':crypt[_0x56f205(0x166)](secure[_0x56f205(0x1fd)],_0x5a51ca['apiSecret'])[_0x56f205(0x2c4)]};_0x5a51ca[_0x56f205(0x1a5)]&&(_0x5a51ca[_0x56f205(0x1a5)]=crypt[_0x56f205(0x166)](secure['privateKey'],_0x5a51ca[_0x56f205(0x1a5)])[_0x56f205(0x2c4)]);let _0x53723f=![];if(_0x20ba31){_0x5a51ca['apiKey']=='************'?_0x5a51ca[_0x56f205(0x1da)]=config['apiKey']:_0x53723f=!![];_0x5a51ca[_0x56f205(0x17d)]=='************'?_0x5a51ca[_0x56f205(0x17d)]=config[_0x56f205(0x17d)]:_0x53723f=!![];if(_0x5a51ca['apiPassword']=='************')_0x5a51ca[_0x56f205(0x1a5)]=config[_0x56f205(0x1a5)];else{if(_0x5a51ca[_0x56f205(0x1a5)])_0x53723f=!![];}dbConfig[_0x56f205(0x1e1)]('bot')['find']({'botID':botID})[_0x56f205(0x2ad)](_0x5a51ca)['write']();}else dbConfig[_0x56f205(0x1e1)](_0x56f205(0x1f3))[_0x56f205(0x1fe)](_0x5a51ca)['write'](),_0x53723f=!![],process['send']({'status':'enabled','live':_0x56f205(0x2bb)},_0x4ca103=>{});process['send']({'botname':_0x5a51ca[_0x56f205(0x187)]},_0x3bfb83=>{}),updateBotManager(),config={..._0x5a51ca},proxyEmit(_0x56f205(0x251)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x53723f)await reset(_0x1fd6ea,!![]);else _0x2d3c72||_0x574ab0?await reset(_0x1fd6ea,![]):getBalances();blockTransactionDetection=![],logger[_0x56f205(0x2dc)](_0x56f205(0x1c3));}async function storeHeadless(_0x1baca4){const _0x3e254a=_0x3df64e,_0x4312cf={...config,'headless':_0x1baca4[_0x3e254a(0x2c1)]};let _0x4f8942=dbConfig[_0x3e254a(0x1e1)]('bot')[_0x3e254a(0x27b)]({'botID':botID})[_0x3e254a(0x2cc)]();_0x4f8942&&dbConfig[_0x3e254a(0x1e1)](_0x3e254a(0x1f3))['find']({'botID':botID})[_0x3e254a(0x2ad)](_0x4312cf)[_0x3e254a(0x161)](),config={..._0x4312cf},updateBotManager(),proxyEmit(_0x3e254a(0x1a2),emittedConfiguration());}async function storeFiat(_0x2bff55){const _0x39afe8=_0x3df64e,_0x463f7a={...config,'fiat':_0x2bff55};let _0x4295c7=dbConfig[_0x39afe8(0x1e1)](_0x39afe8(0x1f3))[_0x39afe8(0x27b)]({'botID':botID})['value']();_0x4295c7&&dbConfig['get']('bot')[_0x39afe8(0x27b)]({'botID':botID})['assign'](_0x463f7a)[_0x39afe8(0x161)](),config={..._0x463f7a},proxyEmit(_0x39afe8(0x1a2),emittedConfiguration());}function _0x370d(){const _0x33ccc2=['getPortfolio(1)','Order\x20is\x20invalid:\x20','ask','configuration-stored','cancelOrder','watchTrades()','getCoinNumber()','concat','coin','Error:\x20Invalid\x20argument\x20','pro','recent20','warning','Bitget','OnMaintenance','currency','523526CivyXU','3056tVimbK','threshold','startnumber','net-basecoin','getTime','cloneDeep','BNB/','Error\x20details:','Unfilled\x20order(s)\x20canceled\x20after\x20','unlinkSync','coins','Avoiding\x20continuous\x20order\x20attempts','onepagemode','event','round','stringify','Fee\x20discount\x20refund\x20detected:\x20','replace','Limit\x20(low-margin)','initTickers()','sendMetricsTelegram','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','fiat','average','performance','ExchangeNotAvailable','Invalid\x20symbol:\x20','existsSync','find','toLowerCase','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','BUSD','version','storeConfiguration','./config/','status','EUR','balancing\x20resumes\x20when\x20cooldown\x20ends','Initializing\x20coin\x20results','\x20API\x20secret\x20is\x20invalid','OrderNotFound','total','freeze','limit-low','offset','restart','milliseconds','filled','bots','defaults','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','eur','startdate','path','(((.+)+)+)+$','must\x20be\x20greater\x20than\x20minimum\x20amount','writeFile','no\x20open\x20orders','kill','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','trade','initclient','distribution','test','basecoin','getSeconds','./logs/','min','red_yellow_blue','yyyy-MM-dd\x27T\x27HH:mm:ss','data','492108LLHRVI','getPortfolio','customId','Cooldown\x20ended\x20-\x20balancing\x20resumed','secure','balancing\x20resumed','realized','assign','-performance.json','ORDERS.LOCKED','1\x20-\x20Validate\x20orders:\x20','exchange','Net\x20effect','USDP','showConfig','getCoins()','NetworkError','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Insufficient\x20funds\x20to\x20execute\x20order:\x20','padStart','550569ngOPBX','running','-results.json','has','fetchClosedOrders','log','side','headless','cooldown','USDT','message','orderstatus','Exchange','createOrder','\x20not\x20responding','\x20API\x20key\x20is\x20invalid','Executed\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','value','change','\x20|\x20highest\x20fee:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','password','abs','Huobipro','\x20portfolio:</b>\x20\x0a\x0a','cancelOrders()','2.5.0','exec','lowdb/adapters/FileSync','<b>','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','fetchTickers','autoliquidity','debug','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','includes','USDC','\x20|\x20','added','765336kZsVnY','Invalid\x20API\x20key\x20or\x20secret\x20entered','getDate','format','\x20closed\x20the\x20connection','bb-settings.json','progress','\x20minutes\x20-\x20','AuthenticationError','argv','startprice','Binance','\x20has\x20a\x2024h\x20drop\x20of\x20','uncaughtException','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','valid','bot-','limit','Failed\x20to\x20load\x20coin\x20data\x20for\x20','padEnd','ORDERS.UNLOCKED','write','symbol','\x20order:\x20','MIN_NOTIONAL','liquidity','decrypt','constructor','colorscheme','Error\x20while\x20deleting\x20files:\x20','emojisell','InsufficientFunds','API-key\x20format\x20invalid','fetchBalance','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20metrics:</b>\x20\x0a\x0a','changes','RequestTimeout','loadSymbols()','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Exception\x20thrown\x20in\x20','shift','price','enabled','-events.json','/output-000.log','2\x20-\x20FILLED\x20known\x20order:\x20','\x20:\x20','datetime','apiSecret','-------------------------------\x0a','rightTxt','placeOrder','\x20-\x20bot\x20not\x20started','net-fiat','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','logs','leftTxt','spot','botname','%\x20(',',\x20must\x20be\x20a\x203\x20digit\x20number','ETH','active','percentage','highest','UNLOCKED','isEqual',':\x20Bot\x20','sha256','\x20orders\x20in\x20less\x20than\x20','canceled','InvalidNonce','\x20exchange\x20error','keys','timeout','2\x20-\x20Validate\x20orders:\x20','watchTransactions()','2.6.0','Bot\x20','length','getPortfolio(2)','ccxt','parseISO','breakeven','fromCodePoint','configuration','getHours','starting-balances','apiPassword','forEach','basecoinvalue','recreateCoinResults()','timeshift','Huobi','toFixed','fees','splice','removed','settings','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','substring','yyyy/MM/dd','2\x20-\x20Orders\x20unlocked','getPortfolio(0)','BNB','last','join','BTC','indexOf','event-history','sort','ordertype','showname','************','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','limit-high','buys','loadMarkets','Transaction\x20detection\x20unblocked','watchOrders','string','usd','type','random','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','map','initial','<b>Bot\x20','fee','\x20|\x20lock\x20orders:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bb-secure.json','exchange\x20reloaded','0\x20-\x20EXECUTION:\x20','ongoing','fetchTickers()','getAllOrders()','cancel','market','balances',':\x20timer\x20>','apiKey','max','filter','success','ticker','Limit\x20(high-margin)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','get','slice','getMinutes','netoffset','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Portfolio\x20change\x20detected:\x20','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','2\x20-\x20Handled\x20open\x20orders','time','getMonth','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','***','open','storeFiat','portfolio','Cex','emojibuy','Order\x20filled:\x20','bot','coin-loading-progress','Initiating\x20exchange\x20reload','args','set','change24h','date','split','ID:\x20','delta','privateKey','push','send','\x20change','-config.json','Pausing\x20for\x20','function','createWriteStream','add','fetchOpenOrders','error','TUSD','final','2.3.5','Transaction\x20detection\x20blocked','recreate','\x20-\x20pausing\x20bot\x20for\x20','order','exchanges','Unknown\x20error\x20occured','\x20hour','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limits','target','differenceInSeconds','full','page','RateLimitExceeded','watchTrades','LOCKED','amountToPrecision','345UmrarZ','<pre>','deleteHistoryAlerts','\x20|\x20Custom\x20ID:\x20','sell','fetchTicker','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','remainingSymbols','\x20not\x20available','reverse','\x20network\x20error','USD','closed','UNLOCKING','lowdb','yargs/yargs','No\x20more\x20open\x20orders\x20-\x20','number','501753uHXvDT','Saving\x20configuration','storeHeadless','buy','getFullYear','\x20>\x20[DEBUG]\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','001','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','parse','openOrders','Loading\x20completed','toString','none','excluded','apply','Resetting\x20coin\x20results:\x20','starting-balance-','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','mkdirSync','cost','date-fns','entries','21hSWWEE','\x20>\x20','orderId','ExchangeError','amount','1\x20-\x20Unlock\x20orders','533511xrSxGE','timestamp','sortBy'];_0x370d=function(){return _0x33ccc2;};return _0x370d();}function resetHistory(){const _0x3f4f32=_0x3df64e;logger[_0x3f4f32(0x216)]('Resetting\x20bot\x20history');try{if(fs[_0x3f4f32(0x27a)](path[_0x3f4f32(0x1b7)](configpath,_0x3f4f32(0x15c)+botID+_0x3f4f32(0x178))))fs[_0x3f4f32(0x268)](path[_0x3f4f32(0x1b7)](configpath,'bot-'+botID+'-events.json'));if(fs['existsSync'](path[_0x3f4f32(0x1b7)](configpath,_0x3f4f32(0x15c)+botID+_0x3f4f32(0x2ae))))fs[_0x3f4f32(0x268)](path[_0x3f4f32(0x1b7)](configpath,_0x3f4f32(0x15c)+botID+_0x3f4f32(0x2ae)));if(fs['existsSync'](path[_0x3f4f32(0x1b7)](configpath,_0x3f4f32(0x15c)+botID+_0x3f4f32(0x2bc))))fs['unlinkSync'](path['join'](configpath,_0x3f4f32(0x15c)+botID+_0x3f4f32(0x2bc)));}catch(_0x4ba694){if(_0x4ba694)logger['full'](_0x3f4f32(0x169),_0x4ba694);}const _0x20e2ff=getDate();let _0x3f173c=[];currentCoins['forEach'](_0x4409ff=>{const _0x2572d4=_0x3f4f32;_0x3f173c[_0x2572d4(0x1fe)]({'coin':_0x4409ff[_0x2572d4(0x256)],'number':_0x4409ff[_0x2572d4(0x22d)],'price':_0x4409ff[_0x2572d4(0x1b6)]});});let _0x370743=dbConfig[_0x3f4f32(0x1e1)](_0x3f4f32(0x1f3))[_0x3f4f32(0x27b)]({'botID':botID})[_0x3f4f32(0x2cc)]();_0x370743&&(dbConfig[_0x3f4f32(0x1e1)](_0x3f4f32(0x1f3))['find']({'botID':botID})[_0x3f4f32(0x2ad)]({'liquidity':[{'date':_0x20e2ff,'changes':_0x3f173c}]})['write'](),config['liquidity']=[]),process['send']({'stop':_0x3f4f32(0x28c)},_0x1ca073=>{});}function noslash(_0x3c7b69){const _0x34c7c5=_0x3df64e;return _0x3c7b69[_0x34c7c5(0x270)]('/','');}function updateHighestFee(_0x3148b1){const _0x10e8e1=_0x3df64e;if(_0x3148b1[_0x10e8e1(0x225)]){let _0x3d3cc9={'filled':_0x3148b1['filled']*_0x3148b1['price'],'amount':_0x3148b1[_0x10e8e1(0x28e)]*_0x3148b1[_0x10e8e1(0x176)],'side':_0x3148b1['side']==_0x10e8e1(0x220)?_0x10e8e1(0x231):_0x10e8e1(0x220),'price':0x1/_0x3148b1['price']};_0x3148b1={..._0x3148b1,..._0x3d3cc9};}const _0x2c1140=defaultFee*_0x3148b1[_0x10e8e1(0x28e)]*_0x3148b1[_0x10e8e1(0x176)];lastFees[_0x10e8e1(0x259)][_0x10e8e1(0x19c)]===0x14&&lastFees[_0x10e8e1(0x259)][_0x10e8e1(0x175)](),lastFees[_0x10e8e1(0x259)][_0x10e8e1(0x1fe)](_0x2c1140),lastFees[_0x10e8e1(0x18d)]=Math[_0x10e8e1(0x1db)](...lastFees[_0x10e8e1(0x259)]);}async function updateNumberCoinsCcxt(_0xdab422){const _0x51c488=_0x3df64e;logger[_0x51c488(0x2dc)](_0x51c488(0x1d2)+_0xdab422[_0x51c488(0x162)]+_0x51c488(0x2e0)+_0xdab422['status']+'\x20|\x20'+_0xdab422['id']);let _0x49451e=_0xdab422[_0x51c488(0x282)],_0xe000af=![];currentCoins['forEach'](_0x8002b=>{const _0x484e52=_0x51c488;_0x8002b[_0x484e52(0x162)]==_0xdab422[_0x484e52(0x162)]&&(_0xe000af=!![]);});if(!_0xe000af)return;const _0x500766=currentCoins['find'](_0xefe6cf=>_0xefe6cf[_0x51c488(0x162)]==_0xdab422[_0x51c488(0x162)]),_0x17cec8=_0x4b3d51=>{const _0xaf2ba9=_0x51c488;if(_0x500766)_0x500766[_0xaf2ba9(0x2c5)]=_0x4b3d51;};if(_0x49451e==_0x51c488(0x1ed))_0x17cec8(_0x51c488(0x1ed));else{if(_0x49451e==_0x51c488(0x193)){_0x17cec8(_0x51c488(0x193));const _0xc4c4cb=await getCoins();[currentCoins,currentCoinsAll]=_0xc4c4cb,await getOpenOrders(),handleOpenOrders();}else{if(_0x49451e==_0x51c488(0x228)){logger[_0x51c488(0x2dc)]('1\x20-\x20FILLED:\x20'+_0xdab422[_0x51c488(0x162)]+_0x51c488(0x2e0)+_0xdab422[_0x51c488(0x28e)]+_0x51c488(0x2e0)+_0xdab422['id']);let _0x4bca4c=![];if(lastOrders)for(const _0x610482 of lastOrders){const _0x5d8ea8=0xc8,_0x3e567c=0x1388;let _0x37f523=0x0;while(!_0x610482[_0x51c488(0x247)]&&_0x37f523*_0x5d8ea8<_0x3e567c){_0x37f523++,await sleep(_0x5d8ea8);}if(_0x37f523>0x0)logger[_0x51c488(0x2dc)]('Waited\x20'+_0x37f523*_0x5d8ea8/0x3e8+_0x51c488(0x2b7));if(_0x610482['orderId']==_0xdab422['id']){logger[_0x51c488(0x2dc)](_0x51c488(0x17a)+_0xdab422['id']),_0x4bca4c=!![];if(_0x610482[_0x51c488(0x28e)]==0x0){logger[_0x51c488(0x2dc)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0xdab422['id']);if(_0xdab422['average'])_0x610482[_0x51c488(0x176)]=_0xdab422[_0x51c488(0x276)];else{if(_0xdab422[_0x51c488(0x176)])_0x610482[_0x51c488(0x176)]=_0xdab422[_0x51c488(0x176)];else{}}_0x610482[_0x51c488(0x28e)]=_0xdab422[_0x51c488(0x28e)],updateHighestFee(_0x610482),_0x17cec8(_0x51c488(0x28e)),await validateOrders();if(lockOrders==ORDERS[_0x51c488(0x21a)]){const _0x2d3234=await getCoins();[currentCoins,currentCoinsAll]=_0x2d3234;}_0x610482[_0x51c488(0x1cd)]={'currency':_0xdab422[_0x51c488(0x1cd)]?_0xdab422[_0x51c488(0x1cd)]['currency']:null,'cost':_0xdab422[_0x51c488(0x1cd)]?_0xdab422['fee'][_0x51c488(0x242)]:0x0},await updateCoinResults(_0x610482);}}}if(!_0x4bca4c){logger[_0x51c488(0x2dc)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0xdab422['id']),_0x17cec8(_0x51c488(0x28e));const _0x3f571a=await getCoins();[currentCoins,currentCoinsAll]=_0x3f571a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x35fd6a=JSON[_0x51c488(0x237)](lastBalances['portfolio']);const _0x5440c0=_0x35fd6a[_0x51c488(0x27b)](_0x4295c6=>_0x4295c6[_0x51c488(0x162)]==_0xdab422[_0x51c488(0x162)]);if(_0x5440c0){if(_0x49451e==_0x51c488(0x1ed))_0x5440c0[_0x51c488(0x2c5)]=_0x5440c0[_0x51c488(0x2c5)]==_0x51c488(0x28e)?'filled':'open';else{if(_0x49451e==_0x51c488(0x193))_0x5440c0['orderstatus']=_0x5440c0[_0x51c488(0x2c5)]==_0x51c488(0x28e)?'filled':_0x51c488(0x193);else _0x49451e==_0x51c488(0x228)&&(_0x5440c0[_0x51c488(0x2c5)]=_0x51c488(0x28e));}}lastBalances={...lastBalances,'portfolio':JSON[_0x51c488(0x26e)](_0x35fd6a)},proxyEmit(_0x51c488(0x1d8),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0xa89ccd=_0x3df64e;await getOpenOrders();let _0x4498fa=![];currentCoins[_0xa89ccd(0x1a6)](_0x5e0ee2=>{const _0xce4b1b=_0xa89ccd;_0x4498fa=allOpenOrders['find'](_0x131692=>_0x131692[_0xce4b1b(0x162)]==_0x5e0ee2[_0xce4b1b(0x162)]),_0x5e0ee2[_0xce4b1b(0x2c5)]=_0x4498fa?'open':_0xce4b1b(0x23b);});}async function getCoins(_0x3219a8=!![],_0x406b46=config['basecoin']){const _0x167e50=_0x3df64e;let _0x2ea0e2,_0x160fc8=[],_0x3fa9ca=[],_0x22b4a0=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2ea0e2=await exchange[_0x167e50(0x16d)](),mybalances=_0x2ea0e2[_0x167e50(0x288)];for(const [_0x1e64f0,_0x4df683]of Object[_0x167e50(0x244)](mybalances)){_0x22b4a0['push'](_0x1e64f0);}config[_0x167e50(0x1ef)][_0x167e50(0x1a6)](_0x5738b5=>{const _0x4f7fbc=_0x167e50;!_0x22b4a0['includes'](_0x5738b5[_0x4f7fbc(0x256)])&&(mybalances[_0x5738b5['coin']]=0x0);});if(_0x406b46=='')for(const [_0x272a4b,_0x28b5fe]of Object['entries'](mybalances)){_0x28b5fe!=0x0&&_0x160fc8['push']({'coin':_0x272a4b});}else{let _0x2af4a2=![];for(const [_0x3f79dc,_0x25a6eb]of Object[_0x167e50(0x244)](mybalances)){const _0x1d9bc6=config[_0x167e50(0x1ef)][_0x167e50(0x27b)](_0x2a9c04=>_0x2a9c04['coin']==_0x3f79dc),_0x468912=_0x3f79dc+'/'+_0x406b46,_0x5c4f90=_0x406b46+'/'+_0x3f79dc,_0x1740b9=currentCoins[_0x167e50(0x27b)](_0xd64771=>_0xd64771[_0x167e50(0x256)]==_0x3f79dc);_0x2af4a2=![];if((_0x25a6eb!=0x0||_0x1d9bc6)&&(allSymbols[_0x167e50(0x2de)](_0x468912)||_0x3f79dc==_0x406b46))_0x160fc8['push']({'coin':_0x3f79dc,'symbol':_0x468912,'reverse':![],'number':Math[_0x167e50(0x1db)](_0x25a6eb+(_0x1d9bc6&&_0x1d9bc6['offset']||0x0),0x0),'orderstatus':_0x1740b9?_0x1740b9['orderstatus']:_0x167e50(0x23b)});else{if((_0x25a6eb!=0x0||_0x1d9bc6)&&allSymbols['includes'](_0x5c4f90))_0x160fc8['push']({'coin':_0x3f79dc,'symbol':_0x5c4f90,'reverse':!![],'number':Math['max'](_0x25a6eb+(_0x1d9bc6&&_0x1d9bc6[_0x167e50(0x28b)]||0x0),0x0),'orderstatus':_0x1740b9?_0x1740b9[_0x167e50(0x2c5)]:_0x167e50(0x23b)});else _0x1d9bc6&&_0x160fc8['push']({'coin':_0x1d9bc6[_0x167e50(0x256)],'symbol':_0x1d9bc6['symbol'],'reverse':_0x1d9bc6[_0x167e50(0x225)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x280040){if(!_0x3219a8)handleErrorNoStop(_0x280040,_0x167e50(0x2b5));else await handleError(_0x280040,_0x167e50(0x2b5));}return _0x3fa9ca=cloneDeep(_0x160fc8),_0x160fc8=_0x160fc8[_0x167e50(0x1dc)](_0x57b4b8=>{const _0x7a9567=_0x167e50,_0x2b9124=config[_0x7a9567(0x1ef)][_0x7a9567(0x27b)](_0x210a84=>_0x210a84[_0x7a9567(0x256)]==_0x57b4b8[_0x7a9567(0x256)]);return _0x2b9124&&!_0x2b9124[_0x7a9567(0x23c)];}),[_0x160fc8,_0x3fa9ca];}async function getCoinNumber(_0x442644){const _0x1a4075=_0x3df64e;let _0x478081;try{const _0x590584=await exchange[_0x1a4075(0x16d)]();_0x478081=_0x590584[_0x1a4075(0x288)][_0x442644];}catch(_0x423347){await handleError(_0x423347,_0x1a4075(0x254));}return _0x478081;}async function getOpenOrders(){const _0x32b614=_0x3df64e;let _0x713179;allOpenOrders=[];try{for(const _0x1a8fcf of config[_0x32b614(0x1ef)]){!_0x1a8fcf[_0x32b614(0x23c)]&&_0x1a8fcf[_0x32b614(0x256)]!=config[_0x32b614(0x29f)]&&(_0x713179=await exchange[_0x32b614(0x206)](_0x1a8fcf['symbol']),_0x713179[_0x32b614(0x19c)]>0x0&&allOpenOrders[_0x32b614(0x1fe)](_0x713179[0x0]));}}catch(_0x93c7b){await handleError(_0x93c7b,'getOpenOrders()');}}async function handleOpenOrders(_0x2d4d36=0x0){const _0x11e72a=_0x3df64e;allOpenOrders[_0x11e72a(0x19c)]==0x0&&lockOrders==ORDERS[_0x11e72a(0x21a)]&&allOrdersPlaced&&(_0x2d4d36==0x0?(logger[_0x11e72a(0x2dc)]('1\x20-\x20Handle\x20open\x20orders'),_0x2d4d36++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x11e72a(0x2dc)](_0x11e72a(0x1e8)),validateOrders(_0x11e72a(0x298))));}async function testAPI(_0x4f75c4){const _0x1bcc30=_0x3df64e,_0x578b8b=ccxt[_0x1bcc30(0x258)][_0x4f75c4['exchange']['toLowerCase']()],_0xf3c6b3=new _0x578b8b({'apiKey':_0x4f75c4[_0x1bcc30(0x1da)],'secret':_0x4f75c4[_0x1bcc30(0x17d)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1bcc30(0x186)}});if(_0x4f75c4[_0x1bcc30(0x1a5)])_0xf3c6b3[_0x1bcc30(0x2d0)]=_0x4f75c4[_0x1bcc30(0x1a5)];try{await _0xf3c6b3[_0x1bcc30(0x1c2)]();}catch(_0x37200c){throw _0x37200c;}}function cloneDeep(_0x32b747){const _0x5870b7=_0x3df64e;return JSON[_0x5870b7(0x237)](JSON[_0x5870b7(0x26e)](_0x32b747));}async function getPortfolio(_0x59ff6a){const _0x45a0e6=_0x3df64e;let _0x264128=[],_0x1bc671=[],_0x414393=[],_0x2a75ff;if(_0x59ff6a[_0x45a0e6(0x1da)]!=='************'||_0x59ff6a['apiSecret']!==_0x45a0e6(0x1be)||_0x59ff6a[_0x45a0e6(0x1a5)]&&_0x59ff6a[_0x45a0e6(0x1a5)]!==_0x45a0e6(0x1be)){if(config['exchange']){if(_0x59ff6a[_0x45a0e6(0x1da)]=='************')_0x59ff6a[_0x45a0e6(0x1da)]=config[_0x45a0e6(0x1da)];if(_0x59ff6a[_0x45a0e6(0x17d)]==_0x45a0e6(0x1be))_0x59ff6a['apiSecret']=config['apiSecret'];if(_0x59ff6a[_0x45a0e6(0x1a5)]==_0x45a0e6(0x1be))_0x59ff6a[_0x45a0e6(0x1a5)]=config[_0x45a0e6(0x1a5)];try{await testAPI(_0x59ff6a);}catch(_0x3aa1d1){if(_0x3aa1d1[_0x45a0e6(0x23a)]()[_0x45a0e6(0x2de)](_0x45a0e6(0x2ea))){logger['debug'](_0x45a0e6(0x2e3)),proxyEmit(_0x45a0e6(0x1ef),![]);return;}else{handleError(_0x3aa1d1,_0x45a0e6(0x1b4));return;}}}await initExchange(_0x59ff6a[_0x45a0e6(0x2b1)],_0x59ff6a[_0x45a0e6(0x1da)],_0x59ff6a['apiSecret'],_0x59ff6a[_0x45a0e6(0x1a5)]);try{await loadSymbols();}catch(_0x474031){if(_0x474031['toString']()[_0x45a0e6(0x2de)](_0x45a0e6(0x2ea))){proxyEmit(_0x45a0e6(0x1ef),![]);return;}else{handleError(_0x474031,_0x45a0e6(0x24e));return;}}const _0x49306a=await getCoins(![],_0x59ff6a[_0x45a0e6(0x29f)]);_0x414393=cloneDeep(_0x49306a[0x1]);}else _0x414393=cloneDeep(currentCoinsAll);if(_0x59ff6a[_0x45a0e6(0x29f)]=='')proxyEmit(_0x45a0e6(0x1ef),_0x414393);else{_0x414393[_0x45a0e6(0x1a6)](_0x3948de=>{const _0x5779af=_0x45a0e6;if(_0x3948de[_0x5779af(0x256)]!=_0x59ff6a[_0x5779af(0x29f)]&&allSymbols[_0x5779af(0x2de)](_0x3948de['symbol']))_0x264128[_0x5779af(0x1fe)](_0x3948de['symbol']);});if(_0x264128[_0x45a0e6(0x19c)]==0x0)logHistory('error',_0x45a0e6(0x274));else{try{_0x1bc671=await exchange[_0x45a0e6(0x2da)](_0x264128);}catch(_0xb5b735){if(_0xb5b735[_0x45a0e6(0x23a)]()[_0x45a0e6(0x2de)](_0x45a0e6(0x2ea))){proxyEmit(_0x45a0e6(0x1ef),![]);return;}else handleError(_0xb5b735,_0x45a0e6(0x19d));}_0x414393[_0x45a0e6(0x1a6)](_0x2bd744=>{const _0x7a414b=_0x45a0e6;_0x2bd744['coin']!=_0x59ff6a[_0x7a414b(0x29f)]?_0x1bc671[_0x2bd744['symbol']]?_0x2a75ff=_0x2bd744[_0x7a414b(0x225)]?0x1/_0x1bc671[_0x2bd744['symbol']][_0x7a414b(0x1b6)]:_0x1bc671[_0x2bd744['symbol']][_0x7a414b(0x1b6)]:_0x2a75ff=0x0:_0x2a75ff=0x1,_0x2bd744[_0x7a414b(0x176)]=formatResult(_0x2a75ff,0x8);}),proxyEmit(_0x45a0e6(0x1ef),_0x414393);}}}function truncateTradeAmount(_0x520499,_0x49290d){const _0x280395=_0x3df64e;let _0xd20da3=0x0;try{_0xd20da3=exchange[_0x280395(0x21b)](_0x520499,_0x49290d);}catch(_0x3cb071){}return _0xd20da3;}function checkMinimums(_0x6f0376){const _0x43a9de=_0x3df64e;let _0x693949=!![];const _0x2f05dc=!_0x6f0376[_0x43a9de(0x225)]?markets[_0x6f0376['symbol']]['limits'][_0x43a9de(0x249)][_0x43a9de(0x2a2)]:markets[_0x6f0376[_0x43a9de(0x162)]][_0x43a9de(0x213)][_0x43a9de(0x242)]['min'],_0x42db33=!_0x6f0376[_0x43a9de(0x225)]?markets[_0x6f0376[_0x43a9de(0x162)]][_0x43a9de(0x213)][_0x43a9de(0x242)][_0x43a9de(0x2a2)]:markets[_0x6f0376[_0x43a9de(0x162)]][_0x43a9de(0x213)][_0x43a9de(0x249)][_0x43a9de(0x2a2)],_0x16f9fe=truncateTradeAmount(_0x6f0376[_0x43a9de(0x162)],_0x6f0376[_0x43a9de(0x29b)]);_0x6f0376[_0x43a9de(0x29b)]=_0x16f9fe;if(Math[_0x43a9de(0x2d1)](_0x16f9fe)<_0x2f05dc)_0x693949=![];if(Math[_0x43a9de(0x2d1)](_0x16f9fe)*_0x6f0376[_0x43a9de(0x1b6)]<_0x42db33)_0x693949=![];if(_0x6f0376[_0x43a9de(0x2c0)]==_0x43a9de(0x220)){let _0x596173=config[_0x43a9de(0x1ef)][_0x43a9de(0x27b)](_0x2862b7=>_0x2862b7['coin']==_0x6f0376['coin']);if(_0x596173[_0x43a9de(0x28b)]>0x0){if(Math['abs'](_0x16f9fe)>_0x6f0376[_0x43a9de(0x22d)]-_0x596173[_0x43a9de(0x28b)])_0x693949=![];}else{if(Math[_0x43a9de(0x2d1)](_0x16f9fe)>_0x6f0376[_0x43a9de(0x22d)])_0x693949=![];}}if(_0x6f0376[_0x43a9de(0x2c0)]==_0x43a9de(0x231)){let _0xee63fa=config[_0x43a9de(0x1ef)][_0x43a9de(0x27b)](_0x3ec41c=>_0x3ec41c['coin']==config[_0x43a9de(0x29f)]),_0x162be9=currentCoins[_0x43a9de(0x27b)](_0x5d93b0=>_0x5d93b0[_0x43a9de(0x256)]==config[_0x43a9de(0x29f)]);if(_0xee63fa['offset']>0x0){if(Math[_0x43a9de(0x2d1)](_0x16f9fe)*_0x6f0376['last']>_0x162be9[_0x43a9de(0x22d)]-_0xee63fa[_0x43a9de(0x28b)])_0x693949=![];}else{if(Math['abs'](_0x16f9fe)*_0x6f0376[_0x43a9de(0x1b6)]>_0x162be9[_0x43a9de(0x22d)])_0x693949=![];}}return _0x693949;}async function getBalances(_0xc37b73=!![]){const _0x4bf5ba=_0x3df64e;let _0x5b10d3=0x0,_0x3bdf71;const _0x55d336=config[_0x4bf5ba(0x260)];if(config[_0x4bf5ba(0x2c1)]&&config[_0x4bf5ba(0x1f8)]<0x0)await validate24hChanges();currentCoins[_0x4bf5ba(0x1a6)](_0xc7a5b3=>{const _0x238013=_0x4bf5ba;if(_0xc7a5b3[_0x238013(0x256)]!=config[_0x238013(0x29f)]){let _0x5d2d6a=global[_0x238013(0x1de)][noslash(_0xc7a5b3[_0x238013(0x162)])];_0x3bdf71=_0xc7a5b3[_0x238013(0x225)]?0x1/_0x5d2d6a:_0x5d2d6a;}else _0x3bdf71=0x1;let _0x3828fb=_0xc7a5b3['number']*_0x3bdf71;_0x5b10d3+=_0x3828fb,_0xc7a5b3[_0x238013(0x1b6)]=formatResult(Number(_0x3bdf71),0x8),_0xc7a5b3['value']=_0x3828fb;}),currentCoins[_0x4bf5ba(0x1a6)](_0x313167=>{const _0x569bc9=_0x4bf5ba;let _0x32b232=config['portfolio']['find'](_0x34942b=>_0x34942b[_0x569bc9(0x256)]==_0x313167[_0x569bc9(0x256)]),_0x25705d=Number(_0x32b232[_0x569bc9(0x29d)]),_0x5305af=_0x313167['value']/_0x5b10d3*0x64,_0x354d7f=_0x25705d*_0x5b10d3/0x64/_0x313167[_0x569bc9(0x1b6)]-_0x313167[_0x569bc9(0x22d)];_0x313167['distribution']=formatResult(_0x5305af,0x3),_0x313167['target']=formatResult(_0x25705d,0x3),_0x313167[_0x569bc9(0x29b)]=formatResult(_0x354d7f,0x8),_0x313167[_0x569bc9(0x2c0)]='',_0x313167[_0x569bc9(0x15b)]=![];if(_0x313167['coin']!=config[_0x569bc9(0x29f)]){if(_0x313167[_0x569bc9(0x29d)]>_0x25705d)_0x313167[_0x569bc9(0x2c0)]=_0x569bc9(0x220),_0x313167['valid']=checkMinimums(_0x313167);else _0x313167[_0x569bc9(0x29d)]<_0x25705d&&(_0x313167[_0x569bc9(0x2c0)]=_0x569bc9(0x231),_0x313167[_0x569bc9(0x15b)]=checkMinimums(_0x313167));}_0x313167[_0x569bc9(0x1fc)]=_0x313167[_0x569bc9(0x29d)]/_0x313167[_0x569bc9(0x214)]-0x1;if(_0x313167[_0x569bc9(0x2c5)]==_0x569bc9(0x28e)||_0x313167[_0x569bc9(0x2c5)]==_0x569bc9(0x193))_0x313167['orderstatus']=_0x569bc9(0x23b);}),currentCoins[_0x4bf5ba(0x1bb)]((_0x564cd7,_0x3683bf)=>_0x564cd7[_0x4bf5ba(0x1fc)]<_0x3683bf[_0x4bf5ba(0x1fc)]?0x1:_0x3683bf['delta']<_0x564cd7[_0x4bf5ba(0x1fc)]?-0x1:0x0);const _0x5aa427=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5aa427['eur'],'usd':_0x5aa427[_0x4bf5ba(0x1c6)],'portfolio':JSON[_0x4bf5ba(0x26e)](currentCoins),'threshold':_0x55d336},proxyEmit(_0x4bf5ba(0x1d8),{'serverversion':serverversion,'balances':lastBalances});if(_0xc37b73){if(config[_0x4bf5ba(0x2c1)])headlessMode({'portfolio':currentCoins,'threshold':_0x55d336});else{if(lockOrders==ORDERS[_0x4bf5ba(0x18e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x55d336});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2b8479=getNormalizedPerformance();getStartingBalances(_0x2b8479),emitPerformance(_0x2b8479);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x17328d=getNormalizedPerformance();emitPerformance(_0x17328d),getStartingBalances(_0x17328d),logger[_0x4bf5ba(0x2dc)](_0x4bf5ba(0x2cb));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2db837=_0x3df64e;if(!lastBalances)return;let _0x2e0e64=[],_0x30ec80,_0x536bac=JSON['parse'](lastBalances['portfolio']);_0x536bac[_0x2db837(0x1bb)]((_0x1aa424,_0x1e8f5a)=>_0x1aa424[_0x2db837(0x256)]>_0x1e8f5a['coin']?0x1:_0x1e8f5a['coin']>_0x1aa424['coin']?-0x1:0x0),_0x536bac[_0x2db837(0x1a6)](_0x4c6658=>{const _0x1ef2a4=_0x2db837;let _0x5c8d00={'coin':_0x4c6658[_0x1ef2a4(0x256)],'number':_0x4c6658[_0x1ef2a4(0x22d)],'price':_0x4c6658[_0x1ef2a4(0x1b6)]};_0x2e0e64[_0x1ef2a4(0x1fe)](_0x5c8d00);});const _0x11c665=await getFiat();_0x30ec80={'date':lastBalances[_0x2db837(0x1e9)][_0x2db837(0x1fa)]('\x20')[0x0],'eur':_0x11c665[_0x2db837(0x292)],'usd':_0x11c665['usd'],'coins':_0x2e0e64};let _0xae94=dbPerformance[_0x2db837(0x1e1)](_0x2db837(0x2a5))[_0x2db837(0x27b)]({'date':_0x30ec80[_0x2db837(0x1f9)]})[_0x2db837(0x2cc)]();_0xae94?_0x30ec80[_0x2db837(0x1f9)]!=config[_0x2db837(0x293)]&&dbPerformance['get'](_0x2db837(0x2a5))[_0x2db837(0x27b)]({'date':_0x30ec80[_0x2db837(0x1f9)]})[_0x2db837(0x2ad)](_0x30ec80)['write']():dbPerformance['get'](_0x2db837(0x2a5))[_0x2db837(0x1fe)](_0x30ec80)[_0x2db837(0x161)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1d2d86=_0x3df64e;let _0xe3795a=[];if(dbPerformance['has'](_0x1d2d86(0x2a5))['value']()){let _0x5ec65e=dbPerformance['get'](_0x1d2d86(0x2a5))[_0x1d2d86(0x264)]()['filter'](_0x2fedd2=>{const _0x964afc=_0x1d2d86;if(_0x2fedd2[_0x964afc(0x269)][_0x964afc(0x19c)]==0x0)return![];else return!![];})['sortBy'](_0x1d2d86(0x1f9))[_0x1d2d86(0x2cc)](),_0x4ab8ff=[...config[_0x1d2d86(0x165)]];_0x4ab8ff[_0x1d2d86(0x1bb)]((_0x4fb3d6,_0x2badac)=>_0x4fb3d6[_0x1d2d86(0x1f9)]>_0x2badac[_0x1d2d86(0x1f9)]?-0x1:_0x2badac[_0x1d2d86(0x1f9)]>_0x4fb3d6[_0x1d2d86(0x1f9)]?0x1:0x0);let _0x5d3b8f=0x1,_0x4a8601=[],_0x4e9e9e=0x0;_0x5ec65e[_0x1d2d86(0x1e2)]()[_0x1d2d86(0x225)]()['forEach']((_0x49047a,_0x214f96)=>{const _0x4b6ab6=_0x1d2d86;if(_0x4ab8ff[_0x4e9e9e]){if(_0x5ec65e[_0x5ec65e[_0x4b6ab6(0x19c)]-_0x214f96]&&_0x4ab8ff[_0x4e9e9e][_0x4b6ab6(0x1f9)]==_0x5ec65e[_0x5ec65e[_0x4b6ab6(0x19c)]-_0x214f96][_0x4b6ab6(0x1f9)]){if(_0x214f96<_0x5ec65e[_0x4b6ab6(0x19c)]){let _0x5ecd11=0x0,_0x32975f=0x0;_0x5ec65e[_0x5ec65e['length']-_0x214f96][_0x4b6ab6(0x269)][_0x4b6ab6(0x1a6)](_0x133659=>{const _0x81bc99=_0x4b6ab6;_0x32975f+=_0x133659[_0x81bc99(0x22d)]*_0x133659[_0x81bc99(0x176)];}),_0x4ab8ff[_0x4e9e9e][_0x4b6ab6(0x170)][_0x4b6ab6(0x1a6)](_0x5b3ae7=>{const _0x297919=_0x4b6ab6;_0x5ecd11+=_0x5b3ae7[_0x297919(0x22d)]*_0x5b3ae7[_0x297919(0x176)];}),_0x5d3b8f*=_0x5ecd11/(_0x32975f-_0x5ecd11)+0x1;}_0x4e9e9e++;}}let _0x48311a=0x0;_0x49047a[_0x4b6ab6(0x269)][_0x4b6ab6(0x1a6)](_0x14ab14=>{const _0x111998=_0x4b6ab6;_0x48311a+=_0x14ab14['number']*_0x14ab14[_0x111998(0x176)];}),_0x4a8601[_0x5ec65e[_0x4b6ab6(0x19c)]-_0x214f96-0x1]=_0x48311a*(_0x5d3b8f-0x1);});let _0x487c66=[];_0x4ab8ff=[...config['liquidity']]||[];let _0x407abb=0x0;_0x4e9e9e=0x0,_0x5ec65e[_0x1d2d86(0x1a6)]((_0x195ef2,_0x3d4d63)=>{const _0x35ac8e=_0x1d2d86;if(_0x4ab8ff[_0x4e9e9e]){const _0x381d2e=fns[_0x35ac8e(0x237)](_0x4ab8ff[_0x4e9e9e][_0x35ac8e(0x1f9)],_0x35ac8e(0x1b2),new Date()),_0x2f1170=fns[_0x35ac8e(0x237)](_0x195ef2[_0x35ac8e(0x1f9)],_0x35ac8e(0x1b2),new Date());if(fns['isEqual'](_0x381d2e,_0x2f1170)){let _0x2e361d=0x0;_0x4ab8ff[_0x4e9e9e]['changes'][_0x35ac8e(0x1a6)](_0x2da1ca=>{const _0xdcdacf=_0x35ac8e;!_0x487c66[_0x2da1ca[_0xdcdacf(0x256)]]?_0x487c66[_0x2da1ca[_0xdcdacf(0x256)]]=_0x2da1ca[_0xdcdacf(0x22d)]:(_0x2e361d=_0x487c66[_0x2da1ca[_0xdcdacf(0x256)]],_0x487c66[_0x2da1ca[_0xdcdacf(0x256)]]+=_0x2da1ca[_0xdcdacf(0x22d)]);const _0xb55ee8=_0x195ef2[_0xdcdacf(0x269)][_0xdcdacf(0x27b)](_0x5a5b2d=>_0x5a5b2d[_0xdcdacf(0x256)]==_0x2da1ca[_0xdcdacf(0x256)]);(!_0xb55ee8||_0xb55ee8[_0xdcdacf(0x22d)]==0x0)&&(_0x407abb+=(-_0x2da1ca['number']-_0x2e361d)*_0x2da1ca[_0xdcdacf(0x176)]);}),_0x4e9e9e++;}}_0x195ef2[_0x35ac8e(0x269)][_0x35ac8e(0x1a6)]((_0x23e769,_0x2c5fbc)=>{const _0x4c8520=_0x35ac8e;_0x487c66[_0x23e769[_0x4c8520(0x256)]]&&(_0x23e769['initial']=_0x487c66[_0x23e769[_0x4c8520(0x256)]]);}),_0xe3795a['push']({'date':_0x195ef2[_0x35ac8e(0x1f9)],'eur':_0x195ef2[_0x35ac8e(0x292)],'usd':_0x195ef2[_0x35ac8e(0x1c6)],'offset':_0x4a8601[_0x3d4d63],'netoffset':_0x407abb,'coins':_0x195ef2[_0x35ac8e(0x269)]});});}return _0xe3795a;}function emitPerformance(_0x131ae3){const _0x3df6fd=_0x3df64e;_0x131ae3[_0x3df6fd(0x19c)]!==0x0?(proxyEmit('performance',_0x131ae3),lastPerformanceEmitted=getDate()):proxyEmit(_0x3df6fd(0x277),[]);}function getPerf(_0x147a8b,_0x4d143a){const _0x117731=_0x3df64e;let _0x1be301=0x0,_0x4d1afa=0x0,_0x52de61=0x0;_0x147a8b[_0x117731(0x269)][_0x117731(0x1a6)](_0x4319b9=>{const _0x45e285=_0x117731;_0x1be301+=_0x4319b9[_0x45e285(0x22d)]*_0x4319b9[_0x45e285(0x176)];});_0x4d143a&&(_0x1be301+=_0x147a8b[_0x117731(0x28b)]);if(config[_0x117731(0x29f)]===_0x117731(0x1b8)||config['basecoin']===_0x117731(0x18a))_0x4d1afa=_0x1be301*_0x147a8b['eur'],_0x52de61=_0x1be301*_0x147a8b[_0x117731(0x1c6)];else{if(usdBasecoins[_0x117731(0x2de)](config[_0x117731(0x29f)]))_0x4d1afa=_0x1be301*_0x147a8b[_0x117731(0x292)]/_0x147a8b[_0x117731(0x1c6)],_0x52de61=_0x1be301;else config[_0x117731(0x29f)]===_0x117731(0x283)&&(_0x4d1afa=_0x1be301,_0x52de61=_0x1be301*_0x147a8b['usd']/_0x147a8b['eur']);}return[_0x1be301,_0x4d1afa,_0x52de61];}function getKPIs(_0x5af698,_0x21adfa=_0x3df64e(0x283)){const _0x6c717c=_0x3df64e,_0x31540d=config[_0x6c717c(0x29f)],_0x1ad858=lastBalances,_0x5d305f=currentCoins,_0x24ff0a=getNormalizedPerformance(),_0x3e7c31=_0x5af698===_0x6c717c(0x29f)?_0x31540d:_0x5af698===_0x6c717c(0x275)||_0x5af698===_0x6c717c(0x182)?_0x21adfa:'Net\x20'+_0x31540d,_0x4b2611=_0x5af698===_0x6c717c(0x262)?_0x6c717c(0x2b2):_0x5af698===_0x6c717c(0x182)?'Net\x20effect':_0x3e7c31+'\x20value',_0x194851=_0x5af698==='net-basecoin'||_0x5af698===_0x6c717c(0x182)?'Net\x20effect':_0x3e7c31+_0x6c717c(0x200);let _0x49518e=0x0;_0x5d305f[_0x6c717c(0x1a6)](_0x111180=>{const _0x53b11b=_0x6c717c;_0x49518e+=_0x111180[_0x53b11b(0x22d)]*_0x111180[_0x53b11b(0x1b6)];});if(_0x5af698==='fiat'||_0x5af698===_0x6c717c(0x182)){if(_0x31540d===_0x6c717c(0x1b8)||_0x31540d===_0x6c717c(0x18a))_0x49518e=_0x49518e*(_0x21adfa==='EUR'?_0x1ad858[_0x6c717c(0x292)]:_0x1ad858['usd']);else{if(usdBasecoins[_0x6c717c(0x2de)](_0x31540d))_0x49518e=_0x49518e*(_0x21adfa===_0x6c717c(0x283)?_0x1ad858[_0x6c717c(0x292)]/_0x1ad858[_0x6c717c(0x1c6)]:0x1);else _0x31540d===_0x6c717c(0x283)&&(_0x49518e=_0x49518e*(_0x21adfa==='EUR'?0x1:_0x1ad858[_0x6c717c(0x1c6)]/_0x1ad858[_0x6c717c(0x292)]));}}let _0x2e6759;if(_0x49518e!==0x0){if(_0x5af698==='basecoin')_0x2e6759=(_0x49518e/startingBalances['basecoin']-0x1)*0x64;else{if(_0x21adfa==='EUR')_0x2e6759=(_0x49518e/startingBalances['eur']-0x1)*0x64;else _0x2e6759=(_0x49518e/startingBalances[_0x6c717c(0x1c6)]-0x1)*0x64;}let _0x11d1e4=0x0;if(startingBalances['coins'])_0x5d305f[_0x6c717c(0x1a6)](_0x56dfbc=>{const _0x657a96=_0x6c717c;let _0x245a23=startingBalances[_0x657a96(0x269)][_0x657a96(0x27b)](_0x2ba27e=>_0x2ba27e[_0x657a96(0x256)]===_0x56dfbc[_0x657a96(0x256)]);if(_0x245a23&&_0x245a23['coin']&&_0x56dfbc['number']!==0x0)_0x11d1e4+=_0x245a23['number']*_0x56dfbc['last'];});let _0x31b8e8=0x0;if(_0x24ff0a[_0x6c717c(0x19c)]!==0x0){let _0x61839f=_0x24ff0a[_0x24ff0a[_0x6c717c(0x19c)]-0x1];_0x31b8e8=_0x61839f[_0x6c717c(0x1e4)];}_0x11d1e4-=_0x31b8e8;_0x5af698===_0x6c717c(0x262)&&(_0x2e6759=(_0x49518e-_0x11d1e4)/startingBalances['basecoin']*0x64,_0x49518e=_0x49518e-_0x11d1e4);if(_0x5af698===_0x6c717c(0x182)){let _0x3a63e5=_0x21adfa===_0x6c717c(0x283)?startingBalances['eur']:startingBalances[_0x6c717c(0x1c6)];if(_0x31540d===_0x6c717c(0x1b8)||_0x31540d===_0x6c717c(0x18a))_0x11d1e4=_0x21adfa===_0x6c717c(0x283)?_0x11d1e4*_0x1ad858[_0x6c717c(0x292)]:_0x11d1e4*_0x1ad858[_0x6c717c(0x1c6)];else{if(usdBasecoins[_0x6c717c(0x2de)](_0x31540d))_0x11d1e4=_0x21adfa===_0x6c717c(0x283)?_0x11d1e4*_0x1ad858[_0x6c717c(0x292)]/_0x1ad858[_0x6c717c(0x1c6)]:_0x11d1e4;else _0x31540d===_0x6c717c(0x283)&&(_0x11d1e4=_0x21adfa===_0x6c717c(0x283)?_0x11d1e4:_0x11d1e4*_0x1ad858[_0x6c717c(0x1c6)]/_0x1ad858['eur']);}_0x2e6759=(_0x49518e-_0x11d1e4)/_0x3a63e5*0x64,_0x49518e=_0x49518e-_0x11d1e4;}if(_0x2e6759){if(_0x2e6759<0x64)_0x2e6759=_0x2e6759[_0x6c717c(0x1ab)](0x2);else{if(_0x2e6759<0x3e8)_0x2e6759=_0x2e6759[_0x6c717c(0x1ab)](0x1);else _0x2e6759=_0x2e6759[_0x6c717c(0x1ab)](0x0);}}else _0x2e6759=Number('0')['toFixed'](0x2);if(_0x49518e){if(Math[_0x6c717c(0x2d1)](_0x49518e)<0.000001)_0x49518e=_0x49518e['toFixed'](0x2);else{if(Math[_0x6c717c(0x2d1)](_0x49518e)<0.1)_0x49518e=_0x49518e['toFixed'](0x6);else{if(Math[_0x6c717c(0x2d1)](_0x49518e)<0x1)_0x49518e=_0x49518e[_0x6c717c(0x1ab)](0x5);else{if(Math[_0x6c717c(0x2d1)](_0x49518e)<0xa)_0x49518e=_0x49518e['toFixed'](0x4);else{if(Math[_0x6c717c(0x2d1)](_0x49518e)<0x64)_0x49518e=_0x49518e[_0x6c717c(0x1ab)](0x3);else{if(Math[_0x6c717c(0x2d1)](_0x49518e)<0x3e8)_0x49518e=_0x49518e[_0x6c717c(0x1ab)](0x2);else _0x49518e=_0x49518e['toFixed'](0x2);}}}}}}else _0x49518e=Number('0')[_0x6c717c(0x1ab)](0x2);}else _0x2e6759=Number('0')['toFixed'](0x2);return{'value':_0x49518e,'change':_0x2e6759,'leftTxt':_0x4b2611,'rightTxt':_0x194851};}async function getStartingBalances(_0x5e4921,_0x583f54=!![]){const _0x4bbddb=_0x3df64e;if(_0x5e4921[_0x4bbddb(0x19c)]!==0x0){const [_0x1d117d,_0x42da28,_0x1e2068]=getPerf(_0x5e4921[0x0],!![]);let _0x16dd69=[];config[_0x4bbddb(0x1ef)][_0x4bbddb(0x1a6)](_0x1e4308=>{const _0x37728a=_0x4bbddb;let _0x1bcd71=0x0,_0x2a85d8;config['liquidity']['forEach'](_0x254298=>{const _0x4ef953=_0x1b89;let _0x4ccea9=_0x254298['changes'][_0x4ef953(0x27b)](_0xb0a36d=>_0xb0a36d['coin']==_0x1e4308[_0x4ef953(0x256)]);if(_0x4ccea9){_0x1bcd71+=_0x4ccea9[_0x4ef953(0x22d)];if(!_0x2a85d8)_0x2a85d8=_0x4ccea9[_0x4ef953(0x176)];}}),_0x16dd69['push']({'coin':_0x1e4308[_0x37728a(0x256)],'number':_0x1bcd71,'initialprice':_0x2a85d8});});const _0x1372f2={'basecoin':_0x1d117d,'eur':_0x42da28,'usd':_0x1e2068,'coins':_0x16dd69};if(_0x583f54)proxyEmit(_0x4bbddb(0x1a4),_0x1372f2);startingBalances=_0x1372f2;}}function headlessMode(_0x1d9775){const _0x26e3e4=_0x3df64e;let _0x5509c4=_0x1d9775['portfolio'],_0x208084=_0x1d9775[_0x26e3e4(0x260)],_0x3425a2=[];for(let _0x321280 of _0x5509c4){if(_0x321280[_0x26e3e4(0x256)]!=config[_0x26e3e4(0x29f)]){if(_0x321280[_0x26e3e4(0x1fc)]>=_0x208084/0x64){if(_0x321280[_0x26e3e4(0x15b)])_0x3425a2[_0x26e3e4(0x1fe)](_0x321280);}else{if(_0x321280[_0x26e3e4(0x1fc)]<=-_0x208084/0x64){if(_0x321280[_0x26e3e4(0x15b)])_0x3425a2['push'](_0x321280);}}}}_0x3425a2[_0x26e3e4(0x19c)]>0x0&&placeOrder(_0x3425a2);}function notifyBalance(_0x56c7b8){const _0x4fcbfc=_0x3df64e;let _0x4c28d8=_0x56c7b8[_0x4fcbfc(0x1ef)],_0x80b9f=_0x56c7b8[_0x4fcbfc(0x260)],_0x6c2430=[];for(let _0x32e62b of _0x4c28d8){if(_0x32e62b[_0x4fcbfc(0x256)]!=config[_0x4fcbfc(0x29f)]){if(_0x32e62b[_0x4fcbfc(0x1fc)]>=_0x80b9f/0x64){if(_0x32e62b[_0x4fcbfc(0x15b)])_0x6c2430[_0x4fcbfc(0x1fe)](_0x32e62b);}else{if(_0x32e62b[_0x4fcbfc(0x1fc)]<=-_0x80b9f/0x64){if(_0x32e62b[_0x4fcbfc(0x15b)])_0x6c2430[_0x4fcbfc(0x1fe)](_0x32e62b);}}}}if(_0x6c2430[_0x4fcbfc(0x19c)]>0x0){let _0x52dbb8=_0x6c2430[_0x4fcbfc(0x1ca)](_0x4e7ffa=>_0x4e7ffa['coin']);_0x52dbb8[_0x4fcbfc(0x1bb)]();let _0x3245a7=_0x52dbb8[_0x4fcbfc(0x1b7)](',\x20');if(!lastCoinsToBalance)logHistory(_0x4fcbfc(0x25a),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x3245a7;}}function symbolToCoin(_0x48f9ec){const _0x4a3a44=_0x3df64e;let _0x816abb;if(_0x48f9ec[_0x4a3a44(0x2de)]('/'+config[_0x4a3a44(0x29f)]))_0x816abb=_0x48f9ec[_0x4a3a44(0x270)]('/'+config['basecoin'],'');if(_0x48f9ec[_0x4a3a44(0x2de)](config[_0x4a3a44(0x29f)]+'/'))_0x816abb=_0x48f9ec[_0x4a3a44(0x270)](config['basecoin']+'/','');return _0x816abb;}async function unlockOrders(){const _0x3e9504=_0x3df64e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3e9504(0x21a)]){logger[_0x3e9504(0x2dc)](_0x3e9504(0x24a)),lockOrders=ORDERS[_0x3e9504(0x229)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x351318=await getCoins();[currentCoins,currentCoinsAll]=_0x351318,validateOrdersState=_0x3e9504(0x1cb),persistOpenOrders([]),lockOrders=ORDERS[_0x3e9504(0x18e)],logger[_0x3e9504(0x2dc)](_0x3e9504(0x1b3));}}async function validateOrders(_0x2bec73){const _0x36dfb4=_0x3df64e;if(_0x2bec73)validateOrdersState=_0x2bec73;logger[_0x36dfb4(0x2dc)](_0x36dfb4(0x2b0)+validateOrdersState+_0x36dfb4(0x1ce)+(lockOrders==0x1?_0x36dfb4(0x2af):lockOrders==0x2?'ORDERS.UNLOCKING':_0x36dfb4(0x160)));let _0x1342a9=[],_0x5cd921=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x36dfb4(0x197)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x36dfb4(0x21a)])return;logger['debug'](_0x36dfb4(0x198)+validateOrdersState),lastOrders['forEach'](_0x28d415=>{const _0x57babb=_0x36dfb4;let _0x48deaa=![];_0x28d415[_0x57babb(0x28e)]>0x0&&(_0x48deaa=!![]),_0x1342a9['push'](_0x48deaa),_0x48deaa&&config['ordertype']!=_0x57babb(0x1d7)&&logHistory(_0x57babb(0x20e),_0x57babb(0x1f2)+_0x28d415[_0x57babb(0x162)]+'\x20'+_0x28d415[_0x57babb(0x2c0)]+'\x20#'+formatResult(_0x28d415[_0x57babb(0x28e)],0x8)+'\x20@'+formatResult(_0x28d415[_0x57babb(0x176)],0x8));}),_0x1342a9[_0x36dfb4(0x1a6)]((_0x520109,_0x2c3f59)=>{const _0x14de6b=_0x36dfb4;if(_0x520109)lastOrders[_0x14de6b(0x1ad)](_0x2c3f59,0x1);}),persistOpenOrders(lastOrders);const _0x4b0755=coolingDown?_0x36dfb4(0x284):_0x36dfb4(0x2ab);if(validateOrdersState==_0x36dfb4(0x1cb)){validateOrdersState=_0x36dfb4(0x1d3);if(_0x1342a9['includes'](![])){if(config[_0x36dfb4(0x1bc)]==_0x36dfb4(0x1d7)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x36dfb4(0x1d3)){if(_0x1342a9[_0x36dfb4(0x2de)](![])){}else{if(allOrdersPlaced){if(config[_0x36dfb4(0x1bc)]==_0x36dfb4(0x1d7)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x36dfb4(0x209))_0x1342a9[_0x36dfb4(0x2de)](![])&&(config[_0x36dfb4(0x1bc)]==_0x36dfb4(0x1d7)?logHistory(_0x36dfb4(0x1dd),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x36dfb4(0x26d)](_0x5cd921*validateOrderInterval/0xea60)+_0x36dfb4(0x2e9)+_0x4b0755):(await cancelOrders(),logHistory(_0x36dfb4(0x1dd),_0x36dfb4(0x267)+Math[_0x36dfb4(0x26d)](_0x5cd921*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4b0755))),await unlockOrders();else{if(validateOrdersState==_0x36dfb4(0x298)){if(config[_0x36dfb4(0x1bc)]!=_0x36dfb4(0x1d7))logHistory('success',_0x36dfb4(0x22c)+_0x4b0755);await unlockOrders();}}}}}async function cancelOrders(){const _0x1d718a=_0x3df64e;lastOrders[_0x1d718a(0x1a6)](async _0x32b82a=>{const _0x2ca2d1=_0x1d718a;try{const _0x4a88ac=await exchange['cancelOrder'](_0x32b82a[_0x2ca2d1(0x247)],_0x32b82a[_0x2ca2d1(0x162)]);}catch(_0x4d4ccb){if(_0x4d4ccb[_0x2ca2d1(0x23a)]()[_0x2ca2d1(0x2de)](_0x2ca2d1(0x287))){}else await handleError(_0x4d4ccb,_0x2ca2d1(0x2d4));}});}async function initCoinResults(_0x4043a9){const _0x24502f=_0x3df64e;_0x4043a9?logger[_0x24502f(0x2dc)](_0x24502f(0x23e)+_0x4043a9):logger[_0x24502f(0x2dc)](_0x24502f(0x285)),config[_0x24502f(0x1ef)][_0x24502f(0x1a6)](_0x3628c3=>{const _0x440536=_0x24502f;if(!_0x3628c3[_0x440536(0x23c)]&&_0x3628c3[_0x440536(0x256)]!=config[_0x440536(0x29f)]){const _0xcc84e=currentCoins[_0x440536(0x27b)](_0x483a84=>_0x483a84[_0x440536(0x256)]==_0x3628c3[_0x440536(0x256)]),_0x45f5cf=global[_0x440536(0x1de)][noslash(_0x3628c3[_0x440536(0x162)])];let _0x3d5525=_0xcc84e?_0xcc84e[_0x440536(0x22d)]:null,_0x25ced1=_0x3628c3[_0x440536(0x225)]?0x1/_0x45f5cf:_0x45f5cf,_0x4751c5;config['liquidity'][_0x440536(0x1a6)](_0x27f2f4=>{const _0x181c2f=_0x440536;!_0x4751c5&&(_0x4751c5=_0x27f2f4['changes'][_0x181c2f(0x27b)](_0x5eaa32=>_0x5eaa32[_0x181c2f(0x256)]==_0x3628c3[_0x181c2f(0x256)]),_0x4751c5&&(_0x3d5525=_0x4751c5[_0x181c2f(0x22d)],_0x25ced1=_0x4751c5[_0x181c2f(0x176)]));});let _0x196e2f=dbCoinResults[_0x440536(0x1e1)](_0x440536(0x269))[_0x440536(0x27b)]({'coin':_0x3628c3[_0x440536(0x256)]})[_0x440536(0x2cc)]();if(!_0x196e2f){const _0x48f52b={'coin':_0x3628c3[_0x440536(0x256)],'number':_0x3d5525,'breakeven':_0x25ced1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x440536(0x1e1)](_0x440536(0x269))[_0x440536(0x1fe)](_0x48f52b)[_0x440536(0x161)]();}else{if(_0x4043a9&&_0x3628c3[_0x440536(0x256)]==_0x4043a9){const _0x4b5902={'coin':_0x3628c3['coin'],'number':_0x3d5525,'breakeven':_0x25ced1,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x440536(0x1e1)]('coins')[_0x440536(0x27b)]({'coin':_0x3628c3[_0x440536(0x256)]})[_0x440536(0x2ad)](_0x4b5902)[_0x440536(0x161)]();}}}});}async function updateCoinResults(_0x38a059,_0x147410=![]){const _0x52416c=_0x3df64e;let _0x213f3b,_0x3e631a,_0x301002,_0x325490,_0x29d351,_0xe5e6e1,_0x50ec2a=dbCoinResults[_0x52416c(0x1e1)]('coins')[_0x52416c(0x27b)]({'coin':_0x38a059[_0x52416c(0x256)]})[_0x52416c(0x2cc)](),_0x1d7d34=![];_0x50ec2a&&Object['entries'](_0x50ec2a)[_0x52416c(0x1a6)](([_0x1b99f8,_0x189dbb])=>{if(_0x189dbb==null)_0x1d7d34=!![];});(!_0x50ec2a||_0x1d7d34)&&(await initCoinResults(_0x38a059['coin']),_0x50ec2a=dbCoinResults[_0x52416c(0x1e1)](_0x52416c(0x269))['find']({'coin':_0x38a059[_0x52416c(0x256)]})['value']());_0x38a059[_0x52416c(0x225)]&&(_0xe5e6e1={'filled':_0x38a059[_0x52416c(0x28e)]*_0x38a059[_0x52416c(0x176)],'amount':_0x38a059[_0x52416c(0x28e)]*_0x38a059[_0x52416c(0x176)],'side':_0x38a059[_0x52416c(0x2c0)]=='sell'?_0x52416c(0x231):'sell','price':0x1/_0x38a059[_0x52416c(0x176)]},_0x38a059={..._0x38a059,..._0xe5e6e1});_0x147410?_0x3e631a=_0x38a059[_0x52416c(0x2c0)]==_0x52416c(0x231)?_0x50ec2a[_0x52416c(0x22d)]+_0x38a059[_0x52416c(0x28e)]:_0x50ec2a[_0x52416c(0x22d)]-_0x38a059['filled']:_0x3e631a=await getCoinNumber(_0x38a059[_0x52416c(0x256)]);if(_0x38a059[_0x52416c(0x1cd)]&&_0x38a059[_0x52416c(0x1cd)]['currency']==config[_0x52416c(0x29f)])_0x213f3b=_0x38a059[_0x52416c(0x1cd)][_0x52416c(0x242)];else{if(_0x38a059[_0x52416c(0x1cd)]&&_0x38a059[_0x52416c(0x1cd)]['currency']==_0x52416c(0x1b5)&&!_0x147410)_0x213f3b=_0x38a059[_0x52416c(0x1cd)][_0x52416c(0x242)]*global[_0x52416c(0x1de)][_0x52416c(0x1b5)+config['basecoin']];else _0x213f3b=defaultFee*_0x38a059[_0x52416c(0x28e)]*_0x38a059[_0x52416c(0x176)];}_0x38a059['side']=='buy'?(_0x301002=_0x3e631a!=0x0?(_0x50ec2a[_0x52416c(0x1a0)]*_0x50ec2a['number']+_0x38a059[_0x52416c(0x176)]*(_0x3e631a-_0x50ec2a[_0x52416c(0x22d)])+_0x213f3b)/_0x3e631a:0x0,_0x325490=_0x50ec2a[_0x52416c(0x2ac)]):(_0x301002=_0x3e631a!=0x0?(_0x50ec2a[_0x52416c(0x1a0)]*_0x50ec2a[_0x52416c(0x22d)]-_0x38a059[_0x52416c(0x176)]*(_0x50ec2a[_0x52416c(0x22d)]-_0x3e631a)+_0x213f3b)/_0x3e631a:0x0,_0x325490=_0x50ec2a[_0x52416c(0x2ac)]+(_0x38a059[_0x52416c(0x176)]-_0x50ec2a[_0x52416c(0x1a0)])*_0x38a059[_0x52416c(0x28e)]);_0x29d351=(_0x38a059[_0x52416c(0x176)]-_0x301002-_0x213f3b/_0x38a059[_0x52416c(0x28e)])*_0x3e631a;let _0x1b07d2={'coin':_0x38a059[_0x52416c(0x256)],'number':_0x3e631a,'breakeven':formatResult(_0x301002,0x8),'realized':formatResult(_0x325490,0x8),'unrealized':formatResult(_0x29d351,0x8),'fees':formatResult(_0x50ec2a[_0x52416c(0x1ac)]+_0x213f3b,0x8),'sells':_0x38a059['side']==_0x52416c(0x220)?_0x50ec2a['sells']+0x1:_0x50ec2a['sells'],'buys':_0x38a059['side']==_0x52416c(0x231)?_0x50ec2a[_0x52416c(0x1c1)]+0x1:_0x50ec2a[_0x52416c(0x1c1)]};dbCoinResults['get']('coins')[_0x52416c(0x27b)]({'coin':_0x38a059['coin']})['assign'](_0x1b07d2)['write']();if(!_0x147410){if(_0x38a059[_0x52416c(0x1cd)]&&_0x38a059['fee'][_0x52416c(0x25d)]==_0x52416c(0x1b5)){const _0x47ef2b=currentCoins['find'](_0x703414=>_0x703414['coin']==_0x52416c(0x1b5));if(_0x47ef2b){let _0x24ce65=dbCoinResults[_0x52416c(0x1e1)](_0x52416c(0x269))[_0x52416c(0x27b)]({'coin':_0x52416c(0x1b5)})[_0x52416c(0x2cc)]();_0x1b07d2={..._0x24ce65,'number':_0x47ef2b[_0x52416c(0x22d)]},dbCoinResults[_0x52416c(0x1e1)](_0x52416c(0x269))['find']({'coin':'BNB'})['assign'](_0x1b07d2)[_0x52416c(0x161)]();}}}}async function placeOrder(_0x4a1e31){const _0x4769b7=_0x3df64e,_0x21a8a9=config['ordertype']==_0x4769b7(0x1d7)?_0x4769b7(0x1d7):_0x4769b7(0x15d);if(lockOrders==ORDERS[_0x4769b7(0x18e)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4769b7(0x21a)],allOrdersPlaced=![],validateOrdersState=_0x4769b7(0x1cb);let _0xbd515e=![];lastOrders=[];for(const _0x7e25d3 of _0x4a1e31){let _0x550e5b,_0xdae35,_0x20fc55,_0x3fa09f,_0x301f1c,_0x21ae73=_0x7e25d3['symbol'];try{const _0x57b38e=await exchange['fetchTicker'](_0x21ae73);_0x550e5b=_0x7e25d3[_0x4769b7(0x225)]?0x1/_0x7e25d3[_0x4769b7(0x1b6)]:_0x7e25d3[_0x4769b7(0x1b6)],_0xdae35=_0x57b38e['bid'],_0x20fc55=_0x57b38e[_0x4769b7(0x250)];_0x7e25d3[_0x4769b7(0x225)]?(_0x3fa09f=_0x7e25d3[_0x4769b7(0x2c0)]==_0x4769b7(0x231)?_0x4769b7(0x220):_0x4769b7(0x231),_0x301f1c=Math[_0x4769b7(0x2d1)](_0x7e25d3[_0x4769b7(0x29b)])/_0x550e5b):(_0x3fa09f=_0x7e25d3[_0x4769b7(0x2c0)],_0x301f1c=Math[_0x4769b7(0x2d1)](_0x7e25d3[_0x4769b7(0x29b)]));_0x21a8a9==_0x4769b7(0x15d)&&(config[_0x4769b7(0x1bc)]==_0x4769b7(0x1c0)&&(_0x550e5b=_0x3fa09f=='buy'?_0xdae35:_0x20fc55),config['ordertype']==_0x4769b7(0x28a)&&(_0x550e5b=_0x3fa09f=='buy'?_0x20fc55:_0xdae35));_0x301f1c=formatResult(_0x301f1c,0x8),_0x550e5b=formatResult(_0x550e5b,0x8);const _0x52c5ad=_0x3fa09f==_0x4769b7(0x220)?config[_0x4769b7(0x16a)]?String[_0x4769b7(0x1a1)]('0x'+config[_0x4769b7(0x16a)])+'\x20':'':config[_0x4769b7(0x1f1)]?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x3be634=_0x21a8a9=='market'?'Market':config[_0x4769b7(0x1bc)]==_0x4769b7(0x1c0)?_0x4769b7(0x1df):_0x4769b7(0x271),_0xcaf6e4=(Math['floor'](Math[_0x4769b7(0x1c8)]()*0x35a4e900)+0x5f5e100)[_0x4769b7(0x23a)]();lastOrders[_0x4769b7(0x1fe)]({'customId':_0xcaf6e4,'symbol':_0x21ae73,'coin':_0x7e25d3['coin'],'amount':_0x301f1c,'price':_0x550e5b,'side':_0x3fa09f,'reverse':_0x7e25d3['reverse'],'filled':0x0});if(_0x21a8a9=='market')logHistory(_0x4769b7(0x20e),''+_0x52c5ad+_0x3be634+_0x4769b7(0x163)+_0x21ae73+'\x20'+_0x3fa09f+'\x20#'+formatResult(_0x301f1c,0x8)+'\x20@'+formatResult(_0x550e5b,0x8));else logHistory('order',''+_0x52c5ad+_0x3be634+_0x4769b7(0x163)+_0x21ae73+'\x20'+_0x3fa09f+'\x20#'+formatResult(_0x301f1c,0x8)+'\x20@'+formatResult(_0x550e5b,0x8));let _0x248b13;_0x21a8a9==_0x4769b7(0x1d7)?_0x3fa09f==_0x4769b7(0x231)&&['Bybit',_0x4769b7(0x25b),_0x4769b7(0x1f0),_0x4769b7(0x1aa),_0x4769b7(0x2d2)][_0x4769b7(0x2de)](config[_0x4769b7(0x2b1)])?_0x248b13=await exchange['createOrder'](_0x21ae73,_0x21a8a9,_0x3fa09f,_0x301f1c,_0x550e5b):_0x248b13=await exchange[_0x4769b7(0x2c7)](_0x21ae73,_0x21a8a9,_0x3fa09f,_0x301f1c,undefined):_0x248b13=await exchange[_0x4769b7(0x2c7)](_0x21ae73,_0x21a8a9,_0x3fa09f,_0x301f1c,_0x550e5b);logger[_0x4769b7(0x2dc)](_0x4769b7(0x1fb)+_0x248b13['id']+_0x4769b7(0x21f)+_0xcaf6e4);const _0x298cec=lastOrders['length']-0x1;if(_0x298cec>=0x0&&lastOrders[_0x298cec][_0x4769b7(0x2a8)]==_0xcaf6e4){lastOrders[_0x298cec][_0x4769b7(0x247)]=_0x248b13['id'];if(_0x248b13[_0x4769b7(0x249)])lastOrders[_0x298cec][_0x4769b7(0x249)]=_0x248b13['amount'];if(_0x248b13[_0x4769b7(0x176)])lastOrders[_0x298cec][_0x4769b7(0x176)]=_0x248b13[_0x4769b7(0x176)];lastOrders[_0x298cec][_0x4769b7(0x1cd)]=_0x248b13[_0x4769b7(0x1cd)];}if(config['cooldown']!=0x0){let _0x366bc1=null;if(cooldownTracker[_0x4769b7(0x19c)]==config[_0x4769b7(0x2c2)]-0x1)_0x366bc1=cooldownTracker['shift']();const _0x23341d=getTimeStamp();cooldownTracker[_0x4769b7(0x1fe)](_0x23341d);if(_0x366bc1){const _0x171782=fns[_0x4769b7(0x215)](new Date(_0x23341d),new Date(_0x366bc1));if(_0x171782<cooldownInterval){logHistory(_0x4769b7(0x207),_0x4769b7(0x2ca)+config[_0x4769b7(0x2c2)]+_0x4769b7(0x192)+cooldownInterval/0x3c+_0x4769b7(0x234)+cooldownPeriod/(0xe10*0x3e8)+_0x4769b7(0x211)),coolingDown=!![];break;}}}}catch(_0x541bd6){if(_0x541bd6[_0x4769b7(0x23a)]()[_0x4769b7(0x2de)](_0x4769b7(0x164)))lastOrders=lastOrders['filter'](_0x2c6c8e=>_0x2c6c8e[_0x4769b7(0x162)]!=_0x21ae73),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x21ae73),_0xbd515e=!![];else{if(_0x541bd6[_0x4769b7(0x23a)]()[_0x4769b7(0x2de)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x4769b7(0x1dc)](_0x2deb68=>_0x2deb68[_0x4769b7(0x162)]!=_0x21ae73),logHistory(_0x4769b7(0x207),'Order\x20amount\x20is\x20invalid:\x20'+_0x21ae73),_0xbd515e=!![];else{if(_0x541bd6['toString']()[_0x4769b7(0x2de)]('InvalidOrder'))lastOrders=lastOrders[_0x4769b7(0x1dc)](_0x11523a=>_0x11523a[_0x4769b7(0x162)]!=_0x21ae73),logHistory(_0x4769b7(0x207),_0x4769b7(0x24f)+_0x21ae73),logger[_0x4769b7(0x2dc)](_0x541bd6),_0xbd515e=!![];else _0x541bd6[_0x4769b7(0x23a)]()['includes'](_0x4769b7(0x296))?(lastOrders=lastOrders['filter'](_0x3dfc22=>_0x3dfc22['symbol']!=_0x21ae73),logHistory(_0x4769b7(0x207),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x21ae73),_0xbd515e=!![]):(lastOrders=lastOrders[_0x4769b7(0x1dc)](_0x309681=>_0x309681[_0x4769b7(0x162)]!=_0x21ae73),await handleError(_0x541bd6,'placeOrder()',_0x21ae73));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4769b7(0x19c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x559721=config[_0x4769b7(0x1bc)]==_0x4769b7(0x1d7)?validateOrderTimeout*0x3c*0x3e8:config[_0x4769b7(0x197)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x221452=_0x4769b7;validateOrders(_0x221452(0x209));},_0x559721);}else unlockOrders();_0xbd515e&&config[_0x4769b7(0x2c1)]&&(logHistory(_0x4769b7(0x207),_0x4769b7(0x26a)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4769b7(0x1dd),_0x4769b7(0x2a9)));}else{if(coolingDown)!config['headless']&&logHistory(_0x4769b7(0x207),_0x4769b7(0x173));else lockOrders!=ORDERS['UNLOCKED']&&(!config['headless']&&(config[_0x4769b7(0x1bc)]==_0x4769b7(0x1d7)?logHistory(_0x4769b7(0x207),_0x4769b7(0x2f0)):logHistory(_0x4769b7(0x207),_0x4769b7(0x1c9))));}}function persistOpenOrders(_0xbcc413){const _0x55e71c=_0x3df64e,_0x230f02={...config,'openOrders':_0xbcc413};let _0x19c039=dbConfig[_0x55e71c(0x1e1)](_0x55e71c(0x1f3))[_0x55e71c(0x27b)]({'botID':botID})[_0x55e71c(0x2cc)]();_0x19c039&&dbConfig[_0x55e71c(0x1e1)]('bot')[_0x55e71c(0x27b)]({'botID':botID})['assign'](_0x230f02)[_0x55e71c(0x161)]();}function restoreOrders(){const _0x18495c=_0x3df64e;let _0x1ec86a;config[_0x18495c(0x238)]&&allOpenOrders['forEach'](_0x5dd7d0=>{const _0x1df4b4=_0x18495c,_0x54573a=config['openOrders'][_0x1df4b4(0x27b)](_0x4efb3e=>_0x4efb3e[_0x1df4b4(0x247)]==_0x5dd7d0['id']);_0x54573a&&(lastOrders[_0x1df4b4(0x1fe)](_0x54573a),_0x1ec86a=_0x5dd7d0['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x18495c(0x21a)],validateOrdersState=_0x18495c(0x1d3),allOrdersPlaced=!![];const _0x2abf71=new Date()[_0x18495c(0x263)](),_0x987052=config[_0x18495c(0x1bc)]==_0x18495c(0x1d7)?validateOrderTimeout*0x3c*0x3e8:config[_0x18495c(0x197)]*0x3c*0x3e8;if(_0x1ec86a+_0x987052>_0x2abf71){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xc6100e=_0x18495c;validateOrders(_0xc6100e(0x209));},_0x1ec86a+_0x987052-_0x2abf71);}else validateOrders(_0x18495c(0x209));}}async function sendMetricsTelegram(){const _0x2dd159=_0x3df64e;if(!coinsLoaded){process[_0x2dd159(0x1ff)]({'telegrammsg':_0x2dd159(0x1b0)},_0x5695d8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x231085='';if(config[_0x2dd159(0x1bd)])_0x231085=_0x2dd159(0x2d8)+config['botname']+_0x2dd159(0x16f);else _0x231085=_0x2dd159(0x1cc)+botID+_0x2dd159(0x16f);const _0x5e7e79=getKPIs(_0x2dd159(0x29f)),_0x50a0fc=getKPIs(_0x2dd159(0x275),config[_0x2dd159(0x275)]),_0x45d53a=getKPIs(_0x2dd159(0x262)),_0x72ffef=getKPIs(_0x2dd159(0x182),config[_0x2dd159(0x275)]);_0x231085+=_0x2dd159(0x21d),_0x231085+=_0x5e7e79['leftTxt']+'\x20:\x20'+_0x5e7e79[_0x2dd159(0x2cc)]+'\x0a',_0x231085+=_0x5e7e79['rightTxt']+':\x20'+_0x5e7e79[_0x2dd159(0x2cd)]+'%\x0a',_0x231085+=_0x50a0fc[_0x2dd159(0x185)]+_0x2dd159(0x17b)+_0x50a0fc[_0x2dd159(0x2cc)]+'\x0a',_0x231085+=_0x50a0fc[_0x2dd159(0x17f)]+':\x20'+_0x50a0fc[_0x2dd159(0x2cd)]+'%\x0a',_0x231085+=_0x45d53a[_0x2dd159(0x185)]+':\x20'+_0x45d53a['value']+'\x20('+config[_0x2dd159(0x29f)]+')\x0a',_0x231085+=_0x45d53a[_0x2dd159(0x17f)]+':\x20'+_0x45d53a[_0x2dd159(0x2cd)]+_0x2dd159(0x188)+config[_0x2dd159(0x29f)]+')\x0a',_0x231085+=_0x72ffef[_0x2dd159(0x185)]+':\x20'+_0x72ffef[_0x2dd159(0x2cc)]+'\x20('+config[_0x2dd159(0x275)]+')\x0a',_0x231085+=_0x72ffef['rightTxt']+':\x20'+_0x72ffef[_0x2dd159(0x2cd)]+'%\x20('+config[_0x2dd159(0x275)]+')\x0a',_0x231085+='</pre>',process[_0x2dd159(0x1ff)]({'telegrammsg':_0x231085},_0x23104c=>{});}async function sendPortfolioTelegram(){const _0x21c54f=_0x3df64e;if(!coinsLoaded){process[_0x21c54f(0x1ff)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x1d02f8=>{});return;}let _0x415e2e='';if(config[_0x21c54f(0x1bd)])_0x415e2e=_0x21c54f(0x2d8)+config[_0x21c54f(0x187)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x415e2e=_0x21c54f(0x1cc)+botID+_0x21c54f(0x2d3);_0x415e2e+=_0x21c54f(0x21d),_0x415e2e+=_0x21c54f(0x17e),_0x415e2e+=_0x21c54f(0x222),_0x415e2e+=_0x21c54f(0x17e),currentCoins[_0x21c54f(0x1a6)](_0x1358cb=>{const _0x571a45=_0x21c54f;_0x415e2e+=_0x1358cb['coin'][_0x571a45(0x15f)](0x7)+'|\x20'+formatPad(_0x1358cb[_0x571a45(0x29d)],0x2,0x6)+'|\x20'+formatPad(_0x1358cb[_0x571a45(0x214)],0x2,0x6)+'|\x20'+formatPad(_0x1358cb[_0x571a45(0x1fc)]*0x64,0x2,0x6)+'\x0a';}),_0x415e2e+='</pre>',process['send']({'telegrammsg':_0x415e2e},_0x28ecbf=>{});}function formatPad(_0x4a959f,_0x14845d,_0x4873f9){const _0x3fe7b4=_0x3df64e,_0x4fc568=formatResultString(_0x4a959f,_0x14845d);return _0x4fc568?_0x4fc568[_0x3fe7b4(0x2b9)](_0x4873f9):''[_0x3fe7b4(0x2b9)](_0x4873f9);}function logHistory(_0x7a782,_0x175df3,_0x396bfc=''){const _0x51456a=_0x3df64e;logger['full'](''+_0x175df3);let _0x1325fa={'time':getTimeStamp(),'type':_0x7a782,'event':_0x175df3};dbLogs[_0x51456a(0x1e1)]('logs')[_0x51456a(0x1fe)](_0x1325fa)[_0x51456a(0x161)]();if(_0x396bfc=='')_0x396bfc=_0x175df3;proxyEmit('event',{'log':_0x1325fa,'summary':_0x396bfc}),process[_0x51456a(0x1ff)]({'telegram':{..._0x1325fa,'botname':config['botname'],'showname':config[_0x51456a(0x1bd)]}},_0x3ca990=>{});}function emitHistory(_0x438171={}){const _0x5ca7bf=_0x3df64e;Object['keys'](_0x438171)[_0x5ca7bf(0x19c)]==0x0&&(_0x438171={'type':['order',_0x5ca7bf(0x26c)],'event':'','page':0x1});if(_0x438171['type'][_0x5ca7bf(0x2de)](_0x5ca7bf(0x26c)))_0x438171[_0x5ca7bf(0x1c7)][_0x5ca7bf(0x1ad)](_0x438171[_0x5ca7bf(0x1c7)][_0x5ca7bf(0x1b9)]('event'),0x1,_0x5ca7bf(0x207),'warning',_0x5ca7bf(0x1dd));if(dbLogs[_0x5ca7bf(0x2bd)](_0x5ca7bf(0x184))[_0x5ca7bf(0x2cc)]()){let _0x121e64=dbLogs['get'](_0x5ca7bf(0x184))[_0x5ca7bf(0x1dc)](_0x522d25=>{const _0x54e6a4=_0x5ca7bf;if(_0x438171['type']['length']==0x0)return![];else return _0x438171[_0x54e6a4(0x1c7)]['includes'](_0x522d25[_0x54e6a4(0x1c7)]);})['filter'](_0x24cc5f=>{const _0x5ee859=_0x5ca7bf;if(_0x438171['event']=='')return!![];else return _0x24cc5f[_0x5ee859(0x26c)]['toLowerCase']()[_0x5ee859(0x2de)](_0x438171['event']['toLowerCase']());})[_0x5ca7bf(0x24d)](_0x5ca7bf(0x1e9)),_0x5da06e=_0x121e64[_0x5ca7bf(0x2cc)]()[_0x5ca7bf(0x19c)];_0x121e64=_0x121e64['reverse']()['slice']((_0x438171[_0x5ca7bf(0x217)]-0x1)*logPageSize,_0x438171[_0x5ca7bf(0x217)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x5ca7bf(0x1ba),{'logs':_0x121e64,'total':_0x5da06e});}else proxyEmit(_0x5ca7bf(0x1ba),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x3da4e8){const _0x38c700=_0x3df64e;if(dbLogs[_0x38c700(0x2bd)](_0x38c700(0x184))[_0x38c700(0x2cc)]()){const _0x4c3b8a=dbLogs[_0x38c700(0x1e1)](_0x38c700(0x184))[_0x38c700(0x24d)](_0x38c700(0x1e9))[_0x38c700(0x1dc)](_0x2ea113=>{const _0x162cb2=_0x38c700;return _0x2ea113[_0x162cb2(0x1c7)]==_0x162cb2(0x20e);})[_0x38c700(0x2cc)]();dbLogs[_0x38c700(0x1e1)]('logs')['remove']()[_0x38c700(0x161)](),dbLogs[_0x38c700(0x1e1)](_0x38c700(0x184))[_0x38c700(0x2ad)](_0x4c3b8a)[_0x38c700(0x161)](),emitHistory(_0x3da4e8);}}async function pauseBot(){const _0x2f1ac5=_0x3df64e,_0x4d90e7=new Date()[_0x2f1ac5(0x263)]();if(!lastErrorShown||_0x4d90e7-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x4d90e7;!lastBotPause?(lastBotPause=_0x4d90e7,consecutivePauses=0x1):(_0x4d90e7-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2f1ac5(0x1ff)]({'stop':_0x2f1ac5(0x28c)},_0x52f651=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2f1ac5(0x263)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x4baa84=_0x3df64e;botPaused=!![],await sleep(0x3e8),process[_0x4baa84(0x1ff)]({'stop':_0x4baa84(0x299)},_0x2a8960=>{}),await sleep(0x7d0);}function _0x1b89(_0x546a85,_0x39c837){const _0x2a8529=_0x370d();return _0x1b89=function(_0x3744b9,_0x414e45){_0x3744b9=_0x3744b9-0x15b;let _0x370da7=_0x2a8529[_0x3744b9];return _0x370da7;},_0x1b89(_0x546a85,_0x39c837);}async function handleErrorNoStop(_0x26684b,_0x4de8b8){const _0xea0f1e=_0x3df64e;if(botPaused)return;const _0x5cbd7a=config[_0xea0f1e(0x2b1)]||_0xea0f1e(0x2c6);if(_0x4de8b8)logger['debug'](_0xea0f1e(0x174)+_0x4de8b8);if(_0x26684b[_0xea0f1e(0x23a)]()[_0xea0f1e(0x2de)](_0xea0f1e(0x16c)))logHistory(_0xea0f1e(0x207),_0x5cbd7a+_0xea0f1e(0x1eb));else{if(_0x26684b[_0xea0f1e(0x23a)]()[_0xea0f1e(0x2de)](_0xea0f1e(0x212)))logHistory(_0xea0f1e(0x207),_0x5cbd7a+_0xea0f1e(0x240));else _0x26684b[_0xea0f1e(0x23a)]()['includes']('AuthenticationError')?(logHistory(_0xea0f1e(0x207),_0x5cbd7a+_0xea0f1e(0x1bf)),logHistory(_0xea0f1e(0x207),_0xea0f1e(0x183))):await handleError(_0x26684b,null);}}async function handleError(_0x40ea82,_0x395c40,_0x228c66=''){const _0x6726be=_0x3df64e;if(botPaused)return;const _0x3a6ecd=config['exchange']||_0x6726be(0x2c6);if(_0x395c40)logger[_0x6726be(0x2dc)]('Exception\x20thrown\x20in\x20'+_0x395c40);if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)]('DDoSProtection')||_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x218)))logHistory('error',_0x3a6ecd+_0x6726be(0x1e7)+pauseBotMsg),await pauseBot();else{if(_0x40ea82[_0x6726be(0x23a)]()['includes'](_0x6726be(0x278))||_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x25c)))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x224)+pauseBotMsg),await pauseBot();else{if(_0x40ea82[_0x6726be(0x23a)]()['includes'](_0x6726be(0x171)))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x2c8)+pauseBotMsg),await pauseBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x1e5)))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x2e6)+pauseBotMsg),await pauseBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x6726be(0x207),_0x6726be(0x29a)),logHistory(_0x6726be(0x207),_0x6726be(0x1cf)),await killBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x194)))logHistory(_0x6726be(0x207),_0x6726be(0x16e)),logHistory(_0x6726be(0x207),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x40ea82 instanceof ccxt[_0x6726be(0x2b6)])logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x226)+pauseBotMsg),logger[_0x6726be(0x2dc)](_0x6726be(0x266),_0x40ea82),await pauseBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x16c)))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x2c9)),logHistory('error',_0x6726be(0x1cf)),await killBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x286)),logHistory(_0x6726be(0x207),_0x6726be(0x1cf)),await killBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x2ea)))logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x2cf)),logHistory(_0x6726be(0x207),_0x6726be(0x1cf)),await killBot();else{if(_0x40ea82[_0x6726be(0x23a)]()[_0x6726be(0x2de)](_0x6726be(0x16b)))logHistory(_0x6726be(0x207),_0x6726be(0x2b8)+_0x228c66);else _0x40ea82 instanceof ccxt[_0x6726be(0x248)]?(logHistory(_0x6726be(0x207),_0x3a6ecd+_0x6726be(0x195)),logger[_0x6726be(0x2dc)](_0x6726be(0x266),_0x40ea82)):(logHistory('error',_0x6726be(0x210)+pauseBotMsg),logger[_0x6726be(0x2dc)](_0x6726be(0x266),_0x40ea82),await pauseBot());}}}}}}}}}}}function formatResult(_0x3360b1,_0xd9177f){const _0x3f7b97=_0x3df64e;return parseFloat(_0x3360b1[_0x3f7b97(0x1ab)](_0xd9177f));}function formatResultTruncate(_0x10f5b3,_0x2d0725){const _0x2742ce=_0x3df64e;let _0x29d2a5=formatResultString(_0x10f5b3,0xa),_0x3c0ea5=_0x29d2a5[_0x2742ce(0x1b9)]('.');return _0x3c0ea5!=-0x1&&(_0x29d2a5=_0x29d2a5[_0x2742ce(0x1e2)](0x0,_0x3c0ea5+_0x2d0725+0x1)),Number(_0x29d2a5);}function formatResultString(_0x31f513,_0x16f0a0){const _0x3693db=_0x3df64e;let _0x137fad;if(!(''+_0x31f513)['includes']('e'))_0x137fad=+(Math['round'](_0x31f513+'e+'+_0x16f0a0)+'e-'+_0x16f0a0);else{let _0x3c80cd=(''+_0x31f513)[_0x3693db(0x1fa)]('e'),_0x4591a1='';+_0x3c80cd[0x1]+_0x16f0a0>0x0&&(_0x4591a1='+'),_0x137fad=+(Math['round'](+_0x3c80cd[0x0]+'e'+_0x4591a1+(+_0x3c80cd[0x1]+_0x16f0a0))+'e-'+_0x16f0a0);}return Number(_0x137fad)[_0x3693db(0x1ab)](_0x16f0a0);}function getServerTime(){const _0x3a457e=_0x3df64e,_0x5bcae9=new Date();return _0x5bcae9['getFullYear']()+'/'+(_0x5bcae9[_0x3a457e(0x1ea)]()+0x1)[_0x3a457e(0x23a)]()[_0x3a457e(0x2b9)](0x2,'0')+'/'+_0x5bcae9[_0x3a457e(0x2e4)]()[_0x3a457e(0x23a)]()[_0x3a457e(0x2b9)](0x2,'0')+'\x20'+_0x5bcae9[_0x3a457e(0x1a3)]()[_0x3a457e(0x23a)]()[_0x3a457e(0x2b9)](0x2,'0')+':'+_0x5bcae9['getMinutes']()[_0x3a457e(0x23a)]()[_0x3a457e(0x2b9)](0x2,'0')+':'+_0x5bcae9[_0x3a457e(0x2a0)]()[_0x3a457e(0x23a)]()[_0x3a457e(0x2b9)](0x2,'0');}function getTimeStamp(){const _0x2fc945=_0x3df64e,_0x4e38cb=shiftedTime();return _0x4e38cb['getFullYear']()+'/'+(_0x4e38cb['getMonth']()+0x1)[_0x2fc945(0x23a)]()[_0x2fc945(0x2b9)](0x2,'0')+'/'+_0x4e38cb[_0x2fc945(0x2e4)]()['toString']()[_0x2fc945(0x2b9)](0x2,'0')+'\x20'+_0x4e38cb[_0x2fc945(0x1a3)]()['toString']()[_0x2fc945(0x2b9)](0x2,'0')+':'+_0x4e38cb[_0x2fc945(0x1e3)]()['toString']()[_0x2fc945(0x2b9)](0x2,'0')+':'+_0x4e38cb[_0x2fc945(0x2a0)]()[_0x2fc945(0x23a)]()[_0x2fc945(0x2b9)](0x2,'0');}function getDate(){const _0x30a0ae=_0x3df64e,_0x5771cd=shiftedTime();return _0x5771cd[_0x30a0ae(0x232)]()+'/'+(_0x5771cd[_0x30a0ae(0x1ea)]()+0x1)[_0x30a0ae(0x23a)]()[_0x30a0ae(0x2b9)](0x2,'0')+'/'+_0x5771cd[_0x30a0ae(0x2e4)]()[_0x30a0ae(0x23a)]()['padStart'](0x2,'0');}function getHour(){const _0x14b3fe=_0x3df64e,_0x1e9108=shiftedTime();return _0x1e9108['getHours']()[_0x14b3fe(0x23a)]()[_0x14b3fe(0x2b9)](0x2,'0');}function sleep(_0x4d21f2){return new Promise(_0x3f858d=>setTimeout(_0x3f858d,_0x4d21f2));}function shiftedTime(){const _0x19d799=_0x3df64e,_0x383f37=new Date();let _0x27f780=_0x383f37;if(config&&config[_0x19d799(0x1a9)]!==0x0)_0x27f780=fns[_0x19d799(0x205)](_0x383f37,{'hours':config['timeshift']});return _0x27f780;}function timer(_0x473523){const _0x3a45b7=_0x3df64e,_0x48c6bb=new Date();!lasttime?console['log'](getTimeStamp()+_0x3a45b7(0x1d9),_0x473523,_0x48c6bb):console[_0x3a45b7(0x2bf)](getTimeStamp()+_0x3a45b7(0x1d9),_0x473523,(_0x48c6bb-lasttime)/0x3e8),lasttime=_0x48c6bb;}