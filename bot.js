const _0x45172f=_0x5569;(function(_0x442ff2,_0x1bcdb8){const _0x44df41=_0x5569,_0x4e7393=_0x442ff2();while(!![]){try{const _0x1f9958=parseInt(_0x44df41(0x158))/0x1*(parseInt(_0x44df41(0x115))/0x2)+parseInt(_0x44df41(0x112))/0x3+parseInt(_0x44df41(0x1b0))/0x4+-parseInt(_0x44df41(0x160))/0x5+-parseInt(_0x44df41(0xe5))/0x6+parseInt(_0x44df41(0x130))/0x7+-parseInt(_0x44df41(0x159))/0x8;if(_0x1f9958===_0x1bcdb8)break;else _0x4e7393['push'](_0x4e7393['shift']());}catch(_0x43903a){_0x4e7393['push'](_0x4e7393['shift']());}}}(_0x8d89,0xde55e));const _0x3aceca=function(){let _0x380c2f=!![];return function(_0x248681,_0x3c6317){const _0x39f007=_0x380c2f?function(){const _0x5c647f=_0x5569;if(_0x3c6317){const _0x145527=_0x3c6317[_0x5c647f(0x163)](_0x248681,arguments);return _0x3c6317=null,_0x145527;}}:function(){};return _0x380c2f=![],_0x39f007;};}(),_0x2aa63d=_0x3aceca(this,function(){const _0xb26397=_0x5569;return _0x2aa63d[_0xb26397(0x140)]()[_0xb26397(0x114)](_0xb26397(0xfd))['toString']()[_0xb26397(0x1f0)](_0x2aa63d)['search'](_0xb26397(0xfd));});_0x2aa63d();'use strict';const ccxt=require(_0x45172f(0x194)),low=require('lowdb'),FileSync=require(_0x45172f(0x13f)),fs=require('fs'),fns=require(_0x45172f(0x12e)),{WebsocketClient,DefaultLogger}=require(_0x45172f(0x122)),Crypt=require(_0x45172f(0x14a))[_0x45172f(0x108)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];function _0x5569(_0x317169,_0x90acc1){const _0x589122=_0x8d89();return _0x5569=function(_0x2aa63d,_0x3aceca){_0x2aa63d=_0x2aa63d-0xe4;let _0x8d89a0=_0x589122[_0x2aa63d];return _0x8d89a0;},_0x5569(_0x317169,_0x90acc1);}const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x45172f(0x193))[_0x45172f(0xf8)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x45172f(0xed)](botID))return console[_0x45172f(0x178)]('Error:\x20Invalid\x20argument\x20'+botID+_0x45172f(0x1b8)),process[_0x45172f(0x1d9)](0x1);const userID=process[_0x45172f(0x19e)][0x3]||'',configpath=userID?_0x45172f(0x116)+userID+'/':'./config/';!fs[_0x45172f(0x17c)](configpath)&&fs[_0x45172f(0x1b5)](configpath);const configfile=configpath+_0x45172f(0x1c1)+botID+_0x45172f(0x1bd),logfile=configpath+_0x45172f(0x1c1)+botID+_0x45172f(0x127),performancefile=configpath+'bot-'+botID+_0x45172f(0x12c),coinresultsfile=configpath+'bot-'+botID+_0x45172f(0x186),settingsfile=configpath+_0x45172f(0x10f),securefile=configpath+_0x45172f(0x17d),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x45172f(0x1a0)]({'logs':[]})[_0x45172f(0x139)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x45172f(0x1a0)]({'data':[]})[_0x45172f(0x139)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x45172f(0x1a0)]({'bot':[]})[_0x45172f(0x139)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x45172f(0x1a0)]({'coins':[]})[_0x45172f(0x139)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x45172f(0x10b),'symbol':_0x45172f(0xef)},'usd':{'coin':_0x45172f(0x1ee),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x1adc17)=>{},'debug':(..._0x1b4622)=>{},'notice':(..._0x3701e7)=>{},'info':(..._0x5badb2)=>{},'warning':(..._0x1a9d82)=>{},'error':async function(..._0x181854){const _0x1f6692=_0x45172f,_0x43a942=new Date()['getTime']();if(!lastErrorShown||_0x43a942-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1f6692(0x1e7)](),logHistory(_0x1f6692(0x1b7),_0x1f6692(0x15a)+consecutivePauses+_0x1f6692(0x103));let _0x4d24cd='';if(_0x181854[0x0])_0x4d24cd+=_0x181854[0x0];if(_0x181854[0x1]&&_0x181854[0x1]['error']&&_0x181854[0x1][_0x1f6692(0x1b7)]['message'])_0x4d24cd+='\x20-\x20'+_0x181854[0x1][_0x1f6692(0x1b7)][_0x1f6692(0x1d6)];logging(_0x1f6692(0x15a)+consecutivePauses+_0x1f6692(0x180),''+_0x4d24cd),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x45172f(0x13d),'rsaStandard':_0x45172f(0x10c)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x45172f(0x19f)]!=config[_0x45172f(0x19f)]&&updateTimeshift(settings[_0x45172f(0x19f)]);process[_0x45172f(0x1e3)]({'started':_0x45172f(0x1a8)}),initializeProcessListeners();function proxyEmit(_0x378a34,_0x20b54f=null){const _0x44f0bc=_0x45172f;console[_0x44f0bc(0x178)](process[_0x44f0bc(0x1dd)]);if(process['ppid'])process[_0x44f0bc(0x1e3)]({'function':_0x378a34,'args':_0x20b54f});}function initializeProcessListeners(){const _0xb84739=_0x45172f;process['on'](_0xb84739(0x1d6),_0x400a05=>{const _0x5691e7=_0xb84739;switch(Object[_0x5691e7(0xf7)](_0x400a05)[0x0]){case'timeshift':_0x400a05[_0x5691e7(0x19f)]!=undefined&&(settings[_0x5691e7(0x19f)]=_0x400a05[_0x5691e7(0x19f)],updateTimeshift(settings[_0x5691e7(0x19f)]));break;case _0x5691e7(0x17a):switch(_0x400a05['function']){case _0x5691e7(0x12d):initclient();break;case _0x5691e7(0x1ec):emitHistory(_0x400a05[_0x5691e7(0x147)]);break;case'getPortfolio':getPortfolio(_0x400a05[_0x5691e7(0x147)]);break;case _0x5691e7(0x1d8):storeConfiguration(_0x400a05[_0x5691e7(0x147)]);break;case _0x5691e7(0xea):storeHeadless(_0x400a05[_0x5691e7(0x147)]);break;case _0x5691e7(0x120):getStartingBalances();break;case'placeOrder':placeOrder(_0x400a05[_0x5691e7(0x147)]);break;case _0x5691e7(0x177):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1e5ad3=_0x45172f;if(pidBalances)clearTimeout(pidBalances);if(config[_0x1e5ad3(0x135)]!=''){await initExchange(config[_0x1e5ad3(0x135)],config[_0x1e5ad3(0x11f)]);let _0x2ab38b=await loadSymbols();_0x2ab38b&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x3829d2,_0x3493de){const _0x13b679=_0x45172f,_0x5d6b09=ccxt[config['exchange']];let _0x2b95b2;switch(config[_0x13b679(0x196)]){case _0x13b679(0x122):_0x2b95b2=_0x13b679(0x124);break;case _0x13b679(0x1f5):_0x2b95b2='wss://stream.binance.us:9443';break;default:_0x2b95b2='wss://stream.binance.com:9443';}exchange=new _0x5d6b09({'apiKey':_0x3829d2,'secret':_0x3493de,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x3829d2,'api_secret':_0x3493de,'beautify':!![],'wsUrl':_0x2b95b2},logger),config[_0x13b679(0x196)]=='binanceus'&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x13b679(0x18a)},'usd':{'coin':_0x13b679(0x1ee),'symbol':_0x13b679(0xfe)}});}async function loadSymbols(){const _0x251e8c=_0x45172f;let _0x9cc0b0;try{markets=await exchange[_0x251e8c(0x1d5)]();const _0x473141=[_0x251e8c(0x18c),_0x251e8c(0x145),_0x251e8c(0x117)];allSymbols=exchange['symbols'][_0x251e8c(0x1c8)](_0x4d009a=>{const _0x40c2a2=_0x251e8c;let _0x5e9ace=![];return _0x473141[_0x40c2a2(0x125)](_0x1482ab=>{if(_0x4d009a['includes'](_0x1482ab))_0x5e9ace=!![];}),!_0x5e9ace;}),_0x9cc0b0=!![];}catch(_0x50b894){await handleError(_0x50b894,_0x251e8c(0x1d0)),_0x9cc0b0=![];}return _0x9cc0b0;}async function initbot(){const _0xd68674=_0x45172f;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2e484d=dbCoinResults[_0xd68674(0x1b9)]('coins')[_0xd68674(0x10a)]();if(_0x2e484d[_0xd68674(0xee)]==0x0)await resetCoinResults();}async function initclient(){const _0x11701e=_0x45172f;proxyEmit(_0x11701e(0x187),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x11701e(0x119),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function _0x8d89(){const _0xe8f390=['\x20|\x20Error\x20details:\x20','price','loadSymbols()','orderType','asset','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','ask','loadMarkets','message','getDate','storeConfiguration','exit','max','total','getHours','ppid','startprice','progress','userData','limits','Order(s)\x20validated\x20-\x20balancing\x20resumed','send','time','sort','wsKey','getTime','API-key\x20format\x20invalid','starting-balances','success','EUR','emitHistory','Executed\x20','BTCUSDT','DDoSProtection','constructor','Binance\x20API\x20secret\x20is\x20invalid','ExchangeNotAvailable','getSeconds','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','binanceus','sell','fetchTickers','3242832qlbSHl','availableBalance','yyyy-MM-dd\x27T\x27HH:mm:ss','placeOrder()','Unfilled\x20order(s)\x20canceled\x20after\x20','storeHeadless','event','format','test','length','BTC/EUR','settings','Limit\x20(high-margin)','emojisell','close','trade','breakeven','getFullYear','keys','version','coin','realized','round','initws()','(((.+)+)+)+$','BTC/USDT','ordertype','kill','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','side',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','emojibuy','outboundAccountPosition','FILLED','getPortfolio()','Crypt','toFixed','value','BTCEUR','RSA-OAEP','target','timestamp','bb-settings.json','remove','eachDayOfInterval','1416480cAiIJK','sortBy','search','807890NMIYBC','./config/','HOT/EUR','page','balances','\x20orders\x20in\x20less\x20than\x20','min','basecoin','Bot\x20','BUSD','apiSecret','getStartingBalances','order','binance','fee','wss://stream.binance.com:9443','forEach','BNB','-events.json','subscribeSpotKline','threshold','abs','split','-performance.json','initclient','date-fns','\x20>\x20','3116183KmFSvy','padStart','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','replace','bot','apiKey','performance','remainingSymbols','eventType','write','includes','accumulatedQuantity','recreate','sha256','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','lowdb/adapters/FileSync','toString',':\x20Bot\x20','startnumber','symbol','Performance\x20recreation\x20completed\x20successfully','HOT/BTC','subscribeSpotUserDataStream','args','LIMIT','Order(s)\x20not\x20validated\x20after\x20','hybrid-crypto-js','getCloses()','fetchOHLCV','limit-high','\x20order:\x20','data','currency','eur','OrderNotFound','splice','yyyy/MM/dd\x20HH:mm:ss','delta','startdate','Order:\x20','4gcHOVv','20791240AhFeEZ','WebSockets(','showname','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','reverse','bid','closeWs','1327400EKPKRl','spot','coins','apply','buy','restart','botname','Pausing\x20bot\x20for\x205\x20minutes\x20(','configuration-stored','market','reconnected','orderId','formattedMessage','valid','limit-low','isArray','parse','date','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','excluded','Binance\x20API\x20key\x20is\x20invalid','shift','coin-loading-progress','cancelLoading','log','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','function','datetime','existsSync','bb-secure.json','decrypt','toLowerCase',')\x20|\x20Error\x20details:\x20','buys','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','logs','sells','parseISO','-results.json','configuration','push','amount','BTC/BUSD','headless','DAI/','\x20minutes\x20-\x20balancing\x20resumed','InvalidNonce','ticker','recreateHistory()','last','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','./version.json','ccxt','type','exchange','cooldown','************','timeout','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getMinutes','portfolio','fees','argv','timeshift','defaults','privateKey','find','filled','cost','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','fetchOrders','Order(s)\x20filled\x20-\x20balancing\x20resumed','running','Invalid\x20quantity','InsufficientFunds','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','wsMarket','number','reduce','event-history','7129736iUDIMj','Order\x20filled:\x20','Market','assign','createOrder','mkdirSync','BTC','error',',\x20must\x20be\x20a\x203\x20digit\x20number','get','limit','usd','fetchBalance','-config.json','distribution','kline','\x20|\x20Unknown\x20error\x20occured','bot-','secure','offset','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','entries','getCoins()','stringify','filter','yyyy/MM/dd','\x20hour','has','add','getMonth'];_0x8d89=function(){return _0xe8f390;};return _0x8d89();}function cleanws(){const _0x595518=_0x45172f;wsinitialized=![];ws1&&(ws1[_0x595518(0x125)](_0x36248c=>{const _0x4f9f04=_0x595518;try{wsClient[_0x4f9f04(0x15f)](_0x36248c);}catch(_0x4e5497){}}),ws1=[]);if(ws2){try{wsClient[_0x595518(0x15f)](ws2);}catch(_0x9c6578){}ws2=null;}}async function initws(){const _0x3459c5=_0x45172f;cleanws();let _0x36cccc=[];currentCoins[_0x3459c5(0x125)](_0x1a7bf3=>{const _0x41510d=_0x3459c5;if(_0x1a7bf3[_0x41510d(0xf9)]!=config['basecoin'])_0x36cccc['push'](noslash(_0x1a7bf3[_0x41510d(0x143)]));});if(!_0x36cccc[_0x3459c5(0x13a)](stablecoins[_0x3459c5(0x151)][_0x3459c5(0xf9)]))_0x36cccc[_0x3459c5(0x188)](stablecoins[_0x3459c5(0x151)][_0x3459c5(0xf9)]);if(!_0x36cccc[_0x3459c5(0x13a)](stablecoins[_0x3459c5(0x1bb)][_0x3459c5(0xf9)]))_0x36cccc[_0x3459c5(0x188)](stablecoins[_0x3459c5(0x1bb)]['coin']);if(!_0x36cccc[_0x3459c5(0x13a)](_0x3459c5(0x126)+config['basecoin']))_0x36cccc[_0x3459c5(0x188)]('BNB'+config[_0x3459c5(0x11c)]);try{_0x36cccc[_0x3459c5(0x125)]((_0x17afec,_0x415d30)=>{const _0x577656=_0x3459c5;ws1[_0x415d30]=wsClient[_0x577656(0x128)](_0x17afec,'1m');}),ws2=wsClient[_0x3459c5(0x146)](),wsClient['on'](_0x3459c5(0x16c),_0x4e1dfb=>{const _0x389671=_0x3459c5;if(!Array[_0x389671(0x16f)](_0x4e1dfb)&&!_0x4e1dfb[_0x389671(0x1e6)]['includes'](_0x389671(0x1e0))){if(_0x4e1dfb['eventType']===_0x389671(0x1bf)){global[_0x389671(0x18f)][_0x4e1dfb[_0x389671(0x1bf)][_0x389671(0x143)]]=_0x4e1dfb[_0x389671(0x1bf)][_0x389671(0xf3)];return;}}else{if(!Array[_0x389671(0x16f)](_0x4e1dfb)&&_0x4e1dfb[_0x389671(0x1e6)][_0x389671(0x13a)](_0x389671(0x1e0))){if(_0x4e1dfb[_0x389671(0x1ac)][_0x389671(0x13a)](_0x389671(0x161))){updateNumberCoins(_0x4e1dfb);return;}}}}),wsClient['on'](_0x3459c5(0x16a),async _0x38ce51=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x34de6a){await handleError(_0x34de6a,_0x3459c5(0xfc));}let _0x4e9d90,_0x420caf=0x0;loading[_0x3459c5(0x137)]=[];let _0x4c50bb=0x0;currentCoins[_0x3459c5(0x125)](_0x373fbd=>{const _0x422d48=_0x3459c5;if(_0x373fbd[_0x422d48(0xf9)]!=config[_0x422d48(0x11c)])loading['remainingSymbols'][_0x422d48(0x188)](_0x373fbd[_0x422d48(0x143)]);}),loadingCanceled=![];while(_0x4e9d90!=currentCoins[_0x3459c5(0xee)]-0x1){_0x4e9d90=0x0,currentCoins[_0x3459c5(0x125)](_0x1c11df=>{const _0x33eb12=_0x3459c5;_0x1c11df[_0x33eb12(0xf9)]!=config[_0x33eb12(0x11c)]&&global['ticker'][noslash(_0x1c11df[_0x33eb12(0x143)])]&&(loading[_0x33eb12(0x137)]=loading[_0x33eb12(0x137)][_0x33eb12(0x1c8)](_0x5552c7=>_0x5552c7!=_0x1c11df[_0x33eb12(0x143)]),_0x4e9d90++);}),loading[_0x3459c5(0x1df)]=Math[_0x3459c5(0xfb)](_0x4e9d90/(currentCoins[_0x3459c5(0xee)]-0x1)*0x64);_0x4c50bb>0x1e*0x5&&(loading[_0x3459c5(0x199)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4e9d90!=_0x420caf&&(_0x420caf=_0x4e9d90,emitLoadingProgress()),_0x4c50bb++,await sleep(0xc8);}if(_0x4e9d90==currentCoins[_0x3459c5(0xee)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x598c7f=_0x45172f;proxyEmit(_0x598c7f(0x176),loading);}async function getFiat(){const _0x3a4f96=_0x45172f;let _0x3c5486=0x0,_0x453369=0x0;try{_0x3c5486=global['ticker'][stablecoins['eur'][_0x3a4f96(0xf9)]],_0x453369=global[_0x3a4f96(0x18f)][stablecoins[_0x3a4f96(0x1bb)][_0x3a4f96(0xf9)]];}catch(_0x438774){await handleError(_0x438774,'getFiat()');}return{'eur':Number(_0x3c5486),'usd':Number(_0x453369)};}async function setStartDatePerformance(_0x29fccf){const _0x572d88=_0x45172f,_0x29dcad=fns[_0x572d88(0xec)](new Date(_0x29fccf[_0x572d88(0x156)]),_0x572d88(0x1c9));let _0x1b2131=[];_0x1b2131[stablecoins[_0x572d88(0x151)]['coin']]=await getCloses(stablecoins[_0x572d88(0x151)][_0x572d88(0x143)],new Date(_0x29fccf[_0x572d88(0x156)]),0x1),_0x1b2131[stablecoins['usd'][_0x572d88(0xf9)]]=await getCloses(stablecoins[_0x572d88(0x1bb)][_0x572d88(0x143)],new Date(_0x29fccf[_0x572d88(0x156)]),0x1);let _0x34c01a,_0x4c53ee=[];_0x29fccf[_0x572d88(0x19c)][_0x572d88(0x125)](_0x1e1ccd=>{const _0x4eb417=_0x572d88;!_0x1e1ccd[_0x4eb417(0x173)]&&_0x4c53ee['push']({'coin':_0x1e1ccd[_0x4eb417(0xf9)],'number':_0x1e1ccd[_0x4eb417(0x142)],'price':_0x1e1ccd['startprice']});}),_0x34c01a={'date':_0x29dcad,'eur':_0x1b2131[stablecoins[_0x572d88(0x151)][_0x572d88(0xf9)]][0x0],'usd':_0x1b2131[stablecoins[_0x572d88(0x1bb)][_0x572d88(0xf9)]][0x0],'coins':_0x4c53ee};let _0xbdc1e7=dbPerformance['get'](_0x572d88(0x14f))[_0x572d88(0x1a2)]({'date':_0x29dcad})[_0x572d88(0x10a)]();_0xbdc1e7?dbPerformance[_0x572d88(0x1b9)](_0x572d88(0x14f))['find']({'date':_0x29dcad})[_0x572d88(0x1b3)](_0x34c01a)[_0x572d88(0x139)]():dbPerformance['get']('data')['push'](_0x34c01a)[_0x572d88(0x139)](),_0xbdc1e7=dbPerformance['get'](_0x572d88(0x14f))[_0x572d88(0x113)]('date')[_0x572d88(0x10a)](),_0xbdc1e7[_0x572d88(0x125)](_0x565456=>{const _0x4c3ca4=_0x572d88;_0x565456[_0x4c3ca4(0x171)]<_0x29dcad&&dbPerformance[_0x4c3ca4(0x1b9)]('data')['remove']({'date':_0x565456[_0x4c3ca4(0x171)]})[_0x4c3ca4(0x139)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x3d10a8){const _0x4b1d80=_0x45172f;let _0x272b7f,_0x573350=[];logHistory(_0x4b1d80(0x1ea),_0x4b1d80(0x1c4)),_0x3d10a8[_0x4b1d80(0x19c)][_0x4b1d80(0x125)](_0xa09e44=>{const _0x2ddd16=_0x4b1d80;if(_0xa09e44['coin']!=config[_0x2ddd16(0x11c)]&&!_0xa09e44[_0x2ddd16(0x173)])_0x573350[_0x2ddd16(0x188)]({'coin':_0xa09e44[_0x2ddd16(0xf9)],'symbol':_0xa09e44[_0x2ddd16(0x143)]});});let _0x1d16cc=[];try{const _0x210617=fns['format'](fns[_0x4b1d80(0x185)](_0x3d10a8[_0x4b1d80(0x156)]['replace'](/\//g,'-')),_0x4b1d80(0xe7));for(const _0x943096 of _0x573350){if(_0x943096['coin']!=config['basecoin'])_0x272b7f=await exchange[_0x4b1d80(0x1a6)](_0x943096[_0x4b1d80(0x143)],Date['parse'](_0x210617));_0x272b7f[_0x4b1d80(0x125)](_0x46889b=>{const _0x3f7012=_0x4b1d80,_0x3c16e5=_0x943096[_0x3f7012(0x143)][_0x3f7012(0x13a)](config[_0x3f7012(0x11c)]+'/'),_0x250309=fns['format'](fns['parseISO'](_0x46889b[_0x3f7012(0x17b)]),_0x3f7012(0x154)),_0x2f0f88=fns[_0x3f7012(0xec)](fns['parseISO'](_0x46889b[_0x3f7012(0x17b)]),'yyyy/MM/dd');let _0x2038ad;if(_0x46889b[_0x3f7012(0x102)]==_0x3f7012(0x164)&&_0x3c16e5==![])_0x2038ad=_0x46889b[_0x3f7012(0x189)];if(_0x46889b['side']==_0x3f7012(0x164)&&_0x3c16e5==!![])_0x2038ad=-_0x46889b[_0x3f7012(0x189)]*_0x46889b[_0x3f7012(0x1cf)];if(_0x46889b[_0x3f7012(0x102)]==_0x3f7012(0x1f6)&&_0x3c16e5==![])_0x2038ad=-_0x46889b[_0x3f7012(0x189)];if(_0x46889b[_0x3f7012(0x102)]==_0x3f7012(0x1f6)&&_0x3c16e5==!![])_0x2038ad=_0x46889b[_0x3f7012(0x189)]*_0x46889b[_0x3f7012(0x1cf)];_0x1d16cc[_0x3f7012(0x188)]({'timestamp':_0x250309,'date':_0x2f0f88,'coin':_0x943096['coin'],'symbol':_0x943096['symbol'],'type':_0x46889b[_0x3f7012(0x195)],'side':_0x46889b[_0x3f7012(0x102)],'reverse':_0x3c16e5,'amount':formatResult(_0x46889b[_0x3f7012(0x1a3)],0x8),'filled':formatResult(_0x46889b['filled'],0x8),'coinamount':formatResult(_0x2038ad,0x8),'price':formatResult(_0x46889b[_0x3f7012(0x1cf)],0x8)});let _0x52c8d9;if(_0x46889b[_0x3f7012(0x102)]==_0x3f7012(0x164)&&_0x3c16e5==![])_0x52c8d9=-_0x46889b['amount']*_0x46889b[_0x3f7012(0x1cf)];if(_0x46889b[_0x3f7012(0x102)]=='buy'&&_0x3c16e5==!![])_0x52c8d9=_0x46889b[_0x3f7012(0x189)];if(_0x46889b[_0x3f7012(0x102)]==_0x3f7012(0x1f6)&&_0x3c16e5==![])_0x52c8d9=_0x46889b[_0x3f7012(0x189)]*_0x46889b[_0x3f7012(0x1cf)];if(_0x46889b['side']=='sell'&&_0x3c16e5==!![])_0x52c8d9=-_0x46889b[_0x3f7012(0x189)];_0x1d16cc[_0x3f7012(0x188)]({'date':_0x2f0f88,'coin':config[_0x3f7012(0x11c)],'coinamount':formatResult(_0x52c8d9,0x8)});});}_0x1d16cc[_0x4b1d80(0x1e5)]((_0x14d903,_0x3c696b)=>_0x14d903['timestamp']>_0x3c696b[_0x4b1d80(0x10e)]?0x1:_0x3c696b['timestamp']>_0x14d903[_0x4b1d80(0x10e)]?-0x1:0x0),dbLogs[_0x4b1d80(0x1b9)](_0x4b1d80(0x183))['remove']()['write'](),_0x1d16cc[_0x4b1d80(0x125)](_0x4d5ee9=>{const _0x532d18=_0x4b1d80;let _0x2e3d1e;_0x4d5ee9[_0x532d18(0xf9)]!=config['basecoin']&&(_0x2e3d1e={'time':_0x4d5ee9[_0x532d18(0x10e)],'type':_0x532d18(0x121),'event':_0x532d18(0x157)+_0x4d5ee9[_0x532d18(0x143)]+'\x20'+_0x4d5ee9[_0x532d18(0x102)]+'\x20#'+_0x4d5ee9[_0x532d18(0x189)]+'\x20@'+_0x4d5ee9['price']},dbLogs['get']('logs')['push'](_0x2e3d1e)[_0x532d18(0x139)]());});const _0xb014fd=fns[_0x4b1d80(0x111)]({'start':new Date(_0x3d10a8['startdate']),'end':new Date()})['map'](_0x6980c4=>fns[_0x4b1d80(0xec)](_0x6980c4,_0x4b1d80(0x1c9)));let _0x22a2eb=[];_0x3d10a8[_0x4b1d80(0x19c)]['forEach'](_0x1ec436=>{const _0xb2cc48=_0x4b1d80;if(!_0x1ec436[_0xb2cc48(0x173)]){_0x22a2eb[_0x1ec436[_0xb2cc48(0xf9)]]=[];let _0x14a4f8=_0x1ec436['startnumber'];_0xb014fd[_0xb2cc48(0x125)]((_0xb37c7e,_0x1ad2a7)=>{const _0x32f397=_0xb2cc48;let _0x37ee4c=_0x1d16cc[_0x32f397(0x1c8)](_0x5ec600=>_0x5ec600['coin']==_0x1ec436[_0x32f397(0xf9)]&&_0x5ec600['date']==_0xb37c7e);if(_0x37ee4c[_0x32f397(0xee)]!=0x0){let _0x468668=_0x37ee4c[_0x32f397(0x1ae)]((_0x5d9d11,_0x4fd877)=>{return _0x5d9d11+=_0x4fd877['coinamount'],_0x5d9d11;},0x0);_0x14a4f8+=_0x468668;}_0x22a2eb[_0x1ec436[_0x32f397(0xf9)]][_0xb37c7e]=_0x14a4f8;});}});const _0x477d91=[..._0x573350];_0x477d91['push']({'coin':stablecoins[_0x4b1d80(0x151)][_0x4b1d80(0xf9)],'symbol':stablecoins['eur'][_0x4b1d80(0x143)]}),_0x477d91[_0x4b1d80(0x188)]({'coin':stablecoins['usd'][_0x4b1d80(0xf9)],'symbol':stablecoins['usd'][_0x4b1d80(0x143)]});let _0x472c23=[];for(const _0x190e1c of _0x477d91){_0x472c23[_0x190e1c[_0x4b1d80(0xf9)]]=await getCloses(_0x190e1c[_0x4b1d80(0x143)],new Date(_0x3d10a8['startdate']));}dbPerformance[_0x4b1d80(0x1b9)](_0x4b1d80(0x14f))[_0x4b1d80(0x110)]()[_0x4b1d80(0x139)](),_0xb014fd[_0x4b1d80(0x125)]((_0x9c3cbe,_0x102c43)=>{const _0x4755ef=_0x4b1d80;let _0x792ecf,_0x8267bd=[];_0x102c43==0x0?(_0x3d10a8['portfolio'][_0x4755ef(0x125)](_0x20513a=>{const _0xafc59c=_0x4755ef;!_0x20513a[_0xafc59c(0x173)]&&_0x8267bd[_0xafc59c(0x188)]({'coin':_0x20513a[_0xafc59c(0xf9)],'number':_0x20513a[_0xafc59c(0x142)],'price':_0x20513a[_0xafc59c(0x1de)]});}),_0x792ecf={'date':_0x9c3cbe,'eur':_0x472c23[stablecoins[_0x4755ef(0x151)]['coin']][_0x102c43],'usd':_0x472c23[stablecoins['usd'][_0x4755ef(0xf9)]][_0x102c43],'coins':_0x8267bd}):(_0x3d10a8[_0x4755ef(0x19c)][_0x4755ef(0x125)](_0x3d0939=>{const _0x36e1c6=_0x4755ef;!_0x3d0939[_0x36e1c6(0x173)]&&_0x8267bd[_0x36e1c6(0x188)]({'coin':_0x3d0939[_0x36e1c6(0xf9)],'number':_0x22a2eb[_0x3d0939[_0x36e1c6(0xf9)]][_0x9c3cbe],'price':_0x3d0939[_0x36e1c6(0xf9)]==config[_0x36e1c6(0x11c)]?0x1:_0x472c23[_0x3d0939[_0x36e1c6(0xf9)]][_0x102c43]});}),_0x792ecf={'date':_0x9c3cbe,'eur':_0x472c23[stablecoins[_0x4755ef(0x151)][_0x4755ef(0xf9)]][_0x102c43],'usd':_0x472c23[stablecoins[_0x4755ef(0x1bb)][_0x4755ef(0xf9)]][_0x102c43],'coins':_0x8267bd}),dbPerformance[_0x4755ef(0x1b9)](_0x4755ef(0x14f))[_0x4755ef(0x188)](_0x792ecf)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x2e48cc of _0x1d16cc){_0x2e48cc['coin']!=config['basecoin']&&await updateCoinResults(_0x2e48cc);}logHistory(_0x4b1d80(0x1ea),_0x4b1d80(0x144));}catch(_0x2f7d78){await handleError(_0x2f7d78,_0x4b1d80(0x190));}}async function getCloses(_0x4a4c67,_0x21132c,_0x42d4d0=undefined){const _0x116dda=_0x45172f,_0x442ec5='1d';let _0x5e04ab,_0x18d00b;const _0x3b52d8=fns['differenceInCalendarDays'](new Date(),_0x21132c)+0x1;try{const _0x3db5bb=exchange['milliseconds']()-_0x3b52d8*0x18*0xe10*0x3e8;_0x5e04ab=await exchange[_0x116dda(0x14c)](_0x4a4c67,_0x442ec5,_0x3db5bb,_0x42d4d0),_0x18d00b=await exchange[_0x116dda(0xe4)](_0x4a4c67);}catch(_0x2fe6e9){await handleError(_0x2fe6e9,_0x116dda(0x14b));}let _0x3f60ac=ohlcvToCloses(_0x5e04ab);return _0x3f60ac[_0x116dda(0x188)](_0x18d00b[_0x4a4c67][_0x116dda(0x191)]),_0x3f60ac;}function ohlcvToCloses(_0x119956){const _0x3f6df4=_0x45172f;let _0x4295a5=[];return _0x119956[_0x3f6df4(0x125)](function(_0x168597){const _0x48250b=_0x3f6df4;_0x4295a5[_0x48250b(0x188)](_0x168597[0x4]);}),_0x4295a5;}function getConfiguration(_0x3c6571){const _0x193452=_0x45172f;let _0x31de3b=dbConfig[_0x193452(0x1b9)](_0x193452(0x134))[_0x193452(0x1a2)]({'botID':_0x3c6571})[_0x193452(0x10a)]();if(_0x31de3b){let _0x428995=![];!_0x31de3b['exchange']&&(_0x31de3b={..._0x31de3b,'exchange':_0x193452(0x122)},_0x428995=!![]),!_0x31de3b[_0x193452(0x11c)]&&(_0x31de3b={..._0x31de3b,'basecoin':_0x193452(0x1b6)},_0x428995=!![]),!_0x31de3b['ordertype']&&(_0x31de3b={..._0x31de3b,'ordertype':'market'},_0x428995=!![]),!_0x31de3b[_0x193452(0x199)]&&(_0x31de3b={..._0x31de3b,'timeout':0x14},_0x428995=!![]),!_0x31de3b[_0x193452(0x104)]&&(_0x31de3b={..._0x31de3b,'emojibuy':''},_0x428995=!![]),!_0x31de3b[_0x193452(0xf2)]&&(_0x31de3b={..._0x31de3b,'emojisell':''},_0x428995=!![]),!_0x31de3b[_0x193452(0x15b)]&&(_0x31de3b={..._0x31de3b,'showname':![]},_0x428995=!![]),_0x428995&&(_0x31de3b={'botID':_0x31de3b['botID'],'exchange':_0x31de3b['exchange'],'apiKey':_0x31de3b[_0x193452(0x135)],'apiSecret':_0x31de3b['apiSecret'],'basecoin':_0x31de3b[_0x193452(0x11c)],'botname':_0x31de3b[_0x193452(0x166)],'showname':_0x31de3b[_0x193452(0x15b)],'threshold':_0x31de3b['threshold'],'ordertype':_0x31de3b[_0x193452(0xff)],'timeout':_0x31de3b[_0x193452(0x199)],'startdate':_0x31de3b[_0x193452(0x156)],'recreate':_0x31de3b['recreate'],'timeshift':_0x31de3b[_0x193452(0x19f)],'headless':_0x31de3b[_0x193452(0x18b)],'cooldown':_0x31de3b[_0x193452(0x197)],'emojibuy':_0x31de3b[_0x193452(0x104)],'emojisell':_0x31de3b['emojisell'],'portfolio':_0x31de3b[_0x193452(0x19c)]},dbConfig[_0x193452(0x1b9)](_0x193452(0x134))[_0x193452(0x110)]()[_0x193452(0x139)](),dbConfig[_0x193452(0x1b9)](_0x193452(0x134))[_0x193452(0x188)](_0x31de3b)[_0x193452(0x139)]());}else _0x31de3b={'botID':_0x3c6571,'exchange':_0x193452(0x122),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x193452(0x11d)+_0x3c6571,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x193452(0x19f)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x31de3b;}function emittedConfiguration(){const _0x59d7b2=_0x45172f;let _0x1a0b5a;return config[_0x59d7b2(0x135)]==''?_0x1a0b5a=config:_0x1a0b5a={...config,'apiKey':_0x59d7b2(0x198),'apiSecret':_0x59d7b2(0x198)},_0x1a0b5a;}function getSettings(){const _0x3486ab=_0x45172f;return dbSettings[_0x3486ab(0x1b9)](_0x3486ab(0xf0))[_0x3486ab(0x10a)]();}function getSecure(){const _0xca7702=_0x45172f;return dbSecure[_0xca7702(0x1b9)](_0xca7702(0x1c2))['value']()||{};}function updateTimeshift(_0x1ba26c){const _0x320654=_0x45172f;let _0x5e0a07=dbConfig[_0x320654(0x1b9)](_0x320654(0x134))['find']({'botID':botID})['value']();_0x5e0a07&&dbConfig[_0x320654(0x1b9)](_0x320654(0x134))[_0x320654(0x1a2)]({'botID':botID})[_0x320654(0x1b3)]({'timeshift':_0x1ba26c})['write'](),config[_0x320654(0x19f)]=_0x1ba26c,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x207f77){const _0x3a2089=_0x45172f;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x1ab9df=dbConfig[_0x3a2089(0x1b9)](_0x3a2089(0x134))[_0x3a2089(0x1a2)]({'botID':botID})[_0x3a2089(0x10a)]();_0x207f77={..._0x207f77,'apiKey':crypt[_0x3a2089(0x17e)](secure[_0x3a2089(0x1a1)],_0x207f77[_0x3a2089(0x135)])[_0x3a2089(0x1d6)],'apiSecret':crypt[_0x3a2089(0x17e)](secure[_0x3a2089(0x1a1)],_0x207f77[_0x3a2089(0x11f)])['message']};if(_0x1ab9df){if(_0x207f77[_0x3a2089(0x135)]==_0x3a2089(0x198))_0x207f77['apiKey']=config['apiKey'];if(_0x207f77[_0x3a2089(0x11f)]==_0x3a2089(0x198))_0x207f77[_0x3a2089(0x11f)]=config[_0x3a2089(0x11f)];dbConfig['get'](_0x3a2089(0x134))[_0x3a2089(0x1a2)]({'botID':botID})[_0x3a2089(0x1b3)](_0x207f77)[_0x3a2089(0x139)]();}else dbConfig[_0x3a2089(0x1b9)](_0x3a2089(0x134))[_0x3a2089(0x188)](_0x207f77)[_0x3a2089(0x139)](),process[_0x3a2089(0x1e3)]({'status':'enabled','live':_0x3a2089(0x1a8)});config={..._0x207f77};if(config[_0x3a2089(0x13c)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x3a2089(0x1e3)]({'botname':_0x207f77[_0x3a2089(0x166)]}),proxyEmit(_0x3a2089(0x168)),reset();}async function storeHeadless(_0x49cff6){const _0x128c8f=_0x45172f,_0x339aba={...config,'headless':_0x49cff6[_0x128c8f(0x18b)]};let _0x366474=dbConfig[_0x128c8f(0x1b9)](_0x128c8f(0x134))[_0x128c8f(0x1a2)]({'botID':botID})[_0x128c8f(0x10a)]();_0x366474&&dbConfig[_0x128c8f(0x1b9)](_0x128c8f(0x134))[_0x128c8f(0x1a2)]({'botID':botID})[_0x128c8f(0x1b3)](_0x339aba)['write'](),config={..._0x339aba},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x41b591){const _0x19a56e=_0x45172f;return _0x41b591[_0x19a56e(0x133)]('/','');}function updateNumberCoins(_0x4251d3){const _0x28296e=_0x45172f;_0x4251d3[_0x28296e(0x138)]&&_0x4251d3[_0x28296e(0x138)]==_0x28296e(0x105)&&_0x4251d3[_0x28296e(0x119)][_0x28296e(0x125)](_0x69ce58=>{const _0x1c52a5=_0x28296e;let _0x441b7d=currentCoins[_0x1c52a5(0x1a2)](_0x257b2e=>_0x257b2e[_0x1c52a5(0xf9)]==_0x69ce58[_0x1c52a5(0x1d2)]),_0x490eeb=config[_0x1c52a5(0x19c)][_0x1c52a5(0x1a2)](_0x4db037=>_0x4db037['coin']==_0x69ce58['asset']);if(_0x441b7d&&_0x490eeb)_0x441b7d[_0x1c52a5(0x1ad)]=Math['max'](Number(_0x69ce58[_0x1c52a5(0xe6)])+(_0x490eeb[_0x1c52a5(0x1c3)]||0x0),0x0);});if(_0x4251d3['eventType']&&_0x4251d3[_0x28296e(0x138)]=='executionReport'){if(_0x4251d3[_0x28296e(0x1d1)]==_0x28296e(0x148)&&_0x4251d3['orderStatus']==_0x28296e(0x106)){if(lastOrders)lastOrders[_0x28296e(0x125)](_0x2932d4=>{const _0xb0ded3=_0x28296e;if(_0x2932d4[_0xb0ded3(0x16b)]==_0x4251d3[_0xb0ded3(0x16b)]){if(_0x2932d4['reverse'])_0x2932d4[_0xb0ded3(0x1a3)]=_0x4251d3[_0xb0ded3(0x13b)]*_0x2932d4['price'];else _0x2932d4[_0xb0ded3(0x1a3)]=_0x4251d3[_0xb0ded3(0x13b)];}});}}}async function getCoins(_0x56ea55=!![],_0x236968=config[_0x45172f(0x11c)]){const _0x132964=_0x45172f;let _0x3b060e,_0x1a5ef2=[],_0x5a5877=[],_0x117f94=[];try{_0x3b060e=await exchange[_0x132964(0x1bc)](),mybalances=_0x3b060e[_0x132964(0x1db)];if(!_0x56ea55)for(const [_0x4912d6,_0x1e524d]of Object[_0x132964(0x1c5)](mybalances)){_0x117f94[_0x132964(0x188)](_0x4912d6);}else config[_0x132964(0x19c)]['forEach'](_0x51f148=>{const _0x4dd930=_0x132964;if(!_0x51f148[_0x4dd930(0x173)])_0x117f94[_0x4dd930(0x188)](_0x51f148['coin']);});if(_0x236968=='')for(const [_0x53cc9e,_0x3449c6]of Object[_0x132964(0x1c5)](mybalances)){_0x3449c6[_0x132964(0x140)]()!=0x0&&_0x5a5877['push']({'coin':_0x53cc9e});}else for(const [_0x4402a9,_0x42c543]of Object[_0x132964(0x1c5)](mybalances)){if(_0x117f94[_0x132964(0x13a)](_0x4402a9)){const _0x173d8d=config[_0x132964(0x19c)][_0x132964(0x1a2)](_0x348492=>_0x348492[_0x132964(0xf9)]==_0x4402a9);if((_0x42c543[_0x132964(0x140)]()!=0x0||_0x173d8d)&&(allSymbols[_0x132964(0x13a)](_0x4402a9+'/'+_0x236968)||_0x4402a9==_0x236968))_0x5a5877['push']({'coin':_0x4402a9,'symbol':_0x4402a9+'/'+_0x236968,'reverse':![],'number':Math['max'](_0x42c543+(_0x173d8d&&_0x173d8d['offset']||0x0),0x0)}),_0x4402a9!=_0x236968&&_0x1a5ef2[_0x132964(0x188)](_0x4402a9+'/'+_0x236968);else(_0x42c543['toString']()!=0x0||_0x173d8d)&&allSymbols['includes'](_0x236968+'/'+_0x4402a9)&&(_0x5a5877['push']({'coin':_0x4402a9,'symbol':_0x236968+'/'+_0x4402a9,'reverse':!![],'number':Math[_0x132964(0x1da)](_0x42c543+(_0x173d8d&&_0x173d8d['offset']||0x0),0x0)}),_0x4402a9!=_0x236968&&_0x1a5ef2[_0x132964(0x188)](_0x236968+'/'+_0x4402a9));}}}catch(_0x3eb9a1){if(!_0x56ea55){if(_0x3eb9a1[_0x132964(0x140)]()['includes'](_0x132964(0x1e8)))return logHistory(_0x132964(0x1b7),_0x132964(0x174)),![];else{if(_0x3eb9a1[_0x132964(0x140)]()[_0x132964(0x13a)]('AuthenticationError'))return logHistory(_0x132964(0x1b7),_0x132964(0x132)),![];else{if(_0x3eb9a1[_0x132964(0x140)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',_0x132964(0x1f1)),![];else await handleError(_0x3eb9a1,_0x132964(0x1c6));}}}else await handleError(_0x3eb9a1,_0x132964(0x1c6));}return _0x5a5877;}async function getPortfolio(_0x1eb8b2){const _0x2bf0c3=_0x45172f;let _0x407686=[],_0x24c42a=[],_0x3aab1a,_0x2cdf34=[],_0x2213e3,_0x5ea5b6;_0x1eb8b2[_0x2bf0c3(0x135)]===_0x2bf0c3(0x198)||_0x1eb8b2[_0x2bf0c3(0x11f)]===_0x2bf0c3(0x198)?(_0x2213e3=config['apiKey'],_0x5ea5b6=config[_0x2bf0c3(0x11f)]):(_0x2213e3=_0x1eb8b2[_0x2bf0c3(0x135)],_0x5ea5b6=_0x1eb8b2[_0x2bf0c3(0x11f)]);await initExchange(_0x2213e3,_0x5ea5b6);let _0x16f459=await loadSymbols();if(_0x16f459){_0x2cdf34=await getCoins(![],_0x1eb8b2[_0x2bf0c3(0x11c)]);if(_0x2cdf34===![])proxyEmit('portfolio',![]);else{if(_0x1eb8b2['basecoin']=='')proxyEmit('portfolio',_0x2cdf34);else{_0x2cdf34[_0x2bf0c3(0x125)](_0x4d7890=>{const _0x3e62bb=_0x2bf0c3;_0x407686[_0x3e62bb(0x188)](_0x4d7890[_0x3e62bb(0x143)]);});try{_0x24c42a=await exchange[_0x2bf0c3(0xe4)](_0x407686);}catch(_0x18a54a){await handleError(_0x18a54a,_0x2bf0c3(0x107));}_0x2cdf34[_0x2bf0c3(0x125)](_0x16087b=>{const _0x280daf=_0x2bf0c3;_0x16087b[_0x280daf(0xf9)]!=_0x1eb8b2[_0x280daf(0x11c)]?_0x3aab1a=_0x16087b[_0x280daf(0x15d)]?0x1/_0x24c42a[_0x16087b[_0x280daf(0x143)]][_0x280daf(0x191)]:_0x24c42a[_0x16087b[_0x280daf(0x143)]][_0x280daf(0x191)]:_0x3aab1a=0x1,_0x16087b[_0x280daf(0x1cf)]=formatResult(_0x3aab1a,0x8);}),proxyEmit(_0x2bf0c3(0x19c),_0x2cdf34);}}}else proxyEmit(_0x2bf0c3(0x19c),![]);}function checkMinimums(_0x5af2ca){const _0x57ef5b=_0x45172f;let _0x2b0398=!![];const _0x4a7dcc=!_0x5af2ca[_0x57ef5b(0x15d)]?markets[_0x5af2ca[_0x57ef5b(0x143)]][_0x57ef5b(0x1e1)]['amount'][_0x57ef5b(0x11b)]:markets[_0x5af2ca[_0x57ef5b(0x143)]][_0x57ef5b(0x1e1)][_0x57ef5b(0x1a4)]['min'],_0xa63df4=!_0x5af2ca[_0x57ef5b(0x15d)]?markets[_0x5af2ca[_0x57ef5b(0x143)]][_0x57ef5b(0x1e1)][_0x57ef5b(0x1a4)]['min']:markets[_0x5af2ca['symbol']][_0x57ef5b(0x1e1)][_0x57ef5b(0x189)][_0x57ef5b(0x11b)];if(Math['abs'](_0x5af2ca[_0x57ef5b(0xf4)])<_0x4a7dcc)_0x2b0398=![];if(Math[_0x57ef5b(0x12a)](_0x5af2ca['trade'])*_0x5af2ca[_0x57ef5b(0x191)]<_0xa63df4)_0x2b0398=![];return _0x2b0398;}async function getBalances(){const _0x5c4da3=_0x45172f;let _0x5cabd1=0x0,_0x2b32ec;const _0x345c9a=config['threshold'];currentCoins['forEach'](_0x10b557=>{const _0x1a8649=_0x5569;if(_0x10b557['coin']!=config[_0x1a8649(0x11c)]){let _0x201fab=global[_0x1a8649(0x18f)][noslash(_0x10b557[_0x1a8649(0x143)])];_0x2b32ec=_0x10b557['reverse']?0x1/_0x201fab:_0x201fab;}else _0x2b32ec=0x1;let _0x1bb30b=_0x10b557[_0x1a8649(0x1ad)]*_0x2b32ec;_0x5cabd1+=_0x1bb30b,_0x10b557[_0x1a8649(0x191)]=formatResult(Number(_0x2b32ec),0x8),_0x10b557['value']=_0x1bb30b;}),currentCoins['forEach'](_0x98d3fd=>{const _0x53e7e8=_0x5569;let _0x1c0151=config['portfolio'][_0x53e7e8(0x1a2)](_0x2cfac3=>_0x2cfac3['coin']==_0x98d3fd['coin']),_0x10b926=Number(_0x1c0151[_0x53e7e8(0x1be)]),_0x204df1=_0x98d3fd[_0x53e7e8(0x10a)]/_0x5cabd1*0x64,_0x583d7f=_0x10b926*_0x5cabd1/0x64/_0x98d3fd[_0x53e7e8(0x191)]-_0x98d3fd[_0x53e7e8(0x1ad)];_0x98d3fd[_0x53e7e8(0x1be)]=formatResult(_0x204df1,0x3),_0x98d3fd[_0x53e7e8(0x10d)]=formatResult(_0x10b926,0x3),_0x98d3fd['trade']=formatResult(_0x583d7f,0x8),_0x98d3fd[_0x53e7e8(0x102)]='',_0x98d3fd['valid']='';if(_0x98d3fd[_0x53e7e8(0xf9)]!=config[_0x53e7e8(0x11c)]){if(_0x98d3fd[_0x53e7e8(0x1be)]>_0x10b926)_0x98d3fd[_0x53e7e8(0x102)]=_0x53e7e8(0x1f6),_0x98d3fd['valid']=checkMinimums(_0x98d3fd);else _0x98d3fd[_0x53e7e8(0x1be)]<_0x10b926&&(_0x98d3fd[_0x53e7e8(0x102)]=_0x53e7e8(0x164),_0x98d3fd[_0x53e7e8(0x16d)]=checkMinimums(_0x98d3fd));}_0x98d3fd['delta']=_0x98d3fd[_0x53e7e8(0x1be)]/_0x98d3fd[_0x53e7e8(0x10d)]-0x1;}),currentCoins['sort']((_0x257212,_0x5fe61f)=>_0x257212[_0x5c4da3(0x155)]<_0x5fe61f[_0x5c4da3(0x155)]?0x1:_0x5fe61f['delta']<_0x257212[_0x5c4da3(0x155)]?-0x1:0x0);const _0x5bb823=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5bb823['eur'],'usd':_0x5bb823['usd'],'portfolio':JSON[_0x5c4da3(0x1c7)](currentCoins),'threshold':_0x345c9a},proxyEmit(_0x5c4da3(0x119),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x5c4da3(0x18b)])headlessMode({'portfolio':currentCoins,'threshold':_0x345c9a});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x5f2f28=_0x45172f;if(!lastBalances)return;let _0x3765a2=await getStartingBalances(![]),_0x38cb97=[],_0x23574c;JSON[_0x5f2f28(0x170)](lastBalances[_0x5f2f28(0x19c)])[_0x5f2f28(0x125)](_0x3c496f=>{const _0x3219aa=_0x5f2f28;let _0x433e1a={'coin':_0x3c496f[_0x3219aa(0xf9)],'number':_0x3c496f[_0x3219aa(0x1ad)],'price':_0x3c496f[_0x3219aa(0x191)]};_0x38cb97[_0x3219aa(0x188)](_0x433e1a);});const _0x4206ef=await getFiat();_0x23574c={'date':lastBalances[_0x5f2f28(0x1e4)][_0x5f2f28(0x12b)]('\x20')[0x0],'eur':_0x4206ef[_0x5f2f28(0x151)],'usd':_0x4206ef[_0x5f2f28(0x1bb)],'coins':_0x38cb97};let _0x593296=dbPerformance[_0x5f2f28(0x1b9)]('data')[_0x5f2f28(0x1a2)]({'date':_0x23574c[_0x5f2f28(0x171)]})[_0x5f2f28(0x10a)]();_0x593296?dbPerformance[_0x5f2f28(0x1b9)](_0x5f2f28(0x14f))['find']({'date':_0x23574c['date']})[_0x5f2f28(0x1b3)](_0x23574c)['write']():dbPerformance['get']('data')[_0x5f2f28(0x188)](_0x23574c)[_0x5f2f28(0x139)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x71aab0=_0x45172f;if(dbPerformance['has'](_0x71aab0(0x14f))[_0x71aab0(0x10a)]()){let _0x4ee22c=dbPerformance[_0x71aab0(0x1b9)](_0x71aab0(0x14f))['sortBy'](_0x71aab0(0x171))['value']();proxyEmit(_0x71aab0(0x136),_0x4ee22c),lastPerformanceEmitted=getDate();}else proxyEmit(_0x71aab0(0x136),[]);}async function getStartingBalances(_0x371ce9=!![]){const _0x304e60=_0x45172f;let _0x1c5de7=dbPerformance['get']('data')[_0x304e60(0x1a2)]({'date':config[_0x304e60(0x156)]})[_0x304e60(0x10a)]();config[_0x304e60(0x135)]!=''&&!_0x1c5de7&&(await setStartDatePerformance(config),_0x1c5de7=dbPerformance[_0x304e60(0x1b9)]('data')[_0x304e60(0x1a2)]({'date':config['startdate']})[_0x304e60(0x10a)]());if(config['apiKey']==''||!_0x1c5de7)return{};let _0x251548=0x0,_0x20c28e=0x0,_0x38a3b9=0x0,_0x238b52=[],_0x5cd16c=0x0;config[_0x304e60(0x19c)][_0x304e60(0x125)](_0x69c04f=>{const _0x1973e5=_0x304e60;if(!_0x69c04f['excluded']){_0x238b52[_0x5cd16c]={'coin':_0x69c04f[_0x1973e5(0xf9)],'symbol':_0x69c04f[_0x1973e5(0x143)],'number':_0x69c04f['startnumber'],'price':_0x69c04f['startprice']},_0x251548+=_0x69c04f[_0x1973e5(0x1de)]*_0x69c04f[_0x1973e5(0x142)];if(config[_0x1973e5(0x11c)]==_0x1973e5(0x1b6))_0x20c28e+=_0x69c04f['startprice']*_0x69c04f[_0x1973e5(0x142)]*_0x1c5de7[_0x1973e5(0x151)],_0x38a3b9+=_0x69c04f[_0x1973e5(0x1de)]*_0x69c04f['startnumber']*_0x1c5de7[_0x1973e5(0x1bb)];else{if(config[_0x1973e5(0x11c)]==_0x1973e5(0x11e)||config[_0x1973e5(0x11c)]=='USDT'||config[_0x1973e5(0x11c)]=='USDC')_0x20c28e+=_0x69c04f[_0x1973e5(0x1de)]*_0x69c04f[_0x1973e5(0x142)]*_0x1c5de7[_0x1973e5(0x151)]/_0x1c5de7['usd'],_0x38a3b9+=_0x69c04f[_0x1973e5(0x1de)]*_0x69c04f[_0x1973e5(0x142)];else config[_0x1973e5(0x11c)]==_0x1973e5(0x1eb)&&(_0x20c28e+=_0x69c04f['startprice']*_0x69c04f[_0x1973e5(0x142)],_0x38a3b9+=_0x69c04f[_0x1973e5(0x1de)]*_0x69c04f[_0x1973e5(0x142)]*_0x1c5de7[_0x1973e5(0x1bb)]/_0x1c5de7[_0x1973e5(0x151)]);}_0x5cd16c++;}});let _0xacba35={'basecoin':_0x251548,'eur':_0x20c28e,'usd':_0x38a3b9,'coins':_0x238b52};if(_0x371ce9)proxyEmit(_0x304e60(0x1e9),_0xacba35);return _0xacba35;}function headlessMode(_0x5324f8){const _0x241fb5=_0x45172f;let _0x160c40=_0x5324f8['portfolio'],_0x308312=_0x5324f8[_0x241fb5(0x129)],_0x145a3e=[];for(let _0x1b6cb9 of _0x160c40){if(_0x1b6cb9['coin']!=config[_0x241fb5(0x11c)]){if(_0x1b6cb9[_0x241fb5(0x1be)]/_0x1b6cb9[_0x241fb5(0x10d)]-0x1>=_0x308312/0x64){if(_0x1b6cb9[_0x241fb5(0x16d)])_0x145a3e[_0x241fb5(0x188)](_0x1b6cb9);}else{if(_0x1b6cb9[_0x241fb5(0x1be)]/_0x1b6cb9[_0x241fb5(0x10d)]-0x1<=-_0x308312/0x64){if(_0x1b6cb9[_0x241fb5(0x16d)])_0x145a3e[_0x241fb5(0x188)](_0x1b6cb9);}}}}_0x145a3e['length']>0x0&&placeOrder(_0x145a3e);}function symbolToCoin(_0x6df64a){const _0x349195=_0x45172f;let _0x27a6d1;if(_0x6df64a['includes']('/'+config[_0x349195(0x11c)]))_0x27a6d1=_0x6df64a['replace']('/'+config[_0x349195(0x11c)],'');if(_0x6df64a[_0x349195(0x13a)](config[_0x349195(0x11c)]+'/'))_0x27a6d1=_0x6df64a['replace'](config[_0x349195(0x11c)]+'/','');return _0x27a6d1;}async function validateOrders(_0x6ca79d=0x0){const _0xae70d4=_0x45172f;let _0x30d1b0=[],_0x21e1ae=config[_0xae70d4(0xff)]==_0xae70d4(0x169)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xae70d4(0x199)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0xae70d4(0x125)](_0x12b6ac=>{const _0x5d1360=_0xae70d4;let _0x186bd0=previousCoins[_0x5d1360(0x1a2)](_0x3825a3=>_0x3825a3[_0x5d1360(0xf9)]==symbolToCoin(_0x12b6ac['symbol'])),_0x187504=currentCoins['find'](_0x532855=>_0x532855[_0x5d1360(0xf9)]==symbolToCoin(_0x12b6ac[_0x5d1360(0x143)])),_0x1de51e,_0x44442d;_0x12b6ac['side']==_0x5d1360(0x164)&&!_0x12b6ac[_0x5d1360(0x15d)]||_0x12b6ac[_0x5d1360(0x102)]==_0x5d1360(0x1f6)&&_0x12b6ac[_0x5d1360(0x15d)]?(_0x1de51e=_0x186bd0['number']+0.9*_0x12b6ac['filled'],_0x44442d=_0x186bd0['number']+1.1*_0x12b6ac[_0x5d1360(0x1a3)]):(_0x1de51e=_0x186bd0[_0x5d1360(0x1ad)]-1.1*_0x12b6ac[_0x5d1360(0x1a3)],_0x44442d=_0x186bd0[_0x5d1360(0x1ad)]-0.9*_0x12b6ac[_0x5d1360(0x1a3)]);const _0x599529=_0x12b6ac[_0x5d1360(0x1a3)]!=0x0&&_0x187504[_0x5d1360(0x1ad)]>=_0x1de51e&&_0x187504['number']<=_0x44442d;_0x30d1b0[_0x5d1360(0x188)](_0x599529);if(_0x599529&&config[_0x5d1360(0xff)]!='market'){if(_0x12b6ac[_0x5d1360(0x15d)])logHistory(_0x5d1360(0x121),_0x5d1360(0x1b1)+_0x12b6ac[_0x5d1360(0x143)]+'\x20'+_0x12b6ac[_0x5d1360(0x102)]+'\x20#'+formatResult(_0x12b6ac['filled']/_0x12b6ac[_0x5d1360(0x1cf)],0x8)+'\x20@'+formatResult(_0x12b6ac['price'],0x8));else logHistory('order',_0x5d1360(0x1b1)+_0x12b6ac[_0x5d1360(0x143)]+'\x20'+_0x12b6ac[_0x5d1360(0x102)]+'\x20#'+formatResult(_0x12b6ac['filled'],0x8)+'\x20@'+formatResult(_0x12b6ac['price'],0x8));}}),_0x30d1b0['forEach']((_0x3965a9,_0x3fd82c)=>{const _0x49c6cf=_0xae70d4;if(_0x3965a9)lastOrders[_0x49c6cf(0x153)](_0x3fd82c,0x1);});if(_0x6ca79d<_0x21e1ae&&_0x30d1b0[_0xae70d4(0x13a)](![])){if(_0x6ca79d==0x0){config[_0xae70d4(0xff)]==_0xae70d4(0x169)?logHistory(_0xae70d4(0x1b7),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0xae70d4(0x1b7),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x6ca79d);},0xa*0x3e8);}else{(_0x6ca79d==0x1||_0x6ca79d==Math[_0xae70d4(0xfb)](_0x21e1ae/0x2)||_0x6ca79d==_0x21e1ae-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x6ca79d);},validateOrderInterval);}}else{lockOrders=![];if(_0x6ca79d>0x0&&!_0x30d1b0['includes'](![]))config[_0xae70d4(0xff)]=='market'?logHistory('success',_0xae70d4(0x1e2)):logHistory(_0xae70d4(0x1ea),_0xae70d4(0x1a7));else _0x6ca79d>0x0&&_0x30d1b0[_0xae70d4(0x13a)](![])&&(config[_0xae70d4(0xff)]=='market'?logHistory(_0xae70d4(0x1ea),_0xae70d4(0x149)+Math[_0xae70d4(0xfb)](_0x21e1ae*validateOrderInterval/0xea60)+_0xae70d4(0x18d)):(lastOrders[_0xae70d4(0x125)](async _0xd2c451=>{const _0x18b8e1=_0xae70d4;try{const _0x2b0065=await exchange['cancelOrder'](_0xd2c451['orderId'],_0xd2c451['symbol']);}catch(_0x3091ec){if(_0x3091ec['toString']()[_0x18b8e1(0x13a)](_0x18b8e1(0x152))){}else await handleError(_0x3091ec,'cancelOrder()');}}),logHistory(_0xae70d4(0x1ea),_0xae70d4(0xe9)+Math[_0xae70d4(0xfb)](_0x21e1ae*validateOrderInterval/0xea60)+_0xae70d4(0x18d))));}}async function resetCoinResults(){const _0x304acc=_0x45172f;dbCoinResults['get']('coins')['remove']()[_0x304acc(0x139)]();let _0x293126=await getStartingBalances(![]);_0x293126['coins'][_0x304acc(0x125)](_0x3c97c0=>{const _0x45e4aa=_0x304acc,_0x41f29f=_0x3c97c0[_0x45e4aa(0x143)][_0x45e4aa(0x13a)](config[_0x45e4aa(0x11c)]+'/');if(_0x3c97c0[_0x45e4aa(0xf9)]!=config[_0x45e4aa(0x11c)]){let _0x13ed7e={'coin':_0x3c97c0['coin'],'number':_0x3c97c0[_0x45e4aa(0x1ad)],'breakeven':_0x3c97c0[_0x45e4aa(0x1cf)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x45e4aa(0x1b9)](_0x45e4aa(0x162))[_0x45e4aa(0x188)](_0x13ed7e)[_0x45e4aa(0x139)]();}});}async function updateCoinResults(_0xfd3722){const _0x568193=_0x45172f;let _0x5c5c29,_0x147ce6,_0x7aeeae,_0x511212,_0x20def5,_0x2baca4,_0x449157=dbCoinResults['get']('coins')[_0x568193(0x1a2)]({'coin':_0xfd3722[_0x568193(0xf9)]})[_0x568193(0x10a)]();if(!_0x449157)return;if(_0xfd3722[_0x568193(0x123)]&&_0xfd3722[_0x568193(0x123)][_0x568193(0x150)]==config[_0x568193(0x11c)])_0x5c5c29=_0xfd3722['fee'][_0x568193(0x1a4)];else{if(_0xfd3722[_0x568193(0x123)]&&_0xfd3722['fee'][_0x568193(0x150)]==_0x568193(0x126))_0x5c5c29=_0xfd3722[_0x568193(0x123)][_0x568193(0x1a4)]*global[_0x568193(0x18f)][_0x568193(0x126)+config[_0x568193(0x11c)]];else _0x5c5c29=0.001*_0xfd3722[_0x568193(0x1a3)];}const _0x502c54=_0xfd3722[_0x568193(0x143)][_0x568193(0x13a)](config[_0x568193(0x11c)]+'/');_0x502c54&&(_0x2baca4={'coin':_0xfd3722[_0x568193(0xf9)],'symbol':_0xfd3722[_0x568193(0x143)],'filled':_0xfd3722[_0x568193(0x1a3)]*_0xfd3722[_0x568193(0x1cf)],'side':_0xfd3722[_0x568193(0x102)]==_0x568193(0x1f6)?_0x568193(0x164):_0x568193(0x1f6),'price':0x1/_0xfd3722[_0x568193(0x1cf)]},_0xfd3722={..._0x2baca4});_0xfd3722['side']==_0x568193(0x164)?_0x7aeeae=(_0x449157['breakeven']*_0x449157[_0x568193(0x1ad)]+_0xfd3722['price']*_0xfd3722[_0x568193(0x1a3)])/(_0x449157[_0x568193(0x1ad)]+_0xfd3722[_0x568193(0x1a3)]):_0x7aeeae=(_0x449157['breakeven']*_0x449157[_0x568193(0x1ad)]-_0xfd3722[_0x568193(0x1cf)]*_0xfd3722[_0x568193(0x1a3)])/(_0x449157['number']-_0xfd3722[_0x568193(0x1a3)]);_0xfd3722[_0x568193(0x102)]=='buy'?_0x511212=_0x449157[_0x568193(0xfa)]:_0x511212=_0x449157[_0x568193(0xfa)]+(_0xfd3722[_0x568193(0x1cf)]-_0x449157[_0x568193(0xf5)])*_0xfd3722['filled'];_0x147ce6=_0xfd3722['side']==_0x568193(0x1f6)?_0x449157[_0x568193(0x1ad)]-_0xfd3722[_0x568193(0x1a3)]:_0x449157['number']+_0xfd3722[_0x568193(0x1a3)],_0x20def5=(_0xfd3722[_0x568193(0x1cf)]-_0x7aeeae)*_0x147ce6;let _0x2f0b53={'coin':_0xfd3722['coin'],'number':_0x147ce6,'breakeven':formatResult(_0x7aeeae,0x8),'realized':formatResult(_0x511212,0x8),'unrealized':formatResult(_0x20def5,0x8),'fees':formatResult(_0x449157[_0x568193(0x19d)]+_0x5c5c29,0x8),'sells':_0xfd3722[_0x568193(0x102)]==_0x568193(0x1f6)?_0x449157[_0x568193(0x184)]+0x1:_0x449157[_0x568193(0x184)],'buys':_0xfd3722[_0x568193(0x102)]==_0x568193(0x164)?_0x449157[_0x568193(0x181)]+0x1:_0x449157[_0x568193(0x181)]};dbCoinResults[_0x568193(0x1b9)]('coins')['find']({'coin':_0xfd3722[_0x568193(0xf9)]})[_0x568193(0x1b3)](_0x2f0b53)['write']();}async function placeOrder(_0x5d2de3){const _0x22b52b=_0x45172f,_0x4ffd96=config[_0x22b52b(0xff)]==_0x22b52b(0x169)?_0x22b52b(0x169):_0x22b52b(0x1ba);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x22b52b(0x1c7)](currentCoins));for(const _0x11e2dd of _0x5d2de3){let _0x537d69,_0x4bb596,_0x3d6ce4,_0x238f52,_0x59069e,_0x3907d1=_0x11e2dd[_0x22b52b(0x143)];try{const _0x5aea55=await exchange[_0x22b52b(0xe4)](_0x3907d1),_0x6a8336=_0x5aea55[_0x3907d1];_0x537d69=_0x6a8336[_0x22b52b(0x191)],_0x4bb596=_0x6a8336[_0x22b52b(0x15e)],_0x3d6ce4=_0x6a8336[_0x22b52b(0x1d4)];_0x11e2dd[_0x22b52b(0x15d)]?(_0x238f52=_0x11e2dd['side']==_0x22b52b(0x164)?_0x22b52b(0x1f6):'buy',_0x59069e=Math['abs'](_0x11e2dd[_0x22b52b(0xf4)])/_0x537d69):(_0x238f52=_0x11e2dd[_0x22b52b(0x102)],_0x59069e=Math['abs'](_0x11e2dd[_0x22b52b(0xf4)]));_0x4ffd96==_0x22b52b(0x1ba)&&(config[_0x22b52b(0xff)]==_0x22b52b(0x14d)&&(_0x537d69=_0x238f52==_0x22b52b(0x164)?_0x4bb596:_0x3d6ce4),config['ordertype']==_0x22b52b(0x16e)&&(_0x537d69=_0x238f52==_0x22b52b(0x164)?_0x3d6ce4:_0x4bb596));_0x59069e=formatResult(_0x59069e,0x8),_0x537d69=formatResult(_0x537d69,0x8);const _0x312a70=await exchange[_0x22b52b(0x1b4)](_0x3907d1,_0x4ffd96,_0x238f52,_0x59069e,_0x537d69);lastOrders['push']({'orderId':_0x312a70['id'],'symbol':_0x3907d1,'side':_0x238f52,'reverse':_0x11e2dd[_0x22b52b(0x15d)],'amount':_0x11e2dd['reverse']?_0x312a70[_0x22b52b(0x189)]*_0x312a70['price']:_0x312a70[_0x22b52b(0x189)],'filled':_0x11e2dd[_0x22b52b(0x15d)]?_0x312a70[_0x22b52b(0x1a3)]*_0x312a70[_0x22b52b(0x1cf)]:_0x312a70[_0x22b52b(0x1a3)],'price':_0x312a70[_0x22b52b(0x1cf)]});const _0x2393f7=_0x238f52=='sell'?config[_0x22b52b(0xf2)]?String['fromCodePoint']('0x'+config[_0x22b52b(0xf2)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x22b52b(0x104)])+'\x20':'',_0xb04211=_0x4ffd96==_0x22b52b(0x169)?_0x22b52b(0x1b2):config[_0x22b52b(0xff)]==_0x22b52b(0x14d)?_0x22b52b(0xf1):'Limit\x20(low-margin)';if(_0x4ffd96==_0x22b52b(0x169))logHistory(_0x22b52b(0x121),''+_0x2393f7+_0xb04211+_0x22b52b(0x14e)+_0x3907d1+'\x20'+_0x238f52+'\x20#'+formatResult(_0x312a70['filled'],0x8)+'\x20@'+formatResult(_0x312a70[_0x22b52b(0x1cf)],0x8));else logHistory(_0x22b52b(0x121),''+_0x2393f7+_0xb04211+'\x20order:\x20'+_0x3907d1+'\x20'+_0x238f52+'\x20#'+formatResult(_0x312a70['amount'],0x8)+'\x20@'+formatResult(_0x312a70[_0x22b52b(0x1cf)],0x8));_0x312a70[_0x22b52b(0xf9)]=_0x11e2dd[_0x22b52b(0xf9)],await updateCoinResults(_0x312a70);if(config['cooldown']!=0x0){let _0x3c3334=null;if(cooldownTracker[_0x22b52b(0xee)]==config[_0x22b52b(0x197)]-0x1)_0x3c3334=cooldownTracker[_0x22b52b(0x175)]();const _0x3b09ff=getTimeStamp();cooldownTracker['push'](_0x3b09ff);if(_0x3c3334){const _0xe594d3=fns['differenceInSeconds'](new Date(_0x3b09ff),new Date(_0x3c3334));_0xe594d3<cooldownInterval&&(logHistory(_0x22b52b(0x1b7),_0x22b52b(0x1ed)+config['cooldown']+_0x22b52b(0x11a)+cooldownInterval/0x3c+_0x22b52b(0x1d3)+cooldownPeriod/(0xe10*0x3e8)+_0x22b52b(0x1ca)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x46e8f3){if(_0x46e8f3[_0x22b52b(0x140)]()[_0x22b52b(0x13a)]('MIN_NOTIONAL'))logHistory(_0x22b52b(0x1b7),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3907d1);else{if(_0x46e8f3['toString']()[_0x22b52b(0x13a)](_0x22b52b(0x1a9)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x3907d1);else await handleError(_0x46e8f3,_0x22b52b(0xe8));}}}if(lastOrders[_0x22b52b(0xee)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x22b52b(0x18b)]&&(config[_0x22b52b(0xff)]==_0x22b52b(0x169)?logHistory('error',_0x22b52b(0x192)):logHistory('error',_0x22b52b(0x19a)));else coolingDown&&(!config['headless']&&logHistory('error',_0x22b52b(0x1ab)));}}function logHistory(_0x29a92e,_0x541905,_0x51aeba=''){const _0x1feeab=_0x45172f;let _0x6e1279={'time':getTimeStamp(),'type':_0x29a92e,'event':_0x541905,'botname':config['botname'],'showname':config[_0x1feeab(0x15b)]};dbLogs[_0x1feeab(0x1b9)](_0x1feeab(0x183))[_0x1feeab(0x188)](_0x6e1279)[_0x1feeab(0x139)]();if(_0x51aeba=='')_0x51aeba=_0x541905;proxyEmit(_0x1feeab(0xeb),{'log':_0x6e1279,'summary':_0x51aeba}),process['send']({'telegram':_0x6e1279}),logging(''+_0x6e1279[_0x1feeab(0xeb)]);}function emitHistory(_0x4a7641={}){const _0x141ae6=_0x45172f;Object['keys'](_0x4a7641)[_0x141ae6(0xee)]==0x0&&(_0x4a7641={'type':[_0x141ae6(0x121),_0x141ae6(0xeb)],'event':'','page':0x1});if(_0x4a7641[_0x141ae6(0x195)][_0x141ae6(0x13a)]('event'))_0x4a7641['type'][_0x141ae6(0x153)](_0x4a7641[_0x141ae6(0x195)]['indexOf'](_0x141ae6(0xeb)),0x1,_0x141ae6(0x1b7),_0x141ae6(0x1ea));if(dbLogs[_0x141ae6(0x1cb)](_0x141ae6(0x183))['value']()){let _0x235df0=dbLogs[_0x141ae6(0x1b9)](_0x141ae6(0x183))[_0x141ae6(0x1c8)](_0x593f4f=>{const _0x48070f=_0x141ae6;if(_0x4a7641[_0x48070f(0x195)][_0x48070f(0xee)]==0x0)return![];else return _0x4a7641[_0x48070f(0x195)][_0x48070f(0x13a)](_0x593f4f[_0x48070f(0x195)]);})[_0x141ae6(0x1c8)](_0x36425d=>{const _0x593314=_0x141ae6;if(_0x4a7641[_0x593314(0xeb)]=='')return!![];else return _0x36425d[_0x593314(0xeb)][_0x593314(0x17f)]()[_0x593314(0x13a)](_0x4a7641[_0x593314(0xeb)][_0x593314(0x17f)]());})[_0x141ae6(0x113)](_0x141ae6(0x1e4)),_0x452e91=_0x235df0['value']()[_0x141ae6(0xee)];_0x235df0=_0x235df0[_0x141ae6(0x15d)]()['slice']((_0x4a7641['page']-0x1)*logPageSize,_0x4a7641[_0x141ae6(0x118)]*logPageSize-0x1)['reverse']()[_0x141ae6(0x10a)](),proxyEmit(_0x141ae6(0x1af),{'logs':_0x235df0,'total':_0x452e91});}else proxyEmit(_0x141ae6(0x1af),{'logs':[],'total':0x0});}async function pauseBot(_0x3adf08){const _0x124e0c=_0x45172f,_0x4a165a=new Date()[_0x124e0c(0x1e7)]();if(!lastBotPause)lastBotPause=new Date()[_0x124e0c(0x1e7)](),consecutivePauses=0x1;else{if(_0x4a165a-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['send']({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x124e0c(0x1e7)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x124e0c(0x1b7),_0x124e0c(0x167)+consecutivePauses+')'),await sleep(_0x3adf08),botPaused=![],reset();}}async function handleError(_0x40a6cf,_0x542500,_0x5d835d=''){const _0x3bae01=_0x45172f;if(_0x40a6cf[_0x3bae01(0x140)]()[_0x3bae01(0x13a)](_0x3bae01(0x1ef)))logHistory('error',_0x542500+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x40a6cf['toString']()[_0x3bae01(0x13a)](_0x3bae01(0x1f2)))logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x179)),await pauseBot(pauseBotInterval);else{if(_0x40a6cf[_0x3bae01(0x140)]()[_0x3bae01(0x13a)]('RequestTimeout'))logHistory(_0x3bae01(0x1b7),_0x542500+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x40a6cf[_0x3bae01(0x140)]()[_0x3bae01(0x13a)](_0x3bae01(0x1e8)))logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x1a5)),logHistory(_0x3bae01(0x1b7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x3bae01(0x1e3)]({'stop':_0x3bae01(0x100)});else{if(_0x40a6cf['toString']()['includes']('AuthenticationError'))logHistory(_0x3bae01(0x1b7),_0x542500+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x3bae01(0x1b7),_0x3bae01(0x101)),process['send']({'stop':_0x3bae01(0x100)});else{if(_0x40a6cf[_0x3bae01(0x140)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x182)),logHistory(_0x3bae01(0x1b7),_0x3bae01(0x101)),process[_0x3bae01(0x1e3)]({'stop':_0x3bae01(0x100)});else{if(_0x40a6cf['toString']()[_0x3bae01(0x13a)](_0x3bae01(0x1f4)))logHistory('error',_0x542500+_0x3bae01(0x15c)),logHistory(_0x3bae01(0x1b7),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':'kill'});else{if(_0x40a6cf[_0x3bae01(0x140)]()[_0x3bae01(0x13a)](_0x3bae01(0x18e)))logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x172)),await pauseBot(pauseBotInterval),process[_0x3bae01(0x1e3)]({'stop':_0x3bae01(0x165)});else _0x40a6cf[_0x3bae01(0x140)]()[_0x3bae01(0x13a)](_0x3bae01(0x1aa))?logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x13e)):(logHistory(_0x3bae01(0x1b7),_0x542500+_0x3bae01(0x1c0)),logging(_0x542500+_0x3bae01(0x1ce),_0x40a6cf),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x57db28,_0x3e0e4a){const _0x3b1e0f=_0x45172f;return parseFloat(_0x57db28[_0x3b1e0f(0x109)](_0x3e0e4a));}function logging(_0xf5980,_0x4d9361=''){const _0x93f66f=_0x45172f;if(config[_0x93f66f(0x15b)])console[_0x93f66f(0x178)](getTimeStamp()+':\x20'+config['botname']+_0x93f66f(0x12f)+_0xf5980,_0x4d9361);else console[_0x93f66f(0x178)](getTimeStamp()+_0x93f66f(0x141)+botID+_0x93f66f(0x12f)+_0xf5980,_0x4d9361);}function getServerTime(){const _0x9db5e7=_0x45172f,_0x307227=new Date();return _0x307227[_0x9db5e7(0xf6)]()+'/'+(_0x307227['getMonth']()+0x1)[_0x9db5e7(0x140)]()[_0x9db5e7(0x131)](0x2,'0')+'/'+_0x307227[_0x9db5e7(0x1d7)]()['toString']()[_0x9db5e7(0x131)](0x2,'0')+'\x20'+_0x307227[_0x9db5e7(0x1dc)]()[_0x9db5e7(0x140)]()[_0x9db5e7(0x131)](0x2,'0')+':'+_0x307227[_0x9db5e7(0x19b)]()[_0x9db5e7(0x140)]()[_0x9db5e7(0x131)](0x2,'0')+':'+_0x307227[_0x9db5e7(0x1f3)]()[_0x9db5e7(0x140)]()[_0x9db5e7(0x131)](0x2,'0');}function getTimeStamp(){const _0x4cdf5d=_0x45172f,_0x27abd9=shiftedTime();return _0x27abd9[_0x4cdf5d(0xf6)]()+'/'+(_0x27abd9[_0x4cdf5d(0x1cd)]()+0x1)[_0x4cdf5d(0x140)]()[_0x4cdf5d(0x131)](0x2,'0')+'/'+_0x27abd9[_0x4cdf5d(0x1d7)]()[_0x4cdf5d(0x140)]()[_0x4cdf5d(0x131)](0x2,'0')+'\x20'+_0x27abd9[_0x4cdf5d(0x1dc)]()[_0x4cdf5d(0x140)]()['padStart'](0x2,'0')+':'+_0x27abd9[_0x4cdf5d(0x19b)]()[_0x4cdf5d(0x140)]()[_0x4cdf5d(0x131)](0x2,'0')+':'+_0x27abd9[_0x4cdf5d(0x1f3)]()[_0x4cdf5d(0x140)]()['padStart'](0x2,'0');}function getDate(){const _0x2a18a9=_0x45172f,_0x5d5b8d=shiftedTime();return _0x5d5b8d[_0x2a18a9(0xf6)]()+'/'+(_0x5d5b8d[_0x2a18a9(0x1cd)]()+0x1)[_0x2a18a9(0x140)]()[_0x2a18a9(0x131)](0x2,'0')+'/'+_0x5d5b8d['getDate']()[_0x2a18a9(0x140)]()[_0x2a18a9(0x131)](0x2,'0');}function getHour(){const _0x13aaf8=_0x45172f,_0x5870bf=shiftedTime();return _0x5870bf[_0x13aaf8(0x1dc)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x291d9c){return new Promise(_0x32d9d9=>setTimeout(_0x32d9d9,_0x291d9c));}function shiftedTime(){const _0x3ee6fd=_0x45172f,_0xbfa117=new Date();let _0x2ec744=_0xbfa117;if(config&&config['timeshift']!==0x0)_0x2ec744=fns[_0x3ee6fd(0x1cc)](_0xbfa117,{'hours':config[_0x3ee6fd(0x19f)]});return _0x2ec744;}