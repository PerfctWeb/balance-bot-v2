const _0x43c7e2=_0x5cfd;(function(_0x4274c2,_0x410dfd){const _0x5e4ddf=_0x5cfd,_0x5b6838=_0x4274c2();while(!![]){try{const _0x47c8f9=-parseInt(_0x5e4ddf(0x1fb))/0x1+-parseInt(_0x5e4ddf(0x20e))/0x2*(parseInt(_0x5e4ddf(0x153))/0x3)+parseInt(_0x5e4ddf(0x221))/0x4*(parseInt(_0x5e4ddf(0x142))/0x5)+parseInt(_0x5e4ddf(0x270))/0x6+parseInt(_0x5e4ddf(0x1e6))/0x7*(parseInt(_0x5e4ddf(0x1b1))/0x8)+parseInt(_0x5e4ddf(0x155))/0x9+parseInt(_0x5e4ddf(0x146))/0xa*(-parseInt(_0x5e4ddf(0x1d7))/0xb);if(_0x47c8f9===_0x410dfd)break;else _0x5b6838['push'](_0x5b6838['shift']());}catch(_0x478241){_0x5b6838['push'](_0x5b6838['shift']());}}}(_0x287a,0x50ae2));const _0x53e304=function(){let _0x1fa35a=!![];return function(_0x4b8b0b,_0x47c4ab){const _0x282688=_0x1fa35a?function(){if(_0x47c4ab){const _0x1e2708=_0x47c4ab['apply'](_0x4b8b0b,arguments);return _0x47c4ab=null,_0x1e2708;}}:function(){};return _0x1fa35a=![],_0x282688;};}(),_0x540502=_0x53e304(this,function(){const _0x45d850=_0x5cfd;return _0x540502[_0x45d850(0x17b)]()[_0x45d850(0x1d8)](_0x45d850(0x1bc))[_0x45d850(0x17b)]()['constructor'](_0x540502)['search'](_0x45d850(0x1bc));});_0x540502();'use strict';const ccxt=require(_0x43c7e2(0x124)),low=require(_0x43c7e2(0x19a)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x43c7e2(0x14c)),Crypt=require(_0x43c7e2(0x1de))[_0x43c7e2(0x1c9)],util=require(_0x43c7e2(0x19d)),argv=require(_0x43c7e2(0x218))(process[_0x43c7e2(0x257)][_0x43c7e2(0x244)](0x2))[_0x43c7e2(0x257)],path=require(_0x43c7e2(0x1ea));let exchange;function _0x5cfd(_0x320ae5,_0x4584ad){const _0x20cbfd=_0x287a();return _0x5cfd=function(_0x540502,_0x53e304){_0x540502=_0x540502-0xf1;let _0x287aad=_0x20cbfd[_0x540502];return _0x287aad;},_0x5cfd(_0x320ae5,_0x4584ad);}global[_0x43c7e2(0x10d)]={},global[_0x43c7e2(0x108)]={};const usdBasecoins=[_0x43c7e2(0x19f),_0x43c7e2(0x200),_0x43c7e2(0x177),_0x43c7e2(0x112),'USDC',_0x43c7e2(0x127)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x43c7e2(0xf3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x43c7e2(0x11e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')['version'],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x43c7e2(0x1a7)](botID)&&(console[_0x43c7e2(0x178)](_0x43c7e2(0x1df)+botID+_0x43c7e2(0x17a)),killBot());const userID=process[_0x43c7e2(0x257)][0x3]||'',configpath=userID?_0x43c7e2(0x25f)+userID+'/':'./config/',logspath=userID?_0x43c7e2(0x114)+userID+'/':_0x43c7e2(0x114),loggerfile=fs[_0x43c7e2(0x1b6)](logspath+_0x43c7e2(0x207),{'flags':'a'});!fs[_0x43c7e2(0x1aa)](configpath)&&fs[_0x43c7e2(0x17f)](configpath);!fs[_0x43c7e2(0x1aa)](logspath)&&fs[_0x43c7e2(0x17f)](logspath);const configfile=configpath+'bot-'+botID+'-config.json',logfile=configpath+_0x43c7e2(0x138)+botID+_0x43c7e2(0x121),performancefile=configpath+_0x43c7e2(0x138)+botID+_0x43c7e2(0x228),coinresultsfile=configpath+_0x43c7e2(0x138)+botID+_0x43c7e2(0x236),settingsfile=configpath+_0x43c7e2(0x1a0),securefile=configpath+_0x43c7e2(0x174),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x43c7e2(0x125)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x43c7e2(0x10f)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x43c7e2(0x10f)]({'bot':[],'version':serverversion})[_0x43c7e2(0x125)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x43c7e2(0x10f)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x43c7e2(0x14e),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();function _0x287a(){const _0xbf316f=['</pre>','balancing\x20resumed','bot-','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','createOrder','breakeven','Error\x20while\x20deleting\x20files:\x20','usd','NetworkError','yyyy-MM-dd\x27T\x27HH:mm:ss','basecoin','Invalid\x20API\x20key\x20or\x20secret\x20entered','10YdrjTK','exchanges','push','Initiating\x20exchange\x20reload','5084650UsRape','\x20exchange','order','random','has','padStart','date-fns','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','sha256','status','deleteHistoryAlerts','MIN_NOTIONAL','change24h','3PEFQMQ','recreateCoinResults()','4032144ynHsbH','last','Uncaught\x20NetworkError:','success','\x20change','round','bot','warning','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','apiSecret','placeOrder','performance','/EUR','\x20>\x20','Fee\x20discount\x20refund\x20detected:\x20','shift','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getMinutes','getPortfolio(2)','limits','closed','function','threshold','running','%\x20(','cancelOrders()','\x20order:\x20','Market','length','event','sortBy','bb-secure.json','args','emojibuy','TUSD','log','loadMarkets',',\x20must\x20be\x20a\x203\x20digit\x20number','toString','coin','datetime','valid','mkdirSync','toFixed','getMonth','Order(s)\x20not\x20validated\x20after\x20','parseISO','findIndex','ID:\x20','emojisell','watchOrders','starting-balances','orderId','privateKey','remainingSymbols','market','2\x20-\x20Validate\x20orders:\x20','distribution','initial','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Resetting\x20coin\x20results:\x20','.json','getPortfolio(0)','timeout','filter','\x20|\x20highest\x20fee:\x20','changes','Limit\x20(high-margin)','date','lowdb','botname','Resetting\x20bot\x20history','util','sendPortfolioTelegram','USD','bb-settings.json','filled','storeConfiguration','\x20|\x20Custom\x20ID:\x20','message','limit-high','startnumber','test','includes','ORDERS.LOCKED','existsSync','EUR','2\x20-\x20Orders\x20unlocked','stringify','getStartingBalances','\x20not\x20responding','cancel','197864YkvSpl','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','getDate','type','toggleBotMode','createWriteStream','<pre>','debug','fees','getFullYear','get','(((.+)+)+)+$','buy','abs','exec','Executing\x20exchange\x20reload','portfolio','showConfig','full','limit','exchange\x20reloaded','\x20portfolio:</b>\x20\x0a\x0a','entries','InsufficientFunds','Crypt','buys','OnMaintenance','BNB/','page','leftTxt','Order\x20filled:\x20','\x20orders\x20in\x20less\x20than\x20','apiPassword','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','highest','removed','price','event-history','11DeHkgQ','search','\x20metrics:</b>\x20\x0a\x0a','cloneDeep','2.3.5','UNLOCKING','<b>Bot\x20','hybrid-crypto-js','Error:\x20Invalid\x20argument\x20','sell','balancing\x20resumes\x20when\x20cooldown\x20ends','starting-balance-','startsWith','uncaughtException','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','119jdAUzd','ORDERS.UNLOCKED','watchTrades','\x20|\x20','path','\x20exchange\x20error','LOCKED','configuration','fetchTickers','excluded','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','delta','max','Transaction\x20detection\x20unblocked','ongoing','\x20:\x20',':\x20Bot\x20','colorscheme',':\x20timer\x20>','getTime','512711KPpdpt','rightTxt','added','settings','Invalid\x20quantity','BUSD','-------------------------------\x0a','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','fetchTicker','fromCodePoint','InvalidNonce','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','/output-000.log','RequestTimeout','format','Net\x20effect','balances','************','Bot\x20','867406LenSMt','amountToPrecision','number','data','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','sells','fetchBalance','Order\x20amount\x20is\x20invalid:\x20','min','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','yargs/yargs','\x20>\x20[DEBUG]\x20','Reset\x20|\x20','net-fiat','coins','pro','replace','recent20','logs','588220QmqFkb','version','canceled','Pausing\x20for\x20','emitHistory','exchange\x20not\x20reloaded','1\x20-\x20Unlock\x20orders','-performance.json','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','splice','forEach','startprice','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','split','Waited\x20','red_yellow_blue','no\x20open\x20orders','value','ask','symbol','loadSymbols()','-results.json','additional\x20symbols\x20','0\x20-\x20EXECUTION:\x20','fetchClosedOrders','send','apiKey','keys','close','target','total','ordertype','password','onepagemode','Uncaught\x20Exception:','slice','realized','error','cancelOrder','final','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','netoffset','OrderNotFound','BNB','liquidity','side','cooldown','decrypt','net-basecoin','BTC','unlinkSync','time','enabled','remove','argv','***','Net\x20','Uncaught\x20ExchangeError:','ORDERS.UNLOCKING','fetchOpenOrders','bid','2\x20-\x20FILLED\x20unknown\x20order:\x20','./config/','average','resetHistory','getHours','secure','parse','getPortfolio','join','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','autoliquidity','Unknown\x20error\x20occured','fiat','eur','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','floor','headless','cost','3736548axdyBD','coin-loading-progress','amount','\x20closed\x20the\x20connection','startdate','bots','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','openOrders','storeFiat','AuthenticationError','Limit\x20(low-margin)','limit-low','freeze','\x20minutes','timeshift','substring','yyyy/MM/dd','\x20minutes\x20-\x20','orderstatus','assign','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','RateLimitExceeded','Cooldown\x20ended\x20-\x20balancing\x20resumed','Unfilled\x20order(s)\x20canceled\x20after\x20','InvalidOrder','ETH','indexOf','1\x20-\x20FILLED:\x20','showname','differenceInSeconds','Executed\x20','reverse','none','change','sort','offset','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Portfolio\x20change\x20detected:\x20','ticker','open','defaults','Binance','isEqual','USDT','Initializing\x20coin\x20results','./logs/','Transaction\x20detection\x20blocked','currency','No\x20more\x20open\x20orders\x20-\x20','API-key\x20format\x20invalid','set','configuration-stored','getCoins()','exchange','kill','UNLOCKED','spot','placeOrder()','-events.json','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','restart','ccxt','write','toUpperCase','USDP','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20-\x20bot\x20not\x20started','\x20value','1\x20-\x20Handle\x20open\x20orders','progress','trade','padEnd','find','\x20API\x20secret\x20is\x20invalid','fee','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','concat','toLowerCase','customId'];_0x287a=function(){return _0xbf316f;};return _0x287a();}oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x211b6c=>{const _0x17b844=_0x43c7e2;console[_0x17b844(0x178)](_0x211b6c);},'simple':_0x36bc26=>{const _0x4222ca=_0x43c7e2;console[_0x4222ca(0x178)](_0x36bc26),loggerfile[_0x4222ca(0x125)](util[_0x4222ca(0x209)](_0x36bc26)+'\x0a');},'full':async(_0x413f01,_0x1cc458='')=>{const _0xfe7b1=_0x43c7e2;let _0x21cb65;if(config[_0xfe7b1(0x103)])_0x21cb65=getTimeStamp()+':\x20'+config[_0xfe7b1(0x19b)]+'\x20>\x20'+_0x413f01;else _0x21cb65=getTimeStamp()+':\x20Bot\x20'+botID+_0xfe7b1(0x162)+_0x413f01;console['log'](_0x21cb65),loggerfile[_0xfe7b1(0x125)](util['format'](_0x21cb65)+'\x0a'),_0x1cc458&&(console[_0xfe7b1(0x178)](_0x1cc458),loggerfile['write'](util[_0xfe7b1(0x209)](_0x1cc458)+'\x0a'));},'debug':async(_0x1d6a94,_0x1e566d='')=>{const _0x59a930=_0x43c7e2;let _0x3dd457;if(config[_0x59a930(0x103)])_0x3dd457=getTimeStamp()+':\x20'+config['botname']+_0x59a930(0x219)+_0x1d6a94;else _0x3dd457=getTimeStamp()+_0x59a930(0x1f7)+botID+'\x20>\x20[DEBUG]\x20'+_0x1d6a94;if(debugging)console[_0x59a930(0x178)](_0x3dd457);loggerfile[_0x59a930(0x125)](util[_0x59a930(0x209)](_0x3dd457)+'\x0a');if(_0x1e566d){if(debugging)console[_0x59a930(0x178)](_0x1e566d);loggerfile['write'](util[_0x59a930(0x209)](_0x1e566d)+'\x0a');}}};process['on'](_0x43c7e2(0x1e4),function(_0x21b93e){const _0x59bf7d=_0x43c7e2;logHistory(_0x59bf7d(0x246),_0x59bf7d(0x1b2)),logger[_0x59bf7d(0x1b8)](_0x59bf7d(0x243),_0x21b93e);});settings[_0x43c7e2(0xf5)]!=config[_0x43c7e2(0xf5)]&&updateTimeshift(settings[_0x43c7e2(0xf5)]);settings['onepagemode']!=config[_0x43c7e2(0x242)]&&updateOnepagemode(settings[_0x43c7e2(0x242)]);process[_0x43c7e2(0x23a)]({'started':_0x43c7e2(0x16c)},_0x16ea13=>{}),initializeProcessListeners();function proxyEmit(_0x30c26b,_0x17a7c0=null){const _0x46a203=_0x43c7e2;process[_0x46a203(0x23a)]({'function':_0x30c26b,'args':_0x17a7c0},_0xf04182=>{});}function initializeProcessListeners(){process['on']('message',_0x5f4221=>{const _0x364297=_0x5cfd;switch(Object['keys'](_0x5f4221)[0x0]){case _0x364297(0xf5):_0x5f4221['timeshift']!=undefined&&(settings[_0x364297(0xf5)]=_0x5f4221[_0x364297(0xf5)],updateTimeshift(settings[_0x364297(0xf5)]));break;case _0x364297(0x242):_0x5f4221[_0x364297(0x242)]!=undefined&&(settings[_0x364297(0x242)]=_0x5f4221[_0x364297(0x242)],updateOnepagemode(settings[_0x364297(0x242)]));break;case _0x364297(0x275):_0x5f4221[_0x364297(0x275)]!=undefined&&(bots=JSON['parse'](_0x5f4221['bots']),proxyEmit(_0x364297(0x275),bots));break;case _0x364297(0x16a):switch(_0x5f4221[_0x364297(0x16a)]){case'initclient':initclient();break;case _0x364297(0x1b5):toggleBotMode();break;case _0x364297(0x225):emitHistory(_0x5f4221[_0x364297(0x175)]);break;case _0x364297(0x150):deleteHistoryAlerts(_0x5f4221[_0x364297(0x175)]);break;case _0x364297(0x265):getPortfolio(_0x5f4221[_0x364297(0x175)]);break;case _0x364297(0x1a2):storeConfiguration(_0x5f4221[_0x364297(0x175)]);break;case'storeHeadless':storeHeadless(_0x5f4221[_0x364297(0x175)]);break;case _0x364297(0x278):storeFiat(_0x5f4221[_0x364297(0x175)]);break;case _0x364297(0x261):resetHistory();break;case _0x364297(0x1ae):getStartingBalances(getNormalizedPerformance());break;case _0x364297(0x15f):placeOrder(_0x5f4221[_0x364297(0x175)]);break;case'cancelLoading':cancelLoading();break;case _0x364297(0x1c2):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x364297(0x19e):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x33859c=null,_0x345f7e=![]){const _0x3d339e=_0x43c7e2;logger[_0x3d339e(0x1b8)](_0x3d339e(0x21a)+(_0x33859c&&_0x33859c[_0x3d339e(0x171)]>0x0?_0x3d339e(0x237)+_0x33859c['join'](','):'no\x20additional\x20symbols')+_0x3d339e(0x1e9)+(_0x345f7e?_0x3d339e(0x1c5):_0x3d339e(0x226))+'\x20|\x20exchange:\x20'+config[_0x3d339e(0x11c)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x345f7e)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3d339e(0x23b)]!=''&&config[_0x3d339e(0x23b)]!=_0x3d339e(0x258)){if(_0x345f7e){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x20bec2){handleErrorNoStop(_0x20bec2,_0x3d339e(0x235));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x33859c);const _0x2aa163=await getCoins();[currentCoins,currentCoinsAll]=_0x2aa163,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x3d339e(0x171)]==0x0&&allOpenOrders[_0x3d339e(0x171)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x18ff2f=_0x43c7e2;exchangeStopped=!![],await exchange[_0x18ff2f(0x23d)]();}async function reloadExchange(){const _0x2556a0=_0x43c7e2;logger['debug'](_0x2556a0(0x145));while(lockOrders!=ORDERS[_0x2556a0(0x11e)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x2556a0(0x1c0)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x36fac8=config[_0x43c7e2(0x11c)],_0x4a788e=config[_0x43c7e2(0x23b)],_0x3d4aa3=config[_0x43c7e2(0x15e)],_0x93beee=config['apiPassword']){const _0x2b58d5=_0x43c7e2;exchange&&await stopExchange();!supportedExchanges()[_0x2b58d5(0x1a8)](_0x36fac8)&&(logHistory('error',_0x2b58d5(0x202)+_0x36fac8+_0x2b58d5(0x147)),killBot());const _0x2af0b9=ccxt[_0x2b58d5(0x21d)][_0x36fac8['toLowerCase']()];exchange=new _0x2af0b9({'apiKey':_0x4a788e,'secret':_0x3d4aa3,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2b58d5(0x11f)}});if(_0x93beee)exchange[_0x2b58d5(0x241)]=_0x93beee;}function setStableCoins(){const _0x3650a8=_0x43c7e2;let _0x329cfd=config[_0x3650a8(0x140)]==_0x3650a8(0x100)?_0x3650a8(0x100):_0x3650a8(0x252),_0x636049=!allSymbols[_0x3650a8(0x1a8)](_0x329cfd+'/USD')?'USDT':_0x3650a8(0x19f),_0x4b1a9b=!allSymbols[_0x3650a8(0x1a8)](_0x329cfd+_0x3650a8(0x161))?_0x636049:_0x3650a8(0x1ab);stablecoins={'eur':{'coin':''+_0x329cfd+_0x4b1a9b,'symbol':_0x329cfd+'/'+_0x4b1a9b},'usd':{'coin':''+_0x329cfd+_0x636049,'symbol':_0x329cfd+'/'+_0x636049}};}async function initwsCcxt(_0x5e82ef){const _0x563c63=_0x43c7e2;_0x5e82ef==null&&(_0x5e82ef=[],config[_0x563c63(0x1c1)][_0x563c63(0x22b)](_0x3550d9=>{const _0x463e49=_0x563c63;if(!_0x3550d9['excluded']&&_0x3550d9[_0x463e49(0x17c)]!=config[_0x463e49(0x140)])_0x5e82ef[_0x463e49(0x144)](_0x3550d9[_0x463e49(0x234)]);}));if(!_0x5e82ef[_0x563c63(0x1a8)](stablecoins[_0x563c63(0x26b)][_0x563c63(0x234)]))_0x5e82ef[_0x563c63(0x144)](stablecoins[_0x563c63(0x26b)]['symbol']);if(!_0x5e82ef[_0x563c63(0x1a8)](stablecoins[_0x563c63(0x13d)][_0x563c63(0x234)]))_0x5e82ef['push'](stablecoins[_0x563c63(0x13d)][_0x563c63(0x234)]);if(config['exchange'][_0x563c63(0x1e3)](_0x563c63(0x110))){if(!_0x5e82ef[_0x563c63(0x1a8)](_0x563c63(0x1cc)+config[_0x563c63(0x140)]))_0x5e82ef[_0x563c63(0x144)]('BNB/'+config['basecoin']);}loadCoins(_0x5e82ef);const _0x2bc58d=async _0x3ec179=>{const _0x15d33d=_0x563c63,_0x488e86=await exchange[_0x15d33d(0x203)](_0x3ec179);global[_0x15d33d(0x10d)][noslash(_0x488e86['symbol'])]=_0x488e86['last'];while(!![]){if(!botPaused)try{const _0x2b09f9=await exchange[_0x15d33d(0x1e8)](_0x3ec179);global[_0x15d33d(0x10d)][noslash(_0x2b09f9[0x0][_0x15d33d(0x234)])]=_0x2b09f9[0x0][_0x15d33d(0x1d5)],await sleep(0x3e8);}catch(_0x101600){if(!exchangeStopped)await handleError(_0x101600,'watchTrades',_0x3ec179);}else await sleep(0x64);}},_0x5e7b10=async _0x4c9a44=>{const _0x3d7250=_0x563c63;while(!![]){if(!botPaused)try{const _0x43ba4b=await exchange[_0x3d7250(0x203)](_0x4c9a44);global[_0x3d7250(0x108)][_0x43ba4b[_0x3d7250(0x234)]]=_0x43ba4b['percentage'],await sleep(0x3c*0x3e8);}catch(_0xa13049){if(!exchangeStopped)await handleError(_0xa13049,_0x3d7250(0x1ee),_0x4c9a44);}else await sleep(0x64);}},_0x5e23cb=async()=>{const _0x31b0e0=_0x563c63;while(!![]){if(!botPaused)try{const _0x3cf3de=await exchange[_0x31b0e0(0x187)]();_0x3cf3de[_0x31b0e0(0x22b)](_0x3c5103=>{updateNumberCoinsCcxt(_0x3c5103);});}catch(_0x549d02){if(!exchangeStopped)await handleError(_0x549d02,_0x31b0e0(0x187));}else await sleep(0x64);}};_0x5e82ef[_0x563c63(0x22b)](_0x515686=>{_0x2bc58d(_0x515686),_0x5e7b10(_0x515686);}),!wsEventsSet&&(wsEventsSet=!![],_0x5e23cb(),watchTransactions());}async function watchTransactions(){const _0x162bb5=_0x43c7e2;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4499d6=await getCoins(),[_0xecfb2d,_0x531c10]=_0x4499d6;let _0x2b6ebc=[];currentCoins[_0x162bb5(0x22b)](_0x503d5f=>{const _0x174501=_0x162bb5,_0x4b18d6=_0xecfb2d['find'](_0x40d402=>_0x40d402[_0x174501(0x17c)]==_0x503d5f[_0x174501(0x17c)]);if(_0x4b18d6){if(_0x503d5f[_0x174501(0x210)]!=_0x4b18d6[_0x174501(0x210)]){let _0xd149f7;if(_0x503d5f[_0x174501(0x17c)]!=config['basecoin']){const _0x43db08=global[_0x174501(0x10d)][noslash(_0x503d5f['symbol'])];_0xd149f7=_0x503d5f[_0x174501(0x106)]?0x1/_0x43db08:_0x43db08;}else _0xd149f7=0x1;_0x2b6ebc[_0x174501(0x144)]({'coin':_0x503d5f[_0x174501(0x17c)],'symbol':_0x503d5f[_0x174501(0x234)],'price':_0xd149f7,'number':Number(formatResult(_0x4b18d6[_0x174501(0x210)]-_0x503d5f[_0x174501(0x210)],0x8)),'basecoinvalue':_0xd149f7*(_0x4b18d6['number']-_0x503d5f['number'])});}}});if(_0x2b6ebc[_0x162bb5(0x171)]==0x1&&!blockTransactionDetection){if(config[_0x162bb5(0x268)]){logger[_0x162bb5(0x1b8)](_0x162bb5(0x1f0)+_0x2b6ebc[0x0]['basecoinvalue']+_0x162bb5(0x196)+lastFees[_0x162bb5(0x1d3)]);if(lastFees[_0x162bb5(0x1d3)]==0x0||Math[_0x162bb5(0x1be)](_0x2b6ebc[0x0]['basecoinvalue'])>lastFees['highest']){delete _0x2b6ebc[0x0][_0x162bb5(0x234)],delete _0x2b6ebc[0x0]['basecoinvalue'];let _0x5bb952=[],_0x31b180=[...config[_0x162bb5(0x24d)]]||[],_0x44d08b=config[_0x162bb5(0x24d)];_0x31b180[_0x162bb5(0x109)]((_0x4d0d36,_0x16cb67)=>_0x4d0d36[_0x162bb5(0x199)]>_0x16cb67[_0x162bb5(0x199)]?-0x1:_0x16cb67[_0x162bb5(0x199)]>_0x4d0d36[_0x162bb5(0x199)]?0x1:0x0);const _0x4513b1=getDate();if(_0x31b180[0x0]){const _0x2ade5e=fns[_0x162bb5(0x264)](_0x31b180[0x0]['date'],_0x162bb5(0xf7),new Date()),_0x4c1390=fns[_0x162bb5(0x264)](_0x4513b1,_0x162bb5(0xf7),new Date());if(fns[_0x162bb5(0x111)](_0x2ade5e,_0x4c1390)){_0x5bb952=_0x31b180[0x0][_0x162bb5(0x197)];const _0x8e753c=_0x5bb952[_0x162bb5(0x12f)](_0x5bc7b5=>_0x5bc7b5[_0x162bb5(0x17c)]==_0x2b6ebc[0x0][_0x162bb5(0x17c)]);_0x8e753c?(_0x8e753c[_0x162bb5(0x210)]+=_0x2b6ebc[0x0]['number'],_0x8e753c[_0x162bb5(0x210)]==0x0&&(_0x5bb952=_0x5bb952[_0x162bb5(0x195)](_0x1cefa5=>{const _0x8826f=_0x162bb5;return _0x1cefa5[_0x8826f(0x17c)]!=_0x2b6ebc[0x0]['coin'];}))):_0x5bb952[_0x162bb5(0x144)](_0x2b6ebc[0x0]);const _0x523e99=_0x44d08b[_0x162bb5(0x12f)](_0x4f6a75=>_0x4f6a75['date']==_0x4513b1);_0x523e99[_0x162bb5(0x197)]=_0x5bb952;}else _0x44d08b[_0x162bb5(0x144)]({'date':_0x4513b1,'changes':[_0x2b6ebc[0x0]]});}const _0x768562=_0x44d08b[_0x162bb5(0x12f)](_0x29c55b=>_0x29c55b['date']==_0x4513b1);if(_0x768562){let _0x4adcff=!![];_0x768562[_0x162bb5(0x197)][_0x162bb5(0x22b)](_0x1ab2f1=>{if(_0x1ab2f1['number']!=0x0)_0x4adcff=![];}),_0x4adcff&&(_0x44d08b=_0x44d08b[_0x162bb5(0x195)](_0x3b23f3=>{const _0x438ff4=_0x162bb5;return _0x3b23f3[_0x438ff4(0x199)]!=_0x4513b1;}));}let _0x7a92e=dbConfig[_0x162bb5(0x1bb)](_0x162bb5(0x15b))['find']({'botID':botID})[_0x162bb5(0x232)]();_0x7a92e&&(dbConfig[_0x162bb5(0x1bb)](_0x162bb5(0x15b))[_0x162bb5(0x12f)]({'botID':botID})[_0x162bb5(0xfa)]({'liquidity':_0x44d08b})[_0x162bb5(0x125)](),config[_0x162bb5(0x24d)]=_0x44d08b),logHistory(_0x162bb5(0x158),'Portfolio\x20change\x20detected:\x20'+Math[_0x162bb5(0x1be)](_0x2b6ebc[0x0][_0x162bb5(0x210)])+'\x20'+_0x2b6ebc[0x0][_0x162bb5(0x17c)]+'\x20'+(_0x2b6ebc[0x0][_0x162bb5(0x210)]>0x0?'added':_0x162bb5(0x1d4))+_0x162bb5(0x1d2)),proxyEmit(_0x162bb5(0x1ed),emittedConfiguration());}else logger['debug'](_0x162bb5(0x163)+Math[_0x162bb5(0x1be)](_0x2b6ebc[0x0][_0x162bb5(0x210)])+'\x20'+_0x2b6ebc[0x0][_0x162bb5(0x17c)]+'\x20'+(_0x2b6ebc[0x0][_0x162bb5(0x210)]>0x0?_0x162bb5(0x1fd):_0x162bb5(0x1d4)));transactionDetected=!![],currentCoins=_0xecfb2d,currentCoinsAll=_0x531c10;}else logger['debug'](_0x162bb5(0x10c)+Math['abs'](_0x2b6ebc[0x0][_0x162bb5(0x210)])+'\x20'+_0x2b6ebc[0x0][_0x162bb5(0x17c)]+'\x20'+(_0x2b6ebc[0x0][_0x162bb5(0x210)]>0x0?_0x162bb5(0x1fd):_0x162bb5(0x1d4))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0xecfb2d,currentCoinsAll=_0x531c10;}await sleep(watchTransactionsInterval);}catch(_0x385387){if(!exchangeStopped)await handleError(_0x385387,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x4ec881=config[_0x43c7e2(0x11c)],_0x2279d0=![]){const _0x177ea3=_0x43c7e2;if(allSymbols&&!_0x2279d0)return;try{markets=await exchange[_0x177ea3(0x179)](),allSymbols=[],Object[_0x177ea3(0x1c7)](markets)[_0x177ea3(0x22b)](_0x4e1306=>{const _0x37d359=_0x177ea3;_0x4e1306[0x1]['active']&&_0x4e1306[0x1][_0x37d359(0x11f)]&&allSymbols['push'](_0x4e1306[0x0]);});}catch(_0x43caa1){throw _0x43caa1;}}async function initclient(){const _0x219e25=_0x43c7e2;emitLoadingProgress(),proxyEmit(_0x219e25(0x1ed),emittedConfiguration()),proxyEmit(_0x219e25(0x143),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x219e25(0x20b),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x50f7aa=getNormalizedPerformance();emitPerformance(_0x50f7aa),getStartingBalances(_0x50f7aa);}async function toggleBotMode(){const _0x4fce7e=_0x43c7e2;let _0x51801e=dbConfig[_0x4fce7e(0x1bb)](_0x4fce7e(0x15b))['find']({'botID':botID})[_0x4fce7e(0x232)]();if(_0x51801e){const _0x1b4a82=!_0x51801e[_0x4fce7e(0x26e)];dbConfig[_0x4fce7e(0x1bb)]('bot')['find']({'botID':botID})[_0x4fce7e(0xfa)]({'headless':_0x1b4a82})[_0x4fce7e(0x125)](),config['headless']=_0x1b4a82,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x128bcd=_0x43c7e2;process[_0x128bcd(0x23a)]({'updatebotmanager':!![]},_0x4d17aa=>{});}async function loadCoins(_0x5ca1f7){const _0x11b0b2=_0x43c7e2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x39cad4,_0x97943b=0x0,_0x1c4d96=0x0;_0x5ca1f7[_0x11b0b2(0x22b)](_0x3704c6=>{const _0x436609=_0x11b0b2;loading['remainingSymbols'][_0x436609(0x144)](_0x3704c6);}),loadingCanceled=![];let _0x341332=![];while(_0x39cad4!=_0x5ca1f7[_0x11b0b2(0x171)]){_0x39cad4=0x0,_0x5ca1f7[_0x11b0b2(0x22b)](_0x4ee9ea=>{const _0x306923=_0x11b0b2;if(global['ticker'][noslash(_0x4ee9ea)]){loading[_0x306923(0x18b)]=loading[_0x306923(0x18b)][_0x306923(0x195)](_0x3f585f=>_0x3f585f!=_0x4ee9ea);if(!watchedSymbols[_0x306923(0x1a8)](_0x4ee9ea))watchedSymbols[_0x306923(0x144)](_0x4ee9ea);_0x39cad4++;}}),loading[_0x11b0b2(0x12c)]=Math[_0x11b0b2(0x15a)](_0x39cad4/_0x5ca1f7['length']*0x64);loading['progress']!=0x64&&(_0x1c4d96>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x1c4d96>0x78*0x5&&!_0x341332&&(loading[_0x11b0b2(0x1b0)]=!![],emitLoadingProgress(),_0x341332=!![],logHistory('error',_0x11b0b2(0x190)+loading['remainingSymbols']['join'](',\x20')+_0x11b0b2(0x129)),logHistory(_0x11b0b2(0x246),_0x11b0b2(0x224)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x1de917=_0x11b0b2;process['send']({'stop':_0x1de917(0x123)},_0xe853ac=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x11b0b2(0x1b0)]=!![],emitLoadingProgress();break;}else _0x39cad4!=_0x97943b&&(_0x97943b=_0x39cad4,emitLoadingProgress()),_0x1c4d96++,await sleep(0xc8);}_0x39cad4==_0x5ca1f7[_0x11b0b2(0x171)]&&(coinsLoaded=!![],process[_0x11b0b2(0x23a)]({'status':'enabled','live':_0x11b0b2(0x16c)},_0x9ef19a=>{}),_0x341332&&logHistory('success',_0x11b0b2(0x217)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x1757b0=_0x43c7e2;proxyEmit(_0x1757b0(0x271),loading);}async function getFiat(){const _0x4be2d9=_0x43c7e2;let _0x572c72=global[_0x4be2d9(0x10d)][stablecoins[_0x4be2d9(0x26b)][_0x4be2d9(0x17c)]],_0x25db2e=global[_0x4be2d9(0x10d)][stablecoins[_0x4be2d9(0x13d)][_0x4be2d9(0x17c)]];return{'eur':Number(_0x572c72),'usd':Number(_0x25db2e)};}function capitalize(_0x575a6f){const _0x563ba9=_0x43c7e2;return _0x575a6f[_0x563ba9(0xf6)](0x0,0x1)[_0x563ba9(0x126)]()+_0x575a6f[_0x563ba9(0xf6)](0x1);}function supportedExchanges(){const _0x4f298f=_0x43c7e2,_0x1b2cad=['ws',_0x4f298f(0x1ee),_0x4f298f(0x203),_0x4f298f(0x1e8),_0x4f298f(0x187),_0x4f298f(0x247),_0x4f298f(0x13a),_0x4f298f(0x25c),_0x4f298f(0x239),_0x4f298f(0x214)];let _0x1a6506=[],_0x59f0bb=[],_0x12bb27=ccxt[_0x4f298f(0x21d)][_0x4f298f(0x143)];_0x12bb27[_0x4f298f(0x22b)](_0x5d0434=>{const _0x640a52=_0x4f298f;try{const _0xa94679=new ccxt['pro'][_0x5d0434]();_0x59f0bb[_0x640a52(0x144)](_0xa94679);}catch(_0xd5d822){}}),_0x59f0bb[_0x4f298f(0x22b)](_0x1d9bee=>{const _0xafa7e5=_0x4f298f;let _0x3c2c63=0x0;_0x1b2cad[_0xafa7e5(0x22b)](_0x1be83c=>{const _0x53f9db=_0xafa7e5;_0x1be83c in _0x1d9bee[_0x53f9db(0x14a)]&&_0x1d9bee[_0x53f9db(0x14a)][_0x1be83c]&&_0x3c2c63++;}),_0x3c2c63==_0x1b2cad[_0xafa7e5(0x171)]&&_0x1a6506[_0xafa7e5(0x144)](capitalize(_0x1d9bee['id']));});let _0x2566b9=[];return _0x12bb27[_0x4f298f(0x22b)](_0x5676dc=>{const _0x2793b0=_0x4f298f;_0x5676dc=capitalize(_0x5676dc);if(!_0x1a6506[_0x2793b0(0x1a8)](_0x5676dc))_0x2566b9['push'](_0x5676dc);}),_0x1a6506;}function setStartDatePerformance(){const _0x1d71d1=_0x43c7e2;if(config&&config[_0x1d71d1(0x24d)][0x0][_0x1d71d1(0x197)][_0x1d71d1(0x171)]!=0x0){const _0x18b98f=config[_0x1d71d1(0x24d)][0x0][_0x1d71d1(0x197)];dbPerformance[_0x1d71d1(0x1bb)](_0x1d71d1(0x211))['find']({'date':config['startdate']})[_0x1d71d1(0xfa)]({'coins':_0x18b98f})[_0x1d71d1(0x125)]();}}async function recreateCoinResults(){const _0x2e0971=_0x43c7e2;let _0x1e56b9,_0x5979db=[];try{const _0x267e4a=fns[_0x2e0971(0x209)](fns[_0x2e0971(0x183)](config[_0x2e0971(0x274)][_0x2e0971(0x21e)](/\//g,'-')),_0x2e0971(0x13f));for(const _0x6fdf92 of currentCoins){if(_0x6fdf92[_0x2e0971(0x17c)]!=config[_0x2e0971(0x140)]){let _0x2326d6=0x0,_0x45d928,_0x4937e5;_0x1e56b9=await getAllEventOrders(_0x6fdf92[_0x2e0971(0x234)]);if(_0x1e56b9[_0x2e0971(0x171)]>0x0)_0x1e56b9[_0x2e0971(0x22b)](_0x10cca5=>{const _0x241cb7=_0x2e0971,_0x1a04b4=_0x6fdf92[_0x241cb7(0x234)][_0x241cb7(0x1a8)](config[_0x241cb7(0x140)]+'/');_0x5979db[_0x241cb7(0x144)]({'datetime':_0x10cca5[_0x241cb7(0x17d)],'coin':_0x6fdf92['coin'],'symbol':_0x6fdf92[_0x241cb7(0x234)],'side':_0x10cca5['side'],'reverse':_0x1a04b4,'amount':formatResult(_0x10cca5[_0x241cb7(0x1a1)],0x8),'filled':formatResult(_0x10cca5[_0x241cb7(0x1a1)],0x8),'price':formatResult(_0x10cca5[_0x241cb7(0x1d5)],0x8)}),_0x2326d6=_0x10cca5[_0x241cb7(0x24e)]==_0x241cb7(0x1bd)?_0x2326d6+_0x10cca5[_0x241cb7(0x1a1)]:_0x2326d6-_0x10cca5[_0x241cb7(0x1a1)];if(!_0x4937e5)_0x4937e5=_0x10cca5[_0x241cb7(0x1d5)];});_0x45d928=_0x6fdf92[_0x2e0971(0x210)]-_0x2326d6;let _0x152634;config[_0x2e0971(0x24d)][_0x2e0971(0x22b)](_0x44fef7=>{const _0x5738e6=_0x2e0971;!_0x152634&&(_0x152634=_0x44fef7[_0x5738e6(0x197)][_0x5738e6(0x12f)](_0x4f3ccd=>_0x4f3ccd[_0x5738e6(0x17c)]==_0x6fdf92['coin']),_0x152634&&(_0x45d928=_0x152634['number'],_0x4937e5=_0x152634[_0x5738e6(0x1d5)]));});let _0x3f7e55=dbCoinResults[_0x2e0971(0x1bb)](_0x2e0971(0x21c))['find']({'coin':_0x6fdf92['coin']})['value']();_0x3f7e55={'coin':_0x6fdf92['coin'],'number':_0x45d928,'breakeven':_0x4937e5,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x2e0971(0x21c))[_0x2e0971(0x12f)]({'coin':_0x6fdf92[_0x2e0971(0x17c)]})[_0x2e0971(0xfa)](_0x3f7e55)[_0x2e0971(0x125)]();}}_0x5979db[_0x2e0971(0x109)]((_0xe11343,_0x3b410b)=>_0xe11343[_0x2e0971(0x17d)]>_0x3b410b['datetime']?0x1:_0x3b410b['datetime']>_0xe11343[_0x2e0971(0x17d)]?-0x1:0x0);let _0x5c8ea3=0x0;for(let _0x27bb72 of _0x5979db){await updateCoinResults(_0x27bb72,!![]);}}catch(_0x1cabe3){await handleError(_0x1cabe3,_0x2e0971(0x154));}}async function getAllEventOrders(_0x144356){const _0x10038f=_0x43c7e2;let _0x5fda8b=[],_0x1c9300=dbLogs[_0x10038f(0x1bb)](_0x10038f(0x220))[_0x10038f(0x195)](_0x5237d3=>{const _0x3c2bbc=_0x10038f,_0x3283e6=_0x5237d3['event'][_0x3c2bbc(0x134)]();return _0x3283e6[_0x3c2bbc(0x1a8)](_0x144356[_0x3c2bbc(0x134)]())&&(_0x3283e6['includes'](_0x3c2bbc(0x18c))&&_0x3283e6[_0x3c2bbc(0x1a8)](_0x3c2bbc(0x148))||_0x3283e6[_0x3c2bbc(0x1a8)](_0x3c2bbc(0x1a1))&&_0x3283e6[_0x3c2bbc(0x1a8)]('order'));})[_0x10038f(0x173)](_0x10038f(0x254))[_0x10038f(0x232)]();return _0x1c9300[_0x10038f(0x22b)](_0x52fccc=>{const _0x5ba08c=_0x10038f,_0x1162d9=_0x52fccc[_0x5ba08c(0x172)][_0x5ba08c(0x1a8)]('sell')?_0x5ba08c(0x1e0):_0x5ba08c(0x1bd),_0x3d6dc6=/#([0-9]|\.)+\s/i,_0x1f02c7=Number(_0x3d6dc6['exec'](_0x52fccc[_0x5ba08c(0x172)])[0x0][_0x5ba08c(0x244)](0x1)),_0x133f98=/@([0-9]|\.)+$/i,_0xe3b4be=Number(_0x133f98[_0x5ba08c(0x1bf)](_0x52fccc['event'])[0x0][_0x5ba08c(0x244)](0x1));_0x5fda8b['push']({'datetime':_0x52fccc[_0x5ba08c(0x254)],'coin':symbolToCoin(_0x144356),'symbol':_0x144356,'side':_0x1162d9,'amount':_0x1f02c7,'filled':_0x1f02c7,'price':_0xe3b4be});}),_0x5fda8b;}async function getAllOrders(_0x334c5e,_0x349446){const _0x1b0727=_0x43c7e2;let _0x340df6=[];while(_0x349446<exchange['milliseconds']()){const _0x2de30e=0x1f4,_0x10b81c=await exchange[_0x1b0727(0x239)](_0x334c5e,_0x349446,_0x2de30e);if(_0x10b81c[_0x1b0727(0x171)])_0x349446=_0x10b81c[_0x10b81c[_0x1b0727(0x171)]-0x1]['timestamp']+0x1,_0x340df6=_0x340df6[_0x1b0727(0x133)](_0x10b81c);else break;}return _0x340df6;}async function validate24hChanges(){const _0x56f2fd=_0x43c7e2;for(const _0x4e7a1e of currentCoins){if(_0x4e7a1e[_0x56f2fd(0x17c)]!=config['basecoin']){let _0x6638f;_0x4e7a1e[_0x56f2fd(0x106)]?_0x6638f=formatResult((0x1/(global[_0x56f2fd(0x108)][noslash(_0x4e7a1e[_0x56f2fd(0x234)])]/0x64+0x1)-0x1)*0x64,0x3):_0x6638f=global[_0x56f2fd(0x108)][noslash(_0x4e7a1e[_0x56f2fd(0x234)])],_0x6638f<config[_0x56f2fd(0x152)]&&(logHistory(_0x56f2fd(0x246),_0x4e7a1e['coin']+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x6638f+'%'),logHistory(_0x56f2fd(0x246),_0x56f2fd(0x122)),logHistory(_0x56f2fd(0x246),_0x56f2fd(0xfb)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0xdfedec,_0x2dd75b){const _0x4f090e=_0x43c7e2;if(!_0xdfedec)return!![];const _0x26a7b5=_0x2dd75b[_0x4f090e(0x22e)]('.'),_0x59e57c=_0xdfedec[_0x4f090e(0x22e)]('.');for(var _0x469319=0x0;_0x469319<_0x59e57c[_0x4f090e(0x171)];_0x469319++){const _0x51af36=~~_0x59e57c[_0x469319],_0x2f5677=~~_0x26a7b5[_0x469319];if(_0x51af36<_0x2f5677)return!![];if(_0x51af36>_0x2f5677)return![];}return![];}async function oneTimeMigration(){const _0x4bb0ac=_0x43c7e2;let _0x31a8f4=dbLogs[_0x4bb0ac(0x1bb)]('version')[_0x4bb0ac(0x232)]();if(isOlderVersion(_0x31a8f4,_0x4bb0ac(0x1db))){let _0xaae8d9=[];const _0x3f99bc=dbLogs[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x220))[_0x4bb0ac(0x232)]();_0x3f99bc[_0x4bb0ac(0x22b)](_0x3b39d6=>{const _0x545039=_0x4bb0ac;_0xaae8d9[_0x545039(0x144)]({'time':_0x3b39d6[_0x545039(0x254)],'type':_0x3b39d6[_0x545039(0x1b4)],'event':_0x3b39d6[_0x545039(0x172)]});}),dbLogs[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x220))['assign'](_0xaae8d9)[_0x4bb0ac(0x125)]();}let _0x42c127=dbConfig[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x222))[_0x4bb0ac(0x232)]();if(isOlderVersion(_0x42c127,'2.3.5')){let _0x56d420=dbConfig[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x15b))[_0x4bb0ac(0x12f)]({'botID':botID})[_0x4bb0ac(0x232)]();if(_0x56d420){let _0x4401e3=[];_0x56d420[_0x4bb0ac(0x1c1)][_0x4bb0ac(0x22b)](_0x4bca08=>{const _0x3e3f15=_0x4bb0ac;_0x4401e3['push']({'coin':_0x4bca08[_0x3e3f15(0x17c)],'number':_0x4bca08[_0x3e3f15(0x1a6)],'price':_0x4bca08[_0x3e3f15(0x22c)]}),delete _0x4bca08['startnumber'],delete _0x4bca08[_0x3e3f15(0x22c)];});if(_0x4401e3[_0x4bb0ac(0x171)]!==0x0)fs['writeFile'](configbackuppath+(_0x4bb0ac(0x1e2)+botID+_0x4bb0ac(0x192)),JSON[_0x4bb0ac(0x1ad)](_0x4401e3,null,0x4),function(_0x1b5df0){if(_0x1b5df0){}});const _0x1d718d=(_0x269926,_0x4213f5)=>{const _0x50591c=_0x4bb0ac;let _0x26338a=[];_0x4213f5[_0x50591c(0x22b)](_0x4f8dfa=>{const _0x514260=_0x50591c,_0x59660a=_0x269926[_0x514260(0x12f)](_0x1c4720=>_0x1c4720[_0x514260(0x17c)]==_0x4f8dfa['coin']);if(!_0x59660a)_0x26338a[_0x514260(0x144)](_0x4f8dfa);});let _0x55c7c2=[];return _0x269926[_0x50591c(0x22b)](_0x4c846d=>{const _0x466bb3=_0x50591c,_0x3baff0=_0x4213f5['find'](_0x3ee0dc=>_0x3ee0dc[_0x466bb3(0x17c)]==_0x4c846d[_0x466bb3(0x17c)]);if(!_0x3baff0||_0x3baff0[_0x466bb3(0x210)]==0x0&&_0x4c846d[_0x466bb3(0x210)]!=0x0)_0x55c7c2[_0x466bb3(0x144)](_0x4c846d);}),{'missingDay1':_0x26338a,'notInDay2':_0x55c7c2};},_0x2efbb3=dbPerformance[_0x4bb0ac(0x1bb)]('data')[_0x4bb0ac(0x1da)]()[_0x4bb0ac(0x232)]();if(_0x2efbb3['length']>0x1){const {missingDay1:_0x515a9e,notInDay2:_0x1f064e}=_0x1d718d(_0x4401e3,_0x2efbb3[0x1][_0x4bb0ac(0x21c)]);_0x4401e3=[..._0x4401e3,..._0x515a9e],_0x1f064e[_0x4bb0ac(0x22b)](_0x232697=>{const _0x750171=_0x4bb0ac;let _0x5905ea=_0x4401e3[_0x750171(0x184)](_0x2cdd83=>_0x2cdd83['coin']==_0x232697[_0x750171(0x17c)]);_0x5905ea!=-0x1&&_0x4401e3[_0x750171(0x22a)](_0x5905ea,0x1);});}_0x4401e3[_0x4bb0ac(0x109)]((_0x1918a1,_0xba285e)=>_0x1918a1['coin']>_0xba285e[_0x4bb0ac(0x17c)]?0x1:_0xba285e[_0x4bb0ac(0x17c)]>_0x1918a1[_0x4bb0ac(0x17c)]?-0x1:0x0);let _0x9d1867=[{'date':_0x56d420[_0x4bb0ac(0x274)],'changes':_0x4401e3}];_0x2efbb3[_0x4bb0ac(0x171)]>0x2&&_0x2efbb3['forEach']((_0x1a969f,_0x441b46)=>{const _0x24526e=_0x4bb0ac;if(_0x441b46>0x0&&_0x441b46<_0x2efbb3[_0x24526e(0x171)]-0x1){const {missingDay1:_0x5c00fa,notInDay2:_0x5d6ad5}=_0x1d718d(_0x2efbb3[_0x441b46][_0x24526e(0x21c)],_0x2efbb3[_0x441b46+0x1][_0x24526e(0x21c)]);_0x4401e3=[],(_0x5c00fa['length']!=0x0||_0x5d6ad5[_0x24526e(0x171)]!=0x0)&&(_0x5c00fa[_0x24526e(0x171)]!=0x0&&_0x4401e3[_0x24526e(0x144)](..._0x5c00fa),_0x5d6ad5[_0x24526e(0x171)]!=0x0&&(_0x5d6ad5['forEach'](_0x544b31=>{const _0x16b01c=_0x24526e;_0x544b31[_0x16b01c(0x210)]=-_0x544b31['number'];}),_0x4401e3[_0x24526e(0x144)](..._0x5d6ad5)),_0x4401e3[_0x24526e(0x109)]((_0x31cc37,_0x338b07)=>_0x31cc37[_0x24526e(0x17c)]>_0x338b07['coin']?0x1:_0x338b07['coin']>_0x31cc37[_0x24526e(0x17c)]?-0x1:0x0),_0x9d1867[_0x24526e(0x144)]({'date':_0x2efbb3[_0x441b46+0x1][_0x24526e(0x199)],'changes':_0x4401e3}));}}),dbConfig[_0x4bb0ac(0x1bb)]('bot')[_0x4bb0ac(0x12f)]({'botID':botID})[_0x4bb0ac(0xfa)]({..._0x56d420,'liquidity':_0x9d1867})[_0x4bb0ac(0x125)]();}}if(isOlderVersion(_0x42c127,'2.6.0')){let _0x5ecf43=dbConfig[_0x4bb0ac(0x1bb)]('bot')['find']({'botID':botID})['value']();if(_0x5ecf43){const _0x494c87=_0x5ecf43[_0x4bb0ac(0x11c)],_0x293759=_0x494c87?capitalize(_0x494c87):_0x4bb0ac(0x110);dbConfig[_0x4bb0ac(0x1bb)]('bot')['find']({'botID':botID})[_0x4bb0ac(0xfa)]({'exchange':_0x293759})['write']();}}let _0x43e56b=dbPerformance[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x222))[_0x4bb0ac(0x232)]();isOlderVersion(_0x43e56b,_0x4bb0ac(0x1db))&&setStartDatePerformance();let _0x3fb41d=dbCoinResults['get']('version')[_0x4bb0ac(0x232)]();if(isOlderVersion(_0x3fb41d,'2.5.0')){let _0x40ca79=dbCoinResults[_0x4bb0ac(0x1bb)](_0x4bb0ac(0x21c))['value']();if(_0x40ca79[_0x4bb0ac(0x171)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4ee039=_0x43c7e2;dbConfig[_0x4ee039(0x119)](_0x4ee039(0x222),serverversion)[_0x4ee039(0x125)](),dbPerformance[_0x4ee039(0x119)](_0x4ee039(0x222),serverversion)[_0x4ee039(0x125)](),dbLogs[_0x4ee039(0x119)](_0x4ee039(0x222),serverversion)[_0x4ee039(0x125)](),dbCoinResults[_0x4ee039(0x119)]('version',serverversion)['write']();}function getConfiguration(_0x200958){const _0x175e1f=_0x43c7e2;let _0x54295c=dbConfig[_0x175e1f(0x1bb)]('bot')[_0x175e1f(0x12f)]({'botID':_0x200958})['value']();if(_0x54295c){let _0x13fefe=![];typeof _0x54295c[_0x175e1f(0x16b)]=='string'&&(_0x54295c={..._0x54295c,'threshold':Number(_0x54295c[_0x175e1f(0x16b)])},_0x13fefe=!![]),_0x54295c[_0x175e1f(0x152)]==undefined&&(_0x54295c={..._0x54295c,'change24h':-0x14},_0x13fefe=!![]),_0x54295c['fiat']==undefined&&(_0x54295c={..._0x54295c,'fiat':_0x175e1f(0x19f)},_0x13fefe=!![]),_0x54295c['onepagemode']==undefined&&(_0x54295c={..._0x54295c,'onepagemode':settings[_0x175e1f(0x242)]},_0x13fefe=!![]),_0x54295c[_0x175e1f(0x1f8)]==undefined&&(_0x54295c={..._0x54295c,'colorscheme':_0x175e1f(0x230)},_0x13fefe=!![]),_0x54295c['autoliquidity']==undefined&&(_0x54295c={..._0x54295c,'autoliquidity':!![]},_0x13fefe=!![]),_0x13fefe&&(_0x54295c={'botID':_0x54295c['botID'],'exchange':_0x54295c[_0x175e1f(0x11c)],'apiKey':_0x54295c[_0x175e1f(0x23b)],'apiSecret':_0x54295c[_0x175e1f(0x15e)],'apiPassword':_0x54295c[_0x175e1f(0x1d1)],'basecoin':_0x54295c[_0x175e1f(0x140)],'botname':_0x54295c[_0x175e1f(0x19b)],'showname':_0x54295c[_0x175e1f(0x103)],'threshold':_0x54295c[_0x175e1f(0x16b)],'ordertype':_0x54295c[_0x175e1f(0x240)],'timeout':_0x54295c[_0x175e1f(0x194)],'fiat':_0x54295c[_0x175e1f(0x26a)],'startdate':_0x54295c[_0x175e1f(0x274)],'recreate':_0x54295c['recreate'],'timeshift':_0x54295c['timeshift'],'onepagemode':_0x54295c['onepagemode'],'headless':_0x54295c[_0x175e1f(0x26e)],'cooldown':_0x54295c[_0x175e1f(0x24f)],'change24h':_0x54295c['change24h'],'emojibuy':_0x54295c[_0x175e1f(0x176)],'emojisell':_0x54295c['emojisell'],'colorscheme':_0x54295c['colorscheme'],'portfolio':_0x54295c[_0x175e1f(0x1c1)],'autoliquidity':_0x54295c[_0x175e1f(0x268)],'liquidity':_0x54295c['liquidity'],'openOrders':_0x54295c[_0x175e1f(0x277)]},dbConfig[_0x175e1f(0x1bb)]('bot')[_0x175e1f(0x256)]()[_0x175e1f(0x125)](),dbConfig[_0x175e1f(0x1bb)](_0x175e1f(0x15b))[_0x175e1f(0x144)](_0x54295c)[_0x175e1f(0x125)]());}else _0x54295c={'botID':_0x200958,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x175e1f(0x20d)+_0x200958,'showname':![],'threshold':0x3,'ordertype':_0x175e1f(0x18c),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x175e1f(0xf5)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x175e1f(0x230),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x54295c;}function emittedConfiguration(){const _0x3d4a37=_0x43c7e2;let _0x126de8;if(config['apiKey']=='')_0x126de8={...config,'configstate':_0x3d4a37(0x18f)};else config[_0x3d4a37(0x23b)]=='***'?_0x126de8={...config,'configstate':'recovery'}:(_0x126de8={...config,'apiKey':_0x3d4a37(0x20c),'apiSecret':_0x3d4a37(0x20c)},config[_0x3d4a37(0x1d1)]&&(_0x126de8[_0x3d4a37(0x1d1)]='************'));return _0x126de8;}function getSettings(){const _0xa8b5f8=_0x43c7e2;return dbSettings[_0xa8b5f8(0x1bb)](_0xa8b5f8(0x1fe))[_0xa8b5f8(0x232)]();}function getSecure(){const _0x1cb296=_0x43c7e2;return dbSecure[_0x1cb296(0x1bb)](_0x1cb296(0x263))[_0x1cb296(0x232)]()||{};}function updateTimeshift(_0x426ce4){const _0x52c256=_0x43c7e2;let _0x1ad2e0=dbConfig[_0x52c256(0x1bb)]('bot')['find']({'botID':botID})['value']();_0x1ad2e0&&dbConfig['get']('bot')[_0x52c256(0x12f)]({'botID':botID})[_0x52c256(0xfa)]({'timeshift':_0x426ce4})['write'](),config[_0x52c256(0xf5)]=_0x426ce4,proxyEmit(_0x52c256(0x1ed),emittedConfiguration());}function updateOnepagemode(_0x3ee63a){const _0x36b55d=_0x43c7e2;let _0x3cc1ef=dbConfig[_0x36b55d(0x1bb)](_0x36b55d(0x15b))[_0x36b55d(0x12f)]({'botID':botID})[_0x36b55d(0x232)]();_0x3cc1ef&&dbConfig[_0x36b55d(0x1bb)](_0x36b55d(0x15b))['find']({'botID':botID})[_0x36b55d(0xfa)]({'onepagemode':_0x3ee63a})[_0x36b55d(0x125)](),config[_0x36b55d(0x242)]=_0x3ee63a,proxyEmit(_0x36b55d(0x1ed),emittedConfiguration());}async function storeConfiguration(_0x5e51d7){const _0xa43cce=_0x43c7e2;logger[_0xa43cce(0x1b8)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xa43cce(0x1b8)](_0xa43cce(0x115));let _0x38f796=[],_0x51d3c9=![],_0x31be04=![],_0x117b6a=[];_0x5e51d7[_0xa43cce(0x1c1)]['forEach'](_0x597119=>{const _0x9d38=_0xa43cce;if(!_0x597119[_0x9d38(0x1ef)]&&_0x597119[_0x9d38(0x17c)]!=_0x5e51d7[_0x9d38(0x140)])_0x117b6a[_0x9d38(0x144)](_0x597119[_0x9d38(0x234)]);}),_0x117b6a[_0xa43cce(0x22b)](_0x466bb4=>{const _0x202429=_0xa43cce,_0x4a0842=watchedSymbols[_0x202429(0x1a8)](_0x466bb4);!_0x4a0842&&_0x38f796['push'](_0x466bb4);}),_0x117b6a[_0xa43cce(0x22b)](_0x202c3b=>{const _0x3288b8=_0xa43cce,_0x166f27=currentCoins['find'](_0x3e8943=>_0x3e8943[_0x3288b8(0x234)]==_0x202c3b);!_0x166f27&&(_0x51d3c9=!![]);}),currentCoins[_0xa43cce(0x22b)](_0x28ce5a=>{const _0x52505a=_0xa43cce;if(_0x28ce5a[_0x52505a(0x17c)]!=config[_0x52505a(0x140)]){const _0x39f26b=_0x117b6a[_0x52505a(0x12f)](_0x3cb1f9=>_0x3cb1f9==_0x28ce5a['symbol']);!_0x39f26b&&(_0x51d3c9=!![]);}}),_0x5e51d7[_0xa43cce(0x1c1)][_0xa43cce(0x22b)](_0x153744=>{const _0x4fa979=_0xa43cce,_0x17a158=config[_0x4fa979(0x1c1)][_0x4fa979(0x12f)](_0x41f1a3=>_0x41f1a3[_0x4fa979(0x17c)]==_0x153744[_0x4fa979(0x17c)]);if(_0x17a158&&_0x153744[_0x4fa979(0x10a)]!=_0x17a158[_0x4fa979(0x10a)])_0x31be04=!![];});let _0x14c82f=dbConfig[_0xa43cce(0x1bb)]('bot')[_0xa43cce(0x12f)]({'botID':botID})[_0xa43cce(0x232)]();_0x5e51d7={..._0x5e51d7,'apiKey':crypt[_0xa43cce(0x250)](secure[_0xa43cce(0x18a)],_0x5e51d7['apiKey'])[_0xa43cce(0x1a4)],'apiSecret':crypt[_0xa43cce(0x250)](secure['privateKey'],_0x5e51d7[_0xa43cce(0x15e)])[_0xa43cce(0x1a4)]};_0x5e51d7[_0xa43cce(0x1d1)]&&(_0x5e51d7[_0xa43cce(0x1d1)]=crypt[_0xa43cce(0x250)](secure[_0xa43cce(0x18a)],_0x5e51d7[_0xa43cce(0x1d1)])['message']);let _0x5e9b19=![];if(_0x14c82f){_0x5e51d7['apiKey']==_0xa43cce(0x20c)?_0x5e51d7[_0xa43cce(0x23b)]=config[_0xa43cce(0x23b)]:_0x5e9b19=!![];_0x5e51d7[_0xa43cce(0x15e)]==_0xa43cce(0x20c)?_0x5e51d7[_0xa43cce(0x15e)]=config['apiSecret']:_0x5e9b19=!![];if(_0x5e51d7['apiPassword']==_0xa43cce(0x20c))_0x5e51d7['apiPassword']=config[_0xa43cce(0x1d1)];else{if(_0x5e51d7[_0xa43cce(0x1d1)])_0x5e9b19=!![];}dbConfig[_0xa43cce(0x1bb)]('bot')[_0xa43cce(0x12f)]({'botID':botID})[_0xa43cce(0xfa)](_0x5e51d7)[_0xa43cce(0x125)]();}else dbConfig['get']('bot')[_0xa43cce(0x144)](_0x5e51d7)[_0xa43cce(0x125)](),_0x5e9b19=!![],process[_0xa43cce(0x23a)]({'status':_0xa43cce(0x255),'live':_0xa43cce(0x16c)},_0x3b0016=>{});process[_0xa43cce(0x23a)]({'botname':_0x5e51d7[_0xa43cce(0x19b)]},_0x315c94=>{}),updateBotManager(),config={..._0x5e51d7},proxyEmit(_0xa43cce(0x11a)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5e9b19)await reset(_0x38f796,!![]);else _0x51d3c9||_0x31be04?await reset(_0x38f796,![]):getBalances();blockTransactionDetection=![],logger[_0xa43cce(0x1b8)](_0xa43cce(0x1f4));}async function storeHeadless(_0x25c8b5){const _0x5e625a=_0x43c7e2,_0x2af509={...config,'headless':_0x25c8b5[_0x5e625a(0x26e)]};let _0x2623bc=dbConfig[_0x5e625a(0x1bb)](_0x5e625a(0x15b))[_0x5e625a(0x12f)]({'botID':botID})[_0x5e625a(0x232)]();_0x2623bc&&dbConfig[_0x5e625a(0x1bb)]('bot')[_0x5e625a(0x12f)]({'botID':botID})[_0x5e625a(0xfa)](_0x2af509)[_0x5e625a(0x125)](),config={..._0x2af509},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x10ba36){const _0x34043a=_0x43c7e2,_0x17a970={...config,'fiat':_0x10ba36};let _0x587a3a=dbConfig['get'](_0x34043a(0x15b))['find']({'botID':botID})['value']();_0x587a3a&&dbConfig[_0x34043a(0x1bb)]('bot')[_0x34043a(0x12f)]({'botID':botID})[_0x34043a(0xfa)](_0x17a970)[_0x34043a(0x125)](),config={..._0x17a970},proxyEmit(_0x34043a(0x1ed),emittedConfiguration());}function resetHistory(){const _0x381185=_0x43c7e2;logger[_0x381185(0x1c3)](_0x381185(0x19c));try{if(fs['existsSync'](path[_0x381185(0x266)](configpath,_0x381185(0x138)+botID+_0x381185(0x121))))fs['unlinkSync'](path[_0x381185(0x266)](configpath,_0x381185(0x138)+botID+_0x381185(0x121)));if(fs['existsSync'](path['join'](configpath,_0x381185(0x138)+botID+_0x381185(0x228))))fs[_0x381185(0x253)](path[_0x381185(0x266)](configpath,_0x381185(0x138)+botID+_0x381185(0x228)));if(fs[_0x381185(0x1aa)](path[_0x381185(0x266)](configpath,'bot-'+botID+'-results.json')))fs['unlinkSync'](path['join'](configpath,_0x381185(0x138)+botID+_0x381185(0x236)));}catch(_0x5a4d80){if(_0x5a4d80)logger[_0x381185(0x1c3)](_0x381185(0x13c),_0x5a4d80);}const _0x2284c6=getDate();let _0x3edec3=[];currentCoins['forEach'](_0x1237ad=>{const _0x33d972=_0x381185;_0x3edec3['push']({'coin':_0x1237ad[_0x33d972(0x17c)],'number':_0x1237ad[_0x33d972(0x210)],'price':_0x1237ad[_0x33d972(0x156)]});});let _0x19b824=dbConfig[_0x381185(0x1bb)](_0x381185(0x15b))[_0x381185(0x12f)]({'botID':botID})[_0x381185(0x232)]();_0x19b824&&(dbConfig[_0x381185(0x1bb)](_0x381185(0x15b))[_0x381185(0x12f)]({'botID':botID})[_0x381185(0xfa)]({'liquidity':[{'date':_0x2284c6,'changes':_0x3edec3}]})[_0x381185(0x125)](),config['liquidity']=[]),process['send']({'stop':'restart'},_0x40ccf8=>{});}function noslash(_0x45f2b0){const _0x5632c7=_0x43c7e2;return _0x45f2b0[_0x5632c7(0x21e)]('/','');}function updateHighestFee(_0x55425d){const _0x18a6c9=_0x43c7e2;if(_0x55425d[_0x18a6c9(0x106)]){let _0x2a1fe7={'filled':_0x55425d[_0x18a6c9(0x1a1)]*_0x55425d['price'],'amount':_0x55425d[_0x18a6c9(0x1a1)]*_0x55425d['price'],'side':_0x55425d[_0x18a6c9(0x24e)]==_0x18a6c9(0x1e0)?_0x18a6c9(0x1bd):'sell','price':0x1/_0x55425d[_0x18a6c9(0x1d5)]};_0x55425d={..._0x55425d,..._0x2a1fe7};}const _0x15bcdf=defaultFee*_0x55425d[_0x18a6c9(0x1a1)]*_0x55425d[_0x18a6c9(0x1d5)];lastFees['recent20'][_0x18a6c9(0x171)]===0x14&&lastFees[_0x18a6c9(0x21f)][_0x18a6c9(0x164)](),lastFees['recent20'][_0x18a6c9(0x144)](_0x15bcdf),lastFees[_0x18a6c9(0x1d3)]=Math['max'](...lastFees[_0x18a6c9(0x21f)]);}async function updateNumberCoinsCcxt(_0x118334){const _0x420686=_0x43c7e2;logger['debug'](_0x420686(0x238)+_0x118334['symbol']+_0x420686(0x1e9)+_0x118334[_0x420686(0x14f)]+'\x20|\x20'+_0x118334['id']);let _0x409171=_0x118334[_0x420686(0x14f)],_0x4cec4c=![];currentCoins[_0x420686(0x22b)](_0x2df803=>{const _0xd7a343=_0x420686;_0x2df803[_0xd7a343(0x234)]==_0x118334['symbol']&&(_0x4cec4c=!![]);});if(!_0x4cec4c)return;const _0x2bb21d=currentCoins['find'](_0x2bb795=>_0x2bb795[_0x420686(0x234)]==_0x118334['symbol']),_0x2b838c=_0x1227b6=>{const _0x546846=_0x420686;if(_0x2bb21d)_0x2bb21d[_0x546846(0xf9)]=_0x1227b6;};if(_0x409171==_0x420686(0x10e))_0x2b838c(_0x420686(0x10e));else{if(_0x409171==_0x420686(0x223)){_0x2b838c(_0x420686(0x223));const _0x3a436b=await getCoins();[currentCoins,currentCoinsAll]=_0x3a436b,await getOpenOrders(),handleOpenOrders();}else{if(_0x409171==_0x420686(0x169)){logger[_0x420686(0x1b8)](_0x420686(0x102)+_0x118334[_0x420686(0x234)]+_0x420686(0x1e9)+_0x118334['filled']+_0x420686(0x1e9)+_0x118334['id']);let _0x26db16=![];if(lastOrders)for(const _0x2bdccd of lastOrders){const _0x3f251d=0xc8,_0x1bc87a=0x1388;let _0x165d91=0x0;while(!_0x2bdccd[_0x420686(0x189)]&&_0x165d91*_0x3f251d<_0x1bc87a){_0x165d91++,await sleep(_0x3f251d);}if(_0x165d91>0x0)logger['debug'](_0x420686(0x22f)+_0x165d91*_0x3f251d/0x3e8+_0x420686(0x249));if(_0x2bdccd[_0x420686(0x189)]==_0x118334['id']){logger[_0x420686(0x1b8)]('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x118334['id']),_0x26db16=!![];if(_0x2bdccd[_0x420686(0x1a1)]==0x0){logger[_0x420686(0x1b8)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x118334['id']);if(_0x118334[_0x420686(0x260)])_0x2bdccd['price']=_0x118334[_0x420686(0x260)];else{if(_0x118334['price'])_0x2bdccd[_0x420686(0x1d5)]=_0x118334[_0x420686(0x1d5)];else{}}_0x2bdccd[_0x420686(0x1a1)]=_0x118334[_0x420686(0x1a1)],updateHighestFee(_0x2bdccd),_0x2b838c('filled'),await validateOrders();if(lockOrders==ORDERS[_0x420686(0x1ec)]){const _0xc34a=await getCoins();[currentCoins,currentCoinsAll]=_0xc34a;}_0x2bdccd[_0x420686(0x131)]={'currency':_0x118334[_0x420686(0x131)]?_0x118334['fee']['currency']:null,'cost':_0x118334[_0x420686(0x131)]?_0x118334[_0x420686(0x131)][_0x420686(0x26f)]:0x0},await updateCoinResults(_0x2bdccd);}}}if(!_0x26db16){logger[_0x420686(0x1b8)](_0x420686(0x25e)+_0x118334['id']),_0x2b838c('filled');const _0x245bae=await getCoins();[currentCoins,currentCoinsAll]=_0x245bae,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x45e5e6=JSON[_0x420686(0x264)](lastBalances[_0x420686(0x1c1)]);const _0x2bd995=_0x45e5e6[_0x420686(0x12f)](_0x13d73c=>_0x13d73c[_0x420686(0x234)]==_0x118334[_0x420686(0x234)]);if(_0x2bd995){if(_0x409171==_0x420686(0x10e))_0x2bd995[_0x420686(0xf9)]=_0x2bd995[_0x420686(0xf9)]==_0x420686(0x1a1)?'filled':_0x420686(0x10e);else{if(_0x409171==_0x420686(0x223))_0x2bd995[_0x420686(0xf9)]=_0x2bd995[_0x420686(0xf9)]==_0x420686(0x1a1)?'filled':_0x420686(0x223);else _0x409171==_0x420686(0x169)&&(_0x2bd995[_0x420686(0xf9)]=_0x420686(0x1a1));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x45e5e6)},proxyEmit(_0x420686(0x20b),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x1a3361=![];currentCoins['forEach'](_0x1fc395=>{const _0x3029eb=_0x5cfd;_0x1a3361=allOpenOrders['find'](_0x5486fe=>_0x5486fe[_0x3029eb(0x234)]==_0x1fc395[_0x3029eb(0x234)]),_0x1fc395[_0x3029eb(0xf9)]=_0x1a3361?_0x3029eb(0x10e):_0x3029eb(0x107);});}async function getCoins(_0x2bee96=!![],_0x29b798=config[_0x43c7e2(0x140)]){const _0x2af4d5=_0x43c7e2;let _0x1cf4dd,_0x14f660=[],_0x1b3a54=[],_0x4b0957=[],_0x4fb14d=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1cf4dd=await exchange[_0x2af4d5(0x214)](),mybalances=_0x1cf4dd[_0x2af4d5(0x23f)];for(const [_0x5871cc,_0x2a3583]of Object[_0x2af4d5(0x1c7)](mybalances)){_0x4fb14d[_0x2af4d5(0x144)](_0x5871cc);}if(_0x29b798=='')for(const [_0x54f14c,_0x22d96d]of Object[_0x2af4d5(0x1c7)](mybalances)){_0x22d96d!=0x0&&_0x1b3a54[_0x2af4d5(0x144)]({'coin':_0x54f14c});}else{let _0x3cf9ae=![];for(const [_0x147b8a,_0x4a35a6]of Object[_0x2af4d5(0x1c7)](mybalances)){if(_0x4fb14d[_0x2af4d5(0x1a8)](_0x147b8a)){const _0x1bc59e=config[_0x2af4d5(0x1c1)][_0x2af4d5(0x12f)](_0x83419f=>_0x83419f[_0x2af4d5(0x17c)]==_0x147b8a),_0x19658a=_0x147b8a+'/'+_0x29b798,_0x179037=_0x29b798+'/'+_0x147b8a,_0x1ab0c6=currentCoins[_0x2af4d5(0x12f)](_0x58c203=>_0x58c203[_0x2af4d5(0x17c)]==_0x147b8a);_0x3cf9ae=![];if((_0x4a35a6!=0x0||_0x1bc59e)&&(allSymbols['includes'](_0x19658a)||_0x147b8a==_0x29b798))_0x147b8a!=_0x29b798&&_0x14f660['push'](_0x19658a),_0x1b3a54[_0x2af4d5(0x144)]({'coin':_0x147b8a,'symbol':_0x19658a,'reverse':![],'number':Math[_0x2af4d5(0x1f3)](_0x4a35a6+(_0x1bc59e&&_0x1bc59e[_0x2af4d5(0x10a)]||0x0),0x0),'orderstatus':_0x1ab0c6?_0x1ab0c6[_0x2af4d5(0xf9)]:'none'});else(_0x4a35a6!=0x0||_0x1bc59e)&&allSymbols['includes'](_0x179037)&&(_0x147b8a!=_0x29b798&&_0x14f660['push'](_0x179037),_0x1b3a54['push']({'coin':_0x147b8a,'symbol':_0x179037,'reverse':!![],'number':Math[_0x2af4d5(0x1f3)](_0x4a35a6+(_0x1bc59e&&_0x1bc59e[_0x2af4d5(0x10a)]||0x0),0x0),'orderstatus':_0x1ab0c6?_0x1ab0c6[_0x2af4d5(0xf9)]:_0x2af4d5(0x107)}));}}}}catch(_0x279c5c){if(!_0x2bee96)handleErrorNoStop(_0x279c5c,_0x2af4d5(0x11b));else await handleError(_0x279c5c,_0x2af4d5(0x11b));}return _0x4b0957=cloneDeep(_0x1b3a54),_0x1b3a54=_0x1b3a54[_0x2af4d5(0x195)](_0x2218be=>{const _0x3ea0b3=_0x2af4d5,_0x22e087=config[_0x3ea0b3(0x1c1)][_0x3ea0b3(0x12f)](_0x11e839=>_0x11e839[_0x3ea0b3(0x17c)]==_0x2218be['coin']);return _0x22e087&&!_0x22e087[_0x3ea0b3(0x1ef)];}),[_0x1b3a54,_0x4b0957];}async function getCoinNumber(_0x1834d0){const _0x561dc7=_0x43c7e2;let _0x17f5de;try{const _0x5d231c=await exchange[_0x561dc7(0x214)]();_0x17f5de=_0x5d231c[_0x561dc7(0x23f)][_0x1834d0];}catch(_0x2ffe67){await handleError(_0x2ffe67,'getCoinNumber()');}return _0x17f5de;}async function getOpenOrders(){const _0x19c2bc=_0x43c7e2;let _0x1a3b95;allOpenOrders=[];try{for(const _0xe9f427 of config[_0x19c2bc(0x1c1)]){!_0xe9f427[_0x19c2bc(0x1ef)]&&_0xe9f427[_0x19c2bc(0x17c)]!=config['basecoin']&&(_0x1a3b95=await exchange[_0x19c2bc(0x25c)](_0xe9f427['symbol']),_0x1a3b95[_0x19c2bc(0x171)]>0x0&&allOpenOrders[_0x19c2bc(0x144)](_0x1a3b95[0x0]));}}catch(_0x5372f5){await handleError(_0x5372f5,'getOpenOrders()');}}async function handleOpenOrders(_0xaeef91=0x0){const _0x4fa65d=_0x43c7e2;allOpenOrders[_0x4fa65d(0x171)]==0x0&&lockOrders==ORDERS[_0x4fa65d(0x1ec)]&&allOrdersPlaced&&(_0xaeef91==0x0?(logger['debug'](_0x4fa65d(0x12b)),_0xaeef91++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4fa65d(0x1b8)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x4fa65d(0x231))));}async function testAPI(_0x5b1b66){const _0x30ffca=_0x43c7e2,_0x173df9=ccxt[_0x30ffca(0x21d)][_0x5b1b66['exchange'][_0x30ffca(0x134)]()],_0x339525=new _0x173df9({'apiKey':_0x5b1b66[_0x30ffca(0x23b)],'secret':_0x5b1b66[_0x30ffca(0x15e)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x30ffca(0x11f)}});if(_0x5b1b66[_0x30ffca(0x1d1)])_0x339525[_0x30ffca(0x241)]=_0x5b1b66[_0x30ffca(0x1d1)];try{await _0x339525[_0x30ffca(0x179)]();}catch(_0x36935e){throw _0x36935e;}}function cloneDeep(_0x5e6971){return JSON['parse'](JSON['stringify'](_0x5e6971));}async function getPortfolio(_0x32c54c){const _0x1bffe3=_0x43c7e2;let _0x31acb8=[],_0x1aea1a=[],_0x599106=[],_0x1e3075;if(_0x32c54c[_0x1bffe3(0x23b)]!==_0x1bffe3(0x20c)||_0x32c54c[_0x1bffe3(0x15e)]!==_0x1bffe3(0x20c)||_0x32c54c[_0x1bffe3(0x1d1)]&&_0x32c54c['apiPassword']!=='************'){if(config[_0x1bffe3(0x11c)]){if(_0x32c54c[_0x1bffe3(0x23b)]==_0x1bffe3(0x20c))_0x32c54c['apiKey']=config[_0x1bffe3(0x23b)];if(_0x32c54c[_0x1bffe3(0x15e)]==_0x1bffe3(0x20c))_0x32c54c['apiSecret']=config[_0x1bffe3(0x15e)];if(_0x32c54c[_0x1bffe3(0x1d1)]==_0x1bffe3(0x20c))_0x32c54c[_0x1bffe3(0x1d1)]=config[_0x1bffe3(0x1d1)];try{await testAPI(_0x32c54c);}catch(_0x564528){if(_0x564528[_0x1bffe3(0x17b)]()[_0x1bffe3(0x1a8)](_0x1bffe3(0x279))){logger[_0x1bffe3(0x1b8)](_0x1bffe3(0x141)),proxyEmit(_0x1bffe3(0x1c1),![]);return;}else{handleError(_0x564528,_0x1bffe3(0x193));return;}}}await initExchange(_0x32c54c['exchange'],_0x32c54c[_0x1bffe3(0x23b)],_0x32c54c[_0x1bffe3(0x15e)],_0x32c54c['apiPassword']);try{await loadSymbols(_0x32c54c[_0x1bffe3(0x11c)],!![]);}catch(_0x57ce8f){if(_0x57ce8f['toString']()[_0x1bffe3(0x1a8)](_0x1bffe3(0x279))){proxyEmit(_0x1bffe3(0x1c1),![]);return;}else{handleError(_0x57ce8f,'getPortfolio(1)');return;}}const _0xb3bbc4=await getCoins(![],_0x32c54c[_0x1bffe3(0x140)]);_0x599106=cloneDeep(_0xb3bbc4[0x1]);}else _0x599106=cloneDeep(currentCoinsAll);if(_0x32c54c[_0x1bffe3(0x140)]=='')proxyEmit(_0x1bffe3(0x1c1),_0x599106);else{_0x599106[_0x1bffe3(0x22b)](_0x9e67e=>{const _0x45c689=_0x1bffe3;if(_0x9e67e[_0x45c689(0x17c)]!=_0x32c54c[_0x45c689(0x140)])_0x31acb8[_0x45c689(0x144)](_0x9e67e[_0x45c689(0x234)]);});try{_0x1aea1a=await exchange[_0x1bffe3(0x1ee)](_0x31acb8);}catch(_0x3c0752){if(_0x3c0752[_0x1bffe3(0x17b)]()[_0x1bffe3(0x1a8)](_0x1bffe3(0x279))){proxyEmit(_0x1bffe3(0x1c1),![]);return;}else{handleError(_0x3c0752,_0x1bffe3(0x167));return;}}_0x599106[_0x1bffe3(0x22b)](_0x17baa3=>{const _0x103a37=_0x1bffe3;_0x17baa3[_0x103a37(0x17c)]!=_0x32c54c[_0x103a37(0x140)]?_0x1e3075=_0x17baa3[_0x103a37(0x106)]?0x1/_0x1aea1a[_0x17baa3[_0x103a37(0x234)]][_0x103a37(0x156)]:_0x1aea1a[_0x17baa3[_0x103a37(0x234)]][_0x103a37(0x156)]:_0x1e3075=0x1,_0x17baa3[_0x103a37(0x1d5)]=formatResult(_0x1e3075,0x8);}),proxyEmit(_0x1bffe3(0x1c1),_0x599106);}}function truncateTradeAmount(_0x1fb836,_0xc7dff){const _0x54a85a=_0x43c7e2;let _0x1b9e48=0x0;try{_0x1b9e48=exchange[_0x54a85a(0x20f)](_0x1fb836,_0xc7dff);}catch(_0x5135ee){}return _0x1b9e48;}function checkMinimums(_0x336a82){const _0x5c9fff=_0x43c7e2;let _0xdbff1a=!![];const _0x5dda84=!_0x336a82[_0x5c9fff(0x106)]?markets[_0x336a82['symbol']]['limits']['amount'][_0x5c9fff(0x216)]:markets[_0x336a82[_0x5c9fff(0x234)]][_0x5c9fff(0x168)][_0x5c9fff(0x26f)][_0x5c9fff(0x216)],_0x1ae847=!_0x336a82[_0x5c9fff(0x106)]?markets[_0x336a82[_0x5c9fff(0x234)]]['limits'][_0x5c9fff(0x26f)][_0x5c9fff(0x216)]:markets[_0x336a82[_0x5c9fff(0x234)]][_0x5c9fff(0x168)][_0x5c9fff(0x272)][_0x5c9fff(0x216)],_0x79a514=truncateTradeAmount(_0x336a82[_0x5c9fff(0x234)],_0x336a82[_0x5c9fff(0x12d)]);_0x336a82[_0x5c9fff(0x12d)]=_0x79a514;if(Math[_0x5c9fff(0x1be)](_0x79a514)<_0x5dda84)_0xdbff1a=![];if(Math[_0x5c9fff(0x1be)](_0x79a514)*_0x336a82[_0x5c9fff(0x156)]<_0x1ae847)_0xdbff1a=![];if(_0x336a82[_0x5c9fff(0x24e)]==_0x5c9fff(0x1e0)){let _0x4a7b65=config[_0x5c9fff(0x1c1)][_0x5c9fff(0x12f)](_0x36768f=>_0x36768f['coin']==_0x336a82[_0x5c9fff(0x17c)]);if(_0x4a7b65[_0x5c9fff(0x10a)]>0x0){if(Math[_0x5c9fff(0x1be)](_0x79a514)>_0x336a82[_0x5c9fff(0x210)]-_0x4a7b65['offset'])_0xdbff1a=![];}else{if(Math[_0x5c9fff(0x1be)](_0x79a514)>_0x336a82[_0x5c9fff(0x210)])_0xdbff1a=![];}}if(_0x336a82[_0x5c9fff(0x24e)]=='buy'){let _0x5a137e=config['portfolio'][_0x5c9fff(0x12f)](_0x306907=>_0x306907[_0x5c9fff(0x17c)]==config[_0x5c9fff(0x140)]),_0x1487ce=currentCoins['find'](_0xd526ce=>_0xd526ce['coin']==config[_0x5c9fff(0x140)]);if(_0x5a137e['offset']>0x0){if(Math[_0x5c9fff(0x1be)](_0x79a514)*_0x336a82[_0x5c9fff(0x156)]>_0x1487ce[_0x5c9fff(0x210)]-_0x5a137e[_0x5c9fff(0x10a)])_0xdbff1a=![];}else{if(Math[_0x5c9fff(0x1be)](_0x79a514)*_0x336a82[_0x5c9fff(0x156)]>_0x1487ce[_0x5c9fff(0x210)])_0xdbff1a=![];}}return _0xdbff1a;}async function getBalances(_0x2c01a9=!![]){const _0x56bdaa=_0x43c7e2;let _0x183208=0x0,_0x1f9f67;const _0x3807b6=config[_0x56bdaa(0x16b)];if(config['headless']&&config[_0x56bdaa(0x152)]<0x0)await validate24hChanges();currentCoins[_0x56bdaa(0x22b)](_0x17eae8=>{const _0x27b2df=_0x56bdaa;if(_0x17eae8[_0x27b2df(0x17c)]!=config[_0x27b2df(0x140)]){let _0xa24147=global[_0x27b2df(0x10d)][noslash(_0x17eae8[_0x27b2df(0x234)])];_0x1f9f67=_0x17eae8[_0x27b2df(0x106)]?0x1/_0xa24147:_0xa24147;}else _0x1f9f67=0x1;let _0x56db99=_0x17eae8[_0x27b2df(0x210)]*_0x1f9f67;_0x183208+=_0x56db99,_0x17eae8[_0x27b2df(0x156)]=formatResult(Number(_0x1f9f67),0x8),_0x17eae8['value']=_0x56db99;}),currentCoins[_0x56bdaa(0x22b)](_0x2b1858=>{const _0x1d5860=_0x56bdaa;let _0x4a6b56=config[_0x1d5860(0x1c1)][_0x1d5860(0x12f)](_0x2fedc4=>_0x2fedc4[_0x1d5860(0x17c)]==_0x2b1858['coin']),_0x4cb93b=Number(_0x4a6b56[_0x1d5860(0x18e)]),_0x5499a2=_0x2b1858[_0x1d5860(0x232)]/_0x183208*0x64,_0x233598=_0x4cb93b*_0x183208/0x64/_0x2b1858[_0x1d5860(0x156)]-_0x2b1858[_0x1d5860(0x210)];_0x2b1858[_0x1d5860(0x18e)]=formatResult(_0x5499a2,0x3),_0x2b1858[_0x1d5860(0x23e)]=formatResult(_0x4cb93b,0x3),_0x2b1858[_0x1d5860(0x12d)]=formatResult(_0x233598,0x8),_0x2b1858['side']='',_0x2b1858[_0x1d5860(0x17e)]=![];if(_0x2b1858[_0x1d5860(0x17c)]!=config[_0x1d5860(0x140)]){if(_0x2b1858[_0x1d5860(0x18e)]>_0x4cb93b)_0x2b1858[_0x1d5860(0x24e)]=_0x1d5860(0x1e0),_0x2b1858[_0x1d5860(0x17e)]=checkMinimums(_0x2b1858);else _0x2b1858[_0x1d5860(0x18e)]<_0x4cb93b&&(_0x2b1858[_0x1d5860(0x24e)]=_0x1d5860(0x1bd),_0x2b1858[_0x1d5860(0x17e)]=checkMinimums(_0x2b1858));}_0x2b1858['delta']=_0x2b1858['distribution']/_0x2b1858[_0x1d5860(0x23e)]-0x1;if(_0x2b1858['orderstatus']==_0x1d5860(0x1a1)||_0x2b1858[_0x1d5860(0xf9)]==_0x1d5860(0x223))_0x2b1858[_0x1d5860(0xf9)]='none';}),currentCoins[_0x56bdaa(0x109)]((_0x195968,_0x3eeb60)=>_0x195968['delta']<_0x3eeb60[_0x56bdaa(0x1f2)]?0x1:_0x3eeb60[_0x56bdaa(0x1f2)]<_0x195968['delta']?-0x1:0x0);const _0xca0430=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0xca0430['eur'],'usd':_0xca0430[_0x56bdaa(0x13d)],'portfolio':JSON[_0x56bdaa(0x1ad)](currentCoins),'threshold':_0x3807b6},proxyEmit(_0x56bdaa(0x20b),{'serverversion':serverversion,'balances':lastBalances});if(_0x2c01a9){if(config[_0x56bdaa(0x26e)])headlessMode({'portfolio':currentCoins,'threshold':_0x3807b6});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3807b6});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4e1b96=getNormalizedPerformance();getStartingBalances(_0x4e1b96),emitPerformance(_0x4e1b96);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5d040c=getNormalizedPerformance();emitPerformance(_0x5d040c),getStartingBalances(_0x5d040c),logger[_0x56bdaa(0x1b8)](_0x56bdaa(0x267));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x314252=_0x43c7e2;if(!lastBalances)return;let _0x1b0954=[],_0x487721,_0x512b19=JSON[_0x314252(0x264)](lastBalances[_0x314252(0x1c1)]);_0x512b19[_0x314252(0x109)]((_0x448e65,_0x45f207)=>_0x448e65[_0x314252(0x17c)]>_0x45f207['coin']?0x1:_0x45f207[_0x314252(0x17c)]>_0x448e65[_0x314252(0x17c)]?-0x1:0x0),_0x512b19['forEach'](_0x3e75e9=>{const _0x5dd5c1=_0x314252;let _0x3ff912={'coin':_0x3e75e9[_0x5dd5c1(0x17c)],'number':_0x3e75e9['number'],'price':_0x3e75e9['last']};_0x1b0954[_0x5dd5c1(0x144)](_0x3ff912);});const _0x38f1c9=await getFiat();_0x487721={'date':lastBalances[_0x314252(0x254)][_0x314252(0x22e)]('\x20')[0x0],'eur':_0x38f1c9[_0x314252(0x26b)],'usd':_0x38f1c9['usd'],'coins':_0x1b0954};let _0x5c2d9e=dbPerformance[_0x314252(0x1bb)]('data')['find']({'date':_0x487721['date']})[_0x314252(0x232)]();_0x5c2d9e?_0x487721['date']!=config[_0x314252(0x274)]&&dbPerformance[_0x314252(0x1bb)](_0x314252(0x211))[_0x314252(0x12f)]({'date':_0x487721[_0x314252(0x199)]})[_0x314252(0xfa)](_0x487721)[_0x314252(0x125)]():dbPerformance[_0x314252(0x1bb)](_0x314252(0x211))['push'](_0x487721)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3da5b2=_0x43c7e2;let _0x17c1e7=[];if(dbPerformance[_0x3da5b2(0x14a)](_0x3da5b2(0x211))[_0x3da5b2(0x232)]()){let _0x4606c9=dbPerformance[_0x3da5b2(0x1bb)](_0x3da5b2(0x211))[_0x3da5b2(0x1da)]()[_0x3da5b2(0x195)](_0x102ac4=>{const _0x40b3f5=_0x3da5b2;if(_0x102ac4[_0x40b3f5(0x21c)]['length']==0x0)return![];else return!![];})[_0x3da5b2(0x173)](_0x3da5b2(0x199))[_0x3da5b2(0x232)](),_0x4d3996=[...config[_0x3da5b2(0x24d)]];_0x4d3996[_0x3da5b2(0x109)]((_0x12b724,_0x2bc1bc)=>_0x12b724[_0x3da5b2(0x199)]>_0x2bc1bc[_0x3da5b2(0x199)]?-0x1:_0x2bc1bc['date']>_0x12b724['date']?0x1:0x0);let _0xf594b9=0x1,_0x36c608=[],_0x958aab=0x0;_0x4606c9[_0x3da5b2(0x244)]()['reverse']()[_0x3da5b2(0x22b)]((_0x3d54f2,_0x3754e1)=>{const _0x111c2e=_0x3da5b2;if(_0x4d3996[_0x958aab]){if(_0x4606c9[_0x4606c9[_0x111c2e(0x171)]-_0x3754e1]&&_0x4d3996[_0x958aab][_0x111c2e(0x199)]==_0x4606c9[_0x4606c9[_0x111c2e(0x171)]-_0x3754e1][_0x111c2e(0x199)]){if(_0x3754e1<_0x4606c9[_0x111c2e(0x171)]){let _0x549a61=0x0,_0x278fa8=0x0;_0x4606c9[_0x4606c9[_0x111c2e(0x171)]-_0x3754e1][_0x111c2e(0x21c)][_0x111c2e(0x22b)](_0x5e6dc6=>{const _0x50dcef=_0x111c2e;_0x278fa8+=_0x5e6dc6[_0x50dcef(0x210)]*_0x5e6dc6[_0x50dcef(0x1d5)];}),_0x4d3996[_0x958aab][_0x111c2e(0x197)]['forEach'](_0x192b16=>{const _0x470152=_0x111c2e;_0x549a61+=_0x192b16[_0x470152(0x210)]*_0x192b16[_0x470152(0x1d5)];}),_0xf594b9*=_0x549a61/(_0x278fa8-_0x549a61)+0x1;}_0x958aab++;}}let _0x34c860=0x0;_0x3d54f2[_0x111c2e(0x21c)][_0x111c2e(0x22b)](_0x1d39da=>{const _0x306aee=_0x111c2e;_0x34c860+=_0x1d39da[_0x306aee(0x210)]*_0x1d39da['price'];}),_0x36c608[_0x4606c9[_0x111c2e(0x171)]-_0x3754e1-0x1]=_0x34c860*(_0xf594b9-0x1);});let _0x3abc98=[];_0x4d3996=[...config[_0x3da5b2(0x24d)]]||[];let _0x23fb55=0x0;_0x958aab=0x0,_0x4606c9[_0x3da5b2(0x22b)]((_0x258527,_0x2a05aa)=>{const _0x30534d=_0x3da5b2;if(_0x4d3996[_0x958aab]){const _0x5ed61e=fns[_0x30534d(0x264)](_0x4d3996[_0x958aab][_0x30534d(0x199)],_0x30534d(0xf7),new Date()),_0x249ec0=fns[_0x30534d(0x264)](_0x258527['date'],_0x30534d(0xf7),new Date());if(fns[_0x30534d(0x111)](_0x5ed61e,_0x249ec0)){let _0x5e305d=0x0;_0x4d3996[_0x958aab]['changes'][_0x30534d(0x22b)](_0x3efe68=>{const _0x3de6b3=_0x30534d;!_0x3abc98[_0x3efe68['coin']]?_0x3abc98[_0x3efe68['coin']]=_0x3efe68[_0x3de6b3(0x210)]:(_0x5e305d=_0x3abc98[_0x3efe68[_0x3de6b3(0x17c)]],_0x3abc98[_0x3efe68[_0x3de6b3(0x17c)]]+=_0x3efe68[_0x3de6b3(0x210)]);const _0x5e6a00=_0x258527[_0x3de6b3(0x21c)][_0x3de6b3(0x12f)](_0x1cadf5=>_0x1cadf5[_0x3de6b3(0x17c)]==_0x3efe68['coin']);(!_0x5e6a00||_0x5e6a00['number']==0x0)&&(_0x23fb55+=(-_0x3efe68[_0x3de6b3(0x210)]-_0x5e305d)*_0x3efe68[_0x3de6b3(0x1d5)]);}),_0x958aab++;}}_0x258527['coins']['forEach']((_0x4602d5,_0x29604a)=>{const _0x53f6dc=_0x30534d;_0x3abc98[_0x4602d5[_0x53f6dc(0x17c)]]&&(_0x4602d5[_0x53f6dc(0x18f)]=_0x3abc98[_0x4602d5[_0x53f6dc(0x17c)]]);}),_0x17c1e7[_0x30534d(0x144)]({'date':_0x258527['date'],'eur':_0x258527[_0x30534d(0x26b)],'usd':_0x258527[_0x30534d(0x13d)],'offset':_0x36c608[_0x2a05aa],'netoffset':_0x23fb55,'coins':_0x258527['coins']});});}return _0x17c1e7;}function emitPerformance(_0x1057ba){const _0x5e3988=_0x43c7e2;_0x1057ba[_0x5e3988(0x171)]!==0x0?(proxyEmit('performance',_0x1057ba),lastPerformanceEmitted=getDate()):proxyEmit(_0x5e3988(0x160),[]);}function getPerf(_0x112da9,_0x5484c0){const _0x55b2e5=_0x43c7e2;let _0x78c51=0x0,_0x5ec332=0x0,_0x43202d=0x0;_0x112da9['coins'][_0x55b2e5(0x22b)](_0x47a46b=>{const _0x391a53=_0x55b2e5;_0x78c51+=_0x47a46b[_0x391a53(0x210)]*_0x47a46b['price'];});_0x5484c0&&(_0x78c51+=_0x112da9[_0x55b2e5(0x10a)]);if(config[_0x55b2e5(0x140)]===_0x55b2e5(0x252)||config[_0x55b2e5(0x140)]===_0x55b2e5(0x100))_0x5ec332=_0x78c51*_0x112da9[_0x55b2e5(0x26b)],_0x43202d=_0x78c51*_0x112da9[_0x55b2e5(0x13d)];else{if(usdBasecoins[_0x55b2e5(0x1a8)](config['basecoin']))_0x5ec332=_0x78c51*_0x112da9[_0x55b2e5(0x26b)]/_0x112da9[_0x55b2e5(0x13d)],_0x43202d=_0x78c51;else config[_0x55b2e5(0x140)]===_0x55b2e5(0x1ab)&&(_0x5ec332=_0x78c51,_0x43202d=_0x78c51*_0x112da9[_0x55b2e5(0x13d)]/_0x112da9[_0x55b2e5(0x26b)]);}return[_0x78c51,_0x5ec332,_0x43202d];}function getKPIs(_0x59b2e4,_0x36b546=_0x43c7e2(0x1ab)){const _0x2ffebe=_0x43c7e2,_0x13d63a=config[_0x2ffebe(0x140)],_0x4db54b=lastBalances,_0x34d041=currentCoins,_0x3fb8c9=getNormalizedPerformance(),_0x5a6b41=_0x59b2e4===_0x2ffebe(0x140)?_0x13d63a:_0x59b2e4==='fiat'||_0x59b2e4===_0x2ffebe(0x21b)?_0x36b546:_0x2ffebe(0x259)+_0x13d63a,_0xbe5f3e=_0x59b2e4===_0x2ffebe(0x251)?_0x2ffebe(0x20a):_0x59b2e4===_0x2ffebe(0x21b)?_0x2ffebe(0x20a):_0x5a6b41+_0x2ffebe(0x12a),_0x519168=_0x59b2e4==='net-basecoin'||_0x59b2e4===_0x2ffebe(0x21b)?'Net\x20effect':_0x5a6b41+_0x2ffebe(0x159);let _0x2e8523=0x0;_0x34d041[_0x2ffebe(0x22b)](_0x412096=>{const _0x426ae9=_0x2ffebe;_0x2e8523+=_0x412096[_0x426ae9(0x210)]*_0x412096['last'];});if(_0x59b2e4===_0x2ffebe(0x26a)||_0x59b2e4===_0x2ffebe(0x21b)){if(_0x13d63a==='BTC'||_0x13d63a===_0x2ffebe(0x100))_0x2e8523=_0x2e8523*(_0x36b546===_0x2ffebe(0x1ab)?_0x4db54b[_0x2ffebe(0x26b)]:_0x4db54b[_0x2ffebe(0x13d)]);else{if(usdBasecoins['includes'](_0x13d63a))_0x2e8523=_0x2e8523*(_0x36b546==='EUR'?_0x4db54b[_0x2ffebe(0x26b)]/_0x4db54b['usd']:0x1);else _0x13d63a===_0x2ffebe(0x1ab)&&(_0x2e8523=_0x2e8523*(_0x36b546===_0x2ffebe(0x1ab)?0x1:_0x4db54b[_0x2ffebe(0x13d)]/_0x4db54b[_0x2ffebe(0x26b)]));}}let _0x5a36b6;if(_0x2e8523!==0x0){if(_0x59b2e4===_0x2ffebe(0x140))_0x5a36b6=(_0x2e8523/startingBalances[_0x2ffebe(0x140)]-0x1)*0x64;else{if(_0x36b546===_0x2ffebe(0x1ab))_0x5a36b6=(_0x2e8523/startingBalances['eur']-0x1)*0x64;else _0x5a36b6=(_0x2e8523/startingBalances[_0x2ffebe(0x13d)]-0x1)*0x64;}let _0x350a38=0x0;if(startingBalances[_0x2ffebe(0x21c)])_0x34d041[_0x2ffebe(0x22b)](_0x1b89e4=>{const _0x927e00=_0x2ffebe;let _0x5e6dd1=startingBalances['coins'][_0x927e00(0x12f)](_0x293cf7=>_0x293cf7[_0x927e00(0x17c)]===_0x1b89e4[_0x927e00(0x17c)]);if(_0x5e6dd1&&_0x5e6dd1[_0x927e00(0x17c)]&&_0x1b89e4[_0x927e00(0x210)]!==0x0)_0x350a38+=_0x5e6dd1[_0x927e00(0x210)]*_0x1b89e4[_0x927e00(0x156)];});let _0x219ce6=0x0;if(_0x3fb8c9['length']!==0x0){let _0x398936=_0x3fb8c9[_0x3fb8c9[_0x2ffebe(0x171)]-0x1];_0x219ce6=_0x398936[_0x2ffebe(0x24a)];}_0x350a38-=_0x219ce6;_0x59b2e4===_0x2ffebe(0x251)&&(_0x5a36b6=(_0x2e8523-_0x350a38)/startingBalances[_0x2ffebe(0x140)]*0x64,_0x2e8523=_0x2e8523-_0x350a38);if(_0x59b2e4===_0x2ffebe(0x21b)){let _0x5ed756=_0x36b546===_0x2ffebe(0x1ab)?startingBalances[_0x2ffebe(0x26b)]:startingBalances[_0x2ffebe(0x13d)];if(_0x13d63a===_0x2ffebe(0x252)||_0x13d63a===_0x2ffebe(0x100))_0x350a38=_0x36b546==='EUR'?_0x350a38*_0x4db54b['eur']:_0x350a38*_0x4db54b[_0x2ffebe(0x13d)];else{if(usdBasecoins[_0x2ffebe(0x1a8)](_0x13d63a))_0x350a38=_0x36b546===_0x2ffebe(0x1ab)?_0x350a38*_0x4db54b[_0x2ffebe(0x26b)]/_0x4db54b['usd']:_0x350a38;else _0x13d63a===_0x2ffebe(0x1ab)&&(_0x350a38=_0x36b546==='EUR'?_0x350a38:_0x350a38*_0x4db54b['usd']/_0x4db54b['eur']);}_0x5a36b6=(_0x2e8523-_0x350a38)/_0x5ed756*0x64,_0x2e8523=_0x2e8523-_0x350a38;}if(_0x5a36b6){if(_0x5a36b6<0x64)_0x5a36b6=_0x5a36b6[_0x2ffebe(0x180)](0x2);else{if(_0x5a36b6<0x3e8)_0x5a36b6=_0x5a36b6[_0x2ffebe(0x180)](0x1);else _0x5a36b6=_0x5a36b6[_0x2ffebe(0x180)](0x0);}}else _0x5a36b6=Number('0')['toFixed'](0x2);if(_0x2e8523){if(Math['abs'](_0x2e8523)<0.000001)_0x2e8523=_0x2e8523['toFixed'](0x2);else{if(Math[_0x2ffebe(0x1be)](_0x2e8523)<0.1)_0x2e8523=_0x2e8523['toFixed'](0x6);else{if(Math[_0x2ffebe(0x1be)](_0x2e8523)<0x1)_0x2e8523=_0x2e8523[_0x2ffebe(0x180)](0x5);else{if(Math[_0x2ffebe(0x1be)](_0x2e8523)<0xa)_0x2e8523=_0x2e8523[_0x2ffebe(0x180)](0x4);else{if(Math['abs'](_0x2e8523)<0x64)_0x2e8523=_0x2e8523['toFixed'](0x3);else{if(Math[_0x2ffebe(0x1be)](_0x2e8523)<0x3e8)_0x2e8523=_0x2e8523[_0x2ffebe(0x180)](0x2);else _0x2e8523=_0x2e8523['toFixed'](0x2);}}}}}}else _0x2e8523=Number('0')[_0x2ffebe(0x180)](0x2);}else _0x5a36b6=Number('0')[_0x2ffebe(0x180)](0x2);return{'value':_0x2e8523,'change':_0x5a36b6,'leftTxt':_0xbe5f3e,'rightTxt':_0x519168};}async function getStartingBalances(_0x32c533,_0x31fa14=!![]){const _0x41ed5d=_0x43c7e2;if(_0x32c533['length']!==0x0){const [_0x5e8c3b,_0x3c095a,_0x583ec4]=getPerf(_0x32c533[0x0],!![]);let _0x18cd0d=[];config[_0x41ed5d(0x1c1)][_0x41ed5d(0x22b)](_0xba02c0=>{const _0x40636f=_0x41ed5d;let _0x2e1f07=0x0,_0x7eaed4;config['liquidity']['forEach'](_0x28332b=>{const _0x332dee=_0x5cfd;let _0x5cfee1=_0x28332b['changes'][_0x332dee(0x12f)](_0x150512=>_0x150512[_0x332dee(0x17c)]==_0xba02c0[_0x332dee(0x17c)]);if(_0x5cfee1){_0x2e1f07+=_0x5cfee1['number'];if(!_0x7eaed4)_0x7eaed4=_0x5cfee1[_0x332dee(0x1d5)];}}),_0x18cd0d[_0x40636f(0x144)]({'coin':_0xba02c0[_0x40636f(0x17c)],'number':_0x2e1f07,'initialprice':_0x7eaed4});});const _0x27e5f2={'basecoin':_0x5e8c3b,'eur':_0x3c095a,'usd':_0x583ec4,'coins':_0x18cd0d};if(_0x31fa14)proxyEmit(_0x41ed5d(0x188),_0x27e5f2);startingBalances=_0x27e5f2;}}function headlessMode(_0x41a6d6){const _0x36b538=_0x43c7e2;let _0x190d81=_0x41a6d6[_0x36b538(0x1c1)],_0x3d529d=_0x41a6d6[_0x36b538(0x16b)],_0x176307=[];for(let _0x14a628 of _0x190d81){if(_0x14a628[_0x36b538(0x17c)]!=config['basecoin']){if(_0x14a628[_0x36b538(0x1f2)]>=_0x3d529d/0x64){if(_0x14a628[_0x36b538(0x17e)])_0x176307[_0x36b538(0x144)](_0x14a628);}else{if(_0x14a628['delta']<=-_0x3d529d/0x64){if(_0x14a628['valid'])_0x176307[_0x36b538(0x144)](_0x14a628);}}}}_0x176307[_0x36b538(0x171)]>0x0&&placeOrder(_0x176307);}function notifyBalance(_0x482925){const _0x6ea98e=_0x43c7e2;let _0x8f90c7=_0x482925['portfolio'],_0x41a2f7=_0x482925[_0x6ea98e(0x16b)],_0x5e1c85=[];for(let _0x1a062e of _0x8f90c7){if(_0x1a062e[_0x6ea98e(0x17c)]!=config[_0x6ea98e(0x140)]){if(_0x1a062e['delta']>=_0x41a2f7/0x64){if(_0x1a062e[_0x6ea98e(0x17e)])_0x5e1c85[_0x6ea98e(0x144)](_0x1a062e);}else{if(_0x1a062e['delta']<=-_0x41a2f7/0x64){if(_0x1a062e['valid'])_0x5e1c85[_0x6ea98e(0x144)](_0x1a062e);}}}}if(_0x5e1c85[_0x6ea98e(0x171)]>0x0){let _0x199426=_0x5e1c85['map'](_0x2e2bb3=>_0x2e2bb3[_0x6ea98e(0x17c)]);_0x199426[_0x6ea98e(0x109)]();let _0x431f88=_0x199426[_0x6ea98e(0x266)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x431f88;}}function symbolToCoin(_0x8081a2){const _0x5b47a1=_0x43c7e2;let _0x37d7c8;if(_0x8081a2[_0x5b47a1(0x1a8)]('/'+config[_0x5b47a1(0x140)]))_0x37d7c8=_0x8081a2[_0x5b47a1(0x21e)]('/'+config[_0x5b47a1(0x140)],'');if(_0x8081a2[_0x5b47a1(0x1a8)](config[_0x5b47a1(0x140)]+'/'))_0x37d7c8=_0x8081a2[_0x5b47a1(0x21e)](config['basecoin']+'/','');return _0x37d7c8;}async function unlockOrders(){const _0x53618d=_0x43c7e2;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x53618d(0x1b8)](_0x53618d(0x227)),lockOrders=ORDERS[_0x53618d(0x1dc)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x548996=await getCoins();[currentCoins,currentCoinsAll]=_0x548996,validateOrdersState=_0x53618d(0x18f),persistOpenOrders([]),lockOrders=ORDERS[_0x53618d(0x11e)],logger[_0x53618d(0x1b8)](_0x53618d(0x1ac));}}async function validateOrders(_0x4b0d13){const _0x19fd03=_0x43c7e2;if(_0x4b0d13)validateOrdersState=_0x4b0d13;logger[_0x19fd03(0x1b8)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x19fd03(0x1a9):lockOrders==0x2?_0x19fd03(0x25b):_0x19fd03(0x1e7)));let _0x450840=[],_0x4a0dc6=config['ordertype']==_0x19fd03(0x18c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x19fd03(0x194)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x19fd03(0x1b8)](_0x19fd03(0x18d)+validateOrdersState),lastOrders[_0x19fd03(0x22b)](_0x35a9f6=>{const _0x3dda51=_0x19fd03;let _0x5b4b7c=![];_0x35a9f6[_0x3dda51(0x1a1)]>0x0&&(_0x5b4b7c=!![]),_0x450840['push'](_0x5b4b7c),_0x5b4b7c&&config[_0x3dda51(0x240)]!='market'&&logHistory(_0x3dda51(0x148),_0x3dda51(0x1cf)+_0x35a9f6[_0x3dda51(0x234)]+'\x20'+_0x35a9f6[_0x3dda51(0x24e)]+'\x20#'+formatResult(_0x35a9f6[_0x3dda51(0x1a1)],0x8)+'\x20@'+formatResult(_0x35a9f6[_0x3dda51(0x1d5)],0x8));}),_0x450840[_0x19fd03(0x22b)]((_0x46ecbc,_0x5f4ff9)=>{const _0x238bcd=_0x19fd03;if(_0x46ecbc)lastOrders[_0x238bcd(0x22a)](_0x5f4ff9,0x1);}),persistOpenOrders(lastOrders);const _0xc3917d=coolingDown?_0x19fd03(0x1e1):_0x19fd03(0x137);if(validateOrdersState=='initial'){validateOrdersState=_0x19fd03(0x1f5);if(_0x450840[_0x19fd03(0x1a8)](![])){if(config[_0x19fd03(0x240)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x19fd03(0x1f5)){if(_0x450840[_0x19fd03(0x1a8)](![])){}else{if(allOrdersPlaced){if(config[_0x19fd03(0x240)]==_0x19fd03(0x18c)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x450840[_0x19fd03(0x1a8)](![])&&(config['ordertype']==_0x19fd03(0x18c)?logHistory(_0x19fd03(0x158),_0x19fd03(0x182)+Math['round'](_0x4a0dc6*validateOrderInterval/0xea60)+_0x19fd03(0xf8)+_0xc3917d):(await cancelOrders(),logHistory(_0x19fd03(0x158),_0x19fd03(0xfe)+Math['round'](_0x4a0dc6*validateOrderInterval/0xea60)+_0x19fd03(0xf8)+_0xc3917d))),await unlockOrders();else{if(validateOrdersState==_0x19fd03(0x231)){if(config[_0x19fd03(0x240)]!='market')logHistory('success',_0x19fd03(0x117)+_0xc3917d);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x58d3e5=>{const _0x16b722=_0x5cfd;try{const _0x4ebbbf=await exchange[_0x16b722(0x247)](_0x58d3e5[_0x16b722(0x189)],_0x58d3e5[_0x16b722(0x234)]);}catch(_0x3bd16d){if(_0x3bd16d[_0x16b722(0x17b)]()['includes'](_0x16b722(0x24b))){}else await handleError(_0x3bd16d,_0x16b722(0x16e));}});}async function initCoinResults(_0x160c72){const _0x356ce1=_0x43c7e2;_0x160c72?logger['debug'](_0x356ce1(0x191)+_0x160c72):logger[_0x356ce1(0x1b8)](_0x356ce1(0x113)),config[_0x356ce1(0x1c1)][_0x356ce1(0x22b)](_0x422720=>{const _0x198d36=_0x356ce1;if(!_0x422720['excluded']&&_0x422720['coin']!=config[_0x198d36(0x140)]){const _0x321469=currentCoins[_0x198d36(0x12f)](_0x32519c=>_0x32519c[_0x198d36(0x17c)]==_0x422720[_0x198d36(0x17c)]),_0x4ef983=global[_0x198d36(0x10d)][noslash(_0x422720['symbol'])];let _0x353b01=_0x321469?_0x321469[_0x198d36(0x210)]:null,_0x2bfbdc=_0x422720[_0x198d36(0x106)]?0x1/_0x4ef983:_0x4ef983,_0x46511e;config[_0x198d36(0x24d)][_0x198d36(0x22b)](_0x1b7415=>{const _0x5f194e=_0x198d36;!_0x46511e&&(_0x46511e=_0x1b7415[_0x5f194e(0x197)][_0x5f194e(0x12f)](_0x5d24d4=>_0x5d24d4['coin']==_0x422720[_0x5f194e(0x17c)]),_0x46511e&&(_0x353b01=_0x46511e[_0x5f194e(0x210)],_0x2bfbdc=_0x46511e[_0x5f194e(0x1d5)]));});let _0x27e3eb=dbCoinResults[_0x198d36(0x1bb)](_0x198d36(0x21c))[_0x198d36(0x12f)]({'coin':_0x422720[_0x198d36(0x17c)]})[_0x198d36(0x232)]();if(!_0x27e3eb){const _0x5e6ae3={'coin':_0x422720['coin'],'number':_0x353b01,'breakeven':_0x2bfbdc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x198d36(0x21c))[_0x198d36(0x144)](_0x5e6ae3)[_0x198d36(0x125)]();}else{if(_0x160c72&&_0x422720[_0x198d36(0x17c)]==_0x160c72){const _0x180c11={'coin':_0x422720[_0x198d36(0x17c)],'number':_0x353b01,'breakeven':_0x2bfbdc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x198d36(0x21c))[_0x198d36(0x12f)]({'coin':_0x422720[_0x198d36(0x17c)]})[_0x198d36(0xfa)](_0x180c11)['write']();}}}});}async function updateCoinResults(_0x4a79d9,_0x306d0c=![]){const _0x468349=_0x43c7e2;let _0x465273,_0xd611f6,_0x38150f,_0x557130,_0x2cafc3,_0x80354,_0x4f018b=dbCoinResults['get']('coins')[_0x468349(0x12f)]({'coin':_0x4a79d9[_0x468349(0x17c)]})['value'](),_0x30a65a=![];_0x4f018b&&Object['entries'](_0x4f018b)[_0x468349(0x22b)](([_0x2f7a77,_0x512455])=>{if(_0x512455==null)_0x30a65a=!![];});(!_0x4f018b||_0x30a65a)&&(await initCoinResults(_0x4a79d9[_0x468349(0x17c)]),_0x4f018b=dbCoinResults[_0x468349(0x1bb)](_0x468349(0x21c))['find']({'coin':_0x4a79d9[_0x468349(0x17c)]})[_0x468349(0x232)]());_0x4a79d9[_0x468349(0x106)]&&(_0x80354={'filled':_0x4a79d9[_0x468349(0x1a1)]*_0x4a79d9[_0x468349(0x1d5)],'amount':_0x4a79d9['filled']*_0x4a79d9[_0x468349(0x1d5)],'side':_0x4a79d9[_0x468349(0x24e)]==_0x468349(0x1e0)?_0x468349(0x1bd):_0x468349(0x1e0),'price':0x1/_0x4a79d9['price']},_0x4a79d9={..._0x4a79d9,..._0x80354});_0x306d0c?_0xd611f6=_0x4a79d9[_0x468349(0x24e)]==_0x468349(0x1bd)?_0x4f018b[_0x468349(0x210)]+_0x4a79d9[_0x468349(0x1a1)]:_0x4f018b[_0x468349(0x210)]-_0x4a79d9[_0x468349(0x1a1)]:_0xd611f6=await getCoinNumber(_0x4a79d9['coin']);if(_0x4a79d9[_0x468349(0x131)]&&_0x4a79d9['fee']['currency']==config[_0x468349(0x140)])_0x465273=_0x4a79d9[_0x468349(0x131)][_0x468349(0x26f)];else{if(_0x4a79d9[_0x468349(0x131)]&&_0x4a79d9[_0x468349(0x131)][_0x468349(0x116)]=='BNB'&&!_0x306d0c)_0x465273=_0x4a79d9[_0x468349(0x131)][_0x468349(0x26f)]*global[_0x468349(0x10d)][_0x468349(0x24c)+config['basecoin']];else _0x465273=defaultFee*_0x4a79d9[_0x468349(0x1a1)]*_0x4a79d9['price'];}_0x4a79d9[_0x468349(0x24e)]==_0x468349(0x1bd)?(_0x38150f=_0xd611f6!=0x0?(_0x4f018b['breakeven']*_0x4f018b[_0x468349(0x210)]+_0x4a79d9[_0x468349(0x1d5)]*(_0xd611f6-_0x4f018b[_0x468349(0x210)])+_0x465273)/_0xd611f6:0x0,_0x557130=_0x4f018b[_0x468349(0x245)]):(_0x38150f=_0xd611f6!=0x0?(_0x4f018b[_0x468349(0x13b)]*_0x4f018b[_0x468349(0x210)]-_0x4a79d9[_0x468349(0x1d5)]*(_0x4f018b['number']-_0xd611f6)+_0x465273)/_0xd611f6:0x0,_0x557130=_0x4f018b[_0x468349(0x245)]+(_0x4a79d9[_0x468349(0x1d5)]-_0x4f018b['breakeven'])*_0x4a79d9[_0x468349(0x1a1)]);_0x2cafc3=(_0x4a79d9[_0x468349(0x1d5)]-_0x38150f-_0x465273/_0x4a79d9[_0x468349(0x1a1)])*_0xd611f6;let _0xc4c355={'coin':_0x4a79d9[_0x468349(0x17c)],'number':_0xd611f6,'breakeven':formatResult(_0x38150f,0x8),'realized':formatResult(_0x557130,0x8),'unrealized':formatResult(_0x2cafc3,0x8),'fees':formatResult(_0x4f018b[_0x468349(0x1b9)]+_0x465273,0x8),'sells':_0x4a79d9[_0x468349(0x24e)]=='sell'?_0x4f018b[_0x468349(0x213)]+0x1:_0x4f018b[_0x468349(0x213)],'buys':_0x4a79d9[_0x468349(0x24e)]==_0x468349(0x1bd)?_0x4f018b['buys']+0x1:_0x4f018b[_0x468349(0x1ca)]};dbCoinResults[_0x468349(0x1bb)](_0x468349(0x21c))[_0x468349(0x12f)]({'coin':_0x4a79d9['coin']})['assign'](_0xc4c355)[_0x468349(0x125)]();if(!_0x306d0c){if(_0x4a79d9[_0x468349(0x131)]&&_0x4a79d9[_0x468349(0x131)]['currency']==_0x468349(0x24c)){const _0x5444be=currentCoins[_0x468349(0x12f)](_0x8cd752=>_0x8cd752[_0x468349(0x17c)]==_0x468349(0x24c));if(_0x5444be){let _0x1b793f=dbCoinResults[_0x468349(0x1bb)](_0x468349(0x21c))[_0x468349(0x12f)]({'coin':_0x468349(0x24c)})[_0x468349(0x232)]();_0xc4c355={..._0x1b793f,'number':_0x5444be[_0x468349(0x210)]},dbCoinResults[_0x468349(0x1bb)](_0x468349(0x21c))[_0x468349(0x12f)]({'coin':_0x468349(0x24c)})['assign'](_0xc4c355)[_0x468349(0x125)]();}}}}async function placeOrder(_0xe55ca){const _0x30dafd=_0x43c7e2,_0x34bc74=config[_0x30dafd(0x240)]==_0x30dafd(0x18c)?_0x30dafd(0x18c):_0x30dafd(0x1c4);if(lockOrders==ORDERS[_0x30dafd(0x11e)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x30dafd(0x1ec)],allOrdersPlaced=![],validateOrdersState='initial';let _0x5d6d68=![];lastOrders=[];for(const _0x23dc9a of _0xe55ca){let _0x381dd9,_0x5a658b,_0x439db8,_0x133de7,_0x25089d,_0x5c028d=_0x23dc9a[_0x30dafd(0x234)];try{const _0x5835d6=await exchange['fetchTicker'](_0x5c028d);_0x381dd9=_0x23dc9a[_0x30dafd(0x106)]?0x1/_0x23dc9a[_0x30dafd(0x156)]:_0x23dc9a[_0x30dafd(0x156)],_0x5a658b=_0x5835d6[_0x30dafd(0x25d)],_0x439db8=_0x5835d6[_0x30dafd(0x233)];_0x23dc9a[_0x30dafd(0x106)]?(_0x133de7=_0x23dc9a['side']==_0x30dafd(0x1bd)?_0x30dafd(0x1e0):_0x30dafd(0x1bd),_0x25089d=Math[_0x30dafd(0x1be)](_0x23dc9a[_0x30dafd(0x12d)])/_0x381dd9):(_0x133de7=_0x23dc9a[_0x30dafd(0x24e)],_0x25089d=Math[_0x30dafd(0x1be)](_0x23dc9a[_0x30dafd(0x12d)]));_0x34bc74==_0x30dafd(0x1c4)&&(config[_0x30dafd(0x240)]==_0x30dafd(0x1a5)&&(_0x381dd9=_0x133de7==_0x30dafd(0x1bd)?_0x5a658b:_0x439db8),config[_0x30dafd(0x240)]==_0x30dafd(0xf2)&&(_0x381dd9=_0x133de7==_0x30dafd(0x1bd)?_0x439db8:_0x5a658b));_0x25089d=formatResult(_0x25089d,0x8),_0x381dd9=formatResult(_0x381dd9,0x8);const _0x2eeb9a=_0x133de7=='sell'?config[_0x30dafd(0x186)]?String[_0x30dafd(0x204)]('0x'+config[_0x30dafd(0x186)])+'\x20':'':config[_0x30dafd(0x176)]?String[_0x30dafd(0x204)]('0x'+config[_0x30dafd(0x176)])+'\x20':'',_0xe90f0d=_0x34bc74==_0x30dafd(0x18c)?_0x30dafd(0x170):config[_0x30dafd(0x240)]==_0x30dafd(0x1a5)?_0x30dafd(0x198):_0x30dafd(0xf1),_0x2e97e1=(Math[_0x30dafd(0x26d)](Math[_0x30dafd(0x149)]()*0x35a4e900)+0x5f5e100)[_0x30dafd(0x17b)]();lastOrders[_0x30dafd(0x144)]({'customId':_0x2e97e1,'symbol':_0x5c028d,'coin':_0x23dc9a[_0x30dafd(0x17c)],'amount':_0x25089d,'price':_0x381dd9,'side':_0x133de7,'reverse':_0x23dc9a['reverse'],'filled':0x0});if(_0x34bc74==_0x30dafd(0x18c))logHistory(_0x30dafd(0x148),''+_0x2eeb9a+_0xe90f0d+_0x30dafd(0x16f)+_0x5c028d+'\x20'+_0x133de7+'\x20#'+formatResult(_0x25089d,0x8)+'\x20@'+formatResult(_0x381dd9,0x8));else logHistory(_0x30dafd(0x148),''+_0x2eeb9a+_0xe90f0d+_0x30dafd(0x16f)+_0x5c028d+'\x20'+_0x133de7+'\x20#'+formatResult(_0x25089d,0x8)+'\x20@'+formatResult(_0x381dd9,0x8));let _0x1d1b16;if(_0x34bc74==_0x30dafd(0x18c))_0x1d1b16=await exchange['createOrder'](_0x5c028d,_0x34bc74,_0x133de7,_0x25089d,undefined);else _0x1d1b16=await exchange[_0x30dafd(0x13a)](_0x5c028d,_0x34bc74,_0x133de7,_0x25089d,_0x381dd9);logger[_0x30dafd(0x1b8)](_0x30dafd(0x185)+_0x1d1b16['id']+_0x30dafd(0x1a3)+_0x2e97e1);const _0x5b9e41=lastOrders[_0x30dafd(0x171)]-0x1;if(_0x5b9e41>=0x0&&lastOrders[_0x5b9e41][_0x30dafd(0x135)]==_0x2e97e1){lastOrders[_0x5b9e41][_0x30dafd(0x189)]=_0x1d1b16['id'];if(_0x1d1b16[_0x30dafd(0x272)])lastOrders[_0x5b9e41][_0x30dafd(0x272)]=_0x1d1b16[_0x30dafd(0x272)];if(_0x1d1b16[_0x30dafd(0x1d5)])lastOrders[_0x5b9e41][_0x30dafd(0x1d5)]=_0x1d1b16[_0x30dafd(0x1d5)];lastOrders[_0x5b9e41][_0x30dafd(0x131)]=_0x1d1b16[_0x30dafd(0x131)];}if(config[_0x30dafd(0x24f)]!=0x0){let _0x32fb20=null;if(cooldownTracker[_0x30dafd(0x171)]==config[_0x30dafd(0x24f)]-0x1)_0x32fb20=cooldownTracker['shift']();const _0x432cd0=getTimeStamp();cooldownTracker[_0x30dafd(0x144)](_0x432cd0);if(_0x32fb20){const _0x7b1fe4=fns[_0x30dafd(0x104)](new Date(_0x432cd0),new Date(_0x32fb20));if(_0x7b1fe4<cooldownInterval){logHistory('error',_0x30dafd(0x105)+config[_0x30dafd(0x24f)]+_0x30dafd(0x1d0)+cooldownInterval/0x3c+_0x30dafd(0x165)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x20ac6c){if(_0x20ac6c[_0x30dafd(0x17b)]()[_0x30dafd(0x1a8)](_0x30dafd(0x151)))lastOrders=lastOrders[_0x30dafd(0x195)](_0x3dc040=>_0x3dc040['symbol']!=_0x5c028d),logHistory(_0x30dafd(0x246),_0x30dafd(0x212)+_0x5c028d),_0x5d6d68=!![];else{if(_0x20ac6c[_0x30dafd(0x17b)]()[_0x30dafd(0x1a8)](_0x30dafd(0x1ff)))lastOrders=lastOrders[_0x30dafd(0x195)](_0x36c432=>_0x36c432[_0x30dafd(0x234)]!=_0x5c028d),logHistory(_0x30dafd(0x246),_0x30dafd(0x215)+_0x5c028d),_0x5d6d68=!![];else{if(_0x20ac6c[_0x30dafd(0x17b)]()[_0x30dafd(0x1a8)](_0x30dafd(0xff)))lastOrders=lastOrders['filter'](_0x443703=>_0x443703[_0x30dafd(0x234)]!=_0x5c028d),logHistory('error','Order\x20is\x20invalid:\x20'+_0x5c028d),_0x5d6d68=!![];else _0x20ac6c[_0x30dafd(0x17b)]()[_0x30dafd(0x1a8)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders['filter'](_0x527831=>_0x527831[_0x30dafd(0x234)]!=_0x5c028d),logHistory(_0x30dafd(0x246),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5c028d),_0x5d6d68=!![]):(lastOrders=lastOrders[_0x30dafd(0x195)](_0x475531=>_0x475531[_0x30dafd(0x234)]!=_0x5c028d),await handleError(_0x20ac6c,_0x30dafd(0x120),_0x5c028d));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x30dafd(0x171)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x56ea65=config[_0x30dafd(0x240)]==_0x30dafd(0x18c)?validateOrderTimeout*0x3c*0x3e8:config[_0x30dafd(0x194)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x7bcb=_0x30dafd;validateOrders(_0x7bcb(0x248));},_0x56ea65);}else unlockOrders();_0x5d6d68&&config[_0x30dafd(0x26e)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x30dafd(0xfd)));}else{if(coolingDown)!config[_0x30dafd(0x26e)]&&logHistory(_0x30dafd(0x246),_0x30dafd(0x128));else lockOrders!=ORDERS[_0x30dafd(0x11e)]&&(!config[_0x30dafd(0x26e)]&&(config[_0x30dafd(0x240)]==_0x30dafd(0x18c)?logHistory(_0x30dafd(0x246),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x30dafd(0x246),_0x30dafd(0x132))));}}function persistOpenOrders(_0x1c09b5){const _0x59ac27=_0x43c7e2,_0x534cfa={...config,'openOrders':_0x1c09b5};let _0x3cb0ab=dbConfig[_0x59ac27(0x1bb)](_0x59ac27(0x15b))['find']({'botID':botID})[_0x59ac27(0x232)]();_0x3cb0ab&&dbConfig[_0x59ac27(0x1bb)](_0x59ac27(0x15b))['find']({'botID':botID})[_0x59ac27(0xfa)](_0x534cfa)[_0x59ac27(0x125)]();}function restoreOrders(){const _0x23e07f=_0x43c7e2;let _0x3348cd;config[_0x23e07f(0x277)]&&allOpenOrders[_0x23e07f(0x22b)](_0x4e94f3=>{const _0x35facc=_0x23e07f,_0x2ab9f5=config[_0x35facc(0x277)][_0x35facc(0x12f)](_0x2bb34b=>_0x2bb34b[_0x35facc(0x189)]==_0x4e94f3['id']);_0x2ab9f5&&(lastOrders[_0x35facc(0x144)](_0x2ab9f5),_0x3348cd=_0x4e94f3['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x23e07f(0x1ec)],validateOrdersState=_0x23e07f(0x1f5),allOrdersPlaced=!![];const _0x32215d=new Date()[_0x23e07f(0x1fa)](),_0x1fe11a=config[_0x23e07f(0x240)]==_0x23e07f(0x18c)?validateOrderTimeout*0x3c*0x3e8:config[_0x23e07f(0x194)]*0x3c*0x3e8;if(_0x3348cd+_0x1fe11a>_0x32215d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x38ed7b=_0x23e07f;validateOrders(_0x38ed7b(0x248));},_0x3348cd+_0x1fe11a-_0x32215d);}else validateOrders(_0x23e07f(0x248));}}async function sendMetricsTelegram(){const _0x8bbaea=_0x43c7e2;if(!coinsLoaded){process[_0x8bbaea(0x23a)]({'telegrammsg':_0x8bbaea(0x22d)},_0x1e9a1b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x32d06c='';if(config[_0x8bbaea(0x103)])_0x32d06c='<b>'+config[_0x8bbaea(0x19b)]+_0x8bbaea(0x1d9);else _0x32d06c=_0x8bbaea(0x1dd)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0xaaea69=getKPIs(_0x8bbaea(0x140)),_0x57c8a1=getKPIs(_0x8bbaea(0x26a),config[_0x8bbaea(0x26a)]),_0x5e3dcc=getKPIs(_0x8bbaea(0x251)),_0x391db2=getKPIs(_0x8bbaea(0x21b),config[_0x8bbaea(0x26a)]);_0x32d06c+=_0x8bbaea(0x1b7),_0x32d06c+=_0xaaea69[_0x8bbaea(0x1ce)]+'\x20:\x20'+_0xaaea69[_0x8bbaea(0x232)]+'\x0a',_0x32d06c+=_0xaaea69['rightTxt']+':\x20'+_0xaaea69[_0x8bbaea(0x108)]+'%\x0a',_0x32d06c+=_0x57c8a1[_0x8bbaea(0x1ce)]+_0x8bbaea(0x1f6)+_0x57c8a1[_0x8bbaea(0x232)]+'\x0a',_0x32d06c+=_0x57c8a1[_0x8bbaea(0x1fc)]+':\x20'+_0x57c8a1[_0x8bbaea(0x108)]+'%\x0a',_0x32d06c+=_0x5e3dcc[_0x8bbaea(0x1ce)]+':\x20'+_0x5e3dcc[_0x8bbaea(0x232)]+'\x20('+config['basecoin']+')\x0a',_0x32d06c+=_0x5e3dcc[_0x8bbaea(0x1fc)]+':\x20'+_0x5e3dcc[_0x8bbaea(0x108)]+_0x8bbaea(0x16d)+config[_0x8bbaea(0x140)]+')\x0a',_0x32d06c+=_0x391db2[_0x8bbaea(0x1ce)]+':\x20'+_0x391db2[_0x8bbaea(0x232)]+'\x20('+config[_0x8bbaea(0x26a)]+')\x0a',_0x32d06c+=_0x391db2[_0x8bbaea(0x1fc)]+':\x20'+_0x391db2[_0x8bbaea(0x108)]+_0x8bbaea(0x16d)+config[_0x8bbaea(0x26a)]+')\x0a',_0x32d06c+=_0x8bbaea(0x136),process[_0x8bbaea(0x23a)]({'telegrammsg':_0x32d06c},_0x152713=>{});}async function sendPortfolioTelegram(){const _0x46e32e=_0x43c7e2;if(!coinsLoaded){process[_0x46e32e(0x23a)]({'telegrammsg':_0x46e32e(0x22d)},_0x3112ba=>{});return;}let _0x393cad='';if(config[_0x46e32e(0x103)])_0x393cad='<b>'+config[_0x46e32e(0x19b)]+_0x46e32e(0x1c6);else _0x393cad=_0x46e32e(0x1dd)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x393cad+=_0x46e32e(0x1b7),_0x393cad+=_0x46e32e(0x201),_0x393cad+=_0x46e32e(0x26c),_0x393cad+='-------------------------------\x0a',currentCoins[_0x46e32e(0x22b)](_0x4a63af=>{const _0x525c57=_0x46e32e;_0x393cad+=_0x4a63af[_0x525c57(0x17c)][_0x525c57(0x12e)](0x7)+'|\x20'+formatPad(_0x4a63af[_0x525c57(0x18e)],0x2,0x6)+'|\x20'+formatPad(_0x4a63af[_0x525c57(0x23e)],0x2,0x6)+'|\x20'+formatPad(_0x4a63af['delta']*0x64,0x2,0x6)+'\x0a';}),_0x393cad+=_0x46e32e(0x136),process[_0x46e32e(0x23a)]({'telegrammsg':_0x393cad},_0x2b7df8=>{});}function formatPad(_0x4ccdd9,_0x2cd8dc,_0x430968){const _0x4d30b1=_0x43c7e2,_0x3052ae=formatResultString(_0x4ccdd9,_0x2cd8dc);return _0x3052ae?_0x3052ae[_0x4d30b1(0x14b)](_0x430968):''[_0x4d30b1(0x14b)](_0x430968);}function logHistory(_0x2cc14b,_0x43e43f,_0x299ab0=''){const _0x49eb7a=_0x43c7e2;let _0x32c0ef={'time':getTimeStamp(),'type':_0x2cc14b,'event':_0x43e43f};dbLogs[_0x49eb7a(0x1bb)]('logs')[_0x49eb7a(0x144)](_0x32c0ef)['write']();if(_0x299ab0=='')_0x299ab0=_0x43e43f;proxyEmit('event',{'log':_0x32c0ef,'summary':_0x299ab0}),process[_0x49eb7a(0x23a)]({'telegram':{..._0x32c0ef,'botname':config[_0x49eb7a(0x19b)],'showname':config['showname']}},_0x2fbd74=>{}),logger[_0x49eb7a(0x1c3)](''+_0x32c0ef[_0x49eb7a(0x172)]);}function emitHistory(_0x42fba2={}){const _0x3fc712=_0x43c7e2;Object[_0x3fc712(0x23c)](_0x42fba2)[_0x3fc712(0x171)]==0x0&&(_0x42fba2={'type':[_0x3fc712(0x148),_0x3fc712(0x172)],'event':'','page':0x1});if(_0x42fba2[_0x3fc712(0x1b4)][_0x3fc712(0x1a8)]('event'))_0x42fba2[_0x3fc712(0x1b4)][_0x3fc712(0x22a)](_0x42fba2[_0x3fc712(0x1b4)][_0x3fc712(0x101)](_0x3fc712(0x172)),0x1,'error',_0x3fc712(0x15c),_0x3fc712(0x158));if(dbLogs[_0x3fc712(0x14a)](_0x3fc712(0x220))[_0x3fc712(0x232)]()){let _0x5f1859=dbLogs[_0x3fc712(0x1bb)](_0x3fc712(0x220))[_0x3fc712(0x195)](_0x36c93f=>{const _0x5288e9=_0x3fc712;if(_0x42fba2[_0x5288e9(0x1b4)][_0x5288e9(0x171)]==0x0)return![];else return _0x42fba2['type']['includes'](_0x36c93f[_0x5288e9(0x1b4)]);})[_0x3fc712(0x195)](_0x218ec5=>{const _0x502455=_0x3fc712;if(_0x42fba2[_0x502455(0x172)]=='')return!![];else return _0x218ec5[_0x502455(0x172)][_0x502455(0x134)]()[_0x502455(0x1a8)](_0x42fba2[_0x502455(0x172)][_0x502455(0x134)]());})[_0x3fc712(0x173)](_0x3fc712(0x254)),_0x349075=_0x5f1859[_0x3fc712(0x232)]()[_0x3fc712(0x171)];_0x5f1859=_0x5f1859[_0x3fc712(0x106)]()[_0x3fc712(0x244)]((_0x42fba2[_0x3fc712(0x1cd)]-0x1)*logPageSize,_0x42fba2[_0x3fc712(0x1cd)]*logPageSize-0x1)[_0x3fc712(0x106)]()['value'](),proxyEmit('event-history',{'logs':_0x5f1859,'total':_0x349075});}else proxyEmit(_0x3fc712(0x1d6),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x5e1cc8){const _0x17a549=_0x43c7e2;if(dbLogs[_0x17a549(0x14a)](_0x17a549(0x220))[_0x17a549(0x232)]()){const _0x1eb1d0=dbLogs['get'](_0x17a549(0x220))[_0x17a549(0x173)](_0x17a549(0x254))['filter'](_0x127f89=>{const _0x1dde55=_0x17a549;return _0x127f89[_0x1dde55(0x1b4)]=='order';})[_0x17a549(0x232)]();dbLogs[_0x17a549(0x1bb)](_0x17a549(0x220))[_0x17a549(0x256)]()[_0x17a549(0x125)](),dbLogs[_0x17a549(0x1bb)](_0x17a549(0x220))[_0x17a549(0xfa)](_0x1eb1d0)['write'](),emitHistory(_0x5e1cc8);}}async function pauseBot(_0xb947c5=''){const _0x1aefbc=_0x43c7e2,_0x35baa4=new Date()[_0x1aefbc(0x1fa)]();if(!lastErrorShown||_0x35baa4-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x35baa4;!lastBotPause?(lastBotPause=_0x35baa4,consecutivePauses=0x1):(_0x35baa4-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1aefbc(0x23a)]({'stop':_0x1aefbc(0x123)},_0x58a980=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1aefbc(0x1fa)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0xb947c5)_0xb947c5+=_0x1aefbc(0x1e9);logHistory('error',_0xb947c5+_0x1aefbc(0x224)+pauseBotInterval/0xea60+_0x1aefbc(0xf4)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x2c2326=_0x43c7e2;process[_0x2c2326(0x23a)]({'stop':_0x2c2326(0x11d)},_0x36d805=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4ef29d,_0x15f777){const _0xc44eb3=_0x43c7e2;if(_0x4ef29d[_0xc44eb3(0x17b)]()[_0xc44eb3(0x1a8)](_0xc44eb3(0x118)))return logHistory(_0xc44eb3(0x246),config[_0xc44eb3(0x11c)]+_0xc44eb3(0x15d)),![];else{if(_0x4ef29d['toString']()['includes'](_0xc44eb3(0x139)))return logHistory(_0xc44eb3(0x246),config[_0xc44eb3(0x11c)]+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x4ef29d['toString']()[_0xc44eb3(0x1a8)](_0xc44eb3(0x279)))return logHistory(_0xc44eb3(0x246),config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0xc44eb3(0x246),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x4ef29d,_0x15f777);}}}async function handleError(_0x5057b3,_0x8ecb25,_0x3bd1f7=''){const _0x1e7c23=_0x43c7e2,_0x243a73=config[_0x1e7c23(0x11c)]||'Exchange';if(_0x5057b3[_0x1e7c23(0x17b)]()['includes']('DDoSProtection')||_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)](_0x1e7c23(0xfc)))await pauseBot(config['exchange']+_0x1e7c23(0x1f1));else{if(_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)]('ExchangeNotAvailable')||_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)](_0x1e7c23(0x1cb)))await pauseBot(config[_0x1e7c23(0x11c)]+'\x20not\x20available');else{if(_0x5057b3[_0x1e7c23(0x17b)]()['includes'](_0x1e7c23(0x208)))await pauseBot(config[_0x1e7c23(0x11c)]+_0x1e7c23(0x1af));else{if(_0x5057b3['toString']()['includes'](_0x1e7c23(0x229)))await pauseBot(config[_0x1e7c23(0x11c)]+_0x1e7c23(0x273));else{if(_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x8ecb25+_0x1e7c23(0x10b)),logHistory(_0x1e7c23(0x246),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)](_0x1e7c23(0x205)))logHistory(_0x1e7c23(0x246),_0x8ecb25+_0x1e7c23(0x276)),logHistory(_0x1e7c23(0x246),_0x1e7c23(0x14d)),await killBot();else{if(_0x5057b3 instanceof ccxt[_0x1e7c23(0x13e)])logger[_0x1e7c23(0x1b8)](_0x1e7c23(0x157),_0x5057b3),await pauseBot(config['exchange']+'\x20network\x20error');else{if(_0x5057b3[_0x1e7c23(0x17b)]()['includes'](_0x1e7c23(0x118)))logHistory(_0x1e7c23(0x246),_0x8ecb25+_0x1e7c23(0x1e9)+config[_0x1e7c23(0x11c)]+'\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5057b3[_0x1e7c23(0x17b)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory('error',_0x8ecb25+_0x1e7c23(0x1e9)+config[_0x1e7c23(0x11c)]+_0x1e7c23(0x130)),logHistory(_0x1e7c23(0x246),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)](_0x1e7c23(0x279)))logHistory('error',_0x8ecb25+_0x1e7c23(0x1e9)+config[_0x1e7c23(0x11c)]+_0x1e7c23(0x1e5)),logHistory('error',_0x1e7c23(0x14d)),await killBot();else{if(_0x5057b3[_0x1e7c23(0x17b)]()[_0x1e7c23(0x1a8)](_0x1e7c23(0x1c8)))logHistory(_0x1e7c23(0x246),_0x8ecb25+_0x1e7c23(0x206)+_0x3bd1f7);else _0x5057b3 instanceof ccxt['ExchangeError']?(logger['debug'](_0x1e7c23(0x25a),_0x5057b3),logHistory('error',_0x8ecb25+_0x1e7c23(0x1e9)+config['exchange']+_0x1e7c23(0x1eb))):(logger[_0x1e7c23(0x1c3)](_0x8ecb25+'\x20|\x20Error\x20details:\x20',_0x5057b3),await pauseBot(_0x1e7c23(0x269)));}}}}}}}}}}}function formatResult(_0x23cf27,_0x5cf5ee){return parseFloat(_0x23cf27['toFixed'](_0x5cf5ee));}function formatResultTruncate(_0x2aa998,_0x37ec8c){const _0x34a8a6=_0x43c7e2;let _0x388cbf=formatResultString(_0x2aa998,0xa),_0x22a9c0=_0x388cbf['indexOf']('.');return _0x22a9c0!=-0x1&&(_0x388cbf=_0x388cbf[_0x34a8a6(0x244)](0x0,_0x22a9c0+_0x37ec8c+0x1)),Number(_0x388cbf);}function formatResultString(_0x200d50,_0x4c1409){const _0x205464=_0x43c7e2;let _0x34606c;if(!(''+_0x200d50)[_0x205464(0x1a8)]('e'))_0x34606c=+(Math['round'](_0x200d50+'e+'+_0x4c1409)+'e-'+_0x4c1409);else{let _0x58cdfd=(''+_0x200d50)[_0x205464(0x22e)]('e'),_0x2c0d56='';+_0x58cdfd[0x1]+_0x4c1409>0x0&&(_0x2c0d56='+'),_0x34606c=+(Math[_0x205464(0x15a)](+_0x58cdfd[0x0]+'e'+_0x2c0d56+(+_0x58cdfd[0x1]+_0x4c1409))+'e-'+_0x4c1409);}return Number(_0x34606c)[_0x205464(0x180)](_0x4c1409);}function getServerTime(){const _0x438cf2=_0x43c7e2,_0x12a8f1=new Date();return _0x12a8f1[_0x438cf2(0x1ba)]()+'/'+(_0x12a8f1['getMonth']()+0x1)['toString']()[_0x438cf2(0x14b)](0x2,'0')+'/'+_0x12a8f1['getDate']()[_0x438cf2(0x17b)]()['padStart'](0x2,'0')+'\x20'+_0x12a8f1['getHours']()[_0x438cf2(0x17b)]()['padStart'](0x2,'0')+':'+_0x12a8f1[_0x438cf2(0x166)]()[_0x438cf2(0x17b)]()[_0x438cf2(0x14b)](0x2,'0')+':'+_0x12a8f1['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x47f0f8=_0x43c7e2,_0x37a3e1=shiftedTime();return _0x37a3e1[_0x47f0f8(0x1ba)]()+'/'+(_0x37a3e1[_0x47f0f8(0x181)]()+0x1)[_0x47f0f8(0x17b)]()['padStart'](0x2,'0')+'/'+_0x37a3e1[_0x47f0f8(0x1b3)]()[_0x47f0f8(0x17b)]()[_0x47f0f8(0x14b)](0x2,'0')+'\x20'+_0x37a3e1['getHours']()[_0x47f0f8(0x17b)]()[_0x47f0f8(0x14b)](0x2,'0')+':'+_0x37a3e1[_0x47f0f8(0x166)]()[_0x47f0f8(0x17b)]()[_0x47f0f8(0x14b)](0x2,'0')+':'+_0x37a3e1['getSeconds']()['toString']()[_0x47f0f8(0x14b)](0x2,'0');}function getDate(){const _0x7e5ce5=_0x43c7e2,_0x19edd1=shiftedTime();return _0x19edd1[_0x7e5ce5(0x1ba)]()+'/'+(_0x19edd1[_0x7e5ce5(0x181)]()+0x1)[_0x7e5ce5(0x17b)]()[_0x7e5ce5(0x14b)](0x2,'0')+'/'+_0x19edd1[_0x7e5ce5(0x1b3)]()['toString']()[_0x7e5ce5(0x14b)](0x2,'0');}function getHour(){const _0x246836=_0x43c7e2,_0x1b3c56=shiftedTime();return _0x1b3c56[_0x246836(0x262)]()[_0x246836(0x17b)]()['padStart'](0x2,'0');}function sleep(_0x3505c5){return new Promise(_0x5bf8bd=>setTimeout(_0x5bf8bd,_0x3505c5));}function shiftedTime(){const _0x225bc2=new Date();let _0x516fde=_0x225bc2;if(config&&config['timeshift']!==0x0)_0x516fde=fns['add'](_0x225bc2,{'hours':config['timeshift']});return _0x516fde;}function timer(_0x4abfed){const _0x207753=_0x43c7e2,_0x56bf07=new Date();!lasttime?console['log'](getTimeStamp()+_0x207753(0x1f9),_0x4abfed,_0x56bf07):console['log'](getTimeStamp()+_0x207753(0x1f9),_0x4abfed,(_0x56bf07-lasttime)/0x3e8),lasttime=_0x56bf07;}