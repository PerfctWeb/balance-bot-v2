const _0x1dfd83=_0x3a2f;(function(_0x195b2a,_0x24e6e8){const _0x2c8185=_0x3a2f,_0x230c9e=_0x195b2a();while(!![]){try{const _0x1294f5=parseInt(_0x2c8185(0x12f))/0x1+parseInt(_0x2c8185(0x125))/0x2*(-parseInt(_0x2c8185(0x95))/0x3)+-parseInt(_0x2c8185(0x10e))/0x4*(parseInt(_0x2c8185(0xb3))/0x5)+parseInt(_0x2c8185(0x94))/0x6*(parseInt(_0x2c8185(0xcc))/0x7)+parseInt(_0x2c8185(0x10c))/0x8*(-parseInt(_0x2c8185(0x158))/0x9)+-parseInt(_0x2c8185(0x127))/0xa*(-parseInt(_0x2c8185(0x142))/0xb)+parseInt(_0x2c8185(0x8a))/0xc;if(_0x1294f5===_0x24e6e8)break;else _0x230c9e['push'](_0x230c9e['shift']());}catch(_0x394ef0){_0x230c9e['push'](_0x230c9e['shift']());}}}(_0x2d3a,0xdd835));const _0x2b1cbc=function(){let _0x5d6381=!![];return function(_0xbf44af,_0x52c832){const _0x47996a=_0x5d6381?function(){const _0x1d9262=_0x3a2f;if(_0x52c832){const _0x59f218=_0x52c832[_0x1d9262(0x159)](_0xbf44af,arguments);return _0x52c832=null,_0x59f218;}}:function(){};return _0x5d6381=![],_0x47996a;};}(),_0x358a59=_0x2b1cbc(this,function(){const _0xb1a5d6=_0x3a2f;return _0x358a59['toString']()[_0xb1a5d6(0x148)](_0xb1a5d6(0x107))[_0xb1a5d6(0x189)]()[_0xb1a5d6(0x17a)](_0x358a59)[_0xb1a5d6(0x148)](_0xb1a5d6(0x107));});_0x358a59();'use strict';const ccxt=require(_0x1dfd83(0xf5)),low=require(_0x1dfd83(0x84)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x1dfd83(0x194)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x1dfd83(0x13e))[_0x1dfd83(0x143)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1dfd83(0x118))[_0x1dfd83(0x10d)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;if(!pattern[_0x1dfd83(0xc7)](botID))return console[_0x1dfd83(0x129)](_0x1dfd83(0xc6)+botID+_0x1dfd83(0xd7)),process['exit'](0x1);const userID=process[_0x1dfd83(0x9c)][0x3]||'',configpath=userID?_0x1dfd83(0x13f)+userID+'/':_0x1dfd83(0x13f);!fs[_0x1dfd83(0xd3)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x1dfd83(0x113)+botID+'-config.json',logfile=configpath+'bot-'+botID+'-events.json',performancefile=configpath+_0x1dfd83(0x113)+botID+'-performance.json',coinresultsfile=configpath+_0x1dfd83(0x113)+botID+_0x1dfd83(0x180),settingsfile=configpath+_0x1dfd83(0x14f),securefile=configpath+_0x1dfd83(0x12b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x1dfd83(0x87)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1dfd83(0xbb)]({'data':[]})[_0x1dfd83(0x87)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1dfd83(0xbb)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1dfd83(0xbb)]({'coins':[]})[_0x1dfd83(0x87)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x1dfd83(0x96)},'usd':{'coin':_0x1dfd83(0xa1),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x7b10dd)=>{},'debug':(..._0x59c15d)=>{},'notice':(..._0x14e2b5)=>{},'info':(..._0x5ea8bf)=>{},'warning':(..._0x2da7da)=>{},'error':async function(..._0xda6ecd){const _0x18e5e0=_0x1dfd83,_0x324974=new Date()[_0x18e5e0(0xc3)]();if(!lastErrorShown||_0x324974-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x18e5e0(0xc3)](),logHistory(_0x18e5e0(0xe6),'WebSockets('+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x17674a='';if(_0xda6ecd[0x0])_0x17674a+=_0xda6ecd[0x0];if(_0xda6ecd[0x1]&&_0xda6ecd[0x1][_0x18e5e0(0xe6)]&&_0xda6ecd[0x1]['error'][_0x18e5e0(0x104)])_0x17674a+=_0x18e5e0(0xf1)+_0xda6ecd[0x1][_0x18e5e0(0xe6)][_0x18e5e0(0x104)];logging(_0x18e5e0(0x160)+consecutivePauses+_0x18e5e0(0xe3),''+_0x17674a),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1dfd83(0x122),'rsaStandard':_0x1dfd83(0x156)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1dfd83(0x16b)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process[_0x1dfd83(0x135)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x4d6273,_0x5b6ddd=null){const _0x2f5571=_0x1dfd83;process[_0x2f5571(0x135)]({'function':_0x4d6273,'args':_0x5b6ddd});}function initializeProcessListeners(){const _0x2676ae=_0x1dfd83;process['on'](_0x2676ae(0x104),_0x4f28f5=>{const _0x3613d1=_0x2676ae;switch(Object['keys'](_0x4f28f5)[0x0]){case'timeshift':_0x4f28f5[_0x3613d1(0x16b)]!=undefined&&(settings[_0x3613d1(0x16b)]=_0x4f28f5[_0x3613d1(0x16b)],updateTimeshift(settings['timeshift']));break;case _0x3613d1(0xa3):switch(_0x4f28f5[_0x3613d1(0xa3)]){case _0x3613d1(0x15d):initclient();break;case _0x3613d1(0x18c):emitHistory(_0x4f28f5[_0x3613d1(0x164)]);break;case'getPortfolio':getPortfolio(_0x4f28f5[_0x3613d1(0x164)]);break;case'storeConfiguration':storeConfiguration(_0x4f28f5[_0x3613d1(0x164)]);break;case _0x3613d1(0x100):storeHeadless(_0x4f28f5[_0x3613d1(0x164)]);break;case'getStartingBalances':getStartingBalances();break;case _0x3613d1(0xa9):placeOrder(_0x4f28f5[_0x3613d1(0x164)]);break;case _0x3613d1(0x131):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x2ce4eb=_0x1dfd83;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x2ce4eb(0x12a)],config[_0x2ce4eb(0xe9)]);let _0x6cfcf3=await loadSymbols();_0x6cfcf3&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0xf397fa,_0x498af5){const _0x3f3da1=_0x1dfd83,_0x2fe928=ccxt[config[_0x3f3da1(0xb5)]];let _0x219acb;switch(config['exchange']){case _0x3f3da1(0x9f):_0x219acb=_0x3f3da1(0xb9);break;case _0x3f3da1(0xe4):_0x219acb='wss://stream.binance.us:9443';break;default:_0x219acb=_0x3f3da1(0xb9);}exchange=new _0x2fe928({'apiKey':_0xf397fa,'secret':_0x498af5,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0xf397fa,'api_secret':_0x498af5,'beautify':!![],'wsUrl':_0x219acb},logger),config[_0x3f3da1(0xb5)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x3f3da1(0x85),'symbol':_0x3f3da1(0x11f)},'usd':{'coin':_0x3f3da1(0xa1),'symbol':_0x3f3da1(0xec)}});}function _0x3a2f(_0x232f0d,_0x79b7d6){const _0x4f7421=_0x2d3a();return _0x3a2f=function(_0x358a59,_0x2b1cbc){_0x358a59=_0x358a59-0x84;let _0x2d3af3=_0x4f7421[_0x358a59];return _0x2d3af3;},_0x3a2f(_0x232f0d,_0x79b7d6);}async function loadSymbols(){const _0x47f8fb=_0x1dfd83;let _0xd425f;try{markets=await exchange[_0x47f8fb(0x13b)]();const _0x1beec4=[_0x47f8fb(0x17f),'HOT/BTC',_0x47f8fb(0x14b)];allSymbols=exchange[_0x47f8fb(0xe7)][_0x47f8fb(0x183)](_0x2e6093=>{const _0x43468f=_0x47f8fb;let _0x1d7bf2=![];return _0x1beec4[_0x43468f(0x15a)](_0x357235=>{const _0x2c683b=_0x43468f;if(_0x2e6093[_0x2c683b(0xa8)](_0x357235))_0x1d7bf2=!![];}),!_0x1d7bf2;}),_0xd425f=!![];}catch(_0x46edee){await handleError(_0x46edee,_0x47f8fb(0x154)),_0xd425f=![];}return _0xd425f;}async function initbot(){const _0xd5df0f=_0x1dfd83;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x53afe6=dbCoinResults['get']('coins')[_0xd5df0f(0xbf)]();if(_0x53afe6['length']==0x0)await resetCoinResults();}async function initclient(){const _0x3ad42d=_0x1dfd83;proxyEmit(_0x3ad42d(0xe5),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3ad42d(0xb2),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function _0x2d3a(){const _0x268de8=['basecoin','existsSync','splice','map','botname',',\x20must\x20be\x20a\x203\x20digit\x20number','getMonth','running','wsMarket','settings','stringify','API-key\x20format\x20invalid','\x20|\x20Error\x20details:\x20','sortBy','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Limit\x20(high-margin)','orderStatus',')\x20|\x20Error\x20details:\x20','binanceus','configuration','error','symbols','Bot\x20','apiSecret','startdate','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','BTC/USDT','fromCodePoint','toLowerCase','userData','kline','\x20-\x20','abs','buys','type','ccxt','entries','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','\x20|\x20Unknown\x20error\x20occured','remove','OrderNotFound','subscribeSpotKline','data','Order:\x20','differenceInSeconds','sell','storeHeadless','total','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','target','message','kill','logs','(((.+)+)+)+$','format','yyyy-MM-dd\x27T\x27HH:mm:ss','Unfilled\x20order(s)\x20canceled\x20after\x20','reduce','8243336ltoUtv','version','28gGPYXJ','event','milliseconds','accumulatedQuantity','replace','bot-','recreate','date','************','fee','./version.json','padStart','eur','threshold','performance','timestamp','portfolio','BTC/BUSD','reverse','\x20order:\x20','sha256','fetchTickers','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','21460ELIvRX','wsKey','7390pfUcag','LIMIT','log','apiKey','bb-secure.json','botID','InvalidNonce','AuthenticationError','901730CUWMIl','USDT','cancelLoading','headless','filled','startnumber','send','keys','ordertype','configuration-stored','realized','USDC','loadMarkets','shift','last','hybrid-crypto-js','./config/','timeout','\x20>\x20','44WqgFtY','Crypt','cooldown','currency','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','emojibuy','search','limit','split','HOT/EUR','eachDayOfInterval','cancel','orderId','bb-settings.json','sort','buy','close','Order(s)\x20validated\x20-\x20balancing\x20resumed','loadSymbols()','ticker','RSA-OAEP','event-history','9GXpVkB','apply','forEach','slice','parse','initclient','order','formattedMessage','WebSockets(','differenceInCalendarDays','Limit\x20(low-margin)','Order\x20filled:\x20','args','Invalid\x20quantity','Executed\x20','distribution',':\x20Bot\x20','limit-low','asset','timeshift','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','ask','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','time','RequestTimeout','success','orderType','trade','outboundAccountPosition','assign','BNB','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Binance\x20API\x20secret\x20is\x20invalid','constructor','coin-loading-progress','eventType','round','BTC','DAI/','-results.json','recreateHistory()','valid','filter','availableBalance','breakeven','offset','has','remainingSymbols','toString','page','cost','emitHistory','push','excluded','Order(s)\x20filled\x20-\x20balancing\x20resumed','privateKey','number','getDate','Market','date-fns','executionReport','lowdb','BTCBUSD','decrypt','write','delta','initws()','14884440ZJJUjD','fees','get','fetchOrders','sells','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','getCoins()','coin','find','enabled','829734axjqdN','81YOcCDn','BTC/EUR','length','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','isArray','min','showname','argv','parseISO','price','binance','getSeconds','BTCUSDT','createOrder','function','\x20hour','symbol','getPortfolio()','closeWs','includes','placeOrder','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','limit-high','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','datetime','amount','EUR','market','toFixed','balances','237485UlSdjZ','bot','exchange','side','bid','MIN_NOTIONAL','wss://stream.binance.com:9443','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','defaults','getFullYear','startprice','getFiat()','value','reconnected','usd','BUSD','getTime','getHours','emojisell','Error:\x20Invalid\x20argument\x20','test','limits','yyyy/MM/dd','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','restart','21vWhTNW','Pausing\x20bot\x20for\x205\x20minutes\x20(','coinamount','coins','getCloses()','getMinutes'];_0x2d3a=function(){return _0x268de8;};return _0x2d3a();}function cleanws(){const _0x5a3eb9=_0x1dfd83;wsinitialized=![];ws1&&(ws1['forEach'](_0xff8be0=>{const _0x100379=_0x3a2f;try{wsClient[_0x100379(0xa7)](_0xff8be0);}catch(_0x102af7){}}),ws1=[]);if(ws2){try{wsClient[_0x5a3eb9(0xa7)](ws2);}catch(_0x4ef049){}ws2=null;}}async function initws(){const _0x4877e3=_0x1dfd83;cleanws();let _0x21d141=[];currentCoins[_0x4877e3(0x15a)](_0x1c5fd6=>{const _0x5c82de=_0x4877e3;if(_0x1c5fd6[_0x5c82de(0x91)]!=config[_0x5c82de(0xd2)])_0x21d141[_0x5c82de(0x18d)](noslash(_0x1c5fd6[_0x5c82de(0xa5)]));});if(!_0x21d141[_0x4877e3(0xa8)](stablecoins[_0x4877e3(0x11a)][_0x4877e3(0x91)]))_0x21d141[_0x4877e3(0x18d)](stablecoins[_0x4877e3(0x11a)][_0x4877e3(0x91)]);if(!_0x21d141['includes'](stablecoins[_0x4877e3(0xc1)][_0x4877e3(0x91)]))_0x21d141[_0x4877e3(0x18d)](stablecoins[_0x4877e3(0xc1)]['coin']);if(!_0x21d141[_0x4877e3(0xa8)]('BNB'+config[_0x4877e3(0xd2)]))_0x21d141[_0x4877e3(0x18d)]('BNB'+config[_0x4877e3(0xd2)]);try{_0x21d141['forEach']((_0x100f66,_0x35033a)=>{const _0x5723e0=_0x4877e3;ws1[_0x35033a]=wsClient[_0x5723e0(0xfb)](_0x100f66,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x4877e3(0x15f),_0x11b47a=>{const _0x188443=_0x4877e3;if(!Array[_0x188443(0x99)](_0x11b47a)&&!_0x11b47a[_0x188443(0x126)][_0x188443(0xa8)](_0x188443(0xef))){if(_0x11b47a['eventType']===_0x188443(0xf0)){global['ticker'][_0x11b47a[_0x188443(0xf0)][_0x188443(0xa5)]]=_0x11b47a['kline'][_0x188443(0x152)];return;}}else{if(!Array[_0x188443(0x99)](_0x11b47a)&&_0x11b47a[_0x188443(0x126)][_0x188443(0xa8)](_0x188443(0xef))){if(_0x11b47a[_0x188443(0xda)][_0x188443(0xa8)]('spot')){updateNumberCoins(_0x11b47a);return;}}}}),wsClient['on'](_0x4877e3(0xc0),async _0x42832a=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1ae436){await handleError(_0x1ae436,_0x4877e3(0x89));}let _0x42756f,_0x398e78=0x0;loading[_0x4877e3(0x188)]=[];let _0x37a338=0x0;currentCoins['forEach'](_0x16d4ef=>{const _0x55242d=_0x4877e3;if(_0x16d4ef[_0x55242d(0x91)]!=config[_0x55242d(0xd2)])loading[_0x55242d(0x188)][_0x55242d(0x18d)](_0x16d4ef[_0x55242d(0xa5)]);}),loadingCanceled=![];while(_0x42756f!=currentCoins[_0x4877e3(0x97)]-0x1){_0x42756f=0x0,currentCoins['forEach'](_0x2fcf7f=>{const _0x17f15c=_0x4877e3;_0x2fcf7f['coin']!=config[_0x17f15c(0xd2)]&&global[_0x17f15c(0x155)][noslash(_0x2fcf7f[_0x17f15c(0xa5)])]&&(loading[_0x17f15c(0x188)]=loading[_0x17f15c(0x188)][_0x17f15c(0x183)](_0xb6922b=>_0xb6922b!=_0x2fcf7f[_0x17f15c(0xa5)]),_0x42756f++);}),loading['progress']=Math[_0x4877e3(0x17d)](_0x42756f/(currentCoins['length']-0x1)*0x64);_0x37a338>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x4877e3(0x14d)]=!![],emitLoadingProgress();break;}else _0x42756f!=_0x398e78&&(_0x398e78=_0x42756f,emitLoadingProgress()),_0x37a338++,await sleep(0xc8);}if(_0x42756f==currentCoins[_0x4877e3(0x97)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x3b7f75=_0x1dfd83;proxyEmit(_0x3b7f75(0x17b),loading);}async function getFiat(){const _0xe7298c=_0x1dfd83;let _0x56dead=0x0,_0x3fa800=0x0;try{_0x56dead=global['ticker'][stablecoins[_0xe7298c(0x11a)][_0xe7298c(0x91)]],_0x3fa800=global[_0xe7298c(0x155)][stablecoins[_0xe7298c(0xc1)]['coin']];}catch(_0x19111b){await handleError(_0x19111b,_0xe7298c(0xbe));}return{'eur':Number(_0x56dead),'usd':Number(_0x3fa800)};}async function setStartDatePerformance(_0x540781){const _0x1bd568=_0x1dfd83,_0x9df229=fns[_0x1bd568(0x108)](new Date(_0x540781[_0x1bd568(0xea)]),'yyyy/MM/dd');let _0x7e776c=[];_0x7e776c[stablecoins[_0x1bd568(0x11a)]['coin']]=await getCloses(stablecoins[_0x1bd568(0x11a)][_0x1bd568(0xa5)],new Date(_0x540781[_0x1bd568(0xea)]),0x1),_0x7e776c[stablecoins[_0x1bd568(0xc1)][_0x1bd568(0x91)]]=await getCloses(stablecoins[_0x1bd568(0xc1)]['symbol'],new Date(_0x540781[_0x1bd568(0xea)]),0x1);let _0x1d4dd4,_0x53da15=[];_0x540781[_0x1bd568(0x11e)][_0x1bd568(0x15a)](_0x327d27=>{const _0x5a2b69=_0x1bd568;!_0x327d27[_0x5a2b69(0x18e)]&&_0x53da15[_0x5a2b69(0x18d)]({'coin':_0x327d27[_0x5a2b69(0x91)],'number':_0x327d27[_0x5a2b69(0x134)],'price':_0x327d27['startprice']});}),_0x1d4dd4={'date':_0x9df229,'eur':_0x7e776c[stablecoins[_0x1bd568(0x11a)]['coin']][0x0],'usd':_0x7e776c[stablecoins[_0x1bd568(0xc1)]['coin']][0x0],'coins':_0x53da15};let _0x2d47d8=dbPerformance[_0x1bd568(0x8c)](_0x1bd568(0xfc))['find']({'date':_0x9df229})[_0x1bd568(0xbf)]();_0x2d47d8?dbPerformance[_0x1bd568(0x8c)](_0x1bd568(0xfc))[_0x1bd568(0x92)]({'date':_0x9df229})[_0x1bd568(0x176)](_0x1d4dd4)[_0x1bd568(0x87)]():dbPerformance[_0x1bd568(0x8c)]('data')[_0x1bd568(0x18d)](_0x1d4dd4)[_0x1bd568(0x87)](),_0x2d47d8=dbPerformance['get'](_0x1bd568(0xfc))[_0x1bd568(0xdf)](_0x1bd568(0x115))['value'](),_0x2d47d8['forEach'](_0x13dd78=>{const _0x4e27d0=_0x1bd568;_0x13dd78[_0x4e27d0(0x115)]<_0x9df229&&dbPerformance[_0x4e27d0(0x8c)](_0x4e27d0(0xfc))[_0x4e27d0(0xf9)]({'date':_0x13dd78[_0x4e27d0(0x115)]})[_0x4e27d0(0x87)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x20f781){const _0x610695=_0x1dfd83;let _0x25bc09,_0x371635=[];logHistory('success',_0x610695(0xe0)),_0x20f781[_0x610695(0x11e)][_0x610695(0x15a)](_0x36f31f=>{const _0x203564=_0x610695;if(_0x36f31f[_0x203564(0x91)]!=config[_0x203564(0xd2)]&&!_0x36f31f[_0x203564(0x18e)])_0x371635[_0x203564(0x18d)]({'coin':_0x36f31f[_0x203564(0x91)],'symbol':_0x36f31f['symbol']});});let _0x1d263e=[];try{const _0x26035e=fns[_0x610695(0x108)](fns[_0x610695(0x9d)](_0x20f781[_0x610695(0xea)][_0x610695(0x112)](/\//g,'-')),_0x610695(0x109));for(const _0x1d33c1 of _0x371635){if(_0x1d33c1[_0x610695(0x91)]!=config['basecoin'])_0x25bc09=await exchange[_0x610695(0x8d)](_0x1d33c1[_0x610695(0xa5)],Date['parse'](_0x26035e));_0x25bc09[_0x610695(0x15a)](_0x1c3a52=>{const _0x18a0c2=_0x610695,_0x8a3bc6=_0x1d33c1['symbol'][_0x18a0c2(0xa8)](config['basecoin']+'/'),_0x32602e=fns[_0x18a0c2(0x108)](fns['parseISO'](_0x1c3a52['datetime']),'yyyy/MM/dd\x20HH:mm:ss'),_0x1d99ad=fns[_0x18a0c2(0x108)](fns[_0x18a0c2(0x9d)](_0x1c3a52[_0x18a0c2(0xad)]),'yyyy/MM/dd');let _0x27e490;if(_0x1c3a52['side']==_0x18a0c2(0x151)&&_0x8a3bc6==![])_0x27e490=_0x1c3a52[_0x18a0c2(0xae)];if(_0x1c3a52[_0x18a0c2(0xb6)]=='buy'&&_0x8a3bc6==!![])_0x27e490=-_0x1c3a52[_0x18a0c2(0xae)]*_0x1c3a52[_0x18a0c2(0x9e)];if(_0x1c3a52['side']==_0x18a0c2(0xff)&&_0x8a3bc6==![])_0x27e490=-_0x1c3a52[_0x18a0c2(0xae)];if(_0x1c3a52[_0x18a0c2(0xb6)]==_0x18a0c2(0xff)&&_0x8a3bc6==!![])_0x27e490=_0x1c3a52[_0x18a0c2(0xae)]*_0x1c3a52[_0x18a0c2(0x9e)];_0x1d263e[_0x18a0c2(0x18d)]({'timestamp':_0x32602e,'date':_0x1d99ad,'coin':_0x1d33c1[_0x18a0c2(0x91)],'symbol':_0x1d33c1[_0x18a0c2(0xa5)],'type':_0x1c3a52[_0x18a0c2(0xf4)],'side':_0x1c3a52[_0x18a0c2(0xb6)],'reverse':_0x8a3bc6,'amount':formatResult(_0x1c3a52['filled'],0x8),'filled':formatResult(_0x1c3a52['filled'],0x8),'coinamount':formatResult(_0x27e490,0x8),'price':formatResult(_0x1c3a52['price'],0x8)});let _0x221cfd;if(_0x1c3a52[_0x18a0c2(0xb6)]==_0x18a0c2(0x151)&&_0x8a3bc6==![])_0x221cfd=-_0x1c3a52[_0x18a0c2(0xae)]*_0x1c3a52[_0x18a0c2(0x9e)];if(_0x1c3a52[_0x18a0c2(0xb6)]==_0x18a0c2(0x151)&&_0x8a3bc6==!![])_0x221cfd=_0x1c3a52[_0x18a0c2(0xae)];if(_0x1c3a52[_0x18a0c2(0xb6)]=='sell'&&_0x8a3bc6==![])_0x221cfd=_0x1c3a52[_0x18a0c2(0xae)]*_0x1c3a52[_0x18a0c2(0x9e)];if(_0x1c3a52['side']==_0x18a0c2(0xff)&&_0x8a3bc6==!![])_0x221cfd=-_0x1c3a52[_0x18a0c2(0xae)];_0x1d263e[_0x18a0c2(0x18d)]({'date':_0x1d99ad,'coin':config[_0x18a0c2(0xd2)],'coinamount':formatResult(_0x221cfd,0x8)});});}_0x1d263e[_0x610695(0x150)]((_0x4a2bcb,_0x461509)=>_0x4a2bcb[_0x610695(0x11d)]>_0x461509[_0x610695(0x11d)]?0x1:_0x461509['timestamp']>_0x4a2bcb['timestamp']?-0x1:0x0),dbLogs['get'](_0x610695(0x106))[_0x610695(0xf9)]()[_0x610695(0x87)](),_0x1d263e[_0x610695(0x15a)](_0x3fe998=>{const _0x3a1e81=_0x610695;let _0x4f743e;_0x3fe998[_0x3a1e81(0x91)]!=config[_0x3a1e81(0xd2)]&&(_0x4f743e={'time':_0x3fe998['timestamp'],'type':'order','event':_0x3a1e81(0xfd)+_0x3fe998[_0x3a1e81(0xa5)]+'\x20'+_0x3fe998[_0x3a1e81(0xb6)]+'\x20#'+_0x3fe998[_0x3a1e81(0xae)]+'\x20@'+_0x3fe998[_0x3a1e81(0x9e)]},dbLogs[_0x3a1e81(0x8c)](_0x3a1e81(0x106))[_0x3a1e81(0x18d)](_0x4f743e)[_0x3a1e81(0x87)]());});const _0x2d99bf=fns[_0x610695(0x14c)]({'start':new Date(_0x20f781['startdate']),'end':new Date()})[_0x610695(0xd5)](_0x425514=>fns[_0x610695(0x108)](_0x425514,_0x610695(0xc9)));let _0x3fac30=[];_0x20f781[_0x610695(0x11e)][_0x610695(0x15a)](_0x12458b=>{const _0x5585a4=_0x610695;if(!_0x12458b[_0x5585a4(0x18e)]){_0x3fac30[_0x12458b[_0x5585a4(0x91)]]=[];let _0x267d8a=_0x12458b['startnumber'];_0x2d99bf['forEach']((_0x39aa39,_0x32d9d4)=>{const _0x3c3f8f=_0x5585a4;let _0x4a5017=_0x1d263e[_0x3c3f8f(0x183)](_0x5019fd=>_0x5019fd[_0x3c3f8f(0x91)]==_0x12458b['coin']&&_0x5019fd['date']==_0x39aa39);if(_0x4a5017[_0x3c3f8f(0x97)]!=0x0){let _0x97f4bb=_0x4a5017[_0x3c3f8f(0x10b)]((_0xace3db,_0x222af7)=>{const _0x4f3dd7=_0x3c3f8f;return _0xace3db+=_0x222af7[_0x4f3dd7(0xce)],_0xace3db;},0x0);_0x267d8a+=_0x97f4bb;}_0x3fac30[_0x12458b[_0x3c3f8f(0x91)]][_0x39aa39]=_0x267d8a;});}});const _0x2b5f7c=[..._0x371635];_0x2b5f7c[_0x610695(0x18d)]({'coin':stablecoins[_0x610695(0x11a)][_0x610695(0x91)],'symbol':stablecoins[_0x610695(0x11a)][_0x610695(0xa5)]}),_0x2b5f7c[_0x610695(0x18d)]({'coin':stablecoins['usd'][_0x610695(0x91)],'symbol':stablecoins[_0x610695(0xc1)]['symbol']});let _0x1e5d8c=[];for(const _0x27ef0e of _0x2b5f7c){_0x1e5d8c[_0x27ef0e[_0x610695(0x91)]]=await getCloses(_0x27ef0e['symbol'],new Date(_0x20f781[_0x610695(0xea)]));}dbPerformance['get'](_0x610695(0xfc))[_0x610695(0xf9)]()[_0x610695(0x87)](),_0x2d99bf['forEach']((_0x5beac7,_0x691fd0)=>{const _0xef383d=_0x610695;let _0x4136fb,_0x38471f=[];_0x691fd0==0x0?(_0x20f781[_0xef383d(0x11e)][_0xef383d(0x15a)](_0x2b32b3=>{const _0x474618=_0xef383d;!_0x2b32b3[_0x474618(0x18e)]&&_0x38471f[_0x474618(0x18d)]({'coin':_0x2b32b3[_0x474618(0x91)],'number':_0x2b32b3[_0x474618(0x134)],'price':_0x2b32b3[_0x474618(0xbd)]});}),_0x4136fb={'date':_0x5beac7,'eur':_0x1e5d8c[stablecoins['eur']['coin']][_0x691fd0],'usd':_0x1e5d8c[stablecoins[_0xef383d(0xc1)][_0xef383d(0x91)]][_0x691fd0],'coins':_0x38471f}):(_0x20f781[_0xef383d(0x11e)]['forEach'](_0x5628dd=>{const _0x337430=_0xef383d;!_0x5628dd['excluded']&&_0x38471f[_0x337430(0x18d)]({'coin':_0x5628dd['coin'],'number':_0x3fac30[_0x5628dd[_0x337430(0x91)]][_0x5beac7],'price':_0x5628dd['coin']==config[_0x337430(0xd2)]?0x1:_0x1e5d8c[_0x5628dd[_0x337430(0x91)]][_0x691fd0]});}),_0x4136fb={'date':_0x5beac7,'eur':_0x1e5d8c[stablecoins['eur']['coin']][_0x691fd0],'usd':_0x1e5d8c[stablecoins[_0xef383d(0xc1)][_0xef383d(0x91)]][_0x691fd0],'coins':_0x38471f}),dbPerformance['get']('data')[_0xef383d(0x18d)](_0x4136fb)[_0xef383d(0x87)]();}),emitPerformance(),await resetCoinResults();for(let _0x18f5ed of _0x1d263e){_0x18f5ed[_0x610695(0x91)]!=config['basecoin']&&await updateCoinResults(_0x18f5ed);}logHistory(_0x610695(0x172),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x416c8b){await handleError(_0x416c8b,_0x610695(0x181));}}async function getCloses(_0x3bba77,_0xc612f3,_0x4f5ec5=undefined){const _0x579dbd=_0x1dfd83,_0x9c6b20='1d';let _0x502b2d,_0xc8b3cc;const _0x59f387=fns[_0x579dbd(0x161)](new Date(),_0xc612f3)+0x1;try{const _0x356a9c=exchange[_0x579dbd(0x110)]()-_0x59f387*0x18*0xe10*0x3e8;_0x502b2d=await exchange['fetchOHLCV'](_0x3bba77,_0x9c6b20,_0x356a9c,_0x4f5ec5),_0xc8b3cc=await exchange[_0x579dbd(0x123)](_0x3bba77);}catch(_0x23e537){await handleError(_0x23e537,_0x579dbd(0xd0));}let _0x45c0de=ohlcvToCloses(_0x502b2d);return _0x45c0de[_0x579dbd(0x18d)](_0xc8b3cc[_0x3bba77][_0x579dbd(0x13d)]),_0x45c0de;}function ohlcvToCloses(_0x4382a8){const _0x12eda3=_0x1dfd83;let _0x512475=[];return _0x4382a8[_0x12eda3(0x15a)](function(_0x1a3996){_0x512475['push'](_0x1a3996[0x4]);}),_0x512475;}function getConfiguration(_0x1a1ff9){const _0x33220e=_0x1dfd83;let _0x571cb0=dbConfig[_0x33220e(0x8c)]('bot')['find']({'botID':_0x1a1ff9})[_0x33220e(0xbf)]();if(_0x571cb0){let _0x153fda=![];!_0x571cb0[_0x33220e(0xb5)]&&(_0x571cb0={..._0x571cb0,'exchange':_0x33220e(0x9f)},_0x153fda=!![]),!_0x571cb0['basecoin']&&(_0x571cb0={..._0x571cb0,'basecoin':_0x33220e(0x17e)},_0x153fda=!![]),!_0x571cb0['ordertype']&&(_0x571cb0={..._0x571cb0,'ordertype':_0x33220e(0xb0)},_0x153fda=!![]),!_0x571cb0[_0x33220e(0x140)]&&(_0x571cb0={..._0x571cb0,'timeout':0x14},_0x153fda=!![]),!_0x571cb0['emojibuy']&&(_0x571cb0={..._0x571cb0,'emojibuy':''},_0x153fda=!![]),!_0x571cb0[_0x33220e(0xc5)]&&(_0x571cb0={..._0x571cb0,'emojisell':''},_0x153fda=!![]),!_0x571cb0[_0x33220e(0x9b)]&&(_0x571cb0={..._0x571cb0,'showname':![]},_0x153fda=!![]),_0x153fda&&(_0x571cb0={'botID':_0x571cb0[_0x33220e(0x12c)],'exchange':_0x571cb0['exchange'],'apiKey':_0x571cb0[_0x33220e(0x12a)],'apiSecret':_0x571cb0[_0x33220e(0xe9)],'basecoin':_0x571cb0[_0x33220e(0xd2)],'botname':_0x571cb0[_0x33220e(0xd6)],'showname':_0x571cb0['showname'],'threshold':_0x571cb0['threshold'],'ordertype':_0x571cb0['ordertype'],'timeout':_0x571cb0[_0x33220e(0x140)],'startdate':_0x571cb0['startdate'],'recreate':_0x571cb0[_0x33220e(0x114)],'timeshift':_0x571cb0[_0x33220e(0x16b)],'headless':_0x571cb0[_0x33220e(0x132)],'cooldown':_0x571cb0[_0x33220e(0x144)],'emojibuy':_0x571cb0[_0x33220e(0x147)],'emojisell':_0x571cb0[_0x33220e(0xc5)],'portfolio':_0x571cb0[_0x33220e(0x11e)]},dbConfig[_0x33220e(0x8c)]('bot')[_0x33220e(0xf9)]()[_0x33220e(0x87)](),dbConfig[_0x33220e(0x8c)](_0x33220e(0xb4))[_0x33220e(0x18d)](_0x571cb0)[_0x33220e(0x87)]());}else _0x571cb0={'botID':_0x1a1ff9,'exchange':_0x33220e(0x9f),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x33220e(0xe8)+_0x1a1ff9,'showname':![],'threshold':'3','ordertype':_0x33220e(0xb0),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x33220e(0x16b)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x571cb0;}function emittedConfiguration(){const _0x300e28=_0x1dfd83;let _0x460594;return config['apiKey']==''?_0x460594=config:_0x460594={...config,'apiKey':_0x300e28(0x116),'apiSecret':_0x300e28(0x116)},_0x460594;}function getSettings(){const _0x180f0a=_0x1dfd83;return dbSettings[_0x180f0a(0x8c)](_0x180f0a(0xdb))['value']();}function getSecure(){const _0x49abbb=_0x1dfd83;return dbSecure['get']('secure')[_0x49abbb(0xbf)]()||{};}function updateTimeshift(_0x3a49fb){const _0x1a5c10=_0x1dfd83;let _0x413184=dbConfig[_0x1a5c10(0x8c)](_0x1a5c10(0xb4))[_0x1a5c10(0x92)]({'botID':botID})['value']();_0x413184&&dbConfig[_0x1a5c10(0x8c)]('bot')[_0x1a5c10(0x92)]({'botID':botID})[_0x1a5c10(0x176)]({'timeshift':_0x3a49fb})[_0x1a5c10(0x87)](),config[_0x1a5c10(0x16b)]=_0x3a49fb,proxyEmit(_0x1a5c10(0xe5),emittedConfiguration());}async function storeConfiguration(_0x5d3ee8){const _0x4d5382=_0x1dfd83;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x409c55=dbConfig[_0x4d5382(0x8c)]('bot')['find']({'botID':botID})[_0x4d5382(0xbf)]();_0x5d3ee8={..._0x5d3ee8,'apiKey':crypt['decrypt'](secure[_0x4d5382(0x190)],_0x5d3ee8[_0x4d5382(0x12a)])['message'],'apiSecret':crypt[_0x4d5382(0x86)](secure['privateKey'],_0x5d3ee8['apiSecret'])[_0x4d5382(0x104)]};if(_0x409c55){if(_0x5d3ee8[_0x4d5382(0x12a)]==_0x4d5382(0x116))_0x5d3ee8['apiKey']=config[_0x4d5382(0x12a)];if(_0x5d3ee8['apiSecret']==_0x4d5382(0x116))_0x5d3ee8[_0x4d5382(0xe9)]=config[_0x4d5382(0xe9)];dbConfig[_0x4d5382(0x8c)]('bot')[_0x4d5382(0x92)]({'botID':botID})[_0x4d5382(0x176)](_0x5d3ee8)[_0x4d5382(0x87)]();}else dbConfig['get'](_0x4d5382(0xb4))[_0x4d5382(0x18d)](_0x5d3ee8)[_0x4d5382(0x87)](),process[_0x4d5382(0x135)]({'status':_0x4d5382(0x93),'live':_0x4d5382(0xd9)});config={..._0x5d3ee8};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x5d3ee8[_0x4d5382(0xd6)]}),proxyEmit(_0x4d5382(0x138)),reset();}async function storeHeadless(_0x4c6af4){const _0x1243f5=_0x1dfd83,_0x4f7c76={...config,'headless':_0x4c6af4[_0x1243f5(0x132)]};let _0x39fecd=dbConfig[_0x1243f5(0x8c)](_0x1243f5(0xb4))[_0x1243f5(0x92)]({'botID':botID})[_0x1243f5(0xbf)]();_0x39fecd&&dbConfig[_0x1243f5(0x8c)](_0x1243f5(0xb4))[_0x1243f5(0x92)]({'botID':botID})[_0x1243f5(0x176)](_0x4f7c76)['write'](),config={..._0x4f7c76},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x559973){const _0xf97d1a=_0x1dfd83;return _0x559973[_0xf97d1a(0x112)]('/','');}function updateNumberCoins(_0x1a4e01){const _0x3bcd77=_0x1dfd83;_0x1a4e01[_0x3bcd77(0x17c)]&&_0x1a4e01[_0x3bcd77(0x17c)]==_0x3bcd77(0x175)&&_0x1a4e01[_0x3bcd77(0xb2)][_0x3bcd77(0x15a)](_0x232f6b=>{const _0x595ea0=_0x3bcd77;let _0x33b629=currentCoins[_0x595ea0(0x92)](_0x712f65=>_0x712f65['coin']==_0x232f6b[_0x595ea0(0x16a)]),_0x154112=config[_0x595ea0(0x11e)]['find'](_0x329a2c=>_0x329a2c[_0x595ea0(0x91)]==_0x232f6b[_0x595ea0(0x16a)]);if(_0x33b629&&_0x154112)_0x33b629['number']=Number(_0x232f6b[_0x595ea0(0x184)])+(_0x154112[_0x595ea0(0x186)]||0x0);});if(_0x1a4e01[_0x3bcd77(0x17c)]&&_0x1a4e01[_0x3bcd77(0x17c)]==_0x3bcd77(0x195)){if(_0x1a4e01[_0x3bcd77(0x173)]==_0x3bcd77(0x128)&&_0x1a4e01[_0x3bcd77(0xe2)]=='FILLED'){if(lastOrders)lastOrders[_0x3bcd77(0x15a)](_0xd37fd6=>{const _0x28ad3e=_0x3bcd77;if(_0xd37fd6[_0x28ad3e(0x14e)]==_0x1a4e01[_0x28ad3e(0x14e)]){if(_0xd37fd6[_0x28ad3e(0x120)])_0xd37fd6[_0x28ad3e(0x133)]=_0x1a4e01[_0x28ad3e(0x111)]*_0xd37fd6[_0x28ad3e(0x9e)];else _0xd37fd6[_0x28ad3e(0x133)]=_0x1a4e01['accumulatedQuantity'];}});}}}async function getCoins(_0x1043b5=!![],_0x57b571=config[_0x1dfd83(0xd2)]){const _0x1e4767=_0x1dfd83;let _0x2f7d26,_0x32b9fc=[],_0xd68979=[],_0xc550d4=[];try{_0x2f7d26=await exchange['fetchBalance'](),mybalances=_0x2f7d26[_0x1e4767(0x101)];if(!_0x1043b5)for(const [_0x1930d1,_0x3f8efd]of Object[_0x1e4767(0xf6)](mybalances)){_0xc550d4[_0x1e4767(0x18d)](_0x1930d1);}else config[_0x1e4767(0x11e)]['forEach'](_0x30e047=>{const _0xffb6ff=_0x1e4767;if(!_0x30e047['excluded'])_0xc550d4[_0xffb6ff(0x18d)](_0x30e047[_0xffb6ff(0x91)]);});if(_0x57b571=='')for(const [_0x4711b6,_0x53ff91]of Object[_0x1e4767(0xf6)](mybalances)){_0x53ff91[_0x1e4767(0x189)]()!=0x0&&_0xd68979['push']({'coin':_0x4711b6});}else for(const [_0x419694,_0x2938d3]of Object[_0x1e4767(0xf6)](mybalances)){if(_0xc550d4[_0x1e4767(0xa8)](_0x419694)){const _0x55ab14=config['portfolio'][_0x1e4767(0x92)](_0x33e74c=>_0x33e74c['coin']==_0x419694);if((_0x2938d3[_0x1e4767(0x189)]()!=0x0||_0x55ab14)&&(allSymbols[_0x1e4767(0xa8)](_0x419694+'/'+_0x57b571)||_0x419694==_0x57b571))_0xd68979[_0x1e4767(0x18d)]({'coin':_0x419694,'symbol':_0x419694+'/'+_0x57b571,'reverse':![],'number':_0x2938d3+(_0x55ab14&&_0x55ab14[_0x1e4767(0x186)]||0x0)}),_0x419694!=_0x57b571&&_0x32b9fc[_0x1e4767(0x18d)](_0x419694+'/'+_0x57b571);else(_0x2938d3[_0x1e4767(0x189)]()!=0x0||_0x55ab14)&&allSymbols[_0x1e4767(0xa8)](_0x57b571+'/'+_0x419694)&&(_0xd68979['push']({'coin':_0x419694,'symbol':_0x57b571+'/'+_0x419694,'reverse':!![],'number':_0x2938d3+(_0x55ab14&&_0x55ab14[_0x1e4767(0x186)]||0x0)}),_0x419694!=_0x57b571&&_0x32b9fc[_0x1e4767(0x18d)](_0x57b571+'/'+_0x419694));}}}catch(_0x475481){if(!_0x1043b5){if(_0x475481['toString']()[_0x1e4767(0xa8)](_0x1e4767(0xdd)))return logHistory('error','Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x475481[_0x1e4767(0x189)]()[_0x1e4767(0xa8)](_0x1e4767(0x12e)))return logHistory('error',_0x1e4767(0x124)),![];else{if(_0x475481[_0x1e4767(0x189)]()[_0x1e4767(0xa8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x1e4767(0xe6),_0x1e4767(0x179)),![];else await handleError(_0x475481,_0x1e4767(0x90));}}}else await handleError(_0x475481,_0x1e4767(0x90));}return _0xd68979;}async function getPortfolio(_0x558403){const _0x34ddb6=_0x1dfd83;let _0x515b73=[],_0x1bd48a=[],_0x48ef8a,_0x114b99=[],_0x497237,_0x25da47;_0x558403[_0x34ddb6(0x12a)]===_0x34ddb6(0x116)||_0x558403['apiSecret']==='************'?(_0x497237=config[_0x34ddb6(0x12a)],_0x25da47=config[_0x34ddb6(0xe9)]):(_0x497237=_0x558403[_0x34ddb6(0x12a)],_0x25da47=_0x558403[_0x34ddb6(0xe9)]);await initExchange(_0x497237,_0x25da47);let _0x197611=await loadSymbols();if(_0x197611){_0x114b99=await getCoins(![],_0x558403[_0x34ddb6(0xd2)]);if(_0x114b99===![])proxyEmit(_0x34ddb6(0x11e),![]);else{if(_0x558403['basecoin']=='')proxyEmit('portfolio',_0x114b99);else{_0x114b99[_0x34ddb6(0x15a)](_0xb225c4=>{_0x515b73['push'](_0xb225c4['symbol']);});try{_0x1bd48a=await exchange[_0x34ddb6(0x123)](_0x515b73);}catch(_0x1ddcb9){await handleError(_0x1ddcb9,_0x34ddb6(0xa6));}_0x114b99[_0x34ddb6(0x15a)](_0x239872=>{const _0x1b1015=_0x34ddb6;_0x239872[_0x1b1015(0x91)]!=_0x558403[_0x1b1015(0xd2)]?_0x48ef8a=_0x239872[_0x1b1015(0x120)]?0x1/_0x1bd48a[_0x239872[_0x1b1015(0xa5)]][_0x1b1015(0x13d)]:_0x1bd48a[_0x239872['symbol']][_0x1b1015(0x13d)]:_0x48ef8a=0x1,_0x239872['price']=formatResult(_0x48ef8a,0x8);}),proxyEmit('portfolio',_0x114b99);}}}else proxyEmit(_0x34ddb6(0x11e),![]);}function checkMinimums(_0x9d16a){const _0x2f7d54=_0x1dfd83;let _0x466135=!![];const _0x5cd652=!_0x9d16a[_0x2f7d54(0x120)]?markets[_0x9d16a[_0x2f7d54(0xa5)]][_0x2f7d54(0xc8)][_0x2f7d54(0xae)][_0x2f7d54(0x9a)]:markets[_0x9d16a[_0x2f7d54(0xa5)]]['limits'][_0x2f7d54(0x18b)][_0x2f7d54(0x9a)],_0x59e4aa=!_0x9d16a[_0x2f7d54(0x120)]?markets[_0x9d16a['symbol']][_0x2f7d54(0xc8)][_0x2f7d54(0x18b)]['min']:markets[_0x9d16a[_0x2f7d54(0xa5)]][_0x2f7d54(0xc8)]['amount'][_0x2f7d54(0x9a)];if(Math[_0x2f7d54(0xf2)](_0x9d16a[_0x2f7d54(0x174)])<_0x5cd652)_0x466135=![];if(Math[_0x2f7d54(0xf2)](_0x9d16a[_0x2f7d54(0x174)])*_0x9d16a[_0x2f7d54(0x13d)]<_0x59e4aa)_0x466135=![];return _0x466135;}async function getBalances(){const _0x3fe099=_0x1dfd83;let _0x143707=0x0,_0x5c27aa;const _0x29da61=config['threshold'];currentCoins['forEach'](_0x336f19=>{const _0x4ed6e9=_0x3a2f;if(_0x336f19[_0x4ed6e9(0x91)]!=config[_0x4ed6e9(0xd2)]){let _0x3a9361=global[_0x4ed6e9(0x155)][noslash(_0x336f19['symbol'])];_0x5c27aa=_0x336f19[_0x4ed6e9(0x120)]?0x1/_0x3a9361:_0x3a9361;}else _0x5c27aa=0x1;let _0xf14785=_0x336f19[_0x4ed6e9(0x191)]*_0x5c27aa;_0x143707+=_0xf14785,_0x336f19[_0x4ed6e9(0x13d)]=formatResult(Number(_0x5c27aa),0x8),_0x336f19[_0x4ed6e9(0xbf)]=_0xf14785;}),currentCoins['forEach'](_0x1e4266=>{const _0x35684f=_0x3a2f;let _0x25cac0=config['portfolio']['find'](_0x45306b=>_0x45306b[_0x35684f(0x91)]==_0x1e4266[_0x35684f(0x91)]),_0x24eb15=Number(_0x25cac0['distribution']),_0x595ea7=_0x1e4266['value']/_0x143707*0x64,_0x9bb11c=_0x24eb15*_0x143707/0x64/_0x1e4266[_0x35684f(0x13d)]-_0x1e4266[_0x35684f(0x191)];_0x1e4266[_0x35684f(0x167)]=formatResult(_0x595ea7,0x3),_0x1e4266[_0x35684f(0x103)]=formatResult(_0x24eb15,0x3),_0x1e4266[_0x35684f(0x174)]=formatResult(_0x9bb11c,0x8),_0x1e4266[_0x35684f(0xb6)]='',_0x1e4266['valid']='';if(_0x1e4266[_0x35684f(0x91)]!=config[_0x35684f(0xd2)]){if(_0x1e4266[_0x35684f(0x167)]>_0x24eb15)_0x1e4266['side']='sell',_0x1e4266[_0x35684f(0x182)]=checkMinimums(_0x1e4266);else _0x1e4266[_0x35684f(0x167)]<_0x24eb15&&(_0x1e4266[_0x35684f(0xb6)]=_0x35684f(0x151),_0x1e4266['valid']=checkMinimums(_0x1e4266));}_0x1e4266[_0x35684f(0x88)]=_0x1e4266[_0x35684f(0x167)]/_0x1e4266[_0x35684f(0x103)]-0x1;}),currentCoins['sort']((_0x7c3987,_0x11d931)=>_0x7c3987[_0x3fe099(0x88)]<_0x11d931[_0x3fe099(0x88)]?0x1:_0x11d931[_0x3fe099(0x88)]<_0x7c3987['delta']?-0x1:0x0);const _0x2e89a0=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2e89a0[_0x3fe099(0x11a)],'usd':_0x2e89a0['usd'],'portfolio':JSON[_0x3fe099(0xdc)](currentCoins),'threshold':_0x29da61},proxyEmit(_0x3fe099(0xb2),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3fe099(0x132)])headlessMode({'portfolio':currentCoins,'threshold':_0x29da61});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3e29ff=_0x1dfd83;if(!lastBalances)return;let _0x2c75a3=await getStartingBalances(![]),_0x263844=[],_0x10efa8;JSON[_0x3e29ff(0x15c)](lastBalances['portfolio'])[_0x3e29ff(0x15a)](_0x2413cf=>{const _0x407152=_0x3e29ff;let _0x38c8ec={'coin':_0x2413cf[_0x407152(0x91)],'number':_0x2413cf[_0x407152(0x191)],'price':_0x2413cf[_0x407152(0x13d)]};_0x263844[_0x407152(0x18d)](_0x38c8ec);});const _0x4148ba=await getFiat();_0x10efa8={'date':lastBalances[_0x3e29ff(0x170)][_0x3e29ff(0x14a)]('\x20')[0x0],'eur':_0x4148ba['eur'],'usd':_0x4148ba[_0x3e29ff(0xc1)],'coins':_0x263844};let _0x5d9437=dbPerformance[_0x3e29ff(0x8c)](_0x3e29ff(0xfc))['find']({'date':_0x10efa8[_0x3e29ff(0x115)]})[_0x3e29ff(0xbf)]();_0x5d9437?dbPerformance[_0x3e29ff(0x8c)](_0x3e29ff(0xfc))[_0x3e29ff(0x92)]({'date':_0x10efa8[_0x3e29ff(0x115)]})[_0x3e29ff(0x176)](_0x10efa8)[_0x3e29ff(0x87)]():dbPerformance[_0x3e29ff(0x8c)](_0x3e29ff(0xfc))[_0x3e29ff(0x18d)](_0x10efa8)[_0x3e29ff(0x87)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x326005=_0x1dfd83;if(dbPerformance[_0x326005(0x187)](_0x326005(0xfc))['value']()){let _0xac14b3=dbPerformance[_0x326005(0x8c)](_0x326005(0xfc))[_0x326005(0xdf)]('date')[_0x326005(0xbf)]();proxyEmit(_0x326005(0x11c),_0xac14b3),lastPerformanceEmitted=getDate();}else proxyEmit(_0x326005(0x11c),[]);}async function getStartingBalances(_0x5df0a1=!![]){const _0x31d8b3=_0x1dfd83;let _0x45815a=dbPerformance[_0x31d8b3(0x8c)]('data')[_0x31d8b3(0x92)]({'date':config['startdate']})[_0x31d8b3(0xbf)]();config[_0x31d8b3(0x12a)]!=''&&!_0x45815a&&(await setStartDatePerformance(config),_0x45815a=dbPerformance['get'](_0x31d8b3(0xfc))[_0x31d8b3(0x92)]({'date':config[_0x31d8b3(0xea)]})['value']());if(config[_0x31d8b3(0x12a)]==''||!_0x45815a)return{};let _0x26986f=0x0,_0x58c56c=0x0,_0x1b5176=0x0,_0x5db782=[],_0x38e11c=0x0;config[_0x31d8b3(0x11e)][_0x31d8b3(0x15a)](_0x43cc6c=>{const _0xdb4fa5=_0x31d8b3;if(!_0x43cc6c[_0xdb4fa5(0x18e)]){_0x5db782[_0x38e11c]={'coin':_0x43cc6c['coin'],'symbol':_0x43cc6c[_0xdb4fa5(0xa5)],'number':_0x43cc6c[_0xdb4fa5(0x134)],'price':_0x43cc6c[_0xdb4fa5(0xbd)]},_0x26986f+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c[_0xdb4fa5(0x134)];if(config[_0xdb4fa5(0xd2)]==_0xdb4fa5(0x17e))_0x58c56c+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c['startnumber']*_0x45815a['eur'],_0x1b5176+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c[_0xdb4fa5(0x134)]*_0x45815a[_0xdb4fa5(0xc1)];else{if(config[_0xdb4fa5(0xd2)]==_0xdb4fa5(0xc2)||config[_0xdb4fa5(0xd2)]==_0xdb4fa5(0x130)||config['basecoin']==_0xdb4fa5(0x13a))_0x58c56c+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c[_0xdb4fa5(0x134)]*_0x45815a[_0xdb4fa5(0x11a)]/_0x45815a[_0xdb4fa5(0xc1)],_0x1b5176+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c[_0xdb4fa5(0x134)];else config['basecoin']==_0xdb4fa5(0xaf)&&(_0x58c56c+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c['startnumber'],_0x1b5176+=_0x43cc6c[_0xdb4fa5(0xbd)]*_0x43cc6c['startnumber']*_0x45815a[_0xdb4fa5(0xc1)]/_0x45815a['eur']);}_0x38e11c++;}});let _0x57660f={'basecoin':_0x26986f,'eur':_0x58c56c,'usd':_0x1b5176,'coins':_0x5db782};if(_0x5df0a1)proxyEmit('starting-balances',_0x57660f);return _0x57660f;}function headlessMode(_0x3d736f){const _0x704850=_0x1dfd83;let _0x18a08f=_0x3d736f[_0x704850(0x11e)],_0xe2562b=_0x3d736f[_0x704850(0x11b)],_0x302779=[];for(let _0x21354a of _0x18a08f){if(_0x21354a[_0x704850(0x91)]!=config['basecoin']){if(_0x21354a[_0x704850(0x167)]/_0x21354a[_0x704850(0x103)]-0x1>=_0xe2562b/0x64){if(_0x21354a[_0x704850(0x182)])_0x302779[_0x704850(0x18d)](_0x21354a);}else{if(_0x21354a['distribution']/_0x21354a[_0x704850(0x103)]-0x1<=-_0xe2562b/0x64){if(_0x21354a[_0x704850(0x182)])_0x302779['push'](_0x21354a);}}}}_0x302779[_0x704850(0x97)]>0x0&&placeOrder(_0x302779);}function symbolToCoin(_0x1c4af7){const _0x53ad05=_0x1dfd83;let _0x16effa;if(_0x1c4af7[_0x53ad05(0xa8)]('/'+config[_0x53ad05(0xd2)]))_0x16effa=_0x1c4af7[_0x53ad05(0x112)]('/'+config[_0x53ad05(0xd2)],'');if(_0x1c4af7[_0x53ad05(0xa8)](config[_0x53ad05(0xd2)]+'/'))_0x16effa=_0x1c4af7[_0x53ad05(0x112)](config['basecoin']+'/','');return _0x16effa;}async function validateOrders(_0x254891=0x0){const _0x4712ef=_0x1dfd83;let _0x2d29fb=[],_0x40a9fd=config[_0x4712ef(0x137)]==_0x4712ef(0xb0)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4712ef(0x140)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x4712ef(0x15a)](_0x4b2fda=>{const _0x154f97=_0x4712ef;let _0x2be26b=previousCoins['find'](_0x216481=>_0x216481[_0x154f97(0x91)]==symbolToCoin(_0x4b2fda[_0x154f97(0xa5)])),_0x26705f=currentCoins['find'](_0x130388=>_0x130388[_0x154f97(0x91)]==symbolToCoin(_0x4b2fda['symbol'])),_0x5887bb,_0x14575e;_0x4b2fda[_0x154f97(0xb6)]==_0x154f97(0x151)&&!_0x4b2fda['reverse']||_0x4b2fda[_0x154f97(0xb6)]==_0x154f97(0xff)&&_0x4b2fda[_0x154f97(0x120)]?(_0x5887bb=_0x2be26b[_0x154f97(0x191)]+0.9*_0x4b2fda[_0x154f97(0x133)],_0x14575e=_0x2be26b[_0x154f97(0x191)]+1.1*_0x4b2fda[_0x154f97(0x133)]):(_0x5887bb=_0x2be26b[_0x154f97(0x191)]-1.1*_0x4b2fda[_0x154f97(0x133)],_0x14575e=_0x2be26b[_0x154f97(0x191)]-0.9*_0x4b2fda[_0x154f97(0x133)]);const _0x25d2c7=_0x4b2fda[_0x154f97(0x133)]!=0x0&&_0x26705f[_0x154f97(0x191)]>=_0x5887bb&&_0x26705f['number']<=_0x14575e;_0x2d29fb['push'](_0x25d2c7);if(_0x25d2c7&&config[_0x154f97(0x137)]!=_0x154f97(0xb0)){if(_0x4b2fda[_0x154f97(0x120)])logHistory(_0x154f97(0x15e),_0x154f97(0x163)+_0x4b2fda[_0x154f97(0xa5)]+'\x20'+_0x4b2fda[_0x154f97(0xb6)]+'\x20#'+formatResult(_0x4b2fda[_0x154f97(0x133)]/_0x4b2fda['price'],0x8)+'\x20@'+formatResult(_0x4b2fda['price'],0x8));else logHistory(_0x154f97(0x15e),_0x154f97(0x163)+_0x4b2fda[_0x154f97(0xa5)]+'\x20'+_0x4b2fda[_0x154f97(0xb6)]+'\x20#'+formatResult(_0x4b2fda['filled'],0x8)+'\x20@'+formatResult(_0x4b2fda[_0x154f97(0x9e)],0x8));}}),_0x2d29fb[_0x4712ef(0x15a)]((_0x6c25e,_0x88e3d0)=>{const _0x59b212=_0x4712ef;if(_0x6c25e)lastOrders[_0x59b212(0xd4)](_0x88e3d0,0x1);});if(_0x254891<_0x40a9fd&&_0x2d29fb['includes'](![])){if(_0x254891==0x0){config['ordertype']==_0x4712ef(0xb0)?logHistory(_0x4712ef(0xe6),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory(_0x4712ef(0xe6),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x254891);},0xa*0x3e8);}else{(_0x254891==0x1||_0x254891==Math[_0x4712ef(0x17d)](_0x40a9fd/0x2)||_0x254891==_0x40a9fd-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x254891);},validateOrderInterval);}}else{lockOrders=![];if(_0x254891>0x0&&!_0x2d29fb[_0x4712ef(0xa8)](![]))config['ordertype']==_0x4712ef(0xb0)?logHistory(_0x4712ef(0x172),_0x4712ef(0x153)):logHistory(_0x4712ef(0x172),_0x4712ef(0x18f));else _0x254891>0x0&&_0x2d29fb[_0x4712ef(0xa8)](![])&&(config[_0x4712ef(0x137)]==_0x4712ef(0xb0)?logHistory(_0x4712ef(0x172),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4712ef(0x17d)](_0x40a9fd*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x4712ef(0x15a)](async _0x3828f7=>{const _0x515b91=_0x4712ef;try{const _0x1da267=await exchange['cancelOrder'](_0x3828f7[_0x515b91(0x14e)],_0x3828f7[_0x515b91(0xa5)]);}catch(_0x126555){if(_0x126555[_0x515b91(0x189)]()['includes'](_0x515b91(0xfa))){}else await handleError(_0x126555,'cancelOrder()');}}),logHistory(_0x4712ef(0x172),_0x4712ef(0x10a)+Math[_0x4712ef(0x17d)](_0x40a9fd*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x5c2907=_0x1dfd83;dbCoinResults[_0x5c2907(0x8c)](_0x5c2907(0xcf))[_0x5c2907(0xf9)]()[_0x5c2907(0x87)]();let _0x3df82c=await getStartingBalances(![]);_0x3df82c['coins'][_0x5c2907(0x15a)](_0x57f1bf=>{const _0x59d826=_0x5c2907,_0x1f401a=_0x57f1bf['symbol'][_0x59d826(0xa8)](config[_0x59d826(0xd2)]+'/');if(_0x57f1bf[_0x59d826(0x91)]!=config[_0x59d826(0xd2)]){let _0xac4dc1={'coin':_0x57f1bf[_0x59d826(0x91)],'number':_0x57f1bf[_0x59d826(0x191)],'breakeven':_0x57f1bf[_0x59d826(0x9e)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x59d826(0x8c)](_0x59d826(0xcf))['push'](_0xac4dc1)[_0x59d826(0x87)]();}});}async function updateCoinResults(_0x595078){const _0x50381a=_0x1dfd83;let _0x573f4a,_0xdc864e,_0x5187d1,_0x47a574,_0x4b2da3,_0x352efd,_0x1a0a4f=dbCoinResults[_0x50381a(0x8c)](_0x50381a(0xcf))[_0x50381a(0x92)]({'coin':_0x595078[_0x50381a(0x91)]})[_0x50381a(0xbf)]();if(!_0x1a0a4f)return;if(_0x595078[_0x50381a(0x117)]&&_0x595078[_0x50381a(0x117)][_0x50381a(0x145)]==config[_0x50381a(0xd2)])_0x573f4a=_0x595078[_0x50381a(0x117)]['cost'];else{if(_0x595078[_0x50381a(0x117)]&&_0x595078[_0x50381a(0x117)][_0x50381a(0x145)]==_0x50381a(0x177))_0x573f4a=_0x595078['fee'][_0x50381a(0x18b)]*global[_0x50381a(0x155)][_0x50381a(0x177)+config['basecoin']];else _0x573f4a=0.001*_0x595078[_0x50381a(0x133)];}const _0x56b1d3=_0x595078['symbol'][_0x50381a(0xa8)](config[_0x50381a(0xd2)]+'/');_0x56b1d3&&(_0x352efd={'coin':_0x595078[_0x50381a(0x91)],'symbol':_0x595078[_0x50381a(0xa5)],'filled':_0x595078[_0x50381a(0x133)]*_0x595078[_0x50381a(0x9e)],'side':_0x595078['side']==_0x50381a(0xff)?'buy':'sell','price':0x1/_0x595078[_0x50381a(0x9e)]},_0x595078={..._0x352efd});_0x595078[_0x50381a(0xb6)]==_0x50381a(0x151)?_0x5187d1=(_0x1a0a4f['breakeven']*_0x1a0a4f[_0x50381a(0x191)]+_0x595078[_0x50381a(0x9e)]*_0x595078[_0x50381a(0x133)])/(_0x1a0a4f[_0x50381a(0x191)]+_0x595078[_0x50381a(0x133)]):_0x5187d1=(_0x1a0a4f[_0x50381a(0x185)]*_0x1a0a4f[_0x50381a(0x191)]-_0x595078['price']*_0x595078[_0x50381a(0x133)])/(_0x1a0a4f[_0x50381a(0x191)]-_0x595078['filled']);_0x595078['side']==_0x50381a(0x151)?_0x47a574=_0x1a0a4f['realized']:_0x47a574=_0x1a0a4f[_0x50381a(0x139)]+(_0x595078[_0x50381a(0x9e)]-_0x1a0a4f[_0x50381a(0x185)])*_0x595078[_0x50381a(0x133)];_0xdc864e=_0x595078[_0x50381a(0xb6)]==_0x50381a(0xff)?_0x1a0a4f[_0x50381a(0x191)]-_0x595078[_0x50381a(0x133)]:_0x1a0a4f[_0x50381a(0x191)]+_0x595078[_0x50381a(0x133)],_0x4b2da3=(_0x595078[_0x50381a(0x9e)]-_0x5187d1)*_0xdc864e;let _0x4e70d3={'coin':_0x595078[_0x50381a(0x91)],'number':_0xdc864e,'breakeven':formatResult(_0x5187d1,0x8),'realized':formatResult(_0x47a574,0x8),'unrealized':formatResult(_0x4b2da3,0x8),'fees':formatResult(_0x1a0a4f[_0x50381a(0x8b)]+_0x573f4a,0x8),'sells':_0x595078[_0x50381a(0xb6)]==_0x50381a(0xff)?_0x1a0a4f[_0x50381a(0x8e)]+0x1:_0x1a0a4f['sells'],'buys':_0x595078[_0x50381a(0xb6)]==_0x50381a(0x151)?_0x1a0a4f[_0x50381a(0xf3)]+0x1:_0x1a0a4f['buys']};dbCoinResults[_0x50381a(0x8c)]('coins')['find']({'coin':_0x595078[_0x50381a(0x91)]})[_0x50381a(0x176)](_0x4e70d3)['write']();}async function placeOrder(_0x19b2b4){const _0x51af81=_0x1dfd83,_0x17d996=config[_0x51af81(0x137)]==_0x51af81(0xb0)?_0x51af81(0xb0):_0x51af81(0x149);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x51af81(0xdc)](currentCoins));for(const _0x4fead0 of _0x19b2b4){let _0xb2d103,_0x570fd8,_0x5d7a1d,_0x4453a0,_0x425750,_0x18f59b=_0x4fead0['symbol'];try{const _0x2f8226=await exchange[_0x51af81(0x123)](_0x18f59b),_0x2ac2fb=_0x2f8226[_0x18f59b];_0xb2d103=_0x2ac2fb[_0x51af81(0x13d)],_0x570fd8=_0x2ac2fb[_0x51af81(0xb7)],_0x5d7a1d=_0x2ac2fb[_0x51af81(0x16e)];_0x4fead0['reverse']?(_0x4453a0=_0x4fead0[_0x51af81(0xb6)]==_0x51af81(0x151)?'sell':_0x51af81(0x151),_0x425750=Math['abs'](_0x4fead0[_0x51af81(0x174)])/_0xb2d103):(_0x4453a0=_0x4fead0['side'],_0x425750=Math[_0x51af81(0xf2)](_0x4fead0['trade']));_0x17d996=='limit'&&(config[_0x51af81(0x137)]==_0x51af81(0xab)&&(_0xb2d103=_0x4453a0==_0x51af81(0x151)?_0x570fd8:_0x5d7a1d),config['ordertype']==_0x51af81(0x169)&&(_0xb2d103=_0x4453a0=='buy'?_0x5d7a1d:_0x570fd8));_0x425750=formatResult(_0x425750,0x8),_0xb2d103=formatResult(_0xb2d103,0x8);const _0x3149cd=await exchange[_0x51af81(0xa2)](_0x18f59b,_0x17d996,_0x4453a0,_0x425750,_0xb2d103);lastOrders[_0x51af81(0x18d)]({'orderId':_0x3149cd['id'],'symbol':_0x18f59b,'side':_0x4453a0,'reverse':_0x4fead0[_0x51af81(0x120)],'amount':_0x4fead0['reverse']?_0x3149cd[_0x51af81(0xae)]*_0x3149cd[_0x51af81(0x9e)]:_0x3149cd[_0x51af81(0xae)],'filled':_0x4fead0[_0x51af81(0x120)]?_0x3149cd[_0x51af81(0x133)]*_0x3149cd[_0x51af81(0x9e)]:_0x3149cd[_0x51af81(0x133)],'price':_0x3149cd[_0x51af81(0x9e)]});const _0x2944b3=_0x4453a0=='sell'?config['emojisell']?String[_0x51af81(0xed)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String[_0x51af81(0xed)]('0x'+config[_0x51af81(0x147)])+'\x20':'',_0x101657=_0x17d996==_0x51af81(0xb0)?_0x51af81(0x193):config[_0x51af81(0x137)]=='limit-high'?_0x51af81(0xe1):_0x51af81(0x162);if(_0x17d996==_0x51af81(0xb0))logHistory(_0x51af81(0x15e),''+_0x2944b3+_0x101657+_0x51af81(0x121)+_0x18f59b+'\x20'+_0x4453a0+'\x20#'+formatResult(_0x3149cd[_0x51af81(0x133)],0x8)+'\x20@'+formatResult(_0x3149cd['price'],0x8));else logHistory(_0x51af81(0x15e),''+_0x2944b3+_0x101657+_0x51af81(0x121)+_0x18f59b+'\x20'+_0x4453a0+'\x20#'+formatResult(_0x3149cd[_0x51af81(0xae)],0x8)+'\x20@'+formatResult(_0x3149cd[_0x51af81(0x9e)],0x8));_0x3149cd[_0x51af81(0x91)]=_0x4fead0[_0x51af81(0x91)],await updateCoinResults(_0x3149cd);if(config[_0x51af81(0x144)]!=0x0){let _0x50cda4=null;if(cooldownTracker[_0x51af81(0x97)]==config[_0x51af81(0x144)]-0x1)_0x50cda4=cooldownTracker[_0x51af81(0x13c)]();const _0x89cdf=getTimeStamp();cooldownTracker[_0x51af81(0x18d)](_0x89cdf);if(_0x50cda4){const _0x3a5c4f=fns[_0x51af81(0xfe)](new Date(_0x89cdf),new Date(_0x50cda4));_0x3a5c4f<cooldownInterval&&(logHistory(_0x51af81(0xe6),_0x51af81(0x166)+config[_0x51af81(0x144)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x51af81(0xaa)+cooldownPeriod/(0xe10*0x3e8)+_0x51af81(0xa4)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0xbbe1d1){if(_0xbbe1d1['toString']()[_0x51af81(0xa8)](_0x51af81(0xb8)))logHistory(_0x51af81(0xe6),_0x51af81(0xac)+_0x18f59b);else{if(_0xbbe1d1[_0x51af81(0x189)]()[_0x51af81(0xa8)](_0x51af81(0x165)))logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x18f59b);else await handleError(_0xbbe1d1,'placeOrder()');}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x51af81(0x132)]&&(config['ordertype']=='market'?logHistory(_0x51af81(0xe6),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x51af81(0xe6),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x51af81(0x132)]&&logHistory(_0x51af81(0xe6),_0x51af81(0x16d)));}}function logHistory(_0x4fa2c1,_0xc8625a,_0x28b66e=''){const _0x1978e1=_0x1dfd83;let _0x4f4da8={'time':getTimeStamp(),'type':_0x4fa2c1,'event':_0xc8625a,'botname':config[_0x1978e1(0xd6)],'showname':config[_0x1978e1(0x9b)]};dbLogs[_0x1978e1(0x8c)](_0x1978e1(0x106))[_0x1978e1(0x18d)](_0x4f4da8)[_0x1978e1(0x87)]();if(_0x28b66e=='')_0x28b66e=_0xc8625a;proxyEmit(_0x1978e1(0x10f),{'log':_0x4f4da8,'summary':_0x28b66e}),process[_0x1978e1(0x135)]({'telegram':_0x4f4da8}),logging(''+_0x4f4da8[_0x1978e1(0x10f)]);}function emitHistory(_0xdcddf8={}){const _0x4097b1=_0x1dfd83;Object[_0x4097b1(0x136)](_0xdcddf8)[_0x4097b1(0x97)]==0x0&&(_0xdcddf8={'type':['order','event'],'event':'','page':0x1});if(_0xdcddf8['type'][_0x4097b1(0xa8)](_0x4097b1(0x10f)))_0xdcddf8[_0x4097b1(0xf4)][_0x4097b1(0xd4)](_0xdcddf8['type']['indexOf'](_0x4097b1(0x10f)),0x1,_0x4097b1(0xe6),_0x4097b1(0x172));if(dbLogs[_0x4097b1(0x187)](_0x4097b1(0x106))[_0x4097b1(0xbf)]()){let _0x2e8519=dbLogs[_0x4097b1(0x8c)](_0x4097b1(0x106))['filter'](_0xad1742=>{const _0x106346=_0x4097b1;if(_0xdcddf8['type'][_0x106346(0x97)]==0x0)return![];else return _0xdcddf8[_0x106346(0xf4)][_0x106346(0xa8)](_0xad1742[_0x106346(0xf4)]);})[_0x4097b1(0x183)](_0x40f047=>{const _0x123cfe=_0x4097b1;if(_0xdcddf8['event']=='')return!![];else return _0x40f047[_0x123cfe(0x10f)][_0x123cfe(0xee)]()[_0x123cfe(0xa8)](_0xdcddf8['event'][_0x123cfe(0xee)]());})[_0x4097b1(0xdf)](_0x4097b1(0x170)),_0x77d94f=_0x2e8519[_0x4097b1(0xbf)]()[_0x4097b1(0x97)];_0x2e8519=_0x2e8519['reverse']()[_0x4097b1(0x15b)]((_0xdcddf8[_0x4097b1(0x18a)]-0x1)*logPageSize,_0xdcddf8[_0x4097b1(0x18a)]*logPageSize-0x1)[_0x4097b1(0x120)]()[_0x4097b1(0xbf)](),proxyEmit(_0x4097b1(0x157),{'logs':_0x2e8519,'total':_0x77d94f});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x135f47){const _0x3487ad=_0x1dfd83,_0x3b60a9=new Date()[_0x3487ad(0xc3)]();if(!lastBotPause)lastBotPause=new Date()[_0x3487ad(0xc3)](),consecutivePauses=0x1;else{if(_0x3b60a9-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x3487ad(0x135)]({'stop':_0x3487ad(0xcb)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x3487ad(0xc3)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x3487ad(0xe6),_0x3487ad(0xcd)+consecutivePauses+')'),await sleep(_0x135f47),botPaused=![],reset();}}async function handleError(_0x52cf57,_0x4fe999,_0x1862d4=''){const _0x362597=_0x1dfd83;if(_0x52cf57['toString']()['includes']('DDoSProtection'))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x98)),await pauseBot(pauseBotInterval);else{if(_0x52cf57[_0x362597(0x189)]()[_0x362597(0xa8)]('ExchangeNotAvailable'))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0xca)),await pauseBot(pauseBotInterval);else{if(_0x52cf57[_0x362597(0x189)]()[_0x362597(0xa8)](_0x362597(0x171)))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0xf7)),await pauseBot(pauseBotInterval);else{if(_0x52cf57['toString']()['includes'](_0x362597(0xdd)))logHistory('error',_0x4fe999+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory('error',_0x362597(0xba)),process[_0x362597(0x135)]({'stop':_0x362597(0x105)});else{if(_0x52cf57[_0x362597(0x189)]()['includes'](_0x362597(0x12e)))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x102)),logHistory(_0x362597(0xe6),_0x362597(0xba)),process[_0x362597(0x135)]({'stop':'kill'});else{if(_0x52cf57[_0x362597(0x189)]()[_0x362597(0xa8)](_0x362597(0x146)))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x8f)),logHistory('error',_0x362597(0xba)),process[_0x362597(0x135)]({'stop':_0x362597(0x105)});else{if(_0x52cf57[_0x362597(0x189)]()['includes'](_0x362597(0xeb)))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x16c)),logHistory(_0x362597(0xe6),_0x362597(0xba)),process[_0x362597(0x135)]({'stop':_0x362597(0x105)});else{if(_0x52cf57[_0x362597(0x189)]()[_0x362597(0xa8)](_0x362597(0x12d)))logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x16f)),await pauseBot(pauseBotInterval),process[_0x362597(0x135)]({'stop':_0x362597(0xcb)});else _0x52cf57[_0x362597(0x189)]()[_0x362597(0xa8)]('InsufficientFunds')?logHistory(_0x362597(0xe6),_0x4fe999+_0x362597(0x178)):(logHistory('error',_0x4fe999+_0x362597(0xf8)),logging(_0x4fe999+_0x362597(0xde),_0x52cf57),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0xa86d07,_0x212d81){const _0x2aa86d=_0x1dfd83;return parseFloat(_0xa86d07[_0x2aa86d(0xb1)](_0x212d81));}function logging(_0x17279b,_0x388921=''){const _0x350e7b=_0x1dfd83;if(config['showname'])console[_0x350e7b(0x129)](getTimeStamp()+':\x20'+config['botname']+_0x350e7b(0x141)+_0x17279b,_0x388921);else console['log'](getTimeStamp()+_0x350e7b(0x168)+botID+_0x350e7b(0x141)+_0x17279b,_0x388921);}function getServerTime(){const _0x5d3fea=_0x1dfd83,_0x171714=new Date();return _0x171714[_0x5d3fea(0xbc)]()+'/'+(_0x171714[_0x5d3fea(0xd8)]()+0x1)[_0x5d3fea(0x189)]()[_0x5d3fea(0x119)](0x2,'0')+'/'+_0x171714[_0x5d3fea(0x192)]()[_0x5d3fea(0x189)]()['padStart'](0x2,'0')+'\x20'+_0x171714['getHours']()['toString']()[_0x5d3fea(0x119)](0x2,'0')+':'+_0x171714['getMinutes']()['toString']()[_0x5d3fea(0x119)](0x2,'0')+':'+_0x171714[_0x5d3fea(0xa0)]()[_0x5d3fea(0x189)]()[_0x5d3fea(0x119)](0x2,'0');}function getTimeStamp(){const _0x528860=_0x1dfd83,_0x349a84=shiftedTime();return _0x349a84[_0x528860(0xbc)]()+'/'+(_0x349a84[_0x528860(0xd8)]()+0x1)[_0x528860(0x189)]()['padStart'](0x2,'0')+'/'+_0x349a84[_0x528860(0x192)]()['toString']()[_0x528860(0x119)](0x2,'0')+'\x20'+_0x349a84[_0x528860(0xc4)]()[_0x528860(0x189)]()[_0x528860(0x119)](0x2,'0')+':'+_0x349a84[_0x528860(0xd1)]()['toString']()[_0x528860(0x119)](0x2,'0')+':'+_0x349a84[_0x528860(0xa0)]()[_0x528860(0x189)]()[_0x528860(0x119)](0x2,'0');}function getDate(){const _0x1f4811=_0x1dfd83,_0x2061f5=shiftedTime();return _0x2061f5[_0x1f4811(0xbc)]()+'/'+(_0x2061f5['getMonth']()+0x1)[_0x1f4811(0x189)]()[_0x1f4811(0x119)](0x2,'0')+'/'+_0x2061f5[_0x1f4811(0x192)]()[_0x1f4811(0x189)]()[_0x1f4811(0x119)](0x2,'0');}function getHour(){const _0x10f0fa=_0x1dfd83,_0x5a83bb=shiftedTime();return _0x5a83bb['getHours']()[_0x10f0fa(0x189)]()[_0x10f0fa(0x119)](0x2,'0');}function sleep(_0x2e709c){return new Promise(_0x1eb3a7=>setTimeout(_0x1eb3a7,_0x2e709c));}function shiftedTime(){const _0x2c9dac=_0x1dfd83,_0x2b2357=new Date();let _0xa8cb98=_0x2b2357;if(config&&config[_0x2c9dac(0x16b)]!==0x0)_0xa8cb98=fns['add'](_0x2b2357,{'hours':config[_0x2c9dac(0x16b)]});return _0xa8cb98;}