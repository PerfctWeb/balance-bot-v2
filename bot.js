const _0x5f1e29=_0x5abf;(function(_0x4de53e,_0x14d502){const _0x3a3ad1=_0x5abf,_0x368c3d=_0x4de53e();while(!![]){try{const _0x4dc861=parseInt(_0x3a3ad1(0x2bb))/0x1+parseInt(_0x3a3ad1(0x2ad))/0x2+parseInt(_0x3a3ad1(0x291))/0x3+-parseInt(_0x3a3ad1(0x187))/0x4+parseInt(_0x3a3ad1(0x13a))/0x5*(-parseInt(_0x3a3ad1(0x23c))/0x6)+parseInt(_0x3a3ad1(0x296))/0x7*(-parseInt(_0x3a3ad1(0x22e))/0x8)+parseInt(_0x3a3ad1(0x181))/0x9;if(_0x4dc861===_0x14d502)break;else _0x368c3d['push'](_0x368c3d['shift']());}catch(_0xa862c5){_0x368c3d['push'](_0x368c3d['shift']());}}}(_0x25cc,0xaa0fc));const _0x1f6822=function(){let _0x24b241=!![];return function(_0xa3ff38,_0x334c41){const _0x302974=_0x24b241?function(){const _0x406670=_0x5abf;if(_0x334c41){const _0x2bc53d=_0x334c41[_0x406670(0x190)](_0xa3ff38,arguments);return _0x334c41=null,_0x2bc53d;}}:function(){};return _0x24b241=![],_0x302974;};}(),_0x492c26=_0x1f6822(this,function(){const _0x40e994=_0x5abf;return _0x492c26['toString']()[_0x40e994(0x1b7)]('(((.+)+)+)+$')[_0x40e994(0x231)]()['constructor'](_0x492c26)[_0x40e994(0x1b7)](_0x40e994(0x1b3));});_0x492c26();'use strict';const ccxt=require(_0x5f1e29(0x29c)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x5f1e29(0x1fe)),Crypt=require(_0x5f1e29(0x18a))[_0x5f1e29(0x14b)],util=require(_0x5f1e29(0x282)),argv=require('yargs/yargs')(process[_0x5f1e29(0x192)][_0x5f1e29(0x199)](0x2))[_0x5f1e29(0x192)],path=require('path'),axios=require(_0x5f1e29(0x240));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0x5f1e29(0x286),_0x5f1e29(0x1e6),_0x5f1e29(0x1e3),'USDC',_0x5f1e29(0x274)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x5f1e29(0x26c)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20>\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x5f1e29(0x2a9),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;function _0x5abf(_0xbbd044,_0x113e00){const _0x5a02cd=_0x25cc();return _0x5abf=function(_0x492c26,_0x1f6822){_0x492c26=_0x492c26-0x122;let _0x25cc03=_0x5a02cd[_0x492c26];return _0x25cc03;},_0x5abf(_0xbbd044,_0x113e00);}let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x5f1e29(0x15e)],environment=require(_0x5f1e29(0x244))[_0x5f1e29(0x2ce)]||_0x5f1e29(0x2a1),botID=process[_0x5f1e29(0x192)][0x2]||_0x5f1e29(0x28d),pattern=/^[0-9]{3}$/;!pattern[_0x5f1e29(0x124)](botID)&&(console[_0x5f1e29(0x2c5)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x5f1e29(0x1be),logspath=userID?_0x5f1e29(0x1d5)+userID+'/':_0x5f1e29(0x1d5),loggerfile=fs['createWriteStream'](logspath+_0x5f1e29(0x26a),{'flags':'a'});!fs[_0x5f1e29(0x169)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](logspath)&&fs[_0x5f1e29(0x2c1)](logspath);const configfile=configpath+_0x5f1e29(0x152)+botID+'-config.json',logfile=configpath+_0x5f1e29(0x152)+botID+_0x5f1e29(0x16b),performancefile=configpath+_0x5f1e29(0x152)+botID+_0x5f1e29(0x196),coinresultsfile=configpath+_0x5f1e29(0x152)+botID+_0x5f1e29(0x258),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x5f1e29(0x1e4)]({'logs':[],'version':serverversion})[_0x5f1e29(0x193)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5f1e29(0x1e4)]({'data':[],'version':serverversion})[_0x5f1e29(0x193)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5f1e29(0x1e4)]({'bot':[],'version':serverversion})[_0x5f1e29(0x193)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5f1e29(0x1e4)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x5f1e29(0x163),'rsaStandard':_0x5f1e29(0x2b5)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x149fc7=>{const _0x28db43=_0x5f1e29;console[_0x28db43(0x2c5)](_0x149fc7);},'simple':_0x57d6a6=>{const _0x803531=_0x5f1e29;console[_0x803531(0x2c5)](_0x57d6a6),loggerfile[_0x803531(0x193)](util['format'](_0x57d6a6)+'\x0a');},'full':async(_0x29adbd,_0x540bee='')=>{const _0x43eba9=_0x5f1e29;let _0x5d854c;if(config[_0x43eba9(0x14a)])_0x5d854c=getTimeStamp()+':\x20'+config[_0x43eba9(0x1c8)]+'\x20>\x20'+_0x29adbd;else _0x5d854c=getTimeStamp()+_0x43eba9(0x1aa)+botID+_0x43eba9(0x2bf)+_0x29adbd;console[_0x43eba9(0x2c5)](_0x5d854c),loggerfile[_0x43eba9(0x193)](util['format'](_0x5d854c)+'\x0a'),_0x540bee&&(console[_0x43eba9(0x2c5)](_0x540bee),loggerfile['write'](util[_0x43eba9(0x242)](_0x540bee)+'\x0a'));},'debug':async(_0x172c4f,_0x486aca='')=>{const _0x298aa1=_0x5f1e29;let _0x47139;if(config[_0x298aa1(0x14a)])_0x47139=getTimeStamp()+':\x20'+config[_0x298aa1(0x1c8)]+_0x298aa1(0x178)+_0x172c4f;else _0x47139=getTimeStamp()+_0x298aa1(0x1aa)+botID+_0x298aa1(0x178)+_0x172c4f;if(debugging)console['log'](_0x47139);loggerfile[_0x298aa1(0x193)](util[_0x298aa1(0x242)](_0x47139)+'\x0a');if(_0x486aca){if(debugging)console['log'](_0x486aca);loggerfile[_0x298aa1(0x193)](util[_0x298aa1(0x242)](_0x486aca)+'\x0a');}}};process['on']('uncaughtException',function(_0x4e2b38){handleError(_0x4e2b38,'uncaughtException');});settings[_0x5f1e29(0x2a2)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);settings[_0x5f1e29(0x227)]!=config['onepagemode']&&updateOnepagemode(settings[_0x5f1e29(0x227)]);(settings[_0x5f1e29(0x183)]&&!config[_0x5f1e29(0x183)]||!settings[_0x5f1e29(0x183)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x5f1e29(0x183)]);process[_0x5f1e29(0x1ce)]({'started':_0x5f1e29(0x1a3)},_0x1c28d9=>{}),initializeProcessListeners();function proxyEmit(_0xba9c24,_0x1c51e6=null){const _0x18736c=_0x5f1e29;process[_0x18736c(0x1ce)]({'function':_0xba9c24,'args':_0x1c51e6},_0x2812c7=>{});}function initializeProcessListeners(){const _0x1ffcdb=_0x5f1e29;process['on'](_0x1ffcdb(0x22f),_0x55149a=>{const _0x14a880=_0x1ffcdb;switch(Object[_0x14a880(0x204)](_0x55149a)[0x0]){case'timeshift':_0x55149a['timeshift']!=undefined&&(settings['timeshift']=_0x55149a['timeshift'],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x55149a['onepagemode']!=undefined&&(settings['onepagemode']=_0x55149a[_0x14a880(0x227)],updateOnepagemode(settings[_0x14a880(0x227)]));break;case _0x14a880(0x183):_0x55149a[_0x14a880(0x183)]!=undefined&&(settings['marketcapApi']=_0x55149a[_0x14a880(0x183)],updateMarketcapApi(settings['marketcapApi']));break;case _0x14a880(0x2c3):_0x55149a[_0x14a880(0x2c3)]!=undefined&&(bots=JSON[_0x14a880(0x12d)](_0x55149a['bots']),proxyEmit('bots',bots));break;case _0x14a880(0x23d):switch(_0x55149a[_0x14a880(0x23d)]){case _0x14a880(0x21d):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x55149a['args']);break;case _0x14a880(0x1a9):deleteHistoryAlerts(_0x55149a[_0x14a880(0x219)]);break;case _0x14a880(0x2c4):getPortfolio(_0x55149a[_0x14a880(0x219)]);break;case _0x14a880(0x157):storeConfiguration(_0x55149a[_0x14a880(0x219)]);break;case _0x14a880(0x141):storeHeadless(_0x55149a[_0x14a880(0x219)]);break;case _0x14a880(0x288):storeFiat(_0x55149a['args']);break;case'resetHistory':resetHistory();break;case _0x14a880(0x255):getStartingBalances(getNormalizedPerformance());break;case _0x14a880(0x236):placeOrder(_0x55149a[_0x14a880(0x219)]);break;case'cancelLoading':cancelLoading();break;case _0x14a880(0x289):showConfig();break;case _0x14a880(0x195):sendMetricsTelegram();break;case _0x14a880(0x290):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x4a8ddf=![]){const _0x152b84=_0x5f1e29;logger[_0x152b84(0x2a7)]('Reset\x20|\x20'+(_0x4a8ddf?_0x152b84(0x22c):_0x152b84(0x2a6))+_0x152b84(0x1f8)+config[_0x152b84(0x2a8)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4a8ddf)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x152b84(0x201)]!=''&&config[_0x152b84(0x201)]!=_0x152b84(0x2c2)){loadingProgress=0x0;_0x4a8ddf&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![]);const _0x5ae0ea=await getCoins();[currentCoins,currentCoinsAll]=_0x5ae0ea,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x152b84(0x2a7)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x152b84(0x1c1)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x419beb=![]){const _0x351d88=_0x5f1e29;logger[_0x351d88(0x2a7)](_0x351d88(0x251)+(_0x419beb?_0x351d88(0x1ba):_0x351d88(0x294))+_0x351d88(0x171)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x419beb){getBalances();return;}coinsLoaded=![];if(config[_0x351d88(0x201)]!=''&&config[_0x351d88(0x201)]!=_0x351d88(0x2c2)){loadingProgress=0x1;const _0x471a05=await getCoins();[currentCoins,currentCoinsAll]=_0x471a05,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x351d88(0x147)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x351d88(0x1c1)]==0x0&&allOpenOrders[_0x351d88(0x1c1)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3d5a08){const _0x19acbc=_0x5f1e29;let _0x1bb009=![];if(_0x3d5a08)_0x1bb009=!![];let _0x1e996b;_0x1bb009?_0x1e996b=_0x3d5a08[_0x19acbc(0x225)](_0x4b96a0=>_0x4b96a0[_0x19acbc(0x285)]):_0x1e996b=currentCoinsAll[_0x19acbc(0x225)](_0x37d6eb=>_0x37d6eb['coin']);if(!config['marketcapApi']||!_0x1bb009&&!config[_0x19acbc(0x2b0)]||_0x1e996b['length']==0x0)return;let _0x460693=null;try{_0x460693=await axios[_0x19acbc(0x128)](_0x19acbc(0x1d4),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x19acbc(0x183)]},'params':{'symbol':_0x1e996b['toString']()}});}catch(_0x35d1b5){_0x460693=null,_0x35d1b5[_0x19acbc(0x231)]()['includes'](_0x19acbc(0x287))?(config[_0x19acbc(0x183)]=![],updateConfig(),proxyEmit(_0x19acbc(0x1a4),emittedConfiguration()),logHistory(_0x19acbc(0x21a),_0x19acbc(0x2af))):(logHistory(_0x19acbc(0x21a),'CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20'+schedulerInterval/(0x3c*0x3e8)+_0x19acbc(0x2a9)),logger['debug']('Error\x20details:',_0x35d1b5['toString']()+_0x19acbc(0x1d9)+_0x35d1b5['code']));}if(_0x460693){let _0x1a1583=0x0;const _0x3cdc32=_0x460693[_0x19acbc(0x2b1)];_0x1e996b[_0x19acbc(0x136)](_0x568081=>{const _0x3a135f=_0x19acbc;if(_0x3cdc32[_0x3a135f(0x2b1)][_0x568081][0x0])_0x1a1583+=_0x3cdc32[_0x3a135f(0x2b1)][_0x568081][0x0][_0x3a135f(0x207)][_0x3a135f(0x21f)][_0x3a135f(0x21c)];}),_0x1e996b[_0x19acbc(0x136)](_0x2b5244=>{const _0x45cdad=_0x19acbc,_0x18d912=_0x3cdc32['data'][_0x2b5244][0x0]?_0x3cdc32[_0x45cdad(0x2b1)][_0x2b5244][0x0][_0x45cdad(0x207)][_0x45cdad(0x21f)]['market_cap']:0x0;if(_0x1bb009){const _0x2c1cb2=_0x3d5a08[_0x45cdad(0x22b)](_0x58c765=>_0x58c765[_0x45cdad(0x285)]==_0x2b5244);_0x2c1cb2&&(_0x2c1cb2[_0x45cdad(0x186)]=_0x18d912);}else{const _0x970c39=currentCoins[_0x45cdad(0x22b)](_0x5652fa=>_0x5652fa['coin']==_0x2b5244);_0x970c39&&(_0x970c39[_0x45cdad(0x186)]=_0x18d912);const _0x1376c1=currentCoinsAll[_0x45cdad(0x22b)](_0x874636=>_0x874636['coin']==_0x2b5244);_0x1376c1&&(_0x1376c1[_0x45cdad(0x186)]=_0x18d912);}}),!_0x1bb009&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x265f36=_0x5f1e29,_0x5a1f45=0x2;let _0xe2b794=0x0,_0x36fd68=0x0,_0x1b851d=0x0,_0x4a933d=0x0,_0x11f793=0x0;config['portfolio'][_0x265f36(0x136)](_0x2ea942=>{const _0x44c296=_0x265f36;if(!_0x2ea942[_0x44c296(0x15a)]){_0x1b851d++,_0xe2b794+=_0x2ea942['slider'];if(_0x2ea942[_0x44c296(0x1ee)]===-0x1){_0xe2b794++;const _0x1adac8=currentCoinsAll[_0x44c296(0x22b)](_0x40d57f=>_0x40d57f[_0x44c296(0x285)]==_0x2ea942[_0x44c296(0x285)]);_0x1adac8&&(_0x4a933d+=_0x1adac8[_0x44c296(0x186)],_0x11f793+=Math['sqrt'](_0x1adac8[_0x44c296(0x186)]));}if(_0x2ea942[_0x44c296(0x1ee)]!==-0x1)_0x36fd68++;}});let _0x375c96;const _0x283c63=0x64-_0xe2b794,_0x5ed789=_0x1b851d-_0x36fd68;_0x375c96=_0x5ed789===0x0?_0xe2b794:Math[_0x265f36(0x26e)](0x64,_0xe2b794),config[_0x265f36(0x2cf)]['forEach'](_0xdb4965=>{const _0x337940=_0x265f36,_0x16c683=currentCoinsAll[_0x337940(0x22b)](_0x59c303=>_0x59c303['coin']==_0xdb4965[_0x337940(0x285)]);_0x16c683&&(_0xdb4965[_0x337940(0x186)]=_0x16c683[_0x337940(0x186)]);if(!_0xdb4965[_0x337940(0x15a)]){if(_0x375c96<=0x64){if(_0xdb4965[_0x337940(0x1ee)]===-0x1){if(_0x4a933d!==0x0&&config[_0x337940(0x2b0)]){if(_0x16c683){if(config[_0x337940(0x2b0)]==_0x337940(0x186))_0xdb4965['distribution']=(_0x283c63/(_0x4a933d/_0x16c683['marketcap']))[_0x337940(0x1ed)](_0x5a1f45);else config[_0x337940(0x2b0)]==_0x337940(0x146)&&(_0xdb4965[_0x337940(0x19b)]=(_0x283c63/(_0x11f793/Math[_0x337940(0x1fc)](_0x16c683['marketcap'])))['toFixed'](_0x5a1f45));}}}}}}),updateConfig();}function updateConfig(){const _0x593a00=_0x5f1e29;let _0x55d9e8=dbConfig[_0x593a00(0x128)]('bot')[_0x593a00(0x22b)]({'botID':botID})[_0x593a00(0x1eb)]();_0x55d9e8&&dbConfig[_0x593a00(0x128)](_0x593a00(0x145))[_0x593a00(0x22b)]({'botID':botID})['assign'](config)[_0x593a00(0x193)]();}function logMemory(){const _0x29b57e=_0x5f1e29;if(environment!=_0x29b57e(0x1ef))return;const _0x180d83=process['memoryUsage']()['heapUsed']/0x400/0x400;logger[_0x29b57e(0x2a7)](_0x29b57e(0x1f3)+process[_0x29b57e(0x137)]+_0x29b57e(0x144)+formatResult(_0x180d83,0x1)+'\x20MB');}async function startScheduler(){const _0x44b821=_0x5f1e29,_0x58a90c=shiftedTime()[_0x44b821(0x18e)]();getMarketCap(),_0x58a90c==0x1&&logMemory(),(_0x58a90c==0x2||_0x58a90c==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x2481fa=![]){const _0xc1974a=_0x5f1e29;logger[_0xc1974a(0x2a7)](_0xc1974a(0x19d));if(!_0x2481fa)while(lockOrders!=ORDERS[_0xc1974a(0x1c0)]||coolingDown){await sleep(0x3e8);}process[_0xc1974a(0x1ce)]({'stop':_0xc1974a(0x17a)},_0x1cb452=>{});}async function initExchange(_0x1b3424=config['exchange'],_0x5b8059=config[_0x5f1e29(0x201)],_0x3d421d=config[_0x5f1e29(0x184)],_0x900521=config['apiPassword']){const _0x3940eb=_0x5f1e29;if(exchange){logger['debug'](_0x3940eb(0x2a5));return;}logger['debug']('Initializing\x20exchange');!supportedExchanges()['includes'](_0x1b3424)&&(logHistory(_0x3940eb(0x21a),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x1b3424+_0x3940eb(0x1bd)),killBot());const _0x356f83=ccxt[_0x3940eb(0x16e)][_0x1b3424[_0x3940eb(0x18f)]()];exchange=new _0x356f83({'apiKey':_0x5b8059,'secret':_0x3d421d,'options':{'defaultType':_0x3940eb(0x17d)}});if(_0x900521)exchange['password']=_0x900521;}function updateExchange(_0x493dd3,_0x4182ed,_0x49d9f3=null){const _0x10dd5e=_0x5f1e29;exchange[_0x10dd5e(0x201)]=_0x493dd3,exchange[_0x10dd5e(0x184)]=_0x4182ed,exchange[_0x10dd5e(0x1bb)]=_0x49d9f3,logger[_0x10dd5e(0x2a7)](_0x10dd5e(0x24d));}function setStableCoins(){const _0x5a5dcc=_0x5f1e29;let _0x48c757=config[_0x5a5dcc(0x278)]==_0x5a5dcc(0x208)?_0x5a5dcc(0x208):config[_0x5a5dcc(0x278)]==_0x5a5dcc(0x20b)?'PAXG':'BTC',_0x577300=!allSymbols[_0x5a5dcc(0x27f)](_0x48c757+'/USD')?_0x5a5dcc(0x1e3):'USD',_0x539c2a=!allSymbols[_0x5a5dcc(0x27f)](_0x48c757+'/EUR')?_0x577300:'EUR';stablecoins={'eur':{'coin':''+_0x48c757+_0x539c2a,'symbol':_0x48c757+'/'+_0x539c2a},'usd':{'coin':''+_0x48c757+_0x577300,'symbol':_0x48c757+'/'+_0x577300}};}async function initwsCcxt(){const _0x19106c=_0x5f1e29;initCycle++;const _0x2e8a5c=initCycle;let _0x6d96a6=[];config['portfolio']['forEach'](_0x14f888=>{const _0x42adab=_0x5abf;if(!_0x14f888[_0x42adab(0x15a)]&&_0x14f888['coin']!=config[_0x42adab(0x278)])_0x6d96a6['push'](_0x14f888[_0x42adab(0x1d1)]);});if(!_0x6d96a6[_0x19106c(0x27f)](stablecoins[_0x19106c(0x266)]['symbol']))_0x6d96a6['push'](stablecoins[_0x19106c(0x266)][_0x19106c(0x1d1)]);if(!_0x6d96a6[_0x19106c(0x27f)](stablecoins[_0x19106c(0x214)][_0x19106c(0x1d1)]))_0x6d96a6[_0x19106c(0x148)](stablecoins['usd'][_0x19106c(0x1d1)]);if(config['exchange'][_0x19106c(0x270)](_0x19106c(0x198))&&config[_0x19106c(0x278)]!=_0x19106c(0x20b)){if(!_0x6d96a6[_0x19106c(0x27f)]('BNB/'+config[_0x19106c(0x278)]))_0x6d96a6['push'](_0x19106c(0x167)+config[_0x19106c(0x278)]);}loadCoins(_0x6d96a6),_0x6d96a6=validateSymbols(_0x6d96a6);const _0x395636=async _0x3210c0=>{const _0x79799e=_0x19106c;let _0x341e1d;try{const _0x2a84da=await getTickers(_0x3210c0);Object[_0x79799e(0x197)](_0x2a84da)[_0x79799e(0x136)](_0x43101f=>{const _0x443ea6=_0x79799e;_0x341e1d=_0x43101f[0x1][_0x443ea6(0x1d1)],gTicker[noslash(_0x341e1d)]=_0x43101f[0x1][_0x443ea6(0x299)],gChange[_0x341e1d]=_0x43101f[0x1]['percentage'];});}catch(_0x3372f6){await handleError(_0x3372f6,_0x79799e(0x19c),_0x341e1d);}},_0x1af13c=async _0x283354=>{const _0x5a7d80=_0x19106c;while(initCycle==_0x2e8a5c){if(!botPaused)try{const _0x10cc6a=await exchange[_0x5a7d80(0x241)](_0x283354);gTicker[noslash(_0x10cc6a[0x0][_0x5a7d80(0x1d1)])]=_0x10cc6a[0x0][_0x5a7d80(0x2d5)];}catch(_0x77aab9){if(!exchangeStopped)await handleError(_0x77aab9,'watchTrades()',_0x283354);}else await sleep(0x64);}},_0x11725b=async _0x3ae105=>{const _0x553480=_0x19106c;while(initCycle==_0x2e8a5c){if(!botPaused)try{const _0x4c2c78=await exchange[_0x553480(0x230)](_0x3ae105),_0x7059fa=_0x4c2c78['pop']();gTicker[noslash(_0x7059fa[_0x553480(0x1d1)])]=_0x7059fa['price'];}catch(_0x327f21){if(!exchangeStopped)await handleError(_0x327f21,_0x553480(0x1da),_0x3ae105[_0x553480(0x231)]());}else await sleep(0x64);}},_0x364721=async _0x5edcd2=>{const _0x116410=_0x19106c;while(initCycle==_0x2e8a5c){if(!botPaused){let _0x4cf9ef;try{await sleep(0x3c*0x3e8);const _0x12380e=await getTickers(_0x5edcd2);Object[_0x116410(0x197)](_0x12380e)[_0x116410(0x136)](_0x38eb79=>{const _0x458c20=_0x116410;_0x4cf9ef=_0x38eb79[0x1][_0x458c20(0x1d1)],gChange[_0x4cf9ef]=_0x38eb79[0x1][_0x458c20(0x2cb)];});}catch(_0x3e6372){if(!exchangeStopped)await handleError(_0x3e6372,'fetchTickers()',_0x4cf9ef);}}else await sleep(0x64);}},_0x4063d6=async _0x1f682c=>{const _0x1e9ea4=_0x19106c;while(initCycle==_0x2e8a5c){if(!botPaused)try{const _0x135421=await exchange['watchOrders'](_0x1f682c);initCycle==_0x2e8a5c&&_0x135421['forEach'](_0x1935eb=>{updateNumberCoinsCcxt(_0x1935eb);});}catch(_0x2bc0b7){if(!exchangeStopped)await handleError(_0x2bc0b7,_0x1e9ea4(0x221));}else await sleep(0x64);}};_0x395636(_0x6d96a6),_0x364721(_0x6d96a6),exchange['has'][_0x19106c(0x230)]&&!(config[_0x19106c(0x2a8)]==_0x19106c(0x1f6)&&_0x6d96a6[_0x19106c(0x1c1)]>0xa)?_0x11725b(_0x6d96a6):_0x6d96a6[_0x19106c(0x136)](_0x16dc2c=>{_0x1af13c(_0x16dc2c);}),_0x6d96a6[_0x19106c(0x136)](_0x21ed6e=>{_0x4063d6(_0x21ed6e);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4f970d){const _0x16406e=_0x5f1e29;let _0x5ae063={};try{if(config[_0x16406e(0x2a8)]!=_0x16406e(0x2b9))_0x5ae063=await exchange[_0x16406e(0x223)](_0x4f970d);else for(const _0x414b4b of _0x4f970d){const _0x4ff1b6=await exchange[_0x16406e(0x2c0)](_0x414b4b);_0x5ae063[_0x414b4b]=_0x4ff1b6;}return _0x5ae063;}catch(_0x3b480b){throw _0x3b480b;}}function setBlockTransactionDetection(_0xa0c02d){const _0x3ccec5=_0x5f1e29;blockTransactionDetection=_0xa0c02d,logger[_0x3ccec5(0x2a7)](_0x3ccec5(0x1ad)+blockTransactionDetection);}async function detectLiquidityChange(_0x28d84f=0x0){const _0x2d189d=_0x5f1e29;transactionDetectionOngoing=!![];try{const _0x5c8232=await getCoins(_0x28d84f),[_0x2993cc,_0x52276a]=_0x5c8232;let _0x39940d=[];currentCoins[_0x2d189d(0x136)](_0x58f716=>{const _0x1cab34=_0x2d189d,_0x498df7=_0x2993cc[_0x1cab34(0x22b)](_0x17778e=>_0x17778e[_0x1cab34(0x285)]==_0x58f716[_0x1cab34(0x285)]);if(_0x498df7){if(_0x58f716[_0x1cab34(0x1df)]!=_0x498df7[_0x1cab34(0x1df)]){let _0x3cc6b2;if(_0x58f716['coin']!=config[_0x1cab34(0x278)]){const _0x432c6b=gTicker[noslash(_0x58f716['symbol'])];_0x3cc6b2=_0x58f716[_0x1cab34(0x158)]?0x1/_0x432c6b:_0x432c6b;}else _0x3cc6b2=0x1;_0x39940d['push']({'coin':_0x58f716[_0x1cab34(0x285)],'symbol':_0x58f716['symbol'],'price':_0x3cc6b2,'number':Number(formatResult(_0x498df7[_0x1cab34(0x1df)]-_0x58f716[_0x1cab34(0x1df)],0x8)),'basecoinvalue':_0x3cc6b2*(_0x498df7[_0x1cab34(0x1df)]-_0x58f716[_0x1cab34(0x1df)])});}}});if(_0x39940d[_0x2d189d(0x1c1)]>0x0&&!blockTransactionDetection)for(const _0x180034 of _0x39940d){if(config[_0x2d189d(0x249)]){logger[_0x2d189d(0x2a7)](_0x2d189d(0x173)+_0x180034['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees['highest']);if(lastFees[_0x2d189d(0x20d)]==0x0||Math[_0x2d189d(0x206)](_0x180034[_0x2d189d(0x1a6)])>lastFees[_0x2d189d(0x20d)]*1.2){if(config['autoliquidity']==_0x2d189d(0x1c2)){delete _0x180034['symbol'],delete _0x180034[_0x2d189d(0x1a6)];let _0x346a4a=[],_0x1753b8=[...config['liquidity']]||[],_0x3b78e9=config['liquidity'];_0x1753b8['sort']((_0x28ee17,_0x241134)=>_0x28ee17['date']>_0x241134[_0x2d189d(0x202)]?-0x1:_0x241134[_0x2d189d(0x202)]>_0x28ee17[_0x2d189d(0x202)]?0x1:0x0);const _0x5ab0b0=getDate();if(_0x1753b8[0x0]){const _0x237dad=fns[_0x2d189d(0x12d)](_0x1753b8[0x0][_0x2d189d(0x202)],_0x2d189d(0x243),new Date()),_0x12d2ff=fns[_0x2d189d(0x12d)](_0x5ab0b0,_0x2d189d(0x243),new Date());if(fns['isEqual'](_0x237dad,_0x12d2ff)){_0x346a4a=_0x1753b8[0x0][_0x2d189d(0x210)];const _0x26aad5=_0x346a4a[_0x2d189d(0x22b)](_0x34a482=>_0x34a482['coin']==_0x180034['coin']);_0x26aad5?(_0x26aad5[_0x2d189d(0x1df)]+=_0x180034['number'],_0x26aad5['number']==0x0&&(_0x346a4a=_0x346a4a[_0x2d189d(0x28f)](_0xd6fa6=>{const _0x1556c6=_0x2d189d;return _0xd6fa6[_0x1556c6(0x285)]!=_0x180034[_0x1556c6(0x285)];}))):_0x346a4a[_0x2d189d(0x148)](_0x180034);const _0x4bbd52=_0x3b78e9[_0x2d189d(0x22b)](_0x36154a=>_0x36154a[_0x2d189d(0x202)]==_0x5ab0b0);_0x4bbd52[_0x2d189d(0x210)]=_0x346a4a;}else _0x3b78e9[_0x2d189d(0x148)]({'date':_0x5ab0b0,'changes':[_0x180034]});}const _0x551a87=_0x3b78e9[_0x2d189d(0x22b)](_0x5d55ab=>_0x5d55ab['date']==_0x5ab0b0);if(_0x551a87){let _0x4b55bd=!![];_0x551a87[_0x2d189d(0x210)]['forEach'](_0x256af8=>{const _0x30c6cd=_0x2d189d;if(_0x256af8[_0x30c6cd(0x1df)]!=0x0)_0x4b55bd=![];}),_0x4b55bd&&(_0x3b78e9=_0x3b78e9[_0x2d189d(0x28f)](_0x1c1464=>{const _0x255ca9=_0x2d189d;return _0x1c1464[_0x255ca9(0x202)]!=_0x5ab0b0;}));}let _0x1f265c=dbConfig[_0x2d189d(0x128)]('bot')[_0x2d189d(0x22b)]({'botID':botID})['value']();_0x1f265c&&(dbConfig['get'](_0x2d189d(0x145))[_0x2d189d(0x22b)]({'botID':botID})[_0x2d189d(0x1a7)]({'liquidity':_0x3b78e9})['write'](),config[_0x2d189d(0x18d)]=_0x3b78e9);logHistory('success',_0x2d189d(0x1af)+Math['abs'](_0x180034[_0x2d189d(0x1df)])+'\x20'+_0x180034[_0x2d189d(0x285)]+'\x20'+(_0x180034[_0x2d189d(0x1df)]>0x0?_0x2d189d(0x273):_0x2d189d(0x19f))+_0x2d189d(0x2b8)),proxyEmit(_0x2d189d(0x1a4),emittedConfiguration());const _0x1a0fa0=getNormalizedPerformance();emitPerformance(_0x1a0fa0),getStartingBalances(_0x1a0fa0),logger[_0x2d189d(0x2a7)](_0x2d189d(0x1d0));}else config[_0x2d189d(0x249)]=='switch-manual'&&(config[_0x2d189d(0x16f)]?(await storeHeadless({'headless':![]}),logHistory(_0x2d189d(0x17c),_0x2d189d(0x1af)+Math[_0x2d189d(0x206)](_0x180034[_0x2d189d(0x1df)])+'\x20'+_0x180034['coin']+'\x20'+(_0x180034[_0x2d189d(0x1df)]>0x0?_0x2d189d(0x273):_0x2d189d(0x19f))+'\x20-\x20bot\x20switched\x20to\x20manual\x20mode')):logger[_0x2d189d(0x2a7)](_0x2d189d(0x1af)+Math[_0x2d189d(0x206)](_0x180034[_0x2d189d(0x1df)])+'\x20'+_0x180034[_0x2d189d(0x285)]+'\x20'+(_0x180034[_0x2d189d(0x1df)]>0x0?_0x2d189d(0x273):_0x2d189d(0x19f))+'\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode'));}else logger[_0x2d189d(0x2a7)](_0x2d189d(0x263)+Math[_0x2d189d(0x206)](_0x180034[_0x2d189d(0x1df)])+'\x20'+_0x180034['coin']+'\x20'+(_0x180034[_0x2d189d(0x1df)]>0x0?_0x2d189d(0x273):'removed'));}else logger[_0x2d189d(0x2a7)](_0x2d189d(0x1af)+Math[_0x2d189d(0x206)](_0x180034[_0x2d189d(0x1df)])+'\x20'+_0x180034['coin']+'\x20'+(_0x180034[_0x2d189d(0x1df)]>0x0?_0x2d189d(0x273):'removed')+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x2993cc,currentCoinsAll=_0x52276a;}catch(_0x22c00b){if(!exchangeStopped)await handleError(_0x22c00b,_0x2d189d(0x159));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x526514=_0x5f1e29;logger[_0x526514(0x2a7)](_0x526514(0x259));try{markets=await exchange[_0x526514(0x15d)]();}catch(_0x558f18){logger[_0x526514(0x2a7)]('Error\x20in\x20loadSymbols():\x20'+_0x558f18['toString']());if(markets){}else logHistory(_0x526514(0x21a),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0x526514(0x27c)+loadCoinsRetryInterval/0xea60+_0x526514(0x1ac)),logger[_0x526514(0x2a7)]('Error\x20details:',_0x558f18),loading[_0x526514(0x180)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object['entries'](markets)[_0x526514(0x136)](_0x1760f9=>{const _0x444e11=_0x526514;_0x1760f9[0x1][_0x444e11(0x13d)]&&_0x1760f9[0x1][_0x444e11(0x17d)]&&allSymbols[_0x444e11(0x148)](_0x1760f9[0x0]);});}function validateSymbols(_0x3702fe){let _0x5c8f2a=[];return _0x3702fe['forEach'](_0x5263cc=>{const _0x392015=_0x5abf;!allSymbols[_0x392015(0x27f)](_0x5263cc)?logHistory(_0x392015(0x21a),_0x392015(0x133)+_0x5263cc+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x5c8f2a[_0x392015(0x148)](_0x5263cc);}),_0x5c8f2a;}async function initclient(){const _0x5e403c=_0x5f1e29;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x5e403c(0x2c6),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3cd00f=getNormalizedPerformance();emitPerformance(_0x3cd00f),getStartingBalances(_0x3cd00f);}async function toggleBotMode(){const _0x1a800a=_0x5f1e29;let _0x137e4e=dbConfig[_0x1a800a(0x128)](_0x1a800a(0x145))[_0x1a800a(0x22b)]({'botID':botID})[_0x1a800a(0x1eb)]();if(_0x137e4e){const _0x503f4d=!_0x137e4e['headless'];dbConfig[_0x1a800a(0x128)](_0x1a800a(0x145))[_0x1a800a(0x22b)]({'botID':botID})[_0x1a800a(0x1a7)]({'headless':_0x503f4d})[_0x1a800a(0x193)](),config[_0x1a800a(0x16f)]=_0x503f4d,proxyEmit(_0x1a800a(0x1a4),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4d73ca=_0x5f1e29;process[_0x4d73ca(0x1ce)]({'updatebotmanager':!![]},_0x5d1b06=>{}),logger['debug'](_0x4d73ca(0x170)+config['headless']);}async function loadCoins(_0x45ca1d){const _0x2df1be=_0x5f1e29;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xd8f1e0,_0x413195=0x0,_0x5dfe54=0x0;_0x45ca1d[_0x2df1be(0x136)](_0x587f48=>{const _0x16f165=_0x2df1be;loading[_0x16f165(0x200)][_0x16f165(0x148)](_0x587f48);}),loadingCanceled=![];let _0x3a2102=![];while(_0xd8f1e0!=_0x45ca1d['length']+maxLoadingProgress){_0xd8f1e0=loadingProgress,_0x45ca1d[_0x2df1be(0x136)](_0x35d9e8=>{const _0x24b61f=_0x2df1be;if(gTicker[noslash(_0x35d9e8)]){loading[_0x24b61f(0x200)]=loading[_0x24b61f(0x200)]['filter'](_0x13a968=>_0x13a968!=_0x35d9e8);if(!watchedSymbols['includes'](_0x35d9e8))watchedSymbols[_0x24b61f(0x148)](_0x35d9e8);_0xd8f1e0++;}}),loading[_0x2df1be(0x17e)]=Math['round'](_0xd8f1e0/(_0x45ca1d['length']+maxLoadingProgress)*0x64);loading[_0x2df1be(0x17e)]!=0x64&&(_0x5dfe54>0x1e*0x5&&(loading[_0x2df1be(0x2ba)]=!![],emitLoadingProgress()),_0x5dfe54>0x78*0x5&&!_0x3a2102&&(_0x3a2102=!![],logHistory(_0x2df1be(0x21a),_0x2df1be(0x19e)+loading[_0x2df1be(0x200)][_0x2df1be(0x275)](',\x20')+_0x2df1be(0x172)),logHistory('error',_0x2df1be(0x27c)+loadCoinsRetryInterval/0xea60+_0x2df1be(0x1ac)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x2df1be(0x180)]=!![],emitLoadingProgress();break;}else _0x413195!=loading[_0x2df1be(0x17e)]&&(_0x413195=loading['progress'],emitLoadingProgress()),_0x5dfe54++,await sleep(0xc8);}_0xd8f1e0==_0x45ca1d[_0x2df1be(0x1c1)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x2df1be(0x1ff),'live':_0x2df1be(0x1a3)},_0x4fd983=>{}),_0x3a2102&&logHistory(_0x2df1be(0x17c),_0x2df1be(0x248)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1cc58e=_0x5f1e29;proxyEmit(_0x1cc58e(0x1a4),{...emittedConfiguration(),'configstate':_0x1cc58e(0x295)});}function emitLoadingProgress(){const _0x6cebb5=_0x5f1e29;proxyEmit(_0x6cebb5(0x135),loading);}async function getFiat(){const _0x55bd13=_0x5f1e29;let _0xc8820d=gTicker[stablecoins[_0x55bd13(0x266)]['coin']],_0x418c21=gTicker[stablecoins[_0x55bd13(0x214)]['coin']];return{'eur':Number(_0xc8820d),'usd':Number(_0x418c21)};}function capitalize(_0x1cad6a){const _0x4b6a8c=_0x5f1e29;return _0x1cad6a['substring'](0x0,0x1)[_0x4b6a8c(0x2cd)]()+_0x1cad6a[_0x4b6a8c(0x1c3)](0x1);}function supportedExchanges(){const _0x3cd50e=_0x5f1e29,_0x416c4e=['ws',_0x3cd50e(0x223),_0x3cd50e(0x2c0),_0x3cd50e(0x241),_0x3cd50e(0x24e),_0x3cd50e(0x12a),_0x3cd50e(0x1ea),'fetchOpenOrders',_0x3cd50e(0x29f),'fetchBalance'];let _0x2dacee=[],_0x38e474=[],_0x20fc43=ccxt[_0x3cd50e(0x16e)][_0x3cd50e(0x2c6)];_0x20fc43[_0x3cd50e(0x136)](_0x287a21=>{const _0x1b37c1=_0x3cd50e;try{const _0x51e5a4=new ccxt[(_0x1b37c1(0x16e))][_0x287a21]();_0x38e474[_0x1b37c1(0x148)](_0x51e5a4);}catch(_0x51f1e8){}}),_0x38e474[_0x3cd50e(0x136)](_0x43cdbb=>{const _0x3bf707=_0x3cd50e;let _0x5e5e76=0x0;_0x416c4e[_0x3bf707(0x136)](_0x253c4b=>{const _0x16f985=_0x3bf707;_0x253c4b in _0x43cdbb[_0x16f985(0x1f1)]&&_0x43cdbb[_0x16f985(0x1f1)][_0x253c4b]&&_0x5e5e76++;}),_0x5e5e76==_0x416c4e[_0x3bf707(0x1c1)]&&_0x2dacee[_0x3bf707(0x148)](capitalize(_0x43cdbb['id']));});let _0x2ba7ef=[];return _0x20fc43[_0x3cd50e(0x136)](_0x406b55=>{const _0x2b02fc=_0x3cd50e;_0x406b55=capitalize(_0x406b55);if(!_0x2dacee['includes'](_0x406b55))_0x2ba7ef[_0x2b02fc(0x148)](_0x406b55);}),_0x2dacee;}function setStartDatePerformance(){const _0x18f29d=_0x5f1e29;if(config&&config[_0x18f29d(0x18d)][0x0][_0x18f29d(0x210)][_0x18f29d(0x1c1)]!=0x0){const _0x212c12=config[_0x18f29d(0x18d)][0x0][_0x18f29d(0x210)];dbPerformance[_0x18f29d(0x128)](_0x18f29d(0x2b1))[_0x18f29d(0x22b)]({'date':config[_0x18f29d(0x1ca)]})['assign']({'coins':_0x212c12})['write']();}}async function recreateCoinResults(){const _0x4734cb=_0x5f1e29;recreationNeeded=![];let _0x3b0e8d,_0x30e7b8=[];try{for(const _0x55e3f3 of currentCoins){if(_0x55e3f3[_0x4734cb(0x285)]!=config[_0x4734cb(0x278)]){let _0xadedac=0x0,_0xbe40fc,_0x2bd865;_0x3b0e8d=await getAllEventOrders(_0x55e3f3[_0x4734cb(0x1d1)]);if(_0x3b0e8d[_0x4734cb(0x1c1)]>0x0)_0x3b0e8d[_0x4734cb(0x136)](_0x3b16e3=>{const _0x4a1189=_0x4734cb,_0x4e5201=_0x55e3f3[_0x4a1189(0x1d1)][_0x4a1189(0x27f)](config[_0x4a1189(0x278)]+'/');_0x30e7b8[_0x4a1189(0x148)]({'datetime':_0x3b16e3[_0x4a1189(0x154)],'coin':_0x55e3f3[_0x4a1189(0x285)],'symbol':_0x55e3f3[_0x4a1189(0x1d1)],'side':_0x3b16e3['side'],'reverse':_0x4e5201,'amount':formatResult(_0x3b16e3[_0x4a1189(0x165)],0x8),'filled':formatResult(_0x3b16e3[_0x4a1189(0x165)],0x8),'price':formatResult(_0x3b16e3[_0x4a1189(0x2d5)],0x8)}),_0xadedac=_0x3b16e3[_0x4a1189(0x188)]==_0x4a1189(0x14c)?_0xadedac+_0x3b16e3['filled']:_0xadedac-_0x3b16e3[_0x4a1189(0x165)];if(!_0x2bd865)_0x2bd865=_0x3b16e3['price'];});_0xbe40fc=_0x55e3f3['number']-_0xadedac;let _0x41cf82;config[_0x4734cb(0x18d)][_0x4734cb(0x136)](_0xa5a71d=>{const _0x5c0d01=_0x4734cb;!_0x41cf82&&(_0x41cf82=_0xa5a71d[_0x5c0d01(0x210)][_0x5c0d01(0x22b)](_0x14883f=>_0x14883f['coin']==_0x55e3f3['coin']),_0x41cf82&&(_0xbe40fc=_0x41cf82['number'],_0x2bd865=_0x41cf82[_0x5c0d01(0x2d5)]));});let _0xc8fd7b=dbCoinResults[_0x4734cb(0x128)](_0x4734cb(0x177))[_0x4734cb(0x22b)]({'coin':_0x55e3f3[_0x4734cb(0x285)]})[_0x4734cb(0x1eb)]();_0xc8fd7b={'coin':_0x55e3f3[_0x4734cb(0x285)],'number':_0xbe40fc,'breakeven':_0x2bd865,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4734cb(0x128)]('coins')[_0x4734cb(0x22b)]({'coin':_0x55e3f3[_0x4734cb(0x285)]})[_0x4734cb(0x1a7)](_0xc8fd7b)['write']();}}_0x30e7b8[_0x4734cb(0x130)]((_0x5682a3,_0xd77222)=>_0x5682a3[_0x4734cb(0x154)]>_0xd77222[_0x4734cb(0x154)]?0x1:_0xd77222[_0x4734cb(0x154)]>_0x5682a3['datetime']?-0x1:0x0);let _0x465d7e=0x0;for(let _0xf3e7e9 of _0x30e7b8){await updateCoinResults(_0xf3e7e9,!![]);}}catch(_0x3d942d){await handleError(_0x3d942d,_0x4734cb(0x212));}}async function getAllEventOrders(_0x1a99a2){const _0x2ade3c=_0x5f1e29;let _0x570c08=[],_0x2c8847=dbLogs[_0x2ade3c(0x128)]('logs')[_0x2ade3c(0x28f)](_0x27c4b2=>{const _0x30f015=_0x2ade3c,_0x46f563=_0x27c4b2['event'][_0x30f015(0x18f)]();return _0x46f563[_0x30f015(0x27f)](_0x1a99a2['toLowerCase']())&&(_0x46f563[_0x30f015(0x27f)]('market')&&_0x46f563[_0x30f015(0x27f)]('order')||_0x46f563[_0x30f015(0x27f)](_0x30f015(0x165))&&_0x46f563[_0x30f015(0x27f)](_0x30f015(0x20c)));})[_0x2ade3c(0x20e)](_0x2ade3c(0x23a))['value']();return _0x2c8847['forEach'](_0x5f0a67=>{const _0xe87dda=_0x2ade3c,_0x1888d3=_0x5f0a67['event'][_0xe87dda(0x27f)](_0xe87dda(0x13c))?_0xe87dda(0x13c):_0xe87dda(0x14c),_0x19e192=/#([0-9]|\.)+\s/i,_0x3a6375=Number(_0x19e192[_0xe87dda(0x2c7)](_0x5f0a67[_0xe87dda(0x2cc)])[0x0][_0xe87dda(0x199)](0x1)),_0x379553=/@([0-9]|\.)+$/i,_0x3a96e7=Number(_0x379553[_0xe87dda(0x2c7)](_0x5f0a67[_0xe87dda(0x2cc)])[0x0][_0xe87dda(0x199)](0x1));_0x570c08[_0xe87dda(0x148)]({'datetime':_0x5f0a67[_0xe87dda(0x23a)],'coin':symbolToCoin(_0x1a99a2),'symbol':_0x1a99a2,'side':_0x1888d3,'amount':_0x3a6375,'filled':_0x3a6375,'price':_0x3a96e7});}),_0x570c08;}async function getAllOrders(_0x41cd39,_0x464392){const _0x518dd6=_0x5f1e29;let _0x3600f0=[];while(_0x464392<exchange[_0x518dd6(0x1f2)]()){const _0x588cce=0x1f4;try{const _0x392f66=await exchange['fetchClosedOrders'](_0x41cd39,_0x464392,_0x588cce);if(_0x392f66[_0x518dd6(0x1c1)])_0x464392=_0x392f66[_0x392f66[_0x518dd6(0x1c1)]-0x1][_0x518dd6(0x224)]+0x1,_0x3600f0=_0x3600f0[_0x518dd6(0x15f)](_0x392f66);else break;}catch(_0x34b3d8){await handleError(_0x34b3d8,'getAllOrders()',_0x41cd39);}}return _0x3600f0;}async function validate24hChanges(){const _0x16e230=_0x5f1e29;for(const _0x5a7fd9 of currentCoins){if(_0x5a7fd9[_0x16e230(0x285)]!=config['basecoin']){let _0x3c7574;_0x5a7fd9[_0x16e230(0x158)]?_0x3c7574=formatResult((0x1/(gChange[_0x5a7fd9['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x3c7574=gChange[_0x5a7fd9[_0x16e230(0x1d1)]],_0x3c7574<config['change24h']&&(logHistory(_0x16e230(0x21a),_0x5a7fd9[_0x16e230(0x285)]+_0x16e230(0x27e)+_0x3c7574+'%'),logHistory(_0x16e230(0x21a),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory('error','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4bed5a,_0x1ed423){const _0x522b9b=_0x5f1e29;if(!_0x4bed5a)return!![];const _0x40b4df=_0x1ed423[_0x522b9b(0x1c9)]('.'),_0x1d74f9=_0x4bed5a['split']('.');for(var _0x458617=0x0;_0x458617<_0x1d74f9[_0x522b9b(0x1c1)];_0x458617++){const _0x384515=~~_0x1d74f9[_0x458617],_0x2c4c3d=~~_0x40b4df[_0x458617];if(_0x384515<_0x2c4c3d)return!![];if(_0x384515>_0x2c4c3d)return![];}return![];}async function oneTimeMigration(){const _0xe8a214=_0x5f1e29;let _0x1c4f63=dbLogs['get']('version')['value']();if(isOlderVersion(_0x1c4f63,_0xe8a214(0x222))){let _0x9a5a19=[];const _0x47cfbf=dbLogs[_0xe8a214(0x128)](_0xe8a214(0x1d7))['value']();_0x47cfbf[_0xe8a214(0x136)](_0x578b6f=>{const _0x28ff21=_0xe8a214;_0x9a5a19['push']({'time':_0x578b6f[_0x28ff21(0x23a)],'type':_0x578b6f['type'],'event':_0x578b6f['event']});}),dbLogs[_0xe8a214(0x128)](_0xe8a214(0x1d7))[_0xe8a214(0x1a7)](_0x9a5a19)[_0xe8a214(0x193)]();}let _0x528e0a=dbConfig['get']('version')[_0xe8a214(0x1eb)]();if(isOlderVersion(_0x528e0a,_0xe8a214(0x222))){let _0x549876=dbConfig[_0xe8a214(0x128)]('bot')['find']({'botID':botID})[_0xe8a214(0x1eb)]();if(_0x549876){let _0x40ac29=[];_0x549876[_0xe8a214(0x2cf)][_0xe8a214(0x136)](_0x368cd7=>{const _0x4c195d=_0xe8a214;_0x40ac29[_0x4c195d(0x148)]({'coin':_0x368cd7[_0x4c195d(0x285)],'number':_0x368cd7['startnumber'],'price':_0x368cd7[_0x4c195d(0x267)]}),delete _0x368cd7[_0x4c195d(0x2a3)],delete _0x368cd7[_0x4c195d(0x267)];});if(_0x40ac29[_0xe8a214(0x1c1)]!==0x0)fs[_0xe8a214(0x1b2)](configbackuppath+(_0xe8a214(0x12f)+botID+_0xe8a214(0x122)),JSON[_0xe8a214(0x28b)](_0x40ac29,null,0x4),function(_0x2e298a){if(_0x2e298a){}});const _0x1e177c=(_0x5915a0,_0x55bd19)=>{const _0x568a58=_0xe8a214;let _0x56e140=[];_0x55bd19[_0x568a58(0x136)](_0x42ae83=>{const _0xbd1e41=_0x568a58,_0x67851a=_0x5915a0['find'](_0x1758fe=>_0x1758fe['coin']==_0x42ae83[_0xbd1e41(0x285)]);if(!_0x67851a)_0x56e140[_0xbd1e41(0x148)](_0x42ae83);});let _0x323d73=[];return _0x5915a0['forEach'](_0x2af1cf=>{const _0x30fe6e=_0x568a58,_0x39d609=_0x55bd19[_0x30fe6e(0x22b)](_0x22ac63=>_0x22ac63[_0x30fe6e(0x285)]==_0x2af1cf[_0x30fe6e(0x285)]);if(!_0x39d609||_0x39d609[_0x30fe6e(0x1df)]==0x0&&_0x2af1cf[_0x30fe6e(0x1df)]!=0x0)_0x323d73[_0x30fe6e(0x148)](_0x2af1cf);}),{'missingDay1':_0x56e140,'notInDay2':_0x323d73};},_0x38a5e9=dbPerformance['get'](_0xe8a214(0x2b1))[_0xe8a214(0x140)]()['value']();if(_0x38a5e9[_0xe8a214(0x1c1)]>0x1){const {missingDay1:_0x488c4e,notInDay2:_0xd8d0d}=_0x1e177c(_0x40ac29,_0x38a5e9[0x1][_0xe8a214(0x177)]);_0x40ac29=[..._0x40ac29,..._0x488c4e],_0xd8d0d[_0xe8a214(0x136)](_0x512e1e=>{const _0x288e00=_0xe8a214;let _0x3501ee=_0x40ac29['findIndex'](_0xfcf1d4=>_0xfcf1d4[_0x288e00(0x285)]==_0x512e1e[_0x288e00(0x285)]);_0x3501ee!=-0x1&&_0x40ac29[_0x288e00(0x26d)](_0x3501ee,0x1);});}_0x40ac29[_0xe8a214(0x130)]((_0x1f2516,_0x2f5ddc)=>_0x1f2516['coin']>_0x2f5ddc[_0xe8a214(0x285)]?0x1:_0x2f5ddc[_0xe8a214(0x285)]>_0x1f2516[_0xe8a214(0x285)]?-0x1:0x0);let _0x57166f=[{'date':_0x549876['startdate'],'changes':_0x40ac29}];_0x38a5e9[_0xe8a214(0x1c1)]>0x2&&_0x38a5e9[_0xe8a214(0x136)]((_0x1bbf17,_0x5c7cf8)=>{const _0x242ada=_0xe8a214;if(_0x5c7cf8>0x0&&_0x5c7cf8<_0x38a5e9['length']-0x1){const {missingDay1:_0x2241a5,notInDay2:_0x12f6d7}=_0x1e177c(_0x38a5e9[_0x5c7cf8][_0x242ada(0x177)],_0x38a5e9[_0x5c7cf8+0x1][_0x242ada(0x177)]);_0x40ac29=[],(_0x2241a5[_0x242ada(0x1c1)]!=0x0||_0x12f6d7[_0x242ada(0x1c1)]!=0x0)&&(_0x2241a5['length']!=0x0&&_0x40ac29[_0x242ada(0x148)](..._0x2241a5),_0x12f6d7[_0x242ada(0x1c1)]!=0x0&&(_0x12f6d7[_0x242ada(0x136)](_0x42fa6a=>{const _0x48909f=_0x242ada;_0x42fa6a['number']=-_0x42fa6a[_0x48909f(0x1df)];}),_0x40ac29[_0x242ada(0x148)](..._0x12f6d7)),_0x40ac29[_0x242ada(0x130)]((_0x526e67,_0x42c678)=>_0x526e67[_0x242ada(0x285)]>_0x42c678[_0x242ada(0x285)]?0x1:_0x42c678[_0x242ada(0x285)]>_0x526e67['coin']?-0x1:0x0),_0x57166f[_0x242ada(0x148)]({'date':_0x38a5e9[_0x5c7cf8+0x1][_0x242ada(0x202)],'changes':_0x40ac29}));}}),dbConfig[_0xe8a214(0x128)](_0xe8a214(0x145))[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1a7)]({..._0x549876,'liquidity':_0x57166f})['write']();}}if(isOlderVersion(_0x528e0a,_0xe8a214(0x215))){let _0x1b27bb=dbConfig[_0xe8a214(0x128)](_0xe8a214(0x145))[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1eb)]();if(_0x1b27bb){const _0x53b25c=_0x1b27bb[_0xe8a214(0x2a8)],_0x52df5a=_0x53b25c?capitalize(_0x53b25c):'Binance';dbConfig[_0xe8a214(0x128)](_0xe8a214(0x145))['find']({'botID':botID})[_0xe8a214(0x1a7)]({'exchange':_0x52df5a})[_0xe8a214(0x193)]();}}if(isOlderVersion(_0x528e0a,_0xe8a214(0x17f))){let _0x306111=dbConfig['get'](_0xe8a214(0x145))[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1eb)]();if(_0x306111){const _0x239326=_0x306111[_0xe8a214(0x2b0)],_0x1ac15d=_0x239326?_0xe8a214(0x186):![];dbConfig[_0xe8a214(0x128)]('bot')[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1a7)]({'marketcapEnabled':_0x1ac15d})[_0xe8a214(0x193)]();}}if(isOlderVersion(_0x528e0a,_0xe8a214(0x1ae))){let _0x238369=dbConfig[_0xe8a214(0x128)](_0xe8a214(0x145))[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1eb)]();if(_0x238369){const _0x5d75c1=_0x238369[_0xe8a214(0x249)],_0x496962=_0x5d75c1?_0xe8a214(0x1c2):![];dbConfig[_0xe8a214(0x128)](_0xe8a214(0x145))[_0xe8a214(0x22b)]({'botID':botID})[_0xe8a214(0x1a7)]({'autoliquidity':_0x496962})['write']();}}let _0x327d9b=dbPerformance['get'](_0xe8a214(0x15e))[_0xe8a214(0x1eb)]();isOlderVersion(_0x327d9b,_0xe8a214(0x222))&&setStartDatePerformance();let _0x4ad6b9=dbCoinResults[_0xe8a214(0x128)](_0xe8a214(0x15e))['value']();if(isOlderVersion(_0x4ad6b9,_0xe8a214(0x24f))){let _0x2c5982=dbCoinResults[_0xe8a214(0x128)](_0xe8a214(0x177))[_0xe8a214(0x1eb)]();if(_0x2c5982[_0xe8a214(0x1c1)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0xc6d60=_0x5f1e29;dbConfig[_0xc6d60(0x12e)](_0xc6d60(0x15e),serverversion)[_0xc6d60(0x193)](),dbPerformance[_0xc6d60(0x12e)](_0xc6d60(0x15e),serverversion)[_0xc6d60(0x193)](),dbLogs['set'](_0xc6d60(0x15e),serverversion)['write'](),dbCoinResults[_0xc6d60(0x12e)](_0xc6d60(0x15e),serverversion)[_0xc6d60(0x193)]();}function getConfiguration(_0x195c61){const _0x6c8d70=_0x5f1e29;let _0x25e0d1=dbConfig[_0x6c8d70(0x128)]('bot')[_0x6c8d70(0x22b)]({'botID':_0x195c61})[_0x6c8d70(0x1eb)]();if(_0x25e0d1){let _0x2d9ca5=![];typeof _0x25e0d1[_0x6c8d70(0x28c)]==_0x6c8d70(0x1e2)&&(_0x25e0d1={..._0x25e0d1,'threshold':Number(_0x25e0d1['threshold'])},_0x2d9ca5=!![]),_0x25e0d1['change24h']==undefined&&(_0x25e0d1={..._0x25e0d1,'change24h':-0x14},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x25f)]==undefined&&(_0x25e0d1={..._0x25e0d1,'fiat':_0x6c8d70(0x21f)},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x227)]==undefined&&(_0x25e0d1={..._0x25e0d1,'onepagemode':settings['onepagemode']},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x228)]==undefined&&(_0x25e0d1={..._0x25e0d1,'colorscheme':_0x6c8d70(0x2b4)},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x249)]==undefined&&(_0x25e0d1={..._0x25e0d1,'autoliquidity':_0x6c8d70(0x1c2)},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x183)]==undefined&&(_0x25e0d1={..._0x25e0d1,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x2d9ca5=!![]),_0x25e0d1[_0x6c8d70(0x2b0)]==undefined&&(_0x25e0d1={..._0x25e0d1,'marketcapEnabled':![]},_0x2d9ca5=!![]),_0x2d9ca5&&(_0x25e0d1={'botID':_0x25e0d1[_0x6c8d70(0x265)],'exchange':_0x25e0d1[_0x6c8d70(0x2a8)],'apiKey':_0x25e0d1[_0x6c8d70(0x201)],'apiSecret':_0x25e0d1[_0x6c8d70(0x184)],'apiPassword':_0x25e0d1[_0x6c8d70(0x1bb)],'basecoin':_0x25e0d1[_0x6c8d70(0x278)],'botname':_0x25e0d1[_0x6c8d70(0x1c8)],'showname':_0x25e0d1[_0x6c8d70(0x14a)],'threshold':_0x25e0d1[_0x6c8d70(0x28c)],'ordertype':_0x25e0d1[_0x6c8d70(0x276)],'timeout':_0x25e0d1[_0x6c8d70(0x2ba)],'fiat':_0x25e0d1[_0x6c8d70(0x25f)],'startdate':_0x25e0d1[_0x6c8d70(0x1ca)],'recreate':_0x25e0d1[_0x6c8d70(0x127)],'timeshift':_0x25e0d1[_0x6c8d70(0x2a2)],'onepagemode':_0x25e0d1[_0x6c8d70(0x227)],'headless':_0x25e0d1[_0x6c8d70(0x16f)],'cooldown':_0x25e0d1[_0x6c8d70(0x23b)],'change24h':_0x25e0d1[_0x6c8d70(0x25d)],'emojibuy':_0x25e0d1[_0x6c8d70(0x1d3)],'emojisell':_0x25e0d1[_0x6c8d70(0x25a)],'colorscheme':_0x25e0d1['colorscheme'],'marketcapApi':_0x25e0d1[_0x6c8d70(0x183)],'marketcapEnabled':_0x25e0d1['marketcapEnabled'],'portfolio':_0x25e0d1['portfolio'],'autoliquidity':_0x25e0d1[_0x6c8d70(0x249)],'liquidity':_0x25e0d1[_0x6c8d70(0x18d)],'openOrders':_0x25e0d1[_0x6c8d70(0x16a)]},dbConfig[_0x6c8d70(0x128)](_0x6c8d70(0x145))[_0x6c8d70(0x1fa)]()[_0x6c8d70(0x193)](),dbConfig[_0x6c8d70(0x128)](_0x6c8d70(0x145))[_0x6c8d70(0x148)](_0x25e0d1)['write']());}else _0x25e0d1={'botID':_0x195c61,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x6c8d70(0x1e0)+_0x195c61,'showname':![],'threshold':0x3,'ordertype':_0x6c8d70(0x149),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x6c8d70(0x2a2)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x6c8d70(0x2b4),'marketcapApi':settings[_0x6c8d70(0x183)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x6c8d70(0x1c2),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x25e0d1;}function emittedConfiguration(){const _0x3d6502=_0x5f1e29;let _0x5bd9f2;if(config[_0x3d6502(0x201)]=='')_0x5bd9f2={...config,'configstate':_0x3d6502(0x1bc)};else config[_0x3d6502(0x201)]==_0x3d6502(0x2c2)?_0x5bd9f2={...config,'configstate':_0x3d6502(0x1b6)}:(_0x5bd9f2={...config,'apiKey':_0x3d6502(0x1e8),'apiSecret':_0x3d6502(0x1e8)},config[_0x3d6502(0x1bb)]&&(_0x5bd9f2[_0x3d6502(0x1bb)]=_0x3d6502(0x1e8)));return _0x5bd9f2;}function getSettings(){const _0x361aac=_0x5f1e29;return dbSettings[_0x361aac(0x128)](_0x361aac(0x250))[_0x361aac(0x1eb)]();}function getSecure(){const _0x383538=_0x5f1e29;return dbSecure[_0x383538(0x128)]('secure')[_0x383538(0x1eb)]()||{};}function _0x25cc(){const _0x34a05e=['status','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','running','configuration','privateKey','basecoinvalue','assign','fees','deleteHistoryAlerts',':\x20Bot\x20','Trigger:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Block\x20transaction\x20detection:\x20','2.6.23','Portfolio\x20change\x20detected:\x20','Bitget','change','writeFile','(((.+)+)+)+$','BTC','indexOf','recovery','search','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','getCoins()','quick','apiPassword','initial','\x20exchange','./config/','\x20:\x20','UNLOCKED','length','update-liquidity','substring','AuthenticationError','open','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','getCoinNumber()','botname','split','startdate','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','Market','getOpenOrders()','send','differenceInSeconds','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','symbol','PermissionDenied','emojibuy','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','./logs/','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','logs','full','\x20-\x20','watchTradesForSymbols()','Order\x20filled:\x20','orderId','EUR','breakeven','number','Bot\x20','kill','string','USDT','defaults','Unknown\x20error:\x20','TUSD','getTime','************','Invalid\x20quantity','createOrder','value','\x20network\x20error:\x20','toFixed','slider','staging','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','has','milliseconds','process\x20','ORDERS.UNLOCKING','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Bybit','OrderNotFound','\x20|\x20exchange:\x20','<b>Bot\x20','remove','trade','sqrt','\x20/\x20','date-fns','enabled','remainingSymbols','apiKey','date','Order(s)\x20not\x20validated\x20after\x20','keys','\x20attempts','abs','quote','ETH','Executed\x20','bid','PAXG','order','highest','sortBy','No\x20more\x20open\x20orders\x20-\x20','changes','<pre>','recreateCoinResults()','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','usd','2.6.0','placeOrder()','shift','warning','args','error','NetworkError','market_cap','initclient','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','USD','fromCodePoint','watchOrders()','2.3.5','fetchTickers','timestamp','map','getDate','onepagemode','colorscheme','type','balances','find','exchange\x20reload','none','11056VONDiS','message','watchTradesForSymbols','toString','floor','orderstatus','Waited\x20','Huobi','placeOrder','currency','BNB','delta','time','cooldown','1559670YUBQvN','function','\x20>\x20details:','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','axios','watchTrades','format','yyyy/MM/dd','./version.json','Exchange\x20error\x20details:','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','\x20API\x20secret\x20is\x20invalid','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','autoliquidity','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','watchOrders','2.5.0','settings','Resuming\x20(','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Error\x20details\x20(1):','getStartingBalances','valid','final','-results.json','Loading\x20symbols','emojisell','page','cost','change24h','Error\x20details\x20(0):','fiat','ExchangeNotAvailable','1\x20-\x20FILLED\x20unknown\x20order:\x20','Symbol(s):\x20','Fee\x20discount\x20refund\x20detected:\x20','%\x20(','botID','eur','startprice','InvalidNonce',':\x20timer\x20>','/output-000.log','\x20|\x20lock\x20orders:\x20','freeze','splice','max','\x20|\x20','startsWith','buys','\x20API\x20key\x20is\x20invalid','added','USDP','join','ordertype','replace','basecoin','\x20order:\x20','\x20orders\x20in\x20less\x20than\x20','\x20|\x20Custom\x20ID:\x20','Pausing\x20for\x20','realized','\x20has\x20a\x2024h\x20drop\x20of\x20','includes','getMinutes','MIN_NOTIONAL','util','Exception\x20thrown\x20in\x20','total','coin','BUSD','status\x20code\x20401','storeFiat','showConfig','password','stringify','threshold','001','fee','filter','sendPortfolioTelegram','2670801QpiZuf','Net\x20effect','padStart','complete','loading-canceled','1393QJiWqN','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','\x20portfolio:</b>\x20\x0a\x0a','last','2\x20-\x20Orders\x20unlocked','no\x20open\x20orders','ccxt','Net\x20','random','fetchClosedOrders','limit-high','production','timeshift','startnumber','portfolio2','Initializing\x20exchange:\x20already\x20done','no\x20exchange\x20reloaded','debug','exchange','\x20minutes','closed','rightTxt','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','1134852mdmthu','limits','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','marketcapEnabled','data','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','red_yellow_blue','RSA-OAEP','decrypt','1\x20-\x20Handle\x20open\x20orders','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Cryptocom','timeout','139118LtoWvZ','2\x20-\x20Handled\x20open\x20orders','portfolio1','average','\x20>\x20','fetchTicker','mkdirSync','***','bots','getPortfolio','log','exchanges','exec','<b>','netoffset','Error\x20in\x20testAPI():\x20','percentage','event','toUpperCase','environment','portfolio','1\x20-\x20FILLED\x20known\x20order:\x20','Order\x20is\x20invalid:\x20','LOCKED','ask','-------------------------------\x0a','price','.json','Network\x20error\x20details:','test','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','RETRY\x20-\x20Problem\x20resolved\x20after\x20','recreate','get','Unknown\x20error\x20-\x20check\x20logs','cancelOrder','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','amount','parse','set','starting-balance-','sort','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20metrics:</b>\x20\x0a\x0a','Invalid\x20symbol:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','coin-loading-progress','forEach','pid','0\x20-\x20EXECUTION:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','25gaKXwT','Resetting\x20coin\x20results:\x20','sell','active','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','recent20','cloneDeep','storeHeadless','canceled','RETRY\x20-\x20Error\x20in\x20','\x20uses\x20','bot','marketcapsqrt','Loading\x20completed','push','market','showname','Crypt','buy','event-history','API-key\x20format\x20invalid','InsufficientFunds','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','1\x20-\x20Unlock\x20orders','bot-','fetchOpenOrders','datetime','amountToPrecision','must\x20be\x20greater\x20than\x20minimum\x20amount','storeConfiguration','reverse','detectLiquidityChange()','excluded','Manual\x20balancing\x20required','fetchBalance','loadMarkets','version','concat','net-fiat','Order\x20amount\x20is\x20invalid:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','sha256','target','filled','1\x20-\x20Validate\x20orders:\x20','BNB/','net-basecoin','existsSync','openOrders','-events.json','offset','getMonth','pro','headless','Headless:\x20',')\x20|\x20exchange:\x20','\x20-\x20bot\x20not\x20started','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Saving\x20configuration','ongoing','getFullYear','coins','\x20>\x20[DEBUG]\x20','min','restart','padEnd','success','spot','progress','2.6.22','cancel','13641678Olmkma','performance','marketcapApi','apiSecret','2\x20-\x20Validate\x20orders:\x20','marketcap','3364952mRbqqB','side','DDoSProtection','hybrid-crypto-js','ORDERS.LOCKED','request-time','liquidity','getHours','toLowerCase','apply','unlinkSync','argv','write','round','sendMetricsTelegram','-performance.json','entries','Binance','slice','leftTxt','distribution','initTickers()','Initiating\x20bot\x20restart','Failed\x20to\x20load\x20coin\x20data\x20for\x20','removed','RequestTimeout'];_0x25cc=function(){return _0x34a05e;};return _0x25cc();}function updateTimeshift(_0x42010e){const _0x462268=_0x5f1e29;let _0x28a651=dbConfig[_0x462268(0x128)](_0x462268(0x145))[_0x462268(0x22b)]({'botID':botID})[_0x462268(0x1eb)]();_0x28a651&&dbConfig[_0x462268(0x128)]('bot')[_0x462268(0x22b)]({'botID':botID})[_0x462268(0x1a7)]({'timeshift':_0x42010e})[_0x462268(0x193)](),config['timeshift']=_0x42010e,proxyEmit(_0x462268(0x1a4),emittedConfiguration());}function updateOnepagemode(_0x64ad09){const _0x22a958=_0x5f1e29;let _0x4a9f78=dbConfig[_0x22a958(0x128)](_0x22a958(0x145))[_0x22a958(0x22b)]({'botID':botID})[_0x22a958(0x1eb)]();_0x4a9f78&&dbConfig[_0x22a958(0x128)](_0x22a958(0x145))[_0x22a958(0x22b)]({'botID':botID})[_0x22a958(0x1a7)]({'onepagemode':_0x64ad09})[_0x22a958(0x193)](),config[_0x22a958(0x227)]=_0x64ad09,proxyEmit(_0x22a958(0x1a4),emittedConfiguration());}function updateMarketcapApi(_0x2112dd){const _0x5ae15b=_0x5f1e29,_0x2d8abe=_0x2112dd?!![]:![];let _0x44839d=dbConfig[_0x5ae15b(0x128)](_0x5ae15b(0x145))[_0x5ae15b(0x22b)]({'botID':botID})[_0x5ae15b(0x1eb)]();_0x44839d&&dbConfig['get'](_0x5ae15b(0x145))[_0x5ae15b(0x22b)]({'botID':botID})[_0x5ae15b(0x1a7)]({'marketcapApi':_0x2d8abe})['write'](),config['marketcapApi']=_0x2d8abe,getMarketCap(),proxyEmit(_0x5ae15b(0x1a4),emittedConfiguration());}async function storeConfiguration(_0x20a5f7){const _0x27d007=_0x5f1e29;logger[_0x27d007(0x2a7)](_0x27d007(0x174));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x1e4f5a=![],_0x9488d8=![],_0x7991cc=[];_0x20a5f7[_0x27d007(0x2cf)][_0x27d007(0x136)](_0x206975=>{const _0x2321fd=_0x27d007;if(!_0x206975['excluded']&&_0x206975[_0x2321fd(0x285)]!=_0x20a5f7[_0x2321fd(0x278)])_0x7991cc[_0x2321fd(0x148)](_0x206975[_0x2321fd(0x1d1)]);}),_0x7991cc['forEach'](_0x30441b=>{const _0x5153b7=_0x27d007,_0x2a1139=currentCoins[_0x5153b7(0x22b)](_0x148059=>_0x148059['symbol']==_0x30441b);!_0x2a1139&&(_0x1e4f5a=!![]);}),currentCoins[_0x27d007(0x136)](_0x57147b=>{const _0x5c6f8=_0x27d007;if(_0x57147b[_0x5c6f8(0x285)]!=config[_0x5c6f8(0x278)]){const _0x5b48aa=_0x7991cc[_0x5c6f8(0x22b)](_0x1e1c6c=>_0x1e1c6c==_0x57147b[_0x5c6f8(0x1d1)]);!_0x5b48aa&&(_0x1e4f5a=!![]);}}),_0x20a5f7[_0x27d007(0x2cf)][_0x27d007(0x136)](_0x390536=>{const _0x4d4e67=_0x27d007,_0x2c9c2b=config[_0x4d4e67(0x2cf)]['find'](_0x63ed85=>_0x63ed85['coin']==_0x390536['coin']);if(_0x2c9c2b&&_0x390536[_0x4d4e67(0x16c)]!=_0x2c9c2b[_0x4d4e67(0x16c)])_0x9488d8=!![];});let _0x2d4b20=dbConfig['get'](_0x27d007(0x145))[_0x27d007(0x22b)]({'botID':botID})[_0x27d007(0x1eb)]();_0x20a5f7={..._0x20a5f7,'apiKey':crypt[_0x27d007(0x2b6)](secure[_0x27d007(0x1a5)],_0x20a5f7[_0x27d007(0x201)])['message'],'apiSecret':crypt[_0x27d007(0x2b6)](secure[_0x27d007(0x1a5)],_0x20a5f7['apiSecret'])['message']};_0x20a5f7['apiPassword']&&(_0x20a5f7['apiPassword']=crypt[_0x27d007(0x2b6)](secure[_0x27d007(0x1a5)],_0x20a5f7[_0x27d007(0x1bb)])[_0x27d007(0x22f)]);let _0x54d5d7=![];if(_0x2d4b20){_0x20a5f7[_0x27d007(0x201)]=='************'?_0x20a5f7[_0x27d007(0x201)]=config[_0x27d007(0x201)]:_0x54d5d7=!![];_0x20a5f7[_0x27d007(0x184)]==_0x27d007(0x1e8)?_0x20a5f7['apiSecret']=config[_0x27d007(0x184)]:_0x54d5d7=!![];if(_0x20a5f7[_0x27d007(0x1bb)]==_0x27d007(0x1e8))_0x20a5f7[_0x27d007(0x1bb)]=config[_0x27d007(0x1bb)];else{if(_0x20a5f7[_0x27d007(0x1bb)])_0x54d5d7=!![];}dbConfig[_0x27d007(0x128)](_0x27d007(0x145))['find']({'botID':botID})[_0x27d007(0x1a7)](_0x20a5f7)[_0x27d007(0x193)]();}else dbConfig[_0x27d007(0x128)](_0x27d007(0x145))[_0x27d007(0x148)](_0x20a5f7)[_0x27d007(0x193)](),_0x54d5d7=!![],process[_0x27d007(0x1ce)]({'status':_0x27d007(0x1ff),'live':_0x27d007(0x1a3)},_0x348dd6=>{});process[_0x27d007(0x1ce)]({'botname':_0x20a5f7['botname']},_0x29f225=>{}),config={..._0x20a5f7},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x54d5d7)!_0x2d4b20?await reset(!![]):getBalances();else _0x1e4f5a||_0x9488d8?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x536362){const _0x89a7a4=_0x5f1e29,_0x2a8537={...config,'headless':_0x536362[_0x89a7a4(0x16f)]};let _0x1db0b4=dbConfig[_0x89a7a4(0x128)]('bot')[_0x89a7a4(0x22b)]({'botID':botID})[_0x89a7a4(0x1eb)]();_0x1db0b4&&dbConfig['get'](_0x89a7a4(0x145))[_0x89a7a4(0x22b)]({'botID':botID})['assign'](_0x2a8537)['write'](),config={..._0x2a8537},updateBotManager(),proxyEmit(_0x89a7a4(0x1a4),emittedConfiguration());}async function storeFiat(_0x5708a8){const _0x1e7cea=_0x5f1e29,_0x7a3d6a={...config,'fiat':_0x5708a8};let _0x28ac06=dbConfig['get'](_0x1e7cea(0x145))[_0x1e7cea(0x22b)]({'botID':botID})[_0x1e7cea(0x1eb)]();_0x28ac06&&dbConfig[_0x1e7cea(0x128)](_0x1e7cea(0x145))[_0x1e7cea(0x22b)]({'botID':botID})[_0x1e7cea(0x1a7)](_0x7a3d6a)[_0x1e7cea(0x193)](),config={..._0x7a3d6a},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x3ec963=_0x5f1e29;logger[_0x3ec963(0x1d8)]('Resetting\x20bot\x20history');try{if(fs[_0x3ec963(0x169)](path[_0x3ec963(0x275)](configpath,_0x3ec963(0x152)+botID+'-events.json')))fs[_0x3ec963(0x191)](path[_0x3ec963(0x275)](configpath,_0x3ec963(0x152)+botID+'-events.json'));if(fs[_0x3ec963(0x169)](path[_0x3ec963(0x275)](configpath,_0x3ec963(0x152)+botID+_0x3ec963(0x196))))fs[_0x3ec963(0x191)](path['join'](configpath,_0x3ec963(0x152)+botID+_0x3ec963(0x196)));if(fs[_0x3ec963(0x169)](path[_0x3ec963(0x275)](configpath,_0x3ec963(0x152)+botID+_0x3ec963(0x258))))fs['unlinkSync'](path[_0x3ec963(0x275)](configpath,_0x3ec963(0x152)+botID+_0x3ec963(0x258)));}catch(_0x215610){if(_0x215610)logger[_0x3ec963(0x1d8)]('Error\x20while\x20deleting\x20files:\x20',_0x215610);}const _0x582fcc=getDate();let _0x4371dc=[];currentCoins[_0x3ec963(0x136)](_0x14fc5f=>{const _0x4ba26b=_0x3ec963;_0x4371dc[_0x4ba26b(0x148)]({'coin':_0x14fc5f[_0x4ba26b(0x285)],'number':_0x14fc5f[_0x4ba26b(0x1df)],'price':_0x14fc5f['last']});});let _0x3334f3=dbConfig[_0x3ec963(0x128)]('bot')[_0x3ec963(0x22b)]({'botID':botID})[_0x3ec963(0x1eb)]();_0x3334f3&&(dbConfig['get']('bot')[_0x3ec963(0x22b)]({'botID':botID})[_0x3ec963(0x1a7)]({'liquidity':[{'date':_0x582fcc,'changes':_0x4371dc}]})[_0x3ec963(0x193)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x57448){const _0x4e2c2c=_0x5f1e29;return _0x57448[_0x4e2c2c(0x277)]('/','');}function updateHighestFee(_0x448b42){const _0x49eaca=_0x5f1e29;if(_0x448b42[_0x49eaca(0x158)]){let _0x21cb81={'filled':_0x448b42['filled']*_0x448b42[_0x49eaca(0x2d5)],'amount':_0x448b42['filled']*_0x448b42['price'],'side':_0x448b42[_0x49eaca(0x188)]==_0x49eaca(0x13c)?'buy':_0x49eaca(0x13c),'price':0x1/_0x448b42[_0x49eaca(0x2d5)]};_0x448b42={..._0x448b42,..._0x21cb81};}const _0x4b8e93=defaultFee*_0x448b42[_0x49eaca(0x165)]*_0x448b42[_0x49eaca(0x2d5)];lastFees[_0x49eaca(0x13f)][_0x49eaca(0x1c1)]===0x14&&lastFees['recent20'][_0x49eaca(0x217)](),lastFees['recent20'][_0x49eaca(0x148)](_0x4b8e93),lastFees[_0x49eaca(0x20d)]=Math[_0x49eaca(0x26e)](...lastFees[_0x49eaca(0x13f)]);}async function updateNumberCoinsCcxt(_0xb8c471){const _0x10a5e4=_0x5f1e29;logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x138)+_0xb8c471['symbol']+'\x20|\x20'+_0xb8c471[_0x10a5e4(0x1a1)]+_0x10a5e4(0x26f)+_0xb8c471[_0x10a5e4(0x165)]+_0x10a5e4(0x1fd)+_0xb8c471[_0x10a5e4(0x12c)]+_0x10a5e4(0x26f)+_0xb8c471['id']);let _0x29d15e=_0xb8c471[_0x10a5e4(0x1a1)],_0x504cf8=![];currentCoins['forEach'](_0x45314c=>{const _0x364a84=_0x10a5e4;_0x45314c[_0x364a84(0x1d1)]==_0xb8c471[_0x364a84(0x1d1)]&&(_0x504cf8=!![]);});if(!_0x504cf8)return;const _0x665e6a=currentCoins[_0x10a5e4(0x22b)](_0x54eb7f=>_0x54eb7f[_0x10a5e4(0x1d1)]==_0xb8c471[_0x10a5e4(0x1d1)]),_0x2a0791=_0x206051=>{const _0x703551=_0x10a5e4;if(_0x665e6a)_0x665e6a[_0x703551(0x233)]=_0x206051;};let _0x233fdf=![];for(const _0x168380 of lastOrders){const _0x586d22=0x64,_0x219ea1=0x1388;let _0x17d283=0x0;while(!_0x168380[_0x10a5e4(0x1dc)]&&_0x17d283*_0x586d22<_0x219ea1){_0x17d283++,await sleep(_0x586d22);}if(_0x17d283>0x0)logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x234)+_0x17d283*_0x586d22/0x3e8+_0x10a5e4(0x1b8));_0x168380[_0x10a5e4(0x1dc)]==_0xb8c471['id']&&(_0x233fdf=!![]);}if(_0x29d15e=='open'){_0x2a0791('open');if(_0xb8c471[_0x10a5e4(0x165)]>0x0){if(_0x233fdf){setBlockTransactionDetection(!![]),logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x150)+_0xb8c471['id']);const _0x26be22=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x26be22,setBlockTransactionDetection(![]);}else logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x1f0)+_0xb8c471['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x29d15e=='canceled'){_0x2a0791(_0x10a5e4(0x142));const _0xb7e772=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xb7e772,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x29d15e=='closed'){if(lastOrders)for(const _0x59e6ce of lastOrders){if(_0x59e6ce[_0x10a5e4(0x1dc)]==_0xb8c471['id']){logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x2d0)+_0xb8c471['id']),_0x233fdf=!![];if(_0x59e6ce['filled']==0x0){setBlockTransactionDetection(!![]),logger[_0x10a5e4(0x2a7)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0xb8c471['id']);if(_0xb8c471[_0x10a5e4(0x2be)])_0x59e6ce[_0x10a5e4(0x2d5)]=_0xb8c471['average'];else{if(_0xb8c471[_0x10a5e4(0x2d5)])_0x59e6ce[_0x10a5e4(0x2d5)]=_0xb8c471[_0x10a5e4(0x2d5)];else{}}_0x59e6ce[_0x10a5e4(0x165)]=_0xb8c471['filled'],updateHighestFee(_0x59e6ce),_0x2a0791('filled'),await validateOrders();if(lockOrders==ORDERS[_0x10a5e4(0x2d2)]){const _0xf28564=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xf28564,setBlockTransactionDetection(![]);}_0x59e6ce[_0x10a5e4(0x28e)]={'currency':_0xb8c471[_0x10a5e4(0x28e)]?_0xb8c471[_0x10a5e4(0x28e)]['currency']:null,'cost':_0xb8c471['fee']?_0xb8c471[_0x10a5e4(0x28e)][_0x10a5e4(0x25c)]:0x0},await updateCoinResults(_0x59e6ce);}}}!_0x233fdf&&(logger[_0x10a5e4(0x2a7)](_0x10a5e4(0x261)+_0xb8c471['id']),_0x2a0791(_0x10a5e4(0x165)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x4a2e37=JSON[_0x10a5e4(0x12d)](lastBalances[_0x10a5e4(0x2cf)]);const _0xd7003e=_0x4a2e37['find'](_0x47ed8d=>_0x47ed8d[_0x10a5e4(0x1d1)]==_0xb8c471['symbol']);if(_0xd7003e){if(_0x29d15e=='open')_0xd7003e['orderstatus']=_0xd7003e[_0x10a5e4(0x233)]==_0x10a5e4(0x165)?_0x10a5e4(0x165):'open';else{if(_0x29d15e=='canceled')_0xd7003e[_0x10a5e4(0x233)]=_0xd7003e[_0x10a5e4(0x233)]=='filled'?'filled':'canceled';else _0x29d15e==_0x10a5e4(0x2aa)&&(_0xd7003e[_0x10a5e4(0x233)]=_0x10a5e4(0x165));}}lastBalances={...lastBalances,'portfolio':JSON[_0x10a5e4(0x28b)](_0x4a2e37)},proxyEmit(_0x10a5e4(0x22a),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3727c5=_0x5f1e29;await getOpenOrders();let _0x4c29f7=![];currentCoins[_0x3727c5(0x136)](_0x1899a6=>{const _0x1b632e=_0x3727c5;_0x4c29f7=allOpenOrders['find'](_0x21c50a=>_0x21c50a[_0x1b632e(0x1d1)]==_0x1899a6[_0x1b632e(0x1d1)]),_0x1899a6[_0x1b632e(0x233)]=_0x4c29f7?_0x1b632e(0x1c5):_0x1b632e(0x22d);});}async function getCoins(_0x59cd02=0x0,_0x2db2df=!![],_0x29f079=config[_0x5f1e29(0x278)]){const _0x360cf2=_0x5f1e29;let _0x498c13,_0x117189=[],_0x194fd7=[],_0x4f3f09=[];if(_0x59cd02)await sleep(_0x59cd02);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x498c13=await exchange['fetchBalance'](),mybalances=_0x498c13['total'];for(const [_0x364a32,_0x4b23f2]of Object[_0x360cf2(0x197)](mybalances)){_0x4f3f09[_0x360cf2(0x148)](_0x364a32);}config['portfolio'][_0x360cf2(0x136)](_0x4be4fe=>{const _0x2b24bc=_0x360cf2;!_0x4f3f09['includes'](_0x4be4fe[_0x2b24bc(0x285)])&&(mybalances[_0x4be4fe['coin']]=0x0);});if(_0x29f079=='')for(const [_0x3cc344,_0x138dde]of Object[_0x360cf2(0x197)](mybalances)){_0x138dde!=0x0&&_0x117189[_0x360cf2(0x148)]({'coin':_0x3cc344});}else for(const [_0x2d6e45,_0x385686]of Object[_0x360cf2(0x197)](mybalances)){const _0x1b1f7a=config[_0x360cf2(0x2cf)][_0x360cf2(0x22b)](_0x19b4ae=>_0x19b4ae[_0x360cf2(0x285)]==_0x2d6e45),_0x12b10a=_0x2d6e45+'/'+_0x29f079,_0x28b5f2=_0x29f079+'/'+_0x2d6e45,_0x2db392=currentCoins['find'](_0x9cb21=>_0x9cb21['coin']==_0x2d6e45);if((_0x385686!=0x0||_0x1b1f7a)&&(allSymbols[_0x360cf2(0x27f)](_0x12b10a)||_0x2d6e45==_0x29f079))_0x2db392?_0x117189[_0x360cf2(0x148)]({..._0x2db392,'number':Math[_0x360cf2(0x26e)](_0x385686+(_0x1b1f7a&&_0x1b1f7a[_0x360cf2(0x16c)]||0x0),0x0)}):_0x117189['push']({'coin':_0x2d6e45,'symbol':_0x12b10a,'reverse':![],'number':Math[_0x360cf2(0x26e)](_0x385686+(_0x1b1f7a&&_0x1b1f7a[_0x360cf2(0x16c)]||0x0),0x0),'orderstatus':'none'});else{if((_0x385686!=0x0||_0x1b1f7a)&&allSymbols['includes'](_0x28b5f2))_0x2db392?_0x117189[_0x360cf2(0x148)]({..._0x2db392,'number':Math[_0x360cf2(0x26e)](_0x385686+(_0x1b1f7a&&_0x1b1f7a[_0x360cf2(0x16c)]||0x0),0x0)}):_0x117189[_0x360cf2(0x148)]({'coin':_0x2d6e45,'symbol':_0x28b5f2,'reverse':!![],'number':Math[_0x360cf2(0x26e)](_0x385686+(_0x1b1f7a&&_0x1b1f7a['offset']||0x0),0x0),'orderstatus':_0x360cf2(0x22d)});else _0x1b1f7a&&_0x117189['push']({'coin':_0x1b1f7a[_0x360cf2(0x285)],'symbol':_0x1b1f7a[_0x360cf2(0x1d1)],'reverse':_0x1b1f7a[_0x360cf2(0x158)],'number':0x0,'orderstatus':_0x360cf2(0x22d)});}}}catch(_0x33094b){if(!_0x2db2df)handleErrorNoStop(_0x33094b,_0x360cf2(0x1b9));else await handleError(_0x33094b,'getCoins()');}return _0x117189[_0x360cf2(0x130)]((_0x3380c0,_0x1c7596)=>_0x3380c0[_0x360cf2(0x239)]<_0x1c7596[_0x360cf2(0x239)]?0x1:_0x1c7596[_0x360cf2(0x239)]<_0x3380c0['delta']?-0x1:0x0),_0x194fd7=cloneDeep(_0x117189),_0x117189=_0x117189[_0x360cf2(0x28f)](_0x362885=>{const _0x571887=_0x360cf2,_0xf2b62b=config['portfolio']['find'](_0x4f0226=>_0x4f0226[_0x571887(0x285)]==_0x362885[_0x571887(0x285)]);return _0xf2b62b&&!_0xf2b62b[_0x571887(0x15a)];}),[_0x117189,_0x194fd7];}async function getCoinNumber(_0x1eabeb){const _0x25307b=_0x5f1e29;let _0x43b90e;try{const _0x1f4b58=await exchange[_0x25307b(0x15c)]();_0x43b90e=_0x1f4b58[_0x25307b(0x284)][_0x1eabeb];}catch(_0xdb7e24){await handleError(_0xdb7e24,_0x25307b(0x1c7));}return _0x43b90e;}async function getOpenOrders(){const _0x2a4874=_0x5f1e29;let _0x1a92ac;allOpenOrders=[];try{for(const _0x401b7c of config['portfolio']){!_0x401b7c[_0x2a4874(0x15a)]&&_0x401b7c[_0x2a4874(0x285)]!=config[_0x2a4874(0x278)]&&(_0x1a92ac=await exchange[_0x2a4874(0x153)](_0x401b7c[_0x2a4874(0x1d1)]),_0x1a92ac[_0x2a4874(0x1c1)]>0x0&&allOpenOrders[_0x2a4874(0x148)](_0x1a92ac[0x0]));}}catch(_0x2b8dc3){await handleError(_0x2b8dc3,_0x2a4874(0x1cd));}}async function handleOpenOrders(_0x3501a2=0x0){const _0xc1c495=_0x5f1e29;allOpenOrders[_0xc1c495(0x1c1)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x3501a2==0x0?(logger[_0xc1c495(0x2a7)](_0xc1c495(0x2b7)),_0x3501a2++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xc1c495(0x2a7)](_0xc1c495(0x2bc)),validateOrders(_0xc1c495(0x29b))));}async function testAPI(_0x114b3b){const _0x206134=_0x5f1e29,_0x1543be=ccxt['pro'][_0x114b3b[_0x206134(0x2a8)][_0x206134(0x18f)]()],_0x3ce8f7=new _0x1543be({'apiKey':_0x114b3b[_0x206134(0x201)],'secret':_0x114b3b[_0x206134(0x184)],'options':{'defaultType':'spot'}});if(_0x114b3b[_0x206134(0x1bb)])_0x3ce8f7[_0x206134(0x28a)]=_0x114b3b[_0x206134(0x1bb)];try{await _0x3ce8f7[_0x206134(0x15c)]();}catch(_0xd742b){logger[_0x206134(0x2a7)](_0x206134(0x2ca)+_0xd742b[_0x206134(0x231)]());throw _0xd742b;}}function cloneDeep(_0x4b3673){const _0x6c1ef=_0x5f1e29;return JSON[_0x6c1ef(0x12d)](JSON[_0x6c1ef(0x28b)](_0x4b3673));}async function getPortfolio(_0x5d927e){const _0x59d674=_0x5f1e29;let _0x3f3c8f=[],_0x55b5ca=[],_0x4441bf=[],_0x63e57f;_0x5d927e[_0x59d674(0x201)]=crypt[_0x59d674(0x2b6)](secure['privateKey'],_0x5d927e[_0x59d674(0x201)])[_0x59d674(0x22f)],_0x5d927e['apiSecret']=crypt[_0x59d674(0x2b6)](secure[_0x59d674(0x1a5)],_0x5d927e[_0x59d674(0x184)])[_0x59d674(0x22f)],_0x5d927e[_0x59d674(0x1bb)]=crypt[_0x59d674(0x2b6)](secure['privateKey'],_0x5d927e[_0x59d674(0x1bb)])[_0x59d674(0x22f)];if(_0x5d927e[_0x59d674(0x201)]!==_0x59d674(0x1e8)||_0x5d927e[_0x59d674(0x184)]!==_0x59d674(0x1e8)||_0x5d927e[_0x59d674(0x1bb)]&&_0x5d927e[_0x59d674(0x1bb)]!==_0x59d674(0x1e8)){if(config[_0x59d674(0x2a8)]){if(_0x5d927e[_0x59d674(0x201)]=='************')_0x5d927e['apiKey']=config['apiKey'];if(_0x5d927e[_0x59d674(0x184)]==_0x59d674(0x1e8))_0x5d927e[_0x59d674(0x184)]=config[_0x59d674(0x184)];if(_0x5d927e[_0x59d674(0x1bb)]==_0x59d674(0x1e8))_0x5d927e[_0x59d674(0x1bb)]=config[_0x59d674(0x1bb)];}try{await testAPI(_0x5d927e);}catch(_0x3e0367){if(_0x3e0367['toString']()[_0x59d674(0x27f)]('AuthenticationError')){logHistory(_0x59d674(0x21a),_0x59d674(0x252)),proxyEmit('portfolio1',![]);return;}else{logHistory('error',_0x59d674(0x129)),logger[_0x59d674(0x2a7)](_0x59d674(0x25e),_0x3e0367),proxyEmit(_0x59d674(0x2bd),![]);return;}}exchange?updateExchange(_0x5d927e[_0x59d674(0x201)],_0x5d927e[_0x59d674(0x184)],_0x5d927e[_0x59d674(0x1bb)]):await initExchange(_0x5d927e[_0x59d674(0x2a8)],_0x5d927e['apiKey'],_0x5d927e[_0x59d674(0x184)],_0x5d927e[_0x59d674(0x1bb)]);await loadSymbols();const _0x134842=await getCoins(0x0,![],_0x5d927e['basecoin']);_0x4441bf=cloneDeep(_0x134842[0x1]);}else{const _0x4848cb=await getCoins();_0x4441bf=cloneDeep(_0x4848cb[0x1]);}if(_0x5d927e['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit(_0x59d674(0x2a4),_0x4441bf);else{_0x4441bf['forEach'](_0x57c806=>{const _0x2fe5c3=_0x59d674;if(_0x57c806[_0x2fe5c3(0x285)]!=_0x5d927e['basecoin']&&allSymbols[_0x2fe5c3(0x27f)](_0x57c806[_0x2fe5c3(0x1d1)]))_0x3f3c8f['push'](_0x57c806[_0x2fe5c3(0x1d1)]);});if(_0x3f3c8f[_0x59d674(0x1c1)]==0x0)logHistory(_0x59d674(0x21a),_0x59d674(0x253));else{try{_0x55b5ca=await getTickers(_0x3f3c8f);}catch(_0x4d113a){logHistory('error',_0x59d674(0x129)),logger[_0x59d674(0x2a7)](_0x59d674(0x254),_0x4d113a),proxyEmit(_0x59d674(0x2bd),![]);return;}_0x4441bf[_0x59d674(0x136)](_0x44b43e=>{const _0x3d180b=_0x59d674;_0x44b43e[_0x3d180b(0x285)]!=_0x5d927e[_0x3d180b(0x278)]?_0x55b5ca[_0x44b43e['symbol']]?_0x63e57f=_0x44b43e[_0x3d180b(0x158)]?0x1/_0x55b5ca[_0x44b43e[_0x3d180b(0x1d1)]]['last']:_0x55b5ca[_0x44b43e[_0x3d180b(0x1d1)]][_0x3d180b(0x299)]:_0x63e57f=0x0:_0x63e57f=0x1,_0x44b43e[_0x3d180b(0x2d5)]=formatResult(_0x63e57f,0x8);}),await getMarketCap(_0x4441bf),proxyEmit('portfolio1',!![]),proxyEmit(_0x59d674(0x2a4),_0x4441bf);}}}function truncateTradeAmount(_0x45bfc9,_0x25acea){const _0x309a3a=_0x5f1e29;let _0x264100=0x0;try{_0x264100=exchange[_0x309a3a(0x155)](_0x45bfc9,_0x25acea);}catch(_0x29ab82){}return _0x264100;}function checkMinimums(_0x50b7c6){const _0xb87a8a=_0x5f1e29;let _0x2164d2=!![];const _0x33f95e=!_0x50b7c6['reverse']?markets[_0x50b7c6[_0xb87a8a(0x1d1)]][_0xb87a8a(0x2ae)][_0xb87a8a(0x12c)][_0xb87a8a(0x179)]:markets[_0x50b7c6['symbol']][_0xb87a8a(0x2ae)][_0xb87a8a(0x25c)][_0xb87a8a(0x179)],_0x3f7d02=!_0x50b7c6[_0xb87a8a(0x158)]?markets[_0x50b7c6[_0xb87a8a(0x1d1)]]['limits'][_0xb87a8a(0x25c)][_0xb87a8a(0x179)]:markets[_0x50b7c6[_0xb87a8a(0x1d1)]][_0xb87a8a(0x2ae)][_0xb87a8a(0x12c)][_0xb87a8a(0x179)],_0x4fd1e0=truncateTradeAmount(_0x50b7c6[_0xb87a8a(0x1d1)],_0x50b7c6[_0xb87a8a(0x1fb)]);_0x50b7c6[_0xb87a8a(0x1fb)]=_0x4fd1e0;if(Math[_0xb87a8a(0x206)](_0x4fd1e0)<_0x33f95e)_0x2164d2=![];if(Math[_0xb87a8a(0x206)](_0x4fd1e0)*_0x50b7c6[_0xb87a8a(0x299)]<_0x3f7d02)_0x2164d2=![];if(_0x50b7c6[_0xb87a8a(0x188)]==_0xb87a8a(0x13c)){let _0x57688f=config[_0xb87a8a(0x2cf)][_0xb87a8a(0x22b)](_0x3ffaa7=>_0x3ffaa7[_0xb87a8a(0x285)]==_0x50b7c6[_0xb87a8a(0x285)]);if(_0x57688f[_0xb87a8a(0x16c)]>0x0){if(Math[_0xb87a8a(0x206)](_0x4fd1e0)>_0x50b7c6[_0xb87a8a(0x1df)]-_0x57688f[_0xb87a8a(0x16c)])_0x2164d2=![];}else{if(Math[_0xb87a8a(0x206)](_0x4fd1e0)>_0x50b7c6[_0xb87a8a(0x1df)])_0x2164d2=![];}}if(_0x50b7c6[_0xb87a8a(0x188)]==_0xb87a8a(0x14c)){let _0x356517=config[_0xb87a8a(0x2cf)]['find'](_0x17552a=>_0x17552a[_0xb87a8a(0x285)]==config['basecoin']),_0x473031=currentCoins[_0xb87a8a(0x22b)](_0x3ee0d0=>_0x3ee0d0[_0xb87a8a(0x285)]==config['basecoin']);if(_0x356517[_0xb87a8a(0x16c)]>0x0){if(Math[_0xb87a8a(0x206)](_0x4fd1e0)*_0x50b7c6[_0xb87a8a(0x299)]>_0x473031[_0xb87a8a(0x1df)]-_0x356517['offset'])_0x2164d2=![];}else{if(Math[_0xb87a8a(0x206)](_0x4fd1e0)*_0x50b7c6[_0xb87a8a(0x299)]>_0x473031[_0xb87a8a(0x1df)])_0x2164d2=![];}}return _0x2164d2;}async function getBalances(_0x1032f4=!![]){const _0x5a9b57=_0x5f1e29;let _0x1ad7a6=0x0,_0x3d4370;const _0x30b8b7=config[_0x5a9b57(0x28c)];if(config[_0x5a9b57(0x16f)]&&config[_0x5a9b57(0x25d)]<0x0)await validate24hChanges();currentCoins[_0x5a9b57(0x136)](_0xe786e7=>{const _0x40b3df=_0x5a9b57;if(_0xe786e7[_0x40b3df(0x285)]!=config[_0x40b3df(0x278)]){let _0x509d16=gTicker[noslash(_0xe786e7[_0x40b3df(0x1d1)])];_0x3d4370=_0xe786e7[_0x40b3df(0x158)]?0x1/_0x509d16:_0x509d16;}else _0x3d4370=0x1;let _0x212981=_0xe786e7[_0x40b3df(0x1df)]*_0x3d4370;_0x1ad7a6+=_0x212981,_0xe786e7[_0x40b3df(0x299)]=formatResult(Number(_0x3d4370),0x8),_0xe786e7[_0x40b3df(0x1eb)]=_0x212981;}),currentCoins['forEach'](_0x38bce7=>{const _0x1fc0ef=_0x5a9b57;let _0x543905=config[_0x1fc0ef(0x2cf)]['find'](_0x45d689=>_0x45d689[_0x1fc0ef(0x285)]==_0x38bce7['coin']),_0x164b43=Number(_0x543905[_0x1fc0ef(0x19b)]),_0x414297=_0x38bce7['value']/_0x1ad7a6*0x64,_0x28e150=_0x164b43*_0x1ad7a6/0x64/_0x38bce7['last']-_0x38bce7[_0x1fc0ef(0x1df)];_0x38bce7[_0x1fc0ef(0x19b)]=formatResult(_0x414297,0x3),_0x38bce7[_0x1fc0ef(0x164)]=formatResult(_0x164b43,0x3),_0x38bce7[_0x1fc0ef(0x1fb)]=formatResult(_0x28e150,0x8),_0x38bce7[_0x1fc0ef(0x188)]='',_0x38bce7[_0x1fc0ef(0x256)]=![];if(_0x38bce7[_0x1fc0ef(0x285)]!=config[_0x1fc0ef(0x278)]){if(_0x38bce7[_0x1fc0ef(0x19b)]>_0x164b43)_0x38bce7[_0x1fc0ef(0x188)]=_0x1fc0ef(0x13c),_0x38bce7[_0x1fc0ef(0x256)]=checkMinimums(_0x38bce7);else _0x38bce7[_0x1fc0ef(0x19b)]<_0x164b43&&(_0x38bce7[_0x1fc0ef(0x188)]='buy',_0x38bce7[_0x1fc0ef(0x256)]=checkMinimums(_0x38bce7));}_0x38bce7['delta']=_0x38bce7[_0x1fc0ef(0x19b)]/_0x38bce7['target']-0x1;if(_0x38bce7['orderstatus']=='filled'||_0x38bce7['orderstatus']==_0x1fc0ef(0x142))_0x38bce7[_0x1fc0ef(0x233)]=_0x1fc0ef(0x22d);}),currentCoins[_0x5a9b57(0x130)]((_0x585f11,_0x12ee49)=>_0x585f11[_0x5a9b57(0x239)]<_0x12ee49['delta']?0x1:_0x12ee49[_0x5a9b57(0x239)]<_0x585f11[_0x5a9b57(0x239)]?-0x1:0x0);const _0x19d44c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x19d44c['eur'],'usd':_0x19d44c[_0x5a9b57(0x214)],'portfolio':JSON[_0x5a9b57(0x28b)](currentCoins),'threshold':_0x30b8b7},proxyEmit(_0x5a9b57(0x22a),{'serverversion':serverversion,'balances':lastBalances});if(_0x1032f4){if(config[_0x5a9b57(0x16f)])headlessMode({'portfolio':currentCoins,'threshold':_0x30b8b7});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x30b8b7});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x28202a=getNormalizedPerformance();getStartingBalances(_0x28202a),emitPerformance(_0x28202a);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x9346b1=_0x5f1e29;if(!lastBalances)return;let _0x4628cc=[],_0x1e8c9f,_0x4e940b=JSON['parse'](lastBalances['portfolio']);_0x4e940b[_0x9346b1(0x130)]((_0x82e8b2,_0x5529e8)=>_0x82e8b2['coin']>_0x5529e8[_0x9346b1(0x285)]?0x1:_0x5529e8[_0x9346b1(0x285)]>_0x82e8b2[_0x9346b1(0x285)]?-0x1:0x0),_0x4e940b[_0x9346b1(0x136)](_0x2a94e3=>{const _0x38958b=_0x9346b1;let _0x735c27={'coin':_0x2a94e3[_0x38958b(0x285)],'number':_0x2a94e3['number'],'price':_0x2a94e3['last']};_0x4628cc[_0x38958b(0x148)](_0x735c27);});const _0x164d18=await getFiat();_0x1e8c9f={'date':lastBalances[_0x9346b1(0x23a)]['split']('\x20')[0x0],'eur':_0x164d18[_0x9346b1(0x266)],'usd':_0x164d18[_0x9346b1(0x214)],'coins':_0x4628cc};let _0x3edcd5=dbPerformance[_0x9346b1(0x128)](_0x9346b1(0x2b1))[_0x9346b1(0x22b)]({'date':_0x1e8c9f[_0x9346b1(0x202)]})[_0x9346b1(0x1eb)]();_0x3edcd5?_0x1e8c9f[_0x9346b1(0x202)]!=config[_0x9346b1(0x1ca)]&&dbPerformance['get'](_0x9346b1(0x2b1))[_0x9346b1(0x22b)]({'date':_0x1e8c9f[_0x9346b1(0x202)]})[_0x9346b1(0x1a7)](_0x1e8c9f)[_0x9346b1(0x193)]():dbPerformance['get'](_0x9346b1(0x2b1))[_0x9346b1(0x148)](_0x1e8c9f)[_0x9346b1(0x193)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x4cb401=_0x5f1e29;let _0x28dcf6=[];if(dbPerformance[_0x4cb401(0x1f1)]('data')[_0x4cb401(0x1eb)]()){let _0x2102ea=dbPerformance[_0x4cb401(0x128)](_0x4cb401(0x2b1))[_0x4cb401(0x140)]()[_0x4cb401(0x28f)](_0x2e93bd=>{const _0x4db789=_0x4cb401;if(_0x2e93bd[_0x4db789(0x177)][_0x4db789(0x1c1)]==0x0)return![];else return!![];})['sortBy'](_0x4cb401(0x202))[_0x4cb401(0x1eb)](),_0x4c13b0=[...config[_0x4cb401(0x18d)]];_0x4c13b0[_0x4cb401(0x130)]((_0x5359aa,_0xd34512)=>_0x5359aa[_0x4cb401(0x202)]>_0xd34512[_0x4cb401(0x202)]?-0x1:_0xd34512[_0x4cb401(0x202)]>_0x5359aa['date']?0x1:0x0);let _0x1060b4=0x1,_0x27d42e=[],_0x3b1278=0x0;_0x2102ea[_0x4cb401(0x199)]()[_0x4cb401(0x158)]()[_0x4cb401(0x136)]((_0x314b9c,_0x31dfd7)=>{const _0x23a997=_0x4cb401;if(_0x4c13b0[_0x3b1278]){if(_0x2102ea[_0x2102ea[_0x23a997(0x1c1)]-_0x31dfd7]&&_0x4c13b0[_0x3b1278][_0x23a997(0x202)]==_0x2102ea[_0x2102ea['length']-_0x31dfd7][_0x23a997(0x202)]){if(_0x31dfd7<_0x2102ea[_0x23a997(0x1c1)]){let _0x42ec18=0x0,_0x5547fd=0x0;_0x2102ea[_0x2102ea['length']-_0x31dfd7][_0x23a997(0x177)][_0x23a997(0x136)](_0x315945=>{const _0x40cd8e=_0x23a997;_0x5547fd+=_0x315945[_0x40cd8e(0x1df)]*_0x315945[_0x40cd8e(0x2d5)];}),_0x4c13b0[_0x3b1278][_0x23a997(0x210)][_0x23a997(0x136)](_0x2dd564=>{_0x42ec18+=_0x2dd564['number']*_0x2dd564['price'];}),_0x1060b4*=_0x42ec18/(_0x5547fd-_0x42ec18)+0x1;}_0x3b1278++;}}let _0x25b3e1=0x0;_0x314b9c['coins'][_0x23a997(0x136)](_0x537d69=>{const _0x50c5e0=_0x23a997;_0x25b3e1+=_0x537d69[_0x50c5e0(0x1df)]*_0x537d69['price'];}),_0x27d42e[_0x2102ea[_0x23a997(0x1c1)]-_0x31dfd7-0x1]=_0x25b3e1*(_0x1060b4-0x1);});let _0x1e0330=[];_0x4c13b0=[...config[_0x4cb401(0x18d)]]||[];let _0x6e368b=0x0;_0x3b1278=0x0,_0x2102ea[_0x4cb401(0x136)]((_0x287da3,_0x1dbb0f)=>{const _0x999113=_0x4cb401;if(_0x4c13b0[_0x3b1278]){const _0x534aab=fns['parse'](_0x4c13b0[_0x3b1278][_0x999113(0x202)],_0x999113(0x243),new Date()),_0xac49=fns['parse'](_0x287da3[_0x999113(0x202)],_0x999113(0x243),new Date());if(fns['isEqual'](_0x534aab,_0xac49)){let _0x1fbfdd=0x0;_0x4c13b0[_0x3b1278]['changes']['forEach'](_0x313a74=>{const _0x957d51=_0x999113;!_0x1e0330[_0x313a74[_0x957d51(0x285)]]?_0x1e0330[_0x313a74[_0x957d51(0x285)]]=_0x313a74[_0x957d51(0x1df)]:(_0x1fbfdd=_0x1e0330[_0x313a74[_0x957d51(0x285)]],_0x1e0330[_0x313a74[_0x957d51(0x285)]]+=_0x313a74['number']);const _0x112899=_0x287da3[_0x957d51(0x177)][_0x957d51(0x22b)](_0x2a95b7=>_0x2a95b7[_0x957d51(0x285)]==_0x313a74[_0x957d51(0x285)]);(!_0x112899||_0x112899[_0x957d51(0x1df)]==0x0)&&(_0x6e368b+=(-_0x313a74['number']-_0x1fbfdd)*_0x313a74[_0x957d51(0x2d5)]);}),_0x3b1278++;}}_0x287da3[_0x999113(0x177)][_0x999113(0x136)]((_0x1f2b3c,_0xbe2c47)=>{const _0x189e01=_0x999113;_0x1e0330[_0x1f2b3c['coin']]&&(_0x1f2b3c[_0x189e01(0x1bc)]=_0x1e0330[_0x1f2b3c[_0x189e01(0x285)]]);}),_0x28dcf6[_0x999113(0x148)]({'date':_0x287da3[_0x999113(0x202)],'eur':_0x287da3[_0x999113(0x266)],'usd':_0x287da3[_0x999113(0x214)],'offset':_0x27d42e[_0x1dbb0f],'netoffset':_0x6e368b,'coins':_0x287da3[_0x999113(0x177)]});});}return _0x28dcf6;}function emitPerformance(_0x4eeabb){const _0x162851=_0x5f1e29;_0x4eeabb['length']!==0x0?(proxyEmit('performance',_0x4eeabb),lastPerformanceEmitted=getDate()):proxyEmit(_0x162851(0x182),[]);}function getPerf(_0x59fce8,_0x12bebb){const _0x507e85=_0x5f1e29;let _0x136441=0x0,_0x56dd70=0x0,_0x30658b=0x0;_0x59fce8[_0x507e85(0x177)][_0x507e85(0x136)](_0x266f5b=>{const _0x371b19=_0x507e85;_0x136441+=_0x266f5b[_0x371b19(0x1df)]*_0x266f5b['price'];});_0x12bebb&&(_0x136441+=_0x59fce8['offset']);if(config[_0x507e85(0x278)]===_0x507e85(0x1b4)||config['basecoin']===_0x507e85(0x208)||config[_0x507e85(0x278)]===_0x507e85(0x20b))_0x56dd70=_0x136441*_0x59fce8[_0x507e85(0x266)],_0x30658b=_0x136441*_0x59fce8['usd'];else{if(usdBasecoins[_0x507e85(0x27f)](config[_0x507e85(0x278)]))_0x56dd70=_0x136441*_0x59fce8['eur']/_0x59fce8['usd'],_0x30658b=_0x136441;else config[_0x507e85(0x278)]===_0x507e85(0x1dd)&&(_0x56dd70=_0x136441,_0x30658b=_0x136441*_0x59fce8['usd']/_0x59fce8['eur']);}return[_0x136441,_0x56dd70,_0x30658b];}function getKPIs(_0x4eb8e2,_0x4b6acd='EUR'){const _0x5314ca=_0x5f1e29,_0x45b427=config['basecoin'],_0x54872e=lastBalances,_0x180ab5=currentCoins,_0x23ea50=getNormalizedPerformance(),_0x336256=_0x4eb8e2===_0x5314ca(0x278)?_0x45b427:_0x4eb8e2===_0x5314ca(0x25f)||_0x4eb8e2===_0x5314ca(0x160)?_0x4b6acd:_0x5314ca(0x29d)+_0x45b427,_0x21873d=_0x4eb8e2===_0x5314ca(0x168)?_0x5314ca(0x292):_0x4eb8e2===_0x5314ca(0x160)?_0x5314ca(0x292):_0x336256+'\x20value',_0x4c8b89=_0x4eb8e2===_0x5314ca(0x168)||_0x4eb8e2===_0x5314ca(0x160)?_0x5314ca(0x292):_0x336256+'\x20change';let _0x26dc71=0x0;_0x180ab5[_0x5314ca(0x136)](_0x39a7b9=>{const _0x3720b3=_0x5314ca;_0x26dc71+=_0x39a7b9[_0x3720b3(0x1df)]*_0x39a7b9['last'];});if(_0x4eb8e2===_0x5314ca(0x25f)||_0x4eb8e2===_0x5314ca(0x160)){if(_0x45b427==='BTC'||_0x45b427===_0x5314ca(0x208)||_0x45b427===_0x5314ca(0x20b))_0x26dc71=_0x26dc71*(_0x4b6acd==='EUR'?_0x54872e[_0x5314ca(0x266)]:_0x54872e[_0x5314ca(0x214)]);else{if(usdBasecoins['includes'](_0x45b427))_0x26dc71=_0x26dc71*(_0x4b6acd==='EUR'?_0x54872e['eur']/_0x54872e[_0x5314ca(0x214)]:0x1);else _0x45b427==='EUR'&&(_0x26dc71=_0x26dc71*(_0x4b6acd===_0x5314ca(0x1dd)?0x1:_0x54872e[_0x5314ca(0x214)]/_0x54872e[_0x5314ca(0x266)]));}}let _0x201b9f;if(_0x26dc71!==0x0){if(_0x4eb8e2===_0x5314ca(0x278))_0x201b9f=(_0x26dc71/startingBalances[_0x5314ca(0x278)]-0x1)*0x64;else{if(_0x4b6acd===_0x5314ca(0x1dd))_0x201b9f=(_0x26dc71/startingBalances[_0x5314ca(0x266)]-0x1)*0x64;else _0x201b9f=(_0x26dc71/startingBalances['usd']-0x1)*0x64;}let _0x3ac517=0x0;if(startingBalances['coins'])_0x180ab5[_0x5314ca(0x136)](_0x2a58e7=>{const _0x10cab8=_0x5314ca;let _0x34d098=startingBalances[_0x10cab8(0x177)][_0x10cab8(0x22b)](_0x4a8f28=>_0x4a8f28[_0x10cab8(0x285)]===_0x2a58e7[_0x10cab8(0x285)]);if(_0x34d098&&_0x34d098[_0x10cab8(0x285)]&&_0x2a58e7[_0x10cab8(0x1df)]!==0x0)_0x3ac517+=_0x34d098[_0x10cab8(0x1df)]*_0x2a58e7['last'];});let _0x57fab6=0x0;if(_0x23ea50['length']!==0x0){let _0x364b92=_0x23ea50[_0x23ea50[_0x5314ca(0x1c1)]-0x1];_0x57fab6=_0x364b92[_0x5314ca(0x2c9)];}_0x3ac517-=_0x57fab6;_0x4eb8e2===_0x5314ca(0x168)&&(_0x201b9f=(_0x26dc71-_0x3ac517)/startingBalances[_0x5314ca(0x278)]*0x64,_0x26dc71=_0x26dc71-_0x3ac517);if(_0x4eb8e2===_0x5314ca(0x160)){let _0x15b9d7=_0x4b6acd==='EUR'?startingBalances[_0x5314ca(0x266)]:startingBalances[_0x5314ca(0x214)];if(_0x45b427===_0x5314ca(0x1b4)||_0x45b427===_0x5314ca(0x208)||_0x45b427==='PAXG')_0x3ac517=_0x4b6acd===_0x5314ca(0x1dd)?_0x3ac517*_0x54872e[_0x5314ca(0x266)]:_0x3ac517*_0x54872e[_0x5314ca(0x214)];else{if(usdBasecoins[_0x5314ca(0x27f)](_0x45b427))_0x3ac517=_0x4b6acd===_0x5314ca(0x1dd)?_0x3ac517*_0x54872e['eur']/_0x54872e[_0x5314ca(0x214)]:_0x3ac517;else _0x45b427===_0x5314ca(0x1dd)&&(_0x3ac517=_0x4b6acd===_0x5314ca(0x1dd)?_0x3ac517:_0x3ac517*_0x54872e['usd']/_0x54872e[_0x5314ca(0x266)]);}_0x201b9f=(_0x26dc71-_0x3ac517)/_0x15b9d7*0x64,_0x26dc71=_0x26dc71-_0x3ac517;}if(_0x201b9f){if(_0x201b9f<0x64)_0x201b9f=_0x201b9f[_0x5314ca(0x1ed)](0x2);else{if(_0x201b9f<0x3e8)_0x201b9f=_0x201b9f[_0x5314ca(0x1ed)](0x1);else _0x201b9f=_0x201b9f[_0x5314ca(0x1ed)](0x0);}}else _0x201b9f=Number('0')[_0x5314ca(0x1ed)](0x2);if(_0x26dc71){if(Math[_0x5314ca(0x206)](_0x26dc71)<0.000001)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x2);else{if(Math[_0x5314ca(0x206)](_0x26dc71)<0.1)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x6);else{if(Math[_0x5314ca(0x206)](_0x26dc71)<0x1)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x5);else{if(Math[_0x5314ca(0x206)](_0x26dc71)<0xa)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x4);else{if(Math[_0x5314ca(0x206)](_0x26dc71)<0x64)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x3);else{if(Math['abs'](_0x26dc71)<0x3e8)_0x26dc71=_0x26dc71[_0x5314ca(0x1ed)](0x2);else _0x26dc71=_0x26dc71['toFixed'](0x2);}}}}}}else _0x26dc71=Number('0')[_0x5314ca(0x1ed)](0x2);}else _0x201b9f=Number('0')[_0x5314ca(0x1ed)](0x2);return{'value':_0x26dc71,'change':_0x201b9f,'leftTxt':_0x21873d,'rightTxt':_0x4c8b89};}async function getStartingBalances(_0x3247b3,_0x1e643a=!![]){const _0x3fad5c=_0x5f1e29;if(_0x3247b3[_0x3fad5c(0x1c1)]!==0x0){const [_0x177b47,_0x982f22,_0x554384]=getPerf(_0x3247b3[0x0],!![]);let _0x4672dc=[];config[_0x3fad5c(0x2cf)][_0x3fad5c(0x136)](_0xba427a=>{const _0x207636=_0x3fad5c;let _0x374e5d=0x0,_0x35ce5b;config[_0x207636(0x18d)][_0x207636(0x136)](_0x4af6b8=>{const _0x2f120b=_0x207636;let _0x31b1c5=_0x4af6b8['changes'][_0x2f120b(0x22b)](_0x4ccab8=>_0x4ccab8[_0x2f120b(0x285)]==_0xba427a['coin']);if(_0x31b1c5){_0x374e5d+=_0x31b1c5[_0x2f120b(0x1df)];if(!_0x35ce5b)_0x35ce5b=_0x31b1c5['price'];}}),_0x4672dc[_0x207636(0x148)]({'coin':_0xba427a['coin'],'number':_0x374e5d,'initialprice':_0x35ce5b});});const _0x1d09e9={'basecoin':_0x177b47,'eur':_0x982f22,'usd':_0x554384,'coins':_0x4672dc};if(_0x1e643a)proxyEmit('starting-balances',_0x1d09e9);startingBalances=_0x1d09e9;}}function headlessMode(_0x5cc4b2){const _0x4e1ef0=_0x5f1e29;let _0x46710e=_0x5cc4b2[_0x4e1ef0(0x2cf)],_0x383eb7=_0x5cc4b2[_0x4e1ef0(0x28c)],_0x1b307a=[];for(let _0x102e9f of _0x46710e){if(_0x102e9f[_0x4e1ef0(0x285)]!=config[_0x4e1ef0(0x278)]){if(_0x102e9f['delta']>=_0x383eb7/0x64){if(_0x102e9f[_0x4e1ef0(0x256)])_0x1b307a[_0x4e1ef0(0x148)](_0x102e9f);}else{if(_0x102e9f[_0x4e1ef0(0x239)]<=-_0x383eb7/0x64){if(_0x102e9f['valid'])_0x1b307a[_0x4e1ef0(0x148)](_0x102e9f);}}}}_0x1b307a['length']>0x0&&(lockOrders==ORDERS[_0x4e1ef0(0x1c0)]&&!coolingDown&&_0x1b307a[_0x4e1ef0(0x136)](_0x1cf765=>{const _0x3bd1f5=_0x4e1ef0;logger[_0x3bd1f5(0x2a7)](_0x3bd1f5(0x1ab)+_0x1cf765[_0x3bd1f5(0x285)]+'\x20'+_0x1cf765[_0x3bd1f5(0x1df)]+'\x20'+_0x1cf765[_0x3bd1f5(0x299)]+'\x20'+_0x1cf765[_0x3bd1f5(0x19b)]+'%\x20'+_0x1cf765['target']+'%\x20'+(0x64*_0x1cf765[_0x3bd1f5(0x239)])[_0x3bd1f5(0x1ed)](0x2)+_0x3bd1f5(0x264)+_0x383eb7['toFixed'](0x2)+'%)');}),placeOrder(_0x1b307a));}function notifyBalance(_0x7996bf){const _0x29e4af=_0x5f1e29;let _0x5b80c3=_0x7996bf[_0x29e4af(0x2cf)],_0x38f890=_0x7996bf[_0x29e4af(0x28c)],_0x209f33=[];for(let _0x5af230 of _0x5b80c3){if(_0x5af230['coin']!=config[_0x29e4af(0x278)]){if(_0x5af230[_0x29e4af(0x239)]>=_0x38f890/0x64){if(_0x5af230[_0x29e4af(0x256)])_0x209f33[_0x29e4af(0x148)](_0x5af230);}else{if(_0x5af230[_0x29e4af(0x239)]<=-_0x38f890/0x64){if(_0x5af230[_0x29e4af(0x256)])_0x209f33[_0x29e4af(0x148)](_0x5af230);}}}}if(_0x209f33[_0x29e4af(0x1c1)]>0x0){let _0x241fb7=_0x209f33[_0x29e4af(0x225)](_0x311a30=>_0x311a30[_0x29e4af(0x285)]);_0x241fb7[_0x29e4af(0x130)]();let _0x4fcaad=_0x241fb7[_0x29e4af(0x275)](',\x20');if(!lastCoinsToBalance)logHistory(_0x29e4af(0x218),_0x29e4af(0x15b));lastCoinsToBalance=_0x4fcaad;}}function symbolToCoin(_0xe76f68){const _0x2ac5cd=_0x5f1e29;let _0x3956d6;if(_0xe76f68[_0x2ac5cd(0x27f)]('/'+config[_0x2ac5cd(0x278)]))_0x3956d6=_0xe76f68[_0x2ac5cd(0x277)]('/'+config[_0x2ac5cd(0x278)],'');if(_0xe76f68[_0x2ac5cd(0x27f)](config[_0x2ac5cd(0x278)]+'/'))_0x3956d6=_0xe76f68[_0x2ac5cd(0x277)](config['basecoin']+'/','');return _0x3956d6;}async function unlockOrders(){const _0x1d7389=_0x5f1e29;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1d7389(0x2d2)]){logger[_0x1d7389(0x2a7)](_0x1d7389(0x151)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5324f8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5324f8,setBlockTransactionDetection(![]),validateOrdersState=_0x1d7389(0x1bc),persistOpenOrders([]),lockOrders=ORDERS[_0x1d7389(0x1c0)],logger['debug'](_0x1d7389(0x29a));}}async function validateOrders(_0x26ecec){const _0x51cc4a=_0x5f1e29;if(_0x26ecec)validateOrdersState=_0x26ecec;logger[_0x51cc4a(0x2a7)](_0x51cc4a(0x166)+validateOrdersState+_0x51cc4a(0x26b)+(lockOrders==0x1?_0x51cc4a(0x18b):lockOrders==0x2?_0x51cc4a(0x1f4):'ORDERS.UNLOCKED'));let _0x35672d=[],_0x2e05d9=config['ordertype']==_0x51cc4a(0x149)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x51cc4a(0x2ba)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x51cc4a(0x2d2)])return;logger[_0x51cc4a(0x2a7)](_0x51cc4a(0x185)+validateOrdersState),lastOrders['forEach'](_0x323be6=>{const _0x46ed47=_0x51cc4a;let _0x4e7fb5=![];_0x323be6[_0x46ed47(0x165)]>0x0&&(_0x4e7fb5=!![]),_0x35672d['push'](_0x4e7fb5),_0x4e7fb5&&config[_0x46ed47(0x276)]!=_0x46ed47(0x149)&&logHistory(_0x46ed47(0x20c),_0x46ed47(0x1db)+_0x323be6[_0x46ed47(0x1d1)]+'\x20'+_0x323be6[_0x46ed47(0x188)]+'\x20#'+formatResult(_0x323be6[_0x46ed47(0x165)],0x8)+'\x20@'+formatResult(_0x323be6['price'],0x8));}),_0x35672d[_0x51cc4a(0x136)]((_0x3c2600,_0x5c1283)=>{const _0x13f2df=_0x51cc4a;if(_0x3c2600)lastOrders[_0x13f2df(0x26d)](_0x5c1283,0x1);}),persistOpenOrders(lastOrders);const _0x1c5815=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState=='initial'){validateOrdersState=_0x51cc4a(0x175);if(_0x35672d[_0x51cc4a(0x27f)](![])){if(config[_0x51cc4a(0x276)]==_0x51cc4a(0x149)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x51cc4a(0x175)){if(_0x35672d['includes'](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x51cc4a(0x149)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x51cc4a(0x257))_0x35672d[_0x51cc4a(0x27f)](![])&&(config['ordertype']==_0x51cc4a(0x149)?logHistory(_0x51cc4a(0x17c),_0x51cc4a(0x203)+Math[_0x51cc4a(0x194)](_0x2e05d9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1c5815):(await cancelOrders(),logHistory('success',_0x51cc4a(0x134)+Math[_0x51cc4a(0x194)](_0x2e05d9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x1c5815))),await unlockOrders();else{if(validateOrdersState==_0x51cc4a(0x29b)){if(config[_0x51cc4a(0x276)]!=_0x51cc4a(0x149))logHistory(_0x51cc4a(0x17c),_0x51cc4a(0x20f)+_0x1c5815);await unlockOrders();}}}}}async function cancelOrders(){const _0x1c998e=_0x5f1e29;lastOrders[_0x1c998e(0x136)](async _0x2b632c=>{const _0x3633ec=_0x1c998e;try{const _0x53ac89=await exchange['cancelOrder'](_0x2b632c[_0x3633ec(0x1dc)],_0x2b632c['symbol']);}catch(_0x133593){if(_0x133593[_0x3633ec(0x231)]()[_0x3633ec(0x27f)](_0x3633ec(0x1f7))){}else await handleError(_0x133593,'cancelOrders()');}});}async function initCoinResults(_0x2d596e){const _0x5d6a4f=_0x5f1e29;_0x2d596e?logger[_0x5d6a4f(0x2a7)](_0x5d6a4f(0x13b)+_0x2d596e):logger['debug']('Initializing\x20coin\x20results'),config[_0x5d6a4f(0x2cf)][_0x5d6a4f(0x136)](_0x7958d7=>{const _0x4cdb45=_0x5d6a4f;if(!_0x7958d7[_0x4cdb45(0x15a)]&&_0x7958d7[_0x4cdb45(0x285)]!=config['basecoin']){const _0x17992d=currentCoins[_0x4cdb45(0x22b)](_0x2fdea1=>_0x2fdea1[_0x4cdb45(0x285)]==_0x7958d7[_0x4cdb45(0x285)]),_0x423baa=gTicker[noslash(_0x7958d7[_0x4cdb45(0x1d1)])];let _0x127731=_0x17992d?_0x17992d[_0x4cdb45(0x1df)]:null,_0x228d2d=_0x7958d7[_0x4cdb45(0x158)]?0x1/_0x423baa:_0x423baa,_0x49c703;config[_0x4cdb45(0x18d)][_0x4cdb45(0x136)](_0x5cf1f4=>{const _0x175ec1=_0x4cdb45;!_0x49c703&&(_0x49c703=_0x5cf1f4[_0x175ec1(0x210)][_0x175ec1(0x22b)](_0x273abc=>_0x273abc[_0x175ec1(0x285)]==_0x7958d7[_0x175ec1(0x285)]),_0x49c703&&(_0x127731=_0x49c703[_0x175ec1(0x1df)],_0x228d2d=_0x49c703[_0x175ec1(0x2d5)]));});let _0x14e609=dbCoinResults[_0x4cdb45(0x128)](_0x4cdb45(0x177))['find']({'coin':_0x7958d7[_0x4cdb45(0x285)]})['value']();if(!_0x14e609){const _0x5f1632={'coin':_0x7958d7[_0x4cdb45(0x285)],'number':_0x127731,'breakeven':_0x228d2d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4cdb45(0x128)](_0x4cdb45(0x177))[_0x4cdb45(0x148)](_0x5f1632)[_0x4cdb45(0x193)]();}else{if(_0x2d596e&&_0x7958d7['coin']==_0x2d596e){const _0x252afc={'coin':_0x7958d7[_0x4cdb45(0x285)],'number':_0x127731,'breakeven':_0x228d2d,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4cdb45(0x128)]('coins')[_0x4cdb45(0x22b)]({'coin':_0x7958d7['coin']})[_0x4cdb45(0x1a7)](_0x252afc)[_0x4cdb45(0x193)]();}}}});}async function updateCoinResults(_0x2a4fd8,_0x190523=![]){const _0x366724=_0x5f1e29;let _0x50f80b,_0xdd117a,_0x34977e,_0xf11e3e,_0x3e25d2,_0x4f7046,_0x440fa1=dbCoinResults[_0x366724(0x128)]('coins')[_0x366724(0x22b)]({'coin':_0x2a4fd8[_0x366724(0x285)]})[_0x366724(0x1eb)](),_0x58f9d7=![];_0x440fa1&&Object[_0x366724(0x197)](_0x440fa1)[_0x366724(0x136)](([_0x1d9719,_0x16be39])=>{if(_0x16be39==null)_0x58f9d7=!![];});(!_0x440fa1||_0x58f9d7)&&(await initCoinResults(_0x2a4fd8[_0x366724(0x285)]),_0x440fa1=dbCoinResults[_0x366724(0x128)](_0x366724(0x177))[_0x366724(0x22b)]({'coin':_0x2a4fd8[_0x366724(0x285)]})[_0x366724(0x1eb)]());_0x2a4fd8[_0x366724(0x158)]&&(_0x4f7046={'filled':_0x2a4fd8[_0x366724(0x165)]*_0x2a4fd8[_0x366724(0x2d5)],'amount':_0x2a4fd8[_0x366724(0x165)]*_0x2a4fd8[_0x366724(0x2d5)],'side':_0x2a4fd8[_0x366724(0x188)]=='sell'?_0x366724(0x14c):_0x366724(0x13c),'price':0x1/_0x2a4fd8[_0x366724(0x2d5)]},_0x2a4fd8={..._0x2a4fd8,..._0x4f7046});_0x190523?_0xdd117a=_0x2a4fd8[_0x366724(0x188)]==_0x366724(0x14c)?_0x440fa1[_0x366724(0x1df)]+_0x2a4fd8[_0x366724(0x165)]:_0x440fa1[_0x366724(0x1df)]-_0x2a4fd8[_0x366724(0x165)]:_0xdd117a=await getCoinNumber(_0x2a4fd8[_0x366724(0x285)]);if(_0x2a4fd8[_0x366724(0x28e)]&&_0x2a4fd8[_0x366724(0x28e)][_0x366724(0x237)]==config['basecoin'])_0x50f80b=Number(_0x2a4fd8[_0x366724(0x28e)][_0x366724(0x25c)]);else{if(_0x2a4fd8[_0x366724(0x28e)]&&_0x2a4fd8['fee'][_0x366724(0x237)]==_0x366724(0x238)&&!_0x190523&&config[_0x366724(0x278)]!=_0x366724(0x20b))_0x50f80b=Number(_0x2a4fd8[_0x366724(0x28e)][_0x366724(0x25c)])*gTicker[_0x366724(0x238)+config['basecoin']];else _0x50f80b=defaultFee*_0x2a4fd8[_0x366724(0x165)]*_0x2a4fd8[_0x366724(0x2d5)];}_0x2a4fd8[_0x366724(0x188)]==_0x366724(0x14c)?(_0x34977e=_0xdd117a!=0x0?(_0x440fa1[_0x366724(0x1de)]*_0x440fa1['number']+_0x2a4fd8[_0x366724(0x2d5)]*(_0xdd117a-_0x440fa1[_0x366724(0x1df)])+_0x50f80b)/_0xdd117a:0x0,_0xf11e3e=_0x440fa1[_0x366724(0x27d)]):(_0x34977e=_0xdd117a!=0x0?(_0x440fa1[_0x366724(0x1de)]*_0x440fa1[_0x366724(0x1df)]-_0x2a4fd8['price']*(_0x440fa1[_0x366724(0x1df)]-_0xdd117a)+_0x50f80b)/_0xdd117a:0x0,_0xf11e3e=_0x440fa1[_0x366724(0x27d)]+(_0x2a4fd8[_0x366724(0x2d5)]-_0x440fa1[_0x366724(0x1de)])*_0x2a4fd8[_0x366724(0x165)]);_0x3e25d2=(_0x2a4fd8['price']-_0x34977e-_0x50f80b/_0x2a4fd8[_0x366724(0x165)])*_0xdd117a;let _0x23cfd1={'coin':_0x2a4fd8[_0x366724(0x285)],'number':_0xdd117a,'breakeven':formatResult(_0x34977e,0x8),'realized':formatResult(_0xf11e3e,0x8),'unrealized':formatResult(_0x3e25d2,0x8),'fees':formatResult(_0x440fa1[_0x366724(0x1a8)]+_0x50f80b,0x8),'sells':_0x2a4fd8[_0x366724(0x188)]=='sell'?_0x440fa1['sells']+0x1:_0x440fa1['sells'],'buys':_0x2a4fd8['side']==_0x366724(0x14c)?_0x440fa1[_0x366724(0x271)]+0x1:_0x440fa1[_0x366724(0x271)]};dbCoinResults[_0x366724(0x128)](_0x366724(0x177))[_0x366724(0x22b)]({'coin':_0x2a4fd8[_0x366724(0x285)]})[_0x366724(0x1a7)](_0x23cfd1)[_0x366724(0x193)]();if(!_0x190523){if(_0x2a4fd8[_0x366724(0x28e)]&&_0x2a4fd8['fee']['currency']==_0x366724(0x238)){const _0xd190e7=currentCoins[_0x366724(0x22b)](_0xc5dc67=>_0xc5dc67['coin']==_0x366724(0x238));if(_0xd190e7){let _0x3c7b50=dbCoinResults[_0x366724(0x128)](_0x366724(0x177))['find']({'coin':_0x366724(0x238)})[_0x366724(0x1eb)]();_0x23cfd1={..._0x3c7b50,'number':_0xd190e7['number']},dbCoinResults[_0x366724(0x128)](_0x366724(0x177))[_0x366724(0x22b)]({'coin':_0x366724(0x238)})[_0x366724(0x1a7)](_0x23cfd1)[_0x366724(0x193)]();}}}}async function placeOrder(_0xedea86){const _0x5e6440=_0x5f1e29,_0x29da02=config['ordertype']==_0x5e6440(0x149)?_0x5e6440(0x149):'limit';if(lockOrders==ORDERS[_0x5e6440(0x1c0)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x5e6440(0x2d2)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState='initial';let _0x59d1e9=![];lastOrders=[];for(const _0x3f85e6 of _0xedea86){let _0x4e4892,_0x532015,_0x34b7c2,_0x1fe212,_0xdec5af,_0x4fe721=_0x3f85e6['symbol'];try{const _0x4c7825=await exchange['fetchTicker'](_0x4fe721);_0x4e4892=_0x3f85e6[_0x5e6440(0x158)]?0x1/_0x3f85e6['last']:_0x3f85e6['last'],_0x532015=_0x4c7825[_0x5e6440(0x20a)],_0x34b7c2=_0x4c7825[_0x5e6440(0x2d3)];_0x3f85e6[_0x5e6440(0x158)]?(_0x1fe212=_0x3f85e6['side']==_0x5e6440(0x14c)?'sell':_0x5e6440(0x14c),_0xdec5af=Math[_0x5e6440(0x206)](_0x3f85e6[_0x5e6440(0x1fb)])/_0x4e4892):(_0x1fe212=_0x3f85e6['side'],_0xdec5af=Math[_0x5e6440(0x206)](_0x3f85e6[_0x5e6440(0x1fb)]));_0x29da02=='limit'&&(config['ordertype']==_0x5e6440(0x2a0)&&(_0x4e4892=_0x1fe212=='buy'?_0x532015:_0x34b7c2),config[_0x5e6440(0x276)]=='limit-low'&&(_0x4e4892=_0x1fe212==_0x5e6440(0x14c)?_0x34b7c2:_0x532015));_0xdec5af=formatResult(_0xdec5af,0x8),_0x4e4892=formatResult(_0x4e4892,0x8);const _0x1ec575=_0x1fe212==_0x5e6440(0x13c)?config[_0x5e6440(0x25a)]?String[_0x5e6440(0x220)]('0x'+config['emojisell'])+'\x20':'':config[_0x5e6440(0x1d3)]?String[_0x5e6440(0x220)]('0x'+config['emojibuy'])+'\x20':'',_0x4f59fd=_0x29da02==_0x5e6440(0x149)?_0x5e6440(0x1cc):config[_0x5e6440(0x276)]=='limit-high'?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x5741c7=(Math[_0x5e6440(0x232)](Math[_0x5e6440(0x29e)]()*0x35a4e900)+0x5f5e100)[_0x5e6440(0x231)]();lastOrders[_0x5e6440(0x148)]({'customId':_0x5741c7,'symbol':_0x4fe721,'coin':_0x3f85e6[_0x5e6440(0x285)],'amount':_0xdec5af,'price':_0x4e4892,'side':_0x1fe212,'reverse':_0x3f85e6[_0x5e6440(0x158)],'filled':0x0});if(_0x29da02==_0x5e6440(0x149))logHistory(_0x5e6440(0x20c),''+_0x1ec575+_0x4f59fd+'\x20order:\x20'+_0x4fe721+'\x20'+_0x1fe212+'\x20#'+formatResult(_0xdec5af,0x8)+'\x20@'+formatResult(_0x4e4892,0x8));else logHistory(_0x5e6440(0x20c),''+_0x1ec575+_0x4f59fd+_0x5e6440(0x279)+_0x4fe721+'\x20'+_0x1fe212+'\x20#'+formatResult(_0xdec5af,0x8)+'\x20@'+formatResult(_0x4e4892,0x8));let _0x5425c7;_0x29da02==_0x5e6440(0x149)?_0x1fe212==_0x5e6440(0x14c)&&['Bybit',_0x5e6440(0x1b0),'Cex',_0x5e6440(0x235),'Huobipro']['includes'](config[_0x5e6440(0x2a8)])?_0x5425c7=await exchange[_0x5e6440(0x1ea)](_0x4fe721,_0x29da02,_0x1fe212,_0xdec5af,_0x4e4892):_0x5425c7=await exchange[_0x5e6440(0x1ea)](_0x4fe721,_0x29da02,_0x1fe212,_0xdec5af,undefined):_0x5425c7=await exchange[_0x5e6440(0x1ea)](_0x4fe721,_0x29da02,_0x1fe212,_0xdec5af,_0x4e4892);logger[_0x5e6440(0x2a7)]('ID:\x20'+_0x5425c7['id']+_0x5e6440(0x27b)+_0x5741c7);const _0x196afc=lastOrders[_0x5e6440(0x1c1)]-0x1;if(_0x196afc>=0x0&&lastOrders[_0x196afc]['customId']==_0x5741c7){lastOrders[_0x196afc]['orderId']=_0x5425c7['id'];if(_0x5425c7['amount'])lastOrders[_0x196afc]['amount']=_0x5425c7[_0x5e6440(0x12c)];if(_0x5425c7[_0x5e6440(0x2d5)])lastOrders[_0x196afc][_0x5e6440(0x2d5)]=_0x5425c7[_0x5e6440(0x2d5)];lastOrders[_0x196afc][_0x5e6440(0x28e)]=_0x5425c7[_0x5e6440(0x28e)];}if(config['cooldown']!=0x0){let _0x5eff30=null;if(cooldownTracker[_0x5e6440(0x1c1)]==config[_0x5e6440(0x23b)]-0x1)_0x5eff30=cooldownTracker['shift']();const _0x5b69fa=getTimeStamp();cooldownTracker[_0x5e6440(0x148)](_0x5b69fa);if(_0x5eff30){const _0x21f47b=fns[_0x5e6440(0x1cf)](new Date(_0x5b69fa),new Date(_0x5eff30));if(_0x21f47b<cooldownInterval){logHistory('error',_0x5e6440(0x209)+config['cooldown']+_0x5e6440(0x27a)+cooldownInterval/0x3c+_0x5e6440(0x24a)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x30eb72){if(_0x30eb72[_0x5e6440(0x231)]()[_0x5e6440(0x27f)](_0x5e6440(0x281)))lastOrders=lastOrders[_0x5e6440(0x28f)](_0x2319f6=>_0x2319f6[_0x5e6440(0x1d1)]!=_0x4fe721),logHistory(_0x5e6440(0x21a),_0x5e6440(0x131)+_0x4fe721),_0x59d1e9=!![];else{if(_0x30eb72[_0x5e6440(0x231)]()['includes'](_0x5e6440(0x1e9)))lastOrders=lastOrders['filter'](_0x208492=>_0x208492['symbol']!=_0x4fe721),logHistory(_0x5e6440(0x21a),_0x5e6440(0x161)+_0x4fe721),_0x59d1e9=!![];else{if(_0x30eb72[_0x5e6440(0x231)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x5e6440(0x28f)](_0x58d2eb=>_0x58d2eb[_0x5e6440(0x1d1)]!=_0x4fe721),logHistory(_0x5e6440(0x21a),_0x5e6440(0x2d1)+_0x4fe721),logger[_0x5e6440(0x2a7)](_0x30eb72),_0x59d1e9=!![];else _0x30eb72['toString']()[_0x5e6440(0x27f)](_0x5e6440(0x156))?(lastOrders=lastOrders['filter'](_0x2a7f54=>_0x2a7f54[_0x5e6440(0x1d1)]!=_0x4fe721),logHistory(_0x5e6440(0x21a),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4fe721),_0x59d1e9=!![]):(lastOrders=lastOrders['filter'](_0x259696=>_0x259696['symbol']!=_0x4fe721),await handleError(_0x30eb72,_0x5e6440(0x216),_0x4fe721));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x5e6440(0x1c1)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1654f2=config[_0x5e6440(0x276)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x5e6440(0x2ba)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x40e354=_0x5e6440;validateOrders(_0x40e354(0x257));},_0x1654f2);}else unlockOrders();_0x59d1e9&&config[_0x5e6440(0x16f)]&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x5e6440(0x139)));}else{if(coolingDown)!config['headless']&&logHistory(_0x5e6440(0x21a),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x5e6440(0x1c0)]&&(!config[_0x5e6440(0x16f)]&&(config[_0x5e6440(0x276)]==_0x5e6440(0x149)?logHistory(_0x5e6440(0x21a),_0x5e6440(0x2ac)):logHistory(_0x5e6440(0x21a),_0x5e6440(0x1d6))));}}function persistOpenOrders(_0x4b79c6){const _0x1ecedc=_0x5f1e29,_0x260a80={...config,'openOrders':_0x4b79c6};let _0x3c7d5b=dbConfig[_0x1ecedc(0x128)](_0x1ecedc(0x145))[_0x1ecedc(0x22b)]({'botID':botID})[_0x1ecedc(0x1eb)]();_0x3c7d5b&&dbConfig[_0x1ecedc(0x128)]('bot')[_0x1ecedc(0x22b)]({'botID':botID})[_0x1ecedc(0x1a7)](_0x260a80)['write']();}function restoreOrders(){const _0x965760=_0x5f1e29;let _0x359e15;config[_0x965760(0x16a)]&&allOpenOrders[_0x965760(0x136)](_0x414fc5=>{const _0x551562=_0x965760,_0x1fc296=config[_0x551562(0x16a)]['find'](_0x250a92=>_0x250a92[_0x551562(0x1dc)]==_0x414fc5['id']);_0x1fc296&&(lastOrders[_0x551562(0x148)](_0x1fc296),_0x359e15=_0x414fc5[_0x551562(0x224)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x965760(0x2d2)],validateOrdersState=_0x965760(0x175),allOrdersPlaced=!![];const _0x31582f=new Date()[_0x965760(0x1e7)](),_0x4720fb=config[_0x965760(0x276)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x965760(0x2ba)]*0x3c*0x3e8;if(_0x359e15+_0x4720fb>_0x31582f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x6efecc=_0x965760;validateOrders(_0x6efecc(0x257));},_0x359e15+_0x4720fb-_0x31582f);}else validateOrders(_0x965760(0x257));}}async function sendMetricsTelegram(){const _0x1ad696=_0x5f1e29;if(!coinsLoaded){process['send']({'telegrammsg':_0x1ad696(0x246)},_0x133689=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2478ff='';if(config[_0x1ad696(0x14a)])_0x2478ff='<b>'+config[_0x1ad696(0x1c8)]+_0x1ad696(0x132);else _0x2478ff='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0xd2d1bc=getKPIs(_0x1ad696(0x278)),_0x2b4bf8=getKPIs(_0x1ad696(0x25f),config[_0x1ad696(0x25f)]),_0x3f2a0a=getKPIs(_0x1ad696(0x168)),_0x463bf6=getKPIs(_0x1ad696(0x160),config[_0x1ad696(0x25f)]);_0x2478ff+=_0x1ad696(0x211),_0x2478ff+=_0xd2d1bc[_0x1ad696(0x19a)]+_0x1ad696(0x1bf)+_0xd2d1bc[_0x1ad696(0x1eb)]+'\x0a',_0x2478ff+=_0xd2d1bc[_0x1ad696(0x2ab)]+':\x20'+_0xd2d1bc[_0x1ad696(0x1b1)]+'%\x0a',_0x2478ff+=_0x2b4bf8[_0x1ad696(0x19a)]+_0x1ad696(0x1bf)+_0x2b4bf8['value']+'\x0a',_0x2478ff+=_0x2b4bf8[_0x1ad696(0x2ab)]+':\x20'+_0x2b4bf8[_0x1ad696(0x1b1)]+'%\x0a',_0x2478ff+=_0x3f2a0a[_0x1ad696(0x19a)]+':\x20'+_0x3f2a0a[_0x1ad696(0x1eb)]+'\x20('+config['basecoin']+')\x0a',_0x2478ff+=_0x3f2a0a['rightTxt']+':\x20'+_0x3f2a0a[_0x1ad696(0x1b1)]+_0x1ad696(0x264)+config[_0x1ad696(0x278)]+')\x0a',_0x2478ff+=_0x463bf6[_0x1ad696(0x19a)]+':\x20'+_0x463bf6[_0x1ad696(0x1eb)]+'\x20('+config[_0x1ad696(0x25f)]+')\x0a',_0x2478ff+=_0x463bf6[_0x1ad696(0x2ab)]+':\x20'+_0x463bf6['change']+'%\x20('+config[_0x1ad696(0x25f)]+')\x0a',_0x2478ff+='</pre>',process['send']({'telegrammsg':_0x2478ff},_0x51f2f4=>{});}async function sendPortfolioTelegram(){const _0x2f4216=_0x5f1e29;if(!coinsLoaded||!currentCoins[0x0][_0x2f4216(0x19b)]){process[_0x2f4216(0x1ce)]({'telegrammsg':_0x2f4216(0x246)},_0xa920f2=>{});return;}let _0x4250a3='';if(config[_0x2f4216(0x14a)])_0x4250a3=_0x2f4216(0x2c8)+config[_0x2f4216(0x1c8)]+_0x2f4216(0x298);else _0x4250a3=_0x2f4216(0x1f9)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x4250a3+=_0x2f4216(0x211),_0x4250a3+=_0x2f4216(0x2d4),_0x4250a3+=_0x2f4216(0x162),_0x4250a3+=_0x2f4216(0x2d4),currentCoins['forEach'](_0x4e73c3=>{const _0x15b9c7=_0x2f4216;_0x4250a3+=_0x4e73c3[_0x15b9c7(0x285)][_0x15b9c7(0x17b)](0x7)+'|\x20'+formatPad(_0x4e73c3[_0x15b9c7(0x19b)],0x2,0x6)+'|\x20'+formatPad(_0x4e73c3[_0x15b9c7(0x164)],0x2,0x6)+'|\x20'+formatPad(_0x4e73c3[_0x15b9c7(0x239)]*0x64,0x2,0x6)+'\x0a';}),_0x4250a3+='</pre>',process[_0x2f4216(0x1ce)]({'telegrammsg':_0x4250a3},_0x42cc8e=>{});}function formatPad(_0x5d3fdc,_0x3506ac,_0x5d5ca7){const _0x88b252=_0x5f1e29,_0x444006=formatResultString(_0x5d3fdc,_0x3506ac);return _0x444006?_0x444006['padStart'](_0x5d5ca7):''[_0x88b252(0x293)](_0x5d5ca7);}function logHistory(_0x37fde8,_0x485207,_0x2ee59f=''){const _0x1ce59b=_0x5f1e29;logger[_0x1ce59b(0x1d8)](''+_0x485207);let _0x468237={'time':getTimeStamp(),'type':_0x37fde8,'event':_0x485207};dbLogs[_0x1ce59b(0x128)](_0x1ce59b(0x1d7))[_0x1ce59b(0x148)](_0x468237)['write']();if(_0x2ee59f=='')_0x2ee59f=_0x485207;proxyEmit(_0x1ce59b(0x2cc),{'log':_0x468237,'summary':_0x2ee59f}),process[_0x1ce59b(0x1ce)]({'telegram':{..._0x468237,'botname':config[_0x1ce59b(0x1c8)],'showname':config[_0x1ce59b(0x14a)]}},_0x20205b=>{});}function emitHistory(_0x51096f={}){const _0x1d22ed=_0x5f1e29;Object[_0x1d22ed(0x204)](_0x51096f)[_0x1d22ed(0x1c1)]==0x0&&(_0x51096f={'type':[_0x1d22ed(0x20c),_0x1d22ed(0x2cc)],'event':'','page':0x1});if(_0x51096f[_0x1d22ed(0x229)][_0x1d22ed(0x27f)](_0x1d22ed(0x2cc)))_0x51096f[_0x1d22ed(0x229)]['splice'](_0x51096f[_0x1d22ed(0x229)][_0x1d22ed(0x1b5)]('event'),0x1,_0x1d22ed(0x21a),_0x1d22ed(0x218),_0x1d22ed(0x17c));if(dbLogs[_0x1d22ed(0x1f1)](_0x1d22ed(0x1d7))[_0x1d22ed(0x1eb)]()){let _0x1ec0ba=dbLogs[_0x1d22ed(0x128)](_0x1d22ed(0x1d7))['filter'](_0x4cf06d=>{const _0x4d2902=_0x1d22ed;if(_0x51096f['type'][_0x4d2902(0x1c1)]==0x0)return![];else return _0x51096f[_0x4d2902(0x229)][_0x4d2902(0x27f)](_0x4cf06d[_0x4d2902(0x229)]);})[_0x1d22ed(0x28f)](_0x27b3c7=>{const _0x32da67=_0x1d22ed;if(_0x51096f['event']=='')return!![];else return _0x27b3c7[_0x32da67(0x2cc)][_0x32da67(0x18f)]()[_0x32da67(0x27f)](_0x51096f[_0x32da67(0x2cc)][_0x32da67(0x18f)]());})[_0x1d22ed(0x20e)](_0x1d22ed(0x23a)),_0x40a17f=_0x1ec0ba[_0x1d22ed(0x1eb)]()[_0x1d22ed(0x1c1)];_0x1ec0ba=_0x1ec0ba[_0x1d22ed(0x158)]()[_0x1d22ed(0x199)]((_0x51096f[_0x1d22ed(0x25b)]-0x1)*logPageSize,_0x51096f[_0x1d22ed(0x25b)]*logPageSize-0x1)[_0x1d22ed(0x158)]()[_0x1d22ed(0x1eb)](),proxyEmit('event-history',{'logs':_0x1ec0ba,'total':_0x40a17f});}else proxyEmit(_0x1d22ed(0x14d),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x14452a){const _0x4ff3f2=_0x5f1e29;if(dbLogs[_0x4ff3f2(0x1f1)](_0x4ff3f2(0x1d7))[_0x4ff3f2(0x1eb)]()){const _0x15ad2d=dbLogs[_0x4ff3f2(0x128)](_0x4ff3f2(0x1d7))[_0x4ff3f2(0x20e)](_0x4ff3f2(0x23a))[_0x4ff3f2(0x28f)](_0xf10c31=>{const _0x5519cb=_0x4ff3f2;return _0xf10c31[_0x5519cb(0x229)]==_0x5519cb(0x20c);})['value']();dbLogs[_0x4ff3f2(0x128)](_0x4ff3f2(0x1d7))[_0x4ff3f2(0x1fa)]()[_0x4ff3f2(0x193)](),dbLogs[_0x4ff3f2(0x128)](_0x4ff3f2(0x1d7))['assign'](_0x15ad2d)[_0x4ff3f2(0x193)](),emitHistory(_0x14452a);}}async function pauseBot(_0x523cea=pauseBotIntervalShort,_0x14cfbd,_0x4f8a7b,_0x17fbc9=![]){const _0x639825=_0x5f1e29,_0x5a4f02=new Date()[_0x639825(0x1e7)]();if(!lastErrorShown||_0x5a4f02-lastErrorShown>=_0x523cea){lastErrorShown=_0x5a4f02;if(!lastBotPause)lastBotPause=_0x5a4f02,consecutivePauses=0x1;else{if(_0x5a4f02-lastBotPause-_0x523cea<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x17fbc9){logHistory(_0x639825(0x21a),_0x14cfbd+'\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();return;}else logHistory(_0x639825(0x21a),_0x14cfbd+pauseBotMsg),_0x523cea=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5a4f02;}_0x4f8a7b?logger[_0x639825(0x2a7)]('('+consecutivePauses+')\x20'+_0x14cfbd+_0x639825(0x23e),_0x4f8a7b):logger['debug']('('+consecutivePauses+')\x20'+_0x14cfbd);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x523cea),botPaused=![],_0x523cea==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3e2451=_0x5f1e29;botPaused=!![],await sleep(0x3e8),process[_0x3e2451(0x1ce)]({'stop':_0x3e2451(0x1e1)},_0x1dc6d2=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5a5b44,_0x1fe49a){const _0xbebe87=_0x5f1e29;if(botPaused)return;const _0x15ef73=config[_0xbebe87(0x2a8)]||'Exchange';if(_0x1fe49a)logger['debug'](_0xbebe87(0x283)+_0x1fe49a);const _0x438e8d=()=>{const _0x5dbdf4=_0xbebe87;loading[_0x5dbdf4(0x21a)]=!![],emitLoadingProgress();};if(_0x5a5b44[_0xbebe87(0x231)]()[_0xbebe87(0x27f)](_0xbebe87(0x14e)))logHistory(_0xbebe87(0x21a),_0x15ef73+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0x438e8d();else{if(_0x5a5b44[_0xbebe87(0x231)]()[_0xbebe87(0x27f)](_0xbebe87(0x2b2)))logHistory('error',_0x15ef73+_0xbebe87(0x297)),_0x438e8d();else _0x5a5b44[_0xbebe87(0x231)]()[_0xbebe87(0x27f)](_0xbebe87(0x1c4))?(logHistory(_0xbebe87(0x21a),_0x15ef73+_0xbebe87(0x1c6)),logHistory(_0xbebe87(0x21a),_0xbebe87(0x213)),_0x438e8d()):await handleError(_0x5a5b44,null);}}async function handleError(_0x4be9b6,_0x37db47,_0x618fb=''){const _0x19e6d3=_0x5f1e29;if(botPaused)return;let _0x4fd9c2;const _0x1cb2e5=config['exchange']||'Exchange';if(_0x37db47)logger[_0x19e6d3(0x2a7)](_0x19e6d3(0x283)+_0x37db47);if(_0x4be9b6['toString']()[_0x19e6d3(0x27f)](_0x19e6d3(0x189)))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x125),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)]('RateLimitExceeded'))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x24b),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x260))||_0x4be9b6['toString']()[_0x19e6d3(0x27f)]('OnMaintenance'))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x21e),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x1a0)))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x12b),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6['toString']()[_0x19e6d3(0x27f)](_0x19e6d3(0x13e)))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x23f),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x18f)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x224))||_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x18f)]()['includes'](_0x19e6d3(0x18c)))_0x4fd9c2='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x268)))_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x1cb),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6 instanceof ccxt[_0x19e6d3(0x21b)])_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x1ec)+_0x4be9b6[_0x19e6d3(0x231)](),logger[_0x19e6d3(0x2a7)](_0x19e6d3(0x123),_0x4be9b6),await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)]('API-key\x20format\x20invalid'))logHistory(_0x19e6d3(0x21a),_0x1cb2e5+_0x19e6d3(0x272)),logHistory(_0x19e6d3(0x21a),_0x19e6d3(0x2b3)),await killBot();else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x2b2)))logHistory('error',_0x1cb2e5+_0x19e6d3(0x247)),logHistory(_0x19e6d3(0x21a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4be9b6['toString']()[_0x19e6d3(0x27f)](_0x19e6d3(0x1c4))&&_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)]('token\x20is\x20expired'))_0x4fd9c2=_0x1cb2e5+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)',await pauseBot(undefined,_0x4fd9c2,_0x4be9b6,!![]);else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x1c4)))config[_0x19e6d3(0x1bb)]?_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x1a2):_0x4fd9c2=_0x1cb2e5+_0x19e6d3(0x24c),logHistory(_0x19e6d3(0x21a),_0x4fd9c2),logHistory('error',_0x19e6d3(0x2b3)),await killBot();else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x1d2)))logHistory(_0x19e6d3(0x21a),_0x1cb2e5+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x19e6d3(0x21a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x4be9b6[_0x19e6d3(0x231)]()[_0x19e6d3(0x27f)](_0x19e6d3(0x14f)))logHistory(_0x19e6d3(0x21a),_0x19e6d3(0x1f5)+_0x618fb);else{if(_0x4be9b6 instanceof ccxt['ExchangeError']){_0x4fd9c2=_0x1cb2e5+'\x20exchange\x20error:\x20'+_0x4be9b6[_0x19e6d3(0x231)](),logHistory('error',_0x4fd9c2),logger[_0x19e6d3(0x2a7)](_0x19e6d3(0x245),_0x4be9b6);if(_0x618fb)logger[_0x19e6d3(0x2a7)](_0x19e6d3(0x262)+_0x618fb);await pauseBot(undefined,_0x4fd9c2,_0x4be9b6);}else{_0x4fd9c2=_0x19e6d3(0x1e5)+_0x4be9b6['toString'](),logHistory(_0x19e6d3(0x21a),_0x4fd9c2),logger['debug'](_0x4fd9c2+_0x19e6d3(0x23e),_0x4be9b6);if(_0x618fb)logger[_0x19e6d3(0x2a7)]('Symbol(s):\x20'+_0x618fb);await pauseBot(undefined,_0x4fd9c2);}}}}}}}}}}}}}}}}async function withRetry(_0x186b37,_0x3f28ce){const _0x1935d3=_0x5f1e29;let _0x33b4c=![],_0x5b17cb=0x0,_0x3a771f,_0x4b0ff5;while(_0x5b17cb<maxRetries){try{_0x3a771f=await _0x3f28ce();break;}catch(_0x3fbc24){_0x4b0ff5=_0x3fbc24,!_0x33b4c?(_0x33b4c=!![],logger[_0x1935d3(0x2a7)](_0x1935d3(0x143)+_0x186b37+':',_0x3fbc24[_0x1935d3(0x231)]())):await sleep(retryInterval);}_0x5b17cb++;}if(_0x5b17cb==0x0)return _0x3a771f;if(_0x5b17cb>=maxRetries)throw _0x4b0ff5;else return logger['debug'](_0x1935d3(0x126)+_0x5b17cb+_0x1935d3(0x205)),_0x3a771f;}function formatResult(_0x59dfd5,_0x3ae629){const _0x35edb=_0x5f1e29;return parseFloat(_0x59dfd5[_0x35edb(0x1ed)](_0x3ae629));}function formatResultTruncate(_0x1ca543,_0x254d5b){const _0x23ced7=_0x5f1e29;let _0x1801ea=formatResultString(_0x1ca543,0xa),_0x2f66d9=_0x1801ea[_0x23ced7(0x1b5)]('.');return _0x2f66d9!=-0x1&&(_0x1801ea=_0x1801ea[_0x23ced7(0x199)](0x0,_0x2f66d9+_0x254d5b+0x1)),Number(_0x1801ea);}function formatResultString(_0x4ae184,_0x4bbf22){const _0x1da945=_0x5f1e29;let _0x3b04e7;if(!(''+_0x4ae184)[_0x1da945(0x27f)]('e'))_0x3b04e7=+(Math[_0x1da945(0x194)](_0x4ae184+'e+'+_0x4bbf22)+'e-'+_0x4bbf22);else{let _0x14c85c=(''+_0x4ae184)[_0x1da945(0x1c9)]('e'),_0x1eb6b9='';+_0x14c85c[0x1]+_0x4bbf22>0x0&&(_0x1eb6b9='+'),_0x3b04e7=+(Math[_0x1da945(0x194)](+_0x14c85c[0x0]+'e'+_0x1eb6b9+(+_0x14c85c[0x1]+_0x4bbf22))+'e-'+_0x4bbf22);}return Number(_0x3b04e7)['toFixed'](_0x4bbf22);}function getServerTime(){const _0x483e92=_0x5f1e29,_0x409985=new Date();return _0x409985['getFullYear']()+'/'+(_0x409985[_0x483e92(0x16d)]()+0x1)['toString']()[_0x483e92(0x293)](0x2,'0')+'/'+_0x409985[_0x483e92(0x226)]()[_0x483e92(0x231)]()[_0x483e92(0x293)](0x2,'0')+'\x20'+_0x409985[_0x483e92(0x18e)]()[_0x483e92(0x231)]()['padStart'](0x2,'0')+':'+_0x409985[_0x483e92(0x280)]()[_0x483e92(0x231)]()[_0x483e92(0x293)](0x2,'0')+':'+_0x409985['getSeconds']()[_0x483e92(0x231)]()[_0x483e92(0x293)](0x2,'0');}function getTimeStamp(){const _0x45d668=_0x5f1e29,_0x37650d=shiftedTime();return _0x37650d[_0x45d668(0x176)]()+'/'+(_0x37650d['getMonth']()+0x1)[_0x45d668(0x231)]()[_0x45d668(0x293)](0x2,'0')+'/'+_0x37650d[_0x45d668(0x226)]()[_0x45d668(0x231)]()['padStart'](0x2,'0')+'\x20'+_0x37650d['getHours']()[_0x45d668(0x231)]()[_0x45d668(0x293)](0x2,'0')+':'+_0x37650d[_0x45d668(0x280)]()[_0x45d668(0x231)]()[_0x45d668(0x293)](0x2,'0')+':'+_0x37650d['getSeconds']()[_0x45d668(0x231)]()[_0x45d668(0x293)](0x2,'0');}function getDate(){const _0x3b2f45=_0x5f1e29,_0x32ef0a=shiftedTime();return _0x32ef0a[_0x3b2f45(0x176)]()+'/'+(_0x32ef0a[_0x3b2f45(0x16d)]()+0x1)[_0x3b2f45(0x231)]()[_0x3b2f45(0x293)](0x2,'0')+'/'+_0x32ef0a[_0x3b2f45(0x226)]()[_0x3b2f45(0x231)]()['padStart'](0x2,'0');}function getHour(){const _0x140fb8=_0x5f1e29,_0x10e150=shiftedTime();return _0x10e150['getHours']()[_0x140fb8(0x231)]()[_0x140fb8(0x293)](0x2,'0');}function sleep(_0x42cc2d){return new Promise(_0xa569f8=>setTimeout(_0xa569f8,_0x42cc2d));}function shiftedTime(){const _0x288161=_0x5f1e29,_0x1cf897=new Date();let _0x1988db=_0x1cf897;if(config&&config[_0x288161(0x2a2)]!==0x0)_0x1988db=fns['add'](_0x1cf897,{'hours':config['timeshift']});return _0x1988db;}function timer(_0x4a0d3e){const _0x1b564b=_0x5f1e29,_0x1b5c40=new Date();!lasttime?console[_0x1b564b(0x2c5)](getTimeStamp()+':\x20timer\x20>',_0x4a0d3e,_0x1b5c40):console[_0x1b564b(0x2c5)](getTimeStamp()+_0x1b564b(0x269),_0x4a0d3e,(_0x1b5c40-lasttime)/0x3e8),lasttime=_0x1b5c40;}