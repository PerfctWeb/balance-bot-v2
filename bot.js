const _0x1ad985=_0x4589;(function(_0x4b5c37,_0x15979e){const _0x9c059=_0x4589,_0x2431a0=_0x4b5c37();while(!![]){try{const _0x155b1b=parseInt(_0x9c059(0x24b))/0x1+parseInt(_0x9c059(0x1bc))/0x2+parseInt(_0x9c059(0x207))/0x3+-parseInt(_0x9c059(0x1a4))/0x4+parseInt(_0x9c059(0x20d))/0x5*(-parseInt(_0x9c059(0x168))/0x6)+-parseInt(_0x9c059(0x213))/0x7+parseInt(_0x9c059(0x22f))/0x8;if(_0x155b1b===_0x15979e)break;else _0x2431a0['push'](_0x2431a0['shift']());}catch(_0x133c19){_0x2431a0['push'](_0x2431a0['shift']());}}}(_0x3c7b,0x690a5));const _0x13a753=function(){let _0x2de777=!![];return function(_0x39c8d3,_0x17497b){const _0x44e5de=_0x2de777?function(){const _0x330b30=_0x4589;if(_0x17497b){const _0x435ec0=_0x17497b[_0x330b30(0x1ca)](_0x39c8d3,arguments);return _0x17497b=null,_0x435ec0;}}:function(){};return _0x2de777=![],_0x44e5de;};}(),_0x544a78=_0x13a753(this,function(){const _0xa5aaff=_0x4589;return _0x544a78[_0xa5aaff(0x202)]()['search']('(((.+)+)+)+$')[_0xa5aaff(0x202)]()[_0xa5aaff(0x18b)](_0x544a78)[_0xa5aaff(0x1f0)]('(((.+)+)+)+$');});_0x544a78();'use strict';const ccxt=require(_0x1ad985(0x222)),low=require('lowdb'),FileSync=require(_0x1ad985(0x1ec)),fs=require('fs'),fns=require(_0x1ad985(0x1d1)),{WebsocketClient,DefaultLogger}=require(_0x1ad985(0x21c)),Crypt=require(_0x1ad985(0x23d))[_0x1ad985(0x1c0)];let exchange,wsClient;global[_0x1ad985(0x177)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x1ad985(0x1b6))[_0x1ad985(0x1ac)],botID=process[_0x1ad985(0x1d8)][0x2]||_0x1ad985(0x1a7),pattern=/^[0-9]{3}$/;if(!pattern[_0x1ad985(0x1bd)](botID))return console[_0x1ad985(0x1a9)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x1ad985(0x1ea)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x1ad985(0x16a)+userID+'/':_0x1ad985(0x16a);!fs['existsSync'](configpath)&&fs[_0x1ad985(0x23c)](configpath);const configfile=configpath+'bot-'+botID+_0x1ad985(0x198),logfile=configpath+_0x1ad985(0x224)+botID+_0x1ad985(0x1b8),performancefile=configpath+_0x1ad985(0x224)+botID+_0x1ad985(0x1bb),coinresultsfile=configpath+_0x1ad985(0x224)+botID+'-results.json',settingsfile=configpath+_0x1ad985(0x185),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1ad985(0x1c4)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1ad985(0x1c4)]({'bot':[]})[_0x1ad985(0x216)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x1ad985(0x212),'symbol':_0x1ad985(0x166)},'usd':{'coin':_0x1ad985(0x1ae),'symbol':_0x1ad985(0x19d)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x57d455)=>{},'debug':(..._0x5cb5f3)=>{},'notice':(..._0x4975fb)=>{},'info':(..._0xfa35ff)=>{},'warning':(..._0x4fc110)=>{},'error':async function(..._0x261a22){const _0xbf8c49=_0x1ad985,_0x4c3602=new Date()[_0xbf8c49(0x1af)]();if(!lastErrorShown||_0x4c3602-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0xbf8c49(0x1af)](),logHistory(_0xbf8c49(0x165),_0xbf8c49(0x189)+consecutivePauses+_0xbf8c49(0x1e3));let _0x55a209='';if(_0x261a22[0x0])_0x55a209+=_0x261a22[0x0];if(_0x261a22[0x1]&&_0x261a22[0x1][_0xbf8c49(0x165)]&&_0x261a22[0x1]['error']['message'])_0x55a209+=_0xbf8c49(0x16e)+_0x261a22[0x1]['error']['message'];logging('WebSockets('+consecutivePauses+_0xbf8c49(0x19b),''+_0x55a209),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x1ad985(0x169),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x1ad985(0x21e)]!=config[_0x1ad985(0x21e)]&&updateTimeshift(settings[_0x1ad985(0x21e)]);process[_0x1ad985(0x1b2)]({'started':_0x1ad985(0x20c)}),initializeProcessListeners();function proxyEmit(_0x4ab15a,_0x4d95ea=null){const _0x58a085=_0x1ad985;process[_0x58a085(0x1b2)]({'function':_0x4ab15a,'args':_0x4d95ea});}function initializeProcessListeners(){process['on']('message',_0x3762a5=>{const _0x429bab=_0x4589;switch(Object[_0x429bab(0x1aa)](_0x3762a5)[0x0]){case _0x429bab(0x21e):_0x3762a5[_0x429bab(0x21e)]!=undefined&&(settings[_0x429bab(0x21e)]=_0x3762a5[_0x429bab(0x21e)],updateTimeshift(settings[_0x429bab(0x21e)]));break;case'function':switch(_0x3762a5[_0x429bab(0x240)]){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x3762a5[_0x429bab(0x24d)]);break;case'getPortfolio':getPortfolio(_0x3762a5[_0x429bab(0x24d)]);break;case'storeConfiguration':storeConfiguration(_0x3762a5[_0x429bab(0x24d)]);break;case _0x429bab(0x1b1):storeHeadless(_0x3762a5[_0x429bab(0x24d)]);break;case _0x429bab(0x15c):getStartingBalances();break;case _0x429bab(0x1a1):placeOrder(_0x3762a5[_0x429bab(0x24d)]);break;case _0x429bab(0x238):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x3e62e3=_0x1ad985;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x3e62e3(0x199)],config['apiSecret']);let _0x53b736=await loadSymbols();_0x53b736&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x456946,_0x9496c5){const _0x53cac2=_0x1ad985,_0xc27f73=ccxt[config['exchange']];let _0xd3b543;switch(config[_0x53cac2(0x187)]){case _0x53cac2(0x21c):_0xd3b543=_0x53cac2(0x203);break;case _0x53cac2(0x1a3):_0xd3b543=_0x53cac2(0x1e1);break;default:_0xd3b543=_0x53cac2(0x203);}exchange=new _0xc27f73({'apiKey':_0x456946,'secret':_0x9496c5,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x456946,'api_secret':_0x9496c5,'beautify':!![],'wsUrl':_0xd3b543},logger),config['exchange']==_0x53cac2(0x1a3)&&(stablecoins={'eur':{'coin':_0x53cac2(0x239),'symbol':'BTC/BUSD'},'usd':{'coin':_0x53cac2(0x1ae),'symbol':_0x53cac2(0x19d)}});}async function loadSymbols(){const _0x3f4e56=_0x1ad985;let _0x466df2;try{markets=await exchange[_0x3f4e56(0x1e8)]();const _0x19edc9=['DAI/',_0x3f4e56(0x161),_0x3f4e56(0x179)];allSymbols=exchange[_0x3f4e56(0x1f7)][_0x3f4e56(0x246)](_0x388c1a=>{let _0x71f518=![];return _0x19edc9['forEach'](_0x223797=>{const _0x4b05ac=_0x4589;if(_0x388c1a[_0x4b05ac(0x1eb)](_0x223797))_0x71f518=!![];}),!_0x71f518;}),_0x466df2=!![];}catch(_0x164a40){await handleError(_0x164a40,'loadSymbols()'),_0x466df2=![];}return _0x466df2;}async function initbot(){const _0x228297=_0x1ad985;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x258d1c=dbCoinResults[_0x228297(0x160)](_0x228297(0x152))[_0x228297(0x15d)]();if(_0x258d1c['length']==0x0)await resetCoinResults();}async function initclient(){const _0x1d6a4b=_0x1ad985;proxyEmit(_0x1d6a4b(0x1f2),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1d6a4b(0x1c9),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x3a0106=_0x1ad985;wsinitialized=![];ws1&&(ws1[_0x3a0106(0x1dd)](_0x1f7c23=>{try{wsClient['closeWs'](_0x1f7c23);}catch(_0x1f972f){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x48073e){}ws2=null;}}async function initws(){const _0x3871d1=_0x1ad985;cleanws();let _0x5d2481=[];currentCoins[_0x3871d1(0x1dd)](_0x22a649=>{const _0x508def=_0x3871d1;if(_0x22a649[_0x508def(0x1c7)]!=config[_0x508def(0x16f)])_0x5d2481[_0x508def(0x17e)](noslash(_0x22a649['symbol']));});if(!_0x5d2481['includes'](stablecoins[_0x3871d1(0x14d)][_0x3871d1(0x1c7)]))_0x5d2481[_0x3871d1(0x17e)](stablecoins[_0x3871d1(0x14d)][_0x3871d1(0x1c7)]);if(!_0x5d2481[_0x3871d1(0x1eb)](stablecoins[_0x3871d1(0x1d4)][_0x3871d1(0x1c7)]))_0x5d2481[_0x3871d1(0x17e)](stablecoins[_0x3871d1(0x1d4)][_0x3871d1(0x1c7)]);if(!_0x5d2481[_0x3871d1(0x1eb)](_0x3871d1(0x23b)+config[_0x3871d1(0x16f)]))_0x5d2481['push'](_0x3871d1(0x23b)+config[_0x3871d1(0x16f)]);try{_0x5d2481[_0x3871d1(0x1dd)]((_0x19eea6,_0x3c4b4b)=>{const _0x3e3910=_0x3871d1;ws1[_0x3c4b4b]=wsClient[_0x3e3910(0x1a6)](_0x19eea6,'1m');}),ws2=wsClient[_0x3871d1(0x23f)](),wsClient['on'](_0x3871d1(0x220),_0x3d0a29=>{const _0x4d5b7b=_0x3871d1;if(!Array[_0x4d5b7b(0x15f)](_0x3d0a29)&&!_0x3d0a29[_0x4d5b7b(0x1c1)]['includes'](_0x4d5b7b(0x14e))){if(_0x3d0a29[_0x4d5b7b(0x1b0)]===_0x4d5b7b(0x233)){global[_0x4d5b7b(0x177)][_0x3d0a29[_0x4d5b7b(0x233)][_0x4d5b7b(0x20a)]]=_0x3d0a29[_0x4d5b7b(0x233)][_0x4d5b7b(0x1e6)];return;}}else{if(!Array[_0x4d5b7b(0x15f)](_0x3d0a29)&&_0x3d0a29[_0x4d5b7b(0x1c1)][_0x4d5b7b(0x1eb)](_0x4d5b7b(0x14e))){if(_0x3d0a29[_0x4d5b7b(0x167)][_0x4d5b7b(0x1eb)](_0x4d5b7b(0x235))){updateNumberCoins(_0x3d0a29);return;}}}}),wsClient['on']('reconnected',async _0x3a3ff9=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x3204f5){await handleError(_0x3204f5,_0x3871d1(0x158));}let _0x102370,_0x326888=0x0;loading['remainingSymbols']=[];let _0x27987f=0x0;currentCoins[_0x3871d1(0x1dd)](_0x5cc486=>{const _0x1167b1=_0x3871d1;if(_0x5cc486[_0x1167b1(0x1c7)]!=config[_0x1167b1(0x16f)])loading[_0x1167b1(0x223)]['push'](_0x5cc486[_0x1167b1(0x20a)]);}),loadingCanceled=![];while(_0x102370!=currentCoins[_0x3871d1(0x186)]-0x1){_0x102370=0x0,currentCoins[_0x3871d1(0x1dd)](_0x3f64f6=>{const _0x57a783=_0x3871d1;_0x3f64f6['coin']!=config[_0x57a783(0x16f)]&&global['ticker'][noslash(_0x3f64f6[_0x57a783(0x20a)])]&&(loading['remainingSymbols']=loading[_0x57a783(0x223)][_0x57a783(0x246)](_0x409b62=>_0x409b62!=_0x3f64f6[_0x57a783(0x20a)]),_0x102370++);}),loading['progress']=Math[_0x3871d1(0x170)](_0x102370/(currentCoins[_0x3871d1(0x186)]-0x1)*0x64);_0x27987f>0x1e*0x5&&(loading[_0x3871d1(0x1fc)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x3871d1(0x18f)]=!![],emitLoadingProgress();break;}else _0x102370!=_0x326888&&(_0x326888=_0x102370,emitLoadingProgress()),_0x27987f++,await sleep(0xc8);}if(_0x102370==currentCoins[_0x3871d1(0x186)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x341787=_0x1ad985;let _0x320c09=0x0,_0x2ac589=0x0;try{_0x320c09=global[_0x341787(0x177)][stablecoins[_0x341787(0x14d)]['coin']],_0x2ac589=global[_0x341787(0x177)][stablecoins[_0x341787(0x1d4)]['coin']];}catch(_0x574e5f){await handleError(_0x574e5f,_0x341787(0x14f));}return{'eur':Number(_0x320c09),'usd':Number(_0x2ac589)};}async function setStartDatePerformance(_0x969fa1){const _0x5a4469=_0x1ad985,_0xfe652c=fns[_0x5a4469(0x1fe)](new Date(_0x969fa1[_0x5a4469(0x242)]),'yyyy/MM/dd');let _0xe965cc=[];_0xe965cc[stablecoins[_0x5a4469(0x14d)][_0x5a4469(0x1c7)]]=await getCloses(stablecoins[_0x5a4469(0x14d)][_0x5a4469(0x20a)],new Date(_0x969fa1['startdate']),0x1),_0xe965cc[stablecoins[_0x5a4469(0x1d4)][_0x5a4469(0x1c7)]]=await getCloses(stablecoins['usd'][_0x5a4469(0x20a)],new Date(_0x969fa1[_0x5a4469(0x242)]),0x1);let _0x41ae89,_0x4ab958=[];_0x969fa1['portfolio'][_0x5a4469(0x1dd)](_0x281ae8=>{const _0x5fe4c2=_0x5a4469;!_0x281ae8[_0x5fe4c2(0x18c)]&&_0x4ab958[_0x5fe4c2(0x17e)]({'coin':_0x281ae8[_0x5fe4c2(0x1c7)],'number':_0x281ae8[_0x5fe4c2(0x208)],'price':_0x281ae8['startprice']});}),_0x41ae89={'date':_0xfe652c,'eur':_0xe965cc[stablecoins['eur'][_0x5a4469(0x1c7)]][0x0],'usd':_0xe965cc[stablecoins[_0x5a4469(0x1d4)][_0x5a4469(0x1c7)]][0x0],'coins':_0x4ab958};let _0x41f922=dbPerformance['get'](_0x5a4469(0x201))[_0x5a4469(0x21a)]({'date':_0xfe652c})[_0x5a4469(0x15d)]();_0x41f922?dbPerformance[_0x5a4469(0x160)]('data')[_0x5a4469(0x21a)]({'date':_0xfe652c})[_0x5a4469(0x1be)](_0x41ae89)[_0x5a4469(0x216)]():dbPerformance[_0x5a4469(0x160)]('data')[_0x5a4469(0x17e)](_0x41ae89)[_0x5a4469(0x216)](),_0x41f922=dbPerformance[_0x5a4469(0x160)]('data')[_0x5a4469(0x19c)]('date')[_0x5a4469(0x15d)](),_0x41f922['forEach'](_0x4667c3=>{const _0x5c789f=_0x5a4469;_0x4667c3[_0x5c789f(0x1b4)]<_0xfe652c&&dbPerformance[_0x5c789f(0x160)](_0x5c789f(0x201))['remove']({'date':_0x4667c3[_0x5c789f(0x1b4)]})[_0x5c789f(0x216)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x3d862b){const _0x33a26a=_0x1ad985;let _0x36644e,_0x5cf25c=[];logHistory(_0x33a26a(0x154),_0x33a26a(0x155)),_0x3d862b[_0x33a26a(0x1c5)]['forEach'](_0x3f47ce=>{const _0x3e731a=_0x33a26a;if(_0x3f47ce[_0x3e731a(0x1c7)]!=config['basecoin']&&!_0x3f47ce[_0x3e731a(0x18c)])_0x5cf25c[_0x3e731a(0x17e)]({'coin':_0x3f47ce[_0x3e731a(0x1c7)],'symbol':_0x3f47ce['symbol']});});let _0x3971e6=[];try{const _0x513123=fns[_0x33a26a(0x1fe)](fns[_0x33a26a(0x1ef)](_0x3d862b[_0x33a26a(0x242)][_0x33a26a(0x225)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5dec18 of _0x5cf25c){if(_0x5dec18[_0x33a26a(0x1c7)]!=config[_0x33a26a(0x16f)])_0x36644e=await exchange['fetchOrders'](_0x5dec18['symbol'],Date[_0x33a26a(0x20b)](_0x513123));_0x36644e['forEach'](_0x53882f=>{const _0x2895e8=_0x33a26a,_0x504224=_0x5dec18[_0x2895e8(0x20a)]['includes'](config['basecoin']+'/'),_0x3745f7=fns['format'](fns[_0x2895e8(0x1ef)](_0x53882f[_0x2895e8(0x1d2)]),_0x2895e8(0x1f3)),_0x302d40=fns[_0x2895e8(0x1fe)](fns[_0x2895e8(0x1ef)](_0x53882f['datetime']),_0x2895e8(0x227));let _0x43aee8;if(_0x53882f[_0x2895e8(0x1d6)]==_0x2895e8(0x241)&&_0x504224==![])_0x43aee8=_0x53882f[_0x2895e8(0x1d5)];if(_0x53882f[_0x2895e8(0x1d6)]==_0x2895e8(0x241)&&_0x504224==!![])_0x43aee8=-_0x53882f['amount']*_0x53882f[_0x2895e8(0x232)];if(_0x53882f['side']==_0x2895e8(0x21b)&&_0x504224==![])_0x43aee8=-_0x53882f[_0x2895e8(0x1d5)];if(_0x53882f[_0x2895e8(0x1d6)]=='sell'&&_0x504224==!![])_0x43aee8=_0x53882f['amount']*_0x53882f['price'];_0x3971e6['push']({'timestamp':_0x3745f7,'date':_0x302d40,'coin':_0x5dec18[_0x2895e8(0x1c7)],'symbol':_0x5dec18[_0x2895e8(0x20a)],'type':_0x53882f[_0x2895e8(0x16d)],'side':_0x53882f['side'],'reverse':_0x504224,'amount':formatResult(_0x53882f[_0x2895e8(0x191)],0x8),'filled':formatResult(_0x53882f[_0x2895e8(0x191)],0x8),'coinamount':formatResult(_0x43aee8,0x8),'price':formatResult(_0x53882f[_0x2895e8(0x232)],0x8)});let _0x2bbc11;if(_0x53882f[_0x2895e8(0x1d6)]==_0x2895e8(0x241)&&_0x504224==![])_0x2bbc11=-_0x53882f['amount']*_0x53882f[_0x2895e8(0x232)];if(_0x53882f[_0x2895e8(0x1d6)]==_0x2895e8(0x241)&&_0x504224==!![])_0x2bbc11=_0x53882f[_0x2895e8(0x1d5)];if(_0x53882f[_0x2895e8(0x1d6)]==_0x2895e8(0x21b)&&_0x504224==![])_0x2bbc11=_0x53882f['amount']*_0x53882f[_0x2895e8(0x232)];if(_0x53882f['side']=='sell'&&_0x504224==!![])_0x2bbc11=-_0x53882f['amount'];_0x3971e6[_0x2895e8(0x17e)]({'date':_0x302d40,'coin':config[_0x2895e8(0x16f)],'coinamount':formatResult(_0x2bbc11,0x8)});});}_0x3971e6['sort']((_0x577702,_0x20fa81)=>_0x577702[_0x33a26a(0x1cc)]>_0x20fa81[_0x33a26a(0x1cc)]?0x1:_0x20fa81['timestamp']>_0x577702[_0x33a26a(0x1cc)]?-0x1:0x0),dbLogs[_0x33a26a(0x160)](_0x33a26a(0x1dc))[_0x33a26a(0x1d7)]()[_0x33a26a(0x216)](),_0x3971e6[_0x33a26a(0x1dd)](_0x373a18=>{const _0x4614ce=_0x33a26a;let _0x5e78f1;_0x373a18[_0x4614ce(0x1c7)]!=config[_0x4614ce(0x16f)]&&(_0x5e78f1={'time':_0x373a18[_0x4614ce(0x1cc)],'type':_0x4614ce(0x17d),'event':'Order:\x20'+_0x373a18['symbol']+'\x20'+_0x373a18['side']+'\x20#'+_0x373a18[_0x4614ce(0x1d5)]+'\x20@'+_0x373a18[_0x4614ce(0x232)]},dbLogs['get'](_0x4614ce(0x1dc))['push'](_0x5e78f1)[_0x4614ce(0x216)]());});const _0x527fdf=fns[_0x33a26a(0x236)]({'start':new Date(_0x3d862b[_0x33a26a(0x242)]),'end':new Date()})['map'](_0x31d7ea=>fns['format'](_0x31d7ea,_0x33a26a(0x227)));let _0x544495=[];_0x3d862b['portfolio'][_0x33a26a(0x1dd)](_0x58ac4a=>{const _0x44f9c4=_0x33a26a;if(!_0x58ac4a[_0x44f9c4(0x18c)]){_0x544495[_0x58ac4a[_0x44f9c4(0x1c7)]]=[];let _0x1c7b4a=_0x58ac4a[_0x44f9c4(0x208)];_0x527fdf['forEach']((_0x56db34,_0xf51883)=>{const _0x485f02=_0x44f9c4;let _0x5739ed=_0x3971e6[_0x485f02(0x246)](_0x59ac5e=>_0x59ac5e['coin']==_0x58ac4a['coin']&&_0x59ac5e[_0x485f02(0x1b4)]==_0x56db34);if(_0x5739ed[_0x485f02(0x186)]!=0x0){let _0x40aebd=_0x5739ed[_0x485f02(0x17a)]((_0x1a45ee,_0x750490)=>{return _0x1a45ee+=_0x750490['coinamount'],_0x1a45ee;},0x0);_0x1c7b4a+=_0x40aebd;}_0x544495[_0x58ac4a['coin']][_0x56db34]=_0x1c7b4a;});}});const _0x32178f=[..._0x5cf25c];_0x32178f[_0x33a26a(0x17e)]({'coin':stablecoins[_0x33a26a(0x14d)][_0x33a26a(0x1c7)],'symbol':stablecoins[_0x33a26a(0x14d)][_0x33a26a(0x20a)]}),_0x32178f[_0x33a26a(0x17e)]({'coin':stablecoins['usd'][_0x33a26a(0x1c7)],'symbol':stablecoins['usd'][_0x33a26a(0x20a)]});let _0x2f1412=[];for(const _0x409482 of _0x32178f){_0x2f1412[_0x409482['coin']]=await getCloses(_0x409482[_0x33a26a(0x20a)],new Date(_0x3d862b['startdate']));}dbPerformance[_0x33a26a(0x160)](_0x33a26a(0x201))['remove']()[_0x33a26a(0x216)](),_0x527fdf[_0x33a26a(0x1dd)]((_0x51788e,_0x2735cd)=>{const _0x235c35=_0x33a26a;let _0x2ac224,_0x2dc6af=[];_0x2735cd==0x0?(_0x3d862b[_0x235c35(0x1c5)][_0x235c35(0x1dd)](_0x317d07=>{const _0x56631a=_0x235c35;!_0x317d07[_0x56631a(0x18c)]&&_0x2dc6af[_0x56631a(0x17e)]({'coin':_0x317d07[_0x56631a(0x1c7)],'number':_0x317d07[_0x56631a(0x208)],'price':_0x317d07['startprice']});}),_0x2ac224={'date':_0x51788e,'eur':_0x2f1412[stablecoins[_0x235c35(0x14d)]['coin']][_0x2735cd],'usd':_0x2f1412[stablecoins['usd'][_0x235c35(0x1c7)]][_0x2735cd],'coins':_0x2dc6af}):(_0x3d862b['portfolio'][_0x235c35(0x1dd)](_0x41787d=>{const _0x577063=_0x235c35;!_0x41787d[_0x577063(0x18c)]&&_0x2dc6af[_0x577063(0x17e)]({'coin':_0x41787d[_0x577063(0x1c7)],'number':_0x544495[_0x41787d['coin']][_0x51788e],'price':_0x41787d['coin']==config[_0x577063(0x16f)]?0x1:_0x2f1412[_0x41787d[_0x577063(0x1c7)]][_0x2735cd]});}),_0x2ac224={'date':_0x51788e,'eur':_0x2f1412[stablecoins['eur'][_0x235c35(0x1c7)]][_0x2735cd],'usd':_0x2f1412[stablecoins[_0x235c35(0x1d4)][_0x235c35(0x1c7)]][_0x2735cd],'coins':_0x2dc6af}),dbPerformance[_0x235c35(0x160)]('data')[_0x235c35(0x17e)](_0x2ac224)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x56a513 of _0x3971e6){_0x56a513['coin']!=config[_0x33a26a(0x16f)]&&await updateCoinResults(_0x56a513);}logHistory(_0x33a26a(0x154),_0x33a26a(0x23e));}catch(_0x5ec500){await handleError(_0x5ec500,_0x33a26a(0x1bf));}}async function getCloses(_0x3f0f0b,_0x2dfed7,_0x5f0701=undefined){const _0x7404d1=_0x1ad985,_0x593bb0='1d';let _0x29e058,_0x308b02;const _0x1cbe85=fns[_0x7404d1(0x183)](new Date(),_0x2dfed7)+0x1;try{const _0x1669e7=exchange[_0x7404d1(0x1df)]()-_0x1cbe85*0x18*0xe10*0x3e8;_0x29e058=await exchange[_0x7404d1(0x1e4)](_0x3f0f0b,_0x593bb0,_0x1669e7,_0x5f0701),_0x308b02=await exchange['fetchTickers'](_0x3f0f0b);}catch(_0x2c2c0f){await handleError(_0x2c2c0f,_0x7404d1(0x210));}let _0x56e1db=ohlcvToCloses(_0x29e058);return _0x56e1db['push'](_0x308b02[_0x3f0f0b]['last']),_0x56e1db;}function ohlcvToCloses(_0x2dc281){const _0x1e33a4=_0x1ad985;let _0x4a9c7a=[];return _0x2dc281[_0x1e33a4(0x1dd)](function(_0x2f2929){const _0x245aff=_0x1e33a4;_0x4a9c7a[_0x245aff(0x17e)](_0x2f2929[0x4]);}),_0x4a9c7a;}function getConfiguration(_0x11e047){const _0x598f14=_0x1ad985;let _0x1fbcf2=dbConfig['get'](_0x598f14(0x1d9))[_0x598f14(0x21a)]({'botID':_0x11e047})['value']();if(_0x1fbcf2){let _0x453a81=![];!_0x1fbcf2[_0x598f14(0x187)]&&(_0x1fbcf2={..._0x1fbcf2,'exchange':_0x598f14(0x21c)},_0x453a81=!![]),!_0x1fbcf2['basecoin']&&(_0x1fbcf2={..._0x1fbcf2,'basecoin':_0x598f14(0x182)},_0x453a81=!![]),!_0x1fbcf2[_0x598f14(0x1cd)]&&(_0x1fbcf2={..._0x1fbcf2,'ordertype':'market'},_0x453a81=!![]),!_0x1fbcf2[_0x598f14(0x1fc)]&&(_0x1fbcf2={..._0x1fbcf2,'timeout':0x14},_0x453a81=!![]),!_0x1fbcf2[_0x598f14(0x157)]&&(_0x1fbcf2={..._0x1fbcf2,'emojibuy':''},_0x453a81=!![]),!_0x1fbcf2[_0x598f14(0x1a8)]&&(_0x1fbcf2={..._0x1fbcf2,'emojisell':''},_0x453a81=!![]),!_0x1fbcf2[_0x598f14(0x171)]&&(_0x1fbcf2={..._0x1fbcf2,'showname':![]},_0x453a81=!![]),_0x453a81&&(_0x1fbcf2={'botID':_0x1fbcf2[_0x598f14(0x20f)],'exchange':_0x1fbcf2[_0x598f14(0x187)],'apiKey':_0x1fbcf2[_0x598f14(0x199)],'apiSecret':_0x1fbcf2[_0x598f14(0x1f9)],'basecoin':_0x1fbcf2[_0x598f14(0x16f)],'botname':_0x1fbcf2[_0x598f14(0x193)],'showname':_0x1fbcf2['showname'],'threshold':_0x1fbcf2[_0x598f14(0x244)],'ordertype':_0x1fbcf2['ordertype'],'timeout':_0x1fbcf2['timeout'],'startdate':_0x1fbcf2[_0x598f14(0x242)],'recreate':_0x1fbcf2[_0x598f14(0x21d)],'timeshift':_0x1fbcf2[_0x598f14(0x21e)],'headless':_0x1fbcf2[_0x598f14(0x1da)],'cooldown':_0x1fbcf2[_0x598f14(0x243)],'emojibuy':_0x1fbcf2['emojibuy'],'emojisell':_0x1fbcf2[_0x598f14(0x1a8)],'portfolio':_0x1fbcf2[_0x598f14(0x1c5)]},dbConfig[_0x598f14(0x160)]('bot')[_0x598f14(0x1d7)]()[_0x598f14(0x216)](),dbConfig[_0x598f14(0x160)]('bot')['push'](_0x1fbcf2)[_0x598f14(0x216)]());}else _0x1fbcf2={'botID':_0x11e047,'exchange':_0x598f14(0x21c),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x598f14(0x14c)+_0x11e047,'showname':![],'threshold':'3','ordertype':_0x598f14(0x1e7),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x598f14(0x21e)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x1fbcf2;}function emittedConfiguration(){const _0x43c1d1=_0x1ad985;let _0x11fd44;return config[_0x43c1d1(0x199)]==''?_0x11fd44=config:_0x11fd44={...config,'apiKey':'************','apiSecret':_0x43c1d1(0x18e)},_0x11fd44;}function getSettings(){const _0x3a3734=_0x1ad985;return dbSettings[_0x3a3734(0x160)](_0x3a3734(0x180))[_0x3a3734(0x15d)]();}function getSecure(){const _0x416741=_0x1ad985;return dbSecure['get']('secure')[_0x416741(0x15d)]()||{};}function updateTimeshift(_0x5c7717){const _0x5c29fe=_0x1ad985;let _0x204799=dbConfig[_0x5c29fe(0x160)](_0x5c29fe(0x1d9))[_0x5c29fe(0x21a)]({'botID':botID})[_0x5c29fe(0x15d)]();_0x204799&&dbConfig[_0x5c29fe(0x160)](_0x5c29fe(0x1d9))[_0x5c29fe(0x21a)]({'botID':botID})[_0x5c29fe(0x1be)]({'timeshift':_0x5c7717})['write'](),config[_0x5c29fe(0x21e)]=_0x5c7717,proxyEmit(_0x5c29fe(0x1f2),emittedConfiguration());}async function storeConfiguration(_0x39c782){const _0x4db68e=_0x1ad985;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x2a96a8=dbConfig[_0x4db68e(0x160)]('bot')[_0x4db68e(0x21a)]({'botID':botID})[_0x4db68e(0x15d)]();_0x39c782={..._0x39c782,'apiKey':crypt[_0x4db68e(0x234)](secure[_0x4db68e(0x15e)],_0x39c782[_0x4db68e(0x199)])['message'],'apiSecret':crypt[_0x4db68e(0x234)](secure[_0x4db68e(0x15e)],_0x39c782[_0x4db68e(0x1f9)])[_0x4db68e(0x24c)]};if(_0x2a96a8){if(_0x39c782[_0x4db68e(0x199)]=='************')_0x39c782[_0x4db68e(0x199)]=config[_0x4db68e(0x199)];if(_0x39c782['apiSecret']==_0x4db68e(0x18e))_0x39c782[_0x4db68e(0x1f9)]=config['apiSecret'];dbConfig[_0x4db68e(0x160)](_0x4db68e(0x1d9))[_0x4db68e(0x21a)]({'botID':botID})[_0x4db68e(0x1be)](_0x39c782)[_0x4db68e(0x216)]();}else dbConfig[_0x4db68e(0x160)](_0x4db68e(0x1d9))[_0x4db68e(0x17e)](_0x39c782)['write'](),process[_0x4db68e(0x1b2)]({'status':_0x4db68e(0x248),'live':_0x4db68e(0x20c)});config={..._0x39c782};if(config[_0x4db68e(0x21d)])await recreateHistory(config);else await setStartDatePerformance(config);process['send']({'botname':_0x39c782['botname']}),proxyEmit(_0x4db68e(0x162)),reset();}async function storeHeadless(_0x587b01){const _0x5025eb=_0x1ad985,_0x48bef2={...config,'headless':_0x587b01['headless']};let _0x216632=dbConfig[_0x5025eb(0x160)](_0x5025eb(0x1d9))[_0x5025eb(0x21a)]({'botID':botID})[_0x5025eb(0x15d)]();_0x216632&&dbConfig['get'](_0x5025eb(0x1d9))[_0x5025eb(0x21a)]({'botID':botID})['assign'](_0x48bef2)['write'](),config={..._0x48bef2},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x58f0f9){const _0x335da8=_0x1ad985;return _0x58f0f9[_0x335da8(0x225)]('/','');}function updateNumberCoins(_0xac6fe3){const _0x296e2b=_0x1ad985;_0xac6fe3[_0x296e2b(0x1b0)]&&_0xac6fe3['eventType']==_0x296e2b(0x1fa)&&_0xac6fe3[_0x296e2b(0x1c9)][_0x296e2b(0x1dd)](_0x3af996=>{const _0x355590=_0x296e2b;let _0x463511=currentCoins[_0x355590(0x21a)](_0x173f15=>_0x173f15['coin']==_0x3af996[_0x355590(0x1ee)]),_0x11805c=config[_0x355590(0x1c5)][_0x355590(0x21a)](_0x26b99d=>_0x26b99d[_0x355590(0x1c7)]==_0x3af996[_0x355590(0x1ee)]);if(_0x463511&&_0x11805c)_0x463511[_0x355590(0x1ed)]=Math[_0x355590(0x19a)](Number(_0x3af996['availableBalance'])+(_0x11805c[_0x355590(0x150)]||0x0),0x0);});if(_0xac6fe3['eventType']&&_0xac6fe3[_0x296e2b(0x1b0)]==_0x296e2b(0x245)){if(_0xac6fe3[_0x296e2b(0x1c3)]==_0x296e2b(0x1e9)&&_0xac6fe3[_0x296e2b(0x206)]=='FILLED'){if(lastOrders)lastOrders['forEach'](_0x433019=>{const _0x205b49=_0x296e2b;if(_0x433019[_0x205b49(0x249)]==_0xac6fe3[_0x205b49(0x249)]){if(_0x433019[_0x205b49(0x163)])_0x433019[_0x205b49(0x191)]=_0xac6fe3[_0x205b49(0x23a)]*_0x433019[_0x205b49(0x232)];else _0x433019[_0x205b49(0x191)]=_0xac6fe3[_0x205b49(0x23a)];}});}}}async function getCoins(_0x1e3ac4=!![],_0x496529=config['basecoin']){const _0x5a891f=_0x1ad985;let _0xc98a5c,_0x1b7f78=[],_0xe2b08e=[],_0x1e69bb=[];try{_0xc98a5c=await exchange[_0x5a891f(0x1ce)](),mybalances=_0xc98a5c[_0x5a891f(0x174)];if(!_0x1e3ac4)for(const [_0x343342,_0x306244]of Object[_0x5a891f(0x15b)](mybalances)){_0x1e69bb[_0x5a891f(0x17e)](_0x343342);}else config[_0x5a891f(0x1c5)][_0x5a891f(0x1dd)](_0x131b19=>{const _0x2179e7=_0x5a891f;if(!_0x131b19[_0x2179e7(0x18c)])_0x1e69bb[_0x2179e7(0x17e)](_0x131b19['coin']);});if(_0x496529=='')for(const [_0x264f7f,_0x1a8c5d]of Object['entries'](mybalances)){_0x1a8c5d[_0x5a891f(0x202)]()!=0x0&&_0xe2b08e['push']({'coin':_0x264f7f});}else for(const [_0x4d3701,_0x5b70a2]of Object[_0x5a891f(0x15b)](mybalances)){if(_0x1e69bb[_0x5a891f(0x1eb)](_0x4d3701)){const _0x3330ee=config[_0x5a891f(0x1c5)][_0x5a891f(0x21a)](_0x5c4d2b=>_0x5c4d2b['coin']==_0x4d3701);if((_0x5b70a2['toString']()!=0x0||_0x3330ee)&&(allSymbols[_0x5a891f(0x1eb)](_0x4d3701+'/'+_0x496529)||_0x4d3701==_0x496529))_0xe2b08e[_0x5a891f(0x17e)]({'coin':_0x4d3701,'symbol':_0x4d3701+'/'+_0x496529,'reverse':![],'number':Math[_0x5a891f(0x19a)](_0x5b70a2+(_0x3330ee&&_0x3330ee[_0x5a891f(0x150)]||0x0),0x0)}),_0x4d3701!=_0x496529&&_0x1b7f78['push'](_0x4d3701+'/'+_0x496529);else(_0x5b70a2[_0x5a891f(0x202)]()!=0x0||_0x3330ee)&&allSymbols['includes'](_0x496529+'/'+_0x4d3701)&&(_0xe2b08e[_0x5a891f(0x17e)]({'coin':_0x4d3701,'symbol':_0x496529+'/'+_0x4d3701,'reverse':!![],'number':Math[_0x5a891f(0x19a)](_0x5b70a2+(_0x3330ee&&_0x3330ee[_0x5a891f(0x150)]||0x0),0x0)}),_0x4d3701!=_0x496529&&_0x1b7f78[_0x5a891f(0x17e)](_0x496529+'/'+_0x4d3701));}}}catch(_0x1ffdfe){if(!_0x1e3ac4){if(_0x1ffdfe[_0x5a891f(0x202)]()[_0x5a891f(0x1eb)](_0x5a891f(0x21f)))return logHistory(_0x5a891f(0x165),'Binance\x20API\x20key\x20is\x20invalid'),![];else{if(_0x1ffdfe[_0x5a891f(0x202)]()[_0x5a891f(0x1eb)](_0x5a891f(0x217)))return logHistory(_0x5a891f(0x165),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x1ffdfe['toString']()['includes'](_0x5a891f(0x1de)))return logHistory(_0x5a891f(0x165),_0x5a891f(0x219)),![];else await handleError(_0x1ffdfe,'getCoins()');}}}else await handleError(_0x1ffdfe,'getCoins()');}return _0xe2b08e;}async function getPortfolio(_0x99f795){const _0x10dc46=_0x1ad985;let _0x3f7dad=[],_0x20dfd3=[],_0x3977d1,_0x3c4d14=[],_0x3e946c,_0x1e4671;_0x99f795[_0x10dc46(0x199)]===_0x10dc46(0x18e)||_0x99f795[_0x10dc46(0x1f9)]===_0x10dc46(0x18e)?(_0x3e946c=config['apiKey'],_0x1e4671=config[_0x10dc46(0x1f9)]):(_0x3e946c=_0x99f795[_0x10dc46(0x199)],_0x1e4671=_0x99f795[_0x10dc46(0x1f9)]);await initExchange(_0x3e946c,_0x1e4671);let _0x2e0179=await loadSymbols();if(_0x2e0179){_0x3c4d14=await getCoins(![],_0x99f795[_0x10dc46(0x16f)]);if(_0x3c4d14===![])proxyEmit(_0x10dc46(0x1c5),![]);else{if(_0x99f795['basecoin']=='')proxyEmit(_0x10dc46(0x1c5),_0x3c4d14);else{_0x3c4d14[_0x10dc46(0x1dd)](_0x13c33b=>{const _0x466b2d=_0x10dc46;_0x3f7dad['push'](_0x13c33b[_0x466b2d(0x20a)]);});try{_0x20dfd3=await exchange['fetchTickers'](_0x3f7dad);}catch(_0x508157){await handleError(_0x508157,_0x10dc46(0x15a));}_0x3c4d14['forEach'](_0x4e084a=>{const _0x179c05=_0x10dc46;_0x4e084a['coin']!=_0x99f795['basecoin']?_0x3977d1=_0x4e084a[_0x179c05(0x163)]?0x1/_0x20dfd3[_0x4e084a['symbol']][_0x179c05(0x247)]:_0x20dfd3[_0x4e084a[_0x179c05(0x20a)]]['last']:_0x3977d1=0x1,_0x4e084a[_0x179c05(0x232)]=formatResult(_0x3977d1,0x8);}),proxyEmit(_0x10dc46(0x1c5),_0x3c4d14);}}}else proxyEmit(_0x10dc46(0x1c5),![]);}function checkMinimums(_0x58830d){const _0x2c2995=_0x1ad985;let _0x434fe3=!![];const _0x3d4144=!_0x58830d[_0x2c2995(0x163)]?markets[_0x58830d[_0x2c2995(0x20a)]]['limits'][_0x2c2995(0x1d5)][_0x2c2995(0x200)]:markets[_0x58830d[_0x2c2995(0x20a)]][_0x2c2995(0x228)][_0x2c2995(0x1f4)][_0x2c2995(0x200)],_0x5a1465=!_0x58830d['reverse']?markets[_0x58830d[_0x2c2995(0x20a)]]['limits']['cost'][_0x2c2995(0x200)]:markets[_0x58830d[_0x2c2995(0x20a)]][_0x2c2995(0x228)]['amount'][_0x2c2995(0x200)];if(Math[_0x2c2995(0x192)](_0x58830d['trade'])<_0x3d4144)_0x434fe3=![];if(Math[_0x2c2995(0x192)](_0x58830d[_0x2c2995(0x19e)])*_0x58830d['last']<_0x5a1465)_0x434fe3=![];return _0x434fe3;}async function getBalances(){const _0x37ded2=_0x1ad985;let _0x506636=0x0,_0x4e72e1;const _0x176dfd=config[_0x37ded2(0x244)];currentCoins['forEach'](_0x132659=>{const _0x695ff1=_0x37ded2;if(_0x132659[_0x695ff1(0x1c7)]!=config['basecoin']){let _0x4096f9=global[_0x695ff1(0x177)][noslash(_0x132659['symbol'])];_0x4e72e1=_0x132659[_0x695ff1(0x163)]?0x1/_0x4096f9:_0x4096f9;}else _0x4e72e1=0x1;let _0x393160=_0x132659['number']*_0x4e72e1;_0x506636+=_0x393160,_0x132659[_0x695ff1(0x247)]=formatResult(Number(_0x4e72e1),0x8),_0x132659[_0x695ff1(0x15d)]=_0x393160;}),currentCoins[_0x37ded2(0x1dd)](_0x35c71d=>{const _0x148a30=_0x37ded2;let _0xbbe27=config[_0x148a30(0x1c5)]['find'](_0x508117=>_0x508117['coin']==_0x35c71d[_0x148a30(0x1c7)]),_0x5ed7b5=Number(_0xbbe27[_0x148a30(0x1fd)]),_0x27b31e=_0x35c71d[_0x148a30(0x15d)]/_0x506636*0x64,_0x24c73f=_0x5ed7b5*_0x506636/0x64/_0x35c71d[_0x148a30(0x247)]-_0x35c71d[_0x148a30(0x1ed)];_0x35c71d[_0x148a30(0x1fd)]=formatResult(_0x27b31e,0x3),_0x35c71d[_0x148a30(0x1a0)]=formatResult(_0x5ed7b5,0x3),_0x35c71d['trade']=formatResult(_0x24c73f,0x8),_0x35c71d['side']='',_0x35c71d['valid']='';if(_0x35c71d[_0x148a30(0x1c7)]!=config[_0x148a30(0x16f)]){if(_0x35c71d['distribution']>_0x5ed7b5)_0x35c71d['side']='sell',_0x35c71d[_0x148a30(0x20e)]=checkMinimums(_0x35c71d);else _0x35c71d[_0x148a30(0x1fd)]<_0x5ed7b5&&(_0x35c71d[_0x148a30(0x1d6)]=_0x148a30(0x241),_0x35c71d['valid']=checkMinimums(_0x35c71d));}_0x35c71d[_0x148a30(0x1f6)]=_0x35c71d[_0x148a30(0x1fd)]/_0x35c71d[_0x148a30(0x1a0)]-0x1;}),currentCoins[_0x37ded2(0x176)]((_0x27e9df,_0x3951db)=>_0x27e9df[_0x37ded2(0x1f6)]<_0x3951db['delta']?0x1:_0x3951db['delta']<_0x27e9df[_0x37ded2(0x1f6)]?-0x1:0x0);const _0x247c97=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x247c97[_0x37ded2(0x14d)],'usd':_0x247c97[_0x37ded2(0x1d4)],'portfolio':JSON[_0x37ded2(0x22d)](currentCoins),'threshold':_0x176dfd},proxyEmit(_0x37ded2(0x1c9),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x176dfd});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x12677f=_0x1ad985;if(!lastBalances)return;let _0x373dd3=await getStartingBalances(![]),_0x274a08=[],_0x4eb2ff;JSON[_0x12677f(0x20b)](lastBalances[_0x12677f(0x1c5)])['forEach'](_0x3434cb=>{const _0x37f5c5=_0x12677f;let _0x2b68a3={'coin':_0x3434cb['coin'],'number':_0x3434cb[_0x37f5c5(0x1ed)],'price':_0x3434cb['last']};_0x274a08[_0x37f5c5(0x17e)](_0x2b68a3);});const _0x11d000=await getFiat();_0x4eb2ff={'date':lastBalances[_0x12677f(0x195)][_0x12677f(0x1d3)]('\x20')[0x0],'eur':_0x11d000[_0x12677f(0x14d)],'usd':_0x11d000['usd'],'coins':_0x274a08};let _0x44c792=dbPerformance[_0x12677f(0x160)](_0x12677f(0x201))[_0x12677f(0x21a)]({'date':_0x4eb2ff['date']})[_0x12677f(0x15d)]();_0x44c792?dbPerformance[_0x12677f(0x160)](_0x12677f(0x201))['find']({'date':_0x4eb2ff['date']})[_0x12677f(0x1be)](_0x4eb2ff)[_0x12677f(0x216)]():dbPerformance['get'](_0x12677f(0x201))[_0x12677f(0x17e)](_0x4eb2ff)[_0x12677f(0x216)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3ae0c6=_0x1ad985;if(dbPerformance['has'](_0x3ae0c6(0x201))[_0x3ae0c6(0x15d)]()){let _0x2b80fd=dbPerformance[_0x3ae0c6(0x160)](_0x3ae0c6(0x201))['sortBy'](_0x3ae0c6(0x1b4))['value']();proxyEmit(_0x3ae0c6(0x1cb),_0x2b80fd),lastPerformanceEmitted=getDate();}else proxyEmit(_0x3ae0c6(0x1cb),[]);}async function getStartingBalances(_0x2e0042=!![]){const _0x537d4c=_0x1ad985;let _0x21f34c=dbPerformance[_0x537d4c(0x160)]('data')[_0x537d4c(0x21a)]({'date':config[_0x537d4c(0x242)]})['value']();config[_0x537d4c(0x199)]!=''&&!_0x21f34c&&(await setStartDatePerformance(config),_0x21f34c=dbPerformance[_0x537d4c(0x160)](_0x537d4c(0x201))['find']({'date':config['startdate']})[_0x537d4c(0x15d)]());if(config[_0x537d4c(0x199)]==''||!_0x21f34c)return{};let _0x3d964c=0x0,_0x4717d6=0x0,_0x442f94=0x0,_0x1921b1=[],_0x6e706=0x0;config[_0x537d4c(0x1c5)][_0x537d4c(0x1dd)](_0x843174=>{const _0x18b881=_0x537d4c;if(!_0x843174[_0x18b881(0x18c)]){_0x1921b1[_0x6e706]={'coin':_0x843174[_0x18b881(0x1c7)],'symbol':_0x843174[_0x18b881(0x20a)],'number':_0x843174['startnumber'],'price':_0x843174[_0x18b881(0x18a)]},_0x3d964c+=_0x843174[_0x18b881(0x18a)]*_0x843174[_0x18b881(0x208)];if(config['basecoin']==_0x18b881(0x182))_0x4717d6+=_0x843174[_0x18b881(0x18a)]*_0x843174[_0x18b881(0x208)]*_0x21f34c[_0x18b881(0x14d)],_0x442f94+=_0x843174[_0x18b881(0x18a)]*_0x843174[_0x18b881(0x208)]*_0x21f34c[_0x18b881(0x1d4)];else{if(config[_0x18b881(0x16f)]=='BUSD'||config['basecoin']==_0x18b881(0x1b5)||config[_0x18b881(0x16f)]==_0x18b881(0x1fb))_0x4717d6+=_0x843174[_0x18b881(0x18a)]*_0x843174[_0x18b881(0x208)]*_0x21f34c['eur']/_0x21f34c[_0x18b881(0x1d4)],_0x442f94+=_0x843174['startprice']*_0x843174['startnumber'];else config['basecoin']==_0x18b881(0x178)&&(_0x4717d6+=_0x843174['startprice']*_0x843174[_0x18b881(0x208)],_0x442f94+=_0x843174[_0x18b881(0x18a)]*_0x843174['startnumber']*_0x21f34c['usd']/_0x21f34c[_0x18b881(0x14d)]);}_0x6e706++;}});let _0x3d7d42={'basecoin':_0x3d964c,'eur':_0x4717d6,'usd':_0x442f94,'coins':_0x1921b1};if(_0x2e0042)proxyEmit('starting-balances',_0x3d7d42);return _0x3d7d42;}function headlessMode(_0x1fc7af){const _0x460040=_0x1ad985;let _0x40a3ec=_0x1fc7af['portfolio'],_0x80d246=_0x1fc7af[_0x460040(0x244)],_0x4f09fb=[];for(let _0x4b9694 of _0x40a3ec){if(_0x4b9694[_0x460040(0x1c7)]!=config[_0x460040(0x16f)]){if(_0x4b9694[_0x460040(0x1fd)]/_0x4b9694['target']-0x1>=_0x80d246/0x64){if(_0x4b9694[_0x460040(0x20e)])_0x4f09fb[_0x460040(0x17e)](_0x4b9694);}else{if(_0x4b9694['distribution']/_0x4b9694[_0x460040(0x1a0)]-0x1<=-_0x80d246/0x64){if(_0x4b9694[_0x460040(0x20e)])_0x4f09fb['push'](_0x4b9694);}}}}_0x4f09fb['length']>0x0&&placeOrder(_0x4f09fb);}function symbolToCoin(_0x1fddf8){const _0x545e2d=_0x1ad985;let _0x1fe153;if(_0x1fddf8[_0x545e2d(0x1eb)]('/'+config[_0x545e2d(0x16f)]))_0x1fe153=_0x1fddf8[_0x545e2d(0x225)]('/'+config[_0x545e2d(0x16f)],'');if(_0x1fddf8[_0x545e2d(0x1eb)](config[_0x545e2d(0x16f)]+'/'))_0x1fe153=_0x1fddf8[_0x545e2d(0x225)](config[_0x545e2d(0x16f)]+'/','');return _0x1fe153;}async function validateOrders(_0x2a6c01=0x0){const _0x4ed2f6=_0x1ad985;let _0x4ead25=[],_0x8b5731=config[_0x4ed2f6(0x1cd)]==_0x4ed2f6(0x1e7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4ed2f6(0x1fc)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x115b40=>{const _0x64d722=_0x4ed2f6;let _0x1a843b=previousCoins[_0x64d722(0x21a)](_0x427d50=>_0x427d50[_0x64d722(0x1c7)]==symbolToCoin(_0x115b40[_0x64d722(0x20a)])),_0x26253f=currentCoins['find'](_0x4dc62c=>_0x4dc62c[_0x64d722(0x1c7)]==symbolToCoin(_0x115b40[_0x64d722(0x20a)])),_0x39fe5b,_0x1cabec;_0x115b40[_0x64d722(0x1d6)]==_0x64d722(0x241)&&!_0x115b40['reverse']||_0x115b40['side']==_0x64d722(0x21b)&&_0x115b40[_0x64d722(0x163)]?(_0x39fe5b=_0x1a843b[_0x64d722(0x1ed)]+0.9*_0x115b40[_0x64d722(0x191)],_0x1cabec=_0x1a843b['number']+1.1*_0x115b40[_0x64d722(0x191)]):(_0x39fe5b=_0x1a843b[_0x64d722(0x1ed)]-1.1*_0x115b40[_0x64d722(0x191)],_0x1cabec=_0x1a843b[_0x64d722(0x1ed)]-0.9*_0x115b40[_0x64d722(0x191)]);const _0x4a7580=_0x115b40[_0x64d722(0x191)]!=0x0&&_0x26253f['number']>=_0x39fe5b&&_0x26253f[_0x64d722(0x1ed)]<=_0x1cabec;_0x4ead25[_0x64d722(0x17e)](_0x4a7580);if(_0x4a7580&&config[_0x64d722(0x1cd)]!=_0x64d722(0x1e7)){if(_0x115b40[_0x64d722(0x163)])logHistory('order','Order\x20filled:\x20'+_0x115b40[_0x64d722(0x20a)]+'\x20'+_0x115b40[_0x64d722(0x1d6)]+'\x20#'+formatResult(_0x115b40[_0x64d722(0x191)]/_0x115b40[_0x64d722(0x232)],0x8)+'\x20@'+formatResult(_0x115b40[_0x64d722(0x232)],0x8));else logHistory(_0x64d722(0x17d),_0x64d722(0x156)+_0x115b40[_0x64d722(0x20a)]+'\x20'+_0x115b40[_0x64d722(0x1d6)]+'\x20#'+formatResult(_0x115b40[_0x64d722(0x191)],0x8)+'\x20@'+formatResult(_0x115b40['price'],0x8));}}),_0x4ead25[_0x4ed2f6(0x1dd)]((_0x551af6,_0x1de4a8)=>{const _0x3c03b9=_0x4ed2f6;if(_0x551af6)lastOrders[_0x3c03b9(0x1ab)](_0x1de4a8,0x1);});if(_0x2a6c01<_0x8b5731&&_0x4ead25[_0x4ed2f6(0x1eb)](![])){if(_0x2a6c01==0x0){config[_0x4ed2f6(0x1cd)]==_0x4ed2f6(0x1e7)?logHistory(_0x4ed2f6(0x165),'Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused'):logHistory('error','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2a6c01);},0xa*0x3e8);}else{(_0x2a6c01==0x1||_0x2a6c01==Math['round'](_0x8b5731/0x2)||_0x2a6c01==_0x8b5731-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2a6c01);},validateOrderInterval);}}else{lockOrders=![];if(_0x2a6c01>0x0&&!_0x4ead25[_0x4ed2f6(0x1eb)](![]))config[_0x4ed2f6(0x1cd)]==_0x4ed2f6(0x1e7)?logHistory('success','Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x4ed2f6(0x154),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x2a6c01>0x0&&_0x4ead25['includes'](![])&&(config[_0x4ed2f6(0x1cd)]==_0x4ed2f6(0x1e7)?logHistory(_0x4ed2f6(0x154),_0x4ed2f6(0x1e0)+Math[_0x4ed2f6(0x170)](_0x8b5731*validateOrderInterval/0xea60)+_0x4ed2f6(0x17f)):(lastOrders[_0x4ed2f6(0x1dd)](async _0x354239=>{const _0x183d6f=_0x4ed2f6;try{const _0x290b1c=await exchange['cancelOrder'](_0x354239['orderId'],_0x354239[_0x183d6f(0x20a)]);}catch(_0xcb4e8e){if(_0xcb4e8e[_0x183d6f(0x202)]()[_0x183d6f(0x1eb)](_0x183d6f(0x1f5))){}else await handleError(_0xcb4e8e,_0x183d6f(0x215));}}),logHistory('success',_0x4ed2f6(0x1b7)+Math[_0x4ed2f6(0x170)](_0x8b5731*validateOrderInterval/0xea60)+_0x4ed2f6(0x17f))));}}async function resetCoinResults(){const _0x41c32e=_0x1ad985;dbCoinResults[_0x41c32e(0x160)](_0x41c32e(0x152))[_0x41c32e(0x1d7)]()[_0x41c32e(0x216)]();let _0x38b62f=await getStartingBalances(![]);_0x38b62f['coins'][_0x41c32e(0x1dd)](_0x4d1937=>{const _0x3e5158=_0x41c32e,_0x307ab6=_0x4d1937[_0x3e5158(0x20a)][_0x3e5158(0x1eb)](config['basecoin']+'/');if(_0x4d1937['coin']!=config[_0x3e5158(0x16f)]){let _0x593039={'coin':_0x4d1937[_0x3e5158(0x1c7)],'number':_0x4d1937[_0x3e5158(0x1ed)],'breakeven':_0x4d1937[_0x3e5158(0x232)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3e5158(0x160)](_0x3e5158(0x152))[_0x3e5158(0x17e)](_0x593039)[_0x3e5158(0x216)]();}});}async function updateCoinResults(_0x5668e6){const _0x65f553=_0x1ad985;let _0x91beff,_0x4b550f,_0x11edc3,_0x322452,_0x44f4e9,_0x1fbdd9,_0x41eb6f=dbCoinResults[_0x65f553(0x160)]('coins')[_0x65f553(0x21a)]({'coin':_0x5668e6[_0x65f553(0x1c7)]})[_0x65f553(0x15d)]();if(!_0x41eb6f)return;if(_0x5668e6[_0x65f553(0x1f8)]&&_0x5668e6[_0x65f553(0x1f8)]['currency']==config['basecoin'])_0x91beff=_0x5668e6[_0x65f553(0x1f8)][_0x65f553(0x1f4)];else{if(_0x5668e6[_0x65f553(0x1f8)]&&_0x5668e6[_0x65f553(0x1f8)][_0x65f553(0x1f1)]==_0x65f553(0x23b))_0x91beff=_0x5668e6[_0x65f553(0x1f8)]['cost']*global[_0x65f553(0x177)]['BNB'+config[_0x65f553(0x16f)]];else _0x91beff=0.001*_0x5668e6[_0x65f553(0x191)];}const _0x28019c=_0x5668e6[_0x65f553(0x20a)][_0x65f553(0x1eb)](config[_0x65f553(0x16f)]+'/');_0x28019c&&(_0x1fbdd9={'coin':_0x5668e6[_0x65f553(0x1c7)],'symbol':_0x5668e6[_0x65f553(0x20a)],'filled':_0x5668e6[_0x65f553(0x191)]*_0x5668e6[_0x65f553(0x232)],'side':_0x5668e6['side']==_0x65f553(0x21b)?'buy':'sell','price':0x1/_0x5668e6[_0x65f553(0x232)]},_0x5668e6={..._0x1fbdd9});_0x5668e6[_0x65f553(0x1d6)]==_0x65f553(0x241)?_0x11edc3=(_0x41eb6f[_0x65f553(0x1c8)]*_0x41eb6f['number']+_0x5668e6['price']*_0x5668e6[_0x65f553(0x191)])/(_0x41eb6f['number']+_0x5668e6[_0x65f553(0x191)]):_0x11edc3=(_0x41eb6f[_0x65f553(0x1c8)]*_0x41eb6f[_0x65f553(0x1ed)]-_0x5668e6[_0x65f553(0x232)]*_0x5668e6[_0x65f553(0x191)])/(_0x41eb6f[_0x65f553(0x1ed)]-_0x5668e6['filled']);_0x5668e6[_0x65f553(0x1d6)]==_0x65f553(0x241)?_0x322452=_0x41eb6f[_0x65f553(0x211)]:_0x322452=_0x41eb6f['realized']+(_0x5668e6[_0x65f553(0x232)]-_0x41eb6f[_0x65f553(0x1c8)])*_0x5668e6[_0x65f553(0x191)];_0x4b550f=_0x5668e6[_0x65f553(0x1d6)]==_0x65f553(0x21b)?_0x41eb6f[_0x65f553(0x1ed)]-_0x5668e6[_0x65f553(0x191)]:_0x41eb6f[_0x65f553(0x1ed)]+_0x5668e6[_0x65f553(0x191)],_0x44f4e9=(_0x5668e6[_0x65f553(0x232)]-_0x11edc3)*_0x4b550f;let _0x204522={'coin':_0x5668e6[_0x65f553(0x1c7)],'number':_0x4b550f,'breakeven':formatResult(_0x11edc3,0x8),'realized':formatResult(_0x322452,0x8),'unrealized':formatResult(_0x44f4e9,0x8),'fees':formatResult(_0x41eb6f[_0x65f553(0x1a2)]+_0x91beff,0x8),'sells':_0x5668e6[_0x65f553(0x1d6)]=='sell'?_0x41eb6f[_0x65f553(0x1a5)]+0x1:_0x41eb6f[_0x65f553(0x1a5)],'buys':_0x5668e6[_0x65f553(0x1d6)]==_0x65f553(0x241)?_0x41eb6f[_0x65f553(0x164)]+0x1:_0x41eb6f['buys']};dbCoinResults[_0x65f553(0x160)]('coins')[_0x65f553(0x21a)]({'coin':_0x5668e6['coin']})['assign'](_0x204522)[_0x65f553(0x216)]();}async function placeOrder(_0x1b16b6){const _0x326826=_0x1ad985,_0xceb9dd=config[_0x326826(0x1cd)]==_0x326826(0x1e7)?_0x326826(0x1e7):_0x326826(0x172);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x326826(0x20b)](JSON[_0x326826(0x22d)](currentCoins));for(const _0x14b434 of _0x1b16b6){let _0x58eea3,_0x5887ae,_0x9006cc,_0x173025,_0x217cb1,_0x35e97b=_0x14b434[_0x326826(0x20a)];try{const _0x2d5423=await exchange[_0x326826(0x190)](_0x35e97b),_0x1fbddc=_0x2d5423[_0x35e97b];_0x58eea3=_0x1fbddc[_0x326826(0x247)],_0x5887ae=_0x1fbddc[_0x326826(0x1b9)],_0x9006cc=_0x1fbddc['ask'];_0x14b434[_0x326826(0x163)]?(_0x173025=_0x14b434['side']=='buy'?_0x326826(0x21b):_0x326826(0x241),_0x217cb1=Math[_0x326826(0x192)](_0x14b434[_0x326826(0x19e)])/_0x58eea3):(_0x173025=_0x14b434['side'],_0x217cb1=Math[_0x326826(0x192)](_0x14b434[_0x326826(0x19e)]));_0xceb9dd=='limit'&&(config[_0x326826(0x1cd)]=='limit-high'&&(_0x58eea3=_0x173025==_0x326826(0x241)?_0x5887ae:_0x9006cc),config[_0x326826(0x1cd)]==_0x326826(0x226)&&(_0x58eea3=_0x173025=='buy'?_0x9006cc:_0x5887ae));_0x217cb1=formatResult(_0x217cb1,0x8),_0x58eea3=formatResult(_0x58eea3,0x8);const _0x430029=await exchange['createOrder'](_0x35e97b,_0xceb9dd,_0x173025,_0x217cb1,_0x58eea3);lastOrders[_0x326826(0x17e)]({'orderId':_0x430029['id'],'symbol':_0x35e97b,'side':_0x173025,'reverse':_0x14b434[_0x326826(0x163)],'amount':_0x14b434['reverse']?_0x430029[_0x326826(0x1d5)]*_0x430029[_0x326826(0x232)]:_0x430029[_0x326826(0x1d5)],'filled':_0x14b434[_0x326826(0x163)]?_0x430029[_0x326826(0x191)]*_0x430029[_0x326826(0x232)]:_0x430029[_0x326826(0x191)],'price':_0x430029[_0x326826(0x232)]});const _0x153b47=_0x173025==_0x326826(0x21b)?config['emojisell']?String[_0x326826(0x1ba)]('0x'+config[_0x326826(0x1a8)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0x5909cc=_0xceb9dd==_0x326826(0x1e7)?_0x326826(0x16b):config['ordertype']=='limit-high'?_0x326826(0x159):_0x326826(0x229);if(_0xceb9dd==_0x326826(0x1e7))logHistory(_0x326826(0x17d),''+_0x153b47+_0x5909cc+_0x326826(0x218)+_0x35e97b+'\x20'+_0x173025+'\x20#'+formatResult(_0x430029[_0x326826(0x191)],0x8)+'\x20@'+formatResult(_0x430029[_0x326826(0x232)],0x8));else logHistory(_0x326826(0x17d),''+_0x153b47+_0x5909cc+_0x326826(0x218)+_0x35e97b+'\x20'+_0x173025+'\x20#'+formatResult(_0x430029['amount'],0x8)+'\x20@'+formatResult(_0x430029[_0x326826(0x232)],0x8));_0x430029[_0x326826(0x1c7)]=_0x14b434[_0x326826(0x1c7)],await updateCoinResults(_0x430029);if(config['cooldown']!=0x0){let _0x3501fb=null;if(cooldownTracker[_0x326826(0x186)]==config['cooldown']-0x1)_0x3501fb=cooldownTracker['shift']();const _0x20be34=getTimeStamp();cooldownTracker['push'](_0x20be34);if(_0x3501fb){const _0x1c87ab=fns[_0x326826(0x214)](new Date(_0x20be34),new Date(_0x3501fb));_0x1c87ab<cooldownInterval&&(logHistory(_0x326826(0x165),_0x326826(0x209)+config[_0x326826(0x243)]+_0x326826(0x1ad)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x326826(0x1c2)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x15c748){if(_0x15c748[_0x326826(0x202)]()[_0x326826(0x1eb)]('MIN_NOTIONAL'))logHistory(_0x326826(0x165),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x35e97b);else{if(_0x15c748['toString']()['includes'](_0x326826(0x16c)))logHistory(_0x326826(0x165),'Order\x20amount\x20is\x20invalid:\x20'+_0x35e97b);else await handleError(_0x15c748,_0x326826(0x194));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x326826(0x1da)]&&(config[_0x326826(0x1cd)]==_0x326826(0x1e7)?logHistory('error',_0x326826(0x188)):logHistory(_0x326826(0x165),_0x326826(0x153)));else coolingDown&&(!config['headless']&&logHistory(_0x326826(0x165),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x32c0ed,_0xd652f,_0x5afc66=''){const _0x1ad2b5=_0x1ad985;let _0x2ad34c={'time':getTimeStamp(),'type':_0x32c0ed,'event':_0xd652f,'botname':config[_0x1ad2b5(0x193)],'showname':config[_0x1ad2b5(0x171)]};dbLogs[_0x1ad2b5(0x160)](_0x1ad2b5(0x1dc))[_0x1ad2b5(0x17e)](_0x2ad34c)[_0x1ad2b5(0x216)]();if(_0x5afc66=='')_0x5afc66=_0xd652f;proxyEmit(_0x1ad2b5(0x151),{'log':_0x2ad34c,'summary':_0x5afc66}),process[_0x1ad2b5(0x1b2)]({'telegram':_0x2ad34c}),logging(''+_0x2ad34c['event']);}function _0x4589(_0x59658c,_0x26432){const _0x23c539=_0x3c7b();return _0x4589=function(_0x544a78,_0x13a753){_0x544a78=_0x544a78-0x14c;let _0x3c7bd4=_0x23c539[_0x544a78];return _0x3c7bd4;},_0x4589(_0x59658c,_0x26432);}function emitHistory(_0x543dfb={}){const _0x5a920f=_0x1ad985;Object[_0x5a920f(0x1aa)](_0x543dfb)[_0x5a920f(0x186)]==0x0&&(_0x543dfb={'type':[_0x5a920f(0x17d),_0x5a920f(0x151)],'event':'','page':0x1});if(_0x543dfb[_0x5a920f(0x16d)]['includes']('event'))_0x543dfb['type']['splice'](_0x543dfb['type']['indexOf'](_0x5a920f(0x151)),0x1,_0x5a920f(0x165),_0x5a920f(0x154));if(dbLogs[_0x5a920f(0x231)](_0x5a920f(0x1dc))[_0x5a920f(0x15d)]()){let _0x569edd=dbLogs[_0x5a920f(0x160)]('logs')[_0x5a920f(0x246)](_0x1bdbb7=>{const _0x571e63=_0x5a920f;if(_0x543dfb[_0x571e63(0x16d)][_0x571e63(0x186)]==0x0)return![];else return _0x543dfb[_0x571e63(0x16d)][_0x571e63(0x1eb)](_0x1bdbb7['type']);})[_0x5a920f(0x246)](_0xf53691=>{const _0x210942=_0x5a920f;if(_0x543dfb[_0x210942(0x151)]=='')return!![];else return _0xf53691[_0x210942(0x151)]['toLowerCase']()[_0x210942(0x1eb)](_0x543dfb[_0x210942(0x151)]['toLowerCase']());})[_0x5a920f(0x19c)]('time'),_0x54542b=_0x569edd[_0x5a920f(0x15d)]()[_0x5a920f(0x186)];_0x569edd=_0x569edd[_0x5a920f(0x163)]()[_0x5a920f(0x19f)]((_0x543dfb[_0x5a920f(0x173)]-0x1)*logPageSize,_0x543dfb[_0x5a920f(0x173)]*logPageSize-0x1)[_0x5a920f(0x163)]()[_0x5a920f(0x15d)](),proxyEmit(_0x5a920f(0x22a),{'logs':_0x569edd,'total':_0x54542b});}else proxyEmit(_0x5a920f(0x22a),{'logs':[],'total':0x0});}async function pauseBot(_0x2a1231){const _0x1323b7=_0x1ad985,_0x1ce553=new Date()[_0x1323b7(0x1af)]();if(!lastBotPause)lastBotPause=new Date()[_0x1323b7(0x1af)](),consecutivePauses=0x1;else{if(_0x1ce553-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x1323b7(0x1b2)]({'stop':_0x1323b7(0x204)});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x1323b7(0x165),_0x1323b7(0x221)+consecutivePauses+')'),await sleep(_0x2a1231),botPaused=![],reset();}}async function handleError(_0x5e6876,_0x2152b1,_0x2224b8=''){const _0x3430a1=_0x1ad985;if(_0x5e6876[_0x3430a1(0x202)]()[_0x3430a1(0x1eb)]('DDoSProtection'))logHistory(_0x3430a1(0x165),_0x2152b1+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x5e6876[_0x3430a1(0x202)]()[_0x3430a1(0x1eb)]('ExchangeNotAvailable'))logHistory('error',_0x2152b1+_0x3430a1(0x1e5)),await pauseBot(pauseBotInterval);else{if(_0x5e6876[_0x3430a1(0x202)]()[_0x3430a1(0x1eb)](_0x3430a1(0x184)))logHistory(_0x3430a1(0x165),_0x2152b1+_0x3430a1(0x175)),await pauseBot(pauseBotInterval);else{if(_0x5e6876[_0x3430a1(0x202)]()['includes'](_0x3430a1(0x21f)))logHistory('error',_0x2152b1+_0x3430a1(0x1cf)),logHistory(_0x3430a1(0x165),_0x3430a1(0x197)),process['send']({'stop':_0x3430a1(0x1c6)});else{if(_0x5e6876[_0x3430a1(0x202)]()[_0x3430a1(0x1eb)]('AuthenticationError'))logHistory(_0x3430a1(0x165),_0x2152b1+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x3430a1(0x165),_0x3430a1(0x197)),process[_0x3430a1(0x1b2)]({'stop':_0x3430a1(0x1c6)});else{if(_0x5e6876[_0x3430a1(0x202)]()[_0x3430a1(0x1eb)](_0x3430a1(0x1de)))logHistory(_0x3430a1(0x165),_0x2152b1+_0x3430a1(0x17c)),logHistory(_0x3430a1(0x165),_0x3430a1(0x197)),process[_0x3430a1(0x1b2)]({'stop':_0x3430a1(0x1c6)});else{if(_0x5e6876[_0x3430a1(0x202)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3430a1(0x165),_0x2152b1+_0x3430a1(0x181)),logHistory('error',_0x3430a1(0x197)),process[_0x3430a1(0x1b2)]({'stop':'kill'});else{if(_0x5e6876[_0x3430a1(0x202)]()['includes']('InvalidNonce'))logHistory(_0x3430a1(0x165),_0x2152b1+_0x3430a1(0x196)),await pauseBot(pauseBotInterval),process[_0x3430a1(0x1b2)]({'stop':_0x3430a1(0x204)});else _0x5e6876['toString']()['includes'](_0x3430a1(0x230))?logHistory('error',_0x2152b1+_0x3430a1(0x22b)):(logHistory(_0x3430a1(0x165),_0x2152b1+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x2152b1+_0x3430a1(0x1db),_0x5e6876),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x108b97,_0x4ac929){const _0x5ce4af=_0x1ad985;return parseFloat(_0x108b97[_0x5ce4af(0x22e)](_0x4ac929));}function _0x3c7b(){const _0x22c517=['hybrid-crypto-js','Performance\x20recreation\x20completed\x20successfully','subscribeSpotUserDataStream','function','buy','startdate','cooldown','threshold','executionReport','filter','last','enabled','orderId','getSeconds','101465zJFNYH','message','args','Bot\x20','eur','userData','getFiat()','offset','event','coins','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','success','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','Order\x20filled:\x20','emojibuy','initws()','Limit\x20(high-margin)','getPortfolio()','entries','getStartingBalances','value','privateKey','isArray','get','HOT/BTC','configuration-stored','reverse','buys','error','BTC/EUR','wsMarket','6VndIed','sha256','./config/','Market','Invalid\x20quantity','type','\x20-\x20','basecoin','round','showname','limit','page','total','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','sort','ticker','EUR','HOT/EUR','reduce',':\x20Bot\x20','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','order','push','\x20minutes\x20-\x20balancing\x20resumed','settings','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','BTC','differenceInCalendarDays','RequestTimeout','bb-settings.json','length','exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','WebSockets(','startprice','constructor','excluded','getMinutes','************','cancel','fetchTickers','filled','abs','botname','placeOrder()','time','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','-config.json','apiKey','max',')\x20|\x20Error\x20details:\x20','sortBy','BTC/USDT','trade','slice','target','placeOrder','fees','binanceus','746444feQBbQ','sells','subscribeSpotKline','001','emojisell','log','keys','splice','version','\x20orders\x20in\x20less\x20than\x20','BTCUSDT','getTime','eventType','storeHeadless','send','\x20>\x20','date','USDT','./version.json','Unfilled\x20order(s)\x20canceled\x20after\x20','-events.json','bid','fromCodePoint','-performance.json','471988VOcBNA','test','assign','recreateHistory()','Crypt','wsKey','\x20hour','orderType','defaults','portfolio','kill','coin','breakeven','balances','apply','performance','timestamp','ordertype','fetchBalance','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','getDate','date-fns','datetime','split','usd','amount','side','remove','argv','bot','headless','\x20|\x20Error\x20details:\x20','logs','forEach','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','milliseconds','Order(s)\x20not\x20validated\x20after\x20','wss://stream.binance.us:9443','padStart',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','fetchOHLCV','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','close','market','loadMarkets','LIMIT','exit','includes','lowdb/adapters/FileSync','number','asset','parseISO','search','currency','configuration','yyyy/MM/dd\x20HH:mm:ss','cost','OrderNotFound','delta','symbols','fee','apiSecret','outboundAccountPosition','USDC','timeout','distribution','format','add','min','data','toString','wss://stream.binance.com:9443','restart','getMonth','orderStatus','483930UMdWtR','startnumber','Executed\x20','symbol','parse','running','4025095YcZAIW','valid','botID','getCloses()','realized','BTCEUR','3962504FEuhYb','differenceInSeconds','cancelOrder()','write','AuthenticationError','\x20order:\x20','Binance\x20API\x20secret\x20is\x20invalid','find','sell','binance','recreate','timeshift','API-key\x20format\x20invalid','formattedMessage','Pausing\x20bot\x20for\x205\x20minutes\x20(','ccxt','remainingSymbols','bot-','replace','limit-low','yyyy/MM/dd','limits','Limit\x20(low-margin)','event-history','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','getHours','stringify','toFixed','11913424KlnbuX','InsufficientFunds','has','price','kline','decrypt','spot','eachDayOfInterval','getFullYear','cancelLoading','BTCBUSD','accumulatedQuantity','BNB','mkdirSync'];_0x3c7b=function(){return _0x22c517;};return _0x3c7b();}function logging(_0x5c6c5d,_0x324c23=''){const _0x1da277=_0x1ad985;if(config[_0x1da277(0x171)])console[_0x1da277(0x1a9)](getTimeStamp()+':\x20'+config[_0x1da277(0x193)]+'\x20>\x20'+_0x5c6c5d,_0x324c23);else console[_0x1da277(0x1a9)](getTimeStamp()+_0x1da277(0x17b)+botID+_0x1da277(0x1b3)+_0x5c6c5d,_0x324c23);}function getServerTime(){const _0x54ba9b=_0x1ad985,_0x4b02ea=new Date();return _0x4b02ea[_0x54ba9b(0x237)]()+'/'+(_0x4b02ea[_0x54ba9b(0x205)]()+0x1)[_0x54ba9b(0x202)]()[_0x54ba9b(0x1e2)](0x2,'0')+'/'+_0x4b02ea[_0x54ba9b(0x1d0)]()[_0x54ba9b(0x202)]()[_0x54ba9b(0x1e2)](0x2,'0')+'\x20'+_0x4b02ea[_0x54ba9b(0x22c)]()[_0x54ba9b(0x202)]()[_0x54ba9b(0x1e2)](0x2,'0')+':'+_0x4b02ea[_0x54ba9b(0x18d)]()[_0x54ba9b(0x202)]()[_0x54ba9b(0x1e2)](0x2,'0')+':'+_0x4b02ea[_0x54ba9b(0x24a)]()[_0x54ba9b(0x202)]()[_0x54ba9b(0x1e2)](0x2,'0');}function getTimeStamp(){const _0x41d7b0=_0x1ad985,_0x124e1a=shiftedTime();return _0x124e1a[_0x41d7b0(0x237)]()+'/'+(_0x124e1a[_0x41d7b0(0x205)]()+0x1)[_0x41d7b0(0x202)]()['padStart'](0x2,'0')+'/'+_0x124e1a[_0x41d7b0(0x1d0)]()[_0x41d7b0(0x202)]()[_0x41d7b0(0x1e2)](0x2,'0')+'\x20'+_0x124e1a[_0x41d7b0(0x22c)]()[_0x41d7b0(0x202)]()[_0x41d7b0(0x1e2)](0x2,'0')+':'+_0x124e1a['getMinutes']()[_0x41d7b0(0x202)]()[_0x41d7b0(0x1e2)](0x2,'0')+':'+_0x124e1a[_0x41d7b0(0x24a)]()[_0x41d7b0(0x202)]()[_0x41d7b0(0x1e2)](0x2,'0');}function getDate(){const _0x3cbc54=_0x1ad985,_0x3a0f65=shiftedTime();return _0x3a0f65['getFullYear']()+'/'+(_0x3a0f65[_0x3cbc54(0x205)]()+0x1)[_0x3cbc54(0x202)]()['padStart'](0x2,'0')+'/'+_0x3a0f65[_0x3cbc54(0x1d0)]()[_0x3cbc54(0x202)]()[_0x3cbc54(0x1e2)](0x2,'0');}function getHour(){const _0x44d153=_0x1ad985,_0x492dce=shiftedTime();return _0x492dce['getHours']()[_0x44d153(0x202)]()['padStart'](0x2,'0');}function sleep(_0x38c0bf){return new Promise(_0x409a23=>setTimeout(_0x409a23,_0x38c0bf));}function shiftedTime(){const _0x4c4925=_0x1ad985,_0x5dd12b=new Date();let _0x261990=_0x5dd12b;if(config&&config[_0x4c4925(0x21e)]!==0x0)_0x261990=fns[_0x4c4925(0x1ff)](_0x5dd12b,{'hours':config[_0x4c4925(0x21e)]});return _0x261990;}