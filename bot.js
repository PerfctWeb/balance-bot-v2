const _0x2733a5=_0x1e70;(function(_0x58bd5a,_0x5eb821){const _0x437746=_0x1e70,_0x3f9ad7=_0x58bd5a();while(!![]){try{const _0x3bc4e7=parseInt(_0x437746(0x1a5))/0x1+-parseInt(_0x437746(0x239))/0x2+parseInt(_0x437746(0x174))/0x3+-parseInt(_0x437746(0x17e))/0x4+-parseInt(_0x437746(0x264))/0x5*(parseInt(_0x437746(0x101))/0x6)+parseInt(_0x437746(0x1e6))/0x7*(-parseInt(_0x437746(0x238))/0x8)+-parseInt(_0x437746(0x240))/0x9*(-parseInt(_0x437746(0x1f4))/0xa);if(_0x3bc4e7===_0x5eb821)break;else _0x3f9ad7['push'](_0x3f9ad7['shift']());}catch(_0x31112c){_0x3f9ad7['push'](_0x3f9ad7['shift']());}}}(_0x212d,0x86380));const _0x3528f8=function(){let _0x158be1=!![];return function(_0x52f19e,_0x3c0fe6){const _0x21e19c=_0x158be1?function(){if(_0x3c0fe6){const _0x15e507=_0x3c0fe6['apply'](_0x52f19e,arguments);return _0x3c0fe6=null,_0x15e507;}}:function(){};return _0x158be1=![],_0x21e19c;};}(),_0x2db095=_0x3528f8(this,function(){const _0x51f4f4=_0x1e70;return _0x2db095['toString']()[_0x51f4f4(0x19b)](_0x51f4f4(0x173))[_0x51f4f4(0x125)]()['constructor'](_0x2db095)[_0x51f4f4(0x19b)](_0x51f4f4(0x173));});_0x2db095();function _0x1e70(_0x58b27e,_0x36abcf){const _0x2b2a23=_0x212d();return _0x1e70=function(_0x2db095,_0x3528f8){_0x2db095=_0x2db095-0xf3;let _0x212dc8=_0x2b2a23[_0x2db095];return _0x212dc8;},_0x1e70(_0x58b27e,_0x36abcf);}'use strict';const ccxt=require(_0x2733a5(0x145))[_0x2733a5(0x183)],low=require(_0x2733a5(0x160)),FileSync=require(_0x2733a5(0x226)),fs=require('fs'),fns=require(_0x2733a5(0x1f0)),Crypt=require('hybrid-crypto-js')[_0x2733a5(0x1d2)],util=require(_0x2733a5(0x256)),argv=require(_0x2733a5(0x1e0))(process[_0x2733a5(0x22c)][_0x2733a5(0x1f7)](0x2))[_0x2733a5(0x22c)],path=require('path');let exchange;global[_0x2733a5(0x1fa)]={},global['change']={};const usdBasecoins=[_0x2733a5(0x16e),'BUSD',_0x2733a5(0x25d),_0x2733a5(0x216),_0x2733a5(0x1cf),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x2733a5(0x208)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x2733a5(0x11e)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x2733a5(0x249)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x2733a5(0xfa)](botID)&&(console[_0x2733a5(0x19a)](_0x2733a5(0x13e)+botID+_0x2733a5(0x15d)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x2733a5(0x1ba)+userID+'/':_0x2733a5(0x1ba),logspath=userID?'./logs/'+userID+'/':_0x2733a5(0x132),loggerfile=fs[_0x2733a5(0x26e)](logspath+_0x2733a5(0x119),{'flags':'a'});!fs[_0x2733a5(0x217)](configpath)&&fs[_0x2733a5(0x1fb)](configpath);!fs[_0x2733a5(0x217)](logspath)&&fs[_0x2733a5(0x1fb)](logspath);const configfile=configpath+_0x2733a5(0x107)+botID+_0x2733a5(0x14e),logfile=configpath+_0x2733a5(0x107)+botID+_0x2733a5(0x271),performancefile=configpath+_0x2733a5(0x107)+botID+_0x2733a5(0x25b),coinresultsfile=configpath+_0x2733a5(0x107)+botID+_0x2733a5(0x1a1),settingsfile=configpath+_0x2733a5(0x1d5),securefile=configpath+_0x2733a5(0x1c2),configbackuppath=configpath+_0x2733a5(0x189),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2733a5(0x17f)]({'logs':[],'version':serverversion})[_0x2733a5(0x1f1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2733a5(0x17f)]({'data':[],'version':serverversion})[_0x2733a5(0x1f1)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2733a5(0x17f)]({'bot':[],'version':serverversion})[_0x2733a5(0x1f1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x2733a5(0x17f)]({'coins':[],'version':serverversion})[_0x2733a5(0x1f1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x2733a5(0x211),'rsaStandard':_0x2733a5(0x112)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x23c249=>{console['log'](_0x23c249);},'simple':_0x477ef3=>{const _0x6437a3=_0x2733a5;console[_0x6437a3(0x19a)](_0x477ef3),loggerfile[_0x6437a3(0x1f1)](util[_0x6437a3(0x1c5)](_0x477ef3)+'\x0a');},'full':async(_0x3900d2,_0x18ebaa='')=>{const _0x30c459=_0x2733a5;let _0x138e6c;if(config['showname'])_0x138e6c=getTimeStamp()+':\x20'+config[_0x30c459(0x13d)]+_0x30c459(0x13c)+_0x3900d2;else _0x138e6c=getTimeStamp()+_0x30c459(0x1a4)+botID+_0x30c459(0x13c)+_0x3900d2;console[_0x30c459(0x19a)](_0x138e6c),loggerfile['write'](util[_0x30c459(0x1c5)](_0x138e6c)+'\x0a'),_0x18ebaa&&(console[_0x30c459(0x19a)](_0x18ebaa),loggerfile[_0x30c459(0x1f1)](util[_0x30c459(0x1c5)](_0x18ebaa)+'\x0a'));},'debug':async(_0xe4f654,_0x2d129d='')=>{const _0x12bef4=_0x2733a5;let _0x3b0da0;if(config[_0x12bef4(0x122)])_0x3b0da0=getTimeStamp()+':\x20'+config[_0x12bef4(0x13d)]+_0x12bef4(0x26f)+_0xe4f654;else _0x3b0da0=getTimeStamp()+_0x12bef4(0x1a4)+botID+_0x12bef4(0x26f)+_0xe4f654;if(debugging)console[_0x12bef4(0x19a)](_0x3b0da0);loggerfile[_0x12bef4(0x1f1)](util['format'](_0x3b0da0)+'\x0a');if(_0x2d129d){if(debugging)console[_0x12bef4(0x19a)](_0x2d129d);loggerfile[_0x12bef4(0x1f1)](util[_0x12bef4(0x1c5)](_0x2d129d)+'\x0a');}}};process['on'](_0x2733a5(0x126),function(_0x34570f){const _0x4f97a6=_0x2733a5;logger[_0x4f97a6(0x13f)](_0x4f97a6(0x204),_0x34570f);});settings[_0x2733a5(0x192)]!=config[_0x2733a5(0x192)]&&updateTimeshift(settings[_0x2733a5(0x192)]);settings['onepagemode']!=config[_0x2733a5(0x258)]&&updateOnepagemode(settings[_0x2733a5(0x258)]);process['send']({'started':_0x2733a5(0x131)},_0xdda55c=>{}),initializeProcessListeners();function proxyEmit(_0x403966,_0x1d9d37=null){const _0x413fae=_0x2733a5;process[_0x413fae(0x276)]({'function':_0x403966,'args':_0x1d9d37},_0x83280=>{});}function initializeProcessListeners(){process['on']('message',_0x4472f2=>{const _0x523da2=_0x1e70;switch(Object[_0x523da2(0x156)](_0x4472f2)[0x0]){case _0x523da2(0x192):_0x4472f2[_0x523da2(0x192)]!=undefined&&(settings[_0x523da2(0x192)]=_0x4472f2[_0x523da2(0x192)],updateTimeshift(settings['timeshift']));break;case _0x523da2(0x258):_0x4472f2[_0x523da2(0x258)]!=undefined&&(settings[_0x523da2(0x258)]=_0x4472f2[_0x523da2(0x258)],updateOnepagemode(settings['onepagemode']));break;case _0x523da2(0xf8):_0x4472f2['bots']!=undefined&&(bots=JSON['parse'](_0x4472f2['bots']),proxyEmit(_0x523da2(0xf8),bots));break;case _0x523da2(0x13a):switch(_0x4472f2[_0x523da2(0x13a)]){case _0x523da2(0x11c):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x523da2(0x147):emitHistory(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x203):deleteHistoryAlerts(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x139):getPortfolio(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x149):storeConfiguration(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x15c):storeHeadless(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x1c4):storeFiat(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x1ee):resetHistory();break;case _0x523da2(0x25f):getStartingBalances(getNormalizedPerformance());break;case _0x523da2(0x230):placeOrder(_0x4472f2[_0x523da2(0xf6)]);break;case _0x523da2(0x1e1):cancelLoading();break;case _0x523da2(0x278):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x523da2(0x1ce):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x1c363a=null,_0x4e06a0=![]){const _0x196702=_0x2733a5;logger[_0x196702(0x13f)](_0x196702(0x21a)+(_0x1c363a&&_0x1c363a['length']>0x0?_0x196702(0x219)+_0x1c363a[_0x196702(0x18c)](','):'no\x20additional\x20symbols')+_0x196702(0x1e9)+(_0x4e06a0?_0x196702(0x262):_0x196702(0x214))+_0x196702(0xfc)+config[_0x196702(0x115)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4e06a0)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x196702(0x1c8)]!=''&&config[_0x196702(0x1c8)]!=_0x196702(0x200)){if(_0x4e06a0){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x32f4b2){handleErrorNoStop(_0x32f4b2,_0x196702(0x1d3));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x1c363a);const _0x58fbe8=await getCoins();[currentCoins,currentCoinsAll]=_0x58fbe8,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x196702(0x1de)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x32e476=_0x2733a5;exchangeStopped=!![],await exchange[_0x32e476(0x1a3)]();}async function reloadExchange(){const _0x299daa=_0x2733a5;logger[_0x299daa(0x13f)](_0x299daa(0x20a));while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x299daa(0x1dc)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4c27da=config['exchange'],_0xdd94e0=config[_0x2733a5(0x1c8)],_0x32e4d7=config[_0x2733a5(0x19e)],_0x4378c6=config[_0x2733a5(0x106)]){const _0x1efe57=_0x2733a5;exchange&&await stopExchange();!supportedExchanges()[_0x1efe57(0x195)](_0x4c27da)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x4c27da+_0x1efe57(0x138)),killBot());const _0x7edd7a=ccxt[_0x4c27da[_0x1efe57(0x1db)]()];exchange=new _0x7edd7a({'apiKey':_0xdd94e0,'secret':_0x32e4d7,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1efe57(0x16d)}});if(_0x4378c6)exchange[_0x1efe57(0xf7)]=_0x4378c6;}function setStableCoins(){const _0x2fb817=_0x2733a5;let _0x1818ff=config[_0x2fb817(0x194)]=='ETH'?_0x2fb817(0x1ea):_0x2fb817(0x10a),_0x27b873=!allSymbols[_0x2fb817(0x195)](_0x1818ff+_0x2fb817(0x14d))?_0x2fb817(0x216):_0x2fb817(0x16e),_0x2d7a61=!allSymbols['includes'](_0x1818ff+_0x2fb817(0x1ac))?_0x27b873:_0x2fb817(0x1a9);stablecoins={'eur':{'coin':''+_0x1818ff+_0x2d7a61,'symbol':_0x1818ff+'/'+_0x2d7a61},'usd':{'coin':''+_0x1818ff+_0x27b873,'symbol':_0x1818ff+'/'+_0x27b873}};}async function initwsCcxt(_0x236b8a){const _0x2b7a0f=_0x2733a5;_0x236b8a==null&&(_0x236b8a=[],config['portfolio'][_0x2b7a0f(0x158)](_0x5ba58a=>{const _0x1efc6b=_0x2b7a0f;if(!_0x5ba58a['excluded']&&_0x5ba58a['coin']!=config[_0x1efc6b(0x194)])_0x236b8a[_0x1efc6b(0x1b3)](_0x5ba58a['symbol']);}));if(!_0x236b8a['includes'](stablecoins[_0x2b7a0f(0x142)]['symbol']))_0x236b8a[_0x2b7a0f(0x1b3)](stablecoins[_0x2b7a0f(0x142)][_0x2b7a0f(0x10b)]);if(!_0x236b8a[_0x2b7a0f(0x195)](stablecoins[_0x2b7a0f(0x130)][_0x2b7a0f(0x10b)]))_0x236b8a[_0x2b7a0f(0x1b3)](stablecoins[_0x2b7a0f(0x130)][_0x2b7a0f(0x10b)]);if(config[_0x2b7a0f(0x115)][_0x2b7a0f(0x196)](_0x2b7a0f(0x1b5))){if(!_0x236b8a['includes'](_0x2b7a0f(0x100)+config[_0x2b7a0f(0x194)]))_0x236b8a['push'](_0x2b7a0f(0x100)+config['basecoin']);}loadCoins(_0x236b8a);const _0x5e848a=async _0x1ef3b8=>{const _0x35aa7b=_0x2b7a0f,_0x1543af=await exchange['fetchTicker'](_0x1ef3b8);global[_0x35aa7b(0x1fa)][noslash(_0x1543af[_0x35aa7b(0x10b)])]=_0x1543af['last'];while(!![]){if(!botPaused)try{const _0x681a13=await exchange[_0x35aa7b(0x233)](_0x1ef3b8);global[_0x35aa7b(0x1fa)][noslash(_0x681a13[0x0]['symbol'])]=_0x681a13[0x0][_0x35aa7b(0x197)],await sleep(0x3e8);}catch(_0x508bc8){if(!exchangeStopped)await handleError(_0x508bc8,'watchTrades',_0x1ef3b8);}else await sleep(0x64);}},_0x2c436e=async _0x3a3439=>{const _0x4a5bb5=_0x2b7a0f;while(!![]){if(!botPaused)try{const _0x325e03=await exchange['fetchTicker'](_0x3a3439);global[_0x4a5bb5(0x10d)][_0x325e03['symbol']]=_0x325e03[_0x4a5bb5(0x25a)],await sleep(0x3c*0x3e8);}catch(_0x44938b){if(!exchangeStopped)await handleError(_0x44938b,_0x4a5bb5(0x228),_0x3a3439);}else await sleep(0x64);}},_0x60f15e=async()=>{const _0x34bd6c=_0x2b7a0f;while(!![]){if(!botPaused)try{const _0x193ffe=await exchange[_0x34bd6c(0x221)]();_0x193ffe['forEach'](_0x3aeef5=>{updateNumberCoinsCcxt(_0x3aeef5);});}catch(_0x49ebb3){if(!exchangeStopped)await handleError(_0x49ebb3,_0x34bd6c(0x221));}else await sleep(0x64);}};_0x236b8a[_0x2b7a0f(0x158)](_0x1ffaa0=>{_0x5e848a(_0x1ffaa0),_0x2c436e(_0x1ffaa0);}),!wsEventsSet&&(wsEventsSet=!![],_0x60f15e(),watchTransactions());}async function watchTransactions(){const _0x5ea5a5=_0x2733a5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4d4825=await getCoins(),[_0x16126d,_0x279c2e]=_0x4d4825;let _0x323939=[];currentCoins[_0x5ea5a5(0x158)](_0x5b1a80=>{const _0x2d5261=_0x5ea5a5,_0x55e09c=_0x16126d[_0x2d5261(0x123)](_0x5cd81d=>_0x5cd81d['coin']==_0x5b1a80['coin']);_0x55e09c&&(_0x5b1a80[_0x2d5261(0x202)]!=_0x55e09c[_0x2d5261(0x202)]&&_0x323939[_0x2d5261(0x1b3)]({'coin':_0x5b1a80[_0x2d5261(0xf9)],'symbol':_0x5b1a80[_0x2d5261(0x10b)],'reverse':_0x5b1a80[_0x2d5261(0x24b)],'number':Number(formatResult(_0x55e09c[_0x2d5261(0x202)]-_0x5b1a80[_0x2d5261(0x202)],0x8))}));});if(_0x323939[_0x5ea5a5(0x1de)]==0x1&&!blockTransactionDetection){if(config[_0x5ea5a5(0x163)]){logger[_0x5ea5a5(0x13f)]('Fees\x20|\x20currency:\x20'+lastFees[_0x5ea5a5(0x1f9)]+_0x5ea5a5(0x135)+lastFees[_0x5ea5a5(0x257)]);if(!lastFees[_0x5ea5a5(0x1f9)]||_0x323939[0x0]['coin']!=lastFees['currency']||_0x323939[0x0]['number']>lastFees[_0x5ea5a5(0x257)]){let _0x16fed4;if(_0x323939[0x0][_0x5ea5a5(0xf9)]!=config[_0x5ea5a5(0x194)]){let _0x215e62=global[_0x5ea5a5(0x1fa)][noslash(_0x323939[0x0][_0x5ea5a5(0x10b)])];_0x16fed4=_0x323939[0x0]['reverse']?0x1/_0x215e62:_0x215e62;}else _0x16fed4=0x1;_0x323939[0x0]['price']=_0x16fed4,delete _0x323939[0x0]['symbol'];let _0x2e1183=[],_0x5398a6=[...config[_0x5ea5a5(0x171)]]||[],_0x473097=config[_0x5ea5a5(0x171)];_0x5398a6[_0x5ea5a5(0x26c)]((_0x14b303,_0x42483d)=>_0x14b303[_0x5ea5a5(0x190)]>_0x42483d[_0x5ea5a5(0x190)]?-0x1:_0x42483d[_0x5ea5a5(0x190)]>_0x14b303['date']?0x1:0x0);const _0xb33025=getDate();if(_0x5398a6[0x0]){const _0x579cf6=fns[_0x5ea5a5(0x178)](_0x5398a6[0x0]['date'],_0x5ea5a5(0x1e3),new Date()),_0xcd8c6=fns['parse'](_0xb33025,_0x5ea5a5(0x1e3),new Date());if(fns[_0x5ea5a5(0x134)](_0x579cf6,_0xcd8c6)){_0x2e1183=_0x5398a6[0x0]['changes'];const _0x36ca6b=_0x2e1183[_0x5ea5a5(0x123)](_0x52b51e=>_0x52b51e[_0x5ea5a5(0xf9)]==_0x323939[0x0][_0x5ea5a5(0xf9)]);_0x36ca6b?(_0x36ca6b[_0x5ea5a5(0x202)]+=_0x323939[0x0][_0x5ea5a5(0x202)],_0x36ca6b[_0x5ea5a5(0x202)]==0x0&&(_0x2e1183=_0x2e1183[_0x5ea5a5(0x17d)](_0x2ae9a7=>{const _0x4bbd05=_0x5ea5a5;return _0x2ae9a7[_0x4bbd05(0xf9)]!=_0x323939[0x0]['coin'];}))):_0x2e1183[_0x5ea5a5(0x1b3)](_0x323939[0x0]);const _0x263242=_0x473097[_0x5ea5a5(0x123)](_0x3b7123=>_0x3b7123[_0x5ea5a5(0x190)]==_0xb33025);_0x263242[_0x5ea5a5(0x1ae)]=_0x2e1183;}else _0x473097[_0x5ea5a5(0x1b3)]({'date':_0xb33025,'changes':[_0x323939[0x0]]});}const _0x42808e=_0x473097[_0x5ea5a5(0x123)](_0x38a35b=>_0x38a35b[_0x5ea5a5(0x190)]==_0xb33025);if(_0x42808e){let _0x972241=!![];_0x42808e[_0x5ea5a5(0x1ae)][_0x5ea5a5(0x158)](_0x1952a1=>{if(_0x1952a1['number']!=0x0)_0x972241=![];}),_0x972241&&(_0x473097=_0x473097[_0x5ea5a5(0x17d)](_0x3aa40b=>{const _0x33718c=_0x5ea5a5;return _0x3aa40b[_0x33718c(0x190)]!=_0xb33025;}));}let _0x387b60=dbConfig[_0x5ea5a5(0x103)](_0x5ea5a5(0x266))[_0x5ea5a5(0x123)]({'botID':botID})[_0x5ea5a5(0x213)]();_0x387b60&&(dbConfig[_0x5ea5a5(0x103)](_0x5ea5a5(0x266))['find']({'botID':botID})[_0x5ea5a5(0x12a)]({'liquidity':_0x473097})[_0x5ea5a5(0x1f1)](),config['liquidity']=_0x473097),logHistory(_0x5ea5a5(0x169),_0x5ea5a5(0x14a)+Math[_0x5ea5a5(0x1cd)](_0x323939[0x0]['number'])+'\x20'+_0x323939[0x0][_0x5ea5a5(0xf9)]+'\x20'+(_0x323939[0x0][_0x5ea5a5(0x202)]>0x0?_0x5ea5a5(0x102):_0x5ea5a5(0x188))+_0x5ea5a5(0x248)),proxyEmit(_0x5ea5a5(0x1e7),emittedConfiguration());}else logger[_0x5ea5a5(0x13f)](_0x5ea5a5(0x235)+Math[_0x5ea5a5(0x1cd)](_0x323939[0x0]['number'])+'\x20'+_0x323939[0x0][_0x5ea5a5(0xf9)]+'\x20'+(_0x323939[0x0][_0x5ea5a5(0x202)]>0x0?_0x5ea5a5(0x102):_0x5ea5a5(0x188)));transactionDetected=!![],currentCoins=_0x16126d,currentCoinsAll=_0x279c2e;}else logger[_0x5ea5a5(0x13f)](_0x5ea5a5(0x14a)+Math[_0x5ea5a5(0x1cd)](_0x323939[0x0][_0x5ea5a5(0x202)])+'\x20'+_0x323939[0x0][_0x5ea5a5(0xf9)]+'\x20'+(_0x323939[0x0][_0x5ea5a5(0x202)]>0x0?_0x5ea5a5(0x102):_0x5ea5a5(0x188))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled'),currentCoins=_0x16126d,currentCoinsAll=_0x279c2e;}await sleep(watchTransactionsInterval);}catch(_0x201399){if(!exchangeStopped)await handleError(_0x201399,_0x5ea5a5(0x1d9));}else await sleep(0x64);}}async function loadSymbols(_0xb2e837=config[_0x2733a5(0x115)],_0x824ece=![]){const _0x48cadc=_0x2733a5;if(allSymbols&&!_0x824ece)return;try{markets=await exchange['loadMarkets'](),allSymbols=[],Object[_0x48cadc(0x16f)](markets)[_0x48cadc(0x158)](_0x20a320=>{const _0x5f35e2=_0x48cadc;_0x20a320[0x1][_0x5f35e2(0x261)]&&_0x20a320[0x1][_0x5f35e2(0x16d)]&&allSymbols[_0x5f35e2(0x1b3)](_0x20a320[0x0]);});}catch(_0x29987c){throw _0x29987c;}}async function initclient(){const _0x1d9a85=_0x2733a5;emitLoadingProgress(),proxyEmit(_0x1d9a85(0x1e7),emittedConfiguration()),proxyEmit(_0x1d9a85(0x24d),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1d9a85(0x252),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x119564=getNormalizedPerformance();emitPerformance(_0x119564),getStartingBalances(_0x119564);}async function toggleBotMode(){const _0x21b38f=_0x2733a5;let _0x4ec856=dbConfig['get']('bot')[_0x21b38f(0x123)]({'botID':botID})[_0x21b38f(0x213)]();if(_0x4ec856){const _0x5422cc=!_0x4ec856[_0x21b38f(0xfd)];dbConfig[_0x21b38f(0x103)](_0x21b38f(0x266))[_0x21b38f(0x123)]({'botID':botID})['assign']({'headless':_0x5422cc})['write'](),config[_0x21b38f(0xfd)]=_0x5422cc,proxyEmit(_0x21b38f(0x1e7),emittedConfiguration()),updateBotManager();}}function updateBotManager(){process['send']({'updatebotmanager':!![]},_0x3e5916=>{});}function _0x212d(){const _0x2b6e3d=['threshold','ID:\x20','RSA-OAEP','toFixed','getMinutes','exchange','2\x20-\x20FILLED\x20known\x20order:\x20','\x20hour','progress','/output-000.log','error','parseISO','initclient','loadMarkets','UNLOCKED','limit-high','\x20has\x20a\x2024h\x20drop\x20of\x20','2\x20-\x20Orders\x20unlocked','showname','find','enabled','toString','uncaughtException','2.5.0','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','orderstatus','assign','Resetting\x20coin\x20results:\x20','ORDERS.LOCKED','side','recreate','fetchTicker','usd','running','./logs/','concat','isEqual','\x20|\x20highest:\x20','emojibuy','coins','\x20exchange','getPortfolio','function','startnumber','\x20>\x20','botname','Error:\x20Invalid\x20argument\x20','debug','bid','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','eur','status','map','ccxt','cancelOrder','emitHistory','openOrders','storeConfiguration','Portfolio\x20change\x20detected:\x20','API-key\x20format\x20invalid','open','/USD','-config.json','getSeconds','remove','min','ORDERS.UNLOCKING','coin-loading-progress','valid','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','keys','timeout','forEach','\x20value','ongoing','leftTxt','storeHeadless',',\x20must\x20be\x20a\x203\x20digit\x20number','getPortfolio(2)','fromCodePoint','lowdb','LOCKED','getFullYear','autoliquidity','timestamp','set','logs','sells','************','success','milliseconds','AuthenticationError','Invalid\x20API\x20key\x20or\x20secret\x20entered','spot','USD','entries','netoffset','liquidity','OnMaintenance','(((.+)+)+)+$','2113086HbyNiM','starting-balance-','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limits','parse','fetchBalance','Pausing\x20for\x20','final','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','filter','2930060SVDWUk','defaults','Limit\x20(high-margin)','Uncaught\x20NetworkError:','breakeven','pro','getCoinNumber()','splice','2\x20-\x20Validate\x20orders:\x20','sortBy','removed','/backup/','warning','Initializing\x20coin\x20results','join','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','replace','\x20not\x20responding','date','balancing\x20resumes\x20when\x20cooldown\x20ends','timeshift',':\x20timer\x20>','basecoin','includes','startsWith','price','1\x20-\x20Handle\x20open\x20orders','has','log','search','Order\x20amount\x20is\x20invalid:\x20','getOpenOrders()','apiSecret','add','UNLOCKING','-results.json','\x20not\x20available','close',':\x20Bot\x20','622215OaSgwh','\x20metrics:</b>\x20\x0a\x0a','InsufficientFunds','change24h','EUR','recent20','configuration-stored','/EUR','exec','changes','padEnd','Manual\x20balancing\x20required','toUpperCase','average','push','net-fiat','Binance','\x20:\x20','canceled','DDoSProtection','ORDERS.UNLOCKED','./config/','Order\x20is\x20invalid:\x20','startdate','balancing\x20resumed','none','%\x20(','Bot\x20','offset','bb-secure.json','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','storeFiat','format','startprice','orderId','apiKey','decrypt','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','getTime','shift','abs','sendPortfolioTelegram','USDC','<pre>','secure','Crypt','loadSymbols()','no\x20open\x20orders','bb-settings.json','1\x20-\x20Validate\x20orders:\x20','full','type','watchTransactions','Net\x20effect','toLowerCase','Executing\x20exchange\x20reload','restart','length','\x20|\x20lock\x20orders:\x20','yargs/yargs','cancelLoading','initial','yyyy/MM/dd','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','remainingSymbols','581063tRkado','configuration','cancel','\x20|\x20','ETH','\x20connection\x20problem','sell','page','resetHistory','buys','date-fns','write','red_yellow_blue','placeOrder()','41000VnBfwi','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','cloneDeep','slice','distribution','currency','ticker','mkdirSync','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ask','\x20order:\x20','Limit\x20(low-margin)','***','cooldown','number','deleteHistoryAlerts','Uncaught\x20Exception:','Transaction\x20detection\x20unblocked','Cooldown\x20ended\x20-\x20balancing\x20resumed','BNB','freeze','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Initiating\x20exchange\x20reload','realized','random','total','split','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','order','sha256','\x20API\x20key\x20is\x20invalid','value','exchange\x20not\x20reloaded','Order\x20filled:\x20','USDT','existsSync','</pre>','additional\x20symbols\x20','Reset\x20|\x20','1\x20-\x20Unlock\x20orders','round','getDate','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','getMonth','delta','watchOrders','amount','Executed\x20','\x20closed\x20the\x20connection','fiat','lowdb/adapters/FileSync','ordertype','fetchTickers','starting-balances','<b>Bot\x20','RateLimitExceeded','argv','must\x20be\x20greater\x20than\x20minimum\x20amount','writeFile','<b>','placeOrder','fetchOpenOrders','buy','watchTrades','rightTxt','Fee\x20discount\x20refund\x20detected:\x20','message','-------------------------------\x0a','72mMEcdx','2025032vhSvQj','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','customId','findIndex','market','\x20portfolio:</b>\x20\x0a\x0a','colorscheme','6039jvsmmo','2.6.0','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Avoiding\x20continuous\x20order\x20attempts','net-basecoin','loading-canceled','limit','\x20|\x20Custom\x20ID:\x20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','version','event-history','reverse','target','exchanges','1\x20-\x20FILLED:\x20','Error\x20while\x20deleting\x20files:\x20','padStart','cost','balances','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','unlinkSync','filled','util','highest','onepagemode','datetime','percentage','-performance.json','portfolio','TUSD','fee','getStartingBalances','max','active','exchange\x20reloaded','closed','5179025SfDWfz','string','bot','trade','data','Unfilled\x20order(s)\x20canceled\x20after\x20','Transaction\x20detection\x20blocked','getCoins()','sort','botID','createWriteStream','\x20>\x20[DEBUG]\x20','performance','-events.json','emojisell','Unknown\x20error\x20occured','excluded','No\x20more\x20open\x20orders\x20-\x20','send','\x20-\x20bot\x20not\x20started','showConfig','RequestTimeout','last','\x20minutes\x20-\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','stringify','args','password','bots','coin','test','getHours','\x20|\x20exchange:\x20','headless','createOrder','OrderNotFound','BNB/','6kkEzUF','added','get','time','privateKey','apiPassword','bot-','2.3.5','event','BTC','symbol','fetchClosedOrders','change','InvalidNonce','getPortfolio(1)'];_0x212d=function(){return _0x2b6e3d;};return _0x212d();}async function loadCoins(_0x59f24e){const _0x3c4fd7=_0x2733a5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1dc2de,_0x40c869=0x0,_0x4c0f58=0x0;_0x59f24e['forEach'](_0x3b4085=>{const _0x54cea7=_0x1e70;loading[_0x54cea7(0x1e5)][_0x54cea7(0x1b3)](_0x3b4085);}),loadingCanceled=![];let _0x23dcbb=![];while(_0x1dc2de!=_0x59f24e['length']){_0x1dc2de=0x0,_0x59f24e[_0x3c4fd7(0x158)](_0x1a2f71=>{const _0x5ba81f=_0x3c4fd7;if(global[_0x5ba81f(0x1fa)][noslash(_0x1a2f71)]){loading[_0x5ba81f(0x1e5)]=loading[_0x5ba81f(0x1e5)]['filter'](_0x16fff2=>_0x16fff2!=_0x1a2f71);if(!watchedSymbols[_0x5ba81f(0x195)](_0x1a2f71))watchedSymbols[_0x5ba81f(0x1b3)](_0x1a2f71);_0x1dc2de++;}}),loading[_0x3c4fd7(0x118)]=Math[_0x3c4fd7(0x21c)](_0x1dc2de/_0x59f24e[_0x3c4fd7(0x1de)]*0x64);loading[_0x3c4fd7(0x118)]!=0x64&&(_0x4c0f58>0x1e*0x5&&(loading[_0x3c4fd7(0x157)]=!![],emitLoadingProgress()),_0x4c0f58>0x78*0x5&&!_0x23dcbb&&(loading[_0x3c4fd7(0x1e8)]=!![],emitLoadingProgress(),_0x23dcbb=!![],logHistory(_0x3c4fd7(0x11a),_0x3c4fd7(0xf4)+loading[_0x3c4fd7(0x1e5)][_0x3c4fd7(0x18c)](',\x20')+_0x3c4fd7(0x277)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3c4fd7(0x1f5)),pidCoinReloading=setTimeout(()=>{const _0x4f1da8=_0x3c4fd7;process[_0x4f1da8(0x276)]({'stop':_0x4f1da8(0x1dd)},_0x30eb1a=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x1dc2de!=_0x40c869&&(_0x40c869=_0x1dc2de,emitLoadingProgress()),_0x4c0f58++,await sleep(0xc8);}_0x1dc2de==_0x59f24e[_0x3c4fd7(0x1de)]&&(coinsLoaded=!![],process['send']({'status':_0x3c4fd7(0x124),'live':_0x3c4fd7(0x131)},_0x3329ff=>{}),_0x23dcbb&&logHistory(_0x3c4fd7(0x169),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x31bec6=_0x2733a5;proxyEmit(_0x31bec6(0x1e7),{...emittedConfiguration(),'configstate':_0x31bec6(0x245)});}function emitLoadingProgress(){const _0x15ebd7=_0x2733a5;proxyEmit(_0x15ebd7(0x153),loading);}async function getFiat(){const _0xe6293c=_0x2733a5;let _0x201112=global[_0xe6293c(0x1fa)][stablecoins['eur'][_0xe6293c(0xf9)]],_0x69ada7=global[_0xe6293c(0x1fa)][stablecoins['usd'][_0xe6293c(0xf9)]];return{'eur':Number(_0x201112),'usd':Number(_0x69ada7)};}function capitalize(_0x46a946){const _0x37615b=_0x2733a5;return _0x46a946['substring'](0x0,0x1)[_0x37615b(0x1b1)]()+_0x46a946['substring'](0x1);}function supportedExchanges(){const _0x303fb3=_0x2733a5,_0x474410=['ws',_0x303fb3(0x228),_0x303fb3(0x12f),_0x303fb3(0x233),_0x303fb3(0x221),_0x303fb3(0x146),'createOrder',_0x303fb3(0x231),_0x303fb3(0x10c),_0x303fb3(0x179)];let _0x3ae2b5=[],_0x222929=[],_0x1961dc=ccxt[_0x303fb3(0x24d)];_0x1961dc['forEach'](_0x384d9e=>{const _0x5be0da=_0x303fb3;try{const _0x5a5bbc=new ccxt[_0x384d9e]();if(_0x5a5bbc[_0x5be0da(0x199)]['ws'])_0x222929[_0x5be0da(0x1b3)](_0x5a5bbc);}catch(_0x4bf441){}}),_0x222929['forEach'](_0x35e6a8=>{const _0x18d92d=_0x303fb3;let _0x493ce9=0x0;_0x474410['forEach'](_0x3ceae2=>{const _0x1d8489=_0x1e70;_0x3ceae2 in _0x35e6a8['has']&&_0x35e6a8[_0x1d8489(0x199)][_0x3ceae2]&&_0x493ce9++;}),_0x493ce9==_0x474410[_0x18d92d(0x1de)]&&_0x3ae2b5[_0x18d92d(0x1b3)](capitalize(_0x35e6a8['id']));});let _0xd820b8=[];return _0x1961dc[_0x303fb3(0x158)](_0x1c821e=>{const _0x3b71c3=_0x303fb3;_0x1c821e=capitalize(_0x1c821e);if(!_0x3ae2b5[_0x3b71c3(0x195)](_0x1c821e))_0xd820b8[_0x3b71c3(0x1b3)](_0x1c821e);}),_0x3ae2b5;}function setStartDatePerformance(){const _0x468715=_0x2733a5;if(config&&config[_0x468715(0x171)][0x0]['changes'][_0x468715(0x1de)]!=0x0){const _0xfa0f2b=config['liquidity'][0x0][_0x468715(0x1ae)];dbPerformance[_0x468715(0x103)]('data')[_0x468715(0x123)]({'date':config[_0x468715(0x1bc)]})[_0x468715(0x12a)]({'coins':_0xfa0f2b})['write']();}}async function recreateCoinResults(){const _0x3b0f5e=_0x2733a5;let _0x4593d9,_0x2f54c4=[];try{const _0x52e9c5=fns[_0x3b0f5e(0x1c5)](fns[_0x3b0f5e(0x11b)](config[_0x3b0f5e(0x1bc)][_0x3b0f5e(0x18e)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x34144c of currentCoins){if(_0x34144c[_0x3b0f5e(0xf9)]!=config['basecoin']){let _0x1a84b0=0x0,_0x269b45,_0x62d3c6;_0x4593d9=await getAllEventOrders(_0x34144c['symbol']);if(_0x4593d9[_0x3b0f5e(0x1de)]>0x0)_0x4593d9[_0x3b0f5e(0x158)](_0x2b57e2=>{const _0x35a521=_0x3b0f5e,_0x2bfdbe=_0x34144c['symbol'][_0x35a521(0x195)](config['basecoin']+'/');_0x2f54c4['push']({'datetime':_0x2b57e2[_0x35a521(0x259)],'coin':_0x34144c[_0x35a521(0xf9)],'symbol':_0x34144c[_0x35a521(0x10b)],'side':_0x2b57e2[_0x35a521(0x12d)],'reverse':_0x2bfdbe,'amount':formatResult(_0x2b57e2['filled'],0x8),'filled':formatResult(_0x2b57e2['filled'],0x8),'price':formatResult(_0x2b57e2[_0x35a521(0x197)],0x8)}),_0x1a84b0=_0x2b57e2[_0x35a521(0x12d)]==_0x35a521(0x232)?_0x1a84b0+_0x2b57e2[_0x35a521(0x255)]:_0x1a84b0-_0x2b57e2[_0x35a521(0x255)];if(!_0x62d3c6)_0x62d3c6=_0x2b57e2[_0x35a521(0x197)];});_0x269b45=_0x34144c[_0x3b0f5e(0x202)]-_0x1a84b0;let _0x2008a9;config[_0x3b0f5e(0x171)]['forEach'](_0x4fc43f=>{const _0x22dbd9=_0x3b0f5e;!_0x2008a9&&(_0x2008a9=_0x4fc43f[_0x22dbd9(0x1ae)][_0x22dbd9(0x123)](_0x12fa24=>_0x12fa24[_0x22dbd9(0xf9)]==_0x34144c[_0x22dbd9(0xf9)]),_0x2008a9&&(_0x269b45=_0x2008a9[_0x22dbd9(0x202)],_0x62d3c6=_0x2008a9['price']));});let _0x16fcb3=dbCoinResults[_0x3b0f5e(0x103)]('coins')[_0x3b0f5e(0x123)]({'coin':_0x34144c[_0x3b0f5e(0xf9)]})[_0x3b0f5e(0x213)]();_0x16fcb3={'coin':_0x34144c['coin'],'number':_0x269b45,'breakeven':_0x62d3c6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3b0f5e(0x103)](_0x3b0f5e(0x137))[_0x3b0f5e(0x123)]({'coin':_0x34144c[_0x3b0f5e(0xf9)]})[_0x3b0f5e(0x12a)](_0x16fcb3)[_0x3b0f5e(0x1f1)]();}}_0x2f54c4[_0x3b0f5e(0x26c)]((_0x268e5b,_0x48134e)=>_0x268e5b[_0x3b0f5e(0x259)]>_0x48134e[_0x3b0f5e(0x259)]?0x1:_0x48134e[_0x3b0f5e(0x259)]>_0x268e5b[_0x3b0f5e(0x259)]?-0x1:0x0);let _0x433b9d=0x0;for(let _0x3ed9d5 of _0x2f54c4){await updateCoinResults(_0x3ed9d5,!![]);}}catch(_0x3d0000){await handleError(_0x3d0000,'recreateCoinResults()');}}async function getAllEventOrders(_0x522257){const _0xf947b1=_0x2733a5;let _0x7dac95=[],_0x52c273=dbLogs[_0xf947b1(0x103)](_0xf947b1(0x166))[_0xf947b1(0x17d)](_0x4a7352=>{const _0x2d5811=_0xf947b1,_0x5c8001=_0x4a7352[_0x2d5811(0x109)][_0x2d5811(0x1db)]();return _0x5c8001[_0x2d5811(0x195)](_0x522257[_0x2d5811(0x1db)]())&&(_0x5c8001['includes'](_0x2d5811(0x23d))&&_0x5c8001[_0x2d5811(0x195)](_0x2d5811(0x210))||_0x5c8001[_0x2d5811(0x195)](_0x2d5811(0x255))&&_0x5c8001[_0x2d5811(0x195)](_0x2d5811(0x210)));})[_0xf947b1(0x187)](_0xf947b1(0x104))[_0xf947b1(0x213)]();return _0x52c273[_0xf947b1(0x158)](_0x3ffa4f=>{const _0x1fc631=_0xf947b1,_0x4cf1be=_0x3ffa4f[_0x1fc631(0x109)][_0x1fc631(0x195)]('sell')?_0x1fc631(0x1ec):_0x1fc631(0x232),_0x487075=/#([0-9]|\.)+\s/i,_0x4b7d68=Number(_0x487075['exec'](_0x3ffa4f[_0x1fc631(0x109)])[0x0][_0x1fc631(0x1f7)](0x1)),_0x24e273=/@([0-9]|\.)+$/i,_0x4e730b=Number(_0x24e273[_0x1fc631(0x1ad)](_0x3ffa4f[_0x1fc631(0x109)])[0x0][_0x1fc631(0x1f7)](0x1));_0x7dac95[_0x1fc631(0x1b3)]({'datetime':_0x3ffa4f[_0x1fc631(0x104)],'coin':symbolToCoin(_0x522257),'symbol':_0x522257,'side':_0x4cf1be,'amount':_0x4b7d68,'filled':_0x4b7d68,'price':_0x4e730b});}),_0x7dac95;}async function getAllOrders(_0x466a9d,_0x2bd4fd){const _0x17cb5a=_0x2733a5;let _0x152f88=[];while(_0x2bd4fd<exchange[_0x17cb5a(0x16a)]()){const _0x208983=0x1f4,_0xcb8a7c=await exchange[_0x17cb5a(0x10c)](_0x466a9d,_0x2bd4fd,_0x208983);if(_0xcb8a7c['length'])_0x2bd4fd=_0xcb8a7c[_0xcb8a7c['length']-0x1][_0x17cb5a(0x164)]+0x1,_0x152f88=_0x152f88[_0x17cb5a(0x133)](_0xcb8a7c);else break;}return _0x152f88;}async function validate24hChanges(){const _0x261f97=_0x2733a5;for(const _0x5b6a34 of currentCoins){if(_0x5b6a34[_0x261f97(0xf9)]!=config[_0x261f97(0x194)]){let _0x31d3d4;_0x5b6a34[_0x261f97(0x24b)]?_0x31d3d4=formatResult((0x1/(global[_0x261f97(0x10d)][noslash(_0x5b6a34['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x31d3d4=global[_0x261f97(0x10d)][noslash(_0x5b6a34[_0x261f97(0x10b)])],_0x31d3d4<config[_0x261f97(0x1a8)]&&(logHistory(_0x261f97(0x11a),_0x5b6a34['coin']+_0x261f97(0x120)+_0x31d3d4+'%'),logHistory(_0x261f97(0x11a),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x261f97(0x11a),_0x261f97(0x1e4)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x4d37e7,_0x56aafa){const _0x320a92=_0x2733a5;if(!_0x4d37e7)return!![];const _0xae4aa8=_0x56aafa['split']('.'),_0x4e1f6c=_0x4d37e7[_0x320a92(0x20e)]('.');for(var _0x14d770=0x0;_0x14d770<_0x4e1f6c[_0x320a92(0x1de)];_0x14d770++){const _0x240b9c=~~_0x4e1f6c[_0x14d770],_0x30fbbb=~~_0xae4aa8[_0x14d770];if(_0x240b9c<_0x30fbbb)return!![];if(_0x240b9c>_0x30fbbb)return![];}return![];}async function oneTimeMigration(){const _0x642e71=_0x2733a5;let _0x24f573=dbLogs[_0x642e71(0x103)](_0x642e71(0x249))[_0x642e71(0x213)]();if(isOlderVersion(_0x24f573,'2.3.5')){let _0xb58e0c=[];const _0x3cadbf=dbLogs['get'](_0x642e71(0x166))[_0x642e71(0x213)]();_0x3cadbf['forEach'](_0x5089ea=>{const _0x39f96a=_0x642e71;_0xb58e0c[_0x39f96a(0x1b3)]({'time':_0x5089ea[_0x39f96a(0x104)],'type':_0x5089ea['type'],'event':_0x5089ea[_0x39f96a(0x109)]});}),dbLogs[_0x642e71(0x103)](_0x642e71(0x166))['assign'](_0xb58e0c)[_0x642e71(0x1f1)]();}let _0x388e81=dbConfig[_0x642e71(0x103)](_0x642e71(0x249))[_0x642e71(0x213)]();if(isOlderVersion(_0x388e81,_0x642e71(0x108))){let _0x432536=dbConfig[_0x642e71(0x103)]('bot')['find']({'botID':botID})[_0x642e71(0x213)]();if(_0x432536){let _0x4c07bd=[];_0x432536[_0x642e71(0x25c)]['forEach'](_0x42e6e7=>{const _0x37afc2=_0x642e71;_0x4c07bd[_0x37afc2(0x1b3)]({'coin':_0x42e6e7[_0x37afc2(0xf9)],'number':_0x42e6e7['startnumber'],'price':_0x42e6e7[_0x37afc2(0x1c6)]}),delete _0x42e6e7[_0x37afc2(0x13b)],delete _0x42e6e7['startprice'];});if(_0x4c07bd[_0x642e71(0x1de)]!==0x0)fs[_0x642e71(0x22e)](configbackuppath+(_0x642e71(0x175)+botID+'.json'),JSON[_0x642e71(0xf5)](_0x4c07bd,null,0x4),function(_0x371328){if(_0x371328){}});const _0x207d5d=(_0x363daa,_0x1cab60)=>{const _0x5e1305=_0x642e71;let _0x5db583=[];_0x1cab60[_0x5e1305(0x158)](_0x57407a=>{const _0x4ca0da=_0x5e1305,_0x478749=_0x363daa[_0x4ca0da(0x123)](_0x31718d=>_0x31718d[_0x4ca0da(0xf9)]==_0x57407a[_0x4ca0da(0xf9)]);if(!_0x478749)_0x5db583[_0x4ca0da(0x1b3)](_0x57407a);});let _0x5ae1aa=[];return _0x363daa[_0x5e1305(0x158)](_0x23950a=>{const _0x15e181=_0x5e1305,_0x2bf783=_0x1cab60[_0x15e181(0x123)](_0x5c90b7=>_0x5c90b7[_0x15e181(0xf9)]==_0x23950a['coin']);if(!_0x2bf783||_0x2bf783[_0x15e181(0x202)]==0x0&&_0x23950a['number']!=0x0)_0x5ae1aa[_0x15e181(0x1b3)](_0x23950a);}),{'missingDay1':_0x5db583,'notInDay2':_0x5ae1aa};},_0x25cf0d=dbPerformance[_0x642e71(0x103)](_0x642e71(0x268))[_0x642e71(0x1f6)]()[_0x642e71(0x213)]();if(_0x25cf0d[_0x642e71(0x1de)]>0x1){const {missingDay1:_0x46dcde,notInDay2:_0x3b7334}=_0x207d5d(_0x4c07bd,_0x25cf0d[0x1][_0x642e71(0x137)]);_0x4c07bd=[..._0x4c07bd,..._0x46dcde],_0x3b7334[_0x642e71(0x158)](_0x3e8200=>{const _0x2a0a9b=_0x642e71;let _0x51deef=_0x4c07bd[_0x2a0a9b(0x23c)](_0x51714e=>_0x51714e[_0x2a0a9b(0xf9)]==_0x3e8200['coin']);_0x51deef!=-0x1&&_0x4c07bd[_0x2a0a9b(0x185)](_0x51deef,0x1);});}_0x4c07bd[_0x642e71(0x26c)]((_0x446743,_0x226cc2)=>_0x446743[_0x642e71(0xf9)]>_0x226cc2[_0x642e71(0xf9)]?0x1:_0x226cc2[_0x642e71(0xf9)]>_0x446743[_0x642e71(0xf9)]?-0x1:0x0);let _0x1d992f=[{'date':_0x432536['startdate'],'changes':_0x4c07bd}];_0x25cf0d['length']>0x2&&_0x25cf0d[_0x642e71(0x158)]((_0x5c2d81,_0x26c631)=>{const _0x420da2=_0x642e71;if(_0x26c631>0x0&&_0x26c631<_0x25cf0d[_0x420da2(0x1de)]-0x1){const {missingDay1:_0x417aab,notInDay2:_0x2662b4}=_0x207d5d(_0x25cf0d[_0x26c631][_0x420da2(0x137)],_0x25cf0d[_0x26c631+0x1][_0x420da2(0x137)]);_0x4c07bd=[],(_0x417aab[_0x420da2(0x1de)]!=0x0||_0x2662b4[_0x420da2(0x1de)]!=0x0)&&(_0x417aab[_0x420da2(0x1de)]!=0x0&&_0x4c07bd[_0x420da2(0x1b3)](..._0x417aab),_0x2662b4[_0x420da2(0x1de)]!=0x0&&(_0x2662b4[_0x420da2(0x158)](_0x25dd4e=>{_0x25dd4e['number']=-_0x25dd4e['number'];}),_0x4c07bd['push'](..._0x2662b4)),_0x4c07bd['sort']((_0x49e8d,_0x161469)=>_0x49e8d[_0x420da2(0xf9)]>_0x161469[_0x420da2(0xf9)]?0x1:_0x161469[_0x420da2(0xf9)]>_0x49e8d[_0x420da2(0xf9)]?-0x1:0x0),_0x1d992f['push']({'date':_0x25cf0d[_0x26c631+0x1][_0x420da2(0x190)],'changes':_0x4c07bd}));}}),dbConfig['get']('bot')[_0x642e71(0x123)]({'botID':botID})['assign']({..._0x432536,'liquidity':_0x1d992f})[_0x642e71(0x1f1)]();}}if(isOlderVersion(_0x388e81,_0x642e71(0x241))){let _0x515283=dbConfig[_0x642e71(0x103)](_0x642e71(0x266))[_0x642e71(0x123)]({'botID':botID})[_0x642e71(0x213)]();if(_0x515283){const _0x11c7e0=_0x515283[_0x642e71(0x115)],_0x3eac2a=_0x11c7e0?capitalize(_0x11c7e0):_0x642e71(0x1b5);dbConfig['get'](_0x642e71(0x266))['find']({'botID':botID})['assign']({'exchange':_0x3eac2a})[_0x642e71(0x1f1)]();}}let _0x286cf1=dbPerformance['get'](_0x642e71(0x249))[_0x642e71(0x213)]();isOlderVersion(_0x286cf1,'2.3.5')&&setStartDatePerformance();let _0x4f4930=dbCoinResults[_0x642e71(0x103)]('version')[_0x642e71(0x213)]();if(isOlderVersion(_0x4f4930,_0x642e71(0x127))){let _0x3e62f2=dbCoinResults['get']('coins')[_0x642e71(0x213)]();if(_0x3e62f2[_0x642e71(0x1de)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2cebf8=_0x2733a5;dbConfig[_0x2cebf8(0x165)](_0x2cebf8(0x249),serverversion)[_0x2cebf8(0x1f1)](),dbPerformance[_0x2cebf8(0x165)](_0x2cebf8(0x249),serverversion)[_0x2cebf8(0x1f1)](),dbLogs[_0x2cebf8(0x165)](_0x2cebf8(0x249),serverversion)[_0x2cebf8(0x1f1)](),dbCoinResults[_0x2cebf8(0x165)](_0x2cebf8(0x249),serverversion)[_0x2cebf8(0x1f1)]();}function getConfiguration(_0x333672){const _0x31ac68=_0x2733a5;let _0x2c6ed2=dbConfig[_0x31ac68(0x103)]('bot')[_0x31ac68(0x123)]({'botID':_0x333672})['value']();if(_0x2c6ed2){let _0x1d4333=![];typeof _0x2c6ed2[_0x31ac68(0x110)]==_0x31ac68(0x265)&&(_0x2c6ed2={..._0x2c6ed2,'threshold':Number(_0x2c6ed2['threshold'])},_0x1d4333=!![]),_0x2c6ed2['change24h']==null&&(_0x2c6ed2={..._0x2c6ed2,'change24h':-0x14},_0x1d4333=!![]),!_0x2c6ed2[_0x31ac68(0x225)]&&(_0x2c6ed2={..._0x2c6ed2,'fiat':_0x31ac68(0x16e)},_0x1d4333=!![]),!_0x2c6ed2[_0x31ac68(0x258)]&&(_0x2c6ed2={..._0x2c6ed2,'onepagemode':settings['onepagemode']},_0x1d4333=!![]),!_0x2c6ed2[_0x31ac68(0x23f)]&&(_0x2c6ed2={..._0x2c6ed2,'colorscheme':_0x31ac68(0x1f2)},_0x1d4333=!![]),!_0x2c6ed2['autoliquidity']&&(_0x2c6ed2={..._0x2c6ed2,'autoliquidity':!![]},_0x1d4333=!![]),_0x1d4333&&(_0x2c6ed2={'botID':_0x2c6ed2[_0x31ac68(0x26d)],'exchange':_0x2c6ed2[_0x31ac68(0x115)],'apiKey':_0x2c6ed2[_0x31ac68(0x1c8)],'apiSecret':_0x2c6ed2['apiSecret'],'apiPassword':_0x2c6ed2['apiPassword'],'basecoin':_0x2c6ed2[_0x31ac68(0x194)],'botname':_0x2c6ed2['botname'],'showname':_0x2c6ed2['showname'],'threshold':_0x2c6ed2['threshold'],'ordertype':_0x2c6ed2['ordertype'],'timeout':_0x2c6ed2[_0x31ac68(0x157)],'fiat':_0x2c6ed2['fiat'],'startdate':_0x2c6ed2['startdate'],'recreate':_0x2c6ed2[_0x31ac68(0x12e)],'timeshift':_0x2c6ed2[_0x31ac68(0x192)],'onepagemode':_0x2c6ed2['onepagemode'],'headless':_0x2c6ed2[_0x31ac68(0xfd)],'cooldown':_0x2c6ed2[_0x31ac68(0x201)],'change24h':_0x2c6ed2[_0x31ac68(0x1a8)],'emojibuy':_0x2c6ed2[_0x31ac68(0x136)],'emojisell':_0x2c6ed2[_0x31ac68(0x272)],'colorscheme':_0x2c6ed2[_0x31ac68(0x23f)],'portfolio':_0x2c6ed2[_0x31ac68(0x25c)],'autoliquidity':_0x2c6ed2[_0x31ac68(0x163)],'liquidity':_0x2c6ed2['liquidity'],'openOrders':_0x2c6ed2[_0x31ac68(0x148)]},dbConfig[_0x31ac68(0x103)](_0x31ac68(0x266))[_0x31ac68(0x150)]()['write'](),dbConfig['get']('bot')['push'](_0x2c6ed2)[_0x31ac68(0x1f1)]());}else _0x2c6ed2={'botID':_0x333672,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x31ac68(0x1c0)+_0x333672,'showname':![],'threshold':0x3,'ordertype':_0x31ac68(0x23d),'timeout':0x14,'fiat':_0x31ac68(0x16e),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x31ac68(0x192)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x31ac68(0x1f2),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2c6ed2;}function emittedConfiguration(){const _0x2b7e83=_0x2733a5;let _0x8016b1;if(config[_0x2b7e83(0x1c8)]=='')_0x8016b1={...config,'configstate':_0x2b7e83(0x1e2)};else config[_0x2b7e83(0x1c8)]=='***'?_0x8016b1={...config,'configstate':'recovery'}:(_0x8016b1={...config,'apiKey':_0x2b7e83(0x168),'apiSecret':_0x2b7e83(0x168)},config[_0x2b7e83(0x106)]&&(_0x8016b1[_0x2b7e83(0x106)]=_0x2b7e83(0x168)));return _0x8016b1;}function getSettings(){const _0x4b5378=_0x2733a5;return dbSettings[_0x4b5378(0x103)]('settings')[_0x4b5378(0x213)]();}function getSecure(){const _0xc0d032=_0x2733a5;return dbSecure[_0xc0d032(0x103)](_0xc0d032(0x1d1))[_0xc0d032(0x213)]()||{};}function updateTimeshift(_0x3d37f6){const _0x15d4d4=_0x2733a5;let _0x189c32=dbConfig['get'](_0x15d4d4(0x266))[_0x15d4d4(0x123)]({'botID':botID})[_0x15d4d4(0x213)]();_0x189c32&&dbConfig[_0x15d4d4(0x103)](_0x15d4d4(0x266))[_0x15d4d4(0x123)]({'botID':botID})['assign']({'timeshift':_0x3d37f6})['write'](),config[_0x15d4d4(0x192)]=_0x3d37f6,proxyEmit(_0x15d4d4(0x1e7),emittedConfiguration());}function updateOnepagemode(_0x232982){const _0x4059a0=_0x2733a5;let _0x107c91=dbConfig['get']('bot')[_0x4059a0(0x123)]({'botID':botID})[_0x4059a0(0x213)]();_0x107c91&&dbConfig[_0x4059a0(0x103)]('bot')[_0x4059a0(0x123)]({'botID':botID})[_0x4059a0(0x12a)]({'onepagemode':_0x232982})[_0x4059a0(0x1f1)](),config['onepagemode']=_0x232982,proxyEmit(_0x4059a0(0x1e7),emittedConfiguration());}async function storeConfiguration(_0x4efa02){const _0x23e65a=_0x2733a5;logger['debug']('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x23e65a(0x13f)](_0x23e65a(0x26a));let _0x5d7604=[],_0xe152c8=![],_0x4d07c6=![],_0x1c626b=[];_0x4efa02[_0x23e65a(0x25c)][_0x23e65a(0x158)](_0x2ce303=>{const _0x13e47f=_0x23e65a;if(!_0x2ce303['excluded']&&_0x2ce303[_0x13e47f(0xf9)]!=_0x4efa02[_0x13e47f(0x194)])_0x1c626b[_0x13e47f(0x1b3)](_0x2ce303['symbol']);}),_0x1c626b[_0x23e65a(0x158)](_0x34de8d=>{const _0x327ba7=_0x23e65a,_0x1ad931=watchedSymbols[_0x327ba7(0x195)](_0x34de8d);!_0x1ad931&&_0x5d7604[_0x327ba7(0x1b3)](_0x34de8d);}),_0x1c626b[_0x23e65a(0x158)](_0x47fe86=>{const _0x153325=_0x23e65a,_0x2781c0=currentCoins[_0x153325(0x123)](_0x54ab35=>_0x54ab35[_0x153325(0x10b)]==_0x47fe86);!_0x2781c0&&(_0xe152c8=!![]);}),currentCoins[_0x23e65a(0x158)](_0x2b167b=>{const _0x205d43=_0x23e65a;if(_0x2b167b[_0x205d43(0xf9)]!=config['basecoin']){const _0x6c485d=_0x1c626b[_0x205d43(0x123)](_0xef6a58=>_0xef6a58==_0x2b167b['symbol']);!_0x6c485d&&(_0xe152c8=!![]);}}),_0x4efa02[_0x23e65a(0x25c)][_0x23e65a(0x158)](_0x279f62=>{const _0x57ee08=_0x23e65a,_0x39565d=config[_0x57ee08(0x25c)]['find'](_0xef1087=>_0xef1087[_0x57ee08(0xf9)]==_0x279f62[_0x57ee08(0xf9)]);if(_0x39565d&&_0x279f62['offset']!=_0x39565d[_0x57ee08(0x1c1)])_0x4d07c6=!![];});let _0x493186=dbConfig[_0x23e65a(0x103)]('bot')['find']({'botID':botID})[_0x23e65a(0x213)]();_0x4efa02={..._0x4efa02,'apiKey':crypt['decrypt'](secure[_0x23e65a(0x105)],_0x4efa02['apiKey'])[_0x23e65a(0x236)],'apiSecret':crypt[_0x23e65a(0x1c9)](secure[_0x23e65a(0x105)],_0x4efa02[_0x23e65a(0x19e)])['message']};_0x4efa02[_0x23e65a(0x106)]&&(_0x4efa02[_0x23e65a(0x106)]=crypt[_0x23e65a(0x1c9)](secure[_0x23e65a(0x105)],_0x4efa02['apiPassword'])[_0x23e65a(0x236)]);let _0x4c2ecc=![];if(_0x493186){_0x4efa02['apiKey']==_0x23e65a(0x168)?_0x4efa02[_0x23e65a(0x1c8)]=config['apiKey']:_0x4c2ecc=!![];_0x4efa02[_0x23e65a(0x19e)]==_0x23e65a(0x168)?_0x4efa02[_0x23e65a(0x19e)]=config[_0x23e65a(0x19e)]:_0x4c2ecc=!![];if(_0x4efa02['apiPassword']==_0x23e65a(0x168))_0x4efa02[_0x23e65a(0x106)]=config['apiPassword'];else{if(_0x4efa02[_0x23e65a(0x106)])_0x4c2ecc=!![];}dbConfig[_0x23e65a(0x103)]('bot')[_0x23e65a(0x123)]({'botID':botID})['assign'](_0x4efa02)['write']();}else dbConfig[_0x23e65a(0x103)](_0x23e65a(0x266))['push'](_0x4efa02)['write'](),_0x4c2ecc=!![],process[_0x23e65a(0x276)]({'status':_0x23e65a(0x124),'live':_0x23e65a(0x131)},_0x438905=>{});process[_0x23e65a(0x276)]({'botname':_0x4efa02[_0x23e65a(0x13d)]},_0x23d447=>{}),updateBotManager(),config={..._0x4efa02},proxyEmit(_0x23e65a(0x1ab)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4c2ecc)await reset(_0x5d7604,!![]);else _0xe152c8||_0x4d07c6?await reset(_0x5d7604,![]):getBalances();blockTransactionDetection=![],logger[_0x23e65a(0x13f)](_0x23e65a(0x205));}async function storeHeadless(_0x12aa22){const _0x4ef808=_0x2733a5,_0x19a6e5={...config,'headless':_0x12aa22[_0x4ef808(0xfd)]};let _0x37631d=dbConfig[_0x4ef808(0x103)](_0x4ef808(0x266))[_0x4ef808(0x123)]({'botID':botID})[_0x4ef808(0x213)]();_0x37631d&&dbConfig[_0x4ef808(0x103)](_0x4ef808(0x266))[_0x4ef808(0x123)]({'botID':botID})[_0x4ef808(0x12a)](_0x19a6e5)[_0x4ef808(0x1f1)](),config={..._0x19a6e5},updateBotManager(),proxyEmit(_0x4ef808(0x1e7),emittedConfiguration());}async function storeFiat(_0x36971f){const _0x4189bc=_0x2733a5,_0x110493={...config,'fiat':_0x36971f};let _0x2d041e=dbConfig[_0x4189bc(0x103)](_0x4189bc(0x266))['find']({'botID':botID})[_0x4189bc(0x213)]();_0x2d041e&&dbConfig['get']('bot')[_0x4189bc(0x123)]({'botID':botID})[_0x4189bc(0x12a)](_0x110493)[_0x4189bc(0x1f1)](),config={..._0x110493},proxyEmit(_0x4189bc(0x1e7),emittedConfiguration());}function resetHistory(){const _0x2ff5ec=_0x2733a5;logger['full']('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x2ff5ec(0x18c)](configpath,'bot-'+botID+_0x2ff5ec(0x271))))fs['unlinkSync'](path[_0x2ff5ec(0x18c)](configpath,_0x2ff5ec(0x107)+botID+_0x2ff5ec(0x271)));if(fs[_0x2ff5ec(0x217)](path['join'](configpath,_0x2ff5ec(0x107)+botID+_0x2ff5ec(0x25b))))fs[_0x2ff5ec(0x254)](path[_0x2ff5ec(0x18c)](configpath,_0x2ff5ec(0x107)+botID+_0x2ff5ec(0x25b)));if(fs[_0x2ff5ec(0x217)](path['join'](configpath,_0x2ff5ec(0x107)+botID+'-results.json')))fs[_0x2ff5ec(0x254)](path[_0x2ff5ec(0x18c)](configpath,_0x2ff5ec(0x107)+botID+_0x2ff5ec(0x1a1)));}catch(_0x4d6f77){if(_0x4d6f77)logger['full'](_0x2ff5ec(0x24f),_0x4d6f77);}const _0x4cf5d9=getDate();let _0x173c8a=[];currentCoins[_0x2ff5ec(0x158)](_0x2320d7=>{const _0x1cd38d=_0x2ff5ec;_0x173c8a['push']({'coin':_0x2320d7[_0x1cd38d(0xf9)],'number':_0x2320d7[_0x1cd38d(0x202)],'price':_0x2320d7[_0x1cd38d(0x27a)]});});let _0x3a368a=dbConfig[_0x2ff5ec(0x103)](_0x2ff5ec(0x266))[_0x2ff5ec(0x123)]({'botID':botID})[_0x2ff5ec(0x213)]();_0x3a368a&&(dbConfig['get'](_0x2ff5ec(0x266))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x4cf5d9,'changes':_0x173c8a}]})['write'](),config['liquidity']=[]),process[_0x2ff5ec(0x276)]({'stop':_0x2ff5ec(0x1dd)},_0x2e80c1=>{});}function noslash(_0x1eaefb){const _0x1c6558=_0x2733a5;return _0x1eaefb[_0x1c6558(0x18e)]('/','');}function updateHighestFee(_0x1607c4,_0x24e4b4){const _0x229091=_0x2733a5;lastFees[_0x229091(0x1f9)]=_0x1607c4,lastFees[_0x229091(0x1aa)][_0x229091(0x1de)]===0x14&&lastFees[_0x229091(0x1aa)][_0x229091(0x1cc)](),lastFees[_0x229091(0x1aa)]['push'](_0x24e4b4),lastFees[_0x229091(0x257)]=Math[_0x229091(0x260)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x473114){const _0x435fb7=_0x2733a5;logger[_0x435fb7(0x13f)]('0\x20-\x20EXECUTION:\x20'+_0x473114[_0x435fb7(0x10b)]+_0x435fb7(0x1e9)+_0x473114['status']+_0x435fb7(0x1e9)+_0x473114['id']);let _0x5d1526=_0x473114[_0x435fb7(0x143)],_0x3f9f40=![];currentCoins[_0x435fb7(0x158)](_0x3098fd=>{const _0x7ab63f=_0x435fb7;_0x3098fd[_0x7ab63f(0x10b)]==_0x473114[_0x7ab63f(0x10b)]&&(_0x3f9f40=!![]);});if(!_0x3f9f40)return;const _0x17ad46=currentCoins[_0x435fb7(0x123)](_0x3a2a04=>_0x3a2a04[_0x435fb7(0x10b)]==_0x473114[_0x435fb7(0x10b)]),_0x2a5fe8=_0x25874d=>{if(_0x17ad46)_0x17ad46['orderstatus']=_0x25874d;};if(_0x5d1526==_0x435fb7(0x14c))_0x2a5fe8(_0x435fb7(0x14c));else{if(_0x5d1526==_0x435fb7(0x1b7)){_0x2a5fe8(_0x435fb7(0x1b7));const _0x86a405=await getCoins();[currentCoins,currentCoinsAll]=_0x86a405,await getOpenOrders(),handleOpenOrders();}else{if(_0x5d1526==_0x435fb7(0x263)){logger[_0x435fb7(0x13f)](_0x435fb7(0x24e)+_0x473114[_0x435fb7(0x10b)]+_0x435fb7(0x1e9)+_0x473114[_0x435fb7(0x255)]+_0x435fb7(0x1e9)+_0x473114['id']);let _0xc72b5f=![];if(lastOrders)for(const _0x475fec of lastOrders){const _0x3e14d9=0xc8,_0x4703d5=0x1388;let _0x302be1=0x0;while(!_0x475fec[_0x435fb7(0x1c7)]&&_0x302be1*_0x3e14d9<_0x4703d5){_0x302be1++,await sleep(_0x3e14d9);}if(_0x302be1>0x0)logger['debug']('Waited\x20'+_0x302be1*_0x3e14d9/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x475fec[_0x435fb7(0x1c7)]==_0x473114['id']){logger[_0x435fb7(0x13f)](_0x435fb7(0x116)+_0x473114['id']),_0xc72b5f=!![];if(_0x475fec['filled']==0x0){logger[_0x435fb7(0x13f)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x473114['id']);if(_0x473114[_0x435fb7(0x1b2)])_0x475fec[_0x435fb7(0x197)]=_0x473114[_0x435fb7(0x1b2)];else{if(_0x473114[_0x435fb7(0x197)])_0x475fec['price']=_0x473114[_0x435fb7(0x197)];else{}}_0x475fec[_0x435fb7(0x255)]=_0x473114['filled'],_0x475fec[_0x435fb7(0x25e)]={'currency':_0x473114[_0x435fb7(0x25e)]?_0x473114[_0x435fb7(0x25e)][_0x435fb7(0x1f9)]:null,'cost':_0x473114[_0x435fb7(0x25e)]?_0x473114[_0x435fb7(0x25e)][_0x435fb7(0x251)]:0x0},updateHighestFee(_0x475fec[_0x435fb7(0x25e)][_0x435fb7(0x1f9)],_0x475fec[_0x435fb7(0x25e)][_0x435fb7(0x251)]),_0x2a5fe8('filled'),await validateOrders();if(lockOrders==ORDERS[_0x435fb7(0x161)]){const _0x13a801=await getCoins();[currentCoins,currentCoinsAll]=_0x13a801;}await updateCoinResults(_0x475fec);}}}if(!_0xc72b5f){logger['debug']('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x473114['id']),_0x2a5fe8(_0x435fb7(0x255));const _0x327a88=await getCoins();[currentCoins,currentCoinsAll]=_0x327a88,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x287c08=JSON[_0x435fb7(0x178)](lastBalances[_0x435fb7(0x25c)]);const _0x55a846=_0x287c08['find'](_0x4b70bf=>_0x4b70bf[_0x435fb7(0x10b)]==_0x473114[_0x435fb7(0x10b)]);if(_0x55a846){if(_0x5d1526==_0x435fb7(0x14c))_0x55a846[_0x435fb7(0x129)]=_0x55a846[_0x435fb7(0x129)]=='filled'?'filled':_0x435fb7(0x14c);else{if(_0x5d1526==_0x435fb7(0x1b7))_0x55a846['orderstatus']=_0x55a846['orderstatus']=='filled'?_0x435fb7(0x255):_0x435fb7(0x1b7);else _0x5d1526==_0x435fb7(0x263)&&(_0x55a846[_0x435fb7(0x129)]=_0x435fb7(0x255));}}lastBalances={...lastBalances,'portfolio':JSON[_0x435fb7(0xf5)](_0x287c08)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4fdc5d=_0x2733a5;await getOpenOrders();let _0x1cb4a5=![];currentCoins[_0x4fdc5d(0x158)](_0x3477b3=>{const _0x43a4ff=_0x4fdc5d;_0x1cb4a5=allOpenOrders[_0x43a4ff(0x123)](_0x33ada4=>_0x33ada4['symbol']==_0x3477b3[_0x43a4ff(0x10b)]),_0x3477b3[_0x43a4ff(0x129)]=_0x1cb4a5?_0x43a4ff(0x14c):_0x43a4ff(0x1be);});}async function getCoins(_0xd61321=!![],_0x5771d0=config[_0x2733a5(0x194)]){const _0x1eded9=_0x2733a5;let _0x56924f,_0x3527ab=[],_0xa2780e=[],_0x5c6f78=[],_0x407672=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x56924f=await exchange[_0x1eded9(0x179)](),mybalances=_0x56924f[_0x1eded9(0x20d)];for(const [_0xa54766,_0x3e6481]of Object[_0x1eded9(0x16f)](mybalances)){_0x407672[_0x1eded9(0x1b3)](_0xa54766);}if(_0x5771d0=='')for(const [_0x400f87,_0x34374c]of Object[_0x1eded9(0x16f)](mybalances)){_0x34374c!=0x0&&_0xa2780e[_0x1eded9(0x1b3)]({'coin':_0x400f87});}else{let _0x44fb9e=![];for(const [_0x5e058,_0x1964ba]of Object[_0x1eded9(0x16f)](mybalances)){if(_0x407672['includes'](_0x5e058)){const _0x2b7fe3=config[_0x1eded9(0x25c)][_0x1eded9(0x123)](_0x1c9aee=>_0x1c9aee['coin']==_0x5e058),_0x2002f2=_0x5e058+'/'+_0x5771d0,_0x1c381e=_0x5771d0+'/'+_0x5e058,_0x53fe08=currentCoins[_0x1eded9(0x123)](_0x4c2303=>_0x4c2303[_0x1eded9(0xf9)]==_0x5e058);_0x44fb9e=![];if((_0x1964ba!=0x0||_0x2b7fe3)&&(allSymbols[_0x1eded9(0x195)](_0x2002f2)||_0x5e058==_0x5771d0))_0x5e058!=_0x5771d0&&_0x3527ab[_0x1eded9(0x1b3)](_0x2002f2),_0xa2780e[_0x1eded9(0x1b3)]({'coin':_0x5e058,'symbol':_0x2002f2,'reverse':![],'number':Math[_0x1eded9(0x260)](_0x1964ba+(_0x2b7fe3&&_0x2b7fe3[_0x1eded9(0x1c1)]||0x0),0x0),'orderstatus':_0x53fe08?_0x53fe08[_0x1eded9(0x129)]:_0x1eded9(0x1be)});else(_0x1964ba!=0x0||_0x2b7fe3)&&allSymbols['includes'](_0x1c381e)&&(_0x5e058!=_0x5771d0&&_0x3527ab[_0x1eded9(0x1b3)](_0x1c381e),_0xa2780e[_0x1eded9(0x1b3)]({'coin':_0x5e058,'symbol':_0x1c381e,'reverse':!![],'number':Math[_0x1eded9(0x260)](_0x1964ba+(_0x2b7fe3&&_0x2b7fe3[_0x1eded9(0x1c1)]||0x0),0x0),'orderstatus':_0x53fe08?_0x53fe08[_0x1eded9(0x129)]:_0x1eded9(0x1be)}));}}}}catch(_0xb7e860){if(!_0xd61321)handleErrorNoStop(_0xb7e860,_0x1eded9(0x26b));else await handleError(_0xb7e860,'getCoins()');}return _0x5c6f78=cloneDeep(_0xa2780e),_0xa2780e=_0xa2780e[_0x1eded9(0x17d)](_0x50acc=>{const _0x4adc55=_0x1eded9,_0x30f0b0=config[_0x4adc55(0x25c)][_0x4adc55(0x123)](_0xdbfd88=>_0xdbfd88[_0x4adc55(0xf9)]==_0x50acc['coin']);return _0x30f0b0&&!_0x30f0b0[_0x4adc55(0x274)];}),[_0xa2780e,_0x5c6f78];}async function getCoinNumber(_0x4521ca){const _0x1af353=_0x2733a5;let _0x347d71;try{const _0x44ad8f=await exchange['fetchBalance']();_0x347d71=_0x44ad8f[_0x1af353(0x20d)][_0x4521ca];}catch(_0x371f5c){await handleError(_0x371f5c,_0x1af353(0x184));}return _0x347d71;}async function getOpenOrders(){const _0x3f60a9=_0x2733a5;let _0x4a1584;allOpenOrders=[];try{for(const _0x4751cd of config['portfolio']){!_0x4751cd[_0x3f60a9(0x274)]&&_0x4751cd['coin']!=config[_0x3f60a9(0x194)]&&(_0x4a1584=await exchange[_0x3f60a9(0x231)](_0x4751cd['symbol']),_0x4a1584[_0x3f60a9(0x1de)]>0x0&&allOpenOrders[_0x3f60a9(0x1b3)](_0x4a1584[0x0]));}}catch(_0x4f5cb4){await handleError(_0x4f5cb4,_0x3f60a9(0x19d));}}async function handleOpenOrders(_0x1c467d=0x0){const _0x437828=_0x2733a5;allOpenOrders[_0x437828(0x1de)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x1c467d==0x0?(logger[_0x437828(0x13f)](_0x437828(0x198)),_0x1c467d++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x437828(0x13f)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x437828(0x1d4))));}async function testAPI(_0x2fefa0){const _0x1f4900=_0x2733a5,_0x30eef9=ccxt[_0x2fefa0[_0x1f4900(0x115)][_0x1f4900(0x1db)]()],_0x28ec9f=new _0x30eef9({'apiKey':_0x2fefa0[_0x1f4900(0x1c8)],'secret':_0x2fefa0[_0x1f4900(0x19e)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x1f4900(0x16d)}});if(_0x2fefa0['apiPassword'])_0x28ec9f[_0x1f4900(0xf7)]=_0x2fefa0['apiPassword'];try{await _0x28ec9f[_0x1f4900(0x11d)]();}catch(_0x23038){throw _0x23038;}}function cloneDeep(_0x1df2d4){const _0xa23db7=_0x2733a5;return JSON[_0xa23db7(0x178)](JSON['stringify'](_0x1df2d4));}async function getPortfolio(_0x5038ee){const _0x161600=_0x2733a5;let _0x3e003e=[],_0x308a01=[],_0x33b97b=[],_0x2b8dc5;if(_0x5038ee[_0x161600(0x1c8)]!==_0x161600(0x168)||_0x5038ee[_0x161600(0x19e)]!==_0x161600(0x168)||_0x5038ee[_0x161600(0x106)]&&_0x5038ee[_0x161600(0x106)]!==_0x161600(0x168)){if(config[_0x161600(0x115)]){if(_0x5038ee['apiKey']==_0x161600(0x168))_0x5038ee[_0x161600(0x1c8)]=config[_0x161600(0x1c8)];if(_0x5038ee['apiSecret']==_0x161600(0x168))_0x5038ee[_0x161600(0x19e)]=config[_0x161600(0x19e)];if(_0x5038ee['apiPassword']==_0x161600(0x168))_0x5038ee['apiPassword']=config['apiPassword'];try{await testAPI(_0x5038ee);}catch(_0x3fab5f){if(_0x3fab5f[_0x161600(0x125)]()[_0x161600(0x195)](_0x161600(0x16b))){logger[_0x161600(0x13f)](_0x161600(0x16c)),proxyEmit(_0x161600(0x25c),![]);return;}else{handleError(_0x3fab5f,'getPortfolio(0)');return;}}}await initExchange(_0x5038ee[_0x161600(0x115)],_0x5038ee[_0x161600(0x1c8)],_0x5038ee[_0x161600(0x19e)],_0x5038ee['apiPassword']);try{await loadSymbols(_0x5038ee['exchange'],!![]);}catch(_0xc48c64){if(_0xc48c64[_0x161600(0x125)]()[_0x161600(0x195)](_0x161600(0x16b))){proxyEmit('portfolio',![]);return;}else{handleError(_0xc48c64,_0x161600(0x10f));return;}}const _0x493784=await getCoins(![],_0x5038ee[_0x161600(0x194)]);_0x33b97b=cloneDeep(_0x493784[0x1]);}else _0x33b97b=cloneDeep(currentCoinsAll);if(_0x5038ee['basecoin']=='')proxyEmit(_0x161600(0x25c),_0x33b97b);else{_0x33b97b[_0x161600(0x158)](_0x48d231=>{const _0x36c238=_0x161600;if(_0x48d231[_0x36c238(0xf9)]!=_0x5038ee[_0x36c238(0x194)])_0x3e003e[_0x36c238(0x1b3)](_0x48d231[_0x36c238(0x10b)]);});try{_0x308a01=await exchange['fetchTickers'](_0x3e003e);}catch(_0x2f3419){if(_0x2f3419[_0x161600(0x125)]()[_0x161600(0x195)](_0x161600(0x16b))){proxyEmit(_0x161600(0x25c),![]);return;}else{handleError(_0x2f3419,_0x161600(0x15e));return;}}_0x33b97b[_0x161600(0x158)](_0x1ca1b7=>{const _0x3d28e9=_0x161600;_0x1ca1b7[_0x3d28e9(0xf9)]!=_0x5038ee[_0x3d28e9(0x194)]?_0x2b8dc5=_0x1ca1b7[_0x3d28e9(0x24b)]?0x1/_0x308a01[_0x1ca1b7[_0x3d28e9(0x10b)]][_0x3d28e9(0x27a)]:_0x308a01[_0x1ca1b7[_0x3d28e9(0x10b)]][_0x3d28e9(0x27a)]:_0x2b8dc5=0x1,_0x1ca1b7[_0x3d28e9(0x197)]=formatResult(_0x2b8dc5,0x8);}),proxyEmit('portfolio',_0x33b97b);}}function truncateTradeAmount(_0x4fa3f4,_0x9e637a){let _0x4d754d=0x0;try{_0x4d754d=exchange['amountToPrecision'](_0x4fa3f4,_0x9e637a);}catch(_0x1ffba1){}return _0x4d754d;}function checkMinimums(_0x25f841){const _0x5edfd4=_0x2733a5;let _0x560c30=!![];const _0x51bea7=!_0x25f841['reverse']?markets[_0x25f841['symbol']][_0x5edfd4(0x177)][_0x5edfd4(0x222)][_0x5edfd4(0x151)]:markets[_0x25f841['symbol']][_0x5edfd4(0x177)][_0x5edfd4(0x251)][_0x5edfd4(0x151)],_0x264e2c=!_0x25f841[_0x5edfd4(0x24b)]?markets[_0x25f841[_0x5edfd4(0x10b)]]['limits'][_0x5edfd4(0x251)][_0x5edfd4(0x151)]:markets[_0x25f841[_0x5edfd4(0x10b)]][_0x5edfd4(0x177)][_0x5edfd4(0x222)][_0x5edfd4(0x151)],_0x5afd5a=truncateTradeAmount(_0x25f841[_0x5edfd4(0x10b)],_0x25f841[_0x5edfd4(0x267)]);_0x25f841['trade']=_0x5afd5a;if(Math[_0x5edfd4(0x1cd)](_0x5afd5a)<_0x51bea7)_0x560c30=![];if(Math['abs'](_0x5afd5a)*_0x25f841['last']<_0x264e2c)_0x560c30=![];if(_0x25f841[_0x5edfd4(0x12d)]==_0x5edfd4(0x1ec)){let _0x2a2f23=config['portfolio']['find'](_0x271477=>_0x271477[_0x5edfd4(0xf9)]==_0x25f841[_0x5edfd4(0xf9)]);if(_0x2a2f23[_0x5edfd4(0x1c1)]>0x0){if(Math[_0x5edfd4(0x1cd)](_0x5afd5a)>_0x25f841[_0x5edfd4(0x202)]-_0x2a2f23['offset'])_0x560c30=![];}else{if(Math[_0x5edfd4(0x1cd)](_0x5afd5a)>_0x25f841['number'])_0x560c30=![];}}if(_0x25f841[_0x5edfd4(0x12d)]==_0x5edfd4(0x232)){let _0xc98066=config[_0x5edfd4(0x25c)][_0x5edfd4(0x123)](_0x1c99bf=>_0x1c99bf[_0x5edfd4(0xf9)]==config[_0x5edfd4(0x194)]),_0x24ad47=currentCoins[_0x5edfd4(0x123)](_0x4823b8=>_0x4823b8[_0x5edfd4(0xf9)]==config[_0x5edfd4(0x194)]);if(_0xc98066[_0x5edfd4(0x1c1)]>0x0){if(Math[_0x5edfd4(0x1cd)](_0x5afd5a)*_0x25f841[_0x5edfd4(0x27a)]>_0x24ad47[_0x5edfd4(0x202)]-_0xc98066[_0x5edfd4(0x1c1)])_0x560c30=![];}else{if(Math[_0x5edfd4(0x1cd)](_0x5afd5a)*_0x25f841['last']>_0x24ad47[_0x5edfd4(0x202)])_0x560c30=![];}}return _0x560c30;}async function getBalances(_0x3ceed8=!![]){const _0x4cbb10=_0x2733a5;let _0x4e2e5f=0x0,_0x3acf4b;const _0x3852cd=config[_0x4cbb10(0x110)];if(config[_0x4cbb10(0xfd)]&&config[_0x4cbb10(0x1a8)]<0x0)await validate24hChanges();currentCoins[_0x4cbb10(0x158)](_0x5e169b=>{const _0x17e56d=_0x4cbb10;if(_0x5e169b[_0x17e56d(0xf9)]!=config[_0x17e56d(0x194)]){let _0x36a1ec=global[_0x17e56d(0x1fa)][noslash(_0x5e169b[_0x17e56d(0x10b)])];_0x3acf4b=_0x5e169b['reverse']?0x1/_0x36a1ec:_0x36a1ec;}else _0x3acf4b=0x1;let _0x901bdf=_0x5e169b['number']*_0x3acf4b;_0x4e2e5f+=_0x901bdf,_0x5e169b['last']=formatResult(Number(_0x3acf4b),0x8),_0x5e169b[_0x17e56d(0x213)]=_0x901bdf;}),currentCoins['forEach'](_0x7eb105=>{const _0x415283=_0x4cbb10;let _0xb71566=config[_0x415283(0x25c)][_0x415283(0x123)](_0xd8ed2b=>_0xd8ed2b[_0x415283(0xf9)]==_0x7eb105['coin']),_0x5df242=Number(_0xb71566[_0x415283(0x1f8)]),_0x2236b8=_0x7eb105[_0x415283(0x213)]/_0x4e2e5f*0x64,_0x552650=_0x5df242*_0x4e2e5f/0x64/_0x7eb105[_0x415283(0x27a)]-_0x7eb105[_0x415283(0x202)];_0x7eb105[_0x415283(0x1f8)]=formatResult(_0x2236b8,0x3),_0x7eb105[_0x415283(0x24c)]=formatResult(_0x5df242,0x3),_0x7eb105['trade']=formatResult(_0x552650,0x8),_0x7eb105['side']='',_0x7eb105[_0x415283(0x154)]=![];if(_0x7eb105[_0x415283(0xf9)]!=config[_0x415283(0x194)]){if(_0x7eb105[_0x415283(0x1f8)]>_0x5df242)_0x7eb105[_0x415283(0x12d)]=_0x415283(0x1ec),_0x7eb105['valid']=checkMinimums(_0x7eb105);else _0x7eb105['distribution']<_0x5df242&&(_0x7eb105[_0x415283(0x12d)]='buy',_0x7eb105[_0x415283(0x154)]=checkMinimums(_0x7eb105));}_0x7eb105['delta']=_0x7eb105[_0x415283(0x1f8)]/_0x7eb105['target']-0x1;if(_0x7eb105[_0x415283(0x129)]=='filled'||_0x7eb105[_0x415283(0x129)]==_0x415283(0x1b7))_0x7eb105[_0x415283(0x129)]=_0x415283(0x1be);}),currentCoins['sort']((_0x468f40,_0x5a4665)=>_0x468f40[_0x4cbb10(0x220)]<_0x5a4665['delta']?0x1:_0x5a4665[_0x4cbb10(0x220)]<_0x468f40['delta']?-0x1:0x0);const _0x4e8a57=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4e8a57[_0x4cbb10(0x142)],'usd':_0x4e8a57['usd'],'portfolio':JSON[_0x4cbb10(0xf5)](currentCoins),'threshold':_0x3852cd},proxyEmit(_0x4cbb10(0x252),{'serverversion':serverversion,'balances':lastBalances});if(_0x3ceed8){if(config[_0x4cbb10(0xfd)])headlessMode({'portfolio':currentCoins,'threshold':_0x3852cd});else{if(lockOrders==ORDERS[_0x4cbb10(0x11e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3852cd});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3af5a7=getNormalizedPerformance();getStartingBalances(_0x3af5a7),emitPerformance(_0x3af5a7);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2c7369=getNormalizedPerformance();emitPerformance(_0x2c7369),getStartingBalances(_0x2c7369),logger[_0x4cbb10(0x13f)](_0x4cbb10(0x1c3));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3af26b=_0x2733a5;if(!lastBalances)return;let _0x301130=[],_0x4d0d89,_0x1081a8=JSON[_0x3af26b(0x178)](lastBalances[_0x3af26b(0x25c)]);_0x1081a8[_0x3af26b(0x26c)]((_0x1e2025,_0xd538fe)=>_0x1e2025[_0x3af26b(0xf9)]>_0xd538fe['coin']?0x1:_0xd538fe['coin']>_0x1e2025['coin']?-0x1:0x0),_0x1081a8['forEach'](_0x31a7bd=>{const _0x4e9591=_0x3af26b;let _0x416894={'coin':_0x31a7bd[_0x4e9591(0xf9)],'number':_0x31a7bd['number'],'price':_0x31a7bd[_0x4e9591(0x27a)]};_0x301130[_0x4e9591(0x1b3)](_0x416894);});const _0x1f65b3=await getFiat();_0x4d0d89={'date':lastBalances[_0x3af26b(0x104)][_0x3af26b(0x20e)]('\x20')[0x0],'eur':_0x1f65b3[_0x3af26b(0x142)],'usd':_0x1f65b3[_0x3af26b(0x130)],'coins':_0x301130};let _0x46ce36=dbPerformance[_0x3af26b(0x103)](_0x3af26b(0x268))[_0x3af26b(0x123)]({'date':_0x4d0d89[_0x3af26b(0x190)]})[_0x3af26b(0x213)]();_0x46ce36?_0x4d0d89['date']!=config[_0x3af26b(0x1bc)]&&dbPerformance[_0x3af26b(0x103)](_0x3af26b(0x268))[_0x3af26b(0x123)]({'date':_0x4d0d89[_0x3af26b(0x190)]})['assign'](_0x4d0d89)[_0x3af26b(0x1f1)]():dbPerformance[_0x3af26b(0x103)](_0x3af26b(0x268))[_0x3af26b(0x1b3)](_0x4d0d89)[_0x3af26b(0x1f1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x18427b=_0x2733a5;let _0xc8e908=[];if(dbPerformance[_0x18427b(0x199)](_0x18427b(0x268))[_0x18427b(0x213)]()){let _0x425eba=dbPerformance[_0x18427b(0x103)](_0x18427b(0x268))[_0x18427b(0x1f6)]()[_0x18427b(0x17d)](_0x5046da=>{const _0x32915b=_0x18427b;if(_0x5046da[_0x32915b(0x137)][_0x32915b(0x1de)]==0x0)return![];else return!![];})[_0x18427b(0x187)](_0x18427b(0x190))[_0x18427b(0x213)](),_0x15efd3=[...config['liquidity']];_0x15efd3[_0x18427b(0x26c)]((_0x131c4e,_0xf60d26)=>_0x131c4e[_0x18427b(0x190)]>_0xf60d26[_0x18427b(0x190)]?-0x1:_0xf60d26[_0x18427b(0x190)]>_0x131c4e[_0x18427b(0x190)]?0x1:0x0);let _0x265a9d=0x1,_0x53e33a=[],_0x3b244e=0x0;_0x425eba['slice']()[_0x18427b(0x24b)]()[_0x18427b(0x158)]((_0x3877df,_0xb588e0)=>{const _0x4b9de5=_0x18427b;if(_0x15efd3[_0x3b244e]){if(_0x425eba[_0x425eba[_0x4b9de5(0x1de)]-_0xb588e0]&&_0x15efd3[_0x3b244e][_0x4b9de5(0x190)]==_0x425eba[_0x425eba[_0x4b9de5(0x1de)]-_0xb588e0][_0x4b9de5(0x190)]){if(_0xb588e0<_0x425eba[_0x4b9de5(0x1de)]){let _0x5081cd=0x0,_0x37261b=0x0;_0x425eba[_0x425eba[_0x4b9de5(0x1de)]-_0xb588e0]['coins'][_0x4b9de5(0x158)](_0x1226dd=>{_0x37261b+=_0x1226dd['number']*_0x1226dd['price'];}),_0x15efd3[_0x3b244e][_0x4b9de5(0x1ae)][_0x4b9de5(0x158)](_0x310e16=>{const _0x3721f3=_0x4b9de5;_0x5081cd+=_0x310e16[_0x3721f3(0x202)]*_0x310e16['price'];}),_0x265a9d*=_0x5081cd/(_0x37261b-_0x5081cd)+0x1;}_0x3b244e++;}}let _0xa2a1fb=0x0;_0x3877df[_0x4b9de5(0x137)][_0x4b9de5(0x158)](_0xf985d1=>{const _0x3f7a2d=_0x4b9de5;_0xa2a1fb+=_0xf985d1[_0x3f7a2d(0x202)]*_0xf985d1[_0x3f7a2d(0x197)];}),_0x53e33a[_0x425eba[_0x4b9de5(0x1de)]-_0xb588e0-0x1]=_0xa2a1fb*(_0x265a9d-0x1);});let _0x5a12d=[];_0x15efd3=[...config[_0x18427b(0x171)]]||[];let _0x49a922=0x0;_0x3b244e=0x0,_0x425eba[_0x18427b(0x158)]((_0x14fd66,_0x1dfb8b)=>{const _0x4d5f09=_0x18427b;if(_0x15efd3[_0x3b244e]){const _0x4a822b=fns[_0x4d5f09(0x178)](_0x15efd3[_0x3b244e][_0x4d5f09(0x190)],'yyyy/MM/dd',new Date()),_0x419264=fns[_0x4d5f09(0x178)](_0x14fd66[_0x4d5f09(0x190)],'yyyy/MM/dd',new Date());if(fns[_0x4d5f09(0x134)](_0x4a822b,_0x419264)){let _0x381251=0x0;_0x15efd3[_0x3b244e][_0x4d5f09(0x1ae)]['forEach'](_0x5ce194=>{const _0x2bcddc=_0x4d5f09;!_0x5a12d[_0x5ce194[_0x2bcddc(0xf9)]]?_0x5a12d[_0x5ce194[_0x2bcddc(0xf9)]]=_0x5ce194['number']:(_0x381251=_0x5a12d[_0x5ce194['coin']],_0x5a12d[_0x5ce194[_0x2bcddc(0xf9)]]+=_0x5ce194[_0x2bcddc(0x202)]);const _0x5e77d7=_0x14fd66[_0x2bcddc(0x137)][_0x2bcddc(0x123)](_0x77375a=>_0x77375a['coin']==_0x5ce194[_0x2bcddc(0xf9)]);(!_0x5e77d7||_0x5e77d7[_0x2bcddc(0x202)]==0x0)&&(_0x49a922+=(-_0x5ce194[_0x2bcddc(0x202)]-_0x381251)*_0x5ce194[_0x2bcddc(0x197)]);}),_0x3b244e++;}}_0x14fd66[_0x4d5f09(0x137)][_0x4d5f09(0x158)]((_0x4261a0,_0x22b35a)=>{const _0x14cf43=_0x4d5f09;_0x5a12d[_0x4261a0[_0x14cf43(0xf9)]]&&(_0x4261a0['initial']=_0x5a12d[_0x4261a0[_0x14cf43(0xf9)]]);}),_0xc8e908[_0x4d5f09(0x1b3)]({'date':_0x14fd66[_0x4d5f09(0x190)],'eur':_0x14fd66[_0x4d5f09(0x142)],'usd':_0x14fd66['usd'],'offset':_0x53e33a[_0x1dfb8b],'netoffset':_0x49a922,'coins':_0x14fd66['coins']});});}return _0xc8e908;}function emitPerformance(_0x512a24){const _0x3047fe=_0x2733a5;_0x512a24[_0x3047fe(0x1de)]!==0x0?(proxyEmit(_0x3047fe(0x270),_0x512a24),lastPerformanceEmitted=getDate()):proxyEmit(_0x3047fe(0x270),[]);}function getPerf(_0x378db0,_0x525f68){const _0x7ea832=_0x2733a5;let _0x4aafea=0x0,_0x2b2310=0x0,_0x14f051=0x0;_0x378db0[_0x7ea832(0x137)]['forEach'](_0x56649d=>{const _0xd9399c=_0x7ea832;_0x4aafea+=_0x56649d[_0xd9399c(0x202)]*_0x56649d[_0xd9399c(0x197)];});_0x525f68&&(_0x4aafea+=_0x378db0[_0x7ea832(0x1c1)]);if(config['basecoin']===_0x7ea832(0x10a)||config[_0x7ea832(0x194)]===_0x7ea832(0x1ea))_0x2b2310=_0x4aafea*_0x378db0[_0x7ea832(0x142)],_0x14f051=_0x4aafea*_0x378db0[_0x7ea832(0x130)];else{if(usdBasecoins[_0x7ea832(0x195)](config[_0x7ea832(0x194)]))_0x2b2310=_0x4aafea*_0x378db0[_0x7ea832(0x142)]/_0x378db0[_0x7ea832(0x130)],_0x14f051=_0x4aafea;else config[_0x7ea832(0x194)]===_0x7ea832(0x1a9)&&(_0x2b2310=_0x4aafea,_0x14f051=_0x4aafea*_0x378db0[_0x7ea832(0x130)]/_0x378db0[_0x7ea832(0x142)]);}return[_0x4aafea,_0x2b2310,_0x14f051];}function getKPIs(_0x5d9888,_0x6d5499=_0x2733a5(0x1a9)){const _0x4a2b23=_0x2733a5,_0x27684f=config[_0x4a2b23(0x194)],_0x40dba8=lastBalances,_0x1701b9=currentCoins,_0x531814=getNormalizedPerformance(),_0x4fa08e=_0x5d9888==='basecoin'?_0x27684f:_0x5d9888===_0x4a2b23(0x225)||_0x5d9888===_0x4a2b23(0x1b4)?_0x6d5499:'Net\x20'+_0x27684f,_0x7fcf77=_0x5d9888===_0x4a2b23(0x244)?_0x4a2b23(0x1da):_0x5d9888===_0x4a2b23(0x1b4)?_0x4a2b23(0x1da):_0x4fa08e+_0x4a2b23(0x159),_0x213904=_0x5d9888===_0x4a2b23(0x244)||_0x5d9888==='net-fiat'?_0x4a2b23(0x1da):_0x4fa08e+'\x20change';let _0x29e006=0x0;_0x1701b9[_0x4a2b23(0x158)](_0x46d0c9=>{const _0x1830ea=_0x4a2b23;_0x29e006+=_0x46d0c9[_0x1830ea(0x202)]*_0x46d0c9[_0x1830ea(0x27a)];});if(_0x5d9888===_0x4a2b23(0x225)||_0x5d9888===_0x4a2b23(0x1b4)){if(_0x27684f===_0x4a2b23(0x10a)||_0x27684f==='ETH')_0x29e006=_0x29e006*(_0x6d5499===_0x4a2b23(0x1a9)?_0x40dba8[_0x4a2b23(0x142)]:_0x40dba8[_0x4a2b23(0x130)]);else{if(usdBasecoins[_0x4a2b23(0x195)](_0x27684f))_0x29e006=_0x29e006*(_0x6d5499===_0x4a2b23(0x1a9)?_0x40dba8[_0x4a2b23(0x142)]/_0x40dba8[_0x4a2b23(0x130)]:0x1);else _0x27684f==='EUR'&&(_0x29e006=_0x29e006*(_0x6d5499===_0x4a2b23(0x1a9)?0x1:_0x40dba8[_0x4a2b23(0x130)]/_0x40dba8[_0x4a2b23(0x142)]));}}let _0xaf65a9;if(_0x29e006!==0x0){if(_0x5d9888===_0x4a2b23(0x194))_0xaf65a9=(_0x29e006/startingBalances['basecoin']-0x1)*0x64;else{if(_0x6d5499===_0x4a2b23(0x1a9))_0xaf65a9=(_0x29e006/startingBalances[_0x4a2b23(0x142)]-0x1)*0x64;else _0xaf65a9=(_0x29e006/startingBalances[_0x4a2b23(0x130)]-0x1)*0x64;}let _0x1b79ff=0x0;if(startingBalances[_0x4a2b23(0x137)])_0x1701b9[_0x4a2b23(0x158)](_0x3882a6=>{const _0x2d4901=_0x4a2b23;let _0x512de7=startingBalances[_0x2d4901(0x137)][_0x2d4901(0x123)](_0x3f819c=>_0x3f819c[_0x2d4901(0xf9)]===_0x3882a6[_0x2d4901(0xf9)]);if(_0x512de7&&_0x512de7[_0x2d4901(0xf9)]&&_0x3882a6[_0x2d4901(0x202)]!==0x0)_0x1b79ff+=_0x512de7['number']*_0x3882a6[_0x2d4901(0x27a)];});let _0x1299df=0x0;if(_0x531814[_0x4a2b23(0x1de)]!==0x0){let _0x24574b=_0x531814[_0x531814['length']-0x1];_0x1299df=_0x24574b[_0x4a2b23(0x170)];}_0x1b79ff-=_0x1299df;_0x5d9888===_0x4a2b23(0x244)&&(_0xaf65a9=(_0x29e006-_0x1b79ff)/startingBalances['basecoin']*0x64,_0x29e006=_0x29e006-_0x1b79ff);if(_0x5d9888===_0x4a2b23(0x1b4)){let _0x1a5820=_0x6d5499==='EUR'?startingBalances[_0x4a2b23(0x142)]:startingBalances[_0x4a2b23(0x130)];if(_0x27684f===_0x4a2b23(0x10a)||_0x27684f===_0x4a2b23(0x1ea))_0x1b79ff=_0x6d5499===_0x4a2b23(0x1a9)?_0x1b79ff*_0x40dba8[_0x4a2b23(0x142)]:_0x1b79ff*_0x40dba8[_0x4a2b23(0x130)];else{if(usdBasecoins[_0x4a2b23(0x195)](_0x27684f))_0x1b79ff=_0x6d5499===_0x4a2b23(0x1a9)?_0x1b79ff*_0x40dba8[_0x4a2b23(0x142)]/_0x40dba8[_0x4a2b23(0x130)]:_0x1b79ff;else _0x27684f===_0x4a2b23(0x1a9)&&(_0x1b79ff=_0x6d5499==='EUR'?_0x1b79ff:_0x1b79ff*_0x40dba8[_0x4a2b23(0x130)]/_0x40dba8[_0x4a2b23(0x142)]);}_0xaf65a9=(_0x29e006-_0x1b79ff)/_0x1a5820*0x64,_0x29e006=_0x29e006-_0x1b79ff;}if(_0xaf65a9){if(_0xaf65a9<0x64)_0xaf65a9=_0xaf65a9[_0x4a2b23(0x113)](0x2);else{if(_0xaf65a9<0x3e8)_0xaf65a9=_0xaf65a9['toFixed'](0x1);else _0xaf65a9=_0xaf65a9[_0x4a2b23(0x113)](0x0);}}else _0xaf65a9=Number('0')[_0x4a2b23(0x113)](0x2);if(_0x29e006){if(Math['abs'](_0x29e006)<0.000001)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x2);else{if(Math[_0x4a2b23(0x1cd)](_0x29e006)<0.1)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x6);else{if(Math[_0x4a2b23(0x1cd)](_0x29e006)<0x1)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x5);else{if(Math[_0x4a2b23(0x1cd)](_0x29e006)<0xa)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x4);else{if(Math[_0x4a2b23(0x1cd)](_0x29e006)<0x64)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x3);else{if(Math['abs'](_0x29e006)<0x3e8)_0x29e006=_0x29e006[_0x4a2b23(0x113)](0x2);else _0x29e006=_0x29e006[_0x4a2b23(0x113)](0x2);}}}}}}else _0x29e006=Number('0')['toFixed'](0x2);}else _0xaf65a9=Number('0')[_0x4a2b23(0x113)](0x2);return{'value':_0x29e006,'change':_0xaf65a9,'leftTxt':_0x7fcf77,'rightTxt':_0x213904};}async function getStartingBalances(_0x8e3117,_0xf1a95e=!![]){const _0x113186=_0x2733a5;if(_0x8e3117[_0x113186(0x1de)]!==0x0){const [_0x48bcca,_0x412ebb,_0xfe9bf5]=getPerf(_0x8e3117[0x0],!![]);let _0x10b355=[];config['portfolio'][_0x113186(0x158)](_0x118eae=>{const _0x140702=_0x113186;let _0x3484dc=0x0,_0x564fba;config[_0x140702(0x171)][_0x140702(0x158)](_0x55f8b6=>{const _0x479667=_0x140702;let _0x49435b=_0x55f8b6['changes']['find'](_0x3d7ba1=>_0x3d7ba1[_0x479667(0xf9)]==_0x118eae[_0x479667(0xf9)]);if(_0x49435b){_0x3484dc+=_0x49435b[_0x479667(0x202)];if(!_0x564fba)_0x564fba=_0x49435b[_0x479667(0x197)];}}),_0x10b355[_0x140702(0x1b3)]({'coin':_0x118eae[_0x140702(0xf9)],'number':_0x3484dc,'initialprice':_0x564fba});});const _0x55b917={'basecoin':_0x48bcca,'eur':_0x412ebb,'usd':_0xfe9bf5,'coins':_0x10b355};if(_0xf1a95e)proxyEmit(_0x113186(0x229),_0x55b917);startingBalances=_0x55b917;}}function headlessMode(_0x5550c0){const _0x1632d6=_0x2733a5;let _0x5e256b=_0x5550c0['portfolio'],_0x4a4fa0=_0x5550c0['threshold'],_0x6a6c14=[];for(let _0x4c054a of _0x5e256b){if(_0x4c054a[_0x1632d6(0xf9)]!=config[_0x1632d6(0x194)]){if(_0x4c054a['delta']>=_0x4a4fa0/0x64){if(_0x4c054a[_0x1632d6(0x154)])_0x6a6c14[_0x1632d6(0x1b3)](_0x4c054a);}else{if(_0x4c054a[_0x1632d6(0x220)]<=-_0x4a4fa0/0x64){if(_0x4c054a[_0x1632d6(0x154)])_0x6a6c14[_0x1632d6(0x1b3)](_0x4c054a);}}}}_0x6a6c14[_0x1632d6(0x1de)]>0x0&&placeOrder(_0x6a6c14);}function notifyBalance(_0xb848e0){const _0x59bce2=_0x2733a5;let _0x1e82d8=_0xb848e0[_0x59bce2(0x25c)],_0x2cf28b=_0xb848e0[_0x59bce2(0x110)],_0xbe734a=[];for(let _0x59dad6 of _0x1e82d8){if(_0x59dad6[_0x59bce2(0xf9)]!=config[_0x59bce2(0x194)]){if(_0x59dad6['delta']>=_0x2cf28b/0x64){if(_0x59dad6[_0x59bce2(0x154)])_0xbe734a[_0x59bce2(0x1b3)](_0x59dad6);}else{if(_0x59dad6['delta']<=-_0x2cf28b/0x64){if(_0x59dad6[_0x59bce2(0x154)])_0xbe734a[_0x59bce2(0x1b3)](_0x59dad6);}}}}if(_0xbe734a[_0x59bce2(0x1de)]>0x0){let _0x3298f5=_0xbe734a[_0x59bce2(0x144)](_0x1643eb=>_0x1643eb[_0x59bce2(0xf9)]);_0x3298f5[_0x59bce2(0x26c)]();let _0x5cdc39=_0x3298f5[_0x59bce2(0x18c)](',\x20');if(!lastCoinsToBalance)logHistory(_0x59bce2(0x18a),_0x59bce2(0x1b0));lastCoinsToBalance=_0x5cdc39;}}function symbolToCoin(_0x57f411){const _0x3e11de=_0x2733a5;let _0x1b134b;if(_0x57f411[_0x3e11de(0x195)]('/'+config[_0x3e11de(0x194)]))_0x1b134b=_0x57f411[_0x3e11de(0x18e)]('/'+config[_0x3e11de(0x194)],'');if(_0x57f411[_0x3e11de(0x195)](config[_0x3e11de(0x194)]+'/'))_0x1b134b=_0x57f411[_0x3e11de(0x18e)](config[_0x3e11de(0x194)]+'/','');return _0x1b134b;}async function unlockOrders(){const _0x2f1cf5=_0x2733a5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2f1cf5(0x161)]){logger[_0x2f1cf5(0x13f)](_0x2f1cf5(0x21b)),lockOrders=ORDERS[_0x2f1cf5(0x1a0)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5997da=await getCoins();[currentCoins,currentCoinsAll]=_0x5997da,validateOrdersState=_0x2f1cf5(0x1e2),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x2f1cf5(0x13f)](_0x2f1cf5(0x121));}}async function validateOrders(_0x7d9e6){const _0x4f3771=_0x2733a5;if(_0x7d9e6)validateOrdersState=_0x7d9e6;logger[_0x4f3771(0x13f)](_0x4f3771(0x1d6)+validateOrdersState+_0x4f3771(0x1df)+(lockOrders==0x1?_0x4f3771(0x12c):lockOrders==0x2?_0x4f3771(0x152):_0x4f3771(0x1b9)));let _0x109f28=[],_0x3fba90=config[_0x4f3771(0x227)]==_0x4f3771(0x23d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4f3771(0x157)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4f3771(0x161)])return;logger[_0x4f3771(0x13f)](_0x4f3771(0x186)+validateOrdersState),lastOrders['forEach'](_0xaa3fa7=>{const _0x3d9da6=_0x4f3771;let _0x13bb7b=![];_0xaa3fa7[_0x3d9da6(0x255)]>0x0&&(_0x13bb7b=!![]),_0x109f28['push'](_0x13bb7b),_0x13bb7b&&config['ordertype']!=_0x3d9da6(0x23d)&&logHistory(_0x3d9da6(0x210),_0x3d9da6(0x215)+_0xaa3fa7['symbol']+'\x20'+_0xaa3fa7[_0x3d9da6(0x12d)]+'\x20#'+formatResult(_0xaa3fa7['filled'],0x8)+'\x20@'+formatResult(_0xaa3fa7[_0x3d9da6(0x197)],0x8));}),_0x109f28[_0x4f3771(0x158)]((_0x3dec0c,_0x3a59e4)=>{const _0x5cb5de=_0x4f3771;if(_0x3dec0c)lastOrders[_0x5cb5de(0x185)](_0x3a59e4,0x1);}),persistOpenOrders(lastOrders);const _0xf6257d=coolingDown?_0x4f3771(0x191):_0x4f3771(0x1bd);if(validateOrdersState==_0x4f3771(0x1e2)){validateOrdersState=_0x4f3771(0x15a);if(_0x109f28[_0x4f3771(0x195)](![])){if(config[_0x4f3771(0x227)]==_0x4f3771(0x23d)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x109f28['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x4f3771(0x227)]==_0x4f3771(0x23d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4f3771(0x17b))_0x109f28[_0x4f3771(0x195)](![])&&(config[_0x4f3771(0x227)]==_0x4f3771(0x23d)?logHistory(_0x4f3771(0x169),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x4f3771(0x21c)](_0x3fba90*validateOrderInterval/0xea60)+_0x4f3771(0xf3)+_0xf6257d):(await cancelOrders(),logHistory(_0x4f3771(0x169),_0x4f3771(0x269)+Math['round'](_0x3fba90*validateOrderInterval/0xea60)+_0x4f3771(0xf3)+_0xf6257d))),await unlockOrders();else{if(validateOrdersState==_0x4f3771(0x1d4)){if(config[_0x4f3771(0x227)]!=_0x4f3771(0x23d))logHistory(_0x4f3771(0x169),_0x4f3771(0x275)+_0xf6257d);await unlockOrders();}}}}}async function cancelOrders(){const _0x1af40d=_0x2733a5;lastOrders[_0x1af40d(0x158)](async _0x4b864b=>{const _0x2d0429=_0x1af40d;try{const _0xbc9d21=await exchange['cancelOrder'](_0x4b864b[_0x2d0429(0x1c7)],_0x4b864b[_0x2d0429(0x10b)]);}catch(_0x56ca4c){if(_0x56ca4c[_0x2d0429(0x125)]()[_0x2d0429(0x195)](_0x2d0429(0xff))){}else await handleError(_0x56ca4c,'cancelOrders()');}});}async function initCoinResults(_0x337b37){const _0x19b069=_0x2733a5;_0x337b37?logger[_0x19b069(0x13f)](_0x19b069(0x12b)+_0x337b37):logger[_0x19b069(0x13f)](_0x19b069(0x18b)),config[_0x19b069(0x25c)]['forEach'](_0x4710ef=>{const _0x15257=_0x19b069;if(!_0x4710ef[_0x15257(0x274)]&&_0x4710ef[_0x15257(0xf9)]!=config[_0x15257(0x194)]){const _0xd99bce=currentCoins[_0x15257(0x123)](_0x1b7b86=>_0x1b7b86[_0x15257(0xf9)]==_0x4710ef[_0x15257(0xf9)]),_0x3d4f1e=global[_0x15257(0x1fa)][noslash(_0x4710ef[_0x15257(0x10b)])];let _0x4933c1=_0xd99bce?_0xd99bce['number']:null,_0x5acc27=_0x4710ef[_0x15257(0x24b)]?0x1/_0x3d4f1e:_0x3d4f1e,_0x1b635c;config['liquidity']['forEach'](_0x1d4cb5=>{const _0x341bbb=_0x15257;!_0x1b635c&&(_0x1b635c=_0x1d4cb5[_0x341bbb(0x1ae)][_0x341bbb(0x123)](_0x2ffd77=>_0x2ffd77[_0x341bbb(0xf9)]==_0x4710ef[_0x341bbb(0xf9)]),_0x1b635c&&(_0x4933c1=_0x1b635c[_0x341bbb(0x202)],_0x5acc27=_0x1b635c['price']));});let _0x4eb005=dbCoinResults[_0x15257(0x103)](_0x15257(0x137))[_0x15257(0x123)]({'coin':_0x4710ef[_0x15257(0xf9)]})[_0x15257(0x213)]();if(!_0x4eb005){const _0x3d36ce={'coin':_0x4710ef[_0x15257(0xf9)],'number':_0x4933c1,'breakeven':_0x5acc27,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x15257(0x103)](_0x15257(0x137))[_0x15257(0x1b3)](_0x3d36ce)['write']();}else{if(_0x337b37&&_0x4710ef[_0x15257(0xf9)]==_0x337b37){const _0x73b47c={'coin':_0x4710ef[_0x15257(0xf9)],'number':_0x4933c1,'breakeven':_0x5acc27,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x15257(0x103)](_0x15257(0x137))['find']({'coin':_0x4710ef[_0x15257(0xf9)]})[_0x15257(0x12a)](_0x73b47c)[_0x15257(0x1f1)]();}}}});}async function updateCoinResults(_0x58aa82,_0x55ac38=![]){const _0x67bf38=_0x2733a5;let _0x38752e,_0x35818f,_0x128dfa,_0x4f4d05,_0x2b5458,_0x44f1dd,_0x56cb6d=dbCoinResults[_0x67bf38(0x103)](_0x67bf38(0x137))[_0x67bf38(0x123)]({'coin':_0x58aa82[_0x67bf38(0xf9)]})[_0x67bf38(0x213)](),_0x40b877=![];Object[_0x67bf38(0x16f)](_0x56cb6d)[_0x67bf38(0x158)](([_0x3b567c,_0x359162])=>{if(_0x359162==null)_0x40b877=!![];});(!_0x56cb6d||_0x40b877)&&(await initCoinResults(_0x58aa82[_0x67bf38(0xf9)]),_0x56cb6d=dbCoinResults[_0x67bf38(0x103)](_0x67bf38(0x137))[_0x67bf38(0x123)]({'coin':_0x58aa82[_0x67bf38(0xf9)]})['value']());_0x58aa82[_0x67bf38(0x24b)]&&(_0x44f1dd={'filled':_0x58aa82[_0x67bf38(0x255)]*_0x58aa82['price'],'amount':_0x58aa82[_0x67bf38(0x255)]*_0x58aa82['price'],'side':_0x58aa82[_0x67bf38(0x12d)]==_0x67bf38(0x1ec)?'buy':_0x67bf38(0x1ec),'price':0x1/_0x58aa82[_0x67bf38(0x197)]},_0x58aa82={..._0x58aa82,..._0x44f1dd});_0x55ac38?_0x35818f=_0x58aa82[_0x67bf38(0x12d)]==_0x67bf38(0x232)?_0x56cb6d['number']+_0x58aa82[_0x67bf38(0x255)]:_0x56cb6d[_0x67bf38(0x202)]-_0x58aa82[_0x67bf38(0x255)]:_0x35818f=await getCoinNumber(_0x58aa82[_0x67bf38(0xf9)]);if(_0x58aa82[_0x67bf38(0x25e)]&&_0x58aa82[_0x67bf38(0x25e)]['currency']==config['basecoin'])_0x38752e=_0x58aa82[_0x67bf38(0x25e)][_0x67bf38(0x251)];else{if(_0x58aa82['fee']&&_0x58aa82[_0x67bf38(0x25e)][_0x67bf38(0x1f9)]=='BNB'&&!_0x55ac38)_0x38752e=_0x58aa82[_0x67bf38(0x25e)]['cost']*global[_0x67bf38(0x1fa)][_0x67bf38(0x207)+config[_0x67bf38(0x194)]];else _0x38752e=defaultFee*_0x58aa82[_0x67bf38(0x255)]*_0x58aa82['price'];}_0x58aa82[_0x67bf38(0x12d)]==_0x67bf38(0x232)?(_0x128dfa=_0x35818f!=0x0?(_0x56cb6d[_0x67bf38(0x182)]*_0x56cb6d['number']+_0x58aa82[_0x67bf38(0x197)]*(_0x35818f-_0x56cb6d[_0x67bf38(0x202)])+_0x38752e)/_0x35818f:0x0,_0x4f4d05=_0x56cb6d['realized']):(_0x128dfa=_0x35818f!=0x0?(_0x56cb6d[_0x67bf38(0x182)]*_0x56cb6d[_0x67bf38(0x202)]-_0x58aa82[_0x67bf38(0x197)]*(_0x56cb6d[_0x67bf38(0x202)]-_0x35818f)+_0x38752e)/_0x35818f:0x0,_0x4f4d05=_0x56cb6d[_0x67bf38(0x20b)]+(_0x58aa82[_0x67bf38(0x197)]-_0x56cb6d[_0x67bf38(0x182)])*_0x58aa82[_0x67bf38(0x255)]);_0x2b5458=(_0x58aa82[_0x67bf38(0x197)]-_0x128dfa-_0x38752e/_0x58aa82[_0x67bf38(0x255)])*_0x35818f;let _0x252701={'coin':_0x58aa82[_0x67bf38(0xf9)],'number':_0x35818f,'breakeven':formatResult(_0x128dfa,0x8),'realized':formatResult(_0x4f4d05,0x8),'unrealized':formatResult(_0x2b5458,0x8),'fees':formatResult(_0x56cb6d['fees']+_0x38752e,0x8),'sells':_0x58aa82[_0x67bf38(0x12d)]==_0x67bf38(0x1ec)?_0x56cb6d['sells']+0x1:_0x56cb6d[_0x67bf38(0x167)],'buys':_0x58aa82['side']==_0x67bf38(0x232)?_0x56cb6d[_0x67bf38(0x1ef)]+0x1:_0x56cb6d[_0x67bf38(0x1ef)]};dbCoinResults[_0x67bf38(0x103)](_0x67bf38(0x137))[_0x67bf38(0x123)]({'coin':_0x58aa82[_0x67bf38(0xf9)]})[_0x67bf38(0x12a)](_0x252701)['write']();if(!_0x55ac38){if(_0x58aa82[_0x67bf38(0x25e)]&&_0x58aa82[_0x67bf38(0x25e)][_0x67bf38(0x1f9)]=='BNB'){const _0x1b732c=currentCoins[_0x67bf38(0x123)](_0x382c2f=>_0x382c2f[_0x67bf38(0xf9)]=='BNB');if(_0x1b732c){let _0x433e3e=dbCoinResults[_0x67bf38(0x103)]('coins')['find']({'coin':'BNB'})[_0x67bf38(0x213)]();_0x252701={..._0x433e3e,'number':_0x1b732c[_0x67bf38(0x202)]},dbCoinResults[_0x67bf38(0x103)](_0x67bf38(0x137))[_0x67bf38(0x123)]({'coin':_0x67bf38(0x207)})[_0x67bf38(0x12a)](_0x252701)[_0x67bf38(0x1f1)]();}}}}async function placeOrder(_0x12feac){const _0x3a78eb=_0x2733a5,_0x4ab4bf=config[_0x3a78eb(0x227)]=='market'?_0x3a78eb(0x23d):_0x3a78eb(0x246);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3a78eb(0x161)],allOrdersPlaced=![],validateOrdersState=_0x3a78eb(0x1e2);let _0x162638=![];lastOrders=[];for(const _0x5d13c2 of _0x12feac){let _0x5a108c,_0x41b5d8,_0x3d5bc6,_0x2a7c94,_0xe6896c,_0x10ae10=_0x5d13c2[_0x3a78eb(0x10b)];try{const _0x12c2c0=await exchange[_0x3a78eb(0x12f)](_0x10ae10);_0x5a108c=_0x5d13c2[_0x3a78eb(0x24b)]?0x1/_0x5d13c2[_0x3a78eb(0x27a)]:_0x5d13c2[_0x3a78eb(0x27a)],_0x41b5d8=_0x12c2c0[_0x3a78eb(0x140)],_0x3d5bc6=_0x12c2c0[_0x3a78eb(0x1fd)];_0x5d13c2[_0x3a78eb(0x24b)]?(_0x2a7c94=_0x5d13c2['side']==_0x3a78eb(0x232)?_0x3a78eb(0x1ec):_0x3a78eb(0x232),_0xe6896c=Math[_0x3a78eb(0x1cd)](_0x5d13c2[_0x3a78eb(0x267)])/_0x5a108c):(_0x2a7c94=_0x5d13c2[_0x3a78eb(0x12d)],_0xe6896c=Math[_0x3a78eb(0x1cd)](_0x5d13c2['trade']));_0x4ab4bf==_0x3a78eb(0x246)&&(config[_0x3a78eb(0x227)]==_0x3a78eb(0x11f)&&(_0x5a108c=_0x2a7c94==_0x3a78eb(0x232)?_0x41b5d8:_0x3d5bc6),config[_0x3a78eb(0x227)]=='limit-low'&&(_0x5a108c=_0x2a7c94==_0x3a78eb(0x232)?_0x3d5bc6:_0x41b5d8));_0xe6896c=formatResult(_0xe6896c,0x8),_0x5a108c=formatResult(_0x5a108c,0x8);const _0x513026=_0x2a7c94==_0x3a78eb(0x1ec)?config[_0x3a78eb(0x272)]?String[_0x3a78eb(0x15f)]('0x'+config[_0x3a78eb(0x272)])+'\x20':'':config['emojibuy']?String[_0x3a78eb(0x15f)]('0x'+config[_0x3a78eb(0x136)])+'\x20':'',_0x52a9c9=_0x4ab4bf==_0x3a78eb(0x23d)?'Market':config[_0x3a78eb(0x227)]=='limit-high'?_0x3a78eb(0x180):_0x3a78eb(0x1ff),_0x540fbc=(Math['floor'](Math[_0x3a78eb(0x20c)]()*0x35a4e900)+0x5f5e100)[_0x3a78eb(0x125)]();lastOrders[_0x3a78eb(0x1b3)]({'customId':_0x540fbc,'symbol':_0x10ae10,'coin':_0x5d13c2[_0x3a78eb(0xf9)],'amount':_0xe6896c,'price':_0x5a108c,'side':_0x2a7c94,'reverse':_0x5d13c2[_0x3a78eb(0x24b)],'filled':0x0});if(_0x4ab4bf==_0x3a78eb(0x23d))logHistory(_0x3a78eb(0x210),''+_0x513026+_0x52a9c9+_0x3a78eb(0x1fe)+_0x10ae10+'\x20'+_0x2a7c94+'\x20#'+formatResult(_0xe6896c,0x8)+'\x20@'+formatResult(_0x5a108c,0x8));else logHistory('order',''+_0x513026+_0x52a9c9+_0x3a78eb(0x1fe)+_0x10ae10+'\x20'+_0x2a7c94+'\x20#'+formatResult(_0xe6896c,0x8)+'\x20@'+formatResult(_0x5a108c,0x8));const _0x6b47aa=await exchange[_0x3a78eb(0xfe)](_0x10ae10,_0x4ab4bf,_0x2a7c94,_0xe6896c,_0x5a108c);logger[_0x3a78eb(0x13f)](_0x3a78eb(0x111)+_0x6b47aa['id']+_0x3a78eb(0x247)+_0x540fbc);const _0x2de2e9=lastOrders[_0x3a78eb(0x1de)]-0x1;if(_0x2de2e9>=0x0&&lastOrders[_0x2de2e9][_0x3a78eb(0x23b)]==_0x540fbc){lastOrders[_0x2de2e9]['orderId']=_0x6b47aa['id'];if(_0x6b47aa[_0x3a78eb(0x222)])lastOrders[_0x2de2e9][_0x3a78eb(0x222)]=_0x6b47aa[_0x3a78eb(0x222)];if(_0x6b47aa[_0x3a78eb(0x197)])lastOrders[_0x2de2e9]['price']=_0x6b47aa[_0x3a78eb(0x197)];lastOrders[_0x2de2e9][_0x3a78eb(0x25e)]=_0x6b47aa[_0x3a78eb(0x25e)];}if(config[_0x3a78eb(0x201)]!=0x0){let _0x520b43=null;if(cooldownTracker[_0x3a78eb(0x1de)]==config[_0x3a78eb(0x201)]-0x1)_0x520b43=cooldownTracker[_0x3a78eb(0x1cc)]();const _0x23bf75=getTimeStamp();cooldownTracker[_0x3a78eb(0x1b3)](_0x23bf75);if(_0x520b43){const _0x1eee8c=fns['differenceInSeconds'](new Date(_0x23bf75),new Date(_0x520b43));if(_0x1eee8c<cooldownInterval){logHistory('error',_0x3a78eb(0x223)+config['cooldown']+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3a78eb(0x117)),coolingDown=!![];break;}}}}catch(_0xd4a99e){if(_0xd4a99e[_0x3a78eb(0x125)]()[_0x3a78eb(0x195)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x3a78eb(0x17d)](_0x2b44bd=>_0x2b44bd[_0x3a78eb(0x10b)]!=_0x10ae10),logHistory(_0x3a78eb(0x11a),_0x3a78eb(0x253)+_0x10ae10),_0x162638=!![];else{if(_0xd4a99e[_0x3a78eb(0x125)]()[_0x3a78eb(0x195)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x1de80e=>_0x1de80e[_0x3a78eb(0x10b)]!=_0x10ae10),logHistory('error',_0x3a78eb(0x19c)+_0x10ae10),_0x162638=!![];else{if(_0xd4a99e[_0x3a78eb(0x125)]()[_0x3a78eb(0x195)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x284933=>_0x284933[_0x3a78eb(0x10b)]!=_0x10ae10),logHistory('error',_0x3a78eb(0x1bb)+_0x10ae10),_0x162638=!![];else _0xd4a99e[_0x3a78eb(0x125)]()[_0x3a78eb(0x195)](_0x3a78eb(0x22d))?(lastOrders=lastOrders[_0x3a78eb(0x17d)](_0x31727c=>_0x31727c['symbol']!=_0x10ae10),logHistory(_0x3a78eb(0x11a),_0x3a78eb(0x253)+_0x10ae10),_0x162638=!![]):(lastOrders=lastOrders[_0x3a78eb(0x17d)](_0x12e6d5=>_0x12e6d5[_0x3a78eb(0x10b)]!=_0x10ae10),await handleError(_0xd4a99e,_0x3a78eb(0x1f3),_0x10ae10));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3a78eb(0x1de)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x1b0ae3=config['ordertype']==_0x3a78eb(0x23d)?validateOrderTimeout*0x3c*0x3e8:config[_0x3a78eb(0x157)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1f99c6=_0x3a78eb;validateOrders(_0x1f99c6(0x17b));},_0x1b0ae3);}else unlockOrders();_0x162638&&config[_0x3a78eb(0xfd)]&&await pauseBot(_0x3a78eb(0x243)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3a78eb(0x206)));}else{if(coolingDown)!config['headless']&&logHistory(_0x3a78eb(0x11a),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x3a78eb(0x11e)]&&(!config[_0x3a78eb(0xfd)]&&(config[_0x3a78eb(0x227)]==_0x3a78eb(0x23d)?logHistory(_0x3a78eb(0x11a),_0x3a78eb(0x18d)):logHistory(_0x3a78eb(0x11a),_0x3a78eb(0x1ca))));}}function persistOpenOrders(_0x22160d){const _0x2740f7=_0x2733a5,_0x1d2699={...config,'openOrders':_0x22160d};let _0x3d1294=dbConfig[_0x2740f7(0x103)](_0x2740f7(0x266))[_0x2740f7(0x123)]({'botID':botID})[_0x2740f7(0x213)]();_0x3d1294&&dbConfig['get']('bot')[_0x2740f7(0x123)]({'botID':botID})[_0x2740f7(0x12a)](_0x1d2699)[_0x2740f7(0x1f1)]();}function restoreOrders(){const _0x5e377b=_0x2733a5;let _0x1c2c93;config[_0x5e377b(0x148)]&&allOpenOrders[_0x5e377b(0x158)](_0x3025ee=>{const _0x2cdff6=_0x5e377b,_0x1599e7=config[_0x2cdff6(0x148)][_0x2cdff6(0x123)](_0x156951=>_0x156951[_0x2cdff6(0x1c7)]==_0x3025ee['id']);_0x1599e7&&(lastOrders[_0x2cdff6(0x1b3)](_0x1599e7),_0x1c2c93=_0x3025ee[_0x2cdff6(0x164)]);});if(lastOrders[_0x5e377b(0x1de)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x5e377b(0x15a),allOrdersPlaced=!![];const _0x532135=new Date()[_0x5e377b(0x1cb)](),_0x3b5abb=config['ordertype']==_0x5e377b(0x23d)?validateOrderTimeout*0x3c*0x3e8:config[_0x5e377b(0x157)]*0x3c*0x3e8;if(_0x1c2c93+_0x3b5abb>_0x532135){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1fdba5=_0x5e377b;validateOrders(_0x1fdba5(0x17b));},_0x1c2c93+_0x3b5abb-_0x532135);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x484983=_0x2733a5;if(!coinsLoaded){process[_0x484983(0x276)]({'telegrammsg':_0x484983(0x242)},_0x500505=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x46ed5e='';if(config[_0x484983(0x122)])_0x46ed5e=_0x484983(0x22f)+config['botname']+_0x484983(0x1a6);else _0x46ed5e='<b>Bot\x20'+botID+_0x484983(0x1a6);const _0x58fa55=getKPIs(_0x484983(0x194)),_0x3b006c=getKPIs(_0x484983(0x225),config['fiat']),_0x23f660=getKPIs(_0x484983(0x244)),_0x259992=getKPIs(_0x484983(0x1b4),config[_0x484983(0x225)]);_0x46ed5e+='<pre>',_0x46ed5e+=_0x58fa55[_0x484983(0x15b)]+_0x484983(0x1b6)+_0x58fa55[_0x484983(0x213)]+'\x0a',_0x46ed5e+=_0x58fa55[_0x484983(0x234)]+':\x20'+_0x58fa55[_0x484983(0x10d)]+'%\x0a',_0x46ed5e+=_0x3b006c[_0x484983(0x15b)]+_0x484983(0x1b6)+_0x3b006c[_0x484983(0x213)]+'\x0a',_0x46ed5e+=_0x3b006c['rightTxt']+':\x20'+_0x3b006c[_0x484983(0x10d)]+'%\x0a',_0x46ed5e+=_0x23f660[_0x484983(0x15b)]+':\x20'+_0x23f660[_0x484983(0x213)]+'\x20('+config[_0x484983(0x194)]+')\x0a',_0x46ed5e+=_0x23f660[_0x484983(0x234)]+':\x20'+_0x23f660[_0x484983(0x10d)]+_0x484983(0x1bf)+config[_0x484983(0x194)]+')\x0a',_0x46ed5e+=_0x259992[_0x484983(0x15b)]+':\x20'+_0x259992[_0x484983(0x213)]+'\x20('+config[_0x484983(0x225)]+')\x0a',_0x46ed5e+=_0x259992[_0x484983(0x234)]+':\x20'+_0x259992['change']+'%\x20('+config['fiat']+')\x0a',_0x46ed5e+=_0x484983(0x218),process['send']({'telegrammsg':_0x46ed5e},_0x2b2c1e=>{});}async function sendPortfolioTelegram(){const _0x1bf09b=_0x2733a5;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x3e5464=>{});return;}let _0x4c538f='';if(config[_0x1bf09b(0x122)])_0x4c538f=_0x1bf09b(0x22f)+config['botname']+_0x1bf09b(0x23e);else _0x4c538f=_0x1bf09b(0x22a)+botID+_0x1bf09b(0x23e);_0x4c538f+=_0x1bf09b(0x1d0),_0x4c538f+='-------------------------------\x0a',_0x4c538f+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4c538f+=_0x1bf09b(0x237),currentCoins[_0x1bf09b(0x158)](_0x2d81af=>{const _0x354f51=_0x1bf09b;_0x4c538f+=_0x2d81af[_0x354f51(0xf9)][_0x354f51(0x1af)](0x7)+'|\x20'+formatPad(_0x2d81af['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2d81af[_0x354f51(0x24c)],0x2,0x6)+'|\x20'+formatPad(_0x2d81af['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4c538f+=_0x1bf09b(0x218),process[_0x1bf09b(0x276)]({'telegrammsg':_0x4c538f},_0x4bea3a=>{});}function formatPad(_0xa455c,_0x4e2fe0,_0x599813){const _0x16d2a9=_0x2733a5,_0x3746e9=formatResultString(_0xa455c,_0x4e2fe0);return _0x3746e9?_0x3746e9[_0x16d2a9(0x250)](_0x599813):''[_0x16d2a9(0x250)](_0x599813);}function logHistory(_0x4d7dbe,_0x27733a,_0x5263ce=''){const _0x5b48e2=_0x2733a5;let _0x11ff55={'time':getTimeStamp(),'type':_0x4d7dbe,'event':_0x27733a};dbLogs[_0x5b48e2(0x103)](_0x5b48e2(0x166))[_0x5b48e2(0x1b3)](_0x11ff55)[_0x5b48e2(0x1f1)]();if(_0x5263ce=='')_0x5263ce=_0x27733a;proxyEmit('event',{'log':_0x11ff55,'summary':_0x5263ce}),process[_0x5b48e2(0x276)]({'telegram':{..._0x11ff55,'botname':config[_0x5b48e2(0x13d)],'showname':config[_0x5b48e2(0x122)]}},_0x1ca17b=>{}),logger[_0x5b48e2(0x1d7)](''+_0x11ff55[_0x5b48e2(0x109)]);}function emitHistory(_0x5a697b={}){const _0x98a5ee=_0x2733a5;Object[_0x98a5ee(0x156)](_0x5a697b)['length']==0x0&&(_0x5a697b={'type':[_0x98a5ee(0x210),_0x98a5ee(0x109)],'event':'','page':0x1});if(_0x5a697b[_0x98a5ee(0x1d8)][_0x98a5ee(0x195)](_0x98a5ee(0x109)))_0x5a697b['type'][_0x98a5ee(0x185)](_0x5a697b['type']['indexOf'](_0x98a5ee(0x109)),0x1,_0x98a5ee(0x11a),_0x98a5ee(0x18a),_0x98a5ee(0x169));if(dbLogs[_0x98a5ee(0x199)](_0x98a5ee(0x166))['value']()){let _0x1e64be=dbLogs[_0x98a5ee(0x103)]('logs')[_0x98a5ee(0x17d)](_0x274cd6=>{const _0x4b430e=_0x98a5ee;if(_0x5a697b[_0x4b430e(0x1d8)][_0x4b430e(0x1de)]==0x0)return![];else return _0x5a697b['type'][_0x4b430e(0x195)](_0x274cd6['type']);})[_0x98a5ee(0x17d)](_0x36396a=>{const _0x3b4f69=_0x98a5ee;if(_0x5a697b['event']=='')return!![];else return _0x36396a[_0x3b4f69(0x109)][_0x3b4f69(0x1db)]()[_0x3b4f69(0x195)](_0x5a697b['event'][_0x3b4f69(0x1db)]());})[_0x98a5ee(0x187)]('time'),_0x26abf7=_0x1e64be[_0x98a5ee(0x213)]()[_0x98a5ee(0x1de)];_0x1e64be=_0x1e64be['reverse']()['slice']((_0x5a697b[_0x98a5ee(0x1ed)]-0x1)*logPageSize,_0x5a697b[_0x98a5ee(0x1ed)]*logPageSize-0x1)['reverse']()[_0x98a5ee(0x213)](),proxyEmit(_0x98a5ee(0x24a),{'logs':_0x1e64be,'total':_0x26abf7});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x231264){const _0xc472bb=_0x2733a5;if(dbLogs[_0xc472bb(0x199)](_0xc472bb(0x166))[_0xc472bb(0x213)]()){const _0x3a5d1c=dbLogs[_0xc472bb(0x103)](_0xc472bb(0x166))[_0xc472bb(0x187)](_0xc472bb(0x104))['filter'](_0x5aa90d=>{const _0x2fe719=_0xc472bb;return _0x5aa90d[_0x2fe719(0x1d8)]=='order';})[_0xc472bb(0x213)]();dbLogs[_0xc472bb(0x103)](_0xc472bb(0x166))[_0xc472bb(0x150)]()['write'](),dbLogs[_0xc472bb(0x103)](_0xc472bb(0x166))['assign'](_0x3a5d1c)[_0xc472bb(0x1f1)](),emitHistory(_0x231264);}}async function pauseBot(_0x59cdba=''){const _0x1c9039=_0x2733a5,_0x53ab07=new Date()[_0x1c9039(0x1cb)]();if(!lastErrorShown||_0x53ab07-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x53ab07;!lastBotPause?(lastBotPause=_0x53ab07,consecutivePauses=0x1):(_0x53ab07-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x1c9039(0x276)]({'stop':_0x1c9039(0x1dd)},_0x215359=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1c9039(0x1cb)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x59cdba)_0x59cdba+='\x20|\x20';logHistory(_0x1c9039(0x11a),_0x59cdba+_0x1c9039(0x17a)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x3a4f97=_0x2733a5;process[_0x3a4f97(0x276)]({'stop':'kill'},_0x39d9e0=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x52bb66,_0x59e701){const _0x5b1ad0=_0x2733a5;if(_0x52bb66[_0x5b1ad0(0x125)]()[_0x5b1ad0(0x195)](_0x5b1ad0(0x14b)))return logHistory(_0x5b1ad0(0x11a),config[_0x5b1ad0(0x115)]+_0x5b1ad0(0x209)),![];else{if(_0x52bb66[_0x5b1ad0(0x125)]()[_0x5b1ad0(0x195)](_0x5b1ad0(0x176)))return logHistory(_0x5b1ad0(0x11a),config['exchange']+_0x5b1ad0(0x141)),![];else{if(_0x52bb66[_0x5b1ad0(0x125)]()['includes'](_0x5b1ad0(0x16b)))return logHistory(_0x5b1ad0(0x11a),config[_0x5b1ad0(0x115)]+_0x5b1ad0(0x17c)),logHistory('error',_0x5b1ad0(0x155)),![];else await handleError(_0x52bb66,_0x59e701);}}}async function handleError(_0x4a26cc,_0x78cd9d,_0x182ccf=''){const _0x3f1cf4=_0x2733a5,_0x151a67=config['exchange']||'Exchange';if(_0x4a26cc['toString']()[_0x3f1cf4(0x195)](_0x3f1cf4(0x1b8))||_0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)](_0x3f1cf4(0x22b)))await pauseBot(config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x21e));else{if(_0x4a26cc[_0x3f1cf4(0x125)]()['includes']('ExchangeNotAvailable')||_0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)](_0x3f1cf4(0x172)))await pauseBot(config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x1a2));else{if(_0x4a26cc['toString']()[_0x3f1cf4(0x195)](_0x3f1cf4(0x279)))await pauseBot(config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x18f));else{if(_0x4a26cc[_0x3f1cf4(0x125)]()['includes'](_0x3f1cf4(0x23a)))await pauseBot(config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x224));else{if(_0x4a26cc['toString']()[_0x3f1cf4(0x195)]('NetworkError'))logger[_0x3f1cf4(0x13f)](_0x3f1cf4(0x181),_0x4a26cc),await pauseBot(config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x1eb));else{if(_0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3f1cf4(0x11a),_0x78cd9d+_0x3f1cf4(0x20f)),logHistory(_0x3f1cf4(0x11a),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4a26cc['toString']()[_0x3f1cf4(0x195)](_0x3f1cf4(0x10e)))logHistory('error',_0x78cd9d+_0x3f1cf4(0x1fc)),logHistory(_0x3f1cf4(0x11a),_0x3f1cf4(0x128)),await killBot();else{if(_0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)](_0x3f1cf4(0x14b)))logHistory('error',_0x78cd9d+_0x3f1cf4(0x1e9)+config[_0x3f1cf4(0x115)]+_0x3f1cf4(0x212)),logHistory(_0x3f1cf4(0x11a),_0x3f1cf4(0x128)),await killBot();else{if(_0x4a26cc['toString']()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3f1cf4(0x11a),_0x78cd9d+'\x20|\x20'+config['exchange']+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x3f1cf4(0x11a),_0x3f1cf4(0x128)),await killBot();else{if(_0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)](_0x3f1cf4(0x16b)))logHistory(_0x3f1cf4(0x11a),_0x78cd9d+_0x3f1cf4(0x1e9)+config[_0x3f1cf4(0x115)]+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x3f1cf4(0x11a),_0x3f1cf4(0x128)),await killBot();else _0x4a26cc[_0x3f1cf4(0x125)]()[_0x3f1cf4(0x195)](_0x3f1cf4(0x1a7))?logHistory('error',_0x78cd9d+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x182ccf):(logger[_0x3f1cf4(0x1d7)](_0x78cd9d+'\x20|\x20Error\x20details:\x20',_0x4a26cc),await pauseBot(_0x3f1cf4(0x273)));}}}}}}}}}}function formatResult(_0x530f06,_0x5e8c09){const _0x439ef1=_0x2733a5;return parseFloat(_0x530f06[_0x439ef1(0x113)](_0x5e8c09));}function formatResultTruncate(_0x544dda,_0x3476d4){const _0x2fbe57=_0x2733a5;let _0x66c06b=formatResultString(_0x544dda,0xa),_0xadf567=_0x66c06b['indexOf']('.');return _0xadf567!=-0x1&&(_0x66c06b=_0x66c06b[_0x2fbe57(0x1f7)](0x0,_0xadf567+_0x3476d4+0x1)),Number(_0x66c06b);}function formatResultString(_0x25d559,_0x236611){const _0x29c19d=_0x2733a5;let _0x5d807d;if(!(''+_0x25d559)['includes']('e'))_0x5d807d=+(Math[_0x29c19d(0x21c)](_0x25d559+'e+'+_0x236611)+'e-'+_0x236611);else{let _0x1fa98c=(''+_0x25d559)[_0x29c19d(0x20e)]('e'),_0x80944e='';+_0x1fa98c[0x1]+_0x236611>0x0&&(_0x80944e='+'),_0x5d807d=+(Math[_0x29c19d(0x21c)](+_0x1fa98c[0x0]+'e'+_0x80944e+(+_0x1fa98c[0x1]+_0x236611))+'e-'+_0x236611);}return Number(_0x5d807d)[_0x29c19d(0x113)](_0x236611);}function getServerTime(){const _0xa855f9=_0x2733a5,_0x599c53=new Date();return _0x599c53['getFullYear']()+'/'+(_0x599c53[_0xa855f9(0x21f)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x599c53[_0xa855f9(0x21d)]()['toString']()[_0xa855f9(0x250)](0x2,'0')+'\x20'+_0x599c53['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x599c53[_0xa855f9(0x114)]()['toString']()['padStart'](0x2,'0')+':'+_0x599c53['getSeconds']()[_0xa855f9(0x125)]()[_0xa855f9(0x250)](0x2,'0');}function getTimeStamp(){const _0x10e663=_0x2733a5,_0x2e41ed=shiftedTime();return _0x2e41ed[_0x10e663(0x162)]()+'/'+(_0x2e41ed['getMonth']()+0x1)['toString']()[_0x10e663(0x250)](0x2,'0')+'/'+_0x2e41ed[_0x10e663(0x21d)]()[_0x10e663(0x125)]()[_0x10e663(0x250)](0x2,'0')+'\x20'+_0x2e41ed[_0x10e663(0xfb)]()[_0x10e663(0x125)]()[_0x10e663(0x250)](0x2,'0')+':'+_0x2e41ed[_0x10e663(0x114)]()['toString']()[_0x10e663(0x250)](0x2,'0')+':'+_0x2e41ed[_0x10e663(0x14f)]()[_0x10e663(0x125)]()[_0x10e663(0x250)](0x2,'0');}function getDate(){const _0x49b042=_0x2733a5,_0x5e90f5=shiftedTime();return _0x5e90f5['getFullYear']()+'/'+(_0x5e90f5[_0x49b042(0x21f)]()+0x1)['toString']()[_0x49b042(0x250)](0x2,'0')+'/'+_0x5e90f5[_0x49b042(0x21d)]()[_0x49b042(0x125)]()['padStart'](0x2,'0');}function getHour(){const _0x2e738e=_0x2733a5,_0x284dda=shiftedTime();return _0x284dda[_0x2e738e(0xfb)]()[_0x2e738e(0x125)]()['padStart'](0x2,'0');}function sleep(_0x31d179){return new Promise(_0x114d9a=>setTimeout(_0x114d9a,_0x31d179));}function shiftedTime(){const _0x9e4ae0=_0x2733a5,_0x1d4f14=new Date();let _0x344eb9=_0x1d4f14;if(config&&config[_0x9e4ae0(0x192)]!==0x0)_0x344eb9=fns[_0x9e4ae0(0x19f)](_0x1d4f14,{'hours':config[_0x9e4ae0(0x192)]});return _0x344eb9;}function timer(_0x477628){const _0x2c3394=_0x2733a5,_0x4f980a=new Date();!lasttime?console[_0x2c3394(0x19a)](getTimeStamp()+_0x2c3394(0x193),_0x477628,_0x4f980a):console['log'](getTimeStamp()+_0x2c3394(0x193),_0x477628,(_0x4f980a-lasttime)/0x3e8),lasttime=_0x4f980a;}