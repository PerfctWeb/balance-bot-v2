const _0x54eec5=_0x3db1;(function(_0x520441,_0x1a8a5d){const _0x270330=_0x3db1,_0x3dc253=_0x520441();while(!![]){try{const _0x534e48=parseInt(_0x270330(0x291))/0x1+parseInt(_0x270330(0x159))/0x2*(-parseInt(_0x270330(0x1fe))/0x3)+parseInt(_0x270330(0x289))/0x4*(-parseInt(_0x270330(0x209))/0x5)+parseInt(_0x270330(0x15a))/0x6+-parseInt(_0x270330(0x21e))/0x7*(-parseInt(_0x270330(0x223))/0x8)+-parseInt(_0x270330(0x241))/0x9+parseInt(_0x270330(0x26c))/0xa;if(_0x534e48===_0x1a8a5d)break;else _0x3dc253['push'](_0x3dc253['shift']());}catch(_0x30fbf0){_0x3dc253['push'](_0x3dc253['shift']());}}}(_0x1c39,0x40bd8));const _0x42c3b9=function(){let _0x2d9044=!![];return function(_0x13ab95,_0xc7f6e5){const _0x503285=_0x2d9044?function(){if(_0xc7f6e5){const _0x2e6c16=_0xc7f6e5['apply'](_0x13ab95,arguments);return _0xc7f6e5=null,_0x2e6c16;}}:function(){};return _0x2d9044=![],_0x503285;};}(),_0x2c02fd=_0x42c3b9(this,function(){const _0x103648=_0x3db1;return _0x2c02fd[_0x103648(0x2a4)]()[_0x103648(0x246)](_0x103648(0x1d7))[_0x103648(0x2a4)]()[_0x103648(0x1ee)](_0x2c02fd)[_0x103648(0x246)](_0x103648(0x1d7));});_0x2c02fd();'use strict';const ccxt=require(_0x54eec5(0x177)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x54eec5(0x171)),Crypt=require('hybrid-crypto-js')[_0x54eec5(0x17a)],util=require(_0x54eec5(0x2c7)),argv=require('yargs/yargs')(process['argv'][_0x54eec5(0x1d1)](0x2))['argv'],path=require('path');let exchange;global[_0x54eec5(0x217)]={},global[_0x54eec5(0x1f0)]={};const usdBasecoins=[_0x54eec5(0x2af),_0x54eec5(0x216),_0x54eec5(0x27b),_0x54eec5(0x1f1),'USDC','USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x54eec5(0x1c2)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x54eec5(0x175)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x54eec5(0x25b)+pauseBotInterval/0xea60+'\x20minutes',pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x54eec5(0x25b)+pauseBotIntervalLong/0xea60+_0x54eec5(0x297),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x54eec5(0x15f)],botID=process['argv'][0x2]||_0x54eec5(0x266),pattern=/^[0-9]{3}$/;!pattern[_0x54eec5(0x28b)](botID)&&(console['log'](_0x54eec5(0x27d)+botID+_0x54eec5(0x1b0)),killBot());const userID=process[_0x54eec5(0x253)][0x3]||'',configpath=userID?_0x54eec5(0x1cc)+userID+'/':_0x54eec5(0x1cc),logspath=userID?_0x54eec5(0x28e)+userID+'/':_0x54eec5(0x28e),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0x54eec5(0x208)](configpath)&&fs[_0x54eec5(0x1a3)](configpath);!fs[_0x54eec5(0x208)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x54eec5(0x294)+botID+_0x54eec5(0x1c7),logfile=configpath+_0x54eec5(0x294)+botID+_0x54eec5(0x146),performancefile=configpath+_0x54eec5(0x294)+botID+_0x54eec5(0x2a3),coinresultsfile=configpath+_0x54eec5(0x294)+botID+_0x54eec5(0x1b6),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x54eec5(0x1c0),configbackuppath=configpath+_0x54eec5(0x282),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x54eec5(0x242)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x54eec5(0x283)]({'data':[],'version':serverversion})[_0x54eec5(0x242)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x54eec5(0x242)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x54eec5(0x242)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x54eec5(0x224),'rsaStandard':_0x54eec5(0x167)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3065c3=>{const _0x4b6d6f=_0x54eec5;console[_0x4b6d6f(0x257)](_0x3065c3);},'simple':_0x16402f=>{const _0x4c89c6=_0x54eec5;console[_0x4c89c6(0x257)](_0x16402f),loggerfile[_0x4c89c6(0x242)](util[_0x4c89c6(0x1e4)](_0x16402f)+'\x0a');},'full':async(_0x3f88d0,_0x1d8e1a='')=>{const _0xcecede=_0x54eec5;let _0x4e1f4d;if(config['showname'])_0x4e1f4d=getTimeStamp()+':\x20'+config[_0xcecede(0x24a)]+'\x20>\x20'+_0x3f88d0;else _0x4e1f4d=getTimeStamp()+_0xcecede(0x260)+botID+'\x20>\x20'+_0x3f88d0;console[_0xcecede(0x257)](_0x4e1f4d),loggerfile[_0xcecede(0x242)](util[_0xcecede(0x1e4)](_0x4e1f4d)+'\x0a'),_0x1d8e1a&&(console[_0xcecede(0x257)](_0x1d8e1a),loggerfile[_0xcecede(0x242)](util[_0xcecede(0x1e4)](_0x1d8e1a)+'\x0a'));},'debug':async(_0xa315f9,_0x502daf='')=>{const _0x57b6c3=_0x54eec5;let _0xd87080;if(config[_0x57b6c3(0x24b)])_0xd87080=getTimeStamp()+':\x20'+config['botname']+_0x57b6c3(0x181)+_0xa315f9;else _0xd87080=getTimeStamp()+_0x57b6c3(0x260)+botID+_0x57b6c3(0x181)+_0xa315f9;if(debugging)console[_0x57b6c3(0x257)](_0xd87080);loggerfile[_0x57b6c3(0x242)](util[_0x57b6c3(0x1e4)](_0xd87080)+'\x0a');if(_0x502daf){if(debugging)console[_0x57b6c3(0x257)](_0x502daf);loggerfile['write'](util[_0x57b6c3(0x1e4)](_0x502daf)+'\x0a');}}};process['on'](_0x54eec5(0x29f),function(_0x504de7){const _0x2dce21=_0x54eec5;handleError(_0x504de7,_0x2dce21(0x29f));});settings[_0x54eec5(0x2d2)]!=config[_0x54eec5(0x2d2)]&&updateTimeshift(settings[_0x54eec5(0x2d2)]);settings['onepagemode']!=config[_0x54eec5(0x195)]&&updateOnepagemode(settings[_0x54eec5(0x195)]);process[_0x54eec5(0x13d)]({'started':_0x54eec5(0x1e5)},_0x3cffb8=>{}),initializeProcessListeners();function proxyEmit(_0xa63c72,_0x2424ea=null){const _0x535892=_0x54eec5;process[_0x535892(0x13d)]({'function':_0xa63c72,'args':_0x2424ea},_0x1fd94d=>{});}function initializeProcessListeners(){const _0x19559d=_0x54eec5;process['on'](_0x19559d(0x198),_0xf91976=>{const _0x1cc99d=_0x19559d;switch(Object[_0x1cc99d(0x15b)](_0xf91976)[0x0]){case'timeshift':_0xf91976['timeshift']!=undefined&&(settings[_0x1cc99d(0x2d2)]=_0xf91976[_0x1cc99d(0x2d2)],updateTimeshift(settings[_0x1cc99d(0x2d2)]));break;case'onepagemode':_0xf91976['onepagemode']!=undefined&&(settings[_0x1cc99d(0x195)]=_0xf91976[_0x1cc99d(0x195)],updateOnepagemode(settings[_0x1cc99d(0x195)]));break;case _0x1cc99d(0x1d5):_0xf91976[_0x1cc99d(0x1d5)]!=undefined&&(bots=JSON[_0x1cc99d(0x218)](_0xf91976[_0x1cc99d(0x1d5)]),proxyEmit(_0x1cc99d(0x1d5),bots));break;case'function':switch(_0xf91976['function']){case _0x1cc99d(0x1d0):initclient();break;case _0x1cc99d(0x1d8):toggleBotMode();break;case _0x1cc99d(0x298):emitHistory(_0xf91976[_0x1cc99d(0x18c)]);break;case _0x1cc99d(0x1a2):deleteHistoryAlerts(_0xf91976['args']);break;case _0x1cc99d(0x147):getPortfolio(_0xf91976[_0x1cc99d(0x18c)]);break;case _0x1cc99d(0x23b):storeConfiguration(_0xf91976['args']);break;case _0x1cc99d(0x173):storeHeadless(_0xf91976[_0x1cc99d(0x18c)]);break;case _0x1cc99d(0x15c):storeFiat(_0xf91976['args']);break;case _0x1cc99d(0x1de):resetHistory();break;case _0x1cc99d(0x204):getStartingBalances(getNormalizedPerformance());break;case _0x1cc99d(0x299):placeOrder(_0xf91976[_0x1cc99d(0x18c)]);break;case _0x1cc99d(0x182):cancelLoading();break;case _0x1cc99d(0x29c):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x26ca26=![]){const _0x16bff8=_0x54eec5;logger[_0x16bff8(0x1b8)](_0x16bff8(0x1f2)+(_0x26ca26?'exchange\x20reloaded':_0x16bff8(0x148))+_0x16bff8(0x170)+config[_0x16bff8(0x2b6)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x26ca26)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x16bff8(0x1cb)]!=''&&config[_0x16bff8(0x1cb)]!=_0x16bff8(0x27a)){loadingProgress=0x0;if(_0x26ca26){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x33fedd){handleErrorNoStop(_0x33fedd,_0x16bff8(0x2a0));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x4f92c0=await getCoins();[currentCoins,currentCoinsAll]=_0x4f92c0,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x16bff8(0x1db)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x16bff8(0x200)]==0x0&&allOpenOrders[_0x16bff8(0x200)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x5a9f15=_0x54eec5;exchangeStopped=!![];try{await exchange[_0x5a9f15(0x14f)]();}catch(_0x574158){await handleError(_0x574158,'stopExchange()');}}async function reloadExchange(){const _0x3fea8b=_0x54eec5;while(lockOrders!=ORDERS[_0x3fea8b(0x175)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x3fea8b(0x1b8)](_0x3fea8b(0x258)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x330e5c=config['exchange'],_0x20f218=config[_0x54eec5(0x1cb)],_0x5e160b=config[_0x54eec5(0x145)],_0x13543e=config[_0x54eec5(0x20d)]){const _0x4f0f1f=_0x54eec5;exchange&&await stopExchange();!supportedExchanges()[_0x4f0f1f(0x1e7)](_0x330e5c)&&(logHistory('error',_0x4f0f1f(0x2cb)+_0x330e5c+_0x4f0f1f(0x22e)),killBot());const _0x36f731=ccxt['pro'][_0x330e5c['toLowerCase']()];exchange=new _0x36f731({'apiKey':_0x20f218,'secret':_0x5e160b,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}}),exchange[_0x4f0f1f(0x189)]=!![];if(_0x13543e)exchange['password']=_0x13543e;}function setStableCoins(){const _0x98899e=_0x54eec5;let _0x1adcee=config[_0x98899e(0x140)]==_0x98899e(0x255)?_0x98899e(0x255):config[_0x98899e(0x140)]==_0x98899e(0x2c6)?_0x98899e(0x2c6):_0x98899e(0x2b8),_0x43be93=!allSymbols[_0x98899e(0x1e7)](_0x1adcee+_0x98899e(0x1ed))?_0x98899e(0x1f1):'USD',_0x13ec37=!allSymbols['includes'](_0x1adcee+_0x98899e(0x24c))?_0x43be93:_0x98899e(0x2c5);stablecoins={'eur':{'coin':''+_0x1adcee+_0x13ec37,'symbol':_0x1adcee+'/'+_0x13ec37},'usd':{'coin':''+_0x1adcee+_0x43be93,'symbol':_0x1adcee+'/'+_0x43be93}};}async function initwsCcxt(){const _0x4a2238=_0x54eec5;initCycle++;const _0xd4c9e5=initCycle;let _0x5db3dd=[];config[_0x4a2238(0x26f)]['forEach'](_0x56eaa9=>{const _0x26d11e=_0x4a2238;if(!_0x56eaa9[_0x26d11e(0x2ca)]&&_0x56eaa9[_0x26d11e(0x19b)]!=config[_0x26d11e(0x140)])_0x5db3dd['push'](_0x56eaa9[_0x26d11e(0x23d)]);});if(!_0x5db3dd[_0x4a2238(0x1e7)](stablecoins[_0x4a2238(0x1f7)]['symbol']))_0x5db3dd[_0x4a2238(0x203)](stablecoins[_0x4a2238(0x1f7)][_0x4a2238(0x23d)]);if(!_0x5db3dd[_0x4a2238(0x1e7)](stablecoins[_0x4a2238(0x24f)][_0x4a2238(0x23d)]))_0x5db3dd[_0x4a2238(0x203)](stablecoins[_0x4a2238(0x24f)][_0x4a2238(0x23d)]);if(config[_0x4a2238(0x2b6)][_0x4a2238(0x262)](_0x4a2238(0x15d))&&config[_0x4a2238(0x140)]!=_0x4a2238(0x2c6)){if(!_0x5db3dd[_0x4a2238(0x1e7)](_0x4a2238(0x214)+config['basecoin']))_0x5db3dd[_0x4a2238(0x203)](_0x4a2238(0x214)+config[_0x4a2238(0x140)]);}loadCoins(_0x5db3dd),_0x5db3dd=validateSymbols(_0x5db3dd);const _0x22235b=async _0x1b45a7=>{const _0x2b48c9=_0x4a2238;let _0x40b982;try{const _0xdf31f6=await getTickers(_0x1b45a7);Object[_0x2b48c9(0x1a8)](_0xdf31f6)['forEach'](_0x147b10=>{const _0x5851d7=_0x2b48c9;_0x40b982=_0x147b10[0x1][_0x5851d7(0x23d)],global[_0x5851d7(0x217)][noslash(_0x40b982)]=_0x147b10[0x1][_0x5851d7(0x22a)],global[_0x5851d7(0x1f0)][_0x40b982]=_0x147b10[0x1][_0x5851d7(0x1d4)];});}catch(_0x40351f){await handleError(_0x40351f,_0x2b48c9(0x18e),_0x40b982);}},_0x22e2ef=async _0xac02d1=>{const _0x51b2e3=_0x4a2238;while(initCycle==_0xd4c9e5){if(!botPaused)try{const _0x5d4bbc=await exchange['watchTrades'](_0xac02d1);global[_0x51b2e3(0x217)][noslash(_0x5d4bbc[0x0][_0x51b2e3(0x23d)])]=_0x5d4bbc[0x0][_0x51b2e3(0x166)],await sleep(0x3e8);}catch(_0x2a16a7){if(!exchangeStopped)await handleError(_0x2a16a7,_0x51b2e3(0x18a),_0xac02d1);}else await sleep(0x64);}},_0x3a2e02=async _0x7ea9b7=>{const _0x31d8a1=_0x4a2238;while(initCycle==_0xd4c9e5){if(!botPaused){let _0x19da94;try{await sleep(0x3c*0x3e8);const _0x532dc8=await getTickers(_0x7ea9b7);Object[_0x31d8a1(0x1a8)](_0x532dc8)[_0x31d8a1(0x178)](_0x4e3bcc=>{const _0x4e2ac2=_0x31d8a1;_0x19da94=_0x4e3bcc[0x1][_0x4e2ac2(0x23d)],global[_0x4e2ac2(0x1f0)][_0x19da94]=_0x4e3bcc[0x1]['percentage'];});}catch(_0x28a382){if(!exchangeStopped)await handleError(_0x28a382,_0x31d8a1(0x194),_0x19da94);}}else await sleep(0x64);}},_0x1df52e=async _0x1cdfdb=>{const _0x1279c5=_0x4a2238;while(initCycle==_0xd4c9e5){if(!botPaused)try{const _0xa87ac5=await exchange[_0x1279c5(0x2c1)](_0x1cdfdb);initCycle==_0xd4c9e5&&_0xa87ac5[_0x1279c5(0x178)](_0x30f9f6=>{updateNumberCoinsCcxt(_0x30f9f6);});}catch(_0x3c0e8e){if(!exchangeStopped)await handleError(_0x3c0e8e,'watchOrders()');}else await sleep(0x64);}};_0x22235b(_0x5db3dd),_0x5db3dd['forEach'](_0x80f4d6=>{_0x1df52e(_0x80f4d6);}),!wsEventsSet&&(wsEventsSet=!![]);}async function getTickers(_0x49ccb9){const _0x5c442d=_0x54eec5;let _0x36a29a={};try{if(config[_0x5c442d(0x2b6)]!=_0x5c442d(0x17c))_0x36a29a=await exchange[_0x5c442d(0x187)](_0x49ccb9);else for(const _0x2716e1 of _0x49ccb9){const _0x3c0961=await exchange[_0x5c442d(0x25d)](_0x2716e1);_0x36a29a[_0x2716e1]=_0x3c0961;}return _0x36a29a;}catch(_0x1d7836){throw _0x1d7836;}}async function watchTransactions(){const _0xd56996=_0x54eec5;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x17c896=await getCoins(),[_0x374114,_0x573e3e]=_0x17c896;let _0x3c0362=[];currentCoins[_0xd56996(0x178)](_0x20713b=>{const _0x3d7d77=_0xd56996,_0x394dd3=_0x374114[_0x3d7d77(0x201)](_0x33ed91=>_0x33ed91[_0x3d7d77(0x19b)]==_0x20713b[_0x3d7d77(0x19b)]);if(_0x394dd3){if(_0x20713b[_0x3d7d77(0x1fd)]!=_0x394dd3[_0x3d7d77(0x1fd)]){let _0x465676;if(_0x20713b[_0x3d7d77(0x19b)]!=config[_0x3d7d77(0x140)]){const _0x29f973=global['ticker'][noslash(_0x20713b[_0x3d7d77(0x23d)])];_0x465676=_0x20713b[_0x3d7d77(0x161)]?0x1/_0x29f973:_0x29f973;}else _0x465676=0x1;_0x3c0362['push']({'coin':_0x20713b['coin'],'symbol':_0x20713b[_0x3d7d77(0x23d)],'price':_0x465676,'number':Number(formatResult(_0x394dd3[_0x3d7d77(0x1fd)]-_0x20713b[_0x3d7d77(0x1fd)],0x8)),'basecoinvalue':_0x465676*(_0x394dd3[_0x3d7d77(0x1fd)]-_0x20713b[_0x3d7d77(0x1fd)])});}}});if(_0x3c0362[_0xd56996(0x200)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger['debug'](_0xd56996(0x16c)+_0x3c0362[0x0]['basecoinvalue']+_0xd56996(0x2c3)+lastFees['highest']);if(lastFees[_0xd56996(0x1f9)]==0x0||Math['abs'](_0x3c0362[0x0][_0xd56996(0x278)])>lastFees['highest']){delete _0x3c0362[0x0][_0xd56996(0x23d)],delete _0x3c0362[0x0][_0xd56996(0x278)];let _0x3f29bc=[],_0x2b8aac=[...config[_0xd56996(0x1f8)]]||[],_0x15f86b=config[_0xd56996(0x1f8)];_0x2b8aac[_0xd56996(0x245)]((_0x1ec6d7,_0x2d09bc)=>_0x1ec6d7[_0xd56996(0x237)]>_0x2d09bc[_0xd56996(0x237)]?-0x1:_0x2d09bc[_0xd56996(0x237)]>_0x1ec6d7[_0xd56996(0x237)]?0x1:0x0);const _0x21890f=getDate();if(_0x2b8aac[0x0]){const _0x283247=fns[_0xd56996(0x218)](_0x2b8aac[0x0]['date'],'yyyy/MM/dd',new Date()),_0x3e4803=fns[_0xd56996(0x218)](_0x21890f,_0xd56996(0x23e),new Date());if(fns[_0xd56996(0x2a1)](_0x283247,_0x3e4803)){_0x3f29bc=_0x2b8aac[0x0][_0xd56996(0x26e)];const _0x27613d=_0x3f29bc['find'](_0x341bad=>_0x341bad[_0xd56996(0x19b)]==_0x3c0362[0x0]['coin']);_0x27613d?(_0x27613d['number']+=_0x3c0362[0x0]['number'],_0x27613d[_0xd56996(0x1fd)]==0x0&&(_0x3f29bc=_0x3f29bc[_0xd56996(0x19f)](_0x414d67=>{return _0x414d67['coin']!=_0x3c0362[0x0]['coin'];}))):_0x3f29bc[_0xd56996(0x203)](_0x3c0362[0x0]);const _0x26c7b4=_0x15f86b[_0xd56996(0x201)](_0x3a83cb=>_0x3a83cb[_0xd56996(0x237)]==_0x21890f);_0x26c7b4['changes']=_0x3f29bc;}else _0x15f86b[_0xd56996(0x203)]({'date':_0x21890f,'changes':[_0x3c0362[0x0]]});}const _0x43f02a=_0x15f86b[_0xd56996(0x201)](_0x217fdf=>_0x217fdf[_0xd56996(0x237)]==_0x21890f);if(_0x43f02a){let _0x2cf067=!![];_0x43f02a[_0xd56996(0x26e)][_0xd56996(0x178)](_0x88a913=>{const _0x435b35=_0xd56996;if(_0x88a913[_0x435b35(0x1fd)]!=0x0)_0x2cf067=![];}),_0x2cf067&&(_0x15f86b=_0x15f86b[_0xd56996(0x19f)](_0xa17f7b=>{const _0x366d82=_0xd56996;return _0xa17f7b[_0x366d82(0x237)]!=_0x21890f;}));}let _0x357b11=dbConfig[_0xd56996(0x1fc)]('bot')[_0xd56996(0x201)]({'botID':botID})[_0xd56996(0x29b)]();_0x357b11&&(dbConfig[_0xd56996(0x1fc)](_0xd56996(0x2c0))['find']({'botID':botID})[_0xd56996(0x13c)]({'liquidity':_0x15f86b})[_0xd56996(0x242)](),config[_0xd56996(0x1f8)]=_0x15f86b),logHistory(_0xd56996(0x19e),'Portfolio\x20change\x20detected:\x20'+Math[_0xd56996(0x1cd)](_0x3c0362[0x0][_0xd56996(0x1fd)])+'\x20'+_0x3c0362[0x0][_0xd56996(0x19b)]+'\x20'+(_0x3c0362[0x0][_0xd56996(0x1fd)]>0x0?_0xd56996(0x1b4):_0xd56996(0x2a9))+_0xd56996(0x28a)),proxyEmit('configuration',emittedConfiguration());}else logger[_0xd56996(0x1b8)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0xd56996(0x1cd)](_0x3c0362[0x0][_0xd56996(0x1fd)])+'\x20'+_0x3c0362[0x0]['coin']+'\x20'+(_0x3c0362[0x0][_0xd56996(0x1fd)]>0x0?_0xd56996(0x1b4):_0xd56996(0x2a9)));transactionDetected=!![];}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0xd56996(0x1cd)](_0x3c0362[0x0][_0xd56996(0x1fd)])+'\x20'+_0x3c0362[0x0][_0xd56996(0x19b)]+'\x20'+(_0x3c0362[0x0]['number']>0x0?_0xd56996(0x1b4):_0xd56996(0x2a9))+_0xd56996(0x18d));}currentCoins=_0x374114,currentCoinsAll=_0x573e3e,await sleep(watchTransactionsInterval);}catch(_0x4b16ee){if(!exchangeStopped)await handleError(_0x4b16ee,'watchTransactions()');}else await sleep(0x64);}}function _0x1c39(){const _0x375439=['-config.json','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','0\x20-\x20EXECUTION:\x20','<b>Bot\x20','apiKey','./config/','abs','DDoSProtection','\x20portfolio:</b>\x20\x0a\x0a','initclient','slice','netoffset','\x20has\x20a\x2024h\x20drop\x20of\x20','percentage','bots','AuthenticationError','(((.+)+)+)+$','toggleBotMode','writeFile','breakeven','Loading\x20completed','colorscheme','decrypt','resetHistory','min','balancing\x20resumes\x20when\x20cooldown\x20ends','Huobipro','net-basecoin','Limit\x20(high-margin)','format','running','settings','includes','\x20value','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','2\x20-\x20Orders\x20unlocked','enabled','\x20orders\x20in\x20less\x20than\x20','/USD','constructor','recovery','change','USDT','Reset\x20|\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','no\x20open\x20orders','Net\x20effect','replace','eur','liquidity','highest','limit-high','\x20minutes\x20-\x20','get','number','128391HRTczb','LOCKED','length','find','event-history','push','getStartingBalances','secure','data','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','existsSync','1679235lzlwPZ','************','Net\x20','Resetting\x20coin\x20results:\x20','apiPassword','balances','amountToPrecision','Waited\x20','net-fiat','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Market','BNB/','limits','BUSD','ticker','parse','type','order','toUpperCase','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','fetchOpenOrders','191891NWgUpt','getPortfolio(2)','headless','loadMarkets','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','24tvqhCh','sha256','fee','amount','\x20blocked\x20your\x20API','restart','Unfilled\x20order(s)\x20canceled\x20after\x20','last','\x20order:\x20','Transaction\x20detection\x20blocked','split','\x20exchange','orderstatus','sells','getHours','cancel','timeout','toFixed','1\x20-\x20Validate\x20orders:\x20','currency','date','recreate','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Headless:\x20','storeConfiguration','cancelOrders()','symbol','yyyy/MM/dd','getCoins()','total','2767914JDWlaa','write','shift','sortBy','sort','search','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','substring','coins','botname','showname','/EUR','Insufficient\x20funds\x20to\x20execute\x20order:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','usd','Huobi','autoliquidity','canceled','argv','recent20','ETH','unlinkSync','log','Executing\x20exchange\x20reload','market','parseISO','\x20-\x20pausing\x20bot\x20for\x20','kill','fetchTicker','Cex','filled',':\x20Bot\x20','password','startsWith','average','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','has','001','none','Invalid\x20symbol:\x20','add','Resetting\x20bot\x20history','fromCodePoint','2208680jFAzef','differenceInSeconds','changes','portfolio','realized','target','set','emojisell','splice','Bot\x20','full','Cooldown\x20ended\x20-\x20balancing\x20resumed','basecoinvalue','page','***','TUSD','OnMaintenance','Error:\x20Invalid\x20argument\x20','getOpenOrders()','emojibuy','fetchBalance','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','/backup/','defaults','Failed\x20to\x20load\x20coin\x20data\x20for\x20','MIN_NOTIONAL','leftTxt','must\x20be\x20greater\x20than\x20minimum\x20amount','ORDERS.LOCKED','4bKPiDS','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','test','starting-balance-','initial','./logs/','-------------------------------\x0a','delta','236562dSZExA','time','<pre>','bot-','Transaction\x20detection\x20unblocked','random','\x20minutes','emitHistory','placeOrder','privateKey','value','showConfig','getMonth','pro','uncaughtException','loadSymbols()','isEqual','Bybit','-performance.json','toString','Order\x20amount\x20is\x20invalid:\x20','fiat','open','botID','removed','\x20-\x20bot\x20not\x20started','\x20:\x20','performance','sell','fees','USD','rightTxt','startnumber','RateLimitExceeded','2\x20-\x20Validate\x20orders:\x20','\x20network\x20error','datetime','exchange','fetchClosedOrders','BTC','remove','InsufficientFunds','ongoing','watchTrades','No\x20more\x20open\x20orders\x20-\x20','PermissionDenied','2\x20-\x20handling\x20FILLED\x20order:\x20','bot','watchOrders','<b>','\x20|\x20highest\x20fee:\x20','\x20API\x20secret\x20is\x20invalid','EUR','PAXG','util','red_yellow_blue','API-key\x20format\x20invalid','excluded','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','remainingSymbols','cancelOrder','Trigger:\x20','error',':\x20timer\x20>','padStart','timeshift','status','final','toLowerCase','assign','send','orderId','Executed\x20','basecoin','Bitget','distribution','OrderNotFound','ask','apiSecret','-events.json','getPortfolio','exchange\x20not\x20reloaded','InvalidNonce','\x20closed\x20the\x20connection','limit-low','getPortfolio(1)','change24h','Unknown\x20error\x20occured','close','trade','\x20not\x20responding','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20/\x20','getSeconds','startprice','ordertype','BNB','createOrder','6KNmtJS','2983746NoHkvC','keys','storeFiat','Binance','cloneDeep','version','2\x20-\x20Handled\x20open\x20orders','reverse','openOrders','%\x20(','exchanges','spot','price','RSA-OAEP','closed','active','configuration-stored','Limit\x20(low-margin)','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Error\x20details:','configuration','startdate','\x20|\x20exchange:\x20','date-fns','floor','storeHeadless','Order\x20filled:\x20','UNLOCKED','coin-loading-progress','ccxt','forEach','getFullYear','Crypt','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','Cryptocom','ID:\x20','NetworkError','Avoiding\x20continuous\x20order\x20attempts','</pre>','\x20>\x20[DEBUG]\x20','cancelLoading','ExchangeError','getAllOrders()','\x20API\x20key\x20is\x20invalid','\x20change','fetchTickers','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','verbose','watchTrades()','Pausing\x20for\x20','args','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','initTickers()','\x20|\x20','getDate','limit','Invalid\x20quantity','getTime','fetchTickers()','onepagemode','Exception\x20thrown\x20in\x20','stringify','message','Saving\x20configuration','round','coin','Manual\x20balancing\x20required','Order\x20is\x20invalid:\x20','success','filter','cost','ORDERS.UNLOCKED','deleteHistoryAlerts','mkdirSync','logs','2.3.5','threshold','\x20hour','entries','\x20metrics:</b>\x20\x0a\x0a','timestamp','indexOf','offset','valid','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','UNLOCKING',',\x20must\x20be\x20a\x203\x20digit\x20number','event','buy','placeOrder()','added','2.5.0','-results.json','warning','debug','\x20exchange\x20error','join','side','progress','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Exchange','InvalidOrder','bb-secure.json','max','freeze','exec','ExchangeNotAvailable','cooldown','balancing\x20resumed'];_0x1c39=function(){return _0x375439;};return _0x1c39();}async function loadSymbols(){try{markets=await exchange['loadMarkets'](),allSymbols=[],Object['entries'](markets)['forEach'](_0x49a9f4=>{const _0xc4653b=_0x3db1;_0x49a9f4[0x1][_0xc4653b(0x169)]&&_0x49a9f4[0x1][_0xc4653b(0x165)]&&allSymbols[_0xc4653b(0x203)](_0x49a9f4[0x0]);});}catch(_0x4e36d){throw _0x4e36d;}}function validateSymbols(_0x1c6441){let _0x399c30=[];return _0x1c6441['forEach'](_0x59a18f=>{const _0x4a34be=_0x3db1;!allSymbols[_0x4a34be(0x1e7)](_0x59a18f)?logHistory(_0x4a34be(0x2cf),_0x4a34be(0x268)+_0x59a18f+_0x4a34be(0x1f3)):_0x399c30[_0x4a34be(0x203)](_0x59a18f);}),_0x399c30;}async function initclient(){const _0x311da6=_0x54eec5;proxyEmit(_0x311da6(0x16e),emittedConfiguration()),proxyEmit(_0x311da6(0x164),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x311da6(0x20e),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x3c4efa=getNormalizedPerformance();emitPerformance(_0x3c4efa),getStartingBalances(_0x3c4efa);}async function toggleBotMode(){const _0x4f8f5f=_0x54eec5;let _0x35014d=dbConfig['get'](_0x4f8f5f(0x2c0))[_0x4f8f5f(0x201)]({'botID':botID})[_0x4f8f5f(0x29b)]();if(_0x35014d){const _0x5bc34b=!_0x35014d[_0x4f8f5f(0x220)];dbConfig[_0x4f8f5f(0x1fc)](_0x4f8f5f(0x2c0))['find']({'botID':botID})[_0x4f8f5f(0x13c)]({'headless':_0x5bc34b})[_0x4f8f5f(0x242)](),config[_0x4f8f5f(0x220)]=_0x5bc34b,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2143d6=_0x54eec5;process[_0x2143d6(0x13d)]({'updatebotmanager':!![]},_0x32aedf=>{}),logger[_0x2143d6(0x1b8)](_0x2143d6(0x23a)+config['headless']);}async function loadCoins(_0x3d8edd){const _0x44f2a0=_0x54eec5;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5baf8b,_0x14304e=0x0,_0x240778=0x0;_0x3d8edd['forEach'](_0x262f13=>{const _0xb15a58=_0x3db1;loading[_0xb15a58(0x2cc)]['push'](_0x262f13);}),loadingCanceled=![];let _0x17dc62=![];while(_0x5baf8b!=_0x3d8edd[_0x44f2a0(0x200)]+maxLoadingProgress){_0x5baf8b=loadingProgress,_0x3d8edd['forEach'](_0x575630=>{const _0x186f3b=_0x44f2a0;if(global[_0x186f3b(0x217)][noslash(_0x575630)]){loading[_0x186f3b(0x2cc)]=loading[_0x186f3b(0x2cc)][_0x186f3b(0x19f)](_0xf0781b=>_0xf0781b!=_0x575630);if(!watchedSymbols[_0x186f3b(0x1e7)](_0x575630))watchedSymbols[_0x186f3b(0x203)](_0x575630);_0x5baf8b++;}}),loading[_0x44f2a0(0x1bc)]=Math[_0x44f2a0(0x19a)](_0x5baf8b/(_0x3d8edd['length']+maxLoadingProgress)*0x64);loading[_0x44f2a0(0x1bc)]!=0x64&&(_0x240778>0x1e*0x5&&(loading[_0x44f2a0(0x233)]=!![],emitLoadingProgress()),_0x240778>0x78*0x5&&!_0x17dc62&&(_0x17dc62=!![],logHistory(_0x44f2a0(0x2cf),_0x44f2a0(0x284)+loading[_0x44f2a0(0x2cc)][_0x44f2a0(0x1ba)](',\x20')+_0x44f2a0(0x2aa)),logHistory(_0x44f2a0(0x2cf),_0x44f2a0(0x18b)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x36e063=_0x44f2a0;process[_0x36e063(0x13d)]({'stop':_0x36e063(0x228)},_0x123023=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x44f2a0(0x232)]=!![],emitLoadingProgress();break;}else _0x14304e!=loading['progress']&&(_0x14304e=loading['progress'],emitLoadingProgress()),_0x240778++,await sleep(0xc8);}_0x5baf8b==_0x3d8edd[_0x44f2a0(0x200)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x44f2a0(0x13d)]({'status':_0x44f2a0(0x1eb),'live':_0x44f2a0(0x1e5)},_0x3e8fc5=>{}),_0x17dc62&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x34adba=_0x54eec5;proxyEmit(_0x34adba(0x16e),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x392ea9=_0x54eec5;proxyEmit(_0x392ea9(0x176),loading);}async function getFiat(){const _0x348f4d=_0x54eec5;let _0x3e71aa=global[_0x348f4d(0x217)][stablecoins[_0x348f4d(0x1f7)][_0x348f4d(0x19b)]],_0x28d611=global[_0x348f4d(0x217)][stablecoins[_0x348f4d(0x24f)][_0x348f4d(0x19b)]];return{'eur':Number(_0x3e71aa),'usd':Number(_0x28d611)};}function capitalize(_0xc7a9f5){const _0x3f4ec8=_0x54eec5;return _0xc7a9f5['substring'](0x0,0x1)[_0x3f4ec8(0x21b)]()+_0xc7a9f5[_0x3f4ec8(0x248)](0x1);}function supportedExchanges(){const _0x321bcf=_0x54eec5,_0x1f78d0=['ws',_0x321bcf(0x187),_0x321bcf(0x25d),_0x321bcf(0x2bc),'watchOrders',_0x321bcf(0x2cd),_0x321bcf(0x158),_0x321bcf(0x21d),'fetchClosedOrders',_0x321bcf(0x280)];let _0x2dcc9c=[],_0x3878a6=[],_0x15b173=ccxt[_0x321bcf(0x29e)][_0x321bcf(0x164)];_0x15b173['forEach'](_0x71caaf=>{const _0xb85b0e=_0x321bcf;try{const _0xcc0727=new ccxt['pro'][_0x71caaf]();_0x3878a6[_0xb85b0e(0x203)](_0xcc0727);}catch(_0x15d095){}}),_0x3878a6['forEach'](_0x33de9e=>{const _0x49adce=_0x321bcf;let _0x48cf2b=0x0;_0x1f78d0[_0x49adce(0x178)](_0x1240dc=>{const _0x5aa691=_0x49adce;_0x1240dc in _0x33de9e[_0x5aa691(0x265)]&&_0x33de9e[_0x5aa691(0x265)][_0x1240dc]&&_0x48cf2b++;}),_0x48cf2b==_0x1f78d0[_0x49adce(0x200)]&&_0x2dcc9c[_0x49adce(0x203)](capitalize(_0x33de9e['id']));});let _0x43dff0=[];return _0x15b173[_0x321bcf(0x178)](_0x700237=>{const _0x4340d5=_0x321bcf;_0x700237=capitalize(_0x700237);if(!_0x2dcc9c[_0x4340d5(0x1e7)](_0x700237))_0x43dff0['push'](_0x700237);}),_0x2dcc9c;}function setStartDatePerformance(){const _0x5ae077=_0x54eec5;if(config&&config[_0x5ae077(0x1f8)][0x0][_0x5ae077(0x26e)][_0x5ae077(0x200)]!=0x0){const _0x2d9bdf=config[_0x5ae077(0x1f8)][0x0][_0x5ae077(0x26e)];dbPerformance['get'](_0x5ae077(0x206))['find']({'date':config['startdate']})[_0x5ae077(0x13c)]({'coins':_0x2d9bdf})[_0x5ae077(0x242)]();}}async function recreateCoinResults(){const _0x15bc4c=_0x54eec5;let _0x298922,_0x47e40c=[];try{const _0x8c038a=fns[_0x15bc4c(0x1e4)](fns[_0x15bc4c(0x25a)](config[_0x15bc4c(0x16f)][_0x15bc4c(0x1f6)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x568b54 of currentCoins){if(_0x568b54[_0x15bc4c(0x19b)]!=config[_0x15bc4c(0x140)]){let _0x2589b6=0x0,_0x597d23,_0x5c8ef3;_0x298922=await getAllEventOrders(_0x568b54['symbol']);if(_0x298922[_0x15bc4c(0x200)]>0x0)_0x298922[_0x15bc4c(0x178)](_0x465837=>{const _0x9e566c=_0x15bc4c,_0x54532b=_0x568b54[_0x9e566c(0x23d)][_0x9e566c(0x1e7)](config[_0x9e566c(0x140)]+'/');_0x47e40c[_0x9e566c(0x203)]({'datetime':_0x465837[_0x9e566c(0x2b5)],'coin':_0x568b54['coin'],'symbol':_0x568b54['symbol'],'side':_0x465837[_0x9e566c(0x1bb)],'reverse':_0x54532b,'amount':formatResult(_0x465837[_0x9e566c(0x25f)],0x8),'filled':formatResult(_0x465837[_0x9e566c(0x25f)],0x8),'price':formatResult(_0x465837['price'],0x8)}),_0x2589b6=_0x465837[_0x9e566c(0x1bb)]=='buy'?_0x2589b6+_0x465837['filled']:_0x2589b6-_0x465837[_0x9e566c(0x25f)];if(!_0x5c8ef3)_0x5c8ef3=_0x465837['price'];});_0x597d23=_0x568b54[_0x15bc4c(0x1fd)]-_0x2589b6;let _0x46856e;config[_0x15bc4c(0x1f8)][_0x15bc4c(0x178)](_0x1a020f=>{const _0x1fc97e=_0x15bc4c;!_0x46856e&&(_0x46856e=_0x1a020f[_0x1fc97e(0x26e)][_0x1fc97e(0x201)](_0x125e16=>_0x125e16['coin']==_0x568b54[_0x1fc97e(0x19b)]),_0x46856e&&(_0x597d23=_0x46856e['number'],_0x5c8ef3=_0x46856e[_0x1fc97e(0x166)]));});let _0x505d14=dbCoinResults[_0x15bc4c(0x1fc)](_0x15bc4c(0x249))[_0x15bc4c(0x201)]({'coin':_0x568b54[_0x15bc4c(0x19b)]})[_0x15bc4c(0x29b)]();_0x505d14={'coin':_0x568b54[_0x15bc4c(0x19b)],'number':_0x597d23,'breakeven':_0x5c8ef3,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x15bc4c(0x1fc)](_0x15bc4c(0x249))['find']({'coin':_0x568b54[_0x15bc4c(0x19b)]})[_0x15bc4c(0x13c)](_0x505d14)[_0x15bc4c(0x242)]();}}_0x47e40c[_0x15bc4c(0x245)]((_0x591125,_0x10a1a6)=>_0x591125[_0x15bc4c(0x2b5)]>_0x10a1a6[_0x15bc4c(0x2b5)]?0x1:_0x10a1a6[_0x15bc4c(0x2b5)]>_0x591125['datetime']?-0x1:0x0);let _0x14dd69=0x0;for(let _0x457536 of _0x47e40c){await updateCoinResults(_0x457536,!![]);}}catch(_0x3e84f1){await handleError(_0x3e84f1,'recreateCoinResults()');}}async function getAllEventOrders(_0x34e3f1){const _0x5f4adc=_0x54eec5;let _0x4ebbb1=[],_0x24be04=dbLogs[_0x5f4adc(0x1fc)](_0x5f4adc(0x1a4))[_0x5f4adc(0x19f)](_0x3eaa0a=>{const _0x30a51d=_0x5f4adc,_0x6f3589=_0x3eaa0a['event'][_0x30a51d(0x13b)]();return _0x6f3589[_0x30a51d(0x1e7)](_0x34e3f1['toLowerCase']())&&(_0x6f3589['includes']('market')&&_0x6f3589[_0x30a51d(0x1e7)]('order')||_0x6f3589[_0x30a51d(0x1e7)](_0x30a51d(0x25f))&&_0x6f3589['includes']('order'));})[_0x5f4adc(0x244)](_0x5f4adc(0x292))[_0x5f4adc(0x29b)]();return _0x24be04[_0x5f4adc(0x178)](_0x53d5bd=>{const _0x4bfdef=_0x5f4adc,_0x3111b7=_0x53d5bd[_0x4bfdef(0x1b1)][_0x4bfdef(0x1e7)](_0x4bfdef(0x2ad))?_0x4bfdef(0x2ad):_0x4bfdef(0x1b2),_0x1bed43=/#([0-9]|\.)+\s/i,_0x51a0e6=Number(_0x1bed43[_0x4bfdef(0x1c3)](_0x53d5bd[_0x4bfdef(0x1b1)])[0x0][_0x4bfdef(0x1d1)](0x1)),_0x1240ae=/@([0-9]|\.)+$/i,_0x5b63ed=Number(_0x1240ae['exec'](_0x53d5bd[_0x4bfdef(0x1b1)])[0x0][_0x4bfdef(0x1d1)](0x1));_0x4ebbb1['push']({'datetime':_0x53d5bd[_0x4bfdef(0x292)],'coin':symbolToCoin(_0x34e3f1),'symbol':_0x34e3f1,'side':_0x3111b7,'amount':_0x51a0e6,'filled':_0x51a0e6,'price':_0x5b63ed});}),_0x4ebbb1;}async function getAllOrders(_0x219e7a,_0x38d903){const _0x2f8745=_0x54eec5;let _0x20ef26=[];while(_0x38d903<exchange['milliseconds']()){const _0xb4ddf=0x1f4;try{const _0x42d25b=await exchange[_0x2f8745(0x2b7)](_0x219e7a,_0x38d903,_0xb4ddf);if(_0x42d25b[_0x2f8745(0x200)])_0x38d903=_0x42d25b[_0x42d25b[_0x2f8745(0x200)]-0x1][_0x2f8745(0x1aa)]+0x1,_0x20ef26=_0x20ef26['concat'](_0x42d25b);else break;}catch(_0xb7b835){await handleError(_0xb7b835,_0x2f8745(0x184),_0x219e7a);}}return _0x20ef26;}async function validate24hChanges(){const _0x439323=_0x54eec5;for(const _0x1f6208 of currentCoins){if(_0x1f6208[_0x439323(0x19b)]!=config[_0x439323(0x140)]){let _0x349447;_0x1f6208[_0x439323(0x161)]?_0x349447=formatResult((0x1/(global[_0x439323(0x1f0)][noslash(_0x1f6208[_0x439323(0x23d)])]/0x64+0x1)-0x1)*0x64,0x3):_0x349447=global[_0x439323(0x1f0)][noslash(_0x1f6208[_0x439323(0x23d)])],_0x349447<config[_0x439323(0x14d)]&&(logHistory(_0x439323(0x2cf),_0x1f6208['coin']+_0x439323(0x1d3)+_0x349447+'%'),logHistory(_0x439323(0x2cf),_0x439323(0x1c8)),logHistory('error',_0x439323(0x239)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x55c543,_0x1d8d7f){const _0x262868=_0x54eec5;if(!_0x55c543)return!![];const _0x2079db=_0x1d8d7f[_0x262868(0x22d)]('.'),_0xf0d07d=_0x55c543['split']('.');for(var _0x1c0590=0x0;_0x1c0590<_0xf0d07d[_0x262868(0x200)];_0x1c0590++){const _0x7a1ef5=~~_0xf0d07d[_0x1c0590],_0x414c8f=~~_0x2079db[_0x1c0590];if(_0x7a1ef5<_0x414c8f)return!![];if(_0x7a1ef5>_0x414c8f)return![];}return![];}async function oneTimeMigration(){const _0x3f7c2a=_0x54eec5;let _0xd63c2a=dbLogs['get'](_0x3f7c2a(0x15f))[_0x3f7c2a(0x29b)]();if(isOlderVersion(_0xd63c2a,_0x3f7c2a(0x1a5))){let _0x552a6d=[];const _0x2adbd4=dbLogs['get']('logs')[_0x3f7c2a(0x29b)]();_0x2adbd4['forEach'](_0x2dc74c=>{const _0x2631bc=_0x3f7c2a;_0x552a6d[_0x2631bc(0x203)]({'time':_0x2dc74c[_0x2631bc(0x292)],'type':_0x2dc74c[_0x2631bc(0x219)],'event':_0x2dc74c[_0x2631bc(0x1b1)]});}),dbLogs[_0x3f7c2a(0x1fc)](_0x3f7c2a(0x1a4))['assign'](_0x552a6d)[_0x3f7c2a(0x242)]();}let _0x17d073=dbConfig['get'](_0x3f7c2a(0x15f))[_0x3f7c2a(0x29b)]();if(isOlderVersion(_0x17d073,'2.3.5')){let _0x240410=dbConfig['get'](_0x3f7c2a(0x2c0))[_0x3f7c2a(0x201)]({'botID':botID})[_0x3f7c2a(0x29b)]();if(_0x240410){let _0x32a667=[];_0x240410[_0x3f7c2a(0x26f)][_0x3f7c2a(0x178)](_0x56ab78=>{const _0x1c3f02=_0x3f7c2a;_0x32a667['push']({'coin':_0x56ab78[_0x1c3f02(0x19b)],'number':_0x56ab78[_0x1c3f02(0x2b1)],'price':_0x56ab78[_0x1c3f02(0x155)]}),delete _0x56ab78[_0x1c3f02(0x2b1)],delete _0x56ab78[_0x1c3f02(0x155)];});if(_0x32a667['length']!==0x0)fs[_0x3f7c2a(0x1d9)](configbackuppath+(_0x3f7c2a(0x28c)+botID+'.json'),JSON[_0x3f7c2a(0x197)](_0x32a667,null,0x4),function(_0x4e761a){if(_0x4e761a){}});const _0x42f420=(_0x5336bd,_0x1ad84d)=>{const _0x165b9a=_0x3f7c2a;let _0x107b5e=[];_0x1ad84d[_0x165b9a(0x178)](_0x1bb4e2=>{const _0x105525=_0x165b9a,_0x4fc9ca=_0x5336bd[_0x105525(0x201)](_0x2627f5=>_0x2627f5[_0x105525(0x19b)]==_0x1bb4e2[_0x105525(0x19b)]);if(!_0x4fc9ca)_0x107b5e['push'](_0x1bb4e2);});let _0x20321d=[];return _0x5336bd['forEach'](_0xcb9ffa=>{const _0x23b54c=_0x165b9a,_0x2f63f9=_0x1ad84d[_0x23b54c(0x201)](_0x4858b3=>_0x4858b3['coin']==_0xcb9ffa[_0x23b54c(0x19b)]);if(!_0x2f63f9||_0x2f63f9['number']==0x0&&_0xcb9ffa[_0x23b54c(0x1fd)]!=0x0)_0x20321d[_0x23b54c(0x203)](_0xcb9ffa);}),{'missingDay1':_0x107b5e,'notInDay2':_0x20321d};},_0x43249e=dbPerformance['get'](_0x3f7c2a(0x206))[_0x3f7c2a(0x15e)]()[_0x3f7c2a(0x29b)]();if(_0x43249e[_0x3f7c2a(0x200)]>0x1){const {missingDay1:_0x25b8ff,notInDay2:_0x215fd9}=_0x42f420(_0x32a667,_0x43249e[0x1]['coins']);_0x32a667=[..._0x32a667,..._0x25b8ff],_0x215fd9[_0x3f7c2a(0x178)](_0xd8d101=>{const _0x10c83b=_0x3f7c2a;let _0x53bbf6=_0x32a667['findIndex'](_0x2f2c30=>_0x2f2c30['coin']==_0xd8d101[_0x10c83b(0x19b)]);_0x53bbf6!=-0x1&&_0x32a667[_0x10c83b(0x274)](_0x53bbf6,0x1);});}_0x32a667[_0x3f7c2a(0x245)]((_0x1a3a07,_0x2657b5)=>_0x1a3a07['coin']>_0x2657b5[_0x3f7c2a(0x19b)]?0x1:_0x2657b5['coin']>_0x1a3a07[_0x3f7c2a(0x19b)]?-0x1:0x0);let _0x4e29e2=[{'date':_0x240410[_0x3f7c2a(0x16f)],'changes':_0x32a667}];_0x43249e[_0x3f7c2a(0x200)]>0x2&&_0x43249e[_0x3f7c2a(0x178)]((_0x5115ed,_0x25c2bc)=>{const _0x298746=_0x3f7c2a;if(_0x25c2bc>0x0&&_0x25c2bc<_0x43249e[_0x298746(0x200)]-0x1){const {missingDay1:_0xf2eab5,notInDay2:_0x3b5bac}=_0x42f420(_0x43249e[_0x25c2bc][_0x298746(0x249)],_0x43249e[_0x25c2bc+0x1][_0x298746(0x249)]);_0x32a667=[],(_0xf2eab5[_0x298746(0x200)]!=0x0||_0x3b5bac[_0x298746(0x200)]!=0x0)&&(_0xf2eab5[_0x298746(0x200)]!=0x0&&_0x32a667[_0x298746(0x203)](..._0xf2eab5),_0x3b5bac[_0x298746(0x200)]!=0x0&&(_0x3b5bac['forEach'](_0x2628cd=>{_0x2628cd['number']=-_0x2628cd['number'];}),_0x32a667['push'](..._0x3b5bac)),_0x32a667[_0x298746(0x245)]((_0x13d01f,_0x228eb4)=>_0x13d01f[_0x298746(0x19b)]>_0x228eb4[_0x298746(0x19b)]?0x1:_0x228eb4[_0x298746(0x19b)]>_0x13d01f[_0x298746(0x19b)]?-0x1:0x0),_0x4e29e2[_0x298746(0x203)]({'date':_0x43249e[_0x25c2bc+0x1][_0x298746(0x237)],'changes':_0x32a667}));}}),dbConfig['get'](_0x3f7c2a(0x2c0))[_0x3f7c2a(0x201)]({'botID':botID})['assign']({..._0x240410,'liquidity':_0x4e29e2})[_0x3f7c2a(0x242)]();}}if(isOlderVersion(_0x17d073,'2.6.0')){let _0x34a7f2=dbConfig[_0x3f7c2a(0x1fc)](_0x3f7c2a(0x2c0))[_0x3f7c2a(0x201)]({'botID':botID})['value']();if(_0x34a7f2){const _0x292f42=_0x34a7f2[_0x3f7c2a(0x2b6)],_0x2eb16d=_0x292f42?capitalize(_0x292f42):_0x3f7c2a(0x15d);dbConfig['get']('bot')[_0x3f7c2a(0x201)]({'botID':botID})[_0x3f7c2a(0x13c)]({'exchange':_0x2eb16d})[_0x3f7c2a(0x242)]();}}let _0x3677d7=dbPerformance[_0x3f7c2a(0x1fc)](_0x3f7c2a(0x15f))[_0x3f7c2a(0x29b)]();isOlderVersion(_0x3677d7,'2.3.5')&&setStartDatePerformance();let _0x5edc03=dbCoinResults[_0x3f7c2a(0x1fc)](_0x3f7c2a(0x15f))[_0x3f7c2a(0x29b)]();if(isOlderVersion(_0x5edc03,_0x3f7c2a(0x1b5))){let _0x186fe7=dbCoinResults['get'](_0x3f7c2a(0x249))['value']();if(_0x186fe7[_0x3f7c2a(0x200)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4fd347=_0x54eec5;dbConfig[_0x4fd347(0x272)](_0x4fd347(0x15f),serverversion)[_0x4fd347(0x242)](),dbPerformance[_0x4fd347(0x272)](_0x4fd347(0x15f),serverversion)[_0x4fd347(0x242)](),dbLogs[_0x4fd347(0x272)](_0x4fd347(0x15f),serverversion)[_0x4fd347(0x242)](),dbCoinResults[_0x4fd347(0x272)](_0x4fd347(0x15f),serverversion)[_0x4fd347(0x242)]();}function getConfiguration(_0xe62ef5){const _0xbc41c2=_0x54eec5;let _0x23f041=dbConfig[_0xbc41c2(0x1fc)](_0xbc41c2(0x2c0))[_0xbc41c2(0x201)]({'botID':_0xe62ef5})[_0xbc41c2(0x29b)]();if(_0x23f041){let _0x571f4a=![];typeof _0x23f041[_0xbc41c2(0x1a6)]=='string'&&(_0x23f041={..._0x23f041,'threshold':Number(_0x23f041[_0xbc41c2(0x1a6)])},_0x571f4a=!![]),_0x23f041[_0xbc41c2(0x14d)]==undefined&&(_0x23f041={..._0x23f041,'change24h':-0x14},_0x571f4a=!![]),_0x23f041[_0xbc41c2(0x2a6)]==undefined&&(_0x23f041={..._0x23f041,'fiat':_0xbc41c2(0x2af)},_0x571f4a=!![]),_0x23f041[_0xbc41c2(0x195)]==undefined&&(_0x23f041={..._0x23f041,'onepagemode':settings['onepagemode']},_0x571f4a=!![]),_0x23f041['colorscheme']==undefined&&(_0x23f041={..._0x23f041,'colorscheme':'red_yellow_blue'},_0x571f4a=!![]),_0x23f041[_0xbc41c2(0x251)]==undefined&&(_0x23f041={..._0x23f041,'autoliquidity':!![]},_0x571f4a=!![]),_0x571f4a&&(_0x23f041={'botID':_0x23f041[_0xbc41c2(0x2a8)],'exchange':_0x23f041['exchange'],'apiKey':_0x23f041[_0xbc41c2(0x1cb)],'apiSecret':_0x23f041[_0xbc41c2(0x145)],'apiPassword':_0x23f041[_0xbc41c2(0x20d)],'basecoin':_0x23f041[_0xbc41c2(0x140)],'botname':_0x23f041['botname'],'showname':_0x23f041[_0xbc41c2(0x24b)],'threshold':_0x23f041['threshold'],'ordertype':_0x23f041[_0xbc41c2(0x156)],'timeout':_0x23f041['timeout'],'fiat':_0x23f041[_0xbc41c2(0x2a6)],'startdate':_0x23f041['startdate'],'recreate':_0x23f041[_0xbc41c2(0x238)],'timeshift':_0x23f041['timeshift'],'onepagemode':_0x23f041[_0xbc41c2(0x195)],'headless':_0x23f041[_0xbc41c2(0x220)],'cooldown':_0x23f041[_0xbc41c2(0x1c5)],'change24h':_0x23f041[_0xbc41c2(0x14d)],'emojibuy':_0x23f041[_0xbc41c2(0x27f)],'emojisell':_0x23f041[_0xbc41c2(0x273)],'colorscheme':_0x23f041[_0xbc41c2(0x1dc)],'portfolio':_0x23f041[_0xbc41c2(0x26f)],'autoliquidity':_0x23f041['autoliquidity'],'liquidity':_0x23f041[_0xbc41c2(0x1f8)],'openOrders':_0x23f041[_0xbc41c2(0x162)]},dbConfig['get'](_0xbc41c2(0x2c0))['remove']()[_0xbc41c2(0x242)](),dbConfig[_0xbc41c2(0x1fc)](_0xbc41c2(0x2c0))[_0xbc41c2(0x203)](_0x23f041)[_0xbc41c2(0x242)]());}else _0x23f041={'botID':_0xe62ef5,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0xbc41c2(0x275)+_0xe62ef5,'showname':![],'threshold':0x3,'ordertype':_0xbc41c2(0x259),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0xbc41c2(0x2d2)],'onepagemode':settings[_0xbc41c2(0x195)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xbc41c2(0x2c8),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x23f041;}function emittedConfiguration(){const _0x4c67a6=_0x54eec5;let _0x51ba12;if(config['apiKey']=='')_0x51ba12={...config,'configstate':_0x4c67a6(0x28d)};else config[_0x4c67a6(0x1cb)]==_0x4c67a6(0x27a)?_0x51ba12={...config,'configstate':_0x4c67a6(0x1ef)}:(_0x51ba12={...config,'apiKey':'************','apiSecret':_0x4c67a6(0x20a)},config[_0x4c67a6(0x20d)]&&(_0x51ba12[_0x4c67a6(0x20d)]='************'));return _0x51ba12;}function getSettings(){const _0x141d5d=_0x54eec5;return dbSettings[_0x141d5d(0x1fc)](_0x141d5d(0x1e6))['value']();}function getSecure(){const _0x37b412=_0x54eec5;return dbSecure['get'](_0x37b412(0x205))['value']()||{};}function updateTimeshift(_0x37e9f6){const _0xa916ca=_0x54eec5;let _0x2cf8ba=dbConfig[_0xa916ca(0x1fc)](_0xa916ca(0x2c0))[_0xa916ca(0x201)]({'botID':botID})[_0xa916ca(0x29b)]();_0x2cf8ba&&dbConfig[_0xa916ca(0x1fc)](_0xa916ca(0x2c0))[_0xa916ca(0x201)]({'botID':botID})[_0xa916ca(0x13c)]({'timeshift':_0x37e9f6})['write'](),config[_0xa916ca(0x2d2)]=_0x37e9f6,proxyEmit(_0xa916ca(0x16e),emittedConfiguration());}function updateOnepagemode(_0x11f7bd){const _0x6110a5=_0x54eec5;let _0x19827f=dbConfig['get'](_0x6110a5(0x2c0))['find']({'botID':botID})[_0x6110a5(0x29b)]();_0x19827f&&dbConfig[_0x6110a5(0x1fc)](_0x6110a5(0x2c0))[_0x6110a5(0x201)]({'botID':botID})[_0x6110a5(0x13c)]({'onepagemode':_0x11f7bd})[_0x6110a5(0x242)](),config[_0x6110a5(0x195)]=_0x11f7bd,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x46b9e3){const _0x15e3ea=_0x54eec5;logger[_0x15e3ea(0x1b8)](_0x15e3ea(0x199));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x15e3ea(0x1b8)](_0x15e3ea(0x22c));let _0x51248b=![],_0x2a59e4=![],_0x10c7cb=[];_0x46b9e3[_0x15e3ea(0x26f)][_0x15e3ea(0x178)](_0x3c0fb8=>{const _0x2ad991=_0x15e3ea;if(!_0x3c0fb8[_0x2ad991(0x2ca)]&&_0x3c0fb8[_0x2ad991(0x19b)]!=_0x46b9e3[_0x2ad991(0x140)])_0x10c7cb['push'](_0x3c0fb8[_0x2ad991(0x23d)]);}),_0x10c7cb[_0x15e3ea(0x178)](_0x479b70=>{const _0x4192cc=_0x15e3ea,_0xe089a2=currentCoins[_0x4192cc(0x201)](_0x51f007=>_0x51f007[_0x4192cc(0x23d)]==_0x479b70);!_0xe089a2&&(_0x51248b=!![]);}),currentCoins['forEach'](_0x12e259=>{const _0x1b2542=_0x15e3ea;if(_0x12e259['coin']!=config[_0x1b2542(0x140)]){const _0x35b325=_0x10c7cb['find'](_0x3232ba=>_0x3232ba==_0x12e259['symbol']);!_0x35b325&&(_0x51248b=!![]);}}),_0x46b9e3['portfolio'][_0x15e3ea(0x178)](_0x1b3f4d=>{const _0x27eab8=_0x15e3ea,_0x5443a7=config[_0x27eab8(0x26f)]['find'](_0x5ebb8f=>_0x5ebb8f[_0x27eab8(0x19b)]==_0x1b3f4d[_0x27eab8(0x19b)]);if(_0x5443a7&&_0x1b3f4d[_0x27eab8(0x1ac)]!=_0x5443a7[_0x27eab8(0x1ac)])_0x2a59e4=!![];});let _0x5678cc=dbConfig[_0x15e3ea(0x1fc)](_0x15e3ea(0x2c0))[_0x15e3ea(0x201)]({'botID':botID})[_0x15e3ea(0x29b)]();_0x46b9e3={..._0x46b9e3,'apiKey':crypt[_0x15e3ea(0x1dd)](secure[_0x15e3ea(0x29a)],_0x46b9e3[_0x15e3ea(0x1cb)])[_0x15e3ea(0x198)],'apiSecret':crypt[_0x15e3ea(0x1dd)](secure[_0x15e3ea(0x29a)],_0x46b9e3[_0x15e3ea(0x145)])[_0x15e3ea(0x198)]};_0x46b9e3[_0x15e3ea(0x20d)]&&(_0x46b9e3[_0x15e3ea(0x20d)]=crypt[_0x15e3ea(0x1dd)](secure['privateKey'],_0x46b9e3['apiPassword'])[_0x15e3ea(0x198)]);let _0x21b540=![];if(_0x5678cc){_0x46b9e3[_0x15e3ea(0x1cb)]==_0x15e3ea(0x20a)?_0x46b9e3[_0x15e3ea(0x1cb)]=config[_0x15e3ea(0x1cb)]:_0x21b540=!![];_0x46b9e3['apiSecret']==_0x15e3ea(0x20a)?_0x46b9e3[_0x15e3ea(0x145)]=config['apiSecret']:_0x21b540=!![];if(_0x46b9e3[_0x15e3ea(0x20d)]==_0x15e3ea(0x20a))_0x46b9e3[_0x15e3ea(0x20d)]=config[_0x15e3ea(0x20d)];else{if(_0x46b9e3[_0x15e3ea(0x20d)])_0x21b540=!![];}dbConfig[_0x15e3ea(0x1fc)](_0x15e3ea(0x2c0))[_0x15e3ea(0x201)]({'botID':botID})[_0x15e3ea(0x13c)](_0x46b9e3)['write']();}else dbConfig['get'](_0x15e3ea(0x2c0))[_0x15e3ea(0x203)](_0x46b9e3)[_0x15e3ea(0x242)](),_0x21b540=!![],process['send']({'status':_0x15e3ea(0x1eb),'live':_0x15e3ea(0x1e5)},_0x4cc5cd=>{});process[_0x15e3ea(0x13d)]({'botname':_0x46b9e3[_0x15e3ea(0x24a)]},_0x3de656=>{}),config={..._0x46b9e3},updateBotManager(),proxyEmit(_0x15e3ea(0x16a)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x21b540)await reset(!![]);else _0x51248b||_0x2a59e4?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x15e3ea(0x1b8)](_0x15e3ea(0x295));}async function storeHeadless(_0x5e0027){const _0x4e97a4=_0x54eec5,_0x56808e={...config,'headless':_0x5e0027[_0x4e97a4(0x220)]};let _0x24eb97=dbConfig[_0x4e97a4(0x1fc)]('bot')['find']({'botID':botID})[_0x4e97a4(0x29b)]();_0x24eb97&&dbConfig[_0x4e97a4(0x1fc)]('bot')[_0x4e97a4(0x201)]({'botID':botID})[_0x4e97a4(0x13c)](_0x56808e)[_0x4e97a4(0x242)](),config={..._0x56808e},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0xab7f8c){const _0x276c19=_0x54eec5,_0x110617={...config,'fiat':_0xab7f8c};let _0x32a398=dbConfig[_0x276c19(0x1fc)](_0x276c19(0x2c0))[_0x276c19(0x201)]({'botID':botID})[_0x276c19(0x29b)]();_0x32a398&&dbConfig[_0x276c19(0x1fc)]('bot')[_0x276c19(0x201)]({'botID':botID})[_0x276c19(0x13c)](_0x110617)[_0x276c19(0x242)](),config={..._0x110617},proxyEmit(_0x276c19(0x16e),emittedConfiguration());}function resetHistory(){const _0x3f5cae=_0x54eec5;logger[_0x3f5cae(0x276)](_0x3f5cae(0x26a));try{if(fs[_0x3f5cae(0x208)](path[_0x3f5cae(0x1ba)](configpath,_0x3f5cae(0x294)+botID+_0x3f5cae(0x146))))fs[_0x3f5cae(0x256)](path['join'](configpath,_0x3f5cae(0x294)+botID+'-events.json'));if(fs[_0x3f5cae(0x208)](path[_0x3f5cae(0x1ba)](configpath,_0x3f5cae(0x294)+botID+_0x3f5cae(0x2a3))))fs[_0x3f5cae(0x256)](path[_0x3f5cae(0x1ba)](configpath,'bot-'+botID+_0x3f5cae(0x2a3)));if(fs['existsSync'](path[_0x3f5cae(0x1ba)](configpath,_0x3f5cae(0x294)+botID+_0x3f5cae(0x1b6))))fs['unlinkSync'](path[_0x3f5cae(0x1ba)](configpath,_0x3f5cae(0x294)+botID+_0x3f5cae(0x1b6)));}catch(_0x33cae5){if(_0x33cae5)logger[_0x3f5cae(0x276)]('Error\x20while\x20deleting\x20files:\x20',_0x33cae5);}const _0x193f7b=getDate();let _0x6deac6=[];currentCoins['forEach'](_0x5956ed=>{const _0x2ae180=_0x3f5cae;_0x6deac6[_0x2ae180(0x203)]({'coin':_0x5956ed['coin'],'number':_0x5956ed['number'],'price':_0x5956ed['last']});});let _0x18d63d=dbConfig[_0x3f5cae(0x1fc)](_0x3f5cae(0x2c0))[_0x3f5cae(0x201)]({'botID':botID})['value']();_0x18d63d&&(dbConfig[_0x3f5cae(0x1fc)]('bot')['find']({'botID':botID})[_0x3f5cae(0x13c)]({'liquidity':[{'date':_0x193f7b,'changes':_0x6deac6}]})[_0x3f5cae(0x242)](),config[_0x3f5cae(0x1f8)]=[]),process['send']({'stop':'restart'},_0x470b2b=>{});}function noslash(_0x2a606f){const _0xc68dc8=_0x54eec5;return _0x2a606f[_0xc68dc8(0x1f6)]('/','');}function updateHighestFee(_0x13d114){const _0x514b6c=_0x54eec5;if(_0x13d114[_0x514b6c(0x161)]){let _0x5cd7bf={'filled':_0x13d114[_0x514b6c(0x25f)]*_0x13d114[_0x514b6c(0x166)],'amount':_0x13d114[_0x514b6c(0x25f)]*_0x13d114[_0x514b6c(0x166)],'side':_0x13d114[_0x514b6c(0x1bb)]==_0x514b6c(0x2ad)?'buy':_0x514b6c(0x2ad),'price':0x1/_0x13d114['price']};_0x13d114={..._0x13d114,..._0x5cd7bf};}const _0x2f098a=defaultFee*_0x13d114[_0x514b6c(0x25f)]*_0x13d114[_0x514b6c(0x166)];lastFees['recent20']['length']===0x14&&lastFees[_0x514b6c(0x254)]['shift'](),lastFees[_0x514b6c(0x254)]['push'](_0x2f098a),lastFees[_0x514b6c(0x1f9)]=Math[_0x514b6c(0x1c1)](...lastFees[_0x514b6c(0x254)]);}async function updateNumberCoinsCcxt(_0x39e557){const _0x5bb813=_0x54eec5;logger[_0x5bb813(0x1b8)](_0x5bb813(0x1c9)+_0x39e557[_0x5bb813(0x23d)]+_0x5bb813(0x18f)+_0x39e557['status']+_0x5bb813(0x18f)+_0x39e557[_0x5bb813(0x25f)]+_0x5bb813(0x153)+_0x39e557[_0x5bb813(0x226)]+_0x5bb813(0x18f)+_0x39e557['id']);let _0x547640=_0x39e557[_0x5bb813(0x2d3)],_0x13c6cd=![];currentCoins[_0x5bb813(0x178)](_0x57eb1f=>{const _0x3abc6a=_0x5bb813;_0x57eb1f[_0x3abc6a(0x23d)]==_0x39e557[_0x3abc6a(0x23d)]&&(_0x13c6cd=!![]);});if(!_0x13c6cd)return;const _0x27019a=currentCoins['find'](_0x175ca1=>_0x175ca1[_0x5bb813(0x23d)]==_0x39e557[_0x5bb813(0x23d)]),_0x58cbed=_0x3129ed=>{const _0x37c044=_0x5bb813;if(_0x27019a)_0x27019a[_0x37c044(0x22f)]=_0x3129ed;};if(_0x547640=='open')_0x58cbed('open');else{if(_0x547640==_0x5bb813(0x252)){_0x58cbed('canceled');const _0x1bcd88=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1bcd88,await getOpenOrders(),handleOpenOrders();}else{if(_0x547640==_0x5bb813(0x168)){let _0x282bbe=![];if(lastOrders)for(const _0x5ca01a of lastOrders){const _0x507d1c=0xc8,_0x106a38=0x1388;let _0x27c302=0x0;while(!_0x5ca01a[_0x5bb813(0x13e)]&&_0x27c302*_0x507d1c<_0x106a38){_0x27c302++,await sleep(_0x507d1c);}if(_0x27c302>0x0)logger[_0x5bb813(0x1b8)](_0x5bb813(0x210)+_0x27c302*_0x507d1c/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x5ca01a[_0x5bb813(0x13e)]==_0x39e557['id']){logger[_0x5bb813(0x1b8)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x39e557['id']),_0x282bbe=!![];if(_0x5ca01a[_0x5bb813(0x25f)]==0x0){logger[_0x5bb813(0x1b8)](_0x5bb813(0x2bf)+_0x39e557['id']);if(_0x39e557[_0x5bb813(0x263)])_0x5ca01a[_0x5bb813(0x166)]=_0x39e557[_0x5bb813(0x263)];else{if(_0x39e557[_0x5bb813(0x166)])_0x5ca01a[_0x5bb813(0x166)]=_0x39e557[_0x5bb813(0x166)];else{}}_0x5ca01a[_0x5bb813(0x25f)]=_0x39e557[_0x5bb813(0x25f)],updateHighestFee(_0x5ca01a),_0x58cbed('filled'),await validateOrders();if(lockOrders==ORDERS[_0x5bb813(0x1ff)]){const _0x4b8ccc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4b8ccc;}_0x5ca01a['fee']={'currency':_0x39e557['fee']?_0x39e557[_0x5bb813(0x225)][_0x5bb813(0x236)]:null,'cost':_0x39e557[_0x5bb813(0x225)]?_0x39e557[_0x5bb813(0x225)][_0x5bb813(0x1a0)]:0x0},await updateCoinResults(_0x5ca01a);}}}if(!_0x282bbe){logger[_0x5bb813(0x1b8)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x39e557['id']),_0x58cbed(_0x5bb813(0x25f));const _0x4a611e=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4a611e,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x418a62=JSON['parse'](lastBalances[_0x5bb813(0x26f)]);const _0x9acecc=_0x418a62['find'](_0xf9a60=>_0xf9a60[_0x5bb813(0x23d)]==_0x39e557[_0x5bb813(0x23d)]);if(_0x9acecc){if(_0x547640==_0x5bb813(0x2a7))_0x9acecc[_0x5bb813(0x22f)]=_0x9acecc[_0x5bb813(0x22f)]==_0x5bb813(0x25f)?_0x5bb813(0x25f):_0x5bb813(0x2a7);else{if(_0x547640=='canceled')_0x9acecc[_0x5bb813(0x22f)]=_0x9acecc[_0x5bb813(0x22f)]==_0x5bb813(0x25f)?_0x5bb813(0x25f):'canceled';else _0x547640==_0x5bb813(0x168)&&(_0x9acecc[_0x5bb813(0x22f)]=_0x5bb813(0x25f));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5bb813(0x197)](_0x418a62)},proxyEmit(_0x5bb813(0x20e),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x5a1bbf=_0x54eec5;await getOpenOrders();let _0xd65023=![];currentCoins[_0x5a1bbf(0x178)](_0x17ebcf=>{const _0x2a6dc7=_0x5a1bbf;_0xd65023=allOpenOrders[_0x2a6dc7(0x201)](_0x318444=>_0x318444[_0x2a6dc7(0x23d)]==_0x17ebcf[_0x2a6dc7(0x23d)]),_0x17ebcf[_0x2a6dc7(0x22f)]=_0xd65023?_0x2a6dc7(0x2a7):'none';});}async function getCoins(_0x5d205f=0x0,_0x151645=!![],_0xacebb6=config[_0x54eec5(0x140)]){const _0x1188fb=_0x54eec5;let _0x5e1fb8,_0x1972fe=[],_0x14997e=[],_0x42bc15=[];if(_0x5d205f)await sleep(_0x5d205f);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x5e1fb8=await exchange[_0x1188fb(0x280)](),mybalances=_0x5e1fb8['total'];for(const [_0x3a12d2,_0x333f04]of Object[_0x1188fb(0x1a8)](mybalances)){_0x42bc15[_0x1188fb(0x203)](_0x3a12d2);}config[_0x1188fb(0x26f)]['forEach'](_0x68e05=>{const _0x4d820f=_0x1188fb;!_0x42bc15[_0x4d820f(0x1e7)](_0x68e05[_0x4d820f(0x19b)])&&(mybalances[_0x68e05['coin']]=0x0);});if(_0xacebb6=='')for(const [_0x13ae4a,_0x8d835e]of Object[_0x1188fb(0x1a8)](mybalances)){_0x8d835e!=0x0&&_0x1972fe['push']({'coin':_0x13ae4a});}else{let _0x46da0e=![];for(const [_0x2b2cdc,_0x2988cb]of Object[_0x1188fb(0x1a8)](mybalances)){const _0x58a3f5=config[_0x1188fb(0x26f)][_0x1188fb(0x201)](_0xd30b05=>_0xd30b05[_0x1188fb(0x19b)]==_0x2b2cdc),_0x339793=_0x2b2cdc+'/'+_0xacebb6,_0x501fdc=_0xacebb6+'/'+_0x2b2cdc,_0x2eda89=currentCoins['find'](_0x1bc8fd=>_0x1bc8fd['coin']==_0x2b2cdc);_0x46da0e=![];if((_0x2988cb!=0x0||_0x58a3f5)&&(allSymbols[_0x1188fb(0x1e7)](_0x339793)||_0x2b2cdc==_0xacebb6))_0x1972fe['push']({'coin':_0x2b2cdc,'symbol':_0x339793,'reverse':![],'number':Math[_0x1188fb(0x1c1)](_0x2988cb+(_0x58a3f5&&_0x58a3f5['offset']||0x0),0x0),'orderstatus':_0x2eda89?_0x2eda89[_0x1188fb(0x22f)]:_0x1188fb(0x267)});else{if((_0x2988cb!=0x0||_0x58a3f5)&&allSymbols[_0x1188fb(0x1e7)](_0x501fdc))_0x1972fe[_0x1188fb(0x203)]({'coin':_0x2b2cdc,'symbol':_0x501fdc,'reverse':!![],'number':Math['max'](_0x2988cb+(_0x58a3f5&&_0x58a3f5[_0x1188fb(0x1ac)]||0x0),0x0),'orderstatus':_0x2eda89?_0x2eda89[_0x1188fb(0x22f)]:_0x1188fb(0x267)});else _0x58a3f5&&_0x1972fe[_0x1188fb(0x203)]({'coin':_0x58a3f5[_0x1188fb(0x19b)],'symbol':_0x58a3f5[_0x1188fb(0x23d)],'reverse':_0x58a3f5[_0x1188fb(0x161)],'number':0x0,'orderstatus':_0x1188fb(0x267)});}}}}catch(_0x706617){if(!_0x151645)handleErrorNoStop(_0x706617,_0x1188fb(0x23f));else await handleError(_0x706617,_0x1188fb(0x23f));}return _0x14997e=cloneDeep(_0x1972fe),_0x1972fe=_0x1972fe[_0x1188fb(0x19f)](_0xda9277=>{const _0x312140=_0x1188fb,_0x44dfe9=config[_0x312140(0x26f)][_0x312140(0x201)](_0x501523=>_0x501523[_0x312140(0x19b)]==_0xda9277[_0x312140(0x19b)]);return _0x44dfe9&&!_0x44dfe9[_0x312140(0x2ca)];}),[_0x1972fe,_0x14997e];}async function getCoinNumber(_0xf79cab){const _0x2f1190=_0x54eec5;let _0x4e5cfb;try{const _0x131453=await exchange['fetchBalance']();_0x4e5cfb=_0x131453[_0x2f1190(0x240)][_0xf79cab];}catch(_0x3e1339){await handleError(_0x3e1339,'getCoinNumber()');}return _0x4e5cfb;}async function getOpenOrders(){const _0x56e035=_0x54eec5;let _0x3280fd;allOpenOrders=[];try{for(const _0x19d8b5 of config['portfolio']){!_0x19d8b5['excluded']&&_0x19d8b5[_0x56e035(0x19b)]!=config[_0x56e035(0x140)]&&(_0x3280fd=await exchange[_0x56e035(0x21d)](_0x19d8b5[_0x56e035(0x23d)]),_0x3280fd[_0x56e035(0x200)]>0x0&&allOpenOrders[_0x56e035(0x203)](_0x3280fd[0x0]));}}catch(_0x421e87){await handleError(_0x421e87,_0x56e035(0x27e));}}async function handleOpenOrders(_0x4ebbc4=0x0){const _0x3de27e=_0x54eec5;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x3de27e(0x1ff)]&&allOrdersPlaced&&(_0x4ebbc4==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0x4ebbc4++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3de27e(0x1b8)](_0x3de27e(0x160)),validateOrders(_0x3de27e(0x1f4))));}async function testAPI(_0x5e53c2){const _0x23e438=_0x54eec5,_0x29bbcb=ccxt['pro'][_0x5e53c2['exchange'][_0x23e438(0x13b)]()],_0x8629f2=new _0x29bbcb({'apiKey':_0x5e53c2['apiKey'],'secret':_0x5e53c2[_0x23e438(0x145)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x23e438(0x165)}});if(_0x5e53c2[_0x23e438(0x20d)])_0x8629f2[_0x23e438(0x261)]=_0x5e53c2['apiPassword'];try{await _0x8629f2[_0x23e438(0x221)]();}catch(_0xca28d9){throw _0xca28d9;}}function cloneDeep(_0x4127fc){return JSON['parse'](JSON['stringify'](_0x4127fc));}async function getPortfolio(_0x291757){const _0x1855a4=_0x54eec5;let _0x4bf5e0=[],_0x4c48a1=[],_0x1af817=[],_0x3f9b15;if(_0x291757[_0x1855a4(0x1cb)]!==_0x1855a4(0x20a)||_0x291757[_0x1855a4(0x145)]!==_0x1855a4(0x20a)||_0x291757['apiPassword']&&_0x291757[_0x1855a4(0x20d)]!==_0x1855a4(0x20a)){if(config[_0x1855a4(0x2b6)]){if(_0x291757[_0x1855a4(0x1cb)]==_0x1855a4(0x20a))_0x291757[_0x1855a4(0x1cb)]=config[_0x1855a4(0x1cb)];if(_0x291757['apiSecret']==_0x1855a4(0x20a))_0x291757[_0x1855a4(0x145)]=config[_0x1855a4(0x145)];if(_0x291757[_0x1855a4(0x20d)]=='************')_0x291757[_0x1855a4(0x20d)]=config[_0x1855a4(0x20d)];try{await testAPI(_0x291757);}catch(_0x39c561){if(_0x39c561[_0x1855a4(0x2a4)]()[_0x1855a4(0x1e7)](_0x1855a4(0x1d6))){logger[_0x1855a4(0x1b8)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x1855a4(0x26f),![]);return;}else{handleError(_0x39c561,'getPortfolio(0)');return;}}}await initExchange(_0x291757['exchange'],_0x291757['apiKey'],_0x291757[_0x1855a4(0x145)],_0x291757[_0x1855a4(0x20d)]);try{await loadSymbols();}catch(_0x53c00b){if(_0x53c00b[_0x1855a4(0x2a4)]()[_0x1855a4(0x1e7)](_0x1855a4(0x1d6))){proxyEmit(_0x1855a4(0x26f),![]);return;}else{handleError(_0x53c00b,_0x1855a4(0x14c));return;}}const _0x5a77af=await getCoins(0x0,![],_0x291757[_0x1855a4(0x140)]);_0x1af817=cloneDeep(_0x5a77af[0x1]);}else _0x1af817=cloneDeep(currentCoinsAll);if(_0x291757[_0x1855a4(0x140)]=='')proxyEmit(_0x1855a4(0x26f),_0x1af817);else{_0x1af817['forEach'](_0x4c44a4=>{const _0x22a728=_0x1855a4;if(_0x4c44a4[_0x22a728(0x19b)]!=_0x291757['basecoin']&&allSymbols[_0x22a728(0x1e7)](_0x4c44a4[_0x22a728(0x23d)]))_0x4bf5e0['push'](_0x4c44a4[_0x22a728(0x23d)]);});if(_0x4bf5e0[_0x1855a4(0x200)]==0x0)logHistory(_0x1855a4(0x2cf),_0x1855a4(0x212));else{try{_0x4c48a1=await getTickers(_0x4bf5e0);}catch(_0x4ae7f4){if(_0x4ae7f4['toString']()[_0x1855a4(0x1e7)]('AuthenticationError')){proxyEmit(_0x1855a4(0x26f),![]);return;}else handleError(_0x4ae7f4,_0x1855a4(0x21f));}_0x1af817[_0x1855a4(0x178)](_0x4f37d5=>{const _0xccf0cc=_0x1855a4;_0x4f37d5['coin']!=_0x291757['basecoin']?_0x4c48a1[_0x4f37d5[_0xccf0cc(0x23d)]]?_0x3f9b15=_0x4f37d5['reverse']?0x1/_0x4c48a1[_0x4f37d5[_0xccf0cc(0x23d)]]['last']:_0x4c48a1[_0x4f37d5['symbol']][_0xccf0cc(0x22a)]:_0x3f9b15=0x0:_0x3f9b15=0x1,_0x4f37d5[_0xccf0cc(0x166)]=formatResult(_0x3f9b15,0x8);}),proxyEmit(_0x1855a4(0x26f),_0x1af817);}}}function truncateTradeAmount(_0x39ad2e,_0x4b15d9){const _0xadf0c2=_0x54eec5;let _0x54389f=0x0;try{_0x54389f=exchange[_0xadf0c2(0x20f)](_0x39ad2e,_0x4b15d9);}catch(_0x3e2c88){}return _0x54389f;}function checkMinimums(_0x5926d0){const _0x1b8f9a=_0x54eec5;let _0x187206=!![];const _0x4914ef=!_0x5926d0[_0x1b8f9a(0x161)]?markets[_0x5926d0[_0x1b8f9a(0x23d)]][_0x1b8f9a(0x215)][_0x1b8f9a(0x226)][_0x1b8f9a(0x1df)]:markets[_0x5926d0[_0x1b8f9a(0x23d)]]['limits'][_0x1b8f9a(0x1a0)][_0x1b8f9a(0x1df)],_0x39057d=!_0x5926d0[_0x1b8f9a(0x161)]?markets[_0x5926d0[_0x1b8f9a(0x23d)]]['limits']['cost'][_0x1b8f9a(0x1df)]:markets[_0x5926d0['symbol']][_0x1b8f9a(0x215)][_0x1b8f9a(0x226)][_0x1b8f9a(0x1df)],_0x1b0975=truncateTradeAmount(_0x5926d0[_0x1b8f9a(0x23d)],_0x5926d0[_0x1b8f9a(0x150)]);_0x5926d0['trade']=_0x1b0975;if(Math['abs'](_0x1b0975)<_0x4914ef)_0x187206=![];if(Math[_0x1b8f9a(0x1cd)](_0x1b0975)*_0x5926d0['last']<_0x39057d)_0x187206=![];if(_0x5926d0['side']==_0x1b8f9a(0x2ad)){let _0x56f6a1=config['portfolio'][_0x1b8f9a(0x201)](_0x3dc847=>_0x3dc847['coin']==_0x5926d0[_0x1b8f9a(0x19b)]);if(_0x56f6a1['offset']>0x0){if(Math[_0x1b8f9a(0x1cd)](_0x1b0975)>_0x5926d0[_0x1b8f9a(0x1fd)]-_0x56f6a1[_0x1b8f9a(0x1ac)])_0x187206=![];}else{if(Math['abs'](_0x1b0975)>_0x5926d0['number'])_0x187206=![];}}if(_0x5926d0[_0x1b8f9a(0x1bb)]==_0x1b8f9a(0x1b2)){let _0x30b814=config[_0x1b8f9a(0x26f)][_0x1b8f9a(0x201)](_0x59d745=>_0x59d745[_0x1b8f9a(0x19b)]==config[_0x1b8f9a(0x140)]),_0x2678b0=currentCoins['find'](_0x356757=>_0x356757[_0x1b8f9a(0x19b)]==config['basecoin']);if(_0x30b814[_0x1b8f9a(0x1ac)]>0x0){if(Math[_0x1b8f9a(0x1cd)](_0x1b0975)*_0x5926d0[_0x1b8f9a(0x22a)]>_0x2678b0[_0x1b8f9a(0x1fd)]-_0x30b814[_0x1b8f9a(0x1ac)])_0x187206=![];}else{if(Math[_0x1b8f9a(0x1cd)](_0x1b0975)*_0x5926d0[_0x1b8f9a(0x22a)]>_0x2678b0[_0x1b8f9a(0x1fd)])_0x187206=![];}}return _0x187206;}async function getBalances(_0x15b89f=!![]){const _0x265060=_0x54eec5;let _0x5290a3=0x0,_0x4f7afa;const _0x229cd3=config[_0x265060(0x1a6)];if(config[_0x265060(0x220)]&&config[_0x265060(0x14d)]<0x0)await validate24hChanges();currentCoins[_0x265060(0x178)](_0x45637b=>{const _0x3fc8c8=_0x265060;if(_0x45637b[_0x3fc8c8(0x19b)]!=config[_0x3fc8c8(0x140)]){let _0x1a7c95=global['ticker'][noslash(_0x45637b[_0x3fc8c8(0x23d)])];_0x4f7afa=_0x45637b[_0x3fc8c8(0x161)]?0x1/_0x1a7c95:_0x1a7c95;}else _0x4f7afa=0x1;let _0x31097e=_0x45637b[_0x3fc8c8(0x1fd)]*_0x4f7afa;_0x5290a3+=_0x31097e,_0x45637b[_0x3fc8c8(0x22a)]=formatResult(Number(_0x4f7afa),0x8),_0x45637b[_0x3fc8c8(0x29b)]=_0x31097e;}),currentCoins[_0x265060(0x178)](_0x4688df=>{const _0x35c144=_0x265060;let _0x31cd48=config[_0x35c144(0x26f)]['find'](_0x31253b=>_0x31253b['coin']==_0x4688df[_0x35c144(0x19b)]),_0x21818e=Number(_0x31cd48['distribution']),_0xcdde=_0x4688df[_0x35c144(0x29b)]/_0x5290a3*0x64,_0x110489=_0x21818e*_0x5290a3/0x64/_0x4688df['last']-_0x4688df['number'];_0x4688df[_0x35c144(0x142)]=formatResult(_0xcdde,0x3),_0x4688df[_0x35c144(0x271)]=formatResult(_0x21818e,0x3),_0x4688df[_0x35c144(0x150)]=formatResult(_0x110489,0x8),_0x4688df[_0x35c144(0x1bb)]='',_0x4688df[_0x35c144(0x1ad)]=![];if(_0x4688df['coin']!=config[_0x35c144(0x140)]){if(_0x4688df[_0x35c144(0x142)]>_0x21818e)_0x4688df['side']='sell',_0x4688df['valid']=checkMinimums(_0x4688df);else _0x4688df[_0x35c144(0x142)]<_0x21818e&&(_0x4688df[_0x35c144(0x1bb)]=_0x35c144(0x1b2),_0x4688df['valid']=checkMinimums(_0x4688df));}_0x4688df['delta']=_0x4688df['distribution']/_0x4688df['target']-0x1;if(_0x4688df[_0x35c144(0x22f)]==_0x35c144(0x25f)||_0x4688df[_0x35c144(0x22f)]==_0x35c144(0x252))_0x4688df[_0x35c144(0x22f)]='none';}),currentCoins[_0x265060(0x245)]((_0x4ef97c,_0x25472b)=>_0x4ef97c[_0x265060(0x290)]<_0x25472b[_0x265060(0x290)]?0x1:_0x25472b['delta']<_0x4ef97c['delta']?-0x1:0x0);const _0x42aee6=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x42aee6[_0x265060(0x1f7)],'usd':_0x42aee6[_0x265060(0x24f)],'portfolio':JSON[_0x265060(0x197)](currentCoins),'threshold':_0x229cd3},proxyEmit(_0x265060(0x20e),{'serverversion':serverversion,'balances':lastBalances});if(_0x15b89f){if(config[_0x265060(0x220)])headlessMode({'portfolio':currentCoins,'threshold':_0x229cd3});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x229cd3});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1b2d52=getNormalizedPerformance();getStartingBalances(_0x1b2d52),emitPerformance(_0x1b2d52);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5d8bb7=getNormalizedPerformance();emitPerformance(_0x5d8bb7),getStartingBalances(_0x5d8bb7),logger[_0x265060(0x1b8)](_0x265060(0x152));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x21a8ab=_0x54eec5;if(!lastBalances)return;let _0x2fc534=[],_0x2d4dfa,_0xc7e2d6=JSON[_0x21a8ab(0x218)](lastBalances[_0x21a8ab(0x26f)]);_0xc7e2d6[_0x21a8ab(0x245)]((_0x586e62,_0x4417f9)=>_0x586e62[_0x21a8ab(0x19b)]>_0x4417f9[_0x21a8ab(0x19b)]?0x1:_0x4417f9['coin']>_0x586e62['coin']?-0x1:0x0),_0xc7e2d6[_0x21a8ab(0x178)](_0x48eceb=>{const _0x1db9a8=_0x21a8ab;let _0x50f734={'coin':_0x48eceb[_0x1db9a8(0x19b)],'number':_0x48eceb[_0x1db9a8(0x1fd)],'price':_0x48eceb['last']};_0x2fc534[_0x1db9a8(0x203)](_0x50f734);});const _0x105fa4=await getFiat();_0x2d4dfa={'date':lastBalances[_0x21a8ab(0x292)][_0x21a8ab(0x22d)]('\x20')[0x0],'eur':_0x105fa4['eur'],'usd':_0x105fa4[_0x21a8ab(0x24f)],'coins':_0x2fc534};let _0x2c37ff=dbPerformance[_0x21a8ab(0x1fc)](_0x21a8ab(0x206))[_0x21a8ab(0x201)]({'date':_0x2d4dfa[_0x21a8ab(0x237)]})[_0x21a8ab(0x29b)]();_0x2c37ff?_0x2d4dfa[_0x21a8ab(0x237)]!=config[_0x21a8ab(0x16f)]&&dbPerformance[_0x21a8ab(0x1fc)](_0x21a8ab(0x206))[_0x21a8ab(0x201)]({'date':_0x2d4dfa[_0x21a8ab(0x237)]})[_0x21a8ab(0x13c)](_0x2d4dfa)[_0x21a8ab(0x242)]():dbPerformance[_0x21a8ab(0x1fc)](_0x21a8ab(0x206))[_0x21a8ab(0x203)](_0x2d4dfa)[_0x21a8ab(0x242)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2b3f61=_0x54eec5;let _0x3decdc=[];if(dbPerformance[_0x2b3f61(0x265)]('data')[_0x2b3f61(0x29b)]()){let _0x150e28=dbPerformance[_0x2b3f61(0x1fc)](_0x2b3f61(0x206))['cloneDeep']()[_0x2b3f61(0x19f)](_0x324aa0=>{const _0x27d2e0=_0x2b3f61;if(_0x324aa0['coins'][_0x27d2e0(0x200)]==0x0)return![];else return!![];})[_0x2b3f61(0x244)](_0x2b3f61(0x237))[_0x2b3f61(0x29b)](),_0x2e5522=[...config['liquidity']];_0x2e5522[_0x2b3f61(0x245)]((_0x2355e5,_0x30ca3a)=>_0x2355e5[_0x2b3f61(0x237)]>_0x30ca3a['date']?-0x1:_0x30ca3a[_0x2b3f61(0x237)]>_0x2355e5['date']?0x1:0x0);let _0x38c89d=0x1,_0x439d73=[],_0x338b68=0x0;_0x150e28['slice']()[_0x2b3f61(0x161)]()[_0x2b3f61(0x178)]((_0x21b4b9,_0x3deff0)=>{const _0xeb6380=_0x2b3f61;if(_0x2e5522[_0x338b68]){if(_0x150e28[_0x150e28['length']-_0x3deff0]&&_0x2e5522[_0x338b68]['date']==_0x150e28[_0x150e28[_0xeb6380(0x200)]-_0x3deff0][_0xeb6380(0x237)]){if(_0x3deff0<_0x150e28[_0xeb6380(0x200)]){let _0x5ac03a=0x0,_0x3079ef=0x0;_0x150e28[_0x150e28[_0xeb6380(0x200)]-_0x3deff0][_0xeb6380(0x249)][_0xeb6380(0x178)](_0x2cce43=>{const _0x3ea75d=_0xeb6380;_0x3079ef+=_0x2cce43[_0x3ea75d(0x1fd)]*_0x2cce43[_0x3ea75d(0x166)];}),_0x2e5522[_0x338b68][_0xeb6380(0x26e)]['forEach'](_0x4a7352=>{const _0x41ac0e=_0xeb6380;_0x5ac03a+=_0x4a7352[_0x41ac0e(0x1fd)]*_0x4a7352['price'];}),_0x38c89d*=_0x5ac03a/(_0x3079ef-_0x5ac03a)+0x1;}_0x338b68++;}}let _0x2d0754=0x0;_0x21b4b9[_0xeb6380(0x249)][_0xeb6380(0x178)](_0x2b8fe7=>{const _0xb80c84=_0xeb6380;_0x2d0754+=_0x2b8fe7['number']*_0x2b8fe7[_0xb80c84(0x166)];}),_0x439d73[_0x150e28[_0xeb6380(0x200)]-_0x3deff0-0x1]=_0x2d0754*(_0x38c89d-0x1);});let _0x2c0c2c=[];_0x2e5522=[...config[_0x2b3f61(0x1f8)]]||[];let _0x2f2c9c=0x0;_0x338b68=0x0,_0x150e28['forEach']((_0x2f2fc7,_0x3c16e9)=>{const _0xb3a4e1=_0x2b3f61;if(_0x2e5522[_0x338b68]){const _0x59a1dc=fns['parse'](_0x2e5522[_0x338b68][_0xb3a4e1(0x237)],'yyyy/MM/dd',new Date()),_0x13d6c6=fns['parse'](_0x2f2fc7['date'],_0xb3a4e1(0x23e),new Date());if(fns[_0xb3a4e1(0x2a1)](_0x59a1dc,_0x13d6c6)){let _0x28e9fd=0x0;_0x2e5522[_0x338b68][_0xb3a4e1(0x26e)][_0xb3a4e1(0x178)](_0xaf99b3=>{const _0x587851=_0xb3a4e1;!_0x2c0c2c[_0xaf99b3['coin']]?_0x2c0c2c[_0xaf99b3[_0x587851(0x19b)]]=_0xaf99b3['number']:(_0x28e9fd=_0x2c0c2c[_0xaf99b3[_0x587851(0x19b)]],_0x2c0c2c[_0xaf99b3[_0x587851(0x19b)]]+=_0xaf99b3[_0x587851(0x1fd)]);const _0x56fc58=_0x2f2fc7[_0x587851(0x249)]['find'](_0x18642a=>_0x18642a[_0x587851(0x19b)]==_0xaf99b3[_0x587851(0x19b)]);(!_0x56fc58||_0x56fc58[_0x587851(0x1fd)]==0x0)&&(_0x2f2c9c+=(-_0xaf99b3['number']-_0x28e9fd)*_0xaf99b3[_0x587851(0x166)]);}),_0x338b68++;}}_0x2f2fc7[_0xb3a4e1(0x249)][_0xb3a4e1(0x178)]((_0x41fd69,_0x27e32f)=>{const _0xf51c61=_0xb3a4e1;_0x2c0c2c[_0x41fd69[_0xf51c61(0x19b)]]&&(_0x41fd69['initial']=_0x2c0c2c[_0x41fd69[_0xf51c61(0x19b)]]);}),_0x3decdc[_0xb3a4e1(0x203)]({'date':_0x2f2fc7[_0xb3a4e1(0x237)],'eur':_0x2f2fc7[_0xb3a4e1(0x1f7)],'usd':_0x2f2fc7[_0xb3a4e1(0x24f)],'offset':_0x439d73[_0x3c16e9],'netoffset':_0x2f2c9c,'coins':_0x2f2fc7['coins']});});}return _0x3decdc;}function emitPerformance(_0x5be876){const _0x19275f=_0x54eec5;_0x5be876['length']!==0x0?(proxyEmit(_0x19275f(0x2ac),_0x5be876),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5c2e7a,_0x5c73e1){const _0x2e6838=_0x54eec5;let _0x2cc1b1=0x0,_0x1edabc=0x0,_0x1ed1e1=0x0;_0x5c2e7a['coins'][_0x2e6838(0x178)](_0x52a59e=>{const _0x4dfa82=_0x2e6838;_0x2cc1b1+=_0x52a59e[_0x4dfa82(0x1fd)]*_0x52a59e[_0x4dfa82(0x166)];});_0x5c73e1&&(_0x2cc1b1+=_0x5c2e7a[_0x2e6838(0x1ac)]);if(config[_0x2e6838(0x140)]===_0x2e6838(0x2b8)||config['basecoin']===_0x2e6838(0x255)||config['basecoin']===_0x2e6838(0x2c6))_0x1edabc=_0x2cc1b1*_0x5c2e7a[_0x2e6838(0x1f7)],_0x1ed1e1=_0x2cc1b1*_0x5c2e7a[_0x2e6838(0x24f)];else{if(usdBasecoins[_0x2e6838(0x1e7)](config[_0x2e6838(0x140)]))_0x1edabc=_0x2cc1b1*_0x5c2e7a['eur']/_0x5c2e7a[_0x2e6838(0x24f)],_0x1ed1e1=_0x2cc1b1;else config['basecoin']===_0x2e6838(0x2c5)&&(_0x1edabc=_0x2cc1b1,_0x1ed1e1=_0x2cc1b1*_0x5c2e7a[_0x2e6838(0x24f)]/_0x5c2e7a['eur']);}return[_0x2cc1b1,_0x1edabc,_0x1ed1e1];}function getKPIs(_0x2c35e0,_0x5097e5='EUR'){const _0x3609c5=_0x54eec5,_0x361839=config['basecoin'],_0x145334=lastBalances,_0x3d02c3=currentCoins,_0x29af35=getNormalizedPerformance(),_0x2760c7=_0x2c35e0==='basecoin'?_0x361839:_0x2c35e0===_0x3609c5(0x2a6)||_0x2c35e0===_0x3609c5(0x211)?_0x5097e5:_0x3609c5(0x20b)+_0x361839,_0x165bc0=_0x2c35e0==='net-basecoin'?'Net\x20effect':_0x2c35e0===_0x3609c5(0x211)?_0x3609c5(0x1f5):_0x2760c7+_0x3609c5(0x1e8),_0x35efd1=_0x2c35e0===_0x3609c5(0x1e2)||_0x2c35e0===_0x3609c5(0x211)?_0x3609c5(0x1f5):_0x2760c7+_0x3609c5(0x186);let _0x4509ac=0x0;_0x3d02c3[_0x3609c5(0x178)](_0xd71e9e=>{const _0x37ba7d=_0x3609c5;_0x4509ac+=_0xd71e9e[_0x37ba7d(0x1fd)]*_0xd71e9e['last'];});if(_0x2c35e0===_0x3609c5(0x2a6)||_0x2c35e0==='net-fiat'){if(_0x361839===_0x3609c5(0x2b8)||_0x361839==='ETH'||_0x361839===_0x3609c5(0x2c6))_0x4509ac=_0x4509ac*(_0x5097e5==='EUR'?_0x145334[_0x3609c5(0x1f7)]:_0x145334[_0x3609c5(0x24f)]);else{if(usdBasecoins[_0x3609c5(0x1e7)](_0x361839))_0x4509ac=_0x4509ac*(_0x5097e5===_0x3609c5(0x2c5)?_0x145334['eur']/_0x145334[_0x3609c5(0x24f)]:0x1);else _0x361839===_0x3609c5(0x2c5)&&(_0x4509ac=_0x4509ac*(_0x5097e5===_0x3609c5(0x2c5)?0x1:_0x145334[_0x3609c5(0x24f)]/_0x145334[_0x3609c5(0x1f7)]));}}let _0x1d1964;if(_0x4509ac!==0x0){if(_0x2c35e0==='basecoin')_0x1d1964=(_0x4509ac/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5097e5===_0x3609c5(0x2c5))_0x1d1964=(_0x4509ac/startingBalances['eur']-0x1)*0x64;else _0x1d1964=(_0x4509ac/startingBalances[_0x3609c5(0x24f)]-0x1)*0x64;}let _0x50f0c4=0x0;if(startingBalances[_0x3609c5(0x249)])_0x3d02c3[_0x3609c5(0x178)](_0x36eb99=>{const _0x1b734d=_0x3609c5;let _0x345552=startingBalances['coins']['find'](_0x441be2=>_0x441be2[_0x1b734d(0x19b)]===_0x36eb99[_0x1b734d(0x19b)]);if(_0x345552&&_0x345552[_0x1b734d(0x19b)]&&_0x36eb99[_0x1b734d(0x1fd)]!==0x0)_0x50f0c4+=_0x345552['number']*_0x36eb99[_0x1b734d(0x22a)];});let _0x2ffadf=0x0;if(_0x29af35['length']!==0x0){let _0x132037=_0x29af35[_0x29af35[_0x3609c5(0x200)]-0x1];_0x2ffadf=_0x132037[_0x3609c5(0x1d2)];}_0x50f0c4-=_0x2ffadf;_0x2c35e0===_0x3609c5(0x1e2)&&(_0x1d1964=(_0x4509ac-_0x50f0c4)/startingBalances['basecoin']*0x64,_0x4509ac=_0x4509ac-_0x50f0c4);if(_0x2c35e0==='net-fiat'){let _0x4bd52e=_0x5097e5===_0x3609c5(0x2c5)?startingBalances[_0x3609c5(0x1f7)]:startingBalances[_0x3609c5(0x24f)];if(_0x361839==='BTC'||_0x361839===_0x3609c5(0x255)||_0x361839===_0x3609c5(0x2c6))_0x50f0c4=_0x5097e5==='EUR'?_0x50f0c4*_0x145334[_0x3609c5(0x1f7)]:_0x50f0c4*_0x145334[_0x3609c5(0x24f)];else{if(usdBasecoins[_0x3609c5(0x1e7)](_0x361839))_0x50f0c4=_0x5097e5===_0x3609c5(0x2c5)?_0x50f0c4*_0x145334['eur']/_0x145334['usd']:_0x50f0c4;else _0x361839==='EUR'&&(_0x50f0c4=_0x5097e5===_0x3609c5(0x2c5)?_0x50f0c4:_0x50f0c4*_0x145334['usd']/_0x145334[_0x3609c5(0x1f7)]);}_0x1d1964=(_0x4509ac-_0x50f0c4)/_0x4bd52e*0x64,_0x4509ac=_0x4509ac-_0x50f0c4;}if(_0x1d1964){if(_0x1d1964<0x64)_0x1d1964=_0x1d1964[_0x3609c5(0x234)](0x2);else{if(_0x1d1964<0x3e8)_0x1d1964=_0x1d1964[_0x3609c5(0x234)](0x1);else _0x1d1964=_0x1d1964[_0x3609c5(0x234)](0x0);}}else _0x1d1964=Number('0')[_0x3609c5(0x234)](0x2);if(_0x4509ac){if(Math[_0x3609c5(0x1cd)](_0x4509ac)<0.000001)_0x4509ac=_0x4509ac[_0x3609c5(0x234)](0x2);else{if(Math['abs'](_0x4509ac)<0.1)_0x4509ac=_0x4509ac[_0x3609c5(0x234)](0x6);else{if(Math[_0x3609c5(0x1cd)](_0x4509ac)<0x1)_0x4509ac=_0x4509ac[_0x3609c5(0x234)](0x5);else{if(Math[_0x3609c5(0x1cd)](_0x4509ac)<0xa)_0x4509ac=_0x4509ac['toFixed'](0x4);else{if(Math['abs'](_0x4509ac)<0x64)_0x4509ac=_0x4509ac[_0x3609c5(0x234)](0x3);else{if(Math[_0x3609c5(0x1cd)](_0x4509ac)<0x3e8)_0x4509ac=_0x4509ac[_0x3609c5(0x234)](0x2);else _0x4509ac=_0x4509ac['toFixed'](0x2);}}}}}}else _0x4509ac=Number('0')[_0x3609c5(0x234)](0x2);}else _0x1d1964=Number('0')[_0x3609c5(0x234)](0x2);return{'value':_0x4509ac,'change':_0x1d1964,'leftTxt':_0x165bc0,'rightTxt':_0x35efd1};}async function getStartingBalances(_0x588883,_0x3b3bb7=!![]){const _0x5ca16a=_0x54eec5;if(_0x588883['length']!==0x0){const [_0x5a4a82,_0x287f87,_0x3f46f9]=getPerf(_0x588883[0x0],!![]);let _0x4b2002=[];config[_0x5ca16a(0x26f)]['forEach'](_0x30dd2a=>{const _0x279e8c=_0x5ca16a;let _0xc3679b=0x0,_0x32cc53;config[_0x279e8c(0x1f8)][_0x279e8c(0x178)](_0xb7bdef=>{const _0x42e8b0=_0x279e8c;let _0x1fd7ab=_0xb7bdef[_0x42e8b0(0x26e)][_0x42e8b0(0x201)](_0x5e7d54=>_0x5e7d54[_0x42e8b0(0x19b)]==_0x30dd2a[_0x42e8b0(0x19b)]);if(_0x1fd7ab){_0xc3679b+=_0x1fd7ab[_0x42e8b0(0x1fd)];if(!_0x32cc53)_0x32cc53=_0x1fd7ab['price'];}}),_0x4b2002[_0x279e8c(0x203)]({'coin':_0x30dd2a[_0x279e8c(0x19b)],'number':_0xc3679b,'initialprice':_0x32cc53});});const _0x256c9e={'basecoin':_0x5a4a82,'eur':_0x287f87,'usd':_0x3f46f9,'coins':_0x4b2002};if(_0x3b3bb7)proxyEmit('starting-balances',_0x256c9e);startingBalances=_0x256c9e;}}function headlessMode(_0x19d15d){const _0x4cfcc5=_0x54eec5;let _0x4e98a4=_0x19d15d['portfolio'],_0x4a6b2f=_0x19d15d['threshold'],_0x184914=[];for(let _0x1a97ae of _0x4e98a4){if(_0x1a97ae[_0x4cfcc5(0x19b)]!=config['basecoin']){if(_0x1a97ae['delta']>=_0x4a6b2f/0x64){if(_0x1a97ae[_0x4cfcc5(0x1ad)])_0x184914[_0x4cfcc5(0x203)](_0x1a97ae);}else{if(_0x1a97ae[_0x4cfcc5(0x290)]<=-_0x4a6b2f/0x64){if(_0x1a97ae[_0x4cfcc5(0x1ad)])_0x184914[_0x4cfcc5(0x203)](_0x1a97ae);}}}}_0x184914[_0x4cfcc5(0x200)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x184914[_0x4cfcc5(0x178)](_0x209773=>{const _0x1bae6b=_0x4cfcc5;logger[_0x1bae6b(0x1b8)](_0x1bae6b(0x2ce)+_0x209773['coin']+'\x20'+_0x209773[_0x1bae6b(0x1fd)]+'\x20'+_0x209773[_0x1bae6b(0x22a)]+'\x20'+_0x209773['distribution']+'%\x20'+_0x209773[_0x1bae6b(0x271)]+'%\x20'+(0x64*_0x209773[_0x1bae6b(0x290)])[_0x1bae6b(0x234)](0x2)+_0x1bae6b(0x163)+_0x4a6b2f[_0x1bae6b(0x234)](0x2)+'%)');}),placeOrder(_0x184914));}function notifyBalance(_0x5bb953){const _0x151a72=_0x54eec5;let _0x21d77b=_0x5bb953['portfolio'],_0x4ceb95=_0x5bb953[_0x151a72(0x1a6)],_0x450a0b=[];for(let _0x2d3b34 of _0x21d77b){if(_0x2d3b34['coin']!=config[_0x151a72(0x140)]){if(_0x2d3b34[_0x151a72(0x290)]>=_0x4ceb95/0x64){if(_0x2d3b34[_0x151a72(0x1ad)])_0x450a0b[_0x151a72(0x203)](_0x2d3b34);}else{if(_0x2d3b34[_0x151a72(0x290)]<=-_0x4ceb95/0x64){if(_0x2d3b34[_0x151a72(0x1ad)])_0x450a0b[_0x151a72(0x203)](_0x2d3b34);}}}}if(_0x450a0b[_0x151a72(0x200)]>0x0){let _0x471f6d=_0x450a0b['map'](_0x2f7fad=>_0x2f7fad[_0x151a72(0x19b)]);_0x471f6d[_0x151a72(0x245)]();let _0x2875b8=_0x471f6d[_0x151a72(0x1ba)](',\x20');if(!lastCoinsToBalance)logHistory(_0x151a72(0x1b7),_0x151a72(0x19c));lastCoinsToBalance=_0x2875b8;}}function symbolToCoin(_0x5c303b){const _0x150da3=_0x54eec5;let _0x11e3b9;if(_0x5c303b[_0x150da3(0x1e7)]('/'+config['basecoin']))_0x11e3b9=_0x5c303b[_0x150da3(0x1f6)]('/'+config[_0x150da3(0x140)],'');if(_0x5c303b[_0x150da3(0x1e7)](config['basecoin']+'/'))_0x11e3b9=_0x5c303b[_0x150da3(0x1f6)](config['basecoin']+'/','');return _0x11e3b9;}async function unlockOrders(){const _0x973ea3=_0x54eec5;if(allOrdersPlaced&&lockOrders==ORDERS[_0x973ea3(0x1ff)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x973ea3(0x1af)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2d100b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2d100b,validateOrdersState=_0x973ea3(0x28d),persistOpenOrders([]),lockOrders=ORDERS[_0x973ea3(0x175)],logger[_0x973ea3(0x1b8)](_0x973ea3(0x1ea));}}async function validateOrders(_0xf85a30){const _0x3e729f=_0x54eec5;if(_0xf85a30)validateOrdersState=_0xf85a30;logger[_0x3e729f(0x1b8)](_0x3e729f(0x235)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x3e729f(0x288):lockOrders==0x2?'ORDERS.UNLOCKING':_0x3e729f(0x1a1)));let _0x2bf384=[],_0x5dfb2b=config[_0x3e729f(0x156)]==_0x3e729f(0x259)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3e729f(0x233)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger['debug'](_0x3e729f(0x2b3)+validateOrdersState),lastOrders['forEach'](_0x16d468=>{const _0x35d375=_0x3e729f;let _0x31e522=![];_0x16d468[_0x35d375(0x25f)]>0x0&&(_0x31e522=!![]),_0x2bf384[_0x35d375(0x203)](_0x31e522),_0x31e522&&config['ordertype']!=_0x35d375(0x259)&&logHistory('order',_0x35d375(0x174)+_0x16d468[_0x35d375(0x23d)]+'\x20'+_0x16d468['side']+'\x20#'+formatResult(_0x16d468[_0x35d375(0x25f)],0x8)+'\x20@'+formatResult(_0x16d468['price'],0x8));}),_0x2bf384[_0x3e729f(0x178)]((_0x536523,_0x2ba53b)=>{const _0x1ede8e=_0x3e729f;if(_0x536523)lastOrders[_0x1ede8e(0x274)](_0x2ba53b,0x1);}),persistOpenOrders(lastOrders);const _0x5728af=coolingDown?_0x3e729f(0x1e0):_0x3e729f(0x1c6);if(validateOrdersState==_0x3e729f(0x28d)){validateOrdersState=_0x3e729f(0x2bb);if(_0x2bf384[_0x3e729f(0x1e7)](![])){if(config[_0x3e729f(0x156)]==_0x3e729f(0x259)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3e729f(0x2bb)){if(_0x2bf384[_0x3e729f(0x1e7)](![])){}else{if(allOrdersPlaced){if(config[_0x3e729f(0x156)]==_0x3e729f(0x259)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x2bf384['includes'](![])&&(config[_0x3e729f(0x156)]==_0x3e729f(0x259)?logHistory(_0x3e729f(0x19e),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x5dfb2b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5728af):(await cancelOrders(),logHistory(_0x3e729f(0x19e),_0x3e729f(0x229)+Math[_0x3e729f(0x19a)](_0x5dfb2b*validateOrderInterval/0xea60)+_0x3e729f(0x1fb)+_0x5728af))),await unlockOrders();else{if(validateOrdersState==_0x3e729f(0x1f4)){if(config[_0x3e729f(0x156)]!=_0x3e729f(0x259))logHistory(_0x3e729f(0x19e),_0x3e729f(0x2bd)+_0x5728af);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5149db=>{const _0x2a008a=_0x3db1;try{const _0x490664=await exchange[_0x2a008a(0x2cd)](_0x5149db['orderId'],_0x5149db[_0x2a008a(0x23d)]);}catch(_0x4c9707){if(_0x4c9707[_0x2a008a(0x2a4)]()[_0x2a008a(0x1e7)](_0x2a008a(0x143))){}else await handleError(_0x4c9707,_0x2a008a(0x23c));}});}async function initCoinResults(_0x547d98){const _0x244a1b=_0x54eec5;_0x547d98?logger[_0x244a1b(0x1b8)](_0x244a1b(0x20c)+_0x547d98):logger['debug']('Initializing\x20coin\x20results'),config['portfolio'][_0x244a1b(0x178)](_0x254746=>{const _0x4d27d1=_0x244a1b;if(!_0x254746[_0x4d27d1(0x2ca)]&&_0x254746[_0x4d27d1(0x19b)]!=config[_0x4d27d1(0x140)]){const _0x355b88=currentCoins[_0x4d27d1(0x201)](_0x49cd80=>_0x49cd80[_0x4d27d1(0x19b)]==_0x254746[_0x4d27d1(0x19b)]),_0x496b79=global[_0x4d27d1(0x217)][noslash(_0x254746[_0x4d27d1(0x23d)])];let _0xdfad52=_0x355b88?_0x355b88[_0x4d27d1(0x1fd)]:null,_0x5ccb51=_0x254746['reverse']?0x1/_0x496b79:_0x496b79,_0x49d7ba;config[_0x4d27d1(0x1f8)]['forEach'](_0x41997f=>{const _0x39f5be=_0x4d27d1;!_0x49d7ba&&(_0x49d7ba=_0x41997f[_0x39f5be(0x26e)][_0x39f5be(0x201)](_0x3ad44a=>_0x3ad44a[_0x39f5be(0x19b)]==_0x254746[_0x39f5be(0x19b)]),_0x49d7ba&&(_0xdfad52=_0x49d7ba[_0x39f5be(0x1fd)],_0x5ccb51=_0x49d7ba[_0x39f5be(0x166)]));});let _0x550d68=dbCoinResults['get']('coins')[_0x4d27d1(0x201)]({'coin':_0x254746[_0x4d27d1(0x19b)]})[_0x4d27d1(0x29b)]();if(!_0x550d68){const _0x432a0d={'coin':_0x254746['coin'],'number':_0xdfad52,'breakeven':_0x5ccb51,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d27d1(0x1fc)](_0x4d27d1(0x249))['push'](_0x432a0d)[_0x4d27d1(0x242)]();}else{if(_0x547d98&&_0x254746[_0x4d27d1(0x19b)]==_0x547d98){const _0x3f4967={'coin':_0x254746[_0x4d27d1(0x19b)],'number':_0xdfad52,'breakeven':_0x5ccb51,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d27d1(0x1fc)](_0x4d27d1(0x249))['find']({'coin':_0x254746['coin']})['assign'](_0x3f4967)[_0x4d27d1(0x242)]();}}}});}async function updateCoinResults(_0x52ef14,_0xd2a14d=![]){const _0x12188e=_0x54eec5;let _0x1a63ba,_0x543a8c,_0x8cddf9,_0x2bd313,_0x82d040,_0x25cbba,_0x339c76=dbCoinResults[_0x12188e(0x1fc)](_0x12188e(0x249))[_0x12188e(0x201)]({'coin':_0x52ef14['coin']})[_0x12188e(0x29b)](),_0x49faaf=![];_0x339c76&&Object[_0x12188e(0x1a8)](_0x339c76)[_0x12188e(0x178)](([_0x4a65d3,_0x11feba])=>{if(_0x11feba==null)_0x49faaf=!![];});(!_0x339c76||_0x49faaf)&&(await initCoinResults(_0x52ef14['coin']),_0x339c76=dbCoinResults[_0x12188e(0x1fc)](_0x12188e(0x249))[_0x12188e(0x201)]({'coin':_0x52ef14['coin']})[_0x12188e(0x29b)]());_0x52ef14[_0x12188e(0x161)]&&(_0x25cbba={'filled':_0x52ef14[_0x12188e(0x25f)]*_0x52ef14[_0x12188e(0x166)],'amount':_0x52ef14[_0x12188e(0x25f)]*_0x52ef14['price'],'side':_0x52ef14[_0x12188e(0x1bb)]==_0x12188e(0x2ad)?_0x12188e(0x1b2):_0x12188e(0x2ad),'price':0x1/_0x52ef14['price']},_0x52ef14={..._0x52ef14,..._0x25cbba});_0xd2a14d?_0x543a8c=_0x52ef14['side']=='buy'?_0x339c76[_0x12188e(0x1fd)]+_0x52ef14['filled']:_0x339c76[_0x12188e(0x1fd)]-_0x52ef14[_0x12188e(0x25f)]:_0x543a8c=await getCoinNumber(_0x52ef14[_0x12188e(0x19b)]);if(_0x52ef14[_0x12188e(0x225)]&&_0x52ef14['fee'][_0x12188e(0x236)]==config['basecoin'])_0x1a63ba=_0x52ef14[_0x12188e(0x225)]['cost'];else{if(_0x52ef14['fee']&&_0x52ef14[_0x12188e(0x225)]['currency']=='BNB'&&!_0xd2a14d&&config['basecoin']!=_0x12188e(0x2c6))_0x1a63ba=_0x52ef14['fee'][_0x12188e(0x1a0)]*global[_0x12188e(0x217)][_0x12188e(0x157)+config[_0x12188e(0x140)]];else _0x1a63ba=defaultFee*_0x52ef14[_0x12188e(0x25f)]*_0x52ef14[_0x12188e(0x166)];}_0x52ef14[_0x12188e(0x1bb)]=='buy'?(_0x8cddf9=_0x543a8c!=0x0?(_0x339c76[_0x12188e(0x1da)]*_0x339c76[_0x12188e(0x1fd)]+_0x52ef14[_0x12188e(0x166)]*(_0x543a8c-_0x339c76[_0x12188e(0x1fd)])+_0x1a63ba)/_0x543a8c:0x0,_0x2bd313=_0x339c76['realized']):(_0x8cddf9=_0x543a8c!=0x0?(_0x339c76[_0x12188e(0x1da)]*_0x339c76[_0x12188e(0x1fd)]-_0x52ef14[_0x12188e(0x166)]*(_0x339c76['number']-_0x543a8c)+_0x1a63ba)/_0x543a8c:0x0,_0x2bd313=_0x339c76[_0x12188e(0x270)]+(_0x52ef14[_0x12188e(0x166)]-_0x339c76[_0x12188e(0x1da)])*_0x52ef14[_0x12188e(0x25f)]);_0x82d040=(_0x52ef14[_0x12188e(0x166)]-_0x8cddf9-_0x1a63ba/_0x52ef14[_0x12188e(0x25f)])*_0x543a8c;let _0x7f2ed2={'coin':_0x52ef14[_0x12188e(0x19b)],'number':_0x543a8c,'breakeven':formatResult(_0x8cddf9,0x8),'realized':formatResult(_0x2bd313,0x8),'unrealized':formatResult(_0x82d040,0x8),'fees':formatResult(_0x339c76[_0x12188e(0x2ae)]+_0x1a63ba,0x8),'sells':_0x52ef14[_0x12188e(0x1bb)]==_0x12188e(0x2ad)?_0x339c76[_0x12188e(0x230)]+0x1:_0x339c76['sells'],'buys':_0x52ef14[_0x12188e(0x1bb)]==_0x12188e(0x1b2)?_0x339c76['buys']+0x1:_0x339c76['buys']};dbCoinResults['get'](_0x12188e(0x249))[_0x12188e(0x201)]({'coin':_0x52ef14[_0x12188e(0x19b)]})[_0x12188e(0x13c)](_0x7f2ed2)['write']();if(!_0xd2a14d){if(_0x52ef14[_0x12188e(0x225)]&&_0x52ef14['fee'][_0x12188e(0x236)]==_0x12188e(0x157)){const _0x3c6dc2=currentCoins[_0x12188e(0x201)](_0x2b217a=>_0x2b217a[_0x12188e(0x19b)]=='BNB');if(_0x3c6dc2){let _0x2b6c79=dbCoinResults['get']('coins')['find']({'coin':_0x12188e(0x157)})['value']();_0x7f2ed2={..._0x2b6c79,'number':_0x3c6dc2[_0x12188e(0x1fd)]},dbCoinResults[_0x12188e(0x1fc)](_0x12188e(0x249))[_0x12188e(0x201)]({'coin':_0x12188e(0x157)})[_0x12188e(0x13c)](_0x7f2ed2)['write']();}}}}async function placeOrder(_0x2fb70e){const _0x1f53e=_0x54eec5,_0x574065=config[_0x1f53e(0x156)]==_0x1f53e(0x259)?_0x1f53e(0x259):'limit';if(lockOrders==ORDERS[_0x1f53e(0x175)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1f53e(0x1ff)],allOrdersPlaced=![],validateOrdersState='initial';let _0x31f63d=![];lastOrders=[];for(const _0x463c63 of _0x2fb70e){let _0xb3c74,_0x3e1949,_0x1f25f3,_0x2103c3,_0x3829b1,_0x183b0c=_0x463c63[_0x1f53e(0x23d)];try{const _0x191158=await exchange[_0x1f53e(0x25d)](_0x183b0c);_0xb3c74=_0x463c63['reverse']?0x1/_0x463c63[_0x1f53e(0x22a)]:_0x463c63[_0x1f53e(0x22a)],_0x3e1949=_0x191158['bid'],_0x1f25f3=_0x191158[_0x1f53e(0x144)];_0x463c63[_0x1f53e(0x161)]?(_0x2103c3=_0x463c63[_0x1f53e(0x1bb)]==_0x1f53e(0x1b2)?_0x1f53e(0x2ad):_0x1f53e(0x1b2),_0x3829b1=Math[_0x1f53e(0x1cd)](_0x463c63['trade'])/_0xb3c74):(_0x2103c3=_0x463c63[_0x1f53e(0x1bb)],_0x3829b1=Math[_0x1f53e(0x1cd)](_0x463c63[_0x1f53e(0x150)]));_0x574065==_0x1f53e(0x191)&&(config[_0x1f53e(0x156)]==_0x1f53e(0x1fa)&&(_0xb3c74=_0x2103c3=='buy'?_0x3e1949:_0x1f25f3),config[_0x1f53e(0x156)]==_0x1f53e(0x14b)&&(_0xb3c74=_0x2103c3==_0x1f53e(0x1b2)?_0x1f25f3:_0x3e1949));_0x3829b1=formatResult(_0x3829b1,0x8),_0xb3c74=formatResult(_0xb3c74,0x8);const _0x220157=_0x2103c3==_0x1f53e(0x2ad)?config[_0x1f53e(0x273)]?String[_0x1f53e(0x26b)]('0x'+config[_0x1f53e(0x273)])+'\x20':'':config[_0x1f53e(0x27f)]?String[_0x1f53e(0x26b)]('0x'+config[_0x1f53e(0x27f)])+'\x20':'',_0x1b120f=_0x574065=='market'?_0x1f53e(0x213):config['ordertype']=='limit-high'?_0x1f53e(0x1e3):_0x1f53e(0x16b),_0x50a129=(Math[_0x1f53e(0x172)](Math[_0x1f53e(0x296)]()*0x35a4e900)+0x5f5e100)[_0x1f53e(0x2a4)]();lastOrders[_0x1f53e(0x203)]({'customId':_0x50a129,'symbol':_0x183b0c,'coin':_0x463c63['coin'],'amount':_0x3829b1,'price':_0xb3c74,'side':_0x2103c3,'reverse':_0x463c63['reverse'],'filled':0x0});if(_0x574065==_0x1f53e(0x259))logHistory(_0x1f53e(0x21a),''+_0x220157+_0x1b120f+_0x1f53e(0x22b)+_0x183b0c+'\x20'+_0x2103c3+'\x20#'+formatResult(_0x3829b1,0x8)+'\x20@'+formatResult(_0xb3c74,0x8));else logHistory('order',''+_0x220157+_0x1b120f+_0x1f53e(0x22b)+_0x183b0c+'\x20'+_0x2103c3+'\x20#'+formatResult(_0x3829b1,0x8)+'\x20@'+formatResult(_0xb3c74,0x8));let _0x861e64;_0x574065==_0x1f53e(0x259)?_0x2103c3==_0x1f53e(0x1b2)&&[_0x1f53e(0x2a2),_0x1f53e(0x141),_0x1f53e(0x25e),_0x1f53e(0x250),_0x1f53e(0x1e1)]['includes'](config[_0x1f53e(0x2b6)])?_0x861e64=await exchange[_0x1f53e(0x158)](_0x183b0c,_0x574065,_0x2103c3,_0x3829b1,_0xb3c74):_0x861e64=await exchange[_0x1f53e(0x158)](_0x183b0c,_0x574065,_0x2103c3,_0x3829b1,undefined):_0x861e64=await exchange[_0x1f53e(0x158)](_0x183b0c,_0x574065,_0x2103c3,_0x3829b1,_0xb3c74);logger[_0x1f53e(0x1b8)](_0x1f53e(0x17d)+_0x861e64['id']+'\x20|\x20Custom\x20ID:\x20'+_0x50a129);const _0x56f64a=lastOrders[_0x1f53e(0x200)]-0x1;if(_0x56f64a>=0x0&&lastOrders[_0x56f64a]['customId']==_0x50a129){lastOrders[_0x56f64a]['orderId']=_0x861e64['id'];if(_0x861e64[_0x1f53e(0x226)])lastOrders[_0x56f64a][_0x1f53e(0x226)]=_0x861e64[_0x1f53e(0x226)];if(_0x861e64[_0x1f53e(0x166)])lastOrders[_0x56f64a][_0x1f53e(0x166)]=_0x861e64['price'];lastOrders[_0x56f64a][_0x1f53e(0x225)]=_0x861e64[_0x1f53e(0x225)];}if(config[_0x1f53e(0x1c5)]!=0x0){let _0x1b99be=null;if(cooldownTracker[_0x1f53e(0x200)]==config[_0x1f53e(0x1c5)]-0x1)_0x1b99be=cooldownTracker[_0x1f53e(0x243)]();const _0x536720=getTimeStamp();cooldownTracker[_0x1f53e(0x203)](_0x536720);if(_0x1b99be){const _0x7eecbe=fns[_0x1f53e(0x26d)](new Date(_0x536720),new Date(_0x1b99be));if(_0x7eecbe<cooldownInterval){logHistory(_0x1f53e(0x2cf),_0x1f53e(0x13f)+config[_0x1f53e(0x1c5)]+_0x1f53e(0x1ec)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x1f53e(0x1a7)),coolingDown=!![];break;}}}}catch(_0x10d64d){if(_0x10d64d[_0x1f53e(0x2a4)]()['includes'](_0x1f53e(0x285)))lastOrders=lastOrders['filter'](_0x23c07d=>_0x23c07d[_0x1f53e(0x23d)]!=_0x183b0c),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x183b0c),_0x31f63d=!![];else{if(_0x10d64d['toString']()[_0x1f53e(0x1e7)](_0x1f53e(0x192)))lastOrders=lastOrders[_0x1f53e(0x19f)](_0x2f66e1=>_0x2f66e1[_0x1f53e(0x23d)]!=_0x183b0c),logHistory(_0x1f53e(0x2cf),_0x1f53e(0x2a5)+_0x183b0c),_0x31f63d=!![];else{if(_0x10d64d[_0x1f53e(0x2a4)]()['includes'](_0x1f53e(0x1bf)))lastOrders=lastOrders[_0x1f53e(0x19f)](_0xda69a5=>_0xda69a5['symbol']!=_0x183b0c),logHistory(_0x1f53e(0x2cf),_0x1f53e(0x19d)+_0x183b0c),logger[_0x1f53e(0x1b8)](_0x10d64d),_0x31f63d=!![];else _0x10d64d[_0x1f53e(0x2a4)]()[_0x1f53e(0x1e7)](_0x1f53e(0x287))?(lastOrders=lastOrders[_0x1f53e(0x19f)](_0x27970a=>_0x27970a['symbol']!=_0x183b0c),logHistory(_0x1f53e(0x2cf),_0x1f53e(0x24e)+_0x183b0c),_0x31f63d=!![]):(lastOrders=lastOrders[_0x1f53e(0x19f)](_0x14dd57=>_0x14dd57[_0x1f53e(0x23d)]!=_0x183b0c),await handleError(_0x10d64d,_0x1f53e(0x1b3),_0x183b0c));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1f53e(0x200)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5dba04=config[_0x1f53e(0x156)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x1f53e(0x233)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x500b11=_0x1f53e;validateOrders(_0x500b11(0x13a));},_0x5dba04);}else unlockOrders();_0x31f63d&&config[_0x1f53e(0x220)]&&(logHistory(_0x1f53e(0x2cf),_0x1f53e(0x17f)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x1f53e(0x277)));}else{if(coolingDown)!config[_0x1f53e(0x220)]&&logHistory(_0x1f53e(0x2cf),_0x1f53e(0x21c));else lockOrders!=ORDERS[_0x1f53e(0x175)]&&(!config[_0x1f53e(0x220)]&&(config[_0x1f53e(0x156)]==_0x1f53e(0x259)?logHistory(_0x1f53e(0x2cf),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x1f53e(0x2cf),_0x1f53e(0x1ae))));}}function persistOpenOrders(_0x53f840){const _0xc34223=_0x54eec5,_0x1ac389={...config,'openOrders':_0x53f840};let _0x3c3af2=dbConfig[_0xc34223(0x1fc)](_0xc34223(0x2c0))[_0xc34223(0x201)]({'botID':botID})[_0xc34223(0x29b)]();_0x3c3af2&&dbConfig[_0xc34223(0x1fc)](_0xc34223(0x2c0))['find']({'botID':botID})[_0xc34223(0x13c)](_0x1ac389)['write']();}function restoreOrders(){const _0x5cada0=_0x54eec5;let _0x3b696c;config[_0x5cada0(0x162)]&&allOpenOrders[_0x5cada0(0x178)](_0x5ee44f=>{const _0xa1618a=_0x5cada0,_0x454246=config['openOrders'][_0xa1618a(0x201)](_0x105959=>_0x105959[_0xa1618a(0x13e)]==_0x5ee44f['id']);_0x454246&&(lastOrders[_0xa1618a(0x203)](_0x454246),_0x3b696c=_0x5ee44f[_0xa1618a(0x1aa)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x5cada0(0x1ff)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x362062=new Date()[_0x5cada0(0x193)](),_0x3afe4b=config['ordertype']==_0x5cada0(0x259)?validateOrderTimeout*0x3c*0x3e8:config[_0x5cada0(0x233)]*0x3c*0x3e8;if(_0x3b696c+_0x3afe4b>_0x362062){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x53b2b2=_0x5cada0;validateOrders(_0x53b2b2(0x13a));},_0x3b696c+_0x3afe4b-_0x362062);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x5b0498=_0x54eec5;if(!coinsLoaded){process['send']({'telegrammsg':_0x5b0498(0x222)},_0x12dfa8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4612e6='';if(config[_0x5b0498(0x24b)])_0x4612e6=_0x5b0498(0x2c2)+config[_0x5b0498(0x24a)]+_0x5b0498(0x1a9);else _0x4612e6=_0x5b0498(0x1ca)+botID+_0x5b0498(0x1a9);const _0x293843=getKPIs(_0x5b0498(0x140)),_0x164679=getKPIs('fiat',config[_0x5b0498(0x2a6)]),_0x52748f=getKPIs(_0x5b0498(0x1e2)),_0x1907d1=getKPIs(_0x5b0498(0x211),config[_0x5b0498(0x2a6)]);_0x4612e6+=_0x5b0498(0x293),_0x4612e6+=_0x293843[_0x5b0498(0x286)]+_0x5b0498(0x2ab)+_0x293843['value']+'\x0a',_0x4612e6+=_0x293843[_0x5b0498(0x2b0)]+':\x20'+_0x293843[_0x5b0498(0x1f0)]+'%\x0a',_0x4612e6+=_0x164679[_0x5b0498(0x286)]+'\x20:\x20'+_0x164679[_0x5b0498(0x29b)]+'\x0a',_0x4612e6+=_0x164679[_0x5b0498(0x2b0)]+':\x20'+_0x164679[_0x5b0498(0x1f0)]+'%\x0a',_0x4612e6+=_0x52748f[_0x5b0498(0x286)]+':\x20'+_0x52748f[_0x5b0498(0x29b)]+'\x20('+config['basecoin']+')\x0a',_0x4612e6+=_0x52748f['rightTxt']+':\x20'+_0x52748f[_0x5b0498(0x1f0)]+_0x5b0498(0x163)+config[_0x5b0498(0x140)]+')\x0a',_0x4612e6+=_0x1907d1['leftTxt']+':\x20'+_0x1907d1['value']+'\x20('+config[_0x5b0498(0x2a6)]+')\x0a',_0x4612e6+=_0x1907d1[_0x5b0498(0x2b0)]+':\x20'+_0x1907d1[_0x5b0498(0x1f0)]+_0x5b0498(0x163)+config[_0x5b0498(0x2a6)]+')\x0a',_0x4612e6+=_0x5b0498(0x180),process[_0x5b0498(0x13d)]({'telegrammsg':_0x4612e6},_0x1aeef7=>{});}function _0x3db1(_0x12745a,_0x510e2b){const _0x3304bb=_0x1c39();return _0x3db1=function(_0x2c02fd,_0x42c3b9){_0x2c02fd=_0x2c02fd-0x13a;let _0x1c396c=_0x3304bb[_0x2c02fd];return _0x1c396c;},_0x3db1(_0x12745a,_0x510e2b);}async function sendPortfolioTelegram(){const _0x49d8d5=_0x54eec5;if(!coinsLoaded){process[_0x49d8d5(0x13d)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xaa41f3=>{});return;}let _0x1d0a38='';if(config[_0x49d8d5(0x24b)])_0x1d0a38=_0x49d8d5(0x2c2)+config['botname']+_0x49d8d5(0x1cf);else _0x1d0a38=_0x49d8d5(0x1ca)+botID+_0x49d8d5(0x1cf);_0x1d0a38+=_0x49d8d5(0x293),_0x1d0a38+='-------------------------------\x0a',_0x1d0a38+=_0x49d8d5(0x17b),_0x1d0a38+=_0x49d8d5(0x28f),currentCoins[_0x49d8d5(0x178)](_0x52a17f=>{const _0x5d3f6b=_0x49d8d5;_0x1d0a38+=_0x52a17f[_0x5d3f6b(0x19b)]['padEnd'](0x7)+'|\x20'+formatPad(_0x52a17f['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x52a17f['target'],0x2,0x6)+'|\x20'+formatPad(_0x52a17f[_0x5d3f6b(0x290)]*0x64,0x2,0x6)+'\x0a';}),_0x1d0a38+=_0x49d8d5(0x180),process['send']({'telegrammsg':_0x1d0a38},_0x4cd19c=>{});}function formatPad(_0x5f06ba,_0x3e32e3,_0x22dd87){const _0x433007=_0x54eec5,_0x23c51d=formatResultString(_0x5f06ba,_0x3e32e3);return _0x23c51d?_0x23c51d[_0x433007(0x2d1)](_0x22dd87):''[_0x433007(0x2d1)](_0x22dd87);}function logHistory(_0x4f8d33,_0x20bd24,_0x40eb49=''){const _0x2544fa=_0x54eec5;logger[_0x2544fa(0x276)](''+_0x20bd24);let _0x29b4b7={'time':getTimeStamp(),'type':_0x4f8d33,'event':_0x20bd24};dbLogs[_0x2544fa(0x1fc)]('logs')[_0x2544fa(0x203)](_0x29b4b7)[_0x2544fa(0x242)]();if(_0x40eb49=='')_0x40eb49=_0x20bd24;proxyEmit(_0x2544fa(0x1b1),{'log':_0x29b4b7,'summary':_0x40eb49}),process[_0x2544fa(0x13d)]({'telegram':{..._0x29b4b7,'botname':config[_0x2544fa(0x24a)],'showname':config[_0x2544fa(0x24b)]}},_0x222e80=>{});}function emitHistory(_0x3861f5={}){const _0x2c1a8f=_0x54eec5;Object[_0x2c1a8f(0x15b)](_0x3861f5)[_0x2c1a8f(0x200)]==0x0&&(_0x3861f5={'type':[_0x2c1a8f(0x21a),_0x2c1a8f(0x1b1)],'event':'','page':0x1});if(_0x3861f5[_0x2c1a8f(0x219)][_0x2c1a8f(0x1e7)](_0x2c1a8f(0x1b1)))_0x3861f5[_0x2c1a8f(0x219)][_0x2c1a8f(0x274)](_0x3861f5[_0x2c1a8f(0x219)][_0x2c1a8f(0x1ab)](_0x2c1a8f(0x1b1)),0x1,'error',_0x2c1a8f(0x1b7),_0x2c1a8f(0x19e));if(dbLogs[_0x2c1a8f(0x265)](_0x2c1a8f(0x1a4))[_0x2c1a8f(0x29b)]()){let _0xeeaff=dbLogs[_0x2c1a8f(0x1fc)](_0x2c1a8f(0x1a4))[_0x2c1a8f(0x19f)](_0x405e3a=>{const _0x10a493=_0x2c1a8f;if(_0x3861f5[_0x10a493(0x219)][_0x10a493(0x200)]==0x0)return![];else return _0x3861f5[_0x10a493(0x219)][_0x10a493(0x1e7)](_0x405e3a[_0x10a493(0x219)]);})[_0x2c1a8f(0x19f)](_0x532257=>{const _0x59c6e7=_0x2c1a8f;if(_0x3861f5[_0x59c6e7(0x1b1)]=='')return!![];else return _0x532257['event'][_0x59c6e7(0x13b)]()[_0x59c6e7(0x1e7)](_0x3861f5[_0x59c6e7(0x1b1)][_0x59c6e7(0x13b)]());})['sortBy'](_0x2c1a8f(0x292)),_0x4ab94a=_0xeeaff[_0x2c1a8f(0x29b)]()[_0x2c1a8f(0x200)];_0xeeaff=_0xeeaff[_0x2c1a8f(0x161)]()['slice']((_0x3861f5[_0x2c1a8f(0x279)]-0x1)*logPageSize,_0x3861f5['page']*logPageSize-0x1)[_0x2c1a8f(0x161)]()['value'](),proxyEmit(_0x2c1a8f(0x202),{'logs':_0xeeaff,'total':_0x4ab94a});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xa54cbb){const _0x5be874=_0x54eec5;if(dbLogs['has'](_0x5be874(0x1a4))[_0x5be874(0x29b)]()){const _0x31ccc7=dbLogs['get'](_0x5be874(0x1a4))['sortBy'](_0x5be874(0x292))[_0x5be874(0x19f)](_0x408aa3=>{const _0x5f4a3a=_0x5be874;return _0x408aa3[_0x5f4a3a(0x219)]==_0x5f4a3a(0x21a);})[_0x5be874(0x29b)]();dbLogs['get'](_0x5be874(0x1a4))[_0x5be874(0x2b9)]()[_0x5be874(0x242)](),dbLogs[_0x5be874(0x1fc)](_0x5be874(0x1a4))['assign'](_0x31ccc7)[_0x5be874(0x242)](),emitHistory(_0xa54cbb);}}async function pauseBot(_0x122fd1=pauseBotInterval){const _0x15e81d=_0x54eec5,_0x293973=new Date()[_0x15e81d(0x193)]();if(!lastErrorShown||_0x293973-lastErrorShown>=_0x122fd1){lastErrorShown=_0x293973;!lastBotPause?(lastBotPause=_0x293973,consecutivePauses=0x1):(_0x293973-lastBotPause-_0x122fd1<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x15e81d(0x13d)]({'stop':_0x15e81d(0x228)},_0x4b9520=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x15e81d(0x193)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x122fd1),botPaused=![],reset(!![]);}}}async function killBot(){const _0x3e57a2=_0x54eec5;botPaused=!![],await sleep(0x3e8),process[_0x3e57a2(0x13d)]({'stop':_0x3e57a2(0x25c)},_0x213a68=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x44c400,_0x2a3f34){const _0x490ad4=_0x54eec5;if(botPaused)return;const _0x52462a=config['exchange']||_0x490ad4(0x1be);if(_0x2a3f34)logger[_0x490ad4(0x1b8)](_0x490ad4(0x196)+_0x2a3f34);const _0x35b67f=()=>{const _0x667ac5=_0x490ad4;loading[_0x667ac5(0x2cf)]=!![],emitLoadingProgress();};if(_0x44c400[_0x490ad4(0x2a4)]()[_0x490ad4(0x1e7)](_0x490ad4(0x2c9)))logHistory(_0x490ad4(0x2cf),_0x52462a+_0x490ad4(0x207)),_0x35b67f();else{if(_0x44c400['toString']()[_0x490ad4(0x1e7)](_0x490ad4(0x1e9)))logHistory('error',_0x52462a+_0x490ad4(0x247)),_0x35b67f();else _0x44c400[_0x490ad4(0x2a4)]()[_0x490ad4(0x1e7)](_0x490ad4(0x1d6))?(logHistory(_0x490ad4(0x2cf),_0x52462a+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x490ad4(0x2cf),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),_0x35b67f()):await handleError(_0x44c400,null);}}async function handleError(_0x221ef4,_0x3cd4a4,_0x5b989b=''){const _0x42049a=_0x54eec5;if(botPaused)return;const _0xdc95c0=config['exchange']||_0x42049a(0x1be);if(_0x3cd4a4)logger['debug'](_0x42049a(0x196)+_0x3cd4a4);if(_0x221ef4[_0x42049a(0x2a4)]()['includes'](_0x42049a(0x1ce))||_0x221ef4['toString']()['includes'](_0x42049a(0x2b2)))logHistory(_0x42049a(0x2cf),_0xdc95c0+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()['includes'](_0x42049a(0x1c4))||_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)](_0x42049a(0x27c)))logHistory('error',_0xdc95c0+'\x20not\x20available'+pauseBotMsg),await pauseBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)]('RequestTimeout'))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x151)+pauseBotMsg),await pauseBot();else{if(_0x221ef4['toString']()[_0x42049a(0x1e7)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x14a)+pauseBotMsg),await pauseBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x42049a(0x281)),logHistory('error',_0x42049a(0x264)),await killBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)](_0x42049a(0x149)))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x227)+pauseBotMsgLong),logHistory(_0x42049a(0x2cf),'If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync'),await pauseBot(pauseBotIntervalLong);else{if(_0x221ef4 instanceof ccxt[_0x42049a(0x17e)])logHistory('error',_0xdc95c0+_0x42049a(0x2b4)+pauseBotMsg),logger[_0x42049a(0x1b8)]('Error\x20details:',_0x221ef4),await pauseBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)](_0x42049a(0x2c9)))logHistory('error',_0xdc95c0+_0x42049a(0x185)),logHistory('error',_0x42049a(0x264)),await killBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)](_0x42049a(0x1e9)))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x2c4)),logHistory(_0x42049a(0x2cf),_0x42049a(0x264)),await killBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()[_0x42049a(0x1e7)](_0x42049a(0x1d6)))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x188)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x221ef4['toString']()[_0x42049a(0x1e7)](_0x42049a(0x2be)))logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x1bd)),logHistory(_0x42049a(0x2cf),_0x42049a(0x264)),await killBot();else{if(_0x221ef4[_0x42049a(0x2a4)]()['includes'](_0x42049a(0x2ba)))logHistory(_0x42049a(0x2cf),_0x42049a(0x24d)+_0x5b989b);else _0x221ef4 instanceof ccxt[_0x42049a(0x183)]?(logHistory(_0x42049a(0x2cf),_0xdc95c0+_0x42049a(0x1b9)),logger[_0x42049a(0x1b8)](_0x42049a(0x16d),_0x221ef4)):(logHistory('error',_0x42049a(0x14e)+pauseBotMsg),logger[_0x42049a(0x1b8)](_0x42049a(0x16d),_0x221ef4),await pauseBot());}}}}}}}}}}}}function formatResult(_0xef5e50,_0x4331db){const _0x2d7717=_0x54eec5;return parseFloat(_0xef5e50[_0x2d7717(0x234)](_0x4331db));}function formatResultTruncate(_0x13df1c,_0x3a785f){const _0x930322=_0x54eec5;let _0x4894c0=formatResultString(_0x13df1c,0xa),_0x498cf9=_0x4894c0[_0x930322(0x1ab)]('.');return _0x498cf9!=-0x1&&(_0x4894c0=_0x4894c0[_0x930322(0x1d1)](0x0,_0x498cf9+_0x3a785f+0x1)),Number(_0x4894c0);}function formatResultString(_0x285883,_0x8f54c){const _0x27241b=_0x54eec5;let _0x1092b2;if(!(''+_0x285883)[_0x27241b(0x1e7)]('e'))_0x1092b2=+(Math[_0x27241b(0x19a)](_0x285883+'e+'+_0x8f54c)+'e-'+_0x8f54c);else{let _0x49eaf9=(''+_0x285883)[_0x27241b(0x22d)]('e'),_0x225810='';+_0x49eaf9[0x1]+_0x8f54c>0x0&&(_0x225810='+'),_0x1092b2=+(Math[_0x27241b(0x19a)](+_0x49eaf9[0x0]+'e'+_0x225810+(+_0x49eaf9[0x1]+_0x8f54c))+'e-'+_0x8f54c);}return Number(_0x1092b2)[_0x27241b(0x234)](_0x8f54c);}function getServerTime(){const _0x1eeeeb=_0x54eec5,_0x169e6c=new Date();return _0x169e6c['getFullYear']()+'/'+(_0x169e6c[_0x1eeeeb(0x29d)]()+0x1)[_0x1eeeeb(0x2a4)]()[_0x1eeeeb(0x2d1)](0x2,'0')+'/'+_0x169e6c[_0x1eeeeb(0x190)]()['toString']()[_0x1eeeeb(0x2d1)](0x2,'0')+'\x20'+_0x169e6c[_0x1eeeeb(0x231)]()[_0x1eeeeb(0x2a4)]()[_0x1eeeeb(0x2d1)](0x2,'0')+':'+_0x169e6c['getMinutes']()[_0x1eeeeb(0x2a4)]()[_0x1eeeeb(0x2d1)](0x2,'0')+':'+_0x169e6c[_0x1eeeeb(0x154)]()[_0x1eeeeb(0x2a4)]()[_0x1eeeeb(0x2d1)](0x2,'0');}function getTimeStamp(){const _0x43e63c=_0x54eec5,_0xa42a1b=shiftedTime();return _0xa42a1b[_0x43e63c(0x179)]()+'/'+(_0xa42a1b[_0x43e63c(0x29d)]()+0x1)['toString']()[_0x43e63c(0x2d1)](0x2,'0')+'/'+_0xa42a1b[_0x43e63c(0x190)]()[_0x43e63c(0x2a4)]()[_0x43e63c(0x2d1)](0x2,'0')+'\x20'+_0xa42a1b['getHours']()[_0x43e63c(0x2a4)]()['padStart'](0x2,'0')+':'+_0xa42a1b['getMinutes']()[_0x43e63c(0x2a4)]()[_0x43e63c(0x2d1)](0x2,'0')+':'+_0xa42a1b[_0x43e63c(0x154)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x350229=_0x54eec5,_0x1aadb3=shiftedTime();return _0x1aadb3[_0x350229(0x179)]()+'/'+(_0x1aadb3[_0x350229(0x29d)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1aadb3[_0x350229(0x190)]()[_0x350229(0x2a4)]()['padStart'](0x2,'0');}function getHour(){const _0x3ea5ea=_0x54eec5,_0x134761=shiftedTime();return _0x134761[_0x3ea5ea(0x231)]()[_0x3ea5ea(0x2a4)]()[_0x3ea5ea(0x2d1)](0x2,'0');}function sleep(_0x118fe1){return new Promise(_0x1c7857=>setTimeout(_0x1c7857,_0x118fe1));}function shiftedTime(){const _0x14e188=_0x54eec5,_0x1b73b8=new Date();let _0x10e43c=_0x1b73b8;if(config&&config[_0x14e188(0x2d2)]!==0x0)_0x10e43c=fns[_0x14e188(0x269)](_0x1b73b8,{'hours':config[_0x14e188(0x2d2)]});return _0x10e43c;}function timer(_0x1547dc){const _0x2a5506=_0x54eec5,_0x25622b=new Date();!lasttime?console[_0x2a5506(0x257)](getTimeStamp()+_0x2a5506(0x2d0),_0x1547dc,_0x25622b):console[_0x2a5506(0x257)](getTimeStamp()+_0x2a5506(0x2d0),_0x1547dc,(_0x25622b-lasttime)/0x3e8),lasttime=_0x25622b;}