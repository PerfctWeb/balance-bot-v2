const _0xe582ac=_0x29ff;(function(_0x303d93,_0x148a47){const _0x4fdd28=_0x29ff,_0x4f99c0=_0x303d93();while(!![]){try{const _0x1fbf56=parseInt(_0x4fdd28(0x17a))/0x1+-parseInt(_0x4fdd28(0xbc))/0x2*(-parseInt(_0x4fdd28(0x1cd))/0x3)+-parseInt(_0x4fdd28(0x197))/0x4+-parseInt(_0x4fdd28(0x121))/0x5+parseInt(_0x4fdd28(0x15e))/0x6+-parseInt(_0x4fdd28(0x131))/0x7*(parseInt(_0x4fdd28(0x120))/0x8)+parseInt(_0x4fdd28(0x201))/0x9;if(_0x1fbf56===_0x148a47)break;else _0x4f99c0['push'](_0x4f99c0['shift']());}catch(_0x31c08c){_0x4f99c0['push'](_0x4f99c0['shift']());}}}(_0x301a,0x3b402));const _0x2a15ed=function(){let _0x462d2e=!![];return function(_0x13548c,_0x2565e1){const _0xd10b6d=_0x462d2e?function(){const _0x501e71=_0x29ff;if(_0x2565e1){const _0x14d823=_0x2565e1[_0x501e71(0xb8)](_0x13548c,arguments);return _0x2565e1=null,_0x14d823;}}:function(){};return _0x462d2e=![],_0xd10b6d;};}(),_0x1697c0=_0x2a15ed(this,function(){const _0x1ee893=_0x29ff;return _0x1697c0[_0x1ee893(0x157)]()[_0x1ee893(0xc8)](_0x1ee893(0xa6))[_0x1ee893(0x157)]()[_0x1ee893(0x111)](_0x1697c0)[_0x1ee893(0xc8)](_0x1ee893(0xa6));});_0x1697c0();'use strict';const ccxt=require(_0xe582ac(0x1de))[_0xe582ac(0x11e)],low=require(_0xe582ac(0x1a1)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xe582ac(0x1c8)),Crypt=require(_0xe582ac(0x1e4))['Crypt'],util=require(_0xe582ac(0xbe)),argv=require(_0xe582ac(0x1f5))(process['argv'][_0xe582ac(0x211)](0x2))[_0xe582ac(0x1a6)],path=require(_0xe582ac(0x1ca));function _0x29ff(_0x3a5c59,_0x3c2523){const _0x21ce9d=_0x301a();return _0x29ff=function(_0x1697c0,_0x2a15ed){_0x1697c0=_0x1697c0-0x90;let _0x301a6c=_0x21ce9d[_0x1697c0];return _0x301a6c;},_0x29ff(_0x3a5c59,_0x3c2523);}let exchange;global[_0xe582ac(0x10c)]={},global[_0xe582ac(0x161)]={};const usdBasecoins=[_0xe582ac(0x1b4),_0xe582ac(0x15f),_0xe582ac(0x10e),_0xe582ac(0x1d4),_0xe582ac(0x13a),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xe582ac(0x1ef)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];function _0x301a(){const _0x1596c3=['constructor','/USD','findIndex',':\x20timer\x20>','round','target','offset','1\x20-\x20FILLED:\x20','date','page','exchange\x20reloaded','fiat','leftTxt','pro','timeout','2528JVeAWm','2089450eINHhX','cancel','assign','headless','Uncaught\x20Exception:','min','remove','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','bb-settings.json','-results.json','InsufficientFunds','\x20|\x20lock\x20orders:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','resetHistory','bid','No\x20more\x20open\x20orders\x20-\x20','4921qdhHEu','Market','fromCodePoint','parse','settings','buys','%\x20(','getStartingBalances','fetchBalance','USDC','UNLOCKING','customId','splice','BNB/','exec','coin','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','toFixed','indexOf','red_yellow_blue','usd','-performance.json','/EUR','event-history','getFullYear','\x20|\x20','************','abs','cost','Invalid\x20API\x20key\x20or\x20secret\x20entered','\x20network\x20error','Resetting\x20bot\x20history','value','BNB','<b>Bot\x20','filter','padStart','Executing\x20exchange\x20reload','toString','Portfolio\x20change\x20detected:\x20','Limit\x20(high-margin)','final','cancelLoading','uncaughtException','write','1314402AhbSZS','BUSD','coins','change','bots','startdate','stringify','status','side','no\x20open\x20orders','recreate','average','Initializing\x20coin\x20results','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','bot-','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','get','max','portfolio','join','\x20API\x20secret\x20is\x20invalid','set','additional\x20symbols\x20','colorscheme','ORDERS.UNLOCKING','test','Waited\x20','net-basecoin','282856WCrpcX','string','recent20','ordertype','storeFiat','fetchClosedOrders','random','showConfig','args','basecoin','ETH','<pre>','watchOrders','forEach','breakeven','watchTrades','symbol','getOpenOrders()','keys','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','format','success','\x20metrics:</b>\x20\x0a\x0a','EUR','bot','no\x20additional\x20symbols','valid','Transaction\x20detection\x20unblocked','Order\x20is\x20invalid:\x20','747196RbVbfK','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20minutes','NetworkError','toLowerCase','market','\x20>\x20','emitHistory','added','limit-low','lowdb','bb-secure.json','2.3.5','mkdirSync','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','argv','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','Error:\x20Invalid\x20argument\x20','toUpperCase','eur','running','onepagemode','reverse','coin-loading-progress','spot','logs','autoliquidity','-events.json','milliseconds','USD','writeFile','must\x20be\x20greater\x20than\x20minimum\x20amount','emojisell','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','rightTxt','last','yyyy/MM/dd','2\x20-\x20Handled\x20open\x20orders','push','version','password','cancelOrders()','sort','getSeconds','ask','Executed\x20','\x20>\x20[DEBUG]\x20','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','fees','date-fns','message','path','\x20not\x20responding','configuration','15yPLaiZ','botname','sendMetricsTelegram','has','cooldown','realized','changes','USDT','percentage','getHours','removed','Invalid\x20quantity','emojibuy','change24h','basecoinvalue','\x20|\x20Custom\x20ID:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','ccxt','Cooldown\x20ended\x20-\x20balancing\x20resumed','replace','Manual\x20balancing\x20required','<b>','RequestTimeout','hybrid-crypto-js','startprice','closed','limit','Fees\x20|\x20basecoin\x20value:\x20','0\x20-\x20EXECUTION:\x20','Transaction\x20detection\x20blocked','RSA-OAEP','LOCKED','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','threshold','freeze','orderstatus','getPortfolio','debug','./config/','exchanges','yargs/yargs','orderId','number',':\x20Bot\x20','loading-canceled','apiPassword','error','configuration-stored','Avoiding\x20continuous\x20order\x20attempts','getMinutes','Pausing\x20for\x20','exchange','4108311DsyMrU','OnMaintenance','currency','substring','loadSymbols()','001','entries','cancelOrder','defaults','/output-000.log','</pre>','loadMarkets','\x20value','Limit\x20(low-margin)','Order\x20filled:\x20','includes','slice','canceled','progress','2\x20-\x20FILLED\x20known\x20order:\x20','find','DDoSProtection','recovery','API-key\x20format\x20invalid','showname','ongoing','total','split','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','privateKey','\x20has\x20a\x2024h\x20drop\x20of\x20','shift','restart','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','highest','startsWith','\x20orders\x20in\x20less\x20than\x20','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','none','concat','2\x20-\x20Orders\x20unlocked','event','(((.+)+)+)+$','log','createOrder','full','length','excluded','balances','starting-balances','kill','initial','-------------------------------\x0a','\x20:\x20','delta','decrypt','send','Initiating\x20exchange\x20reload','distribution','\x20|\x20Error\x20details:\x20','apply','isEqual','Unknown\x20error\x20occured','openOrders','44450kiydGJ','UNLOCKED','util','net-fiat','limit-high','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Net\x20effect','fetchTicker','Binance','Order\x20amount\x20is\x20invalid:\x20','Reset\x20|\x20','sells','search','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','MIN_NOTIONAL','apiKey','liquidity','getCoins()','balancing\x20resumes\x20when\x20cooldown\x20ends','AuthenticationError','function','Error\x20while\x20deleting\x20files:\x20','BTC','limits','Fee\x20discount\x20refund\x20detected:\x20','remainingSymbols','Failed\x20to\x20load\x20coin\x20data\x20for\x20','performance','datetime','\x20minutes\x20-\x20','close','Uncaught\x20NetworkError:','unlinkSync','existsSync','startnumber','\x20|\x20highest:\x20','amount','Order(s)\x20not\x20validated\x20after\x20','Saving\x20configuration','time','getPortfolio(1)','differenceInSeconds','getPortfolio(2)','sell','\x20exchange','starting-balance-','balancing\x20resumed','***','warning','getDate','cloneDeep','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','2.5.0','fee','sha256','type','open','filled','sortBy','ORDERS.LOCKED',',\x20must\x20be\x20a\x203\x20digit\x20number','data','ORDERS.UNLOCKED','enabled','-config.json','timeshift','order','placeOrder()','price','fetchTickers','storeHeadless','botID','buy','getTime','getMonth','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','2.6.0','\x20portfolio:</b>\x20\x0a\x0a','floor','\x20order:\x20','ticker','apiSecret','TUSD','trade','\x20exchange\x20error'];_0x301a=function(){return _0x1596c3;};return _0x301a();}const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0xe582ac(0x1be)],botID=process[_0xe582ac(0x1a6)][0x2]||_0xe582ac(0x206),pattern=/^[0-9]{3}$/;!pattern[_0xe582ac(0x177)](botID)&&(console[_0xe582ac(0xa7)](_0xe582ac(0x1a8)+botID+_0xe582ac(0xf8)),killBot());const userID=process[_0xe582ac(0x1a6)][0x3]||'',configpath=userID?_0xe582ac(0x1f3)+userID+'/':_0xe582ac(0x1f3),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs['createWriteStream'](logspath+_0xe582ac(0x20a),{'flags':'a'});!fs[_0xe582ac(0xdd)](configpath)&&fs[_0xe582ac(0x1a4)](configpath);!fs[_0xe582ac(0xdd)](logspath)&&fs[_0xe582ac(0x1a4)](logspath);const configfile=configpath+_0xe582ac(0x16c)+botID+_0xe582ac(0xfc),logfile=configpath+_0xe582ac(0x16c)+botID+'-events.json',performancefile=configpath+_0xe582ac(0x16c)+botID+_0xe582ac(0x146),coinresultsfile=configpath+_0xe582ac(0x16c)+botID+_0xe582ac(0x12a),settingsfile=configpath+_0xe582ac(0x129),securefile=configpath+_0xe582ac(0x1a2),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0xe582ac(0x209)]({'logs':[],'version':serverversion})[_0xe582ac(0x15d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xe582ac(0x209)]({'data':[],'version':serverversion})[_0xe582ac(0x15d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xe582ac(0x209)]({'bot':[],'version':serverversion})[_0xe582ac(0x15d)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0xe582ac(0x15d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xe582ac(0xf2),'rsaStandard':_0xe582ac(0x1eb)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x53c179=>{const _0x535b4f=_0xe582ac;console[_0x535b4f(0xa7)](_0x53c179);},'simple':_0x45abaa=>{const _0x456d27=_0xe582ac;console['log'](_0x45abaa),loggerfile[_0x456d27(0x15d)](util[_0x456d27(0x18e)](_0x45abaa)+'\x0a');},'full':async(_0x288c3c,_0x218117='')=>{const _0xc773fb=_0xe582ac;let _0x4cf634;if(config[_0xc773fb(0x94)])_0x4cf634=getTimeStamp()+':\x20'+config[_0xc773fb(0x1ce)]+_0xc773fb(0x19d)+_0x288c3c;else _0x4cf634=getTimeStamp()+_0xc773fb(0x1f8)+botID+_0xc773fb(0x19d)+_0x288c3c;console[_0xc773fb(0xa7)](_0x4cf634),loggerfile[_0xc773fb(0x15d)](util[_0xc773fb(0x18e)](_0x4cf634)+'\x0a'),_0x218117&&(console[_0xc773fb(0xa7)](_0x218117),loggerfile[_0xc773fb(0x15d)](util[_0xc773fb(0x18e)](_0x218117)+'\x0a'));},'debug':async(_0x349306,_0x25955a='')=>{const _0x50de3b=_0xe582ac;let _0x39da27;if(config[_0x50de3b(0x94)])_0x39da27=getTimeStamp()+':\x20'+config['botname']+_0x50de3b(0x1c5)+_0x349306;else _0x39da27=getTimeStamp()+_0x50de3b(0x1f8)+botID+_0x50de3b(0x1c5)+_0x349306;if(debugging)console[_0x50de3b(0xa7)](_0x39da27);loggerfile[_0x50de3b(0x15d)](util[_0x50de3b(0x18e)](_0x39da27)+'\x0a');if(_0x25955a){if(debugging)console[_0x50de3b(0xa7)](_0x25955a);loggerfile[_0x50de3b(0x15d)](util[_0x50de3b(0x18e)](_0x25955a)+'\x0a');}}};process['on'](_0xe582ac(0x15c),function(_0x59ea61){const _0x3ad496=_0xe582ac;logger[_0x3ad496(0x1f2)](_0x3ad496(0x125),_0x59ea61);});settings[_0xe582ac(0xfd)]!=config[_0xe582ac(0xfd)]&&updateTimeshift(settings[_0xe582ac(0xfd)]);settings['onepagemode']!=config[_0xe582ac(0x1ac)]&&updateOnepagemode(settings[_0xe582ac(0x1ac)]);process['send']({'started':_0xe582ac(0x1ab)},_0x36db1a=>{}),initializeProcessListeners();function proxyEmit(_0x3d0de5,_0x41052c=null){process['send']({'function':_0x3d0de5,'args':_0x41052c},_0x1c24e5=>{});}function initializeProcessListeners(){const _0x3e75f9=_0xe582ac;process['on'](_0x3e75f9(0x1c9),_0x206911=>{const _0x55e5c8=_0x3e75f9;switch(Object[_0x55e5c8(0x18c)](_0x206911)[0x0]){case'timeshift':_0x206911[_0x55e5c8(0xfd)]!=undefined&&(settings[_0x55e5c8(0xfd)]=_0x206911[_0x55e5c8(0xfd)],updateTimeshift(settings[_0x55e5c8(0xfd)]));break;case _0x55e5c8(0x1ac):_0x206911[_0x55e5c8(0x1ac)]!=undefined&&(settings['onepagemode']=_0x206911[_0x55e5c8(0x1ac)],updateOnepagemode(settings['onepagemode']));break;case _0x55e5c8(0x162):_0x206911[_0x55e5c8(0x162)]!=undefined&&(bots=JSON[_0x55e5c8(0x134)](_0x206911[_0x55e5c8(0x162)]),proxyEmit(_0x55e5c8(0x162),bots));break;case _0x55e5c8(0xd0):switch(_0x206911[_0x55e5c8(0xd0)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x55e5c8(0x19e):emitHistory(_0x206911['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x206911['args']);break;case _0x55e5c8(0x1f1):getPortfolio(_0x206911[_0x55e5c8(0x182)]);break;case'storeConfiguration':storeConfiguration(_0x206911[_0x55e5c8(0x182)]);break;case _0x55e5c8(0x102):storeHeadless(_0x206911[_0x55e5c8(0x182)]);break;case _0x55e5c8(0x17e):storeFiat(_0x206911[_0x55e5c8(0x182)]);break;case _0x55e5c8(0x12e):resetHistory();break;case _0x55e5c8(0x138):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x206911['args']);break;case _0x55e5c8(0x15b):cancelLoading();break;case _0x55e5c8(0x181):showConfig();break;case _0x55e5c8(0x1cf):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x401be7=null,_0x245ff2=![]){const _0x31a135=_0xe582ac;logger[_0x31a135(0x1f2)](_0x31a135(0xc6)+(_0x401be7&&_0x401be7[_0x31a135(0xaa)]>0x0?_0x31a135(0x174)+_0x401be7[_0x31a135(0x171)](','):_0x31a135(0x193))+_0x31a135(0x14a)+(_0x245ff2?_0x31a135(0x11b):'exchange\x20not\x20reloaded')+'\x20|\x20exchange:\x20'+config[_0x31a135(0x200)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x245ff2)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x31a135(0xcb)]!=''&&config[_0x31a135(0xcb)]!=_0x31a135(0xeb)){if(_0x245ff2){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2385ba){handleErrorNoStop(_0x2385ba,_0x31a135(0x205));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x401be7);const _0x109ae1=await getCoins();[currentCoins,currentCoinsAll]=_0x109ae1,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x31a135(0xaa)]==0x0&&allOpenOrders[_0x31a135(0xaa)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x987849=_0xe582ac;exchangeStopped=!![],await exchange[_0x987849(0xda)]();}async function reloadExchange(){const _0x35506c=_0xe582ac;logger[_0x35506c(0x1f2)](_0x35506c(0xb5));while(lockOrders!=ORDERS[_0x35506c(0xbd)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x35506c(0x1f2)](_0x35506c(0x156)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x572d8f=config[_0xe582ac(0x200)],_0x258583=config[_0xe582ac(0xcb)],_0x5bcafe=config[_0xe582ac(0x10d)],_0x179f63=config[_0xe582ac(0x1fa)]){const _0x5dd859=_0xe582ac;exchange&&await stopExchange();!supportedExchanges()[_0x5dd859(0x210)](_0x572d8f)&&(logHistory(_0x5dd859(0x1fb),_0x5dd859(0x16d)+_0x572d8f+_0x5dd859(0xe8)),killBot());const _0x2b0948=ccxt[_0x572d8f[_0x5dd859(0x19b)]()];exchange=new _0x2b0948({'apiKey':_0x258583,'secret':_0x5bcafe,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5dd859(0x1af)}});if(_0x179f63)exchange[_0x5dd859(0x1bf)]=_0x179f63;}function setStableCoins(){const _0x398e98=_0xe582ac;let _0x41d6ea=config[_0x398e98(0x183)]==_0x398e98(0x184)?_0x398e98(0x184):_0x398e98(0xd2),_0x35d038=!allSymbols[_0x398e98(0x210)](_0x41d6ea+_0x398e98(0x112))?'USDT':'USD',_0x473d2f=!allSymbols['includes'](_0x41d6ea+_0x398e98(0x147))?_0x35d038:_0x398e98(0x191);stablecoins={'eur':{'coin':''+_0x41d6ea+_0x473d2f,'symbol':_0x41d6ea+'/'+_0x473d2f},'usd':{'coin':''+_0x41d6ea+_0x35d038,'symbol':_0x41d6ea+'/'+_0x35d038}};}async function initwsCcxt(_0x126385){const _0x52f055=_0xe582ac;_0x126385==null&&(_0x126385=[],config[_0x52f055(0x170)][_0x52f055(0x187)](_0x2a36a3=>{const _0x44f384=_0x52f055;if(!_0x2a36a3['excluded']&&_0x2a36a3[_0x44f384(0x140)]!=config[_0x44f384(0x183)])_0x126385[_0x44f384(0x1bd)](_0x2a36a3[_0x44f384(0x18a)]);}));if(!_0x126385[_0x52f055(0x210)](stablecoins[_0x52f055(0x1aa)][_0x52f055(0x18a)]))_0x126385[_0x52f055(0x1bd)](stablecoins[_0x52f055(0x1aa)]['symbol']);if(!_0x126385[_0x52f055(0x210)](stablecoins[_0x52f055(0x145)][_0x52f055(0x18a)]))_0x126385['push'](stablecoins['usd'][_0x52f055(0x18a)]);if(config[_0x52f055(0x200)][_0x52f055(0x9f)](_0x52f055(0xc4))){if(!_0x126385[_0x52f055(0x210)](_0x52f055(0x13e)+config['basecoin']))_0x126385[_0x52f055(0x1bd)](_0x52f055(0x13e)+config['basecoin']);}loadCoins(_0x126385);const _0x48b9a1=async _0x2a6018=>{const _0x7f67eb=_0x52f055,_0x14a1cb=await exchange[_0x7f67eb(0xc3)](_0x2a6018);global[_0x7f67eb(0x10c)][noslash(_0x14a1cb[_0x7f67eb(0x18a)])]=_0x14a1cb[_0x7f67eb(0x1ba)];while(!![]){if(!botPaused)try{const _0x2e2c51=await exchange[_0x7f67eb(0x189)](_0x2a6018);global[_0x7f67eb(0x10c)][noslash(_0x2e2c51[0x0]['symbol'])]=_0x2e2c51[0x0]['price'],await sleep(0x3e8);}catch(_0xd81cc8){if(!exchangeStopped)await handleError(_0xd81cc8,_0x7f67eb(0x189),_0x2a6018);}else await sleep(0x64);}},_0xefbe3=async _0x4c08f7=>{const _0x5b7d6b=_0x52f055;while(!![]){if(!botPaused)try{const _0x1208e6=await exchange[_0x5b7d6b(0xc3)](_0x4c08f7);global[_0x5b7d6b(0x161)][_0x1208e6[_0x5b7d6b(0x18a)]]=_0x1208e6[_0x5b7d6b(0x1d5)],await sleep(0x3c*0x3e8);}catch(_0x1e83d1){if(!exchangeStopped)await handleError(_0x1e83d1,'fetchTickers',_0x4c08f7);}else await sleep(0x64);}},_0x34e258=async()=>{const _0x2f11df=_0x52f055;while(!![]){if(!botPaused)try{const _0x21a099=await exchange[_0x2f11df(0x186)]();_0x21a099[_0x2f11df(0x187)](_0x29ef26=>{updateNumberCoinsCcxt(_0x29ef26);});}catch(_0x15eae6){if(!exchangeStopped)await handleError(_0x15eae6,'watchOrders');}else await sleep(0x64);}};_0x126385[_0x52f055(0x187)](_0x5356a2=>{_0x48b9a1(_0x5356a2),_0xefbe3(_0x5356a2);}),!wsEventsSet&&(wsEventsSet=!![],_0x34e258(),watchTransactions());}async function watchTransactions(){const _0x1e859b=_0xe582ac;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x30f2e3=await getCoins(),[_0x3129a9,_0x1283a7]=_0x30f2e3;let _0x439c98=[];currentCoins['forEach'](_0x40dc91=>{const _0x2769d0=_0x29ff,_0xf3fa79=_0x3129a9[_0x2769d0(0x90)](_0x3ece7c=>_0x3ece7c[_0x2769d0(0x140)]==_0x40dc91[_0x2769d0(0x140)]);if(_0xf3fa79){if(_0x40dc91['number']!=_0xf3fa79[_0x2769d0(0x1f7)]){let _0x5b98da;if(_0x40dc91['coin']!=config[_0x2769d0(0x183)]){const _0x1020db=global[_0x2769d0(0x10c)][noslash(_0x40dc91[_0x2769d0(0x18a)])];_0x5b98da=_0x40dc91[_0x2769d0(0x1ad)]?0x1/_0x1020db:_0x1020db;}else _0x5b98da=0x1;_0x439c98['push']({'coin':_0x40dc91['coin'],'symbol':_0x40dc91[_0x2769d0(0x18a)],'price':_0x5b98da,'number':Number(formatResult(_0xf3fa79[_0x2769d0(0x1f7)]-_0x40dc91[_0x2769d0(0x1f7)],0x8)),'basecoinvalue':_0x5b98da*(_0xf3fa79[_0x2769d0(0x1f7)]-_0x40dc91['number'])});}}});if(_0x439c98['length']==0x1&&!blockTransactionDetection){if(config[_0x1e859b(0x1b1)]){logger['debug'](_0x1e859b(0x1e8)+_0x439c98[0x0]['basecoinvalue']+_0x1e859b(0xdf)+lastFees['highest']);if(!lastFees['highest']==0x0||Math[_0x1e859b(0x14c)](_0x439c98[0x0][_0x1e859b(0x1db)])>lastFees[_0x1e859b(0x9e)]){delete _0x439c98[0x0][_0x1e859b(0x18a)],delete _0x439c98[0x0][_0x1e859b(0x1db)];let _0x323a98=[],_0x107ff3=[...config[_0x1e859b(0xcc)]]||[],_0x3fddd7=config[_0x1e859b(0xcc)];_0x107ff3[_0x1e859b(0x1c1)]((_0x199c48,_0x2e5e1f)=>_0x199c48[_0x1e859b(0x119)]>_0x2e5e1f[_0x1e859b(0x119)]?-0x1:_0x2e5e1f[_0x1e859b(0x119)]>_0x199c48[_0x1e859b(0x119)]?0x1:0x0);const _0x42fdeb=getDate();if(_0x107ff3[0x0]){const _0x2be485=fns[_0x1e859b(0x134)](_0x107ff3[0x0][_0x1e859b(0x119)],_0x1e859b(0x1bb),new Date()),_0x24a9be=fns['parse'](_0x42fdeb,_0x1e859b(0x1bb),new Date());if(fns[_0x1e859b(0xb9)](_0x2be485,_0x24a9be)){_0x323a98=_0x107ff3[0x0]['changes'];const _0x142591=_0x323a98[_0x1e859b(0x90)](_0xc65100=>_0xc65100[_0x1e859b(0x140)]==_0x439c98[0x0][_0x1e859b(0x140)]);_0x142591?(_0x142591[_0x1e859b(0x1f7)]+=_0x439c98[0x0][_0x1e859b(0x1f7)],_0x142591[_0x1e859b(0x1f7)]==0x0&&(_0x323a98=_0x323a98[_0x1e859b(0x154)](_0x186404=>{const _0x665036=_0x1e859b;return _0x186404[_0x665036(0x140)]!=_0x439c98[0x0][_0x665036(0x140)];}))):_0x323a98['push'](_0x439c98[0x0]);const _0x184a4e=_0x3fddd7[_0x1e859b(0x90)](_0x1f2041=>_0x1f2041[_0x1e859b(0x119)]==_0x42fdeb);_0x184a4e[_0x1e859b(0x1d3)]=_0x323a98;}else _0x3fddd7[_0x1e859b(0x1bd)]({'date':_0x42fdeb,'changes':[_0x439c98[0x0]]});}const _0x5d5bb7=_0x3fddd7['find'](_0x39dcd0=>_0x39dcd0['date']==_0x42fdeb);if(_0x5d5bb7){let _0x27d9cf=!![];_0x5d5bb7[_0x1e859b(0x1d3)][_0x1e859b(0x187)](_0x31424a=>{const _0x20324d=_0x1e859b;if(_0x31424a[_0x20324d(0x1f7)]!=0x0)_0x27d9cf=![];}),_0x27d9cf&&(_0x3fddd7=_0x3fddd7[_0x1e859b(0x154)](_0x468499=>{return _0x468499['date']!=_0x42fdeb;}));}let _0x55f155=dbConfig[_0x1e859b(0x16e)]('bot')[_0x1e859b(0x90)]({'botID':botID})['value']();_0x55f155&&(dbConfig['get']('bot')[_0x1e859b(0x90)]({'botID':botID})[_0x1e859b(0x123)]({'liquidity':_0x3fddd7})[_0x1e859b(0x15d)](),config[_0x1e859b(0xcc)]=_0x3fddd7),logHistory(_0x1e859b(0x18f),_0x1e859b(0x158)+Math[_0x1e859b(0x14c)](_0x439c98[0x0][_0x1e859b(0x1f7)])+'\x20'+_0x439c98[0x0][_0x1e859b(0x140)]+'\x20'+(_0x439c98[0x0][_0x1e859b(0x1f7)]>0x0?_0x1e859b(0x19f):_0x1e859b(0x1d7))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x1e859b(0x1cc),emittedConfiguration());}else logger[_0x1e859b(0x1f2)](_0x1e859b(0xd4)+Math[_0x1e859b(0x14c)](_0x439c98[0x0]['number'])+'\x20'+_0x439c98[0x0][_0x1e859b(0x140)]+'\x20'+(_0x439c98[0x0][_0x1e859b(0x1f7)]>0x0?_0x1e859b(0x19f):_0x1e859b(0x1d7)));transactionDetected=!![],currentCoins=_0x3129a9,currentCoinsAll=_0x1283a7;}else logger[_0x1e859b(0x1f2)]('Portfolio\x20change\x20detected:\x20'+Math[_0x1e859b(0x14c)](_0x439c98[0x0]['number'])+'\x20'+_0x439c98[0x0]['coin']+'\x20'+(_0x439c98[0x0][_0x1e859b(0x1f7)]>0x0?_0x1e859b(0x19f):_0x1e859b(0x1d7))+_0x1e859b(0x9d)),currentCoins=_0x3129a9,currentCoinsAll=_0x1283a7;}await sleep(watchTransactionsInterval);}catch(_0x45b50e){if(!exchangeStopped)await handleError(_0x45b50e,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x149c78=config['exchange'],_0x4b65c6=![]){const _0x58f6aa=_0xe582ac;if(allSymbols&&!_0x4b65c6)return;try{markets=await exchange[_0x58f6aa(0x20c)](),allSymbols=[],Object[_0x58f6aa(0x207)](markets)[_0x58f6aa(0x187)](_0x4a5c5f=>{const _0x51bdc7=_0x58f6aa;_0x4a5c5f[0x1]['active']&&_0x4a5c5f[0x1][_0x51bdc7(0x1af)]&&allSymbols[_0x51bdc7(0x1bd)](_0x4a5c5f[0x0]);});}catch(_0x473f55){throw _0x473f55;}}async function initclient(){const _0x2a56a9=_0xe582ac;emitLoadingProgress(),proxyEmit(_0x2a56a9(0x1cc),emittedConfiguration()),proxyEmit(_0x2a56a9(0x1f4),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2a56a9(0xac),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x376a96=getNormalizedPerformance();emitPerformance(_0x376a96),getStartingBalances(_0x376a96);}async function toggleBotMode(){const _0x3a0330=_0xe582ac;let _0x2b1d63=dbConfig['get'](_0x3a0330(0x192))[_0x3a0330(0x90)]({'botID':botID})[_0x3a0330(0x151)]();if(_0x2b1d63){const _0x29e6c2=!_0x2b1d63[_0x3a0330(0x124)];dbConfig[_0x3a0330(0x16e)](_0x3a0330(0x192))['find']({'botID':botID})[_0x3a0330(0x123)]({'headless':_0x29e6c2})['write'](),config[_0x3a0330(0x124)]=_0x29e6c2,proxyEmit(_0x3a0330(0x1cc),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4cdf07=_0xe582ac;process[_0x4cdf07(0xb4)]({'updatebotmanager':!![]},_0x42d95f=>{});}async function loadCoins(_0xdcb80f){const _0x330b9c=_0xe582ac;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x4b9c44,_0x1cd2fa=0x0,_0x203a5e=0x0;_0xdcb80f['forEach'](_0x5b6d76=>{const _0xa4c4c9=_0x29ff;loading[_0xa4c4c9(0xd5)][_0xa4c4c9(0x1bd)](_0x5b6d76);}),loadingCanceled=![];let _0x4159f5=![];while(_0x4b9c44!=_0xdcb80f['length']){_0x4b9c44=0x0,_0xdcb80f[_0x330b9c(0x187)](_0x409cb4=>{const _0x1fbca8=_0x330b9c;if(global['ticker'][noslash(_0x409cb4)]){loading['remainingSymbols']=loading['remainingSymbols']['filter'](_0x4e360d=>_0x4e360d!=_0x409cb4);if(!watchedSymbols[_0x1fbca8(0x210)](_0x409cb4))watchedSymbols[_0x1fbca8(0x1bd)](_0x409cb4);_0x4b9c44++;}}),loading[_0x330b9c(0x213)]=Math[_0x330b9c(0x115)](_0x4b9c44/_0xdcb80f[_0x330b9c(0xaa)]*0x64);loading[_0x330b9c(0x213)]!=0x64&&(_0x203a5e>0x1e*0x5&&(loading[_0x330b9c(0x11f)]=!![],emitLoadingProgress()),_0x203a5e>0x78*0x5&&!_0x4159f5&&(loading[_0x330b9c(0x122)]=!![],emitLoadingProgress(),_0x4159f5=!![],logHistory('error',_0x330b9c(0xd6)+loading[_0x330b9c(0xd5)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x330b9c(0x1fb),_0x330b9c(0x1ff)+loadCoinsRetryInterval/0xea60+_0x330b9c(0x16b)),pidCoinReloading=setTimeout(()=>{const _0x520ab8=_0x330b9c;process[_0x520ab8(0xb4)]({'stop':_0x520ab8(0x9c)},_0x3a25d7=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x4b9c44!=_0x1cd2fa&&(_0x1cd2fa=_0x4b9c44,emitLoadingProgress()),_0x203a5e++,await sleep(0xc8);}_0x4b9c44==_0xdcb80f['length']&&(coinsLoaded=!![],process[_0x330b9c(0xb4)]({'status':_0x330b9c(0xfb),'live':_0x330b9c(0x1ab)},_0x133830=>{}),_0x4159f5&&logHistory(_0x330b9c(0x18f),_0x330b9c(0x1c6)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x199b44=_0xe582ac;proxyEmit(_0x199b44(0x1cc),{...emittedConfiguration(),'configstate':_0x199b44(0x1f9)});}function emitLoadingProgress(){const _0x29bfb1=_0xe582ac;proxyEmit(_0x29bfb1(0x1ae),loading);}async function getFiat(){const _0x5aa1fd=_0xe582ac;let _0x37fc69=global[_0x5aa1fd(0x10c)][stablecoins['eur'][_0x5aa1fd(0x140)]],_0x12bda8=global['ticker'][stablecoins['usd'][_0x5aa1fd(0x140)]];return{'eur':Number(_0x37fc69),'usd':Number(_0x12bda8)};}function capitalize(_0x3109c5){const _0x55a319=_0xe582ac;return _0x3109c5[_0x55a319(0x204)](0x0,0x1)[_0x55a319(0x1a9)]()+_0x3109c5[_0x55a319(0x204)](0x1);}function supportedExchanges(){const _0x39a992=_0xe582ac,_0x138cbb=['ws',_0x39a992(0x101),_0x39a992(0xc3),_0x39a992(0x189),_0x39a992(0x186),_0x39a992(0x208),'createOrder','fetchOpenOrders',_0x39a992(0x17f),_0x39a992(0x139)];let _0xdb808a=[],_0x2d1ca1=[],_0x31d305=ccxt[_0x39a992(0x1f4)];_0x31d305[_0x39a992(0x187)](_0x25414a=>{const _0x19a1d7=_0x39a992;try{const _0x1380b9=new ccxt[_0x25414a]();if(_0x1380b9[_0x19a1d7(0x1d0)]['ws'])_0x2d1ca1[_0x19a1d7(0x1bd)](_0x1380b9);}catch(_0x27161d){}}),_0x2d1ca1['forEach'](_0x506650=>{const _0x3a1904=_0x39a992;let _0x2c266f=0x0;_0x138cbb[_0x3a1904(0x187)](_0x55ee36=>{const _0x14cbcf=_0x3a1904;_0x55ee36 in _0x506650[_0x14cbcf(0x1d0)]&&_0x506650[_0x14cbcf(0x1d0)][_0x55ee36]&&_0x2c266f++;}),_0x2c266f==_0x138cbb[_0x3a1904(0xaa)]&&_0xdb808a[_0x3a1904(0x1bd)](capitalize(_0x506650['id']));});let _0x1ac23a=[];return _0x31d305[_0x39a992(0x187)](_0x4092be=>{const _0x2229b9=_0x39a992;_0x4092be=capitalize(_0x4092be);if(!_0xdb808a[_0x2229b9(0x210)](_0x4092be))_0x1ac23a[_0x2229b9(0x1bd)](_0x4092be);}),_0xdb808a;}function setStartDatePerformance(){const _0x39b643=_0xe582ac;if(config&&config[_0x39b643(0xcc)][0x0][_0x39b643(0x1d3)]['length']!=0x0){const _0x5cdf74=config['liquidity'][0x0]['changes'];dbPerformance[_0x39b643(0x16e)]('data')['find']({'date':config[_0x39b643(0x163)]})[_0x39b643(0x123)]({'coins':_0x5cdf74})[_0x39b643(0x15d)]();}}async function recreateCoinResults(){const _0x6aa6da=_0xe582ac;let _0x23d387,_0x48fcf4=[];try{const _0x1dc4d3=fns['format'](fns['parseISO'](config[_0x6aa6da(0x163)][_0x6aa6da(0x1e0)](/\//g,'-')),_0x6aa6da(0x1dd));for(const _0x3aae83 of currentCoins){if(_0x3aae83['coin']!=config[_0x6aa6da(0x183)]){let _0xd5da97=0x0,_0x46b54a,_0x3b9476;_0x23d387=await getAllEventOrders(_0x3aae83[_0x6aa6da(0x18a)]);if(_0x23d387[_0x6aa6da(0xaa)]>0x0)_0x23d387[_0x6aa6da(0x187)](_0x3b90b0=>{const _0x16a197=_0x6aa6da,_0x58a0a0=_0x3aae83[_0x16a197(0x18a)][_0x16a197(0x210)](config[_0x16a197(0x183)]+'/');_0x48fcf4[_0x16a197(0x1bd)]({'datetime':_0x3b90b0[_0x16a197(0xd8)],'coin':_0x3aae83['coin'],'symbol':_0x3aae83[_0x16a197(0x18a)],'side':_0x3b90b0[_0x16a197(0x166)],'reverse':_0x58a0a0,'amount':formatResult(_0x3b90b0[_0x16a197(0xf5)],0x8),'filled':formatResult(_0x3b90b0[_0x16a197(0xf5)],0x8),'price':formatResult(_0x3b90b0[_0x16a197(0x100)],0x8)}),_0xd5da97=_0x3b90b0['side']==_0x16a197(0x104)?_0xd5da97+_0x3b90b0[_0x16a197(0xf5)]:_0xd5da97-_0x3b90b0[_0x16a197(0xf5)];if(!_0x3b9476)_0x3b9476=_0x3b90b0[_0x16a197(0x100)];});_0x46b54a=_0x3aae83[_0x6aa6da(0x1f7)]-_0xd5da97;let _0x1541af;config['liquidity'][_0x6aa6da(0x187)](_0x76bf7c=>{const _0x313561=_0x6aa6da;!_0x1541af&&(_0x1541af=_0x76bf7c[_0x313561(0x1d3)]['find'](_0x413bac=>_0x413bac[_0x313561(0x140)]==_0x3aae83[_0x313561(0x140)]),_0x1541af&&(_0x46b54a=_0x1541af[_0x313561(0x1f7)],_0x3b9476=_0x1541af[_0x313561(0x100)]));});let _0x3528ca=dbCoinResults[_0x6aa6da(0x16e)](_0x6aa6da(0x160))[_0x6aa6da(0x90)]({'coin':_0x3aae83[_0x6aa6da(0x140)]})[_0x6aa6da(0x151)]();_0x3528ca={'coin':_0x3aae83['coin'],'number':_0x46b54a,'breakeven':_0x3b9476,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x6aa6da(0x16e)](_0x6aa6da(0x160))[_0x6aa6da(0x90)]({'coin':_0x3aae83['coin']})[_0x6aa6da(0x123)](_0x3528ca)[_0x6aa6da(0x15d)]();}}_0x48fcf4['sort']((_0x20e8a0,_0x41be2b)=>_0x20e8a0[_0x6aa6da(0xd8)]>_0x41be2b[_0x6aa6da(0xd8)]?0x1:_0x41be2b[_0x6aa6da(0xd8)]>_0x20e8a0['datetime']?-0x1:0x0);let _0x4cf18a=0x0;for(let _0x24afad of _0x48fcf4){await updateCoinResults(_0x24afad,!![]);}}catch(_0x1e093c){await handleError(_0x1e093c,'recreateCoinResults()');}}async function getAllEventOrders(_0x367bd0){const _0x59611f=_0xe582ac;let _0x1096d6=[],_0x59c1eb=dbLogs[_0x59611f(0x16e)](_0x59611f(0x1b0))[_0x59611f(0x154)](_0x12a98a=>{const _0x391db6=_0x59611f,_0x48caa5=_0x12a98a['event'][_0x391db6(0x19b)]();return _0x48caa5['includes'](_0x367bd0[_0x391db6(0x19b)]())&&(_0x48caa5[_0x391db6(0x210)](_0x391db6(0x19c))&&_0x48caa5[_0x391db6(0x210)](_0x391db6(0xfe))||_0x48caa5[_0x391db6(0x210)](_0x391db6(0xf5))&&_0x48caa5[_0x391db6(0x210)](_0x391db6(0xfe)));})['sortBy'](_0x59611f(0xe3))[_0x59611f(0x151)]();return _0x59c1eb['forEach'](_0x59c0bb=>{const _0x150d63=_0x59611f,_0x6e6be1=_0x59c0bb['event'][_0x150d63(0x210)](_0x150d63(0xe7))?_0x150d63(0xe7):_0x150d63(0x104),_0x22f21d=/#([0-9]|\.)+\s/i,_0x2d0d52=Number(_0x22f21d[_0x150d63(0x13f)](_0x59c0bb['event'])[0x0][_0x150d63(0x211)](0x1)),_0x59fb34=/@([0-9]|\.)+$/i,_0x497806=Number(_0x59fb34[_0x150d63(0x13f)](_0x59c0bb['event'])[0x0][_0x150d63(0x211)](0x1));_0x1096d6['push']({'datetime':_0x59c0bb[_0x150d63(0xe3)],'coin':symbolToCoin(_0x367bd0),'symbol':_0x367bd0,'side':_0x6e6be1,'amount':_0x2d0d52,'filled':_0x2d0d52,'price':_0x497806});}),_0x1096d6;}async function getAllOrders(_0x2e378d,_0x3b6a94){const _0x62964f=_0xe582ac;let _0x451d6e=[];while(_0x3b6a94<exchange[_0x62964f(0x1b3)]()){const _0x579878=0x1f4,_0x4d4d32=await exchange[_0x62964f(0x17f)](_0x2e378d,_0x3b6a94,_0x579878);if(_0x4d4d32['length'])_0x3b6a94=_0x4d4d32[_0x4d4d32[_0x62964f(0xaa)]-0x1]['timestamp']+0x1,_0x451d6e=_0x451d6e[_0x62964f(0xa3)](_0x4d4d32);else break;}return _0x451d6e;}async function validate24hChanges(){const _0x54ce37=_0xe582ac;for(const _0x12e684 of currentCoins){if(_0x12e684['coin']!=config[_0x54ce37(0x183)]){let _0x4fb66a;_0x12e684[_0x54ce37(0x1ad)]?_0x4fb66a=formatResult((0x1/(global['change'][noslash(_0x12e684[_0x54ce37(0x18a)])]/0x64+0x1)-0x1)*0x64,0x3):_0x4fb66a=global['change'][noslash(_0x12e684[_0x54ce37(0x18a)])],_0x4fb66a<config['change24h']&&(logHistory(_0x54ce37(0x1fb),_0x12e684['coin']+_0x54ce37(0x9a)+_0x4fb66a+'%'),logHistory('error',_0x54ce37(0xef)),logHistory('error',_0x54ce37(0x18d)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x21192f,_0x4efc1c){const _0x3f8a90=_0xe582ac;if(!_0x21192f)return!![];const _0x1f05ad=_0x4efc1c[_0x3f8a90(0x97)]('.'),_0x50a812=_0x21192f[_0x3f8a90(0x97)]('.');for(var _0x546d32=0x0;_0x546d32<_0x50a812[_0x3f8a90(0xaa)];_0x546d32++){const _0x2e6d4b=~~_0x50a812[_0x546d32],_0x58d7e0=~~_0x1f05ad[_0x546d32];if(_0x2e6d4b<_0x58d7e0)return!![];if(_0x2e6d4b>_0x58d7e0)return![];}return![];}async function oneTimeMigration(){const _0x59042f=_0xe582ac;let _0x476831=dbLogs[_0x59042f(0x16e)](_0x59042f(0x1be))['value']();if(isOlderVersion(_0x476831,_0x59042f(0x1a3))){let _0x211fc7=[];const _0x4b6354=dbLogs['get'](_0x59042f(0x1b0))[_0x59042f(0x151)]();_0x4b6354[_0x59042f(0x187)](_0x35fe2c=>{const _0x2f09f9=_0x59042f;_0x211fc7['push']({'time':_0x35fe2c['time'],'type':_0x35fe2c['type'],'event':_0x35fe2c[_0x2f09f9(0xa5)]});}),dbLogs[_0x59042f(0x16e)](_0x59042f(0x1b0))['assign'](_0x211fc7)[_0x59042f(0x15d)]();}let _0x5b4ca5=dbConfig['get'](_0x59042f(0x1be))[_0x59042f(0x151)]();if(isOlderVersion(_0x5b4ca5,_0x59042f(0x1a3))){let _0x136ffc=dbConfig[_0x59042f(0x16e)](_0x59042f(0x192))[_0x59042f(0x90)]({'botID':botID})[_0x59042f(0x151)]();if(_0x136ffc){let _0x1f33c0=[];_0x136ffc['portfolio'][_0x59042f(0x187)](_0x4d7548=>{const _0x297c02=_0x59042f;_0x1f33c0[_0x297c02(0x1bd)]({'coin':_0x4d7548[_0x297c02(0x140)],'number':_0x4d7548[_0x297c02(0xde)],'price':_0x4d7548[_0x297c02(0x1e5)]}),delete _0x4d7548[_0x297c02(0xde)],delete _0x4d7548[_0x297c02(0x1e5)];});if(_0x1f33c0['length']!==0x0)fs[_0x59042f(0x1b5)](configbackuppath+(_0x59042f(0xe9)+botID+'.json'),JSON['stringify'](_0x1f33c0,null,0x4),function(_0x3adae5){if(_0x3adae5){}});const _0x1c74ce=(_0x51a015,_0x235058)=>{const _0x5420b0=_0x59042f;let _0x19b52e=[];_0x235058[_0x5420b0(0x187)](_0x3828f5=>{const _0x9ca52b=_0x5420b0,_0x51ad55=_0x51a015[_0x9ca52b(0x90)](_0x491451=>_0x491451[_0x9ca52b(0x140)]==_0x3828f5['coin']);if(!_0x51ad55)_0x19b52e[_0x9ca52b(0x1bd)](_0x3828f5);});let _0x2c2729=[];return _0x51a015[_0x5420b0(0x187)](_0x3eb57d=>{const _0x1cd613=_0x5420b0,_0x12c870=_0x235058[_0x1cd613(0x90)](_0x42a62d=>_0x42a62d['coin']==_0x3eb57d['coin']);if(!_0x12c870||_0x12c870['number']==0x0&&_0x3eb57d['number']!=0x0)_0x2c2729[_0x1cd613(0x1bd)](_0x3eb57d);}),{'missingDay1':_0x19b52e,'notInDay2':_0x2c2729};},_0x3e9646=dbPerformance['get'](_0x59042f(0xf9))[_0x59042f(0xee)]()[_0x59042f(0x151)]();if(_0x3e9646['length']>0x1){const {missingDay1:_0x158cab,notInDay2:_0x442725}=_0x1c74ce(_0x1f33c0,_0x3e9646[0x1]['coins']);_0x1f33c0=[..._0x1f33c0,..._0x158cab],_0x442725['forEach'](_0x1ff3af=>{const _0x508d50=_0x59042f;let _0x3fc3eb=_0x1f33c0[_0x508d50(0x113)](_0x53805c=>_0x53805c[_0x508d50(0x140)]==_0x1ff3af[_0x508d50(0x140)]);_0x3fc3eb!=-0x1&&_0x1f33c0[_0x508d50(0x13d)](_0x3fc3eb,0x1);});}_0x1f33c0[_0x59042f(0x1c1)]((_0x2c7e94,_0x2c7998)=>_0x2c7e94[_0x59042f(0x140)]>_0x2c7998[_0x59042f(0x140)]?0x1:_0x2c7998[_0x59042f(0x140)]>_0x2c7e94[_0x59042f(0x140)]?-0x1:0x0);let _0x3cb303=[{'date':_0x136ffc[_0x59042f(0x163)],'changes':_0x1f33c0}];_0x3e9646[_0x59042f(0xaa)]>0x2&&_0x3e9646[_0x59042f(0x187)]((_0x8dee51,_0x18b6f2)=>{const _0x57c5c2=_0x59042f;if(_0x18b6f2>0x0&&_0x18b6f2<_0x3e9646['length']-0x1){const {missingDay1:_0x255b95,notInDay2:_0x25f4e1}=_0x1c74ce(_0x3e9646[_0x18b6f2][_0x57c5c2(0x160)],_0x3e9646[_0x18b6f2+0x1][_0x57c5c2(0x160)]);_0x1f33c0=[],(_0x255b95[_0x57c5c2(0xaa)]!=0x0||_0x25f4e1[_0x57c5c2(0xaa)]!=0x0)&&(_0x255b95[_0x57c5c2(0xaa)]!=0x0&&_0x1f33c0['push'](..._0x255b95),_0x25f4e1['length']!=0x0&&(_0x25f4e1[_0x57c5c2(0x187)](_0x1da9c9=>{const _0x16812d=_0x57c5c2;_0x1da9c9[_0x16812d(0x1f7)]=-_0x1da9c9['number'];}),_0x1f33c0[_0x57c5c2(0x1bd)](..._0x25f4e1)),_0x1f33c0[_0x57c5c2(0x1c1)]((_0x36da86,_0x5b071b)=>_0x36da86['coin']>_0x5b071b[_0x57c5c2(0x140)]?0x1:_0x5b071b[_0x57c5c2(0x140)]>_0x36da86[_0x57c5c2(0x140)]?-0x1:0x0),_0x3cb303[_0x57c5c2(0x1bd)]({'date':_0x3e9646[_0x18b6f2+0x1][_0x57c5c2(0x119)],'changes':_0x1f33c0}));}}),dbConfig[_0x59042f(0x16e)](_0x59042f(0x192))[_0x59042f(0x90)]({'botID':botID})[_0x59042f(0x123)]({..._0x136ffc,'liquidity':_0x3cb303})['write']();}}if(isOlderVersion(_0x5b4ca5,_0x59042f(0x108))){let _0x3093e7=dbConfig[_0x59042f(0x16e)](_0x59042f(0x192))[_0x59042f(0x90)]({'botID':botID})[_0x59042f(0x151)]();if(_0x3093e7){const _0x365904=_0x3093e7[_0x59042f(0x200)],_0x2e29c4=_0x365904?capitalize(_0x365904):'Binance';dbConfig[_0x59042f(0x16e)](_0x59042f(0x192))[_0x59042f(0x90)]({'botID':botID})[_0x59042f(0x123)]({'exchange':_0x2e29c4})[_0x59042f(0x15d)]();}}let _0x491c26=dbPerformance['get']('version')[_0x59042f(0x151)]();isOlderVersion(_0x491c26,_0x59042f(0x1a3))&&setStartDatePerformance();let _0x3def8c=dbCoinResults[_0x59042f(0x16e)](_0x59042f(0x1be))[_0x59042f(0x151)]();if(isOlderVersion(_0x3def8c,_0x59042f(0xf0))){let _0x456cdc=dbCoinResults[_0x59042f(0x16e)]('coins')[_0x59042f(0x151)]();if(_0x456cdc[_0x59042f(0xaa)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4cc601=_0xe582ac;dbConfig[_0x4cc601(0x173)]('version',serverversion)[_0x4cc601(0x15d)](),dbPerformance[_0x4cc601(0x173)](_0x4cc601(0x1be),serverversion)[_0x4cc601(0x15d)](),dbLogs['set'](_0x4cc601(0x1be),serverversion)[_0x4cc601(0x15d)](),dbCoinResults['set'](_0x4cc601(0x1be),serverversion)[_0x4cc601(0x15d)]();}function getConfiguration(_0x150dc7){const _0x141027=_0xe582ac;let _0xf31a77=dbConfig[_0x141027(0x16e)](_0x141027(0x192))[_0x141027(0x90)]({'botID':_0x150dc7})['value']();if(_0xf31a77){let _0x2f2d6e=![];typeof _0xf31a77['threshold']==_0x141027(0x17b)&&(_0xf31a77={..._0xf31a77,'threshold':Number(_0xf31a77['threshold'])},_0x2f2d6e=!![]),_0xf31a77['change24h']==null&&(_0xf31a77={..._0xf31a77,'change24h':-0x14},_0x2f2d6e=!![]),!_0xf31a77[_0x141027(0x11c)]&&(_0xf31a77={..._0xf31a77,'fiat':_0x141027(0x1b4)},_0x2f2d6e=!![]),!_0xf31a77[_0x141027(0x1ac)]&&(_0xf31a77={..._0xf31a77,'onepagemode':settings[_0x141027(0x1ac)]},_0x2f2d6e=!![]),!_0xf31a77[_0x141027(0x175)]&&(_0xf31a77={..._0xf31a77,'colorscheme':_0x141027(0x144)},_0x2f2d6e=!![]),!_0xf31a77['autoliquidity']&&(_0xf31a77={..._0xf31a77,'autoliquidity':!![]},_0x2f2d6e=!![]),_0x2f2d6e&&(_0xf31a77={'botID':_0xf31a77[_0x141027(0x103)],'exchange':_0xf31a77[_0x141027(0x200)],'apiKey':_0xf31a77[_0x141027(0xcb)],'apiSecret':_0xf31a77[_0x141027(0x10d)],'apiPassword':_0xf31a77[_0x141027(0x1fa)],'basecoin':_0xf31a77[_0x141027(0x183)],'botname':_0xf31a77[_0x141027(0x1ce)],'showname':_0xf31a77[_0x141027(0x94)],'threshold':_0xf31a77[_0x141027(0x1ee)],'ordertype':_0xf31a77[_0x141027(0x17d)],'timeout':_0xf31a77[_0x141027(0x11f)],'fiat':_0xf31a77[_0x141027(0x11c)],'startdate':_0xf31a77[_0x141027(0x163)],'recreate':_0xf31a77[_0x141027(0x168)],'timeshift':_0xf31a77[_0x141027(0xfd)],'onepagemode':_0xf31a77[_0x141027(0x1ac)],'headless':_0xf31a77[_0x141027(0x124)],'cooldown':_0xf31a77['cooldown'],'change24h':_0xf31a77['change24h'],'emojibuy':_0xf31a77[_0x141027(0x1d9)],'emojisell':_0xf31a77['emojisell'],'colorscheme':_0xf31a77[_0x141027(0x175)],'portfolio':_0xf31a77[_0x141027(0x170)],'autoliquidity':_0xf31a77[_0x141027(0x1b1)],'liquidity':_0xf31a77[_0x141027(0xcc)],'openOrders':_0xf31a77[_0x141027(0xbb)]},dbConfig[_0x141027(0x16e)](_0x141027(0x192))[_0x141027(0x127)]()[_0x141027(0x15d)](),dbConfig[_0x141027(0x16e)](_0x141027(0x192))[_0x141027(0x1bd)](_0xf31a77)['write']());}else _0xf31a77={'botID':_0x150dc7,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x150dc7,'showname':![],'threshold':0x3,'ordertype':_0x141027(0x19c),'timeout':0x14,'fiat':_0x141027(0x1b4),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x141027(0xfd)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x141027(0x144),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xf31a77;}function emittedConfiguration(){const _0x1905bc=_0xe582ac;let _0x2a401e;if(config[_0x1905bc(0xcb)]=='')_0x2a401e={...config,'configstate':'initial'};else config[_0x1905bc(0xcb)]==_0x1905bc(0xeb)?_0x2a401e={...config,'configstate':_0x1905bc(0x92)}:(_0x2a401e={...config,'apiKey':'************','apiSecret':_0x1905bc(0x14b)},config[_0x1905bc(0x1fa)]&&(_0x2a401e['apiPassword']=_0x1905bc(0x14b)));return _0x2a401e;}function getSettings(){const _0x4207a9=_0xe582ac;return dbSettings['get'](_0x4207a9(0x135))[_0x4207a9(0x151)]();}function getSecure(){const _0x31930e=_0xe582ac;return dbSecure[_0x31930e(0x16e)]('secure')[_0x31930e(0x151)]()||{};}function updateTimeshift(_0x3481da){const _0x42a874=_0xe582ac;let _0x146c9e=dbConfig[_0x42a874(0x16e)](_0x42a874(0x192))['find']({'botID':botID})[_0x42a874(0x151)]();_0x146c9e&&dbConfig[_0x42a874(0x16e)](_0x42a874(0x192))[_0x42a874(0x90)]({'botID':botID})[_0x42a874(0x123)]({'timeshift':_0x3481da})[_0x42a874(0x15d)](),config['timeshift']=_0x3481da,proxyEmit(_0x42a874(0x1cc),emittedConfiguration());}function updateOnepagemode(_0x1492d9){const _0x1a8cdc=_0xe582ac;let _0x2ff30a=dbConfig[_0x1a8cdc(0x16e)](_0x1a8cdc(0x192))[_0x1a8cdc(0x90)]({'botID':botID})[_0x1a8cdc(0x151)]();_0x2ff30a&&dbConfig[_0x1a8cdc(0x16e)](_0x1a8cdc(0x192))[_0x1a8cdc(0x90)]({'botID':botID})[_0x1a8cdc(0x123)]({'onepagemode':_0x1492d9})[_0x1a8cdc(0x15d)](),config[_0x1a8cdc(0x1ac)]=_0x1492d9,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4a3058){const _0xfa250d=_0xe582ac;logger[_0xfa250d(0x1f2)](_0xfa250d(0xe2));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0xfa250d(0x1f2)](_0xfa250d(0x1ea));let _0x1de956=[],_0x31af2d=![],_0x59c2dd=![],_0x321edb=[];_0x4a3058[_0xfa250d(0x170)][_0xfa250d(0x187)](_0x536edf=>{const _0xf150d8=_0xfa250d;if(!_0x536edf[_0xf150d8(0xab)]&&_0x536edf[_0xf150d8(0x140)]!=_0x4a3058[_0xf150d8(0x183)])_0x321edb['push'](_0x536edf[_0xf150d8(0x18a)]);}),_0x321edb[_0xfa250d(0x187)](_0x3be559=>{const _0xc3d4ee=_0xfa250d,_0x48b63e=watchedSymbols[_0xc3d4ee(0x210)](_0x3be559);!_0x48b63e&&_0x1de956[_0xc3d4ee(0x1bd)](_0x3be559);}),_0x321edb[_0xfa250d(0x187)](_0x44c074=>{const _0x487fb3=_0xfa250d,_0x130922=currentCoins[_0x487fb3(0x90)](_0x1a25cd=>_0x1a25cd[_0x487fb3(0x18a)]==_0x44c074);!_0x130922&&(_0x31af2d=!![]);}),currentCoins[_0xfa250d(0x187)](_0x1bc5a8=>{const _0x335002=_0xfa250d;if(_0x1bc5a8[_0x335002(0x140)]!=config[_0x335002(0x183)]){const _0x294ff5=_0x321edb[_0x335002(0x90)](_0x1f88d2=>_0x1f88d2==_0x1bc5a8['symbol']);!_0x294ff5&&(_0x31af2d=!![]);}}),_0x4a3058[_0xfa250d(0x170)][_0xfa250d(0x187)](_0x4c5a4e=>{const _0x53d029=_0xfa250d,_0x488132=config['portfolio'][_0x53d029(0x90)](_0x4d2d25=>_0x4d2d25[_0x53d029(0x140)]==_0x4c5a4e[_0x53d029(0x140)]);if(_0x488132&&_0x4c5a4e[_0x53d029(0x117)]!=_0x488132[_0x53d029(0x117)])_0x59c2dd=!![];});let _0x1c327b=dbConfig[_0xfa250d(0x16e)](_0xfa250d(0x192))[_0xfa250d(0x90)]({'botID':botID})['value']();_0x4a3058={..._0x4a3058,'apiKey':crypt[_0xfa250d(0xb3)](secure[_0xfa250d(0x99)],_0x4a3058['apiKey'])[_0xfa250d(0x1c9)],'apiSecret':crypt[_0xfa250d(0xb3)](secure[_0xfa250d(0x99)],_0x4a3058[_0xfa250d(0x10d)])['message']};_0x4a3058[_0xfa250d(0x1fa)]&&(_0x4a3058['apiPassword']=crypt[_0xfa250d(0xb3)](secure[_0xfa250d(0x99)],_0x4a3058[_0xfa250d(0x1fa)])[_0xfa250d(0x1c9)]);let _0x6abf77=![];if(_0x1c327b){_0x4a3058['apiKey']==_0xfa250d(0x14b)?_0x4a3058['apiKey']=config['apiKey']:_0x6abf77=!![];_0x4a3058[_0xfa250d(0x10d)]=='************'?_0x4a3058[_0xfa250d(0x10d)]=config['apiSecret']:_0x6abf77=!![];if(_0x4a3058['apiPassword']==_0xfa250d(0x14b))_0x4a3058['apiPassword']=config[_0xfa250d(0x1fa)];else{if(_0x4a3058[_0xfa250d(0x1fa)])_0x6abf77=!![];}dbConfig['get'](_0xfa250d(0x192))[_0xfa250d(0x90)]({'botID':botID})[_0xfa250d(0x123)](_0x4a3058)[_0xfa250d(0x15d)]();}else dbConfig[_0xfa250d(0x16e)](_0xfa250d(0x192))[_0xfa250d(0x1bd)](_0x4a3058)[_0xfa250d(0x15d)](),_0x6abf77=!![],process['send']({'status':_0xfa250d(0xfb),'live':_0xfa250d(0x1ab)},_0x2e2840=>{});process[_0xfa250d(0xb4)]({'botname':_0x4a3058[_0xfa250d(0x1ce)]},_0x1ba285=>{}),updateBotManager(),config={..._0x4a3058},proxyEmit(_0xfa250d(0x1fc)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x6abf77)await reset(_0x1de956,!![]);else _0x31af2d||_0x59c2dd?await reset(_0x1de956,![]):getBalances();blockTransactionDetection=![],logger['debug'](_0xfa250d(0x195));}async function storeHeadless(_0x1f0b09){const _0x5ee345=_0xe582ac,_0x1e2605={...config,'headless':_0x1f0b09[_0x5ee345(0x124)]};let _0x319bdc=dbConfig[_0x5ee345(0x16e)]('bot')[_0x5ee345(0x90)]({'botID':botID})['value']();_0x319bdc&&dbConfig[_0x5ee345(0x16e)]('bot')['find']({'botID':botID})[_0x5ee345(0x123)](_0x1e2605)[_0x5ee345(0x15d)](),config={..._0x1e2605},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x4d566c){const _0x1800b7=_0xe582ac,_0xcdffe9={...config,'fiat':_0x4d566c};let _0xbd6abb=dbConfig[_0x1800b7(0x16e)]('bot')[_0x1800b7(0x90)]({'botID':botID})[_0x1800b7(0x151)]();_0xbd6abb&&dbConfig[_0x1800b7(0x16e)]('bot')['find']({'botID':botID})[_0x1800b7(0x123)](_0xcdffe9)[_0x1800b7(0x15d)](),config={..._0xcdffe9},proxyEmit(_0x1800b7(0x1cc),emittedConfiguration());}function resetHistory(){const _0x5b3083=_0xe582ac;logger[_0x5b3083(0xa9)](_0x5b3083(0x150));try{if(fs[_0x5b3083(0xdd)](path['join'](configpath,_0x5b3083(0x16c)+botID+_0x5b3083(0x1b2))))fs[_0x5b3083(0xdc)](path[_0x5b3083(0x171)](configpath,'bot-'+botID+_0x5b3083(0x1b2)));if(fs[_0x5b3083(0xdd)](path[_0x5b3083(0x171)](configpath,_0x5b3083(0x16c)+botID+_0x5b3083(0x146))))fs['unlinkSync'](path[_0x5b3083(0x171)](configpath,_0x5b3083(0x16c)+botID+'-performance.json'));if(fs[_0x5b3083(0xdd)](path[_0x5b3083(0x171)](configpath,'bot-'+botID+_0x5b3083(0x12a))))fs['unlinkSync'](path[_0x5b3083(0x171)](configpath,_0x5b3083(0x16c)+botID+_0x5b3083(0x12a)));}catch(_0x2c2d59){if(_0x2c2d59)logger[_0x5b3083(0xa9)](_0x5b3083(0xd1),_0x2c2d59);}const _0x431fc8=getDate();let _0xf689f3=[];currentCoins[_0x5b3083(0x187)](_0x21f74b=>{const _0x355ab1=_0x5b3083;_0xf689f3['push']({'coin':_0x21f74b[_0x355ab1(0x140)],'number':_0x21f74b[_0x355ab1(0x1f7)],'price':_0x21f74b['last']});});let _0x5e37e6=dbConfig[_0x5b3083(0x16e)](_0x5b3083(0x192))[_0x5b3083(0x90)]({'botID':botID})[_0x5b3083(0x151)]();_0x5e37e6&&(dbConfig[_0x5b3083(0x16e)](_0x5b3083(0x192))[_0x5b3083(0x90)]({'botID':botID})[_0x5b3083(0x123)]({'liquidity':[{'date':_0x431fc8,'changes':_0xf689f3}]})[_0x5b3083(0x15d)](),config[_0x5b3083(0xcc)]=[]),process[_0x5b3083(0xb4)]({'stop':'restart'},_0x393675=>{});}function noslash(_0xc4497c){const _0x1b86d1=_0xe582ac;return _0xc4497c[_0x1b86d1(0x1e0)]('/','');}function updateHighestFee(_0x515351){const _0x1cf0a3=_0xe582ac;console['log']('1',_0x515351);if(_0x515351[_0x1cf0a3(0x1ad)]){let _0x4471ef={'filled':_0x515351['filled']*_0x515351[_0x1cf0a3(0x100)],'amount':_0x515351[_0x1cf0a3(0xf5)]*_0x515351[_0x1cf0a3(0x100)],'side':_0x515351[_0x1cf0a3(0x166)]==_0x1cf0a3(0xe7)?_0x1cf0a3(0x104):_0x1cf0a3(0xe7),'price':0x1/_0x515351['price']};_0x515351={..._0x515351,..._0x4471ef};}console[_0x1cf0a3(0xa7)]('2',_0x515351);const _0x53722d=defaultFee*_0x515351['filled']*_0x515351[_0x1cf0a3(0x100)];console['log'](_0x53722d),lastFees['recent20'][_0x1cf0a3(0xaa)]===0x14&&lastFees[_0x1cf0a3(0x17c)]['shift'](),lastFees[_0x1cf0a3(0x17c)][_0x1cf0a3(0x1bd)](_0x53722d),lastFees[_0x1cf0a3(0x9e)]=Math[_0x1cf0a3(0x16f)](...lastFees[_0x1cf0a3(0x17c)]);}async function updateNumberCoinsCcxt(_0x4f0b68){const _0x415051=_0xe582ac;logger['debug'](_0x415051(0x1e9)+_0x4f0b68[_0x415051(0x18a)]+_0x415051(0x14a)+_0x4f0b68[_0x415051(0x165)]+'\x20|\x20'+_0x4f0b68['id']);let _0x2bec44=_0x4f0b68['status'],_0x5c5192=![];currentCoins[_0x415051(0x187)](_0x29da90=>{_0x29da90['symbol']==_0x4f0b68['symbol']&&(_0x5c5192=!![]);});if(!_0x5c5192)return;const _0x35c2d9=currentCoins[_0x415051(0x90)](_0xf24088=>_0xf24088['symbol']==_0x4f0b68[_0x415051(0x18a)]),_0x3c6da3=_0x15c1ad=>{if(_0x35c2d9)_0x35c2d9['orderstatus']=_0x15c1ad;};if(_0x2bec44==_0x415051(0xf4))_0x3c6da3(_0x415051(0xf4));else{if(_0x2bec44=='canceled'){_0x3c6da3(_0x415051(0x212));const _0x728d74=await getCoins();[currentCoins,currentCoinsAll]=_0x728d74,await getOpenOrders(),handleOpenOrders();}else{if(_0x2bec44==_0x415051(0x1e6)){logger[_0x415051(0x1f2)](_0x415051(0x118)+_0x4f0b68[_0x415051(0x18a)]+_0x415051(0x14a)+_0x4f0b68[_0x415051(0xf5)]+'\x20|\x20'+_0x4f0b68['id']);let _0x37fbba=![];if(lastOrders)for(const _0x20419e of lastOrders){const _0x320c93=0xc8,_0x389947=0x1388;let _0x480e5b=0x0;while(!_0x20419e[_0x415051(0x1f6)]&&_0x480e5b*_0x320c93<_0x389947){_0x480e5b++,await sleep(_0x320c93);}if(_0x480e5b>0x0)logger[_0x415051(0x1f2)](_0x415051(0x178)+_0x480e5b*_0x320c93/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x20419e[_0x415051(0x1f6)]==_0x4f0b68['id']){logger[_0x415051(0x1f2)](_0x415051(0x214)+_0x4f0b68['id']),_0x37fbba=!![];if(_0x20419e[_0x415051(0xf5)]==0x0){logger[_0x415051(0x1f2)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x4f0b68['id']);if(_0x4f0b68['average'])_0x20419e[_0x415051(0x100)]=_0x4f0b68[_0x415051(0x169)];else{if(_0x4f0b68[_0x415051(0x100)])_0x20419e[_0x415051(0x100)]=_0x4f0b68[_0x415051(0x100)];else{}}_0x20419e[_0x415051(0xf5)]=_0x4f0b68[_0x415051(0xf5)],updateHighestFee(_0x20419e),_0x3c6da3('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x28d5b1=await getCoins();[currentCoins,currentCoinsAll]=_0x28d5b1;}_0x20419e[_0x415051(0xf1)]={'currency':_0x4f0b68[_0x415051(0xf1)]?_0x4f0b68['fee'][_0x415051(0x203)]:null,'cost':_0x4f0b68[_0x415051(0xf1)]?_0x4f0b68[_0x415051(0xf1)]['cost']:0x0},await updateCoinResults(_0x20419e);}}}if(!_0x37fbba){logger[_0x415051(0x1f2)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x4f0b68['id']),_0x3c6da3(_0x415051(0xf5));const _0x50902e=await getCoins();[currentCoins,currentCoinsAll]=_0x50902e,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1ef316=JSON[_0x415051(0x134)](lastBalances[_0x415051(0x170)]);const _0x432a93=_0x1ef316[_0x415051(0x90)](_0x3dd093=>_0x3dd093['symbol']==_0x4f0b68['symbol']);if(_0x432a93){if(_0x2bec44==_0x415051(0xf4))_0x432a93[_0x415051(0x1f0)]=_0x432a93[_0x415051(0x1f0)]==_0x415051(0xf5)?_0x415051(0xf5):_0x415051(0xf4);else{if(_0x2bec44==_0x415051(0x212))_0x432a93[_0x415051(0x1f0)]=_0x432a93[_0x415051(0x1f0)]==_0x415051(0xf5)?_0x415051(0xf5):_0x415051(0x212);else _0x2bec44==_0x415051(0x1e6)&&(_0x432a93[_0x415051(0x1f0)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x415051(0x164)](_0x1ef316)},proxyEmit(_0x415051(0xac),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x1546a6=![];currentCoins['forEach'](_0x4fbc95=>{const _0x1010c9=_0x29ff;_0x1546a6=allOpenOrders[_0x1010c9(0x90)](_0x1c242c=>_0x1c242c['symbol']==_0x4fbc95[_0x1010c9(0x18a)]),_0x4fbc95[_0x1010c9(0x1f0)]=_0x1546a6?_0x1010c9(0xf4):_0x1010c9(0xa2);});}async function getCoins(_0x52b31e=!![],_0x1bfca3=config[_0xe582ac(0x183)]){const _0x4c1064=_0xe582ac;let _0x36aa39,_0x5b0b61=[],_0x128753=[],_0xf0e73d=[],_0x887880=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x36aa39=await exchange[_0x4c1064(0x139)](),mybalances=_0x36aa39[_0x4c1064(0x96)];for(const [_0x2e833e,_0x481f9d]of Object['entries'](mybalances)){_0x887880[_0x4c1064(0x1bd)](_0x2e833e);}if(_0x1bfca3=='')for(const [_0x35a53b,_0x2c5321]of Object[_0x4c1064(0x207)](mybalances)){_0x2c5321!=0x0&&_0x128753[_0x4c1064(0x1bd)]({'coin':_0x35a53b});}else{let _0x590a05=![];for(const [_0x16a231,_0x290639]of Object['entries'](mybalances)){if(_0x887880[_0x4c1064(0x210)](_0x16a231)){const _0x4d49ef=config[_0x4c1064(0x170)][_0x4c1064(0x90)](_0x482caf=>_0x482caf[_0x4c1064(0x140)]==_0x16a231),_0x1d9c6f=_0x16a231+'/'+_0x1bfca3,_0x3e1ed8=_0x1bfca3+'/'+_0x16a231,_0x51995c=currentCoins[_0x4c1064(0x90)](_0x95b184=>_0x95b184[_0x4c1064(0x140)]==_0x16a231);_0x590a05=![];if((_0x290639!=0x0||_0x4d49ef)&&(allSymbols['includes'](_0x1d9c6f)||_0x16a231==_0x1bfca3))_0x16a231!=_0x1bfca3&&_0x5b0b61[_0x4c1064(0x1bd)](_0x1d9c6f),_0x128753[_0x4c1064(0x1bd)]({'coin':_0x16a231,'symbol':_0x1d9c6f,'reverse':![],'number':Math[_0x4c1064(0x16f)](_0x290639+(_0x4d49ef&&_0x4d49ef[_0x4c1064(0x117)]||0x0),0x0),'orderstatus':_0x51995c?_0x51995c[_0x4c1064(0x1f0)]:_0x4c1064(0xa2)});else(_0x290639!=0x0||_0x4d49ef)&&allSymbols[_0x4c1064(0x210)](_0x3e1ed8)&&(_0x16a231!=_0x1bfca3&&_0x5b0b61[_0x4c1064(0x1bd)](_0x3e1ed8),_0x128753['push']({'coin':_0x16a231,'symbol':_0x3e1ed8,'reverse':!![],'number':Math['max'](_0x290639+(_0x4d49ef&&_0x4d49ef[_0x4c1064(0x117)]||0x0),0x0),'orderstatus':_0x51995c?_0x51995c[_0x4c1064(0x1f0)]:'none'}));}}}}catch(_0x420e48){if(!_0x52b31e)handleErrorNoStop(_0x420e48,_0x4c1064(0xcd));else await handleError(_0x420e48,_0x4c1064(0xcd));}return _0xf0e73d=cloneDeep(_0x128753),_0x128753=_0x128753[_0x4c1064(0x154)](_0x18e234=>{const _0x13f1a8=_0x4c1064,_0x10ba6b=config['portfolio'][_0x13f1a8(0x90)](_0x569adc=>_0x569adc[_0x13f1a8(0x140)]==_0x18e234[_0x13f1a8(0x140)]);return _0x10ba6b&&!_0x10ba6b[_0x13f1a8(0xab)];}),[_0x128753,_0xf0e73d];}async function getCoinNumber(_0x1b6622){const _0x294134=_0xe582ac;let _0x39d6a4;try{const _0x3f081e=await exchange[_0x294134(0x139)]();_0x39d6a4=_0x3f081e[_0x294134(0x96)][_0x1b6622];}catch(_0x1b5592){await handleError(_0x1b5592,'getCoinNumber()');}return _0x39d6a4;}async function getOpenOrders(){const _0x5a06c5=_0xe582ac;let _0x4baa69;allOpenOrders=[];try{for(const _0x661594 of config[_0x5a06c5(0x170)]){!_0x661594[_0x5a06c5(0xab)]&&_0x661594[_0x5a06c5(0x140)]!=config[_0x5a06c5(0x183)]&&(_0x4baa69=await exchange['fetchOpenOrders'](_0x661594[_0x5a06c5(0x18a)]),_0x4baa69[_0x5a06c5(0xaa)]>0x0&&allOpenOrders[_0x5a06c5(0x1bd)](_0x4baa69[0x0]));}}catch(_0x2138cb){await handleError(_0x2138cb,_0x5a06c5(0x18b));}}async function handleOpenOrders(_0x388952=0x0){const _0xae9e2c=_0xe582ac;allOpenOrders[_0xae9e2c(0xaa)]==0x0&&lockOrders==ORDERS[_0xae9e2c(0x1ec)]&&allOrdersPlaced&&(_0x388952==0x0?(logger[_0xae9e2c(0x1f2)]('1\x20-\x20Handle\x20open\x20orders'),_0x388952++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0xae9e2c(0x1f2)](_0xae9e2c(0x1bc)),validateOrders(_0xae9e2c(0x167))));}async function testAPI(_0x4a5fa2){const _0x4f9ae6=_0xe582ac,_0x3b447a=ccxt[_0x4a5fa2['exchange'][_0x4f9ae6(0x19b)]()],_0x1b18a9=new _0x3b447a({'apiKey':_0x4a5fa2['apiKey'],'secret':_0x4a5fa2['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4f9ae6(0x1af)}});if(_0x4a5fa2[_0x4f9ae6(0x1fa)])_0x1b18a9[_0x4f9ae6(0x1bf)]=_0x4a5fa2[_0x4f9ae6(0x1fa)];try{await _0x1b18a9[_0x4f9ae6(0x20c)]();}catch(_0x319c3c){throw _0x319c3c;}}function cloneDeep(_0x9406a2){const _0x25261f=_0xe582ac;return JSON['parse'](JSON[_0x25261f(0x164)](_0x9406a2));}async function getPortfolio(_0x2f222e){const _0x74368e=_0xe582ac;let _0x1a89f9=[],_0x43e06f=[],_0x42fede=[],_0x320a0e;if(_0x2f222e[_0x74368e(0xcb)]!=='************'||_0x2f222e['apiSecret']!==_0x74368e(0x14b)||_0x2f222e['apiPassword']&&_0x2f222e[_0x74368e(0x1fa)]!=='************'){if(config['exchange']){if(_0x2f222e['apiKey']==_0x74368e(0x14b))_0x2f222e[_0x74368e(0xcb)]=config['apiKey'];if(_0x2f222e[_0x74368e(0x10d)]==_0x74368e(0x14b))_0x2f222e[_0x74368e(0x10d)]=config[_0x74368e(0x10d)];if(_0x2f222e['apiPassword']==_0x74368e(0x14b))_0x2f222e[_0x74368e(0x1fa)]=config[_0x74368e(0x1fa)];try{await testAPI(_0x2f222e);}catch(_0x298754){if(_0x298754[_0x74368e(0x157)]()[_0x74368e(0x210)](_0x74368e(0xcf))){logger[_0x74368e(0x1f2)](_0x74368e(0x14e)),proxyEmit(_0x74368e(0x170),![]);return;}else{handleError(_0x298754,'getPortfolio(0)');return;}}}await initExchange(_0x2f222e[_0x74368e(0x200)],_0x2f222e[_0x74368e(0xcb)],_0x2f222e[_0x74368e(0x10d)],_0x2f222e[_0x74368e(0x1fa)]);try{await loadSymbols(_0x2f222e[_0x74368e(0x200)],!![]);}catch(_0x36c776){if(_0x36c776['toString']()[_0x74368e(0x210)]('AuthenticationError')){proxyEmit(_0x74368e(0x170),![]);return;}else{handleError(_0x36c776,_0x74368e(0xe4));return;}}const _0x4c712a=await getCoins(![],_0x2f222e[_0x74368e(0x183)]);_0x42fede=cloneDeep(_0x4c712a[0x1]);}else _0x42fede=cloneDeep(currentCoinsAll);if(_0x2f222e[_0x74368e(0x183)]=='')proxyEmit(_0x74368e(0x170),_0x42fede);else{_0x42fede[_0x74368e(0x187)](_0x235ed9=>{const _0x5aec27=_0x74368e;if(_0x235ed9['coin']!=_0x2f222e['basecoin'])_0x1a89f9['push'](_0x235ed9[_0x5aec27(0x18a)]);});try{_0x43e06f=await exchange[_0x74368e(0x101)](_0x1a89f9);}catch(_0x2c2dc3){if(_0x2c2dc3[_0x74368e(0x157)]()[_0x74368e(0x210)]('AuthenticationError')){proxyEmit('portfolio',![]);return;}else{handleError(_0x2c2dc3,_0x74368e(0xe6));return;}}_0x42fede[_0x74368e(0x187)](_0x4754a4=>{const _0x4ba1f5=_0x74368e;_0x4754a4[_0x4ba1f5(0x140)]!=_0x2f222e[_0x4ba1f5(0x183)]?_0x320a0e=_0x4754a4[_0x4ba1f5(0x1ad)]?0x1/_0x43e06f[_0x4754a4[_0x4ba1f5(0x18a)]]['last']:_0x43e06f[_0x4754a4[_0x4ba1f5(0x18a)]][_0x4ba1f5(0x1ba)]:_0x320a0e=0x1,_0x4754a4[_0x4ba1f5(0x100)]=formatResult(_0x320a0e,0x8);}),proxyEmit(_0x74368e(0x170),_0x42fede);}}function truncateTradeAmount(_0x355b9e,_0x41e5a4){let _0x133827=0x0;try{_0x133827=exchange['amountToPrecision'](_0x355b9e,_0x41e5a4);}catch(_0x2263cf){}return _0x133827;}function checkMinimums(_0x2001eb){const _0x43f717=_0xe582ac;let _0x3764ef=!![];const _0x2faa8b=!_0x2001eb[_0x43f717(0x1ad)]?markets[_0x2001eb['symbol']][_0x43f717(0xd3)]['amount']['min']:markets[_0x2001eb[_0x43f717(0x18a)]]['limits']['cost'][_0x43f717(0x126)],_0x50ffc2=!_0x2001eb['reverse']?markets[_0x2001eb['symbol']][_0x43f717(0xd3)][_0x43f717(0x14d)][_0x43f717(0x126)]:markets[_0x2001eb[_0x43f717(0x18a)]][_0x43f717(0xd3)][_0x43f717(0xe0)][_0x43f717(0x126)],_0x1da8fa=truncateTradeAmount(_0x2001eb[_0x43f717(0x18a)],_0x2001eb['trade']);_0x2001eb['trade']=_0x1da8fa;if(Math[_0x43f717(0x14c)](_0x1da8fa)<_0x2faa8b)_0x3764ef=![];if(Math[_0x43f717(0x14c)](_0x1da8fa)*_0x2001eb['last']<_0x50ffc2)_0x3764ef=![];if(_0x2001eb[_0x43f717(0x166)]==_0x43f717(0xe7)){let _0x34c133=config[_0x43f717(0x170)][_0x43f717(0x90)](_0x34ce5b=>_0x34ce5b['coin']==_0x2001eb['coin']);if(_0x34c133['offset']>0x0){if(Math[_0x43f717(0x14c)](_0x1da8fa)>_0x2001eb['number']-_0x34c133[_0x43f717(0x117)])_0x3764ef=![];}else{if(Math['abs'](_0x1da8fa)>_0x2001eb[_0x43f717(0x1f7)])_0x3764ef=![];}}if(_0x2001eb['side']==_0x43f717(0x104)){let _0xc7af71=config[_0x43f717(0x170)][_0x43f717(0x90)](_0x542b2d=>_0x542b2d[_0x43f717(0x140)]==config['basecoin']),_0x1c5eeb=currentCoins[_0x43f717(0x90)](_0xc5d0c3=>_0xc5d0c3[_0x43f717(0x140)]==config[_0x43f717(0x183)]);if(_0xc7af71[_0x43f717(0x117)]>0x0){if(Math[_0x43f717(0x14c)](_0x1da8fa)*_0x2001eb['last']>_0x1c5eeb[_0x43f717(0x1f7)]-_0xc7af71[_0x43f717(0x117)])_0x3764ef=![];}else{if(Math['abs'](_0x1da8fa)*_0x2001eb['last']>_0x1c5eeb[_0x43f717(0x1f7)])_0x3764ef=![];}}return _0x3764ef;}async function getBalances(_0xb05e6b=!![]){const _0x540ac3=_0xe582ac;let _0x26966c=0x0,_0x1bf242;const _0x7cde52=config[_0x540ac3(0x1ee)];if(config['headless']&&config[_0x540ac3(0x1da)]<0x0)await validate24hChanges();currentCoins[_0x540ac3(0x187)](_0x352a90=>{const _0x5c7301=_0x540ac3;if(_0x352a90[_0x5c7301(0x140)]!=config[_0x5c7301(0x183)]){let _0x502887=global['ticker'][noslash(_0x352a90[_0x5c7301(0x18a)])];_0x1bf242=_0x352a90['reverse']?0x1/_0x502887:_0x502887;}else _0x1bf242=0x1;let _0x3dadfa=_0x352a90[_0x5c7301(0x1f7)]*_0x1bf242;_0x26966c+=_0x3dadfa,_0x352a90[_0x5c7301(0x1ba)]=formatResult(Number(_0x1bf242),0x8),_0x352a90[_0x5c7301(0x151)]=_0x3dadfa;}),currentCoins['forEach'](_0x5858a6=>{const _0x183be0=_0x540ac3;let _0x419f73=config[_0x183be0(0x170)][_0x183be0(0x90)](_0x25252d=>_0x25252d[_0x183be0(0x140)]==_0x5858a6['coin']),_0x83c0e=Number(_0x419f73[_0x183be0(0xb6)]),_0x33ed47=_0x5858a6[_0x183be0(0x151)]/_0x26966c*0x64,_0x46e6cc=_0x83c0e*_0x26966c/0x64/_0x5858a6[_0x183be0(0x1ba)]-_0x5858a6[_0x183be0(0x1f7)];_0x5858a6['distribution']=formatResult(_0x33ed47,0x3),_0x5858a6[_0x183be0(0x116)]=formatResult(_0x83c0e,0x3),_0x5858a6[_0x183be0(0x10f)]=formatResult(_0x46e6cc,0x8),_0x5858a6[_0x183be0(0x166)]='',_0x5858a6[_0x183be0(0x194)]=![];if(_0x5858a6[_0x183be0(0x140)]!=config[_0x183be0(0x183)]){if(_0x5858a6[_0x183be0(0xb6)]>_0x83c0e)_0x5858a6[_0x183be0(0x166)]=_0x183be0(0xe7),_0x5858a6[_0x183be0(0x194)]=checkMinimums(_0x5858a6);else _0x5858a6['distribution']<_0x83c0e&&(_0x5858a6[_0x183be0(0x166)]=_0x183be0(0x104),_0x5858a6[_0x183be0(0x194)]=checkMinimums(_0x5858a6));}_0x5858a6[_0x183be0(0xb2)]=_0x5858a6[_0x183be0(0xb6)]/_0x5858a6[_0x183be0(0x116)]-0x1;if(_0x5858a6[_0x183be0(0x1f0)]==_0x183be0(0xf5)||_0x5858a6[_0x183be0(0x1f0)]==_0x183be0(0x212))_0x5858a6['orderstatus']=_0x183be0(0xa2);}),currentCoins[_0x540ac3(0x1c1)]((_0x22f3b4,_0x4fcbc9)=>_0x22f3b4[_0x540ac3(0xb2)]<_0x4fcbc9[_0x540ac3(0xb2)]?0x1:_0x4fcbc9[_0x540ac3(0xb2)]<_0x22f3b4['delta']?-0x1:0x0);const _0x751dc1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x751dc1[_0x540ac3(0x1aa)],'usd':_0x751dc1['usd'],'portfolio':JSON[_0x540ac3(0x164)](currentCoins),'threshold':_0x7cde52},proxyEmit(_0x540ac3(0xac),{'serverversion':serverversion,'balances':lastBalances});if(_0xb05e6b){if(config[_0x540ac3(0x124)])headlessMode({'portfolio':currentCoins,'threshold':_0x7cde52});else{if(lockOrders==ORDERS[_0x540ac3(0xbd)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x7cde52});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0xb3f5b3=getNormalizedPerformance();getStartingBalances(_0xb3f5b3),emitPerformance(_0xb3f5b3);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x2574d4=getNormalizedPerformance();emitPerformance(_0x2574d4),getStartingBalances(_0x2574d4),logger[_0x540ac3(0x1f2)](_0x540ac3(0xa1));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3cd8f0=_0xe582ac;if(!lastBalances)return;let _0x108166=[],_0x57d0f4,_0x586584=JSON[_0x3cd8f0(0x134)](lastBalances['portfolio']);_0x586584[_0x3cd8f0(0x1c1)]((_0x48737b,_0x1eb00b)=>_0x48737b[_0x3cd8f0(0x140)]>_0x1eb00b[_0x3cd8f0(0x140)]?0x1:_0x1eb00b['coin']>_0x48737b['coin']?-0x1:0x0),_0x586584[_0x3cd8f0(0x187)](_0x6979a5=>{const _0x5b5763=_0x3cd8f0;let _0x44a202={'coin':_0x6979a5[_0x5b5763(0x140)],'number':_0x6979a5['number'],'price':_0x6979a5['last']};_0x108166['push'](_0x44a202);});const _0x41514c=await getFiat();_0x57d0f4={'date':lastBalances[_0x3cd8f0(0xe3)][_0x3cd8f0(0x97)]('\x20')[0x0],'eur':_0x41514c[_0x3cd8f0(0x1aa)],'usd':_0x41514c[_0x3cd8f0(0x145)],'coins':_0x108166};let _0x5d77e6=dbPerformance['get']('data')['find']({'date':_0x57d0f4[_0x3cd8f0(0x119)]})[_0x3cd8f0(0x151)]();_0x5d77e6?_0x57d0f4[_0x3cd8f0(0x119)]!=config['startdate']&&dbPerformance[_0x3cd8f0(0x16e)](_0x3cd8f0(0xf9))['find']({'date':_0x57d0f4[_0x3cd8f0(0x119)]})[_0x3cd8f0(0x123)](_0x57d0f4)[_0x3cd8f0(0x15d)]():dbPerformance[_0x3cd8f0(0x16e)]('data')[_0x3cd8f0(0x1bd)](_0x57d0f4)[_0x3cd8f0(0x15d)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x10758a=_0xe582ac;let _0x4d910e=[];if(dbPerformance[_0x10758a(0x1d0)](_0x10758a(0xf9))[_0x10758a(0x151)]()){let _0x25f991=dbPerformance[_0x10758a(0x16e)](_0x10758a(0xf9))[_0x10758a(0xee)]()['filter'](_0x359643=>{const _0x2b888e=_0x10758a;if(_0x359643[_0x2b888e(0x160)][_0x2b888e(0xaa)]==0x0)return![];else return!![];})['sortBy'](_0x10758a(0x119))[_0x10758a(0x151)](),_0x4f0f39=[...config['liquidity']];_0x4f0f39[_0x10758a(0x1c1)]((_0x49523a,_0x208ad8)=>_0x49523a['date']>_0x208ad8[_0x10758a(0x119)]?-0x1:_0x208ad8[_0x10758a(0x119)]>_0x49523a[_0x10758a(0x119)]?0x1:0x0);let _0x35666d=0x1,_0x428e5b=[],_0x295d53=0x0;_0x25f991['slice']()[_0x10758a(0x1ad)]()[_0x10758a(0x187)]((_0x7b4e1b,_0x4cb5bd)=>{const _0x391993=_0x10758a;if(_0x4f0f39[_0x295d53]){if(_0x25f991[_0x25f991[_0x391993(0xaa)]-_0x4cb5bd]&&_0x4f0f39[_0x295d53]['date']==_0x25f991[_0x25f991[_0x391993(0xaa)]-_0x4cb5bd][_0x391993(0x119)]){if(_0x4cb5bd<_0x25f991[_0x391993(0xaa)]){let _0x5a9262=0x0,_0x1d51d4=0x0;_0x25f991[_0x25f991[_0x391993(0xaa)]-_0x4cb5bd][_0x391993(0x160)][_0x391993(0x187)](_0x3d25a3=>{const _0x423da5=_0x391993;_0x1d51d4+=_0x3d25a3[_0x423da5(0x1f7)]*_0x3d25a3[_0x423da5(0x100)];}),_0x4f0f39[_0x295d53][_0x391993(0x1d3)][_0x391993(0x187)](_0x4653ae=>{_0x5a9262+=_0x4653ae['number']*_0x4653ae['price'];}),_0x35666d*=_0x5a9262/(_0x1d51d4-_0x5a9262)+0x1;}_0x295d53++;}}let _0x9cb6a9=0x0;_0x7b4e1b[_0x391993(0x160)][_0x391993(0x187)](_0x25bde1=>{const _0x462012=_0x391993;_0x9cb6a9+=_0x25bde1['number']*_0x25bde1[_0x462012(0x100)];}),_0x428e5b[_0x25f991[_0x391993(0xaa)]-_0x4cb5bd-0x1]=_0x9cb6a9*(_0x35666d-0x1);});let _0x521c15=[];_0x4f0f39=[...config['liquidity']]||[];let _0x4d3ef8=0x0;_0x295d53=0x0,_0x25f991[_0x10758a(0x187)]((_0x6184e5,_0x2c9ea2)=>{const _0xea8f7a=_0x10758a;if(_0x4f0f39[_0x295d53]){const _0x4b975f=fns[_0xea8f7a(0x134)](_0x4f0f39[_0x295d53][_0xea8f7a(0x119)],_0xea8f7a(0x1bb),new Date()),_0x76e3be=fns[_0xea8f7a(0x134)](_0x6184e5[_0xea8f7a(0x119)],_0xea8f7a(0x1bb),new Date());if(fns[_0xea8f7a(0xb9)](_0x4b975f,_0x76e3be)){let _0x4bb69d=0x0;_0x4f0f39[_0x295d53][_0xea8f7a(0x1d3)][_0xea8f7a(0x187)](_0x1e6dad=>{const _0x13d1bd=_0xea8f7a;!_0x521c15[_0x1e6dad[_0x13d1bd(0x140)]]?_0x521c15[_0x1e6dad[_0x13d1bd(0x140)]]=_0x1e6dad[_0x13d1bd(0x1f7)]:(_0x4bb69d=_0x521c15[_0x1e6dad[_0x13d1bd(0x140)]],_0x521c15[_0x1e6dad[_0x13d1bd(0x140)]]+=_0x1e6dad['number']);const _0x6afdf5=_0x6184e5['coins'][_0x13d1bd(0x90)](_0x26c41c=>_0x26c41c[_0x13d1bd(0x140)]==_0x1e6dad['coin']);(!_0x6afdf5||_0x6afdf5[_0x13d1bd(0x1f7)]==0x0)&&(_0x4d3ef8+=(-_0x1e6dad[_0x13d1bd(0x1f7)]-_0x4bb69d)*_0x1e6dad[_0x13d1bd(0x100)]);}),_0x295d53++;}}_0x6184e5[_0xea8f7a(0x160)]['forEach']((_0x25cea2,_0x5a2ff5)=>{const _0x1b37c2=_0xea8f7a;_0x521c15[_0x25cea2[_0x1b37c2(0x140)]]&&(_0x25cea2['initial']=_0x521c15[_0x25cea2['coin']]);}),_0x4d910e[_0xea8f7a(0x1bd)]({'date':_0x6184e5['date'],'eur':_0x6184e5['eur'],'usd':_0x6184e5['usd'],'offset':_0x428e5b[_0x2c9ea2],'netoffset':_0x4d3ef8,'coins':_0x6184e5[_0xea8f7a(0x160)]});});}return _0x4d910e;}function emitPerformance(_0x51d146){const _0x1a8e23=_0xe582ac;_0x51d146['length']!==0x0?(proxyEmit(_0x1a8e23(0xd7),_0x51d146),lastPerformanceEmitted=getDate()):proxyEmit(_0x1a8e23(0xd7),[]);}function getPerf(_0x37b832,_0x2f4620){const _0x352f5d=_0xe582ac;let _0xe27f18=0x0,_0xd9f58c=0x0,_0x506c16=0x0;_0x37b832['coins'][_0x352f5d(0x187)](_0x1e3cc3=>{const _0x36a363=_0x352f5d;_0xe27f18+=_0x1e3cc3[_0x36a363(0x1f7)]*_0x1e3cc3[_0x36a363(0x100)];});_0x2f4620&&(_0xe27f18+=_0x37b832['offset']);if(config[_0x352f5d(0x183)]==='BTC'||config['basecoin']==='ETH')_0xd9f58c=_0xe27f18*_0x37b832[_0x352f5d(0x1aa)],_0x506c16=_0xe27f18*_0x37b832[_0x352f5d(0x145)];else{if(usdBasecoins['includes'](config['basecoin']))_0xd9f58c=_0xe27f18*_0x37b832[_0x352f5d(0x1aa)]/_0x37b832[_0x352f5d(0x145)],_0x506c16=_0xe27f18;else config[_0x352f5d(0x183)]===_0x352f5d(0x191)&&(_0xd9f58c=_0xe27f18,_0x506c16=_0xe27f18*_0x37b832[_0x352f5d(0x145)]/_0x37b832[_0x352f5d(0x1aa)]);}return[_0xe27f18,_0xd9f58c,_0x506c16];}function getKPIs(_0x15fea0,_0x11efd9=_0xe582ac(0x191)){const _0x179815=_0xe582ac,_0xcb3669=config[_0x179815(0x183)],_0x54c361=lastBalances,_0x3caec4=currentCoins,_0x3ab0fb=getNormalizedPerformance(),_0x4a8ef9=_0x15fea0===_0x179815(0x183)?_0xcb3669:_0x15fea0===_0x179815(0x11c)||_0x15fea0===_0x179815(0xbf)?_0x11efd9:'Net\x20'+_0xcb3669,_0x59152c=_0x15fea0===_0x179815(0x179)?'Net\x20effect':_0x15fea0==='net-fiat'?_0x179815(0xc2):_0x4a8ef9+_0x179815(0x20d),_0x2b0d94=_0x15fea0===_0x179815(0x179)||_0x15fea0===_0x179815(0xbf)?_0x179815(0xc2):_0x4a8ef9+'\x20change';let _0x1062f5=0x0;_0x3caec4[_0x179815(0x187)](_0x4ec3dd=>{const _0x4050b2=_0x179815;_0x1062f5+=_0x4ec3dd['number']*_0x4ec3dd[_0x4050b2(0x1ba)];});if(_0x15fea0==='fiat'||_0x15fea0===_0x179815(0xbf)){if(_0xcb3669==='BTC'||_0xcb3669===_0x179815(0x184))_0x1062f5=_0x1062f5*(_0x11efd9===_0x179815(0x191)?_0x54c361[_0x179815(0x1aa)]:_0x54c361['usd']);else{if(usdBasecoins['includes'](_0xcb3669))_0x1062f5=_0x1062f5*(_0x11efd9===_0x179815(0x191)?_0x54c361[_0x179815(0x1aa)]/_0x54c361['usd']:0x1);else _0xcb3669===_0x179815(0x191)&&(_0x1062f5=_0x1062f5*(_0x11efd9==='EUR'?0x1:_0x54c361[_0x179815(0x145)]/_0x54c361['eur']));}}let _0x4c3091;if(_0x1062f5!==0x0){if(_0x15fea0==='basecoin')_0x4c3091=(_0x1062f5/startingBalances[_0x179815(0x183)]-0x1)*0x64;else{if(_0x11efd9===_0x179815(0x191))_0x4c3091=(_0x1062f5/startingBalances[_0x179815(0x1aa)]-0x1)*0x64;else _0x4c3091=(_0x1062f5/startingBalances[_0x179815(0x145)]-0x1)*0x64;}let _0x34fb59=0x0;if(startingBalances['coins'])_0x3caec4[_0x179815(0x187)](_0x21c7d2=>{const _0x39ca45=_0x179815;let _0x4737c4=startingBalances[_0x39ca45(0x160)][_0x39ca45(0x90)](_0x531474=>_0x531474[_0x39ca45(0x140)]===_0x21c7d2[_0x39ca45(0x140)]);if(_0x4737c4&&_0x4737c4[_0x39ca45(0x140)]&&_0x21c7d2[_0x39ca45(0x1f7)]!==0x0)_0x34fb59+=_0x4737c4['number']*_0x21c7d2[_0x39ca45(0x1ba)];});let _0x3c4c23=0x0;if(_0x3ab0fb[_0x179815(0xaa)]!==0x0){let _0x5e33d5=_0x3ab0fb[_0x3ab0fb['length']-0x1];_0x3c4c23=_0x5e33d5['netoffset'];}_0x34fb59-=_0x3c4c23;_0x15fea0==='net-basecoin'&&(_0x4c3091=(_0x1062f5-_0x34fb59)/startingBalances[_0x179815(0x183)]*0x64,_0x1062f5=_0x1062f5-_0x34fb59);if(_0x15fea0===_0x179815(0xbf)){let _0xa5f5f4=_0x11efd9==='EUR'?startingBalances[_0x179815(0x1aa)]:startingBalances[_0x179815(0x145)];if(_0xcb3669===_0x179815(0xd2)||_0xcb3669===_0x179815(0x184))_0x34fb59=_0x11efd9===_0x179815(0x191)?_0x34fb59*_0x54c361[_0x179815(0x1aa)]:_0x34fb59*_0x54c361['usd'];else{if(usdBasecoins[_0x179815(0x210)](_0xcb3669))_0x34fb59=_0x11efd9==='EUR'?_0x34fb59*_0x54c361[_0x179815(0x1aa)]/_0x54c361[_0x179815(0x145)]:_0x34fb59;else _0xcb3669===_0x179815(0x191)&&(_0x34fb59=_0x11efd9===_0x179815(0x191)?_0x34fb59:_0x34fb59*_0x54c361[_0x179815(0x145)]/_0x54c361['eur']);}_0x4c3091=(_0x1062f5-_0x34fb59)/_0xa5f5f4*0x64,_0x1062f5=_0x1062f5-_0x34fb59;}if(_0x4c3091){if(_0x4c3091<0x64)_0x4c3091=_0x4c3091[_0x179815(0x142)](0x2);else{if(_0x4c3091<0x3e8)_0x4c3091=_0x4c3091[_0x179815(0x142)](0x1);else _0x4c3091=_0x4c3091[_0x179815(0x142)](0x0);}}else _0x4c3091=Number('0')[_0x179815(0x142)](0x2);if(_0x1062f5){if(Math['abs'](_0x1062f5)<0.000001)_0x1062f5=_0x1062f5[_0x179815(0x142)](0x2);else{if(Math[_0x179815(0x14c)](_0x1062f5)<0.1)_0x1062f5=_0x1062f5[_0x179815(0x142)](0x6);else{if(Math[_0x179815(0x14c)](_0x1062f5)<0x1)_0x1062f5=_0x1062f5[_0x179815(0x142)](0x5);else{if(Math[_0x179815(0x14c)](_0x1062f5)<0xa)_0x1062f5=_0x1062f5[_0x179815(0x142)](0x4);else{if(Math['abs'](_0x1062f5)<0x64)_0x1062f5=_0x1062f5['toFixed'](0x3);else{if(Math[_0x179815(0x14c)](_0x1062f5)<0x3e8)_0x1062f5=_0x1062f5[_0x179815(0x142)](0x2);else _0x1062f5=_0x1062f5[_0x179815(0x142)](0x2);}}}}}}else _0x1062f5=Number('0')[_0x179815(0x142)](0x2);}else _0x4c3091=Number('0')[_0x179815(0x142)](0x2);return{'value':_0x1062f5,'change':_0x4c3091,'leftTxt':_0x59152c,'rightTxt':_0x2b0d94};}async function getStartingBalances(_0x4afe01,_0x5895e1=!![]){const _0x1e520c=_0xe582ac;if(_0x4afe01[_0x1e520c(0xaa)]!==0x0){const [_0x385ce6,_0x394e58,_0x2fc2ff]=getPerf(_0x4afe01[0x0],!![]);let _0x2ed7a2=[];config[_0x1e520c(0x170)][_0x1e520c(0x187)](_0x495c89=>{const _0x5c2f78=_0x1e520c;let _0x44787c=0x0,_0x568473;config[_0x5c2f78(0xcc)][_0x5c2f78(0x187)](_0x24d971=>{const _0x223ea6=_0x5c2f78;let _0x2471ca=_0x24d971['changes'][_0x223ea6(0x90)](_0x16de9b=>_0x16de9b[_0x223ea6(0x140)]==_0x495c89[_0x223ea6(0x140)]);if(_0x2471ca){_0x44787c+=_0x2471ca[_0x223ea6(0x1f7)];if(!_0x568473)_0x568473=_0x2471ca['price'];}}),_0x2ed7a2[_0x5c2f78(0x1bd)]({'coin':_0x495c89[_0x5c2f78(0x140)],'number':_0x44787c,'initialprice':_0x568473});});const _0x5c6365={'basecoin':_0x385ce6,'eur':_0x394e58,'usd':_0x2fc2ff,'coins':_0x2ed7a2};if(_0x5895e1)proxyEmit(_0x1e520c(0xad),_0x5c6365);startingBalances=_0x5c6365;}}function headlessMode(_0x4d4839){const _0x3bb1ef=_0xe582ac;let _0x133879=_0x4d4839[_0x3bb1ef(0x170)],_0x4c1651=_0x4d4839[_0x3bb1ef(0x1ee)],_0x5d398d=[];for(let _0x36ab68 of _0x133879){if(_0x36ab68['coin']!=config[_0x3bb1ef(0x183)]){if(_0x36ab68[_0x3bb1ef(0xb2)]>=_0x4c1651/0x64){if(_0x36ab68['valid'])_0x5d398d[_0x3bb1ef(0x1bd)](_0x36ab68);}else{if(_0x36ab68['delta']<=-_0x4c1651/0x64){if(_0x36ab68[_0x3bb1ef(0x194)])_0x5d398d[_0x3bb1ef(0x1bd)](_0x36ab68);}}}}_0x5d398d[_0x3bb1ef(0xaa)]>0x0&&placeOrder(_0x5d398d);}function notifyBalance(_0x347748){const _0x3a2c9d=_0xe582ac;let _0x81468e=_0x347748[_0x3a2c9d(0x170)],_0x14a720=_0x347748[_0x3a2c9d(0x1ee)],_0x5d4bce=[];for(let _0x3b177f of _0x81468e){if(_0x3b177f[_0x3a2c9d(0x140)]!=config[_0x3a2c9d(0x183)]){if(_0x3b177f[_0x3a2c9d(0xb2)]>=_0x14a720/0x64){if(_0x3b177f[_0x3a2c9d(0x194)])_0x5d4bce[_0x3a2c9d(0x1bd)](_0x3b177f);}else{if(_0x3b177f[_0x3a2c9d(0xb2)]<=-_0x14a720/0x64){if(_0x3b177f[_0x3a2c9d(0x194)])_0x5d4bce['push'](_0x3b177f);}}}}if(_0x5d4bce[_0x3a2c9d(0xaa)]>0x0){let _0x2342ac=_0x5d4bce['map'](_0x101e74=>_0x101e74[_0x3a2c9d(0x140)]);_0x2342ac[_0x3a2c9d(0x1c1)]();let _0x5bab65=_0x2342ac[_0x3a2c9d(0x171)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3a2c9d(0xec),_0x3a2c9d(0x1e1));lastCoinsToBalance=_0x5bab65;}}function symbolToCoin(_0x3f2646){const _0x2a5123=_0xe582ac;let _0x4a3383;if(_0x3f2646[_0x2a5123(0x210)]('/'+config[_0x2a5123(0x183)]))_0x4a3383=_0x3f2646['replace']('/'+config[_0x2a5123(0x183)],'');if(_0x3f2646[_0x2a5123(0x210)](config[_0x2a5123(0x183)]+'/'))_0x4a3383=_0x3f2646[_0x2a5123(0x1e0)](config[_0x2a5123(0x183)]+'/','');return _0x4a3383;}async function unlockOrders(){const _0x3e078e=_0xe582ac;if(allOrdersPlaced&&lockOrders==ORDERS[_0x3e078e(0x1ec)]){logger[_0x3e078e(0x1f2)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x3e078e(0x13b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x237547=await getCoins();[currentCoins,currentCoinsAll]=_0x237547,validateOrdersState=_0x3e078e(0xaf),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger['debug'](_0x3e078e(0xa4));}}async function validateOrders(_0x3d3b4b){const _0x5ab6d1=_0xe582ac;if(_0x3d3b4b)validateOrdersState=_0x3d3b4b;logger[_0x5ab6d1(0x1f2)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x5ab6d1(0x12c)+(lockOrders==0x1?_0x5ab6d1(0xf7):lockOrders==0x2?_0x5ab6d1(0x176):_0x5ab6d1(0xfa)));let _0x5aa145=[],_0x19213f=config[_0x5ab6d1(0x17d)]==_0x5ab6d1(0x19c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5ab6d1(0x11f)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5ab6d1(0x1ec)])return;logger[_0x5ab6d1(0x1f2)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x5ab6d1(0x187)](_0x1b2061=>{const _0x55122b=_0x5ab6d1;let _0x5b0b53=![];_0x1b2061['filled']>0x0&&(_0x5b0b53=!![]),_0x5aa145[_0x55122b(0x1bd)](_0x5b0b53),_0x5b0b53&&config[_0x55122b(0x17d)]!=_0x55122b(0x19c)&&logHistory(_0x55122b(0xfe),_0x55122b(0x20f)+_0x1b2061['symbol']+'\x20'+_0x1b2061['side']+'\x20#'+formatResult(_0x1b2061[_0x55122b(0xf5)],0x8)+'\x20@'+formatResult(_0x1b2061[_0x55122b(0x100)],0x8));}),_0x5aa145[_0x5ab6d1(0x187)]((_0x13f689,_0x195e62)=>{const _0x3b8304=_0x5ab6d1;if(_0x13f689)lastOrders[_0x3b8304(0x13d)](_0x195e62,0x1);}),persistOpenOrders(lastOrders);const _0x3f18f4=coolingDown?_0x5ab6d1(0xce):_0x5ab6d1(0xea);if(validateOrdersState==_0x5ab6d1(0xaf)){validateOrdersState=_0x5ab6d1(0x95);if(_0x5aa145['includes'](![])){if(config[_0x5ab6d1(0x17d)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5ab6d1(0x95)){if(_0x5aa145[_0x5ab6d1(0x210)](![])){}else{if(allOrdersPlaced){if(config[_0x5ab6d1(0x17d)]==_0x5ab6d1(0x19c)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5ab6d1(0x15a))_0x5aa145[_0x5ab6d1(0x210)](![])&&(config[_0x5ab6d1(0x17d)]==_0x5ab6d1(0x19c)?logHistory(_0x5ab6d1(0x18f),_0x5ab6d1(0xe1)+Math[_0x5ab6d1(0x115)](_0x19213f*validateOrderInterval/0xea60)+_0x5ab6d1(0xd9)+_0x3f18f4):(await cancelOrders(),logHistory(_0x5ab6d1(0x18f),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x5ab6d1(0x115)](_0x19213f*validateOrderInterval/0xea60)+_0x5ab6d1(0xd9)+_0x3f18f4))),await unlockOrders();else{if(validateOrdersState==_0x5ab6d1(0x167)){if(config[_0x5ab6d1(0x17d)]!=_0x5ab6d1(0x19c))logHistory(_0x5ab6d1(0x18f),_0x5ab6d1(0x130)+_0x3f18f4);await unlockOrders();}}}}}async function cancelOrders(){const _0x11a532=_0xe582ac;lastOrders[_0x11a532(0x187)](async _0x3359f5=>{const _0x170603=_0x11a532;try{const _0x2e0615=await exchange[_0x170603(0x208)](_0x3359f5[_0x170603(0x1f6)],_0x3359f5[_0x170603(0x18a)]);}catch(_0x3adb0d){if(_0x3adb0d['toString']()[_0x170603(0x210)]('OrderNotFound')){}else await handleError(_0x3adb0d,_0x170603(0x1c0));}});}async function initCoinResults(_0x4a964d){const _0x2b164c=_0xe582ac;_0x4a964d?logger[_0x2b164c(0x1f2)]('Resetting\x20coin\x20results:\x20'+_0x4a964d):logger[_0x2b164c(0x1f2)](_0x2b164c(0x16a)),config[_0x2b164c(0x170)]['forEach'](_0x4dcf38=>{const _0x5149ad=_0x2b164c;if(!_0x4dcf38[_0x5149ad(0xab)]&&_0x4dcf38[_0x5149ad(0x140)]!=config[_0x5149ad(0x183)]){const _0x7c90eb=currentCoins['find'](_0x295758=>_0x295758[_0x5149ad(0x140)]==_0x4dcf38['coin']),_0x18dfb6=global[_0x5149ad(0x10c)][noslash(_0x4dcf38[_0x5149ad(0x18a)])];let _0x25457d=_0x7c90eb?_0x7c90eb[_0x5149ad(0x1f7)]:null,_0x129109=_0x4dcf38[_0x5149ad(0x1ad)]?0x1/_0x18dfb6:_0x18dfb6,_0x204f22;config['liquidity'][_0x5149ad(0x187)](_0xbfd4cb=>{const _0x389dd6=_0x5149ad;!_0x204f22&&(_0x204f22=_0xbfd4cb['changes'][_0x389dd6(0x90)](_0x4c001e=>_0x4c001e[_0x389dd6(0x140)]==_0x4dcf38[_0x389dd6(0x140)]),_0x204f22&&(_0x25457d=_0x204f22[_0x389dd6(0x1f7)],_0x129109=_0x204f22[_0x389dd6(0x100)]));});let _0x287efb=dbCoinResults[_0x5149ad(0x16e)](_0x5149ad(0x160))['find']({'coin':_0x4dcf38[_0x5149ad(0x140)]})[_0x5149ad(0x151)]();if(!_0x287efb){const _0x459c5e={'coin':_0x4dcf38[_0x5149ad(0x140)],'number':_0x25457d,'breakeven':_0x129109,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5149ad(0x16e)](_0x5149ad(0x160))['push'](_0x459c5e)[_0x5149ad(0x15d)]();}else{if(_0x4a964d&&_0x4dcf38[_0x5149ad(0x140)]==_0x4a964d){const _0xe06c05={'coin':_0x4dcf38[_0x5149ad(0x140)],'number':_0x25457d,'breakeven':_0x129109,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5149ad(0x16e)](_0x5149ad(0x160))['find']({'coin':_0x4dcf38['coin']})['assign'](_0xe06c05)['write']();}}}});}async function updateCoinResults(_0x30e4a0,_0x1d9033=![]){const _0xf663d3=_0xe582ac;let _0x29b10d,_0x304ac5,_0x4b03b7,_0x282820,_0x589879,_0x5b76fd,_0x42f893=dbCoinResults[_0xf663d3(0x16e)]('coins')[_0xf663d3(0x90)]({'coin':_0x30e4a0[_0xf663d3(0x140)]})[_0xf663d3(0x151)](),_0x50ef38=![];Object[_0xf663d3(0x207)](_0x42f893)[_0xf663d3(0x187)](([_0x23bdc3,_0x444b3c])=>{if(_0x444b3c==null)_0x50ef38=!![];});(!_0x42f893||_0x50ef38)&&(await initCoinResults(_0x30e4a0[_0xf663d3(0x140)]),_0x42f893=dbCoinResults[_0xf663d3(0x16e)](_0xf663d3(0x160))[_0xf663d3(0x90)]({'coin':_0x30e4a0['coin']})[_0xf663d3(0x151)]());_0x30e4a0[_0xf663d3(0x1ad)]&&(_0x5b76fd={'filled':_0x30e4a0['filled']*_0x30e4a0[_0xf663d3(0x100)],'amount':_0x30e4a0[_0xf663d3(0xf5)]*_0x30e4a0['price'],'side':_0x30e4a0[_0xf663d3(0x166)]==_0xf663d3(0xe7)?_0xf663d3(0x104):'sell','price':0x1/_0x30e4a0[_0xf663d3(0x100)]},_0x30e4a0={..._0x30e4a0,..._0x5b76fd});_0x1d9033?_0x304ac5=_0x30e4a0[_0xf663d3(0x166)]=='buy'?_0x42f893[_0xf663d3(0x1f7)]+_0x30e4a0[_0xf663d3(0xf5)]:_0x42f893[_0xf663d3(0x1f7)]-_0x30e4a0[_0xf663d3(0xf5)]:_0x304ac5=await getCoinNumber(_0x30e4a0['coin']);if(_0x30e4a0[_0xf663d3(0xf1)]&&_0x30e4a0[_0xf663d3(0xf1)][_0xf663d3(0x203)]==config[_0xf663d3(0x183)])_0x29b10d=_0x30e4a0[_0xf663d3(0xf1)]['cost'];else{if(_0x30e4a0[_0xf663d3(0xf1)]&&_0x30e4a0['fee'][_0xf663d3(0x203)]==_0xf663d3(0x152)&&!_0x1d9033)_0x29b10d=_0x30e4a0[_0xf663d3(0xf1)][_0xf663d3(0x14d)]*global[_0xf663d3(0x10c)][_0xf663d3(0x152)+config['basecoin']];else _0x29b10d=defaultFee*_0x30e4a0[_0xf663d3(0xf5)]*_0x30e4a0[_0xf663d3(0x100)];}_0x30e4a0[_0xf663d3(0x166)]==_0xf663d3(0x104)?(_0x4b03b7=_0x304ac5!=0x0?(_0x42f893[_0xf663d3(0x188)]*_0x42f893[_0xf663d3(0x1f7)]+_0x30e4a0[_0xf663d3(0x100)]*(_0x304ac5-_0x42f893['number'])+_0x29b10d)/_0x304ac5:0x0,_0x282820=_0x42f893[_0xf663d3(0x1d2)]):(_0x4b03b7=_0x304ac5!=0x0?(_0x42f893[_0xf663d3(0x188)]*_0x42f893[_0xf663d3(0x1f7)]-_0x30e4a0[_0xf663d3(0x100)]*(_0x42f893[_0xf663d3(0x1f7)]-_0x304ac5)+_0x29b10d)/_0x304ac5:0x0,_0x282820=_0x42f893[_0xf663d3(0x1d2)]+(_0x30e4a0[_0xf663d3(0x100)]-_0x42f893[_0xf663d3(0x188)])*_0x30e4a0['filled']);_0x589879=(_0x30e4a0[_0xf663d3(0x100)]-_0x4b03b7-_0x29b10d/_0x30e4a0[_0xf663d3(0xf5)])*_0x304ac5;let _0x34faf3={'coin':_0x30e4a0[_0xf663d3(0x140)],'number':_0x304ac5,'breakeven':formatResult(_0x4b03b7,0x8),'realized':formatResult(_0x282820,0x8),'unrealized':formatResult(_0x589879,0x8),'fees':formatResult(_0x42f893[_0xf663d3(0x1c7)]+_0x29b10d,0x8),'sells':_0x30e4a0[_0xf663d3(0x166)]=='sell'?_0x42f893[_0xf663d3(0xc7)]+0x1:_0x42f893[_0xf663d3(0xc7)],'buys':_0x30e4a0['side']==_0xf663d3(0x104)?_0x42f893[_0xf663d3(0x136)]+0x1:_0x42f893[_0xf663d3(0x136)]};dbCoinResults[_0xf663d3(0x16e)](_0xf663d3(0x160))['find']({'coin':_0x30e4a0[_0xf663d3(0x140)]})[_0xf663d3(0x123)](_0x34faf3)[_0xf663d3(0x15d)]();if(!_0x1d9033){if(_0x30e4a0[_0xf663d3(0xf1)]&&_0x30e4a0['fee'][_0xf663d3(0x203)]==_0xf663d3(0x152)){const _0x40741e=currentCoins[_0xf663d3(0x90)](_0x2463ab=>_0x2463ab[_0xf663d3(0x140)]==_0xf663d3(0x152));if(_0x40741e){let _0xc45471=dbCoinResults[_0xf663d3(0x16e)](_0xf663d3(0x160))['find']({'coin':_0xf663d3(0x152)})[_0xf663d3(0x151)]();_0x34faf3={..._0xc45471,'number':_0x40741e[_0xf663d3(0x1f7)]},dbCoinResults['get'](_0xf663d3(0x160))[_0xf663d3(0x90)]({'coin':_0xf663d3(0x152)})[_0xf663d3(0x123)](_0x34faf3)['write']();}}}}async function placeOrder(_0x4868a0){const _0xefc577=_0xe582ac,_0x5ee20d=config['ordertype']=='market'?_0xefc577(0x19c):_0xefc577(0x1e7);if(lockOrders==ORDERS[_0xefc577(0xbd)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xefc577(0x1ec)],allOrdersPlaced=![],validateOrdersState=_0xefc577(0xaf);let _0x2847c7=![];lastOrders=[];for(const _0x4fb644 of _0x4868a0){let _0x3a53e9,_0x3465d2,_0x370403,_0x1aa871,_0x4845b5,_0x9290ff=_0x4fb644[_0xefc577(0x18a)];try{const _0x414b14=await exchange[_0xefc577(0xc3)](_0x9290ff);_0x3a53e9=_0x4fb644[_0xefc577(0x1ad)]?0x1/_0x4fb644[_0xefc577(0x1ba)]:_0x4fb644[_0xefc577(0x1ba)],_0x3465d2=_0x414b14[_0xefc577(0x12f)],_0x370403=_0x414b14[_0xefc577(0x1c3)];_0x4fb644[_0xefc577(0x1ad)]?(_0x1aa871=_0x4fb644[_0xefc577(0x166)]=='buy'?_0xefc577(0xe7):_0xefc577(0x104),_0x4845b5=Math[_0xefc577(0x14c)](_0x4fb644['trade'])/_0x3a53e9):(_0x1aa871=_0x4fb644[_0xefc577(0x166)],_0x4845b5=Math[_0xefc577(0x14c)](_0x4fb644[_0xefc577(0x10f)]));_0x5ee20d==_0xefc577(0x1e7)&&(config[_0xefc577(0x17d)]==_0xefc577(0xc0)&&(_0x3a53e9=_0x1aa871=='buy'?_0x3465d2:_0x370403),config[_0xefc577(0x17d)]==_0xefc577(0x1a0)&&(_0x3a53e9=_0x1aa871==_0xefc577(0x104)?_0x370403:_0x3465d2));_0x4845b5=formatResult(_0x4845b5,0x8),_0x3a53e9=formatResult(_0x3a53e9,0x8);const _0x2a813c=_0x1aa871==_0xefc577(0xe7)?config[_0xefc577(0x1b7)]?String[_0xefc577(0x133)]('0x'+config[_0xefc577(0x1b7)])+'\x20':'':config[_0xefc577(0x1d9)]?String[_0xefc577(0x133)]('0x'+config[_0xefc577(0x1d9)])+'\x20':'',_0x4e858e=_0x5ee20d==_0xefc577(0x19c)?_0xefc577(0x132):config[_0xefc577(0x17d)]==_0xefc577(0xc0)?_0xefc577(0x159):_0xefc577(0x20e),_0x18a715=(Math[_0xefc577(0x10a)](Math[_0xefc577(0x180)]()*0x35a4e900)+0x5f5e100)[_0xefc577(0x157)]();lastOrders[_0xefc577(0x1bd)]({'customId':_0x18a715,'symbol':_0x9290ff,'coin':_0x4fb644[_0xefc577(0x140)],'amount':_0x4845b5,'price':_0x3a53e9,'side':_0x1aa871,'reverse':_0x4fb644[_0xefc577(0x1ad)],'filled':0x0});if(_0x5ee20d==_0xefc577(0x19c))logHistory(_0xefc577(0xfe),''+_0x2a813c+_0x4e858e+_0xefc577(0x10b)+_0x9290ff+'\x20'+_0x1aa871+'\x20#'+formatResult(_0x4845b5,0x8)+'\x20@'+formatResult(_0x3a53e9,0x8));else logHistory('order',''+_0x2a813c+_0x4e858e+_0xefc577(0x10b)+_0x9290ff+'\x20'+_0x1aa871+'\x20#'+formatResult(_0x4845b5,0x8)+'\x20@'+formatResult(_0x3a53e9,0x8));const _0x4ac0f0=await exchange[_0xefc577(0xa8)](_0x9290ff,_0x5ee20d,_0x1aa871,_0x4845b5,_0x3a53e9);logger[_0xefc577(0x1f2)]('ID:\x20'+_0x4ac0f0['id']+_0xefc577(0x1dc)+_0x18a715);const _0x2ad9c8=lastOrders['length']-0x1;if(_0x2ad9c8>=0x0&&lastOrders[_0x2ad9c8][_0xefc577(0x13c)]==_0x18a715){lastOrders[_0x2ad9c8][_0xefc577(0x1f6)]=_0x4ac0f0['id'];if(_0x4ac0f0[_0xefc577(0xe0)])lastOrders[_0x2ad9c8]['amount']=_0x4ac0f0[_0xefc577(0xe0)];if(_0x4ac0f0[_0xefc577(0x100)])lastOrders[_0x2ad9c8][_0xefc577(0x100)]=_0x4ac0f0['price'];lastOrders[_0x2ad9c8][_0xefc577(0xf1)]=_0x4ac0f0[_0xefc577(0xf1)];}if(config[_0xefc577(0x1d1)]!=0x0){let _0x20a7ba=null;if(cooldownTracker['length']==config[_0xefc577(0x1d1)]-0x1)_0x20a7ba=cooldownTracker[_0xefc577(0x9b)]();const _0x229f1c=getTimeStamp();cooldownTracker['push'](_0x229f1c);if(_0x20a7ba){const _0x21d4cf=fns[_0xefc577(0xe5)](new Date(_0x229f1c),new Date(_0x20a7ba));if(_0x21d4cf<cooldownInterval){logHistory('error',_0xefc577(0x1c4)+config[_0xefc577(0x1d1)]+_0xefc577(0xa0)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x23abbc){if(_0x23abbc[_0xefc577(0x157)]()[_0xefc577(0x210)](_0xefc577(0xca)))lastOrders=lastOrders[_0xefc577(0x154)](_0x31f160=>_0x31f160[_0xefc577(0x18a)]!=_0x9290ff),logHistory(_0xefc577(0x1fb),_0xefc577(0x107)+_0x9290ff),_0x2847c7=!![];else{if(_0x23abbc[_0xefc577(0x157)]()['includes'](_0xefc577(0x1d8)))lastOrders=lastOrders[_0xefc577(0x154)](_0xc508f2=>_0xc508f2[_0xefc577(0x18a)]!=_0x9290ff),logHistory('error',_0xefc577(0xc5)+_0x9290ff),_0x2847c7=!![];else{if(_0x23abbc[_0xefc577(0x157)]()[_0xefc577(0x210)]('InvalidOrder'))lastOrders=lastOrders['filter'](_0x53aa34=>_0x53aa34[_0xefc577(0x18a)]!=_0x9290ff),logHistory(_0xefc577(0x1fb),_0xefc577(0x196)+_0x9290ff),_0x2847c7=!![];else _0x23abbc[_0xefc577(0x157)]()[_0xefc577(0x210)](_0xefc577(0x1b6))?(lastOrders=lastOrders[_0xefc577(0x154)](_0x1a7617=>_0x1a7617[_0xefc577(0x18a)]!=_0x9290ff),logHistory(_0xefc577(0x1fb),_0xefc577(0x107)+_0x9290ff),_0x2847c7=!![]):(lastOrders=lastOrders[_0xefc577(0x154)](_0x54faae=>_0x54faae[_0xefc577(0x18a)]!=_0x9290ff),await handleError(_0x23abbc,_0xefc577(0xff),_0x9290ff));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xefc577(0xaa)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x34ab7c=config[_0xefc577(0x17d)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xb57e65=_0xefc577;validateOrders(_0xb57e65(0x15a));},_0x34ab7c);}else unlockOrders();_0x2847c7&&config[_0xefc577(0x124)]&&await pauseBot(_0xefc577(0x1fd)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0xefc577(0x18f),_0xefc577(0x1df)));}else{if(coolingDown)!config[_0xefc577(0x124)]&&logHistory(_0xefc577(0x1fb),_0xefc577(0x128));else lockOrders!=ORDERS[_0xefc577(0xbd)]&&(!config['headless']&&(config[_0xefc577(0x17d)]==_0xefc577(0x19c)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0xefc577(0x1a7))));}}function persistOpenOrders(_0x586c28){const _0x2d0076=_0xe582ac,_0x65d3d={...config,'openOrders':_0x586c28};let _0x1ead33=dbConfig['get'](_0x2d0076(0x192))[_0x2d0076(0x90)]({'botID':botID})[_0x2d0076(0x151)]();_0x1ead33&&dbConfig[_0x2d0076(0x16e)](_0x2d0076(0x192))[_0x2d0076(0x90)]({'botID':botID})[_0x2d0076(0x123)](_0x65d3d)['write']();}function restoreOrders(){const _0x4418cb=_0xe582ac;let _0x171257;config['openOrders']&&allOpenOrders[_0x4418cb(0x187)](_0xd3a7ac=>{const _0x183800=_0x4418cb,_0xec2a9f=config['openOrders'][_0x183800(0x90)](_0x49f8d9=>_0x49f8d9[_0x183800(0x1f6)]==_0xd3a7ac['id']);_0xec2a9f&&(lastOrders[_0x183800(0x1bd)](_0xec2a9f),_0x171257=_0xd3a7ac['timestamp']);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x4418cb(0x1ec)],validateOrdersState=_0x4418cb(0x95),allOrdersPlaced=!![];const _0x9dd19d=new Date()[_0x4418cb(0x105)](),_0x429c11=config[_0x4418cb(0x17d)]==_0x4418cb(0x19c)?validateOrderTimeout*0x3c*0x3e8:config[_0x4418cb(0x11f)]*0x3c*0x3e8;if(_0x171257+_0x429c11>_0x9dd19d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3a8b13=_0x4418cb;validateOrders(_0x3a8b13(0x15a));},_0x171257+_0x429c11-_0x9dd19d);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x6fb69f=_0xe582ac;if(!coinsLoaded){process[_0x6fb69f(0xb4)]({'telegrammsg':_0x6fb69f(0x1ed)},_0x37b802=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x157d1f='';if(config['showname'])_0x157d1f=_0x6fb69f(0x1e2)+config[_0x6fb69f(0x1ce)]+_0x6fb69f(0x190);else _0x157d1f='<b>Bot\x20'+botID+_0x6fb69f(0x190);const _0x3017ca=getKPIs('basecoin'),_0x2b9c6c=getKPIs(_0x6fb69f(0x11c),config[_0x6fb69f(0x11c)]),_0x49afef=getKPIs(_0x6fb69f(0x179)),_0x33aefd=getKPIs('net-fiat',config[_0x6fb69f(0x11c)]);_0x157d1f+=_0x6fb69f(0x185),_0x157d1f+=_0x3017ca[_0x6fb69f(0x11d)]+_0x6fb69f(0xb1)+_0x3017ca[_0x6fb69f(0x151)]+'\x0a',_0x157d1f+=_0x3017ca['rightTxt']+':\x20'+_0x3017ca[_0x6fb69f(0x161)]+'%\x0a',_0x157d1f+=_0x2b9c6c[_0x6fb69f(0x11d)]+_0x6fb69f(0xb1)+_0x2b9c6c['value']+'\x0a',_0x157d1f+=_0x2b9c6c[_0x6fb69f(0x1b9)]+':\x20'+_0x2b9c6c[_0x6fb69f(0x161)]+'%\x0a',_0x157d1f+=_0x49afef['leftTxt']+':\x20'+_0x49afef['value']+'\x20('+config['basecoin']+')\x0a',_0x157d1f+=_0x49afef['rightTxt']+':\x20'+_0x49afef['change']+_0x6fb69f(0x137)+config[_0x6fb69f(0x183)]+')\x0a',_0x157d1f+=_0x33aefd['leftTxt']+':\x20'+_0x33aefd['value']+'\x20('+config['fiat']+')\x0a',_0x157d1f+=_0x33aefd['rightTxt']+':\x20'+_0x33aefd['change']+_0x6fb69f(0x137)+config['fiat']+')\x0a',_0x157d1f+=_0x6fb69f(0x20b),process[_0x6fb69f(0xb4)]({'telegrammsg':_0x157d1f},_0x4f8415=>{});}async function sendPortfolioTelegram(){const _0x3f8d7f=_0xe582ac;if(!coinsLoaded){process[_0x3f8d7f(0xb4)]({'telegrammsg':_0x3f8d7f(0x1ed)},_0xfe68c6=>{});return;}let _0x121424='';if(config[_0x3f8d7f(0x94)])_0x121424='<b>'+config['botname']+_0x3f8d7f(0x109);else _0x121424=_0x3f8d7f(0x153)+botID+_0x3f8d7f(0x109);_0x121424+=_0x3f8d7f(0x185),_0x121424+='-------------------------------\x0a',_0x121424+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x121424+=_0x3f8d7f(0xb0),currentCoins[_0x3f8d7f(0x187)](_0x2ff83e=>{const _0x363f93=_0x3f8d7f;_0x121424+=_0x2ff83e['coin']['padEnd'](0x7)+'|\x20'+formatPad(_0x2ff83e[_0x363f93(0xb6)],0x2,0x6)+'|\x20'+formatPad(_0x2ff83e[_0x363f93(0x116)],0x2,0x6)+'|\x20'+formatPad(_0x2ff83e[_0x363f93(0xb2)]*0x64,0x2,0x6)+'\x0a';}),_0x121424+=_0x3f8d7f(0x20b),process['send']({'telegrammsg':_0x121424},_0x459bb6=>{});}function formatPad(_0x2be0eb,_0x13cc08,_0x11aba9){const _0x4ad239=_0xe582ac,_0x3ac1dc=formatResultString(_0x2be0eb,_0x13cc08);return _0x3ac1dc?_0x3ac1dc[_0x4ad239(0x155)](_0x11aba9):''['padStart'](_0x11aba9);}function logHistory(_0x128a33,_0x42f41d,_0x32226e=''){const _0x593f28=_0xe582ac;let _0x5079e4={'time':getTimeStamp(),'type':_0x128a33,'event':_0x42f41d};dbLogs[_0x593f28(0x16e)](_0x593f28(0x1b0))[_0x593f28(0x1bd)](_0x5079e4)[_0x593f28(0x15d)]();if(_0x32226e=='')_0x32226e=_0x42f41d;proxyEmit(_0x593f28(0xa5),{'log':_0x5079e4,'summary':_0x32226e}),process[_0x593f28(0xb4)]({'telegram':{..._0x5079e4,'botname':config['botname'],'showname':config['showname']}},_0x3482d6=>{}),logger['full'](''+_0x5079e4[_0x593f28(0xa5)]);}function emitHistory(_0x2430da={}){const _0x332cf5=_0xe582ac;Object[_0x332cf5(0x18c)](_0x2430da)[_0x332cf5(0xaa)]==0x0&&(_0x2430da={'type':[_0x332cf5(0xfe),_0x332cf5(0xa5)],'event':'','page':0x1});if(_0x2430da[_0x332cf5(0xf3)][_0x332cf5(0x210)](_0x332cf5(0xa5)))_0x2430da[_0x332cf5(0xf3)][_0x332cf5(0x13d)](_0x2430da[_0x332cf5(0xf3)][_0x332cf5(0x143)](_0x332cf5(0xa5)),0x1,_0x332cf5(0x1fb),_0x332cf5(0xec),_0x332cf5(0x18f));if(dbLogs[_0x332cf5(0x1d0)](_0x332cf5(0x1b0))['value']()){let _0x24e09c=dbLogs[_0x332cf5(0x16e)](_0x332cf5(0x1b0))[_0x332cf5(0x154)](_0x1b336a=>{const _0x1cbe4e=_0x332cf5;if(_0x2430da[_0x1cbe4e(0xf3)][_0x1cbe4e(0xaa)]==0x0)return![];else return _0x2430da[_0x1cbe4e(0xf3)][_0x1cbe4e(0x210)](_0x1b336a['type']);})[_0x332cf5(0x154)](_0x3b5542=>{const _0x37a929=_0x332cf5;if(_0x2430da[_0x37a929(0xa5)]=='')return!![];else return _0x3b5542[_0x37a929(0xa5)][_0x37a929(0x19b)]()['includes'](_0x2430da[_0x37a929(0xa5)][_0x37a929(0x19b)]());})['sortBy']('time'),_0x7dd635=_0x24e09c[_0x332cf5(0x151)]()['length'];_0x24e09c=_0x24e09c[_0x332cf5(0x1ad)]()[_0x332cf5(0x211)]((_0x2430da['page']-0x1)*logPageSize,_0x2430da[_0x332cf5(0x11a)]*logPageSize-0x1)[_0x332cf5(0x1ad)]()[_0x332cf5(0x151)](),proxyEmit(_0x332cf5(0x148),{'logs':_0x24e09c,'total':_0x7dd635});}else proxyEmit(_0x332cf5(0x148),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x214865){const _0x55b1aa=_0xe582ac;if(dbLogs[_0x55b1aa(0x1d0)](_0x55b1aa(0x1b0))[_0x55b1aa(0x151)]()){const _0x386275=dbLogs[_0x55b1aa(0x16e)]('logs')[_0x55b1aa(0xf6)](_0x55b1aa(0xe3))[_0x55b1aa(0x154)](_0x20c0f0=>{const _0x544488=_0x55b1aa;return _0x20c0f0['type']==_0x544488(0xfe);})[_0x55b1aa(0x151)]();dbLogs[_0x55b1aa(0x16e)](_0x55b1aa(0x1b0))[_0x55b1aa(0x127)]()[_0x55b1aa(0x15d)](),dbLogs['get'](_0x55b1aa(0x1b0))[_0x55b1aa(0x123)](_0x386275)[_0x55b1aa(0x15d)](),emitHistory(_0x214865);}}async function pauseBot(_0x5b65a1=''){const _0x32475f=_0xe582ac,_0x458c58=new Date()[_0x32475f(0x105)]();if(!lastErrorShown||_0x458c58-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x458c58;!lastBotPause?(lastBotPause=_0x458c58,consecutivePauses=0x1):(_0x458c58-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x32475f(0x9c)},_0x4fed2b=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x32475f(0x105)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x5b65a1)_0x5b65a1+='\x20|\x20';logHistory('error',_0x5b65a1+_0x32475f(0x1ff)+pauseBotInterval/0xea60+_0x32475f(0x199)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x5bd836=_0xe582ac;process[_0x5bd836(0xb4)]({'stop':_0x5bd836(0xae)},_0x23a367=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4a0598,_0x439cc6){const _0xa6dfa2=_0xe582ac;if(_0x4a0598[_0xa6dfa2(0x157)]()[_0xa6dfa2(0x210)](_0xa6dfa2(0x93)))return logHistory('error',config[_0xa6dfa2(0x200)]+_0xa6dfa2(0x1a5)),![];else{if(_0x4a0598['toString']()[_0xa6dfa2(0x210)](_0xa6dfa2(0x12d)))return logHistory(_0xa6dfa2(0x1fb),config['exchange']+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x4a0598[_0xa6dfa2(0x157)]()['includes'](_0xa6dfa2(0xcf)))return logHistory(_0xa6dfa2(0x1fb),config[_0xa6dfa2(0x200)]+_0xa6dfa2(0xc9)),logHistory(_0xa6dfa2(0x1fb),_0xa6dfa2(0xc1)),![];else await handleError(_0x4a0598,_0x439cc6);}}}async function handleError(_0x1426f7,_0x405f6c,_0x1a3f6d=''){const _0x17f73a=_0xe582ac,_0x53db09=config[_0x17f73a(0x200)]||'Exchange';if(_0x1426f7[_0x17f73a(0x157)]()['includes'](_0x17f73a(0x91))||_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)]('RateLimitExceeded'))await pauseBot(config[_0x17f73a(0x200)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)]('ExchangeNotAvailable')||_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)](_0x17f73a(0x202)))await pauseBot(config[_0x17f73a(0x200)]+'\x20not\x20available');else{if(_0x1426f7[_0x17f73a(0x157)]()['includes'](_0x17f73a(0x1e3)))await pauseBot(config[_0x17f73a(0x200)]+_0x17f73a(0x1cb));else{if(_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)](_0x17f73a(0x1b8)))await pauseBot(config[_0x17f73a(0x200)]+'\x20closed\x20the\x20connection');else{if(_0x1426f7 instanceof ccxt[_0x17f73a(0x19a)])logger['debug'](_0x17f73a(0xdb),_0x1426f7),await pauseBot(config[_0x17f73a(0x200)]+_0x17f73a(0x14f));else{if(_0x1426f7[_0x17f73a(0x157)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x17f73a(0x1fb),_0x405f6c+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x17f73a(0x1fb),_0x17f73a(0x141)),await killBot();else{if(_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)]('InvalidNonce'))logHistory(_0x17f73a(0x1fb),_0x405f6c+_0x17f73a(0x198)),logHistory('error',_0x17f73a(0x141)),await killBot();else{if(_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)](_0x17f73a(0x93)))logHistory(_0x17f73a(0x1fb),_0x405f6c+'\x20|\x20'+config['exchange']+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x17f73a(0x1fb),_0x17f73a(0x141)),await killBot();else{if(_0x1426f7[_0x17f73a(0x157)]()[_0x17f73a(0x210)](_0x17f73a(0x12d)))logHistory(_0x17f73a(0x1fb),_0x405f6c+_0x17f73a(0x14a)+config[_0x17f73a(0x200)]+_0x17f73a(0x172)),logHistory('error',_0x17f73a(0x141)),await killBot();else{if(_0x1426f7[_0x17f73a(0x157)]()['includes'](_0x17f73a(0xcf)))logHistory(_0x17f73a(0x1fb),_0x405f6c+'\x20|\x20'+config['exchange']+_0x17f73a(0x98)),logHistory(_0x17f73a(0x1fb),_0x17f73a(0x141)),await killBot();else{if(_0x1426f7['toString']()['includes'](_0x17f73a(0x12b)))logHistory('error',_0x405f6c+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x1a3f6d);else _0x1426f7 instanceof ccxt['ExchangeError']?(logger['debug']('Uncaught\x20ExchangeError:',_0x1426f7),logHistory('error',_0x405f6c+_0x17f73a(0x14a)+config[_0x17f73a(0x200)]+_0x17f73a(0x110))):(logger['full'](_0x405f6c+_0x17f73a(0xb7),_0x1426f7),await pauseBot(_0x17f73a(0xba)));}}}}}}}}}}}function formatResult(_0x4628c2,_0x5249b9){const _0x1d2970=_0xe582ac;return parseFloat(_0x4628c2[_0x1d2970(0x142)](_0x5249b9));}function formatResultTruncate(_0x4e8a01,_0x14106b){const _0x1f9730=_0xe582ac;let _0x11bdd5=formatResultString(_0x4e8a01,0xa),_0x3c960d=_0x11bdd5[_0x1f9730(0x143)]('.');return _0x3c960d!=-0x1&&(_0x11bdd5=_0x11bdd5[_0x1f9730(0x211)](0x0,_0x3c960d+_0x14106b+0x1)),Number(_0x11bdd5);}function formatResultString(_0x294219,_0x35a1fb){const _0x1d1304=_0xe582ac;let _0x2f627c;if(!(''+_0x294219)['includes']('e'))_0x2f627c=+(Math[_0x1d1304(0x115)](_0x294219+'e+'+_0x35a1fb)+'e-'+_0x35a1fb);else{let _0xfd6107=(''+_0x294219)[_0x1d1304(0x97)]('e'),_0x6372b9='';+_0xfd6107[0x1]+_0x35a1fb>0x0&&(_0x6372b9='+'),_0x2f627c=+(Math[_0x1d1304(0x115)](+_0xfd6107[0x0]+'e'+_0x6372b9+(+_0xfd6107[0x1]+_0x35a1fb))+'e-'+_0x35a1fb);}return Number(_0x2f627c)[_0x1d1304(0x142)](_0x35a1fb);}function getServerTime(){const _0x30adc7=_0xe582ac,_0x35a519=new Date();return _0x35a519[_0x30adc7(0x149)]()+'/'+(_0x35a519[_0x30adc7(0x106)]()+0x1)[_0x30adc7(0x157)]()[_0x30adc7(0x155)](0x2,'0')+'/'+_0x35a519[_0x30adc7(0xed)]()[_0x30adc7(0x157)]()[_0x30adc7(0x155)](0x2,'0')+'\x20'+_0x35a519[_0x30adc7(0x1d6)]()[_0x30adc7(0x157)]()[_0x30adc7(0x155)](0x2,'0')+':'+_0x35a519[_0x30adc7(0x1fe)]()['toString']()[_0x30adc7(0x155)](0x2,'0')+':'+_0x35a519[_0x30adc7(0x1c2)]()[_0x30adc7(0x157)]()[_0x30adc7(0x155)](0x2,'0');}function getTimeStamp(){const _0x5c20b0=_0xe582ac,_0x464db9=shiftedTime();return _0x464db9[_0x5c20b0(0x149)]()+'/'+(_0x464db9[_0x5c20b0(0x106)]()+0x1)[_0x5c20b0(0x157)]()['padStart'](0x2,'0')+'/'+_0x464db9['getDate']()[_0x5c20b0(0x157)]()['padStart'](0x2,'0')+'\x20'+_0x464db9[_0x5c20b0(0x1d6)]()[_0x5c20b0(0x157)]()[_0x5c20b0(0x155)](0x2,'0')+':'+_0x464db9['getMinutes']()[_0x5c20b0(0x157)]()[_0x5c20b0(0x155)](0x2,'0')+':'+_0x464db9['getSeconds']()['toString']()[_0x5c20b0(0x155)](0x2,'0');}function getDate(){const _0x47da95=_0xe582ac,_0x2151ce=shiftedTime();return _0x2151ce[_0x47da95(0x149)]()+'/'+(_0x2151ce[_0x47da95(0x106)]()+0x1)[_0x47da95(0x157)]()[_0x47da95(0x155)](0x2,'0')+'/'+_0x2151ce[_0x47da95(0xed)]()['toString']()[_0x47da95(0x155)](0x2,'0');}function getHour(){const _0x22d74e=_0xe582ac,_0x423dc2=shiftedTime();return _0x423dc2[_0x22d74e(0x1d6)]()[_0x22d74e(0x157)]()['padStart'](0x2,'0');}function sleep(_0xc9d5e9){return new Promise(_0x2794a7=>setTimeout(_0x2794a7,_0xc9d5e9));}function shiftedTime(){const _0x3f1d8f=_0xe582ac,_0x3cba62=new Date();let _0x2e0e77=_0x3cba62;if(config&&config[_0x3f1d8f(0xfd)]!==0x0)_0x2e0e77=fns['add'](_0x3cba62,{'hours':config['timeshift']});return _0x2e0e77;}function timer(_0x3cff68){const _0x11b35e=_0xe582ac,_0x3d2363=new Date();!lasttime?console[_0x11b35e(0xa7)](getTimeStamp()+_0x11b35e(0x114),_0x3cff68,_0x3d2363):console[_0x11b35e(0xa7)](getTimeStamp()+':\x20timer\x20>',_0x3cff68,(_0x3d2363-lasttime)/0x3e8),lasttime=_0x3d2363;}